# StackOverflow 问答 12499000-12499999

# ios - Xcode 调试模式 - 何时开启/关闭？

> ID：12499001
> 
> 赞同：21
> 
> 时间：2012-09-19T16:31:38.483
> 
> 标签：ios, xcode, debugging

我注意到这在开发模式下工作（在模拟器上测试等）：

```
#ifdef DEBUG
    //do stuff
#endif 
```

但是当我存档和分发测试版本时，即使我仍在使用开发人员配置文件进行构建，该应用程序也不会在调试模式下运行。我希望调试模式始终如此，除非我使用部署配置文件构建并提交给 Apple。

例如，当发送测试构建时，我不想让人们购买应用内购买，所以我做这样的事情：

```
- (BOOL)isUpgradePurchased
{
#ifdef DEBUG
    return YES;
#endif

//do the real stuff to determine if purchased and return YES or NO
} 
```

那么我是否还需要为“Release”设置一个预处理器宏 DEBUG=1？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T16:35:07.300

当前版本的 Xcode 会自动`DEBUG`在新项目中设置宏。但是，它仅针对调试构建模式执行此操作。

您可以在您的项目构建设置中编辑它。

我建议您添加一个新的、单独的宏，而不是编辑 DEBUG 宏。也许你可以只为发布模式添加一个`DISTRIBUTION`或宏。`DEPLOYMENT`

![在此处输入图像描述](../Images/a1c3a4aa791762261f3877459ce2f718.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T16:49:13.570

![在此处输入图像描述](../Images/06ee148e185400268d495b346d30a0ab.png)

您还可以在归档时“编辑方案”来构建调试配置。请参阅 XCode 中“编辑方案”对话框的屏幕截图。

# c++ - GDB - 识别分段错误发生的位置

> ID：12499002
> 
> 赞同：2
> 
> 时间：2012-09-19T16:31:47.460
> 
> 标签：c++, debugging, gdb, segmentation-fault

我的程序出现分段错误，我使用 GDB 对其进行调试。以下是我在 GDB 中的回溯：

```
#0  __memcpy_ssse3_back () at ../sysdeps/x86_64/multiarch/memcpy-ssse3-back.S:199
#1  0x00007f054885b6ef in ViSpectrumAnalyzer::run (this=0x991e98) at vispectrumanalyzer.cpp:66
#2  0x00007f05488573e8 in ViProcessorList::manipulateInput (this=0x991b00, data=0xdf2c30) at viprocessorlist.cpp:64
#3  0x00007f0548852a3b in ViMultiExecutor::runNotify (this=0x991ab0) at vimultiexecutor.cpp:34
#4  0x00007f0548855f9d in ViExecutor::connect (this=0xc104ca031a0, processor=0x1059f0) at viexecutor.cpp:227
#5  0x00007f054c416cd8 in QThreadPrivate::start(void*) () from libQtCore.so.5
#6  0x00007f054a35ae9a in start_thread (arg=0x7f0530e4a700) at pthread_create.c:308
#7  0x00007f054bbb34bd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#8  0x0000000000000000 in ?? () 
```

如果我测试我的程序，回溯 #1 总是在 ViSpectrumAnalyzer 的运行函数中。然而，它总是在不同的地方（+- 5 行）。我现在的问题是：上面的回溯实际上是否表明 SegFault 发生在 ViSpectrumAnalyzer::run().backtrace #0 中提到了 memcpy，我稍后使用了几行（但不是在第 66 行）。对于上面的示例，第 66 行是一个语句：

```
int size = windowSize - bufferSize; 
```

windowSize 和 bufferSize 都是整数。所以我认为SegFault实际上不会在那里发生。我必须补充一点，我很确定我的一些类可能会导致问题，因为它们不是线程安全的（例如：没有互斥锁）。

# scala - 为我现有的 scala 项目获取 ssh / repl

> ID：12499009
> 
> 赞同：0
> 
> 时间：2012-09-19T16:31:58.427
> 
> 标签：scala, ssh, read-eval-print-loop

我试图让 ssh 为我的 scala 项目工作。我尝试在线搜索，但找不到任何可以与现有代码集成的方法。如果有人在 scala 中这样做过，请告诉我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:40:46.107

你的问题很不清楚，但*也许*你的意思是你想让 REPL 知道你现有的代码？这是一个常见问题，因为如果您只是从命令行运行`scala`，您将启动 REPL，但它不会知道您现有项目的类。

一种常见的方法是使用[SBT](https://github.com/harrah/xsbt/wiki)，它是一个很好的构建管理器，适用于 scala 项目。如果您在项目中使用 SBT，那么您可以从命令行运行该命令`sbt console`，它将启动一个能够识别您现有代码的 REPL。然后，您可以`import`像在普通代码中一样进行分类。

您可以访问[网站](https://github.com/harrah/xsbt/wiki)了解如何安装 SBT 以及如何为您的项目设置 SBT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T23:49:51.483

我已经实施了这个项目。它相当简单。只需包含文件并嵌入到工作代码中。不应该超过五分钟。让我知道您在哪里遇到问题。

# formula - monthtodate 减去 1 天

> ID：12499012
> 
> 赞同：2
> 
> 时间：2012-09-19T16:32:02.343
> 
> 标签：formula, crystal-reports-2008

我正在使用以下公式来提取报告中的当月至今数据：

```
If {vw_Scale_Tickets.SiteBillingGroup} = "Waste Owners" and 
   {vw_Scale_Tickets.TicketDate}= monthtodate then 
       {vw_Scale_Tickets.TicketNetWeight}/2000 else 0 
```

该代码工作正常，但我需要当月至今的信息*不*包括报告运行的当天。

我试过`... = monthtodate - 1`了，但它不起作用。

我可以重新编码，但我很好奇是否有办法继续使用该`monthtodate`语法。

报告中有很多公式，我尽量保持简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-24T14:44:34.107

如果您在 if 子句中添加怎么办

```
AND {vw_Scale_Tickets.TicketDate} <> CurrentDate 
```

# jquery - 使用 jQuery ImageTick 后复选框不起作用

> ID：12499014
> 
> 赞同：0
> 
> 时间：2012-09-19T16:32:02.113
> 
> 标签：jquery, jquery-plugins

[我在这里](http://boedesign.com/blog/2008/06/08/imagetick-for-jquery/)找到了用图像替换复选框的好插件。[对于像这个例子](http://boedesign.com/demos/imagetick/)这样的简单场景，我已经使用它并且它可以工作。

现在，我有这种情况：

我有一个复选框作为一个**组**，一些复选框作为**子**组，一些复选框作为子组的**选项**。

当我检查组时，也会检查所有子组和选项。
当我检查子组时，该子组的所有选项也会被检查。

我已经使用 jquery 制作了它，并且它在没有 imagetick 的情况下工作。见[http://jsfiddle.net/arif_rh/GBLy3/8/](http://jsfiddle.net/arif_rh/GBLy3/8/)，

但是当我使用 imagetick 时，它不起作用。见[http://jsfiddle.net/arif_rh/P7Fje/3/](http://jsfiddle.net/arif_rh/P7Fje/3/)

我错过了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:35:33.490

如果您检查呈现的 html，则会使用复选框 dispaly:none 放置一个 Image 标签。所以你需要做的是切换图像而不是在这里选中复选框

```
<td>
    <img src="http://i49.tinypic.com/1198b3s.png" alt="no_tick" class="ticks_551845" id="tick_img_9">
    <input type="checkbox" id="9" class="g_1 s_21" name="opsi" value="1" style="display: block; ">
</td> 
```

必须编写以获得预期输出的代码是..这也可以折叠成单个事件，而不是每个复选框的单独单击事件..

```
 $('#s_11 , #s_21 , #s_31').click(function ()
{
    if( $(this).is(':checked')){
        $(this).parent().parent().find('td:gt(0) img').attr('src','http://i47.tinypic.com/4t3nh3.png');
    }
    else{
         $(this).parent().parent().find('td:gt(0) img').attr('src','http://i49.tinypic.com/1198b3s.png')
    }
   // $('.s_11').attr('checked', this.checked);
}); 
```

检查这个[小提琴](http://jsfiddle.net/sushanth009/P7Fje/4/)

# ruby-on-rails - 使用 to_query 时删除多值参数 URI 的括号

> ID：12499016
> 
> 赞同：1
> 
> 时间：2012-09-19T16:32:04.793
> 
> 标签：ruby-on-rails

我想使用具有多个值的参数构建一个 URI。IE：

```
facet.field=a&facet.field=b&facet.field=c 
```

如果我这样做：

```
uri = {:'facet.field' => ['a', 'b', 'c']}.to_query 
```

我去拿：

```
facet.field[]=a&facet.field[]=b&facet.field[]=c 
```

如何摆脱括号？

PS 我正在编写一个针对 Solr 的查询，而带括号的 URI 并没有像我期望的那样返回方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:02:38.557

尝试这个：

```
URI.encode_www_form('facet.field' => ['a', 'b', 'c']) 
```

# vba - 将字节数组写入文件的问题

> ID：12499017
> 
> 赞同：6
> 
> 时间：2012-09-19T16:32:06.793
> 
> 标签：vba, excel

windows下，安装[印象笔记](http://evernote.com/intl/fr/)的时候，也安装了一个api，可以通过vba访问（例如）。

每个笔记都可以显示其“资源”（附加文件和图像），并且可以将实际资源作为字节数组检索。

**我无法将字节数组写入实际文件。**

变量声明：

```
Dim fileByte() As Byte
Dim nt As enapiLib.Note 
```

获取数据：

```
fileByte = nt.Resources.Item(i).Data 
```

将字节数组写入文件：

```
Function WriteByteArray(vData As Variant, sFileName As String, Optional bAppendToFile As Boolean = False) As Boolean
Dim iFileNum As Integer, lWritePos As Long

Debug.Print " --> Entering WriteByteArray function with " & sFileName & " file to write."
On Error GoTo ErrFailed
If bAppendToFile = False Then
    If Len(Dir$(sFileName)) > 0 And Len(sFileName) > 0 Then
        'Delete the existing file
        VBA.Kill sFileName
    End If
End If

iFileNum = FreeFile
Debug.Print "iFileNum = " & iFileNum
'Open sFileName For Binary Access Write As #iFileNum
Open sFileName For Binary Lock Read Write As #iFileNum

If bAppendToFile = False Then
    'Write to first byte
    lWritePos = 1
Else
    'Write to last byte + 1
    lWritePos = LOF(iFileNum) + 1
End If

Put #iFileNum, lWritePos, vData
Close #iFileNum

WriteByteArray = True
Exit Function

ErrFailed:
Debug.Print "################################"
Debug.Print "Error handling of WriteByteArray"
Debug.Print "################################"
FileWriteBinary = False
Close iFileNum
Debug.Print Err.Description & "(" & Err.Number & ")"
End Function 
```

我尝试了一个exe文件

通过 debug.printing 每个字节值，我知道我的字节数组以 4D 5A 开头，就像其他每个 exe 文件一样

```
Resource (1) : 
ClickToSetup.0.9.8.1416.exe
application/x-msdownload
Le fichier C:\Dropbox\TestEvernote\ClickToSetup.0.9.8.1416.exe doit être créé.
Lbound(fileByte) = 0
Ubound(fileByte) = 5551919
i = 0
filebyte(i) = 4D
i = 1
filebyte(i) = 5A 
```

通过将创建的 exe 文件读回字节数组，我知道新创建的数组以字节 4D 5A 开头，如所愿

***但是硬盘驱动器上的 exe 文件是_损坏_，并且_不以正确的字节_开始_：***

这是硬盘驱动器上存储文件的第一个二进制值：（从 VBinDiff 工具获得）（我无法发布图像，我是这里的新手......）：[exe 的 VBinDiff 输出](https://i.stack.imgur.com/LPWAH.png)

为什么实际数据前面有这12个字节？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T19:40:12.717

我遇到了同样的问题 - 在每个写入的文件的顶部都会抛出一些 12 字节的标题。事实证明，PUT 命令并不十分清楚如何处理 Variant 类型的数据。我不确定确切的原因，但我的解决方法是简单地替换 PUT 行：

```
 Put #iFileNum, lWritePos, vData 
```

有了这个：

```
 Dim buffer() As Byte
    buffer = vData
    Put #iFileNum, lWritePos, buffer 
```

问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T15:10:25.097

在**VB6**中，在保存的内容前附加了一个神秘的额外 12 个字节。为什么？因为您保存了 Variant 结构以及 Variant 的内容。

您需要将 Variant 内容“*复制*”到 Byte 数组中，例如：

```
ReDim arrByte(0 To UBound(varBuffer) - LBound(varBuffer))

For i = 0 To UBound(varBuffer) - LBound(varBuffer)
  arrByte = varBuffer(i + LBound(varBuffer))
Next i 
```

# r - 在 r 的 vegan 中保存排序对象

> ID：12499018
> 
> 赞同：0
> 
> 时间：2012-09-19T16:32:07.607
> 
> 标签：r, save, vegan

如何保存 MDS 对象以在下一次 R 会话中使用？因为 metaMDS() 函数使用了多次随机重启，所以每次都会产生略有不同的答案。我需要输出在多个 R 会话中保持一致。我该如何实现这一点？谢谢

我所指的排序对象类型的示例：

```
data(dune)
sol <- metaMDS(dune)
sol 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:36:34.707

@csgillespie 展示了如何使结果可`metaMDS()`重现。伪随机数生成器种子的设置应该在您使用`metaMDS()`或使用 R 或其他软件中的伪随机数生成器的任何其他功能时完成，否则您将无法重现结果。

但是，某些`metaMDS()`拟合可能会花费大量计算时间，因此将结果对象序列化到磁盘是一种选择。为此，您想要`save()`或`saveRDS()`. 两者的区别在于前者 ( `save()`) 保存了包括其名称在内的整个对象。`saveRDS()`仅序列化对象本身，而不是当前会话中的对象名称。

`load()`可用于恢复保存的对象`save()`。它将对象加载到当前会话中，并将覆盖具有相同名称的对象。`readRDS()`用于加载由 序列化的对象`saveRDS()`。

```
require("vegan")
## The recommended way of running NMDS (Minchin 1987)
##
data(dune)
## Global NMDS using monoMDS
## set the seed
set.seed(1)
sol <- metaMDS(dune)

save(sol, file = "my_sol.rda")
ls()
rm(sol)
load("my_sol.rda")
ls()

saveRDS(sol, file = "my_sol.rds")
ls()
sol2 <- readRDS("my_sol.rds")
ls()
all.equal(sol, sol2) 
```

一些相关的输出是：

```
>     save(sol, file = "my_sol.rda")
>     ls()
[1] "dune" "sol" 
>     rm(sol)
>     load("my_sol.rda")
>     ls()
[1] "dune" "sol" 
> 
>     saveRDS(sol, file = "my_sol.rds")
>     ls()
[1] "dune" "sol" 
>     sol2 <- readRDS("my_sol.rds")
>     ls()
[1] "dune" "sol"  "sol2"
>     all.equal(sol, sol2)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:33:16.493

当您想使用相同的随机数时，您需要设置随机数种子。例如，

```
##For some positive number
R> set.seed(1)
R> runif(1)
[1] 0.2655
R> set.seed(1)
R> runif(1)
[1] 0.2655 
```

在您的示例中，只需`set.seed`在函数调用之前使用。

# process - 虚拟内存概念

> ID：12499022
> 
> 赞同：1
> 
> 时间：2012-09-19T16:32:20.187
> 
> 标签：process, paging, virtual-memory, virtual-address-space, memory-segmentation

我对有关虚拟内存的一些主题感到困惑。所以，我将逐点列出它们并提出问题。在回答时，如果您还列出一些我可以消除疑问的来源，我会更喜欢。我将参考 linux elf 可执行文件进行讨论。

1.  我听说在 32 位系统中每个进程都有 4gb 的地址空间。当我检查我的一个可执行可重定位文件的 objdump 时，我看到它的限制从 00000000 到 ffffffff。它还包含内核空间。这是文件的地址空间。**这就是我们说的虚拟内存吗？**如果是，那么我已经读过虚拟内存机制允许运行非常大的进程，并且进程大小不受主内存大小的限制（我们可以在按需分页时将所需的页面带到主内存）。**那么如果虚拟内存只有4gb，是不是限制程序的最大大小为4gb呢？**此外，我检查了另一个文件的 objdump，它具有相同的地址（即 00000000 到 ffffffff）。**那么这是什么意思？这是否意味着我们的文件是某种可重定位文件，将再次添加起始地址**（尽管这看起来很荒谬，因为它已经是一个可执行的可重定位目标文件）。

2.  我读过在已实现分段的内存中，cpu 产生虚拟（逻辑）地址。这个地址包含三个部分——段，段内的偏移量。此外，这里讨论的部分是代码、数据、堆栈等。

    在进程地址空间中，这些段从特定位置开始定位。那么，cpu的虚拟地址的内容是什么？**生成的虚拟地址范围是否从 00000000 到 ffffffff？**如果是，那么**是在虚拟地址访问内容的过程，如下：-**

    ```
    The segment part is looked up in the segment descriptor table to find the segment's
    starting address in linear address space. Then the offset is indexed within the segment and
    the resulting address is the linear address. Then, we look up the page table and map the
    address to physical address. If the page is not currently in the main memory, it is 
    brought. 
    ```

    **这再次出现了这样一个事实，即任何时候都没有进程可以完全位于主内存中，因为这样整个内存将只被一个进程占用**（因为进程的地址空间本身就是 4gb）。

    此外，如果所有进程的地址空间从 00000000 到 ffffffff，并且主内存中一次可以存在多个进程，那么**所有进程都应该有自己的段描述符表，该表返回线性地址空间中的段地址**

3.  我读到操作系统在启动时被加载到主内存中。那么**该操作系统与特定进程的内核空间中的内核代码有什么区别？此外，是否所有进程在其内核空间中都有自己的内核代码副本？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:58:02.430

这是一个非常开放的问题，有许多不同术语的混淆用法。我会尽可能多地解决您的问题，并提供一些其他有用的信息可能会有所帮助。

1.  “我听说在 32 位系统中每个进程都有 4GB 的地址空间。” 不完全正确。在 32 位系统中，每个进程的*最大可寻址空间为 3.2GB。*这并不意味着该内存被分配过，而且它肯定不会在进程启动时立即分配。“这就是我们说的虚拟内存吗？” 不，虚拟内存与进程的可寻址空间没有直接关系。稍后再谈。

2.  这个问题真的没有意义，原因我将在下面解释。不过值得注意的是，多个进程*确实*可以同时放入内存，因为这些进程不会自动分配其全部潜在可用内存。（如果文本编辑器一打开就分配 4GB 内存，那它就不是流行的文本编辑器了！）

3.  我不是专家，但我非常怀疑每个程序在运行时都有自己的内核代码副本。仅安全和性能问题就使这成为一个非常不可能的解决方案。

所以现在，一些可能对您有所帮助的定义。

*   **物理内存**（通常！）是您 PC 中的 RAM。它是运行任何程序时 CPU 直接使用的快速物理内存。当您指定**物理内存地址**时，您正在根据内存硬件本身指定内存中的确切位置。
*   **虚拟内存**（通常！）存储在较慢的媒体上，例如硬盘驱动器（通常称为分页文件）。当您的计算机运行进程的内存不足时，它会将一些当前*物理*内存内容复制到页面文件中，通常是从空闲或后台应用程序中复制。这会在*物理*内存中腾出空间，以便活动进程可以运行。如果不再在物理内存中的程序需要处理数据，则必须将其数据从页面文件重新加载到物理内存中——这反过来可能需要另一个程序*从*物理内存中调出以腾出空间。术语“虚拟”与“物理”内存用于强调这种内存并不真正*存在*，但它仍然可用于计算机。虚拟内存的使用在性能方面非常昂贵，但它可以支持更大的大小：确实，可以拥有任意大量的可用虚拟内存，但是性能损失阻止了这成为超出某些限制的实用解决方案。
*   **逻辑内存地址**是由单个进程使用的地址，它允许进程寻址自己的内存，而不必关心进程在**物理**内存中的加载位置。您的`00000000`to `fffffff`range 是进程可用的*逻辑*范围，这是进程内用于引用内存的地址。内核会将其转换为*物理*CPU 在实际执行代码时使用的地址，基于进程内存的物理偏移（和分段）。此物理位置可以位于可用内存空间中的任何位置，如果应用程序被调出和调入，则物理位置可能会在应用程序的生命周期内发生变化。然而，应用程序本身只需要引用它自己的*逻辑*地址空间。术语“逻辑”与“物理”地址用于强调地址不是*真实*地址，而是相对于相关内存子集的地址 - 即相对于进程自己的内存空间。

我不是这方面的专家，但我希望这有助于澄清你的一些问题。

# architecture - olap 立方体架构 - 有多少个 olap 立方体？

> ID：12499025
> 
> 赞同：0
> 
> 时间：2012-09-19T16:32:43.783
> 
> 标签：architecture, ssas, olap

我正在做一个项目，其中有几个大立方体。使用的技术是SSAS。我们有数百份报告，并且在报告定义中进行了大量计算。我认为在报告中进行计算不是正确的方法。它增加了测试的复杂性。我认为更好的解决方案是在 OLAP 中进行计算。但开发人员抱怨 MDX 查询将运行数年，因为立方体将变得更大更复杂。我的想法是有很多小立方体并在其中进行计算。

这是个好主意吗？您是否有其他想法如何降低报告中值测试的复杂性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T19:36:47.297

MDX 查询性能主要取决于您的多维数据集架构。具有良好的层次结构和与业务逻辑的良好相关性，您不应该关心立方体的大小。

只要您在分区上达到约 2000 万，就可以根据时间轴将其分成两部分，为其设计聚合，您就可以了。我们拥有承载 7 亿多包数据的多维数据集，运行相当复杂的 MDX，没有性能问题；同时，只有 10-20 百万数据源的多维数据集可能会因为更复杂/未优化的架构而变慢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:29:59.263

*   开发人员抱怨 MDX 查询将运行数年，因为立方体将变得更大更复杂。

如果不使用计算成员，则不会影响多维数据集的性能。它们不需要存储空间，并且仅当有人使用命中 Calculatd 成员的查询查询多维数据集时才会计算它们。因此，假设您添加计算的 memebrs 并继续在报告上使用您的计算，这不会有什么不同，它们会站在那里等待使用。这很好测试，您可以创建报告的副本并并行运行以测试结果。

*   我的想法是有很多小立方体并在其中进行计算。

我认为这不会有帮助，它还会增加您的解决方案的复杂性。我会说远离它

# javascript - 单击孩子时如何删除父母

> ID：12499027
> 
> 赞同：0
> 
> 时间：2012-09-19T16:32:57.073
> 
> 标签：javascript, jquery, html, ajax, jquery-ui

单击任何子图像时，如何删除整个 div？这是我的 HTML：

```
<div id="list1">
        <img src="FILE1.JPG" class="img">
        <img src="FILE2.JPG" class="img">
        <img src="FILE3.JPG" class="img">
</div>

<div id="list2">
        <img src="FILE4.JPG" class="img">
        <img src="FILE5.JPG" class="img">
        <img src="FILE6.JPG" class="img">
        <img src="FILE7.JPG" class="img">
</div> 
```

这是jQuery：

```
$('.img').click(function() {
    var $img = $(this);
    $.ajax({
        url: 'save-image.php?q=' + $(this).attr('id'),
        dataType: 'json',
        success: function(data) {
            $img.closest('div').remove();
        }
    });
}); 
```

我需要在单击图像时运行更新脚本，但随后我需要整个 div 消失。此代码不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:35:10.833

使用 jQuery[`.parent()`](http://api.jquery.com/parent/)和[`.remove()`](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T16:42:25.323

```
 $('img').click(function() {

    var clicked = $(this);

    $.ajax({
        url: 'ajax.php?q=' + $(this).attr('id'),
        dataType: 'json',
        success: function(data) {

            clicked.parent('div:first').remove();

        }
      });
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T16:59:37.633

您可以尝试 parent 和 remove 方法

```
$('img').click(function() {
    var $this = $(this);
    $.ajax({
        url: 'ajax.php?q=' + $this.attr('id'),
        dataType: 'json',
         success: function(data) {
            $this.parent().remove();
         }
     });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T16:34:36.043

试试这个，

**[现场演示](http://jsfiddle.net/rajaadil/MJySw/)**

```
$('img').click(function(){    
  $(this).closest('div').remove();
}); 
```

如果您可以为 img 分配一些类会更好

```
$('.img').click(function(){    
  $(this).closest('div').remove();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T16:34:44.863

如果您使用的是 jQuery，那么您可以：

```
$('img').on('click', function(e) {
   $(this).parent().remove();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T16:36:14.853

[这](http://api.jquery.com/parent/)应该可以帮助您完成任务。

> parent( [selector] ) 返回：jQuery 描述：获取当前匹配元素集中每个元素的父元素，可选地由选择器过滤。

页面上给出的第一个示例与您的问题几乎相同。

# java - Java：将可抛出/异常的整个堆栈跟踪转换为 ByteBuffer 的最有效方法？

> ID：12499033
> 
> 赞同：2
> 
> 时间：2012-09-19T16:33:15.873
> 
> 标签：java, exception, stack-trace, throwable

将可抛出/异常的整个堆栈跟踪转换为 ByteBuffer（在 Java 中）的最有效方法是什么？

具体来说，我需要将整个异常记录到数据库中。Thread.currentThread().getStackTrace() 返回 StackTraceElement[] 数组的列表。

那么，Throwable 类中有一个 printStackTrace() 方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:42:21.677

如果你真的想这样做，这应该是你需要的：

```
ByteArrayOutputStream os = new ByteArrayOutputStream();
ex.printStackTrace(new PrintStream(os));
ByteBuffer bb = ByteBuffer.wrap(os.toByteArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:35:15.260

您可以[`ExceptionUtils`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/exception/ExceptionUtils.html)在 apache commons 中使用类。

# asp.net - 如何从子页面更改母版页面中的 Div 类

> ID：12499041
> 
> 赞同：0
> 
> 时间：2012-09-19T16:34:09.523
> 
> 标签：asp.net, css, master-pages

我想**从我的子页面**更改母版页中的 div 样式（显示） 。

我用 ：

```
 protected void ShowMsgText(int MsgID)
    {
        HtmlGenericControl MsgInner;
        MsgInner =((HtmlGenericControl)Master.FindControl("MsgInner"));
        MsgInner.Attributes["class"] = "MsgInnerShow";
    } 
```

MsgInner 是我的 div id，但是运行后的任何更改！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:43:10.250

我已经调查了这个问题。我相信您在子页面 (aspx) 中有更新面板，在母版页中有消息 div。更新面板可以更新位于其下方的控件，但无法更新位于更新面板之外的控件。因此，您需要将更新面板放在母版页中。

**在母版页中**

```
<ajaxToolkit:ToolkitScriptManager runat="Server" EnablePartialRendering="true" ID="ScriptManager1" />
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>              
                <div><strong>Demo for master page updation</strong></div>
                <div  id="divMaster" runat="server">
                    I am div in master page, going to change with ajax call
                </div>            

                <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
                </asp:ContentPlaceHolder>
            </ContentTemplate>
</asp:UpdatePanel> 
```

**在内容页面 (.aspx)**

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

**在后面的内容页面代码 (.aspx.cs)**

```
protected void Button1_Click(object sender, EventArgs e)
{
      System.Threading.Thread.Sleep(2000); //To check the effect of ajax call, must be removed
      HtmlGenericControl divMaster = (HtmlGenericControl) this.Master.FindControl("divMaster");
      divMaster.InnerHtml = "hello I am being change from child page";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:31:55.913

在母版页上定义公共属性

MyMasterPage.Master.cs

```
private string _divClass = "DefaultClass";
public string DivClass
{
    get
    {
        return _divClass;
    }
    set
    {
        _divClass = value;
    }
} 
```

将此属性添加到母版页上 div 的 HTML 标记中：

MyMasterPage.Master：

```
<div id="MyDiv" runat="server" class="<%=DivClass %>"> 
```

您可以将此值设置为子页面的 OnInit 或 OnLoad 事件。

ChildPage.aspx.cs

```
protected override void OnInit(EventArgs e)
    {
        var master = Page.Master as MyMasterPage;
        if (master != null)
        {
            master.DivClass = "MyOtherClassName";
        }
        base.OnInit(e);
    } 
```

# jquery - 实现评级和jquery的简单问题

> ID：12499042
> 
> 赞同：1
> 
> 时间：2012-09-19T16:34:13.330
> 
> 标签：jquery, html, css, jquery-selectors

我在这里有一个非常简单的问题，但是由于我对 jquery 的想法很少，因此无法解决这个问题

我正在使用这段代码来实现评分功能

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=440](http://www.dotnetcurry.com/ShowArticle.aspx?ID=440)

一切正常，但我注意到一旦有人点击任何星星，它就无法更改评级。

**这是代码**

**建立一个星阵**

```
<p>
    <img src="Images/EmptyStar.png" alt="Star Rating" align="middle" id="1" />
    <img src="Images/EmptyStar.png" alt="Star Rating" align="middle" id="2" />
    <img src="Images/EmptyStar.png" alt="Star Rating" align="middle" id="3" />
    <img src="Images/EmptyStar.png" alt="Star Rating" align="middle" id="4" />
    <img src="Images/EmptyStar.png" alt="Star Rating" align="middle" id="5" />
</p> 
```

**JS部分**

```
$("img").mouseover(function() {
    giveRating($(this), "FilledStar.png");
    $(this).css("cursor", "pointer");
});

$("img").mouseout(function() {
    giveRating($(this), "EmptyStar.png");
}); 
```

//-------

```
function giveRating(img, image) {            
    img.attr("src", "Images/" + image).prevAll("img").attr("src", "Images/" + image);
} 
```

现在，一旦有人点击任何星星，点击事件就会生效并按如下方式解除绑定：

```
$("img).click(function () {
    $(img).unbind("mouseout mouseover click");
}); 
```

我在看的是，即使有人点击了任何开始，他也应该能够再次更改它，或者选择更高或更低的评级

如果有人可以指导我这个简单的事情，那将是高度赞赏

提前感谢您的时间和努力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:37:37.787

首先删除这个：

```
$(img).unbind("mouseout mouseover click"); 
```

此外，您必须存储评级并在搬出后恢复......

```
function giveRating(img, image) {            
    img.attr("src", "Images/" + image).prevAll("img").attr("src", "Images/" + image);
    img.parent().get(0).rating = img;
} 
```

...

对不起，我很乐意完成这个。也许其他人会？

或者看看[http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)

为此，有许多现成的解决方案。

# unicode - 如何重现不可见的 unicode 字符？

> ID：12499045
> 
> 赞同：3
> 
> 时间：2012-09-19T16:34:20.350
> 
> 标签：unicode

我有一个`\u200f`导致 Web 表单问题的问题，并希望在我的开发环境中重现它以尝试修复它，但我不确定如何插入此字符，因为它不可见且无法复制和粘贴。

有任何想法吗？

Deceze为我回答；它自然是看不见的:)

![在此处输入图像描述](../Images/da64ef1aa7c8cb1169e596d9953f7b2a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T17:00:05.360

在 OS X 上，打开字符查看器（在大多数应用程序中可通过编辑菜单或输入法选择菜单访问，如果您已激活）并在搜索字段中输入“200f”。这将显示字符（您不会看到它，但它是搜索结果中的第一项），您可以将其拖放到文档中。

![输入法菜单](../Images/3866a62796e0a54231a515252e5bf071.png) ![在此处输入图像描述](../Images/a3550ba43fdb64c34dc37a29f154d934.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:56:59.773

我希望 OS X 有一些通用的字符插入实用程序，类似于 Windows 的[UnicodeInput](http://www.fileformat.info/tool/unicodeinput/index.htm)。

但是对于仅测试表单，您可以编辑包含表单的页面，以便预先填写输入字段，并且您可以使用字符引用，例如

```
<input ... value="500&#x200f;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-10T12:10:38.127

这已经很老了，但作为最新 Mac OS 版本中的参考，添加 Unicode 十六进制输入键盘，如下所示：

[![Unicode 十六进制输入键盘](../Images/56e0d1760ba1aa8f3b67a2b38d5b4f66.png)](https://i.stack.imgur.com/sgXc2.png)

从列表中选择：

[![列表](../Images/dcce5c6278c6ab901218b0eecb0bc5a6.png)](https://i.stack.imgur.com/sjtFU.png)

并按下**Option(⌥)**键，`200f`如其他注释所示键入。

# iphone - 如何退回 iPhone 键盘

> ID：12499046
> 
> 赞同：1
> 
> 时间：2012-09-19T16:34:32.717
> 
> 标签：iphone, objective-c, ios, xcode, keyboard

故事板场景是这样的：

`UITableViewController`带有`UITableView`自定义原型`UITableViewCell`：`AddInfoCell`。

我`UITextView`在`AddInfoCell`.

要返回键盘，我使用将以下代码放入`UIViewController`类中并将其连接到`UITextView`with 选项`DidEndOnExit`：

```
- (IBAction)textFieldReturn:(id)sender {
    [sender resignFirstResponder];
} 
```

但是我现在找不到适合这个代码的地方，因为`UITextView`在`AddInfoCell`课堂上。

它无法与`UITextView`班级`TableViewController`或`AddInfoCell`班级联系起来。

我还尝试为该类创建一个`TextViewController`类`UITextView`并将`textFieldReturn`代码放在那里，但我仍然无法将它连接到情节提要中。

那么在这种情况下如何返回键盘有什么建议吗？

这是创建 `AddInfoCell 的地方：

```
- (AddInfoCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"AddInfoCell";

AddInfoCell *addInfoCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (addInfoCell == nil) {
    addInfoCell = [[AddInfoCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}
return addInfoCell;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:39:03.690

使用`UITextViewDelegate`委托。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if([text isEqualToString:@"\n"]) {
        [textView resignFirstResponder];
        return NO;
    }

    return YES;
} 
```

还要添加这个方法：

```
 -(BOOL)textViewShouldReturn:(UITextView *)textView {
   [textView resignFirstResponder];
   return YES;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:35:17.913

addInfoCell.cellTextView.delegate = self;

# drupal - Drupal 7 订阅和通知：为经过身份验证的用户添加一些内容类型的默认订阅

> ID：12499049
> 
> 赞同：1
> 
> 时间：2012-09-19T16:34:35.577
> 
> 标签：drupal, content-management-system, drupal-7, notifications, subscription

我正在尝试为我的网站配置通知和订阅。我希望默认情况下为每个经过身份验证的用户添加某些内容类型的订阅，他可以稍后使用订阅 UI 更改/删除这些订阅。我在任何地方都找不到任何默认订阅选项，也无法从我的 Google 搜索结果中找出答案。

安装通知模块后，用户可以手动订阅内容类型，并且任何新帖子都会通过邮件正确通知给用户。

因此，请建议一种执行此操作的方法，一些使用当前模块或新​​模块的程序，或者一些 hack，默认情况下为每个经过身份验证的用户添加订阅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:28:29.797

使用[Drupal 7 的订阅模块](http://drupal.org/project/subscriptions)，您可以默认为用户设置各种“内容类型订阅”。

只需简单地安装模块并访问此位置即可设置默认值：

```
admin/config/system/subscriptions/userdefaults/type 
```

![模块配置页面截图](../Images/4410cc6c31971d301ac38f58053918c7.png)

# c# - C#，捕获异常

> ID：12499054
> 
> 赞同：5
> 
> 时间：2012-09-19T16:34:53.687
> 
> 标签：c#, exception

我得到一个异常类型使用

```
catch(Exception e){
  log.Error(e.GetType()); // it write 'System.Data.EntityException'
} 
```

所以我改变我的代码来捕捉那个异常，

```
try{
...
}catch(EntityException a){
  // need to do something
  log.Error("I got it!");
}catch(Exception e){
  log.Error("No");
} 
```

并且代码只写“否”。

如何在到达异常之前捕获 EntityException？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:39:36.040

您拥有的代码*应该*可以正常工作，前提是`EntityException`在该文件或命名空间的当前使用语句集中没有定义其他类型。

尝试完全限定类型，如下所示：

```
try{
...
}catch(System.Data.EntityException a){
  // need to do something
  log.Error("I got it!");
}catch(Exception e){
  log.Error("No");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T14:00:02.697

我遇到了同样的问题，这里接受的答案对我不起作用。虽然 EntityException 完全限定为 System.Data.EntityException，但它实际上位于 System.Data.Entity 程序集中（请参阅[http://msdn.microsoft.com/en-us/library/system.data.entityexception(v=vs. 110).aspx](http://msdn.microsoft.com/en-us/library/system.data.entityexception(v=vs.110).aspx) )，因此项目需要在 Intellisense 识别您的代码中的 System.Data.EntityException 之前引用 System.Data.Entity。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T16:38:23.347

第一个匹配异常的“catch”是被激活的。

# printing - OCaml：括号中的代码

> ID：12499057
> 
> 赞同：2
> 
> 时间：2012-09-19T16:35:11.177
> 
> 标签：printing, ocaml

我在*[使用 OCaml 开发应用程序](http://caml.inria.fr/pub/docs/oreilly-book/html/index.html)*[中关注这个draw_string_in_box](http://caml.inria.fr/pub/docs/oreilly-book/html/book-ora048.html)示例

给出的示例代码如下：

```
let draw_string_in_box pos str bcf col = 
 let (w, h) = Graphics.text_size str in
 let ty = bcf.y + (bcf.h-h)/2 in 
 ( match pos with 
       Center -> Graphics.moveto (bcf.x + (bcf.w-w)/2) ty 
     | Right  -> let tx = bcf.x + bcf.w - w - bcf.bw - 1 in 
                 Graphics.moveto tx ty 
     | Left   -> let tx = bcf.x + bcf.bw + 1 in Graphics.moveto tx ty  );
 Graphics.set_color col;
 Graphics.draw_string str;; 
```

如果我删除“匹配”部分周围的括号，代码将不起作用（什么都不会打印）。知道为什么吗？

更一般地说，我什么时候应该在这样的代码位周围加上括号？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:49:42.977

一种看待它的方法是，在语句的箭头之后，`->`您`match`可以有一系列表达式（用 分隔`;`）。如果没有括号，以下表达式看起来像是`match`.

您还可以在 之后有一系列表达式（由 分隔`;`）`let`。使用括号，以下表达式看起来像是 的一部分`let`，这就是您想要的。

我个人避免使用`;`. 我就是这样处理这个问题的！否则，您必须确定表达式序列与采用序列的最里面的构造一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T21:08:39.240

正如 Jeffrey 所解释的，如果您删除括号，则这些`Graphics.set_color col; Graphics.draw_string str`陈述被理解为`| Left ->`案例的一部分。

这个答案更多地是关于何时在此类代码摘录中使用括号。在大多数情况下，模式匹配是函数的*最后一个*表达式，例如：

```
let f x y =
  foo x;
  match y with
  | Bar -> Printf.printf "Found y=Bar!\n%!"; 42
  | Baz -> Printf.printf "Found y=Baz!\n%!"; 43 
```

在这种情况下，您不需要括号。很多时候，它也是函数的第一个，因此也是唯一的表达式：

```
let hd list = match list with
  | a :: _ -> a
  | [] -> invalid_arg "hd" 
```

但是当你想在匹配之后做事情时，你需要告诉OCaml匹配在哪里结束。这是您使用括号的地方：

```
let f x y =
  foo x;
  (match y with
  | Bar -> 42
  | Baz -> 43);
  (* do something, both when y is Bar and when it is Baz: *)
  qux x y; 
```

这同样适用于`try ... with`语句：

```
let find_a_b a b list =
  (try print_int List.assoc a list
   with Not_found -> Printf.printf "Could not find a=%s.\n%!" a);
  (* Now do something whether or not we found a: *)
  (try print_int List.assoc b list
   with Not_found -> Printf.printf "Could not find b=%s.\n%!" b); 
```

这里第一个括号是强制性的，第二个是可选的，通常不写。

# node.js - 通过 nodejs 和 ya-csv 将数据添加到预先存在的 csv 文件

> ID：12499063
> 
> 赞同：2
> 
> 时间：2012-09-19T16:35:32.053
> 
> 标签：node.js, csv

我希望有人可以为我阐明这一点……我一生都无法弄清楚如何使用**nodejs**和**ya-csv**（模块）将数据附加到预先存在的 csv 文件中。（在本例中称为 staff.csv）如果我要运行此脚本两次，则 csv 文件将被覆盖而不是更新以保存旧信息和新信息。不要认为那里的任何人都对 ya-csv 有很好的掌握并且可以帮助我或知道替代方案吗？

```
dictionary = {
//data...
};

var csv = require('ya-csv');
var w = csv.createCsvFileWriter('staff.csv');
var data = [];
for(key in dictionary) {
if(typeof dictionary[key] !== 'function'){
    data.push(key);
    data.push(dicitonary[key]);
}
}
w.writeRecord(data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:41:22.753

尝试将正确的`options`对象传递给`createCsvFileWriter`函数：

```
var w = csv.createCsvFileWriter('staff.csv', {'flags': 'a'}); 
```

`'a'`这里的意思是“追加”。它允许您将内容添加到现有文件的末尾。对于所有可用的标志，请参阅[Nodejs 文档](http://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback)。

# c - “| =”运算符的含义？

> ID：12499069
> 
> 赞同：3
> 
> 时间：2012-09-19T16:36:00.907
> 
> 标签：c

我遇到过类似的代码

```
if (flagsDef) 
flagsTainted |= flagsUsed; 
```

请协助了解所用运算符的含义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T16:37:07.810

该声明：

```
flagsTainted |= flagsUsed 
```

是以下的简写：

```
flagsTainted = flagsTainted | flagsUsed 
```

它使用二进制/按位 OR 运算符`|`。

该代码正在操作一个*标志*变量，该变量通过设置变量中的位来保存状态信息`flagsTainted`。

有关按位操作的更多信息，[维基百科文章](http://en.wikipedia.org/wiki/Bitwise_operation)非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T16:38:12.513

`a op= b`is `a = a op b`, and`|`是按位运算`or`符（按位表示它适用于每个二进制数字）。

这是的[真值表](http://en.wikipedia.org/wiki/Truth_table#Logical_disjunction)`or`：

```
 0 1 
    ___
 0| 0 1
 1| 1 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T16:36:57.227

`|`是按位或。这意味着它使用或运算符比较位。

例如：

```
101
001 
```

如果你`|`两个，你得到 101。= 将结果分配回操作的左侧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:39:11.190

它可以用英语读作“或等于”。

它类似于 += ，除了不是将左侧值添加到右侧，而是执行两个值的按位或，然后将结果分配给左侧变量，正如您所期望的那样。

有关按位运算的更多信息，请参阅此链接： [Wikipedia](http://en.wikipedia.org/wiki/Bitwise_operation)

# python - 在 auth_login 和 auth_logout 中获取 RequestContext

> ID：12499070
> 
> 赞同：1
> 
> 时间：2012-09-19T16:36:04.137
> 
> 标签：python, django, django-authentication, django-registration

> **可能重复：**
> [如何在基于类的通用视图中访问 RequestContext？](https://stackoverflow.com/questions/10162940/how-to-access-requestcontext-in-class-based-generic-views)

我正在使用 django-registration，它使用`django.contrib.auth.views.auth_login`和`django.contrib.auth.views.auth_login`视图来提供登录和注销。但是，当它呈现我的registration/login.html 和registration/logout.html 模板时，`RequestContext`不包括在内。`RequestContext`在没有猴子补丁的情况下获得这些模板的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:59:11.647

Per Alex's [comment](https://stackoverflow.com/questions/12499070/getting-requestcontext-in-auth-login-and-auth-logout#comment16819928_12499070), adding the following worked:

```
TEMPLATE_CONTEXT_PROCESSORS = (
    # ... other context processors here
    'django.core.context_processors.request',
) 
```

# python - lxml在python中使用xpath函数在2个数据库之间解析XML如何？

> ID：12499078
> 
> 赞同：0
> 
> 时间：2012-09-19T16:36:25.457
> 
> 标签：python, xml, database, parsing

所以，这是我的游戏计划......

python中的xpath![在此处输入图像描述](../Images/95e69eb739fd3bf970816f44f80749c2.png)

这是我的xml

所以这个 xml 存储在一个数据库（ca）中，我需要提取这个“数据”来获取所有这些值层并将它们存储到另一个数据库（a）：

这是我到目前为止想到的..

```
import pyodbc
from lxml import etree
from StringIO import StringIO

con_ca = pyodbc.connect(..)
con_a  = pyodbc.connect(..)

cur_ca = con_ca.cursor()
cur_c = con_c.cursor() 

cur_ca.execute("""
select id_original,data
from table
""")

rows_ca = cur_ca.fetchall()
for row in rows_ca:

     id_original = id_original

     x = str(row.data)
     root = etree.fromstring(x)  

     BValid   = etree.XPath('/Data/Response/Detail/B/Valid')  
     BPass    = etree.XPath('/Data/Response/Detail/B/Pass')  
     BDetails = etree.XPath('/Data/Response/Detail/B/Details')  
     BCode    = etree.XPath('/Data/Response/Detail/B/Code')  
     BDecisionS = etree.XPath('/Data/Response/Detail/B/Decision/Result') 
     BDecisionB = etree.XPath('/Data/Response/Detail/B/Decision/Bucket') 

con_a.execute("""
INSERT INTO table2 (id_original,BValid,BPass,BDetails,BCode,BDecisionS BDecisionB) 
VALUES(?, ?, ?,?, ?, ?, ?)
""") 
```

.. 一切正常，除了在 fetchall() 之后我能够得到 ('//text') ：但是我如何使用 Xpath 进入特定节点以从这个示例中获取值或文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:32:44.860

```
(b_valid_text,) = root.xpath('/Data/Response/Detail/B/Valid/text()') 
```

谢谢安德烈！以防万一有人需要那个答案。这行得通！

# java - 如何在 Java 中仅从月份和年份生成日期？

> ID：12499079
> 
> 赞同：23
> 
> 时间：2012-09-19T16:36:27.337
> 
> 标签：java, date

我需要为信用卡到期日期生成一个新的 Date 对象，我只有一个月和一年，如何根据这两个生成日期？我需要最简单的方法。我在这里阅读了其他一些答案，但它们似乎都太复杂了。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-19T16:39:17.390

你可以使用`java.util.Calendar`：

```
Calendar calendar = Calendar.getInstance();
calendar.clear();
calendar.set(Calendar.MONTH, month);
calendar.set(Calendar.YEAR, year);
Date date = calendar.getTime(); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-11-24T11:09:07.607

# java.time

使用`java.time`Java 8 内置的框架

```
import java.time.YearMonth;

int year = 2015;
int month = 12;
YearMonth.of(year,month); // 2015-12 
```

从`String`

```
YearMonth.parse("2015-12"); // 2015-12 
```

定制`DateTimeFormatter`

```
import java.time.format.DateTimeFormatter;

DateTimeFormatter formatter = DateTimeFormatter.ofPattern("MM yyyy");
YearMonth.parse("12 2015", formatter); // 2015-12 
```

**转换** 转换`YearMonth`为更标准的日期表示，即`LocalDate`.

```
LocalDate startMonth = date.atDay(1); //2015-12-01
LocalDate endMonth = date.atEndOfMonth(); //2015-12-31 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-19T16:47:43.213

自从您要求 a 以来可能没有答案`java.util.Date`，但这似乎是一个很好的机会来指出 Java 中大多数日期和时间以及日历的工作可能应该使用[Joda-Time](http://joda-time.sourceforge.net/)库来完成，在这种情况下

```
new LocalDate(year, month, 1) 
```

想到了。

Joda-Time 在一个月中的日子里还有许多其他的好东西。例如，如果你想知道当月的第一天，你可以写

```
LocalDate firstOfThisMonth = new LocalDate().withDayOfMonth(1); 
```

在您的评论中，您询问有关将字符串传递给`java.util.Date`构造函数的问题，例如：

```
new Date("2012-09-19") 
```

此版本的构造函数已*弃用*，因此不要使用它。您应该创建一个日期格式化程序并调用`parse`. 这是一个很好的建议，因为您可能将`year`和`month`作为整数值，并且需要制作一个好的字符串，正确填充和分隔等等，这在所有情况下都很难做到。出于这个原因，请使用知道如何完美处理所有这些内容的日期格式化程序。

其他较早的答案显示了如何做到这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T16:42:17.143

像

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM");
Date utilDate = formatter.parse(year + "/" + month); 
```

复制自[Create a java.util.Date Object from a Year, Month, Day Forma](http://www.java2s.com/Tutorial/Java/0040__Data-Type/CreateajavautilDateObjectfromaYearMonthDayFormat.htm) 或类似

```
DateTime aDate = new DateTime(year, month, 1, 0, 0, 0); 
```

复制自[What's the Right Way to Create a Date in Java?](https://stackoverflow.com/questions/6437257/whats-the-right-way-to-create-a-date-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T16:58:00.740

最常见的方法是使用 Date("YYYY-MM-DD") 构造函数，即使它已被弃用。这是即时创建日期的最简单方法。他妈的谁决定弃用它。万岁日期（“YYYY-MM-DD”）！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-25T17:21:05.550

不要使用这个答案。使用[Przemek](https://stackoverflow.com/a/33892035/5772882)和[Ray Toel](https://stackoverflow.com/a/12499236/5772882)的答案。正如 Przemek 所说，更喜欢使用 a`YearMonth`来表示年份和月份。正如两者所说，如果您必须使用日期，请使用`LocalDate`，这是一个没有时间的日期。

如果您绝对需要一个老式`java.util.Date`对象来用于您无法更改的遗留 API，那么这里有一个简单的方法来获得一个。它可能无法按预期工作，它可能无法准确地为您提供所需的日期，这取决于您的确切要求。

```
 YearMonth expiration = YearMonth.of(2021, 8); // or .of(2021, Month.AUGUST);
    Date oldFashionedDateObject = Date.from(expiration
            .atDay(1)
            .atStartOfDay(ZoneId.systemDefault())
            .toInstant());
    System.out.println(oldFashionedDateObject); 
```

在我的电脑上打印

```
Sun Aug 01 00:00:00 CEST 2021 
```

我们得到的是我当地时区的每月第一天的午夜——更准确地说，是我的 JVM 的时区设置。这是对遗留 API 期望的一个很好的猜测，但它也很危险。JVM 的时区设置可能会在我们的脚下被程序的其他部分或运行在同一 JVM 中的其他程序更改。换句话说，我们不能真正确定我们得到了什么。

如果将日期传输到运行不同时区的计算机（例如从客户端到服务器或反之亦然）或运行其自己的时区的数据库，则时区问题会变得更糟。大约有 50% 的风险是您`Date`将在上个月经历一次。

如果您最终知道所需的时区，将有助于指定例如`ZoneId.of("America/New_York")`而不是上述代码段中的系统默认值。

如果您的 API 是宽松的，并且只需要在正确的月份内的某个时间点，您最好在每月 2 号 UTC 或您自己的时区的每月 3 号给它。前者的方法如下：

```
 Date oldFashionedDateObject = Date.from(expiration
            .atDay(2)
            .atStartOfDay(ZoneOffset.UTC)
            .toInstant()); 
```

# spring - 由 TimerManager 触发时如何在 WorkManager 中运行线程

> ID：12499080
> 
> 赞同：2
> 
> 时间：2012-09-19T16:36:29.480
> 
> 标签：spring, jakarta-ee, websphere, workmanagers

**背景：**我在我的 Websphere 7 应用程序中使用 Spring 3.0.x 来获取 CommonJ WorkManager 和 TimerManager。我使用它们在我部署的应用程序中以特定间隔执行任意任务。

**背景 2：**这是我之前的一个问题（标题不好）的后续问题，想知道从 TimerManager 触发的线程实际上是由 TimerManager 线程池还是从 WorkManager 线程池运行的（它最终是 TimerManager 线程水池）。 *上一个问题：[让Spring计划任务与任务执行器线程一起运行](https://stackoverflow.com/questions/11766170)*

**问题：**

当从 TimerManager 触发 WorkManager 线程池时，是否有一种简单或优雅的方式，使用 Spring 或其他方法来运行 WorkManager 线程池中的线程？

我更喜欢 Spring 解决方案，因为它更加与容器无关。

谢谢！

# objective-c - 无法从另一个类访问 NSArray 内容

> ID：12499084
> 
> 赞同：0
> 
> 时间：2012-09-19T16:36:54.127
> 
> 标签：objective-c, xcode, class, nsarray

我知道这听起来像是一个愚蠢的问题，现在很多人会开始告诉我，我需要阅读有关属性如何工作的苹果文档，搜索类似问题并将其作为重复项关闭等等……我做了一些搜索，尝试阅读苹果文档，但仍然无法弄清楚我的代码有什么问题，并会感谢一些帮助......

我在 PrefMySpotsViewCtrl 类的相应 .h 和 .m 中定义了 NSMutable 数组，如下所示：

```
NSMutableArray *mySpotsArray;

@property (nonatomic, retain) NSMutableArray *mySpotsArray;

@synthesize mySpotsArray; 
```

当我从同一个类中 NSLog 这个数组时，如下所示：

```
NSLog(@"in class: %@", mySpotsArray); 
```

一切正常。我正在尝试从另一个类中 NSLog 这个数组，如下所示：

```
PrefMySpotsViewCtrl *PrefMS = [[PrefMySpotsViewCtrl alloc] init];
NSLog(@"%@", [PrefMS mySpotsArray]); 
```

它显示为空。

我究竟做错了什么？

谢谢你。

编辑 ...

我像这样初始化数组：

```
- (id)init
{
self = [super init];
if (self)
{
    mySpotsArray = [[NSMutableArray alloc]init];
}

return self;
} 
```

像这样添加、删除对象：

```
/-----------------------------------------
- (IBAction)addSpot:(id)sender
{
[mySpotsArray addObject:[[MySpots alloc]init]];
[mySpotsTable reloadData];

[self saveMySpots];
}

//-----------------------------------------
- (IBAction)deleteSpot:(id)sender
{
NSInteger row = [mySpotsTable selectedRow];
[mySpotsTable abortEditing];
if (row !=-1)
{
    [mySpotsArray removeObjectAtIndex: row];
}

[mySpotsTable reloadData];

[self saveMySpots];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:52:07.733

这个...

```
PrefMySpotsViewCtrl *PrefMS = [[PrefMySpotsViewCtrl alloc] init]; 
```

...创建一个新对象。它的数组中不会有任何`MySpots`对象，直到调用`addSpot:`. 您的数组中可能有不同的`PrefMySpotsViewCtrl`对象**这一**事实不会影响您刚刚创建的对象。`MySpots`

# r - 在R中删除不同数据集中的多列

> ID：12499094
> 
> 赞同：3
> 
> 时间：2012-09-19T16:37:21.740
> 
> 标签：r, for-loop

我想知道是否有一种好方法可以删除 R 中几个不同数据集的多个列。我有一个数据集，如下所示：

```
RangeNumber    Time    Value    Quality    Approval
          1    2:00        1          1           1
          2    2:05        4          2           1 
```

我想删除数据集中除时间和值列之外的所有内容。我通过将每列设置为 NULL 来“删除”它们，例如：`data1$RangeNumber <- NULL`。

我将拥有超过 16 个或更多具有相同列设置的数据集，并且数据集将按递增顺序编号，例如：data1、data2、data3 等。

我想知道`for`遍历所有数据集列的循环是否是完成此任务的最佳方法，或者——因为我已经读到 R 在循环时很慢`for`——是否有更简单的方法可以做到这一点。我还想知道是否需要将所有数据集合并到一个变量中，然后遍历以删除列。

如果`for`循环是最好的方法，我将如何设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:05:22.590

您希望将这些数据帧收集到一个列表中，然后对它们运行 Extract 函数。给“[”的第一个参数应该是 TRUE 以便获得所有行，第二个参数应该是列名（我组成了三个数据框，它们的行号和列名各不相同，但都有 'Time' 和 '值'列：

```
> datlist <- list(dat1,dat2,dat3)
> TimVal <- lapply(datlist, "[", TRUE, c("Time","Value") )
> TimVal
[[1]]
  Time Value
1 2:00     1
2 2:05     4

[[2]]
  Time Value
1 2:00     1
2 2:05     4

[[3]]
    Time Value
1   2:00     1
2   2:05     4
2.1 2:05     4
1.1 2:00     1 
```

如果目标是将它们全部放在同一个数据框中，则添加此选项：

```
> do.call(rbind, TimVal)
    Time Value
1   2:00     1
2   2:05     4
3   2:00     1
4   2:05     4
11  2:00     1
21  2:05     4
2.1 2:05     4
1.1 2:00     1 
```

如果您对 R 非常陌生，您可能还没有发现最后的代码没有改变 TimVal；它只显示了将返回什么值，并且为了使效果持久，您需要分配一个名称。甚至可能是同一个名字：

```
TimVal <- do.call(rbind, TimVal): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:39:10.983

而不是删除，只需选择您想要的列，即

```
data1 = data1[, c(2, 3)] 
```

关于您的其他数据集的问题仍然存在：`data2`等等。我怀疑由于您的数据框都是“相似的”，您可以将它们组合成一个带有附加标识符列的单个数据框`id`，它会告诉您数据集编号。如何组合数据集取决于数据的存储方式。但通常情况下，`for`循环`read.csv`是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:21:14.297

我不确定我是否应该推荐这些，因为这些都是相当“破坏性”的方法......在尝试之前确保你有原始数据的备份；-)

这种方法假设数据集已经在您的工作区中，并且您只需要它们的新版本。

这两者几乎相同。一种选择使用`lapply()`，另一种使用`for`。

*   `lapply`

    ```
    lapply(ls(pattern = "data[0-9+]"),
           function(x) { assign(x, get(x)[2:3], envir = .GlobalEnv) }) 
    ```

*   `for`

    ```
    temp <- ls(pattern = "data[0-9+]")
    for (i in 1:length(temp)) {
      assign(temp[i], get(temp[i])[2:3])
    } 
    ```

基本上，`ls(.etc.)`将在您的工作空间中创建一个与您提供的命名模式相匹配的数据集向量。然后，编写一个小函数来选择要保留的列。

一种不那么“破坏性”的方法是创建新`data.frame`的 s 而不是覆盖原来的。这样的事情应该可以解决问题：

```
lapply(ls(pattern = "data[0-9+]"),
       function(x) { assign(paste(x, "T", sep="."), 
                            get(x)[2:3], envir = .GlobalEnv) }) 
```

# ruby-on-rails - 将 Rails 应用程序部署到 1&1 Virtual Server L Windows

> ID：12499096
> 
> 赞同：0
> 
> 时间：2012-09-19T16:37:24.353
> 
> 标签：ruby-on-rails, deployment, windows-server-2008

晚上所有，

我有一个需要部署到 1&1 Virtual Server L Windows 的 rails 应用程序。

我的设置使用 MYSQL 数据库、rails 3.2、ruby 1.9，并且是在 mac 上构建的。

我已经阅读了大量关于 Linux 风格部署的说明，但是在使用 Windows 服务器时是否适用相同的规则？有些文章建议对您的应用进行 ftp 处理，然后安装 3 个其他依赖项。这好得令人难以置信吗？

我意识到这是一个相当开放的问题，但是有人知道启动和运行这个东西的前几个步骤或任何有用的文档吗？

提前致谢

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:29:48.913

我没有测试它，因为我没有使用windows服务器，但是你检查过这个吗？ [https://github.com/SciMed/capistrano-windows-server](https://github.com/SciMed/capistrano-windows-server)

# apache-flex - SWF 不会在 Chrome 上加载，但会在 Firefox 上加载

> ID：12499103
> 
> 赞同：1
> 
> 时间：2012-09-19T16:37:44.993
> 
> 标签：apache-flex, load, flash, swfobject

您好我遇到了由 Flash Builder 4.5 生成的 SWF 的性能问题。

SWF 不会在 Chrome 中运行，但会在我自己的机器上的 Firefox 上运行 - 运行 Mountain Lion 的 Macbook Pro，并且不会在当前在单独的 MSI 上网本上的任何浏览器中运行，该应用程序将从此处运行.

有人有什么想法吗？我最初在尝试使用 SharedObject 时遇到了这个问题，但我修复了一个早期的错误，此后它恢复了正常的性能。

我遇到的主要问题显然是 swf 不会在 MSI 上网本上运行，即使安装了闪存（我可以查看所有其他闪存内容）

康纳

- 编辑 -

通过使用独立的闪存调试器，我发现 swf 位于错误的安全沙箱中。要将其放置在正确的沙箱中，我必须创建一个名为 FlashPlayerTrust 的目录，然后在该目录中创建一个 .CFG 文件，其中包含 SWF 的文件 URL。然后我不得不刷新浏览器上的缓存，但之后一切正常。

# c - 为什么将空结构设为新的 typedef 并将其用作指针类型？

> ID：12499106
> 
> 赞同：3
> 
> 时间：2012-09-19T16:38:03.653
> 
> 标签：c, pointers, struct, typedef

我有一个标头和一个使用此标头的示例应用程序，全部用 C 语言编写，除此之外，我得到了该软件的几乎所有逻辑；这是标题的有趣部分：

```
struct A;
typedef struct A A; 
```

在 C 应用程序中，这`A`仅在声明这样的指针时使用

```
A* aName; 
```

我很确定这是一个只包含`A`在范围/命名空间中的解决方案，并且只给一个基本上是 void 的指针命名，因为这种指针只用于处理某种数据，它更像是一些命名空间糖。

这可能是为了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:55:10.997

你是对的，它就像一个 void 指针，因为它`void`是一个不完整的类型，并且在这个文件`A`中也是一个不完整的类型。对于不完整类型，您所能做的就是传递指向它们的指针。

`void*`与此文件相比，它有一个优势，即它是一种*不同*且不兼容的类型，与使用`B`. 所以你得到了一点类型安全。如果`A`is`windowHandle`和`B`is `jpgHandle`，那么您不能将错误的传递给函数。

与定义接受一个函数`void*`的文件相比，它有一个优势——该文件可以包含 的定义，并给出它想要的任何成员，第一个文件不需要知道。`.c``A*``struct A``A`

但是，您说`A`在任何头文件中都没有提到其他内容，这意味着没有接受或返回它的函数。您还说，`A`源文件中的唯一用途是声明指针——我想知道这些指针的值来自哪里，如果有的话。

如果如果有人定义了一个未初始化的`A*`并且从不使用它，那么这一切都发生了，那么显然这是一些旧代码的残余，或者是一些从未编写过的代码的开始，它根本不应该在文件中。

最后，如果真正的类型被称为比 不那么愚蠢的东西`A`，那么这个名字可能会为它的使用提供线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:53:07.263

我假设`struct A`是一个前向声明。它很可能是在其中一个文件中定义的`.c`。

这样做`struct A`的成员对于定义它的模块是私有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T09:32:18.943

这是一个不透明指针的示例，它对于传递句柄很有用。有关更多信息，请参阅[http://en.wikipedia.org/wiki/Opaque_pointer 。](http://en.wikipedia.org/wiki/Opaque_pointer)从 C++ 的角度来看，这里可能有趣的是，您可以使用一个成员定义一个类，该成员是一个（至今）未定义的指针`struct`。虽然这`struct`还没有在头文件中定义，但在后来的一些 cpp 实现中，这`struct`是给定的主体，编译器会完成其余的工作。这种策略也称为 Pimpl 成语（您可以在 Internet 上找到更多内容）。[Microsoft 在http://msdn.microsoft.com/en-us/library/hh438477.aspx](http://msdn.microsoft.com/en-us/library/hh438477.aspx)简要讨论了它。

# git - 为什么 git commit --amend 会发生冲突？这很奇怪

> ID：12499107
> 
> 赞同：1
> 
> 时间：2012-09-19T16:38:05.913
> 
> 标签：git, version-control, git-push, git-commit, git-amend

```
*   84b134d - (HEAD, origin/lab_master, lab_master) comment macro defination which is protent to be a fun
|\
| * 735d88f - add small script to ease ctag related option (13 minutes ago) 
* | 6623a94 - add small script to ease ctag related option (4 minutes ago) 
|/
* 0d0913a - add gitignore to ignore ctags file (57 minutes ago) 
```

735d88f 是 --amend 提交，但是此时发生了冲突，为什么？

我只有一台电脑，我总是在上面编辑文件，我也只有一个本地仓库，而且这个仓库只在这里使用，**我认为不可能发生冲突**？

但它发生了，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T17:27:30.670

最好只修改尚未推送到服务器的提交。一旦你推送了一个提交，如果你尝试修改它并推送它，它将导致冲突，因为你已经更改了历史记录（如服务器上记录的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:17:01.143

我没有看到冲突的例子。您所做的是从同一时间点进行相同的更改，然后将它们合并。无论哪种方式，您都可以通过将所有内容压缩为一个来解决此问题

```
git tag finalstate 84b134d
git stash -u
git reset --hard 0d0913a
git checkout finalstate -- .
git add -A
git commit -C finalstate 
```

如果“注释宏”提交和第二个“添加小脚本”提交有效，您可以

```
git tag finalstate 84b134d
git stash -u
git reset --hard 6623a94
git checkout finalstate -- .
git add -A
git commit -C finalstate 
```

反而。如果你想要第二个，那么

```
git tag finalstate 84b134d
git stash -u
git reset --hard 735d88f
git checkout finalstate -- .
git add -A
git commit -C finalstate 
```

在 with 之后删除 helper 标签

```
git tag -d finalstate 
```

如果您在第二次提交之后推送，然后修改，然后拉取，那么您将与冲突合并。不知道为什么您没有针对冲突解决的合并单独提交。您可能在冲突状态下做了更多工作，修复了冲突，添加了所有更改并提交。在这种情况下，我写的最后一组说明将对您有所帮助。

# java - 如何删除lucene目录以及不同的段文件

> ID：12499108
> 
> 赞同：1
> 
> 时间：2012-09-19T16:38:08.717
> 
> 标签：java, file-io, lucene

使用 FSDirectory 构建一个 lucene 索引，以便它可以多次使用。所以当一个新的批处理运行时，它需要被删除，以便从硬盘驱动器中删除所有由 lucene 创建的不同文件。

**`IndexWriter.deleteAll()`**删除所有文件，但仍然有一些段文件没有被删除。请让我知道如何删除 lucene 目录中存在的段文件。

不同的段文件是 **segments.gen segments_2** 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T12:22:00.653

Lucene 保持段信息能够保持一些关于新段的假设*永远不会*得到低于任何先前段的“计数器”值。删除它似乎毫无意义，如果您真的想重用该位置，请将索引作为一个整体删除并在同一位置创建一个新索引。

从外部删除 Lucene 的文件是一个问题的根源。

# linux - 如何创建一个 txt 文件，其中列是 Linux 中的降序子目录？

> ID：12499110
> 
> 赞同：1
> 
> 时间：2012-09-19T16:38:18.900
> 
> 标签：linux, file, directory-structure

我的数据遵循以下结构：

../data/study_ID/FF_Number/Exam_Number/日期，

其中数据目录包含 176 个参与者的子目录。ID号代表参与者ID，下面的每个子目录代表一些实验号。我想创建一个 txt 文件，其中每个参与者一行和以下列：学习 ID、FF_number、Exam_Number 和日期。

然而，它变得有点复杂，因为我想将参与者分成每块约 15-20 ppt 的块以进行以下分析。

有什么建议么？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:43:11.557

嗯，没人吗？

您应该重定向“find”命令的输出，考虑开关 -type d 和 -maxdepth，并可能使用 sed 解析它，将“/”替换为“空格”。也许通过“cut”和“column -t”命令进行管道，“sort”和“uniq”会很有用。除了 FF 和 ID 之外，名称是否包含空格或特殊字符，例如与参与者姓名相关的字符？

应该可以得到一个带有“一个衬里”和几个管道的 TXT。

您应该尝试并在此发布您的工作的第一个结果:)

编辑：好的，我为我创建了一个包含数千个目录和子目录的结构，这些目录和子目录按参与者、考试编号等编号，看起来像这样（也许它与你所拥有的不同，但不要担心）。研究编号从 5 到 150，FF 从 45 到 75，日期从 2012_01_00 到 2012_01_30 - 这使得目录总数非常庞大。

```
/Users/pwadas/bzz/data
/Users/pwadas/bzz/data/study_005
/Users/pwadas/bzz/data/study_005/05_Num
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_00
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_01
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_02
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_03
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_04
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_05
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_06
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_07
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_08
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_09
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_10
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_11
/Users/pwadas/bzz/data/study_005/05_Num/45_Exam/2012_01_12 
```

现在，我想要（引用）“txt 文件，每个参与者一行和以下列：研究 ID、FF_number、Exam_Number 和日期。”

所以我使用以下单线：

```
find /Users/pwadas/bzz/data -type d | head -n 5000 |cut -d'/' -f5-7  | uniq |while read line; do echo -n "$line: " && ls -d /Users/pwadas/bzz/$line/*Exam/* | perl -0pe 's/.*2012/2012/g;s/\n/ /g' && echo ; done  > out.txt 
```

这是输出（ out.txt 的前几行）。行很长，我在输出时将其剪切为前 80-90 个字符：

```
dtpwmbp:data pwadas$ cat out.txt |cut -c1-90
data: 
data/study_005: 
data/study_005/05_Num: 2012_01_00 2012_01_01 2012_01_02 2012_01_03 2012_01_04 2012_01_05 2
data/study_005/06_Num: 2012_01_00 2012_01_01 2012_01_02 2012_01_03 2012_01_04 2012_01_05 2
data/study_005/07_Num: 2012_01_00 2012_01_01 2012_01_02 2012_01_03 2012_01_04 2012_01_05 2
data/study_005/08_Num: 2012_01_00 2012_01_01 2012_01_02 2012_01_03 2012_01_04 2012_01_05 2
dtpwmbp:data pwadas$ 
```

我希望这会对您有所帮助，并且您将能够根据您的需要和模式对其进行修改，这似乎是我所能做的:) 您应该分析一个衬里，尤其是“cut”命令，并且perl-regex 部分，它从“ls”输出中删除换行符和完整目录名称。这可能是最优的，但美化不是这里的重点，我猜 :) 所以，祝你好运 :) PS。“head”命令限制 N 首行的输出，您可能想跳过 | 头.. | 部分。

# php - 会员搜索功能

> ID：12499116
> 
> 赞同：1
> 
> 时间：2012-09-19T16:38:55.203
> 
> 标签：php, mysql, search

我试图为我在我的页面上获得的搜索功能提出 MySQL 逻辑。它是一个简单的表格，用户可以选择填写搜索条件。条件作为参数发送到生成 mysql 逻辑的函数。这是 PHP 控制器文件中的内容：

```
 case 'search':
         if((empty($_POST['username'])) && (empty($_POST['firstname'])) && (empty($_POST['lastname']))
                && (empty($_POSt['agemin'])) && (empty($_POST['agemax'])) && (empty($_POST['country']))){
                $members = get_all_username();
         } else {
            if(isset($_POST['username'])){
                $otheruser = $_POST['username'];
            } else { $otheruser = null; }
            if(isset($_POST['agemin'])){
                $ageMin = $_POST['agemin'];
            } else { $ageMin = null; }
            if(isset($_POST['agemax'])){
                $ageMax = $_POST['agemax'];
            } else { $ageMax = null; }
            if(isset($_POST['country'])){
                $country = $_POST['country'];
            } else { $country = null; }
            //if(isset($_POST['isonline']))

        $members = search_members($otheruser, $ageMin, $ageMax, $country);
        }
        include('displaySearch.php');
        break; 
```

因此，如果未设置任何内容，则会生成并显示所有成员的完整列表。如果设置了任何输入，则调用此函数：

```
function search_members($username, $ageMin, $ageMax, $country){
    global $db;
    $query = "SELECT username FROM profiles WHERE username = :username 
        AND age > :ageMin AND age < :ageMax AND country = :country";
    $statement = $db->prepare($query);
    $statement->bindValue(':username', $username); $statement->bindValue(':ageMin', $ageMin);
    $statement->bindValue(':ageMax', $ageMax); $statement->bindValue(':country', $country);
    $statement->execute();
    if($statement->rowCount() >= 1){
        return $statement->fetchAll();
    } else {
        return false;
    }
} 
```

mysql的逻辑显然是错误的。**我需要一组条件（如果可能，在 MySQL 逻辑中）检查 PHP 变量的值，如果没有，则在查询数据库时不应该考虑它。**因此，如果仅在表单中设置了用户名，则其他变量不应包含在 SQL 逻辑中。

我已经查看了 MySQL IF() 条件，但我仍然无法提出符合我需要的正确代码。如果有人能指出我正确的方向，我就可以自己做剩下的事情。也欢迎任何其他解决此类问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:48:04.760

如果我理解您的问题，那么简单的方法是使用 if else 来构建 sql 查询，例如

```
$sql = "SELECT username FROM profiles WHERE 1 "
if (!is_null($username)) {
    $sql .= " AND username = :username ";
}
// All other checks 
```

# python - 通过 Python REST API 执行 JIRA 转换

> ID：12499123
> 
> 赞同：4
> 
> 时间：2012-09-19T16:39:21.923
> 
> 标签：python, rest, post, jira

如何使用**Python**通过其**REST API**（版本 2）将**JIRA 问题**标记为已*解决*或*已关闭*？

 ****[我在http://docs.atlassian.com/jira/REST/latest/#id199544](http://docs.atlassian.com/jira/REST/latest/#id199544)找到了文档，但我遇到了各种错误，包括：

*   HTTP 错误 415：不支持的媒体类型
*   HTTP 错误 400

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:45:33.683

在搜索了很长时间后，我找到了解决方案，我将其发布在这里，供任何有兴趣制作 Git/Gerrit 钩子来做像我这样的事情的人使用：

首先`http://example.com/rest/api/2/issue/<ISSUE>/transitions?expand=transitions.fields`在浏览器中打开您的网站和问题编号以查找转换 ID。

假设它是 1000：

```
import urllib
import urllib2
import base64
import json

key = 'JIRA-123'
comment = "It's done!"
username = 'username'
password = 'password'

# See http://docs.atlassian.com/jira/REST/latest/#id199544
url = 'http://example.com/rest/api/2/issue/%s/transitions' % key
auth = base64.encodestring('%s:%s' % (username, password)).replace('\n', '')
data = json.dumps({
    'transition': {
        'id': 1000    # Resolved (for my setup)
    },
    'update': {
        'comment': [
            {
                'add': {
                    'body': comment
                }
            }
        ]
    },
})
request = urllib2.Request(url, data, {
    'Authorization': 'Basic %s' % auth,
    'Content-Type': 'application/json',
})
print urllib2.urlopen(request).read() 
```

如果您不想添加评论，可以完全省略评论部分。****

# vba - 仅当 Excel 工作簿使用 VBScript 打开时，如何运行宏？

> ID：12499127
> 
> 赞同：2
> 
> 时间：2012-09-19T16:39:36.880
> 
> 标签：vba, excel, vbscript, automation

世界！

我正在尝试在我的工作中自动执行报告任务，但我遇到以下情况：

我需要使用脚本在工作簿上执行宏。我尝试编写一个 vbscript 来完成这项工作，这是其中的重要部分：

```
Set objWbk = GetObject("***Path***\test.xlsm")

objWbk.Application.Run "test.xlsm!test" 

WScript.Quit 
```

宏运行完美。我真正的问题是我只想在工作簿打开时才做报告。

有没有办法（在 vbs 或 vba 中）确定该工作簿是否打开？（顺便说一句，它位于我网络上的另一台计算机上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:05:30.220

这没有经过全面测试，可能需要进行一些修改，但看看它是否能满足您的需求。

```
On Error Resume Next
Set objWbk = GetObject("***Path***\test.xlsm")

If Err.Number = 0 Then objWbk.Application.Run "test.xlsm!test" 

wScript.Quit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:24:58.747

由于您只想在工作簿已打开时运行宏，因此可能会起作用：

```
wbName = "test.xlsm"
wbFullName = "***Path***\" & wbName

Set xl = GetObject(, "Excel.Application")
For Each wb In xl.Workbooks
  If LCase(wb.Path & "\" & wb.Name) = wbFullName Then
    wb.Application.Run wbName & "!test"
  End If
Next 
```

# sql - 如果字段 E 包含“MSD__CMT_Change”，则

> ID：12499128
> 
> 赞同：0
> 
> 时间：2012-09-19T16:39:38.260
> 
> 标签：sql, oracle, oracle10g

我不确定这是否可以在 SQL Query 中完成。我可以做到EXCEL。

**询问**

```
SELECT
        A,
        B,
        C,
        D,
        E,
        F
from TableA
where D in ('MSD_CHANGE','MSD_CMT_CHANGE') 
```

[![床单](../Images/5b45eab3179aca11346ddc265f183410.png)](https://i.stack.imgur.com/3IXc4.jpg)

如果字段 D 包含`MSD_CMT_CHANGE`然后在上面和右边的行中 1 = 7866 excel 语言 E1 = E2 中的另一个单词。

目前我从 SQL 中获取查询数据并在 Excel 中运行脚本来执行此操作。
如果我能在 SQL 中做这将减少我的工作量。

**VBA代码：**

```
Sub Test
    Dim rng as Range, cl as Range

    Set rng = Range("D2:D" & Range("D" & Rows.Count).End(xlUp).Row)

    For each cl in rng
       If cl = "MSD_CMT_CHANGE" AND cl.Offset(-1, 0) = "MSD_CHANGE" Then
           cl.Offset(-1, 1) = cl.Offset(0, 1)
       End If
    Next cl
End Sub 
```

**解释**

```
if field_D = MSD_CMT_CHANGE then  

   compare row above it if equal "MSD_CHANGE" then 

        cell E1 = E2. 
```

我有超过 5000 行数据。

检查下面的图片以获得更好的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:55:48.383

我假设有一列（在我的示例中，该列是`id`），您按顺序排列数据以使列`D`显示为这样。

```
A    D            
------------------
1 MSD_CHANGE
-----------------
2 MSD_CMT_CHANGE
-----------------
3 MSD_CMT_CHANGE
-----------------
4 MSD_CHANGE 
```

在此示例中，ID 是您对数据进行排序的列

```
select id
      , d
      , decode(d, 'MSD_CHANGE', 
               decode(lead(d, 1, d) over(order by id), 'MSD_CMT_CHANGE', 
                      lead(e, 1, e) over(order by id) , e 
                      ) 
              ,e) e
  from t1
  order by id 
```

这是一个[**演示**](http://www.sqlfiddle.com/#!4/9f75e/1)

# user-interface - 批处理文件的GUI？

> ID：12499129
> 
> 赞同：3
> 
> 时间：2012-09-19T16:39:38.973
> 
> 标签：user-interface, windows-7, interface, batch-file

我有一个批处理文件，它是一个非常简单的程序，可以启动网站、迷你网络浏览器类型的体验、打开程序的命令等。我怎样才能为此或 GUI 制作界面？无需完全手动更改我的代码。这是我的代码的示例：

```
:start
@echo off
COLOR 1E
cls
echo Welcome to Wannow Dashboard.  This is the main page.
echo Type in the number to be redirected to your desired location.
echo 1\. Useful Websites
echo 2\. Programs     
echo Wannow Dashboard created by Brad Wannow

set/p var1=
if %var1% == 1 goto Websites
if %var1% == 2 goto program
pause
exit

:websites
COLOR 1E
cls
echo Welcome to Wannow Dashboard: Websites. Select a command, type in number to be redirected.
echo 1\. www.Pandora.com
echo 2\. www.Google.com
echo 3\. Aventa Blackboard
echo 4\. Other
@echo OFF 

@echo %time% 
ping -n 1 -w 1 127.0.0.1 1>nul        
echo Wannow Dashboard 
```

当然还有更多的代码，但这是我的程序的编写方式，还有一些 START 命令和用户输入等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:42:54.970

图形命令在直接批处理文件中不可用。我建议你看看 vbscript 或 powershell

有很多指南 - 这是[vbscript](https://www.microsoft.com/en-us/download/details.aspx?id=2764)的帮助文件。是的，它会有所不同。Echo Hello World 会变成 msgbox("Hello World") 并且输入看起来像 inputbox("What is your name?") （在非常基本的层面上）

没有自动转换，除非你有 Visual Studio，否则没有免费的集成开发人员，但[notepad++](http://notepad-plus-plus.org/)似乎是首选编辑器，因为它的语法突出显示

从[这里](http://www.vistax64.com/vb-script/177754-create-menu.html#post826436)，一个带有菜单的示例脚本

```
'-----------------------------------------------------------------
' Name: Menu Template Script
' By: Harvey Colwell
' CopyRight: (c) Jul 2000, All Rights Reserved!
'
'*****************************************************************
Option Explicit

Dim oFS, oWS, oWN

Set oWS = WScript.CreateObject("WScript.Shell")
Set oWN = WScript.CreateObject("WScript.Network")
Set oFS = WScript.CreateObject("Scripting.FileSystemObject")

'----------
' Script SetUp
'----------

'----------
' Main
'----------
Select Case InputBox ( _
"Enter menu item number then Click Ok. . ." & vbCrlf & vbCrlf & _
" [1] Item 1" & vbCrlf & _
" [2] Item 2" & vbCrlf & _
" [3] Item 3" & vbCrlf & _
" [4] Item 4", _
"Main Menu")

Case "1"
Call sub1()
Case "2"
Call sub2()
Case "3"
Call sub3()
Case "4"
Call sub4()
Case Else
WScript.Echo "You entered an invalid menu choice!"

End Select

'----------
' Clean Up
'----------

Call CleanUp

'-----------------------------------------------------------------
' Subroutines
'*****************************************************************

'---------------------
Sub CleanUp()
Set oWS = Nothing
Set oWN = Nothing
Set oFS = Nothing
WScript.Quit
End Sub

'---------------------
Sub sub1()
WScript.Echo "You selected Menu Item 1"
End Sub

'---------------------
Sub sub2()
WScript.Echo "You selected Menu Item 2"
End Sub

'---------------------
Sub sub3()
WScript.Echo "You selected Menu Item 3"
End Sub

'---------------------
Sub sub4()
WScript.Echo "You selected Menu Item 4"
End Sub

'-----------------------------------------------------------------
' Functions
'*****************************************************************
'---------------------

'*************************************** 
```

# c - Linux timerfd> 每 x 秒调用一次函数而不阻塞代码执行

> ID：12499131
> 
> 赞同：4
> 
> 时间：2012-09-19T16:39:40.180
> 
> 标签：c, linux, timer

需要每 X（比如说 5）秒调用一个函数，下面的代码就是这样做的。

但它阻止了代码的执行。正如我希望它像 一样工作`setitimer()`，我可以（例如）每 5 秒调用一次函数并执行其他操作。

```
 #include <sys/timerfd.h>
   #include <time.h>
   #include <unistd.h>
   #include <stdlib.h>
   #include <stdio.h>
   #include <stdint.h>        /* Definition of uint64_t */

   #define handle_error(msg) \
           do { perror(msg); exit(EXIT_FAILURE); } while (0)

   int
   main(int argc, char *argv[])
   {
       struct itimerspec new_value;
       int max_exp, fd;
       struct timespec now;
       uint64_t exp, tot_exp;
       ssize_t s;

       if (clock_gettime(CLOCK_REALTIME, &now) == -1)
           handle_error("clock_gettime");

       /* Create a CLOCK_REALTIME absolute timer with initial
          expiration and interval as specified in command line */

       new_value.it_value.tv_sec = now.tv_sec + 1; 
       new_value.it_value.tv_nsec = now.tv_nsec;

       new_value.it_interval.tv_sec = 5;
       new_value.it_interval.tv_nsec = 0;
       max_exp = 5; //say 5 times

       fd = timerfd_create(CLOCK_REALTIME, 0);
       if (fd == -1)
           handle_error("timerfd_create");

       if (timerfd_settime(fd, TFD_TIMER_ABSTIME, &new_value, NULL) == -1)
           handle_error("timerfd_settime");

       printf("timer started\n");
       for (tot_exp = 0; tot_exp < max_exp;) {
           s = read(fd, &exp, sizeof(uint64_t));
           if (s != sizeof(uint64_t))
               handle_error("read");

           tot_exp += exp;
           printf("read: %llu; total=%llu\n",
                   (unsigned long long) exp,
                   (unsigned long long) tot_exp);
       }
    //Do something else ?
    //while(1);
       exit(EXIT_SUCCESS);
   } 
```

**编辑** 我还有一个问题。在将上述代码中的这些行从

```
 new_value.it_interval.tv_sec = 5;
   new_value.it_interval.tv_nsec = 0; 
```

到

```
 new_value.it_interval.tv_sec = 0;
   new_value.it_interval.tv_nsec = 5000000000; 
```

我看到没有 5 秒的延迟。这里发生了什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:48:05.143

您需要了解如何使用多路复用系统调用，如[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)（或较旧的，往往会变得过时），并在使用它们之前测试[timerfd_create(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/timerfd_create.2.html)`select(2)`获得的文件描述符的可读性。`read(2)`

但是，请注意，`timerfd_create`仅当该`read`调用成功时才有效。因此，只有当`poll`您说 fd 不可读时，您才能执行其他操作。其他东西应该很快（持续不到 5 秒）。

您可能想研究事件循环库，例如[libevent](http://libevent.org/)（包装`poll`）。如果您正在编写图形应用程序（使用 Qt 或 Gtk），它确实已经有自己的事件循环。如果足够聪明，你可以在没有任何 5 秒的情况下完成你的 5 秒时间`timerfd_create`，只需通过你的事件循环（通过仔细设置给定的超时`poll`等）。

### 附加物：

该`tv_nsec`字段应始终为非负数且小于 1000000000（一秒内的纳秒数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:00:25.943

你有什么理由必须使用timerfd？只需安排一个警报并为 SIGALRM 创建一个处理程序来调用您的函数。

如果您不想使用信号，只需创建一个额外的线程来阻塞您的计时器 fd 并在主线程中正常进行。

如果您不喜欢其中任何一个，并且想在等待时工作，则必须进行投票。您可以按照 basile 的建议进行操作，或者您可以只存储当前时间并检查何时进行轮询以查看所需的时间段是否已过。

# javascript - 解析连接的 javascript 字符串

> ID：12499132
> 
> 赞同：1
> 
> 时间：2012-09-19T16:39:40.780
> 
> 标签：javascript, parsing, variables, concatenation, split

我有一个连接的 javascript 字符串，我需要解析和匹配“&mediaID=334380”，无论它落在字符串中的哪个位置。我需要能够找到“&mediaID=”，然后写出 = 后面的数字并以“结束”

此连接变量中将只有一次“&mediaID=334380”实例，但它可能位于字符串的不同部分。

```
var vidPlyrVars = "vidPlayerSchool=" + vid_partner + "&vidPlayerWd=" + vid_width +      "&vidPlayerHt=" + vid_height + "&";
vidPlyrVars += "vidURL=" + vid_url + "&imgURL=" + img_url + "&color_button_bkg=0d141a" + "&color_controls_bkg=0d141a" + "&mediaID=334380" + "&share_buttons=on" + "&vip_url=http://somesite.com/all/index.html" + "&";
vidPlyrVars += "vidTitle=" + escape("some title") + "&";
vidPlyrVars += "autoplay=off&autoplay_refresh=always&full_screen=on&ad_prerolls=off&";
vidPlyrVars += "list_type=none&"; 
```

我只需要 &mediaID= 之后的数字，不管有多少数字。我尝试过拆分，但它不起作用，因为 &mediaID= 可能位于字符串中的不同位置。

*还。如果 mediaID 在 ID 之前可能有也可能没有 _，例如 media_ID 和 mediaID，该怎么办。有没有办法在一个正则表达式中同时匹配两者？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:43:05.403

如果您确定它后面会跟一个 & 符号，您可以使用正则表达式来查找它。

像这样的模式`&mediaID=(\d+)&`就足够了。然后您的号码将存储在捕获组中。

[http://www.javascriptkit.com/javatutors/redev2.shtml](http://www.javascriptkit.com/javatutors/redev2.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:43:54.963

正则表达式是要走的路。

在你的控制台中试试这个：

```
"asdasdasdasdasd&mediaID=645654654&asdasdasdasd=asdasdasdasdasd".match(/&mediaID=[0-9]+/) 
```

另外，如果你想要单独的号码，你可以使用

```
"asdasdasdasdasd&mediaID=645654654&asdasdasdasd=asdasdasdasdasd".match(/&mediaID=([0-9]+)/) 
```

[0-9]+ 表示从 0 到 9 的任何数字，至少出现一次。如果你用括号括起来，它会将它存储在响应中（顺便说一下，这是一个数组）。

如果还有其他疑问，请告诉我。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:44:25.727

这应该有效：

```
var number = str.match(/&mediaId=(\d+)/)[1]; 
```

# visual-studio-2010 - VS2012下开发VSIX for VS2010？

> ID：12499133
> 
> 赞同：10
> 
> 时间：2012-09-19T16:39:44.367
> 
> 标签：visual-studio-2010, visual-studio-2012, visual-studio-extensions, vsix

有没有办法在 Visual Studio 2012 下开发 VSIX 扩展，然后可以安装在 Visual Studio 2010 中？我尝试将`Microsoft.VisualStudio.Pro`target 的版本范围设置为`[10.0,11.0]`，但是当我启动已编译的 VSIX 时，它只提供要安装到的 VS2012。

我知道可以在 VS2010 下开发 VSIX，它适用于 VS2012，尽管它需要手动编辑`.vsixmanifest`文件。但我想知道是否可以使用更新的 VS2012 进行开发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T16:49:50.000

您可以，但必须手动创建`source.extension.vsixmanifest`1.0 格式的文件（由 VS2010 处理），而 VS2012 使用 2.0 版本。您只会丢失可视属性编辑器。

您还需要确保您已针对 .NET 4.0 或更低版本而不是 .NET 4.5 进行编译。

# android - 如何在下载文件时制作旋转动画

> ID：12499134
> 
> 赞同：0
> 
> 时间：2012-09-19T16:39:42.877
> 
> 标签：android

我有一个将文件复制到 SD 卡的程序。该程序需要一段时间才能运行，现在它只是在复制文件时冻结。

我看到一些其他程序在文件下载时在屏幕中央有一个轮子旋转的动画。

我试图谷歌旋转控件，但这带来了关于使用旋转轮的选择器控件的动画。

这个功能是android内置的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:45:35.667

使用带有 indeterminate="true" 的 ProgressBar 小部件。您可以使用 ProgressDialog，阅读[http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

此外，了解线程，因为您应该在后台线程中保存文件。 [http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:45:46.990

您应该使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来下载文件。这将防止您的 UI 冻结，并且如果您愿意，还可以轻松地显示进度信息。如果您想让它在后台下载，并让用户继续使用该应用程序，那也是可行的。

您可以在我的一个开源项目中找到一个 AsyncTask，它下载文件并在[此处](https://github.com/RaghavSood/AppaholicsUpdateChecker/blob/master/UpdateChecker/src/com/appaholics/updatechecker/DownloadManager.java)使用进度条显示进度信息。您可以更改进度对话框的样式以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:46:22.930

我假设您正在使用某种 AsyncTask 来下载它？

如果是这种情况，您可以在调用 task.execute() 之前使不确定的进度条开始旋转，然后在 onPostExecute() 中，您可以将进度条的可见性设置为 view.GONE

这是进度条的示例： http: [//codehenge.net/blog/2011/06/android-development-tutorial-progressbar-example/](http://codehenge.net/blog/2011/06/android-development-tutorial-progressbar-example/)

# css - li 文本不使用整个宽度

> ID：12499135
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:40:07.433
> 
> 标签：css

我有一个 ul，里面有 3 li。第一个 li 文本是“opptakskrav”，最后一个 li 元素是“ja”。任何人都知道为什么我的第二个 li 上的文本不使用整个宽度以及为什么它在中途开始一个新行？

![在此处输入图像描述](../Images/a930000172b3d46ebd174e4c55c127c6.png)

```
<ul class="admission infoUl">
     <li class="head">Opptakskrav</li>
     <li>Kravet for opptak til bachelorgraden er normalt generell studiekompetanse.</li>
     <li> ja</li>
</ul> 
```

这是唯一的CSS：

```
.infoUl {
      padding-left:35px;
 }

 .infoUl li.head  {
      font-weight:bold;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:48:15.360

看起来*ul*或*li*上设置了宽度。也许一个样式是从不同的样式表继承而来的。是否有另一组样式使文本无衬线具有灰色背景？

# iphone - 在应用商店上传了一个应用，管理器上没有图标

> ID：12499137
> 
> 赞同：0
> 
> 时间：2012-09-19T16:40:17.913
> 
> 标签：iphone, xcode

我上传了一个应用程序，它在管理器上没有显示图标，但在 iphone 模拟器和真正的 iPhone 上显示了图标。会不会有什么问题？归档后是否需要确保显示应用程序图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:46:05.837

如果图标显示在模拟器和您的测试设备上，则应该没有问题。可以肯定的是，您可以尝试从您的设备中完全删除该应用程序，清理项目并重建。如果该图标出现，则说明组织者搞砸了。

# html - 空间不足时自动换行表格列

> ID：12499140
> 
> 赞同：1
> 
> 时间：2012-09-19T16:40:42.420
> 
> 标签：html

我必须使用旧的模板系统才能在网页上显示购物产品。今天，所有产品都一排一排地展示了所有的细节

```
P1
P2
P3
P4 
```

这个旧软件使用一对标签`<ED_START> <ED_END>`来标记必须在 HTML 页面中重复的产品模板。事实上，每个产品都有自己的 HTML 表格。它一直有效。

现在我想要的是通过水平和垂直显示元素来减小显示尺寸，比如

```
P1 P2
P3 P4
P5 P6 
```

或者

```
P1 P2 P3
P4 P5 P6 
```

根据屏幕分辨率。

我知道如果我将产品模板更改为 a `<td>`，那么浏览器将尝试在同一行上呈现 10 个或更多产品，这正是我不想要的。

通常，我会`</tr><tr>`每 2 个元素插入一个，但是这个模板系统（这是一个遗留的专有软件）不允许这样做。所有项目的模板必须相同，纯 HTML 加上他们自己的价格、描述、图片等标记。

## 我的问题是

如何在 HTML 中创建一个表格，使列数适应可用的屏幕大小（换句话说，根据需要自动换行）？可以使用 JavaScript 和 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:48:21.667

你想要的是[**响应式设计**](http://www.alistapart.com/articles/responsive-web-design/)，[**twitter bootstrap**](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)就是一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:51:14.787

尝试使用媒体查询 -[**演示**](http://jsfiddle.net/j5U7U/)

```
table {
    border: solid;
    float: left;
}

@media only screen and (max-width: 480px) {
    table { width: 100%; }
}

@media only screen and (max-width: 800px) and (min-width: 481px) {
    table { width: 49%; }
}

@media only screen and (min-width: 801px) {
    table { width: 33%; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T20:59:15.567

很好地使用`div`s，例如[http://android.hd2roms.com/](http://android.hd2roms.com/)，可以提供帮助。

秘密`float:left`在于使它们按顺序出现的样式

# c++ - 如何调用这个函数指针

> ID：12499143
> 
> 赞同：0
> 
> 时间：2012-09-19T16:40:49.753
> 
> 标签：c++, function-pointers

在尝试调用函数时，我在下面遇到 C2064 错误。我究竟做错了什么？

```
//error C2064: term does not evaluate to a function taking 1 arguments
#include <iostream>
#include <string>

using namespace std;

class DXStartupEncoder {
public:
   void EncodeA(string& message) const { message = "A"; }
   void EncodeB(string& message) const { message = "B"; }
   void EncodeC(string& message) const { message = "C"; }
   void EncodeD(string& message) const { message = "D"; }
   void EncodeE(string& message) const { message = "E"; }
   void EncodeF(string& message) const { message = "F"; }
};

typedef void (DXStartupEncoder::*Encoder)(string&) const;
Encoder dn_sequence[] = {&DXStartupEncoder::EncodeA, &DXStartupEncoder::EncodeB, &DXStartupEncoder::EncodeC, &DXStartupEncoder::EncodeD };
Encoder queue_sequence[] = { &DXStartupEncoder::EncodeE, &DXStartupEncoder::EncodeF };

int main(int argc, char* argv[])
{
   for(int i = 0; i < sizeof(queue_sequence) / sizeof(queue_sequence[0]); ++i) {
      string param;
      queue_sequence[i](param);  //How to call function here???
      cout << param << endl;
   }

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:43:53.640

你没有函数指针，你有一个*指向成员函数*的数组。**`this`**在取消引用指向成员的指针时，您必须提供对象。

```
(obj.*queue_sequence[i])(param);  //obj must have type DXStartupEncoder 
```

或者，由于您的函数是无状态的，您可以制作它们`static`，然后使用普通函数指针。

```
typedef void (*Encoder)(string&) const; 
```

# c++ - 序列化 C++ 对象

> ID：12499146
> 
> 赞同：4
> 
> 时间：2012-09-19T16:41:01.110
> 
> 标签：c++, serialization, marshalling, deserialization, unmarshalling

我想实现一个序列化类，它接收一个对象并将其转换为二进制流并存储在一个文件中。稍后，应该从文件中重建对象。

虽然这个功能是由 C# 中的 BinaryFormatter 提供的，但我想从头开始设计我自己的序列化类。

有人可以指出一些资源吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T21:14:08.283

我想给你一个否定的答案。它不太有用，但它仍然可能有用。

几年来我一直在使用 boost 序列化，这是我公司最大的战略错误之一。它产生非常大的输出，非常慢，它传播了一大堆依赖项，使得所有东西编译起来都非常慢，然后很难摆脱，因为你有现有的序列化格式。此外，它在不同的编译器上表现不同，因此从 VS2005 升级到 2010 实际上导致我们编写了一个兼容层，这也很难，因为代码很难理解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T19:29:04.587

以下是 C++ 序列化的 2 个解决方案：

*   [Stephan Beal 的 s11n 序列化库](http://s11n.net/)
*   [提升序列化库](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/index.html)

我个人只有第一个经验，实际上只使用基于文本的序列化程序，但我知道定义二进制序列化程序以与 s11n 一起使用很容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T19:50:31.537

我已经使用 boost::serialization 库有一段时间了，我认为它非常好。您只需要像这样创建序列化代码：

```
class X {
  private:
    std::string value_;
  public:
    template void serialize(Archive &ar, const unsigned int version) {
       ar & value_;
     };
 } 
```

无需创建反序列化代码（这就是他们使用 & 运算符的原因）。但是，如果您愿意，您仍然可以使用 << 和 >> 运算符。

也可以不加修改地为类编写序列化方法（例如：如果您需要序列化来自库的对象）。在这种情况下，您应该执行以下操作：

```
namespace boost { namespace serialization {
       template
       void serialize(Archive &ar, X &x const unsigned int version) {
                    ar & x.getValue();
       };
    }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T23:40:41.937

[C++ Middleware Writer](http://webEbenezer.net)可能很有趣。与 Boost 中的序列化库相比，它具有[性能优势](http://webEbenezer.net/comparison.html)。它还自动创建序列化函数。

# c# - 如何在运行时选择 OrderBy/Where 的属性（不使用字符串参数）？

> ID：12499149
> 
> 赞同：0
> 
> 时间：2012-09-19T16:41:14.140
> 
> 标签：c#, linq, linq-to-entities, expression-trees

更新示例以显示更一般的用法。

我有一个实体允许用户提供本地化：

```
public class ResourceValue
{
    public int ResourceValueId { get; set; }
    public string EnglishValue { get; set; }
    public string FrenchValue { get; set; }
    public string SpanishValue { get; set; }
    etc...
} 
```

用于许多其他实体，如下所示：

```
public class SomeEntity
{
    public int Id { get; set; }
    public virtual ResourceValue Name { get; set; }
    public virtual ResourceValue ShortDescription { get; set; }
    public virtual ResourceValue LongDescription { get; set; }
    etc...
} 
```

我想做这样的事情：

```
return context.SomeEntities.OrderBy(x => x.Name); 
```

并像我这样做一样进行这项工作：

```
return context.SomeEntities.OrderBy(x => x.Name.FrenchValue); 
```

基于 CurrentUICulture 是“fr-CA”。

我一直在根据 Marc Gravell 的回答尝试一些事情：[https](https://stackoverflow.com/a/1231941) ://stackoverflow.com/a/1231941但一直无法得到我想要的。

更新 - 这非常接近，但我宁愿将其命名为“OrderBy”，以便最终编码器无需特别考虑即可使用它：

```
 public static IOrderedQueryable<TSource> OrderBy<TSource, TKey>(this IQueryable<TSource> source, Expression<Func<TSource, TKey>> keySelector)
    {
        return ApplyLocalizedOrder(source, keySelector, "OrderBy");
    }

    public static IOrderedQueryable<TSource> ApplyLocalizedOrder<TSource, TKey>(IQueryable<TSource> source, Expression<Func<TSource, TKey>> keySelector, string methodName)
    {
        ParameterExpression arg = keySelector.Parameters[0];
        Expression expr = Expression.PropertyOrField(keySelector.Body, GetCurrentCulture());
        LambdaExpression lambda = Expression.Lambda<Func<TSource, string>>(expr, arg);

        return (IOrderedQueryable<TSource>)typeof(Queryable).GetMethods().Single(
                method => method.Name == methodName
                        && method.IsGenericMethodDefinition
                        && method.GetGenericArguments().Length == 2
                        && method.GetParameters().Length == 2)
                .MakeGenericMethod(typeof(TSource), expr.Type)
                .Invoke(null, new object[] { source, lambda });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:54:23.293

虽然动态创建 lambda 表达式很酷，但您可以通过创建一个在查询之上应用排序的方法以更简单的方式获得结果。该方法看起来像这样：

```
 private static IQueryable<SomeEntity> OrderByName(IQueryable<SomeEntity> source, string culture)
    {
        if (culture == "fr-CA")
        {
            return source.OrderBy(x => x.Name.FrenchValue);
        }

        return source.OrderBy(x => x.Name.EnglishValue);
    } 
```

然后你就可以按如下方式使用它：

```
OrderByName(context.SomeEntities, "en-US") 
```

这是整个示例：

```
public class MyCtx1 : DbContext
{
    public DbSet<SomeEntity> SomeEntities { get; set; }
    public DbSet<ResourceValue> ResourceValues { get; set; }
}

public class SomeEntity
{
    public int Id { get; set; }
    public virtual ResourceValue Name { get; set; }
}

public class ResourceValue
{
    public int ResourceValueId { get; set; }
    public string EnglishValue { get; set; }
    public string FrenchValue { get; set; }
}

class Program
{

    private static IQueryable<SomeEntity> OrderByName(IQueryable<SomeEntity> source, string culture)
    {
        if (culture == "fr-CA")
        {
            return source.OrderBy(x => x.Name.FrenchValue);
        }

        return source.OrderBy(x => x.Name.EnglishValue);
    }

    static void Main(string[] args)
    {
        using (var context = new MyCtx1())
        {
            if (!context.SomeEntities.Any())
            {
                context.SomeEntities.Add(
                    new SomeEntity() 
                    { 
                        Name = new ResourceValue()
                        {
                            EnglishValue = "abc - en",
                            FrenchValue = "xyz - fr"
                        }
                    });

                context.SomeEntities.Add(
                    new SomeEntity() 
                    { 
                        Name = new ResourceValue()
                        {
                            EnglishValue = "xyz - en",
                            FrenchValue = "abc - fr"
                        }
                    });

                context.SaveChanges();
            }

            Console.WriteLine("Ordered by english name");
            DisplayResults(OrderByName(context.SomeEntities, "en-US"));

            Console.WriteLine("Ordered by french name");
            DisplayResults(OrderByName(context.SomeEntities, "fr-CA"));
        }
    }

    private static void DisplayResults(IQueryable<SomeEntity> q)
    {
        foreach (var e in q)
        {
            Console.WriteLine(e.Id);
        }                
    } 
```

结果：

```
Ordered by english name
1
2
Ordered by french name
2
1
Press any key to continue . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:19:00.817

```
context.SomeEntities.Select(v => v.Name.FrenchName).OrderBy(x => x); 
```

但甚至比您`get`的名字更好，返回当前文化或某种文化或您的代码要求的任何内容，当您的班级可以做到时，没有理由在 Linq 查询中这样做。当它在课堂上完成时，无论如何都会更好，因为无论你在哪里调用代码，它都会返回正确的文化。

# c# - 无法更改新按钮的背景颜色

> ID：12499155
> 
> 赞同：1
> 
> 时间：2012-09-19T16:41:54.657
> 
> 标签：c#, wpf, xaml, devexpress

我正在为应用程序使用 XAML 和 MVVM 模式。

在我的应用程序的一部分中，我有一个窗口分为两部分，左栏和右手栏/区域

左列是一排按钮（在加载窗口时生成）

右列/区域将根据用户在左列中单击的按钮显示一组按钮，例如，假设我在左列中有 4 个部门按钮，每个部门按钮将有不同数量的库存项目。

如果我单击左列中的按钮 1，我会在视图模型中执行一些代码来获取该部门中项目的名称。然后我构建了一个新的 observableCollection 以显示在右列/区域中。

所以这不是问题，每次都会生成正确数量的按钮。但是，当我尝试在 ViewModel 中动态更改背景颜色时，视图中的颜色不会更新。

奇怪的是，我可以更改内容、前景色和其他属性，但不能更改背景色。看来只有在加载和运行时才能正确生成背景。使用窗口时我无法更改它。

我尝试过画笔，创建和分配新样式，甚至清除按钮的依赖属性（ .ClearValue(Button.BackgroundProperty) ）

任何人都知道如何在窗口打开时让背景改变颜色以及当我想在我的视图模型中动态生成一组按钮时？

非常感谢大家...我附上了我的 XAML 和 C# 片段，

XAML：

```
<dxd:DockLayoutManager Name="dlSalesScreen">
    <dxd:DockLayoutManager.LayoutRoot>
        <dxd:LayoutGroup Name="Root" Orientation="Horizontal" AllowSplitters="False">

            <dxd:LayoutPanel AllowClose="False" AllowRename="False" 
                             Caption="Departments" HorizontalScrollBarVisibility="Hidden" 
                             CaptionAlignMode="AutoSize"
                             CaptionImageLocation="BeforeText" ShowPinButton="False" >

                <!-- Scrollviewer for department buttons-->
                <ScrollViewer x:Name="deptScrollviewer" Grid.Row="0" Grid.Column="0" Width="185" Height="Auto" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" PanningMode="VerticalOnly">
                    <ItemsControl ItemsSource="{Binding Departments}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel VerticalAlignment="Top" Height="Auto" Orientation="Vertical" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                </ScrollViewer>
            </dxd:LayoutPanel>

            <dxd:LayoutPanel AllowClose="False" AllowRename="False" 
                             Caption="Available stock in department" Width="Auto" 
                             CaptionAlignMode="AutoSize"
                             CaptionImageLocation="BeforeText"  ShowPinButton="False">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="50" />
                    </Grid.RowDefinitions>
                    <!-- Scrollviewer for stock buttons-->
                    <ScrollViewer x:Name="stockScrollViewer" Grid.Row="0" Width="Auto" Height="Auto" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
                        <ItemsControl ItemsSource="{Binding StockItems, UpdateSourceTrigger=PropertyChanged}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel VerticalAlignment="Top" HorizontalAlignment="Left" Orientation="Horizontal" Width="400" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>
                    <Rectangle Grid.Row="1" Margin="0,0,0,0" Height="Auto" Fill="{StaticResource BottomRectangleGradient}" />
                    <Grid Name="gridButtonHolder" Grid.Row="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <GroupBox x:Name="grpStockItem" Grid.Column="0" Header="Selected Item" HorizontalAlignment="Left" Width="200" >
                            <Label x:Name="lblStockName" Content="{Binding SelectedStockItemLabel}" HorizontalAlignment="Left" />
                        </GroupBox>
                        <Button Name="btnSave" Content="Apply" Command="{Binding ConfirmSelectionCommand}" dxc:ThemeManager.ThemeName="Office2007Blue" Grid.Column="1" Width="110" Height="42" Margin="0,8,0,0" />
                        <Button Name="btnClose" Content="Cancel" dxc:ThemeManager.ThemeName="Office2007Blue" Grid.Column="2" Width="110" Height="42" Margin="0,8,0,0" />
                    </Grid>
                </Grid>
            </dxd:LayoutPanel>
        </dxd:LayoutGroup>
    </dxd:DockLayoutManager.LayoutRoot>
</dxd:DockLayoutManager> 
```

C＃

```
 void DeptClicked(object sender, RoutedEventArgs e)
    {
        SelectedDeptID = Convert.ToInt32(((Button)sender).Tag.ToString());

        _stockButtons = new ObservableCollection<Button>();

        if (StockItemCount > 0)
        {
            for (int i = 0; i < StockItemCount; i++)
            {
                //_stockButtons.Add(new Button());
                Button btn = new Button();
                btn.Background = Brushes.Aquamarine;

                btn.Height = 100;
                btn.Width = 100;
                btn.Content = i.ToString();

                _stockButtons.Add(btn);
            }
        }

        RaisePropertyChanged("StockItems");
    }

 public ObservableCollection<Button> Departments
    {
        get
        {
            if (_deptButtons == null)
            {
                _deptButtons = new ObservableCollection<Button>();

                for (int i = 0; i < DeptCount; i++)
                {
                    Button button = new Button();
                    button.Content = DepartmentNames[i];
                    button.Tag = DepartmentIDs[i].ToString();
                    button.Click += new RoutedEventHandler(DeptClicked);

                    button.Width = 128;
                    button.Height = 100;

                    _deptButtons.Add(button);
                }

            }
            return _deptButtons;
        }
    } 
```

![在此处输入图像描述](../Images/24a01e5c2199e7dc62aaad3b1c9a0f83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:05:37.907

尝试这样的事情：

```
Button btn = new Button(); 
btn.Background = Brushes.Green;    
btn.Height = 100; btn.Width = 100;
btn.Content = i.ToString();

ThemeManager.SetThemeName(btn, "None");

_stockButtons.Add(btn); 
```

类 ThemeMagager 位于命名空间 DevExpress.Xpf.Core 中。

# xml - 如果子/子/节点为空，xslt 删除最高级别的父级

> ID：12499156
> 
> 赞同：-2
> 
> 时间：2012-09-19T16:41:56.403
> 
> 标签：xml, xslt

社区;

我在这里尝试了很多帖子来解决这个问题。我一直没有去哪里。任何帮助表示赞赏。

我有以下 XML：

```
 <SD>
   <I>
     <B>
       <A>SomeData</A>
       <Is>
         <Id/>
         <Id/>
         <Id/>
         <Id/>
         <Id/>
         <Id/>
       </Is>
     </B>
     <S>
       <D></D>
     </S>
     <D>
     .....
     </D>
   </I>
 </SD> 
```

如果 I/S/D 为空或空白，我需要删除。所以如果 I/S/D 是空的，我应该只有

```
 <SD>
    </SD> 
```

我已经尝试过，但没有得到想要的结果。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:52:33.067

在您的评论中，您有这个匹配的模板

```
<xsl:template match="I[not(descendant::S/D='')]"/> 
```

但这将匹配**S/D不为空的****I**元素，这与您想要做的相反。你能做的就是这个

 **```
<xsl:template match="I[not(S/D!='')]"/> 
```

这将匹配空的**S/D**元素，以及根本没有这样的元素的情况。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output omit-xml-declaration="yes" indent="yes"/>

   <xsl:template match="node()|@*">
      <xsl:copy>
         <xsl:apply-templates select="node()|@*"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="I[not(S/D!='')]"/>
</xsl:stylesheet> 
```

当你使用它时，会输出以下内容

```
<SD></SD> 
```**

# c# - 创建下载加速器

> ID：12499157
> 
> 赞同：3
> 
> 时间：2012-09-19T15:10:16.443
> 
> 标签：c#, winforms

我指的是[这篇文章](http://www.geekpedia.com/tutorial179_Creating-a-download-manager-in-Csharp.html)来了解使用 C# 进行文件下载。

代码使用传统的方法来读取 Stream like

```
((bytesSize = strResponse.Read(downBuffer, 0, downBuffer.Length)) > 0 
```

如何将要下载的文件分成多个段，以便我可以并行下载单独的段并合并它们？

```
using (WebClient wcDownload = new WebClient())
{
    try
    {
        // Create a request to the file we are downloading
        webRequest = (HttpWebRequest)WebRequest.Create(txtUrl.Text);
        // Set default authentication for retrieving the file
        webRequest.Credentials = CredentialCache.DefaultCredentials;
        // Retrieve the response from the server
        webResponse = (HttpWebResponse)webRequest.GetResponse();
        // Ask the server for the file size and store it
        Int64 fileSize = webResponse.ContentLength;

        // Open the URL for download 
        strResponse = wcDownload.OpenRead(txtUrl.Text);
        // Create a new file stream where we will be saving the data (local drive)
        strLocal = new FileStream(txtPath.Text, FileMode.Create, FileAccess.Write, FileShare.None);

        // It will store the current number of bytes we retrieved from the server
        int bytesSize = 0;
        // A buffer for storing and writing the data retrieved from the server
        byte[] downBuffer = new byte[2048];

        // Loop through the buffer until the buffer is empty
        while ((bytesSize = strResponse.Read(downBuffer, 0, downBuffer.Length)) > 0)
        {
            // Write the data from the buffer to the local hard drive
            strLocal.Write(downBuffer, 0, bytesSize);
            // Invoke the method that updates the form's label and progress bar
            this.Invoke(new UpdateProgessCallback(this.UpdateProgress), new object[] { strLocal.Length, fileSize });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:07:49.393

你需要几个线程来完成它。首先你启动第一个下载线程，创建一个 webclient 并获取文件大小。然后你可以启动几个新线程，其中添加一个下载范围标题。您需要一个逻辑来处理下载的部分，并在完成后创建新的下载部分。

[http://msdn.microsoft.com/de-de/library/system.net.httpwebrequest.addrange.aspx](http://msdn.microsoft.com/de-de/library/system.net.httpwebrequest.addrange.aspx)

我注意到 WebClient 的实现有时会有一个奇怪的行为，所以如果你真的想写一个“大”的下载程序，我仍然建议你实现一个自己的 HTTP 客户端。

ps：感谢用户svick

# regex - 正则表达式：如何在“_”分隔的字符串中动态获取第一个单词而不是最后一个单词之后的单词？

> ID：12499158
> 
> 赞同：1
> 
> 时间：2012-09-19T16:42:03.690
> 
> 标签：regex, preg-match

在 php 中处理迁移类。
如果我有这样的字符串：

```
create_users_roles_table 
```

我想正确地得到第一个词和最后一个词之间的词，如果中间只有一个词，那么能够得到正确的词，例如：

```
create_users_table 
```

我该怎么做？

我已经搞定了：

```
(\B)_([a-zA-Z]+)_?([a-zA-Z]+)_table 
```

**当我执行create_users_roles_table**
并生成**users**和**roles**时，效果很好。
但是当只做**create_users_table**时，它​​会产生**user**和**s**。
显然我需要它来只生产**users**。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:54:09.057

我觉得应该读

```
(\B)_([a-zA-Z]+)_?([a-zA-Z]+)?_table 
```

但是，如果中间有三个单词，这将不起作用。我建议剥离单词然后单独拆分它们，因为我认为正则表达式不能处理可变数量的捕获组。

如果您可以确定可以有多少个单词，您可以随时对其进行硬编码。对于树或更少的单词，您可以使用

```
(\B)_([a-zA-Z]+)(?:_([a-zA-Z]+))?(?:_([a-zA-Z]+))?_table 
```

# android - 我的应用程序没有出现在我的应用程序抽屉中，即使它已安装

> ID：12499159
> 
> 赞同：3
> 
> 时间：2012-09-19T16:42:11.130
> 
> 标签：android, debugging, manifest, drawer

为什么应用程序不会出现在应用程序抽屉中？它在应用程序管理器中说它已安装，但我似乎无法打开实际的应用程序，因为它不在应用程序抽屉中。安装后也不会自动打开它。

这是我选择在手机上运行时所说的内容（在 Jellybean 上）。当我将它安装到模拟器时，它也说了同样的话。

```
 [2012-09-19 16:20:24 - TheForeverAloneQuiz] Performing sync
    [2012-09-19 16:20:24 - TheForeverAloneQuiz] Automatic Target Mode: Several compatible targets. Please select a target device.
    [2012-09-19 16:20:28 - TheForeverAloneQuiz] Uploading TheForeverAloneQuiz.apk onto device '001988a8094d8e'
    [2012-09-19 16:20:28 - TheForeverAloneQuiz] Installing TheForeverAloneQuiz.apk...
    [2012-09-19 16:20:31 - TheForeverAloneQuiz] Success!
    [2012-09-19 16:20:31 - TheForeverAloneQuiz] /TheForeverAloneQuiz/bin/TheForeverAloneQuiz.apk installed on device
    [2012-09-19 16:20:31 - TheForeverAloneQuiz] Done! 
```

这是android清单。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mikenning.foreveralonequiz"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <activity
            android:name=".Introduction"
            android:label="@string/title_activity_introduction" >
            <intent-filter>
                <action android:name="android.intent.action.INTRO" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".QuestionOne"
            android:label="@string/title_activity_introduction" >
            <intent-filter>
                <action android:name="android.intent.action.QUESTIONONE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Result"
            android:label="@string/title_activity_introduction" >
            <intent-filter>
                <action android:name="android.intent.action.RESULTS" />

                <category android:name="android.intent.category.DEFAULT" />         
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有什么我做错了吗？

**旁注** 我还收到错误消息，说我不需要对归类为“默认”的活动的许可。这可能与它有关吗？我在我的一个类中的 startActivity() 中需要它，所以它真的不需要吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:48:46.800

我假设介绍是您的第一个活动。您需要向其添加另一个操作，如以下代码所示：

```
 <activity
        android:name=".Introduction"
        android:label="@string/title_activity_introduction" >
        <intent-filter>
            <action android:name="android.intent.action.INTRO" />
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T10:58:08.157

我知道这是已解决的问题，但此解决方案对我不起作用，我想在这里分享我的解决方案。

我试图为我的应用程序添加深层链接支持，并且在[文档](https://developer.android.com/training/app-links/deep-linking)中

```
<intent-filter android:label="@string/filter_view_http_gizmos">
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="gizmosexample"/>
</intent-filter> 
```

我将这些意图过滤器添加到我的启动器活动中，并且在应用程序抽屉停止在启动器中显示应用程序图标之后。

因此，如果上述[@RaghavSood 的解决方案](https://stackoverflow.com/a/12499265/2296787)不起作用，请尝试从启动器活动的过滤器中删除这些过滤器或任何其他自定义过滤器。

# arrays - 使用 OpenCV 定位数组中的特定点

> ID：12499161
> 
> 赞同：1
> 
> 时间：2012-09-19T16:42:14.573
> 
> 标签：arrays, opencv

我有一个二维数组（cv::MAT），我想找出所有非零值元素的索引。换句话说，[x, y] = find(A ~= 0)?

OpenCV 能否以 cv::Point 格式返回结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:51:07.063

检查文档，一切都在那里！

[http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html)

您将使用基本元素访问`cv::Mat`

```
M.at<double>(i,j) += 1.f; 
```

# python - Pyenchant 搞乱了外国角色

> ID：12499166
> 
> 赞同：1
> 
> 时间：2012-09-19T16:42:25.337
> 
> 标签：python, spell-checking, pyenchant

Pyenchant 弄乱了外来字符，拼写检查失败。我的女朋友是德国人，所以“häßlich”这个词是一个真正的德语单词，我也使用不同的拼写检查服务检查了这个词。

脚本文件编码为 ANSI 为 UTF-8。我也尝试将单词编码和解码为不同类型的字符编码。

* * *

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

# Python bindings for the enchant spellcheck
import enchant

# Enchant dictionary
enchantdict = enchant.Dict("de_DE")

# Define german word for "ugly"
word = "häßlich"

# Print the original word and the spellchecked version of it
print word, "=", enchantdict.check(word) 
```

输出如下：h├ñ├ƒlich = False

* * *

此外，如果我将脚本编码更改为纯 ANSI，这就是我得到的：

> ```
> hõ¯lich =
> ** (python.exe:1096): CRITICAL **: enchant_dict_check: assertion `g_utf8_validate(word, len, NULL)' failed 
> ```

```
Traceback (most recent call last):
  File "C:\Temp\koe.py", line 14, in <module>
    print word, "=", enchantdict.check(word)
  File "C:\Python27\lib\site-packages\enchant\__init__.py", line 577, in check
    self._raise_error()
  File "C:\Python27\lib\site-packages\enchant\__init__.py", line 551, in _raise_
error
    raise eclass(default)
enchant.errors.Error: Unspecified Error 
```

* * *

我正在使用：pyenchant-1.6.5.win32.exe python-2.7.3.msi Windows 7

* * *

...如果您有更好的拼写检查器，请告诉我，我会测试它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:02:11.820

你会因为 Python 中有两种类型的字符串而感到困惑：字节字符串和 Unicode 字符串，你需要在字符串前面加上一个 'u' 才能使它成为 Unicode 字符串：

```
word = u"häßlich" 
```

häßlich也是[hässlich 的旧拼写](http://en.wiktionary.org/wiki/h%C3%A4%C3%9Flich)（后者在字典中，将作为建议返回）。如果您希望它被认为拼写正确，您可以将 häßlich 添加到您的正确拼写单词的个人列表中。

enchantdict.add(word)

# python - 我可以用 python 的 SimpleHTTPServer 设置一个标题吗？

> ID：12499171
> 
> 赞同：58
> 
> 时间：2012-09-19T16:42:39.260
> 
> 标签：python, cross-domain, simplehttpserver

我`SimpleHTTPServer`用来测试我正在处理的一些网页。它工作得很好，但是我需要做一些跨域请求。这需要`Access-Control-Allow-Origin`使用允许页面访问的域设置标题。

是否有一种简单的方法可以使用 SimpleHTTPServer 设置标头并提供原始内容？每个请求的标头都相同。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-13T01:42:37.027

这有点像 hack，因为它会改变`end_headers()`行为，但我认为它比复制和粘贴整个`SimpleHTTPServer.py`文件要好一些。

我的方法`end_headers()`在子类中覆盖，并在其中调用，`send_my_headers()`然后调用超类的`end_headers()`.

它也不是 1 - 2 行，但少于 20 行；主要是样板文件。

```
#!/usr/bin/env python
try:
    from http import server # Python 3
except ImportError:
    import SimpleHTTPServer as server # Python 2

class MyHTTPRequestHandler(server.SimpleHTTPRequestHandler):
    def end_headers(self):
        self.send_my_headers()

        server.SimpleHTTPRequestHandler.end_headers(self)

    def send_my_headers(self):
        self.send_header("Access-Control-Allow-Origin", "*")

if __name__ == '__main__':
    server.test(HandlerClass=MyHTTPRequestHandler) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-19T17:15:00.643

我想说没有简单的方法可以做到，简单的意思是*“只需添加 1-2 行来编写附加标题并保留现有功能”*。因此，最好的解决方案是对类进行子`SimpleHTTPRequestHandler`类化并重新实现功能，并添加新的标头。

`SimpleHTTPRequestHandler`通过查看Python 库中的类的实现，可以观察到为什么没有简单的方法背后的问题：http: [//hg.python.org/cpython/file/19c74cadea95/Lib/http/server。 py#l654](http://hg.python.org/cpython/file/19c74cadea95/Lib/http/server.py#l654)

请注意该`send_head()`方法，尤其是发送响应标头的方法末尾的行。注意方法的调用`end_headers()`。此方法将标头写入输出，以及表示所有标头结束和响应正文开始的空行：http: [//docs.python.org/py3k/library/http.server.html#http .server.BaseHTTPRequestHandler.end_headers](http://docs.python.org/py3k/library/http.server.html#http.server.BaseHTTPRequestHandler.end_headers)

因此，不可能对`SimpleHTTPRequestHandler`处理程序进行子类化，调用超类方法，然后只添加另一个标头——因为当对超类方法`do_GET()`的调用返回时，标头的发送已经完成。`do_GET()`它必须像这样工作，因为该`do_GET()`方法必须发送正文（请求的文件），并发送正文 - 它必须完成发送标头。

所以，再一次，我认为你坚持对类进行子`SimpleHTTPRequestHandler`类化，完全按照库中的代码实现它（只是复制粘贴它？），并在调用`end_headers()`方法之前添加另一个标题`send_head()`：

```
...
self.send_header("Last-Modified", self.date_time_string(fs.st_mtime))
# this below is the new header
self.send_header('Access-Control-Allow-Origin', '*')
self.end_headers()
return f
... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T16:52:24.950

```
# coding: utf-8
import SimpleHTTPServer
import SocketServer
PORT = 9999

def do_GET(self):
    self.send_response(200)
    self.send_header('Access-Control-Allow-Origin', 'http://example.com')           
    self.end_headers()

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler
Handler.do_GET = do_GET
httpd = SocketServer.TCPServer(("", PORT), Handler)
httpd.serve_forever() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-15T06:14:38.373

虽然这是一个较旧的答案，但它是谷歌的第一个结果......

基本上@iMon0 建议..似乎正确？..示例`doPOST`

```
def do_POST(self):
    self.send_response()
    self.send_header('Content-type','application/json')
    self.send_header('Access-Control-Allow-Origin','*')
    self.end_headers()
    sTest = {}
    sTest['dummyitem'] = "Just an example of JSON"
    self.wfile.write(json.dumps(sTest)) 
```

通过这样做，流程感觉正确..

1：你收到一个请求

2：您应用所需的标头和响应类型

3：你发回你想要的数据，无论你想要什么或如何。，

The above example is working fine for me and can be extended further, its just a bare bone JSON post server. So i'll leave this here on SOF incase someone needs it or i myself come back in a few months for it.

**This does produce a valid JSON file** with only the sTest object, Same as a PHP generated page/file.

# c# - RabbitMQ C# 驱动程序停止接收消息

> ID：12499174
> 
> 赞同：35
> 
> 时间：2012-09-19T16:42:49.147
> 
> 标签：c#, rabbitmq

您是否有任何指示如何确定何时发生订阅问题以便我可以重新连接？

我的服务使用 RabbitMQ.Client.MessagePatterns.Subscription 进行订阅。一段时间后，我的客户默默地停止接收消息。我怀疑网络问题，因为我的 VPN 连接不是最可靠的。

我已经通读了一段时间的文档，寻找一个密钥来找出这个订阅何时可能由于网络问题而被破坏，但运气不佳。我试过检查连接和通道是否仍然打开，但它似乎总是报告它仍然打开。

它处理的消息工作得很好，并被确认回队列，所以我认为这不是“ack”的问题。

我确定我一定只是错过了一些简单的东西，但我还没有找到它。

```
public void Run(string brokerUri, Action<byte[]> handler)
{
    log.Debug("Connecting to broker: {0}".Fill(brokerUri));
    ConnectionFactory factory = new ConnectionFactory { Uri = brokerUri };

    using (IConnection connection = factory.CreateConnection())
    {
        using (IModel channel = connection.CreateModel())
        {
            channel.QueueDeclare(queueName, true, false, false, null);

            using (Subscription subscription = new Subscription(channel, queueName, false))
            {
                while (!Cancelled)
                {
                    BasicDeliverEventArgs args;

                    if (!channel.IsOpen)
                    {
                        log.Error("The channel is no longer open, but we are still trying to process messages.");
                        throw new InvalidOperationException("Channel is closed.");
                    }
                    else if (!connection.IsOpen)
                    {
                        log.Error("The connection is no longer open, but we are still trying to process message.");
                        throw new InvalidOperationException("Connection is closed.");
                    }

                    bool gotMessage = subscription.Next(250, out args);

                    if (gotMessage)
                    {
                        log.Debug("Received message");
                        try
                        {
                            handler(args.Body);
                        }
                        catch (Exception e)
                        {
                            log.Debug("Exception caught while processing message. Will be bubbled up.", e);
                            throw;
                        }

                        log.Debug("Acknowledging message completion");
                        subscription.Ack(args);
                    }
                }
            }
        }
    }
} 
```

更新：

我通过在虚拟机中运行服务器来模拟网络故障，当我断开连接足够长的时间时，我*确实*得到了一个异常（RabbitMQ.Client.Exceptions.OperationInterruptedException：AMQP 操作被中断）所以它可能不是网络问题。现在我不知道它会是什么，但运行几个小时后它就失败了。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-04T20:23:51.817

编辑：由于我对此表示赞同，我应该指出.NET RabbitMQ 客户端现在内置了此功能：[https ://www.rabbitmq.com/dotnet-api-guide.html#connection-recovery](https://www.rabbitmq.com/dotnet-api-guide.html#connection-recovery)

理想情况下，您应该能够使用它并避免手动实现重新连接逻辑。

* * *

我最近不得不实施几乎相同的事情。据我所知，大多数关于 RabbitMQ 的可用信息都假设您的网络非常可靠，或者您在与任何发送或接收消息的客户端相同的机器上运行 RabbitMQ 代理，从而允许 Rabbit 处理任何连接问题。

将 Rabbit 客户端设置为对断开连接具有鲁棒性并不难，但是您需要处理一些特殊情况。

您需要做的第一件事是打开心跳：

```
ConnectionFactory factory = new ConnectionFactory() 
{
  Uri = brokerUri,
  RequestedHeartbeat = 30,
}; 
```

将“RequestedHeartbeat”设置为 30 将使客户端每 30 秒检查一次连接是否仍然存在。如果不启用此功能，消息订阅者将愉快地坐在那里等待另一条消息进来，而不会知道它的连接已经坏了。

打开心跳也会使服务器检查连接是否仍然正常，这可能非常重要。如果在订阅者接收到消息之后但在确认之前连接变坏，则服务器只是假设客户端花费了很长时间，并且消息“卡在”死连接上，直到它被关闭。打开心跳后，服务器将识别连接何时出现故障并关闭它，将消息放回队列中以便另一个订阅者可以处理它。如果没有心跳，我不得不手动进入并关闭 Rabbit 管理 UI 中的连接，以便将卡住的消息传递给订阅者。

其次，您将需要处理`OperationInterruptedException`. 正如您所注意到的，这通常是 Rabbit 客户端在发现连接中断时会抛出的异常。如果`IModel.QueueDeclare()`在连接中断时调用，这是您将得到的异常。通过处理您的订阅、频道和连接并创建新的来处理此异常。

最后，您必须处理消费者在尝试使用来自已关闭连接的消息时所做的事情。不幸的是，在 Rabbit 客户端中，从队列中消费消息的每种不同方式似乎都有不同的反应。 如果您调用关闭的连接， 则`QueueingBasicConsumer`抛出。什么都不做，因为它只是在等待消息。从我的尝试中可以看出，您正在使用的类似乎从调用返回 true ，但值为null。再一次，通过处理你的连接、频道和订阅并重新创建它们来处理这个问题。`EndOfStreamException``QueueingBasicConsumer.Queue.Dequeue``EventingBasicConsumer``Subscription``Subscription.Next``args`

当连接失败且心跳打开时，的值`connection.IsOpen`将更新为 False，因此您可以根据需要进行检查。但是，由于心跳在单独的线程上运行，您仍然需要处理连接在检查时打开但在`subscription.Next()`调用之前关闭的情况。

最后要注意的一件事是`IConnection.Dispose()`。`EndOfStreamException`如果您在连接关闭后调用 dispose，此调用将抛出一个。这对我来说似乎是一个错误，我不喜欢不在`IDisposable`对象上调用 dispose，所以我调用它并吞下异常。

将所有这些放在一个快速而肮脏的示例中：

```
public bool Cancelled { get; set; }

IConnection _connection = null;
IModel _channel = null;
Subscription _subscription = null;

public void Run(string brokerUri, string queueName, Action<byte[]> handler)
{
    ConnectionFactory factory = new ConnectionFactory() 
    {
        Uri = brokerUri,
        RequestedHeartbeat = 30,
    };

    while (!Cancelled)
    {               
        try
        {
            if(_subscription == null)
            {
                try
                {
                    _connection = factory.CreateConnection();
                }
                catch(BrokerUnreachableException)
                {
                    //You probably want to log the error and cancel after N tries, 
                    //otherwise start the loop over to try to connect again after a second or so.
                    continue;
                }

                _channel = _connection.CreateModel();
                _channel.QueueDeclare(queueName, true, false, false, null);
                _subscription = new Subscription(_channel, queueName, false);
            }

            BasicDeliverEventArgs args;
            bool gotMessage = _subscription.Next(250, out args);
            if (gotMessage)
            {
                if(args == null)
                {
                    //This means the connection is closed.
                    DisposeAllConnectionObjects();
                    continue;
                }

                handler(args.Body);
                _subscription.Ack(args);
            }
        }
        catch(OperationInterruptedException ex)
        {
            DisposeAllConnectionObjects();
        }
    }
    DisposeAllConnectionObjects();
}

private void DisposeAllConnectionObjects()
{
    if(_subscription != null)
    {
        //IDisposable is implemented explicitly for some reason.
        ((IDisposable)_subscription).Dispose();
        _subscription = null;
    }

    if(_channel != null)
    {
        _channel.Dispose();
        _channel = null;
    }

    if(_connection != null)
    {
        try
        {
            _connection.Dispose();
        }
        catch(EndOfStreamException) 
        {
        }
        _connection = null;
    }
} 
```

# python - 如何在 GAE/Python 中将文本存储在 blobstore 中？

> ID：12499178
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:43:20.317
> 
> 标签：python, google-app-engine

+++ 它正在工作 - 请参阅底部的解决方案 +++

我是 Google App Engine 和 Python 的相对新手。

我在我的程序中处理了一些大文本内容（变量中的内容，而不是外部文件中的内容）。GAE 不允许我写入文件，所以我想将它们存储在 blobstore 中。我可以在 GAE 和 Python 中做到这一点吗？如果是这样，如何？

一个示例代码片段将不胜感激。

谢谢。

+++更新问题+++

我尝试按照您提供的链接中的示例进行操作，该链接由示例修改：http: [//blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1](http://blog.notdot.net/2010/03/Implementing-a-dropbox-service-with-the-Blobstore-API-Part-1)启用在数据存储中保存 blobstore 键。当需要检索文件（这是一个 html 文件）时，我想使用 TemplateName 检索 BlobKey。

我最终得到了这样的结果：

在models.py我有：

```
class GeneratedFiles(ndb.Model):
  TemplateName = ndb.StringProperty()
  BlobKey = blobstore.BlobReferenceProperty()
  Status = ndb.StringProperty(default="Pending Translation") 
```

在一个类中，在一个 .py 文件中，我有：

```
class TokenFileGen(BaseHandler):
    def get(self):
        template = jinja_environment.get_template(FileName)     
        blobtext = template.render(tokenvals = tokendict)
        bloboutput = (blobtext.encode('utf-8'))
        # Create the file
        file_name = files.blobstore.create(mime_type='application/octet-stream')
        # Open the file and write to it
        with files.open(file_name, 'a') as fl:
            fl.write(bloboutput)
        # Finalize the file. Do this before attempting to read it.
        files.finalize(file_name)
        # Get the file's blob key
        blob_key = files.blobstore.get_blob_key(file_name)
        logging.info('QQQ: blob_key: %s' % blob_key)
        f = GeneratedFiles(
            TemplateName = templateName
            , BlobKey = blob_key                       
            , Status = 'Published'
            )
        f.put()
        ... 
```

我得到一个 TypeError('Cannot set non-property %s' % name) TypeError: Cannot set non-property blob

我的日志记录语句返回以下内容：INFO 2012-09-21 05:20:24,177 token.py:551] QQQ: blob_key: vL117vQ4dlIPoUwXbREmbeqUnZU7nJ6ELMma8u1bFHGUfgEfOfS7HfAdFUvXc1EC

我以为我在相当密切地遵循这个例子。知道我怎样才能让它工作吗？

感谢您的任何帮助。

+++ 更新 2 +++

好的，我现在可以将 Blobstore 引用保存在以下模型中：

```
class GeneratedFiles(ndb.Model):
  TemplateName = ndb.StringProperty()
  BlobKey = ndb.BlobKeyProperty() 
```

保存它的代码是：

```
file_name = files.blobstore.create(mime_type='application/octet-stream')
with files.open(file_name, 'a') as fl:
    fl.write(bloboutput)
files.finalize(file_name)
blob_key = files.blobstore.get_blob_key(file_name)
logging.info('QQQ: blob_key: %s' % blob_key)
f = GeneratedFiles(
    TemplateName = templateName
    , BlobKey = blob_key                       
    )
f.put() 
```

我现在正在尝试检索和下载文件：

```
class FileDownloadHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, genfile_id):
        iden = int(genfile_id)
        file_info = ndb.Key('GeneratedFiles', iden).get()
        if not file_info or not file_info.BlobKey:
            self.error(404)
            return
        else:
            blob_key = file_info.BlobKey
        logging.info('QQQ: FileDownloadHandler/blob_key: %s' % blob_key)
        self.send_blob(blob_key, save_as=True) 
```

我收到一个错误：ValueError：blob_key_or_info 的预期 BlobInfo 值。在最后一行。

就在错误消息之前，我得到了我的日志信息：

```
INFO     2012-09-21 19:19:44,219 genfile.py:131] QQQ: FileDownloadHandler/blob_key: sGxZRNu94u1kZ9ezpAeQFhyOLSZFYNX8RSAbXU78MLjjUKOohV0wyWnZZEQf6ScC 
```

我发现了一些提到 URLencoding 和这个错误的参考资料。这可能是问题吗？如果是这样，在我的情况下 URLencoding 会是什么样子，我应该把它放在哪里（当我存储 blob_key 或从 ndb.datastore 检索 id 之后？

感谢您的任何帮助。

+++ 解决方案 +++

关键是更改 self.send_blob 语句如下（引用 blobstore 和 BlobInfo）。

```
self.send_blob(blobstore.BlobInfo(file_info.blob), save_as=True) 
```

我还将属性 BlobKey 的名称更改为 blob（在我这样做后出现错误并且错误消失了，尽管我不明白为什么会有所作为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:57:39.913

查看写入 blobstore：[https ://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)

您也可以为评论投票。

# tsql - 从大型数据库表中插入和删除行的效率帮助 ~100M 行

> ID：12499179
> 
> 赞同：0
> 
> 时间：2012-09-19T16:43:22.493
> 
> 标签：tsql, sybase

我将大型数据库表中的行插入存档表，然后删除插入的行。我的代码如下：

```
-- insert here
insert into DEST_DB.dbo.ARCHIVE_TABLE
select SRC_DB.dbo.ORIG_TABLE.*
from SRC_DB.dbo.ORIG_TABLE
where SRC_DB.dbo.ORIG_TABLE.ORDER_ID
IN ( select #tmp_table.order_id from #tmp_table )

-- delete here
delete from SRC_DB.dbo.ORIG_TABLE
where SRC_DB.dbo.ORIG_TABLE.ORDER_ID
IN ( select #tmp_table.order_id from #tmp_table ) 
```

表的大小`#tmp_table.order_id`当前设置为 10K 行，临时表将在循环中被填充和清除，这意味着它将用于我在每次循环迭代中的插入和删除操作。

`UNIQUE UNCLUSTERED`我的 SRC_DB.dbo.ORIG_TABLE 的 ORDER_ID 列上有索引

我的问题是当我尝试我的存储过程时，它似乎在处理这个表时停止了。

我知道我可能没有最有效的解决方案，并希望听到有关如何改进我的存储过程的批评和建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:33:37.233

我会在 #tmp_table 上尝试 PK 并减少倒计时

```
insert into DEST_DB.dbo.ARCHIVE_TABLE
select SRC_DB.dbo.ORIG_TABLE.*
from SRC_DB.dbo.ORIG_TABLE
join #tmp_table on #tmp_table.order_id = SRC_DB.dbo.ORIG_TABLE.order_id 
order by clustered index on DEST_DB.dbo.ARCHIVE_TABLE

delete SRC_DB.dbo.ORIG_TABLE 
join #tmp_table on #tmp_table.order_id = SRC_DB.dbo.ORIG_TABLE.order_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:00:55.153

存储过程正在执行你提供的代码？

这是否“它似乎只是停止处理这张表”你从未见过这个 SP 完成 - 这么慢？

尝试更小的 #tmp_table.order_id - 100 或 1000 行。

尝试像这样更改 WHERE 子句：

```
-- insert here
insert into DEST_DB.dbo.ARCHIVE_TABLE
select SRC_DB.dbo.ORIG_TABLE.*
from SRC_DB.dbo.ORIG_TABLE
where exists
( select #tmp_table.order_id from #tmp_table where #tmp_table.order_id=SRC_DB.dbo.ORIG_TABLE.ORDER_ID)

-- delete here
delete from SRC_DB.dbo.ORIG_TABLE
where exists 
( select #tmp_table.order_id from #tmp_table where SRC_DB.dbo.ORIG_TABLE.ORDER_ID=#tmp_table.order_id) 
```

# python - 对 0xfff 进行按位与-ing - 毫无意义？

> ID：12499180
> 
> 赞同：2
> 
> 时间：2012-09-19T16:43:35.510
> 
> 标签：python, bit-manipulation

鉴于此代码，您是否期望 a 和 b 的值有任何差异：

```
s = "\x4f\x00\x00\x50\xae\x08\x00\x00"
a = map(lambda x:x & 0xffff, struct.unpack('HHHH', s))
b = map(lambda x:x, struct.unpack('HHHH', s)) 
```

在这两种情况下，它们最终都是这个列表：

```
[79, 20480, 2222, 0] 
```

其中每个元素都是一个 int。

我问的原因是我正在查看[pyip](http://pypi.python.org/pypi/pyip/)中 tcp.py 的源代码，其中基本上包括这段代码，而“& 0xffff”似乎毫无意义——我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:48:32.507

“& 0xffff”唯一不同的是当有大于 16 位时。即，执行逻辑与产生一个值，其中比低16位更有效的位都设置为零。

# memory-management - Redis 中的数据建模

> ID：12499189
> 
> 赞同：0
> 
> 时间：2012-09-19T16:44:15.847
> 
> 标签：memory-management, redis

我正在构建一个在 Redis 中实时跟踪许多计数器的系统。每个计数器基本上是特定网址上显示的广告关键字的展示次数和转化详细信息。

IE。如果在特定网址上显示 10 个关键字，我需要更新每个关键字的展示次数和转化次数。并且在每次展示 url 时，可能会显示一组不同的 10 个关键字。

IE。我需要的基本数据模型类似于

*   > 网址=>

    > ```
    >  k1 =>
    >         impression => 2
    >         conversion => 1
    >  k2 =><br>
    >         impression => 100
    >         conversion => 8
    >  .
    >  .
    >  k100 (max around 100)</li> 
    > ```

我了解 Redis 没有嵌套哈希，因此我无法存储 2 级哈希，如上所示。

解决此问题的最佳方法是什么？

我想过将 k1-impression 和 k1 转换结合起来，让它成为一个单一的领域

即喜欢

*   网址 =>

    > ```
    >  k1-impression => 100
    >    k1-conversion => 3
    >    .<br>
    >    . so on</li> 
    > ```

但问题是“k1”、“k2”等的长度很重要（120-150 字节），如果可能的话，我不想复制这些数据以节省内存。

我将如何解决这个问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:11:25.727

如果您的关键字足够长以至于您担心它，您应该将它们标准化。制作 的散列`keyword -> id`和 的散列`id -> keyword`，用于对它们进行编码和解码。然后，您可以拥有表单的每个 url 散列`url => {kw_id:impressions => 1123, kw_id:conversions => 28}`。当您开始需要为关键字创建索引时，这也将为您提供很好的服务，例如，一旦您要求在所有 url 中显示前 10 个表现最佳的关键字，您就会立即这样做。

# qt - Qt Creator + msvc 编译器的探查器

> ID：12499190
> 
> 赞同：7
> 
> 时间：2012-09-19T16:44:21.143
> 
> 标签：qt, visual-c++, profiler

如何使用带有 msvc 编译器的 Qt 创建器来分析 Qt 程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-08T19:48:38.657

据我所知， QtCreator for Windows 中没有与**valgrind等效的集成功能。**

另一方面，您可以使用像[**very sleepy**](http://www.codersnotes.com/sleepy)这样的独立应用程序，它支持任何本机Windows 应用程序。它只是附加到正在运行的进程，并让您通过进程的功能分析捕获的数据。它对我发现需要使用 MSVC 编译的 QtCreator 应用程序中的性能瓶颈非常有用。

# git - Git - 如何查找目录中所有项目的所有“未推送”提交？

> ID：12499195
> 
> 赞同：10
> 
> 时间：2012-09-19T16:44:32.900
> 
> 标签：git, bash

我终于习惯了 Git，在经历了最初陡峭的学习曲线之后，我必须说它非常好（我只是想念单个文件的外部文件，但那是另一回事了）。然而，我有一个无法解决的问题：我目前正在同时处理十几个项目。它们都是相互关联的，我必须从一个跳到另一个，在这里和那里进行更改。

到目前为止一切都很好，我可以很容易地“处理”它们，我会定期提交更改等等。问题是，几个小时后，我不记得我将哪些项目推送到远程存储库。当然，我可以“cd”到每个项目的目录并发出 push 命令，但这很乏味。我想知道是否有办法使用 bash 来运行类似*`git find all unpushed commits in all projects in this directory`*. 这样的命令将从**不是**Git 存储库但包含所有项目的树的目录中运行。

逻辑很简单，但实现看起来相当复杂，另外一个原因是，虽然根目录包含所有项目，但实际的 Git 存储库可以在起始目录的任何级别找到。例如：

*   项目目录
    *   客户 X
    *   **项目 1**（Git 存储库）
    *   客户 U
    *   **项目 2**（Git 存储库）
    *   项目3
        *   **某个库**（Git 存储库）
        *   **主题**（Git 仓库）

在此示例中，只有粗体目录是 Git 存储库，因此应在其中运行检查。我知道结构看起来有点乱，但实际上很容易处理。

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T17:02:45.990

您可以使用 找到未推送的提交`git cherry`，因此您应该能够编写一个 bash 脚本，例如

```
#!/bin/bash
for file in `find ./ -type d -maxdepth 3` ; do
    cd $file
    git cherry -v
    cd -
done 
```

它将找到 3 层子目录，但看起来可能不是很好。

## 编辑

正如 Evan 建议的那样，您可以使用子shell 来避免`cd`返回目录，就像这样

```
#!/bin/bash
for file in `find ./ -type d -maxdepth 3` ; do
    (cd $file && git cherry -v)
done 
```

您可能想`pwd`在此处放置一个命令以查看您所在的文件/目录...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-29T08:20:33.347

你可以看看 git 子模块，但我个人觉得使用它们并不愉快。前段时间我创建了一个脚本来处理 git repos 的集合：[https ://github.com/mnagel/clustergit](https://github.com/mnagel/clustergit)

`clustergit`允许您一次在多个存储库上运行 git 命令。在一个文件夹上递归运行 git status 尤其有用。`clustergit`支持`git status`, `git pull`,`git push`等。

[![在此处输入图像描述](../Images/de3abf9022ec1e119efd4de89b18db67.png)](https://i.stack.imgur.com/SAq3B.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-19T17:21:42.437

将顶层设为 git repo 并将每个项目设为子模块。现在你可以运行

```
git submodule foreach --recursive git status # or any other command 
```

如果您的项目中没有任何子模块，则不需要递归。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-28T13:03:26.013

您可以使用以下单行代码，您可以根据您的要求使用它从不是 Git 存储库的目录中进行搜索。这将列出具有未推送提交的 git 存储库的绝对路径：

```
find . -type d -iname '.git' -exec sh -c 'cd "${0}/../" && git status | grep -q "is ahead of" && pwd' "{}" \; 
```

这通过递归搜索 .git 目录来工作，当找到时 cd 到父目录，即 git 项目根目录。然后运行 ​​git status 和 grep 以获得“领先于”短语。如果这是真的，则执行 && 之后的命令，在这种情况下是“pwd”命令。在这里您可以插入自己的命令（例如显示未推送的提交）。

注意：仅适用于活动分支上的未推送提交

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-14T20:23:08.607

以下命令也支持带空格的路径，并且只会检查包含子目录的目录`.git`。

**每个 repo 的未推送更改数（对于所有分支）：**

```
while IFS= read -r -d '' dir; 
    do 
        ([ -d "$dir/.git" ] && cd "$dir" && echo -n `pwd`\
        && echo " [ UNPUSHED: "`git log --branches --not --remotes | grep "^commit" | wc -l`" ]" ); 
    done < <(find -type d -print0) 
```

**每个 repo 的未提交文件数（暂存和未暂存）：**

```
while IFS= read -r -d '' dir; 
    do 
        ([ -d "$dir/.git" ] && cd "$dir" && echo -n `pwd`\
         && echo " [ UNCOMMITTED: "`git status -s | wc -l`" ]"); 
    done < <(find -type d -print0) 
```

如果没有设置上游 (-u)，则注释`git cherry`不起作用，而`git log`上面的设置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-08T07:55:18.133

对于那些使用`fish`. 基于 JKirchartz 的回答并进行了一些调整：

```
for file in (find . -type d -maxdepth 3)
  if test -d "$file/.git"
    fish -c "cd $file; and git cherry -v; and pwd"
  end
end 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-18T15:35:44.980

将此别名添加到您的`.gitconfig`文件中，然后您可以`git status-all`从父目录运行以递归方式获取所有 git 存储库的状态。

```
[alias]
status-all = "!for d in `find . -name \".git\"`; do echo \"\n*** Repository: $d ***\" && git --git-dir=$d --work-tree=$d/.. status; done" 
```

另见[这篇文章](https://stackoverflow.com/a/33784030/1866596)。

# ios - 我可以在 iCloud 上共享 CoreData 吗？

> ID：12499196
> 
> 赞同：0
> 
> 时间：2012-09-19T16:44:41.387
> 
> 标签：ios, core-data, icloud

我正在编写一个 iPhone 应用程序，该应用程序需要保留特定许可应用程序的用户可以访问的离线数据存储。

我需要一个“云”帐户，多个具有不同帐户的用户可以共享数据。这可能吗？

我用谷歌搜索并搜索了 SO，但找不到关于这个特定主题的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T15:33:06.677

iCloud 帐户与单个用户绑定。

如果您询问是否可以设置一个可以在多个用户之间共享的 iCloud 帐户；没有这样的事情。

如果您不想自己负责同步和出售数据，请查看 Dropbox - 用户可以在其中设置共享 Dropbox 文件夹来执行与您所要求的类似的事情。

但是，如果不同的用户修改相同的值，仅将 CD 存储放在 Dropbox 文件夹中不足以处理合并冲突。在这种情况下，一种解决方案是拥有一个 Web 服务，该服务可以发送更新、解决合并，并将数据推送回设备以存储在它们自己的核心数据存储中。

不仅仅是将商店放在云中，还涉及更多内容 - 但这很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:51:25.627

你需要从 icloud 开始

网上最好的教程之一是：

[http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)

[http://www.raywenderlich.com/6031/beginning-icloud-in-ios-5-tutorial-part-2](http://www.raywenderlich.com/6031/beginning-icloud-in-ios-5-tutorial-part-2)

示例 icloud 项目 [http://cdn3.raywenderlich.com/downloads/dox.zip](http://cdn3.raywenderlich.com/downloads/dox.zip)

祝你好运

# css - 需要帮助对齐 CSS 中的 12 个项目

> ID：12499198
> 
> 赞同：0
> 
> 时间：2012-09-19T16:44:59.017
> 
> 标签：css, format

编辑：这是一个[JFiddle](http://jsfiddle.net/PhW5C/2/)，它基于人们的帮助目前看起来像什么，但仍然需要一些工作。

我有 12 个 div 和一个容器 div。容器 div 中的 12 个 div 组成 6 个文本和 6 个对应的输入字段。

我希望它看起来像这样......

```
[Text1    Input Item1       Text2   Input Item2       Text3   Input Item3]
[Text4    Input Item4       Text5   Input Item5       Text6   Input Item6] 
```

用 CSS 格式化它的最佳方法是什么？我试了一下，它到处都是，盒子没有对齐，放在错误的行上。有人可以帮忙吗？

```
<div class="container">
     <div class="text1"></div>
     <div class="InputItem1"></div>

     <div class="text2"></div>
     <div class="InputItem2"></div>

     <div class="text3"></div>
     <div class="InputItem3"></div>

     <div class="text4"></div>
     <div class="InputItem4"></div>

     <div class="text5"></div>
     <div class="InputItem5"></div>

     <div class="text6"></div>
     <div class="InputItem6"></div>
</div> 
```

CSS 代码：

```
.container{width:100%;}

.text1{width:15%;float:left}
.InputItem1{width:15%;float:left}       

.text2{width:15%;float:center}
.InputItem2{width:15%;float:center}       

.text3{width:15%;float:right}
.InputItem3{width:15%;float:right}       

.text4{width:15%;float:left}
.InputItem4{width:15%;float:left}       

.text5{width:15%;float:center}
.InputItem5{width:15%;float:center}       

.text6{width:15%;float:right}
.InputItem6{width:15%;float:right} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:50:02.070

这是一个开始：**[jsFiddle 示例](http://jsfiddle.net/j08691/PhW5C/)**

**HTML**

```
<div class="container" name="container">
     <div class="textitem" name="text1">t</div>
     <div class="inputitem" name="InputItem1">i</div>

     <div class="textitem" name="text2">t</div>
     <div class="inputitem"  name="InputItem2">i</div>

     <div class="textitem" name="text3">t</div>
     <div class="inputitem"  name="InputItem3">i</div>

     <div class="textitem clear" name="text4">t</div>
     <div class="inputitem"  name="InputItem4">i</div>

     <div class="textitem" name="text5">t</div>
     <div class="inputitem"  name="InputItem5">i</div>

     <div class="textitem" name="text6">t</div>
     <div class="inputitem"  name="InputItem6">i</div>
</div>​ 
```

**CSS**

```
.container{width:100%;overflow:auto;}
div {
    border:1px solid #999;
}

.inputitem,.textitem {
    float:left;  
    width:15%;    
} 
```

请注意，我添加边框只是为了使 div 更加可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:52:13.240

@GionaF 是正确的，但您还需要设置*类*而不是 css 的*名称*才能工作。

```
<div class="container">
     <div class="text1"></div>
     <div class="InputItem1"></div>

     <div class="text2"></div>
     <div class="InputItem2"></div>

     <div class="text3"></div>
     <div class="InputItem3"></div>

     <div class="text4"></div>
     <div class="InputItem4"></div>

     <div class="text5"></div>
     <div class="InputItem5"></div>

     <div class="text6"></div>
     <div class="InputItem6"></div>
</div> 
```

# c# - 气球弹出 WPF

> ID：12499200
> 
> 赞同：5
> 
> 时间：2012-09-19T16:45:02.927
> 
> 标签：c#, wpf, popup, tooltip, popup-balloons

我需要显示一个气球弹出窗口。WPF 中是否有此类工作的控件？类似于以下内容：

```
<BalloonPopup>
   <StackPanel>
      <Button/>
      . . .
   </StackPanel>
</BalloonPopup> 
```

这是可能的结果：

![在此处输入图像描述](../Images/04dd3828fc125d9834789262572ff373.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:47:31.283

你想做一个[tooltip](http://wpf.2000things.com/?s=tooltip)。wpf.200things 上有一篇很棒的文章。

从这篇[文章](http://wpf.2000things.com/2011/08/30/375-binding-something-in-a-tooltip-to-a-property-on-the-parent-control/)。你基本上会像下面这样设置工具提示的样式

```
<TextBox Text="Now is the winter of our discontent etc"
    Width="100" Margin="10">
    <TextBox.ToolTip>
        <ToolTip DataContext="{Binding Path=PlacementTarget, RelativeSource={x:Static RelativeSource.Self}}">
            <StackPanel>
                <Label FontWeight="Bold" Content="Full Text"/>
                <Label Content="{Binding Text}"/>
                <Label Content="--Gloster, in Richard III (Act I, Scene I)"/>
            </StackPanel>
        </ToolTip>
    </TextBox.ToolTip> </TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:48:09.690

不知道你是否看到了这个，但在这里你可以找到一些很好的例子，在同样的情况下对我有帮助。

[如何在 WPF 应用程序中实现气球消息](https://stackoverflow.com/questions/2310102/how-to-implement-balloon-message-in-a-wpf-application)

# java - JSTL - 如何解析输入日期

> ID：12499203
> 
> 赞同：0
> 
> 时间：2012-09-19T16:45:17.147
> 
> 标签：java, jsp, spring-mvc, jstl

我的jsp中有一个日期输入字段，如下所示：

`<form:input name="inputDate" id="inputDate" value="" path="date"/>`

此表单映射到`@ModelAttribute` `account`日期定义如下：

`private java.util.Date date ;`

当我提交表单时，我收到一个错误（当然），上面写着：

> 无法将 java.lang.String 类型的属性值转换为所需的 java.util.Date 类型 ...

请提出一种我可以`date`在 JSP 本身中解析的方法，以便`@ModelAttribute`可以直接`date`使用值设置字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:59:52.987

Just [register binder in your `@Controller`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-initbinder) like in this example:

```
@Controller
public class MyFormController {

  @InitBinder
  public void initBinder(WebDataBinder binder) {
    SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
    dateFormat.setLenient(false);
    binder.registerCustomEditor(Date.class,
        new CustomDateEditor(dateFormat, false));
  }

  // ...
} 
```

# mysql - 非识别或识别

> ID：12499205
> 
> 赞同：1
> 
> 时间：2012-09-19T16:45:23.867
> 
> 标签：mysql

无法理解识别关系的主要思想，请你帮我举个例子..

示例：供应商可能有多个接待处，而接待处可以有一个供应商

没有供应商就不能有接待，这是否意味着它必须是一个识别？或者它可以是非识别性的，因为供应商只使用一次并且不会重复。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:57:53.243

供应商和接收（“供应”）之间是一对多的关系。由于一个供应商可以提供给多个接待处，但一个接待处只能由一个供应商提供。

是的！它必须是识别关系。您应该在供应商关系中包含所有相关的接待 ID。

# frameworks - 通过 CMS 管理子站点

> ID：12499212
> 
> 赞同：1
> 
> 时间：2012-09-19T16:45:50.200
> 
> 标签：frameworks, content-management-system

我正在开发一个项目（我继承了一个），该项目有一个主要网站，目的是收集潜在客户的联系信息，以及一组用于相同目的的子网站。这些站点中的每一个都有不同的设计，并且每个站点都从文档根目录下的单独目录提供服务。这些子站点中的每一个也由与主站点相同的 URL 提供服务，在 URL 中为这些子站点中的每一个指定不同的目录，例如“http://www.example.com/subsite/”。

现在的问题是我们的网页设计师必须在需要更改时手动更改这些子站点的每个文件中的 HTML。理想情况下，他们希望能够管理这些站点并以更快速的方式对其进行更改，而无需对 60 多个站点进行手动更改，每个站点可能包含 10-15 页的 HTML。

我一直在研究各种解决方案，但我不确定哪种方法最适合管理这样的事情。这些网站都是用 PHP 构建的，我一直在研究 CMS 解决方案，例如 Drupal、SilverStripe 和 MODX，但我不确定它们是否能满足我们的需求。我没有很多使用 CMS 的经验，所以我希望有更多经验的人可以提供一些见解。任何人都可以就如何最好地处理此类事情提出任何建议，我们将不胜感激。

如果我遗漏了任何可能对提供建议的人有用/必要的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:17:05.190

任何 CMS 都能满足您的需求。

如果我理解得很好，每个子站点都共享同一个域，但只驻留在一个子目录中。

例如，使用**MODX**，您可以为每个子站点定义具有特定设计的不同模板。然而，所有子站点都可以共享一些块（html 代码）或片段（php 代码），因此共享内容的更改适用于所有子站点。

您可以轻松地将现有设计迁移到 MODX：

[http://codingpad.maryspad.com/2009/03/28/building-a-website-with-modx-for-newbies-part-1-introduction/](http://codingpad.maryspad.com/2009/03/28/building-a-website-with-modx-for-newbies-part-1-introduction/)

并找到您需要的其他部分：

[http://modx.com/extras/](http://modx.com/extras/)

# joomla2.5 - FaLang 别名转换在 Joomla 2.5 中不起作用

> ID：12499215
> 
> 赞同：1
> 
> 时间：2012-09-19T16:46:06.647
> 
> 标签：joomla2.5, multilingual, joomla-component

我已经安装了 FaLang 组件以使用多语言支持，除了别名结构外，一切正常。当我们切换语言时，URL 不会根据添加到管理部分的别名转换而改变。我尝试了几乎所有启用这两个插件的活动，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T00:20:18.063

我相信Shaz是对的，法朗目前还没有解决办法。

我在 2012 年 2 月向开发人员询问了这个问题，他提到他仍在努力，但目前，FaLang v 1.1.7 仍然没有发生。

刚开始法浪出现的时候我还挺激动的，现在就不太确定了。我在很多多语言网站上工作，我不想像我使用 JoomFish 开发的许多 Joomla 1.5 网站那样被多语言 Joomla 2.5 网站所困。

我认识许多受人尊敬的开发人员，例如 FaLang，但 FWIW 我现在更喜欢 Joomla 2.5 中内置的本地语言功能。这并不完美，但现在他们相信它会有所改善。

不幸的是，这并不能解决您的问题，但如果您需要介绍它的工作原理，这里有一个很好的链接：

```
[http://bit.ly/LpPoV2][1]  
and another one  
http://www.youtube.com/watch?v=gnhVVtyejPg 
```

最初我发现这个过程有点麻烦，但是一旦我习惯了它，它就会工作得很好......是的，别名就像你所期望的那样工作。

祝你好运！

# c - 使用 fgets() 和 strtok() 在 C 中逐行读取文件？

> ID：12499219
> 
> 赞同：3
> 
> 时间：2012-09-19T16:46:12.170
> 
> 标签：c, fgets, strtok

我正在尝试使用 fgets 和 strtok() 逐行读取文件，并创建每个不同信息行的链接列表。

现在，我只是将信息放入一个数组中，只是想弄清楚如何正确读取信息，但它不能正常工作。

在 while(fgets) 部分，它似乎正确地将所有内容加载到数组中，并将其打印出来。然而，在该循环执行之后，我尝试打印出整个数组，我得到了非常奇怪的结果..这主要是最后一行的一部分，而不是完整的单词或任何东西。

例如，如果我正在阅读：

```
Simpson, Homer, Male, 1976
Simpson, Marge, Female, 1978
Simpson, Bart, Male, 2002 
Simpson, Lisa, Female, 2004 
Simpson, Maggie, Female, 2011 
```

我最后得到的打印输出是这样的：

```
le
Simpson
 Maggie

Simpson
 Maggie
e
ale
Simpson
 Maggie
e
e
Simpson
 Maggie
 Female
 2011 
```

请告诉我哪里出错了，谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAXSTRINGSIZE 10
#define LINESIZE 128

struct person{
    char firstName[MAXSTRINGSIZE];
    char lastName[MAXSTRINGSIZE];
    char gender[MAXSTRINGSIZE];
    int birthYear;
    struct person *next;
} *first, *current;

int main (void){
    static const char filename[] = "Assignment1file.txt";
    FILE *myfile = fopen ( "Assignment1file.txt", "r" );

    int i=0;
    int j=0;
    int k=0;
    int l=0;
    char *result[10][4];
    char line[LINESIZE];
    char *value;

    for(i=0; i<9; i++){
        for(j=0;j<4;j++){
            result[i][j] = NULL;
        }
    }
    i=0;

    // loop through each entry in Assignment1file
    while(fgets(line, sizeof(line), myfile)){

        //load last name
        value = strtok(line, ",");
        result[i][0] = value;
        printf("%i 0 %s", i, value);

        //load first time
        value = strtok(NULL, ",");
        result[i][1] = value;
        printf("%i 1 %s", i, value);

        // load gender
        value = strtok(NULL, ",");
        result[i][2] = value;
        printf("%i 2 %s", i, value);

        // load birth year
        value = strtok(NULL, "\n");
        result[i][3] = value;
        printf("%i 3 %s", i, value);
        printf("\n");

        for(j=0;j<4;j++){
            printf("%s\n", result[i][j]);
        }

        //go to next line
        i++;
    }   

    // read out the array
    for(k=0; k<5; k++){
        for(j=0;j<4;j++){
            printf("%s\n", result[k][j]);
        }
    }

    fclose(myfile);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T16:58:36.900

这段代码有几个问题。我已经快速修改了您的代码以执行预期的操作。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAXSTRINGSIZE 10
#define LINESIZE 128

struct person{
    char firstName[MAXSTRINGSIZE];
    char lastName[MAXSTRINGSIZE];
    char gender[MAXSTRINGSIZE];
    int birthYear;
    struct person *next;
} *first, *current;

int main (void){
    FILE *myfile = fopen ( "Assignment1file.txt", "r" );
    int i=0;
    int j=0;
    int k=0;
    int l=0;
    char *result[10][4];
    char line[LINESIZE];
    char *value;

    for(i=0; i<=9; i++){
        for(j=0;j<=4;j++){
            result[i][j] = NULL;
        }
    }
    i=0;

    // loop through each entry in Assignment1file
    while(fgets(line, sizeof(line), myfile)){
        //load last name
        value = strtok(line, ", ");
        result[i][0] = strdup(value);
    printf("last: %s\n", value);

        //load first time
        value = strtok(NULL, ", ");
        result[i][1] = strdup(value);
    printf("first: %s\n", value);

        // load gender
        value = strtok(NULL, ", ");
        result[i][2] = strdup(value);
    printf("gender: %s\n", value);

        // load birth year
        value = strtok(NULL, " \n");
        result[i][3] = strdup(value);
    printf("birth year: %s\n", value);

        //go to next line
        i++;
    }   

    // read out the array
    for(k=0; k<5; k++){
        for(j=0;j<4;j++){
            printf("%s\n", result[k][j]);
        }
    }

    fclose(myfile);
    return 0;
} 
```

人们已经评论了这一变化的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:55:05.797

`strtok`将修改原始字符串。因此，您存储的先前指针在每次迭代后不再存在。

简单的解决方案是使用：[strdup](http://linux.die.net/man/3/strdup)来分配和复制值。

只需修改您对`value`任何地方的分配：

```
result[i][0] = value; 
```

到：

```
result[i][2] = strdup(value); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T16:56:17.213

`strtok()`返回内部指针，`line[]`因此当您读取下一行时，您保存的所有指针现在都指向存储文件最后一行的位置。

您可以像这样为字符串的每一位分配内存：

```
//load last name
value = strtok(line, ",");
result[i][0] = malloc(strlen(value) + 1);
strcpy(result[i][0], value); 
```

顺便说一句，您不需要在开始时将循环设置为`NULL`，您可以这样做：

```
char *result[10][4] = {0}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T16:51:54.580

如果需要，您需要将令牌复制到单独的存储中。

`strtok()`将修改您读取行的缓冲区，并将分隔符替换为 NUL 字符，并返回指向缓冲区中某个位置的指针（即当前标记的开头）。

当您读取下一行时，缓冲区将被新数据填充，因此，您保存的所有指针都是无用的，因为以前的数据现在已经消失了。

[从文档](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)中引用：

> 为了确定标记的开头和结尾，该函数首先从起始位置扫描**不**包含在*分隔符*中的第一个字符（它成为*标记的开头*）。然后从*标记的开头开始扫描**分隔符*中包含的第一个字符，该字符成为*标记的结尾*。
> 
> 该*标记*的结尾由函数自动替换为空字符，并且*该标记的开头*由函数返回。

并且（强调我的）：

> str
> 要截断的 C 字符串。**该字符串的内容被修改并分解为更小的字符串（令牌）。**
> 或者，可以指定空指针，在这种情况下，函数将继续扫描先前成功调用函数的位置。
> 
> delimiters：
> 包含分隔符的 C 字符串。
> 这些可能因一个呼叫而异。

# javascript - 将对象添加到已经存在的 javascript 对象

> ID：12499224
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:46:32.857
> 
> 标签：javascript, ajax, json, javascript-objects

我有一个 javascript 对象，其中包含如下地址

```
var addressList = [
    {"AddressID":"10011","AddressType":"Delivery","AddressLine1":"4 Caerleon Drive","AddressLine2":"Bittern","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 5LF","Country":"United Kingdom","ContactID":"10011"},
    {"AddressID":"10012","AddressType":"Home","AddressLine1":"526 Butts Road","AddressLine2":"Sholing","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"}
] 
```

我想向它添加另一个“地址”，所以我有如下内容

```
[
{"AddressID":"10011","AddressType":"Delivery","AddressLine1":"4 Caerleon Drive","AddressLine2":"Bittern","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 5LF","Country":"United Kingdom","ContactID":"10011"},
{"AddressID":"10012","AddressType":"Home","AddressLine1":"526 Butts Road","AddressLine2":"Sholing","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"},
{"AddressID":"10013","AddressType":"Home","AddressLine1":"5436 Bfds Road","AddressLine2":"Sherly","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"}
] 
```

我不知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:48:38.420

用于[`Array#push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)向数组添加新对象：

```
addressList.push({"AddressID":"10013","AddressType":"Home","AddressLine1":"5436 Bfds Road","AddressLine2":"Sherly","AddressLine3":"","CityTown":"Southampton","County":"Hampshire","PostCode":"SO19 1DJ","Country":"England","ContactID":"10011"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:55:58.610

我不清楚您遇到了什么，但您遇到的可能问题是您提供的第一个片段是一个 javascript 对象，第二个片段是一个数组。你需要这样的东西：

```
var addressList = [];
addressList.push({"AddressID":"10011",...}); 
```

然后，您可以使用 forEach 遍历列表：

```
addressList.forEach(function(address) {
    alert(address.AddressID);
    doSomethingWithAddress(address);
}); 
```

[您可以在MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)上阅读有关数组的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:48:36.047

addressList.push({AddressID: 1234, Country: 'Foo', ...});

# php - 自定义加密/解密函数中的随机结果

> ID：12499225
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:46:44.020
> 
> 标签：php, encryption

我试图通过我创建的自定义函数加密数据......（基于base64）代码有效，但在一定程度上......它给出了随机结果（有时有效，有时无效）。

```
<?php
set_time_limit(0);
class encryptor{
 function encrypt($data){
  $all = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?@,.&*()$; ";
  $chars = str_split($all, 1); // Split $all to array of single characters
  $text_chars = str_split($data, 1); // Split $data to array of single characters

  // Create array of unique results based on the characters from $all
  foreach($chars as $char){
   $array[$char] = md5(uniqid(rand(), true));
  }
  // Replace the input text with the results from $array 
  foreach($text_chars as $text_char){
   $data = str_replace($text_char,$array[$text_char], $data);
  }
  // Encode and compress $array as $solution
  $solution = gzcompress(base64_encode(json_encode($array)),9);
  // Return the encoded solution + Breaker + encoded and compressed input text
  return $solution."BREAKHERE".gzcompress(base64_encode($data),9);
 }
 function decrypt($data){
  // Break the encrypted code to two parts
  $exploded = explode('BREAKHERE', $data);
  // Decoding the contents
  $contents = base64_decode(gzuncompress($exploded[1]));
  // Decoding solution ($array)
  $solves = json_decode(base64_decode(gzuncompress($exploded[0])),true);
  $fliped = array_flip($solves);
  // Replace the encrypted data with the solution
  foreach($solves as $solve){
   $contents = str_replace($solve,$fliped[$solve], $contents);
  }
  return($contents); // Return decoded data
  }
 }

$text = "11 1";
$enc = new encryptor();
$encrypted = $enc->encrypt($text);
$decrypted = $enc->decrypt($encrypted);
echo $decrypted;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:22:33.197

由于它只是为了好玩，因此此更改似乎使它起作用：

```
// Replace the input text with the results from $array
$encrypted = '';
foreach($text_chars as $text_char){
    //$data = str_replace($text_char,$array[$text_char], $data);
     $encrypted .= $array[$text_char];
} 
```

在循环中运行`str_replace`会导致替换先前已替换的数据。

除此之外，为了使加密数据的传输更容易，我会改变：

```
return $solution."BREAKHERE".gzcompress(base64_encode($data),9); 
```

至：

```
return base64_encode($solution."BREAKHERE".gzcompress($data,9); 
```

然后在解密器中进行适当的更改。压缩数据可以包含空字符和不可打印字符，因此如果您对整个结果进行 base64 编码，则可以更轻松地传递它。

# cookies - fastcgi cache how-to 为登录用户缓存并为每个用户定制

> ID：12499229
> 
> 赞同：3
> 
> 时间：2012-09-19T16:46:56.163
> 
> 标签：cookies, nginx, php

目前我正在为未登录的用户使用 fastcgi_cache 进行缓存，并使用（ if + fastcgi_no_cache + fastcgi_cache_bypass ）将登录的用户直接传递到后端，即 PHP-FPM。

这项工作已经足够好，但是当 PHP-FPM 开始达到 500+ req/s 时，缓慢/加载开始。

所以我在想的是为登录用户创建一个缓存，每个用户都有自己的缓存文件，这可能吗？如果是的话，请你给我一些建议。我已经护目镜了很多，但没有任何帮助。

使用 mysql 和 memcached 和 apc 运行自定义 php cms 的站点

**猫 /etc/nginx/nginx.comf**

```
user  username username;

worker_processes     8;
worker_rlimit_nofile 20480;

pid /var/run/nginx.pid;

events {

    worker_connections 10240;
    use epoll;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    log_format main '$remote_addr - $remote_user [$time_local] '
            '"$request" $status  $body_bytes_sent "$http_referer" '
            '"$http_user_agent" "$http_x_forwarded_for"';
    access_log      off;
    error_log   /var/log/nginx/error.log    warn;
    log_not_found       off;
    log_subrequest      off;

    server_tokens       off;
    sendfile        on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   3;
    keepalive_requests  50;
    send_timeout        120;    
    connection_pool_size    256;
    chunked_transfer_encoding on;
    ignore_invalid_headers   on;
    client_header_timeout   60; 
    large_client_header_buffers 4 128k;
    client_body_in_file_only off;
    client_body_buffer_size 512K;
    client_max_body_size    4M;
    client_body_timeout 60;
    request_pool_size   32k;
    reset_timedout_connection on;
    server_name_in_redirect off;
    server_names_hash_max_size 4096;
    server_names_hash_bucket_size 256;
    underscores_in_headers  off;
    variables_hash_max_size 4096;
    variables_hash_bucket_size 256;

    gzip            on;
    gzip_buffers        4 32k;
    gzip_comp_level     1;
    gzip_disable            "MSIE [1-6]\.";
    gzip_min_length     0;
    gzip_proxied        any;
    gzip_types      text/plain text/css application/x-javascript text/javascript text/xml application/xml application/xml+rss application/atom+xml;

    open_file_cache     max=3000 inactive=20s;
    open_file_cache_min_uses 1;
    open_file_cache_valid   20s;
    open_file_cache_errors  off;

    fastcgi_buffer_size     8k;
    fastcgi_buffers         512 8k;
    fastcgi_busy_buffers_size   16k;
    fastcgi_cache_methods   GET HEAD;
    fastcgi_cache_min_uses  1;
    fastcgi_cache_path /dev/shm/nginx levels=1:2 keys_zone=website:2000m inactive=1d max_size=2000m;
    fastcgi_connect_timeout 60;
    fastcgi_intercept_errors on;
    fastcgi_pass_request_body on;
    fastcgi_pass_request_headers on;
    fastcgi_read_timeout    120;
    fastcgi_send_timeout    120;
    proxy_temp_file_write_size 16k;

    fastcgi_max_temp_file_size  1024m;

    include /etc/nginx/vhosts/*.conf;

} 
```

**虚拟主机设置：**

```
server {

    listen 80;
    server_name domain.com;

    access_log  off;
    error_log  /var/log/nginx/error.log warn;
    root /home/username/public_html;

    location ~ \.php$ {

        # pass cache if logged in
        set $nocache "";
                if ($http_cookie ~ (MyCookieUser*|MyCookiePass*)) {
                  set $nocache "Y";
                }
                fastcgi_no_cache $nocache;
                fastcgi_cache_bypass $nocache;
        fastcgi_cache       website;
        fastcgi_cache_key         $host$uri$is_args$args;
        fastcgi_cache_valid       200 301 302 304 40s;
        fastcgi_cache_valid       any 5s;
        fastcgi_cache_use_stale error timeout invalid_header updating http_500 http_503 http_404;
        fastcgi_ignore_headers  Set-Cookie;
        fastcgi_hide_header     Set-Cookie;
        fastcgi_ignore_headers  Cache-Control;
        fastcgi_hide_header     Cache-Control;
        fastcgi_ignore_headers  Expires;
        fastcgi_hide_header     Expires;
                fastcgi_no_cache $nocache;
                fastcgi_cache_bypass $nocache;
                fastcgi_index  index.php;
                fastcgi_pass 127.0.0.1:8081;
                fastcgi_param  SCRIPT_FILENAME  /home/username/public_html$fastcgi_script_name;
                include /etc/nginx/fastcgi_params;

    }

    location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|ppt|txt|mid|swf|midi|wav|bmp|js)$ {
        root            /home/username/public_html;
        expires             max;
        add_header          Cache-Control   cache;
    }

} 
```

**php-fpm 配置**

```
emergency_restart_threshold = 10
emergency_restart_interval = 60s
process_control_timeout =10s
rlimit_files = 102400
events.mechanism = epoll
[www]
user = username
group = username
listen = 127.0.0.1:8081
listen.backlog = 10000
pm = dynamic
pm.max_children = 2048
pm.start_servers = 64
pm.min_spare_servers = 20
pm.max_spare_servers = 128
pm.process_idle_timeout = 10s;
pm.max_requests = 50000
request_slowlog_timeout = 40s
request_terminate_timeout = 60s 
```

还需要改变 php cms 运行自己的 cookie 的方式吗？

服务器内存：32GB DDR3 处理器：双 E5620 Centos6 64bit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:01:15.103

只是一个建议（以及我目前正在做的事情）......

当您在站点的“登录”部分时，为什么不为 nginx 从其上游 cgi 服务器 (php-fpm) 获取的每个唯一 cookie 使用不同的缓存 - 这或多或少意味着每个登录用户都将获得自己的缓存 - 它不是最佳的，但会有所帮助。

如果您想开始使用带有 cookie/动态内容等的真正精美的缓存选项，您可能需要在 nginx 前面使用 varnish-cache。

我也有某些位置会在访问时清除缓存的任何缓存数据（对于该 URI），例如 /admin 或 /system 等 - 我想要的最后一件事是 nginx 提供我的管理后端的缓存副本及其所有敏感信息php-fpm 离线时的黑客。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T15:00:14.720

您可能会喜欢这个 WordPress 示例：

```
 set $cs_session "";
        if ($http_cookie ~* "wordpress_logged_in_[^=]*=([^%]+)%7C") {
                set $cs_session wordpress_logged_in_$1;
        }

fastcgi_cache_key               "$scheme$request_method$host$request_uri$cs_session"; 
```

# java - 停止 .wav

> ID：12499230
> 
> 赞同：0
> 
> 时间：2012-09-19T16:47:11.530
> 
> 标签：java, audio, wav, javasound

我有从 .wav 文件播放声音的代码，但我无法停止歌曲，甚至无法退出程序直到它结束。因为这是一首 5 分钟的歌曲，所以这是个问题。这是我如何播放 wav 的代码：

```
public class EasySound{
   private SourceDataLine line = null;
   private byte[] audioBytes;
   private int numBytes;

   public EasySound(String fileName){
      File  soundFile = new File(fileName);
   AudioInputStream audioInputStream = null;
   try {
     audioInputStream = AudioSystem.getAudioInputStream(soundFile);
   } catch (Exception ex) {
   System.out.println("*** Cannot find " + fileName + " ***");
   System.exit(1);
   }

   AudioFormat audioFormat = audioInputStream.getFormat();
   DataLine.Info info = new DataLine.Info(SourceDataLine.class,
                     audioFormat);
   try {
   line = (SourceDataLine)AudioSystem.getLine(info);
   line.open(audioFormat);
   } catch (LineUnavailableException ex) {
   System.out.println("*** Audio line unavailable ***");
   System.exit(1);
   }

   line.start();

   audioBytes = new byte[(int)soundFile.length()];

   try {
   numBytes = audioInputStream.read(audioBytes, 0, audioBytes.length);
   } catch (IOException ex) {
     System.out.println("*** Cannot read " + fileName + " ***");
     System.exit(1);
   }
 }

 public void play() {
line.write(audioBytes, 0, numBytes);
 }

 } 
```

有没有更好的方法来做到这一点，或者有一种方法可以让我在播放中停止歌曲？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:49:26.893

在单独的线程中播放音频文件。将 UI 保留在可以访问“播放”线程的不同线程中。当用户想要暂停时，您可以简单地暂停该线程。如果您使用的任何库都没有这样的功能，我会感到惊讶......

# xcode - 在 Mac App Bundle 中嵌入框架

> ID：12499232
> 
> 赞同：9
> 
> 时间：2012-09-19T16:47:21.420
> 
> 标签：xcode, macos, frameworks, bundle

我正在尝试将 SDL 和 SDL_ttf 框架添加到我的应用程序中，并且我已经按照通常的方式完成了它：将它们添加到“将二进制文件与库链接”部分中，并添加了一个复制文件阶段，将它们复制到框架目录中。这确实创建了一个带有嵌入式框架的应用程序包。但是，当我运行应用程序时，我收到此错误：

> dyld：库未加载：@rpath/SDL_ttf.framework/Versions/A/SDL_ttf 引用自：/Users/matthew.davies/Library/Developer/Xcode/DerivedData/MacHub-ambfqujqxbxyiqapaoctvsucpdeu/Build/Products/Release/MacHub.app/内容/MacOS/MacHub 原因：找不到图像

我不确定还能做什么，以便应用程序可以找到框架，尽管它已嵌入到它的包中。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T17:29:23.927

我在网页上的评论中发现了原因。我需要将“运行路径搜索路径”构建设置设置为“@loader_path/../Frameworks”并找到框架。

为什么框架不会在应用程序包的 Frameworks 目录中自动搜索，这对我来说完全是个谜？你在听苹果吗？:)

# facebook - 为什么我不能发布带有应用程序令牌（和 publish_share 权限）的新照片

> ID：12499233
> 
> 赞同：0
> 
> 时间：2012-09-19T16:47:26.500
> 
> 标签：facebook, facebook-graph-api

我正在尝试根据链接代表应用程序（通过应用程序令牌）为我的应用程序用户上传照片：

[https://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

“应用访问令牌还可用于代表已授予您应用程序发布权限的用户向 Facebook 发布内容。”

但我无法做到，因为我收到一个错误：{"error":{"message":"A user access token is required to request this resource.","type":"OAuthException","code":102 }}

虽然我已经获得了“publish_stream”的批准。

编码：

```
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

有没有办法通过应用程序令牌发布照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:55:58.160

或 publish_actions

看起来更好，因为用户不必有一个单独的页面/窗口，他可以点击“跳过”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:13:51.737

尝试使用 publish_stream

问候

# c# - 网页渲染位置控制器

> ID：12499238
> 
> 赞同：0
> 
> 时间：2012-09-19T16:47:57.220
> 
> 标签：c#, webpage-rendering

第一个问题，但我真的很困惑。

我有一个运行良好的网页渲染。但是，我需要能够控制初始显示位置（几乎就像 HTML 中的 href #anchors），但不能访问网站内容。

据我所知，除了启用/禁用的布尔值之外，我无法访问滚动条。

例如，我可以做些什么来强制向下滚动 20%，然后我可以创建一个表单以便稍后进行调整。

任何帮助将不胜感激，尽管从我的研究来看似乎不太可能。

我有常规的 windows WebBrowser Render

`private System.Windows.Forms.WebBrowser m_webBrowser;`

谢谢 ！

--这是针对 c# 独立应用程序的。不是基于 Web 的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:53:38.587

你试过用jquery吗？

我个人使用 jquery 中的 animate 方法滚动到我网页中的某些元素。

例子：

```
 $('html, body').animate({scrollTop: $('#the-element-you-want-to-scroll-to).offset().top}, 1000); 
```

PS：对于最后一个参数，您可以控制滚动到目的地的时间，这为您提供了很好的效果。（以毫秒为单位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:27:08.327

我设法用一种奇怪的方法解决了它..

我基本上手动将一些javascript注入到渲染的HTML中。然后剩下的就很容易了。

我用过这样的东西：

```
 string updatedSource = WebBrowser.DocumentText.Replace("Google", "Foogle");
            string extraSource =
            "<html><body>Script goes here <br/>" +
            "<div><p>BLA BLA BLA</p></div></body></html>";

            WebBrowser.DocumentText = extraSource + updatedSource;

            WebBrowser.Update(); 
```

也许它会帮助某人。

# javascript - val() 返回 html() 而不是 undefined for 未设置值属性时的标记

> ID：12499241
> 
> 赞同：3
> 
> 时间：2012-09-19T16:48:02.460
> 
> 标签：javascript, jquery

考虑以下 HTML：

```
<select>
    <option value="hasAttr">Has a value attr</option>
    <option>Does not have a value attr</option>
</select> 
```

如您所见，其中一个选项设置了 value 属性，而另一个则没有。但是，当我`val()`通过 jQuery 检查每个选项时，没有设置 value 属性的选项返回标签 ( `html()`) 内的文本，而不是`undefined`我通常期望的那样。

```
var $select = $('select');

$select.each(function() {
    var $this = $(this),
        $options = $this.children('option');

    $options.each(function(){
        var $option = $(this),
            $value  = $option.val(),
            $html   = $option.html();

        console.log('Option Value: '+ $value +'\nOption HTML: '+ $html);

    });

}); 
```

即使我更改代码来查找`$option.attr('value')`，我仍然得到相同的结果。有没有一种方法可以检查是否存在将返回布尔值`<option>`的属性？`value`

这是一个[jsFiddle](http://jsfiddle.net/cVJux/)。

* * *

用解决方案更新[了 jsFiddle](http://jsfiddle.net/cVJux/2/)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T16:50:27.577

这是正确的、标准的行为。在没有`value`属性的情况下，元素的文本内容被用作元素的值。

来自[W3C 网站](http://www.w3.org/wiki/HTML/Elements/option)：

> 如果没有 [a value 属性]，则 option 元素的值是该元素的 textContent。

* * *

`getAttribute`您可以在 DOM 节点上使用测试内容属性的存在：

```
$option[0].getAtribute('value') // returns null 
```

`is`或者，您可以使用带有“has-attribute”选择器的 jQuery方法：

```
$option.is('[value]') // returns false 
```

# c++ - 你如何告诉 Qt 应用程序依赖于 Qt 库？

> ID：12499251
> 
> 赞同：3
> 
> 时间：2012-09-19T16:48:19.637
> 
> 标签：c++, qt, dependencies, dependency-management, qmake

我有一个代码库，其中有一些共享库。例如，LIB1 执行 APP1 需要（取决于）的某种处理。

qmake *.pro 文件的设置如下。有一个根 *.pro`TEMPLATE=subdirs`列出了 APP1 和 LIB1 作为它的子目录。

LIB1.pro：

```
TARGET = LIB1
TEMPLATE = lib

QT += core
QT += xml

DESTDIR = path/to/libs/directory

SOURCES += \
    File1.cpp \
    FileN.cpp

HEADERS += \
    File1.h \
    FileN.h 
```

APP1.pro：

```
#------ dependencies ------#
LIBS += -Lpath/to/libs/directory
# LIB1
INCLUDEPATH += path/to/libs/directory/LIB1lib
DEPENDPATH += path/to/libs/directory/LIB1lib
LIBS += -lLIB1

HEADERS       = \
    FileNplus1.h \
    FileM.h
SOURCES       = \
    FileNplus1.cpp \
    FileM.cpp 
```

问题是，当您编译根 *.pro 文件时，LIB1 将编译，但 APP1 无法编译并出现错误`QDomElement: No such file or directory`，因为 APP1.pro 没有`QT += xml`.

我使用了一个 hack，但我想克服这个 hack。hack 包括在 APP1.pro 中添加以下行：

```
# add this to APP1.pro... let's it compile again
QT += xml 
```

**无论如何设置你的 qmake *.pro 文件，`APP1.pro`依赖于 LIB1 而无需修改`APP1.pro`添加`QT += xml`？**

（这个问题的原因是假设您有其他依赖于其他东西的库......我想让 Qt/Qmake 处理依赖关系，例如`Qt += xml`依赖关系。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:59:40.063

qmake allows you to create your [own configuration features](http://doc.qt.digia.com/4.8-snapshot/qmake-advanced-usage.html). (last paragraph)

So you can create your own feature and move your lib1-linking code to it. You can add `QT+=xml` here. And in `app.pro` you'll just write `CONFIG += lib1`

# ruby-on-rails - Rails 控制台莫名加载失败

> ID：12499253
> 
> 赞同：0
> 
> 时间：2012-09-19T16:48:22.573
> 
> 标签：ruby-on-rails

出于某种原因，我的实时服务器上的 Rails 控制台现在无法加载。我拉了一个新分支，强制检查了新分支（可能是一个坏主意），因为在活动服务器上没有任何真正应该改变的东西（理论上），并且在新分支和 master 上我在尝试时都有以下错误运行控制台：

```
/home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:90:in `block in materialize': Could not find pg-0.11.0 in any of the sources (Bundler::GemNotFound)
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `map!'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/spec_set.rb:83:in `materialize'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/environment.rb:27:in `specs'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:60:in `setup'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
from /home/pastonpaper/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /home/pastonpaper/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /home/pastonpaper/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from /home/pastonpaper/.rvm/gems/ruby-1.9.3-p194@pastonpaper/bin/ruby_noexec_wrapper:9:in `<main>' 
```

真的不知道如何解决这个问题。这似乎是一个宝石问题，但这怎么可能改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:54:05.363

看起来它与 postres gem（pg）有关。也许您需要运行`bundle install`或检查您的 Gemfile（和 Gemfile.lock）是否有任何异常。

# spring - 多模块 GWT 2.4.0 - Spring 3.1.1 应用程序中的静态资源

> ID：12499255
> 
> 赞同：2
> 
> 时间：2012-09-19T16:48:24.247
> 
> 标签：spring, gwt, static, resources, overlays

我们正在按照 Thomas Broyer 为 GWT 应用程序和他的多模块 maven 原型提出的结构开发一个新应用程序。

在服务器模块中，我们包含了 Spring 3.1.1 和 Spring Security 3.1.0。我们有一个控制器来提供登录和 GWT 的主机页面。该模块使用 jetty maven 插件版本 8.1.3.v20120416。在这个模块中，我们将客户端模块配置为覆盖并添加了它的资源：

```
 <plugin>
          <groupId>org.mortbay.jetty</groupId>
          <artifactId>jetty-maven-plugin</artifactId>
          <configuration>
            <scanIntervalSeconds>1</scanIntervalSeconds>
            <webApp>
              <baseResource implementation="org.eclipse.jetty.util.resource.ResourceCollection">
                <resourcesAsCSV>src/main/webapp,${basedir}/../accounts-ui-client-desktop/target/accounts-ui-client-desktop-${project.version}/</resourcesAsCSV>
              </baseResource>
              <extraClasspath>${basedir}/../accounts-ui-shared/target/classes/</extraClasspath>
              <jettyEnvXml>${basedir}/src/main/resources/jetty-web.xml</jettyEnvXml>
            </webApp>
            <systemProperties>
                <systemProperty>
                    <name>java.util.logging.config.file</name>
                    <value>${basedir}/src/main/resources/logging.properties</value>
                </systemProperty>                
            </systemProperties>
          </configuration>
        </plugin> 
```

我们在 web.xml 中的配置将 DispatcherServlet 映射到 / 模式。

在使用 jetty:run 运行服务器模块时，我们在提供客户端模块中包含的静态内容时遇到问题，特别是在提供 gwt 的托管页面时，它会请求

`http://localhost:8080/app/app.nocache.js`

导致 Not Found 错误。

我知道如何处理本地资源（包含在 webapp 中）：

registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");

但 app.nocache.js 是包含在其他叠加层中的资源。

我的问题是：我怎么能告诉 Spring 不要处理另一个覆盖中包含的资源？我试过了

```
@Override
public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
    configurer.enable();
} 
```

在 Spring java config（扩展 WebMvcConfigurerAdapter）中，但同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T11:47:34.903

终于明白了。

问题只是一个 Maven 问题。我刚刚从父 pom 进行了全新安装，现在一切正常。

web.xml 的最终配置是：

```
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </init-param>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

以及扩展 WebMvcConfigurerAdapter 的 @Configuration 类中 Spring 的最终配置：

```
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/favicon.ico").addResourceLocations("/favicon.ico");
    registry.addResourceHandler("/app/**").addResourceLocations("/app/");
}

@Override
public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
    configurer.enable();
} 
```

给您带来的不便深表歉意。

# ruby - 为什么 MiniTest::Spec 没有 wont_raise 断言？

> ID：12499259
> 
> 赞同：33
> 
> 时间：2012-09-19T16:48:34.290
> 
> 标签：ruby, unit-testing, minitest

Ruby`Test::Unit`有`assert_nothing_raised`. `Test::Unit`已被[MiniTest](https://github.com/seattlerb/minitest)取代。为什么 MiniTest 的断言/期望没有与此类似的东西？例如，您可以期望`must_raise`但不能`wont_raise`。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-19T16:48:34.290

MiniTest 确实`assert_nothing_raised`在它的 Test::Unit 兼容层中实现了，但在它自己的测试 (`MiniTest::Unit`和`MiniTest::Spec`) 中它*没有*实现任何这样的测试。程序员争辩说，原因是，对任何东西的测试都不是对任何东西的测试。您*永远不会*期望在测试中引发任何事情，除非您正在测试*异常*。如果测试代码中发生意外（未捕获）异常，您将收到测试按良好顺序报告的异常，您将知道您遇到了问题。

例子：

```
require 'minitest/autorun'

describe "something" do
  it "does something" do
    Ooops
  end
end 
```

输出：

```
Run options: --seed 41521

# Running tests:

E

Finished tests in 0.000729s, 1371.7421 tests/s, 0.0000 assertions/s.

  1) Error:
test_0001_does_something(something):
NameError: uninitialized constant Ooops
    untitled:5:in `block (2 levels) in <main>'

1 tests, 0 assertions, 0 failures, 1 errors, 0 skips 
```

这正是您想知道的。如果您期望什么都不会被提高，那么您就没有得到它，而且您已经被告知了。

所以，这里的论点是：不要使用`assert_nothing_raised`！这只是一个没有意义的拐杖。参见，例如：

[https://github.com/seattlerb/minitest/issues/70](https://github.com/seattlerb/minitest/issues/70)

[https://github.com/seattlerb/minitest/issues/159](https://github.com/seattlerb/minitest/issues/159)

[http://blog.zenspider.com/blog/2012/01/assert_nothing_tested.html](http://blog.zenspider.com/blog/2012/01/assert_nothing_tested.html)

另一方面，显然`assert_nothing_raised`对应于用户之间的一些直觉，因为很多人都希望 a`wont_raise`与`must_raise`等一起使用。特别是有人希望将*断言*集中在这一点上，而不仅仅是测试。幸运的是，MiniTest 非常简约和灵活，所以如果你想添加自己的例程，你可以。因此，您可以编写一个方法来测试无异常并在没有异常时返回已知结果，现在您可以断言该已知结果。

例如（我不是说这是完美的，只是展示这个想法）：

```
class TestMyRequire < MiniTest::Spec
  def testForError # pass me a block and I'll tell you if it raised
    yield
    "ok"
  rescue
    $!
  end
  it "blends" do
    testForError do
      something_or_other
    end.must_equal "ok"
  end
end 
```

关键不是这是一个好主意还是坏主意，而是 MiniTest 从来没有责任为您做这件事。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-11T08:40:21.243

如果你需要它：

```
# test_helper.rb

module Minitest::Assertions
  def assert_nothing_raised(*)
    yield
  end
end 
```

并使用它：

```
def test_unknown_setter
  assert_nothing_raised do
    result.some_silly_column_name = 'value'
  end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-01T15:52:31.323

这让我很困扰，以至于我深入研究了 MiniTest 源代码并在我的`spec_helper.rb`文件中提供了一个实现：

```
module MiniTest
  module Assertions
    def refute_raises *exp
      msg = "#{exp.pop}.\n" if String === exp.last

      begin
        yield
      rescue MiniTest::Skip => e
        return e if exp.include? MiniTest::Skip
        raise e
      rescue Exception => e
        exp = exp.first if exp.size == 1
        flunk "unexpected exception raised: #{e}"
      end

    end
  end
  module Expectations
    infect_an_assertion :refute_raises, :wont_raise
  end
end 
```

希望这对同样需要的其他人有所帮助`wont_raise`。干杯! :)

# ruby - 如何从 Sequel 模型中获取 SQL 语句

> ID：12499266
> 
> 赞同：1
> 
> 时间：2012-09-19T16:48:54.833
> 
> 标签：ruby, sequel

有没有办法从[Sequel](http://sequel.rubyforge.org/rdoc/classes/Sequel/Model/ClassMethods.html)模型中获取 SQL 语句？

```
class Asset < Sequel::Model(:Asset)
  set_primary_key :id

  many_to_one :site,    key: :siteid
  many_to_one :company, key: :companyid

  def validate
    super
    errors.add(:partnumber, "can't be empty") if partnumber.nil? || partnumber.empty?
    errors.add(:serialnumber, "can't be empty") if serialnumber.nil? || serialnumber.empty?
    errors.add(:description, "can't be empty") if description.nil? || description.empty?
  end
end

asset = Asset.new
# Add values to asset

puts asset.insert_sql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:15:22.527

尝试

```
puts Asset.dataset.insert_sql 
```

实际插入（默认）值。

或者

```
puts Asset.dataset.insert_sql(asset.values) 
```

如果您已经准备好实例。不知道你是否有这个想法？

有关更多信息，请参阅[Sequel::Dataset](http://www.rubydoc.info/github/jeremyevans/sequel/Sequel/Dataset)文档和[Sequel 的质量分配指南](https://github.com/jeremyevans/sequel/blob/master/doc/mass_assignment.rdoc)。

# php - 使用 SOAP 将参数传递给 .NET Web 服务

> ID：12499267
> 
> 赞同：0
> 
> 时间：2012-09-19T16:48:56.947
> 
> 标签：php, .net, soap-client

我正在开发一个需要将参数传递给 .NET Web 服务的项目。下面是 .NET SOAP 请求结构的样子。

```
<soap:Body>
<ListRequest xmlns="My.API.1.0">
      <ID>guid</ID>
      <Parameters>
        <Values xmlns="api.test">
          <fv ID="string">
            <Value />
            <ValueTranslation>string</ValueTranslation>
          </fv>
          <fv ID="string">
            <Value />
            <ValueTranslation>string</ValueTranslation>
          </fv>
        </Values>
      </Parameters>      
</ListRequest>
</soap:Body> 
```

下面是 PHP 代码的一部分。

```
$params=array('ID'=> $listID,
              'Parameters' => 
                array(
                   array('ID' => 'ROOM', 'ValueTranslation' => '99999')));                    

        $result=$soapClient->ListRequest($params); 
```

每当我在没有参数的情况下进行调用时，请求都会起作用并将结果返回到 php 页面。但是当我引入参数时，我得到“函数GETLIST需要参数'ROOM'，它没有提供”错误。我感觉问题在于我映射参数结构的方式，但我不知道如何将上面的 SOAP xml 映射到 php 代码。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:12:26.907

我不认为您可以使用 assoc 数组为soap 请求指定参数。尝试改用对象，它过去对我有用

```
$params = new stdClass();
$params->ID = $listId;

$params->Parameters = new stdClass();

$params->Parameters->Values = new stdClass();
$params->Parameters->Values->fv = array();

//Child of "Parameters"
$p = new stdClass();
$p->ID = 'ROOM';
$p->ValueTranslation = '99999';

$params->Parameters->Values->fv[] = $p;

$soap->ListRequest($params); 
```

另一种解决方案是使用 XML DOM 并自己处理 XML 数据的创建（然后只需将其作为字符串传递给您要在 SOAP 中调用的函数）

此外，您使用 assoc 数组创建的数据结构与其应有的结构不匹配。（仔细查看您发布的 XML，您会发现缺少什么）

编辑：认为我现在做了一些应该反映你的模式的东西。

# tableview - javafx，TableView：检测单元格上的双击

> ID：12499269
> 
> 赞同：20
> 
> 时间：2012-09-19T16:48:59.333
> 
> 标签：tableview, javafx-2

给定一个 TableView，我需要检测单元格上的双击。

```
tableView.setOnMouseClicked(new EventHandler<MouseEvent>()
{
    @Override
    public void handle(MouseEvent event)
    {
        if(event.getClickCount()>1)
        {
            System.out.println("double clicked!");
        }
    }
}); 
```

如何确定鼠标点击的单元格？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-25T21:36:35.243

代码示例。
运行[官方tableview教程的](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)**“示例12-11：单元格编辑的替代解决方案**” 。 替换以下内容：

```
table.setEditable(false);
Callback<TableColumn, TableCell> cellFactory =
        new Callback<TableColumn, TableCell>() {
            public TableCell call(TableColumn p) {
                TableCell cell = new TableCell<Person, String>() {
                    @Override
                    public void updateItem(String item, boolean empty) {
                        super.updateItem(item, empty);
                        setText(empty ? null : getString());
                        setGraphic(null);
                    }

                    private String getString() {
                        return getItem() == null ? "" : getItem().toString();
                    }
                };

                cell.addEventFilter(MouseEvent.MOUSE_CLICKED, new EventHandler<MouseEvent>() {
                    @Override
                    public void handle(MouseEvent event) {
                        if (event.getClickCount() > 1) {
                            System.out.println("double clicked!");
                            TableCell c = (TableCell) event.getSource();
                            System.out.println("Cell text: " + c.getText());
                        }
                    }
                });
                return cell;
            }
        }; 
```

不需要，`EditingCell`因为您的单元格不可编辑。细胞工厂用于细胞渲染。`Labeled`因此，可以使用单元格的 setGraphics() 方法放置除默认值以外的任何节点/控件。IMO 您不能直接访问默认单元格，因此您应该定义自己的单元格工厂以便能够将事件过滤器放在单元格上。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-09-07T15:59:53.657

JavaFX 允许您为每个单元设置多个侦听器（我并不是说这是好是坏，只是您可以）。如果您将代码设置为对特定列/行的特定侦听器执行响应，则每个侦听器都将执行您的代码。要捕获单元格鼠标点击，我使用以下内容：

```
table.setEditable(true);
table.getSelectionModel().setCellSelectionEnabled(true);  // selects cell only, not the whole row
table.setOnMouseClicked(new EventHandler<MouseEvent>() {
 @Override
 public void handle(MouseEvent click) {
  if (click.getClickCount() == 2) {
   @SuppressWarnings("rawtypes")
   TablePosition pos = table.getSelectionModel().getSelectedCells().get(0);
   int row = pos.getRow();
   int col = pos.getColumn();
   @SuppressWarnings("rawtypes")
   TableColumn column = pos.getTableColumn();
   String val = column.getCellData(row).toString(); System.out.println("Selected Value, " + val + ", Column: " + col + ", Row: " + row);
   if ( col == 2 ) { ... do something ... } 
   if ( col == 5 ) { ... do something ... } 
   if ( col == 6 ) { ... do something ... } 
   if ( col == 8 ) { ... do something ... } 
  }
 }
}); 
```

您可以从上面的代码中看到，在我想要基于鼠标单击做某事的列上，我有代码：

`if ( col == <int> ) { ... do something ... }`

我还将这些列设置为不允许编辑：

`thisCol.setEditable(false);`

我想要编辑的行我有`.setEditable(true)`但没有包含鼠标单击的响应。

单元格编辑默认为 2 次鼠标单击。您可以更改上面的代码以捕获单元格上的不同鼠标事件，因此您仍然可以通过单击 2 次鼠标来编辑单元格，或者使用您确定的任何其他鼠标事件打开 URL、对话框等。TableView 允许您根据自己的想象力和编程技能来确定自己的功能。你不会被“我可以编辑它，或者用它触发鼠标事件”所困。你可以两者都做:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T03:52:12.407

在您的侦听器正文中添加以下内容，并使用`T`您的表记录类型：

```
 @SuppressWarnings("rawtypes")
  ObservableList<TablePosition> cells = tableView.getSelectionModel().getSelectedCells();
  for( TablePosition< T, ? > cell : cells )
  {
     System.out.println( cell.getColumn());
  }// for 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-03T10:17:58.447

就我而言，我使用下一个代码

```
tableViewObject.setOnMouseClicked(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent t) {
                if (t.getClickCount() == 2 && getSelectedItem() != null) {
                    SMPBLogger.logInfo("Double cliked", Boolean.TRUE);
                    if (listener != null) {
                        listener.doubleClicked(tableViewObject.this,getSelectedItem());
                    }
                }
            }
        }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T17:10:36.413

使用单元工厂创建单元，并在创建单元节点的单元工厂中，将鼠标事件处理程序或过滤器放置在节点上而不是 tableView 上。

# php - 包含一个 php 文件并更改目录

> ID：12499270
> 
> 赞同：0
> 
> 时间：2012-09-19T16:49:00.680
> 
> 标签：php, session, session-cookies

我正在尝试在我的网站中包含聊天解决方案。 如果我将聊天索引文件包含为 iframe，则索引文件位于其中，`root_dir`并且聊天索引文件位于其中：`root_dir/chat`

```
<iframe src="chat/index.php" width="100%" height="600px"></iframe> 
```

但我试图将会话的用户名传递给聊天，所以我尝试了这个：

```
$username = $_SESSION['username'];
chdir(CHAT_DIR);
include 'index.php'; 
```

我得到一个错误。聊天解决方案正在尝试包含来自父目录而不是聊天目录的文件。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:53:00.507

您可以使用 cookie，但您也可以通过链接站点来继续您的会话。您无需更改文件夹。

# jenkins - Cloudbees Jenkins 作业失败，没有控制台输出

> ID：12499275
> 
> 赞同：1
> 
> 时间：2012-09-19T16:49:14.647
> 
> 标签：jenkins, cloudbees

我们正在测试 Cloudbees Jenkins 服务，但我们所有的工作都开始不显示任何控制台输出。这似乎发生在成功的工作和失败的工作中。

我们创建了一个新作业，但由于控制台输出显示为空，因此看不到它失败的原因。

我不确定我们是否在服务的免费版本中达到了某些限制，或者服务中是否存在阻止控制台输出可见的当前错误。有没有其他人看过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:55:08.023

重新启动您的 Jenkins 应该可以解决这个问题（这是我们最近收到的关于此行为的第二次报告） - 如果不是这种情况，请记录支持工作。

要重新启动，请浏览到 https://[account].ci.cloudbees.com/restart/

# php - 使用 php 和 google 距离矩阵 api v2 计算出租车费

> ID：12499281
> 
> 赞同：2
> 
> 时间：2012-09-19T16:49:29.153
> 
> 标签：php, math, calculator, google-maps-api-2

我想在我的网站上计算出租车费用。

我有以下要求：

如果谷歌距离矩阵计算显示以下距离公里，则比率应如下所示：

*   从 0 -10 公里 = 65 美元（固定价格）+ 11%
*   10 公里 = 70 美元 + 11%
*   15 公里 = 80 美元 + 11%
*   20 公里 = 90 美元 + 11%
*   25 公里 = 100 美元 + 11%
*   30 公里 = 120 美元 + 11%
*   30 公里以上 = 4 美元/公里

我将价格定为每公里 2 美元，从 10 公里以上到 30 公里 + 50 美元，结果如下：

如果出租车 如果开车

*   20 公里 = 20 公里 × 2 美元 + 50 美元 = 90 美元 + 11%
*   21 公里 = 21 公里 × 2 美元 + 50 美元 = 92 美元 + 11%
*   22km = 22km × $2 + $50 = $94 + 11% 依此类推

但我不知道要计算 65 美元的固定价格，这是 10 公里以下距离的固定价格和 30 公里和 30 公里以上的 120 美元价格，即 4 美元/公里。

我用于谷歌距离矩阵的脚本是显示 $2/km + $50 修复：（我没有在这个脚本中添加 11%）

```
<script src="http://maps.google.com/maps?file=api&v=2&key=_MY_API_KEY" 
type="text/javascript"></script>

<?php
$rate=2;
$extra=50;
?>
<script type="text/javascript">
var geocoder, location1, location2, gDir;
    var map;
var gdir;
var geocoder = null;
var addressMarker;
var directionsPanel;
var directions;
    function initialize() {
            geocoder = new GClientGeocoder();
            gDir = new GDirections();
            GEvent.addListener(gDir, "load", function() {
                    var drivingDistanceMiles = gDir.getDistance().meters / 1000;
                    var drivingDistanceround = 
Math.round(drivingDistanceMiles*100)/100;
                    var cost = ((drivingDistanceMiles * <?php echo $rate; ?>) + (<?php 
echo $extra; ?>))
                    <?php echo $rate; ?>) + (<?php echo 
$extra; ?>))
                    };
                    */
                    var fare=cost;
                    var fare = Math.round(fare*100)/100;
                    document.getElementById('results').innerHTML = '<table 
width="100%" style="border-collapse:collapse; padding-top:3px;"><tr><td rowspan="2" 
width="35"><img src="images/rates.png"></td><td><strong>Distance: </strong>' + 
drivingDistanceround + ' Kilemeters</td></tr><tr><td><strong>Estimated Cost: 
</strong>$ ' + fare + '</td></tr></table>';
            });
            if (GBrowserIsCompatible()) {      
    map = new GMap2(document.getElementById("map_canvas"));
    map.setCenter(new GLatLng(-33.722626, 150.810585), 10);
    gdir = new GDirections(map, document.getElementById("directions"));
    GEvent.addListener(gdir, "load", onGDimrectionsLoad);
    GEvent.addListener(gdir, "error", handleErrors);

  }
}

function setDirections(fromAddress, toAddress, locale) {
  gdir.load("from: " + fromAddress + " to: " + toAddress);

    }

    function showLocation() {
            geocoder.getLocations(document.forms[0].from.value, function (response) {
                    if (!response || response.Status.code != 200)
                    {
                            alert("Sorry, we were unable to geocode the first 
address");
                    }
                    else
                    {
                            location1 = {lat: 
response.Placemark[0].Point.coordinates[1], lon: 
response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                            geocoder.getLocations(document.forms[0].to.value, function 
(response) {
                                    if (!response || response.Status.code != 200)
                                    {
                                            alert("Sorry, we were unable to geocode 
the second address");
                                    }
                                    else
                                    {
                                            location2 = {lat: 
response.Placemark[0].Point.coordinates[1], lon: 
response.Placemark[0].Point.coordinates[0], address: response.Placemark[0].address};
                                            gDir.load('from: ' + location1.address + ' 
to: ' + location2.address);
                                    }
                            });
                    }
            });

    ///////////////////////////////////////////////////////////

var directionsPanel;
var directions;

  directionsPanel = document.getElementById("route");
  directions = new GDirections(map, directionsPanel);
  directions.load("from: "+document.forms[0].from.value+" to: 
"+document.forms[0].to.value);

    }
</script>
</head>
<body onload="initialize()" onunload="GUnload()">
<table width="915" border="2" cellpadding="0" cellspacing="0" bordercolor="#FF9F0F" 
style="border-collapse:collapse">
  <tr>
<td bgcolor="#FFFF99" style="padding:10px;"><table width="905" border="0" 
cellspacing="0" cellpadding="0">
  <tr>
    <td><div id="map_canvas" style="width: 914px; height: 480px; border: solid 1px 
#336699"></div></td>
  </tr>

  <tr>
    <td><div id="form" style="width: 904px; text-align:center; border: solid 1px 
#336699; background:#d1e1e4;">
      <form action="#" onsubmit="document.getElementById('route').innerHTML=''; 
showLocation(); setDirections(this.from.value, this.to.value); return false;">
        <p style="font-family:Tahoma; font-size:8pt;">From:
          <input id="fromAddress" type="text" onblur="if(this.value=='') 
this.value=this.defaultValue;" onfocus="if(this.value==this.defaultValue) 
this.value='';" value="Street Name City, State" maxlength="50" size="26" name="from" 
style="font-family:Tahoma; font-size:8pt;" />
          To:
          <input id="toAddress" type="text" onblur="if(this.value=='') 
this.value=this.defaultValue;" onfocus="if(this.value==this.defaultValue) 
this.value='';" value="Street Name City, State" maxlength="50" size="26" name="to" 
style="font-family:Tahoma; font-size:8pt;"/>
          <input class="submit" name="submit" type="submit" value="Calculate" 
style="font-family:Tahoma; font-size:8pt;" />
        </p>
        <div id="results" style="font-family:Tahoma; font-size:8pt; text-align:left; 
padding-left:5px; padding-bottom:5px;"></div>
        <div id="route" style="font-family:Tahoma; font-size:8pt; text-align:left; 
padding-left:5px; padding-bottom:5px;"></div>
    </form>
    </div></td>
  </tr>
</table></td>
  </tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T18:09:35.083

我建议您使用**Google Maps API V3**，这是我根据您的要求测试过的脚本，根据您之前的脚本，我建议您使用 @Pierre-Francoys Brousse 脚本来获取费率，

```
 <?php
    session_start();
    $rate = 2;
    $extra = 50;
    $fix = 65;
    $above = 110;
    $next=55;
    $min=3;
    $cons = 4;
    //}
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Taxi Fare Calculation using PHP with GOOGLE MAPS API V3</title>
    <style type="text/css">
    html {
        height: 100%
    }
    body {
        height: 100%;
        margin: 0px;
        padding: 0px;
        font-family:tahoma;
        font-size:8pt;
    }
    #total {
        font-size:large;
        text-align:center;
        font-family:Georgia, “Times New Roman”, Times, serif;
        color:#990000;
        margin:5px 0 10px 0;
        font-size:12px;
        width:374px;
    }
    input {
        margin:5px 0px;
        font-family:tahoma;
        font-size:8pt;
    }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
    <script type="text/javascript">
        //<![CDATA[
          var map = null;
          var directionDisplay;
          var directionsService = new google.maps.DirectionsService();

          function initialize() {
            directionsDisplay = new google.maps.DirectionsRenderer();

            var Australia = new google.maps.LatLng(-25.085599,133.66699);

            var mapOptions = {  
                        center              : Australia,
                        zoom                : 4,
                        minZoom             : 3,
                        streetViewControl   : false,
                        mapTypeId           : google.maps.MapTypeId.ROADMAP,
                        zoomControlOptions  : {style:google.maps.ZoomControlStyle.MEDIUM}
                    };

            map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);

             //Find From location    
        var fromText = document.getElementById('start');
        var fromAuto = new google.maps.places.Autocomplete(fromText);
        fromAuto.bindTo('bounds', map);
        //Find To location
        var toText = document.getElementById('end');
        var toAuto = new google.maps.places.Autocomplete(toText);
        toAuto.bindTo('bounds', map);
        //  
            directionsDisplay.setMap(map);
            directionsDisplay.setPanel(document.getElementById('directions-panel'));

            /*var control = document.getElementById('control');
            control.style.display = 'block';
            map.controls[google.maps.ControlPosition.TOP].push(control);*/
          }

          function calcRoute() {
            var start = document.getElementById('start').value;
            var end = document.getElementById('end').value;
            var request = {
              origin: start,
              destination: end,
              travelMode: google.maps.DirectionsTravelMode.DRIVING
            };
            directionsService.route(request, function(response, status) {
              if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(response);
                computeTotalDistance(response);
              }
            });
          }
          function computeTotalDistance(result) {
          var total = 0;
          var myroute = result.routes[0];
          for (i = 0; i < myroute.legs.length; i++) {
            total += myroute.legs[i].distance.value;
          }
          total = total / 1000;
          /*Start Calculating Distance Fair*/
              if (10>total){
              var cost = <?php echo $fix; ?>;
              }
              else if (10<total && 20>total)
                {
                var cost = ((total * <?php echo $rate; ?>) + (<?php echo $extra; ?>));
                }
                else if (20<total && 30>total)
                {
                    var cost = ((total * <?php echo $rate; ?>) + (<?php echo $next; ?>));
                }
                else if (30<total && 50>total)
                {
                    var cost = (((total - 30) * <?php echo $cons; ?>) + (<?php echo $above; ?>));
                }
                else
                {
                    var cost = (((total - 50) * <?php echo $min; ?>) + 130);
                }

              var fare = cost * 0.11 + cost;
              var fare = Math.round(fare*100)/100;
          /*Distance Fair Calculation Ends*/

          document.getElementById("total").innerHTML = "Total Distance = " + total + " km and FARE = $" + fare;
          }

        function auto() {
        var input = document.getElementById[('start'), ('end')];
        var types
        var options = {
           types: [],
           componentRestrictions: {country: ["AUS"]}
            };
            var autocomplete = new google.maps.places.Autocomplete(input, options);
         }

          google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </head>
    <body onLoad="initialize()">
    <table width="380px" border="2" cellpadding="0" cellspacing="0" bordercolor="#FF9F0F" style="border-collapse:collapse">
      <tr>
        <td bgcolor="#FFFF99" style="padding:5px;">
        <table width="375px" border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td><div id="map_canvas" style="width: 374px; height: 300px; border: solid 1px #336699"></div></td>
            </tr>
            <tr>
              <td><div id="form" style="width:374px; text-align:center; border: solid 1px #336699; background:#d1e1e4;">
                  From:
                    <input type="text" id="start" size="60px" name="start" placeholder="Enter Location From">
                    <br />
                    To:
                    <input size="60px" type="text" id="end" name="end" placeholder="Enter Destination ">
                    <input type="button" value="Calculate" onClick="calcRoute();">
                 <div id="total"></div>
                 </div></td>
            </tr>
          </table>
          </td>
      </tr>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:11:25.400

如果您的问题是如何获得固定价格或变化的“利率”，为什么不只是一个 if/else 或[switch/case](http://www.w3schools.com/js/js_switch.asp)逻辑？另外，当这可以在 javascript 中完成时，你为什么要注入 php？

代替

```
 var drivingDistanceMiles = gDir.getDistance().meters / 1000;
  var drivingDistanceround = Math.round(drivingDistanceMiles*100)/100;
  var cost = ((drivingDistanceMiles * <?php echo $rate; ?>) + (<?php echo $extra; ?>))
  <?php echo $rate; ?>) + (<?php echo $extra; ?>)) 
```

为什么不只是做

```
var rate = 2;
var extra = 50;
taxModifier = 1.11; //11%
//...

var drivingDistanceMiles = gDir.getDistance().meters / 1000;
var drivingDistanceround = Math.round(drivingDistanceMiles*100)/100;
var cost;
if (drivingDistanceMiles < 10){ 
   cost = 65; 
} else if( drivingDistanceMiles >= 10 && drivingDistanceMiles < 30) {
    cost = (drivingDistanceMiles * rate + extra) * taxModifier ;
} else {
    cost = drivingDistanceMiles * 4\. * taxModifier  ;
} 
```

# javascript - 如何使用 jQuery 过滤多个选择组的结果？

> ID：12499282
> 
> 赞同：1
> 
> 时间：2012-09-19T16:49:28.173
> 
> 标签：javascript, jquery, html, refactoring, filtering

我现在尝试过滤两个选项，但稍后会添加第三个，也许是第四个（例如：现在我在价格和评论之间进行过滤，但希望在列表中添加更多价格和还有另一个过滤器类别，如“评级”，由 3、4 或 5 颗星组成）。

使用我在下面列出的逻辑可以正常工作，但我觉得它会变得非常冗长和复杂（并且不必要）。我知道有一种方法可以重构代码我只是想知道最好的方法是什么？HTML：

```
 <select class="deals">
    <option value="deals-all">All deals</option>
    <option value="50">$50</option>
    <option value="25">$25</option>
  </select>

  <select class="reviews">
    <option value="reviews-all">All reviews</option>
    <option value="reviews-positive">Positive reviews</option>
    <option value="reviews-negative">Negative reviews</option>
  </select> 
```

jQuery

```
 $('.reviews, .deals').change(function() {

var reviewsVal = $('.reviews :selected').val();
var dealsVal = $('.deals :selected').val();

 if((reviewsVal == 'reviews-all') && (dealsVal == 'deals-all')) {

      $('.review-positive').show();
 $('.review-negative').show();
 $('.deals-25').show();
 $('.deals-50').show();
 } 

else if((dealsVal == '50') && (reviewsVal == 'reviews-positive')) {
 $('.review-negative.deals-50').hide();
 $('.review-positive.deals-50').show();
 $('.review-negative.deals-25').hide();
 $('.review-positive.deals-25').hide();

 }

 else if((dealsVal == '50') && (reviewsVal == 'reviews-negative')) {
 $('.review-negative.deals-50').show();
 $('.review-positive.deals-50').hide();
 $('.review-negative.deals-25').hide();
 $('.review-positive.deals-25').hide();
 }

else if((dealsVal == '25') && (reviewsVal == 'reviews-positive')) {
 $('.review-negative.deals-50').hide();
 $('.review-positive.deals-50').hide();
 $('.review-negative.deals-25').hide();
 $('.review-positive.deals-25').show();
}

else if((dealsVal == '25') && (reviewsVal == 'reviews-negative')) {
 $('.review-negative.deals-50').hide();
 $('.review-positive.deals-50').hide();
 $('.review-negative.deals-25').show();
 $('.review-positive.deals-25').hide();
}

 else if((dealsVal == 'deals-all') && (reviewsVal == 'reviews-positive')) {
 $('.review-negative.deals-50').hide();
 $('.review-positive.deals-50').show();
 $('.review-negative.deals-25').hide();
 $('.review-positive.deals-25').show();
}

else if((dealsVal == 'deals-all') && (reviewsVal == 'reviews-negative')) {
 $('.review-negative.deals-50').show();
 $('.review-positive.deals-50').hide();
 $('.review-negative.deals-25').show();
 $('.review-positive.deals-25').hide();
}

else if((dealsVal == '50') && (reviewsVal == 'reviews-all')) {
 $('.review-negative.deals-50').show();
 $('.review-positive.deals-50').show();
 $('.review-negative.deals-25').hide();
 $('.review-positive.deals-25').hide();
}

else if((dealsVal == '25') && (reviewsVal == 'reviews-all')) {
 $('.review-negative.deals-50').hide();
 $('.review-positive.deals-50').hide();
 $('.review-negative.deals-25').show();
 $('.review-positive.deals-25').show();
}

else {
 $('.review-positive').show();
 $('.review-negative').show();
 $('.deals-25').show();
 $('.deals-50').show();
} 
});

$('.reviews-positive').click(function() {
$('.review-negative').hide();
$('.review-positive').show();
});

$('.reviews-negative').click(function() {
$('.review-positive').hide();
$('.review-negative').show();
});

});​ 
```

希望您能看到我的目标，感谢您的任何意见。

*编辑：jsfiddle：http: [//jsfiddle.net/TXywp/1/](http://jsfiddle.net/TXywp/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:18:21.970

我可以想到两种不同的方法来简化代码并使其更易于维护和发展：

1.  您可以根据条件通过算法推导出应隐藏或显示的项目。

2.  您可以创建一个条件和操作表，以便添加新条件和操作只是将新项目添加到表中。

3.  更改您的 HTML 以使其对应显示的内容进行自我描述。

下面是表驱动方法的样子：

```
$('.reviews, .deals').change(function() {

    var allDeals = '.review-negative.deals-50, .review-positive.deals-50, .review-positive.deals-25, .review-negative.deals-25';

    var table = [
        {rv: 'reviews-all', dv: 'deals-all', show: '.review-positive, .review-negative, .deals-25, .deals-50'},
        {rv: 'reviews-positive', dv: '50', show: '.review-positive.deals-50'},
        {rv: 'reviews-negative', dv: '50', show: '.review-negative.deals-50'},
        {rv: 'reviews-positive', dv: '25', show: '.review-positive.deals-25'}
        {rv: 'reviews-negative', dv: '25', show: '.review-negative.deals-25'},
        {rv: 'reviews-positive', dv: 'deals-all', show: '.review-positive.deals-50, .review-positive.deals-25'},
        {rv: 'reviews-negative', dv: 'deals-all', show: '.review-negative.deals-50, .review-negative.deals-25'},
        {rv: 'reviews-all', dv: '50', show: '.review-negative.deals-50, .review-positive.deals-50'},
        {rv: 'reviews-all', dv: '25', show: '.review-negative.deals-25, .review-positive.deals-25'}
    ];

    var reviewsVal = $('.reviews :selected').val();
    var dealsVal = $('.deals :selected').val();

    $(allDeals).hide();

    var item, found = false;
    for (var i = 0, len = table.length; i < len; i++) {
        item = table[i];
        if (dealsVal == item.dv && reviewsVal == item.rv) {
            $(item.show).show();
            found = true;
            break;
        }
    }

    if (!found) {
        $('.review-positive, .review-negative, .deals-25, .deals-50').show();
    } 
}); 
```

而且，这是一种算法方式，您只需向数组添加一个新条目即可添加新的交易价值。只有两个交易，这可能比表格驱动的方法工作更多，但如果您有 4 个或更多交易级别，这将更容易维护。

```
$('.reviews, .deals').change(function() {
    var deals = ['25', '50'];

    function addAllDeals(base, prefix) {
        for (var i = 0; i < deals.length; i++) {
            if (base) base += ", ";
            base += prefix + deals[i];
        }
        return(base);
    }

    function addSingleDeal(prefixes, deal) {
        var sel = [];
        for (var i = 0; i < prefixes.length; i++) {
            sel.push(prefixes[i] + deal);
        }
        return(sel.join(", ");
    }

    var reviewsVal = $('.reviews :selected').val();
    var dealsVal = $('.deals :selected').val();
    var itemsToShow = "";

    // hide everything to start
    var initialHide = addAllDeals("", ".review-positive.deals-");
    initialHide = addAllDeals(initialHide, ".review-negative.deals-");
    $(initialHide).hide();

    if (reviewsVal == 'reviews-all') {
        if (dealsVal == 'deals-all') {
            itemsToShow = addAllDeals(".review-positive, .review-negative", ".deals-");
        } else {
            itemsToShow = addSingleDeal([".review-negative.deals-", ".review-negative.deals-"], dealsVal);
        }
    } else if (reviewsVal == 'reviews-positive') {
        itemsToShow = '.review-positive.deals-' + dealsVal;
    } else if (reviewVal == 'reviews-negative') {
        itemsToShow = '.review-negative.deals-' + dealsVal;
    } else {
        itemsToShow = addAllDeals(".review-positive, .review-negative", ".deals-");
    }
}); 
```

如果您可以将您的 HTML（如我上面的第三个选项）更改为：

```
 <select class="deals">
    <option value="deals-all" data-base=".review-positive, .review-negative">All deals</option>
    <option value="50" data-base=".deals-50">$50</option>
    <option value="25" data-base=".deals-25">$25</option>
  </select>

  <select class="reviews">
    <option value="reviews-all" data-filter="">All reviews</option>
    <option value="reviews-positive" data-filter=".review-positive">Positive reviews</option>
    <option value="reviews-negative" data-filter=".review-negative">Negative reviews</option>
  </select> 
```

然后，您可以使用这个简单的 javascript：

```
 $('.reviews, .deals').change(function() {

    var dealsBase = $('.deals :selected').data("base");
    var reviewsFilter = $('.reviews :selected').data("filter");

     // hide all
     $(".review-negative, .review-positive").hide();

     // show the desired ones
     var base = $(dealsBase);
     if (reviewsFilter) {
         base = base.filter(reviewsFilter);
     }
     base.show();
}); 
```

警告：由于您没有提供代码/HTML 的有效 jsFiddle 示例来尝试此操作，因此此代码尚未运行或检查输入错误。但是，希望您了解这两种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:59:00.257

要获得动态结果，最好的方法是标准化命名。您首先标准化标准选择器，给它们一个通用类并区分 id 属性。还建议遵循值的命名约定。这会产生类似的东西

```
 <select id="deal" class="criteriaSelector">
      <option value="all">All deals</option>
      <option value="50">$50</option>
      <option value="25">$25</option>
    </select>

    <select id="review" class="criteriaSelector">
      <option value="all">All reviews</option>
      <option value="positive">Positive reviews</option>
      <option value="negative">Negative reviews</option>
    </select> 
```

然后，您将要过滤的所有项目都提供给过滤类之外的通用类。我将以*.item*为例。您还希望能够从选定的值和条件名称构造类，因此使用*.{id}-{value}*系统将完美地工作。这会给我们留下一些类似的东西

```
 <div class="item review-positive deal-25"></div>
    <div class="item review-negative deal-50"></div> 
```

此设置将允许我们构建动态和可扩展的代码：

```
 $('.criteriaSelector').change(function() {
      // Initialize criteria string
      var criteria = '';
      // Set value for all selector
      var showAll = true;

      // Iterate over all criteriaSelectors
      $('.criteriaSelector').each(function(){
        // Get value
        var val = $(this).children(':selected').val();
        // Check if this limits our results
        if(val !== 'all'){
          // Append selector to criteria
          criteria += '.' + $(this).attr('id') + '-' + val;
          // We don't want to show all results anymore
          showAll = false;
        }
      });
      // Check if results are limited somehow
      if(showAll){
        // No criterias were set so show all
        $('.item').show();
      } else {
        // Hide all items
        $('.item').hide();
        // Show the ones that were selected
        $(criteria).show();
      }

    }); 
```

现在，只要遵循命名约定，添加新的条件选择器就不需要更改这段代码。

# java - 模拟一个具有一些由随机值生成的字段的类？

> ID：12499283
> 
> 赞同：0
> 
> 时间：2012-09-19T16:49:30.447
> 
> 标签：java, hibernate, junit, easymock

我想知道如何使这个测试工作！下面是测试方法： 如您所见，correlationId 和 docFamilyUUid 是由 UUID 类随机生成的。基本上，getDocInfo 首先在 mockDao 上调用 findAllByDocId，如果返回 null，它会创建一个 docInfo 对象以保存到数据库中。

```
void testGetDocInfo()
    {
        def String docId = 'I19292800fe1911e0a849005056932b99'
        def List<DocInfo> expectedResult = [expectedDocInfo]
        expect(mockDocInfoDao.findAllByDocId(docId)).andReturn(null)
        mockDocInfoDao.save(new DocInfo())
        replay(mockDocInfoDao)
        docInfoServiceImpl.getDocInfo(docId)
        verify(mockDocInfoDao)
    } 
```

///////// DocInfoService类

```
 public final DocInfo createDocInfo(final String docId)
    {
        final DocInfo docInfo = new DocInfo();
        docInfo.setId(docId);
        docInfo.setDocFamilyUuid(UUIDGenerator.getInstance().getUuidAsString());
        docInfo.setCorrelationId(UUIDGenerator.getInstance().getUuidAsString());
        return docInfo;
    }
    /**
     * @param docId is the document Id
     * @return the list of DocInfo objects for a particular docId
     */
    public final List<DocInfo> findAllByDocId(final String docId)
    {
        return docInfoDao.findAllByDocId(docId);
    }

    /**
     * @param docId is the document Id
     * @return the list of DocInfo objects for a particular docId
     */
    public final List<DocInfo> getDocInfo(final String docId)
    {
        List<DocInfo> docInfoList = null;
        docInfoList = docInfoDao.findAllByDocId(docId);
        if (docInfoList == null)
        {
            docInfoList = new ArrayList<DocInfo>();
            DocInfo docInfo = createDocInfo(docId);
            docInfoDao.save(docInfo);
            docInfoList.add(docInfo);
        }

        return docInfoList;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:19:13.563

您应该使用部分模拟来仅模拟 createDocInfo 方法。这样你就可以从那里返回任何你想要的东西，特别是一个带有你选择的 id 的 DocInfo 实例。这样，您可以对 getDocInfo 的行为做出必要的断言（例如确保将具有相同 id 的实例传递给保存和添加）。

[您可以在此处](http://www.easymock.org/EasyMock3_0_Documentation.html)阅读有关部分模拟的信息。您没有说明您使用的是哪个版本的 EasyMock，所以我假设它不是太旧。

# jquery - 使动态添加的 DIV 可丢弃？

> ID：12499285
> 
> 赞同：4
> 
> 时间：2012-09-19T16:49:42.490
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我在将动态添加的 div 作为拖放操作的目标时遇到问题如果有人可以检查这个小提琴[http://jsfiddle.net/dgobrien123/FvG2J/embedded/result/](http://jsfiddle.net/dgobrien123/FvG2J/embedded/result/) 并可能帮助我找到我的错误。

在 document ready 方法中，droppable 是这样应用的：

```
 $(".droppable").droppable({
            activeClass: 'dragactive',
            hoverClass: 'drophover',
            drop: function(event, ui) {                    
                alert( this.id );
                $(this).addClass('drophighlight').find('p').text( '' + ui.draggable.children("span").text() + '');
            }
        }); 
```

以下是容器的添加方式：

```
 function addGroup() {
        counter = counter + 1;
        $("div#pcgroups").append("<div class='dropcontainer'><div class='droppable' id='GROUP" + counter + "'><p>PC GROUP #" + counter + "</p></div></div>");
        return counter;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:49:32.710

您遇到的问题是您在创建元素之前应用了 droppable。您可以在 addGroup() 方法中创建它们时应用它：

```
function addGroup() {
    counter = counter + 1;
    var x = $("<div class='dropcontainer'><div class='droppable' id='GROUP" + counter + "'><p>PC GROUP #" + counter + "</p></div></div>");

    $("div#pcgroups").append(x);
    x.droppable({
        activeClass: 'dragactive',
        hoverClass: 'drophover',
        drop: function(event, ui) {
            alert(this.id);
            $(this).addClass('drophighlight').find('p').text('' + ui.draggable.children("span").text() + '');
        }
    });
} 
```

更新小提琴：

[http://jsfiddle.net/johnkoer/FvG2J/28/](http://jsfiddle.net/johnkoer/FvG2J/28/)

# javascript - 如何比较谷歌电子表格中单元格之间的字符串数据？

> ID：12499287
> 
> 赞同：3
> 
> 时间：2012-09-19T16:49:44.460
> 
> 标签：javascript, google-apps-script, google-sheets, string-comparison

如果我将信息复制/粘贴到两个单元格中，我的脚本将正确运行并将单元格中的字符串与用户的正确行匹配，以便我可以查找他们的电子邮件。如果我让我的谷歌表单填写第一个单元格，但是两个单元格中的数据不再匹配。我可能忽略了一些关于比较字符串的明显内容，但希望有人能指出我正确的方向。这是我到目前为止的代码。

```
var rows = SpreadsheetApp.getActiveSheet().getLastRow();
var cell  = SpreadsheetApp.getActiveSheet().getRange(rows, 2);  
var value = cell.getValue().toString();
var ss = SpreadsheetApp.getActiveSpreadsheet();
ss.setActiveSheet(ss.getSheets()[1]);
var sheet;
var teacher;
var cc = "no match";
for(var h=1; h <= ss.getLastRow(); h++)
    {
      sheet = ss.getActiveSheet().getRange(h, 2);
       teacher = sheet.getValue().toString();
       if (value == teacher)
                 cc = ss.getActiveSheet().getRange(h, 1).getValue().toString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:58:51.663

尝试使用看门狗（点击行号）或一些消息框来查看会发生什么，即 Browser.msgBox(teacher); 不再测试 value 的值 ^^

并且可能不要使用“值”作为变量名，它可能会产生执行脚本的问题。

# android - 如何将图像从drawable传输到sdcard中的文件夹？

> ID：12499288
> 
> 赞同：1
> 
> 时间：2012-09-19T16:49:45.880
> 
> 标签：android, image, drawable

有没有办法将图像从 res/drawable 文件夹传输到 sdcard 中的文件夹？并且仍然获得图片的质量和细节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:52:18.203

您必须使用[`BitmapFactory.decodeResource()`](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource(android.content.res.Resources,%20int))，通过将您的项目的资源 ID 传递给它，首先生成一个`Bitmap`.

```
Bitmap myBitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.mybitmap); 
```

[然后，您可以使用此线程中的答案](https://stackoverflow.com/a/673014/1438733)将其保存到存储卡中。

像这样的东西：

```
try {
    FileOutputStream out = new FileOutputStream(filename);
    myBitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
} catch (Exception e) {
    e.printStackTrace();
} 
```

注意：@RaghavSood 在他的评论中是正确的；你真的没有理由需要这样做。您可以在运行时加载可绘制资源，而不是消耗存储卡上的空间。

# asp.net - asp 控制块不会让我嵌套代码块。有道理，但我该如何解决

> ID：12499298
> 
> 赞同：1
> 
> 时间：2012-09-19T16:50:08.390
> 
> 标签：asp.net, user-controls

```
 <tr runat="server" >
   <th><%= Resources.bicweb_resources.BORDER_STYLE %></th>
   <td>
     <asp:DropDownList runat="server" id = "borderContent" class = "attribute" >
       <asp:ListItem value = "NULL">
       </asp:ListItem>
       <asp:ListItem value = "0" >
         <%= Resources.bicweb_resources.FALSE %>
       </asp:ListItem>
       <asp:ListItem value = "1">
         <%= Resources.bicweb_resources.TRUE %>
       </asp:ListItem>
     </asp:DropDownList>
   </td>
 </tr> 
```

你可以看到我在一个...

ListItems 不是 runatserver，所以我在想一种方法可以将 3 个项目放置在它们应该在的位置。

该错误来自尝试呈现一个控件，该控件内部有一个块以在服务器时间呈现。我试图弄清楚我是否应该选择服务器端的下拉列表，然后遍历子控件或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:38:43.550

您的代码块对于资源文件是错误的。

您的代码块：

```
 <%= Resources.bicweb_resouces.TRUE %> 
```

它应该是什么：

```
 <%$ Resources: bicweb_resources, TRUE %> 
```

除了将它们嵌套在标签中，您还可以使用控件的 TEXT 属性来填充数据。

信息来自： http: [//msdn.microsoft.com/en-us/library/d5bd1tad (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d5bd1tad(v=vs.100).aspx)

# javascript - 按下时更改按钮的背景颜色

> ID：12499300
> 
> 赞同：1
> 
> 时间：2012-09-19T16:50:19.943
> 
> 标签：javascript, jquery, html

我知道这个问题对你们来说可能听起来很愚蠢，但我是一个初学者，所以需要一些专家的帮助，我想问一下，按下按钮时是否可以改变背景颜色，我的意思是当点击它时它会改变为不同的背景-color 和释放时设置为默认值（通过鼠标按下时）。我正在尝试，但是当我将功能设置为在“按键”上触发时，该功能不会触发，但是当我使用“点击”时，它可以工作，但在释放时不会更改为默认值...请帮助我..

javascript/jquery：

```
function initAll(){
$("#submitBtn").on('keypress', sendMessage);
}

function sendMessage(){
    $("#submitBtn").css('background-color', 'Red');
} 
```

html:

```
<input type="button" id="submitBtn" name="submitBtnnm" value="Send" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T16:53:51.320

你不需要 JS - 只是`:active`状态

```
#submitBtn:active {
    background: red;
} 
```

[**演示**](http://jsfiddle.net/7VURa/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:00:00.037

Have you tried the following?:

```
$('document').ready(function() {
    $('#submitBtn').mousedown(function() {
        $('#submitBtn').css('background-color', 'Red');
    }).mouseup(function() {
        $('#submitBtn').css('background-color', 'Blue');
    });
}); 
```

Basically, when the user presses the button it turns red, and when the user stops pressing it it turns blue.

Hope this helps. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:56:41.230

您应该像这样使用 css 类，并在单击按钮时使用 jquery 将类添加到 body 标签

```
.changeback{
background-color: #333333;
background-image: url('images/background9.jpg');
 } 
```

jquery代码应该是这样的

```
$("#send").click(function(){
  $('body').addClass('changeback');
}): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:53:10.210

我会这样做（在我看来更容易阅读）：

```
function initAll() {
   $("#submitBtn").click(sendMessage);
}

function sendMessage () {
   $("#submitBtn").css('background-color', 'red');
} 
```

* * *

确保您`initAll()`在`$(document).ready()`. 否则，当页面上没有匹配的元素时，代码可能会运行。

如果您需要更多建议，请发表评论！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T16:53:44.313

试试 jQuery mousedown 和 mouseup 函数：[http](http://api.jquery.com/mousedown/) ://api.jquery.com/mousedown/和[http://api.jquery.com/mouseup/](http://api.jquery.com/mouseup/)

```
$(document).ready(function(){
  $("button").mousedown(function(){
    $(this).css("background", "red");        
  });
  $("button").mouseup(function(){
    $(this).css("background", "green");        
  });    
}); 
```

[http://jsfiddle.net/CdzSB/](http://jsfiddle.net/CdzSB/)

# java - 对 JTable 进行递归调用时出现 ArrayIndexOutOfBoundsException

> ID：12499304
> 
> 赞同：4
> 
> 时间：2012-09-19T16:50:31.543
> 
> 标签：java, xml, swing, jtable, spreadsheet

对于这篇文章的篇幅，我提前道歉，但我已经对我的程序的设计和实现进行了相当深入的描述。

## 背景

我目前正在为大学三年级计算机科学课程做一个小组（我们两个）编程项目。该程序的目标是实质上使用电子表格程序来表示 XML 文件数据，其中每个 XML 文件都是历史记录。

## 设计：

电子表格中的每条记录（行）对应于一个 XML 文件，记录的列对应于 XML 文件中的元素。我们通过将单元格组件设置为一个按钮来处理重复的元素（即具有相同标签的元素），单击该按钮时，会打开另一个电子表格，其中包含所有具有重复名称的元素的列表（对于相应的文件）。子元素的处理方式类似，如果一个元素有子元素，则 XML 文件中的相应单元格包含一个按钮，单击该按钮时，会打开一个包含该元素所有子元素的电子表格。

## 执行：

我们系统的实现是用 Java 编写的。我们的主类（名称为 SpreadSheetGUI）扩展了 JFrame，我们在其中添加了一个 JTable（使用默认表模型）。我们有三种不同的单元格渲染器：一种用于单元格只有文本时，一种用于单元格有按钮时，另一种用于单元格中有文本和按钮时。当单击按钮打开一个新的电子表格（对于子元素或重复的元素名称）时，我们会递归调用电子表格构造函数，然后创建子电子表格。渲染器按以下顺序添加：如果单元格对应于具有多次使用标签的元素，则将按钮添加到单元格中，否则如果单元格对应于具有子节点的元素，我们将添加文本和按钮到单元格，如果单元格只有文本，我们将文本添加到该单元格。

GUI的构造函数是这样的

```
 /**
     * Parameterised constructor
     * @param dataVector - Vector of vectors of objects that represent the cell values
     * @param columnNames - The vector of objects that represent the column names
     */
    @SuppressWarnings("unchecked")
    public SpreadSheetGUI(Vector<Vector<LevelElementT>> dataVector, Vector<String> columnNames, boolean hasRepeatedColumns, boolean initialFrame)
    {           
        this.hasRepeatedColumns = hasRepeatedColumns;
        this.initialFrame = initialFrame;

        if (initialFrame)
            populateTable(dataVector, columnNames);

        else if (!hasRepeatedColumns)
            populateTable((Vector<Vector<LevelElementT>>)findRepeatedColumns(dataVector).get(0),
                    (Vector<String>)findRepeatedColumns(dataVector).get(1));

        else
            populateTable(dataVector, columnNames);
        //Get repeated column names and add to repeated column hashmap
        //parseElements(dataVector);
    } 
```

其中 populateTable 方法初始化表模型。正如我之前所说，我们的单元格有三个不同的渲染器和编辑器，其中两个渲染器中有按钮，单击时会创建一个新的电子表格（即我们调用电子表格构造函数），例如在我们的一个单元格编辑器具有以下代码

```
 public Object getCellEditorValue() 
          {
              if (isPushed)
              {
                    //will have the child elements of the current cell element
                Vector<Vector<LevelElementT>> children = new Vector<Vector<LevelElementT>>();
                children.add(new Vector<LevelElementT>());

                List<Element> tempChildren = elements.get(row).get(column).getChildren();

                for (Element child : tempChildren)
                    children.get(0).add(new LevelElementT(child));
                //creates our subspreadsheet
                new Thread(new SpreadSheetGUI(children, new Vector<String>(), false, false)).start();
              }

              isPushed = false;
              return new String(bLabel);
          } 
```

LevelElementT 只是我们创建的一个类，它扩展了覆盖 toString 方法的 Element（在 JDOM2 包中找到）。

## 问题：

正如我之前提到的，我们创建了一组渲染器来处理向单元格添加按钮，但似乎在创建“子”电子表格时，渲染器正在尝试根据子电子表格编号渲染超出范围的单元格行和列，并抛出数组索引超出范围异常。

更具体地说，错误是在从 populateTable() 方法中获取的以下代码中引发的。我使用 defaultTableModel 的实例初始化 JTable，并设置方法来确定每个组件的渲染器

```
 table = new JTable(tableModel)
        {
            private static final long serialVersionUID = 1L;

            public TableCellRenderer getCellRenderer(int row, int column)
            {
                //System.out.println(elements.get(row).get(column).getChildren().size());
                if (column == 0)
                {
                    Class<? extends Object> cellClass = getValueAt(row, column).getClass();
                    return getDefaultRenderer(cellClass);
                }
                else if(repeatedColumns.containsKey(table.getColumnModel().getColumn(column).getIdentifier() + " " + elements.get(row).get(0).getText()))
                        return getDefaultRenderer(JButton.class);

                else if(!elements.get(row).get(column).getChildren().isEmpty())
                        return getDefaultRenderer(JPanel.class);

                else 
                        return getDefaultRenderer(JTextArea.class);
            }

            public TableCellEditor getCellEditor(int row, int column)
            {
                if (column == 0)
                {
                    Class<? extends Object> cellClass = getValueAt(row, column).getClass();
                    return getDefaultEditor(cellClass);
                }
                else if(repeatedColumns.containsKey(table.getColumnModel().getColumn(column).getIdentifier() + " " + elements.get(row).get(0).getText()))
                        return getDefaultEditor(JButton.class);

                else if(!elements.get(row).get(column).getChildren().isEmpty())
                        return getDefaultEditor(JPanel.class);

                else 
                        return getDefaultEditor(JTextArea.class);
            }
        }; 
```

错误是在 if 语句中引发的（取决于您单击的按钮），这绝对不是因为元素（levelElements 的二维向量）或重复列（以字符串为键和元素向量的哈希表）价值）。

* * *

我猜这个问题源于我们对电子表格构造函数进行递归调用这一事实。也有朋友提出这个问题可能是默认表模型导致的，要不要考虑创建自定义表模型？

我没有包含我的代码，因为它相当长（总共大约 2000 行），但我愿意根据要求提供。我一直在为此绞尽脑汁，但完全没有找到与此问题相关的任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:34:37.400

由于没有提供代码，我只是猜测：

*   如果递归调用没有正确返回，它可能会导致这种情况。我们不知道你到底在做什么...

*   这种现象也可能是由于意外将父表的单元格传递给渲染器，而不是子表的单元格。

我会为这些调试。但同样，如果没有代码片段，我会说真的很难回答。

希望这会有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:31:41.113

`new SpreadSheetGUI(children, new Vector<String>(), false, false)`是可疑的（仅猜测），因为之后新的 Vector 无法正常访问。

没有`.get(row).get(column)`关于索引检查的规定。特别是每一行是否有足够的字符串。

DefaultTableModel 就足够了。

Vector虽然是线程安全的，但已经很老了；使用具有并发性的 List / ArrayList 给人留下更好的印象：[CopyOnWriteArrayList](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)。

已经存在 XML 表模型和树表模型。我不知道您对编程的要求。

堆栈跟踪、断点、调试、IDE 应该会有所帮助。NetBeans IDE 很容易，eclipse IDE 普及更广。

# php - 如何使用 curl 和 php 解析使用 `__dopostback` ajax 调用的网站

> ID：12499306
> 
> 赞同：1
> 
> 时间：2012-09-19T16:50:55.203
> 
> 标签：php, parsing, dopostback

在有人说什么或“跳”之前，我想说我已经读过：

*   [关于如何抓取 __doPostBack('...'); 后面的页面的任何想法？](https://stackoverflow.com/questions/5658801/any-idea-on-how-to-scrape-pages-which-are-behind-dopostback)
*   [DotNetNuke，PHP，使用 curl 模拟远程回发](https://stackoverflow.com/questions/3896852/dotnetnuke-php-simulating-a-remote-postback-using-curl)
*   [使用 JavaScript 回发抓取 HTML](https://stackoverflow.com/questions/11216910/scraping-html-with-javascript-postbacks)
*   [cURL 将数据发布到 asp.net 页面](https://stackoverflow.com/questions/5384655/curl-post-data-to-asp-net-page)
*   [http://techclimber.blogspot.com.es/2009/03/php-curl-and-aspnet.html](http://techclimber.blogspot.com.es/2009/03/php-curl-and-aspnet.html)

这是我的功能：

```
 function UolgetHtmlfromAjaxCallback($a_Params,$url) {

  $EVENTTARGET = $this->UolgetAtributoEventTarget($a_Params['s_EventTarget']);
  $s_smMaster = 'ctl00$cphSite$upModelo|'.$entries['target'];
  $VIEWSTATE = urlencode($a_Params['s_ViewState']);

  $options = array(
    CURLOPT_RETURNTRANSFER => true, // return web page
    CURLOPT_HEADER => false, // don't return headers
    CURLOPT_FOLLOWLOCATION => true, // follow redirects
    CURLOPT_ENCODING => "", // handle all encodings
    CURLOPT_USERAGENT => "spider", // who am i
    CURLOPT_AUTOREFERER => true, // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120, // timeout on connect
    CURLOPT_TIMEOUT => 120, // timeout on response
    CURLOPT_MAXREDIRS => 10, // stop after 10 redirects
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => 'ct100%24smMaster='.urldecode($s_smMaster).
                          '&__EVENTTARGET='.urlencode($EVENTTARGET['target']).
                          '&__EVENTARGUMENT='.urlencode('').
                          '&__EVENTVALIDATION='.urlencode($s_Eventvalidation).
                          '&__VIEWSTATE='.$VIEWSTATE.
                          '&ct100%24txtBuscaNome='.$a_Params['ctl00_txtBuscaNome'].
                          '&__ASYNCPOST=true'
                          );

  $ch = curl_init( $url );
  curl_setopt_array( $ch, $options );
  $result = curl_exec ($ch);

  return $result;
  } 
```

`$VIEWSTATE`没关系，并且`$EVENTTARGET`是具有这些值的数组：

```
Array ( 
 [id] =>          ctl00_cphSite_fichaTecnicaEditorial_rptCarrosFichaTecnica_ctl00_lbtnFichaTecnica 
 [target] => ctl00$cphSite$fichaTecnicaEditorial$rptCarrosFichaTecnica$ctl00$lbtnFichaTecnica ) 
```

我正在尝试使用此代码来抓取此网站：

[http://comparecar.uol.com.br/Modelo/Volvo-Xc60](http://comparecar.uol.com.br/Modelo/Volvo-Xc60)

我得到了网站，但没有得到汽车的信息。

我编辑自己的信息。

我正在使用 Tamper Data，发现帖子使用了不同的参数：

*   `ctl00%24smMaster`
*   `__EVENTTARGET`
*   `__EVENTARGUMENT`
*   `__VIEWSTATE`
*   `__EVENTVALIDATION`
*   `ctl00%24txtBuscaNome`
*   `__ASYNCPOST`

并以“=”结束

# sql - MDF 文件安全、锁定和未经授权的访问

> ID：12499309
> 
> 赞同：1
> 
> 时间：2012-09-19T16:51:12.490
> 
> 标签：sql, sql-server-2008-r2

我在我的应用程序中使用了 SQL Server 2008 R2 数据库，现在我想为我的朋友安装该应用程序。如何阻止对我的数据库表和存储过程的访问？

我删除了 Windows 身份验证和 SQL Server Management Studio，只需使用我自己的用户登录或通过！但是，如果他在其他系统的其他 Management Studio 中打开我的数据库文件会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:56:49.803

您的用户*永远不*应该拥有对 MDF 文件的访问权限（ACL 权限）。一点也不。相反，他们应该拥有数据库访问权限，并且他们的帐户应该设置为执行您希望他们执行的操作，而不是执行您不执行的操作。

这是一个非常基本的问题，真的；您需要研究的是 SQL Server 安全性，因此您可以弄清楚如何以及如何保护用户的数据库。但正如我上面提到的，您还需要适当的文件安全性。

最后......你的问题让我想知道；您知道 SQL Server 不一定要安装在每个*客户端*系统上，对吧？您当然可以这样做，但它是一种*服务器*产品。如果您将它安装在用户拥有管理员权限的计算机上，那么游戏就已经结束了，真的。

# .net - SQLBulkCopy vs DataAdapter 用于插入/更新 10lcs 记录

> ID：12499314
> 
> 赞同：0
> 
> 时间：2012-09-19T16:51:24.970
> 
> 标签：.net, vb.net, performance, sqlbulkcopy, dataadapter

我有大约 1,000,000 多条记录要插入到数据库中。

应更新具有相同 ID 的记录，否则插入

更新/插入逻辑写在存储过程中

我正在使用 DataAdapter.Update 方法来完成这项工作。

这是问题所在。

一个 DataTable 不超过 65,000 条记录。

插入/更新每秒只有 60 条记录。

我怎样才能提高这种性能，我可以在这里使用 SqlBulkCopy，它可以一起做这个更新/插入吗？会有什么表现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:09:16.540

您是否将记录加载到 DataTable 中只是为了插入更新？

如果是这样，您最好一次直接调用 SP 并跳过 DataTable。

或者您可以使用 TVP 和 IEnumerable SqlDataRecord，然后您将不限于 65000。

[使用 IEnumerable SqlDataRecord 的示例](https://stackoverflow.com/questions/12467431/table-valued-parameter-sending-data-in-small-chunks/12468098#12468098)

# google-bigquery - BigQuery：QUANTILES 的 GROUP BY 子句

> ID：12499316
> 
> 赞同：9
> 
> 时间：2012-09-19T16:51:40.613
> 
> 标签：google-bigquery

根据 bigquery 查询参考，目前分位数不允许按另一列进行任何类型的分组。我主要对**按某个列分组的中位数**感兴趣。我现在看到的唯一解决方法是为每个不同的组成员生成一个分位数查询，其中组成员是 where 子句中的条件。

例如，如果我想获得所需的结果，我对第 y 列中的每个不同行使用以下查询。

```
SELECT QUANTILE( <column-x>, 1001)
FROM <table>
WHERE 
    <column-y> == <each distinct row in column-y> 
```

1.  大型查询团队是否计划在未来提供一些功能以允许对分位数进行分组？
2.  有没有更好的方法来获得我想要的东西？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-15T00:30:06.320

使用最近发布的 percentile_cont() 窗口函数，您可以获得中位数。

看公告博文中的例子：

[http://googlecloudplatform.blogspot.com/2013/06/google-bigquery-bigger-faster-smarter-analytics-functions.html](http://googlecloudplatform.blogspot.com/2013/06/google-bigquery-bigger-faster-smarter-analytics-functions.html)

```
SELECT MAX(median) AS median, room FROM (
  SELECT percentile_cont(0.5) OVER (PARTITION BY room ORDER BY data) AS median, room
  FROM [io_sensor_data.moscone_io13]
  WHERE sensortype='temperature'
)
GROUP BY room 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:25:05.757

虽然有计算分位数的有效算法，但它们在某种程度上是内存密集型的 - 尝试在单个查询中进行多个分位数计算会变得昂贵。

1.  有改进 QUANTILES 的计划，但我不知道时间表是什么。
2.  你需要中位数吗？您可以过滤异常值并对其余值进行平均吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:30:40.027

`order`如果您的每组大小是固定的，您可以使用`nest`和的组合来破解它`nth`。例如，如果 的`f2`每个值有 9 个不同的值`f1`，对于中位数：

```
在记录中选择 f1,nth(5,f2) (
  选择 f1,nest(f2) f2 从 (
    从表中选择 f1、f2
    按 f1,f2 分组
    按 f2 订购
  ) 按 f1 分组
);

```

不确定子查询中的排序顺序是否保证在第二个中存在`group`，但它在我尝试的一个简单测试中起作用。

# java - 如何在 Java 中获得英国夏令时偏移量 (BST)

> ID：12499318
> 
> 赞同：10
> 
> 时间：2012-09-19T16:51:45.533
> 
> 标签：java, timezone

在英国，我想获得 UTC/GMT 的当前偏移量。目前偏移量是 1 小时，但似乎没有办法找到它。

代码

```
 TimeZone timeZone = TimeZone.getDefault();
    logger.debug("Timezone ID is '" + timeZone.getID() + "'");
    if (timeZone.getID().equals("GMT")) {
        timeZone = TimeZone.getTimeZone("Europe/London");
        logger.debug("New timezone is '" + timeZone.getID() + "'");
    }
    Long eventDateMillis = Long.parseLong(eventDateValue.getKeyValue());
    int timezoneOffset = timeZone.getOffset(eventDateMillis);
    logger.debug("Offset for " + eventDateValue + "(" + eventDateMillis + ") using timezone " + timeZone.getDisplayName() + " is " + timezoneOffset); 
```

返回调试输出

```
Wed 2012/09/19 16:38:19.503|Debug|DataManagement|Timezone ID is 'GMT'
Wed 2012/09/19 16:38:19.503|Debug|DataManagement|New timezone is 'GMT'
Wed 2012/09/19 16:38:19.557|Debug|DataManagement|Offset for 18 Sep 2012 09:00(1347958800000) using timezone Greenwich Mean Time is 0 
```

换句话说，时区“GMT”返回的偏移量为零，我找不到如何将其设置为确实返回正确偏移量的东西。

如果有人可以为 JodaTime 提供一个工作代码示例，那就可以了，但我真的很想避免仅仅为了应该是一个单行代码而安装一个单独的库。

Java版本是7。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T17:09:51.457

> 换句话说，时区“GMT”返回的偏移量为零，我找不到如何将其设置为确实返回正确偏移量的东西。

0*是*GMT 的正确偏移量，永久。

您想要“欧洲/伦敦”，这是在 GMT 和 BST 之间切换的时区。

编辑：我最初并没有注意到您正在*尝试*获得欧洲/伦敦。看起来您的 JVM 使用的时区数据库基本上是一团糟。您可以尝试修复*它*，也可以简单地使用带有自己的 tzdb 副本的 Joda Time。示例代码：

```
DateTimeZone zone = DateTimeZone.forID("Europe/London");
long offset = zone.getOffset(new Instant());
System.out.println(offset); // 3600000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:17:11.827

我自己也遇到过这个。

我试过 TimeZone.getTimeZone("London"); 它奏效了。

不，我不知道为什么 - 'London' 不是 TimeZone 返回的 ID 之一......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-23T18:51:58.253

# *java.time*

[`java.time.ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)旨在自动调整时区偏移。

**演示：**

```
import java.time.LocalDate;
import java.time.LocalTime;
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        LocalTime time = LocalTime.of(10, 20);
        ZoneId zoneId = ZoneId.of("Europe/London");

        // A winter date-time
        ZonedDateTime zdtWinter = ZonedDateTime.of(LocalDate.of(2020, 11, 22), time, zoneId);
        System.out.println(zdtWinter);

        // A summer date-time
        ZonedDateTime zdtSummer = ZonedDateTime.of(LocalDate.of(2021, 07, 22), time, zoneId);
        System.out.println(zdtSummer);
    }
} 
```

**输出：**

```
2020-11-22T10:20Z[Europe/London]
2021-07-22T10:20+01:00[Europe/London] 
```

[`ONLINE DEMO`](https://ideone.com/z5CVjZ)

`Z`输出中的 是零时区偏移的时[区指示符](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)。它代表 Zulu 并指定`Etc/UTC`时区（时区偏移量为`+00:00`小时）。

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。但是，无论出于何种原因，如果您需要将 的对象转换为`ZonedDateTime`的对象`java.util.Date`，您可以执行以下操作：

```
Date date = Date.from(zdtSummer.toInstant()); 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-05T15:39:33.697

使用 timezone.getOffset(0)，而不是 timezone.getOffset(eventDateMillis)。

这将为您提供截至格林威治标准时间 1970 年 1 月 1 日的偏移量，在欧洲/伦敦的情况下为 3600000，由于威尔士和北爱尔兰的历史问题而不是零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-21T17:51:02.770

这让我有了窍门：

```
String zone = "Europe/London";
int plusHoursGMT = TimeZone.getTimeZone(zone).getRawOffset() / 3600000;
assertThat(plusHoursGMT, is(0)); 
```

# c - 从 C-DLL 函数读取 MATLAB 中的 int 和 strings 数组

> ID：12499322
> 
> 赞同：2
> 
> 时间：2012-09-19T16:51:54.223
> 
> 标签：c, matlab, pointers, dll, shared-libraries

我正在尝试在 MATLAB 中读取以下函数的 int 和字符串数组：

```
int DLLEXPORT getdata(int *index, char *id[]) 
```

在 CI 中，只需执行以下代码即可：

```
int count;       
int *index = calloc(MAXLINE, sizeof(int));
char **id = calloc(MAXLINE, sizeof(char*));

for (for i = 0; i < MAXLINE; ++i)                      
       id[i] = malloc(MAXID);

errcode = getdata(index, id); 
```

在 MATLAB 中，我正在尝试以下代码，但没有成功：

```
errorcode = libpointer('int32');
index = libpointer('int32Ptr');
id = libpointer('stringPtrPtr');

[errorcode, index, id] = calllib('mylib','getdata', index, id); 
```

我已经尝试初始化 libpointers 并且收到相同的消息“检测到分段违规”。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:41:26.810

您肯定需要初始化您的指针 - 现在它们指向无处，它们被初始化为 0。这很可能导致段错误。如果您尝试初始化它们，那么您一定做错了。试试看。像这样

```
index = libpointer('int32Ptr', [1 2 3 4]);
id = libpointer('stringPtrPtr', {'asdfasdf', 'asdfasdf'}); 
```

您还可以传递普通的 matlab 数组，而不是制作 libpointer：

```
[errorcode, index, id] = calllib('mylib','getdata', [1 2 3 4], {'asdfasdf', 'asdfasdf'}); 
```

[您可以在此处](http://www.mathworks.se/help/matlab/matlab_external/passing-arguments-to-shared-library-functions.html#bqgcbv0-1)找到有关 matlab 类型和相应本机类型的信息。

**编辑**这是一个简单的共享库函数，它接受您的输入（您在下面的评论）并使用 mexPrintf 在屏幕上打印一个字符串

```
#include <string.h>
#include <mex.h>
void testfun(int *index, char* id[]){
  int idx0  = index[0];
  mexPrintf("printing string %d: id[0] %s\n", idx0, id[idx0]);
} 
```

该函数使用整数数组中的第一个值（在您的情况下为 index[0]）来打印字符串数组（id[index[0]]）中的指定字符串。输出是

```
printing string 0: id[0] 01234567890123456789012345678901 
```

所以它有效，试试吧。请记住，您还必须向 loadlibrary 提供相应的头文件！

如果您可以正确执行上述操作，那么您提供给 getdata 的数据很可能是错误的，并且您一定在某处遇到了段错误。也许您以某种方式修改了输入参数？例如创建非NULL 终止的字符串？

# git - 为什么新头和旧头使用 git reflog 具有相同的 sha id？

> ID：12499327
> 
> 赞同：0
> 
> 时间：2012-09-19T16:52:10.070
> 
> 标签：git, version-control, git-reflog

我认为这应该是两个不同的 HEADS，所以为什么它们对应相同的 sha 值，即 2aad8cb ...

```
git reflog
2aad8cb HEAD@{0}: checkout: moving from master to xxx_master   
2aad8cb HEAD@{1}: clone: from git@github.com:xxx/xxx.git 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:14:08.597

`git branch newbranch`当您第一次通过or创建新分支时`git checkout -b newbranch master`，`newbranch`将指向与分支点完全相同的提交（无论 HEAD 在第一个示例中还是`master`在第二个示例中）。因此，例如，看到两者具有相同的 SHA 是很正常`master`的`newbranch`。当您在任一分支上创建新提交时，该分支将指向新提交，该新提交将以前的值作为其父级（过度简化以避免讨论合并等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:01:52.900

那是正常的行为。reflog 会跟踪 head 曾经在哪里以及分支曾经在哪里。这样做

```
git checkout master
git checkout experiment
git checkout master
git checkout experiment
git checkout master
git checkout experiment 
```

最终会得到

```
2aad8cb HEAD@{0}: checkout: moving from master to experiment
d8cbf4b HEAD@{1}: checkout: moving from experiment to master
2aad8cb HEAD@{2}: checkout: moving from master to experiment
d8cbf4b HEAD@{3}: checkout: moving from experiment to master
2aad8cb HEAD@{4}: checkout: moving from master to experiment
d8cbf4b HEAD@{5}: checkout: moving from experiment to master 
```

在 reflog 中。您可以看到重复的值。

在这里，我使用`git checkout -`了几次在检查 SHA-1（分离头）和 master 之间切换：

```
5016d9e (HEAD, origin/master, master) HEAD@{0}: checkout: moving from 5016d9e82379923c21268e73e4dad3122a5639ac to master
5016d9e (HEAD, origin/master, master) HEAD@{1}: checkout: moving from master to 5016d9e82379923c21268e73e4dad3122a5639ac
5016d9e (HEAD, origin/master, master) HEAD@{2}: checkout: moving from 5016d9e82379923c21268e73e4dad3122a5639ac to master
5016d9e (HEAD, origin/master, master) HEAD@{3}: checkout: moving from master to 5016d9e82379923c21268e73e4dad3122a5639ac
5016d9e (HEAD, origin/master, master) HEAD@{4}: checkout: moving from 5016d9e82379923c21268e73e4dad3122a5639ac to master 
```

您可以看到相同的 SHA1 条目重复。

# javascript - 使用 jQuery 或 JavaScript 绑定到自定义 CSS 动画结束事件？

> ID：12499335
> 
> 赞同：6
> 
> 时间：2012-09-19T16:52:30.803
> 
> 标签：javascript, jquery, css, webkit, mobile-safari

我们对同一个对象有多个动画。当每个动画结束时，我们需要采取不同的动作。

现在，我们绑定到**webkitAnimationEnd**事件，并使用粗糙的 if/then 语句来不同地处理每个动画。

有没有办法从本质上创建自定义**webkitAnimationEnd**事件，允许我们在特定动画结束时触发特定事件处理程序？例如，animation1 结束时触发**handler1** **，** animation2**结束**时触发**handler2**。

 **我们正在为 Webkit 浏览器构建，特别是 Mobile Safari。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:17:04.260

对于一个简单的事件触发器，您可以将一个函数传递给 jQuery 的`trigger()`方法，并使用该函数的返回值来调用触发器特定事件（然后可以监听：

```
function animEndTrigger(e) {
    if (!e) {
        return false;
    }
    else {
        var animName = e.originalEvent.animationName;
        return animName + 'FunctionTrigger';
    }
}

$('body').on('bgAnimFunctionTrigger fontSizeFunctionTrigger', function(e){
    console.log(e);
});

$('div').on('webkitAnimationEnd', function(e) {
    $(this).trigger(animEndTrigger(e));
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3xXaE/5/)。

当然，您也可以使用被调用函数来触发事件本身或评估传递的参数以确定是否完全返回事件：

评估触发特定事件的一种方法是使用对象：

```
var animations = {
    'bgAnim': 'aParticularEvent'
};

function animEndTrigger(e) {
    if (!e) {
        return false;
    }
    else {
        var animName = e.originalEvent.animationName;
        return animations[animName] ? animations[animName] : false;
    }
}

$('body').on('aParticularEvent', function(e) {
    console.log(e);
});

$('div').on('webkitAnimationEnd', function(e) {
    $(this).trigger(animEndTrigger(e));
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3xXaE/6/)。

但是，在这种情况下，`return false`应该更改 以避免提供错误`Uncaught TypeError: Object false has no method 'indexOf'`（我还没有打扰，以解释）。

以下导致被调用函数（`animEndTrigger()`）直接`trigger()`自定义事件（需要绑定`trigger()`方法的元素）并且还避免了`Uncaught TypeError`上述情况：

```
var animations = {
    'bgAnim': 'aParticularEvent'
};

function animEndTrigger(e, el) {
    if (!e || !el) {
        return false;
    }
    else {
        var animName = e.originalEvent.animationName;
        if (animations[animName]) {
            $(el).trigger(animations[animName]);
        }
    }
}

$('body').on('aParticularEvent', function(e) {
    console.log(e);
});

$('div').on('webkitAnimationEnd', function(e) {
    animEndTrigger(e, this);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/3xXaE/7/)。

当然，您仍然有效地使用 an`if`来执行评估，所以我不能特别确定这是否比您自己已经实现的解决方案更整洁。**

# iis - TFS2012/IIS7.5和Windows授权

> ID：12499340
> 
> 赞同：0
> 
> 时间：2012-09-19T16:52:58.043
> 
> 标签：iis, iis-7.5

我开发了与 TFS2012 合作的网络应用程序。在我的本地机器上它工作正常，但是当我在服务器上部署时，我得到以下异常：

[WebException：远程服务器返回错误：(401) Unauthorized。] System.Net.HttpWebRequest.GetResponse() +6440920 Microsoft.TeamFoundation.Client.Channels.TfsHttpWebRequest.SendRequestAndGetResponse(HttpWebRequest webRequest, WebException& webException) +195

我连接到 TFS 代码：

```
 _collection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://xxx/tfs/TestPrjects/"));
            _collection.EnsureAuthenticated();
            _store = _collection.GetService<WorkItemStore>(); 
```

我的网络配置：

```
<system.web>
  <customErrors mode="Off"></customErrors>
  <authentication mode="Windows"/>
  ...
<system.web> 
```

在 ISS 我激活 Windows 授权：

![在此处输入图像描述](../Images/a0b2030e4e27c04d50f450be194b21bf.png)

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:52:30.890

您用于访问 TFS 的详细信息不正确。

它在您的本地机器上运行的原因是因为网络服务器正在以您的身份运行，您可以访问 TFS。在 IIS 服务器上，它作为应用程序池用户运行，该用户无权访问。

## 潜在的解决方案

**以有权访问 TFS 的用户身份运行应用程序池（或授予当前用户访问权限）**
这对于只读访问是可以的，但如果您要写回项目，您可能不希望沿着这条路线走

**启用委托，以便连接到 TFS 的代码以当前经过身份验证的 Windows 用户身份运行。** 这很难做到，并且只能在 Internet Explorer 中开箱即用。Firefox 用户可以更改设置，Chrome 用户需要使用命令行开关启动 chrome。

在使用 TFS 的代码周围包装 using(WindowsIdentity.GetCurrent().Impersonate()) {} 并确保您使用 CredentialCache.DefaultNetworkCredentials 连接到 TFS。

**使用 TFS 服务器 API** 调皮一点，使用服务器而不是客户端 API。服务器 API 直接写入数据库，不需要模拟用户。我非常怀疑这是一个受支持的路径，你不会找到太多关于它的信息。但是，它仍然需要以有权访问数据库的用户身份运行（如选项 1，但支持作为 windows authed 用户进行更新）

# java - 忽略的异常：java.security.PrivilegedActionException：Java Applet 中的 java.lang.reflect.InvocationTargetException

> ID：12499342
> 
> 赞同：0
> 
> 时间：2012-09-19T16:53:03.033
> 
> 标签：java, eclipse, exception, applet, invocationtargetexception

我创建了一个操作 JSP 网页表单字段的 Java Applet。当然，JSP 调用 Java Applet。

这是我在 JSP 上运行 Java Applet 时在 Java 控制台中遇到的错误：

```
Ignored exception: java.security.PrivilegedActionException:
    java.lang.reflect.InvocationTargetException 
```

我没有调用 InvocationTargetException 或在代码中传递任何异常。不知何故，通过艰苦的反复试验，我设法追踪到导致错误的行是：

```
BlowfishCBC bfcbc = new BlowfishCBC(testkey, 0, testkey.length, CBCIV_START); 
```

作为测试，我禁用了所有依赖于 JSP 的代码，因此我可以在 Eclipse 中运行它。我创建了一个 main 方法来执行 Java Applet，然后在 Eclipse 中运行它。我根本没有收到任何错误或警告。

我将相同的 Java Applet 作为 JAR 导出，将其复制到服务器，重新启动 Apache Tomcat，转到我的 Web 浏览器上的页面，运行 applet，然后发生相同的 InvocationTargetException 错误

可能是什么问题呢？

注意：我没有在代码中的任何地方使用 try..catch。我可以在代码中添加什么来捕获此异常信息，我该怎么做？

谢谢你。

更新：

这是来自 Java 控制台的堆栈跟踪：

```
java.net.MalformedURLException: no protocol: 
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.checkLiveConnectCaller(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.access$000(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin.liveconnect.SecureInvocation.CallMethod(Unknown Source)
java.net.MalformedURLException: no protocol: 
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.checkLiveConnectCaller(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.access$000(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin.liveconnect.SecureInvocation.CallMethod(Unknown Source)
java.net.MalformedURLException: no protocol: 
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.checkLiveConnectCaller(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation.access$000(Unknown Source)
at sun.plugin.liveconnect.SecureInvocation$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin.liveconnect.SecureInvocation.CallMethod(Unknown Source)
in encrypt method
trying to get pwd value from document
got pwd from document, password is 12345
is this getting here?
Ignored exception: java.security.PrivilegedActionException:  java.lang.reflect.InvocationTargetException 
```

我认为这就是堆栈跟踪。我希望这些信息是足够的和有用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:55:00.820

我发现了问题。persay，它与代码无关。这是清单文件。

这是清单文件，因为它最初是由 Eclipse 创建的：

```
Manifest-Version: 1.0 
```

这是我修改后的样子：

```
Manifest-Version: 1.0 
Class-Path: blowfishj.jar 
```

我没有意识到Java 控制面板应该在其资源中显示blowfishj.jar 文件。我在那里看到了我的 Java Applet，但是在我对这个清单文件进行更改之前，blowfishj.jar 文件不在那里。我没有意识到它需要清单文件。

不过，我不明白为什么它在清单文件中需要这个以及为什么这个修改会修复它。也许有人可以回答这个问题。

谢谢你。

# php - 如何使用 php 从 xml 文件（树结构）中检索节点

> ID：12499344
> 
> 赞同：0
> 
> 时间：2012-09-19T16:53:07.107
> 
> 标签：php, xml, dom, xmldom

我有以下 XML 树：

```
<?xml version="1.0" encoding="utf-8"?>

<root>
    <start_info>
            <info tabindex="1">
            <infonumber>1</infonumber>
            <trees>green</trees>
            </info>
    </start_info>
    <people>
        <pe>
            <people_ages>
                <range number="1">
                    <age value="1">1</age>
                    <age value="2">2</age>
                </range>
            </people_ages>
        </pe>
    </people>
</root> 
```

首先，我必须在复选框中显示所有节点，然后必须在提交文件时检索它们的节点值。我必须使用 PHP 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:59:19.630

You can either you use

1) $movies = new SimpleXMLElement($xmlstr);

```
echo $movies->movie[0]->plot;
OR
echo $movies->movie->{'great-lines'}->line; 
```

2) good way and easy to use XML into Array,http://www.bin-co.com/php/scripts/xml2array/ this website gives you lib to convert XML to array.

# vba - 使用 VBA/宏打开工作簿是否使其只读？

> ID：12499359
> 
> 赞同：0
> 
> 时间：2012-09-19T16:54:24.327
> 
> 标签：vba, excel

我希望我的代码打开一个工作簿（总是同一个），检测第一个空闲行，只写入该行中的两个单元格，然后保存/关闭工作簿。这似乎是一个简单的问题，但宏似乎正在打开文件的副本，然后将其锁定以进行编辑。

你能在我的开放代码中看到任何错误吗？我知道文件打开并且行搜索有效，但是它 1\. 从不写入单元格，并且 2\. 锁定文件。

```
Function WriteToMaster(Num, Path) As Boolean

'Declare variables
Dim xlApp As Excel.Application
Dim wb As Workbook
Dim ws As Worksheet
Dim infoLoc As Long

Set xlApp = New Excel.Application

'Specifies where the Master Move Key is stored
Set wb = xlApp.Workbooks.Open("DOC LOCATION")
Set ws = wb.Worksheets("Sheet1")

'Loop through cells, looking for an empty one, and set that to the loan number
infoLoc = firstBlankRow(ws)
MsgBox "First blank row is " & infoLoc & ". Num is " & Num

ws.Cells(infoLoc, 1).Value = Num
ws.Cells(infoLoc, 2).Value = Path

'Save, close, and quit
wb.Save
wb.Close
xlApp.Quit

'Resets the variables
Set ws = Nothing
Set wb = Nothing
Set xlApp = Nothing

'pieces of function from http://p2p.wrox.com/vb-how/30-read-write-excel-file-using-vb6.html
End Function 
```

再次感谢你，stackoverflow <3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T19:17:01.010

您是否需要打开一个新的 Excel 应用程序才能打开工作簿？

你不能做这样的事情：

```
Sub Macro1()

Dim wkb As Workbook
Workbooks.Open Filename:="\User Documents$\bob\My Documents\workbook_open_example.xlsx"
Set wkb = Workbooks("workbook_open_example.xlsx")

End Sub 
```

# java - 在 Java 中打印字符串

> ID：12499360
> 
> 赞同：0
> 
> 时间：2012-09-19T16:54:24.487
> 
> 标签：java

我需要使以下代码打印字母表中的字母而不是`int`s。我该怎么做？

```
import java.util.*;
import java.math.*;

public class Main {
    String[] letters= {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",
            "O", "P", "Q", "R", "S", "T", "U", "W", "X", "Y", "Z"};
    public static void main(String[] args) {

        //create the grid
        final int rowWidth = 10;
        final int colHeight = 10;

        Random rand = new Random();

        int [][] board = new int [rowWidth][colHeight];

        //fill the grid
        for (int row = 0; row < board.length; row++) {

            for (int col = 0; col < board[row].length; col++) {

                board[row][col] = rand.nextInt(25);
            }
        }

        //display output
        for(int i = 0; i < board.length; i++) {

            for(int j = 0; j < board[i].length; j++) {

                System.out.print(board[i][j] + " ");
                //System.out.println();
            }
            System.out.println();
        }

    } //end of main
} //end of class Main 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T16:56:11.573

我想：

```
System.out.print(letters[board[i][j]]); 
```

正如评论中所指出的，您需要将其设为`letters`静态（当您这样做时，为什么不将其设为私有和最终的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T16:58:37.153

Note that you don't need a letters array.

```
board[i][j] + 'A' 
```

would have worked as well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:59:38.960

I would use the range of the ASCII code for the letter in A -Z range, like

```
for (int i = 65 ; i <= 90; i++) {
// convert int to char and print out
    char c = (int) i;
    System.out.println("" + c);
} 
```

# c# - 所有强类型属性的分组列表组，即使是未分配的属性

> ID：12499363
> 
> 赞同：1
> 
> 时间：2012-09-19T16:54:30.667
> 
> 标签：c#, linq

我有一个列表，我想根据对象的属性对其进行分组。但是，当我输出分组列表时，它似乎对对象中的每个属性进行分组，即使我没有为它们分配任何值。由于未分配值的默认值应该相同，因此它们应该组合在一起，对吗？

`new { x.SentDate.Year }`我知道我可以通过使用匿名类型（

```
public void PopulateMessages()
    {
        List<Message> Messages = new DataRepository().GetMessages();

        Func<Message, GroupProperties> func = x => new GroupProperties
            {
                Year = x.SentDate.Year
            };

        IEnumerable<IGrouping<GroupProperties, Message>> GroupedMessages = Messages.OrderByDescending( x => x.SentDate )
            .GroupBy( func )
            .ToList();
    } 

    public class GroupProperties
    {
        public int Year { get; set; }
        public int Month { get; set; }
        public int Day { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:01:47.813

*如果您发现您当前的代码完全在分组，*我会感到惊讶。您当前的分组键类型是一个不覆盖`Equals`or的类`GetHashCode`，这意味着您基本上会获得引用相等性。的每个实例`GroupProperties`都不等于其他每个实例，并且当您为 each 创建一个新实例时`Message`，不会有分组。

您需要适当地覆盖这些方法（理想情况下实现`IEquatable<GroupProperties>`），然后分组将起作用。您不需要关心设置了哪些属性，只要您的密钥提取功能始终设置一组一致的属性即可。

# android - 单击时Android选项菜单项失败？

> ID：12499364
> 
> 赞同：1
> 
> 时间：2012-09-19T16:54:38.807
> 
> 标签：android, menu, start-activity

我正在尝试向我的 Android 项目添加选项菜单。选项菜单显示得很好，但是当单击唯一选项时它会失败。调试对我没有帮助（我开发 android 的时间不长）。

绘制菜单项的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/add_server"
          android:icon="@drawable/plus"
          android:title="@string/add_server"
          android:showAsAction="never"
          />

</menu> 
```

单击所述选项时调用该方法的代码是：

```
public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.add_server:
                    addNewServer();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

方法是：

```
public void addNewServer() {
     Intent intent = new Intent(AndNetQCheckDemo.this, AddServer.class);
 AndNetQCheckDemo.this.startActivity(intent);       
} 
```

当我单击按钮时，它会突出显示然后失败。调试器进入该`.this.startActivity`行，然后因我不理解的检测错误而失败。

我使用的设备是运行 4.0.4 的三星 Galaxy S3。

# android - 以有序的方式将数据传递给另一个活动

> ID：12499365
> 
> 赞同：1
> 
> 时间：2012-09-19T16:54:41.057
> 
> 标签：android, api, textview, onclicklistener

我有一份大学职业列表，选择其中一个选项会将我带到带有多个微调器的 LinearLayout，其中包含课程表。在微调器中选择的内容将发送到同一活动中的“textview1”。

我的问题是以有序的方式将“textview1”中的信息放入另一个活动的最佳方式是什么？当然也得救了。

我有一些示例代码，使用仅发送数据的可点击按钮，还有另一个按钮可以让我在您想查看时启动另一个活动，但问题是在第二个活动中组织信息，我真的要做这么多串吗？我希望你能帮助我找到更好的方法。我还想说这个应用程序是针对 2.1 api 的，如果这很重要的话。

Activity1=Administracion.java

```
public class Administracion extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.administracion);

        final TextView lblMensaje = (TextView)findViewById(R.id.LblMensaje);
        final Spinner cmbOpciones = (Spinner)findViewById(R.id.CmbOpciones);

        final String[] datos =
                new String[]{"0031711 Lab Biologia","Lun-Mar 9:30am prof. Marcarian","Elem3","Elem4","Elem5"};

        ArrayAdapter<String> elefante =
            new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, datos);

        elefante.setDropDownViewResource(
                R.layout.multiline_spinner_dropdown_item);

        cmbOpciones.setAdapter(elefante);

        cmbOpciones.setOnItemSelectedListener(
            new AdapterView.OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent,
                    android.view.View v, int position, long id) {
                        lblMensaje.setText("Seleccionado: " + datos[position]);

                }

                public void onNothingSelected(AdapterView<?> parent) {
                    lblMensaje.setText("");
                }

        });

        final TextView lblMensaje1 = (TextView)findViewById(R.id.LblMensaje1);
        final Spinner cmbOpciones1 = (Spinner)findViewById(R.id.CmbOpciones1);

        final String cuervo[] =
           new String[] {"00311712 Biología I","Mar-Jue 7:00am Prof.Briceño","Elem3","Elem4","Elem5"};

     ArrayAdapter<String> adaptador1 =
        new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, cuervo);

    adaptador1.setDropDownViewResource(
            android.R.layout.simple_spinner_dropdown_item);

    cmbOpciones1.setAdapter(adaptador1);

    cmbOpciones1.setOnItemSelectedListener(
        new AdapterView.OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent,
                android.view.View v, int position, long id) {          
                    lblMensaje1.setText(cuervo[position]);

            }

            public void onNothingSelected(AdapterView<?> parent) {
                lblMensaje1.setText("");
            }

    });
    Button BotonPasar1;
    BotonPasar1 = (Button)findViewById(R.id.VB1);
     BotonPasar1.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v) {
              // TODO Auto-generated method stub

            String Aguila;
            String Canario;
              Aguila = lblMensaje.getText().toString();
              Canario = lblMensaje1.getText().toString();
              SharedPreferences mypreferences = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
              SharedPreferences.Editor editor = mypreferences.edit();
              editor.putString("Canario", Aguila);
              editor.commit();

              SharedPreferences mypreferences1 = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
              SharedPreferences.Editor editor1 = mypreferences1.edit();
              editor1.putString("Canario", Aguila);
              editor1.commit();

        }

    });
     Button BotonPasar2;
     BotonPasar2 = (Button)findViewById(R.id.VB2);
      BotonPasar2.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v) {
              // TODO Auto-generated method stub
            Intent pasarahorario = new Intent("com.reversiblelabs.unisvenecas.udobeta.HORARIO");                          
          startActivity(pasarahorario);

        }

     });

    }

} 
```

活动 2 = Horario.java

```
public class Horario extends Activity{

    TextView llegada, llegada2, llegada3, llegada4;  

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.horario);
          llegada = (TextView) findViewById(R.id.tv1); 
          llegada2 = (TextView) findViewById(R.id.tv2);
          SharedPreferences mypreferences = getApplicationContext().getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
          SharedPreferences mypreferences1 = getApplicationContext().getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
          String teamnamestring = mypreferences.getString("canario", "no_name");
          String hola = mypreferences1.getString("Canario","no_name");
          llegada.setText(teamnamestring);
          llegada2.setText(hola); 
```

这是第一个活动，最后一个按钮将 textwiews 上的数据发送到第二个活动，第一个按钮启动第二个活动。

[第一项活动](http://i48.tinypic.com/jhagxl.png)

无论您在微调器上选择什么，都会在其自己的文本视图中看到。

现在是第二个活动，我希望数据按小时垂直组织

7:00 9:00 数学

9:00 11:00 化学

11:00 1:00 额外

[第二次活动](http://i48.tinypic.com/n6oo00.png)

我能做些什么来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:03:11.357

> 这是第一个活动，最后一个按钮将 textwiews 上的数据发送到第二个活动，第一个按钮启动第二个活动。

无需这样做。只有最后一个按钮可以发送所有数据并启动第二个活动。

```
Bundle bundle = new Bundle();
bundle.putString("some constant1", value1);
bundle.putString("some constant2", value2);
Intent intent = new Intent (this, newActvity.class);
intent.putExtra(bundle);
startActivity(intent); 
```

> 现在是第二个活动，我希望数据按小时垂直组织

使用RelativeLayout，在另一个下方放置视图并在第二个活动中接收包并将它们显示给用户。

# android - 无法隐藏操作栏徽标

> ID：12499367
> 
> 赞同：1
> 
> 时间：2012-09-19T16:54:48.757
> 
> 标签：android, android-actionbar

不知何故，在我的操作栏中隐藏活动图标不起作用。我试过了：

> ActionBar ab = activity.getActionBar();
> ab.setDisplayHomeAsUpEnabled(false);
> ab.setDisplayUseLogoEnabled(false);

错误在哪里？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T17:14:45.993

设置显示选项以关闭 DISPLAY_SHOW_HOME。

```
getActionBar().setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T02:01:59.397

```
 <item name="android:displayOptions">showTitle</item> 
```

# android - AndEngine - SpriteGroup 在新 attachChild 上闪烁

> ID：12499370
> 
> 赞同：5
> 
> 时间：2012-09-19T16:55:01.770
> 
> 标签：android, andengine

我正在使用最后一个版本的 AndEngine，分支 GLES2，有两个设备：HTC Desire 和 Galaxy Nexus。

使用 SpriteGroup 在屏幕上向下滚动时出现问题。新的精灵附加到屏幕顶部的 SpriteGroup 并在它们离开底部时分离。我使用一个池来避免使用太多内存。

一旦有一些精灵分离，一些新附加的精灵开始随机闪烁几帧。这很烦人，我不知道为什么......

我尝试在回收精灵时设置它们的 setVisible(false)，我也尝试不使用池，但它并没有改变任何事情。

我认为 SpriteGroup 可能有一个错误，但不确定在哪里。我试图在 begin() 方法中附加 SpriteGroup 中的孩子，以确保它不会在 onUpdateSpriteBatch() 循环期间发生，但运气不好。

这是一个基于 AndEngineExamples 项目的示例。您可以直接替换 SpriteBatchExample 类，启动项目并转到 Simple/Drawing a SpriteBatch，查看问题。

提前感谢您的任何想法！

```
package org.andengine.examples;

import java.util.Iterator;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.handler.timer.ITimerCallback;
import org.andengine.engine.handler.timer.TimerHandler;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.sprite.batch.SpriteGroup;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.texture.TextureOptions;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.region.ITextureRegion;
import org.andengine.opengl.vbo.VertexBufferObjectManager;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.adt.list.SmartList;
import org.andengine.util.adt.pool.GenericPool;

public class SpriteBatchExample extends SimpleBaseGameActivity {
    // ===========================================================
    // Constants
    // ===========================================================

    private static final int CAMERA_WIDTH = 720;
    private static final int CAMERA_HEIGHT = 480;

    // ===========================================================
    // Fields
    // ===========================================================

    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion mFaceTextureRegion;

    private float mSecondsElapsedSinceLastGeneration = 0;

    // ===========================================================
    // Constructors
    // ===========================================================

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    @Override
    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 32, 32, TextureOptions.BILINEAR);
        this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);
        this.mBitmapTextureAtlas.load();
    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

        final SpriteGroup spriteGroup = new SpriteGroup(this.mBitmapTextureAtlas, 500, this.getVertexBufferObjectManager());
        spriteGroup.setPosition(0, 0);
        scene.attachChild(spriteGroup);

        final SpritePool lPool = new SpritePool(mFaceTextureRegion, getVertexBufferObjectManager());
        final SmartList<Sprite> lSpriteList = new SmartList<Sprite>();

        final float lCharactersPeriod = 0.4f;

        scene.registerUpdateHandler(new TimerHandler(0.05f, true, new ITimerCallback() {
            @Override
            public void onTimePassed(final TimerHandler pTimerHandler) {
                final float lSecondsElapsedSinceLastUpdate = 0.1f;

                final Iterator<Sprite> li = lSpriteList.iterator();
                while (li.hasNext()) {
                    final Sprite lChar = li.next();
                    boolean lRemoveChar = false;

                    // Character destruction OR movement
                    final float lY = lChar.getY();
                    if (lY > CAMERA_HEIGHT) {
                        lRemoveChar = true;
                    } else {
                        lChar.setPosition(lChar.getX(), lY + 60 * lSecondsElapsedSinceLastUpdate);
                    }

                    if (lRemoveChar) {
                        // Remove character from scene
                        lChar.detachSelf();
                        lPool.recyclePoolItem(lChar);
                        li.remove();
                    }
                }

                // Character generation
                mSecondsElapsedSinceLastGeneration += lSecondsElapsedSinceLastUpdate;
                if (mSecondsElapsedSinceLastGeneration > lCharactersPeriod) {
                    // generate sprite
                    final Sprite lSprite = lPool.obtainPoolItem();
                    lSprite.setPosition((float) Math.random() * CAMERA_WIDTH, 0);
                    spriteGroup.attachChild(lSprite);
                    lSpriteList.add(lSprite);
                    mSecondsElapsedSinceLastGeneration -= lCharactersPeriod;
                }
            }
        }));

        return scene;
    }

    // ===========================================================
    // Methods
    // ===========================================================

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================
    static class SpritePool extends GenericPool<Sprite> {
        // ===========================================================
        // Constants
        // ===========================================================

        // ===========================================================
        // Fields
        // ===========================================================
        private final VertexBufferObjectManager mVertexBufferObjectManager;
        private ITextureRegion mFaceTextureRegion;

        // ===========================================================
        // Constructors
        // ===========================================================
        public SpritePool(final ITextureRegion pFaceTextureRegion, final VertexBufferObjectManager pVertexBufferObjectManager) {
            mFaceTextureRegion = pFaceTextureRegion;
            mVertexBufferObjectManager = pVertexBufferObjectManager;
        }

        // ===========================================================
        // Methods for/from SuperClass/Interfaces
        // ===========================================================
        @Override
        protected Sprite onAllocatePoolItem() {
            final Sprite lSprite = new Sprite(50, 0, mFaceTextureRegion, mVertexBufferObjectManager);
            lSprite.setIgnoreUpdate(true);
            return lSprite;
        }

        @Override
        protected void onHandleRecycleItem(final Sprite pSprite) {
        }

        @Override
        protected void onHandleObtainItem(final Sprite pSprite) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T02:45:20.677

我有同样的问题（当我将任何精灵设置为不可见时，组中最后添加的可见精灵开始闪烁），并通过覆盖 SpriteGroup 中的这两个方法来解决它：

```
SpriteGroup result = new SpriteGroup(atlas, capacity, vertexBufferObjectManager) {
    @Override
    protected boolean onUpdateSpriteBatch() {
            return false;
    }

    @Override
    protected void onManagedUpdate(float pSecondsElapsed) {
            super.onManagedUpdate(pSecondsElapsed);
            final SmartList<IEntity> children = this.mChildren;
            if(children != null) {
                    final int childCount = children.size();
                    for(int i = 0; i < childCount; i++) {
                            this.drawWithoutChecks((Sprite)children.get(i));
                    }
                    submit();
            }
    }; 
```

来源： [http ://www.andengine.org/forums/gles2/blinking-last-sprite-in-spritegroup-t7617.html](http://www.andengine.org/forums/gles2/blinking-last-sprite-in-spritegroup-t7617.html)

# java - java中读取Doc或Docx文件的问题

> ID：12499372
> 
> 赞同：-3
> 
> 时间：2012-09-19T16:55:06.560
> 
> 标签：java, netbeans, apache-poi, noclassdeffounderror, hwpf

我在用Java读取`.doc`或文件时遇到了这个问题：`.docx`

`java.lang.NoClassDefFoundError: org/apache/poi/hwpf/HWPFDocument`

我不明白为什么会发生这种情况，并且希望能帮助您摆脱这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:56:54.730

好吧，听起来您还没有将相关的 Apache POI jar 文件放入您在执行时使用的类路径中。没有更多信息，这就是我们所能说的。

*   找出需要哪些jar文件
*   找出控制你的类路径的东西（这取决于你正在运行的应用程序类型）
*   确保所有 jar 文件*都*到位
*   重新运行
*   利润 ：）

例如，在 Windows 上，您可能希望从命令行运行：

```
java -cp .;poi-whatever.jar foo.bar.Test 
```

（适当地替换 jar 文件名和您的入口点名称。）

# javascript - 当第一个函数返回 true 时调用另一个函数，在一个 onclientclick 内

> ID：12499378
> 
> 赞同：0
> 
> 时间：2012-09-19T16:55:53.867
> 
> 标签：javascript, gridview

我想调用两个函数，如果第一个返回 true，则继续执行第二个，如果返回 false，则显示错误。这将在一次 onclientclick 中定义。

如果单击按钮后只调用一个函数，则该函数有效。

但是，如果我这样组合并编写它： TestCheckBox() 和 TestCheckBox2() 是相同的功能，我只需要它来验证两个网格视图

```
<script type="text/javascript"> 

var TargetBaseControl = null;

window.onload = function () {
    try {
        //get target base control.
        TargetBaseControl =
       document.getElementById('<%= this.GridView1.ClientID %>');
    }
    catch (err) {
        TargetBaseControl = null;
    }
}

function TestCheckBox() {

        if (TargetBaseControl == null) return false;

        //get target child control.
        var TargetChildControl = "chkRow";

        //get all the control of the type INPUT in the base control.
        var Inputs = TargetBaseControl.getElementsByTagName("input");

        for (var n = 0; n < Inputs.length; ++n)
            if (Inputs[n].type == 'checkbox' &&
        Inputs[n].id.indexOf(TargetChildControl, 0) >= 0 &&
        Inputs[n].checked)

                return true;

        alert('Select at least one checkbox!');
        return false;

}
</script> 
```

问题是当 TestCheckBox() 返回 true 时，TestCheckBox2() 不起作用，在这种情况下它不会验证复选框。

我怎样才能让它完美地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:58:13.487

尝试这个：

```
<asp:.... OnClientClick = "return (TestCheckBox() && TestCheckBox2());" ... 
```

# jquery - 使用来自变量的 URL 进行 jQuery 重定向

> ID：12499380
> 
> 赞同：0
> 
> 时间：2012-09-19T16:56:03.093
> 
> 标签：jquery, redirect

我有一个 WordPress 网站，我使用以下内容从自定义字段调用 URL

```
<?php $redirect_url = get_post_meta($post->ID, 're_url', true); 
```

我还使用 TinyBox2 在弹出框中显示此 URL，使用我设置的回调函数在页脚中运行一个函数，该函数现在重定向到 www.google.com

```
TinyBox
-------
<div class="redirect" onclick="TINY.box.show({html:'Your website is : <br /><?php echo get_post_meta($post->ID, 're_url', true); ?>',animate:true,close:true,mask:false,boxid:'success',openjs:function(){openJS()}})"></li>

Footer
------
<script type="text/javascript">
    function openJS(){setTimeout("top.location.href = '$redirect_url'",5000);}
</script< 
```

这不像我想要的那样工作，有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:58:38.517

您需要编写 php 变量，以便 javascript 可以获取它！

```
function openJS(){setTimeout("top.location.href = '<?php echo $redirect_url; ?>'",5000);} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:58:48.307

设置超时接受一个函数，而不是一个字符串。

编辑：这是一些（未经测试的）代码。我希望这应该能让你朝着正确的方向前进。

```
function openJS(){
   window.setTimeout(function(){
      window.location = "<?php echo $URL ?>";
   }, 5000);
} 
```

# javascript - 学习和扩展一个jquery插件

> ID：12499382
> 
> 赞同：0
> 
> 时间：2012-09-19T16:56:12.863
> 
> 标签：javascript, jquery

我正在学习有关 javascript 插件的更多信息，并找到了我感兴趣的一个。我愿意弄脏我的脚，看看如何修改这个东西......

```
(function( $ ){
  var methods = {
    init : function( options ) { 

     return this.each(function(){ 
     var $this = $(this),
         data = $this.data('tooltip'),
         tooltip = $('<div />', {
           text : $this.attr('title')
         });

     // If the plugin hasn't been initialized yet
     if ( ! data ) {

     console.log('still working..'  );
       /*
         Do more setup stuff here
       */

       $(this).data('tooltip', {
           target : $this,
           tooltip : tooltip
       });

     }
   });

},
show : function( ) {
  console.log('this is the show');
},
hide : function( ) { 
  // GOOD
},
update : function( content ) {
  console.log('this is the update');    
  // !!! 
    }
  };

  $.fn.tooltip = function( method ) {

// Method calling logic
if ( methods[method] ) {
  return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
} else if ( typeof method === 'object' || ! method ) {
  return methods.init.apply( this, arguments );
} else {
  $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
}    

  };
   })( jQuery ); 
```

**好的，我有 4 个问题...** 1.你如何初始化这个插件？当我尝试运行随机 div 元素 $('#mtest').tooltip(); 时，我的控制台日志一直在“仍在工作..”。

2 init: 在 var 方法内，它是私有的，这意味着我不能从这个插件外部访问 init:？正确的？我应该把初始化逻辑放在哪里，因为它似乎正在返回选项......？

3.我对这部分代码感到困惑......

```
 if ( methods[method] ) {
  return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
} else if ( typeof method === 'object' || ! method ) {
  return methods.init.apply( this, arguments );
} else {
  $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
} 
```

我知道它返回所有方法，但是......

3a。为什么 write methods[method]// 看起来 [method] 是一个数组，这让我很困惑，因为我没有看到一个数组，它是一堆方法......

3b。else 检查的是什么？或者为什么会发生错误？

感谢您提供有关帮助我完全理解此插件的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:20:08.403

我不知道你第一个问题是什么意思。但是其他问题可以很容易地解决。

首先，让我们回顾一下 3。

你拥有的代码，以及 jQuery 在他们的文档中提供的，只是你和你的方法之间的一种“getter”。不是用所有方法聚集命名空间，而是将方法放入对象标题`methods`中（在第一个代码块的第二行实例化。

如果您查看您所询问的 jQuery 提供的代码，它并没有像您想象的那样*返回方法。*它*调用*对象中*键*的方法。*第一个 if 语句表示，如果您使用字符串*`methods`变量调用插件（在您的情况下为工具提示），它将在方法对象中查找该索引并*调用*函数。

 **第二个*else if*块表示，如果您将*对象*作为参数传递或不传递参数，它将调用您的*init*方法。这有点像为您的插件自定义构建的 getter/initializer。

所以现在，要回答你的第二个问题，可以通过调用你的*工具提示*插件来访问*init方法。*

 *1) 无参数

2）一个对象参数（通常是选项，如`{"someOption":true,"anotherOption":400}`）

3）字符串'init'如`$('#id').tooltip('init')`

这样，您还可以使用...访问您的*显示*和*隐藏*方法

`$('#id).tooltip('hide')`……等等。

您可以在 jQuery 文档中阅读更多详细信息。这只是我通俗地说。***

# bash - 遍历文件中的行并发送到 redis-cli

> ID：12499385
> 
> 赞同：2
> 
> 时间：2012-09-19T16:56:21.863
> 
> 标签：bash, redis

我有一个通过使用创建的文件`$ redis-cli KEYS session.* > keys.txt`，其中目前有大约 950,000 行/键。

我想遍历所有这些并在它们上设置一个过期时间，并且宁愿避免为它编写一个 python 脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:24:57.423

我在这里没有看到任何问题：

```
 redis-cli KEYS 'session.*' | awk '{printf "EXPIRE %s 60\n", $1}' | redis-cli > expire.log 
```

# java - 检测 Swing 中剪切和复制之间的差异

> ID：12499387
> 
> 赞同：2
> 
> 时间：2012-09-19T16:56:22.633
> 
> 标签：java, swing, clipboard

我正在使用 Java 6，我们不太可能使用 Java 7。

我的 Swing 应用程序应该处理从外部源剪切或复制的粘贴文件（无论是 Windows 资源管理器、Free Commander 还是您拥有的...）

它工作得很好，除了一个重要的例外：我无法知道文件是否被剪切或复制，也没有办法告诉系统剪贴板粘贴成功。理想情况下，当然，系统应该处理它，但它似乎没有这样做。如果我至少可以判断它是剪切还是副本，我可以自己删除剪切文件，但我也找不到任何类似的东西。

现在，剪切就像复制一样工作。

如何检测用户是使用剪切还是复制？

# javascript - AJAX 长轮询未从浏览器发送

> ID：12499388
> 
> 赞同：4
> 
> 时间：2012-09-19T16:56:25.967
> 
> 标签：javascript, ajax, browser

我有一个 javascript web 应用程序设置为使用 .net 服务器的长轮询，使用 ajax 调用：

```
var _listenTimeout = 5 * 60 * 1000;
//...
$.ajax({
      type: "GET",
      url: url,
      async: true,
      cache: false,
      dataType: "jsonp",
      timeout: _listenTimeout,
      success: callback
}); 
```

但是，当页面打开一段时间后，对服务器的请求会停止响应。它似乎处于一种不确定状态，数据包被卡在 Web 浏览器之间并被从网络发送到服务器。

我已经挖掘了，我知道一些事情：

*   请求被发送是因为它显示在 chrome web 开发人员网络选项卡（也是 chrome://net-internals）和 firebug 上。请求的状态始终处于挂起状态，它只是停滞在该状态。
*   请求 url 是正确的，因为通过发送相同的 url 会`curl`返回立即响应。
*   它没有离开我的网络，因为没有使用[wireshark](http://www.wireshark.org/)检测到任何数据包。服务器日志（以及那一侧的wireshark）也没有显示任何内容。

奇怪的是，有时它会偶尔工作，但会延迟几分钟，即浏览器网络日志检测到请求得到响应（在我的情况下为 204），wireshark 检测到正在发送的请求（并在服务器端）。浏览器和wireshark的延迟相同，即发出请求，发生延迟，然后chrome检测响应，wireshare检测发送的数据包。

页面的干净刷新也解决了这个问题，几乎立即发生相同的请求/响应（使用相关的浏览器网络和 wireshark 日志）。

我已经在 Chrome 21.0.1180.89 和 Firefox 14.01 上尝试过。

是否有某种浏览器队列被 ajax 请求阻塞在浏览器中？或者可能[有太多并发请求](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)？暂时不知道...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:28:18.387

$.ajax 不会发出定期请求。timeout 选项指定发出实际请求而不是轮询的延迟。在这里阅读。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。这就是为什么您只看到一个 ajax 请求的原因。如果您想要手动操作，您必须使用 setTimeout javascript 方法来完成。

您可以在成功和错误回调中调用 setTimeout，以便摆脱并发的 ajax 请求。

# android - 是否可以将 Android 视图渲染到 OpenGL FBO 或纹理？

> ID：12499396
> 
> 赞同：13
> 
> 时间：2012-09-19T16:56:49.480
> 
> 标签：android, opengl-es

是否可以将视图（例如，WebView）渲染到 FBO，以便它可以用作 OpenGL 合成中的纹理？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-15T21:54:44.610

我汇集了一个完整的演示项目，它以一种有效的方式实时渲染 GL 纹理的视图，可以在[这个 repo](https://github.com/ArtemBogush/AndroidViewToGLRendering)中找到。以如何将 WebView 实时渲染为 GL 纹理为例。

对此的简短代码也可能如下所示（取自上面 repo 的演示项目）：

```
public class GLWebView extends WebView {

    private ViewToGLRenderer mViewToGLRenderer;
    ...
    // drawing magic
    @Override
    public void draw( Canvas canvas ) {
        //returns canvas attached to gl texture to draw on
        Canvas glAttachedCanvas = mViewToGLRenderer.onDrawViewBegin();
        if(glAttachedCanvas != null) {
            //translate canvas to reflect view scrolling
            float xScale = glAttachedCanvas.getWidth() / (float)canvas.getWidth();
            glAttachedCanvas.scale(xScale, xScale);
            glAttachedCanvas.translate(-getScrollX(), -getScrollY());
            //draw the view to provided canvas
            super.draw(glAttachedCanvas);
        }
        // notify the canvas is updated
        mViewToGLRenderer.onDrawViewEnd();
    }

    ...
}

public class ViewToGLRenderer implements GLSurfaceView.Renderer{

    private SurfaceTexture mSurfaceTexture;
    private Surface mSurface;

    private int mGlSurfaceTexture;
    private Canvas mSurfaceCanvas;

    ...

    @Override
    public void onDrawFrame(GL10 gl){
        synchronized (this){
            // update texture
            mSurfaceTexture.updateTexImage();
        }
   }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height){
        releaseSurface();
        mGlSurfaceTexture = createTexture();
        if (mGlSurfaceTexture > 0){
            //attach the texture to a surface.
            //It's a clue class for rendering an android view to gl level
            mSurfaceTexture = new SurfaceTexture(mGlSurfaceTexture);
            mSurfaceTexture.setDefaultBufferSize(mTextureWidth, mTextureHeight);
            mSurface = new Surface(mSurfaceTexture);
        }

    }

    public Canvas onDrawViewBegin(){
        mSurfaceCanvas = null;
        if (mSurface != null) {
            try {
                mSurfaceCanvas = mSurface.lockCanvas(null);
            }catch (Exception e){
                Log.e(TAG, "error while rendering view to gl: " + e);
            }
        }
        return mSurfaceCanvas;
    }

    public void onDrawViewEnd(){
        if(mSurfaceCanvas != null) {
            mSurface.unlockCanvasAndPost(mSurfaceCanvas);
        }
        mSurfaceCanvas = null;
    }
} 
```

演示输出截图：

![](../Images/580bd0adc6b0fb1ca3b3c65fe8c0afbf.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-26T18:43:11.027

是的，这当然可能，我在这里写了一个操作方法； [http://www.felixjones.co.uk/neo%20website/Android_View/](http://www.felixjones.co.uk/neo%20website/Android_View/)

但是对于不会改变的静态元素，位图选项可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T07:47:30.873

至少有人设法以这种方式呈现文本：

[在 Android 上的 OpenGL 中渲染文本](http://fractiousg.blogspot.de/2012/04/rendering-text-in-opengl-on-android.html)

> 它描述了我使用 OpenGL ES 1.0 和 TrueType/OpenType 字体文件**有效地**渲染高质量动态文本的方法。

[...]

> 整个过程其实很简单。我们生成位图（作为纹理），计算并存储每个字符的大小，以及它在纹理上的位置（UV 坐标）。还有一些其他更精细的细节，但我们会谈到这一点。

OpenGL ES 2.0 版本：[https ://github.com/d3kod/Texample2](https://github.com/d3kod/Texample2)

# php - 如何创建与此代码关联的 html 表单

> ID：12499399
> 
> 赞同：-3
> 
> 时间：2012-09-19T16:56:55.037
> 
> 标签：php, mysqli

我在下面有一段代码（imageupload.php），假设php将文件上传到服务器并将数据插入数据库。

```
 <?php 
    /* check connection */ 
    if (mysqli_connect_errno()) { 
        printf("Connect failed: %s\n", mysqli_connect_error()); 
        die(); 
    } 

    $result = 0; 

    //UPLOAD IMAGE FILE 

    move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]); 

    $result = 1; 

    //INSERT INTO IMAGE DATABASE TABLE 

    $imagesql = "INSERT INTO Image (ImageFile) VALUES (?)"; 

    if (!$insert = $mysqli->prepare($imagesql)) { 
        // Handle errors with prepare operation here 
    } 

    //Dont pass data directly to bind_param store it in a variable 
    $insert->bind_param("s", $img); 

    //Assign the variable 
    $img = 'ImageFiles/' . $_FILES['fileImage']['name']; 

    $insert->execute(); 

    $insertimagequestion->execute(); 

    //IF ANY ERROR WHILE INSERTING DATA INTO EITHER OF THE TABLES 
    if ($insert->errno) { 
      // Handle query error here 
    } 

    $insert->close(); 

    }
    ?> 
```

但是我想创建 html 表单来与之关联，但我从未在 html 中创建文件输入。有谁知道如何创建可以与此关联的 html 表单？

我想要一个 html 代码，以便我可以测试上面的代码，然后能够测试是否有任何错误（如果有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:05:47.147

您可以制作如下 HTML 表单：

```
<form action="http://www.example.com/upload.php"
enctype="multipart/form-data" method="post">
<p>
Please specify a file, or a set of files:<br>
<input type="file" name="fileImage" size="40">
</p>
<div>
<input type="submit" value="Send">
</div>
</form> 
```

# ruby-on-rails - 我可以从安装它的真实应用程序运行 Rails 引擎的规格吗？

> ID：12499404
> 
> 赞同：9
> 
> 时间：2012-09-19T16:57:12.580
> 
> 标签：rspec, rails-engines, ruby-on-rails, rspec, gem, ruby-on-rails-3.2, rails-engines

我有一个 Rails 引擎，旨在为我们更大的项目提供一些模型和控制器。引擎有一套相当不错的规格，在引擎的虚拟应用程序中使用一堆模拟和一些全尺寸模型和控制器，以确保引擎正在做它应该做的事情并与更大的应用程序一起工作。

然而，即使所有测试都通过了，当我在更大的应用程序中更新引擎时，我经常会发现有问题的行为。如果我的测试通过但行为被破坏，那么测试显然有问题，但是什么？我是在嘲讽太多，还是不够？

为了让我更接近于弄清楚这一点，我希望能够从完整的应用程序内部运行引擎的测试。这似乎应该是可能的，但我对 rspec 的理解不够透彻，无法掌握如何处理。

（这与[这个问题](https://stackoverflow.com/q/9655874/306084)有关，但不完全相同；我不是试图从一个命令运行所有规范，只是为了在完整的应用程序环境中运行引擎的规范。[这](https://stackoverflow.com/q/6587413/306084)似乎也相关。实际上，我我已经阅读了所有用[rspec](/questions/tagged/rspec "显示标记为“rspec”的问题")和[rails-engines](/questions/tagged/rails-engines "显示标记为“rails-engines”的问题")标记的问题——数量不多——它们要么不是我需要的，要么没有答案。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T16:03:30.780

最简单的解决方案是在 rspec 命令中指定路径。如果你有目录结构

```
/project
/engine
/engine_2 
```

然后你做并且应该运行所有的规范

```
cd project
rspec spec/ ../engine/spec ../engine_2/spec 
```

但是，如果您想在持续集成上运行规范，或者这似乎不太舒服，我通过自定义**rake 规范**任务解决了这个问题，改变了模式方法。

lib/task/rspec.rake 应该是这样的

```
require "rspec/core/rake_task"

RSpec::Core::RakeTask.new(:spec)

task :default => :spec
RSpec::Core::RakeTask.module_eval do
  def pattern
    extras = []
    Rails.application.config.rspec_paths.each do |dir|
      if File.directory?( dir )
        extras << File.join( dir, 'spec', '**', '*_spec.rb' ).to_s
      end
    end
    [@pattern] | extras
  end
end 
```

在引擎类中，您将路径添加到 config.rspec_paths

```
class Engine < ::Rails::Engine
  # Register path to rspec
  config.rspec_paths << self.root
end 
```

并且不要忘记在基础项目的某处初始化 config.rspec_paths。

如果你想添加工厂，那么你可以创建初始化程序，你可以在 stackoverflow 的某个地方找到解决方案。

不确定这个解决方案是否是最好的，但对我有用，我对此很满意。祝你好运！

# javascript - 在 HTML 表单中嵌套元素数组的正确方法

> ID：12499405
> 
> 赞同：-1
> 
> 时间：2012-09-19T16:57:15.340
> 
> 标签：javascript, html, arrays, forms

我有一个包含类似项目组的 HTML 表单。我知道 HTML 没有“数组”的概念，所以我想知道编写包含单个表单并且可以根据需要添加多组相同项目的内容的最佳方法是什么。

```
<form>

    <div>
        <input name="title[]">
        <textarea name="body[]">
    </div>

    <div>
        <input name="title[]">
        <textarea name="body[]">
    </div>

    <a href="#" id="addrow">Add row</a>

    <input type="submit">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:05:11.350

你可以有这样的东西：

```
<form method="post">

<input type="hidden" name="num_of_elements" value="2">

<div>
    <input name="title[0]">
    <textarea name="body[0]">
</div>

<div>
    <input name="title[1]">
    <textarea name="body[1]">
</div>

<a href="#" id="addrow">Add row</a>

<input type="submit"> 
```

当您使用 javascript/php 或其他方式添加 div 时，只需在隐藏输入 num_of_elements 中添加元素计数

然后当您在 PHP 中提交它时，您将拥有如下变量：

```
$count = intval($_POST['num_of_elements']);
for($i = 0; $i < $count; $i++)
{
echo $_POST["title[{$i}]"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:59:26.363

I think this will work:

```
<form>

    <div>
        <input name="title[0]">
        <textarea name="body[0]">
    </div>

    <div>
        <input name="title[1]">
        <textarea name="body[1]">
    </div>

    <a href="#" id="addrow">Add row</a>

    <input type="submit">

</form> 
```

# java - ChromeDriver 无法与 OS X 上的浏览 器通信

> ID：12499407
> 
> 赞同：1
> 
> 时间：2012-09-19T16:57:22.770
> 
> 标签：java, selenium, selenium-chromedriver

我正在尝试在 OS X 上使用 chrome 运行 selenium 测试。它适用于 firefox，但 chrome 驱动程序似乎无法与浏览器通信。

这是我的代码：

```
import junit.framework.TestCase;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class DriverTest extends TestCase {

    public void testFirefox(){
        FirefoxDriver driver = new FirefoxDriver();
        driver.get("http://www.google.com");
        driver.close();
    }

    public void testChrome(){
        ChromeDriver driver = new ChromeDriver();
        driver.get("http://www.google.com");
        driver.close();
    }    
} 
```

* * *

当我运行它时，firefox 启动正常，但对于 chrome，我收到此错误：

```
Started ChromeDriver
port=45421
version=23.0.1240.0
log=/Users/user/projects/client/hg/chromedriver.log
objc[25753]: Object 0x6e078170 of class NSPathStore2 autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[25753]: Object 0x6e078360 of class NSPathStore2 autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[25753]: Object 0x6e078410 of class NSConcreteData autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[25753]: Object 0x6e078470 of class __NSCFString autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
objc[25753]: Object 0x6e0782c0 of class NSBundle autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug

org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.7.4', java.version: '1.6.0_35'
Driver info: driver.version: ChromeDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:493)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:182)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:114)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:165)
    at org.openqa.selenium.chrome.ChromeDriver.<init>(ChromeDriver.java:107)
    at DriverTest.testChrome(DriverTest.java:16)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
Caused by: org.openqa.selenium.WebDriverException: Unable to convert: {desiredCapabilities=Capabilities [{platform=ANY, browserName=chrome, chromeOptions=org.openqa.selenium.chrome.ChromeOptions@448be1c9, chrome.switches=[], version=}]}
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:19:09.630

您需要指定指向 Chromedriver 位置的系统属性，例如：

```
System.setProperty("webdriver.chrome.driver", "applications/chrome/chromedriver"); 
```

第二个参数应设置为您保存 chromedriver 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T16:34:30.993

尝试为 ChromeDriver 设置 DesiredCapabilities.chrome()。

```
ChromeDriver driver = new ChromeDriver(DesiredCapabilities.chrome()); 
```

这应该有效。

# php - 让产品在 Magento 1.7 版中显示

> ID：12499409
> 
> 赞同：0
> 
> 时间：2012-09-19T16:57:30.200
> 
> 标签：php, magento, csv, magento-1.7

我正在开发 Magento 1.7 商店的开发版本，并使用 Magmi 上传我的所有产品。我的问题是我无法让图像显示在前端。在我的 csv 文件中，我有：

```
'image' => "/magento/media/catalog/product/import/".$row['isbn13'].".gif",
'small_image' =>  "/magento/media/catalog/product/import/".$row['isbn13'].".gif",
'thumbnail' => "/magento/media/catalog/product/import/".$row['isbn13'].".gif", 
```

其中 $row['isbn13'] 是我正在销售的书的 isbn 编号。我已将所有图像上传到该文件夹​​，但没有成功。如何让图像在前端和后端都可以查看？我需要进入并编辑任何文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:45:28.197

对于magmi，你最好

*   在 csv 中删除 /magento/media/catalog/product/import 部分路径（因为它是一个公共目录）。

    *   如果你不想接触你的 csv，你可以看看 value replacer 插件，它可以在 magmi 处理它们之前对 csv 值执行操作。（在这里我建议对列 image、small_image 和 thumbnail 使用高级语法并使用 emtpy 字符串执行一些 str_replace 不需要的前缀）
*   将插件本地图像从参数设置为：媒体/目录/产品/导入（没有前导 / ，magmi会知道它是相对于magento根的）

*   现在 csv（或转换后的值）将只有图像名称。magmi 应该找到它们的目录将被正确设置。那么magmi应该能够正确导入图像。

当然，您需要安装和配置图像处理器插件才能导入图像！！！！！！

# c# - 如何检索友好的 ICC 配置文件名称？

> ID：12499410
> 
> 赞同：0
> 
> 时间：2012-09-19T16:57:38.147
> 
> 标签：c#, .net, windows, color-profile, color-management

C# 中有没有办法检索友好的 ICC 配置文件名称。例如：

```
string GetICCProfileFriendlyName(string fileRef)
{
   ...
} 
```

可能使用 P/Invoke、gdi32.dll、...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:28:36.447

有一个[Color.ColorContext](http://msdn.microsoft.com/en-us/library/system.windows.media.color.colorcontext.aspx)可用于获取 ProfileUri。但是我不确定这是否仅适用于 WPF 或者它是否也适用于 WinForms。

# events - Eventbrite 事件列表小部件不工作

> ID：12499414
> 
> 赞同：1
> 
> 时间：2012-09-19T16:57:47.283
> 
> 标签：events, widget, eventbrite

我已经在 Eventbrite 的 API 页面上玩过其他小部件，并让它们中的每一个都可以工作。我唯一遇到困难的是[Event List 小部件](http://developer.eventbrite.com/doc/widgets/#list)。

我在网上四处寻找包含更多信息或任何内容的教程，以查看我可能做错了什么，但没有成功。

当我复制并粘贴文本时，什么也没有出现。所以我尝试将 API 密钥和 ID 更改为我的，但没有任何显示。有谁知道它是否不再起作用，或者我是否需要向事件列表小部件描述中不太清楚的代码添加更多内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T18:26:38.857

I was having the same problem, and I noticed the first script tag in the example from EventBrite is missing "http:" in the src attribute. Once I added this, it worked.

`<script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

should instead be...

`<script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:11:38.893

你用什么语言工作？

Eventbrite 的开源示例代码部分应该提供一些额外的示例： [http ://eventbrite.github.com/#examples](http://eventbrite.github.com/#examples)

# web-services - 在 REST 中处理从组中删除成员的正确方法

> ID：12499417
> 
> 赞同：1
> 
> 时间：2012-09-19T16:57:55.430
> 
> 标签：web-services, rest

我正在设计一个组织组和用户的 REST 服务。

例如： GET /groups - 获取所有组 GET /groups/1 - 获取特定组 GET /groups/1/users - 获取组中的用户 GET /users/1 - 实际用户，可能有多个groups POST /groups/1/users - 使用 user_id=1 的 post 参数将用户添加到组

处理此问题的适当方法是什么？DELETE /groups/1/users/1 似乎是一种有效的方法，但是对同一 url 的 GET 将返回与资源 /user/1 重复的用户记录？

还是应该删除 /groups/1/users?user_id=1？

想知道这是最 RESTful 的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:14:41.383

我认为一个好的设计会明确地表明用户在特定组中的成员身份——作为一个单独的资源。因此，组内有组、用户和用户的成员资格。

因此，`GET /groups/1/users`将返回成员资源标识符列表：`/groups/1/users/{member_id}`您可以在其上执行`DELETE`. 当然，这些“会员资格”中的每一个都与特定用户相关联，因此您必须以某种方式知道哪个`member_id`与哪个`user_id`. 最简单的方法是使`member_id`具有与 相同的语义`user_id`，正如您在问题中所建议的那样（因此`/groups/1/users/1`意味着*“用户 1 在组 1 中的成员资格”*）。之后，如果您执行 GET 操作，`/groups/1/users/{member_id}`您可以重定向到`/users/{user_id}`. 或者在一个更复杂的例子中，这个资源不会重定向到用户，而是链接到它，并且还包括一些其他信息，例如用户加入组的日期、她在组中的状态等。

我能想到的另一个选项是使用 PATCH 方法来修改集合资源（`/groups/1/users`）：参见[https://www.rfc-editor.org/rfc/rfc5023](https://www.rfc-editor.org/rfc/rfc5023)。但是使用 DELETE 似乎更自然。

# c# - 如何通过 C# 更改 Windows 控制面板设置

> ID：12499418
> 
> 赞同：2
> 
> 时间：2012-09-19T16:57:56.990
> 
> 标签：c#, dropshadow, controlpanel

更具体地说，我想改变视觉效果。我的目标是按下一个按钮，然后让它改变 15 种视觉效果。例如关闭“投影”和禁用“淡入/滑动菜单进入视图”。我进行了大量搜索，唯一完成的事情是如何确定它是否启用了类似这样的功能：

```
dropshadow = SystemInformation.IsDropShadowEnabled;
MessageBox.Show("Drop Shadow enabled:"+Convert.ToString(dropshadow)); 
```

这是针对 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:14:28.820

我认为您将需要使用 pinvoke 来实现这一点。

看看[http://support.microsoft.com/kb/97142](http://support.microsoft.com/kb/97142) 这里是 ac# 示例[http://www.pinvoke.net/default.aspx/user32.systemparametersinfo](http://www.pinvoke.net/default.aspx/user32.systemparametersinfo)

不确定这是否涵盖了您想要的所有内容，但应该涵盖大部分内容。

我相信这就是 SystemInformation 在后台使用的。

# c - 如何在 C 中的不同函数之间传输文本？

> ID：12499425
> 
> 赞同：0
> 
> 时间：2012-09-19T16:58:16.343
> 
> 标签：c, function, call

我有两个要编译成可执行文件的 .c 文件。刚刚开始学习 C，我发现知道如何在函数之间传输文本作为参数很棘手（我发现在其他所有语言中都非常简单）。

这是两个文件：

## 程序.c

```
#include <stdio.h>
#include <string.h>

int main(){

char temp[40] = stringCall();
printf("%s",temp);

} 
```

## 字符串返回.c

```
#include <stdio.h>
#include <string.h>

char[] stringCall(){

char toReturn[40] = "Hello, Stack Overflow!";
return toReturn;

} 
```

我通常会遇到类似“Segmentation Failed (core dumped)”之类的问题。我已经做了很多谷歌搜索，令人惊讶的是我真的找不到解决方案，当然也没有简单的教程“这是如何在函数之间移动文本”。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:01:09.483

```
char toReturn[40] = "Hello, Stack Overflow!";
return toReturn; 
```

这是无效的，您将返回一个自动数组，该数组在函数返回后超出范围 - 这会调用未定义的行为。尝试返回字符串文字本身（它在整个程序中都有效）：

```
return "Hello, Stack Overflow!"; 
```

或者您的数组的动态副本：

```
char toReturn[40] = "Hello, Stack Overflow!";
return strdup(toReturn); 
```

在后一种情况下，您需要`free()`调用函数中的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:18:14.230

你是对的，这在 C 中并不简单，因为 C 不能将字符串视为值。

最灵活的方法是：

```
// Program.c
char temp[40];
if (stringCall(temp, sizeof temp) <= sizeof temp) {
    puts(temp);
} else {
    // error-handling
    puts("My buffer wasn't big enough");
}

// StringReturn.c
int stringCall(char *buf, int size) {
    const char toReturn[] = "Hello, Stack Overflow!";
    if (sizeof toReturn <= size) {
        strcpy(buf, toReturn);
    }
    return sizeof toReturn;
} 
```

*   `stringCall`不返回字符串数据，而是将其写入调用者提供的缓冲区
*   缓冲区总是带有大小。您可以为此使用`size_t`or而不是.`ssize_t``int`
*   `stringCall`在写入之前检查大小。还有其他方法可以在单个调用中执行此操作，所有这些方法要么不在 C89 和 C99 中，要么以其他方式存在缺陷。C11 介绍`strcpy_s`。使用您可以使用的工具，这在逻辑上应该等同于您自己检查它，就像我上面的代码一样。永远不要忘记确保 nul 终止符有空间，它无形地潜伏在每个 C 字符串的末尾。
*   `stringCall`返回它*想要*写入的字节数，即使它不写任何东西。这意味着缓冲区太小的调用者可以分配一个更大的缓冲区并重试。为此，调用者可以`stringCall(NULL, 0)`在不尝试任何特定缓冲区的情况下获取大小。
*   我在`sizeof`这里使用是因为我使用的是编译器知道其大小的数组，但实际上`stringCall`可能会使用`strlen`或其他方式来了解它想要写入多少数据。
*   正如我所写，要求调用者不要为`size`. 这通常没问题，因为事实上他们的缓冲区不能有负大小，所以如果他们这样做，他们的代码已经有问题了。但是，如果您想真正确定，或者如果您想帮助您的调用者捕获这些错误，您可以编写`if ((int) sizeof toReturn < size)`或`if (size > 0 && sizeof toReturn < size)`.

“最灵活”并不总是最好的，但是当函数实际上是动态生成文本时，这很好，特别是当调用者没有简单的方法提前知道长度而不做一半的工作时`stringCall`应该为他们做的。该接口类似于C99标准功能`snprintf`。

# css - CSS3 3d seamless transitions

> ID：12499427
> 
> 赞同：0
> 
> 时间：2012-09-19T16:58:32.993
> 
> 标签：css, css-transitions

Okay, so I'm trying to figure out how to make my 3d transitions seamless on a carousel I'm working on without transitioning the entire parent piece. I'm trying to create a cube effect that will be able to be utilized by as many slides as I want. Here's what I have so far, but I can't seem to make it seamless: [http://jsfiddle.net/wDMHN/4/](http://jsfiddle.net/wDMHN/4/). Help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:47:02.033

您需要从立方体的每一侧相对于面的变换位置开始，因此一侧需要旋转 90，另一侧需要旋转 180，另一侧需要旋转 270。您还需要设置透视原点，以便所有面都旋转围绕同一点旋转。

看看[这个链接](http://www.paulrhayes.com/2009-07/animated-css3-cube-interface-using-3d-transforms/)

它使用键盘来旋转立方体，但要使其自主化将是一个非常简单的改变。

# sql-server-2008 - 选择耗时太长。需要建议以获得更好的性能

> ID：12499428
> 
> 赞同：0
> 
> 时间：2012-09-19T16:58:34.540
> 
> 标签：sql-server-2008

好的，我们开始吧。`SELECT`穿过其他表并订购以获得所需的行，这很混乱。基本上我在`ORDER BY`.

1个基表。

7`JOINS`点到本地表。

`WHERE`有 2 个子句和一个`NOT IN`交叉另一个表。

您会在代码中看到`ORDER BY`该死的大/丑陋，它总结了 5 种不同计算的结果。`order by`为了得到最坏的行情况，我需要这些计算的结果。

问题是一旦我执行存储过程，它最多需要 8 秒才能运行。这有点不能接受。所以，我开始检查索引。

因此，我正在寻找有关如何使此查询运行得更快的建议。我正在索引`WHERE`子句和字段`LINEA`，我应该索引其他东西吗？就像我穿过的行一样`JOINs`？还是我应该以不同的方式处理查询？

询问：

```
SET @LINEA = (
    SELECT TOP 1
        BOA.LIN
    FROM
        BAND_BA BOA
    LEFT JOIN
        TEL PAR
        ON REPLACE(BOA.Lin,'-','') = SUBSTRING(PAR.Te,2,10)
    LEFT JOIN
        TELP CLP
        ON REPLACE(BOA.Lin,'-','') = SUBSTRING(CLP.Numtel,2,10)
    LEFT JOIN
        CA C
        ON REPLACE(BOA.Lin,'-','') = C.An
    LEFT JOIN
        RE R
        ON REPLACE(BOA.Lin,'-','') = R.Lin
    LEFT JOIN
        PRODUCTOS2 P2
        ON BOA.PRODUCTO = P2.codigo
    LEFT JOIN
        EN 
        ON REPLACE(BOA.Lin,'-','') = EN.G
    LEFT JOIN
        TIP ID
        ON TIPID = ID.ID
    WHERE 
        BOA.EST = 'C' AND
        ID.SE =  'boA' AND 
        BOA.LIN NOT IN (
            SELECT 
                LIN 
            FROM 
                BAN

            )   
    ORDER BY (EN.VALUE + ANT.VALUE + REIT.VAL + C.VALUE + TEL.VALUE

        ) DESC, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T17:25:41.777

坦率地说，这是一些非常糟糕的 SQL。如果没有看到所有的表结构，这里的建议将是不完整的。话虽如此，请不要发布所有表格结构，因为您已经非常接近“聘请顾问”领域了。

1.  **所有的`REPLACE`逻辑都应该被取消。**如果您需要`JOIN`在这些字段上，则将可比较的字段添加到表中，这样您就不需要操作数据。每一个`JOIN`使用`REPLACE`or`SUBSTRING`的都是表或索引扫描——它们是非 SARGable 和明确的反模式。

2.  这可能是我见过`ORDER BY`的最令人费解的。`ORDER BY`那里的一些主要问题：

    *   子查询应全部消除并在外部查询中或作为变量实现
    *   应该消除字符串操作（参见上面的第 1 项）

整个查询基本上是代码异味。如果您需要编写这样的代码来满足业务需求，那么您要么有一个非常不合适的设计，要么在组织或数据中存在其他更大的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:18:53.390

可能会影响性能的一件事是使用大量的 LEFT JOIN。为了提高 LEFT JOIN 的性能，您可能希望确保您加入的列具有索引 - 这会对性能产生巨大影响。

# php - 使用 Zend Lib 通过 SOAP 发送一个 php 复杂类型数组并使用 Android KSOAP2 客户端检索它

> ID：12499432
> 
> 赞同：0
> 
> 时间：2012-09-19T16:58:40.170
> 
> 标签：php, zend-framework, soap, associative-array, android-ksoap2

我试图在 PHP 函数中返回一个关联数组。该函数从 MySQL 中检索一些数据，并使用 Zend Library 发布在 WebService 中。

这个函数看起来像：

函数.php

```
class Functions  
{
    /** 
    *
    * @return array 
    */  
    public function Function1()  
    {

        $con = new mysqli(server, user, pass, database);

        if ($con->connect_errno) {
            die(__FUNCTION__ . $con->connect_error);
        }

        $con->set_charset('utf8');
        $arrayRet = array();

        $query = 'select field1, field2, field3 from table1';

        if(!$result = $con->query($query)){
            die(__FUNCTION__ . $con->error);
        }

        while( $row = $result->fetch_array(MYSQLI_ASSOC) )
            $arrayRet[] = $row;

        $result->close();
        $con->close(); 

        return $arrayRet;

    }
} 
```

然后我有另一个 PHP 文件，它允许我通过 SOAP 访问该函数（使用 Zend Lib）：

服务器.php

```
<?php
  include 'Zend/Soap/AutoDiscover.php';  
  include 'Zend/Soap/Server.php';  
  include 'Functions.php';  

  if(isset($_GET['wsdl']))   
  {  
     $autodiscover = new Zend_Soap_AutoDiscover();  
     $autodiscover->setClass('Functions');  
     $autodiscover->handle();  
  }   
  else   
  {  
     $server = new Zend_Soap_Server("http://localhost/webservice/Server.php?wsdl");  
     $server->setClass('Functions');  
     $server->handle();  
  }  
?> 
```

到目前为止，一切看起来都很正常。如果我编写一个 php 客户端，我可以使用 web 服务并访问返回的数组，如下所示：

```
<?php

$client = new Zend_Soap_Client('http://localhost/webservice/Server.php?wsdl');
$arrayRet = $client->Function1();

foreach($arrayRet as $row )  
{  
 ?>
    <b>Field1: </b><?php echo $row['field1']; ?><br>
    <b>Field2: </b><?php echo $row['field2']; ?><br>
    <b>Field3: </b><?php echo $row['field3']; ?><br>
<?php  
  }  
?> 
```

好的，现在我的问题是我不是在写一个 php 客户端，而是一个 Android 客户端。我正在使用 ksoap2 库来实现它。有了这个库，我可以按照[这个算法](https://stackoverflow.com/a/12070642/1521115)处理带有键和值的“普通数组” 。使用他的属性：

```
 SoapObject category_list = (SoapObject) property;
    String key = category_list.getProperty("key").toString();
    String value = category_list.getProperty("value").toString(); 
```

但是上面函数的响应（如果我复制 toString() 结果）看起来像：

```
Function1Response
{
  return=
  [
   Map{
    item=anyType{key=field1; value=hello; }; 
    item=anyType{key=field2; value=web; }; 
    item=anyType{key=field3; value=service; };}, 

   Map{
    item=anyType{key=field1; value=hello2; }; 
    item=anyType{key=field2; value=web2; }; 
    item=anyType{key=field3; value=service2; };}, 

   Map{
    item=anyType{key=field1; value=hello3; }; 
    item=anyType{key=field2; value=web3; }; 
    item=anyType{key=field3; value=service3; };}
   ]; 
  } 
```

我可以使用 key 和 value 属性来迭代这个响应，但我认为如果我能有这样的响应会更好（和高效）：

```
Function1Response
{
  return=
  [
   Map{
    item=anyType{field1=hello; }; 
    item=anyType{field2=web; }; 
    item=anyType{field3=service; };}, 

   Map{
    item=anyType{field1=hello2; }; 
    item=anyType{field2=web2; }; 
    item=anyTypefield3=service2; };}, 

   Map{
    item=anyType{field1=hello3; }; 
    item=anyType{field2=web3; }; 
    item=anyType{field3=service3; };}
   ]; 
  } 
```

所以我可以像这样检索它们：

```
 SoapObject category_list = (SoapObject) property;
    String field1 = category_list.getProperty("field1").toString();
    String field2 = category_list.getProperty("field2").toString();
    String field3 = category_list.getProperty("field3").toString(); 
```

那可能吗？我认为它可以在 php 服务器端以某种方式完成。但我不知道。我一直在这里和那里阅读，但似乎没有人有这个问题..或解决方案。

我很抱歉发了这么长的帖子。如果我不够清楚，我可以提供更多代码细节或更好地解释它。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:45:09.123

好吧，我确实找到了解决方案。

PHP 服务器中将在 web 服务中发布结果的函数如下所示：

```
class Functions  
{
    /** 
    *
    * @return array 
    */  
    public function Function1()  
    { 

        $con = new mysqli(server, user, pass, database);

        if ($con->connect_errno) {
            die(__FUNCTION__ . $con->connect_error);
        }

        $con->set_charset('utf8');
        $arrayRet = array();

        $query = 'select field1, field2, field3 from table1';

        if(!$result = $con->query($query)){
            die(__FUNCTION__ . $con->error);
        }

        while( $row = $result->fetch_array(MYSQLI_ASSOC) ){
            $myClass = new TestClass();
            $myClass->field1 = $row["field1"];
            $myClass->field2 = $row["field2"];
            $myClass->field3 = $row["field3"]; 
            array_push($arrayRet, $myClass);
        }

        $result->close();
        $con->close(); 

        return $arrayRet;

    }
} 
```

我之前创建了一个具有所有相关属性的类，如下所示：

测试类.php

```
<?php
class TestClass 
{
    /**
    * @var string 
    */
    public $field1;

    /**
    * @var string 
    */
    public $field2;

    /**
    * @var string 
    */
    public $field3;

}

?> 
```

所以基本上我们返回一个数组，其中包含该类的所有不同实例作为项目。

现在，在 Android 客户端（始终使用 ksoap2 库）中，我收到如下响应：

```
Function1Response
{
  return=
  [
    Struct{field1=hello; field2=web; field3=service;  },
    Struct{field1=hello2; field2=web2; field3=service2; }, 
    Struct{field1=hello3; field2=web3; field3=service3;}
  ]; 
} 
```

我能够迭代它：

```
 //call
        androidHttpTransport.call(SOAP_ACTION, envelope);

        //envelope response
        SoapObject result = (SoapObject) envelope.bodyIn;

        //retrieve the first property, actually the array
                Vector result3 = (Vector) result.getProperty(0);

        //iterate
        Enumeration e=result3.elements(); e.hasMoreElements();)
        {
            //each object from the array its an Soap Element that contanins the properties defined in the php class
            SoapObject item=((SoapObject)e.nextElement());

            String field1 = item.getProperty("field1").toString();
            String field2 = item.getProperty("field2").toString();
            String field3 = item.getProperty("field3").toString();

            stringBuilder.append(
                    "Field1: " + codi + "\n"+ 
                    "Field2: "+ titol +"\n"+ 
                    "Field3: "+ descr +"\n"+
                    "******************************\n");
        } 
```

就是这样......我希望它对其他人有用。谢谢

# html - unable to make a button in html and css

> ID：12499434
> 
> 赞同：-3
> 
> 时间：2012-09-19T16:58:41.847
> 
> 标签：html, css, xhtml

I start with the plain old way of making a button.

```
<div id="button">
<a href="#"><img src="button.png"></a>
</div> 
```

After that whenever someone hovers mouse over the button the image should change but it doesn't, relavant css is

```
#button a:hover
{
    background-image: url('button2.png');
} 
```

What is wrong here ? why isn't the image on the button being changed in response to mouse hovering.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:00:24.297

if you want to do it this way you have to set a background image in the first place. The button you are building actually contains an actual `image` tag and not a background-image.

So possible work around: Set button.png as background-image for the button like this:

```
#button a
{
    background-image: url('button.png');
    height: 20px; /* set to actual height of button image */
    width: 200px; /* set to actual width of button image */
} 
```

and then for the hover state do:

```
#button a:hover
{
    background-image: url('button2.png');
} 
```

Don't forget to set height and width of the `#button a` (set it to the dimensions of the image) otherwise it won't show.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:03:21.227

您必须将代码更改为：

```
<div id="button">
<a href="#">&nbsp;</a>
</div> 
```

并且，在 CSS 中：

```
#button
{
    width: /* image width goes here */px;
    height: /* image heightgoes here */px;
}
#button a
{
    display:block;
    background-image: url('button.png');
    text-decoration:none;
}
#button a:hover
{
    background-image: url('button2.png');
} 
```

* * *

出于 SEO 的目的，您还可以在 中写入文本`<a>`，例如：

```
<div id="button">
<a href="#">Title of the link</a>
</div> 
```

然后以这种方式隐藏它：

```
#button
{
    overflow:hidden;
    text-indent:-999px;
    width: /* image width goes here */px;
    height: /* image heightgoes here */px;
} 
```

或者这样：

```
#button
{
    overflow:hidden;
    width: /* image width goes here */px;
    height: /* image heightgoes here */px;
}
#button a
{
    ...other rules
    padding-left:/* a value higher than #button width */px;
} 
```

# javascript - How do I implement the action taken when a specific list item in an Html menu is clicked?

> ID：12499439
> 
> 赞同：0
> 
> 时间：2012-09-19T16:59:11.640
> 
> 标签：javascript, css

This is such a basic question but I am having trouble finding the answer - How do I implement the action taken when a list item in an Html menu is clicked?

I’m using an list in my code as a menu, say:

```
<ul  >
<li id="link1"><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a>
  <ul class="level2">
    <li><a href="#">Link 2a</a></li>
    <li><a href="#">Link 2b</a></li>
    <li><a href="#">Link 2c</a></li>
  </ul></li>
</ul> 
```

I tried giving the menu an id, id="myMenu", and an onclick event, and the js was called, but I couldn’t see a way to identify which item was clicked, just that an line item was clicked in myMenu.

```
<ul id="myMenu" onclick="gothere(id)">
<li><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a>
  <ul class="level2">
    <li><a href="#">Link 2a</a></li>
    <li><a href="#">Link 2b</a></li>
    <li><a href="#">Link 2c</a></li>
  </ul></li>
</ul>

<script type="text/javascript">
function gothere(id)
{
alert("got here "+id) ; 
}
</script> 
```

I tried adding an id on a child element, id="link1", and that worked, but the js was called for the child and then for the parent.

```
<ul id="myMenu" onclick="gothere(id)">
<li id="link1" onclick="gothere(id)"><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a>
  <ul class="level2">
    <li><a href="#">Link 2a</a></li>
    <li><a href="#">Link 2b</a></li>
    <li><a href="#">Link 2c</a></li>
  </ul></li>
</ul> 
```

I can use this approach to get what I need but is there a better way?

I am looking for something which sends the least amount of html over the wire (the reason I am redoing this menu from it's former implementation).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:27:33.687

识别处理程序中的元素目标或 srcElement，不要传递参数：

```
document.getElementById("myMenu").onclick=goThere;

function goThere(e){
  e= e || window.event;
  var who=e.target || e.srcElement;
  if(who.tagName=='LI'){
    //handle the clicked list item

  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:06:38.393

您不应该内联附加事件。用 javascript 附加它们。

```
<ul id="myMenu">
<li id="link1"><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a>
  <ul class="level2">
    <li><a href="#">Link 2a</a></li>
    <li><a href="#">Link 2b</a></li>
    <li><a href="#">Link 2c</a></li>
  </ul></li>
</ul>​ 
```

请注意，为了简单起见，我在这里使用 jQuery：

```
$("#myMenu").click(function(e){
    console.log(e.target);
});​ 
```

[http://jsfiddle.net/2rjgd/](http://jsfiddle.net/2rjgd/)

与 vanilla javascript 的概念是相同的，使用对象的`target`属性`event`来找出`click`事件的来源。

[http://jsfiddle.net/2rjgd/1/](http://jsfiddle.net/2rjgd/1/)展示了如何使用 vanilla js 实现这一点。（在非 IE 浏览器中）

```
document.getElementById("myMenu").addEventListener("click", function(e){
    console.log(e.target);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:16:24.490

无论哪种方式，您都需要一种方法来识别被单击的元素。Shmiddty 为您提供了查找按名称单击的元素的目标的方法。然后，您可以编写 if/then 语句来打开窗口或根据特定名称跟踪链接。

这可能比仅仅为元素分配 ID 并检查它们更困难/更复杂。您可以在 vanilla js 中执行此操作，使用如下语句：

```
var myLink1 = document.getElementById("link1");
myLink1.onclick=window.open("http://www.webaddresshere.com","_self"); 
```

如果可以的话，我的建议是使用 JQuery。它可以让你做这样的事情：

```
$('li[id^=link1]').click(window.open("http://www.webaddresshere.com","_self")); 
```

# iphone - UIScrollView did Scroll

> ID：12499444
> 
> 赞同：2
> 
> 时间：2012-09-19T16:59:27.370
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiscrollviewdelegate

I want to show an image that stays on the page for 5 seconds but appears everytime my scrollview scrolls. So obviously i need to marry animation for the `UILabel` and some method of `UIScrollView`. Im not sure which one to use to be honest. Also i have two `UIScrollView`s on one `UIViewController` so i dont know what i should set as delegate.

The following is the animation i have at the moment

```
 [UIView animateWithDuration:0.3 animations:^{  // animate the following:
    pageCountImage.frame = CGRectMake(0, 0, 100, 50); // move to new location
}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:40:00.553

您的视图控制器可以是两个滚动视图的代表。同意@Ravi，您可以使用委托参数来确定正在滚动的滚动视图。

听起来您需要打包一些动画才能对 UI 有意义：

```
// hide or show the page count image after a given delay, invoke completion when done
- (void)setPageCountImageHidden:(BOOL)hidden delay:(NSTimeInterval)delay completion:(void (^)(BOOL))completion {

    BOOL currentlyHidden = self.pageCountImage.alpha == 0.0;
    if (hidden == currentlyHidden) return;

    [UIView animateWithDuration:0.3 delay:delay options:UIViewAnimationOptionBeginFromCurrentState animations:^{
        self.pageCountImage.alpha = (hidden)? 0.0 : 1.0;
    } completion:completion];
}

// move the page count image to the correct position given a scroll view content offset
- (void)positionPageControlForContentOffset:(CGFloat)xOffset {

    // assume page width is a constant (the width of a page in the scroll view)
    NSInteger page = xOffset / kPAGEWIDTH;

    // assume max page is a constant (the max number of pages in scroll view)
    // scroll positions in the "bounce" will generate page numbers out of bounds, fix that here...
    page = MAX(MIN(page, kMAXPAGE), 0);

    // kPAGE_INDICATOR_WIDTH the distance the page image moves between pages
    // kPAGE_INDICATOR_ORIGIN the page image x position at page zero
    CGFloat xPosition = kPAGE_INDICATOR_ORIGIN + page * kPAGE_INDICATOR_WIDTH;

    // assume y position and size are constants
    CGRect pageIndicatorFrame = CGRectMake(xPosition, kYPOS, kWIDTH, kHEIGHT);

    // finally, do the animation
    [UIView animateWithDuration:0.3 animations:^{
        self.pageCountImage.frame = pageIndicatorFrame;
    }];
} 
```

然后在视图中滚动：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

    if (scrollView == /* the scroller with the page control */) {

        [self setPageCountImageHidden:NO delay:0.0 completion:^(BOOL finished) {
            [self positionPageControlForContentOffset:scrollView.contentOffset.x];
            [self setPageCountImageHidden:YES delay:5.0 completion:^(BOOL finished){}];
        }];
    }
    // and so on... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:10:17.970

你应该实施`<UIScrollViewDelegate>`. 利用该方法`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`并在其中编写动画代码。如果你有多个滚动视图，你可以这样做：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if(scrollView == myScrollView1)
        // do something
    else if (scrollView == myScrollView2)
        // do something else
    else
        // do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-12T13:48:11.173

就像 tableview 你应该配置和控制你的滚动动作。您可以在此处编写控制器的扩展并控制所有滚动操作。例如，您可以检查：

```
extension ExampleViewController: UIScrollViewDelegate {

    func scrollViewWillBeginDragging(_ scrollView: UIScrollView) {
        // your actions here
    }

    func scrollViewDidEndScrollingAnimation(_ scrollView: UIScrollView) {
        // your actions here
    }

    func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {
        // your actions here
    }

    func scrollViewDidScroll(_ scrollView: UIScrollView) {
        // your actions here
    }
} 
```

# javascript - How to kill script in WebView?

> ID：12499445
> 
> 赞同：1
> 
> 时间：2012-09-19T16:59:26.313
> 
> 标签：javascript, android, webview, kill

I use WebView for JS-scripts executing. But sometimes this script can hang. I want to set Timer before script executing and kill this script after specified delay (if this script working too long time). But how to kill script? I've try to use WebView.stopLoading(), but it doesn't help.

This is my code:

```
WebView webView;

void runScript() {

    webView = new WebView(context);

    TimerTask timerTask=new TimerTask() {
                @Override
                public void run() {
                    webView.stopLoading();
                }
            };
    Timer timer=new Timer();
    timer.schedule(timerTask, 5000);

    WebSettings webSettings = webView.getSettings();
    webSettings.setSavePassword(false);
    ...
    webView.setWebChromeClient(new ChromeClient(new JSHandler(context)));
    webView.loadData("<script language=\"JavaScript\">\n" + jsCode + "\n</script>", "text/html", "utf-8");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:38:34.923

我找到了解决方案： WebView.destroy();

# mysql - merge two mysql tables into a third table

> ID：12499446
> 
> 赞同：1
> 
> 时间：2012-09-19T16:59:35.720
> 
> 标签：mysql, merge

I have two mysql tables:

table 1:

```
 id  name  type
     1    a    123
     2    b    125 
```

table 2:

```
 id  text
    1   test1
    2   test2 
```

these two tables need to be merged into a third table

table3:

```
 id name type text 
```

The id is an auto increment id. the first two tables have data that are not related. I mean, row for id=1 in table 1 has nothing to do with the row for id=1 in table two. So, I basically want to write a sql script which would insert values into table 3 to look like this in the end:

table3:

```
 id name  type   text
    1   a    123
    2   b    125
    3               test1
    4               test2 
```

the ids in the old tables and the new table don't have to match. Just the data from the tables need to be in the new table. I am very new to mysql and if anyone can help me with this, it would be great!

thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:06:30.710

可以通过以下方式完成：

```
CREATE TABLE Table3 (
  id int auto_increment, 
  name ..., 
  type int, 
  text ...,
  PRIMARY KEY (id)
);

INSERT INTO table3 (name, type, text) 
     SELECT name, type, text FROM (
       SELECT name, type, NULL AS text FROM table1
       UNION ALL
       SELECT NULL as name, NULL as type, text FROM table2) AS t 
```

使用自动增量，我们根本不需要重新计算`id`。

这是一个供您使用的**[SQL Fiddle 。](http://sqlfiddle.com/#!2/c6d5e/2)**)

我实际上不明白你的方案中的空白空间是什么，并假设它都是 NULL。如果没有，您可以`NULL`在此查询中替换为您想要的任何默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:42:18.293

由于没有任何关系，从@raina77ow 的表开始，但只需使用两个查询：

```
INSERT INTO table3 (name, type, text)
SELECT name, type, NULL
from table1;

INSERT INTO table3 (name, type, text)
SELECT NULL, NULL, text
from table2; 
```

# jquery - php and datatable row delete/update

> ID：12499453
> 
> 赞同：0
> 
> 时间：2012-09-19T17:00:00.200
> 
> 标签：jquery, datatable, auto-update

I use DataTable to display table here is a code:

```
$(document).ready(function() {
$('#example').dataTable( {
        "iDisplayLength": 50,
    "sPaginationType": "full_numbers",
     "bStateSave": true
} );
} );
</head>
<body>
             <table class="display" id="example">
            <thead>
                <tr>
                <th class="id-th"><strong>ID</strong></th>
                <th class="date-th"><strong>Date Added</strong></th>
                <th class="fullname-th"><strong>Full name</strong></th>
                <th class="email-th"><strong>Email</strong></th>
                <th class="visits-th"><strong>Visits</strong></th>
                <th class="totalleads-th"><strong>Total Leads</strong></th>
                <th class="uniqueleads-th"><strong>Unique Leads</strong></th>
                <th class="unpaid-th"><strong>Unpaid Leads</strong></th>
                <th class="action-th"><strong>Actions</strong></th>
              </tr>
</thead>
<tbody>
<?php$query = "SELECT * FROM publishers";
$result = mysql_query($query) or die("Query failed: " . mysql_error());while ($row = mysql_fetch_array($result))
{
$publisher_id = $row['id'];
$publisher_datetime = $row['date_time'];
$publisher_firstname = $row['first_name'];
$publisher_lastname = $row['last_name'];
$publisher_email = $row['email']; ?>
                <tr class="">
                <td class="id-th"><strong><?php echo $publisher_id; ?></strong></td>
                <td class="date-th"><strong><?php echo $publisher_datetime; ?></strong></td>
                <td class="fullname-th"><strong><?php echo "$publisher_firstname $publisher_lastname"; ?></strong></td>
                <td class="email-th"><strong><?php echo $publisher_email; ?></strong></td>

                <td class="visits-th"><strong><?php echo $publisher_visits; ?></strong></td>
                <td class="totalleads-th"><strong><?php echo $publisher_total; ?></strong></td>
                <td class="uniqueleads-th"><strong><?php echo $publisher_unique; ?></strong></td>
                <td class="unpaid-th"><strong><?php echo $publisher_unpaid; ?></strong></td>
                <td class="action-th">
                    <ul class="button-table-head">
                        <li><div class="button-head edit-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Edit" data-style-tooltip="tooltip-mini-slick"><span>Edit</span></a></div></li>
                        <li><div class="button-head delete-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Delete" data-style-tooltip="tooltip-mini-slick" onclick="jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function(r) {
        jAlert('Publisher deleted');
    });"><span>Delete</span></a></div></li>
                    </ul>
                </td>
              </tr><?php } ?></tbody></table> 
```

So now my question is - when I edit or delete row - do I have to RELOAD page each time in order for update to show ? I tried reading the instructions on DataTable, but I really don't understand it.

Thanks for tips !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T15:10:44.587

您可以进行 jquery ajax 调用以删除行并刷新数据表以显示正确的分页和正确的记录。我搜索了许多方法来刷新数据表，但我最终使用的功能可以满足您的所有需求。函数取行号。作为输入执行删除行操作和刷新数据表。这就是我所做的。

在 for 循环中创建表时。分配编号 从 0 开始作为 tr 的 id。>

```
<script>
    table = $('#table_id').datatables();
    $(delete_row).click(function(){
     ..
     var row_no=$(this).closest("tr").attr("id");
     $.ajax({
        ...
        success : function(data) {
        ...
        table.fnDeleteRow(row_no);
     }
     });
     });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:11:27.677

**如果**你想使用纯 PHP，那么可以。

如果您对其他方法持开放态度，例如使用 AJAX 调用 PHP 脚本，则**不要**：

制作一个 PHP 脚本来更新/添加/删除数据库中的数据，并制作另一个脚本来从数据库中检索所需的数据。您可以使用 AJAX 尽可能多地调用这两种脚本，并继续使用检索数据脚本（再次使用 AJAX 调用）来显示更新的数据。

# gwt - 向客户端发送服务器信息

> ID：12499455
> 
> 赞同：0
> 
> 时间：2012-09-19T17:00:15.610
> 
> 标签：gwt, client-server

上学期我们不得不`Ludo`在`JavaScript`和`HTML/CSS`. 那很容易。现在我们必须开发一个后端`GWT (Java)`来创建一个多人游戏。遗憾的是，我们没有太多关于如何使用 GWT 进行开发的信息，而且一开始练习非常困难。

目前我正在尝试创建一种不同玩家可以加入的大厅。我的想法是使用一些输入字段，玩家可以在其中输入他的名字并加入大厅。但是我不知道如何给其他客户一个新玩家加入的信息。

我创建了一个`asynchronous interfaces`（RPC），玩家可以将他的名字提交给服务器（就像[这个](https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication)例子）。这工作正常。但是我应该如何分享这些信息？我们的讲解员说我们应该使用 JSON 来共享信息，但我不知道在这种情况下这应该如何帮助。有没有办法向客户发送信息？我读了很多，只是发现使用其他库作为 gwt-comet。

我现在真的知道如何继续下去了。我感谢每一个帮助和信息！

格雷茨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:28:09.733

你有两个选择：推和拉。

“拉”选项：

其他玩家在加入大厅和/或做其他事情时会获得所需的信息。您还可以安排定期提取此信息（例如每 10 分钟一次）。您可以使用相同的 RPC 机制从服务器获取数据到客户端。“拉”是指客户端发起请求，服务器以信息响应。

“推”选项：

当有新玩家加入时，服务器会将这些新数据推送给所有其他玩家。最佳解决方案取决于您的游戏实施。正如让-米歇尔所提到的，彗星是一个不错的选择，但从资源的角度来看，它更加复杂和“昂贵”。如果您需要游戏的实时状态更新，您应该使用此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:28:54.260

我会建议[**Errai**](http://www.jboss.org/errai)，`ErraiBus`尤其是。从 Java 的角度来看，您只是通过事件总线（观察者**GoF模式）发送一些事件，而****Ajax Push**的所有魔力都在幕后发生。

# android - Multiplexed hotspot in Android

> ID：12499456
> 
> 赞同：9
> 
> 时间：2012-09-19T17:00:17.760
> 
> 标签：android, api, wifi, android-wifi

Is it possible to write an app in Android using the wifi API which will act like a hotspot (so granting network access to wifi clients) while still allowing the local wifi device to connect to another wifi network ?

The one I've tested are disabling local Wifi connection in order to create a hotspot.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T09:29:58.203

几个月后我在这里发帖，以便希望在 Android 设备上实现此功能的人可能会有所帮助。

有一种方法可以让一个无线芯片在混合模式下工作，同时*启用站点模式*(STA) 和*接入点模式*(AP)。

为此，我将芯片的无线驱动程序替换为无线驱动`multi-role`程序。幸运的是，我的芯片支持这种模式，但并不是每个无线芯片都支持这种模式。我的芯片是基于 TI 的芯片*(wl1271)*，支持多角色，但以前的驱动程序不支持。

一旦我得到这个新驱动程序，我必须将它与我的内核一起重新编译，以便生成`.ko`无线驱动程序和相关`mac80211`模块`cfg80211`（提供新驱动程序所需的 API）。最后一步是使用 TI 提供的自定义补丁版本`wpa_supplicant`进行升级。`hostapd`

`wl1271` *同样，对于只*对这里感兴趣的人，我使用并报告了在*Android 4.0.4 ICS*上工作的相应驱动程序/工具：

> [https://github.com/TI-OpenLink/hostap/tree/ol_R5.SP3.01](https://github.com/TI-OpenLink/hostap/tree/ol_R5.SP3.01)
> 
> [https://github.com/TI-OpenLink/iw/tree/ol_R5.SP3.01](https://github.com/TI-OpenLink/iw/tree/ol_R5.SP3.01)
> 
> [https://github.com/TI-OpenLink/ti-utils/tree/ol_R5.SP3.01](https://github.com/TI-OpenLink/ti-utils/tree/ol_R5.SP3.01)
> 
> [https://github.com/TI-OpenLink/wl12xx_target_scripts/tree/ol_R5.SP3.01/sta](https://github.com/TI-OpenLink/wl12xx_target_scripts/tree/ol_R5.SP3.01/sta)
> 
> [https://github.com/TI-OpenLink/compat/tree/ol_R5.SP3.01/](https://github.com/TI-OpenLink/compat/tree/ol_R5.SP3.01/)
> 
> [https://github.com/TI-OpenLink/compat-wireless/tree/ol_R5.SP3.01/](https://github.com/TI-OpenLink/compat-wireless/tree/ol_R5.SP3.01/)

如果您的无线芯片有一个多角色驱动程序，那么找出您应该使用的 wpa_supplicant 和 hostapd 的版本或补丁，然后编译/尝试它们可能是值得的。

在该过程结束时，我可以访问两个网络接口（wlan0 和 wlan1），并且可以在 wlan0 上启动 wpa_supplicant 并在 wlan1 上启动 hostapd。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:37:41.877

您所描述的称为[WDS（无线分配系统）](http://en.wikipedia.org/wiki/Wireless_distribution_system)。我认为这个功能没有在 Android wifi API 中实现。它用于无线 AP 以启用上行无线链路。

# asp.net - asp.net website subdomain on fly with IIS url-rewrite-module

> ID：12499458
> 
> 赞同：1
> 
> 时间：2012-09-19T17:00:23.483
> 
> 标签：asp.net, iis, url-rewriting, subdomain

I need to implement the sub domains in asp.net web forms (not MVC) for all clients on fly. Here is the whole scenario I have a General website for every one as `http://mydomain.com`

and once a client is registered to my website, he will be allocated a subdomain as

```
client1.mydomain.com 
client2.mydomain.com 
client3.mydomain.com 
```

and all clients will be served from

`http://mydomain.com/clientwebsite/`

with their customized contents from DB server On the Client website.

I looked about it and came to know that it can be done by IIS URL re Write but we will have multiple links and options on client sites which postbacks with querystring and data. I dont know how to send that and rewrite on backend. it can be

`client1.mydomain.com/mystoreitems` or

`client1.mydomain.com/section=mystoreitems`

Kindly guide me how to do this.

# python-2.7 - Python 中的 Tix 教程

> ID：12499465
> 
> 赞同：6
> 
> 时间：2012-09-19T17:00:56.297
> 
> 标签：python-2.7, tkinter, tix

我最近对 ​​Python 中的 GUI 编程产生了兴趣。

我已经有丰富的 Pygame 经验，但发现使用 Tkinter、Tix 等提供的界面会更容易。

但是，我很难在**Tix for Python**上找到任何体面的文档或教程。（与 Pygame 不同，它有几个我觉得很好的指南/教程）

我在哪里可以找到一个很好的教程？（这仅假定了解 Python，并希望不了解 Tk）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T20:14:41.140

[*Tix*](http://docs.python.org/3.3/library/tkinter.tix.html)是一组最初未包含在标准*Tkinter*发行版中的附加小部件。现在改进的[*ttk*](http://docs.python.org/3.3/library/tkinter.ttk.html)工具包是较新 Python 版本（2.7 或 3.2）*中Tkinter*的一部分，不再需要*Tix 。*更多讨论可以在[这里](http://www.velocityreviews.com/forums/t651741-state-of-the-art-tkinter-tk-8-5-tix.html)找到。

关于现代 Tk 的一个很好的教程可以在[这里](http://www.tkdocs.com/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T01:04:12.310

好吧，经过一些额外的搜索，我找到了自己问题的答案（终于！）

[斯蒂芬·弗格在 Tkinter 中思考](http://www.ferg.org/thinking_in_tkinter/all_programs.html)

看起来很不错，现在我实际上对它的工作原理有了一个很好的理解（耶！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T11:16:29.153

重新扮演 Tix 和 ttk 的角色。它们是不同的东西。Tix 将小部件添加到标准 Tkinter 集中。ttk 添加了复制现有小部件但具有可配置外观的小部件。因此，如果您想让您的 GUI 看起来像使用 ttk 的本机操作系统应用程序，但您只能获得一组有限的小部件。如果您想要更强大的小部件并且不太关心外观，请使用 Tix。

# git - Gitlab：在新的仓库中默认半自动安装钩子脚本

> ID：12499466
> 
> 赞同：2
> 
> 时间：2012-09-19T17:01:07.730
> 
> 标签：git, gitlab

总之，我的问题是：如何确保 gitlab 中所有新创建的存储库都具有默认的初始提交，其中包括我选择的一些文件（挂钩脚本）？

一些背景：我的公司正在改用 git 和 gitlab（远离 svn - hooray！）进行内部开发。

当用户在 gitlab 中创建新仓库时，我希望该新仓库能够自动填充我选择的一些文件。这些文件将是挂钩脚本和安装它们的脚本。这样，当用户克隆他们刚刚创建的存储库时，其中已经包含挂钩脚本（这将强制执行公司提交消息策略），他们可以安装这些脚本。

现在我知道 gitlab 允许您指定一个 cgi 脚本的 url，该脚本将在创建新的 repo 时（以及其他时间）调用。我的想法是在某个地方有一个“骨架”存储库，其中包含适当的初始提交，并让这个 cgi 脚本从该存储库推送到新创建的存储库。

这个计划的问题是权限之一：这个 cgi 脚本需要作为一个设置了 ssh 密钥的用户运行，该用户在新存储库上具有提交访问权限 - 默认情况下在每个新存储库上。

有没有办法确保每个新创建的存储库都可以被 gitlab 中的特定用户写访问？

是否有另一种方法可以确保每个新创建的 repo 都获得指定的初始提交？

有没有更好的方法来确保分发这些我没有想到的钩子脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:54:23.357

我之前遇到过类似的问题，我通过创建一个每个人都可以访问的专用 hooks 存储库来解决它。创建新存储库后，用户应该在此 hooks 存储库中运行脚本。这个脚本只是创建了一个从新仓库的 .git/hooks 目录到 hooks 仓库的符号链接，所有的钩子都存储在这里。这样，用户还可以通过简单地拉取新版本的 hooks repo 来更新他们所有的 hooks。这是相关的问题：[Gitolite: print message after git clone finished](https://stackoverflow.com/questions/6681139/gitolite-print-message-after-git-clone-finished)

这种方法的唯一问题是：用户每次创建新仓库时都需要运行钩子脚本。

# javascript - JQuery DatePicker 的黄瓜步骤

> ID：12499470
> 
> 赞同：0
> 
> 时间：2012-09-19T17:01:11.747
> 
> 标签：javascript, jquery, cucumber, jquery-ui-datepicker

我的页面在输入字段#my_date 上有一个 JQuery UI DatePicker。

我可以使用以下方法启动 DatePicker：

```
page.execute_script %Q{ $('#my_date').trigger("focus") } 
```

如何编写选择特定日期的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:52:58.000

我能够通过使用来解决这个问题：

```
page.execute_script %Q{ $("a.ui-state-default:contains('17')").trigger("click") } 
```

在我的情况下， **17**是要选择的当前月份的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T20:09:35.980

我觉得不需要对 datepicker 进行验收测试；我只是使用字段设置方法

```
find(:css, ".my_date-alt").set '12/31/1999' 
```

# unit-testing - 在 ASP.NET MVC 4 中开始使用 NUnit

> ID：12499472
> 
> 赞同：0
> 
> 时间：2012-09-19T17:01:35.413
> 
> 标签：unit-testing, nunit, asp.net-mvc-4

我是 .NET 单元测试的新手，我想从 NUnit 开始。我正在使用 ASP.NET MVC 4 创建我的项目。我可以从哪里开始学习 NUnit？你能给我推荐一些教程吗？

注意：我**不是**ASP.NET 和 ASP.NET MVC 和 C# 的新手

注意：我有一些在 RoR 中进行单元测试的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:05:21.723

您可以使用 Osherove 的教程和书籍来学习 NUnit。或者叫做单元测试kata的东西。

阅读Roy[的单元测试艺术。](https://rads.stackoverflow.com/amzn/click/com/1933988274)好读。

链接到 kata 测试：[单元测试 Kata](http://osherove.com/tdd-kata-1/)

# ruby-on-rails - 将 Mongoid 更新到 3.0.6 后无法连接到 Heroku 中的 MongoHQ

> ID：12499476
> 
> 赞同：1
> 
> 时间：2012-09-19T17:01:49.217
> 
> 标签：ruby-on-rails, heroku, mongoid, mongohq

我已将我的配置升级到 RoR 1.9.3 并且无法再让它在 Heroku 中工作。

`config/mongoid.yml`内容：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
    options:
      skip_version_check: true
      safe: true 
```

错误：

```
2012-09-19T16:50:39+00:00 app[web.1]: Mongoid::Errors::NoSessionsConfig (
2012-09-19T16:50:39+00:00 app[web.1]: Problem:
2012-09-19T16:50:39+00:00 app[web.1]:   No sessions configuration provided.
2012-09-19T16:50:39+00:00 app[web.1]: Summary:
2012-09-19T16:50:39+00:00 app[web.1]:   Mongoid's configuration requires that you provide details about each session that can be connected to, and requires in the sessions config at least 1 default session to exist.
2012-09-19T16:50:39+00:00 app[web.1]: Resolution:
2012-09-19T16:50:39+00:00 app[web.1]:   Double check your mongoid.yml to make sure that you have a top-level sessions key with at least 1 default session configuration for it. You can regenerate a new mongoid.yml for assistance via `rails g mongoid:config`. 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:09:56.340

我的缩进是错误的，这是固定版本：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: true 
```

# java - 通过java NIO读取文件

> ID：12499479
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:01:55.710
> 
> 标签：java, io, nio

> **可能重复：**
> [任何提高读取文件性能的方法，比缓冲读取器更好](https://stackoverflow.com/questions/12498731/any-way-to-improve-the-performance-for-reading-a-file-better-than-buffered-read)

我正在通过缓冲阅读器读取一个名为 ty.log 的文件，该文件大小为 20 mb，请告知如何通过 NIO 读取相同的内容。下面是我的程序，请告诉我如何转换，以便我可以通过 java nio 读取相同的文件也在jdk 1.6下

```
public static void main(String[] args)
{

    BufferedReader br = null;
    long startTime = System.currentTimeMillis();

    try
    {
        String sCurrentLine;

        br = new BufferedReader(new FileReader("C://ty.log"));

        while ((sCurrentLine = br.readLine()) != null)
        {

        }
        long elapsedTime = System.currentTimeMillis() - startTime;

        System.out.println("Total execution time taken in millis: " + elapsedTime);

    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    finally
    {
        try
        {
            if (br != null)
                br.close();
        }
        catch (IOException ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:06:42.450

对于使用 nio 读取文件，您可以使用`java.nio.channels.FileChannel`

班级。 [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)解释了这一切。

# java - 如何用jar文件编译java文件

> ID：12499482
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:02:04.767
> 
> 标签：java, jar, compilation

我有一个导入几个 jar 库的 java 项目。现在我想在unix机器上运行它。没有可用的 java IDE，所以我需要使用 -javac 之类的命令。但我不知道如何用 .jar 文件编译 .java 文件。我把.java文件和.jar文件放在同一个文件夹下，例如java/com/Tstream：Tstream.java, twitter4j-core.jar, twitter4j-stream.jar, twitter4j-async.jar。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:03:26.743

您应该使用`javac`带有`-classpath`( `-cp`) 选项 的工具

```
javac -classpath twitter4j-core.jar;twitter4j-stream.jar;twitter4j-async.jar java/com/Tstream/Tstream.java 
```

文件树应该是

```
/twitter4j-core.jar  
/twitter4j-async.jar  
/twitter4j-stream.jar  
/java/com/Tstream/Tstream.java 
```

# mysql - 通过忽略带符号的数字来排序 MySQL

> ID：12499490
> 
> 赞同：1
> 
> 时间：2012-09-19T17:02:45.520
> 
> 标签：mysql

我有 10 行，其列“passion_level”既有负值又有正值：

```
-3 5 8 9 -11 0 3 1 10 -8 
```

如果我运行查询`SELECT * FROM table ORDER BY passion_level DESC`，我会按照您的预期得到数字，从高到低，列表底部的负数。但是我们如何让 mysql 排序一列有符号整数而不考虑符号（将负数视为正数），以便我们按以下顺序返回行：

```
-11 10 9 8 -8 5 -3 3 1 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:05:26.357

您可以使用[`ABS`](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs). 它将返回绝对值：

```
mysql> 选择 ABS(2);
        -> 2
mysql> 选择 ABS(-32);
        -> 32
```

```
SELECT columnList FROM table ORDER BY ABS(passion_level) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:05:49.773

尝试创建一个新列并使用 ABS()，然后根据新列 desc 重新排序

```
SELECT *,ABS(passion_level) as order FROM table ORDER BY ABS(passion_level) DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:05:57.097

```
SELECT * 
FROM table 
ORDER BY abs(passion_level) DESC 
```

# javascript - Windows 8 Metro 应用程序中是否提供所有 JavaScript 功能？

> ID：12499496
> 
> 赞同：0
> 
> 时间：2012-09-19T17:03:08.583
> 
> 标签：javascript, html, css, windows-8, microsoft-metro

在使用 JavaScript 为 Windows 8 设计 Metro 应用程序时，是否所有功能都可用，例如完全 AJAX 支持？那么 CSS 呢？

支持什么，不支持什么？我还没有找到一个全面的命令参考列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:08:17.930

你问错了 ;) Windows 8 [WinJS API](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)比 Windows 8 / IE10 中的浏览器内 JavaScript具有**更多的功能。**

更新：感谢 Jeremy Poster，指出 Windows 应用商店应用程序存在一些安全限制（因为与浏览器相比，它具有更多权限）。最明显的是：强制 utf8、缺席`window.alert`及其朋友、默认在浏览器中打开的 url 链接、.js 文件缓存`.innerHTML`和公司过滤。查看所有[差异](http://msdn.microsoft.com/en-us/library/windows/apps/hh465380.aspx#differences)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:08:18.003

根据 JavaScript [Getting Started](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)页面，您可以使用 HTML 创建应用程序（因此我假设完全 DOM 访问），以及使用 XMLHttpRequest 的网络请求。

查看博客阅读器演示应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T11:08:44.737

由于 Metro 中的 Javascript 在 IE10 浏览器上运行，您可以查看[http://caniuse.com/](http://caniuse.com/)了解有关哪个浏览器支持什么的信息。此外，您还可以从“WinRT”中使用其他 API。

# c# - ListBox.ItemContainerGenerator.ContainerFromIndex 返回 null

> ID：12499498
> 
> 赞同：1
> 
> 时间：2012-09-19T17:03:19.317
> 
> 标签：c#, silverlight, windows-phone-7, data-binding, listbox

我在 Pivot 部分中有一个 dataBinding ListBox。

在另一个 Pivot 部分中，我有一个为 ListBox 创建新项目的表单。

当我向 ListBox 添加新项目时，我需要访问新的 ListBoxItem 以查找 TextBox 控件并修改 Text 值，但是

```
ListBoxItem lbItem = allItemsListBox.ItemContainerGenerator.ContainerFromIndex(itemIndex) as ListBoxItem; 
```

始终返回 null。

问题似乎是 ListBox 不可见，所以新的 ListBoxItem 是虚拟的。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:16:07.590

为什么不将数据绑定与 DataTemplates 一起使用，而不是尝试直接修改控件？

例如：

代码：

```
// Data binding class
public class Data
{
    // Implement INofifyPropertyChanged
    public string Text { get; set; }
}

// Code to bind it to Pivot

ObservableCollection<Data> list = new ObservableCollection<Data>();
// populate list
Pivot1.ItemsSource = list; 
```

XAML：

```
<Pivot Name="Pivot1">
    <Pivot.ItemTemplate>
        <DataTemplate>
            <TextBlock Text={Binding Text}" />
        </DataTemplate>
    </Pivot.ItemTemplate>
</Pivot> 
```

现在，要更改特定 TextBlock 的 Text，您需要做的就是从列表中将关联的 Data 对象的值更改为它。

# apache - htaccess mod_rewrite HTTP 500 错误

> ID：12499500
> 
> 赞同：0
> 
> 时间：2012-09-19T17:03:21.427
> 
> 标签：apache, .htaccess, mod-rewrite

此特定代码适用于一台服务器，但不适用于另一台服务器。工作的有 Apache2，另一个 Apache1。我怎样才能使它在两者上都起作用？

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /

  # SEO translation
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(?:[a-z]{2}/)?.*-p-([0-9]+)$ page.php?page_id=$1&%{QUERY_STRING}
  RewriteRule ^(?:[a-z]{2}/)?(.*) $1?%{QUERY_STRING}
</IfModule> 
```

输入 URL 备选方案：

*   www.domain.com/some-fancy-title-p-10
*   www.domain.com/en/some-fancy-title-p-10
*   www.domain.com/sv/some-fancy-title-p-10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:06:38.440

尝试复制条件。它们仅适用于紧随其后的单个，`RewriteRule`因此您需要为两个规则复制它们：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?(?:[a-z]{2}/)?.*-p-([0-9]+)$ page.php?page_id=$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?(?:[a-z]{2}/)?(.*) $1 [L,QSA] 
```

还要使前导斜杠可选 ( `/?`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:41:14.443

看来 ?: 在 apache1 中不是有效的正则表达式。避免它可以解决问题。

# ruby-on-rails - Heroku 应用程序现在必须使用 github。它还需要 git@heroku.com 遥控器吗？

> ID：12499501
> 
> 赞同：0
> 
> 时间：2012-09-19T17:03:23.493
> 
> 标签：ruby-on-rails, git, heroku, github

我在 heroku 上有一个应用程序，但现在是利用 github 的时候了。

我跑过

```
$ git rm remote origin 
```

并将 github repo 添加为 master。我已经推到了github。

但是当我跑步时

```
$ git remote -v 
```

它列出了 github repo，但它仍然在 git@heroku.com 上列出了远程。

我是否需要删除`git@heroku.com`遥控器才能让 heroku 在启动应用程序时始终从我的 github 存储库中退出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:10:30.917

您可以拥有任意数量的本地遥控器，并且不会影响 Heroku 的功能。

# symfony - 关于依赖关系的错误一次又一次

> ID：12499503
> 
> 赞同：0
> 
> 时间：2012-09-19T17:03:28.920
> 
> 标签：symfony

我将我的项目带到另一台本地计算机上，请求后出现此错误`app_dev.php`：

> 您必须通过运行以下命令来设置项目依赖项： curl -s [http://getcomposer.org/installer](http://getcomposer.org/installer) | php php composer.phar 安装。

所以我运行这些命令，但错误又是一样的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:45:24.417

你确定你用的是2.0版本？因为symfony 2.1中使用了composer

你能显示执行时发生的日志`php composer.phar install`吗？

其他尝试：

*   删除多余的`php`单词`curl -s http://getcomposer.org/installer | php php composer.phar install`
*   删除缓存并使缓存目录可写：`sudo rm -rf app/cache/* && chmod a+rwx -R app/cache/*`

# matlab - 试图访问 r(0)；索引必须是正整数或逻辑

> ID：12499504
> 
> 赞同：1
> 
> 时间：2012-09-19T17:03:39.747
> 
> 标签：matlab

```
 %ENGR 151 Lab 3 Part 3
clc  
clear  
disp('ENGR 151 Lab 3 Part 3')  
disp('Solid Snake')  
disp(' ')  
r = ones(1,41)  
v = ones(1,41)  

for i = 0:0.5:20  
    r(i) = -.05 + round(i) * .05  
    v(i) = (4/3) * pi * r(i)^3  
end 
```

我有点困惑。我认为这是在说我的数组中没有这样的位置不是整数，但是这个问题的方向特别指出“将球体的体积绘制为 r 的函数，r = 0 到 20 逐步使用 FOR 循环时为 0.5。V=(4/3)*pi*R3。这将需要 41 个循环。您需要为变量 r 和 v 分配内存。使用等式 r= -0.5 + i* 0.5 到在给定循环 i 的情况下找到 r。您需要使用适当的下标从上面更新 r 和 v 方程，以将 r 和 v 存储在每个循环中。为什么不直接从 0 到 40 做一个 for 循环，而不是这个 0.5 的增量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:17:48.810

您不妨矢量化您的代码：

```
r = -0.05 + round(0:0.5:20) * 0.05;
v = (4/3) * pi * r .^3 
```

这将使您的代码更加优雅，并避免您在那里遇到的索引问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:13:30.990

如果您尝试填充向量 r，那么您可以使用在 for 循环之外初始化的计数器并递增每个循环

```
cnt = 0;
for i = 0:0.5:20
    cnt = cnt + 1; %increment at the beginning so any users of cnt get the 1-indexed value 
    r(cnt) = -.05 + round(i) * .05  
    v(cnt) = (4/3) * pi * r(cnt)^3  
end 
```

# php - Paypal 标准 - 经常性付款给出错误

> ID：12499509
> 
> 赞同：0
> 
> 时间：2012-09-19T17:03:50.360
> 
> 标签：php, paypal

当我在上面输入 PayPal ID 和密码时，`paypal.com`会显示：

> 您用于进入 PayPal 系统的链接无效。请查看链接并重试

我正在使用以下 HTML 代码将其发送到 PayPal：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" name="_xclick" id="_xclick">
<input type="hidden" name="cmd" value="_xclick-subscriptions">
<input type="hidden" name="upload" value="1">
<input type="hidden" name="rm" value="2">
<input type='hidden' name='currency_code' value='AUD'>
<input type='hidden' name='no_note' value='1'>
<input type="hidden" name="business" value="abc@gmail.com">
<input type='hidden' name='cancel_return' value="http://abc.com/cancelprocessing.php">
<input type='hidden' name='return' value="http://abc.com/cpayment_success.php?paymentid=151">
<input type="hidden" name="notify_url" value="http://abc.com/ipn1.php">
<input type='hidden' name='cancel_return' value="http://abc.com/paypal_cancel.php?paymentid=151">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="custom" value="">
<input type="hidden" name="item_name" value="Plan Details : 52 Week Special ">
<input type="hidden" name="a3" value="9.95">
<input type="hidden" name="p3" value="1">
<input type="hidden" name="t3" value="W">
<!--Here comes new recuring payment parameters comes-->
<input type="hidden" name="src" value="1">
<input type="hidden" name="sra" value="1">
</form> 
```

**这里有什么问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:30:31.553

这个：

```
<input type="hidden" name="business" value="abc@gmail.com"> 
```

abc@gmail.com 不是有效帐户，因此会失败。
如果您将其替换为现有帐户，它将起作用。

（另一方面，它不会破坏它——至少现在是这样，但您可能想要删除“上传”。这不是订阅的适用参数，如此处所示[。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HI00JQU)）

# android - 在加载 URL 之前将内容注入 WebView

> ID：12499510
> 
> 赞同：2
> 
> 时间：2012-09-19T17:03:53.173
> 
> 标签：android, webview

我有一个应用程序，它具有以前存在的基于 Web 的注册过程，我试图在 WebView 中使用它。我需要在 html 中添加一些样式标签，以隐藏一些元素，以便更好地显示我的应用程序中的内容。我可以让它在初始加载时工作，但我不知道如何在 WebView 中从一页到下一页。这是我的工作：

在网站的初始加载时，我`"<style>MY STYLES HERE<`在调用之前获取原始 html 并将 /style>" 附加到字符串

```
wv.loadDataWithBaseURL(url, rawHtml, null, "UTF-8", url); 
```

这非常有效，但是如果用户单击页面上的链接并将另一个页面加载到 WebView 中，则不会调用此代码并且样式标记会丢失。

我假设我需要覆盖 WebViewClient 中的“shouldOverrideUrlLoading”，但我不知道如何从这里截取 html。我想我会尝试类似的东西：

```
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    String rawHtml = getRawHtml(url) + "<style>...</style>";
    wv.loadDataWithBaseURL(url, rawHtml, null, "UTF-8", url);
} 
```

但这显然会将其发送到拦截负载以开始新负载的无限循环中。

我也尝试过覆盖 onPageFinished 并执行以下操作：

```
wv.loadUrl("javascript:(function() { ... })()"); 
```

这有效，只是它会等到整个页面加载完毕后再执行。这会导致页面显示加载了所有的 UI 元素，然后我试图隐藏的所有元素突然消失。我的最终目标是在移动设备上增强网站的外观和感觉，所以这不是一个选择。

我可以在“shouldOverrideUrlLoading”中做些什么来注入样式标签吗？或者如果没有，我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:11:01.567

我遇到了这个问题，并且根据重定向的数量等，我们无法始终使注入的 JavaScript 可用。

至少，您应该使用该`wv.loadUrl("javascript:(function() { ... })()");`方法，但同时在 onPageStarted() 和 onPageFinished() 中调用它。

根据页面的复杂性，您可能还需要在 onLoadResource() 中注入 JavaScript。

# string - Oracle sql - 存储过程 - 在字符串中连接变量

> ID：12499512
> 
> 赞同：2
> 
> 时间：2012-09-19T17:04:02.420
> 
> 标签：string, oracle, stored-procedures, plsql, concat

我有一个这样的存储过程

```
create or replace
PROCEDURE AAA 
(
    p_BBB       IN  VARCHAR,
    ...
)
AS 
T_QUERY varchar2(3000);
BEGIN
     OPEN A_CUR FOR SELECT ... BBB like '%' || p_BBB || '%';

   T_QUERY := 'SELECT BBB like %'|| p_BBB ||'% '; 

END AAA; 
```

问题是，当第一个查询被正确处理时，字符串之间的连接`T_QUERY`给了我错误（*无效字符*）。

既不使用`concat()`，`T_QUERY`也将被传递给另一个执行查询的存储过程。

谁能帮我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:17:53.073

你可以试试

```
T_QUERY :='SELECT BBB like ''%'|| p_BBB ||'%'''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:57:03.060

上述解决方案是正确的。你像这样使用它。

```
create or replace 
PROCEDURE AAA  
( 
    p_BBB       IN  VARCHAR, 
    ... 
) 
AS  
T_QUERY varchar2(3000); 

BEGIN 

     T_QUERY :='SELECT BBB .. like ''%'|| p_BBB ||'%'''; 
     OPEN A_CUR FOR T_QUERY ; 
     ----
     ----

END AAA; 
```

# wpf - 在 infragistics xamGrid 中选择组级别和子级别

> ID：12499513
> 
> 赞同：1
> 
> 时间：2012-09-19T17:04:02.957
> 
> 标签：wpf, infragistics, multi-select

如何在 infragistics xamGrid 中同时选择组级别和子级别。

我有带有父行和子行的 xamGrid。目前我可以选择子行的任意组合或父行的任意组合。我要做的是选择一些父级行和其他父行下的一些子行。如果选择了其他父行，则控件不会让单击选择子行。Ie Control + CLick will not select ( highlight) a child row when any other parent row is selected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:51:56.437

我认为下面的 Infragistics 社区正在讨论同样的问题：

[http://www.infragistics.com/community/forums/t/73836.aspx](http://www.infragistics.com/community/forums/t/73836.aspx)

# ruby-on-rails - 基于键/值存储在 Formtastic 中创建动态表单

> ID：12499514
> 
> 赞同：3
> 
> 时间：2012-09-19T17:04:05.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, formtastic

我正在 Rails 中创建一个应用程序，它将表单定义作为键/值对存储在数据库中。它基本上是一个在线表单生成器。

存储数据是很容易的部分，但我正在尝试使用 formtastic 来呈现动态创建的表单。到处搜索，找不到解决方案。

有没有办法根据键/值对的集合动态生成表单？

就像是：

```
<% @form.fields.each do |f| %>
     <!-- RENDER FIELDS HERE -->
<% end %> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T03:03:39.270

```
<% @form.fields.each do |f| %>
  <!-- RENDER FIELDS HERE -->
<% end %> 
```

除非您使用新的局部变量 f（现在是字段对象）覆盖您的 formtastic 对象，否则这可能会起作用。

# vb.net - 由于 Excel 版本升级，创建数据透视表时出现异常

> ID：12499518
> 
> 赞同：0
> 
> 时间：2012-09-19T17:04:18.477
> 
> 标签：vb.net, excel, excel-2010, vba

我在 vb.net 中开发了一个应用程序，它在报告中创建了一个 excel 数据透视表

我机器上的 excel 版本从 2003 年升级到 2010 年，数据透视表功能失败

`WkbResult.PivotCaches.Add`我查看了 2003 和 2010 版本的调用，除了 2003和 2012之外没有发现任何区别`WkbResult.PivotCaches.Create`

```
Dim WksPivot As Excel.Worksheet = WkbResult.Worksheets("Summary")
Dim WksResult As Excel.Worksheet = WkbResult.Worksheets("Test_Details")
Dim PC As Excel.PivotCache = Nothing
Dim PTS As Excel.PivotTables = Nothing
Dim PT As Excel.PivotTable = Nothing

' This is where it fails even after i changed Add to Create method

PC = WkbResult.PivotCaches.Create(Excel.XlPivotTableSourceType.xlDatabase, WksResult.Range("A:D")) 
```

我试图查看参考资料，并将参考资料更改为显示在我的机器上的更高版本，但我仍然遇到相同的异常

这是异常的一部分

```
System.ArgumentException was unhandled
  Message="The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))"
  Source=""
  StackTrace:
       at System.RuntimeType.ForwardCallToInvokeMember(String memberName, BindingFlags flags, Object target, Int32[] aWrapperTypes, MessageData& msgData)
       at Microsoft.Office.Interop.Excel.PivotCaches.Create(XlPivotTableSourceType SourceType, Object SourceData, Object Version)
       at QCLite.PivotTableManager.CreateResultsPivotTable(Workbook& WkbResult, ListView lstResults) in C:\userdata\Framework\src\06 Utilities\QCLite\QCLite\PivotTableManager.vb:line 23 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:33:16.110

似乎对于 Excel 2010，范围规范为 ("A:D") 不起作用

我将呼叫更改为

```
Dim TotalRows As Integer = WksResult.UsedRange.Rows.Count

PC = WkbResult.PivotCaches.Add(Excel.XlPivotTableSourceType.xlDatabase, WksResult.Range("A1:D" & TotalRows)) 
```

它就像魅力一样。

Add 调用也出人意料地工作得很好。

# ruby - 如何将 ruby 应用程序部署到网站？

> ID：12499520
> 
> 赞同：3
> 
> 时间：2012-09-19T17:04:39.720
> 
> 标签：ruby, sinatra

编程超级新手。

无论如何，假设我有一个脚本，它可以做一些简单的事情，比如告诉您使用 Sinatra 用 Ruby 编写的框（点击提交按钮后）输入的字数。

如果我希望此文本框显示在网页上，例如 mysite.com/simple_app，我将如何设置它？

我为超级菜鸟问题道歉，但我不知道从哪里开始。

我检查了这个问题（http://stackoverflow.com/questions/9489803/how-to-turn-ruby-script-into-a-web-app），因为我已经在 Sinatra 中使用 localhost，所以我有点想知道下一步是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:22:31.973

我非常推荐你试试[Heroku](http://www.heroku.com/)。

由于您对编程比较陌生，因此您还不想弄乱服务器的东西。Heroku 处理大部分服务器配置，因此您可以更专注于您的应用程序。

它还提供免费帐户，当然有限制。但这对于初学者来说非常好，与通常每月花费 20 美元的 VPS 解决方案相比。

查看这篇关于使用 Sinatra 和 Heroku 部署应用程序的精彩文章：

[Sinatra + Heroku = 超快速部署](http://rubysource.com/sinatra-heroku-super-fast-deployment/)

以及如何在 Heroku 上部署任何基于 Rack 的应用程序：

[在 Heroku 上部署基于机架的应用程序](https://devcenter.heroku.com/articles/rack)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:13:31.357

如果您只想将它​​部署在某个地方并且不想弄乱服务器，请尝试将您的 Sinatra 应用程序推送到[Heroku](http://heroku.com)。他们有一些相当全面的[文档](https://devcenter.heroku.com/articles/ruby)可以帮助您入门。

如果你有自己的服务器，它会涉及更多，尽管你为了简单而牺牲了你的控制权。最简单的方法是在所述服务器上检查您的应用程序的工作副本，然后像在`localhost`.

谷歌`ruby deployment`。这有点像雷区，尽管这些选项比 5 年前更具吸引力。对于最简单的工作，请执行上述任一操作。对于其他任何事情，你和我们其他人在一起；）

# python - 在 Windows 上的 select.select 中使用 sys.stdin

> ID：12499523
> 
> 赞同：7
> 
> 时间：2012-09-19T17:04:53.207
> 
> 标签：python, windows, winapi, network-programming

> **可能重复：**
> [select() 可以在 Windows 下与 Python 中的文件一起使用吗？](https://stackoverflow.com/questions/10842428/can-select-be-used-with-files-in-python-under-windows)

在 UNIX 上，我可以在 Python 中`sys.stdin`传递`select.select`。我试图在 Windows 上执行此操作，但`select.select`在 Windows 上的 Python 中不允许这样做。

要更准确地描述我在做什么，请参阅[https://github.com/eldarion/gondor-client/blob/ccbbf9d4b61ecbc2f66f510b993eb5fba0d81c09/gondor/run.py](https://github.com/eldarion/gondor-client/blob/ccbbf9d4b61ecbc2f66f510b993eb5fba0d81c09/gondor/run.py)。

该`unix_run_poll`功能是我试图在 Windows 上完成的。基本思想是，我有一个到服务器的套接字连接，该服务器已将流式标准输入、标准输出、标准错误连接到远程运行的进程，并且我从本地客户端与它进行交互，并使其看起来好像本地客户端正在运行过程。

这`win32_run_poll`是我将它移植到 Windows 的尝试，它确实可以工作。这有点不稳定，而且 IMO 的方法非常糟糕。

有人对如何改进有任何建议吗？对 win32api 的依赖并不理想，但我可以保留它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T18:26:48.527

在 Windows`select`上只为套接字定义，并且不适用于任意文件句柄（Windows 没有文件描述符的概念）。有关此问题的更多信息，请参阅[msdn 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)，在 select 模块的[python 文档](http://docs.python.org/library/select.html)中也提到了这一点。

如果你想对任意文件使用轮询，你应该研究抽象轮询套接字和文件句柄的东西。这可能是您帖子的评论中提到的扭曲反应器，也可能是与[libuv](https://github.com/joyent/libuv)或您选择的其他事件库的 python 绑定。

# javascript - 如何使新的添加按钮运行

> ID：12499525
> 
> 赞同：0
> 
> 时间：2012-09-19T17:05:09.363
> 
> 标签：javascript, jquery

伙计们，我正在尝试通过在第 10 行添加按钮来进行动态设计，以便在班级中添加学生！[在此处输入图像描述][1]

[http://www.facebook.com/photo.php?fbid=4099710263250&set=a.1210298669766.32621.1597725369&type=3&theater](http://www.facebook.com/photo.php?fbid=4099710263250&set=a.1210298669766.32621.1597725369&type=3&theater)

我可以添加一个带有按钮的新行，但是当我单击新按钮时，单击功能没有响应，我仍然需要单击第 10 行上的添加按钮来添加新按钮。

这是代码。

```
 <table>
            <th colspan="4"><h2>Boys</h2></th>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname1" class="input">
              </td>
              <td>
                <input type="text" name="bstudnt_mname1" class="input">
              </td>
              <td>
                <input type="text" name="bstudnt_fname1" class="input">
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname2" class="input">
              </td>
              <td>
                <input type="text" name="bstudnt_mname2" class="input">
              </td>
              <td>
                <input type="text" name="bstudnt_fname2" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname3" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname3" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname3" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname4" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname4" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname4" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname5" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname5" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname5" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname6" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname6" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname6" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname7" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname7" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname7" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname8" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname8" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname8" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname9" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname9" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname9" class="input" >
              </td>  
            </tr>
            <tr>
              <td>
                <label>Name:</label>
              </td>
              <td>
                <input type="text" name="bstudnt_lname10" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_mname10" class="input" >
              </td>
              <td>
                <input type="text" name="bstudnt_fname10" class="input" >

                <input type="button" id="" name="add_bstudent" class="button add-        bstudent" value="+">
              </td>  
            </tr>              
          </table> 
```

JS....

```
$('.add-bstudent').click(function () {
    $(this).parent().parent().after("<tr><td><label>Name:</label></td><td>  <input type='text' name='bstudnt_lname10' class='input' placeholder='Last Name'></td><td><input type='text' name='bstudnt_mname10' class='input' placeholder='Middle Name'></td><td><input type='text' name='bstudnt_fname10' class='input' placeholder='First Name'> <input type='button' id='' name='add_bstudent' class='button add-bstudent' value='+'></td></tr>");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:07:35.730

当您使用 click() 函数注册事件时，它只会在此时选择器返回的对象上注册事件。如果事后创建对象，它不会绑定到事件。使用 on() 函数并给它你的选择器：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

例子：

`$('#container').on('click', '.add-bstudent', function(event) { ... });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:11:11.417

我注意到的第一件事是您没有一个名为 .class 的按钮`$('.add-bstudent')`。它是按钮的名称属性。还可以考虑使用 .on() 委派事件，以便在元素可用时附加事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:24:57.363

试试这个

```
 $('.add-bstudent').click(function () {
        $(this).parent('table').append("<tr><td><label>Name:</label></td><td>  <input type='text' name='bstudnt_lname10' class='input' placeholder='Last Name'></td><td><input type='text' name='bstudnt_mname10' class='input' placeholder='Middle Name'></td><td><input type='text' name='bstudnt_fname10' class='input' placeholder='First Name'> <input type='button' id='' name='add_bstudent' class='button add-bstudent' value='+'></td></tr>");
    }); 
```

# python - 正则表达式子

> ID：12499526
> 
> 赞同：2
> 
> 时间：2012-09-19T17:05:10.430
> 
> 标签：python, regex

我对 python 中的正则表达式 sub 有疑问。所以，我有一些代码行，我想要的是替换所有浮点值，例如：`2.0f`, `-1.0f`...etc..to doubles `2.0`, `-1.0`. 我想出了这个正则表达式`'[-+]?[0-9]*\.?[0-9]+f'`，它找到了我需要的东西，但我不知道如何替换它？

所以这就是我所拥有的：

```
# check if floating point value exists
if re.findall('[-+]?[0-9]*\.?[0-9]+f', line):
    line = re.sub('[-+]?[0-9]*\.?[0-9]+f', ????? ,line) 
```

我不确定要放在什么下面`?????`，这样它将替换我在字符串末尾 `'[-+]?[0-9]*\.?[0-9]+f'`没有字符的情况下找到的内容。`f`

也可能有不止一个浮点值，这就是我使用 re.findall 的原因

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T17:09:02.627

捕获要保存在捕获组中的部分文本并使用`\1`替换运算符：

```
line = re.sub(r'([-+]?[0-9]*\.?[0-9]+)f', r'\1' ,line) 
```

请注意，`findall`（或任何类型的搜索）是不必要的，因为`re.sub`它将查找模式本身并在没有匹配项时返回未更改的字符串。

现在，对于几个正则表达式的写作技巧：

*   始终`r'...'`对正则表达式和替换字符串使用原始字符串 ( )，否则您需要将反斜杠加倍以将它们从 Python 的字符串解析器中转义。您不需要为 执行此操作只是偶然的`\.`，因为`.`它不是 Python 字符串中转义序列的一部分。

*   使用`\d`而不是`[0-9]`匹配数字。它们是等效的，但`\d`更容易识别“数字”，同时`[0-9]`需要进行视觉验证。

*   您的正则表达式将无法识别`10.f`，这可能是您输入中的有效十进制数。匹配各种格式的浮点数比最初看起来要复杂，但简单的谷歌搜索会发现许多相当完整的解决方案。

*   该`re.X`标志将允许您向正则表达式添加任意空格甚至注释。小的正则表达式看起来非常愚蠢，但对于大型表达式，增加的清晰度是救命稻草。（您的正则表达式接近阈值。）

这是实现上述样式提示的扩展正则表达式的示例：

```
line = re.sub(r'''
    ( [-+]?
      (?: \d+ (?: \.\d* )?    # 12 or 12\. or 12.34
          |
          \.\d+               # .12
      )
    ) f''',
    r'\1', line, flags=re.X) 
```

(`(?:...)`是一个非捕获组，仅用于优先级。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:10:43.763

这是我对所有正则表达式的 goto 参考。

[http://www.regular-expressions.info/named.html](http://www.regular-expressions.info/named.html)

结果应该是这样的：

```
line = re.sub('(<first>[-+]?[0-9]*\).?[0-9]+f', '\g<first>', line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:10:59.367

将您想要“保留”在“捕获组”中的正则表达式部分包围起来，例如

```
'([-+]?[0-9]*\.?[0-9]+)f'
 ^                    ^ 
```

然后您可以`\1`在替换中使用这些捕获组：

```
r'\1' 
```

为了将来参考，您可以按左括号的顺序有许多捕获组，即`\2`,`\3`等。

# c - 分段错误（核心转储）

> ID：12499535
> 
> 赞同：0
> 
> 时间：2012-09-19T17:05:43.673
> 
> 标签：c, segmentation-fault

我在读取和写入文件时遇到问题。我正在读取数据`input.txt`，计算（Bytelandian 问题）并将结果写入文件。

如果我删除代码的最后一部分，

```
 /*
    for ( input_counter=0; input_counter<no_of_cases; input_counter++)
    {
        sprintf(buffer, "%d", max[input_counter]);
    fputs(buffer, fw);                
    }   
    fclose(fw);
    */ 
```

一切正常（除了我无法写入文件）。但我能够编译和运行代码。

但是，在包含该代码时，我收到错误“分段错误（核心转储）”。知道会发生什么吗？

```
 #include<stdio.h>  
    #include <stdlib.h>  

    int Calculate_max (int number){
        int counter;
        int store[number+1];
        store[0] = 0;
        if (number>=1){
            store[1] = 1;
        }
        if (number>=2){
            store[2] = 2;
        }

        for (counter=3; counter<=number; counter++){
            store[counter] = store [counter/2] +store[counter/3]+store[counter/4];
            if (store[counter]<counter){
               store[counter]=counter;
            } 
        }
        return store[number];
    }

    int main(void){
        int no_of_cases=0;
        int number[10];
        int max[10];
        int input_counter=0;
        char line [ 128 ];
        char buffer [ 16 ];
        FILE *fr= fopen ("input.txt", "rt");            /* declare the file pointer */
        FILE *fw= fopen ("output.txt", "W+");           /* declare the file pointer */
        if ( fr != NULL )
        {
            if ( fgets ( line, sizeof line, fr ) != NULL ) /* read a line */
        {   
            no_of_cases = atoi (line);
            //printf("no %d \n", no_of_cases);
        }       
        if (no_of_cases==0)
        {
            printf("No Cases!!");
        }
        else 
        {
            for ( input_counter=0; input_counter<no_of_cases; input_counter++)
            {
                if ( fgets ( line, sizeof line, fr ) != NULL ) 
            {
                number[input_counter] = atoi (line);
                //scanf (line, number[input_counter], "%d");
                //printf(" %s \n " , line);
                //fputs ( line, stdout ); 
            }              
            max[input_counter]= Calculate_max(number[input_counter]);
            //fwrite(max[input_counter],sizeof(int),1,fp);          
            //fprintf(fw, "%d \n", max[input_counter]);                
            printf("%d \n", max[input_counter]);                
           }            
            }
        fclose(fr); 
        }   
        /*
        for ( input_counter=0; input_counter<no_of_cases; input_counter++)
        {
            sprintf(buffer, "%d", max[input_counter]);
        fputs(buffer, fw);                
        }   
        fclose(fw);
        */
    return 0;
    } 
```

新代码：

```
 #include<stdio.h>  
    #include <cstdlib>  
    long long Calculate_max ( long long number)
    {
    long long counter;
    long long store[number+1];
    store[0] = 0;
    if (number>=1){
        store[1] = 1;
    }
    if (number>=2){
        store[2] = 2;
    }
    for (counter=3; counter<=number; counter++){
        store[counter] = store [counter/2] +store[counter/3]+store[counter/4];
        if (store[counter]<counter){
            store[counter]=counter;
        }
    }
    return store[number];
    }         
    int main(void)
    {
    int no_of_cases=10;
    long long number;
    long long max[10];
int input_counter=0;
char line [128];
char buffer [ 64 ];
FILE *fr= fopen ("input.txt", "rt");            /* declare the file pointer */
FILE *fw= fopen ("output.txt", "w+");           /* declare the file pointer */
if ( fr != NULL )
{   
    while ( fgets ( line, sizeof line, fr ) != NULL ) 
        {
            //number= atoll (line);
            number=1000000000;              
            max[input_counter]= Calculate_max(number);
            input_counter++;
            printf("test \n");
        }              
    fclose(fr);
}   
printf("writing \n");
no_of_cases=input_counter;
for ( input_counter=0; input_counter<no_of_cases; input_counter++)
{
    sprintf(buffer, "%lld", max[input_counter]);        
    fputs(buffer, fw);                
    fputs("\n", fw);                
}   
fclose(fw); 
return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:10:05.337

你真的应该在这里使用调试器，它会准确地告诉你哪一行代码正在崩溃。

我怀疑您的问题是`fw`无法打开输出文件，因此调用`fputs(buffer, NULL)`崩溃了。您应该检查以确保文件已成功打开，如果没有，请相应地退出。它可能无法打开，因为您传递了无效的模式字符串`"W+"`.

试试`"w"`（小写`w`，而不是大写），因为你只需要写访问，你不需要读写访问（如果你这样做，请`"w+"`改用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:26:43.113

**编辑：您的新代码`store[0] = 0`在`Calculate_max()`函数中失败，因为您`number`包含的值太大而无法`long longs`在堆栈上创建该大小的数组。**

正如亚当在他的回答中建议的那样，您应该使用调试器来帮助您确定代码导致问题的位置。我已经为你做了这个，所以你可以看到它是如何完成的。希望你会发现这很有用。

这是一个使用`GDB`. 您将在第 69 行看到分段错误：

```
fclose(fw); 
```

修复方法是使用以下行打开文件：

```
FILE *fw= fopen ("output.txt", "w+"); 
```

注意 w 现在是小写的。

```
[jrn@localhost ~]$ gcc -ggdb boom.c -o boom
[jrn@localhost ~]$ gdb boom
Reading symbols from /home/jrn/boom...done.
(gdb) run
Starting program: /home/jrn/boom 

Program received signal SIGSEGV, Segmentation fault.
0x00c0660d in fclose@@GLIBC_2.1 () from /lib/libc.so.6
(gdb) bt
#0  0x00c0660d in fclose@@GLIBC_2.1 () from /lib/libc.so.6
#1  0x08048759 in main () at boom.c:69 
```

# c# - 使用c#和oledb插入到excel命令中的括号无效？

> ID：12499541
> 
> 赞同：0
> 
> 时间：2012-09-19T17:06:26.573
> 
> 标签：c#, excel, oledb

我正在使用 OLEDB 将一些记录插入到 excel 文件中

```
 foreach (TblSample rec in LstTblSample)
            {

                OleDbCommand cmdInsert = new OleDbCommand("insert into [sd$]" +
                                                   "([Lab Ref],[D.M.],PH,CP,ADF,NDF,DMD,ME,NIRASH,IFCOW,IFSHEEP,NH3,UFV,UFL,PDIE,PDIN,PDIA,LFU,CFU,SFU) values" +
                                                   "(" + "'" + rec.SampleNo + "'" + "," + "'" + rec.DryMatter + "'" + "," + "'" + rec.pH + "'" + "," +
                                                   "'" + rec.CrudeProtein + "'" + "," + "'" + "" + "'" + "," + "'" + rec.NDF + "'" + "," + "'" + rec.DMD + "'" + "," +
                                                   "'" + rec.ME + "'" + "," + "'" + rec.ASH + "'" + "," + "'" + rec.DMIntakeCattle + "'" + "," +
                                                   "'" + rec.DMIntakeSheep + "'" + "," + "'" + rec.NH3 + "'" + "," + "'" + rec.UFV + "'" + "," +
                                                   "'" + rec.UFL + "'" + "," + "'" + rec.PDIE + "'" + "," + "'" + rec.PDIN + "'" + "," + "'" + rec.PDIA + "'" + "," +
                                                   "'" + rec.LFU + "'" + "," + "'" + rec.CFU + "'" + "," + "'" + rec.SFU + "'" + ")", con);
                cmdInsert.ExecuteNonQuery();
            } 
```

我的 excel 文件有一个名为 DM 的列，它导致了这个错误。我想将此列名保留在 excel 中，因为它被另一个软件使用。在 C# 代码中是否有任何解决方法可以解决这个问题？

![在此处输入图像描述](../Images/a39bc1cc8fc7428c96d4157b54a5146a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:23:23.600

我看到问题的地方是`values`这一行中的关键字

```
OleDbCommand cmdInsert = new OleDbCommand("insert into [sd$] values" + 
```

在[`INSERT`](http://www.w3schools.com/sql/sql_insert.asp)语句中，您通常在调用之前指定列字段`VALUES`。或者，您可以`VALUES`在不命名列字段的情况下调用。在这种情况下，你两者都做。上面`VALUES`在分配列之前会导致问题。

一种选择是完全删除列声明并直接执行`insert into [sd$] values "(" + "'" + rec.SampleNo +`- 即列和条目匹配。您也可以尝试将 INSERT 语句中的列重命名为 [DM]，然后在插入数据后将 excel 电子表格中的列重命名为 [DM] 作为常规任务，当然使用以下代码对其进行修改：[http:// dontbreakthebuild.com/2012/03/16/reading-excel-column-names-in-c-using-excel-interop/](http://dontbreakthebuild.com/2012/03/16/reading-excel-column-names-in-c-using-excel-interop/)

如果一切都失败了，请使用[Open XML SDK 2.0](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)来尝试和操作文档。

我出去了！祝你好运。

# java - 将异常的堆栈跟踪转换为 byte[] 数组或 ByteBuffer (Java) 是否更有效？

> ID：12499549
> 
> 赞同：2
> 
> 时间：2012-09-19T17:06:47.773
> 
> 标签：java, bytearray, stack-trace, bytebuffer, printstacktrace

我需要将异常记录到数据库中。数据库 API 声明我可以将值作为 ByteBuffer 或 byte[] 数组传递。那么哪个更有效率呢？

```
private final static byte[] getThrowableStackTraceBytes(Throwable throwable) {
    StringWriter throwableStackTraceStringWriter = new StringWriter();
    throwable.printStackTrace(new PrintWriter(throwableStackTraceStringWriter));
    return throwableStackTraceStringWriter.toString().getBytes();
} 
```

对比

```
private final static ByteBuffer getThrowableStackTraceByteBuffer(Throwable throwable) {
    ByteArrayOutputStream throwableStackTraceByteArrayOutputStream = new ByteArrayOutputStream();
    throwable.printStackTrace(new PrintStream(throwableStackTraceByteArrayOutputStream));
    ByteBuffer throwableByteBuffer = ByteBuffer.wrap(throwableStackTraceByteArrayOutputStream.toByteArray());
    return throwableByteBuffer;
} 
```

我认为如果我使用 ByteBuffer，整体操作会更有效率，尤其是在它被传递到数据库方法之后进行处理时。我对吗？

（具体来说，我需要将异常记录到 Hypertable 中，它使用 Thrift Java API。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T17:10:44.217

最有效的选择是两者的结合。

```
private final static byte[] getThrowableStackTraceBytes(Throwable throwable) {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    throwable.printStackTrace(new PrintStream(baos));
    return baos.toByteArray();
} 
```

尽管我怀疑将其写入数据库会贵很多倍。

# javascript - 暂停 switch 语句直到 AJAX 成功

> ID：12499551
> 
> 赞同：1
> 
> 时间：2012-09-19T17:07:20.647
> 
> 标签：javascript, jquery

我在滑块中有一个表单，滑块每个部分内的元素在 switch 语句中由它们各自的大小写控制。例如：

HTML

```
<ul class="slider">
    <li class="slide">
        <span class="next">Next</span>
    </li>
    <li class="slide">
        <span class="next">Next</span>
    </li>
    <li class="slide">
        <span class="next">Next</span>
    </li>
</ul> 
```

JS

```
$(function(){
    $('.next','.slide').click(function (e) {
        e.preventDefault();

        var slideIndex = $(this).closest('.slide').index();

        switch (slideIndex) {
            case 0:
                someFunction();
                break;
            case 1:
                anotherFunction();
                break;
            case 2:
                $.ajax({
                    type: "POST",
                    url: "http://some.site.com/register.php",
                    data: 'some data',
                    success: function (response) {
                        if (response)
                            // Call slide();
                    }
                });
                break;
            default:
                return false;
                break;
        }
    slide();
}); 
```

问题是，`slide()`总是在点击函数结束时调用。有没有办法只在 AJAX 请求给出响应后调用该函数？

**编辑**

我可能还不够清楚。我知道我可以只调用`slide()`ajax 响应，但是我还必须在每个 switch 案例结束时调用它。流程应该类似于：

用户点击“下一步”..

-> 脚本检查用户在哪张幻灯片上

-> 为那张幻灯片做逻辑

->`slide()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:26:39.337

`$.ajax`返回一个承诺，因此您可以响应`done`该承诺引发的事件：

```
$(function(){
    $('.next').click(function (e) {
        var ajaxPromise;
        e.preventDefault();

        var slideIndex = $(this).attr("id");

        switch (slideIndex) {
            case 0:
                someFunction();
                break;
            case 1:
                anotherFunction();
                break;
            case 2:
                ajaxPromise = $.ajax({
                    type: "POST",
                    url: "http://some.site.com/register.php",
                    data: 'some data'
                });
                break;
            default:
                return false;
        }

        if (ajaxPromise) {
            // execute when the promise is finished
            ajaxPromise.done(slide);
        } else {
            // execute immediately
            slide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:22:54.497

你可以使用它。

HTML

```
<ul class="slider">
    <li class="slide">
        <span id="0" class="next">Next</span>
    </li>
    <li class="slide">
        <span id="1" class="next">Next</span>
    </li>
    <li class="slide">
        <span id="2" class="next">Next</span>
    </li>
</ul> 
```

JS

```
$(function(){
    $('.next').click(function (e) {
        e.preventDefault();

        var slideIndex = $(this).attr("id");

        switch (slideIndex) {
            case 0:
                someFunction();
                break;
            case 1:
                anotherFunction();
                break;
            case 2:
                $.ajax({
                    type: "POST",
                    url: "http://some.site.com/register.php",
                    data: 'some data',
                    success: function (response) {
                        if (response)
                            slide();
                    }
                break;
            default:
                return false;
                break;
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:33:19.027

从底部删除幻灯片并将 AJAX 调用修改为：

```
$.ajax({
    type: "POST",
    url: "http://some.site.com/register.php",
    data: 'some data',
    success: function (response) {
        if (response)
            slide();
    },
    complete: function(){
        break;
    },
    error: function(xhr, textStatus, errorThrown) {
        alert(errorThrown);//always do it, you never know when the AJAX call throws error
    }
}); 
```

基本上，在 AJAX 调用完成之前不要让 case 中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:14:45.183

是的，您可以将调用移动到成功回调中。然后它只会在成功时被调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T19:45:28.583

我只想在 click 函数中添加一个 var callSlide，将其设置为 true，并且如果 callSlide 为 true，则仅在最后调用 slide()。仅在情况 2 中将其设置为 false：

```
$(function(){
 $('.next','.slide').click(function (e) {
    var callSlide = true;

    e.preventDefault();

    var slideIndex = $(this).closest('.slide').index();

    switch (slideIndex) {
        case 0:
            someFunction();
            break;
        case 1:
            anotherFunction();
            break;
        case 2:
            $.ajax({
                type: "POST",
                url: "http://some.site.com/register.php",
                data: 'some data',
                success: function (response) {
                    if (response)
                        slide();
                }
            });
            callSlide = false;
            break;
        default:
            return false;
            break;
    }

   if(callSlide)
     slide();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T17:13:25.500

Ajax 是异步的。所以当响应出来的时候 Slide() 函数已经被调用了

而不是在函数末尾调用 slide() 为什么不在 ajax 本身的成功中调用该函数。

你也没有正确关闭你的ajax方法..

```
$.ajax({
      type: "POST",
      url: "http://some.site.com/register.php",
      data: 'some data',
      success: function (response) {
          if (response)
            slide();
          }
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-19T17:14:48.053

根据另一个堆栈溢出帖子：

[如何让 jQuery 执行同步而不是异步的 Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)

您可以同步执行 ajax 调用。我通常不会推荐它，但它是一个可能的解决方案......

# php - 使用 Dreamweaver 访问 CSS 的动态页面

> ID：12499553
> 
> 赞同：0
> 
> 时间：2012-09-19T17:07:43.017
> 
> 标签：php, css, dreamweaver

我在测试服务器上设置了一个 php 站点。我创建了一个母版页，用于动态包含不同的内容页。母版页包含样式表链接等所有头部信息。我在实时取景中工作得很好。我的问题是，如果我想在内容页面中格式化某些内容，dreamweaver 不会列出母版页中的类。示例 我有一个 index.php，它用内容页面（如 article.php、login.php 等）更改了正文。但是，如果我正在编辑 article.php 的内容，Dreamweaver 不会列出 index.php 中的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:04:53.573

有几种方法可以完成此操作，具体取决于您的 Dreamweaver 版本的最新程度。第一种方法是使用相关文件功能：[http](http://help.adobe.com/en_US/dreamweaver/cs/using/WSb16ef6880e13ce361172e08122a970c26b-8000.html) ://help.adobe.com/en_US/dreamweaver/cs/using/WSb16ef6880e13ce361172e08122a970c26b-8000.html 。特别要注意最后一节“动态相关文件和实时视图导航集成”。

另一种方法是使用设计时样式表：[http ://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7e17a.html](http://help.adobe.com/en_US/dreamweaver/cs/using/WScbb6b82af5544594822510a94ae8d65-7e17a.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:13:59.373

Dreamweaver 不是超级天才或读心术。对于 Dreamweaver，您的 article.php 页面只是一个页面。它不知道它打算包含在 index.php 中，或者它应该查看 index.php 中的 CSS 以查找类。据它所知，它*可能*包含在 index.php、index2.php 或您的结构中可能包含的任何其他文件中。所以，你要么只需要记住你定义了哪些 CSS 类以及如何使用它们，要么你必须找到另一种编码文件的方法。

我一直使用的一种方法是在静态 HTML 页面中设计实际的页面布局等。基本上只是从您网站的大纲开始，对于您网站的每个不同页面，更改其中的内容，对其进行调整等，直到您看到您想要的样子，然后将其移至实际的 PHP 文件。准备好。

# sql - INNER JOIN 之前的 UNION

> ID：12499554
> 
> 赞同：7
> 
> 时间：2012-09-19T17:07:47.353
> 
> 标签：sql, union, inner-join

为什么当我像这样在 INNER JOIN 之前使用 UNION

```
 select some_table1.some_column1,
           some_table1.some_column2
    FROM some_table1
    UNION ALL
    select some_table2.some_column1,
           some_table2.some_column2
    FROM some_table2
    INNER JOIN  some_table3
    ON  some_table3.some_column1 = some_table1.some_column1 
```

我有一个错误：无法绑定多部分标识符“some_table3.some_column1”？所有数据类型都兼容。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T17:10:31.407

您收到错误，因为那不是有效的 SQL 语法。 `UNION ALL`语法是：

```
SELECT <column1>
FROM <table1>
UNION ALL
SELECT <column1>
FROM <table2> 
```

您不能像您尝试做的那样引用任一查询中的列。如果你想参考，那么你会想要使用这样的东西：

```
select *
from 
(
    select some_table1.some_column1, some_table1.some_column2
    FROM some_table1
    UNION ALL
    select some_table2.some_column1, some_table2.some_column2
    FROM some_table2
) t1
INNER JOIN some_table3
ON  some_table3.some_column1 = t1.some_column1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:09:36.650

您正在尝试加入`some_table1`何时`some_table3`在`some_table1`查询的后半部分不存在，只有前半部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:11:27.020

我猜你会做这样的事情吗？

```
SELECT
(
       select some_table1.some_column1,
               some_table2.some_column2
        FROM some_table1
        UNION ALL
        select some_table2.some_column1,
               some_table2.some_column2
        FROM some_table2
) sub
        INNER JOIN  some_table3
        ON  some_table3.some_column1 = sub.some_column1 
```

# asp.net - Eval() 中的 AddMonths()

> ID：12499561
> 
> 赞同：1
> 
> 时间：2012-09-19T17:08:34.017
> 
> 标签：asp.net, datetime, data-binding, eval, vb.net-to-c#

这是我在 ASP.NET 中编写的标签的代码：

```
<asp:Label ID="enddate" runat="server" Text='<%#Eeval("startdate")).AddMonths(Eval("sublength") %>' /> 
```

基本上我想将其转换为 C#，但遇到了问题。

此代码从绑定字段获取开始日期，然后使用另一个绑定字段子长度来获取它的值

IE 12 或 24 个月因此 addmonths (Eval "Sublength")) 虽然我不确定如何将其转换为 C# 以动态调整标签的值，但我意识到 eval 将变为 Eval 但除此之外我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:27:40.563

您的 VB.NET`eval`只是框架方法的简写`DataBinder.Eval`。在 C# 中使用此框架方法。最重要的是，您需要显式转换返回的值`DataBinder.Eval`并使用正确的大小写。

```
((DateTime)DataBinder.Eval("startdate")).AddMonths((int)DataBinder.Eval("sublength")) 
```

# iphone - iPhone：浮点数后应该有多少位数字

> ID：12499562
> 
> 赞同：5
> 
> 时间：2012-09-19T17:08:41.817
> 
> 标签：iphone, ios, nsstring, stringwithformat

我正在尝试使用分段控件设置浮点数的位数。

所以我用“0”、“1”、“2”和“3”创建了一个分段控件。我想用变量（`self._segmentedControl.selectedSegmentIndex`）设置逗号后的数字。

我知道我可以决定逗号后的位数应该是这样的：

```
sliderValue.text = [NSString stringWithFormat:@"%.3f",slider.value]; 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T17:15:35.230

您甚至可以一步完成：

```
sliderValue.text = [NSString stringWithFormat:@"%.*f", numberOfDigits, slider.value]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:11:22.647

您可以分两步执行此操作。

```
NSString *format = [NSString stringWithFormat:@"%%.%df", numberOfDigits);
sliderValue.text = [NSString stringWithFormat:format, slider.value]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:11:30.643

```
NSString *format = [NSString stringWithFormat:@"%%.%df", numberOfDecimalPlaces];
sliderValue.text = [NSString stringWithFormat:format, slider.value]; 
```

这应该可以解决问题。谨防格式字符串攻击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T17:14:51.230

检查这是否有效。我只用 C++ 对此进行了测试，但由于[字符串格式](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Strings/Articles/formatSpecifiers.html)的文档指向[IEEE printf 规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)，我相信它也应该适用于 Objective-C。

```
sliderValue.text = [NSString stringWithFormat: @"%.*f", places, slider.value]; 
```

# c# - C# 中引用的程序集它们使用什么 .NET 版本？

> ID：12499564
> 
> 赞同：2
> 
> 时间：2012-09-19T17:08:52.720
> 
> 标签：c#, .net, c#-4.0

我正在将解决方案升级到 .NET 4 并使用第三方引用的程序集。这些程序集是使用 .NET 2.0 编译的，有些是使用 3.5 编译的。当我在 .NET 4 中运行升级后的应用程序时，第三方程序集将在哪个版本的 .NET 中运行？它会继续使用 .NET 2.0 或 3.5 还是会在 4.0 中运行？如果它们确实在更高版本的 .NET 中运行，这是否会导致它们在早期版本中编译时出现任何问题？这些应用程序是 Windows 窗体和 ASP.NET，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:27:35.870

您实际上在谈论哪些程序集？大多数程序集（例如 DB 连接器）在 .NET 4.0 上运行良好，甚至使用早期版本编译。在大多数情况下，您只需要在 app.config 文件中进行一些更改。如果不知道确切的类库就不能说太多你在谈论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:21:35.413

您引用的程序集将在 .NET 4.0 框架运行时中加载，因为您的主要解决方案将使用它。但也有少数例外，如果第三方程序集严格使用旧版本的 .net 代码，并且该代码/方法已过时，您可能会收到警告/错误。

# iphone - 使用 cocos2d 在 iPhone 上进行简单的 2D 游戏 - 提示和技巧

> ID：12499565
> 
> 赞同：4
> 
> 时间：2012-09-19T17:09:01.530
> 
> 标签：iphone, ios, cocos2d-iphone, game-physics, box2d-iphone

我想创建一个简单的 2d 游戏：屏幕中间有一辆汽车，背景正在向后移动，从而产生汽车速度的感觉。道路也有上坡和下坡，因此汽车必须遵循其形状。用户可以加速和打破。就这样！

我做了一些研究，发现了 cocos2d。我下载了它，阅读了教程并研究了示例，但是要开始开发我的简单游戏，我仍然有一些问题没有得到答案。

我应该如何创建道路（2d）以将汽车放在上面？我应该如何将背景（和道路）从右向左移动以感受汽车的速度？我应该如何创建汽车？

我不想有源代码作为答案，而是理论建议、好的教程和示例。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:07:20.127

[我强烈建议您在Amazon](https://rads.stackoverflow.com/amzn/click/com/143024416X)上购买 Steffen Itterheim 的书“Learn Cocos2D” 。通过阅读它并玩弄他的源代码，它帮助了我很多入门：http: [//www.learn-cocos2d.com/](http://www.learn-cocos2d.com/) 如果您不想花钱，请查看 RayWenderlich 教程系列。有一个团队与他合作，并且有很多**关于如何构建你的第一个游戏的教程（看看它们，它们非常好！）：[http ://www.raywenderlich.com/tag/cocos2d](http://www.raywenderlich.com/tag/cocos2d)**. 因为移动汽车只是一个在更新方法期间移动的 CCSprite 对象。位置相对于抽象坐标（0-320 宽度和 0-640 高度），您可以使用 position 属性进行设置（sprite.position = CGPointMake(10.0f, 200.0f) 会将您的精灵放置在 pos x:10， y:200)。您需要在 init 方法中将精灵添加为场景的子节点和 scheduleUpdate ，并且有根据输入移动精灵的逻辑（您可以选择加速度计输入，或选择一些很酷的控制器，如[SneakyInput](http://www.qcmat.com/sneakyinput-joystick-dpad-and-buttons-for-cocos2d/)。更多关于这个史蒂芬的书:)。

您应该将“ParallaxBackground”添加为单独的图层，并通过计划更新使其移动。与汽车的概念相同，但输入不同（您不需要控制器，但输入将与汽车的位置相关。您可以使用 parent.getChildByTag 从父节点获取汽车作为子节点（CARTAG））。

这有点粗糙，但我希望给出一个初步的想法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:55:40.143

如果你需要一个真实的结果，你可以考虑使用 box2d 或 Chimmunk（已经嵌入在 cocos2d 中）来制作物理，这样汽车就会像“Doodle Truck”或“Tiny Wings”中的那些物体一样。网上有很多教程。对于 cox，这需要更多的调整和设置才能使游戏正常运行。否则，你需要考虑“道路”的数据结构——它让汽车知道它应该是哪个旋转角度。我认为这是这个简单游戏中最难的部分。

对于移动背景，这很简单，应该有很多可能的方法。我能想到的最简单的就是根据汽车当前的速度逐帧设置它的位置。

创建汽车：您可以创建一个表示它的类，其中包括一个 CCSprite，它处理动画、旋转、翻转......以及与显示汽车相关的任何其他内容。

# android - 活动开始时的Android错误

> ID：12499571
> 
> 赞同：0
> 
> 时间：2012-09-19T17:09:16.880
> 
> 标签：android, android-activity

我不知道为什么我在名称 FirstActivity 上出现错误？

```
public class FirstActivity extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.onStart();
    TextView tv = new TextView(this);
    tv.setText("Hello, Android");
    setContentView(tv);
           }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:15:26.590

知道你有什么错误会很有帮助，但我认为问题是

```
super.onStart(); 
```

代码中的行。

`onStart()`之后将由活动`onCreate()`调用，您不必自己调用它（[Source](http://developer.android.com/reference/android/app/Activity.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:02:54.797

从您的代码中删除**super.onStart() 。**

这个链接会帮助你。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:12:44.433

您的代码中有一些错误：

```
public class FirstActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView tv = new TextView(this);
    tv.setText("Hello, Android");
    setContentView(tv);
  }
} 
```

您不需要在 onCreate() 中调用 super.onStart()。

除此之外，您的错误可能是因为您在某处的构造函数不匹配（需要构造函数的活动），或者因为您的 .java 文件具有不同的名称。

# java - JPopupMenu 移除背景和边框

> ID：12499574
> 
> 赞同：2
> 
> 时间：2012-09-19T17:09:33.097
> 
> 标签：java, swing, background, border, jpopupmenu

[![弹出菜单](../Images/274f1f5b4c6ab0e855ca38ddabd17d55.png)](https://i.stack.imgur.com/f0qhR.gif)

我需要删除背景并`Border`在`JPopupMenu`. `JPopupMenu`应该是完全透明的。覆盖`paintComponent`不会产生积极的结果。我也尝试在`BasicMenuItemUI`/`PopupMenuUI`和`MenuItemUI`/中找到解决方案，`BasicPopupMenuUI`但是发现渲染背景和边框不在其中。

```
public class CustomMenuItemUI extends BasicMenuItemUI {
    protected MouseInputListener mouseInputListener;
    protected MenuDragMouseListener menuDragMouseListener;
    public static ComponentUI createUI(JComponent c) {
        return new CustomMenuItemUI();
    }

    private static float alpha = 0.0f;
    private static float selectionAlpha = 0.0f;

    public static float getAlpha() {
        return alpha;
    }

    public static void setAlpha(float _alpha) {
        alpha = _alpha;
    }

    @Override
    public void installUI(JComponent c) {
        super.installUI(c);
        menuItem.setOpaque(false);
    }

    @Override
    public void paint(Graphics g, JComponent comp) {
        Graphics2D gx = (Graphics2D) g.create();
        gx.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha));
        super.paint(gx, comp);
        gx.dispose();
    }

    @Override
    protected void paintBackground(Graphics g, JMenuItem menuItem, Color bgColor) {
        ButtonModel model = menuItem.getModel();
        Color oldColor = Color.red;
        int menuWidth = menuItem.getWidth();
        int menuHeight = menuItem.getHeight();
        if (model.isArmed() || (menuItem instanceof JMenu && model.isSelected())) {
            Graphics2D g2 = (Graphics2D) g.create(); 
            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, selectionAlpha));
            g2.setColor(Color.red);
            g2.fillRect(0, 0, menuWidth, menuHeight);
        } else {
            g.setColor(Color.red);
            g.fillRect(0, 0, menuWidth, menuHeight);
        }
        g.setColor(oldColor);
    }

    @Override
    protected void paintText(Graphics g, JMenuItem menuItem, Rectangle textRect, String text) {
        ButtonModel model = menuItem.getModel();
        if (model.isArmed() || model.isSelected() || !model.isSelected()) {
            Graphics2D g2 = (Graphics2D) g.create();
            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 1.0f));
            super.paintText(g2, menuItem, textRect, text);
            g2.dispose();
        } else {
            super.paintText(g, menuItem, textRect, text);
        }
    }
    public static void setSelectionAlpha(float alpha) {
        selectionAlpha  = alpha;
    }
} 
```

* * *

```
 String poppUI = CustomPopupMenuUI.class.getName(); 
UIManager.put("PopupMenuUI", poppUI); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:28:42.977

您可以更改`PopupMenuUI`代理的属性，但不能保证您选择的外观会遵守这些更改。更改应该在程序的早期，在任何 GUI 组件被实例化之前。

```
UIManager.put("PopupMenu.background", new Color(0));
UIManager.put("PopupMenu.border", BorderFactory.createEmptyBorder()); 
```

附录：正如@MadProgrammer 评论的那样，平台的对等组件可能是不透明的并且超出您的控制范围。您的代码 ( [`MenuTest`](http://rghost.ru/download/40468757/1e72201997c6faeee5abda7fbd1a11e78e119e67/CustomMenuItemUI.java), [`CustomPopupMenuUI`](http://rghost.ru/download/40468763/9ffbee8b482c6b7fdda3fa865c348e6513a0119d/CustomPopupMenuUI.java), [`CustomMenuItemUI`](http://rghost.ru/download/40468766/9732a7ad1e6f94080dd25128816cdb9fb76b83c5/MenuTest.java%5DMenuTest.java)) 的外观如下所示`com.apple.laf.AquaLookAndFeel`。如果没有更好的解决方案，您可能会考虑实现自己的半透明窗口，如下[所示](https://stackoverflow.com/a/2166500/230513)。

![图片](../Images/e807cd8a53ac6d76ce2389743d3840ad.png)

# api - Mailchimp API merge_var 地址...如何创建城市列表？

> ID：12499579
> 
> 赞同：2
> 
> 时间：2012-09-19T17:09:47.503
> 
> 标签：api, mailchimp, street-address, city

首先，我必须说我是 MailChimp 的菜鸟。我查看了他们的文档，但无法理解，无法从中得到答案。我知道，我是一个菜鸟，但我也是一个做了足够多的研究的菜鸟，只是把这个作为最后的手段。所以，这就是我想要做的：

在我的注册表单上，我有一个带有城市列表的选择字段。我想让 MailChimp 捕获这些信息。据我了解，这将通过 merge_var, Address 来完成。不过，这是据我所知。

我可以举一个例子来说明我正在尝试做的代码是什么样的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:00:04.777

这里的问题是您是否要使用地址字段或文本字段来完成此操作，因为就 MailChimp 系统而言，它们是不同类型的 merge_vars。我建议使用不同数据类型的 MailChimp Web 应用程序进行试验，以找出最适合您的方法。

话虽如此，一旦您确定了数据类型，根据您选择的内容，listSubscibe 方法将用于以适合您的数据类型的语法传递数据。以下是介绍每种日期类型所需使用的语法的文档：

[http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php](http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php)

文本字段将非常简单。而地址将是一个数组，如：

'address1'=>array('addr1'=>'12335 Hope St', 'city'=>'Dallas', 'state'=>'TX', 'zip'=>'76058')

使用该页面底部的 json 示例，其中包含此地址数组设置的示例。但是，如果您实际上只是收集一个城市，我建议您只使用文本字段或下拉字段。

# debugging - Marklogic 错误日志截断消息

> ID：12499581
> 
> 赞同：0
> 
> 时间：2012-09-19T17:09:58.210
> 
> 标签：debugging, error-logging, marklogic

奇怪的问题。

Marklogic 将截断错误日志中的消息，如下所示：

```
2012-09-19 10:36:12.130 Notice: _app_test_preview_8000: $finalPath = "/opt/bc/content/binary-content/article/test-single..." 
```

通过使用省略号 (...) 而不是向我显示整个值。

有什么方法可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:10:37.650

MarkLogic 在记录值信息时，在内部使用 xdmp:describe 将信息记录到 ErrorLog.txt。这是为了防止将完整且非常冗长的值记录到此日志中，并以比实际速度更快的方式增长。

对要调试的变量显式使用 xdmp:log，或使用调试 XQuery 编辑器之一。我相信 Oxygen 和 XQDT 做得很好，还有 XQDebug..

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:29:57.793

我已经习惯做的事情是这样的：

```
xdmp:log(fn:concat("The $var is: ", xdmp:describe($var))) 
```

当您看到省略号时，您仍然可以使用 xdmp:describe()。取自[此处](http://docs.marklogic.com/xdmp%3adescribe)的文档：

```
(: configure these as needed :)
let $max_sequence_length := 5
let $max_item_length := 5

xdmp:log(fn:concat("The $var is: ", 
  xdmp:describe(
    $var,
    $max_sequence_length, (: [$maxSequenceLength as xs:unsignedInt?] :)
    $max_item_length      (: [$maxItemLength as xs:unsignedInt*] :)
  ))) 
```

# java - 评估 fcl 文件的异常

> ID：12499585
> 
> 赞同：0
> 
> 时间：2012-09-19T17:10:11.127
> 
> 标签：java, exception, fuzzy-logic, jfuzzylogic

我在 java 中使用[jFuzzyLogic 库。](http://jfuzzylogic.sourceforge.net/html/index.html)

我正在使用的 Fcl 文件是：

```
FUNCTION_BLOCK rischio_ciclo_fenologico

VAR_INPUT
   ciclo_colturale : REAL;
   ciclo_vegetativo : REAL;
END_VAR

VAR_OUTPUT
   rischio_ciclo_fenologico : REAL;
END_VAR

FUZZIFY ciclo_colturale
   TERM alto := 0 ;
   TERM medio := 1 ;
   TERM basso := 2 ;
FUZZIFY ciclo_vegetativo
   TERM alto := 0 ;
   TERM medio := 1 ;
   TERM basso := 2 ;
END_FUZZIFY

DEFUZZIFY rischio_ciclo_fenologico
   TERM alto := 0 ;
   TERM basso := 100 ;
   METHOD : COG;
   DEFAULT := 0;
END_DEFUZZIFY

RULEBLOCK No1
   AND : MIN;
   ACT : MIN;
   ACCU : MAX;

   RULE 1 : IF ciclo_colturale IS alto AND ciclo_vegetativo IS alto THEN rischio_ciclo_fenologico IS alto ;
   RULE 2 : IF ciclo_colturale IS alto AND ciclo_vegetativo IS medio THEN rischio_ciclo_fenologico IS basso ;
   RULE 3 : IF ciclo_colturale IS alto AND ciclo_vegetativo IS basso THEN rischio_ciclo_fenologico IS basso ;
   RULE 4 : IF ciclo_colturale IS medio AND ciclo_vegetativo IS alto THEN rischio_ciclo_fenologico IS basso ;
   RULE 5 : IF ciclo_colturale IS basso AND ciclo_vegetativo IS alto THEN rischio_ciclo_fenologico IS basso ;
   RULE 6 : IF ciclo_colturale IS medio AND ciclo_vegetativo IS medio THEN rischio_ciclo_fenologico IS basso ;
   RULE 7 : IF ciclo_colturale IS basso AND ciclo_vegetativo IS basso THEN rischio_ciclo_fenologico IS basso ;
   RULE 8 : IF ciclo_colturale IS medio AND ciclo_vegetativo IS basso THEN rischio_ciclo_fenologico IS basso ;
   RULE 9 : IF ciclo_colturale IS basso AND ciclo_vegetativo IS medio THEN rischio_ciclo_fenologico IS basso ;

END_RULEBLOCK
END_FUNCTION_BLOCK 
```

我正在使用的java代码片段是：

```
FIS fis = FIS.load(fileName,true);

//set variables

fis.evaluate();
return fis.getVariable("rischio_ciclo_fenologico").getValue(); 
```

这是我得到的例外：

```
java.lang.RuntimeException: MembershipFunction and Defuzzifier are neither both discrete nor both continuous
    Term: rischio_ciclo_fenologico IS alto
    Membership function: Singleton : {0.0, 1.0}
    Defuzzifier: CenterOfGravity 
```

我做错了什么？异常对我来说不是很清楚，也许 CenterOfGravity Defuzzifier 不能与单例一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:57:17.733

首先有一个缺失`END_FUZZIFY`。真正的问题是`METHOD : COG;`在使用单例时，去模糊化方法必须是`METHOD : COGS;`

# jsf - 方法不是从 xhtml 调用的

> ID：12499586
> 
> 赞同：0
> 
> 时间：2012-09-19T17:10:14.337
> 
> 标签：jsf, jpa, jsf-2, jpa-2.0

每当我单击 h:commandButton 时，不会调用与该操作关联的方法。`action="#{statusBean.update}"`不工作，更新没有被调用。

1）这是我的xhtml页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

<h:head></h:head>

<h:body>

    <h:form >   
    <p:dataList value="#{statusBean.statusList}" var="p">
    <h:outputText value="#{p.statusId}-#{p.statusmsg}"/><br/>
    <p:inputText value="#{statusBean.comment.comment}"/>
    <h:commandButton value="comment" action="#{statusBean.update}"></h:commandButton>
    </p:dataList>
    </h:form>

</h:body>
</html> 
```

2）这是我的状态豆

```
package com.bean;

import java.util.List;

import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import javax.servlet.http.HttpSession;

import com.entity.Album;
import com.entity.Comment;
import com.entity.Status;
import com.entity.User;

public class StatusBean {
    Comment comment;
    Status status;
    private EntityManager em;

    public Comment getComment() {
        return comment;
    }

    public void setComment(Comment comment) {
        this.comment = comment;
    }

    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    public StatusBean(){
        comment = new Comment();
        status=new Status();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("FreeBird");
         em =emf.createEntityManager();
    }

    public String save(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user = (User) session.getAttribute("userdet");
        status.setEmail(user.getEmail());
        System.out.println("status save called");
        em.getTransaction().begin();
        em.persist(status);
        em.getTransaction().commit();
        return "success";
    }
    public List<Status> getStatusList(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user=(User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"+user.getEmail()+"'", Status.class);
              List<Status> results =query.getResultList();
              return results;

    }
    public String update(){
        System.out.println("Update Called...");
        //comment.setStatusId(Integer.parseInt(statusId));
        em.getTransaction().begin();
        em.persist(comment);
        em.getTransaction().commit();

        return "success";

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:50:27.307

我遇到了同样的问题，然后我使用了 a4j:jsFunction 并且问题解决了

`<a4j:jsFunction name="goToupdate" action="#{statusBean.update()}" </a4j:jsFunction>`

现在你的 h:commandButton 看起来像这样

`<h:commandButton value="comment" onclick="goToupdate()"></h:commandButton>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:43:56.567

使用`<p:commandButton>`而不是`<h:commandButton>`

例如。`<p:commandButton value="comment" action="#{statusBean.update}" process="@this" ></p:commandButton>`

并将您的bean放在视图范围内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:36:22.863

您需要`@ManagedBean`为您的课程添加注释和范围注释，例如

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class StatusBean {
    ...
} 
```

# iphone - 更改电话号码时如何使光标不跳转到字段末尾？

> ID：12499587
> 
> 赞同：1
> 
> 时间：2012-09-19T17:10:16.253
> 
> 标签：iphone, ios, xcode

我有一个字段可以放置具有正确格式和所有内容的电话号码，但是问题是当您要修改其中一个电话号码时，它会跳到字段的末尾删除或包含数字，但会跳到末尾自动，请有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:47:19.250

这是一个解决方案：

首先获取光标的初始位置（或所选范围的末尾）：

UITextRange *selectedRange = [textField selectedTextRange]; NSInteger offset = [textField offsetFromPosition:textField.endOfDocument toPosition:selectedRange.end];

修改 textField 的文本后，使用 UITextPosition 重置光标位置，如下所示：

UITextPosition *newPos = [textField positionFromPosition:textField.endOfDocument offset:offset]; textField.selectedTextRange = [textField textRangeFromPosition:newPos toPosition:newPos];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:46:11.153

Describe better what is your problem! Also you can check if that solves your problem

[https://developer.apple.com/library/mac/#qa/qa2006/qa1454.html](https://developer.apple.com/library/mac/#qa/qa2006/qa1454.html)

# php - MySQL表：显示符合条件的每一行

> ID：12499590
> 
> 赞同：0
> 
> 时间：2012-09-19T17:10:24.057
> 
> 标签：php, mysql

如果满足特定列中的值，如何使用 php 显示 mySQL 表的每一行数据？例子：

**桌子**

```
姓名 年龄 性别 颜色 身高
弗兰克 1 男孩红 5 英尺 9
标记 1 男孩蓝色 4 英尺 2
苏珊 2 女孩 绿色 9 尺 17
```

我需要所有“年龄”为 1 的回声输出，例如 -

```
弗兰克 1 男孩
标记 1 男孩
```

如果每行列值可以在 html 中输出，则加分！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:37:29.930

```
<?php
$connection=mysql_connect(DB_Server,DB_User,User_Pass);
$db=mysql_select_db(DB_Name);
$age="1";
$sql="select * from table where age=".$age;

$res=mysql_query($sql) or die(mysql_error());
?>

<table width="578" border="1" align="center" id="menu">
<tr>
<th></th>
<th>Name</th>

<th>age</th>
<th>Gender</th>
</tr>

<?php
 while($row=mysql_fetch_array($res))
 {
?>

<tr>
 <td><?php echo $row['name'];?></td>
<td><?php echo $row['age'];?></td>
<td><?php echo $row['gender'];?></td>

</tr></table>
<?php
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:12:53.057

期待在 PHP 中使用 mysqli。使用您的特定过滤器创建连接和查询。然后 mysqli 应该从您的查询中返回一个 mysqli_result 并且您应该能够检索该值并从那里打印它。

[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

# wcf - 在多个服务上使用相同的 X.509 serviceCertificate？

> ID：12499591
> 
> 赞同：1
> 
> 时间：2012-09-19T17:10:27.410
> 
> 标签：wcf, x509certificate

我有一个公开多个 WCF 服务的应用程序（每个服务都是不同客户端应用程序的不同外观）。现在，我正在为每个服务管理一个不同的证书（从我们的内部证书服务器创建）（我为多个环境执行此操作，例如 dev、qa、staging、prod）。

[MSDN](http://msdn.microsoft.com/en-us/library/ms731340.aspx)似乎建议该证书不仅用于加密通信，还用于“向客户端验证服务”，建议应使用不同的证书，以便将一项服务与另一项服务区分开来，即使在同一台服务器上也是如此。但是，我觉得我可以“作弊”并在所有服务上使用相同的证书（至少每个环境）——本质上是一个应用程序级证书。它仍将确保服务来自正确的应用程序。

那么这是多少“作弊”呢？我是不是太违反规则了？显然，这是我的应用程序和我的服务，所以我可以自由地做我想做的事——但我想避免过度着色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:35:32.897

如果您不使用证书进行客户端证书身份验证或数字签名/验证，并且仅在服务器端使用证书进行 SSL 加密，则可以使用相同的证书。

客户端将减少证书以在其各自的信任库/证书存储中“信任”。

但是，如果您的安全要求要求的不仅仅是服务器端 SSL，那么最好使用不同的证书，这样服务器就不能互相模仿。

我建议您拥有一个生产证书和另一个可以为您的测试、质量保证和开发环境共享的证书。您还可以为非生产服务器使用自签名证书。

# c - C 十六进制常数型

> ID：12499592
> 
> 赞同：9
> 
> 时间：2012-09-19T17:10:28.980
> 
> 标签：c, gcc

我写了以下c代码：

```
#include <stdio.h>

int main () {
  printf("%d\n", -1 >> 8);
  return 0;
} 
```

我使用 -m32 标志在我的 x86_64 上使用 gcc 4.6.3 编译此代码。正如我所料，我得到 -1 打印出来，移位发生在算术上，使用二进制补码表示导致 -1。

现在，如果我改为写

```
printf("%d\n", 0xFFFFFFFF >> 8); 
```

我得到 16777215。我本来希望这个常量被解释为一个 int（有符号），然后转换为算术，这将再次导致 -1。我查看了最新的 C 标准，但我似乎无法理解为什么会这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T17:24:59.513

根据 C99 标准 (6.4.4.1)，十六进制常量将是此列表中可以表示它们的第一个类型：

```
int
unsigned int
long int
unsigned long int
long long int
unsigned long long int 
```

十六进制文字`0xFFFFFFFF`不适合 an `int`（可以将值保存`-0x80000000`到`0x7FFFFFFF`），但适合`unsigned int`，因此其类型将是无符号的。将无符号值右移`0xFFFFFFFF`8 得到`16777215`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T17:17:47.790

未修饰的整数文字根据它们是否为十进制而具有不同的类型（C11 中的 6.4.4.1/5，C++11 中的表 6）：

*   十进制文字，即`[1-9][0-9]*`，总是有符号的。

*   十六进制和八进制文字要么是有符号的，要么是无符号的。如果值对于有符号类型来说太大，但小到足以容纳相同宽度的无符号类型，则它将是无符号的。（这就是您的十六进制常量所发生的事情。）

右移负整数是实现定义的，你碰巧得到符号扩展。右移无符号值是简单的除以二。

# reporting-services - 如何在 Report Builder 3.0 中更改单元格填充？

> ID：12499595
> 
> 赞同：1
> 
> 时间：2012-09-19T17:10:29.410
> 
> 标签：reporting-services

生成报告后，如何更改所有单元格的单元格填充？有没有办法一次完成这一切？如果没有，我可以更改单元格填充的默认值，以便在下一份报告中没有这个问题吗？

SQL Server 2008 R2 报表生成器 3.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T19:38:07.783

确保您的属性窗口已经显示在您的报表生成器屏幕上（视图 -> 属性窗口），然后选择所有文本框（确保它们只是文本框）并转到属性查看器。

朝向顶部（您可能需要向上滚动）将是填充。

您可以使用以下语法在此处输入您希望的任何内容：`Lpt, Rpt, Tpt, Bpt`，或者您可以展开该部分以输入各个值。

如果您想要单元格的 0 填充，您可以输入：`0pt, 0pt, 0pt, 0pt`。

# javascript - 从 Javascript 调用 JSONP Ajax 回调

> ID：12499601
> 
> 赞同：4
> 
> 时间：2012-09-19T17:10:45.003
> 
> 标签：javascript, ajax, callback, jsonp

我正在尝试发送一个 JSONP Ajax 请求（从 client.htm 到 proxy.htm），该请求由代理页面接收，该页面创建另一个不同的 Ajax JSONP 请求到服务（proxy.htm ---> service.php） . 目前代理页面从服务接收 JSON 格式对象，但我坚持将对象返回到第一个初始 Ajax 请求。以下是我尝试运行的示例代码。Javascript可以做到这一点吗？如果是这样，我怎么能将对象返回给***clientCallback***函数。

*客户端.htm*

```
// CLIENT ---> PROXY
$(document).ready(function () {
     $.ajax({
            type: 'GET',
            url: 'http://localhost/jsonp_proxy/listener.htm',
            dataType: 'jsonp',
            jsonpCallback: "clientCallback",
            success: function (theData) {
              alert("Success");
            },
            error: function (xhr, ajaxOptions, thrownError) {
              alert("Error");
            }
        });
      });
      window.clientCallback = function(results) {
        alert(results.uid);
      } 
```

*代理.htm*

```
 // PROXY ---> SERVER
      $(document).ready(function () {
        $.ajax({
          type: 'GET',
          url: 'http://localhost/jsonp_server/service.php',
          dataType: 'jsonp',
          jsonpCallback: "proxyCallback",      
          success: function (theData) {
//          alert("Success");
          },
          error: function (xhr, ajaxOptions, thrownError) {
//          alert("Error");
          }
        });
      });
      window.proxyCallback = function(resultData) {
        // HOW TO CALL CLIENT CALLBACK FUNCTION
      } 
```

*服务.php*

```
<?php
echo "proxyCallback("."{'uid': 123, 'username': 'jdirt', 'name': 'Joe Dirt'}".");";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:18:44.677

为数不多的半有效用途之一`eval`：

```
success: function (theData) {
  eval("(" + theData + ")");
  //alert("Success"); 
```

提醒`JSONP`一下，这是一种黑客攻击和安全风险。你给了第三者很多信任和控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:21:35.887

只需从 window.proxyCallback 调用 window.clientCallback。

# c# - 使用 Kinect 的身体关节角度

> ID：12499602
> 
> 赞同：2
> 
> 时间：2012-09-19T17:10:45.317
> 
> 标签：c#, kinect

我刚刚从事 kinect 和 C# 编程，所以我非常业余，我想知道关节角度。

我创建此代码只是为了在不使用 kinect 的情况下测试我的技能，但代码有问题。

我认为 vector3`v1`和 vector3`v2`作为联合替换，但返回的值 `Find_angle`是`NaN`.

我在这个过程中遗漏了什么吗？请在这方面提供任何帮助。

```
Vector3 V1 = new Vector3(100,40,90);
Vector3 v2 = new Vector3(160,60,90);
public MainWindow()
{
    InitializeComponent();

    Vector3.Normalize(V1);
    Vector3.Normalize(v2);

    float Result = this.find_angle(V1,v2);
    MessageBox.Show(Result.ToString());
}
public float find_angle(Vector3 va, Vector3 vb)
{
    float dot_pro=Vector3.Dot(va, vb);
    double angle = Math.Acos(dot_pro);

    angle = angle * 180 / Math.PI;

    return (float)(angle);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:56:33.950

获取所需关节的 X 和 Y，然后在其任一侧获取关节。然后看看如何计算角度[如何从两个坐标计算角度？](https://stackoverflow.com/questions/8337239/how-do-i-calculate-angle-from-two-coordinates)

基本上做：

```
float x1 = joint1.X;
float y1 = joint1.Y;

float x2 = joint2.X;
float y2 = joint2.Y;

float angleRadians;

float diffX = x2 - x1;
float diffY = y2 - y1;

float atan2Result = (float)Math.Atan2(diffX, diffY);
angleRadians = atan2Result / 2;
if (angleRadians < 0.0f)
    angleRadians += (float)Math.PI;

float tempCosine = (float)Math.Cos(angleRadians);
float tempSine = ((float)Math.Sin(angleRadians) * -1); 
```

**编辑**

您可能希望看到[Kinect 侧向骨骼跟踪](https://stackoverflow.com/questions/10192476/kinect-sideways-skeleton-tracking/)以了解关节跟踪的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:50:15.223

如果你使用 Kinect SDK 来获取骨骼追踪，你可以使用这个：

```
 /// <summary>
    /// Return the angle between 3 Joints
    /// Regresa el ángulo interno dadas 3 Joints
    /// </summary>
    /// <param name="j1"></param>
    /// <param name="j2"></param>
    /// <param name="j3"></param>
    /// <returns></returns>
    public static double AngleBetweenJoints(Joint j1, Joint j2, Joint j3)
    {
        double Angulo = 0;
        double shrhX = j1.Position.X - j2.Position.X;
        double shrhY = j1.Position.Y - j2.Position.Y;
        double shrhZ = j1.Position.Z - j2.Position.Z;
        double hsl = vectorNorm(shrhX, shrhY, shrhZ);
        double unrhX = j3.Position.X - j2.Position.X;
        double unrhY = j3.Position.Y - j2.Position.Y;
        double unrhZ =j3.Position.Z - j2.Position.Z;
        double hul = vectorNorm(unrhX, unrhY, unrhZ);
        double mhshu = shrhX * unrhX + shrhY * unrhY + shrhZ * unrhZ;
        double x = mhshu / (hul * hsl);
        if (x != Double.NaN) 
        {
            if (-1 <= x && x <= 1)
            {
                double angleRad = Math.Acos(x);
                Angulo = angleRad *(180.0 / Math.PI);
            }
            else
                Angulo = 0;

        }
        else
            Angulo = 0;

        return Angulo;

    }

    /// <summary>
    /// Euclidean norm of 3-component Vector
    /// </summary>
    /// <param name="x"></param>
    /// <param name="y"></param>
    /// <param name="z"></param>
    /// <returns></returns>
    private static double vectorNorm(double x, double y, double z)
    {

        return Math.Sqrt(Math.Pow(x, 2) + Math.Pow(y, 2) + Math.Pow(z, 2));

    } 
```

此方法使用 3 个关节来获得角度。

![在此处输入图像描述](../Images/f987664342ccc44e4cd46403e834aac7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:20:15.867

我不熟悉它，但你应该在应用 acos 之前将向量的乘积除以它们的大小。

例子：

```
double len_prod = va.Len * vb.Len;
double angle = Math.Acos(dot_pro / len_prod); 
```

# css - IE9 错误 - 它不适用样式（所有其他浏览器都适用）

> ID：12499603
> 
> 赞同：0
> 
> 时间：2012-09-19T17:10:46.047
> 
> 标签：css, internet-explorer, debugging, internet-explorer-9

有人可以在 IE9 中为我调试此网站上的幻灯片吗？[http://millerwhite.net/~m360s/](http://millerwhite.net/~m360s/)

我已经设法发现幻灯片中的按钮导致它中断，因为它们完全缺少 IE9 中的样式（尽管样式存在于源代码中！）。您可以在源代码中看到这一点：`#slide_0 .button`但它不会将任何样式应用于按钮。

Chrome - OK
Firefox - OK
Safari - OK
iPhone - OK
iPad - OK
IE9 - 坏了

令人惊讶的是它适用于原始网站（两者共享相同的文件）：[http ://themes.devatic.com/daisho/?prj=classic](http://themes.devatic.com/daisho/?prj=classic)

IE9 调试器 (F12) 可能会在开始时显示样式，但只要您更改其中的任何内容 - 它就会忘记所有按钮的整个样式...

还有一件事：当我将`<style>`标签减少`<head>`到非常低的数量时 - 它开始工作。IE9有限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:10:12.077

你试过用非编号的#styleT替换id#slide_0吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:48:45.983

我发现 IE9 不允许加载超过 31 种样式。

# sql - 两个表中的不匹配列

> ID：12499606
> 
> 赞同：0
> 
> 时间：2012-09-19T17:10:59.757
> 
> 标签：sql

我有 2 个表，它们由 ID 连接，我知道即使 ID 匹配，合同表中的某些列的数据也与我的保修表不匹配。我正在使用下面的查询，它看起来正确吗？

```
SELECT con.m_warranty_sku_id,
       con.contract_type,
       con.program_type,
       con.underwriter,
       wsk.m_warranty_sku_id,
       wsk.contract_type,
       wsk.program_type,
       wsk.sku_underwriter
FROM   mdhdba.m_contract con,
       mdhdba.m_warranty_sku wsk
WHERE  ( wsk.m_warranty_sku_id = con.m_warranty_sku_id )
       AND con.contract_type <> wsk.contract_type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:17:05.397

是的，作为解决方案是正确的，我调整了您的查询以明确我的加入

```
SELECT con.m_warranty_sku_id,
       con.contract_type,
       con.program_type,
       con.underwriter,
       wsk.m_warranty_sku_id,
       wsk.contract_type,
       wsk.program_type,
       wsk.sku_underwriter
FROM   mdhdba.m_contract con innerjoin mdhdba.m_warranty_sku wsk
ON wsk.m_warranty_sku_id = con.m_warranty_sku_id
WHERE  con.contract_type <> wsk.contract_type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:21:56.653

上面的查询不能处理 NULL 列。如果 m_warranty_sku_id 不止一行，也会带来麻烦。

这样做 1\. 如果连接有空值，则独占处理 NULL。2\. 您可以使用 MINUS 和 UNION 子句来分离不匹配的 m_warranty_sku_id 并仅为这些值连接表。

# wpf - ControlTemplate - 预定义的内容

> ID：12499614
> 
> 赞同：0
> 
> 时间：2012-09-19T17:11:22.233
> 
> 标签：wpf

是否可以为网格创建一个 ControlTemplate，例如，这将使使用此模板的每个网格都具有堆栈面板、画布等作为内容？

# java - Struts2 - 具有多种方法的操作？

> ID：12499618
> 
> 赞同：4
> 
> 时间：2012-09-19T17:11:30.903
> 
> 标签：java, oauth, struts2, action

我是这个网站的新手，这是我的第一个问题。

我必须做一个网站，我正在使用 java 和 Struts2，但我是 Struts2 的新手。

在我的站点中，我必须向 Facebook 发出请求并通过 OAuth 进行身份验证。

我正在操作页面的执行方法中执行所有过程（验证和请求受保护的资源），这个过程非常复杂，并且在 Facebook 和我的网站之间有很多重定向。

前几天我读到这个“不要用多种方法创建动作：“执行”和你想要执行的操作（例如“createUser”）应该足够了”（来自[http://freeopenidea.blogspot.com.es/ 2010/04/struts2-best-practices.html](http://freeopenidea.blogspot.com.es/2010/04/struts2-best-practices.html)）。

大多数代码可以在另一个时刻从我网站的另一部分调用，因为我在第一次连接时执行此过程，但我可以执行此操作（或类似操作）以刷新联系人列表。

1 - 我应该为我需要的方法创建一个单独的类（而不是一个动作）并从“执行”方法中调用它们吗？

2 - 我应该将代码保留在操作页面中，但保留在“执行”之外的方法中吗？每次我需要做一些任务时都调用这个页面。

我不知道将代码放在哪里（而且我知道，我必须存储 de accessToken。我只是粘贴代码以显示复杂性但不查看更正）。

```
public String execute() throws Exception{
   if (code!=null){
      Verifier verifier = new Verifier(code);
      //get the accessToken to do requests
      Token accessToken = service.getAccessToken(EMPTY_TOKEN, verifier);
      OAuthRequest requestList = new OAuthRequest(Verb.GET, PROTECTED_RESOURCE_URL);
      service.signRequest(accessToken, requestList);
      Response responseList = requestList.send();
      if (responseList.getCode() == 200){
        //I get the Friends List
        JsonParse parser = new JsonParse();
        JSONObject json = (JSONObject) JSONSerializer.toJSON(responseList.getBody());
        JSONArray datos = json.getJSONArray("data");
        for (Object o : datos) 
        {//for every friend of the list I do this
            JSONObject elem = (JSONObject) o;
            String id = elem.getString("id");                
            OAuthRequest requestFriend = new OAuthRequest(Verb.GET,"https://graph.facebook.com/"+id);
            service.signRequest(accessToken, requestFriend);
            Response responseFriend = requestFriend.send();
            if (responseFriend.getCode() == 200){
                JsonParse parserAux = new JsonParse();
                PerfilContacto pcBean = parserAux.parseFacebookElement(responseFriend.getBody());
                pcDAO.insertarContacto(pcBean); 
            }
        }
      }
      return SUCCESS; 
   }      
   else return ERROR;    
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:20:59.907

IMO 在动作方法中的代码太多了。操作应该处理 Web 和业务层之间的层，仅此而已。这种级别的耦合，尤其是硬编码的类实例化，使得单独测试动作的逻辑变得非常困难。

基本上将所有代码移动到服务中。该操作仅与服务交互有关。该框架验证`code`. 该服务在 Struts 2 之外进行测试。该操作使用模拟服务进行测试。

完全未经测试，但我怀疑我的代码看起来更接近下面的内容。它将一种复杂性换成另一种，但带来了多重好处。每种方法都集中注意力且易于阅读。服务调用是隔离的，这允许我们测试不同模式的服务故障。它是系统行为和功能的精细表示。

**行动**

```
public String execute() throws Exception {
    fbService.updateFriends(code);
    return SUCCESS;
} 
```

**脸书服务**

```
public void updateFriends(String code) {
    Token accessToken = getAccessToken(code);
    Response response = getFriends(accessToken);
    if (response.getCode() == 200) {
        processFriends(accessToken, response);
    }
}

private void processFriends(Token accessToken, Response response) {
    JSONObject json = (JSONObject) JSONSerializer.toJSON(response.getBody());
    JSONArray datos = json.getJSONArray("data");
    for (Object o : datos)  {
        JSONObject friend = (JSONObject) o;
        processFriend(friend);
    }
}

private void processFriend(Token accessToken, JSONObject friend) {
    Response response = getFriendGraph(accessToken, friend.getString("id"));
    if (response.getCode() == 200){
        PerfilContacto pcBean = new JsonParse().parseFacebookElement(response.getBody());
        pcDAO.insertarContacto(pcBean); 
    }
}

//~ Service interaction

private Response getFriends(Token accessToken) {
    return sendSignedGetRequest(PROTECTED_RESOURCE_URL, accessToken);
}

private Response getFriendGraph(Token accessToken, String id) {
    return sendSignedGetRequest("https://graph.facebook.com/" + id, accessToken);
}

private Token getAccessToken(String code) {
    return service.getAccessToken(EMPTY_TOKEN, new Verifier(code));
}

private Response sendSignedGetRequest(String url, Token accessToken) {
    OAuthRequest request = new OAuthRequest(Verb.GET, url);
    service.signRequest(accessToken, request);
    return request.send();
} 
```

如果我们考虑指标，我们最终会得到以下结果。

原来的：

```
Average Function NCSS:      24.00
Average Function CCN:        6.00
Program NCSS:               25.00 
```

重做：

```
Average Function NCSS:       3.63
Average Function CCN:        1.38
Program NCSS:               31.00 
```

最终，这意味着：

*   显着 LOC 的数量没有增加太多。
*   每个函数的长度小于 4 行（易于阅读）。
*   每个函数的圈复杂度小于 2（易于测试和推理）。
*   程序读起来更像它正在做的事情，从而可以更快地理解。

权衡是我们有更多的方法（考虑到任何合理的 IDE 或文本编辑器，这不应该是一个*大问题），这**是*一种复杂性。然而：

*   我们可以在我们选择的深度*停止*阅读。
*   我们可以用更大的粒度进行测试。
*   我们可以识别我们可能错过的成功/失败模式。
*   我们可以更轻松地交换和/或扩展功能。

# php - PDO 和私有类变量

> ID：12499622
> 
> 赞同：0
> 
> 时间：2012-09-19T17:11:44.503
> 
> 标签：php, pdo

是否可以使用 PDO 提交数据并将类变量设为私有而不是公有？

我希望能够使用准备和执行，在执行时它只是数组（$classObject），但它必须有公共变量。有没有办法使用私有变量并且仍然使用准备和执行？

例子：

```
$query = $this->handle->prepare("INSERT INTO `$table` ($fields) VALUES ($values)");
$query->execute(array($data)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:35:59.733

您正在寻找将数据绑定到查询中的参数：

```
$value = 'Test';
$smt = $this->handle->prepare("
    INSERT INTO `$table` ('field1') VALUES (:value1)");
$smt->execute(array( ':value1' => $test )); 
```

在示例中，我使用了单个变量，但示例可以简单地扩展为数组，只需将它们内爆即可：

```
$data = array( 'field1' => 'Foo', 'field2' => 'Bar' );

$columns = implode( ", ", array_keys( $data ) );
$values  = ':' . implode( ", :", array_keys( $data ) );

$smt = $this->handle->prepare("
   INSERT INTO `$table` ($columns) VALUES ($values)");
$smt->execute($data); 
```

# java - Eclipse 中的 Java 方法观察点

> ID：12499623
> 
> 赞同：2
> 
> 时间：2012-09-19T17:11:49.747
> 
> 标签：java, eclipse

我想在我的 Java 项目中输入特定方法之后/之前将一些内容记录到一些 Eclipse 视图中。

这可能吗？

*   我不希望它中断调试器，所以没有断点
*   AspectJ 可能是最后的手段，但你能提供一些快速的'n'dirty 教程吗，因为它对我来说很陌生

*附加信息 1：*我正在使用 Eclipse 4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:52:38.187

在方法中创建一个普通断点，添加一个条件，如

```
System.out.println("hit the method"); return false; 
```

该断点将始终被评估，但它不会停止调试器。您也可以对方法断点（而不是行断点）使用相同的技术，并且您可以在此处另外指定是否应在进入或离开方法时对其进行评估。

# java - 在 SD 卡中创建和写入文件

> ID：12499626
> 
> 赞同：0
> 
> 时间：2012-09-19T17:12:07.770
> 
> 标签：java, android, android-sdcard

令人讨厌的是，我让下面的代码创建并写入 sdcard 上的文件，然后继续开发更多代码。但是我必须改变一些东西，因为现在它不起作用。

这是漫长而烦人的一天，所以我想知道是否有人可以指出我所犯的简单错误。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy / hh-mm-ss");
Date curDate = new Date();
String stringDate = sdf.format(curDate);
String resultLogFile = "logFile " + stringDate;

File newFile = new File("sdcard/" + (resultLogFile));
if (!newFile.exists()) {
    try {
        newFile.createNewFile();
    }
    catch (IOException e) {
        e.printStackTrace();
    }

}
try {
    BufferedWriter buf = new BufferedWriter(new FileWriter(newFile, true));
    buf.append(writeToFileString);
    buf.newLine();
    buf.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

这是控制台：

```
09-19 17:58:16.270: W/System.err(10411): java.io.IOException: open failed: ENOENT (No such file or directory)
09-19 17:58:16.275: W/System.err(10411):    at java.io.File.createNewFile(File.java:940)
09-19 17:58:16.275: W/System.err(10411):    at android.Maps.GeneticAlgorithm3.shufflePerm3(GeneticAlgorithm3.java:192)
09-19 17:58:16.275: W/System.err(10411):    at android.Maps.HomeScreen$6.onClick(HomeScreen.java:334)
09-19 17:58:16.275: W/System.err(10411):    at android.view.View.performClick(View.java:4084)
09-19 17:58:16.275: W/System.err(10411):    at android.view.View$PerformClick.run(View.java:16966)
09-19 17:58:16.275: W/System.err(10411):    at android.os.Handler.handleCallback(Handler.java:615)
09-19 17:58:16.275: W/System.err(10411):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-19 17:58:16.275: W/System.err(10411):    at android.os.Looper.loop(Looper.java:137)
09-19 17:58:16.275: W/System.err(10411):    at android.app.ActivityThread.main(ActivityThread.java:4896) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:18:37.833

尝试使用：

```
File newFile = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + (resultLogFile)); 
```

对于时间戳，您可以使用以下方式获取它，然后将其添加到名称的末尾：

```
public String date() {
        DateFormat df = new SimpleDateFormat("yyyy-MM-dd_hh:mm:ss");  
        df.setTimeZone(TimeZone.getTimeZone("PST"));  
        return df.format(new Date());
} 
```

此外，请确保您没有通过 USB 将 SD 卡安装到您的计算机等设备上，因为这会使其在安装时对应用程序不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:15:53.203

您真的应该使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)来获取根 SD 卡位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:17:09.467

SD 卡位置取决于制造商。当您使用 IDE 的手机时，您可以选择 USB 大容量存储和无，用于 USB 连接。如果您选择 USB 大容量存储而不是 SD 卡，则它不适用于您的应用程序 :)

我已经使用示例代码来检查它：

```
boolean mExternalStorageAvailable = false;
        boolean mExternalStorageWriteable = false;
        String state = Environment.getExternalStorageState();

        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
        } else {
            // Something else is wrong. It may be one of many other states, but
            // all we need
            // to know is we can neither read nor write
            mExternalStorageAvailable = mExternalStorageWriteable = false;
        }

        if (mExternalStorageAvailable && mExternalStorageWriteable) {
            doWriteForExternalStorage();
        } else {
            Log.d(TAG, "mExternalStorageAvailable: " + mExternalStorageAvailable + ", mExternalStorageWriteable: " + mExternalStorageWriteable + " it is Connected to PC now?");
        } 
```

和

```
@SuppressWarnings("unused")
    private void doWriteForExternalStorage() {
        // TODO Auto-generated method stub
        File extDir = Environment.getExternalStorageDirectory();
        Log.d(TAG, "extDir:" + extDir.getAbsolutePath());
        if (extDir.isDirectory() && extDir.canWrite()) {
            File fileData = new File(extDir, "mydata.txt");
            Log.d(TAG, "want to create file: " + fileData.toString());
            FileOutputStream fos = null;
            try {
                boolean append = true;
                fos = new FileOutputStream(fileData, append);
                BufferedOutputStream bos = new BufferedOutputStream(fos, 8192);// 8kbyte
                                                                                // buff,
                                                                                // it
                                                                                // should
                                                                                // be
                                                                                // plenty

                StringBuilder sb = new StringBuilder("\n");
                List<RunningTaskInfo> runningTasks = activityManager.getRunningTasks(100);

                if (runningTasks != null) {
                    for (RunningTaskInfo runningTask : runningTasks) {
                        sb.append("runningTask: ").append(runningTask.baseActivity.getPackageName()).append(", ").append(runningTask.baseActivity.getClassName());
                    }
                } else {
                    sb.append("No running tasks");
                }
                byte[] data = sb.toString().getBytes();
                bos.write(data);
                bos.flush();

                             bos.close();
            fos = null;
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fos != null ) {
                try {
                    fos.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

记录服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:14:18.427

我想你应该有`"/sdcard/"`而不是`"sdcard/"`.

# java - Ominifaces EL 字符串传递

> ID：12499627
> 
> 赞同：2
> 
> 时间：2012-09-19T17:12:12.270
> 
> 标签：java, jsf, facelets, omnifaces

OminiFaces 的 'o:methodParam' 现在对我有用，如下所示。我该如何使用另一种方式？我不知道我在其中缺少什么。它可以使用`<h:commandButton>`和`<a4j:jsFunction>`不使用`Seam`，`Seam`使用时它不使用`<a4j:jsFunction>`。

发展环境是 `RichFaces 4. Seam 2.3 OminiFaces 1.2 JBoss 7.1.1`

```
@Name("DataTableBacking")
public class DataTableBacking {

    Department[] items = {new Department("AAA", "AAA"), new Department("BBB", "BBB"), new Department("CCC", "CCC")};

    public Department[] getItems() {
        return items;
    }

    public void action(Department action) {
        System.out.println("Action called with:" + action.getName());
    }

} 
```

数据表.xhtml

```
<h:html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:richm="http://developmentTutorials.com/java">
        <h:body>
            <h:form>
            <h1>Data Table</h1>
                <rich:dataTable id="departmentTable" value="#{DataTableBacking.items}" var="dep" style="width:100%">
                    <rich:column style="width:100px;text-align:center;">
                        #{dep.name}
                        <richm:confirmLink actionBeanMethod="#{DataTableBacking.action(dep)}" render="departmentTable"/>
                    </rich:column>
                </rich:dataTable>
            </h:form>
        </h:body>
</h:html> 
```

在标签库中，confirmation.xml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <o:methodParam name="methodParam" value="#{actionBeanMethod}" />

    <a4j:commandLink value="delete" onclick="#{rich:component('confirmation')}.show();return false" />

    <h:commandButton value="direct" action="#{methodParam}" />

    <a4j:jsFunction name="submit" action="#{methodParam}" render="#{render}" />

    <rich:popupPanel id="confirmation" width="250" height="150">
        <f:facet name="header">Confirmation</f:facet>
        <h:panelGrid>

            <h:panelGrid columns="1">
                <h:outputText value="Are you sure?" style="FONT-SIZE: large;" />
            </h:panelGrid>

            <h:panelGroup>
                <input type="button" value="OK" onclick="#{rich:component('confirmation')}.hide(); submit(); return false" />
                <input type="button" value="Cancel" onclick="#{rich:component('confirmation')}.hide(); return false" />
            </h:panelGroup>
        </h:panelGrid>
    </rich:popupPanel>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:45:33.497

我不完全确定它的`null`价值。如果回发后数据不存在（经常出现的错误），则根本不应该调用该方法。

不过，您的代码中确实有一个错误，这`a4j:jsFunction`将创建一个函数并将其分配给一个名为 的 js 变量`submit`，这对于每一行都是相同的。

所以`submit=function(){RichFaces.ajax("j_idt15:departmentTable:0:j_idt18" ...`对于第一行，`submit=function(){RichFaces.ajax("j_idt15:departmentTable:1:j_idt18" ...`对于第二行，依此类推。

然后，您的对话框将始终调用最后一行的对话框。那么，有可能，`null`您提供表格的列表中的最后一个值是否存在？

使用下面稍微简化的代码，我得到了 action 方法中传递的参数：

```
@ManagedBean
public class DataTableBacking {

    String[] items = {"A", "B"};

    public String[] getItems() {
        return items;
    }

    public void action(String action) {
        System.out.println("Action called with:" + action);
    }

} 
```

数据表.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:richm="http://developmentTutorials.com/java"
>
    <h:head/>
    <h:body>

        <h:form>
            <rich:dataTable id="departmentTable" value="#{dataTableBacking.items}" var="dep" style="width:100%">
                <rich:column style="width:100px;text-align:center;">
                    #{dep}
                    <richm:confirmLink actionBeanMethod="#{dataTableBacking.action(dep)}" render="departmentTable"/>
                </rich:column>
            </rich:dataTable>
        </h:form>

    </h:body>
</html> 
```

确认.xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <o:methodParam name="methodParam" value="#{actionBeanMethod}" />

    <a4j:commandLink value="delete" onclick="#{rich:component('confirmation')}.show();return false" />

    <h:commandButton value="direct" action="#{methodParam}" />

    <a4j:jsFunction name="submit" action="#{methodParam}" render="#{render}" />

    <rich:popupPanel id="confirmation" width="250" height="150">
        <f:facet name="header">Confirmation</f:facet>
        <h:panelGrid>

            <h:panelGrid columns="1">
                <h:outputText value="Are you sure?" style="FONT-SIZE: large;" />
            </h:panelGrid>

            <h:panelGroup>
                <input type="button" value="OK" onclick="#{rich:component('confirmation')}.hide(); submit(); return false" />
                <input type="button" value="Cancel" onclick="#{rich:component('confirmation')}.hide(); return false" />
            </h:panelGroup>
        </h:panelGrid>
    </rich:popupPanel>

</ui:composition> 
```

我通过 a 添加了直接调用，`h:commandButton`以验证表达式确实正确地添加到 Facelet 标记中。在此示例中，当我单击链接并确认时，我得到了两行方法中`delete`预期的最后一个元素 (B) 。`action()`

我使用了 JBoss AS 7.1.1、OmniFaces 1.2 快照和 RichFaces 4.0.0。OmniFaces 版本无关紧要，因为我没有对`methodParam`这些版本之间进行任何更改（我是该特定部分的作者）。

您使用的是哪个服务器以及 OmniFaces 和 RichFaces 的哪个版本？

***编辑***

根据评论，将 更改`String`为`Department`：

DataTableBacking.java：

```
@ManagedBean
public class DataTableBacking {

    Department[] items = {new Department(), new Department()};

    public Department[] getItems() {
        return items;
    }

    public void action(Department action) {
        System.out.println("Action called with:" + action);
    }

} 
```

部门.java：

```
public class Department {

} 
```

（所有其他代码与之前相同）

这应该并且（在我身边）确实没有任何区别。当你把`String`数组变成一个的`Department`时候，你是不是和我一样做的？你能展示你的全部后盾吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:40:39.200

我尝试使用`javascript`. 它可能是不合适的解决方案。作为参数`datatable`传递`row Index`，因为我想`<h:commandButton>`为每一行数据表获取 id。`<h:commandButton>`当用户单击`OK`ConfirmationBox 中的按钮时， JavaScript 将单击。

确认.xml

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j" 
    xmlns:o="http://omnifaces.org/ui"
    xmlns:of="http://omnifaces.org/functions"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <o:methodParam name="methodParam" value="#{actionBeanMethod}" />
    <a4j:commandLink value="#{value}" onclick="#{rich:component('confirmation')}.show();return false"/>

    <h:commandButton id="commandButton" value="direct" action="#{methodParam}" style="display:none;"/>

    <rich:popupPanel id="confirmation" width="250" height="150">
        <f:facet name="header">Confirmation</f:facet>
        <h:panelGrid>

            <h:panelGrid columns="1">
                <h:outputText value="Are you sure ?" style="FONT-SIZE: large;" />
            </h:panelGrid>

            <h:panelGroup>
                <input type="button" value="OK" onclick="document.getElementById('#{index}:commandButton').click();#{rich:component('confirmation')}.hide();return false;" />
                <input type="button" value="Cancel" onclick="#{rich:component('confirmation')}.hide(); return false" />
            </h:panelGroup>
        </h:panelGrid>
    </rich:popupPanel>

    </ui:composition> 
```

在数据表中；

```
 <rich:dataTable id="departmentTable" value="#{DataTableBacking.items}" var="dep" style="width:100%" rowKeyVar="index">
        <rich:column style="width:100px;text-align:center;">
            <f:facet name="header">
                <h:outputText value="Name"/>
            </f:facet>
            #{dep.name}
            <richm:confirmLink value ="Delete" index="tableForm:departmentTable:#{index}" actionBeanMethod="#{DataTableBacking.action(dep)}" render="departmentTable"/>
        </rich:column>
    </rich:dataTable> 
```

# facebook-graph-api - facebook php sdk 和 open graph 用户生成的照片

> ID：12499630
> 
> 赞同：0
> 
> 时间：2012-09-19T17:12:24.737
> 
> 标签：facebook-graph-api, facebook-php-sdk

这更多的是语法问题，任何人都可以帮助我将这个原始调用转换为正确的 $facebook->api 调用吗？

真正让我困惑的是嵌套的图像数组。我还必须对“配方对象”进行编码，因为我必须向它添加一些参数。

```
https://graph.facebook.com/me/nyccookbook:cook?
  recipe=http://www.yourdomain.com/pizza.html&
  image[0][url]=http://www.yourdomain.com/images/my_camera_pizza_pic.jpg&
  image[0][user_generated]=true&
  image[1][url]=http://www.yourdomain.com/images/my_camera_soda_pic_2.jpg&
  image[1][user_generated]=true&
  access_token=YOUR_ACCESS_TOKEN 
```

非常感谢任何帮助！

阿方索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:52:05.550

```
$options = Array(
    'recipe' => 'http://www.yourdomain.com/pizza.html',
    'image[0][url]' => 'http://www.yourdomain.com/images/my_camera_pizza_pic.jpg',
    'image[0][user_generated]' => true,
    'image[1][url]' => 'http://www.yourdomain.com/images/my_camera_soda_pic_2.jpg',
    'image[1][user_generated]' => true,
);

$wallPost = $this->fb->api('/me/nyccookbook:cook', 'post', $options); 
```

简单的 ：）

$this->fb 是 facebook 对象

:edit: 关于配方对象，这只是页面的 URL，其中元设置为打开图形对象，因此您可以在该页面内设置所有额外参数

见：http: [//developers.facebook.com/docs/opengraph/tutorial/#publish](http://developers.facebook.com/docs/opengraph/tutorial/#publish)

# iphone - 更改 UIImageView 的大小

> ID：12499634
> 
> 赞同：0
> 
> 时间：2012-09-19T17:12:32.723
> 
> 标签：iphone, uiimageview

我想制作一个动态照片库。

我正在将图片加载到 a`UIImageView`中，它可以正常工作。

问题是我不知道如何缩小图片。

```
self.imageView.frame = (CGRect){
        .origin=CGPointMake(self.view.bounds.size.width*x, 0.00+z), 
        .size=self.scrollView.bounds.size
    }; 
```

我尝试过类似的东西，`.width`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:28:10.933

我终于弄明白了

.origin 和 . 大小只是写下大小的一种更短的方法

更好的方法是

```
 self.imageView.frame = (CGRect){.origin=self.view.bounds.size.width*x, 0.00,300,300

    }; 
```

# youtube-api - 新的 YouTube Analytics API 能否用于查询我不拥有的视频的观看次数？

> ID：12499638
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:12:49.287
> 
> 标签：youtube-api

YouTube 今年宣布了其新的分析 API。

[https://developers.google.com/youtube/analytics](https://developers.google.com/youtube/analytics)

它似乎是针对内容创建者来报告他们自己的内容的数据。是否可以用于查询非查询方拥有的视频的观看次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:31:28.877

不，它不能。YouTube 分析 API 仅用于允许内容所有者（即个人用户或 YouTube 合作伙伴）检索他们拥有的视频的数据。

# wolframalpha - Wolfram Alpha 如何在不到一秒的时间内计算出 2305843008139952128 的除数？

> ID：12499641
> 
> 赞同：0
> 
> 时间：2012-09-19T17:13:10.727
> 
> 标签：wolframalpha

我试图找到一个巨大整数的除数我在 Haskell 中提出了一个问题，但 Haskell 不够快。我把上面的数字放在 Wolfram Alpha 中，结果立竿见影。这是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:21:56.447

这实际上并不是一个困难的因式分解，因为它是 2^30 * (2^31 - 1)。重复除以 2 直到数字为奇数，然后大约 20k 次循环尝试将 2147483647 除以大于 2 但小于 sqrt(2147483647)==46340 的奇数。在现代处理器上，这不会花费很长时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:23:54.060

有很多算法可以进行因式分解，有些算法对于特定类别的数字可能非常快。例如，如果您可以使用快速素数测试算法来确认一个数是否为素数，那么您就知道它的因数。对于像 2305843008139952128 这样有很多小因子的合数，[Pollard 的 rho 算法](http://en.wikipedia.org/wiki/Pollard%27s_rho_algorithm)很快。Wikipedia 列出[了许多因式分解算法](http://en.wikipedia.org/wiki/Integer_factorization#Factoring_algorithms)，其中许多是特殊用途的。

在像 Wolfram Alpha 这样的一般情况下，一种方法是首先尝试许多更快的特殊情况算法，如果更快的算法没有找到答案，则只使用较慢的保证工作算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:33:49.490

```
from random import randint
from fractions import gcd
from math import floor,sqrt
from itertools import combinations
import pdb
def congruent_modulo_n(a,b,n):
    return a % n == b % n
def isprimeA(n,k=5):
    i=0
    while i<k:
        a=randint(1,n-1)
        if congruent_modulo_n(a**(n-1),1,n) == False:
            return False
        i=i+1
    return True
def powerof2(n):
    if n==0: return 1
    return 2<<(n-1)
def factoringby2(n):
    s=1
    d=1
    while True:
        d=n//powerof2(s)
        if isodd(d): break
        s=s+1
    return (s,d)
def modof2(n):
    a0=n>>1
    a1=a0<<1
    return n-a1
def iseven(m):
    return modof2(m)==0
def isodd(m):
    return not iseven(m)
class miller_rabin_exception(Exception):
    def __init__(self,message,odd=True,lessthan3=False):
        self.message=message
        self.odd=odd
        self.lessthan3=lessthan3
    def __str__(self):
        return self.message

def miller_rabin_prime_test(n,k=5):
    if iseven(n): raise miller_rabin_exception("n must be odd",False)
    if n<=3: raise miller_rabin_exception("n must be greater than 3",lessthan3=True)
    i=0
    s,d=factoringby2(n-1)
    z=True
    while i<k:
        a=randint(2,n-2)
        for j in range(0,s):
            u=powerof2(j)*d
            #x=a**u % n
            x=pow(a,u,n)
            if x==1 or x==n-1:
                z=True
                break
            else:z=False

        i=i+1
    return z
def f(x,n):
    return pow(x,2,n)+1
def isprime(N):
    if N==2 or N==3:
        return True
    elif N<2:
        return False
    elif iseven(N):
        return False
    else:
        return miller_rabin_prime_test(N)
def algorithmB(N,outputf):
    if N>=2:
        #B1
        x=5
        xx=2
        k=1
        l=1
        n=N
        #B2
        while(True):
            if isprime(n):
                outputf(n)
                return
            while(True):
                #B3
                g=gcd(xx-x,n)
                if g==1:
                    #B4
                    k=k-1
                    if k==0:
                        xx=x
                        l=2*l
                        k=l
                    x=pow(x,2,n)+1
                else:
                    outputf(g)
                if g==n:
                    return
                else:
                    n=n//g
                    x=x % n
                    xx=xx % n
                    break
def algorithmA(N):
    p={}
    t=0
    k=0
    n=N
    while(True):
        if n==1: return p
        for dk in primes_gen():
            q,r=divmod(n,dk)
            if r!=0:
                if q>dk:
                    continue
                else:
                    t=t+1
                    p[t]=n
                    return p
            else:
                t=t+1
                p[t]=dk
                n=q
                break
def primes_gen():
    add=2
    yield 2
    yield 3
    yield 5
    p=5
    while(True):
        p+=add
        yield p
        if add==2:
            add=4
        else:
            add=2

def algorithmM(a,m,visit):
    n=len(a)
    m.insert(0,2)
    a.insert(0,0)
    j=n
    while(j!=0):
        visit(a[1:])
        j=n
        while a[j]==m[j]-1:
            a[j]=0
            j=j-1
        a[j]=a[j]+1

def factorization(N):
    s=[]
    algorithmB(N,s.append)
    s1=filter(lambda x:not isprime(x),s)
    d=map(algorithmA,s1)
    f=map(lambda x:x.values(),d)
    r=reduce(lambda x,y:x+y,f,[])+filter(isprime,s)
    distinct_factors=set(r)
    m=map(r.count,distinct_factors)
    return zip(distinct_factors,m)

def divisors(N):
    prime_factors=factorization(N)
    a=[0]*len(prime_factors)
    m=[]
    p=[]
    for x,y in prime_factors:
        m.append(y+1)
        p.append(x)
    l=[]
    algorithmM(a,m,l.append)
    result=[]
    for x in l:
        result.append(reduce(lambda x,y:x*y,map(lambda x,y:x**y,p,x)))
    return result 
```

# image - 使用四叉树进行图像合并

> ID：12499642
> 
> 赞同：1
> 
> 时间：2012-09-19T17:13:18.333
> 
> 标签：image, algorithm, tree

我们如何使用四叉树合并两个图像？我正在浏览[Quadtree](http://en.wikipedia.org/wiki/Quadtree)的维基百科，看到图像可以使用 quad-tree 来表示。谷歌采访中也曾有人问过这个算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:37:38.143

好吧，我刚刚阅读了有关四叉树的信息，据我了解，四叉树是一棵树，它的每个根都恰好有 4 个孩子。
还要注意的是，以根为整个图像的方式表示图像是一种很好的结构，他的 4 个孩子将图像分成 4 等份，依此类推。
在这张图片中可以很好地看到这一点：![在此处输入图像描述](../Images/2caea2f46e2e60bc8c31bfa08a7d8132.png)

现在我看到它的方式，整个图像必须形成一个正方形，因为有 4 个相等的正方形总是形成一个正方形，为了从四叉树中获得一个矩形，它必须有正方形剩余部分的“空”填充，如从上图中的“白色”方块可以看出。

所以假设我们有 2 个矩形，我们想将它们水平附加在一起，我理解的最直接的方法就是创建一个新树，有一个新的根，并将第一个图像添加为该根的第一个孩子，第二个图像作为该根的第二个孩子，第三个和第四个孩子将有“空”的填充物。
这样，如果图像很好地相互附加，您将获得良好的图像效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-26T00:57:31.700

假设树是这样表示的，

```
class Node {
  Color color;
  List<Node> children;
} 
```

像这样的工作吗？

```
Node mergeNode(Node first, Node second) {
  if ( first == null || second == null )
  {
    return first == null ? second : first;
  }
  else
  {
    List<Node> newKids = new ArrayList<Node>();
    for ( int i = 0 ; i < 4 ; ++i )
    {
        Node merged = mergeNode(first,second);
        newKids.set(i,merged);
    }
    return new Node(mergeColors(first,second),newKids));
  }
} 
```

您解决颜色合并的策略在哪里`mergeColors`（类似于真值表）。

# java - 对不同控制器的 Ajax 调用

> ID：12499643
> 
> 赞同：0
> 
> 时间：2012-09-19T17:13:20.483
> 
> 标签：java, jquery, ajax, spring

我一直在尝试从与该控制器无关的 jsp 页面调用不同的控制器。我正在尝试做的事情：jsp从控制器A加载，页面加载后我想在不更改页面位置的情况下调用控制器B。

我已经尝试了很多事情，但还没有成功。

阿贾克斯尝试：

```
$(window).load(function () {
    var url = $('#analyticLog').attr('href');

    $.ajax({
        type: "POST",
        url: url,
        success: function(html)
        {
                $("#analyticLogAjax").replaceWith($("#analyticLogAjax",$(html)));
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
          }
    });
}); 
```

window.location 尝试：

```
$(window).load(function () {
        window.location = $('#analyticLog').attr('href');

}); 
```

每个都引用了一个锚点，该锚点指向控制器映射到的操作。我还玩过处理我们的操作请求和映射的视图控制器，希望使空视图不引用新的“视图”。但后来我的 500 支票被抓到是通过的那个观点。

我知道这到处都是。但是，如果我能找到一种方法在不改变视图的情况下给我的班级打电话，那将是非常有益的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:26:31.490

只需将 loc 设置为控制器的 url

```
$(window).load(function () {
    var url = $('#analyticLog').attr('href');
    loc = /* the URL of the controller you wish to post to */;
    $.ajax({
        type: "POST",
        url: loc,
        success: function(html)
        {
                $("#analyticLogAjax").replaceWith($("#analyticLogAjax",$(html)));
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.status);
            alert(thrownError);
          }
    });
}); 
```

**注意：**除非控制器特别期望`post`您可能应该使用`get`

# delphi - 如何在 Delphi 中为 TPanel（如 TCombo）“关闭外部点击”

> ID：12499649
> 
> 赞同：4
> 
> 时间：2012-09-19T17:13:40.120
> 
> 标签：delphi, vcl

我想模仿当用户单击列表“外部”时关闭的 TComBo 列表功能，但对于另一个组件（TPanel）。在德尔福 XE2 中。任何的想法 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T17:36:07.447

假设您的面板已聚焦（正如我从您的问题中“读取”的那样），然后响应`CM_CANCELMODE`发送到所有聚焦窗口的消息。

```
type
  TPanel = class(Vcl.ExtCtrls.TPanel)
  private
    procedure CMCancelMode(var Message: TCMCancelMode); message CM_CANCELMODE;
  end;

  ...

{ TPanel }

procedure TPanel.CMCancelMode(var Message: TCMCancelMode);
begin
  inherited;
  if Message.Sender <> Self then
    Hide;
end; 
```

* * *

当面板本身没有聚焦时，例如子控件，那么这将不起作用。在这种情况下，您可以跟踪所有鼠标点击（例如通过使用`TApplicationEvents.OnMessage`处理程序）并计算点击是否在面板的范围内：

```
procedure TForm1.ApplicationEvents1Message(var Msg: tagMSG;
  var Handled: Boolean);
begin
  if Panel1.Visible and
      (Msg.message >= WM_LBUTTONDOWN) and (Msg.message <= WM_MBUTTONDBLCLK) and
      not PtInRect(Panel1.ClientRect, Panel1.ScreenToClient(Msg.pt)) then
    Panel1.Hide;
end; 
```

但是，当单击是 - 例如 - 在属于面板但部分展开在面板之外的组合框列表中时，这仍然不会成功。我不知道如何从该点击信息中提取面板。

# php - PHP XML 使用 encoding=base64 解析值

> ID：12499656
> 
> 赞同：1
> 
> 时间：2012-09-19T17:14:17.740
> 
> 标签：php, xml, encoding, base64

如何解析包含已编码值的 XML。就我而言，我有许多用 base64 编码的值：

```
<value encoding="base64">...</value> 
```

使用 SimpleXML 似乎忽略了编码。所以必须有不同的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:16:27.713

您检索这些值，然后使用 PHP 函数对其进行解码：

*   [http://php.net/manual/en/function.base64-decode.php](http://php.net/manual/en/function.base64-decode.php)

因此 XML 库将为您获取内容，但您必须对内容进行所需的操作才能使用它。

# php - Buddypress 活动问题和立方体点

> ID：12499658
> 
> 赞同：0
> 
> 时间：2012-09-19T17:14:39.277
> 
> 标签：php, wordpress, buddypress

我目前在我添加到每个用户以显示其立方体点等级的活动中遇到问题我添加了以下内容

`<?php echo cp_module_ranks_getRank( bp_displayed_user_id() ); ?>`

但它似乎工作它似乎在每个用户上一次又一次地重复相同的等级它保持在第 1 级，我也应用了相同的代码。

我在上面发布，它适用于每个用户的个人资料，因此它显示实际排名，所以很奇怪我将发布我的意思的图像，谢谢你有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:44:37.677

`bp_displayed_user_id()`在成员个人资料页面上用于确定当前显示的用户个人资料的 ID，但在循环的一部分时不会更新。根据您使用的循环类型，您需要使用以下方法之一：

对于活动循环，函数将`bp_get_activity_user_id()`返回 ID 并`bp_activity_user_id()`回显它。对于您的情况，您需要使用：

```
<?php echo cp_module_ranks_getRank( bp_get_activity_user_id() ); ?> 
```

在成员循环的情况下，函数将`bp_get_member_user_id()`返回 ID 并`bp_member_user_id()`回显它：

```
<?php echo cp_module_ranks_getRank( bp_get_member_user_id() ); ?> 
```

# perl - 全局符号和显式包名的困难

> ID：12499661
> 
> 赞同：-3
> 
> 时间：2012-09-19T17:14:46.683
> 
> 标签：perl

我需要帮助调试下面显示的代码。我已经问过这个问题的类似版本，但我无法开发出一个有效的脚本。我的输入文件是这样的：

> line1
> AAAAAAAAAAAAAAA
> line2
> BBBBBBBBBBBBBBB
> line3
> CCCCCCCCCCCCCCCC
> line4
> DDDDDDDDDDDDDDD

我希望脚本随机打乱文件中的行，例如：

> line2
> BBBBBBBBBBBBBBB
> line1
> AAAAAAAAAAAAAAA
> line4
> DDDDDDDDDDDDDDD
> line3
> CCCCCCCCCCCCCCC

该文件中有很多行（〜1,000,000）。目前，我收到以下错误：

```
Global symbol "$header_size" requires explicit package name at fasta_corrector9.pl line 40. 
```

和

```
Global symbol "$header_size" requires explicit package name at fasta_corrector9.pl line 47. 
```

我不明白如何给出`$header_size`明确的包名。我不是程序员，所以我需要非常基本的解释。提前致谢。

```
#! /usr/bin/perl

use strict;
use warnings;

print "Please enter filename (without extension): ";
my $input = <>;
chomp($input);

print "Please enter total no. of sequence in fasta file: ";
my $orig_size = <> * 2 - 1;
chomp($orig_size);

open(INFILE, "$input.fasta") or die "Error opening input file for shuffling!";
open(SHUFFLED, ">" . "$input" . "_shuffled.fasta")
    or die "Error creating shuffled output file!";

my @array  = (0);    # Need to initialise 1st element in array1&2 for the shift function
my @array2 = (0);
my $i      = 1;
my $index  = 0;
my $index2 = 0;

while (my @line = <INFILE>) {
    while ($i <= $orig_size) {

        $array[$i] = $line[$index];
        $array[$i] =~ s/(.)\s/$1/seg;

        $index++;
        $array2[$i] = $line[$index];
        $array2[$i] =~ s/(.)\s/$1/seg;

        $i++;
        $index++;
    }
}

my $array  = shift(@array);
my $array2 = shift(@array2);
for $i (reverse 0 .. $header_size) {
    my $j = int rand($i + 1);
    next if $i == $j;
    @array[$i,  $j] = @array[$j,  $i];
    @array2[$i, $j] = @array2[$j, $i];
}

while ($index2 <= $header_size) {
    print SHUFFLED "$array[$index2]\n";
    print SHUFFLED "$array2[$index2]\n";
    $index2++;
}
close(INFILE);
close(SHUFFLED); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:49:13.430

使用该大小的文件执行此操作的最简单方法是使用[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)允许随机访问数据文件的行

`O_RDWR`如果文件不存在，则使用阻止创建文件的模式

此外，`shuffle`函数 from[`List::Util`](https://metacpan.org/module/List%3a%3aUtil)将允许您随机重新排序原始文件记录的索引

```
use strict;
use warnings;

use Tie::File;
use Fcntl 'O_RDWR';
use List::Util 'shuffle';

tie my @source, 'Tie::File', $ARGV[0], mode => O_RDWR, autochomp => 0
    or die "Unable to open file '$ARGV[0]': $!";

for my $line (shuffle 1 .. @source/2) {
  printf "line %d\n", $line;
  print $source[$line * 2 - 1];
} 
```

这个程序应该运行为

```
perl shuffle.pl infile > outfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:44:14.103

简而言之，您`$header_size`在代码中使用，但没有告诉 Perl `$header_size`究竟是什么。这正是*强烈*`use strict;`推荐的原因，否则它会被默默地视为未定义的值（在数字上下文中为 0）。

 *[`perldoc perldiag`](http://perldoc.perl.org/perldiag.html)有助于理解此类消息：

> **全局符号“%s”需要明确的包名**
> 
> (F) 你说过“ `use strict`”或“ `use strict vars`”，这表示所有变量必须是词法范围的（使用“ `my`”或“ `state`”），事先使用“ `our`”声明，或者明确限定全局变量在哪个包中（使用“ `::`”）。

将此应用于手头的问题，`$header_size`尚未初始化。在这种情况下要做的事情是`my $header_size = $some_value;`在使用它之前进行分配，或者只是`my $header_size;`如果您真的想不定义它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:50:51.323

根据您的脚本名称 (fasta_corrector9.pl) 和文件格式，我将假设您正在使用 FASTA 序列进行操作。如果这是真的，我认为你应该真正了解 CPAN 上的 Bio 命名空间。拥有这些开放格式规范的全部意义在于人们编写工具来操作格式并免费提供给您。在这种情况下，您应该强烈考虑使用[Bio::DB::Fasta](http://search.cpan.org/~cjfields/BioPerl-1.6.901/Bio/DB/Fasta.pm)来访问您的 FASTA 文件作为结构化数据。

```
my $stream  = Bio::DB::Fasta->new('/path/to/files')->get_PrimarySeq_stream;
while (my $seq = $stream->next_seq) {
     # now you are streaming through your FASTA sequences in order.
     # You can accomplish shuffling with O(1) space complexity in this loop. 
 } 
```*

# iphone - 防止状态栏变成双高？

> ID：12499662
> 
> 赞同：0
> 
> 时间：2012-09-19T17:14:46.617
> 
> 标签：iphone, ios, statusbar

我有一个应用程序可以持续录制音频，即使在后台也是如此。当应用程序在后台运行时，状态栏变为红色并变为双倍高度。我在想

1.  如果我的应用程序在后台运行时状态栏可以保持正常状态
2.  如果这种方式会让我的应用被 App Store 拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:18:12.643

没有办法隐藏状态栏，或者在后台录制音频时强制它保持正常，至少如果您希望您的应用程序出现在 AppStore 中则不会。

# facebook-graph-api - Facebook API - 如何发布/分享大照片

> ID：12499664
> 
> 赞同：7
> 
> 时间：2012-09-19T17:14:46.847
> 
> 标签：facebook-graph-api, photo

我已经按照一个非常[清晰的教程](http://www.hyperarts.com/blog/tutorial-how-to-add-facebook-share-button-to-your-web-site-pages/)在 fb 时间轴上发布（分享）一个故事。您可以在 FB Share 按钮后面看到我在我的[网站上使用的代码。](http://www.paulgodard.com/)如何强制照片变大而不是缩略图？我应该在 js 代码（FB.ui）中添加什么？一种行为？但是我应该写什么呢？我对 FB api 很陌生，所以请用简单的英语...谢谢！保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-14T10:45:39.467

我浏览了你的代码。您正在使用 feed 方法。

```
FB.ui(
{
method: 'feed',
name: 'Paul Godard – Soul Photography',
link: 'http://www.paulgodard.com/',
picture: 'http://www.gondwanastudio.com/xMedia/Images/Photos/PG_010501-011000/PG_010927.jpg',
source: '',
caption: 'Paul Godard | Soul Photography | Landscape | Nature | Fine Art',
description: 'I am blessed.  I have 2 wonderful children Enya and James and my best friend is their mother, my soulmate for many years.  I live in a wonderful home in Africa, the wildest continent of the world.  I am very privileged and grateful.  There is so much beauty around us but people dont see it anymore...',
message: ''
}); 
```

对此，尝试使用照片方法如下

```
FB.api('me/photos', 'post', {
                        message: 'your message',
                        status: 'success',
                        access_token: access_token,
                        url: 'your_Img_url'
                    }, function(response) {
                    }); 
```

我们在这里上传一张照片。它将被保存在新相册中，因为我们没有在上面的代码中创建任何内容，并且一张大照片将张贴在您的墙上。

# android - 使用 phonegap 和 jquery mobile 使用链接打开对话框

> ID：12499669
> 
> 赞同：1
> 
> 时间：2012-09-19T17:14:58.273
> 
> 标签：android, cordova, jquery-mobile, navigation

我想使用 jquery mobile 和 phonegap 打开一个对话框，如下所示：

```
$('<a href="my-page-dialog.html" data-rel="dialog">').click(); 
```

每次触发该代码时，什么都没有发生...我已经看到以编程方式打开对话框非常混乱...

我想这样做是因为我需要在显示最后一页之前显示一条消息，但我不希望它成为导航的一部分，所以我可以正常后退......一个解决方案也可以，即使它不涉及对话...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:00:26.010

如果**my-page-dialog.html**包含一条简单的消息，那么您可以使用`alert()`并且**phonegab**将显示适当的本机警报对话框。

# android - 在 runOnFirstFix 中出现异常

> ID：12499671
> 
> 赞同：0
> 
> 时间：2012-09-19T17:15:00.303
> 
> 标签：android, multithreading, toast, runnable

我收到以下异常

```
09-19 18:09:36.551: E/AndroidRuntime(20608): FATAL EXCEPTION: Thread-2852
09-19 18:09:36.551: E/AndroidRuntime(20608): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-19 18:09:36.551: E/AndroidRuntime(20608):    at android.os.Handler.<init>(Handler.java:121)
09-19 18:09:36.551: E/AndroidRuntime(20608):    at android.widget.Toast$TN.<init>(Toast.java:317)
09-19 18:09:36.551: E/AndroidRuntime(20608):    at android.widget.Toast.<init>(Toast.java:91)
09-19 18:09:36.551: E/AndroidRuntime(20608):    at android.widget.Toast.makeText(Toast.java:233)
09-19 18:09:36.551: E/AndroidRuntime(20608):    at com.mid.nash.activity.MapPageFragment$3$1.run(MapPageFragment.java:156)
09-19 18:09:36.551: E/AndroidRuntime(20608):    at java.lang.Thread.run(Thread.java:856) 
```

以下是我的代码

```
myLocationOverlay.runOnFirstFix(new Runnable() {
    public void run() {
        //check if the location is within boundaries. 
        GeoPoint currentlocation = myLocationOverlay.getMyLocation();
        double latitude = (currentlocation.getLatitudeE6() / 1E6);
        double longitude = (currentlocation.getLongitudeE6() / 1E6);
        //check if user is witin boundry of Kew
        if (latitude <= RESTRICTED_UPPERLEFT_LAT && 
                latitude >= RESTRICTED_BOTTOMRIGHT_LAT && 
                longitude >= RESTRICTED_UPPERLEFT_LNG && 
                longitude <= RESTRICTED_BOTTOMRIGHT_LNG){
            mapController.animateTo(myLocationOverlay.getMyLocation());
        } else {
            myLocationOverlay.disableMyLocation();
            Toast.makeText(getActivity(), "You are out of scope.", Toast.LENGTH_LONG);
        }
    }
}); 
```

我提到了[这个链接](https://stackoverflow.com/questions/6665798/cancel-the-runnable-in-the-runonfirstfix-method-of-locationoverlay-object)，认为这可能对我有帮助。但我无法实现上述方法。

如何摆脱这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:51:03.613

我建议将 Toast 从 Runnable 中移出。

Toast 应该在主线程中与其他 UI 元素一起调用。昨天我遇到了一个问题，后台线程被破坏并且 Toast 从未关闭。它出现在主屏幕和其他任何地方，直到我强行删除应用程序的缓存内存...... Toast 很好，但将它们保留在主线程上。

作为一个注释，你没有打电话`show()`，所以 Toast 目前不会做任何事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:44:10.763

问题是`Runnable`正在执行的线程没有`Looper`发布`Toast`. 您需要做的是在您的文件中创建一个`Handler`，`MapPageFragment`您可以向它发送消息以显示`Toast`. 或者根本不使用 a `Toast`，您可以实现更好的通知 UI。

# css - 具有边框半径和三角形边的 CSS 项目

> ID：12499673
> 
> 赞同：5
> 
> 时间：2012-09-19T17:15:16.657
> 
> 标签：css, css-shapes

是否可以在 css（没有图像）中制作具有边框半径和三角形边的项目？

![李项目](../Images/e07241e07ad1eed243b2800295d6ee75.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:36:35.870

你可以使用一个 SVG 图像，它可以在任何尺寸下清晰呈现，并适应元素的尺寸，它看起来像这样......

```
.button {
  background: #000;
  float: left;
  position: relative;
  color: #999;
  font: 15px/130% Arial, sans-serif;
  padding: 10px 20px;
  clear: both;
  margin: 10px;
  border-radius: 5px 0 0 5px;
}

.button:after {
  content: '';
  display: block;
  width: 10px;
  position: absolute;
  right: -10px;
  height: 100%;
  top: 0;
  background: transparent url('triangle.svg') 0 0 no-repeat;
} 
```

[http://jsfiddle.net/Ch7aA/](http://jsfiddle.net/Ch7aA/)

这个 jsfiddle 只能在 Webkit 中工作，因为我已经内联了 svg，所以你可以理解它是如何工作的，但是如果你从外部文件加载它应该可以正常工作。以下是渲染图供参考：

![在此处输入图像描述](../Images/14c5360c56dcef1d6c08e80a2d9c8479.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:18:20.060

看看这个： [http](http://css-tricks.com/snippets/css/css-triangle/) ://css-tricks.com/snippets/css/css-triangle/ 或者这个：http: [//jonrohan.me/guide/css/creating-triangles-in-css/](http://jonrohan.me/guide/css/creating-triangles-in-css/)

对于动态高度，这里有个问答：[CSS triangle with dynamic height](https://stackoverflow.com/questions/11962111/css-triangle-with-dynamic-height)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:26:50.557

**HTML：**

```
<div><span>fubar</span></div> 
```

**CSS：**

```
span{
    display:block;
    width:100px;
    float:left;
    background-color:green;
    text-align:center;
    border-top-left-radius: 5px;
    border-bottom-left-radius: 5px;
    padding:5px 0;
}
div:after {
    content: "";
    display:block;
    float:left;
    border-top: 15px solid transparent;
    border-bottom:15px solid transparent;   
    border-left: 10px solid green;
} 
```

[**jsFiddle 演示**](http://jsfiddle.net/hJfgw/7/)

* * *

**更新：**

为了能够处理不同的高度，您将需要编写一些 JavaScript 代码来动态更改边框大小或使用 CSS 截断文本。不过，这取决于您的特定要求。

# java - 使用客户端登录授权 Google Drive Service java？

> ID：12499675
> 
> 赞同：3
> 
> 时间：2012-09-19T17:15:23.700
> 
> 标签：java, login, authorization, google-drive-api

使用 DocumentsList API，可以授权 DocsService，然后使用 Client Login 方法发出授权请求，即 service.setUserCredential(username,password)。

现在 DocumentsList 和 ClientLogin 都已被弃用，是否有类似的方式来授权 Drive 服务，而不使用令牌和授权请求？否则，如果我的应用程序不需要访问已登录用户的数据，而只需要访问特定帐户的数据（即应用程序本身的帐户），那么将 Drive 服务授权给该特定帐户的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:12:56.927

The only supported way to authorize Drive API requests is OAuth 2.0 as username and password should never be required by a third-party app.

If you want to use the application's storage, you can authorize your app using service accounts: [https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# ruby-on-rails - Spree：未初始化的常量 Spree::ThemeSupport

> ID：12499676
> 
> 赞同：1
> 
> 时间：2012-09-19T17:15:25.590
> 
> 标签：ruby-on-rails, e-commerce, spree

似乎许多 Spree 的扩展不支持最新版本的 Spree (1.2.0)。我试图安装一些宝石，但我不断得到

```
uninitialized constant Spree::ThemeSupport 
```

我在某处读到的解决方案是“它已被弃用，现在已被删除，您现在应该在 app/overrides 目录中定义 Deface 覆盖”。但是具体怎么做呢？有没有人实施过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:06:24.840

现在可能已经解决了，但如果没有，这里有一个示例 1 我从 ThemeSupport 更改为 Deface

[https://github.com/geermc4/spree_user_groups/blob/ec2a169d96acf6cbcf731d24d518134e55598d29/app/overrides/add_user_groups_to_configuration_menu.rb](https://github.com/geermc4/spree_user_groups/blob/ec2a169d96acf6cbcf731d24d518134e55598d29/app/overrides/add_user_groups_to_configuration_menu.rb)

底部评论的是 ThemeSupport

# django - 仅使用 OAuth 的 Django 邀请登录

> ID：12499680
> 
> 赞同：0
> 
> 时间：2012-09-19T17:15:45.077
> 
> 标签：django, django-registration, django-socialauth, django-authopenid

我正在尝试创建一个仅邀请登录的站点。此外，受邀用户只能使用某些 OAuth 登录方法登录。

我正在使用 Django 1.4。

我正在使用应用程序[github.com/lizrice/django-allauth](https://github.com/lizrice/django-allauth "django-allauth")和[github.com/lizrice/django-invitation](https://github.com/lizrice/django-invitation "django-邀请")

在 installed_apps 我已经包含了文档告诉我包含的所有应用程序：

```
'allauth',
'allauth.account',
'allauth.socialaccount',
'allauth.socialaccount.providers.google',
'invitation', 
```

我在 settings.py 中设置了几个变量：

```
SOCIALACCOUNT_AUTO_SIGNUP = False
SOCIALACCOUNT_ENABLED = True
INVITE_MODE = True
ACCOUNT_INVITATION_DAYS = 10
INVITATIONS_PER_USER = 1
INVITATION_USE_ALLAUTH = True 
```

在 urls.py 我只需要 url

```
url(r'^accounts/register/$', register,
        {
            'backend': 'invitation.backends.InvitationBackend',
        },
    name='registration_register'),
(r'^accounts/', include('invitation.urls')),
(r'^accounts/', include('allauth.urls')), 
```

我可以创建一个邀请码，并使用该邀请码进行注册。现在，注册视图显示以下错误（完整的[Stacktrace](http://dpaste.com/803667/ "堆栈跟踪")）：

```
The view invitation.views.register didn't return an HttpResponse object. 
```

注册视图应显示注册流程，用户可以在其中选择 OAuth 提供者来创建帐户。

编辑：使用我的配置，错误来自 allauth/socialaccount/views.py

```
def signup(request, **kwargs):
    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse(connections))
    sociallogin = request.session.get('socialaccount_sociallogin')
    if not sociallogin:
        return HttpResponseRedirect(reverse('account_login')) 
```

没有具有该名称的会话项，因此代码尝试反转为“account_login”。此 URL 在 allauth 中定义。Allauth 在 installed_apps 列表中，并且包含 url。

编辑：添加[堆栈跟踪](http://dpaste.com/803667/ "堆栈跟踪")

编辑：删除注册，不需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:56:58.873

我的这段代码很可能有缺陷:-) 但让我们看看我们是否能深入了解它。另外，请注意[pennersr 提出了一种更好的方法来做到这一点](https://github.com/pennersr/django-allauth/pull/91)，但我还没有机会实现它。

这样做的想法是，除非人们拥有有效的邀请码，否则您不会让他们注册新帐户 - 但如果他们要通过社交帐户登录，您将无法判断他们是否现有用户或新用户，直到他们已经登录。如果结果证明他们是新用户，我们会告诉他们他们需要邀请密钥。时间流逝，他们以某种方式获得邀请密钥并返回您的站点并输入它。如果他们碰巧在同一个会话中，他们仍然会以社交方式登录（我认为这就是 request.session['socialaccount_sociallogin'] 的作用）。如果没有，他们将转到帐户登录页面，他们可以从该页面进行社交登录或创建新的用户名/密码帐户。

反正。我相信，对 reverse('account_login') 的调用应该解析为 allauth.account.views.login - 你能检查一下你的情况吗？在快速检查中，我看不出该函数如何不会返回 HttpResponse 对象，所以我想知道它是否被调用了。

# r - wilcoxon 检验和平均比率

> ID：12499687
> 
> 赞同：0
> 
> 时间：2012-09-19T17:16:17.267
> 
> 标签：r

我写信是想问问你对如何解释这个案子的看法。我有两个要比较的向量“a”和“b”。

wilcoxon 测试给了我 5.139217e-303 的 a 超过 b 的 pvalue，而替代的“更大”。现在，如果我对它们中的每一个进行总结，我将得到以下信息

```
> summary(a)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0000000 0.0001411 0.0002381 0.0002671 0.0003623 0.0012910 
> summary(c)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0000000 0.0000000 0.0000000 0.0004947 0.0002972 1.0000000 
```

然后平均比率约为 0.5399031，它天真地与 wilcoxon 测试相反（我期待找到一个比率 >> 1）

即使使用异常值包删除异常值后，我仍然有同样的事情。有人可以帮我解释为什么我有这个结果以及如何解释吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T22:02:07.670

由于您尚未发布您的数据，这确实是一个困难的问题并发布您的数据（例如，通过`dput()`会使事情变得更容易。除此之外，我们只能指定。有关通过可重复的示例提出一个很好的问题的更多信息，请参见[此处](https://stackoverflow.com/q/5963269/289572).

但是，您的数据具有一些我们可以从中看到的属性，这些属性可以`summary`提供答案。

Wilcoxon 测试似乎不适合您的数据。请记住，Wilcoxon 使用每个观察值的等级。由于数据中存在关联，因此很难获得排名。你似乎有很多联系（`min`并且两者都是`median`）。有一些方法可以处理关系，但其他方法更好。`c``0`

由于您似乎确实不想使用 t 检验（考虑到分布似乎确实不同，这是合理的，例如`median(a) < mean (a)`但是`median(c) > mean(c)`），另一种方法是使用置换检验。

我的包`afex`（在 CRAN 上，基于`coin`）包含`compare.2.vectors`使用（例如）t 检验、Wilcoxon 和最显着的置换检验比较两个向量的函数。如果您的 n 很小，您甚至可以使用精确的测试分布进行置换测试。给定两个向量 a 和 c 结果可能是（试图模拟您的数据）：

```
> require(afex)
> a <- round(runif(100, 0, 0.00129), 5)
> c <- c(rep(0, 60), runif(37, 0, 0.00297), rep(1, 3))
> summary(a)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
0.0000100 0.0002775 0.0006500 0.0006360 0.0009475 0.0012800 
> summary(c)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00000 0.00000 0.03054 0.00116 1.00000 

> compare.2.vectors(a,c)
$parametric
   test test.statistic test.value   test.df          p
1     t              t  -1.745388 198.00000 0.08246866
2 Welch              t  -1.745388  99.00094 0.08402002

$nonparametric
             test test.statistic  test.value test.df            p
1 stats::Wilcoxon              W 6772.000000      NA 1.143036e-05
2     permutation              Z   -1.736482      NA 1.929300e-01
3  coin::Wilcoxon              Z    4.389418      NA 0.000000e+00
4          median              Z   -4.514156      NA 0.000000e+00 
```

您会看到相同的模式，Wilcoxon 的阳性测试统计数据，但所有其他测试的阴性结果。所以最好不要使用 Wilcoxon，但其他测试之一，都同意。

PS：我很高兴对该功能发表评论。还有更多有意义的测试吗？

# udp - IM 的端口转发？

> ID：12499694
> 
> 赞同：0
> 
> 时间：2012-09-19T17:16:42.457
> 
> 标签：udp, listener

今天我构建了一个基于 UDP 的聊天软件，它使用 UDP 侦听器和服务器来形成聊天应用程序。

当我把它交给我的朋友进行测试时，他必须进行端口转发，以便我的消息可以通过路由器到达他，我也是。

我很好奇，像 msn messenger 和 skype 这样的 IM 客户端是如何工作的。比如他们如何接收消息而无需转发？

谢谢， 维杜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:24:48.867

MSN 等客户端连接到第三方远程服务器，该服务器在技术上也具有端口转发/路由功能，但它通过静态 IP 地址向公众公开。你下载一个像 MSN 这样的客户端应用程序，它连接到远程服务器，但客户端本身并不充当服务器，因此不需要端口转发。它很可能会消耗消息并阻塞，直到有更多消息进来，因此服务器不需要通过 IP 地址访问它来向它发送消息。

在您的情况下，由于您在专用网络上托管远程服务器，因此您需要将流量路由到该 IP 地址到连接到它的适当内部设备，就像您在您的一个服务器上托管其他任何东西（如网站）一样电脑。

由于您的朋友还必须进行端口转发以使应用程序正常工作，因此他们的客户端似乎也充当服务器并且不与您的服务器保持连接/套接字。如果客户端要与服务器保持一个套接字，则只有您需要进行端口转发，而您的朋友则不需要，因为他们的客户端只会侦听请求并阻塞，直到它们进来，然后将请求发送到您的服务器。

* * *

您可能想研究像 RabbitMQ 这样的真实消息总线，您可以托管此消息总线，然后构建您的客户端以订阅它并发送/接收消息。另一种选择是 Redis，您可以使用 POP 功能删除客户端从队列中检索到的“已读”消息。

# ios - 如何在情节提要中加载没有按钮的视图控制器？

> ID：12499695
> 
> 赞同：1
> 
> 时间：2012-09-19T17:16:45.043
> 
> 标签：ios, xcode, storyboard

我想加载没有按钮的视图控制器。我将标识符设置为 10 并尝试使用

```
if(...){ 
//load ViewController2
UIViewController *vc = [[self storyboard] instantiateViewControllerWithIdentifier:@"10"];
[self.navigationController pushViewController:vc];
} 
```

这是我的项目[http://www.sendspace.com/file/kfjhd5](http://www.sendspace.com/file/kfjhd5)

有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T17:37:02.453

您问题中的上述代码很好。我知道您问的是如何在没有按钮的情况下执行此操作，但您演示的问题是您使用了一个按钮，但没有将其正确连接到`IBAction`. 您`goNext`应该在 .h 中定义为：

```
- (IBAction)goNext:(id)sender; 
```

实施应该是：

```
- (IBAction)goNext:(id)sender
{
    UIViewController *vc=[[self storyboard] instantiateViewControllerWithIdentifier:@"10"];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

我想你是`IBAction`手动创建的。未来值得注意的是，如果你`control`从按钮向下拖动（或右键拖动）到助手编辑器文件，你可以自动创建你的`IBAction`界面，并且不会发生这种错误：

![自动创建 IBAction](../Images/fbf8723b5bebec7f1f273493a29e9973.png)

* * *

顺便说一句，我个人更喜欢使用 segue，所以我首先定义视图控制器本身之间的 push segue。在 Xcode 6 中，可以`control`从场景上方的视图控制器图标 - 拖动到目标场景：

![创建segue xcode 6](../Images/829266357d2c17fb58bd9677106fe3dd.png)

在 6 之前的 Xcode 版本中，可以`control`从场景下方栏中的视图控制器图标 - 拖动：

![创建转场](../Images/a7de5d0d466ecafe7c9ea6d4fda517a5.png)

然后我在 Interface Builder 中选择 segue 并给它一个“故事板标识符”（在这个例子中，我称之为它`pushTo10`）：

![指定转场 ID](../Images/b3d4a32ff5550729f647a444702b3c3a.png)

然后我让我`goNext`执行那个segue，而不是手动调用`pushViewController`：

```
- (IBAction)goNext:(id)sender
{
    [self performSegueWithIdentifier:@"pushTo10" sender:self];
} 
```

这样做的好处是我的故事板现在直观地代表了我的应用程序的流程（而不是看起来有一个场景漂浮在那里），并且像导航栏这样的图形元素在故事板中正确表示。

您不必这样做，但这是另一种需要注意的选择。

# jquery - 为简单的幻灯片/ jquery添加一个轻松

> ID：12499698
> 
> 赞同：1
> 
> 时间：2012-09-19T17:16:58.100
> 
> 标签：jquery, slidetoggle, easing

我终于为我的新页面找到了完美、简单的 jquery 代码：

```
<script type="text/javascript">
 $(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

});
</script> 
```

我想添加缓动函数和时间，就像在这段代码中一样：

```
 $('#mypage-info').slideToggle('2000', "easeOutBounce", function () {
      // Animation complete.
   });
}); 
```

我的猜测是：

```
<script type="text/javascript">
 $(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv")..slideToggle('2000', "easeOutBounce", function () {

    });

});
</script> 
```

但我得到一个错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:08:14.980

只需删除`.`您拥有的双倍。您有语法错误。改变：

```
$(".slidingDiv")..slideToggle('2000', "easeOutBounce", function () { 
```

对此：

```
$(".slidingDiv").slideToggle('2000', "easeOutBounce", function () { 
```

# c# - 为什么循环会跳过我的 DataTable 中的最后一行？

> ID：12499702
> 
> 赞同：2
> 
> 时间：2012-09-19T17:17:06.177
> 
> 标签：c#, .net-2.0

如果满足某些条件，我有以下代码循环`DataTable`并构建另一个。但是，将跳过初始 DataTable 中的最后一行。

```
for (int i = 0; i < dt.Rows.Count; i++ )
{
    DataRow row = dt.Rows[i];
    DataRow nextRow = i < dt.Rows.Count - 1 ? dt.Rows[i + 1] : null;

    string account = row[1].ToString();
    string nextAccount = "";
    if (nextRow != null)
    {
        nextAccount = nextRow[1].ToString();
    }

    numberOfItems++;
    totalAmount += Convert.ToDecimal(row[2]);
    row[4] = "D";
    row[5] = c;
    row[6] = Sequence;

    if (nextRow != null && i < dt.Rows.Count && account != nextAccount)
    {
        dt2.Rows.Add("N",
            c,
            row[1],
            row[2],
            row[3],
            numberOfItems,
            totalAmount,
            Sequence);

        numberOfItems = 0;
        totalAmount = 0m;
        Sequence++;
    }

} 
```

在上面的代码中，如果我有一个表，例如：

```
abc, 1, 2, 3
abc, 1, 2, 5
定义, 1, 3, 6
```

它将处理两个 abc，但不处理 def。

dt2 应包含：

```
abc, 1, 2, 8, 2
定义, 1, 3, 6, 1
```

其中 8 是 dt 中第 4 列的总数，2 是 abc 行数。

我只得到这个

```
abc, 1, 2, 8, 2
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:19:56.723

那是因为看起来每一行的生成不仅取决于初始表中的行，还取决于初始表中相应行之后的行。最后一行没有“后面的行”。代码被编写成它不会做任何事情（对于最后一行），而不是通过尝试访问不存在的行来崩溃和烧毁。

因此，看看您实际尝试做的事情，我建议您采用类似于以下的解决方案：

```
foreach (var group in dt.AsEnumerable()
    .GroupBy(row => row[0]))
{
    DataRow firstInGroup = group.First();
    dt2.Rows.Add(
        firstInGroup[0],
        firstInGroup[1],
        firstInGroup[2],
        group.Sum(row => row[3] as decimal?));
} 
```

您可以使用`GroupBy`根据第一列中的值对结果进行分组，然后生成一个新表，该表适当地聚合每个组的结果。这可能不是你所需要的，但它应该能让你大部分时间到达那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:22:34.147

问题在于这一行：

```
if (nextRow != null && i < dt.Rows.Count && account != nextAccount) 
```

尝试将其更改为

```
if (account != nextAccount) 
```

我删除了：

```
nextRow != null 
```

因为这会阻止添加最后一条记录。

我还删除了：

```
i < dt.Rows.Count 
```

因为这已经由您的`for`循环强制执行。

注意：如果账户与上一行相同，最后一行可能不会添加。不确定您希望这里有什么行为。

# distance - 曼哈顿/城市街区距离用于生成推荐的示例？

> ID：12499705
> 
> 赞同：3
> 
> 时间：2012-09-19T17:17:11.723
> 
> 标签：distance, mahout, recommendation-engine

在创建基于邻域的推荐器时，有各种可用的距离度量（例如在 Apache Mahout 中），我可以为其中的大多数找到相当多的实际示例。但我从来没有偶然发现曼哈顿距离（又名城市街区距离）优于其他人的例子。

我很乐意找到一些；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:09:13.543

曼哈顿距离很少有用；它主要是为了完整性。如果您的评级是像计数这样的离散值，并且它与编辑距离有某种关系，那么它可能很有用，所以如果项目是......字符串可能很有用。但这对于推荐者来说可能不是一个真正的用例。

# python - 使用matplotlib时对图形的控制

> ID：12499706
> 
> 赞同：2
> 
> 时间：2012-09-19T17:17:22.747
> 
> 标签：python, matplotlib

我是一个完整的 matplotlib 菜鸟，目前对示例程序进行了一些小改动，看看会发生什么，并试图理解广泛但没有良好顺序的文档。

我正在尝试将图形显示添加到现有的基于 tk gui 的 python 程序中。我很高兴图表浮动在一个新窗口中，我不需要它嵌入到 tk 中（但是，也许下周）。

现有程序有一个用户按下的 tk.Button，它调用一个函数，该函数检索一些数据并更新一些标签中的最大/最小/平均值。

我想增强功能，以便在更新标签的同时，它还会弹出数据图表。如果图形已经存在，则按下下一个按钮应将旧迹线替换为新迹线并重新自动缩放轴。如果用户关闭图形窗口，按下下一个按钮应该会弹出一个新的。

每按一次新的图表都很容易，添加 if not self.fig 测试让我降到一个。它添加了持久跟踪，直到我添加 plt.clf()。但是，如果用户关闭图形窗口，下面的代码不会重新创建它。我想我需要类似图形是否可见，或者图形是否存在，而不是在 self.fig 上进行测试。或者也许我错过了明显的方法，并且有更好的方法？非常感谢帮助。

```
import Tkinter as tk
import os, sys
import numpy as np
import numpy.random as npr
import matplotlib.pyplot as plt

class Plotter():
    def __init__(self):
        self.fig=None
        self.ax=None    

    def do_stuff(self):
        # make plausible data
        a=np.arange(0,3,0.1)
        b=npr.random(1)
        c=np.power(a,b)            

        if not self.fig:
            self.fig = plt.figure()
        else:
            plt.clf()

        self.ax = self.fig.add_subplot(111)
        self.ax.plot(a,c,'k--')
        self.ax.set_yticklabels([])
        self.ax.set_xticklabels([])

        plt.show()

p=Plotter()
root=tk.Tk()

rt = tk.Button(root, text='Capture', command=p.do_stuff)
rt.grid(row=0, column=0)

qt = tk.Button(root, text='quit', command=sys.exit)
qt.grid(row=1, column=0)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:09:36.343

用新的解决方案编辑：另一个解决方案是用来`pyplot.fignum_exists`检查你的身材是否还在。所以你可以这样做：

```
if self.fig is None or not pyplot.fignum_exists(self.fig.number):
    self.fig = pyplot.figure()
# self.fig will now be active, either via an old still-open figure or a newly-created one 
```

后代的旧解决方案：

问题是，如果关闭图形不会影响您的`self.fig`，尽管它会使该图形对象无用。一种选择是使用`pyplot.gcf()`代替`pyplot.figure()`，它代表“获取当前数字”。如果打开了一个图形，这将返回一个现有图形，如果没有活动图形，它将创建一个新图形。所以在你的`do_stuff`方法中你可以使用`pyplot.gcf()`它，它会返回你的旧图形对象或一个新的对象，你不需要担心哪个。所以就这样做：

```
def do_stuff(self):
    # make plausible data
    fig = pyplot.gcf()
    fig.clf()
    self.ax = fig.add_subplot(111)
    # etc. 
```

这显然有局限性。特别是，如果您的程序的任何其他部分也创建或使用 matplotlib 图形，那么使用`gcf`可能会导致奇怪的结果，因为“当前”图形可能是其他函数创建的其他图形。不过，对于您现在正在做的事情，这似乎是一个可行的解决方案。

# java - Hibernate org.apache.xerces.parsers.SAXParser 没有实现 XMLReader 异常

> ID：12499707
> 
> 赞同：1
> 
> 时间：2012-09-19T17:17:26.443
> 
> 标签：java, hibernate

当我尝试 config hibernate 和 java app (how Jira service) ，我有这个错误：

```
Warning: Caught exception attempting to use SAX to load a SAX XMLReader 
[INFO] [talledLocalContainer] Warning: Exception was: java.lang.ClassCastException:org.apache.xerces.parsers.SAXParser cannot be cast to org.xml.sax.XMLReader
[INFO] [talledLocalContainer] Warning: I will print the stack trace then carry on using the default SAX parser
[INFO] [talledLocalContainer] java.lang.ClassCastException: org.apache.xerces.parsers.SAXParser cannot be cast to org.xml.sax.XMLReader
[INFO] [talledLocalContainer]   at org.xml.sax.helpers.XMLReaderFactory.loadClass(XMLReaderFactory.java:243)
[INFO] [talledLocalContainer]   at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(XMLReaderFactory.java:194)
[INFO] [talledLocalContainer]   at org.dom4j.io.SAXHelper.createXMLReader(SAXHelper.java:83)
[INFO] [talledLocalContainer]   at org.dom4j.io.SAXReader.createXMLReader(SAXReader.java:894)
[INFO] [talledLocalContainer]   at org.dom4j.io.SAXReader.getXMLReader(SAXReader.java:715)
[INFO] [talledLocalContainer]   at org.dom4j.io.SAXReader.read(SAXReader.java:435)
[INFO] [talledLocalContainer]   at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1518) 
```

-->

```
Caused by: org.hibernate.HibernateException: Could not parse configuration: hibernate.cfg.xml
[INFO] [talledLocalContainer]   at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1528)
[INFO] [talledLocalContainer]   at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:1035)
Caused by: org.dom4j.DocumentException: SAX2 driver class org.apache.xerces.parsers.SAXParser does not implement XMLReader Nested exception: SAX2 driver class org.apache.xerces.parsers.SAXParser does not implement XMLReader
[INFO] [talledLocalContainer]   at org.dom4j.io.SAXReader.read(SAXReader.java:484)
[INFO] [talledLocalContainer]   at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1518)
[INFO] [talledLocalContainer]   ... 14 more 
```

-->

....我的 hibernate.cfg.xml ：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/navision</property>
        <property name="hibernate.connection.username">admin</property>
        <property name="hibernate.connection.password">admin</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</property>
        <property name="hibernate.show_sql">false</property>
        <property name="hibernate.cache.use_query_cache">false</property>
        <property name="hibernate.cache.use_second_level_cache">false</property>
        <property name="hibernate.generate_statistics">false</property>
        <property name="hibernate.c3p0.acquire_increment">1</property>
        <property name="hibernate.c3p0.idle_test_period">100</property>
        <property name="hibernate.c3p0.max_size">100</property>
        <property name="hibernate.c3p0.max_statements">0</property>
        <property name="hibernate.c3p0.min_size">10</property>
        <property name="hibernate.c3p0.timeout">100</property>
        <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
        <property name="hbm2ddl.auto">update</property>
    </session-factory> 
```

-->

当我尝试为 db 初始化 SessionFactory 时出现此错误：

```
ourSessionFactory = new AnnotationConfiguration().configure("hibernate.cfg.xml").addAnnotatedClass(Navision.class).buildSessionFactory(); 
```

-->

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:19:22.087

问题已解决。我发现了一些以前没有见过的因素。这些是包含在自定义库中的解析器，hibernate.core、dom4j 和其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:45:59.903

包括其他版本的 xerxesImpl 通常是痛苦的秘诀。从您的应用程序中删除任何 xercesImpl 或 xml-apis jar。

# php - 在 XML 中回显 PHP 变量

> ID：12499710
> 
> 赞同：1
> 
> 时间：2012-09-19T17:17:36.803
> 
> 标签：php, xml, curl

我正在收集表单信息，我必须将该数据发布到 XML 格式的 URL。所以我将 XML 放入一个帖子字符串并使用 cURL 来执行帖子。我如何将正确的表单字段回显到 XML 中？在 ProjectId 中，我输入了我认为是代码的内容，但 Notepad++ 并未将其显示为有效的 PHP，所以我认为这是错误的。谢谢！

```
$post_string = '

<?xml version="1.0" encoding="UTF-8" ?>

<Ping vid="" sid="">                   
   <ProjectInfo>
      <ProjectId><? echo $projectid; ?></ProjectId>
      <SubProject></SubProject>
   </ProjectInfo>
 </Ping>

 '; 
```

我正在使用这个链接来弄清楚： http: [//www.codediesel.com/php/posting-xml-from-php/](http://www.codediesel.com/php/posting-xml-from-php/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T17:19:23.213

只需连接字符串

```
$post_string = '

<?xml version="1.0" encoding="UTF-8" ?>

<Ping vid="" sid="">                   
   <ProjectInfo>
      <ProjectId>' . $projectid . '</ProjectId>
      <SubProject></SubProject>
   </ProjectInfo>
 </Ping>

 '; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-23T11:55:04.480

只是另一种使用方式。尝试使用这种样式为 php 变量提供格式良好的 xml 字符串。

```
$post_string =<<<XML
<Ping vid="" sid="">                   
<ProjectInfo>
  <ProjectId>$projectid</ProjectId>
  <SubProject></SubProject>
</ProjectInfo>
</Ping>
XML; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:33:33.610

```
$post_string = '

<?xml version="1.0" encoding="UTF-8" ?>

<Ping vid="" sid="">                   
   <ProjectInfo>
      <ProjectId><![CDATA['. $projectid.']]></ProjectId>
      <SubProject></SubProject>
   </ProjectInfo>
 </Ping>

 '; 
```

在某些情况下，如果您的变量包含“&”和“<”等字符，则需要在变量前后添加 CDATA 标记，因为它们会破坏 XML。在您的情况下，$projectid 似乎是一个 id (int)，但也许您将在包含这些字符的脚本中使用更多变量，请注意在这种情况下 CDATA 标记的重要性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T17:19:21.923

无需`<?php ?>`再次打开标签，只需连接字符串值。

```
$post_string = '

<?xml version="1.0" encoding="UTF-8" ?>

<Ping vid="" sid="">                   
   <ProjectInfo>
      <ProjectId>'. $projectid.'</ProjectId>
      <SubProject></SubProject>
   </ProjectInfo>
 </Ping>

 '; 
```

# c# - 从 Win32_Products 获取产品的完整路径

> ID：12499711
> 
> 赞同：0
> 
> 时间：2012-09-19T17:17:37.893
> 
> 标签：c#, registry

我目前正在使用以下查询来获取已安装产品的列表：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Product"); 
```

从中，我可以得到`InstallLocation`产品，但我希望能够（至少）更深一层。它不一定是可执行文件的完整路径——它实际上只需要更深一个目录。不过，整个路径显然也会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:31:20.087

我不认为这是可能的。产品存在多个可执行文件，因此这样的功能充其量是模棱两可的。

# 编辑，对您的评论的想法：

如果您正在搜索自己产品的安装，也许您可​​以：

1.  检查您的产品是否已使用 IdentificationNumber 和您的 WMI 查询安装。
2.  如果您对此有任何结果，请从 WMI 中找到 InstallLocation，然后在该目录下搜索您的产品可执行文件（更容易，因为您将知道要搜索的可执行文件的名称或名称）。

# delphi - 如何检测组件已被释放？

> ID：12499722
> 
> 赞同：5
> 
> 时间：2012-09-19T17:18:15.037
> 
> 标签：delphi

我有一个我创建的组件，然后将我的主窗体上的一个面板传递给它。

这是一个非常简化的示例：

```
procedure TMy_Socket.StatusPanel_Add(AStatusPanel: TPanel); 
```

然后，该组件将根据需要更新面板标题。

在我的主程序中，如果我`FreeAndNil`在下次组件尝试更新面板时面板我得到一个 AV。我明白为什么：组件对面板的引用现在指向一个未定义的位置。

如果面板已被释放，我如何在组件中检测到我知道我无法引用它？

我试过`if (AStatusPanel = nil)`但不是`nil`，它仍然有一个地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T19:10:38.743

您必须调用面板的`FreeNotification()`方法，然后让您的`TMy_Socket`组件覆盖虚拟`Notification()`方法，例如（根据您的命名方案，我假设您可以`TPanel`向组件添加多个控件）：

```
type
  TMy_Socket = class(TWhatever)
  ...
  protected
    procedure Notification(AComponent: TComponent; Operation: TOperation); override;
  ...
  public
    procedure StatusPanel_Add(AStatusPanel: TPanel); 
    procedure StatusPanel_Remove(AStatusPanel: TPanel); 
  ...
  end;

procedure TMy_Socket.StatusPanel_Add(AStatusPanel: TPanel); 
begin
  // store AStatusPanel as needed...
  AStatusPanel.FreeNotification(Self);
end;

procedure TMy_Socket.StatusPanel_Remove(AStatusPanel: TPanel); 
begin
  // remove AStatusPanel as needed...
  AStatusPanel.RemoveFreeNotification(Self);
end;

procedure TMy_Socket.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited;
  if (AComponent is TPanel) and (Operation = opRemove) then
  begin
    // remove TPanel(AComponent) as needed...
  end;
end; 
```

如果您一次只跟踪一个`TPanel`：

```
type
  TMy_Socket = class(TWhatever)
  ...
  protected
    FStatusPanel: TPanel;
    procedure Notification(AComponent: TComponent; Operation: TOperation); override;
  ...
  public
    procedure StatusPanel_Add(AStatusPanel: TPanel); 
  ...
  end;

procedure TMy_Socket.StatusPanel_Add(AStatusPanel: TPanel); 
begin
  if (AStatusPanel <> nil) and (FStatusPanel <> AStatusPanel) then
  begin
    if FStatusPanel <> nil then FStatusPanel.RemoveFreeNotification(Self);
    FStatusPanel := AStatusPanel;
    FStatusPanel.FreeNotification(Self);
  end;
end;

procedure TMy_Socket.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited;
  if (AComponent = FStatusPanel) and (Operation = opRemove) then
    FStatusPanel := nil;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:22:13.863

如果在释放另一个组件时需要通知您的组件，请查看[`TComponent.FreeNotification`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Classes_TComponent_FreeNotification.html). 它应该正是您所需要的。

# .net - 解析 .NET 4 与 SL 5 中的动态类型

> ID：12499723
> 
> 赞同：1
> 
> 时间：2012-09-19T17:18:18.040
> 
> 标签：.net, generics, dynamic

我在 Silverlight 5 中有以下代码：

```
public void Send(Notification notification)
{
    // Because the variable is passed as Notification, we have to trick the
    // type-inference feature of the runtime so the message will be sent using
    // the actual type of the object.
    // Using the dynamic keyword, we can convert the type of the object passed
    // to the Send method.
    // This allows subscribers to register for messages using the generic interface.
    dynamic stronglyTypedNotification = Convert.ChangeType(notification,
                                                           notification.GetType(),
                                                           CultureInfo.InvariantCulture);

    SendCore(stronglyTypedNotification);
}

private void SendCore<T>(T notification)
    where T : Notification
{
    foreach (var handlerFactory in Handlers)
    {
        var handler = handlerFactory.Value as INotificationHandler<T>;

        if (handler != null)
        {
            handler.Handle(notification);
        }
    }
} 
```

我必须将此代码移植到 WPF 应用程序中运行。

当我在 WPF 应用程序中运行它并在 SendCore 方法中设置断点时，T 不是正确的类型。我只能假设这是因为泛型应该是静态定义的，因此编译器创建了它认为在运行时需要的 SendCore 版本。我猜 Silverlight 以不同的方式处理这个问题，因为这段代码在 SL 中完美运行。

此代码的目标是定位 Handlers 集合中包含的任何实现 INotificationHandler 的对象，其中 T 是传递给 Send 方法的对象的类型（继承基本 Notification 类），然后调用 Handle(T n) 方法那些物体。

如何在我的 WPF 应用程序中执行此操作？

**更新**

经过一些额外的测试，我发现了更奇特的结果。当我在 SendCore 方法的第一行设置断点并检查 T 和通知时，我发现：

*   Intellisense 表示 T 是“GenericNotification”，它是程序集中的合法类。
*   Intellisense 指示“通知”是正确的强类型类 (DataChangedNotification)。
*   DataChangedNotification 不会以任何方式继承 GenericNotification。两个子类通知。
*   因为 T 正在解析为 GenericNotification，所以尝试将每个处理程序强制转换为 INotificationHandler<T> 将失败，因为没有实现 INotificationHandler<GenericNotification>

**鉴于这个确切的代码在 Silverlight、一个控制台应用程序和另一个 WPF 应用程序（以及 David 在 LINQpad 中的测试）中工作，那么到底会发生什么？**

我唯一能想到的就是代码实际上存在于 WPF 应用程序引用的类库中。不确定这是否重要，因为我在另一个（新）WPF 应用程序中测试了该场景并得到了正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T07:20:06.877

它对我有用，这是意料之中的。如果它不同，我会感到惊讶。

```
void Main()
{
    Send(new NA());
    Send(new NB());
}

public class Notification {}
public class NA : Notification {}
public class NB : Notification {}

public void Send(Notification notification)
{
    dynamic stronglyTypedNotification
        = Convert.ChangeType(notification,
                             notification.GetType(),
                             CultureInfo.InvariantCulture);

    SendCore(stronglyTypedNotification);
}

public void SendCore<T>(T notification) where T : Notification
{
    Console.WriteLine(typeof(T));
} 
```

这输出

```
typeof (NA) 
typeof (NB) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:14:45.410

尽管存在明显的性格冲突，但我还是要感谢丹尼尔推动我继续深入挖掘这个问题。我同时要求将其删除，因为我认为它对其他人没有任何价值。

事实证明，问题确实起源于其他地方，并且被简单的 ToString() 重载所掩盖。

第一个问题：我看到（和报告）的行为是另一个开发人员帮助添加 ToString 覆盖到基 Notification 类的结果，该类在调试器中显示对象的名称而不是数据类型。这就是为什么在 VS 中查看“通知”参数会显示预期的类型名称。实际上，传入的对象类型是 GenericNotification。

一旦我意识到发生了这种情况，我就可以打开我们的框架代码（独立构建的单独解决方案）来查看对象的实例化位置。在那里我发现该文件的 .NET 版本的实现方式与 Silverlight 版本不同。我们使用 MEF 进行依赖注入，并且 Silverlight 版本的代码根据导入的受支持类型列表解析数据类型。.NET 版本使用了 switch 语句（啊！）。

因此，我更改了 .NET 版本以使用 MEF 动态创建对象，以帮助解析类型和中提琴！现在一切都按预期工作，压力也得到了缓解（这是我们软件的一个关键功能，所以让它不起作用......）。

# timezone - Plone MailHost 使用澳大利亚时区发送错误的 Date 标头

> ID：12499725
> 
> 赞同：2
> 
> 时间：2012-09-19T17:18:21.003
> 
> 标签：timezone, plone, zope

我有一个正在为悉尼用户运行的 Plone 实例，因此 TZ 环境变量设置为`Australia/Sydney`. 有了这个集合，使用`DateTime`Zope2 中的模块的代码会产生显示错误时区的结果。例如：

```
>>> import time
>>> import DateTime
>>> print time.strftime("%a, %d %b %Y %T %z") # 
Thu, 20 Sep 2012 02:38:08 +1000
>>> print DateTime.DateTime().rfc822()
Thu, 20 Sep 2012 02:38:08 -0400 
```

这是相当有问题的，因为`Products.MailHost`将`Date:`传出电子邮件的标头设置为该值`DateTime().rfc822()`（在 MailHost.py 的第 466 行）。由于偏移量错误，Date 标头中的时间现在是未来 12 小时。接收该电子邮件的 SMTP 服务器通常会立即拒绝它！

同一实例中的其他代码非常高兴地使用该 TZ 变量正确运行，因为它使用`datetime`Python 中的模块，这一切都基于 libc 的`time.h`函数。

那么，为了让 Plone 的 MailHost 在澳大利亚时区工作，人们做了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:05:32.560

不幸的是，`TZ=Australia/Sydney`变成`time.tzname == ('EST', 'EST')`：

```
$ TZ=Australia/Sydney bin/zopepy -c "import time; print time.tzname"
('EST', 'EST') 
```

DateTime 内部数据库将其转换为`US/Eastern`. 东部标准时间是多个时区的名称，这是一个不幸的副作用。

您需要指定一个更明确`TZ`的变量来指定偏移量和 DST 切换日期，并使用不会被误解的新时区名称：

```
TZ="AEST-10AEDT-11,M10.1.0/02:00:00,M4.1.0/03:00:00" 
```

上面的值来自[仍然打开的错误报告](https://bugs.launchpad.net/datetime/+bug/142148)，恰好适合您的目的：

```
$ TZ="AEST-10AEDT-11,M10.1.0/02:00:00,M4.1.0/03:00:00" bin/zopepy
>>> import DateTime
>>> import sys
>>> m = sys.modules['DateTime.DateTime']
>>> m._findLocalTimeZoneName(0)
'GMT+10'
>>> m._findLocalTimeZoneName(1)
'GMT+11'
>>> import DateTime
>>> DateTime.DateTime()
DateTime('2012/09/21 00:12:0.765691 GMT+10')
>>> DateTime.DateTime().rfc822()
'Fri, 21 Sep 2012 00:12:04 +1000' 
```

您可以`TZ`通过在 buildout 中指定环境变量来将环境变量添加到 Zope 配置中：

```
[instance]
recipe = plone.recipe.zope2instance
...
environment-vars =
    TZ AEST-10AEDT-11,M10.1.0/02:00:00,M4.1.0/03:00:00 
```

# xcode - 如何在 Xcode 工作区中查看多个控制台？

> ID：12499727
> 
> 赞同：2
> 
> 时间：2012-09-19T17:18:22.960
> 
> 标签：xcode, xcode4, console, workspace

我在同一个 Xcode 4.4.1 工作区中有一个客户端程序和一个服务器程序（均用 C 编写）。我只能查看服务器程序的控制台输出。如何打开另一个控制台来查看客户端输出？

同时，我已经从工作区中删除了这两个项目，因此它们都有自己的控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:20:05.983

您可以打开多个 Xcode 窗口并以不同方式设置每个窗口。我建议打开一个新窗口并隐藏除控制台之外的所有内容。

# macos - 在 Mac 上使用命令行创建 PNG/JPG 文件

> ID：12499728
> 
> 赞同：14
> 
> 时间：2012-09-19T17:18:27.563
> 
> 标签：macos, bash, command-line, png

是否有创建简单 PNG/JPG 图片文件的命令，可以在 Mac 上的终端/脚本命令中运行？

现在，我将创建一个简单的单色 PNG 图片文件，并带有指定宽度和长度的参数。如果它可以在上面放文字，那就更好了。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-19T18:38:45.520

[ImageMagick](https://www.imagemagick.org/script/index.php)套件中的命令行`convert`实用程序可以轻松创建指定尺寸的图像：

```
convert -size 200x200 xc:white canvas.png 
```

要创建带有文本的图像，请使用其他选项：

```
convert -size 200x200 -gravity center -background white -fill black \
        label:"text goes here" canvas.png 
```

ImageMagick 站点有[更多](https://www.imagemagick.org/Usage/)的使用示例。

要在 OSX 上获取 ImageMagick，您可以使用[MacPorts](https://www.imagemagick.org/script/download.php#macosx)等自动构建系统或运行预先制作的[安装程序包](https://cactuslab.com/imagemagick/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T20:12:11.320

OS X 没有为此提供 shell 命令。但是你有三个选择。

OS X 确实在 Applescript 中提供了一种方法：图像事件。您可以使用 Applescript 或 Python 或 Ruby 与 appscript 或 ScriptingBridge 编写一个三行代码来执行您想要的操作，然后从 shell 运行它。

OS X 还在 Cocoa 中内置了一些相当高级的图像支持，您可以从 Python、Ruby、ObjC、Applescript 等中访问它，因此您可以编写一个五行代码来满足您的需求。

或者您可以使用第三方工具来满足您的需求。正如 user4815162342 所建议的那样，ImageMagick 可能是最好的一个。

（如果您在 SU 而不是 SO 上发布，我什至不会提及前两种可能性。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-14T09:02:50.073

如果你根本不想安装任何东西，你可以使用 macOS 的内置 PHP 解释器，它自动包含[gd](https://www.php.net/manual/en/book.image.php)库。所以，这会给你一个像这样的脚本：

```
#!/usr/bin/php -f

<?php
// Create a 200*100 image
$im = imagecreate(200, 100);

// Blue background and red text
$bg = imagecolorallocate($im, 0, 0, 255);
$fg = imagecolorallocate($im, 255, 0, 0);

// Write the string and save to disk
imagestring($im, 5, 10, 30, 'Nothing to install', $fg);
imagepng($im, "result.png");
?> 
```

[![在此处输入图像描述](../Images/41b242a16a698543f26be4f6ca1df36b.png)](https://i.stack.imgur.com/lb4dX.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-26T14:22:52.280

改编自 @mark-setchell 的回答：

```
php -r '$i = imagecreate(500, 500); imagecolorallocate($i, 0, 0, 255); imagepng($i, "sample.png");' 
```

只要安装了 Mac 的默认 PHP 版本，它就可以工作。

`sample.php`这将在您执行命令的同一目录中创建一个名为的蓝色 png 。

# apache - Apache 正在寻找不存在的 htaccess 和 htpasswd 文件

> ID：12499732
> 
> 赞同：2
> 
> 时间：2012-09-19T17:18:52.960
> 
> 标签：apache, .htaccess, localhost, .htpasswd

Apache 请求身份验证并根据不再位于 DocumentRoot 中的 .htaccess 文件中的说明查找 .htpasswd 文件时遇到问题。背景：

在我的 DocumentRoot 中，我之前从另一台机器复制了一个 .htaccess 和 .htpasswd 文件（以及所有其他网站文件）。

.htaccess 内容：

```
AuthType Basic
AuthName "Password is required"
AuthUserFile /some/directory/that/was/on/the/other/server/not/this/one/.htpasswd
Require valid-user 
```

问题是：*我将 .htaccess 和 .htpasswd 从 DocumentRoot 中移出，甚至重命名了文件。* DocumentRoot 中根本没有 .htaccess 文件。

但是，当我尝试从浏览器访问 localhost 时，系统会提示我输入登录名和密码。

当我输入登录名和密码（来自旧的、不在 DocumentRoot 中的 .hpasswd 文件）时，我收到 500 Internal Server 错误，并且日志显示：

```
[error] [client 127.0.0.1] (2)No such file or directory: Could not open password file: /some/directory/that/was/on/the/other/server/not/this/one/.htpasswd 
```

这一直是个谜，因为*DocumentRoot 中的任何地方都不再有 .htaccess 或 .htpasswd 文件了*！！

尝试了几次 apache 重新启动，并尝试在 DocumentRoot 中使用空白的 .htaccess 文件。甚至 grep 整个机器的参考，`AuthType Basic`看看我是否遗漏了什么。

httpd.conf 看起来很正常......如果需要，我可以发布，但这个问题似乎足够长:)

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:35:22.910

解决。不知道我是怎么错过的，但在 DocumentRoot 的上一级目录中有一个 .htpasswd 和 .htaccess 文件。删除了这些，它工作正常。不知道为什么这很重要，因为它不在 DocumentRoot 中，而是在它之上一层……但是，这绝对是问题所在。

# java - SWT - 将图像添加到表格中的按钮 - tableViewer

> ID：12499740
> 
> 赞同：0
> 
> 时间：2012-09-19T17:19:28.253
> 
> 标签：java, image, swt

我想将图像添加到表格中的按钮。该表显示在我的主 GUI 中。我正在使用 a`TableViewer`来显示表格。

```
private void createTableViewer(Composite parent) {

  viewer = new AplotDataTableViewer(parent, SWT.BORDER|SWT.V_SCROLL|SWT.FULL_SELECTION);
  viewer.setInput(AplotDataModel.getInstance().getArrayData()); 
```

}

`AplotDataTableViewer`是一个单独的类。的构造函数`AplotDataTableViewer`接受复合和样式。

因此，当我尝试在`AplotDataTableViewer`类中添加图像时，它会给我一个`Display`变量错误。我认为这是因为图像需要显示器。

```
Image image = new Image(display, String); 
```

我不确定它需要什么来显示？如果它需要来自主 GUI 的显示，我该如何获得呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:40:47.413

您可以使用：

```
Image image = new Image(Display.getDefault(), "path/to/image.png"); 
```

或`Display.getCurrent()`改为使用。

有关更多详细信息，这里有一个关于 SWT`Image`的好教程：

[看看 SWT 图像](http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:25:59.323

我不确定您遇到了什么错误。我猜它可能是“无效的线程访问”，因为您正在从非 UI 线程访问 UI 对象。

您可以参考 Baz 提供的链接来创建图像。如果您的插件有 Activator，只需检查 `public static ImageDescriptor getImageDescriptor(String path)`此处以 ex 开头的路径：/icons/image.png。用户`ImageDescriptor.createImage(true)`将给出您正在寻找的实际图像。在从 imagedescriptor 创建新图像之前，跟踪缓存中的图像。

在按钮上设置图像，检查文档。很少有平台不支持同时设置图像和文本。

# ruby-on-rails-3 - 缺少 Rails 3.2.1 模板

> ID：12499741
> 
> 赞同：1
> 
> 时间：2012-09-19T17:19:31.503
> 
> 标签：ruby-on-rails-3, templates

我收到以下错误消息：

```
Template is missing
Missing template dishes/show, application/show with {:locale=>[:en], :formats=>[:html],      :handlers=>[:erb, :builder, :coffee]}. Searched in: * "C:/Sites/restaurant/app/views" 
```

在我的`dishes_controller`：

```
def show
    @dish = Dish.find(params[:id])

    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @dish }
     end
end 
```

模板没有丢失。它位于`app/views/dishes/show.html.erb`

输出`C:\Sites\restaurant>rake routes`：

```
 root     /                       static_pages#home
    dishes GET    /dishes(.:format)          dishes#index
    POST   /dishes(.:format)          dishes#create
    new_dish GET    /dishes/new(.:format)      dishes#new
    edit_dish GET    /dishes/:id/edit(.:format) dishes#edit
    dish GET    /dishes/:id(.:format)      dishes#show
    PUT    /dishes/:id(.:format)      dishes#update
    DELETE /dishes/:id(.:format)      dishes#destroy
    help        /help(.:format)            static_pages#help
    about        /about(.:format)           static_pages#about
    contact        /contact(.:format)         static_pages#contact
    menu        /menu(.:format)            static_pages#menu 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:40:56.970

就像其他人建议的那样，这可能是权限。我偶尔会在 Vagrant 上遇到类似的问题，并且必须重新启动我的 Vagrant 会话才能让事情恢复正常。

由于您只是在 Windows 中，我会右键单击该文件，确保它不是只读的或设置为任何疯狂的东西，重新启动您的 Web 服务器并再看一下。

# c - 将值从子进程传递给父进程

> ID：12499745
> 
> 赞同：7
> 
> 时间：2012-09-19T17:19:59.100
> 
> 标签：c, linux, fork, parent-child

我有这段代码应该创建三个子进程，每个子进程都会执行一个小的数学运算。然后，父母应该使用所有子进程的结果并获得最终答案，但我无法找到一种方法来实际读取父进程中子进程的结果。有没有办法做到这一点？

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main(void)
{
   int pid1, pid2, pid3, status;
   int a=1, b=2, c=5, d=4, e=6, f=3, g;
   int t1, t2, t3;

   printf("Hello World!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n");
   printf("Here I am  before use of forking\n");
   printf("I am the PARENT process and pid is : %d\n",getpid());

   pid1 = fork( );
   if (pid1 == 0)
   {      
    printf("\n\nHere I am just after child forking1\n");
    printf("I am the Child process and pid1 is :%d\n",getpid());      
    printf("My parent's pid is :%d\n",getppid());   
    t1 = a+b;
    printf("The answer for t1 is: %d\n", t1);       
    exit(0);
   }
   else
   {
    wait(&status);
        printf("\nHere I am just after parent forking1\n");
        printf("I am the Parent process and pid is: %d\n",getpid());
   }

   pid2 = fork( );
   if (pid2 == 0)
   {      
    printf("\n\nHere I am just after child forking2\n");
    printf("I am the Child process and pid2 is :%d\n",getpid());      
    printf("My parent's pid is :%d\n",getppid());   
    t2 = c+d;
    printf("The answer for t2 is: %d\n", t2);   
    exit(0);    
   }
   else
   {
    wait(&status);
        printf("\nHere I am just after parent forking2\n");
        printf("I am the Parent process and pid is: %d\n",getpid());
   }

   pid3 = fork( );
   if (pid3 == 0)
   {      
    printf("\n\nHere I am just after child forking3\n");
    printf("I am the Child process and pid3 is :%d\n",getpid());      
    printf("My parent's pid is :%d\n",getppid());   
    t3 = e/f;   
    printf("The answer for t3 is: %d\n", t3);   
    exit(0);
   }
   else
   {
    wait(&status);
        printf("\nHere I am just after parent forkingALL\n");
        printf("I am the Parent process and pid is: %d\n",getpid());
   }

   printf("\n\nThe final answer for t1 is: %d\n", t1);
   printf("The final answer for t2 is: %d\n", t2);
   printf("The final answer for t3 is: %d\n", t3);

   g = t1*t2-t3;
   printf("The final answer for g is: %d\n", g);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-25T22:58:55.003

您可以使用一种非常简单的技术来做到这一点，即**共享内存**。我将给出一个完整的例子来说明它是如何工作的。

首先，假设我想编写一个程序**来打印`n`斐波那契数列中的第一项**（我知道这样做并不合乎逻辑，但这是一个简单的示例，因此每个人都可以理解）。

1.  我有一个父母，它读取一个代表第一`n`项的整数值
2.  然后父进程将创建一个子进程并传递`n`给它
3.  然后孩子应该计算前 n 项并将它们返回给父母。

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/mman.h>
#include <fcntl.h>
#include <sys/stat.h>

void printFibo(int n, int *fibo)
{
    int i;
    for(i=0; i<=n; i++)
        printf("%d -> %d\n" ,i, fibo[i]);
}

void computeFibo(int n, int *fibo) 
{
    int i;
    fibo[0] = 0;
    fibo[1] = 1;

    for (i=2; i<=n; i++) 
        fibo[i] = fibo[i-1] + fibo[i-2];
}

int main(int argc, char *argv[])
{
    pid_t childPID;
    int status;
    int shm_fd;
    int* shared_memory;
    int msize; // the size (in bytes) of the shared memory segment 
    const char *name = "FIBONACCI_SERIES";
    int n;

    if (argc!=2) 
    {
        fprintf(stderr, "usage: %s <Fibonacci number to be generated>\n", argv[0]);
        return -1;
    }

    n = atoi(argv[1]);
    if (n < 0) 
    {
        fprintf(stderr, "Illegal fibonacci number: %s\n", argv[1]);
        return -2;
    }

    // calculating the array size based on the number of terms being passed from child to parent
    msize = (n+2)*sizeof(int); 

    // open the memory
    shm_fd = shm_open (name, O_CREAT | O_EXCL | O_RDWR, S_IRWXU | S_IRWXG);
    if (shm_fd < 0) 
    {
        fprintf(stderr,"Error in shm_open()");
        return -3;
    }

    printf("Created shared memory object %s\n", name);

    // attach the shared memory segment
    ftruncate(shm_fd, msize);
    printf("shmat returned\n");

    // allocating the shared memory
    shared_memory = (int *) mmap(NULL, msize, PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);
    if (shared_memory == NULL) 
    {
        fprintf(stderr,"Error in mmap()");
        return -3;
    }

    printf("Shared memory segment allocated correctly (%d bytes).\n", msize);

    shared_memory[0] = n;

    childPID=fork();
    if ( childPID == -1 ) 
    {
        fprintf(stderr, "Cannot proceed. fork() error");
        return -4;
    }
    if (childPID  == 0) 
    {
        // then we're the child process
        computeFibo(shared_memory[0],shared_memory+1);
        exit(0);
    }
    else
    {
        // parent will wait until the child finished
        wait(&status);

        // print the final results in the 
        printFibo(shared_memory[0], shared_memory+1);

        // now detach the shared memory segment
        shm_unlink(name);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-24T21:19:30.727

如果您想在不使用任何通信方式（即管道、共享内存）的情况下做到这一点，那么您将不得不使用`exit()`系统调用。系统调用返回一个信号，然后在父进程中`exit`被系统调用捕获。`wait()`在这里，我给你一个代码，我在其中将一个值从孩子发送给父母。最后一件事你必须将等待捕获的信号除以 255 以获得确切的值。`

```
 #include<unistd.h>
    #include<stdio.h>
    #include<stdlib.h>
    #include<sys/types.h>
    #include<sys/wait.h>
    int main(int argc,char *argv[])
    {
       pid_t pid=fork();
       if(pid==0)
       {//child
            int sum=5+7;
            exit(sum);//sending exiting status or any value to parent
       }
       else
       {//parent
            int childval=-1;
            wait(&childval);//catching signal sent by exit of(child) 
            printf("%d",childval/255);//changing signal to exact value  
       }    
        return 0;
    } 
```

`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:33:14.343

`fork`制作进程的副本，因此一旦您调用`fork`子进程，就有自己的变量 t1、t2 和 t3 副本，您希望从父进程中读取这些副本。

因此，一旦您`exit`成为孩子，孩子们就会随着计算出来的值一起死去，这些值对他们来说是本地的。

如果要从孩子那里读取值，则必须使用`pipes`或共享内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T17:42:44.493

您必须在父进程中创建管道，而不是在 fork 之后您必须关闭子进程中的输入文件描述符并关闭父进程中的输出文件描述符。

pipe(2) 手册页中有一个示例。

```
 #include <sys/wait.h>
   #include <stdio.h>
   #include <stdlib.h>
   #include <unistd.h>
   #include <string.h>

   int
   main(int argc, char *argv[])
   {
       int pipefd[2];
       pid_t cpid;
       char buf;

       if (argc != 2) {
        fprintf(stderr, "Usage: %s <string>\n", argv[0]);
        exit(EXIT_FAILURE);
       }

       if (pipe(pipefd) == -1) {
           perror("pipe");
           exit(EXIT_FAILURE);
       }

       cpid = fork();
       if (cpid == -1) {
           perror("fork");
           exit(EXIT_FAILURE);
       }

       if (cpid == 0) {    /* Child reads from pipe */
           close(pipefd[1]);          /* Close unused write end */

           while (read(pipefd[0], &buf, 1) > 0)
               write(STDOUT_FILENO, &buf, 1);

           write(STDOUT_FILENO, "\n", 1);
           close(pipefd[0]);
           _exit(EXIT_SUCCESS);

       } else {            /* Parent writes argv[1] to pipe */
           close(pipefd[0]);          /* Close unused read end */
           write(pipefd[1], argv[1], strlen(argv[1]));
           close(pipefd[1]);          /* Reader will see EOF */
           wait(NULL);                /* Wait for child */
           exit(EXIT_SUCCESS);
       }
   } 
```

# php - php获取另一台服务器设置的cookie

> ID：12499751
> 
> 赞同：1
> 
> 时间：2012-09-19T17:20:12.527
> 
> 标签：php

我知道我在问如何获取跨域 cookie，这在传统上是不可能的，但我们有一个情况，我们有两台服务器`site1.domain.com`，`site2.domain.com`并且我们有一个基于 cookie 的 SSO，它工作正常，直到公司决定`site2.domain.com`完全迁移到不同的域。现在的问题是，当有人登录时`site1.domain.com`，我们为`.domain.com.`

我想检查是否有来自 的 cookie `domain2.com`，这是第二台服务器的新域。

我尝试 curl 调用一个名为 getCookie.php 的页面，它只是获取 cookie 并将响应发送回来，但 curl 启动了一个全新的会话，并且不假装是正在浏览 site2.domain2.com 的用户

有什么办法，我可以从 site2 读取该 cookie 值吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:25:56.067

JSONP？

从 site1.domain.com 加载“JS 文件”并将请求的 cookie 信息作为 json 返回。

**编辑**

site1.domain.com/getCookie.php

```
<?php
header('Content-Type: application/x-javascript');
echo 'callback('.json_encode($_COOKIE).');';
?> 
```

并在 site2.domain2.com html

```
<html>
<head>
  <script >function callback(data) { ... }</script>
  <script src="site1.domain.com/getCookie.php" type="text/javascript"></script>
... 
```

[您可以在通过 JSONP 访问 Cookie](https://stackoverflow.com/questions/4249205/cookie-access-over-jsonp)中找到更多信息

# ruby-on-rails - 用于创建与嵌套模型的多对多关系的条目的表单

> ID：12499753
> 
> 赞同：0
> 
> 时间：2012-09-19T17:20:15.367
> 
> 标签：ruby-on-rails, forms, database-design, many-to-many, has-many-through

我的应用程序包含这五个模型：*超市*可以有不同*类别*的产品，这些*类别*中的产品可以由多个*品牌*生产。

现在我想在我的*超市表单中有一个（或两个）***选择**字段，我可以在其中选择一个出现名称的*类别中的元素和出现名称的**品牌*中的一个或多个元素，所以这可以存储在*Origin*中。

 ***我想我可以使用`collection_select`，但我如何在这里使用它？

```
class Supermarket < ActiveRecord::Base
  has_many :supplies
  has_many :origins, :through => :supplies
end

class Supply < ActiveRecord::Base  
  belongs_to :origin  
  belongs_to :supermarket  
end

class Origin < ActiveRecord::Base
  belongs_to :category
  belongs_to :brand
end

class Category < ActiveRecord::Base
  has_many :origins
end

class Brand < ActiveRecord::Base
  has_many :origins
end 
```

可能，我还必须调整模型......

* * *

**编辑**

为了澄清表格的结果应该是什么：

在编辑*超市*的表格中，我想选择一个产品*类别*和相应的*品牌*，以便我知道该类别中的哪些*类别**和*哪些*品牌*在这个特定的*超市*中出售：

 **### 超市（表格）：

**超市**名称：*沃尔玛*

* * *

**类别**（选择一项）：

*   可乐*（Category_ID 1）*
*   玉米片*（Category_ID 2）*
*   ...

* * *

**品牌**（多选）

*   可口可乐公司*（Brand_ID 1）*
*   百事可乐*（Brand_ID 2）*
*   家乐氏公司*（Brand_ID 3）*
*   ...

**这应该在Origin**中创建条目，例如：

```
超市_ID Category_ID Brand_ID
      1 1 1
      1 1 2
      2 1 2
      2 2 3
     …………

```

**/编辑**

* * *

**编辑 2**

根据[这个问题的答案，我可以](https://stackoverflow.com/questions/12445675/many-to-many-to-many-relationship-with-need-for-another-specific-model)*通过控制台*创建或选择一个条目，如下所示：

```
walmart = Supermarket.create(:name => "Walmart");
cornflakes = Category.create(:name => "Corn Flakes");
kellogs = Brand.create(:name => "Kellog's");

walmart.origins.create(:category_id => cornflakes, :brand_id = kellogs) 
```

我如何通过**表格**使用它？我如何使用`select`或者`collection_select`甚至还有其他我可以使用的助手？

**/编辑 2**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:29:12.933

在使用多对多关系时，我也遇到了类似的问题。值得一试的宝石是[simple_form](https://github.com/plataformatec/simple_form "简单的模式")。

他们为 to_many 关联提供了一个很好的表单助手。

在实际实现表单方面，我不确定我是否理解表单数据将如何使用。无论如何，javascript 和虚拟属性是你的朋友。

**编辑：**

啊，我明白你在说什么。我这样做的方法是创建一个 select_field，用于选择类别，然后我将创建另一个 select_field（设置：multiple => true），以便我可以选择多个品牌。

```
<%= select_tag "supermarket[supplies][][category]" ... %>
<%= select_tag "supermarket[supplies][][brands]", ... %> <!-- be sure to set multiple to true !--> 
```

接下来，您需要将所有内容关联在一起。因此，为此，我将创建一个处理表单提交的虚拟属性。例如：

```
def supplies=(supplies_hash)
# read supplies_hash and create the active records. 
end

def supplies

end 
```

最后，如果您坚持在没有 gem 的情况下执行此操作，我建议您查看[嵌套形式 railscast。](http://railscasts.com/episodes/196-nested-model-form-part-1)了解所涉及的内容。*****

# php - 使用值操作从数组创建数组

> ID：12499754
> 
> 赞同：0
> 
> 时间：2012-09-19T17:20:20.730
> 
> 标签：php, arrays

我有一个文本区域，同事在其中输入不带扩展名的文件名，然后返回。我的代码采用这个输入列表并创建一个名为`$list`. 然后它将获取该数组并创建一个更新的数组，该数组`$genList`使用额外的文件名调用，如下所示：

```
$fileString = $_POST['fileList'];
$unique = $_POST['unique'];
$size = $_POST['size'];
$generateArray = $_POST['generateArray'];

$list = explode("\r\n",$fileString);

if ($generateArray == "yes") {
    if ($size == "5x7inimpos") {
        $genList = array();
        foreach($list as $element) {
            array_push($genList, $element . "_f", $element . "_b", $element . "_i");   
        }
    }           
    $list = array();
    $list = $genList;           
} 
```

就目前而言，如果工作人员输入一些文件名，如下所示：

```
HOL_12_001_00
HOL_12_002_00
HOL_12_003_00 
```

它最终将被转换为文件名末尾带有扩展名的数组，如下所示：

```
$list = array(HOL_12_001_00_f, HOL_12_001_00_b, HOL_12_001_00_i, HOL_12_002_00_f, HOL_12_002_00_b, HOL_12_002_00_i, HOL_12_003_00_f, HOL_12_003_00_b, HOL_12_003_00_i); 
```

但我真正需要做的是在文件名中包含最终数组（带有`_f`, `_b`, `_i`），如下所示：

```
$list = array(HOL_12_f_001_00, HOL_12_b_001_00, HOL_12_i_001_00, HOL_12_f_002_00, HOL_12_b_002_00, HOL_12_i_002_00, HOL_12_f_003_00, HOL_12_b_003_00, HOL_12_i_003_00); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:33:02.910

替换您的以下代码：

```
foreach($list as $element) {
    array_push($genList, $element . "_f", $element . "_b", $element . "_i");   
} 
```

对于这个：

```
$letter = array('f','b','i');
foreach($list as $element) {
    for ($i=0;$i<3;$i++) {
        $arr = explode('_', $element);
        $arr[1] .= '_' . $letter[$i];
        $genList[] = implode('_', $arr);
    }
} 
```

这将以您描述的方式生成数组。

# permissions - 规范文件中 %defattr 的标准做法是什么，特别是在权限方面？

> ID：12499756
> 
> 赞同：0
> 
> 时间：2012-09-19T17:20:29.933
> 
> 标签：permissions, rpm

我正在使用 RPM 打包一堆软件。

在规范文件的 %defattr 部分中专门使用“755”（这是我想要的系统上的软件的权限）而不是“-”是个好主意吗？

我问是因为我有'-'，但我的一些安装包得到了 700，而不是我期望的 755。因此，我的印象是明确说明许可更可靠。你怎么看 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:59:13.280

我想知道您是否获得了那些特定的 700 权限，因为这些是您构建 RPM 时对文件的权限。如果您查看[RPM.org](http://www.rpm.org/max-rpm-snapshot/s1-rpm-inside-files-list-directives.html#S3-RPM-INSIDE-FLIST-DEFATTR-DIRECTIVE)，您会发现 %defattr 是您不使用 %attr 专门设置的任何文件的默认权限。您应该始终在规范中使用 %defattr 以确保对大多数文件进行正确设置，然后对需要特定权限的文件使用 %attr。

# iphone - iPhone 上的“无溅”应用程序

> ID：12499757
> 
> 赞同：1
> 
> 时间：2012-09-19T17:20:45.480
> 
> 标签：iphone, objective-c, user-interface, splash-screen

我注意到许多 iPhone 应用程序（如 Instagram 和 Twitter）没有启动屏幕，它们在应用程序加载时显示 UI 的空白版本；然后界面被其余元素填充。这是一个简单的技巧，涉及一个模拟应用程序界面的正常启动画面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:26:44.203

是的，它只是一个复制应用程序外观的图像。

Apple 建议使用这种技巧来减少应用程序的感知加载时间（请参阅[此处](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:24:03.837

首先，这**并不**`default.png`意味着是一个启动画面！人机界面指南规定您应该使用禁用控件的用户界面屏幕截图。这样做没有任何技巧，因为在您的应用加载时会显示 ，因此没有要显示的 UI。您必须在禁用控件的情况下自己截取屏幕截图，然后将其用作**`default.png``default.png`**

# excel - 适用于 Excel 2010/2007/2003 的日期选择器

> ID：12499760
> 
> 赞同：4
> 
> 时间：2012-09-19T17:20:52.603
> 
> 标签：excel, vba, datepicker

我需要 VBA for Excel 中的日期选择器。

我遇到了这个问题，因为 Excel 2010 64 位没有日期选择器，它在 Excel 2007/2003 中运行良好。

我正在寻找可用于商业目的的免费控件。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:57:14.703

我们创建了一个 VBA 解决方案，它与旧的 MSCAL.OCX 完全兼容，但您无需安装 ActicveX 即可使用它：

[https://sites.google.com/site/e90e50/calendar-control-class](https://sites.google.com/site/e90e50/calendar-control-class)

它也适用于所有 Excel（Access 等）版本。:)

最好的问候，
Axelock

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:36:47.823

我过去多次遇到过这个问题，唯一可靠的方法是在 VBA 中制作自定义日历控件

这是我的一位同事在 2009 年使用的一个[http://goo.gl/hyhIh](http://goo.gl/hyhIh)

它做得很好，我在过去的几个 MS Access 项目中调整了我自己的一个，可以随意用于你自己的目的

# java - 你怎么能在这里得到一个“SWTException：无效的线程访问”？

> ID：12499763
> 
> 赞同：1
> 
> 时间：2012-09-19T17:21:03.200
> 
> 标签：java, eclipse, swt, eclipse-rcp, jface

我正在注册一个生命周期监听器`plugin.xml`。如果我只定义一个`Shell`.
例如

```
@PostContextCreate  
void postContextCreate(final IEventBroker eventBroker){  
     System.out.println("CALLED!");    
     final Shell shell = new Shell(SWT.TOOL | SWT.NO_TRIM);  
     shell.open();  
     eventBroker.subscribe(UIEvents.UILifeCycle.ACTIVATE, new EventHandler() {  

    @Override  
    public void handleEvent(Event event) {  
        System.out.println("Closing shell");  
        shell.close();  
        shell.dispose();  
        System.out.println("Closed");  
        eventBroker.unsubscribe(this);  
        }
     }); 
```

但是，如果我将调用更改为也使用 a `Display`：

```
@PostContextCreate
void postContextCreate(final IEventBroker eventBroker){  
    System.out.println("CALLED!");  
    Display display = new Display();  
    final Shell shell = createSplashShell(display);  
    shell.open();  
    while (!shell.isDisposed ()) {  
    if (!display .readAndDispatch ()) display.sleep ();  
    }
    display.dispose ();  
   //etc 
```

我得到以下异常：

> org.eclipse.e4.core.di.InjectionException: org.eclipse.swt.SWTException: org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63) 在
> org.eclipse的线程访问无效.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:229) 在 org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:206) 在

我知道这个异常必须对`UI`线程做一些事情，但我无法弄清楚 using 是如何`Display`导致这个异常的。
有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:22:41.277

使用[Display.asyncExec](http://www.jdocs.com/swt/3.2/org/eclipse/swt/widgets/Display.html?m=M-asyncExec%28Runnable%29#M-asyncExec%28Runnable%29)方法在 UI 线程上执行 Runnable。

与大多数 UI 框架一样，SWT 不允许任何线程作用于 UI 组件，因此当您要从另一个线程更改某些内容时，您必须将其提供给在 UI 线程上执行它的实用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T18:36:09.537

据我了解，我看到您想在事件发生时弹出一个外壳。一个显示（由主 RCP 应用程序创建）足以创建新的 shell 和处理事件。

```
@PostContextCreate
    void postContextCreate(final IEventBroker eventBroker){  
        System.out.println("CALLED!");

        final Display display = Display.getDefault();
        Display.getDefault().asyncExec(new Runnable()
        {
          public void run()
        { 
         final Shell shell = createSplashShell(display);  
         shell.open();  
         while (!shell.isDisposed ()) {  
         if (!display .readAndDispatch ()) display.sleep ();  
        }
      }
    } 
```

# c# - 正则表达式花费了令人惊讶的长时间

> ID：12499764
> 
> 赞同：13
> 
> 时间：2012-09-19T17:21:12.980
> 
> 标签：c#, regex, performance

我有一个用户输入的搜索字符串。通常，搜索字符串使用空格分割，然后执行 OR 搜索（如果项目匹配任何搜索字符串元素，则匹配）。我想提供一些“高级”查询功能，例如使用引号将包含空格的文字短语括起来的能力。

虽然我已经敲定了一个像样的正则表达式来为我拆分字符串，但是执行起来需要很长的时间（在我的机器上超过 2 秒）。我打破它来找出打嗝的位置，更有趣的是，它似乎发生在最后一个`Match`匹配之后（大概是在输入结束时）。直到字符串匹配结束的所有匹配都可以在更短的时间内捕获，但是最后一个匹配（如果是这样的话 - 没有返回）几乎花费了所有 2 秒。

我希望有人可能对我如何加快这个正则表达式有所了解。我知道我正在使用带有无界量词的后视，但是，就像我说的，这似乎不会导致任何性能问题，直到匹配最后一场比赛之后。

**代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace RegexSandboxCSharp {
    class Program {
        static void Main( string[] args ) {

            string l_input1 = "# one  \"two three\" four five:\"six seven\"  eight \"nine ten\"";

            string l_pattern =
                @"(?<=^([^""]*([""][^""]*[""])?)*)\s+";

            Regex l_regex = new Regex( l_pattern );

            MatchCollection l_matches = l_regex.Matches( l_input1 );
            System.Collections.IEnumerator l_matchEnumerator = l_matches.GetEnumerator();

            DateTime l_listStart = DateTime.Now;
            List<string> l_elements = new List<string>();
            int l_previousIndex = 0;
            int l_previousLength = 0;
            //      The final MoveNext(), which returns false, takes 2 seconds.
            while ( l_matchEnumerator.MoveNext() ) {
                Match l_match = (Match) l_matchEnumerator.Current;
                int l_start = l_previousIndex + l_previousLength;
                int l_length = l_match.Index - l_start;
                l_elements.Add( l_input1.Substring( l_start, l_length ) );

                l_previousIndex = l_match.Index;
                l_previousLength = l_match.Length;
            }
            Console.WriteLine( "List Composition Time: " + ( DateTime.Now - l_listStart ).TotalMilliseconds.ToString() );

            string[] l_terms = l_elements.ToArray();

            Console.WriteLine( String.Join( "\n", l_terms ) );

            Console.ReadKey( true );

        }
    }
} 
```

**输出**
（这正是我得到的。）

> > 一
> > “二三”
> > 四五
> > ：“六七”
> > 八
> > “九十”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T17:38:09.727

尝试将您的正则表达式更改为以下内容：

```
(?<=^((?>[^"]*)(["][^"]*["])?)*)\s+ 
```

此处唯一的更改是将`[^"]*`放入一个[原子组](http://www.regular-expressions.info/atomic.html)中，以防止发生[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

**注意：**上面的正则表达式显然没有使用 C# 正则表达式字符串语法，我不熟悉，但我认为它会如下：

```
@"(?<=^((?>[^""]*)([""][^""]*[""])?)*)\s+"; 
```

**为什么会发生灾难性的回溯：**
一旦找到所有有效匹配项，下一个尝试的匹配项就是最后引用部分内的空间。后视将失败，因为空格前有奇数个引号。

此时，lookbehind 内部的正则表达式将开始回溯。锚点意味着它将始终从字符串的开头开始，但它仍然可以通过从匹配的末尾删除元素来回溯。让我们看一下lookbehind里面的正则表达式：

```
^([^"]*(["][^"]*["])?)* 
```

由于引用的部分是可选的，因此可以将它们作为正则表达式回溯删除。对于不在引用部分内的每一块非引用字符，在回溯之前，每个字符都将被匹配为`[^"]*`正则表达式开头的一部分。在该部分开始回溯时，最后一个字符将从`[^"]*`匹配的内容中删除，并被外部重复拾取。在这一点上，它变得非常类似于上面灾难性回溯链接中的示例。

# c++ - c++ - 声明一个字符串数组并查找其中的元素数量（openFrameworks）

> ID：12499773
> 
> 赞同：1
> 
> 时间：2012-09-19T17:21:44.003
> 
> 标签：c++, arrays, size, openframeworks

我是 C++ 新手。我只想声明一个数组并找到它的大小。我该怎么做呢？我不断得到字符数或其他东西。

```
string vidArray[] = {"fingers.mov","motion_test.mov"};
int numVids = vidArray->size(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:42:25.553

只需使用

```
vector<string> s{"s1", "s2", "s3"}; 
```

用于初始化“数组”。

那么你可以使用

```
s.size() 
```

获取向量的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:38:51.923

首先，您进行的**vidArray->size()**调用等效于**vidArray[0].call()**因为数组只不过是指向第一个元素的指针，因此通过调用 vidArray->size() 您只是做：(*vidArray).size()。

这样的旧数组没有 size()，但是有一些基于宏的不明智的黑客攻击来获取数组的计数：

```
#define COUNTOF(arr) (sizeof(arr) / sizeof(arr[0]))
COUNTOF(vidArray) 
```

这将为您返回数组大小，但这不是一件好事（[解释](http://blog.natekohl.net/making-countof-suck-less/)），这就是为什么我建议您在需要动态调整大小时使用 std::vector ：

```
std::vector<std::string> vid;
vid.push_back("fingers.mov");
vid.push_back("motion_test.mov");

size_t vidSize = vid.size(); 
```

您也可以使用 boost::assign （[文档](http://www.boost.org/doc/libs/1_51_0/libs/assign/doc/index.html)）以这种方式初始化

```
std::vector<std::string> vid;
vid += std::string("fingers.mov"),std::string("motion_test.mov"); 
```

或者 boost::array （[文档](http://www.boost.org/doc/libs/1_51_0/doc/html/array/rationale.html)），如果你想要一个大小不能变化的数组（即如 Walter 在评论中所述，如果你已经在使用 c++11，你可以使用 std::array ，它是 boost::数组但在标准库中）

```
boost::array<std::string,2> vid = {std::string("fingers.mov"),std::string("motion_test.mov")};

size_t vidSize = vid.size(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:33:28.517

数组在传递时衰减为指向其第一个元素的指针。这也发生在你的情况下 - 你得到`string*`并且你实际上调用了字符串的成员函数`size()`。它返回它持有的字符数。

要执行您想要的操作，请将数组的总大小除以单个元素的大小：

```
int numVids = sizeof(vidArray) / sizeof(string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:27:18.137

在 C++ 中，数组不是对象。他们没有像 size() 这样的方法。您调用的是数组中第一个字符串的 size() 方法，因为数组的内存地址也是其第一个条目的内存地址。

当您想要一个行为类似于数组的智能容器类时，您可以使用[std::vector](http://www.cplusplus.com/reference/stl/vector/)。它带有许多方便的功能，包括 size() 功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T17:30:17.353

正如@Philipp 所建议的那样，您通常应该更喜欢容器`stdd::vector`而不是数组。但是，这并不意味着您应该跳过基础知识，因此最好在学习该语言之前避免使用 STL 之类的库。

要获取数组的大小，即元素的数量，请使用运算符，它*以字节为单位*`sizeof`返回数组的大小：

 *```
int arr[10];
size_t element_count = sizeof arr / sizeof arr[0]; 
```

请注意，如果将数组传递给函数，它会衰减为指针，因此这不起作用。

```
void foo(int arr[10]) {
    // element_count == sizeof int*, oops
    size_t element_count = sizeof arr;
} 
```

在这种情况下，您还需要将数组的大小传递给函数

```
void foo(int *arr, size_t size) {

} 
```

一旦你牢牢掌握了这些东西，就会选择一个更安全、更方便的容器，比如`vector`. 它按需动态​​增长，保证元素将存储在连续的内存中（如数组），提供安全的访问方法（如果需要）`::at()`，您不必担心手动内存管理。*

# java - java netbeans 中读取 Doc 或 Docx 文件的问题

> ID：12499787
> 
> 赞同：-3
> 
> 时间：2012-09-19T17:22:24.217
> 
> 标签：java, netbeans, apache-poi, noclassdeffounderror, hwpf

> **可能重复：**
> [java 中读取 Doc 或 Docx 文件的问题](https://stackoverflow.com/questions/12499372/the-problems-with-read-doc-or-docx-file-in-java)

我在java中程序读取文件字时遇到问题。然后我运行程序，它报告错误如下：`java.lang.NoClassDefFoundError: org/apache/poi/hwpf/HWPFDocument at java.lang.Class.getDeclaredMethods0(Native Method) at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)....`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:25:10.957

> java.lang.NoClassDefFoundError: org/apache/poi/hwpf/HWPFDocument

这告诉您，您的代码中某处需要`org.apache.poit.hwpf.HWPFDocument`，并且该类在您的系统上不可用。它似乎是[Apache POI](https://poi.apache.org/)的一部分，您可以[在此处下载](https://poi.apache.org/download.html)。

# c# - 遍历列表

> ID：12499796
> 
> 赞同：1
> 
> 时间：2012-09-19T17:23:18.910
> 
> 标签：c#, wcf, list, datatable, datacontracts

我在遍历数据表并将每个值分配给数据合同列表中的给定属性时遇到了一些困难。

所以我有以下数据合同：

```
namespace Shared.DataContracts
{
    [Serializable]
    [DataContract(Name = "DispatchAddress")]
    public class DispatchDetails
    {
        [DataMember(Name = "ShippingAddressCode")]
        public string ShippingAddressCode { get; set; }

        [DataMember(Name = "ShippingName")]
        public string ShippingName { get; set; }

        [DataMember(Name = "Address")]
        public Address Address { get; set; }

        [DataMember(Name = "ContactName")]
        public string ContactName { get; set; }

        //etc
    }
} 
```

在我的服务中，我想返回一个 DispatchDetails 列表，但我的问题是为每个属性分配值。

```
public GetDispatchDetailsResponse GetDispatchDetails(string code, string id)
{
    GetDispatchDetailsResponse getDispatchDetailsResponse = new GetDispatchDetailsResponse();

    List<DispatchDetails> dispatchDetails = new List<DispatchDetails>();

    DataTable dt = _dataRetriever.GetDataTable(string.Format(BusinessSqlConstants. DispatchAddress, code, id));

    foreach (var row in dt.Rows)
    {
        foreach (var col in dt.Columns)
        {
            //The troublesome line of code.
            dispatchDetails.Add("ShippingAddressCode") = Convert.ToString(dt.Columns["ShippingAddressCode"]);
            //etc
        }
    }
} 
```

我已经添加了我最新的狡猾的代码行来演示我想要完成的事情。我已经尝试了几种方法，但目前我似乎很难从树林中看到树林:)

提前感谢您提供的任何建议。

亲切的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:26:58.407

你想这样做吗？

```
foreach (DataRow row in dt.Rows)
{
    var item = new DispatchDetails();

    item.ShippingAddressCode = Convert.ToString(row["ShippingAddressCode"]);
    item.ShippingName = Convert.ToString(row["ShippingName"]);
    // etc.

    dispatchDetails.Add(item);
} 
```

# javascript - 使用 Windows Live SDK 的 Windows 8 Metro 应用单点登录

> ID：12499800
> 
> 赞同：1
> 
> 时间：2012-09-19T17:23:30.073
> 
> 标签：javascript, windows-8, microsoft-metro, single-sign-on, windows-live

我正在构建 Windows8 Metro 应用程序，需要实现单点登录并连接到 Skydrive。

我提到的各种来源的代码（最后提到）......

```
 WL.init({ scope: "wl.signin" });

    WL.login().then(
                function onSuccess(session) {
                    var session = WL.getSession();
                    if (session.error) {
                        document.getElementById("infoLabel").innerText =
                            "Error signing in: " + session.error;
                    }
                    else {
                        document.getElementById("infoLabel").innerText =
                            "Signed in.";
                    }
                }, 
                function onError(error) {
                    document.getElementById("infoLabel").innerText =
                            "Error signing in";
                }
        ); 
```

我收到以下错误（`onError`函数）-“**请求身份验证令牌的应用程序被禁用或配置不正确**”

我提到了以下链接和库。其中一个[链接](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/ff09e5ca-0ede-430c-971d-ee9db49a94cf)是建议应用注册。我已完成开发者注册，是否必须注册应用才能在 Metro 应用上实现单点登录？

谢谢你。

*   [带有步骤的示例应用程序](http://blogs.msdn.com/b/windowsappdev/archive/2012/06/26/best-practices-when-adding-single-sign-on-to-your-app-with-the-live-sdk.aspx)
*   [需要应用注册](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/ff09e5ca-0ede-430c-971d-ee9db49a94cf)
*   [WL.登录](http://msdn.microsoft.com/en-us/library/live/hh550845.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:47:59.150

是的，如果您想使用 Live Connect，您必须在此处注册您的 Windows 8 应用程序：[https ://manage.dev.live.com/build?wa=wsignin1.0](https://manage.dev.live.com/build?wa=wsignin1.0)

祝你好运！

# ms-access - 使用 VBA 设置访问表单的控件值

> ID：12499801
> 
> 赞同：0
> 
> 时间：2012-09-19T17:23:41.377
> 
> 标签：ms-access, ms-access-2010

我需要将我的 Access 2007 项目移动到 Access 2010。除了我拥有的这一点 VBA 代码之外，大部分覆盖工作都很好。

这个特殊的 VBA 代码从 PDF 表单加载值，然后将这些值分配给表单控件。这允许用户手动输入他们的数据，或者让其他人（无法访问托管 Access DB 的网络）填写表格并让其他人为他们导入表格。

当我运行代码时，它会在 Access 2010 中挂起以下代码：

```
If Title <> "" Then
        Me!Title = Title 
End If 
```

我得到的错误信息是：

> 运行时错误“2448”：
> 
> 你不能给这个对象赋值。

如果有帮助，这里还有一些背景代码：

```
Dim AcroApp As Acrobat.CAcroApp
    Dim theForm As Acrobat.CAcroPDDoc
    Dim jso As Object
    'Declare variables by Tab used in Form view
    'Tab 1
    Dim Title, First_Name, Middle_Name, Last_Name, Maiden_Name As String 
```

...

```
'Form Load
    Set AcroApp = CreateObject("AcroExch.App")
    Set theForm = CreateObject("AcroExch.PDDoc")
    theForm.Open (FileName.Value)
    Set jso = theForm.GetJSObject 
```

...

```
'Tab 1 Data Load
    Title = jso.getField("Title").Value 
```

...

```
'Data Display
    MsgBox "Values read from PDF:" & vbCrLf & vbCrLf & "Title:" & Title & vbCrLf & _ 
```

...

```
 'Tab 1 Data Populate
    If Title <> "" Then
        Me!Title = Title
    End If 
```

在上面的代码中，我在表单中的值正确显示在消息框中。所以我知道变量正在填充正确的值。此外，我在 VBA 编辑器中引用了 Adob​​e Acrobat 10.0 类型库。同样，此代码在 Access 2007 下运行良好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:20:31.173

错误消息告诉您无法将任何内容分配给`Me!Title`. 在这种情况下，`Me!Title`是只读的。

但什么是`Me!Title`？在调试模式下，查看“立即”窗口中的内容：

```
Debug.Print TypeName(Me!Title) 
```

同样在调试模式下，确认您无法将字符串值分配给`Me!Title`：

```
Me!Title = "foo" 
```

似乎您有不止一个东西叫做“*标题*”。你`Dim`一个变体标题。还有`Me!Title`……也许是其他人？

给它们起不同的名称可能有助于避免混淆。例如，如果`Me!Title`是一个文本框，您可以将其重命名为`txtTitle`. 您可以将变体变量命名为`varTitle`.

我认为您还应该检查对象浏览器和/或联机帮助，以查看 Access 2010 对象模型是否包含任何`Title`可能会干扰此处的命名内容。

# mysql - Rails 布尔值 - True 和 False 与 1 和 0

> ID：12499802
> 
> 赞同：1
> 
> 时间：2012-09-19T17:23:43.100
> 
> 标签：mysql, ruby-on-rails, boolean

我最近在我正在处理的项目中的 Comment 模型中添加了一个新的“提交”属性。在迁移中，我创建了这样的列：`add_column :comments, :submitted, :boolean`. **注意：**我使用 MySQL 作为数据库。

我希望这个属性有一个默认值`false`，所以我添加了一个`before_create`这样的方法：

```
before_create :default_values

def default_values
  self.submitted = false
end 
```

这对我来说似乎是正确的，但是每当我尝试添加新评论时，什么都不会发生，并且控制台会显示错误。我的创建方法是通过 AJAX 完成的，控制器通过 JS 正确处理了该方法，但由于某种原因，它默认为`format html`并试图重定向到不同的页面。

在玩了一会儿之后，我改变了我的`default_values`方法，看起来像这样：

```
def default_values
  self.submitted = 0
end 
```

之后一切正常。这与 Rails 使用`tinyint`数据库中的布尔字段有关吗？我原以为它足够聪明，可以在 false/true 和 1/0 之间进行转换。

有趣的是，我尝试通过控制台创建一个新评论，并且能够毫无问题地将我的`submitted`属性设置为`false`。为什么我必须使用整数而不是真/假值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T18:34:07.877

布尔值很聪明，只需使用：

```
object.submitted? 
```

作为访问方法...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:54:03.557

为您的迁移添加默认值：

```
add_column :comments, :submitted, :boolean, :default => false 
```

# mysql - 网站 javafx 2.x 应用程序中的 scala mysql 连接在在线发布时无法在 IDE 中工作

> ID：12499806
> 
> 赞同：1
> 
> 时间：2012-09-19T17:23:58.570
> 
> 标签：mysql, scala, maven, web, javafx

我正在 Eclipse 中编写一个 scala 和 java(fx) 应用程序，使用 Netbeans 进行部署（创建 jnpl 文件），并使用 Maven 来完成我的依赖项。首先，我尝试了 Scala 和 JavaFX 的组合，效果很好。但是在以后的尝试中，数据库连接似乎没有成功。

我的网络中有几台计算机专门用于特定任务，因此该网站与我的 MySQL 不在同一台计算机上运行（尽管端口由我的路由器转发）。

为了创建 DBconnection，我使用了我的外部 IP，我什至尝试在另一个网络中运行我的应用程序，效果很好（但仅限于 IDE，包括 Eclipse 和 Netbeans）。但是，在创建基于 Web 的应用程序（和相应的部署）之后，应用程序会在按下提交按钮（用于登录）后停止。这是调用数据库连接的地方。

目前我完全一无所知，因为它似乎与 scala/java/javafx 代码无关，而且我找不到任何与 jnlp 相关的东西。

有人知道我是否必须在我不知道的 de jnlp 文件中包含任何内容吗？我在 hibernate 上看到了一些东西，但我没有使用它，我使用的是 mysql-connection，它是我打包的 jar 之一。我还注意到弹出屏幕没有运行（正在进行中）。重要提示：部署后，当我在 Windows 环境中运行它时，一切正常，但我将它部署在 linux 机器上（准确地说是 Ubuntu 8.04-server）。O_o，我发现了问题...它位于 jnlp_content 中：'xx'，我只检查了前（大约）100 个相同的字符。显然，这包含信息，导致不正确的引用。Netbeans 帮助部署，显然所有文件都需要在更新后重新部署，也是来自 jnlp_content 的引用，即使看起来相同！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:36:02.257

使用[JavaFX 打包工具](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)打包您的应用程序。如果需要，您可以使用 Maven 的 ant runner[从 Maven 调用它们。](http://code.google.com/p/willow-browser/source/browse/pom.xml)确保[签署](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)所有应用程序 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:46:36.590

好的，所以如果有人达到了这一点，请记住以下几点。当您想创建 JavaFX 应用程序并且之前已经部署了早期版本时，请不要像我一样，替换所有生成的文件（web-files/ libs (previous, non-documented!, error) 和 .html 。 jnlp .jar) 文件。不要手动比较并认为“似乎是正确的”，这会花费你很多钱（不值得尝试几秒钟，它会在几天内花费你！）！

# javascript - 如何在 YQL url 中编码空格？

> ID：12499809
> 
> 赞同：0
> 
> 时间：2012-09-19T17:24:16.437
> 
> 标签：javascript, web-services, yql

我正在尝试让一些 YQL 与 Web 服务一起使用。第一个片段在 YQL 控制台中工作 ( [http://developer.yahoo.com/yql/console/](http://developer.yahoo.com/yql/console) )

```
select * from xml where url="http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=Mankato" 
```

当我尝试使用空格添加更复杂的地址时，控制台会给出有关连接失败的错误：

```
select * from xml where url="http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=Mankato%20MN" 
```

如果我直接访问第二个网址，它可以正常工作：[http ://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=Mankato%20MN](http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=Mankato%20MN)

关于如何编码第二个 yql 查询的任何想法？最终，我想通过 url 而不仅仅是在 yql 控制台内调用 yql，但我认为控制台将是让它工作的好地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:37:12.807

您在 API 上获得 302 重定向。卷曲了`http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=Mankato%20MN`你可以试试`curl -v -L http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=MANKATO%20MN`

完成卷曲后，检查 302 之后的部分。注意以下几点：

```
GET /cgi-bin/mapserv?mode=nquery&map=/web/gis/mapserver/districtsxml/demo.map&scale=10000&mapxy=-93.9993996+44.1635775&layer=location&map_location_feature=new&map_location_feature_points=-93.9993996+44.1635775&source=address&address=MANKATO+MN 
```

注意最后的**地址=MANKATO+MN**？出于某种原因，托管 API 的服务器将空间转换为加号（我不知道为什么）。

无论如何，如果您发出查询`select * from xml where url="http://www.gis.leg.mn/mapserver/districtsxml/geocode.php?location=MANKATO%2BMN"`（我已经在 Mankato+MN 中编码了 +），那么它应该可以工作。我自己验证了。试试看，让我知道。

最后一点。这似乎不是 YQL 问题。查看[使用 URL 时 YQL 请求不起作用，](https://stackoverflow.com/questions/10125561/yql-request-not-working-when-using-url/10131785#10131785)为什么我怀疑它不是 YQL 问题。

`

# ruby - 为什么 eval 将方法创建为私有方法？

> ID：12499813
> 
> 赞同：2
> 
> 时间：2012-09-19T17:24:35.500
> 
> 标签：ruby, metaprogramming

这段代码将方法创建为私有方法，为什么？

```
a = %q{def hello() "Hello there!" end}
class A; end
A.class.send(:eval, a)
A.new.hello #=> NoMethodError: private method `hello' called for A 
```

平台：ruby 1.9.3p125，测试在`pry`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T00:09:12.897

在任何模块之外定义的方法（所谓的*全局方法*）实际上被定义为私有实例方法`Object`。这样，可以在任何地方调用 （因为一切都继承自`Object`），并且它们只能在没有显式接收者的情况下调用。

这包括`require`, `load`, `puts`, `print`, `p`,`gets`和 等方法`eval`。（注：大部分*其实*都是在里面定义`Kernel`和混入`Object`的，但是效果和目的是一样的。）

在您的情况下，您在任何模块*之外*`a`定义一个方法：您的字符串中没有提到模块。`eval`你打电话的事实`A.class`完全无关紧要。就像我上面说的：`eval`是`Object`为了方便而定义的全局方法（以便可以在任何地方调用它）。您`A.class.send(:eval)`只是调用全局私有`eval`方法的一种非常复杂的方式。它不会以某种方式神奇地将`eval`uated 字符串的上下文设置为`A.class`.

您可以`42.send(:eval)`改为这样做，结果仍然是相同的，就像`puts('Hello')`并且`42.send(:puts, 'Hello')`完全相同，因为它们最终调用完全相同的方法。

顺便说一句：即使它*做到了*，它仍然不会做你想做的事。`A.class`只是`Class`（*任何*类的`class`总是*）*，所以如果它*确实*按您预期的那样工作，则该方法将定义在 中，而不是在. **`Class`*`Class``A`***

# iphone - iPhone 应用程序的 ScrollView 上的子视图

> ID：12499814
> 
> 赞同：1
> 
> 时间：2012-09-19T17:24:40.123
> 
> 标签：iphone, uiscrollview, xamarin.ios, subview

我正在使用 Monotouch 构建一个 iPhone 应用程序。

它并排使用三个视图，目的是通过从右到左和从左到右滚动来切换视图。我不知道这是正确的方法，现在我有一个 ScrollView 我添加三个子视图。然后我面临三个问题。

1/ 我想用 InterfaceBuilder 在情节提要上创建我的子视图，并能够以编程方式添加每个视图，但我不知道该怎么做。

2/我不知道当前子视图的子视图控制器如何“委托”。

3/我担心性能和内存消耗，因为（我猜）子视图总是被加载，即使在不活动的时候也是如此。

有人知道这样做的好方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:49:58.063

如果有选择，我将创建 3 个视图并使用 UIAnimation 将显示滚动效果。但是对于您的滚动视图问题：

1.如果你想在界面生成器中创建视图，你可以使用 IBOutlet 并显示视图或直接将视图添加到滚动视图。无需以编程方式添加视图。

3.因为你使用界面生成器，视图只会创建一次，所以你可以滚动任意次数，只有3个视图。所以不用担心内存。

我不明白你的第二点。请更具体。

# php - 在文本区域输入 MS-Word 方程

> ID：12499815
> 
> 赞同：0
> 
> 时间：2012-09-19T17:24:42.003
> 
> 标签：php, javascript, mysql, html, ms-word

我正在创建一个网络应用程序，教师可以在其中输入数学、物理和化学问题和笔记。我目前面临的问题是如何启用从 Microsoft Word 复制方程式并能够粘贴到文本区域。文本的非方程式部分成功复制。或者，有没有一种方法可以让老师上传 Word 文件，然后我的应用程序将其转换为图像？

对于直接输入文本区域，我使用的是 wiris 编辑器。我正在使用 PHP、MySQL 和 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:38:11.400

最简洁的答案是不。对您而言，最好的解决方案是让教师将方程式导出为图像。[Word 2010 + 将数学方程式另存为图像](https://stackoverflow.com/questions/6533984/word-2010-save-math-equation-as-image)似乎对此有解决方案（虽然很麻烦）。

从此图像中，您的页面必须接受要上传的图像文件。您可以通过让您的表单包含如下 enctype 来准备此内容：

```
<form action="save.php" enctype="multipart/form-data" method="post">
    <input type="file" name="image" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:33:32.400

将图像复制到剪贴板将不起作用。您必须使用 fileupload 控件来上传图像文件....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T13:04:09.017

有一个工具叫做“ **Moodle** ”。在那里，您可以从 Word 文档上传问题。它甚至接受数学方程。并且可以在 Moodle Module 中尝试测验。您可以将问题导出为 Word 文档。

对于导入和导出，您需要安装一个名为“wordtable”的插件。您可以在 Moodle 插件列表中获取此插件。

# url - 有没有办法在 Yii 中编写 URL 规则，将所有对不存在控制器的请求重定向到现有控制器？

> ID：12499816
> 
> 赞同：0
> 
> 时间：2012-09-19T17:24:42.643
> 
> 标签：url, url-rewriting, yii, yii-routing

我需要能够通过 www.website.com/username 访问用户配置文件。我不知道如何为规则管理器编写规则以这种方式工作。我将有一个 UserProfile 控制器，我希望将 url 的第一个参数重定向到该控制器。有没有办法告诉路由器，如果他没有找到请求名称的控制器，则使用其余参数执行 UserProfile 控制器？

这是我当前的设置：

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'rules'=>array(
            'login' => 'site/login',
            'signup/confirm/<code>' => 'signup/confrim'
        ),
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:22:55.033

尝试这个。我假设您有名称为 UserProfileController.php 的配置文件控制器

```
'<username:\w+>'=> 'userProfile/view' 
```

# php - 如何获取 DynamoDB 表中的项目总数？

> ID：12499822
> 
> 赞同：28
> 
> 时间：2012-09-19T17:25:02.470
> 
> 标签：php, amazon-dynamodb

我想知道我的 dynamodb 表中有多少项目。在 API 指南中，一种方法是使用如下[扫描：](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/LowLevelPHPScanning.html)

```
<?php
$dynamodb = new AmazonDynamoDB();

$scan_response = $dynamodb->scan(array(
    'TableName' => 'ProductCatalog' 
));

echo "Total number of items: ".count($scan_response->body->Items)."\n"; 
```

但是，这必须获取所有项目并将它们存储在内存中的数组中，这在我认为的大多数情况下是不可行的。有没有办法更有效地获得总项目数？

此数据在 AWS Dynamo Web 控制台中不可用，我已经检查过了。（起初它看起来像是显示在分页按钮旁边，但事实证明，随着您转到下一页项目，这个数字会变大）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-02-22T18:32:25.880

我可以想到三个选项来获取 DynamoDB 表中的项目总数。

1.  第一个选项是使用扫描，但扫描功能效率低下，通常是一种不好的做法，尤其是对于读取量大的表或生产表。

2.  第二个选项是 Atharva 提到的：

    > 我想到的一个更好的解决方案是将此类表的项目总数保留在一个单独的表中，其中每个项目将具有表名作为它的哈希键和该表中的项目总数作为它的非键属性. 然后，您可以通过进行原子更新操作来增加/减少特定表的总项目计数，从而保持此表可能名为“TotalNumberOfItemsPerTable”的更新。

    唯一的问题是增量操作不是幂等的。因此，如果写入失败或您多次写入，这将反映在计数中。如果您需要精确定位，请改用条件更新。

3.  最简单的解决方案是返回 ItemCount 的 DescribeTable。唯一的问题是计数不是最新的。计数每 6 小时更新一次。

[http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_DescribeTable.html](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_DescribeTable.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-05T15:49:35.203

该`Count`选项绝对是您想要的，但您还必须考虑到您的扫描结果中可能有一个或多个“页面”结果。Scan 操作一次仅扫描表中 1MB 的数据，因此`Count`结果中的值仅反映表中前 1MB 的计数。您将需要使用`LastEvaluatedKey`结果中的值（如果存在）进行后续请求。这是一些用于执行此类操作的示例代码：

```
<?php

$dynamo_db = new AmazonDynamoDB();

$total = 0;
$start_key = null;
$params = array(
    'TableName' => 'my-table',
    'Count'     => true
);

do {
    if ($start_key) {
        $params['ExclusiveStartKey'] = $start_key->getArrayCopy();
    }

    $response = $dynamo_db->scan($params);

    if ($response->isOK()) {
        $total += (string) $response->body->Count;

        if ($response->body->LastEvaluatedKey) {
            $start_key = $response->body->LastEvaluatedKey->to_array();
        } else {
            $start_key = null;
        }
    }
} while ($start_key);

echo "Count: {$total}"; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T17:32:28.383

啊哈， API中有一个`Count`选项，请参阅[http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonDynamoDB/scan](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonDynamoDB/scan)`scan`

```
<?php
$dynamodb = new DynamoMetadata();

$scan_response = $dynamodb->scan(array(
    'TableName' => 'ProductCatalog'
    'Count'     => true,
));

echo "Count: ".$scan_response->body->Count."\n"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-18T04:53:28.163

如果您有兴趣在应用程序逻辑中使用表中的项目总数，这意味着您将非常频繁地查询总计数。现在实现此目的的一种方法是使用扫描操作。但请记住，扫描操作实际上是扫描整个表，因此会消耗大量吞吐量，因此在此期间所有查询操作都会收到 Throttled Exception。即使考虑到扫描会将结果计数限制为 1MB 的事实，如果表非常大，您将不得不进行重复扫描操作以获取实际的项目数。这将需要编写自定义查询逻辑并处理查询操作中不可避免的限制。

我想到的一个更好的解决方案是将此类表的项目总数保留在一个单独的表中，其中每个项目将具有表名作为它的哈希键和该表中的项目总数作为它的非键属性. 然后，您可以通过进行原子更新操作来增加/减少特定表的总项目计数，从而保持此表可能名为“TotalNumberOfItemsPerTable”的更新。

没有限制或 1MB 限制的问题。

此外，您可以将此概念扩展到更精细的粒度，例如维护与某个哈希键或任何任意标准匹配的项目总数，您可以以字符串形式对其进行编码，以在表中创建一个名为“TotalNumberOfItemsInSomeCollection”或“ TotalNumberOfItemsMatchingSomeCriteria”。然后，这些表可以包含每个表、每个集合或与某些标准匹配的项目的项目数条目。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-01T15:43:52.230

DynamoDB 的 AWS 控制台中提供了一个近似的项目计数值（假设每六个小时更新一次）。只需选择表格并在详细信息选项卡下查看，最后一个条目是项目计数。如果这对您有用，那么您可以避免消耗表吞吐量来进行计数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-27T19:05:24.510

这现在可在 AWS 表概览屏幕的“表详细信息”部分下的“项目计数”字段中找到。它似乎只是 DescribeTable 的转储，并指出它大约每六个小时更新一次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-26T16:01:35.673

以下是我如何在十亿条记录 DynamoDB 表上获得确切的项目数：

蜂巢>

```
set dynamodb.throughput.write.percent = 1;
set dynamodb.throughput.read.percent = 1;
set hive.execution.engine = mr;
set mapreduce.reduce.speculative=false;
set mapreduce.map.speculative=false;

CREATE EXTERNAL TABLE dynamodb_table (`ID` STRING,`DateTime` STRING,`ReportedbyName` STRING,`ReportedbySurName` STRING,`Company` STRING,`Position` STRING,`Country` STRING,`MailDomain` STRING) STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler' TBLPROPERTIES ("dynamodb.table.name" = "BillionData", "dynamodb.column.mapping" = "ID:ID,DateTime:DateTime,ReportedbyName:ReportedbyName,ReportedbySurName:ReportedbySurName,Company:Company,Position:Position,Country:Country,MailDomain:MailDomain");

SELECT count(*) FROM dynamodb_table; 
```

*您应该有一个 EMR 集群，它随 Hive 和 DynamoDB 记录处理程序一起安装。*使用此命令，hive 上的 DynamoDB 处理程序发出“并行扫描”，多个 Mapreduce 映射器（AKA Worker）在不同的分区上工作以获取计数。这将比普通扫描更有效和更快。
*您必须愿意在一段时间内将读取容量提高到非常高的水平。* 在一个相当大的（20 节点）集群上，拥有 10000 个 RCU，需要 15 分钟才能计算十亿条记录。
* 在此期间对该 DDB 表的新写入会导致计数不一致。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-10T05:14:54.597

我就是这样做的：

*   进入 DynamoDB 控制台
*   选择一个表
*   概览（选择表的默认登陆）
*   向下滚动到“摘要”部分
*   查看“每 6 小时”更新的 3 个值、计数、大小和平均项目大小。
*   单击“获取实时项目计数”按钮
*   点击“开始扫描”

我看到计数在增加（与某些答案中提到的 1 MB 分页限制无关），并在达到实时计数时看到“完成”。

这会消耗扫描的读取容量，因此在实际执行此操作之前，最好手动增加预置容量以避免限制其他当前读取流量。您可以随意“暂停”扫描并继续（以允许在部分扫描会话之间建立预置容量。最终，您将达到表中的项目数。

安全地执行此操作以最大程度地减少限制其他流量的风险的方法：

*   增加读取容量单位（没有自动缩放的高设置或将最小值设置为高数字）
*   等到在 cloudwatch 或 dynamodb 控制台（在与“获取实时计数”操作选项卡/窗口分开的选项卡或窗口中）的读取使用量指标中显示更高容量（红点）
*   单击扫描按钮并等待几秒钟，然后暂停
*   2 分钟后检查图表上的增加使用量（在另一个选项卡/窗口中），看看它如何影响读取使用量
*   使用您可以接受的风险的时间间隔重复扫描/暂停过程，直到扫描完成并且结果在结果中加上时间戳
*   您将看到计数总数以及已完成计数操作的日期/时间戳
*   把信息记下来，关上窗户就完全没了！
*   将预置读取容量重置回原来的位置以避免产生额外成本

注意：如果您适当地为扫描会话计时以加载读取容量，同时为自动缩放提供时间为您增加容量（扫描完成后容量会下降），则同样的事情可以与自动缩放一起使用

另一种方法可能是切换到按需配置，执行上述扫描，然后切换回配置容量，但我还没有测试过，所以不确定 ON DEMAND 是否能保证在不限制的情况下处理所需的容量要求。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-11-20T14:49:37.403

请不要使用 dynamoDb 的扫描方法，因为它会读取表的所有数据，但在这种情况下你只需要计数，所以使用它。

```
$scan_response = $dynamodb->describeTable(array(
'TableName' => 'ProductCatalog' )); 
```

并打印结果`$scan_response['Table']['ItemCount']`

# android - 使用android在sqlite中保存图像

> ID：12499826
> 
> 赞同：0
> 
> 时间：2012-09-19T17:25:12.807
> 
> 标签：android

> **可能重复：**
> [如何将图像存储为 Sqlite 中的 blob 以及如何检索它？](https://stackoverflow.com/questions/7331310/how-to-store-image-as-blob-in-sqlite-how-to-retrieve-it)

我已经看到在 android 中显示带有图像的列表的示例。我的意思是，列表中的每个项目都有一个从互联网下载的图像。这个例子我见过他们使用缓存存储（使用位图保存图像）。现在我想知道它可以通过使用 Sqlite 来完成。我想从互联网上下载图像并将它们显示在列表中，将它们保存在 sqlite 上。

这可能吗？任何例子都会有用

# javascript - 如何将表达式添加到修剪路径中的 if 子句条件？

> ID：12499828
> 
> 赞同：0
> 
> 时间：2012-09-19T17:25:20.740
> 
> 标签：javascript, open-source, web-deployment-project

我正在使用[修剪路径库](http://www.trimpath.com/)来绘制动态页面

我尝试将表达式添加到 if 子句

```
{for item in itemsObj}
 {if item_index % 4 == 3 && peopleObj.length != item_index + 1 }
     <div class="search-result-row" style="border-bottom:1px solid #dadada;">
 {/if}
{/for} 
```

但是值“item_index + 1”不是作为数学表达式计算的，并且该值的结果是绑定字符串，例如如果 item_index = 3 那么表达式的结果是 = 31

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:36:31.867

免责声明：我对这个库没有经验。

根据[文档](http://code.google.com/p/trimpath/wiki/JavaScriptTemplateSyntax)：

> testExpr 是任何有效的 JavaScript 表达式，但没有大括号字符。

这意味着您应该能够做到这一点：

```
{if item_index % 4 == 3 && peopleObj.length != (parseInt(item_index, 10) + 1) } 
```

# php - 每次我在 php 上运行 curl 时，服务器都会死掉。我必须重新启动apache

> ID：12499829
> 
> 赞同：0
> 
> 时间：2012-09-19T17:25:27.387
> 
> 标签：php, apache, node.js, curl, notifications

每次我在 php 上运行 curl 时，服务器都会死掉。我必须重新启动apache。

代码如下：我正在尝试连接到我的通知服务器并推送通知。

我确实可以收到通知，但是带有php-curl的页面永远不会打开，之后我的服务器就会死掉（任何页面都无法打开，需要重新启动apache）

```
$url = 'http://myip:myport/send';
$fields = array(
    'channel'=>urlencode("mychannel"),
    'secretkey'=>urlencode("mypassword"),
    'property1'=>urlencode("from PHP"),
    'property2'=>urlencode("Hello jimmy!")
    );

$fields_string = "";
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

$ch = curl_init();
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

补充：是亚马逊的EC2服务器。另外，我发现如果我在终端中运行 curl，它不会返回任何内容，但它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:30:30.297

我假设它是一台 Windows 机器。您使用的是 XAMPP 还是 WAMP？谷歌“php cURL 与 windows 崩溃”或您的特定软件包，尝试更新您的 cURL 扩展。该代码与您的服务器崩溃无关！

# visual-studio-2010 - 在 CUDA Toolkit 5 中创建 .lib 文件

> ID：12499832
> 
> 赞同：2
> 
> 时间：2012-09-19T17:25:44.540
> 
> 标签：visual-studio-2010, cuda, static-libraries

我正在使用 VS2010 使用 CUDA Toolkit 5.0 RC 迈出步履蹒跚的第一步。

单独编译让我感到困惑。

我尝试将项目设置为静态库 (.lib)，但是当我尝试构建它时，它不会创建 device-link.obj，我不明白为什么。

例如，有 2 个文件：

使用函数 f 的调用者函数

```
#include "thrust\host_vector.h"
#include "thrust\device_vector.h"
using namespace thrust::placeholders;

extern __device__ double f(double x);

struct f_func 
{
__device__ double operator()(const double& x) const
{
    return f(x);
}
};

void test(const int len, double * data, double * res)
{
thrust::device_vector<double> d_data(data, data + len);
thrust::transform(d_data.begin(), d_data.end(), d_data.begin(), f_func());
thrust::copy(d_data.begin(),d_data.end(), res);
} 
```

还有一个定义 f 的库文件

```
__device__ double f(double x)
{
return x+2.0;
} 
```

如果我将选项生成可重定位设备代码设置为否，由于未解析的外部函数 f，第一个文件将无法编译。

如果我将它设置为 -rdc，它将编译，但不会生成 device-link.obj 文件，因此链接器会失败。

如果我将 f 的定义放入第一个文件并删除第二个文件，它会成功构建，但现在它不再是单独编译了。

如何使用单独的源文件构建这样的静态库？

* * *

[此处更新]

我称第一个调用者文件为“caller.cu”，第二个为“libfn.cu”。VS2010 输出的编译器行（我不完全理解）是（对于调用者）：

```
nvcc.exe 
-ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" 
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  
-G   
--keep-dir "Debug" 
-maxrregcount=0  
--machine 32 
--compile  
-g   
-D_MBCS 
-Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd  " 
-o "Debug\caller.cu.obj" "G:\Test_Linking\caller.cu" 
-clean 
```

和 libfn 一样，然后：

```
nvcc.exe 
-gencode=arch=compute_20,code=\"sm_20,compute_20\" 
--use-local-env 
--cl-version 2010 
-ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin" 
-rdc=true 
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" 
-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include"  
-G   
--keep-dir "Debug" 
-maxrregcount=0  
--machine 32 
--compile  
-g   
-D_MBCS 
-Xcompiler "/EHsc /W3 /nologo /Od /Zi /RTC1 /MDd  " 
-o "Debug\caller.cu.obj" "G:\Test_Linking\caller.cu" 
```

并再次为 libfn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T13:34:52.803

如果您避免使用 Visual Studio 2010 IDE，您可以按照@njuffa 的步骤进行操作，如

[如何使用 cuda 5.0 为设备功能创建静态库？](https://devtalk.nvidia.com/default/topic/526645/how-to-create-a-static-lib-for-device-functions-using-cuda-5-0-/?offset=12#3942220)

# php - mongodb为入门最佳实践PHP添加注释

> ID：12499838
> 
> 赞同：0
> 
> 时间：2012-09-19T17:26:10.087
> 
> 标签：php, mongodb

我正在尝试向 mongodb 的条目添加评论。
这就是我到目前为止所拥有的

```
$mongo = new Mongo();
$db = $mongo->comedy;
$collection = $db->cartoons;
$obj = array( 
    "title" => "football", array('comment' => 'my comment here'),
    "author" => "joe" 
);

$collection->insert($obj); 
```

产生这个条目

```
{
 "_id": ObjectId("5059fd31ba76883414000001"),
 "title": "football",
 "0": {
     "comment": "my comment here"
},
 "author": "joe"
} 
```

**我的问题**是这是在“足球”条目下嵌套评论的最佳方式吗？还是我应该以不同的方式去做？

这部分似乎不正确

```
"0": {
     "comment": "my comment here"
} 
```

**从下面的示例更新**
，运行它会出错`Fatal error: Call to undefined method MongoDB::update()`

```
$mongo = new Mongo();
$db = $mongo->comedy;
$collection = $db->cartoons;

$mongo->comedy->update(array('title' => 'football'), array(
        '$push' => array('comments' => array('content' => 'Yo!', 'author' => $user_id))
)); 
```

然后当我运行它时

```
$mongo = new Mongo();
$db = $mongo->comedy;
$collection = $db->cartoons;
$obj = array(
    '$set' => array("title" => "football", "author" => "joe"), 
    '$push' => array('comments' => array('content' => 'Yo!'))
); 
```

我明白了

```
{
 "_id": ObjectId("505a2493ba76883c08000007"),
 "title": "football",
 "0": {
     "$push": {
         "comments": {
             "content": "Yo!"
        }
    }
},
 "author": "joe"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:30:11.770

这是 MongoDB 中一个非常典型的问题，作为一个菜鸟，一旦这里有一个很好的结构（你可以谷歌搜索一下），它也让我着迷：

```
{
    title: footbal,
    comments: [
        {content: '', author: ObjectId()},
        { // Next comment }
    ]
} 
```

然后，您可以`$push`在评论字段中将所有评论从最新到最旧排序。

提醒一句：您可能会发现此模式在查询可能性方面有些限制，尤其是当您想要实时以不同的方式对评论进行排序或挑选出不同类型的评论时。在这种情况下，您将使用单独的集合来理想地容纳评论。

## 编辑

在 PHP 中，您将从插入文档开始：

```
$mongo = new Mongo();
$db = $mongo->comedy;
$collection = $db->cartoons;
$obj = array( "title" => "football");
$collection->insert($obj); 
```

然后当需要添加新评论时，只需简单地 $push：

```
$mongo->comedy->update(array('title' => 'football'), array(
    '$push' => array('comments' => array('content' => 'Yo!', 'author' => $user_id))
)); 
```

这就是简单的方法:)

## 再次编辑

```
$obj = array('$set' => array("title" => "football", "author" => "joe"), '$push' => array('comments' => array('content' => 'Yo!')))); 
```

# django - Django 图像。网址不正确

> ID：12499843
> 
> 赞同：-1
> 
> 时间：2012-09-19T17:26:43.173
> 
> 标签：django

我的图像文件来自：

```
imgage = models.ImageField(upload_to="site_media/media") 
```

但如果我在模板 url 中显示这张照片到照片是：

```
bad url =  http://127.0.0.1:8000/photo/site_media/media/django__white_and_green__by_aruseni-d59g56q.png

correct url = http://127.0.0.1:8000/site_media/media/django__white_and_green__by_aruseni-d59g56q.png 
```

如何从此网址中删除“照片”？

```
<img src="{{ p.img.url }}"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:30:21.260

在 settings.py 中`/`你所拥有的东西前面放一个。`MEDIA_URL`

# knockout.js - javascript中的垃圾淘汰视图模型集合

> ID：12499845
> 
> 赞同：5
> 
> 时间：2012-09-19T17:26:45.770
> 
> 标签：knockout.js

我正在使用 knockoutJS 作为客户端 MVVM 框架。

有时我会创建一个临时视图模型（通过 js 函数）并将它们分配给动态加载的 DOM 元素。

例如，当不再需要某些内容的评论面板时，我会从 DOM 中删除评论面板 div。当我通过指定 DOM 元素参数调用 applyBindings 时，用作视图模型的变量会发生什么情况？它正在以某种方式处置？还是我负责处理？如果是这样 - 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:16:30.983

将您的 viewModel 分配给一个变量：

```
var viewModel = {...}
ko.applyBindings(viewModel, $("#html-id")); 
```

销毁视图模型：

```
ko.cleanNode($("#html-id"));
delete viewModel;
$("#html-id").remove(); 
```

我还没有尝试过，但这是我计划在一个将动态加载/销毁模块的新项目中使用的......

# sql - 创建列以对行进行分组并按顺序计数

> ID：12499846
> 
> 赞同：1
> 
> 时间：2012-09-19T17:26:48.353
> 
> 标签：sql, oracle, count

`Column 1`在这种情况下，我有一个在所有行中重复的相同值。`Column 2`具有值可能重复的非不同行。我想创建一个名为的列`Group`，以显示这些行按顺序（按顺序排列）属于该组`Column 2`。基本上，我需要创建一个类似于此的输出：

```
Column 1   | Column 2   | Group
--------------------------------
100        | AA         | 1
100        | AA         | 1
100        | AA         | 1 
100        | BB         | 2
100        | BB         | 2
100        | CC         | 3
100        | DD         | 4
100        | DD         | 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:40:05.760

您想要的功能`dense_rank`不是`rank`：

```
select column1, column2,
       dense_rank() over (order by column2)
from t 
```

DENSE_RANK() 产生从 1 到组数的数字，没有间隙。此外，对于您正在做的事情，这不应该有分区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:38:14.497

试试这个代码：

```
with list as
(select distinct col2 from tab order by 1),
      listnum as
(select rownum, col2 from list)

select * 
from listnum l
join tab t on t.col2=l.col2; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/5983b/14/0)

关于我使用的代码的链接：

*   [WITH 子句](http://psoug.org/reference/with.html)- 示例
*   [ROWNUM](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm) - 文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:31:37.707

你可以使用 oracle 中的 dense_rank 函数。

```
select col1,
       col2,
       dense_rank () over (partition by col1
                         order by col2) group_column
  from test_table;

      COL1 CO GROUP_COLUMN
---------- -- ------------
       100 AA            1
       100 AA            1
       100 AA            1
       100 BB            2
       100 BB            2
       100 CC            3
       100 DD            4
       100 DD            4 
```

您可以使用“order by col1, col2”来验证结果。

# android - 我可以听 onCreate 完成吗

> ID：12499849
> 
> 赞同：0
> 
> 时间：2012-09-19T17:26:53.677
> 
> 标签：android

我有一个需要一段时间才能执行的方法，我在活动开始时需要它。如果我把它放在 onCreate 方法中，它会减慢活动的实际加载速度。有没有办法监听 onCreate 是否完成，然后调用该方法，这样用户在繁琐的方法运行时就不会出现空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:32:50.940

如果您调用的方法需要一段时间才能执行，那么无论您在活动生命周期的哪个位置执行它，都会导致用户体验中断（“冻结”屏幕）。也许您可以改为禁用 UI，或者放置一个加载微调器并在[`AsyncTask`](http://android-developers.blogspot.com/2009/05/painless-threading.html). 您可以隐藏微调器并在工作完成后重新启用 UI 的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:32:54.590

尝试执行 Async ，它具有`doInBacground`可以帮助您获得所需内容的方法。这是一个很好的教程

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# windows - 为什么 Hadoop 与 linux 紧密绑定？

> ID：12499851
> 
> 赞同：7
> 
> 时间：2012-09-19T17:26:58.697
> 
> 标签：windows, hadoop

我是 Hadoop 新手。Hadoop与Linux绑定如此紧密，其运行的集群是同构的，具体原因是什么？

我正在寻找可以告诉我为什么 Hadoop 在 Windows 上不能很好地工作的真正具体的细节，以及是否有一些库涉及一些特定的脚本？

我的项目是在不使用 Cygwin 的情况下部署 Hadoop。我已经看过 Hayes Davis 的文章，他解释了如何在没有 Cygwin 的情况下安装 Hadoop，但他说存在一些错误。我可能会从头开始在 Windows 上正确配置 Hadoop，但如果有人能具体解释 Hadoop 在 Windows 上无法正常工作的原因，那将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T07:07:48.583

根据他们的[快速入门页面](http://hadoop.apache.org/docs/r0.20.2/quickstart.html)，它还没有经过很好的测试。

> *   支持 GNU/Linux 作为开发和生产平台。Hadoop 已在具有 2000 个节点的 GNU/Linux 集群上进行了演示。
> *   支持 Win32 作为开发平台。分布式运行在Win32上没有经过很好的测试，所以不支持作为生产平台。

Windows 提供的远程管理支持比大多数人意识到的要好得多，但在建立大型计算场的简易性（和价格标签）方面仍然很难击败 Linux。这只是一个猜测，但可能需要构建如此大规模集群的研究人员不太可能将大部分预算用于操作系统许可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T03:34:27.753

[您是否知道Microsoft 和 Hortonworks](http://hortonworks.com/partners/microsoft/)正在合作的 Hadoop 工作，本质上是对 Apache 项目进行更改以支持原生 Windows？

该项目仍处于预览阶段，[Azure 上的 Hadoop](https://www.hadooponazure.com/)是部署的第一部分。这是在 Windows Azure 云中的 Windows Server 2008R2 上运行的 Hadoop。它也可以在本地安装以构建您自己的集群。

我建议您学习更多并注册该计划，因为您将重新创建他们已经花费了很多年的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-13T11:05:50.090

经验证的答案来自 2012 年。以下是[Hadoop Wiki](https://wiki.apache.org/hadoop/Hadoop2OnWindows)截至 2017 年的最新消息

> *   Hadoop 2.2 版及以后的版本包括对 Windows 的本机支持。官方 Apache Hadoop 版本不包括 Windows 二进制文件（截至 2014 年 1 月）。但是，从源代码构建 Windows 包相当简单。

# matlab - 更改经验模型的输入参数

> ID：12499852
> 
> 赞同：0
> 
> 时间：2012-09-19T17:27:01.487
> 
> 标签：matlab, model

我正在运行一个模型来预测某个位置的水温，该模型需要一些气象条件的初始输入。用户必须更改的输入存储在扩展名为 .NML 的文件中。我想访问该文件（来自 matlab）并使用特定变量的一系列值运行模型。例如，用户必须指定一个名为“input_slope”的变量。我想使用该变量的多个不同值运行模型，例如从 1:100 开始，然后运行模型（应用程序文件）并将模型输出与我的观察值进行比较。

我对此真的很陌生，想知道如何从更改 matlab 中的输入文件开始，然后使用这些新值执行模型？

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:36:38.570

如果您想在 Matlab 中更改输入文件，我会推荐`C`类似文件 IO 函数，如`fopen`、`fgetl`和朋友。[这是我从在线文档](http://www.mathworks.com/help/matlab/ref/fgetl.html)中修改的一个片段，我经常将其用作模式：

```
fid = fopen('fgetl.m');

file_data = {};
tline = fgetl(fid);
while ischar(tline)
    file_data{end+1} = tline;
    tline = fgetl(fid);
end

fclose(fid); 
```

有些人会抱怨没有初始化元胞数组的大小`file_data`，但现在让我们开始运行吧。元胞数组将为文件中的每一行包含一个字符串，并删除换行符。您可以像这样访问字符串：

```
str = file_data{1}; 
```

然后`str`是包含您的数据的字符数组。您可以使用[textscan](http://www.mathworks.com/help/matlab/ref/textscan.html)从值中获取数字、字符串等`str`。

如果您需要写出数据，您可以尝试以下操作：

```
fid = fopen('myOutputFile.txt','w');
% data is in data and is an array of floating point numbers
for ii=1:length(data)
   fprintf(fid,'%f\n',data(ii));
end
fclose(fid); 
```

看起来这是一个外部可执行程序，所以我建议使用[系统](http://www.mathworks.com/help/matlab/ref/system.html)命令来执行并从程序中获取返回值。我不确定你对这一切有多陌生，所以请让我知道这是否有帮助。

# java - 使用外部 Web 服务时的测试策略

> ID：12499853
> 
> 赞同：3
> 
> 时间：2012-09-19T17:27:11.527
> 
> 标签：java, testing, testng, mockito, twitter4j

我经常不得不针对 Twitter 进行编码，现在针对我无法控制的其他 Web 服务 API。

我试图编写测试用例，但似乎太难了：

1.  我受制于我无法控制的东西（网络服务）的速度。
2.  我无法控制 Web 服务的状态（无法删除帐户、推文和重启）

对于面临类似情况的人，我想找出他们设计的解决方案。

PS：我熟悉模拟对象，但我想获得更具体的经验教训——例如，我使用一个库与 Twitter (Twitter4J) 交谈，当我最后一次查看时，它不允许我替换模拟对象对于 Twitter 服务。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:37:16.030

在我的项目（依赖于各种外部 Web 服务）中，我将测试重点放在了失败事件上。因此，在为 Facebook Connect 构建单元测试时，我尝试将垃圾数据传递给我的 Web 服务响应处理方法，以确保我可以处理我下面的服务更改。成功的事件测试不是我放入单元测试的东西，因为它会产生很多麻烦（比如时间轴中的事件）。一个可能的解决方法是在您的预期服务中创建一个测试帐户并将您的单元测试指向该 ID。如果您确保您的网络服务发布代码不包含硬编码的 ID（我喜欢创建`<Service>Config`传递给`<Service>Methods`类的类，例如`FacebookMethods.auth(FacebookConfig config, String uid)`) 这让我可以为操作创建一个 TestConfig，这些操作将以无法撤消或不应该公开看到的方式修改服务）。

# c# - 从 JSON 返回的字符串中删除双引号

> ID：12499856
> 
> 赞同：1
> 
> 时间：2012-09-19T17:27:21.287
> 
> 标签：c#, asp.net-mvc, json, jquery

我有一个返回 MVC JsonResult 的 ajax 方法。我使用数据来填充第 3 方控件数据源。第 3 方控件期望数据不是字符串（即周围没有双引号）。如果我提醒在 jquery ajax 调用中返回的数据，它不会显示双引号：

```
[[10, 10], [15, 20], [20, 25], [32, 40], [43, 50], [55, 60], [60, 70], [70, 80], [90, 100]] 
```

但是，如果我通过提琴手查看数据，它会显示我的数据在双引号内：

> “[[10, 10], [15, 20], [20, 25], [32, 40], [43, 50], [55, 60], [60, 70], [70, 80], [90, 100]]"

第 3 方控件没有正确设置数据源，我确信是因为这个（如果我通过对上述数据进行硬编码来填充数据源，它工作正常）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T17:29:50.120

您应该使用 eval() 或 JSON.parse()

```
var array = eval("[[10, 10], [15, 20], [20, 25], [32, 40], [43, 50], [55, 60], [60, 70], [70, 80], [90, 100]]");

var array = JSON.parse("[[10, 10], [15, 20], [20, 25], [32, 40], [43, 50], [55, 60], [60, 70], [70, 80], [90, 100]]"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:36:38.787

从服务器返回的 JSON 是一个字符串。服务器不可能发送 Javascript 对象。

如果控件需要 Javascript 对象，则需要解析字符串。您可以使用[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)解析字符串并从中创建一个Javascript对象，或者更好地使用[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)获取它或`daraType: 'json'`在选项中指定的方法，然后在调用回调函数[`@.ajax`](http://api.jquery.com/jQuery.ajax/)之前自动解析字符串。`success`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:33:19.743

如果您使用 $.getJSON 而不是 ajax 获取数据，它将作为对象而不是字符串返回。

```
$.getJSON('your/ajax/url', function(json){ ...your code here...}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T09:49:33.757

使用这种格式，在你的数值中添加浮点数

```
$json[]=    array($row[0],(float)$row[1],(float)$row[2]); 
```

# iphone - 带有开发人员配置文件的设备上的 iphone ipa 文件 - 是否将其部署在不同 MAC 机器的设备上

> ID：12499857
> 
> 赞同：3
> 
> 时间：2012-09-19T17:27:24.640
> 
> 标签：iphone, ios, ios-provisioning, provisioning-profile

我是iOS开发的初学者。我对 IOS 中的配置文件有所了解。请帮我确认我的理解。

这是我的场景。在 MAC1 上使用开发人员证书 1 开发并使用包含 UDID1 的开发人员配置文件 1 构建的 iOS 应用程序已成功部署在具有 UDID1 的设备 D1 上。

我将带有 UDID2 的新设备 D2 添加到我的开发人员配置文件 1 中，并在 MAC1 中构建了应用程序并生成了一个 .ipa 文件。

我有一台新的 MAC 机器 M2，我尝试连接设备 D2 并尝试在设备 D2 上部署应用程序。我将最新的开发人员配置文件复制到了设备。

问题 1\. 供应配置文件会成功安装吗？2\. 我能否仅使用开发人员配置文件在设备上部署 .ipa 文件，而无需来自新 MAC 机器的开发人员证书到设备 D2（此设备的 UDID 已添加到开发人员配置文件中）？3\. 如果我使用了临时配置文件并遵循上述相同的步骤，我可以在 Xcode 中使用工具吗？

谢谢。

更新 1 3\. 答案 - 如果我使用临时分发配置文件，我无法在 xcode 中使用工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:38:27.407

Answer1 - 是，配置文件将成功安装。原因 - 如果配置文件包含在设备的 UDID 中，则可以安装它。没有其他依赖。但是在钥匙串访问中，您会收到一条警告，提示您缺少有效身份。

Answer2 - 是的，我们将能够在设备 D2 上部署 .ipa 文件。.ipa 文件内部具有 .app 和配置文件。我们无法在没有开发者证书的设备上部署应用程序。

Answer3 - 不，分发配置文件用于在应用商店中提交应用。这些应用程序无法调试。

除了这些答案之外，.dysm 文件还可以帮助开发人员在分析时获得更多详细信息。此 .dysm 文件只能使用开发人员配置文件生成。

如果有人认为我的理解在任何方面都是错误的，请添加评论。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:53:46.313

不，事情不是这样运作的

！）证书必须存在于您要测试的每台计算机和每台设备上 2）在 ad-hoc 上，您必须添加设备，然后向它们发送一些手机配置文件。3）然后你存档和共同设计应用程序并将其发送到你想要的任何地方。

或者你可以使用类似的东西[https://testflightapp.com/](https://testflightapp.com/)

# coding-style - 覆盖其他值的参数名称

> ID：12499859
> 
> 赞同：0
> 
> 时间：2012-09-19T17:27:31.483
> 
> 标签：coding-style, naming-conventions

这是一个干净的代码类型的问题。

应用程序在适当的地址发送电子邮件。但是当变量 X 被设置时，它会覆盖所有的电子邮件地址。所有电子邮件都发送到 X 中指定的地址。变量 X 在部署期间从配置文件中读取并由 IoC 容器设置，例如：

```
public class EmailSender {

    @Value("config.option.X")
    private String X;

    public void sendEmail() {
        ...
        if (X != null) message.setEmailAddress(X);
        internalEmailSender.send(message);
    }
} 
```

我不知道如何正确命名 X。替换电子邮件地址？电子邮件地址覆盖？有更好的主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:33:08.963

设置变量 X 的上下文是什么？我会尝试将其命名为以某种方式引用该条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:31:35.727

对我来说，它看起来像默认选项。

所以我会这样命名：

公共类电子邮件发件人{

```
@Value("config.option.defaultEmailValue")
private String defaultEmailValue;

public void sendEmail() {
    ...
    if (defaultEmailValue != null){
        message.setEmailAddress(defaultEmailValue);
    } 
    internalEmailSender.send(message);
} 
```

}

# mysql - mysql加入同一张表不同的结果集

> ID：12499863
> 
> 赞同：2
> 
> 时间：2012-09-19T17:27:49.553
> 
> 标签：mysql, sql, join, union

我想将同一张表中的不同结果合并为一个大结果。

```
SELECT host_name,stats_avgcpu,stats_avgmem,stats_avgswap,stats_avgiowait 
    FROM sar_stats,sar_hosts,sar_appgroups,sar_environments
    WHERE stats_host = host_id
    AND host_environment = env_id
    AND env_name = 'Staging 2'
    AND host_appgroup = group_id
    AND group_name = 'Pervasive'
    AND DATE(stats_report_time) =  DATE_SUB(curdate(), INTERVAL 1 DAY)

SELECT AVG(stats_avgcpu),AVG(stats_avgmem),AVG(stats_avgswap),AVG(stats_avgiowait)
 FROM sar_stats 
 WHERE  stats_id = "stat_id of the first query" and DATE(stats_report_time) 
   BETWEEN DATE_SUB(curdate(), INTERVAL 8 DAY) and DATE_SUB(curdate(), INTERVAL 1 DAY)

SELECT AVG(stats_avgcpu),AVG(stats_avgmem),AVG(stats_avgswap),AVG(stats_avgiowait)
 FROM sar_stats 
 WHERE  stats_id = "stat_id of the first query" and DATE(stats_report_time) 
   BETWEEN DATE_SUB(curdate(), INTERVAL 31 DAY) and DATE_SUB(curdate(), INTERVAL 1 DAY) 
```

所需的输出将类似于...

```
host_name|stats_avgcpu|stats_avgmem|stats_avgswap|stats_avgiowait|7daycpuavg|7daymemavg|7dayswapavg|7dayiowaitavg|30daycpuavg|30daymemavg|....etc 
```

SQL 小提琴 [http://sqlfiddle.com/#!8/4930b/3](http://sqlfiddle.com/#!8/4930b/3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:41:42.533

看起来这就是你想要的。我更新了第一个查询以使用正确的 ANSI`JOIN`语法，然后对于另外两个查询，它们通过字段`LEFT JOIN`上的a 连接：`stats_host`

```
SELECT s.stats_host,
  h.host_name,
  s.stats_avgcpu,
  s.stats_avgmem,
  s.stats_avgswap,
  s.stats_avgiowait,
  s7.7dayavgcpu,
  s7.7dayavgmem,
  s7.7dayavgswap,
  s7.7dayavgiowait,
  s30.30dayavgcpu,
  s30.30dayavgmem,
  s30.30dayavgswap,
  s30.30dayavgiowait
FROM sar_stats s
INNER JOIN sar_hosts h
  on s.stats_host = h.host_id
INNER JOIN sar_appgroups a
  on h.host_appgroup = a.group_id
  and a.group_name = 'Pervasive'
INNER JOIN sar_environments e
  on h.host_environment = e.env_id
  and e.env_name = 'Staging 2'
LEFT JOIN
(
  SELECT s.stats_host,
    AVG(s.stats_avgcpu) AS '7dayavgcpu',
    AVG(s.stats_avgmem) AS '7dayavgmem',
    AVG(s.stats_avgswap) AS '7dayavgswap',
    AVG(s.stats_avgiowait) AS '7dayavgiowait'
  FROM sar_stats s
  WHERE DATE(stats_report_time) BETWEEN DATE_SUB(curdate(), INTERVAL 8 DAY) AND DATE_SUB(curdate(), INTERVAL 1 DAY)
  GROUP BY s.stats_host
) s7
  on s.stats_host = s7.stats_host
LEFT JOIN
(
  SELECT s.stats_host,
    AVG(s.stats_avgcpu) AS '30dayavgcpu',
    AVG(s.stats_avgmem) AS '30dayavgmem',
    AVG(s.stats_avgswap) AS '30dayavgswap',
    AVG(s.stats_avgiowait) AS '30dayavgiowait'
  FROM sar_stats s
  WHERE DATE(s.stats_report_time) BETWEEN DATE_SUB(curdate(), INTERVAL 31 DAY) AND DATE_SUB(curdate(), INTERVAL 1 DAY)
  GROUP BY s.stats_host
) s30
  on s.stats_host = s30.stats_host
WHERE DATE(s.stats_report_time) =  DATE_SUB(curdate(), INTERVAL 1 DAY); 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/4930b/22)

# html - 如何在 HTML5 中给出 ListBox 的宽度

> ID：12499866
> 
> 赞同：0
> 
> 时间：2012-09-19T17:28:05.373
> 
> 标签：html, listbox

我想在 HTML5 中给 ListBox 宽度。请给我一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:35:52.517

您可以将其设置为常规输入 - 适用于它的所有 CSS 属性

[**演示**](http://jsfiddle.net/zxRWu/)

* * *

***CSS***

```
input[list] {
    width: 300px;
} 
```

***HTML***

```
<input type="text" list="browsers" />
<datalist id="browsers">    
    <option> Chrome </option>   
    <option> Firefox </option>
    <option> IE9 </option>
</datalist> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:31:28.113

你可以试试

```
style="width:150px;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T19:10:05.077

**CSS**

```
#example {
    width: 300px;
} 
```

**HTML**

```
<select size="4" id="example" name="example">
<option selected>Fries</option>
<option>Drink</option>
<option>Pie</option>
<option>Salad</option>
<option>Shake</option>
</select> 
```

为了完整性并显示一个实际的 HTML5 列表框（不需要 JS）。

# python - 我可以渲染一个 jinja2 模板，它是一个 blob/blobstore，而不是 GAE/Python 中的一个文件？

> ID：12499867
> 
> 赞同：1
> 
> 时间：2012-09-19T17:28:10.203
> 
> 标签：python, google-app-engine, jinja2

++++见底部的解决方案（第二次更新）++++

我是 Google App Engine 和 Python 的相对新手。

我有许多 jinja2 模板（以编程方式生成），它们存储为 blob（因为 GAE 不允许程序写入文件）。我现在想渲染这些 blob 模板，但我不知道如何在渲染语句中引用它们。

如果需要，我可以将这些模板存储在 blobstore 中。

任何建议将不胜感激。这样的渲染语句看起来像什么的一个例子是超级的。

（我在标签中包含了 Django，因为我怀疑引用 Django 的模板可能是相似的。）

感谢您的任何帮助。

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++++ 修改后的问题跟进试图使用变量作为 jinja2 的模板源 ++++ +++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++++++ +++++ 我试图让它与 TextProperty 字段一起使用并进行了一个简单的测试（假设我已经检索了文本字段），如下所示：

```
FileTxt = '<html><body><br /><br /><p>The first test value starts here {{val1}}.  And {{val2}} is the 2nd test value.</p></body></html>'
val1 = 'H value 1 H'
val2 = 'H second value H'
self.render_template(FileTxt, {'val1': val1, 'val2': val2}) 
```

这将返回“无效文件名”错误。

我注意到它正在尝试打开文件 ...\templates\...

我怀疑我必须以某种方式修改以下内容。

```
TEMPLATE_DIR = os.path.join(os.path.dirname(__file__), 'templates')
jinja_environment = \
    jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR)) 
```

我将如何修改它以使其与变量而不是文件中的模板一起使用？或者我还需要做什么才能使无文件版本工作？

谢谢。

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ ！感谢你们俩！++++ ++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++

```
class TextFileRender(BaseHandler):
    def get(self):
        val1 = 'H value 1 H'
        val2 = 'H second value H'
        env = jinja2.Environment(loader=jinja2.FunctionLoader(loader))
        self.render_template(env.get_template('y'), {'val1': val1, 'val2': val2}) 
```

然后我在一个单独的 .py 文件中添加了加载器（不知道为什么我总是必须有我想在一个单独的文件中调用然后添加到导入的函数）

```
def loader(x):
    r = '<html><body><br /><br /><p>The first test value starts here {{val1}}.  And {{val2}} is the 2nd test value.</p></body></html>'
    return r 
```

以上工作。但现在我的问题是一个变量中的 html 内容扩展了另一个 html 模板（也存储在数据存储中）。我可以在 html ({% extends "master_template.html" %}) 中以某种方式使扩展语句类似于 {% extends nv.get_template('master_template') %} 吗？

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:44:01.957

您可以将模板数据存储在任一位置（blobstore、datastore），解决方案是相同的。正常的 jinja2 加载器是`FileSystemLoader`. 您应该尝试使用[FunctionLoader](http://jinja.pocoo.org/docs/api/#jinja2.FunctionLoader)之类的方法，并从获取的 blobstore（或数据存储）条目中返回值。

例如：

```
def loader(blob_key):
    r = blobstore.BlobReader(blob_key)
    return r.read()

env = jinja2.Environment(loader=jinja2.FunctionLoader(loader))

rendered_template = env.get_template('some blob key').render({'k': 'v'}) 
```

您当然应该使用某种缓存（本地、内存缓存），而不是每次都从 blobstore 中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T16:56:30.703

您关于模板继承的问题。答案是：当你实现一个函数加载器时，它会被调用两次。首先是子模板，然后是基本模板。为此，您必须更改装载机。现在它加载一个固定的 HTML 字符串。您的参数 x 包含模板的名称。清除？顺便说一句：在你使用 jinja 的时候也会调用函数加载器包括

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:35:12.640

是的你可以。但您也可以在数据存储中存储带有附加信息的 HTML 模板。我使用 content = db.TextProperty() 来存储这个 HTML。

# linux - 找不到 obj-m 命令

> ID：12499869
> 
> 赞同：2
> 
> 时间：2012-09-19T17:28:18.133
> 
> 标签：linux, module

我有这个必须在 Linux VM（2.6 版）中运行的入门任务，我正在尝试获取这个文件

测试模块.c

```
/*
*   test module.
*/

#include <linux/module.h>
#include <linux/config.h>
#include <linux/init.h>

MODULE_LICENSE("GPL");

static int __init initialization_routine(void) {

printk ("Hello, world!\n");

return 0;
}

static void __exit cleanup_routine(void) {

printk ("Unloading module!\n");
}

module_init(initialization_routine);
module_exit(cleanup_routine); 
```

然后我应该能够在这个make文件上使用make命令

生成文件

```
 make:
         obj-m += test_module.o 
```

但它一直给我找不到 obj-m 的错误。我在网上查过，似乎找不到任何东西。为了获得目标模块命令，我必须安装一些东西吗？我和gcc有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:41:59.850

当它不是时，您将`obj-m`其用作命令，它不应该在您正在执行的目标之后列出。

编译模块的最简单方法是遵循[本指南](http://tldp.org/LDP/lkmpg/2.6/html/lkmpg.html#AEN181)，或者在您的情况下，只需复制其简单的 makefile，这使得构建它非常方便；

```
obj-m += test_module.o

all:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T12:58:46.163

我不确定这是您的情况，但是当用户尝试运行包含“... make: obj-m += test_module.o”的文件时，通常会出现“obj-m：未找到”。相反，将“... make: obj-m += ...”内容放入“Makefile”并在此目录中运行命令“make”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-26T12:36:23.363

-->你可以写一个C程序如下：

test_mod.c

```
#include <linux/module.h>
#include <linux/kernel.h>

int init_module(void)
{
    printk("Hello All\n This is a test init\n");
    return 0;
}

void cleanup_module(void)
{
    printk("Good Bye");
} 
```

--> 制作目标文件：

```
echo "obj-m := test_mod.o" > Makefile 
```

--> 运行编译：

`make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules`

--> 如下加载你的模块：

`insmod ./test_mod.ko`

查看输出：

`dmesg | tail`

--> 卸载模块： `rmmod test_mod.ko`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-26T14:43:39.710

它说找不到命令，因为它不是命令。

跑`echo "obj-m := test_mod.o" > Makefile`

然后编译如下：

`make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules`

# sorting - 按名称对文件夹排序

> ID：12499874
> 
> 赞同：0
> 
> 时间：2012-09-19T17:29:05.297
> 
> 标签：sorting, unix

我想根据名称以递增的方式对文件夹中包含的子文件夹列表进行排序：

例如：文件夹名称：

```
TF_list_to_test10679   
TF_list_to_test1062  
TF_list_to_test1078  
... 
```

期望的输出：

```
TF_list_to_test1062  
TF_list_to_test1078  
TF_list_to_test10679  
... 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:44:59.300

如果您没有带制表符的文件名，则以下内容应该有效：

```
find . -type d | sed 's/[[:digit:]]*$/&\t&/' | sort -nk 2 | cut -f 1 
```

# ssrs-2008 - 我可以在 SSRS 2008 查询设计器中运行以下查询，但报表不会运行

> ID：12499877
> 
> 赞同：1
> 
> 时间：2012-09-19T17:29:14.940
> 
> 标签：ssrs-2008

这是报告背后的查询。请注意，它包括使用公用表表达式 (CTE)。

此代码将在查询设计器和 Sql Server Management Studio 中运行，但是会在 IDE 中或部署时生成不正确的语法错误。

```
-- Project System Health Report V1.0
-- Extracts a series of data points from the Draft & Reporting databases to qualify the data in a Project system
--
-- Customization
--   1\. If running against Project Server 14 then search & fix "**P14**" code
--
-- Privacy/Information Protection Notes
--   1\. Report contains "Proj.PROJ_NAME" - please replace with N''*** INFORMATION REDACTED ***'' to remove this information
--   2\. Report contains data that can be used to quantify the amount of project work in the org, please review this for sensitivity prior to sending the data to Microsoft
-- 
-- Changelog
-- 01/05/2009 pmc Prepared for Customer Release, some perf tuning
-- 01/05/2009 pmc Changes made for Project Server 14 Alpha 
--

Declare @sqlquery1 nvarchar(max)
Declare @DraftDB nvarchar(100)
Declare @ReportingDB nvarchar(100)

-- Set DB variable to name of EPM Draft DB.
-- Set DB variable to name of EPM Reporting DB.

Set @DraftDB = N'PWA_Draft_96D2C4A4_1D9F_4C80_B3A3_82098CC6C6E5'
Set @ReportingDB = N'PWA_Reporting_96D2C4A4_1D9F_4C80_B3A3_82098CC6C6E5'

set @sqlquery1 = N'use [' + @DraftDB + N']; 
-- Common Table Expression to Recursively Parse Project Hierarchy
WITH ProjHierarchy
AS (SELECT Proj.PARENT_PROJ_UID, 1 AS DEPTH
    FROM dbo.MSP_PROJ_HIERARCHIES AS Proj
    UNION ALL
    SELECT Proj.PARENT_PROJ_UID, Hier.DEPTH+1
    FROM dbo.MSP_PROJ_HIERARCHIES AS Proj
    INNER JOIN ProjHierarchy AS Hier
    ON Proj.CHILD_PROJ_UID = Hier.PARENT_PROJ_UID) 
SELECT Proj.PROJ_UID 
       ,Proj.PROJ_NAME AS N''Project Name'' -- If sensitive uncomment below and comment this line
       --, N''*** INFORMATION REDACTED ***'' AS N''Project Name''
       ,CONVERT(NVARCHAR(23), Proj.PROJ_INFO_START_DATE,20) AS N''Project Start Date''
       ,CONVERT(NVARCHAR(23), Proj.PROJ_INFO_FINISH_DATE,20) AS N''Project Finish Date''
       ,DATEDIFF(mm, Proj.PROJ_INFO_START_DATE,Proj.PROJ_INFO_FINISH_DATE) AS N''Project Length (Months)''
       ,CONVERT(NVARCHAR(23), Proj.CREATED_DATE,20) AS N''Project Created''
       ,CONVERT(NVARCHAR(23), Proj.WPROJ_LAST_PUB,20) AS N''Project Published''
       ,CONVERT(NVARCHAR(23), Proj.MOD_DATE,20) AS N''Project Modified''
       ,CASE ISNULL(Proj.WPROJ_STS_SUBWEB_NAME,N'''') WHEN N'''' THEN 0 ELSE 1 END AS N''Workspace''
       ,CASE ISNULL(Proj.PROJ_SESSION_UID,N''00000000-0000-0000-0000-000000000000'') 
        WHEN N''00000000-0000-0000-0000-000000000000'' 
        THEN 0 ELSE DATEDIFF(d,Proj.PROJ_CHECKOUTDATE,getdate()) END AS N''Checked Out (Days)''
       ,CAST(Task.TASK_ACT_WORK / 60000 AS DECIMAL(10,2)) AS N''Project Total Actual Work (Hrs)''
       ,CAST(Task.TASK_REM_WORK / 60000 AS DECIMAL(10,2)) AS N''Project Total Remaining Work (Hrs)''
       ,ISNULL(ProjCF.[Number of Project Custom Field Values],0) AS N''Number of Project Custom Field Values''
       ,ISNULL(ProjLCF.[Number of Local Custom Field Definitions],0) AS N''Number of Local Custom Field Definitions''
       ,ISNULL(HierSummaryData.[Number of SubProjects],0) AS N''Number of SubProjects''
       ,ISNULL(HierSummaryData.[SubProject Depth],0) AS N''SubProject Depth''
       ,ISNULL(LeafTaskData.[Leaf Task Count],0) AS N''Leaf Task Count''
       ,ISNULL(LeafTaskData.[Max Leaf Calendar Duration (Days)], 0) AS N''Max Leaf Task Calendar Duration (Days)''
       ,ISNULL(LeafTaskData.[Average Leaf Calendar Duration (Days)], 0) AS N''Average Leaf Task Calendar Duration (Days)''
       ,ISNULL(LeafTaskData.[Total Leaf Task Ignoring ResCalendar], 0) AS N''Total Leaf Task Ignoring ResCalendar''
       ,ISNULL(AllTaskData.[Task Count],0) AS N''Total Task Count''
       ,ISNULL(RecentTasks.[Recent Changes],0) AS N''Total Recent Changed''
       ,ISNULL(LinkData.[Total Number of Links],0) AS N''Total Number of Links''
       ,ISNULL(LinkData.[Cross Project Links],0) AS N''Cross Project Links''
       ,ISNULL(TaskCFAggregated.[Max Task Custom Fields],0) AS N''Max Task Custom Fields''
       ,ISNULL(TaskCFAggregated.[Average Task Custom Fields],0) AS N''Average Task Custom Fields''
       ,ISNULL(TaskCFAggregated.[Total Task Custom Fields],0) AS N''Total Task Custom Fields''
       ,ISNULL(TaskCFAggregated.[Number of Tasks with Custom Fields],0) AS N''Number of Tasks with Custom Fields''
       ,ISNULL(AssnDataAggregated.[Average Resources on Assigned Tasks],0) AS N''Average Resources on Assigned Tasks''
       ,ISNULL(AssnDataAggregated.[Total Number of Assignments],0) AS N''Total Number of Assignments''
       ,ISNULL(AssnDataAggregated.[Number of Tasks with Assignments],0) AS N''Number of Tasks with Assignments''
       ,ISNULL(RealData.[Actual Count],0) AS N''Actual Count in AssnByDay Table''
       ,ISNULL(AssnCFAggregated.[Max Assn Custom Fields],0) AS N''Max Assn Custom Fields''
       ,ISNULL(AssnCFAggregated.[Average Assn Custom Fields],0) AS N''Average Assn Custom Fields''
       ,ISNULL(AssnCFAggregated.[Total Assn Custom Fields],0) AS N''Total Assn Custom Fields''
       ,ISNULL(AssnCFAggregated.[Number of Assn with Custom Fields],0) AS N''Number of Assn with Custom Fields''  
       ,ISNULL(TaskBaseAggregated.[Number of Baselines],0) AS N''Number of Baselines''
       ,ISNULL(TaskBaseAggregated.[Total Task Baseline Rows],0) AS N''Total Task Baseline Rows''
       ,ISNULL(AssnBaseAggregated.[Total Assn Baseline Rows],0) AS N''Total Assn Baseline Rows''  
       ,ISNULL(ResBaseAggregated.[Total Resource Baseline Rows],0) AS N''Total Resource Baseline Rows''
       ,ISNULL(Resources.[Total Resources],0) AS N''Project Team (All)''
       ,ISNULL(Resources.[Enterprise Resources],0) AS N''Project Team (Enterprise)''
       ,ISNULL(ActiveResAggregated.[Active Resources],0) AS N''Active Resources''
       ,getdate() as [Date/Time of Recording]
FROM dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
-- Project Summary Task
INNER JOIN dbo.MSP_TASKS AS Task WITH(NOLOCK)
ON (Proj.PROJ_UID = Task.PROJ_UID AND Task.TASK_OPTINDX = 1) -- Use the Project Summary Task for rollup values
-- Get the rowcount from our (usually) largest table 
LEFT OUTER JOIN (SELECT Assn.ProjectUID as N''PROJ_UID''
                       ,COUNT(*) + 1 AS N''Actual Count''
                 FROM [' + @ReportingDB + ']..MSP_EpmAssignmentByDay AS Assn
                 GROUP BY Assn.ProjectUID) AS RealData
ON (Proj.PROJ_UID = RealData.PROJ_UID)
-- Project Custom Field Data
LEFT OUTER JOIN (SELECT pcf.PROJ_UID
                       ,COUNT(*) AS N''Number of Project Custom Field Values''
                 FROM dbo.MSP_PROJ_CUSTOM_FIELD_VALUES AS pcf WITH(NOLOCK)
                 GROUP BY pcf.PROJ_UID) AS ProjCF
ON (Proj.PROJ_UID = ProjCF.PROJ_UID)
-- Project Local Custom Fields
LEFT OUTER JOIN (SELECT plcf.PROJ_UID
                       ,COUNT(*) AS N''Number of Local Custom Field Definitions''
                 FROM dbo.MSP_PROJECT_CUSTOM_FIELDS AS plcf WITH(NOLOCK)
                 GROUP BY plcf.PROJ_UID) AS ProjLCF
ON (Proj.PROJ_UID = ProjLCF.PROJ_UID)'

set @sqlquery1 = @sqlquery1 + '                 
-- Project Hierarchy Below each Project
LEFT OUTER JOIN (SELECT HierData.PROJ_UID
                       ,COUNT(HierData.DEPTH) AS N''Number of SubProjects''
                       ,MAX(HierData.DEPTH) AS N''SubProject Depth''
                 FROM (SELECT Proj.PROJ_UID
                             ,Hier.DEPTH 
                       FROM ProjHierarchy as Hier
                       INNER JOIN dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
                       ON Hier.PARENT_PROJ_UID = Proj.PROJ_UID) AS HierData
                 GROUP BY HierData.PROJ_UID) AS HierSummaryData
ON (Proj.PROJ_UID = HierSummaryData.PROJ_UID)
-- Project resource data
LEFT OUTER JOIN (SELECT Pres.PROJ_UID
                       ,COUNT(*) AS N''Total Resources''
                       ,SUM(CAST(Pres.RES_IS_ENTERPRISE_RESOURCE AS INT)) AS N''Enterprise Resources''
                       ,SUM(CAST(Pres.RES_BOOKING_TYPE AS INT)/2) AS N''Proposed Resources''
                 FROM dbo.MSP_PROJECT_RESOURCES AS Pres WITH(NOLOCK)
                 WHERE Pres.RES_ID > 0 -- Ignore internal resources
                 GROUP BY Pres.PROJ_UID) AS Resources
ON (Proj.PROJ_UID = Resources.PROJ_UID)
 -- Resources with Assignments
 LEFT OUTER JOIN (SELECT ActiveRes.PROJ_UID
                        ,COUNT(*) AS N''Active Resources''
                  FROM (SELECT Assn.PROJ_UID
                              ,Assn.RES_UID
                        FROM dbo.MSP_ASSIGNMENTS AS Assn WITH(NOLOCK)
                        INNER JOIN dbo.MSP_PROJECT_RESOURCES AS Pres WITH(NOLOCK)
                        ON (Assn.PROJ_UID = Pres.PROJ_UID AND Assn.RES_UID = Pres.RES_UID)
                        WHERE Pres.RES_ID > 0 -- Ignore internal resources
                        GROUP BY Assn.PROJ_UID, Assn.RES_UID) AS ActiveRes
                  GROUP BY ActiveRes.PROJ_UID) AS ActiveResAggregated
 ON (Proj.PROJ_UID = ActiveResAggregated.PROJ_UID)  
-- Leaf task data            
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                   ,COUNT(*) AS N''Leaf Task Count''
                   -- Implementation Note - Use _SCHED_ below for P14, Ignores User Scheduled dates 
                   ,MAX(DATEDIFF(d,Task.TASK_START_DATE, Task.TASK_FINISH_DATE)) AS N''Max Leaf Calendar Duration (Days)''
                   ,AVG(DATEDIFF(d,Task.TASK_START_DATE, Task.TASK_FINISH_DATE)) AS N''Average Leaf Calendar Duration (Days)''
                   --**P14**: ,MAX(DATEDIFF(d,Task.TASK_SCHED_START, Task.TASK_SCHED_FINISH)) AS N''Max Calendar Duration (Days)''
                   --**P14**: ,AVG(DATEDIFF(d,Task.TASK_SCHED_START, Task.TASK_SCHED_FINISH)) AS N''Average Calendar Duration (Days)''
                   ,SUM(CAST(TASK_IGNORES_RES_CAL AS INT)) AS N''Total Leaf Task Ignoring ResCalendar''
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 WHERE Task.TASK_IS_SUMMARY = 0x0 -- Ignore summary tasks
                 AND Task.TASK_IS_MILESTONE = 0x0 -- Ignore milestones
                 AND Task.TASK_IS_SUBPROJ = 0x0 -- Ignore subprojects
                 GROUP BY Task.PROJ_UID) AS LeafTaskData
ON (Proj.PROJ_UID = LeafTaskData.PROJ_UID)
-- All visible tasks in the project
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                   ,COUNT(*) AS N''Task Count''
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 WHERE Task.TASK_OPTINDX > 1
                 GROUP BY Task.PROJ_UID) AS AllTaskData
ON (Proj.PROJ_UID = AllTaskData.PROJ_UID)
-- Task data changed on Last Project saved
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                       ,COUNT(*) AS N''Recent Changes''
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 INNER JOIN dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
                 ON (Task.PROJ_UID = Proj.PROJ_UID AND Task.MOD_REV_COUNTER = Proj.MOD_REV_COUNTER)
                 WHERE Task.TASK_OPTINDX > 1
                 GROUP BY Task.PROJ_UID) AS RecentTasks
ON (Proj.PROJ_UID = RecentTasks.PROJ_UID)
-- Task Custom Field Data
LEFT OUTER JOIN (SELECT TaskCF.PROJ_UID
                       ,MAX(TaskCF.[Task CF Count]) AS N''Max Task Custom Fields''
                       ,AVG(TaskCF.[Task CF Count]) AS N''Average Task Custom Fields''
                       ,SUM(TaskCF.[Task CF Count]) AS N''Total Task Custom Fields''
                       ,COUNT(*) AS N''Number of Tasks with Custom Fields''
                 FROM (SELECT TCF.PROJ_UID
                             ,TCF.TASK_UID
                             ,COUNT(*) AS N''Task CF Count''
                       FROM dbo.MSP_TASK_CUSTOM_FIELD_VALUES AS TCF WITH(NOLOCK)
                       GROUP BY TCF.PROJ_UID, TCF.TASK_UID) AS TaskCF
                 GROUP BY TaskCF.PROJ_UID) AS TaskCFAggregated
ON (Proj.PROJ_UID = TaskCFAggregated.PROJ_UID)
-- Link Data
LEFT OUTER JOIN (SELECT Links.PROJ_UID
                       ,COUNT(*) AS N''Total Number of Links''
                       ,SUM(CAST(LINK_IS_CROSS_PROJ AS INT)) AS N''Cross Project Links''
                 FROM dbo.MSP_LINKS AS Links
                 GROUP BY Links.PROJ_UID) AS LinkData
ON (Proj.PROJ_UID = LinkData.PROJ_UID)
-- Task Baseline Data
LEFT OUTER JOIN (SELECT TaskBaseData.PROJ_UID
                       ,COUNT(*) AS N''Number of Baselines''
                       ,SUM(TaskbaseData.[Task Baseline Rows]) AS N''Total Task Baseline Rows''
                 FROM (SELECT TaskBase.PROJ_UID
                             ,TaskBase.TB_BASE_NUM AS N''Baseline''
                             ,COUNT(*) AS N''Task Baseline Rows''
                       FROM dbo.MSP_TASK_BASELINES AS TaskBase WITH(NOLOCK)
                       GROUP BY TaskBase.PROJ_UID, TaskBase.TB_BASE_NUM) AS TaskBaseData
                 GROUP BY TaskBaseData.PROJ_UID) AS TaskBaseAggregated
ON (Proj.PROJ_UID = TaskBaseAggregated.PROJ_UID)
-- Assignment Baseline Data
LEFT OUTER JOIN (SELECT AssnBaseData.PROJ_UID
                       ,COUNT(*) AS N''Total Assn Baseline Rows''
                 FROM dbo.MSP_ASSIGNMENT_BASELINES AS AssnBaseData WITH(NOLOCK)
                 GROUP BY AssnBaseData.PROJ_UID) AS AssnBaseAggregated
ON (Proj.PROJ_UID = AssnBaseAggregated.PROJ_UID)
-- Resource Baseline Data
LEFT OUTER JOIN (SELECT ResBaseData.PROJ_UID
                       ,COUNT(*) AS N''Total Resource Baseline Rows''
                 FROM dbo.MSP_PROJECT_RESOURCE_BASELINES AS ResBaseData WITH(NOLOCK)
                 GROUP BY ResBaseData.PROJ_UID) AS ResBaseAggregated
ON (Proj.PROJ_UID = ResBaseAggregated.PROJ_UID) 
-- Assignment Data Summary
LEFT OUTER JOIN (SELECT AssnTaskData.PROJ_UID
                       ,AVG(AssnTaskData.[Assignment Count]) AS N''Average Resources on Assigned Tasks''
                       ,SUM(AssnTaskData.[Assignment Count]) AS N''Total Number of Assignments''
                       ,COUNT(*) AS N''Number of Tasks with Assignments''
                 FROM (SELECT Assn.PROJ_UID
                             ,Assn.TASK_UID
                             ,COUNT(*) AS N''Assignment Count''
                       FROM dbo.MSP_ASSIGNMENTS AS Assn WITH(NOLOCK)
                       GROUP BY Assn.PROJ_UID, Assn.TASK_UID) AS AssnTaskData
                 GROUP BY AssnTaskData.PROJ_UID) AS AssnDataAggregated    
 ON (Proj.PROJ_UID = AssnDataAggregated.PROJ_UID)
-- Assignment Custom Field Data
LEFT OUTER JOIN (SELECT AssnCF.PROJ_UID
                       ,MAX(AssnCF.[Assn CF Count]) AS N''Max Assn Custom Fields''
                       ,AVG(AssnCF.[Assn CF Count]) AS N''Average Assn Custom Fields''
                       ,SUM(AssnCF.[Assn CF Count]) AS N''Total Assn Custom Fields''
                       ,COUNT(*) AS N''Number of Assn with Custom Fields''
                 FROM (SELECT ACF.PROJ_UID
                             ,ACF.ASSN_UID
                             ,COUNT(*) AS N''Assn CF Count''
                       FROM dbo.MSP_ASSN_CUSTOM_FIELD_VALUES AS ACF WITH(NOLOCK)
                       GROUP BY ACF.PROJ_UID, ACF.ASSN_UID) AS AssnCF
                 GROUP BY AssnCF.PROJ_UID) AS AssnCFAggregated
ON (Proj.PROJ_UID = AssnCFAggregated.PROJ_UID);'

exec (@sqlquery1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:19:17.577

我能建议您做的就是将您的查询减少到零，然后添加元素，直到找到有问题的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:15:52.053

通过不使用 EXEC() 命令，我能够让查询在查询设计器和报表中工作。我还更改了查询中的“”。

```
-- Project System Health Report V1.0
-- Extracts a series of data points from the Archive & Reporting databases to qualify the data in a Project system
--
-- Customization
--   1\. If running against Project Server 14 then search & fix "**P14**" code
--
-- Privacy/Information Protection Notes
--   1\. Report contains "Proj.PROJ_NAME" - please replace with N''*** INFORMATION REDACTED ***'' to remove this information
--   2\. Report contains data that can be used to quantify the amount of project work in the org, please review this for sensitivity prior to sending the data to Microsoft
-- 
-- Changelog
-- 01/05/2009 pmc Prepared for Customer Release, some perf tuning
-- 01/05/2009 pmc Changes made for Project Server 14 Alpha 
--

-- Common Table Expression to Recursively Parse Project Hierarchy
-- Declare @ReportingDB nvarchar(100)
-- Set @ReportingDB = 'PWA_Reporting_96D2C4A4_1D9F_4C80_B3A3_82098CC6C6E5'

;WITH ProjHierarchy
AS (SELECT Proj.PARENT_PROJ_UID, 1 AS DEPTH
    FROM dbo.MSP_PROJ_HIERARCHIES AS Proj
    UNION ALL
    SELECT Proj.PARENT_PROJ_UID, Hier.DEPTH+1
    FROM dbo.MSP_PROJ_HIERARCHIES AS Proj
    INNER JOIN ProjHierarchy AS Hier
    ON Proj.CHILD_PROJ_UID = Hier.PARENT_PROJ_UID) 
SELECT Proj.PROJ_UID 
       ,Proj.PROJ_NAME AS 'Project Name' -- If sensitive uncomment below and comment this line
       --, N''*** INFORMATION REDACTED ***'' AS N''Project Name''
       ,CONVERT(NVARCHAR(23), Proj.PROJ_INFO_START_DATE,20) AS 'Project Start Date'
       ,CONVERT(NVARCHAR(23), Proj.PROJ_INFO_FINISH_DATE,20) AS 'Project Finish Date'
       ,DATEDIFF(mm, Proj.PROJ_INFO_START_DATE,Proj.PROJ_INFO_FINISH_DATE) AS 'Project Length (Months)'
       ,CONVERT(NVARCHAR(23), Proj.CREATED_DATE,20) AS 'Project Created'
       ,CONVERT(NVARCHAR(23), Proj.WPROJ_LAST_PUB,20) AS 'Project Published'
       ,CONVERT(NVARCHAR(23), Proj.MOD_DATE,20) AS 'Project Modified'
       ,CASE ISNULL(Proj.WPROJ_STS_SUBWEB_NAME,'') WHEN '' THEN 0 ELSE 1 END AS 'Workspace'
       ,CASE ISNULL(Proj.PROJ_SESSION_UID,'00000000-0000-0000-0000-000000000000') 
        WHEN '00000000-0000-0000-0000-000000000000' 
        THEN 0 ELSE DATEDIFF(d,Proj.PROJ_CHECKOUTDATE,getdate()) END AS 'Checked Out (Days)'
       ,CAST(Task.TASK_ACT_WORK / 60000 AS DECIMAL(10,2)) AS 'Project Total Actual Work (Hrs)'
       ,CAST(Task.TASK_REM_WORK / 60000 AS DECIMAL(10,2)) AS 'Project Total Remaining Work (Hrs)'
       ,ISNULL(ProjCF.[Number of Project Custom Field Values],0) AS 'Number of Project Custom Field Values'
       ,ISNULL(ProjLCF.[Number of Local Custom Field Definitions],0) AS 'Number of Local Custom Field Definitions'
       ,ISNULL(HierSummaryData.[Number of SubProjects],0) AS 'Number of SubProjects'
       ,ISNULL(HierSummaryData.[SubProject Depth],0) AS 'SubProject Depth'
       ,ISNULL(LeafTaskData.[Leaf Task Count],0) AS 'Leaf Task Count'
       ,ISNULL(LeafTaskData.[Max Leaf Calendar Duration (Days)], 0) AS 'Max Leaf Task Calendar Duration (Days)'
       ,ISNULL(LeafTaskData.[Average Leaf Calendar Duration (Days)], 0) AS 'Average Leaf Task Calendar Duration (Days)'
       ,ISNULL(LeafTaskData.[Total Leaf Task Ignoring ResCalendar], 0) AS 'Total Leaf Task Ignoring ResCalendar'
       ,ISNULL(AllTaskData.[Task Count],0) AS 'Total Task Count'
       ,ISNULL(RecentTasks.[Recent Changes],0) AS 'Total Recent Changed'
       ,ISNULL(LinkData.[Total Number of Links],0) AS 'Total Number of Links'
       ,ISNULL(LinkData.[Cross Project Links],0) AS 'Cross Project Links'
       ,ISNULL(TaskCFAggregated.[Max Task Custom Fields],0) AS 'Max Task Custom Fields'
       ,ISNULL(TaskCFAggregated.[Average Task Custom Fields],0) AS 'Average Task Custom Fields'
       ,ISNULL(TaskCFAggregated.[Total Task Custom Fields],0) AS 'Total Task Custom Fields'
       ,ISNULL(TaskCFAggregated.[Number of Tasks with Custom Fields],0) AS 'Number of Tasks with Custom Fields'
       ,ISNULL(AssnDataAggregated.[Average Resources on Assigned Tasks],0) AS 'Average Resources on Assigned Tasks'
       ,ISNULL(AssnDataAggregated.[Total Number of Assignments],0) AS 'Total Number of Assignments'
       ,ISNULL(AssnDataAggregated.[Number of Tasks with Assignments],0) AS 'Number of Tasks with Assignments'
       ,ISNULL(RealData.[Actual Count],0) AS 'Actual Count in AssnByDay Table'
       ,ISNULL(AssnCFAggregated.[Max Assn Custom Fields],0) AS 'Max Assn Custom Fields'
       ,ISNULL(AssnCFAggregated.[Average Assn Custom Fields],0) AS 'Average Assn Custom Fields'
       ,ISNULL(AssnCFAggregated.[Total Assn Custom Fields],0) AS 'Total Assn Custom Fields'
       ,ISNULL(AssnCFAggregated.[Number of Assn with Custom Fields],0) AS 'Number of Assn with Custom Fields' 
       ,ISNULL(TaskBaseAggregated.[Number of Baselines],0) AS 'Number of Baselines'
       ,ISNULL(TaskBaseAggregated.[Total Task Baseline Rows],0) AS 'Total Task Baseline Rows'
       ,ISNULL(AssnBaseAggregated.[Total Assn Baseline Rows],0) AS 'Total Assn Baseline Rows' 
       ,ISNULL(ResBaseAggregated.[Total Resource Baseline Rows],0) AS 'Total Resource Baseline Rows'
       ,ISNULL(Resources.[Total Resources],0) AS 'Project Team (All)'
       ,ISNULL(Resources.[Enterprise Resources],0) AS 'Project Team (Enterprise)'
       ,ISNULL(ActiveResAggregated.[Active Resources],0) AS 'Active Resources'
       ,getdate() as [Date/Time of Recording]
FROM dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
-- Project Summary Task
INNER JOIN dbo.MSP_TASKS AS Task WITH(NOLOCK)
ON (Proj.PROJ_UID = Task.PROJ_UID AND Task.TASK_OPTINDX = 1) -- Use the Project Summary Task for rollup values
-- Get the rowcount from our (usually) largest table 
LEFT OUTER JOIN (SELECT Assn.ProjectUID as 'PROJ_UID'
                       ,COUNT(*) + 1 AS 'Actual Count'
                 FROM PWA_Reporting_96D2C4A4_1D9F_4C80_B3A3_82098CC6C6E5..MSP_EpmAssignmentByDay AS Assn
                 GROUP BY Assn.ProjectUID) AS RealData
ON (Proj.PROJ_UID = RealData.PROJ_UID)
-- Project Custom Field Data
LEFT OUTER JOIN (SELECT pcf.PROJ_UID
                       ,COUNT(*) AS 'Number of Project Custom Field Values'
                 FROM dbo.MSP_PROJ_CUSTOM_FIELD_VALUES AS pcf WITH(NOLOCK)
                 GROUP BY pcf.PROJ_UID) AS ProjCF
ON (Proj.PROJ_UID = ProjCF.PROJ_UID)
-- Project Local Custom Fields
LEFT OUTER JOIN (SELECT plcf.PROJ_UID
                       ,COUNT(*) AS 'Number of Local Custom Field Definitions'
                 FROM dbo.MSP_PROJECT_CUSTOM_FIELDS AS plcf WITH(NOLOCK)
                 GROUP BY plcf.PROJ_UID) AS ProjLCF
ON (Proj.PROJ_UID = ProjLCF.PROJ_UID)

-- Project Hierarchy Below each Project
LEFT OUTER JOIN (SELECT HierData.PROJ_UID
                       ,COUNT(HierData.DEPTH) AS 'Number of SubProjects'
                       ,MAX(HierData.DEPTH) AS 'SubProject Depth'
                 FROM (SELECT Proj.PROJ_UID
                             ,Hier.DEPTH 
                       FROM ProjHierarchy as Hier
                       INNER JOIN dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
                       ON Hier.PARENT_PROJ_UID = Proj.PROJ_UID) AS HierData
                 GROUP BY HierData.PROJ_UID) AS HierSummaryData
ON (Proj.PROJ_UID = HierSummaryData.PROJ_UID)
-- Project resource data
LEFT OUTER JOIN (SELECT Pres.PROJ_UID
                       ,COUNT(*) AS 'Total Resources'
                       ,SUM(CAST(Pres.RES_IS_ENTERPRISE_RESOURCE AS INT)) AS 'Enterprise Resources'
                       ,SUM(CAST(Pres.RES_BOOKING_TYPE AS INT)/2) AS 'Proposed Resources'
                 FROM dbo.MSP_PROJECT_RESOURCES AS Pres WITH(NOLOCK)
                 WHERE Pres.RES_ID > 0 -- Ignore internal resources
                 GROUP BY Pres.PROJ_UID) AS Resources
ON (Proj.PROJ_UID = Resources.PROJ_UID)
 -- Resources with Assignments
 LEFT OUTER JOIN (SELECT ActiveRes.PROJ_UID
                        ,COUNT(*) AS 'Active Resources'
                  FROM (SELECT Assn.PROJ_UID
                              ,Assn.RES_UID
                        FROM dbo.MSP_ASSIGNMENTS AS Assn WITH(NOLOCK)
                        INNER JOIN dbo.MSP_PROJECT_RESOURCES AS Pres WITH(NOLOCK)
                        ON (Assn.PROJ_UID = Pres.PROJ_UID AND Assn.RES_UID = Pres.RES_UID)
                        WHERE Pres.RES_ID > 0 -- Ignore internal resources
                        GROUP BY Assn.PROJ_UID, Assn.RES_UID) AS ActiveRes
                  GROUP BY ActiveRes.PROJ_UID) AS ActiveResAggregated
 ON (Proj.PROJ_UID = ActiveResAggregated.PROJ_UID)  
-- Leaf task data            
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                   ,COUNT(*) AS 'Leaf Task Count'
                   -- Implementation Note - Use _SCHED_ below for P14, Ignores User Scheduled dates 
                   ,MAX(DATEDIFF(d,Task.TASK_START_DATE, Task.TASK_FINISH_DATE)) AS 'Max Leaf Calendar Duration (Days)'
                   ,AVG(DATEDIFF(d,Task.TASK_START_DATE, Task.TASK_FINISH_DATE)) AS 'Average Leaf Calendar Duration (Days)'
                   --**P14**: ,MAX(DATEDIFF(d,Task.TASK_SCHED_START, Task.TASK_SCHED_FINISH)) AS N''Max Calendar Duration (Days)''
                   --**P14**: ,AVG(DATEDIFF(d,Task.TASK_SCHED_START, Task.TASK_SCHED_FINISH)) AS N''Average Calendar Duration (Days)''
                   ,SUM(CAST(TASK_IGNORES_RES_CAL AS INT)) AS 'Total Leaf Task Ignoring ResCalendar'
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 WHERE Task.TASK_IS_SUMMARY = 0x0 -- Ignore summary tasks
                 AND Task.TASK_IS_MILESTONE = 0x0 -- Ignore milestones
                 AND Task.TASK_IS_SUBPROJ = 0x0 -- Ignore subprojects
                 GROUP BY Task.PROJ_UID) AS LeafTaskData
ON (Proj.PROJ_UID = LeafTaskData.PROJ_UID)
-- All visible tasks in the project
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                   ,COUNT(*) AS 'Task Count'
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 WHERE Task.TASK_OPTINDX > 1
                 GROUP BY Task.PROJ_UID) AS AllTaskData
ON (Proj.PROJ_UID = AllTaskData.PROJ_UID)
-- Task data changed on Last Project saved
LEFT OUTER JOIN (SELECT Task.PROJ_UID
                       ,COUNT(*) AS N'Recent Changes'
                 FROM dbo.MSP_TASKS AS Task WITH(NOLOCK)
                 INNER JOIN dbo.MSP_PROJECTS AS Proj WITH(NOLOCK)
                 ON (Task.PROJ_UID = Proj.PROJ_UID AND Task.MOD_REV_COUNTER = Proj.MOD_REV_COUNTER)
                 WHERE Task.TASK_OPTINDX > 1
                 GROUP BY Task.PROJ_UID) AS RecentTasks
ON (Proj.PROJ_UID = RecentTasks.PROJ_UID)
-- Task Custom Field Data
LEFT OUTER JOIN (SELECT TaskCF.PROJ_UID
                       ,MAX(TaskCF.[Task CF Count]) AS 'Max Task Custom Fields'
                       ,AVG(TaskCF.[Task CF Count]) AS 'Average Task Custom Fields'
                       ,SUM(TaskCF.[Task CF Count]) AS 'Total Task Custom Fields'
                       ,COUNT(*) AS 'Number of Tasks with Custom Fields'
                 FROM (SELECT TCF.PROJ_UID
                             ,TCF.TASK_UID
                             ,COUNT(*) AS 'Task CF Count'
                       FROM dbo.MSP_TASK_CUSTOM_FIELD_VALUES AS TCF WITH(NOLOCK)
                       GROUP BY TCF.PROJ_UID, TCF.TASK_UID) AS TaskCF
                 GROUP BY TaskCF.PROJ_UID) AS TaskCFAggregated
ON (Proj.PROJ_UID = TaskCFAggregated.PROJ_UID)
-- Link Data
LEFT OUTER JOIN (SELECT Links.PROJ_UID
                       ,COUNT(*) AS 'Total Number of Links'
                       ,SUM(CAST(LINK_IS_CROSS_PROJ AS INT)) AS 'Cross Project Links'
                 FROM dbo.MSP_LINKS AS Links
                 GROUP BY Links.PROJ_UID) AS LinkData
ON (Proj.PROJ_UID = LinkData.PROJ_UID)
-- Task Baseline Data
LEFT OUTER JOIN (SELECT TaskBaseData.PROJ_UID
                       ,COUNT(*) AS 'Number of Baselines'
                       ,SUM(TaskbaseData.[Task Baseline Rows]) AS 'Total Task Baseline Rows'
                 FROM (SELECT TaskBase.PROJ_UID
                             ,TaskBase.TB_BASE_NUM AS 'Baseline'
                             ,COUNT(*) AS 'Task Baseline Rows'
                       FROM dbo.MSP_TASK_BASELINES AS TaskBase WITH(NOLOCK)
                       GROUP BY TaskBase.PROJ_UID, TaskBase.TB_BASE_NUM) AS TaskBaseData
                 GROUP BY TaskBaseData.PROJ_UID) AS TaskBaseAggregated
ON (Proj.PROJ_UID = TaskBaseAggregated.PROJ_UID)
-- Assignment Baseline Data
LEFT OUTER JOIN (SELECT AssnBaseData.PROJ_UID
                       ,COUNT(*) AS 'Total Assn Baseline Rows'
                 FROM dbo.MSP_ASSIGNMENT_BASELINES AS AssnBaseData WITH(NOLOCK)
                 GROUP BY AssnBaseData.PROJ_UID) AS AssnBaseAggregated
ON (Proj.PROJ_UID = AssnBaseAggregated.PROJ_UID)
-- Resource Baseline Data
LEFT OUTER JOIN (SELECT ResBaseData.PROJ_UID
                       ,COUNT(*) AS 'Total Resource Baseline Rows'
                 FROM dbo.MSP_PROJECT_RESOURCE_BASELINES AS ResBaseData WITH(NOLOCK)
                 GROUP BY ResBaseData.PROJ_UID) AS ResBaseAggregated
ON (Proj.PROJ_UID = ResBaseAggregated.PROJ_UID) 
-- Assignment Data Summary
LEFT OUTER JOIN (SELECT AssnTaskData.PROJ_UID
                       ,AVG(AssnTaskData.[Assignment Count]) AS 'Average Resources on Assigned Tasks'
                       ,SUM(AssnTaskData.[Assignment Count]) AS 'Total Number of Assignments'
                       ,COUNT(*) AS 'Number of Tasks with Assignments'
                 FROM (SELECT Assn.PROJ_UID
                             ,Assn.TASK_UID
                             ,COUNT(*) AS 'Assignment Count'
                       FROM dbo.MSP_ASSIGNMENTS AS Assn WITH(NOLOCK)
                       GROUP BY Assn.PROJ_UID, Assn.TASK_UID) AS AssnTaskData
                 GROUP BY AssnTaskData.PROJ_UID) AS AssnDataAggregated    
 ON (Proj.PROJ_UID = AssnDataAggregated.PROJ_UID)
-- Assignment Custom Field Data
LEFT OUTER JOIN (SELECT AssnCF.PROJ_UID
                       ,MAX(AssnCF.[Assn CF Count]) AS 'Max Assn Custom Fields'
                       ,AVG(AssnCF.[Assn CF Count]) AS 'Average Assn Custom Fields'
                       ,SUM(AssnCF.[Assn CF Count]) AS 'Total Assn Custom Fields'
                       ,COUNT(*) AS 'Number of Assn with Custom Fields'
                 FROM (SELECT ACF.PROJ_UID
                             ,ACF.ASSN_UID
                             ,COUNT(*) AS 'Assn CF Count'
                       FROM dbo.MSP_ASSN_CUSTOM_FIELD_VALUES AS ACF WITH(NOLOCK)
                       GROUP BY ACF.PROJ_UID, ACF.ASSN_UID) AS AssnCF
                 GROUP BY AssnCF.PROJ_UID) AS AssnCFAggregated
ON (Proj.PROJ_UID = AssnCFAggregated.PROJ_UID); 
```

# java - 如何将代理注入服务？

> ID：12499878
> 
> 赞同：5
> 
> 时间：2012-09-19T17:29:15.167
> 
> 标签：java, spring, dependency-injection, proxy

在我们想要访问运行时的 tomcat 引擎中有一些信息，所以我们在我们的应用程序上下文中有以下信息（从[这篇博](http://www.frothandjava.com/2011/05/using-tomcat-engine-jmx-proxy-bean-with.html)文中得到了这个）：

```
<bean id="tomcatEngineProxy" class="org.springframework.jmx.access.MBeanProxyFactoryBean">
    <property name="objectName" value="Catalina:type=Engine" />
    <property name="proxyInterface" value="org.apache.catalina.Engine" />
    <property name="useStrictCasing" value="false" />
</bean> 
```

在控制器中，我们然后像这样自动连接它：

```
@Autowired
private MBeanProxyFactoryBean tomcatEngineProxy = null; 
```

我们无法`org.apache.catalina.Engine`像博客文章中那样连接，因为在构建时我们无法使用该类。它仅在运行时可用，所有不同的 tomcat 版本都在不同的机器上运行。

我们能够使用反射从这个@Autowire 获得我们需要的信息。现在，我们想将此功能移动到服务中。我将此添加到我们的应用程序上下文中：

```
<bean id="myService" class="com.foo.bar.MyServiceImpl">
    <constructor-arg ref="tomcatEngineProxy" />
</bean> 
```

这个类看起来像这样：

```
public class MyServiceImpl implements MyService
{
    public MyServiceImpl(MBeanProxyFactoryBean tomcatEngineProxy) throws Exception
    {
         //stuff with the proxy
    }
    .....
} 
```

当我这样做时，我收到以下错误：

```
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myService' defined in ServletContext resource [/WEB-INF/spring/root-context.xml]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.springframework.jmx.access.MBeanProxyFactoryBean]: Could not convert constructor argument value of type [$Proxy44] to required type [org.springframework.jmx.access.MBeanProxyFactoryBean]: Failed to convert value of type '$Proxy44 implementing org.apache.catalina.Engine,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised' to required type 'org.springframework.jmx.access.MBeanProxyFactoryBean'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [$Proxy44 implementing org.apache.catalina.Engine,org.springframework.aop.SpringProxy,org.springframework.aop.framework.Advised] to required type [org.springframework.jmx.access.MBeanProxyFactoryBean]: no matching editors or conversion strategy found 
```

基本上对代理如何工作以及如何使用它们一无所知，我不确定如何进行这项工作。是否有一些声明可以用于我的构造函数 arg 匹配？控制器中起作用的 @Autowire 和不起作用的构造函数 arg 有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:14:48.760

这是因为您的工厂 bean 将结果公开为引擎接口：

```
<property name="proxyInterface" value="org.apache.catalina.Engine" /> 
```

因此，如果您尝试连接“tomcatEngineProxy”bean 本身，它唯一兼容的分配是“org.apache.catalina.Engine”，因为创建的代理仅实现该接口。

尝试直接引用工厂 bean（注意与符号，它是查找创建对象而不是对象本身的实际工厂 bean 的语法）：

```
<constructor-arg ref="&tomcatEngineProxy" /> 
```

[如何注入 FactoryBean 而不是它产生的对象？](https://stackoverflow.com/questions/3441438/how-to-inject-factorybean-instead-of-object-it-produces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:40:57.490

我相信这是可行`@Autowired`的，因为绑定是根据 Bean 的类型（即`MBeanProxyFactoryBean`）完成的，但是与构造函数参数的绑定是按名称完成的，并且您提供的名称与`tomcatEngineProxy`您期望的类型不匹配，因为创建了 bean 的类型使用 FactoryBean 与使用[FactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/FactoryBean.html)不同。

看起来最简单的解决方案将更改为`MyServiceImpl`：

```
public class MyServiceImpl implements MyService
{
    @Autowired 
    private MBeanProxyFactoryBean tomcatEngineProxy;

    public MyServiceImpl() throws Exception
    {
         //stuff with the proxy
    }
    .....
} 
```

这应该可以解决问题。

# android - 将变量发送到 OnTouch 方法

> ID：12499883
> 
> 赞同：0
> 
> 时间：2012-09-19T17:29:33.863
> 
> 标签：android, touch-event

在这种方法中，我将模式设置为 1；

```
bTouch.setOnClickListener(new View.OnClickListener() {     
  public void onClick(View v) {
    mode1=1;
      Intent startGame = new Intent(
        "com.example.mygame.GFXSurface");
        startActivity(startGame);
  }
}); 
```

当我在 onTouch 方法中的其他类中调用该模式时返回 0

```
public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
    GameSurface gamesurface = new GameSurface(this);
    Mode mode2 = new Mode();
    mode= mode2.mode1; 
        if (mode == 1){        // this should be 1 but is 0
            x = event.getX();
            y = event.getY(); 
```

任何人都知道如何做到这一点的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:38:50.533

不，`mode1`值不是 1，它应该是 0。

看看这两行代码..

```
Mode mode2 = new Mode();
mode= mode2.mode1; 
```

现在从 1 个代码行`Mode mode2 = new Mode();`

您正在创建一个新的 Class`Mode`对象`mode2`。

根据类对象初始化规则，您被分配了一个新模式类的内存。所以它的所有成员变量和字段都用新的 mwmory 初始化。

现在进入代码行 2

```
mode = mode2.mode1; 
```

您正在使用object访问`mode1`新创建的类的成员字段。`Mode``mode2`

那么它如何保持旧值 1 呢？（再想想）

```
Now how can you access this value in other class? 
```

将成员字段`mode1`设为**静态**并直接使用类名称访问该字段，

喜欢， `Mode.mode1`

或者使用相同的对象来检索（获取）mode1 的值，从中设置 mode1 的值。

# javascript - 如何隐藏或禁用谷歌地图 JavaScript API v3 上的谷歌标志、页脚、版权？

> ID：12499886
> 
> 赞同：58
> 
> 时间：2012-09-19T17:29:55.123
> 
> 标签：javascript, html, css, google-maps

我在工作中有这个任务，我需要使用 Google maps API v3，他们给我的设计没有 google 在地图下部放置的徽标/页脚/版权。好吧，我需要禁用或隐藏它，因为我被告知无论如何我都需要匹配确切的设计。

我必须强调，这样做违反了 Google 服务的使用条款……

> **9.4 归属。**
> 
> > (a) 通过服务提供给您的内容可能包含 Google、其合作伙伴或 Google 索引内容的其他第三方权利持有人的商号、商标、服务标记、徽标、域名和其他独特的品牌特征。当 Google 提供此属性时，您必须按照通过服务提供的或 Maps API 文档中的说明显示它，并且不得删除或以任何方式更改这些商号、商标、服务标记、徽标、域名和其他独特品牌特征。 [https://developers.google.com/maps/terms](https://developers.google.com/maps/terms)

好吧，在我的工作中，他们并不关心这一点，他们总是告诉我无论如何都要这样做，所以我就是这样做的。

在 css 中，我添加了以下代码行：

```
#map-report div.gmnoprint,
#map-report div.gmnoscreen {
    display: none;      
}

img[src="http://maps.gstatic.com/mapfiles/google_white.png"] {
    display: none; 
} 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2014-05-12T15:42:09.777

# 这个 CSS 的工作原理就像魅力 [2019 年 10 月测试]。
删除*Google 徽标*、*使用条款*和*报告问题*div。

```
a[href^="http://maps.google.com/maps"]{display:none !important}
a[href^="https://maps.google.com/maps"]{display:none !important}

.gmnoprint a, .gmnoprint span, .gm-style-cc {
    display:none;
}
.gmnoprint div {
    background:none !important;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-03-22T18:48:42.767

为 api v3 试试这个：

`.gm-style-cc { display:none; }`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-03-29T11:08:04.053

**2018 年 1 月更新**。只留下干净的地图：

```
a[href^="http://maps.google.com/maps"],
a[href^="https://maps.google.com/maps"],
a[href^="https://www.google.com/maps"] {
    display: none !important;
}
.gm-bundled-control .gmnoprint {
    display: block;
}
.gmnoprint:not(.gm-bundled-control) {
    display: none;
} 
```

**截至 2018 年 2 月，上面的 CSS 在地图上制作标记 unclickabe**。如果你没有任何标记，你不应该有任何问题，但如果你只是删除最后一个 CSS 规则`.gmnoprint:not(.gm-bundled-control)`，标记将变得可点击，但会有一些版权和使用条款标签

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-12T09:33:52.553

正如您所提到的，删除 Google 徽标和版权声明**不符合[Google Maps APIs TOS](https://developers.google.com/maps/terms)**，特别是第 9.4 段：

*“通过服务提供给您的内容可能包含 Google、其战略合作伙伴或 Google 索引的内容的其他第三方权利持有人的品牌特征。当 Google 通过服务提供这些品牌特征或其他属性时，您必须显示此类提供的属性（或 Maps API 文档中描述的属性），并且不得删除或更改属性。”* .

为了遵守服务条款，请始终确保 Google 徽标和版权声明可见。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-22T20:28:26.890

你可以这样做：

```
#map-report a img { display:none; } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-19T17:53:04.827

您不能从 API 中删除它。但是您可以使用可以放在版权声明上的 div

```
<div style="width:100px; height:15px; position:absolute; margin-left:100px margin-

bottom:50px; background-color:white;">
</div> 
```

根据需要对高度、宽度和边距进行更改。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-01-26T10:56:01.703

像 v3 的魅力一样工作：

```
.gm-style-cc {
  display: none !important;
}

.gm-style a[href^="https://maps.google.com/maps"] {
  display: none !important;
} 
```

记下我`.gm-style`之前使用的第二个选择器`a`，否则它会隐藏*所有*链接，`https://maps.google.com/maps`不仅来自谷歌地图本身。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-09T06:14:58.990

You can prevent the click on google copyright.so, that it will not let user to move out of your applicaiton.Hope this resolves your problem.

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    // do something only the first time the map is loaded
    //@mapCopyright - gets the google copyright tags
    var mapCopyright=document.getElementById('map-canvas').getElementsByTagName("a");   
        $(mapCopyright).click(function(){
            return false;
        });
    }); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-22T01:30:22.623

首先将您的地图放入容器中：

```
<div id="map">
    <div class="google-maps"></div>
</div> 
```

CSS：

```
#map {
    position: relative;
    height: 500px;
    overflow: hidden; //important
}
#map .google-maps {
    position: absolute;
    width: 100%;
    height: 110%;  //that will do the trick
    left: 0;
    top: 0;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-01-09T09:36:54.593

```
a[href^="http://maps.google.com/maps"],a[href^="https://maps.google.com/maps"] {
     display: none !important;
}
.gmnoprint a,.gmnoprint span,.gm-style-cc { 
    display: none;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-07-20T11:48:24.433

使用此代码（css）

```
a[href^="http://maps.google.com/maps"]{display:none !important} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-07-19T21:50:56.237

在这里改进另一个解决方案，这只是禁用地图中的链接，因此人们不会离开应用程序（并且卡住而无法返回）。在应用程序上，当人们试图滚动小地图并错误地点击时，它会产生很大的不同。

```
 google.maps.event.addListenerOnce(map, 'idle', function(){

      $("#map a").click(function(){
          return false;
      });
  }); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-21T15:23:02.547

这个：

```
#map-repor > div { 
  height: 105% !important;
} 
```

在我的情况下就足够了

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-21T00:42:51.323

这会成功的。

```
$('#map span:contains("©")')
    .closest('.gmnoprint')
    .css('opacity', '0') 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-08T00:04:13.183

## 使用 V3 的单行程序

### CSS

```
#map .gm-style > div:not(:first-child) { display: none; } 
```

### jQuery

```
$('#map .gm-style > div:not(:first-child)').remove() 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-09-17T15:33:27.693

这目前有效，至少在他们修改徽标周围链接的标题属性之前。

```
.gm-style a[title='Click to see this area on Google Maps']{ display: none!important; } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-11T07:21:03.360

```
 .gm-style-mtc,
  .gm-svpc,
  .gm-style-cc {
    display: none;
  } 
```

我认为你应该添加一个包装块来改变新的风格！并在左页脚带有 Google 徽标。您可以在这里使用检查元素来获取我们的选择器。

```
#example-map > div > div > div:nth-child(3) {
  display: none;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-10-11T21:55:57.270

```
.gm-style > div:first-child {
z-index: 10000000 !important;
} 
```

z-index：js给所有div加1000000，但是我们只想看到map，所以必须设置z-index为10000000

# c# - 通用命令中的数字表示？

> ID：12499890
> 
> 赞同：0
> 
> 时间：2012-09-19T17:30:11.673
> 
> 标签：c#, numbers, representation

我正在分析的一段 C# 中有一行代码。

``random.next(0xf4240, 0x98967f).ToString();'`

我知道命令行正在生成指定范围之间的数字并将其作为字符串返回。对我来说有点奇怪的是'0xf'和'0x#####f'

我查了一下 0xf 应该返回一个 nybbie 但我真的很想知道原始值是什么。任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:32:11.857

前缀`0x`是您在 C# 和许多其他语言中指定十六进制值的方式。我相信十六进制只能指定整数值，尽管我可能错了。

在您的情况下， 0xf4240 与十六进制的 F4240 或十进制的 1.000.000 相同。0x98967f 与十进制的 9.999.999 相同。

有一件事，这段代码显然是故意混淆的，那就是 baaaad。似乎没有必要以十六进制提供这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:32:54.103

命令行没有生成*任何东西*- 您的 C# 应用程序（恰好输出到命令行）正在计算 1000000 到 9999999 之间的伪随机数（您正在传递十六进制表示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:38:40.643

在 C# 中，**0x**用作前缀来表示十六进制整数文字。见[规格](http://msdn.microsoft.com/en-us/library/aa664674%28v=vs.71%29.aspx)

在您的情况下，`f4240`并且`98967f`只是以十六进制系统表示的两个整数。

更新：正如@codesparkle 所说，它们分别代表 1000000 和 9999999

# java - 常春藤额外属性 xmlns

> ID：12499891
> 
> 赞同：1
> 
> 时间：2012-09-19T17:30:13.163
> 
> 标签：java, xsd, dependencies, ivy

1.  可以为 ivy 额外属性指定哪些可用的 URI？

    Ivy 手册页允许我们使用 URI

    > xmlns:e="http://ant.apache.org/ivy/extra"

    这将允许我们以自由形式使用额外的属性。

    ```
    <ivy-module version="2.0"
      xmlns:e="http://ant.apache.org/ivy/extra">

      <info
        organisation="mitt.wit"
        module="EtchASketch"
        revision="47-pct"
        e:reset="true"
        > 
    ```

    是否有其他 URI 可供使用？例如，我们可以做

    ```
    <ivy-module version="2.0"
      xmlns:e="http://ant.apache.org/ivy/extra"
      xmlns:m="http://ant.apache.org/ivy/maven"
      xmlns:ivy="antlibrg.apache.ivy.ant"

      <info
        organisation="mitt.wit"
        module="EtchASketch"
        revision="47-pct"
        e:reset="true"
        ivy:home="${springfield.mittychusetts}"
        m:daven="sometimes"
        > 
    ```

    我还可以使用哪些其他 URI？

2.  如果还有其他可用的 URI，我在哪里可以找到它们的允许属性列表（可能来自 XSD）？喜欢

    ```
    m:classifier
    ivy:home 
    ```

    或者，也许，有什么事情发生了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T17:10:53.847

1.  您可以使用任何限定属性（实际上是任何 URI，因为 ivy XSD 没有目标命名空间）。[Ivy](http://ant.apache.org/ivy/schemas/ivy.xsd)`<xs:anyAttribute namespace="##other" processContents="lax" />` XSD允许.

2.  这将取决于 URI。通常，一种方法是找出对应于 URI 的 XSD 并查找所有全局属性声明。如果这不是一个选项，模块特定文档也应该有所帮助。看看这个[SO 帖子](https://stackoverflow.com/questions/4897672/location-of-xsd-for-ant-ivy-lib-antliborg-apache-ivy-ant-for-ide-autocomplete)以获得其他想法。如果它真的很重要，并且以上所有方法都不起作用，也许可以查看一些源代码（例如，我找不到 ivy/maven 的 XSD，但我在[这里](http://svn.apache.org/viewvc/ant/ivy/core/trunk/src/java/org/apache/ivy/plugins/parser/m2/PomModuleDescriptorBuilder.java?view=markup)遇到了与 Maven 相关的源代码，有m:classifier 所以也许另一个也可能适用）。

# perl - 使用 ParseExcel 时是否可以更改工作表名称？

> ID：12499892
> 
> 赞同：1
> 
> 时间：2012-09-19T17:30:16.247
> 
> 标签：perl, perl-module

[使用Spreadsheet::ParseExcel](http://p3rl.org/Spreadsheet%3a%3aParseExcel)（作为模板）编写了一个 Perl 脚本来解析现有的 Excel 工作簿，并在从我们的数据库中添加更新数据的同时创建新文件。

有没有办法在运行 SaveAs 函数之前更新各个工作表的名称？我想将它们重命名为客户编号，而不是默认的 Sheet1、Sheet2 等。我确实阅读了 PerlDoc 并确实看到有一个`get_name()`选项，但没有什么可以更改和重新保存的。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:13:35.363

If you are using [SpreadSheet::WriteExcel](https://metacpan.org/module/Spreadsheet%3a%3aWriteExcel) you can specify the name of the worksheet as the method `add_worksheet`'s first param. This is what the [doc](https://metacpan.org/module/Spreadsheet%3a%3aWriteExcel#add_worksheet-sheetname-utf_16_be-) says:

```
$worksheet1 = $workbook->add_worksheet();           # Sheet1
$worksheet2 = $workbook->add_worksheet('Foglio2');  # Foglio2
$worksheet3 = $workbook->add_worksheet('Data');     # Data
$worksheet4 = $workbook->add_worksheet();           # Sheet4 
```

So what you'd want to do is probably something like this:

```
while (my $res = $dbh->fetchrow_hashref) {
  my $worksheet = $workbook->add_worksheet($res->{'customerName'});
  # do stuff with that sheet
} 
```

* * *

**Update**: Since you're only using Spreadsheet::ParseExcel here's another idea. There's no setter method for the name, so let's take a deeper look to find a workaround.

The [code of Spreadsheet::ParseExcel::Worksheet](https://metacpan.org/source/JMCNAMARA/Spreadsheet-ParseExcel-0.59/lib/Spreadsheet/ParseExcel/Worksheet.pm) shows us how the name of a workbook-object is stored:

```
###############################################################################
#
# get_name()
#
# Returns the name of the worksheet.
#
sub get_name {

    my $self = shift;

    return $self->{Name};
} 
```

You can just access the key *Name* directly via the worksheet-object.

```
$worksheet->{'Name'} = $res->{'customerName'}; 
```

**Disclaimer:** You should never meddle with internal values of objects, especially if you do not have control over their source. The internal structure may change in a future release, thus breaking your code!

# php - Imagemagick Convert 创建一个非常像素化的图像

> ID：12499900
> 
> 赞同：4
> 
> 时间：2012-09-19T17:31:00.833
> 
> 标签：php, imagemagick, imagemagick-convert

我使用 imagemagick 从我网站上的图像创建缩略图，使用如下所示的转换：`convert -size 220x220 %s -resize 220 -profile '*' %s", $image, $thumb`这在很长一段时间内都非常有效。已经处理了数千张图像，所有缩略图看起来都很棒......除了一个。由于某种原因，这张图片产生了一个非常难看的缩略图，我不知道为什么。

原图：http: [//i.imgur.com/fCbAN.jpg](http://i.imgur.com/fCbAN.jpg)

生成的缩略图：http: [//i.imgur.com/MdLCs.jpg](http://i.imgur.com/MdLCs.jpg)

有没有人知道为什么我的转换代码会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T22:37:51.943

缩略图以非常低的质量保存（大约 10-15、99 接近无损）。我认为问题是，“为什么会发生这种情况”。

我可以想到一些原因，但是您必须进行实验。我假设您发布的图像是真实图像（我的意思是，不是将 PNG 转换为 JPG 的副本），并且命令行是完整的并描述了完整的图像工作流程。

*   您的 ImageMagick 设置尝试保持估计的图像质量。您没有明确设置质量（例如`-quality 75`），因此缩略图获得与源图像相同的量化器设置。假设源具有低量化器，但由于高频分量而看不到它（由于扫描，图像“嘈杂”）。重新采样时，背景会失去其噪声并变成平滑的渐变，而源中不存在这种渐变。平滑的渐变对低量化器来说是地狱。**尝试明确设置质量因子**（40 到 99，40 压缩更好但更粗，99 质量非常高但文件更大）。

*   重采样器和扫描仪在获取的图像中创建的莫尔图案之间存在某种干扰。这不太可能，因为我看到大约 8 个像素的“波长”并不少见，我也不认为在您获得的这么多图像中，没有一个具有与该图像大致相同的大小和纵横比；在这种情况下应该触发相同的行为。你说它没有发生，所以如果这个图像在大小、纵横比或来源方面并不少见（例如，在批次中使用 Scan-o-matic 600 扫描仪扫描的极少数图像之一），那么这种情况就变成了不太可能。但如果它是正确的，那么**在调整大小之前添加一个高斯模糊**，它应该可以解决问题：例如`-blur 2x2`.

*   文件名中有错误的 juju，由于某种原因，这让 ImageMagick 包装器解释了“将量化器设置为其最糟糕的值”的命令。真的不太可能（如果解释器将文件名的一部分解释为选项，它不应该将其解释为文件名，并且文件名的其余部分不再是真正的文件名；导致“找不到文件”错误，我们不要观察。同样，如果原始文件名类似于“--progressive-swedish-music.jpg”，请**尝试在缩略图之前重命名它**。

无论如何，我把钱花在了选项#1上。

您可以尝试的另一个测试是从 ImageMagick（命令行）而不是 PHP 运行相同的命令。

# ruby - yield_content 的多余输出

> ID：12499902
> 
> 赞同：0
> 
> 时间：2012-09-19T17:31:08.747
> 
> 标签：ruby, sinatra, erb

当我使用`yield_content`. 请看下文。注意`[#<Proc:0x850a14c@/home/akonsu/project/index.erb:1>]`部分。这是什么？

布局.erb：

```
`<!DOCTYPE html>
<html>
  <head>
    <%= yield_content :head %>
  </head>
  <body>
    <%= yield %>
  </body>
</html>` 
```

`index.erb： ````
<% content_for :head do %>
  <script type="text/javascript" src="/js/jquery.js"></script>
<% end %>
<div id="contents">
...
</div>

```` 输出： ````
<!DOCTYPE html>
<html>
  <head>
  <script type="text/javascript" src="/js/jquery.js"></script>
[#<Proc:0x850a14c@/home/akonsu/project/index.erb:1>]
  </head>
  <body><div id="contents">
...
</div>
</body>
</html>

```` 

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:12:07.183

这是因为`<%=`. 在 ruby​​ 1.9 中应该使用它`<%`。

```
`<% yield_content :head %>` 
````

# web-services - MonoDroid EndpointNotFoundException

> ID：12499904
> 
> 赞同：0
> 
> 时间：2012-09-19T17:31:14.383
> 
> 标签：web-services, xamarin.android, slsvcutil

我正在使用使用 Microsoft 的 slsvcutil 生成的客户端代码调用 Web 服务。无论我打什么电话，我都会收到 EndpointNotFoundException。堆栈跟踪如下。该服务正在我的本地计算机上运行。我能够使用相同的生成客户端代码和相同的 Web 服务成功地从 MonoTouch 应用程序进行相同的调用。

我正在为 Android 4.2.6 Monotouch 5.9.9.4 Mono 2.10.9 运行 Mono

还有人看到这个吗？

```
System.ServiceModel.EndpointNotFoundException: A system exception has occurred. --->              System.Exception: Error: ConnectFailure (Network is unreachable) ---> System.Exception: Network is unreachable
at System.Net.Sockets.Socket.Connect (System.Net.EndPoint remoteEP) [0x00000] in <filename unknown>:0
at System.Net.WebConnection.Connect (System.Net.HttpWebRequest request) [0x00000] in <filename unknown>:0
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.EndGetRequestStream (IAsyncResult asyncResult) [0x00000] in <filename unknown>:0
at System.ServiceModel.Channels.HttpRequestChannel+<BeginProcessRequest>c__AnonStorey7.<>m__1 (IAsyncResult r) [0x00000] in <filename unknown>:0
--- End of inner exception stack trace ---
at System.ServiceModel.Channels.HttpRequestChannel+HttpChannelRequestAsyncResult.WaitEnd () [0x00000] in <filename unknown>:0
at System.ServiceModel.Channels.HttpRequestChannel.EndRequest (IAsyncResult result) [0x00000] in <filename unknown>:0
at System.ServiceModel.Channels.HttpRequestChannel.Request (System.ServiceModel.Channels.Message message, TimeSpan timeout) [0x00000] in <filename unknown>:0
at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Channels.Message msg, TimeSpan timeout) [0x00000] in <filename unknown>:0
at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Request (System.ServiceModel.Description.OperationDescription od, System.Object[] parameters) [0x00000] in <filename unknown>:0
at System.ServiceModel.MonoInternal.ClientRuntimeChannel.DoProcess (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0
at System.ServiceModel.MonoInternal.ClientRuntimeChannel.Process (System.Reflection.MethodBase method, System.String operationName, System.Object[] parameters) [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:09:53.373

这似乎是网络配置的结果。

似乎允许 MonoTouch 应用程序在 Android 不能工作的地方工作的不同之处在于，我让 Android 应用程序在设备上运行（通过网络连接到 Web 服务），而 MonoTouch 应用程序从同一台机器上的模拟器运行作为网络服务。

# jquery - jQuery淡入问题

> ID：12499908
> 
> 赞同：0
> 
> 时间：2012-09-19T17:31:29.613
> 
> 标签：jquery, animation, fadein

我目前正在尝试创建一个 jQuery 褪色横幅。

但是，我注意到了我以前从未经历过的淡入淡出问题。

当我将元素设置为淡入时，在淡入结束时出现了一个问题，那就是一切都很好，直到不透明度达到 80% 左右，但不是继续平滑淡入，而是从 80% 跳到 100%

所以它使动画在结尾处看起来很不稳定。

你可以在这里看到它：[https ://www.hollat​​me.com/internship](https://www.hollatme.com/internship)

无论我将动画设置多长时间，它都会发生，并且在其他浏览器中也以相同的结果进行了测试。

谢谢！安德烈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:49:54.120

您为所有干扰 jQuery 动画的 div 元素设置了不透明度的 css 过渡。

检查 Main.css 的第 240 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:43:51.123

淡入淡出没有跳跃。在打开 Chrome Inspector 的情况下刷新页面，您可以在不跳转的情况下看到不透明度值递增到 100。我认为这与您使用的图像中的颜色有关，这给了它“跳跃”效果。

# gwt - GWT - 开源 UI 库

> ID：12499910
> 
> 赞同：0
> 
> 时间：2012-09-19T17:31:39.570
> 
> 标签：gwt

我正在寻找具有动态 TabbedPane 的 GWT 2.3+ 的开源库（带有关闭选项卡按钮、滚动、事件支持等）。我用谷歌搜索但找不到任何东西。所以我需要你熟练的建议。是否有这样的库以及在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:17:04.650

您可以轻松地将其构建为 GWT 中的自定义小部件。

您需要一个顶部面板来显示您的“标签”，并在其下方有一个面板来显示标签内容。当用户单击选项卡时，您会使用选定的选项卡内容填充底部面板。您可以轻松地将按钮添加到“选项卡”小部件，并将 ClickHandler 附加到它以从顶部面板中删除相应的选项卡。这是基本的 GWT - 您不需要外部库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:17:49.407

**智能网关**？这是**[TabSet](http://www.smartclient.com/smartgwt/showcase/#layout_tabs_closeable)**组件展示的链接。你说的事件是什么意思？事件总线？为此，我使用了[GWTP](http://code.google.com/p/gwt-platform/)框架。

编辑： [许可证](http://smartclient.com/product/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:59:33.663

您可以查看 gxt [高级选项卡示例](http://www.sencha.com/examples/#ExamplePlace%3aadvancedtabs)和[gxt 概述](http://www.sencha.com/products/gxt/)

它是 gpl3，但它更像是 Android，除非您有支持合同，否则实际开发是闭门造车的，然后在发布版本时可以使用 src 代码。

如果您的 FLOSS 项目与 GPL3 不兼容，则有一些例外情况——例如，您的项目在 Apache 许可下但您想包含 gxt（当然，代码的 gxt 部分仍必须符合 gpl3要求）

[gxt 许可证](http://www.sencha.com/products/gxt/license/)

# version-control - 为存储库绘制任意数据

> ID：12499912
> 
> 赞同：7
> 
> 时间：2012-09-19T17:31:52.933
> 
> 标签：version-control, jenkins, dvcs

我正在寻找一种方法来可视化关于我的存储库随时间推移的任意信息，这可能是一些与版本相关的数字，例如：

*   代码行
*   乳胶文档中的行数
*   提交之间的时间
*   脚本可以输出的任何东西

可视化这些信息的最佳方式是什么？

更具体地说，我正在使用 mercurial，理想情况下，我会喜欢具有不错界面的东西，可以调整绘图大小/滚动/等...詹金斯的绘图插件不错但不是很好，但更重要的是无法可视化**过去**的数据（比如说，添加新指标后）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T15:04:27.247

我建议将您的任务分开，以简化一切。您可能需要几种不同的工具来收集和可视化所有必需的信息。历史观似乎是另一大挑战。

**代码行**

Jenkins 有几个可用的插件，但几乎都是高度专业化的。[SLOCCount 插件](https://wiki.jenkins-ci.org/display/JENKINS/SLOCCount+Plugin)似乎是最通用的，但它不提供任何图形输出。

![在此处输入图像描述](../Images/76b491b4482423e29f3c52c52bde762e.png)

*   [NSIQ 收集器插件](https://wiki.jenkins-ci.org/display/JENKINS/NSIQ+Collector+Plugin)
*   [SLOCCount 插件](https://wiki.jenkins-ci.org/display/JENKINS/SLOCCount+Plugin)
*   [JavaNCSS 插件](https://wiki.jenkins-ci.org/display/JENKINS/JavaNCSS+Plugin)

您的语言可能还有其他选项。例如，[CCCC](https://wiki.jenkins-ci.org/display/JENKINS/CCCC+Plugin)将提供 C 和 C++ 代码所需的信息：

![在此处输入图像描述](../Images/99c94b5df4bc6617a3b2d8e657ac6d7a.png)

**乳胶文档中的行数** 我看到了几个选项来实现这一点：

*   调整现有的解决方案/插件
*   使用存储库统计工具（例如[Pepper](http://scm-pepper.sourceforge.net/)可以解决问题）
*   使用简单的 shell 脚本计算行数并报告

[Pepper](http://scm-pepper.sourceforge.net/)将生成如下内容：

![在此处输入图像描述](../Images/915bb91f5ae0fa148ead614a9be1ef97.png)

请查看 Pepper[画廊](http://scm-pepper.sourceforge.net/gallery/)。还有其他工具，例如：[hgchart](https://bitbucket.org/mg/hgchart/wiki/Home)

**提交之间的时间**

最简单的解决方案是让提交触发一些琐碎的工作，因此 Jenkins 将提供所有信息作为构建历史的一部分（带有时间线等）。

![在此处输入图像描述](../Images/64b9cc972d04766f0afbced7f02c78e6.png)

另一种解决方案是再次使用存储库统计工具：

![在此处输入图像描述](../Images/3ee70ea45289b5f3923efe7e6c7d93e1.png)

**任何可以通过脚本输出的东西**

有几个很好的插件。

*   [绘图插件](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)可以可视化作为属性或 csv 文件提供的多个值。
*   [测量图插件](https://wiki.jenkins-ci.org/display/JENKINS/Measurement+Plots+Plugin)扫描输出以查找要可视化的值

![在此处输入图像描述](../Images/b5ce310d56569103e4ecfeb3a82d8ea9.png)

快乐的持续集成。

# coldfusion - 如何使用 CF10 Web 服务创建 SOAP 标头

> ID：12499914
> 
> 赞同：1
> 
> 时间：2012-09-19T17:31:57.060
> 
> 标签：coldfusion, axis2, coldfusion-10, axis

在进行 CF Web 服务调用时，必须创建一个 SOAP 标头。在 CF9 中，我们能够使用该`setHeader()`方法。这适用于我的生产服务器（运行 CF9）。但是，我已将本地系统升级到 CF10（出于开发目的），发现此方法不再有效。它抛出以下错误：

> 找不到带有参数 {...} 的 Web 服务操作 setHeader。

当我转储对象时，我看到它`org.apache.axis2.client.Stub`被用来代替`org.apache.axis.client.Stub`. 所以我的问题有两个：

1.  `setHeader`Axis2中的方法在哪里？
2.  如果该方法不再可访问，我如何指定我的对象调用使用 Axis1.x NOT Axis2 ？

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:38:54.860

> 如何为我的对象调用指定使用 Axis1.x NOT Axis2

您可以随时切换回 Axis1，如此[处](http://blogs.coldfusion.com/post.cfm/coldfusion-10-webservices-axis2-vs-axis1)和[此处](http://milanchandnacf.blogspot.in/2012/07/axis-2-and-axis-1-compatibility-issues.html)所述。总之：

> ...ColdFusion 10 允许您指定应在其中发布或使用 Web 服务的 Axis 版本。[它]在三个级别上进行了控制：
> 
> 1.  服务器级别
>     
>     *   `wsversion`在 CF WebServices 管理屏幕中命名的新设置
> 2.  应用程序级别（通过 Application.cfc）
>     *   `this.wssettings.version.publish = 1`
>     *   `this.wssettings.version.consume = 1`
> 3.  组件级别
>     *   用于出版`<cfcomponent wsversion="1">`
>     *   消费用`createObject("webservice", theURL, {wsversion="1"})`

# c++ - 没有脱离循环

> ID：12499915
> 
> 赞同：0
> 
> 时间：2012-09-19T17:32:00.533
> 
> 标签：c++, loops

我正在使用这个程序来实现单字母密码。我遇到的问题是当我输入纯文本时，当满足按下回车键的条件时它不会退出循环。这是我的代码。

```
int main()
{
    system("cls");
    cout << "Enter the plain text you want to encrypt";
    k = 0;
    while(1)
    {
        ch = getche();
        if(ch == '\n')
        {

            break; // here is the problem program not getting out of the loop
        }
        for(i = 0; i < 26; i++)
        {
            if(arr[i] == ch)
            {
                ch = key[i];
            }
        }
        string[k] = ch;
        k++;
    }
    for(i = 0;i < k; i++)
    {
        cout << string[i];
    }
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:38:06.620

这里的问题可能是这样一个事实，即`getche()`（不像`getchar()`）当输入的字符多于一个并且您在 Windows 上（否则您不会使用`cls`）时仅返回第一个字符，然后 EOL 使用`\r\n`.

发生的事情是`getche()`返回`\r`，所以你的休息永远不会真正执行。您应该将其更改为`getchar()`even 因为 getche 是一个非标准函数。

您甚至可以尝试在您的情况下寻找`\r`它`\n`，但我猜`\n`如果您以后需要获取任何其他输入（不确定），它会留在缓冲区中导致问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:08:11.710

我会做类似使用标准 C++ I/O 的休闲活动。

```
#include <iostream>
#include <string>

using namespace std;

// you will need to fill out this table.
char arr[] = {'Z', 'Y', 'X'};
char key[] = {'A', 'B', 'C'};

int main(int argc, _TCHAR* argv[])
{
    string sInput;
    char   sOutput[128];
    int k;

    cout << "\n\nEnter the plain text you want to encrypt\n";
    cin >> sInput;

    for (k = 0; k < sInput.length(); k++) {
        char ch = sInput[k];

        for(int i = 0; i < sizeof(arr)/sizeof(arr[0]); i++)
        {
            if(arr[i] == ch)
            {
                ch = key[i];
                break;
            }
        }
        sOutput[k] = ch;
    }
    sOutput[k] = 0;
    cout << sOutput;

    cout << "\n\nPause.  Enter junk and press Enter to complete.\n";
    cin >> sOutput[0];

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:55:58.800

在 C++ 中依赖旧的 C 库是很糟糕的。考虑这个替代方案：

```
#include <iostream>
#include <string>

using namespace std; // haters gonna hate

char transform(char c) // replace with whatever you have
{
    if (c >= 'a' && c <= 'z') return ((c - 'a') + 13) % 26 + 'a';
    else if (c >= 'A' && c <= 'Z') return ((c - 'A') + 13) % 26 + 'A';
    else return c;
}

int main()
{
    // system("cls"); // ideone doesn't like cls because it isnt windows
    string outstring = "";
    char ch;
    cout << "Enter the plain text you want to encrypt: ";
    while(1)
    {
        cin >> noskipws >> ch;
        if(ch == '\n' || !cin) break;
        cout << (int) ch << " ";
        outstring.append(1, transform(ch));
    }
    cout << outstring << endl;
    cin >> ch;
    return 0;
} 
```

# javascript - 如何使用变量的内容在javascript中声明另一个变量？

> ID：12499918
> 
> 赞同：3
> 
> 时间：2012-09-19T17:32:16.610
> 
> 标签：javascript, jquery

我有一个问题，我希望在 javascript 中使用一个变量的内容作为另一个变量名。在这种情况下，我不知道该变量中的内容是什么，我只知道它是一个文本类型，我希望我需要声明的变量将使用该文本作为其名称。

任何人都可以给我一些建议如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:39:58.903

只要可以通过括号表示法访问后一个变量，您就可以将变量的值用作另一个变量的名称，例如

```
var firstVariable = 'secondVariable';

window[firstVariable] = 'secondValue';
// you now have a global variable 
// named "secondVariable" with the value "secondValue" 
```

注意我不建议像这样弄乱全局命名空间；这只是为了演示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T17:35:35.417

你真的不能，[变量](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variables)名（*identifiers*`eval` ）在一个范围内是静态的（只要你不使用）。

但是，您可以轻松地为此[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。使用变量名访问它们的属性很容易，使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)：

```
var obj = { someprop:"someval", otherprop:… },
    name = "someprop";
obj[name]; // "someval" 
```

如果您需要一个全局变量，您可以通过将其作为全局对象的属性来访问（在浏览器中：）`window`：

```
variable = "someval";
var name = "variable";
window[name]; // "someval" 
```

# crystal-reports - 抑制没有数据和标题的子报表

> ID：12499919
> 
> 赞同：14
> 
> 时间：2012-09-19T17:32:19.823
> 
> 标签：crystal-reports

我有一个相当简单的子报表，当没有为其选择记录时，我想禁止它。问题是我有这个子报表的页眉和页脚部分，其中包含静态元素（文本框、行等）。我已将包含子报表的部分、子报表本身以及子报表中的部分设置为在没有记录时全部隐藏。然而，子报告无论如何都会显示出来。没有数据的数据部分确实被抑制了，但页眉和页脚似乎使子报表保持可见。

有任何想法吗？哦，我正在运行 Crystal-Reports 2011。谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T17:54:24.087

我自己在 CR2008 中遇到了这个问题。以下是我为完成这项工作所做的步骤：

1.  进入您的子报告（我的意思是让它在自己的设计器窗口中打开）-> 进入“文件”菜单下的“报告选项”-> 选择“如果没有记录则禁止打印”
2.  现在回到你的主报告。右键单击子报表 -> 转到“格式化子报表” -> 点击“子报表”选项卡 -> 选中“禁止空白子报表”复选框。
3.  如果子报告是主报告部分中的唯一内容，请通过右键单击“部分编辑器”进入该部分 -> 选中“抑制空白部分”复选框。

编辑：如果您的子报表确实返回记录，但只是没有*显示*，那么请尝试使用共享变量。为此，您首先需要考虑用于在子报表中显示记录的逻辑。这可能是在细节部分抑制公式中找到的任何逻辑，但它在很大程度上取决于您的特定子报表的格式。

现在，在子报表的报表标题中初始化一个共享 numbervar，然后使用上述逻辑在每次显示一行时递增它。

回到主报表中，您可以检查该变量的值以有条件地抑制子报表的部分。我说“可能”是因为 CR在查看抑制公式*之前*可能不会评估子报表的变量，而是试一试。您需要`whileprintingrecords;`在部分抑制公式中使用关键字来延迟其评估。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T01:27:57.737

您是否尝试过使用抑制公式？

右键单击**格式字段**> 检查**抑制**> 单击编辑公式**[x-2]**按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T19:08:23.670

很难遵循帖子中的所有内容，但如果数据相互冲突，则添加一个部分并将您的子报告放在该部分中，并确保选中可以增长。

如果您有要显示的静态数据，那么您可能需要创建 2 个子报表，一个包含静态数据，一个包含动态数据，如果为空则禁止显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-07T19:58:11.073

将 subReport 放在一个部分中，然后右键单击 Section=> Section Expert 然后在公共选项卡中选中 true 'Supress Blank Section'，如下图所示。 [![在此处输入图像描述](../Images/d79f67f66565ddd5e29815eff6321df8.png)](https://i.stack.imgur.com/kb1Jc.png)

# javascript - 从 ember.js 视图访问 DOM 元素的属性

> ID：12499921
> 
> 赞同：4
> 
> 时间：2012-09-19T17:32:25.313
> 
> 标签：javascript, ember.js, handlebars.js

如何从视图本身访问 ember.js 视图插入的 DOM 元素的属性。这是一个简短的例子。假设我有以下`cat.handlebars`模板：

```
{{#collection contentBinding="App.catsController"}}
  <div class="cat" {{bindAttr id="view.content.id"}}></div>
{{/collection}} 
```

在此视图中使用：

```
App.CatView = Ember.View.extend({
  templateName: 'cat',
  catsBinding: 'App.catsController',
  didInsertElement: () ->
    #need to get the id of each DIV that is being inserted to add some JavaScript for it
    console.log 'context it ', this.$()
}) 
```

`this.$()`返回一个嵌套非常深的对象，我在其中找不到我的 DIV 的任何迹象。`view.content.id`当我在函数内部时也没有定义`didInsertElement`。

重申我的问题，当我在视图中时，如何添加一些与视图插入的某些 DOM 元素相关的 Javascript 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T07:03:20.303

您可以使用 {{view.contentIndex}} 代替 {{view.content.id}}。由于您已将类名 cat 添加到您的 div 中，您可以使用 this.$('#index.cat') 访问它，其中 index 应替换为您要访问的内容的索引。

# javascript - jQuery 事件处理程序的 JavaScript 闭包

> ID：12499923
> 
> 赞同：3
> 
> 时间：2012-09-19T17:32:29.407
> 
> 标签：javascript, jquery

我有一个对象列表，每个对象都有一个 .bullet，它是一个 SPAN。我想将跨度上的单击绑定到处理程序，而不是使用 jQuery 对跨度执行特定操作。我看到一些我不理解的行为，所以我希望有人能解释发生了什么。基本上，第一个代码示例有效：

```
for (var i = 0 ; i< length ; i++) {

            (function(){
                dataNode = dataNodeList[i];

                var handler = function(e) {

                    e.data.node.bullet.firstChild.nodeValue = "- ";

                };

                $(dataNode.bullet).on("click",{node:dataNode},handler);

            })();

        } 
```

但是，第二个变体不起作用：

```
for (var i = 0 ; i< length ; i++) {

            (function(){
                dataNode = dataNodeList[i];

                var handler = function() {

                    dataNode.bullet.firstChild.nodeValue = "- ";

                };

                $(dataNode.bullet).on("click",handler);

            })();

        } 
```

在第二个例子中，

```
dataNode.bullet.firstChild.nodeValue = "- "; 
```

对我想要的 SPAN 的值没有影响。我希望 dataNode.bullet 仍然指向我想要更改的 SPAN，因为 JavaScript 关闭。那么，有人可以解释为什么会失败吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T17:47:10.980

Try this:

```
for (var i = 0 ; i< length ; i++) {
    (function(index){
        var dataNode = dataNodeList[index];

        var handler = function() {
            dataNode.bullet.firstChild.nodeValue = "- ";
        };

        $(dataNode.bullet).on("click",handler);
    })(i);
} 
```

The closure defines a new scope. This is necessary because your handler isn't called until after the loop has finished, so `i` is not part of the scope at the time it is called, or (in some cases) has the last possible value from the loop.

# sql - 在 sql server 中查询以检索行

> ID：12499924
> 
> 赞同：1
> 
> 时间：2012-09-19T17:32:45.637
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个包含以下 4 列的表：

*   ID
*   姓名
*   姓
*   电话

我想编写一个存储过程，它获取一个`id`as 参数，然后获取它的名称，`id`然后使用它`name`来获取它们的名称等于我在上一步中找到的名称的所有行！这是我的查询，我知道这是错误的，但我是 sql 命令的新手：

```
ALTER PROCEDURE dbo.GetAllNames
@id int
AS
    select name as Name from Users where id = @id
    -- i don't how to retrieve the names that are equal to Name
select * from Users where name = Name 
```

你能纠正我的问题并帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:37:10.987

```
SELECT by_name.name FROM Users AS by_id
  join Users AS by_name ON by_id.name = by_name.name
  where id = @id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:37:36.920

你可以简单地说

```
SELECT * FROM users WHERE name in (SELECT name from users where id = @id) 
```

这将处理具有 ID 的多条记录的情况。如果 ID 是主键，则可以将`IN`运算符替换为`=`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:39:42.237

试试这个 ：

```
ALTER PROCEDURE dbo.GetAllNames
@Id INT
AS
BEGIN
    SELECT * FROM Users WHERE [Name] IN (SELECT [Name] FROM Users WHERE Id = @Id)
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:34:55.910

您可以声明一个`@name`可以存储名称的变量....

```
 ALTER PROCEDURE dbo.GetAllNames
    @id int
    AS
    DECLARE @name nvarchar(50);
      select  @name =name from Users where id = @id;
      select * from Users where name =  @name; 
```

我刚刚根据您的问题风格提供了上述解决方案，但我强烈建议您在给定场景中以下列方式使用 JOIN：

```
 SELECT b.name FROM Users a
                INNER JOIN Users b
                ON a.name = b.name
   WHERE a.id = @id 
```

# asp.net - 我可以用母版页占位符制作一个 Div 标记吗？

> ID：12499927
> 
> 赞同：1
> 
> 时间：2012-09-19T17:32:50.617
> 
> 标签：asp.net, css, contentplaceholder

在我的 asp.net 项目中，我使用一个母版页并且有一个内容占位符；在我的子页面中，我想制作一个 div 标签，它应该包含我的所有窗口（宽度：100%；高度：100%；）。但是当我在我的 ContentPlaceHolder 中创建这个 div 标签时，它不是全屏的。我可以用 ContentPlcaeHolder 做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:42:04.140

如果您试图将其`div`包裹在所有子页面的内容中，我建议您将其包裹`ContentPlaceHolder`在`div`您的母版页中。

```
<div id="wrapper">
    <asp:ContentPlaceHolder ID="mainContent" runat="server">
    </asp:ContentPlaceHolder>
</div> 
```

然后`css`申请`#wrapper`。

# xml - XSL 字符串多重替换功能

> ID：12499931
> 
> 赞同：2
> 
> 时间：2012-09-19T17:33:00.800
> 
> 标签：xml, string, function, xslt, replace

如何使此功能进行多次更换？
exp：替换`aaa`为`111`和替换`bbb`为`222`...等

```
<xsl:call-template name="replace-string">
  <xsl:with-param name="text" select="sm:changefreq"/>
  <xsl:with-param name="replace" select="'aaa'" />
  <xsl:with-param name="with" select="'111ً'"/>
</xsl:call-template>

<xsl:template name="replace-string">
    <xsl:param name="text"/>
    <xsl:param name="replace"/>
    <xsl:param name="with"/>
    <xsl:choose>
      <xsl:when test="contains($text,$replace)">
        <xsl:value-of select="substring-before($text,$replace)"/>
        <xsl:value-of select="$with"/>
        <xsl:call-template name="replace-string">
          <xsl:with-param name="text" select="substring-after($text,$replace)"/>
          <xsl:with-param name="replace" select="$replace"/>
          <xsl:with-param name="with" select="$with"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

**@Mads Hansen**
我是新手..
最终代码会像下面的代码一样吗？

**索引.xml**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="index.xsl"?>
<t>The quick
brown fox</t> 
```

**索引.xsl**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
    <xsl:output omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <my:params xml:space="preserve">
        <pattern>
            <old>&#xA;</old>
            <new><br/></new>
        </pattern>
        <pattern>
            <old>quick</old>
            <new>slow</new>
        </pattern>
        <pattern>
            <old>fox</old>
            <new>elephant</new>
        </pattern>
        <pattern>
            <old>brown</old>
            <new>white</new>
        </pattern>
    </my:params>

    <xsl:variable name="vPats"
         select="document('')/*/my:params/*"/>

    <xsl:template match="text()" name="multiReplace">
        <xsl:param name="pText" select="."/>
        <xsl:param name="pPatterns" select="$vPats"/>

        <xsl:if test="string-length($pText) >0">
            <xsl:variable name="vPat" select=
            "$vPats[starts-with($pText, old)][1]"/>

            <xsl:choose>
                <xsl:when test="not($vPat)">
                    <xsl:copy-of select="substring($pText,1,1)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="$vPat/new/node()"/>
                </xsl:otherwise>
            </xsl:choose>

            <xsl:call-template name="multiReplace">
                <xsl:with-param name="pText" select=
                "substring($pText, 1 + not($vPat) + string-length($vPat/old/node()))"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:05:16.820

**这是针对多替换问题的完整 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
    <xsl:output omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>

    <my:params xml:space="preserve">
        <pattern>
            <old>&#xA;</old>
            <new><br/></new>
        </pattern>
        <pattern>
            <old>quick</old>
            <new>slow</new>
        </pattern>
        <pattern>
            <old>fox</old>
            <new>elephant</new>
        </pattern>
        <pattern>
            <old>brown</old>
            <new>white</new>
        </pattern>
    </my:params>

    <xsl:variable name="vPats"
         select="document('')/*/my:params/*"/>

    <xsl:template match="text()" name="multiReplace">
        <xsl:param name="pText" select="."/>
        <xsl:param name="pPatterns" select="$vPats"/>

        <xsl:if test="string-length($pText) >0">
            <xsl:variable name="vPat" select=
            "$vPats[starts-with($pText, old)][1]"/>

            <xsl:choose>
                <xsl:when test="not($vPat)">
                    <xsl:copy-of select="substring($pText,1,1)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:copy-of select="$vPat/new/node()"/>
                </xsl:otherwise>
            </xsl:choose>

            <xsl:call-template name="multiReplace">
                <xsl:with-param name="pText" select=
                "substring($pText, 1 + not($vPat) + string-length($vPat/old/node()))"/>
            </xsl:call-template>
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>The quick
brown fox</t> 
```

**产生了想要的正确结果**（快速 -> 慢速，棕色 -> 白色，狐狸 -> 大象，NL -> `<br/>`）：

```
The slow<br />white elephant 
```

**说明**：

1.  使用递归调用自身的命名模板。

2.  所有多个替换模式 --> 替换对都在单个外部参数中提供，为方便起见，此处将其内联指定为全局级元素`<my:params>`。

3.  递归获取源字符串中的每个字符（从左到右）并在字符串中的该位置找到以该字符开头的第一个模式。

4.  替换不仅可以是字符串，还可以是任何节点。在这种特定情况下，我们将每个 NL 字符替换为一个`<br/>`元素。

# ruby - 使用 Ruby Mechanize 下载文件作为附件

> ID：12499934
> 
> 赞同：1
> 
> 时间：2012-09-19T17:33:03.877
> 
> 标签：ruby, mechanize

我需要从特定网站获取报告的能力。下面的方法完成了我需要做的所有事情，唯一的问题是报告“report.csv”`content-disposition:filename=report.csv`在页面发布时在响应标题中返回“”（页面发布到自身）。

```
def download_report
  page = @mechanize.click(@mechanize.current_page().link_with(:text => /Reporting/))
  page.form.field_with(:name => "rep").option_with(:value => "adperf").click

  page.form_with(:name => "get-report").field_with(:id => "sasReportingQuery.dateRange").option_with(:value => "Custom").click

  start_date = DateTime.parse(@start_date)
  end_date = DateTime.parse(@end_date)

  page.form_with(:name => "get-report").field_with(:name => "sd_display").value = start_date.strftime("%m/%d/%Y")
  page.form_with(:name => "get-report").field_with(:name => "ed_display").value = end_date.strftime("%m/%d/%Y")
  page.form_with(:name => "get-report").submit
end 
```

据我所知，Mechanize 并没有在我能找到的任何地方捕获文件。有没有办法让 Mechanize 捕获和下载这个文件？

`@mechanize.current_page()`不包含文件，`@mechanize.history()`也没有显示文件 url 已提交给 Mechanize。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-15T16:33:41.957

检查返回页面的类`page.class`。如果是，`File`那么您可以保存它。

```
...
page = page.form_with(:name => "get-report").submit
page.class # File?
page.save('path/to/file') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:54:06.163

服务器似乎在告诉浏览器保存文档。“内容处置：文件名”是线索。Mechanize 不知道如何处理它，并会尝试读取和解析内容，如果它是 CSV，则将无法正常工作。

如果没有看到您正在使用的 HTML 页面，就不可能确切知道他们使用什么机制来触发下载。单击一个元素可能会触发一个 JavaScript 事件，而 Mechanize 不会处理该事件。或者，它可以向服务器发送一个表单，服务器以文档下载作为响应。无论哪种情况，您都必须弄清楚要发送的内容、原因以及具体定义您想要的文档的内容，然后使用该信息来请求文档。

Mechanize 不是下载附件的正确工具。使用 Mechanize 导航表单，然后使用 Mechanize 的嵌入式[Nokogiri](http://nokogiri.org)提取文档的 URL。

然后使用Ruby 的内置[OpenURI之类的](https://github.com/taf2/curb)[东西](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)来检索附件，或者参阅“[使用 WWW:Mechanize 将文件下载到磁盘而不先将其全部加载到内存中](https://stackoverflow.com/questions/4360043)”以获取更多信息。

# python - wxPython - 创建向导，可根据用户选择更改“下一页”页面

> ID：12499946
> 
> 赞同：2
> 
> 时间：2012-09-19T17:33:34.860
> 
> 标签：python, wxpython

我正在尝试使用 wxWizard 类创建一个简单的安装程序。在第一页 (page0) 我想有 3 个选项

```
 1\. Install (click Next goes to page install1) 
 2\. Upgrade (click Next goes to page upgrade1)
 3\. Remove (click Next goes to page remove1) 
```

由于我缺乏 OOP（和一般编程）经验，我无法理解如何创建 page0 对象来执行此操作。

如果我在 install1 之前创建 page0：未定义全局名称“install1”如果我在 page0 之前创建 install1：超出最大递归深度如果我在[http://xoomer.virgilio.it/infinity77/wxPython/wizard/wx查看类 SkipNextPage .wizard.html](http://xoomer.virgilio.it/infinity77/wxPython/wizard/wx.wizard.html)：有一个时髦的`GetNext()`方法也看不懂。

请帮忙！

```
import wx
import wx.wizard

class InstallPage_Dyn(wx.wizard.PyWizardPage):
    def __init__(self, parent, title):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self.next = self.prev = None

class InstallPage0(wx.wizard.PyWizardPage):
    def __init__(self, parent, title):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self.next = self.prev = None
        self.box = wx.RadioBox (self, -1, 'Choose one of the options below and hit Next\n', choices=['Install','Upgrade','Remove'], style = wx.VERTICAL | wx.EXPAND)

        # Set Next button based on user choice
        self.box.Bind(wx.EVT_RADIOBOX, self.SetNext(install1))

    # Setter and getter methods to specify Next and Previous buttons#     
    def SetNext(self, next):
        userchoice = self.box.GetSelection()
        if userchoice == 0: 
            self.SetNext(install1)
        elif userchoice == 1:
            self.SetNext(upgrade1)
        elif userchoice == 2:
            self.SetNext(remove1)

    def SetPrev(self, prev):
        return self.prev

    def GetNext(self):
        return self.next

    def GetPrev(self):
        return self.prev

# Define application and create the wizard
app = wx.App()

wizard = wx.wizard.Wizard(None, -1, "Installer")
wizard.SetPageSize((500,350))

# User selected install. Create the pages
install1 = InstallPage_Dyn(wizard, "Install")
upgrade1 = InstallPage_Dyn(wizard, "Upgrade")
remove1 = InstallPage_Dyn(wizard, "Remove")

# Create page instances
page0 = InstallPage0(wizard, "Installer")

wizard.RunWizard(page0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:17:22.717

试试这个

```
class InstallPage_Dyn(wx.wizard.PyWizardPage):
    def __init__(self, parent, title):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self.title = wx.StaticText(self,-1,title)
        self.title.SetFont(wx.Font(40,wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_BOLD))
        self.next = self.prev = None
    def SetPrev(self,prev):
        self.prev = prev
    def GetPrev(self):
        return self.prev

class InstallPage0(wx.wizard.PyWizardPage):
    def __init__(self, parent, title,optional_panels = {}):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self.prev = self
        self.next = optional_panels.values()[0]
        self.box = wx.RadioBox (self, -1, 'Choose one of the options below and hit Next\n', choices=optional_panels.keys(), style = wx.VERTICAL | wx.EXPAND)
        self.opts = optional_panels.keys()
        self.pages   = optional_panels.values()
        for p in self.pages:
            p.SetPrev(self)
        self.next = self.pages[0]
        self.optional_panels = optional_panels

    def GetNext(self):
        return self.pages[self.box.GetSelection()]
    def GetPrev(self):
        return self.prev
...
page0 = InstallPage0(wizard, "Installer",{'install':install1,'upgrade':upgrade1,'remove':remove1})

wizard.RunWizard(page0)
#app.MainLoop() 
```

这是完整的代码...命名`wiz.py`并运行它

```
import wx
import wx.wizard

class InstallPage_Dyn(wx.wizard.PyWizardPage):
    def __init__(self, parent, title):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self._title = title
        self.title = wx.StaticText(self,-1,title)
        self.title.SetFont(wx.Font(40,wx.FONTFAMILY_DEFAULT,wx.FONTSTYLE_NORMAL,wx.FONTWEIGHT_BOLD))
        self.next = self.prev = None
    def SetPrev(self,prev):
        self.prev = prev
    def GetPrev(self):
        return self.prev

class InstallPage0(wx.wizard.PyWizardPage):
    def __init__(self, parent, title,optional_panels = {}):
        wx.wizard.PyWizardPage.__init__(self, parent)
        self.prev = self
        self.next = optional_panels[0]
        options = [p._title for p in optional_panels]
        self.box = wx.RadioBox (self, -1, 'Choose one of the options below and hit Next\n', choices=options, style = wx.VERTICAL | wx.EXPAND)
        self.pages   = optional_panels
        for p in self.pages:
            p.SetPrev(self)
        self.next = install1
        self.optional_panels = optional_panels
    def SetPrev(self, prev):
        self.prev = prev
        return self.prev
    def GetNext(self):
        return self.pages[self.box.GetSelection()]
    def GetPrev(self):
        return self.prev

# Define application and create the wizard
app = wx.App(redirect=False)

wizard = wx.wizard.Wizard(None, -1, "Installer")
wizard.SetPageSize((500,350))

# User selected install. Create the pages
install1 = InstallPage_Dyn(wizard, "Install")
upgrade1 = InstallPage_Dyn(wizard, "Upgrade")
remove1 = InstallPage_Dyn(wizard, "Remove")

# Create page instances
page0 = InstallPage0(wizard, "Installer",[install1,upgrade1,remove1])

wizard.RunWizard(page0) 
```

# string - KSH：根据计数将字符串拆分为更小的子字符串

> ID：12499949
> 
> 赞同：1
> 
> 时间：2012-09-19T17:33:44.717
> 
> 标签：string, shell, split, ksh

KSH HP-SOL-Lin 无法使用 xAWK

我有几个很长的字符串，我想把它们分解成更小的子字符串。

是）我有的

```
String = "word1 word2 word3 word4 .....wordx" 
```

我想要的是

```
String1="word1 word2"
String2="word3 word4"
String3="word4 word5"
Stringx="wordx wordx+1"
etc..... 
```

如果我的字符串比 x 个单词长，我怎么能把它分解成不超过 x 的更小的字符串？我不知道每个字符串有多长。我们可以测试它，但它不会是一致的。

```
StrLen=`echo $string |wc -w` 
```

有些字符串超过 2000 个字，所以我不能使用 shell 数组，因为最多有 1024 个字段。

## 想法？

这是我根据以下评论得出的结论

```
FIELDS=`echo $String | wc -w`
((n=$FIELDS/2+1))
i=1

while [[ $i -le $n ]]; do
typeset STRING$i=`echo $String | cut -d" " -f$CUTSTART-$CUTEND`
do stuff

i=`expr $i+1`
CUTSTART=`expr $CUTSTART+1`
CUTEND=`expr $CUTEND+1`
done 
```

排版方面似乎仍然存在问题。假设

```
i=1
CUTSTART=1
CUTEND=2
String=one two three

myserver> typeset STRING=`echo $String | cut -d" " -f$CUTSTART-$CUTEND`
myserver> echo $STRING
myserver> one two
myserver>
myserver> typeset STRING$i=`echo $String | cut -d" " -f$CUTSTART-$CUTEND`
myserver> echo $STRING1
myserver> one 
```

$i 弄乱了我的 echo|cut 命令是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:17:38.533

这是一个用于`read`一次提取两个单词的循环：

```
# Take advantage of the fact that ksh doesn't execute
# read in a subshell.
i=1
String="one two three four five six seven eight"
while echo $String | read w1 w2 w3; do
    typeset "String$i=$w1 $w2"
    if [ -z $w3 ]; then
        break;
    fi
    String=$w3
    let i=i+1
done
echo $String1
echo $String2
echo $String3
# etc. 
```

# r - 在 R 中，当使用分配存储中间输出时，foreach 循环（doSNOW）之间是否存在通信危险？

> ID：12499951
> 
> 赞同：2
> 
> 时间：2012-09-19T17:34:09.260
> 
> 标签：r, foreach, parallel-processing, parallel-foreach

我想创建一个使用赋值来存储中间输出 (p) 的函数。此中间输出用于以下语句。我希望使用 doSNOW 和 foreach 并行化所有内容，并且我不希望在 forarch 循环的迭代之间传递中间输出。我不想将中间输出存储在列表中（例如`p[[i]]`），因为那样我必须更改大量代码。

*   **问题 1：** foreach 循环的另一次迭代将使用中间输出 (p) 是否存在危险？
*   **问题2：**如果是，什么时候会发生这种情况以及如何预防？

这是我的意思的一个例子：

```
install.packages('foreach')
library('foreach')

install.packages('doSNOW')
library('doSNOW')

NbrCores <- 4
cl<-makeCluster(NbrCores) 
registerDoSNOW(cl)

test <- function(value){
   foreach(i=1:500) %dopar% {
      #some statement based on parameter 'value'
      p <- value
      #some statement that uses p
      v <- p
      #other statements
  }
}

test(value=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:48:42.323

我相信并行计算中使用的每个节点都在自己的 R 进程中运行。因此，一个节点的变量不会影响另一个节点的结果。一般来说，进程之间有可能进行通信。然而 foreach 只迭代它给定的序列，在其中一个节点中独立地执行序列中的每个项目。

# php - Magento：在 PHTML 模板中创建临时变量？

> ID：12499956
> 
> 赞同：0
> 
> 时间：2012-09-19T17:34:38.873
> 
> 标签：php, magento

`.phtml`在遵守 Magento 架构的同时，在模板中创建临时变量的最佳方法是什么？

## 例子

文件：`/template/catalog/product/view.phtml`

```
<?php
$myVar = $_product->getAttributeText('color');

if ( empty($myVar) ) {
    // does not exist
} else {
    // show the attribute
}
?> 
```

除了这个表达式之外，其他任何地方都不需要 $myVar。

注意：我不是在寻找替代方法来编写避免创建变量的代码。为了便于讨论，假设需要创建一个临时变量。

## 应该`$myVar`是什么？

1.  $myVar
2.  $namespaced_myVar
3.  $_myVar
4.  Magento 的注册表模式[http://alanstorm.com/magento_registry_singleton_tutorial](http://alanstorm.com/magento_registry_singleton_tutorial)
5.  还有什么...

寻找一个“真实世界”的解决方案，而不是一个纯粹的答案。你会怎么写这个？

## 回答

结合 Ben 的回答和 Alan/Vinai 的对话中的这一点[https://twitter.com/VinaiKopp/status/225318270591442945](https://twitter.com/VinaiKopp/status/225318270591442945) - 这就是我要写的方式：

如果需要的不仅仅是基本逻辑，我将使用新方法扩展该类。

否则，我将在本地范围内创建新的变量，如下所示：

```
$mynamespace_myVar = 'xyz'; 
```

这就是我喜欢它的地方：

*   `$mynamespace_`提醒我我创建了这个而不是Magento
*   这也使得其他开发人员*不太*可能覆盖我的变量

这是我不喜欢的：

*   它不纯并且可能会损坏，但是对于整个站点，我可能只需要 <5 次，因此可以合理地屏蔽它。
*   不`$_`用于显示 var 是该模板的本地变量不是“Magento 方式”，但它使代码更具可读性。

所以我的模板大多会有这样的代码：

```
$gravdept_someNiceData = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:46:54.633

一些历史：[https ://stackoverflow.com/a/3955757/833795](https://stackoverflow.com/a/3955757/833795)

关于 1、2 和 3：区分这些选择涉及进入“纯粹答案”领域，因为它们都是*局部*变量。

不需要使用注册表模式，因为所需的范围被声明为模板呈现的本地范围。

根据您的示例，Magento 中的适当构造可能是：

```
<?php if ($_product->getColor()): ?>
    <h2> I HAZ COLOR </h2>
<?php else: ?>
    <h2> I NO HAZ COLOR </h2>
<?php endif ?> 
```

If there is anything but the simplest test of return values it's appropriate to add this logic as a method of the block class (using a rewrite), as it is in fact view logic which you've mentioned should be local to this context only.

# jquery - 需要防止默认jquery

> ID：12499958
> 
> 赞同：1
> 
> 时间：2012-09-19T17:34:40.487
> 
> 标签：jquery

假设未设置 cookie，我需要停止提交表单（添加到购物车）

```
jQuery('input[name=addtocart]').click(function() {  
    ...
switch(curr_active_table){
      case '1': {
        ...
    alert(" Please select a Lense Option first before Adding to cart");
                event.preventDefault();
    break;  
} 
```

...

一切都像冠军一样工作，直到我达到需要阻止偶数提交的地步

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T17:35:32.550

您必须传入 [event] 参数

```
jQuery('input[name=addtocart]').click(function(event) {  //<-- see event inside function()
    ...
switch(curr_active_table){
      case '1': {
        ...
    alert(" Please select a Lense Option first before Adding to cart");
                event.preventDefault();
    break;  
}); 
```

然后强制输入键默认点击动作

```
jQuery('form').keypress(function(event) {  //<-- listen for keypress inside form
    if (e.keyCode == 13) { // <-- if enter default to click action 
        jQuery('input[name=addtocart]').click();//<- trigger click action
        return false;// or event.preventDefault();
    }
}); 
```

正如您在此小提琴中看到的那样..这将阻止表单内的输入键提交

[http://jsfiddle.net/8mYnN/1/](http://jsfiddle.net/8mYnN/1/)

@Juan Mendes - 好的，现在我明白你在说什么了。如果你只是在表单的提交事件中做所有事情，你就不需要听 enter keypress

```
jQuery('formselector').submit(function(event) {  //<-- see event inside function()
        ...
    switch(curr_active_table){
          case '1': {
            ...
        alert(" Please select a Lense Option first before Adding to cart");
                    event.preventDefault();
        break;  
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:38:16.887

[Wirey 的答案有效，另一种方法是从处理程序http://jsfiddle.net/aWPKp/](http://jsfiddle.net/aWPKp/)返回 false

```
$('input[name=addtocart]').click(function(){
  return false;    
});​ 
```

**更新**由于这是一个表单提交，您应该处理提交事件，以便在您点击提交按钮时它也可以工作。[http://jsfiddle.net/aWPKp/1/](http://jsfiddle.net/aWPKp/1/)

```
$('#formId').submit(function(){
  return false;    
});​ 
```

# javascript - 查找字符并用 HTML 换行

> ID：12499959
> 
> 赞同：3
> 
> 时间：2012-09-19T17:34:45.020
> 
> 标签：javascript, jquery, html, regex

我试图`//`在文档中找到（斜杠）并用`span`.

我试过了

```
var slashes = "//";
/slashes+/ 
```

所以输出应该是：

```
Hello There! I Am <span class="slashes">//</span> An Alien 
```

使用 jQuery `.replace()`，`:contains`但没有任何反应，我对调节器表达式不熟悉，可以正确执行此操作。我该怎么做？

编辑：我尝试了什么： [这个问题的解决方案](https://stackoverflow.com/questions/1788939/jquery-find-and-wrap-textnode-with-some-element)不起作用：

```
function slashes($el) {

   $el.contents().each(function () {
       dlbSlash = "//";
       if (this.nodeType == 3) { // Text only
           $(this).replaceWith($(this).text()
               .replace(/(dlbSlash)/gi, '<span class="slashes">$1</span>'));
       } else { // Child element
           slashes($(this));
       }

   });
}

slashes($("body")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:48:51.150

您需要转义正则表达式中的斜杠。尝试

```
var mystring = "adjfadfafdas//dsagdsg//dsafda"
mystring.replace(/\/\//g,'<span class="slashes">\/\/</span>'); 
```

应该输出

```
"adjfadfafdas<span class="slashes">//</span>dsagdsg<span class="slashes">//</span>dsafda" 
```

如果要替换 h2 和 p 标签中的斜杠，可以像这样循环遍历它们：

```
$('h2, p').each(function(i, elem) { 
    $(elem).text(
        $(elem).text().replace(/\/\//g,'<span class="slashes">\/\/</span>'));
}); 
```

不过，这将消除您在 p 和 h2 标签中可能拥有的任何其他 html 标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:11:53.190

这是另一种方法

```
//Find html inside element with id content
var html = $('#content').html();
//Replace // with <span style='color:red'>//</span>
html = html.replace(/\/{2}/g,"<span style='color:red'>$&</span>");
//Return updated html back to DOM
$('#content').html(html);​ 
```

这是[演示](http://jsfiddle.net/CNFdC/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T18:21:29.280

我想你找对地方了。唯一要修复的是您的正则表达式：

```
.replace(/\/\//g, '<span class="slashes">$1</span>')); 
```

关注文本节点（类型 3）很重要，而不是对可能破坏页面的正文 innerHTML 进行全局替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T18:01:51.703

如果您只想对单个应用此类替换`//`，请使用

```
mystring = mystring.replace(/(\/{2})/g, "<span class=\"slashes\">$1</span>"); 
```

但是，如果您想将其应用于 2 个或更多斜杠，请使用

```
mystring = mystring.replace(/(\/{2,})/g, "<span class=\"slashes\">$1</span>"); 
```

但是如果你想将它应用于任何数量的斜杠（例如`//`，`////`等），那么你需要使用

```
mystring = mystring.replace(/((?:\/{2})+)/g, "<span class=\"slashes\">$1</span>"); 
```

[在这里](http://jsfiddle.net/zKBAr/)测试代码。

# c# - 从查询转换为方法

> ID：12499965
> 
> 赞同：0
> 
> 时间：2012-09-19T17:35:11.037
> 
> 标签：c#, linq

如何将以下代码转换为方法运算符：

```
var myOrders = from c in customers
               where c.Field<string>("Region") == "WA"
               from o in orders
               where c.Field<string>("CustomerID") == o.Field<string>("CustomerID")
               && (DateTime)o["OrderDate"] >= cutoffDate
               select new { 
                  CustomerID = c.Field<string>("CustomerID"), 
                  OrderID = o.Field<int>("OrderID") 
               }; 
```

- - - - -或者 - - - - -

```
 var myOrders = from c in customers
               where c.Region == "WA"
               from o in orders
               where c.CustomerID == o.CustomerID
               && o.OrderDate >= cutoffDate
               select new { 
                  CustomerID = c.CustomerID, 
                  OrderID = o.OrderID 
               }; 
```

对象形式的相同代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:42:43.453

我实际上会将其重写为连接 - 可能通过中间变量：

```
var washingtonCustomers = customers.Where(c => c.Field<string>("Region") == "WA");
var recentOrders = orders.Where(o => (DateTime)o["OrderDate"] >= cutoffDate);

var query = washingtonCustomers.Join(recentOrders, 
                 c => c.Field<string>("CustomerID"),
                 o => o.Field<string>("CustomerID"),
                 (c, o) => new { 
                     CustomerID = c.Field<string>("CustomerID"), 
                     OrderID = o.Field<int>("OrderID") 
                 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:40:25.033

您是否只想使用功能性 Linq 语法而不是查询语法？那看起来像：

```
var myOrders = customers
  .Where(c => c.Region == "WA")
  .SelectMany(c => 
    orders
      .Where(o => (o.CustomerID == c.CustomerID)
        && (o.OrderDate > cutoffDate))
      .Select(o => new {
           CustomerID = c.CustomerID,
           OrderID = o.OrderID
         })
   ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:40:45.030

您可以尝试使用此代码 - 基于 `IEnumerable<KeyValuePair<string, Int32>`

```
public  IEnumerable<KeyValuePair<string, Int32>> YourQuery(DateTime date, string code)
{

           var result = 
           from c in customers
           where c.Field<string>("Region") == code

           from o in orders
           where c.Field<string>("CustomerID") == o.Field<string>("CustomerID")
               && (DateTime)o["OrderDate"] >= date

           select new 
           { 
              CustomerID = c.Field<string>("CustomerID"), 
              OrderID = o.Field<int>("OrderID") 
           };

           return result;
} 
```

# c# - 从按钮功能区访问 Excel 工作表

> ID：12499967
> 
> 赞同：9
> 
> 时间：2012-09-19T17:35:14.350
> 
> 标签：c#, vsto, ms-office, ribbon, excel-addins

好的，所以我得到了自动生成的**主插件（***附件 1*），还有我的**功能区**（*附件 2*），我想从该功能区访问当前活动的 Excel 表。但`System.Windows.Forms.Application`不包含 的定义`ActiveSheet`。

### 附件一：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using Excel = Microsoft.Office.Interop.Excel;
using Office = Microsoft.Office.Core;
using Microsoft.Office.Tools.Excel;
using System.Windows.Forms;

namespace ExcelAddIn1
{
public partial class ThisAddIn
{
    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {

    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }
    public void doStuff()
    {

    }

    #endregion

}
} 
```

附件二：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Office.Tools.Ribbon;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;
using Office = Microsoft.Office.Core;
using Microsoft.Office.Tools.Excel;
using System.Windows.Forms;

namespace ExcelAddIn1
{
public partial class Ribbon1
{
    private void Ribbon1_Load(object sender, RibbonUIEventArgs e)
    {

    }

    private void button1_Click(object sender, RibbonControlEventArgs e)
    {
        MessageBox.Show("Test");
        Excel.Worksheet activeWorksheet = ((Excel.Worksheet)Application.ActiveSheet);
        Excel.Range firstRow = activeWorksheet.get_Range("A1");
        firstRow.EntireRow.Insert(Excel.XlInsertShiftDirection.xlShiftDown);
        Excel.Range newFirstRow = activeWorksheet.get_Range("A1");
        newFirstRow.Value2 = "This text was added by using code";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T19:08:27.560

您需要[`IRibbonControl.Context`](http://msdn.microsoft.com/en-us/library/microsoft.office.core.iribboncontrol.context.aspx)从[`RibbonControlEventArgs`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.ribbon.ribboncontroleventargs.aspx)参数中获取。此上下文表示[`Excel.Window`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.window.aspx). 然后您可以访问活动[`Window.Application`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.window.application.aspx)属性。

```
private void button1_Click(object sender, RibbonControlEventArgs e)
{
    Excel.Window window = e.Control.Context;
    MessageBox.Show("Test");
    Excel.Worksheet activeWorksheet = ((Excel.Worksheet)window.Application.ActiveSheet);
    Excel.Range firstRow = activeWorksheet.get_Range("A1");
    firstRow.EntireRow.Insert(Excel.XlInsertShiftDirection.xlShiftDown);
    Excel.Range newFirstRow = activeWorksheet.get_Range("A1");
    newFirstRow.Value2 = "This text was added by using code";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-03T09:20:11.293

如果这是 VSTO Excel 加载项，也许您应该使用：

```
 Globals.ThisAddIn.Application.ActiveSheet 
```

问候，约尔格

# c# - 在应用了 DataMember 属性的属性中抛出异常是一种好习惯吗？

> ID：12499968
> 
> 赞同：1
> 
> 时间：2012-09-19T17:35:15.013
> 
> 标签：c#, .net, datacontractserializer, datacontract, xml-deserialization

`DataContract`和`DataMember`属性也可以用于将对象序列化为文件和反序列化，通过使用`DataContractSerializer`. 假设我们有一个具有以下私有字段和公共属性的类。

```
public class MyClass
{
    private int positiveValue;

    public int PositiveValue
    {
        get { return positiveValue; }
        set
        {
            if (value < 1)
                throw new ArgumentOutOfBoundException(...);
            positiveValue = value;
        }
    }
} 
```

现在假设我们有一个包含先前序列化对象状态的 XML 文件，并假设用户修改了这个文件，为属性指定了不正确的值（即非正值）`PositiveValue`。在反序列化过程中会抛出异常，因为文件中的值无效。

假设我们要反序列化`MyClass`文件中的对象列表：如果某个对象无效，则会引发异常。是否可以确保`DataContractSerializer`忽略无效对象？此外，考虑到刚才解释的问题，在应用了 DataMember 属性的属性中抛出异常是一种好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T12:37:06.363

如果您想在设置属性时验证数据，但想在反序列化过程中绕过这些验证，您可以使用`DataMemberAttribute`而不是属性标记属性的支持字段。这将导致`DataContractSerializer`直接在字段（而不是属性）中设置值，并且不会引发任何验证异常。

```
[DataMember]
private int positiveValue;

public int PositiveValue
{
    get { return positiveValue; }
    set
    {
        if (value < 1)
            throw new ArgumentOutOfBoundException(...);
        positiveValue = value;
    }
} 
```

请注意，支持字段可以是私有的（否则，该属性将没有多大意义）。这适用于`DataContractSerializer`.

> 此外，考虑到刚才解释的问题，在应用了 DataMember 属性的属性中抛出异常是一种好习惯吗？

这取决于您是否要允许在应用程序中包含具有无效数据的对象。不允许设置无效数据的好处是您不必每次使用对象时都检查它，但在这种情况下，您必须检查任何用户输入并在加载数据时为异常做好准备。但是，我不认为在数据成员属性中抛出异常是错误的。这只是一个设计决定的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:41:52.627

就列表而言，不，您不能让 DCS 忽略无效对象。如果发生异常，整个反序列化将被中止。如果它没有抛出，它将被添加到您的列表中。

我会考虑在反序列化之后检查有效性。在某些情况下，您可以只说“忽略列表中的无效项目”，但坦率地说，在大多数情况下，如果有*任何*问题，您只想拒绝整个事情。

# c# - C# 无论如何都会在单击按钮后自动中断

> ID：12499971
> 
> 赞同：0
> 
> 时间：2012-09-19T17:35:26.873
> 
> 标签：c#, winforms

如果我有一个项目，但我不知道设计如何与代码对应?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T17:36:24.250

您可以调用 来`System.Diagnostics.Debugger.Break()`告诉任何附加的调试器在该行中断。

如果没有附加，Windows 将尝试启动任何已注册的调试器。如果未注册，您将收到应用程序的异常/崩溃。所以，不要把它留在生产代码中:)

例如（根据 icemanind 的评论）

```
#if DEBUG
    Debugger.Break();
#endif 
```

如果您想在单击*任何*按钮时中断，它会变得有点棘手。最简单的事情是编写一个`Button`包装类并覆盖`OnClick`并将您的 Break 调用放在那里。例如：

```
public class ButtonWedge : Button
{
    protected override void OnClick(System.EventArgs e)
    {
        Debugger.Break();
        base.OnClick(e);
    }
} 
```

添加该类后，您可以将其拖放到设计图面上。但是，如果您已经有了代码，则可以编辑 Designer.cs 文件并替换`System.Windows.Forms.Button`为`ButtonWedge`.

进入后`OnClick`，您可以`Click`通过使用键查看基类`Events`数组来查看事件的去向`Control.EventClick`。这将包含一个多播委托，您可以查看`Method`和`Target`属性以找出订阅此`Click`事件的内容。换句话说，运行时点击处理程序的名称将是：

```
string handlerName = base.Events[Control.EventClick].Target.GetType().FullName + '.'
   + base.Events[Control.EventClick].Method.Name; 
```

它并没有真正在特定`Click`事件中设置断点，而是让您知道发生了什么以及在哪里......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:58:11.540

为什么你不能在设计模式下双击按钮。它在处理点击事件的函数上的代码中打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:44:09.483

如果您的意思是项目中程序上的按钮，请使用彼得的答案。如果您问是否可以在键盘或鼠标上制作一个按钮导致执行中断或暂停，您可以按 Ctrl+Alt+Pause。

# r - 使用 R 优化最小订货量

> ID：12499979
> 
> 赞同：1
> 
> 时间：2012-09-19T17:35:57.013
> 
> 标签：r, mathematical-optimization

我是优化新手，我需要在一个简单的场景中实现它：

有一家汽车制造商可以生产 5 种型号的汽车/货车。与可以生产的每种型号相关的是所需的工时数和所需的钢材吨数，以及从销售一辆此类汽车/货车中获得的利润。制造商目前拥有固定数量的钢材和劳动力，应该以优化总利润的方式使用。

这是我挂断的部分-每辆车也有最低订购量。公司必须在生产/销售该型号在经济上可行之前制造一定数量的每种型号。如果不是最终条件，这将很容易发送到`optim()`，因为可以为 `lower = ...' 参数提供一个具有最小订购数量的向量，但它不会将 0 视为选项。有人可以帮我解决这个问题，考虑到最小订单，但仍然允许订单为 0？以下是我组织相关信息/限制的方式：

```
Dorian <- data.frame(Model = c('SmCar', 'MdCar', 'LgCar', 'MdVan', 'LgVan'),
                   SteelReq = c(1.5,3,5,6,8), LabReq=c(30,25,40,45,55),
                   MinProd = c(1000,1000,1000,200,200),
                   Profit = c(2000,2500,3000,5500,7000))

Materials <- data.frame(Steel=6500,Labor=65000)

NetProfit<-function(x) {
  x[1]->SmCar
  x[2]->MdCar
  x[3]->LgCar
  x[4]->MdVan
  x[5]->LgVan
  np<-sum(Dorian$Profit*c(SmCar,MdCar,LgCar,MdVan,LgVan))
  np
}
LowerVec <- Dorian$MinProd #Or 0, how would I add this option?
UpperVec <- apply(rbind(Materials$Labor/Dorian$LabReq, 
                   Materials$Steel/Dorian$SteelReq),2,min)
# Attempt at using optim()
optim(c(0,0,0,0,0),NetProfit,lower=LowerVec, upper=UpperVec) 
```

最终，我想用已知分布的随机变量替换参数，例如 Profit 和 LabReq（需要人工），并将其包装到一个函数中，该函数将 Steel 和 Labor 作为输入以及随机变量的参数。我将要进行多次模拟，然后在给定利润和所需劳动力的特定参数的情况下找到平均解决方案，因此理想情况下，这种优化也会很快，以便我可以执行模拟。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T01:54:15.507

如果您不熟悉线性规划，请从这里开始：[http ://en.wikipedia.org/wiki/Linear_programming](http://en.wikipedia.org/wiki/Linear_programming)

还可以查看有关混合整数编程的部分[http://en.wikipedia.org/wiki/Mixed_integer_programming#Integer_unknowns](http://en.wikipedia.org/wiki/Mixed_integer_programming#Integer_unknowns)。那时您尝试解决的变量并非都是连续的，还包括布尔值或整数。

* * *

从各个方面来看，您的问题都是混合整数规划（准确地说，是整数规划），因为您正在尝试求解整数：每个模型要生产的车辆数量。

有已知的算法可以解决这些问题，谢天谢地，它们已经为您打包到 R 包中。`Rglpk`是其中之一，我将向您展示如何制定您的问题，以便您可以使用它的`Rglpk_solve_LP`功能。

* * *

假设`x1, x2, x3, x4, x5`您要解决的变量是：为每个模型生产的车辆数量。

你的目标是：

`Profit = 2000 x1 + 2500 x2 + 3000 x3 + 5500 x4 + 7000 x5`.

你的钢约束是：

`1.5 x1 + 3 x2 + 5, x3 + 6 x4 + 8 x5 <= 6500`

您的劳动力限制是：

`30 x1 + 25 x2 + 40 x3 + 45 x4 + 55 x5 <= 65000`

现在是困难的部分：对最低生产要求进行建模。我们以第一个为例：最低生产要求`x1`要求至少生产 1000 辆汽车（`x1 >= 1000`）或根本不生产汽车（`x1 = 0`）。为了对该要求进行建模，我们将引入一个布尔变量`z1`。通过布尔值，我的意思是`z1`只能取两个值：`0`或`1`. 需求可以建模如下：

`1000 z1 <= x1 <= 9999999 z1`

为什么这行得通？考虑 的两个可能值`z1`：

1.  if `z1 = 0`, then`x1`被迫`0`
2.  如果`z1 = 1`then`x1`被迫大于`1000`（最低生产要求）并且小于我选择的任意大数字 9999999。

对每个模型重复此操作，您将不得不引入类似的布尔变量 ( `z2, z3, z4, z5`)。最后，求解器不仅要求解 ，`x1, x2, x3, x4, x5`还要求解`z1, z2, z3, z4, z5`。

* * *

将所有这些付诸实践，这是解决问题的代码。我们将求解向量`x = (x1, x2, x3, x4, x5, z1, z2, z3, z4, z5)`

```
library(Rglpk)

num.models <- nrow(Dorian)

# only x1, x2, x3, x4, x5 contribute to the total profit
objective  <- c(Dorian$Profit, rep(0, num.models))

constraints.mat <- rbind(
    c(Dorian$SteelReq, rep(0, num.models)),                    # total steel used
    c(Dorian$LabReq,   rep(0, num.models)),                    # total labor used
    cbind(-diag(num.models), +diag(Dorian$MinProd)),           # MinProd_i * z_i
    cbind(+diag(num.models), -diag(rep(9999999, num.models)))) # x_i - 9999999 x_i

constraints.dir <- c("<=",
                     "<=",
                     rep("<=", num.models),
                     rep("<=", num.models))

constraints.rhs <- c(Materials$Steel,
                     Materials$Labor,
                     rep(0, num.models),
                     rep(0, num.models))

var.types <- c(rep("I", num.models),  # x1, x2, x3, x4, x5 are integers
               rep("B", num.models))  # z1, z2, z3, z4, z5 are booleans

Rglpk_solve_LP(obj   = objective,
               mat   = constraints.mat,
               dir   = constraints.dir,
               rhs   = constraints.rhs,
               types = var.types,
               max   = TRUE)

# $optimum
# [1] 6408000
#
# $solution
# [1] 1000    0    0  202  471    1    0    0    1    1
#
# $status
# [1] 0 
```

因此，最佳解决方案是为每种型号创建 (1000, 0, 0, 202, 471) 辆汽车，总利润为 6,408,000。

# iphone - 核心数据、模型迁移和通用框架

> ID：12499989
> 
> 赞同：0
> 
> 时间：2012-09-19T17:36:28.557
> 
> 标签：iphone, objective-c, ios, core-data, core-data-migration

我正在使用链接[https://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)中的通用框架。它包括核心数据托管对象模型和框架本身内部的其他模型类。但是，我在迁移模型时遇到了严重的麻烦。我有一个像 Model.xcdatamodeld 这样的 momd 文件，里面是版本化模型，命名为 1.xcdatamodel、2.xcdatamodel、3.xcdatamodel 等。我还将模型包含在库内构建阶段的编译源中。

我还为模型设置了选项以自动推断迁移。虽然模型在框架内，但它需要在主应用程序包内进行一些引用，因此我创建了一个链接来指向框架内的文件。但是，我无法让迁移工作。是否有一些严重的事情，我遗漏了或者无法引用框架内的模态来自动迁移。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:26:31.043

我有解决问题的办法。然而，它看起来很像一个黑客。我现在直接使用模态版本引用模型，

```
NSURL *modelURL = [[[NSBundle mainBundle] resourceURL] URLByAppendingPathComponent:@"Modals.momd/3.mom"];
_managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL]; 
```

但是，我对这个解决方案不是很满意。有没有更好的方法来实现这一点？

# maven - 为 Java 项目设置暂存流程

> ID：12499994
> 
> 赞同：2
> 
> 时间：2012-09-19T17:36:51.033
> 
> 标签：maven, jenkins, hudson, build-process, gradle

我目前有大量具有复杂依赖结构的项目，由 50 多名开发人员使用 Maven 2/3 与 Nexus 和 Jenkins 开发。我们以更快的速度进行开发，而不是我们构建和部署具有 SNAPSHOT 依赖项的版本。大多数情况下，我们不能等待一个团队或另一个团队在必须部署之前构建发布版本。由于这个原因，我们遇到了许多关于错误和在制品进入生产的问题，并且不知道这些 SNAPSHOTS 中有哪些变化。

我要做的是消除 SNAPSHOTS 并使用versions-maven-plugin 转向自动发布，并实施发布暂存策略。

问题就在这里。对于开发人员和 CI 构建，需要将其配置为解决来自“Staging”和“Release”的依赖关系，并仅发布到“Staging”。然后我们希望能够“提升”构建为发布的版本，重新构建它以解决来自“发布”的依赖关系并发布到“发布”（最初这将是手动提升，但我们也可能希望自动化） . 这一切听起来合理吗？

我不想使用 maven-release-plugin，因为我们之前尝试过使用它，而且我们不喜欢它自动修改 pom 并在我们的 scm 中进行更改，从而触发更多构建的事实。

此外，甚至有没有办法告诉 maven 使用一个存储库进行解析，而另一个存储库用于发布？我可以用 gradle 做到这一点吗？

对此的任何评论/想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T18:04:05.643

这听起来很像我的构建系统。

我使用 gradle 和 2 个单独的 nexus 存储库（“发布”存储库、1 个暂存和 1 个最终存储）来执行此操作。该构建具有目标成熟度的概念，它使用它来计算版本号（使用语义版本控制），因此 RC 构建产生类似 1.0.0-rc1 的版本，最终构建产生类似 1.0.0 的版本。然后，我们以不同的方式（testng 组、黄瓜标签等）标记测试，以便测试的不同部分在不同的时间运行。构建根据目标成熟度决定依赖或发布到哪些存储库，因此可以确保仅使用足够成熟的工件。

这被配置为通过 teamcity 构建链自动运行，因此如果需要，某些核心库中的提交会通过下游构建并继续进行集成测试/部署（通过 rundeck 通过其 java api 通过一组 gradle 任务）。

Gradle 发布和解析存储库是单独配置的，因此可以不同。同样可以在 Maven 中完成。

例如，给定一个依赖图，如

corelib -> mylib -> myapp

每个事物都有一组与它们相关联的测试，这些测试被标记为 beta 或 rc。目的是生成 RC 的构建是通过 beta 测试的构建（即，如果您通过 beta，那么您已经足够成熟，可以成为 RC）并且构建是快速完成的构建（例如，仅进行单元测试）而 rc 测试（生成最终构建）可能会进行一些集成测试或更长时间运行的测试。这个定义是我们自己的，完全是任意的，你可以做任何你喜欢的区分。只有当您对产品有一定的信心水平时，我们才会应用越来越严格和/或持久的测试。

然后我们设置一个构建链，以便 rc 构建依赖于上游 rc 构建，最终构建依赖于上游最终构建和您自己的 rc 构建

IE

```
 --> mylib final --
           /                   \
mylib rc --                     --> myapp final
           \                   /
             --> myapp rc ----- 
```

等等。在这个例子中，流程是

*   提交对 mylib 的更改
*   mylib rc 构建运行
    *   运行 beta 测试
    *   将结果发布到 rc 存储库
*   mylib final 和 myapp rc 可以并行运行
*   mylib 最终构建运行
    *   运行 rc 测试
    *   将结果发布到最终存储库
*   myapp rc 构建运行
    *   取决于 rc 存储库，因此获取以前 mylib rc 构建的结果
    *   运行 beta 测试
*   myapp 最终运行
    *   取决于最终存储库，因此获取先前 mylib 最终构建的结果
    *   运行 rc 测试

每个点的版本号都是通过询问源代码控制来计算的

依赖，在我们自己的人工制品上，是动态的（例如 ivy 术语中的 1.0.+），major.minor 是静态设置的（在源代码控制中）并且构建留给自己产生补丁和候选编号，即 myapp 1.0 将取决于我的库 1.0.+ 。IMO 将 2 个独立的存储库作为过滤机制要简单得多，而不必深入研究 gradle/ivy 中的解析逻辑来过滤掉我们不想要的存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:46:37.767

查看[maven-version-plugin](http://mojo.codehaus.org/versions-maven-plugin/lock-snapshots-mojo.html)，特别是锁定/解锁快照目标。它们可以帮助确定程序集正在使用哪些依赖项，并且对您来说可能就足够了。

如果不是，是的 - maven 可以使用[暂存存储库](https://maven.apache.org/plugins/maven-stage-plugin/)，但如果您想要暂存的任何内容也被拉到本地开发人员存储库中，它可能会导致混乱。

我们现在用来解决类似问题的是一个“脚本化”，有点相当于 maven-release-plugin（它实际上调用它来进行某些操作），以及一个尴尬的版本控制方案：我们的开发分支保持 1.2-SNAPSHOT，但是我们发布/发布的版本使用不同的版本控制方案（1.2.3、1.2.4）。我们的脚本也标记了 git。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:09:42.690

我建议不要使用 maven 发布插件，也不要使用快照。看[这里](http://www.axelfontaine.com/2011/01/maven-releases-on-steroids-adios.html)以快速干净的方式释放。

# c# - 表单认证：基于用户类别的页面访问

> ID：12499997
> 
> 赞同：0
> 
> 时间：2012-09-19T17:37:05.030
> 
> 标签：c#, asp.net, .net, login, web-config

我有两个页面：`Members.aspx`和`Admins.aspx`. 我想让未登录的用户看不到他们，任何登录的用户都可以看到第一个，只有某些用户可以看到两者。

在登录时从代码中检测到用户的类别（“成员”或“管理员”），并将其放入会话变量中。

我可以使用表单身份验证轻松授予任何登录用户对某些页面的访问权限（基本上如此[处所述](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)），但是我应该如何设计我`web.config`的以便考虑不是用户名而是他的类别？

请注意，用户可以随时更改他们的类别，所以我不能硬编码他们的名字，我需要它是独立于数据库的，所以我将坚持表单身份验证登录模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:46:03.053

My suggestion is to use Role-based authentication. A user can have one or more roles. .NET has classes to help you manage users along with their roles.

This is one good tutorial: [http://www.4guysfromrolla.com/articles/082703-1.aspx](http://www.4guysfromrolla.com/articles/082703-1.aspx)

Good luck.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:43:19.417

你真的应该调查一下

[Asp.net 角色管理](http://msdn.microsoft.com/en-us/library/5k850zwb%28v=vs.100%29.aspx)

和

[根据安全角色过滤站点地图节点](http://msdn.microsoft.com/en-us/library/ms178429%28v=vs.80%29.aspx)

这比尝试基于 Session 值构建自己的安全机制更聪明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T17:45:39.130

您可以将页面放置在按角色分组的文件夹中，并为每个文件夹创建一个 Web.config：

对于您的管理区域，您可以使用：

```
<configuration>
   <system.web>
      <authorization>
         <allow roles="admin"/>
         <deny users="*"/>
      </authorization>
   </system.web>
</configuration> 
```

对于您的会员区，您可以使用：

```
<configuration>
   <system.web>
      <authorization>
         <allow roles="admin"/>
         <allow roles="member"/>
         <deny users="*"/>
      </authorization>
   </system.web>
</configuration> 
```