# StackOverflow 问答 000490000-000490999

# jquery - 将 jTemplate 与 ASP.NET MVC 一起使用

> ID：490004
> 
> 赞同：2
> 
> 时间：2009-01-29T00:17:26.700
> 
> 标签：jquery, asp.net-mvc, jquery-plugins, jtemplate

在[本文中](http://encosia.com/2008/06/26/use-jquery-and-aspnet-ajax-to-build-a-client-side-repeater/)，Dave Ward 描述了如何使用 jQuery 插件[jTemplate](http://plugins.jquery.com/project/jTemplates)创建他所谓的“客户端转发器”，它将 JSON 数据解析为客户端的模板。

在文章的最后，他建议将模板放在扩展名为“.tpl”的单独文件中，并使用以下语法将数据加载到文档中：

```
函数应用模板（jsonData）{
  // 这个方法加载 HTML 模板和
  // 准备容器 div 以接受数据。
  $('#Container').setTemplateURL('myTemplate.tpl');

  // 此方法将 JSON 数组应用于
  // 容器的模板并渲染它。
  $('#Container').processTemplate(jsonData);
}
```

但是，当使用 ASP.NET MVC 时，我不能只将模板文件放在我的视图旁边并使用“/Guestbook/myTemplate.tpl”调用它。但我*想将*模板文件放在视图旁边，以保持一致。

我该怎么安排这个？返回文本文件内容的控制器操作？Global.asax.cs 中的一些配置使框架只返回这些文件，而无需解析控制器/操作 url？还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T16:57:03.087

我建议改用 .htm 。这在默认的 MVC 应用程序中是正常的。

事实证明，使用 .tpl 无论如何都是一个坏主意，因为某些版本的 IIS 将其作为未知文件类型阻止，除非您明确添加它。我需要更新我的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T11:18:05.423

我认为，您可以忽略该路线，并按照您的建议链接到您的模板文件：

查看以前的答案： [如何在 asp.net 表单中忽略路由 url 路由](https://stackoverflow.com/questions/273447/how-to-ignore-route-in-asp-net-forms-url-routing)

# c++ - 剥离物品的最佳 C++ 容器？

> ID：490005
> 
> 赞同：1
> 
> 时间：2009-01-29T00:17:54.827
> 
> 标签：c++, list, vector, set, containers

我有一个文件列表（存储为 c 样式字符串），我将对其执行搜索，我将删除那些与我的参数不匹配的文件。用于此目的的最佳容器是什么？我现在正在考虑设置。请注意，文件列表永远不会比初始化时大。我只会从容器中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T01:00:56.113

我绝对不会使用集合——你不需要对它进行排序，所以使用集合没有意义。Set 通常实现为自平衡树，在您的情况下不需要自平衡算法。

如果您打算执行一次此操作，我将使用带有 remove_if 的 std::vector（来自 <algorithm>），然后是擦除。如果您以前没有使用过 remove_if，它的作用是遍历所有相关项并将所有相关项向下移动，覆盖该过程中不相关的项。您必须在其后进行擦除以减小矢量的大小。像这样：

```
std::vector<const char*> files;
files.erase(remove_if(files.begin(), files.end(), RemovePredicate()), files.end()); 
```

如果你想利用它的 O(1) 删除时间属性，编写代码来用 std::list 做同样的事情会有点困难。看到你只是在做这个一次性的操作，可能会花很少的时间你甚至不会注意到它，我建议你这样做，因为这是最简单的方法。

老实说，我认为您不会看到 std::list 和 std::vector 方法之间的速度差异太大。矢量方法只复制每个值一次，因此它实际上非常快，但占用的空间要少得多。在我看来，只有当您在整个应用程序的生命周期中进行大量添加和删除操作时，才真正合理地使用 std::list 并使用三倍的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T00:24:33.750

std::set 中的元素必须是唯一的，因此除非文件名是全局唯一的，否则这将不适合您的需求。

我可能会推荐一个 std::list。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T00:29:10.093

来自[SGI](http://www.sgi.com/tech/stl/table_of_contents.html)：

*   A`vector`是一个Sequence，支持随机访问元素，在末尾固定时间插入和移除元素，在开始或中间线性时间插入和移除元素。

*   A`list`是一个双向链表。也就是说，它是一个既支持向前遍历又支持向后遍历的序列，以及（摊销的）常数时间在开头或结尾或中间插入和移除元素。

*   An`slist`是一个单向链表：其中每个元素都链接到下一个元素，但不链接到前一个元素。也就是说，它是一个支持前向但不支持后向遍历和（摊销）恒定时间插入和删除元素的序列。

*   `Set`是一个存储 Key 类型对象的有序关联容器。`Set`是一个简单关联容器，这意味着它的值类型以及它的键类型都是 Key。它也是一个独特的关联容器，这意味着没有两个元素是相同的。

*   `Multiset`是一个存储 Key 类型对象的有序关联容器。`Multiset`是一个简单关联容器，这意味着它的值类型以及它的键类型都是 Key。它也是一个多关联容器，这意味着两个或多个元素可能是相同的。

*   `Hash_set`是一个散列关联容器，用于存储 Key 类型的对象。`Hash_set`是一个简单关联容器，这意味着它的值类型以及它的键类型都是 Key。它也是一个唯一关联容器，这意味着没有两个元素使用二进制谓词 EqualKey 比较相等。

*   `Hash_multiset`是一个散列关联容器，用于存储 Key 类型的对象。`Hash_multiset`是一个简单的关联容器，这意味着它的值类型以及它的键类型都是 Key。它也是一个多关联容器，这意味着两个或多个元素可以使用二进制谓词 EqualKey 比较相等。

（有些容器被省略了。）

`hash_set`如果您只需要一个快速且不包含多个相同键的容器， 我会选择。`hash_multiset`如果您这样做，`set`或者`multiset`您希望对字符串进行排序，或者`list`您`slist`希望字符串保持其插入顺序。

在您建立您的列表/集合后，使用`remove_if`根据您的条件过滤掉您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T00:20:54.163

我将从扔掉向量开始，因为它是一个顺序容器。设置，我相信接近于顺序或散列。我会避免这种情况。双向链表，stl 列表就是其中之一，有两个指针和节点。基本上，要删除一个项目，它会破坏链然后用指针重新连接两个部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T00:46:17.967

假设您的搜索条件不依赖于文件名（即您搜索内容、文件大小等），因此您不能使用集合，我会选择`list`. 构建整个列表需要 O(N)，每次删除需要 O(1)。

如果你想让它更快，并且不坚持使用现成的 STL 容器，我会：

1.  用一个`vector`
2.  使用假删除删除，即。将项目标记为已删除
3.  当已删除/所有项目的比率超过某个阈值时，我会过滤这些项目`remove_if`

这应该会给你最好的空间/时间/缓存性能。（尽管您应该确定它的轮廓）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T00:51:01.873

您可以使用两个列表/向量/任何东西：

```
using namespace std;

vector<const char *> files;

files.push_back("foo.bat");
files.push_back("bar.txt");

vector<const char *> good_files;  // Maybe reserve elements given files.size()?

for(vector<const char *>::const_iterator i = files.begin(); i != files.end(); ++i) {
    if(file_is_good(*i)) {
        new_files.push_back(*i);
    }
} 
```

# eclipse - FieldEditorPreferencePage 中的布局问题

> ID：490015
> 
> 赞同：7
> 
> 时间：2009-01-29T00:20:08.130
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp, jface

FieldEditorPreferencePage 中的布局设置存在以下问题。
我的代码是这样的：

```
public void createFieldEditors () {
  Group pv = new group(getfieldEditorParent(), SWT.SHADOW_OUT);
  Group of = new group(getfieldEditorParent(), SWT.SHADOW_OUT);
  pv.setText(“pv”);
  of.setText(“of”);
  GridLayout layout = new GridLayout(2,false);
  pv.setLayout(layout);
  of.setLayout(layout);
  addField(new StringFieldEditor(“PreferenceStore name”,“Text:”, pv);
  addField(new StringFieldEditor(“PreferenceStore name”,“Text:”, pv);
  addField(new StringFieldEditor(“PreferenceStore name”,“Text:”, of);
  addField(new StringFieldEditor(“PreferenceStore name”,“Text:”, of);
  and so on.
 } 
```

问题是它不适用于 GridLayout。
StringFieldEditors 不是并行的。列数始终为 1。此外，当我尝试更改组中 StringFieldEditors 的大小时，它也不起作用。

有人有什么想法吗？
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-31T14:24:59.357

问题是，当您使用 时`FieldEditorPreferencePage`，您只能使用`FieldEditor`子类作为组件。这是文档中的一个片段：

> FieldEditorPreferencePage 实现了一个页面，该页面使用这些字段编辑器在页面上显示和存储首选项值。FieldEditorPreferencePage 子类不是创建 SWT 控件来填充其内容，而是创建字段编辑器来显示内容。 **页面上的所有字段都必须实现为字段编辑器**。

这意味着您有两种选择如何实现您想要的：

1.  实现您自己的 子类`FieldEditor`，它将代表 Group 小部件。
2.  不要扩展`FieldEditorPreferencePage`，而只是 a `PreferencePage`。然后你必须实现`createContents`方法而不是`createFieldEditors`. 您还必须管理属性的加载和保存。

如果您想提供一些复杂的布局，我认为第二种方法可能更容易。[您可以在这里](http://www.eclipse.org/articles/Article-Field-Editors/field_editors.html)找到更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T11:04:36.880

另一个（简单的）解决方法：您还可以创建新的 Composites 来创建更多列。问题是这些 FieldEditor 与它们的父级通信并弄乱了您的布局。因此，通过创建一个“空”复合，他们可以随心所欲地进行交流:)

```
someGroup = new Group(..., SWT.NONE);
someGroup .setLayout(new GridLayout(16, false));

Composite myC1= new Composite(someGroup,SWT.NONE);
addField(new BooleanFieldEditor(...,C1);

Composite myC2= new Composite(someGroup,SWT.NONE);
addField(new BooleanFieldEditor(...,C2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-14T07:25:17.537

`FieldEditorPreferencePage`关于（`GRID`风格）需要了解的两件事：

1.  字段编辑器父级的布局始终设置`GridLayout`为“自定义”组件，例如`Groups`;
2.  布局中的列数根据任何字段编辑器中的最大组件数进行调整（在`StringFieldEditor)`.

在上面的例子中，布局数据`Groups`应该考虑到这一点：

```
GridDataFactory.defaultsFor(pv).grab(true, false).span(2, 1).applyTo(pv);
GridDataFactory.defaultsFor(of).grab(true, false).span(2, 1).applyTo(of); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T07:36:39.010

我实现了 Group-FieldEditor，它可以包含其他 FieldEditor 并将它们布置为一个组。

```
 import java.util.Collection;

import org.eclipse.jface.preference.FieldEditor;
import org.eclipse.jface.preference.FieldEditorPreferencePage;
import org.eclipse.jface.preference.IPreferenceStore;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Group;

/**
 * Class is intended to create a Group Widgets, inside of the {@link FieldEditorPreferencePage}
 * objects.
 * This class should be used as following:
 * 

*   use the {@link #getFieldEditorParent()} to as a parent, while creating new Field Editors.
     * 
*   use {@link #setFieldEditors(Collection)} to add the collection of FieldEditors to the
     * {@link GroupFieldEditor}.
     * 

 *
 * @author alf
 *
 */
public class GroupFieldEditor extends FieldEditor {

    private String name;
    private Collection members;
    private int numcolumns;
    private Group group;
    private Composite parent;

    /**
     * The gap outside, between the group-frame and the widgets around the group
     */
    private static final int GROUP_PADDING = 5; // px

    /**
     * The gap inside, between the group-frame and the content
     */
    private static final int GROUP_VERTICAL_MARGIN = 5; // px

    /**
     * The inside-distance creates a new boolean field editor
     */
    protected GroupFieldEditor() {
    }

    /**
     * Creates a Group of {@link FieldEditor} objects
     *
     * @param name
     *            - name
     * @param fieldEditorParent
     *            - parent
     */
    public GroupFieldEditor(String name, Composite fieldEditorParent) {
        this.name = name;

        // the parent is a Composite, which is contained inside of the preference page. Initially it
        // does not have any layout.
        this.parent = fieldEditorParent;
        FillLayout fillLayout = new FillLayout();
        fillLayout.marginHeight = GROUP_VERTICAL_MARGIN;
        this.parent.setLayout(fillLayout);

        this.group = new Group(parent, SWT.DEFAULT);
        this.group.setText(this.name);
    }

    /**
     * The parent for all the FieldEditors inside of this Group.
     *
     * @return - the parent
     */
    public Composite getFieldEditorParent() {
        return group;
    }

    /**
     * Sets the FieldeditorChildren for this {@link GroupFieldEditor}
     * 
     * @param membersParam
     */
    public void setFieldEditors(Collection membersParam) {
        this.members = membersParam;
        doFillIntoGrid(getFieldEditorParent(), numcolumns);
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor.
     */
    @Override
    protected void adjustForNumColumns(int numColumns) {
        this.numcolumns = numColumns;
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor.
     */
    @Override
    protected void doFillIntoGrid(Composite parentParam, int numColumns) {

        GridLayout gridLayout = new GridLayout();
        gridLayout.marginLeft = GROUP_PADDING;
        gridLayout.marginRight = GROUP_PADDING;
        gridLayout.marginTop = GROUP_PADDING;
        gridLayout.marginBottom = GROUP_PADDING;
        this.group.setLayout(gridLayout);

        this.parent.layout();
        this.parent.redraw();

        if (members != null) {
            for (FieldEditor editor : members) {
                editor.fillIntoGrid(getFieldEditorParent(), 1);
            }
        }
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor. Loads the value from the
     * preference store and sets it to the check box.
     */
    @Override
    protected void doLoad() {
        if (members != null) {
            for (FieldEditor editor : members) {
                editor.load();
            }
        }
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor. Loads the default value
     * from the preference store and sets it to the check box.
     */
    @Override
    protected void doLoadDefault() {
        if (members != null) {
            for (FieldEditor editor : members) {
                editor.loadDefault();
            }
        }
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor.
     */
    @Override
    protected void doStore() {
        if (members != null) {
            for (FieldEditor editor : members) {
                editor.store();
            }
        }
    }

    @Override
    public void store() {
        super.store();
        doStore();
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor.
     */
    @Override
    public int getNumberOfControls() {
        return 1;
    }

    /*
     * (non-Javadoc) Method declared on FieldEditor.
     */
    @Override
    public void setFocus() {
        if (members != null && !members.isEmpty()) {
            members.iterator().next().setFocus();
        }
    }

    /*
     * @see FieldEditor.setEnabled
     */
    @Override
    public void setEnabled(boolean enabled, Composite parentParam) {
        if (members != null) {
            for (FieldEditor editor : members) {
                editor.setEnabled(enabled, parentParam);
            }
        }
    }

    @Override
    public void setPreferenceStore(IPreferenceStore store) {
        super.setPreferenceStore(store);
        if (members != null) {
            for (FieldEditor editor : members) {
                editor.setPreferenceStore(store);
            }
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-17T09:32:47.003

另一种解决方法：

使用标签来分隔字段组。下面创建一个垂直行分隔符并将文本直接放在其下方：

```
new Label(getFieldEditorParent(), SWT.SEPARATOR | SWT.HORIZONTAL)
        .setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 2, 1));
new Label(getFieldEditorParent(), SWT.NONE).setText("My Group Title"); 
```

# domain-name - 检测停放页面的方法？

> ID：490025
> 
> 赞同：15
> 
> 时间：2009-01-29T00:22:19.433
> 
> 标签：domain-name

任何人都知道以编程方式检测停放网页的方法吗？也就是说，那些您不小心输入（或有时是故意输入）的页面，它们由域名停放服务托管，上面只有广告。

我正在开发一个链接网络，并希望确保过期的网站不会最终被其他人抢走，然后成为一个停放的页面。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-29T00:58:16.990

这是一个我认为可以捕捉到相当数量的测试。它利用了您实际上并不希望为您的停放域建立真正的网站这一事实。它查找子域和路径的通配符。假设我们的系统中有这个 URL

[http://www.example.com/method-to-detect-parked](http://www.example.com/method-to-detect-parked)。

首先，我会检查实际的 URL 并对其进行哈希处理或获取副本进行比较。

我的第二次检查是

[http://random.example.com/random](http://random.example.com/random)

如果它与原始链接匹配甚至成功，则您可以很好地指示该页面已停放。如果失败，我可能会分别检查子域和路径。如果页面随机更改了一些元素，您可能需要选择几个项目进行比较。例如，制作一个包含在页面中的链接列表并比较这些链接或者可能是标题标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-29T00:29:52.977

我想说的是，您必须检查相关网站的 WHOIS 记录和/或页面的实际内容，并制定一些关于什么构成“停放页面”的启发式方法。

以[goooogle.com](http://goooogle.com/)为例，查看他们的[WHOIS](http://samspade.org/whois/grq3uexj4t3ynp4bjrlpij7r5q)记录显示他们归“隐私保护”所有，并且他们的 DNS 服务器是 ns1/ns2.fastpark.net。如果您查看该站点的源代码，他们会很愚蠢地拥有一个名为“style_park.css”的 CSS 文件 :)

总而言之，我认为您无法想出一个通用的方法来做到这一点。您最终可能会得到一些不断发展的规则库或黑名单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T01:01:17.763

您可以只依靠您的用户“报告此链接”......这会将其放入队列中以供稍后查看？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-28T18:04:07.503

查看 dns/whois 记录的创建日期，并将其与链接的添加日期进行比较。如果 DNS 较新，则该链接需要手动检查。

或者：检查[http://example.com/](http://example.com/)和[http://example.com/xxxxxxrandomstringxxxxxx](http://example.com/xxxxxxrandomstringxxxxx)。如果这两个页面相同，则您遇到了需要手动检查的某种问题。您要链接的主页已损坏，或者域已​​停放并且所有页面都返回相同的值。此测试不是 100%，因为一些停放的页面会从 URL 中回显元素。

如果您只想查看现有网站，[http://www.linkalarm.com/](http://www.linkalarm.com/)之类的服务可以很好地完成此操作。

# html - 在 IE 中设置 SELECT 的高度

> ID：490036
> 
> 赞同：29
> 
> 时间：2009-01-29T00:24:44.813
> 
> 标签：html, css, internet-explorer

IE 在呈现 HTML SELECT 时似乎忽略了 CSS 中设置的高度。是否有任何解决方法，或者我们是否必须接受 IE 看​​起来不如其他浏览器？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-29T00:50:40.937

除了放弃`select`元素之外，没有其他解决方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2011-02-02T17:16:10.210

除了放弃 select 元素之外，没有其他解决方法是正确的，但是如果您只需要在选择列表中显示更多项目，您可以简单地使用 size 属性：

```
<select multiple="multiple" size="15">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select> 
```

如果您的项目集合长度小于大小值，则这样做您将有额外的空行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-29T01:43:09.880

您可以使用 font-size 和 line-height 的组合来强制它变大，但显然仅在您需要更大字体的情况下

编辑：

示例 -> ~~[http://www.bse.co.nz](http://www.bse.co.nz)~~ **编辑：（此链接不再相关）**

大搜索框旁边的选择具有以下 css 规则：

```
#navigation #search .locationDrop {
    font-size:2em;
    line-height:27px;
    display:block;
    float:left;
    height:27px;
    width:200px;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-02T15:40:15.210

是的你可以。

我能够将我的高度设置为我`SELECT`在 IE8 和 9 中想要的。诀窍是将`box-sizing`属性设置为`content-box`. 这样做会将 的内容区域设置为`SELECT`高度，但请记住`margin`，`border`和`padding`的值不会在 的宽度/高度中计算`SELECT`，因此请相应地调整这些值。

```
select {
    display: block;
    padding: 6px 4px;
    -moz-box-sizing: content-box;
    -webkit-box-sizing:content-box;
    box-sizing:content-box;
    height: 15px;
} 
```

这是一个工作[jsFiddle](http://jsfiddle.net/8fkgg/2/)。您介意确认并标记适当的答案吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-29T01:34:06.607

使用 UI 库，如[jquery](http://jquery.sanchezsalvador.com/jquery/page/jquerycomboboxexamplebasic.aspx)或[yui](http://developer.yahoo.com/yui/examples/autocomplete/ac_combobox.html)，它提供了原生 SELECT 元素的替代方案，通常作为组合框实现的一部分。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-07-04T11:48:12.327

即使将 CSS***高度***值设置为***select***元素不起作用，***padding***属性也可以正常工作。设置顶部和底部填充将使您的***选择***元素看起来更高。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-02T14:48:07.023

最后在[http://viralpatel.net/blogs/2009/09/setting-height-selectbox-combobox-ie.html](http://viralpatel.net/blogs/2009/09/setting-height-selectbox-combobox-ie.html)找到了 一个简单的解决方案（至少对于 IE8）：

```
font-size:      1.0em; 
```

顺便说一句，对于 Google Chrome，在 [如何标准化 Chrome 和 Firefox 之间选择框的高度？](https://stackoverflow.com/questions/2547354/how-to-increase-the-height-of-the-select-box)*/

```
-webkit-appearance: menulist-button; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-27T10:37:39.883

有一个解决方法（至少对于多选）：

*   将选择**大小**属性设置为选项列表大小（使用 JavaScript 或将其设置为任何足够大的数字）
*   将 select **max-height**而不是**height**属性设置为所需的高度（在 IE9 上测试）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-11-23T23:00:14.617

您可以使用替代品：[jQuery Chosen](http://harvesthq.github.com/chosen/)。它看起来非常棒。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-12-06T13:56:22.543

```
select{
  *zoom: 1.6;
  *font-size: 9px;
} 
```

如果更改属性，大小`select`也会在 IE7 中更改。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-10-25T09:08:32.677

另请参阅输入、选择、...之间的[不一致框模型](https://stackoverflow.com/questions/1450587/inconsistent-box-model-between-input-typesubmit-and-input-typetext#answer-1450649)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-11-01T03:12:36.890

您可以做类似于 facebook 所做的事情，只需添加填充。它没有人们希望的那么好，但看起来相当不错。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-19T15:58:26.177

不确定，但我认为这不是关于“多个”类型的选择元素的高度而是下拉类型的选择元素的问题。我曾经遇到过下拉列表看起来被压扁并且没有清楚地显示所选值的时候。毫无疑问，这与页面上使用的 CSS 样式信息有关。阻止它的唯一方法是更改​​ CSS（这可能会以您不希望影响的方式影响整个页面或其中的一部分）或使用选择元素本身中的样式信息来覆盖正在破坏它的 CSS。例子：

```
<select name="myselect" id="myselect" style="font-size:15px; height:30px">
<option value="someval">somedescr</option>
...
</select> 
```

希望这可以帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-06-27T05:18:51.750

我想将选择框的高度设置为小于默认值。我用了

```
select {
   position: relative;
   height: 10px !important;
   display: inline-block;
} 
```

这适用于 ie7 和 ie8。您可能只需要该`height`属性，我只是添加了`position`and`display`来覆盖从更高的 dom 继承的属性。

# c# - 使用 C# 在内存对象中序列化

> ID：490038
> 
> 赞同：1
> 
> 时间：2009-01-29T00:24:57.853
> 
> 标签：c#, serialization, assemblies, in-memory

我有一个程序可以从脚本文件中提取一些代码并编译它。它工作正常。

问题是：在脚本中我声明了几个类，我想序列化它们。显然，C# 序列化程序（xml 和二进制）不喜欢序列化和反序列化在内存程序集中定义的对象。

我更喜欢不要留下内存中的程序集，所以我正在寻找另一种序列化的方式，但是以防万一，是否可以在内存中构建程序集并最终将其写入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:05:10.567

You could always write your own ToXml function using reflection to write out your property data to a string. Then your object would deserialize itself.

Just a thought.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T01:25:00.807

我会尽可能避免所有内置序列化，两者都严重损坏。例如，XML 序列化不支持字典，普通序列化/SOAP 不支持泛型。两者都有版本问题。

这很耗时，但创建 ToXML 和 FromXML 方法可能是最有效的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T01:10:09.557

如果您想动态创建程序集，请查看通过反射发射的 IL。 [这是一篇很好的文章，可以帮助您入门。](http://www.devx.com/dotnet/Article/28783)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T01:14:21.593

所以只是为了澄清，你是在问如果没有应用 [Serializable] 属性，你如何序列化一个类型？

一种解决方案是使用 WCF 数据协定序列化程序：http: [//msdn.microsoft.com/en-us/library/ms731923.aspx](http://msdn.microsoft.com/en-us/library/ms731923.aspx)。

显然，这只有在您可以针对 .Net 3.0 或更高版本时才有效。

或者，您可以实现 ISerializationSurrogate。[Jeffrey Richter 在http://msdn.microsoft.com/en-us/magazine/cc188950.aspx](http://msdn.microsoft.com/en-us/magazine/cc188950.aspx)上有很好的介绍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T02:10:27.033

[在这里](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)查看自定义序列化器，这是字典 XML 序列化的示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-14T20:52:29.003

我对 XmlSerializer 不能序列化动态生成的类型的说法有点困惑。XmlSerializer 在构造过程中也会动态生成它自己的序列化代码，因此它序列化您的类型应该没有问题。

您可能需要使用适当的属性装饰您的动态类，具体取决于您生成的内容（如派生类），但在您描述的情况下使用 XmlSerializer 应该没有任何问题。

如果您可以发布有关 XmlSerializer 给您的问题的详细信息，我可以帮助您找出问题所在。

另外，我相信自动生成代码通常是一种祝福。我经常不得不回到一个类来修复一个或所有复制/粘贴/保存/加载功能，只是因为有人在添加新变量时忘记更新它们。保存/加载代码是样板代码。让电脑来写吧。

# database - 什么是最好的 Firebird IDE？

> ID：490039
> 
> 赞同：16
> 
> 时间：2009-01-29T00:25:07.463
> 
> 标签：database, development-environment, firebird

简单的问题。我正在考虑将 Firebird 和 SQLite 用于即将进行的项目。SQLite 有 SQLite 管理员，它非常好，但因为它有自动完成功能，所以获得了 +1M。但是 Firebird 支持 FK，所以我更喜欢它。我现在倾向于火鸟。

你最喜欢的 Firebird IDE 是什么，为什么？

编辑：就个人而言，我会倾向于免费的，因为我在这个项目上赚的不多。但我会保持原样。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T18:47:09.593

测试这一切！

*   IBEasy [http://www.marc-grange.net/telecharger.htm](http://www.marc-grange.net/telecharger.htm) *
*   IBExpert [http://www.ibexpert.com](http://www.ibexpert.com) *
*   数据库工作台 [http://www.upscene.com](http://www.upscene.com) *
*   FireFace [http://www.fireface.eu](http://www.fireface.eu)
*   火鸟大师 [http://www.sqlmaestro.com/products/firebird/maestro/](http://www.sqlmaestro.com/products/firebird/maestro/)
*   EMS SQL 管理器 [http://sqlmanager.net/products/ibfb/manager](http://sqlmanager.net/products/ibfb/manager) *
*   BlazeTop [http://www.devrace.com/en/blazetop/](http://www.devrace.com/en/blazetop/)
*   火鸟开发工作室 [http://www.sqlly.com/](http://www.sqlly.com/)
*   火焰罗宾[http://www.flamerobin.org/](http://www.flamerobin.org/) *
*   Kevora IDE [http://kevora.sourceforge.net/](http://kevora.sourceforge.net/)
*   IBWebAdmin [http://www.ibwebadmin.net/](http://www.ibwebadmin.net/) *
*   RazorSQL [http://www.razorsql.com/](http://www.razorsql.com/)
*   松鼠 SQL [http://squirrel-sql.sourceforge.net/](http://squirrel-sql.sourceforge.net/) *
*   OD Web ISQL [http://www.e-naxos.com/dnlManager.aspx?GROUP=6](http://www.e-naxos.com/dnlManager.aspx?GROUP=6) *

对我来说最好的是**IBExpert**和 Database Workbench 之后，因为他们有存储过程调试器

(*) 表示免费或有免费版本（个人...）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-29T01:08:37.547

我喜欢Firebird（或 Interbase）的[IBExpert](http://ibexpert.net/ibe/index.php?n=Main.IBExpert)。他们有免费的个人版。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-29T12:09:14.557

我不想让它参加最佳 Firebird IDE 的竞赛（目前），但您可以查看[FlameRobin](http://www.flamerobin.org)以获得免费的 Firebird 多平台管理程序。它具有自动完成功能，启动速度与我所知道的其他 GUI 工具一样快，而且价格应该适合您。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-14T06:30:32.737

Databaseworkbench - 无所不能 - SQL 开发人员的天堂

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-29T00:35:04.540

我使用了免费版的 EMS SQL Manager。它是一个很棒的 IDE，具有我所需要的所有功能，并且可以与 Management Studio for SQL Server 之类的东西进行比较。[关联](http://sqlmanager.net/en/products/ibfb/manager)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-29T00:36:39.890

我可以建议你[火鸟大师](http://www.sqlmaestro.com/products/firebird/maestro/)。它不是免费的，但是您以许可证的价格获得的是非常好的产品，尤其是因为您可以直观地执行大部分任务。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-29T09:48:04.263

除了 Firebird 的 IDE，您可能还想看看[Sinática Monitor for Firebird](http://www.sinatica.com)。
它非常适合发现瓶颈。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-06-23T08:32:39.260

我猜你正在寻找[AnySQL Maestro](http://www.sqlmaestro.com/products/anysql/maestro/)

1.  免费软件
2.  能够同时使用 Firebird 和 SQLite 数据库

生产者还为 SQLite (SQLite Maestro) 提供了一个支持外键（带有参照完整性触发器）的工具，但它只有 30 天的免费试用期（费用约为 70 美元）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-11T16:20:48.213

FlameRobin 简单、易于使用且占用空间小。此外，它是免费的。

# nhibernate - NHibernate 不会从会话中驱逐对象

> ID：490040
> 
> 赞同：0
> 
> 时间：2009-01-29T00:25:08.243
> 
> 标签：nhibernate, session, fluent-nhibernate

我正在使用 Fluent NHibernate 映射 ProductCategory 树，一切正常，直到我尝试遍历从数据库返回的树以确保它正确保存和检索。

这是我的测试方式：

1.  实例化 4 个类别：饮料、啤酒、淡啤酒和黑啤酒
2.  将啤酒添加到饮料中，然后将淡啤酒和黑啤酒添加到啤酒中。
3.  保存饮料（级联设置为 AllDeleteOrphan）
4.  刷新会话，它会保留整个树
5.  从会话中逐出每个 ProductCategories
6.  从数据库加载饮料
7.  检查加载的对象（fromDB）是 EqualTo 但不是 SameAs Beverages。
8.  检查 fromDB 是否只有一个子 ProductCategory
9.  检查 fromDB 中唯一的孩子是 EqualTo 但不是 SameAs Beer

测试失败，因为孩子是 SameAs 啤酒。这意味着它实际上并没有从数据库中加载对象，因为它仍在某个地方的 NHibernate 会话中。

任何见解将不胜感激。

**编辑：**回应肖恩的以下评论。我正在使用内存中的 SQLite 数据库，因此一旦会话/连接关闭，数据库就会被吹走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T03:58:02.573

刚想通，原来这是一个复制和粘贴错误。嘿，PEBKAC。

我添加了 4 个断言来验证对象不在会话中：

```
Assert.That(Session.Contains(_beveragesCategory), Is.False); 
Assert.That(Session.Contains(_beerCategory), Is.False);
Assert.That(Session.Contains(_darkBeerCategory), Is.False);
Assert.That(Session.Contains(_lightBeerCategory), Is.False); 
```

当所有这些都通过时（我第一次运行它们），我仔细查看了断言对象不同的代码，发现断言是错误的。

曾是：

```
Assert.That(_beverageCategory.ChildCategories[0], Is.Not.SameAs(_beerCategory)); 
```

本来应该：

```
Assert.That(fromDB.ChildCategories[0], Is.Not.SameAs(_beerCategory)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T02:21:20.600

从测试的角度来看，您最好关闭用于创建对象的初始会话并创建一个新会话来检索对象。这将确保再次命中数据库以实例化对象（假设未启用二级缓存）。

# asp.net - 微软语音 API 5.1、5.3？

> ID：490042
> 
> 赞同：1
> 
> 时间：2009-01-29T00:26:31.580
> 
> 标签：asp.net, sapi, speech, speech-to-text

我对可用的不同 SAPI 版本有点困惑。

首先，我只找到了5.1版本的SDK，有没有5.3版本的SDK，如果没有，为什么？

如果我正在使用 .Net 框架的 3.5 版本进行开发，我可以使用 Witch 版本。

有没有什么好的教程，因为我发现的唯一一个很旧（他们使用 2003 版的 Visual Studio）：http: [//msdn.microsoft.com/en-us/library/ms986944.aspx](http://msdn.microsoft.com/en-us/library/ms986944.aspx)

有什么方法可以直接在 Asp.Net 网站中以语音到文本模式使用语音 API 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:27:05.420

[Wikipedia 告诉我](http://en.wikipedia.org/wiki/Speech_Application_Programming_Interface#SAPI_5_API_family)SAPI 5.3 包含在 Windows SDK 中，所以去下载吧。SAPI 5.3 看起来像是 Windows Vista 的一部分，所以我认为您不能在任何其他版本的 Windows 中使用它。该库只是一个 COM 库，这意味着它不依赖于您的 .NET 版本——也就是说，您甚至可以在 .NET 1.0 版中使用它。事实上，您几乎可以在任何语言中使用它，因为现在很多语言都以某种方式支持 COM。

我会解决您的简单问题，不，您不能以任何方式从客户端计算机上的 ASP.NET 使用语音 API。不过，如果您真的很认真，您可以考虑在客户端计算机上创建一个使用语音 API 的 Silverlight 应用程序，或者考虑在服务器上构建语音数据并将其流式传输给用户。但是，目前我认为这两种选择都可能非常困难。

我从 MSDN 上的教程中学会了使用 SAPI 5.1，就像您发布的链接一样。我知道，它们都已经老了，但它们仍然很重要。SAPI 5.x 近十年来没有改变。Visual Studio 2008 仍然可以做 Visual Studio 2003 可以做的所有事情（嗯，我认为大部分情况下），而且它绝对可以使用 COM 库，所以这是可能的，你只需要稍微动动脑筋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-19T12:44:50.670

您应该尝试命名空间 System.Speech （它适用于 VS2008 不知道 3.5 下的框架是否有它......我在 Vista 上）

```
SpeechSynthesizer foo = new SpeechSynthesizer();
foo.Speak("Test"); 
```

您可以在[MSDN上获得更多详细信息](http://msdn.microsoft.com/en-us/library/system.speech.recognition.aspx)

# sql - 是否可以在不使用子查询的情况下报告 2 个表？

> ID：490053
> 
> 赞同：0
> 
> 时间：2009-01-29T00:31:40.447
> 
> 标签：sql, reporting, set

您有一张表，您希望根据该表计算两个不同表中的项目数。在这个例子中，我使用了建筑物，男人和女人

```
DROP TABLE IF EXISTS building;
DROP TABLE IF EXISTS men;
DROP TABLE IF EXISTS women;
CREATE TABLE building(name VARCHAR(255));
CREATE TABLE men(building VARCHAR(255), name VARCHAR(255));
CREATE TABLE women(building VARCHAR(255), name VARCHAR(255));
INSERT INTO building VALUES('building1');
INSERT INTO building VALUES('building2');
INSERT INTO building VALUES('building3');
INSERT INTO men VALUES('building1', 'andy');
INSERT INTO men VALUES('building1', 'barry');
INSERT INTO men VALUES('building2', 'calvin');
INSERT INTO men VALUES(null, 'dwain');
INSERT INTO women VALUES('building1', 'alice');
INSERT INTO women VALUES('building1', 'betty');
INSERT INTO women VALUES(null, 'casandra');

select 
   r1.building_name, 
   r1.men,
   GROUP_CONCAT(women.name) as women,
   COUNT(women.name) +  r1.men_count as count
from 
   (select 
      building.name as building_name,
      GROUP_CONCAT(men.name) as men,
      COUNT(men.name) as men_count 
   from 
      building 
   left join 
      men on building.name=men.building
   GROUP BY building.name) as r1
left join 
   women on r1.building_name=women.building 
GROUP BY r1.building_name; 
```

可能有别的方法吗？上述做法的问题是子查询中两个表的列是隐藏的，需要在外查询中重新声明。在两个单独的集合操作中执行此操作会产生不对称的情况。我们同样可以先加入女性，然后加入男性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T00:40:27.433

在 SQL Server 中，我只需用两个左连接连接两个子查询 - 如果您正在寻找对称性：

```
SELECT *
FROM building
LEFT JOIN (SELECT building, etc. FROM men GROUP BY etc.) AS men_summary
    ON building.name = men_summary.building_name
LEFT JOIN (SELECT building, etc. FROM women GROUP BY etc.) AS women_summary
    ON building.name = women_summary.building_name 
```

我倾向于使用首先声明的公用表表达式而不是子查询——它更具可读性（但不是 ANSI——但两者都不是`GROUP_CONCAT`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T01:05:17.303

使用 Union 合并 men/women 表中的数据

```
select building, [name] as menname, null as womenname from men
union
select building, null as menname, [name] as womenname from women 
```

您现在在子查询中有一个单独的“表”，您可以加入、计数或其他任何东西。

顺便说一句，我可以理解为什么 Cas[s]andra 在没有人相信她的情况下被冷落，但是 dwain 呢，他是否同样被众神诅咒？

# oracle - Oracle中的两个相同的表

> ID：490054
> 
> 赞同：0
> 
> 时间：2009-01-29T00:32:11.410
> 
> 标签：oracle, toad

我创建了两个相同的表，列出了数据库中某些产品规则的所有例外情况。表一是第一周的表二是第二周的例外情况只是每周查看一次，数据库中没有进行更正。第二周的数据包括第一周的例外情况我想从第二周排除一周的例外情况。仅查看新的异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T00:35:35.553

我建议您在表中添加一个时间戳并在此时间戳上选择/过滤。

这样，您还可以将*所有*异常放入一个表中并定义两个视图。

我不擅长 PL/SQL，但也许你可以调整我的 MySQL 示例：

```
CREATE DATABASE timetest;
CONNECT timetest;

CREATE TABLE errorlog (
  stamp TIMESTAMP NOT NULL ,
  error VARCHAR(255) NOT NULL
);

INSERT into errorlog (`stamp`, `error`)
  VALUES (DATE_SUB(CURDATE(),INTERVAL 8 DAY), 'old');
INSERT into errorlog (`stamp`, `error`)
  VALUES (NOW(), 'new');

SELECT * FROM errorlog WHERE stamp>DATE_SUB(CURDATE(),INTERVAL 7 DAY);
SELECT * FROM errorlog WHERE stamp<DATE_SUB(CURDATE(),INTERVAL 7 DAY);
DROP DATABASE timetest; 
```

给我：

```
mysql> SELECT * FROM errorlog WHERE stamp>DATE_SUB(CURDATE(),INTERVAL 7 DAY);
+---------------------+-------+
| stamp               | error |
+---------------------+-------+
| 2009-01-29 01:44:38 | new   |
+---------------------+-------+

mysql> SELECT * FROM errorlog WHERE stamp<DATE_SUB(CURDATE(),INTERVAL 7 DAY);
+---------------------+-------+
| stamp               | error |
+---------------------+-------+
| 2009-01-21 00:00:00 | old   |
+---------------------+-------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T00:53:28.280

Oracle 有一个 MINUS 运算符，所以你可以做

```
SELECT col_a, col_b... FROM table_new
MINUS
SELECT col_a, col_b... from table_old 
```

只要列具有相应的数据类型，它就可以工作（如果表具有相同的结构，则可以使用 SELECT *）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T01:20:53.773

为了真正帮助您，我们需要更多信息。您是在谈论表格还是视图（“......例外只是每周查看......”部分让我感到困惑）？

如果您可以提供一个简短的完整示例（是的 - 从 Tom Kyte 窃取），我们可以提供一个完整的答案。那就是如果以上没有帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T01:51:48.367

按年/周数将表分成分区也可能有一些优势。

# sql-server - 在集成服务中使用 XMLA 查询的结果

> ID：490059
> 
> 赞同：-1
> 
> 时间：2009-01-29T00:37:02.183
> 
> 标签：sql-server, ssis, ssas, xmla

我有一个 XMLA 查询，它以 XML 形式返回 Analysis Services 多维数据集的状态和上次处理日期，如下所示：

询问：

```
<Discover xmlns="urn:schemas-microsoft-com:xml-analysis">
  <RequestType>DISCOVER_XML_METADATA</RequestType>
  <Restrictions >
    <RestrictionList xmlns="urn:schemas-microsoft-com:xml-analysis">
      <DatabaseID>SSAS - Premium and Claims V2</DatabaseID>
      <CubeID>PDW04 1</CubeID>
      <ObjectExpansion>ReferenceOnly</ObjectExpansion>
    </RestrictionList>
  </Restrictions>
  <Properties />
</Discover> 
```

结果：

```
<return xmlns="urn:schemas-microsoft-com:xml-analysis">
  <root xmlns="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:schema targetNamespace="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:sql="urn:schemas-microsoft-com:xml-sql" elementFormDefault="qualified">
      <xsd:element name="root">
        <xsd:complexType>
          <xsd:sequence minOccurs="0" maxOccurs="unbounded">
            <xsd:element name="row" type="row" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:simpleType name="uuid">
        <xsd:restriction base="xsd:string">
          <xsd:pattern value="[0-9a-zA-Z]{8}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{4}-[0-9a-zA-Z]{12}" />
        </xsd:restriction>
      </xsd:simpleType>
      <xsd:complexType name="xmlDocument">
        <xsd:sequence>
          <xsd:any />
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="row">
        <xsd:sequence>
          <xsd:element sql:field="METADATA" name="METADATA" type="xmlDocument" />
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <row>
      <xars:METADATA xmlns="http://schemas.microsoft.com/analysisservices/2003/engine" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:xars="urn:schemas-microsoft-com:xml-analysis:rowset">
        <Cube>
          <Name>Premium</Name>
          <ID>PDW04 1</ID>
          <CreatedTimestamp>2008-11-23T22:31:06</CreatedTimestamp>
          <LastSchemaUpdate>2009-01-22T00:50:13</LastSchemaUpdate>
          <LastProcessed>2009-01-07T22:28:34</LastProcessed>
          <State>Processed</State>
        </Cube>
      </xars:METADATA>
    </row>
  </root>
</return> 
```

我希望能够在 Integration Services 包中使用这个 XMLA 查询，解析结果并将结果存储在 SQL Server 数据库表中。然而，似乎执行 XMLA 查询的唯一任务是“Analysis Services Execute DDL”任务，据我所知，它没有返回查询结果的方法。

有没有人对如何实现这一目标有任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T20:29:33.160

虽然您可以通过 SSIS 中的各种机制（包括通过执行 SQL 任务）运行“常规”MDX/XMLA，但它始终会将其包装在 . 是一个顶级方法，就像不能被包裹在里面，因此问题。

您有两种可能的解决方案：

1.  使用关系数据库中的 OPENQUERY 调用将 XMLA 包装在 Execute SQL 任务中。您可以执行 SELECT * from OPENQUERY() 之类的操作，并且实际上可以很好地解析 SQL Server 中的 XML 结果集。
2.  [通过配置 HTTP 访问 ( http://www.microsoft.com/technet/prodtechnol/sql/2005/httpasws.mspx](http://www.microsoft.com/technet/prodtechnol/sql/2005/httpasws.mspx) )打开您的 SSAS 服务器，以便您可以将 XMLA 作为 Web 服务调用发送。SSIS 中有一个 Web 服务任务，您可以使用它来执行和使用结果。

这两种选择显然都有一些缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T21:28:11.970

对于发现命令：

这对我来说非常有效：

使用 XMLA 名称空间创建脚本任务发出发现查询。收到响应后，解析 xmla 并添加到 VB.NET Datatable 并将解析的数据插入到 sql 表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-22T01:35:07.813

您还可以使用 SSAS 2008 中的新 DMV 语法或从[ASSP](http://asstoredprocedures.codeplex.com)到 SSAS 2005 中的 DMV 函数以表格格式返回此数据。

# c# - 使用正则表达式的 C# 字符串替换

> ID：490061
> 
> 赞同：0
> 
> 时间：2009-01-29T00:38:48.963
> 
> 标签：c#, string

我目前有下面的代码，用于替换字符串中的字符，但我现在需要替换前 X（在本例中为 3）个字符中的字符并保留字符串的其余部分。在下面的示例中，我有 51115，但我需要替换前 3 个字符中的任何 5，我应该以 61115 结束。

我当前的代码：

```
value = 51115;
oldString = 5;
newString = 6;

result = Regex.Replace(value.ToString(), oldString, newString, RegexOptions.IgnoreCase); 
```

结果现在是 61116。您建议我如何只查询前 x 个字符？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T00:47:56.933

不是特别花哨，但只给正则表达式它应该替换的数据；只发送可能被替换的字符范围。

```
result = Regex.Replace(value.ToString().Substring(0, x), oldString, newString, RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T00:48:38.413

如果您只是替换单个字符，您可以编写代码自己进行替换。它比弄乱一个子字符串然后一个正则表达式替换要快（如果你正在做一个单字符替换，这无论如何都是一种浪费）。

```
StringBuilder sb = new StringBuilder(oldString.Length);
foreach(char c in oldString) {
  if(c == replaceFrom) { c = replaceTo; }
  sb.Append(c);
}
return sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T01:16:08.373

我认为这里提到的逐字符选项可能更清楚，但如果你真的想要一个正则表达式：

```
string result = "";
int value = 55555;
string oldString = "5";
string newString = "6";

var match = new Regex(@"(\d{1,3})(\d+)?").Match(value.ToString());
if (match.Groups.Count > 1)
    result = match.Groups[1].Value.Replace(oldString, newString) + (match.Groups.Count > 2 ? match.Groups[2].Value : ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T01:09:02.943

我喜欢 RegEx，但在这种情况下，我只会做一个 .Replace

```
 string value;
    string oldString;
    string newString;
    value = "51115";
    int iLenToLook;
    iLenToLook = 3;
    oldString = "5";
    newString = "6";
    string result;
result =  value.Length  > iLenToLook ? value.Substring(iLenToLook, value.Length - iLenToLook) :"";

result = value.Substring(0, value.Length >= iLenToLook ? iLenToLook : value.Length).Replace(oldString, newString) + result; 
```

**编辑**我将其更改为首先获取未替换部分，以防替换字符串的长度与原始字符串不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T01:16:09.793

每次 .NET 世界中有人对正则表达式有疑问时，我都会推荐 Expresso（[链接](http://www.ultrapico.com/Expresso.htm)）。它是在正则表达式的混乱和棘手的世界中工作的一个很好的工具。

# gwt - GWT Toolkit：在客户端预处理文件

> ID：490062
> 
> 赞同：2
> 
> 时间：2009-01-29T00:39:32.550
> 
> 标签：gwt, client-side

如果客户端**GWT**代码有办法在客户端计算机上预处理文件？例如，在将文件提交到服务器之前计算它的校验和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-06T19:07:56.810

不，这是不可能的。文件的操作由浏览器完成，而不是 HTML 代码。

想想看，GWT 是 100% 的 javascript。并且 javascript 无法访问您计算机中的任何文件。那将是一个相当大的安全风险！GWT “包装”文件输入框，因此它可以显示在 GWT 面板中。但是一旦你按下“上传”按钮，上传是由浏览器完成的。

但是，您可以使用另一种技术进行文件操作。例如 Java 小程序。但那是在GWT区域之外......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-08T20:48:22.757

**使用 GWT，还没有**办法在客户端读取文件。但是，在 HTML5 中，您可以读取文件而无需使用“文件 API”上传到服务器。

下面提供了链接。

[html5rocks.com 上的文件 API 教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

[如何通过 JSNI 在 GWT 中使用 File API 的示例](http://code.google.com/p/gwt-nes-port/wiki/FileAPI)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-06T19:00:27.513

您是指来自`<input type="file"...>`表单中的文件上传字段吗？

简短的回答是不——文件上传由浏览器处理，并直接发送到服务器（作为 ENCODING_MULTIPART POST）。JavaScript 的安全限制意味着无法解决该限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T00:46:35.547

我很确定因为 GWT 代码编译为纯 JavaScript，所以没有办法不需要一些第三方浏览器插件。

# php - 在 php 中读取常量 UDP 流

> ID：490074
> 
> 赞同：1
> 
> 时间：2009-01-29T00:47:12.770
> 
> 标签：php, sockets

我如何去读取几乎不断发送到我的服务器的数据。协议是udp。如果我尝试在 while(1) 循环中阅读，我什么也得不到。似乎只有在所有阅读完成后才会回显。所以它一直等到循环完成读取它永远不会。我希望 socket_read 在获取数据时立即回显。这是不起作用的代码。提前致谢。

```
<?php
$sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
socket_bind($sock, $local, $port) or die('Could not bind to address');

//this is where the reading loop should go.
while(1)
{
    echo socket_read($sock,1024);
}

socket_close($sock);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T00:51:11.700

尝试在该 echo 语句之后立即调用[flush() 。](http://www.php.net/manual/en/function.flush.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T00:54:36.780

这样的事情可能会有所帮助：

```
do {
    echo socket_read($handle,1024);
    $status = socket_get_status($handle);
} while($status['unread_bytes']); 
```

或者

```
while ( $buffer = @socket_read($sock,512,PHP_NORMAL_READ) )
    echo $buffer; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T01:13:40.953

关于 socket_read() 的 PHP 手动条目在谈到它正在做多少（如果有的话）内部缓冲时有点含糊。鉴于您传递 1024 作为长度，它指定它应该在接收到不超过 1024 字节的数据后返回。

**免责声明：**以下只是推测，因为我不知道 socket_read() 的内部实现。

如果 socket_read() 函数使用其长度参数作为内部缓冲区大小的提示，您可能会看到小型 UDP 数据包的性能不佳。例如，如果 socket_read() 等待 1024 字节的数据而不管数据包的大小，如果您不断接收 60 字节的 UDP 数据包，则缓冲区填充和函数返回需要一段时间。

（注意：在查找了 Tim 提到的“unread_bytes”字段后，看起来 PHP 确实保留了内部缓冲区，但没有提及这些缓冲区的大小。）

在这种情况下，一旦缓冲区填满，socket_read() 将返回更大的数据块，以减少处理资源消耗，但会以更高的延迟为代价。如果您需要尽可能过去的数据包，也许设置一个较低长度的字段会起作用。这将迫使 socket_read() 更快地返回，尽管以更频繁地执行循环为代价。此外，如果您将长度设置得太低，您的 socket_read() 可能会开始返回不完整的数据包，因此您必须在代码中考虑这一点。（当然，如果这对您的申请很重要。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T18:53:56.737

我需要调用 ob_flush();。以前从未听说过。原来我的问题不是循环，而是 php 在实际将内部缓冲区发送到 Web 浏览器之前自然会等到脚本完成这一事实。调用flush(); 其次是 ob_flush(); 将强制 php 立即将其存储的任何缓冲区发送到浏览器。这对于不会停止（无限循环）并希望将数据回显到浏览器的脚本来说是必需的。有时，flush() 不起作用，因为它在这种情况下不起作用。希望有帮助。

# ruby-on-rails - Ruby 数组操作（Ruby 1.8 和 Rails 2.2）

> ID：490078
> 
> 赞同：2
> 
> 时间：2009-01-29T00:48:13.237
> 
> 标签：ruby-on-rails, ruby

我绝望地试图编写一种方法来操作 ruby​​ 中的数组。我正在尝试生成数组的所有有序排列，其中每个项目依次被外部项目替换。一个例子...

给定输入：

```
arr = ["a", "b", "c"] 
```

期望的输出：

```
newArr = [ ["a", "b", "c"], ["a", "b", "*"], ["a", "*", "c"], ["a", "*", "*"], ["*", "b", "c"], ["*", "b", "*"], ["*", "*", "c"], ["*", "*", "*"] ] 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T02:21:33.000

我也不明白你的示例顺序，但忽略这一点，这里有一个解决方案：

```
(0...(2**a.size)).map {|x| (0...a.size).map {|y| x & 2**y == 0 ? a[y] : val}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T01:42:52.987

我不确定排列是正确的词。如果你用二进制计算，那么如果有一个东西，你就是在替换这些东西。这是在 Ruby 中的：

```
def mike(arr, sub)
  format = sprintf("%%0%db", arr.length)
  m = Array.new
  0.upto(2**arr.length-1) { |i|
    bits = sprintf(format, i).split('')
    a = Array.new
    0.upto(arr.length-1) { |j|
      if bits[j] == '0' then
        a << arr[j]
      else
        a << sub
      end
    }
    m[i] = a
  }
  return m
end

arr = ["a", "b", "c"]

p mike(arr, '*') 
```

三元运算符的 if-then-else 是否更好？

```
a <<= bits[j] == '0' ? arr[j] : sub 
```

必须有一种更聪明（或者，至少是更多 Rubyesque）的方法来做到这一点，但它似乎产生了所需的输出。

**埃塔**：哎呀！我的第二项和第三项与您的不一致。我想我不知道你的意思是什么顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T02:16:30.640

类似于 oylenshpeegui 的方法：

```
def toggle(arr, sub)
  format = "%0#{arr.length}b"
  (0...2**(arr.length)).to_a.map do |i|
    sprintf(format,i).split('').zip(arr).map { |x| x[0] == "0" ? x[1] : sub }
  end
end 
```

split/zip 组合将索引的二进制扩展的每个数字与其选择的元素匹配。最后的映射使用数字来决定它是否应该返回数组元素或替换。

# java - Java 泛型：列表、列表, List Can someone explained, as detailed as possible, the differences between the following types? List List<Object> List<?> Let me make this more specific. When 问问题 ForYourOwnGood 问问题 2009-01-29T00:56:33.843 46549 次 This question shows research effort; it is useful and clear 71 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Can someone explained, as detailed as possible, the differences between the following types? List List<Object> List<?> Let me make this more specific. When would I want to use // 1 public void CanYouGiveMeAnAnswer(List l) { } // 2 public void CanYouGiveMeAnAnswer(List<Object> l) { } // 3 public void CanYouGiveMeAnAnswer(List<?> l) { } Rather then query Active Directory through a linked server, you might be better off caching your AD data into a SQL database and then querying that instead. You could use Integration Services by creating a OLE DB connection using "OLE DB PRovider for Microsoft Directory Services" and having a DataReader source with a query like: SELECT physicalDeliveryOfficeName, department, company, title, displayName, SN, givenName, sAMAccountName, manager, mail, telephoneNumber, mobile FROM 'LDAP://DC=SOMECO,DC=COM' WHERE objectClass='User' and objectCategory = 'Person' order by mail Using this method you will still run into the 1000 row limit for results from an AD query (note it is NOT advisable to try and increase this limit in AD, it is there to prevent the domain controller from becoming overloaded). Sometimes its possible to use a combination of queries to return the full data set, e.g. names A - L and M - Z Alternatively you could use the CSVDE command line utility in Windows Server to export your directory information to a CSV file and then import it into a SQL database (see http://computerperformance.co.uk/Logon/Logon_CSVDE_Export.htm for more info on exporting AD data with CSVDE). javagenerics 4 13 回答 13 This answer is useful 104 正如其他帖子所指出的，您正在询问称为泛型的 Java 功能。在 C++ 中，这称为模板。Java 中的这个特性通常比 C++ 中的特性更容易使用。 让我在功能上回答您的问题（如果这对于 OO 讨论来说不是一个淘气的话）。 在泛型之前，有像 Vector 这样的具体类。 Vector V = new Vector(); 向量包含你给他们的任何对象。 V.add("This is an element"); V.add(new Integer(2)); v.add(new Hashtable()); 他们通过将赋予它的所有值转换为一个 Object（所有 Java 类的根）来做到这一点。当您尝试检索存储在 Vector 中的值时，您需要将该值转换回原始类（如果您想对它做任何有意义的事情）。 String s = (String) v.get(0); Integer i = (Integer) v.get(1); Hashtable h = (Hashtable) v.get(2); 铸造变老很快。不仅如此，编译器还会向您抱怨未经检查的强制转换。像这样的转换最紧迫的问题是 Vector 的使用者必须在编译时知道其值的类才能正确转换。如果 Vector 的生产者和 Vector 的消费者彼此完全隔离（想想 RPC 消息），这可能是一个致命的问题。 输入泛型。泛型尝试创建强类型类来执行泛型操作。 ArrayList<String> aList = new ArrayList<String>(); aList.add("One"); String element = aList.get(0); // no cast needed System.out.println("Got one: " + element); 《设计模式》一书鼓励读者从契约的角度思考，而不是具体的类型。将变量与其实现类分离是一种智慧（和代码重用）。 考虑到这一点，您可能会认为所有实现 List 对象都应该做相同的事情：add()、、、get()等等size()。稍微思考一下，您可以想象许多 List 操作的实现以各种方式遵守 List 协定（例如ArrayList） . 但是，这些对象处理的数据类型与对它们执行的操作是正交的。 把它们放在一起，你会经常看到以下几种代码： List<String> L = new ArrayList<String>(); 您应该将其理解为“L 是一种处理字符串对象的列表”。当您开始处理工厂类时，处理合同而不是具体实现至关重要。工厂在运行时产生各种类型的对象。 使用泛型非常容易（大多数时候）。 有一天，您可能决定要实现自己的泛型类。也许您想编写一个新的数据库抽象接口，以消除各种数据存储之间的差异。当您定义该泛型类时，您将<t>用作将由方法操作的对象类型的占位符。 如果您仍然感到困惑，请使用 List 的泛型类，直到您感到舒服为止。稍后，您可以更有信心地深入实施。或者，您可以查看 JRE 附带的各种 List 类的源代码。开源就是这样。 查看有关泛型的 Oracle/Sun文档。干杯。 于 2009-01-29T01:52:32.107 回答 This answer is useful 41 用我自己的简单术语来说： 列表 将声明一个普通集合，可以保存任何类型，并且总是返回 Object。 列表<对象> 将创建一个可以容纳任何类型对象的列表，但只能分配另一个List<Object> 例如，这不起作用； List<Object> l = new ArrayList<String>(); 当然，您可以添加任何内容，但只能拉出 Object。 List<Object> l = new ArrayList<Object>(); l.add( new Employee() ); l.add( new String() ); Object o = l.get( 0 ); Object o2 = l.get( 1 ); 最后 列表<?> 将让您分配任何类型，包括 List <?> l = new ArrayList(); List <?> l2 = new ArrayList<String>(); 这将被称为未知集合，因为未知的共同点是对象，您将能够获取对象（巧合） 当与子类一起使用时， unknown的重要性就出现了： List<? extends Collection> l = new ArrayList<TreeSet>(); // compiles List<? extends Collection> l = new ArrayList<String>(); // doesn't, // because String is not part of *Collection* inheritance tree. 我希望使用 Collection 作为类型不会造成混淆，这是我想到的唯一树。 这里的区别在于 l 是属于Collection层次结构的未知集合。 于 2009-01-29T01:30:59.500 回答 This answer is useful 15 I refer you to the excellent Java Generics tutorial, and the "advanced" Generics tutorial, both available from Sun Microsystems. Another great resource is the Java Generics and Collections book. 于 2009-01-29T01:02:09.323 回答 This answer is useful 15 要在此处添加已经很好的答案： 方法参数： List<? extends Foo> 如果您不打算更改列表，并且只关心列表中的所有内容都可以分配给类型“Foo”，那么这是一个不错的选择。这样，调用者可以传入 List<FooSubclass> 并且您的方法有效。通常是最好的选择。 List<Foo> 如果您打算将 Foo 对象添加到方法中的列表中，这是一个不错的选择。调用者可能不会传入 List<FooSubclass>，因为您打算将 Foo 添加到 List。 List<? super Foo> 如果您打算将 Foo 对象添加到列表中，这是一个不错的选择，并且列表中的其他内容并不重要（即，您可以获取包含与 Foo 无关的“Dog”的 List<Object>）。 方法返回值 就像方法参数一样，但好处相反。 List<? extends Foo> 保证返回列表中的所有内容都具有“Foo”类型。它可能是 List<FooSubclass> 。来电者无法添加到列表中。这是您的首选，也是迄今为止最常见的情况。 List<Foo> 就像列表<? extends Foo> 但也允许调用者添加到列表中。不常见。 List<? super Foo> 允许调用者将 Foo 对象添加到 List，但不保证 list.get(0) 将返回什么...它可以是从 Foo 到 Object 的任何内容。唯一的保证是这不会是 'Dog' 列表或其他会阻止 list.add(foo) 合法的选择。非常罕见的用例。 我希望这会有所帮助。祝你好运！ 附言。总结一下……两个问题…… 您需要添加到列表中吗？你关心列表中的内容吗？ 是的 - 使用 List<Foo>。 是 否 - 使用 List<? 超级富>。 否 是 - 使用 <? 扩展 Foo> --- 最常见的。 不不 - 使用 <?>。 于 2012-03-10T00:33:25.680 回答 This answer is useful 5 我将尝试详细回答这个问题。在泛型之前，我们只有List（一个原始列表），它几乎可以容纳我们能想到的任何东西。 List rawList = new ArrayList(); rawList.add("String Item"); rawList.add(new Car("VW")); rawList.add(new Runnable() { @Override public void run() { // do some work. } }); 原始列表的主要问题是当我们想从这样的列表中取出任何元素时，它只能保证它会是Object这样，因此我们需要使用强制转换为： Object item = rawList.get(0); // we get object without casting. String sameItem = (String) rawList.get(0); // we can use casting which may fail at runtime. 所以结论是一个List可以存储Object（Java中几乎所有东西都是Object）并且总是返回一个Object。 泛型 现在让我们谈谈泛型。考虑以下示例： List<String> stringsList = new ArrayList<>(); stringsList.add("Apple"); stringsList.add("Ball"); stringsList.add(new Car("Fiat")); //error String stringItem = stringsList.get(0); 在上述情况下，我们不能插入除 in 以外String的任何内容，stringsList因为 Java 编译器对泛型代码应用强类型检查，如果代码违反类型安全，则会发出错误。当我们尝试在其中插入一个Car实例时，我们会得到错误。它还消除了演员表，因为您可以检查我们何时invoke获得方法。检查此链接以了解为什么我们应该使用泛型。 List<Object> 如果您阅读有关类型擦除的内容，那么您将了解List<String>, List<Long>, List<Animal>etc. 在编译时将具有不同的静态类型，但List在运行时将具有相同的动态类型。 如果我们有，List<Object>那么它只能存储Object在其中，几乎所有内容都Object在 Java 中。所以我们可以有： List<Object> objectList = new ArrayList<Object>(); objectList.add("String Item"); objectList.add(new Car("VW")); objectList.add(new Runnable() { @Override public void run() { } }); Object item = objectList.get(0); // we get object without casting as list contains Object String sameItem = (String) objectList.get(0); // we can use casting which may fail at runtime. 看起来List<Object>和List相同，但实际上并非如此。考虑以下情况： List<String> tempStringList = new ArrayList<>(); rawList = tempStringList; // Ok as we can assign any list to raw list. objectList = tempStringList; // error as List<String> is not subtype of List<Obejct> becuase generics are not convariant. 您可以看到我们可以将任何列表分配给原始列表，其主要原因是允许向后兼容。由于类型擦除，也List<String>将List在运行时转换为，无论如何分配都会很好。 但这List<Object>意味着它只能引用对象列表，也只能存储对象。即使String是Object我们不能分配List<String>的子类型，List<Object>因为泛型不像数组那样协变。它们是不变的。另请查看此链接以获取更多信息。还要检查这个问题List和之间的区别。List<Object> List<?> 现在我们剩下的List<?>基本上意味着未知类型的列表，并且可以引用任何列表。 List<?> crazyList = new ArrayList<String>(); List<String> stringsList = new ArrayList<>(); stringsList.add("Apple"); stringsList.add("Ball"); crazyList = stringsList; // fine 该字符?被称为通配符，List<?>是一个无界通配符列表。现在有几点需要注意。 我们无法实例化此列表，因为以下代码无法编译： List<?> crazyList = new ArrayList<?>(); // any list. 我们可以说通配符参数化类型更像是接口类型，因为我们可以使用它来引用兼容类型的对象，但不能引用自身。 List<?> crazyList2 = new ArrayList<String>(); 我们无法向其中插入任何项目，因为我们不知道实际类型是什么。 crazyList2.add("Apple"); // error as you dont actually know what is that type. 现在问题出现了，我什么时候想使用List<?>？ 您可以将其视为一个只读列表，您不关心项目的类型。您可以使用它来调用诸如返回列表长度、打印列表等方法。 public static void print(List<?> list){ System.out.println(list); } List, List<?>, List<T>, List<E>, and List<Object> 您还可以检查这里的区别。 于 2015-10-27T05:51:25.817 回答 This answer is useful 4 不是“RTFM”的最简单解释： List 会产生很多编译器警告，但主要等同于： List<Object> 尽管： List<?> 基本上意味着它是通用的，但你不知道通用类型是什么。当您无法修改刚刚返回 List 的其他事物的返回类型时，它非常适合摆脱编译器警告。它的形式更有用： List<? extends SomeOtherThing> 于 2009-01-29T01:13:29.597 回答 This answer is useful 3 可能的最短解释是：第二项是一个可以容纳任何类型的列表，您可以向其中添加对象： List<Object> 您列出的第一项被视为基本上等同于此，除了您会收到编译器警告，因为它是“原始类型”。 List 第三个是可以包含任何类型的列表，但您不能向其中添加任何内容： List<?> 基本上，List<Object>当您确实有一个可以包含任何对象的列表并且您希望能够向列表中添加元素时，您可以使用第二种形式 ( )。List<?>当您收到作为方法返回值的列表时，List您使用第三种形式（ 于 2009-01-29T01:14:57.190 回答 This answer is useful 1 我这样说：虽然ListandList<Object>可以包含任何类型的对象，List<?>包含未知类型的元素，但是一旦捕获了该类型，它就只能包含该类型的元素。这就是为什么它是这三个中唯一的类型安全变体，因此通常更可取。 于 2009-01-29T01:29:39.063 回答 This answer is useful 0 List, List<?>, and List<? extends Object>是一回事。第二个更明确。对于这种类型的列表，您无法知道将哪些类型放入其中是合法的，并且您对可以从中获得的类型一无所知，除了它们将是对象。 List<Object>具体意味着列表包含任何类型的对象。 假设我们列出了以下内容Foo： List<Foo> foos= new ArrayList<Foo>(); Bar将 a放入 foos是不合法的。 foos.add(new Bar()); // NOT OK! 将任何内容放入List<Object>. List<Object> objs = new ArrayList<Object>(); objs.add(new Foo()); objs.add(new Bar()); 但是你不能被允许将 aBar放入 a List<Foo>- 这就是重点。所以这意味着： List<Object> objs = foos; // NOT OK! 是不合法的。 但是可以说 foos 是一些东西的列表，但我们不知道具体是什么： List<?> dontKnows = foos; 但这意味着必须禁止它去 dontKnows.add(new Foo()); // NOT OK dontKnows.add(new Bar()); // NOT OK 因为变量 dontKnows 不知道哪些类型是合法的。 于 2012-07-18T03:40:22.603 回答 This answer is useful 0 我什么时候想使用 public void CanYouGiveMeAnAnswer( List l ){} 当你不能做所有的铸造你自己。 我什么时候想使用 public void CanYouGiveMeAnAnswer( List l<Object> ){} 当您想限制列表的类型时。例如，这将是一个无效的论点。 new ArrayList<String>(); 我什么时候想使用 public void CanYouGiveMeAnAnswer( List l<?> ){} 大多从不。 于 2009-01-29T01:45:51.280 回答 This answer is useful 0 List < Object > 用于传递 Object 的输入类型参数。而列表 < ? > 表示通配符类型。通配符 < ? > 是未知参数类型。通配符不能用作泛型方法的类型参数，也不能用于创建类的泛型实例。通配符可用于扩展子类型类 List < ? 扩展数字>。放宽对象类型的限制，在这种情况下放宽“数字”对象类型。 于 2013-10-10T21:40:09.247 回答 This answer is useful 0 To complement the tutorials mentioned by Rob, here's a wikibook explaining the topic: http://en.wikibooks.org/wiki/Java_Programming/Generics Edit: No restrictions on type of items in list Items in list must extend Object Wildcard used by itself, so it matches anything Would it be naive of me to conclude at this point that there's hardly any/no difference at all? 于 2009-01-29T01:05:12.717 回答 This answer is useful 0 就列表功能差异而言，其他回复已经回答了这个问题。就Java泛型的适用规则而言，这是一个复杂的话题。我写了一篇关于 Java 泛型规则的深入文章，这是链接：https ://medium.com/@royalilin/java-generics-rules-1d05de86e9cb 于 2022-01-07T08:42:03.133 回答 Related 1 ios - 如何检测音效何时播放完毕？ 1 regex - 更改 DotNetNuke 6 中电子邮件地址的正则表达式错误消息 2 php - 如何对此代码进行连接以及如何在 PHP 表单中检索数据 3 iphone - 为什么我的标题没有使用核心位置改变？ 1 delphi - Delphi 版本的源兼容性 (*.pas & *.dfm) 3 sql - 如何在 SQL 中连接多个 select 语句 1 android - 如何从 android 上的实时 FFT 获得最准确的音频数据？ 1 sqlite - sqlite链接错误 0 android - 来自 Android 应用的 JSON 实验 1 vb.net - 连接消息字符串时预期语句结束 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：490091
> 
> 赞同：71
> 
> 时间：
> 
> 标签：java, generics

Can someone explained, as detailed as possible, the differences between the following types?

```
List
List<Object>
List<?> 
```

Let me make this more specific. When would I want to use

```
// 1 
public void CanYouGiveMeAnAnswer(List l) { }

// 2
public void CanYouGiveMeAnAnswer(List<Object> l) { }

// 3
public void CanYouGiveMeAnAnswer(List<?> l) { } 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2009-01-29T01:52:32.107

正如其他帖子所指出的，您正在询问称为泛型的 Java 功能。在 C++ 中，这称为模板。Java 中的这个特性通常比 C++ 中的特性更容易使用。

让我在功能上回答您的问题（如果这对于 OO 讨论来说不是一个淘气的话）。

在泛型之前，有像 Vector 这样的具体类。

```
Vector V = new Vector(); 
```

向量包含你给他们的任何对象。

```
V.add("This is an element");
V.add(new Integer(2));
v.add(new Hashtable()); 
```

他们通过将赋予它的所有值转换为一个 Object（所有 Java 类的根）来做到这一点。当您尝试检索存储在 Vector 中的值时，您需要将该值转换回*原始*类（如果您想对它做任何有意义的事情）。

```
String s = (String) v.get(0);
Integer i = (Integer) v.get(1);
Hashtable h = (Hashtable) v.get(2); 
```

铸造变老很快。不仅如此，编译器还会向您抱怨未经检查的强制转换。*像这样的转换最紧迫的问题是 Vector 的使用者必须在编译时*知道其值的类才能正确转换。如果 Vector 的生产者和 Vector 的消费者彼此完全隔离（想想 RPC 消息），这可能是一个致命的问题。

输入泛型。泛型尝试创建强类型类来执行泛型操作。

```
ArrayList<String> aList = new ArrayList<String>();
aList.add("One");
String element = aList.get(0); // no cast needed
System.out.println("Got one: " + element); 
```

《*设计模式*》一书鼓励读者从契约的角度思考，而不是具体的类型。将变量与其实现类分离是一种智慧（和代码重用）。

考虑到这一点，您可能会认为所有实现 List 对象都应该做相同的事情：`add()`、、、`get()`等等`size()`。稍微思考一下，您可以想象许多 List 操作的实现以各种方式遵守 List 协定（例如`ArrayList`） . 但是，这些对象处理的数据类型与对它们执行的操作是正交的。

把它们放在一起，你会经常看到以下几种代码：

```
List<String> L = new ArrayList<String>(); 
```

您应该将其理解为“L 是一种处理字符串对象的列表”。当您开始处理工厂类时，处理合同而不是具体实现至关重要。工厂在运行时产生各种类型的对象。

使用泛型非常容易（大多数时候）。

有一天，您可能决定要实现自己的泛型类。也许您想编写一个新的数据库抽象接口，以消除各种数据存储之间的差异。当您定义该泛型类时，您将`<t>`用作将由方法操作的对象类型的占位符。

如果您仍然感到困惑，请使用 List 的泛型类，直到您感到舒服为止。稍后，您可以更有信心地深入实施。或者，您可以查看 JRE 附带的各种 List 类的源代码。开源就是这样。

查看有关泛型的 Oracle/Sun[文档](http://www.oracle.com/technetwork/articles/javase/generics-136597.html)。干杯。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2009-01-29T01:30:59.500

用我自己的简单术语来说：

> 列表

将声明一个普通集合，可以保存任何类型，并且总是返回 Object。

> 列表<对象>

将创建一个可以容纳任何类型对象的列表，但只能分配另一个*List<Object>*

例如，这不起作用；

```
List<Object> l = new ArrayList<String>(); 
```

当然，您可以添加任何内容，但只能拉出 Object。

```
List<Object> l = new ArrayList<Object>();

l.add( new Employee() );
l.add( new String() );

Object o = l.get( 0 );
Object o2 = l.get( 1 ); 
```

最后

> 列表<?>

将让您分配任何类型，包括

```
List <?> l = new ArrayList(); 
List <?> l2 = new ArrayList<String>(); 
```

这将被称为*未知集合，因为**未知*的共同点是对象，您将能够获取对象（巧合）

*当与子类一起使用时， unknown*的重要性就出现了：

```
List<? extends Collection> l = new ArrayList<TreeSet>(); // compiles

List<? extends Collection> l = new ArrayList<String>(); // doesn't,
// because String is not part of *Collection* inheritance tree. 
```

我希望使用 Collection 作为类型不会造成混淆，这是我想到的唯一树。

这里的区别在于 l 是属于*Collection*层次结构的*未知集合。*

 ** * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-01-29T01:02:09.323

I refer you to the excellent [Java Generics tutorial](http://java.sun.com/docs/books/tutorial/java/generics/index.html), and the ["advanced" Generics tutorial](http://java.sun.com/docs/books/tutorial/extra/generics/index.html), both available from Sun Microsystems. Another great resource is the [Java Generics and Collections](http://oreilly.com/catalog/9780596527754) book.

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-03-10T00:33:25.680

要在此处添加已经很好的答案：

**方法参数：**

`List<? extends Foo>`

如果您不打算更改列表，并且只关心列表中的所有内容都可以分配给类型“Foo”，那么这是一个不错的选择。这样，调用者可以传入 List<FooSubclass> 并且您的方法有效。通常是最好的选择。

`List<Foo>`

如果您打算将 Foo 对象添加到方法中的列表中，这是一个不错的选择。调用者可能不会传入 List<FooSubclass>，因为您打算将 Foo 添加到 List。

`List<? super Foo>`

如果您打算将 Foo 对象添加到列表中，这是一个不错的选择，并且列表中的其他内容并不重要（即，您可以获取包含与 Foo 无关的“Dog”的 List<Object>）。

**方法返回值**

就像方法参数一样，但好处相反。

`List<? extends Foo>`

保证返回列表中的所有内容都具有“Foo”类型。它可能是 List<FooSubclass> 。来电者无法添加到列表中。这是您的首选，也是迄今为止最常见的情况。

`List<Foo>`

就像列表<? extends Foo> 但也允许调用者添加到列表中。不常见。

`List<? super Foo>`

允许调用者将 Foo 对象添加到 List，但不保证 list.get(0) 将返回什么...它可以是从 Foo 到 Object 的任何内容。唯一的保证是这不会是 'Dog' 列表或其他会阻止 list.add(foo) 合法的选择。非常罕见的用例。

我希望这会有所帮助。祝你好运！

附言。总结一下……两个问题……

> 您需要添加到列表中吗？你关心列表中的内容吗？
> 
> 是的 - 使用 List<Foo>。
> 
> 是 否 - 使用 List<? 超级富>。
> 
> 否 是 - 使用 <? 扩展 Foo> --- 最常见的。
> 
> 不不 - 使用 <?>。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-27T05:51:25.817

我将尝试详细回答这个问题。在泛型之前，我们只有`List`（一个原始列表），它几乎可以容纳我们能想到的任何东西。

```
List rawList = new ArrayList();
rawList.add("String Item");
rawList.add(new Car("VW"));
rawList.add(new Runnable() {
            @Override
            public void run() {
               // do some work.
            }
        }); 
```

原始列表的主要问题是当我们想从这样的列表中取出任何元素时，它只能保证它会是`Object`这样，因此我们需要使用强制转换为：

```
 Object item = rawList.get(0); // we get object without casting.
   String sameItem = (String) rawList.get(0); // we can use casting which may fail at runtime. 
```

所以结论是一个`List`可以存储Object（Java中几乎所有东西都是Object）并且总是返回一个Object。

## 泛型

现在让我们谈谈泛型。考虑以下示例：

```
List<String> stringsList = new ArrayList<>();
stringsList.add("Apple");
stringsList.add("Ball");
stringsList.add(new Car("Fiat")); //error
String stringItem = stringsList.get(0); 
```

在上述情况下，我们不能插入除 in 以外`String`的任何内容，`stringsList`因为 Java 编译器对泛型代码应用强类型检查，如果代码违反类型安全，则会发出错误。当我们尝试在其中插入一个`Car`实例时，我们会得到错误。它还消除了演员表，因为您可以检查我们何时`invoke`获得方法。检查此链接以了解[为什么我们应该使用泛型](https://docs.oracle.com/javase/tutorial/java/generics/why.html)。

## `List<Object>`

如果您阅读有关类型擦除的内容，那么您将了解`List<String>, List<Long>, List<Animal>`etc. 在编译时将具有不同的静态类型，但`List`在运行时将具有相同的动态类型。

如果我们有，`List<Object>`那么它只能存储`Object`在其中，几乎所有内容都`Object`在 Java 中。所以我们可以有：

```
 List<Object> objectList = new ArrayList<Object>();
 objectList.add("String Item");
 objectList.add(new Car("VW"));
 objectList.add(new Runnable() {
        @Override
        public void run() {

        }
 });
 Object item = objectList.get(0); // we get object without casting as list contains Object
 String sameItem = (String) objectList.get(0); // we can use casting which may fail at runtime. 
```

**看起来`List<Object>`和`List`相同，但实际上并非如此。**考虑以下情况：

```
List<String> tempStringList = new ArrayList<>();
rawList = tempStringList; // Ok as we can assign any list to raw list.
objectList = tempStringList; // error as List<String> is not subtype of List<Obejct> becuase generics are not convariant. 
```

您可以看到我们可以将任何列表分配给原始列表，其主要原因是允许向后兼容。由于类型擦除，也`List<String>`将`List`在运行时转换为，无论如何分配都会很好。

但这`List<Object>`意味着它只能引用对象列表，也只能存储对象。即使`String`是`Object`我们不能分配`List<String>`的子类型，`List<Object>`因为泛型不像数组那样协变。它们是不变的。另请查看此[链接](https://docs.oracle.com/javase/tutorial/java/generics/inheritance.html)以获取更多信息。还要检查这个[问题](https://stackoverflow.com/questions/6783316/list-vs-listobject)`List`和之间的区别。`List<Object>`

## `List<?>`

现在我们剩下的`List<?>`基本上意味着未知类型的列表，并且可以引用任何列表。

```
List<?> crazyList = new ArrayList<String>();
 List<String> stringsList = new ArrayList<>();
 stringsList.add("Apple");
 stringsList.add("Ball");
 crazyList = stringsList; // fine 
```

该字符`?`被称为通配符，`List<?>`是一个无界通配符列表。现在有几点需要注意。

我们无法实例化此列表，因为以下代码无法编译：

```
List<?> crazyList = new ArrayList<?>(); // any list. 
```

我们可以说通配符参数化类型更像是接口类型，因为我们可以使用它来引用兼容类型的对象，但不能引用自身。

```
List<?> crazyList2 = new ArrayList<String>(); 
```

我们无法向其中插入任何项目，因为我们不知道实际类型是什么。

```
crazyList2.add("Apple"); // error as you dont actually know what is that type. 
```

**现在问题出现了，我什么时候想使用`List<?>`？**

您可以将其视为一个只读列表，您不关心项目的类型。您可以使用它来调用诸如返回列表长度、打印列表等方法。

```
 public static void print(List<?> list){
        System.out.println(list);
    } 
```

`List, List<?>, List<T>, List<E>, and List<Object>` [您还可以检查这里](https://stackoverflow.com/questions/6231973/difference-between-list-list-listt-liste-and-listobject)的区别。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-29T01:13:29.597

不是“RTFM”的最简单解释：

```
List 
```

会产生很多编译器警告，但主要等同于：

```
List<Object> 
```

尽管：

```
List<?> 
```

基本上意味着它是通用的，但你不知道通用类型是什么。当您无法修改刚刚返回 List 的其他事物的返回类型时，它非常适合摆脱编译器警告。它的形式更有用：

```
List<? extends SomeOtherThing> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-29T01:14:57.190

可能的最短解释是：第二项是一个可以容纳任何类型的列表，您可以向其中添加对象：

```
List<Object> 
```

您列出的第一项被视为基本上等同于此，除了您会收到编译器警告，因为它是“原始类型”。

```
List 
```

第三个是可以包含任何类型的列表，但您不能向其中添加任何内容：

```
List<?> 
```

基本上，`List<Object>`当您确实有一个可以包含任何对象的列表并且您希望能够向列表中添加元素时，您可以使用第二种形式 ( )。`List<?>`当您收到作为方法返回值的列表时，`List`您使用第三种形式（

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-29T01:29:39.063

我这样说：虽然`List`and`List<Object>`可以包含任何类型的对象，`List<?>`包含未知类型的元素，但是一旦捕获了该类型，它就只能包含该类型的元素。这就是为什么它是这三个中唯一的类型安全变体，因此通常更可取。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-18T03:40:22.603

`List, List<?>, and List<? extends Object>`是一回事。第二个更明确。对于这种类型的列表，您无法知道将哪些类型放入其中是合法的，并且您对可以从中获得的类型一无所知，除了它们将是对象。

`List<Object>`具体意味着列表包含任何类型的对象。

假设我们列出了以下内容`Foo`：

```
List<Foo> foos= new ArrayList<Foo>(); 
```

`Bar`将 a放入 foos是不合法的。

```
foos.add(new Bar()); // NOT OK! 
```

将任何内容放入`List<Object>`.

```
List<Object> objs = new ArrayList<Object>();
objs.add(new Foo());
objs.add(new Bar()); 
```

但是你不能被允许将 a`Bar`放入 a `List<Foo>`- 这就是重点。所以这意味着：

```
List<Object> objs = foos; // NOT OK! 
```

是不合法的。

但是可以说 foos 是一些东西的列表，但我们不知道具体是什么：

```
List<?> dontKnows = foos; 
```

但这意味着必须禁止它去

```
dontKnows.add(new Foo()); // NOT OK
dontKnows.add(new Bar()); // NOT OK 
```

因为变量 dontKnows 不知道哪些类型是合法的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-29T01:45:51.280

> *我什么时候想使用*

```
public void CanYouGiveMeAnAnswer( List l ){} 
```

当你不能做所有的铸造你自己。

> *我什么时候想使用*

```
public void CanYouGiveMeAnAnswer( List l<Object> ){} 
```

当您想限制列表的类型时。例如，这将是一个无效的论点。

```
 new ArrayList<String>(); 
```

> *我什么时候想使用*

```
public void CanYouGiveMeAnAnswer( List l<?> ){} 
```

大多从不。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-10T21:40:09.247

List < Object > 用于传递 Object 的输入类型参数。而列表 < ? > 表示通配符类型。通配符 < ? > 是未知参数类型。通配符不能用作泛型方法的类型参数，也不能用于创建类的泛型实例。通配符可用于扩展子类型类 List < ? 扩展数字>。放宽对象类型的限制，在这种情况下放宽“数字”对象类型。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-29T01:05:12.717

To complement the tutorials mentioned by Rob, here's a wikibook explaining the topic:
[http://en.wikibooks.org/wiki/Java_Programming/Generics](http://en.wikibooks.org/wiki/Java_Programming/Generics)

* * *

Edit:

1.  No restrictions on type of items in list

2.  Items in list must extend Object

3.  Wildcard used by itself, so it matches anything

Would it be naive of me to conclude at this point that there's hardly any/no difference at all?

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-07T08:42:03.133

就列表功能差异而言，其他回复已经回答了这个问题。就Java泛型的适用规则而言，这是一个复杂的话题。我写了一篇关于 Java 泛型规则的深入文章，这是链接：[https ://medium.com/@royalilin/java-generics-rules-1d05de86e9cb](https://medium.com/@royalilin/java-generics-rules-1d05de86e9cb)

# project-management - 我如何让我的团队保持参与和积极性？

> ID：490096
> 
> 赞同：7
> 
> 时间：2009-01-29T00:59:30.793
> 
> 标签：project-management

我目前是一名研究生，但在回到学校之前我在这个行业工作了几年。

我在一个由 4 人组成的团队参与相当雄心勃勃的项目的班级。由于一直在这个行业，我有很多我的队友所缺乏的“软件工程”经验（他们本学期第一次使用SVN）。他们都是非常优秀的程序员；但是他们在构建“真实的东西”方面没有很多经验。

因为我对一个项目有一个相当具体的愿景，而我的队友没有，所以我的想法是我们将在这个学期花时间研究的那个。最重要的是，由于我的经验，加上我承认我有一些坚强的个性这一事实，我已经成为事实上的团队负责人——确定每周会议时间，分配初始任务等。

我想避免这样的陷阱：我对我们应该做什么和应该怎么做的想法过于强烈，以至于我的队友觉得他们没有发言权，变得不参与和超然。

所以这是一个问题：

在执行基本的最佳实践（版本控制、里程碑等）和连贯的项目愿景的同时，我如何才能让我的散漫但有才华的程序员团队保持积极性？

**编辑：**感谢到目前为止回答的所有人。我认为我过分强调了事物的“软件工程”方面。我也在寻找如何鼓励我的队友为设计做出贡献的想法，并在项目中感受到所有权，目前有点“ **The SquareCog**（和朋友）**展示**！”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-29T01:04:01.800

我发现的最好的方法与代码无关：团队午餐。

在一个非正式的环境中聚在一起，你们每个人都谈论你的问题、顾虑、想法等。这有助于团队团结，这是其他方式很少能做到的。

至于它的实际代码方面，尽量减少他们在您希望他们工作的框架内工作所需的工作量。如果您希望他们使用票证，请为他们做实际的管理工作——让他们告诉您票证是什么，并让您进行管理这些事情的实际工作。这似乎需要很长时间，但总体而言，与沟通和协调不佳的成本相比，它是微不足道的。它很快就会得到回报。

对于版本控制，向他们展示为什么它真正使他们受益。当程序员看到他们真正帮助他们而不只是成为一个 PITA 时，他们会接受想法并与他们一起运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T01:11:33.050

我认为开发人员是非常实际的人。

发挥典型开发人员个性的特征：1\. 创造力 2\. 好奇心 3\. 实用性

按照您的直接示例，源代码控制：

我们大多数人（我的意思是根据我自己的经验）一开始都*看不到*源代码管理的重点（只是因为），所以请始终让他们了解使用源代码管理背后的原因。

另一件事是.. 谁决定继续使用 SVN？还有其他选择，因为我是一个 Git，我会拼命争取没有 SVN！（双关语）

您应该/可以向他们解释，而不是拉他们的鼻子：

我们需要源代码控制，找到一个你喜欢的，然后投票决定我们用来控制源代码的东西。这样就有一个共同的所有权......而不仅仅是跟随领导者的练习。

另一件事是，在实施时要灵活。

制定一个必要的计划，但要准备好在需要时实施它们，或者当所有人都明白应该实施 x、y 或 z 实践时。

让他们向您寻求建议，让他们需要实施您所知道的工具、资源和规划技术。（这并不意味着您不能在内部布置最佳实践博客或以其他方式让他们事先访问此信息）

开发人员喜欢学习和成长，但我们需要对我们前进的方向拥有所有权和理解。

如果你试图强迫喂养和驱动他们太多，你和他们都会失去动力，启蒙需要自我驱动的力量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T01:06:14.010

我曾多次处于类似的位置。

有时我只是负责，然后被诅咒。很公平。

很多时候，我抵制了这种冲动；我试图鼓励我的同事带头。有时这有效，有时无效。

有时，我只是干净利落。“我似乎在接管，这就是我的本性。但我不想铁路你们。还有谁愿意带头？如果没有，你对我已经提出的意见满意吗？有的话说出来好主意...”。同样，有时这有效，但并非总是如此。

最终，你可以“牵马下水”……项目需要牵头，如果没有其他人能接受挑战，你最好自己做。

一旦你有领导，以身作则......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T01:09:21.243

Scrum 怎么样（即使你不这么称呼它）。让每个人都有机会发表自己的意见，而你倾听。作为强有力的个性，给其他人一个真正的机会来交流他们的想法（不是你的）是迈向和谐的好一步。

最重要的是，他们将从您的技术经验中学习，您将从他们的想法和热情中学习。一个好的领导者总是乐于沟通，你设定了方向和愿景（你确实选择了项目），他们想出了聪明的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T01:03:42.423

提供非金钱奖品或奖励

给他们自己的领域来“拥有”。即使他们可能不为这个项目感到自豪，他们也会想让自己的领域出类拔萃。让他们质疑，他们的领域是否可以重构或改进。这将使他们学习新的技术或实践。

让他们边学习边学习（分小阶段），然后向他们展示正确的方法。让他们按照自己的方式做事失败，但给他们时间以正确的方式做事。

*更新*：
很抱歉让上述声音听起来像是团队负责人将控制正确的事情。这意味着更多的*代码审查*可以由团队中的任何人完成。他们可以作为一个团队一起推进变更/重构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T01:04:24.047

*   该项目应该足够有趣以使他们参与
*   该技术也应该是最新的
*   让他们知道这就是行业的发展方式，并且他们将获得必要的经验以超越其他程序员
*   提供奖品并惩罚破坏构建的人
*   轮换职位让他们测试自己的领导能力

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-07-26T01:48:46.047

我目前正在攻读硕士学位，并且经常进行小组项目。团队中只有 1 或 2 名成员在做这个项目并不罕见。不仅来自我的项目，还来自与其他人的交谈。基本上你所说的“SquareCog”和朋友节目并不是不切实际的。

确实，团队中的人越多，人们就越懒惰。由于他们发明了大量的想法，而他们无意遵循这些想法，因此与他们交流的时间也越多。众所周知，有时额外的程序员不再为项目提供帮助。只有这么多你可以打破的东西。过度这样做会减慢速度，而不仅仅是将一部分分配给一个人并产生更多的依赖关系。

普通学生也有一个舒适区，所以即使你可以让他们做一些工作，他们也会留在他们的舒适区。大多数项目必须有人离开他们的舒适区（除非有人已经知道课堂上的信息）才能成功。大多数时候，我发现我是我小组中唯一愿意这样做的人，而有些小组没有人。最激进的例子是一个 7 人项目，几乎没有人做任何事情。另一个人愿意做一些轻量级的系统管理任务，然后是网页设计，这在他的舒适范围内。一个女孩做了一些数据库设计（我的意思是一些，因为我基本上将设计作为一个高级大纲，她用列名/数据类型形式化了）。其余的完全没有做任何事情。该课程是分布式系统，所以有人需要学习 JBoss（和 Enterprise Java Beans）、Amazon Web Services 等……但这并不重要。在数据挖掘课程中，有人必须弄清楚要使用哪些技术以及如何使用工具包。

还有很多学生不是好的程序员。事实上，在我的一个小组中，有人根本不会编程。真的根据他的描述，MBA 听起来对他来说是合适的学位，但无论如何，他通过将他的编程外包给朋友/承包商来完成 CS 硕士学位......许多只是糟糕的程序员，不仅仅是风格，他们不能't debug hello world with visual studio....与其理解出了什么问题，他们只会继续添加代码，直到它巧合地工作。

经常发生的一件事是，人们提出了相当雄心勃勃的项目，但在一个学期内是不现实的。通常我最终会拿剪刀把它剪成一个准系统项目，并提供一旦我们完成了准系统部分，我们就可以对其进行改进并添加更高级的东西。几乎总是发生的事情是人们拖延完成它，最后在我们完成准系统之后，没有人愿意做任何额外的事情。

研究生有2种。参加 4-5 节课的全日制研究生，在这种情况下，他们无法承受每周 40/80 甚至 20 小时的工作时间在项目上。或者是兼职的研究生，他们有一份日常工作，在这种情况下，他们会上 1 或 2 节课，并且有一份全职工作，这样他们的时间就更少了。我会说，作为一般估计，您可以计算出每个研究生班 6 小时的家庭作业（大多数人会花更少的钱）。假设一个普通的班级，可能是 3-4 或者需要花在学习/阅读上。这使得每人每周有 2-3 小时的时间来从事该项目。即使得到那么多也很好。

有些想法像团队午餐一样浮出水面，根本不现实。许多研究生班都有小组项目，全职员工每周不能做 4 或 5 次团队午餐，这就像每周浪费 5 个小时的时间可以花在一个项目上。如果您去餐馆并期望所有人都买午餐，也可能存在金钱问题。对于像我这样兼职的人，我不会参加团队午餐，因为我在大学之夜的工作时间是 9-6+ 或 8-5。

*也许你最好的选择是找到人们的舒适区并找出你可以分配给他们的任务。还要识别免费加载者，而不是在他们身上浪费时间。*

还为学校项目使用版本控制似乎有点矫枉过正。如果整个班级只是项目可能不是。但是假设这是一个正常的课程，有讲座、考试和家庭作业，项目完成了，那么任何花在基础设施上的时间都是你没有完成项目的时间。确实，虽然对于专业环境来说不切实际，但学校项目就像初创企业。完成它们，即使代码是一团糟。您以后可以随时清理。但如果你不完成它，你的成绩就会受到影响。实际上，一旦完成，我不想清理它，其他人也不会这样做....让每个人都使用源代码控制（除非您共享一台机器）会浪费大量时间来解决设置问题，并调整人们使用它。我不知道你的项目是什么。但是对于许多研究生项目，您必须进行一些研究/实验，然后编程代码相对简单。一节课让我完成了一个 5,000 行的项目，幸运的是这不是一个小组项目。

*再次在项目上保持简单。您可以协调各个部分，分配不同的部分，并在完成后检查/测试它，然后将其与您的版本控制集成，让他们自由地从事项目中最舒适的工作。*

许多人会很乐意让你设计这个东西，实施这个东西，然后什么都不学，只是拿到成绩。这是他们的损失，因为他们不会从项目中吸取教训。但他们对 squarecog 和朋友只是 squarecog 非常满意。有些人会想贡献一些东西，但他们是少数。如果你得到其中一个对你来说太棒了！！！还要注意过度工程。你必须现实地看待事情。每个小组成员每周 3 小时会很棒，但我发现即使这样也不现实。当一个项目到期时，有时你每周可能会从一个偷懒的人那里得到 5 或 10 个小时。但你不能期待更多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-08-05T15:45:47.753

[如何赢得朋友和影响他人](http://en.wikipedia.org/wiki/How_to_Win_Friends_and_Influence_People)有以下建议：

> 处理人的基本技巧
> 
> 1.  不要批评、谴责或抱怨。
> 2.  给予诚实和真诚的赞赏。
> 3.  唤起对方渴望的欲望。
> 
> 让人们喜欢你的六种方法
> 
> 1.  对他人真正感兴趣。
> 2.  微笑。
> 3.  请记住，一个人的名字对他来说是任何语言中最甜美和最重要的声音。
> 4.  做一个好的倾听者。鼓励他人谈论自己。
> 5.  谈论对方的兴趣。
> 6.  让对方觉得自己很重要，并且真诚地去做。
> 
> 让人们接受你的思维方式的十二种方法
> 
> 1.  避免争论。
> 2.  尊重他人的意见。永远不要告诉别人他们错了。
> 3.  如果你错了，请迅速而坚定地承认。
> 4.  以友好的方式开始。
> 5.  从其他人会回答是的问题开始。
> 6.  让对方说话。
> 7.  让对方觉得这个想法是他/她的。
> 8.  诚实地尝试从他人的角度看待事情。
> 9.  同情对方。
> 10.  诉诸崇高的动机。
> 11.  戏剧化你的想法。
> 12.  抛出一个挑战，当这个人不在的时候不要说消极的，只说积极的。
> 
> 成为领导者：如何在不冒犯或引起怨恨的情况下改变人
> 
> 1.  从赞美和诚实的欣赏开始。
> 2.  间接引起对他人错误的关注。
> 3.  先说说自己的错误。
> 4.  提出问题而不是直接下达命令。
> 5.  让对方挽回面子。
> 6.  赞美每一个改进。
> 7.  给他们一个不负众望的好名声。
> 8.  通过让他们的错误看起来很容易纠正来鼓励他们。
> 9.  让对方对按照你的建议去做感到高兴。

In addition to this, "[Top Three Motivators For Developers (Hint: not money!)](http://www.lessonsoffailure.com/developers/autonomy-mastery-purpose/)" notes the *Autonomy, Mastery, and Purpose* ideas that can also be great motivators for people when it comes to creative work.

# windows - Destination Folder Access Denied - You need permission to perform this action

> ID：490105
> 
> 赞同：6
> 
> 时间：2009-01-29T01:02:58.900
> 
> 标签：windows

Sometimes I get this error message when trying to move, rename, or otherwise manipulate some files or folders on my computer...

[Destination Folder Access Denied You need permission to perform this action http://img222.imageshack.us/img222/1581/destinationfolderaccessms9.jpg](http://img222.imageshack.us/img222/1581/destinationfolderaccessms9.jpg)

What do I need to do to gain control?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2010-04-07T06:34:51.730

不要听vista，它会说谎！！！

我遇到了这个问题，并且无法通过以管理员身份运行、获得所有权（我已经是所有者）等方式解决它。结果问题是另一个进程（textpad）在我试图重命名的目录下面打开了一个文件。错误消息完全具有误导性，问题是文件打开以供写入，与安全权限无关。

啊啊啊啊！！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T01:03:20.770

Take *ownership* of the folders and files...

1.  Right-click the folder that you want to take ownership of, and then click Properties.

2.  Click the Security tab, click Advanced, and then click the Owner tab.

3.  Click Edit. If you are prompted for an administrator password or confirmation, type the password or provide confirmation.

4.  Click the name of the person you want to give ownership to.

5.  If you want that person to be the owner of files and subfolders in this folder, select the Replace owner on subcontainers and objects check box.

6.  Click OK.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-07T04:28:36.887

使用[解锁](http://www.softpedia.com/get/System/System-Miscellaneous/Unlocker.shtml)器知道是谁锁定了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T01:04:56.150

You may get this error when one of the files contained within the folder may in in use by a running program.

# .net - 如何测试有时会失败？

> ID：490123
> 
> 赞同：1
> 
> 时间：2009-01-29T01:08:38.903
> 
> 标签：.net, unit-testing, testing, nunit, random

我正在尝试为一个模块编写一个单元测试，它会给我一个给定特定标准的随机数字列表。

我正在编写的特定测试是对原始序列的重新洗牌。我正在测试

*   序列长度相同
*   序列具有相同的值
*   序列的顺序不同

这样做的问题是有时序列的顺序*相同*。处理这个问题的最佳方法是什么？

我正在使用 NUnit（但如果有帮助，可以使用另一个测试框架）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-29T01:20:08.053

你是如何生成随机数的？

我将首先控制您的随机数生成器的种子，并将您的第三次测试重新定义为“当我们使用不同的种子时，序列的顺序不同”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-29T01:20:11.020

*   我正在编写的特定测试是对原始序列的重新洗牌。
*   序列的顺序不同

这些要求不匹配。如果您真的是随机改组，那么显然该列表可以原样返回。

不过有一个选项。当你创建你的随机数生成器时，你可以传入一个“种子”。如果你总是传递相同的种子，你应该总是得到相同的答案。现在您已经从随机函数中取出了随机数，您可以轻松地对其进行单元测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T01:19:18.913

> 处理这个问题的最佳方法是什么？

在要求确定之前，真的没有办法“处理它”。要么要求 shuffle 确保序列无序（在这种情况下，shuffle 不是真正的“随机”），要么它们的顺序相同。如果 shuffle 以相同的顺序返回某些东西是可以接受的，那么您可以编写一个测试来检查大量运行中结果的分布是否与预期的分布相比较，但这与测试“随机“ 结果。如果 shuffle 不能返回相同的顺序，那么您可以多次运行该函数，以给您可接受的置信度，即 shuffle 不会返回相同的顺序，因此适用相同的一般原则。

希望这可以帮助！

# java - JSF 中的掩码 URL

> ID：490124
> 
> 赞同：2
> 
> 时间：2009-01-29T01:08:58.233
> 
> 标签：java, jsf, glassfish, friendly-url

我有一个用 JSF 用 JAVA 编写的企业应用程序（使用 RichFaces 3.3）。目前我的网址如下所示：

**[http://localhost/WebApplication/faces/folder1/page.jsp](http://localhost/WebApplication/faces/folder1/page.jsp)**

问题是我如何屏蔽我的网址以使其成为这样：

**[http://localhost/folder1/page.jps](http://localhost/folder1/page.jps)**

基本上我想隐藏“应用程序/面孔/”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T07:19:04.350

要在应用程序中重写 URL，您可以使用[UrlRewrite](http://tuckey.org/urlrewrite/)。但是，在这种情况下，您似乎想要删除 Web 应用程序的上下文路径，在这种情况下，您有两种选择：

1.  将您的应用程序部署到上下文路径`/`（如何特定于应用程序服务器）
2.  在端口 80 上运行 Apache 并使用 mod_proxy 将某些 URL 代理到在不同端口上运行的应用程序服务器，使用类似以下的配置。

阿帕奇配置：

```
<Proxy http://localhost:8080/*>
    Order Allow,Deny
    Allow From All
</Proxy>

ProxyPreserveHost On
ProxyPass / http://localhost:8080/WebApplication/
ProxyPassReverse / http://localhost:8080/WebApplication/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T15:10:48.030

请注意，/faces/ 是由于`web.xml`. 这是 JSF 的标准映射，但是您也可以使用扩展映射 - 即`.faces`在 URL 的末尾。

例如，在我的应用程序中，它位于 web.xml 文件中：

```
<servlet-mapping>
    <servlet-name>Persistent Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping> 
```

这是使用 IceFaces，但对于 RichFaces 来说，它与您类似。你的可能看起来像这样：`<url-pattern>/faces/*</url-pattern>`. 如果您将其更改`*.faces`为如上所述，您的最终 URL 将如下所示：

[http://localhost/WebApplication/folder1/page.faces](http://localhost/WebApplication/folder1/page.faces)

如果您将其与 Peter Hilton 给出的关于部署为根 Web 应用程序的答案结合使用，您的最终 URL 将如下所示：

[http://localhost/folder1/page.faces](http://localhost/folder1/page.faces)

这几乎正​​是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T21:52:15.423

PrettyFaces 让你重写你的 url。如果您更喜欢更轻量级的东西，请扩展 NavigationHandler 并覆盖 handleNavigation，例如通过调用 context.getExternalContext().redirect()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-03T21:15:46.783

是的。我们设计 PrettyFaces 正是为了处理这种情况：

[PrettyFaces – JSF / JSF2 的 SEO、动态参数、书签和导航](http://ocpsoft.com/prettyfaces)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-21T07:56:10.143

您还可以将文件夹名称从 faces 更改为 jsp，例如：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/jsp/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
   <welcome-file>jsp/index.jsp</welcome-file>
</welcome-file-list> 
```

然后您的网址将如下所示：

```
http://localhost/WebApplication/jsp/folder1/page.jsp 
```

如果您将应用程序部署到应用程序服务器的上下文路径 / ，它将如下所示：

```
http://localhost/jsp/folder1/page.jsp 
```

现在很难发现您将 JSF 用于 lamer ;-) 但是黑客可以通过将浏览器指向这样的 url 来调查它`http://localhost/folder1/page.jsp`

# python - QScintilla 滚动条

> ID：490130
> 
> 赞同：1
> 
> 时间：2009-01-29T01:10:18.043
> 
> 标签：python, qt, scintilla

当我将 QsciScintilla 对象添加到我的主窗口时，水平滚动条处于活动状态并且超宽（大量明显的空白）。容易修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:36:37.210

轻松修复：

```
sc.SendScintilla(sc.SCI_SETHSCROLLBAR, 0) 
```

# java - Java 消息分发/订阅？

> ID：490134
> 
> 赞同：0
> 
> 时间：2009-01-29T01:11:41.567
> 
> 标签：java

我正在用 Java 创建一组小部件，用于解码和显示在串行接口接收到的消息。

消息类型由唯一标识符定义。每个小部件只对特定标识符感兴趣。

如何以将消息正确分发到相关小部件的方式对应用程序进行编程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:15:05.007

听起来像一个 jms 主题/订阅。为什么要重新发明轮子？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T01:32:47.403

如果这是针对单个应用程序（即一个主线程和几个线程），那么 JMS 就太过分了。

其基础是一个简单的队列（Java 有几个不错的队列，BlockingQueue 在后面挥手致意）。

串行端口读取其数据，格式化一些相关的消息对象，并将其转储到中央消息队列中。这可以像 BlockingQueue 单例一样简单。

接下来，您将需要一个队列侦听器/调度程序。

这是一个单独的线程，位于队列中，等待消息。

当它收到一条消息时，它会将其分派给等待的“小部件”。

它如何“知道”哪些小部件由您决定。

它可以是一个简单的注册方案：

```
String messageType = "XYZ";
MyMessageListener listener = new MyMessageListener();
EventQueueFactory.registerListener(messageType, listener); 
```

然后您可以执行以下操作：

```
public void registerListener(String type, MessageListener listener) {
    List<MessageListener> listeners = registrationMap.get(type);
    if (listeners == null) {
        listeneres = new ArrayList<MessageListener>();
        registrationMap.put(type, listeners);
    }
    listeners.add(listener);
}

public void dispatchMessage(Message msg) {
    List<MessageListener> listeners = registrationMap.get(type);
    if (listeners != null) {
        for(MessageListener listener : listeners) {
            listener.send(msg);
        }
    }
} 
```

此外，如果您使用的是 Swing，它具有一整套 Java Bean 属性侦听器，您也可以利用这些侦听器。

这就是它的核心。那应该给你足够的绳索让你陷入困境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T01:28:36.570

一种简单的方法是通过 ID 将每个小部件添加到地图中，并通过将每个消息从地图中拉出并在其上调用某些方法来向小部件提供每条消息。这意味着每个小部件都必须实现一个接口，您可以调用该接口来显示消息。如果小部件不在您的控制范围内，那么您可以创建一个瘦包装类（实现一个接口）并将这个包装类（带有一个小部件）添加到地图中，每个 ID 一个实例。

# css - 是否可以为组合类设置 CSS？

> ID：490141
> 
> 赞同：3
> 
> 时间：2009-01-29T01:15:01.217
> 
> 标签：css, class

说我有以下内容：

```
tr {
    background: #fff;
}

tr.even {
    background: #eee
}

tr.highlight {
    background: #fec;
} 
```

是否可以指定第四个背景（`#fea`）而不是`highlight`简单地覆盖`even`？

```
<tr class="even highlight">
  <!-- ... -->
</tr> 
```

* * *

一旦支持 CSS3，`:nth-child`可能会工作。但是，在此期间有什么可用的吗？

```
tr { /* ... */ }

tr:nth-child(even) { /* ... */ }

tr.highlight { /* ... */ }

tr.highlight:nth-child(even) { /* ... */ } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-29T01:17:17.280

你可以这样做：

```
tr.even.highlight { ... } 
```

虽然 IE6 不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T01:37:16.477

分配多个类的关键是确保您的 CSS 在所有浏览器中都能正常降级。在这种情况下，这将是一个很好的解决方案：

```
tr.even.highlight { background:#fea } 
```

在识别这一点的现代浏览器中，您将获得第 4 种颜色，它将应用于：

```
<tr class='even highlight'>
...
</tr> 
```

我认为这甚至适用于 IE6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-24T07:14:21.170

IE6 确实允许组合类，但它并没有按特定性划分优先级。我的意思是，如果您尝试在多个类中应用相同的样式属性，它将按照类在样式表中列出的顺序应用于元素，而不是按照应用类的层次结构。

例如，在这种情况下，文本将按预期显示 - 即第 2 段是蓝色文本：

```
<html>
    <head>
        <style type="text/css">
            .style1 {
                color:red
            }
            .style1.selected {
                color:blue
            }
        </style>
    </head>
    <body>
        <p class="style1">paragraph 1</p>
        <p class="style1 selected">paragraph 2</p>
    </body>
</html> 
```

但是，如果交换类的顺序，如下所示，第 1 段和第 2 段都是红色文本：

```
<html>
    <head>
        <style type="text/css">
            .style1.selected {
                color:blue
            }
            .style1 {
                color:red
            }
        </style>
    </head>
    <body>
        <p class="style1">paragraph 1</p>
        <p class="style1 selected">paragraph 2</p>
    </body>
</html> 
```

所以应用了组合类，但是原始的简单类也是如此，这意味着元素匹配的最后一个类是样式它的类，如果这些类应用相同的属性。

因此，您可以通过订购 css 类来表现您的期望。但这可能不适用于所有情况，具体取决于您希望如何应用这些类。在 IE6 中解决此问题的唯一可靠方法是使用 javascript 在特定事件上添加和删除 css 类，这有点笨拙。

# c# - 两个调制解调器，C# 中的两个 SerialPort 对象

> ID：490147
> 
> 赞同：-1
> 
> 时间：2009-01-29T01:17:10.853
> 
> 标签：c#, serial-port, modem

我有两个[科胜讯传真调制解调器](http://www.conexant.com/products/entry.jsp?id=6)和一个带有两个 serialPort 对象的 C# 应用程序，用于侦听两个通信端口上的传入数据。

这是我初始化每个调制解调器的方法：

```
m_SerialPort = new SerialPort("COM3", 2400);
m_SerialPort.DataReceived += new SerialDataReceivedEventHandler(this.ReceiveChars);

try
{
    m_SerialPort.Open();
    m_SerialPort.DiscardInBuffer();
    m_SerialPort.DiscardOutBuffer();    
}
catch (Exception e)
{
    // die gracefully
}
finally
{
    m_SerialPort.DtrEnable = true;
} 
```

第二个调制解调器被初始化为不同的 SerialPort 对象，但使用“COM4”。

我第一个初始化的任何 COM 端口都可以接收数据，但第二个 COM 端口将不会接收数据。

这是我的初始化、C# 的 SerialPort 类或 Windows XP 拒绝让两个调制解调器同时运行的问题吗？

欢迎任何意见或建议。

**更新**

您是否在“设备管理器”下检查了两个端口都已配置、启用和工作？

*是的，它们都有单独的端口。*

您是否尝试过类似 Hyperterm 的方法来尝试将数据发送到端口？

*尝试在单独的超级终端中打开两个通讯端口，但未能打开第二个通讯端口。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T19:13:20.503

看起来问题只是两个[科胜讯](http://www.conexant.com/products/entry.jsp?id=6)调制解调器不能同时在同一台 PC 上运行。我从另一个供应商那里安装了另一个调制解调器，并且我能够打开两个 com 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T19:32:14.723

提示：使用此工具测试您的应用程序，它会创建虚拟 com 端口。
[http://sourceforge.net/projects/com0com/](http://sourceforge.net/projects/com0com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T02:02:04.303

您是否在“设备管理器”下检查了两个端口都已配置、启用和工作？

您是否尝试过类似 SysInternals PortMon 来监控端口？

您是否尝试过类似 Hyperterm 的方法来尝试将数据发送到端口？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T03:43:00.950

我猜想（我还能做什么？）您在 ReceiveChars 方法中做了一些顽皮的事情（也许您正在更新 GUI，而不使用 Invoke），并且这会阻止 ReceiveChars 方法被调用再次。

# ios - 如何将 OCMock 对象与调用 isKindOfClass 的代码一起使用？

> ID：490148
> 
> 赞同：7
> 
> 时间：2009-01-29T01:17:15.703
> 
> 标签：ios, objective-c, iphone, cocoa, cocoa-touch

我想用 OCMock 测试一些代码。

代码的内部调用`[NSObject isKindOfClass]`了我提供给代码的模拟对象，如下所示：

```
if ([object isKindOfClass:[FancyClass class]]) { ...} 
```

但是，当我提供这样创建的基于 OCMockObject 的模拟时：

```
mock = [OCMockObject mockForClass:[FancyClass class]]; 
```

看来它没有通过`isKindOfClass`测试。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T02:20:24.157

一般规则是，如果您正在调用`isKindOfClass:`并且您没有传递 plist 类之一（例如，NSString 或 NSNumber），那么您做错了。

如果该方法根据其参数是哪个类做了两个或多个不同的事情，则将其拆分为多个方法，并分别测试每个方法。

如果该方法只做一件事，但必须根据对象的类别以不同的方式与对象交互，那么：

1.  制定协议。（Obj-C 中的协议在其他一些 OO 语言中称为“接口”，例如 Java。）
2.  使许多类都符合协议。如有必要，使用类别从外部添加必要的方法。
3.  代替当前检查，使被测方法检查是否符合协议`isKindOfClass:`。
4.  使被测方法使用协议中的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-06T18:37:56.683

关于什么：

```
 [[[mock stub] andReturnValue:OCMOCK_VALUE((BOOL) {YES})] isKindOfClass:[FancyClass class]]; 
```

# svn - SVN - 重新整合合并错误：“必须与祖先相关”

> ID：490164
> 
> 赞同：73
> 
> 时间：2009-01-29T01:24:41.040
> 
> 标签：svn, tortoisesvn

使用 TortoiseSVN - 当我使用测试合并时，我收到错误“ [http://mysvnserver/svn/main/branches/ProjectA](http://mysvnserver/svn/main/branches/ProjectA)必须与[http://mysvnserver/svn/main/trunk/ProjectB](http://mysvnserver/svn/main/trunk/ProjectB)祖传相关”

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2011-06-08T13:16:03.250

我刚刚遇到了类似的问题，想添加我遇到的问题和解决方案。分支是由树干的子文件夹而不是整棵树制成的。因此，当我尝试重新整合时，我的层次结构不匹配。只需将集成重组为我的主干 WD 的正确子文件夹即可继续该过程。

添加希望这可能有助于点击此 Q/A 的人。:)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-29T01:33:01.837

让我猜猜：这些项目不相关？查找历史，如果其中一个曾经分支过。

即时解决方案：要么手动合并，要么尝试使用“svn merge --ignore-ancestry”命令行

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-19T23:32:42.363

正如[davebytes 所](https://stackoverflow.com/a/6279284/39531)提到的，当您分支`trunk\X`到时，可能会出现此问题`branches\Y`，但随后移至`X`新文件夹`Z`，即`trunk\X\Z`.

如果您只是尝试将更改合并`branches\Y`到`trunk\X`中，您会遇到很多冲突；如果您只是尝试合并`branches\Y`到`trunk\X\Z`中，您将收到“与祖先相关的”错误。

但是，[SVN 手册描述了潜在的问题](http://svnbook.red-bean.com/en/1.6/svn.branchmerge.advanced.html#svn.branchmerge.advanced.advancedsyntax)：`svn merge`应该真正被调用`svn diff-and-apply`。在这种情况下，您应该尝试描述的是您尝试总结从 r100 到 r200 发生的更改`branches\Y`，并将这些更改应用于`trunk\X\Z\`.

在 TortoiseSVN 中，这是*将两个不同的树*场景合并到您的本地工作副本中`trunk\X\Z`，其中 r100`branches\Y`设置为“从”， r200`branches\Y`设置为“到”。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-05T16:21:19.870

由于以下原因，我们遇到了这个问题：

使用 TortoiseSVN 的 repo 浏览器创建了一个文件夹，并将其用作分支。之后我们尝试将手动创建的文件夹合并到工作文件夹中。

解决方案是：首先不要手动创建分支，而是使用 TortoiseSVN -> Branch/tag... 选项来创建分支。

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-27T11:18:28.427

起初我尝试在根文件夹中合并并得到错误，然后我浏览到要合并的特定文件夹，然后选择要合并的正确文件夹。

例子，

在我的分支中，我有项目结构：

```
 -Root    
    - Code
    - DB 
```

我创建了一个标签并更改为标签的 DB 文件夹。现在我想将标签的更改带到分支。所以，我切换到我的分支并尝试合并并得到错误“必须与祖先相关”。

所以解决方案是，

```
I browsed to "DB" folder in branch, right click and select Tortoise SVN->Merge-> Merge a range of revisions -> 
```

现在，从要合并的 URL 中，我选择了：

```
the "DB" folder from my tag.
Then, "test branch". Everything worked fine :D 
```

所以，然后我点击了“合并”按钮。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-25T16:36:46.197

如果您的文件名称与其中一个分支（或主干）完全相同，则可能会发生此错误：

```
# svn switch ^/trunk
Updated to revision 123.
# ls
file1
file2
v1
# svn merge --reintegrate ^/branches/v1
svn: E195016: ^/branches/v1@123 must be ancestrally related to ^/trunk/v1@123 
```

要解决此问题，请将当前目录添加到命令中（注意点）：

```
# svn merge --reintegrate ^/branches/v1 . 
```

这是一个现实生活中的例子，它花了我几个小时非常不愉快。:(

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-24T16:53:53.587

我有同样的问题。我通过正确的 cd 修复了它，我在它上面合并了。我在路径目录中合并到项目而不是在主干的路径目录中（谁是实际的祖先）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-17T14:42:13.477

我有同样的错误，原因是关于权限。

问题是因为一位开发人员试图将他具有读/写访问权限的一个分支的更改集成到另一个他也具有读/写访问权限的分支，但最后一个是从另一个分支创建的分支，他只有一个读访问权限。

这是具有权限的结构（r = 读取，w = 写入）：

主干 (r) 开发 (r) QA (rw) 分支 featureBranch1 (rw)

在这种情况下，develop 是从trunk 创建的，QA 是从develop 创建的，而 featureBranch1 是从develop 创建的。事实上，他尝试将 featureBranch1 重新集成到 QA 中，这是从 develop 创建的一个分支，并且他没有写入权限来开发，在我们的案例中，这是他在 QA 中尝试重新集成 featureBranch1 时收到此消息的问题。

在以书面形式允许他进行开发后，该消息立即消失。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-08T18:40:50.783

我正在与另一个项目合并。导致了这个问题。我与正确的分支合并，然后它工作正常。我的坏，阅读障碍

# javascript - 有人知道用于常见任务的 JavaScript 库的抽象层吗？

> ID：490175
> 
> 赞同：0
> 
> 时间：2009-01-29T01:29:00.173
> 
> 标签：javascript, frameworks, abstraction

我知道，我知道，库之上的另一层，但我认为在移植某些功能时可能会有一些好处。我想我会问一下，看看是否有人发现了与此相关的任何东西。从本质上讲，它是一堆 getter 和 setter，任何一个主要的库都可以介于两者之间。有没有人见过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T02:19:18.450

嗯，这可能不是您正在寻找的，但是对于 ExtJS 库，有到[jQuery](http://soc.our.psu.edu/CFIDE/scripts/ajax/ext/docs/output/jquery-bridge.jss.html)或[Prototype的桥梁。](http://soc.our.psu.edu/CFIDE/scripts/ajax/ext/docs/output/prototype-bridge.jss.html)因此，有了这些桥梁，您最终可以得到三个库之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-31T20:04:13.787

我想[这](http://www.tysoncadenhead.com/blog/do-javascript-libraries-need-an-abstraction-layer)就是你在说的。我对吗？我不认为那里有这样的东西。每个应用程序都有不同的需求，因此围绕它拥有一个完整的库将需要大量代码，而实际上并不需要那么多代码。我会说这将是您需要自己编写的内容，以使其最小化并最好地满足您的需求。

# c# - 如何（优雅地）确定 C# winforms 应用程序中是否需要代理身份验证

> ID：490177
> 
> 赞同：12
> 
> 时间：2009-01-29T01:29:37.380
> 
> 标签：c#, winforms, authentication, proxy

我的用例是这样的，我想调用一个网络服务，如果我在需要身份验证的代理服务器后面，我只想使用默认凭据......

```
 WebRequest.DefaultWebProxy.Credentials = CredentialCache.DefaultCredentials; 
```

否则我将只是简单地拨打电话，预先确定是否需要身份验证会非常好，而不是在我尝试拨打电话后处理异常。

想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-29T05:22:09.080

直到我第一次部署我的[应用程序](http://deepzoompublisher.com/viewer)后，我才意识到有些用户在防火墙后面......开始工作以测试它。而不是对“需要 407 身份验证”进行测试，`Proxy`无论是否需要，我都只是进行相同的设置......

```
System.Net.HttpWebRequest req = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(uri.AbsoluteUri);
//HACK: add proxy
IWebProxy proxy = WebRequest.GetSystemWebProxy();
proxy.Credentials = System.Net.CredentialCache.DefaultCredentials;
req.Proxy = proxy;
req.PreAuthenticate = true;
//HACK: end add proxy
req.AllowAutoRedirect = true;
req.MaximumAutomaticRedirections = 3;
req.UserAgent = "Mozilla/6.0 (MSIE 6.0; Windows NT 5.1; DeepZoomPublisher.com)";
req.KeepAlive = true;
req.Timeout = 3 * 1000; // 3 seconds 
```

我不确定相对优势/劣势是什么（先尝试{}catch{}而不使用代理，而不是只使用上面的代码），但现在这段代码似乎对我在工作（验证代理）和家里都有效（没有任何）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T04:39:18.713

`System.Net.WebProxy`有一个叫做的属性`UseDefaultCredentials`可能*是*你想要的（但我不得不承认这里有点无知）。相关文档的链接在[这里](http://msdn.microsoft.com/en-us/library/system.net.webproxy_properties.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T06:05:45.467

实际上，似乎这毕竟不是问题，以前我是这样设置身份验证的......

```
 WebProxy proxy = new WebProxy(@"http://<myProxyAddress>:8080");
  proxy.Credentials = new NetworkCredential(<myUSerName>, <myPassword>, <myDomain>);
  WebRequest.DefaultWebProxy = proxy; 
```

当我在代理后面时这很好，但在没有代理时会抛出错误，所以我当然期望上面的错误相同，因为我仍然只是设置相同的凭据，但你知道他们对假设事物的看法。 ...事实上，设置默认信用完全没有错误，一切都很甜蜜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T05:49:30.850

如果您想检查 IE 中的代理设置，您还可以查看注册表：检查`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings`注册表树的分支 - 那里有很多选项和设置。最值得注意的是：（`ProxyEnable`一个 DWORD，0 = 无代理，1 = 启用代理）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-29T05:28:03.483

看起来如果您不理会代理的东西，[.NET 应该只使用 IE 代理设置](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)，这似乎是处理代理的最“正确”方式......

# css - 清除 CSS 样式“浮动”的最佳方法是什么？

> ID：490184
> 
> 赞同：59
> 
> 时间：2009-01-29T01:32:20.400
> 
> 标签：css

我非常习惯于通过使用来清除我的花车，`<br style="clear:both"/>`但事情一直在变化，我不确定这是否是最佳做法。

有一个可用的[CSS hack](http://www.positioniseverything.net/easyclearing.html)（来自 positioneverything），可以让您在不清除 div 的情况下获得相同的结果。但是......他们声称这个黑客有点过时了，相反你也许应该看看[这个黑客](http://www.sitepoint.com/blogs/2005/02/26/simple-clearing-of-floats/)。但是.. 在阅读了 700 页的评论后 :) 似乎有些地方后一种方法不起作用。

我想避免任何 javascript 黑客攻击，因为无论是否启用了 javascript，我都希望我的清算工作。

当前以独立于浏览器的方式清除 div 的最佳实践是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-02-02T22:39:30.337

**更新**：在 2014 年，您应该使用一种利用伪元素的 clearfix 技术，就像 @RodrigoManguinho 提到的那样。这是清除浮动的现代方法。有关更新的方法，请参阅 Nicholas Gallagher 的 micro clearfix：

```
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

**原答案：**

我真的不喜欢使用额外的非语义标记，所以我远离使用清除元素。而不是仅仅应用`overflow: hidden;`到浮动的父级来清除它们。跨浏览器工作，没问题。我相信`overflow: auto;`也有效。

显然，如果你想使用不同的溢出属性，它是行不通的，但是由于 IE6 扩展框的错误，我很少有理由故意溢出我的容器。

[请参阅有关使用`overflow`而不是`clear`避免添加额外标记](http://www.quirksmode.org/css/clearing.html)的更多信息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-01-29T01:37:41.093

我发现大多数情况下（包括我自己），这种方法在 html 中使用：

```
<div class="clear"></div> 
```

在样式表中使用：

```
.clear {clear: both;} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2011-12-09T13:37:41.087

```
.clear-fix:after
{
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clear-fix
{
    zoom: 1;
}

<div class="clear-fix">
    <div class="left">Some Div With Float</div>
    <div class="left">Another Div With Float</div>
</div> 
```

在我看来，这是最好的方式。不需要额外的 DOM 元素或错误使用溢出或任何 hack。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-29T01:52:44.027

我倾向于发现自己使用一些伏都教。

```
<span class="clear"></span> 
```

```
span.clear { 
    display: block; 
    clear: both; 
    width: 1px; 
    height: 0.001%;
    font-size: 0px; 
    line-height: 0px; 
} 
```

这个组合神奇地解决了一大堆浏览器问题，我用了这么久都忘记了它解决了什么问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-04-27T20:08:32.397

最好的方法是放“溢出：自动；” 在 div 容器中。它更干净。

```
div.container {overflow: auto;} 
```

更多细节在：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-03-19T08:18:10.000

在大多数情况下，简单地添加`overflow:auto;`到包含浮动元素的父元素是一个很好的解决方法。

**示例 HTML：**

```
<div class="container">
    <div class="child">...</div>
    <div class="another-child">...</div>
<div> 
```

**CSS：**

```
.child {
    float: right;
    word-wrap: break-word;
}

.child img {
    max-width: 100%;
    height: auto; /* of course, this is default */
}

.child p {
    word-wrap: break-word;
}

.container {
    overflow: auto;
} 
```

与任何其他方法`overflow:auto;`一样，也有一些陷阱。为了修复它们——应用`max-width:100%; height: auto;`图像，以及`word-wrap: break-word;`包含在浮动元素中的文本。

[[来源](http://webdesignerwall.com/tutorials/css-clearing-floats-with-overflow)]

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-29T01:54:18.080

jQuery UI 也有一些类来解决这个问题（`ui-help-clearfix`做一些事情）。

从技术上讲`<div style="clear:both;"></div>`比`<br style="clear:both;" />`因为空 div 的高度为 0 更好，从而只是清除浮动。会`<br />`留下空间。我认为使用该`<div/>`方法没有任何问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-09-11T20:32:52.607

```
.floatWrapper {
   overflow:hidden;
   width:100%;
   height:100%;
}
.floatLeft {
   float:left;
}

<div class="floatWrapper">
    <div class="floatLeft">
        Hello World!
    </div>
    <div class="floatLeft">
       Whazzzup!
    </div>
</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-25T22:31:38.103

问题在于父元素没有调整到其浮动子元素的高度。我发现最好的方法是让`float`父级强制它根据浮动子元素的高度进行调整，然后将你的 css 应用`clear`到你真正想要清除的下一个元素上。通常也需要添加`width:100%`，因为不浮动父级可能会意外更改您的布局。

正如其他人所提到的，在语义上最好避免与您的内容无关的标记，例如 a`<br>`或`<div>`clearfix 类。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-09T16:11:49.957

现在，在 2021 年，您可以使用`display: flow-root`for parent element 而不是 clearfix hack。

```
.box {
  display: flow-root;
} 
```

`display: flow-root`根据[Can I Use 数据](https://caniuse.com/flow-root)，截至 2021 年 3 月，全球 91.35% 的浏览器可以处理。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-06T03:13:52.817

```
<div class='float_left'>

something else

<br style="clear:both;">
</div> 
```

这个 br 不会留下空格。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-29T02:50:08.187

```
<br clear="all"/> 
```

效果也很好。与使用 class="clear" 相比，这样做的好处是它可以正常工作，并且您不必在 css 中设置额外的规则即可。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-04-10T23:06:44.187

我更喜欢使用 with .clear { clear: both; } over .clear-fix:after blah blah，因为当您查看标记时，会更清楚发生了什么。仅供参考，这是我不久前写的关于[如何使用 float 和 clear](http://shingokko.com/blog-entry/float-and-clear.html)的教程。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2010-05-12T15:08:19.187

还有一个是“浮动几乎所有东西”，您可以将父母浮动在与浮动孩子相同的一侧。

# iphone - 如何使用 UIWebView 从 URL 获取数据到 Iphone 应用程序？

> ID：490193
> 
> 赞同：0
> 
> 时间：2009-01-29T01:35:15.870
> 
> 标签：iphone

我正在开发一个使用 UIWebView 的应用程序。我不是一个 Web Wonk，所以我不熟悉什么可能是微不足道的任务——当我加载一个网站时，如何将数据传回我的应用程序？该站点位于将谷歌地图传递给应用程序的服务器上，但我还需要一些附加信息。我认为这很简单。我从哪里开始完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:53:47.473

您可能不想使用 UIWebView。而是查看`NSURLRequest`下载页面的 HTML 源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T10:34:02.253

做就是了：

```
document.location = something you'll recognise containign the coords. 
```

然后处理

```
webView:shouldStartLoadWithRequest:navigationType: 
```

在 UIWebViewDelegate 中，做任何你想做的事并返回 NO。您还可以使用您的应用识别的 url 方案，但我还没有探索过这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T02:12:02.473

那么，它是什么类型的信息？

如果是文本，您可以将文本吸收到 XML 或其他机制中，然后动态构建您的 HTML 页面，然后将其传递给 UIWebView。

如果是图像数据，你可以对 data: urls 做同样的事情，这有点棘手，但可以做到。

如果您只需要将网页加载到 webview 中，则 UIWebView 初始化程序中有一个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-31T17:39:05.660

如果我正确理解您的要求，并且您的坐标是：`-34.603687,-58.381616`您应该使用：

```
 NSString *encodedStringWithCoordinates = @"-34.603687%2C-58.381616" //The comma URLEncoded is %2C... You can encode your string with NSUTF8StringEncoding or whatever...

   NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://maps.google.com/maps?q=%@", encodedStringWithCoordinates]];

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webview loadRequest:requestObj]; //Your UIWebView is webview i suppose 
```

如果您需要帮助，请告诉我。

编辑：我认为这是一个新问题，我会留下答案，因为它可能对某人有所帮助。

# .net - 从非 dotnet-3.5 客户端使用 ado.net 数据服务

> ID：490194
> 
> 赞同：1
> 
> 时间：2009-01-29T01:35:46.027
> 
> 标签：.net, wcf-data-services

从 .net 2.0 客户端访问 ado.net 数据服务有哪些选择？客户端应用程序必须在 Windows 2000 上运行，因此不能选择升级到 .net 3.5。

除了针对该服务编写我自己的代理之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T09:03:46.120

我希望在这种情况下，您必须构建自己的代理，构建自己的 http 请求等（可能通过`WebClient`）。值得庆幸的是，创建 REST 请求比原始 SOAP 容易得多，解析结果也是如此。

但是，我想知道使用`asmx`服务（即 .NET 2.0 Web 服务）是否更实用。如果 ADO.NET 数据服务服务不受您的控制，也许在另一个服务器上托管一个 .NET 3.5 包装器，该服务器在`asmx`和 Astoria 之间进行填充？（即通过 2.0 Web 服务公开来自 REST 服务的数据）。

# python - 使用python将多页pdf文件拆分为多个pdf文件？

> ID：490195
> 
> 赞同：87
> 
> 时间：2009-01-29T01:35:48.927
> 
> 标签：python, pdf

我想获取一个多页的 pdf 文件，并为每页创建单独的 pdf 文件。

我已经下载了[reportlab](http://www.reportlab.org/index.html)并浏览了文档，但它似乎是针对 pdf 生成的。我还没有看到任何关于自己处理 PDF 文件的信息。

有没有一种简单的方法可以在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2009-01-29T01:38:47.190

```
from PyPDF2 import PdfFileWriter, PdfFileReader

inputpdf = PdfFileReader(open("document.pdf", "rb"))

for i in range(inputpdf.numPages):
    output = PdfFileWriter()
    output.addPage(inputpdf.getPage(i))
    with open("document-page%s.pdf" % i, "wb") as outputStream:
        output.write(outputStream) 
```

等等

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-11-04T13:12:38.877

我在这里错过了一个解决方案，您将 PDF 拆分为由所有页面组成的两个部分，因此如果有人正在寻找相同的解决方案，我会附加我的解决方案：

```
from PyPDF2 import PdfFileWriter, PdfFileReader

def split_pdf_to_two(filename,page_number):
    pdf_reader = PdfFileReader(open(filename, "rb"))
    try:
        assert page_number < pdf_reader.numPages
        pdf_writer1 = PdfFileWriter()
        pdf_writer2 = PdfFileWriter()

        for page in range(page_number):
            pdf_writer1.addPage(pdf_reader.getPage(page))

        for page in range(page_number,pdf_reader.getNumPages()):
            pdf_writer2.addPage(pdf_reader.getPage(page))

        with open("part1.pdf", 'wb') as file1:
            pdf_writer1.write(file1)

        with open("part2.pdf", 'wb') as file2:
            pdf_writer2.write(file2)

    except AssertionError as e:
        print("Error: The PDF you are cutting has less pages than you want to cut!") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-05-11T09:46:56.217

PyPDF2 包使您能够将单个 PDF 拆分为多个 PDF。

```
import os
from PyPDF2 import PdfFileReader, PdfFileWriter

pdf = PdfFileReader(path)
for page in range(pdf.getNumPages()):
    pdf_writer = PdfFileWriter()
    pdf_writer.addPage(pdf.getPage(page))

    output_filename = '{}_page_{}.pdf'.format(fname, page+1)

    with open(output_filename, 'wb') as out:
        pdf_writer.write(out)

    print('Created: {}'.format(output_filename)) 
```

Source: [https://www.blog.pythonlibrary.org/2018/04/11/splitting-and-merging-pdfs-with-python/](https://www.blog.pythonlibrary.org/2018/04/11/splitting-and-merging-pdfs-with-python/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-06T06:40:57.120

我知道代码与 python 无关，但是我想发布这段简单、灵活且效果惊人的 R 代码。R 中的 PDFtools 包在轻松拆分合并 PDF 方面非常出色。

```
library(pdftools) #Rpackage
pdf_subset('D:\\file\\20.02.20\\22 GT 2017.pdf',
           pages = 1:51, output = "subset.pdf") 
```

# javascript - 这是一个合适的情况，在这种情况下使用动态函数创建是合理的吗？

> ID：490196
> 
> 赞同：1
> 
> 时间：2009-01-29T01:36:01.877
> 
> 标签：javascript, dynamic-function

我目前正在开发一个教程网站，用于教授 Web 开发的基础知识（HTML、CSS 和 JavaScript，对于初学者）。我想要一个可以深入涵盖各种主题的设置，然后提供一个基本的沙盒环境，用户可以在其中编写代码来解决每个教程部分末尾提出的问题。

例如，如果我在之前的教程中介绍了乘法，并且用户刚刚完成了有关能够返回值的函数的课程，我可能会要求他们提交一个返回两个参数乘积的函数。

这不是使用动态函数创建被认为是一个好主意的*完美实例吗？*让我们看一个例子。

```
<script>
function check()
 {
eval('var f = ' + document.getElementById('user_code').value);
if (f(5, 10) == 50)
 {
// user properly wrote a function which
// returned the product of its parameters
 }
 }
</script> 
```

这是一个坏主意吗？如果是这样，请解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T01:54:17.113

听起来您想重新制作[Firebug](http://getfirebug.com/)甚至是 IE8 中的新开发者工具。因此，我不得不说从来没有一个有用的案例。更不用说如果这个网站公开了脚本注入的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T02:22:28.227

这听起来像它可以工作。但是，您的环境中最大的挑战可能是错误处理。学生肯定会犯各种错误：

*   编译时错误，将在`eval()`
*   运行时错误，将在您调用函数时检测到
*   无法检测到的运行时错误，例如无限循环或堆栈溢出

更精细的方法可能会将输入的 Javascript 解析为解析树表示，然后将其与预期的解析树进行比较。如果不匹配，请指出可能出错的地方并让学生再试一次。如果它确实匹配，那么您可以`eval()`调用该函数，知道它会按照您的预期进行。

在 Javascript 中为 Javascript 实现词法分析器和解析器将具有挑战性，但肯定不是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T02:26:35.660

只要您在封闭环境中操作它就应该可以工作。Eval 让您面临代码注入攻击，因此我不会将其放在可公开访问的网站上，但如果它完全包含在您的教室中，您应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T02:32:01.390

该代码可以工作，但如果在语法或其他方面都存在错误怎么办？也许使用 try 块来捕获任何错误并将其显示给用户会有所帮助......

不确定这是否有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T02:35:57.713

在你的情况下，我觉得这没有什么问题。或者，您可以使用`new Function()`先构建东西然后运行它来运行代码。理论上，这会将“编译”和执行的阶段分开。但是`eval`，将首先检查代码并抛出错误：

```
var usercode = document.getElementById('user_code').value;
try {

  var f = new Function( 'a','b','return (' + usercode + ')(a,b);' );
  if ( f( 5, 10 ) ) {
    // user properly wrote a function which
    // returned the product of its parameters
  }
  else {
    // user wrote code that ran but produced incorrect results
  }

}
catch ( ex ) {
  // user wrote something really bad
} 
```

以这种方式做事的问题是抛出的异常可能是无意义的。`"foo;;=bar"`将在括号中报告“缺少 )”错误，而 eval 将引发适当的语法错误。您可以通过（正则表达式）首先从用户代码中获取参数和主体然后构建它来绕过它。但是，这会比一个更好`eval`吗？

我认为您真正的问题是帮助用户避免隐式全局变量的陷阱。您将如何帮助用户避免编写由于第一次设置全局而仅在第二次运行时才有效的代码？您不需要每次运行都实现一个干净的沙箱吗？我会看看 jsbin.com、firebug 和类似工具是如何处理这些事情的。

My feeling is that you should go with `eval` for now and change it for more elaborate stuff later if the need arrises.

# windows-installer - 将 Microsoft 安装程序输出重命名为当前版本

> ID：490213
> 
> 赞同：2
> 
> 时间：2009-01-29T01:48:55.000
> 
> 标签：windows-installer

我目前正在寻找一种方法来防止设置项目输出覆盖以前的版本。IE 构建安装项目时，它会替换 Release/Debug 文件夹中的任何内容，有没有办法将输出重命名为包括版本号或日期在内的内容，这样它就不会覆盖那里的先前文件，甚至创建每个构建的单独文件夹，其中包括日期和时间。

我知道这可以通过 PostbuildEvents 完成，但我无法理解需要做什么。

顺便说一下，这是 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-20T18:45:56.937

这比我预期的要难；PostBuild 事件值不会扩展部署属性，我看不到从命令行获取程序集版本的方法。

我想出的解决方案是创建一个 PostBuild 事件，它将项目输出复制到使用 %DATE% 和 %TIME% 环境变量上的子字符串评估构造的文件名，以获得唯一的文件名。试试这个：

`COPY "$(BuiltOuputPath)" "$(ProjectDir)YourProjectName%DATE:~-4%%DATE:~-10,2%%DATE:~-7,2%%TIME:~0,2%%TIME:~3,2%%TIME:~6,2%.msi"`

是的，它拼写为“BuiltOuputPath”，带有 3 个“t”。感谢微软！

# java - 用于 WebSphere Portal 开发的轻量级门户服务器？

> ID：490219
> 
> 赞同：6
> 
> 时间：2009-01-29T01:50:18.447
> 
> 标签：java, websphere, portal, websphere-portal

我正在为 IBM WebSphere Portal 6.1 做一些 portlet 开发。但是，部署过程非常缓慢。由于这是我第一次进行 portlet 开发，我对那里的各种门户服务器不太熟悉。我想要一些关于轻量级门户服务器的建议，我可以在其上快速部署以进行开发。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-10-14T17:08:52.820

冥王星就是答案！

[http://portals.apache.org/pluto/](http://portals.apache.org/pluto/)

我现在很高兴。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T02:08:49.127

我相信 Liferay 已经成为 Sun[采用的战略](http://www.liferay.com/web/guest/partners/sun)，如果这有任何影响的话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T06:35:22.480

如果您使用 Websphere Portal 服务器，您可以在服务器启动时使用 portlet 应用程序的延迟加载。这将有助于减少服务器启动时间，因为它不会启动许多管理应用程序。

有关更多信息，请点击此链接 [http://www-01.ibm.com/support/docview.wss?uid=swg27015437](http://www-01.ibm.com/support/docview.wss?uid=swg27015437)

希望这对你有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T01:52:19.113

我不熟悉它们的每个部署特征，但这里是 Java 中的开源门户列表：http: [//java-source.net/open-source/portals](http://java-source.net/open-source/portals)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T02:23:11.297

一两年前我也遇到过类似的情况。

无论如何，服务器都需要很长时间才能启动，但实际上不必进行任何小的更改即可重新启动。您只需重新启动服务器进行重大更改，否则，重新启动或重新部署项目到服务器。

然而，在我拥有三场 ram 之前，该系统并不灵活。我建议首先升级您的工作站以支持服务器。它们被称为工作站级系统是有原因的 :) 给自己买一台 8gb 的机器，然后告诉你的老板你的工作效率会提高一倍 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-18T07:11:27.537

我通常使用热部署更改 Java 类和 JSP 页面。这是最快的方法。我们使用类的热部署到 PortalServer/installedApps/.ear/yourportlet.war 与 5 位开发人员共享 1 台服务器，这非常有效。但是，有时我们确实必须重新启动服务器。如果您更改了部署描述符，您仍然需要重新部署 portlet WAR。确保在您的开发机器上将 wps.war 应用程序的*reloadingEnabled*标志设置为 false（重新启动获取更改）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T21:42:36.350

您可以使用此处解释的开发人员模式：

[http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1/index.jsp?topic=/com.ibm.wp.ent.doc_v615/install/chg_dev_mode.html](http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1/index.jsp?topic=/com.ibm.wp.ent.doc_v615/install/chg_dev_mode.html)

# c# - 为什么不经常使用无符号变量？

> ID：490222
> 
> 赞同：6
> 
> 时间：2009-01-29T01:51:50.097
> 
> 标签：c#, .net

似乎无符号整数对于永远不应该为负数的方法参数和类成员很有用，但我没有看到很多人以这种方式编写代码。我自己尝试过，发现需要从 int 转换为 uint 有点烦人......

无论如何，您对此有何看法？

### 复制

> [为什么数组长度是 Int 而不是 UInt？](https://stackoverflow.com/questions/6301/why-is-array-length-an-int-and-not-an-uint)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-29T02:00:57.317

这个想法，即 unsigned 将阻止您处理不应该处理负值的方法/成员的问题有些缺陷：

*   现在你必须检查大值（'溢出'）以防出错
    *   而您可以检查 <=0 并签名
*   在您的方法中仅使用一个带符号的 int，您将回到方形“已签名”:)

处理位时使用无符号。但是今天无论如何都不要使用比特，除非你有这么多的比特，它们会填满几兆字节，或者至少是你的小嵌入式内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T01:55:23.180

使用标准版本可能会避免转换为未签名版本。在您的代码中，您可能可以保持区别，但是许多其他输入和 3rd 方库不会，因此铸造只会让人发疯！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T02:01:37.377

我不记得 C# 是如何进行隐式转换的，但在 C++ 中，扩展转换是隐式完成的。无符号被认为比有符号宽，因此这会导致意想不到的问题：

```
int s = 5;
unsigned int u = 25;
// s > u is false

int s = -1;
unsigned int u = 25;
// s > u is **TRUE**! Error error! 
```

在上面的示例中，s 溢出，因此它的值将类似于 4294967295。这之前给我带来了问题，我经常让方法返回 -1 来表示“不匹配”或类似的东西，而通过隐式转换它只是失败了做我认为应该做的事。

一段时间后，程序员学会了几乎总是使用带符号的变量，除非在特殊情况下。这些天的编译器也会为此产生警告，这非常有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T02:04:21.990

一个原因是引用无符号类型的公共方法或属性不符合 CLS。

您几乎总是会看到此属性应用于 .Net 程序集，因为各种向导默认包含它：

[程序集：CLSCompliant(true)]

因此，基本上，如果您的程序集包含上述属性，并且您尝试在与外界的公共接口中使用无符号类型，您将收到编译错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-29T02:07:56.117

没有真正的需要。将某些东西声明为未签名的数字应该是积极的，这是一个可怜的人尝试验证。

事实上，最好只有一个代表所有数字的数字类。

要验证数字，您应该使用其他一些技术，因为通常约束不仅仅是正数，它是一个设定范围。通常最好使用最不受约束的方法来表示数字，然后如果您想更改允许值的规则，您只需更改验证规则而不是类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-29T02:10:09.437

为简单起见。现代软件涉及足够的转换和转换。坚持使用尽可能少的常用数据类型是有好处的，以减少有关适当接口的复杂性和歧义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-29T01:57:05.390

无符号数据类型是从过去记忆很重要的时代延续下来的。所以现在我们真的不需要它们来达到这个目的。将其与铸造相结合，它们有点麻烦。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-29T02:18:47.500

不建议使用无符号整数，因为如果你给它分配负值，所有的地狱都会失败。但是，如果您坚持以正确的方式进行操作，请尝试使用 Spec#，将其声明为整数（您将使用 uint）并为其附加一个不变量，表示它永远不会是负数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-29T02:00:49.690

您是对的，最好将 uint 用于永远不应该为负的事情。但在实践中，有几个反对它的理由：

*   int 是“标准”或“默认”，它背后有很多惯性。
*   您必须在任何地方使用烦人/丑陋的显式强制转换才能返回 int，毕竟由于第一点，您可能需要做很多事情。
*   当您确实转换回 int 时，如果您的 uint 值将溢出它会发生什么？
*   很多时候，人们将整数用于从不为负的事物，然后将 -1 或 -99 或类似的东西用于错误代码或未初始化的值。这可能有点懒惰，但这又是 uint 不太灵活的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-29T02:02:20.777

最大的原因是人们通常太懒惰，或者思考不够仔细，不知道他们在哪里合适。像 size_t 这样的东西永远不会是负数，所以 unsigned 是*正确*的。

但是，从有符号转换为无符号可能会充满危险，因为底层架构处理符号位的方式存在特殊性。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-01-29T01:54:58.233

我不认为您不需要手动投射它。

无论如何，这是因为对于大多数应用来说，这并不重要——两者的范围对于大多数用途来说都足够大。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-29T02:20:20.587

这是因为它们不符合 CLS，这意味着您的代码可能无法在其他 .NET 框架实现甚至其他 .NET 语言（除非支持）上按预期运行。

如果您尝试通过它们，它也不能与其他系统互操作。就像要被 Java 使用的 Web 服务，或者调用 Win32 API

看到那个关于原因[的帖子](https://stackoverflow.com/questions/6325/why-are-unsigned-ints-not-cls-compliant)

# c++ - 主机名未使用 Winsock 转换为 IP 地址

> ID：490235
> 
> 赞同：4
> 
> 时间：2009-01-29T01:56:06.750
> 
> 标签：c++, visual-studio-2008, winsock

`getaddrinfo()`不会将主机名转换为 IP 地址，因此也不会`connect()`转换为服务器。我的实现有问题吗 - 编译时没有警告消息？

这个函数调用是否`connect`正确？

```
connect(client, result->ai_addr, result->ai_addrlen) 
```

下面列出了完整的实现：

```
#include <winsock2.h>
#include <ws2tcpip.h>
#include <windows.h>
#include <stdio.h>
#include <iostream>

#pragma comment(lib, "Ws2_32.lib")

using namespace std;

int main (
          int argc,
          char* argv[])
{
if (argc != 3)
{
    cerr << "Usage: " << argv[0] << " [hostname] [port number]\n";
    exit(EXIT_FAILURE);
}

WSADATA wsaData;
WORD wVersionRequested;
int wError;

wVersionRequested = MAKEWORD(2, 2);

wError = WSAStartup(wVersionRequested, &wsaData);

if (wError != 0)
{
    cerr << "WSAStartup failed with error: " << wError << endl;
    exit (EXIT_FAILURE);
}

/*
* Confirm that the WinSock DLL supports 2.2.
* Note that if the DLL supports versions greater
* than 2.2 in addition to 2.2, it will still return 
* 2.2 in wVersion since that is the version we 
* requested. 
*/

if (LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2)
{
    cerr << "Could not find a usable version of Winsock.dll." << endl;
    WSACleanup();
    exit(EXIT_FAILURE);
} else {
    cout << "The Winsock 2.2 dll was found." << endl;
}

SOCKET client;

if ((client = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == SOCKET_ERROR)
{
    cerr << "Error: socket() return value == SOCKET_ERROR" << endl;
    WSACleanup();
    exit (EXIT_FAILURE);
}

cout << "Created a socket." << endl;

struct addrinfo *result = NULL;
struct addrinfo hints;
memset(&hints, 0, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;

if ((wError = getaddrinfo(
                    argv[1],
                    argv[2],
                    &hints,
                    &result)) !=0 )
{
    freeaddrinfo(result);
    WSACleanup();
    if (wError == 11001)
    {
        cerr << "Error: occurred: getaddrinfo() failed "
             << wError << " - Host not found." << endl;
        exit(EXIT_FAILURE);
    }

    cerr << "Error: occurred: getaddrinfo() failed "
            << wError << endl;
    exit(EXIT_FAILURE);
}
/*
* Attempt to connect to the Server
*
*/

switch (wError = connect(client, result->ai_addr, result->ai_addrlen)) {
    case 0:
        cerr << "Resolved hostname." << endl;
        break;
    case SOCKET_ERROR:
        wError = WSAGetLastError();
        cerr << "Error: connet() failed "
                "Details: " << wError << endl;
        closesocket(client);
        freeaddrinfo(result);
        WSACleanup();
        exit(EXIT_FAILURE);
        break;
    default:
        cerr << "Fatal connect() error: unexpected "
                "return value." << endl;
        closesocket(client);
        freeaddrinfo(result);
        WSACleanup();
        exit(EXIT_FAILURE);
        break;
}

cout << "Connected to server." << endl;

closesocket(client);
freeaddrinfo(result);
WSACleanup();
exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T02:57:20.543

`getaddrinfo`可能给你一个 IPv6 地址，或者机器有多个 IP 地址，而你试图连接到错误的 IP 地址。

此外，如果您的服务器正在侦听 127.0.0.1 并且您尝试连接到真实 IP 地址，则连接将失败。同样，如果服务器正在侦听真实 IP 地址并且您尝试使用 127.0.0.1 进行连接，则连接将失败。如果服务器在 0.0.0.0 上侦听，则两个地址都应该工作。

要在 0.0.0.0 上收听，您将拥有类似于以下的代码：

```
sockaddr_in sin;
sin.sin_family = AF_INET;
sin.sin_addr.s_addr = INADDR_ANY;
sin.sin_port=htons( port_num );
bind( s, (sockaddr *)&sin, sizeof( sin ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T02:15:04.887

尝试设置`hint.ai_family`to`AF_UNSPEC`而不是`AF_INET`，我相信什么时候`AF_INET`指定 getaddrinfo 函数除了类似 IPv4 的地址。

# apache-flex - Flex/ActionScript3：关键字“with”隐藏拼写错误的属性名称

> ID：490241
> 
> 赞同：2
> 
> 时间：2009-01-29T02:00:06.757
> 
> 标签：apache-flex, actionscript-3, oop

在 Flex 3 中，

```
var anInstance : MyClass = new MyClass();
with (anInstance)
{
    property1 = "fred";
    property2 = 5;
    propert3 = 7;
} 
```

不会将“proper”标记为不存在的属性名称。我认为这是邪恶的 JavaScript 对象行为的剩余部分（引用对象的属性名称隐式创建它），但它似乎是“with”的副作用。

这让我非常难过，因为“with”是对 Delphi 的一点提醒（除非它在那里正常工作）。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T02:43:21.443

通过阅读[文档](http://livedocs.adobe.com/flex/3/langref/index.html)：

Actionscript 显然会在嵌入式变量的范围解析中冒泡（这并不奇怪，因为语法不需要像“.”或“->”这样的显式取消引用符号来指示哪些变量名应该“withed”。）所以你实际上是在名为 property3 的全局范围内创建一个变量。

* * *

在考虑了为什么存在这个“问题”之后进行编辑 -

Javascript 是非严格类型的缩影。并且 Actionscript 作为 Javascript 的严格超集，不能强制执行严格类型，除非它自己的语言扩展声明 - 这意味着它必须支持无类型变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T10:00:47.373

一些类是动态的（例如movieclip）并且可以在运行时添加属性：

[http://flexblog.faratasystems.com/?p=95](http://flexblog.faratasystems.com/?p=95)

# asp.net - 由 ASP.NET 操作的 HTML 元素的 id 和 name 属性

> ID：490242
> 
> 赞同：5
> 
> 时间：2009-01-29T02:00:11.250
> 
> 标签：asp.net, javascript, html

我在我的 C# ASP.NET 应用程序中遇到问题，其中 id 和 name 标记在运行时分别使用前缀“MainView_”和“MainView$”进行了修改。所以我的代码：

```
<asp:Button ID="OKToContinueCheckInButton" runat="server" CausesValidation="False" Visibility="false" Style="display: none" OnClick="btnOKToContinueCheckIn" />

<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById('OKToContinueCheckInButton').click();
// -->
</script> 
```

变成：

```
<input type="submit" name="MainView$OKToContinueCheckInButton" value="" id="MainView_OKToContinueCheckInButton" Visibility="false" style="display: none" />

<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById('OKToContinueCheckInButton').click();
// -->
</script> 
```

getElementID() 返回 null，因为名称已更改。谁能告诉我为什么会发生这种情况，以及是否有办法禁止它更改 id 和 name 值。谢谢！

- 丝质

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-29T02:03:50.167

我想这会对你有所帮助...

```
<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById('<%= OKToContinueCheckInButton.ClientID %>').click();
// -->
</script> 
```

这是成功的部分

```
<%= OKToContinueCheckInButton.ClientID %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T02:07:16.290

这是 Asp .Net Forms 模型工作方式的基本部分。

ID 已更改，因此您不必担心在用户控件、自定义控件、中继器等中保持 ID 的唯一性。

您可以使用 Cyril 的方法。我还发现 JQuery 非常适合此模型，因为您可以通过控件的类或在文档中的位置轻松引用控件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T02:39:12.980

好消息是 ASP.Net 4.0 将解决这个问题。

[http://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx](http://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-29T15:24:05.350

我想你忘记了单引号：

```
document.getElementById(<%= OKToContinueCheckInButton.ClientID %>).click(); 
```

应该：

```
document.getElementById('<%= OKToContinueCheckInButton.ClientID %>').click(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T02:04:34.987

```
<asp:Button ID="OKToContinueCheckInButton" runat="server" CausesValidation="False" Visibility="false" Style="display: none" OnClick="btnOKToContinueCheckIn" />

<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById(<%=OKToContinueCheckInButton.ClientID %>).click();
// -->
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-29T02:07:45.557

从后面的代码编写脚本。将其注册为启动脚本，并使用对象的客户端 ID。

```
System.Text.StringBuilder script = new System.Text.StringBuilder();
script.Append("var answer = confirm('Some Warning');");
script.Append("if (answer)");

// The client ID will be what is put in the browser so it will find it.
script.AppendFormat("document.getElementById('{0}').click();", this.btnSomeButton.ClientID);

// Hook this up to the button
this.btnSomeButton.OnClientClick = script.ToString(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-29T02:08:26.960

您必须像这样使用 ClientID 属性：

```
<asp:Button ID="OKToContinueCheckInButton" runat="server" CausesValidation="False" Visibility="false" Style="display: none" OnClick="btnOKToContinueCheckIn" />

<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById(<%=OKToContinueCheckInButton.ClientID%>).click();
// -->
</script> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-27T06:37:00.620

如果您愿意使用 jQuery，这根本不是问题，您不必担心更改名称。通过使用 $= (ends with) 选择器，这将不是问题：

```
if (answer)
  $("a[id$='MainView_OKToContinueCheckInButton']:first").click(); 
```

jQuery 选择器很容易使用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-29T15:18:11.023

感谢您的所有回复，我想我理解为什么要替换这些值。但是，当我尝试上述解决方案时，它会出现错误，因为它会生成以下 HTML 并带有“_”而不是“$”。我正在使用 document.getElementById(<%= OKToContinueCheckInButton.ClientID %>).click();

```
<input type="submit" name="MainView$OKToContinueCheckInButton" value="" id="MainView_OKToContinueCheckInButton" Visibility="false" style="display: none" />

<script type="text/javascript">
<!--
    var answer = confirm("Some Warning");
    if (answer)
        document.getElementById(MainView_OKToContinueCheckInButton).click();
// -->
</script> 
```

# asp.net - 在 ASP / .net 中获取 Windows 服务的状态很热门？

> ID：490276
> 
> 赞同：3
> 
> 时间：2009-01-29T02:16:44.180
> 
> 标签：asp.net, windows-services

我需要找到一种方法来通过 HTTP 监视 Windows 服务列表的状态，最好没有任何第三方程序）。

我真正需要做的就是显示服务名称及其状态（“已启动”/“已停止”）。

我不是 ASP 程序员，所以这有点超出我的领域。我已经搜索过，但还没有找到太多。

任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T02:24:08.283

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ServiceProcess;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        ServiceController[] services = ServiceController.GetServices();

        Response.Write("List of running services : <BR>");
        foreach (ServiceController service in services)
        {

            Response.Write(string.Format(" Service Name: {0} , status {1} <BR>", service.ServiceName, service.Status.ToString()));

        }
    }
} 
```

只记得添加 system.serviceprocess 引用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T05:26:15.110

在我看来，您希望枚举*远程*计算机上的服务。这可以使用 WMI（Windows 管理规范）来完成，方法如下：

```
ConnectionOptions connection = new ConnectionOptions();
connection.Username = userNameBox.Text;
connection.Password = passwordBox.Text;
connection.Authority = "ntlmdomain:DOMAIN";

ManagementScope scope = new ManagementScope("\\\\FullComputerName\\root\\CIMV2", connection);
scope.Connect();

ObjectQuery query= new ObjectQuery("SELECT * FROM Win32_Service"); 

ManagementObjectSearcher searcher = 
                    new ManagementObjectSearcher(scope, query);

foreach (ManagementObject queryObj in searcher.Get())
{
     Console.WriteLine("-----------------------------------");
     Console.WriteLine("Win32_Service instance");
     Console.WriteLine("-----------------------------------");
     Console.WriteLine("Caption: {0}", queryObj["Caption"]);
     Console.WriteLine("Description: {0}", queryObj["Description"]);
     Console.WriteLine("Name: {0}", queryObj["Name"]);
     Console.WriteLine("PathName: {0}", queryObj["PathName"]);
     Console.WriteLine("State: {0}", queryObj["State"]);
     Console.WriteLine("Status: {0}", queryObj["Status"]);
} 
```

这段代码直接取自[这里](http://msdn.microsoft.com/en-us/library/ms257337(VS.80).aspx)，Happy Coding！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:27:00.643

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "sc query service_name";
p.Start();
string output = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

# java - DBCP（Apache Commons 数据库连接池）是否仍然相关？

> ID：490288
> 
> 赞同：14
> 
> 时间：2009-01-29T02:23:18.410
> 
> 标签：java, database, jdbc, pooling, apache-commons-dbcp

JDBC 3.0 规范谈到了连接（和准备好的语句）池。

我们有几个独立的 Java 程序（即我们没有使用应用程序服务器），它们一直在使用 DBCP 来提供连接池。我们应该继续使用 DBCP，还是可以利用 JDBC 提供的池化并摆脱 DBCP？

我们正在使用 MySQL (Connector/J)，最终将添加 SQL Server 支持 (jTDS)；我们不太可能支持任何其他数据库。

编辑：请参阅下面关于我尝试消除连接池库的评论。似乎 DBCP 仍然相关（请注意，一些评论者推荐 C3P0 而不是 DBCP）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-30T00:51:23.130

在其他发帖人的鼓励下，我尝试去掉DBCP，直接使用MySQL JDBC驱动（Connector/J 5.0.4）。我无法这样做。

看起来，虽然驱动程序确实为池提供了基础，但它并没有提供最重要的东西：一个实际的池（源代码为此派上了用场）。这部分由应用服务器提供。

我再次查看了 JDBC 3.0 文档（我有一份标有“第 11 章连接池”的打印副本，不确定它的确切来源），我可以看到 MySQL 驱动程序遵循 JDBC 文档。

当我查看 DBCP 时，这个决定开始变得有意义。良好的游泳池管理提供了许多选择。例如，您何时清除未使用的连接？你清除了哪些连接？池中的最大连接数是否有硬性或软性限制？在将连接提供给呼叫者之前，您是否应该测试连接的“活跃性”？等等

总结：如果你在做一个独立的 Java 应用程序，你需要使用一个连接池库。连接池库仍然相关。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-29T03:01:07.070

DBCP 有严重的缺陷。我认为它不适合生产应用程序，尤其是当有这么多驱动程序在其`DataSource`本机中支持池时。

就我而言，压垮骆驼的最后一根稻草是当我发现整个池在对数据库进行新连接尝试的整个过程中都被锁定时。因此，如果您的数据库发生了导致连接缓慢或超时的问题，则其他线程在尝试将连接返回到池时会被阻止——即使它们是使用数据库完成的。

池旨在提高性能，而不是降低性能。DBCP 是幼稚的、复杂的和过时的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T02:55:33.917

我更喜欢使用 dbcp 或 c3p0，因为它们是供应商中立的。我发现，至少在使用 mysql 或 oracle 时，每当我尝试使用非标准 sql 的 jdbc 客户端做某事时，我都必须引入对供应商类的编译时依赖。例如，请参见[此处](https://stackoverflow.com/questions/445455/using-oracle-ref-cursor-in-java-without-oracle-dependency)的一个非常烦人的示例。

我不确定 mysql，但 oracle 使用它们特定的非标准类进行连接池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T02:28:44.547

人们仍然使用 DBCP，我认为它甚至是 Hibernate 的默认设置。

DBCP 不能满足您当前的需求吗？

我不太相信替换基础设施，除非已经存在无法填补的性能或功能差距，即使周围有更新或更好的替代方案。

# definition - 究竟是什么定义了生产？

> ID：490289
> 
> 赞同：16
> 
> 时间：2009-01-29T02:23:19.253
> 
> 标签：definition, semantics, production

就像几乎所有已经编程了一段时间的人一样，我对“生产代码”这个术语很熟悉，并且对它的含义有一个模糊的理解。但是，有人可以提供一个半严格的定义吗，因为维基百科和谷歌似乎不能？似乎在生产中存在很多灰色区域，例如一小群人使用的内部工具，因此在 UI、文档等方面没有“正式化”，以及开源应用程序是功能完整，无缺陷且工作正常，但缺乏润色、UI 和广泛的测试。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-01-29T02:33:42.540

当您的代码在生产系统上运行时，这意味着它正在被目标受众在现实世界中使用。

然而，生产代码并不一定意味着健壮、可靠或稳定的代码。 [Daily WTF](http://thedailywtf.com/)在这方面提供了大量证据。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-01-29T02:26:33.863

生产意味着您需要可靠、一致地工作的任何东西。

无论是构建脚本，还是面向公众的 Web 服务器。

当其他人依赖您的代码时，尤其是那些可能不理解它的人（即即使是“聪明的”开发人员，但可能不在您的团队中，但使用您编写的库），该代码就是生产代码。

这是生产，因为当生产代码失败时“工作停止”和“金钱损失”。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-29T02:25:57.203

据我了解，生产代码是在实时、非测试平台系统上安装或使用的任何代码。如果公司内部使用的服务器是公司员工使用的实时系统，那么它就是生产系统。这里的重点是，在编写代码的公司内部的服务器上运行的代码可以是生产代码。

通常，在查看内部代码时，一个很好的区别是维护代码的组是否与使用代码的组分开。如果这些组是分开的，则代码很可能是生产代码。如果运行业务依赖于代码，那么它肯定是生产代码，即使它是内部开发和维护的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T06:22:05.777

编辑：简短的回答：如果你“把农场赌在上面”，那就是***“生产”***。

这是一个很好的问题——一个绝对关键的区别，经常因为误解而让每个人都陷入困境。什么是“*生产*”的问题是什么是“*环境*”的相关问题的一个子集。

> **所以部分答案是，“*生产*”是最重要的“*环境*”，也是** **最值得信赖的“*真实*”事物。**

所以现在我们必须定义“*环境*”（然后重新访问“*生产*”）。 **我们离满意的答案还很远。**

我们程序员经常使用术语“*环境*”来指代由执行软件的硬件组成的计算机系统。该软件是我们编写的代码以及它所依赖的软件，这些软件是由其他人编写的。我们编写代码并将其与其他软件集成，然后我们通常通过一系列升级的测试（单元测试、集成测试、功能测试、验收测试、回归测试等）运行集成软件，直到我们最终运行以预期的完整方式集成软件。

当然，并非一切都是完全自动化的。通常涉及很多人，并且他们有手动流程要执行。我们程序员寻找使这些过程尽可能多的自动化的方法，但在我们工作的系统中总是存在“人/机边界”。通常，在任何特定情况下都有许多这样的界限。

另一方面，可能根本没有任何显着的自动化。例如，当我们有一个房间里挤满了生产产品的手工劳动的人时，*我们**谈到了“**生产*” 。*因此，我们的“生产*”“*环境*”中不必存在任何自动化。还有一个中间地带，其中涉及的自动化不包括软件，例如在一个人运行织布机织布的情况下。

 ***此外，可能没有*产品*，因为我们已经调整了我们的“*生产*”“*环境*”语言以包括无产品服务提供商。

同样，测试可能不涉及软件，因为我们可能正在测试非软件驱动的机器（例如织布机）甚至人（培训和评估）。

**现在我们已经触及了“*环境*”的所有关键要素：**

*   有一个目的，一个**`intent`**，正在追求
*   an**`intent`**需要一个意向者，因此必须有一个**`sponsor`**（个人或团体，但不是机器）来指定**`intent`**
*   这是通过各种执行的各种**`intent`**追求的**`processes`****`actors`**
*   这些**`actors`**可能是人，可能是在硬件上执行的软件，也可能是非软件驱动的机器，因此可能存在也可能不存在自动化

**现在我们可以正确且完整地定义我们的原始术语。**

> 一个**`environment`**由所有代表其合作追求特定事物的**`processes`**人和他们组成。这意味着软件在硬件上执行，这意味着非软件驱动的机器，这意味着人们执行他们的各种职责。它是主要定义 a 的，而不是它的或它的。**`actors`****`intent`****`sponsor`****`intent`****`environment`****`processes`****`actors`**

此外...

> 如果**`intent`**某个特定的追求**`environment`**是 **`sponsor's`**最终目标，通常涉及生产a**`product`**或提供a**`service`**以换取金钱，那么我们将其 **`environment`**称为**`production`**。

现在我们可以走得更远一点。

> 如果**`intent`**在an中追求的**`environment`**是对a的验证 **`processes`**和**`actors`**准备**`production`**，我们称之为a 。**`test`** **`environment`**
> 
> 我们进一步将其称为测试是否涉及重要个人或团体及其.**`integration`** **`environment`****`processes`****`actors`**
> 
> 如果该准备工作涉及人类“编程”**`actors`**以执行 new **`processes`**或随后的验证（评估），那么我们将其称为 a 。**`training`** **`environment`**

有了这些区别和定义，我们现在可以理解几种常见的场景。

An**`environment`**可能被错误地标记为与其不匹配的名称**`intent`**，例如当**`training`**环境用作时**`test`**。

An**`environment`**可能会被严重误用，例如 when**`integration`**或**`training`**is done in **`production`**。

An**`environment`**可能会被歪曲，例如当 key**`processes`**或未**`actors`**识别时（例如，手动核对，甚至完全忽略人员）。

可以**`environment`**通过将其**`processes`**和重新**`actors`**分配给新的 来重新分配任务**`intent`**。对于某些组织来说，一项非常成功的技术是在每个版本之间、、、 和之间定期“翻转”几组**`actors`**（服务器托管软件） 。**`production`****`test`****`training`****`integration`**

在大多数情况下，单个**`actor`**（人或硬件）可以执行多个**`processes`**可以参与多个**`environments`**. 例如，单个计算机服务器可以托管执行**`production`**交易的软件，同时还托管其他执行**`test`**或**`training`**功能的软件。

通常，一个实例**`actor`**应该一次只参与**`environment`**一个。在极少数情况下，如果相互兼容，则**`actor`**可以共享单个。大多数时候，尝试这样的共享是非常不明智的，因为它们并不真正兼容。一个完美的例子是在同样支持的服务器上运行，导致停机，因为这导致整个服务器出现故障。**`environments`****`intents`****`intents`****`test`** **`process`****`production`** **`processes`****`test`**

因此，**`intent`**必须**`environment`**以非常宽的范围来解释，以包括*可用性*、*可靠性*、*性能*、*灾难恢复*、*准确性*、*精确度*、*可重复性*、*寿命*等概念。这意味着**`actors`**和**`processes`**必须经常被解释为包括诸如*提供电源*、*冷却*、*备份*和*冗余*。

最后，请注意，情况可能会变得相当复杂。例如，开发**`actor`**团队**`sponsor`**（尽管如此，IT 人员仍将同一台台式计算机视为开发人员工作站（不是），并在它出现硬件问题时以轻蔑和冷漠的态度对待它。但是开发人员正在生成代码，所以他们不也是其中的一部分吗？观点很重要。**`process`****`production`****`development`****`production`****`production`****`production`**

*编辑：生产质量*

一个可靠的验证（**`testing`**）方法应该从打包的代码中获取**`development`**并运行它通过一系列**`tests`**（集成、TQA、功能、回归、验收等），直到它出现在另一端“标记”以供**`production`**使用。然而，这使得包装*质量*，但实际上并非如此。仅当 a将其实际部署到具有最终级别的.**`production`** ***`production`****`production`****`sponsor`****`environment`****`intent`***

 *但是，如果您的组织仅生产该软件包（其）以供其他人使用，那么此类发布与该组织将在该方面经历的**`product`**一样接近，因此通常将术语延伸以适用而不是澄清这是*质量*。实际上，该组织的环境由.**`production`****`product`****`production`****`production`** ***`production`****`actors`****`processes`****`product`***

 *我说它可能会变得相当复杂......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T03:26:01.203

其预期用户群将使用的任何代码都符合我对“生产代码”的定义。

当然，该定义中的灰色区域将清楚地定义您的用户群是谁。

G人

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-30T22:12:27.413

*   生产软件可以在必要的工作负载下执行，而不会中断或降级服务
*   软件已在不同生产场景中成功测试
*   将工作原型转化为生产软件，运行在故障安全冗余架构上，可以在实际业务（即生产环境）中运行，需要时间、代码重构和对细节的关注
*   生产代码具有可接受的可维护性水平，并得到合理的评论
*   文档手册解释了功能、所有特性并便于维护
*   如果生产软件是国际服务或应用程序，则必须本地化
*   最终用户（通常是在服务条款协议中所述条件下的客户）使用生产代码
*   生产软件并不一定意味着可靠的关键任务软件
*   该软件做得很好，它打算做什么
*   日志文件提供了对运行时性能和软件可靠性指标和报告的准确描述，这有助于调试和软件可维护性

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-26T22:14:03.650

我认为描述它的最佳方式是任何“导致”部署和“后续”部署的代码。部署本身被定义为使软件系统可供使用的所有活动。如果您的代码已准备好供人们在内部或其他地方使用，那么它就是生产代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-29T07:20:59.090

简而言之，“目标受众正在使用和使用的生产代码”

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-01-29T07:17:14.120

术语“生产代码”混合了两个不同的概念。一是部署管理，二是[发布生命周期](http://en.wikipedia.org/wiki/Software_release_life_cycle)。

从严格意义上讲，当系统被用作业务或服务操作的一部分时，它就处于生产状态。生产中没有的是开发、测试、QA、演示和登台系统。生产系统并不直接意味着质量。

从发布生命周期的角度来看，“生产”构建是发布给公众或客户的构建。它是pre-alpha、alpha、beta（功能完成、代码完成等）和候选发布之后的阶段。对于无法轻松部署更新的收缩包装产品，进入生产阶段可能意味着一系列测试和错误修复。

![替代文字](https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Develstages.svg/180px-Develstages.svg.png)

# text - 按钮上的文本和图标之间的最佳权衡是什么？

> ID：490293
> 
> 赞同：7
> 
> 时间：2009-01-29T02:24:19.283
> 
> 标签：text, usability, icons

在今天与同事的讨论中，我感叹我不记得图标的含义，并且必须将鼠标悬停在它们上才能看到工具提示，从而找到我需要的按钮。

在他们这边，他们说当需要翻译文本时，它可能不合适（例如德语和英语），并且每个有文本的地方，包括工具提示，都需要翻译。所以普通的图标更容易。

对于文本的额外工作与图标挑战的用户子集，在可用性方面的最佳权衡是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T02:33:47.953

我个人更喜欢文字，**讨厌**只有图标的 UI。我知道其他人的想法同样强烈，要么是因为国际化，要么是因为他们的大脑处理图像比处理文本更快。如果您专门为您的 UI 选择一个或另一个，那么您的部分用户群将对您的选择不满意。（有时这是正确的选择，具体取决于 UI 的使用范围。）

国际化真的没那么难，除了找一家公司把你的文字翻译好。国际化的程序员部分非常简单。但是，我认识一些更喜欢全图标方法的程序员，因为它的工作量更少。我个人不得不更换一个用户不喜欢的全图标无文本 UI。用户说他们不记得这些图标的含义。

我认为更典型的是，许多高级用户会更喜欢图标，而许多初级用户会更喜欢文字。但是，许多高级用户更喜欢文本。恕我直言，任何好的 UI 都会提供工具提示，因此无论您做什么都需要翻译您的界面。

最友好的解决方案是同时提供文本和图标，可能带有禁用其中一个或另一个的设置选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-12T18:49:13.930

我与人机交互组中的人一起工作，并因仅使用图标而被挖苦。他们研究了理解、错误率和使用 UI 的速度，并且每次都赢得了良好的图标/标签组合，其他一切都相同。

本地化应该不是问题。无论如何，您可能必须对图标进行本地化，并且对标签进行本地化（只要它存储为文本而不是位）很容易。就 UI 中的大小而言 - 这完全是另一回事。如果你不能适应文本，我会声称你的用户界面太杂乱了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T02:37:00.083

真的，他们都有优点和缺点。文本必须始终被翻译成不同的语言，有时单个词无法有效地描述按钮的操作。例如，您如何描述在 Windows 中关闭窗口的 X 按钮。我们知道它的作用，我认识的大多数人都称它为 X 按钮，但它没有描述它的作用。放置一个带有 X 符号（或图标，如果你愿意的话）的按钮比放置诸如“关闭窗口”之类的东西要容易得多。

话虽如此，图标也有缺点。正如你所逃避的那样，他们可能并不总是清楚他们在做什么。用户必须能够将图标放在社交环境中才能理解它的作用。这可能并不总是可能的。此外，一种语言的图标可能无法在另一种语言中被理解，从而导致翻译问题。图标在某些领域可能是有利的，因为它们可以采用复杂的概念并向用户展示少量空间。（喜欢拍照显示相机，或删除显示垃圾桶的东西）。

权衡实际上是根据具体情况而定的。如果您有真正了解他们正在使用的应用程序和周围主题的高级用户，那么您可能可以使用它们。如果您的人每个月使用一次计算机并且并不真正关心学习，那将是令人困惑的。它是您可以用单个符号（图标、图片、字母）传达的信息量与用户的潜在挫败感和对您的程序的整体拒绝。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T02:48:27.847

确保你有办法同时获得两者。屏幕阅读器在图标上度过了可怕的时光。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-03T07:07:43.430

我讨厌图标，因为即使它们非常直观，我也永远不知道它们的含义（例如这个世界图标，它表示我正在输入的框上方的超链接）。几个 Unix 终端应用程序提供以下选择：

*   文本
*   图形图标
*   两个都

那很好。我通常喜欢突出按钮上的文字，因为按钮的含义更清晰，鼠标目标可以更大一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T02:28:47.777

它是一种文化事物，因为一些符号（图标）对不同文化、背景和经历的人意味着不同的事物。有一些全球性的符号可以假设为普通民众“知道”，即“保存”图标......

这是一条很好的路线，但我认为工具提示是帮助那些不理解图标含义的人的好方法。也许一组选项可以让按钮（图标）用文本而不是图标图像呈现？这可能是应用程序中的用户偏好。

也许一个很好的参考将是一些在微软应用程序中“广泛”使用的图标，例如“Word”。我在这里概括，但微软应用程序几乎无处不在，他们已经完成了所有研发到合适/有效的图标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-29T02:40:02.917

您没有提及这是否适用于 Web 应用程序，但如果是，则如果用户禁用了图像、使用屏幕阅读器或其他受限界面，则您必须至少提供文本作为备份。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-29T03:22:44.470

我猜有两件事

1.  该决定应该是可用性研究和适当量化的结果，而不是开发人员的直觉或突发奇想。

2.  一个没有明显意义的图标是一个坏图标，应该改变。

话虽如此，IMO：具有等效工具提示/鼠标悬停文本的图标，还有一个好处是可以提醒键盘快捷键。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-12T18:38:42.143

（注意：我在这里使用“按钮”来表示“图标和/或文本所在的 UI 元素。”）

我认为在几乎所有情况下，在按钮本身或至少在按钮上的悬停工具提示上包含文本都很重要，这样如果图标的含义对特定用户不直观，用户可以通过阅读课文找出意思。（请注意，无论哪种情况，都需要进行翻译工作。）

不直接在按钮本身上包含文本的典型情况是*空间非常宝贵*；当您想在一个小区域中安装很多按钮时。示例包括许多桌面应用程序和一些 Web 应用程序中使用的“工具栏”——例如，出现在 StackOverflow 答案文本输入字段上方的按钮！

包含图标的一个很好的例子是当按钮*并不总是出现在同一个地方*时，用户将受益于能够快速直观地扫描按钮所在的位置。例如，如果我在 Windows 上打开了很多程序，并且我想在 Windows 任务栏中快速找到我的 Firefox 实例，我会寻找橙色的小图标，而不是阅读每个任务栏按钮上的文本。

# wpf - 在 WPF 中更改组合框的样式（最好在 Blend 中）

> ID：490294
> 
> 赞同：2
> 
> 时间：2009-01-29T02:24:41.293
> 
> 标签：wpf, combobox, controls, styles, expression-blend

我在尝试更改 Expression Blend/WPF 中组合框的外观/样式时遇到了一些问题。虽然那里有描述按钮设置样式的教程，但 ComboBox 控件似乎存在一些问题。

任何人都可以提供任何建议，或者向我指出好的教程，其中包括重新设计比按钮更复杂的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T12:27:40.043

**ComboBox**样式模板有 3 个部分。

您应该遇到过样式化按钮的**ContentPresenter 。**

有一个**Part_Popup**，您应该会发现它很容易更改属性和样式。

最后一部分是**ToggleButton**，用于设置您需要再次“编辑副本”并为 ToggleButton 创建另一个新样式模板的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T02:38:49.113

看看[BeaCostas SolarSytem Listbox](http://www.beacosta.com/blog/?p=40)，它是一个很不错的作品。

# windows - 在 win32 上构建多语言应用程序的最佳实践是什么？

> ID：490297
> 
> 赞同：2
> 
> 时间：2009-01-29T02:26:11.620
> 
> 标签：windows, windows-mobile, multilingual

我必须在 Windows Mobile 上构建一个 GUI 应用程序，并希望它能够让用户选择她想要的语言，或者应用程序自动选择语言。我考虑使用仅包含所需资源的多个 dll。

1) 在没有用户干预的情况下，让应用程序自动选择适当的资源语言的首选（默认？）方法是什么？有样品吗？

2) 我有哪些选项可以让用户/应用程序控制它应该显示什么语言？

3）如果可能，我如何创建一个包含多种语言资源的dll，然后动态选择语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T02:46:22.903

对于 #1，您可以使用[GetSystemDefaultLangID](http://msdn.microsoft.com/en-us/library/aa913453.aspx)函数来获取机器的语言标识符。

对于#2，您可以列出您支持的语言，当用户选择一种语言时，将选择写入文本文件或注册表（Windows Mobile 上是否有注册表？）。启动时，仅当文件或注册表中没有选择时才使用#1 中的功能。

对于#3，我们这样做的方式是为每种语言设置一个资源 DLL，每个 DLL 都包含相同的资源 ID。确定语言后，加载该语言的 DLL，其余的就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T03:29:11.740

**回复 1：**之前的 GetSystemDefuaultLangID 建议是一个很好的建议。

**Re 2：**您可以在安装的第一步中询问。或者您可以为每种语言打包不同的安装程序。

**Re 3：** 理论上，上面提到的 DLL 方法听起来不错，但实际上它对我个人来说并不是很好。

更好的方法是使用以下任一方法包围程序中的所有字符串：Localize 或 NoLocalize。

```
MessageBox(Localize("Hello"), Localize("Title"), MB_OK);
RegOpenKey(NoLocalize("\\SOFTWARE\\RegKey"), ...); 
```

Localize 只是一个将您的英文文本转换为所选语言的功能。NoLocalize 什么都不做。

不过，您希望用这些值包围您的字符串，因为您可以用您选择的脚本语言构建几个有用的脚本。

1) 搜索所有 Localize(" 前缀并输出具有 english=otherlangauge 名称值对的 .ini 文件的脚本。如果输出 .ini 文件已经包含映射，则无需再次添加。您永远不会重新创建ini 文件，您的脚本只是在每次运行脚本时添加缺少的文件。

2) 一个搜索所有字符串并确保它们被 Localize(" 或 NoLocalize(" 包围) 的脚本。如果不是，它会告诉您哪些字符串仍然需要本地化。

原因 #2 很重要，因为您需要确保所有字符串实际上都被有意识地标记为是否需要本地化。否则绝对不可能确保您有正确的本地化。

#1 而不是从 DLL 加载的原因是因为维护此解决方案不需要任何工作，并且您可以添加需要即时翻译的新字符串。

您运送随程序输出的 ini 文件。您还可以将这些 ini 文件提供给您的翻译人员，以便他们可以转换english=otherlanguage 对。当他们将其发回给您时，您只需将您签入的 .ini 文件替换为您的翻译提供的文件。如在#1 中提到的那样运行您的脚本将重新添加任何缺失的翻译（如果在翻译时完成了任何翻译）。

# objective-c - 如何在 NavigationController 中将信息从子级返回给父级

> ID：490316
> 
> 赞同：1
> 
> 时间：2009-01-29T02:37:31.860
> 
> 标签：objective-c, iphone

我想知道从子视图中取回某些消息的正确方法是什么。

我有一个在子视图中编辑的对象。我想在 TableView 中看到他们的修改。

但是，我不知道一种干净的方法（我不喜欢这里的单身人士）。

当子视图消失并获得一些相关信息时，是否可能会收到通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T02:43:58.820

您可以使用`UIViewController`通知[`viewWillDisappear:`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewWillDisappear:)并[`viewDidDisappear:`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidDisappear:)在某个`UIView`即将消失之前和在它消失后立即收到通知。请注意，大多数各种 UIKit 对象（包括`UITableView`）都是`UIView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T07:39:03.890

`viewWillDisappear`恕我直言，“正确”的方法是在视图的控制器（在您的情况下可能是导航控制器）或应用程序委托中实现自定义协议，并让子视图在获得和/或通知时使用它进行通信`viewWillDisappear`（如在亚当的回答）。同样，在父视图中，您可以刷新`viewWillAppear`处理程序中的必要信息。

这样，父视图从委托而不是直接从特定子视图获取其数据，该子视图在您的设计中维护 MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-30T06:59:45.960

您还可以发出通知（使用 NSNotificationCenter），父级将被订阅监听 - 这具有其他类也可以被通知的附带好处。

但是如果这是一个非常严格的关系，只有子视图和主表会关心，你可能应该将你的表视图控制器设置为子视图的委托，并让子视图直接调用委托（提到的协议是一个好主意像这样的东西）。

# gcc - 如何检查 gcc 是否正在执行尾递归优化？

> ID：490324
> 
> 赞同：68
> 
> 时间：2009-01-29T02:42:31.790
> 
> 标签：gcc, g++, tail-recursion

如何判断 gcc（更具体地说，g++）是否正在优化*特定函数中的*尾递归？（因为它出现了几次：我不想测试 gcc 是否可以优化尾递归。我想知道它是否优化**了我的**尾递归函数。）

如果您的答案是“查看生成的汇编程序”，我想确切地知道我在寻找什么，以及是否可以编写一个简单的程序来检查汇编程序以查看是否有优化。

PS。我知道这似乎是问题的一部分[，如果有的话，C++ 编译器会进行尾递归优化吗？](https://stackoverflow.com/questions/34125/which-if-any-c-compilers-do-tail-recursion-optimization)从 5 个月前开始。但是，我认为该问题的*这一部分*没有得到令人满意的回答。（答案是“检查编译器是否进行了优化（据我所知）的最简单方法是执行一个调用，否则会导致堆栈溢出 - 或查看程序集输出。”）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-01-29T03:29:14.393

让我们使用[另一个问题中的示例代码](https://stackoverflow.com/questions/34125/which-if-any-c-compilers-do-tail-recursion-optimization#220660)。编译它，但告诉 gcc 不要汇编：

```
gcc -std=c99 -S -O2 test.c

```

现在让我们看看生成的*test.s*`_atoi`文件中的函数（Mac OS 10.5 上的 gcc 4.0.1）：

 *```
 .text
        .align 4,0x90
_atoi:
        pushl   %ebp
        testl   %eax, %eax
        movl    %esp, %ebp
        movl    %eax, %ecx
        je      L3
        .align 4,0x90
L5:
        movzbl  (%ecx), %eax
        testb   %al, %al
        je      L3
        leal    (%edx,%edx,4), %edx
        movsbl  %al,%eax
        incl    %ecx
        leal    -48(%eax,%edx,2), %edx
        jne     L5
        .align 4,0x90
L3:
        leave
        movl    %edx, %eax
        ret 
```

编译器对此函数进行了尾调用优化。我们可以判断，因为该代码中没有`call`指令，而原始 C 代码显然有一个函数调用。此外，我们可以看到`jne L5`在函数中向后跳转的指令，当 C 代码中明显没有循环时表示循环。如果您在关闭优化的情况下重新编译，您会看到一行显示`call _atoi`，并且您也不会看到任何向后跳转。

您是否可以自动执行此操作是另一回事。汇编代码的细节将取决于您正在编译的代码。

我认为你可以通过编程方式发现它。使函数打印出堆栈指针的当前值（在 x86 上注册 ESP）。如果函数在第一次调用时打印与递归调用相同的值，则编译器执行了尾调用优化。但是，这个想法需要修改您希望观察的函数，这可能会影响编译器选择优化函数的方式。如果测试成功（两次打印相同的 ESP 值），那么我认为可以合理地假设优化也将在没有您的仪器的情况下执行，但如果测试失败，我们将不知道失败是否是由于添加仪器代码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-01-29T05:07:36.113

**编辑**我原来的帖子也阻止了 GCC 实际上进行尾调用消除。我在下面添加了一些额外的技巧，以使 GCC 无论如何都要进行尾调用消除。

扩展史蒂文的答案，您可以以编程方式检查您是否具有相同的堆栈帧：

```
#include <stdio.h>

// We need to get a reference to the stack without spooking GCC into turning
// off tail-call elimination
int oracle2(void) { 
    char oracle; int oracle2 = (int)&oracle; return oracle2; 
}

void myCoolFunction(params, ..., int tailRecursionCheck) {
    int oracle = oracle2();
    if( tailRecursionCheck && tailRecursionCheck != oracle ) {
        printf("GCC did not optimize this call.\n");
    }
    // ... more code ...
    // The return is significant... GCC won't eliminate the call otherwise
    return myCoolFunction( ..., oracle);
}

int main(int argc, char *argv[]) {
    myCoolFunction(..., 0);
    return 0;
} 
```

非递归调用函数时，传入 0 检查参数。否则传入oracle。如果没有应该消除的尾递归调用，那么您将在运行时收到通知。

对此进行测试时，我的 GCC 版本似乎没有优化第一个尾调用，但优化了剩余的尾调用。有趣的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-29T03:27:32.213

查看生成的汇编代码，看看它是否使用`call`or`jmp`指令进行 x86 上的递归调用（对于其他架构，请查找相应的指令）。您可以使用`nm`and`objdump`来获取与您的功能相对应的程序集。考虑以下函数：

```
int fact(int n)
{
  return n <= 1 ? 1 : n * fact(n-1);
} 
```

编译为

```
gcc fact.c -c -o fact.o -O2 
```

然后，测试它是否使用尾递归：

```
# get starting address and size of function fact from nm
ADDR=$(nm --print-size --radix=d fact.o | grep ' fact$' | cut -d ' ' -f 1,2)
# strip leading 0's to avoid being interpreted by objdump as octal addresses
STARTADDR=$(echo $ADDR | cut -d ' ' -f 1 | sed 's/^0*\(.\)/\1/')
SIZE=$(echo $ADDR | cut -d ' ' -f 2 | sed 's/^0*//')
STOPADDR=$(( $STARTADDR + $SIZE ))

# now disassemble the function and look for an instruction of the form
# call addr <fact+offset>
if objdump --disassemble fact.o --start-address=$STARTADDR --stop-address=$STOPADDR | \
    grep -qE 'call +[0-9a-f]+ <fact\+'
then
    echo "fact is NOT tail recursive"
else
    echo "fact is tail recursive"
fi 
```

当在上面的函数上运行时，这个脚本会打印“fact is tail recursive”。当使用而不是编译时`-O3`，`-O2`这会奇怪地打印“事实不是尾递归”。

请注意，正如 ehemient 在他的评论中指出的那样，这可能会产生假阴性。如果函数根本不包含对自身的递归调用，并且它也不会检测兄弟递归（例如 where `A()`calls `B()`which calls `A()`），此脚本只会产生正确的答案。目前我想不出一种更强大的方法，它不涉及人工查看生成的程序集，但至少您可以使用此脚本轻松获取与目标文件中特定函数相对应的程序集。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-29T03:28:10.713

扩展 PolyThinker 的答案，这里有一个具体的例子。

```
int foo(int a, int b) {
    if (a && b)
        return foo(a - 1, b - 1);
    return a + b;
} 
```

`i686-pc-linux-gnu-gcc-4.3.2 -Os -fno-optimize-sibling-calls`输出：

```
00000000 <foo>:
   0: 55 推 %ebp
   1: 89 e5 移动 %esp,%ebp
   3: 8b 55 08 移动 0x8(%ebp),%edx
   6: 8b 45 0c 移动 0xc(%ebp),%eax
   9: 85 d2 测试 %edx,%edx
   b: 74 16 je 23 <foo+0x23>
   d: 85 c0 测试 %eax,%eax
   f: 74 12 je 23 <foo+0x23>
  11:51 推送 %ecx
  12：12 月 48 日
  13: 51 推送 %ecx
  14: 50 推%eax
  15: 8d 42 ff lea -0x1(%edx),%eax
  18: 50 推%eax
  19: e8 fc ff ff ff 调用 1a <foo+0x1a>
  1e: 83 c4 10 添加 $0x10,%esp
  21: eb 02 jmp 25 <foo+0x25>
  23: 01 d0 添加 %edx,%eax
  25：c9离开
  26：c3 回复

```

`i686-pc-linux-gnu-gcc-4.3.2 -Os`输出：

```
00000000 <foo>:
   0: 55 推 %ebp
   1: 89 e5 移动 %esp,%ebp
   3: 8b 55 08 移动 0x8(%ebp),%edx
   6: 8b 45 0c 移动 0xc(%ebp),%eax
   9: 85 d2 测试 %edx,%edx
   b: 74 08 je 15 <foo+0x15>
   d: 85 c0 测试 %eax,%eax
   f: 74 04 je 15 <foo+0x15>
  11：12 月 48 日
  12: 12 月 4 日 %edx
  13: eb f4 jmp 9 <foo+0x9>
  15: 5d 弹出 %ebp
  16: 01 d0 添加 %edx,%eax
  18：c3 雷特

```

在第一种情况下，`<foo+0x11>-<foo+0x1d>`为函数调用推送参数，而在第二种情况下，`<foo+0x11>-<foo+0x14>`将变量和`jmp`s 修改为同一个函数，位于序言之后的某个位置。这就是你想要寻找的。

我认为您不能以编程方式执行此操作；有太多可能的变化。函数的“肉”可能离开始更近或更远，如果`jmp`不看它，你就无法将其与循环或条件区分开来。它可能是条件跳转而不是`jmp`. `gcc`在某些情况下可能会保留一个`call`in，但对其他情况应用同级调用优化。

仅供参考，gcc 的“兄弟调用”比尾递归调用更通用——实际上，任何可以重用相同堆栈帧的函数调用都可能是兄弟调用。

[编辑]

例如，当仅寻找自递归`call`会误导您时，

```
int bar(int n) {
    if (n == 0)
        return bar(bar(1));
    if (n % 2)
        return n;
    return bar(n / 2);
} 
```

GCC 将对三个`bar`调用中的两个应用同级调用优化。我仍然称它为尾调用优化，因为单个未优化的调用永远不会超过单个级别，即使您会`call <bar+..>`在生成的程序集中找到 a 。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-29T03:37:39.323

我懒得看反汇编。试试这个：

```
void so(long l)
{
    ++l;
    so(l);
}
int main(int argc, char ** argv)
{
    so(0);
    return 0;
} 
```

编译并运行这个程序。如果它永远运行，尾递归就被优化掉了。如果它破坏了堆栈，则不是。

编辑：对不起，读得太快了，OP想知道*他的特定函数*是否优化了尾递归。好的...

...原理仍然相同 - 如果尾递归被优化掉，那么堆栈帧将保持不变。您应该能够使用[backtrace 函数](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)从函数中捕获堆栈帧，并确定它们是否在增长。如果尾递归被优化掉，*缓冲区中将只有一个返回指针*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-23T04:17:10.683

我检查的另一种方法是：

1.  用'gcc -O2'编译你的代码
2.  开始'gdb'
3.  在您期望进行尾递归优化/消除的函数中放置一个断点
4.  运行你的代码
5.  如果已经消除了尾调用，则断点将只被命中一次或永远不会命中。有关这方面的更多信息，请参阅[此](https://stackoverflow.com/questions/877241/doubt-regarding-a-tail-optimized-code-under-gdb)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-29T02:44:56.870

一个简单的方法：构建一个简单的尾递归程序，编译，反汇编，看是否优化。

刚刚意识到你的问题中已经有了这个。如果您知道如何阅读汇编，则很容易分辨。递归函数将从函数体内调用自己（使用“调用标签”），并且循环将只是“jmp 标签”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-05-19T06:24:42.973

如果没有优化，您可以制作由于该函数调用的递归太深而导致堆栈溢出的输入数据，并查看它是否发生。当然，这不是微不足道的，有时足够大的输入会使函数运行时间过长。

# asp.net - 大型静态结果集上的 ObjectDataSource 缓存

> ID：490329
> 
> 赞同：1
> 
> 时间：2009-01-29T02:43:12.113
> 
> 标签：asp.net, caching, objectdatasource, performancecounter

我有一个objectdatasource，它将返回一个潜在的大集合（最多200,000条记录），这些集合在gridview中绑定和分页。我在 objectdatasource 上使用默认分页和缓存。返回的数据仅每周更新一次，因此过时的数据不是问题。此解决方案中的分页也比我使用自定义分页创建解决方案时更快。

我的问题是：缓存这么大的记录集你可以接受吗？如果不是，为什么？是否有任何性能计数器可用于查看缓存数据对内存产生的影响？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T03:05:39.013

回答您的问题：

1) 是的，缓存大型数据集是可以的。特别是生成数据集比缓存它更昂贵。此外，由于这是相当静态的数据，因此它是一个很好的候选者。
2) 至于性能计数器，这取决于您使用的缓存机制。例如，如果您使用 Enterprise Librarie 的缓存块，它内置了计数器。至于一般计数器，请查看内存计数器、工作集、私有字节等...

# visual-studio-2008 - 有人在使用 VS2008 中的内置代码生成（.tt 文件）吗？

> ID：490342
> 
> 赞同：1
> 
> 时间：2009-01-29T02:51:52.847
> 
> 标签：visual-studio-2008, code-generation

是否有人使用通过文本模板（使用 .tt 文件）提供的内置代码生成？如果是这样，与codesmith等其他解决方案相比，主要的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T03:21:36.063

T4 一代在 2005 年相当可悲。显然 2008 年还可以，但我们选择了 Codesmith，因为这是 2005 年之前的情况。

我假设您会看过 T4 编辑器？Clarius提供[免费版本](http://www.t4editor.net/downloads.html)。此外，在 Oleg 的博客中还有[大量的信息。](http://www.olegsych.com/2007/12/text-template-transformation-toolkit/)

我的理解是你可以让 T4 工作并且它适合目的，但 CodeSmith 更成熟一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T05:09:13.413

在你使用 T4 之前，我会说看看你的其他选项：
- CodeSmith
- XML/XSLT
- CodeDom
- 其他应用程序，如 CodeSmith

我喜欢的一件事是 T4 免费内置到编译过程中。

我赞同 Travis 对 Oleg / Clarius 的评价。

您可能还希望将此站点作为资源阅读：
[gendotnet 上的 Kathleen Dollard](http://gendotnet.com/)

她的书：[Microsoft .NET 中的代码生成](https://rads.stackoverflow.com/amzn/click/com/1590591372)
如果我没记错的话，这主要涉及 XML/XSLT 和 CodeDom，但可能会给您一些想法/对比

Hanselman 的一页 T4 资源：
[T4 (Text Template Transformation Toolkit) Code Generation - Best Kept Visual Studio Secret](http://www.hanselman.com/blog/T4TextTemplateTransformationToolkitCodeGenerationBestKeptVisualStudioSecret.aspx)

额外：[DotNetRocks 上的 Kathleen Dollard](http://www.dotnetrocks.com/default.aspx?showNum=63)

我会说我已经使用 T4 进行了一些代码生成，但是当我掌握了它的窍门时，我已经转向使用一些开源框架来消除编写繁琐代码的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-04T13:01:14.013

T4 模板用作[服务工厂](http://www.codeplex.com/servicefactory/)使用的主要代码生成技术。当然，它们也被作为 Visual Studio SDK 一部分的 DSL Toolkit 使用。

我对它们的问题很少，而[Clarius T4 编辑](http://www.t4editor.net/downloads.html)器使它们的工作效率更高。DSL 工具包（以及服务工厂）允许模板迭代模型以生成代码。其他[指令处理器](http://msdn.microsoft.com/en-us/library/bb126315.aspx)允许模板处理任何其他类型的数据（XML 文档或模式、数据库模式或数据）。

# asp.net - jQuery 验证插件和 ASP.NET 验证器 Web 窗体

> ID：490352
> 
> 赞同：5
> 
> 时间：2009-01-29T02:57:35.800
> 
> 标签：asp.net, jquery

我真的很想在我的 ASP.NET Web 窗体应用程序（不是 MVC）中使用[jQuery 验证插件。](http://plugins.jquery.com/project/validate)

我重视 jQuery 验证以提供更丰富的 UI 体验，我可以为最终用户提供一些要求，以使用红色边框 (css) 突出显示无效字段。

我重视 asp.net 验证器，因为它们不仅在客户端而且在服务器上运行验证，因此我不会向任何足够聪明以在其浏览器中关闭 javascript 的用户打开各种安全漏洞。

所以我正在寻找一种很好的干净方式来集成这两种技术。

我能想到的最好的办法是将所有 ASP.NET 验证器设置为 enableclientscript=false 并在 jQuery 中的客户端和服务器上作为 asp.net 验证器重复验证规则，但我已经看到了这种方法的一些挑战。

最后，我发现使用 asp.net 验证器和 jquery 实现突出显示的最低摩擦方法不是使用 jQuery Validation 插件，而是使用下面的简单 jquery 行（请注意，确切的语法将根据您的布局方式而有所不同你的表格）：

```
<script type='text/javascript'>

        $("input[@type=submit]").click(function() {
        $('span.validationerror:hidden').parent().parent().find('input').removeClass('inputError');
        $('span.validationerror:visible').parent().parent().find('input').addClass('inputError');                        

        });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-10T20:01:22.240

您可以毫无问题地使用 asp.net 和 jquery 验证器...即使在同一个控件上...您只需为控件设置 CssClass 以便 jquery 可以找到它...然后添加`OnClientClick="return $('#aspnetForm').valid();"`到您的`submit button(s)`.

确保并包含通常的 jquery 库和 jquery.validate.js 并添加一个文档准备功能，等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T03:13:26.673

如果您对验证很认真，我会研究像 Peter Blum 的验证器 ( [http://www.peterblum.com/Home.aspx](http://www.peterblum.com/Home.aspx) ) 之类的东西，因为它们应该能够做任何您想做的事情，甚至更多。他们不使用 JQuery，但请记住 JQuery 的全部意义在于节省开发人员的时间 - 如果整体效果相同，最终用户不知道或不关心您是否使用 JQuery。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-06T00:40:08.840

这可能会有所帮助！

[http://www.delphicsage.com/home/blog.aspx?d=205](http://www.delphicsage.com/home/blog.aspx?d=205)

# java - 有没有推荐的方法让 Spring 2.5+ 自动装配 Hibernate 域对象

> ID：490354
> 
> 赞同：4
> 
> 时间：2009-01-29T02:58:06.657
> 
> 标签：java, hibernate, spring, orm, inversion-of-control

有没有推荐的方法让 Spring 2.5+ 自动装配 Hibernate (3.0+) 域对象。我意识到有一种方法可以使用 AspectJ ( `@Configurable`) 来做到这一点，但我想避免引入 AspectJ。

一些谷歌搜索发现[了这个 DependencyInjectionInterceptorFactoryBean 类](http://fisheye1.atlassian.com/browse/springframework/spring/sandbox/src/org/springframework/orm/hibernate/support/DependencyInjectionInterceptorFactoryBean.java)，但它似乎只存在于沙箱中（并且只存在于 2.0.x 中？）。

我可以创建一个 10 行的 Hibernate`PreLoadEventListener`来为我做这个自动装配，但我真的认为它会`org.springframework.orm.hibernate3`提供一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-14T10:16:09.973

向 Spring 无法控制的实例提供依赖注入的*推荐方法是使用您提到的基于 AspectJ 的解决方案。*据我所知，Hibernate 特定的类已经被放弃，取而代之的是[这里](http://blog.springsource.com/2008/01/23/new-improvements-in-domain-object-dependnecy-injection-feature/)描述的一般方法。

另请注意，`@Configurable`如果您使用`AbstractInterfaceDrivenDependencyInjectionAspect`. 正如您所说，您*需要*将 AspectJ 用于加载时或编译时编织。作为一个好处，您将获得“极端情况”的依赖注入，例如反序列化以及这种方法。

有关如何实现和集成 Ramnivas 建议的模式的综合示例，请查看[此处](http://87.230.78.21:8080/download/attachments/1179684/JUGC.zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T19:22:02.907

看看@Repository（和@Component）注解。在 Spring 2.5 中，Spring 2.0 中引入的“stereotype”注解的概念得到了扩展，这些注解都被新的组件扫描功能支持，如 Spring 文档的[Annotation-driven configuration](http://static.springframework.org/spring/docs/2.5.x/reference/new-in-2.html#new-in-2-ioc-annotations)一章中所述。

所以这应该工作：

```
@Repository
public class HibernateClinic implements Clinic {

    private SessionFactory sessionFactory;

    public HibernateClinic(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public Collection getVetTypes() {
        Session session = sessionFactory.getCurrentSession();
        return session.createQuery(”from VetTypes”).list();
    }
} 
```

（示例取自 Rossen Stoyanchev在 Metropolis 2008上的[演讲）](http://springone.wiki-neon.adaptavist.com/download/attachments/1212485/S08_11_03_05.pdf)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-29T05:10:15.407

你能举一个代码例子吗？

我发现整个“贫血域模型”反模式难以实现。我认为这在理论上听起来很棒，但在实践中并不那么好。

是什么因素导致您采用富域模型方法？

# unit-testing - Moq：如何断言我的模拟对象上的方法没有运行？

> ID：490355
> 
> 赞同：6
> 
> 时间：2009-01-29T02:59:20.383
> 
> 标签：unit-testing, moq

我有模拟工作，我测试模拟对象上的方法是否使用正确的参数调用，并返回正确的结果。

现在我想检查另一个条件。在这种情况下，不应在模拟对象上运行任何方法。如何在单元测试中表达这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-29T03:04:55.783

您可以创建严格的模拟。这样，仅允许运行您设置的方法（或期望的方法，具体取决于您使用的 Moq 版本）。

```
var foo = new Mock<IFoo>(MockBehavior.Strict);
foo.Expect(f => f.Bar()); 
```

每当在 foo 上调用 Bar() 以外的方法时，都会引发异常并且您的测试将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T03:04:45.597

两种最直接的方法是使用 MockBehaviour.Strict：

```
var moqFoo = new Mock<IFoo>(MockBehaviour.Strict);  
//any calls to methods that there aren't expectations set for will cause exceptions 
```

或者您总是可以使用回调并从那里抛出异常（如果有不应该调用的特定方法。

```
var moqFoo = new Mock<IFoo>(MockBehaviour.Loose);  
moqFoo.Expect(f => f.Bar()).Callback(throw new ThisShouldNotBeCalledException()); 
```

# validation - 在 Spring MVC 网站中验证 URL 参数的最佳方法是什么？

> ID：490360
> 
> 赞同：2
> 
> 时间：2009-01-29T03:03:37.753
> 
> 标签：validation, spring, spring-mvc

我正在使用 Spring MVC 构建我的 Web 应用程序，并且我有一个关于验证我在 URL 中收到的参数的问题。**检测无效参数并向用户显示错误的最佳方法是什么？**

假设我有一个“查看用户资料”页面。显示的配置文件基于 URL 中指定的用户 ID 参数。我可能会去以下地址查看 ID 为 92 的用户的个人资料：

> [http://www.somedomain.com/profile.html?id=92](http://www.somedomain.com/profile.html?id=92)

我创建了一个`ProfileControlller`对象，它将执行以下操作：

1.  从对象中获取`id`参数`request`
2.  `UserProfile`从我的数据库中加载一个对象
3.  将`UserProfile`对象添加到模型
4.  `ModelAndView`用我的模型和“查看用户配置文件”JSP构建一个

如果用户输入有效的 ID 号，这将正常工作。我的`UserProfile`对象使用 JSP 完美加载和显示。但是如果有人将用户 ID 传递`-30294`给我的页面怎么办？如果 ID 无效，我的数据访问层将简单地返回一个`null`对象，但我想向用户显示一条友好的错误消息。在 JSP 代码中检查`null` `UserProfile`对象真的是最好的解决方案吗？

由于我是 Spring 新手，所以我不确定。我喜欢`Validator`类可以与`FormController`对象一起使用的方式，如果这有帮助的话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T03:40:42.310

如果 DAO 返回 null，则只需为错误页面返回 ModelAndView。

例子：

```
UserProfile profile = userProfileDao.findUserProfileById(userId);
if (profile == null) {
    return new ModelAndView("Error", "message", "Invalid user ID");
} else {
    // process accordingly.
} 
```

在 Spring 2.5 发行版中，检查示例目录中的 jpetstore 应用程序。找到 org.springframework.samples.jpetstore.web.spring.SignonController 以获取应用程序的简单示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T20:16:12.263

出于避免编写大量代码的愿望，我这样做的方式是让数据访问层或服务层抛出异常。然后它由 Web 控制器抛出，并转到已在 web.xml 文件中配置的一般错误页面，该页面会显示“找不到页面”之类的内容。

但这实际上取决于您的领域和要求。我最近写的一个应用程序是一个简单的社交网络，用户无法选择停用他们的帐户或更改他们的用户名。因此，他们可以请求无效配置文件的唯一方法是使用 URL。我不打算创建一个更具体的错误页面，只是为了向他们展示他们在胡闹。

但是，如果您确实允许用户，例如，停用他们的帐户，您可能希望采取类似 yawmark 的方法并显示更具体的错误消息。

# php - 如何计算加权平均值？

> ID：490365
> 
> 赞同：4
> 
> 时间：2009-01-29T03:07:47.743
> 
> 标签：php, algorithm, statistics

我的语言是 PHP，但算法应该是相当通用的。

我有一个关联数组（比方说）评级和评级的次数。

```
$ratings = array(
    1 => 1,
    2 => 3,
    3 => 6,
    4 => 3,
    5 => 3
); 
```

这相当于: `[1, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 5, 5, 5]`，但考虑到我正在使用的数字，从第一种形式转换为第二种形式效率很低。

计算上述数字的平均值的算法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-29T03:10:44.807

试试这个：

```
$total = 0;
$count = 0;
foreach($ratings as $number=>$frequency) {
  $total += $number * $frequency;
  $count += $frequency;
}
return $total / $count; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-29T03:13:19.213

这不行吗？

```
$total = 0;
$sum = 0;
foreach ($ratings as $k => $v) {
  $total += $k * $v;
  $sum += $v;
}
echo $total / $sum; 
```

编辑：好吧，我看起来很傻，因为有人打败了我。那好吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T04:04:56.567

怀疑我可以击败公认的答案，但我发现内置循环函数比脚本循环运行得更快。不确定对 $multiply 的调用将如何优化。如果这真的很慢，那么我希望有人会在评论中指出。

```
function multiply( $k , $v ) { return $k * $v; }
return array_sum( array_map( 'multiply' , array_keys($ratings) , $ratings ) ) / array_sum( $ratings ); 
```

# iphone - 临时部署问题：putpkt：写入失败：管道损坏

> ID：490366
> 
> 赞同：7
> 
> 时间：2009-01-29T03:08:09.333
> 
> 标签：iphone, deployment, adhoc

我开发了我的应用程序的测试版，我希望将它放在几个朋友的 iPhone 上进行测试。我已经在 Developer Portal 上完成了 Ad Hoc 部署步骤，并且还按照此处的说明进行操作：[http ://www.talentgrouplabs.com/blog/archive/2008/11/10/iphone-sdk-mobile -provisioning-0xe800003a-0xe8000001.aspx](http://www.talentgrouplabs.com/blog/archive/2008/11/10/iphone-sdk-mobile-provisioning-0xe800003a-0xe8000001.aspx)。当我尝试使用选择的 Ad Hoc 设置编译应用程序时，我得到一个“putpkt：写入失败：管道损坏”。错误记录到控制台。该应用程序似乎已安装，并开始运行，因为我看到了第一个屏幕一秒钟。但是，然后它崩溃并退出。我不知所措。有什么想法吗？以下是控制台的输出：

```
  [会议于 2009-01-28 21:59:35 -0500 开始。]
  正在将程序加载到调试器中……
  警告 - 找不到“AreasTableViewController.m:84”的位置
  GNU gdb 6.3.50-20050815（Apple 版本 gdb-963）（2008 年 11 月 2 日星期日 03:13:07 UTC）
  版权所有 2004 Free Software Foundation, Inc.
  GDB 是自由软件，受 GNU 通用公共许可证保护，您是
  欢迎在某些条件下更改和/或分发它的副本。
  键入“显示复制”以查看条件。
  GDB 绝对没有任何保证。键入“显示保修”以获取详细信息。
  此 GDB 配置为“--host=i386-apple-darwin --target=arm-apple-darwin”.tty /dev/ttys000
  程序已加载。
  目标远程移动 /tmp/.XcodeGDBRemote-6714-88
  切换到远程协议
  内存 0x1000 0x3fffffff 缓存
  内存 0x40000000 0xffffffff 无
  内存 0x00000000 0x0fff 无
  共享库应用加载规则全部
  跑
  跑步…
  putpkt：写入失败：管道损坏。
  putpkt：写入失败：管道损坏。

```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-29T05:48:23.443

这本质上是 Xcode 与您的手机通话能力的内部错误。这并不意味着您做错了什么，这是开发系统中的错误。它会在退出并重新启动 Xcode 后消失，并且可能在重新启动 Mac 后消失。我已经有一段时间没有看到这个错误了——可能需要其他巫术，比如从手机中删除应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-16T04:12:50.960

我在网上找到了这个，它对我有用。仅仅重新启动 xcode 是不够的。

1.  退出 Xcode（以及它正在运行的 GDB）
2.  拔下设备
3.  从设备中删除应用程序（按住图标直到出现 x）
4.  关闭设备
5.  打开设备
6.  插入设备（如果 iTunes 想要同步，让它完成）
7.  启动 Xcode

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-31T11:33:06.980

只需关闭您的设备并再次打开它，现在运行您的应用程序，它将正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-13T22:07:46.607

万一其他人遇到这个问题，Xcode 4.2（测试版）和 iOS 5（测试版）似乎存在一个错误，它不允许我运行任何具有临时配置文件的应用程序。

当我将其切换回开发人员配置文件时，一切正常。

# sharepoint - 单个 MOSS 站点上的多个主机名

> ID：490369
> 
> 赞同：2
> 
> 时间：2009-01-29T03:09:55.243
> 
> 标签：sharepoint, moss, sharepoint-2007

有人问我是否可以让 MOSS 站点的子站点运行与父站点不同的主机名。

假设我有以下站点层次结构：

*   家
*   消息
    *   第1条
*   子站点
    *   页面
        *   一些子页面
        *   其他一些子页面

是否有可能让网站运行 www.my-moss-site.com 但“子站点”在 www.my-moss-sites-sub-site.com 运行？

我知道您可以通过中央管理员创建多个具有不同主机名的站点，但我想知道是否也可以实现上述目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T14:12:06.697

主机名与 Web 应用程序相关联。您可以使用备用访问映射为每个 Web 应用程序拥有多个主机，但它们都指向相同的内容（换句话说，所有较低级别的项目都保留到不同主机的相同相对 URL：[http://site1/subsite1/ page.aspx与](http://site1/subsite1/page.aspx)[http://site2/subsite1/page.aspx](http://site2/subsite1/page.aspx)的内容相同）。

您可以在 IIS 中使用一些重定向，并让传入的 URL 自动重定向到您的子站点的 URL。（有关更多信息，请参阅[在 IIS 中重定向网站](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/6b855a7a-0884-4508-ba95-079f38c77017.mspx?mfr=true "在 IIS 中重定向网站")）。请记住，因为这是一个 IIS 配置，如果您想将 IIS 元数据库包含在您的 DR 计划中，您需要备份它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T12:06:46.480

不，这只能在 Web 应用程序级别实现。但是，如果您在它前面放置一个 ISA 服务器（代理服务器），它可能是可能的。现在，我不是 Microsoft 的 ISA 服务器产品方面的专家——但就我所见，代理服务器是唯一可能的解决方案。例如，它还可以用于 SSL 启用 SharePoint Web 应用程序，而无需在 SharePoint 中进行配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-01T10:47:52.540

是的，可以使用虚 url 或 Sharepoint 术语主机命名的网站集。有关示例和命令语法，请参见[http://blogs.msdn.com/jimmiet/archive/2008/06/01/vanity-site-collection-urls.aspx](http://blogs.msdn.com/jimmiet/archive/2008/06/01/vanity-site-collection-urls.aspx)

它们存在问题，主要是 AAM 的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T20:55:05.073

自定义两个站点的顶部导航结构，您将能够做到这一点。如果您在现有 url 下添加新网站集（新网站不会自动获得“父”网站的导航），这与您必须做的没有太大区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-26T12:07:57.433

一种选择可能是使用 URL 重写，您可以添加一个 HTTP 模块以在退出时重写 URL。有很多关于这个主题的文章。

[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

我认为这是在 Sharepoint 中实现的一项相当大的工作，而且您还遇到了正则表达式的复杂性。

一个可用的产品（除了 IIS 7）是 Helicon Tech 的 ISAPI Rewrite，虽然我没有成功地让它与我们的 Sharepoint 安装一起工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-15T01:13:11.867

[IIRF](http://iirf.codeplex.com)是 IIS 的 URL 重写器，[ScottGu 在关于该主题的帖子中提到的](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)其中之一。它适用于 SharePoint 以及其他系统。它可以让您完全按照原始海报的要求进行操作。

# c# - 还原 DataGridView 中的更改？

> ID：490376
> 
> 赞同：0
> 
> 时间：2009-01-29T03:17:26.367
> 
> 标签：c#, winforms, linq-to-sql

我正在处理的 winforms 应用程序中有一个 DataGridView 控件。

DataSource 设置为我从我们的服务层获得的 IQueryable：

```
dataGridView1.DataSource = (from c in _customerService.GetAll() select c); 
```

在我正在处理的示例中，我有一个取消按钮，我希望使用它来还原更改。如果他们点击取消，我不会调用 DataContext.SubmitChanges() 并关闭表单。但是，当我重新打开表单时，DataGridView 中显示的数据反映了我在取消之前对前一个表单所做的更改。

当我关闭程序并再次运行它时，一切都很好。所以我相信我正在更改绑定到 DataGridView 的集合中的数据。

当然，对此有一个明显的解决方案，并且我对 winforms 的无知正在显示（这是我对任何 winforms 的第一次尝试。）

有关将更改还原到 datagridview 的任何建议？

谢谢您的帮助！

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T03:47:22.610

我相信您必须再次访问数据库才能检索数据。这意味着，如果您检测到用户决定取消他们的更改，您将不得不返回数据库并获取新的 IQueryable。由于 Linq to Sql 的工作方式，您只能枚举集合一次。因此，如果您只想恢复更改，则不能，因为它无法再次枚举它。

就个人而言，我可能不会使用 DataGridView 来允许用户直接进行更改。我一直觉得我在这种情况下不太能控制。我可能有某种输入表单，用户可以在其中输入新数据或编辑现有记录，而不是让他们能够直接编辑直接编辑数据库的网格。

# java - 如何使用带有 RowSet 的 LIKE 放置 IN 参数？

> ID：490378
> 
> 赞同：3
> 
> 时间：2009-01-29T03:18:39.517
> 
> 标签：java, postgresql, prepared-statement, rowset

我一直在努力让一个 IN 参数在 LIKE 语句中工作几个小时！我正在使用 CachedRowSet，据我所知，它应该遵循与 PreparedStatement 相同的规则。
这是基本查询：

```
CachedRowSet cache;
String sql = "SELECT x " +
                "FROM   Y " +
             "WHERE z LIKE '?__'" 

cache.setCommand(sql);
cache.setString(1, "someString"); 
```

someString 是一个已知的 id，但数据库（顺便说一下是 PostgreSQL）条目有一个未知的 2 字符后缀。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T03:51:40.260

引号内的参数占位符被忽略。它们被解释为文字“？”。如果使用参数，则必须将占位符放在 SQL 表达式中的引号之外。

但`LIKE`可以与任何字符串或任何产生字符串的*表达式进行比较。*例如：

```
SELECT x FROM y WHERE z LIKE (? || '__') 
```

现在您可以为参数提供“someString”，然后它将与常量字符串连接`'__'`。

# svn - 在 svn 存储库中添加符号链接后，我在该目录中不断收到错误消息

> ID：490379
> 
> 赞同：7
> 
> 时间：2009-01-29T03:18:40.187
> 
> 标签：svn, symlink

我创建了一个从 /www/dir2/ 到 /home/dir2/ 的符号链接，然后将其添加到存储库（ svn add /www/dir2/ ）现在，如果我进入该目录，并尝试在其中使用 svn 执行任何操作我收到一个“svn：警告：'。' 不是工作副本”错误。
如果我尝试添加子目录 (svn add /www/dir2/dir5 ) 我收到错误：
svn: 'dir2' is not a working copy
svn: Can't open file 'dir2/.svn/entries': No such文件或目录我尝试提交目录添加并且效果很好

从日志中：
更改的路径：
A /www/dir2
svn pl dir2/
'dir2' 上的属性：
svn:special

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-29T06:57:16.050

Subversion 不遵循符号链接。提交符号链接时，它会作为具有`svn:special`属性集的常规文件存储在数据库中。有关详细信息，请参阅[手册](http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.7)。

如果您想将该目录添加到存储库，您必须将其移动（而不是符号链接）到您的工作副本中，然后添加它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-10-28T06:01:59.610

另一种选择（通常只有当你有一个你希望 svn 遵循的符号链接目录时）是使用类似的东西：

mount --bind /real/path/to/dir /path/inside/working/dir

然后，您可以毫无问题地将该路径添加到 repo。

在大多数情况下，仅移动目录是一个更好的主意（它不会弄乱 fstabs，您不必一直重新挂载它等等）——但我想我会传递一个可以节省的提示您只是以提交的名义将目录翻倍。

# php - 我应该在什么时候在我的 php 脚本中支持 IPV6？

> ID：490386
> 
> 赞同：2
> 
> 时间：2009-01-29T03:28:32.197
> 
> 标签：php, upgrade, ipv6, transition

我有相当多的 PHP 代码，我想知道我应该从什么时候开始升级脚本以支持 IPV6。

我知道 IPV6 已经在“要做的事情清单”上很久很久了，但我真的从来没有看到过什么时候需要开始支持它的明确过渡路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-29T04:30:22.647

IPv6 在一些国家（例如日本、中国、韩国）和一些大型组织中得到了广泛采用（例如，我在 6 年前举办的一次 IPv6 研讨会建议所有出售给美国政府的网络设备都需要 IPv6 支持）。

我认为您的问题的简短回答是……“当您的目标受众中有很大一部分使用 IPv6 时”。

对于一个公共互联网站点，答案可能是“可能永远不会”。IPv6 旨在解决“我们的 IPv4 地址快用完了”的问题。由于大多数组织不再使用 IPv6，而是选择了[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)路线，从而大大延长了 IPv4 地址空间的寿命。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-29T04:43:01.343

我认为您的问题的简短回答是……“***在***您的目标受众中有很大一部分使用 IPv6 之前”。

如果您正在开发商业应用程序，“在您的竞争对手支持 IPv6 之前”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-31T03:50:50.473

一旦你开始看到一两个人使用 ipv6，我会建议切换，但为什么要等呢？ipv6 总有一天会完全取代 ipv4，所以为什么不帮助加快更换速度。

# svn - 每个 TortoiseSVN/Subversion 用户应该知道哪些电源命令？

> ID：490387
> 
> 赞同：13
> 
> 时间：2009-01-29T03:29:06.343
> 
> 标签：svn, tortoisesvn

我已经在 Subversion 中使用 TortoiseSVN 有一段时间了。它非常易于使用，而且大多数时候我只使用更新和提交功能......偶尔如果我需要追踪特定代码行的作者，我会使用 Blame 或 Show Log。

不过，最近，我犯了一个错误，将文件夹和文件从不同的分支直接复制到我正在工作的分支中......并且在检查它时发现它破坏了一些东西，因为它检查它来自我复制的分支他们从。那时我发现需要做的是使用 TortoiseSVN 提供的命令来复制和导出文件夹，以便它们的引用保持正确。

所以这让我想知道......还有哪些其他的电源命令对于使用 Subversion 的开发人员来说很重要，可以帮助您避免破坏或减少执行各种版本控制任务的工作量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-29T07:12:05.270

*   [最被遗忘的功能](http://tortoisesvn.net/most-forgotten-feature)（右拖动）
*   [反版本工作副本](http://tortoisesvn.net/unversion.html)
*   [扩展上下文菜单](http://tortoisesvn.net/extendedcontextmenu.html)
*   [修复移动/重命名](http://tortoisesvn.net/repairmoves.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-29T03:43:00.107

我多次发现[导出命令非常宝贵。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-cli-main.html#tsvn-cli-export)它为您提供您想要的任何目录的干净（无 .svn 目录）副本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-29T03:56:21.077

我觉得这些有用：

*   [回滚或撤消存储库中的修订](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-rollback.html)
*   [包含一个公共子项目（svn:externals）](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-howto-common-projects.html)
*   [给管理员的提示](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-admins.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T03:38:01.177

尽管此功能无法防止您破坏事物，但它绝对有助于追究[责任](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-blame.html)，谁破坏了它。

但是[这里](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-cli-main.html)有一些主要功能可以帮助您防止破坏事物。

最后，[合并和分支](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-merge.html)可能是最强大的命令之一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T05:09:11.587

用于根据扩展设置属性的自动道具。使用它来设置 mime 类型和需要锁定属性。

如果您提交二进制文件（例如 word 文档、jpeg 图像等），这非常有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-29T15:10:11.853

对于差异，我更喜欢 WinMerge，因此在资源管理器 [TortoiseSVN\Settings\External Programs\Diff Viewer] 的上下文菜单中，我选择外部选项，其值为：

```
C:\Program Files\WinMerge\WinMergeU.exe -e -x -ub -dl %bname -dr %yname %base %mine 
```

但是，当您单击上下文菜单中的 Diff 时，您仍然可以通过按住 Shift 键来使用 TortoiseMerge。按住 shift 键会导致 TortoiseSVN 使用 TortoiseMerge 而不是配置的差异或合并工具。

我也喜欢[CommitMonitor](http://tools.tortoisesvn.net/CommitMonitor)，它将向您显示存储库中的新活动。

[最后，在tortoisesvn.net](http://tortoisesvn.net/)上有很好的提示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-29T14:59:06.243

除了已经提到的东西，我发现使用 TortoiseSNV 的 Diff 工具非常有用。当我进行提交时，我通常会双击每个更改的文件以确保更改是我认为的（这也有助于我编写提交注释）。有几次我发现有问题，不得不取消提交。

在尝试追踪错误时，该工具非常适合尝试隔离哪些代码修改可能导致了特定问题。请记住，您可以从很多地方进行比较（Windows Explorer、Commit Dlg、Repo-browser、Revision Graph 等）。

# java - JSP模板继承

> ID：490390
> 
> 赞同：33
> 
> 时间：2009-01-29T03:29:47.043
> 
> 标签：java, django, jsp, templates

来自 Django 的背景，我经常使用“模板继承”，其中多个模板从一个共同的基础继承。在 JSP 中是否有一种简单的方法可以做到这一点？如果没有，是否有替代 JSP 的方法（除了 Jython 上的 Django 之外：）

## 基本模板

```
<html>
  <body>
    {% block content %}
    {% endblock %}
  </body>
<html> 
```

## 基本内容

```
{% extends "base template" %}
{% block content %}
<h1>{{ content.title }} <-- Fills in a variable</h1>
{{ content.body }} <-- Fills in another variable
{% endblock %} 
```

将呈现如下（假设 conten.title 为“Insert Title Here”，content.body 为“Insert Body Here”）

```
<html>
  <body>
    <h1>Insert title Here <-- Fills in a variable</h1>
    Insert Body Here <-- Fills in another variable
  </body>
<html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-08-04T21:12:26.880

您可以使用 JSP 标记文件执行类似的操作。创建您自己`page.tag`的包含页面结构。然后使用`<jsp:body/>`标签插入内容。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2010-07-21T04:15:26.183

您可以使用快速框架进行 JSP 模板继承

**基础.jsp**

```
%@ taglib uri="http://www.rapid-framework.org.cn/rapid" prefix="rapid" %>  
<html>  
    <head>
        <rapid:block name="head">
            base_head_content
        </rapid:block>
    </head>  
    <body>  
        <br />  
        <rapid:block name="content">
            base_body_content
        </rapid:block>  
    </body>  
</html> 
```

**子.jsp**

```
<%@ taglib uri="http://www.rapid-framework.org.cn/rapid" prefix="rapid" %>  
<rapid:override name="content">  
     <div>
        <h2>Entry one</h2>
        <p>This is my first entry.</p>
    </div>
</rapid:override>  

<!-- extends from base.jsp or <jsp:include page="base.jsp"> -->  
<%@ include file="base.jsp" %> 
```

**输出**

```
<html>
<head>  
 base_head_content
</head>  
<body>  
    <br />  
    <div>
        <h2>Entry one</h2>
        <p>This is my first entry.</p>
    </div>
</body>  
</html> 
```

**源代码**

[http://rapid-framework.googlecode.com/svn/trunk/rapid-framework/src/rapid_framework_common/cn/org/rapid_framework/web/tags/](http://rapid-framework.googlecode.com/svn/trunk/rapid-framework/src/rapid_framework_common/cn/org/rapid_framework/web/tags/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-29T03:34:50.327

您可能需要查看[Tiles](http://tiles.apache.org/index.html)。

编辑：在有关瓷砖的相关说明中，您可能想查看[Struts](http://struts.apache.org/)。这不是你要找的东西（那是瓷砖），但它对来自 Django 的人很有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-29T03:52:30.493

其他值得探索的选项包括[Sitemesh](http://www.opensymphony.com/sitemesh/)，它建立在页面装饰器的思想之上，以及[Java Server Faces](http://java.sun.com/javaee/javaserverfaces/) (JSF)，它采用基于 Web 的 UI 组件。当我们谈论在 Java 平台上使用 Web 框架进行快速开发时，我鼓励您查看[Grails](http://grails.org/)。它与 Django 具有相同的使命；即，基于约定优于配置的快速 Web 应用程序开发。

希望这不是对一篇文章的太多建议。:o)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-11-17T22:02:38.953

我最喜欢的 Java Web 前端技术是 Facelets。它支持我见过的最像 Django 的模板。它不像 Django 那样干净，但是您可以获得相同的继承优势。

**而不是 Django 的：**

极好的：

```
{% block content %}{% endblock %} 
```

子：

```
{% block content %}inheriting template's content here{% endblock %} 
```

**Facelet 的语法是这样的：**

极好的：

```
<ui:insert name="content"></ui:insert> 
```

子：

```
<ui:define name="content">inheriting template's content here</ui:define> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T21:56:12.617

[Rythm 模板引擎](http://rythmengine.com)为模板继承实现了一种优雅的方法。

因此，假设您的布局模板（父模板）称为`main.html`：

```
<h1>@get("title", "default main page")</h1>
<div id="left-panel">@render("leftPanel")<div>
<div id="right-panel">@render("rightPanel")</div>
<div id="main-content">@render()</div>
<div id="footer">
@render("footer"){
   @**
    * the content here is supplied if the child template failed 
    * to provide it's own footer implementation
    *@
   <div class="footer">copyright 2012 ...</div>
}
</div> 
```

这是您的目标模板：

```
@extends(main)
@set(title: "My Cool Page")
@section("leftPanel") {
<ul class="menu">
...
</ul>
}

@section("rightPanel") {
<div class="news">
...
</div>
}

@*** note no "footer" section supplied so the default content will be used **@

@*** the rest is for the main content **@
... 
```

[在http://rythmengine.com/demo/testdefaultlayoutcontent](http://rythmengine.com/demo/testdefaultlayoutcontent)查看真实的演示

可以在[http://www.playframework.org/modules/rythm](http://www.playframework.org/modules/rythm)找到一个全面的文档。虽然它是针对 Play!Framework 的，但大部分内容也适用于没有 Play!Framework 的纯节奏引擎。

# asp.net-mvc - 我应该如何将会话状态集成到 ASP.NET MVC 应用程序中？

> ID：490391
> 
> 赞同：7
> 
> 时间：2009-01-29T03:30:53.703
> 
> 标签：asp.net-mvc, session, master-pages

我正在寻找有关如何在 ASP.NET MVC 应用程序中使用 Session 的想法？尤其是在使用母版页并试图在不绕过控制器的情况下将数据获取到母版页时。这个问题一开始是我问了很多小问题，但后来我设法将它塑造成一个我还没有实施但有点可行的解决方案。任何反馈将不胜感激。

* * *

**我提出的解决方案又名“除非有人说停止，否则我将要实施的方案！”**

我的模型类继承自 ModelBase——它包含母版页所需的信息（每页只有一个视图），用于显示在标头或页脚中的某些内容，以及基于谁登录的配置驱动设置。

我最好的解决方案如下 - 此处显示“产品页面”：

> *假设*：我在某些时候已经将某些数据卡在会话中 - 例如，可能是`partnerId`通过网关页面进入的，或者是`currentLoggedInUserEmail`属性或完全爆炸的对象。
> 
> 我有一个`ModelBase`类，每个模型都从中继承 - 例如`ProductModel`继承
> 
> 我有一个`MySiteControllerBase`类（从 Controller 继承） - 它是`ProductController`.
> 
> 在我的操作方法中，`ProductController`我使用`'new ProductModel()'`. 这个模型类本身对会话或如何填充一无所知`ModelBase`。它本质上甚至不知道`ModelBase`——它只是继承自它。我的链式构造函数什么都不做（因为我不想传递它`Session`）。
> 
> 我覆盖`View(...)`了`MySiteControllerBase`所有采用模型参数的重载。我检查该参数是否属于类型`ModelBase`，如果是，我填充属性，例如`partnerid`和`currentLoggedInuserEmail`。幸运的是，因为我在一个继承自我`Controller`可以直接访问的类中，`Session`所以我可以直接将它们从那里拉出来。

此方法意味着`ModelBase`仅由我自动填充on 的属性`'return View(model)'`。但是，如果模型`ProductModel`需要访问`ModelBase`. 它将为空，因为它尚未填充。

这个问题可以通过传递`Session`给`new ProductModel(session)`which 来解决，然后将它传递给构造函数链到`new ModelBase(session)`. 我真的*不*喜欢那个解决方案，因为我喜欢将模型视为一个非常愚蠢的数据结构，根本不应该知道任何外部数据结构。另一种解决方案可能是直接使用它，如果我发现`ProductController`需要消耗其中定义的任何内容`ModelBase`，我只需创建一个方法`MySiteControllerBase.UpdateModelBase(productModel, session)`来显式填充它`ProductController`。我希望那很清楚！

想到的其他问题是：

*   单元测试呢？MVC 中的会话状态是否有任何抽象，或者我应该自己构建？我在源代码中搜索了“会话”，但没有任何结果！
*   会话跟踪如何与 MVC 中的 /REST/FUL/URLS 一起工作？我需要知道关于 cookie 关闭的任何问题吗？
*   我应该以不同于我传统方式的方式来考虑会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T04:28:24.803

至于单元测试，您将需要一个假 HttpContext 对象（从 HttpContextBase 扩展）和一个假会话对象（从 SessionStateBase 扩展）。或者你可以做我们所做的，并使用 Phil Haacks [HttpSimulator](http://haacked.com/archive/2007/06/19/unit-tests-web-code-without-a-web-server-using-httpsimulator.aspx)。这不是一个完美的解决方案，但是当您使用 asp 做任何事情时，有很多紧密耦合的对象会连接在一起，以至于您永远不会真正发现任何特别优雅的东西。我们发现我们经常碰到它，因此抓住这些类并将它们放在帮助库中是值得的。

Cookie 是按域工作的，所以这方面真的没有任何问题。您始终可以将会话配置为进程内且无 cookie。

一般来说，在会话中保留的内容非常稀疏。但这也适用于 Webforms。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T15:21:17.650

虽然原则上在 ASP.NET MVC 应用程序中使用 Session 并没有什么问题（好吧，至少没有比在其他 ASP.NET 应用程序中使用它更糟糕的了......），但我倾向于认为它应该是最后的手段，当其他事情不起作用时。

尽管您的问题通常写得非常好，但您并没有详细说明您建议在 Session 中存储的内容。我在你的问题中找到的两个例子是：

*   当前用户电子邮件
*   合作伙伴ID

用户的电子邮件地址已经可以通过表单身份验证获得，如果您正在使用它，并且可以添加到其他尚不支持它的 ASP.NET 成员资格提供程序。目前尚不清楚 partnerid 实际上是什么，但我怀疑 Session 是唯一可能存储它的地方。

另一方面，您完全有可能需要存储您没有告诉我们的内容，这些内容实际上只适合会话。

因此，在您在这条道路上走得太远之前，请确保其他解决方案尚不适用于您需要存储的数据。

# ruby - 有没有办法向 munin 查询系统性能？

> ID：490396
> 
> 赞同：0
> 
> 时间：2009-01-29T03:35:10.387
> 
> 标签：ruby, monitoring

基本上，我只想运行一个脚本来定期查询 munin 的某些统计信息，而不是获取警报或检查图形页面。某种用于获取性能信息的 ruby​​ 库会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-30T02:58:42.993

只需阅读 munin 使用 rrdtool 生成的 RRD 文件——它将它们解析为 XML。

# c# - C# 字典应用程序：通过选择键来应用值

> ID：490397
> 
> 赞同：0
> 
> 时间：2009-01-29T03:35:25.583
> 
> 标签：c#, dictionary, combobox

我有一本字典，用来定义铜缆的额定值。我想使用这些值来计算满足特定连接等级需要多少根电缆。连接的大小、电缆类型和系统类型由名为 cb_amperage、cb_cable_size 和 cb_system_type 的两个 ComboBox 选择。等式运行后找到的答案将显示在名为 tb6_cable_qty 的文本框中。我欢迎任何和所有的意见和建议。预先感谢您的帮助。

数学很简单：

```
decimal x, y, z;
x = decimal.Parse(cb_amperage.);
y = decimal.Parse();//<---- this value must come from the dictionary below
a = decimal.Parse();//<---- this value must also come from a dictionary below
z = (x / y) * a
tb6_cable_qty.Text = Math.Round(z,2).ToString();

void Cb_amperageSelectedIndexChanged(object sender, EventArgs e)    
    { 
        if (!String.!IsNullOrEmpty(cb_amperage) & !String.IsNullOrEmpty(cb_cable_size))
        //not sure if the above is right but I think it coveys the idea
       {
        //function based on the values in the dictionary below
       }

        //Cable Dictionary 1 used for cable quantity calculation
        Dictionary<string, int> cable_dictionary_1 = new Dictionary<string, int>();

        cable_dictionary_1.Add ("#1", 130);
        cable_dictionary_1.Add ("1/0", 150);
        cable_dictionary_1.Add ("2/0", 175);
        cable_dictionary_1.Add ("3/0", 200);
        cable_dictionary_1.Add ("4/0", 230);
        cable_dictionary_1.Add ("250", 255);
        cable_dictionary_1.Add ("300", 285);
        cable_dictionary_1.Add ("400", 355);
        cable_dictionary_1.Add ("500", 380);
        cable_dictionary_1.Add ("600", 720);
        cable_dictionary_1.Add ("750", 475);

        //System Type Dictionary used for cable quantity calculation
        Dictionary<string, int> system_type_dictionary = new Dictionary<string, int>();

        system_type_dictionary.Add ("3P 3W", 3);
        system_type_dictionary.Add ("3P 4W", 4); 
```

编辑1：mmr；请看下面的代码。我有一种感觉，我错过了一些如果我更有经验的话我会知道的东西。以下是我对您建议的解决方案第一部分的实现。我得到一个错误。我认为这是因为这两个项目，字符串和字典不知道它们应该被链接。这是错误；*类、结构或接口成员声明 (CS1519) 中的标记 ',' 无效。看看你能看到什么。再次感谢。

```
//The following strings are used in the cable quantity calculation
        private const string cblsize1 = "#1";
        private const string cblsize2 = "1/0";
        private const string cblsize3 = "2/0";
        private const string cblsize4 = "3/0";

//Cable Dictionary 1 used for cable quantity calculation
        Dictionary<string, int> cable_dictionary_1 = new Dictionary<string, int>();

        cable_dictionary.Add(cblsize1, 130);//#1 Cable
        cable_dictionary.Add(cblsize2, 150);//1/0 Cable
        cable_dictionary.Add(cblsize3, 175);//2/0 Cable
        cable_dictionary.Add(cblsize4, 200);//3/0 Cable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T03:39:07.180

我不确定你的问题是什么？听起来你已经涵盖了所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T04:09:54.997

编辑：等等，现在我得到了你的问题！

这是我要做的：

首先，对于每个键，将它们变成一个字符串列表，所以：

```
private const string mFirst = "#1"; 
```

然后，添加到字典中：

```
mDictionary.Add(mFirst, 130); //etc... 
```

然后，对于每个组合框，添加你的字符串

```
comboBox1.Add(mFirst);
comboBox1.Add(mSecond); //etc... 
```

然后，将一个事件添加到组合框中选择的索引更改：

```
comboBox1_SelectedIndexChanged(SomeEventStuff I Forget) 
```

当那里的值发生变化时，更新您的 y 值。对 comboBox2 执行相同操作，并更新 z 的值。更新任一值后，只需同时更新结果。

编辑2：

做数学，我有一个看起来像这样的函数：

```
float CopperCalc(float inX, float inY, float inA){
     if (inY != 0){//avoid the division by zero
         return (inX / inY) * inA;
     } else {
         return 0; //just assume it's zero here.
     }//I'm not Jon Skeet, I can't divide by zero
} 
```

然后，在您的 selectedindexchanged 处理程序中调用该函数，并使用它来更新您的文本框：

```
 //put your mX, mY, and mA as member values of your class, and then
 //they get updated.  For instance:
 void comboBox1_SelectedIndexChanged(Events){
     mX = mDictionary[comboBox1.SelectedItem];
     textBox1.Text = CopperCalc(mX, mY, mA).ToString("f1");
 } 
```

并为每个组合框放置相同的功能，以便组合框更新，然后文本框也会更新。仅当您想尝试自动确定应该自动组合的电线时，这些东西才有意义：

这听起来像是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的变体——对吗？您需要找出一些最小的铜线组合以满足连接要求吗？是否有一些最小或最大或其他约束？为什么不直接扔掉大量的铜来达到最低要求呢？

这是一种非常啰嗦的说法，我认为我需要更多信息才能理解问题；但是，如果背包问题是一个合理的类比，那么就有解决方案，但它们是 NP 完全实现的。也就是说，它们不会“快速”运行，但如果你只有 12 个线规（或其他什么），你的速度应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T04:14:13.873

解决了！！！！下面是代码。感谢 MSDN C# 论坛的 Rudedog2！

```
partial class MainForm
{
    double x, y, z;     

    List<string> cable_size1;
    List<string> system_type_list;
    List<string> amperage;

    Dictionary<string, double> cable_dictionary_1;
    Dictionary<string, double> system_type;
    Dictionary<string, double> amperage_dictionary;

private void MainFormLoad(object sender, EventArgs e)
    {
            //Each of the following lists populate the ComboBoxes
            //to be selected on the main form.
            amperage = new List<string>();
            cable_size1 = new List<string>();
            system_type_list = new List<string>();          

            cable_dictionary_1 = new Dictionary<string, double>();
            system_type = new Dictionary<string, double>();
            amperage_dictionary = new Dictionary<string, double>();

            //
            InitializeCurrentLoadCB();
            InitializeCableSizeCB();
            InitializeSystemTypeCB();

            //---------------Dictionaries---------------------------------------------------------
            InitializeSystemTypeLookup();
            InitializeCableLookup();
            InitializeAmperageLookup();
    }
    private void InitializeCurrentLoadCB()
    {
            //Amperage List, No Exclusions-----------------------------------------------------------
            amperage = new List<string>();
            amperage.Add("Please Select Amperage");
            amperage.Add("400");
            amperage.Add("800");
            amperage.Add("1000");
            amperage.Add("1200");
            amperage.Add("1600");
            amperage.Add("2000");
            amperage.Add("2500");
            amperage.Add("3000");
            amperage.Add("3200");
            amperage.Add("4000");
            amperage.Add("5000");
            amperage.Add("6000");

            cb_test_1.DataSource = amperage;
            cb_test_1.SelectedIndex = 0;
            cb_test_1.DropDownStyle = ComboBoxStyle.DropDownList;
    }
    private void InitializeCableSizeCB()
    {
            //Cable List, No Exclusions --------------------------------------------------------------
            cable_size1 = new List<string>();
            cable_size1.Add("Please Select Cable Size");
            cable_size1.Add ("#1");
            cable_size1.Add ("1/0");
            cable_size1.Add ("2/0");
            cable_size1.Add ("3/0");
            cable_size1.Add ("4/0");
            cable_size1.Add ("250");
            cable_size1.Add ("300");
            cable_size1.Add ("400");
            cable_size1.Add ("500");
            cable_size1.Add ("600");
            cable_size1.Add ("700");
            cable_size1.Add ("750");

            cb_test_2.DataSource = cable_size1;
            cb_test_2.SelectedIndex = 0;
            cb_test_2.DropDownStyle = ComboBoxStyle.DropDownList;
            //Initial DataBind for cable size ComboBox
    }
    private void InitializeSystemTypeCB()
    {
            //System Type List  
            system_type_list = new List<string>();
            system_type_list.Add("Select System Type");
            system_type_list.Add("3 Phase 3 Wire");
            system_type_list.Add("3 Phase 4 Wire");

            cb_test_3.DataSource = system_type_list;
            cb_test_3.SelectedIndex = 0;
            cb_test_3.DropDownStyle = ComboBoxStyle.DropDownList;
            //Initial DataBind for cb_system type ComboBox              
    }

    private void Button1Click(object sender, System.EventArgs e)
    {   

        if (!String.IsNullOrEmpty(cb_test_1.Text) &&
           (!String.IsNullOrEmpty(cb_test_2.Text) && 
           (!String.IsNullOrEmpty(cb_test_3.Text))))
            {   
                double a;
                if (cb_test_1.SelectedIndex != 0)
                    {
                        x = amperage_dictionary[amperage[cb_test_1.SelectedIndex]];                 
                    }                                                       

                if (cb_test_2.SelectedIndex != 0)
                    {
                        y = cable_dictionary_1[cable_size1[cb_test_2.SelectedIndex]];                   
                    }   

                if (cb_test_3.SelectedIndex != 0)
                    {
                        z = system_type[system_type_list[cb_test_3.SelectedIndex]];
                    }           

                a = ((x / y)*z);
                this.tb_1.Text = Math.Round(a,2).ToString();

            }

    }
    private void InitializeSystemTypeLookup()
    {
        //System Type Dictionary
        this.system_type = new Dictionary<string, double>();
        this.system_type.Add(this.system_type_list[0], 0);
        this.system_type.Add(this.system_type_list[1], 3);
        this.system_type.Add(this.system_type_list[2], 4);
    }
    private void InitializeCableLookup()
    {
        //Cable Dictionary 1 used for cable quantity calculation
        this.cable_dictionary_1 = new Dictionary<string, double>();
        this.cable_dictionary_1.Add (this.cable_size1[0], 0);
        this.cable_dictionary_1.Add (this.cable_size1[1], 130);
        this.cable_dictionary_1.Add (this.cable_size1[2], 150);
        this.cable_dictionary_1.Add (this.cable_size1[3], 175);
        this.cable_dictionary_1.Add (this.cable_size1[4], 200);
        this.cable_dictionary_1.Add (this.cable_size1[5], 230);
        this.cable_dictionary_1.Add (this.cable_size1[6], 255);
        this.cable_dictionary_1.Add (this.cable_size1[7], 285);
        this.cable_dictionary_1.Add (this.cable_size1[8], 355);
        this.cable_dictionary_1.Add (this.cable_size1[9], 380);
        this.cable_dictionary_1.Add (this.cable_size1[10], 720);
        this.cable_dictionary_1.Add (this.cable_size1[11], 475);
    }
    private void InitializeAmperageLookup()
    {
        //Amperage Dictionary   
        this.amperage_dictionary = new Dictionary<string, double>();
        this.amperage_dictionary.Add(this.amperage[0], 0);
        this.amperage_dictionary.Add(this.amperage[1], 400);
        this.amperage_dictionary.Add(this.amperage[2], 800);
        this.amperage_dictionary.Add(this.amperage[3], 1000);
        this.amperage_dictionary.Add(this.amperage[4], 1200);
        this.amperage_dictionary.Add(this.amperage[5], 1600);
        this.amperage_dictionary.Add(this.amperage[6], 2000);
        this.amperage_dictionary.Add(this.amperage[7], 2500);
        this.amperage_dictionary.Add(this.amperage[8], 3000);
        this.amperage_dictionary.Add(this.amperage[9], 3200);
        this.amperage_dictionary.Add(this.amperage[10], 4000);
        this.amperage_dictionary.Add(this.amperage[11], 5000);
        this.amperage_dictionary.Add(this.amperage[12], 6000);      
    }

} 
```

# c++ - C++中有字符串吗？

> ID：490403
> 
> 赞同：3
> 
> 时间：2009-01-29T03:38:07.793
> 
> 标签：c++, string

我一直在用一些 80 年代的学校书籍来学习 C++，但我不确定它们是 C++ 中的字符串还是只是很长的 char 类型的数组。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-29T03:40:59.627

C++中有一个[字符串](http://en.cppreference.com/w/cpp/string/basic_string)类。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-29T03:40:25.633

查看标准库。

在 STL 中，您可以找到 std::string 类，以及许多其他有用的类。

基本文档可以在这里找到：

[http://www.sgi.com/tech/stl/](http://www.sgi.com/tech/stl/)

字符串文档可以在这里找到：

[http://www.sgi.com/tech/stl/basic_string.html](http://www.sgi.com/tech/stl/basic_string.html)

这些 stl 字符串的美妙之处在于它们会自行删除；所以一旦你声明了它们，你就可以放开它们，它们会处理自己的记忆。其他 stl 类也是如此（当然，如果您声明一个指针向量，该向量将被删除，但指针指向的内存也必须处理；它不是万能的，但它工作得很好如果您牢记这一限制）。

最后，我发现这本书是学习如何在 STL 中思考的好方法：

[有效的 STL](https://rads.stackoverflow.com/amzn/click/com/0201749629)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-29T03:43:48.543

是的，C++ 中有字符串，有人已经完成了所有工作并为您编写了代码。它们不在实际语言中，而是在称为标准模板库的库中，它实际上总是与 C++ 编译器（您可能已经拥有）一起提供。在内部，它们用 char 数组表示，但它以一种特殊的方式完成，所以如果字符串变大，它会丢弃小 char 数组并创建一个新的更大的数组。

你真的应该买一本更新的书！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-29T03:44:37.623

正如@mmr 指出的那样，C++ 有一个 std::string 。

除此之外，几乎每个类库/框架/工具包都提供（至少）它自己的一个。

除此之外，几乎每个您将要进行更改的大型 c++ 项目都会有一个字符串库。

所有这些都是必需的，因为没有一种尺寸适合所有人。有些人想要延迟复制数据，有些人想要在中间快速插入等，有些人想要 UTF-8 等。

很可能，如果您的项目进行了任何严重的字符串操作，您最终会自己编写一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T03:59:16.593

在 C++ 中；以 null 结尾的 char 数组是一个字符串。

话虽如此，就像许多其他人指出的那样，各种库也有一个字符串类来处理常见的字符串操作功能。

# language-agnostic - 最喜欢的（聪明的）防御性编程最佳实践

> ID：490420
> 
> 赞同：148
> 
> 时间：2009-01-29T03:48:51.280
> 
> 标签：language-agnostic

如果你必须选择你**最喜欢**的（聪明的）防御性编码技术，它们会是什么？虽然我目前的语言是 Java 和 Objective-C（具有 C++ 背景），但请随时用任何语言回答。这里的重点将放在*聪明*的防守技术上，而不是我们这里 70% 以上的人已经知道的那些。所以现在是时候深入挖掘你的技巧了。

换句话说，试着想想这个**无趣**的例子：

*   `if(5 == x)` **而不是** `if(x == 5)`: 避免意外分配

以下是一些**有趣**的最佳防御性编程实践的示例（特定于语言的示例在 Java 中）：

**- 锁定你的变量，直到你知道你需要改变它们**

也就是说，您可以声明*所有*变量`final`，直到您知道需要更改它，此时您可以删除`final`. 一个普遍不为人知的事实是，这也适用于方法参数：

```
public void foo(final int arg) { /* Stuff Here */ } 
```

**- 当有不好的事情发生时，留下证据的痕迹**

当您遇到异常时，您可以做很多事情：显然记录它并执行一些清理将是一些事情。但是您也可以留下证据（例如，将变量设置为“无法加载文件”或 99999 等标记值在调试器中很有用，以防您碰巧通过异常`catch`块）。

**- 说到一致性：魔鬼在细节中**

与您正在使用的其他库保持一致。例如，在 Java 中，如果您正在创建一个提取一系列值的方法，则使下限*inclusive*和上限*互斥*。这将使其与`String.substring(start, end)`以相同方式运行的方法一致。您会发现 Sun JDK 中的所有这些类型的方法都以这种方式运行，因为它进行各种操作，包括与数组一致的元素迭代，其中索引从零（*包括*）到数组的长度（*不包括*）。

那么你最喜欢的防守方式是什么？

**更新：如果您还没有，请随时加入。在我选择*官方*答案之前，我有机会获得更多回复。**

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-01-29T04:47:02.600

在 c++ 中，我曾经喜欢重新定义 new 以便它提供一些额外的内存来捕获栅栏发布错误。

目前，我更喜欢避免防御性编程，而倾向于[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)。如果你在外部快速地发现错误，你就不需要用防御策略来混淆你的代码，你的代码是[DRY](http://c2.com/cgi/wiki?DontRepeatYourself) -er，你最终会遇到更少的错误，你必须防御。

[正如维基知识所写](http://wikiknowledge.net/wiki/VB_Classic/Effective_Programming#Avoid_Defensive_Programming.2C_Fail_Fast_Instead)：

> **避免防御性编程，而是快速失败。**
> 
> 我所说的防御性编程是指编写代码以尝试补偿数据中的某些故障的习惯，编写代码的习惯是假定调用者可能提供不符合调用者和子例程之间约定的数据，并且子例程必须以某种方式应对用它。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2009-01-29T04:15:21.290

**SQL**

当我必须删除数据时，我写

```
select *    
--delete    
From mytable    
Where ... 
```

当我运行它时，我会知道我是否忘记或搞砸了 where 子句。我有安全感。如果一切正常，我会突出显示“--”注释标记之后的所有内容，然后运行它。

编辑：如果我要删除大量数据，我将使用 count(*) 而不是 *

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2009-01-29T04:27:19.300

在应用程序启动时分配合理的内存块——我认为 Steve McConnell在 Code Complete中将此称为**内存降落伞。**

这可以在出现严重问题并且您需要终止的情况下使用。

预先分配此内存可为您提供安全网，因为您可以释放它，然后使用可用内存执行以下操作：

*   保存所有持久数据
*   关闭所有适当的文件
*   将错误消息写入日志文件
*   向用户显示有意义的错误

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2009-01-29T07:05:36.953

在每个没有默认情况的 switch 语句中，我添加了一个以错误消息中止程序的情况。

```
#define INVALID_SWITCH_VALUE 0

switch (x) {
case 1:
  // ...
  break;
case 2:
  // ...
  break;
case 3:
  // ...
  break;
default:
  assert(INVALID_SWITCH_VALUE);
} 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2009-01-29T05:03:20.507

当您处理枚举 (C#) 的各种状态时：

```
enum AccountType
{
    Savings,
    Checking,
    MoneyMarket
} 
```

然后，在一些例行程序中...

```
switch (accountType)
{
    case AccountType.Checking:
        // do something

    case AccountType.Savings:
        // do something else

    case AccountType.MoneyMarket:
        // do some other thing

    default:
-->     Debug.Fail("Invalid account type.");
} 
```

在某个时候，我将向此枚举添加另一种帐户类型。当我这样做时，我会忘记修复这个 switch 语句。因此，`Debug.Fail`可怕的崩溃（在调试模式下）引起了我对这一事实的注意。当我添加 时`case AccountType.MyNewAccountType:`，可怕的崩溃停止了......直到我添加了另一种帐户类型并忘记在此处更新案例。

（是的，多态在这里可能更好，但这只是我脑海中的一个例子。）

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2009-01-30T08:58:25.377

当使用字符串打印出错误消息（尤其是取决于用户输入的错误消息）时，我总是使用单引号`''`。例如：

```
FILE *fp = fopen(filename, "r");
if(fp == NULL) {
    fprintf(stderr, "ERROR: Could not open file %s\n", filename);
    return false;
} 
```

周围没有引号`%s`真的很糟糕，因为说文件名是一个空字符串或只是空格或其他东西。打印出来的消息当然是：

```
ERROR: Could not open file 
```

所以，总是更好的做法：

```
fprintf(stderr, "ERROR: Could not open file '%s'\n", filename); 
```

然后至少用户会看到：

```
ERROR: Could not open file '' 
```

我发现这对最终用户提交的错误报告的质量有很大的影响。如果有这样一个看起来很有趣的错误消息，而不是听起来很一般的错误消息，那么他们更有可能复制/粘贴它，而不是仅仅写“它不会打开我的文件”。

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2009-01-29T23:35:39.663

**SQL 安全**

在编写任何将修改数据的 SQL 之前，我将整个事情包装在一个回滚事务中：

```
BEGIN TRANSACTION
-- LOTS OF SCARY SQL HERE LIKE
-- DELETE FROM ORDER INNER JOIN SUBSCRIBER ON ORDER.SUBSCRIBER_ID = SUBSCRIBER.ID
ROLLBACK TRANSACTION 
```

这可以防止您永久执行错误的删除/更新。而且，您可以执行整个事情并验证合理的记录计数或`SELECT`在 SQL 和 SQL 之间添加语句，`ROLLBACK TRANSACTION`以确保一切看起来正确。

当您完全确定它符合您的预期时，将其更改`ROLLBACK`为`COMMIT`并真正运行。

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2009-01-29T06:13:31.723

对于所有语言：

**将变量的范围缩小**到尽可能少的要求。避开刚刚提供以将它们带入下一条语句的**变量。**不存在的变量是你不需要理解的变量，你不能为此负责。出于同样的原因，尽可能使用 Lambda。

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2009-01-29T07:24:45.947

如有疑问，请轰炸应用程序！

检查*每个*方法开头的*每个*参数（无论是自己显式编码，还是使用基于契约的编程在这里都无关紧要），如果代码的任何前提条件是，则使用正确的异常和/或有意义的错误消息进行轰炸没见过。

*我们在编写代码时*都知道这些隐含的先决条件，但是如果没有明确检查它们，我们就会在以后出现问题时为自己创建迷宫，并且数十个方法调用的堆栈将症状的发生与实际位置分开不满足先决条件的地方（=问题/错误实际所在的地方）。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2009-01-29T07:53:06.000

在 Java 中，尤其是在集合中，使用 API，因此如果您的方法返回类型 List（例如），请尝试以下操作：

```
public List<T> getList() {
    return Collections.unmodifiableList(list);
} 
```

不要让任何你不需要的东西逃离你的班级！

* * *

## 回答 #11

> 赞同：17
> 
> 时间：2009-01-29T04:49:54.590

在 Perl 中，每个人都这样做

```
use warnings; 
```

我喜欢

```
use warnings FATAL => 'all'; 
```

这会导致代码因任何编译器/运行时警告而死。这在捕获未初始化的字符串时最有用。

```
use warnings FATAL => 'all';
...
my $string = getStringVal(); # something bad happens;  returns 'undef'
print $string . "\n";        # code dies here 
```

* * *

## 回答 #12

> 赞同：16
> 
> 时间：2009-01-29T05:40:12.193

C＃：

```
string myString = null;

if (myString.Equals("someValue")) // NullReferenceException...
{

}

if ("someValue".Equals(myString)) // Just false...
{

} 
```

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2009-01-29T08:49:28.617

在 c# 中检查 string.IsNullOrEmpty，然后对字符串进行任何操作，如长度、indexOf、mid 等

```
public void SomeMethod(string myString)
{
   if(!string.IsNullOrEmpty(myString)) // same as myString != null && myString != string.Empty
   {                                   // Also implies that myString.Length == 0
     //Do something with string
   }
} 
```

**[编辑]**
现在我也可以在 .NET 4.0 中执行以下操作，另外检查该值是否只是空格

```
string.IsNullOrWhiteSpace(myString) 
```

* * *

## 回答 #14

> 赞同：14
> 
> 时间：2009-01-29T06:38:09.940

在 Java 和 C# 中，给**每个**线程一个有意义的名称。这包括线程池线程。它使堆栈转储更有意义。给线程池线程起一个有意义的名字需要更多的努力，但是如果一个线程池在一个长时间运行的应用程序中出现问题，我可能会导致堆栈转储发生（你知道[SendSignal.exe](http://www.latenighthacking.com/projects/2003/sendSignal/)，对吗？ )，获取日志，无需中断正在运行的系统，我就可以知道哪些线程是……随便什么。死锁、泄漏、增长，无论是什么问题。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2009-01-29T08:57:15.963

在 VB.NET 中，默认情况下为整个 Visual Studio 开启 Option Explicit 和 Option Strict。

* * *

## 回答 #16

> 赞同：10
> 
> 时间：2009-01-29T04:09:13.157

使用 Java，使用 assert 关键字会很方便，即使您在关闭断言的情况下运行生产代码：

```
private Object someHelperFunction(Object param)
{
    assert param != null : "Param must be set by the client";

    return blahBlah(param);
} 
```

即使关闭了断言，至少代码记录了 param 应该设置在某个地方的事实。请注意，这是一个私有帮助函数，而不是公共 API 的成员。此方法只能由您调用，因此可以对如何使用它进行某些假设。对于公共方法，最好为无效输入抛出一个真正的异常。

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2009-01-29T05:02:15.797

C++

```
#define SAFE_DELETE(pPtr)   { delete pPtr; pPtr = NULL; }
#define SAFE_DELETE_ARRAY(pPtr) { delete [] pPtr; pPtr = NULL } 
```

*然后用SAFE_DELETE(pPtr)*和*SAFE_DELETE_ARRAY(pPtr)*替换所有“*删除 pPtr* ”和“*删除 [] pPtr* ”调用

 **现在如果你在删除指针'pPtr'后错误地使用它，你会得到'访问冲突'错误。它比随机内存损坏更容易修复。

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2009-01-29T04:11:56.553

直到找到 ReSharper 才找到`readonly`关键字，但我现在本能地使用它，尤其是对于服务类。

```
readonly var prodSVC = new ProductService(); 
```

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2009-01-29T06:28:07.917

在 Java 中，当某些事情发生而我不知道为什么时，我有时会像这样使用 Log4J：

```
if (some bad condition) {
    log.error("a bad thing happened", new Exception("Let's see how we got here"));
} 
```

通过这种方式，我得到了一个堆栈跟踪，向我展示了我是如何进入意外情况的，比如说一个从未解锁的锁，一个不能为 null 的东西，等等。显然，如果抛出了真正的异常，我不需要这样做。这是我需要查看生产代码中发生的情况而不会真正干扰其他任何事情的时候。我**不想**抛出异常并且我没有抓住一个。我只想要一个带有适当消息的堆栈跟踪记录，以标记我正在发生的事情。

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2009-01-29T07:21:31.290

如果您使用的是 Visual C++，请在覆盖基类的方法时使用[override 关键字。](http://msdn.microsoft.com/en-us/library/z8ew2153.aspx)这样，如果有人碰巧更改了基类签名，它将引发编译器错误，而不是静默调用错误的方法。如果它早点存在，这将节省我几次。

例子：

```
class Foo
{
   virtual void DoSomething();
}

class Bar: public Foo
{
   void DoSomething() override { /* do something */ }
} 
```

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2009-01-29T06:34:53.333

我在 Java 中学会了**几乎从不**无限期地等待解锁，除非我真的期望它可能需要无限长的时间。如果实际上，锁应该在几秒钟内解锁，那么我只会等待一定的时间。如果锁没有解锁，那么我会抱怨并将堆栈转储到日志中，并根据最有利于系统稳定性的方式，要么继续像锁解锁一样继续，要么像锁从未解锁一样继续。

这有助于隔离一些在我开始这样做之前很神秘的竞争条件和伪死锁条件。

* * *

## 回答 #22

> 赞同：8
> 
> 时间：2009-01-29T06:35:32.443

C＃

*   验证公共方法中引用类型参数的非空值。
*   我`sealed`大量使用类来避免在我不想要的地方引入依赖项。允许继承应该明确地完成，而不是偶然的。

* * *

## 回答 #23

> 赞同：8
> 
> 时间：2009-01-30T23:26:47.217

当您发出错误消息时，至少尝试提供与程序决定抛出错误时相同的信息。

“权限被拒绝”告诉您存在权限问题，但您不知道问题发生的原因或位置。“Can't write transaction log /my/file: Read-only filesystem”至少让你知道做出决定的依据，即使它是错误的——尤其是如果它是错误的：错误的文件名？打开错了？其他意外错误？- 并让您知道遇到问题时您在哪里。

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2009-01-29T04:05:36.300

在 C# 中，使用`as`关键字进行强制转换。

```
string a = (string)obj 
```

如果 obj 不是字符串，将抛出异常

```
string a = obj as string 
```

如果 obj 不是字符串，则将 a 保留为 null

您仍然需要考虑 null ，但这通常比寻找强制转换异常更直接。有时您想要“强制转换或炸毁”类型的行为，在这种情况下`(string)obj`首选语法。

在我自己的代码中，我发现`as`大约 75% 的时间使用`(cast)`语法，大约 25% 的时间使用语法。

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2009-01-29T06:49:41.663

**为任何**输入做好准备，以及您收到的任何意外输入，转储到日志中。（在合理范围内。如果您正在从用户那里读取密码，请不要将其转储到日志中！并且不要每秒将数千条此类消息记录到日志中。在记录之前说明内容、可能性和频率.)

我不只是在谈论用户输入验证。例如，如果您正在阅读您希望包含 XML 的 HTTP 请求，请为其他数据格式做好准备。我很惊讶地看到我只期望 XML 的 HTML 响应——直到我查看并看到我的请求正在通过一个我不知道的透明代理并且客户声称不知道——并且代理在尝试完成要求。因此，代理向我的客户端返回了一个 HTML 错误页面，这让只需要 XML 数据的客户端感到困惑。

因此，即使您认为自己控制了线路的两端，您也可以获得意想不到的数据格式，而不会涉及任何恶意。做好准备，进行防御性编码，并在出现意外输入的情况下提供诊断输出。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2009-01-29T09:21:14.023

爪哇

java api没有不可变对象的概念，这很糟糕！在这种情况下，Final 可以为您提供帮助。用 final 标记每个不可变的类并[相应](http://www.javapractices.com/topic/TopicAction.do?Id=29)地准备类。

有时在局部变量上使用 final 来确保它们永远不会改变它们的值很有用。我发现这在丑陋但必要的循环结构中很有用。它只是很容易意外地重用一个变量，即使它被修复为一个常量。

在你的吸气剂中使用[防御性复制。](http://www.javapractices.com/topic/TopicAction.do?Id=15)除非您返回原始类型或不可变对象，否则请确保您复制对象以不违反封装。

永远不要使用克隆，使用[复制构造函数](http://www.javapractices.com/topic/TopicAction.do?Id=12)。

学习 equals 和 hashCode 之间的契约。这是经常被违反的。问题是在 99% 的情况下它不会影响您的代码。人们覆盖equals，但不关心hashCode。在某些情况下，您的代码可能会中断或表现得很奇怪，例如使用可变对象作为映射中的键。

* * *

## 回答 #27

> 赞同：6
> 
> 时间：2009-01-29T14:02:33.283

我尝试使用按合同设计的方法。它可以用任何语言模拟运行时。每种语言都支持“断言”，但是编写一个更好的实现来让您以更有用的方式管理错误是很容易和方便的。

在前[25 个最危险的编程错误](http://cwe.mitre.org/top25/#CWE-20)中，“输入验证不当”是“组件之间的不安全交互”部分中最危险的错误。

在方法的开头添加**前置条件**断言是确保参数一致的好方法。在我编写**后置条件**的方法结束时，检查输出是否符合预期。

为了实现**不变量**，我在任何检查“类一致性”的类中编写了一个方法，应该由前置条件和后置条件宏自动调用。

我正在评估[Code Contract Library](http://research.microsoft.com/en-us/projects/contracts/)。

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2009-01-29T08:27:36.490

我忘记用`echo`PHP 写太多次了：

```
<td><?php $foo->bar->baz(); ?></td>
<!-- should have been -->
<td><?php echo $foo->bar->baz(); ?></td> 
```

我要花很长时间才能弄清楚为什么 ->baz() 没有返回任何东西，而事实上我只是没有回应它！:-S 所以我创建了一个`EchoMe`类，它可以包裹任何应该回显的值：

```
<?php
class EchoMe {
  private $str;
  private $printed = false;
  function __construct($value) {
    $this->str = strval($value);
  }
  function __toString() {
    $this->printed = true;
    return $this->str;
  }
  function __destruct() {
    if($this->printed !== true)
      throw new Exception("String '$this->str' was never printed");
  }
} 
```

然后对于开发环境，我使用 EchoMe 来包装应该打印的东西：

```
function baz() {
  $value = [...calculations...]
  if(DEBUG)
    return EchoMe($value);
  return $value;
} 
```

使用该技术，缺少的第一个示例`echo`现在将引发异常......

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2009-01-29T04:30:45.440

C++

当我输入 new 时，我必须立即输入 delete。特别是对于数组。

C＃

在访问属性之前检查 null，尤其是在使用中介者模式时。对象被传递（然后应该使用 as 进行强制转换，如前所述），然后检查 null。即使您认为它不会为空，也要检查一下。我很惊讶。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2009-01-29T07:15:45.763

使用具有某些基于接口的 OOP 模式的哨兵类，而不是`null`.

例如，当使用类似的东西时

```
public interface IFileReader {
  List<Record> Read(string file);
} 
```

使用哨兵类

```
public class NoReader : IFileReader {
  List<Record> Read(string file) {
    // Depending on your functional requirements in this case
    // you will use one or more of any of the following:
    // - log to your debug window, and/or
    // - throw meaningful exception, and/or
    return new List<Record>(); // - graceful fall back, and/or
    // - whatever makes sense to you here...
  }
} 
```

并使用它来初始化任何 IFileReader 变量

```
IFileReader reader = new NoReader(); 
```

而不是让他们`null`（隐式或显式）

```
IFileReader reader; /* or */
IFileReader reader = null; 
```

以确保您不会收到意外的空指针异常。

奖励：您实际上不必再将每个`IFileReader`变量都用 .包裹起来`if (var!=null) ...`，因为它们不会是`null`.

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2009-01-29T14:23:32.070

使用允许动态、运行时日志级别调整的日志系统。通常，如果您必须停止某个程序以启用日志记录，那么您将丢失错误发生的任何罕见状态。您需要能够在不停止进程的情况下打开更多日志记录信息。

此外，linux 上的 'strace -p [pid]' 将显示您希望系统调用一个进程（或 linux 线程）正在进行。起初它可能看起来很奇怪，但是一旦您习惯了 libc 调用通常进行的系统调用，您会发现这在现场诊断中非常宝贵。

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2009-05-14T21:32:52.630

始终在最高警告级别编译，并将警告视为错误（构建破坏者）。

即使代码是“正确的”，也可以在尽可能不禁用警告的情况下修复警告的原因。例如，您的 C++ 编译器可能会针对以下合法代码向您发出警告：

```
while (ch = GetNextChar()) { ... } 
```

看起来您可能输入`=`了而不是`==`. 如果您添加显式检查，大多数提供此（有用）警告的编译器都会关闭。

```
while ((ch = GetNextChar()) != 0) { ... } 
```

稍微明确一点不仅可以消除警告，还可以帮助下一个必须理解代码的程序员。

如果您必须禁用警告，`#pragma`请在代码中使用 a，这样您就可以 (1) 限制禁用警告的代码范围，以及 (2) 使用注释来解释为什么必须禁用警告。在命令行或 makefile 中禁用的警告是等待发生的灾难。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2009-01-29T04:09:36.543

从数据集中获取表时

```
if(  ds != null &&
     ds.tables != null &&
     dt.tables.Count > 0 &&
     ds.tables[0] != null &&
     ds.tables[0].Rows > 0 )
{

    //use the row;
} 
```

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2009-01-29T05:48:46.560

对于 C++：*自动检测数组的大小*

```
char* mystrings[] = { "abc", "xyz" , "pqr" } 
```

通常然后 for 写成

```
for (int i=0; i< 3; i++)
{
    str= mystrings[i]
    // somecode
} 
```

但是，稍后您可以将新的更多字符串添加到“ *mystrings* ”。在这种情况下，上面的 for 循环可能会在代码中引入细微的错误。

我使用的解决方案是

```
int mystringsize = sizeof(mystrings)/sizeof(char*)
for (int i=0; i< mystringsize; i++)
{
    str= mystrings[i]
    // somecode
} 
```

现在，如果您将更多字符串添加到 ' *mystrings* ' 数组，将自动调整 for 循环。

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2009-01-29T09:24:26.853

我的 C++ 指南，但我不认为这很聪明：

*   总是 lint，哎呀，让它成为你的 makefile 的一部分。更好的是，如果可能的话，使用覆盖率。
*   不要使用 C++ 异常。
*   不要在 C++ 构造函数上放太多东西。请改用 init() 方法。在构造函数中发出错误信号的唯一方法是异常，即 PITA。
*   除非必要，否则不要重载运算符。
*   如果您的构造函数只有一个参数，请始终使用显式关键字。
*   避免全局对象。他们的执行顺序无法保证。
*   当你的类分配内存时定义复制构造函数。但是，如果您不希望该类被复制，并且您懒得定义一个，请防止它被调用。

```
 class NonCopied {
private:
    NonCopied(const NonCopied&);
    NonCopied& operator=(const NonCopied&);
} 
```

*   停止使用 sprintf()、strcpy()、strcat()。改用他们的替代品，例如。snprintf、strncpy() 等

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2009-01-29T17:28:03.073

使用控制台，就像在游戏中一样；

不是完全“防守”，但我在很多比赛中都看到了这一点。

我喜欢为我的所有应用程序提供一个完整的控制台，它允许我：

1.  定义要从控制台调用的简单命令（如切换到调试模式、设置一些运行时变量、检查内部配置参数等）。
2.  每次我想在应用程序运行时从应用程序访问日志。
3.  如果需要，将日志保存到文件
4.  将每个未处理的异常记录到控制台，然后再将其提交给用户（如果合适）。这样，每个异常都会被捕获为某个级别。如果您巧妙地将其与调试信息或映射文件结合使用，您可以获得出色的结果。

在 C# 中，如果您使用条件属性标记控制台方法，那么它们将自动从发布版本中删除。在其他语言中，同样可以通过预处理器指令来实现。

我发现它在测试阶段特别有价值，因为它允许开发人员查看正在发生的事情，并且测试人员可以向开发人员提供更好的反馈。

此外：

*   永远不要只为登录而捕获异常。
*   永远不要捕获一般异常（异常 E）
*   从不隐藏异常
*   将编译器警告视为错误，只接受经过非常仔细研究的警告。
*   始终检查来自库外部的每个输入。
*   在“调试”中检查来自库内部的输入，不要检查发布。
*   永远不要引发通用异常。如果存在描述问题的异常，请使用它，如果不存在，请创建您自己的异常。

* * *

## 回答 #37

> 赞同：3
> 
> 时间：2009-01-29T21:08:55.870

在 C++`assert()`中是一个非常方便的工具。我不仅为它提供了评估条件，而且还提供了一条说明问题所在的消息：

```
assert( isConditionValid && "ABC might have failed because XYZ is wrong." ); 
```

当没有要检查的实际变量或者您发现自己处于不应该发生的情况（switch() 的“默认”处理程序）时，这也可以：

```
assert( 0 && "Invalid parameter" ); 
```

它不仅在调试模式下断言，而且同时告诉你出了什么问题。

如果我没记错的话，我是从“C++ 编码标准”中得到的。

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2009-01-29T23:06:31.343

在 Python 中，如果我 stub（或更改方法）然后当天没有时间测试它，我会填入一个“断言 False”，这样如果运行该方法，代码就会崩溃，从而产生令人尴尬的错误我第二天会注意到的。故意的语法错误也很有帮助。

例子：

```
def somefunction(*args,**kwargs):
    ''' <description of function and args> '''
    # finish this in the morning
    assert False, "Gregg finish this up" 
```

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2009-03-10T22:05:44.883

*   小而易懂的课程。许多人。
*   小而易懂的方法。
*   尽可能不可变。
*   最小化范围——没有可以包的公共包，没有可以私有的包。
*   永远不要为公共可变变量找任何借口。

此外，当您的课程很小且通常是最终课程时，防御性确实很便宜-无论您是否相信，都可以将其投入使用。测试传递给构造函数和（如果你真的必须拥有它们）设置器的值。

* * *

## 回答 #40

> 赞同：3
> 
> 时间：2011-04-24T00:08:24.987

请记住，异常是程序员最好的朋友——永远不要吃它们！

* * *

## 回答 #41

> 赞同：2
> 
> 时间：2009-01-29T04:37:27.440

在 Perl 中，当子例程没有传递足够的参数时， die() 。这可以防止您遇到必须通过堆栈追溯 10 个级别的故障。

```
sub foo {
    my $param0 = shift or confess "param0 is a required param";
    my $param1 = shift or confess "param1 is a required param";
    my $param2 = shift or confess "param2 is a required param";
    ...
} 
```

* * *

## 回答 #42

> 赞同：2
> 
> 时间：2009-01-29T08:10:01.377

设计您的日志记录策略，以便当生产中发生错误时，会自动向相应的支持人员或开发人员发送电子邮件。这使您可以主动发现错误，而不是等待用户抱怨。

请注意，这应该谨慎行事。我的一个例子是，一位开发人员在循环中编写了一些日志记录代码。几个月后，系统中的一个错误触发了此代码。不幸的是，应用程序处于该循环中，一遍又一遍地记录相同的错误。那天早上我们到达办公室，得知我们的日志框架在凌晨 4 点到 8 点之间发送了 40,000 封电子邮件后，我们的邮件服务器崩溃了！

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2009-01-29T14:36:30.283

在 C++ 中

我将断言分布在我的所有函数中，尤其是在函数的开始和结束时以捕获任何意外的输入/输出。当我稍后在函数中添加更多功能时，断言将帮助我记住。它还可以帮助其他人看到函数的意图，并且仅在调试模式下处于活动状态。

我尽可能避免使用指针，而是使用引用，这样我就不需要`if (NULL!=p)`在我的代码中放置杂乱无章的语句。

`const`我也在声明和函数/方法参数中尽可能频繁地使用这个词。

我也避免使用 POD，而是尽可能使用**STL/Boost以避免内存泄漏和其他讨厌的事情。**但是，我确实避免使用太多自定义定义的模板，因为我发现它们很难调试，尤其是对于没有编写代码的其他人。

* * *

## 回答 #44

> 赞同：2
> 
> 时间：2009-01-29T19:13:31.050

回到 RAM 不免费的那些日子，大多数计算机都非常有限并且“内存不足！” 是一个很常见的错误信息...

好吧，大多数应用程序都能够以“优雅”崩溃：用户（几乎）从未丢失过他们的作品。

（几乎，我说！^^）。

它是怎么做的？非常简单：当您的应用程序启动时，分配大量 RAM（例如，高达 20 KB！）。然后，当调用 malloc() 失败时：

1.  善意地说“内存不足”（此消息是强制性的）。
2.  添加“你最好保存所有的工作。现在！”
3.  释放高达 20 KB 的 RAM 气球。
4.  恢复。

等等瞧。您的应用程序在用户面前缓慢崩溃，大多数情况下，可以保存它的工作。

* * *

## 回答 #45

> 赞同：2
> 
> 时间：2009-01-30T00:25:11.123

在几周内尽量不要构建任何你设计的东西。通常，在事情被锁定之前，您会遇到其他情况。

* * *

## 回答 #46

> 赞同：2
> 
> 时间：2009-01-30T19:54:52.073

*   使您的代码尽可能易读，尤其是使用尽可能明显的函数和变量名称。如果这意味着某些名称有点偏长，那就这样吧。

*   尽可能使用静态分析器。您很快就会养成编写符合其规则的代码的习惯。

*   在开发过程中，可以轻松打开诊断输出 - 但可以轻松关闭它们以进行生产。

* * *

## 回答 #47

> 赞同：2
> 
> 时间：2009-03-10T22:12:28.503

不要传递裸集合，即使是泛型。它们无法受到保护，也无法附加逻辑。

一个很好的并行将有一个公共变量而不是 setter/getter。setter/getter 允许你在不影响外部世界的情况下改变你的底层实现。

如果你正在传递一个集合，你如何在不影响外部世界的情况下改变你的数据结构？您收藏的所有访问权限都分布在您的所有代码中！！

相反，包装它并给自己一个放置一点业务逻辑的地方。完成后，您会发现一些不错的重构。

通常你会发现添加一些变量或者第二个集合是有意义的——然后你会意识到这个类一直都不见了！

* * *

## 回答 #48

> 赞同：2
> 
> 时间：2009-03-10T22:34:58.260

在进行多线程 C/C++ 编程时，创建一系列宏来断言您的函数正在您认为正在调用它的线程上被调用。然后自由地使用它们。

*   ASSERT_ON_UI_THREAD
*   ASSERT_ON_WORKER_THREAD
*   ASSERT_ON_THREADPOOL_THREAD
*   ASSERT_ON_DOWNLOAD_THREAD
*   等等

初始化线程时，在 Windows 上使用 GetCurrentThreadId() 或在 Posix 上使用 pthread_self()，然后存储在全局变量中。断言与存储的值进行比较。

为我节省了很多痛苦的调试，尤其是当其他人重构现有的多线程代码时。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2009-01-29T04:24:22.410

`If (some really bad condition) Then
Throw New Exception("particular bad thing happened")
End If` 

通常这采取的形式

Public SUB New (key As Guid)
Dim oReturn As returnpacket = Services.TableBackedObjectServices.GetData(key)
If oReturn.ds.tables(0).Rows.Count = 0 then Throw New Exception("从 key 加载的 TableBackedObject 未在数据库。”）
结束如果

由于仅在从搜索过程的结果中选择特定对象后加载特定对象时才应该调用该特定构造函数，因此未找到它是错误或竞争条件（这意味着另一个用户按键删除了该对象）。

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2009-01-29T04:58:55.680

我在 PHP 中做的一些事情（错误很容易而且往往是灾难性的）：

*   打开 Vim 中的所有语法高亮提示。默认情况下关闭了很多（请`:help php`查看它们）。我正在考虑添加一些我自己的错误突出显示的东西......
*   在 git 中使用预提交挂钩对`php -l`每个更改的文件进行语法检查 ()。它只能防止基本错误进入，但总比没有好。
*   与键入普通查询相比，围绕数据库类编写包装器以使参数化的准备语句变得容易脑死 -`$db->q1($sql, $param1, $param2)`获取第一行的单个列，依此类推。
*   配置它（通过 Xdebug 扩展）以吐出巨大的调试信息 HTML 表，即使是微不足道的警告消息，所以不可能忽略它们。在开发服务器上，就是这样。在生产中，它们会被静默记录。
*   让事情变得简短、简单和明显。为了制作更小的文件，我花了*很多时间重构东西。*
*   使用[显式控制结构语法](http://php.net/manual/en/control-structures.alternative-syntax.php)来避免多个“}”非常接近。
*   在签入之前校对代码。我养成了最大化窗口的习惯，然后设置一个大得离谱的字体大小。如果我只能在屏幕上以很小的字体同时看到 132C x 50R 时才能理解它，那么开始时间太长了。

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2009-01-29T17:12:40.793

在 c# 中，值类型使用**TryParse**而不是**Parse**以避免 FormatException、OverflowException 等异常，当然要避免为此编写 try 块。

错误的代码

```
string numberText = "123"; // or any other invalid value

public int GetNumber(string numberText)
  {
  try
  {
     int myInt = int.Parse(numberText);
     return myInt;
  }
  catch (FormatException)
  {
    //log the error if required
     return 0;
   }
  catch (OverflowException)
  {
     return 0;
  }
} 
```

好的代码（如果你不想处理错误）

```
string numberText = "123"; // or any other invalid value
public int GetNumber(string numberText, int defaultReturnValue)
  {
    int myInt;
    return ( int.TryParse(numberText, out myInt) ) ?  myInt : defaultReturnValue;
} 
```

您可以对几乎所有的值类型执行相同的操作，例如：**Boolean.TryParse、Int16.TryParse、decimal.TryParse 等**

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2009-01-29T22:24:51.443

在 C# 中：而不是这个：

```
if( str==null ) 
```

做这个：

```
if( String.IsNullOrEmpty(str) ) 
```

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2009-01-30T00:40:32.107

在 C# 中，使用“使用”确保对象在超出范围时被释放。IE

```
 using(IDataReader results = DbManager.ExecuteQuery(dbCommand, transaction))
        {
            while (results.Read())
            {
                //do something
            }
        } 
```

此外，在转换后检查空值

```
 MyObject obj = this.bindingSource.Current as MyObject;
        if (MyObject != null)
        {
           // do something
        } 
```

此外，我尽可能使用枚举来避免硬编码、拼写错误并在需要时提供简单的重命名，即

```
 private enum MyTableColumns
{ 
    UserID,
    UserName
}

private enum StoredProcedures
{
    usp_getMyUser,
    usp_doSomething
}

public static MyUser GetMyUser(int userID)
{
    List<SqlParameter> spParameters = new List<SqlParameter>();

    spParameters.Add(new SqlParameter(MyTableColumns.UserID.ToString(), userID));

    return MyDB.GetEntity(StoredProcedures.usp_getMyUser.ToString(), spParameters, CommandType.StoredProcedure);
} 
```

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2009-01-30T00:47:06.400

包括高级异常处理，如此处详细描述

[Windows 窗体应用程序中的顶级异常处理](http://richnewman.wordpress.com/2007/04/08/top-level-exception-handling-in-windows-forms-applications-part-1/)

我的 Program.cs 然后看起来像这样

```
 static class Program
    {
    [STAThread]
    static void Main()
    {
        Application.ThreadException += 
            new ThreadExceptionEventHandler(new ThreadExceptionHandler().ApplicationThreadException);

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    }

    public class ThreadExceptionHandler
    {
        public void ApplicationThreadException(object sender, ThreadExceptionEventArgs e)
        {
            MessageBox.Show(e.Exception.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
} 
```

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2009-01-30T00:56:49.983

不要将单字符变量用于循环索引。例如：

```
for (int ii = 0 ; ii < someValue ; ii++)
    // loop body 
```

这是一个简单的习惯，但如果您必须使用标准文本编辑器来查找对循环变量的引用，这将非常有帮助。当然，索引循环通常不应该太长以至于您需要搜索索引引用......

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2009-01-31T10:46:10.887

C++：

避免使用原始指针，始终使用 Boost 智能指针包（例如 shared_ptr）。

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2009-02-04T17:30:54.933

我在工作中对来自 Teradyne (c, vba)、Advantest(c++ .net) 等的自动测试设备上的混合信号半导体进行了很多数学测试。

我使用的两种防御策略是：

*   防止被零除，如果 (x!=0) { z=y/x; } else { /* 给 za 可识别的假号码，继续程序 */ }

*   不要传递零或负数来记录计算。这在计算增益、CMRR 和 PSRR 时很常见。如果 (x>0) { psrr = 20 * log (x); } 其他 { psrr = -999 ; /*假号码*/ }

有些人可能会反对使用假数字，但这些程序用于非常大批量的半导体制造。如果在测试坏零件时发生错误，最好继续测试并保持数据格式的完整性。在测试数据的后处理过程中，假数字很容易被分离为异常值。

——迈克

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2009-02-20T05:05:39.040

JavaScript：

我们应该适当地使用“==”和“===”。

> == : 类型转换相等比较
> 
> === : 严格相等比较

例如，'1'==1 为真，但 '1'===1 为假。

许多人不自觉地使用“==”而不是“===”。

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2009-03-10T20:54:55.630

如果有一个值类型对其值具有某些约束，请创建一个由代码强制执行这些约束的类。一些例子：

```
public class SanitizedHtmlString
{
private string val;

public SanitizedHtmlString(string val)
{
  this.val = Sanitize(val);
}

public string Val
{
  get { return val; }
}

//TODO write Sanitize method...
}

public class CarSpeed
{
private int speedInMilesPerHour; 

public CarSpeed(int speedInMilesPerHour)
{
  if (speedInMilesPerHour > 1000 || speedInMilesPerHour < 0)
  {
    throw new ArgumentException("Invalid speed.");
  }
  this.speedInMilesPerHour = speedInMilesPerHour; 
}

public int SpeedInMilesPerHour
{
  get { return speedInMilesPerHour; }
}
} 
```

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2009-03-10T21:31:03.780

[仅崩溃软件](http://www.usenix.org/events/hotos03/tech/full_papers/candea/candea_html/index.html "仅崩溃软件")，简而言之，不需要一些关闭程序以及一些很少使用（因此可能有错误）的恢复代码，总是通过“崩溃”来停止程序，因此在启动时总是运行恢复代码。

这并不适用于所有事情，但在某些情况下，这是一个非常巧妙的想法。

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2009-12-10T21:34:02.197

那么，我们当中谁没有在编写递归方法时不小心锁定 Visual Studio 一段时间呢？

```
 int DoSomething(int value)  // stupid example for illustrative purposes
  {
      if (value < 0)
          return value;
      value++;  // oops
      return DoSomething(value);
  } 
```

为了避免不得不等待的烦恼，有时可能不得不用任务管理器杀死你的 IDE，在你调试它时将它包含在你的递归方法中：

```
 int DoSomething(int value)
  {
>>    if (new StackTrace().FrameCount > 1000)  // some appropriately large number
>>        Debug.Fail("Stack overflow headed your way.");

      if (value < 0)
          // some buggy code that never fires
      return DoSomething(value);
  } 
```

这可能看起来很慢，但实际上检查 FrameCount 非常快（在我的 PC 上不到一秒）。在您确定该方法正常工作后，您可以取消此故障保护（或者可能只是将其注释掉，但留待以后调试）。

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2011-02-23T09:50:53.700

语言不可知论：不要依赖编译器、虚拟机等进行初始化。始终将变量显式初始化为有用的值。

断言是你最好的朋友，尽管在某些情况下单元测试可能更适合。

C/C++：尽可能使用基于堆栈的对象。

在条件句中，明确检查您期望或不期望的值。例如，如果您有一个名为`activated`而不是写的布尔变量`if (activated)`write `if (true == activated)`。原因是`activated`可能包含足以使条件成功的垃圾。

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2009-01-29T06:57:18.093

不需要与语言的限制抗争是我可以在我的程序逻辑中使用的最好的防御。有时更容易说明什么时候应该**停止**。

例如，您有这种循环：

```
while(1)
{
  // some codes here

  if(keypress == escape_key || keypress == alt_f4_key 
     || keypress == ctrl_w_key || keypress == ctrl_q_key) break;

  // some codes here
} 
```

如果您想将条件放在循环头上，而不是因为没有**until**构造而与语言抗争，只需逐字复制条件并加上感叹号：

```
while(! (keypress == escape_key || keypress == alt_f4_key 
     || keypress == ctrl_w_key || keypress == ctrl_q_key) )
{ 
    // some codes here
} 
```

在 C 派生语言上没有 until 构造，所以只需执行上述操作，否则执行此操作（可能在 C/C++ 中，使用 #define ;-)

```
until(keypress == escape_key || keypress == alt_f4_key 
     || keypress == ctrl_w_key || keypress == ctrl_q_key)
{ 
    // some codes here
} 
```

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2009-01-29T13:32:24.250

而不是java中的var.equals（“whatever”）我做“whatever”.equals（var）。这样，如果 var 为 null 我不必担心 nullpointer 异常。这在处理 URL 参数等问题时效果很好。

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2009-01-30T07:53:10.237

算不上聪明，但也许是一种体面的做法。在 C/C++ 中：

总是从底部的函数返回，从不在中间。唯一的例外是检查所需参数是否为 null；总是先出现并立即返回（否则我只会在顶部写一个看起来很傻的大“如果”条件）。

```
int MyIntReturningFuction(char *importantPointer)
{
    int intToReturn = FAILURE;
    if (NULL == importantPointer)
    {
        return FAILURE;
    }
    // Do code that will set intToReturn to SUCCESS (or not).
    return intToReturn;
} 
```

我已经看到很多关于为什么它并不重要的论据，但对我来说最好的论据就是经验。我经常挠头，问“为什么我的这个函数底部附近的断点没有被命中？” 只是发现我以外的其他人在上面的某个地方放了一个回报（并且通常会改变一些本应不理会的条件）。

我还发现拥有像这样非常简单的规则使我成为一个更加一致的编码器。我从不特别违反这条规则，所以有时我不得不考虑处理事情的其他方法（比如清理内存等）。到目前为止，它总是变得更好。

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2009-03-11T14:51:41.080

*   从代码执行 SQL 查询时，请始终使用占位符
*   MySQL 有一个有用的非标准扩展`DELETE`语句：`DELETE FROM sometable WHERE name IS LIKE 'foo%' LIMIT 1`. 这样一来，万一出现错误，您就不会擦掉整张桌子。

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2009-05-08T14:24:06.257

语言不可知论：问题：报告和处理整体的部分。每当显示计算和百分比时，我总是保留一个运行总计，对于最后一个条目，它的值不像其他条目那样计算，而是通过从 100.00 中减去运行总计。以这种方式，如果有兴趣的一方选择将所有组件百分比相加，他们将精确地相加到 100.00

# java - 使用 J2ME 删除文件会引发 IOException

> ID：490421
> 
> 赞同：3
> 
> 时间：2009-01-29T03:49:21.980
> 
> 标签：java, file-io, java-me, audio-recording, mmapi

我正在尝试使用 J2ME 的 FileConnection.delete() 方法删除文件，但每次调用 delete() 方法时都会引发 IOException。我写了一个条件语句来验证文件的存在，但不管这个事实，一个 IOException 被抛出。

根据[FileConnection API](http://mobilezoo.biz/jsr/75/fileconnection/javax/microedition/io/file/FileConnection.html#delete())，当对 FileConnection 对象调用 delete() 时，与该对象关联的所有流都将关闭，如果与特定文件关联的流发生任何后续操作，则会引发 IOException。

我尝试删除的文件已记录在同一个程序中，但在调用 delete() 方法后，我调用了 recordControl.reset()。这可能会导致抛出 IOException 吗？

我的问题可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T07:45:13.690

我相信您代码中的某个人已连接到您要删除的文件。您应该手动关闭与现有文件的所有连接，并且不要相信其他人会为您执行此操作。

您是否已在另一个应用程序（如记事本）中打开该文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-10T07:35:59.140

检查字符串，包括您传递给 Connector.open() 的路径，验证文件权限，在删除之前关闭为该文件打开的所有流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T07:00:32.050

异常堆栈跟踪会告诉您哪行代码抛出 IOException，有时您也会得到异常原因，因此请查看堆栈跟踪。

# java - 将单个对象转换为数组的函数？

> ID：490424
> 
> 赞同：8
> 
> 时间：2009-01-29T03:51:32.600
> 
> 标签：java

我想编写一个函数，它将接受一个对象并将其转换为一个包含该对象作为单个元素的数组。我突然想到，我也许可以使用泛型和变量参数来自动执行此操作，而无需为我希望使用的每种对象类型编写函数。这段代码会起作用吗？有什么我需要注意的微妙之处吗？

```
public static <X> X[] convert_to_array(X... in_objs){
    return in_objs;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-29T03:55:30.377

为什么不简单：

```
Object o = new Object();
Object[] array = { o }; // no method call required! 
```

你真正想要完成什么？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-29T03:56:47.893

它有效，但看起来像：

```
 Object o = new Object();
 someMethod(new Object[] { o } ); 
```

那么更简单一点：

```
Object o = new Object();
someMethod(convert_to_array(o)); 
```

如果有时我想传递一个对象，但有时我想传递一个数组，通常我只是在 API 中使用重载方法：

```
public void doSomething(Object o)
{
    doSomething(new Object[] { o } );
}

public void doSomething(Object[] array)
{
    // stuff goes here.
} 
```

可以使用可变参数，但前提是数组当然是最后一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T07:55:32.047

假设您需要一个类型正确的数组，您可以使用 java.lang.reflect.Array：

```
static public Object[] createTypedArray(Object elm) {
    Object[] arr=(Object[])java.lang.reflect.Array.newInstance(elm.getClass(),1);
    arr[0]=elm;
    return arr; // this can be cast safely to an array of the type of elm
    } 
```

# javascript - DokuWiki 和 jQuery 可以一起玩吗？

> ID：490426
> 
> 赞同：8
> 
> 时间：2009-01-29T03:51:58.730
> 
> 标签：javascript, jquery, dokuwiki

我在让 jQuery 与 DokuWiki 配合使用时遇到了一些麻烦——有人已经成功地做到了这一点吗？

目前，包括 jQuery 在内的各种 JS 功能中断，我无法追踪问题的根源。哪些东西会与 jQuery 发生冲突？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-29T04:23:39.463

我个人对 DokuWiki 并不熟悉，但如果在包含 jQuery 时出现问题，那么它可能与 jQuery 中的“$”变量发生冲突。你可以使用 jQuery 的 noConflict 方法来解决这个问题，更多信息在这里： [http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

另请参阅此 Stack Overflow 帖子： [jQuery 和原型冲突](https://stackoverflow.com/questions/134572/jquery-prototype-conflict)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-29T04:21:23.430

您通常可以在加载后立即使用以下内容来避免任何 jQuery 冲突`jquery.js`：

```
jQuery.noConflict(); 
```

然后，它不会覆盖`$`变量，这是这些 JS 库冲突中最常见的问题根源。不过，您需要使用 调用 jQuery 函数`jQuery`。例子：

```
jQuery(function() { ... }); // $(function ...
jQuery(".klass").hide();    // $(".klass" ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-09-11T13:35:09.617

还有一个将 JQuery 添加到 DokuWiki 的插件：http: [//www.dokuwiki.org/plugin :jquery](http://www.dokuwiki.org/plugin:jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-08-27T17:07:11.727

```
jQuery.noConflict(); 
```

然后你可以使用`jQuery("your element selector")`or 代替`$`. 要在您的代码中使用 nicer `$`，只需像这样围绕它包装一个函数：

```
jQuery.noConflict()
(function($) {
  $("your element selector").whatever();
})(jQuery) 
```

[将 jquery 函数包装在闭包中的好处是什么](https://stackoverflow.com/questions/3579643/what-is-the-benefit-of-wrapping-a-jquery-function-in-a-closure)的答案中描述的其他好处？

# python - 使绑定方法像函数一样工作的最 Pythonic 方式是什么？

> ID：490429
> 
> 赞同：5
> 
> 时间：2009-01-29T03:55:06.900
> 
> 标签：python, function, methods, closures

我正在使用一个 Python API，它希望我向它传递一个函数。但是，由于各种原因，我想向它传递一个方法，因为我希望函数根据它所属的实例表现出不同的行为。如果我向它传递一个方法，API 将不会使用正确的“self”参数调用它，所以我想知道如何将一个方法变成一个知道它属于什么“self”的函数。

我可以想到几种方法来做到这一点，包括使用 lambda 和闭包。我在下面包含了一些示例，但我想知道是否有标准机制可以实现相同的效果。

```
class A(object):
    def hello(self, salutation):
        print('%s, my name is %s' % (salutation, str(self)))

    def bind_hello1(self):
        return lambda x: self.hello(x)

    def bind_hello2(self):
        def hello2(*args):
            self.hello(*args)
        return hello2

>>> a1, a2 = A(), A()
>>> a1.hello('Greetings'); a2.hello('Greetings')
Greetings, my name is <__main__.A object at 0x71570>
Greetings, my name is <__main__.A object at 0x71590>

>>> f1, f2 = a1.bind_hello1(), a2.bind_hello1()
>>> f1('Salutations'); f2('Salutations')
Salutations, my name is <__main__.A object at 0x71570>
Salutations, my name is <__main__.A object at 0x71590>

>>> f1, f2 = a1.bind_hello2(), a2.bind_hello2()
>>> f1('Aloha'); f2('Aloha')
Aloha, my name is <__main__.A object at 0x71570>
Aloha, my name is <__main__.A object at 0x71590> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-29T03:58:53.303

传入绑定到实例的方法会起作用吗？如果是这样，你不必做任何特别的事情。

```
In [2]: class C(object):
   ...:     def method(self, a, b, c):
   ...:         print a, b, c
   ...:
   ...:

In [3]: def api_function(a_func):
   ...:     a_func("One Fish", "Two Fish", "Blue Fish")
   ...:
   ...:

In [4]: c = C()

In [5]: api_function(c.method)
One Fish Two Fish Blue Fish 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T04:19:17.287

您可能想澄清您的问题。正如瑞安指出的那样，

```
def callback(fn):
    fn('Welcome')
callback(a1.hello)
callback(a2.hello) 
```

将导致以`hello`正确的`self`界限被调用，`a1`或者`a2`. 如果您没有遇到这种情况，那就大错特错了，因为这就是 Python 的工作方式。

从您所写的内容来看，您似乎想要的是绑定参数 - 换句话说，就是[currying](http://en.wikipedia.org/wiki/Function_currying)。你可以在各处找到示例，但根据我的口味， [Recipe 52549](http://code.activestate.com/recipes/52549/)具有最好的 Pythonic 外观。

```
class curry:
    def __init__(self, fun, *args, **kwargs):
        self.fun = fun
        self.pending = args[:]
        self.kwargs = kwargs.copy()

    def __call__(self, *args, **kwargs):
        if kwargs and self.kwargs:
            kw = self.kwargs.copy()
            kw.update(kwargs)
        else:
            kw = kwargs or self.kwargs

        return self.fun(*(self.pending + args), **kw)

f1 = curry(a1.hello, 'Salutations')
f1()  #  == a1.hello('Salutations') 
```

# .net - 程序终止时的 LoaderLock 错误

> ID：490430
> 
> 赞同：2
> 
> 时间：2009-01-29T03:55:09.350
> 
> 标签：.net, c++, unmanaged, loaderlock

我最近将 .NET NLog 日志记录组件集成到我们的一个应用程序中，该应用程序完全使用非托管代码（在 Visual Studio 6 中编译的 C++ 和 VB6 组件）开发。我们有一堆 C++ 应用程序通过 COM 接口与 NLog 通信。

目前一切正常，但我注意到在程序终止期间弹出以下消息（如果在 VS6 中调试 C++ 组件，则在输出窗口中；如果通过 VS 2005 调试 NLog，则作为 IDE 中的提示）：

> 检测到 LoaderLock 消息：尝试在 OS Loader 锁内进行托管执行。不要尝试在 DllMain 或图像初始化函数中运行托管代码，因为这样做会导致应用程序挂起。

DllMain 如下：

```
extern "C"
BOOL WINAPI DllMain(HINSTANCE hInstance, DWORD dwReason, LPVOID /*lpReserved*/)
{
    if (dwReason == DLL_PROCESS_ATTACH)
    {
        _Module.Init(ObjectMap, hInstance);
        DisableThreadLibraryCalls(hInstance);
    }
    else if (dwReason == DLL_PROCESS_DETACH)
        _Module.Term();
    return TRUE;    // ok
} 
```

我的猜测是，`_Module.Term();`现在包括释放一些 .NET 引用（我在我的一个 C++ 类中保留对 NLog 对象的引用，以避免每次都实例化和释放），这会导致弹出此警告。

我的问题：这可以安全忽略吗？如果不是，有什么好的解决方法？（我能想到的最好的方法是实例化对该 NLog 对象的引用，并在每次我想写入日志文件时释放它……这不是最优雅的解决方案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-29T04:57:35.027

忽略此消息绝对是不安全的。如果您点击此消息，您几乎可以肯定创建了一个真正的加载程序锁定策略违规。这是一个非常严重的错误，可能会导致程序出现不可预知的行为（包括死锁）。

避免这种情况的最佳方法是不要直接或间接访问 DLL main 内的任何其他 .Net 对象/函数。对于您的情况，最好使用不同的缓存策略。也许创建一个引用计数对象来保存 .Net 引用。这样，对象将在调用 DllMain 进行卸载之前被释放（在所有对象都被销毁之前，无法卸载 dll）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T06:24:43.853

不要忽视。我在启动使用非托管 C++ DLL 的 C# 应用程序时遇到了 LoaderLock 问题。在这种情况下，一些 DLL 代码（从 Linux 移植）具有在加载期间在初始化时访问文件的静态。清理完静态数据后，LoaderLock 问题就得到了修复。以类似的方式，如果您有在清理期间访问文件的 C/C++ 静态变量，这可能会导致您的 LoaderLock。

# design-patterns - 每个 DTO 的工厂

> ID：490432
> 
> 赞同：0
> 
> 时间：2009-01-29T03:56:19.377
> 
> 标签：design-patterns, tdd

我们进行了一场辩论——每个 dto 都有一个工厂以测试某些服务的利弊。这个想法是使用原始类型参数（用户名、密码等）调用服务，但应该使用这些原始类型来利用服务依赖性。测试它的唯一方法是向服务中注入一个额外的依赖项 DtoFactory，这样可以确保以我们想要的方式使用原始参数。让我担心的是“FactoryX per DtoX”的想法。什么是替代方案？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T02:31:46.813

我想我回答了我自己的问题。测试部分不应推动该要求。测试应该以不同的方式进行。Rhino Mocks 3.5 有助于实现这一点，以消除工厂中每个 dto 的任何需求。我在这里写了一篇博客：[http ://weblogs.asp.net/sfeldman/archive/2009/01/29/factory-per-dto.aspx](http://weblogs.asp.net/sfeldman/archive/2009/01/29/factory-per-dto.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T06:21:52.687

使用 spring 框架，我将不再将登录信息放入 DTO（或我管理的线程存储中）。我只是让 spring 在需要时将适当的凭据注入到服务中。

这对登录信息非常有效。当像你一样运行集成测试时，spring 会处理这一切。

你要求替代品。

# python - django-cart 还是 Satchmo？

> ID：490439
> 
> 赞同：23
> 
> 时间：2009-01-29T04:00:49.027
> 
> 标签：python, django, e-commerce, satchmo

我正在寻找实现一个非常基本的购物车。 [Satchmo](http://www.satchmoproject.com/)似乎安装了**很多**我不需要的应用程序和额外的东西。我听说其他人提到[django-cart](http://code.google.com/p/django-cart/)。有没有人尝试过这个 Django 应用程序（django-cart）？有什么要注意的或有其他经验吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-01-29T05:04:35.310

好吧，如果您想使用 django-cart，您应该将其视为开发自己的起点。该项目的最后一次提交 (r4) 是 2006 年 11 月。

相比之下，对 Satchmo 的最后一次提交 (r1922) 是几个小时前。

使用 Satchmo，您可以获得正在积极开发并被真实电子商务网站实际使用的代码。

如果您自己开发，您将面临疏远客户和亏损的风险。如果您使用 Satchmo，您可以花更多时间开发/改进您网站的其他区域。

我打赌你已经猜到我的建议了：）

至于 Satchmo 中的应用程序和其他内容，我可以根据个人经验告诉您，您不需要将它们全部包含在 INSTALLED_APPS 设置中。我不记得我把它缩减到了什么，但我的 INSTALLED_APPS 中只有大约 6-7 个 Satchmo 应用程序，它们都是我需要的。我认为从那时起他们已经完成了更多的模块化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-29T04:04:28.113

我认为没有很多开箱即用的解决方案的原因是大多数使用 Django 的人都是高级用户。他们倾向于推出自己的解决方案，特别是考虑到在 Django 中实现它是多么容易。

为了回答您的问题，[DJwarehouse](http://demo.djwarehouse.org/)是我所知道的唯一其他购物车。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-29T23:05:52.313

如上所述，Django-cart 很长时间没有更新，因此很可能与 Django 1.0 和更新版本的 Django 不兼容。仅出于这个原因，我建议坚持使用更新的东西。

我有偏见，因为我是 Satchmo 的开发人员，但我认为 Satchmo 过度杀伤的感觉有点夸大了。你可能会对你认为你想要用你的“简单购物车”做的所有事情感到惊讶。很快它可能不会那么简单了。

最坏的情况是，如果 Satchmo 太多，您可以抽出您不关心的部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-31T07:43:41.833

似乎新版本的 Django-cart 已于 3 月 25 日发布。[http://vaig.be/2009/03/django-cart-released.html](http://vaig.be/2009/03/django-cart-released.html)

想知道新版本在 Satchmo 方面的表现如何。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T15:16:30.230

[Satchmo](http://www.satchmoproject.com/)比[django-cart](http://code.google.com/p/django-cart/)有更多的功能。如果您正在寻找简单轻量级的购物车应用程序，请尝试与 django-cart 非常相似的[django-carton 。](https://github.com/lazybird/django-carton)

它有助于购物车操作，例如添加和删除项目。它不实现视图、模板或支付处理模块——您可以按照自己的方式自由构建它们。购物车存在于会话中，而不是数据库中。购物车项目是任意产品对象，因此您可以按照自己的方式定义产品模型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-04T00:24:15.083

我正在使用 django-cart，它并不是一个真正的应用程序——它是一个应用程序的开始。没有视图，总共大约 150 行代码。没有文档，但很清楚如何使用其中的大部分内容。我有点不确定 ItemManager 的意图或应该如何使用它。将其与 Satchmo 进行比较就像将跳蚤与大象进行比较。他们有点不同。

# php - PHP 会话似乎不起作用

> ID：490440
> 
> 赞同：3
> 
> 时间：2009-01-29T04:01:24.110
> 
> 标签：php, session, cookies, session-variables

会话变量显然对我不起作用。我不知道我做错了什么。这是我用来检查有效密码的代码：

```
if ($input_password_hash == $password_hash)
 {
  session_start();
  $_SESSION['is_user'] = 1;
  header("Location: ../new_look"); //or Location: index.php
 }
else echo "Wrong password."; 
```

在 index.php 文件（它重定向到的位置）中，我有以下代码：

```
if ($_SESSION['is_user'] == 1)
{
  //show index page with navigation bar for registered user
}

else
{
 //do something else
} 
```

但它根本不起作用。

会话显然开始了，可以通过检查 cookie 来验证。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T04:04:15.930

您知道在任何请求中`session_start()`使用`$_SESSION`变量之前都必须编写代码，对吧？看起来你还没有把它放在 index.php 的任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-11-28T23:17:08.103

会话开始（）；必须放在任何将要发送的标题之前，例如在 php 文件上的任何 HTML 标记之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T04:07:57.763

我刚从修复中回来...添加`session_start()`到文件的顶部 - 甚至在`<html>`标签之前。在中间做`session_start()`会出错......不知道为什么。我是新手。不过感谢您的及时回复。

# php - PHP数组的问题

> ID：490450
> 
> 赞同：0
> 
> 时间：2009-01-29T04:06:28.937
> 
> 标签：php, mysql, arrays, url, post

我正在通过 AJAX 将一些数据发送到 PHP 文件。这是关于过滤器选项的。无论如何，我是这样发送的：

```
filter[0][data][type]   string
filter[0][data][value] automobiles
filter[0][field] product

filter[1][data][type] numeric
filter[1][data][value] 6000
filter[1][field] price 
```

以上内容取自 FireBug 控制台。然后，在 PHP 中：

```
$filter = $_POST['filter'.$i];
if (is_array($filter)) {
    for ($i=0;$i<count($filter);$i++){
        switch($filter[$i]['data']['type']){
            case 'string' : 
                        // I'm doing my select from database based on that and so on 
```

所以，这个翻译将是：“从数据库中获取所有记录：*嗯，让我们检查过滤器*......我得到第一个过滤器类型，它是需要应用于 mysql 的“字符串”名为“产品”的列...所以我正在那里搜索“汽车”的值...但是我还没有完成，第二个过滤器是指数据库中“价格”列的数字过滤器。所以我正在获取它的值并将其添加到查询中。所以我最终会选择所有价格大于 6000 的汽车。

到现在为止还挺好。问题是我获取数据的方式已经改变，我不能再以这种格式发送我的数据了。新格式是一个如下所示的 URL：

```
filter[0][field]=prodct&filter[0][data][type]=string&filter[0][data][value]=automobiles&filter[1][field]=price&filter[1][data][type]=numeric&filter[1][data][value]=6000 
```

我可以通过“&”对此进行爆炸并最终得到一个数组......我可以做很多......问题是我不知道如何调整我的查询构建脚本以使用它一种接收到的数据..这样我就可以再次执行“switch($filter[$i]['data']['type']){”...

修改代码的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T04:28:08.533

[parse_str](http://www.php.net/parse_str) ($queryString); 然后一切正常。该方法将处理查询字符串并将变量导入全局命名空间（这可能很危险），因此可以使用它的第二种形式（在手册页上列出）：

```
$result = array();
parse_str($queryString, $result)
$filters = $result['filter'];

foreach($filters as $filter) {
// your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T04:22:33.723

我会将数据作为 JSON 对象发送过来，然后在 php 上将其转换回一个数组，就像您之前使用的那样。

在 php 中，您可以使用 json_decode 将 JSON 数据返回到数组中，并且您可以像以前一样继续使用其余代码。

# vb.net - 如何使用 vb.net 对访问 DB 表单中存在的 Activex 控件进行分叉？

> ID：490455
> 
> 赞同：1
> 
> 时间：2009-01-29T04:09:23.953
> 
> 标签：vb.net, ms-access

使用我的工具 (vb.net) 我可以计算访问数据库表单中存在的 Activex 控件。是否可以分叉控件？即我想单独计算activex控件。

例如，如果总共有 10 个 Activex 控件，其中 5 个是日历控件，5 个是复选框。然后我需要单独计算。

可能吗？请建议。

要计算 Activex 控件，我使用以下代码.....

**

```
oCtls = oForm.Controls
   intObjectCount = 0
   For Each oCtl In oCtls
      If oCtl.ControlType = 119 Then 'Activex Control'
        intObjectCount = intObjectCount + 1
      End If
    Next 
```

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-02T20:59:37.837

您的控件应该有一个 Class 属性。这应该为您提供足够的信息来确定它是什么类型。我知道这可用于 Access 本身的 Control 类，但我不确定 vb.net。

示例（需要一个案例陈述来解决所有这些问题）：

```
 If oCtl.Class = "AX2Controls.wsAX2Text" then
     iAX2Text = iAX2Text + 1
  End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-30T21:39:30.163

询问控件的类型：

```
If TypeOf oCtl Is System.Windows.Forms.CheckBox then
   CheckBoxCount +=1
end if 
```

# .net - 如何添加 NHibernate 配置文件以使用 NHibernate.Search？

> ID：490460
> 
> 赞同：3
> 
> 时间：2009-01-29T04:13:37.470
> 
> 标签：.net, nhibernate, nhibernate.search

我尝试使用从主干构建的 NHibernate.Search 并与 NHibernate 2.0.1 一起使用。当我将一些 NHibernate.Search 属性配置添加到配置文件中时：

```
<property name="hibernate.search.default.directory_provider">NHibernate.Search.Storage.RAMDirectoryProvider, NHibernate.Search</property>
<property name="hibernate.search.default.indexBase">~\index\</property> 
```

我得到一个无效的 System.Xml.Schema.XmlSchemaException：枚举约束失败。当我使用：

```
var configuration = new Configuration().Configure(); 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-06T01:59:00.273

确保您定义的 NHibernate.Search 属性包含在 nhs-configuration 块中，而不是标准 NHibernate 配置块中。您的 web.config 应如下所示：

```
<section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
<section name="nhs-configuration" type="NHibernate.Search.Cfg.ConfigurationSectionHandler, NHibernate.Search" />

<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <!-- nhibernate configuration block -->
</hibernate-configuration>

<nhs-configuration xmlns='urn:nhs-configuration-1.0'>
    <search-factory>
        <property name='hibernate.search.default.directory_provider'>NHibernate.Search.Store.FSDirectoryProvider, NHibernate.Search</property>

        <property name='hibernate.search.default.indexBase'>...</property>
    </search-factory>
</nhs-configuration> 
```

# mysql - 如何设计电影数据库？

> ID：490464
> 
> 赞同：22
> 
> 时间：2009-01-29T04:18:03.703
> 
> 标签：mysql, database-design, rdbms, relationship

我试图弄清楚这个令人难以置信的东西，他们称之为数据库设计，但没有取得多大成功，所以我将尝试用一个例子来说明我的问题。

我正在使用 MySQL，这是我的问题：

假设我想创建一个数据库来保存我的 DVD 收藏。我有以下信息要包括在内：

1.  电影片名
2.  演员
3.  运行时间
4.  类型
5.  描述
6.  年
7.  导向器

我想在这些之间建立关系以提高效率，但不知道如何。

这是我对数据库设计的想法：

**电影表 => 电影ID、电影标题、运行时间、描述**

**年表 => 年**

**流派表 => 流派**

**导演表 => 导演**

**演员表 => actor_name**

但是，我将如何在这些表之间创建关系？

另外，我为 Films 表创建了一个唯一 ID，主键会自动递增，我是否需要为每个表创建一个唯一 ID？

最后，如果我要通过 PHP 表单将新电影更新到数据库中，我将如何将所有这些数据插入（包括关系和所有？）

感谢您提供的任何帮助，基思

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-01-29T04:38:41.350

您必须区分属性和实体。实体是事物——通常是名词。属性更像是一段描述信息。在数据库行话中，实体 = 表，属性 = 字段/列。

对于某些事情有一个单独的表，让我们以director为例，称为规范化。虽然在某些情况下它可能很好，但在其他情况下可能没有必要（因为通常它会使查询更加复杂 - 你必须加入所有内容 - 而且速度较慢）。

在这种情况下，不需要年份表，因为除了年份本身之外，没有其他关于年份的属性可供您存储。最好将其反规范化并将年份存储在电影表本身中。

另一方面，导演则不同。也许您会想要存储导演的名字、姓氏、出生日期、死亡日期（如果适用）等。您显然不想在每次输入此人的电影时输入导演的出生日期导演，因此为董事设立一个单独的实体是有意义的。

即使您不想存储有关导演的所有这些信息（您只需要他们的名字），为它创建一个单独的表（并使用代理键 - 我将在一秒钟内完成）很有用，因为它防止印刷错误和重复 - 如果您的某人姓名拼写错误或输入不同（第一个、最后一个与最后一个、第一个），那么如果您尝试查找他们导演的其他电影，您将失败。

对表使用代理键（主键）通常是一个好主意。匹配整数比匹配字符串快得多。它还允许您自由更改名称，而不必担心存储在其他表中的外键（ID 保持不变，因此您无需执行任何操作）。

* * *

你真的可以把这个设计走得很远，而这一切都只是弄清楚你想要在其中存储什么。

例如，有些电影不是每部电影只有一个导演，而是有多个导演..所以电影和导演之间会有多对多的关系，所以你需要一张桌子，例如：

```
films_directors => **filmid, directorid** 
```

更进一步，有时导演也是演员，反之亦然。因此，您甚至可以拥有一个人表，而不是导演和演员表，并使用角色表连接该表。角色表将包含各种职位 - 例如，导演、制片人、明星、演员、抓手、编辑……它看起来更像：

```
films => **filmid**, title, otherstuff...
people => **personid**, name, ....
roles => **roleid**, role name, ....
film_people => **filmid, personid, roleid**
genre => **genreid**, name, ...
film_genre => **genreid, filmid** 
```

在film_people 表中可能还有一个role_details 字段，它可能包含取决于角色的额外信息（例如，演员正在扮演的角色的名称）。

我还将类型显示为多<>多关系，因为一部电影可能有多种类型。如果你不想要这个，那么而不是film_genre 表，电影将只包含一个genreid。

一旦设置好，就很容易查询和查找给定的人所做的一切，或者一个人作为导演所做的一切，或者曾经导演过电影的每个人，或者与特定电影相关的所有人。它可以一直持续下去。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-29T04:34:48.083

以下不是实际的 MySQL 代码。似乎您需要的更多是这里的概念开始。所以这里是你的数据库应该是什么样子的模型。

## 演员表

*   id（主键）
*   名
*   姓
*   等（您想存储在演员身上的任何其他列）

## 导演桌

*   ID
*   名
*   姓
*   等等

## 流派表

*   ID
*   姓名
*   等等

## 电影桌

*   ID
*   标题
*   描述
*   运行时间
*   发布日期
*   导演id——这是一个外键，指的是导演这部电影的导演的id（主键）
*   流派id——和导演id一样，这是指电影所属流派的id

## 演员-电影索引表

*   电影id——这是一个外键，指的是电影的id
*   actor id -- 这是一个外键，指的是电影中一个演员的 id。

对于电影中的每个演员，您将在演员电影索引中添加一行。因此，如果演员 5 和 13（这些演员的主键）出演了电影 4（同样是该电影的主键），那么您的索引中将有两行反映该事实： 一个电影 id = 4，演员 id = 5，另一个电影 id = 4，演员 id = 13。

希望有帮助。

此外，这假设每部电影都只有一位导演。如果您的库中的任何电影有两个导演（例如贫民窟的百万富翁），您需要从电影表中分离出导演 ID，并创建一个导演-电影索引，如上面的演员-电影索引。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-29T04:33:49.427

这些是我会使用的表：

```
films (_id_, title, runningtime, description)
genres (_id_, name)
people (_id_, name, birthdate, etc...)
roles (_roleid_, rolename)
filmgenres (_filmid_, _genreid_)
castandcrew (_filmid_, _roleid_, _personid_) 
```

与其有一张导演和演员桌，不如只有一张人桌。这也可以包括工作人员（如果您想跟踪第二个初级助理 Dolly Grip 是谁）。每部电影可以是任意数量的类型（例如喜剧和恐怖片）。另外，人们可以在每部电影中扮演任意数量的角色——那里有很多演员/导演。

Roles 表不一定表示演员正在扮演的角色，但它可以。如果你想得到细粒度的话，它可能是“导演”、“制片人”、“演员”……甚至是“卢克天行者”……我相信 IMDB 会这样做。

希望上面字段的名称应该暗示外键，并且我已经放置`_underscores_`了我要使用的主键。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-29T04:30:57.937

您的电影表还需要指向流派、导演和演员表的链接。由于演员至少是多对多的（一部电影会列出不止一个演员，一个演员会出现在不止一部电影中），你需要一个表格来链接它们。

```
Films Table => filmid, filmtitle, runningtime, description, genreid, directorid
Genre Table => genreid, genre
Director Table => directorid, director
Actors Table => actorid,actor_name
FilmActor link table => actorid, filmid (with a record linking each actor to each film) 
```

任何可能多对多的表都需要一个链接表。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-29T04:34:12.920

> 我已经为 Films 表创建了一个唯一 ID，主键会自动递增，我是否需要为每个表创建一个唯一 ID？

是的，每个表都*必须*有一个唯一的 ID。但是，这不一定是主要的自动递增键 - 它是使该特定实例唯一的任何因素。例如，对于电影，我认为通常是标题 + 发行年份 - 尽管您想与电影爱好者（领域专家）核实以确保这一点。自动增量是一种后备 - 基本上，当你真的没有其他东西可以唯一化时。

您可以使用自动增量键以便在连接等中使用，但无论如何您都应该对唯一性字段有唯一性约束。

至于实际设计，我建议如下：

```
Films => Primary Key(filmid), Unique Constraint(filmtitle, year), 
         runningtime, description, 
         Foreign Key(Genre), Foreign Key(DirectorId)

Genre Table => Primary Key(Genre)

Director Table => Primary Key(DirectorId), DirectorName

Actors Table => Primary Key(ActorId), ActorName

Films_Actors => Primary Key(Foreign Key(ActorId), Foreign Key(FilmId)) 
```

对于插入，坦率地说，它是一个 PITA。您需要以相反的顺序插入（这是自动增量键可以是更大的 PITA 的地方 - 如果您可以将出生日期或其他内容添加到 Actors 和 Director 表中，那么唯一约束可以使其更容易）。

因此，您将插入 Actor(s)、Director、Film，然后是 Films_Actors。理想情况下，所有这些都在一个事务中。另外，我假设 Genre 已经填写，并且是一个选择列表 - 所以不需要插入它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-12T05:17:47.090

[您可以在此处](https://code.google.com/p/imdbdumpimport/source/browse/trunk/+imdbdumpimport/imdb-import/db/schema.sql?r=19)下载 Imdb 架构。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-29T06:06:42.343

我知道您的问题已经得到解答，但是我想指出您：
[http ://www.imdb.com/interfaces](http://www.imdb.com/interfaces)

IMDB 提供其数据库的纯文本文件（减去主键）。一旦开始，您可能会发现这对填充您的数据库很有用，或者您可以在您的程序/网站中使用它来允许您简单地搜索电影标题以添加到您的“DVD Collection”中，并获得其余信息从这些中拉出来。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-29T08:30:50.463

有时演员是导演，反之亦然，也许你想要一个“人”表？

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-29T04:23:48.933

您实际上并不需要 YearTable，您所需要的只是电影表中的genre_id、director_id 和actor_id 列。

此外，您的流派、导演和演员表需要它们自己的唯一 ID。

**编辑：**当然，这是假设每部电影只有一种类型、导演*和演员*。情况可能并非如此。

要让许多演员属于许多电影，您将需要一个单独的关系表。你可以称它为“moviesActors”（或actorsMovies），每一行都会有一个actor_id 和一个movie_id 来表示**这个演员**在**这部电影**中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-29T04:24:55.530

每个表都应该有一个唯一的主键。

您应该[阅读](http://en.wikipedia.org/wiki/Third_normal_form)数据库[规范化](http://en.wikipedia.org/wiki/Boyce-Codd_normal_form)。

年表可能是不必要的。

例如，如果是发行年份，则可以将年份存储在电影中。

如果一部电影有多个导演，那么您将有一个单独的表，其中包含电影表和导演表的主键。对于任何多对一或多对多的外键约束也是如此。特别是，我相信这将适用于演员。

# mysql - 在运行时在 Ruby on Rails 中构建表

> ID：490473
> 
> 赞同：0
> 
> 时间：2009-01-29T04:26:32.280
> 
> 标签：mysql, ruby-on-rails, ruby, database

鉴于 rails 想要从模型名称推断表名称，我将如何在运行时创建多个使用相同模型的数据库表？我希望能够基于模型创建一个新对象，然后创建一个具有该对象将引用的唯一名称的新表。有没有人可以分享任何示例或建议来帮助我找到解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T04:31:23.130

这听起来像是一个架构问题——为什么会有相同模型的克隆而不是将它们全部存储在同一个表中？

在关系数据库模型中，关系是定义行或元组的内容，这意味着它是关于键的属性集。任何其他类似的属性集都属于同一关系（表）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-12-02T20:15:30.880

```
def self.create_table
    ActiveRecord::Schema.define do
      create_table :my_table_name do |t|
        #(define your columns just as you would in a migration file)
        t.string :my_string
      end
    end
end 
```

`define` [（请参阅此处](http://rubydoc.info/docs/rails/2.3.8/ActiveRecord/Schema#define-class_method)的方法文档。）（我在 ruby​​forums 遇到了这个答案。这[是线程](http://railsforum.com/viewtopic.php?id=818)。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T12:22:01.740

不确定您到底为什么要这样做，但有可能：

```
runtime_table_name = "random"

ActiveRecord::Migration.create_table(runtime_table_name) do
  # Table definition goes here
end

eval <<-EOS
  class #{runtime_table_name.classify} < YourBaseModel
    set_table_name #{runtime_table_name.inspect}
  end
EOS

runtime_model = runtime_table_name.classify.constantize
runtime_model.find(:all) 
```

您只需要替换`YourBaseModel`为您希望运行时模型的任何模型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T11:18:49.103

在寻找类似问题的解决方案时发现了这篇文章：我需要将用户生成的报告数据（数据网格）存储在数据库中，以便进一步编辑/导出/等。我决定在数据库中为每个报告创建一个新表并对其进行 ORM 包装。`eval`除了我认为与当前范围有关的部分外，内森的回答有所帮助。我试图在实例方法（`after_save`钩子）中定义一个新类，所以当我后来从另一个方法引用新常量时，我​​得到了一个`NameError`. 由于未知原因（错误的绑定？），明确传递`binding`给也没有帮助，所以我这样做了：`eval`

```
klass = Class.new(ActiveRecord::Base) do
  # class body goes here
end

Object.const_set(class_name, klass) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T10:40:26.030

我想创建表是可能的。使用 ActiveRecord::Base.connection.execute 执行的类似“CREATE TABLE newtab AS SELECT * FROM oldtab WHERE 0=1”的内容。

然后，您可能能够以某种方式执行`set_table_name`以将您的模型指向创建的表。

获得更多关于你认为自己有什么问题需要这种扭曲的解决方案的信息真的很有帮助。在 Rails 中很难做到的原因是你真的不需要这样做。我希望有一个更简单的替代架构。

# visual-studio-2008 - nunit 不是 vs2008 中可用的测试框架

> ID：490477
> 
> 赞同：2
> 
> 时间：2009-01-29T04:28:47.907
> 
> 标签：visual-studio-2008, nunit

我已经运行 Visual Studio 2008 Team Edition 一段时间了，需要开始使用 nunit。我加载了 nunit 2.4.8，但 nunit 没有显示为测试框架的选择。这是您在启动新项目时看到的选择，它询问您是否要设置测试项目以及您希望使用哪个框架（仅显示 Visual Studio 单元测试）。

编辑：我得到的唯一选择是与 VS2008 一起安装的“Visual Studio 单元测试”。我只在一个新的 MVC 项目中尝试过。我将尝试其他一些项目类型，看看我得到了哪些选择。尝试 web 项目和 winforms，单元测试在项目开始时不是一个选项；这对我来说有点道理。

更新：我在工具 > 选项的 nuit GUI 界面中找到了一个设置；从选项树 IDE 支持 > Visual Studio。有一个复选框可以启用 Visual Studio 支持。我认为这是一个本垒打，但在检查之后，重新启动应用程序、XP 等仍然是同样的问题，nunit 不是作为测试框架的选项。

我知道这应该像我描述的那样起作用，因为 Stephen Walther 在他与 nunit 的 Charlie Poole 的教程视频中使用了 nunit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T05:14:24.650

NUnit 目前不提供 Visual Studio 集成。但是，您可以自己创建以相同方式工作的模板。对于 NUnit，您可以找到根据这些说明创建的[说明](http://blogs.msdn.com/webdevtools/archive/2008/02/18/asp-net-mvc-test-framework-integration.aspx)和[模板。](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)还有其他人创建的模板，您只需要谷歌即可。

从评论到 Walther/Poole[视频](http://www.asp.net/Learn/mvc-videos/video-406.aspx)，这似乎是用于获取该演示的 NUnit 选项的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T06:14:12.983

我发现我这里的帖子是重复的：[Adding NUnit to the options for ASP.NET MVC test framework](https://stackoverflow.com/questions/21137/asp-net-mvc-and-nunit#23481)

公认的答案：[将 NUnit 添加到 ASP.NET MVC 测试框架的选项中](https://stackoverflow.com/questions/21137/asp-net-mvc-and-nunit#23481)

我必须说我很失望 Charlie Poole 没有发布一个适用于 nunit 和 vs2008 的模板。我真的不想构建自己的模板，并且对模板了解得不够多，无法知道一个模板对其他人的价值。

这篇文章的最后三个回复（感谢您的回复）说了同样的话，所以我不确定谁会得到接受的答案。 *笑*

根据 MVC 站点的评论，[这](http://www.asp.net/Learn/mvc-videos/video-406.aspx)可能是教程中使用的模板。像往常一样，主持人没有回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T05:06:40.420

[ReSharper](http://www.jetbrains.com)中提供了与 nUnit 的集成测试......（这只是该产品的优秀功能之一）我一直都在使用它。

显然它也可以与[TestDriven.NET](http://www.testdriven.net/)一起使用（我没有使用过这个产品）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T05:44:31.530

好吧.. 似乎是 MVC 工具的好东西.. 对我们其他人不可用。发现这个链接似乎可以做你想做的事......

## [ASP.NET MVC 测试框架集成](http://blogs.msdn.com/webdevtools/archive/2008/02/18/asp-net-mvc-test-framework-integration.aspx)

您需要弄乱注册表才能将 NUnit 注册为测试框架。请参见步骤 2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T05:53:47.767

可以在此处找到 Stephen Walther 使用的模板：[ASP.Net MVC 测试框架集成](http://blogs.msdn.com/webdevtools/archive/2008/03/06/asp-net-mvc-test-framework-integration-demo.aspx)。这个链接提供了工作演示，而 Gishu 的链接只提供了所有的注册表魔法。这些演示非常过时，在当前状态下实际上没有用，但您可以修复它们以满足您的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T04:57:05.090

这并不重要，因为您需要做的就是创建一个新的类库项目并添加对*nunit.framework.dll*的引用，您就可以开始了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-29T05:00:43.820

Nunit 不提供内置的 Visual Studio 集成。您可以尝试第三方解决方案。据我所知，您可以通过在普通类库中添加对 Nunit 库的引用来创建 Nunit 测试。在 Visual Studio 之外的单独测试运行程序中运行测试。

还有其他方法可以将 Team Foundation Server 与 Nunit 集成。例如，您可以使用自定义构建任务将 Nunit 测试集成到您的 TFS 构建过程中。

# c++ - 从常量函数返回引用

> ID：490487
> 
> 赞同：1
> 
> 时间：2009-01-29T04:36:17.050
> 
> 标签：c++, methods, constants

```
#include "iostream"
#include "vector"

class ABC {

};

class VecTest {

  std::vector<ABC> vec;

  public:

  std::vector<ABC> & getVec() const { //Here it errors out
      return vec;
  }

}; 
```

删除 const 修复它，不是 getVec 是一个常量方法的情况。那么为什么不允许这样做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-29T04:42:07.350

您可能应该做的是返回一个 const 引用。

const std::vector& getVec() const { return vec; }

这是不允许的，因为您说过 getVec 是一个 const 方法，这意味着该方法不应以任何方式更改**this**对象。返回非常量引用可能会允许更改其对象，因此编译器不允许这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T04:54:26.110

如果一个方法是 const ，那么它向编译器保证，对象的状态不能通过调用该方法来改变。

如果该方法返回对内部成员的引用，则该方法的用户可以通过该引用间接更改对象的状态。

所以实际上 const 方法不能返回引用（因为它允许间接更改对象的状态）。您可以做的是返回一个 const 引用。从而允许用户访问内部成员但维护成本合约。

例子：

```
class X
{
    int&       getX();       // get a reference to X
    int const& getX() const; // get a reference to X BUT the interface guarantees
                             // the object will not change state.
    private:
        int x;
}; 
```

另一种看待它的方式。
如果你有一个 const 对象。您**只**允许调用 const 方法。如果通过调用 const 方法可以检索对对象内部成员的引用，则可以更改其状态。这将违反原始对象的 const(ness)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T04:42:02.047

的返回类型`getVec()`需要是`const std::vector<ABC>&`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T05:10:56.793

补充一下已经说过的内容，当您创建一个 const 方法时，它获得的对象实例（`this`指针）本质上变成了 const。请记住，当您返回时`vec`，您是在隐式返回`this->vec`：

```
return this->vec; // it's a const std::vector<ABC> since "this" is const 
```

“常量”不能被带走——除非你明确地用`const_cast<>`.

```
// to illustrate what's happening when you're returning from the function
std::vector<ABC> &return = this->vec; // can't assign const to non-const! 
```

因此，您的返回类型也必须是 const：

```
const std::vector<ABC> &return = this->vec; // all is good 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T04:57:00.473

为了补充[Ray Hidayat](https://stackoverflow.com/questions/490487/returning-a-reference-from-a-constant-function#490496)所说的，一个 const 方法只能对类成员进行 const 访问。您正在尝试返回对 const 成员变量的非常量引用，因此它失败了。

如果您确实需要从 const 函数访问成员变量的可修改版本，则可以将变量声明为 mutable。不过，我不会推荐它。

# html - HTML INPUT 单选元素文本的 CSS 对齐方式

> ID：490501
> 
> 赞同：3
> 
> 时间：2009-01-29T04:49:19.397
> 
> 标签：html, css, alignment

我`input[type="radio"]`在固定宽度的块容器中有一个元素。元素的支持文本`<input/>`不能容纳在一行中，而是包含两行或更多行。例如：

```
div.leftBlock {
  position: relative;
  float: left;
  width: 275px;
}
```

```
<div class="leftBlock">
  <input type="radio" name="foo" value="bar" id="option" /> This is a rather long supporting text that does not fit in one line.
</div>
```

我如何能够设置`<input/>`元素（或其文本）的样式，以使文本落入的每一行都以与第一行相同的缩进级别开始？第一行文本必须与`<input/>`元素处于同一垂直水平。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T04:53:36.487

容器可以使用正向左`padding`和负向`text-indent`。

```
.leftBlock {
    padding-left: 20px;
    text-indent: -20px;
}
.leftBlock input {
    width: 20px;
} 
```

[这是一个例子](http://jsbin.com/edota)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T04:53:47.843

这是一个选项：

```
<style>
div.leftBlock {
    position:relative; 
    float:left; 
    width:275px;
} 

.radio {
    float: left;
}

.radio_label {
    display: block;
    margin-left: 1.5em;
}
</style>
<div class="leftBlock">
    <input type="radio" name="foo" value="bar" id="option" class="radio"/>
    <span class="radio_label">
    This is a rather long supporting text that does not fit in
    one line.
    </span>
</div> 
```

您将标签变成带有左边距的浮动块元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-31T07:22:31.873

您可以通过更改输入`top`中的`class`或属性来更改输入的垂直级别`id`，这里的代码是：

```
<style type="text/css">
    .main {
        height:50px;
        line-height:50px;
        font-size:25px;
        position:relative;
    }

    .rd {
        position:inherit;
        top:-2px;
    }
</style>

<div id="main">
    <input type="radio" id="rd" />
    This is a rather long supporting text that does not fit in one line.
</div> 
```

# ruby-on-rails - 将数据库表导出到 YAML 文件的最佳方法？

> ID：490507
> 
> 赞同：31
> 
> 时间：2009-01-29T04:52:04.617
> 
> 标签：ruby-on-rails, yaml

我的开发数据库中有一些数据，我想在我的测试环境中用作固定装置。Rails 2.x 中将数据库表导出到 YAML 夹具的最佳方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-05T02:39:54.950

为此有一个 rake 任务。如果需要，您可以指定 RAILS_ENV；默认是开发环境：

```
rake db:fixtures:dump
    # Create YAML test fixtures from data in an existing database. 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-29T04:59:12.747

我一直在使用 YamlDb 来保存数据库的状态。

使用以下命令安装它：

```
script/plugin install git://github.com/adamwiggins/yaml_db.git 
```

使用 rake 任务将 Rails 数据库的内容转储到 db/data.yml

```
rake db:data:dump 
```

使用 rake 任务将 db/data.yml 的内容加载到数据库中

```
rake db:data:load 
```

这是创作者主页：

[http://blog.heroku.com/archives/2007/11/23/yamldb_for_databaseindependent_data_dumps/](http://blog.heroku.com/archives/2007/11/23/yamldb_for_databaseindependent_data_dumps/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-04-16T05:45:07.353

该插件将添加您想要的功能。它是从 ActiveRecord 中提取的，因此默认情况下不再提供。

`script/plugin install http://github.com/topfunky/ar_fixtures`

然后运行：

`rake db:fixtures:dump MODEL=ModelName`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-03T05:24:17.850

对于 Rails 3，如果您想从数据库中转储 yaml 并将其用作固定装置，我使用以下代码：

```
module DbToFixture

  TEMP_FIXTURE_PATH = Rails.root.join("test", "new_fixtures")

  def fixturize(model)
    Dir.mkdir(TEMP_FIXTURE_PATH) unless File.exists?(TEMP_FIXTURE_PATH)
    fname = model.table_name
    file_path = TEMP_FIXTURE_PATH.join(fname)
    File.open(file_path, 'w') do |f|
      model.all.each do |m|
        f.write(m.to_yaml)
      end
    end
  end

end 
```

我只是从控制台运行它

```
require './lib/db_to_fixture'
include DbToFixture
fixturize ModelName 
```

我无法让 ar_fixtures 与 Rails 3 一起工作（虽然没有很努力地尝试）。Yaml db 非常适合转储和保存 db，但其格式与固定装置不兼容。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-02T19:45:54.067

[Iron Fixture Extractor](https://github.com/joegoggins/iron_fixture_extractor)正是为此目的而建造的。它特别适用于您希望为不同的测试场景使用不同的夹具集（而不是为所有测试使用所有夹具）的情况。它提供了用于提取、加载、重建夹具、截断表或从夹具 yaml 文件中获取特定哈希的功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-07T14:48:20.353

`rake db:fixtures:dump`

已更改为

`rake db:extract_fixtures`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-19T17:22:40.703

非常简单的 gem 将从现有数据库创建 yaml 固定装置......

[github.com/vanboom/yaml_dump](https://github.com/vanboom/yaml_dump)

适用于 Rails 4。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-11T18:47:49.320

这是一个 rake 任务，它将完全做到这一点（在 Rails 3.2.8 中测试）：

```
namespace :db do
    task :extract_fixtures => :environment do
      sql  = 'SELECT * FROM "%s"'
      skip_tables = ["schema_migrations"]
      ActiveRecord::Base.establish_connection
      if (not ENV['TABLES'])
        tables = ActiveRecord::Base.connection.tables - skip_tables
      else
        tables = ENV['TABLES'].split(/, */)
      end
      if (not ENV['OUTPUT_DIR'])
        output_dir="#{Rails.root}/test/fixtures"
      else
        output_dir = ENV['OUTPUT_DIR'].sub(/\/$/, '')
      end
      (tables).each do |table_name|
        i = "000"
        File.open("#{output_dir}/#{table_name}.yml", 'w') do |file|
          data = ActiveRecord::Base.connection.select_all(sql % table_name.upcase)
          file.write data.inject({}) { |hash, record|
            hash["#{table_name}_#{i.succ!}"] = record
            hash
          }.to_yaml
          puts "wrote #{table_name} to #{output_dir}/"
        end
      end
    end
end 
```

来源：[http ://sachchua.com/blog/2011/05/rails-exporting-data-specific-tables-fixtures/](http://sachachua.com/blog/2011/05/rails-exporting-data-specific-tables-fixtures/)

注意：我必须对博客代码进行一些更改，以使其更加跨数据库兼容并在 Rails 3.2 中工作

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-03T14:59:40.050

```
 > rails c
 irb> puts Modelname.all.to_yaml 
```

然后将其复制并粘贴到文件中并对其进行编辑以匹配灯具的期望。

这是体力劳动，但如果您只需要一次可能是最快的方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-04T11:34:49.613

对于在 Rails 3 中转储 rspec/cucumber 测试装置，这是我找到的最佳答案： [将 db 转储到 Rails 中的 yml 装置的标准方法是什么？](https://stackoverflow.com/questions/1325865/what-is-the-standard-way-to-dump-db-to-yml-fixtures-in-rails)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-24T11:42:57.697

我在 Rails 6 中使用了这个：

```
# How to run:
# rake fixtures:import_db_table[my_table]
namespace :fixtures do
  desc 'Convert development table into Rails test fixtures'
  task :import_db_table, [:table_name] => :environment do |_task, args|
    begin
      table_name = args[:table_name]
      raise "Missing table name" if table_name.blank?
      conter = '000'
      file_path = "#{Rails.root}/spec/fixtures/#{table_name}.yml"
      ActiveRecord::Base.establish_connection
      File.open(file_path, 'w') do |file|
        rows = ActiveRecord::Base.connection.select_all("SELECT * FROM #{table_name}")
        data = rows.each_with_object({}) do |record, hash|
          suffix = record['id'].blank? ? conter.succ! : record['id']
          hash["#{table_name.singularize}_#{suffix}"] = record
        end
        puts "Writing table '#{table_name}' to '#{file_path}'"
        file.write(data.to_yaml)
      end
    ensure
      ActiveRecord::Base.connection.close if ActiveRecord::Base.connection
    end
  end
end 
```

[从此处](https://yizeng.me/2017/07/16/generate-rails-test-fixtures-yaml-from-database-dump/)提取（导入所有表）。

# javascript - Javascript 或 jQuery 中的 Left() 函数

> ID：490508
> 
> 赞同：21
> 
> 时间：2009-01-29T04:52:21.073
> 
> 标签：javascript, jquery

我只是想要一种非常方便的方法来从 Javascript 中的字符串中提取数字，并且我正在考虑使用 jQuery，但我更喜欢被证明是最简单的方法。我已经使用 jQuery 请求了 CSS 块的“left”属性，如下所示：

```
var stuff = $('#block').css("left") 
```

“东西”的结果是

```
1008px 
```

我只想摆脱“px”，因为我需要对其进行 parseInt。最好的方法是什么？如果 Javascript 有一个 left() 函数，这将非常简单。谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-01-29T04:54:30.180

只需做一个`parseInt("1008px", 10)`，它会为你忽略'px'。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-01-29T13:06:34.410

要回答您的其他问题，您可以`left()`向 JavaScript 的内置`String` `prototype`类添加一个函数，以便所有其他字符串都继承它：

```
String.prototype.left = function(n) {
    return this.substring(0, n);
} 
```

一旦你把它包括在内，你就可以说：

```
var num = "1008px".left(4); 
```

我在一个基本的 JavaScript 文件中为这类事情添加了类似`trim`和的助手。`capitalize`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-29T13:54:57.917

$('#block').offset().left 包含作为整数的实际左侧位置值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T13:44:24.507

Left() 在这里几乎没有用，因为您首先必须计算偏移量。但是，您可以使用正则表达式来提取数字或删除非法字符：

```
var value = "1080px";
var num = value.replace(/[^\d]+/g, '');
// or
var num = value.replace(/\D+/g, '');
// or
var num = value.match(/\d+/)[0]; 
```

也就是说，如果 parseInt() 对你来说还不够...... :)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-03-12T18:03:56.090

如果您想在没有**'px' 的**情况下使用该号码，请尝试：

`$('#block').position().left`

这在 JQuery 上是最简单的）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-29T04:54:49.820

```
parseInt(stuff, 10); 
```

编辑为使用基数注释。

> parseInt(stuff,10); //不要忘记基数 – 2009 年 1 月 29 日 11:32

# mysql - 如何在 MySQL 中重命名模式

> ID：490515
> 
> 赞同：35
> 
> 时间：2009-01-29T04:56:07.090
> 
> 标签：mysql

嗨，我正在使用 mysql 5.0.x

如何重命名架构？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2009-09-16T09:44:22.487

不要使用重命名数据库！！！

早期的 5.1 版本有此命令，但由于它会损坏数据（[参考](http://dev.mysql.com/doc/refman/5.1/en/rename-database.html)），因此已将其删除。

目前唯一的办法是

```
mysqladmin create new_db_name
mysqldump db_name | mysql new_db_name 
```

[如此处](https://stackoverflow.com/questions/675289)所指

编辑：显然，一旦修复，这个答案就会过时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-16T14:09:53.380

这很简单。将数据库导出到文件，然后在工作台中再次导入，您可以在那里指定数据库的名称。

在工作台中转到服务器选项卡，选择数据导出。选择要重命名的数据库，选择导出到自包含文件，然后为文件命名。确保您选择了转储结构和数据。点击开始导出。

在工作台中转到服务器选项卡，选择数据导入。选择从自包含文件导入。选择您创建的文件。在标题为要导入的默认架构的部分中单击新选项。输入数据库的新名称，然后从下拉列表中选择它。点击开始导入。

瞧，具有您想要的名称的新数据库以及旧数据库中的所有表和数据。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2009-01-29T05:00:11.120

在 5.0 下，您需要转储数据库并将其重新加载到具有新名称的新数据库中。如果升级到 5.1，则可以查找并使用 RENAME DATABASE 命令。

# 64-bit - 以兼容模式运行的 64 位系统中的虚拟地址空间

> ID：490520
> 
> 赞同：9
> 
> 时间：2009-01-29T04:58:32.763
> 
> 标签：64-bit, compatibility, virtual-address-space

我看到在 64 位 Windows 操作系统上，可用的用户虚拟地址空间是 8 terra 字节。但是，如果我们正在执行的程序在 32 位兼容模式下运行，那么还有这么多的用户空间可用吗？还是它的行为类似于普通的 32 位操作系统并且只提供 2GB 的用户地址空间？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-29T06:13:38.507

Microsoft 有一张图表显示了各种限制：[Windows 版本的内存限制](http://msdn.microsoft.com/en-us/library/aa366778.aspx)

总结一下用户模式的虚拟地址空间：

*   32 位 Windows：
    *   32位进程：默认2GB；3 GB`/LARGEADDRESSAWARE:YES`和 4GT
*   64 位 Windows（x64 架构）：
    *   32位进程：默认2GB；4 GB`/LARGEADDRESSAWARE:YES`
    *   64位进程：默认8 TB；2 GB`/LARGEADDRESSAWARE:NO`

4GT 是 4 GB 调优：

*   XP：`/3GB`boot.ini 开关
*   远景：`bcdedit /set increaseuserva 3072`

Mark Russinovich 发表了一篇博文，解释了许多这些限制：[推动 Windows 的限制：虚拟内存](http://blogs.technet.com/markrussinovich/archive/2008/11/17/3155406.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T05:01:52.257

当您的进程作为 32 位进程运行时，它只会看到 4GB 的虚拟地址空间。它将无法解决更高的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T05:07:48.860

如果您的程序在 Wow64 子系统上作为 32 位进程运行，它将看到与在实际 32 位操作系统上看到的完全相同的地址空间。如果没有特殊选项，32 位进程将有 2GB 可用内存。

如果使用[LargeAddressAware](http://msdn.microsoft.com/en-us/library/wz223b1z(VS.80).aspx)选项，唯一的区别是可用内存。在正常的 32 位进程中，这允许 3GB 的可寻址内存。在 Wow64 进程中，它最多可以看到 4GB（[来源](http://msdn.microsoft.com/en-us/library/aa366778.aspx)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T05:48:13.020

我原来的答案很糟糕。这是一个链接，可以很好地解释 JaredPar 所说的内容。

[http://msdn.microsoft.com/en-us/library/ms189334.aspx](http://msdn.microsoft.com/en-us/library/ms189334.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T07:15:06.170

就硬件而言，当您在兼容模式下运行时（即设置了 IA32_EFER.LMA 并且在 CS 的段描述符中清除了 L 位），这些段的行为类似于 32 位段。那是：

*   段基数限制为 32 位。
*   段限制也限制为 32 位（使用 G 位）。

这有效地将您限制为 4GB 的虚拟地址。我不熟悉操作系统如何在各种模式下对虚拟内存进行分区，但这*是*硬件限制。（对不起...我是硬件专家，不是操作系统专家）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-12T13:45:35.267

需要注意的是，在带有 64 位机器/操作系统的 IIS 6.0+ 上运行 32 位进程，一个进程最多可以寻址 4GB 内存。

# svn - 从 SVN 恢复已删除文件的正确方法是什么？

> ID：490522
> 
> 赞同：121
> 
> 时间：2009-01-29T04:59:00.827
> 
> 标签：svn, tortoisesvn, restore

我从回购中删除了一个文件，现在想把它放回去。我能想到的最好的办法是：

*   更新到删除前的修订
*   将文件复制到别处
*   更新到头部
*   将文件复制回来
*   添加它们
*   犯罪

那只是闻起来很糟糕，它失去了所有的历史。必须有更好的方法来做到这一点。我已经查看了[The SVN Book](http://svnbook.red-bean.com/)但没有找到任何东西，现在正在查看 SVN 标签列表。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2009-08-05T04:42:34.480

按照 Sean Bright 的建议进行 svn 合并的问题在于，它重新引入了与删除相同的修订版中所做的其他更改。svn 复制是一种更有针对性的操作，只会影响已删除的文件。

使用 Tortoise SVN，您可以通过 svn 副本恢复已从工作副本目录和以后的 SVN 修订版中删除的文件，如下所示：

*   浏览到之前包含该文件的工作副本文件夹。
*   右键单击资源管理器中的文件夹，转到 TortoiseSVN -> 显示日志。
*   右键单击删除文件的修订之前的修订号，然后选择“浏览存储库”。
*   右键单击已删除的文件并选择“复制到工作副本...”并保存。

删除的文件现在将位于工作副本文件夹中。要将其重新添加回 SVN，请右键单击恢复的文件并选择 SVN 提交。

注意：此方法将保留恢复文件的先前历史记录，但是要查看 TortoiseSVN 日志中的先前历史记录，您需要确保在“日志消息”对话框中未选中“复制/重命名停止”。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2009-01-29T05:01:59.183

使用 svn 合并：

```
svn merge -c -[rev num that deleted the file] http://<path to repository> 
```

举个例子：

```
svn merge -c -12345 https://svn.mysite.com/svn/repo/project/trunk
             ^ The negative is important 
```

对于 TortoiseSVN（我认为...）

*   在资源管理器中右键单击，转到 TortoiseSVN -> 合并...
*   确保选中“合并一系列修订”，单击“下一步”
*   在“要合并的修订范围”文本框中，指定删除文件的修订
*   勾选“反向合并”复选框，点击下一步
*   点击合并

然而，这是完全未经测试的。

* * *

*由 OP 编辑*​​：这适用于我的 TortoiseSVN 版本（没有下一个按钮的旧版本）

*   转到删除内容的文件夹
*   在资源管理器中右键单击，转到 TortoiseSVN -> 合并...
*   在**From**部分输入执行删除的修订
*   在**To**部分输入删除前的修订。
*   点击“合并”
*   犯罪

*诀窍是向后*合并。*感谢 sean.bright*为我指明了正确的方向！

* * *

**编辑：**我们使用不同的版本。我描述的方法与我的 TortoiseSVN 版本完美配合。

另外值得注意的是，如果您正在反向合并的提交中有多个更改，那么在您提交之前完成合并后，您将希望恢复这些其他更改。如果您不这样做，这些额外的更改也将被撤销。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2009-01-29T18:41:25.203

为了完整起见，如果您知道要查找什么，这就是您可以在 svn 书中找到的内容。这是你已经发现的：

[撤消更改](http://svnbook.red-bean.com/en/1.1/ch04s04.html#svn-ch-4-sect-4.2)

[复活已删除的项目](http://svnbook.red-bean.com/en/1.1/ch04s04.html#svn-ch-4-sect-4.3)

同样的事情，来自这本书的更新（和详细）版本：

[撤消更改](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)

[复活已删除的项目](http://svnbook.red-bean.com/en/1.5/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.resurrect)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2010-10-12T09:53:16.397

使用 Tortoise SVN 复制功能恢复提交的更改：

1.  右键单击包含已删除文件/文件夹的父文件夹
2.  选择“显示日志”
3.  选择并右键单击完成更改/删除之前的版本
4.  选择“浏览存储库”
5.  选择需要恢复的文件/文件夹并右键单击
6.  选择“复制到”，这会将文件/文件夹复制到头版本

希望有帮助

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-09-17T10:59:07.617

我似乎总是使用 svn copy 作为服务器操作，所以不确定它是否适用于两个工作路径。

这是将已删除文件恢复到项目的本地工作副本的示例：

```
svn copy https://repos/project/modules/module.js@3502 modules/module.js 
```

在项目目录中时。这也适用于恢复整个目录。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-29T05:13:14.247

如果您使用的是 Tortoise SVN，您应该能够将更改从该修订版还原到您的工作副本（有效地执行反向合并），然后再次提交以重新添加文件。要遵循的步骤是：

1.  浏览到您删除文件的工作副本中的文件夹。
2.  转到回购浏览器。
3.  浏览到您删除文件的修订。
4.  在更改列表中，找到您删除的文件。
5.  右键单击该文件并转到“还原此修订版的更改”。
6.  这会将文件恢复到您的工作副本，并保留历史记录。
7.  提交文件以将其添加回您的存储库。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-09-09T21:18:54.647

我能够恢复文件而不丢失修订历史的最简单方法是使用**SVN copy**，对我来说，上面的合并示例似乎是实现相同目标的更复杂的方法。当您只想恢复修订时，为什么需要合并？

我在这种情况下使用以下内容，效果很好。

```
svn copy -m 'restoring file' -r <rev_number_file_to_restore> http://from/file.cs http://pathTo/file.cs 
```

我似乎总是`svn copy`用作服务器操作，所以不确定它是否适用于两个工作路径。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-29T05:09:11.197

使用[乌龟 SVN](http://tortoisesvn.net/node/4)：

> 如果您尚未提交更改，您可以在删除文件或目录的父文件夹上执行还原。
> 
> 如果您已经提交了删除的文件，那么您可以使用存储库浏览器，更改到文件仍然存在的版本，然后使用上下文菜单中的命令复制到...。输入工作副本的路径作为目标，删除的文件将从存储库复制到您的工作副本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-29T05:02:37.747

您应该能够只签出要恢复的一个文件。尝试类似文件存在的最后一个修订版在`svn co svn://your_repos/path/to/file/you/want/to/restore@rev`哪里。`rev`

不久前我必须这样做，如果我没记错的话，使用该`-r`选项`svn`不起作用；我不得不使用`:rev`语法。（虽然我可能记得倒过来...）

# hibernate - 在 websphere 6.1 中预测试现有池连接和预测试新连接有什么区别

> ID：490547
> 
> 赞同：0
> 
> 时间：2009-01-29T05:12:31.143
> 
> 标签：hibernate, websphere, connection-pooling

在 websphere 6.1 中预测试现有池连接和预测试新连接之间有什么区别..哪个选项是最好的？

我们可以启用这两个选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-14T20:16:15.633

您可以同时启用这两个选项。

预测试现有的池连接更有用，因为它处理了已打开连接池中的过时连接的常见问题。如果预测试失败，则丢弃连接并建立新连接。“活动”连接未经预先测试，因此对性能的影响是有限的。否则，您需要按以下方式处理 StaleConnectionExceptions：

[http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/rdat_stalconexp.html](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/rdat_stalconexp.html)

预测试新连接的用处不大，但如果您想获得“预警系统”，可以启用它。

# c# - 在 .NET Windows 应用程序的组合框中添加颜色

> ID：490550
> 
> 赞同：0
> 
> 时间：2009-01-29T05:15:06.113
> 
> 标签：c#

如何将“颜色”（不是颜色名称，颜色本身）添加为 C# 组合框中的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T05:19:27.027

您必须使用所有者绘制的组合框。 [CodeProject](http://www.codeproject.com/)上的[这篇文章](http://www.codeproject.com/KB/combobox/ownerdrawncombobox.aspx)是一个很好的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T13:01:14.000

如果您需要在将具有颜色类型属性的对象放置在 PropertyGrid 中时提供的颜色选择器，那么[这个人已经做到了，](http://www.vbinfozine.com/a_colorpicker.shtml)但是他们将其作为带有下拉菜单的按钮来完成。

如果你真的希望它是一个 ComboBox，你不应该觉得我应该想的那么麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-03T01:56:59.890

这是我用来将颜色列表加载到组合供用户选择的代码：

```
List<string> colorslist = new List<string>();

string[] allColors = Enum.GetNames(typeof(System.Drawing.KnownColor));
string[] systemEnvironmentColors = new string[(typeof(System.Drawing.SystemColors)).GetProperties().Length];

int index = 0;

foreach (MemberInfo member in (typeof(System.Drawing.SystemColors)).GetProperties())
{
    systemEnvironmentColors[index++] = member.Name;
}

foreach (string color in allColors)
{
    if (Array.IndexOf(systemEnvironmentColors, color) < 0)
    {
                    colorslist .Add(color);
    } 
}

cboColors.DataSource = colorslist; 
```

# asp.net - 向世界开放 ASP.net 开发服务器

> ID：490552
> 
> 赞同：1
> 
> 时间：2009-01-29T05:16:21.620
> 
> 标签：asp.net

我正在使用 Visual Studio 中的内置 Web 服务器来测试一些页面，但我希望能够从其他机器连接到它以测试不同平台上的浏览器。我想知道是否可以将该服务器配置为侦听外部接口，或者我是否必须将其交给 IIS。我已经关闭了windows防火墙，所以这应该不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T05:22:09.157

不使用默认的 ASP.NET 开发 Web 服务器。如果您不想使用 IIS，您可能会使用[Cassini 。](http://www.asp.net/Downloads/archived/cassini/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T05:28:16.430

我会使用 SVN 并设置一个测试服务器来自动在测试服务器上更新 SVN。

我过去所做的是设置一个 SVN 存储库并将我的站点添加到其中。并在测试服务器上设置存储库的运行副本，并让计划任务每​​ 5 分钟自动更新一次。这很好用，因为我不必担心 ftping 或任何事情。效果很好，因为我使用 VisualSVN 并且评论我的更改很容易。

# math - 将极坐标转换为直角坐标

> ID：490556
> 
> 赞同：13
> 
> 时间：2009-01-29T05:16:57.810
> 
> 标签：math, trigonometry

## 以度为单位的角度转换为点

如何将**角度** *（以度/弧度为单位）*转换为距中心点固定距离的**点（X，Y）。**

就像一个围绕中心点旋转的点。

正好**相反**，`atan2`计算点 y/x 的角度（以弧度为单位）。

* * *

***注意：****我保留了原标题，因为这是不明白的人会搜索的内容！*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-01-29T05:19:05.047

设固定距离为 D，则 X = D * cos(A) 和 Y = D * sin(A)，其中 A 是角度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T05:55:53.973

如果中心点 (Xcp, Ycp) 不是原点，您还需要将其坐标添加到 (X,Y) 即 X = Xcp + D * cos(A) 和 Y = Ycp + D * sin(A)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T05:20:00.863

PolyThinker 所说的。

此外，如果您需要与原点的距离，它是`sqrt(x^2 + y^2)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T05:19:57.353

```
t = angle
r = radius (fixed distance)

x = rcost
y = rsint 
```

# java - 迭代 Map 时允许对 Map 进行哪些基本操作？

> ID：490557
> 
> 赞同：11
> 
> 时间：2009-01-29T05:16:59.027
> 
> 标签：java, iterator

假设我正在迭代 Java 中的 Map ......我不清楚在迭代它的过程中我可以对该 Map 做什么。我想我对迭代器接口删除方法的 Javadoc 中的这个警告很困惑：

> [...]如果在迭代过程中以任何方式而不是通过调用此方法来修改底层集合，则迭代器的行为是未指定的。

我确信我可以毫无问题地调用 remove 方法。但是在遍历 Map 集合时，我可以：

1.  使用 Map 类 put 方法更改与键关联的值（使用现有键放置）？

2.  使用 Map 类 put 方法添加新条目（使用新键放置）？

3.  使用 Map 类 remove 方法删除条目？

我的猜测是我可能可以安全地执行 #1（放入现有密钥），但不能安全地执行 #2 或 #3。

提前感谢您对此的任何澄清。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-29T07:46:29.257

您可以使用`Iterator.remove()`，如果使用（Map.Entry 的）entrySet 迭代器，您可以使用`Map.Entry.setValue()`. 其他任何事情和所有赌注都被取消 - 您不应该直接更改地图，并且某些地图不允许上述任何一种或两种方法。

具体来说，您的 (1)、(2) 和 (3) 是**不允许**的。

您*可能*会通过`Map`对象设置现有键的值，但`Set.iterator()`文档明确排除了这一点，并且它将是特定于实现的：

> 如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作或通过迭代器返回的映射条目上的 setValue 操作除外），则迭代的**结果是 undefined**。（重点补充）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T05:59:22.313

如果您查看 HashMap 类，您会看到一个名为“modCount”的字段。这就是地图在迭代期间知道何时被修改的方式。任何在迭代时增加 modCount 的方法都会导致它抛出 ConcurrentModificationException。

也就是说，如果键已经存在，您可以将值放入映射中，从而使用新值有效地更新条目：

```
 Map<String, Object> test = new HashMap<String, Object>();
 test.put("test", 1);

 for(String key : test.keySet())
 {
     test.put(key, 2); // this works!
 }

 System.out.println(test); // will print "test->2" 
```

当您询问是否可以“安全地”执行这些操作时，您不必太担心，因为 HashMap 旨在在遇到此类问题时立即抛出 ConcurrentModificationException。这些操作会很快失败；他们不会让地图处于糟糕的状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T07:58:18.140

没有全球性的答案。地图界面让用户选择。不幸的是，我认为 jdk 中的所有实现都使用了*快速失败的*实现（这是快速失败的定义，如[HashMap Javadoc](http://java.sun.com/javase/6/docs/api/java/util/HashMap.html)中所述）：

> 所有此类的“集合视图方法”返回的迭代器都是快速失败的：如果在创建迭代器后的任何时间对映射进行结构修改，除了通过迭代器自己的 remove 方法之外，迭代器将抛出 ConcurrentModificationException . 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T05:22:20.703

一般来说，如果你想在迭代 Map 时改变它，你应该使用迭代器的方法之一。我还没有实际测试过#1 是否会起作用，但其他的肯定不会。

# asp.net-mvc - 在 ASP.NET MVC RC 中使用 NHaml 的问题

> ID：490564
> 
> 赞同：0
> 
> 时间：2009-01-29T05:22:03.340
> 
> 标签：asp.net-mvc

我在 ASP.NET MVC Beta 中使用 NHaml 没有问题，但是在升级到 ASP.NET MVC RC 时出现可疑错误

> 来自程序集“MvcContrib.NHamlViewEngine，版本=0.0.1.175，文化=中性，PublicKeyToken=null”的“MvcContrib.NHamlViewEngine.NHamlViewFactory”类型中的方法“FindPartialView”没有实现。

我用反射器检查过，方法就在那里。其他可能有帮助的是，当我刷新上面的错误时，我得到一个 404。如果我重建，我第一次得到那个错误，之后是 404 错误。同样，该站点在测试版中仍保持不变。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T06:39:22.823

我不确定如何修复您的错误，但 FindPartialView 方法现在需要一个额外的参数 useCache，它是一个布尔值。我对 NHaml 视图引擎了解不多，但似乎这个错误导致了您的问题，并且需要为此更新 MvcContrib。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T02:35:31.647

您需要确保您拥有 MVCContrib 和 NHaml 的 RC1 兼容版本

对于 Nhaml
我们还没有使用 RC1 完成“发布版本”，因此您需要从源代码构建。在此（1 月 30 日）之后的任何版本都应该是好的
[http://code.google.com/p/nhaml/source/detail?r=101](http://code.google.com/p/nhaml/source/detail?r=101)

对于 MVC
尝试最新版本（2 月 4 日）
[http://www.codeplex.com/MVCContrib/Release/ProjectReleases.aspx?ReleaseId=22732](http://www.codeplex.com/MVCContrib/Release/ProjectReleases.aspx?ReleaseId=22732)

# .net - 有关如何将 Team Foundation Server 用于源代码管理的视频

> ID：490567
> 
> 赞同：0
> 
> 时间：2009-01-29T05:22:09.657
> 
> 标签：.net, tfs, version-control

有关于如何使用 Team Foundation Server 作为源代码控制存储库的在线视频吗？我需要一些快速的东西让我开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T05:46:44.507

[DimeCasts.Net](http://www.dimecasts.net/Casts/ByTag/TFS)上有一对夫妇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T05:23:56.517

也许看看这些？

[http://teamsystemrocks.com/tutorials/](http://teamsystemrocks.com/tutorials/)

# design-patterns - 属性模式的优缺点是什么？

> ID：490570
> 
> 赞同：10
> 
> 时间：2009-01-29T05:22:28.050
> 
> 标签：design-patterns

Steve Yegge在他的[博客文章中描述了](http://steve-yegge.blogspot.com/2008/10/universal-design-pattern.html#Property)**属性模式**。

对于使用 C# 或 Java 等静态语言的人来说，这种方法的优缺点是什么？你想在什么样的项目中使用属性模式，你想在什么时候避免它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-03-16T15:41:58.587

我最近一直在深入研究这种模式，我可以告诉你，找到有关它的信息非常困难。Yegge 将其称为原型或属性，但这两者都被过度使用，并且被称为另外两种不同的模式。有些人将像 Yegge 提出的系统称为“stringly [sic] typed”，因此这是另一种研究途径。

这是一个非常巧妙的想法，在某些应用程序中有很多优点，而在其他应用程序中也有很多缺点。你所获得的本质上是一种在运行时构建“类型”的非常灵活的方法，但是你失去了很多语言的强类型检查来做到这一点。实现它的最简单方法是作为`Dictionary<string,string>`. 然后，您必须使用强制转换将您的字符串值作为实际值返回。保持这种设计易于管理的关键是，如果可以避免的话，永远不要在代码中直接引用属性。`theProtoObject["owner"] = "protoman"`如果该插槽的“规范”名称发生变化，类似的东西会杀死你。它还可能导致诸如 JavaScript（它在下面使用这种模式作为它的对象模型）之类的问题，如果您拼错键名，您将添加一个新插槽。

您可能会在生产系统中进行的一个很可能的升级是对值使用某种专门的类型，并为键使用某种“重键”，这样您就可以获得一些额外的打字和安全信息模型。

我见过一些使用它的应用程序。我最近在查找我所在行业的开源代码时遇到了一个令人惊讶的例子：保险报价。 [OpenQuote](http://openquote.appliedindustriallogic.com/)是一个非常灵活的项目，可以对任何一般类型的保险进行报价。它是用 Java 编写的，但如果您了解 C#，它应该读得很好。它的核心是`Type`包含以下代码的对象：

```
/** A dynamic collection of attributes describing type */
private List<Attribute> attribute = new ArrayList<Attribute>(); 
```

什么是`Attribute`？这：

```
* An attribute is defined as "One of numerous aspects, as of a subject". Generally, another
* type will own a (composite) collection of Attributes which help describe it. 
```

所以基本上`Attribute`是一种键值对，包含一个唯一的字符串 ID（字段名称）和一个字符串值，以及一个类型的枚举，结合一些正则表达式来验证和处理这些值。通过这种方式，它可以存储多种类型的值，并将它们转换回 java 值，同时提供一点安全性。

然后它继续在该核心之上构建许多特定于领域的模型类型。因此，保险单对象可以被视为具有灵活、可扩展的利益列表，可以在运行时添加、删除或修改。每个好处也可以具有扩展或减少的属性。

因此，这是使用模式的一个示例，也是一个不错的用例：保险单可以非常灵活，在承保人的心血来潮直到销售的那一刻，所以一个高度灵活的模型非常适合它。

缺点几乎就是 Yegge 所概述的。性能可能很差，尤其是在幼稚的实现中。类型检查和安全性受到打击，并且您的对象更难以推理，因为您不确定它们具有哪些属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T05:32:19.387

属性模式特别有用（或者，它一直对我有用），当您想要制作对象的原型或有一个开发结构，这在某种程度上迫使您对 API/接口进行迭代部署。

如果您从对象的某些属性的想法开始，那么您就可以制作它们。后来你发现（并且你已经预料到这个发现......）你对主题领域的理解不够充分，你根据第一个对象的原型制作了一个新的对象设计/行为。等等。关于该主题的 wiki 页面结合静态类型语言对该主题进行了很好的描述，但如果您对原型开发非常认真，我建议您研究 JavaScript 或 Lua。原型的属性在静态类型语言中是不可变的，这个事实最终会让你陷入困境。

编辑：哦，我看到你链接到一个关于这个主题的优秀帖子。Yegges 对这个主题的使用/解释当然让我自己的相形见绌。请通读几遍，在像 java 这样的语言中使用属性模式的优点/含义对您来说应该非常清楚。

Edit.2：维基百科文章的链接：[http ://en.wikipedia.org/wiki/Prototype_pattern](http://en.wikipedia.org/wiki/Prototype_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T05:39:41.633

对于使用 Java 的人，当我阅读这篇文章时，我会说您不能在*任何*项目上使用属性模式，因为引用：

*Java 对属性模式的支持基本上为零。*

出于同样的原因，对于 C# 也是如此。当我听到那个声明时，我感到有点安慰，因为我肯定没有找到任何方法将它们组合在一起。

所以我不确定我是否理解你的问题。但是感谢您的链接 - 仅针对这个问题提出问题。现在我理解了一些我半直觉的东西。

# hibernate - 如何将环境细节移到 EAR 之外

> ID：490580
> 
> 赞同：3
> 
> 时间：2009-01-29T05:32:09.903
> 
> 标签：hibernate, web-applications, jakarta-ee

我们的项目是在 WAS 6.1/hibernate/struts 上使用 RAD 7.0 开发的中型 Web 应用程序，该应用程序已投入生产。目前，我们已经在属性文件中硬编码了生产系统的 IP 地址，在休眠配置文件中硬编码了数据库架构详细信息。

我们的客户希望我们提出将环境细节保留在 EAR 之外的解决方案，以便他们将来可以在不打开 EAR 的情况下更改 environment/db 细节。

任何指针都会非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T07:07:38.820

您可以为此使用 JNDI。您应该创建适当的条目并在您的代码中读取它们，如下所示：

```
Context initialContext = new InitialContext();
URL ip = (URL) initialContext.lookup("java:comp/env/myip"); 
```

请参阅[这篇](http://www.developer.com/open/article.php/3559931)文章，了解如何在休眠配置文件中使用 JNDI 数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T09:55:50.520

我从其他论坛得到了一个答案，即使用 Web 服务器设置中可用的类路径设置，我们可以做到这一点

指定您存储属性文件的目录路径并重新启动服务器

但必须试试这个

有什么方法可以将休眠 cfg 文件移出 EAR，或者只是我们在休眠 cfg 中提到的 EAR 中提到的 db 配置详细信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T07:18:44.977

你可以试试这些，我在我的项目中坚持第一个解决方案。

1.  将所有这些信息放在一个捆绑在 EAR 中的属性文件中。当他们想要更改信息时，他们必须重新部署 EAR。这就是我使用的方式，我们可以在 SCM 中进行变更控制。

2.  让您的应用程序读取具有这些详细信息的属性文件，并且在应用程序启动时，代码引用了 EAR 之外的该文件。他们更改数据并重新启动应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T07:24:13.403

您可以在服务器上的一个目录中维护配置，当应用程序启动时（通常使用在应用程序启动时调用的 servlet），将配置读入单例或静态类。向应用程序中的管理员用户提供实用程序以从文件中重新加载配置，以便在最新配置发生更改时可以重新加载。

# wpf - WPF ListView/ItemsControl 拖放装饰器

> ID：490582
> 
> 赞同：0
> 
> 时间：2009-01-29T05:32:42.070
> 
> 标签：wpf, vb.net, drag-and-drop

我找到[了 Bea Stollnitz 的这篇文章](http://bea.stollnitz.com/blog/?p=53)并[下载了源代码](http://bea.stollnitz.com/Zips/46DragDropListBox.zip)并[转换为 vb.net。](http://tinyurl.com/bv3yk2) 我相信我已经完成了转换，但有一件事仍然没有奏效，因为我试图得到它并拉出太多的头发。希望有人可以帮助我发现我缺少的东西。

好的，拖放在转换后的代码中可以正常工作，我只是没有让 InsertionAdorner 在 vb.net 中工作，我在代码中设置了断点并且所有代码都在执行，但是对于我来说 InsertionAdorner 没有变得可见。甚至 DrawLine 函数也被调用了！

我很茫然，我在 vb.net 中需要这个，原来的 C# 项目工作得很好，我就是找不到我缺少的东西！

谢谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-30T16:37:00.397

明白了，在Reflector的帮助下。

在线转换器拿了这个代码

```
pen = new Pen { Brush = Brushes.Gray, Thickness = 2 }; 
```

并吐出

```
pen = New Pen() 
```

方便地省略

```
pen.Brush = Brushes.Gray
pen.Thickness = 2 
```

以及我必须修复的其他几个类似的转换。

转换器可以完成：

```
pen = New Pen() With {.Brush=Brushes.Gray, Thickness=2 } 
```

但是为了安全起见，因为VS08只支持它只是把它排除在外..

问题已解决！

# java - struts 2中的验证

> ID：490589
> 
> 赞同：1
> 
> 时间：2009-01-29T05:37:40.173
> 
> 标签：java, struts2, validation

请解决我对 Struts2 中验证的以下困惑 -

1) 我们可以通过 JavaScript 进行客户端和服务器端验证吗？2) 我们可以通过 AJAX 进行客户端和服务器端验证吗？

如果可能，那么哪一个有利于客户端验证，哪个有利于服务器端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T06:09:53.460

客户端验证可以通过 Javascript 完成。服务器端验证是通过验证框架完成的。您可以通过 AJAX 进行验证，但需要做更多的工作。

我们发现客户端验证最好留给简单的情况，例如缺少必填字段和非法字符。任何比这更复杂的东西都需要 AJAX 和/或服务器端。此外，我们发现有关 Struts 2 客户端验证的文档不太有用，因此您可能需要考虑在您选择的 Javascript 框架（Dojo、YUI、Scriptaculous JQuery 等）中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T06:14:25.247

是的，您可以同时使用 javascript 和 ajax，而且您经常会同时使用这两种方法——甚至可以验证相同的数据。（如果它通过了客户端验证，那么您之后会进行 ajax 验证。）

当您不希望需要验证的数据出现在每个人都可以看到的 javascript 中时，显然可以使用 ajax。客户端验证通常仅限于更简单的事情。

所有 ajax 的缺点是它经常会增加很多页面的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-08T11:20:24.543

你知道完整的休眠插件吗？

这个插件有一个很棒的验证功能......

[http://cwiki.apache.org/S2PLUGINS/full-hibernate-plugin.html](http://cwiki.apache.org/S2PLUGINS/full-hibernate-plugin.html)

更多在 vaannila.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-07T17:04:28.623

拥有 javascript 和服务器端验证是件好事。原因是如果用户在他们的浏览器上禁用了 javascript，那么您的客户端验证将不起作用，并且如果条目未经过验证，您的代码将引发异常。

# objective-c - 为什么 Obj-C GC 清除了我的引用？

> ID：490592
> 
> 赞同：0
> 
> 时间：2009-01-29T05:39:22.057
> 
> 标签：objective-c, garbage-collection

我正在编写一个利用垃圾收集器的 Objective-C 程序。

在某些情况下，我得到*EXC_BAD_ACCESS*，这是对象“过度释放”的经典示例。[使用本技术](http://developer.apple.com/technotes/tn2004/tn2124.html)说明中的一些调试技巧，即*MallocScribble*和*AUTO_LOG_COLLECTIONS*，我可以看到我的对象正在从我下面被 GC 排出。

话虽如此，这是我的代码。

我有一个 NSMutableDictionary 保存对对象的**唯一**引用。在一种方法中，我正在做：

```
NSObject *object = [dictionary objectForKey:key];

NSLog(@"Object is %@", object);
[dictionary removeObjectForKey:key]; 
```

*如果我在 NSLog 语句之前*从字典中删除对象，如果 GC 在正确的时刻运行，我会得到*EXC_BAD_ACCESS*。从字典*中*删除永远不会失败。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T05:59:03.453

内部指针的[垃圾收集编程指南](http://developer.apple.com/documentation/Cocoa/Conceptual/GarbageCollection/Articles/gcUsing.html#//apple_ref/doc/uid/TP40008006-SW7)部分似乎是最接近这种现象的文档，但它似乎不太适合。尝试验证您的应用程序实际上是在使用垃圾收集而不是手动引用计数。如果真的启用了垃圾收集器，那么看起来它要么有错误，要么存在文档不足的特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T09:24:57.213

您是否验证了垃圾收集确实开启了？你可以尝试在你的类中加入一个 -dealloc 方法，看看你是否遇到过它。它永远不会在 GC 上命中。根据 Apple 文档，GC 不应收集堆栈变量指向的对象，因此您所看到的不应发生。

# java - 在 Spring 中延迟加载 DTO 字段

> ID：490595
> 
> 赞同：7
> 
> 时间：2009-01-29T05:41:38.120
> 
> 标签：java, spring, jdbc, lazy-loading

我有一个使用 Spring 的项目，它被分解成几十个 DAO 和相关的 DTO。我正在使用 JdbcTemplate，但仅此而已，因为它正是我满意的抽象级别。

我目前正在我的 DTO 上执行延迟加载，方法是在它们的 getter 中放置一些相当多毛的代码。

基本的样板逻辑是： 1\. 如果字段不为 null，则返回其值并退出 2\. 联系适当的 DAO 并获取相关的 DTO 3\. 将它们存储到下一次。

它工作得很好，除了我的低级 DTO 与一大堆 DAO 相结合并且不是那么 POJOey。

如果我将逻辑放在 DAO 中，则会出现另一种代码气味，因为它将同时处理其 DTO 的 CRUD 和延迟加载，并且据我所知，对象应该有一个单一的责任。

我希望有一个相对简单的 Spring 方法，我可以使用它在 DAO 和 DTO 之间注入一个延迟加载器对象来实现这一点，但任何其他解决方案都对我有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T13:25:13.873

将 DAO 包裹在 DAO 周围会更容易……这取决于您想要引入多少模型。DTO 通常不用于将一对多的操作作为两个或多个单独的数据库/dao 调用。在那种情况下，你真的想要一个 ORM。既然你在寻找一个道的答案......

没有什么能阻止您将 DAO 链接在一起，为您提供一个 DTO。将 DTO 连接到 DAO 会更容易。它不是真正的服务层，它只是 DAO 的构建块。所以你可能有一个 PersonDao 和一个 TelephoneNumberDao。一个人可以拥有多个电话号码，因此您也可以拥有 PersonModelDAo，它在后台使用 PersonDao 和 TelephoneNumberDao 来完成工作。

或者，避免整个问题，不要尝试在 DTO 级别映射人员和电话号码之间的 1-N。只需让您的 UI 对正确的 DAO 进行正确的调用。在使用 DTO 时，我实际上更喜欢这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T05:59:51.220

引入一个服务层来包装你的 DAO 并处理诸如此类的问题是很常见的。如果您担心在 DTO 中放入太多样板代码来处理延迟加载，也许使用 AOP 可能是实现此目的的一种方法。您可能想查看 AspectJ 并在编译时或加载时进行编织。由于您将直接修改字节码，因此您不必担心基于代理的 AOP 的性能开销。

# c# - 如何从 ASP.NET 中的 http 标头获取“Guid”变量

> ID：490596
> 
> 赞同：0
> 
> 时间：2009-01-29T05:41:59.447
> 
> 标签：c#, asp.net, http, header, guid

以下行给出错误（无法将类型“string”转换为“System.Guid”）

```
userId = Request.QueryString["id"]; 
```

有什么解决方案可以在 http 标头 Get 中传递 Guid 变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T05:43:57.320

```
try {
    userId = new Guid(Request.QueryString["id"]);
} catch (FormatException e) {
    /*
     * It's possible that the guid is not properly formatted and an
     * exception will be thrown, so handle that here.
     */
} 
```

# python - 正则表达式替换（在 Python 中） - 一种更简单的方法？

> ID：490597
> 
> 赞同：43
> 
> 时间：2009-01-29T05:43:24.357
> 
> 标签：python, regex

任何时候我想替换一段文本，它是一段较大文本的一部分，我总是必须做类似的事情：

```
"(?P<start>some_pattern)(?P<replace>foo)(?P<end>end)" 
```

然后将`start`组与新数据连接起来，`replace`然后再连接`end`组。

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2009-01-29T05:56:21.727

```
>>> import re
>>> s = "start foo end"
>>> s = re.sub("foo", "replaced", s)
>>> s
'start replaced end'
>>> s = re.sub("(?<= )(.+)(?= )", lambda m: "can use a callable for the %s text too" % m.group(1), s)
>>> s
'start can use a callable for the replaced text too end'
>>> help(re.sub)
Help on function sub in module re:

sub(pattern, repl, string, count=0)
    Return the string obtained by replacing the leftmost
    non-overlapping occurrences of the pattern in string by the
    replacement repl.  repl can be either a string or a callable;
    if a callable, it's passed the match object and must return
    a replacement string to be used. 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-01-29T05:51:21.050

在 Python [re 文档](http://docs.python.org/library/re.html)中查找前瞻`(?=...)`和后瞻`(?<=...)`——我很确定它们就是您想要的。它们匹配字符串，但不“消耗”它们匹配的字符串位。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-29T15:11:48.807

简短的版本是您*不能*在使用 Python`re`模块的后视中使用可变宽度模式。没有办法改变这一点：

```
>>> import re
>>> re.sub("(?<=foo)bar(?=baz)", "quux", "foobarbaz")
'fooquuxbaz'
>>> re.sub("(?<=fo+)bar(?=baz)", "quux", "foobarbaz")

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    re.sub("(?<=fo+)bar(?=baz)", "quux", string)
  File "C:\Development\Python25\lib\re.py", line 150, in sub
    return _compile(pattern, 0).sub(repl, string, count)
  File "C:\Development\Python25\lib\re.py", line 241, in _compile
    raise error, v # invalid expression
error: look-behind requires fixed-width pattern 
```

这意味着您需要解决它，最简单的解决方案与您现在正在做的非常相似：

```
>>> re.sub("(fo+)bar(?=baz)", "\\1quux", "foobarbaz")
'fooquuxbaz'
>>>
>>> # If you need to turn this into a callable function:
>>> def replace(start, replace, end, replacement, search):
        return re.sub("(" + re.escape(start) + ")" + re.escape(replace) + "(?=" + re.escape + ")", "\\1" + re.escape(replacement), search) 
```

这没有后视解决方案的优雅，但它仍然是一个非常清晰、直接的单行。如果你看一下[专家对这个问题的看法](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)（他说的是 JavaScript，它完全缺乏后视，但许多原则是相同的），你会发现他最简单的解决方案看起来很像这个。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-01-12T23:39:10.880

我相信最好的办法就是在一个组中捕获您想要替换的任何内容，然后使用捕获组的 start 和 end 属性替换它。

问候

阿德里安

```
#the pattern will contain the expression we want to replace as the first group
pat = "word1\s(.*)\sword2"   
test = "word1 will never be a word2"
repl = "replace"

import re
m = re.search(pat,test)

if m and m.groups() > 0:
    line = test[:m.start(1)] + repl + test[m.end(1):]
    print line
else:
    print "the pattern didn't capture any text" 
```

这将打印：'word1 永远不会是 word2'

要替换的组可以位于字符串的任何位置。

# php - 有哪些方法可以处理长列表的分页？

> ID：490612
> 
> 赞同：0
> 
> 时间：2009-01-29T05:55:05.800
> 
> 标签：php, pagination

我想知道是否有任何标准方法可以保持实时列表的正确分页。例如，在 Stack Overflow 上，如果我转到第 2 页，并且在查看第 1 页期间提交了一个新问题，我如何才能使第 2 页保持与我开始查看第 1 页时的状态相同？

很多时候人们只会使用 LIMIT 进行 SQL 查询，但这不会让您跟踪第 1 页的结束位置和第 2 页的开始位置。

我想这可以通过跟踪最后一次看到的记录的 ID 或其他东西来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T06:11:03.130

我认为大多数用户已经习惯了这种行为并期望它发生。当他们转到下一页并看到他们刚刚在页面末尾的项目是当前页面的第一项时，他们可能会意识到这是因为添加了新项目。我知道我以前作为用户依赖于这种行为来了解在浏览页面时何时添加了新内容。

所以我的意见是你不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T07:33:42.060

我们对所有分页 Web UI 执行此（您请求的）行为。（我实际上已经在 SO 中提出了要求，但它拒绝了 - 但我发现当前的重新分页令人讨厌且出乎意料 - 我讨厌点击“下一个”并将前 n 项作为上一页中的最后一项）。

诀窍是保留（通常在隐藏变量中）足够的关键信息，以便将列表定位在您正在查看的页面的第 1 项之前和最后一项之后。然后您的上一页和下一页链接在提交时提供该信息。实际上，您保留了“上一页”和“下一页”键。这直观地适用于插入*和*删除。

要记住的一件事是，第 1 页上的刷新（假设像 SO 是最新项目的第一个列表）应该（a）激活“上一个”链接，如果它被隐藏，或者（b）从顶部刷新列表，包括添加的项目。换句话说，“刷新”总是从第一个项目重新显示页面，但如果页面上的第一个项目也是列表中的第一个项目并且现在有新项目，它会从列表的开头重新显示。对于我们的列表，我们通常有“第一页”、“上一页”、“刷新”、“下一页”和“最后一页”的标准链接。

查看新项目的替代方法是始终拥有上一个链接，它会备份整个页面中较小的一个或列表的顶部 - 这就是用户查看新项目的方式（但我更喜欢隐藏/禁用上一个/下一个当没有上一个和/或下一个项目时）。

# php - 多个 javascript/css 文件：最佳实践？

> ID：490618
> 
> 赞同：57
> 
> 时间：2009-01-29T05:56:37.530
> 
> 标签：php, javascript, jquery, html, css

我现在有大约 7 个 Javascript 文件（感谢各种 jQuery 插件）和 4-5 个 CSS 文件。我很好奇处理这些问题的最佳实践是什么，包括它们应该在文档中加载的位置？YSlow 告诉我 Javascript 文件应该——在可能的情况下——包含在最后。身体的尽头？它提到分隔符似乎是他们是否编写内容。我所有的 Javascript 文件都是函数和 jQuery 代码（都在 ready() 时完成），所以应该没问题。

那么我是否应该包含一个 CSS 和一个 Javascript 文件并让它们包含其余文件？我应该将所有文件连接成一个吗？我应该将 Javascript 我的标签放在文档的最后吗？

**编辑：** FWIW 是的，这是 PHP。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-01-29T06:42:40.977

我建议使用[PHP Minify](http://code.google.com/p/minify/ "谷歌代码：缩小")，它允许您为一组 JS 或 CSS 文件创建单个 HTTP 请求。Minify 还为客户端缓存处理 GZipping、压缩和 HTTP 标头。

编辑：Minify 还将允许您设置请求，以便对于不同的页面，您可以包含不同的文件。例如，一组核心 JS 文件以及某些页面上的自定义 JS 代码或其他页面上的核心 JS 文件。

在开发过程中，像往常一样包含所有文件，然后当您接近切换到生产运行时，缩小并将所有 CSS 和 JS 文件合并到一个 HTTP 请求中。设置和使用它真的很容易。

同样是的，CSS 文件应该设置在头部，JS 文件放在底部，因为 JS 文件可以写入您的页面并可能导致大量超时问题。

以下是包含 JS 文件的方式：

```
</div> <!-- Closing Footer Div -->
<script type="application/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js"></script>
</body>
</html> 
```

编辑：您还可以使用[Cuzillion](http://stevesouders.com/cuzillion/ "Cuzillion")来查看您的页面应该如何设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-29T06:32:02.433

这是我的工作：我最多使用两个 JavaScript 文件，通常每个页面使用一个 CSS 文件。我弄清楚哪些 JS 文件将在我的所有页面中通用（或者足够多，所以它很接近 - 包含 jQuery 的文件将是一个很好的候选者），然后我将它们连接起来并使用[jsmin-php](http://code.google.com/p/jsmin-php/)缩小它们，然后我缓存合并文件。如果剩下的任何 JS 文件仅特定于该页面，我也会将它们连接、缩小并将它们缓存到一个文件中。第一个 JS 文件将在多个页面上调用，第二个仅在那个页面上或可能几个页面上调用。

如果你喜欢[css-min](http://code.google.com/p/cssmin/)，你可以在 CSS 中使用相同的概念，尽管我发现我通常只使用一个文件作为 CSS。额外的一件事是，当我创建缓存文件时，我在文件的开头放入了一些 PHP 代码，以将其作为 GZipped 文件提供，这实际上是您节省大部分费用的地方。您还需要设置过期标头，以便用户的浏览器也有更好的机会缓存文件。我相信您也可以通过 Apache 启用 GZipping。

对于缓存，我检查文件创建时间是否早于我设置的时间量。如果是，我重新创建缓存文件并提供它，否则我只获取现有的缓存文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T06:06:01.877

您没有明确表示您可以访问服务器端解决方案，但假设您这样做了，我总是采用一种涉及使用 PHP 执行以下操作的方法：

jquery.js.php：

```
<?php
$jquery = ($_GET['r']) ? explode(',', $_GET['r']) : array('core', 'effects', 'browser', 'cookies', 'center', 'shuffle', 'filestyle', 'metadata');
foreach($jquery as $file)
 {
echo file_get_contents('jquery.' . $file . '.js');
 }
?> 
```

有了上面的代码片段，我就可以像往常一样调用该文件：

```
<script type="text/javascript" src="jquery.js.php"></script> 
```

然后，如果我知道我将需要的精确功能，我只需将我的要求作为查询字符串 ( **jquery.js.php?r=core,effects** ) 传递。如果它们曾经是分支的，我对我的 CSS 要求执行完全相同的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-29T15:42:00.417

我不建议使用基于 javascript 的解决方案（如 PHP Minify）来包含您的 CSS，因为如果访问者禁用了 javascript，您的页面将变得无法使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T07:31:28.740

缩小和合并文件的想法很棒。

我在我的网站上做了类似的事情，但为了简化开发，我建议使用如下代码：

```
if (evironment == production) {
  echo "<style>@import(/Styles/Combined.css);</style>"
} else {
  echo "<style>@import(/Styles/File1.css);</style>"
  echo "<style>@import(/Styles/File2.css);</style>"
} 
```

这应该让您在开发期间将文件分开以便于管理，并在部署期间使用组合文件以更快地加载页面。这假设您能够在部署过程中组合文件和更改变量。

根据 YUI 的建议，一定要考虑在底部包含你的 js，在顶部包含 css，因为保持 JS 较低会对页面其余部分的外观产生切实影响，并且感觉更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T18:43:03.310

我也倾向于将我所有的 jquery 插件复制+粘贴到一个文件中： jquery.plugins.js 然后链接到

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"> 
```

对于实际的 jquery 库。

# c# - 为什么我的对象模拟失败？

> ID：490622
> 
> 赞同：0
> 
> 时间：2009-01-29T06:04:36.530
> 
> 标签：c#, moq

我正在使用最小起订量，似乎无法让我的单元测试通过看似简单的模拟场景。

```
Product p = new Product();
var rep = new Mock<IProductRepository>();
rep.Expect(x => x.GetProductById(1)).Returns(p);
p = rep.Object.GetProductById(1);
Assert.AreEqual(1, p.ProductId);  //Assert.AreEqual failed. Expected:<1>. Actual:<0>. 
```

关于我做错了什么的任何指示？我的单元测试报告：-

> Assert.AreEqual 失败。预期：<1>。实际：<0>。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-11-29T22:30:19.640

我认为你错过了如何在测试中使用模拟对象的重点......

您正在做的是模拟 ProductRepository 对象，同时对其进行测试。这没有多大意义；你不应该模拟你正在测试的对象。

假设您有一个要测试的类 ProductService，它依赖于另一个类 IProductRepository。当您测试 ProductService 时，您需要模拟*依赖*项 IProductRepository。这使您可以完全控制被测类与其（模拟）依赖项之间的交互。

当您这样做时，您的断言将基于您期望被测类 ProductService 执行的操作。例如，如果您使用类似的方法调用 ProductService `productService.GetProductById(1)`，您将期望 ProductService 对象使用正确的参数调用其 IProductRepository 方法一次：`repository.GetProductById(1)`。您可能还期望 ProductService 返回 IProductRepository 给它的相同对象。无论存储库做什么，这都是 ProductService 的责任。

话虽如此，您的测试可能看起来更像这样：

```
//Arrange
int testId = 1;
var fakeProduct = new Product{ Id = testId };
var mockRepo = new Mock<IRepository>();
var productService = new ProductService(mockRepo);
mockRepo.Expect(repo => repo.GetProductById(testId)).Returns(fakeProduct);

//Act
Product returnedProduct = productService.GetProductById(testId);

//Assert
mockRepo.Verify(repo => repo.GetProductById(testId), TimesExactly(1));
Assert.AreEqual(returnedProduct.Id, fakeProduct.Id); 
```

我的语法可能不正确，但希望该示例能够跨越几点：

1.  不要模拟被测系统
2.  模拟依赖项
3.  将您的断言基于被测系统的职责，而不是依赖关系

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T07:41:54.663

您正在创建一个对象，将该对象设置为方法的返回值，然后检查模拟是否正在更改对象，模拟不打算做的事情您基本上是在这样做：

```
Product getProductById(Product p) { return p; }
...
Product p = new Product();
Assert.AreEqual(1, getProductById(p).ProductID ); 
```

创建新产品时：

```
Product p = new Product(); 
```

我猜默认ProductID是0，所以这句话：

```
 getProductById(p).ProductID 
```

显然会返回 0。

我也是在这里嘲笑的新手，但我不明白你的意思。你想测试什么？Product 类、ProductRepository 或它们之间的交互？这是首先要考虑的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-29T21:52:27.433

我正在查看您的代码，但看起来您并不真正知道您要实现的目标。在编写任何测试之前，请始终提出以下问题：**“在这里，我想证明什么？”** 将返回您创建的产品，但其 ID 将是默认值 (0)；这是预期的行为，即模拟框架运行良好。

测试替身（模拟、存根、伪造、间谍等）在测试中用于为被测类提供合作者。它们将有趣的值输入到被测类或接收来自被测类的调用——它们不是测试的焦点。

您的测试当前正在断言测试替身本身返回的值。据我了解，要么您是在寻求上下文无关代码片段的帮助（片段本身只是一个示例，而不是测试本身），要么它是毫无意义的真实测试代码。

我见过很多人将自己与模拟框架联系在一起。 [这就是为什么，首先，我建议您自己手写测试替身](http://defragdev.com/blog/?p=377)。这有助于您了解对象之间的交互，并更清楚地了解您希望测试的内容。再次，这又回到了“我在这里要证明什么？”的问题。

一旦你了解了如何使用手动测试替身来实现目标，你就可以毕业到模拟框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T06:26:28.280

我会支持 Gishu re 的观点：产品初始化。除非 IProductRepository 的默认行为是返回 ProductId 为“1”引用的产品，否则您的测试将失败。

而且，我可以补充一下，这种失败似乎是明智的行为。我认为您希望 ProductRepository 在初始化时为空。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T06:51:29.883

没有完全错过重点，Mocking 并非微不足道。

在你的情况下，你有一个`IProductRepository`，我想，应该持有`Products`。我假设默认情况下`Products`不会将其添加到`ProductRepositort`（根据我之前的帖子），并且我还假设为了引用 a `Product`，它必须具有 a `productId`（顺便说一句，您确实应该通过[mutator](http://en.wikipedia.org/wiki/Mutator_method)进行变异）。

如果[您](http://code.google.com/p/moq/)想`Product`从您的`ProductRepository`. s 向其添加默认标识符（*不*推荐）或在将其添加到.`Product``ProductRepostory``Product`*`Product``ProductRepository`*

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T06:11:14.440

在设置期望 - 返回 (p) 时，您将 Product 实例 p 用作“预期值”一次，然后使用相同的引用来存储实际调用的返回值。

至于 Assert 失败， new Product() 是否将其 ProductId 初始化为 1。似乎将其设置为默认值 0 - 因此出现错误。

我认为 Mock 框架正在运行。

# asp.net - .NET 3.5/VS 2008 上 ASP.NET Web 服务的自定义 HTTP 基本身份验证

> ID：490627
> 
> 赞同：10
> 
> 时间：2009-01-29T06:06:57.180
> 
> 标签：asp.net, web-services, security, .net-3.5, basic-authentication

我正在重构一个工作的 ASP.NET Web 应用程序以使用 ASP.NET Web 服务公开 Web 服务接口。根据[Web 服务身份验证 - 最佳实践](https://stackoverflow.com/questions/162376/web-services-authentication-best-practices)，通过 https 的基本身份验证是可行的方法。让我们假设它是，而不是做 WS-Security、X509 等。

在 .NET 3.5/VS 2008 上，实现自定义 http 基本身份验证（非 Windows 帐户）的最简单方法是什么，例如，仅当用户名为“foo”且密码为“bar”时才接受。最终，我想`Thread.CurrentPrincipal`设置。

我自己写`HttpModule`还是可以更简单地完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-11T00:04:10.803

可能使用[IIS 的自定义基本身份验证](http://www.codeplex.com/CustomBasicAuth)，由[Dominick Baier](http://www.leastprivilege.com/default.aspx)编写是要走的路。[正如他指出](http://www.leastprivilege.com/WCFUsernamesOverTransportAndIISHosting.aspx)的那样， WCF 3.5 的传输安全用户名不能用于 IIS 托管服务，尽管我的问题是关于 ASP.NET Web 服务而不是 WCF。

在 ASP.NET 中有另一种 HTTP 模块实现，称为[基本身份验证，](http://www.codeproject.com/KB/aspnet/mybasicauthentication.aspx)由[Santosh Sahoo](http://www.codeproject.com/script/Articles/MemberArticles.aspx?amid=910952)针对自定义数据源。

虽然这不是我想要的，但我发现[QuickStart Tutorial 的 SOAP Headers 示例](http://quickstarts.asp.net/QuickStartv20/webservices/doc/SoapHeaders.aspx)提供了丰富的解决方法。通过 http 以纯文本形式发送密码显然是不安全的，但可以扩展此示例以增加安全性，例如在 https 上运行或发送“密码 + 一次性 GUID + 时间戳”的哈希。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T05:48:29.300

获取标头的值，对其进行`Authorization`解析并验证用户名/密码。

值为 username:password，编码为 Base64 字符串。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。

**编辑**：如果您希望使用自定义身份验证方案为每个请求完成此操作，那么编写一个`HttpModule`来处理解析标头和设置线程的主体会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T08:59:46.443

如果您正在考虑 WCF，则可以对 basicHttpBinding 使用 usernameOverTransport 安全性。即用户名和密码位于请求的 SOAP 标头中，所有流量都受到 SSL 在线加密的保护。

自定义 UserNamePasswordValidator 验证器可用于针对例如数据库验证传入凭据。

您可以在服务行为的自定义 IAuthorizationPolicy 中设置线程主体。

例如，评估 IAuthorizationPolicy 的方法实现以设置当前主体

```
public bool Evaluate(EvaluationContext evaluationContext, ref object state)
{
       Object obj;
       if( evaluationContext.Properties.TryGetValue( "Identities", out obj ))
       {
            // get the authenticated identity
            IIdentity client = (obj as IList<IIdentity>)[0];
            evaluationContext.Properties["Principal"] = ... // create principal obj here for the identity
            // this will set thread's current principal
       }
       return true;
} 
```

# perl - 如何从 PDF 文件中提取图像？

> ID：490629
> 
> 赞同：2
> 
> 时间：2009-01-29T06:08:11.407
> 
> 标签：perl, pdf, image

> **可能重复：**
> [如何从 PDF 文件中提取图像？](https://stackoverflow.com/questions/430707/how-can-i-extract-images-from-a-pdf-file)

我可以使用许多 Perl 模块从 PDF 文件中提取图像，但它们都没有指定要提取的图像的确切位置（图像实际所属的位置）。

谁能向我建议如何提取图像及其位置？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T07:16:45.260

一个间接的解决方案是使用`pdfimages`逐页扫描pdf文件。如果有图片，至少你会知道它在哪个页面。

例如，您可以使用`pdfinfo`找出给定 pdf 文件中的页数，并使用`pdfimages`和`-f`选项`-l`来扫描特定页面。

# python - Planet 博客聚合器软件的统计数据和其他附加工具

> ID：490634
> 
> 赞同：0
> 
> 时间：2009-01-29T06:09:33.650
> 
> 标签：python, add-on

Planet 软件通常用于特定主题或大型项目，以收集发布特定主题的博客。[http://www.planetplanet.org/](http://www.planetplanet.org/)

我认为有很多有趣的附加组件可以为它完成，但到目前为止我还没有看到任何附加组件。有人知道吗？（因为名字，有点难找……）

像： - 对于用户，订阅一个星球，但阻止特定的海报（也许是某种用于谷歌阅读器的 Greasemonkey 脚本？） - 一个星球的统计数据 - 各种博客成为“成员”的时间有多长，他们每个人的发布频率如何? 哪些海报通常获得最多评论？

顺便说一句，这应该有标签“行星”:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-09-26T08:11:56.407

答：不，没有插件 afaik。你可以写它们。:-)

# ajax - 那里有超高负载（Ajax）聊天脚本吗？

> ID：490645
> 
> 赞同：0
> 
> 时间：2009-01-29T06:15:13.107
> 
> 标签：ajax, performance, chat, irc

对于一个宠物项目，我一直在寻找一个能够同时运行*数万用户*的网络聊天脚本。我不想使用任何类型的小程序或浏览器扩展，所以在客户端，它应该是简单的 Ajax。在服务器端，我几乎对任何事情都持开放态度。

我不是在寻找花里胡哨的东西，一个简单的纯文本聊天就足够了，只要它同时支持多个“频道”或“房间”，以及非常多的用户。

当我第一次开始研究聊天脚本时，似乎唯一可行的选择是运行 IRC 服务器并在其上构建一个 Web 界面。我知道我可以通过该设置获得良好的性能和稳定性，但我可以通过使用其他东西获得更好的性能吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T06:27:29.680

你可能想检查[彗星](http://cometd.org/)

我相信有一些聊天脚本已经在使用 cometd。我对稳定性一无所知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T06:30:36.680

你可以看看[Jabbify](http://jabbify.com/)。

不确定房间和频道部分，但它是建立在 AJAX 和 MVC 模型上的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-10T21:33:04.073

我将使用基于[node.js的](http://nodejs.org/)[Twitch.me](http://twich.me/)

# php - 在 PHP 中保持数组排序

> ID：490650
> 
> 赞同：13
> 
> 时间：2009-01-29T06:20:28.213
> 
> 标签：php, arrays, sorting

我有一个 PHP 脚本，它读取一个大的 CSV 并执行某些操作，但前提是“用户名”字段是唯一的。CSV 用于多个脚本中，因此不能将 CSV 的输入更改为仅包含唯一的用户名。

非常基本的程序流程（我想知道）是这样的：

```
$allUsernames = array();
while($row = fgetcsv($fp)) {
    $username = $row[0];
    if (in_array($username, $allUsernames)) continue;
    $allUsernames[] = $username;
    // process this row
} 
```

由于这个 CSV 实际上可能非常大，这`in_array`让我开始思考。在数组中搜索成员时最理想的情况是如果它已经排序，那么**您将如何从头开始构建数组并保持其有序**？`in_array()`一旦按顺序排列，考虑到它可能不知道数组已排序，是否有比 using 更有效的搜索方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-29T06:50:26.017

没有保持数组有序，但是这种优化怎么样？我猜`isset()`数组键应该比`in_array()`搜索快。

```
$allUsernames = array();
while($row = fgetcsv($fp)) {
  $username = $row[0];

  if (isset($allUsernames[$username])) {
    continue;
  } else {
    $allUsernames[$username] = true;

    // do stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-29T06:43:36.623

以排序顺序从头开始构建数组的方法是插入排序。在 PHP-ish 伪代码中：

```
$list = []
for ($element in $elems_to_insert) {
     $index = binary_search($element, $list);
     insert_into_list($element, $list, $index);
} 
```

虽然，实际上可能会更快地以未排序的顺序创建数组然后使用快速排序（PHP 的内置排序函数使用快速排序）

并在排序列表中查找元素：

```
function binary_search($list, $element) {
    $start = 0;
    $end = count($list);
    while ($end - $start > 1) {
        $mid = ($start + $end) / 2;
        if ($list[$mid] < $element){
            $start = $mid;
        }
        else{
            $end = $mid;
        }
    }
    return $end;
} 
```

使用此实现，您必须测试`$list[$end]`它是否是您想要的元素，因为如果该元素不在数组中，这将找到应该插入它的点。我这样做是为了与之前的代码示例保持一致。如果你愿意，你可以检查`$list[$end] === $element`函数本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T06:38:36.867

php 中的数组类型是有序映射（[php 数组类型](http://php.net/manual/en/language.types.array.php)）。如果你传入整数或字符串作为键，你将有一个有序的映射......

请查看上述链接中的第 6 项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T08:39:04.127

in_array() 没有从排序数组中受益。PHP 只是遍历整个数组，就好像它是一个链表一样。

# mysql - 如果我在 mysql 查询上使用 LIMIT，结果集是否应该等于限制？

> ID：490651
> 
> 赞同：1
> 
> 时间：2009-01-29T06:20:39.553
> 
> 标签：mysql, limit

例如将`select * from table limit 0,5`
最多返回 5 行，或者
它必须准确找到 5，如果 row_count 不等于 5，它返回一个空结果集？

如果查询是`select * from table limit 5`什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-29T06:25:37.533

[http://dev.mysql.com/doc/refman/5.1/en/select.html](http://dev.mysql.com/doc/refman/5.1/en/select.html)

*“LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。有两个参数，第一个参数指定要返回的第一行的偏移量，第二个指定要返回的**最大**行数。"*

因此，要直接回答您的问题，它*最多*会返回5 行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-29T06:29:55.497

查询`SELECT * FROM table LIMIT 0,5`将从第一条记录开始返回 5 条记录。

查询`SELECT * FROM table LIMIT 5`也将给出与上述查询相同的结果。

如果该表中的记录少于 5 条，则它不会失败，而是返回那里的任何记录。

查询`SELECT * FROM table LIMIT 6,5`将返回记录 7,8,9,10,11，因为索引从 0 开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T06:23:08.787

限制是一个限制，所以它不会返回超过那么多行。它可以返回更少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T06:36:50.287

在查询“select * from table limit 0,5”中，0 没有指定要返回的最少记录。它指定偏移量。所以当你说 0 时，如果查询“select * from table”返回 10 条记录，“limit 0,5”将返回前 5 条记录。如果使用“limit 5,5”，它将返回最后 5 条记录。

如果您只有 2 条记录，它将返回两条记录。如果没有结果，它不会返回错误。LIMIT 是最大限制。最小值可以是任何东西，甚至是 0 条记录。

"select * from table limit 5" 与 "select * from table limit 0,5" 相同

# class-design - 一个类应该有多少个构造函数？

> ID：490661
> 
> 赞同：11
> 
> 时间：2009-01-29T06:29:26.400
> 
> 标签：class-design, constructor

我目前正在修改一个具有 9 个不同构造函数的类。现在总的来说，我认为这个类的设计非常糟糕......所以我想知道一个拥有这么多构造函数的类是否是糟糕的设计。

出现了一个问题，因为我最近向这个类添加了两个构造函数，试图重构和重新设计一个类（下面代码中的 SomeManager），以便它是可单元测试的，并且不依赖于它的每个方法都是静态的。但是，由于其他构造函数被方便地隐藏在类开头下方大约一百行的位置，所以当我添加构造函数时，我没有发现它们。

现在发生的事情是调用这些其他构造函数的代码依赖于已经实例化的 SomeManager 类，因为它曾经是静态的......结果是一个空引用异常。

所以我的问题是如何解决这个问题？通过尝试减少构造函数的数量？通过使所有现有的构造函数采用 ISomeManager 参数？

当然，一个类不需要 9 个构造函数！...哦，最重要的是，这个文件中有 6000 行代码！

这是我在上面谈论的构造函数的审查表示：

```
public MyManager()
    : this(new SomeManager()){} //this one I added

public MyManager(ISomeManager someManager) //this one I added
{
    this.someManager = someManager;
}

public MyManager(int id)
    : this(GetSomeClass(id)) {}

public MyManager(SomeClass someClass)
    : this(someClass, DateTime.Now){}

public MyManager(SomeClass someClass, DateTime someDate)
{
    if (someClass != null)
       myHelper = new MyHelper(someOtherClass, someDate, "some param");
}

public MyManager(SomeOtherClass someOtherClass)
    : this(someOtherClass, DateTime.Now){}

public MyManager(SomeOtherClass someOtherClass, DateTime someDate)
{
    myHelper = new MyHelper(someOtherClass, someDate, "some param");
}

public MyManager(YetAnotherClass yetAnotherClass)
    : this(yetAnotherClass, DateTime.Now){}

public MyManager(YetAnotherClass yetAnotherClass, DateTime someDate)
{
    myHelper = new MyHelper(yetAnotherClass, someDate, "some param");
} 
```

**更新：**

感谢大家的回复……他们非常棒！

只是想我会更新一下我最终做了什么。

为了解决空引用异常问题，我修改了其他构造函数以采用 ISomeManager。

目前，在允许重构这个特定类时，我束手无策，所以当我有空闲时间时，我会将它标记为我的待办事项列表中要重新设计的类。目前，我很高兴能够重构 SomeManager 类……它和 MyManager 类一样庞大而可怕。

当我开始重新设计 MyManager 时，我将寻找一种方法将功能提取到两个或三个不同的类中......或者确保遵循 SRP 需要多少。

最终，我还没有得出任何给定类都有最大数量的构造函数的结论，但我相信在这个特定的实例中，我可以创建两个或三个类，每个类都有两个或三个构造函数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-29T06:35:27.263

一个班级应该做一件事，而且只做一件事。如果它有这么多的构造函数，这似乎是一个迹象表明它做了太多的事情。

使用多个构造函数来强制在各种情况下正确创建对象的实例，但 9 似乎很多。我怀疑那里有一个接口，并且可以拖出接口的几个实现。每一个都可能有一个到几个构造函数，每个构造函数都与他们的专长相关。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-29T07:20:20.230

尽可能少，尽可能
多。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-29T06:48:08.250

类中有 9 个构造函数和 6000 行代码是代码异味的标志。您应该重新考虑该类。如果班级有很多责任，那么您应该将它们分开。如果职责相似但几乎没有偏差，那么您应该寻求实现继承，购买创建接口和不同的实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T07:16:32.047

如果你任意限制类中构造函数的数量，你最终可能会得到一个具有大量参数的构造函数。我每天都会选择一个有 100 个构造函数的类，而不是一个有 100 个参数的构造函数。当你有很多构造函数时，你可以选择忽略其中的大部分，但你*不能*忽略方法参数。

将类中的构造函数集合视为一个数学函数，将 M 个集合（其中每个集合是单个构造函数的参数列表）映射到给定类的 N 个实例。现在说，类`Bar`可以`Foo`在它的一个构造函数中使用 a，而类`Foo`将 a`Baz`作为构造函数参数，如下所示：

```
 Foo --> Bar
    Baz --> Foo 
```

我们可以*选择*向 Bar 添加另一个构造函数，这样：

```
 Foo --> Bar
    Baz --> Bar
    Baz --> Foo 
```

这对 Bar 类的用户来说很方便，但是由于我们已经有了从 Baz 到 Bar 的路径（通过 Foo），所以我们*不需要*那个额外的构造函数。因此，这就是判断调用所在的位置。

但是，如果我们突然添加了一个名为的新类`Qux`，并且我们发现自己需要从中创建一个实例`Bar`：我们必须在*某处*添加一个构造函数。所以它可能是：

```
 Foo --> Bar
    Baz --> Bar
    Qux --> Bar
    Baz --> Foo 
```

或者：

```
 Foo --> Bar
    Baz --> Bar
    Baz --> Foo
    Qux --> Foo 
```

后者将在类之间更均匀地分配构造函数，但它是否是*更好*的解决方案在很大程度上取决于它们的使用方式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-06T19:32:05.357

答案：**1**（关于注射剂）。

这是一篇关于该主题的精彩文章：[依赖注入反模式：多个构造函数](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=97)

总而言之，您的类的构造函数应该用于注入依赖项，并且您的类应该对其依赖项开放。依赖项是您的班级需要的东西。不是它想要的东西，或者它想要的东西，但可以没有。这是它需要的东西。

因此，拥有可选的构造函数参数或重载的构造函数对我来说毫无意义。您唯一的公共构造函数应该**定义**您的类的一组依赖项。这是你的班级提供的合同，上面写着“如果你给我一个`IDigitalCamera`，一个`ISomethingWorthPhotographing`和一个`IBananaForScale`，我会给你`IPhotographWithScale`你能想象到的最好的东西。但如果你在这些事情上吝啬，你就靠自己了” .

这是 Mark Seemann 的一篇文章，它探讨了拥有规范构造函数的一些更好的理由：[State Your Dependency Intent](https://blogs.msdn.com/b/ploeh/archive/2007/06/02/stateyourdependencyintent.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-29T06:37:41.377

您需要担心重构的不仅仅是这个类。这也是所有其他类。这可能只是你的代码库中的一个线程。你有我的同情...我在同一条船上。老板希望所有东西都经过单元测试，不想重写代码，所以我们可以进行单元测试。最终做了一些丑陋的黑客攻击以使其工作。您将不得不重新编写使用静态类的所有内容以不再使用它，并且可能会传递更多内容......或者您可以将其包装在访问单例的静态代理中。这样，您至少可以模拟单例，并以这种方式进行测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-29T06:51:31.567

您的问题不在于构造函数的数量。拥有 9 个构造函数比平常多，但我认为这不一定是错误的。这当然不是你问题的根源。真正的问题是最初的设计都是静态方法。这确实是类过于紧密耦合的一种特殊情况。现在失败的类与函数是静态的想法有关。在有问题的班级中，您对此无能为力。如果你想让这个类成为非静态类，你必须撤消其他人写入代码中的所有耦合。将类修改为非静态，然后更新所有调用者以首先实例化一个类（或从单例中获取一个）。找到所有调用者的一种方法是将函数设为私有并让编译器告诉您。

在 6000 行时，该类不是很有凝聚力。它可能试图做太多事情。在一个完美的世界中，您会将类（以及调用它的人）重构为几个较小的类。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-29T06:41:41.027

足以完成它的任务，但请记住单一职责原则，它指出一个类应该只具有单一职责。考虑到这一点，拥有 9 个构造函数的情况可能很少。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-29T08:26:31.017

我将我的班级限制为只有一个*真正的*构造函数。我将*真正的*构造函数定义为具有主体的构造函数。然后我有其他构造函数，它们只是根据它们的参数委托给真正的构造函数。基本上，我正在链接我的构造函数。

查看您的类，有四个具有主体的构造函数：

```
public MyManager(ISomeManager someManager) //this one I added
{
    this.someManager = someManager;
}

public MyManager(SomeClass someClass, DateTime someDate)
{
    if (someClass != null)
       myHelper = new MyHelper(someOtherClass, someDate, "some param");
}

public MyManager(SomeOtherClass someOtherClass, DateTime someDate)
{
    myHelper = new MyHelper(someOtherClass, someDate, "some param");
}

public MyManager(YetAnotherClass yetAnotherClass, DateTime someDate)
{
    myHelper = new MyHelper(yetAnotherClass, someDate, "some param");
} 
```

第一个是您添加的那个。第二个类似于最后两个，但有一个条件。最后两个构造函数非常相似，除了参数的类型。

我会尝试找到一种方法来创建一个真正的构造函数，将第三个构造函数委托给第四个构造函数，或者反过来。我不确定第一个构造函数是否可以适应，因为它所做的事情与旧构造函数完全不同。

如果您对这种方法感兴趣，请尝试查找 Refactoring to Patterns 这本书的副本，然后转到[Chain Constructors](http://www.industriallogic.com/xp/refactoring/chainConstructors.html)页面。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-29T06:40:43.243

当然，一个类应该具有该类所需的尽可能多的构造函数……这并不意味着糟糕的设计可以接管。

类设计应该是构造函数在完成后创建一个有效的对象。如果你可以用 1 个参数或 10 个参数做到这一点，那就这样吧！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-29T06:48:56.953

在我看来，这门课习惯于做很多事情。我认为您确实应该重构该类并将其拆分为几个更专业的类。然后你就可以摆脱所有这些构造函数，拥有更干净、更灵活、更易维护和更易读的代码。

这不是直接回答您的问题，但我确实相信，如果一个类有必要拥有超过 3-4 个构造函数，则表明它可能应该重构为多个类。

问候。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-29T06:50:18.637

我可以从您的代码中看到的唯一“合法”案例是，如果其中一半使用的是您正在努力从代码中删除的过时类型。当我像这样工作时，我经常有两组构造函数，其中一半被标记为@Deprecated 或@Obsolete。但是您的代码似乎超出了那个阶段....

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-29T06:57:04.800

我一般有一个，可能有一些默认参数。构造函数只会对对象进行最小设置，因此它在创建时有效。如果我需要更多，我将创建静态工厂方法。有点像这样：

```
class Example {
public:
  static FromName(String newname) { 
    Example* result = new Example();
    result.name_ = newname;
    return result;
  }
  static NewStarter() { return new Example(); }

private:
  Example();
} 
```

好吧，这实际上不是一个很好的例子，我会看看我是否能想到一个更好的例子并进行编辑。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-03-25T14:18:22.157

遮阳篷是：无

看看语言迪伦。它有另一个系统。

在构造函数的状态下，您向插槽（成员）添加更多值，然后是其他语言。您可以添加“初始化关键字”。然后，如果您创建一个实例，您可以将插槽设置​​为您想要的值。

当然，您可以设置 'required-init-keyword:' 并且您可以使用更多选项。

它有效，而且很容易。我不想念旧系统。编写构造函数（和析构函数）。

（顺便说一句。它仍然是一种非常快的语言）

* * *

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-12-19T15:11:13.940

我认为具有多个构造函数的类具有多个责任。然而，如果能说服相反的观点，那就太好了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-22T16:33:17.507

构造函数应该只具有创建该类实例所必需的那些参数。所有其他实例变量都应具有相应的 getter 和 setter 方法。如果您计划在将来添加新的实例变量，这将使您的代码更加灵活。

实际上遵循OO原则-

1.  每个类的设计目标是低耦合和高内聚
2.  类应该对扩展开放，对修改关闭。

    你应该有这样的设计 -

    导入静态 org.apache.commons.lang3.Validate.*；公共类员工{私有字符串名称；私人雇员（）{}

    public String getName() { 返回名称；}

    公共静态类 EmployeeBuilder { 私有最终员工雇员；

    ```
    public EmployeeBuilder()
    {
        employee = new Employee();
    }

    public EmployeeBuilder setName(String name)
    {
        employee.name = name;
        return this;
    }

    public Employee build()
    {
        validateFields();
        return employee;
    }

    private void validateFields()
    {
        notNull(employee.name, "Employee Name cannot be Empty");
    } 
    ```

    } }

# linux - 在 Red Had Linux 上检查硬盘问题的最佳策略

> ID：490673
> 
> 赞同：0
> 
> 时间：2009-01-29T06:37:17.867
> 
> 标签：linux

在 red hat Linux 上检查硬盘相关问题的最佳策略（和实用程序）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T06:42:37.733

取决于问题。如果它是某种与故障相关的事情，请检查`dmesg`错误消息以及`smartctl`有关可能出错的信息。如果是性能问题，请检查`smartctl`重新映射的块并`sar -d 1 0`查看磁盘实际被颠簸的硬盘。

除此之外，您实际上遇到了什么问题？更详细的问题会引出更详细的答案。

# c# - 客户端发现响应内容类型为“text/html”，但预期为“text/xml”

> ID：490677
> 
> 赞同：10
> 
> 时间：2009-01-29T06:39:15.210
> 
> 标签：c#, .net-2.0

我收到此错误：

> 客户端发现响应内容类型为“text/html”，但预期为“text/xml”。

我正在为实时搜索添加网络参考。当我构建项目时，它是成功的。但在那之后，一旦我在文本框中输入一些文本并输入搜索按钮，它就会出现此错误。我正在使用我的本地机器并使用带有 C# 的 .net 2.0。
请帮助我...
提前谢谢...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-29T07:16:35.010

正如马特所说，这可能是一个错误页面回来了。

使用像[Fiddler](http://www.fiddlertool.com)这样的代理或像[WireShark](http://wireshark.org)这样的网络嗅探器来查看原始响应是什么 - 这应该可以帮助您了解正在发生的事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-29T06:47:43.447

通常，该错误意味着服务已发回 (HTML) 错误消息，而不是您的客户端所期望的 XML SOAP 响应。

对于您控制的 Web 服务，很容易找到问题，因为您可以在浏览器中手动调用 Web 方法。当它是别人的服务时诊断它有点棘手。您可能能够跟踪到 Web 参考的代码并在引发异常之前检查响应的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-30T06:22:49.450

我发现[Fiddler](http://www.fiddlertool.com/Fiddler2/version.asp)在调试 http 客户端服务器问题时非常有用。它是一个代理，允许您拦截甚至更改请求和响应的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T18:28:37.943

在您的实际代码中，替换以下行：

```
searchRequest.AppID = "APP ID you generated from ..."; 
```

与实际`AppID`，应该是一个`long alpha-numeric sequence`。

# java - Java中不同语言环境的日期显示？

> ID：490679
> 
> 赞同：7
> 
> 时间：2009-01-29T06:39:43.137
> 
> 标签：java

在 java 中，我如何在不同的语言环境中显示日期（例如俄语）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-29T07:04:20.917

就像是：

```
Locale locale = new Locale("ru","RU");
DateFormat full = DateFormat.getDateInstance(DateFormat.LONG, locale);
out.println(full.format(new Date())); 
```

应该做的伎俩。但是[在jdk1.5中出现了俄罗斯日期格式的问题](http://www.freshblurbs.com/incorrect-date-formatting-sun-jdk-1-5-russian-locale-implementation)

> 与俄语的处理是，月份名称在单独呈现时（即在列表或其他内容中）具有不同的后缀，而当它们是格式化日期的一部分时，则具有不同的后缀。因此，即使三月在俄语中是“Март”，但正确格式化今天的日期应该是：“7 Март **а** 2007 г”。
> 
> 让我们看看 JDK 如何格式化今天的日期：7 Март 2007 г。显然错了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-29T06:50:55.983

使用采用语言环境的 SimpleDateFormat 构造函数。您需要首先检查 JDK 是否支持您正在寻找的语言环境，如果不支持，那么您需要实现它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-29T06:49:25.707

使用 java.text.DateFormat 类，您可以构造配置为特定语言环境的内容。

```
DateFormat format = DateFormat.getDateInstance(DateFormat.MEDIUM, theLocaleYouWant);
String text = format.format(new Date());
System.out.println(text); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T06:49:30.107

[DateFormat](http://java.sun.com/j2se/1.5.0/docs/api/java/text/DateFormat.html)类可以帮助您。如 Javadoc 中所述：

> 要为不同的区域设置格式化日期，请在调用 getDateInstance() 时指定它。
> 
> ```
> DateFormat df = DateFormat.getDateInstance(DateFormat.LONG, Locale.FRANCE); 
> ```

因此，您只需要使用适当的语言环境来调整此代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T06:47:01.717

使用具有适当时区和语言环境的 java.util.Calendar。

# asp.net - 在长时间的 Ajax 任务后通知用户，当他们可能在不同的页面上时

> ID：490680
> 
> 赞同：1
> 
> 时间：2009-01-29T06:39:44.900
> 
> 标签：asp.net, jquery, ajax, web-services

我有一个对 Web 服务的 Ajax 请求，通常需要 30-60 秒才能完成。在某些情况下，它可能需要几分钟。在此期间，用户可以继续处理其他任务，这意味着当任务完成时他们可能会在不同的页面上。

有没有办法告诉原始请求已经完成？唯一想到的是：

*   用我自己的 Web 服务包装 Web 服务
*   使用我的网络服务在某处设置标志
*   在后续页面请求中检查该标志

有什么更好的方法吗？如果重要的话，我正在使用 jQuery 和 ASP.Net。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T06:47:27.113

您可以向您的 Web 服务添加另一种方法，该方法允许您检查先前请求的状态。然后您可以使用 ajax 每隔 30 秒左右轮询一次 Web 服务。您可以将请求 ID 或任何内容存储在 Session 中，以便您的 ajax 调用知道要轮询的请求 ID，无论您在哪个页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T06:47:12.730

我会说您必须不时进行轮询以查看请求是否已结束并显示一些通知，例如该站点使用徽章时所做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T07:14:51.753

首先让您的请求立即返回，例如“开始处理...”。然后使用不同的请求来轮询结果。无论是服务器还是客户端的浏览器，长时间打开的 HTTP 会话都不好。此外，用户应该被告知和教育他正在开始一个可能需要一些时间才能完成的请求。

要显示结果，您可以在所有网页中设置“通知区域”。或者，您可以为此设置一个专用页面，并指示用户在那里导航。正如其他人建议的那样，您可以使用轮询来获得结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T06:51:17.980

您可以在您的网站上使用框架，并在一个不可见的框架中执行所有长的 AJAX 请求。框架给开发增加了一定程度的痛苦，但可能是您问题的答案。

我能想到的唯一另一种方法是通过 AJAX 请求实际加载其他页面，这样就没有*真正的*页面重新加载——这意味着 AJAX 请求不会被中断，但可能会导致浏览器出现问题功能（后退/前进、书签等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T07:55:55.867

由于 Web 开发是无状态的（您不能在服务器上设置触发器/事件来更新客户端），因此可行的策略是设置一个状态函数，您可以使用 javascript 计时器间歇性调用该函数来检查您的代码是否已完成执行。完成后，您可以更新视图。

# asp.net - UpdatePanels ASP.Net 之间的通信

> ID：490682
> 
> 赞同：1
> 
> 时间：2009-01-29T06:40:26.287
> 
> 标签：asp.net, updatepanel, multiview

我在一个更新面板中放置了一个树视图，在一个更新面板中放置了每个视图，如下所示

```
 <UpdatePanel id="UP1">
     <ContentTemplate>
       <TreeView/>
     </ContentTemplate>
  </UpdatePanel>

   <MultiView>
    <UpdatePanel id="UP2">
      <View1/>
     </UpdatePanel> 

```

现在我想知道如何确保当我单击 TreeView 的任何节点时，应该显示相应的视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T08:21:59.060

如果您有 Treeview 的单击事件的代码，则另一种接近它的方法是从代码隐藏中调用 UP2.Update()。请记住，UP2 需要将其 RenderMode 设置为 Conditional 才能正常工作。希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T06:53:47.537

将 AsyncPostBackTrigger 添加到第二个 updatePanel，以便在触发 TreeView Click 事件时对其进行更新。

```
<Asp:UpdatePanel id="UP2">
   <View1/>
   <Triggers>
      <asp:AsyncPostBackTrigger ControlID="TreeView1" EventName="Click" />
   </Triggers>
</Asp:UpdatePanel> 
```

好的，这是一个工作示例。

标记：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <table style="width: 100%;">
        <tr>
            <td>
                <asp:UpdatePanel ID="upTreeView" runat="server">
                    <ContentTemplate>
                        <asp:TreeView ID="TreeView1" runat="server" 
                            onselectednodechanged="TreeView1_SelectedNodeChanged">
                            <Nodes>
                                <asp:TreeNode Text="GrandFather" Value="GrandFather">
                                    <asp:TreeNode Text="Father" Value="Father">
                                        <asp:TreeNode Text="Son" Value="Son"></asp:TreeNode>
                                    </asp:TreeNode>
                                </asp:TreeNode>
                            </Nodes>
                        </asp:TreeView>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
            <td>
                <asp:UpdatePanel ID="upView" runat="server">
                    <ContentTemplate>
                        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="TreeView1" 
                            EventName="SelectedNodeChanged" />
                    </Triggers>
                </asp:UpdatePanel>
            </td>
        </tr>
     </table> 
```

后面的代码：

```
 protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
    {
        Label1.Text = TreeView1.SelectedValue;
    } 
```

# javascript - jQuery UI 日期选择器的问题

> ID：490716
> 
> 赞同：21
> 
> 时间：2009-01-29T06:56:30.183
> 
> 标签：javascript, jquery, css, jquery-ui

好的，我已经推出了我自己的主题，我制作了一个自定义的 jQuery UI 包（进度条、日期选择器、滑块）并安装了它。似乎（大部分）工作，除了两件事：

1.  当我的页面第一次加载时，日期选择器 div 是可见的；和
2.  “下一个”和“上一个”文本在我的图标下方以大字体显示。这些例子似乎都没有这个问题。

现在（1）我目前正在解决：

```
#ui-datepicker-div { display: none; } 
```

在另一个 CSS 文件中，但似乎没有一个演示需要这个。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-01-12T23:15:12.887

我使用 #ui-datepicker-div { display: none; 修复了它 }

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-01-12T07:59:27.863

好的，非常感谢，这是工作兄弟，这是我要解决的问题：将此样式写入文件 jquery-ui-1.7.1.custom.css （或您加载的任何 css 文件）：

```
#ui-datepicker-div { display: none; } 
```

然后刷新你的页面

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T08:45:50.853

1.  确保您的 javascript 文件已正确加载，检查丢失的文件或不正确的路径。
2.  确保您的脚本在文档准备好后运行，尝试将您的脚本放在 $(document).ready(){} 之前和/或内部
3.  尝试剥离您自己的 css 以查看是否存在 css 冲突。
4.  在这里为我们发布一些代码。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-01-12T08:12:02.930

我遇到了类似的问题，因为我使用的 jQuery UI 版本使用了错误的样式表版本（我升级了 jQuery UI 而没有升级样式表）。如果您使用的是 jQuery UI 1.8.17，请确保使用的样式表也是 1.8.17 版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T15:04:21.860

对我来说，css 不包括在内（`jquery.ui.datepicker.css`）。所以我`ui-datepicker-div`在页面底部看到了一个 div ( ) 并且我收到了 FireBug 的以下错误：`instActive is undefined`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-29T07:15:00.397

对您的问题一无所知，我相信它可能是您页面上的其他 css 与选择器冲突。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-14T06:05:05.773

请从 instActive.inline 更改为 (typeof(instActive) == 'undefined' || instActive.inline)

在你的 jqueryui.js

有关此 goto->http://code.google.com/p/jquery-datepicker/issues/detail?id=285 的讨论

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-07T20:02:40.953

由于没有人回答问题的第二部分......

将以下两行添加到您的 .ui-icon CSS 中：

```
text-indent: -99999px;
overflow: hidden; 
```

这应该可以修复“上一个”和“下一个”的显示。

# c++ - 包括 boost::filesystem 会产生链接错误

> ID：490720
> 
> 赞同：0
> 
> 时间：2009-01-29T06:57:52.820
> 
> 标签：c++, gcc, boost, linker, mingw

好的，首先，我链接到 boost_system 和 boost_filesystem。

我的编译器是[使用 GCC 4.3.2 定制的 MinGW](http://nuwen.net/mingw.html)

所以当我包括：

```
#include "boost/filesystem.hpp" 
```

我收到链接错误，例如：

```
..\..\libraries\boost\libs\libboost_system.a(error_code.o):error_code.cpp:
    (.text+0xe35)||undefined reference to `_Unwind_Resume'|

..\..\libraries\boost\libs\libboost_system.a(error_code.o):error_code.cpp:
    (.eh_frame+0x12)||undefined reference to `__gxx_personality_v0'| 
```

经过一番搜索后，我发现最常见的是当您尝试将 C++ 程序与 gcc（GNU C 编译器）链接时。但是我打印出[Code::Blocks](http://www.codeblocks.org/)正在运行的确切构建命令，并且它肯定与 g++ 链接。

如果我注释掉这个包括，一切正常。

有任何想法吗？另外，作为一个方面，有人知道获取 Windows 二进制文件以进行提升的好地方吗？构建系统给我带来了问题，所以我使用了这个[自定义 MinGW 包附带的一些二进制文件](http://nuwen.net/mingw.html#contents)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T07:54:50.503

好的，我发现了问题。这有点令人费解。

GCC 在 4.x 分支中逐渐变得更加符合 IS 14882。随着他们的继续，他们正在删除已弃用的非标准投诉功能。

虽然 4.1.x 似乎只弃用了它们而没有删除它们，但 4.3.x 似乎实际上已经将它们删除了。这意味着 4.3.x 和更高版本与在 3.x 分支中编译的东西存在一些向后兼容性问题（它使用了已弃用且现已删除的功能）

我使用的是用 GCC 3.x、4.1.x 和 4.3.x 编译的二进制文件的混合和匹配组合，所以无论我使用哪一个，我都会遇到类似的错误，因为我至少链接到一个二进制文件与我目前正在尝试的编译器不兼容。

I'm now using GCC 4.1.2 and most of my binaries have been compiled with it. I am still how ever using a few binaries from 3.x, which is why I am not upgrading to 4.3.x just yet.

Hope that was less confusing to read than it was to write...

[This](http://archives.devshed.com/forums/development-94/what-is-the-preferred-gcc-version-3-x-or-4t-2287902.html) seems to be a good post addressing some of the issues as they were with 4.1.x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T07:05:36.283

Windows 二进制文件：www.boost.org - 请参阅“入门”页面 - 但如果您在 MingGW 上使用 g++，则不需要这些。一个简单的理解方式是，MingGW 就像操作系统中的一个操作系统，所以你实际上并没有真正使用 Windows。你得到的那些可能是正确的。

不过，不确定您的代码发生了什么，听起来 lib 文件没有以某种方式正确链接。Boost 自己命名它的 lib 文件，因此您实际上并没有明确命名它们，但是您必须在正确的路径上拥有用于 boost 的 lib 文件（并确保它们也已安装/构建，它们可能不是）。我不确定如何使用 g++ 让它们走上正确的道路，因为我没有使用过 MingGW，我只使用了 Visual Studio 的 boost。

# ruby-on-rails - 在 Rails 中更改 controller.action_name

> ID：490735
> 
> 赞同：1
> 
> 时间：2009-01-29T07:11:21.620
> 
> 标签：ruby-on-rails, controller

我在 Rails 上进行一项操作，但我希望从另一项操作中继续处理。我的代码如下所示：

```
 send(new_action)                #call the new_action method
  action_name = new_action        #change the controller.action_name
  render :action => new_action    #inform the view that we're in new_action 
```

这行得通，但是 action_name——尽管它在 ActionController 实例中发生了变化——在从视图中检索时被重置为

```
controller.action_name 
```

有什么方法可以设置并使其粘住吗？

**编辑：**我找到了另一个不涉及此问题的解决方案，即[此处](https://stackoverflow.com/questions/230335//491609#491609)。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T08:27:10.347

你做错了！

ActionPack 内部的这种摆弄几乎肯定会迟早让你伤心。无法保证这些内部结构在不同版本之间不会发生根本性变化，很难维护（对于您自己和其他人），因为您完全忘记了它在做什么以及为什么，并且非常有可能引入细微的错误。

取而代之的是，将两个操作共有的代码放入一个公共方法中，例如控制器中的私有方法，模型中的更多逻辑，或者，如果需要，控制器继承链中更高的公共函数。

# c++ - 使 GCC 和其他 C++ 编译器非常严格

> ID：490737
> 
> 赞同：18
> 
> 时间：2009-01-29T07:12:45.707
> 
> 标签：c++, cross-platform, compilation, compiler-warnings

我正在开发一个大型协作 C++ 项目，该项目在各种 Linux、OS X 和 Windows 上开发和运行。我们使用 GCC、Visual Studio C++ 和英特尔 C++ 编译器在这些平台上进行编译。随着越来越多的人开始为项目开发代码，我们开始在编译和运行时看到奇怪的错误，这些错误是特定于特定操作系统上的特定编译器的。这方面的一个例子是隐含包含某些 OS/编译器对似乎为您找到的标头，意外地从派生类的基类中重载了函数。

我的目标是让 GCC 上的编译更加严格，并在所有平台上捕获更多错误，这样我们就不会一直遇到这些问题。这是我正在考虑尝试通过 Google 和 GCC 手册页找到的 GCC 的标志列表：

*   [-墙](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wall)
*   [-Wextra](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wextra)
*   -Winit-self
*   -Wold-style-cast
*   -Woverloaded-虚拟
*   [-未初始化](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wuninitialized)
*   -Wmissing-declarations
*   -Winit-self
*   [-ansi](https://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-ANSI-support)
*   [-迂腐的](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-pedantic-1)

人们用来使 GCC（以及不太重要的 Visual Studio C++ 和英特尔 C++ 编译器）遵循更严格的 C++ 语言标准的其他标志是什么？请具体说明您正在谈论的编译器和版本，因为其中一些可能不会在所有编译器的所有版本中实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T09:30:28.310

除了其他人建议的迂腐错误，IMO，在编译过程中运行 lint 总是好的。

那里有一些工具：

*   [cpplint](http://sourceforge.net/projects/cpplint/)（免费）
*   [gimple lint](http://www.gimpel.com/)
*   [覆盖率](http://www.coverity.com/)

他们会节省你很多时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-29T07:20:53.553

您可以使用`-pedantic-errors`. 这将防止开发人员忽略它。就此而言，您也可以将所有警告都变成错误，`-Werror`尽管在某些情况下可能会适得其反（尽管可能不在您的情况下）。

总的来说，我认为，就遵守严格的标准而言，这些`-pedantic`选项是最有帮助的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T07:21:56.373

*[-迂腐错误](https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-pedantic-errors-1)*。

[在gcc(1)](http://linux.die.net/man/1/gcc)上查看更多信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-19T07:04:46.010

将以下行复制并粘贴到您的主[CMake](https://en.wikipedia.org/wiki/CMake)文件中。下面的行包含几乎最有用的编译器标志，以便更严格地测试自己。

```
set(CMAKE_CXX_FLAGS "-O0 -fno-elide-constructors -pedantic-errors -ansi -Wextra -Wall     -Winit-self -Wold-style-cast -Woverloaded-virtual -Wuninitialized -Wmissing-declarations    -Winit-self -std=c++98") 
```

如果您不使用 CMake，只需复制双引号中的标志并将它们发送到您的编译器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-29T07:42:55.317

除了`-pendantic`，您还应该提供一个`-std`开关。如果您需要更严格的编译，那么您应该知道您要遵循的标准。通常对于当前的 C++，这将是`-std=c++98`. （`-ansi`在 C++ 模式下执行类似的功能，但`-std=`更明确。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-29T07:21:24.940

在类似的情况下，我们放弃并转向了[ACE 框架](http://www.cs.wustl.edu/%7Eschmidt/ACE.html)，隐藏了平台之间的差异。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-11T23:48:30.553

在研究了几个选项后，我写[了一篇关于这个主题的博客文章。](http://shitalshah.com/p/how-to-enable-and-use-gcc-strict-mode-compilation/)您还需要处理使用其他库但它们没有遵循严格编译的情况。幸运的是，还有一种简单的方法来处理它们。我一直在我的所有项目中广泛使用它。

简而言之，使用以下编译器选项来打开非常严格的模式（以下是我在*[CMakeLists.txt](https://cmake.org/cmake/help/latest/manual/cmake-language.7.html#organization)*中输入的内容）：

```
set(CMAKE_CXX_FLAGS "-std=c++11 -Wall -Wextra  -Wstrict-aliasing -pedantic -fmax-errors=5 -Werror -Wunreachable-code -Wcast-align -Wcast-qual -Wctor-dtor-privacy -Wdisabled-optimization -Wformat=2 -Winit-self -Wlogical-op -Wmissing-include-dirs -Wnoexcept -Wold-style-cast -Woverloaded-virtual -Wredundant-decls -Wshadow -Wsign-promo -Wstrict-null-sentinel -Wstrict-overflow=5 -Wswitch-default -Wundef -Wno-unused -Wno-variadic-macros -Wno-parentheses -fdiagnostics-show-option ${CMAKE_CXX_FLAGS}") 
```

您可以在此处阅读有关如何为特定代码部分打开和关闭此严格模式的更多信息：http: [//shitalshah.com/p/how-to-enable-and-use-gcc-strict-mode-compilation/](http://shitalshah.com/p/how-to-enable-and-use-gcc-strict-mode-compilation/)

# silverlight - Silverlight Web 项目在调试时显示安装图标

> ID：490752
> 
> 赞同：0
> 
> 时间：2009-01-29T07:17:46.647
> 
> 标签：silverlight, silverlight-2.0

当我将 Silverlight 项目添加到空白解决方案时，它会询问我是要添加 Web 项目来托管 silverlight 页面还是自动生成测试页面。奇怪的是，当我自动生成一个测试页面时，一切都很好。但是，当我添加 Web 项目时，我遇到了问题。

我首先收到一条错误消息，说它需要 web 的 bin 文件夹中的 System.Web.Silverlight.dll，所以我这样做了。然后当我运行它时，我得到的只是“安装 Silverlight”图标。我尝试过使用和/或删除最低版本标签和版本标签，但我似乎无法让它以这种方式工作。

以前有人遇到过这个问题吗？如果是这样，你是如何绕过它的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T11:35:36.653

听起来您安装了旧工具包或项目模板已损坏。

尝试重新安装[Visual Studio 的最新 Silverlight 工具](http://www.microsoft.com/downloads/details.aspx?FamilyId=c22d6a7b-546f-4407-8ef6-d60c8ee221ed&displaylang=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-22T08:24:12.607

要摆脱第一个错误，请转到您的 Web 项目中的引用，然后转到 System.Web.Silverlight 的属性并转到其属性。使 CopyLocal 为真。

要摆脱安装图标问题，请转到您的 aspx 页面中的 Silverlight 控件标记并删除 MinimumVersion 属性。这似乎不是最理想的解决方案，但至少可以调试。

# svn - 除了与 TFS SCM 集成的 TFS 本身之外，还有其他错误/问题跟踪器吗？

> ID：490753
> 
> 赞同：1
> 
> 时间：2009-01-29T07:18:09.593
> 
> 标签：svn, tfs, version-control, bug-tracking

我们目前使用 BugZilla 进行错误/问题跟踪，但正在寻找其他更适合我们的解决方案。

我们真正想要的功能之一是与 SVN 和 TFS 的集成，因为我们在内部使用两者（Java 人员使用 SVN，.NET 人员使用 TFS），但我还没有找到任何人都这样做。许多确实与 SVN 集成，但除了 TFS 本身与 TFS SCM 集成之外，我还没有找到任何东西。还有其他的吗？

编辑：感谢 Martin 和 gregmac 的回复。在我们进一步调查该做什么时，我会随身携带这些信息。

（如果可以的话，我会将你的两个答案都设置为我的问题的答案，但将那个答案交给了 gregmac，因为它的代表比 Martin 少一点，而且 SvnBridge 可能会让我们保持 TFS 源代码控制；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T14:58:34.653

你可以试试[SvnBridge](http://www.codeplex.com/SvnBridge)，它让你的 TFS 服务器看起来像一个 SVN 服务器。这将允许您拥有 Bugzilla 或指向多个 SVN 服务器的任何指向 - 或者如果它不支持，您可以将 TFS svn 存储库设置为[svn:external](http://svnbook.red-bean.com/en/1.0/ch07s03.html)。

另一方面，我同意 Martin 的观点，如果您希望将所有内容集成在一起，那么您可能也应该集成您的存储库，并让 .NET 使用 svn（因为 SVN 比 TFS 更便携）。为此，我强烈推荐[VisualSVN](http://visualsvn.com) - 它与 VisualStudio 集成得非常好。

当然会有一个学习曲线，因为 SVN / VisualSVN 将不同于 TFS.. 但如果你能克服这一点，并且在整个公司共享错误跟踪是一个足够大的胜利，你应该领先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T14:34:54.670

这看起来像是无耻的自我推销，但您可能想看看[Teamprise](http://www.teamprise.com)将您的 Java 人员挂钩到 TFS 存储库。我们有很多快乐的客户正在这样做。

或者，您可以尝试使用[TFS 迁移和同步工具包](http://www.codeplex.com/MigrationSyncToolkit)将您的 SVN 和 Bugzilla 存储库与 TFS 链接在一起，但这并不重要，我还没有遇到成功做到这一点的人。

为了公平起见，我还应该指出，您也可以让 .NET 人员使用 Java 团队正在使用的开源堆栈——但是让工作项跟踪、版本控制和构建子系统之间的集成工作该堆栈将是非平凡的，并且不太可能给他们习惯的经验。

# python - 正则表达式：当字符串包含正则表达式模式的一部分时匹配字符串的一部分

> ID：490762
> 
> 赞同：1
> 
> 时间：2009-01-29T07:21:53.923
> 
> 标签：python, regex

我想通过使用一个正则表达式来减少我必须编写的模式的数量，当它出现在字符串中时，它会拾取任何或所有模式。

正则表达式可以做到这一点吗？

```
E.g. Pattern is: "the cat sat on the mat"

I would like pattern to match on following strings:
"the"
"the cat"
"the cat sat"
...
"the cat sat on the mat" 
```

但它不应该匹配以下字符串，因为虽然有些词匹配，但它们被一个不匹配的词分割：“the dog sat”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-29T07:42:14.740

这个：

```
the( cat( sat( on( the( mat)?)?)?)?)? 
```

会回答你的问题。删除“可选组”括号“（...）？” 对于非可选的部分，为必须匹配的事物添加额外的组。

```
the                       // complete match
the cat                   // complete match
the cat sat               // complete match
the cat sat on            // complete match
the cat sat on the        // complete match
the cat sat on the mat    // complete match
the dog sat on the mat    // two partial matches ("the") 
```

您可能想要添加一些前置条件，例如行锚的开始，以防止表达式匹配最后一行中的第二个“the”：

```
^the( cat( sat( on( the( mat)?)?)?)?)? 
```

**编辑：**如果您添加一个后置条件，例如行尾锚，则在最后一个示例中将完全阻止匹配，也就是说，最后一个示例根本不匹配：

```
the( cat( sat( on( the( mat)?)?)?)?)?$ 
```

提示的学分转到[VonC](https://stackoverflow.com/questions/490762/regex-matching-parts-of-a-string-when-the-string-contains-part-of-a-regex-patter#490785)。谢谢！

后置条件当然可能是您期望匹配的其他内容。

或者，您删除最后一个问号：

```
the( cat( sat( on( the( mat)?)?)?)?) 
```

但请注意：这会使单个“the”不匹配，因此第一行也将不匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T07:35:42.650

它可能相当复杂：

```
(?ms)the(?=(\s+cat)|[\r\n]+)(:?\s+cat(?=(\s+sat)|[\r\n]+))?(:?\s+sat(?=(\s+on)|[\r\n]+))?(:?\s+on(?=(\s+the)|[\r\n]+))?(:?\s+the(?=(\s+mat)|[\r\n]+))?(:?\s+mat)?[\r\n]+ 
```

意义：

*   `the`只有在后面跟着“ `cat`”或行尾时，我才想要“ ”
*   那么我想要“ `cat`”（可选）只有在后面跟着“ `sat`”
*   所以一个
*   后跟和行尾（确保不匹配部分“猫走......”）

它确实匹配

**猫坐在垫子**
**上**
**猫坐在**
垫子
上

* * *

再想一想，[托马拉克的答案](https://stackoverflow.com/questions/490762#490794)更简单（如果固定，则以“$”结尾）。
我将我的保留为 wiki 帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T07:24:58.880

如果您知道匹配总是从第一个字符开始，那么直接在循环中匹配字符会快得多。我认为Regex无论如何都不会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T14:01:49.493

也许以不同的方式思考这个问题会更容易，更合乎逻辑。

而不是将模式与字符串匹配......如何使用字符串作为模式并在模式中查找它。

例如在哪里

string = "猫坐在上面" 模式 = "猫坐在垫子上"

string 始终是模式的子集，只是进行正则表达式匹配的一种情况。

如果这是有道理的;-)

# asp.net-mvc - 如何在实体框架中保存导航属性

> ID：490769
> 
> 赞同：3
> 
> 时间：2009-01-29T07:27:24.210
> 
> 标签：asp.net-mvc, entity-framework

我正在尝试使用存储库模式来使用实体框架保存实体。我不清楚如何保存导航属性（如下面的帐户）。任何人都可以对此有所了解。尤其是如何将 AccountId 从 MVC 控制器一直设置到保存它的存储库。

谢谢！

--- 示例代码 ---

```
public void SavePerson(Person person)
    {           
        if (person != null)
        {
            using (xxxxxxEntities bbEntities = new xxxxxxEntities())
            {
                //see if it's in the db
                Person cPerson;

                ObjectQuery<Person> persons = bbEntities.Person;

                cPerson = (from p in persons
                         where p.PersonId == person.PersonId
                         select p).FirstOrDefault() ?? new Person();

                //synch it
                cPerson.Account.AccountId = person.Account.AccountId; //<=== ????
                cPerson.Active = person.Active;
                cPerson.BirthDay = person.BirthDay;
                cPerson.BirthMonth = person.BirthMonth;
                cPerson.BirthYear = person.BirthYear;
                cPerson.CellPhone = person.CellPhone;
                cPerson.CreatedBy = person.CreatedBy;
                cPerson.CScore = person.CScore;

Etc.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T13:27:06.083

我想你可能会很难做到这一点。有很多关于存储库模式的帖子，最适合 MVC 的方式是获取项目，然后使用表单更新它，然后保存它。您正在做的是将项目传递到您的存储库，再次获取它，然后使用对象更新它。

但这不是你问的问题；

```
cPerson.Account = (from a in Account
                   where a.AccountId.Equals(person.Account.AccountId)
                   select a).FirstOrDefault(); 
```

您需要将 Account 对象设置为您尝试引用的帐户的实例，如下所示。您可以并且可能应该将此代码提取到帐户的单独存储库中，只需确保它们共享相同的实体上下文即可。

# windows - 服务控制器无法启动服务 - 访问被拒绝

> ID：490772
> 
> 赞同：2
> 
> 时间：2009-01-29T07:30:05.903
> 
> 标签：windows

我在 win 表单应用程序中使用服务控制器来启动和停止侦听消息队列并处理消息的服务。从 win 表单应用程序启动服务时，我收到拒绝访问错误。我使用的是 Vista Home Basic 和管理员类型的帐户，并且我使用了登录为 - 本地系统帐户。可以使用服务管理控制台正常启动和停止服务，但是当我尝试以编程方式启动服务时出现错误。有人可以就如何解决此问题提供一些指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-31T20:52:17.777

打开服务控制台时，您可能已经提升了，但对于您自己的应用程序却没有。

添加“应用程序清单文件”（即 Visual Studio 中模板的名称）并将请求的执行级别设置为“requireAdministrator”（清单文件中的注释会有所帮助）。

# c++ - C++异常处理运行时是如何实现的？

> ID：490773
> 
> 赞同：89
> 
> 时间：2009-01-29T07:30:14.563
> 
> 标签：c++, exception, error-handling, language-implementation

我对 C++ 异常处理机制的工作原理很感兴趣。具体来说，异常对象存储在哪里以及它如何通过多个范围传播直到被捕获？它是否存储在某个全球区域？

由于这可能是特定于编译器的，有人可以在 g++ 编译器套件的上下文中解释这一点吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-01-29T10:19:22.627

实现可能会有所不同，但有一些基本的想法来自需求。

异常对象本身是在一个函数中创建的对象，在其调用者中销毁。因此，在堆栈上创建对象通常是不可行的。另一方面，许多异常对象并不是很大。因此，如果实际需要更大的异常对象，可以创建例如 32 字节缓冲区并溢出到堆。

至于实际的控制权转移，存在两种策略。一种是在堆栈本身中记录足够的信息以展开堆栈。这基本上是要运行的析构函数和可能捕获异常的异常处理程序的列表。当异常发生时，返回执行这些析构函数的堆栈，直到找到匹配的 catch。

第二种策略将此信息移动到堆栈外的表中。现在，当发生异常时，调用堆栈用于找出进入但未退出的范围。然后在静态表中查找它们以确定抛出的异常将在哪里处理，以及在其间运行哪些析构函数。这意味着堆栈上的异常开销更少；无论如何都需要返回地址。这些表是额外的数据，但编译器可以将它们放在程序的按需加载段中。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-01-29T08:28:28.877

这在 15.1 抛出标准异常中定义。

throw 创建一个临时对象。
未指定如何分配此临时对象的内存。

在创建临时对象后，控件被传递给调用堆栈中最近的处理程序。在 throw 和 catch 点之间展开堆栈。随着堆栈展开，任何堆栈变量都以与创建相反的顺序被销毁。

除非重新抛出异常，否则临时文件会在处理程序结束时被销毁。

注意：如果通过引用捕获，则引用将引用临时对象，如果按值捕获，则将临时对象复制到值中（因此需要复制构造函数）。

来自 S.Meyers 的建议（通过 const 引用获取）。

```
try
{
    // do stuff
}
catch(MyException const& x)
{
}
catch(std::exception const& x)
{
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-01-29T07:57:44.727

您可以在[这里](http://www.codeproject.com/KB/cpp/exceptionhandler.aspx)查看详细说明。

看看普通 C 语言中用于实现某种基本异常处理的技巧也可能会有所帮助。这需要以下列方式使用 setjmp() 和 longjmp()：前者保存堆栈以标记异常处理程序（如“catch”），而后者用于“抛出”一个值。“抛出的”值被看作是从被调用函数返回的。当再次调用 setjmp() 或函数返回时，“try 块”结束。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-22T08:29:12.073

我知道这是一个老问题，但是有一个很好的阐述，在这里解释了 gcc 和 VC 中使用的方法：[http ://www.hexblog.com/wp-content/uploads/2012/06/Recon- 2012-Skochinsky-Compiler-Internals.pdf](http://www.hexblog.com/wp-content/uploads/2012/06/Recon-2012-Skochinsky-Compiler-Internals.pdf)

# javascript - XML dom的性能及其正确使用

> ID：490778
> 
> 赞同：1
> 
> 时间：2009-01-29T07:32:41.220
> 
> 标签：javascript, xml, dom

我听说了关于 DOM 的所有这些坏事。不要使用 Activex 对象 XmlDom，或者它是“dom”。哦，上帝，你正在使用 DOM？这种用法的直截了当。

但是我们一直在使用 document.GetElementbyId 和 ...Name..

那么在调用这些方法时我实际使用的是什么？这就是浏览器正在使用的...

我工作的公司让我们远离了活跃的 x dom 对象的使用，但这不是我们一直在使用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-29T08:10:38.583

您需要区分 HTML DOM 和 XML DOM，然后再区分在浏览器内部和外部使用 XML DOM。虽然 XML DOM 确实对大型文档有很大的内存占用，但 MSXML6 DOM 非常快。XSLT 转换，而且 XPath 查询也可以根据定义查询整个文档，所以我认为为此使用流式接口并不容易。在浏览器中，您使用 JavaScript 操作 HTML DOM。您当然可以使用 Flash 或 Silverlight 进入 RIA 空间，但这也需要 ActiveX 控件。我会推荐 jonelf 提出的 jQuery，并尽可能多地使用 CSS 来制作 UI 效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-30T00:39:33.170

如果您想坐下来观看视频，请参阅Douglas Crockford在[Yahoo 的 YUI 剧院上发表的演讲——“](http://developer.yahoo.com/yui/theater/)[不方便的 API：DOM 理论](http://video.yahoo.com/video/play?vid=111582)”。

78 分钟关于 DOM ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T07:43:58.780

XmlDom 本身并没有什么问题，但是除了最小的 XML 文档之外的任何东西的性能都很差。在引擎盖下，没有多少（任何）代码会使用它。将 Xml 文档视为流，然后一次处理一点会更有效，这就是浏览器正在做的事情。

DOM 速度慢的一个原因是它会在开始时加载整个文档，即使您只是在寻找第一个标签 - uuggh。我感觉这与 XSLT 引擎的实现方式有关 - 很难将 Xsl 应用于流并让一切正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T08:02:20.147

我不知道 IE 在幕后使用了什么，但也可能是 GetElementById 最终使用了某些组件。将 JScript ActiveX 方式抛在后面仍然不是一个坏主意，因为它有点被弃用并且仅限于 JScript。

我想说的是你不应该担心查询 DOM。整个 AJAX 范式都基于此。

我还建议使用 Prototype 或 jQuery。

```
$('comments') 
```

比好多了

```
document.GetElementById('comments') 
```

# f# - F# 度量单位，通用性问题 2

> ID：490780
> 
> 赞同：0
> 
> 时间：2009-01-29T07:33:07.723
> 
> 标签：f#, units-of-measurement

继[这个](https://stackoverflow.com/questions/460766/f-units-of-measure-problems-with-genericity)问题之后，我似乎仍在与可能的前沿作战，尽管我认为我没有做任何特别前沿的事情：

```
type Vector2d = { X: float<'u>; Y: float<'u> } 
```

给我*错误 FS0039：未定义度量单位参数“u”。*

和

```
type Vector2d = { X: float<_>; Y: float<_> } 
```

给我*错误 FS0191：此声明中不允许使用匿名度量单位变量。*

函数是否可以处理“通用”度量单位，但类型不能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T10:17:17.090

```
type Vector2d<[<Measure>]'u> = { X: float<'u>; Y: float<'u> } 
```

应该做的伎俩

注意：这在 1.9.6.2 CTP 版本中是正确的，但这个 api 目前还不是稳定的

# wpf - 如何将 ScrollViewer 放在它应该滚动的内容之上

> ID：490784
> 
> 赞同：9
> 
> 时间：2009-01-29T07:35:41.667
> 
> 标签：wpf, scrollbar, controltemplate, styling, scrollviewer

我想把我的 ScrollViewer 放在这样一种方式，它重叠/坐在它滚动的内容之上。我会设置 ScrollViewer 的不透明度，以便内容在下面可见。

据我了解默认的 ScrollViewer，这似乎不可能开箱即用，因为内容嵌套在 ScrollViewer 内。

关于如何使这项工作的任何想法？

编辑：我知道 ScrollViewer 是一个装饰器，并且内容不知道 ScrollViewer。这种分离很好，我不希望内容知道 ScrollViewer。我尝试做的是纯粹的视觉（布局）事情。只需在内容顶部显示 ScrollViewer。ScrollViewer 的行为应保持不变。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-29T12:38:39.693

我想我现在明白你所说的“在顶部”是什么意思 - 一种方法是使用控制模板，使 ScrollContentPresenter 跨越网格的两行和两列，而 ScrollBars 位于第二行和第二列。滚动条设置为半透明。内容现在将在滚动条下绘制！

我尝试过的风格如下：

```
<Style x:Key="SVStyle" TargetType="{x:Type ScrollViewer}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollViewer}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <ScrollContentPresenter Grid.ColumnSpan="2" Grid.RowSpan="2"/>
                        <ScrollBar Name="PART_VerticalScrollBar"
                            HorizontalAlignment="Right"
                            Opacity="0.5" 
                            Grid.Column="1"
                            Value="{TemplateBinding VerticalOffset}"
                            Maximum="{TemplateBinding ScrollableHeight}"
                            ViewportSize="{TemplateBinding ViewportHeight}"
                            Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" />
                        <ScrollBar Name="PART_HorizontalScrollBar"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            Opacity="0.5"
                            Grid.Row="1"
                            Value="{TemplateBinding HorizontalOffset}"
                            Maximum="{TemplateBinding ScrollableWidth}"
                            ViewportSize="{TemplateBinding ViewportWidth}"
                            Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

示例用法：

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" Style="{StaticResource SVStyle}" >
    <StackPanel>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >World World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
        <Button Height="100" Width="800" >Hello World</Button>
    </StackPanel>
</ScrollViewer> 
```

结果是这样的：

![花哨的透明滚动](https://i.stack.imgur.com/bBKW6.png)

修改这一点很简单，使 ScrollBars 最初是非常透明的（例如，Opacity = 0.2），并在鼠标进入 ScrollBar 时使它们变得更加不透明。这将是一个很好的效果，并且会在需要它们之前将 ScrollBars 挡在外面。

编辑：

我已经在[我的博客](http://www.thinkbottomup.com.au/site/blog/WPF_Transparent_Scrollbars_in_ScrollView)上写了这个，供那些想要更多细节的人使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T08:11:08.613

这个想法是 ScrollViewer 是它滚动和剪辑的东西的装饰器。被滚动的东西完全不知道滚动。这既简单又优雅-为什么在您的情况下还不够？

话虽如此，如果 ScrollViewer 没有执行您想要的操作，我建议您创建 ScrollBar 控件并处理由它生成的事件，在事件处理程序中移动您希望滚动的内容。你甚至可以做一些花哨的数据绑定来避免编写事件处理程序。我不确定您将如何正确剪辑内容，但这是一种新的蠕虫。

如果您需要将一个控件布局在另一个之上，请使用画布控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T09:25:28.817

我不确定您是否希望将 scrollviewer 的滚动条放在内容之上 - 如果是，请回答 1，如果您希望整个 scrollViewer 在内容之上，请参阅答案 2。

1) 您可以通过应用模板来更改 WPF 中任何内容的视觉表示。在这种情况下，诀窍是找到 ScrollViewer 的现有表示形式，然后基本上重新实现所有相同的视觉效果，只是根据需要更改 ScrollBar 的位置。有几种方法可以找到控件的所有视觉效果 - 最简单的是来自[WPF MSDN 示例- 并且微软](http://msdn.microsoft.com/en-us/library/ms771290.aspx)[提供](http://msdn.microsoft.com/en-us/library/ms771748.aspx)的 ScrollViewer 示例很好地展示了如何更改滚动条的位置。

顺便说一句，微软倾向于在他们的示例中加载很多你并不真正需要的额外 Xaml - 使用模板（无情地删减代码）直到它只做你想要的，而不是更多。

2) 我将滚动视图放置在内容之上的方法是使用两个相互叠加的滚动查看器。“顶部”很小，半透明（不透明度 = 50）并处理滚动，底部较大并且有文档。从顶部的 ScrollViewer 连接滚动事件，这样它也将滚动底部的事件。

# wpf - 将 WPF MediaElement 与高清（H.264、720P）视频一起使用时出现问题

> ID：490791
> 
> 赞同：1
> 
> 时间：2009-01-29T07:41:11.560
> 
> 标签：wpf, mediaelement

我正在使用媒体元素在 WPF 中呈现视频。除 H.264 视频外，所有视频都运行良好。它们在屏幕上呈现时有一些口吃问题。我的机器配置远远超过播放此视频的推荐要求。另一个令人惊讶的事实是，当我在 Window Media Player 或任何其他播放器中播放此视频时，视频渲染得非常好。MediaElement 的任何解决方案或替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-11T01:01:00.690

您可以从我的开源项目中尝试我的 MediaUriElement： [http ://wpfmediakit.codeplex.com](http://wpfmediakit.codeplex.com)

它比 MediaElement 具有更好的媒体兼容性，但如果是解码器过滤器问题或性能问题，我的项目将无能为力。您使用的是什么 h264 编解码器。[您可能想从http://ffdshow-tryout.sourceforge.net/](http://ffdshow-tryout.sourceforge.net/)试用 ffdshow 。

-杰尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T17:35:11.977

WPF 不支持 H.264 视频

# java - 尝试重新启动/停止 Tomcat 5.0.30（作为 Windows 服务安装）时出现错误 1053

> ID：490792
> 
> 赞同：4
> 
> 时间：2009-01-29T07:41:19.190
> 
> 标签：java, tomcat, windows-services

我将 Tomcat 5.0.30 安装为 Windows 服务。这项服务开始非常好。但是，当我尝试从 Windows 服务控制台重新启动或停止服务时，出现以下错误：

*

> **无法停止本地计算机上的 Tomcat 服务。错误1053：服务没有及时响应启动或控制请求**

*

我最近从 5.0.28 升级到 Tomcat 5.0.30，之前它运行得非常好。它是导致此问题的最新版本。谷歌没有太大帮助。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T11:34:35.483

Are you positive that you have removed all references to the old version. I found a similar problem once when the service was referring to the old version. I had to uninstall it and reinstall the service to pick up the new version.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T08:05:52.213

我建议尝试从命令行启动 tomcat，然后按 control + C 看看它是否停止。我猜它挂起这就是为什么给出错误。如果是这种情况，请通过在 DEBUG 级别打开日志再试一次，并查看日志中是否有任何内容。仍然没有线索，那么您可以进行线程转储并分析以查看挂起的线程。

# css - CSS文本替换为图片，需要超链接

> ID：490795
> 
> 赞同：1
> 
> 时间：2009-01-29T07:42:28.797
> 
> 标签：css, xhtml, accessibility

我正在使用该`text-indent`技术将我的`<h1/>`标签替换为我的网站图像，如下所示：

```
<h1 title="Homepage">My logo</h1> 
```

CSS：

```
#header h1 {
    float: left;
    background: transparent url('../images/logo.png');
    width: 214px;
    height: 64px;
    text-indent: -9999px;
} 
```

唯一的问题是我仍然想让新图像充当超链接。我试着做：

```
<h1 title="Homepage"><a href="#">My logo</a></h1> 
```

但由于它是缩进的，所以链接也是。我想知道是否有人对如何做到这一点有任何建议并且仍然是有效的 XHTML。

**编辑**我宁愿以具有屏幕阅读器的用户可以访问的方式进行操作，从我阅读的内容来看，`display:none`某些阅读器无法使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-29T08:18:20.037

有很多方法可以做到这一点，这是我更喜欢的方式，效果很好，并且易于实现。

```
<div id="header">
    <h1><a href="/" title="Homepage">Homepage</a></h1>
</div> 
```

然后我做这个 css，这也被称为“Leafy/Langridge 图像替换”方法

```
#header h1 a {
    display: block;
    padding: 22px 0 0 0;
    overflow: hidden;
    background-image: url(../images/sidebar/heading.png);
    background-repeat: no-repeat;
    height: 0px !important;
    height /**/:22px;
} 
```

您唯一需要编辑的是`height`, 和`padding-top`. 在这个例子中它是`22px`，这应该等于你的图像高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T07:55:22.813

你为什么要使用负缩进 - 只需使用 img 标签的 alt 属性？

```
<h1 title="Homepage><a href="#"><img src="images/logo.png" alt="My logo"/></a></h1> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T08:03:33.420

@Partrik Hägne：你不应该使用`display:none`，因为一些屏幕阅读器会忽略它......

您可以在[http://css-tricks.com上](http://css-tricks.com)[查看 CSS 图像替换的九种技术](http://css-tricks.com/630-css-image-replacement/)列表，其中描述了每种解决方案的优缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T07:49:49.907

您可以做的是删除缩进。并使用跨度来隐藏：

```
<h1 title="Homepage"><a href="#"><span>My logo</span></a></h1>

#header h1 span
{
  display: none;
} 
```

您可能还必须设置 A 标记的宽度和高度，因为使用此技巧不会填充任何内容。

# web - 为网页创建流畅的布局模式

> ID：490796
> 
> 赞同：0
> 
> 时间：2009-01-29T07:42:48.733
> 
> 标签：web, css

我希望我网站上的每个页面都具有如下所述的骨架结构。根据用户选择的模板 ( `saved choice/default css`)，页面的外观会发生变化。

我打算使用[960.gs](http://960.gs)或蓝图 CSS 框架进行布局处理。

我是 CSS 和布局的新手。我的要求最好的例子是它是如何在[jimdo.com/weebly.com](http://jimdo.com)上[完成](http://weebly.com)的。我正在寻找建议，以便我可以快速学习并在迭代中实现它。

解决此类设计问题的最佳方法是什么。我确信它需要创造性的弯曲，但到目前为止我想采取书呆子的方法，以便我可以将它用于我自己的解决方案。

```
<div id="container">
    <div id="header"></div>
    <div id="navigation"></div>
    <div id="sidebar"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-01T07:31:57.703

这[3 列布局生成器](http://www.pagecolumn.com/3_column_div_generator.htm)可能会有所帮助。

# wcf - Apache.NMS.WCF

> ID：490799
> 
> 赞同：5
> 
> 时间：2009-01-29T07:44:15.080
> 
> 标签：wcf, activemq

只是好奇是否有人完全弄乱了 Apache.NMS.WCF 代码。对于一个工作项目，我已经开始尝试将 Apache.NMS WCF 绑定与 ActiveMQ 集成。我已经取得了一些进展，但如果有人有任何链接或信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-02-16T22:33:05.377

Apache.NMS.WCF 项目已经有一段时间没有人积极维护它了，我们真的很想有人为 NMS 提供商做出贡献。您提出的任何文档或示例我都可以添加到 Wiki 站点。我自己对 WCF 没有太多经验，否则我会尝试提供帮助。

# c++ - 在 makefile 中描述头文件位置

> ID：490803
> 
> 赞同：3
> 
> 时间：2009-01-29T07:51:40.837
> 
> 标签：c++, include, makefile

在我正在研究的一个新项目中，我有以下目录结构：

```
Project_base
|---- src
|---- bin
|---- h
| Makefile 
```

在我的源文件中，我包含如下所示：

```
#include "../h/SomeHeaderFile.h" 
```

而不是更正确的形式：

```
#include "SomeHeaderFile.h" 
```

我需要在我的 makefile 中添加什么，以便我可以删除包含的相对路径，以便它们看起来正常？

* * *

**补充：**另外，我在 CDT（Eclipse 的 C++）中在哪里设置它，以便在设计时也能反映出来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T07:57:42.807

您需要添加`-I../h`传递给 gcc 的参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T07:57:20.750

向您的 CFLAGS 添加一个标志，以便标头的根是标头搜索路径的一部分：

```
-IProject_base/h 
```

这样 gcc/g++ 除了默认的头文件目录外，也会在这里查看。

# apache-flex - 在 Adob e Flex/AIR 中使用 HTTPService 对象进行 HTTP 基本身份验证

> ID：490806
> 
> 赞同：31
> 
> 时间：2009-01-29T07:53:37.480
> 
> 标签：apache-flex, air, http-authentication, httpservice

我正在尝试从 Adob​​e AIR 应用程序中请求需要基本授权标头的 HTTP 资源。我尝试手动将标头添加到请求中，以及使用 setRemoteCredentials() 方法设置它们，但无济于事。

这是代码：

```
<mx:Script>
    <![CDATA[
        import mx.rpc.events.ResultEvent;
        import mx.rpc.events.FaultEvent;

        private function authAndSend(service:HTTPService):void
        {
            service.setRemoteCredentials('someusername', 'somepassword');
            service.send();
        }

        private function resultHandler(event:ResultEvent):void
        {
            apiResult.text = event.result.toString();
        }

        private function resultFailed(event:FaultEvent):void
        {
            apiResult.text = event.fault.toString();
        }
    ]]>
</mx:Script>

<mx:HTTPService id="apiService"
    url="https://mywebservice.com/someFileThatRequiresBasicAuth.xml"
    resultFormat="text"
    result="resultHandler(event)"
    fault="resultFailed(event)" />

<mx:Button id="apiButton"
    label="Test API Command"
    click="authAndSend(apiService)" />

<mx:TextArea id="apiResult" /> 
```

但是，仍然会弹出一个标准的基本身份验证对话框，提示用户输入用户名和密码。我有一种感觉，我这样做的方式不对，但我能找到的所有信息（Flex 文档、博客、Google 等）要么没有用，要么太模糊，无法提供帮助。

任何黑魔法，哦 Flex 大师？谢谢。

* * *

**编辑：**将 setRemoteCredentials() 更改为 setCredentials() 会产生以下 ActionScript 错误：

```
[MessagingError message='Authentication not supported on DirectHTTPChannel (no proxy).'] 
```

* * *

**编辑：**经过 Adob​​e 的一些关注，问题解决了。有关完整说明，请参阅下面的帖子。此代码适用于任意长度的 HTTP 身份验证标头。

```
import mx.utils.Base64Encoder;
private function authAndSend(service:HTTPService):void
{
        var encoder:Base64Encoder = new Base64Encoder();
        encoder.insertNewLines = false; // see below for why you need to do this
        encoder.encode("someusername:somepassword");

        service.headers = {Authorization:"Basic " + encoder.toString()};                                                
        service.send();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-11T22:35:30.913

终于得到了Adobe的一些关注并得到了答案。长 HTTP 身份验证标头的问题在于，默认情况下，Base64Encoder 类将每 72 个字符注入换行符。显然，这会导致一段 base-64 编码字符串被解释为新的标头属性，从而导致错误。

您可以通过设置（在上面的示例中）`encoder.insertNewLines = false;`默认设置为 true 来解决此问题。

我已将上述代码修复为适用于任意长的身份验证字符串。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-09-15T03:52:57.410

啊。痛苦，苦难。纯粹的苦难。

虽然您已经知道如何在拨打电话之前添加标题，但令人讨厌的事实是，在 Flash/浏览器集成空间的深处，您的标题再次被删除。

来自我去年在[verveguy.blogspot.com上的博文](http://verveguy.blogspot.com)

所以我揭开了真相。（我认为）它比想象的更折磨

1/ 所有 HTTP GET 请求都被剥离了标头。它不在 Flex 堆栈中，因此它可能是底层 Flash 播放器运行时

2/ 所有具有非内容类型的HTTP GET请求`application/x-www-form-urlencoded`都变成POST请求

3/ 所有没有实际发布数据的 HTTP POST 请求都转换为 GET 请求。见 1/ 和 2/

4/ 所有 HTTP PUT 和 HTTP DELETE 请求都变成 POST 请求。这似乎是 Flash 播放器所坚持的浏览器限制。（？）

实际上，这归结为，如果您想在所有请求中传递标头，您应该始终使用 POST，并且您应该找到另一种方式来传达您“真正想要”的操作的语义。Rails 社区已决定将`?_method=PUT/DELETE`其作为解决 4/ 浏览器问题的解决方法

由于 Flash 在 GET 上添加了美妙的标题剥离痛苦，因此我也将`?_method=GET`其用作解决方法。但是，由于这在 3/ 时发生故障，因此我将一个虚拟对象作为编码的 POST 数据传递。这意味着我的服务需要忽略`?_method=GET`请求中的虚拟发布数据。

在这一点上了解 2/ 至关重要。这浪费了我很多时间。

我已经将所有这些处理构建到一个支持 MXML 标记的新 RESTService 类中，因此可以假装这在客户端不存在。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T14:46:53.710

setCredentials() 和 setRemoteCredentials() 方法旨在用于 Flex/LiveCycle 数据服务，因此它们可能不适用于您的情况。

这应该对你有用。我能够在我的服务器上重现这种行为，而且这个修复似乎成功了；考虑到您认为它是多么常见的用例，这似乎仍然有点奇怪，这不是对 API 用户更友好，但尽管如此，在给定有效的 SSL 证书的情况下，我已经测试并验证了它的工作原理：

```
private function authAndSend(service:HTTPService):void
{
        var encoder:Base64Encoder = new Base64Encoder();
        encoder.encode("someusername:somepassword");

        service.headers = {Authorization:"Basic " + encoder.toString()};                            
        service.send();
} 
```

希望能帮助到你！感谢您的发帖——我相信我自己迟早会遇到这个。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-13T13:01:57.087

这真的帮助了我！谢谢！我使用 Flex Builder 3

注意：WebService 的属性标头是只读的。所以我尝试使用httpHeaders。有用！

```
 var encoder:Base64Encoder = new Base64Encoder();
    encoder.insertNewLines = false;
    encoder.encode("test:test");

    sfWS.httpHeaders = {Authorization:"Basic " + encoder.toString()}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-14T21:43:44.117

我在使用 HTTP Basic Authenticated Webservice 时遇到了同样的问题。这是我的解决方案；它工作正常：

```
private function authAndSend(service:WebService):void
{
    var encoder:Base64Encoder = new Base64Encoder();
        encoder.insertNewLines = false; 
        encoder.encode("user:password");
    service.httpHeaders = { Authorization:"Basic " + encoder.ToString() };
    service.initialize();
} 
```

用法

```
authAndSend(WebService( aWebServiceWrapper.serviceControl)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T09:03:56.793

尝试使用 setCredentials 而不是 setRemoteCredentials 并失败，使用 Fiddler/Charles 找出随请求发送的标头。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-08T01:36:00.833

另外，为了让其他人不用花 10 分钟来弄清楚为什么[正确的示例](https://stackoverflow.com/questions/490806/http-basic-authentication-with-httpservice-objects-in-adobe-flex-air/491869#491869)不能正常工作，您需要导入 mx.utils.Base64Encoder 包，例如：

```
 import mx.utils.Base64Encoder; 
```

在 CDATA 区域的开头或某处。我是 flex 新手，所以起初这并不是很明显。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-12-21T20:50:47.317

这就是它的完成方式。

```
import mx.utils.Base64Encoder;
import mx.rpc.events.FaultEvent;
import mx.rpc.events.ResultEvent;
import mx.rpc.http.HTTPService;

var _oHttp:HTTPService = new HTTPService;
var sUsername:String = "theusername"
var sPassword:String = "thepassword";

var oEncoder:Base64Encoder = new Base64Encoder(); 
oEncoder.insertNewLines = false; 
oEncoder.encode(sUsername + ":" + sPassword); 

_oHttp.method = "POST";
_oHttp.headers = {Authorization:"Basic " + oEncoder.toString()}; 
```

# c# - 创建一个函数并在一行 C# 代码中调用它

> ID：490819
> 
> 赞同：6
> 
> 时间：2009-01-29T07:58:16.720
> 
> 标签：c#, delegates, c#-2.0

我可以在一行代码中动态创建一个函数并调用它（将值传递给它）吗？

澄清：我一直在寻找一些可以让我创建一个匿名函数然后直接调用它的方法。有点：

```
delegate(string aa){ MessageBox.show(aa); }("Hello World!"); 
```

或类似的东西（我知道上面的代码无法编译，但我想要一些接近的东西）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-29T08:08:33.800

```
new Action<int>(x => Console.WriteLine(x))(3); 
```

它不是那么可读，但回答你的问题，你绝对可以。

编辑：刚刚注意到您将其标记为 c# 2.0，上面的答案是针对 3.5，对于 2.0，它将是

```
new Action<int>(delegate(int x) { Console.WriteLine(x); })(3); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-29T08:59:08.720

`.Invoke`实际上不需要；你可以写：

```
new Action<int>(x => Console.WriteLine(x))(3); 
```

或对于 C# 2.0：

```
new Action<int>(delegate(int x) { Console.WriteLine(x); })(3); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T08:00:44.453

查看[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k(VS.80).aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T08:02:10.380

要创建匿名方法，请使用委托：

```
delegate(...your arguments...) { ...your code... }; 
```

编辑：修改问题后，pablitos 的答案更准确。

# java-me - 在 j2me 应用程序中显示图像

> ID：490821
> 
> 赞同：1
> 
> 时间：2009-01-29T07:58:49.887
> 
> 标签：java-me

如何在 j2me 应用程序中创建和显示图像？

我可以将该图像放在我的应用程序中的哪个文件夹中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T15:09:09.263

[此链接](http://www.java2s.com/Code/Java/J2ME/ImageMIDlet.htm)正是您要开始使用的内容。

基本上，要创建图像，您调用 Image.createImage();

```
Image img = Image.createImage("/imageName.png"); 
```

如果它在 Jar 的子文件夹中：

```
Image img = Image.createImage("/subDir/imageName.png"); 
```

要显示图像，您需要通过绑定到 Canvas 的 Graphics 实例将其绘制到 Canvas（在上面的链接中更好地可视化）。

```
public void paint(Graphics g) {
    ...
    g.drawImage(img, 0, 0, Graphics.TOP | Graphics.LEFT);
    ....
} 
```

您也可以使用 Graphics.drawRegion 函数，但[这里有一个指向](http://java.sun.com/javame/reference/apis/jsr118/)J2ME 的 JavaDocs 的链接，供您查看以了解最适合您需要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T09:47:01.033

要在 JavaME MIDlet 上绘制图像，您需要使用 Canvas 来绘制它。您可以执行以下操作：首先，您必须将原始图像文件放在您的包中（通常在“res”或他的子目录之一中）。其次，您需要创建一个扩展 Canvas 的类并实现 paint 方法：

```
import java.io.IOException;
import javax.microedition.lcdui.Canvas;
import javax.microedition.lcdui.Graphics;
import javax.microedition.lcdui.Image;

public class MyCanvas extends Canvas {
private Image image;
public MyCanvas(){
    try {
        image = Image.createImage("picture.png");
    } catch (IOException e) {
        e.printStackTrace();
    }
}

protected void paint(Graphics g) {
    g.drawImage(image, 10, 10, Graphics.TOP | Graphics.LEFT);
}
} 
```

现在您需要创建这个类的一个实例并告诉 MIDlet 显示它，例如：

```
import javax.microedition.lcdui.Display;
import javax.microedition.midlet.MIDlet;
import javax.microedition.midlet.MIDletStateChangeException;

public class MyMIDlet extends MIDlet {
public MyMIDlet(){
}

protected void destroyApp(boolean unconditional)
        throws MIDletStateChangeException {
}

protected void pauseApp() {
}

protected void startApp() throws MIDletStateChangeException {
    Display.getDisplay(this).setCurrent(new MyCanvas());
}

} 
```

请记住，这样 Canvas 只会被绘制一次，如果您更改某些内容，则需要调用 repaint() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T18:25:28.507

此源代码基于先前发布的评论：

```
import java.io.*;
import javax.microedition.io.*;
import javax.microedition.io.file.FileConnection;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

public class ImageLoader extends MIDlet
    implements CommandListener, Runnable {
  private Display mDisplay;
  private Form mForm;
  public ImageLoader() {
    mForm = new Form("Connecting...");
    mForm.addCommand(new Command("Exit", Command.EXIT, 0));
    mForm.setCommandListener(this);
  }
  public void startApp() {
    if (mDisplay == null) mDisplay = Display.getDisplay(this);
    mDisplay.setCurrent(mForm);     
    Thread t = new Thread(this);
    t.start();
  }
  public void pauseApp() {}
  public void destroyApp(boolean unconditional) {}
  public void commandAction(Command c, Displayable s) {
    if (c.getCommandType() == Command.EXIT)
      notifyDestroyed();
  }
  public void run() {
    FileConnection fc = null;
    DataInputStream in = null;
    DataOutputStream out = null;    
    try {
      fc = (FileConnection)Connector.open("file:///root1/i.PNG");
      int length = (int)fc.fileSize();//possible loss of precision may throw error
      byte[] data = null;
      if (length != -1) {
        data = new byte[length];
        in = new DataInputStream(fc.openInputStream());
        in.readFully(data);
      }
      else {
        int chunkSize = 512;
        int index = 0;
        int readLength = 0;
        in = new DataInputStream(fc.openInputStream());
        data = new byte[chunkSize];
        do {
          if (data.length < index + chunkSize) {
            byte[] newData = new byte[index + chunkSize];
            System.arraycopy(data, 0, newData, 0, data.length);
            data = newData;
          }
          readLength = in.read(data, index, chunkSize);
          index += readLength;
        } while (readLength == chunkSize);
        length = index;
      }
      Image image = Image.createImage(data, 0, length);
      ImageItem imageItem = new ImageItem(null, image, 0, null);
      mForm.append(imageItem);
      mForm.setTitle("Done.");
      fc = (FileConnection)Connector.open("file:///root1/x.PNG");
      if(!fc.exists()){
          try{
          fc.create();
          }catch(Exception ce){System.out.print("Create Error: " + ce);}
      }
      out = new DataOutputStream(fc.openOutputStream());
      out.write(data);
    }
    catch (IOException ioe) {
      StringItem stringItem = new StringItem(null, ioe.toString());
      mForm.append(stringItem);
      mForm.setTitle("Done.");
    }
    finally {
      try {
        if (in != null) in.close();
        if (fc != null) fc.close();
      }
      catch (IOException ioe) {}
    }
  }
} 
```

代码是从此处提供的链接 Fostah 修改的。

它打开一个图像，显示它，然后使用 FileConnection 将它保存为 x.PNG 而不是 i.PNG。需要注意的棘手问题是文件的保存/加载位置。如果您将 J2meWTK 与 Netbeans 一起使用，那么当您运行移动应用程序时，该文件夹将显示在输出窗口中。该文件夹类似于 temp.DefaultColorPhone/filesystem/root1 。那就是你必须有一个图像的地方。我不确定如何默认使用图像创建临时环境。这意味着您必须启动移动应用程序，检查临时 root1/ 在 IDE 中的位置，然后将图像放入文件夹中，然后继续运行 ImageLoader 应用程序。我将尝试通过发布问题来了解如何自动执行此操作。此外，从 50x50 的小图像开始（较大的图像可能会导致问题）。

# java - Visual Studio 人员的 Eclipse 之眼

> ID：490824
> 
> 赞同：8
> 
> 时间：2009-01-29T07:59:41.213
> 
> 标签：java, android, visual-studio, eclipse

尝试做一些 Android 开发，这意味着 Eclipse，然而，我的大部分经验是 Microsoft 工具（*例如 Visual Studio*）。我的 Java 经验主要是*JDE中的 Blackberry 开发和**Java 1.0*时代的一些杂项。

我的问题是这个。在VS200x中，有`.sln`（解决方案）、`.csproj`（项目）等... Eclipse的等效文件扩展名是什么？它们甚至存在吗？我在基础知识方面遇到了麻烦，例如如何将项目加载到**工作区**中。

*   有没有针对微软难民的教程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-29T08:07:23.130

在[这里](http://www.ibm.com/developerworks/opensource/library/os-eclipse-visualstudio/?ca=dgr-lnxw06Eclipse-VS)查看“面向 Visual Studio 用户的 Eclipse 简介”...

基本上，对于 Java 程序（我从未做过任何 Android 开发），项目的基本 Eclipse 配置文件是一个 .classpath（定义项目的依赖项）和一个 .project 文件，其中包含项目配置的所有特性。除此之外，还会创建一个 .settings 目录，其中包含一些在项目中激活的插件的配置文件。

编辑：

Eclipse 是 Java 开发中最常用的 IDE。但是，**最好**的IDE 是[JetBrains IntelliJ IDEA](http://www.jetbrains.com/idea/)。我看到有一个插件可以用来开发 Android 应用程序（[这里](http://code.google.com/p/idea-android/)）。如果你能负担得起这个美妙的应用程序（249 美元），你不会后悔的！您最终可能会尝试 30 天免费试用...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-29T08:06:53.740

您需要使用文件导入，然后选择现有项目到工作区。将创建一个 .project 文件和一个 .classpath 文件。

我发现 Eclipse 的工作方式令人难以置信地令人沮丧，因为它来自 Delphi/JBuilder，其中一个项目文件保存了您的所有设置。

确保你也备份了你的工作空间——没有什么比在你有压力时重建它更糟糕的了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-29T08:10:30.520

我的 2 美分：

确保对您的 .project 和 .classpath 进行版本控制。您可能还想使用路径变量来引用外部依赖项（第三方库）所在的目录。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-29T08:17:48.163

你这样做是为了好玩还是为了商业目的？因为如果涉及到钱，如果我是你，我真的会考虑投资[IntelliJ](http://www.jetbrains.com/idea/)，它可以说是最好的 IDE Java IDE，但不幸的是它并不是完全免费的。Android SDK 对 IntelliJ 有一些开箱即用的支持，因此您不必自己手动编写所有 makefile。如果你喜欢 Visual Studio，你会喜欢 IntelliJ，那么你为什么不下载试用版并看看它。

只是我的2美分。

# c# - 如何在 Windows 窗体上显示 office 和/或 pdf 内容？

> ID：490829
> 
> 赞同：5
> 
> 时间：2009-01-29T08:01:21.800
> 
> 标签：c#, .net, excel, pdf, ms-word

我们有一个应用程序，管理员可以在其中添加内容供其下属查看。他们的要求是它应该能够以不可编辑的方式显示 Word、Excel、PowerPoint 和 PDF 文档。

我发现这样做的一个选项是将内容加载到 Web 浏览器组件中。这样做的缺点是它会提示用户打开/保存/取消。我们担心下属大多是电脑文盲，以这种方式打开文件会有困难。

使用上述方法还意味着需要在将运行该应用程序的所有机器上安装 Microsoft Office 和 Adob​​e Acrobat（或其他支持 IE 的 PDF 查看器），这意味着昂贵的许可费用。

有没有更好的方法让这些内容显示在我的 C# 表单上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T14:12:24.510

可能也很有趣：

使用 Microsoft Office 2007 将文档保存到 XPS（或将它们打印到 XPS 打印机）。

您可以使用 XPS 查看器组件或逐页将只读 XPS 文档显示为 PNG 或 JPEG 图像。使用 .NET 3.5 / WPF 可以很容易地实现这种渲染。

```
XpsDocument xpsDoc = new XpsDocument(xpsFileName, System.IO.FileAccess.Read);

FixedDocumentSequence docSeq = xpsDoc.GetFixedDocumentSequence();
const double scaleFactor = 0.8;
for (int pageNum = 0; pageNum < docSeq.DocumentPaginator.PageCount; pageNum++)
{
    DocumentPage docPage = docSeq.DocumentPaginator.GetPage(pageNum);

    // FIX: calling GetPage without calling UpdateLayout causes a memory leak
    ((FixedPage)docPage.Visual).UpdateLayout();

    RenderTargetBitmap renderTarget = new RenderTargetBitmap((int)Math.Round(scaleFactor * docPage.Size.Width),
                (int)Math.Round(scaleFactor * docPage.Size.Height), (int)Math.Round(scaleFactor * 96), (int)Math.Round(scaleFactor * 96), PixelFormats.Default);
    renderTarget.Render(docPage.Visual);

    JpegBitmapEncoder encoder = new JpegBitmapEncoder();
    encoder.QualityLevel = 75;
    // Choose type here ie: JpegBitmapEncoder, etc
    //BitmapEncoder encoder = new PngBitmapEncoder();  // Choose type here ie: JpegBitmapEncoder, etc
    encoder.Frames.Add(BitmapFrame.Create(renderTarget));

    string pageImageFileName = string.Format("{0}-{1}.jpg", Path.Combine(Path.GetDirectoryName(xpsFileName), Path.GetFileNameWithoutExtension(xpsFileName)), pageNum);
            using (FileStream pageOutStream = new FileStream(pageImageFileName, FileMode.Create, FileAccess.Write))
    {
        encoder.Save(pageOutStream);
    }
} 
```

此代码需要引用 PresentationCore、PresentationFramework 和 ReachFramework 程序集。

编辑：上面的代码包含内存泄漏（请参阅[Opening XPS 文档 in .Net 导致内存泄漏](https://stackoverflow.com/questions/218681/opening-xps-document-in-net-causes-a-memory-leak)）。解决方法已插入示例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-30T00:36:01.787

[SpreadsheetGear for .NET](http://www.spreadsheetgear.com/)有一个与[Excel 兼容的 Windows 窗体控件](http://www.spreadsheetgear.com/support/samples/windowsforms.aspx)，它将显示您的 Excel 工作簿（如果您愿意，它会做更多的事情）。如果您想尝试一下，您可以[查看人们](http://www.spreadsheetgear.com/products/spreadsheetgear.net.aspx)的评论并[下载](https://www.spreadsheetgear.com/downloads/register.aspx)免费试用版。

如果您需要生成要在网页中显示的图像，SpreasheetGear 还可以[从图表和单元格范围创建图像。](http://www.spreadsheetgear.com/support/samples/imaging.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T08:17:00.973

您看过 Microsoft Word 9.0 对象库吗？可能无法仅显示最初编写的数据，但是，您可以在这里做一些事情，如何在内存中打印为临时 pdf 并显示它？

[这是使用 C# 显示 PDF 的方式](http://www.adobeforums.com/webx/.59b63681)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T10:47:31.773

所有这些都是特定于 Windows 的。

如果您希望在客户端计算机上显示某些内容而不依赖任何本地安装，那么您必须通过以下方式对渲染承担全部责任：

1.  提供某种在客户端运行并知道如何呈现它的非侵入性库
2.  使用“适当的”工具/库将其在服务器上呈现为内存图像并将该图像发送到客户端。在您的服务器上运行缓慢、计算量非常大，并且不会为您的客户提供“类似文档”的界面。

[Sumatra](http://blog.kowalczyk.info/software/sumatrapdf/)是完全免费和开源的。它不需要任何形式的安装，因此将其作为二进制文件包含在您的应用程序中安装在子文件夹中，然后直接使用它来显示 pdf 将正常工作（pdf ids 网络可访问，因此就像执行一样简单

```
SumatraPDF.exe {path-to-file} 
```

如果无法通过网络访问，请在后台将其下载到临时位置，然后按上述方式执行。

Office 文档有点棘手，因为它们都需要本地安装。这是一个（过时的）[列表](http://office.microsoft.com/en-gb/downloads/HA010449811033.aspx)请注意，许多下载链接将指向您推荐的最新版本。

另一种方法是在它的“便携式”化身中使用 OpenOffice.org，这将允许它在不需要安装的情况下运行（因此您可以像 Sumatra 方法一样将其放置在适当的位置）但是这有很多缺陷在您的因为它仍然需要安装 java，所以生成的文件将是可编辑的（除非您对可能很复杂的 OpenOffice 版本进行了更改）并且您可能无法获得非常好的显示效果。

如果您有任何能力在安装应用程序时运行任意程序，安装查看器可能是最好的，它们是完全免费且可再分发的。

如果您可以访问 SharePoint，您可以尝试一种完全不同的方法，即通过 Web 应用程序完成所有操作。sharepoint 插件将允许直接在浏览器中托管文档视图。请注意，这几乎需要 Internet Explorer 完全可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-23T13:41:08.097

免责声明，我来自 Atalasoft

If you want to display PDF in any kind of .NET GUI (Winforms, ASP.NET, Silverlight, WPF), our [DotImage](http://atalasoft.com/products/dotimage) with [PDF Reader add-on](http://www.atalasoft.com/products/dotimage/pdf-reader) supports it. It doesn't use Adobe and doesn't require anything to be installed on the client-machine or server (just our assemblies).

# iphone - 使用 xcodebuild 构建 iPhone 代码并运行 LLVM/Clang 静态分析器

> ID：490835
> 
> 赞同：6
> 
> 时间：2009-01-29T08:05:42.977
> 
> 标签：iphone, memory-leaks, static-analysis, clang

我按照*[使用 LLVM/Clang 静态分析器查找内存泄漏中](https://web.archive.org/web/20111129115318/http://fruitstandsoftware.com/blog/2008/08/finding-memory-leaks-with-the-llvmclang-static-analyzer/)*的步骤操作，但无法在我的项目上运行静态分析器。

当我尝试`xcodebuild`在我的项目上运行时（1\. 打开终端，2\. 直接转到项目，3\. > xcodebuild），我收到此错误：

```
=== BUILDING NATIVE TARGET XProject OF PROJECT XProject WITH THE DEFAULT
CONFIGURATION (Release) ===

Checking Dependencies... CodeSign
error: no certificate found in
keychain for code signing identity
'iPhone Developer'

\** BUILD FAILED \** 
```

如何在我的代码上运行此工具？- 我正在用模拟器进行测试。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-30T17:33:00.160

我是您在问题中引用的博客文章的作者。如果 codelogic 的评论不足以为您指明正确的方向，您可以等到今天晚些时候，我将更新博客文章，提供有关针对 iPhone 项目运行 xcodebuild 的更多信息。

——迈克尔

--

好的，我已经用标题为**iPhone Usage**的部分更新了帖子。希望这可以帮助！

[使用 LLVM/Clang 静态分析器查找内存泄漏](https://web.archive.org/web/20111129115318/http://fruitstandsoftware.com/blog/2008/08/finding-memory-leaks-with-the-llvmclang-static-analyzer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T08:41:31.127

我没有使用过有问题的工具，但您看到的问题似乎是一个既定的 xcodebuild 命令。确保您的目标是模拟器而不是设备（-target 命令行参数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-03T03:13:07.673

设置基本 sdk 可能很棘手。我喜欢这种方法：

![](https://i.stack.imgur.com/RWoaZ.jpg)

我会发誓我已经通过更传统的“构建”选项卡设置了 sdk，但是嘿......“构建”选项卡方法让我失败了（谁知道我做错了什么），但这很好用。

祝你好运。

[编辑-我刚刚访问了问题中发布的链接-重复但不强调我在这里声称的内容。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-13T18:44:07.573

看起来很奇怪，但我已将活动配置切换为**Debug** **EVERYWHERE**但仍然出现相同的错误（例如 Release 处于活动状态）。Xcode 3.1.3 版本。 从活动目标中完全**删除发布配置**

后，我就能够解决问题。

 **![](https://i.stack.imgur.com/bDj7D.jpg)

# c# - CSharpOptParse 有哪些替代方案？

> ID：490837
> 
> 赞同：0
> 
> 时间：2009-01-29T08:06:05.490
> 
> 标签：c#, equivalent, csharpoptparse

我[之前问过一个问题](https://stackoverflow.com/questions/486119/why-is-csharpoptparse-usagebuilder-failing-due-to-an-xpathexception-only-when-use)，关于我在使用[CSharpOptParse](http://sourceforge.net/projects/csharpoptparse)时遇到的一个问题，但没有得到太多回应。由于我无法解决此问题，因此我正在四处寻找替代库。

虽然我遇到的问题并不足以强迫我寻找替代方案……但这个库的最后一次开发是在 2005 年完成的，这让我有点担心。

有谁知道任何好的等效 C# 命令行选项解析库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T08:55:24.093

Mono 以单个源文件的形式分发一个库，以简单地将内联放置在您自己的项目中，称为 Mono.Options 自 2.2 起作为 Mono.GetOptions 的建议替代品

这基本上是[NDesk.Options](http://www.ndesk.org/Options)，它在 MS.Net 中也可以正常工作。

CodePlex 有多种库（开发水平不同），其中包括：

*   [控制台FX](http://www.codeplex.com/ConsoleFx)
*   [命令行](http://www.codeplex.com/commandline)
*   [命令行](http://www.codeplex.com/cmdline)
*   [命令行助手](http://www.codeplex.com/CommandLineHelper)

# vb.net - 在 VB.net 中转换字典的值类型

> ID：490850
> 
> 赞同：0
> 
> 时间：2009-01-29T08:11:51.623
> 
> 标签：vb.net, dictionary

```
Public Class A

Public Class B : Inherits A

Dim DictA As Dictionary(Of Integer, A)
Dim DictB As New Dictionary(Of Integer, B)

DictA = DictB 
```

这不起作用，因为无法转换类型。这有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T08:24:21.053

不，您遇到了泛型方差的问题，除了一些非常特殊的方式外，.NET 不支持该问题。

原因如下：在你的最后一行之后，你有一个字典，上面有两个“视图”，有效。现在想象你写道：

```
DictA.Add(1, New A()) 
```

（抱歉，如果我的 VB 稍有偏差。）在字典中插入了“非 B”，但 DictB 认为所有值都是 B 的实例。

泛型的主要目的之一是在编译时而不是执行时捕获潜在的类型错误——这意味着这段代码应该无法编译，这确实是因为缺乏方差。

当您习惯于正常继承时，这有点违反直觉，但它确实有道理。一串香蕉不仅仅是水果的集合——它是*香蕉*的集合。

Java 在调用方使用通配符对此采取了不同的立场 - 例如，它会让您只看到 DictB 字典的“添加”端，因为您添加到 DictB 的任何内容在 DictA 中都可以。Java 的泛型与 .NET 泛型非常不同......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T08:23:34.550

这是静态类型系统的一个有趣且相当复杂的方面。您正在寻找的术语是协变和逆变。

c# 语言将在 4.0 中对 Generic 类型进行某些类型的操作，但形式有所限制。

你已经在一定程度上以

```
object[] x = new string[1]; 
```

这是允许的，因为数组是协变处理的，这意味着您可以执行以下操作：

```
x[0] = new object(); 
```

这将在运行时引发异常。你知道这同样适用于你的字典吗？

c# 4.0 规范仍不是最终版本，因此可能会发生变化，但对于一些讨论和解释，请参阅[此问题](https://stackoverflow.com/questions/245607/how-does-c-40-generic-covariance-contra-variance-implmeneted)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T08:27:03.387

不幸的是没有。这是已知的协方差/逆变支持的缺失。CLR 支持它，但 C# 和 VB.Net 的编译器不支持。

下一个版本的 C# (4.0) 现在确实支持它，但不确定 vb.net。此外，对于 System.Linq，其中一种扩展方法是 Cast()，它允许您从一种类型的集合转换为另一种类型。但是它仍然会返回 IEnumerable，因此您需要进行一些操作，但我认为键值类型将比只有一种泛型类型的集合更难。

# c - 堆栈粉碎尝试给出段错误

> ID：490851
> 
> 赞同：26
> 
> 时间：2009-01-29T08:14:22.227
> 
> 标签：c, buffer-overflow, shellcode

我正在尝试从[Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html) in C 中举一个例子，但我有点卡住了，下面是代码（我有一个 64 位机器和 Ubuntu 64 位）：

```
int main()
{
    int x;

    x = 0;
    func(1,2,3);
    x = 1;
    printf("x is : %d\n", x);
}

void func(int a, int b, int c)
{
    char buffer[1];
    int *ret;

    ret = buffer + 17;
    (*ret) += 7;
} 
```

上面的代码工作正常，返回`x=1`行时没有执行，但我无法理解背后的逻辑`ret = buffer + 17;`，不应该是`ret = buffer + 16;`8 字节用于缓冲区，8 字节用于堆栈上保存的基指针。

其次，我的理解是`char buffer[1]`占用 8 个字节（由于 64 位拱），如果我增加这个缓冲区说`buffer[2]`，同样的代码应该可以正常工作，但是这没有发生，它开始给出 seg 错误。

问候，努曼

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-29T08:36:54.960

无论是 8 位 micro、16 位 micro、32 位 PC 还是 64 位新 PC，我使用的每个架构上的“char”都是 8 位宽。另一方面，Int 往往是字长。

将局部变量放入堆栈的顺序可以是特定于实现的。我的猜测是您的编译器将“int *ret”放在“char buffer [1](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-035-computer-language-engineering-spring-2010/projects/x86-64) ”之前的堆栈中。因此，要获得返回地址，我们必须经过“char buffer [1](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-035-computer-language-engineering-spring-2010/projects/x86-64) ”（1 个字节）、“int *ret”（8 个字节）和保存的基指针（8 个字节），总共 17 个字节。

以下是 x86 64 位堆栈帧的描述：http: [//ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-035-computer-language-engineering-spring-2010/projects /x86-64](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-035-computer-language-engineering-spring-2010/projects/x86-64)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-29T08:25:25.123

逐步完成 gdb 中的反汇编（disassemble、stepi、nexti）并查看每一步的寄存器（信息寄存器）。

在这里，您可以如何逐步进行反汇编：

```
gdb ./myprogram
break main
run
display/4i $eip
stepi
stepi
...
info registers
... 
```

您还应该知道（您可能已经知道了，因为您已经完成了部分工作）在许多发行版中，堆栈保护器在 gcc 中默认启用。您可以使用 手动禁用它`-fno-stack-protector`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T08:22:34.737

有很多这种堆栈粉碎的东西，你最好的朋友是[gdb](http://www.gnu.org/software/gdb/)。由于您已经在进行分段错误，因此您已经在编写您不应该的内存（一个好兆头）。一个更有效的方法是将返回地址更改为其他有效地址（例如，更改为`func`'s 地址或您拥有的某些 shellcode）。我推荐的一个很好的资源是[Shellcoder's Handbook](https://rads.stackoverflow.com/amzn/click/com/0764544683)，但是由于您使用的是 64 位架构，因此很多示例需要一些工作才能开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T11:48:42.743

Aside from (or better yet, in addition to) running a debugger, you can also use the printf "%p" construct to print the addresses of your variables, e.g.:

```
printf("buf: %p\n", buffer); //&buffer[0] works too; &buffer works for an array
printf("ret: %p\n", &ret):
printf("a:   %p\n", &a); 
```

Printing the addresses of various things can give great insight into how your compiler/implementation is arranging things in the background. And you can do it directly from C code, too!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-04T02:17:12.453

如果您对 x64 缓冲区溢出利用感兴趣，请考虑查看[Stealth 的借用代码块技术。](http://www.suse.de/~krahmer/no-nx.pdf)

# java - 与免费的 Java 分析器相比，商业 Java 分析器有哪些优势，例如 Netbeans 中的分析器？

> ID：490858
> 
> 赞同：9
> 
> 时间：2009-01-29T08:17:56.870
> 
> 标签：java, profiler

有时我必须对 Java 代码进行一些分析工作，我想知道为什么我应该让我的老板在商业分析器中进行调查，而不是只使用 Netbeans 或 JConsole 中的分析器？

哪些杀手级功能会保证投资？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-29T13:13:49.997

根据我使用 JProfiler 的经验，它只是比 NetBeans 分析器更全面的体验。它更容易上手，更容易解释信息，虽然我没有测量过，但 JProfiler 似乎对正在分析的应用程序性能的负面影响较小。

此外，JProfiler 与 IntelliJ IDEA 很好地集成。我必须使用 NetBeans 才能使用 NetBeans 分析器，这很不方便，因为我必须手动配置一个自由格式的项目以匹配我的项目布局。

NetBeans 分析器可用。与 IntelliJ 不同，我不会为我的个人项目购买 JProfiler 许可证，因为与 IDE 不同，它不是您每天都在使用的工具。但是，对于有偿工作，没有理由不购买更好的工具。与开发人员的时间成本相比，它并不昂贵。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-25T12:06:58.160

我有使用 NetBeans 分析器和 JProbe 的经验。对于性能分析，我发现 Netbeans 非常有用，但 JProbe 的优势在于内存分析。

JProbe 具有用于比较堆快照和查找内存泄漏根本原因的出色工具。例如，在 JProbe 中，您可以以图形的形式直观地查看堆快照，选择要调查的节点，然后删除引用以查看实例是否可以被垃圾收集。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-23T17:42:56.670

如果您已经在使用 Netbeans，那么启动分析器很容易（除非您使用的是基于 Maven 的项目......叹息）。

我使用了付费分析器以及 Netbeans 之一。Netbeans 做得很好（刚推出时有点粗糙……但现在好多了）。

我分析的代码不是很大，所以我不能说分析所花费的时间是否是一个主要因素。

答案非常主观，完全取决于您的需求。要看的东西：

1) 在您的环境中易于使用（对于 NetBeans，内置分析器可能是最简单的。

2) 启动 prfiler 到实际获得可用结果所花费的时间

3）它是采样还是跟踪分析器？（这里有一个概述：http: [//docs.hp.com/en/5992-0757/ch05s01.html](http://docs.hp.com/en/5992-0757/ch05s01.html)

4）您可以实时查看结果还是必须等待分析完成？

这是关于 Java 分析器的 slashdot 讨论的链接：[http ://ask.slashdot.org/article.pl?sid=06/06/30/0053237](http://ask.slashdot.org/article.pl?sid=06/06/30/0053237)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-01T05:42:59.550

我没有使用过 Netbeans 分析器，但尝试过 JProfiler、Yourkit 和 JProbe。我发现 Yourkit 稍微好一点（主要是在可用性方面购买）。其中一些有用的功能是：（您可以检查它是否在 Netbeans 中可用）

*   J2EE Profiling（例如，它显示 SQL 查询花费了多少时间）。
*   快照比较和注释
*   死锁检测器
*   异常遥测

[您可以在他们的网站](http://www.yourkit.com/features/index.jsp)上查看更多详细信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-23T17:49:29.197

我会说，准备使用和更多的性能统计。去年我在一家跨国公司实习时被分配了一份分析工作。我使用了 InfraRED 分析器，它使用 Java 面向方面的 API（与 Aspectwerkz 和 AspectJ 一起使用）。但是我不得不扩展分析器以获得我的经理想要的东西。此外，分析器给出的性能统计数据是有限的。

但在选择分析器之前，我研究了其他一些开源分析器。其中一些是微不足道的，不适合我们想要的。

我还要补充一点，其中一些不起作用。例如，如果我们想收集 Web 应用程序的性能统计信息，所有的分析器都不支持我们需要的那些统计信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-23T17:50:23.530

使用完全独立的分析器，可以更轻松地将其与工具链中的其他应用程序集成。例如，假设您想在构建过程中运行分析器（例如，每晚一次）。像 JProfiler 这样的东西很容易与 ANT 集成，而内置在 IDE 中的分析器可能会也可能不会。如果您有一台单独的构建机器，安装分析器的本地副本是有意义的，但安装整个 IDE 只是为了访问一个组件则没有意义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-01T12:15:02.913

如果您使用的是 Tomcat，您可能会考虑使用 lambdaprobe

[http://www.lambdaprobe.org/](http://www.lambdaprobe.org/)

（它是免费的）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-01T21:47:22.710

根据我的经验，YourKit profiler 是最有用的。小的可用性事情确实有所作为，但它也是最全面的一个，包含：

*   最全面和可用的内存快照（也适用于 1GB+ 堆），包含每个对象的详细对象视图和原始数据。（例如在 hashmap 中，您可以查看对象是均匀分布还是大部分存储在同一个存储桶中！）内存快照的详细信息及其易用性是我使用 yourkit 的主要原因。
*   很少的开销（远少于我使用的许多其他分析器）
*   比较快照
*   J2EE 分析
*   死锁检测器，锁定状态（我认为它仍然错过了 java.concurrent.locks，同步的 bud 很棒）

除此之外，它也在不断改进，所以谁知道未来会发生什么:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-29T09:00:42.213

比较这些功能，看看您是否真的需要商业软件提供的功能而不是免费软件提供的功能。如果是，那么它值得投资。

# javascript - Javascript 游戏图形的最佳跨浏览器方法？

> ID：490859
> 
> 赞同：5
> 
> 时间：2009-01-29T08:18:08.490
> 
> 标签：javascript, graphics

我想知道在直接（和跨浏览器）Javascript 中运行的 2d 游戏图形最可行的方法是什么？

到目前为止，我已经找到了画布和 SVG 方法。是否有其他直接的方法可以提供原始图形操作，如绘制线、圆、像素？与 canvas/svg 不同，最好在 IE 中开箱即用地支持。:)

（我最近写了一个很小的 ​​javascript 游戏。在这种情况下，直接的 CSS+DOM 对我有用，但我正在寻找更好的方法来做这件事。）

-ThomasN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T08:36:21.590

你可以看看这个非常简单的库：

[http://fx.inetcat.com/](http://fx.inetcat.com/)

引用他们的手册：

> 紧凑的轻量级 JavaScript 库，通过添加动画方法来扩展 DOM 元素。促进沿时间线更改 CSS 属性和其他参数。支持并行效果集和效果链。具有扩展的回调集以调整行为。

如果您按照手册进行操作，就会发现制作动画是多么容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-01T20:39:58.563

我刚刚开始我在 Silverlight 中编写的游戏的 JS 端口，所以我还没有使用它（还），但我对[Raphael](http://raphaeljs.com/)的演示和 API 印象深刻。

它有很多功能，包括很棒的动画。

基于 svg 的库非常适合使用物理引擎等进行开发，此外还能够动画和操作（旋转、镜像等）图像/精灵。

# open-source - 修改后的开源代码是否必须开源？

> ID：490860
> 
> 赞同：0
> 
> 时间：2009-01-29T08:18:09.193
> 
> 标签：open-source, licensing, gpl

我们采用了一个开源应用程序，在 GPL ver1.09 下发布，并修改了其源代码的某些部分，并根据我们的要求进行了一些定制/增强。

我们仅将此应用程序用于非商业的内部目的。

**如果我们想使用它，我们是否必须将修改后的代码以开源形式发布？**

编辑：它是否有任何变化，取决于它的用户群？（例如，只有公司员工还是外人？）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-29T08:21:25.910

如果你不打算分发它，你可以用它做你想做的事。

请参阅[GPL 常见问题解答中的此条目](http://www.gnu.org/licenses/gpl-faq.html#GPLRequireSourcePostedPublic)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-29T08:23:08.700

添加到 Jon 的回答中，如果您以任何方式分发它，GPL 许可证是故意传播的，因此您必须通过分发为*整个*应用程序提供源代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T08:29:07.783

简短的回答：如果是 GPL，你必须：

*   给出**所有应用程序的源代码**
*   仅发给客户（但他可以在此之后将其重新分配给他想要的任何人）
*   如果客户要求

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T08:24:52.177

看看这个：[GPL 是什么意思](http://www.gnu.org/licenses/gpl-1.0.txt)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T10:25:09.913

正如其他人所说，您只需要将源代码提供给您已将二进制文件提供给的人（然后只有当他们要求时）。因此，如果二进制文件仅在公司内部使用，您无需将源代码交给除员工以外的任何人（如果他们要求提供源代码）。

You cannot, however, restrict someone from passing the source (or the application) on, but I cannot answer if any company confidentialy agreement would trump or be trumped by the GPL.

# c# - Visual Studio 构建问题

> ID：490862
> 
> 赞同：0
> 
> 时间：2009-01-29T08:19:42.653
> 
> 标签：c#, .net, vb.net, visual-studio

我们有一个 VS 2003 解决方案，其中包含 1 个 vb 项目和几个 c# 项目（没有 web 项目）。问题是当我尝试构建 vb 项目时，VS 退出或停留在“执行主编译”。请帮忙

无法重现它。清除构建不起作用。有时，不做任何合乎逻辑的事情就可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T08:23:12.227

您是否尝试过从构建菜单中“清理”然后重新编译？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T09:44:24.520

根据我之前的经验，我可以说 VS2003 不喜欢太多的混合项目（我有很多奇怪的行为和各种崩溃）。

我建议您创建 1 个解决方案来包含您的 C# 项目和 1 个 VB.NET 解决方案。然后添加必要的参考资料浏览它们。

# windows - 从 Windows PC 修改远程 Ubuntu 服务器上的文件

> ID：490864
> 
> 赞同：0
> 
> 时间：2009-01-29T08:21:27.953
> 
> 标签：windows, linux, synchronization

我正在开发一些我在远程 Ubuntu Linux 服务器（托管在 Slicehost 上）上运行的 Python 程序。我想在我的 Windows Vista PC 上的 IDE 中处理源代码，并将所有文件修改直接发送到 Linux 机器而无需我的干预（即，每次更改文件时都不必手动 SFTP 文件）。我能做到这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T08:33:16.620

WinSCP 包含一个[基本的远程文件编辑器](http://winscp.net/eng/docs/ui_editor)，但如果您想使用合适的 IDE 进行开发，这将无济于事。

我建议您运行像[subversion](http://subversion.tigris.org/)这样的版本控制系统，这将允许您编写一个[提交后挂钩](http://svnbook.red-bean.com/en/1.1/ch05s02.html#svn-ch-5-sect-2.1)，以在每次提交时自动将您的代码[同步到服务器。](http://samba.anu.edu.au/rsync/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T08:30:54.660

在服务器上安装 Samba 和 OpenVPN，在客户端安装 OpenVPN。设置 Samba 以共享您感兴趣的目录树，并通过 VPN 访问它以确保安全。或许现在 Vista 已经对 WebDAV 提供了不那么糟糕的支持，你可以通过 HTTPS 使用 WebDAV，但在 XP 下它总是很糟糕。

Ben 对使用 VM 的本地开发环境的建议也是赢家。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T08:37:23.040

使用[PuTTy](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)和[SFTPDrive](http://www.expandrive.com/sftpdrive)。

PuTTy 是一个 SSH 客户端，SFTPDrive（39 美元）将允许您将远程文件系统作为驱动器号在本地挂载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T08:28:15.850

您可以安装 cygwin，然后每分钟在 cron 上运行 rsync。

或者你可以使用 Netdrive 像本地磁盘一样通过 FTP 访问服务器：

[http://tech.xptechsupport.com/netdrive-turn-your-ftp-into-a-drive-letter.html](http://tech.xptechsupport.com/netdrive-turn-your-ftp-into-a-drive-letter.html)

或者您可以使用 cygwin 和 FUSE 实现类似的功能 - 您可以在 linux 上使用，但从未在 cygwin 上尝试过。

另外，在本地建立一个完整的开发环境不是更容易吗？也许使用虚拟机？测试会快很多。然后您可以设置一个 shell 脚本来将当前版本传输到 slicehost 服务器。

# .net - WCF 消息级别安全性

> ID：490881
> 
> 赞同：3
> 
> 时间：2009-01-29T08:28:07.020
> 
> 标签：.net, wcf, security, certificate

希望有人可以在这件事上帮助我。我正在寻找一种在我的 WCF 服务上启用消息级别安全性的方法，而不是使用证书。问题是该应用程序用于通过 VPN 与多个站点连接的客户端，每个站点都有自己的域控制器，并且域之间不相互信任。我对证书完全陌生，虽然很多人说这是要走的路，但我不知道它是否可以在这种环境下工作？

寻求帮助 :) 亲切的问候安德里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-29T13:01:25.137

其实证书真的是要走的路！我强烈建议您使用证书！这并不难。实际上这是您的问题：“域不相互信任”。使用证书，您将获得相互信任的域。以下是如何执行此操作的分步说明：

1) 您必须在客户端上创建证书。为此，请转到开始菜单 -> 运行 -> 键入“cmd”并按 Enter 在控制台窗口中键入： **makecert.exe MakeCert -pe -ss My -sr LocalMachine -a sha1 -sky exchange -n CN=ClientCertificateName**（更改“ClientCertificateName”与您选择的名称）

2）在更改证书名称的服务器上执行相同的操作！

3) 在执行步骤 1) 和 2) 之后，您的客户端和服务器都安装了他们的自签名证书。现在您需要导出这些证书并将客户端的证书导入服务器的 TrustedPeople 文件夹中，并将服务器的证书导入客户端的 TrustedPeople 文件夹中。执行此操作 -> 开始菜单 -> 运行 -> 键入“mmc”并按 Enter

4）要打开证书存储位置，请转到文件 -> 添加/删除管理单元 -> 在新窗口中选择证书（在左侧）并单击添加->单击确定->选择“计算机帐户”->下一步->完成->确定
之后，证书控制台将打开。展开证书节点（左侧）并导航到 Personal/Certificates 节点。在那里，您将找到在前面的步骤中刚刚创建的证书。右键单击证书并将其导出，包括私钥。将导出的证书保存到文件中。然后将此文件复制到另一台机器并在“Trusted People/Certificates”节点下导入。

5) 对另一台机器也重复步骤 4) - 最终目标是将客户端的证书导入主机的机器上，反之亦然
现在您已经（希望）设置了证书，您必须告诉您的服务使用它们。为此，您可以使用应用程序的 web.config (app.config) 文件或编写代码。

```
<security mode="Message">
    <message clientCredentialType="Certificate" />
</security> 
```

在客户端和服务器的配置文件中添加安全节点后，您必须将以下行为添加到绑定中：

```
 <behaviors >
    <endpointBehaviors>
        <behavior name="your_binding_behavior">
            <clientCredentials>
                <clientCertificate findValue="[The name of the client certificate here]"
                                   storeLocation="LocalMachine"
                                   storeName="My"
                                   x509FindType="FindBySubjectName"/>
                <serviceCertificate>
                    <defaultCertificate findValue="[The name of the server certificate here]"
                                        storeLocation="LocalMachine"
                                        storeName="TrustedPeople"
                                        x509FindType="FindBySubjectName"/>
                    <authentication certificateValidationMode="PeerOrChainTrust"/>
                </serviceCertificate>
            </clientCredentials>
        </behavior>
    </endpointBehaviors>
</behaviors> 
```

就是这样！你很高兴！有关这方面的更多信息，您可以阅读[这篇文章](http://www.codeproject.com/KB/WCF/Senthil.aspx)。这里有[更详细的一个](http://www.codeproject.com/KB/WCF/wcfcertificates.aspx)。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-30T10:12:47.677

除非我在这里遗漏了什么，如果您的目标是加密服务器和客户端之间的数据，您只需要在服务器上创建一个证书，并在 WCF 服务 web.config 中设置 MessageClientCredentialType = "None"

网上发布了几十个“演练”，有些比其他的好。在找到此演练之前，我也一直在努力保护我的 WCF 服务：

http://blog.functionalfun.net/2008/05/how-to-create-server-certificate-for.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T15:14:19.050

我还认为基于证书的消息级别安全性是最好的方法 - 与消息级别安全客户端和服务器将需要加密消息一样 - [http://msdn.microsoft.com/en-us/library/ms731172.aspx](http://msdn.microsoft.com/en-us/library/ms731172.aspx) - 或者也可以尝试 MixedModesecurity - 这里有一些很好的指导 - [http://blogs.msdn.com/govindr/archive/tags/WCF/default.aspx](http://blogs.msdn.com/govindr/archive/tags/WCF/default.aspx)

[http://blogs.msdn.com/jmeier/archive/2008/03/27/patterns-and-practices-wcf-security-guidance-now-available.aspx](http://blogs.msdn.com/jmeier/archive/2008/03/27/patterns-and-practices-wcf-security-guidance-now-available.aspx) 和[http://www.codeplex.com/WCFSecurity](http://www.codeplex.com/WCFSecurity) 是其他资源以获得很好的指导。

# iphone - 如何：标签栏控制器中的导航控制器

> ID：490891
> 
> 赞同：12
> 
> 时间：2009-01-29T08:33:09.053
> 
> 标签：iphone, cocoa-touch

我正在使用一个简单的 iphone 应用程序。该应用程序在第一个屏幕上有一个表格视图。如果用户单击该表视图上的项目，应用程序将导航到第二个视图。第二个视图也有一个表格视图。如果用户单击此屏幕上的某个项目，我想显示一个具有标签栏控制器的新 xib。

事实上，我做到了。但是，问题是我看不到标签。选项卡显示在屏幕外部的底部。我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-15T20:37:57.757

这是我能够开始工作的[教程。](http://codenugget.org/how-to-embed-a-navigation-controller-inside-a)

我还阅读了有关该主题的官方 SDK 文档： [Combining Tab Bar and Navigation Controllers](http://developer.apple.com/iphone/library/featuredarticles/ViewControllerPGforiPhoneOS/CombiningToolbarandNavigationControllers/CombiningToolbarandNavigationControllers.html#//apple_ref/doc/uid/TP40007457-CH8-SW1)。由于我仍在学习，因此本[教程](http://codenugget.org/how-to-embed-a-navigation-controller-inside-a)对我的帮助超过了文档。

注意：在本教程中，我认为您不需要继承 UINavigationController，我现在正在尝试这个想法。

更新：我能够在不继承 UINavigationController的情况下使[教程正常工作。](http://codenugget.org/how-to-embed-a-navigation-controller-inside-a)所以不需要子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-26T08:06:27.067

打开界面生成器。

单击一个标签并检查子控制器（标签栏控制器）是 UIViewController 还是 UINavigationController。（默认：UIViewController）

如果是 UIViewController，则将其替换为 UINavagationController。

并将 UINavigationController 的根视图控制器设置为第一个视图控制器。

最后，调用 pushViewController 方法，而不是 presentModalViewController 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2011-08-15T16:32:56.663

TabBar 必须是根控制器，根据需要在选项卡项中添加 navControllers 并将 tabBar 隐藏在 App 的开头，以便在您希望它出现时显示它。

# sql - 优化 0ms 查询（或提前优化）？

> ID：490896
> 
> 赞同：0
> 
> 时间：2009-01-29T08:36:07.003
> 
> 标签：sql, performance, optimization

在开发的最后阶段，我开始查看代码以尝试找出一些不好的做法。我发现在访问页面时，我查询数据库 n 次（n 是 HTML 表的行数）只是为了获取给定记录的翻译（不同语言）......我立即认为这很糟糕我尝试了一个小的优化。

运行 SQL 分析器显示这些查询花费了 0 毫秒。

由于我要查询的这些表很小（20-100 条记录），我想我可以获取所有数据并将它们缓存到 Web 服务器 RAM 中，稍后使用 LINQ to Objects 检索。这种方式的执行时间也是0ms。

我运行这些测试的环境是同一台机器上负载为 0% 的数据库和 Web 服务器。只有我在使用该应用程序。

问题从这里开始。既然我根本没有性能差异**，**我应该避免这种优化吗？我是否应该保持平衡以平衡数据库和 Web 服务器的使用（服务器将在生产环境中的 2 台不同的机器上）？

在我看来，这种优化不会损害性能，它只会在负载较重的数据库的情况下变得更好。我脑子里有东西说，如果不需要，优化是错误的......

感谢您的意见。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-29T08:40:14.127

我认为您实际上并没有证明根本没有性能差异。

尝试以每种方式运行查询一百万次，并计算总共需要多长时间......我想你会看到很大的不同。

SQL 探查器仅向您显示（据我所知）*数据库*执行查询所花费的时间。它不考虑：

*   建立连接或准备查询所需的时间
*   发出查询的网络延迟时间
*   返回结果的网络延迟时间
*   将结果转换为有用对象所花费的时间。

当然，过早的优化一般来说是一件坏事，但这听起来确实是一个合理的改变——*如果*你知道表格的内容不会改变的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T09:33:45.727

SQL Server 在这方面有点特殊，0 到 15 毫秒之间的所有查询执行时间都向下舍入到 0 毫秒。因此，如果您的查询花费了 0 毫秒或 15 毫秒，您实际上并不能通过查看数字来知道。执行 1000 * 1 ms 查询和执行 1000 * 15 ms 之间有很大的不同。

关于翻译，我发现最好的方法是使用资源并将它们绑定到 SQL 数据库并在 Web 应用程序中缓存翻译一段合理的时间。这是相当有效的。

除此之外，Jon Skeet 所说的...... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T09:38:18.107

两个答案都是正确的。

我实际上按照乔恩的建议测量了 100 万次，事实上……有很大的不同！谢谢乔恩

甚至乔纳斯所说的都是真的。即使 sql profiler 显示为 0，该查询实际上也花费了大约 15 毫秒（由程序测量）。

多谢你们！

# java - 运行远程计算机中存在的批处理文件

> ID：490897
> 
> 赞同：0
> 
> 时间：2009-01-29T08:36:09.890
> 
> 标签：java

如果批处理文件存在于本地计算机中，则上述代码可以正常工作。
我需要从上面的代码运行远程机器中存在的批处理文件。

```
class Visuals {

    public static void main(String arg[]) {
        try {
            String command = "cmd /C start C:/Visuals/VisualTimeSeries081308Ratnesh/VisualTimeSeries081308Ratnesh/bat/demo/StartVisTsDataCenterMySql-log.bat";
            Runtime rt = Runtime.getRuntime();
            Process pr = rt.exec(command);
            //pr.destroy();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

如何开发与远程机器的连接？我只有远程机器的IP地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T08:52:03.853

如果您将包含批处理文件的文件夹设为公共共享，然后使用批处理文件的地址（如“\ComputerName\ShareName\BatchFile”），则可以访问批处理文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T07:07:47.810

我尝试了 AT 并引发访问被拒绝错误。

这在某种意义上也很棘手，因为它安排远程机器在指定时间运行任务。

如果机器时钟不同步，这可能会导致麻烦。

应该有其他可用的替代方案。

谢谢，芒卢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T08:46:15.923

一种可能的解决方案可能是将您的 Visuals 类导出到 RMI 服务器，然后调用从远程客户端远程执行批处理文件的方法。

查看[Sun RMI 文档](http://java.sun.com/javase/technologies/core/basic/rmi/index.jsp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T09:28:37.737

看一下[AT 命令](http://www.ss64.com/nt/at.html)。根据其文档：

> AT 命令安排命令和程序在指定的时间和日期在计算机上运行。必须运行计划服务才能使用 AT 命令。

因此，您可能可以执行以下操作：

```
AT \\123.123.123.123 17:00 cmd /c "C:\test.bat" 
```

如果您将要运行它的时间设置为大约当前时间，您的脚本将运行。

编辑：这是您将从命令行运行的内容。你应该把它放在你的命令字符串中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-29T09:40:53.607

要更新我之前的答案，您确实需要查看文档，否则您不太可能了解代码在做什么。

# iphone - 如何只让一个线程休眠？

> ID：490902
> 
> 赞同：0
> 
> 时间：2009-01-29T08:37:09.670
> 
> 标签：iphone, cocoa-touch, multithreading

我想在我的游戏中创建两个线程。一个线程用于计时器，另一个用于触摸事件。因为当我在 iPhone 上运行我的游戏时，定时器与触摸事件发生冲突，并且没有报告触摸事件。它在模拟器中运行流畅，但在 iPhone 或 iPod Touch 上它变得非常慢。所以我为触摸事件和计时器使用单独的线程。

当我使用`[NSThread sleepForTimeInterval:0.01]`它时，它会使所有线程都休眠。我的意思是触摸事件也停止通过。我只想停止计时器线程。

这是我的代码：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    BOOL Done = NO;
    while (!Done)
    {
        NSAutoreleasePool *loopPool = [[NSAutoreleasePool alloc] init];
        [NSThread sleepForTimeInterval:0.01];
        [self performSelectorOnMainThread:@selector(callTapCode) withObject:tapView waitUntilDone:YES];

        //performSelectorOnMainThread:@selector(callTapCode) withObject:nil waitUntilDone:YES];

        [loopPool release];
        Done=YES;
    }

    [pool drain];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T08:48:23.547

如果您尝试创建一个计时器，您可能应该只使用`NSTimer`，因为这比创建一个线程更简单、更有效，只是为了每隔一段时间发送一个“go”事件。

编辑：按原样，您并没有创建第二个，您只是通过在循环中调用 [NSThread sleepForTimeInterval:0.01] 来停止主线程。这意味着您的主线程不再运行可能导致各种事情不再工作的事件循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:27:27.750

[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]];

# javascript - 使用 JavaScript 从剪贴板粘贴图像

> ID：490908
> 
> 赞同：101
> 
> 时间：2009-01-29T08:39:49.307
> 
> 标签：javascript, clipboard, copy-paste

我们如何使用 javascript 将剪贴板中的图像粘贴到自定义富文本编辑器中？（ctrl+c 和 ctrl+v 或快照）。

有人用过 Ajax 的富文本编辑器吗？将图像从剪贴板粘贴到 Ajax RTE 是否有效？

请分享你的想法！

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2011-10-16T12:20:41.997

Because this question still often shows up in Google's search results, I want to point out this is possible today, ~~at least in Google Chrome (2011)~~ in all modern browsers (2018). They implemented it to use in GMail, but it is available for all websites.

[How does the paste image from clipboard functionality work in Gmail and Google Chrome 12+?](https://stackoverflow.com/questions/6333814/how-does-the-paste-image-from-clipboard-functionality-work-in-gmail-and-google-c)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-07-30T02:22:15.043

为了帮助其他人，我将在此处留下由 Nick Rattalack 回答的链接

```
// window.addEventListener('paste', ... or
document.onpaste = function(event){
  var items = (event.clipboardData || event.originalEvent.clipboardData).items;
  console.log(JSON.stringify(items)); // will give you the mime types
  for (index in items) {
    var item = items[index];
    if (item.kind === 'file') {
      var blob = item.getAsFile();
      var reader = new FileReader();
      reader.onload = function(event){
        console.log(event.target.result)}; // data url!
      reader.readAsDataURL(blob);
    }
  }
} 
```

[剪贴板中的粘贴图像功能如何在 Gmail 和 Google Chrome 12+ 中工作？](https://stackoverflow.com/questions/6333814/how-does-the-paste-image-from-clipboard-functionality-work-in-gmail-and-google-c)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-09T06:20:35.120

现在在 Chrome 和 Firefox 中这绝对是可能的。我不太确定 IE/Safari。

查看 imgur.com、onpaste 和 pasteboard.co 作为示例，并查看[github 上的 pasteboard 代码](https://github.com/JoelBesada/pasteboard)以及[Joel 在他的博客上的出色文章](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)

作为记录，您需要用户在您的元素上按 Ctrl+V，然后您可以通过读取来捕获*粘贴*`event.clipboardData`事件处理程序中的数据，但要使其在下层工作，您需要确保焦点位于空**contenteditable**元素，然后从那里提取结果，这在 Firefox 22 中效果不佳。请参见[此处](https://stackoverflow.com/questions/14151018/can-one-hack-paste-image-support-into-a-textarea-in-firefox/14423247?noredirect=1#comment25508678_14423247)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-01-29T09:10:55.310

现在我找到了[剪贴板数据对象](http://msdn.microsoft.com/en-us/library/ms535220(VS.85).aspx#)。

但它只从剪贴板检索文本格式或 URL。 `clipboardData`仅适用于 IE，它适用于字符串，如果我们粘贴图像，则返回 null。

一个测试例子

```
 <form>
    <input type="text" id="context"  onClick="paste();">  
  </form>

<script type="text/javascript"> 

function paste() {  

var sRetrieveData = clipboardData.getData("Text");
document.getElementById('context').value = sRetrieveData;        

}
</script> 
```

默认情况下，Firefox 未启用剪贴板访问，[此处](http://support.mozilla.com/fr/kb/Granting+JavaScript+access+to+the+clipboard)有说明。另一方面，[execCommand()](http://msdn.microsoft.com/en-us/library/ms536419(VS.85).aspx)只处理文本值并且不兼容 Firefox。

就像其他人说的那样，代码在 IE 上运行的事实存在安全风险，任何站点都可以访问您的剪贴板文本。

复制图像相对 URL 的最简单方法是使用 java 小程序、windows activeX 插件、[.net 代码](http://p2p.wrox.com/book-professional-javascript-web-developers-isbn-978-0-7645-7908-0/53146-paste-clipboard-image.html)或拖放它。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-12-09T16:42:51.823

新的浏览器，如 Firefox 4，支持将图像数据从剪贴板粘贴到 RTE，作为[带有编码 PNG 数据的数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme#Advantages)。但是，大多数 Web 应用程序错误地解析这些数据 URI 并将其丢弃。雅虎邮件正确处理。但是 Gmail 和 Hotmail 会丢弃它。我已就此通知 Google 和 Microsoft。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-29T09:35:08.020

不幸的是，无法将剪贴板中的图像粘贴到 RTE。

如果您从包含图像和一些文本的桌面应用程序（如 Microsoft Word）复制 blob，图像将显示为损坏的参考（尽管比例正确）并且文本将正确粘贴（格式将丢失） .

唯一可能的做法是在 RTE 中复制图像并在 RTE 中粘贴回去。

# jquery - 如何使用 jQuery 取消设置元素的 CSS 属性？

> ID：490910
> 
> 赞同：100
> 
> 时间：2009-01-29T08:41:16.527
> 
> 标签：jquery, css

如果我使用以下方法在特定元素上设置 CSS 值：

```
$('#element').css('background-color', '#ccc'); 
```

我希望能够取消设置特定于元素的值并使用级联值，如下所示：

```
$('#element').css('background-color', null); 
```

但是这种语法似乎不起作用——这可能使用另一种语法吗？

**编辑：**该值不是从父元素继承的——原始值来自元素级选择器。很抱歉有任何混淆！

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2011-02-24T00:54:48.993

来自[jQuery 文档](http://api.jquery.com/css/)：

> 将样式属性的值设置为空字符串——例如`$('#mydiv').css('color', '')`——如果该属性已经被直接应用，无论是在 HTML 样式属性中，通过 jQuery 的`.css()`方法，还是通过对属性的直接 DOM 操作，都会从元素中删除该`style`属性。但是，它不会删除在样式表或`<style>`元素中使用 CSS 规则应用的样式。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-29T09:27:16.240

我想你也可以这样做：

```
$('#element').css('background-color', ''); 
```

这就是我很久以前为`display`plain-old-javascript 中的属性显示/隐藏字段所做的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-29T09:18:23.330

实际上，我认为不正确的语法（带有`null`）似乎正在工作——我的选择器只是格式不正确，因此没有产生任何元素。哦！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T08:51:43.557

试试这个：

```
$('#element').css('background-color', 'inherit'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T15:59:46.943

对于它的价值，这似乎不适用于 IE 8 的“过滤器”，我不得不使用它（在 fadeIn 回调中）：

`$(this).attr('style', $(this).attr('style').replace(/\bfilter:\s*;*/, ''));`

显然，我需要删除一个空的内联过滤器声明，这样 CSS 才能生效；还有其他内联规则，所以我不能只删除样式属性。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2020-02-11T09:49:09.337

如果它可以帮助，我添加双引号的问题：

```
$('#element').css("border-color", ""); 
```

不工作，而

```
$('#element').css('border-color', ''); 
```

作品

# wcf - 如何从 WCF 返回 HttpContext.Current.Cache？

> ID：490913
> 
> 赞同：5
> 
> 时间：2009-01-29T08:45:19.747
> 
> 标签：wcf, iis, caching

我有一个托管在 IIS 中的 WCF 服务，并且想要返回驻留在 IIS 缓存中的数据 (HttpContext.Current.Cache) 该服务应该返回的最合适的类型选择是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-29T08:50:53.947

如果我是你，我不会依赖服务托管在 IIS 中这一事实。如果您想使用其他技术托管您的 WCF 服务怎么办？我认为您应该查看[memcached](http://www.danga.com/memcached/)，它是一种更通用的缓存解决方案，它适用于 .NET。

无论如何，如果您真的想使用 IIS 缓存，请使用**System.Web.HttpRuntime.Cache**而不是 HttpContext.Current.Cache，因为 HttpContext 并不总是可用。

此外，正如**cruizer**所说，只要它们是可**序列化**的（即，类用 [Serializable()] 属性装饰），对象的实际类型就完全无关紧要。IIS 缓存本身不需要可序列化的对象，但 WCF 需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-08T17:16:44.547

您序列化对象以传输它们，但无需缓存可序列化对象。

您的服务调用您的业务逻辑以处理请求，但通过网络传输的不应该是您的业务对象，而是您的服务的数据合同。

包装您的缓存 API 并将其与 HttpRuntime 缓存分离。正如 DrJokepu 所说，如果您选择通过 HttpRuntime.Cache 访问 asp.net 缓存。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-01-29T08:49:31.050

当然，您存储在缓存中的任何类型......它应该是可序列化的

# authentication - 除了使用 .htaccess 的文件之外，我如何要求所有文件都输入密码？

> ID：490920
> 
> 赞同：12
> 
> 时间：2009-01-29T08:47:59.337
> 
> 标签：authentication, .htaccess, passwords

我有一个正在开发的新网站，客户想要保密，但同时，我想放置一个正在建设中的页面，上面有一些信息。我想拥有除 index.html 之外的所有内容，都需要用户/密码——每个人都可以使用 index.html。

我有以下内容，但我不确定我需要添加什么：

```
AuthName "Restricted Area"
AuthType Basic
AuthUserFile /path/to/file/.htpasswd
AuthGroupFile /dev/null
require valid-user 
```

有太多文件和可能的新文件说“这组文件需要用户/密码”。

我认为这与类似的事情有关：

```
<Files index.html>
order deny,allow
allow from all
</Files> 
```

但我不完全确定如何。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-29T09:17:42.600

```
AuthName "Restricted Area"
AuthType Basic
AuthUserFile /path/to/file/.htpasswd
AuthGroupFile /dev/null

<Files "*">
Require valid-user
</Files>

<Files "index.html">
Allow from all 
Satisfy any
</Files> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-29T17:59:45.113

我几乎完全使用[了empi](https://stackoverflow.com/questions/490920/how-would-i-require-a-password-for-all-files-except-one-using-htaccess/490977#490977)响应，但我意识到我正在在建设中的页面上加载一个徽标和reset-min.css，所以我将其修改如下：

```
AuthName "Restricted Area"
AuthType Basic
AuthUserFile /home/examplecom/example.com/html/.htpasswd
AuthGroupFile /dev/null

<Files "*">
Require valid-user
</Files>

<FilesMatch "(index\.html|reset-min\.css|logo-temp\.gif)$">
Allow from all
Satisfy any
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T09:16:27.937

您是否尝试过颠倒顺序以首先允许，然后拒绝？进一步阅读：[apache htaccess 指令](http://httpd.apache.org/docs/1.3/mod/mod_access.html#order)是一个很好的参考。

# c# - 如何检查远程连接是否打开到服务器？

> ID：490922
> 
> 赞同：0
> 
> 时间：2009-01-29T08:48:41.223
> 
> 标签：c#, .net, winforms, remoting

我正在像这样设置我的远程连接：

```
port = new Random().Next(REMOTING_PORT_MIN, REMOTING_PORT_MAX);
TcpChannel chan = new TcpChannel(port);
ChannelServices.RegisterChannel(chan, false);
RemotingConfiguration.RegisterWellKnownServiceType(typeof(NotificationService), "CallOnMe.rem", WellKnownObjectMode.Singleton);

notService = new NotificationService();
notService.NotificationMessageEvent += new NotificationService.NotificationMessageEventHandler(notService_NotificationMessageEvent);

RemotingServices.Marshal(notService, "CallOnMe.rem"); 
```

但是每隔一段时间就会丢失连接并且需要重新建立tp，我如何检查连接是否仍然打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-29T08:56:44.093

我不知道有什么方法可以检查连接是否仍处于活动状态。但是您可以很容易地实现这一点，方法是定期调用服务器上的虚拟方法，或者对远程处理对象执行其他操作。然后您可以检查异常，并尝试重新连接。

# c# - 我如何知道在 Windows Mobile 应用程序中单击了哪个功能？

> ID：490923
> 
> 赞同：1
> 
> 时间：2009-01-29T08:48:44.640
> 
> 标签：c#, windows-mobile, hook, global

我如何知道在 Windows Mobile 应用程序中单击了哪个功能（菜单项、按钮等）？

我需要创建一个全局监听用户点击的应用程序，就像 Windows 全局挂钩所做的那样，我需要知道用户单击的每个应用程序的哪个部分/控件。

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T13:30:49.167

Thw Windows CE 操作系统本身根本不支持鼠标挂钩。它支持键盘挂钩（非官方，但从 1.0 开始就存在）。获取所有鼠标事件的唯一方法是编写自定义触摸屏驱动程序，这可不是一件小事，尤其是当您没有有关硬件的信息时。也许如果您让我们更好地了解您*为什么*需要这种能力，我们可以提供替代方案。

# python - 使用 Python 的 MSN

> ID：490929
> 
> 赞同：2
> 
> 时间：2009-01-29T08:51:45.240
> 
> 标签：python, msn

我计划为我运行的游戏创建一个简单的机器人，让它坐在 MSN 上并回答查询。我想使用 Python 来做到这一点，并在谷歌上搜索并找到[了 MSNP](http://msnp.sourceforge.net/)。我认为“很棒”和“太棒了”，但它似乎已经有 5 年的历史了，而且奇怪的是没有连接到 MSN，因为这些年来他们可能已经改变了一两个小东西。

有人知道与此等效的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T08:53:03.133

我不知道有什么等价的，但是您可以查看[libpurple](http://developer.pidgin.im/wiki/WhatIsLibpurple)的源代码并自己滚动，而不会遇到很大的困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T12:16:13.967

如果您准备对原始源代码进行一些艰苦的工作，您可以更新它以支持当前版本的 MSN 协议：

[http://msnpiki.msnfanatic.com/index.php/Main_Page](http://msnpiki.msnfanatic.com/index.php/Main_Page)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-20T05:03:19.787

您可以使用[`msnlib`](http://blitiri.com.ar/p/msnlib/)，经过快速测试，它似乎是最新的，并且是一个包含两个文件的非常小且可读的库，并带有一些 cli 聊天客户端和聊天机器人的参考实现。

# flash - 如何允许用户始终允许我的 Flash 应用访问麦克风？

> ID：490947
> 
> 赞同：2
> 
> 时间：2009-01-29T09:00:57.080
> 
> 标签：flash, microphone

我们有一个 Flash 应用程序，它已经开始显示一些相当恼人的行为。每次用户登录网站时，他们都会看到来自 flash 的警告对话框，询问他们是否要允许我们的网站访问他们的麦克风进行录音：

[http://www.teragon.org/stuff/SO/naggy-flash.png](http://www.teragon.org/stuff/SO/naggy-flash.png)

对不起; 我无法让我的机器以英语显示该对话框，但它基本上说：“应该允许（服务器名称）访问您的网络摄像头和麦克风吗？”。用户单击“关闭”后，一切正常。The problem is, when "Remember" (Kom ihåg) is selected, it only remembers if the user had chosen "allow" or "deny", but the dialog still is shown *every time* they log in.

我们的 Flash 应用程序中的某些设置是否会阻止正确存储此首选项？我该如何做到这一点，以便当用户单击“记住”时，它会记住根本不显示？

**编辑**：这种行为是最近引入的，这意味着前一段时间，“记住”真的意味着“记住”，但现在它每次都会询问。我不确定这是由 flash 10 还是我们软件的较新版本引起的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-30T08:50:07.203

呸，多么愚蠢。问题确实是我们的错——一位开发人员在一个模块的初始化函数期间添加了对 Security.showSettings() 的调用，显然是为了修复另一个与获取麦克风延迟时间有关的错误。无论用户为“记住”复选框选择了什么，这样做都会显示对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T09:11:14.220

你不能。这是 FlashPlayer 的一项安全功能，可阻止流氓开发人员在用户不知情的情况下访问您的麦克风或网络摄像头。可能会导致出现各种狡猾的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T12:23:34.433

我从来没有遇到过这种行为，所以我只能猜测原因。我的第一个预感是 Flash 播放器每次都认为它是不同的 swf。这意味着它并没有真正“忘记”你设置的内容，而是认为你已经批准了那个特定的 swf。也许研究它用来识别和链接批准的内容可能会带来一些进展？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T09:25:51.330

也许您可以让您的客户将闪存复制/安装到他们的本地驱动器并以这种方式规避限制？

# asp.net - Asp.net 会员错误

> ID：490949
> 
> 赞同：1
> 
> 时间：2009-01-29T09:01:28.327
> 
> 标签：asp.net, casting, asp.net-membership

我们有一个实时运行的业务系统，有时会出现错误。该错误是根据来自 asp.net 成员资格提供程序的堆栈跟踪。哪个用户当前登录似乎并不重要。据我所知，数据库中的 asp.net 成员表很好。

生成错误的代码行示例：

```
if (Membership.GetUser() != null) 
```

错误描述：

```
Unable to cast object of type 'System.Int32' to type 'System.String'. 
```

堆栈跟踪：

```
[InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.]
System.Data.SqlClient.SqlBuffer.get_String() +141
System.Data.SqlClient.SqlDataReader.GetString(Int32 i) +96
System.Web.Security.SqlMembershipProvider.GetNullableString(SqlDataReader reader, Int32 col) +35
System.Web.Security.SqlMembershipProvider.GetUser(String username, Boolean userIsOnline) +1110
System.Web.Security.Membership.GetUser(String username, Boolean userIsOnline) +82
System.Web.Security.Membership.GetUser() +19 
```

有谁知道出了什么问题？

* * *

更新：我们找不到此错误的解决方案。但最终它消失了。

现在，当我们迁移到另一台服务器时，这个错误完全削弱了我们的应用程序。我完全没有想法:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-02-09T05:39:51.757

在 Membership.GetUser() 调用周围放置一个 try/catch 块并记录用户名。您可以通过调用 Membership.GetCurrentUserName() 来获取用户名。

一旦您有了一个导致问题的用户名，请查看 SQL 中的成员资格表并检查“评论”字段。我的猜测是评论字段中发生了一些有趣的事情——也许有一些奇怪的 unicode 字符遇到了问题，或者该字段中的数据太多，等等。

此外，尝试在会员数据库上为遇到问题的用户调用 dbo.aspnet_Membership_GetUserByName 并查看您得到的结果。

# apache-flex - Flex AdvancedDataGrid：MXML ItemRenderers 不默认为默认样式

> ID：490957
> 
> 赞同：1
> 
> 时间：2009-01-29T09:04:38.927
> 
> 标签：apache-flex, actionscript-3, advanceddatagrid

我知道 AdvancedDataGrid 有一个 styleFunction 回调，但我不想更改样式；我希望 itemRenderer 获得其他所有内容（包括普通列）使用的全局样式。

我的内嵌项目渲染器使用默认样式，但不是我作为单独的 MXML 类创建的那些（它们扩展了 Canvas）。

我需要摇动以将样式传播到我的项目渲染器中的任何句柄？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T01:50:42.247

我不认为你可以传播。似乎 styleFunction 是完全不同的东西。但是你可以访问任何 CSS 属性

```
var styleDecl:CSSStyleDeclaration = StyleManager.getStyleDeclaration("YourTagOrClassName"); 
```

接着：

```
styleDecl.getStyle(property); 
```

如果你想直接从 AdvancedDataGrid 获取样式声明，你必须获取渲染器 listData：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
    implements="mx.controls.listClasses.IDropInListItemRenderer">

    <mx:Script>
        import mx.controls.dataGridClasses.DataGridListData;
        import mx.controls.listClasses.BaseListData;
        [Bindable("dataChange")] private var _listData : BaseListData;
        public function get listData():BaseListData
        {
            return _listData;            
        }                   
        public function set listData( value : BaseListData ) : void
        {
            _listData = value;
        }
        override public function set data(value:Object):void
        {
            super.data = value;
            if (this.listData)
                ((this.listData as DataGridListData).owner as AdvancedDataGrid).getStyle(...);
        }
    </mx:Script>

</mx:Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T20:37:02.407

我的错

它继承了 ADG 的风格；该组件的样式未默认为全局样式。

# nhibernate - 使用 NHibernate 删除表中所有行的最佳方法？

> ID：490958
> 
> 赞同：37
> 
> 时间：2009-01-29T09:04:51.750
> 
> 标签：nhibernate, stored-procedures, linq-to-nhibernate

为了让我的集成测试保持独立，我删除了所有旧数据并在每次测试之前插入新的测试数据。有没有比简单地查询所有实体并一个一个删除它们更好的方法呢？

我考虑过编写一个运行“从表名中删除*；* ”的存储过程 对于要清除的每个表。这应该会快一些，但最好不要执行 SQL 查询或通过 NH 调用 SP。

我正在使用香草 NHibernate 和 Linq to NHibernate。我相信 Castle Active Record 有类似 Foo.DeleteAll() 的东西，但我不想在这个项目中使用 Active Record。

有任何想法吗？

谢谢/埃里克

**更新：**

自从提出并回答了这个问题以来，NHibernate 团队已经取得了进展。正如 Ayende 在[这篇博](http://ayende.com/Blog/archive/2009/05/28/nhibernate-ndash-executable-dml.aspx)文中解释的那样，您现在可以直接执行 DML 查询，而 NHibernate 不必获取任何实体。

要删除所有 Foo 对象，您可以这样做：

```
using (ISession session = ...)
using (ITransaction transaction = session.BeginTransaction())
{
    session.CreateQuery("delete Foo f").ExecuteUpdate();

    transaction.Commit();
} 
```

此查询将生成以下 SQL：

```
delete from Foo 
```

这比先获取实体然后删除它们要快得多。不过要小心，因为这样的查询不会影响 1 级缓存。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-01-29T09:17:41.070

在我的单元测试的拆解中，我主要这样做：

```
using( ISession s = ... )
{
   s.Delete ("from Object o");
   s.Flush();
} 
```

这应该删除所有实体。如果要删除一个特定实体的所有实例，可以这样做：

```
using( ISession s = .... )
{
    s.Delete ("from MyEntityName e");
    s.Flush();
} 
```

当然，这种方法有一个缺点，那就是 NHibernate 会在删除实体之前先获取实体。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-31T15:46:34.710

我使用 Fluent Nhibernate 属性，所以我稍微修改了代码，以免硬核表名

```
private static void CleanUpTable<T>(ISessionFactory sessionFactory)
{
    var metadata = sessionFactory.GetClassMetadata(typeof(T)) as NHibernate.Persister.Entity.AbstractEntityPersister;
    string table = metadata.TableName;

    using (ISession session = sessionFactory.OpenSession())
    {
        using (var transaction = session.BeginTransaction())
        {
            string deleteAll = string.Format("DELETE FROM \"{0}\"", table);
            session.CreateSQLQuery(deleteAll).ExecuteUpdate();

            transaction.Commit();
        }
    }
} 
```

用法

```
CleanUpTable<Person>(sessionFactory); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-01T11:58:21.597

使用 NHibernate 5.0，您现在可以简单地执行以下操作：

```
session.Query<Foo>().Delete(); 
```

文档：

```
 //
    // Summary:
    //     Delete all entities selected by the specified query. The delete operation is
    //     performed in the database without reading the entities out of it.
    //
    // Parameters:
    //   source:
    //     The query matching the entities to delete.
    //
    // Type parameters:
    //   TSource:
    //     The type of the elements of source.
    //
    // Returns:
    //     The number of deleted entities.
    public static int Delete<TSource>(this IQueryable<TSource> source); 
```

# c# - 使用 HttpModule 而不是 Global.asax

> ID：490961
> 
> 赞同：4
> 
> 时间：2009-01-29T09:06:21.217
> 
> 标签：c#, asp.net

我如何转换：

```
<%@ Application Language="C#" %>

<script runat="server">

    void Session_Start(object sender, EventArgs e) 
    {

    }

</script> 
```

对于使用 HttpModule 的方案？

另外，我可以将 Global.asax 编写为纯 C# 而不是使用标签吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-29T21:55:21.533

在您的自定义模块的初始化中，您需要检索 Session 模块并为 Start 事件添加一个事件处理程序。

```
public void Init(HttpApplication context)
{
    context.BeginRequest += new EventHandler(Begin_Request);
    IHttpModule sessionModule = context.Modules["Session"];
    if(sessionModule != null && 
        sessionModule.GetType() == typeof(System.Web.SessionState.SessionStateModule))
    {
        (sessionModule as System.Web.SessionState.SessionStateModule).Start 
          += new EventHandler(CustomHttpModule_Start);
    }
} 
```

> 另外，我可以编写 Global.asax aspure C# 而不是使用标签吗？

是的，您可以在 Global.asax 中添加代码并将内容更改为

```
<%@ Application Language="C#" CodeBehind="Global.asax.cs" Inherits="Global" %> 
```

您背后的代码应该继承自 System.Web.HttpApplication

```
public class Global : System.Web.HttpApplication
{
  public Global()   {   }

  void Session_Start(object sender, EventArgs e)
  {
      // Code that runs when a new session is started
  }
} 
```

# asp.net-mvc - 可以将部分域名作为我的路由规则中的参数吗？

> ID：490963
> 
> 赞同：2
> 
> 时间：2009-01-29T09:08:08.470
> 
> 标签：asp.net-mvc, routing

我想要一个接受我的域名的一部分作为参数的路由规则。例如：

```
{name}.mydomain.com/photos/{id} 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-31T20:42:20.527

这是不可能的，因为 {name}.mydomain（一个有效的名称而不是 {name}）是[Uri的](http://msdn.microsoft.com/en-us/library/system.uri.aspx)[权威](http://msdn.microsoft.com/en-us/library/system.uri.authority.aspx)部分。只能在 Uri 的[PathAndQuery](http://msdn.microsoft.com/en-us/library/system.uri.pathandquery.aspx)部分执行路由。

编辑：我错了，看看这个答案：[Manipulating Url structure](https://stackoverflow.com/questions/755579/asp-net-mvc-manipulating-url-structure/756304#756304)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-31T22:21:16.677

我在使用 asp.net mvc 时遇到了类似的问题，但使用的是整个域而不仅仅是子域。我们使用的是自定义路由约束来确定要转到哪个控制器（我们项目中的域确定控制器）。然后在控制器中，我们使用普通的 asp.net request.url 属性来执行操作。根据您的确切要求，这可能有帮助，也可能没有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-18T00:56:31.850

请参阅Maarten Balliauw 的[ASP.NET MVC 域路由](http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx)。

# c# - 您如何以编程方式阅读 SharePoint 列表？

> ID：490968
> 
> 赞同：11
> 
> 时间：2009-01-29T09:12:48.130
> 
> 标签：c#, .net, asp.net, sharepoint

我目前使用[Linq to SharePoint](http://www.codeplex.com/LINQtoSharePoint) 从多个 SharePoint 列表中检索数据。

这是我目前首选的从 ASP.NET 和 WinForms 编码来检索这些数据的方法。

我对这个项目的唯一问题：

我必须手动生成 SPML 文件并将其添加到开发环境中，在项目中对其进行编译，然后才能使用它连接到列表。

**这**对于需要始终连接到同一个列表的项目非常有用。

但是我让用户创建新的工作区（站点），每个工作区都有自己的列表，我想从中自动检索数据（与 linq to sharepoint 相同，但不是静态的）。

您能否推荐您在实际 SharePoint 环境之外使用 C# WinForms 和/或 ASP.NET 从多个 SharePoint 列表和网站访问数据的首选方式，在该环境中我可以在运行时指定新的源网站和列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-29T16:39:54.010

您有几种选择，这两种选择都需要您进一步研究，它们是：

1.  使用 SharePoint 对象模型 (Microsoft.Sharepoint.dll)，您必须在 SharePoint 场内的 PC 上。
2.  使用可以在 SiteURL/_vti_bin/ 中找到的 SharePoint Web 服务，您可能希望从 Lists.asmx 开始并从那里开始工作。

正如我所说，您将需要进一步研究，但请记住 GIYF。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-01-26T13:15:45.797

我真的鼓励这个主题的每个人都看一下来自bendsoft.com 的sharepoint 的ado.net 驱动程序。开发者免费使用，允许您使用标准sql语法查询共享点信息，并为您处理各种转换。

```
Dim conn As New SharePointConnection("Server=mysharepointserver.com;Database=sitepath;User=spuser;Password=******;")
conn.Open()
Dim cmd As New SharePointCommand("UPDATE Employees SET Salary = 3250.50 WHERE Name = 'Steve Watson'", conn)
cmd.ExecuteNonQuery() 
```

# php - php 中的 Stack Overflow / reddit 投票系统

> ID：490969
> 
> 赞同：5
> 
> 时间：2009-01-29T09:13:06.557
> 
> 标签：php, voting

我正在寻找如何在 php 中实现 StackOverflow / reddit 投票系统的示例。

基本上我想要向上和向下箭头框。有什么好的例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-29T11:51:34.873

那里有很多脚本[，](http://www.google.co.uk/search?hl=en&q=php+voting+-poll&btnG=Search&meta=)但自己做并不难。

我以前使用过 jQuery（处理 AJAX）和一个小的 PHP 脚本。例如，一些伪代码：

```
// Some checking for recent votes from this user is appropriate here
if (isset($_POST['voteType'], $_POST['postId']) && $user->loggedIn) {
    // insert vote into database if not already inserted
    echo json_encode(array('error' => false));
} else {
    // bad request/hack attempt
    echo json_encode(array('error' => true, 'message' => 'Bad parameters sent'));
} 
```

然后是一些 jQuery：

```
$('#upVote').click(function() {
    $.post('vote.php', {voteType: 'up', postId: 42}, 'updateIcon(data, textStatus)', 'json');
});

function updateIcon(data, textStatus) {
    // If error = false highlight the upvote icon
    // else show the error message returned
} 
```

[jQuery.post](http://docs.jquery.com/Ajax/jQuery.post)

# java - 在 Windows 和 Linux 平台上运行一个用 Java 开发的 Web 项目

> ID：490970
> 
> 赞同：0
> 
> 时间：2009-01-29T09:14:00.483
> 
> 标签：java, windows, linux, cross-platform

我有一个用 java 开发的 web 项目。我正在使用 Windows 平台并从 Windows 机器本身访问项目。如何让项目在 Linux 机器上运行？我正在使用 jboss 服务器并部署项目。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-29T09:31:26.823

Java是跨平台的，MySQL也是。您可以让应用程序服务器在一台服务器上运行，而数据库在另一台服务器上运行。您甚至可以在 Linux 上拥有 Appserver，在 Windows 上拥有数据库，在 MacOS 上拥有客户端。

如果您遇到任何具体问题，请告诉我们，但一切都应该是透明的，除非您编写了一些非常糟糕的 Java 代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-29T16:36:36.420

Java 可以在许多平台上运行，包括 linux 和 windows。您可以在任何地方开发项目并在任何服务器上运行。

[我建议你，在virtualbox](http://www.virtualbox.org/)上安装一个linux，然后直接部署在linux上。您也可以尝试[巡航控制](http://cruisecontrol.sourceforge.net/)自动部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-29T11:10:49.853

仅当未完成任何特定于平台的编码时，Java 才能在许多平台上运行，例如 Windows、Linux 和 Mac 中的文件分隔符不同。

您需要 Jboss for linux 并部署您的 Web 应用程序，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-29T09:17:41.257

Java 是一种跨平台语言。只需在 Linux Box 上运行的 JBOSS 中部署您的 JAR/WAR/EAR。

# dependencies - 管理不同组件版本之间依赖关系的最佳方法是什么？

> ID：490971
> 
> 赞同：4
> 
> 时间：2009-01-29T09:14:23.760
> 
> 标签：dependencies

我在以前的工作中遇到了这个问题，现在又遇到了这个问题，这意味着我要么运气极差，要么不知道有什么工具或组织系统可以解决这个问题。

在这两种情况下，最终产品都由几个独立的组件组成，每个组件都通过一个商定的接口与其邻居进行通信。问题是，随着时间的推移，界面会发生变化，然后相应的组件也必须更新，以便一切正常工作。

这本身不是问题。问题是当试图返回 SCM 历史时，这使得错误跟踪变得极其困难，因为在某些时候，您尝试调试的组件将不再与系统的其他部分兼容，并且无法针对它们进行测试也没有回滚它们。

举个例子：

1.  假设我们有一个客户端/服务器产品，为了简单起见，两者都以完全工作的状态开始。我们将这些版本称为client-1.0 和server-1.0。
2.  一段时间后，对两者都进行了错误修复和功能。现在我们在 client-1.7 和 server-1.2。
3.  现在服务端的接口改变了，所以客户端也必须改变：server-2.0和client-1.8。
4.  现在客户端版本为 1.9，发现了一个 bug，我们想测试以前的版本，看看它在哪里停止与服务器一起工作。但是，如果我们回到 1.8 之后，那么服务器也必须恢复。

我给出的示例场景非常简化，但问题归结为：强制执行哪些版本的客户端和服务器相互兼容的最佳方法是什么？

我曾考虑通过文档来做到这一点，但不可避免地，人性会胜利，有人忘记为他们或其他组件更新它们。我也想过通过匹配版本来做到这一点（即，当服务器达到 2.0 时，客户端也被提升），但问题是客户端可能有其他与服务器无关的组件依赖项，所以它没有意义全面更新他们的版本。

必须有一些解决方案来解决这个问题。有人对我的研究有任何建议或起点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-29T09:20:44.193

您必须设置一个*历史*元标签（引用其他标签的标签）

可以这样做：

*   通过 SCM 中的元数据（例如，SVN 确实保留了其元数据及其数据的历史记录）
*   或通过外部数据库注册当前测试和验证为“一起工作”的所有标签的列表（前提是该列表也被历史化）

该元标签的历史化特性确保您能够恢复到以前的一组连贯标签以调试系统。

无论您选择何种解决方案，一旦在生产环境中交付，请不要忘记：

*   您在该生产环境中没有您的 SCM
*   因此，您必须依靠一个文本文件来提醒您部署的确切标签。

该文本文件应在您构建交付包时自动生成（您将部署到生产中的文件集）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-29T09:23:50.257

您似乎在管理依赖项方面没有问题，但您在回归时遇到了问题。

接口负责依赖抽象，单元测试和夜间构建负责变更控制。

如果您需要测试一个历史版本，您需要能够从您的源存储库中获取该标记版本，并将其部署在一个复制但完全独立的环境中。因此，这是在 SCM 中定义发布标签元数据并拥有备用/专用硬件的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-29T10:05:16.587

我不知道您使用的是什么语言平台，即 Java、C 等。但这里有一些相关信息，让我在 java 中的生活变得轻松。

有一个名为 Maven 的构建工具用于我的 Java 应用程序。Maven有明确的依赖配置。例如

client-1.0 取决于 server-1.0 - 当您看到 client-1.0 配置时，您会注意到它需要 server-1.0 client-1.7 取决于 server-1.2 client-1.8 取决于 server-2.0 client-1.9 取决于 server-2.0

您发布的每个版本都将在您的 Maven 存储库中可用。如果我想测试 client-1.7，我将简单地从存储库和配置中获取它，我知道它需要 server-1.2，它也可以在存储库中使用。我将开始我的申请和测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-02T07:05:46.830

使用 RESTful 接口。在真正的 REST 中，客户端学习如何通过服务器返回的响应中的元数据进行导航。通过保持元数据静态，旧客户端可以导航较新的服务器版本。

# javascript - 在 HTML 表格中模拟 Excel 的“冻结单元格”

> ID：490973
> 
> 赞同：1
> 
> 时间：2009-01-29T09:16:57.360
> 
> 标签：javascript, html, user-interface, html-table

> **可能重复：**
> [如何在滚动时锁定表格的第一行和第一列，可能使用 javascript 和 CSS？](https://stackoverflow.com/questions/296020/how-can-i-lock-the-first-row-and-first-column-of-a-table-when-scrolling-possibly)

我有一个包含大量行和列的 HTML 表。顶行包含标题，下面每行中的第一个单元格包含标题。

我需要允许用户滚动表格，同时保持顶行和左列始终可见（类似于使用 Excel 中的“冻结单元格”选项可以实现的效果。

该解决方案只需要适用于 IE7+，因为它适用于内部应用程序。

理想情况下，该解决方案应该在其他浏览器中正常降级，但这不是必需的。

我的预感是有一个 JavaScript 解决方案来解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-29T09:39:20.430

这看起来像[滚动时如何锁定表格的第一行和第一列的副本，可能使用 javascript 和 CSS？](https://stackoverflow.com/questions/296020/how-can-i-lock-the-first-row-and-first-column-of-a-table-when-scrolling-possibly)

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-05T15:59:02.467

正如你所说

> 该解决方案只需要适用于 IE7+，因为它适用于内部应用程序。

有[这个解决方案](http://www.javascripttoolbox.com/lib/scrollingdatagrid/)，它是**IE only**和**Css only**。

希望能帮助到你 ：-）

# c - 如果我已经知道汇编，我还应该学习 C 吗？

> ID：490990
> 
> 赞同：4
> 
> 时间：2009-01-29T09:24:26.620
> 
> 标签：c, assembly

通常，学习 C 的主要原因之一是它使您更接近低级别的编程，从而使您深入了解事物在高级语言中的实际工作方式。

我已经用各种汇编风格编程了一段时间，你不能得到比我一直在编码的水平更低的水平，而且我对引用类型或指针到底是什么没有任何幻想。应该指出的是，我在 Java 和 C# 方面也相当多产。我不只知道组装。

是否仍然值得努力打开[K&R](http://en.wikipedia.org/wiki/The_C_Programming_Language_(book))并花费一些宝贵的时间来学习 C 语言的复杂性，或者我最好花时间学习其他东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-29T09:34:01.907

> 通常，学习 C 的主要原因之一是它使您更接近底层编程

好吧，把那个刮掉，看看其他的，然后自己决定。如果你想：

*   保持接近低水平但获得便携性
*   能够使用 C 已经拥有的庞大代码库
*   学点新东西

那么你可能想学习C。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-29T09:33:26.617

是的，一点没错。在直接汇编中编写任何显着大小的程序都非常麻烦，因此大多数写成的应用程序（如硬件驱动程序）将主要使用 C 语言，或者至少 C 语言将对汇编函数的调用粘合在一起。

此外，由于 C 与机器的关系如此密切（也就是说，它是低级的），所以在汇编之后学习 C 将是了解编译器真正将高级代码转换为机器指令的工作的一个很好的垫脚石。 .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-29T09:36:45.770

你知道汇编，你似乎知道 C#。学习另一种语言从来都不是一件坏事，但我只建议您在不久的将来需要它时学习 C。我认为你可以通过学习像 Ruby 这样的动态语言或像 Common Lisp 这样的函数式语言来扩展你的知识。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-29T09:43:09.593

绝对地！学习 C 也将改善您的汇编程序编程。当您学习 C 时，您将开始将结构化方法转移到您的汇编程序中。我注意到我对高级语言的了解越多，我的汇编语言编程的组织性和可理解性就越好。

能够混合 C 和汇编程序非常有用。能够在单个项目中同时使用这两种方法使您可以在该项目中的任何给定情况下使用适当的解决方案。对于大多数任务，C 编码更快，偶尔情况相反，汇编语言更快。有时汇编语言能够更好地表达解决方案的特定方面（汇编程序与硬件的紧密映射可以使编程 I/O 或设备管理更清晰）。对于更抽象的概念，C 可以更清晰（C++ 可以再次更好）。

学习 C++ 也是如此。我发现自己在 C 和汇编程序编程中都使用了面向对象的方法。

最后是课程的马。针对手头的问题使用适当的语言。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-29T09:28:05.333

我认为您应该学习任何编程语言的最重要原因是您可以将其用于某些用途。

如果你已经学会了汇编来做某事，并且你觉得你可以在 C 中做得更好，那么一定要继续。

但是如果你发现你在 C 中没有什么可做的，那么专业地学习它是没有意义的。

但是，如果您想将其作为爱好或个人努力来做。然后是你的时间，做任何你想做的事。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-29T09:32:20.787

C 是可移植的（如果你仔细编写的话），这对我来说是一个很好的理由。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-29T11:38:40.530

**没有人提到......**

C 是更快编写汇编程序的途径。当我写电脑游戏时，我们首先用 C 语言编写所有内容，然后重新编写花费了所有时间的部分，即旧的 80-20 规则。80% 的时间在 20% 的代码中。

为此，我们编译了我们希望重写的代码，并使用了转储到汇编器文件标志。然后我们将 C 生成的汇编文件作为基础编写更优化的汇编代码。这比从头开始要快得多。

今天，这种方法要困难得多，因为编译器要好得多，而且人类改进编译器代码要困难得多——因为处理器变得如此复杂，快速代码已经成为保持缓存和管道满载的问题。

托尼

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-29T11:53:58.457

学习一门新语言总是一件有趣的事情，尤其是当它与你已经知道的有显着不同的范式时。所以我会说去吧。

我发现非常有趣的是，C 仍然是[主要搜索引擎和图书网站上最受欢迎的语言之一](http://www.langpop.com/#normalized)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-29T09:26:57.397

也许不是...但是学习它不会有什么坏处:) 我个人在 C 之前学习了 x86 汇编，而我的汇编知识使我更容易掌握 C 指针。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-29T09:31:39.460

这取决于。如果你想使用 C++，你当然也应该学习 C。如果你想用 Python 或 Perl 编写代码，你并不需要它，因为你已经了解了 Assembler 的内部结构。

一件事：你在汇编器中工作过指针和堆吗？理解指针和内存管理对于每种高级语言都非常重要。如果你没有正确理解指针和堆的概念，你应该试试 C。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-29T11:03:09.573

我务实地看待它——除非你觉得你的工作比程序员的生产力更重要，否则我不会打扰。经过 12 年的编程，我从来没有遇到过应该用 C 语言而不是垃圾收集语言编写的工作。但是，您的情况可能会有所不同。

如果你只知道 Java，那么我会说是的，它会很棒。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-29T18:18:50.677

我认为这取决于 - 您（或将来可能）是否必须处理包含 C 的代码库？那里有很多东西，所以我真的很惊讶，鉴于你引用的程序集、C# 和 Java 经验，你还没有需要用 C 做一些事情（至少阅读它）。

另外，鉴于您了解上述一组语言以及与之相关的概念，我猜想学习 C 语言对您来说是小菜一碟。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-21T20:39:04.277

是的，它是 c 就像所有编程语言的核心，几乎所有语言都是基于它构建的，并且感觉你知道 c# 如果你做了很多汇编工作，那么学习 c 不会花很多时间，那么我想你可能有一天会不会已经使用它了它 C 就像一个基础知识，即使大多数 Web 开发人员都知道 C

* * *

## 回答 #14

> 赞同：-6
> 
> 时间：2009-01-29T09:30:41.477

令人惊讶的是，在一个每天都有新脚本语言的世界中，仍然有人设法只知道汇编程序。

我自己，在长时间编写 perl 或 javascript 之后，总是会发现像 C 或 C++ 这样的低级语言有点缺乏，例如，我在 perl 中编写 foreach(@array)，在 C/C++ 中我不得不摆弄 for 循环和索引和/或迭代器。

所以，是的，我只能想象你会从 C 为你提供的抽象中得到多少。

此外，拓宽视野总是一件好事。************