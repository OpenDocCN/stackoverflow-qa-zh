# StackOverflow 问答 000633000-000633999

# c# - 逻辑现在是多态而不是 Switch，但是构造呢？

> ID：633001
> 
> 赞同：2
> 
> 时间：2009-03-11T01:38:12.423
> 
> 标签：c#, design-patterns, oop

这个问题专门针对 C#，但我也对 C++ 和 Java（甚至其他语言，如果他们有很酷的东西）的答案感兴趣。

我在继承的“使用 C# 语法的 C”代码中用多态性替换 switch 语句。我一直对创建这些对象的最佳方式感到困惑。我有两种我倾向于使用的后备方法。我想知道我是否应该考虑其他可行的替代方案，或者只是进行健全性检查，以证明我实际上正在以合理的方式解决此问题。

我通常使用的技术：

1.  使用无所不知的方法/类。此类将填充数据结构（很可能是 Map）或使用 switch 语句即时构建。
2.  使用一个使用配置文件和反射的盲注类来创建实例/委托/工厂/等的映射。然后以与上述类似的方式使用 map。
3.  ？？？

*有没有我应该强烈*考虑的#3、#4...等？

* * *

一些细节......请注意，最初的设计不是我的，我的时间有限，就重写/重构整个事情而言。

以前的伪代码：

```
public string[] HandleMessage(object input) {

   object parser = null;
   string command = null;
   if(input is XmlMessage) {
      parser = new XmlMessageParser();
      ((XmlMessageParser)parser).setInput(input);
      command = ((XmlMessageParser)parser).getCommand();
   } else if(input is NameValuePairMessage) {
      parser = new NameValuePairMessageParser();
      ((NameValuePairMessageParser)parser).setInput(input);
      command = ((XmlMessageParser)parser).getCommand();
   } else if(...) {
      //blah blah blah
   }

   string[] result = new string[3];
   switch(command) {
      case "Add":
          result = Utility.AddData(parser);
          break;
      case "Modify":
          result = Utility.ModifyData(parser);
          break;
      case ... //blah blah
          break;
   }
   return result;
} 
```

我打算用（在对其他对象进行大量重构之后）替换它是这样的：

```
public ResultStruct HandleMessage(IParserInput input) {
   IParser parser = this.GetParser(input.Type);       //either Type or a property
   Map<string,string> parameters = parser.Parse(input);
   ICommand command = this.GetCommand(parameters);  //in future, may need multiple params 
   return command.Execute(parameters);              //to figure out which object to return.
} 
```

问题是 GetParser 和 GetCommand 的实现应该是什么？

在那里放一个 switch 语句（或调用由 switch 语句组成的工厂）似乎并不能*真正*解决问题。我只是将开关移到其他地方......这可能很好，因为它不再位于我的主要逻辑中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T05:58:14.810

您可能希望将解析器实例化器放在对象本身上，例如，

```
public interface IParserInput
{
    ...
    IParser GetParser()
    ICommand GetCommand()
} 
```

理论上，任何`GetParser`需要的参数都应该由您的对象提供。

将会发生的是对象本身将返回这些，而您的代码会发生什么：

```
public ResultStruct HandleMessage(IParserInput input) 
{
    IParser parser = input.GetParser();
    Map<string,string> parameters = parser.Parse(input);
    ICommand command = input.GetCommand();
    return command.Execute(parameters);
} 
```

现在这个解决方案并不完美。如果您无权访问这些`IParserInput`对象，它可能无法正常工作。但至少现在提供有关正确处理程序的信息的责任在于解析器，而不是处理程序，这在这一点上似乎更正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T02:02:52.880

你可以有一个

```
public interface IParser<SomeType> : IParser{} 
```

并设置结构映射以查找“SomeType”的解析器

似乎命令与现有代码中的解析器相关，如果您发现它对您的场景很干净，您可能希望保持原样，只需向解析器询问命令。

**更新1：**我重新阅读了原始代码。我认为对于您的场景，定义如上所述的 IParser 可能是最小的变化，它具有适当的 GetCommand 和 SetInput。

命令/输入部分看起来大致如下：

```
 public string[] HandleMessage<MessageType>(MessageType input) {
       var parser = StructureMap.GetInstance<IParser<MessageType>>();
       parser.SetInput(input);
       var command = parser.GetCommand();
       //do something about the rest
   } 
```

附言。实际上，您的实现让我觉得旧代码，即使没有 if 和 switch 也有问题。您能否提供有关在您的实现中 GetCommand 中应该发生的事情的更多信息，该命令实际上是否随参数而变化，因为我不确定为此建议什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T01:42:26.937

我没有看到像您这样的消息处理程序有任何问题。我当然不会采用配置文件方法——当您可以在编译时获得所有可用的东西时，为什么还要在调试器之外创建配置文件呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T05:20:02.470

第三种选择是以分散的方式在运行时发现可能的命令。

例如，Spring 可以在 Java 中使用所谓的“类路径扫描”、反射和注释来执行此操作——Spring 解析您指定的包中的所有类，选择带有 @Controller、@Resource 等注释的类并将它们注册为 bean .

Java 中的类路径扫描依赖于添加到 JAR 档案中的目录条目（以便 Spring 可以枚举各种类路径目录的内容）。

我不了解 C#，但那里应该有类似的技术：也许您可以枚举程序集中的类列表，并根据某些标准（命名约定、注释等）选择其中的一些。

现在，这只是为了考虑第三种选择而要考虑的第三种选择。我怀疑它实际上应该在实践中使用。您的第一个选择（只需编写一段了解所有类的代码）应该是默认选择，除非您有令人信服的理由不这样做。

在 OOP 的去中心化世界中，每个类都是拼图中的一小部分，必须有一些“集成代码”知道如何将这些部分组合在一起。拥有这样的“无所不知”的类并没有错（只要您将它们限制在应用程序级别和子系统级别的集成代码中）。

无论您选择哪种方式（在类中对可能的选择进行硬编码、读取配置文件或使用反射来发现选择），都是同一个故事，并不重要，并且可以随时轻松更改。

玩得开心！

# java - 自 JDK 1.4 以来没有经验。我在市场上仍然可行吗？

> ID：633002
> 
> 赞同：4
> 
> 时间：2009-03-11T01:39:03.950
> 
> 标签：java

我知道除了我在以前的工作中使用的 JDK 之外，还有其他因素在起作用，但是自 JDK 1.4 以来发生了很多事情，而且我没有在生产环境中使用任何新的 1.5 或 1.6 功能。这会对我造成很大的伤害吗？我看到的几乎每个教程都使用泛型、枚举、var args 等，我想知道我是否真的落后于曲线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-11T01:42:58.230

如果您花时间自学这些主题，您将是可行的。在一次采访中，他们将能够亲自了解您是否了解枚举，这可能会有所作为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T01:46:04.637

好了，JDK1.5的主要新特性已经罗列了，那就去学习吧。泛型、枚举和 var args 的基础知识并不难掌握，你应该可以在一两天后使用它们。

无论如何，让你有价值的不是你是否或多或少地了解一些语言功能（尽管有些雇主显然喜欢在简历中打勾），而是你与客户合作和解决问题的经验。

这种经验也应该可以帮助你快速学习新东西......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T02:32:40.857

自 JDK 1.0 Alpha 2 以来，我仍然有无需修改即可运行的代码，因此总体情况并没有太大变化。

看看新事物是什么，它们分为以下几类（这并不详尽，请查看[此处](http://java.sun.com/j2se/1.5.0/docs/relnotes/features.html)和[此处](http://java.sun.com/javase/6/webnotes/features.html)以获得更完整的列表）：

*   语言变化

    *   泛型，消除强制转换的语法糖，
    *   枚举，本质上简化代码的语法糖如下所示，
    *   var args，传递数组的语法糖
    *   增强的 for 循环、语法糖以删除样板代码
    *   注释，大话题
*   库更改

    *   更多集合更改（添加了泛型）
    *   线程更改（java.util.concurrent）
    *   扫描仪，更简单的解析
*   虚拟机变更

    *   许多 C api 更改，你不应该关心
    *   一些低级 API 更改，你不应该关心
    *   一些内部变化，你不应该关心

对于语言的变化，阅读它们并练习它们。您应该能够在一周内习惯它们。

对于库更改，取决于您需要/想知道的内容，同样的，用它们编写一些代码。可能需要几个星期才能掌握它们的窍门。

您并没有“落后”那么远，并且不会花很长时间才能赶上。

（示例枚举代码）

```
public class FooEnum
{
    public static final FooEnum A = new FooEnum();
    public static final FooEnum B = new FooEnum();
}

public enum Foo
{
   A,
   B,
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-11T14:59:19.410

获取“Effective Java”的副本。它会教你很多东西，让你更适合自己回答你的问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-11T01:43:14.847

就 JDK 本身而言，我怀疑这会是一个问题。过渡到使用泛型所花费的时间比你花在一天中的时间更少，因为不支持泛型 [为 2000 年代初期浪费的所有时间而哭泣]。恕我直言，所有其他功能差异都相当模糊，你会在跑步时捡起它们，但最好在面试之前。

更大的问题是现在大部分市场都集中在 J2EE API 的使用上。你用过这些吗？它们并不难学，有机会练习更重要。还有很多关注不属于 JDK 的 Spring 之类的东西。

如果我是你，我会专注于阅读 J2EE 教程。在弄清楚泛型之后。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-11T01:46:28.660

这取决于您的其他技能组合以及您所在的市场。对于国防和国土安全等某些行业来说，这种情况并不少见，往往落后于主流一两个版本。

直到最近，我所知道的一些 J2EE 商店仍然在使用 1.4... ... Hibernate、Oracle、Oracle App Server、J2EE、GIS、JAAS 等都会有所帮助。或者，如果您是具有丰富 OO 和设计经验的高级人员（您一直在关注 DI、组合、按合同设计等想法），我真的不在乎您使用什么 JDK -迄今为止。

特定 JDK 的细节并不像理解这些特性的原因和应用那么重要。即使你没有在生产中使用泛型、枚举、属性或并发，你最好能在采访中告诉我为什么这些东西很重要。

总而言之，当您开始时，您最好准备好开始使用那些新的、时髦的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-11T01:46:42.170

我相信我是在 Java 1.1 上学习的，然后才开始使用 Java 1.5。

虽然你会有东西要学，但我会说你还是没问题的。真正重要的是面向对象编程的整个思想。一旦你有了这个概念，你应该很高兴。

在你开始之前，你会想要学习这些新主题。泛型将被证明是 Java 编程中最重要的事情之一。枚举紧随其后。

这里稍微介绍一下泛型： 泛型允许您在创建对象期间指定存储在其中的一个或多个类型。最简单的示例是已经定义的类，例如列表。

老办法：

```
List myList = new List(); 
```

新方法：

```
List<String> myList = new List<String>(); 
```

现在，当您从列表中删除内容时，它们将是字符串，您不必担心代码中的任何类型转换或其他任何内容。它确实增加了可读性。

您当然会想要更详细地了解它们，以真正了解它们是如何工作的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-11T01:47:35.490

找教程。将您的一些旧代码转换为在 Java 6 中编译时不会出现警告。习惯泛型、新的 for 语法和其他内容。你很快就会熟悉的。

但除此之外：如果面试官认为你会因为不接触 Java 的最后两个版本而严重虚弱，那么你就不想在那里工作。这不是一个很大的飞跃。无需任何 Java 5 或 6 知识即可轻松展示您的 OO 编程技能，然后在新工作的第一周就掌握了它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-11T02:08:48.170

请记住，您提到的一些特性 --var args、enums -- 非常容易学习和使用。泛型需要一点学习，但大多数有经验的程序员不会花太多时间来理解它。事实上，目前，我见过的许多整合的 Java 项目还没有使用泛型——而且大多数使用泛型的项目都没有以正确的方式实现它。所以，是的，我认为你仍然对市场有利。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-03T02:25:33.957

这取决于。你的代码看起来如何？干净吗？有据可查？你在写好的*有用*的单元测试吗？你知道什么是[PMD](http://pmd.sourceforge.net/)吗？你知道它为什么重要吗？您最常看到哪些[FindBugs报告？](http://findbugs.sourceforge.net/)您认为哪些是目前**绝对可以解决的问题**，哪些*可以，我们可以做得更好*？你如何作为一个团队工作？如果日程安排很紧怎么办？你有能力规划你的工作并按计划执行吗？

*……等等……*

简而言之，你的工作产品的质量和你生产它的方式对很多你真正想与之合作的雇主来说更有价值。了解最新的方言、功能和“是的，看起来很酷，但永远不要尝试使用它”这门语言的各个方面比一开始就学习如何做好工作要容易得多。

不要自杀。了解你能学到什么，这样你就可以就那些你没有付费使用但想表明你愿意投入其中的东西进行明智的对话。

请记住：**永远不要**对您的经历撒谎。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-03T06:40:05.047

许多应用程序仍在使用 Java 1.4，您可能会发现 Java 5/6 并没有什么不同。最明显的区别是泛型。

# database - 登台表/登台数据库是反模式吗？

> ID：633006
> 
> 赞同：4
> 
> 时间：2009-03-11T01:40:45.880
> 
> 标签：database, design-patterns, anti-patterns, staging

当 rpc（如 Java RMI 或某种 Web 服务调用）或消息队列（如 JMS）是更好的解决方案时，暂存表是否是一种反模式，或者暂存表是否可以更好地解决问题？

澄清：

暂存表是指记录由一个或多个进程附加到一个或多个表的情况，然后由第二个或多个进程读取并对其进行操作。我不是指那些旨在反映间隔结束状态（一天结束、支付期结束等）的表格。在大多数情况下，登台表的模式非常模仿应用程序数据类型，例如客户或帐户。

这种反模式的潜在原因：

1) 两个进程的所有者之间的业务单元墙可防止写入或读取暂存的进程被修改。

2) 对 staging 写入或读取的进程信心不足，导致开发人员使用 table 来防止“以防万一发生故障”的数据丢失

3）缺乏知识或DGAS（不要给^％$@）态度

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-11T01:53:30.717

正如您所描述的，暂存表是大多数数据仓库或 BI 环境的重要组成部分。您可能会争辩说可靠/有弹性的 rpc 会做同样的工作，但我认为您是不正确的。

通过将数据拉到临时表中，您将其移出生产环境，可能会进行进一步的计算、汇总、重新索引、重新键入等，其中大部分都是“在数据库中”实现的。用 RPC 替换它，您将代码和 CPU 周期从 DB 移到应用服务器中，而没有真正的好处。例如，应用服务器崩溃的可能性要高得多——您不能（轻松）回滚 RPC。

当然，有很多方法可以在系统之间可靠地移动数据，临时表恰好是最简单、性能最高、可靠并且在开发方面最便宜的方法之一，并不总是意味着它们是正确的方法 - 但更多时候比不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-11T01:54:59.763

为什么它们会成为反模式？暂存表对于将接收服务与处理服务分离非常有用。当两个这样的服务被解耦时，您对处理错误和网络错误的弹性要大得多，因为所有消息都存储在临时表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T01:53:53.917

我唯一一次看到这是出于报告原因，即在生成报告时使用非规范化表来保存数据。我不认为这是一个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T01:54:46.177

我的第一反应是肯定的，但这主要是因为我的情况——你的情况可能不同。我们有一个系统，其中一些相对时间敏感的信息需要从命令组件传输到接收器组件。命令信息被放入数据库表中，然后接收器轮询表以获取更新。这太可怕了。他们这样做是为了在数据库中记录命令，但最终只会使实际命令永远持续下去，并且解耦有时会导致接收器与数据库不同步。

我宁愿看到 EMS（如 JMS）将消息广播到接收者和数据库插入器都侦听的主题，或者从指挥官到接收者的队列，然后接收者通知状态侦听器将其状态放入数据库。

我迫不及待地想修复那个代码。

# php - 将多个 SQL 语句拆分为单独的 SQL 语句

> ID：633014
> 
> 赞同：4
> 
> 时间：2009-03-11T01:43:43.020
> 
> 标签：php, sql, mysql

介绍说明：我希望存在一个库或例程来执行此操作，但我找不到类似的东西。我真的在寻找从哪里开始的方向和建议......

情况如下：我有一个纯文本形式的 SQL 命令块。它可能是一个或多个 SQL 命令。我需要一种方法来拆分多个 SQL 命令，以便一次运行一个。Microsoft SQL Management Studio 确实具有这种开箱即用的行为。

我正在尝试将此功能添加到在 Apache (Debian) 上运行的 PHP5/MySQL5 应用程序中。

一些重要的点：

1.  我真的需要一次运行它们。严重地。
2.  我不想要求用户在每个 SQL 语句后输入分号。
3.  SQL 语句可以在一行或多行，所以我不能在 LB/CR 上换行
4.  它至少需要支持 SELECT、UPDATE、INSERT、DELETE。
5.  它需要支持作为子选择的查询
6.  整齐的标签式 SQL 需要工作
7.  （为了可用的软件）我不想强迫用户输入任何类型的分隔符。

这是我需要分成两个语句的 SQL 示例块：

```
select sMessage, 
(
    SELECT COUNT(sTag) FROM Tags WHERE ixTicket = note.ixTicket
) FROM note
select * from ticket
    WHERE (SELECT MAX(nCount) FROM Counter WHERE ixTicket = ticket.ixTicket) > 5 
```

我尝试了一些 RegEx 尝试，但这似乎不够强大。

关于解决这个问题的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T03:38:19.437

我不确定这是否可能。您当然需要深入了解目标 DBMS 的 SQL 语法。例如，就在我脑海中，这是一条 MySQL 语句：

```
INSERT INTO things
SELECT * FROM otherthings ON DUPLICATE KEY
UPDATE thingness=thingness+1 
```

某些 DBMS 中可能存在一些结构，如果没有分隔符，这些结构可能会模棱两可。

> 我不想要求用户在每个 SQL 语句后输入分号。

我想你可能是被迫的。这完全是分隔 SQL 语句的标准方法。即使您可以找到一种启发式方法来检测可能是 SQL 语句的开始点，您也会冒着灾难的风险，例如意外的“DELETE FROM things”——没有 WHERE 子句。

> SQL 语句可以在一行或多行，所以我不能在 LB/CR 上换行

双换行符换新语句可以接受吗？

> 我尝试了一些 RegEx 尝试，但这似乎不够强大。

不，即使*使用*分号分隔符，正则表达式也远不足以解析 SQL。问题点包括：

```
';'
";"
`;`
'\';'
''';'
-- ;
#;
/*;*/ 
```

以及这些结构的任何插入。哎呀！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T01:50:29.150

也许试试这个库。过去我已经成功地使用它来解析 sql。[http://www.sqlparser.com/](http://www.sqlparser.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-10T16:52:15.830

```
    $sMultiQuery = '显示表格；从“测试”中选择*；
    $aQueries = 数组（）；

    if ( preg_match_all('/([^;]*?((\'.*?\')|(".*?"))?)*?(;\s*|\s*$)/', $sMultiQuery, $aMatches) )
    {
        $aQueries = $aMatches[0];
    }
    别的
    {
        $aQueries = 数组（$sMultiQuery）；
    }

    foreach ( $aQueries 作为 $sQuery )
    {
        #做你的事
    }

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T04:36:16.380

要在定期引起问题的讨论中添加怪癖：

```
DECLARE c CURSOR FOR
    SELECT * FROM SomeWhere ...
        FOR UPDATE 
```

尾随的 UPDATE 往往会使临时解析器偏离他们的步伐。很可能您不必担心这一点，因为 DECLARE 表示法（它实际上是嵌入式 SQL，而不是普通 SQL）首先是不允许的。但是 FOR UPDATE 子句即使不在 DECLARE 语句中也可能出现在某些 SQL 方言中，所以要小心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-12T12:36:03.833

也许使用以下Java Regexp？检查测试...

```
@Test
public void testRegexp() {
    String s = //
        "SELECT 'hello;world' \n" + //
        "FROM DUAL; \n" + //
        "\n" + //
        "SELECT 'hello;world' \n" + //
        "FROM DUAL; \n" + //
        "\n";

    String regexp = "([^;]*?('.*?')?)*?;\\s*";

    assertEquals("<statement><statement>", s.replaceAll(regexp, "<statement>"));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-11T01:47:26.693

您最好的选择是要求用户在语句之间放置某种类型的分隔符。例如：要求每条语句用只包含单词 GO 或“\”的行来划定，或以“;”结束每条语句。

这样，您可以轻松地将单个字符串分解为单独的 SQL 语句。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-11T01:52:33.623

如果您不希望您的用户输入分隔符，例如“;” 或其他任何事情，您将需要自己解析输入并有逻辑来确定语句的开始位置。

您的逻辑将需要处理明显的查询起始关键字“SELECT”、“UPDATE”、“INSERT”、“DELETE”，并继续处理下一个关键字（或输入结尾）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-11T01:58:45.777

您是否尝试过使用关键字 'SELECT'、'UPDATE'、'INSERT' 和 'DELETE' 并结合计算左括号 '(' 和右大括号 ')' 的数量？

这应该允许您确定避免嵌套的 SELECT 语句并找到语句的正确结尾。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-11T02:08:32.757

您需要使用分号分隔符。从技术上讲，没有它，一条 SQL 语句是完全无效的；任何忽略它的人都在编写格式错误的 SQL。要求分号以标准化的方式解决了您的所有问题，并使软件易于编写。

也许执行以下操作：如果用户输入的查询*不*包含一个或多个分号（当然，在引号之外），则在末尾添加一个分号并将其作为单个查询运行。否则，将输入的查询拆分为分号并单独运行每个查询，如果省略，可能会在最终查询的末尾添加一个分号。

该解决方案易于编写，符合 SQL 标准，并且可以正常工作。不需要分隔符是通往疯狂的必经之路。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-11T02:21:58.123

我想你可以自己解析它。查找关键字 SELECT、DELETE、UPDATE、INSERT、EXEC 等。

解析时，如果遇到“（”，则增加一个计数器：nest_level++

如果遇到“)”递减nest_level--

然后，当您遇到一个关键字并且nest_level == 0 时，您就进入了下一条语句。

您还必须处理诸如

```
 INSERT ...
 SELECT .... 
```

因此，对于 INSERT，您必须查找 SELECT 或 VALUES ...

毫无疑问，还有其他情况。

同意 kquinn 你应该只需要分号。我不认为这有什么“不酷”的。

# objective-c - 用 CGImageMaskCreate 创建蒙版是全黑的（iphone）

> ID：633051
> 
> 赞同：14
> 
> 时间：2009-03-11T01:57:46.043
> 
> 标签：objective-c, iphone, cocoa-touch, core-graphics, image-manipulation

我正在尝试从两个现有图像的合成中创建一个图像蒙版。

首先，我开始创建由一个小图像组成的合成，它是掩蔽图像，以及一个与背景大小相同的较大图像：

```
UIImage *baseTextureImage = [UIImage imageNamed:@"background.png"];
UIImage *maskImage = [UIImage imageNamed:@"my_mask.jpg"];
UIImage *shapesBase = [UIImage imageNamed:@"largerimage.jpg"];
UIImage *maskImageFull;

CGSize finalSize = CGSizeMake(480.0, 320.0);
UIGraphicsBeginImageContext(finalSize);
[shapesBase drawInRect:CGRectMake(0, 0, 480, 320)];
[maskImage drawInRect:CGRectMake(150, 50, 250, 250)];
maskImageFull = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我可以输出这个 UIImage (MaskImageFull)，它看起来不错。这是一个全尺寸的背景尺寸，它有一个白色的背景，我的蒙版对象是黑色的，在屏幕上的正确位置。

然后我通过这个传递 MaskImageFull UIImage：

```
CGImageRef maskRef = [maskImage CGImage];
CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
    CGImageGetHeight(maskRef),
    CGImageGetBitsPerComponent(maskRef),
    CGImageGetBitsPerPixel(maskRef),
    CGImageGetBytesPerRow(maskRef),
    CGImageGetDataProvider(maskRef), NULL, false);

CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);
UIImage *retImage= [UIImage imageWithCGImage:masked]; 
```

问题是 retImage 是全黑的。如果我发送一个预制的 UIImage 作为掩码，它工作正常，只是当我尝试从多个图像中制作它时它会中断。

我认为这是一个色彩空间的事情，但似乎无法修复它。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-11T11:25:22.293

我用 CGImageCreateWithMask 尝试了同样的事情，得到了同样的结果。我找到的解决方案是改用 CGContextClipToMask：

```
CGContextRef mainViewContentContext;
CGColorSpaceRef colorSpace;

colorSpace = CGColorSpaceCreateDeviceRGB();

// create a bitmap graphics context the size of the image
mainViewContentContext = CGBitmapContextCreate (NULL, targetSize.width, targetSize.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

// free the rgb colorspace
CGColorSpaceRelease(colorSpace);    

if (mainViewContentContext==NULL)
    return NULL;

CGImageRef maskImage = [[UIImage imageNamed:@"mask.png"] CGImage];
CGContextClipToMask(mainViewContentContext, CGRectMake(0, 0, targetSize.width, targetSize.height), maskImage);
CGContextDrawImage(mainViewContentContext, CGRectMake(thumbnailPoint.x, thumbnailPoint.y, scaledWidth, scaledHeight), self.CGImage);

// Create CGImageRef of the main view bitmap content, and then
// release that bitmap context
CGImageRef mainViewContentBitmapContext = CGBitmapContextCreateImage(mainViewContentContext);
CGContextRelease(mainViewContentContext);

// convert the finished resized image to a UIImage 
UIImage *theImage = [UIImage imageWithCGImage:mainViewContentBitmapContext];
// image is retained by the property setting above, so we can 
// release the original
CGImageRelease(mainViewContentBitmapContext);

// return the image
return theImage; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-05-18T11:40:58.430

```
- (UIImage *) maskImage:(UIImage *)image {

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    UIImage *maskImage = [UIImage imageNamed:@"MaskFinal.png"];
    CGImageRef maskImageRef = [maskImage CGImage];

    // create a bitmap graphics context the size of the image
    CGContextRef mainViewContentContext = CGBitmapContextCreate (NULL, maskImage.size.width, maskImage.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

    if (mainViewContentContext==NULL)
        return NULL;

    CGFloat ratio = 0;

    ratio = maskImage.size.width/ image.size.width;

    if(ratio * image.size.height < maskImage.size.height) {
        ratio = maskImage.size.height/ image.size.height;
    } 

    CGRect rect1 = {{0, 0}, {maskImage.size.width, maskImage.size.height}};
    CGRect rect2 = {{-((image.size.width*ratio)-maskImage.size.width)/2 , -((image.size.height*ratio)-maskImage.size.height)/2}, {image.size.width*ratio, image.size.height*ratio}};

    CGContextClipToMask(mainViewContentContext, rect1, maskImageRef);
    CGContextDrawImage(mainViewContentContext, rect2, image.CGImage);

    // Create CGImageRef of the main view bitmap content, and then
    // release that bitmap context
    CGImageRef newImage = CGBitmapContextCreateImage(mainViewContentContext);
    CGContextRelease(mainViewContentContext);

    UIImage *theImage = [UIImage imageWithCGImage:newImage];

    CGImageRelease(newImage);

    // return the image
    return theImage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-26T15:01:58.907

要遮罩的图像必须使用 Alpha 通道创建。Alpha 通道可能不是从代码创建的。

# css - CSS 角图像/半径

> ID：633052
> 
> 赞同：1
> 
> 时间：2009-03-11T01:58:32.670
> 
> 标签：css

我用了这个角样式：

```
.corners4{
    background:url(../img/panelHeaderColor.jpg) repeat-x;
    -moz-border-radius-topleft: 5px; -webkit-border-top-left-radius: 5px;
    -moz-border-radius-topright: 5px; -webkit-border-top-right-radius: 5px; 
    -moz-border-radius-bottomleft: 5px; -webkit-border-bottom-left-radius: 5px; 
    -moz-border-radius-bottomright: 5px; -webkit-border-bottom-right-radius: 5px; 
} 
```

但是，这在 IE 中不起作用，是否有任何 IE 等效于此？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T02:07:43.180

如果您删除属性的 -moz- 部分，您将拥有border-radius-topleft 等。这些是[边界半径](http://www.w3.org/TR/2002/WD-css3-border-20021107/#the-border-radius)属性。这些仅在 CSS3 标准中。以 IE 目前的记录来看，CSS3 应该会在 2017 年左右的某个时候得到支持。如果你想让它在 Safari 中工作，你可以使用 -webkit-border-radius。有关圆角的更多信息，请参阅[此问题。](https://stackoverflow.com/questions/262616/how-to-use-only-css-to-round-my-div-tag-areas-corners)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T02:01:31.603

-moz- 部分代表“Mozilla”——IE 不支持此属性。

没有适用于所有浏览器的 CSS 唯一等效项。至少现在还没有。

用 javascript 实现弯角是一个严重的问题，而且大多数解决方案都不是很健壮。不幸的是，以所有用户都能享受的方式实现这一目标的绝对最佳方法是使用自己的图像作为角落的老式方法。[这个网站](http://www.roundedcornr.com/)至少使这个过程更容易。如果您想尝试 JS 解决方案，我听说过关于[curvyCorners](http://www.curvycorners.net/downloads.php)的好消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T02:06:48.160

IE 似乎很多时候都很难处理圆角。总而言之，你会发现它的支持不是很好，还有很多用户回到IE5.5左右。我会推荐一种不同的方法。

虽然我不记得确切是在哪里学到的，但我可以给你我网站上的代码。

元素之前的 HTML 代码：

```
<b class="b1"></b><b class="b2"></b><b class="b3"></b><b class="b4"></b> 
```

元素之后的 HTML 代码

```
<b class="b4"></b><b class="b3"></b><b class="b2"></b><b class="b1"></b> 
```

CSS 代码：

```
.b1, .b2, .b3, .b4{font-size:1px; overflow:hidden; display:block;}
.b1 {height:1px; background: #000; margin:0 4px;}
.b2 {height:1px; background: #fff; border-right:2px solid #000; border-left:2px solid #000; margin:0 2px;}
.b3 {height:1px; background: #fff; border-right:1px solid #000; border-left:1px solid #000; margin:0 1px;}
.b4 {height:2px; background: #fff; border-right:1px solid #000; border-left:1px solid #000; margin:0 0px;} 
```

上面的 CSS 代码，#000 将是你的边框颜色。#FFF 将成为内容框的颜色。

您将希望内容块上没有顶部和底部边框，然后将左右边框设置为 1px，然后设置您想要的边框颜色。

根据您当前的实现，这可能看起来不太好看，您可以随意添加更多 b 标签，应用相同的逻辑来获得更大的半径。如果您想要更大的半径并且无法弄清楚，请告诉我，我会将其扩展为更大。

最后一点，根据您放置这些的位置，您可能需要稍微调整边距设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-06-01T18:48:55.343

检查此站点：[http](http://border-radius.com/) : //border-radius.com/ 它为 WebKit、Gecko、CSS3 生成 css。例子：

```
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-07T13:34:46.047

IE的圆角半径问题将解决。

[http://kbala.com/ie-9-supports-corner-radius/](http://kbala.com/ie-9-supports-corner-radius/)

# unit-testing - 单元测试 - 定义

> ID：633053
> 
> 赞同：5
> 
> 时间：2009-03-11T01:58:42.047
> 
> 标签：unit-testing, architecture, definition

就像其他任何事情一样，理解这些单词会使学习语言变得更加容易。任何人都可以用他们的定义（例如 Mock、Fixture 等）加入单元测试中使用的所有单词吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T02:10:31.037

这看起来像一个很棒的页面：http: [//xunitpatterns.com/Glossary.html](http://xunitpatterns.com/Glossary.html)

这包括：

*   苏特
*   同步测试
*   任务
*   TDD
*   测试自动化
*   测试用例
*   测试代码
*   测试条件
*   测试上下文
*   测试数据库
*   测试债务
*   试驾
*   试驾
*   测试错误
*   测试失败
*   测试夹具
*   测试夹具
*   测试夹具
*   测试维护者
*   测试包
*   测试阅读器
*   测试结果
*   测试运行
*   测试气味
*   测试剥离器
*   测试成功
*   测试套件
*   测试驱动的错误修复
*   测试驱动开发
*   测试优先开发
*   测试最后的开发
*   特定于测试的相等性
*   测试

关于模拟等，这可能很有用：

此表及其参考可能更有用：

[http://xunitpatterns.com/Mocks,%20Fakes,%20Stubs%20and%20Dummies.html](http://xunitpatterns.com/Mocks,%20Fakes,%20Stubs%20and%20Dummies.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T02:00:30.513

也许这些文章会更有帮助：

[**维基百科：**](http://en.wikipedia.org/wiki/Unit_test)

> 在计算机编程中，单元测试是一种软件设计和开发方法，程序员可以通过这种方法确信各个源代码单元适合使用。单元是应用程序的最小可测试部分。在过程编程中，一个单元可以是一个单独的程序、函数、过程等，而在面向对象编程中，最小的单元是一个方法，它可能属于基类/超类、抽象类或派生/子类。
> 
> 单元测试可以通过在调试器中单步执行代码这样简单的方式来完成；现代应用程序包括使用测试框架，例如 xUnit。
> 
> 理想情况下，每个测试用例都独立于其他测试用例；双对象，如存根、模拟或假对象[1](http://en.wikipedia.org/wiki/Unit_test)以及测试工具可用于帮助单独测试模块。单元测试通常由软件开发人员完成，以确保其他开发人员编写的代码满足软件要求并按照开发人员的预期运行。

[**MSDN：**](http://msdn.microsoft.com/en-us/library/aa292197(VS.71).aspx)

> 单元测试的主要目标是获取应用程序中最小的可测试软件，将其与代码的其余部分隔离开来，并确定它的行为是否完全符合您的预期。每个单元在集成到模块之前单独测试，以测试模块之间的接口。单元测试已经证明了它的价值，因为在它的使用过程中发现了很大比例的缺陷。

[**极限规则：**](http://www.extremeprogramming.org/rules/unittests.html)

> 单元测试支持集体代码所有权。当您创建单元测试时，您可以保护您的功能不被意外损坏。要求所有代码在发布之前通过所有单元测试可确保所有功能始终有效。如果所有类都由单元测试保护，则不需要代码所有权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T02:05:18.553

我还找到了一个[测试术语表](http://www.aptest.com/glossary.html#M)，但它没有定义 Mock 或 Fixture，但可以选择添加新术语。一旦问题得到您满意的回答，也许这可能成为规范的来源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T02:18:45.277

### 嘲笑，

*n.*

1.  一种乌龟，主要用于汤。
2.  单元测试中使用的代码结构，以#1 命名。对于被测试的代码来说，一个 mock 看起来就像是真实的东西，但是任何与之交互的尝试只会导致悲伤的歌曲。

*五。*

1.  构建一个用于测试的模拟。

# vb.net - VB.net 无法让输出出现在我的列表框中。初学者问题

> ID：633056
> 
> 赞同：0
> 
> 时间：2009-03-11T02:00:12.527
> 
> 标签：vb.net, average

试图让用户在 3 个文本框中输入 3 个数字并获得平均值。

```
Private Sub btnAverage_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAverage.Click

  Dim a As Integer = CInt(txtone.Text)        
  Dim b As Integer = CInt(txtTwo.Text)
  Dim c As Integer = CInt(txtThree.Text)
  Dim average As Integer   
  average = (a + b + c) / 3

  lstOutput.Text = average

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T02:04:05.327

尝试将平均值类型从 Integer 更改为 Double

```
Dim average as Double 
```

现在你正试图将平均值存储在一个只能容纳整数的整数中。平均值往往是非整数，需要一种可以表示它的数据类型。双倍适用于大多数情况。那应该可以解决您的问题。

**EDIT** OP 提到 lstOutput 是一个 ListBox

这是 WinForms 令人困惑的事情之一。尽管每个控件都有一个 Text 属性，但并不是所有控件都实际执行任何操作。它们仅适用于直接显示单个文本块或值的元素。防爆按钮、标签等...

另一方面，ListBox 显示一组项目。您想将新项目添加到列表中。

```
lstOutput.Items.Add(average.ToString()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T02:21:54.673

列表框的 Text 属性将获取或设置**选定项**。您尚未将平均值添加到列表框中。

尝试：

`lstOutput.Items.Add(average)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T02:11:51.937

您确定 txtOne.text txtTwo.text 和 txtThree.txt 将始终是整数值吗？

您可能还需要将 a、b、c 变量更改为 Doubles 并检查用户是否提供了非数字值。

如果用户在 txtOne 文本框中输入“one”，您将得到一个异常 kablowee。

（此处为空气编码）

```
 dim a as new double
   try
       if isnumeric(txtOne.text.tostring.trim) then
          a = cdbl(txtOne.text.tostring.trim)
       end if

    'repeat for b and c ...

    catch ex as exception
       messagebox.show(ex.message.tostring)
    end try 
```

而且，我不确定我是否正确，（也许有人会启发我）但是.NET在这两种情况下是否考虑从字符串到int的类型转换不同

```
a  = cint(txtOne.text) 
```

和

```
a = cint(txtOne.text.tostring) 
```

？？？

# c# - 在 Mvc.Controller 中使用服务器

> ID：633059
> 
> 赞同：3
> 
> 时间：2009-03-11T02:00:57.033
> 
> 标签：c#, asp.net-mvc, controller

我有自己的继承`App.Controller`，`Mvc.Controller`然后我的所有控制器都继承自。我使用接口编写了一个提供程序并将其实现为`MyService`，并且构造函数采用其`Server`属性`Mvc.Controller`为`HttpServerUtilityBase`.

`MyService`但是，我在`App.Controller`的构造函数中实例化。问题是`Server`Controller的属性是`null`在构造时`MyService`。我曾经`public Controller () : base() { }`得到要建造的基地。然而，`Server`依然`null`。

如果可能的话，我想避免`Web.HttpContext.Current.Server`。

有没有人解决这个问题？

**编辑：**嗯，我已经实现了 tvanfosson 的建议，当我的应用程序`MyService`在属性`get`方法中构造时，`Server`仍然为空。

**编辑2：**没关系，我是个傻瓜。我也有另一个`Controller`使用`Server`，但没有改变。结案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-11T02:22:27.670

使用延迟初始化来构建您的服务。

```
private MyService service;
public MyService Service
{
    get
    {
         if (this.service == null)
         {
             this.service = new MyService(this.Server);
         }
         return this.service;
    }
} 
```

然后，您的服务实际上并没有被实例化，直到它在控制器操作中使用并且到那时 Server 属性已经设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T02:10:09.727

> `MyService`我在`App.Controller`的构造函数中实例化。

有你的问题。您需要将`MyService`已经构建的实例传递到您`App.Controller`的构造函数中。查看控制反转/依赖注入模式，并查看一些使这些模式变得简单的库（[请参阅此列表](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T02:30:01.240

为什么需要服务器参考？你在做 url/html 编码之类的东西吗？如果是这样，您可以改用[HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)并完全摆脱上下文引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T09:27:17.197

这是一个非常古老的问题，但主题仍然相关。因此，2017 年的一个提示可能在 2009 年不可用：

确实在`Controller`构造函数`Server`中为空。但是您可以使用该`OnActionExecuting`事件：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext) 
{
    base.OnActionExecuting(filterContext);

    CurrentServer = Server; // CurrentServer is some instance variable I need later.
} 
```

这对我来说很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T23:15:18.253

根据[这个网站](https://www.visionfriendly.com/blog/mvc-the-server-object-is-null-in-the-controllers-constructor/)，如果你有这个控制器：

```
public class MyController : Controller
{
  private string folderPath;

  public MyController()
  {       
    // Throws an error because Server is null
    folderPath = Server.MapPath("~/uploads"); 

    // Throws an error because this.ControllerContext is null
    folderPath = this.ControllerContext.HttpContext.Server.MapPath("~/uploads"); 
  }
} 
```

然后你想用这种方式初始化它：

```
protected override void Initialize(System.Web.Routing.RequestContext requestContext)
{
  base.Initialize(requestContext);

  // now Server has been initialized
  folderPath = Server.MapPath("~/uploads"); 
} 
```

# lucene - 删除和更新 Lucene 索引中的文档

> ID：633070
> 
> 赞同：4
> 
> 时间：2009-03-11T02:05:45.570
> 
> 标签：lucene, lucene.net

我正在使用`Lucene.Net.dll`2.0.0.4 版。

看起来它的`IndexWriter`类没有`DeleteDocument`or的方法`UpdateDocument`。我在这里错过了什么吗？如何在这个版本的 Lucene.Net 中实现删除、更新功能？

2.1 版 Lucene.dll 似乎支持删除和更新文档：

```
public virtual void DeleteDocuments(Term term);
public virtual void UpdateDocument(Term term, Document doc); 
```

[这里](https://svn.apache.org/repos/asf/incubator/lucene.net/tags/Lucene.Net_2_1_0/)是 2.1 版的源代码，但我必须一个一个地下载所有文件，然后从中构建一个 DLL 。

我可以`Lucene.dll`从某个网站下载最新的和荧光笔吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-15T04:40:30.483

我在这里记录了我如何更新 Lucene.NET 文档： [https ://web.archive.org/web/20090516051530/http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search -在-ASPNET-使用-LuceneNET.aspx](https://web.archive.org/web/20090516051530/http://www.ifdefined.com/blog/post/2009/02/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T06:40:23.167

在旧版本的 Lucene 中，只能使用[IndexReader 来](https://www.google.com/search?q=lucene+indexreader)删除文档。要更新文档，只需删除旧版本并添加新版本即可。

我不知道dll下载，对不起。

# asp.net - asp.net 应用程序继续运行时浏览器超时

> ID：633075
> 
> 赞同：5
> 
> 时间：2009-03-11T02:08:09.670
> 
> 标签：asp.net, timeout

我遇到的情况是 ASP.NET 需要很长时间才能通过网页生成回复（超过 2 小时）。这是由于代码隐藏运行了一段时间（很长，很慢的循环）。

浏览器（IE 和 Firefox）停止等待回复（大约一个小时后）并给出通用的无法显示网页错误（类似于您尝试导航到不存在的服务器时看到的内容）。

同时 asp.net 应用程序继续运行（我可以在调试器中看到它）并最终完成。

为什么会这样？web.config 中是否有任何设置可以影响这一点？我希望有一个我错过的超时设置导致了这种情况。

也许是 IE 或 Firefox 中的设置？但我认为他们在服务器保持连接时等待。

即使我在本地机器上从 VS 以调试模式（编译 debug="true"）启动应用程序时，我也会遇到这种情况（因此它不是在 IIS 上运行，而是在 ASP.NET 开发服务器上运行）。

我知道生成页面需要这么长时间是不好的，但在这个阶段并不重要。加快速度将需要大量额外的工作，而延迟并不重要。这是内部使用的。

我意识到我可以围绕这个问题重新设计将逻辑运行到后台进程并在通过 AJAX 完成时收到通知，或者将其拉到桌面应用程序或服务或其他任何东西。最终会按照这些思路做一些事情，但这不是我现在要问的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-11T02:20:59.670

听起来您正在使用 IE，并且在等待服务器响应时超时。

您可以找到一篇 technet 文章来调整此限制：

[http://support.microsoft.com/kb/181050](http://support.microsoft.com/kb/181050)

> ### 原因
> 
> 根据设计，Internet Explorer 对服务器返回数据施加了超时限制。4.0 和 4.01 版的超时限制为 5 分钟，5.x、6 和 7 版的超时限制为 60 分钟。因此，Internet Explorer 不会无休止地等待服务器返回数据时服务器已一个问题。回到顶部
> 
> ### 解析度
> 
> 一般来说，如果一个页面在几分钟内没有返回，许多用户会认为出现问题并停止该过程。因此，将您的服务器进程设计为在 5 分钟内返回数据，这样用户就不必等待很长时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-11T02:17:56.323

Web 的整个范例是请求/响应。不请求，等待两个小时，响应！

如果工作需要很长时间才能完成，那么让页面请求触发工作，然后不要等待它。将长时间运行的代码放入 Windows 服务中，并让该服务侦听 MSMQ 队列（或将 WCF 与 MSMQ 端点一起使用）。让页面向此队列发送工作请求。该服务将读取一个请求，可能会启动一个新线程来处理它，然后将响应写入另一个队列、文件或其他任何东西。

同一页面或不同的“进度”页面可以轮询响应队列或文件以获取响应，并更新用户，假设用户在两小时后仍然关心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-11T02:17:31.567

对于需要这么长时间的事情，我会想办法通过 AJAX 启动它，然后定期检查它的状态。后台进程应该定期更新一些状态变量，并在完成时将其数据存储在缓存或会话中。当它完成并且浏览器检测到这一点（通过 AJAX）时，让浏览器进行真正的回发（或通过更改 location.href 获取），获取保存的数据并生成页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-08T14:25:28.437

我有一个可能需要几分钟的过程，所以我分拆一个单独的线程并通过 ftp 发送结果。如果过程中发生错误，我会向自己发送一条错误消息，其中包括堆栈跟踪。您可能需要考虑通过电子邮件或其他地方而不是浏览器发送结果，并使用线程。

# vhdl - 如何为我的作业添加这些 STD_LOGIC_VECTOR？

> ID：633081
> 
> 赞同：0
> 
> 时间：2009-03-11T02:10:04.610
> 
> 标签：vhdl

在调试了我的代码之后，我已经到了编译器接受它的地步，但是它抛出了一个模拟器异常。

我遇到的主要问题是初始化临时数组并在最后添加向量。

用于添加的方法是我在参考中找到的一种，因为您无法添加 STD_LOGIC_VECTORs

谢谢，布兹基

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_arith.all;
use ieee.numeric_std.all;

entity signedmult is 
port (cand, lier: in std_logic_vector (4 downto 0);
    pro: out std_logic_vector (9 downto 0)); 

end signedmult;     

architecture synth of signedmult is
      --temp arrays
      signal a,b,c,d,e: std_logic_vector(9 downto 0); 

begin
process (a,b,c,d,e)
        variable j:integer;
begin

for j in 0 to 9 loop
a(j) <= '0';
b(j) <= '0';
c(j) <= '0';
d(j) <= '0';
e(j) <= '0';

end loop;

end process;

process (cand, lier,a,b,c,d,e)      
        variable i:integer;     
begin
    for i in 0 to 4 loop
     a(i) <= cand(0) and lier(i);
     b(i+1) <= cand(1) and lier(i);
        c(i+2) <= cand(2) and lier(i);
        d(i+3) <= cand(3) and lier(i);
        e(i+4) <= cand(4) and lier(i);
    end loop;

end process;

  a(5) <= a(4); a(6) <= a(4); a(7) <= a(4); a(8) <= a(4);

  b(6) <= b(5); b(7) <= b(5); b(8) <= b(5);

  c(7) <= c(6); c(8) <= c(6);

  d(8) <= d(7);

  pro <= std_logic_vector(unsigned(a) + unsigned(b)); -- + c + d + e;

end synth; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T20:01:21.383

首先，您应该删除`std_logic_arith`以避免与`numeric_std`.

完成后，我不明白为什么您的添加不起作用。

运行时遇到什么错误？

此外，您从多个进程驱动信号，可能会在`a`和`b`. 这是导致错误的原因吗？尝试将所有分配给您的临时数组放入一个进程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-30T18:38:08.283

快速，简单的方法：

```
a(9 downto 0) <= (others=>'0');
b(9 downto 0) <= (others=>'0'); 
```

# python - 在 Mac 上检测全屏

> ID：633086
> 
> 赞同：2
> 
> 时间：2009-03-11T02:11:41.063
> 
> 标签：python, objective-c, cocoa, macos, fullscreen

我正在为 Mac 编写一个 IM 客户端（在 Python 中，但这里的 Objective C / Cocoa 解决方案很好）。我想检测用户当前是否正在看电影或在前台玩游戏，或者做任何其他占用整个屏幕的事情。如果是这样，当新的 IM 进来时我不会播放声音，但如果不是，我会播放声音。

我怎样才能检测到这个？有没有办法用 Applescript 获取前景窗口并查看它的尺寸？还是有其他 API 调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-11T02:48:50.930

要检查全屏，请在每个屏幕上调用[CGDisplayIsCaptured(screenID) 。](http://developer.apple.com/DOCUMENTATION/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayIsCaptured)

但我不确定你是否在检查正确的事情。一方面，我可以捕获一个屏幕（“全屏”）和未捕获的第二个屏幕，在这种情况下你想做什么？

另外，全屏真的意味着什么吗？如果我使用 GarageBand 创作歌曲，我可能不想听到随机声音，无论是否全屏。或者我可能正在全屏运行 Windows VM，但仍希望收到有关 IM 的通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T02:46:00.280

不完全确定如何做到这一点，但[苹果文档](http://developer.apple.com/documentation/Carbon/Reference/Dock_Manager/Reference/reference.html#//apple_ref/c/func/GetSystemUIMode)说：

> 要跟踪登录会话的演示模式的变化，您可以处理 `kEventAppSystemUIModeChanged`Carbon 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T08:19:39.980

到目前为止发布的两种解决方案都适用于“真正的”全屏，但值得注意的是，许多全屏应用只是在整个屏幕上放置了一个窗口（或者，正如 vasi 指出的那样，*整个*屏幕）。为了准确起见，您必须同时检查两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:23:56.953

在 Mountain Lion（可能更早）中，您可以通过监视分布式通知 com.apple.HIToolbox.hideMenuBarShown 和 com.apple.HIToolbox.hideMenuBarShown 来跟踪菜单栏的存在。通常没有菜单栏==全屏模式。这适用于应用程序，因此您可以知道 VLC 何时进入全屏模式，或者何时有人以全屏模式切换到 iCal。

为此，请注册以下两个通知：

```
[[NSDistributedNotificationCenter defaultCenter] addObserver:self
        selector:@selector(windowDidEnterFullScreen:)
        name:@"com.apple.HIToolbox.hideMenuBarShown"
        object:nil];

[[NSDistributedNotificationCenter defaultCenter] addObserver:self
       selector:@selector(windowDidExitFullScreen:)
       name:@"com.apple.HIToolbox.frontMenuBarShown"
       object:nil]; 
```

然后创建自己的选择器来处理这些情况。frontMenuBarShown 一直触发，所以要从全屏中捕捉到真正的返回，请注意“didEnter”之后的第一个“didExit”...

# wcf - 影响客户端的 WCF 合同更改

> ID：633090
> 
> 赞同：9
> 
> 时间：2009-03-11T02:13:46.253
> 
> 标签：wcf, datacontract, servicecontract, operationcontract

我很好奇是否有人可以概述服务器端哪些类型的 WCF 合同（接口）更改会破坏客户端尝试发送消息，以及为什么。我相信 WCF 可以处理某些差异，但我不确定您可以安全地更改哪些内容，以及您不能安全更改哪些内容。

*   从 OperationContract 添加/删除参数？
*   添加/删除/更改 DataContract 的序列化属性？
*   从 ServiceContract 添加/删除 OperationContracts？

有朋友在这里问过类似的问题：

[向 WCF ServiceContract 添加方法会破坏现有客户端吗？](https://stackoverflow.com/questions/631935/does-adding-a-method-to-a-wcf-servicecontract-break-existing-clients)

编辑：正如 John Saunders 所指出的，更改合同通常不是一个好主意，但有些内置的东西允许一些版本容差（ExtensionDataObject 等？）。我只想知道版本容差有多灵活。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-11T02:31:51.220

查看 dasBlonde 上的这篇文章：[版本化 WCF 服务合同](http://web.archive.org/web/20100706022825/http://www.dasblonde.net/2006/01/05/VersioningWCFServiceContracts.aspx)

它列出了哪些更改会破坏现有客户端：

1.  删除操作
2.  更改操作名称
3.  移除操作参数
4.  添加操作参数
5.  更改操作参数名称或数据类型
6.  更改操作的返回值类型
7.  通过显式使用 .NET 属性或自定义序列化代码更改参数类型（数据协定）或操作（消息协定）的序列化 XML 格式
8.  修改服务操作编码格式（RPC Encoding vs. Document Literal）

[Michele 的这篇文章](http://searchwindevelopment.techtarget.com/tip/Designing-Windows-Communication-Foundation-service-contracts)更详细地解释了如何设计更灵活的合约。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T09:05:44.843

**合同设计建议**

1.  *第一个版本*

    1.1。仔细选择所有合约的名称（接口、方法、类和属性）。这些在未来的版本中将很难改变。

    1.2\. 请记住，将来无法更改以下内容：方法参数的数量；参数类型/返回值/不受您控制的类型的属性。

2.  *下一个版本*

    2.1。如果已经存在，请勿更改任何 xxxContractAttribute 上的 Namespace 或 Name 参数。

    2.2\. 如果已存在，请勿更改 DataMemberAttribute 的 Order 属性。

    2.3\. 只允许以下更改：

    *   将方法 (OperationContract) 添加到接口 (ServiceContract)

    *   重命名接口上的方法

    *   重命名类 (DataContract)

    *   将属性 (DataMember) 添加到类 (DataContract)

    *   重命名类的属性

    2.4\. 任何删除都会破坏兼容性。

    2.5\. 任何其他更改都会破坏兼容性。

以下是一些有用的链接：

*   [WCF 版本控制指南](http://wcfpro.wordpress.com/2010/12/21/wcf-versioning-guidelines-2/)
*   [服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)
*   [最佳实践：数据合同版本控制](http://msdn.microsoft.com/en-us/library/ms733832.aspx)
*   [数据协定中的集合类型](http://msdn.microsoft.com/en-us/library/aa347850.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-23T14:04:54.597

WCF 中的“从 OperationContract 添加/删除参数”并不总是会破坏您的客户端，但您必须知道自己在做什么。特别是，向操作合约添加新参数将导致旧客户端不传递它们，并且在服务端将使用它们的默认值设置它们。此外，从操作合约中删除参数，从客户端的角度来看是无声的，并且在服务端将被简单地忽略。当然，更改参数的名称/类型会导致客户端中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-16T13:28:27.153

好的。问题。由于命名语法错误（参数用大写字母指定），我想调整一些代码：

```
[OperationContract]
public void Foo(string Bar){} 
```

到

```
[OperationContract]
public void Foo(string bar){} 
```

会调整资本违约合同吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-11T02:20:19.763

我认为最好的做法是将合同视为牢不可破的，嗯，*合同*。发布后不要更改它们。使用您想要的更改创建新合同并在新端点上公开新合同很容易。

# c# - c# 转换为 PHP 数组键

> ID：633091
> 
> 赞同：1
> 
> 时间：2009-03-11T02:14:06.613
> 
> 标签：c#, php, web-services, magento

我正在尝试从 C# 调用 PHP Magento 存储 Web 服务。

如何在 C# 中创建这种类型的“ARRAY KEY”以传递给 PHP：

```
call( 
    $sessionId, 
    'product_stock.update', 
    array('Sku', array('qty'=>50, 'is_in_stock'=>1))
); 
```

这是一个链接到magento wiki的调用： http:
[//www.magentocommerce.com/wiki/doc/webservices-api/api/cataloginventory_stock_item#cataloginventory_stock_item.update](http://www.magentocommerce.com/wiki/doc/webservices-api/api/cataloginventory_stock_item#cataloginventory_stock_item.update)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-16T23:29:58.950

我们在 C# 中使用 API 花了很长时间，主要是因为缺乏示例。最终，我们弄清楚了这一切，并为 .net 构建了一个完整的对象库，其中包括 API 的所有对象和方法。它还包括每个对象和方法的示例。

我们在 MIT X11 许可下发布了我们的库，您可以在此处阅读更多信息并下载源代码：

[Magento 的 XML-RPC API 的 .NET C# 对象库](http://www.ez-llc.com/studio/site/eznewsletter/blog/post.aspx?id=3cbfd3ca-bbc4-453e-93a8-f7fb14ba30db)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T05:02:55.850

它比你想象的要简单一些。

这个函数：$proxy->call($sessionId, 'product_stock.update', array('Sku', array('qty'=>50, 'is_in_stock'=>1)));

使用以下文档中指定的格式传递**XML ：**

[http://www.w3.org/TR/soap11/](http://www.w3.org/TR/soap11/)

[http://www.w3.org/TR/soap12/](http://www.w3.org/TR/soap12/)

[http://www.w3.org/TR/wsdl/](http://www.w3.org/TR/wsdl/)

XML 的格式很可能看起来像：

<xml> <element>Sku</element> <element>...</element> </xml>

所以把这些奇怪的数组当作 XML 的数据源

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-29T05:26:41.123

我已经使用soap（产品创建）非常努力地使用magento api，但我无法让它与开箱即用的XMLRPC或SOAP一起工作。

我所做的是使用 XAMPP 设置一个基本的 Product.Create 调用使用 PHP 并得到它来保存信封。

然后我将这个信封放入 .NET 并使用 XML/HTTP Post 重新创建它。

我找不到任何通用对象可以让我创建像 PHP 关联数组这样的结构。唯一可能代表它的是旧哈希表，其中一些子键包含哈希表作为树结构中的值。

# user-input - 在 TextBox Live 中解释用户输入的方法 - 类似于 SO 上的 WMD 预览

> ID：633095
> 
> 赞同：0
> 
> 时间：2009-03-11T02:15:41.337
> 
> 标签：user-input, interpreter, live

我正在寻找一种在用户输入时解释用户输入的方法（并最终根据他们的输入执行某些类型的操作）这适用于基于 Web 的应用程序。

到目前为止，我有一种方法可以在用户输入时更新标签，但我希望它可以在任何按键上更新文本。目前 Visual Studio 中的 C# 网站中的代码如下所示：

```
 protected void TextBox1_TextChanged(object sender, EventArgs e)
{
    Label1.Text = TextBox1.Text;
} 
```

每当在框中按下一个键时，最好的语言或方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-11T02:22:14.347

您将要使用 Javascript（特别是[`onkeyup`](http://www.java2s.com/Code/JavaScript/Event-onMethod/onKeyUpExample.htm)函数）。

# php - 为sql插入转义字符串的最佳方法？

> ID：633109
> 
> 赞同：5
> 
> 时间：2009-03-11T02:23:12.473
> 
> 标签：php, mysql, escaping, sql-injection, sanitization

为 sql 插入、更新转义字符串的最佳方法是什么？

我想允许特殊字符，包括 ' 和 "。在插入语句中使用它之前搜索和替换每个字符串的最佳方法是什么？

谢谢

重复：[防御mysql注入和跨站点脚本的最佳方法](https://stackoverflow.com/questions/568995/best-way-to-defend-against-mysql-injection-and-cross-site-scripting)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-11T02:42:05.330

您应该使用参数化查询（因此通过扩展，支持参数化查询的 DB 接口库），这样 SQL 注入就不会发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-11T02:26:35.333

如果您正在谈论字段的数据值，那么最好的方法是使用[mysql_real_escape_string()](http://us.php.net/mysql_real_escape_string)。（有些人喜欢[mysqli](http://us.php.net/mysqli)；不能说我喜欢。）如果您正在谈论允许用户提交的查询......好吧，希望您不是在谈论这个。

# sql - 在数据库中，如果只需要年份和月份，您会使用日期字段还是年份和月份字段？

> ID：633111
> 
> 赞同：9
> 
> 时间：2009-03-11T02:24:31.253
> 
> 标签：sql, mysql, database-design, database

我正在设置一张需要年份和月份的表格。在 MySQL 中，我相信我有 2 个选项：（1）2 个字段：1 个表示年份，1 个表示月份或（2）一个日期字段（日期始终为 1）。

这两个字段的优点是速度更快（我认为），因为 MySQL 不必将值从日期转换为整数，尽管这可能可以忽略不计。日期字段具有“自动”验证的优势：有人无法将月份为 13 或年份为 1 的数据输入数据库。使用日期字段，您还可以更轻松地进行日期计算（即，月份之间）。

你会用哪个？或者还有其他你会使用的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-11T02:29:22.223

使用日期字段。由于 sql 本身支持日期字段，因此可以使用 WHERE 子句轻松过滤特定日期。

> 这两个领域的优势是速度更快 [...]

您的 SELECT 查询不是您的瓶颈，因此您不必担心这一点。可读性和实用程序比“感知瓶颈”更重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T02:30:32.157

如果您要在日期字段上运行大量操作，那么我会将其拆分为单独的列，并在表约束或 DAL 中处理数据验证。

例如，当拆分字段时，按日、月、年构建销售报告效率更高。原因是您不必使用日期时间函数来拆分日期进行分组。

如果它像生日一样，我可能会偶尔查询一次，那么我就不会担心它，只需将它留在日期字段中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T02:30:34.780

即使您只需要年份和月份，我也会使用日期字段，通过收集所有数据不会丢失任何内容。作为标准做法，我总是尽可能收集所有数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T02:32:20.827

我会使用单独的列，主要是因为这样可以更好地使用索引。例如，如果您只关心给定月份（而不是年份）的数据，我认为日期时间列上的索引不会有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-11T02:40:01.650

尽管您不会立即使用，IBM Informix Dynamic Server 支持以下类型：

```
DATETIME YEAR TO MONTH 
```

这完全存储了您想要的 - 年份和月份。它有它的用途。DATETIME 类型系列包括许多其他类型，它们偶尔会使用 - 以及一些具有边际效用的类型，典型示例是 DATETIME MONTH TO MINUTE。（该类型的缺点是操作它所需的冗长符号，但是可以对任何或所有 DATETIME 类型执行许多操作。）

在许多 DBMS 中，您可以对列进行约束，因此如果您采用两列方法，您将`CHECK(month_column BETWEEN 1 AND 12)`在列上放置一个约束，以确保用户不会在表中放置无效值。您甚至可以对 year 列应用约束。

此外，一些 DBMS 允许您创建用户定义的类型，并且年月类型非常简单。当然，细节取决于 DBMS。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-11T02:43:37.430

除非单独存储年份和月份有特定的性能优势，否则我会坚持使用日期。关于索引，如果有两列，则需要在列组合上创建索引，而不是为日期列创建索引。日期将在内部转换为长值，因此所需的存储空间并不是真正的问题。

此外，考虑两个领域可能存在的维护问题。您将有两个数据库字段，可能是一个对象上的两个字段，或者需要从数据库构建/解析月份和年份。使用日期保持简单，让数据库跟踪您的数据完整性。

我使用您所描述的数据 - 到期日期，其中日期始终是本月的最后一天，因此我们只需要月份和年份。我们将这些存储为日期。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-11T02:43:53.500

我会保留一个日期时间列和两个带有月份和年份的计算列（当然是索引）。吃我的蛋糕，也吃：）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-11T02:59:18.640

如果您预计查询形式为“在 7 月提供所有行，无论年份如何”，使用单独的月份和年份列编写它们会更容易一些。月份列的单独索引*应该*使它变得活泼。

否则，我会选择单个日期列：简单、易于理解、内置验证和日期数学函数有效。您唯一担心的是，设计新手会想知道为什么所有事情总是发生在月初。

我遇到过使用单独的月份和年份列的另一个原因：当月份未知时。我已经将它用于允许即将发生的事件“在 2009 年的某个时候”的应用程序。在这种情况下，在月份列中使用 NULL 可以很好地解决问题。使用日期类型的列没有简单的方法可以做到这一点，除非你想出一些可怕的技巧，比如 1 月 2 日意味着这个月份是未知的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-11T04:16:26.303

这样想：有一天会有人来找你，要求增强应用程序，不仅可以保存年份和月份，还可以保存一天。然后，您会在一天中添加一个额外的列吗？然后，接下来，他们可能希望您也节省时间。

如果您有单独的年/月/日列，那么增强功能有多容易？如果您有一个日期列？

仅出于这个原因，我会选择日期列。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-11T02:31:17.070

可能不是因为 SQL Server (Microsoft) 中最小的日期时间数据类型`smalldatetime`是 4 个字节长。如果只需要月份和年份，那么月份需要 1 个字节，年份需要 2 个字节。

# actionscript-3 - RTMP 流比特率替代品

> ID：633115
> 
> 赞同：2
> 
> 时间：2009-03-11T02:28:39.837
> 
> 标签：actionscript-3, encoding, streaming, flash-media-server, rtmp

您会将哪些比特率指定为**正常**和**高**？

**快速示例：**

对于当前项目。一方面，我需要高质量的流（全屏）。当然，另一方面它也必须很快。要解决的问题是平衡它以满足最...

对于“高”选项，我会优先考虑大约 2.5-3Mbits 的现代宽带，以便能够在不滥用 CDN 带宽的情况下为拥有 > 4Mbits 宽带连接（例如在欧洲很常见）的幸运者提供几乎完美的流。

对于“正常”选项，我会优先考虑使用接近 1.2Mbits 流的较慢宽带连接。如果我低于 1Mbits，质量太差了，我宁愿使用渐进流来确保每个人都以正确的质量观看视频。

**所以这就是我对这个特殊情况的计划......有什么聪明的方法来平衡它吗？任何有趣的（来自您的 POV）用户案例？另一种观点/思维方式？有什么要考虑的吗？一般意见？等等**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-13T23:52:44.323

我会尝试正常的 512Kbps 和高的 1Mbps。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-19T13:16:16.273

你是说 RTSP 吗？在法国，我们有一家提供 RTSP 电视频道的提供商，以便您可以使用 VLC 在计算机上观看。我认为压缩是 MPEG-2，流大约是 3.5 / 4 MB

有些频道也有高清，但我没试过。请注意，人们可能有良好的连接，但如果他们使用 Wifi，它可能会变得非常松散。

你可以用谷歌搜索 RTSP + multiposte + freebox +bandwith 看看你能不能找到更多信息

编辑：我不认为协议那么重要。我猜使用 H264，您可以定位比 MPEG2 更低的速率。使用 MP4 编码器进行实时编码（1 帧延迟）我认为中等质量是在 Full-D1 视频源上以 1 Mbps 实现的。你说的高清到底是什么意思？

这个问题还不是很清楚，因为有两个方面：编码源和条件是什么，解码资源是什么。这将为您提供比特率与视觉质量的比例。

然后你就会遇到目标受众和带宽以及你需要的服务质量的问题。

你的瓶颈在哪里？

# python - 查看所有定义的变量

> ID：633127
> 
> 赞同：349
> 
> 时间：2009-03-11T02:32:55.053
> 
> 标签：python, variables

我目前正在 python shell 中进行计算。我想要的是 Matlab 样式列表，您可以在其中看到所有已定义的变量（所以我知道我使用了哪些名称、它们的值等）。

有没有办法，我该怎么做？

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2009-03-11T02:36:26.637

您可以使用的一些东西：

*   `dir()`将为您提供范围内变量的列表：
*   `globals()`会给你一个全局变量字典
*   `locals()`会给你一个局部变量字典

* * *

## 回答 #2

> 赞同：281
> 
> 时间：2009-03-11T13:48:42.497

如果可能，您可能想要使用[IPython](http://ipython.scipy.org/moin/)。

为了获取所有当前用户定义变量的列表，IPython 提供了一个名为的*魔法命令*`who`（魔法必须以`%`字符为前缀，除非`automagic`启用该功能）：

```
In [1]: foo = 'bar'
In [2]: %who
foo 
```

您可以使用`whos`魔法来获得更多细节：

```
In [3]: %whos
Variable   Type    Data/Info
----------------------------
foo        str     bar 
```

还有很多其他可用的魔法。IPython 基本上是类固醇上的 Python 解释器。一种方便的魔法是`store`，它可以让您在会话之间保存变量（使用`pickle`）。

注意：我与 IPython Dev 无关——只是一个满意的用户。

编辑：

[你可以在IPython 文档](https://ipython.readthedocs.io/en/stable/interactive/magics.html)中找到所有的魔法命令。

[这篇文章](https://www.dataquest.io/blog/jupyter-notebook-tips-tricks-shortcuts/)还有一个关于在 Jupyter Notebook 中使用魔法命令的有用部分

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2009-03-11T02:35:28.417

要获取名称：

```
for name in vars().keys():
  print(name) 
```

要获取值：

```
for value in vars().values():
  print(value) 
```

vars() 还接受一个可选参数来找出对象本身中定义了哪些变量。

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2014-06-13T17:44:15.243

正如 RedBlueThing 和模拟所说：

*   `dir()`给出范围内变量的列表
*   `globals()`给出一个全局变量字典
*   `locals()`给出一个局部变量字典

使用交互式 shell（2.6.9 版），在创建变量`a = 1`and之后`b = 2`，运行`dir()`给出

```
['__builtins__', '__doc__', '__name__', '__package__', 'a', 'b'] 
```

跑步`locals()`给

```
{'a': 1, 'b': 2, '__builtins__': <module '__builtin__' (built-in)>, '__package__': None, '__name__': '__main__', '__doc__': None} 
```

运行给出的答案与本例`globals()`完全相同。`locals()`

我还没有进入任何模块，所以所有变量都可以作为局部变量和全局变量使用。 `locals()`并`globals()`列出变量的值和名称；`dir()`只列出名字。

如果我导入一个模块并在模块内部运行`locals()`或运行`globals()`，`dir()`仍然只给出少量变量；它添加`__file__`到上面列出的变量中。`locals()`并且`globals()`还列出了相同的变量，但是在打印出字典值的过程中`__builtin__`，它列出了更多的变量：内置函数、异常和类型，例如“ `'type': <type 'type'>`”，而不仅仅是`<module '__builtin__' (built-in)>`如上所示的简要说明.

有关更多信息，`dir()`请参阅New Mexico Tech的[Python 2.7 快速参考](http://infohost.nmt.edu/tcc/help/pubs/python/web/dir-function.html)或ibiblio.org[的 dir() 函数。](http://www.ibiblio.org/g2swap/byteofpython/read/dir.html)

有关`locals()`并`globals()`查看Dive Into Python 中的[locals 和 globals以及有关](http://www.diveintopython.net/html_processing/locals_and_globals.html)[globals的页面的更多信息](http://infohost.nmt.edu/tcc/help/pubs/python/web/globals-function.html)New Mexico Tech

[评论：@Kurt：您在此处提供了[enumerate-or-list-all-variables-in-a-program-of-your-favorite-language-here 的](https://stackoverflow.com/questions/430811/enumerate-or-list-all-variables-in-a-program-of-your-favorite-language-here)链接，但该答案有误。问题是： `type(name)`在那个例子中总是会返回`<type 'str'>`. 您确实得到了一个变量列表，它回答了问题，但在它们旁边列出了不正确的类型。这在您的示例中并不明显，因为所有变量都恰好是字符串；但是，它返回的是变量名称的类型，而不是变量的类型。要解决这个问题：而不是`print type(name)`使用`print eval('type(' + name + ')')`. 我很抱歉在答案部分发表评论，但我没有发表评论的权限，另一个问题已关闭。]

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2009-03-11T02:36:21.833

打印本地人（）

编辑从评论继续。

为了使它在打印时看起来更漂亮：

```
import sys, pprint
sys.displayhook = pprint.pprint
locals() 
```

这应该会给你一个更垂直的打印输出。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2009-03-11T02:37:26.790

`globals()`, `locals()`, `vars()`, 并且`dir()`都可以帮助您实现您想要的。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-11-20T10:47:41.300

更聪明一点（python 3）的方式：

```
def printvars():

   tmp = globals().copy()
   [print(k,'  :  ',v,' type:' , type(v)) for k,v in tmp.items() if not k.startswith('_') and k!='tmp' and k!='In' and k!='Out' and not hasattr(v, '__call__')] 
```

或者，如果您想输出对象的变量：

```
def printObj(Obj, OutputMax=100):

   tmp = Obj.__dict__
   [print(k,'  :  ',str(v)[:OutputMax],' type:' , type(v)) for k,v in tmp.items() if not k.startswith('_') and k!='tmp' and k!='In' and k!='Out' and not hasattr(v, '__call__')] 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2009-03-11T02:41:01.463

请记住 dir() 将返回所有当前的导入**和**变量。

如果你只想要你的变量，我会建议一个易于从 dir 中提取的命名方案，例如 varScore、varNames 等。

这样，您可以简单地执行以下操作：

```
for vars in dir():
 if vars.startswith("var"):
   print vars 
```

**编辑**

如果要列出所有变量，但排除导入的模块和变量，例如：

```
__builtins__ 
```

你可以使用这样的东西：

```
import os
import re

x = 11
imports = "os","re"

for vars in dir():
    if vars.startswith("__") == 0 and vars not in imports:
        print vars 
```

如您所见，它会显示变量“imports”，因为它是一个变量（嗯，一个元组）。一个快速的解决方法是将单词“imports”添加到导入元组本身！

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2012-12-23T04:48:11.040

这必须在交互式 shell 中定义：

```
def MyWho():
    print [v for v in globals().keys() if not v.startswith('_')] 
```

那么下面的代码可以作为例子：

```
>>> import os
>>> import sys
>>> a = 10 
>>> MyWho()
['a', 'MyWho', 'sys', 'os'] 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2014-02-18T19:02:28.770

在我的 Python 2.7 解释器中，`whos`存在于 MATLAB 中的相同命令也存在于 Python 中。它显示与 MATLAB 模拟相同的详细信息（变量名称、类型和值/数据）。

请注意，在 Python 解释器中，`whos`列出了“交互式命名空间”中的所有变量。

# css - 使用 Div 代替锚点

> ID：633129
> 
> 赞同：1
> 
> 时间：2009-03-11T02:34:10.463
> 
> 标签：css, html, hyperlink, anchor

在我的网站 www.funpunks.com 上，您会在页面左上方看到导航。我使用带有背景图像的固定大小的 div 制作了这个，并使用 javascript 重定向“window.location = ' [http://www.funpunks.com/](http://www.funpunks.com/) ' ”等。

但是对于禁用 javascript 等的用户呢？我想我需要使用锚标签。

我需要将这些锚标记显示为块，并且我需要它们具有背景图像。此外，每个不同的链接都需要有自己的高度/宽度和悬停图像。

可以使用锚标签而不是 div 来完成吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-11T02:38:21.843

为什么不仍然使用锚点，而是使用 CSS 将它们显示为块级元素？

```
a.some-class { display:block; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T02:39:33.697

肯定想在这里使用<a>。每次都使用语义标记。只需执行 style="display:block" 并设置宽度、高度、背景图像等。例如，看看我的网站之一：http: [//krystalware.com/Products/SlickUpload/](http://krystalware.com/Products/SlickUpload/)。左侧和顶部的选项卡都是 a，样式正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T02:38:11.080

一个 A 标签可以像其他所有东西一样通过 CSS 设置它的高度/宽度。

# open-source - 商业产品中是否允许使用 MS-PL（Microsoft 公共许可证）代码？

> ID：633132
> 
> 赞同：32
> 
> 时间：2009-03-11T02:35:31.490
> 
> 标签：open-source, licensing

如果有人想使用 MS-PL 许可的部分代码并将其用于商业产品，MS-PL 是否允许这样做？有什么限制。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-11T02:44:00.847

它是 Microsoft 公共许可证 (Ms-PL)。是的，你几乎可以用代码做任何你想做的事情。

[https://msdn.microsoft.com/en-us/library/ff648068.aspx](https://msdn.microsoft.com/en-us/library/ff648068.aspx)

但是，请阅读条件。值得注意的：

*   如果您分发软件的任何部分，您必须保留软件中存在的所有版权、专利、商标和归属声明。

*   **如果您以源代码形式**分发软件的任何部分，您只能在本许可下这样做，方法是在您的分发中包含本许可的完整副本。如果您以编译或目标代码的形式分发软件的任何部分，您只能在符合本许可的许可下这样做。

注意：MS-PL 似乎故意与 GPL 不兼容。

# sql - 如何以标准化方式存储联系方式（或具有不同字段的类似类型数据）？

> ID：633143
> 
> 赞同：3
> 
> 时间：2009-03-11T02:38:56.833
> 
> 标签：sql, sql-server, database, database-design, normalization

哦，我写过的每一个应用程序都遇到过这个问题。我想要一个最终的共识答案！

这是在数据库中存储联系人方法或任何其他数据的最规范/有效/正确的方式吗？

```
Contact { PK ContactId, ... }

ContactContactMethod {PK FK ContactId, PK FK ContactMethodId, Key, Comments }

AddressContactMethod {PK FK ContactMethodId, Line1, Line2, City, State, Zip }
EmailContactMethod {PK FK ContactMethodId, EmailAddress }
InstantMessengerContactMethod {PK FK ContactMethodId, IMClient, IMAddress }
PhoneContactMethod {PK FK ContactMethodId, ... }
WebsiteContactMethod {PK FK ContactMethodId, ... }
OtherContactMethod {PK FK ContactMethodId, ... } 
```

我应该考虑`ContactMethodData`在`ContactContactMethod`桌子上使用 Xml 字段吗？

AddressContactMethod、EmailContactMethod 等都具有相同的主键唯一性，这让人感觉有些不对劲。

还考虑了联系人数据的键值对，但这比 Xml 字段更难查询。

（设计指南：每个联系人可能有一个以上的每种联系方式或没有，每个联系人都有一个非唯一的“键”，如“家、工作、红色汽车等”和评论，但类型之间没有其他共享数据元素)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T03:27:27.280

和你一样，我看到的不仅仅是我的联系信息数据库设计。我认为您的做法非常合理，并且将 Key 列与 *Method 表分开放置是一个不错的选择，允许按照一种方式对“家庭”电子邮件和邮政地址进行分组。

但是，我认为大多数联系人数据库都过度架构。虽然我不同意 Chris Lively 的方法，但我认为您可以通过只拥有联系信息类型（电子邮件、电话、网址等）并为每个信息存储一个简单的文本字符串来简化。尝试验证单独的类型或将它们分解为子字段通常不值得付出努力。一方面，如果您允许美国以外的联系人，所有电话和地址验证规则都会立即失效。将完整的地址存储在 Unicode 字符串中，希望最好是我的建议。

这留下了这样的设计：

```
Contact { PK ContactId, ... }
ContactType { PK ContactTypeId, ContactType }
ContactMethod {PK FK ContactId, PK FK ContactTypeId, PK Key, Value, Comments } 
```

ContactMethod.Value 是文本值。

这似乎至少类似于谷歌跟踪联系人的方式。如果不出意外，他们可能已经考虑过跟踪来自地球上每个国家的无数联系人的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T05:25:16.060

这种模式有一个名称。它被称为“专业化泛化”。

在这种情况下，联系方法是联系联系人的特殊方式。

对“泛化专业化关系设计”的网络搜索将引导您找到一些以更一般的方式处理此模式的文章。对于相同模式的面向对象视图，请搜索“泛化专业化对象设计”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T03:22:48.710

在过去，我会使用表模式——比如：

```
Person [ID, Name]
ContactPoint [ID, PersonID, ContactMethod]
EmailContactPoint [ID, EmailAddress]
AddressContactPoint [ID, Line1, Line2, blah] 
```

在不同的接触点和 ContactPoint 表之间具有 1-1 的关系 - 一种继承。ORM 之类的 Hibernate/NHibernate 和 Entity Framework 可以根据这些 1-1 关系实例化正确的类型。

现在我可能只使用 XML blob 和 SQL 中的几个函数，以便轻松处理特定类型的默认/主要联系点（例如，“GetPrimaryPhoneNumber(personID)”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T03:23:55.570

最终一致的答案是，每个人自己的答案都是最好的，没有人的一分钱。那就是问题所在; 没有一种方法可以满足每个人的需求。因此，可能永远不会有最终的共识答案——甚至可能没有共识答案，但几乎可以肯定不是最终答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-11T03:16:28.990

大多数人真的过度建筑师的事情。这样看，您真正关心特定联系人的多少电话号码？通常为 1；有时 2。

地址也是如此，通常您真正需要的只是文件中的地址。

所以，考虑到这一点，看看你的应用程序。如果您真的只有 2 个电话号码，请将这些电话号码存储在 CONTACT 表中，如 HomePhone、WorkPhone 或其他。如果在未来某个时间点，您确定需要更多电话号码，请继续将这些号码拆分到单独的表格中。地址也一样。电子邮件也一样。

现实情况是，大多数 UI 不会在网格中显示电话号码。相反，它们被放置在与人名一致的位置。原因是您只需要几个数字。

总结一下：让数据库尽可能简单。UI 团队和您的数据库服务器将为此感谢您。

# html-generation - 自动 HTML 缓存生成工具

> ID：633145
> 
> 赞同：0
> 
> 时间：2009-03-11T02:38:59.533
> 
> 标签：html-generation

是否有任何工具可以为我当前的动态网站自动生成静态 HTML 页面。即为我的动态网站的每个唯一网址生成一个唯一的 HTML 页面。

如果我不必为此更改我的动态网站代码，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T03:28:42.003

您可以在脚本或批处理文件中使用[wget](http://www.gnu.org/software/wget/)来检索页面。无需更改代码。wget 将镜像您站点的目录结构，因此您可以按原样使用它（假设您要缓存整个站点），或者您可以只复制要缓存的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T04:51:12.257

您可以使用 Teleport Pro 抓取整个网站并将其完整副本保存在本地，以保持其结构（如果是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T06:40:11.170

您的动态网站是用什么语言编写的？例如，PHP 可以很好地与许多缓存库配合使用。我假设您的目的是减少必须输出这些动态生成但非常静态的页面的次数？

另一种方法（同样，PHP，因为您没有指定）是预先添加和附加一组可以通过 ob_buffer 处理缓存的脚本

前置伪代码：

```
if(cache exists and is not too old) {
    serve cached file
    exit();
}
start buffer 
```

附加伪代码

```
get buffer contents and save to cache file
echo buffer contents 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T02:54:39.277

在您的浏览器中，您可以执行文件->另存为。

如果你愿意接受 Internet Explorer，你可以创建一个使用 IE 组件的程序（不管你使用什么语言，但 .NET 和 VB 可以很容易地做到这一点）。让组件访问您的站点，然后通过 IE 的 API 以编程方式保存 HTML。

# asp.net - ASP.NET GridView 查询中的通配符

> ID：633149
> 
> 赞同：1
> 
> 时间：2009-03-11T02:40:24.600
> 
> 标签：asp.net, sql, gridview

我在 ASP.NET 2.0 中使用 GridView。我想根据我的搜索条件（访客姓名、护照号码、公司名称）在 GridView 中显示 3 个表（SQL2005）的详细信息。它正在工作，但我想使用通配符通过“访客姓名”的第一个字母进行搜索。我在 GridView 的 QueryBuilder 中有我的代码（使用配置数据源）。查询如下：

```
SELECT FormMaster.NameofCompany, VisitorMaster.NameofVisitor,
VisitorMaster.PassportNumber, FormMaster.FormID,  
VisitorMaster.VisitorID FROM VisitorMaster INNER JOIN VisitorDetails ON
VisitorMaster.VisitorID = VisitorDetails.VisitorID INNER JOIN FormMaster ON
VisitorDetails.FormID = FormMaster.FormID WHERE (FormMaster.FormStatusID = 1) AND
(VisitorMaster.PassportNumber = @PassportNumber ) OR
(VisitorMaster.NameofVisitor = @NameofVisitor) OR
(FormMaster.NameofCompany = @NameofCompany ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T03:04:04.700

您的查询是：

```
SELECT
  FormMaster.NameofCompany,
  VisitorMaster.NameofVisitor,
  VisitorMaster.PassportNumber,
  FormMaster.FormID,
  VisitorMaster.VisitorID
FROM
  VisitorMaster INNER JOIN VisitorDetails ON
    VisitorMaster.VisitorID = VisitorDetails.VisitorID
  INNER JOIN FormMaster ON VisitorDetails.FormID = FormMaster.FormID
WHERE
  (FormMaster.FormStatusID = 1) AND
  (VisitorMaster.PassportNumber = @PassportNumber ) OR
  (VisitorMaster.NameofVisitor = @NameofVisitor) OR
  (FormMaster.NameofCompany = @NameofCompany ) 
```

你确定它工作正常吗？当`FormMaster.FormStatusID`不等于 1 并且最后两个条件之一为真时，它仍将返回该行。`AND`具有比`OR`TSQL 更高的优先级。

正确地，您的`WHERE`条款应该是：

```
FormMaster.FormStatusID = 1 AND (
  VisitorMaster.PassportNumber = @PassportNumber OR
  VisitorMaster.NameofVisitor LIKE @NameofVisitor OR
  FormMaster.NameofCompany LIKE @NameofCompany) 
```

并将 % 附加到您传入的 @NameofVisitor 和 @NameofCompany 参数中。按照 Shawn 或 WebMatrix 建议的方式执行此操作将使您匹配所有内容，如果您不传入某些内容，而 LIKE '' 仅匹配空字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T02:45:35.850

VisitorMaster.NameofVisitor like @NameofVisitor + '%'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T02:45:48.440

尝试" NameOfVisiotr**像**'A%' 代替

# java - Spring @Autowired 用法

> ID：633158
> 
> 赞同：221
> 
> 时间：2009-03-11T02:44:24.170
> 
> 标签：java, spring, autowired

在将由 Spring 连接的类 中使用**@Autowired**的优缺点是什么？

澄清一下，我说的是**@Autowired**注释，而不是 XML 中的自动装配。

我可能只是不明白，但对我来说，这几乎像是一种反模式——你的类开始意识到它们与 DI 框架相关联，而不仅仅是 POJO。也许我喜欢惩罚，但我喜欢 bean 的外部 XML 配置，而且我喜欢有明确的连线，所以我确切地知道什么连线在哪里。

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2009-03-11T14:30:36.980

很长一段时间以来，我认为拥有像我们都使用的 xml 文件一样的“集中式、声明式配置”是有价值的。然后我意识到文件中的大部分内容都不是*配置*- 在开发之后的任何地方都没有改变过，永远。然后我意识到“集中式”只在非常小的系统中有价值——只有在小系统中，你才能将配置文件*作为一个整体*来理解。当相同的“布线”大多被代码中的依赖项复制时，理解整个布线的真正价值是什么？所以我唯一保留的是元数据（注释），它仍然是一种声明性的。这些在运行时*永远不会改变，而且**永远不会*有人会即时更改的“配置”数据 - 所以我认为将其保存在代码中很好。

我尽可能多地使用全自动接线。我喜欢它。除非受到枪口威胁，否则我不会回到旧式春天。我更喜欢完全的原因`@Autowired`随着时间的推移而改变。

现在我认为使用自动装配的最重要原因是系统中需要跟踪的抽象更少。“bean name”实际上已经消失了。事实证明，bean 名称仅因 xml 而存在。因此，一整层抽象间接（您将 bean-name “foo” 连接到 bean “bar” 的地方）消失了。现在我将“Foo”接口直接连接到我的 bean 中，并由运行时配置文件选择实现。这允许我在跟踪依赖项和实现时*使用代码。*当我在我的代码中看到一个自动装配的依赖项时，我可以在我的 IDE 中按下“转到实现”键，然后出现已知实现的列表。在大多数情况下，只有一个实现，我直接进入课堂。能'*正在使用什么实现（我声称相反的情况更接近 xml 布线的真相 - 有趣的是你的观点如何变化！）*

 *现在你可以说它只是一个非常简单的层，但是我们添加到系统中的每一层抽象都会*增加*复杂性。我真的不认为 xml 为我使用过的任何系统增加了任何真正的价值。

我曾经使用过的大多数系统都只有*一种*生产运行时环境配置。测试等可能还有其他配置。

我想说完全自动装配是 spring 的 ruby​​-on-rails：它包含这样一个概念，即大多数用例都遵循一种正常和常见的使用模式。使用 XML 配置，您可以*使用*很多一致/不一致的配置，这些配置可能/可能不是预期的。我已经看到很多 xml 配置因不一致而过度使用 - 它是否与代码一起重构？没想到。这些变化是有原因的吗？通常不会。

我们在配置中几乎不使用限定符，而是找到了解决这些情况的其他方法。这是我们遇到的一个明显的“缺点”：我们稍微改变了编码方式，使其与自动装配交互更顺畅：客户存储库不再实现通用`Repository<Customer>`接口，但我们创建了一个`CustomerRepository`扩展接口`Repository<Customer>`。有时在子类化方面也有一两个技巧。但它通常只是将我们指向更强大的打字方向，我发现这几乎总是一个更好的解决方案。

但是，是的，您正在绑定一种特定风格的 DI，而这种风格主要是 spring 所做的。我们甚至不再为依赖项创建公共设置器（所以你可以说我们在封装/信息隐藏部门是 +1 的）我们的系统中仍然有一些 xml，但 xml 基本上*只*包含异常。完全自动装配与 xml 很好地集成。

我们现在唯一需要的是将`@Component`,`@Autowired`其余部分包含在 JSR 中（如[JSR-250](https://www.jcp.org/en/jsr/detail?id=250)），因此我们不必与 spring 绑定。这就是过去发生的事情的方式（这些`java.util.concurrent`事情浮现在脑海中），所以如果这种情况再次发生，我不会完全感到惊讶。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-03-11T03:02:15.937

对我来说，这是我喜欢/不喜欢 Spring 和自动布线的地方。

优点：

*   自动装配摆脱了讨厌的 XML 配置。
*   更容易使用注释，它允许您直接使用字段、setter 方法或构造函数进行注入。还允许您注释和“限定”注入的 bean。

缺点：

*   使用自动装配和注释使您依赖于 Spring 库，与 XML 配置一样，您可以选择在有或没有 Spring 的情况下运行。就像你说的，你被绑定到一个 DI 框架。
*   同时我喜欢能够“限定”bean，对我来说这使得代码非常混乱。如果您需要在多个地方注入同一个 bean，我看到相同的字符串名称到处重复。对我来说，这似乎有可能出错。

我已经开始几乎完全在工作中使用自动连接，因为无论如何我们都非常依赖 Spring 集成，以至于依赖问题没有实际意义。我参与了一个 Spring MVC 项目，该项目广泛使用了自动装配，并且有点难以理解。

我认为自动装配是一种后天的习惯，一旦你习惯了它，你就会意识到它是多么强大、容易，而且比 XML 配置更容易使用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2010-11-30T13:20:45.167

在我们的大项目中，我们正在从 @Autowire 切换回 XML 配置。问题是引导性能非常低。自动装配扫描器从自动装配搜索类路径加载所有类，因此，在 Spring 初始化期间急切地加载了许多类。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-20T10:27:35.720

关于切换环境的讨论很少。我从事的大多数项目都是根据我们正在处理的环境注入依赖项是一个真正的问题。使用 xml 配置，使用 Spring EL 非常简单，而且我不知道有任何带有注释的好解决方案。我刚刚想出了一个：

```
 @Value("#{${env} == "production" ? realService : dummyService}")
    private SomeService service; 
```

它应该可以工作，但恕我直言，这不是一个好的解决方案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-07-09T13:02:30.740

我已切换到@Autowire。维护除小型项目以外的任何东西的 XML 配置本身就成为一项任务，并且理解力迅速下降。

IntelliJ 为 Spring 注释提供了良好（不完美）的支持。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-02-14T17:29:32.697

我对这个主题的看法是，xml 配置会降低代码的清晰度，尤其是在大型系统中。

@Component 之类的注解让事情变得更糟。它引导开发人员使对象可变，因为依赖关系不能再成为最终的，因为需要提供默认构造函数。依赖项要么通过公共设置器注入，要么通过@Autowired 不受控制。[更糟糕的依赖注入被实例化其依赖的类所破坏，我仍然在新编写的代码中看到这一点！]。不受控制的意思是，在大型系统中，当该类型的多个实现（或子级）可用时，要了解哪些实现是@Autowired 会更加复杂，这使得调查错误变得更加困难。这也意味着，假设您有一个用于测试环境的配置文件和另一个用于生产的配置文件，

我坚持声明我的配置类的中间立场，（使用@Configuration的基于java的Spring配置）

我在配置类中明确声明了我的所有 bean。我只在配置类中使用@Autowired，目的是将Spring的依赖限制在配置类中

@Configuration 驻留在特定的包中，这是 spring 扫描运行的唯一位置。（这大大加快了大型项目的启动时间）

我努力使我的所有类不可变，尤其是数据对象、JPA、Hibernate 和 Spring，以及许多序列化库似乎破坏了这一点。我避开任何强迫我提供 setter 或从我的属性声明中删除 final 关键字的东西。

减少创建对象后更改对象的可能性，大大减少了大型系统中的错误，并减少了在存在错误时发现错误的时间。

它似乎也迫使开发人员更好地设计系统不同部分之间的交互。问题和错误变得越来越多的编译错误，从而减少浪费的时间并提高生产力。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T14:45:18.993

以下是一些
**经验**

*   使配置更容易，因为我们可以使用 @Autowire 注释
*   不想使用setter方法，所以类会更干净

**缺点**

*   即使我们使用 DI，也与 xml 文件紧密耦合
*   很难找到实现（但如果你使用像 intellij 这样的好 ide，你肯定可以摆脱这个）

根据我的个人经验，我没有太多使用@AutoWire 注释，而是在测试用例中使用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-03T11:49:36.100

我真的很喜欢用注释而不是 XML 来编写。根据 Spring 手册和最新版本，XML 和 Annotation 达到了相同的结果。

这是我的清单

临：

*   从 xml 中删除无用的行
*   简化调试代码：当你打开一个类时，你可以阅读你在类中的内容
*   开发速度更快，400 行或更多行 XML 的项目是否可读？

缺点：

*   不是标准的Java实现，但是你可以切换到使用@Inject，这是一个Java标准Api，所以bean仍然是一个Pojo
*   您不能简单地在任何地方使用，数据库连接 e 等等，但这只是一种意见，我更喜欢有一个可以读取所有配置的地方。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-23T11:21:21.803

据我了解，@Autowired 在引用接口参考并使用其覆盖功能时最好使用，但我只发现这个问题是它有时在运行时分配为 null。

# parallel-processing - 函数式语言本质上是否比它们的 OO 或命令式表亲更具可并行性？

> ID：633167
> 
> 赞同：6
> 
> 时间：2009-03-11T02:51:33.323
> 
> 标签：parallel-processing, functional-programming

我一直在阅读和思考这个问题。嗡嗡声似乎是在多核的未来，函数式语言将变得更加流行。我是函数式编程的相对菜鸟。我唯一的接触是学术性的，没有什么复杂到可以真正让这类语言通过它的步伐。

因此，据我了解，纯函数可以轻松透明地并行化。这是一个很棒的功能，因为它意味着编写线程代码没有任何麻烦。但是，它似乎对串行代码没有太大帮助。

```
Example:

fooN( ... (foo3(foo2(foo1(0))))) 
```

像这样的串行调用似乎是一个常见的，有时是不可避免的问题。对我来说，这些是并行化如此困难的根源。有些任务只是（或似乎是）高度连续的。拥有“功能心态”是否可以让您更好地分解一些看似连续的任务？是否有任何现有的函数式语言提供透明的机制来更好地并行化高度串行的代码？最后，函数式语言本质上是否比 OO 或命令式语言更具可并行性，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-11T02:55:22.893

由于纯函数，函数式语言比命令式和 OO 语言更可并行化。但是，您是绝对正确的，如果您有这些类型的数据依赖关系，您就无法并行化它。函数式编程的主要价值在于使代码中存在的并行性更容易被发现和推理，因为只有数据依赖关系，而不是共享的可变状态，才能成为阻碍。

事实上，因为大多数普通程序员很难使用纯函数式语言工作，并且因为完全禁止可变状态的严厉政策可能效率低下，所以关于允许以命令方式编写单个函数体但不允许侧面的想法存在一些嗡嗡声跨职能的影响。换句话说，所有要并行化的函数都必须是纯函数。然后，您可以为局部变量设置可变状态，以使代码更易于编写和更高效，但仍允许安全、轻松地自动并行化对这些纯函数的调用。例如，D 语言的 2.0 分支正在探索这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-11T02:57:33.857

主要是关于副作用。如果编译器知道某些代码段没有副作用，它可以根据代码结构进行优化以并行运行其中的一些代码。

考虑 C# / 上的 linq，它是半功能的：

```
var someValues = from c in someArray
                where // some  comparisson with no side effects
                select c; 
```

您正在指定要执行的操作的意图，如果编译器知道表达式的每一部分都没有副作用，它可以安全地分配数组的不同部分以在不同的内核上处理。实际上有一个 .AsParalell 将出现在并行 linq (plinq) 上，它将启用它。问题在于它无法强制执行无副作用位（在不支持它的语言/框架上），如果开发人员不知道，这可能会变得非常丑陋。因此，他们明确表示，但您可以看到这在此过程中造成了麻烦。

# oracle - 在 Oracle 中存储毫秒的最佳方法是什么？

> ID：633173
> 
> 赞同：0
> 
> 时间：2009-03-11T02:54:22.850
> 
> 标签：oracle

我使用的是 Oracle 9，但该系统也适用于 Oracle 8 和 10。

问题是：日期字段不能存储超过秒的任何内容，但我正在存储一系列以毫秒精度发生的事件。显而易见的解决方案是创建一个新列来存储毫秒。但这是更好的解决方案吗？

这对我来说似乎不是很聪明，因为这样做会要求我的所有查询（有很多）都需要更改 ORDER BY 子句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T03:06:32.213

您可以使用时间戳类型。这是一个很好的解释：

[http://it.toolbox.com/blogs/database-solutions/a-comparison-of-oracles-date-and-timestamp-datatypes-6681](http://it.toolbox.com/blogs/database-solutions/a-comparison-of-oracles-date-and-timestamp-datatypes-6681)

尽管它在 Oracle 8 中并没有得到很好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T03:06:40.823

在 Oracle 8 中，您必须解决（varchar 字段或两个字段，一个日期时间和第二个字段来保存毫秒）

如果您可以以某种方式避免在 Oracle 8 中执行此操作，请考虑 TIMESTAMP 数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T03:22:43.077

我建议您在支持 Oracle 8（如果它还没有停止服务，它很快就会停止服务）和毫秒支持之间做出选择。在这两者中，我建议放弃 Oracle 8，只支持 Oracle 9 或更高版本。

[公平披露：我为竞争对手工作——我什至建议转投我们。如果我关于 Oracle 8 停止支持的信息是错误的，对不起。但我的建议是不偏不倚的。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T16:48:06.073

如前所述，timestamp 是 oracle 9 及更高版本中支持您正在寻找的毫秒精度的数据类型。如果您还想支持 oracle 8，则必须使用 varchar2(25) 来存储该值。在 oracle8 中，您必须使用 java 函数或外部程序来获得毫秒精度以存储在表的 varchar2 列中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-21T08:48:49.030

可能为时已晚，无法遇到此线程。但是对于不支持 Timestamp 的早期版本的 Oracle。始终可以将 Timestamp 的值存储在 Long 数据类型列中。在存储到数据库中时，可以将 timestamp.getTime() 保存在 java 中，它返回 long。在从数据库中读取时，可以读取长值并通过在 Timestamp 构造函数中提供它来创建时间戳。希望这对从事遗留系统工作的人有所帮助。

# c# - C# 枚举和强制转换

> ID：633180
> 
> 赞同：7
> 
> 时间：2009-03-11T02:58:22.107
> 
> 标签：c#, enums

如果您在 C# 中声明枚举，则默认类型自动为 int。

那么，为什么在使用枚举时的 case 语句或其他情况下，您必须显式重铸才能使用这些值？如果您必须明确区分大小写，或者我只是在这里做错了什么，那么拥有基础类型有什么意义？

```
private enum MyEnum
        {
            Value1,
            Value2,
            Value3
        }

    switch (somevalue)
                {
                    case (int)MyEnum.Value1:
                        someothervar = "ss";
                        break;
                    case (int)MyEnum.Value2:
                        someothervar = "yy";
                        break;
                    case (int)MyEnum.Value3:
                        someothervar = "gg";
                        break;
                } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-11T03:02:08.463

somevalue 的类型是什么？如果类型是 MyEnum，则不需要强制转换，并且应该可以正常工作。

如果类型是 int 那么是的，您必须转换为 MyEnum 才能正确切换 / 大小写。但是您可以通过强制转换值而不是每个 case 语句来简化这一点。例如

```
switch( (MyEnum)somevalue )  {
  case MyEnum.Value1: ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-11T03:02:47.993

显然 somevalue 是一个整数，而不是显式键入为您的枚举。您应该记住，[枚举的基础值只是“存储类型”](http://msdn.microsoft.com/en-us/library/cc138362.aspx)，并且不能隐式互换。但是，您可以轻松地使用 cast 运算符使您的代码简单且“更多”类型安全：

```
private enum MyEnum { Value1, Value2, Value3 }

switch ((MyEnum)somevalue)
{
    case MyEnum.Value1:
        someothervar = "ss";
        break;
    case MyEnum.Value2:
        someothervar = "yy";
        break;
    case MyEnum.Value3:
        someothervar = "gg";
        break;
    default:
        throw new NotSupportedException();
} 
```

最终，您会想要一个不必将整数转换为枚举的设计，但通常在从磁盘或数据库读取时并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T03:02:06.920

如果`somevalue`是 type `MyEnum`，则不必强制转换为`int`.

```
public enum Color
{
    Red,
    Blue,
    Green
}

class Program
{
    static void Main(string[] args)
    {
        Color color = Color.Red;

        switch (color)
        {
            case Color.Red:
                break;

            case Color.Blue:
                break;

            case Color.Green:
                break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T03:43:55.057

正如其他人所说：

*   如果 somevalue 是 MyEnum 类型，则不必强制转换。
*   如果您正在从数据库或文本文件中读取，您可能希望使用枚举的 Parse 方法从字符串中获取枚举值。
*   如果您绝对必须比较一个 int，则将 switch 转换为 MyEnum 比将每个 MyEnum 值转换为一个 int 更有效。

# visual-studio - 如何在 Visual Studio 中设置默认的双击操作？

> ID：633191
> 
> 赞同：50
> 
> 时间：2009-03-11T03:03:55.930
> 
> 标签：visual-studio, defaultview

双击`Form1.cs`. 我更喜欢将 View Source 设为默认的双击而不是 View Designer。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-03-11T03:14:54.250

右键单击解决方案资源管理器中的文件，选择“打开方式...”，选择 CSharp 编辑器，然后单击“设置为默认值”按钮。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-11T03:14:51.613

右键单击一个表单文件，然后单击“打开方式...”。选择您想要的设计器作为默认打开（在本例中为“CSharp 编辑器”或“Microsoft Visual Basic 编辑器”），然后单击“设置为默认值”。瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-07T16:09:04.080

使用此属性 myClass 将在代码编辑器而不是设计器中打开：

```
[System.ComponentModel.DesignerCategory("")]
public class myClass : Form
{

} 
```

# oop - 在 OCaml 的 OOP 构造中动态确定类型

> ID：633200
> 
> 赞同：4
> 
> 时间：2009-03-11T03:11:36.380
> 
> 标签：oop, pattern-matching, ocaml

我正在学习 OCaml 的 OOP 结构并在今天部分实现，直到我意识到我不知道如何在不使用对象外部的 type 关键字的情况下表示多态匹配语句。

```
class bar (param:string) =
object (code)

end;;

class foo param =
object (code)
 initializer 
  match param with
   string -> Printf.printf "param is a string"
   | bar -> Printf.printf "param is a bar"     
end;;

let b = new bar "a string";;
let f1 = new foo "test";;
let f2 = new foo b;; 
```

是否可以即时确定传入的对象类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T15:05:37.710

那个匹配除了将'param'绑定到'string'之外什么也没做，ocaml应该说第二个匹配没有被使用。我相信您必须使用变体类型来进行匹配。下面是一个使用多态变体类型的示例。

```
class bar (param:string) =
  object (code)
end

class foo param =
  object (code)
  initializer 
    match param with
    | `String str -> Printf.printf "param is a string"
    | `Bar bar -> Printf.printf "param is a bar"     
end

let b = new bar "a string"
let f1 = new foo (`String "test")
let f2 = new foo (`Bar b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-10-29T19:31:22.630

通常，OCaml 不支持类型的运行时识别。

也就是说，运行时表示中嵌入了一些类型信息，以让垃圾收集器工作。要确定某物是否为字符串，您可以执行以下操作：

```
if Obj.tag (Obj.repr param) = Obj.string_tag then 
```

有关 OCaml 运行时表示的更多信息，请参见[Interface C with Objective Caml](http://caml.inria.fr/pub/docs/manual-ocaml/manual032.html)。但是，这些类型的检查通常与 OCaml 鼓励的编程类型背道而驰，并且不清楚您将如何使用此特定检查做任何有用的事情（您需要转换为字符串，并且对类型造成严重破坏安全）。一个更好的解决方案是使用代数数据类型或多态变量来描述有效的参数类型和模式匹配。

类型安全的向下转换可能很有用，但 OCaml 确实不支持。如果这是您正在寻找的，您将需要推出自己的机制（或者更好地围绕它进行设计）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T17:54:33.160

多态匹配语句的想法与面向对象编程的想法相矛盾！行为的定制应该封装在对象中，这就是它们的用途。代码问一个类“你是什么，实际上”表示设计问题。

也就是说，如果你*真的*希望类能够告诉你它们实际上是什么，最简单的方法就是为此添加一个方法：

```
type typ = A | B

class bar =
object
  method typ = A
end

class rebar =
object
  method typ = B
end

class foo param =
object
   initializer
   match param#typ with
   | A -> print_endline "This is a A"
   | B -> print_endline "This is a B"
end 
```

不要为此使用多态变体，因为您会破坏维护操作中详尽模式匹配的优势。

同样，如果您这样做，您可能会忽略[Liskov 替换原则](https://en.wikipedia.org/wiki/Liskov_substitution_principle)，并为您的代码维护人员准备忙碌的日子。我们的世界不需要那种残酷！

# java - 为什么更换内部面板时会出现闪烁？

> ID：633201
> 
> 赞同：1
> 
> 时间：2009-03-11T03:12:09.860
> 
> 标签：java, awt, panel, flicker

只是一个小问题。目前为安装了 J9 的 Dell Axim X51 编写 Java 项目。问题与我的界面有关，对于不同的屏幕，我只需交换一个嵌套面板（注意它正在运行 1.4 并且没有摆动），所以删除（面板）-添加（新面板）。问题是当它交换面板时，这样做所花费的时间是可见的并且会闪烁。

我想这是一个磨坊刷新/缓冲问题的运行，但我已经尝试过覆盖油漆和更新，所以我的想法很新鲜。此外，如果有人特别不喜欢这种导航方法（在框架内交换面板），您能否提出更好的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T06:09:42.770

您可能需要实现双缓冲：

[标准 Java AWT 中的双缓冲区](http://www.codeproject.com/KB/graphics/javadoublebuffer.aspx)

或者，当您将旧面板“交换”为新面板时，将新面板设置为最初隐藏，然后仅在将其添加（）到其父容器后才使其可见。

# c# - 将一些 JavaScript 转换为 JQuery

> ID：633203
> 
> 赞同：0
> 
> 时间：2009-03-11T03:13:00.357
> 
> 标签：c#, .net, javascript, jquery

我有一些执行以下操作的 JavaScript 代码

```
link.NavigateUrl = string.Format("javascript:MyFunction({0}, {1});", ID1, ID2); 
```

所以当点击链接时会调用 MyFunction 并传入动态参数。

如何使用 jQuery 传递这些参数，例如：

```
$(function(){
    $('#MyLinksID').click(function(){
        console.log('Want to have access the two params here');       
}); 
```

那么如何从我的点击事件中访问参数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T03:55:18.693

您需要使用“闭包”，这是 javascript 中的一个中心概念。

简而言之，函数可以访问它创建的范围内的变量。

```
$(function(){
    var ID1 = 'foo';
    var ID2 = 'bar';
    $('#MyLinksID').click(function(){
        console.log(ID1+ID2);
    }
}); 
```

ID1 和 ID2 变量与创建回调函数的范围相同，因此在以后调用它时仍然可以访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T03:26:43.990

如果您尝试调用 MyFunction 并访问 JQuery click 事件中的参数，最简单的方法是解析链接的 href。

像这样的东西应该可以工作（在你的 jQuery 点击事件中）：

```
var href = this.href;
var startPos = href.indexOf("(") + 1;
var endPos = href.indexOf(")");

var parms = href.substr(startPos, endPos - startPos).split(","); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T04:48:09.270

问题是您所指的#MyLinksID 的单击事件与 NavigateUrl 属性没有连接。您需要澄清您的问题，因为两个人回答了 2 个可能的答案。

# css - CSS div[id|="subPane"] 错误

> ID：633204
> 
> 赞同：0
> 
> 时间：2009-03-11T03:13:55.643
> 
> 标签：css

在知道在 IE 中无法识别 parent>div CSS 选择器后，我重新编码我的 CSS 样式，例如：

```
div#bodyMain div#paneLeft>div{/*styles here*/} 
```

对此：

```
div#bodyMain div#paneLeft div[id|="subPane"]{/*styles here*/} 
```

这是我的html片段：

```
<div id="bodyMain">
        <div id="paneLeft">
            <div id="subPaneCategory">
                <p id="subPaneTitle">Shop Item Categories</p>
                <!--other html here -->
</div></div</div> 
```

问题是我的 /*这里的样式*/ 现在在 Mozilla 中不起作用。在使用 element[attribute|="value"] 时我需要知道些什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T03:23:20.660

竖线 ( `|=`) 用于匹配连字符值。IE 可能会忽略管道，并且在 Mozilla 中，您的样式不再起作用，因为它尊重管道，但这与您的标记不匹配（没有连字符）。

^= 运算符匹配“StartsWith”值，而 $= 匹配“EndsWith”。我很确定这些都不被 IE 识别。如果您需要跨浏览器支持，通常最安全的是坚持：

*   `ele`
*   `#id`
*   `.class`
*   （空格）后代
*   还有其他一些有限的，`:hover`比如`a`

差不多就是这样。谢谢 IE :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T03:20:24.020

为什么不直接使用 CSS 类？

```
<div id="bodyMain">
    <div id="paneLeft">
        <div id="subPaneCategory" class="subpane">
            <p id="subPaneTitle" class="subpane">...</p.
        </div>
    </div>
</div> 
```

然后你的 CSS 很简单并且可以跨浏览器：

```
#paneLeft div.subpane {
    /* whatever */
} 
```

另请注意，让 CSS 选择器使用 2 个 id 是没有意义的（除非您需要它来增加特异性）。即：`div#bodyMain div#paneLeft`可以改写为`#paneLeft`.

# database - 在哪里进行连接 - 在数据库服务器或应用程序服务器中？

> ID：633211
> 
> 赞同：4
> 
> 时间：2009-03-11T03:20:04.707
> 
> 标签：database, performance, join, scaling

我目前正面临一个性能问题（它可能会导致稍后出现扩展问题）问题。我正在处理的应用程序非常复杂，它在 SQL Server 2005 上运行。我需要加入 6 - 7 个表来获取所需的数据。到目前为止，每个表都包含超过 100,000 行数据。无法更改数据库架构（必须保持原样）。所以我只能尽量优化。我想到了两件事：

*   尽量不要加入数据库，让应用服务器使用LINQ进行过滤：

    *   优点：将能够通过添加更多应用服务器轻松扩展。
    *   缺点：更努力；我不确定响应能力是否会降低。
*   应用服务器保持原样并尽可能优化 SQL 查询（更多索引、频繁重建索引等）：

    *   优点：最小的努力
    *   缺点：当表记录变大时，问题会再次出现

基本上缓存目前不是我的解决方案（硬件问题，托管问题等），这就是我最初没有提出它的原因。但我确实知道缓存会给我带来什么好处，并且已经使用过很多次了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-11T04:51:41.943

一般来说，在 DBMS 中进行连接。如果您在应用程序服务器中执行此操作，那么您打赌您可以比编写 DBMS 的人更好地优化连接，并且（进一步）您可以通过足以抵消成本的方式超越他们的最佳努力通过网络传输未连接的数据。

现在，如果您要对两个宽表（假设它们是 T1，宽度为 W1 的 N1 行和宽度为 W2 的 N2 行的 T2）进行交叉乘积而不进行过滤，那么 DBMS 必须创建并通过线路发送 N1 * N2 * (W1 + W2) 字节的数据，而您可以将表格分别作为 N1 * W1 + N2 * W2 字节的数据来提取。如果 N1 = N2 = 1M 且 W1 = W2 = 100，那么这是 200 TB 与 200 MB 的数据传输，有利于在应用服务器中进行交叉产品。但这对 DBMS 来说并不完全公平。大多数查询并不是那么傻——它们加入列并应用条件，DBMS 优化器将竭力（并且自动）努力最小化完成的工作。此外，它只会将相关数据发回给您；它不必发送所有与您的条件不匹配的行。

为了展示另一种情况（有利于 DBMS），请考虑以下情况：T1 有 N1 = 1M 行宽度 W1 = 100，但 T2 有 N2 = 100K 行宽度 W2 = 50。一个整数列，因此，T1 中有 10 行，T2 中的每一行。假设您将所有 T1 和 T2 吸入应用服务器：这需要 N1 * W1 + N2 * W2 = 105 MB 的数据。但是过滤条件将数据限制为 T2 中行的 1/10，对于 T1 中与 T2 中的一行匹配的每一行，实际上只有 2 行匹配过滤条件。现在 DBMS 只传输 N2 * (W1 + W2) / 5 = 3 MB，DBMS 节省了超过 100 MB 的数据传输。现在，如果你设法聪明一点，只下载与 T2 中的值相对应的 N2 * W2 / 10 = 500 KB 数据，您仍然必须让 DBMS 对您想要从 T1 到应用服务器的正确行的值执行 T1 的“半连接”。如果您只需要列的一个子集，则可以节省另一组。DBMS 往往有相当聪明的排序包；你需要在你的应用服务器中有一个好的排序包来以正确的顺序呈现数据。

对于 DBMS 中的连接，它通常应该是一个不折不扣的胜利。如果不是，那是因为您要求服务器做的工作超出了它的处理能力。在这种情况下，您需要查看复制数据库服务器是否有意义，或者添加更多内核、更多网络带宽或更多主内存是否可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T04:28:31.970

一般来说，在谈论规模时，我会考虑以下几点：

1.  它多久执行一次？对于访问频率较低的查询，您可能会接受一些性能下降。

2.  增长率/变化率是多少？如果其中一些表中的记录相对静态，您可能需要考虑在外部将内容缓存在 dbm 类型的文件（或任何 Windows 等效文件）中。还有像 memcache 这样的东西可能值得一看。不过，这可能会也可能不会。这是基于在应用程序代码中执行“连接”。

3.  轮廓。如果你加入索引列（你是，不是吗？），你不一定会随着行数的增长而降级。这在很大程度上取决于*您*是在处理 1:1 还是 1:N 关系，N 的平均大小是多少，数据库服务器上有多少可用内存，计算表统计信息的频率，以及列和索引的类型。如果您正在处理 1:1 关系并且它是唯一的，那么数据库将能够进行简单的散列并进行查找。

确保将获取的列限制为绝对不超过您的需要，尤其是在连接许多表时，因为如果连接两个表所需的只是被索引的列，那么数据库甚至可能根本不考虑该表；可以仅使用索引来执行连接。这减少了争用并提高了需要处理表的实际内容的次优查询的性能，因为在表上拉取的查询更少。

所有关系数据库都有一个工具或功能来查看给定查询的查询执行计划。用它。如果输出对您没有意义，请学习它。这是您了解数据库将如何处理给定查询、将使用哪些索引、在每个执行步骤中将遇到的估计（或实际）行数以及其他有趣内容的主要窗口。

一旦您获得了有关查询优化器对查询实际执行的操作的信息，并且您拥有所有索引/统计信息/列选择，您将更好地了解从那里去哪里。如果你在数据库中尽你所能，你将不得不考虑使用数据缓存并做一些事情，比如使用更具体/更好的 where 子句访问更少的表。

免责声明：我对 SQL Server 没有直接经验，但我在其他 RDBMS（Oracle、MySQL、PostgreSQL 等）和一般架构方面有很多经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T03:27:09.947

您需要检查哪些索引已经到位，它们（和统计信息）是否是最新的，以及新索引是否有利于您的查询工作量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T04:40:00.910

通过在“不加入”场景中添加更多服务器，您将获得更多的性能提升，或者尝试优化连接。你是对的 - 当你有更多数据时问题会回来。

最好的解决方案是使用内存缓存。您可以缓存大多数尺寸较小的表-表关系，并且不会一直获取它们。

最佳方案是最小化连接，最小化选择，然后将很少更改的数据缓存到内存中。这将起到推动作用。

正如微软（以及其他数据库制造商）关于联接的建议一样 - 尽可能最佳地使用它们。根据我的经验 - 超过 2-3 个加入复杂选择的人数最多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-11T05:14:47.257

你提到每个表都有“超过 100,000 行”，但你没有提到你选择了多少数据，以及连接有多复杂。对于正确设置和索引的 SQLServer，100K 行*并不大。*我们有 17 路连接，它们在几毫秒内返回结果，但它的索引很好并且选择了几行。在开始重新设计您的应用程序之前，我会查看 SQLServer 上的分析信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-17T18:22:14.913

不要忽视在服务器之间传输数据的开销。以太网在负载下会迅速下降（我认为持续传输速率大约是单数据包速率的 30%；即，您的 100Mb/秒链路实际上只能处理 30Mb 的大流量）。一旦你在数据库服务器上饱和了你的链接，添加更多的应用服务器就无关紧要了，因为你将无法更快地获取数据。

加入应用程序服务器也会让您受制于最慢的服务器。我们在客户端站点看到性能下降，发现主应用服务器已经崩溃，客户端的恢复策略是让机器故障转移到运行在其他服务器之一上的虚拟机。一种巧妙的解决方案，但肯定不如性能。当路由器出现故障时，我还看到速度变慢，突然间，所有对等服务器都在三到四跳之外，而不是在同一个子网上。

# sql-server - 我的 SQL Server 2008 中的 SQL Profiler 在哪里？

> ID：633213
> 
> 赞同：65
> 
> 时间：2009-03-11T03:20:55.983
> 
> 标签：sql-server, sql-server-profiler, profiling

我下载了[SQL Server 2008](http://en.wikipedia.org/wiki/Microsoft_SQL_Server#SQL_Server_2008)，但似乎在任何地方都找不到[SQL Profiler](http://msdn.microsoft.com/en-us/library/aa173918%28SQL.80,printer%29.aspx)。

我相信我安装了 SQL Server Enterprise Express/试用版？

我猜它毕竟是 Express 而不是 Enterprise？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-03-11T03:23:50.063

SQL Server Express 不附带分析器，但您可以改用[SQL Server 2005/2008 Express Profiler](http://sqlprofiler.googlepages.com/)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-30T20:50:10.853

[首先从http://expressprofiler.codeplex.com](http://expressprofiler.codeplex.com)获取探查器 Exe

那么您可以简单地将其添加到管理工作室：

工具 -> 外部工具... ->

a- 找到磁盘上的 exe 文件（如果已安装，通常为 C:\Program Files (x86)\ExpressProfiler\ExpressProfiler.exe）

b- 给它一个名字，例如 Express Profiler

就是这样:) 你有你的 Profiler 和你的 sql express 版本

![在此处输入图像描述](https://i.stack.imgur.com/9lA6e.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-07T00:37:03.973

另一个非常基本的免费分析器： [http ://expressprofiler.codeplex.com](http://expressprofiler.codeplex.com)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-06-11T13:24:53.417

Management Studio->工具->SQL Server Profiler。

如果未安装，请查看[此链接](http://vijayvepa.wordpress.com/2011/03/09/installing-sql-server-2008-r2-profiler/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-24T08:09:49.797

还要确保在安装选项中选择了“客户端工具”。但是，如果 SQL Managment Studio 2008 存在，那么您很可能安装了 express 版本。

# asp.net - 在 ASP.NET 1.1 的 FileSystem 下编写 Excel 文件

> ID：633216
> 
> 赞同：0
> 
> 时间：2009-03-11T03:22:47.023
> 
> 标签：asp.net, export-to-excel

我想在文件系统下写一个Excel文件。excel文件的数据源将来自SQL Server 2000，以DataSet/DataTable的形式出现。COM InterOp 不允许在我的工作场所使用。用户正在使用各种Excel版本；97 - 2003 年。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T13:52:02.020

[您可以使用此处](http://www.carlosag.net/Tools/ExcelXmlWriter/)提供的 ExmWriter dll 。它很方便，但功能有限。将您的 excel 文件保存为 xml sheet 2003 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-12T00:32:48.843

好的，如果您不能在服务器上安装 Excel 并使用 COM 互操作。看看[Aspose 细胞](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx)

他们有专门的解决方案来解决这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T08:23:27.147

如果您不能使用 COM 互操作，则不能以编程方式在代码中创建 Excel 工作簿/工作表。

但是，您可以创建一个 DTS 包，该包可以创建您需要的 Excel 文件，但不允许您执行合并操作或数据格式设置。

您可以有一个预先格式化的工作表，然后每次都填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T03:29:04.140

将制表符分隔的数据写入文本文件，以“.xls”扩展名保存。Excel应该能够读取。

# .net - ASP.NET 服务器端标签与基于 JavaScript 的 UI 和 REST

> ID：633218
> 
> 赞同：3
> 
> 时间：2009-03-11T03:22:56.743
> 
> 标签：.net, asp.net, javascript, ajax, asp.net-ajax

我一直在开发带有服务器端 ASP.NET 控件和代码隐藏文件等的“传统”ASP.NET 应用程序。现在我正在探索几个 JavaScript 库，例如：jQuery、YUI、Ext Js、Prototype。（也很难选择，但这是另一篇文章）。所有这些库使客户端到服务器的通信变得更加容易，但它们也提供了一组非常漂亮的 UI 控件。在我看来，有些控件比 ASP.NET 服务器端控件更时尚。

但现在我质疑传统的 ASP.NET 模型。我倾向于通过 REST 与服务器（只是一个简单的 aspx 页面）对话的所有 HTML/JS UI。你怎么看？有人用过这种方法吗？有哪些缺点和陷阱？此外，如果您可以评论您使用的 JS 库/框架以及您使用它的经验，那也很棒。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T03:32:03.477

这是一个很多人都涉及的非常冗长的话题，但其核心区别基本上是这样的：

对于**非常繁重的 Web 应用程序，需要维护大量的状态信息**；经常停留在同一个页面上并且行为类似于桌面应用程序，**传统的 ASP.NET WebForms 模型**为您提供了很多将所有这些结合在一起的粘合剂。

对于**其他一切**，**REST/MVC 模型**效果最好。

这是一个概括，并不适用于每一种情况，但总的来说，这是一个很好的经验法则。

同样重要的是要指出，如果您没有固定的受众（例如公司内部网，有时甚至是这样），您应该编写您的网站、WebForms*或*REST，以便在没有 JS 的情况下工作。然后回去为那些可以支持它的人添加甜蜜的善良。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T12:20:49.260

不排除混合模型。ASP.NET 现在支持将 javascript 本地输出到浏览器的服务器控件。如果您有呈现标记并使用 ASP.NET WebForms 模型发布数据的传统控件，请考虑将控件修改为 ScriptControls，它允许您在现有代码隐藏中处理加载数据等，但编写 javascript 来处理 UI完全控制。您可以编写服务器控件来输出所需的 javascript（并在加载期间使用来自代码隐藏的数据设置变量值等），然后让您的 javascript 使用 AJAX 与 Web 服务进行通信，而不是进行回发。一定要探索 ajax.asp.net。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T03:31:01.670

如果浏览器不支持 JS，您将完全阻止用户。此外，您可能会遇到一些搜索引擎的问题。请注意，我这样说是因为您正在考虑在浏览器上点击一个 URL，然后只使用 JS 来处理其余部分。就此而言，将所有内容都放在 flash 和 Silverlight 中也是如此。这些中的任何一个都适用于私人信息或不打算进入搜索引擎的功能，但对于其余信息，您确实需要不同的 URL。

也就是说：ASP.NET 在防止 no-js 问题方面并不是那么好。甚至网格的默认分页也是该问题-我从谷歌的少数条目中获得了一个站点到 2800+。[http://asp.net/mvc](http://asp.net/mvc)更能清楚地说明您正在使用的内容。

# jquery - 使用 jQuery 为 CDN 上托管的所有图像应用红色边框

> ID：633219
> 
> 赞同：0
> 
> 时间：2009-03-11T03:22:59.380
> 
> 标签：jquery, amazon-s3

我正在使用 Amazon S3，某些图像托管在那里。依次检查每个图像以验证其是否来自 CDN，有时会添加新图像而有人忘记上传它们，这有点痛苦，我认为有一个视觉提示会很好 - 可以从调试面板访问。

我想在页面上来自 CDN 的所有图像上画一个红色边框。

我怎么能用 jQuery 做到这一点。图像需要通过 URL 来识别（例如“images.example.com”）。

如果您有比简单的红色边框更聪明的解决方案，则可以加分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-11T03:29:35.433

像使用选择器这样简单的事情怎么样[`attribute*=`](http://docs.jquery.com/Selectors/attributeContains#attributevalue)：

```
$(document).ready( function() {
  $('[img[src*=yourcdndomain]').addClass('from_cdn');
} ); 
```

您可能更喜欢[`attribute^=`](http://docs.jquery.com/Selectors/attributeStartsWith#attributevalue)检查“开始于”而不是“包含”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T03:30:33.107

怎么样：

```
$("img[src^=http://images.example.com]").css("border", "solid 1px red"); 
```

或者您想要应用的任何其他样式/效果...

使用 jQuery 的属性以选择器开头：http: [//docs.jquery.com/Selectors](http://docs.jquery.com/Selectors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T05:23:08.030

```
$('button#checkForCDNImages').click(function() {
    var message = '',
        cdnURL = 'http://cdn.mysite.com',
        $imgs = $('img[src^=' + cdnURL + ']')
    ;
    if ($imgs.length) {
        $imgs
            .addClass('cdn-image') // apply your own styles for this
            .each(function() {
                message += "\n" + this.src.substring(cdnURL.length) + " (" + this.alt + ")";
            })
            .get(0)           // grab the first one
            .scrollIntoView() // and scroll to it
        ;
        alert ("The following images are on the CDN:" + message);
    } else {
        alert ("No images found originating from the CDN.");
    }
}); 
```

单击您的按钮将给出如下输出：

> 以下图片在 CDN 上：
> /images/image1.jpg（公司徽标）
> /images/pr0n.jpg（安吉丽娜·朱莉）

# antlr - ANTLR2 与 ANTLR3

> ID：633224
> 
> 赞同：3
> 
> 时间：2009-03-11T03:24:19.453
> 
> 标签：antlr

你用过这两种还是两种？你更喜欢哪个，出于什么原因？

例如，我最近学习了 v2，并且可能会因为 netbeans 团队提供的高性能实现而坚持使用它（是的，我坚持使用 java）。在这种情况下，是否有任何令人信服的理由转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-14T23:02:02.633

要查找 v2 和 v3 之间的变化，请查看此链接： [http ://www.antlr.org/wiki/pages/viewpage.action?pageId=719](http://www.antlr.org/wiki/pages/viewpage.action?pageId=719)

我应该注意到，我们仍然在我工作的地方使用带有 C++ 的 2.7.6，我们现在并不觉得需要升级。

当我们对我们的语言进行 C# 移植时，我们确实使用了 v3.0，因为我们发现了一些在 3.0 中已修复且未反向移植到 2.7.6 的错误

总结变化：

*   Auto LL(*)，无需指定前瞻
*   自动回溯，
*   允许大多数非左递归语法规则

# excel - ASP：如何从 Excel 中的合并单元格导入数据？

> ID：633232
> 
> 赞同：2
> 
> 时间：2009-03-11T03:29:01.393
> 
> 标签：excel, asp-classic, ado

我需要从 excel 文件中导入数据，但某些字段是合并单元格。

如何确定一个字段是否已合并，以及该字段中合并了多少个单元格？

我的代码是这样的：

```
Dim Conn, DBPath ,Rs

Set Conn = Server.CreateObject("ADODB.Connection")

DBPath = "Driver={Microsoft Excel Driver (*.xls)}; DBQ=" & Server.MapPath("program.xls")

Conn.Open Driver & DBPath 

Sql="Select F1, F2 From [Sheet1$]"

Set ODBCrs=Conn.Execute(Sql)

while Not ODBCrs.EOF

    conn2.execute("insert into....")

    ODBCrs.MoveNext

wend

ODBCrs.Close

Conn.Close 
```

数据是这样的：

甲类

名称 1 描述 1

名称 2 描述 2

B类

名称 3 描述 3

名称 4 描述 4

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T03:35:15.870

单元格的合并只是一个格式化的事情。它不会显示在数据中。如果您通过 ADO 和 Excel 驱动程序访问 Excel 文件，您只是查看数据，而不是格式。

如果您真的必须这样做，您可能必须创建一个 Excel.Application 对象并使用 Excel 对象模型来检查单元格及其格式。这在桌面上可以正常工作，但不能在服务器上真正可靠地完成，因此，例如，如果您尝试在 Web 应用程序中执行此操作，您可能会遇到问题。

# internet-explorer - 创建 IE 工具栏

> ID：633243
> 
> 赞同：1
> 
> 时间：2009-03-11T03:35:33.203
> 
> 标签：internet-explorer, plugins, toolbar

我在哪里可以找到有关向 IE 添加工具栏（如“Snagit”和其他工具）的信息？

我基本上想做的是添加一个按钮，这样当点击我的工具时就会启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T03:37:38.127

简单的答案：[MSDN：添加工具栏按钮](http://msdn.microsoft.com/en-us/library/aa753588.aspx)

有关更多信息，您是否有任何关于您正在尝试做什么的详细信息，例如 C++/MFC/ATL/.NET 的语言/环境？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T03:37:49.983

本[教程](http://msdn.microsoft.com/en-us/library/aa753588(VS.85).aspx)将引导您将单个工具栏按钮添加到 IE 工具栏。您可以使您的目标扩展成为一些 JScript 或 COM 对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-31T07:13:51.723

www.besttoolbars.net 有一个创建 IE 和 Firefox 工具栏的平台。它们为最终工具栏提供源代码，以便您可以有一个自定义的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-19T18:22:52.477

[该站点](http://cgeers.wordpress.com/2008/02/16/internet-explorer-toolbar/)提供了有关如何使用 Visual Studio 创建 IE 工具栏的非常详细的演练。

# php - php图片上传和权限

> ID：633244
> 
> 赞同：0
> 
> 时间：2009-03-11T03:36:34.510
> 
> 标签：php, file-upload

你能告诉我是否有办法用 php 上传图片而不用 chmoding 目录

```
ftp_site($conn_id, 'CHMOD 0777, /www/images/thumbs'); 
```

规避`[function.move-uploaded-file]: failed to open stream: Permission...`错误？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T04:07:54.437

绝对地。

我不确定你为什么使用 ftp_site()。您是将上传的文件通过 FTP 传输到另一台服务器，还是只是尝试制作一个上传表单以上传到提供 php 文件的同一台机器？

假设您正在上传到运行脚本的服务器，有几件事。确保您的 Web 服务器正在运行的用户（httpd、apache、lighttpd 或类似用户）对 $uploadPath 具有写入权限。为此，您可以对其进行 chmod 0777，但这是不安全的，因为系统上的任何用户现在都可以写入此文件夹，而我们只希望 apache 能够这样做。如果您需要帮助设置此部分，请通过[http://yaauie.com/me与我联系；](http://yaauie.com/me)我不确定您在命令行中的舒适程度，并且不想用 jibberjabber 压倒您

这里有一些快速的程序代码，可以帮助你解决你被抓到的地方；将您的上传表单指向此脚本以进行测试。

```
<?php
// Set the upload path
$uploadPath = realpath('./images/thumbs/');

// test to see if the upload path is a directory that is writable
if(is_dir($uploadPath) && is_writable($uploadPath)) {

    // create the full path for the end result file
    $uploadFile = $uploadPath.basename($_FILES['userfile']['name']);

    // try to move the uploaded file
    if(move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadFile)) {
        echo 'Sucessfully moved file to "'.$uploadFile.'"';
    } else {
        echo 'Directory is writable, but we could not move the uploaded file to it.';
    }
} else {
    echo 'Either "'.$uploadPath.'" is not a directory, or it is not writable.';
}
?> 
```

# c# - 在 C# 中使用 sqlite 进行 SQL 转义

> ID：633245
> 
> 赞同：13
> 
> 时间：2009-03-11T03:36:49.410
> 
> 标签：c#, sqlite, escaping

我有一个文本字段，它破坏了我的 sql 语句。我如何逃避该领域的所有字符？我在 C# 中使用带有[http://sqlite.phxsoftware.com/的 sqlite](http://sqlite.phxsoftware.com/)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-11T03:43:44.400

您应该使用如下参数：

```
SQLiteCommand cmd = _connection.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "SELECT * FROM MyTable WHERE MyColumn = @parameter";
cmd.Parameters.Add( new SQLiteParameter( "@parameter", textfield ) );
SQLiteDataReader reader = cmd.ExecuteReader(); 
```

使用参数化 SQL 将转义所有输入值并帮助保护您免受 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T03:54:42.893

您还可以用怀疑单引号（不是“）替换所有单引号分隔符。

```
sql = sql.Replace("'","''"); 
```

# vb6 - 如何从 ReadProcessMemory 的输出中获取字符串

> ID：633251
> 
> 赞同：2
> 
> 时间：2009-03-11T03:41:02.690
> 
> 标签：vb6, readprocessmemory

这是我的代码片段。

```
Declare Function ReadProcessMemory Lib "kernel32" _
                              (ByVal hProcess As Long, _
                              ByVal lpBaseAddress As Long, _
                              lpBuffer As Any, _
                              ByVal nSize As Long, _
                              lpNumberOfBytesRead As Long) As Long

Dim bytearray As String * 65526
Dim GetWindowsFormsID

ReadProcessMemory(processHandle, bufferMem, ByVal bytearray, size, lp)
GetWindowsFormsID = ByteArrayToString(bytearray, retLength)

Function ByteArrayToString(bytes As String, length As Long) As String
    Dim retValStr As String
    Dim l As Long
    retValStr = String$(length + 1, Chr(0))
    l = WideCharToMultiByte(CP_ACP, 0, bytes, -1, retValStr, length + 1, Null, Null)
    ByteArrayToString = retValStr
End Function 
```

调用 WideCharToMultiByte 时出现“94 null”错误。但我确定字节不为空。

![替代文字](https://farm4.static.flickr.com/3322/3346099164_d9ab874e80_o.jpg)

这是将此输出转换为字符串的确切过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T04:51:43.050

好的，这已经解决了（还有[这个问题](https://stackoverflow.com/questions/591250/how-can-i-automate-winforms-in-net)）。问题实际上是将 WideChar 字符串转换为 ANSI 字符串。我使用 CopyMemory 而不是 WideCharToMultiByte。

```
Public Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (Destination As Any, Source As Any, ByVal Length As Long)

Function ByteArrayToString(bytes As String, Length As Long) As String
    Dim retValStr As String
    retValStr = String(Length - 1, Chr$(0))
    CopyMemory ByVal StrPtr(retValStr), ByVal bytes, Length * 2
    ByteArrayToString = retValStr
End Function 
```

# reference - 有没有好的可用用户手册的好例子？

> ID：633257
> 
> 赞同：1
> 
> 时间：2009-03-11T03:45:14.960
> 
> 标签：reference, user-manual

我正在尝试为基于 vb6 桌面应用程序创建用户手册，它应该主要由非技术人员使用来了解如何使用该软件，我还需要它来向客户展示他们购买的产品。

我已经看过[之前关于最佳实践的讨论，](https://stackoverflow.com/questions/241422/tips-to-create-a-useful-user-manual)但我正在寻找一个可靠的有用的用户手册，用于真实的产品，这样我就可以更好地了解要编写或包含的内容。它不一定是桌面应用程序或基于 vb6，我只是想寻找一些灵感。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T04:14:36.090

传统上，消费者最终用户文档的黄金标准是 Quickbooks - 您可以从查看该应用程序开始。

如果它是封闭的受众，并且您有用于设计的用户故事，那么这也是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T05:40:30.033

“...的傻瓜指南”系列以及其他一些系列都得到了很好的保护。

我在这个领域收到的最好的建议是**了解你的听众**——并写信给他们的需求。

不要写你需要的手册。编写最终用户需要的内容。

设身处地为他们着想，想想他们的目标。想想他们会遇到的情况，以及他们需要什么——然后交付。

提示：他们的目标不是使用您的软件，而是完成他们的工作——小块编写，并向用户展示您的软件如何让他们的生活更轻松。

一个真实的例子：

我最近的几个项目的可交付成果之一是*支持指南*——帮助台和基础设施的详细信息，所有关于如何维护系统的信息。

对于这些支持指南来说，叙述风格是没有用的——因为没有人会坐下来阅读它。忙碌的人只是没有时间。

我将文档分为 3 个关键部分：部署、症状和解决方案。

**部署**展示了系统应该如何部署——哪台机器上的哪个部分，它们如何通信（到端口号）以及在哪里可以找到配置和日志文件。

**症状**列出了用户可能注意到系统未按预期工作的不同方式。这是为了让他们可以查找用户投诉并获得一些指导。在每个症状下，列出要尝试的解决方案。

**解决方案**列出了不同的过程、如何检查配置、测试操作、隔离问题等。

该文档具有高度重复性——因此最终用户不必四处寻找他们需要的东西。

这种结构与我的初稿非常不同，但已被证明是有用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T09:00:32.330

我记得 HP28S 计算器手册（包括用户指南和参考手册）的清晰度和质量给我留下了深刻的印象。有了它们，学习、理解和掌握设备的复杂性非常容易，而且不会因不必要的并发症而迷失方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T04:19:04.253

这可能是从左边的领域，但[Ensoniq 为他们的合成器提供的音乐家手册](http://web.archive.org/web/20030125014739/http%3a//www.asr-10.com/)总是受到好评。你可以从头开始，循序渐进，以合理的顺序学习机器的所有知识，然后你会回到同一本书并将其用作参考手册，而不会被“教程”所困扰它的一个方面。

# visual-studio - 如何在 Visual Studio 中突出显示用户指定的单词？

> ID：633258
> 
> 赞同：30
> 
> 时间：2009-03-11T03:45:32.710
> 
> 标签：visual-studio, syntax-highlighting

我的团队经常将 TODO 这个词放在未完成的代码部分中。有没有办法将用户指定的关键字添加到 Visual Studio，以便以某种方式突出显示这些关键字？例如，在 vim 中，单词 TODO 会自动突出显示。

例如，我想看到这样的东西：

`//This is a stub -`***`TODO:`***`move this to another project`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-03-11T03:47:13.207

在工具菜单中，转到选项 -> 环境 -> 任务列表。在这里您可以输入代币。

这些标记将添加到任务列表中，但*不会*突出显示。这可以通过一种[可用的 TODO 荧光笔](https://marketplace.visualstudio.com/items?itemName=ygoe.TODOHighlighter)来实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-05T17:05:29.137

正如其他人所说，您需要一个 VS 插件（从 VS 2015 开始）来突出显示文本。对于那些使用 Resharper 的人：

从菜单转到 ReSharper->Options->Tools->To-Do-Items。

添加您的新评论和模式。您可以通过编辑来复制现有的。`Todo`我使用了与我的新评论相同的设置：

```
Title: AnythingYouWant

Regular Expression: `(?<=\W|^)(?<TAG>AnythingYouWant)(\W|$)(.*)`

Put a check "In comments"

Color: Web->Blue

Icon: Normal 
```

并在您的代码中像这样使用它：

// AnyYouWant 此评论以蓝色突出显示

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-11T03:47:19.353

Visual Studio[通过托管包框架支持自定义语法突出显示](https://msdn.microsoft.com/es-es/library/bb165041(v=vs.90).aspx)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-04-08T20:18:08.500

我认为您正在寻找自定义关键字突出显示：http: [//msdn.microsoft.com/en-us/library/zy61y8b8%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/zy61y8b8%28VS.80%29.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-11T03:49:24.730

在 Visual Studio 中：

转到工具 > 选项 > 环境 > 任务列表

在那里您可以添加任何 user=specified 单词，它会在您进行构建和查看任务列表时出现在您的任务列表中，与 //TODO: 出现的方式相同。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-04T22:55:24.233

只有通过扩展才能突出显示任务标记。

如果您有 ReSharper（商业），它将使用相同的颜色突出显示所有任务：字体和颜色 > ReSharper 待办事项。ReSharper 还在垂直错误条纹上标记任务。

VS 2015 的备注（免费）：[https](https://visualstudiogallery.msdn.microsoft.com/32af9cb5-bb6e-4f02-97c6-a172c3ac5445) ://visualstudiogallery.msdn.microsoft.com/32af9cb5-bb6e-4f02-97c6-a172c3ac5445或 VS 2013：[https ://visualstudiogallery.msdn.microsoft.com/87813da0-8f1c- 48a4-b1c4-85dfb7a269a9](https://visualstudiogallery.msdn.microsoft.com/87813da0-8f1c-48a4-b1c4-85dfb7a269a9)可以使用不同的样式突出显示不同的任务标记。

VS 2010-2013 的 VS10x 评论扩展器（免费）也是如此，2015 年的私人测试版：[https ://visualstudiogallery.msdn.microsoft.com/17c68951-7743-40bd-ad35-608706f54a92](https://visualstudiogallery.msdn.microsoft.com/17c68951-7743-40bd-ad35-608706f54a92)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-22T14:48:52.887

我发现并正在使用[这个](https://visualstudiogallery.msdn.microsoft.com/17c68951-7743-40bd-ad35-608706f54a92)用于 VS 2010-2015 的可自定义评论突出显示扩展。

从它的描述中：“......您可以根据前景色来格式化任务注释（TODO、HACK、UNDONE）。”

# messaging - 通过端口监听和接收消息

> ID：633266
> 
> 赞同：0
> 
> 时间：2009-03-11T03:50:46.693
> 
> 标签：messaging

我在 C# 中创建了一个 lanmessenger。而且我有通过端口接收和发送消息的代码，但我对如何使用它们有一个“轻微”的困惑。我是否应该不断调用监听每个事件中接收传入消息的端口的函数？.. 如果是这样，那么我如何调用发送消息的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T03:52:35.190

要么使用**异步方法**（例如[`BeginReceive`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.beginreceive.aspx)），要么查看[**线程**](http://msdn.microsoft.com/en-us/library/ms173178.aspx)...

如果你使用异步方法，你不会被轮询卡住，因为你会在收到数据时收到[回调](http://msdn.microsoft.com/en-us/library/system.asynccallback.aspx)。

如果您使用线程，您可以轮询（例如通过在循环中检查[`Available`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.available.aspx)a 的属性`TcpClient`），并且它不会阻止您的其余代码执行，因为轮询将在它自己的线程中。

# iphone - 是什么导致在 SQLite 中创建日志文件？

> ID：633274
> 
> 赞同：28
> 
> 时间：2009-03-11T03:56:19.520
> 
> 标签：iphone, sqlite

我开始注意到我的 iPhone 应用程序的 SQLite 查询有一个奇怪的行为。每当我执行“INSERT”语句时，都会在我的 db 文件旁边创建一个日志文件（确切的文件名是“userdata.db-journal”）。

如果我正确理解文档，SQLite 会使用此日志文件来回滚以防操作失败。但是操作完成后文件会保留在那里。

我执行了准备、绑定和执行查询的经典步骤（为简单起见，不检查返回值）：

```
sqlite3 *db = NULL;
sqlite3_open( "userdata.db", &db );

sqlite3_stmt *insertStmt = NULL;
const char *query = "INSERT INTO table VALUES(?,?)";
sqlite3_prepare_v2( db, query, -1, &insertStmt, NULL );

sqlite3_bind_int( insertStmt, 1, 0 );
sqlite3_bind_int( insertStmt, 2, 0 );

sqlite3_step( insertStmt );

sqlite3_reset( insertStmt );
sqlite3_clear_bindings( insertStmt );

sqlite3_close( db ); 
```

日志文件是在调用“sqlite3_step”函数后创建的，并一直保留在那里，直到我关闭数据库。我需要做什么才能让它消失？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-11T04:57:01.680

默认情况下，SQLite 在事务开始时创建日志文件，这是一件好事。通常它会在提交时删除文件。

您可以通过 PRAGMA sql 命令更改此行为以简单地截断文件（无需创建/删除）或将其归零。您的 SQLite 版本可能不支持所有选项。

```
PRAGMA journal_mode = DELETE | TRUNCATE | PERSIST | MEMORY | OFF 
```

写入操作通常在您提交之前不会完成，这是通过截断、删除或使日志无效来实现的。

如果这种行为是新的，我无法解释为什么它可能会改变，除了 SQLite 的升级改变了默认行为，或者通过不为每个事务重新打开日志而变得更加复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T04:19:21.290

你为什么想要？

日志文件跟踪数据库中的每笔交易；您*希望*它一直存在，直到您关闭数据库，以便在崩溃后可以重建数据库状态，即使写入缓冲区尚未刷新等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T13:32:48.010

正如 Joe 所说，日志是在事务启动时创建的，而 SQLlite 在您启动语句时会为您创建一个。

要清除该日志并确保该语句已提交给数据库，请使用：

```
sqlite3_finalize(insertStmt); 
```

在你关闭之前。

.journal 文件将消失，您的所有数据都将在您的数据库中很好且安全。

希望这可以帮助。

克里斯。

# objective-c - 如何设计一个静态类？

> ID：633276
> 
> 赞同：1
> 
> 时间：2009-03-11T03:58:20.387
> 
> 标签：objective-c, cocoa, properties, class-design

我想创建一个特殊的类来保存很多值，比如 strName、strNo、intPassword……这样其他几个类就可以修改这个类中的相同值。我想使用点语法来调用它的属性，比如

```
Values.strName = ...; 
```

我不想在每次读/写它的值之前初始化类，因为它的一些值仍在使用中。

我将类称为“值”并使用以下代码对其进行设计：

```
@interface Values : NSObject {
    IBOutlet NSString *strName;
}
@property (nonatomic, copy) NSString *strName;
@end
```

我将“Values.h”导入另一个类并使用

```
 Values.strName = @"Name"; 
```

我不创建“值”对象以避免数据被覆盖。弹出一个错误，说“之前的语法错误”。令牌'。还有其他方法可以创建一个存储全局变量但在使用这些数据时不需要初始化的类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T07:42:15.030

另一个解决这个问题的方法是将变量（或类）添加到 AppDelegate 对象。AppDelegate 很容易变成一团乱麻，但如果这些变量确实是您的应用程序的属性，那么它就是适合它们的地方。

您始终可以使用`[UIApplication sharedApplication].delegate`（您可能需要强制转换）获取对 AppDelegate 的引用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T05:19:21.207

> 我想创建一个特殊的类来保存很多值，比如 strName、strNo、intPassword ......

为什么？将不可变和原始对象放在只读全局变量中没有任何问题：

```
NSString *const strName = @"Name";
const NSInteger intPassword = 0xDEADBEEF; 
```

如果您想将它们作为全局变量添加前缀，“g”（如`gStrName`等）很常见并且可以正常工作。

你可能会说“但全局变量是邪恶的！”，但想想你在说什么：为什么全局变量是邪恶的？

*   因为其他代码可以更改对象。（不可变对象不是这样。）
*   因为其他代码可以替换对象。（对于只读 ( `const`) 变量则不然。）
*   因为两段代码可以使用同一个对象。（如果对象是基本的，例如字符串或整数，则不是问题。）

只要这些抱怨都不适用，全局变量就没有错。它们在 Cocoa 中很常见（例如，它的大多数字符串常量实际上是全局变量）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T04:07:50.443

如果您使用单例模式，那么您可以实现接近此的目标。使用 Matt Gallagher 的“ [SynthesizeSingleton.h](http://snipplr.com/view/10069/synthesize-singleton/) ”助手：

```
// Values.h
#import "SynthesizeSingleton.h"

@interface Values : NSObject {
  ...
}

// props

+ (Values *)sharedValues;
@end

// Values.m
@implementation Values

SYNTHESIZE_SINGLETON(Values);

@synthesize props;

@end 
```

然后使用你的单例：

`NSString *myVal = [[Values sharedValues] someValue];`

或者：

`Values *v = [Values sharedValues];`

`NSString *myVal = v.someValue;`

# tortoisesvn - 如何覆盖我在 TortoiseSVN 中的本地更改？

> ID：633278
> 
> 赞同：22
> 
> 时间：2009-03-11T03:59:25.017
> 
> 标签：tortoisesvn

假设我进行了检查，编辑了一些东西并意识到我想重新下载存储库代码并覆盖我的本地更改而不提交它们。

我下载了一个项目，做了一些编辑，我意识到我不喜欢我的本地更改（我还没有提交）。如何在不删除文件夹的情况下恢复到存储库的当前状态？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-03-11T04:01:54.420

右键单击乌龟 svn-revert

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-11T04:26:54.873

您可以恢复更改（右键单击，这是一个选项），也可以删除有问题的文件并更新。不同之处在于，revert 将恢复到您签出的最后一个版本，而 delete 和 update 将“恢复”到存储库中的最新版本，这取决于您要完成的工作。哦，可以在不访问存储库的情况下进行还原，而删除和更新则不能。

Andy 补充了一个很好的观点，即差异是为了确保您丢弃您认为您正在丢弃的东西。很多时候，我忘记了我所做的改变，并且比我想象的要多得多。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-11T04:42:26.473

从资源管理器上下文菜单、TortoiseSVN、Revert（您可能已经将一些常用命令从 Tortoise 子菜单上移到主上下文菜单）。

但是，**在 reverting 之前**，我会做一个 diff（上下文菜单，TortoiseSVN，Diff 与以前的版本），以确保你只是扔掉你认为你要扔掉的东西。

很容易只考虑最近的更改而忘记您还没有提交您想要保留的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-11T04:02:07.337

恢复。

当您右键单击您更改的文件时，它应该出现在菜单中。那应该会丢失您的更改。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-11T04:04:43.977

如果您只是更新，那么 Subversion 会将存储库中所做的更改合并到您的本地副本中。更新不会导致您的更改被发送到存储库。

要从工作副本中删除更改，请选择要恢复的文件/目录，然后从 TortoiseSVN 菜单中选择恢复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-11T04:01:49.350

只需删除包含这些文件的文件夹（不是 svn delete，而是文件系统删除），然后从公共根目录同步以替换它们。

# sql-server - ASP.NET、SQL 中的在线提醒服务是什么概念？

> ID：633279
> 
> 赞同：0
> 
> 时间：2009-03-11T04:01:17.853
> 
> 标签：sql-server, asp.net-2.0, reminders

我想在 ASP.NET 2.0 (C#) 和 SQL2005 中开发在线提醒服务。但我没有得到提醒服务的概念。我所知道的是使用在线提醒服务，我可以安排未来日期的提醒，该提醒会在该日期通过电子邮件或短信发送给我（安排提醒的人）。但是在 asp.net 中如何做到这一点，因为任何人都可以为任何日期安排提醒，我们如何知道何时将该邮件发送给该人。我们必须放一些循环或什么。

所以请指导我，在线提醒服务的概念是什么以及如何使用 ASP.NET 和 SQL 轻松开发此应用程序

**已编辑**

我在共享主机服务器上，因此该解决方案必须能够在共享主机上运行。

或者

请告诉我是否有人知道任何免费和开源的提醒服务 CMS，我可以下载并研究它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T04:06:39.960

大多数情况下，这是一个两部分的应用程序，用于输入提醒的前端 UI 和用于检查预定事件并实际发送通知的服务。

ASP.NET 应用程序是基于每个请求的，因此您通常不会让长时间运行的进程从应用程序本身进行后台工作。查找一些调度 Web 应用程序的示例可能会对您有所帮助，这样您就可以了解通常发生的情况。

编辑：
如果应用程序必须是共享主机上的独立 Web 应用程序，我没有任何建议。我不建议使用该设置来实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T04:10:28.237

您可能需要某种后端流程来查找需要发送提醒的项目。这*可能*是 ASP.Net 工作进程中的后台线程（在 global.asx 中的 Application_Start 中启动），但更有可能是在后台运行的 Windows 服务。它可以在与 Web 应用程序相同的服务器上运行（可能在较小的系统上）或在自己的专用机器上运行。

无论哪种方式，它都不像您期望的那样微不足道，因为在您的检查频率和提醒的滞后时间之间需要进行平衡。

哦，为什么 ASP.Net 2.0，当 3.5 是“当前”时？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-13T10:39:15.263

是的，您需要的关键是某种调度程序 - 通常您会使用以下之一：

*   服务器上的 Windows 服务
*   SQL 作业
*   在服务器上计划的 CRON 或 AT 作业

其中任何一个都可以设置为调用您网站上的一个页面，该页面将启动此过程。

由于您处于共享环境中，因此您可能无法访问其中任何一个，因此需要有一些其他流程。

您可以做的是让远程（到服务器）调度程序调用您网站上的一个页面，该页面执行查找并发送电子邮件 - 这可能是您的开发/办公环境中运行的东西（伴随着电源/网络的所有危险故障等），或者您可以查看“站点监控”服务，该服务将定期 ping 您服务器上的页面以检查它是否已启动并运行。

然后它点击的页面将：

1.  检查标志以查看是否已发送今天的警报。
2.  更新标志以说明发送正在进行中。
3.  搜索今天的警报。
4.  发送今天的警报。
5.  更新标志以说明警报已发送。

我们基本上有一个 SQL 作业，它在我们的网络服务器上调用这样的页面来发送每日警报，它通常工作得很好。

远程服务器没有理由无法调用该页面来启动此过程。

这类事情有多种选择：

*   [托管 Cron](http://www.webbasedcron.com/)
*   [PingDom](http://www.pingdom.com/)

只是一对，我相信还有更多。

# c - 用于计算平均值、中位数、众数、其他统计数据的 c 库？

> ID：633282
> 
> 赞同：1
> 
> 时间：2009-03-11T04:01:39.927
> 
> 标签：c, statistics, numbers

是否有任何 c（或 c++）库可以获取一组数字并对其进行基本统计分析（均值、中位数、众数，以及其他任何有趣的东西）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-11T04:25:50.773

GNU 科学库 ( [GSL](https://www.gnu.org/software/gsl/) ) 提供了该功能。 [另一个人提到的Apophenia](http://apophenia.info/)似乎在 GSL 之上提供了一层。GSL 需要记住的是，它通常是许多功能的缓慢实现。例如，它的平均计算在循环内执行除法，以确保结果的最佳可能精度。在许多应用中，这种成本不值得精确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T04:15:57.600

有[阿波芬尼亚](http://apophenia.sourceforge.net/)。我自己没用过。你真的希望它是 C 可调用的吗？[R 环境](http://www.r-project.org/)为您提供了几乎所有东西，以及一袋筹码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T04:20:13.970

如果你想做更高级的分析，有一些不错的库，比如[GSL](http://www.gnu.org/software/gsl/)、[TNT](http://math.nist.gov/tnt/)、[Blitz++](http://www.oonumerics.org/blitz/)、[VxL](http://vxl.sourceforge.net/)和各种[Boost](http://www.boost.org/doc/libs/1_38_0/libs/libraries.htm#Math)库。其中大多数是相当重量级的库，比一些简单的函数更复杂，但它们也更强大。

如果您需要进行大量统计处理，您可能会考虑使用更适合它的语言，例如[R](http://www.r-project.org/)、[Matlab](http://www.mathworks.com/)、[SciPy](http://www.scipy.org/) for Python 等。

# c# - 可空类型：在 c# 中检查空或零的更好方法

> ID：633286
> 
> 赞同：95
> 
> 时间：2009-03-11T04:04:15.833
> 
> 标签：c#, null, zero

我正在做一个项目，我发现我在很多很多地方检查以下内容：

```
if(item.Rate == 0 || item.Rate == null) { } 
```

更多的是好奇，检查这两种情况的最佳方法是什么？

我添加了一个辅助方法，它是：

```
public static bool nz(object obj)
{
    var parsedInt = 0;
    var parsed = int.TryParse(obj.ToString(), out parsedInt);
    return IsNull(obj) || (parsed && parsedInt == 0);
} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2009-03-11T04:08:26.587

我喜欢`if ((item.Rate ?? 0) == 0) { }`

**更新1：**

您还可以定义一个扩展方法，例如：

```
public static bool IsNullOrValue(this double? value, double valueToCheck)
{
    return (value??valueToCheck) == valueToCheck;
} 
```

并像这样使用它：

`if(item.IsNullOrValue(0)){}` // 但你并没有从中得到太多

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-15T13:32:36.250

虽然我很喜欢接受的答案，但我认为，为了完整起见，也应该提到这个选项：

```
if (item.Rate.GetValueOrDefault() == 0) { } 
```

这个解决方案

*   不需要额外的方法，
*   比所有其他选项都快，因为[GetValueOrDefault 是单个字段读取操作](http://ericlippert.com/2012/12/20/nullable-micro-optimizations-part-one/)¹ 和
*   比阅读更容易`((item.Rate ?? 0) == 0)`（不过，这可能是一个口味问题）。

* * *

¹但这不应该影响您的决定，因为这些类型的微优化不太可能产生任何影响。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2009-03-11T04:39:24.470

使用泛型：

```
static bool IsNullOrDefault<T>(T value)
{
    return object.Equals(value, default(T));
}

//...
double d = 0;
IsNullOrDefault(d); // true
MyClass c = null;
IsNullOrDefault(c); // true 
```

如果`T`是*引用类型*，`value`将与`null`( `default(T)`) 进行比较，否则，如果`T`是 a `value type`，假设为 double，`default(t)`则为 0d，对于 bool 是`false`，对于 char 是`'\0'`等等...

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-03-11T06:13:17.660

这实际上只是 Freddy Rios 仅使用泛型接受的答案的扩展。

```
public static bool IsNullOrDefault<T>(this Nullable<T> value) where T : struct
{
    return default(T).Equals( value.GetValueOrDefault() );
}

public static bool IsValue<T>(this Nullable<T> value, T valueToCheck) where T : struct
{
    return valueToCheck.Equals((value ?? valueToCheck));
} 
```

**注意**我们不需要检查 default(T) 是否为 null，因为我们正在处理值类型或结构！这也意味着我们可以安全地假设 T valueToCheck 不会为空；还记得那个T吗？是简写 Nullable<T> 所以通过将扩展添加到 Nullable<T> 我们得到 int?, double?, bool? 中的方法 等等

**例子：**

```
double? x = null;
x.IsNullOrDefault(); //true

int? y = 3;
y.IsNullOrDefault(); //false

bool? z = false;
z.IsNullOrDefault(); //true 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-11T04:11:29.123

我同意使用 ?? 操作员。

如果您正在处理字符串，请使用 if(String.IsNullOrEmpty(myStr))

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-11T04:14:47.617

您的代码示例将失败。如果 obj 为 null，则 obj.ToString() 将导致 null 引用异常。我会缩短该过程并在您的辅助函数开始时检查 null obj。至于您的实际问题，您要检查的类型是 null 还是零？在 String 上有一个很棒的 IsNullOrEmpty 函数，在我看来这将是一个很好的使用扩展方法来在 int 上实现 IsNullOrZero 方法？类型。

编辑：记住，“？” 只是 INullable 类型的编译器糖，因此您可以将 INullable 作为参数，然后将其与 null (parm == null) 进行比较，如果不是 null，则与零进行比较。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-11T04:50:11.730

> 有没有更好的办法？

好吧，如果您真的在寻找更好的方法，您可能可以在 Rate 之上添加另一层抽象。好吧，这是我刚刚想出的使用 Nullable 设计模式的东西。

```
使用系统；
使用 System.Collections.Generic；

命名空间 NullObjectPatternTest
{
    公开课程序
    {
        公共静态无效主要（字符串[]参数）
        {
            var items = 新列表
                            {
                                新项目（RateFactory.Create(20)），
                                新项目（RateFactory.Create（空））
                            };

            PrintPricesForItems(项目);
        }

        私有静态无效 PrintPricesForItems（IEnumerable 项目）
        {
            foreach (var item in items)
                Console.WriteLine("商品价格：{0:C}", item.GetPrice());
        }
    }

    公共抽象类 ItemBase
    {
        公共抽象费率{得到; }
        公共 int GetPrice()
        {
            // 无需检查 Rate == 0 或 Rate == null
            返回 1 * Rate.Value；
        }
    }

    公共类项目：ItemBase
    {
        私有只读速率_Rate；
        公共覆盖率率 { 得到 { 返回 _Rate; } }
        公共项目（费率）{ _Rate = 费率；}
    }

    公共密封类 RateFactory
    {
        公共静态速率创建（int？rateValue）
        {
            如果 (!rateValue || rateValue == 0)
                返回新的 NullRate();
            返回新的速率（rateValue）；
        }
    }

    公开课率
    {
        公共 int 值 { 获取；放; }
        public virtual bool HasValue { get { return (Value > 0); } }
        公共利率（整数值）{价值=价值；}
    }

    公共类 NullRate : 率
    {
        公共覆盖 bool HasValue { get { return false; } }
        公共 NullRate() : 基数(0) { }
    }
}

```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-29T11:48:07.320

C#9：你可以写

```
if (item.Rate is null or 0) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-11T04:11:23.773

```
public static bool nz(object obj)
{
    return obj == null || obj.Equals(Activator.CreateInstance(obj.GetType()));
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-03-11T04:15:46.540

```
class Item{  
 bool IsNullOrZero{ get{return ((this.Rate ?? 0) == 0);}}
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-11T05:14:16.117

不要忘记，对于字符串，您始终可以使用：

```
String.IsNullOrEmpty(str) 
```

代替：

```
str==null || str=="" 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-04T07:46:05.310

使用 C# 7.0 或更高版本，您可以使用`is`关键字将对象与这样的模式匹配：（请参阅[is 运算符 - C# 参考 | Microsoft](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/is)）

```
if (item is { Rate: 0 or null })
{
  // Do something
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-10-19T07:37:31.307

[比Joshua Shannon](https://stackoverflow.com/users/69077/joshua-shannon)的好[回答](https://stackoverflow.com/a/633514/3095779)更进一步。现在防止[装箱/拆箱](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/boxing-and-unboxing)：

```
public static class NullableEx
{
    public static bool IsNullOrDefault<T>(this T? value)
        where T : struct
    {
        return EqualityComparer<T>.Default.Equals(value.GetValueOrDefault(), default(T));
    }
} 
```

# objective-c - 什么是参考插座？

> ID：633295
> 
> 赞同：16
> 
> 时间：2009-03-11T04:10:26.270
> 
> 标签：objective-c, cocoa

我最近刚刚将我的 Xcode 3 副本升级到 Xcode 3.1，我注意到界面生成器中有一些新的东西 - 引用出口。谁能解释什么是引用插座，以及它们与 mac 开发的关系？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-11T05:29:30.013

这些是设置到相关对象的出口。例如，如果您选择作为窗口委托的对象，则窗口的`delegate`出口将显示为对象的引用出口之一。如果它不是窗口的代表，您可以通过从“新引用出口”圈拖动到窗口，然后单击窗口的`delegate`出口来实现。

这不是一种新的出口。它只是从插座中的对象而不是拥有插座的对象的角度查看相同的插座*。*

# java - 有人知道针对低内存使用优化的 java.util.Map 实现吗？

> ID：633299
> 
> 赞同：8
> 
> 时间：2009-03-11T04:13:21.677
> 
> 标签：java, optimization, collections

我查看了通常的地方（apache commons，google），但找不到...

它应该是开源的。

几乎是在寻找一个基于链表的。用例是 10'000 的地图，其中的值不一定很多。它不需要按比例放大，因为当它变得太大时我可以转换它。

一些数字，大小使用一些计算出来的jvm值（8bytes/java.lang.Object, 4bytes/ref）HashMap大约是100+32n字节，理论上最好是12+20*n。<-- 我想要那个，对于小 n。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T07:00:29.373

可以看看 commons-collections [Flat3Map](http://commons.apache.org/collections/api-release/org/apache/commons/collections/map/Flat3Map.html)，它被优化为在 3 个字段中存储 3 个值并在 4 处溢出到另一个地图。

我还没有看过实现，但它可能值得考虑。唯一的问题是，由于 commons-collections 与 1.3 兼容，因此没有泛型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T09:16:27.813

用 Map 接口包装一个 ArrayList。ArrayList 本身只使用几个字节。每个节点需要两个指针，一个指向键，一个指向值。使用顺序搜索来查找值。只要条目很少，性能就OK[*]。这将使您有余地为您拥有大量价值的少数花瓶使用真实地图。

*：假设您的平均地图大小为 10。今天的计算机每秒可以比较大约 1 亿个键，因此每次查找平均花费不到 5 微秒。

如果性能对于您的用例来说仍然太差，您可以尝试按键对数组进行排序并使用二进制搜索。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-11T19:10:03.813

好的，最后自己实现了。我做了一个速度比较，发现与 HashMap 相比，它在 4 个条目时仍然稍快，但在 5 个或更多条目时较慢。我用一个长长的键列表进行了测试，我试图给出一个与随机英语单词列表类似的组成。

```
import java.util.*;

// PUBLIC DOMAIN
public class SmallMap extends AbstractMap {

    private Entry entry = null;

    public void clear() { entry = null; }
    public boolean isEmpty() { return entry==null; }    
    public int size() {
        int r = 0;
        for(Entry e = entry; e!=null; e = e.next) r++;
        return r;
    }

    public boolean containsKey(Object key) {
        for(Entry e = entry; e!=null; e = e.next){
            if(e.key.equals(key)){
                return true;
            }
        }
        return false;
    }

    public boolean containsValue(Object value) {
        for(Entry e = entry; e!=null; e = e.next){
            if(e.value==null){
                if(value==null) return true;
            }else if(e.value.equals(value)){
                return true;
            }
        }
        return false;
    }

    public Object get(Object key) {
        for(Entry e = entry; e!=null; e = e.next){
            if(e.key.equals(key)){
                return e.value;
            }
        }
        return null;
    }

    public Object put(Object key, Object value) {
        for(Entry e = entry; e!=null; e = e.next){
            if(e.key.equals(key)){
                Object r = e.value;
                e.value = value;
                return r;
            }
        }
        entry = new Entry(key, value, entry);
        return null;
    }

    public Object remove(Object key) {
        if(entry!=null){
            if(entry.key.equals(key)){
                Object r = entry.value;
                entry = entry.next;
                return r;
            }
            for(Entry e = entry; e.next!=null; e = e.next){
                if(key.equals(e.next.key)){
                    Object r = e.next.value;
                    e.next = e.next.next;
                    return r;
                }
            }
        }
        return null;
    }

    public Set entrySet() { return new EntrySet(); }

    class EntrySet extends AbstractSet{
        public Iterator iterator() {
            return new Iterator(){

                Entry last = null;
                Entry e = entry;
                public boolean hasNext() { return e!=null; }

                public Object next() { 
                    last = e;
                    e = e.next;
                    return last;
                }

                public void remove() { 
                    if(last == null) throw new IllegalStateException();
                    SmallMap.this.remove(last.key);
                }
            };
        }

        public int size() { return SmallMap.this.size();}
    }

    static private class Entry implements java.util.Map.Entry {
        final Object key;
        Object value;
        Entry next; 
        Entry(Object key, Object value, Entry next){
            if(key==null) throw new NullPointerException();
            this.key = key;
            this.value = value;
            this.next = next;
        }
        public Object getKey() { return key; }
        public Object getValue() { return value; }
        public Object setValue(Object value) { 
            Object r = this.value;
            this.value = value;
            return r;
        }
        public int hashCode() {
            return (key   == null ? 0 :   key.hashCode()) ^
               (value == null ? 0 : value.hashCode());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-11T04:45:30.600

简单来说，我推荐使用JDK的HashMap、Hashtable和ConcurrentHashMap中的一种，这取决于同步或并发的要求。如果您决定使用它们，在构造函数中适当地设置 initialCapacity 和 loadFactor 可能会有所帮助。

Google collections 和 apache commons collections 提供了更多的特性：LRUMap、ReferenceMap、MultikeyMap 等等。但我认为不仅仅是小尺寸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-11T05:40:56.537

`LinkedHashMap`我认为使用链表，但我怀疑它是否针对低内存使用进行了优化。通常地图的全部目的是加快从键到值的查找，这解释了为什么您在常见的地方找不到您需要的东西。编写您自己的实现可能是最简单的`Map`，也许您甚至可以发布代码以防其他人需要相同的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-11T06:31:41.830

以隐藏地图使用的方式编写代码（无论如何你都应该这样做，听起来你也是如此）。在重要的时候，因为您已经分析了代码并且可以看到内存确实是一个问题，所以找到一个:-)

如果您此时知道存在问题，那么，对不起，我不知道。然而，人们经常会处理这样的“想法”，即代码会变慢/占用大量内存等……并开始尝试预先优化它，而不是使代码正确。

也就是说，如果你正在写一些你知道这很重要的东西，你应该在你去的时候进行衡量。例如，我正在编写代码来解析类文件，我做了一个小改动，然后看看它是如何影响性能的。例如，我知道我所做的更改（3 行）使我的程序运行速度慢了 4 倍......我当时花时间去寻找更快的方法。

另外，如果“n”的值很小，你确定需要地图吗？也许列表足够快？您是否也尝试过调整现有 Map 以使其使用更少的内存？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-11T09:59:25.700

这在很大程度上取决于您将如何使用这些地图，您能否一次性填充它们然后进行查找（您是否需要*快速*查找）？

使用最少内存的实现是将所有元素放在一个数组中并进行扫描以查找元素（但我想这对您的需求来说不够*快）......*

如果你一开始就知道所有元素，你可以尝试选择一个没有太多冲突的好的哈希方法。

或者，如果您允许缓慢的插入时间，也许您可​​以使用 TreeMap ......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-11T19:52:31.107

也许这个答案有点晚了，但看看[Javolution](http://javolution.org/)项目。它包含许多数据结构的实现，用于嵌入式和实时环境。具体来说，有一个[FastMap](http://javolution.org/api/javolution/util/FastMap.html)类可以做你想做的事。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-12T00:52:15.707

如果您`String`只存储 s，请查看[http://code.google.com/p/flatmap](http://code.google.com/p/flatmap)

**编辑**哦，对不起，我看到你正在寻找小而不是大的地图，那么忘记我的建议。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-01T18:59:10.817

我知道这是一个老问题，但也许有人可以添加更多想法。

注意：以下内容仅对特定的用例子集才真正有意义：

如果要求包括*高度重叠*的键集（在极端情况下，所有映射的键集相同），那么一个*非常*有效的解决方案可能是“外部化”映射的键并让映射只包含值，在大批。

实现不应该“结构上”依赖于重叠因子，但我的表现更好，键重叠越多。如你所料。

我不能给出我的实现的确切细节，但重要的是要有一个合适的机制来将键（存储在你的地图对象之外）转换为值数组的索引，同时还允许值数组保持*紧凑*，即长度为 5如果您的地图包含五个映射。

假设所有此类地图的键位于单独的地图中，映射到数字。然后是有一种方法来关联数字和数组索引。

抱歉，如果这不够具体，但我认为这个想法既有趣又简单，可以用作开发内存高效地图的替代方向。

同样，它本质上适合高“关键重叠”用例，但本身是通用的。如果重叠太低，可能会出现性能问题，具体取决于实现细节。

# php - 你如何让 PHP 返回时区缩写 AEST？

> ID：633300
> 
> 赞同：0
> 
> 时间：2009-03-11T04:13:31.600
> 
> 标签：php, timezone

我似乎找不到让 Pear 的 Date 类（或 PHP 的 date 函数）返回 AEST 作为时区澳大利亚/墨尔本时区缩写的方法。它总是返回 EST。我尝试了所有打印出 Date::format、format2、format3 中可用时区的方法。有人知道怎么修这个东西吗？我正在运行 PHP 5.1.6、Pear Date 1.5.0a1 和最新的 PECL timezonedb。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T04:27:48.303

您是否检查过澳大利亚/墨尔本时区数据库中的内容？它可能是基于[奥尔森](ftp://elsie.nci.nih.gov/pub/)数据库的，当我上次查看（2009a 版）时，它仍然说 EST 是澳大利亚/墨尔本的缩写。因此，除非您已将时区数据库固定为 AEST，否则很可能会继续说 EST。这已经在 TZ 邮件列表上讨论过几次；没有一个确定的答案，所以缩写保持不变。

# swt - 如何确定 JFace TreeViewer 或 SWT 树的首选大小？

> ID：633305
> 
> 赞同：2
> 
> 时间：2009-03-11T04:15:13.827
> 
> 标签：swt, jface

我正在编写一个 Eclipse 插件，它有一个悬停控件，由两个控件组成，一个在另一个之上：

我可以轻松计算大小提示的 HTML 查看器 (BrowserInformationControl)

包含树的 TreeViewer。

我已经用实际内容建立了我的树。但是，我找不到一种方法来计算树的大小或渲染后的大小提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T05:12:01.817

根据[**org.eclipse.swt.widgets.Tree**](http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Tree.html)的 API ，这应该通过以下方式完成：

```
public Point computeSize(int wHint,
                     int hHint,
                     boolean changed) 
```

> 控件的首选大小是它最适合显示的大小。
> 
> 宽度提示和高度提示参数允许调用者询问控件问题，例如“给定特定宽度，控件需要多高才能显示所有内容？”
> 为了表明调用者不希望约束特定维度，为提示传递常量 SWT.DEFAULT。
> 
> 如果 changed 标志为真，则表明接收器的内容已更改，因此包含控件的布局管理器可能一直保留的任何缓存都需要刷新。当控件调整大小时，更改标志将为 false，因此可以保留布局管理器缓存。

* * *

请注意，在 Windows 上， 的行为`computeSize()`存在缺陷：请参阅此[消息](http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg07850.html)和此[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=49724)：已为 eclipse 3.4M1 及更高版本修复。

[此消息](http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg39331.html)`computeSize()`中的使用示例。

的使用`getBound()`可能是另一个[有趣的选择](http://dev.eclipse.org/newslists/news.eclipse.platform.swt/msg37492.html)。

# documentation - 在 SCM 中，什么是物料清单？

> ID：633309
> 
> 赞同：6
> 
> 时间：2009-03-11T04:16:25.040
> 
> 标签：documentation, version-control

在阅读有关 SCM（软件配置管理，而不是供应链管理）的信息时，我看到提到“材料清单”作为构建提供的文档。物料清单文件包含哪些内容，其目的是什么？

这是一个常用的文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T07:05:58.657

SCM 的“物料清单”(BOM) 的实际内容和含义取决于所使用的工具和车间。粗略地说，它们往往只是用于构建系统/产品/组件的文件的简单列表。

**除非 BOM 包含有关其列表中每个文件的 **版本信息，否则 BOM 不能完整。****

**在过去的 10 年里，我一直积极支持 SCM 系统，我们从未使用过这个术语。我之前在制造业中看到过“材料清单”（BOM）这个术语的地方，它意味着用于组装产品的所有物理部件。**

**在与我合作的高科技公司中，我们使用了相同的概念，*即在某个时间点用于构建软件的版本指定文件列表。*事实上，这些文件的列表（带有版本号）专门用于验证产品的哪些部分在版本之间发生了变化。**

**记住版本号，没有这些，列表不是很有用。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T04:22:56.710

它是安装模块中每个组件的枚举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T04:21:46.400

SCM = 供应链管理？软件配置管理？源代码管理？请编辑您的问题。

无论如何，物料清单通常指的是列出构成“项目”的部件和子部件的文档，如果通常是嵌套结构，即项目由其他项目组成，这些项目仍然由其他项目。item 的定义显然因用途而异，但举个例子：

```
Car
   1x Steering Wheel
      2ft Leather
      1 horn
   4x Normal Wheels
      1 Tire
      1 Hub
      7 Lug Nuts
   1x Radio 
```

在此示例中，这些行中的每一行都是“项目”，但 Car 项目由一个方向盘、4 个轮子和一个收音机组成。但是，每个车轮由 1 个轮胎、1 个轮毂和 7 个凸耳螺母组成。

在软件配置管理中，想法保持不变，但现在您列出了构成“包”的软件部分，而这些软件部分本身可能有部分。相同的想法，只是“项目”的不同定义。

# sql - 如何按名称访问 postgres 表？

> ID：633328
> 
> 赞同：1
> 
> 时间：2009-03-11T04:28:33.403
> 
> 标签：sql, database, postgresql

**按名称访问表**

我需要通过给我的字符串值来引用表名。我将如何在 Postgres 中执行此操作？可以选择使用带有 PLPGSQL 的存储过程，但是其他语言将不可用。

例如：

```
SELECT count(*) FROM some_function_that_returns_data_by_table_name('mytable'); 
```

我有一种感觉，我很久以前就使用 pg_XXX 表和大量的连接来做到这一点，但我现在似乎不知道该怎么做。有没有人有任何想法？

虽然我可以在应用程序级别生成名称，但如果我可以按名称访问表，那将是理想的，这样代码可以更简单，在不同的应用程序之间轻松共享，并可能在存储过程中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T11:18:53.043

如果可以接受使用 PL/pgSQL，请查看[EXECUTE](http://www.postgresql.org/docs/current/static/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T04:31:19.810

为什么你不能简单地分 3 步做到这一点？

1.  调用给出名称的函数
2.  使用名称创建 SQL
3.  执行 SQL

# django-models - Django 模型 - 使用 ManyToManyField add() 方法的问题

> ID：633333
> 
> 赞同：2
> 
> 时间：2009-03-11T04:31:08.857
> 
> 标签：django-models

我在使用下面的 add() 方法时遇到问题...

```
class JobRecord(models.Model):
    """JobRecord model"""

    project             = models.ForeignKey(Project)
    date                = models.DateField()
    supervisor          = models.ForeignKey(User, related_name='supervisor_set')

    operators           = models.ManyToManyField(User, related_name='operators_set', help_text='Include the supervisor as an operator here also.')

    vehicles            = models.ManyToManyField(Vehicle, blank=True, null=True)

    def __unicode__(self):
        return u"%s - %s" % (self.project.name,  self.date.strftime('%b %d'))

    def save(self, **kwargs):
        super(JobRecord, self).save(**kwargs)
        if not self.operators.filter(pk=self.supervisor.pk):
            self.operators.add(self.supervisor)
            print self.operators.values() 
```

奇怪的是，该`print self.operators.values()`行显示了正确的值，但是，在 django admin 中检查记录后，主管并没有被保存为操作员。

IE。

```
self.operators.add(self.supervisor) # fails to commit 
```

我在这里需要什么魔法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-01-03T18:31:24.440

我随机发现了这个问题，所以可能不是真的，但你应该先保存 self.supervisor ：

```
def save(self, **kwargs):
    super(JobRecord, self).save(**kwargs)
    if not self.operators.filter(pk=self.supervisor.pk):
        self.supervisor.save()
        self.operators.add(self.supervisor)
        print self.operators.values() 
```

# c# - 如何将双精度值转换为最接近的整数值？

> ID：633335
> 
> 赞同：163
> 
> 时间：2009-03-11T04:32:05.237
> 
> 标签：c#, rounding

如何将 double 转换为最接近的 int？

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2009-03-11T04:34:09.460

```
double d = 1.234;
int i = Convert.ToInt32(d); 
```

[参考](http://msdn.microsoft.com/en-us/library/ffdk7eyz.aspx)

像这样处理舍入：

> 四舍五入到最接近的 32 位有符号整数。如果 value 在两个整数的中间，则返回偶数；即4.5转换为4，5.5转换为6。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2009-03-11T04:33:57.323

使用`Math.round()`，可能与`MidpointRounding.AwayFromZero`

例如：

```
Math.Round(1.2) ==> 1
Math.Round(1.5) ==> 2
Math.Round(2.5) ==> 2
Math.Round(2.5, MidpointRounding.AwayFromZero) ==> 3 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2011-11-10T09:03:38.010

您还可以使用功能：

```
//Works with negative numbers now
static int MyRound(double d) {
  if (d < 0) {
    return (int)(d - 0.5);
  }
  return (int)(d + 0.5);
} 
```

根据架构的不同，它会快几倍。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-03-11T04:34:34.700

```
double d;
int rounded = (int)Math.Round(d); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-09T15:45:03.890

我知道这个问题很老，但我在寻找类似问题的答案时遇到了它。我想我会分享我得到的非常有用的提示。

转换为 int 时，只需`.5`在向下转换之前添加您的值。由于向下转换`int`总是下降到较低的数字（例如`(int)1.7 == 1`），如果您的数字大于`.5`或等于，添加`.5`会将其带到下一个数字，并且您的向下转换`int`应该返回正确的值。（例如`(int)(1.8 + .5) == 2`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-12T14:32:14.033

对于 Unity，请使用[Mathf.RoundToInt](https://docs.unity3d.com/ScriptReference/Mathf.RoundToInt.html)。

```
using UnityEngine;

public class ExampleScript : MonoBehaviour
{
    void Start()
    {
        // Prints 10
        Debug.Log(Mathf.RoundToInt(10.0f));
        // Prints 10
        Debug.Log(Mathf.RoundToInt(10.2f));
        // Prints 11
        Debug.Log(Mathf.RoundToInt(10.7f));
        // Prints 10
        Debug.Log(Mathf.RoundToInt(10.5f));
        // Prints 12
        Debug.Log(Mathf.RoundToInt(11.5f));

        // Prints -10
        Debug.Log(Mathf.RoundToInt(-10.0f));
        // Prints -10
        Debug.Log(Mathf.RoundToInt(-10.2f));
        // Prints -11
        Debug.Log(Mathf.RoundToInt(-10.7f));
        // Prints -10
        Debug.Log(Mathf.RoundToInt(-10.5f));
        // Prints -12
        Debug.Log(Mathf.RoundToInt(-11.5f));
    }
} 
```

[来源](https://github.com/Unity-Technologies/UnityCsReference/blob/86ce57f70f76576207924c1757dca4d310fcfca7/Runtime/Export/Mathf.cs#L154)

```
public static int RoundToInt(float f) { return (int)Math.Round(f); } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-16T16:24:03.557

`OverflowException`如果浮点值超出 Int 范围，则其他答案中的方法会抛出。[https://docs.microsoft.com/en-us/dotnet/api/system.convert.toint32?view=netframework-4.8#System_Convert_ToInt32_System_Single_](https://docs.microsoft.com/en-us/dotnet/api/system.convert.toint32?view=netframework-4.8#System_Convert_ToInt32_System_Single_)

```
int result = 0;
try {
    result = Convert.ToInt32(value);
}
catch (OverflowException) {
    if (value > 0) result = int.MaxValue;
    else result = int.Minvalue;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2011-04-12T01:33:10.440

我正在开发一个带有 Int 按钮的科学计算器。我发现以下是一个简单、可靠的解决方案：

```
double dblInteger;
if( dblNumber < 0 )
   dblInteger = Math.Ceiling(dblNumber);
else
   dblInteger = Math.Floor(dblNumber); 
```

Math.Round 有时会产生意外或不希望的结果，并且显式转换为整数（通过强制转换或 Convert.ToInt...）通常会为更高精度的数字产生错误的值。上述方法似乎总是有效。

# c# - 如何覆盖基类方法并添加参数

> ID：633336
> 
> 赞同：6
> 
> 时间：2009-03-11T04:32:45.140
> 
> 标签：c#, architecture

我的基类中有这个：

```
protected abstract XmlDocument CreateRequestXML(); 
```

我尝试在派生类中覆盖它：

```
protected override XmlDocument CreateRequestXML(int somevalue)
{
    ...rest of code
} 
```

我知道这是一个简单的问题，但是因为我已经介绍了一个参数，所以这是问题所在吗？问题是，一些派生类在其实现中可能有也可能没有参数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-11T04:34:35.043

当您重写一个方法时，除了单词 override 代替 virtual 或 abstract 之外，它必须具有与原始方法完全相同的签名。

您在这里所做的是创建一个新的不相关的方法。不可能引入参数并仍然覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T05:55:20.467

如果某些派生类需要参数而有些不需要，则需要该方法的两个重载版本。然后每个派生类都可以覆盖它需要的类。

```
class Foo {    
    protected abstract XmlDocument CreateRequestXML(int somevalue);
    protected abstract XmlDocument CreateRequestXML();
};

class Bar : public Foo {    
    protected override XmlDocument CreateRequestXML(int somevalue) { ... };
    protected override XmlDocument CreateRequestXML()
        { CreateRequestXML(defaultInt); }
}; 
```

这当然会引入用户调用错误的问题。如果额外参数没有可接受的默认值，如果调用了错误的版本，您可能必须在派生类中抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T04:34:20.597

是的，参数是问​​题，方法签名必须完全匹配（包括返回值和参数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T06:57:00.613

我很好奇你想用这段代码完成什么。

通常，当使用类知道其签名时，您会定义一个抽象函数。使用类与您的基类有“合同”。

当您想从基类派生并添加其他参数时，使用类如何知道在基类上调用什么？

它看起来像一个架构缺陷......但也许你可以在初始主题中添加一些额外的信息。

# google-visualization - 如何更改 Google Chart API 中地图边框的颜色？

> ID：633350
> 
> 赞同：1
> 
> 时间：2009-03-11T04:39:57.853
> 
> 标签：google-visualization

有没有办法可以在 Google Chart API 提供的地图中更改国家边界的颜色？

正如你所看到的，我喜欢的边框有点太突出了。

![](https://chart.apis.google.com/chart?cht=t&chs=440x220&chtm=world&chco=404F64,DDFFDD,006600&chf=bg,s,344152&chld=AEAUBECAFRILITJPMXMYNLNZSEUKUSZA&chd=s:BbENBKBBBBNCBDfC)

如果你想玩它，这是 URL：

```
http://chart.apis.google.com/chart
  ?cht=t
  &chs=440x220
  &chtm=world
  &chco=404F64,DDFFDD,006600
  &chf=bg,s,344152
  &chld=AEAUBECAFRILITJPMXMYNLNZSEUKUSZA
  &chd=s:BbENBKBBBBNCBDfC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T15:49:24.610

不幸的是，据我所知，此选项在 Google Chart API 中不可用。[您可以随时在Google Chart API Group 列表中](http://groups.google.com/group/google-chart-api/topics)提及此功能请求

# css - 做一个不与顶部重叠的固定顶栏的最佳方法是什么？

> ID：633352
> 
> 赞同：7
> 
> 时间：2009-03-11T04:40:08.913
> 
> 标签：css

例如，stackoverflow 有一个新成员的顶栏。顶栏是固定的，向下推页面而不与页面顶部重叠。

这是如何实现的？

Javascript？或者这可以只用css来完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-06-19T18:58:23.347

你可以做这样的事情来创建一个固定的标题：

```
<style>
body { margin: 0; }
div.header { position: fixed; height: 50px; width: 100%; }
div.content { padding-top: 50px; }
</style>

<body>
<div class="header">header</div>
<div class="content">content</div>
</body> 
```

也许在这里查看 ie5.5 / ie6.0 修复：http: [//www.howtocreate.co.uk/fixedPosition.html](http://www.howtocreate.co.uk/fixedPosition.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-19T19:06:33.023

将 Michiel 的代码改编为 ben_h 响应中 OP 的问题。

```
<style type="text/css">
body { margin: 0; }
div.header { position: fixed; height: 50px; width: 100%; }
div.content{ /* normal stuff here */ }

/*** Only selects div.content immediately preceded by div.header.
If div.header doesn't appear, it won't select. ***/
div.header + div.content { padding-top: 50px; }
</style>

<body>
<div class="header">header</div>
<div class="content">content</div>
</body> 
```

我会警告你，老 IE6 不会太喜欢这个，但 Dean Edwards 的 IE7.js 将添加对兄弟选择器 ( `+`) 的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T04:44:50.870

如果 bar 是`position: fixed`，防止它与内容重叠的一种方法是设置一个静态高度，然后在主容器上设置一个具有相同高度的上边距。

如果事先不知道固定 div 的高度，则必须使用 JS 发现它的高度并相应地设置容器边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T05:19:56.527

你应该可以只用 CSS 来做到这一点。

这是一篇关于如何创建 CSS 设计的“圣杯”的精彩文章。

包含三列的页面。一个用于菜单的固定宽度左侧栏，一个用于广告或照片的右侧栏，以及一个随内容流动的可扩展中心。

看：

寻找圣杯： [CSS](http://www.alistapart.com/articles/holygrail "寻找圣杯")

# svn - 更改 SVN 修订的时间戳

> ID：633353
> 
> 赞同：12
> 
> 时间：2009-03-11T04:40:53.123
> 
> 标签：svn, version-control

我们的电源故障耗尽了我们的 UPS，随后关闭了我们的 SVN 机器。当它启动备份时，系统时间不正确。

不幸的是，直到有些人已经提交了更改，才发现这一点。所以现在我们有一些比第一次修订早几年的修订。

有没有办法更正这个日期，所以一切都井井有条？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-11T04:59:18.930

日期/时间是修订的属性。找出修订号（或使用 HEAD），并使用 propset 或 propedit 和 --revprop 对其进行修改。

```
svn propset svn:date 'YYYY-MM-DDTHH:MM:SS.MMMMMMZ' --revprop -r HEAD /path/to/wc/file 
```

您必须尝试使用​​它才能获得正确的设置组合。[您还可以查看高级属性](http://svnbook.red-bean.com/en/1.4/svn.advanced.props.html#svn.advanced.props.manip)下的红皮书。（我链接到 1.4，调整以适合您的版本）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-11T05:03:41.197

更改修订版的 svn:date 属性：

```
svn propset -rXXX --revprop svn:date "2008-03-10T03:00:00.000000Z" 存储库

```

或者使用 TortoiseSVN，显示日志 -> 右键单击​​修订 -> 显示修订属性：

![](https://dl.getdropbox.com/u/35146/svndate.jpg)

您将需要**pre-revprop-change**钩子、一个空的 shell 脚本或批处理文件来完成这项工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-11T05:09:15.163

1.  启用[修订属性更改](http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.pre-revprop-change.html)挂钩
2.  修改[svn:date](http://svnbook.red-bean.com/en/1.5/svn.ref.svn.c.propset.html)属性，如果需要，使用[svnlook 日期。](http://svnbook.red-bean.com/en/1.5/svn.ref.svnlook.c.date.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-08T15:20:37.487

另外，在使用 TortoiseSVN 时，日志是有缓存的，您必须在客户端删除 TortoiseSVN 日志的缓存，以反映服务器上的更改。请参阅[Tortoise SVN 日志消息不更新](https://stackoverflow.com/questions/44837856/tortoise-svn-log-messages-does-not-update)

# jquery - 连接 AJAX 表单的 jQuery 插件 - 必须提供错误回调

> ID：633357
> 
> 赞同：3
> 
> 时间：2009-03-11T04:43:30.450
> 
> 标签：jquery, ajax, unobtrusive-javascript

使用 jQuery 将 AJAX 功能连接到现有表单并允许错误处理回调的最佳方法是什么。

[`jQuery.ajax(...)`](http://docs.jquery.com/Ajax/jQuery.ajax#options)内置函数具有以下（有用的）回调函数：

> 发送前
> 
> 完全的
> 
> 数据过滤器
> 
> 错误
> 
> 成功

我以为我已经用[jQuery.Form](http://malsup.com/jquery/form/#getting-started)插件找到了答案，但是出于某种疯狂的原因，它们不允许您访问错误回调！除了这个遗漏之外，它似乎非常有用。

总的来说，我真的很沮丧，因为那里有大量文章`jQuery.get`在他们推荐之前推荐使用`jQuery.ajax`。回顾一下：`get()`没有错误回调，但是`ajax()`有。

在我看来，你应该**总是**使用`ajax()`，因为你总是应该有*某种*错误处理逻辑。

是否还有其他不错的插件——尤其是与 ASP.NET-MVC 配合得很好的插件，我应该使用它来让所有东西更容易连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-11T05:21:18.037

这是我从我的一个项目中复制的一个非常简单的片段，只是稍微修改了一下（几乎没有经过测试）。让我知道这个是否奏效。

```
(function() {
$.fn.ajaxify = function(options) {
    $(this).submit(function(e) {
        var form = $(this);
        $.ajax({
            type : form.attr('method'),
            url : form.attr('action'),
            data : form.serialize(),
            error : options.error,
            success : options.success,
            dataType : "script"
        });

        return false;
    });
}
})(); 
```

使用它：

```
$('form').ajaxify(
    {success: success_method_name, 
    error: error_method_name}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-10T18:32:26.977

根据此页面：

[http://www.malsup.com/jquery/form/#api](http://www.malsup.com/jquery/form/#api)

“请注意，选项对象也可用于将值传递给 jQuery 的 $.ajax 方法。如果您熟悉 $.ajax 支持的选项，您可以在传递给 ajaxForm 和 ajaxSubmit 的选项对象中使用它们。”

这包括“错误”处理程序参数，但是我无法让它工作......

富有的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-30T12:01:46.460

这可能不再是问题了，因为我刚刚连接了一个错误回调就好了。

例如：

```
$("form#new_asset").ajaxForm({
  error: function(a, b, c) {
    alert('error')
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-11T05:24:08.513

[您是否尝试过通过$.ajaxError()](http://docs.jquery.com/Ajax/ajaxError#callback)设置处理程序？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-04T16:25:29.023

刚刚经过测试，Chris O'Sullivan 确实是正确的，尽管目前我认为它是无证的。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-03-11T05:14:59.797

为什么不使用 JSON？您可以从表单中收集数据并发送 JSON 请求。

# c# - 使用 WPF C# 创建背景热键的正确方法？（最好不使用遗留代码）

> ID：633362
> 
> 赞同：2
> 
> 时间：2009-03-11T04:44:33.210
> 
> 标签：c#, wpf, hotkeys

我需要能够为 WPF 应用程序设置后台热键事件。（通过背景我的意思是有问题的应用程序可能没有必要成为焦点）。

我知道使用 WinForms 的正确方法是导入 user32.dll，并使用 RegisterHotKey，然后捕获适当的 WM_POST 消息。我确信必须有一个更好的 WPF 解决方案，然后使用 user32.dll，但我一直找不到任何东西。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T10:48:36.063

我认为 WPF 没有任何内置的热键支持，至少我找不到任何热键，我直接使用了 RegisterHotKey。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-14T22:22:25.333

这有一个很好的例子（参见 5.2 “注册系统热键”）：

[http://blog.280z28.org/archives/2007/03/15/](http://blog.280z28.org/archives/2007/03/15/)

它使用[Managed Windows API](http://mwinapi.sourceforge.net/)，这是对许多遗留 api 调用的一个很好的包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T16:02:55.747

为什么不使用 WPF 提供的 Commanding 基础架构？您可以尝试为您的主窗口分配一些命令绑定并为其提供一些按键手势...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-17T14:58:32.800

您要么必须像您说的那样使用 WinForm，要么使用 Win32。

我在一个类 (Win32) 中制作了一个解决方案，您可以直接在 wpf 解决方案中使用它。只需将该类放在一个单独的 DLL 中，对 win32 的任何调用对您都是透明的（并让您继续使用编辑并正常继续）。希望能帮助到你。

[在此处输入链接描述](https://stackoverflow.com/questions/48935/how-can-i-register-a-global-hot-key-to-say-ctrlshiftletter-using-wpf-and-ne/9330358#9330358)

# asp.net-mvc - ASP.Net MVC RC2 ValidationMessage 和表单字段冲突？

> ID：633365
> 
> 赞同：2
> 
> 时间：2009-03-11T04:45:49.510
> 
> 标签：asp.net-mvc, input, nullreferenceexception

我在使用 MVC RC2 时遇到问题，在验证失败时，当视图传回给用户时，失败的字段将引发 NullReferenceException。

找到了一个短期解决方案：将 Html.ValidationMessage 重命名为与目标表单字段不同。这行得通！

但是现在自动突出显示与输入字段断开连接。（开箱即用的行为是更改目标字段的 CSS 类，使其脱颖而出）

所以...

**我的代码的实际问题是什么？****以及为什么不允许我的 ValidationMessage 和 Form 字段共享相同的名称** ？

 **运行以下代码时，代码会抛出 NullReferenceException：

**查看代码**

```
<% using (Html.BeginForm()) { %>
   <fieldset>
     <h5>Terms and Conditions</h5>
     <p>
       <%= Html.CheckBox("Terms", false)%>
       <%= Html.ValidationMessage("Terms")%>
       I agree to the <a href="/signup/terms">Terms & Conditions.</a>
     </p>
   </fieldset>
   <input class="signup_button" type="submit" title="Sign Up" value="" />
<% } %>
<%= Html.ValidationSummary("Sign up wasn't successful.")%> 
```

**控制器代码**

```
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult Index()
{
    return View();
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(FormCollection form)
{
    bool Terms = form["Terms"].ToString() == "true,false" ? true : false;

    if (Terms)
    {
        return RedirectToAction("Success", "Signup");
    }
    else 
    {
        ModelState.AddModelError("Terms", "Please agree to the Terms");
        ModelState.AddModelError("_FORM", "Terms not checked");
    }
    return View();
} 
```

如果我省略以下内容，我可以让代码工作：

```
ModelState.AddModelError("Terms", "Please agree to the Terms"); 
```

但是有了这个，复选框会抛出 Null 引用异常。

**有任何想法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T13:38:08.760

试试这个：

```
else 
{
    ModelState.AddModelError("Terms", "Please agree to the Terms");
    ModelState.SetModelValue("Terms", form.ToValueProvider()["Terms"]);
    ModelState.AddModelError("_FORM", "Terms not checked");
} 
```

如果这不起作用，请发布异常的完整堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T05:02:44.133

看起来短期答案只是将 html.ValidationMessage 重命名为其他名称

```
<%= Html.ValidationMessage("TermsError")%> 
```

并确保控件在添加错误状态时使用相同的名称

```
ModelState.AddModelError("TermsError", "Please agree to the Terms"); 
```

这为我解决了这个问题。不过，我仍然想知道......使用 html.ValidationMessage 的最佳命名约定是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T06:40:48.407

在这种情况下，为什么要传入表单集合？为什么不这样做？

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(bool terms)
{
    if (terms)
    {
        return RedirectToAction("Success", "Signup");
    }
    else 
    {
        ModelState.AddModelError("Terms", "Please agree to the Terms");
        ModelState.AddModelError("_FORM", "Terms not checked");
    }
    return View();
} 
```

那应该工作得很好。

# c - printf的签名是什么？

> ID：633367
> 
> 赞同：9
> 
> 时间：2009-03-11T04:46:49.380
> 
> 标签：c

最近在一次采访中，有人问我 printf 的签名是什么。我真的无法得到正确的答案。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-03-11T04:49:42.980

```
int printf ( const char * format, ... ); 
```

他们可能会问这个，看看您是否熟悉可选参数语法“...”。这允许您传递将填充格式字符串的不确定变量列表。

例如，可以使用相同的方法打印如下内容：

```
printf("This is a string: %s", myString);
printf("This is a string: %s and an int: %d", myString, myInt); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-11T04:50:03.460

printf 是具有以下签名的可变参数函数：

```
int printf(const char *format, ...); 
```

这意味着它有一个**必需**的字符串参数，后跟 0 个或多个参数（可以是各种类型）。最后，它返回一个 int，表示结果中有多少个字符。

可选参数的数量和类型由格式字符串的内容决定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-11T04:51:40.057

[方法签名](http://en.wikipedia.org/wiki/Method_signature)，用于一些额外的上下文。

# apache-flex - Flex：修改文本区域

> ID：633370
> 
> 赞同：2
> 
> 时间：2009-03-11T04:48:36.070
> 
> 标签：apache-flex, textarea

我正在使用文本区域制作文本编辑器。哪个用户可以更改字体大小、系列等。
这是我的代码：

```
 private function ChangeFont(event: Event):void
       {
        var mySelectedTextRange:TextRange = new TextRange(thistxtarea,true,
                                                thistxtarea.selectionBeginIndex,
                                                thistxtarea.selectionEndIndex);
        mySelectedTextRange.fontSize = int(cmbbxFntSze.text);
        thistxtarea.setFocus();
       } 
```

我有这个组合框来输入所需的字体大小：

```
<mx:ComboBox x="78" y="8" width="114" id="cmbbxFntFam"  close="ChangeFont(event)"></mx:ComboBox> 
```

如果里面的文本没有突出显示，如何更改字体属性？例如，我将鼠标指针放在文本区域内的最后一个文本索引上，然后在组合框中选择所需的字体大小。在文本区域中输入的字母的以下字体大小应为组合框上选择的字体大小。我发布的代码只有在我突出显示所需的文本时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-06-25T03:07:29.147

这是设置样式

```
private function setTextStyles(type:String, value:Object = null):void
        {
            if(thisindex != -1)
            {
                var tf:TextFormat;

                var beginIndex:int = textArea.getTextField().selectionBeginIndex;
                var endIndex:int = textArea.getTextField().selectionEndIndex;

                textArea.getTextField().alwaysShowSelection = true;

                if (beginIndex == endIndex)
                {
                    tf = previousTextFormat;
                }
                else    
                    tf = new TextFormat();

                if (type == "bold" || type == "italic" || type == "underline")
                {
                    tf[type] = value;
                }
                else if (type == "align")
                {
                    if (beginIndex == endIndex)
                    {
                        tf = new TextFormat();
                    }

                    // Apply the paragraph styles to the whole paragraph instead of just 
                    // the selected text
                    beginIndex = textArea.getTextField().getFirstCharInParagraph(beginIndex) - 1;
                    beginIndex = Math.max(0, beginIndex);
                    endIndex = textArea.getTextField().getFirstCharInParagraph(endIndex) +
                        textArea.getTextField().getParagraphLength(endIndex) - 1;
                    tf[type] = value;
                    previousTextFormat[type] = value;
                    if (!endIndex)
                        textArea.getTextField().defaultTextFormat = tf;
                }
                else if (type == "font")
                {
                    tf[type] = cmbbxFntFam.text;
                }
                else if (type == "size")
                {
                    var fontSize:uint = uint(cmbbxFntSze.text);
                    if (fontSize > 0)
                        tf[type] = fontSize;
                }
                else if (type == "color")
                {
                    tf[type] = uint(clrpckerFontColor.selectedColor);
                }

                textFormatChanged = true;

                if (beginIndex == endIndex)
                {                       
                    previousTextFormat = tf;
                }
                else
                {
                    textArea.getTextField().setTextFormat(tf,beginIndex,endIndex);//textArea.setTextFormat(tf,beginIndex,endIndex);
                }

                dispatchEvent(new Event("change"));

                var caretIndex:int = textArea.getTextField().caretIndex;
                var lineIndex:int = textArea.getTextField().getLineIndexOfChar(caretIndex);

                textArea.invalidateDisplayList();
                textArea.validateDisplayList();
                textArea.validateNow();

                // Scroll to make the line containing the caret under viewable area
                while (lineIndex >= textArea.getTextField().bottomScrollV)
                {
                    textArea.verticalScrollPosition++;
                }

                callLater(textArea.setFocus);

            }
        } 
```

此代码用于从 textArea 获取样式

```
 private function getTextStyles():void
        {               

            if (!textArea)
                return;

            var tf:TextFormat;

            var beginIndex:int = textArea.getTextField().selectionBeginIndex;
            var endIndex:int = textArea.getTextField().selectionEndIndex;

            if (textFormatChanged)
                previousTextFormat = null;

            if (beginIndex == endIndex)
            {
                tf = textArea.getTextField().defaultTextFormat;
                if (tf.url != "")
                {
                    var carIndex:int = textArea.getTextField().caretIndex;
                    if (carIndex < textArea.getTextField().length)
                    {
                        var tfNext:TextFormat=textArea.getTextField().getTextFormat(carIndex, carIndex + 1);

                        if (!tfNext.url || tfNext.url == "")
                            tf.url = tf.target = "";
                    }
                    else
                        tf.url = tf.target = ""; 
                }
            }
            else
                tf = textArea.getTextField().getTextFormat(beginIndex,endIndex);                

            if (cmbbxFntSze.text != tf.font)
                setComboSelection(cmbbxFntFam, tf.font);
            if (int(cmbbxFntSze.text) != tf.size)
                setComboSelection(cmbbxFntSze,String(tf.size));
            if (clrpckerFontColor.selectedColor != tf.color)
                clrpckerFontColor.selectedColor = Number(tf.color);

            if (btnBold.selected != tf.bold)
                btnBold.selected = tf.bold;//Alert.show("bold");
            if (btnItalic.selected != tf.italic)
                btnItalic.selected = tf.italic;
            if (btnUnderline.selected != tf.underline)
                btnUnderline.selected = tf.underline;

            if (tf.align == "left")
                alignButtons.selectedIndex = 0;
            else if (tf.align == "center")
                alignButtons.selectedIndex = 1;
            else if (tf.align == "right")
                alignButtons.selectedIndex = 2;
            else if (tf.align == "justify")
                alignButtons.selectedIndex = 3;

            if (textArea.getTextField().defaultTextFormat != tf)
                textArea.getTextField().defaultTextFormat = tf;
            previousTextFormat = tf;
            textFormatChanged = false;

            lastCaretIndex = textArea.getTextField().caretIndex;                
            thishtmltxt = textArea.htmlText;
            textArea.validateNow();
        } 
```

请检查小错误，因为当我编码时，我有一些注释痕迹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T05:16:10.183

**您是否看过mx.controls.RichTextEditor**是如何做到这一点的？您可以在 ... **\frameworks\projects\framework\src\mx\controls中找到它**

如果您扫描该代码，您将看到 RichTextEditor 在其维护的 TextFormat 变量中保留当前文本样式设置，然后将该样式应用于新输入的文本。当用户更改字体/大小或选择更改以获取相邻样式时，该变量会更新。对于 selectionBeginIndex == selectionEndIndex 的情况也有特殊考虑。

# apache2 - Apache2 未在标头中发送“Content-Type”

> ID：633376
> 
> 赞同：6
> 
> 时间：2009-03-11T04:50:40.213
> 
> 标签：apache2, content-type, mime

我在 Ubuntu 上安装了标准的 Apache2。

我试图让 mod_deflate 工作，它确实如此，但注意到它没有压缩我的 .js 文件。仔细检查发现**apache 没有发送 Content-Type: 用于 .php 文件以外的任何内容**。对他们来说，它发送的是“text/html”，这很奇怪，因为 DefaultType 是“text/plain”。

我不知道这是为什么... mod_mime 已启用，我还没有触及它的配置。

这是我的服务器对 .css 文件的示例响应：

```
Date    Wed, 11 Mar 2009 04:48:12 GMT
Server  Apache/2.2.9 (Ubuntu)
Connection  Keep-Alive
Keep-Alive  timeout=15, max=96
Etag    "30478-4fb-464bec553a600"
Vary    Accept-Encoding 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-11T11:48:20.630

看起来这是使用 eTags 缓存项目的结果，而我忽略了这一事实。

发生的事情是这些项目位于浏览器缓存中，实际上并不是从服务器发送的，因此没有 Content-Type。但是，浏览器在对 eTag 进行缓存查找时从服务器接收标头。这就是我所看到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T05:11:34.923

当在 httpd.conf 中注释 Content-Type 默认值时，有时会发生这种情况。

我记得在 Ubuntu 8.04 中它设置为 text/html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T04:58:43.627

这是一个已知问题。它是哪个ubuntu版本？

我刚刚尝试了 ubuntu 8.10 和 debian 5 安装，我还没有接触过 apache 配置。两者都工作正常：

```
HTTP/1.x 200 OK
Date: Wed, 11 Mar 2009 10:25:17 GMT
Server: Apache/2.2.9 (Ubuntu) PHP/5.2.6-2ubuntu4 with Suhosin-Patch mod_wsgi/2.3 Python/2.5.2
Last-Modified: Wed, 11 Mar 2009 10:19:41 GMT
Etag: "1544ae-12-464d534a6c940"
Accept-Ranges: bytes
Content-Length: 18
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/css 
```

# .net - 在 Silverlight 中工作时，您错过了哪些 .Net/WPF 功能？

> ID：633379
> 
> 赞同：29
> 
> 时间：2009-03-11T04:51:31.383
> 
> 标签：.net, wpf, silverlight, xaml

我最近开始使用 Silverlight，并立即注意到 Silverlight BCL 与完整的 .Net 和 WPF 之间的区别。对于其中一些人，我发现其他开发人员在网上发布了很好的解决方案，而其他人则更复杂。您对 Silverlight 类库中缺少哪些功能/类感到惊讶/失望，您采取了哪些措施来解决它们？

我的一些是：

1.  **没有事件触发的动画**- 我创建了一个带有静态方法的辅助类，用于将我用过的每种类型的动画附加到共享库中的情节提要上，并在应用程序级别创建带有静态方法的类，以便将它们全部放在一起如果在 WPF 中工作，则在 XAML 中。到目前为止，这是一个很好的解决方案，可以让我的动画井井有条，并让我的事件处理程序中的逻辑脱离。
2.  **ScrollViewer 不支持鼠标滚轮**- Adam Cooper 创建了一个出色的类库，添加了此功能，在任何 Silverlight 项目中都需要最少的代码来实现。他的网站目前似乎已关闭，因此这里有一个指向 Tim Heuer 博客的链接，该链接对其进行了解释和链接（因此，当他的网站重新上线时，该链接将可用）。 [在 Silverlight 中为 ScrollViewer 添加鼠标滚轮支持](http://timheuer.com/blog/archive/2008/09/23/mouse-wheel-support-for-scrollviewer.aspx)
3.  **`SortedDictionary<T, K>`不见了。** 我发现[这篇文章](http://blogs.microsoft.co.il/blogs/tamir/archive/2007/10/15/sorted-dictionary-class-for-silverlight.aspx)包含一个实现，但我自己并没有最终使用它。
4.  **ResourceDictionary.MergedDictionaries 不可用**- 再次...找到实现此并发布源代码的人，但它似乎有点复杂。我可能会完成它一点点，但还没有这样做。 [Silverlight 中的合并字典](http://www.codeproject.com/KB/silverlight/MergedDictionaries.aspx)
5.  **ZIndex 附加属性仅在 Canvas 对象上可用。** 我在 SO 上将此作为一个问题发布在这里，如果需要的话，有人提出了一个很好的建议，将我的容器包装在一个集合中。感觉有点草率，但你必须做你必须做的。我的容器嵌套了三层，因此我可能需要将它们全部变形到 Canvas 对象中，并为每个事件设置三次 Canvas.ZIndex。丑陋如罪，但如果这是唯一的方法，那就这样吧。

我有兴趣了解更有经验的 Silverlight 开发人员遇到的其他常见问题以及您为解决这些问题所做的工作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-03-11T06:15:36.017

我从哪里开始？:)

*   没有**多重绑定**
*   没有**ElementName** = 绑定
*   **TemplateBinding**只能引用直接属性，不能附加 DP
*   没有**RelativeSource**绑定
*   没有**绑定到子属性**- 例如，`{Binding Path=Foo.Bar[0].Baz}`
*   无法订阅任意依赖属性上的**更改事件- 类作者必须显式定义事件（在大多数情况下，SL 控件中实际上只有一个或两个属性）**
*   **可视状态管理器**要求控件作者在编写控件时了解所有可样式化的状态，这完全打破了 WPF 提倡的“通过样式/模板进行扩展，而不是继承”的故事
*   没有装饰品
*   没有导航
*   没有依赖属性继承
*   对外部 ResourceDictionaries/合并字典没有/糟糕的支持
*   验证故事很烂（在 WPF 中只是稍微好一点）
*   **印刷**
*   `<Setter .. Value="{Binding ...}" />`不支持

最重要的是，许多方法签名无缘无故地改变了。例如，IIRC，Dispatcher.Invoke 的重载是不同的，而不是 SL 只是忽略它还不能处理的参数。或者作为另一个例子，WPF 中的 ObservableCollection 可以引发 Add、Remove、Replace 和 Move 事件——在 SL 中它只是前三个。

由于我编写的代码可以在两个平台上工作，因此代码最终会被策略模式和#ifdefs 所淹没。感觉又像 C++ 了 :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-16T14:43:52.287

除了[Paul Stovell](https://stackoverflow.com/questions/633379/what-net-wpf-features-do-you-miss-when-working-in-silverlight/633520#633520)的优秀名单：

*   没有自定义标记扩展。
*   没有`x:Type`标记扩展。
*   否`LayoutTransform`（尽管有[解决方法](http://blogs.msdn.com/delay/archive/2009/03/02/a-rose-by-any-other-name-layouttransformcontrol-on-track-to-ship-in-the-silverlight-toolkit-under-the-name-layouttransformer.aspx)）。
*   没有方便的元数据`DependencyProperties`（必须手动定义测量/排列/渲染失效、属性更改等）。
*   没有轻量级`Drawing`或`DrawingContext`类（必须使用`Shape`元素）。
*   没有命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T05:29:27.703

对我来说最大的痛苦可能是没有套接字或 UDP 支持，其次是缺少加密类。

此外，您习惯然后发现不存在的缺少的类（如 StringDictionary 和 ApplicationException）是一种痛苦。通常可以找到替代品或解决方法，但我个人更希望 Silverlight 下载从 5MB 到 6MB，所以我们不必这样做;-)。

我在博客上看到的一个非常方便的技巧，它允许我重用我的普通 .Net 程序集，即添加现有项目作为链接。在许多情况下，现在我有两个项目文件使用相同的类文件，一个针对 .Net 3.5，另一个针对 Silverlight 运行时。我非常感谢我发现了这个技巧，因为我已经开始为 .Net 3.5 和 Silverlight 创建不同的代码库了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-11T12:35:34.747

作为一名设计师，缺乏事件/属性触发器是*如此*令人沮丧。

我不是 C#/oop 人，所以当我必须在加载项目或单击按钮或另一个故事板完成后触发一系列故事板时，我必须致电开发人员:(

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-11T16:20:16.860

显然评论 felixthehat 的评论需要一定的声誉。

但我想支持他对事件/属性触发器的呼吁...... WPF 中的触发器框架允许我作为交互设计师做非常强大的事情，而无需深入研究代码。我想念它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-12T03:46:28.877

以下是我将 WPF 应用程序转换为 Silverlight 时遇到的一些情况：

1.  枚举类是不同的...不能在 Silverlight 中执行此操作（可以在 WPF 中）绑定到枚举：

    HoleType1.ItemsSource = Enum.GetValues(typeof(Hole.HoleTypes));

2.  画笔颜色的工作方式不同...

WPF：

```
 protected Brush _CurrentHoleColor = Brushes.Red; 
```

银光：

```
 protected Brush _CurrentHoleColor = new SolidColorBrush(Colors.Red); 
```

3\. 还没有解决这个问题，但是我用来检查鼠标点击位置的这个 WPF 代码有些不同：

```
System.Windows.Media.VisualTreeHelper.HitTest(canvas1, p); 
```

4\. 我认为用于创建新线程的重载略有不同

```
this.Dispatcher.BeginInvoke(....) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-11T04:56:35.863

我最大的抱怨是缺乏对所有可用 WCF 绑定的完全支持。只能经常使用 BasicHttpBinding 意味着解决问题的 silverlight 不是一个有效的选择。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-11T05:32:11.143

没有 3D 支持。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-15T00:58:54.277

Silverlight 的不可变样式和缺乏字典合并也是一大问题 - 如果您正在编写控件，这两个给您带来很多麻烦 - 更不用说难以管理的大 generic.xaml 文件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-08-16T08:50:58.813

透视 3d 很棒，但我等不及真正的 3D 了！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-05-11T17:03:26.940

*   `ScrollViewer` 没有更改事件（您必须使用绑定黑客）
*   直到版本 4 才支持与浏览器无关的上下文菜单
*   有限的`DocumentFlow`支持
*   不支持 MD5（而是更现代的哈希算法）
*   `WebClient`不允许您执行 HTTP 身份验证请求。

我最大的烦恼：

*   命名空间的老鼠窝

# security - 存储信用卡信息

> ID：633384
> 
> 赞同：27
> 
> 时间：2009-03-11T04:54:11.830
> 
> 标签：security, credit-card

我可以存储用户信用卡的到期日期和最后 4 位数字吗？这样做的原因是我们可以通知用户他们的卡即将到期，并且他们应该将他们的帐户更改为他们的新卡。存储最后四位数字将允许用户识别他们在我们的系统中存储的卡。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-03-11T04:57:50.790

[Google for PCI-Compliance](http://www.google.com/search?q=pci-compliance)有一整套关于您可以存储什么和不可以存储什么的规则。但是，简而言之，是的，到期日期和 last-4 可以存储。最大的*禁忌*是存储 CID 号码（卡背面的号码），但还有许多其他规则。

编辑：这是基于美国的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-11T08:54:28.273

大多数收单机构（例如，Chase Paymentech）提供的服务会向您（和客户，如果您愿意）发送一封关于卡到期和一堆其他内容（如达到信用额度）的电子邮件 - 所以您不需要存储用于识别目的的最后 4 位数字除外的任何信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T05:06:03.733

这不是您可以决定的事情，并且规则因国家/地区而异。最后 4 位数字和有效期可以安全存储，但最好检查规则。

# sharepoint - 在发布网站上显示 SharePoint 查找字段

> ID：633386
> 
> 赞同：3
> 
> 时间：2009-03-11T04:55:04.790
> 
> 标签：sharepoint, moss, lookup-field

我们的 MOSS 发布网站中的一个页面有一个属性，它是一个查找字段。

我只希望在您查看页面而不是在编辑模式下显示选定的文本，但是当我使用`Microsoft.SharePoint.WebControls.LookupField`它时，它会生成指向 SharePoint 列表项的超链接（显然很糟糕）。

除了创建我自己的查找字段控件之外，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-19T13:10:21.327

您可以使用 jQuery hack

[使用 JQuery 删除链接列表项的超链接。](http://www.myfatblog.co.uk/?p=106)

```
<script type="text/javascript" src="/jquery-1.3.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
   $('a[href*="RootFolder=*"]').each(
      function(index) {
         var link = $(this);
         $(this).after("<span>" + link.text() + "</span>");
         $(this).remove();
      });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-16T14:55:44.647

我也遇到了这个问题。我发现的唯一方法是创建自己的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-08T15:48:36.807

摆脱链接；

您可以创建一个 displaytemplate.ascx 如下

> SharePoint:RenderingTemplate ID="LookupDisplayTemplate" runat="server"> &blockquote&Template> &blockquote&SharePoint:FieldValue ID="FieldValue1" runat="server" ControlMode="Display"/> &blockquote&/Template> &blockquote&/SharePoint:RenderingTemplate>

然后。如下使用它。

&blockquote&SharePoint:LookupField id="LookupField1" FieldName="" runat="server" DisplayTemplateName="LookupDisplayTemplate"/>

然后它工作。

希望能帮助到你 ：）

塞布南

# pdf - 将 SSRS 字段锁定到位

> ID：633388
> 
> 赞同：0
> 
> 时间：2009-03-11T04:56:26.240
> 
> 标签：pdf, reporting-services, reportingservices-2005

我们正在开发一个复杂的结构化报告，该报告有很多字段，并且这些字段有时会被填充。当这些字段未填充时，该空字段周围的少数字段的字段位置会发生变化。

有没有办法锁定特定位置的字段。

我以 PDF 格式提取报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-13T20:25:02.407

您可以通过使用矩形对报表项进行分组或隔离来保留您的布局（在某种程度上）。

我目前正在为包含五个表格项目、两个图表和几个文本框的执行摘要报告执行此操作。通过使用矩形对对象进行分组，我设法始终拥有相同的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:49:00.287

只要确保你所有的元素都可以增长可以缩小。这通常是导致渲染看起来很时髦的原因。一些文本框会变大，使一切看起来格格不入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T06:37:09.273

我认为如果您试图获得像素完美的渲染，那么您正在打一场失败的战斗，特别是因为它为不同的输出类型（例如 pdf 与 html）使用不同的渲染引擎。

# java - 读取串口java的问题

> ID：633392
> 
> 赞同：0
> 
> 时间：2009-03-11T04:57:52.693
> 
> 标签：java, core

我正在从 Java 中的串行端口读取数据，但我没有得到完整的数据，它会拆分十个。

例子：

如果目标设备写入`datas_ok`，那么我`datas_`首先读取然后`ok`第二次读取。

```
case SerialPortEvent.DATA_AVAILABLE:

                try {
                    while (inputStream.available() > 0) {
                        numBytes = inputStream.available();
                        readBufferArray = new byte[numBytes];
                        // int readtheBytes = (int) inputStream.skip(2);
                        int readBytes = inputStream.read(readBufferArray);

                        one = new String(readBufferArray);
                        System.out.println("readBytes " + one);

                        handleFlashResponse(one);

                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T05:10:04.257

从描述来看，听起来您的阅读速度比发送数据的速度要快。这个是正常的。如果您从端口读取并且那里没有任何内容，那么您需要继续尝试（除非您可以调用阻塞读取）。

# ruby - 在文件中搜索字符串的最佳方法是什么？

> ID：633396
> 
> 赞同：45
> 
> 时间：2009-03-11T05:00:04.280
> 
> 标签：ruby

标题真的不言自明。我只想知道它是否存在，而不是它在哪里。是否有一个班轮来实现这一目标？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-03-12T04:40:09.577

```
File.open(filename).grep(/string/) 
```

这会将整个文件加载到内存中（slurps 文件）。[在处理大文件时，](https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice)您应该避免文件啜饮。这意味着一次加载一行，而不是整个文件。

```
File.foreach(filename).grep(/string/) 
```

最好自己清理而不是让垃圾收集器在某个时候处理它。如果您的程序是长期存在的，而不仅仅是一些快速脚本，这一点更为重要。使用代码块可确保`File`在块终止时关闭对象。

```
File.foreach(filename) do |file|
  file.grep(/string/)
end 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-11T05:04:46.670

grep for foo OR bar OR baz，从[ruby​​1line.txt](http://www.fepus.net/ruby1line.txt)偷来的。

```
$  ruby -pe 'next unless $_ =~ /(foo|bar|baz)/' < file.txt 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-11T05:17:21.040

如果你的操作系统有 grep 包，你可以使用系统调用：

```
system("grep meow cat_sounds.txt") 
```

`grep`如果返回任何内容，这将返回 true，否则返回 false。

如果您发现自己在一个带有`grep`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-11T05:12:48.210

好吧，似乎 eed3si9n 有一条线，这是更长的解决方案：

```
f = File.new("file.txt")
text = f.read
if text =~ /string/ then
#relevant code
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-12T18:36:47.647

这只会将文件读取到“字符串”的第一次出现并逐行处理它——而不是一次读取整个文件。

```
def file_contains_regexp?(filename,regexp)
  File.foreach(filename) do |line|
    return true if line =~ regexp
  end
  return false
end 
```

# c# - 异步连接

> ID：633397
> 
> 赞同：0
> 
> 时间：2009-03-11T05:00:24.450
> 
> 标签：c#, asynchronous

在 c# 中，我使用以下代码：

```
IPAddress localaddress=IPAddress.Parse("127.0.0.1"); 
```

获取正在使用的 System.Net.IPAddress 实例：

```
IPEndPoint ip= new IPEndPoint(localaddress,5555); 
```

但是，我收到一条错误消息：

```
A field initializer cannot reference the nonstatic field, method, or property 'WindowsApplication1.lanmessenger.localaddress'   . 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T05:08:20.890

我猜你的代码是这样的：

```
public class lanmessenger {
  IPAddress localaddress=IPAddress.Parse("127.0.0.1");
  IPEndPoint ip= new IPEndPoint(localaddress,5555);

  public lanmessenger(){
  ...
  }
} 
```

这里的问题是编译器不希望您像现在这样使用初始化字段。您正在使用`localaddress`to initialize `ip`，从编译器的角度来看这是有问题的。解决此问题的两种方法：

内联它：

```
 IPEndPoint ip= new IPEndPoint(IPAddress.Parse("127.0.0.1");,5555); 
```

或者只是在构造函数中执行它：（通常更好）

```
public class lanmessenger {
  IPAddress localaddress;
  IPEndPoint ip;

  public lanmessenger(){
    this.localaddress = IPAddress.Parse("127.0.0.1")
    this.ip = new IPEndPoint(localaddress,5555);
  }
} 
```

# javascript - 焦点 OnLoad="document.form_id.form_field_id.focus();" 在 iPhone 上

> ID：633398
> 
> 赞同：3
> 
> 时间：2009-03-11T05:00:48.147
> 
> 标签：javascript, iphone, html

有没有办法专注于页面加载时的文本字段（在 iPhone 上）？

我试过了：

```
OnLoad="document.form_id.form_field_id.focus();" 
```

在 iPhone 模拟器上，但它没有工作。

有谁知道，为什么这不起作用，如果是，有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-11T05:58:25.573

尝试

```
OnLoad="document.getElementById('form_field_id').focus()" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-21T23:48:54.853

最好使用标准方式访问表单和表单控件：

```
document.forms.form_id.elements.form_field_id.focus(); 
```

（通知`form`和`elements`补充）。

或者：

```
document.forms['form_id'].elements['form_field_id'].focus(); 
```

如果表单/表单控件 ID/名称包含不能作为 Javascript 标识符一部分的字符，例如“|”、“-”、“.”等。

短符号（如您的示例中），即使得到广泛支持，也不是真正标准化的，通常最好坚持标准做法。

我不确定这里有什么问题。也许移动 Safari 不支持程序化焦点设置？您是否尝试过稍微延迟调用焦点？

```
window.setTimeout(function(){
  document.forms['form_id'].elements['form_field_id'].focus();
}, 100); 
```

# java - 什么是序列化？

> ID：633402
> 
> 赞同：206
> 
> 时间：2009-03-11T05:03:17.720
> 
> 标签：java, oop, serialization, marshalling

我开始使用面向对象编程 (OOP)，想知道：在 OOP 用语中，序列化的含义是什么？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2009-03-11T05:06:59.333

序列化是将内存中的对象转换为字节流的过程，因此您可以执行诸如将其存储在磁盘上或通过网络发送之类的操作。

反序列化是相反的过程：将字节流转换为内存中的对象。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2014-08-30T18:36:19.680

简单地说，**序列化**是将对象转换为字节流的过程，以便它可以通过网络传输或存储在持久存储中。

反序列化正好相反——从网络或持久存储中获取字节流并将其转换回**具有相同状态**的对象。

要了解的是如何解释或操作这些字节流，以便我们获得完全相同的对象/相同的状态。有多种方法可以实现这一目标。他们之中有一些是 -

1.  **XML**：将对象转换为 XML，通过网络传输或存储在文件/数据库中。检索它并将其转换回具有相同状态的对象。在 Java 中，我们使用**JAXB**（用于 XML 绑定的 Java 架构）库。（从 java 6 开始，它与 JDK 捆绑在一起）。
2.  **JSON**：同样可以通过将对象转换为**JSON**（JavaScript 对象表示法）来完成。同样有可以用于此的 GSON 库。
3.  或者我们可以使用 OOP 语言本身提供的序列化。例如，在 Java 中，您可以序列化一个对象，使其实现`Serializable interface`并写入对象流。

* * *

## 回答 #3

> 赞同：119
> 
> 时间：2018-02-01T01:25:40.023

# 什么是序列化？

### 通过图片简单解释：

[![雷克斯，我的狗，被连载了！](https://i.stack.imgur.com/vLjcq.png)](https://i.stack.imgur.com/vLjcq.png)

### 概括：

序列化意味着将某些东西（例如我的狗 Rex）转换为一系列 1 和 0 - 可以通过电话线传输，存储在内存中。然后，我在海外的朋友可以将这些 1 和 0 翻译回小狗的完美表示（反序列化），这样他们就可以享受 Rex 的陪伴。

### 类比的澄清

朋友，这是一个比喻。我认为您实际上无法连载小狗**LOL**。您将序列化数据结构或其他一些复杂对象。（我写了这个答案，这样你就可以在不到 10 秒的时间内以一种有趣的方式理解这个概念，而不会打破你的技术百科定义。但如果你更喜欢一个，请查看：[这个 Wikipedia 链接](https://en.wikipedia.org/wiki/Serialization)）。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-03-11T05:06:01.003

看看这个，这会给你一个很好的解释：

[http://en.wikipedia.org/wiki/Serialization](http://en.wikipedia.org/wiki/Serialization)

我认为序列化一词最常见的用法是将二进制对象转换为 XML（或其他字符串）表示形式，以便可以将其存储在数据库/文件中或在 Web 服务调用中通过网络发送。反序列化是相反的过程 - 将 XML/字符串转换回对象。

编辑：您可能会遇到的另一个术语是编组/解组。编组与序列化的概念基本相同，解组与反序列化相同。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-02-01T05:47:25.423

> 序列化是**将对象转换为字节流以存储对象或将其传输**到内存、数据库或文件的过程。它的主要目的是保存对象的状态，以便能够在需要时重新创建它。反向过程称为反序列化。
> 
> ...
> 
> 这张图展示了序列化的整体流程
> 
> [![序列化的总体流程](https://i.stack.imgur.com/Q28YV.png)](https://i.stack.imgur.com/Q28YV.png)
> 
> ...
> 
> 通过序列化，开发人员可以执行以下操作，例如通过 Web 服务将对象发送到远程应用程序、将对象从一个域传递到另一个域、将对象作为 XML 字符串通过防火墙传递，或者维护安全性或用户特定跨应用程序的信息

来自[https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/serialization/](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/serialization/)

^(（强调我的）)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2010-02-26T11:12:52.697

*序列化*是将无序数据（例如对象）转换为*一系列*标记的过程，这些标记可以在以后用于重建原始数据。序列化形式通常是一串文本，但并非必须如此。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-23T01:48:02.073

序列化是将 Java、C# 或任何其他（OOP 语言）支持的对象转换为可传输形式的过程。通过这种方式，它可以通过网络传输或存储在磁盘上。要使一个类可序列化，它必须实现可序列化接口。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-11T05:10:50.557

序列化是将对象转换为可存储的位序列。

因此您可以将此序列保存到文件、数据库或通过网络发送。

稍后您可以将其反序列化为实际对象并在需要时重用它。

**Web 服务**和**AJAX**是最常见的序列化示例。在向客户端发送响应之前序列化的对象。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-24T10:35:06.993

从类（蓝图）实例化（构造）实际对象（事物）时，需要通过将对象（事物）序列化（将其分解为其基本原子结构）到内存空间中来保存对象（事物）。（有点像星际迷航运输车）。您将事物分解为可以在某处传输和存储的信息流。然后，当您想要重建事物时，您只需将原子存储的实例拉回对象中。不同于实例化。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-08T10:12:15.860

序列化只不过是将 java 支持的对象转换为文件支持的形式

```
 (OR) 
```

将 java 支持的形式转换为网络支持的形式..序列化的主要范围不过是将数据从一层传输到另一层...只有我们可以通过网络发送的序列化对象..

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-03-11T06:55:44.097

序列化将数据转换为线性的字节“字符串”。

其他人或多或少说了同样的话，但我强调计算机模型要求数据适合一维寻址的 RAM 或持久存储。

大多数“数据”的东西本质上都是可序列化的（即使您必须将抽象模型简化为线性模型）；不可序列化的网络连接或复杂的基于状态的机器（如解析器）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-02-26T10:32:22.990

序列化与将二进制对象转换为 XML（或其他字符串）表示形式有关，以便可以将其存储在数据库/文件中或在 Web 服务调用中通过网络发送。反序列化是相反的过程 - 将 XML/字符串转换回对象。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-29T02:26:44.713

序列化是将对象转换为二进制数据流的过程，以便可以将其存储在文件中或通过网络发送，在该网络中可以将其复活回同一对象。

[本](http://www.tutorialspoint.com/java/java_serialization.htm)文档应该可以帮助您详细了解 Java 序列化。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2009-03-11T05:07:59.767

序列化是当对象的状态可以保存在文件中时（例如）将对象（一块内存）转换为一种形式。

只需将其视为制作饼干 - 对象是面团，饼干 - 是序列化的面团。

因此，通过“序列化”，您可以将 cookie 发送给您的朋友。

类似的东西:-)

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-09-22T17:01:09.497

序列化的名称可能来自对内存中的数据进行碎片整理。这里描述[什么是内存碎片 什么是内存碎片？](https://stackoverflow.com/questions/3770457/what-is-memory-fragmentation)

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2021-03-17T11:08:02.083

只需考虑以下想法即可理解它。

序列化：

```
"hello world".split() returns ['hello', 'world'] 
```

反序列化：

```
" ".join(['hello', 'world']) returns "hello world" 
```

# factorial - 阶乘是如何计算的？

> ID：633403
> 
> 赞同：2
> 
> 时间：2009-03-11T05:03:30.963
> 
> 标签：factorial, function-object

说有一个函数来计算阶乘（n）

factorial(7) 是否为从 1 到 7 的 n 中的每一个创建 7 个函数对象

并在必要时使用这些值（对于阶乘（8），如阶乘（7）* 8）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-11T05:12:25.013

这取决于语言和语言实现。

在许多函数式语言（例如 Haskell）中，函数保证不会改变任何内容。只返回一个值。这种副作用的缺乏允许语言记住/缓存或“记忆”函数调用的结果。

在不太复杂的语言中，7 个不同的函数调用帧可能会被放置在堆栈上并弹出。

许多函数式语言中正确编写的阶乘函数也将是尾递归的；在这种情况下，语言可能会选择简单地从函数底部跳到顶部，以避免创建另一个函数调用。在这种情况下，该语言将递归函数“免费”转换为循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-11T05:12:12.363

这取决于，听起来你在谈论递归阶乘函数：

```
int factorial(int n) {
    return n>=1 ? n * factorial(n-1) : 1;
} 
```

该函数将[递归](http://en.wikipedia.org/wiki/Recursion_(computer_science))调用自身计算给定阶乘（n）所需的次数。

大多数情况下，所有递归函数都可以通过使用堆栈来累积连续结果来转换为迭代解决方案......

```
int factorial(int n) {
    int accu = 1;
    int i;
    for(i = 1; i <= n; i++) {
        accu *= i;
    }
    return accu;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T05:09:20.683

它可以。你所问的听起来像是*记忆*——你存储以前的结果以加快计算速度。因此，例如，如果您计算 9!，则可以存储 1! 的值！.. 9!，如果你被要求 8! 稍后您可以返回存储的值。同样，如果要求 10!，您可以计算 10×9! 迅速地。

问题是阶乘（*n*）增长如此之快，对于较大的*n*值，您最终可能会使用大量存储空间，因此时空交易可能不值得。

另一个可以有效使用记忆的功能是计算斐波那契数。

# php - 如何检查我的网站的安全性？

> ID：633445
> 
> 赞同：1
> 
> 时间：2009-03-11T05:24:20.883
> 
> 标签：php, javascript, html, ajax, http

如何检查我的网站的安全性？

避免安全漏洞的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T07:39:14.303

如果您使用任何 3rd 方库，请确保订阅他们的新闻列表，并尝试了解他们的安全通知。

我曾经看到整个服务器被第 3 方 PHP 库中的一个漏洞摧毁，这真的很不愉快。这似乎很明显，但您会惊讶于大多数人不这样做，这就是入侵如此有效的原因。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T05:26:33.967

*   [http://php-ids.org/](http://php-ids.org/)
*   [http://pixybox.seclab.tuwien.ac.at/pixy/othertools.php](http://pixybox.seclab.tuwien.ac.at/pixy/othertools.php)
*   大量阅读安全文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-11T05:27:46.490

Javascript / SQL 注入将是我要防范的第一件事。另请记住，如果您让用户将文件上传到站点，可能会出现漏洞。还要警惕管理控制面板（CPanel 等），因为它们可能会针对暴力破解行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-12T21:12:46.557

如果您没有进行自己的安全测试的技能/资源，我会推荐[WebInspect](https://h10078.www1.hp.com/cda/hpms/display/main/hpms_content.jsp?zn=bto&cp=1-11-201-200%5E9570_4000_100__)。我不确定价格，但这是我测试过的最好的网络安全测试工具。Nessus 等许多工具对您的情况并没有真正的帮助，因为它们主要查看 Web 服务器或已知包中的已知流。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-20T14:54:36.113

[代理服务器](http://code.google.com/p/ratproxy/)：

> 一种半自动化的、主要是被动的 Web 应用程序安全审计工具，基于对复杂 Web 2.0 环境中现有用户发起的流量的观察，针对潜在问题和安全相关设计模式的准确和敏感检测和自动注释进行了优化.
> 
> 检测各种安全问题并确定其优先级，例如动态跨站点信任模型注意事项、脚本包含问题、内容服务问题、XSRF 和 XSS 防御不足等。

您在正常使用应用程序时使用 ratproxy，它会突出潜在的安全漏洞。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T13:06:50.203

我将从第二个问题开始。要消除您网站上的安全漏洞，您必须执行以下几个步骤：

1.  如果您使用开源 CMS（如 Joomla、Drupal 或其他），请保持最新状态。还要定期（尽快）更新第 3 方组件、模块等。这可能是最重要的一步。
2.  安装安全的 FTP 客户端（如 WinSCP）并使用最安全的连接
3.  更改所有 FTP 密码。使用强密码。
4.  更改登录您站点的管理后端
5.  检查 .htaccess 文件权限和内容。如果您以前没有使用过此文件，请获取它。
6.  确保您的 web 文件夹中没有任何忘记的 php 文件浏览器。

现在，如果您想测试网站安全性，有许多免费和开源工具。我建议从[w3af](http://w3af.sourceforge.net/)开始——它是一个全面的网站审计框架。但是，您将不得不稍微玩一下。更简单的是 websecurify。如果您只想快速获得结果，请使用 websecurify。我发现一篇博客文章描述了最流行的免费网站安全测试工具。

但是，如果您是一个完全的新手，我建议您从专业人士那里订购网站安全测试。检查例如[webyfly.com](http://www.webyfly.com)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-24T10:44:27.680

1.  为了回应[Robert Mirek 的回答](https://stackoverflow.com/a/10980696/447356)- 我不建议将 CMS 更新作为默认值。更新并不总是有效的，因为新版本往往带有新的、尚未修补的漏洞。这里的主要问题不是偶数版本本身，而是所有需要更新的插件（或扩展或模块），并且随着每次这样的更新，漏洞的机会就会增加。等几天再看一遍再更新，你会省去很多问题。

2.  关于网站安全检查。问题应该更具体。您担心什么（SQL 注入、非法访问、XSS、抓取？）有些攻击无法避免（即僵尸网络 DDoS），必须通过 3rd-party 解决方案吸收，而其他攻击可以通过 WAF 缓解。

我在一家安全公司（Incapsula）工作，在看过和阅读了很多关于这个主题的内容之后，我可以告诉你一件事——检查几乎是无关紧要的，如果你没有强大的 WAF 和基于云的 DDoS 缓解平台，你就没有安全感。

# iphone - 观察函数值

> ID：633451
> 
> 赞同：0
> 
> 时间：2009-03-11T05:28:13.353
> 
> 标签：iphone, objective-c, cocoa-touch

我正在尝试制作一个简单的 iphone 应用程序，它有两个按钮：开始和停止。当您点击开始时，它会开始收听手机的麦克风音量，并让标签显示您对麦克风说话的音量。当您点击停止时，它会停止收听。

我发现了一个很棒的类[SCListener](http://github.com/stephencelis/sc_listener/tree/master)，但我不知道如何实现它。现在我有一个连接到以下代码的按钮

```
-(IBAction)getVolume
{
    SCListener *listener = [SCListener sharedListener];
    [listener listen];
    Float32 peakPower = [listener peakPower];
    NSString *theString = [NSString stringWithFormat:@"Level is: %1.2f", peakPower];
    [volumeLabel setText:theString];
} 
```

这工作得很好，但只能获得一次音量。我试图做类似的事情：

```
[listener addObserver:self 
           forKeyPath:@"peakPower"               
              options:NSKeyValueObservingOptionOld 
              context:NULL]; 
```

但是由于 peakPower 是一种方法而不是变量，因此我无法对其进行观察。我将如何使用像[SCListener](http://github.com/stephencelis/sc_listener/tree/master)这样的类来设置一个允许用户按下按钮并让标签*不断*更新的应用程序？

谢谢，JP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-11T06:17:16.590

KVO 不起作用的原因与它“不是变量”这一事实无关。KVO 观察*键*，而不是变量。完全可以观察没有基础变量的属性。在这种情况下它不起作用的原因是 SCListener 不会发出 KVO 通知。

最简单的解决方案：确定您想要的分辨率并让计时器以该速率轮询您的 SCListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T07:22:13.127

查克 说

> 最简单的解决方案：确定您想要的分辨率并让计时器以该速率轮询您的 SCListener

同意。[更复杂的解决方案：阅读 Apple 的文档](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/KeyValueCoding/Concepts/Compliant.html#//apple_ref/doc/uid/20002172)后使 SCListener KVO 兼容，并将结果回馈给社区。它将使您的代码更干净，教您 KVO 的工作原理并使用 SCListener 解决其他人的问题。

[监控 iPhone 麦克风](https://stackoverflow.com/questions/625225/monitor-iphone-mic) [iPhone 麦克风音量](https://stackoverflow.com/questions/477020/iphone-mic-volume)

# asp.net - 以编程方式阻止 ASP .NET AJAX 脚本呈现

> ID：633452
> 
> 赞同：0
> 
> 时间：2009-03-11T05:28:39.343
> 
> 标签：asp.net, ajax, scriptmanager

有谁知道我可以阻止所有 .NET AJAX 脚本呈现的方法，即使页面上存在 ScriptManager ？

ScriptManager 的 Visible 属性已被覆盖和禁用，因此如果您尝试设置 Visible 属性，您将收到 NotImplementedException。

我想这样做的原因是，当不需要时，我不希望这些大块的 javascript 遍布我的页面。ScriptManager 需要包含在母版页中，以确保只添加一个 ScriptManager，但是必须拥有同一个母版页的两个版本 - 一个启用 ajax，一个不启用，这将是愚蠢的。

**编辑：**我实际上是在使用 Telerik 的 RadScriptManager 和 RadAjax，以防有人知道使用这些类的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T18:26:30.263

查看 Bertrand LeRoy 的“将 ScriptManager 与其他框架一起使用”

[http://weblogs.asp.net/bleroy/archive/2008/07/07/using-scriptmanager-with-other-frameworks.aspx](http://weblogs.asp.net/bleroy/archive/2008/07/07/using-scriptmanager-with-other-frameworks.aspx)

包含一个从 ScriptManager 继承的控件，该控件撤消了它的一些内置脚本添加，并允许您将其替换为您喜欢的任何框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T05:52:34.887

不要将它用作母版页中的实际控件，而是创建它的实例并在需要时将其添加到页面中；甚至可能在您的母版页上有一个属性来控制它是否被包含在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T06:08:11.543

您可以检查的一个选项可能是使用 ScriptManager 的[CompositeScript](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.compositescript.aspx)块。这样，您可以将它们全部合并到 1 个浏览器可缓存的脚本资源调用中。您也可以将任何其他常用脚本添加到此块中。

有一个关于它的[截屏视频](http://www.asp.net/learn/3.5-SP1/video-296.aspx)，我以前用过它，它似乎工作得很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-12-16T12:57:02.667

我已经解决了一个类似的问题 - 即：以编程方式将 HoverMenuExtender 从 Ajax 控件工具包中放入或排除 - 通过将其包装在**<asp:PlaceHolder>**标记中，该标记允许在代码隐藏中设置其**Visible属性。**如果占位符不可见，它将不会呈现到页面上 - 包括所有子控件。没有用 ScriptManager 尝试过，但它也可以在这里工作。

干杯，奥利弗

# c# - 异步连接

> ID：633459
> 
> 赞同：0
> 
> 时间：2009-03-11T05:33:57.257
> 
> 标签：c#, networking, asynchronous

我需要使用 BeginConnect 函数，但是我找不到任何生动的例子来说明它的用法。所以我想让我的回调函数说'funct'语法如何？

很多网站都给出了语法，但是当我使用该方法时出现了一些错误。只需发送一行显示方法调用的用法即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T05:48:23.120

我假设您正在谈论 .NET 框架中的 Socket.BeginConnection。MSDN 文档包含几个示例。这[一个](http://msdn.microsoft.com/en-us/library/bew39x2a.aspx)展示了如何使用套接字的异步函数的完整示例。

# lotus-notes - 从 Lotus Notes 字段中提取值列表

> ID：633460
> 
> 赞同：0
> 
> 时间：2009-03-11T05:34:11.873
> 
> 标签：lotus-notes

我正在使用 LN java API 将 Lotus Notes 数据库迁移到 SQL Server。在遍历文档中的每个 LN 字段时，我发现所有表格信息都有字段名称，如 fld、fld_1、fld_2 等，其中 fld 表示列的名称，编号方案用于处理每一行。有没有一种使用 LN java API 将这些信息提取为数组的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-20T23:53:40.357

那么“简单”可能是一个模棱两可的术语。

如果你还没有解决这个问题。您可以编写一个循环并抓取每个字段的方法，如下所示：

```
import lotus.domino.*;
....
public static void main(String[] arg) {

    for(int i=1 ;i<MAX_FIELD;i++) {
        Item itm = doc.getFirstItem("field_"+String.valueOf(i));
        if (itm != null) {
            // if it's a multi-value field.
            Vector v = item.getValues();
            // do other stuff here with the values.
         };
    }
} 
```

您需要确保在项目中导入了适当的 NotesJava API。

请记住，文档上的每个字段实际上都是具有 1 个或多个值的数组。这些字段（“field_1”、“field_2”等）由开发人员任意定义。这是模拟类似表的数据结构的常见做法。通常字段代表列而不是行。但是使用“item”对象以这种方式访问​​该字段应该可以让您访问数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-11T13:34:55.260

没有简单的方法，或者更具体地说，Lotus Notes 无法帮助您完成任务。Lotus Notes 是一个“平面文件”数据库，每个文档可以包含任意数量的项目（列）。

尽管 Lotus Notes 表单可能会使用表格或布局区域以表格格式显示数据，但保存该数据的文档（记录）就像 SQL 表的单行一样，无法对其中的项目进行逻辑分组例如，将所有 fld_ 项关联在一起。

我的建议是使用您认为方便的任何数据结构将数据从项目中获取到 SQL 中。这可能是一个数组或自定义对象，然后可以保存到数据库中。

# continuous-integration - 如何确定需要哪个平台版本？

> ID：633463
> 
> 赞同：1
> 
> 时间：2009-03-11T05:37:23.393
> 
> 标签：continuous-integration, version-detection, platform-specific

这经常出现：我已经构建了软件，并且可能使用了某些版本（例如，Java 1.6.10 或 PHP 5.2）更高版本上可用的一些新语言/平台/标准库功能，但我当然不能完全记住。我只确定它至少在我正在使用的版本上运行（通常是可用的最新版本），但它也可能在稍旧的版本上运行。

手动浏览代码、保留列表并将其与平台发行说明进行比较显然不是非常复杂的选择。有没有办法自动执行此操作（除了烘焙您自己的版本检查器解析器）？我个人至少对以下语言感兴趣，但请自由添加：

*   爪哇
*   Python
*   PHP
*   C++（也许还有 C）
*   添加您的最爱。

简单地在旧版本上进行测试是一种蛮力方法，它的优点是您将知道代码是否真的*有效*，而不仅仅是它*应该*有效。但这可能很乏味，所以我仍然对某种通过源代码检查正在使用的平台功能的自动机感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-11T05:39:38.413

首先想到的是持续集成的构建自动化。如果您针对不同的机器进行测试，您会发现哪个版本破坏了您的代码。

# javascript - 在 safari 中读取 RSS 的 Javascript？

> ID：633467
> 
> 赞同：0
> 
> 时间：2009-03-11T05:40:31.000
> 
> 标签：javascript, rss

我四处搜索，似乎没有办法通过 javascript 读取远程 RSS 文件......特别是在 safari

这或多或少是我想要做的......

我试过了

```
xmlDoc = new ActiveXObject("Microsoft.XMLDOM"); 
```

或者

```
xmlDoc = document.implementation.createDocument("","",null); 
```

接着

```
xmlDoc.load('http://localhost/drupal/feed'); 
```

这是它打破的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-11T05:51:21.910

Google 中“使用 javascript 阅读 rss”的第一个结果是[这篇文章](http://www.xml.com/lpt/a/1672)，它准确地描述了您打算做什么（以跨浏览器的方式，不少于）。

您在上面粘贴的代码不起作用的原因是您使用`ActiveXObject`的是 Safari 不使用的。Active X 对象是 Internet Explorer 独有的东西。Safari、Firefox、Opera 和其他符合标准的浏览器使用`XMLHttpRequest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-19T21:11:07.980

如果您不想自己动手，请看[一下](http://code.google.com/apis/ajaxfeeds/)。它是 Google 的 AJAX Feed 库。几个月前我不得不为一个客户加载一个博客，这为我节省了很多时间。

# c# - IDataErrorInfo：不验证输入

> ID：633472
> 
> 赞同：1
> 
> 时间：2009-03-11T05:43:03.163
> 
> 标签：c#, wpf, validation, idataerrorinfo

我有一个包含文本框的用户控件。我有一个名为 Person 的类，它实现了 IDataErrorInfo 接口：

```
class Person : IDataErrorInfo
{
private bool hasErrors = false;
#region IDataErrorInfo Members

        public string Error
        {            
            get 
            {
                string error = null;
                if (hasErrors)
                {
                    error = "xxThe form contains one or more validation errors";
                }
                return error;
            }
        }

        public string this[string columnName]
        {
            get 
            {
                return DoValidation(columnName);
            }
        }
        #endregion
} 
```

现在用户控件公开了一个名为 SetSource 的方法，代码通过该方法设置绑定：

```
public partial class TxtUserControl : UserControl 
    {          
        private Binding _binding;

        public void SetSource(string path,Object source)
        {
            _binding = new Binding(path);
            _binding.Source = source;
            ValidationRule rule;
            rule = new DataErrorValidationRule();
            rule.ValidatesOnTargetUpdated = true;            
            _binding.ValidationRules.Add(rule);
            _binding.ValidatesOnDataErrors = true;
            _binding.UpdateSourceTrigger = UpdateSourceTrigger.LostFocus;
            _binding.NotifyOnValidationError = true;            
            _binding.ValidatesOnExceptions = true;
            txtNumeric.SetBinding(TextBox.TextProperty, _binding);                
        }
...
} 
```

包含用户控件的 WPF 窗口具有以下代码：

```
public SampleWindow()
    {
        person= new Person();
        person.Age = new Age();
        person.Age.Value = 28;

        numericAdmins.SetSource("Age.Value", person);
    }
    private void btnOk_Click(object sender, RoutedEventArgs e)
    {         

        if(!String.IsNullOrEmpty(person.Error))
        {
            MessageBox.Show("Error: "+person.Error);
        }
    } 
```

鉴于此代码，绑定工作正常，但验证永远不会被触发。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-11T05:51:22.113

您的`Age`班级将需要实施`IDataErrorInfo`. `Person`不会要求您的班级验证`Age`的属性。

如果这不是一个选项，我为 WPF 编写了一个验证系统，它的扩展性足以支持这一点。网址在这里：

*   [http://paulstovell.com/Downloads/ValidationScopes.zip](http://paulstovell.com/Downloads/ValidationScopes.zip)

ZIP 中有一个描述它的 word 文档。

编辑：这是 age 可以实现 IDataErrorInfo 而不会太聪明的一种方式：

```
class Constraint 
{
    public string Message { get; set; }
    public Func<bool> Validate;
    public string Name { get; set; }
}

class Age : IDataErrorInfo
{
    private readonly List<Constraint> _constraints = new List<Constraint>();

    public string this[string columnName]
    {
        get 
        {
            var constraint = _constrains.Where(c => c.Name == columnName).FirstOrDefault();
            if (constraint != null)
            {
                if (!constraint.Validate())
                {
                    return constraint.Message;
                }
            }
            return string.Empty;
        }
    }
}

class Person
{
    private Age _age;

    public Person() 
    {
        _age = new Age(
            new Constraint("Value", "Value must be greater than 28", () => Age > 28);
    }
} 
```

另请参阅此链接：

[http://www.codeproject.com/KB/cs/DelegateBusinessObjects.aspx](http://www.codeproject.com/KB/cs/DelegateBusinessObjects.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-02-15T21:05:35.987

另一种选择可能是在 Age 类上实现 IDataErrorInfo 并在其上创建一个事件，就像`OnValidationRequested`Person 类应该捕获的那样。这样，您可以根据 Person 类的其他属性验证 Age 字段。

# c# - 使用 UNC 路径运行 exe 时，Microsoft.Practices.EnterpriseLibrary 出现部分受信任的调用者错误？

> ID：633477
> 
> 赞同：2
> 
> 时间：2009-03-11T05:46:42.390
> 
> 标签：c#, web-config

我创建了一个控制台应用程序，当我从命令行本地运行时，它工作正常。它记录到本地文件。

当我将它复制到另一台机器并尝试从命令行运行时

IE

```
//AnotherServer/d$/Apps/MyExe 
```

我得到这个错误。

```
An error occurred creating the configuration section handler for loggingConfiguration: That assembly does not allow partially trusted callers. 
```

我的 App.config 包含

```
 <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </configSections>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="true"
    defaultCategory="General" logWarningsWhenNoCategoriesMatch="true">
    <listeners>
      <add source="Enterprise Library Logging" formatter="Text Formatter"
        log="Application" machineName="" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        traceOutputOptions="None" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        name="Formatted EventLog TraceListener" />
      <add fileName="c:\Logs\UnzipEmailAttachment.log" rollSizeKB="0" timeStampPattern="yyyy-MM-dd"
        rollFileExistsBehavior="Increment" rollInterval="Day" formatter="Text Formatter"
        header="----------------------------------------" footer="----------------------------------------"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        traceOutputOptions="Timestamp" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        name="Rolling Flat File Trace Listener" />
    </listeners>
    <formatters>
      <add template="Timestamp: {timestamp}&#xD;&#xA;Message: {message}&#xD;&#xA;Category: {category}&#xD;&#xA;Priority: {priority}&#xD;&#xA;EventId: {eventid}&#xD;&#xA;Severity: {severity}&#xD;&#xA;Title:{title}&#xD;&#xA;Machine: {machine}&#xD;&#xA;Application Domain: {appDomain}&#xD;&#xA;Process Id: {processId}&#xD;&#xA;Process Name: {processName}&#xD;&#xA;Win32 Thread Id: {win32ThreadId}&#xD;&#xA;Thread Name: {threadName}&#xD;&#xA;Extended Properties: {dictionary({key} - {value}&#xD;&#xA;)}"
        type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        name="Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Formatted EventLog TraceListener" />
          <add name="Rolling Flat File Trace Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Formatted EventLog TraceListener" />
          <add name="Rolling Flat File Trace Listener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration>
  <exceptionHandling>
    <exceptionPolicies>
      <add name="GeneralExceptionPolicy">
        <exceptionTypes>
          <add type="System.Exception, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            postHandlingAction="NotifyRethrow" name="Exception">
            <exceptionHandlers>
              <add logCategory="General" eventId="100" severity="Error" title="Enterprise Library Exception Handling"
                formatterType="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.TextExceptionFormatter, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
                priority="0" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
                name="Logging Handler" />
            </exceptionHandlers>
          </add>
        </exceptionTypes>
      </add>
    </exceptionPolicies>
  </exceptionHandling> 
```

你能解释一下错误以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-08T16:21:19.517

如果您从另一台计算机上的网络驱动器运行，则可以通过以下方式允许该网络驱动器具有完全信任：控制面板-> 管理工具-> Microsoft .Net 框架配置-> 我的电脑-> 运行时安全策略->机器 -> 代码组 -> All_code -> 本地 Intranet 区域

然后创建一个新策略，成员条件是您要允许的网络驱动器。您可能还必须在 all_code 级别添加新策略

# c# - 任何人都有任何 C# 代码来解析 robots.txt 并针对它评估 URL

> ID：633479
> 
> 赞同：6
> 
> 时间：2009-03-11T05:47:23.557
> 
> 标签：c#, robots.txt

简短的问题：

有没有人有任何 C# 代码来解析 robots.txt，然后根据它评估 URL，所以看看它们是否会被排除在外。

长问题：

我一直在为尚未发布给谷歌的新网站创建站点地图。站点地图有两种模式，用户模式（如传统站点地图）和“管理员”模式。

管理模式将显示网站上所有可能的 URL，包括自定义条目 URL 或特定外部合作伙伴的 URL - 例如`example.com/oprah`在 Oprah 上看到我们网站的任何人。我想在 Excel 电子表格以外的地方跟踪已发布的链接。

我不得不假设有人可能会`/oprah`在他们的博客或其他地方发布链接。我们实际上并不希望这个“迷你奥普拉网站”被编入索引，因为它会导致非奥普拉观众能够找到奥普拉的特别优惠。

因此，在创建站点地图的同时，我还添加了 URL，例如`/oprah`要从我们的`robots.txt`文件中排除。

**然后**（这是实际的问题）我想“能够在站点地图上显示文件是否被索引并且对机器人可见不是很好吗”。这将非常简单 - 只需解析 robots.txt，然后评估针对它的链接。

然而，这是一个“奖励功能”，我当然没有时间去写它（甚至认为它可能没有那么复杂） - 所以我想知道是否有人已经编写了任何代码来解析 robots.txt ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-11T06:25:53.090

讨厌这么说，但只需谷歌“C# robots.txt 解析器”并单击第一个命中。这是[一篇关于在 C# 中实现的名为“Searcharoo”的简单搜索引擎的 CodeProject 文章](http://www.codeproject.com/KB/IP/Searcharoo_4.aspx)，它包含一个类 Searcharoo.Indexer.RobotsTxt，描述为：

> 1.  检查，如果存在，下载并解析站点上的 robots.txt 文件
> 2.  为 Spider 提供一个接口来检查每个 Url 是否符合 robots.txt 规则

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T23:46:50.613

我喜欢[http://code.google.com/p/robotstxt/](http://code.google.com/p/robotstxt/)中的代码和测试，我会推荐它作为起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-13T19:01:48.440

有点自我推销，但由于我需要一个类似的解析器并且找不到任何我满意的东西，我创建了自己的：

[http://nrobots.codeplex.com/](http://nrobots.codeplex.com/)

我喜欢任何反馈

# ruby-on-rails - 助手和部分有什么区别？

> ID：633484
> 
> 赞同：14
> 
> 时间：2009-03-11T05:50:47.573
> 
> 标签：ruby-on-rails, ruby

从功能上讲，两者似乎都是基于某些参数生成 HTML 的子程序。

在特定情况下使用其中一个或另一个的决定纯粹是审美的吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-11T06:33:45.863

Helpers 和 partials 都打算在你的视图层中使用。不同之处在于帮助程序主要是 ruby​​ 代码，旨在用作从模板调用的方法库。部分是 .html.erb 文件，其中包含可以插入到主模板中的部分模板。所以简而言之，逻辑应该进入帮助程序，可重用的 html 片段（具有最少的嵌入式逻辑）应该是部分的。希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-11T06:16:21.617

这个决定不是纯粹的审美。您想在视图中使用助手。例如，您将使用部分生成产品的 html，但在该部分（或任何其他视图）中，您可以使用帮助器生成部分的一部分，这可能需要一些逻辑来确定要显示的确切内容.

# java - Java switch 案例：带或不带大括号？

> ID：633497
> 
> 赞同：95
> 
> 时间：2009-03-11T06:00:41.403
> 
> 标签：java, performance, switch-statement

考虑以下两个带有大括号的片段：

```
switch (var) {
  case FOO: {
    x = x + 1;
    break;
  }

  case BAR: {
    y = y + 1;
    break;
  }
} 
```

不带大括号：

```
switch (var) {
  case FOO:
    x = x + 1;
    break;

  case BAR:
    y = y + 1;
    break;
} 
```

我知道，在带有大括号的代码段中，通过将每个案例括在大括号中来创建一个新的范围。但是，如果每个案例都不需要新的范围（即没有变量名被重用），那么在案例中使用大括号是否会降低性能？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2009-03-11T06:05:56.663

> 将大括号与案例一起使用是否会降低性能？

没有任何。

花括号可以帮助编译器确定变量、条件、函数声明等的范围。一旦将代码编译为可执行文件，它就不会影响运行时性能。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-03-11T06:24:33.063

从执行的角度来看，没有性能损失。

从编译的角度来看，性能会略有下降，因为要解析的内容更多，但如果有人真的关心它，他们将不得不将他们的代码全部写在一行上:-)

现在对于我们帖子的意见部分...我总是放入 { 和 } 因为对可维护性有一个惩罚，因为您可能不得不在以后将它们放入，而且放置它们可能会很痛苦稍后……但那是 103% 的个人偏好。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-11T10:55:47.607

正如我们所知，switch case 的大括号是不必要的。使用大括号 case 可能会导致对 case 范围的混淆。

左大括号通常与有意义的事情相关联，例如函数的开始或循环的开始或类声明的开始或数组初始化的开始等......我们知道，当遇到中断时，case 会从 switch 块中中断陈述。因此，对于无知的读者来说，使用花括号似乎意味着不同的 case 范围。因此，为了更好的编程可读性，最好避免使用花括号。

即当我有类似的东西时，

```
switch(i)
{
  case 1 :
  {
     //do something
  }
  System.out.println("Hello from 1");

  case 2: 
  ....
} 
```

“Hello from 1”被打印出来。但是使用大括号可能会暗示一个无知的读者认为案例以'}'结尾，已经知道大括号在循环、方法等情况下通常意味着什么。

就像我们在“C”中有跳转到标签语句一样，控件只是切换到大小写并继续执行。因此，有了这种理解，在为 switch 编写 case 时使用花括号只是一种不好的做法。

从技术上讲，当与有效语法一起使用时，您可以用一对额外的花括号将任何代码块括起来。至少对我来说，在 switch 中使用大括号看起来很糟糕，因为它似乎给人一种不同的感觉，就像我上面所说的那样。

我的建议：只是避免在开关盒中使用周围的大括号。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-03-11T06:27:07.503

带大括号。

switch 语句有很多可能出错的地方，我尽量避免它们，即

1.  忘记休息，从而导致案件失败
2.  忘记默认情况，因此不会捕获不满足条件的情况
3.  意外地在 case 语句之间重用变量，或者更糟糕的是，影响在 case 语句之间共享变量的变量。

使用大括号是防止 case 语句之间有意和无意共享变量的一种方法

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-11T06:07:04.913

这个问题可能会被关闭为“争论”（BRACE WAR！），但到底是什么。我实际上喜欢病例后的牙套。对我来说，它使丑陋的 switch 语法看起来更像其他语言结构。（在这种“情况”中使用大括号不会受到惩罚）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-03-11T06:13:47.253

您说可以省略大括号，因为没有重用变量名称。通过重用变量名，我假设您的意思是声明一个相同类型的新变量。

大括号实际上最有用，可以确保您最终不会`case`错误地在不同的 s 中重用相同的变量。他们今天没有声明任何变量，但是明天有人会添加它们，并且没有大括号，代码很容易出错。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-11T09:42:06.160

我不会将大括号用于开关盒。

*   没有大括号的 switch 语句看起来已经足够巴洛克了。

*   开关盒应该很短。当您需要声明变量时，这表明您做错了。

现在开始维护一些遗留的 C 代码，这些代码包含 500 多行的切换案例......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-11T06:55:37.230

我以前从未想过。在 case 子句中从来不需要大括号，所以无法真正理解为什么需要它们。就我个人而言，我不赞成“它会更容易维护”的想法，那只是垃圾，如果代码有意义并且有文档记录，它会更容易维护。

没有大括号......语法越少越好

# asp.net-mvc - ASP.net MVC 如何在验证失败时更改文本框类？

> ID：633501
> 
> 赞同：2
> 
> 时间：2009-03-11T06:04:45.357
> 
> 标签：asp.net-mvc, validation, textbox, highlight

我注意到在默认的 MVC 模板项目中，帐户注册字段通过类更改突出显示。

我似乎无法从我自己的代码中获得相同的行为（在同一个项目中 - 相同的 CSS 等）

什么可能阻止这种情况发生？

**更新**

我相信这与[我的其他问题之一有关](https://stackoverflow.com/questions/633365/asp-net-mvc-rc2-validationmessage-and-checkbox-conflict/633400#633400) 因为我遇到了 NullReferenceExceptions 问题，所以我已将 Html.ValidationMessage 字段更改为具有与目标字段不同的名称。

所以真的，我需要解决[这个](https://stackoverflow.com/questions/633365/asp-net-mvc-rc2-validationmessage-and-checkbox-conflict/633400#633400)问题

# c++ - 是否可以在现有 C++ 程序中使用（某些）AOP 概念而无需完全重构？

> ID：633506
> 
> 赞同：4
> 
> 时间：2009-03-11T06:07:55.927
> 
> 标签：c++, aop

我现在正在阅读 AOP，并想在我的代码中使用（一些）AOP 想法和方法。我没有任何第三方扩展，只有 MSVS 2005 环境。那么，是否有可能在我的日常工作中受益于 AOP 概念，而无需对现有代码进行完全重构（2 年的项目 x 5 名程序员）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-11T06:16:42.240

您可以使用 AspectC++ 编译器扩展而无需更改大部分代码。只需查看 AspectC++ 和它的[教程](http://www.google.co.in/url?sa=t&source=web&ct=res&cd=3&url=http%3A%2F%2Faosd.net%2F2004%2Ftutorials%2Faspectcpp.php&ei=IFa3SeawMJD67AOJi5WbCQ&usg=AFQjCNE9QZ9IUcheVdNbAN_AlXhJybTRPQ&sig2=xS1441_MXavFW8UWJv2dGg)。

# c# - 两个参数记忆

> ID：633508
> 
> 赞同：4
> 
> 时间：2009-03-11T06:08:59.917
> 
> 标签：c#, .net, functional-programming, memoization

在 C# 中，我如何记住一个带有两个参数的函数？

在记忆之前我必须咖喱吗？

[Wes Dyer 编写了我通常使用的 Memoization 代码](http://blogs.msdn.com/wesdyer/archive/2007/01/26/function-memoization.aspx)，但现在我需要两个参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-11T06:22:54.253

您只需创建一个 Memoize 方法的重载版本，它具有三种泛型类型，并接受一个带有两个参数和两个参数的函数。它仍然返回一个无参数函数：

```
public static Func<R> Memoize<A1,A2,R>(this Func<A1,A2,R> f, A1 a1, A2 a2)
{
  R value = default(R);
  bool hasValue = false;
  return () =>
    {
      if (!hasValue)
      {
        hasValue = true;
        value = f(a1,a2);
      }
      return value;
    };
} 
```

编辑：
或者，您需要为包含两个参数的 KeyValuePair 制作自定义 IEqualityComparer，以便 Memoize 方法能够返回具有两个参数的函数：

```
public static Func<A1,A2,R> Memoize<A1,A2,R>(this Func<A1,A2,R> f, IEqualityComparer<KeyValuePair<A1,A2>> comparer)
{
   var map = new Dictionary<KeyValuePair<A1,A2>,R>(comparer);
   return (a1,a2) =>
      {
         R value;
         KeyValuePair<A1,A2> key = new KeyValuePair<A1,A2>(a1,a2);
         if (map.TryGetValue(key, out value)) {
            return value;
         }
         value = f(a1,a2);
         map.Add(key, value);
         return value;
      };
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-11T13:29:58.827

Wes 有另一个帖子，他给出[了两个（或更多）参数版本的 Memoize](http://blogs.msdn.com/wesdyer/archive/2007/02/11/baby-names-nameless-keys-and-mumbling.aspx "婴儿名字、无名钥匙和喃喃自语")。它不需要自定义比较器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-14T20:19:34.377

使用新版本的 .NET，您可以通过使用元组来稍微简化已接受的解决方案的代码

```
 public static Func<TParam1, TParam2, TReturn> Memoize<TParam1, TParam2, TReturn>(Func<TParam1, TParam2, TReturn> func)
    {
        var map = new Dictionary<Tuple<TParam1, TParam2>, TReturn>();
        return (param1, param2) =>
        {
            var key = Tuple.Create(param1, param2);
            TReturn result;
            if (!map.TryGetValue(key, out result))
            {
                result = func(param1, param2);
                map.Add(key, result);
            }
            return result;
        };
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-11T06:21:07.003

你应该能够记住一对。这两个 arg 函数调用您记忆的单个 arg 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-10-28T12:58:39.317

我还在 C# 中做了一些关于记忆的工作。我的结果相似，但使用了从输入对象哈希码的串联派生的字典键。该模式可以扩展到 Func<> 允许的尽可能多的输入。

在这里查看更多信息：http: [//bit.ly/t6iNJP](http://bit.ly/t6iNJP)

# c# - 为什么 C# 不知道如何排序时让我编译排序代码

> ID：633511
> 
> 赞同：2
> 
> 时间：2009-03-11T06:11:31.363
> 
> 标签：c#, sorting

我觉得奇怪的是，C# 让我在我的类上调用 sort 并且没有指定对它们进行排序的方法，也没有编写比较重载。当我运行此代码时，弹出此错误

```
List<MyClass> myClassArray= new List<MyClass>();
//myClassArray.add(...);
myClassArray.Sort();

An unhandled exception of type 'System.InvalidOperationException' occurred in mscorlib.dll

Additional information: Failed to compare two elements in the array. 
```

为什么 C# 不知道如何排序时让我编译这段代码！-编辑-

法典询问它为什么这样做。我在评论中写了一个关于它为什么这样做的理论。这里有一些示例代码。

```
class A : IComparable<A>
{
    public int CompareTo(A a) { return 0; }
}
class C //: IComparable<A>
{
    public int CompareTo(A a) { return 0; }
}
    static void test()
    {
        A a = new A();
        bool b;
        C c = new C();

        object o = a;
        IComparable<A> ia = (IComparable<A>)o;
        b = ia == ia;

        o = c;
        IComparable<A> ic = (IComparable<A>)o;
        b = ic == ic;

        //uncomment this to get a compile time error
        //IComparable<A> ic2 = c;
        return;
    } 
```

如果您在返回之前取消注释该行，您将收到编译时错误。当您在类 c 中取消注释 IComparable 时，它​​将编译并工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-11T06:16:07.107

List<T> 的泛型参数没有限制要求它实现 IComparable<T>。如果有，它将（某种程度上）保证可以对元素进行排序，但是您将无法使用 List<T> 来保存未实现 IComparable 的任何内容。而且由于您可能不会对您创建的每个列表进行排序，因此这是正确的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-11T06:17:06.717

排序应该检查你的对象是否实现了[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)。这是一个运行时检查，由于您可能没有实现它，默认比较器不知道如何处理您的对象，因此它会引发异常。

它允许它编译，因为这不是语言特性，而是框架特性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-11T07:08:29.883

仅供参考；本质上，它用于`Comparer<T>.Default`进行比较。这实现`IComparer<T>`了，并且可以比较 2 个类型的对象`T`。在您第一次请求时选择实际实现（per `T`）；框架使用许多模式来选择实现——例如，类、“常规”结构，`Nullable<T>`它们都是单独处理的。同样，它会根据是否`T`实现`IComparable<T>`、`IComparable`或两者都不做选择（在这种情况下它会抛出异常）。

这提供了一种非常简单的方法来进行“鸭式”排序。同样，还有一个`EqualityComparer<T>.Default`that 检查`IEquatable<T>`，默认为`object.Equals`否则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-27T18:30:39.340

C# 可以说可能只是在 System.Object 中有一些关于如何像它一样对对象进行排序`Equals`以比较它们的身份的概念。

不幸的是，这导致了对内涵性与外延性、本地化等的担忧。

有一个`IComparable<T>`接口，但是内置的值类型不能实现这样的接口。

因此，没有什么好的方法可以只在编译时查看一个类型并明确知道它是否具有有意义的顺序。=(

C# 中演变的机制是使用`IComparer<T>`返回的实例，`Comparer<T>.Default`当您尝试对缺少排序的内容进行排序时会出现运行时错误。

通过允许多个`IComparer`s 和`IComparer<T>`s，您可以有多个替代排序的概念，这些排序适用于同一类型，所以很多都是好的，但并不是所有的都很好。

在内部，c# 使用一堆规则来查找，如果 T 是一个实例或者是表单等`Comparer<T>.Default`，它会以不同的方式处理这些 规则。`IComparable<T>``Nullable<T>`

例如来自[system/collections/generic/comparer.cs](http://www.koders.com/csharp/fid9F67062D1E3BF9542BF6C232AFC481E49AC6D728.aspx?s=Comparer%3CT%3E+System.Collections.Generic#L27)的代码：

```
 public static Comparer<T> Default {
        get {
            Comparer<T> comparer = defaultComparer;
            if (comparer == null) {
                comparer = CreateComparer();
                defaultComparer = comparer;
            }
            return comparer;
        }
    }

    private static Comparer<T> CreateComparer() {
        Type t = typeof(T);
        // If T implements IComparable<T> return a GenericComparer<T>
        if (typeof(IComparable<T>).IsAssignableFrom(t)) {
            //return (Comparer<T>)Activator.CreateInstance(typeof(GenericComparer<>).MakeGenericType(t));
            return (Comparer<T>)(typeof(GenericComparer<int>).TypeHandle.CreateInstanceForAnotherGenericParameter(t));
        }
        // If T is a Nullable<U> where U implements IComparable<U> return a NullableComparer<U>
        if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(Nullable<>)) {
            Type u = t.GetGenericArguments()[0];
            if (typeof(IComparable<>).MakeGenericType(u).IsAssignableFrom(u)) {
                //return (Comparer<T>)Activator.CreateInstance(typeof(NullableComparer<>).MakeGenericType(u));
                return (Comparer<T>)(typeof(NullableComparer<int>).TypeHandle.CreateInstanceForAnotherGenericParameter(u));                
            }
        }
        // Otherwise return an ObjectComparer<T>
        return new ObjectComparer<T>();
    } 
```

从本质上讲，这让微软逐渐为他们自己的代码添加了特殊情况，但不幸的是，仅`Comparer<T>.Default`用于自定义`IComparable<T>`实例的代码非常糟糕。

上的 Sort 方法`IList<T>`，假设`Comparer<T>.Default`它可以用来比较你的对象，但它无法查看类型 T 并告诉它这样做，所以它假设它是安全的，并且只在运行时稍后才意识到`MyClass`不一起玩。

# javascript - 如何在树中的所有节点上运行一些代码？

> ID：633513
> 
> 赞同：0
> 
> 时间：2009-03-11T06:13:02.280
> 
> 标签：javascript, jquery

我想根据从数据库返回的值在所有 treeView 节点上运行一些代码，并重复此操作直到返回某个值。

我在想：

1.  为我所有的树节点提供相同的 css 类，以便我可以从 JQuery 访问它们
2.  在我的 JQuery 函数中有一个计时器，它使用 ajax 进入数据库，当返回某个值时停止计时器

这里有两个问题。如何使我的函数为每个节点运行以及如何在 JavaScript 中执行计时器，所以：

```
$(函数(){
    $('cssClassOfAllMyNodes').WhatFunctionToCallHere?((){

`//How do I do Timer functionality in JavaScript?
ForEachTimeInterval
{
   //use Ajax to go to database and retrieve a value
   AjaxCallBackFunction(result)
   {
     if (result = 1)
     //How to stop the timer here?
   }
}
});` 

});

希望我很清楚。非常感谢

非常感谢您的回答。我希望你对设计发表评论。

基本上，我想要实现的是 Windows Wokflow 类型的功能，其中我的树中的每个节点都根据其状态更新其图像，其状态是通过使用树节点唯一的键查询数据库获得的。如果您有任何想法，我愿意接受其他方式来实现这一点。再次感谢

            回答 #1

赞同：3

时间：2009-03-11T06:14:25.163

无需评论您的设计，您可以参考这些

[$.each()](http://docs.jquery.com/Each)

[setTimeout()](https://developer.mozilla.org/En/DOM/window.setTimeout)或[setInterval()](https://developer.mozilla.org/En/DOM/window.setInterval)

            回答 #2

赞同：1

时间：2009-03-11T11:04:56.650

你可以做：

```
$(function(){
  $('cssClassOfAllMyNodes').each(function (){
    // Do something with "this" - "this" refers to current node.
  });
}); 
```

在 JS 中处理计时器的正确方法是引用每个超时或间隔，然后将其清除。

它们之间的区别是：

*   超时只会运行一次，除非之前停止；
*   间隔将无限期地运行，直到停止。

因此，您可以执行以下操作：

```
var delay = 2000; // miliseconds
var timer = setTimeout("functionToBeCalled", delay);
clearTimeout(timer); // whenever you need. 
```

请注意，您可以将带有要调用的函数名称的字符串传递给 setTimeout（与 setInterval 相同）。或者您可以传递对函数本身的引用：

```
var callback = function () { alert(1); };
var timer = setTimeout(callback, delay); 
```

确保不要为 AJAX 请求设置间隔，因为您的响应可能会延迟，并且对服务器的连续调用最终可能会重叠。

相反，您应该调用 setTimeout 并在答案到达时再次调用 setTimeout。

        asp.net - 如何正确格式化来自 ASP.NET AJAX 的 JSON 响应（用于 jQuery）？

ID：633515

赞同：0

时间：2009-03-11T06:13:24.180

标签：asp.net, jquery

伙计们，我似乎无法让对象序列化在我的应用程序客户端正常工作？当我在 jQuery 中使用带有 text/json 响应 mime 类型的 getJSON() 方法（使用 JSON.Net 库序列化）时，它工作正常，但是一旦我将它移到 ajax() 请求（所以我可以在我的页面上的 webmethods 中发布我的代码）它分崩离析。任何想法将不胜感激。

编辑：我使用的是框架 2.0，而不是 3.5

我的 javascript 看起来像这样：

```
 function companySearch(txt) 
    {
        $("#<%= divCompanyResult.ClientID %>").hide();
        $("#<%= divCompanyResult.ClientID %>").html("");

        var strCompanySearch = $("#<%= tbCompanySearch.ClientID %>").val();

        $.ajax
        ({
            type: "POST",
            url: "Home.aspx/GetCompanies", 
            contentType: "application/json; charset=utf-8", 
            datatype: "json",
            data: "{name: '" + strCompanySearch + "'} ", 
            success: companySearchSuccess,
            error: onError
        });

        return (true);
    }

    function companySearchSuccess(response)
    {
        $.each(response, 
            function(i, company) 
            {
                $("#<%= divCompanyResult.ClientID %>").prepend(company.Name + "<br />");
            });

        $("#<%= divCompanyResult.ClientID %>").slideDown(1000);
    } 
```

我的 .ASPX 页面（注意它是一个页面，而不是 Web 服务），看起来像这样：

```
 [WebMethod]
    public static Company[] GetCompanies(string name)
    {
        Company[] companies = Company.FindCompanies(name);

        return companies;
    } 
```

对象返回：

```
[ActiveRecord]
public class Company : ActiveRecordBase<Company>
{
    private int iD;
    private string name;
    private string accountNo;
    private string streetAddr1;
    private string streetAddr2;
    private string streetSuburb;
    private string streetCity;
    private string postAddr1;
    private string postAddr2;
    private string postSuburb;
    private string postState;
    private string postPC;
    private string accountType;
    private string accountSubType;
    private string areaRep;
    private string status;
    private string overview;
    private string bpcsId;
    private string modifiedBy;
    private DateTime modifiedDate;
    private IList<Contact> contacts;

    [PrimaryKey]
    public int ID { get { return this.iD; } set { this.iD = value; } }
    [Property]
    public string Name { get { return this.name; } set { this.name = value; } }
    [Property]
    public string AccountNo { get { return this.accountNo; } set { this.accountNo = value; } }
    [Property]
    public string StreetAddr1 { get { return this.streetAddr1; } set { this.streetAddr1 = value; } }
    [Property]
    public string StreetAddr2 { get { return this.streetAddr2; } set { this.streetAddr2 = value; } }
    [Property]
    public string StreetSuburb { get { return this.streetSuburb; } set { this.streetSuburb = value; } }
    [Property]
    public string StreetState { get { return this.streetCity; } set { this.streetCity = value; } }
    [Property]
    public string StreetPC { get { return this.streetCity; } set { this.streetCity = value; } }
    [Property]
    public string PostAddr1 { get { return this.postAddr1; } set { this.postAddr1 = value; } }
    [Property]
    public string PostAddr2 { get { return this.postAddr2; } set { this.postAddr2 = value; } }
    [Property]
    public string PostSuburb { get { return this.postSuburb; } set { this.postSuburb = value; } }
    [Property]
    public string PostState { get { return this.postState; } set { this.postState = value; } }
    [Property]
    public string PostPC { get { return this.postPC; } set { this.postPC = value; } }
    [Property]
    public string AccountType { get { return this.accountType; } set { this.accountType = value; } }
    [Property]
    public string AccountSubType { get { return this.accountSubType; } set { this.accountSubType = value; } }
    [Property]
    public string AreaRep { get { return this.areaRep; } set { this.areaRep = value; } }
    [Property]
    public string Status { get { return this.status; } set { this.status = value; } }
    [Property]
    public string Overview { get { return this.overview; } set { this.overview = value; } }
    [Property]
    public string BPCSId { get { return this.bpcsId; } set { this.bpcsId = value; } }
    [Property]
    public string ModifiedBy { get { return this.modifiedBy; } set { this.modifiedBy = value; } }
    [Property]
    public DateTime ModifiedDate { get { return this.modifiedDate; } set { this.modifiedDate = value; } }

    // Inverse ensures is read-only ie. Contact controls the relationship
    // Castle will usually infer relationship, but we explicitly set just to be on the safe side
    [HasMany(Inverse=true, Table="Contact", ColumnKey="CompanyId")] 
    [ScriptIgnore]
    public IList<Contact> Contacts { get { return this.contacts; } set { this.contacts = value; } }

    protected Company() { }

    public Company(string Name, string StreetAddr1)
    {
        this.Name = Name;
        this.StreetAddr1 = StreetAddr1;

        ModifiedBy = "Test";
        ModifiedDate = DateTime.Now;
    }

    public static Company[] FindCompanies(string name)
    {
        return FindAll(Expression.InsensitiveLike("Name", "%" + name + "%"));
    } 
} 
```

            回答 #1

赞同：3

时间：2009-03-11T07:05:19.907

原来我在我的ajax请求中忽略了dataType属性的驼峰式大小写

老的：

```
 $.ajax
    ({
        type: "POST",
        url: "Home.aspx/GetCompanies", 
        contentType: "application/json; charset=utf-8", 
        datatype: "json",
        data: "{name: '" + strCompanySearch + "'} ", 
        success: companySearchSuccess,
        error: onError
    }); 
```

解决方案

```
 $.ajax
    ({
        type: "POST",
        url: "Home.aspx/GetCompanies", 
        contentType: "application/json; charset=utf-8", 
        dataType: "json",
        data: "{name: '" + strCompanySearch + "'} ", 
        success: companySearchSuccess,
        error: onError
    }); 
```

希望这可以帮助其他人避免我遭受的搜索谷歌、教程和博客的时间……Doh！

            回答 #2

赞同：1

时间：2009-03-11T06:23:03.020

Microsoft 的 WebMethods 将返回数据编码到名为“d”的对象中。因此，您需要将代码更改为如下所示：

```
function companySearchSuccess(response)
{
  // Get encoded data
  response = response.d; // you could rename this, or just change the variable reference

} 
```

这样做是为了防止一种特殊的 javascript 漏洞利用。您可以[在此处](http://quickstarts.asp.net/previews/ajax/jsonsyntax.aspx)和[此处](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)查看更多详细信息。

        windows - 用于 Windows 的发送邮件

ID：633531

赞同：2

时间：2009-03-11T06:21:32.570

标签：windows, email, sendmail

我正在寻找一个可以与命令行参数一起使用的邮件发送程序。  

我试过[jaber 的](http://www.geocities.com/jaber_aljundi/)sendmail 。它真的很整洁，但不幸的是它被 SSL auth 破坏了。

有什么选择吗？  

（哦，是的，我不想使用 perl ：P）

            回答 #1

赞同：2

时间：2009-03-12T08:11:08.587

您可以使用一个小的 PowerShell 脚本：

```
$smtp = new-object Net.Mail.SmtpClient($smtpServer)
$smtp.Send($emailFrom, $emailTo, $subject, $body) 
```

函数调用的值必须使用 $args 数组从命令行参数中检索。

            回答 #2

赞同：1

时间：2009-03-11T06:30:22.363

您可以通过安装[cygwin](http://www.cygwin.com/)在 windows 下使用[exim](http://www.exim.org/)。我以前用它作为 Windows 上的传出 MTA。很确定它也有一个 sendmail 门面。

            回答 #3

赞同：1

时间：2009-03-12T07:50:19.463

一个奇怪的选择：您可以获得[sendmail.cpp](http://codesuppository.blogspot.com/2008/06/sendmail-send-mail-using-embedded-blat.html)和 .h 并包含在您的项目中。它以一种非常奇特的方式在内部使用 blat。

我想早点使用 ShellExecute(..) 启动 cmd 提示符来发送邮件，但这是一种更神秘的发送邮件方式。

            回答 #4

赞同：1

时间：2009-07-26T13:25:34.590

正如 Reno 在他的问题中提到 SSL，我建议记住 Net.Mail.SmtpClient 仅支持显式 SSL。实际上，如果您像邮件客户端应用程序那样使用端口 587 而不是 465，通常会没问题。在此处查看更多详细信息

[System.Net.Mail 使用 SSL 对端口 465 进行身份验证](http://blogs.msdn.com/webdav_101/archive/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465.aspx)

        wpf - 跨平台开发 - 使用跨平台 UI 工具包还是在多个平台上原生？

ID：633537

赞同：3

时间：2009-03-11T06:24:56.963

标签：wpf, cocoa, cross-platform

我正在寻找一些论据来向我的老板和其他开发人员推销。  

我们目前正在完成初步的 UI 模型，并准备进入下一阶段的开发。同时，我一直在深入研究 Carbon、Win32 和 wxWidgets API，试图使某些控件在 Mac 和 Windows 平台上具有更原生的外观和感觉。  

我越深入研究 Win32 和 Carbon API 以在项目的 UI 中实现我们想要的东西，他们就越觉得过时，我越开始认为我们应该按照[这里](https://stackoverflow.com/questions/252514/create-a-cross-platform-windows-mac-os-x-application/252558#252558)最后一段中的描述来实现项目.  

我们正在为我们当前的项目使用 wxWidgets。wxWidgets 正在 wxCocoa 端口上出现，但在我们开始对我们的新应用程序进行重大开发工作之前，它似乎还没有准备好迎接黄金时段。在 Windows 方面，它封装了 Win32 API 而不是 WinForms 或 WPF（可能是由于本机代码与托管代码）。

我们已经在设计系统时考虑了 MVC 模式，因此除了必须编写两个本机 UI 之外，它应该是非常可行的，而且，恕我直言，使用 Cocoa 和 WPF 等现代 API 更容易获得所需的 UI 效果。

我一直试图巧妙地推动这些观点，但重大发展的开始即将到来。有没有人对如何在我们的下一个应用程序中使用原生 UI 工具包与坚持使用 wxWidgets 有任何建议？

提前致谢。

            回答 #1

赞同：8

时间：2009-03-11T08:19:31.820

在标准 C++ 中创建核心代码，并使用 Objective-C++ 和 Cocoa 在 Mac 上创建用户体验，使用 C++/CLI 和 C# 和 WPF 在 Windows 上创建用户体验。在您的 Mac 版本中遵循适用于 Mac 的平台指南，在您的 Windows 版本中遵循适用于 Windows 的平台指南，甚至不必考虑尝试共享用户界面代码。

管理此问题的一种好方法是遵循模型-模型控制器-视图控制器-视图架构，而不仅仅是模型-视图-控制器。您的模型控制器是*独立于平台的*，并管理您的应用程序的更高级别的功能。（例如，它的文档、文件格式、作业队列等的整个概念。）您的视图控制器是*平台相关的*，并在您的模型控制器和用户体验之间进行调解。

当然，您可能还需要一些模型级别的平台相关代码；例如在 Mac 上使用 NSOperation 和在 Windows 上使用线程池来实现作业队列。只需为此类事物创建自己的轻量级抽象即可。

            回答 #2

赞同：3

时间：2009-03-11T07:25:23.650

实际上我认为使用[Qt](http://www.trolltech.com)变得非常有趣，因为它现在是 LGPL

            回答 #3

赞同：2

时间：2009-03-11T06:52:22.060

每次添加抽象层时，您都会对细节进行控制以实现更快的开发。您将能够使用一些跨平台框架预先完成很多工作。另一方面，当你想做一些框架不支持的事情时——让我们面对现实吧：它不会实现那些原生 API 可以做的所有可能的事情——你要么必须实现它（适用于所有平台) 使用本机 API，或者做一些其他奇怪的骇客以获得“足够好”的解决方案。当然，当事情出现严重错误时，拥有你不拥有的额外代码层会使调试变得更加困难。尽可能多地拥有整个堆栈确实有​​话要说。

            回答 #4

赞同：2

时间：2009-03-11T10:58:01.830

编写两个字体末端是一项繁重的工作，**维护**两个前端是一项巨大的工作，如果您需要您的程序在多个平台上运行，请使用多平台工具包。

如果您编写特定于平台的前端，每个前端都使用该特定平台的最先进工具，您将获得更好的用户体验 - 但开发和维护这些前端的成本将与开发每个平台从头开始的整个应用程序（是的，即使使用 MVC）。

            回答 #5

赞同：1

时间：2009-03-11T06:46:02.857

就我个人而言，我宁愿坚持多平台，也不在乎那些令人眼花缭乱的东西，但如果我想推销这些原生 API 的使用，我会计算出事物之间的（最终用户可见的）差异在不同的 GUI 中完成。如果你能让他们相信，为了感觉原生，程序的用户界面在 Windows 和 OSX 上的外观和感觉必须非常不同（因为不同的设计指南/哲学/其他），他们应该明白，即使使用 wx，你仍然需要实现它两次，以适应这些不同的要求，所以您不妨使用真实的东西，即本机 API。

            回答 #6

赞同：1

时间：2009-03-11T07:04:04.403

另请参阅Google Chrome 邮件列表上的[此线程](http://groups.google.com/group/chromium-dev/browse_thread/thread/b89ab99a0c848b89/540a3f63f7b66bab)，讨论不同平台上 Chrome 的相同 UI 选择。

            回答 #7

赞同：0

时间：2009-03-11T08:12:41.803

Win32 肯定过时了，但您可能想研究类似 Microsoft Foundation Classes 之类的东西，它旨在使用 C++ 进行本机开发。我认为 MAC 也存在类似的情况。

就我个人而言，如果我处于您的情况，我也会适当地选择 QT 或 WX。

            回答 #8

赞同：0

时间：2009-03-11T18:29:14.740

*有没有人对如何在我们的下一个应用程序中使用原生 UI 工具包与坚持使用 wxWidgets 有任何建议？*

没有人喜欢一个聪明的*走廊*。

我认为行动胜于雄辩……做一个你认为可以做到的小原型，并展示出来。也许你必须在业余时间这样做。

Cocoa 真的很棒，所以我认为用很少的代码你就可以展示一个想法……嗯，这需要你足够了解 Cocoa。

        ruby-on-rails - 生成 rails 应用程序时从 rails 模板内部访问应用程序名称

ID：633547

赞同：8

时间：2009-03-11T06:34:02.760

标签：ruby-on-rails, ruby, templates

我在使用 rails 2.3 模板并希望能够将应用程序名称用作模板中的变量，所以当我使用时... 
...我希望能够访问 template.rb 中的 appname。有人知道怎么做吗？
谢谢

 `rails appname -m path/to/template.rb` 

            回答 #1

赞同：16

时间：2010-11-14T01:21:09.770

我一直在寻找这个问题的答案。不幸的是，上面的答案（@root）似乎在 Rails 3 中不起作用。

以下是您可以在 Rails 3 应用程序模板中访问的变量（更简单）：

```
@app_name
@app_path 
```

            回答 #2

赞同：8

时间：2009-03-11T21:15:00.597

感谢您的回答。迈克伍德豪斯，你离得太近了。事实证明，从 Rails 模板中访问 appname 所需要做的就是......  

```
@root.split('/').last 
```

@root 变量是初始化模板时创建的第一件事，并且在您的 Rails 模板中可用。RAILS_ROOT 不起作用。

            回答 #3

赞同：6

时间：2011-04-23T06:49:40.230

在 Rails 3 中，使用`app_name`属性。

请参阅[Rails::Generators::AppGenerator](http://api.rubyonrails.org/classes/Rails/Generators/AppGenerator.html)的文档。

            回答 #4

赞同：5

时间：2015-03-09T21:25:05.577

我遇到了类似的问题，上面列出的变量在 Rails 4 中都不可用。我发现`@name`在运行时可用

```
rails plugin new engines/dummy -m my_template.rb 
```

模板中还有其他有用的变量。您可以自己查看并使用`pry`. 在我添加的模板中

```
require 'pry'; binding.pry 
```

然后运行`ls`以显示可用实例变量的列表

```
ls -i
instance variables:
    @_initializer            @app_path  @behavior   @destination_stack  @extra_entries  @name           @output_buffer   @shell
    @_invocations            @args      @builder    @dummy_path         @gem_filter     @options        @rails_template  @source_paths
    @after_bundle_callbacks  @author    @camelized  @email              @in_group       @original_name  @shebang 
```

            回答 #5

赞同：4

时间：2009-03-11T06:49:48.930

可能有一种更直接的方法，但这似乎有效：

```
RAILS_ROOT.split('/').last 
```

编辑：Bleah - 这一次被否决了，选民是对的。如果我更仔细地阅读这个问题，我会注意到 2.3 和 template.rb 元素。道歉。

我怀疑在您需要应用程序名称时不会创建 RAILS_ROOT 。然而，看`ruby\lib\ruby\gems\1.8\gems\rails-2.2.2\bin\rails`，几乎发生的第一件事是：

```
app_path = ARGV.first 
```

它在脚本末尾使用，以允许在需要时完成 chdir 和冻结 - 我不知道我可以在创建时冻结，所以我至少学到了一些新东西。`ARGV`然后在这里使用：

```
Rails::Generator::Scripts::Generate.new.run(ARGV, :generator => 'app') 
```

这很快将我们带到了真正处理 ARGV 的地方：

```
rails-2.3.1\lib\rails_generator\scripts.rb 
```

我在哪里看到

```
Rails::Generator::Base.instance(options[:generator], args, options).command(options[:command]).invoke! 
```

这里下面的某个地方可能是处理模板的地方。恐怕我还处于 2.3 的早期阶段，模板是我还没有研究过的领域。

这比我的第一次努力有帮助吗？

            回答 #6

赞同：1

时间：2009-03-11T06:47:38.920

RAILS_ROOT 将为您提供根目录的绝对路径。您的应用名称将是最后一个“/”之后的字符串部分，您可以通过多种方式获取它。

编辑：还不足以完成工作。迈克和丹在下面熨平。

            回答 #7

赞同：0

时间：2010-05-20T16:52:36.803

我相信现在首选的方法是调用 Rails.root 而不再是 RAILS_ROOT。显然，行星轨道上的某个人厌恶大写或类似的重要原因。从 2.3.5 开始，它们似乎都可以工作。

            回答 #8

赞同：0

时间：2013-03-29T07:15:41.737

我收到错误

```
`template': undefined local variable or method `app_name' 
```

红宝石 1.9.2p290，导轨 3.2.11，雷神 0.18.0，Windows

但使用 rails 2.3 生成器：

```
class DynanavGenerator < Rails::Generators::Base 
```

（无法确定此错误是否发生在 rails 3.0.9 或更早版本）将类定义更改为：

```
class DynanavGenerator < Rails::Generators::NamedBase 
```

然后给出：

没有为所需参数“名称”提供值

然后我添加了一个“名称”（下面的“某物”）：

```
rails generate dynanav something --force 
```

这给出了原始错误，所以我添加了：

```
def app_name
  @name.titleize
end 
```

上课，一切都很好。

            回答 #9

赞同：0

时间：2019-02-06T15:03:28.627

从 Rails 4（可能是早期版本？）开始，使用 Rails.application.class 获取应用程序名称。例如，如果您的应用名为 Fizzbuzz，您可以通过以下几种方式访问​​它：

```
rails(development)> Rails.application.class
=> Fizzbuzz::Application
rails(development)> Rails.application.class.name
=> "Fizzbuzz::Application"
rails(development)> Rails.application.class.parent
=> Fizzbuzz
rails(development)> Rails.application.class.parent.to_s
=> "Fizzbuzz" 
```

        abap - OO ABAP：何时以及为什么？

ID：633548

赞同：1

时间：2009-03-11T06:34:14.490

标签：abap

在我的公司从 4.6c 升级到 ECC6.0 几个月后，我们的程序员团队仍在使用传统的 4.7c 方式进行编码。我渴望尝试 ABAP 的新 OO 方法，但令我沮丧的是，这里的大多数人只强调在给定的最短时间框架内完成工作。

我的问题是：

1）您组织中的人员何时真正开始使用 OO ABAP 进行编码？

2）人们是否有任何重要的理由想要以 OO 方式对其进行编码？例如，调用方法比 PERFORM 语句更快？

            回答 #1

赞同：10

时间：2009-03-11T20:59:07.157

*1) 您组织中的人员何时真正开始使用 OO ABAP 进行编码？* 

我组织中的大多数开发人员在引入 ABAP OO 之前就已经学习了经典的 ABAP。他们大多是高级开发人员，他们限制学习正确的 OOP 和 OOD 原则。他们仍然主要使用程序性 ABAP 功能。此外，我们在传统环境中工作。我们后端的基础是在 4.6C 时代构建的。很难将正确的 OO 设计引入遗留系统。

另一方面，程序功能仍然有效。诸如事务数据库更新之类的一些功能主要从 ABAP 的程序部分使用。您可能知道专门用于数据库事务的更新功能模块或子例程（您可以调用它们  `IN UPDATE TASK`）。它们是 ABAP 基本组件的组成部分。不能否认仍然需要程序性 ABAP 部分。

*2）人们是否有任何重要的理由想要以 OO 方式对其进行编码？例如，调用方法比 PERFORM 语句更快？*

您如何比较 CALL METHOD 与 PERFOM 的运行时间？您是否尝试过 RSHOWTIM 程序/或者您是否从 ABAP 工作台进行了一些性能测试？单个子例程调用与方法调用没有显着差异。但是，如果在大规模测试方法调用中调用，则性能稍好（以微秒为单位）。

总的来说，我推荐 OOD 和 OOP 与之前发布的用户相同的论点。但是您必须记住，熟悉旧 ABAP 世界的高级开发人员在开始编写 ABAP OO 之前必须了解 OO 原理。否则，相反，您的组织不会从 ABAP OO 中获利。有很多没有 OO 知识的有经验的 ABAP 开发人员被迫编写类。他们所做的实际上是用类模仿程序原则（例如，一个只具有静态方法的类——作为功能模块/子程序的替代品）。

祝您的组织好运，迎接 ABAP OO 的挑战！这与语言无关，更多的是让 OO 原则进入员工的脑海。

            回答 #2

赞同：2

时间：2009-03-11T08:42:27.803

我不了解 ABAP，但我看到 VB 开发人员迁移到 .Net 平台时也发生了同样的情况。

程序员对他们旧的编程方式很满意，而且旧的方式仍然有效。新的编程方式需要大量投资，不仅来自公司，还来自那些不得不走出舒适区进入不确定领域的人。如果您的公司不愿意在培训和研究上投入时间，这个问题就会变得更大，因为人们将不得不投入自己的时间，并不是每个人都愿意这样做。

正如 Taurean 已经表明的那样，有令人信服的理由转向 OO 做事方式。它们主要不是关于性能，而是关于更好地解耦系统中的组件，使其更易于维护。

但根据我的经验，很难用这样的合理论据说服人们走出他们的舒适区。给他们指路通常效果更好。慢慢开始在你自己的代码中使用 OO 结构，向人们展示它看起来多么干净。这不是您在几个月内就能实现的目标，可能需要数年时间才能让人们以不同的方式思考和工作。

            回答 #3

赞同：2

时间：2009-03-11T08:43:33.913

一个由经验丰富的程序开发人员组成的团队不太可能很快开始以 OO 风格进行开发，除非付出大量（且昂贵）的努力来培训和指导他们。

原因有很多：

*   在真正的 OO 环境（smalltalk，不是 java 或 c++）中投入大约一年的时间才能在 OO 开发方面取得任何优势。
*   他们不能从头开始，有很多遗留代码和时间压力。
*   他们所有的遗留代码都不是面向对象的。重组需要付出巨大的努力。
*   遗留代码结构不完善，有很多重复，没有单元测试。改变它需要太多时间，所以他们没有时间修复。（令人惊讶的是，您可以在不了解项目的情况下从项目中推断出。:)）。

因此，他们的新代码很可能是程序性的，但在类和方法中。他们不会被 OO 的优势所折服。

            回答 #4

赞同：2

时间：2009-03-16T03:51:27.973

切换到 ABAP OO 的一些充分理由是：

*   ABAP OO 更明确，更易于使用
*   ABAP OO 有更严格的语法检查，消除了 ABAP 语言中的很多歧义
*   许多新的 Netweaver 功能仅在使用 OO 时可用

将此添加到[Taurean](https://stackoverflow.com/users/63841/taurean)列出的好处中：

*   更好的数据封装
*   多重实例化
*   更好的垃​​圾收集
*   通过继承重用代码
*   通过标准接口操作业务对象
*   事件驱动编程

开始使用 ABAP OO：

*   首先在代码中调用一些 SAP 标准 OO 功能：使用 ALV 类，而不是功能模块 - 这些类提供了更多功能。尝试调用`CL_ABAP*`或`CL_GUI_FRONTEND*`类中的一些标准方法
*   使用本地类以 Singleton 的形式编写报告
*   尝试在 SE24 中为您熟悉的东西设计一个简单的类（例如文件处理程序）

资源：

1.  Igor Barbaric 的面向对象 ABAP 中的设计模式
2.  还没有使用 ABAP 对象？每个 ABAP 开发人员都应该重新审视它的八个原因。霍斯特·凯勒和格德·克鲁格

            回答 #5

赞同：2

时间：2009-05-20T06:32:23.777

OO 与否 OO 不是问题！！

问题是哪里 OO 哪里不是 OO 。

只要您在客户名称空间中，就可以充分利用 OO 方法（OOD 和 OOP）的所有优势。然而，每次访问 SAP 标准功能都会让人头疼。事务完整性、对象一致性和同步、数据库提交、屏幕（模块池和选择屏幕）、权限检查、批量输入。这些只是一些难以（甚至不可能）集成到 OO 方法中的对象。SAP 标准模块的集成使这变得更加复杂。

用户出口，事件：大部分数据在界面中提供。对客户特定数据或定制的访问可以放在对象中。

报告：大部分数据将通过标准 FM 读取。具体的数据处理可以放在对象中。可以在其他报告中轻松重复使用。SAP enjoy 控件可以用对象外壳包裹，以便于使用和重用。屏幕不能是对象中的位置。:-(((

核心处理：SAP 不鼓励更换 SAP 业务对象维护或 SAP 流程。但如果这是一个耐心的案例，并准备好付出巨大的努力。让我们仔细看看。有很多技术挑战：单例模式、数据库访问优化、锁定、同步等。应该解决技术和业务功能的分离问题。对象并不真正适合大规模处理（高 DB 负载），因此应该解决大规模处理。

            回答 #6

赞同：1

时间：2009-03-11T07:36:41.470

以下是您必须知道的 OOP 的一些优点：

*   数据封装
*   实例化
*   代码重用
*   接口

利用这些优势，“尽可能”使用 OO ABAP 有很多重要原因。即使您不想使用 OO 编程，使用 ABAP 对象仍然是一个好主意，因为它提供了一些过程编程没有的功能。

因此，ABAP 对象通过程序 ABAP 为您提供了以下功能：

*   更好的封装
*   支持多个实例化
*   更好的代码重用技术
*   更好的界面
*   明确的事件概念

程序 ABAP 只有两个目的是必不可少的：

*   经典画面在功能模块中的封装。
*   当您想让函数对其他系统可用，但无法使用 XI 服务器代理使类方法在外部可用时。在这种情况下，您必须使用功能模块。

[在这里](https://www.sdn.sap.com/irj/sdn/go/portal/prtroot/docs/library/uuid/37c5db90-0201-0010-3a9b-d0a5288f3c15)详细研究它们，您会发现您不需要任何重要的操作/演示理由来说服自己迁移到 OO ABAP，因为所有这些理由已经非常重要。

            回答 #7

赞同：1

时间：2013-03-21T08:29:48.990

简单来说，当你有一个相对年轻的团队渴望并准备好学习新的编程范式时使用它。在高层主导的团队中，采用 OO 可能具有挑战性。更是如此，因为程序的可维护性下降了。组织可能需要新员工来维护 OO 代码。

从设计的角度来看，毫无疑问（正如很多人在这个论坛上所说的那样）它是最好的并且自古以来就一直在使用。SAP 在技术方面远远落后。他们的 ECC DB 设计仍然是 2-NF。标准的 3-NF 就是他们所说的“3D”数据库。没有偏离主题太多，我相信你现在有太多好的答案来做出决定。

        c++ - 如何安全地将 std::vector 的内容复制到 c 样式的静态数组？

ID：633549

赞同：15

时间：2009-03-11T06:34:25.800

标签：c++, arrays, vector

我需要在涉及中间插入的固定数组中操作数据。而不是使用 memcpy 等。我想使用矢量。当我想将向量元素复制回 c 样式数组时，我遇到了问题。这是代码：

```
void tryvector()
{
    using namespace std;
    const int MAX_SIZE=16;
    BYTE myarr[MAX_SIZE]={0xb0,0x45,0x47,0xba,0x11,0x12, 0x4e};
    vector<BYTE> myvec (myarr, myarr+MAX_SIZE);
    vector<BYTE>::iterator it;

    printf("myarr pre :");
    for(int i=0;i<MAX_SIZE;++i){
        printf("%02x ", myarr[i]) ;   

    }

    printf("\nmyvec pre :")
    for(it=myvec.begin(); it<myvec.end();++it){
       cout<<hex<<static_cast<int>(*it)<<" ";

    }

    it = myvec.begin()+ 3;
    myvec.insert(it,0x5f);
    printf("\nmyvec post:");
    for(it=myvec.begin(); it<myvec.end();++it){
       cout<<hex<<static_cast<int>(*it)<<" ";

    }

    copy(myvec.begin(), myvec.end(), myarr); //???
    printf("\nmyarr post:");
    for(int i=0;i<MAX_SIZE;++i){
        printf("%02x ", myarr[i]) ;   

    }

} 
```

我正在使用 vs 2005。这是警告：

```
warning C4996: 'std::_Copy_opt' was declared deprecated
1>        c:\program files\microsoft visual studio 8\vc\include\xutility(2270) : see      declaration of 'std::_Copy_opt'
1>        Message: 'You have used a std:: construct that is not safe. See documentation on how to use the Safe Standard C++ Library'
1>        c:\documents and settings\mhd\my documents\tesvector.cpp(50) : see reference to function template instantiation '_OutIt  std::copy<std::_Vector_iterator<_Ty,_Alloc>,BYTE*>(_InIt,_InIt,_OutIt)' being compiled
1>        with
1>        [
1>            _OutIt=BYTE *,
1>            _Ty=BYTE,
1>            _Alloc=std::allocator<BYTE>,
1>            _InIt=std::_Vector_iterator<BYTE,std::allocator<BYTE>>
1>        ] 
```

当我运行它时，出现以下运行时错误：

```
 Run-Time Check Failure #2 - Stack around the variable 'myarr' was corrupted. 
```

请注意，我使用向量而不是列表或双端队列，因为像上面的代码这样的“中间插入”是一个特殊的问题。它发生的次数少于“在末尾插入”和“元素的随机访问”。

有什么解决办法吗？

任何类似于：“您使用 c++，放弃 c 样式数组实现。所有数组实现仅使用向量”的答案都没有真正的帮助。

谢谢。

            回答 #1

赞同：18

时间：2009-03-11T06:43:00.600

问题是您正在向向量添加东西，因此它最终的元素比`myarr`您初始化它的数组中的元素多。

如果要将向量复制回数组中，则需要将其缩小：

```
myvec.resize( MAX_SIZE); 
```

或者您可以限制复制回的元素数量：

```
copy( myvec.begin(), myvec.begin()+MAX_SIZE, myarr); 
```

如果您希望`myarr`数组包含所有元素，那么它需要大于`MAX_SIZE`，并且您已经发现为什么人们建议使用`vector`而不是原始数组（`vector`s 知道如何增长，数组不知道）。

请注意，虽然您不想要“任何类似的答案：“您使用 c++，放弃 c 样式数组实现。所有数组实现仅使用向量”，但您通常可以避免使用 a`vector`并传递`&myvec[0]`给期望的例程一个原始数组。  `vector`出于这个原因，需要像原始数组一样连续存储其元素。

由于您收到“不安全操作”警告，因此您使用的是 Microsoft 的编译器。为了安全地解决问题，您应该使用`checked_copy`算法而不是`copy`. 正如[Evgeny Lazin 所指出](https://stackoverflow.com/questions/633549/how-to-copy-the-contents-of-stdvector-to-c-style-static-array-safely/633575#633575)的，您可以为您的数组创建一个检查迭代器以传递给`checked_copy`算法。

使复制安全且不需要 Microsoft 扩展的其他选项是将数组包装在一个类（可能是模板化的）中，该类跟踪数组大小并提供以安全方式将数据复制到数组中的方法。[STLSoft 的`array_proxy`模板](http://www.stlsoft.org/doc-1.9/classstlsoft_1_1array__proxy.html)或[Boost 之`boost::array`](http://www.boost.org/doc/libs/1_38_0/doc/html/array.html)类的东西可能会有所帮助。

            回答 #2

赞同：3

时间：2009-03-11T07:04:48.973

一般来说，我想你可以这样做：

```
void *myarr;

if((myarr = malloc(myvec.size() * sizeof myvec[0])) != NULL)
{
  memcpy(myarr, &myvec[0], myvec.size() * sizeof myvec[0]);
  /* Do stuff with the C-style array for a while
   .
   .
   .
  */
  free(myarr);  /* Don't forget handing back the memory when done. */
} 
```

这将分配一个新的 C 样式数组来保存向量的元素，并将数据复制到位。这样就不需要静态匹配大小。

当然，这是通用的，因此它只是为您提供`void *`访问 C 数组的方法，因此您需要强制转换或将类型更改为实际类型（`BYTE`在这种情况下）。

            回答 #3

赞同：1

时间：2009-03-12T09:16:00.460

您可以使用模板参数推导来查找数组绑定：

```
template<typename T, size_t N>
size_t copy(std::vector<T> const& src, T[N] dest) {
    size_t count = std::min(N, src.size());
    std::copy(src.begin(), src.begin()+count, dest);
    return count;
 } 
```

关闭有关未检查内容的 Microsoft 警告。它们旨在引诱您编写不可移植的代码。

            回答 #4

赞同：0

时间：2009-03-11T06:39:37.817

你可以做：

```
memcpy(myarr, &(myvec)[0], myvec.size()) 
```

编辑：就安全而言，根据[this](http://www.cplusplus.com/reference/stl/vector/)，向量将数据存储在连续的内存段中，因此您可以“不仅使用迭代器，还可以使用指向元素的常规指针的偏移量”访问它们。

        sql - SAS 中的 SQL 直通

ID：633552

赞同：5

时间：2009-03-11T06:38:19.473

标签：sql, sas, proc-sql

将 SQL Passthrough 工具与 SAS 一起使用有什么优势吗？

            回答 #1

赞同：7

时间：2009-03-11T14:45:16.197

虽然这个问题过于笼统，但我可以提供一个过于笼统的答案。

SAS 中的直通 SQL 允许您直接与数据库通信。当您使用数据库特定功能时，这将变得非常有利。Oracle 的统计功能就是一个例子。您不必担心 SAS 将如何处理您的编码或翻译您的 SQL。

此外，Pass-through SQL 在 SAS 端只需要很少的处理，这对我们也有好处。如果您有一个非常繁忙的 SAS 盒子，您可以选择将处理逻辑直接发送到数据库。这在不使用 Pass-through SQL 的情况下是可能的，但是在使用它时您有更高程度的控制。

这绝不是一个详尽的好处列表，只是使用传递 SQL 的一些高级特权。如果您有更具体的用例，我们可以讨论编码技术的具体差异。

            回答 #2

赞同：6

时间：2009-03-20T19:19:18.130

PROC SQL 将尝试将尽可能多的逻辑传递给数据库，但有时它不能。使用数据库（或数据库的 SAS/ACCESS 引擎）中没有等效功能的 SAS 函数将阻止将整个查询传递到数据库。当查询未完全传递到数据库时，数据将被拉入 SAS 并在那里进行处理。您的 SQL 越复杂，它最终在 SAS 中处理的可能性就越大。这是一个比您可能意识到的差异更大的案例。

```
libname db <database> path=dbserver user=... password=...;
proc sql;
   create table db.new as
   select * from db.largedata where flag=1;
quit; 
```

这实际上（至少通过 SAS 9.1.3）将所有匹配 flag=1 的数据拉到 SAS，然后将其加载回数据库。这是数百万行，它真的变慢了。

在这种情况下，您会发现显式通过要快得多。

```
proc sql;
   connect dbase (server=dbserver user=... password=...);
   execute (create table db.new as
   select * from db.largedata where flag=1) as dbase;
   disconnect dbase;
quit; 
```

我最近做了一个使用 Oracle 和一个大约 250,000 行的表的示例。第一种方式需要 20 秒，第二种方式需要 2 秒。

            回答 #3

赞同：2

时间：2009-03-12T03:38:57.367

如果您不使用传递，那么您必须将所有记录（处理所需的）从数据库导入到 sas。通过使用传递，您可以在数据库端完成一些处理，并且只将结果记录带入 sas。差异（在处理时间和网络使用方面）可以非常，从微小到巨大，取决于您所做的事情。

            回答 #4

赞同：2

时间：2009-03-25T19:53:50.907

使用直通有很多优点，但这取决于您要完成的工作。通常，我在进行查询时使用标准的 proc sql 而不使用 passthrough。然而，最近，我用它来生成一些存储过程。

```
proc sql;
    connect to mysql(user = 'xxxxx' pass = 'xxxxx' server = 'localhost');
        execute(set @id = &id.) by mysql;
        execute(select (@lit:=image_text) from quality.links_image_text where image_id = @id) by mysql;
        execute(set @lidx = locate('ninja',@lit)) by mysql;
        execute(set @lidx2 = locate(' ',@lit,@lidx)) by mysql;
        execute(set @lidxd = @lidx2 - @lidx) by mysql;
        execute(set @lf = substr(@lit,@lidx,@lidxd)) by mysql;

        create table asdf as
        select &id. as id, a as ws from connection to mysql
        (select @lf as a)
        ;
    disconnect from mysql;
quit; 
```

显然，这不是可以在直通之外完成的事情（至少我不知道）。所以是的......这一切都取决于你想要完成什么。

            回答 #5

赞同：0

时间：2009-05-20T21:19:13.293

简而言之，SQL 传递语句让您可以更好地控制发送到数据库的内容。

        java - 如何将 SOAP 响应与架构匹配

ID：633555

赞同：1

时间：2009-03-11T06:40:17.097

标签：java, soap, service, axis

嗨，我正在尝试评估 Web 服务。我正在使用 Axis API 创建请求。我发送带有一些攻击的请求，然后想要验证获得的响应模式的响应。我不知道如何实现这一目标。有人可以帮助我实现这一目标，或者给我一些指示，让我有一些想法来实现这一目标。  

            回答 #1

赞同：1

时间：2009-06-09T07:06:40.113

延斯-马丁是正确的。如果您使用的是由 Axis wsdl2java 生成的客户端，那么您需要的所有验证都在幕后进行。有两种验证正在进行：

1.  SOAP 有一个模式定义，响应必须是有效的 SOAP 响应，否则客户端会抛出异常。
2.  您用来生成客户端的 WSDL 描述了响应的 SOAP 信封中的内容。如果你得到的响应不匹配，客户端会抛出异常。

如果您真的觉得有必要编写自己的 XML 解析器/验证器和 SOAP 处理程序，那么您只能靠自己了。

            回答 #2

赞同：1

时间：2009-03-11T06:59:04.883

如果您使用 Axis2 附带的 wsdl2java 工具，响应消息将被解组到生成的类，如果响应消息与从 WSDL 生成的类不对应，您将收到错误消息。因此，通过这种方式，您就有了一种隐式验证。

            回答 #3

赞同：0

时间：2009-03-11T15:00:04.993

试试[SOAPUI](http://www.soapui.org/)。它是一个非常强大的 Web 服务开源测试工具。您可以构建测试套件、进行性能测试并指定自定义的验证标准。

        c# - C# 和正则表达式用于嵌套标签的单词替换

ID：633565

赞同：0

时间：2009-03-11T06:44:01.720

标签：c#, regex

我正在尝试创建一个小型应用程序，该应用程序采用带有特殊标记的单词数组的基本文本模板，解析模板内容并输出随机生成的文本文档。

本质上，我想要做的是：

<{你好|嗨|你好}>世界。

并将其变成这样：

```
你好世界。
或者
 你好世界。
或者
 世界你好。

```

到现在为止还挺好。谷歌搜索让我能够成功地将 <{ 和 }> 之间的内部文本提取到一个数组中，然后我从中随机选择一个单词来替换完整的 <{Hello|Hi|Howdy}>。

我遇到的问题是解析一组嵌套在相同标签中的单词。

例如，如果我从这个开始：

<{你好|嗨|你好}>世界。<{How's <{life|it going}>?|你好吗？}>

我想把它变成这样：

```
你好世界。最近怎么样？
或者
 你好世界。怎么样了？
或者
 你好世界。你好吗？

```

等等...

有人可以建议一种方法来相当简单地使用 c# 和正则表达式吗？

我看过[http://www.vsj.co.uk/articles/display.asp?id=789](http://www.vsj.co.uk/articles/display.asp?id=789)和[http://www.m-8.dk/resources/RegEx-balancing-group.aspx](http://www.m-8.dk/resources/RegEx-balancing-group.aspx)，和老实说，很多事情都超出了我的想象，所以简单的东西会很好。;-)

谢谢你。

            回答 #1

赞同：0

时间：2009-03-11T06:58:05.323

Visual Studio SDK 中有 lex 和 yacc：

这些链接可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/bb165963(VS.80).aspx](http://msdn.microsoft.com/en-us/library/bb165963(VS.80).aspx)

[http://devhawk.net/2006/09/17/Managed+Lex+And+Yacc.aspx](http://devhawk.net/2006/09/17/Managed+Lex+And+Yacc.aspx)

根据您的解析的复杂程度（考虑未来可能的更改和添加），您可能只想坚持使用正则表达式。

            回答 #2

赞同：0

时间：2009-03-11T06:58:32.450

如果您当前有一个正则表达式可以正确地将标签内的值解析为一个数组（称为 A'），那么对于 A' 中的每个值，重新应用该正则表达式。

您应该能够递归地执行此操作。

            回答 #3

赞同：0

时间：2009-03-11T07:03:26.947

这个问题不太适合正则表达式。识别您描述的表达式所需的语法不是[常规语法](http://en.wikipedia.org/wiki/Regular_grammar)。

然而，上面描述的表达式可以用[上下文无关文法](http://en.wikipedia.org/wiki/Context-free_grammar)来描述。

您应该能够使用[LL(1) 解析器](http://en.wikipedia.org/wiki/LL_parser)有效地解析它。我想说这个问题更适合使用[lex](http://www.seclab.tuwien.ac.at/projects/cuplex/)对输入进行标记，并使用 yacc 构造抽象语法树。

[这是关于语法和使用 C# 进行解析](http://www.itu.dk/people/kfl/parsernotes.pdf)的教程

            回答 #4

赞同：0

时间：2009-03-11T07:11:14.497

似乎您正在尝试描述和使用[上下文无关语法](http://www.cs.rochester.edu/~nelson/courses/csc_173/grammars/cfg.html)而不是正则表达式。

上下文无关文法严格来说比正则表达式更强大：

*   任何可以使用正则表达式生成的语言都可以由上下文无关文法生成。
*   有些语言可以由上下文无关文法生成，而不能由任何正则表达式生成。

对于 C#，我推荐你[ANTLR](http://www.antlr.org/)，它是一个语言识别框架，允许你从语法描述中构造识别器、解释器、编译器和翻译器。

        windows - 如何提高 USB 设备驱动程序中的 Tx 性能？

ID：633572

赞同：0

时间：2009-03-11T06:49:10.103

标签：windows, usb, device-driver

我使用 Windows 驱动程序模型 (WDM) 为 Windows 2000 及更高版本的 USB 1.1 设备开发了设备驱动程序。

我的问题是使用 64 字节批量传输时 Tx 性能非常差。根据使用的 USB 主机控制器，最大数据包吞吐量为每秒 1000 个数据包 (UHCI) 或 2000 个数据包 (OHCI)。我在 Linux Kernel 2.6 上开发了一个类似的驱动程序，每秒大约 5000 个数据包。

Linux 驱动程序使用最多 10 个异步批量传输，而 Windows 驱动程序使用 1 个同步批量传输。因此，比较这一点可以清楚地表明，虽然性能如此糟糕，但我已经尝试过异步批量传输，但没有成功（没有性能提升）。

有没有人有一些提示和技巧来提高 Windows 的性能？

            回答 #1

赞同：1

时间：2009-04-17T14:38:35.577

我现在已经设法将发送速度提高到大约 6.6k 消息/秒。解决方案非常简单，我刚刚实现了与 Linux 驱动程序相同的机制。

所以现在我一次最多可以安排 20 个 URB，我应该说，它起作用了。

            回答 #2

赞同：0

时间：2009-03-11T06:55:12.117

你得到什么样的吞吐量？USB 1.1 被限制在大约 1.5 Mbit/s

这可能是您必须忍受的限制，您绝不能做的一件事就是让系统缺乏资源。我见过很多糟糕的驱动程序实现，驱动程序在完全无法提高自身性能的情况下占用系统资源。

我的猜测是您使用了错误的 API 调用，您查看过 Win32 DDK 中的 USB 示例吗？

        php - 模板方法设计模式中对象的状态

ID：633584

赞同：1

时间：2009-03-11T06:56:05.407

标签：php, design-patterns, template-method-pattern

[这是来自http://sourcemaking.com/design_patterns/template_method/php](http://sourcemaking.com/design_patterns/template_method/php)的基本抽象类中算法的实现示例

```
public final function showBookTitleInfo($book_in) {
    $title = $book_in->getTitle();
    $author = $book_in->getAuthor();
    $processedTitle = $this->processTitle($title);
    $processedAuthor = $this->processAuthor($author);
    if (NULL == $processedAuthor) {
        $processed_info = $processedTitle;
    } else {
        $processed_info = $processedTitle.' by '.$processedAuthor;
    }
    return $processed_info;
} 
```

我不喜欢它，因为我认为“showBookTitleInfo”对它调用的方法了解太多。

这是另一个示例抽象类 template_method { var $state; 公共函数 __construct() { $this->state = 0; }

```
 public function processEvent( $event ) {
        $this->doFirstStep( $event );
        $this->doSecondStep( $event );
    }
    abstract public function doFirstStep( &$event );
    abstract public function doSecondStep( &$event );
}

class CustomLogic extends template_method {
    public function doFirstStep( &$event ) {
        echo __METHOD__.": state: ".$this->state." event: $event\n";
        $this->state++;
    }
    public function doSecondStep( &$event ) {
        echo __METHOD__.": state: ".$this->state." event: $event\n";
        $this->state++;
    }
} 
```

如果我们不更改它的值，为什么我们将事件作为引用传递？我应该如何实现“我的步骤”逻辑，如果他们正在使用当前状态，可以修改其值，其他步骤可以读取修改后的值并且也可以修改它？

例如，我想为预定的消息发送实现成本计数机制 - 简单且重复（例如：每个星期一、星期五，直到 2009 年 5 月 23 日）。

所以，我在抽象类中实现算法如下：

```
abstract class AbstractCostCounter {
    public function countNotReccurentSendingCost($messageObj) {
        $totalMessages = $messageObj->getTotalMessages(); // multiple recipients are allowed
        $message_cost = 1; // just to give you an idea
        $this->cost = $totalMessages * $message_cost;
    }
    abstract public function countOptional();

    // I pass $messageObject not as by-reference, because it hasn't to be modified
    public function countCost( $messageObject ) {
        $this->countNotReccurentSendingCost( $messageObject );
        $this->countOptional( $messageObject );
    }

}

class TemplateNotReccurentCostCounting {
    public function countOptional($messageObj) {
        // do nothing
    }
}

class TemplateReccurentCostCounting {
    public function countOptional($messageObj) {
        $notReccurentSendingCost = $this->cost;
        $totalMessagesInScheduledPlan = $messageObj->getTotalMessagesInScheduledPlan();
        $reccurentSendingPlanCost = $notReccurentSendingCost * $totalMessagesInScheduledPlan;
        $this->cost = $reccurentSendingPlanCost;
    }
} 
```

我是否朝着正确的方向前进？应该在哪里实现模板方法设计模式？如果这段代码有问题，请告诉我。

PS成本计数器不是生产代码。我写它是因为我想给你一个想法。

提前致谢

            回答 #1

赞同：1

时间：2009-03-11T07:22:20.147

模板方法模式为父类提供了很多控制权，父类必须了解很多关于抽象方法（它们的签名）的信息，因为它必须“控制”算法。顺便说一句，父类中的具体方法必须是最终的。

你的 firstStep secondStep 方法没有优势，我可以在 stepOne 中实现我想要的，而在 stepTwo 中什么也不做......

问题是你什么时候想使用模板方法模式，而不是如何重写它以提供更大的灵活性:)

        java - 用于实例化内部类的奇怪语法

ID：633585

赞同：43

时间：2009-03-11T06:56:10.100

标签：java, constructor, inner-classes

我没想到在这个阶段我会在 Java 中遇到全新的语法，但是你瞧，我只是遇到了一些事情：

*确切的上下文和下面的代码应该做什么是无关紧要的——它只是为了提供某种上下文。*

我正在尝试在 IT Mill Toolkit 中综合创建一个事件，所以我写了这样的一行：

```
buttonClick(new Button.ClickEvent(button)); 
```

但是，Eclipse 给了我以下错误消息：

无法访问 Button 类型的封闭实例。必须使用 Button 类型的封闭实例来限定分配（例如 xnew A()，其中 x 是 Button 的实例）。

当我如下重写上面的行时，它不再抱怨了：

```
buttonClick(button.new ClickEvent(button)); // button instanceof Button 
```

所以，我的问题是：**后一种语法到底是什么意思，为什么第一个片段不起作用？**Java 在抱怨什么，在第二个版本中它在做什么？

*背景信息：`Button`和`Button.ClickEvent`都是非抽象公共类。*

            回答 #1

赞同：71

时间：2009-03-11T07:02:07.200

内部类（如`Button.ClickEvent`）需要对外部类（`Button`）实例的引用。

该语法创建一个新实例，`Button.ClickEvent`其外部类引用设置为 的值`button`。

这是一个示例-忽略缺少封装等，仅用于演示目的：

```
class Outer
{
    String name;

    class Inner
    {
        void sayHi()
        {
            System.out.println("Outer name = " + name);
        }
    }
}

public class Test
{
    public static void main(String[] args)
    {
        Outer outer = new Outer();
        outer.name = "Fred";

        Outer.Inner inner = outer.new Inner();
        inner.sayHi();
    }
} 
```

有关内部类和封闭实例的更多信息，请参阅[规范的第 8.1.3 节。](http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.1.3)

            回答 #2

赞同：10

时间：2009-03-11T07:00:56.440

Button.ClickEvent 是一个非静态内部类，因此此类的实例只能存在于包含在 Button 实例中。

在您的第二个代码示例中，您有一个 Button 实例，并创建了一个包含在此 Button 实例中的 ClickEvent 实例...

            回答 #3

赞同：9

时间：2009-03-11T07:05:33.603

Java 中的非静态内部类包含一个隐藏引用，该引用指向声明它的外部类的实例。因此，您最初收到的错误消息是告诉您，如果不指定，则无法创建内部类的新实例要附加到的外部类的实例。

也许您以前没有见过这种语法的原因是内部类通常分配在外部类的方法中，编译器会自动处理这个问题。

            回答 #4

赞同：3

时间：2009-03-11T09:29:24.290

为了避免让你自己和其他程序员对这个很少使用的特性感到困惑，你总是可以让内部类成为静态的。

如果需要对外部类的引用，您可以在构造函数中显式传递它。

            回答 #5

赞同：2

时间：2016-02-15T14:43:08.350

**您实际上可以这样做**，但是您必须声明**`ClickEvent`为`static`**inside `Button`，然后使用您的 sintax 应该没有任何问题：

```
buttonClick(new Button.ClickEvent(button)); 
```

基本上`static`使类`ClickEvent`直接属于该类`Button`而不是特定的实例（即`new Button()`）`Button`。

以下@Jon Skeet 示例：

```
// Button.java
class Button
{

    public static class ClickEvent
    {
        public ClickEvent(Button b)
        {
            System.out.println("Instance: " + this.toString());
        }
    }
}

// Test.java
public class Test
{
    public static void main(String[] args)
    {
        Button button = new Button();
        buttonClick(new Button.ClickEvent(button));
    }

    public static void buttonClick (Button.ClickEvent ce) {
    }
} 
```

            回答 #6

赞同：-1

时间：2009-03-11T10:20:42.183

如果您键入，您的代码将编译

```
buttonClick(new Button().ClickEvent(button)); 
```

代替

`buttonClick(new Button.ClickEvent(button));` 

因为构造函数是一个方法，当你在 Java 中调用一个方法时，你必须传递参数列表，即使它是空的。

        iphone - 如何在 ipod touch 和 iphone 中测试我自己的应用程序？

ID：633586

赞同：2

时间：2009-03-11T06:56:15.747

标签：iphone, cocos2d-iphone, ipod-touch

我有一些我创建的 iphone 应用程序。我想在 ipod touch 中测试我的应用程序。如何在 ipod touch 中测试我的应用程序？现在我没有自己的 Apple id。如果我打开一个 ID，那么可以使用该 ID 测试多少个应用程序？

如果您有可用的解决方案，请给我答案并帮助我。

            回答 #1

赞同：6

时间：2009-03-11T07:12:33.853

如果您想在设备上测试 iPhone 应用程序，您需要申请[iPhone Developer Program](http://developer.apple.com/iPhone/program/apply.html)。它售价 99 美元，还可以让您向 App Store 提交申请。

            回答 #2

赞同：1

时间：2009-03-11T12:28:59.880

一旦你被接受，你可以用你的一个身份开发无限数量的应用程序（并将它们提交到 App Store）。

            回答 #3

赞同：0

时间：2009-03-11T07:03:05.793

获取苹果 ID 并下载开发工具包。它拥有你所需要的一切，包括一个模拟器和一种在本地设备上安装的方法。

        jquery - SPRY 数据集.. 以及断开数据集的承诺.. 还有什么？

ID：633596

赞同：0

时间：2009-03-11T06:59:54.413

标签：jquery, ajax, dataset

大约一年前，我使用 SPRY 来试验这样一个事实，即您实际上可以将“数据集”加载到 Javascript/浏览器中，并据此绑定到文本框、组合下拉列表等表单字段。

我真的一直在尝试找到一些非常简单的东西，让我（编码人员）编写后端代码来获取数据，而我的合作伙伴（设计人员等）只需使用她的技能来布局 HTML，并有一个简单的方法将数据绑定到那些表单值/网格等。

我尝试过使用 ExtJS 之类的东西和类似的东西，但发现向我的伙伴解释有点困难，而当我使用 SPRY 时，向我的设计伙伴解释如何使用似乎很“自然”。SPRY 的唯一问题是它似乎已经放慢了速度（即开发速度）或其他什么..

我喜欢 jQuery，但不确定是否有类似的东西？

            回答 #1

赞同：0

时间：2009-03-11T11:23:01.440

它始终取决于您尝试绑定的数据的性质。

[JSON](http://www.json.org/)是一种用于在服务器和客户端之间交换轻量级数据的出色语言：它基本上是 JavaScript 对象表示法。

如果您在谈论 jQuery，那么我假设您的合作伙伴具有一定的编码和 JavaScript 知识；或者至少你这样做。

然后我建议（这就是我为自己的项目所做的）是从后端以 JSON 格式输出数据，然后从 jQuery 中读取并循环浏览它：

```
jQuery.getJSON("url", parameters, function (jsonData){
  // Assuming jsonData is an array:
  for(var i = 0; i < jsonData.length; i++){
    // Do something with jsonData[i]
  }
}); 
```

有很多工具可以将数据转换为 JSON 格式；举个例子，在 PHP 中有 json_encode 函数。

后端和前端之间的通信在某种程度上总是需要（并且总是会）编程。如果您的伴侣没有编程技能，那么我建议您将一些常用功能包装成更友好的功能：

```
function fillSelect(selectId, urlWithData){
  // Request JSON data and fill the <SELECT> accordingly.
} 
```

然后她可以做一些简单的事情

```
fillSelect("mySelect", "http://www.example.com/givemesomejson"); 
```

希望有帮助:)

        java - 更改每个动作类的 struts-rest idParameterName

ID：633597

赞同：0

时间：2009-03-11T06:59:57.220

标签：java, struts2

我想为不同的动作类设置不同的 idParameterNames。这是可能的还是我必须编写自己的映射器？

            回答 #1

赞同：0

时间：2010-11-07T18:02:36.880

不，这是不可能的。`struts.mapper.idParameterName`由 the 使用，并且`RestActionMapper`在返回之前解析参数`ActionMapping`（即，在知道要使用的操作之前）。

        java - Selenium click() 事件似乎并不总是被触发 => 导致超时？

ID：633600

赞同：27

时间：2009-03-11T07:01:12.507

标签：java, selenium, timeout

这就是我所做的：

```
selenium.click("link=mylink");
selenium.waitForPageToLoad(60000);

// do something, then navigate to a different page 
// (window focus is never changed in-between)

selenium.click("link=mylink");
selenium.waitForPageToLoad(60000); 
```

链接“mylink”确实存在，第一次调用 click() 总是有效的。但是第二次 click() 有时似乎有效，有时无效。

看起来 click() 事件根本没有触发，因为页面甚至没有开始加载。不幸的是，这种行为是不确定的。

这是我已经尝试过的：

1.  设置更长的超时时间

    => 没有帮助

2.  加载一页后等待元素出现

    =>也不起作用，因为页面甚至没有开始加载

现在我最终调用了 click() 两次，所以：

```
selenium.click("link=mylink");
selenium.waitForPageToLoad(60000);

// do something, then navigate to a different page 
// (window focus is never changed in-between)

selenium.click("link=mylink");
selenium.click("link=mylink");
selenium.waitForPageToLoad(60000); 
```

这会起作用，但这不是一个非常好的解决方案。我还在另一个论坛上看到有人建议写类似“clickAndWaitWithRetry”的东西：

```
 try {
      super.click("link=mylink");
      super.waitForPageToLoad(60000);
  }
  catch (SeleniumException e) {
      super.click("link=mylink");
      super.waitForPageToLoad(60000);
  } 
```

但我认为这也不是一个合适的解决方案....任何想法/解释为什么有时不触发 click() 事件？

            回答 #1

赞同：10

时间：2009-07-29T18:19:33.977

有时，看似随机的 Selenium 只是不喜欢点击某些锚标签。我不确定是什么原因造成的，但它确实发生了。在这些情况下，我发现有一个麻烦的链接而不是做

```
selenium.click(...) 
```

做

```
selenium.fireEvent( locator, 'click' ); 
```

正如其他人在我上面所说的那样，我特别遇到了如下所示的锚标签问题：

```
<a href="javascript:...." > 
```

            回答 #2

赞同：4

时间：2009-03-15T18:14:38.093

我已经做了一段时间的 selenium，我真的对 waitForPageToLoad() 产生了厌恶。您可能会考虑总是等待相关元素存在。

我发现这种方法似乎可以解决我遇到的最奇怪的问题。另一种可能性是您可能有一些 javascript 在第一次单击时阻止链接执行任何操作。这似乎不太可能，但值得仔细检查。

            回答 #3

赞同：3

时间：2011-06-06T11:38:39.910

Selenium click() 事件似乎并不总是被触发 => 导致超时？

在 Selenium.click 命令之前尝试 selenium.pause。我已经尝试了以上所有方法，但似乎都没有解决我们的问题。所以最后我们得到了一个神奇的 selenium.pause 它为我解决了问题..

希望这也能解决您的问题

            回答 #4

赞同：3

时间：2010-01-26T18:01:29.050

我刚刚尝试了 WebDriver (Selenium 2.0)，发现 WebElement#sendKeys(Keys.ENTER) 有效。

            回答 #5

赞同：2

时间：2010-11-16T11:32:56.420

在这里，这个将起作用：

```
selenium.waitForPageToLoad("60000");

selenium.click("link= my link"); 
```

            回答 #6

赞同：2

时间：2011-03-03T00:28:41.057

我现在也遇到了这个问题。从我的用法来看，似乎以下是最一致的：

```
@browser.click(selector, {:wait_for => :page}) 
```

不完全确定为什么会这样。但似乎如果你这样做：

```
@browser.click(selector)
   [maybe some stuff here too]
@browser.wait_for(:wait_for => :page) 
```

然后你可能最终会等待一个已经加载的页面（即你最终会永远等待）。

我深入研究了 Selenium 源代码，发现了这个块：

```
 def click(locator, options={})
    remote_control_command "click", [locator,]
    wait_for options
  end 
```

...

```
 # Waits for a new page to load.
  #
  # Selenium constantly keeps track of new pages loading, and sets a
  # "newPageLoaded" flag when it first notices a page load. Running
  # any other Selenium command after turns the flag to false. Hence,
  # if you want to wait for a page to load, you must wait immediately
  # after a Selenium command that caused a page-load.
  #
  # * 'timeout_in_seconds' is a timeout in seconds, after which this
  #   command will return with an error
  def wait_for_page(timeout_in_seconds=nil)
    remote_control_command "waitForPageToLoad",
        [actual_timeout_in_milliseconds(timeout_in_seconds),]
  end
  alias_method :wait_for_page_to_load, :wait_for_page 
```

基本上，这是在执行以下操作：

```
@browser.click(selector)
@browser.wait_for(:wait_for => :page) 
```

但是，正如评论所述，第一件事是在之后立即使用 :wait_for 命令。

当然……切换顺序会让你进入同样的等待状态。

```
@browser.wait_for(:wait_for => :page)
@browser.click(selector) 
```

在不了解 Selenium 的所有细节的情况下，似乎 Selenium 需要在 :wait_for 触发器作为选项传递时注册*click*。否则，如果您以某种方式告诉 Selenium 在调用 :wait_for 之前的那一刻等待，您最终可能会永远等待。

            回答 #7

赞同：2

时间：2011-06-30T12:26:38.680

我遇到了同样的问题 - Selenium 1.0.12 和 Firefox 5.0 ；我设法使自动化测试以这种方式工作：

*   我删除了所有“AndWait”命令（有时他们挂起测试/浏览器）
*   我在点击之前添加了一个暂停
*   单击后我添加了一个waitForVisible（通常我等待下一个要在下一页上与之交互的html控件）。

它是这样的：

*   waitForVisible OK
*   暂停 1000
*   点击确定
*   waitForVisible 链接=开始
*   暂停 1000
*   点击前往

ETC...

似乎“waitForVisible”被触发得太快了，即在事件处理程序插入控件之前（因此单击控件没有效果）。如果您等待 1 秒，则足以插入/激活点击处理程序......

            回答 #8

赞同：1

时间：2009-03-14T18:39:05.377

当您单击该页面时，该页面未正确加载。检查页面上的不同元素以确保页面已加载。

此外，请等待链接出现并可见，然后再单击它。

            回答 #9

赞同：1

时间：2009-03-14T20:38:47.723

确保在正确的位置增加超时。您发布的行是：

```
selenium.click("link=mylink");
selenium.waitForPageToLoad(60000); 
```

此等待是在单击后返回的页面加载。但是您描述的问题是尝试单击时失败。因此，请确保在此之前增加等待。

```
selenium.click("link=mylink");
selenium.waitForPageToLoad(60000);

// do something, then navigate to a different page 
// (window focus is never changed in-between)
// after the last click in these steps:
selenium.waitForPageToLoad(60000);
// anything else that happened after that

selenium.click("link=mylink");
selenium.waitForPageToLoad(60000); 
```

            回答 #10

赞同：1

时间：2011-03-29T05:59:13.890

如果您使用的是 FireFox，请确保您使用的是 3.6 或更高版本。WaitForPageToLoad 使用 javascript 变量 'readyState'，但 Firefox 仅在 3.6 中支持此功能。早期版本只是不要等待

（见`org.openqa.selenium.internal.seleniumemulation.WaitForPageToLoad`）

            回答 #11

赞同：0

时间：2011-02-25T16:31:21.390

我有同样的问题 :( 使用 selenium IDE 1.0.10，phpunit 3.5，selenium RC server 1.0.3

```
 EDITED: 
 The culprit seems to be browser FF 3.6.13 , after upgrade to FF 3.6.14
  all my errors are  gone . My tests are working like charm :). 

 Selenium IDE 1.0.10
 PHPUnit: 3.5.6
 Selenium Server:selenium-2.0b1 (selenium-2.0b2 is buggy) 
```

            回答 #12

赞同：0

时间：2010-07-20T11:02:19.150

```
selenium.click("link=Continue to this website (not recommended).");
Thread.sleep(5000); 
```

            回答 #13

赞同：0

时间：2010-04-21T14:03:44.580

尝试这个：

```
selenium.fireEvent(ID, "keypress"); 
```

            回答 #14

赞同：0

时间：2011-02-01T18:23:18.720

我一直有同样的问题，发现我必须先获取链接的文本。我知道这不是理想的方法，但我很幸运我的链接是唯一命名的。

C#代码：

```
var text = Selenium.GetText(myLocator);
Selenium.Click("link=" + text); 
```

        python - 为什么我在安装 pysqlite2.5.3 时出错

ID：633601

赞同：1

时间：2009-03-11T07:01:54.813

标签：python, linux, sqlite

我正在尝试在 SLSE 9 上构建 pysqlite 2.5.3 包，并且遇到各种编译错误，即

```
...
src/module.c:290: error: initializer element is not constant
src/module.c:290: error: (near initialization for `_int_constants[27].constant_value')
src/module.c:290: error: initializer element is not constant
src/module.c:290: error: (near initialization for `_int_constants[27]')
src/module.c:291: error: `SQLITE_ATTACH' undeclared here (not in a function)
src/module.c:291: error: initializer element is not constant
src/module.c:291: error: (near initialization for `_int_constants[28].constant_value')
src/module.c:291: error: initializer element is not constant
src/module.c:291: error: (near initialization for `_int_constants[28]')
src/module.c:292: error: `SQLITE_DETACH' undeclared here (not in a function)
src/module.c:292: error: initializer element is not constant
src/module.c:292: error: (near initialization for `_int_constants[29].constant_value')
src/module.c:292: error: initializer element is not constant
src/module.c:292: error: (near initialization for `_int_constants[29]')
src/module.c:300: error: initializer element is not constant
src/module.c:300: error: (near initialization for `_int_constants[30]')
src/module.c: In function `init_sqlite':
src/module.c:419: warning: implicit declaration of function `sqlite3_libversion'
src/module.c:419: warning: passing arg 1 of `PyString_FromString' makes pointer from integer without a cast
error: command 'gcc' failed with exit status 1 
```

事情失败了

这是我的 setup.cfg 文件：

```
[build_ext]
#define=
#include_dirs=/usr/local/include
#library_dirs=/usr/local/lib
libraries=sqlite3
define= 
```

SQLlite 正在运行...当我执行 sqlite3 时，我得到了命令界面。

我错过了什么？

加思

            回答 #1

赞同：4

时间：2009-03-11T07:04:21.237

您是否安装了 sqlite 开发标头？

错误：此处未声明 SQLITE_DETACH'

看起来你需要 sqlite3-dev （或者你的发行版命名它，也许是 sqlite3-devel？）

**编辑：**

在一个善良的灵魂清理了你的错误跟踪之后，我很确定你错过了 sqlite3 开发头文件。你有图书馆，只是没有标题：

src/module.c:419：警告：函数“sqlite3_libversion”的隐式声明

如果没有标题，就没有原型。如果没有原型，你会看到一个抱怨隐式声明的警告（如果编译器设置为发出合理的警告）。

        regex - 如何使用正则表达式解析 Perl 中引用的 CSV？

ID：633607

赞同：12

时间：2009-03-11T07:04:24.310

标签：regex, perl, csv

我在解析带引号的 CSV 数据时遇到了一些问题。我的主要问题是字段中的引号。在下面的示例中，第 1 - 4 行正常工作，但第 5,6 和 7 行不能正常工作。

```
COLLOQ_TYPE,COLLOQ_NAME,COLLOQ_CODE,XDATA
S,"BELT,FAN",003541547,
S,"BELT V,FAN",000324244,
S,SHROUD SPRING SCREW,000868265,
S,"D" REL VALVE ASSY,000771881,
S,"YBELT,"V"",000323030,
S,"YBELT,'V'",000322933, 
```

**我想避免 Text::CSV 因为它没有安装在目标服务器上**。意识到 CSV 比看起来更复杂，我正在使用 Perl Cookbook 中的食谱。

```
sub parse_csv {
  my $text = shift; #record containg CSVs
  my @columns = ();
  push(@columns ,$+) while $text =~ m{
    # The first part groups the phrase inside quotes
    "([^\"\\]*(?:\\.[^\"\\]*)*)",?
      | ([^,]+),?
      | ,
    }gx;
  push(@columns ,undef) if substr($text, -1,1) eq ',';
  return @columns ; # list of vars that was comma separated.
} 
```

有没有人建议改进正则表达式来处理上述情况？

            回答 #1

赞同：35

时间：2009-03-11T07:31:11.733

请尝试使用 CPAN

没有理由不能下载[Text::CSV](http://search.cpan.org/perldoc?Text::CSV)的副本，或任何其他基于非 XS 的 CSV 解析器实现并将其安装在本地目录或项目的 lib/ 子目录中，因此它会一起安装随着您的项目推出。

如果您无法在项目中存储文本文件，那么我想知道您是如何编写项目的。

[http://novosial.org/perl/life-with-cpan/non-root/](http://novosial.org/perl/life-with-cpan/non-root/)

应该是有关如何在本地使它们进入工作状态的一个很好的指南。

不使用 CPAN 确实是灾难的根源。

请在尝试编写自己的 CSV 实现之前考虑这一点。

[Text::CSV](http://search.cpan.org/perldoc?Text::CSV)有超过一百行代码，包括修复的错误和边缘情况，从头开始重新编写只会让你了解 CSV 是多么糟糕。

[注意：我很难学到这一点。我花了一整天的时间在 PHP 中获得一个工作的 CSV 解析器，然后我发现一个内置的解析器已添加到更高版本中。这真是一件可怕的事情。]

            回答 #2

赞同：25

时间：2009-03-11T09:19:45.280

您可以使用Perl 附带的[Text::ParseWords](http://search.cpan.org/dist/Text-ParseWords/)解析 CSV 。

```
use Text::ParseWords;

while (<DATA>) {
    chomp;
    my @f = quotewords ',', 0, $_;
    say join ":" => @f;
}

__DATA__
COLLOQ_TYPE,COLLOQ_NAME,COLLOQ_CODE,XDATA
S,"BELT,FAN",003541547,
S,"BELT V,FAN",000324244,
S,SHROUD SPRING SCREW,000868265,
S,"D" REL VALVE ASSY,000771881,
S,"YBELT,"V"",000323030,
S,"YBELT,'V'",000322933, 
```

它可以正确解析您的 CSV....

```
# => COLLOQ_TYPE:COLLOQ_NAME:COLLOQ_CODE:XDATA
# => S:BELT,FAN:003541547:
# => S:BELT V,FAN:000324244:
# => S:SHROUD SPRING SCREW:000868265:
# => S:D REL VALVE ASSY:000771881:
# => S:YBELT,V:000323030:
# => S:YBELT,'V':000322933: 
```

我对 Text::ParseWords 的唯一问题是数据中的嵌套引号未正确转义。然而，这是糟糕的 CSV 数据，会导致大多数 CSV 解析器出现问题；-)

所以你可能会注意到

```
# S,"YBELT,"V"",000323030, 
```

出来了（即引号在“V”周围掉线）

```
# S:YBELT,V:000323030: 
```

但是，如果它像这样逃脱

```
# S,"YBELT,\"V\"",000323030, 
```

然后报价将被保留

```
# S:YBELT,"V":000323030: 
```

            回答 #3

赞同：2

时间：2012-03-11T20:53:28.680

这就像魅力

假定行以逗号分隔，并用 embeded 分隔，
 `my @columns = Text::ParseWords::parse_line(',', 0, $line);` 

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2011-04-28T12:34:47.657

# 经测试；在职的：-

```
$_.=','; # fake an ending delimiter

while($_=~/"((?:""|[^"])*)",|([^,]*),/g) {
  $cell=defined($1) ? $1:$2; $cell=~s/""/"/g; 
  print "$cell\n";
}

# The regexp strategy is as follows:
# First - we attempt a match on any quoted part starting the CSV line:-
#  "((?:""|[^"])*)",
# It must start with a quote, and end with a quote followed by a comma, and is allowed to contain either doublequotes - "" - or anything except a sinlge quote [^"] - this goes into $1
# If we can't match that, we accept anything up to the next comma instead, & put it into $2
# Lastly, we convert "" to " and print out the cell. 
```

请注意，CSV 文件可以包含在引号内嵌入换行符的单元格，因此如果一次读取一行数据，则需要执行此操作：

```
if("$pre$_"=~/,"[^,]*\z/) {
  $pre.=$_; next;
}
$_="$pre$_"; 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:11:10.767

使用正则表达式查找匹配对是一项非常重要且通常无法解决的任务。[Jeffrey Friedl 的精通正则表达式](http://oreilly.com/catalog/9781565922570/)一书中有很多例子。我现在手头没有它，但我记得他也用 CSV 来做一些例子。

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:37:21.017

您可以（尝试）使用 CPAN.pm 来简单地让您的程序安装/更新 Text::CSV。如前所述，您甚至可以将其“安装”到主目录或本地目录，然后将该目录添加到 @INC（或者，如果您不想使用`BEGIN`块，也可以`use lib 'dir';`- 这可能会更好）。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2010-02-09T11:43:37.793

测试：

```
 use Test::More tests => 2;

use strict;

sub splitCommaNotQuote {
    my ( $line ) = @_;

    my @fields = ();

    while ( $line =~ m/((\")([^\"]*)\"|[^,]*)(,|$)/g ) {
        if ( $2 ) {
            push( @fields, $3 );
        } else {
            push( @fields, $1 );
        }
        last if ( ! $4 );
    }

    return( @fields );
}

is_deeply(
    +[splitCommaNotQuote('S,"D" REL VALVE ASSY,000771881,')],
    +['S', '"D" REL VALVE ASSY', '000771881', ''],
    "Quote in value"
);
is_deeply(
    +[splitCommaNotQuote('S,"BELT V,FAN",000324244,')],
    +['S', 'BELT V,FAN', '000324244', ''],
    "Strip quotes from entire value"
); 
```

# javascript - Javascript 客户端高度不一致

> ID：633612
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T07:07:48.043
> 
>         
> 
> 标签：javascript, html, css, dom

[在编写 Javascript 时，我之前](https://stackoverflow.com/questions/632709/javascript-clientheight-and-alternatives)得到了帮助，该函数获取隐藏元素的高度，有人将我推荐给 Prototype 函数[getDimensions()](http://prototypejs.org/assets/2008/9/29/prototype-1.6.0.3.js)。在示例中，他们设置了“可见性：隐藏；位置：绝对；显示：块；”，这可以有效地让我们测量 clientHeight*将*如果它正在显示。然后他们把一切都放回去了，你就可以开始你的生意了。我没有使用原型，但我认为它工作正常。但是，当我尝试在自己的代码中模仿相同的功能时，使用“位置：绝对；” 放弃了测量。没有它它可以正常工作，但它的使用使我们能够在一瞬间做到这一点而不会扭曲设计。我的版本在下面，知道为什么它不起作用吗？

```
 var objStyle = obj[objName].style;

    // Record original style values
    var visibility = objStyle.visibility;
    //var position = objStyle.position;
    var display = objStyle.display;

    // Modify object for measuring
    objStyle.visibility = "hidden";
    //objStyle.position = "absolute";
    objStyle.display = "block";

    // Measure height
    height = obj[objName].clientHeight;

    // Fix object
    objStyle.visibility = visibility;
    //objStyle.position = position;
    objStyle.display = display;

    // Return height
    return parseInt(height); 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:12:28.347

我不知道它在不可见时是否有效，但 jQuery 在这里有一些选项 - 特别是[高度函数](http://docs.jquery.com/CSS/height)；值得一看吗？根据您的示例，类似：

```
height = $(obj[objName]).height(); 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:40:47.790

您是否仅在某些浏览器或所有浏览器上看到此内容？Prototype 的 getDimensions() 会检查 Safari（可能还有其他有问题的浏览器），您应该尝试将其也放入您的代码中，看看它是否能解决问题。

这也可能是由于您使用的是 obj[objName] 而不是 document.getElementById() - AFAIK 这些将返回略有不同的对象，这可能会导致您看到的不一致。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-10-29T14:59:54.427

我通常用 .offsetHeight 测量我的身高，例如：

var h = document.getElementById(divname).offsetHeight;

当我需要测量某物时，如果它有 position:absolute;

当我有两列并且一列是绝对的时，我通常会遇到这种情况，并且如果父级大于另一列，则需要将父级向下推。如果它大于另一列的高度，我将使用 offsetHeight 来设置父高度。

# svn - 适用于 Windows 的 SVN 挂钩

> ID：633614
> 
>         
> 
> 赞同：35
> 
>         
> 
> 时间：2009-03-11T07:09:49.537
> 
>         
> 
> 标签：svn, repository, svn-hooks

我做了一点谷歌搜索，发现实际上并没有适用于 Windows 的 SVN 挂钩资源。所以我想我会在这里建立一个维基来集中它。

如果您投稿，请务必注明：

1.  钩子的名字

2.  脚本的作用

3.  实际脚本

注意：我怀疑发布史诗脚本不会有用。

* * *

## 回答 #1

> 赞同：11
> 
>             
> 
> 时间：2009-03-11T07:19:41.510

## 防止带有空注释的提交

1.  预提交

2.  防止带有空注释的提交

资源：

```
"c:\Program Files\Subversion\bin\svnlook.exe" log -t %2 %1 | FindStr [a-zA-Z0-9]
IF %ERRORLEVEL% EQU 0 GOTO OK
echo "Commit Comments are Required" >&2
exit 1
:OK
exit 0 
```

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T07:10:53.217

## 防止编辑除 svn::log 之外的版本属性

1.  pre-revprop-change.bat

2.  防止编辑 svn::log 以外的修订属性

 **```
@ECHO OFF
:: Set all parameters. Even though most are not used, in case you want to add
:: changes that allow, for example, editing of the author or addition of log messages.
set repository=%1
set revision=%2
set userName=%3
set propertyName=%4
set action=%5

:: Only allow the log message to be changed, but not author, etc.
if /I not "%propertyName%" == "svn:log" goto ERROR_PROPNAME

:: Only allow modification of a log message, not addition or deletion.
if /I not "%action%" == "M" goto ERROR_ACTION

:: Make sure that the new svn:log message is not empty.
set bIsEmpty=true
for /f "tokens=*" %%g in ('find /V ""') do (
set bIsEmpty=false
)
if "%bIsEmpty%" == "true" goto ERROR_EMPTY

goto :eof

:ERROR_EMPTY
echo Empty svn:log messages are not allowed. >&2
goto ERROR_EXIT

:ERROR_PROPNAME
echo Only changes to svn:log messages are allowed. >&2
goto ERROR_EXIT

:ERROR_ACTION
echo Only modifications to svn:log revision properties are allowed. >&2
goto ERROR_EXIT

:ERROR_EXIT
exit /b 1 
```

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2010-03-04T04:55:13.617

*** 更新：这不再有效，因为 Twitter 已弃用用户名/密码身份验证以支持 OAuth。***

## 将提交信息发布到 Twitter

1.  钩子的名称 = post-commit

2.  脚本的作用 = 将修订、作者和提交消息发布到 Twitter

### 使用说明：

*   将**twitterUsername**和**twitterPassword**替换为您的实际 Twitter

*   这是针对 VisualSVN 进行测试的，我可以让它工作的唯一方法是将所有内容转储到硬编码路径**c:\hook\post-commit**中。您可以将其更改为 VisualSVN 具有读/写访问权限的任何路径。

*   需要安装 Wget。安装程序可以在[这里下载](http://gnuwin32.sourceforge.net/packages/wget.htm)

*   欢迎评论和改进。这是我在 Windows 上的第一个 SVN 钩子，我的 GAWD 很痛苦。

### 实际脚本

```
echo status= > c:\hook\post-commit\msg.txt
echo Rev#%2 by >> c:\hook\post-commit\msg.txt
"%VISUALSVN_SERVER%\bin\svnlook.exe" author -r %2 %1 >> c:\hook\post-commit\msg.txt
"%VISUALSVN_SERVER%\bin\svnlook.exe" log -r %2 %1 >> c:\hook\post-commit\msg.txt
"c:\Program Files (x86)\GnuWin32\bin\wget.exe" --user=twitterUsername --password=twitterPassword --post-file=c:\hook\post-commit\msg.txt --append-output=c:\hook\post-commit\log.txt --output-document=c:\hook\post-commit\download.txt --delete-after http://twitter.com/statuses/update.xml 
```

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-10-20T15:52:53.770

## 检查常见的“惰性”提交消息

1.  钩子的名称 = 预提交

2.  脚本的作用 = 检查空行或“。” 线。还要检查一个不允许作为唯一评论的单词文件。

实际脚本

```
rem Make sure that the log message contains some text.
set REPOS=%1
set TXN=%2

"C:\Program Files\Subversion\bin\SVNlook.exe" log -t %TXN% %REPOS% | FindStr [a-zA-Z0-9]
IF %ERRORLEVEL% EQU 0 GOTO OK
echo Your commit has been blocked because you didn't provide a log message  1>&2
echo Please write a log message describing the purpose of your changes and 1>&2
echo then try committing again. -- Thank you 1>&2 
exit 1

:OK
rem Check if comment is in list of reserved words to not be used..

"C:\Program Files\Subversion\bin\SVNlook.exe" log -t %TXN% %REPOS% >comment
setlocal enabledelayedexpansion
Set SEPARATOR=
set COMMENT=
for /f "delims=" %%a in (comment) do (  
    set currentline=%%a
    set COMMENT=!COMMENT!%SEPARATOR%!currentline!
)

FIND "%COMMENT%" "C:\Program Files\Subversion\excludedwords.txt">Null
If %ERRORLEVEL% EQU 1 goto OK2

:Fail
echo Your commit has been blocked because the single word comment you provided is not allowed 1>&2
echo Line is -%COMMENT%- 1>&2
echo Please write a proper log message describing the purpose of your changes and 1>&2
echo then try committing again. -- Thank you 1>&2 
exit 1

:OK2
rem Check that the author of this commit has the rights to perform
rem the commit on the files and directories being modified.
rem commit-access-control.pl "$REPOS" "$TXN" commit-access-control.cfg || exit 1

rem All checks passed, so allow the commit.
exit 0 
```

示例排除的单词文件：更新更新更新。更新。修复修复修复。使固定。... ... . . . . 排序排序。排序排序。

等等等等等等

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2011-12-08T22:32:16.957

我喜欢使用用 java 编码的 subHooker。它提供了提交前和提交后挂钩功能。

**预提交：**

*   强制提交消息要求，或最小长度或两者（或不）

*   可以在提交消息中强制执行 RegEX 表达式要求，有利于要求积压或缺陷编号（或不要求）

**提交后：**

*   发送 HTML 或纯文本电子邮件

    *   普通消息和 html 消息都使用模板系统

    *   可以打开或关闭差异

    *   可以打开或关闭更改集

*   支持本地化

*   支持标准化日志记录。

您可以在 google 代码@http://code.google.com/p/subhooker/ 上找到[它](http://code.google.com/p/subhooker/)

它是免费的，是的，我是作者，我已经运行 subversion 几年了，我非常喜欢它，这就是我将其回馈给社区的原因。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T07:28:44.860

对于在 Windows 上使用 Subversion 的 .NET 开发人员，Phil Haack 发布了有关[CaptainHook](http://haacked.com/archive/2006/07/27/IntroducingCaptainHookASubversionHookFrameworkFor.NET.aspx)的文章。

> CaptainHook 是一个简单的插件框架，用于使用 .NET 编写 Subversion 钩子

该项目托管在[Source Forge](http://sourceforge.net/projects/captainhook/) 

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2009-06-04T14:30:20.577

## 防止编辑除 svn::log 之外的版本属性

1.  pre-revprop-change.bat

2.  防止编辑 svn::log 以外的修订属性（替代版本）

资源：

```
rem Only allow log messages to be changed.
if "%4" == "svn:log" exit 0
echo Property '%4' cannot be changed >&2
exit 1 
```

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-03-19T17:31:36.337

I started a repository of hooks using C#. My first hook was one to send check in notices to a RSS feed: [SubversionRss](http://systemwidgets.com/Downloads/SubversionChooks/tabid/82/Default.aspx) I'm currently working on one post-commit hook to send check in notices to a Twitter feed.

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2016-07-04T14:29:54.573

# 这个钩子防止提交到特定的分支

（在这种情况下是*branch-16E ）：*

```
setlocal

rem Subversion sends through the path to the repository and transaction id  
set REPOS=%1
set TXN=%2

rem Committing to a branch is not allowed
svnlook changed -t %TXN% %REPOS% | findstr "\/branch-16E"
if %errorlevel% EQU 0 goto errb else exit 0

:errb
echo. 1>&2
echo This branch was closed. If you want to commit here contact your administrator. 1>&2
exit 1 
```

# javascript - 低级函数和顶级函数有什么区别？

> ID：633617
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-03-11T07:11:10.063
> 
>         
> 
> 标签：javascript, project-management, function

我需要理解下面这句话：“Charles Simonyi 介绍了组织真正大型软件团队的想法，他创建了一个超级傻瓜超级程序员来编写**顶层函数**，同时将**低层函数**的实现交给一个 grunt 团队初级程序员根据需要。他们称这个职位为项目经理。

1.  我想知道什么是**顶级功能**

2.  什么是**低级**功能？

3.  项目经理如何轻松识别**顶级和低级功能**？

4.  你能提供顶级和低级函数的**Javascript 示例吗？**

顺便说一句，上面的引述来自 Joel Spolsky，摘自他关于如何成为项目经理的博客。

* * *

## 回答 #1

> 赞同：23
> 
>             
> 
> 时间：2009-03-11T07:14:42.600

越接近人类语言，功能就越高。

越接近机器语言，功能越低级。

我很简单，但这里有一些例子：

高级功能：

```
Car.Start()
Car.MoveTo(Home) 
```

低级功能：

```
Car.Insert(Key);
if (Car.IsKeyInserted() == False)
   return False;

Car.StartEngine();
Car.ApplyAccelerator(0.1f);
Car.ChangeGear();
Car.RotateWheel(-25); 
```

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2015-04-30T22:05:54.773

**顶级函数**是描述在子或函数之外编写程序代码的术语。从声明内容到实际运行程序代码（如 vbs/jscript）有不同的级别。

它通常不鼓励或不允许用于预期复杂的语言。例如，VB 只允许 const 和 declares 和 dim。C# 不允许任何顶层。

我们通常使用**更高层次**来描述语言的抽象。

在某些语言中，该术语将是顶级方法。

我记得很久以前读过这个。

[http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-tc-implement-top-level-methods.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)链接回这个网站[为什么 C# 不允许非成员函数，如 C++](https://stackoverflow.com/questions/1024171/why-c-is-not-allowing-non-member-functions-like-c/1027853#1027853)

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:35:47.720

当我们在编程中谈论“高级”和“低级”时，通常指的是抽象级别。高级函数是抽象出细节的函数，这里有一个高级抽象的例子：

```
$('div#foo p').show('fast'); 
```

该片段来自 jQuery JavaScript 框架，它演示了一项非常复杂的任务，但使您能够非常轻松地启动它。较低级别的抽象是这样的：

```
$('div#foo p').animate({height: 'show', width: 'show', opacity: 1}, 200); 
```

它仍然是 jQuery，但涉及更多细节，它是较低级别的。当然，你可以得到更低的：

```
animate(document.getElementById('foo').getElementsByTagName('p'), {
    height: 300, width: 600, opacity: 1, alphaFilter: 1
}, 200); 
```

（使用自定义构建的动画方法）

等等等等。

最佳抽象级别始终处于激烈争论之中。过高会导致[抽象泄漏](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)，但过低可能效率低下且浪费时间，尤其是在存在更高抽象的情况下。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T17:01:02.300

这指的是函数位于调用堆栈的下方多远。当程序启动时，操作系统调用 main() 或顶层，其中包括对下一个较低层函数的调用。每个依次调用其他函数来完成更多基本任务，最终调用操作系统中的函数，例如打开文件。低级函数是程序中不调用您编写的任何其他函数的函数（但使用操作系统或框架来计算它们的结果等）。

* * *

## 回答 #5

> 赞同：-1
> 
>             
> 
> 时间：2009-03-11T07:38:30.967

简单的问题可以用几句话回答，但基本主题涵盖了整本书。然而，这与 Javascript 无关，只是可以使用 Javascript 来创建函数。

不过，Valdez 先生是对的……这完全取决于您的函数定义的抽象级别。

还有其他的软件设计和架构查找方法

[这个有一个部分可以很好地回答您的问题](http://en.wikipedia.org/wiki/Top-down)

[此页面以更广泛的视角讨论该主题](http://en.wikipedia.org/wiki/Software_development_process)

* * *

## 回答 #6

> 赞同：-1
> 
>             
> 
> 时间：2019-08-20T14:49:14.827

实际上只有高级**或**低级**功能**。

```
function higherlevel(){
  foo                
  .init()             // aha, this is daisychained
  .loadFromDatabase() // gotcha
  .render()           // makes sense
  .logProgress()      // right. 
}

function render(){    // lowerlevel
  // if 
  // while
  // for
  // throw/catch
  // _.get(foo,'bar.flop')
  return foo 
}
```

JS 中的菊花链函数可以很容易地**识别**为高级/低级函数。

私有的、受保护的类方法和/或下划线函数可以被识别为较低级别的函数。

生活在全局范围内的函数可以被识别为顶级函数。它们可以是较低级别（*window.querySelector(..)*例如在 DOM 上操作）或更高级别（*window.close()*）  

# apache - 如何使用 RewriteCond 反向引用 %N

> ID：633625
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T07:17:48.287
> 
>         
> 
> 标签：apache, mod-rewrite

我的 httpd.conf 中有以下规则

```
 RewriteEngine on
       RewriteBase /
       RewriteCond %{QUERY_STRING} password=* 
       RewriteCond %{QUERY_STRING} bi2=(.*) 
       RewriteCond %{REQUEST_URI}  /myGet.php(.*)$
       RewriteRule ^(.*)$  http://blog.myexample%1.com/$1 
```

但是，当我执行请求 URI   

> /myGet.php?password=john&bi2=67

我被重定向到

> [http://blog.myexample.com/myGet.php?password=john&bi2=67](http://blog.myexample.com/myGet.php?password=john&bi2=67)

代替

> [http://blog.myexample67.com/myGet.php?password=john&bi2=67](http://blog.myexample67.com/myGet.php?password=john&bi2=67)

[RewriteCond BackReferencing](http://www.micronovae.com/ModRewrite/ref/RewriteCond.html)的%N 似乎不起作用。**虽然 $N 是**.  

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T10:39:17.600

更改顺序或`RewriteCond`指令，以便最后一个指令是您想要从中获取信息的指令：

```
RewriteCond %{QUERY_STRING} password=* 
RewriteCond %{REQUEST_URI}  /myGet.php(.*)$
RewriteCond %{QUERY_STRING} bi2=(.*)
RewriteRule ^(.*)$  http://blog.myexample%1.com/$1 
```

但我更建议：

```
RewriteCond %{QUERY_STRING} password=
RewriteCond %{QUERY_STRING} bi2=([^&]*)
RewriteRule ^/myGet\.php.*$  http://blog.myexample%1.com$0 
```

# networking - 为什么 PathPing 比 Tracert 快？

> ID：633627
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T07:18:29.580
> 
>         
> 
> 标签：networking, traceroute

我想知道为什么 PathPing 比 Tracert 快。我用谷歌搜索了很多，但对我找到的答案并不满意，大多数答案都谈到了它的功能，但没有谈到为什么它比 tracert 更快。

Tracert 通过增量 TTL 工作并从每个节点收集响应，直到它到达目的地

但是 PathPing 是如何工作的呢？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-05-20T12:43:00.387

维基百科[详细介绍](http://en.wikipedia.org/wiki/Pathping)：

> **PathPing**是 Windows NT、Windows 2000、Windows 2003、Windows XP 和 Windows Vista 中提供的网络实用程序。它结合了 Ping 的功能和 Traceroute 的功能（在 Windows 中：tracert），通过提供两个主机之间的路径的详细信息以及路径中每个节点的类似 Ping 的统计信息，基于一段时间内采集的样本，具体取决于有多少节点位于起始主机和结束主机之间。
> 
> **PathPing 优于 ping 和 traceroute的优点**是每个节点都作为单个命令的结果进行 ping，并且在延长的时间段内研究节点的行为，而不是 Ping 的四个消息的默认样本或 Traceroute 的默认单个路由痕迹。
> 
> **缺点**是，使用默认设置，通常需要五分钟以上才能产生结果。

...这表明路径实际上更慢！

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T08:02:42.453

它并不快。PathPing 只是将traceroute 和ping 方法结合在一个实用程序中，即一旦发现就开始ping 路径中​​的每个节点。

在大多数情况下，这两个应用程序的主要减速来自名称解析过程，而不是实际跟踪。

# php - 如何让 Zend IDE 5.5.1 不用担心反斜杠？

> ID：633629
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T07:20:28.140
> 
>         
> 
> 标签：php, regex, ide, zend-studio

我使用 Zend IDE 并且经常使用分析代码来快速找到未声明或未使用的变量。作为所有 PHP 开发人员，我也使用正则表达式。

所以主要问题是在哪里设置复选框或调整配置文件以禁用这些警告：

错误的转义序列：\s（第 NN 行）

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-12T14:03:49.253

窗口->首选项->php->代码分析器->bug->bas转义序列

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T15:04:35.713

你为什么不更正输入错误的字符串声明。如果您有正则表达式`foo\sbar`，请将其写为：

```
'foo\\sbar'
"foo\\sbar" 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2016-04-22T11:44:17.143

我听从了@SMka 的建议，并像个魅力一样工作。但是，对于我的 Zend Studio (10.1) 版本，选项是：Window->Preferences->Semantic Analysis Properties

从那里，只需将“字符串中的错误转义序列”设置为忽略。

请记住，我并不是建议在每种情况下都更改它。这就是我想要的，因为它标记了我所有的正则表达式（已经工作了多年的正则表达式，所以没有理由因为警告而改变它们）。

希望这可以帮助...

# sharepoint - Sharepoint：如何找到承载特定 Web 部件的所有页面？

> ID：633633
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T07:24:19.470
> 
>         
> 
> 标签：sharepoint, web-parts

正如问题所说 - 有没有办法确定哪些页面包含我的 Web 部件？

* * *

## 回答 #1

> 赞同：15
> 
>             
> 
> 时间：2009-03-11T12:46:23.380

如果您正在寻找代码，我为您准备了一些东西。如果您想查找所有内容查询 Web 部件，那么您可以这样调用我的代码：

```
FindWebPart("http://server.com/", "Microsoft.SharePoint.Publishing.WebControls.ContentByQueryWebPart"); 
```

这是代码：

```
public static void FindWebPart(string siteCollectionUrl, string webPartName)
{
    using (SPSite siteCollection = new SPSite(siteCollectionUrl))
    {
        using (SPWeb rootSite = siteCollection.OpenWeb())
        {
            FindWebPartHelper(rootSite, webPartName);
        }
    }
}

public static void FindWebPartHelper(SPWeb site, string webPartName)
{
    // Search for web part in Pages document library
    SPList pagesList = null;
    try
    {
        pagesList = site.Lists["Pages"];
    }
    catch (ArgumentException)
    {
        // List not found
    }

    if (null != pagesList)
    {
        SPListItemCollection pages = pagesList.Items;
        foreach (SPListItem page in pages)
        {
            SPFile file = page.File;
            using (SPLimitedWebPartManager mgr = file.GetLimitedWebPartManager(PersonalizationScope.Shared))
            {
                try
                {
                    SPLimitedWebPartCollection webparts = mgr.WebParts;
                    foreach (System.Web.UI.WebControls.WebParts.WebPart wp in webparts)
                    {
                        // Here perform the webpart check
                        // For instance you could identify the web part by
                        // its class name

                        if (webPartName == wp.GetType().ToString())
                        {
                            // Found a match! Now do something...
                            Console.WriteLine("Found web part!");
                        }
                    }
                }
                finally
                {
                    // Needs to be disposed
                    mgr.Web.Dispose();
                }

            }
        }
    }

    // Check sub sites
    SPWebCollection subSites = site.Webs;
    foreach (SPWeb subSite in subSites)
    {
        try
        {
            FindWebPartHelper(subSite, webPartName);
        }
        finally
        {
            // Don't forget to dispose!
            subSite.Dispose();
        }
    }
} 
```

当然，你可以对这段代码做些小改动。目前它进行字符串比较，但很容易以更键入的方式进行。玩得开心！

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2011-06-21T11:37:21.373

作为替代方法，如果要测试包含协作站点上的默认页面的 Web 部件页面，可以使用以下代码片段，该代码片段使用 SPWeb 对象的 Files 属性：

```
private static void FindWebPart(string siteUrl, string webPartName)
{
    using (var site = new SPSite(siteUrl))
    {
        foreach (SPWeb web in site.AllWebs)
        {

            foreach (var file in web.Files.Cast<SPFile>().Where(file => file.Name.EndsWith("aspx")))
            {
                FindWebPartOnPage(webPartName, file);
            }

            var pagesTemplateType = (SPListTemplateType)Enum.Parse(typeof(SPListTemplateType), "850");
            foreach (var documentLibrary in web.Lists.Cast<SPList>().Where(list => list.BaseTemplate == pagesTemplateType || (list.BaseTemplate == SPListTemplateType.DocumentLibrary && list.Title.Contains("Pages"))))
            {
                foreach (var file in documentLibrary.Items.Cast<SPListItem>().Where(item => item.File.Name.EndsWith("aspx")).Select(item => item.File))
                {
                    FindWebPartOnPage(webPartName, file);
                }
            }

            web.Dispose();
        }
    }
}

private static void FindWebPartOnPage(string webPartName, SPFile file)
{
    using (var webPartManager = file.GetLimitedWebPartManager(PersonalizationScope.Shared))
    {
        if (webPartManager.WebParts.Cast<WebPart>().Any(webPart => webPart.GetType().Name == webPartName))
        {
            Console.WriteLine(file.ServerRelativeUrl);
        }

        webPartManager.Web.Dispose();
    }
} 
```

注意：发布功能创建的页面库没有 SPListTemplateType.DocumentLibrary 的 BaseTemplate 值；相反，它由 850 的“隐藏”值表示。

这与 LeonZandman 的回答类似，但仅使用类名来提供匹配项：

```
FindWebPart("http://yoursite.com/", "MyWebPart"); 
```

# c++ - 在头文件中声明类对象

> ID：633634
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-03-11T07:24:27.350
> 
>         
> 
> 标签：c++, object, header, linker

大家好。

我似乎陷入了困境，但我无法在任何地方找到解决方案。任何人，都会继续解释。

我有一个由三个文件组成的程序；main.ccp、add.h、add.cpp。

我在 add.h 中声明了“SA”类，并在 add.cpp 中定义了我的所有函数

附加.h

```
class SA {
    ...
public
    int x;
} Obj1, Obj2; 
```

主文件

```
#include "additional.h" 

int main() {

    Obj1.x = 5;

    ...
} 
```

这给了我编译时的链接错误：error LNK2005: "class SA Obj1" (?Obj1@@3VSA@@A) already defined in main.obj

对象的唯一定义出现在 add.h 中，没有其他地方。如果在 main 而不是 header 中声明对象，则程序编译得很好：

主文件

```
#include "additional.h" 

int main() {

    SA Obj1;
    Obj1.x = 5;

    ...
} 
```

问题是我想主要在 add.cpp 中使用对象，但仍然需要通过 main.cpp 初始化几个公共值。有什么智慧之言吗？

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2009-03-11T07:29:46.963

在 .cpp 而不是在 .h 中声明 Obj1 和 Obj2

添加.h

```
class SA {
 ...
public
    int x;
}; 
```

主文件

```
#include "additional.h" 

SA Obj1, Obj2;

int main() {

 Obj1.x = 5;

 ...
} 
```

如果要在 .h 文件中声明 Obj1 和 Obj2，请在 .h 文件中添加 extern，如下所示：

```
extern SA Obj1, Obj2; 
```

但您应该在项目的 .cpp 文件中声明对象：

主文件

```
SA Obj1, Obj2; 
```

这样做的原因是每次包含 .h 文件时，您都在声明 Obj1 和 Obj2。因此，如果您包含 .h 文件两次，您将创建 Obj1 和 Obj2 的两个实例。通过添加关键字 extern，您是在告诉编译器您已经在项目的某处（最好是在 .cpp 文件中）标记了这两个变量。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T07:28:09.323

使用*extern*关键字。在标头中将这些公共对象声明为 extern，然后在其中一个 cpps 中定义实例。

像这样：

```
extern SA Obj1; // in header

SA Obj1;// in any one (no more than one) cpp 
```

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2010-02-25T16:47:11.157

您还可以在头文件中包含以下代码行：

```
static SA Obj1, Obj2; 
```

这将在运行时仅创建每个对象的 1 个实例并防止重新定义。但是，请记住，包含 .h 文件的所有文件都将使用这两个对象的相同实例，因此在访问它们时需要小心。

# 3d - 在 3D 游戏中飞行？

> ID：633636
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-03-11T07:25:51.823
> 
>         
> 
> 标签：3d

我想知道为什么很少有 3d 游戏有一种机制，允许玩家在他喜欢的时候飞越地图并降落。这在 3D 游戏中很难实现，还是在其他技术上不可行？

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T07:28:05.937

嗯......不。没有技术原因，当然取决于你想模拟真实飞行的程度。可能是出于游戏性原因，游戏设计者选择限制玩家在地图上的移动。

许多基于团队/战术的游戏（射手）依赖于地面战斗中玩家之间的相互作用，如果玩家可以自由飞行，那就不一样了。

**编辑**：再想一想，从技术角度来看，*可能存在反对飞行的情况，因为更高的视点高度和更快的整体运动可能会对渲染子系统提出更高的要求。*以风景渲染为例，很容易想象，如果您知道视点总是合理地靠近表面，那么您可以进行优化，如果您可以飞到数百米以上，那么优化就会中断。

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T07:30:17.210

我怀疑从技术角度来看这将是一件困难的事情，但是使用短距离绘制物体的游戏可能看起来很糟糕，因为只绘制了玩家周围的直接区域。

我对为什么没有做更多的猜测是，如果玩家可以从任何地方开始并去任何地方，那么从游戏的角度来看，这确实会使关卡设计变得困难。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T08:24:20.013

两个原因：

*   对于大多数游戏来说，游戏难度（和乐趣）的很大一部分取决于这样一个事实，即为了从起点到达关卡的出口，您必须克服某些障碍。如果你能飞，游戏会更容易/不那么有趣，如果不是这种情况，设计关卡将毫无意义。

*   大多数 3D 游戏都专注于使景观更加细致和漂亮，这是一项艰巨的工作。因此，为了确定发布日期，3D 美术师将玩家从关卡内部看不到的所有内容都删掉了。如果你在“飞行模式”下破解，你会突然发现[山丘没有背面](http://uru.patchallel.com/images/flymode_teledahn4.jpg)，远处的山脉只是漂浮在附近[空气中的平面，](http://uru.patchallel.com/images/flymode_gira2.jpg)[大海有明显的重复纹理](http://uru.patchallel.com/images/flymode_teledahn2.jpg)。要使近处和远处的景观都变得漂亮，需要做更多的工作（以及稍后的发布日期）。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T07:36:25.277

这是一个程序员的网站，所以这是从开发人员的角度来看的答案：

```
Position TeleportHere = {10, 10};

Player.Position = TeleportHere; 
```

仅仅为了从 A 点到 B 点而添加附加动画是没有意义的。

从游戏玩家的角度来看，这取决于游戏设计师。如果他们想要飞行，可以做到，程序员会为此编写一个机制（当然还有动画）。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T07:59:19.327

在 King's bounty Legend 中你会从一个地方飞到另一个地方，所以你可以在那里看看，它会是什么样子。存在的问题是，您的机器必须渲染更多信息和更长的视线，才能使体验更加流畅。

在地面上，你就像在一个有舞台和背景图片的剧院里，它与你想让观众（观众）看到的尺寸相匹配，并且通过一些绘画技巧，你可以获得透视。但是如果你从错误的方向看那些平面图片，视觉就会被破坏。

所以你不能使用图片作为背景，也必须渲染这些东西。

（见街头画家朱利安·比弗的照片）

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T16:44:26.503

即使考虑到当今的计算资源，使 3D 环境看起来不错也并非易事。总是有一些基于“没人会注意到”的概念的调整。

例如，Duke Nukem 3D 的 3D 引擎本质上是 2D。无法直接向上或向下看，因为没有正确实现垂直透视（垂直边缘*始终*与显示器的侧边缘平行）。除非您设法隐藏在内部重叠的事实，否则不可能在房间之上创建房间。

最近的一个例子是魔兽世界。飞行坐骑被引入后，最初无法在旧的“大陆”中使用，因为有太多的黑客可以产生一个广阔的世界的错觉，一旦有人飞出预定的路径就会破碎。永远不可能只从上面看到暴风城“躺在那里”，因为如果从地面看不到，那将是一团乱七八糟的精灵和扭曲的网格。这就像一个西方城市的模型，只有立面真的在那里。

如果要让玩家自由飞行，这样的伎俩是不可能的。你必须让一切都完成。这意味着世界设计师和建设者的工作量要翻倍。我想你可以想象，在截止日期驱动的开发中，游戏公司非常热衷于尽可能缩短时间。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T16:54:43.593

很多时候，游戏世界就像一个电影场景——例如，建筑物只有一两个外墙。原因是，在正常的游戏条件下，永远不可能看到建筑物的另一面。通过不定义多边形，优点是：

1.  减少了艺术家的工作量，缩短了开发时间；

2.  渲染引擎的工作量更少，最好的优化是什么都不做，所以处理零多边形比剔除多边形快得多；和

3.  您可以将这些保存的多边形放在其他地方使用，让玩家可以看到它们。您可以绘制的多边形数量是有限的。

我想这就像在问为什么游戏中有打不开的门？为什么不对游戏世界中每栋建筑的每一个房间进行建模呢？这适合赛车游戏吗？

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-03-12T12:45:06.337

以魔兽世界为例，作为一个有飞行但不是无处不在的游戏：

1.  你不能在游戏的任何原始区域（即在引入玩家飞行之前建造的区域）“​​随心所欲地”飞行，因为这些区域不是为玩家飞行而设计的，除非沿着预先设定的路线交通系统提供的——设计师自己指出，风景使用了其他地方提到的一些技巧（2D 广告牌等）。

2.  在达到一定级别之前您不能飞行：第一个扩展包中为 68（德鲁伊）/70（其他所有人），然后在最新扩展包中为 77。这是一个深思熟虑的选择，以确保玩家不只是“跳过大片内容”。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:41:33.860

没有技术原因，但游戏作者倾向于专注于实际游戏所需的功能。一些游戏增加了额外的功能，比如复活节彩蛋，但他们的发行商可能更希望他们早点推出游戏，而不会有引入额外错误的风险。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:41:55.793

ESF，半条命的 DBZ 模组实现了飞行角色（就像 DBZ 的角色飞行一样！）

[优酷剪辑](http://www.youtube.com/watch?v=qOPVMJEcaUk)

这个模组是由一群业余爱好者制作的，**没有**任何公司（AFAIK）的支持，它在半条命 1 引擎中，（按照今天的标准，它已经很老了），

所以完成它绝对没有技术困难。

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:00:01.383

最初的 UnrealTournament 允许您在比赛开始前在地图上飞行。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:02:59.643

战地2能做到吗？

...好吧，直到它无缘无故地随机退出桌面。

不过说真的。喷气式飞机和直升机能够在任何地方降落。

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2009-03-12T12:32:33.840

将飞行作为次要功能，角色只需降落在屋顶或树上即可完全打破游戏平衡。

寻路、调整 AI 和游戏机制需要付出很多努力，就像添加额外维度的内容一样。只有当飞行是游戏的核心功能之一时，这样的投资才有意义。

# oracle - Oracle：DBMS_OUTPUT 包的任何替代品？

> ID：633642
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T07:29:15.357
> 
>         
> 
> 标签：oracle, dbms-output

特别是没有 256 个最大字符/行和 1000000 个最大字符/缓冲区限制的。

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T07:35:34.483

也许这些选项之一会满足您的需求（取决于您是在服务器端还是客户端编写一些东西）：

*   UTL_FILE

*   TEXT_IO

*   [AskTom 帖子](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:146412348066)

（由 Mark Harrison 更新）我使用了 AskTom 帖子中的 my-dbms-output 包。一个非常好的功能是您可以通过视图访问结果，以便在客户端程序中轻松显示输出。我将其重命名为更短的名称。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T07:50:30.593

什么版本的甲骨文？在最近的版本中，这两个限制都已放宽。10.2 支持超过 255 个字符的行（新限制为 32k）并消除了最大缓冲区大小限制。Oracle 9.2 有每行 255 个字符/1 MB 的总限制，但 Oracle 已不再支持该版本。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T07:46:45.097

您可以使用 TCP 包将输出写入终端或远程数据记录器。非常适合调试在计划任务中运行的包代码。

编辑：这是一个示例过程：

```
procedure pDebug( str in varchar2 )
-- output debugging message to display or tcp console
   is
x number;
l number;
nPort number;
sAddress varchar2(5000);
  begin
if c_bDebug = 1 then
    if c_tcpbDebug = 1 then
        if cSocket.remote_host is NULL then
            nPort := strMetaDataValue( 'TCP-DEBUG-PORT' );
            sAddress := strMetaDataValue( 'TCP-DEBUG-ADDRESS' );
            dbms_output.put_line( 'tcp:port ' || nPort );
            dbms_output.put_line( 'tcp:address ' || sAddress );
            if length( sAddress ) > 1 and nvl( nPort, 0 ) > 0 then
                begin
                dbms_output.put_line( 'tcp:open start ' ||to_char( SYSDATE, 'DD-MON-YYYY HH24:MI:SS' ) );
                cSocket := utl_tcp.open_connection( sAddress, nPort ); -- open connection
                dbms_output.put_line( 'tcp:open ' || to_char( SYSDATE, 'DD-MON-YYYY HH24:MI:SS' ) );
                c_tcpbDebug := 1;
                exception
                    when others then
                        dbms_output.put_line( SQLERRM );
                        dbms_output.put_line( 'Cant open debug tcp session ' || SYSTIMESTAMp );
                        c_tcpbDebug := 0;
                end;
            else
                c_tcpbDebug := 0;
            end if;
        end if;         

        if cSocket.remote_host is not NULL then
            dbms_output.put_line( 'tcp:write' );
            x := utl_tcp.write_line( cSocket, to_char( SYSDATE, 'DD-MON-YYYY HH24:MI:SS' ) || ' ' || str );
            x := utl_tcp.write_line( cSocket, utl_tcp.crlf );
        end if;
    end if;
-- this bit prints out the debug statement in 254 char bits
    l := length( str );
    x := 1;
    while x <= l loop
        dbms_output.put_line( substr( str,x,254 ) );
        x := x + 254;
    end loop;
end if;
end pDebug; 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T21:18:11.447

INSERT 是一个很棒的选择。您不仅可以从流程中获取信息，而且还可以保留这些信息以供将来参考或分析。并且可以使用一种称为 SQL 的非常常用的语言来检索、过滤和处理结果。您可以有一个默认为 sysdate 的列来检查时间和顺序。它可以放置在自治事务中，以避免由于回滚而丢失日志记录。

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T07:51:44.880

另一种选择，虽然可能不是一个很好的选择，是写入警报日志。

```
sys.dbms_system.ksdwrt(2,to_char(sysdate)|| ' -- The message '); 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-04-01T12:49:16.863

dbms_output 的一个限制是输出仅在语句完成后才可用。为了跟踪长时间运行的进程，我使用 dbms_pipe 发送状态消息。然后，在管道的另一端，您可以看到该过程在做什么。

# c# - 在 switch 语句中对枚举进行编程，这是你的方式吗？

> ID：633656
> 
>         
> 
> 赞同：10
> 
>         
> 
> 时间：2009-03-11T07:39:42.447
> 
>         
> 
> 标签：c#, .net

看代码片段：

这是我在针对枚举进行编码时通常会做的事情。我有一个带有 InvalidOperationException 的默认转义（我不使用 ArgumentException 或其派生类之一，因为编码是针对私有实例字段而不是传入参数）。

我想知道你们的开发人员是否也在考虑这种逃避编码......

```
public enum DrivingState {Neutral, Drive, Parking, Reverse};

public class MyHelper
{
    private DrivingState drivingState = DrivingState.Neutral;

    public void Run()
    {
        switch (this.drivingState)
        {
            case DrivingState.Neutral:
                DoNeutral();
                break;
            case DrivingState.Drive:
                DoDrive();
                break;
            case DrivingState.Parking:
                DoPark();
                break;
            case DrivingState.Reverse:
                DoReverse();
                break;
            default:
                throw new InvalidOperationException(
                    string.Format(CultureInfo.CurrentCulture, 
                    "Drivestate {0} is an unknown state", this.drivingState));
        }
    }
} 
```

在代码审查中，我遇到了许多在默认转义中只有一个 break 语句的实现。时间长了可能会出问题......

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-03-11T07:41:43.300

您的问题有点含糊，但据我了解，您是在问我们您的编码风格是否良好。我通常通过可读性来判断编码风格。

我读过**一次**代码，我明白了。因此，以我的拙见，您的代码是良好编码风格的一个例子。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T07:51:15.023

还有一种替代方法，即使用类似于 Java 枚举的东西。私有嵌套类型允许“更严格”的枚举，其中编译时唯一可用的“无效”值是`null`. 这是一个例子：

```
using System;

public abstract class DrivingState
{
    public static readonly DrivingState Neutral = new NeutralState();
    public static readonly DrivingState Drive = new DriveState();
    public static readonly DrivingState Parking = new ParkingState();
    public static readonly DrivingState Reverse = new ReverseState();

    // Only nested classes can derive from this
    private DrivingState() {}

    public abstract void Go();

    private class NeutralState : DrivingState
    {
        public override void Go()
        {
            Console.WriteLine("Not going anywhere...");
        }
    }

    private class DriveState : DrivingState
    {
        public override void Go()
        {
            Console.WriteLine("Cruising...");
        }
    }

    private class ParkingState : DrivingState
    {
        public override void Go()
        {
            Console.WriteLine("Can't drive with the handbrake on...");
        }
    }

    private class ReverseState : DrivingState
    {
        public override void Go()
        {
            Console.WriteLine("Watch out behind me!");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T08:01:53.000

我不喜欢这种方法，因为默认情况是不可测试的。这会导致单元测试的覆盖率降低，虽然这不一定是世界末日，但让强迫症的我很恼火。

我宁愿简单地对每个案例进行单元测试，并额外断言只有四种可能的案例。如果有人添加了新的枚举值，单元测试就会中断。

就像是

```
[Test]
public void ShouldOnlyHaveFourStates()
{
    Assert.That(Enum.GetValues( typeof( DrivingState) ).Length == 4, "Update unit tests for your new DrivingState!!!");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T07:42:54.327

这对我来说看起来很合理。还有其他一些选项，例如 a `Dictionary<DrivingState, Action>`，但您所拥有的更简单，应该足以满足大多数简单的情况。总是喜欢简单易读的;-p

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T08:15:37.257

这可能是题外话，但也许不是。必须进行检查的原因是为了以防设计演变并且您必须向枚举添加新状态。

所以也许你一开始就不应该这样工作。怎么样：

```
interface IDrivingState
{
    void Do();
} 
```

将当前状态（实现 IDrivingState 的对象）存储在一个变量中，然后像这样执行它：

```
drivingState.Do(); 
```

大概你有办法让一个状态转换到另一个状态——也许`Do`会返回新的状态。

现在，您可以扩展设计，而不会使所有现有代码失效。

**更新以回应评论：**

使用`enum`/ `switch`，当您添加一个新的枚举值时，您现在需要找到代码中尚未处理该枚举值的每个位置。编译器不知道如何提供帮助。代码的各个部分之间仍然存在“契约”，但它是隐含的，编译器无法检查。

多态方法的*优点*是设计更改最初会导致编译器错误。编译错误是好的！编译器有效地为您提供了代码中需要修改以应对设计更改的位置清单。通过以这种方式设计代码，您可以获得强大的“搜索引擎”的帮助，该引擎能够理解您的代码并通过在编译时发现问题来帮助您改进代码，而不是将问题留到运行时。

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T11:02:41.647

我会使用[`NotSupportedException`](http://msdn.microsoft.com/en-us/library/system.notsupportedexception.aspx "MSDN 上的 System.NotSupportedException").

[`NotImplementedException`](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx "MSDN 上的 System.NotImplementedException")用于未实现的功能，但实现了默认*情况*。你只是选择不支持它。我只建议在开发存根方法期间抛出 NotImplementedException。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T08:09:53.760

如果您想抛出异常，我建议使用 NotImplementedException 或更好的自定义 DrivingStateNotImplementedException。

我，我会使用默认的驾驶状态（如空档/停止）并记录丢失的驾驶状态（因为是你错过了驾驶状态，而不是客户）

就像一辆真正的汽车，cpu 决定它错过了开灯，它会做什么，抛出异常并“破坏”所有控制，或者退回到安全的已知状态并向驾驶员发出警告“oi ，我没有灯”

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T08:11:27.253

如果遇到未处理的枚举值应该怎么做当然取决于具体情况。有时只处理一些值是完全合法的。

如果你有一个 unhandles 值是一个错误，你肯定应该像在示例中那样抛出一个异常（或以其他方式处理错误）。一个人不应该在**没有**产生错误指示的情况下吞下错误条件。

一个`default`只有a的箱子`break`闻起来不太好。我会删除它以指示开关不处理所有值，并可能添加注释解释原因。

* * *

## 回答 #9

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:06:18.990

清晰，明显和正确的方式。如果 DrivingState 需要更改，您可能需要重构。

上面所有复杂的多态恐怖的问题是它们强制封装到一个类中或需要额外的类 - 当只有一个 DrivingState.Drive() 方法时很好，但是一旦你有一个 DrivingState.Serialize() 整个事情就会中断序列化到依赖于 DrivingState 或任何其他现实世界条件的某个地方的方法。

枚举和开关是为彼此制作的。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T07:45:02.153

我是 C 程序员，而不是 C#，但是当我有这样的东西时，我的编译器设置为警告我，如果不是所有枚举情况都在 switch 中处理。在设置之后（并设置警告作为错误），我不会为在编译时可以捕获的东西进行运行时检查。

这可以在 C# 中完成吗？

* * *

## 回答 #11

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:13:30.103

我从不使用开关。在我使用的大多数框架中，与您展示的代码相似的代码一直是一个主要的痛点——不可扩展并且固定在有限数量的预定义案例中。

这是一个很好的例子，说明了简单的多态可以以一种很好、干净和可扩展的方式完成。只需声明一个基础`DrivingStrategy`并从中继承所有版本的驱动逻辑。这不是过度设计——如果你有两个案例，那就是，但四个已经表明需要这样做，特别是如果每​​个版本的 Do... 调用其他方法。至少这是我的个人经历。

我不同意 Jon Skeet 冻结多个状态的解决方案，除非确实有必要。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:28:07.307

我认为使用枚举类型并因此使用 switch 语句来实现状态（也是状态设计模式）**并不是**一个特别好的主意。恕我直言，这很容易出错。随着正在实现的状态机变得复杂，您的程序员同事的代码将逐渐变得不那么可读。

目前它很干净，但是在不知道这个枚举的确切意图的情况下，很难说它会随着时间的推移如何发展。

另外，我想在这里问你——有多少操作将与 Run() 一起适用于 DrivingState？如果有几个，如果你要基本上多次复制这个 switch 语句，至少可以说，它会尖叫有问题的设计。

# mysql - MySQL中的字符串格式化

> ID：633668
> 
>         
> 
> 赞同：8
> 
>         
> 
> 时间：2009-03-11T07:48:56.697
> 
>         
> 
> 标签：mysql, sql, formatting, format

MySQL 中有类似 printf() 的格式吗？

我在文档中找不到直接的方法。  

例如，我怎样才能做出类似的东西：  

```
SELECT STRFORMATFUNCTIONIMLOOKINGFOR("%03d", 17) 
```

得到017？

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T08:17:11.967

对于您的示例，您可以使用

选择[LPAD](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_lpad) (17, 3, '0');

还有

选择[格式](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_format)(17, 3); -- 17.000

否则，UDF 如上所述。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2014-05-07T13:39:44.277

也许它会有用：

```
select lpad(1, 2, '0') str;
+-----+
| str |
+-----+
| 01  | 
+-----+
select lpad(11, 2, '0') str;
+-----+
| str |
+-----+
| 11  | 
+-----+ 
```

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T08:12:29.810

参见 FORMAT() 函数：

```
mysql> SELECT FORMAT(12332.123456, 4);
returns '12,332.1235' 
```

但它仅用于格式化浮点数。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2012-12-05T22:28:59.793

```
-- 
-- Autor: Ivan Sansão.
-- 
-- Função para formatar strings.
-- Exemplo: select mask("0123456789","(##) ####-####");
-- Retorna: (01) 2345-6789

CREATE FUNCTION mask(texto VARCHAR(255), mascara VARCHAR(255)) RETURNS VARCHAR(255) CHARSET latin1
    Begin

        -- Contém o texto processado.
        DECLARE textoProcessado VARCHAR(255);
        SET textoProcessado = "";

        -- Se tem Texto.
        IF length(texto) > 0 THEN

            -- Percorre a máscara enquanto seu tamanho for maior que zero.
            WHILE Length(mascara) > 0 DO

                -- Se o caracter é um curinga.
                IF LEFT(mascara,1) = "#" THEN

                    -- Concatena o primeiro caracter do texto.
                    SET textoProcessado = concat(textoProcessado,LEFT(texto,1));

                    -- Elimina o primeiro caracter da máscara.
                    SET mascara = SUBSTRING(mascara,2,255);

                    -- Elimina o primeiro caracter do texto.
                    SET texto = SUBSTRING(texto,2,255);

                ELSE

                    -- Concatena o primeiro caracter da máscara.
                    SET textoProcessado = concat(textoProcessado,LEFT(mascara,1));

                    -- Elimina o primeiro caracter da máscara.
                    SET mascara = SUBSTRING(mascara,2,255);

                END IF;

            END WHILE;

        END IF;

    RETURN trim(textoProcessado);
END 
```

* * *

## 回答 #5

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:08:02.363

您可以通过创建新的 UDF（用户定义函数）来实现这种功能。例如，请参阅[http://dev.mysql.com/doc/refman/5.1/en/adding-functions.html](http://dev.mysql.com/doc/refman/5.1/en/adding-functions.html)

# javascript - 在 JavaScript 中使用 JSP 代码

> ID：633669
> 
>         
> 
> 赞同：12
> 
>         
> 
> 时间：2009-03-11T07:49:14.700
> 
>         
> 
> 标签：javascript, jsp, jstl, web.xml

我想在 JavaScript 中使用 JSTL 的 fmt 标记来本地化我的警报消息。我的 JavaScript 文件是一个独立文件，当我在 js 中包含 fmt 标记时，文件浏览器会给出 JavaScript 错误。是否可以使用 web.xml 配置将`.js`文件视为文件？`.jsp`谁能建议我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
>             
> 
> 时间：2009-03-11T16:25:04.990

> 是否可以使用 web.xml 配置将 .js 文件视为 .jsp 文件？

是的：

```
<servlet>
    <servlet-name>scriptjsp</servlet-name>
    <jsp-file>/script.jsp</jsp-file> 
</servlet>
<servlet-mapping>
    <servlet-name>scriptjsp</servlet-name>
    <url-pattern>/script.js</url-pattern>
</servlet-mapping> 
```

但是，这样做并没有实际的优势，因为 JavaScript 文件的 URL 不必以“.js”结尾。决定一个文件是否为 JavaScript 文件的是它所提供的 MIME 媒体类型。您可以使用以下方式从 JSP 进行设置：

```
<%@ page contentType="text/javascript" %> 
```

在顶部。然后你可以直接链接到：

```
<script type="text/javascript" src="/script.jsp"></script> 
```

（除此之外：在当前的浏览器中，即使没有正确设置 Content-Type，与 <script> 标签链接的脚本也可以工作，但这可能不是值得依赖的东西。）

> 我想在 javascript 中使用 JSTL 的 fmt 标签

这可能不是一个好主意。fmt 标记处理字符的 HTML 转义，但您想要的是 JavaScript 字符串文字转义，例如反斜杠转义引号字符。JSTL 不提供此功能。你会意外逃脱'&amp;' JavaScript 字符串中出现的字符，以及在消息中使用撇号或双引号会破坏整个脚本。

此外，从 JSP 提供常用包含的脚本可能会导致性能和缓存不佳。

我建议在 JavaScript 中使用独立的语言查找系统。例如，包括每个语言的外部脚本：

```
<script type="text/javascript" src="/script/lang/en.js"></script> 
```

（更改“en”以匹配您想要的任何语言），并在该文件中定义如下查找：

```
var msg= {
    messageName: 'Message in English',
    ...
}; 
```

然后在脚本中查找`msg.messageName`每个可本地化的字符串。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T09:03:58.187

如果您的 javascript 与您的 JSP 页面的其余部分“内联”，那么只需使用 Kees de Kooter 建议的技术。

如果您的 javascript 需要位于外部文件中（例如，用于跨页面共享），那么只需将其放入自己的 JSP 文件中。

```
<%@page contentType="text/javascript" %>
<fmt:message key="some.message" var="someMessage"/>"
<fmt:message key="another.message" var="anotherMessage"/>"
var someMessage = "${someMessage}"
var anotherMessage = "${anotherMessage}"/>" 
```

并像这样包含它...

```
 <script src="yourScript.jsp" language="JavaScript" type="text/javascript"></script> 
```

然后，您可以从包含 JSP 的文件中或从包含在“yourScript.jsp”之后的任何 javascript 文件中引用“someMessage”和“anotherMessage”。

注意 contentType 属性的使用——'text/javascript' 可以防止 JSP 解析器抱怨输出不是格式良好的 XML——并且标签引用了 JSP 文件。

将这种技术与@Magner 建议的技术相结合，应该会为您带来一个明智的解决方案。

编辑：将示例更改为使用 'text/plain' 的 'text/javascript' insetad - 感谢@bobince 让我意识到这个错误（即使 'text/plain' 有效，使用 'text/javascript' 更正确）。此外，如果需要国际化的字符串数量很少，并且/或者您可以证明将“资源”放在多个地方是合理的——一个用于服务器端的东西，另一个用于客户端的东西——@bobince 的技术使用动态包含是一个不错的选择。

* * *

## 回答 #3

> 赞同：5
> 
>             
> 
> 时间：2009-05-05T00:43:48.787

我建议您编写一个 servlet，它生成一个数组或 javascript 对象，其中包含您想要的所有本地化信息。您可以使用客户端和服务器端都可以共享的 Java 资源包，然后您不必混合 JSP 代码和 Javascript 代码，并且 servlet 响应将被浏览器缓存。

创建一个 servlet，将其映射到一个路径，让它从请求参数中读取语言环境，然后生成 Javascript 代码。

使用一行`<script src="/mydict?lang=en"></script>`
然后加载你的脚本`<script src="/myscript.js"></script>`

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T08:21:28.740

您应该努力将您的 javascript 代码保存在与 jsp 代码不同的文件中。这是为了获得浏览器缓存、更容易维护、跨页面重用以及允许压缩。

我建议您在 jsp 中为文本创建一个全局对象，供您的 javascript 文件使用。像这样：

```
<script>
    var text = text || {}; // play well with other jsps on the page
    text.this_page_name = {
        required_field_error: "<fmt:message key="required.field.error"/>",
        system_error: "<fmt:message key="system.error"/>"
    };
</script> 
```

稍后您在 javascript 中使用它：

```
alert(text.this_page_name.required_field_error); 
```

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T08:11:50.620

您可以执行以下操作。您将翻译后的消息存储在一个变量中，以后可以在 JSP 中解析该变量。

```
<fmt:message key="your.alert" var="theAlert"/>

<script type="text/javascript">
alert("${theAlert}");
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T08:12:33.880

您不能在 JavaScript 中使用标签，但有一种解决方法：将标签放入隐藏的`DIV`(`<div style="display: none;" id="msg"><fmt:...>`

`DIV`现在您可以使用 JS通过其 ID查找并获取`innerHTML`.

也就是说，fmt 只是 Java 的 i18n 函数的包装器，您可以直接在`<% %>`.

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2014-03-14T05:05:56.003

如果您只需要警报消息，只需在您的 javascript 中使用此标记

假设您的 Javascript 中有以下内容：

```
alert("Confirm Deletion"); 
```

这可以通过`bean:message`在您的 javascript 中添加标签来实现国际化

```
alert('<bean:message key="msg.confirm"/>'); 
```

`key`并在属性文件中添加值

```
msg.delete=Confirm Deletion 
```

# wpf - 我可以在 WPF/XAML 中获得强类型绑定吗？

> ID：633670
> 
>         
> 
> 赞同：16
> 
>         
> 
> 时间：2009-03-11T07:49:24.810
> 
>         
> 
> 标签：wpf, mvvm

使用[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)模式，您可以将 DataContext 设置为特定的 ViewModel。现在有没有办法告诉 XAML DataContext 的类型，以便它验证我的绑定？

寻找类似 ASP.NET MVC 中的类型化视图数据。

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T07:59:12.897

您可以以强类型的方式编写每个单独的绑定：

```
<TextBox Text="{Binding Path=(vm:Site.Contact).(vm:Contact.Name)}" /> 
```

然而，这并不能验证 TextBox DataContext 是 ViewModel.Site 类型的事实（我认为这是不可能的，但我可能错了）。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-03-14T04:25:03.250

不，当前规范在 Xaml 中没有强类型。我相信使用 .Net 4.0，Xaml 应该会看到泛型的能力。有了这个，我认为在 Xaml 中使用强类型应该会容易得多。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2009-03-20T04:34:21.567

否`FrameworkElement.DatatContext`。启用数据绑定的依赖属性是 type `object`。

正如其他人所指出的，您可以`DataContext`为称为 a 的特殊模板指定 a 的预期类型`DataTemplate`。许多控件（例如`ItemsControl`）`ControlControl`提供对 DataTemplates 的访问，以允许您设置可视化表示对 DataContext 类型的期望。

Bryan 是正确的，他没有测试他的代码。

类型化 DataTemplate 的正确应用如下所示：

```
<Window>
    <Window.Resources>
        <DataTemplate x:Key="TypedTemplate" DataType="{x:Type myViewModel}">
        ...
        </DataTemplate>
    </Window.Resources>
    <ContentControl Content="{Binding}" ContentTemplate="{StaticResource TypedTemplate}" />
</Window> 
```

ContentPresenter 直接继承自 FrameworkElement，并且没有 Template 属性。此外，Template 属性通常是指 Control.Template 类型的 Control.Template，它与 DataTemplate 完全不同。

我认为 Bryan 正在考虑`ContentControl`两种根控制类型之一（另一种是`ItemsControl`）。`ContentControl`实际上确实继承自 Control。因此，如果我们愿意，我们可以在其上指定 Template 属性。

```
<Window>
   <Window.Resources>
      <DataTemplate x:Key="TypedTemplate" DataType="{x:Type myViewModel}">
      ...
      </DataTemplate>
      <ControlTemplate x:Key="ControlSkin" TargetType="{x:Type ContentControl}">
      ...
      </ControlTemplate>
   </Window.Resources>
   <ContentControl Content="{Binding}" ContentTemplate="{StaticResource TypedTemplate}" Template="{StaticResource ControlSkin}" />
</Window> 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2010-10-15T09:35:19.393

我个人为我的视图模型中的每个属性声明了一个静态 PropertyPath 引用 this 使用 x:static 作为绑定路径 - 例如

```
public class MyViewModel
{
  public static PropertyPath MyPropertyPath = new PropertyPath("MyProperty");
  public bool MyProperty{get; set;}
} 
```

xml：`{Binding Path={x:Static local:MyViewModel.MyPropertyPath}}`

这样我的所有绑定都会在构建时得到验证。                 

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T13:41:44.620

试试这个：

```
<Window>
    <Window.Resources>
        <DataTemplate x:Key="TypedTemplate" DataType="{x:Type myViewModel}">
            ...
        </DataTemplate>
    </Window.Resources>

    <ContentPresenter Content="{Binding}" Template="{StaticResource TypedTemplate}" />
</Window> 
```

我还没有测试过这段代码，但它应该会给你这个想法。内容展示器将显示将使用 DataTemplate 的当前 DataContext。这在编译器中不是强类型的，但会在加载时立即引发运行时错误（在窗口的 InitializeComponent 中）。如果出现问题，您应该能够在测试中轻松捕捉到这一点。

# wpf - 作为 TextDecoration 的波浪下划线：我做错了什么？

> ID：633678
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T07:53:49.760
> 
>         
> 
> 标签：wpf, geometry, underline, text-decorations

我想使用 TextDecoration（在类似于 RichTextBox 的控件中）创建[波浪下划线。](https://stackoverflow.com/questions/632450/wavy-underlines-in-a-flowdocument)

我做了以下事情：

```
private static Pen CreateErrorPen() {
    var geometry = new StreamGeometry();
    using (var context = geometry.Open()) {
        context.BeginFigure(new Point(0.0, 0.0), false, false);
        context.PolyLineTo(new[] {
            new Point(0.75, 0.75),
            new Point(1.5, 0.0),
            new Point(2.25, 0.75),
            new Point(3.0, 0.0)
        }, true, true);
    }

    var brushPattern = new GeometryDrawing {
        Pen = new Pen(Brushes.Red, 0.2),
        Geometry = geometry
    };

    var brush = new DrawingBrush(brushPattern) {
        TileMode = TileMode.Tile,
        Viewport = new Rect(0.0, 1.5, 9.0, 3.0),
        ViewportUnits = BrushMappingMode.Absolute
    };

    var pen = new Pen(brush, 3.0);
    pen.Freeze();

    return pen;
} 
```

这几乎可行，但根据文本中带下划线的单词位置，下划线通常显示为几个叠加波浪的模式。即使下划线是正确的，下划线也有点模糊（我想在像素之间绘制的 wpf 问题）。

我的解决方案是一种反复试验，所以我可能走错了路，尤其是使用 Viewport/ViewportUnits。

我做错了什么，有没有办法获得清晰的下划线？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T15:31:49.067

**bstoney在**[这里](https://stackoverflow.com/questions/632450/wavy-underlines-in-a-flowdocument/633680#633680)解决了这个问题。关键似乎是设置波浪垂直分离的方式，所以你只能在下划线中得到 1 `Viewbox`。`Viewport`

波浪中有一些中断可以通过将其向右扩展并更改`Viewbox`from 来消除，使其从 X=1 而不是 0 开始：

```
<VisualBrush x:Key="WavyBrush" TileMode="Tile" Viewbox="1,0,3,3" ViewboxUnits="Absolute" Viewport="0,-1,6,4" ViewportUnits="Absolute">
    <VisualBrush.Visual>
        <Path Data="M 0,1 C 1,0 2,2 3,1 4,0 5,2 6,1" Stroke="Red" StrokeThickness="0.2"/>
    </VisualBrush.Visual>
</VisualBrush> 
```

# java - EJB3 bean 可以“自我注入”并通过 EJB 容器调用自己的方法吗？

> ID：633687
> 
>         
> 
> 赞同：14
> 
>         
> 
> 时间：2009-03-11T08:00:54.050
> 
>         
> 
> 标签：java, ejb-3.0

是否可以“自注入”EJB 以将本地方法调用为 bean 方法？在某些情况下这可能是有利的，例如，如果使用容器管理的事务并且应该在新事务中完成某些事情。

这是如何工作的一个例子：

Foo.java：

```
@Local
public interface FoO {
    public void doSomething();
    public void processWithNewTransaction(); // this should actually be private
} 
```

FooBean.java：

```
@Stateless
public class FooBean implements Foo {

    @EJB
    private Foo foo;

    public void doSomething() {
        ...
        foo.processWithNewTransaction();
        ...
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void processWithNewTransaction() {
        ...
    }
} 
```

如果我提取`processWithNewTransaction()`到另一个 bean，它需要在接口中作为公共方法公开，即使它应该只由`FooBean`. （我上面的代码也有同样的问题，这就是接口定义中有注释的原因。）

一种解决方案是切换到 bean 管理的事务。然而，这将需要更改整个 bean 来管理它自己的事务，并且会为所有方法添加大量样板。

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2013-01-05T12:59:16.990

可以做一个`self injection`. 你需要使用`SessionContext`.

```
SessionContext sc = ...
sc.getBusinessObject(FooBean.class).processWithNewTransaction() 
```

* * *

## 回答 #2

> 赞同：11
> 
>             
> 
> 时间：2012-09-04T01:24:05.123

EJB 的自我注入确实是可能的。在这种情况下不会发生无限递归的原因很简单：容器没有从池中注入实际的 bean 实例。相反，它注入了一个代理对象。当您在注入的代理 (foo) 上调用方法时，如果没有可用的实例，容器会从其池中获取一个 bean 实例或创建一个实例。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:39:25.757

**更新**：正如其他答案所指出的，这在技术上确实是可行的。请参阅[Csaba](https://stackoverflow.com/a/12255700/57601)和[Michael](https://stackoverflow.com/a/14172017/57601)的答案，了解它如何以及为什么会在看似无休止的递归的情况下起作用。

* * *

我无法给出 100% 准确的答案，但我很确定这是不可能的。

我认为是这样，因为要将 Foo bean 注入 Foo bean 本身，容器最初必须创建一个 Foo 实例，然后他可以将其注入。但是要创建它，他必须将一个已经存在的 Foo 实例注入到要创建的 Foo 中......这会导致无限递归。

如果您需要单独的事务，我建议让事情变得简单并创建两个独立的 bean/接口。

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2011-07-29T11:28:34.773

我倾向于不同意，通常通过容器调用本地 bean 方法对事务管理很有用。

就像示例一样，如果您必须在循环中调用本地 bean 方法，那么每次迭代都有一个事务比所有迭代都要好。（前提是业务逻辑不是像发货或发行股票那样“全有或全无”）

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-13T00:21:24.030

有趣的问题。我从不在同一个 bean 中创建具有不同事务属性的方法，也就是说，这需要重构。这通常使得在应用程序发展时很难发现应用程序中的错误。

编辑：修正错别字

# api - 带有 api 的推特机器人

> ID：633688
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T08:01:07.200
> 
>         
> 
> 标签：api, twitter, bots

我正在编写一个即时回复用户消息的机器人。从我读过他们的api只允许每分钟左右检查一次更新。

是否有推送功能或第三方服务可以立即将新消息推送到我的服务器？

我见过可以做到这一点的机器人。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:06:37.577

Twitter 允许将应用程序列入白名单。然后，您每小时只能处理 20 或 20 万个请求。您可能想与他们联系。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2012-04-15T14:15:26.133

你可以看看[tweebot](https://github.com/caxap/tweebot) python 微框架。

> 一个 Python 库，用于在 tweepy 库上构建 twitter 机器人。这是创建自己的机器人的一种非常简单和灵活的方式。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2022-02-28T05:33:18.653

首先[申请](https://developer.twitter.com/en/apply-for-access)开发者推特账号。

并使用官方的库列表设置您的应用[程序](https://developer.twitter.com/en/docs/twitter-api/tools-and-libraries/v2)。（python、js 和许多其他可用）

如果您使用 JS，您可能不想使用[Twit](https://www.npmjs.com/package/twit)，因为它仅适用于 v1.1。您可能更喜欢[Twitter-api-v2](https://www.npmjs.com/package/twitter-api-v2)，但目前要小心，媒体上传在 v2上[不可用。](https://trello.com/b/myf7rKwV/twitter-developer-platform-roadmap)

我建议您从您的开发人员个人空间请求提升访问权限，这是即时的，并允许您使用 v1 功能。

这是使用 twitter-api-v2 发布图像的示例（使用带有 v1 的提升帐户）

```
import { TwitterApi } from 'twitter-api-v2';
import { twitterconf } from './conf.js';

const client = new TwitterApi({
    appKey: twitterconf.CONSUMER_KEY,
    appSecret: twitterconf.CONSUMER_SECRET,
    accessToken: twitterconf.ACCESS_TOKEN_KEY,
    accessSecret: twitterconf.ACCESS_TOKEN_SECRET
});

    const image = await client.v1.uploadMedia('/path/to/image.png');
    const newTweet = await twitterClient.v1.tweet('Hello World!', 
    { media_ids: image }); 
```

# objective-c - NSMutableArray 计数始终返回零

> ID：633699
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-03-11T08:09:23.543
> 
>         
> 
> 标签：objective-c, cocoa

我确定我在做一些愚蠢的事情，但这让我发疯。

我正在尝试遍历数据库结果，从这些结果创建对象，并将对象添加到 NSMutableArray。我已经通过 NSLog 调用验证了数据正在从数据库中正确读取并复制到对象，但 NSMutableArray 的计数**始终**返回 0。

这是代码的本质：

```
while ([rs next]) {

    Kana *htemp = [Kana alloc];

    htemp.content = [rs stringForColumn:@"hiragana"];
    [hiragana addObject:htemp];

}
NSLog(@"Hiragana contains %d objects", [hiragana count]); 
```

假名派生自 NSObject，平假名是 NSMutableArray 的一个实例。

我敢肯定这是一个菜鸟的错误，我希望有人能纠正我。蒂亚！:)

* * *

## 回答 #1

> 赞同：39
> 
>             
> 
> 时间：2009-03-11T08:33:14.970

从您发布的代码来看，我的猜测是您可能没有正确分配数组。创建对象时，您还需要初始化它们。因此，这：

```
Kana *htemp = [Kana alloc]; 
```

应该：

```
Kata *temp = [[Kana alloc] init]; 
```

*所有对象都需要以这种方式初始化。*因此，如果我是正确的并且您还没有初始化您的数组，那么您的创建需要从此开始：

```
NSMutableArray *hiragana = [NSMutableArray alloc]; 
```

对此：

```
NSMutableArray *hiragana = [[NSMutableArray alloc] init]; 
```

出于优化原因，如果您知道您可能持有多少个对象，您可能还应该指定初始容量：

```
[[NSMutableArray alloc] initWithCapacity:someNumber]; 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:00:09.613

另一个常见的原因（不是你的情况，事实证明，但一般来说）是忘记分配数组。如果您尚未创建数组，则将该`count`消息发送到`nil`，因此结果将始终为 0。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:20:21.367

一些东西：

1.  如果你在 while 循环中调用 NSLog 会发生什么？在将其归咎于阵列之前，请验证循环迭代是否实际发生。

2.  你在哪里创建数组平假名？如果由于某种原因你做错了并且数组为零，它可能会导致这样的问题。

3.  如果您没有开启垃圾回收，请务必在将其添加到循环后执行 [htemp release]。addObject 保留，每个添加的项目将从循环中泄漏。同样，这仅在垃圾收集关闭时才相关。

很可能您没有正确创建数组，或者 rs 不包含您期望它包含的内容，因此 [rs next] 永远不会被调用（例如，如果 rs 为 nil，则不会对此进行迭代循环会执行，你不会有任何错误）。

# eclipse - 在 Eclipse 中运行 JUnit 时自动添加属性

> ID：633700
> 
>         
> 
> 赞同：17
> 
>         
> 
> 时间：2009-03-11T08:09:29.410
> 
>         
> 
> 标签：eclipse, configuration, junit

为了在我的 Eclipse 上运行我的单元测试，我需要为 VM 设置一些属性。

因此，当我第一次运行我的 JUnit 测试时，我进入“打开运行对话框”，然后在我的 JUnit 配置中为这个测试，我进入“参数”选项卡并将我需要的所有内容放在“VM 参数”文本区域中。

有没有办法在我运行 JUnit 时自动添加一组属性，所以我只能右键单击测试类，然后单击“Run as > Junit Test”来运行测试？

技术信息：Eclipse 3.3.2、JUnit 4、Java 5

* * *

**编辑**，关于 Aaron Digulla 的回应：

这些属性用于 Spring 配置文件*。因此，我不能使用 Aaron 给出的想法，因为 Spring 将在测试运行之前被初始化。

除此之外，我只需要知道我是否可以在 Eclipse 中以简单的方式实现这一点。因此，该解决方案不得对 Eclipse 之外的应用程序编译产生任何影响，因为我的应用程序最终将由 Maven2 编译（和测试）。

* 少数“单元”测试确实需要运行我的 Spring 配置。好的，我知道这不是真正的单元测试；o)

**编辑 2**：事实上，我确实是通过一个测试单元启动 Spring 配置。因此，在启动 Spring 之前，我检查了 System 属性，如果我的属性没有设置，那么我给它们提供所需的值......

但是，我有点失望 Eclipse 不能自动为我做到这一点......

* * *

## 回答 #1

> 赞同：27
> 
>             
> 
> 时间：2009-03-11T10:26:28.223

你可以试试这个 - 去

```
 Window->Preferences->Java->Installed JREs 
```

ans 选择正在使用的 JVM，而不是像这样放置“默认 VM”参数

```
 -DrunningInEclipse 
```

比您可以从您的 TestCase 中检查：

```
 System.getProperty("runningInEclipse") != null 
```

* * *

## 回答 #2

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T08:48:23.513

我的解决方案是为扩展 TestCase 的项目中的所有测试创建一个抽象测试基类。它必须是抽象的，因此自动单元测试查找器不会考虑它。

在这个类的静态代码块中，我设置了我需要的所有属性。这确保了代码运行一次且仅运行一次，并且它在我的项目中的任何测试之前运行。

[编辑] 你说 Spring 在测试运行之前被初始化。这是您项目中的一个错误：它必须是初始化 Spring 的测试。否则，您将始终遇到必须测试您无法控制的东西的问题。

因此，我建议将 Spring init 代码移到环境准备好时可以调用的地方。

或者，检查环境是否在 setUp() 中正确设置，如果缺少属性则抛出错误。这样，您至少会知道为什么稍后测试会失败。但我仍然更喜欢在哪个子系统开始运行时拥有完全的控制权。其他任何事情都只是在乞求灾难。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T09:47:31.657

当我想为我的 junit 测试设置一些属性条目时，我实现了以下

```
protected void setUp() throws Exception {
        super.setUp();

        System.setProperty("Property1", "value1");
        System.setProperty("Property2", "value2");
} 
```

在调用测试方法之前设置属性

编辑：您还可以从文件中读取属性，然后将其读取到系统属性中

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:21:12.587

我从来不明白为什么启动配置可以定义环境变量，但添加系统属性的唯一方法似乎是添加 vm 参数。

我解决这个问题的方法是让测试（或抽象测试基类）测试所需属性的存在，如果它们不存在，那么我从类路径上的 .properties 文件加载它们。

这很有效，因为我仍然可以覆盖它们或从 ANT 或 Maven 指定它们，但也可以“右键单击”-> 运行方式-> Junit 测试单个测试文件。

编辑：这是一个让 Spring 以与上述相同的方式可选地加载属性文件的示例：

```
<bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="database.properties"/>
        <property name="ignoreResourceNotFound" value="true" />
        <property name="systemPropertiesMode">
            <util:constant static-field="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.SYSTEM_PROPERTIES_MODE_OVERRIDE" />
        </property>
</bean> 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2014-01-19T04:58:14.883

在我的一个junit测试中以这种方式同意使用方法并且它有效

```

     @课前
        公共静态无效 setupProperties() {
            System.setProperty("catalina.base", "C:\\sam-tomcat-7.0.42");
        }

```

# flash - 如何禁用 Adob e Flex WebApp 的鼠标右键单击

> ID：633705
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T08:12:23.817
> 
>         
> 
> 标签：flash, flex3

比如说，我有一个 Adob​​e Flex 3.0 WebUI 应用程序。我想将用户仅限于我自己编程的那些操作。因此，我想禁用鼠标右键。

有可能吗？如果是这样，如何做到这一点？

提前致谢。

# .net - .Net 中 AOP 的最佳实现是什么？

> ID：633710
> 
>         
> 
> 赞同：85
> 
>         
> 
> 时间：2009-03-11T08:14:21.037
> 
>         
> 
> 标签：.net, aop

在 C#、VB.net 中有很多 AOP 实现。这是一些 AOP 实现：  

*   [PostSharp](http://www.sharpcrafters.com/postsharp/features)

*   [城堡动态代理](https://www.castleproject.org/projects/dynamicproxy/)

*   [林福](https://github.com/philiplaureano/LinFu)

*   [织机网](http://loom.codeplex.com/)

*   [方面.NET](http://aspectdotnet.codeplex.com/)

*   [Enterprise Library 3.0 策略注入应用程序块](https://docs.microsoft.com/en-us/previous-versions/msp-n-p/ff664572(v=pandp.50))

*   [AspectDNG](http://aspectdng.tigris.org/)

*   [DotSpect](http://dotspect.tigris.org/) (.SPECT)

*   [Spring.NET](http://www.springframework.net/) Framework 作为其功能的一部分

*   巫术和[Phx.Morph](http://www.cs.columbia.edu/~eaddy/wicca/)

*   特温特大学提供了[针对 .NET 的 AOSD 解决方案的详尽分析](http://referaat.cs.utwente.nl/conference/5/paper/6755/aspect-oriented-design-methods.pdf)

*   [Seasar.NET](http://s2container.net.seasar.org/en/index.html)

*   [方面＃](http://sourceforge.net/projects/aspectsharp/)

*   [拼图.NAspect](http://rogeralsing.com/2008/01/08/naspect-the-first-debuggable-aop-framework-for-net/)

*   撰写*

*   设定点

*   [NConcern .NET AOP 框架](http://aspectize.codeplex.com)

*   ...

.Net 中 AOP 的最佳实现是什么？我应该使用什么？

* * *

## 回答 #1

> 赞同：45
> 
>             
> 
> 时间：2009-03-11T09:12:30.773

如果动态拦截可以满足您的需求，我认为[Castle Dynamic Proxy是首选的解决方案。](http://www.castleproject.org/projects/dynamicproxy/)许多其他希望提供 AOP 功能的框架在内部使用该框架。通常，大多数现有的 IoC 容器现在都提供了一些动态拦截机制（Spring.NET、Castle Windsor、StructureMap 等）。如果您已经在使用 IoC 容器，那么查看它的提议可能会更容易。

如果动态拦截不能满足你的需求（编织密封类、拦截非虚调用等），那你肯定要静态编织。[PostSharp](http://www.postsharp.net)是这个领域的参考。

请注意，它也存在[Linfu](https://github.com/philiplaureano/LinFu)，可用于利用两种 AOP 方式。

* * *

## 回答 #2

> 赞同：15
> 
>             
> 
> 时间：2009-03-11T08:20:08.497

“最好”是主观的。

首先，列出您需要的功能、架构等。然后寻找满足您需要的选项，而不会引入不必要的复杂性。例如，有几个是面向接口的：你的*代码*当前是面向接口的吗？如果没有，PostSharp 可能是更好的选择（被编织到原始类中）。但是，当然，PostSharp 不能在运行时配置......课程的马。

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2012-12-27T23:54:13.330

在 .NET 中进行面向方面编程的最佳方法是使用众所周知的设计技术。例如，通过应用[SOLID 原则](https://en.wikipedia.org/wiki/SOLID)，您可以获得允许添加横切关注点所需的灵活性和模块化。如果你有正确的设计，你甚至可以在没有任何框架的情况下应用大多数横切关注点。认为 OOP 不适合做 AOP 是一种谬误。

这里有一些提示：

*   不依赖具体实例，而依赖抽象。

*   不要在同一个类中混合横切关注点和业务逻辑。

*   [通过在实现这些关注点（装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)）的类中包装具有业务逻辑的类来添加横切关注点。

*   在您的设计中找到常见的工件并对其进行同等建模，最好使用相同类型的抽象。例如看一下[这个](https://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[这个](https://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

当您拥有正确的抽象时，向系统添加新的横切关注点只需编写一个新的装饰器类并将其包装在正确的实现中即可。如果抽象是通用的，您可以将单个装饰器包装在一大组类中（这正是 AOP 的意义所在）。

尽管动态代理和代码编织等技术可以更轻松地处理设计不佳的应用程序，但对于好的设计确实没有其他选择。迟早你会被烧死。这并不意味着不应该使用动态代理生成和代码编织。但是，如果没有适当的应用程序设计，即使这些技术也只会有一点帮助。

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T08:23:33.400

我不知道最好，有很多框架，一天中没有足够的时间来尝试它们。

我确实使用过 PostSharp，并且对它上手的容易程度感到惊喜。

我还研究了 Castle Windsor 和 Spring.Net 的 AOP，方法不同（运行时与编译时）。混合 AOP 和 IoC 似乎很有意义。当您没有使用这些框架之一时，开始需要做更多的工作，但不要让它阻止您。

对于现在的新项目，我可能会使用 Castle Windsor，但这主要是因为我还想使用 IoC。如果我必须在现有代码库中快速实现 AOP，我会使用 PostSharp。

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2011-04-09T20:08:07.733

还有来自 Microsoft的 Policy Injection 和[Unity Interception 。](http://msdn.microsoft.com/en-us/library/ff660891%28PandP.20%29.aspx)

# javascript - 如何使用复选框更改网页上实时选择的总积分？

> ID：633711
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T08:14:31.240
> 
>         
> 
> 标签：javascript, checkbox, live

嘿，我的网页上有一个复选框，学生必须在其中选择他们想要选择的模块。当学生点击复选框时，我是否可以更新网页上实时选择的总模块学分？或者当学生点击提交时，我可以显示请选择 60 学分之类的消息吗？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T08:16:20.347

创建一个读取复选框并显示总数的 javascript 函数。然后设置每个复选框的 onclick 事件以调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:18:30.460

查看[jQuery 计算](http://www.pengoworks.com/workshop/jquery/calculation/calculation.plugin.htm)插件。它完全符合您的需要。

# iphone - 如何在 UIImage 上使一种颜色透明？

> ID：633722
> 
>         
> 
> 赞同：33
> 
>         
> 
> 时间：2009-03-11T08:21:05.403
> 
>         
> 
> 标签：iphone, cocoa-touch, image, core-graphics

在我的 iPhone 应用程序上，我有一个 UIImage 实例。我想得到一个派生的 UIImage，它是第一个 UIImage 的结果，其中一种颜色（例如洋红色）是透明的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
>             
> 
> 时间：2012-05-11T02:49:44.057

好的。尝试过不知道这些解决方案有多少个版本，我有自己的定制版本。我发现[@yubenyi 的解决方案](https://stackoverflow.com/a/3420689/814730)效果很好，但是如果你想从他的 changeWhiteColorTransparent() 函数中获取输出并将其传回，它就行不通了。

我的第一步是更改他的函数以接受特定的颜色和容差，以便调用者可以指定一系列颜色以使其透明。这工作正常，几乎没有变化，但我发现输出不是通过具有第二个颜色范围的相同代码的有效图像。

经过大量的试验和错误，我通过自己进行颜色替换来完成这项工作。我拒绝了这一点，因为当有 API 来做这些事情时，这似乎太辛苦了，但它们并不总是按照你想要的方式运行。具体来说，CGImageCreateWithMaskingColors() 的输出不能用作对同一函数的另一个调用的输入。我无法弄清楚原因，但我认为这与 alpha 通道有关。

无论如何，我的解决方案是：

```
- (UIImage*) replaceColor:(UIColor*)color inImage:(UIImage*)image withTolerance:(float)tolerance {
    CGImageRef imageRef = [image CGImage];

    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    NSUInteger bitmapByteCount = bytesPerRow * height;

    unsigned char *rawData = (unsigned char*) calloc(bitmapByteCount, sizeof(unsigned char));

    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

    CGColorRef cgColor = [color CGColor];
    const CGFloat *components = CGColorGetComponents(cgColor);
    float r = components[0];
    float g = components[1];
    float b = components[2];
    //float a = components[3]; // not needed

    r = r * 255.0;
    g = g * 255.0;
    b = b * 255.0;

    const float redRange[2] = {
        MAX(r - (tolerance / 2.0), 0.0),
        MIN(r + (tolerance / 2.0), 255.0)
    };

    const float greenRange[2] = {
        MAX(g - (tolerance / 2.0), 0.0),
        MIN(g + (tolerance / 2.0), 255.0)
    };

    const float blueRange[2] = {
        MAX(b - (tolerance / 2.0), 0.0),
        MIN(b + (tolerance / 2.0), 255.0)
    };

    int byteIndex = 0;

    while (byteIndex < bitmapByteCount) {
        unsigned char red   = rawData[byteIndex];
        unsigned char green = rawData[byteIndex + 1];
        unsigned char blue  = rawData[byteIndex + 2];

        if (((red >= redRange[0]) && (red <= redRange[1])) &&
            ((green >= greenRange[0]) && (green <= greenRange[1])) &&
            ((blue >= blueRange[0]) && (blue <= blueRange[1]))) {
            // make the pixel transparent
            //
            rawData[byteIndex] = 0;
            rawData[byteIndex + 1] = 0;
            rawData[byteIndex + 2] = 0;
            rawData[byteIndex + 3] = 0;
        }

        byteIndex += 4;
    }

    CGImageRef imgref = CGBitmapContextCreateImage(context);
    UIImage *result = [UIImage imageWithCGImage:imgref];

    CGImageRelease(imgref);
    CGContextRelease(context);
    free(rawData);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
>             
> 
> 时间：2012-09-01T13:57:38.887

这是对 yubenyi 代码的调整，可用于多次传递。它通过将图像转换为未压缩的 jpeg 在处理之前剥离 alpha 通道。还添加了一些关于颜色范围选择如何工作的评论。

```
-(UIImage *)changeWhiteColorTransparent: (UIImage *)image
{
    //convert to uncompressed jpg to remove any alpha channels
    //this is a necessary first step when processing images that already have transparency
    image = [UIImage imageWithData:UIImageJPEGRepresentation(image, 1.0)];
    CGImageRef rawImageRef=image.CGImage;
    //RGB color range to mask (make transparent)  R-Low, R-High, G-Low, G-High, B-Low, B-High
    const double colorMasking[6] = {222, 255, 222, 255, 222, 255};

    UIGraphicsBeginImageContext(image.size);
    CGImageRef maskedImageRef=CGImageCreateWithMaskingColors(rawImageRef, colorMasking);

    //iPhone translation
    CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, image.size.height);
    CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), maskedImageRef);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    CGImageRelease(maskedImageRef);
    UIGraphicsEndImageContext();    
    return result;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
>             
> 
> 时间：2010-07-04T16:14:19.383

使用您的功能后，我发现了为 UIImage 制作透明背景的更简单方法:)

例如，您有黑色背景的 PNG 图像，并且您想让此背景在屏幕上透明。

你可以试试这个：

```
UIImage * image = [UIImage imageNamed:@"image.png"];

const CGFloat colorMasking[6] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
image = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(image.CGImage, colorMasking)]; 
```

在`Swift 5`：

```
let colorMasking: [CGFloat] = [0, 0, 0, 0, 0, 0]
guard let cgImage = cgImage?.copy(maskingColorComponents: colorMasking) else { return }
image = UIImage(cgImage: cgImage) 
```

你有透明背景的图像。

就这样 ：）

* * *

## 回答 #4

> 赞同：12
> 
>             
> 
> 时间：2009-09-14T13:03:24.937

```
-(void)changeColor
{
    UIImage *temp23=[UIImage imageNamed:@"leaf.png"];
    CGImageRef ref1=[self createMask:temp23];
    const float colorMasking[6] = {1.0, 2.0, 1.0, 1.0, 1.0, 1.0};
    CGImageRef New=CGImageCreateWithMaskingColors(ref1, colorMasking);
    UIImage *resultedimage=[UIImage imageWithCGImage:New];
}

-(CGImageRef)createMask:(UIImage*)temp
{
    CGImageRef ref=temp.CGImage;
    int mWidth=CGImageGetWidth(ref);
    int mHeight=CGImageGetHeight(ref);
    int count=mWidth*mHeight*4;
    void *bufferdata=malloc(count);

    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    CGContextRef cgctx = CGBitmapContextCreate (bufferdata,mWidth,mHeight, 8,mWidth*4, colorSpaceRef, kCGImageAlphaPremultipliedFirst); 

    CGRect rect = {0,0,mWidth,mHeight};
    CGContextDrawImage(cgctx, rect, ref); 
    bufferdata = CGBitmapContextGetData (cgctx);

    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, bufferdata, mWidth*mHeight*4, NULL);
    CGImageRef savedimageref = CGImageCreate(mWidth,mHeight, 8, 32, mWidth*4, colorSpaceRef, bitmapInfo,provider , NULL, NO, renderingIntent);
    CFRelease(colorSpaceRef);
    return savedimageref;
} 
```

上面的代码经过测试，我通过使用掩码将绿色更改为红色

* * *

## 回答 #5

> 赞同：11
> 
>             
> 
> 时间：2010-08-06T02:45:19.667

这个功能可以工作！

```
-(UIImage *)changeWhiteColorTransparent: (UIImage *)image
{
    CGImageRef rawImageRef=image.CGImage;

    const float colorMasking[6] = {222, 255, 222, 255, 222, 255};

    UIGraphicsBeginImageContext(image.size);
    CGImageRef maskedImageRef=CGImageCreateWithMaskingColors(rawImageRef, colorMasking);
    {
        //if in iphone
        CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, image.size.height);
        CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 
    }

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), maskedImageRef);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    CGImageRelease(maskedImageRef);
    UIGraphicsEndImageContext();    
    return result;
} 
```

* * *

## 回答 #6

> 赞同：11
> 
>             
> 
> 时间：2017-12-05T23:36:23.987

Swift 4：（用于白色遮罩）   

```
extension UIImage { 
func imageByMakingWhiteBackgroundTransparent() -> UIImage? {

    let image = UIImage(data: UIImageJPEGRepresentation(self, 1.0)!)!
    let rawImageRef: CGImage = image.cgImage!

    let colorMasking: [CGFloat] = [222, 255, 222, 255, 222, 255]
    UIGraphicsBeginImageContext(image.size);

    let maskedImageRef = rawImageRef.copy(maskingColorComponents: colorMasking)
    UIGraphicsGetCurrentContext()?.translateBy(x: 0.0,y: image.size.height)
    UIGraphicsGetCurrentContext()?.scaleBy(x: 1.0, y: -1.0)
    UIGraphicsGetCurrentContext()?.draw(maskedImageRef!, in: CGRect.init(x: 0, y: 0, width: image.size.width, height: image.size.height))
    let result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return result

    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
>             
> 
> 时间：2016-06-27T11:08:01.510

基于[@PKCLsoft的**出色**回答](https://stackoverflow.com/a/10544776/814730)，我做了一个编辑，它只使白色透明，但它根据像素的“白色”程度来制作阿尔法。当您尝试从黑白图像制作蒙版时，这可能会派上用场，因此它将在文本或形状上提供平滑的边缘。

```
- (UIImage *)makeWhiteColorTransparentInImage:(UIImage *)image {
   CGImageRef imageRef = [image CGImage];

   NSUInteger width = CGImageGetWidth(imageRef);
   NSUInteger height = CGImageGetHeight(imageRef);
   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

   NSUInteger bytesPerPixel = 4;
   NSUInteger bytesPerRow = bytesPerPixel * width;
   NSUInteger bitsPerComponent = 8;
   NSUInteger bitmapByteCount = bytesPerRow * height;

   unsigned char *rawData = (unsigned char*) calloc(bitmapByteCount, sizeof(unsigned char));

   CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
   CGColorSpaceRelease(colorSpace);

   CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

   int byteIndex = 0;

   while (byteIndex < bitmapByteCount) {
      unsigned char red   = rawData[byteIndex];
      unsigned char green = rawData[byteIndex + 1];
      unsigned char blue  = rawData[byteIndex + 2];
      unsigned char alpha  = rawData[byteIndex + 3];

      if (alpha == 0.0) {
          rawData[byteIndex + 3] = 0.0;
      } else {
          rawData[byteIndex + 3] = 255.0 - (red + green + blue) / 3.0;
      }

      byteIndex += 4;
    }

    CGImageRef imgref = CGBitmapContextCreateImage(context);
    UIImage *result = [UIImage imageWithCGImage:imgref];

    CGImageRelease(imgref);
    CGContextRelease(context);
    free(rawData);

    return result;
} 
```

我希望有一天它对某人有所帮助:)

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2020-01-22T11:48:51.113

白色背景颜色到透明颜色的快速版本

```
extension UIImage {
    func imageByMakingWhiteBackgroundTransparent() -> UIImage? {

        let image = UIImage(data: self.jpegData(compressionQuality: 1.0)!)!
        let rawImageRef: CGImage = image.cgImage!

        let colorMasking: [CGFloat] = [222, 255, 222, 255, 222, 255]
        UIGraphicsBeginImageContext(image.size);

        let maskedImageRef = rawImageRef.copy(maskingColorComponents: colorMasking)
        UIGraphicsGetCurrentContext()?.translateBy(x: 0.0,y: image.size.height)
        UIGraphicsGetCurrentContext()?.scaleBy(x: 1.0, y: -1.0)
        UIGraphicsGetCurrentContext()?.draw(maskedImageRef!, in: CGRect.init(x: 0, y: 0, width: image.size.width, height: image.size.height))
        let result = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        return result

    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T12:53:00.727

我自己从来没有做过这样的事情，但它看起来`CGImageCreateWithMaskingColors`可能在这里有用。不过，使用 Core Graphics 超出了我在本网站的答案中所能解释的范围；查看您的文档并在 Web 上搜索教程。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2020-08-17T16:34:50.757

swift 5 中的 UIImage 扩展，可以将任何颜色更改为透明。基于@fegoulart 的回答。

```
extension UIImage {
func remove(color: UIColor) -> UIImage? {

    let cgColor = color.cgColor
    let components = cgColor.components
    var r = components?[0] ?? 0.0
    var g = components?[1] ?? 0.0
    var b = components?[2] ?? 0.0

    r = r * 255.0
    g = g * 255.0
    b = b * 255.0

    let colorMasking: [CGFloat] = [r, r, g, g, b, b]

    let image = UIImage(data: self.jpegData(compressionQuality: 1.0)!)!
    let rawImageRef: CGImage = image.cgImage!

    UIGraphicsBeginImageContext(image.size);

    let maskedImageRef = rawImageRef.copy(maskingColorComponents: colorMasking)
    UIGraphicsGetCurrentContext()?.translateBy(x: 0.0,y: image.size.height)
    UIGraphicsGetCurrentContext()?.scaleBy(x: 1.0, y: -1.0)
    UIGraphicsGetCurrentContext()?.draw(maskedImageRef!, in: CGRect.init(x: 0, y: 0, width: image.size.width, height: image.size.height))
    let result = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return result
}
} 
```

# internet-explorer - Internet Explorer toDataURL() 替代方案？

> ID：633724
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T08:22:59.923
> 
>         
> 
> 标签：internet-explorer, canvas

所以我需要保存在`<canvas>`元素上绘制的图像数据。还有适用于大多数现代浏览器的 toDataURL() 方法。

除了......你猜对了...... Internet Explorer。

我在网上搜索过，但到处有人说我应该使用 SVG/VML 来保存数据，但他们从未提及如何。我对 IE 中的 SVG/VML 没有任何经验，那么如何保存在 Internet Explorer 中画布元素中绘制的图像？有没有人有经验？

目前，我不得不在客户端和服务器上复制绘图代码，这开始变得复杂。因此，如果有一种方法可以提取在客户端（或服务器）端的画布标签上绘制的图像，那肯定会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2011-09-16T14:00:04.800

1.  canvas.toDataURL 适用于 IE9。

2.  如果你真的需要它来使用旧的 IE .. 好吧.. 我会给你一个报价

> 由于 Explorer Canvas 使用的方法的性质，不支持 toDataURL：VML。我们没有找到使用 JS 将 VML 光栅化为位图图像的方法，甚至没有使用服务器端脚本。所以如果你真的需要在 IE 中使用 toDataURL，你将不得不使用 FxCanvas (http://code.google.com/p/fxcanvas/) 或 FlashCanvas (http://flashcanvas.net/) ：两种基于 Flash 的解决方案.

[http://code.google.com/p/explorercanvas/issues/detail?id=77](http://code.google.com/p/explorercanvas/issues/detail?id=77)

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2013-02-11T11:53:30.687

我有同样的问题。我想做的是将画布转换为图像，然后在新选项卡中打开它。我发现转换它不是问题，但在新链接中打开是问题。我通过生成图像来解决它，将其放入 img 标签中，然后将其包含在新页面中。然后我使用本教程打开了新页面 - [http://www.javascripter.net/faq/writingt.htm](http://www.javascripter.net/faq/writingt.htm)

这是我所做的

```
var canvas = document.getElementById('canvas1');
var dataURL = canvas.toDataURL();
var width = parseInt($("#main").width()); //main is the div that contains my canvas
var height = parseInt($("#main").height());
newWindow("<img src=\"" + dataURL + "\"/>");
function newWindow(content) {
    top.consoleRef = window.open("", "Organisational Structure",
        "width="+width+",height="+height
        + ",menubar=0"
        + ",toolbar=1"
        + ",status=0"
        + ",scrollbars=1"
        + ",resizable=1")
    top.consoleRef.document.writeln(
        "<html><head><title>Console</title></head>"
        + "<body bgcolor=white onLoad=\"self.focus()\">"
        + content
        + "</body></html>"
    )
    top.consoleRef.document.close()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:04:24.333

您可能能够获得 VML 和相同的，但这是一种 XML 格式，所以这可能不是您想要的。如果不使用插件，您无法从 IE 中获取图像。

# asp.net - 如何将 VBA 迁移到 asp.net

> ID：633736
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T08:28:37.647
> 
>         
> 
> 标签：asp.net, ms-access, vba

我有一个想要移动到 asp.net 的 MS-Access 2003 前端（后端 SQL2000）。系统在网络/vpn 上运行的带宽太高了。

我已经开始手动构建 aspx 和 ascx，这有点像噩梦，很快就会开始编写代码。

有没有人成功地将 MS-Access/vba 迁移到 asp.net？

或者对进行此移植的正确（或只是好的）方法有任何想法？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T11:18:15.320

我不认为它真的会成为一个“港口”。您可能会发现需要完全重写需求。对于一个很好的教程，恕我直言，构建以数据为中心的 ASP.NET 应用程序的最佳方式，看看[这里](http://imar.spaanjaars.com/QuickDocId.aspx?quickdoc=416)和[这里](http://imar.spaanjaars.com/QuickDocId.aspx?quickdoc=476)。

# asp.net - 需要 IDE 建议。环境：ASP.NET-VB-JAVASCRIPT

> ID：633739
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T08:32:48.073
> 
>         
> 
> 标签：asp.net, javascript, visual-studio, ide

我正在开发一个 ASP.Net 项目，创建一个类似于日历调度程序应用程序的 Outlook。

我需要在网页上实现 javascript，但是我现在使用的 VS 2005 并不是很有帮助，比如智能感知或调试等。如果是 javascript。我也打算在应用程序中使用 jQuery。

问题 ：

1.  VS 2005 是否有一些对 javascript 有帮助的功能，我不知道，还是我应该转向 VS 2008（在这方面它是否比 VS 2005 更好？）？

2.  并且还告诉我一个在 HTML-Javascript 环境中练习 javascript 的好 IDE。我不会使用 Rails 或 PHP 或 python。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T08:35:27.100

提供有关您正在寻找的“帮助”类型的详细信息会对您有所帮助。

VS2008 总体上比 VS2005 有更好的 JavaScript 支持，包括 JavaScript 调试。  [这是 Scott Guthrie 关于 VS2008 JavaScript 支持的链接](http://weblogs.asp.net/scottgu/archive/2007/07/19/vs-2008-javascript-debugging.aspx)。

使用 jQuery，您可以将智能感知添加到 Visual Studio 以帮助您。  这是 Scott Guthrie关于启用智能感知[的帖子的另一个链接。](http://weblogs.asp.net/scottgu/archive/2008/11/21/jquery-intellisense-in-vs-2008.aspx)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T08:59:10.320

我同意 VS 2008 更适合您正在考虑的环境，因为您可以轻松添加对 jQuery 的智能感知支持。VS 2008 还可以在它自己的网络服务器或 IIS 中进行调试，这意味着测试您的环境非常容易。

对于我们的项目，我们使用 VS 2008 并使用包含 jQuery 的 MVC 框架编写代码。在我们部署到 IIS 进行最终测试之前，我会在调试环境中运行每个 Web 项目。我使用 firebug 在 Firefox 中调试 JS，Chrome 和 safari 有自己的调试器，VS 2008 为我处理 IE。

VS 2008 的另一个不错的特性是能够将项目发布到特定位置，仅复制所需的文件。我不想发布到实时环境，但首先在最终测试环境中创建所需的文件是非常需要的节省时间的方法。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:11:02.177

关于您的第二个问题，[RubyMine](http://www.jetbrains.com/ruby/index.html)是编写 JavaScript 的绝佳环境 - 很棒的 IntelliSense，它也教您最佳实践（Visual Studio 缺乏的东西）。

有趣的是，在产品亮点页面上没有那么多广告（它在括号中，呵呵）......

# visual-c++ - 如何在 HBITMAP 上打印文本？

> ID：633743
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T08:35:15.510
> 
>         
> 
> 标签：visual-c++

如何在 HBITMAP 上打印文本？

如何将 HBITMAP 附加到 CImage 对象中？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:11:26.423

`CImage::Attach`允许您设置对象`HBITMAP`的。`CImage`

要在位图上绘制文本，请创建一个设备上下文对象：

```
CDC::FromHandle (CImage::GetDC ()) 
```

然后使用该`CDC::TextOut`函数绘制文本（或任何其他文本绘制函数）。

# java - 连接 Java 和 Quartz Composer

> ID：633745
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T08:36:01.313
> 
>         
> 
> 标签：java, macos, integration, quartz-composer

我编写了这个活动摄影应用程序，其中包含幻灯片等功能。用Java编写的应用程序是多平台的。但是在 Mac OS X 上，它通过在 Java 窗口中包含一个 QC 组件来利用 Quartz Composer 的图形功能。该组件基于 Xcode 附带的示例。

用户可以为幻灯片选择一个“皮肤”，它由一个 .qtz 文件和一个 XML 文件组成，该文件描述了 Java 应用程序可以传递给 QC 程序的参数。参数在 UDP 数据包中传递。

这种方法的问题在于，它需要在 QC 项目中使用大量难看的 javascript 代码，而构建这些项目的设计者不是程序员。

理想情况下，我想将参数绑定到 QC 项目中已发布的输入。有没有人做过这种事情，或者可以指出一些关于连接 Java 和 QC 的信息？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-26T19:55:29.917

基于 Objective-C 的 Mac OS API 中有一些绑定可以做你想做的事，但是我不知道你将如何在 Java 中访问这些。

然而，Quartz Composer 支持 OpenSoundControl，它允许您通过 UDP 或 TCP 连接发送命名参数（浮点数、整数和字符串）。然后，您的设计师应该能够使用 Quartz Composer 的可视化编辑器将这些命名输入连接到他需要的任何补丁参数。

* * *

## 回答 #2

> 赞同：-1
> 
>             
> 
> 时间：2011-09-04T12:44:54.790

我自己没有这样做，但我假设您可以使用 JNI 从您的 java 应用程序访问objective-c 接口到已发布的端口。

# tortoisesvn - 如何在 TortoiseSVN 中用我的工作副本覆盖存储库的内容？

> ID：633746
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T08:36:17.957
> 
>         
> 
> 标签：tortoisesvn

可以说，我知道我的承诺会发生冲突，但我不想处理合并或任何事情。   

我只是想用自己的版本覆盖存储库版本。这样做的 tortoisesvn 命令是什么？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-03-11T09:01:53.357

1.  首先，您必须进行更新（SVN 更新），因此实际上正在发生冲突。

2.  然后你会在你的目录中得到三个文件：*yourfilename* .mine *yourfilename* .rX *yourfilename* .rY （X 和 Y 是原始版本号和新版本号）

3.  将 .mine 文件重命名为原始文件名。

4.  将冲突的文件标记为已解决。(TortoiseSVN -> 已解决) (.r? 文件将被自动删除)

5.  之后，您可以提交文件，因为它是正常更改。（SVN 提交）

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T09:10:44.693

看[红皮书](http://svnbook.red-bean.com/)[`svn resolve`](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.resolve.html)上的命令。使用命令行客户端，您将能够运行

```
svn update
svn resolve -R --accept mine-full 
```

TortoiseSVN 似乎没有提供此功能，但如果您有命令行客户端作为备份，它可能会很方便。否则，我会采用 Neil 描述的那种 hack（移动工作副本文件、更新、替换工作副本文件）。

一个很大的警告：使用该[`Resolved...`](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.resolved.html)命令将在更新后接受包含冲突的版本；你真的想要更新前的文件。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:09:12.060

另一种（可怕的）可能性：

*   将您知道要与之冲突的版本检查到与您自己的东西不同的目录中

*   将您的工作文件复制到单独目录中的文件上 - 注意不要复制 .svn 文件

*   从单独的目录提交

# wpf - WPF：使整个边框可点击

> ID：633747
> 
>         
> 
> 赞同：11
> 
>         
> 
> 时间：2009-03-11T08:36:27.490
> 
>         
> 
> 标签：wpf, user-controls, controltemplate

我正在尝试在 WPF 中实现一个按钮，当您单击它时会显示一个菜单。我已经完成了所有工作，控件的 ControlTemplate 如下所示。（该控件扩展了 ToggleButton）。

```
<Border x:Name="Border" Padding="3" CornerRadius="1" BorderThickness="1"
    VerticalAlignment="Stretch" HorizontalAlignment="Stretch" IsHitTestVisible="True"> 
```

问题是，仅当用户单击路径绘制的小箭头时才会显示菜单。有什么办法可以让整个边框 HitTestVisible？

* * *

## 回答 #1

> 赞同：18
> 
>             
> 
> 时间：2009-03-11T08:41:32.470

在其上添加透明背景应该可以。

# vb.net - 奇怪的“IOException 未处理”

> ID：633748
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T08:37:06.193
> 
>         
> 
> 标签：vb.net, exception

（VB.NET，.NET 3.5）

我编写了以下函数来从 txt 文件中读取一些文本。它工作正常，但现在不行了。它一直给我这个错误信息

“IOException 未处理”和

" 该进程无法访问文件 'F:\kh_matt\ch1.txt'，因为它正被另一个进程使用。"

ch1.txt 甚至根本没有被任何程序打开或使用。我试图将 ch1.txt 移动到另一个位置（驱动器 D），但仍然收到相同的消息错误，但只是显示不同的位置进程无法访问文件“D:\ch1.txt”，因为它正被另一个进程使用。 "

这是我的代码块：

Private Sub btnRead_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 btnRead.Click

```
 Dim reader As StreamReader
    Dim filelocation As String

    filelocation = "F:\kh_matt\ch1.txt"
    Dim chid As Integer

    chid = 1

    If System.IO.File.Exists(filelocation) = True Then
        reader = New StreamReader(New FileStream(filelocation, FileMode.Open))
    Else
        MsgBox(filelocation, MsgBoxStyle.OkOnly)
    End If

    Dim MyStream As New StreamReader(Path.Combine(Application.StartupPath, filelocation))
    Dim vArray() As String = MyStream.ReadToEnd.Split(CChar("$"))
    MyStream.Close()

    Dim count As Integer

    For d As Integer = 0 To vArray.Length - 1 Step 1

        If d = vArray.Length - 1 Then
            Exit For
        End If

        InsertKh(chid, d + 1, vArray(d))
        count = d + 1
    Next

    MsgBox("Done Inserting")
End Sub 
```

它总是指向这段代码：

**将 MyStream 调暗为新 StreamReader(Path.Combine(Application.StartupPath, filelocation))**

我在哪里调试并按下相应的按钮。谁能指出问题是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T08:57:52.493

我认为这是你的问题：

```
If System.IO.File.Exists(filelocation) = True Then
    reader = New StreamReader(New FileStream(filelocation, FileMode.Open)) 
```

如果文件存在，它将在其上打开一个 StreamReader，然后尝试在同一文件上打开另一个 StreamReader，这将锁定该文件，导致此行：

```
Dim MyStream As New StreamReader(Path.Combine(Application.StartupPath, filelocation)) 
```

失败。

另外，一些指针：

*   考虑改用 System.IO.File.ReadAllText() 方法，更容易

*   如果您**必须**使用流，请将它们包装在 using 块中以确保它们被正确释放，例如：

`

```
Dim vArray() As String

using (Dim MyStream As New StreamReader(Path.Combine(Application.StartupPath, filelocation))
{
  vArray = MyStream.ReadToEnd.Split(CChar("$"))
} 
```

（对不起，如果上面的代码不是 100% 正确，我不会写太多 VB.Net）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T08:56:37.160

似乎您打开文件两次，这可能是导致您的错误的原因：

```
reader = New StreamReader(New FileStream(filelocation, FileMode.Open))
...
Dim MyStream As New StreamReader(Path.Combine(Application.StartupPath, filelocation)) 
```

你确定那是你打算做的吗？看起来您可以删除`MyStream`并`reader`改用。此外，您不必使用`Path.Combine`，因为`filelocation`不是相对的。  

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T08:40:41.473

确保在完成读取文件后关闭流和流读取器，即使抛出异常也是如此。

使用 try/finally 块，并在 finally 块中关闭流/streamreader。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:03:28.283

谢谢大家的回复。这是我的错。我忘记注释掉我之前为测试而编写的代码。注释掉这段代码后，它就像以前一样工作。

```
 'If System.IO.File.Exists(filelocation) = True Then
    '    reader = New StreamReader(New FileStream(filelocation, FileMode.Open))
    'Else
    '    MsgBox(filelocation, MsgBoxStyle.OkOnly)
    'End If 
```

祝你有美好的一天。

# php - PHP / MySQL中的特殊字符

> ID：633762
> 
>         
> 
> 赞同：27
> 
>         
> 
> 时间：2009-03-11T08:47:22.550
> 
>         
> 
> 标签：php, mysql, special-characters

我在数据库中有包含特殊字符的单词（主要是西班牙语，如波浪线）。在数据库中，所有内容都使用 PHPmyAdmin 正确保存和显示，但是当我获取数据（使用 PHP）并在浏览器中显示时，我得到一个奇怪的字符，比如“？” 有一个正方形......我需要一个一般性的修复，所以我不需要每次都转义每个字符，而且我还可以将 PHP 表单中的特殊西班牙字符插入数据库......

HTML 是正确的：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

所有表和数据库都设置为 utf8_spanish

我得到的角色：�</p>

有什么建议么？？？

谢谢！！！

* * *

## 回答 #1

> 赞同：35
> 
>             
> 
> 时间：2009-03-11T09:15:44.447

我只想提供更多关于[vartec](https://stackoverflow.com/questions/633762/special-characters-in-php-mysql/633788#633788)提出的解决方案的详细信息，它是（取决于您的 MySQL 安装）对您的问题最正确的解决方案。首先，MySQL 中的字符集/编码问题是一个有点复杂的主题，在 MySQL 手册[第 9.1 章“字符集支持”](http://dev.mysql.com/doc/refman/5.1/en/charset.html)中进行了广泛的介绍。在您的情况下，尤其是[9.1.4。“连接字符集和排序规则”](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)将是最相关的。

简而言之：MySQL 必须知道您的客户端应用程序（从数据库 peroective 那是您的 PHP 脚本）所期望的字符集/编码，因为它将从服务器定义的内部字符集/编码中对所有字符串数据进行转码，数据库级、表级或列级进入连接字符集/编码。您在客户端使用 UTF-8，因此必须告诉 MySQL 您使用 UTF-8。这是由 MySQL 命令完成的，该命令`SET NAMES 'utf8'`必须作为打开连接时的第一个查询发送。根据您的安装和您在 PHP 脚本中使用的 MySQL 客户端库，这可以在每次连接时自动完成。

如果您使用 PDO，则只需设置配置参数

```
$db = new PDO($dsn, $user, $password);
$db->setAttribute(PDO::MYSQL_ATTR_INIT_COMMAND, "SET NAMES 'utf8'"); 
```

使用 mysqli 更改客户端字符集/编码更加简单：

```
$mysqli = new mysqli("localhost", "user", "password", "db");
$mysqli->set_charset("utf8"); 
```

我希望这将有助于使整个事情更容易理解。

* * *

## 回答 #2

> 赞同：14
> 
>             
> 
> 时间：2009-03-11T08:56:25.757

连接后立即发出`SET NAMES 'utf8'`：

```
$mysqli = new mysqli("localhost", "user", "password", "database");
$mysqli->query("SET NAMES 'utf8'"); 
```

* * *

## 回答 #3

> 赞同：11
> 
>             
> 
> 时间：2009-03-11T08:59:33.923

让 MySQL 自动翻译它

```
$conn = mysql_connect('host', 'user', 'password');
mysql_set_charset('utf8',$conn); 
```

[http://es.php.net/manual/en/function.mysql-set-charset.php](http://es.php.net/manual/en/function.mysql-set-charset.php)

编辑：从我收集到的评论中，这实际上是用 latin1 编码的，所以

```
mysql_set_charset('latin1_spanish_ci',$conn); 
```

* * *

## 回答 #4

> 赞同：5
> 
>             
> 
> 时间：2013-05-05T19:24:07.447

我从某个地方发现了这个，从那时起就一直在使用它而没有想太多。

```
mysql_query("SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'"); 
```

* * *

## 回答 #5

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T10:13:35.273

将 HTML 字符集更改为 ISO-8859-1 解决了问题！愚蠢的

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-11-13T11:34:41.623

神圣的废话..这让我发疯了。我试图做同样的事情。我添加了一个 utf-8 编码的 HTML 标头。几个小时后，mysqli_set_charset() 救了我，但我很高兴我现在可以使用它

另一个尝试编码特殊字符和重音的函数是 htmlentities()

* * *

## 回答 #7

> 赞同：3
> 
>             
> 
> 时间：2014-12-25T23:43:00.253

你可以简单地做：

```
$link = mysql_connect("host", "user", "password");
mysql_select_db("database", $link); mysql_query("SET NAMES 'utf8';", $link); 
```

* * *

## 回答 #8

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T08:51:40.183

在您的 HTML 中打开 unicode 编码。

* * *

## 回答 #9

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:10:02.353

在处理特殊字符时，我总是注意以下事项：

*   数据库、表和字段字符集都设置为 utf8_general_* 或 utf8_unicode_*

*   我确保我的编辑器使用正确的字符集保存 PHP 文件

*   我将 php.ini 中的 default_charset 设置为 UTF-8**或**

*   我发送一个 Content-Type: text/html; charset=UTF-8 标头

*   META 标记中的字符集是 UTF-8（这被 Content-Type HTTP 标头覆盖）

*   连接到 MySQL 时，我发出以下查询：

    *   设置名称 utf8

    *   设置字符集 utf8

    *   SET COLLATION_CONNECTION="utf8_general_ci"/"utf8_general_ci"

* * *

## 回答 #10

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:00:11.453

你确定你的数据库中有 UTF8 数据吗？

* * *

## 回答 #11

> 赞同：2
> 
>             
> 
> 时间：2018-03-06T16:38:22.030

对我有用的答案是 Stefan Gehrig 发布的答案：

> $mysqli->set_charset("utf8");

在定义连接和解决问题后，我只需要添加该行！:)

（我正在发布答案，因为我无法发表评论......）。

* * *

## 回答 #12

> 赞同：0
> 
>             
> 
> 时间：2013-08-11T16:20:20.953

我的解决方案是：执行上述所有操作，但我也使用记事本++，并且文件必须像这样保存：转到 manu 选项卡中的编码并保存文件->在 utf8 中编码

* * *

## 回答 #13

> 赞同：0
> 
>             
> 
> 时间：2018-08-13T09:22:57.937

有趣的是，这段代码对我不起作用：

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'test');
mysqli_set_charset($link, "utf8");
printf("Current character set: %s\n", mysqli_character_set_name($link));
//shows latin1 
```

但是，在条件内设置字符集是有效的：

```
if (!mysqli_set_charset($link, "utf8")) {
    printf("Error loading character set utf8: %s\n", mysqli_error($link));
    exit();
} else {
    printf("Current character set: %s\n", mysqli_character_set_name($link));
    //shows utf8
} 
```

我的设置：

```
$ rpm -qa|grep -E "php|maria"
mariadb-5.5.56-2.el7.x86_64
mariadb-server-5.5.56-2.el7.x86_64
mariadb-libs-5.5.56-2.el7.x86_64
php-pdo-5.4.16-45.el7.x86_64
php-cli-5.4.16-45.el7.x86_64
php-5.4.16-45.el7.x86_64
php-common-5.4.16-45.el7.x86_64
php-mysql-5.4.16-45.el7.x86_64 
```

* * *

## 回答 #14

> 赞同：0
> 
>             
> 
> 时间：2020-04-19T14:34:36.380

[这里](https://stackoverflow.com/a/33949123/913747)的这个答案对于那些使用像我这样的**MySQLi**函数通过**PHP的****程序**方式连接到他们的**MySQL**或**Mariadb**数据库的人来说会派上用场。

 ******这是人们如何以程序方式进行操作的方法。见下文;

```
<?php

$host = "localhost";
$user = "user";
$passwd = "password";
$database = "database";

$con = mysqli_connect($host, $user, $passwd, $database);
mysqli_set_charset($con, "utf8");

// Check connection
if (mysqli_connect_errno()) {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  exit();
}

?> 
```

* * *

## 回答 #15

> 赞同：0
> 
>             
> 
> 时间：2020-04-22T21:35:38.087

以下答案对于那些使用**MySQLi**函数从**PHP连接到他们的****MySQL**或**Mariadb**数据库的人可能很有价值，就像我在不通过**PDO**（*PHP 数据对象*）连接时经常做的**那样。**

 *******这是您如何以程序方式进行操作的方法。见下文;

```
<?php

$host = "localhost";
$user = "user";
$passwd = "password";
$database = "database";

$con = mysqli_connect($host, $user, $passwd, $database);
mysqli_set_charset($con, "utf8");

// Check connection
if (mysqli_connect_errno()) {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  exit();
}

?> 
```

# eclipse - 通过按钮在 Eclipse 中自动执行任务

> ID：633772
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T08:54:09.990
> 
>         
> 
> 标签：eclipse, ant

有没有一种简单的方法（即不开发自定义插件）来为我的任务栏创建一个可以运行特定 Ant 目标的按钮？它不一定是本机的——如果它逃逸到 OS shell 或其他魔术就可以了。

我在 OSX 上使用 Eclipse Ganymede。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:33:41.580

试试[Eclipse Monkey](http://wiki.eclipse.org/Eclipse_Monkey_Overview)。该插件已死（没有进一步的开发），但它应该可以工作。

# visual-studio - 优化开发虚拟机

> ID：633774
> 
>         
> 
> 赞同：20
> 
>         
> 
> 时间：2009-03-11T08:54:37.180
> 
>         
> 
> 标签：visual-studio, visual-studio-2008, vmware

作为最佳实践，我使用虚拟机进行开发——我想尽可能地优化我的虚拟机。我只安装了服务器 2003、IIS 和 Visual Studio 2008。您如何优化您的开发虚拟机，即您关闭了哪些服务等...

* * *

## 回答 #1

> 赞同：23
> 
>             
> 
> 时间：2009-04-24T16:38:18.353

与往常一样，没有一组普遍“正确”或“最佳”的建议。**但是，这些是我的开发**虚拟环境中运行良好的一些项目。

# 硬件提示

* * *

## 满满的回忆！

确定每台虚拟机需要多少内存以及主机需要多少内存（如果您同时在主机上运行）。将同时运行的所有 VM 的内存需求总量相加，确定最大 VM RAM 负载并添加主机负载。我建议至少有 512MB 的“填充”

例如，我需要大约 768MB 的主机操作系统（WinXP Pro SP3）和大约 1GB 的客户操作系统（WinXP Pro SP3 w/Visual Studio 2005/2008 和 SQL Server Developers Edition）。1024MB + 768MB + 512MB = 2.3GB

就个人而言，由于目前 RAM 非常便宜，我只是用 4GB（3.5 可寻址）将我的 32 位系统最大化。

## 为您的操作系统和虚拟机提供单独的主轴

有一个与您的操作系统磁盘分开的磁盘来运行您的虚拟机映像。这大大减少了 Host 和 Guest 之间的磁盘 I/O 争用。

**注意：**使用外部 HDD 将主轴分离会有所帮助，但请注意 - Firewire 和 USB 的延迟比 IDE、SATA 或 SCSI 更高！虽然 USB 2.0 和 Firewire 接口具有足够的带宽来实现最大磁盘*吞吐量*，但它们确实会为每个操作增加大量*延迟。*这在高磁盘事务、小文件访问情况（如 C++ 编译）中变得非常重要。我还没有机会在 eSATA 上运行一些测试，以了解它与内部 SATA 访问时间相比的性能如何。

## 使用访问时间短的磁盘

在开发过程中，会发生相当多的随机磁盘访问，尤其是在使用 C++ 等语言进行编译期间。为您的 VM 使用 7200 RPM 而不是 5400 RPM 驱动器可以减少访问时间，从而减少编译时间。使用 10,000RPM 或高端 SSD 可进一步减少这些时间。收益递减点取决于您环境的特定磁盘访问负载/模式。

# 主机提示

* * *

## 禁用虚拟机文件病毒扫描

告诉您的病毒扫描程序忽略您的虚拟机目录或 .vmdk 文件扩展名，这样它就不会不断地扫描您的虚拟机磁盘。

## 避免 CPU 争用

如果您一次运行多个虚拟机，或者您同时在主机和来宾操作系统中工作，那么在多核/proc 机器上为主机操作系统节省至少 1 个 CPU。例如，如果您正在运行两个虚拟机并且在主机操作系统中不做任何工作，那么主机上的双核处理器与单核虚拟机可能会为您提供最佳服务。

如果您正在运行单个虚拟机并且在主机操作系统上没有工作，那么如果虚拟机应用程序可以使用第二个处理器，那么运行双处理器 VM 可能会有所帮助。

如果您正在运行两台虚拟机，一台是单进程，另一台是双进程，您可能需要运行四核系统。

**VMware 注意**（其他虚拟化应用程序未确认）：如果您为虚拟机提供多个处理器，它会等待两个处理器都可用，即使不使用它们也会保留它们。这可能会导致虚拟机之间或虚拟机与主机之间的严重争用。

# 客人小贴士

* * *

## 分配足够的内存

确保分配足够的 RAM 来满足虚拟机的需求

## 避免使用快照

除非确实需要，否则不要使用快照。与维护基于快照的虚拟机文件系统相关的磁盘 I/O 损失很大。

## 不要运行不必要的服务

如：

*   索引

*   系统还原

*   错误报告

*   无线零配置

## 不要运行安全软件

**考虑**不要在 VM 中运行防病毒、反间谍软件或防火墙软件。您必须在这里权衡安全性与速度的优缺点。对于许多人来说，如果他们感染了病毒，这不是问题，他们只需恢复以前的副本或快照。对于其他人来说，敏感信息的潜在暴露需要严格的安全策略，即使在 VM 内也是如此。

我会说，不在 VM 中运行防病毒或防火墙软件可能是 Windows 的 VM 经常感觉比其物理主机操作系统对应物“更敏捷”的第一个原因。

## 碎片整理！

不幸的是，在虚拟机配置中可能会在三个地方出现文件碎片：在客户操作系统的文件系统中，在虚拟机的虚拟机文件（例如 vmdk）表示中，以及在物理磁盘本身上的虚拟机文件。您对每个文件进行碎片整理的顺序很重要。

*   首先，在客户操作系统中对文件系统进行碎片整理（例如，在客户操作系统中运行磁盘碎片整理程序或在客户操作系统中使用 JkDefrag 或 Defraggler 等工具）

*   二、使用vmware-diskmanager等工具对虚拟机文件（如VMDK）进行碎片整理

*   第三，对保存虚拟机文件的主机上的文件系统进行碎片整理（即在主机操作系统上运行磁盘碎片整理）

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T09:00:35.933

我关闭了文件系统索引器，节省了磁盘空间和 CPU 时间。

* * *

## 回答 #3

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T08:56:28.453

我总是在我的 Windows XP 虚拟 PC 上禁用“系统还原”。

* * *

## 回答 #4

> 赞同：7
> 
>             
> 
> 时间：2009-03-11T09:26:33.470

从我的病毒防护中排除我的构建文件夹以进行访问扫描

这些是我在我的虚拟机中关闭的服务

*   关闭关闭事件跟踪器

*   关闭 c:\ 上的索引

*   错误报告服务已关闭

*   智能卡访问已关闭

*   TCP/IP NetBIOS 助手

*   远程桌面帮助会话管理器

*   远程注册表

*   不间断电源供应

*   视窗音频

*   无线零配置

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T09:09:33.587

将磁盘映像放在外部 HDD（甚至 USB）上可以提高性能（特别是笔记本电脑）

* * *

## 回答 #6

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T09:04:13.430

[这里](http://www.andrewconnell.com/blog/articles/SqeezePerformanceOutOfVirtualPCs.aspx)有一篇关于虚拟机性能的好文章

它是专门针对 Sharepoint 虚拟机编写的，但也有很多普遍适用的技巧。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-03-14T18:03:02.077

我在使用 VMware Server 时禁用了 Windows 页面文件。磁盘 IO 是与 VMWare Server 最薄弱的环节，没有什么比将虚拟化 RAM 分页到虚拟化磁盘文件更糟糕的了。给你的虚拟机足够的内存，这很好用。

此外，并非所有虚拟化解决方案在不同领域的表现都相同。VMware 非常适合 VM 映像的稳定性和移动性，但如果有时间，您可能想尝试其他一些解决方案。我发现更好的磁盘 IO 性能给了我更好的整体体验，所以我用 VMware 服务器更好的 CPU 性能（不幸的是，整体稳定性）换取了 VirtualBox 更好的 IO 性能。非免费的 VMware 版本可能要好得多，但我不知道。

我发现将磁盘映像放在单独的驱动器上并没有给您带来太多收益。很多人会争论这一点，它可以给你更多的性能，这取决于主机的其他情况，但对我来说这是微不足道的。我也尝试使用原始磁盘，但效果不如我希望的那样。

真正扼杀 IO 性能的一件事是在快照处于活动状态时运行。这在大多数实现中使用了写时复制策略，您可以预期磁盘性能会下降 20%。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2009-04-02T20:52:25.783

[我最近构建了一个 VM，并在使用Nlite](http://www.nliteos.com/)和[Windows Update Downloader](http://www.windowsupdatesdownloader.com/)进行安装之前就开始对其进行优化。NLite 允许您删除所有不需要的组件（mspaint、pinball、french 等），应用所有 Windows 更新，并调整注册表和服务设置。例如，您可以在首次启动时禁用系统索引器。如果您使用 Vista 或 2008 Vlite 也可用。

* * *

## 回答 #9

> 赞同：0
> 
>             
> 
> 时间：2010-09-27T15:29:40.723

两个 SSD，一个用于主机的操作系统，一个用于 VM。

* * *

## 回答 #10

> 赞同：0
> 
>             
> 
> 时间：2012-02-15T14:53:45.063

您可以使用 Quest 的这个免费工具来优化虚拟桌面。它关闭了一堆东西。

[http://communities.quest.com/community/vworkspace/blog/2011/09/08/introducing-the-free-quest-vworkspace-desktop-optimizer](http://communities.quest.com/community/vworkspace/blog/2011/09/08/introducing-the-free-quest-vworkspace-desktop-optimizer)

完全披露：我为 Quest 工作，但没有使用此工具。

# ant - 如何自动化构建、部署和测试 Java Web 应用程序？

> ID：633778
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T08:56:32.603
> 
>         
> 
> 标签：ant, jboss, build-automation, automated-tests

现在我有一个 web java 项目，它自动构建并部署到 JBoss，只需将 ear 存档复制到服务器目录（全部使用 Ant）。

我需要的是一种机制，不仅可以自动部署应用程序，还可以验证应用程序是否成功部署并在其上运行 HttpUnit 测试。

问题是如何自动监控部署过程以等待部署完成的那一刻，并且只有在运行测试之后。因此，我想“一键”构建、部署、运行测试（我为此使用 Cruise Control）。

对于解决问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-03-12T09:37:28.847

这里需要启动容器并从构建脚本部署应用程序，然后根据部署的应用程序运行测试。这是集成测试、端到端/功能测试、ui 测试的典型需求。

问题是我们不能只是“启动并忘记”容器的启动并运行测试任务/目标。我们需要等待应用程序部署完成才能运行测试，这需要一些时间。为了确保我们可以在一切准备就绪时运行测试，构建必须启动容器并以阻塞方式部署应用程序。

这**正是**[Cargo](http://cargo.codehaus.org/)的意义所在。Cargo 是一个用于启动/停止容器和部署应用程序的 Java API。它提供了上述逻辑并且可以从 Java、Ant 或 Maven 中使用。

如果您使用的是 Maven，则构建生命周期已经为您提供了“集成测试”阶段的内容。此阶段通常用于...集成测试，并由“预集成测试”和“后集成测试”阶段包装。这是您插入货物开始/停止目标的地方。如果你使用 Ant，你可以使用 cargo 的 ant 任务。

[Mavan Jetty Plugin Configuration Guide](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin#MavenJettyPlugin-Automaticexecutionoftheplugin)中描述了另一个基于 maven 的选项。这个想法和上面的完全一样，只是你在“预集成测试”期间使用码头插件而不是货物来启动码头，并在“集成后测试”期间停止它。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:26:23.063

创建一个基础测试类，所有其他测试都从该类派生。它必须是抽象的，因此自动单元测试收集器不会尝试运行它。

在该类中，将此代码添加到 setUp()：

```
if (checkIsDeployed) {
    ... run code to verify your app is ready for testing and wait until it is ...
    checkIsDeployed = true;
} 
```

`checkIsDeployed`必须是静态的。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-04-14T19:22:22.940

另一种选择是使用[JBoss Server Ant Tasks](http://www.jboss.org/community/docs/DOC-12209)。

The nice thing about these tasks is that they will block until JBoss is fully started, so there is no polling required.  They will also fail if JBoss fails to start in the required timeout, and will attempt to shut JBoss down at the JVM shutdown if you are unable to because of some error.  I believe these tasks are used for the JBoss testsuite.

I've also heard good things about Cargo.  The benefit of it is that your build scripts are not JBoss specific.  I think the JBoss Cargo plugin is maintained by some JBoss guys, as far as I know.

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:29:28.610

您可以考虑使用 hudson 构建引擎：[https](https://hudson.dev.java.net/) ://hudson.dev.java.net/来帮助您在特定时间触发事件。

我知道可以使用 hudson 来运行单元测试，并且可以通过调用 ant 来实现自动部署。

卡尔  

# java - 将 HTML 文件转换为 PDF

> ID：633780
> 
>         
> 
> 赞同：135
> 
>         
> 
> 时间：2009-03-11T08:57:02.150
> 
>         
> 
> 标签：java, html, pdf, pdf-generation

我需要从现有的 (X)HTML 文档中自动生成 PDF 文件。输入文件（报告）使用相当简单的基于表格的布局，因此可能不需要支持真正花哨的 JavaScript/CSS 内容。

由于我习惯于在 Java 中工作，因此可以在 java 项目中轻松使用的解决方案是更可取的。不过，它只需要在 Windows 系统上工作。

一种可行但不会产生高质量输出（至少开箱即用）的方法是使用[CSS2XSLFO](http://re.be/css2xslfo/index.xhtml)和 Apache FOP 来创建 PDF 文件。我遇到的问题是，虽然 CSS 属性转换得很好，但表格布局非常混乱，文本从表格单元格中流出。

我还快速浏览了 Jrex，这是一个用于使用 Gecko 渲染引擎的 Java-API。

有没有办法从 Internet Explorer 渲染引擎中获取渲染页面并将其自动发送到 PDF-Printer 工具？我没有在 Windows 中进行 OLE 编程的经验，所以我不知道什么是可能的，什么是不可能的。

你有想法吗？

* * *

## 回答 #1

> 赞同：77
> 
>             
> 
> 时间：2009-03-11T09:22:44.007

[Flying Saucer](https://github.com/flyingsaucerproject/flyingsaucer) XHTML 渲染器项目支持将 XHTML 输出为 PDF 。看看[这里](https://web.archive.org/web/20150905173204/http://today.java.net/pub/a/today/2007/06/26/generating-pdfs-with-flying-saucer-and-itext.html)的一个例子。

* * *

## 回答 #2

> 赞同：52
> 
>             
> 
> 时间：2009-08-31T20:45:49.650

你试过[WKHTMLTOPDF](http://wkhtmltopdf.org/)吗？

它是一个简单的 shell 实用程序，是 WebKit 的开源实现。两者都是免费的。

我们在[这里设置了一个小教程](http://beebole.com/blog/erlang/convert-html-to-pdf-with-full-css-support-an-opensource-alternative-based-on-webkit/)

**编辑（2017）：**

如果要在今天建造一些东西，我就不会再走那条路了。

但会改用[http://pdfkit.org/](http://pdfkit.org/)。

可能会剥离它所有的 nodejs 依赖项，以便在浏览器中运行。

* * *

## 回答 #3

> 赞同：47
> 
>             
> 
> 时间：2009-03-11T09:32:24.267

查看[iText](https://itextpdf.com/en)；它是一个纯 Java PDF 工具包，支持从 HTML 读取数据。我最近在一个项目中使用它，当我需要从我们的 CMS 中提取内容并导出为 PDF 文件时，这一切都相当简单。对 CSS 和样式标签的支持非常有限，但它确实可以毫无问题地呈现表格（尽管我从未设法设置列宽）。

从 HTML 创建 PDF 是这样的：

```
Document doc = new Document(PageSize.A4);
PdfWriter.getInstance(doc, out);
doc.open();
HTMLWorker hw = new HTMLWorker(doc);
hw.parse(new StringReader(html));
doc.close(); 
```

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T09:17:10.277

如果你有资金，没有什么比[这个视频显示的](http://www.youtube.com/watch?v=vcXUrNSvjhU)[Prince XML更好了](http://www.princexml.com/)

* * *

## 回答 #5

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T09:47:05.713

> 有没有办法从 Internet Explorer 渲染引擎中获取渲染页面并将其自动发送到 PDF-Printer 工具？

这就是**[ActivePDF 的](http://www.activepdf.com)**工作方式，这很好意味着您知道您会得到什么，而且它实际上具有合理的样式支持。

它也是我发现的少数几个真正支持各种分页 CSS 命令的包之一（几年前）。

不幸的是，ActivePDF 软件非常令人沮丧——因为它必须在后台启动 IE 浏览器才能进行转换，它可能非常慢，而且也不是特别稳定。

目前有一个新版本在 Beta 中，它应该会更好，但我实际上没有机会尝试它，所以不知道它有多大的改进。

* * *

## 回答 #6

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:22:21.357

您可以使用带有扩展名的无头 Firefox。跑步很烦人，但确实会产生很好的效果。

查看[此答案](https://stackoverflow.com/questions/270703/creating-pdf-invoices-are-there-any-templating-solutions/460087#460087)以获取更多信息。

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:34:18.443

如果您查看问题的侧栏，您会看到许多相关问题...

在您的上下文中，更简单的方法可能是安装 PDF 打印驱动程序（如[PDFCreator](http://www.pdfforge.org/products/pdfcreator "PDF创作者 |  pdfforge.org")）并将页面打印到此输出。

* * *

## 回答 #8

> 赞同：0
> 
>             
> 
> 时间：2012-09-26T18:13:48.840

[Amyuni WebkitPDF](http://www.amyuni.com/en/server/webkitpdf/)可以与 JNI 一起用于仅 Windows 的解决方案。这是一个 HTML 到 PDF/XAML 的转换库，可免费用于商业和非商业用途。

如果不立即需要输出文件，为了更好的可伸缩性，最好有一个队列和一些后台进程从那里获取项目，转换它们并存储在数据库或文件系统上。

*通常的免责声明适用*

# asp.net - 为什么有时会收到“无法加载文件或程序集 AjaxControlToolkit 3.0 版”？

> ID：633786
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T08:59:29.587
> 
>         
> 
> 标签：asp.net, exception, ajaxcontroltoolkit

我们最近发布了一个新版本的 asp.net 网站，我们将 AjaxControlToolkit 版本 3.0 更改为 3.5。

我检查了网站，发现它运行正常。

第二天我收到了以下两个类似的异常报告，这似乎与版本的变化有关：

> 无法加载文件或程序集“AjaxControlToolkit，Version=3.0.20229.20843，Culture=neutral，PublicKeyToken=28f01b0e84b6d53e”或其依赖项之一。
> 
>   
>   
> 
> 找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
>   
>   
> 
> 索取资料：
> 
>   
>   
> 
> 1) 请求网址：`http://.../Default.aspx?
>   _TSM_HiddenField_=ctl00_sm1_HiddenField
>   &_TSM_CombinedScripts_=%3B%3BAjaxControlToolkit
>   %2C+Version%3D3.0.20229.20843%2C+Culture%3Dneutral%2C+
>   PublicKeyToken%3D28f01b0e84b6d53e%3Aen-US%3A3b7d1b28-161f-426a-ab77-b345f2c428f5%3Ae2e86ef9%3A1df13a87%3A8ccd9c1b` 
> 
>   
>   
> 
> 2) 请求 URL：` [http://.../Login.aspxReturnUrl=%2FUser%2FFaqPosting.aspx%3F](http://.../Login.aspxReturnUrl=%2FUser%2FFaqPosting.aspx%3F) 
>   _TSM_HiddenField_%3Dctl00_sm1_HiddenField %26_TSM_CombinedScripts_%3D%253B%253BAjaxControlToolkit %252C%2BVersion%253D3.0.2025C%20843%2 2 BCulture%253Dneutral%252C%2BPublicKeyToken %253D28f01b0e84b6d53e%253Aen-US%253A3b7d1b28-161f426aab77b345f2c428f5 %253Ae2e86ef9% 253A1df13a87%253Acc9d [...

（sm1指asp.net ScriptManager）

我不明白为什么在我测试网站时没有发生这些异常，但后来其他一些用户的一些请求却发生了。

你们中有人知道为什么会发生这种情况吗？或者对我如何找到有提示？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T17:14:40.083

* * *

我的猜测是你没有更新生产服务器上的 web.config 文件，它仍然引用了 3.0 版本。这是我发现此类错误的最常见原因。

第二个要看的地方是单个文件。一旦你根除错误的参考，无论它在哪里，你的问题都应该消失。重要的部分是检查发布时未覆盖的文件。web.config 是最常见的。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-26T11:56:02.687

检查您是否运行了 Panda 或其他防火墙/防病毒软件。我最近对熊猫有这个问题。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-04-16T07:36:50.263

由于对包含 dll 的文件夹的权限，这总是发生在我身上。去那里并完全控制运行 asp.net 的用户帐户，这应该照顾它。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-04-16T07:45:49.527

我会使用 aspnet_regiis 工具重新安装 .net 框架的 asp.net 组件。

资源：

[http://msdn.microsoft.com/en-us/library/k6h9cz8h(VS.80).aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h(VS.80).aspx)

[http://blogs.x2line.com/al/archive/2007/07/15/3203.aspx](http://blogs.x2line.com/al/archive/2007/07/15/3203.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
>             
> 
> 时间：2009-03-12T12:33:55.227

我认为这可能是由于用户浏览器中某些内容的缓存，使得浏览器使用旧的请求 URL。或者它可能是一个搜索引擎试图使用一个旧的存储 URL。

# asp.net - 如何皮肤 ASP.NET GridView 列？

> ID：633800
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T09:06:09.040
> 
>         
> 
> 标签：asp.net, gridview, skin

这个想法很简单——我希望我的 GridViews 中的所有命令列都有一个特定的按钮图像，比如“删除”按钮。听起来像是皮肤的工作，但我找不到合适的语法......

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T17:11:14.083

听起来你想模板化 GridView 并向我添加一个图像按钮。这是一个链接：
 [http ://andybrudtkuhl.wordpress.com/2006/06/12/gridview-with-an-imagebutton/](http://andybrudtkuhl.wordpress.com/2006/06/12/gridview-with-an-imagebutton/)

# jquery - NHibernate 连接/阅读器从 ajax 上下文中关闭

> ID：633804
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T09:07:34.387
> 
>         
> 
> 标签：jquery, ajax, nhibernate

当我使用 JQuery 进行 ajax 调用时，我在使用 NHibernate 时遇到了麻烦。

关于连接或阅读器被关闭，我得到不同的异常，例如：

“阅读器关闭时调用 Read 的尝试无效”。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-12T13:38:25.163

好吧，调用是使用相同的参数完成的，我真正可以向您展示的只是一个基本的 Linq 到 NHibernate 调用，以通过用户名 == 名称获取员工 - 其中名称是传入的参数。

所以它只是：

返回 Session.Linq().Single(e => e == "John");

我在这条线上有一个断点，它工作得很好，直到它从一个使用 JQuery.getJSON 调用的操作中调用

我还有其他类似的电话，在这种情况下它们似乎也失败了。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-12T13:57:13.013

```
protected object GetJsonUserWrong(string name) {
    var user = default(User);
    using(var session = this.SessionFactory.Open()) {
        user = session.Linq<User>().Single(e => e.Name == name);
    }
    //doing the serialization while the session is closed might not work
    //if NHibernate is using proxy objects, this can fail.
    return SerializeToJson(user);
}

protected object GetJsonUserRight(string name) {
    using(var session = this.SessionFactory.Open()) {
        //must do the serialization while the session is open
        return SerializeToJson(session.Linq<user>().Single(e => e.Name == name));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T11:27:46.593

在尝试读取某些内容之前，请检查您是否正确初始化了连接，而不是从 .NET 关闭它。

您似乎正在尝试在它尚未打开或已关闭它时获取信息。

最后，您之前是否尝试过使用其他框架或直接使用 XMLHttpRequest 对象对您的应用程序进行 AJAX？如果没有，请尝试一下。如果问题仍然存在，您可以确定问题出在服务器端。

# sql-server-2005 - SQL Server 2005 上的 MSDTC 服务

> ID：633805
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T09:07:43.107
> 
>         
> 
> 标签：sql-server-2005

如何在 SQL Server 2005 上启动 MSDTC 服务？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T09:38:58.040

Microsoft Distributed Transaction Coordinator 本身并不是“在 SQL Server 上”——它是一个普通的 Windows 服务。要启动它，请转到命令提示符并输入：

```
net start msdtc 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:45:41.207

如果您想访问 MSDTC 管理 UI，请转到 Administration=>Component Services=>Local Computer。在那里，您将能够通过 GUI 管理 MSDTC。

# c - C中的自动进入退出跟踪

> ID：633813
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:10:35.207
> 
>         
> 
> 标签：c, logging

我必须在所有 C 函数中添加进入和退出日志吗？

如果，那么是否有任何可能的方法来自动编写函数的进入和退出（类似于在 java 中使用面向方面的编程自动进入/退出）。

我正在编写的应用程序对时间要求很高，为每个函数添加进入/退出语句可能会延迟性能并且还会使代码不可读。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:21:07.257

C 不支持任何形式的自省或在运行时或虚拟机上通过魔术自动做事；没有虚拟机，运行时支持基本上只是提供标准功能的“死”代码库。

正如 Subtwo 指出的那样，如果您想做某事（例如日志进入/退出），则必须完成，因此需要时间。你不能只是“隐藏”那个惩罚，把它放进去的开销很小。

标准分析器可能会通过对程序进行统计采样以查看执行哪些函数，从而为您提供一些见解，但这不会给您调用顺序，只是在采样时程序执行代码的随机位置。

您可能会求助于一些预处理器技巧，这是执行“样板”内容（例如日志记录）的常用方法，例如定义一些宏，然后将它们放在每个函数的入口/出口点。不过，您必须记住包括宏，并且当然会存在执行日志记录的任何性能损失。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:14:06.463

首先。如果你想记录一些东西，无论你如何完成它都需要时间。那是通过方面编程或其他方式。如果您的应用程序对时间要求很高，您应该有一些开关来打开/关闭调试。

**更新：**
结帐[http://perfinsp.sourceforge.net/hookit_linux.html](http://perfinsp.sourceforge.net/hookit_linux.html)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T17:40:22.517

查看 AspectC，它是扩展了面向方面特性的 C 变体（就像 AspectJ 是具有面向方面特性的 Java 变体一样）。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2015-09-21T01:51:42.643

您可能会从**FUNCTION**和一些宏中获得一些好处。您仍然需要为每个函数添加入口和出口宏。但至少你不需要重新输入函数名。

如果你对 C++ RAII 没问题，那么你只需要在每个函数中都有一个入口宏。

# wpf - 如何在 WPF 应用程序中实现 Vista 玻璃透明度 (AERO)？

> ID：633817
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T09:11:28.917
> 
>         
> 
> 标签：wpf, xaml, windows-vista, aero

WPF 应用程序很容易使窗口的一部分透明或半透明。但是如何将当前的 Vista 主题（颜色、不透明度）应用于这些透明部分？

当我有一个绿色玻璃边框时，我将如何获得相同样式的绿色玻璃背景？

甚至可以在不调用 Windows API 的情况下做到这一点吗？

我在想这样的[事情](http://www.thirteen23.com/experiences/desktop/continuum/)

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T10:28:35.237

这是一个很好的例子：

CodeProject：[使用附加属性将玻璃效果添加到 WPF](http://www.codeproject.com/KB/WPF/WPFGlass.aspx)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T11:01:23.787

查看此链接，查找标题为“IE7 – 扩展玻璃框架”的部分：

[http://blogs.msdn.com/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx](http://blogs.msdn.com/wpfsdk/archive/2008/09/08/custom-window-chrome-in-wpf.aspx)

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-04-19T16:53:58.450

这是在 WPF 应用程序中扩展 Aero 玻璃效果的官方文档：

[http://msdn.microsoft.com/en-us/library/ms748975.aspx](http://msdn.microsoft.com/en-us/library/ms748975.aspx)

# c# - 在 DataTable 中查找值

> ID：633819
> 
>         
> 
> 赞同：31
> 
>         
> 
> 时间：2009-03-11T09:12:11.770
> 
>         
> 
> 标签：c#, datatable

有没有办法在 C# 中的 DataTable 中找到一个值而不进行逐行操作？

该值可以是数据表中单元格的一部分（row[columnName].value 的子字符串，用逗号分隔），并且该值可以出现在该行的任何一列中。  

* * *

## 回答 #1

> 赞同：58
> 
>             
> 
> 时间：2009-03-11T09:25:04.407

DataTable 或 DataSet 对象将具有一个 Select 方法，该方法将根据作为参数传入的查询返回一个 DataRow 数组结果。

查看您的要求，您的过滤器表达式必须具有一定的通用性才能使其工作。

```
myDataTable.Select("columnName1 like '%" + value + "%'"); 
```

* * *

## 回答 #2

> 赞同：15
> 
>             
> 
> 时间：2009-03-11T09:26:17.603

也许您可以按可能的列过滤行，如下所示：

```
DataRow[] filteredRows = 
  datatable.Select(string.Format("{0} LIKE '%{1}%'", columnName, value)); 
```

* * *

## 回答 #3

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T09:26:30.130

AFAIK，没有内置用于搜索所有列。您`Find`只能针对主键使用。`Select`需要指定的列。您也许可以使用 LINQ，但最终这只是执行相同的循环。也许只是自己展开？至少它是可读的。

* * *

## 回答 #4

> 赞同：-4
> 
>             
> 
> 时间：2015-03-28T10:39:59.823

这个问题在 2009 年提出，但我想分享我的代码：

```
 Public Function RowSearch(ByVal dttable As DataTable, ByVal searchcolumns As String()) As DataTable

    Dim x As Integer
    Dim y As Integer

    Dim bln As Boolean

    Dim dttable2 As New DataTable
    For x = 0 To dttable.Columns.Count - 1
        dttable2.Columns.Add(dttable.Columns(x).ColumnName)
    Next

    For x = 0 To dttable.Rows.Count - 1
        For y = 0 To searchcolumns.Length - 1
            If String.IsNullOrEmpty(searchcolumns(y)) = False Then
                If searchcolumns(y) = CStr(dttable.Rows(x)(y + 1) & "") & "" Then
                    bln = True
                Else
                    bln = False
                    Exit For
                End If
            End If
        Next
        If bln = True Then
            dttable2.Rows.Add(dttable.Rows(x).ItemArray)
        End If
    Next

    Return dttable2

End Function 
```

# css - display:block; 到底是什么？对一个元素做什么？

> ID：633827
> 
>         
> 
> 赞同：16
> 
>         
> 
> 时间：2009-03-11T09:16:21.263
> 
>         
> 
> 标签：css

display:block 的具体规格是什么？我知道将它应用于元素的很多具体事情都会做，但我想听听他们的全部内容。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-03-11T09:19:25.250

[来自 W3C 的报价](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)

> 在块格式化上下文中，框从包含块的顶部开始一个接一个地垂直排列。两个同级框之间的垂直距离由 'margin' 属性确定。块格式化上下文中相邻块框之间的垂直边距折叠。
> 
> 在块格式化上下文中，每个框的左外边缘接触包含块的左边缘（对于从右到左的格式化，右边缘接触）。即使存在浮动也是如此（尽管盒子的内容区域可能会由于浮动而缩小）。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T09:22:39.937

推荐阅读Autistic Cuckoo 关于显示属性及其差异的文章（[第 1](http://web.archive.org/web/20090426004947/http://www.autisticcuckoo.net/archive.php?id=2005/01/11/block-vs-inline-1)部分、[第 2](http://web.archive.org/web/20090422055124/http://www.autisticcuckoo.net/archive.php?id=2005/01/12/block-vs-inline-2)部分、[第 3 部分](http://web.archive.org/web/20090413025724/http://www.autisticcuckoo.net/archive.php?id=2005/01/13/block-vs-inline-3)）。

# winapi - C# - Win32：在失去焦点后获取最顶层窗口的句柄？

> ID：633831
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T09:17:27.967
> 
>         
> 
> 标签：winapi, z-index

试图从我的 WPF 应用程序（它只是通过系统托盘运行）挖掘 win32 api。

当单击系统托盘图标时，我会向用户显示一个上下文菜单，该菜单会在最顶部的任何窗口上获得焦点。

我想处理那个窗口（那个刚刚失去焦点的窗口）并尝试使用不同的方法

```
GetForeGroundWindow()
GetTopWindow()
GetDesktopWindow() 
```

然而没有尽头。我目前正在考虑遍历所有进程，以获取 MainWindowHandles 并检查每个窗口的 z 顺序。

但我认为有一种更简单/更智能的方法。只是我无法从我的旧 Petzold 书籍中搜索或回忆的一本。

另一种方法是让我的系统托盘菜单在激活时*不*获得焦点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:25:23.237

无论用户最终选择哪个菜单项，您都可以在打开菜单*之前*获得最顶层的窗口。

然后，如果您需要最顶层的窗口，您可以使用在打开菜单之前获得的值。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:24:44.597

我认为没有什么比您描述的 z-index 迭代更简单的了。您的系统托盘菜单**必须**获得焦点，否则人们将无法使用它（例如，使用键盘）。如果它获得焦点，则它成为前景窗口，因此旧的前景窗口与系统中的任何其他非活动窗口没有任何区别。确实，z-index 检查恕我直言是唯一的方法。

# asp.net - 日历扩展器中的日期时间

> ID：633839
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T09:20:47.787
> 
>         
> 
> 标签：asp.net, sql, vb.net

我在asp.net中使用calendarextender控件。它只显示日期，不显示时间。但是在插入数据库时​​，时间会自动插入。但是在使用日期条件从数据库中检索数据时，没有相应的记录显示。什么修改我可以做存储过程来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:17:31.020

您最有可能遇到的问题是，如果您正在寻找等于 2009 年 3 月 11 日的日期，您可能永远找不到它，因为有时间戳。您可以用来更改存储过程的一些方法是考虑日期的范围：

使用 Between 语句会给你一个包容的范围

```
Select myname,mydate from sometable 
    where mydate between 3/10/2009 and 3/11/2009 
```

或者

使用 > 和 < 为您提供专属范围

```
Select myname,mydate from sometable 
    where mydate >3/10/2009 and mydate < 3/12/2009 
```

或者

利用 DateAdd 函数将时间从字段中剥离。[SQLTeam 博客](http://weblogs.sqlteam.com/jeffs/archive/2007/01/02/56079.aspx)上有一些很好的例子

```
dateadd(dd,0, datediff(dd,0,myDate)) 
```

或者，如果您可以更改表本身并且您使用的是 SQL Server 2008，则可以使用新的 SQL Server 2008 **Date** DataType，这是一个无需处理时间组件的日期。MSDN 博客上有一篇关于[SQL Server 2008 中新的日期和时间增强功能](http://blogs.msdn.com/manisblog/archive/2007/08/28/sql-server-2008-enhancements-in-date-and-time-data-types.aspx)的好博客。

不要忘记您也可以查看插入过程（如果适用）并将时间归零。

此外，在处理日期时间时，请确保将**>= 和 <=**考虑在内，  这样您就不会错过任何记录。

希望这为您提供足够的选择来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2011-11-16T12:26:58.553

在数据库中 datetime 数据类型包括日期和时间，无论您是否只提供日期或日期时间。如果您将日期插入为 '1/1/2011' 那么它将被解释为 1/1/2011 00:00:00 AM

在选择查询中失败，因为它尝试比较日期和时间（例如在相同日期之间，即“在 2011 年 1 月 1 日和 2011 年 1 月 1 日之间”

使用像子句这样的日/月/年组件或使用 <,> 运算符，即

```
select thisone from sometable where day(tabledate) between day(wheredate1) and day(wheredate2)
  and month(tabledate) between month(wheredate1) and year(wheredate2)
and year(tabledate)  between year(wheredate1) and year(wheredate2) 
```

或者

```
select thisone from sometable where tabledate>=wheredate1 and tabledate<=wheredate1 
```

运算符 = 适用于您使用包容性或独占性搜索的情况

# sql - 将表达式转换为数据类型日期时间的算术溢出错误

> ID：633848
> 
>         
> 
> 赞同：6
> 
>         
> 
> 时间：2009-03-11T09:24:22.833
> 
>         
> 
> 标签：sql, sql-server, sql-server-2005

这个选择语句给了我算术错误信息：

```
SELECT CAST(FLOOR((CAST(LeftDate AS DECIMAL(12,5)))) AS DATETIME), LeftDate 
FROM Table
WHERE LeftDate > '2008-12-31' 
```

虽然这个有效：

```
SELECT CAST(FLOOR((CAST(LeftDate AS DECIMAL(12,5)))) AS DATETIME), LeftDate 
FROM Table
WHERE LeftDate < '2008-12-31' 
```

数据是否有问题（我检查了空值，但没有）？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-03-11T09:38:30.303

发现问题出在日期设置为 9999-12-31 时，可能对于小数点处理来说太大了。从十进制更改为浮点数，每件事都像魅力一样工作。

* * *

## 回答 #2

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T14:12:02.503

通常，将日期转换为数字或字符串以对其执行日期操作非常低效。（转换相对密集，字符串操作也是如此。）最好只使用日期函数。

您给出的示例是（我相信）剥离 DateTime 的时间部分，以下是在没有转换开销的情况下做到这一点的......

```
DATEADD(DAY, DATEDIFF(DAY, 0, <mydate>), 0) 
```

这也应该避免算术溢出......

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2019-03-05T12:21:30.260

也许这对某人有所帮助，因为我的问题有点不同。

抛出此错误的 SELECT 有许多嵌套的 SELECT 和许多与算术运算（如`GETDATE() - CloseDate`.

然后将此类操作的结果与`'1900-01-01'`嵌套 SELECT 中多次提到的结果进行比较。

我的解决方案是为 result of`GETDATE()`和`datetime`variable for声明变量`'1900-01-01'`以避免转换。

```
Declare @CurrentDate datetime = GetDate()
Declare @BlankDate datetime = '1900-01-01'
...
... @CurrentDate - CloseDate ...
... CloseDate <> @BlankDate ... 
```

MatBailie`DATEADD(DAY, DATEDIFF(DAY, 0, <mydate>), 0)`的回答也很有帮助。

# c++ - Gdiplus::Image::GetWidth() 和其他一堆吸气剂不应该是“const”吗？

> ID：633851
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T09:24:50.010
> 
>         
> 
> 标签：c++, windows, winapi, gdi+

为什么他们不是常量？

我相信这是有缺陷的 API 设计。还是我错过了什么？

```
UINT GetWidth();
UINT GetHeight();
... 
```

对比

```
UINT GetWidth() const;
UINT GetHeight() const;
... 
```

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T09:33:45.417

有缺陷的 API 设计？C 风格的 C++ 头文件？[来自为我们带来CString](http://msdn.microsoft.com/en-us/library/aa300688(VS.60).aspx)的团队？唔，不可能……

但是，说真的，不要期望在任何 Win32 API 中使用[GoTW](http://www.gotw.ca/gotw/)级别的 C++，或者不仅仅是围绕 C 样式句柄的基本包装器。Herb Sutter 一直忙于 .NET:ing C++，而不是改进 Microsoft 库设计。[WTL](http://www.microsoft.com/downloads/details.aspx?familyid=E5BA5BA4-6E6B-462A-B24C-61115E846F0C&displaylang=en)与我所看到的 Microsoft 接近[现代 C++](http://en.wikipedia.org/wiki/Modern_C%2B%2B_Design)一样接近，而这导致了一个相当模糊的存在。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:33:16.587

很难说。我同意，但也许在实现中有些东西阻止了它们`const`，并且他们不想增加开销来隐藏。现在我们有`[mutable](https://stackoverflow.com/questions/105014/c-mutable-keyword)`关键字，但我认为它比这个 API 更年轻。

或者，API 的设计者可能属于（有时非常大，imo）一群对`const`关键字怀有敌意的 C++ 开发人员，他们认为这只会让事情变得更难使用。我不是 Windows 历史学家，所以我不能告诉你。:)

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-12T22:45:35.023

严格来说你可能是对的 - 变量应该是 const。

我假设您正在谈论 Gdiplus C++ 本机 API。如果您查看此代码和 Gdiplus 类的实现，您会发现大部分代码是 Gdiplus Flat API 函数的基本包装（[http://msdn.microsoft.com/en-us/library/ms533969 （VS.85）.aspx](http://msdn.microsoft.com/en-us/library/ms533969(VS.85).aspx)）。这可能会使代码变得 const-correct 变得困难......或者（正如另一个人所暗示的）微软通常不是非常现代的 C++。

编辑：查看 Gdiplus::Image::GetWidth() 的代码（在 GdiPlusBitmap.h 中），MS 很容易使用 const 修饰符实现许多功能。他们已经用 Image::GetType() 完成了，里面的代码与 Image::GetWidth()、Image::GetHeight() 几乎相同。

# database - TKProf 输出：来自客户端的 SQL*Net 消息

> ID：633853
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T09:25:22.270
> 
>         
> 
> 标签：database, performance, oracle, networking

我目前正在调试数据库性能问题。我在受苦的 oracle 机器上运行了扩展跟踪，以获取我使用 tkprof 分析过的跟踪文件。

立即引起我注意的一件事是以下输出；

```
 Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  SQL*Net message to client                       4        0.00          0.00
  SQL*Net message from client                     4      109.06        141.31 
```

我已经通过 SQL 客户端手动运行相关查询，它会及时执行。所以我不认为它直接由查询引起。

有人可以澄清“来自客户端的 SQL*Net 消息”到底是什么意思吗？

有谁知道是什么导致了如此长的等待时间？

提前致谢

卡尔

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T09:34:38.363

来自客户端的 SQL*Net 消息是指 oracle 等待来自您正在连接的客户端的输入所花费的时间。它通常被认为是“空闲”事件，因此无需担心；但是，此链接不同意。您可能会发现您的客户是花时间的人，因此您可以优化您的应用程序而不是它使用的查询。

[http://oracletoday.blogspot.com/2005/09/sqlnet-message-from-client.html](http://oracletoday.blogspot.com/2005/09/sqlnet-message-from-client.html)

此外，另一个很好的链接是[http://www.dba-oracle.com/m_sql_net_message_to_client.htm](http://www.dba-oracle.com/m_sql_net_message_to_client.htm)

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-12-12T09:12:47.610

关于“ **Oracle：网络等待**”的帖子真的很好

链接：[https ://sites.google.com/site/embtdbo/wait-event-documentation/oracle-network-waits](https://sites.google.com/site/embtdbo/wait-event-documentation/oracle-network-waits)

内容

```
1 Introduction
2 SQL*Net Wait Events
    2.1 SQL*Net message from client
    2.2 SQL*Net message to client 
    2.3 SQL*Net more data to client 
    2.4 SQL*Net more data from client
    2.5 SQL*Net break/reset to client
    2.6 DBLINK SQL*Net Waits
3 Analysis and Tuning
    3.1 SDU
    3.2 RECV_BUF_SIZE and SEND_BUF_SIZE 
```

# mysql - 如何避免 MySQL 的 SELECT INTO OUTFILE 中的双反斜杠

> ID：633855
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:26:13.673
> 
>         
> 
> 标签：mysql, backslash

在 MySQL 中，以下内容：  

```
SELECT '\\' INTO OUTFILE 'c:/temp/backslash.dump'; 
```

将两个反斜杠写入文件，这是有道理的。  

试图转储一个反斜杠，我更改了 SQL_MODE，如下所示：

```
SET SESSION SQL_MODE='NO_BACKSLASH_ESCAPES';
SELECT '\' INTO OUTFILE 'c:/temp/backslash.dump'; 
```

但又得到了两个反斜杠。

有没有办法转储一个反斜杠？

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T11:16:20.147

做这个：  

```
SELECT '\\' INTO OUTFILE 'c:/temp/backslash.dump' FIELDS ESCAPED BY '|'; 
```

# sql - 使用临时表删除重复记录

> ID：633860
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:26:58.803
> 
>         
> 
> 标签：sql, tsql

采取下面的 tsql 查询：

```
DECLARE @table TABLE(data VARCHAR(20))
INSERT INTO @table VALUES ('not duplicate row')
INSERT INTO @table VALUES ('duplicate row')    
INSERT INTO @table VALUES ('duplicate row')    
INSERT INTO @table VALUES ('second duplicate row')    
INSERT INTO @table VALUES ('second duplicate row')

SELECT   data    
INTO     #duplicates    
FROM     @table    
GROUP BY data    
HAVING   COUNT(*) > 1    

-- delete all rows that are duplicated   
DELETE   FROM @table    
FROM     @table o INNER JOIN #duplicates d
         ON d.data = o.data         

-- insert one row for every duplicate set    
INSERT   INTO @table(data)    
         SELECT   data    
         FROM     #duplicates 
```

我理解它在做什么，但是逻辑的最后一部分（在 --insert 为每个重复集插入一行之后）没有意义。我们有一组代码用于 --delete 所有重复的行，它消除了重复，那么最后一部分的部分是什么？

[在这里](http://www.simple-talk.com/sql/t-sql-programming/removing-duplicates-from-a-table-in-sql-server/)找到了这个查询

谢谢

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T09:31:37.513

> 我们有一组代码用于 --delete 所有重复的行，它消除了重复，那么最后一部分的部分是什么？

首先，它会删除曾经有重复的所有行。即全行，原也。在上述情况下，只有一行 ( `'not duplicate row'`) 将保留在 之后的表中`DELETE`。所有其他四行都将被删除。

然后再次使用已删除的行填充表，但现在已删除重复项。

这不是删除重复项的最佳方法。

最好的方法是：

```
WITH q AS (
          SELECT data, ROW_NUMBER() OVER (PARTITION BY data ORDER BY data) AS rn
          FROM @table
          )
DELETE
FROM      q
WHERE     rn > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T09:33:07.260

delete 调用删除*所有*匹配的记录。

因为所有重复的行都已被删除，所以最后一块重新插入了一行。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-07-10T11:47:16.020

```
Create table Test (Test1 int not null , Test2 varchar(10) null )

Insert Into Test 

Select 12, 'abc'

UNion All 

Select 13 , 'def'

Insert Into Test 

Select 12, 'abc'

UNion All 

Select 13 , 'def'

Select * From Test 

WITH t1 AS 

(SELECT ROW_NUMBER ( ) OVER ( PARTITION BY test1, test2 ORDER BY test1) 

AS RNUM FROM Test )

DELETE FROM t1 WHERE RNUM > 1 
```

# javascript - 使用 javascript 设置 maxlength

> ID：633876
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-03-11T09:34:41.607
> 
>         
> 
> 标签：javascript, html, forms

我正在尝试使用 JavaScript 动态设置输入字段的最大长度。显然这是 IE 中的一个问题，我找到了部分解决方案。

```
$("input#title").get(0).setAttribute("max_length", 25);
$("input#title").get(0).setAttribute(
                        "onkeypress", 
                        "return limitMe(event, this)");

function limitMe(evt, txt) {
    if (evt.which && evt.which == 8) return true;
    else return (txt.value.length < txt.getAttribute("max_length");
} 
```

它适用于 Firefox，但由于某种原因不适用于 IE。但是，它适用于这样设置的输入字段：

```
<input type="text" max_length="25" onkeypress="return limitMe(event, this);"/> 
```

但由于输入字段是动态创建的，我不能这样做......有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-03-11T09:45:44.017

如果您使用的是 jQuery，那么为什么不充分利用它的抽象呢？

例如

代替：

```
$("input#title").get(0).setAttribute("max_length", 25);
$("input#title").get(0).setAttribute(
                        "onkeypress", 
                        "return limitMe(event, this)");
function limitMe(evt, txt) {
    if (evt.which && evt.which == 8) return true;
    else return (txt.value.length < txt.getAttribute("max_length");
} 
```

做这个：

```
$('input#title').attr('maxLength','25').keypress(limitMe);

function limitMe(e) {
    if (e.keyCode == 8) { return true; }
    return this.value.length < $(this).attr("maxLength");
} 
```

* * *

编辑：它在 IE 中不起作用的原因可能是因为您如何通过 setAttribute 附加“onKeyPress”处理程序。- 这不是注册事件处理程序的正确方法。

* * *

## 回答 #2

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T09:39:03.860

您要查找的属性是`maxlength`，而不是`max_length`。见[这里](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)。

* * *

## 回答 #3

> 赞同：3
> 
>             
> 
> 时间：2015-01-06T10:24:53.230

IE 在 setAttribute() 上区分大小写，并且只有“maxLength”有效...

```
var el=document.createElement('input'); el.setAttribute('maxLength',25); 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T12:34:12.160

不要忘记，如果您通过 JavaScript 设置 maxlength，其他人也可以轻松地将 maxlength 更改为他们喜欢的任何值。您仍然需要验证服务器上提交的数据。

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2015-09-12T18:33:16.627

这里的所有答案都依赖于按键/粘贴事件。这是我使用该`input`事件的解决方案：

```
$('input').on('input', onInput);

var inputValue = '';

function onInput(e) {
    if(e.currentTarget.value.length > 30) {
        e.currentTarget.value = titleValue;
        return;
    }

    inputValue = e.currentTarget.value;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
>             
> 
> 时间：2013-08-20T14:20:04.607

因为我对@James 的回答有一些麻烦，所以我写了一些即使在复制粘贴内容时也有效的东西，尤其是在使用 IE8 及以下版本时。我的实现使用 jQuery 及其实时事件。

```
jQuery(function () {
    $('body').on('keydown.maxlength_fix', 'textarea[maxlength]', function (e) {
        var $this = $(this);
        window.setTimeout(function () {
            var val = $this.val();
            var maxlength = $this.attr('maxlength');
            if (val.length > maxlength) {
                $this.val(val.substr(0, maxlength));
            }
        }, 4);
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
>             
> 
> 时间：2013-08-20T14:30:53.863

我的代码还打印出书面/最大字符，忽略那部分。

```
$("[maxlength]").bind("keyup focusin", function(){
    var maxkey = $(this).attr("maxlength");
    var length = $(this).val().length;
    var value = $(this).val();
    $(this).parent().find(".counter").text(length+"/"+maxkey);
    if (length > maxkey) $(this).val(value.substring(0, maxkey));
}).bind("focusout", function(){$(this).parent().find(".counter").text("")}); 
```

# asp.net - 从 ASP.NET 项目的发布版本中排除页面

> ID：633879
> 
>         
> 
> 赞同：7
> 
>         
> 
> 时间：2009-03-11T09:37:04.380
> 
>         
> 
> 标签：asp.net, visual-studio, visual-studio-2008, release, release-management

我正在使用“Inspector.aspx”在我的调试版本中进行一些测试。在发布版本中（更重要的是在创建安装程序时），我从项目中手动排除页面（及其相关的 C# 文件）。

有没有办法自动排除 ASP.NET 项目中选定解决方案配置中的文件？

C++ 项目可以控制每个配置的每个文件的排除/包含

* * *

## 回答 #1

> 赞同：13
> 
>             
> 
> 时间：2009-03-13T16:04:47.320

一种选择是编辑您的 msbuild (*.csproj) 文件，以根据解决方案配置（即调试、发布等）有条件地排除某些文件。例如：

```
<Compile 
    Exclude="inspector.aspx" 
    Condition="'$(Configuration)' == 'Release'" /> 
```

同样，您可以定义一个 ItemGroup 仅包含要包含在 Debug 构建中的文件：

```
<ItemGroup Condition="'$(Configuration)' == 'Debug'">
    <Compile Include="inspector.aspx" />
    <Compile Include="...other files..." />
</ItemGroup> 
```

# c++ - 计算排序字符串的算法（自制“uniq -c”）

> ID：633881
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T09:38:10.040
> 
>         
> 
> 标签：c++, algorithm, unix, string, counting

我有以下排序数据：

```
AAA
AAA
TCG
TTT
TTT
TTT 
```

我想计算每个字符串的出现次数：

```
AAA 2
TCG 1
TTT 3 
```

我知道我可以使用 来做到这一点`uniq -c`，但在这里我需要对我拥有的整个 C++ 代码进行额外处理。

我坚持这个结构（根据'pgras'建议修改）：

```
#include <iostream>
#include <vector>
#include <fstream>
#include <sstream>
using namespace std;

int main  ( int arg_count, char *arg_vec[] ) {
    if (arg_count !=2 ) {
        cerr << "expected one argument" << endl;
        return EXIT_FAILURE;
    }

    string line;
    ifstream myfile (arg_vec[1]);

    if (myfile.is_open())
    {
        int count;
        string lastTag = "";

        while (getline(myfile,line) )
        {
            stringstream ss(line);
            string Tag;

            ss >> Tag; // read first column
            //cout << Tag << endl; 

            if (Tag != lastTag) {
               lastTag = Tag;
               count = 0;
            }
            else {
                count++;
            }

             cout << lastTag << " " << count << endl;
        }
        cout << lastTag << " " << count << endl;
        myfile.close();

    }
    else {cout << "Unable to open file";}
    return 0;
} 
```

它打印出这个错误的结果：

```
AAA 0
AAA 1
TCT 0
TTT 0
TTT 1
TTT 2
TTT 2 
```

* * *

## 回答 #1

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T09:48:58.437

如果你只是想打印出来，你的算法是可以的。如果你想将它传递给另一个函数，你可以使用例如 STL 映射。

```
map<string, int> dict;

while(getline(myfile,line)) {
          string Tag;
          stringstream ss(line);
          ss >> Tag;
          if (dict.count(Tag) == 0) 
               dict[Tag] = 1;
           else
               dict[Tag]++;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T09:49:33.117

当标签与 lastTag 不同时，您必须重置计数器，如果相同则增加...当标签不同时，您可以使用其关联的计数值处理前一个标签（在重置计数之前）...

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T10:25:48.850

使用这样的东西：

```
#include <iostream>
#include <fstream>
#include <string>
#include <algorithm>
#include <map>
#include <iterator>

std::ostream& operator << ( std::ostream& out, const std::pair< std::string, size_t >& rhs )
{
    out << rhs.first << ", " << rhs.second;
    return out;
}

int main() 
{
    std::ifstream inp( "mysorted_data.txt" );
    std::string str;
    std::map < std::string, size_t > words_count;
    while ( inp >> str )
    {
        words_count[str]++;
    }

    std::copy( 
        words_count.begin(), 
        words_count.end(), 
        std::ostream_iterator< std::pair< std::string, size_t > >( std::cout, "\n" ) );

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T10:33:50.903

假设您的数据确实包含长度为 3 的 DNA 字符串（或更一般的长度*N*，其中*N*非常小），您可以通过使用 q-gram 表来提高效率，该表是表大小为 4 的专用哈希表^(*N*)和以下散列函数：

```
// Disregard error codes.
int char2dna_lookup[] = {
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x0  – 0xF
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x10 – 0x1F
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x20 – 0x2F
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x30 – 0x3F
    0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, // A    – P
    0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // Q    – 0x5F
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x60 – 0x6F
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0x70 – 0x7F
}

unsigned int hash(string const& dna) {
    unsigned int ret = 0;

    for (unsigned int i = 0; i < dna.length(); ++i)
        ret = ret * 4 + char2dna_lookup[dna[i]];

    return ret;
} 
```

您现在可以非常有效地索引您的数组。

```
ifstream ifs("data.txt");
string line;

if (not ifs >> line)
    exit(1);

unsigned* frequencies = new unsigned int[line.length()];

frequencies[hash(line)] = 1;

while (ifs >> line)
    ++frequencies[hash(line)];

// Print the frequencies …

delete[] frequencies; 
```

或者，为此类任务使用诸如[SeqAn 之类的库。](http://www.seqan.de)

* * *

## 回答 #5

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T16:23:12.280

我认为你所要做的就是替换这个

```
 if (Tag != lastTag) {
           lastTag = Tag;
           count = 0;
        }
        else {
            count++;
        }

        cout << lastTag << " " << count << endl; 
```

有了这个：

```
 if (Tag != lastTag) {
            if (lastTag != "") {  // don't print initial empty tag
                cout << lastTag << " " << count << endl;
            }
            lastTag = Tag;
            count = 1; // count current
          } else {
            count++;
        } 
```

* * *

## 回答 #6

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:41:13.730

您的代码在语法上看起来有些损坏（`ifstream`...），但我认为整体算法是合理的。读取行，并在每次该行与之前的行相同时增加一个计数器。可能需要考虑一些边界条件（如果输入只有一行怎么办？），但您会在测试期间发现这些条件。

* * *

## 回答 #7

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:43:58.683

使用 stringstream 来获取标签似乎有点矫枉过正——我可能会使用 string::substr。除此之外，您认为您的代码有什么问题？你想改进什么？

**编辑：**接下来，我们将因呼吸而被否决……

* * *

## 回答 #8

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T18:52:25.183

```
#include <map>
#include <string>
#include <algorithm>
#include <iterator>
#include <iostream>

class Counter
{   private: std::map<std::string,int>&   m_count;
    public:  Counter(std::map<std::string,int>& data) :m_count(data){}
        void operator()(std::string const& word)
        {
            m_count[word]++;
        }};
class Printer
{   private: std::ostream& m_out;
    public:  Printer(std::ostream& out) :m_out(out) {}
        void operator()(std::map<std::string,int>::value_type const& data)
        {
            m_out << data.first << " = " << data.second << "\n";
        }};

int main()
{
    std::map<std::string,int>       count;

    for_each(std::istream_iterator<std::string>(std::cin),
             std::istream_iterator<std::string>(),
             Counter(count)
            );

    for_each(count.begin(),count.end(),
             Printer(std::cout)
            );
} 
```

# fluent-nhibernate - 如何在 Fluent NHibernate ClassMap 类中指定表名？

> ID：633888
> 
>         
> 
> 赞同：34
> 
>         
> 
> 时间：2009-03-11T09:42:54.817
> 
>         
> 
> 标签：fluent-nhibernate

我是 NHibernate 的新手并尝试使用 Fluent 进行映射。我的实体类名称与它必须映射到的数据库表名称不同。我正在使用从 派生的映射类`ClassMap<>`，但我无法指定表名：属性`TableName`from`ClassMap`是只读的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：45
> 
>             
> 
> 时间：2009-03-11T09:55:00.217

改为使用`Table("table_name")`。

* * *

## 回答 #2

> 赞同：6
> 
>             
> 
> 时间：2011-02-24T00:21:09.437

它像这样工作吗？

```
public class UserAccountMap : ClassMap<UserAccount> {
    public UserAccountMap() {
        Table("User");
        Id(x => x.UserID, "UserID").GeneratedBy.Identity();
        Map(x => x.FirstName, "FirstName").Length(50)
            .Not.Nullable();
        Map(x => x.LastName, "LastName").Length(50)
            .Not.Nullable();
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
>             
> 
> 时间：2011-10-18T15:05:37.963

上面的例子引导我朝着正确的方向前进。这对我有用。我的班级名称是“Party”，我的表名是“prty.Party”。

```
public class PartyMap : ClassMap<Party>
{
    public PartyMap()
    {
     Table("prty.Party");
     Id(x => x.PartyID);
     Map(x => x.PartyTypeLID);
     Map(x => x.OrganizationTypeLID);
     Map(x => x.PreferredContactMethodLID);
     Map(x => x.PrimaryLanguageLID);
     Map(x => x.PartyVID);
     Map(x => x.BeginDate);
     Map(x => x.EndDate);
     Map(x => x.RowDescriptor);
     Map(x => x.RowModifiedDate);
     Map(x => x.RowModifiedBy);
     Map(x => x.RowCreatedDate);
     Map(x => x.RowCreatedBy);
    }        
} 
```

# php - 使用 PHP 登录页面

> ID：633890
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T09:44:21.617
> 
>         
> 
> 标签：php, authentication

我有一个 PHP 引擎登录页面，我想使用另一个 PHP 文件登录，而无需在该页面上实际输入详细信息，因此我应该能够运行 PHP 文件并登录到我服务器上的另一个登录页面

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:54:47.287

只需让您的其他 PHP 文件将所需的登录凭据发布到您的登录页面的操作 url

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T09:59:53.293

我很困惑，我不知道我是否真的理解你的问题！但如果是这种情况，只需通过 post 方法发送登录表单的详细信息。在另一个页面中，您只需检查登录名和密码是否正确并为该用户启动会话！

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T09:54:46.537

如果是 HTTP 身份验证，请使用带有选项的[cURL](http://www.php.net/manual/en/book.curl.php)`CURLOPT_HTTPAUTH`和`CURLOPT_USERPWD` 

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:17:39.087

> 无需我在该页面上实际输入详细信息

听起来像 XSRF :P

只需使用完全相同的表单操作、方法和输入名称复制登录页面，并将其命名为您想要的任何名称并将其托管在您的服务器上。这能回答问题吗？

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:28:08.110

假设这个 php 登录页面是同一个站点的一部分，那么它不应该只是从其他 php 文件设置所需的会话变量/cookie 的情况吗？这对我来说似乎很简单。

（请注意，上面假设您的其他 php 文件具有某种登录过程 - 如果没有，则只需将 post 操作设置为 php 登录页面的 url）。

# unshelve - TFS：可以将搁置集恢复到另一个位置吗？

> ID：633891
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T09:45:03.830
> 
>         
> 
> 标签：unshelve, shelveset

我有以下情况：

用户搁置了一些更改。时间流逝，一个新的产品分支诞生了。稍后，确定搁置集中包含我们将在新分支中需要的代码。

默认情况下; Visual Studio 只能将搁置集更改还原到搁置它们的位置。是否可以在新分支中恢复我的搁置集？我不希望将代码签入原始分支，因为它会破坏内容。

* * *

## 回答 #1

> 赞同：16
> 
>             
> 
> 时间：2009-03-25T19:24:18.857

可以使用 TFS 电动工具。

请参阅： 
[我可以取消搁置到 tfs 2008 中的不同分支吗？](https://stackoverflow.com/questions/117337/can-i-unshelve-to-a-different-branch-in-tfs-2008)

注意“迁移”选项。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-02-07T17:21:17.193

这是有关此命令的概述
[Unshelve 命令基础](http://codereferences.blogspot.com/2012/02/migrating-shelveset-from-one-branch-to.html)

从文章中，一个例子：

```
tfpt unshelve "demo_shelveset";rkandhal /migrate /source:"$/Code-branch-1" /target:"$Code-branch-2/" 
```

# asp.net - 日历扩展器

> ID：633896
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:46:22.407
> 
>         
> 
> 标签：asp.net, sql

我在asp.net中使用calendarextender控件。它只显示日期，不显示时间。但是在插入数据库时​​，时间会自动插入。但是在使用日期条件从数据库中检索数据时，没有相应的记录显示。什么修改我可以做存储过程来解决这个问题。

我在存储过程中使用了以下代码。表的名称是 FileM

```
Select * from FileM Where OldDate = '@OldDate%' 
```

数据库中的 OldDate 字段存储为日期时间，即日期是我插入的日期，但时间在其中一个`08:00:00:000`或中`00:00:00:000`。因此，上面的查询给出了日期的记录，该日期与时间相同`00:00:00:000`，但不与`08:00:00:000`

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:24:07.993

```
-- assumes that the @OldDate parameter is a DATETIME
SELECT *
FROM FileM
WHERE DATEDIFF(day, OldDate, @OldDate) = 0 
```

如果您能够修改存储过程，那么您可以通过传递两个`DATETIME`参数来获得更大的灵活性和性能，指定您需要的范围的开始和结束时间：

```
CREATE PROCEDURE dbo.GetRangeOfRecords
@StartDateTime DATETIME,
@EndDateTime DATETIME
AS
SELECT *
FROM FileM
WHERE OldDate BETWEEN @StartDateTime AND @EndDateTime 
```

然后像这样调用您的存储过程，例如：

```
EXEC dbo.GetRangeOfRecords
    @StartDateTime = '2009-02-25 00:00:00.000',
    @EndDateTime = '2009-02-25 23:59:59.999' 
```

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:46:09.220

以下代码将删除您的日期时间值的时间部分（通过删除我的意思是使其成为 00:00:00 即午夜）： -

dateadd(d,datediff(d,0,MyDateTimeColumn),0)

所以你可以使用： -

从 FileM 中选择 * 其中 dateadd(d,datediff(d,0,OldDate),0) = @OldDate

或者，如果您使用的是 SQL Server 2008，则有一个[新的日期数据类型](http://msdn.microsoft.com/en-us/library/ms186724.aspx)（没有时间组件）。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T11:37:59.580

只要您的任何日期都没有明确给出时间组件，它们都应该默认为 00:00:00.000。在这种情况下，一个简单的相等比较就可以了。但是，在您的代码中，您在参数周围加上引号，这意味着您现在将日期与“@OldDate%”的文字字符串进行比较。删除引号，看看是否有帮助。

我喜欢 Luke 对灵活性的回答，但如果您没有该选项并且只能更正现有的存储过程，也许这会有所帮助。

# c# - ASP.NET/UserControls：如何将“控制器”与“视图”分开？

> ID：633902
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:48:33.680
> 
>         
> 
> 标签：c#, asp.net

是否可以将用户控件的 ascx（“视图”）和 ascx.cs（“控制器”）pars 分开。我想将控制器部分移动到 App_Code 以在项目之间更改视图部分时重新使用？

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:08:34.787

是的，在扩展 UserControl 的某个服务类中编写代码隐藏，并在您的 .ascx 文件中继承该类

```
<%@ Control
Language           = "C#"
Inherits           = "Project.Business.Service.MyControl"
%> 
```

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:14:59.873

在常规的 ASP.NET 中，即使您将代码隐藏和 ascx 分开 - 它们仍然是紧密耦合的。它不是真正的“控制器”（与视图分开）。

如果您想要这种纯度，请考虑使用 ASP.NET MVC，它（显然）以不同的方式解决了这个问题。

# asp.net - Linq 返回匿名类型列表

> ID：633908
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T09:52:32.750
> 
>         
> 
> 标签：asp.net, vb.net, linq, linq-to-sql, anonymous-types

Caan somone 建议我尝试实现的最佳方法（linq 到 sql，返回要在网格/列表中显示的数据列表等）......它抱怨匿名类型转换，以及我正在阅读的内容，这不是优雅的做法。

```
 Public Function GetHistory(ByVal historyId As Integer) As List(Of ?????????)
    Using dc As New myDataContext(Application.GetConnection)
      Return (From t In dc.ActionTypes, a In t.MyTable Where a.HistoryID = historyId Select a.ActionOn, a.ActionBy, t.Description, a.ImpactedItem, a.ActionDescription).ToList
    End Using
  End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
>             
> 
> 时间：2009-03-11T09:58:54.217

问题是匿名类型没有可用作函数返回值的编译时类型，所以 ???? 在您的 List(Of ????) 中，编译器无法知道。

由于您将它绑定到 UI 元素，因此最好的办法可能是将返回值设为 IEnumerable 或 IList。您应该能够将您的控件绑定到该控件（因为绑定在幕后使用反射）。

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T09:57:34.440

匿名类型不能离开函数的范围。所以你想要做的事情是不可能的。您必须创建一个可以使用返回类型的类型（结构或类）。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2009-06-04T03:07:40.013

请参阅[http://blogs.msdn.com/swiss_dpe_team/archive/2008/01/25/using-your-own-defined-type-in​​-a-linq-query-expression.aspx](http://blogs.msdn.com/swiss_dpe_team/archive/2008/01/25/using-your-own-defined-type-in-a-linq-query-expression.aspx)

定义您自己的数据类对象，例如*MyClass*，其属性*为 ActionOn、ActionBy、Description、ImpactedItem、ActionDescription*。

然后使用：

```
Public Function GetHistory(ByVal historyId As Integer) As List(Of MyClass)
    Using dc As New myDataContext(Application.GetConnection)
        Return ( _
            From t In dc.ActionTypes, a In t.MyTable _
            Where a.HistoryID = historyId _
            Select New MyClass _
            With {.ActionOn=a.ActionOn, .ActionBy=a.ActionBy, ...} _
        ).ToList
    End Using
End Function 
```

* * *

## 回答 #4

> 赞同：2
> 
>             
> 
> 时间：2012-10-09T18:08:46.027

您可以使用 te linq 函数 CAST，然后将列表转换为 Object 并返回 Object 的 Enumerable。

```
Public Function GetHistory(ByVal historyId As Integer) As  List(Of Object)

    Using dc As New myDataContext(Application.GetConnection)

  Return (From t In dc.ActionTypes, a In t.MyTable Where _
          a.HistoryID = historyId Select a.ActionOn, a.ActionBy, _
          t.Description, a.ImpactedItem, a.ActionDescription) _
          .Cast(Of Object).ToList()

    End Using

End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:08:15.380

如果该类是唯一将使用结果的类（尽管这似乎不太可能，因为您创建了 function `Public`），您可以创建一个嵌套类/结构来保存结果。否则，您想要做的事情是不可能的：匿名类型可能只有[方法范围](http://msdn.microsoft.com/en-us/library/bb397696.aspx)。

# asp.net - ASP.Net 中的 SQL Server FTS 超时错误，应用程序空闲一段时间后

> ID：633913
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:54:42.713
> 
>         
> 
> 标签：asp.net, sql-server, full-text-search

我们有一个页面调用内部使用 SQL Server 2005 FTS 的搜索存储过程。如果应用程序保持空闲 10-15 分钟，则对存储过程的第一次后续调用将超时。所有后续调用都有效。

有什么办法可以防止这种情况发生吗？我们不希望第一个用户超时，也不希望更改我们的代码。

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-07-25T18:56:45.940

我有一个类似的问题，fts 超时是相似的，其余的是不同的（我没有使用存储过程或网页），我认为这并不重要。当天的第一个搜索查询将因超时错误而失败，然后后续查询将成功。

我今天在 reddit 上偶然发现了这个链接：http: [//support.microsoft.com/](http://support.microsoft.com/?scid=kb%3Ben-us%3B915850&x=15&y=8) ?scid=kb%3Ben-us%3B915850&x=15&y=8 。

基本上，如果您的 SQL Server 无法访问 Internet，您可能会遇到超时。运行在该链接上找到的命令（如下）完全解决了我的问题。

sp_fulltext_service'verify_signature'，0；去

在决定在服务器上执行此操作之前，您需要阅读完整的文章。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:06:37.833

如果在数据库服务器上运行的存储过程知道您的 Web 应用程序的空闲时间，我会感到惊讶。奇怪的事情发生了（虽然不是最近）。

我建议你“在原始”中测试这个。在 SSMS 中，运行存储过程，等待 15 分钟，然后再次运行。查看 SP 是否失败。

其他问题是：您是否正确调用了 SqlConnection 上的 Dispose？你在使用模拟吗？您的连接字符串是否已更改为解决连接池？SP是如何使用的？填充数据集？数据源控制？如果是后者，是否启用了缓存？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-12T10:11:59.327

如果数据库的全文目录在一段时间内未使用（在我们的例子中为 10-15 分钟），SQL Server 似乎会卸载它。

唯一可能的解决方案是：

1\. 运行预热作业以确保索引不会从内存中转储。可以在 SQL 或 ASP.Net 上完成。

2\. 将调用全文搜索存储过程的方法的超时设置为更高的值。

# wpf - 调整 WPF 列表或网格中的字体大小以正确使用空间

> ID：633919
> 
>         
> 
> 赞同：5
> 
>         
> 
> 时间：2009-03-11T09:55:53.897
> 
>         
> 
> 标签：wpf, listview, datagrid, listbox

我有一个应用程序显示体育联赛的联赛表。这些表格基本上是网格，不同的列代表每支球队的统计数据，例如比赛、获胜、失败、进球和进球等。因此，联赛表有一个有趣的属性：对于给定的比赛，我们总是有相同的数量行数（代表团队）。由于 WPF 控件是无外观的，因此我可以直接使用 ListBox、ListView、ItemsControl，甚至是 DataGrid。应该没那么重要。

但是，我想要一些我还没有实现的东西：给定表格大小（实际上是窗口大小），所有团队都应该始终可见（没有垂直滚动），所有统计数据列（如由用户选择）应该是可见的，并且字体大小应该反映这一点，以便它尽可能大，而没有任何列变得太大而无法容纳内容。

我可以轻松地使用 UniformGrid 来实现非垂直滚动部分。但是，调整字体大小似乎并不那么容易。

当然还有 ViewBox，它可以让每个表格单元格的内容单独调整到尽可能大的大小，但这可能会导致丑陋，因为你最终会得到一堆大小不一的单元格。

我不希望得到一个简单的答案，但如果可能的话，我很想听听。总之：

1.  表格应随窗口调整大小，同时始终显示没有滚动条的所有数据。

2.  字体大小应设置为允许每一行的每一列显示其所有内容的最大可能大小。

3.  所有列的大小都应为允许所有内容可见的最小可能大小，除了一列执行“*-sizing”以占用剩余空间。

所以..有什么聪明的方法可以做到这一点吗？:)

* * *

## 回答 #1

> 赞同：7
> 
>             
> 
> 时间：2009-03-12T00:15:34.860

它是否适用于您需要使窗口的子元素成为 ViewBox 并将所有内容放入其中？我不确定你正在做的细节是否会导致这不起作用，但这是我建议的一个非常简单的例子：

```
<Window x:Class="ZoomTest.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1">
    <Viewbox>
        <StackPanel>
            <TextBlock>2</TextBlock>
            <TextBlock>Getting longer</TextBlock>
            <TextBlock>Here is some really long text...</TextBlock>
        </StackPanel>
    </Viewbox>
</Window> 
```

整个内容始终可见，并具有最大可能的字体大小。所有文本均按比例缩放。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T15:45:36.287

你可能可以用字体大小做这样的事情。将 FontSize 设置为绑定表达式，该表达式使用自定义 IValueConverter （`{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource FontSizeConverter}}`或类似的东西）绑定到 TextBox 本身。

在转换器内部，您现在有了对 TextBox 的引用，您可以使用它来获取文本内容、控件的大小、父控件（网格）的大小等。您可以使用此信息来即时计算。

如果您需要文本框根据彼此做出此决定，您可以在从 Convert 方法中调用的页面级别进行静态回调，该回调将确定您是否仍处于调整大小模式并跟踪任何其他信息（已计算的最小或最大字体大小等）。这是一个复杂的过程，但应该有几种方法可以做到这一点。您甚至可以首先隐藏所有框中的文本，遍历所有文本框以做出这种决定（最小字体大小），然后以编程方式设置字体大小并将它们淡入视图。

# ios - UISegmentedControl 行为

> ID：633924
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T09:58:54.060
> 
>         
> 
> 标签：ios, objective-c, iphone, uikit, uisegmentedcontrol

关于 iPhone 上的 UISegmentedControl 类的快速问题。

希望有些人可能已经注意到，在默认状态下有 2 个段，即使用户点击当前选定的段，分段控件仍然会切换。

我在应用程序中看到了 UISegmentedControls 否定该行为并且在用户按下选定的段时不切换。即，Apple 的 iTune Store 应用程序。

有没有一种简单的方法可以防止我忽略的这种行为，或者我是否需要在 valueChanged 中写入一些逻辑？

我一直在尝试禁用当前选定的段并启用未选定的段，但是当我不希望它这样做时，这似乎会改变控件的外观。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
>             
> 
> 时间：2009-03-11T23:23:16.890

查看**UISegmentedControl.h**头文件（一种简单的方法是在 XCode 中双击“UISegmentedControl”并按住 Command）。

在那里，您将看到**_segmentedControlFlags**结构中的许多项目。如果您在 UISegmentedControl 上创建一个类别，则可以操作其中的任何元素 - 包括**dontAlwaysToggleForTwoSegments**，您可能从名称中猜到这就是您要查找的内容。

由于这已记录在 API 标头中（尽管不在实际文档中），因此使用起来应该很安全。

* * *

## 回答 #2

> 赞同：4
> 
>             
> 
> 时间：2009-04-18T02:20:54.997

此默认行为已在 3.0 API 中更改。

* * *

## 回答 #3

> 赞同：4
> 
>             
> 
> 时间：2009-07-20T20:59:29.530

在 3.0 中，“ **_segmentedControlFlags** ”已更改为“ **momentary** ”属性，仍然可以在**UISegmentedControl.h**头文件中找到。

* * *

## 回答 #4

> 赞同：1
> 
>             
> 
> 时间：2009-12-09T03:14:35.367

通过类别访问 _segmentedControlFlags 被认为是使用私有 API，因此违反了 Apple 的许可协议，正如我今天必须学习的那样。到现在为止，我认为，类别是一种语言功能，可以修复别人糟糕的类设计......

# xml - 重置 StringReader 的位置

> ID：633928
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T09:59:48.787
> 
>         
> 
> 标签：xml, .net

```
 StringReader rdr = new StringReader(finalXML);

 //Reader is a property which returns XmlTextReader
 Reader = new XmlTextReader(rdr); 
 XmlReader reader = XmlReader.Create(rdr, settings); 
```

最后一行抛出一个异常，因为根元素丢失，因为它位于流的末尾。

`_pos`value 表明当我之前将它分配给第 2 行的属性时，它已经读取了所有字符。

有人知道如何重置 StringReader 吗？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T10:17:32.363

本质上，你没有。只需创建一个新的...“阅读器”通常是单向的。**在某些方面，拥有一个消耗**阅读器的可设置“阅读器”属性是令人困惑的。也许有一个`Read(...)`or`Load(...)`方法？很明显，它有副作用......

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2011-07-28T14:27:05.417

作为最佳实践，您应该使用使用工厂模式而不是构造函数“new XmlTextReader(...)”的静态 XmlReader.Create() 方法

# biztalk - Biztalk 2004 消息备份

> ID：633933
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T10:04:56.793
> 
>         
> 
> 标签：biztalk

我有一个从 FTP 服务器接收消息的 Biztalk 2004 编排。消息通过管道接收，该管道立即更改消息，更改其原始形式并将其拆分为子消息。我想在 Biztalk 对其进行任何更改之前备份原始消息。

一旦编排更改了消息，我可以再次将其更改回来并将其发布回编排之外。但这似乎需要做很多工作。我希望 Biztalk 做的是在进行任何编排处理之前备份原始消息并将其存储在服务器上的其他位置。有没有（合理）简单的方法让 Biztalk 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-12T08:52:32.917

好吧，DTA 跟踪的问题不仅在于数据的临时性，而且还不是最有效的解决方案。在管道中归档组件是正确的方法，尽管我会说，在查看了其中一种实现之后 - 它可以很容易地变得更有效率 - 所以如果你环顾四周，看看是否有一个它是否以流媒体方式工作。

通过“流式传输方式”，我的意思是不将整个消息加载到内存中（例如加载到 XmlDocument），而是实现自定义流并处理 Read 事件。

此外，您还必须考虑是否可以将自己限制为 Xml 消息（如果组件确实使用 XmlDocument，就像我所看到的那样），以及您是否期望多部分消息（您需要确保归档所有部分，并以某种方式将它们分组到文件系统/数据库中）

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T11:31:03.590

您应该能够在端口实际进行任何转换之前打开邮件的 DTA 跟踪（您可以选择在端口之前和之后进行 DTA 跟踪）。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T19:55:54.080

存储在 DTA 中通常不是一个非常容易访问的选项。通常，跟踪数据库只会将数据保留一段有限的时间，然后再将其删除或以封闭格式存档在文件存储中。我在社区中看到过很多管道组件归档器的实例。看看[这里](http://blogs.msdn.com/gzunino/archive/2004/09/17/231022.aspx)。

# c# - 从属性设置器抛出什么异常？

> ID：633944
> 
>         
> 
> 赞同：54
> 
>         
> 
> 时间：2009-03-11T10:09:20.510
> 
>         
> 
> 标签：c#, validation, exception, properties

我有一个具有最大长度要求的字符串属性，因为数据链接到数据库。如果调用者试图设置一个超过这个长度的字符串，我应该抛出什么异常？

例如，这个 C# 代码：

```
public string MyProperty
{
    get
    {
        return _MyBackingField;
    }
    set
    {
        if (value.Length > 100)
            throw new FooException("MyProperty has a maximum length of 100.");

        _MyBackingField = value;
    }
} 
```

我考虑过`ArgumentException`，但它似乎并不正确。*从技术上讲*，它是一个函数——`MyProperty_set(string value)`所以可以为 for 做一个例子`ArgumentException`，但在消费者眼中它并没有被调用为函数——它位于赋值运算符的右侧。

这个问题可能也可以扩展到包括在属性设置器中完成的各种数据验证，但我对上述情况特别感兴趣。

* * *

## 回答 #1

> 赞同：50
> 
>             
> 
> 时间：2009-03-11T10:19:41.750

使用 Reflector 查看 mscorlib.dll，在 System.String.StringBuilder.Capacity 等类似情况下，Microsoft 使用 ArgumentOutOfRangeException() 类似于：

```
public int PropertyA
{
    get
    {
        return //etc...
    }
    set
    {
        if (condition == true)
        {
            throw new ArgumentOutOfRangeException("value", "/* etc... */");
        }
        // ... etc
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
>             
> 
> 时间：2009-03-11T10:19:50.953

对我来说 ArgumentException （或孩子）更有意义，因为您提供的参数（值）无效，这就是 ArgumentException 的创建目的。

* * *

## 回答 #3

> 赞同：10
> 
>             
> 
> 时间：2009-03-11T10:43:31.457

我根本不会抛出异常。相反，我会允许一个任意长度的字符串，然后在保存之前调用的类上有一个单独的“验证”方法。有许多场景，特别是如果您使用数据绑定，从属性设置器抛出异常可能会让您陷入混乱。

从属性设置器抛出异常的麻烦在于程序员忘记捕获它们。这有点取决于您期望获得的数据有多干净。在这种情况下，我希望长字符串长度很常见而不是例外，因此使用异常将是“带有异常的流控制”。

引用微软[开发类库的设计指南](http://msdn.microsoft.com/en-us/library/ms229030.aspx)：

> 如果可能，不要将异常用于正常的控制流。除了系统故障和具有潜在竞争条件的操作外，框架设计者应该设计 API，以便用户可以编写不抛出异常的代码。例如，您可以提供一种在调用成员之前检查先决条件的方法，以便用户可以编写不会引发异常的代码。

* * *

## 回答 #4

> 赞同：6
> 
>             
> 
> 时间：2009-03-11T10:50:47.323

还记得有多少计算机科学问题是通过增加额外的间接层级来解决的吗？

一种方法是创建一个新类型，FixedLengthString，比如说。它将是*该*类型的实例来验证它们初始化的字符串的长度 - 使用转换运算符从纯字符串进行类型转换。如果您的属性设置器将此类类型作为其参数，那么任何违规都将成为类型转换异常，而不是参数/属性异常。

在实践中，我很少这样做。OO 有点过头了——但在某些情况下，它可能是一种有用的技术，所以为了完整起见，我在这里提到它。

* * *

## 回答 #5

> 赞同：5
> 
>             
> 
> 时间：2010-02-19T06:30:10.413

```
public IPAddress Address
{
    get
    {
        return address;
    }
    set
    {
        if(value == null)
        {
            throw new ArgumentNullException("value");
        }
        address = value;
    }
} 
```

通过[MSDN](http://msdn.microsoft.com/en-us/library/ms229007.aspx)

* * *

## 回答 #6

> 赞同：-1
> 
>             
> 
> 时间：2009-03-11T10:11:19.633

您可以使用 InvalidOperationException。那是一种妥协。我也不会费心使用 ArgumentException。

* * *

## 回答 #7

> 赞同：-3
> 
>             
> 
> 时间：2009-03-11T10:55:46.373

尽可能尝试使用现有的异常。在这种情况下，请使用 InvalidOperationException，因为传入的值会使对象处于不一致的状态。当需要对自定义异常进行特定处理时，可以创建自定义异常。在这种情况下，您只会抛出带有一些文本的异常，因此请使用 InvalidOperationException。

抛出 InvalidOperationException 时，显示已传递给此设置器的值。

# windows - TRACE 和 TRACE0、TRACE1 和 TRACE2 变体

> ID：633946
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T10:11:15.793
> 
>         
> 
> 标签：windows, mfc

可以将 TRACE 宏用作 printf like function (variable argument list) 。如果它支持这个工具，那么为什么必须有 TRACE0、TRACE1 和 TRACE2 宏，除非它们对参数数量施加限制。同样，我想知道限制 TRACE 宏的参数数量是否有任何优势。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:46:07.037

没有*必要*拥有其他跟踪变体（trace1、trace2 等），但这确实意味着您不必担心检查是否有正确数量的参数与格式语句一起使用（对于跟踪宏）。

看看这些宏的宏定义：这是一本很好的读物！

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T12:49:10.517

如果我没记错的话，MFC 4 没有可变参数 TRACE 语句。这是在以后的版本中添加的。旧式的 TRACEn 宏可能是为了向后兼容。

# asp.net - Request.ServerVariables("SCRIPT_NAME") 不返回任何东西

> ID：633948
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T10:11:35.217
> 
>         
> 
> 标签：asp.net, vb.net

[从这个链接](https://stackoverflow.com/questions/630548/sitemap-behaviour)分支似乎`Request.ServerVariables("SCRIPT_NAME")`没有返回任何东西。我刚刚设置了一个简单的循环来查看是否有任何结果，但没有运气。有任何想法吗？

```
For Each s As String In Request.ServerVariables
   Label1.Text += s
Next 
```

`ServerVariables`以 key->value 形式返回一个字符串列表，如`System.Collections.Specialized.NameValueCollection`

**编辑：**使用母版页从页面获取 ServerVariables 似乎是一个问题。在我的模型后面的代码中，我定义了以下内容：

```
Public Partial Class Test
    Inherits System.Web.UI.Page

  Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Response.Write(Context.Request.ServerVariables("SCRIPT_NAME"))
  End Sub
End Class 
```

这行不通，很简单。但是，如果我在 .aspx 页面内的事件中输入代码，请`Page_Load`执行以下操作：

```
<% Response.Write(Context.Request.ServerVariables("SCRIPT_NAME")) %> 
```

然后它工作正常。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T12:09:13.967

你确定你不拿回这个吗？

Using Response.Write from the code behind (either in the page or the master page) will output the string at the top of the page (usually), before the rest of the HTML, etc, which is probably not where you're expecting to see it.

I put a literal control on a master page, **before** the content placeholder:

```
On Master: <asp:Literal id="LiteralMaster" runat="server"></asp:Literal> 
```

And then setting it's Text property in the master page's Page_Load event to:

```
LiteralMaster.Text = Context.Request.ServerVariables("SCRIPT_NAME") 
```

I also added a literal control in the content placeholder on a page that used this master page:

```
On page: <asp:Literal id="LiteralPage" runat="server"></asp:Literal> 
```

And in the page's Page_Load event I had the following:

```
LiteralPage.Text = Context.Request.ServerVariables("SCRIPT_NAME") 
```

Which resulted in:

> On Master: /LittleTest/UsingMaster.aspx
> 
>   On page: /LittleTest/UsingMaster.aspx

Modifying my page's Page_Load event to become:

```
LiteralPage.Text = Context.Request.ServerVariables("SCRIPT_NAME")
Response.Write("From response.write: " &
  Context.Request.ServerVariables("Script_Name")) 
```

Resulted in the following display in my browser:

> From response.write: /LittleTest/UsingMaster.aspx
> 
>   On Master: /LittleTest/UsingMaster.aspx
> 
>   On page: /LittleTest/UsingMaster.aspx

However, the html looked more like:

```
From response.write:/LittleTest/UsingMaster.aspx

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
  </head>
  <body>
    <form name="aspnetForm" 
      method="post" action="UsingMaster.aspx" id="aspnetForm">
      <div>
        On Master: /LittleTest/UsingMaster.aspx
        <br />
        On page: /LittleTest/UsingMaster.aspx
      </div>
    </form>
  </body>
</html> 
```

**Edit to respond to comment**

You are assigning the string representation of a NameValueCollection element to the contents of your label, this is just the NAME, not the combination of the NAME and the VALUE

Try the following:

```
For Each s As String In Request.ServerVariables
  Label1.Text += s & ": " & Request.ServerVariables(s)
Next 
```

For more info, take a look at the MSDN docs:

> [HttpRequest.ServerVariables](http://msdn.microsoft.com/en-us/library/system.web.httprequest.servervariables.aspx)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:27:05.617

[http://msdn.microsoft.com/en-us/library/ms524602.aspx](http://msdn.microsoft.com/en-us/library/ms524602.aspx)上的定义说“正在执行的脚本的虚拟路径，例如“/vdir/default.asp”。这用于自我- 引用 URL。”。我认为“.asp”部分可能暗示了为什么这不适用于 ASP.NET。

我建议不要使用 Request.ServerVariables。任何为经典 ASP 或 ISAPI 使用而创建的东西都会让您感到紧张。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:40:05.787

如果您尝试返回脚本名称，请尝试：

```
Request.CurrentExecutionFilePath 
```

如果您只想要没有路径的脚本名称，您可以使用：

```
Path.GetFileName(Request.CurrentExecutionFilePath) 
```

*Path.GetFileName() 需要 System.IO 命名空间*

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:53:27.207

我尝试了您的代码，并得到了您想要的结果：

```
<% Response.Write(Context.Request.ServerVariables("SCRIPT_NAME")) %> 
```

> 返回：/TESTERS/Default.aspx

您可以用它替换它，返回相同的结果：

```
string path = HttpContext.Current.Request.Url.AbsolutePath; 
```

> 返回：/TESTERS/Default.aspx

# c# - Sharepoint webpart 连接中断

> ID：633949
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:11:44.157
> 
>         
> 
> 标签：c#, sharepoint, web-parts

我有一个`webpart`,`gridview`当我在网格上选择一行时。行中包含的项目的 ID 被发送到`webpart`连接中的另一个。然后另一个`webpart`显示基于 iD 的信息。

接收`webpart`方使用多视图查看不同类型的信息。导致错误或故障的原因是`linkbutton`多视图中的一个视图。

我有一个带有文本框的表单，一个表示保存的按钮，一个`linkbutton`表示取消的按钮（它所做的只是向文本框抛出一个默认值，然后切换`viewindex`回有关该项目的一般信息。

出于某种原因，`linkbutton`当按下时，会终止我与`webparts`. 即使选择行中的行`gridview`也不能解决问题。

那是我遇到的最严重的问题，我也有一个问题，即接收`webpart`就像单击一下就落后了一步，然后它“加快了速度”。

有没有人遇到过类似的事情？

# c# - 在 ASP.NET LoginName 控件中显示全名

> ID：633950
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:12:51.063
> 
>         
> 
> 标签：c#, asp.net

我有一个使用带有自定义身份验证的登录控件的 .aspx 页面。我想知道是否可以使用 LoginName 控件而不是默认访问的 [UserName] 来获得“欢迎 [FirstName] [LastName]”消息。  

如果不可能，我正在考虑将这些信息存储在 Session 对象中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:17:05.420

您需要重写该`RenderContents`方法或制作您自己的 LoginName 控件。像这样的东西可以解决问题：

```
protected override void RenderContents(HtmlTextWriter writer)
{
      if (string.IsNullOrEmpty(Profile.FullName))
            return;

      nameToDisplay = HttpUtility.HtmlEncode(Profile.FullName);
      string formatExpression = this.FormatString;
      if (formatExpression .Length == 0)
      {
            writer.Write(nameToDisplay);
      }
      else
      {
            try
            {
                  writer.Write(string.Format(CultureInfo.CurrentCulture, formatExpression, new object[1] { nameToDisplay });
            }
            catch (FormatException exception)
            {
                  throw new FormatException("Invalid FormatString", exception1);
            }
      }
} 
```

[此外，请参阅此处以获取有关使用 LoginName](http://www.ondotnet.com/pub/a/dotnet/2004/10/25/libertyonwhidbey.html)的简短文章。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2011-03-28T07:46:40.367

在重定向页面中创建一个 LoginName 控件，它可以是 Masterpage.aspx 或任何其他页面。

```
<asp:LoginName ID="LoginName1" runat="server" /> 
```

然后将这些代码行插入到 .cs 文件的 page_load 中

```
protected void Page_Load(object sender, EventArgs e)
{
    //this can come from anywhere like session, database
    string fullName = "ABC XYZ";
    LoginName1.FormatString = "welcome" + " - " + fullName ; //output: welcome - ABC XYZ

    or

    LoginName1.FormatString = fullName; // output: ABC XYZ
} 
```

这对你有帮助吗？？？

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:18:32.407

首先，请参阅[全局应用程序中的个人姓名：要存储的内容](https://stackoverflow.com/questions/620118/personal-names-in-a-global-application-what-to-store)。即使您的网站仅限于美国，我很确定我在这里看到过一些外国人。

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2010-07-28T02:40:50.667

您可以使用[FormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginname.formatstring.aspx)属性将欢迎消息设置为您想要的任何字符串。当与表达式构建器（例如[<%$ expressionPrefix: expressionValue %>](http://msdn.microsoft.com/en-us/library/d5bd1tad.aspx)）结合使用时，您将有一种灵活的方式来定义输出。

# dendrogram - 用于绘制树状图的库或任何 API

> ID：633959
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T10:17:40.460
> 
>         
> 
> 标签：dendrogram

我有一个 MySQL 数据库，其中包含一些数据，它与 JSP 页面交互，问题是我必须从存储在数据库中的各种文件中绘制树状图。

我为此找到了一些 Java API，例如 JTree 或其他 API，但我不熟悉 java，所以我想知道是否有替代方法可以使用调用程序或其他东西的 CGI 或 php 页面来实现。

欢迎任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:35:31.023

[图形可视化](http://www.graphviz.org/)

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-12-09T13:51:12.673

这是许多个月后，但机器学习工具包橙色：[http ://www.ailab.si/orange/](http://www.ailab.si/orange/)

让您绘制树状图。您不需要多行 python 代码就可以将其作为 CGI 程序粘合在一起。

# java - 推土机：原始 int -1 值到空对象映射

> ID：633964
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T10:20:28.673
> 
>         
> 
> 标签：java, xml, dozer

有没有办法通过其 xml 映射文件配置推土机，将 -1 的原始 int 字段值转换为空对象引用？

旧对象模型将该值默认为 -1，因此零可以是有效的选择。

我们映射到的较新的对象模型假定未选择的值将为空，并且任何初始化的对象值都是有效的。我希望避免为这种情况编写自定义转换器。

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-06-17T21:34:56.620

你可能已经知道了，但我能看到的唯一解决方案是......

1.  为它编写一个自定义转换器。

2.  或者，编写目标属性的自定义设置器（在新对象模型中），它将处理 -1 -> null 转换。

3.  或者，编写源属性的自定义 getter（在旧对象模型中），这将负责 -1 -> null 转换。

2 和 3 比 1 差一些，因为它们污染了处理新值的旧代码或处理旧值的新代码。

# shell - 更多行上的 Grep 正则表达式

> ID：633967
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T10:22:10.400
> 
>         
> 
> 标签：shell, grep

亲爱的，我正在编写一个 python 程序，它从 .gz 文件中检索 edifact 日志消息... 2 个日志的示例如下：

```
2009/03/02 12:13:59.642396 siamp102 mux1-30706 Trace name: MSG
Message sent [con=251575 (APEOBEinMux1), len=2106, CorrID=000182C42DE0ED]
UNB+IATB:1+1ASRPFA+1A0APE+090302:1213+0095JQOL2

2009/03/02 12:14:00.029496 siamp102 mux1-30706 Trace name: MSG
Message sent [con=737 (APIV2_1), len=22370, CorrID=000182C42DE0ED]
UNB+IATB:1+1ASIFQLFS+1ARIOFS+090302:1214+0122V11ON9 
```

我想编写一个正则表达式，能够匹配第一行中的某些字段，第二行中的某些字段和第三行中的某些字段...

有什么方法可以编写一个正则表达式与 GREP 一起使用，以匹配连续行中的字段？

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2012-07-07T09:25:45.960

检查this previous thread，您可能会得到您正在寻找的答案：[bash grep newline](https://stackoverflow.com/questions/1228248/bash-grep-newline)

查看`pcregrep`答案，`pcregrep -M`允许多行匹配。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:29:48.213

独自一人，我`grep`认为这是不可能的。我建议`awk`或`perl`为了能够从前几行中保存一些上下文。

在`perl`这给出了类似的东西：

```
#!/usr/bin/env perl

$isInLogSection = 'NO';
while (<>) {
    if ( /siamp102/ ) {
        # Start of log section: retrieve its ID
        $isInLogSection = 'YES';
        split;
        $logSectionID = $_[0];
    }

    if ($isInLogSection eq YES && /len=/) {
        # Retrieve value of len
        ...
    }

    if ( /^$/ ) {
        # End of log section
        $isInLogSection = 'NO';
    }
} 
```

在`awk`这给出了类似的东西：

```
BEGIN { isInLogSection = "NO"; }
/siamp102/ { isInLogSection = "YES"; logSectionID = $1; }
/len=/ { if (isInLogSection == "YES") { #retrieve len value } }
/^$/ { isInLogSection = "NO" } 
```

我不是 100% 确定确切的语法。这主要是说明原理的画布。

# asp.net - 从 VS 2008 问题运行 ASP.NET 页面

> ID：633968
> 
>         
> 
> 赞同：0
> 
>         
> 
> 时间：2009-03-11T10:22:26.627
> 
>         
> 
> 标签：asp.net

我有个问题 。当我尝试使用浏览器（Internet Explorer、Mozilla、...）在 VS 2008 中运行 ASP.NET 页面时，出现“Internet Explorer 无法显示网页”错误。我安装了带有 SP1 的 Windows Vista。

我已经尝试过了，我得到了同样的错误。我什至尝试禁用防火墙和防病毒软件。我使用的是默认开发 Web 服务器，而不是 IIS。我尝试创建一个空白项目，但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:26:55.773

您是否尝试过禁用 Internet Explorer 中的友好错误消息？

在 IE 中：选项 -> 高级 -> 显示友好的 HTTP 错误消息。应该给你更多的信息。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:27:33.993

这没什么好说的……您使用的是默认的开发 Web 服务器吗？还是IIS？你有没有尝试过一个新的 web 项目（看看是不是配置问题）？

* * *

编辑;

这可能是 IPv6？请参阅“[奇怪的问题 - 无法连接到本地主机上的 ASP.Net WebServer](http://www.grumpydev.com/2009/03/12/strange-problem-unable-to-connect-to-the-aspnet-webserver-on-localhost/) ”。当然，根据时间，你可能是史蒂夫，在这种情况下你好;-p

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T13:23:54.740

好的，这篇文章假设您只是单击播放或使用 CTRL+F5 键盘快捷键来运行该站点。运行解决方案后，您能否确认以下内容：

1.  ASP.NET 开发网络服务器启动（您将在系统托盘中看到图标）

2.  如果第一步有效，请右键单击此选择菜单上的显示详细信息

3.  单击根 URL 链接以打开浏览器

4.  确保您的浏览器已打开此 URL 并可以显示您的页面

5.  确保没有使用代理服务器设置，或者您没有为 localhost 设置代理

6.  重新检查您的防火墙

7.  通过使用 PuTTY 连接到 ASP.NET 开发 Web 服务器尝试一些基本的网络测试（谷歌搜索：Using HTTP over telnet）

PS：如果用右键启动VS2008->以管理员身份运行，会出现同样的问题吗？

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-18T06:05:21.090

我遇到了同样的错误，在互联网上浏览我找到了这个解决方案。
[http://accidentaltechnologist.com/asp-net/aspnet-development-server-problems-under-vista/](http://accidentaltechnologist.com/asp-net/aspnet-development-server-problems-under-vista/)

基本上是因为ipv6（你可以很容易地证明它，只需将使用CTRL + F5键盘快捷键时获得的URL中的localhost更改为127.0.0.1）希望对你有用。

# xsd - 将元数据添加到 XSD 定义

> ID：633969
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:22:33.163
> 
>         
> 
> 标签：xsd, metadata, custom-attributes

对 XSD 不太熟悉，我想知道是否可以执行以下操作：

```
<xs:group name="SomeGroup">
    <xs:sequence>
        <xs:element name="Groupingcode" type="OurType" origin="DB" />
        <xs:element name="Description" type="StringType" origin="XML" /> 
```

解释一下：我有一个 XSD 架构文件。我需要根据包含数据库数据的 XSD（这部分工作正常）生成一个 XML 文件。但是，某些元素需要额外的数据才能找到从数据库中获取的正确字段。这就是**原始**标签的用武之地。它允许我在 XSD 中描述在哪里查找数据。该标记不必出现在生成的 XML 中，但如果可能，将使用相同的 XSD 来验证生成的 XML。另一种方法是使用单独的 XML 文件来描述这一点，我知道。但我想知道是否可以在我的 XSD 中执行此操作。

上面的片段将生成以下 XML：

```
<SomeGroup>
    <Groupingcode>None</Groupingcode>
    <Description>This item does not belong to any group.</Description> 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2009-03-11T10:28:36.377

继续前进。只需将您的额外属性放入您自己的命名空间中，并创建一个定义它们的模式。Microsoft 对创建 DataSet 时生成的 .XSD 文件执行此操作。

# c# - 帐户和安全窗口服务之间没有映射

> ID：633970
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:23:49.197
> 
>         
> 
> 标签：c#, .net, authentication, windows-services

在设置 Windows 服务期间，我收到错误消息：

错误 1001 帐户和安全 Windows 服务之间没有映射 我们为服务器使用自定义用户帐户。（管理员帐户）

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2012-04-17T19:49:48.183

To avoid asking the same question again I'm posting my own findings below.

This page mentions something about file Gpttmpl.inf and some possible causes for the mapping error:

> *   An account does not exist on domain member computers.
> 
> *   A SAM account name differs from its domain account name. 
> 
> *   The client is running a Multilingual User Interface Pack (MUI) that uses a different default language than the domain controller.
> 
> *   A SAM account name was renamed on the client computers.

[http://support.microsoft.com/kb/890737](http://support.microsoft.com/kb/890737)

I am getting similar error when the install on my Windows 7 PC is about to finish.

> Error 1001: No mapping between account names and and security IDs was done

The MSI is generated from a VS 2010 setup project for a .NET Windows service targeting .NET Framework 4.

My MSI would install fine and the service would start fine when using VS 2008\. Only after converting service solution to VS 2010 I started getting the issue, even though the domain account  `/USERNAME=thisdomain\thisaccount /PASSWORD=thispasswd` exists and all the requirements above are taken care of.

I did overcome the issue temporarily by removing the original `/USERNAME= /PASSWORD=` values (meant for the server), from the `CustomActionData` property (right-click the setup project, select view, select Custom Actions, right-click the Install Primary output, select properties).

Rebuild the setup project and now the MSI ran/installed the service successfully. 

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2010-06-24T13:35:56.050

在我看来，您可能没有完全限定您用于服务的帐户名称。虽然这个[链接](http://www.red-gate.com/supportcenter/Content.aspx?p=SQL%20Backup&c=knowledgebase%5CSQL_Backup%5CKB200708000131.htm)可能有点偏离主题，但我认为它应该会有所帮助。

# svn - SVN更新总结

> ID：633979
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:27:42.167
> 
>         
> 
> 标签：svn, commit, summary

我已经从不受我控制的 SVN 服务器上签出了源代码。我想知道何时有可用的新更新并将其分类为修改、新添加等。谷歌搜索让我相信“svn status --show-updates”是我正在寻找的命令。但是，当我在存储库根目录上运行它时，它不会给我 A/M 标志，而只是在状态列中给我 *。关于如何获得这个的任何想法？TIA。

* * *

## 回答 #1

> 赞同：9
> 
>             
> 
> 时间：2009-03-11T10:30:19.663

一个很好的工具是[CommitMonitor](http://tools.tortoisesvn.net/CommitMonitor)。

* * *

## 回答 #2

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:30:51.427

[`svn status`](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.status.html)显示您的工作副本与您签出的存储库副本相比是否有任何更改。--show-updates 标志显示服务器上是否有可用的更新，* 表示有。

编辑：好的，如果你可以去 gui，我在 Eclipse 中使用颠覆性，但是为了保持命令行，这个怎么样。你想要的听起来类似于合并的试运行......你想看看当你更新到 HEAD 时所有的 A、D、M 会发生什么。所以试试这个：

```
svn merge --dry-run -r BASE:HEAD 
```

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T11:28:23.720

```
svn status --show-updates 
```

将 * 放在自上次更新以来在存储库中更改的每个文件的前面。

您可以使用以下命令查看工作副本库（上次更新）和当前存储库头之间的详细更改：

```
svn log --revision BASE:HEAD 
```

添加选项 --verbose 将列出所有以 M、A 等为前缀的更改文件。添加选项 --quiet 将隐藏提交消息。

**更新：**

```
svn diff --summarize --revision BASE:HEAD 
```

将列出在一个列表中折叠的范围内的所有修订中以 M、A 等为前缀的所有已更改文件。我想这就是你要找的。

* * *

## 回答 #4

> 赞同：-1
> 
>             
> 
> 时间：2009-03-11T12:07:28.760

试试[eSvn](http://zoneit.free.fr/esvn/)。它具有实时显示文件/目录状态的功能。

# xslt - 健康）状况
在 XSLT 1.0 中？

> ID：633984
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T10:29:09.043
> 
>         
> 
> 标签：xslt, xslt-1.0

我有一个生成 XHTML 的 XSLT 1.0（2.0 不是一个选项）样式表。根据参数，它可以生成完整的 XHTML 有效文档或只是一个`<div>...</div>`片段，用于包含在 Web 页面中。

我的问题是在这两种情况下产生不同的 XML 声明。对于独立页面，我需要：

```
<xsl:output doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
       doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/> 
```

对于`<div>`一个：

```
<xsl:output omit-xml-declaration="yes"/> 
```

但`<xsl:output>`不能包含在`<xsl:if>`. 它只能是 的**直接**子代`<xsl:stylesheet>`。

我看到的唯一解决方案是创建一个包含大多数模板的样式表，然后是两个小的“包装器”，右边`<xsl:output>`是`<xsl:import>`主样式表。

我一直在寻找更好的主意，但显然没有。根据 Andrew Hare 和 jelovirt 的建议，我编写了两个“驱动程序”，两个简单的样式表，分别调用正确`<xsl:output>`的样式表和主样式表。这是这些驱动程序之一，用于独立 HTML 的驱动程序：

```
<?xml version="1.0" encoding="us-ascii"?>
<!-- This file is intended to be used as the main stylesheet, it creates a 
 standalone Web page. 
-->
<xsl:stylesheet
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">

  <xsl:import href="traceroute2html.xsl"/>

  <xsl:param name="standalone" select="'true'"/>

  <xsl:output doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN"
      doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"/>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2017-03-29T23:09:49.253

我最近不得不采用的另一种选择是：

1.  在所有情况下都省略 XML 声明。

2.  有条件地，将声明输出**为未转义的文本**。

这仅适用于 XSLT 1.0 和 2.0，如果您要输出到文件 - 如果您需要在同一通道中将输出作为 XML 处理，例如存储在变量中时，这将不起作用。

（请注意，XSLT 2.0 扩展函数可能可以一次性获取此输出并将其视为 XML，并且 XSLT 3.0 具有将输入字符串解析为 XML 的内置函数。）

示例片段：

```
<!-- Omit the XML declaration as the base case:
    we can conditionally output a declaration 
    as text, but we *cannot* apply conditions on
    this `omit-xml-declaration` attribute here.  -->
<xsl:output method="xml" indent="no" 
    omit-xml-declaration="yes"
/>

<!-- Root element match: evaluate different cases, output XML declaration,
    XHTML DOCTYPE, or something else, then process the rest of the input. -->
<xsl:template match="/">
    <xsl:choose>
        <xsl:when test="'... some condition ...'">
            <xsl:text disable-output-escaping="yes">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</xsl:text>
        </xsl:when>
        <xsl:when test="'... some other condition ...'">
            <xsl:text disable-output-escaping="yes">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</xsl:text>
        </xsl:when>
        <xsl:otherwise>
            <!-- ... some third kind of output ... -->
        </xsl:otherwise>
    </xsl:choose>
    <!-- Just process the rest -->
    <xsl:apply-templates/>
</xsl:template>

... [ other code ] ... 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:40:31.450

听起来您需要的是两个不同的样式表。如果可能的话，您应该创建两个单独的样式表并从代码中动态调用您需要的样式表。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-12T06:43:41.463

在 XSLT 中， 的值`omit-xml-declaration`必须是`yes`or `no`，您不能在那里使用属性值模板。这适用于 1.0 和 2.0。

doctype 属性可以使用 AVT，但问题是您不能省略该属性，您只能输出一个空属性，这会导致输出具有空的 doctype 字符串。

抱歉，不能用 XSLT 完成。您可以使用两个不同的样式表，也可以在调用 XSLT 处理器的代码中设置输出参数。

# c# - Visual Studio 插件 - 查找当前解决方案文件夹路径

> ID：633985
> 
>         
> 
> 赞同：9
> 
>         
> 
> 时间：2009-03-11T10:29:17.390
> 
>         
> 
> 标签：c#, visual-studio, visual-studio-addins

我加载了一个加载项，并加载了一个解决方案，如何在我的加载项中以编程方式在 C# 中找到该解决方案的文件夹路径？

* * *

## 回答 #1

> 赞同：12
> 
>             
> 
> 时间：2009-03-11T11:04:29.847

唉，经过大量的谷歌搜索，我想通了！

在 connect.cs 中：

```
 public String SolutionPath()
    {
        return Path.GetDirectoryName(_applicationObject.Solution.FullName);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
>             
> 
> 时间：2010-06-04T23:10:42.850

Solution.FullName 答案是正确的，但请注意，在 connect.cs 中调用 OnStartupCompleted 方法之前，您无法访问它。

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2012-10-26T16:19:10.423

您可以使用以下代码：

```
string solutionpath = Directory.GetParent(Application.ExecutablePath).Parent.Parent.Parent.FullName; 
```

问候

# flash - sIFR 3 rev 436 - 将链接复制到剪贴板

> ID：633992
> 
>         
> 
> 赞同：1
> 
>         
> 
> 时间：2009-03-11T10:30:41.223
> 
>         
> 
> 标签：flash, sifr

这最初是一个问题，但现在是一个代码增强，因为它是一个非常小的（但有用的）更新。

当标题（或其他）文本用作 sIFR 3 的链接时，您现在可以在链接的右键单击 Flash 上下文菜单中获得两个“打开链接/在新窗口中打开链接”选项。

昨天我第一次遇到 sIFR 时，我想在一个使用 sIFR 2.x 的网站上将标题 (h2) 链接复制到剪贴板，但我对我做不到感到沮丧。感谢开源（以及编写良好的代码）的奇迹，我可以建议对 sIFR 3 进行以下增强：

*[在文件 flash/sIFR.as 中，找到以注释“// 必须先设置菜单项！”开头的部分。通过到“）；” 并替换为以下内容，然后将字体信息添加到 .fla 并按照[教程](http://wiki.novemberborn.net/sifr3/How+to+use)导出 swf ：]*

```
// Have to set up the menu items first!
menuItems.push(
    new ContextMenuItem("Follow link", function() { getURL(sIFR.instance.primaryLink, sIFR.instance.primaryLinkTarget) }),
    new ContextMenuItem("Open link in new window", function() { getURL(sIFR.instance.primaryLink, "_blank") }),
    new ContextMenuItem("Copy link to clipboard", function() { System.setClipboard(sIFR.instance.primaryLink) })
); 
```

现在我很高兴... :-)

艾伦。

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2009-06-03T04:56:13.770

是的，那么什么时候添加马克？我下载了最新版本（436），它不在那里。

不过这很有趣，我已经自己在 sIFR.as 文件中实现了它，但是我逐字逐句地编写了 Alan 在他的示例中所做的完全相同的代码（甚至是菜单文本“复制链接到剪贴板”） . 我对结果很满意，并认为我会建议来这里并发布它。

谢天谢地，我搜索了一下是否有人已经发布了它，好吧，瞧，就在这里。

Alan - 伟大的思想是相似的（如果不是相同的话）。

Wubben - Stack Overflow 是否必须在他们的网站上制作一个按钮来帮助您“将代码复制到剪贴板”，这样您就可以将其粘贴到下一个版本的 sIFR 中？！？！？

只是在这里有点刻薄，但希望这是一个很好的提醒，可以让这样一个简单而快速的实现;-)

# workspace - TFS：可以将工作空间迁移到另一台计算机吗？

> ID：633994
> 
>         
> 
> 赞同：4
> 
>         
> 
> 时间：2009-03-11T10:31:06.213
> 
>         
> 
> 标签：workspace

我有一个工作区 A，其中文件已在计算机 A 上签出。现在我想在计算机 B 上继续开发。我从计算机 A 复制文件并创建一个新的工作区 B，并映射到复制的文件。

现在 Visual Studio 不允许我签入文件，因为它们已经在工作区 A 中签出。

我怎样才能解决这个问题，而不必先在计算机 A 上签入文件？

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2009-03-11T11:59:08.220

在 B 上创建一个新工作区，从 A 复制目录并使用 Team Foundation Power Tools 2008 检出所有修改过的文件：

打开一个cmd窗口，然后

```
cd c:\wherever\your\workspace\is
tfpt online /recursive /adds /deletes /diff . 
```

tfpt 将分析目录树并检出任何修改过的文件以进行编辑（必要时还可以选择“添加”或“删除”文件。）

**确保在签入之前验证 tfpt 做了什么**

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T10:37:14.780

工作区与用户绑定，因此在新机器上工作时您将看到旧工作区。

因此，只需从源代码管理资源管理器中的工作区下拉列表中选择您的旧工作区并签入您的文件。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2010-02-13T23:55:28.217

我买了一台新笔记本电脑并在上面安装了 Windows 7。该产品在控制面板中附带了一项名为“入门”的新功能。使用此功能，我使用传输文件将文件从旧笔记本电脑传输到新笔记本电脑。这非常有用，因为它为 Visual Studio 2008 将我所有的源文件从计算机 A 复制到计算机 B。因此，我不必手动执行此操作。传输完成后，我下载了 Microsoft Team Foundation Server 2008 Power Tools 的 Power Shell（tfpt 安装程序），然后按照上述步骤 2 中的说明，转到开始->所有程序->Microsoft Team Foundation Server 2008->PowerShell 控制台。当命令窗口打开时，我输入了命令： cd c:\wherever\your\workspace\is tfpt online /recursive /adds /deletes /diff 。

它就像一个魅力！

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2017-04-09T19:22:26.107

要从到迁移`computer A`而`computer B`无需签入您的代码：

1.  不要复制旧的工作目录`computer A`

2.  连接到新的 tfs`computer B`

3.  `get`从 tfs (do a )获取你需要的所有项目`computer B`

4.  从旧做一个搁板`computer A`

5.  上`computer B`，在团队资源管理器下，`unshelve`您在步骤 4 中创建的搁置集。

你不会失去任何东西。

# unix - zcat 管道到 grep

> ID：633998
> 
>         
> 
> 赞同：3
> 
>         
> 
> 时间：2009-03-11T10:36:29.057
> 
>         
> 
> 标签：unix, grep, zcat

```
ls -ltr|grep 'Mar  4'| awk '{print $9 }'|zcat -fq |grep  12345 
```

我想找到在某个日期修改的所有文件，然后对它们进行 zcat 并在文件中搜索数字字符串。

以上不起作用，因为它在文件名中搜索字符串而不是文件本身。

有什么帮助吗？

米

* * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2009-03-11T10:39:33.060

用于`xargs`对 awk 输出的文件名运行 grep：

```
ls -ltr | grep 'Mar 4' | awk '{print 9}' | xargs zcat -fq | grep 12345 
```

或者，我想，从 awk 本身运行管道的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:38:16.213

尝试`find`改用。和/或`xargs`.

* * *

## 回答 #3

> 赞同：1
> 
>             
> 
> 时间：2009-03-11T10:40:46.050

如果我正确阅读了您的命令行，则它的 zcat 正在尝试解压缩文件名而不是其内容。使用 xargs 来解决这个问题：

```
ls -ltr|grep 'Mar  4'| awk '{print $9 }'|xargs zcat -fq |grep  12345 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2009-03-11T17:03:59.267

除了关于使用`xargs`or的优秀答案之外，您还可以通过消除和管道到or来`find`摆脱额外的过程。`zcat``zgrep``grep -Z`

# javascript - 来自众多“活动”客户端的 AppEngine 应用程序的可扩展轮询？

> ID：633999
> 
>         
> 
> 赞同：2
> 
>         
> 
> 时间：2009-03-11T10:37:08.307
> 
>         
> 
> 标签：javascript, python, ajax, google-app-engine

我正在开发一个将在 Google AppEngine 上运行的应用程序。

我计划让该应用程序的 Web 界面等待来自 AppEngine 服务器的通知，等等。

理想情况下，我希望使用 XMLHttpRequest() 向服务器发出请求，该请求将等待应用程序发出下一个通知。

但是，AppEngine 中似乎没有支持这种类型的逻辑（如果我错了，请纠正我）。这意味着我似乎仅限于定期轮询。

所以问题是：

*   是否有人对如何最好地设计这种轮询机制以避免遇到 AppEngine 的 CPU 使用配额有很好的建议？需要考虑随着“活跃”客户端数量的增加而产生的可扩展性。

我特别感兴趣的是有关从客户端良好管理轮询间隔的建议以及随着“活动”客户端数量的增加而有效处理 AppEngine 应用程序中的请求的提示。

*PS*：从服务器轮询的信息类型通常是关于最近更新/添加的信息位的 JSON 编码信息（最近读取为：过去几秒钟或几分钟内）。

**状态更新**

到目前为止，我对这个问题的想法总结如下：

*   为了最大限度地减少响应轮询方法生成的每个单独请求所需的 CPU 负载：使用内存缓存来最大限度地减少收集回复信息所需的时间。**需要找到一个很好的例子**。

*   为了尽量减少“活动”客户端向服务器生成的请求数量，我有几个线索：

    *   如果用户在客户端网页中没有主动交互（即没有点击任何东西），则使对服务器的连续轮询请求之间的等待时间逐渐延长。

    *   捎带对服务器的其他类型的请求，即将轮询请求的结果包含到其他请求结果中以节省请求数。

欢迎评论和指向代码示例！

* * *

## 回答 #1

> 赞同：1
> 
>             
> 
> 时间：2009-03-12T21:12:02.050

或者...

您可能对某些 pubsub 实现感兴趣。就像古老的[pubsubhubbub](http://code.google.com/p/pubsubhubbub/)一样，由 Google 和 Jaiku 的人制作。*************** 
```*****