# StackOverflow 问答 11191000-11191999

# spotify - 将 libspotify 用于基于 Web 的应用程序

> ID：11191001
> 
> 赞同：0
> 
> 时间：2012-06-25T14:14:22.083
> 
> 标签：spotify

我只是想知道让任何类型的 Spotify 应用程序是基于网络的，而不是基于应用程序的唯一方法是将它作为 Spotify 应用程序中的 Spotify 应用程序，或者是否有可能让它独立。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:18:52.213

听起来您对我们的 API 感到困惑。

*   Spotify Apps 是我们 Spotify 客户端中的一个平台。您使用 HTML5/JavaScript 编写它们。它们在本地运行，但如果您愿意，您可以让它与后端服务通信。

*   Spotify 的 Web API 为搜索和元数据查找提供 HTTP REST 服务。

*   libSpotify 用于独立的本机应用程序。您*可以*让该应用程序托管一个 Web 服务（例如，有 Ruby 绑定），但是您需要注意一些关于从您自己的服务以用户身份登录的服务条款。您可以在[http://developer.spotify.com](http://developer.spotify.com)上找到服务条款。

# tridion - SDL Tridion 中的关键字路径

> ID：11191010
> 
> 赞同：6
> 
> 时间：2012-06-25T14:14:49.193
> 
> 标签：tridion, tridion-2011, tridion2009

有人可以就如何做到这一点给出一些想法吗？这可能非常简单和基础，但我无法弄清楚。

这是我的要求。

我有一个带有子关键字 B 的类别 A，而 B 有另一个子关键字 C。

我想在我的组件模板中获取所选关键字的确切路径，例如，如果用户选择关键字 C，我需要路径为 A\B\C 的值，而不仅仅是 C。但 Tridion 总是给我这个值作为 C 而不是 A\B\C 。组件架构使用“树”视图来选择关键字。

我应该编写 Dreamweaver 自定义函数来处理这个问题吗？或者 tridion 是否为此提供了一些处理程序？

任何帮助将不胜感激。谢谢！

谢谢，KK

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:51:20.670

正如您刚刚发现的那样，Tridion 关键字层次结构是“假的” - 关键字存储为平面列表，而不是分层列表（就像您使用文件夹一样）。有关父关键字和子关键字的信息存储在关键字本身中。

有解决方案 - 当然，例如，您可以在 C# TBB 中使用它：

```
Keyword keyword = new Keyword(new TcmUri("tcm:28-3368-1024"), session);
string hierarchy = keyword.Title;
bool done = false;
while(!done)
{
    if (keyword.ParentKeywords.Count > 0)
    {
        foreach (Keyword k in keyword.ParentKeywords)
        {
            hierarchy = k.Title + " > " + hierarchy;
        }
        keyword = keyword.ParentKeywords[0];
    }
    else
        done = true;
}
// Include Category
hierarchy = keyword.OrganizationalItem.Title + " > " + hierarchy; 
```

编辑：更新为递归地“上升”层次结构。但是一个关键字可以有多个父级，我将由您来解决...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T14:45:30.803

一个类别中的关键字是唯一的，因此 Tridion 可以通过它们的名称（当然还有/或它们的 TCM URI）安全地引用它们。而且由于一个关键字可以有多个父项，因此从根到您的关键字可能没有一条路径。

如果在您的情况下可以将类别表示为树，您当然可以为每个关键字构建一个路径。在这种情况下，您将需要一些 (C#) 代码来沿着父轴并连接名称。您可以将此代码：

1.  在 DWT 之前放入模板的 TBB 或
2.  在自定义 Dreamweaver 函数中。

无论哪种方式都可以正常工作。

# html - XPath 可以在无效标记中任意出现文本后定位节点吗？

> ID：11191011
> 
> 赞同：0
> 
> 时间：2012-06-25T14:14:49.510
> 
> 标签：html, xpath, screen-scraping, web-scraping

我有一个顽皮的 Web 开发人员编写的文档，它看起来像：

```
<div id="details">
    Here is some text without a p tag. Oh, let's write some more.
    <br>
    <br>
    And some more.
    <table id="non-unique">
        ...
    </table>
    Replaces the following numbers:
    <table id="non-unique">
        ... good stuff in here
    </table>
</div> 
```

因此，它没有很好地标记。我需要抓住包含好东西的表格，但是，它没有唯一的 id 值*，并且*它并不总是以相同的顺序排列，或者在 div 中的最后一个等。

唯一运行的主题是它始终跟随 text `Replaces the following numbers:`，尽管此文本可能与上面的示例中一样，或者有时在`h4`元素中！

是否可以使用 XPath 表达式通过搜索替换字符串然后询问下一个表元素来解决此表？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:05:57.043

这对我来说似乎有效：

```
//text()[contains(.,"Replaces the following numbers")]/following-sibling::table[1] 
```

没有规定 id 必须是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:42:09.997

**使用**：

```
//node()[self::h4 or self::text()]
         [normalize-space() = 'Replaces the following numbers:']
           /following-sibling::*[1][self::table] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "//node()[self::h4 or self::text()]
             [normalize-space() = 'Replaces the following numbers:']
               /following-sibling::*[1][self::table]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的文档时**（更正为格式良好的 XML 文档）：

```
<div id="details">
 Here is some text without a p tag. Oh, let's write some more.
    <br />
    <br />
    And some more.     
    <table id="non-unique">
     ...
  </table>
  Replaces the following numbers:
    <table id="non-unique">
    ... good stuff in here
    </table>
</div> 
```

**计算 XPath 表达式并将选定的节点复制到输出：**

```
<table id="non-unique">
    ... good stuff in here
    </table> 
```

**当在此 XML 文档上应用相同的转换（XPath 表达式）时：**

```
<div id="details">
 Here is some text without a p tag. Oh, let's write some more.
    <br />
    <br />
    And some more.     
    <table id="non-unique">
     ...
  </table>
  <h4>Replaces the following numbers:</h4>
    <table id="non-unique">
    ... good stuff in here
    </table>
</div> 
```

**再次选择想要的元素并输出：**

```
<table id="non-unique">
    ... good stuff in here
    </table> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-25T14:16:13.593

不，因为 XPath 需要格式良好的 Xml 才能运行。

参看。[这个答案](https://stackoverflow.com/questions/354322/finding-a-node-or-close-to-it-using-xpath-in-non-well-formed-html)，它提供了一些额外的信息。

# wcf - wcf：是否可以使用 tcp 绑定和流传输模式进行双工合同？

> ID：11191015
> 
> 赞同：1
> 
> 时间：2012-06-25T14:14:52.350
> 
> 标签：wcf, tcp, duplex

我有一个 WCF 服务和一个 tcp 绑定。目前，传输模式是缓冲的，这是默认选项，但是我在文件传输方面遇到了问题，所以有人建议我使用流传输模式可能会更好。

我为这种传输模式配置了我的服务，在客户端中，我只将传输模式从缓冲更改为流。

然后，当我运行应用程序时，出现以下异常：

> tcp 绑定不支持双工合同或未正确设置双工合同

我只更改了传输模式，所以这让我认为流式传输可能与 tcp 双工合同不兼容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:14:01.913

`netTcpBinding`在双工模式下不支持流式传输，它仅支持请求/回复交换模式的流式传输（不是双工的）。您可以尝试做的是删除您的回调，并在客户端上创建一个模拟回调的服务。因此，您的客户将数据发送到您的“主要”服务，您的主要服务通过流式传输到客户的服务进行回复，尽管我不知道这被认为是一种好的做法。

# sql - 需要一点帮助，SQL Server 2000，拥有和 max(date)

> ID：11191019
> 
> 赞同：0
> 
> 时间：2012-06-25T14:14:58.543
> 
> 标签：sql, sql-server, sql-server-2000, max, having

我需要一点帮助才能让这个脚本做我想做的事。

```
SELECT KM.initials, 
       TPL.debprice, 
       TMP.pricegroup, 
       TMP.date 
FROM   klientmedarbejder KM 
       INNER JOIN timeprismedarbejderprisgruppe TMP 
               ON KM.employeeno = TMP.employeeno 
       INNER JOIN timeprisprisgruppelinie TPL 
               ON TMP.pricegroup = TPL.pricegroup 
GROUP  BY KM.initials, 
          TMP.date, 
          TPL.debprice, 
          TMP.pricegroup, 
          TPL.date 
HAVING ( Max(TMP.dato) = TPL.date ) 
```

我需要的是最新（最大）日期的 debPrice。一名员工在他的职业生涯中，偶尔会提升他的价格。价格从一组价格列表中选择。

1.  `KlientMedarbejder`是员工表。
2.  `TimeprisMedarbejderPrisgruppe`是他的记录升级到新价格的日期列表。
3.  `TimeprisPrisgruppeLinie`是您可以拥有的价格列表。

我的解决方案减少到每位员工 2 个选项。因此：

```
emp A - 300 - 9 - 1900-01-01  
emp A - 500 - 4 - 2012-01-01  
emp B - 400 - 6 - 1900-01-01  
emp B - 800 - 8 - 2012-04-01 
```

因此，第一个记录是他加入公司时的默认记录。2012 年，他终于足够好，可以拿到更好的价格标签。现在我需要每个员工升级列表中最新日期的答案。因此，emp A 应该给我 500，emp B 应该给我 800。现在，并非所有员工都可能有 01-01 或 04-01 的价格更新。随着时间的推移，一些员工已经进行了多达 8 次升级，我只关心最新的。

我从中提取此数据的客户端正在运行 SQL Server 2000。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T14:23:13.603

SQL Server 2000 的典型解决方案是隔离员工编号及其最大日期（这在 2005+ 中要容易得多）。伪代码：

```
SELECT d.columns, etc. FROM
(
  SELECT employeeno, [date] = MAX([date])
  FROM dbo.tablewithdates
  GROUP BY employeeno
) AS grouped_emp
INNER JOIN dbo.tablewithdates AS d
ON d.employeeno = grouped_emp.employeeno
AND d.[date] = grouped_emp.[date]
INNER JOIN ... 
```

危险是如果employeeno + date 不是唯一的，您可能会得到多行，因此您需要确定如何处理关系。

我会为您的架构编写它，但我无法对您的查询进行逆向工程以确定哪个表是哪个表。从简单开始，然后努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:26:56.593

HAVING 子句发生在 group by 之后，因此它只能使用聚合列。

您需要在分组依据*之前*计算最大日期。这需要为计算添加一个子查询，然后添加一个 WHERE 子句来进行正确的过滤：

```
SELECT KM.initials, TPL.debprice, TMP.pricegroup, TMP.date
FROM klientmedarbejder KM INNER JOIN
     timeprismedarbejderprisgruppe TMP
     ON KM.employeeno = TMP.employeeno INNER JOIN
     timeprisprisgruppelinie TPL
     ON TMP.pricegroup = TPL.pricegroup join
     (select employeeno, MAX(dato) as maxdato
      from timeprismedarbejderprisgruppe t
      group by employeeno
     ) tmax
     on tmax.employeeno = tmp.employeeno
 where tmp.dato = tmax.maxdato   
 GROUP  BY KM.initials, TMP.date, TPL.debprice, TMP.pricegroup, TPL.date 
```

# javascript - 拉斐尔动画

> ID：11191020
> 
> 赞同：2
> 
> 时间：2012-06-25T14:15:03.750
> 
> 标签：javascript, animation, raphael

我是 Raphael 的新手，正在尝试做一些非常简单的事情，但失败得很惨。

我正在尝试在[此链接](http://www.trottercashion.com/2010/04/22/i-heart-raphael.html)上复制动画这是我到目前为止的代码：

```
<html>
<head><title></title>
<script src="raphael-min.js"></script>
<script src=" src="jquery-1.7.2.js"></script>
</head>

<body>

<div id="draw-here-raphael" style="height: 200px; width: 400px; background: #666;">
</div>

<script type="text/javascript">
//all your javascript goes here

var r = new Raphael("draw-here-raphael", 400, 200),

    // Store where the box is
    position = 'left',

    // Make our pink rectangle
    rect = r.rect(20, 20, 50, 50).attr({"fill": "#fbb"});

// Note JQuery is adding the mouseover. SVG == html nodes
$(rect.node).mouseover(function () {
  if (position === 'left') {
    rect.animate({x: 300, y: 100}, 400, "<>");
    position = 'right';
  } else {
    rect.animate({x: 20, y: 20 }, 800, "bounce");
    position = 'left';
  }
});
// Make that sucker rotate
setInterval(function () {
  rect.rotate(1);
}, 10);

</script>

</body>
</html> 
```

我已经下载了 jquery 并将它放在与 Raphael 相同的文件夹中。不起作用的代码是讨论 jquery 添加鼠标悬停的注释代码。当我添加该代码时，矩形不再旋转。它只是静止的。如果有人可以帮助我制作这个动画，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:43:38.347

您的代码中有错误：

```
<script src=" src="jquery-1.7.2.js"></script> 
```

将其更改为：

```
<script src="jquery-1.7.2.js"></script> 
```

那应该可以解决您使用 jQuery 的问题。

# android - Android列表查看一行的单个值

> ID：11191024
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:15:16.293
> 
> 标签：android, listview

有可能获得单行的值。在partycular 中，我不会在带有适配器的 mt 列表行中获取字符串中的 id 值。

在每一行中都有值 id 和 label

非常感谢，对不起我的英语

```
ListView list;
            list = (ListView) findViewById(R.id.listView1);
            mSchedule = new SimpleAdapter(getApplicationContext(), result ,R.layout.row_meteo,
                    new String[]{"id", "label"}, new int[] {R.id.textView1,R.id.textView2});
            list.setAdapter(mSchedule);

            list.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    String idPlace = mSchedule.getItem(position).toString();

                    Toast.makeText(getApplicationContext()," Cliccato sul luogo :"+idPlace,Toast.LENGTH_LONG).show();

                }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:17:58.650

```
 public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    TextView tv  = (TextView)view.findViewById(R.id.textView1); //<---------
                    String str = tv.getText();

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:20:23.987

代替

```
String idPlace = mSchedule.getItem(position).toString(); 
```

和

```
String idPlace =((TextView)view.findViewById(R.id.textView1)).getText().toString(); 
```

# deployment - 失败 - 遇到异常 org.apache.catalina.LifecycleException

> ID：11191025
> 
> 赞同：2
> 
> 时间：2012-06-25T14:15:19.040
> 
> 标签：deployment, tomcat7

我无法在 Tomcat 7 上部署 .war。它在其中一台服务器上运行良好，但在另一台服务器上却无法运行。以下是我得到的错误。

```
FAIL - Encountered exception org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/AppAPIs]] 
```

以下是 catalina.out 的内容

> 警告：无法检索容器 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/AppAPIs]] 的 JNDI 命名上下文，因此未对该容器执行清理
> 
> jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class

PS：我已经检查了以前的解决方案，但似乎没有什么对我有用。我检查了我的 web.xml，但那里似乎没什么问题。

我的库中没有重复的 jar 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T01:37:39.003

这是一个非常奇怪的问题，但我通过仔细检查我的项目的 web.xml 解决了它。当我将 1 个错误的 servlet 配置行添加到 web.xml 时，也发生了同样的问题，并且在删除它时它消失了。因此，请非常仔细地检查您的 web.xml 并撤消最近对其所做的所有更改 - 如果它可以正常工作，只需更正您刚刚犯的配置错误

# c++ - Boost::asio - 如何中断阻塞的 tcp 服务器线程？

> ID：11191028
> 
> 赞同：28
> 
> 时间：2012-06-25T14:15:24.473
> 
> 标签：c++, multithreading, sockets, boost, boost-asio

我正在开发一个多线程应用程序，其中一个线程充当从客户端接收命令的 tcp 服务器。线程使用 Boost 套接字和接受器等待客户端连接，从客户端接收命令，将命令传递给应用程序的其余部分，然后再次等待。这是代码：

```
void ServerThreadFunc()
{
    using boost::asio::ip::tcp;
    boost::asio::io_service io_service;
    tcp::acceptor acceptor(io_service, tcp::endpoint(tcp::v4(), port_no));

    for (;;)
    {
        //  listen for command connection
        tcp::socket socket(io_service);
        acceptor.accept(socket);

        //  connected; receive command
        boost::array<char,256> msg_buf;
        socket.receive(boost::asio::buffer(msg_buf));

        //  do something with received bytes here
    }
} 
```

该线程将大部分时间都花在了对 的调用上`acceptor.accept()`。目前，线程仅在应用程序退出时终止。不幸的是，这会在 main() 返回后导致崩溃——我相信是因为线程在单例被销毁后尝试访问应用程序的日志记录单例。（当我来到这里时就是这样，老实说。）

当应用程序退出时，我怎样才能干净地关闭这个线程？我读过原始套接字上的阻塞 accept() 调用可以通过从另一个线程关闭套接字来中断，但这似乎不适用于 Boost 套接字。我尝试使用[Boost asynchronous tcp echo server example](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)将服务器逻辑转换为异步 i/o ，但这似乎只是将阻塞调用交换为`acceptor::accept()`阻塞调用`io_service::run()`，所以我遇到了同样的问题：阻塞我不能打断的电话。有任何想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-25T18:35:23.323

简而言之，有两种选择：

*   将代码更改为异步（`acceptor::async_accept()`和`async_read`），在事件循环中通过 运行`io_service::run()`，并通过取消`io_service::stop()`。
*   强制阻塞调用以中断较低级别的机制，例如信号。

我会推荐第一个选项，因为它更可能是便携且更易于维护的。要理解的重要概念是，[`io_service::run()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/io_service/run/overload1.html "io_service::run()")只要有待处理的工作，就会阻塞。当[`io_service::stop()`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/io_service/stop.html "io_service::stop()")被调用时，它会尝试让所有被阻塞的线程`io_service::run()`尽快返回；即使在事件循环中调用了同步操作，它也不会中断同步操作，例如`acceptor::accept()`and 。`socket::receive()`重要的是要注意这`io_service::stop()`是一个非阻塞调用，因此与被阻塞的线程同步`io_service::run()`必须使用另一种机制，例如[`thread::join()`](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join "线程::加入()").

这是一个运行 10 秒并监听端口 8080 的示例：

```
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/shared_ptr.hpp>
#include <boost/thread.hpp>
#include <iostream>

void StartAccept( boost::asio::ip::tcp::acceptor& );

void ServerThreadFunc( boost::asio::io_service& io_service )
{
  using boost::asio::ip::tcp;
  tcp::acceptor acceptor( io_service, tcp::endpoint( tcp::v4(), 8080 ) );

  // Add a job to start accepting connections.
  StartAccept( acceptor );

  // Process event loop.
  io_service.run();

  std::cout << "Server thread exiting." << std::endl;
}

void HandleAccept( const boost::system::error_code& error,
                   boost::shared_ptr< boost::asio::ip::tcp::socket > socket,
                   boost::asio::ip::tcp::acceptor& acceptor )
{
  // If there was an error, then do not add any more jobs to the service.
  if ( error )
  {
    std::cout << "Error accepting connection: " << error.message() 
              << std::endl;
    return;
  }

  // Otherwise, the socket is good to use.
  std::cout << "Doing things with socket..." << std::endl;

  // Perform async operations on the socket.

  // Done using the socket, so start accepting another connection.  This
  // will add a job to the service, preventing io_service::run() from
  // returning.
  std::cout << "Done using socket, ready for another connection." 
            << std::endl;
  StartAccept( acceptor );
};

void StartAccept( boost::asio::ip::tcp::acceptor& acceptor )
{
  using boost::asio::ip::tcp;
  boost::shared_ptr< tcp::socket > socket(
                                new tcp::socket( acceptor.get_io_service() ) );

  // Add an accept call to the service.  This will prevent io_service::run()
  // from returning.
  std::cout << "Waiting on connection" << std::endl;
  acceptor.async_accept( *socket,
    boost::bind( HandleAccept,
      boost::asio::placeholders::error,
      socket,
      boost::ref( acceptor ) ) );
}

int main()
{
  using boost::asio::ip::tcp;

  // Create io service.
  boost::asio::io_service io_service;

  // Create server thread that will start accepting connections.
  boost::thread server_thread( ServerThreadFunc, boost::ref( io_service ) );

  // Sleep for 10 seconds, then shutdown the server.
  std::cout << "Stopping service in 10 seconds..." << std::endl;
  boost::this_thread::sleep( boost::posix_time::seconds( 10 ) );
  std::cout << "Stopping service now!" << std::endl;

  // Stopping the io_service is a non-blocking call.  The threads that are
  // blocked on io_service::run() will try to return as soon as possible, but
  // they may still be in the middle of a handler.  Thus, perform a join on 
  // the server thread to guarantee a block occurs.
  io_service.stop();

  std::cout << "Waiting on server thread..." << std::endl;
  server_thread.join();
  std::cout << "Done waiting on server thread." << std::endl;

  return 0;
} 
```

运行时，我打开了两个连接。这是输出：

```
10 秒后停止服务...
等待连接
用socket做事...
使用套接字完成，准备进行另一个连接。
等待连接
用socket做事...
使用套接字完成，准备进行另一个连接。
等待连接
立即停止服务！
正在等待服务器线程...
服务器线程退出。
在服务器线程上等待完成。
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:51:56.373

当您收到需要退出的事件时，您可以调用`acceptor.cancel()`，这将取消挂起的接受（错误代码为`operation_canceled`）。在某些系统上，您可能还必须`close()`使用接受器以确保安全。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T16:04:27.463

如果涉及到它，您可以在 localhost 上打开一个到它的临时客户端连接 - 这将唤醒它。您甚至可以向它发送一条特殊消息，以便您可以从 pub 关闭您的服务器 - 应该有一个应用程序：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-30T18:53:10.680

只需使用本机句柄和 SHUT_RD 选项调用关闭，即可取消现有的接收（接受）操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-06-13T07:50:00.567

接受的答案并不完全正确。**事实上@JohnYu 回答正确**。

使用 ASIO 的阻塞 API 很像使用 ASIO 库包装在其类中的 BSD 套接字 API。

问题是`boost::asio::ip::tcp::acceptor`类不提供[shutdown()](https://man7.org/linux/man-pages/man2/shutdown.2.html)功能，因此您必须使用“旧”套接字 API 来完成。

**附加说明：**确保`acceptor`,`socket`和`io_service`在所有使用它的线程退出之前没有被删除。在下面的代码`std::shared_ptr`中，用于保持共享资源处于活动状态，因此`ApplicationContext`类的用户可以删除`ApplicationContext`对象并避免**SEGFAULT 崩溃**。

**附加说明：**注意 boost 文档，有引发异常的重载方法和返回错误代码的方法。原始海报的代码在[`acceptor->accept(socket);`](https://www.boost.org/doc/libs/1_71_0/doc/html/boost_asio/reference/basic_socket_acceptor/accept/overload1.html#boost_asio.reference.basic_socket_acceptor.accept.overload1.exceptions)没有 try/catch 的情况下使用，这将导致程序退出而不是正常的线程例程退出和清理。

以下是解决方案说明：

```
#include <unistd.h> // include ::shutdown() function
// other includes ...

using boost::asio::ip::tcp;
using boost::asio::io_service;

class ApplicationContext {

    // Use shared pointer to extend life of resources afer ApplicationContext is deleted
    // and running threads can still keep using shared resources
    std::shared_ptr<tcp::acceptor> acceptor;
    std::shared_ptr<io_service> ioservice;

    // called `ServerThreadFunc` in question code example
    void AcceptLoopThreadRoutine(int port_no) {
        ioservice = std::make_shared<io_service>();
        acceptor = std::make_shared<tcp::acceptor>(*ioservice, tcp::endpoint(tcp::v4(), port_no));

        try {
            for (;;) {
                // listen for client connection
                tcp::socket socket(*ioservice);
                // Note boost::system::system_error is raised when using this overload
                acceptor->accept(socket);

                // connected receive some data ...
                // // boost::array<char,256> msg_buf;
                // // socket.receive(boost::asio::buffer(msg_buf));
                //  do something with received bytes here
            }
        } catch(std::exception const & exception) {
            // boost::system::system_error here indicates clean exit ;)
        }
    }

    void StopAcceptThread() {
        if(acceptor) {
            // boost::asio::ip::tcp::acceptor does not have shutdown() functionality
            // exposed, so we need to do it with this low-level approach
            int shutdown_status = shutdown(acceptor->native_handle(), SHUT_RDWR);
        }
    }

}; 
```

另请注意，**使用信号解除阻塞接受线程**是非常讨厌的实现，**本地主机上的临时客户端连接解除阻塞接受线程**非常尴尬。

ASIO 可以帮助您**在单线程中通过回调**完成所有工作。如果您正在混合线程和 ASIO，那么您的设计可能很糟糕。

附加说明：不要混淆`shutdown()`和`close()`。某些系统可能允许您`close()`在接受套接字上使用来解除阻塞接受循环，但这不是可移植的。

# javascript - jquery plugin Uncaught TypeError: object is not a function

> ID：11191033
> 
> 赞同：2
> 
> 时间：2012-06-25T14:15:44.770
> 
> 标签：javascript, jquery

我刚刚创建了我的第一个`jQuery plugin`，它非常简单，`slideToggle`两个`Divs`，代码工作正常，它做我想要的，问题是我`ERROR`在控制台收到一条消息说：

```
Uncaught TypeError: object is not a function 
```

它指的是这行代码

```
})(jQuery); 
```

**代码**

```
 $(function($) {
            $.fn.toggleDiv = function(opt) {
                var options = $.extend({}, $.fn.toggleDiv.objectOptions, opt);
                return this.each(function() {
                    if (options.animation == true) {
                        $(this).slideToggle();

                    } else {
                        $(this).toggle();

                    }
                });
            };

            $.fn.toggleDiv.objectOptions = {
                animation: false
            };
            $("button").click(function() { $("#Div1, #Div2")
             .toggleDiv({animation : fa}); return false; });
        })(jQuery); 
```

有谁知道那个错误是什么，我该如何解决谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:24:52.027

你要么想做

```
(function ($) { ... })(jQuery); 
```

如果您希望您的代码立即运行，

或者

```
jQuery(function ($) { .... }); 
```

让您的代码在文档就绪状态下运行。

您指的是 $("button")，因此需要文档树可用。所以使用第二个版本。一个更好的解决方案是使用 jQuery 函数“delegate”，它看起来像这样：

```
jQuery(function ($) {
    $(document).delegate("button", "click", function (ev) { ... });
}); 
```

# jquery - 另一个网站上的工具提示

> ID：11191034
> 
> 赞同：0
> 
> 时间：2012-06-25T14:15:55.550
> 
> 标签：jquery, css

我刚刚偶然发现了一个有很好工具提示的网站：[https ://www.wetransfer.com/](https://www.wetransfer.com/)

每当您将鼠标悬停在“i”按钮或“en”按钮上时，您都可以看到工具提示。

关于如何重复这种淡入/淡出效果的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:35:38.060

你可以在没有 jQuery 的情况下使用 CSS3 - [http://jsfiddle.net/cTUgH/3/](http://jsfiddle.net/cTUgH/3/)

**HTML**

```
<a href="#">
    i <span> Tooltip Content </span>
</a> 
```

**CSS**

```
a {
    display: block;
    margin: 100px;
    height: 30px;
    width: 30px;
    border: 2px solid #aaa;
    background: #eee;
    color: #888;
    line-height: 30px;
    border-radius: 20px;
    text-align: center;
    font: italic bold 16px/30px Georgia;
    text-decoration: none;
    position: relative;
    transition: all .5s ease-in-out;
}

span {
    display: block;
    height: 230px;
    width: 150px;
    border: 2px solid #aaa;
    background: #eee;
    color: #888;
    position: absolute;
    top: -100px;
    left: 55px;
    border-radius: 20px;
    -webkit-transition: all .5s ease-in-out;
       -moz-transition: all .5s ease-in-out;
         -o-transition: all .5s ease-in-out;
            transition: all .5s ease-in-out;
    opacity: 0;
}

a:hover span {
    opacity: 1;
    left: 40px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:33:43.127

[这就是使用 jQuery 完成的方式](http://jsfiddle.net/Az4CW/)

当然，您可以用一系列不同类型的效果替换效果，例如摇摆、弹跳、缓入缓出等。这取决于您，但 jQuery 版本有 jist。

**标记**

```
<div id="mydiv" rel="This is where we hold the tooltip info for ease of use."> Hover this div. </div> 
```

**CSS**

```
#mydiv{
  position:relative;
  width:100px;   
}
#tips{
  height:100px;
  width:100px;
  position:absolute;
  top:0;
  left:105px;
  background:#ccc;
  border:1px solid #ccc;
  border-radius:5px;
  padding:5px; 
  opacity:0;
} 
```

**jQuery**

```
$(function(){
  $('#mydiv').hover(function(){
    $(this).append('<div id="tips">'+$(this).attr('rel')+'</div>');
    $('#tips').fadeTo(300, 1);
  }, function(){
    $('#tips').fadeTo(300, 0);
    $('#tips', this).remove();
  });
}); 
```

**编辑**

保留原始答案不变，提出了更具体的要求，我将答应。

*我不使用动画的“缓出”方法，而是简单地为左侧距离和不透明度设置动画。*

[我相信这更热衷于你的愿望](http://jsfiddle.net/Az4CW/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:19:38.900

AFAIS 他们使用 flash，但同样的效果可以用 jQuery 轻松重现。它具有开箱即用的淡入淡出效果。

# database - stackoverflow 类型网站的数据库组织

> ID：11191035
> 
> 赞同：0
> 
> 时间：2012-06-25T14:15:56.797
> 
> 标签：database

我想在stackoverflow上建立一个网站。我需要一些关于如何组织我的数据库的建议......比如每个用户应该有哪些字段，如何组织提出的问题和对他们的答复，他们得到的投票......如果有人可以帮助我包含所需的数据库表和其中的相应字段。提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:22:29.120

你自己看：

[https://data.stackexchange.com/stackoverflow/query/new](https://data.stackexchange.com/stackoverflow/query/new)

或者下载并试用一些 SO 克隆：

[http://www.osqa.net/](http://www.osqa.net/)

克隆列表：

[https://meta.stackexchange.com/questions/2267/stack-overflow-clones](https://meta.stackexchange.com/questions/2267/stack-overflow-clones)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:23:29.773

我不是一个傲慢的混蛋或任何东西，但这一切都取决于你想要优化什么以提高效率。您希望我们告诉您 DBA 会如何创建这样的网站。

我唯一可以分享的知识是我多年设计网站和作为软件工程师的经验。

确定您的系统需要的每个变量和子资产。你对用户有什么要求，需要维护什么。之后，获取我们的一些便利贴，然后转到白板。

当您确定您的表架构时，请将其发回此处，以便我们帮助您进行优化。IMO，您问的问题不是免费索取的。

这是一个漫长的过程。当您弄清楚您想要表格的方式时，我们可以将您所有的 varchars、bits 和 clob 调整为最好的。

在那之前，我祝你好运。

旁注：我不得不和一个 5 人的团队从头开始做这件事来弄清楚和设计一个项目。只需坐下来 1 天，确定您想要完成的每一件事，然后当您的便签可以四处移动时，这样做以找出您认为可以一起完成的事情。

# android - Android: java.lang.ClassCastException: android.widget.imageView 不能转换为 android.widget.textView

> ID：11191040
> 
> 赞同：60
> 
> 时间：2012-06-25T14:16:13.210
> 
> 标签：android, xml, templates, textview, imageview

我无法在我的 listview 模板上解决此问题：我的帖子标题中出现错误，但我不会将 imageview 转换为 textview。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="200dip"
android:layout_weight="1"
android:paddingBottom="10dip" >

<TextView
    android:id="@+id/mq"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Metri quadri"
    android:textColor="#33b5e5"
    android:textSize="14sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/citta"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/mq"
    android:layout_alignBottom="@+id/mq"
    android:layout_centerHorizontal="true"
    android:text="Citta"
    android:textColor="#33b5e5"
    android:textSize="14sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/prezzo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Prezzo"
    android:textColor="#e1e1e1"
    android:textSize="14sp"
    android:textStyle="bold" />

<TextView
    android:id="@+id/nome"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:padding="5dip"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="@string/testolungo"
    android:textColor="#e1e1e1"
    android:textSize="20sp"
    android:textStyle="bold" />

<ImageView
    android:id="@+id/foto"
    android:layout_width="80dip"
    android:layout_height="60dip"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:contentDescription="Release"
    android:padding="5dip"
    android:scaleType="centerCrop"
    android:src="@drawable/stub" />

<TextView
    android:id="@+id/descsplash"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Small Text"
    android:textSize="16sp"
    android:textStyle="italic" />

</RelativeLayout> 
```

java代码的错误在我文件的第58行，我将TextView id分配给TextView mq：

```
 View vi=convertView;
    if(convertView==null)
    vi = inflater.inflate(R.layout.listlay, null);
    TextView nome=(TextView)vi.findViewById(R.id.nome);
    TextView mq=(TextView)vi.findViewById(R.id.mq); // here's the error (???)
    TextView citta=(TextView)vi.findViewById(R.id.citta);
    TextView prezzo=(TextView)vi.findViewById(R.id.prezzo);
    ImageView image=(ImageView)vi.findViewById(R.id.foto);
    TextView descrizione = (TextView)vi.findViewById(R.id.descsplash);
    nome.setText(data.get(position).getNome());
    mq.setText(data.get(position).getMetriQuadri());
    citta.setText(data.get(position).getCitta());
    prezzo.setText(data.get(position).getPrezzo());
    descrizione.setText(data.get(position).getDescrizione());
    imageLoader.DisplayImage(data.get(position).getForoUrl(), image); 
```

这是logcat：

> 06-25 16:08:32.497: D/Debug(14642): Prendo Textview MQ
> 06-25 16:08:32.497: D/AndroidRuntime(14642): 关闭 VM
> 06-25 16:08:32.497: W/dalvikvm (14642): threadid=1: 线程以未捕获的异常退出 (group=0x40a561f8)
> 06-25 16:08:32.497: E/AndroidRuntime(14642): 致命异常: main
> 06-25 16:08:32.497: E/AndroidRuntime (14642): java.lang.ClassCastException: android.widget.ImageView 不能转换为 android.widget.TextView
> 06-25 16:08:32.497: E/AndroidRuntime(14642): at com.prova.listview.LazyAdapter.getView (LazyAdapter.java:58)

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-06-25T14:31:02.377

Eclipse 往往会时不时地弄乱您的资源。这会导致一些奇怪的行为，例如在整个应用程序中交换字符串和图像，以及更常见的 classCastException(s)，当 Eclipse 切换视图的 id 时会发生这种情况。

该问题的一些解决方案：

清理你的项目。

修改一个xml布局文件并保存。

删除你的 R 文件。（不用担心它会再次自动生成）。

基本上任何使您的项目重建和重新生成 R 文件的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:16:41.197

只需清理您的项目，一切都会好起来的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-02T14:15:43.093

最初，我收到错误：

`TextView : android:id="@+id/add_expected_seekbarvalue"`

`SeekBar : android:id="@+id/add_expected_seekbar"`

作为修复，我将for重命名`id`为`TextView`

`TextView : android:id="@+id/add_expected_valueseekbar"`

**甚至清理和其他技术都不起作用，但最终重命名 id 就像一个魅力。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T04:35:47.403

有时会出现此问题，因为我们创建了 ImageView 但使用 Image Button 进行投射，如下所示

```
 <ImageView
        android:id="@+id/iv_thumb"
        android:layout_width="50dip"
        android:layout_height="50dip"
        />

  holder.imageView = (ImageButton) convertView.findViewById(R.id.iv_thumb); 
```

我们已经声明了 Imageview 但转换为 ImageButton，因此也面临这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-02T19:10:04.167

用于**Visual Studio Xamarin.Android 开发**

就像许多人提到的那样，**清理**项目在 Visual Studio 上为我做了诀窍。对于我的 Xamarin.Forms 应用程序，它发生在使用新的库引用进行更改之后。

清理你的项目。

基本上任何使您的项目重建和重新生成 Rosource.Designer.cs 文件的东西。（来自@Benito Bertoli）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-22T06:17:25.210

只是清理你的项目......我也遇到了类似的问题......清理项目后一切都会好起来的......祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-28T15:11:12.013

也许您的 .xml 文件中有一个图像视图和一个在您的 java 代码中动态生成并给出一个 id 的按钮，这两个随机获得相同的 id，因此您会收到此错误。尝试更改您在代码中提供的 id 就可以了。

# pentaho - 可通过 DataFactory 接口访问的资源

> ID：11191045
> 
> 赞同：0
> 
> 时间：2012-06-25T14:16:21.597
> 
> 标签：pentaho

查看 org.pentaho.reporting.engine.classic.core.DataFactory 更具体地说是初始化方法（以前是 ContextAwareDataFactory 的一部分）我想知道哪些资源/上下文的哪些部分可以通过接口访问，例如通过资源管理器。

例如，是否可以访问报表中定义的“资源”，例如数据源或公式（除了可通过查询方法访问的报表参数）？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:35:18.290

资源管理器允许您访问存储在 zip/prpt 文件中的原始数据 - 但我们不允许您访问已解析的报告或其任何（已解析的）组件。

例如，使用资源管理器，您可以加载嵌入的 xml 或其他文件，并将它们作为查询过程的一部分进行解析。

如果您要做一些需要访问报告定义及其内容的额外讨厌的事情，那么您*可以*通过使用子报告的狂野黑客获得访问权限：

1.  创建一个新的报告功能（通过代码）。在该函数中，重写“reportInitialized”方法以获取报告实例（“event.getState().getReportDefinition()”）。将该对象存储在函数中并通过函数的“getValue()”方法返回它。

2.  将该函数的结果作为参数传递给子报表。

3.  子报表的数据工厂现在可以访问参数，该参数是主报表函数返回的报表对象。

这个过程故意复杂而不有趣。我们强烈反对在查询数据的过程中使用报表。

PS：如果您打算从可编写脚本的数据源访问 SQL/MQL/MDX 数据源，那么只需使用自 PRD-3.9 以来内置在这些数据源中的脚本扩展。

[http://www.sherito.org/2011/11/pentaho-reportings-metadata-datasources.html](http://www.sherito.org/2011/11/pentaho-reportings-metadata-datasources.html)

# ios - 奇怪的日期格式行为，iOS

> ID：11191047
> 
> 赞同：1
> 
> 时间：2012-06-25T14:16:23.077
> 
> 标签：ios, date, format

我正在尝试从此转换日期：

`2012-06-26 12:00:00 +0000`

对此：

```
Jun 26, 2012 12:00:00 AM 
```

如果我使用此代码，它可以工作：

```
NSString *inputString = @"2012-06-25 12:00:00 +0000";

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss z"];//input

    NSDate *date = [formatter dateFromString:inputString];

    [formatter setDateFormat:@"MMM dd, yyyy hh:mm:ss a"];
    NSString *outputString = [formatter stringFromDate:date];

    NSLog(@"Output Date is: %@" , outputString); 
```

并且打印的日期是正确的：`Jun 26, 2012 12:00:00 AM`

然而，当我不对日期进行硬编码时，事情变得非常奇怪，而是使用一个函数来获取它。编码 ：

```
 NSString *inputString2 = [self.selectedDate description]; 
    NSLog(@"%@",inputString2);

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss z"];//input

    NSDate *date = [formatter dateFromString:inputString2];

    [formatter setDateFormat:@"MMM dd, yyyy hh:mm:ss a"];
    NSString *outputString = [formatter stringFromDate:date];

    NSLog(@"Output Date is: %@" , outputString); 
```

当我在代码的开头打印 inpuString2 变量只是为了确保日期由函数正确传递时，我有这个：`2012-06-25 12:00:00 +0000`这是正确的日期。但是现在打印时输出日期为零！

有任何想法吗？？这怎么可能？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:25:11.930

它是格式化程序的日期格式字符串

你有

```
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss z"]; 
```

试试吧

```
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"]; 
```

注意：**HH**不是 hh，**Z**不是 z。

RE：第二个格式化字符串 - 您可以将其更改为

```
 [formatter setDateFormat:@"MMM dd, yyyy HH:mm:ss a"]; 
```

（但我以为你只是在问**nil**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:25:16.267

我假设`selectedDate`日期是`NSDate`，而不是转换使用以下

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MMM dd, yyyy hh:mm:ss a"];
NSString *outputString = [formatter stringFromDate:self.selectedDate];
NSLog(@"Output Date is: %@" , outputString); 
```

这可能无法回答您的问题，但它应该为您提供正确的日期

# nservicebus - NServiceBus 二级重试使用没有 Raven 或数据库依赖的事务消息

> ID：11191050
> 
> 赞同：1
> 
> 时间：2012-06-25T14:16:40.137
> 
> 标签：nservicebus

有什么方法可以配置二级重试而不需要对 RavenDB 的额外依赖或更改数据库架构？

我们有一个使用 NServiceBus 和事务消息队列的现有系统，并且在 .NET Windows 服务中自托管 NServiceBus。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:19:15.617

第二级重试利用 NServiceBus 中的超时管理功能，您可以将其配置为使用 NHibernate 而不是 RavenDB，如本页底部所述：http: [//docs.particular.net/nservicebus/nhibernate/](http://docs.particular.net/nservicebus/nhibernate/)

# javascript - IE 不喜欢我的输入和图像标签

> ID：11191053
> 
> 赞同：0
> 
> 时间：2012-06-25T14:16:48.430
> 
> 标签：javascript, html, image, internet-explorer, input

我的代码：

```
var data = $(input)[0];
var file = data.files[0];
var reader = new FileReader();
reader.onload = function (e) {
  value = e.target.result;
  try {
   top.document.getElementById('formDesignContents').contentWindow.updateFormFromToolbar(CURRENT_ATTRIBUTE, value, opts);
  } catch (err) {
     alert("error connecting to formDesignContents iframe from the toolbar");
  }
}
reader.readAsDataURL(file); 
```

它适用于 GoogleChrome，但不适用于 IE。对于 IE，它不识别 input 元素下的属性文件。jquery 是将 jquery 对象解引用回标准 html 元素。

还有其他方法可以让 IE 正常工作吗？我可以轻松地做其中之一

```
if(IE){...}else{...} 
```

代码块。我只是不明白为什么它不识别这些项目。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:23:33.237

IE 不支持`FileReader`，所以我希望你的脚本在这一行崩溃：

```
var reader = new FileReader(); 
```

除非你用的是IE10？

[https://developer.mozilla.org/en/DOM/FileReader#Browser_compatibility](https://developer.mozilla.org/en/DOM/FileReader#Browser_compatibility)

# c# - 从 C# 中的字符串检查完整域

> ID：11191055
> 
> 赞同：0
> 
> 时间：2012-06-25T14:17:01.253
> 
> 标签：c#, regex

如何使用正则表达式检查字符串是完整域还是子域。

喜欢

```
abc.com | Full domain
xyz.abc.com | Subdomain
test.co.uk | Full domain
text.test.co.uk/ | Subdomain 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:23:28.647

递归地进行 DNS 查找，同时一次从左侧删除一个部分

**子域**

```
xyz.abc.com //DNS check PASS
abc.com //DNS check PASS 
```

**领域**

```
xxx.com.hk //DNS check PASS
com.hk //DNS check FAIL 
```

如果没有名称服务器/DNS 解析因其他原因而失败，则确认它是否是子域的另一种方法是使用 IANA 的 TLD (Top-Level Domain) Registry [Here](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)。

**（谨慎使用）**

**有几种情况，例如`com.com`,`com.google.com`和其他几个在其名称中使用 TLD 的 URL。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T22:32:22.853

使用 Regex 如果无法检查是域还是子域。大多数浏览器使用 Mozilla 的项目来解决这个问题 - PublicSuffix。它是一个维护的 TLD 列表。

您可以使用以下 nuget 包。（安装包 Nager.PublicSuffix） [https://www.nuget.org/packages/Nager.PublicSuffix/](https://www.nuget.org/packages/Nager.PublicSuffix/)

例子：

```
 var domainParser = new DomainParser();
 var data = await domainParser.LoadDataAsync();
 var tldRules = domainParser.ParseRules(data);
 domainParser.AddRules(tldRules);

 var domainName = domainParser.Get("sub.test.co.uk");
 //domainName.Domain = "test";
 //domainName.Hostname = "sub.test.co.uk";
 //domainName.RegistrableDomain = "test.co.uk";
 //domainName.SubDomain = "sub";
 //domainName.TLD = "co.uk"; 
```

# objective-c - xCode 动态创建 ViewControllers

> ID：11191056
> 
> 赞同：1
> 
> 时间：2012-06-25T14:17:12.570
> 
> 标签：objective-c, xcode, uiviewcontroller

我希望能够基于`JSON`文件动态创建 ViewController。我的意思是，会有一个 json 来决定用户需要多少个 ViewController。也就是说，我有一个 json 文件，其中列出了 5 个 ViewControllers，我希望能够动态创建这些 ViewControllers 并能够在它们之间进行转换。

所以我将拥有的是`JSON`文件，它列出了 ViewControllers，比如这个例子中的 3。此 JSON 文件包含有关文本、按钮等以及如何在它们之间导航的信息。

所以我希望能够遍历这个`JSON`，并创建必要的视图控制器并添加所需的文本、按钮等。这`JSON`也将决定视图控制器如何链接在一起。

我知道如何创建一个 VC 并添加这样的信息（这只是一个简单的示例，刚刚创建了 vc 并添加了标签。

```
 UIViewController *vc = [[UIViewController alloc] init];
    vc.view.backgroundColor = [UIColor whiteColor];

    UILabel *testLabel =[[UILabel alloc] initWithFrame:CGRectMake(220, 50, 130, 80)];
    testLabel.backgroundColor = [UIColor clearColor];
    testLabel.textColor = [UIColor blackColor];
    testLabel.text = @"Hello";;

    [vc.view addSubview:testLabel ];
    [self.navigationController pushViewController:vc animated:YES]; 
```

我不知道如何使用 JSON 在循环中创建几个不同命名的 ViewController。有人对如何做到这一点有任何想法吗？或者这样的事情甚至可能吗？

任何帮助将不胜感激。

编辑：

JSON看起来像什么的非常基本的例子

```
{
   "ViewControllers":[
      {
         "name":"FirstVC",
         "id":1
      },
      {
         "name":"SecondVC",
         "id":2
      },
      {
         "name":"ThirdVC",
         "id":3
      }
   ]
} 
```

所以第一个VC链接到secondVC，第二个链接到thirdVC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:24:44.160

只需创建一个数组并将它们保存在那里。像这样的东西：

```
NSMutableArray *viewControllers = [[NSMutableArray alloc] initWithCapacity:0];

// ...
// Inside a loop
UIViewController *vc = [[UIViewController alloc] init];
vc.view.backgroundColor = [UIColor whiteColor];

UILabel *testLabel =[[UILabel alloc] initWithFrame:CGRectMake(220, 50, 130, 80)];
testLabel.backgroundColor = [UIColor clearColor];
testLabel.textColor = [UIColor blackColor];
testLabel.text = @"Hello";

[viewControllers addObject:vc];
// Release vc and label if you're not using ARC 
```

现在，如果你想命名你的控制器，一个想法是创建一个子类`UIViewController`并添加一个`name`（或类似的）属性。然后，您只需在循环内设置此属性，您就可以根据该属性引用/过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:22:47.347

您不会将它们显式命名为单独的变量，而是可能有一个不同 UIViewController 实例的 NSArray。当您阅读 JSON 文件时，您可以遍历显示的信息，创建一个视图控制器，并在每次 JSON 告诉您时将其添加到数组中。完成后，您可以在用户来回导航时将视图控制器拉出阵列。

你的 JSON 是什么样的？发布一个示例，我们也许可以提供更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:25:30.383

为什么你的 ViewControllers 需要不同的名字？您应该简单地创建一个 viewController 类的实例。

例如，如果您有 3 个来自 JSON 的“屏幕”：

1.  家
2.  第二
3.  关于

它们都有不同的按钮、文本等。你有一个类名 MyViewController。如果你想区分你的屏幕，这个类可能有一个@property 名称、@property 按钮（可能是 NSArray 和你的按钮管理类中的对象）等。

接下来，您应该将对象（MyViewController 类对象）存储在 NSArray 中。

所以当应用程序启动时你想做什么：你创建了一个 MyViewController 类的对象并显示它。如果用户想转到第二个屏幕，您应该简单地创建同一类的另一个实例。

因此，如果您想显示屏幕的名称，`self.name`您的 ViewController 类中有一个值。

# automation - QTP 在执行更新运行模式时将对象添加到本地存储库

> ID：11191057
> 
> 赞同：1
> 
> 时间：2012-06-25T14:17:13.463
> 
> 标签：automation, qtp

我总共创建了 50 个测试脚本。所有这些脚本都使用几乎相同的对象，因此我创建了一个共享存储库来简化维护工作。

但问题是......在更新运行模式下执行脚本时，QTP 会在本地存储库中添加一些对象，即使它们存在于共享存储库中。我检查了这些新添加的对象的属性，也没有任何变化。

任何人请告诉我 QTP 用来决定是否将对象添加到本地存储库的逻辑。还告诉我一个解决方案，以便不会将任何对象添加到本地存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:37:59.657

这里有两件事在起作用。

1.  QTP 以只读模式打开共享对象存储库 (SOR)，因为根据定义，SOR 是共享的，QTP 希望确保当有人对 SOR 进行更改时，他知道许多测试可能会受到影响。因此，为了编辑 SOR，您必须使用对象存储库管理器，并且不会自动对 SOR 进行任何更改（*更新运行模式*或*维护运行模式*）
2.  将对象添加到对象存储库时，QTP 首先检查对象是否已经存在（通过比较属性），如果存在，它会重用现有对象并且不会创建新条目。

这解释了为什么您在*本地对象存储库*(LOR) 而不是 SOR 中获取对象，（我不确定将未修改的对象添加到 LOR 是否是正确的行为）。

为了在*更新运行模式*之后传播更改，您应该将 LOR 导出到新的 SOR，然后将其与现有的 SOR 合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:28:23.387

我也遇到过类似的问题。虽然执行脚本 qtp 未识别对象，但对象存在于共享 OR 中并且它在应用程序中突出显示。当我在维护运行模式下检查时，我在共享 OR 中更新的一个属性值发生了变化。问题是我监视了那个对象，qtp 将它保存在本地 OR 中。所以下次当我运行它从本地 OR 引用的脚本时，脚本失败了。所以我从对象存储库窗口中删除了对象（显示为本地），然后它显示了共享 OR 的相同对象（这是 QC 路径）

# spring - 使用 Spring 3.0 进行 Jqgrid 搜索结果分页

> ID：11191060
> 
> 赞同：0
> 
> 时间：2012-06-25T14:17:21.850
> 
> 标签：spring, spring-mvc, jqgrid, spring-roo

我有几个 jqgrids 正在运行，并且都运行良好。但是，当我进行搜索时，每页只显示十个搜索结果。每当有超过十个结果时，单击第二页对网格没有影响。这是我的控制器操作之一，请特别注意搜索为真的 if satatement....

**编辑**

我想我可能已经找到了可能导致我的问题的线索。你看我在主网格下有几个子网格。就我的java代码而言，我有**object-A**，它有一个**object-B**列表 ，因此**A**有一个**B**的子网格。我构建 json 字符串以馈送到网格的方式是遍历**A**中包含的**B**列表。我没有写某种查询来说明排序，并限制结果等。

 **所以我想真正的问题应该是如何在集合上构建一个查找器，以便可以按照我的意愿安排和订购内容？

**这是我为上述B**描述的我的一个实体所要求的行动。特别注意我所说的**person.getContacts()**

```
@RequestMapping(value = "contactjsondata/{pId}", method = RequestMethod.GET)
public @ResponseBody String contactjsondata(@PathVariable("pId") Long personId, Model uiModel, HttpServletRequest httpServletRequest) {
    Person person = Person.findPerson(personId);  
    String column = "id";
if(httpServletRequest.getParameter("sidx") != null){
    column = httpServletRequest.getParameter("sidx");
}
String orderType = "DESC";
if(httpServletRequest.getParameter("sord") != null){
    orderType = httpServletRequest.getParameter("sord").toUpperCase();
}
int page = 1;
if(Integer.parseInt(httpServletRequest.getParameter("page")) >= 1){
    page = Integer.parseInt(httpServletRequest.getParameter("page"));
}
int limitAmount = 10;
int limitStart = limitAmount*page - limitAmount;
List<Contact> contacts = new ArrayList<Contact>(person.getContacts());        
double tally = Math.ceil(contacts.size()/10.0d);
int totalPages = (int)tally;
int records = contacts.size();

    StringBuilder sb = new StringBuilder();
sb.append("{\"page\":\"").append(page).append("\", \"records\":\"").append(records).append("\", \"total\":\"").append(totalPages).append("\", \"rows\":[");
boolean first = true;
for (Contact c: contacts) {
    sb.append(first ? "" : ",");
    if (first) {
        first = false;
    }
    sb.append(String.format("{\"id\":\"%s\", \"cell\":[\"%s\", \"%s\", \"%s\"]}",c.getId(), c.getId(), c.getContactType().getName() ,c.getContactValue()));
}
sb.append("]}"); 
return sb.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:40:37.367

要解决分页问题，​​您需要替换以下代码块

```
for (Contact c: contacts) {
    sb.append(first ? "" : ",");
    if (first) {
        first = false;
    }
    sb.append(String.format("{\"id\":\"%s\", \"cell\":[\"%s\", \"%s\", \"%s\"]}",c.getId(), c.getId(), c.getContactType().getName() ,c.getContactValue()));
} 
```

和：

```
for (int i=limitStart; i<Math.min(records, limitStart+limitAmount); i++){
    Contact c = contacts[i];
    sb.append(first ? "" : ",");
    if (first) {
       first = false;
    }
    sb.append(String.format("{\"id\":\"%s\", \"cell\":[\"%s\", \"%s\", \"%s\"]}",c.getId(), c.getId(), c.getContactType().getName() ,c.getContactValue()));
} 
```

另一种选择是使用 loadonce:true 让 jqGrid 处理分页和排序。在这种情况下，您不需要进行上述更改**

# javascript - EmbjerJS vs BackboneJS vs JavascriptMVC

> ID：11191061
> 
> 赞同：2
> 
> 时间：2012-06-25T14:17:22.087
> 
> 标签：javascript, jquery, backbone.js, ember.js, javascriptmvc

我的这个问题是关于不学习或询问所有这些的基本结构和变化，它只是关于拥有所有假装另一个框架到一个框架的 GURU 中最强大的标准。

我知道以前很多人都问过这个问题，但这一次，我想从不同的角度出发。似乎，我对谷歌进行了一些研究，以了解所有人在比较中所做的事情。最后我得到了，

**骨干**

*   框架重量最轻，低至 5.5KB。
*   缺少基于此[链接的文档](http://backbonefu.com/2011/09/knockout-vs-javascriptmvc-vs-backbone/)
*   遵循严格的 MVC 规则。
*   要使其模块化，您需要使用 AMD 进行配置
*   聚焦 _underscore（框架库）来启动

**JavaScript MVC**

*   丰富的 UI 组件

*   沉重的框架。

*   低挫败感。

*   普通文档。

*   提供用于测试的核心实体

*   由 Steal 提供支持，供命令行使用

*   当然MVC

*   只需在 DOM 中加载 2 个文件

*   拥有 4 个不同的模板引擎。

**EmberJS**

*   比 BackBoneJs 更多。只是为了填补 Backbone 留下的所有空白
*   43K 大小。为所有内容提供帮助程序库，从而减少代码
*   可与 AMD 一起使用，使其模块化。
*   没有更多的文档足够受欢迎。
*   使用把手模板。

这些是一些要点，每个框架都有自己的特点。现在，重点来了，如果我们要将它们用于混合移动应用程序，哪一个好？

想一想，我正在使用 PhoneGap 和 jQuery Mobile，现在让我的代码以后可扩展并为应用程序提供完美的层次结构，哪个是最适合移动应用程序开发的框架？

它会根据速度、层次结构、可靠性、加载时间、Ajax 调用（Helper 的东西）和相关的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:43:17.060

也看看[knockoutjs](http://knockoutjs.com/)

[Knockout.js 与 Backbone.js（与？）](https://stackoverflow.com/questions/5112899/knockout-js-vs-backbone-js-vs)

我个人的看法是用映射插件淘汰。

就我而言，这种观点的最佳论据是 a) Knockout 不需要将它们的类用作模型的超类，并且 b) 带有 Knockout 的代码更简洁。

但是 BackBone 也很好。

# iphone - 如何将 UIPickerView 重置为索引：0，iPhone

> ID：11191062
> 
> 赞同：11
> 
> 时间：2012-06-25T14:17:24.973
> 
> 标签：iphone, ipad, uipickerview

我正在尝试重置`UIPickerView`on 按钮单击。我的 pickerview id 是在运行时创建的，我已经设置了代表。谷歌搜索后，我发现

```
[pickerView reloadAllComponents]; 
```

但这会使我的应用程序每次到达这里时都会崩溃。

索引 0 处的对象是“从列表中选择”，然后是项目。单击提交按钮时，我希望“从列表中选择”应保留在标签的顶部（选定索引：0）。

这是我的代码

```
ViewDidload

 pickerView = [[UIPickerView alloc] init];
    pickerView.delegate = self;
    pickerView.dataSource = self;

  -(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 1;
    }

 // Total rows in our component.
    -(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
        return [nameArray count];
    }

// Display each row's data.
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
    return [nameArray objectAtIndex: row];
    }

// Do something with the selected row.

    -(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
        dlbl.hidden=YES;
        NSLog(@"You selected this: %@", [nameArray objectAtIndex: row]);
        [btnSelectDesigner setTitle:[nameArray objectAtIndex: row] forState:UIControlStateNormal]; 

    } 
```

并且，在按钮单击时：

```
-(IBAction)btnSubmitClicked:(id)sender{
[pickerView reloadAllComponents];
} 
```

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-25T14:22:50.480

```
[picker reloadAllComponents];
[picker selectRow:0 inComponent:0 animated:YES]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-05T20:59:27.417

斯威夫特版本：

`picker.selectRow(0, inComponent: 0, animated: true)`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T14:27:14.487

```
//use this line for going at the top of the label index 0:

[picker selectRow:0 inComponent:0 animated:YES]; 
```

# wpf - wpf在调整画布父级时拉伸一条线

> ID：11191064
> 
> 赞同：3
> 
> 时间：2012-06-25T14:17:27.387
> 
> 标签：wpf, canvas, resize, line, stretch

我有一条垂直线和一条水平线，当我动态调整画布父级时，我想调整它们的大小。（地标）

我希望水平线始终距画布的左右边界 25 处，距底部边界 13 处。

垂直线也是如此，距顶部和底部边框 25 处，距左边框 13 处。

有简单的解决方案吗？我可以将我的画布更改为另一个控件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T15:00:17.153

只需将线条粘贴在画布顶部的网格中即可获得正确的行为

```
<Grid Width="600" Height="600">
   <Canvas Background="LightBlue">
    // stuff here
   </Canvas>
   <Grid>
      <Rectangle Fill="Black" Height="1" 
         Stroke="Black" VerticalAlignment="Bottom" Margin="25,0,25,13"/>
      <Rectangle Fill="Black" 
         HorizontalAlignment="Left" Stroke="Black" Width="1" Margin="13,25,0,25"/>
   </Grid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:24:17.407

我会`Converters`根据你的and`ActualHeight`来设置你的对象的高度、宽度和位置`ActualWidth``Canvas``Line`

为了避免编写一堆单独的转换器，我在我的博客上发布了一个可以用于所有计算的[MathConverter 。](http://rachel53461.wordpress.com/tag/math-converter/)

```
<Canvas x:Name="MyCanvas">

    <!-- Horizontal Line: 25 from each side, and 13 from bottom -->
    <!-- May need to adjust the Canvas.Top ConverterParameter based on Line height -->
    <Line Height="1"
          Canvas.Left="25"
          Canvas.Top="{Binding ElementName=MyCanvas, Path=ActualHeight, 
              Converter={StaticResource MathConverter}, 
              ConverterParameter=@VALUE-14}"
          Width="{Binding ElementName=MyCanvas, Path=ActualWidth, 
              Converter={StaticResource MathConverter}, 
              ConverterParameter=@VALUE-50}" ... />

    <!-- Vertical Line: 25 from top and bottom, and 13 from left -->
    <Line Canvas.Left="13" Canvas.Top="25"
          Height="{Binding ElementName=MyCanvas, Path=ActualHeight, 
              Converter={StaticResource MathConverter}, 
              ConverterParameter=@VALUE-50}" ... />

</Canvas> 
```

因为这些都是绑定，所以它们会在绑定属性更改时刷新（`MyCanvas.ActualHeight`和`MyCanvas.ActualWidth`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:38:07.890

在需要设置的情况下使用`Grid`而不是。`Canvas``Margin`

要使您的线条与边框有空间，请转到“属性”并`Margin`在“布局区域”中使用以设置空间。对于您的水平线，将`VerticalAlignment`to`Bottom`和 Horizo​​ntalAlignment 设置为`Stretch`。保证金应`25,0,25,13`在这种情况下。

对于您的垂直线，将 the设置`VerticalAlignment`为to 。保证金应该是`Stretch``HorizontalAlignment``Left``13,25,0,25`

祝你好运

# c# - 手动排序 ObservableCollection<>

> ID：11191074
> 
> 赞同：0
> 
> 时间：2012-06-25T14:18:27.950
> 
> 标签：c#, .net, windows-phone-7, windows-phone-7.1, observablecollection

我`ObservableCollection`在课堂上有关注，我正在将数据绑定到我在应用程序`listbox`中使用该集合`Windows phone 7`

```
public ObservableCollection<CustomClass> myList = new ObservableCollection<CustomClass>(); 
```

## 我的自定义类

```
public class CustomClass
{
public string Id { get; set; }        
public string Name { get; set; }        
public string EventName { get; set; }        
public string EventDate get
{
    return EventDate;
}
set
{
    if (value != null)
    {
        DateTime eventDate = DateTime.Parse(value);
        int today = DateTime.Now.Day;
        if (eventDate.Day <= today + 1 & eventDate.Day >= today - 2)
        {
            if (eventDate.Day == today)
            EventDate = "Today";
            else if (eventDate.Day == (today + 1))
            EventDate = "Tomorrow";
            else if (eventDate.Day == (today - 1))
            EventDate = "Yesterday";
            else if (eventDate.Day >= (today - 2))
            EventDate = "Just Passed";
        }
        else
        {
            EventDate = value;
        }
    }
}
} 
```

现在我想`myList`根据数据中的数据进行排序`EventDate`

在所有情况下，EventDate 中的数据将是以下之一

1.  刚刚过去
2.  昨天
3.  明天
4.  今天
5.  日期 //格式“MMM/dd”

**自定义 Collection 只能按照上面的顺序排序**

我从不同来源获取数据，因此在将数据绑定到集合时无法进行排序

是否可以？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:26:29.007

由于您的 CustomClass 没有实现 INotifyPropertyChange，我假设您只需在插入时进行排序（添加到集合时）。所以恕我直言，最简单的事情（类似于 Randolf Rincón-Fadul 的解决方案）是子类化，然后覆盖 Add 方法。

```
public class ComparingObservableCollection<T> : ObservableCollection<T>
     where T : IComparable<T>
{

    protected override void InsertItem(int index, T item)
    {
        int i = 0;
        bool found = false;
        for (i = 0; i < Items.Count; i++)
        {
            if (item.CompareTo(Items[i]) < 0) {
                found = true;
                break;
            }
        }

        if (!found) i = Count;

        base.InsertItem(i, item);
    }
} 
```

然后你所要做的就是`IComparable<CustomClass>`像这样在 CustomClass 上实现：

```
public class CustomClass : IComparable<CustomClass>
{
public string Id { get; set; }        
public string Name { get; set; }        
public string EventName { get; set; }        
public string EventDate { get
{
    return EventDate;
}
set
{
    if (value != null)
    {
        DateTime eventDate = DateTime.Parse(value);
        int today = DateTime.Now.Day;
        if (eventDate.Day <= today + 1 & eventDate.Day >= today - 2)
        {
            if (eventDate.Day == today)
            EventDate = "Today";
            else if (eventDate.Day == (today + 1))
            EventDate = "Tomorrow";
            else if (eventDate.Day == (today - 1))
            EventDate = "Yesterday";
            else if (eventDate.Day >= (today - 2))
            EventDate = "Just Passed";
        }
        else
        {
            EventDate = value;
        }
    }
}
    private int Order { get {
       switch(EventDate) {
         case "Just Passed": return 1;
         case "Yesterday": return 2;
         case "Tomorrow": return 3;
         case "Today": return 4;
         default: return 5;
       }
    }
    }

    public int CompareTo(CustomClass other) {
       return this.Order.CompareTo(other.Order);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:33:21.510

看过这里？？

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5909dbcc-9a9f-4260-bc36-de4aa9bbd383/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/5909dbcc-9a9f-4260-bc36-de4aa9bbd383/)

底部有一些不错的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:41:53.123

你总是可以子类化：

```
/// <summary>
/// Represents a dynamic data collection that provides notifications when items get added, removed, or when the whole list is refreshed and allows sorting.
/// </summary>
/// <typeparam name="T">The type of elements in the collection.</typeparam>
public class SortableObservableCollection<T> : ObservableCollection<T>
{
    /// <summary>
    /// Sorts the items of the collection in ascending order according to a key.
    /// </summary>
    /// <typeparam name="TKey">The type of the key returned by <paramref name="keySelector"/>.</typeparam>
    /// <param name="keySelector">A function to extract a key from an item.</param>
    public void Sort<TKey>(Func<T, TKey> keySelector)
    {
        InternalSort(Items.OrderBy(keySelector));
    }

    /// <summary>
    /// Sorts the items of the collection in ascending order according to a key.
    /// </summary>
    /// <typeparam name="TKey">The type of the key returned by <paramref name="keySelector"/>.</typeparam>
    /// <param name="keySelector">A function to extract a key from an item.</param>
    /// <param name="comparer">An <see cref="IComparer{T}"/> to compare keys.</param>
    public void Sort<TKey>(Func<T, TKey> keySelector, IComparer<TKey> comparer)
    {
        InternalSort(Items.OrderBy(keySelector, comparer));
    }

    /// <summary>
    /// Moves the items of the collection so that their orders are the same as those of the items provided.
    /// </summary>
    /// <param name="sortedItems">An <see cref="IEnumerable{T}"/> to provide item orders.</param>
    private void InternalSort(IEnumerable<T> sortedItems)
    {
        var sortedItemsList = sortedItems.ToList();

        foreach (var item in sortedItemsList)
        {
            Move(IndexOf(item), sortedItemsList.IndexOf(item));
        }
    }
} 
```

然后使用 lambda 表达式排序

```
((SortableObservableCollection<CustomClass>)MyList).Sort(s => s.EventDate); 
```

# c# - Visual Studio 部署包更改文件权限

> ID：11191077
> 
> 赞同：2
> 
> 时间：2012-06-25T14:18:32.927
> 
> 标签：c#, windows, winforms, visual-studio-2010, setup-deployment

由于安全隐患，这可能是不可能的......我在 Visual Studio 中为 Win Form 创建了一个部署包。应用程序在本地引用 app.config 文件，并允许用户通过应用程序更改其中的设置。当我部署应用程序并尝试保存所做的更改时，Windows 显示“权限被拒绝”。是否有一个命令可以作为安装的一部分运行，它将授予我的 app.config 文件的“所有人”安全权限......从而允许我的应用程序对其进行编辑？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:57:04.877

如果您希望能够写入 app.config 文件，则需要将其移动到 Shared Application Data 目录并修改您的应用程序以从那里读取配置信息。以 Win7 为例：

> C:\ProgramData\YourCompany\YourApp\app.config

在 C# 中，获取通用应用数据目录：

```
// using System.IO;
string appDataDir = Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:04:06.923

您也许可以在安装程序中使用自定义操作来运行[icacls](http://technet.microsoft.com/en-us/library/cc753525%28v=ws.10%29)，以便为所有人提供完全访问权限：

`icacls {Path to App.config} /grant Everyone:(F)`

# php - 以预期的格式呈现响应

> ID：11191078
> 
> 赞同：6
> 
> 时间：2012-06-25T14:18:46.207
> 
> 标签：php, symfony

根据请求的格式，Symfony2 返回相同类型的响应（html、css、json 等）。这是非常明显的。但是，如果我以定义的格式制作模板并在该上下文中执行转义字符，但最终页面以不同的格式呈现，这不会产生危险的输出吗？

示例：[http ://symfony.com/it/doc/current/book/index.html?_format=json](http://symfony.com/it/doc/current/book/index.html?_format=json)

是否存在无意创建可能包含危险输出/意外的资源的危险？这是故意的？为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T16:19:33.713

在 Symfony2 官方文档的情况下，我认为这是故意的。但是，如果您以定义的格式制作模板并在该上下文中执行转义字符，则可以强制执行请求允许的格式，如下所示：

```
article_show:
  pattern:  /articles/{culture}/{year}/{title}.{_format}
  defaults: { _controller: AcmeDemoBundle:Article:show, _format: html }
  requirements:
    culture:  en|fr
    _format:  html|rss
    year:     \d+ 
```

这个例子突出了特殊的`_format`路由参数。使用该参数时，匹配的值成为Request对象的“请求格式”。最终，请求格式用于诸如设置响应的 Content-Type 之类的事情（例如，json 请求格式转换为 application/json 的 Content-Type）。它还可以在控制器中用于为 _format 的每个值呈现不同的模板。_format 参数是一种以不同格式呈现相同内容的非常强大的方法。[阅读更多...](http://symfony.com/doc/current/book/routing.html#advanced-routing-example)

# mysql - 在行之间循环和复制数据

> ID：11191083
> 
> 赞同：0
> 
> 时间：2012-06-25T14:18:58.433
> 
> 标签：mysql

我有一个简单而困难的问题。我有以下表结构：

`I D ``indx_1 ``indx_2 ``indx_3 `
`1   ``val_1   ``val_2   ``val_3   `
`1   ``val_1   ``val_2   ``val_3   `
`1   ``val_1   ``val_2   ``val_3   `
`2   ``val_4   ``val_5   ``val_6   `
`2   ``val_4   ``val_5   ``val_6   `
`2   ``val_4   ``val_5   ``val_6   `

并希望得到如下所示的结果：

`I D ``indx_1 ``indx_2 ``indx_3 `
`1   ``val_1   ``val_2   ``val_3   `
`1   ``val_2   ``val_2   ``val_3   `
`1   ``val_3   ``val_2   ``val_3   `
`2   ``val_4   ``val_5   ``val_6   `
`2   ``val_5   ``val_5   ``val_6   `
`2   ``val_6   ``val_5   ``val_6   `

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:22:30.320

```
select id, 
       concat('val_', @row := @row + 1) as idx_1, 
       idx_2, 
       idx_3
from your_table, 
     (SELECT @row := 0) r 
```

# apache-flex - 创建 Flex 3d 组件

> ID：11191087
> 
> 赞同：0
> 
> 时间：2012-06-25T14:19:09.307
> 
> 标签：apache-flex, 3d, components

基于现有 Flex 组件创建 flex 3d 组件的正确方法是什么。例如，如果我想使用现有的 spark 数据网格制作 3D 数据网格。是否可以通过 Maya 在 Flash 中创建 3D 皮肤，然后尝试将此 Flash 组件应用于数据网格的皮肤类。

也可以将 Spark DataGrid 与 Proscenium 一起使用。实际上是在 3D 空间中看到我的 DataDrid。

# css - html5 导航高度样式

> ID：11191102
> 
> 赞同：-2
> 
> 时间：2012-06-25T14:19:58.003
> 
> 标签：css, html

html:

```
<body>
        <div>
            <header>
            HTML5
            </header>           
            <nav>
             <ul>
                    <li><a href="">Home</a></li>
                    <li><a href="">Logout</a></li>
                    <li><a href="">Login</a></li>

             </ul>

            </nav>
            <p id="navclear" /> 
```

CSS：

```
/*page*/
body{
    margin:0 auto;
    width: 800px;
    height:auto;
    border: 1px solid black;
}

/*navigation*/
nav{
    border: 1px solid black;
    background-color: #E3E3E3;
    height:auto;
}
nav ul{
    list-style:none;
    padding:0;
    !margin-top:0;

}

nav li a{
    float:left;
    text-decoration:none;
    display: block;
    padding-right:5px;
    width:75px;
    background-color: #E3E3E3;
    color:#66777F;
    !line-height: .5em;
    font-weight: bold;
    font-family:Cantarell, Arial, Helvetica, sans-serif;
}

nav li a:hover{
    color: #FE4C06;
}

#navclear{
    clear:both;
} 
```

我是 html5 的新手。在这里我遇到了高度属性的问题。我想让我的导航高度自动我用上面的语法尝试了同样的方法，但是 ul 部分从 nav.Means height:auto; 不工作。我无法通过 nav ul {margin-top:0;} 修复相同的问题。我的问题是如何使导航高度自动？

[http://jsbin.com/alukej/edit#javascript,html,live](http://jsbin.com/alukej/edit#javascript,html,live)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:41:50.150

**编辑**

正如三十多点评论的那样，你`<p class="clear" />`在错误的地方。下面是修改后的代码：

```
<nav>
  <ul>
    <li><a href="">Home</a></li>
    <li><a href="">Logout</a></li>
    <li><a href="">Login</a></li> 
  </ul>
  <div class="clear"></div>
</nav> 
```

*我删除了你所有不必要的代码（你还有很多“！”）*

*   [jsBin 编辑 1](http://jsbin.com/alukej/3/edit)

另一种选择是使用`nav li{ display: inline; }`而不是`nav li{ float:right; }`下面的代码：

*   [jsBin 编辑 2](http://jsbin.com/alukej/4/edit)

* * *

**原来的**

*只是为了扩展三十点和纳撒尼尔的评论。*

`!higher:35px`是 CSS 中感叹号的错误语法用法。有关如何正确使用它的说明，请参见此处：

*   [你如何阅读 !important 在 CSS 中？](https://stackoverflow.com/questions/7369216/how-do-you-read-important-in-css)

话虽如此，您的 CSS 代码中似乎不需要`!important`。

此外，您也不需要最后一行，`height:auto;`因为这已经是元素 height 属性的默认行为。所以，就我们现在任何人所知，您的最终代码只需：

*   [jsFiddle.net 演示](http://jsfiddle.net/g2gnS/)

HTML

```
<nav>
  <ul>
    <li><a href="">Home</a></li>
    <li><a href="">Logout</a></li>
    <li><a href="">Login</a></li>
  </ul>
</nav> 
```

​CSS

```
nav{
  border: 1px solid black;
  background-color: #E3E3E3;
}​ 
```

*如果您正在尝试实现不同的目标，请编辑您的问题并更清楚地解释它。有时图片有助于解决 HTML 问题。*

# c# - 实体框架只读集合

> ID：11191103
> 
> 赞同：19
> 
> 时间：2012-06-25T14:19:59.337
> 
> 标签：c#, entity-framework, ef-code-first, readonly-collection

考虑一个域，其中客户、公司、员工等具有 ContactInfo 属性，该属性又包含一组地址、电话、电子邮件等……

这是我的缩写联系信息：

```
public class ContactInfo : Entity<int>
{
    public ContactInfo()
    {
        Addresses = new HashSet<Address>();          
    }

    public virtual ISet<Address> Addresses { get ; private set; }

    public Address PrimaryAddress
    {
        get { return Addresses.FirstOrDefault(a => a.IsPrimary); }
    }

    public bool AddAddress(Address address)
    {
        // insure there is only one primary address in collection
        if (address.IsPrimary)
        {                  
            if (PrimaryAddress != null)
            {
                PrimaryAddress.IsPrimary = false;
            }
        }
        else
        {
            // make sure the only address in collection is primary
            if (!Addresses.Any())
            {
                address.IsPrimary = true;
            }
        }
        return Addresses.Add(address);
    }
} 
```

一些注意事项（我不确定这些是否是 EF“最佳实践”）：

*   地址集合是虚拟的以允许延迟加载
*   收藏品的私人二传手禁止收藏品更换
*   收集是`ISet`为了确保每个联系人没有重复的地址
*   使用`AddAddress`方法我可以确保始终且最多有 1 个地址是主要的....

我想（如果可能的话）防止通过`ContactInfo.Addresses.Add()`方法添加地址并强制使用`ContactInfo.AddAddress(Address address)`...

我正在考虑通过公开地址集，`ReadOnlyCollection`但这是否适用于实体框架（v5）？

我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T14:52:40.157

Edo van Asseldonk 建议的另一个选项是创建一个自定义集合，该集合从 Collection 继承其行为。

您必须为 ISet 自己实现，但原理是相同的。

通过隐藏任何修改列表并将它们标记为过时的方法，您可以有效地获得 ReadOnlyCollection，但 EF 在将其拆箱为 Collection 时仍然可以对其进行修改。在我的版本中，我为 List 添加了一个隐式运算符转换，因此我们在添加项目时不必拆箱集合：

```
var list = ListProperty.ToList();
list.Add(entity)
ListProperty = list; 
```

在哪里

```
public virtual EntityCollection<MyEntity> ListProperty { get; protected set; } 
```

这是EntityCollection：

```
public class EntityCollection<T> : Collection<T>
{
    [Obsolete("Unboxing this collection is only allowed in the declarating class.", true)]
    public new void Add(T item) { }

    [Obsolete("Unboxing this collection is only allowed in the declarating class.", true)]
    public new void Clear() { }

    [Obsolete("Unboxing this collection is only allowed in the declarating class.", true)]
    public new void Insert(int index, T item) { }

    [Obsolete("Unboxing this collection is only allowed in the declarating class.", true)]
    public new void Remove(T item) { }

    [Obsolete("Unboxing this collection is only allowed in the declarating class.", true)]
    public new void RemoveAt(int index) { }

    public static implicit operator EntityCollection<T>(List<T> source)
    {
        var target = new EntityCollection<T>();
        foreach (var item in source)
            ((Collection<T>) target).Add(item); // unbox

        return target;
    }
} 
```

这样，您仍然可以照常运行 Linq，但在尝试修改 Collection 属性时会收到正确的使用警告。将其取消装箱到 Collection 将是唯一的方法：

```
((Collection<MyEntity>)ListProperty).Add(entity); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:07:55.030

一种方法是使 ICollection 属性受到保护并创建 IEnumerable 的新属性，该属性仅返回 ICollection 属性的列表。

这样做的缺点是您无法通过 ContactInfo 查询地址，例如获取居住在该城市的所有联系信息。

**这是不可能的！：**

```
from c in ContactInfos 
where c.Addresses.Contains(x => x.City == "New York") 
select c 
```

**代码：**

```
public class ContactInfo : Entity<int>
{
    public ContactInfo()
    {
        Addresses = new HashSet<Address>();          
    }

    protected virtual ISet<Address> AddressesCollection { get ; private set; }

    public IEnumerable<Address> Addresses { get { return AddressesCollection; }}

    public Address PrimaryAddress
    {
        get { return Addresses.FirstOrDefault(a => a.IsPrimary); }
    }

    public bool AddAddress(Address address)
    {
        // insure there is only one primary address in collection
        if (address.IsPrimary)
        {                  
            if (PrimaryAddress != null)
            {
                PrimaryAddress.IsPrimary = false;
            }
        }
        else
        {
            // make sure the only address in collection is primary
            if (!Addresses.Any())
            {
                address.IsPrimary = true;
            }
        }
        return Addresses.Add(address);
    }
} 
```

# asp.net-mvc-3 - 日期范围的特殊日期选择器

> ID：11191104
> 
> 赞同：0
> 
> 时间：2012-06-25T14:20:01.357
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery-plugins

我迫切需要为两个日期制作一个范围日期选择器：开始日期和结束日期。开始日期不能早于现在的日期时间，结束日期不能早于所选的开始日期。这是我想要的一个例子。有人能告诉我用什么来做这个吗？

[http://rezervari.hotelalpin.ro/](http://rezervari.hotelalpin.ro/)

这是我尝试过但不起作用的方法：

```
 </head>
       @using (Html.BeginForm("SearchFree", "Reservation", FormMethod.Get,new {id = "form" }))
     {                    

       <h7>Introduceti perioada Rezervarii</h7>
      <div class="editor-label">
       <label id="cautare" for="StartDate">Data Intrare:        </label>@(Html.JQueryUI().Datepicker("StartDate").DateFormat("mm-dd-yy").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))
        </div>
          <div class="editor-label">
         <label  id="cautare"  for="EndDate">Data Iesire:        </label>@(Html.JQueryUI().Datepicker("EndDate").DateFormat("mm-dd-yy").MinDate(DateTime.Today).ShowButtonPanel(true).ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))

         </div>

       <p>
       <input id="buton1" type="submit" value="Cauta camere libere" />
          </p>

  }
         <script type="text/javascript">
      $(document).ready(function () {
  $.validator.addMethod("EndDate", function (value, element) {
    var startDate = $('.StartDate').val();
    return Date.parse(startDate) <= Date.parse(value);
     }
  , "* End date must be after start date");
 $('.form').validate();
});
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:28:54.263

[jquery UI datepicker](http://jqueryui.com/demos/datepicker/#date-range)有一个可以使用的日期范围选项。你可以这样设置：

**HTML**：

```
<label for="from">From</label>
<input type="text" id="from" name="from"/>
<label for="to">to</label>
<input type="text" id="to" name="to"/> 
```

**Javascript**：

```
$(function() {
    $("#from").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });

    $("#to").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:21:30.137

应该能够使用[JQuery 日期选择器](http://jqueryui.com/demos/datepicker/)来做到这一点！

然后，如果用户输入的日期超出您指定的范围，您可以使用一些 Javascript/JQuery 验证来提醒他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:28:14.480

您可以使用jQuery datepicker的`minDate`和选项来限制可选日期的范围。`maxDate`在此处查看示例：

[http://jqueryui.com/demos/datepicker/#min-max](http://jqueryui.com/demos/datepicker/#min-max)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T10:43:10.497

```
<input type="text" id="tbStartDate" value="" disabled="disabled" />
<input type="text" id="tbEndDate" value="" disabled="disabled" />
<script type="text/javascript">
    $(document).ready(function () {
        $("#tbStartDate").datepicker({
            //minDate: new Date(2007, 1 - 1, 1),  //use for Date time now
            dateFormat: 'dd-mm-yy',
            showOn: 'button',
            buttonImageOnly: true,
            buttonImage: '/Content/Calendar.png',
            buttonText: 'Click here (date)',
            onSelect: function (dateText, inst) {
                var $endDate = $('#tbStartDate').datepicker('getDate');
                $endDate.setDate($endDate.getDate() + 1);
                $('#tbEndDate').datepicker('setDate', $endDate).datepicker("option", 'minDate', $endDate);
            },
            onClose: function (dateText, inst) {
                //$("#StartDate").val($("#tbStartDate").val());
            }
        });

        $("#tbEndDate").datepicker({
            //minDate: new Date($("#tbStartDate").datepicker('getDate')),
            dateFormat: 'dd-mm-yy',
            showOn: 'button',
            buttonImageOnly: true,
            buttonImage: '/Content/Calendar.png',
            buttonText: 'Click here (date)',
            onSelect: function (dateText, inst) {
                $('#tbStartDate').datepicker("option", 'minDate', new Date($("#tbEndDate").datepicker('getDate')));
            },
            onClose: function (dateText, inst) {
                //$("#EndDate").val($("#tbEndDate").val());
            }
        });

            var $endDate = $('#tbStartDate').datepicker('getDate');
            $endDate.setDate($endDate.getDate() + 1);
            $('#tbEndDate').datepicker('setDate', $endDate).datepicker("option", 'minDate', $endDate);              });
</script> 
```

# c# - 有没有办法在 C# 中测试特定的 sql 异常类型？

> ID：11191110
> 
> 赞同：4
> 
> 时间：2012-06-25T14:20:16.753
> 
> 标签：c#, asp.net, sql-server

从数据库中删除记录时，偶尔会遇到引用约束异常。

以下是异常详细信息。当异常与外键约束错误特别相关时，是否可以向用户显示消息？

我可以查看异常错误字符串并测试是否存在单词，但我不确定是否有更好的方法来检查特定的 SQL 错误。

谢谢凯文

```
Message: The DELETE statement conflicted with the REFERENCE constraint "FK_Customers_PaymentTerms". The conflict occurred in database "kd", table "dbo.Customers", column 'CstPtmID'.
The statement has been terminated.
Source: .Net SqlClient Data Provider
TargetSite: Void OnError(System.Data.SqlClient.SqlException, Boolean)
StackTrace:    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T14:23:04.087

> 当异常与外键约束错误特别相关时，是否可以向用户显示消息？

是的，您可以检查[`Number`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.number.aspx)SqlException：

```
try
{
    // do your database query
}
catch (SqlException ex)
{
    if (ex.Number == .....)
    {
        // Can't remember from the top of my head the exact error code 
        // that is triggered in this situation. Just check it.
    }
} 
```

* * *

如评论部分所述，最好检查[`Errors`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.errors.aspx)数组，因为可能存在与单个 SQL 查询相关的多个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:25:16.697

看看SqlException下

```
catch(SqlException se)
{
    if(se.Number == x)
    {
        //Show message
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:33:04.507

使用[Errors](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlexception.errors.aspx)集合显示错误：

```
public static void ShowSqlException(string connectionString)
{
    string queryString = "EXECUTE NonExistantStoredProcedure";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(queryString, connection);
        try
        {
            command.Connection.Open();
            command.ExecuteNonQuery();
        }
        catch (SqlException ex)
        {
            DisplaySqlErrors(ex);
        }
    }
}

private static void DisplaySqlErrors(SqlException exception)
{
    for (int i = 0; i < exception.Errors.Count; i++)
    {
        Console.WriteLine("Index #" + i + "\n" +
            "Error: " + exception.Errors[i].ToString() + "\n") +
            "Number: " + exception.Errors[i].Number.ToString() + "\n");
    }
    Console.ReadLine();
} 
```

# r - R - 动物园地块定制

> ID：11191114
> 
> 赞同：0
> 
> 时间：2012-06-25T14:20:28.577
> 
> 标签：r, plot, time-series, zoo

我在具有多列的动物园对象中有数据。现在我想绘制（其中四列）相同的两列和上一个图表下方的两列。

更准确地说，我已经能够将它们中的四个绘制在另一个之下。但我希望前两个在同一个情节中，最后两个在下一个情节中

![在此处输入图像描述](../Images/6b6f0c765e5f44775eefc13826ca5f9e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:22:40.857

它应该通过添加`nc=2`您的绘图命令来工作（即列数= 2）。

# php - 双选框未正确发布

> ID：11191116
> 
> 赞同：2
> 
> 时间：2012-06-25T14:20:40.463
> 
> 标签：php, jquery, html, forms, html-parsing

我仍在努力学习 jquery，所以请多多包涵。我有一个双选择框，只有在我将第二个选择框的所有结果移到那里后，它才有效。我想要的是当第一个框将值传输到第二个选择框时，它不需要突出显示选项，而是在表单提交时发布第二个选择框。这是我所拥有的：

HTML：

```
<span id="dualselect1" class="dualselect">

    <select name="select1[]" multiple="multiple" size="10">
    <?php
    $c='0';
    foreach($lp_name as $lpn){
        echo '<option value="'.$lp_id[$c].'">'.$lpn.' ('.$lp_url[$c].')</option>';
        $c++;
    }
    ?>
    </select>

    <span class="ds_arrow">
        <span class="arrow ds_prev">&laquo;</span>
        <span class="arrow ds_next">&raquo;</span>
    </span>
    <select name="select2[]" multiple="multiple" size="10">
        <option value=""></option>
    </select>
</span> 
```

查询：

```
<script type="text/javascript">
jQuery(document).ready(function(){    
var db = jQuery('#dualselect1').find('.ds_arrow .arrow');   //get arrows of dual select
    var sel1 = jQuery('#dualselect1 select:first-child');       //get first select element
    var sel2 = jQuery('#dualselect1 select:last-child');            //get second select element

    sel2.empty(); //empty it first from dom.

    db.click(function(){
        var t = (jQuery(this).hasClass('ds_prev'))? 0 : 1;  // 0 if arrow prev otherwise arrow next
        if(t) {
            sel1.find('option').each(function(){
                if(jQuery(this).is(':selected')) {
                    jQuery(this).attr('selected',false);
                    var op = sel2.find('option:first-child');
                    sel2.append(jQuery(this));
                }
            }); 
        } else {
            sel2.find('option').each(function(){
                if(jQuery(this).is(':selected')) {
                    jQuery(this).attr('selected',false);
                    sel1.append(jQuery(this));
                }
            });     
        }
    });
 }); 
```

PHP：

```
if(isset($_POST['submit'])) {
  var_dump($_POST['select2']);
} 
```

就像我说的，我有这种工作。但是，如果我向 select2 发送一个值，我必须在提交之前突出显示它，否则它不会 POST。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:23:19.967

我以前遇到过这个，你有几个选择。使用 JS，您可以将第二个框中的所有值也推送到隐藏字段中，或者使用 JS，您可以选择第二个框中的所有值作为表单上的 onsubmit 处理程序。

我实际上以前做过后者，而且效果很好。

最终，选择框（多选或单选）只发送被选择的值——这就是为什么它只有在你先选择它们时才有效。它的工作原理很像复选框，其中未选中的值不会被发布。

这应该“选择”所有这些：

```
$('#myform').submit(function() {
  var sel2 = $('#dualselect1 select:last-child');
  sel2.find('option').each(function(){
    $(this).attr('selected',true);
  });   
}); 
```

或者这会将它们放入一系列隐藏字段中：

```
$('#myform').submit(function() {
  var sel2 = $('#dualselect1 select:last-child');
  sel2.find('option').each(function(){
    var hidden = $('<input type="hidden" name="selectedOptions[]"/>');
    hidden.val($(this).val());
    sel2.after(hidden);
  });   
}); 
```

然后在 PHP 中，你可以使用 $_POST['selectedOptions'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T07:27:30.750

您可以简单地修改这一行 *jQuery(this).attr('selected',false);* 在 sel1.find....用 *jQuery(this).attr('selected',true) 块；* . 在这种模式下，从第一个框移到第二个框的选择是自动选中的，所以当你提交表单时，你直接传递这个值。尝试一下。

这应该工作：

```
if(t) {
        sel1.find('option').each(function(){
            if(jQuery(this).is(':selected')) {
                jQuery(this).attr('selected',true);
                var op = sel2.find('option:first-child');
                sel2.append(jQuery(this));
            }
        }); 
    } 
```

# java - 配置管理和声明性 osgi 属性

> ID：11191124
> 
> 赞同：2
> 
> 时间：2012-06-25T14:21:12.523
> 
> 标签：java, osgi

是否可以使用 Configuration Admin 来管理 OSGI 捆绑包属性？这方面的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:17:35.233

是的，这就是 Config Admin 的目的。

如果您正在寻找一般文档，我建议您阅读 OSGi 规范或“OSGi in Action”一书（Richard Hall 等人）。

如果您已经尝试过某些事情但失败了，请发布您所做的事情和出了什么问题的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:04:30.650

这是绝对可能的。我通常将蓝图与配置管理服务一起使用。它会像春天一样使用 PropertyPlaceholderConfigurer 为您提供属性。有关示例，请参见：[http ://www.liquid-reality.de/x/G4Be。](http://www.liquid-reality.de/x/G4Be)

# php - Exim：将邮件保存到唯一文件

> ID：11191130
> 
> 赞同：0
> 
> 时间：2012-06-25T14:21:25.867
> 
> 标签：php, email, nfs, exim

简短的版本：我需要将邮件从 Exim 保存到网络目录，但理想情况下我想将这些保存为 unqiue 文件而不是附加到邮箱。

长版：我有一个解析邮件的 PHP 脚本。目前，它与邮件服务器位于同一个盒子上，允许我将邮件直接传送到 PHP 脚本 - 很简单。

很快我的邮件服务器将托管在一个单独的（通过 NFS 连接）服务器上。我最初的计划是简单地创建一个指向邮箱的符号链接，并安排脚本通过 cron 解析邮件，在邮件解析后删除邮件。

问题是邮件以 mbox 格式存储，即附加到单个文件中。由于 PHP 无法通过 NFS 可靠地使用文件锁，我担心我的脚本会丢弃在执行期间到达的新邮件。

那么 - 我可以让 Exim 将每封邮件保存到单独的文件中，而不是将邮件写入单个文件吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:33:46.993

简而言之，您的邮箱使用 maildir 而不是 mbox。

看看这个[关于](http://blog.edseek.com/~jasonb/articles/exim4_courier/exim4.html)Exim4 和 Maildir 设置的方法。

您可以做的其他事情是使用 PHP IMAP 扩展来访问您的本地邮件服务器。这样，每条消息也将被独立解析，并允许您在不更改邮件服务器配置的情况下访问单个文件。

# list - 如何在 lwuit 1.5 中使用 ContainerList？

> ID：11191135
> 
> 赞同：0
> 
> 时间：2012-06-25T14:21:54.877
> 
> 标签：list, java-me, lwuit

我的列表具有可变长度列表项。ContainerList 支持可变长度列表项。当我在互联网上探索它时，我找不到 ContainerList 的任何示例。给我一段在 ContainerList 上工作的示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T08:54:55.300

LWUIT 演示在 Scroll 演示中包含一个 ContainerList 示例。

在我们的博客[http://codenameone.blogspot.com/中也有解释](http://codenameone.blogspot.com/)

通常 ContainerList 是 list 的替代品，只需用 ContainerList 替换 List 的使用，它应该可以非常无缝地工作（尽管速度较慢）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:47:01.640

试试这个：

```
Vector variableLengthVector = new Vector();

variableLengthVector.clear();

for(int i=0;i< variableLengthStringArray.length;i++)
{
variableLengthVector.add(variableLengthStringArray[i]); 
}

List myListToBeDisplaye = new List(variableLengthVector); 
```

**variableLengthStringArray-->**它包含您希望在列表中显示的项目。

因此，每当您想显示一个列表时，只需填充一个向量并使用该向量初始化您的列表。确保在填充该向量之前清除该向量或重新初始化该向量。

现在，只需将您的列表粘贴到表单或您希望显示的任何位置。

好的，您可以在此处找到有关 containerList 的内容：

[http://lwuit.java.net/nonav/javadocs/com/sun/lwuit/list/ContainerList.html](http://lwuit.java.net/nonav/javadocs/com/sun/lwuit/list/ContainerList.html)

您可以使用这样的容器列表：

ContainerList abc = new ContainerList(new DefaultListModel(variableLengthVector));

# javascript - 在绝对位置设置从 A 到 B 的选择范围

> ID：11191136
> 
> 赞同：2
> 
> 时间：2012-06-25T14:22:13.583
> 
> 标签：javascript

如何以编程方式从 A(x1,y1) 选择到 B(x2,y2) ？

x1, y1, x2, y2 是像素坐标。我搜索了很多，在我找到的所有函数中，我们必须指定一个特定的标签，然后它会选择它的内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T14:34:52.613

您可以在所有浏览器的当前版本中执行此操作。这些浏览器至少具有以下一项：

*   基于标准的方法，由 Firefox >= 20 实现，来自 CSSOM View 规范：[`document.caretPositionFromPoint()`](http://www.w3.org/TR/cssom-view/#extensions-to-the-document-interface)
*   WebKit 的专有版本相同：`document.caretRangeFromPoint()`.
*   IE 的专有`TextRange`对象，它有一个[`moveToPoint()`](http://msdn.microsoft.com/en-us/library/ie/ms536632%28v=vs.85%29.aspx)获取像素坐标的方法。`moveToPoint()`但是，在所有版本的 IE 中都使用的似乎有问题（例如，请参见[此处](http://dev.ckeditor.com/ticket/11074)和[此处](https://disqus.com/home/discussion/dstorey/internet_explorer_11_review_part_1_40/#comment-1153775544)）；我很幸运能够在我使用过的所有文档中工作。

~~然而，Mozilla 还没有实现这些，Opera 也没有，所以这些浏览器还不能实现。~~

**[Firefox 20 及更高版本支持`document.caretPositionFromPoint()`](https://developer.mozilla.org/en-US/docs/Web/API/document.caretPositionFromPoint). Opera 15 支持`document.caretRangeFromPoint()`**

这是一些示例代码。它适用于 IE 5+、2010 年左右开始的 WebKit、Firefox >= 20 和 Opera >= 15。

现场演示：http: [//jsfiddle.net/timdown/ABjQP/](http://jsfiddle.net/timdown/ABjQP/)

代码：

```
function createSelectionFromPoint(startX, startY, endX, endY) {
    var doc = document;
    var start, end, range = null;
    if (typeof doc.caretPositionFromPoint != "undefined") {
        start = doc.caretPositionFromPoint(startX, startY);
        end = doc.caretPositionFromPoint(endX, endY);
        range = doc.createRange();
        range.setStart(start.offsetNode, start.offset);
        range.setEnd(end.offsetNode, end.offset);
    } else if (typeof doc.caretRangeFromPoint != "undefined") {
        start = doc.caretRangeFromPoint(startX, startY);
        end = doc.caretRangeFromPoint(endX, endY);
        range = doc.createRange();
        range.setStart(start.startContainer, start.startOffset);
        range.setEnd(end.startContainer, end.startOffset);
    }
    if (range !== null && typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    } else if (typeof doc.body.createTextRange != "undefined") {
        range = doc.body.createTextRange();
        range.moveToPoint(startX, startY);
        var endRange = range.duplicate();
        endRange.moveToPoint(endX, endY);
        range.setEndPoint("EndToEnd", endRange);
        range.select();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:44:37.840

对于 Firefox 或 Opera，有一些解决方法。这将插入符号设置在元素的第一个位置：

```
console.log("moz or opera doesn't support caret by position so we have a workaround");
var range = doc.createRange();
var element = doc.elementFromPoint(startX, startY);
range.setStart(element, 0); 
```

# iphone - iOS5中的phonegap后台服务

> ID：11191139
> 
> 赞同：2
> 
> 时间：2012-06-25T14:22:20.700
> 
> 标签：iphone, ios5, cordova, phonegap-plugins

我在 xcode 中编写更新检查程序，我的程序需要后台进程（它需要在后台运行），所以在 phonegap 中是否有可能，是否有任何用于后台服务的 phonegap 插件？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:57:31.243

iOS 不允许后台任务运行超过特定时间限制。

类似帖子：

[iPhone后台任务在某个时候停止运行](https://stackoverflow.com/questions/3725240/iphone-background-task-stops-running-at-some-point?rq=1)

解释：

[http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html](http://www.macworld.com/article/1164616/how_ios_multitasking_really_works.html)

合理的解决方案是实现推送通知并在服务器上有更新时发送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T22:41:15.153

绝对可以在后台运行一些 JS 代码来检查这一点（[https://github.com/jocull/phonegap-backgroundjs](https://github.com/jocull/phonegap-backgroundjs)）。

但是，在后台运行超过 10 分钟是不可能的（在后台[运行应用程序超过 10 分钟](https://stackoverflow.com/questions/9738488/run-app-for-more-than-10-minutes-in-background)）

因此，您将需要我提到的第一个插件和 dhaval 建议的 PN 服务的组合。

干杯!

# c# - 反应式扩展，立即触发 OnNext，然后在一段时间内触发

> ID：11191144
> 
> 赞同：2
> 
> 时间：2012-06-25T14:22:32.117
> 
> 标签：c#, system.reactive, observable

我有一个网络服务，我想在布尔值设置为 true 后立即查询更新，然后每 5 分钟重新检查一次。

这是我目前的观察：

```
 _queryDisposable = Observable
            .Interval(TimeSpan.FromMinutes(5))
            .ObserveOn(Scheduler.ThreadPool)
            .Where(i => IsProcessing)     // IsProcessing is the bool value
            .Subscribe(GetFeeds, OnError, OnComplete); 
```

这个 observable 将`IsProcessing`每 5 分钟检查一次 bool 是真还是假，`GetFeeds`如果是真则调用。

我认为获得预期效果的唯一方法是创建`IsProcessing`一个属性支持的字段并使用 2 个 observable 进行处理，如下所示：

```
 private bool _isProcessing;

    public bool IsProcessing
    {
        get { return _isProcessing; }
        set
        {
            if (_isProcessing == value)
                return;

            _isProcessing = value;

            if (!value)
            {
                if(_queryDisposable != null)
                    _queryDisposable.Dispose();
                _queryDisposable = null;
            }
            else
            {
                Observable
                    .Range(0,1)
                    .ObserveOn(Scheduler.ThreadPool)
                    .Subscribe(GetFeedsSafe, OnError, OnComplete);

                _queryDisposable = Observable
                    .Interval(TimeSpan.FromMinutes(5))
                    .ObserveOn(Scheduler.ThreadPool)
                    .Subscribe(GetFeedsSafe, OnError, OnComplete);
            }
        }
    } 
```

我认为这不是一个非常优雅的解决方案，所以我想知道是否有更好的方法来实现这种效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:40:38.563

我是否遗漏了什么，或者您不会在启动 Observable 之前立即自己调用订阅？

```
 Subscribe(GetFeeds, OnError, OnComplete);
    // Or perhaps, if you want it to be async,
    new TaskFactory().StartNew(()=>Subscribe(GetFeeds, OnError, OnComplete));

    _queryDisposable = Observable
        .Interval(TimeSpan.FromMinutes(5))
        .ObserveOn(Scheduler.ThreadPool)
        .Where(i => IsProcessing)     // IsProcessing is the bool value
        .Subscribe(GetFeeds, OnError, OnComplete); 
```

编辑：纯 Rx，来自[http://social.msdn.microsoft.com/Forums/sa/rx/thread/c4acaf34-3136-4206-a6f9-ef5afba74b2b](http://social.msdn.microsoft.com/Forums/sa/rx/thread/c4acaf34-3136-4206-a6f9-ef5afba74b2b)：

```
Observable.Interval(TimeSpan.FromMinutes(5))
        .StartWith(-1L)
        .ObserveOn(Scheduler.ThreadPool)
        .Where(i => IsProcessing)     // IsProcessing is the bool value
        .Subscribe(GetFeeds, OnError, OnComplete); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:25:26.097

要立即开始排序并在给定时间内仍然产生一个值，您有两个选择：

1.  Observable.Interval(TimeSpan.FromMinutes(5)).StartWith(-1)
2.  Observable.Timer(TimeSpan.FromMinutes(0), TimeSpan.FromMinutes(5))

接下来我假设您想在 IsProcessing 值设置为 false 时取消计时器，您还想在它设置回 true 时重新启动序列。无论何时设置 IsProcessing 值，上面的两个答案都会运行 5 分钟的间隔。如果您设置 IsProcessing=true，序列将开始，如果一分钟后您设置 IsProcessing=false，然后 IsProcessing=true，您仍然需要等待 4 分钟才能再次查询。我想这不是你想要的？

所以我们希望这会在属性更改时触发。@SPFiredrake 在建议 INPC 并将事件转换为 Observable 序列方面做得很好。周围有很多小片段可以帮助您做到这一点。假设我们使用一个扩展方法 PropertyChanges，我们可以编写这个非常简单的查询。

```
var isProcessingValues = this.PropertyChanges(x=>x.IsProcessing);
isProcessingValues
    .Where(isProcessing=>isProcessing)
    .SelectMany(_=> 
        Observable.Timer(TimeSpan.Zero, TimeSpan.FromMinutes(5))
                  .TakeUntil(isProcessingValues.Where(isProcessing=>!isProcessing))
    )
    .Select(_=>GetFeeds())  //What does GetFeeds actually return?
    .SubscribeOn(Scheduler.NewThread)
    .Subscribe(feedData=>Console.WriteLine(feedData), 
        ex=>Console.WriteLine (ex),
        ()=>Console.WriteLine (completed)); 
```

慢慢地走过这个：

1.  当 IsProcessing 属性发生变化时，将新值推送到序列中 (isProcessingValues)
2.  当序列值为真时，启动一个计时器序列，该序列现在每 5 分钟产生一个值。
3.  如果 isProcessingValues 序列产生 false 值，则计时器序列应停止
4.  每次计时器滴答声（当 IsProcess 设置为 true 时，每 5 分钟一次），调用 GetFeeds
5.  确保我们的序列在不同的线程上订阅（不阻塞）。如果这不是必需的，请删除。
6.  从提要中获取数据并对其进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:47:19.667

您是否考虑过让 IsProcessing 变量触发一个道具更改事件，然后您可以收听该事件？

```
var processing = Observable
    .FromEventPattern<PropertyChangedEventArgs>(this, "PropertyChanged")
    .Where(tr => tr.EventArgs.Property == "IsProcessing" && ((Type)tr.Sender).IsProcessing);

_queryDisposable = Observable
    .Interval(TimeSpan.FromMinutes(5))
    .ObserveOn(Scheduler.ThreadPool)
    .And(processing) // Will only fire when both sequences have an available value.
    .Subscribe(GetFeeds, OnError, OnComplete); 
```

这也确保了如果它正在处理，它只会触发一次，因为处理 observable 一次只提供一个值（对于每个 IsProcessing 更改为`true`），所以如果它仍在处理中，您不必担心它会再次触发5分钟后。

# sql-server - SQL Server 数据库图表消失了

> ID：11191146
> 
> 赞同：1
> 
> 时间：2012-06-25T14:22:36.607
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 2008 Express 上有一个数据库，其中包含大约 30 个表和更多的关系。我有一个数据库图，显示了表之间的所有关系，这非常有用。然而它已经完全消失了。所有的数据和表格都在那里，但图表已经消失了。这种情况以前发生过一次，虽然在数据库开发的早期阶段，所以我只是重新设计了图表。但我不愿意再这样做了。

有没有人知道这是怎么发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:28:33.223

试试这个（备份后）：

```
SET IDENTITY_INSERT dbo.sysdiagrams ON
GO
INSERT INTO dbo.sysdiagrams (name, principal_id, diagram_id, version, definition)
SELECT name, principal_id, diagram_id, version, definition
FROM schema1.sysdiagrams
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T09:05:07.753

我运行了一个脚本来清除表中的测试数据，这似乎也删除了所有系统图 - 所以它是自己造成的:(

# html - iFrame 内容不显示在 IE8 中

> ID：11191155
> 
> 赞同：3
> 
> 时间：2012-06-25T14:22:48.950
> 
> 标签：html, iframe, internet-explorer-8, cross-browser

我有一个带有 iFrame 的网站。

主机页面上有一些非常基本的 JS，iframed 页面也有简单的 JS。

当我像往常一样嵌入 iframe 时：`<iframe src="iframeURL" width="900" height="1000"></iframe>`它在除 IE8 之外的所有浏览器中都能正常工作。

我尝试了各种方法：

*   第一：禁用所有JS
*   删除 src 属性并用 JS 添加它
*   `<object>`改为使用
*   我使用 proxy.php 使内容看起来好像来自同一个域

不管我做什么，它在 IE8 中都不起作用。

有趣的是，我可以在单独的选项卡中打开我想要 iframe 的页面并且工作得很好。

如果我将 src 属性更改为“some_other_random_page_from_internet”，它就可以工作。

另一件事是主机和 iframe 都使用 postMessage 进行通信，我可以看到通信正常，只是内容没有显示，但是当我使用开发人员工具检查页面源时，我可以看到内容在那里.

iframe 的内容是否可能导致问题？这是一个基本的 HTML + 基本的 JS，禁用 JS 应该不是问题。

任何想法我还能检查什么？

PS。我无法显示代码（NDA 等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T10:42:32.420

找到了。

iframed 内容具有以下 css 规则：

```
html{ position: relative; } 
```

删除它有很大帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-22T21:39:11.607

对于[Lukx 评论](https://stackoverflow.com/questions/11191155/iframe-content-doesnt-show-in-ie8#comment31508114_11205602)的可见性，真正的答案是`position:relative`在 iframe 本身上进行设置，因为您可能无法编辑 html 源页面，或者它可能需要使用相对定位。

只需添加此 CSS，您就应该准备就绪：

```
iframe {
    position: relative;
} 
```

[我在这个答案](https://stackoverflow.com/a/23817415/1366033)中写下了问题的完整描述

# wxpython - 制作 Frame 返回结果

> ID：11191159
> 
> 赞同：0
> 
> 时间：2012-06-25T14:22:54.457
> 
> 标签：wxpython

我看到对话框返回结果：

`if some_dlg.ShowModal() = wx.OK`

我希望我的**框架**有类似的行为。

* * *

我希望框架询问选项（文本字段和其他），带有确定和取消。然后我想知道操作的结果（字段的值和单击了哪个按钮）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:30:35.903

为什么你想让一个框架表现得像一个对话框？如果你需要的话，你应该只使用一个对话框。无论如何，最简单的方法是使用 PubSub。让 OK 按钮处理程序发送与 Cancel 按钮处理程序不同的消息。您可以阅读本[教程](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)以了解其工作原理或阅读此 wxPython [wiki 页面](http://wiki.wxpython.org/WxLibPubSub)。

# javascript - 滚动页面的其他部分时需要 iFrame 不移动

> ID：11191163
> 
> 赞同：0
> 
> 时间：2012-06-25T14:23:07.390
> 
> 标签：javascript, ios, iframe, scroll, mobile-safari

在我的 asp.net 应用程序中，我有一个带有标题的页面，然后在页面的正文中显示人们可以选择的项目。当有人选择一个项目时，一个 iframe 会出现在正文的右侧，并显示有关所选项目的详细信息。iframe 大小和位置是使用屏幕大小设置的。在所有桌面浏览器中 - 我可以使用下面的 javascript 来解决这个问题。

```
<script type="text/javascript">
window.onscroll = scroll;
</script> 
```

这是javascript函数滚动

```
function scroll() {
    var divT = document.getElementById('searchframe');
    var divD = document.getElementById('detailframe');

    if (document.body.scrollTop > 80) {
        divT.style.top = document.body.scrollTop
        divD.style.top = document.body.scrollTop

        document.getElementById('detailframe').height = '100%';
    }
    if (document.body.scrollTop == 0) {
        divT.style.top = 75
        divD.style.top = 75
    }
} 
```

[使用http://code.google.com/p/ibbdemo2/](http://code.google.com/p/ibbdemo2/) - 一个 adobe air ipad 模拟器进行测试时，甚至没有调用滚动功能 。我可以通过放置警报来判断这一点，警报会在所有其他浏览器上弹出，甚至在这个模拟器中，除了滚动功能。在其他浏览器中，在 window.onclick 行放置警报会显示警报，但在 safari mobile 上不会显示警报 - 这意味着 window.onscroll 事件似乎甚至没有被触发。谢谢您的帮助。

编辑 - 我还可以在所有浏览器中使用以下任何行来捕获滚动事件，除了移动 safari

```
window.onscroll = scroll;
document.onscroll = scroll;
document.addEventListener("scroll", scroll, false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:54:26.050

`document.getElementById('iframeID').style.top = intVal;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:06:14.000

为什么必须在 javascript 中执行此操作？

CSS：

```
position:fixed;
right: 10px;
top: 10px; 
```

不工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:53:56.850

这个问题只是由于模拟器，实际上在设备上工作。

# ruby-on-rails - 使用 find_by 搜索时，Rails 返回 nil

> ID：11191167
> 
> 赞同：0
> 
> 时间：2012-06-25T14:23:22.793
> 
> 标签：ruby-on-rails, ruby, find

我开始学习 RoR，但我有一个我不明白的问题。使用 Product.find :all 返回数据库中的所有记录。但是，如果我想 find_by_gender(1) （甚至 2）它返回一个 nil，我确定 db 包含具有性别的产品

我的代码控制器：

> 性别 = 参数[:gender].to_i
> 
> @search_results = Product.find_by_gender（性别）

这返回零，

我究竟做错了什么？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:32:54.530

`find_by_...`返回第一条记录，`nil`如果没有找到，则`find_all_by_...`返回所有匹配的记录（如果没有，则返回空数组）。在您的情况下`nil`，意味着没有找到性别 = 1 的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:50:34.127

在 Rails 控制台中执行

```
Product.pluck(:gender) 
```

而且你会知道它在 AR 中的值（我认为是真假），所以你必须使用查询`Product.find_by_gender(true)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:03:55.390

首先验证您的数据！
查看一些示例记录：
执行以下操作：

```
Product.all(:limit => 5).each {|product| product.id.to_s + product.gender} 
```

或者进入sql

`sql> select id, gender from products where id < 6;`

如果要验证性别值是什么，则可以在模型中针对这些条件创建命名范围，例如 (rails3) (Product Model - `app/models/product.rb`)

```
scope :male where(:gender) = male_value # i.e. 1 or 'M' or 'Male' or whatever
scope :female where(:gender) = female_value # i.e. '2' or 'F' or whatever 
```

然后你会让哪个写`Products.male`或`Products.female`！

最后一点 - 性别应该在您的用户表中吗？，或者这是针对男性/女性的特定产品？

# javascript - requirejs 优化器创建不起作用的代码

> ID：11191168
> 
> 赞同：1
> 
> 时间：2012-06-25T14:23:24.843
> 
> 标签：javascript, jquery, require, requirejs

我在我的项目中使用“定义”。当我不使用优化器时，我的 js 代码会正常工作。当我运行优化器时，所有文件都包含在下面

```
require(["jquery", "modals", "registermodule", "bootstrap", "personsmodule", "datemodule",    "./jquery-ui-1.8.18.custom.min"], function($) {});

C:/Users/pethel/checkout/src/main/webapp/resources/scripts/main-built.js
----------------
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/jquery.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/modals.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/ajaxmodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/jquery-ui-1.8.18.custom.min.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/datemodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/validationmodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/guimodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/registration_util.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/registermodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/bootstrap.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/tablesort.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/personsmodule.js
C:/Users/pethel/checkout/src/main/webapp/resources/scripts/main.js 
```

当我用丑陋的脚本加载我的页面时，我得到 datepicker 未定义。当文件包含在这里 jquery-ui-1.8.18.custom.min.js 时，怎么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:28:48.110

问题是 jquery-ui-1.8.18.custom.min.js 不是 AMD 模块。

方案一：jquery-ui的代码封装到AMD模块

解决方案 2：删除代码中的依赖项并手动包含它。

还有其他解决方案如何处理非 AMD 依赖项，但我不知道优化器在这种情况下如何工作。

# android - 我可以在 Android 上加载 PhoneGap 时显示本机登录视图吗？

> ID：11191170
> 
> 赞同：0
> 
> 时间：2012-06-25T14:23:29.080
> 
> 标签：android, cordova, webview, android-asynctask, sencha-touch-2

我目前正在开发一个需要很长时间才能启动的 Sencha 2 应用程序。第一个屏幕始终是登录表单，因此我想将其设为原生并允许用户在基于 Web 的`Activity`加载时开始输入他们的凭据。

`AsyncTask`我发现了描述（或）的帖子`AsyncTaskLoader`，但我不只是在加载数据。我需要实例化一个完整的`WebView`以及所有包含的 JavaScript 和 DOM 资产。这是否可能（使用`AsyncTask`或其他方式），是否有任何好的在线示例？

值得注意的是，我的目标是 Android 2.2 或更高版本，而我的 main`Activity`目前是 PhoneGap/Cordova 的子类`DroidGap`（尽管我们不使用 PhoneGap 插件，所以它不需要）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:43:11.923

原来我不需要`AsyncTask`。我刚刚使用了 a`PopupWindow`并将其附加到由以下人员`root`创建的视图中`DroidGap`：

```
private PopupWindow popup;
private MyCustomOverlayView overlay;

@Override
public void onCreate( Bundle savedInstanceState ) {
    super.onCreate( savedInstanceState );
    super.init();
    super.loadUrl( "file:///android_asset/www/index.html" );

    Display display = getWindowManager().getDefaultDisplay();
    overlay = new MyCustomOverlayView( getContext() );
    popup = new PopupWindow( overlay, display.getWidth(), display.getHeight(), true );
    root.post( new Runnable() {
        public void run() {
            popup.showAtLocation( root, Gravity.NO_GRAVITY, 0, 0 );
        }
    } );
} 
```

# ruby-on-rails-3 - google-api-ruby-client 找不到类 PKCS12 和 JWTAsserter

> ID：11191173
> 
> 赞同：5
> 
> 时间：2012-06-25T14:23:42.737
> 
> 标签：ruby-on-rails-3, google-api-client

我收到以下关于 google-api-ruby-client 的错误：

```
NameError: uninitialized constant Google::APIClient::PKCS12 
NameError: uninitialized constant Google::APIClient::JWTAsserter 
```

这是我的代码的概要：

```
require 'google/api_client'

class Commissions::GoogleAffiliateNetwork < ActiveRecord::Base

  def self.path_to_key_file
    Rails.root + 'config/xxx-privatekey.p12'
  end

  def self.passphrase
    'supersecretphrase'
  end

  def self.service_email
    '42@developer.gserviceaccount.com'
  end

  def api_auth_uri
    'https://www.googleapis.com/auth/gan'
  end

  def self.make_request(opts = {})
    key = Google::APIClient::PKCS12.load_key(path_to_key_file, passphrase)
    asserter = Google::APIClient::JWTAsserter.new(service_email, api_auth_uri, key)

    api_client = Google::APIClient.new
    api_client.authorization = asserter.authorize()
  end

end 
```

在 Gemfile 中：

```
gem 'google-api-client' 
```

我错过了什么吗？

# cakephp - Cakephp：如何验证我的选择选项以限制所选选项的重复

> ID：11191178
> 
> 赞同：1
> 
> 时间：2012-06-25T14:23:57.157
> 
> 标签：cakephp, cakephp-2.0

我有一个选择下拉菜单，我希望用户为数据库中的一个字段选择两个选项。问题是我如何使它禁止重复选择选项，目前它正在保存所有选项，即使它们相同。

我的 add.ctp 中用于选择选项的代码是：

```
echo $this->Form->select("ProgrammeChoice.programme_code.0",$finals);
echo $this->Form->select("ProgrammeChoice.programme_code.1",$finals); 
```

变量`$finals`从数据库中的另一个表中带来选择选项，它在控制器中，代码是：

```
$finals = array_merge($filtered_programs,$non_preq_programs); 
```

所以，我需要帮助来验证我的选择菜单，以拒绝提交时的重复选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:32:53.313

创建自定义验证规则并比较此处描述的值：http: [//book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

在验证方法中，您的数据存储在`$this->data`.

它应该类似于：

```
public function compare($field1) {
    if($field1 === $this->data['ProgrammeChoice']['programm_code']['1']) {
        return false;
    }
    return true;
} 
```

# iphone - 需要帮助让 Fuego 在 Xcode 中编译 - 提高版本兼容性？

> ID：11191179
> 
> 赞同：1
> 
> 时间：2012-06-25T14:23:58.713
> 
> 标签：iphone, c++, objective-c, boost, frameworks

> 语义问题：“可变”不能应用于引用

以上只是我在尝试编译[fuego-iphone项目时收到的一系列错误中的最新一个。](https://github.com/horaceho/iphone-fuego)我不确定，但这可能与我编译 boost 的方式有关。该项目的 README 建议使用[这些说明](http://semmel.wordpress.com/2011/01/18/boost-c-libraries-with-ios/)将 boost 编译到框架中，但我已经[使用此处的更新说明](http://www.danielsefton.com/2012/03/building-boost-1-49-with-clang-ios-5-1-and-xcode-4-3/)进行了此操作。这个 CLANG 错误会以某种方式与增强版本有关吗？

我承认在 C++ 方面相对无知。

如果有人对在 xcode 中使用 fuego 库有任何出色的建议，我已经尝试了很多不同的东西，而且我几乎束手无策。谢谢！

编辑：对这里的任何歧义表示歉意，但我不是在询问可变引用，而是在显示这个问题的最新症状。fuego 邮件列表有[一个关于使用 boost 1.48 的相关问题](http://sourceforge.net/mailarchive/forum.php?thread_name=CALnA2CuN_SDK-RHO8ATsnRADeAqPsoTnPasskkUBv-MVEfQULQ@mail.gmail.com&forum_name=fuego-devel)，现在检查一下，很明显我已经编译了 1.49，所以我将重新编译 boost 的早期版本，看看是否能以某种方式修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:29:54.913

`mutable`修饰符意味着可以从方法中更改字段`const`。但是对于引用字段，这没有任何意义，因为在 C++ 中永远不能更改引用。

# gtk2hs - EventM 在 Gtk2Hs 中是如何工作的？

> ID：11191180
> 
> 赞同：0
> 
> 时间：2012-06-25T14:24:03.647
> 
> 标签：gtk2hs

我有一个使用 Gtk2Hs 绑定的小 Haskell 程序。可以通过单击 DrawingArea 在程序窗口上绘制点（小方块）：

```
[...]
    image <- builderGetObject gui castToDrawingArea "drawingarea"
    p <- widgetGetDrawWindow image
    gc <- gcNewWithValues p (newGCValues { foreground = Color 0 0 0,
        function = Copy })
    on image buttonPressEvent (point p gc)
    set image [ widgetCanFocus := True ]
[...]

point :: DrawWindow -> GC -> EventM EButton Bool
point p gc = tryEvent $ do
    (x', y') <- eventCoordinates
    liftIO $ do
        let x = round x'
        let y = round y'
        let relx = x `div` 4
        let rely = y `div` 4
        gcval <- gcGetValues gc
        gcSetValues gc (newGCValues { function = Invert })
        drawRectangle p gc True (relx * 4) (rely * 4) 4 4
        gcSetValues gc gcval 
```

通过试错法并在阅读 Hackage 的文档后，我设法将按钮按下事件添加到绘图区域，因为小部件默认情况下不提供此事件的信号。但是，我不了解 EventM 的定义和用法，所以如果我必须再次向小部件添加新事件，恐怕我将不得不与 EventM monad 斗争。我必须说我仍然不够精通 Haskell。我有点理解简单的 monad 是如何工作的，但是这个“type EventM ta = ReaderT (Ptr t) IO a”（在 Graphics.UI.Gtk.Gdk.EventM 中定义）对我来说似乎是个谜。

我的问题是：有人可以解释一下 EventM monad 的内部结构吗？例如在“buttonPressEvent :: WidgetClass self => Signal self (EventM EButton Bool)”的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T07:39:30.417

我被类似的问题所困扰，似乎 EventM 是一个 ReadT，它将读取 EButton 并返回 Bool。

# regex - 将 NR 的值传递给 AWK 中的变量

> ID：11191188
> 
> 赞同：3
> 
> 时间：2012-06-25T14:24:26.313
> 
> 标签：regex, bash, shell, sed, awk

我们可以传递 `NR`给变量`awk`吗？

我有一个这样的脚本：

```
 awk -v { blah blah..   
     ..........
     count--
     print count
    }
     if (count==0)
    {print "The end of function"
     print NR 
     exit
     } 
```

这是代码的 awk 部分。我想将`NR` var2 传递为：

```
 sed -n ''"$var1"','"$var2"'p' 
```

必须多次重复使用！

感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:39:54.310

如果您只想打印某个行的子集，那么您就快到了。-v 标志是要走的路。

```
awk -v var1=15 -v var2=25 'NR>=var1 && NR<=var2 {blah blah ...}' 
```

当然，您必须将 15 和 25 更改为您需要的。注意变量不应该被封装在引号中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:41:39.183

我不知道你想用`awk`,`sed`和`NR`变量来实现什么。你的意思是文件的行数？

这个命令得到它：

```
wc -l infile | sed -e 's/ .*$//' 
```

因此，将它与`-v`switch to 一起`awk`使用并根据需要使用它。下一个命令将打印`10`，因为`infile`我的计算机中有十行。

```
awk -v num_lines=$(wc -l infile | sed -e 's/ .*$//') 'BEGIN { print num_lines }' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T20:36:13.087

正如其他人所建议的那样，有更好的方法来实现总体目标。

但是，为了回答您的具体问题：

```
var2=$(awk 'END {print NR}' inputfile) 
```

并在 AWK 脚本中添加您可能需要的任何其他内容。

# php - 我的分页有什么问题？

> ID：11191189
> 
> 赞同：0
> 
> 时间：2012-06-25T14:24:28.857
> 
> 标签：php, pagination

我正在一个将新闻拆分到不同页面的网站上工作，我已经为此编写了一些 PHP 代码，但这似乎无法正常工作。我网站上的新闻被正确拆分，但是当一页只有足够的消息时，仍然会弹出“下一步”按钮，您可以滚动浏览空白页面。我对 PHP 比较陌生，所以我无法为此提出解决方案，希望这里有人可以提供帮助。

这是代码：

```
else {
    $conn = mysql_connect($host, $user, $pass);
        if(! $conn )
            {
                die('Could not connect: ' . mysql_error());
            }
mysql_select_db('nieuws');
    $rec_limit = 3;

    $sql = "SELECT count(id) FROM updates ";
    $retval = mysql_query( $sql, $conn );
if(! $retval )
{
    die('Could not get data: ' . mysql_error());
    }
    $row = mysql_fetch_array($retval, MYSQL_NUM );
    $rec_count = $row[0];

if( isset($_GET{'page'} ) )
{
    $page = $_GET{'page'} + 1;
    $offset = $rec_limit * $page ;
    }
else
{
    $page = 0;
    $offset = 0;
    }
    $left_rec = $rec_count - ($page * $rec_limit);

    $sql = "SELECT id, titel, inleiding, bericht, datum ".
            "FROM updates ".
            "LIMIT $offset, $rec_limit";

    $retval = mysql_query( $sql, $conn );
if(! $retval )
{
    die('Could not get data: ' . mysql_error());
    }
echo "<hr>";
while($row = mysql_fetch_array($retval, MYSQL_ASSOC))
{
   $intro = substr($row['bericht'], 0, 330); 
echo '<b style="font-size:18px;font-family:Arial,Helvetica,sans-serif;color:#2B2B2B;">'.htmlspecialchars(stripslashes($row['titel'])).'</b>  <br> '.
     '<i style="font-size:13px;">'.htmlspecialchars(stripslashes($row['datum'])).'</i><br><br> '.
     "{$row['inleiding']}".
     '... <a href="'.$_SERVER['PHP_SELF'].'?id='.$row['id'].'">Lees verder</a><br><br><br>';
        echo '<hr>';
} 
if( $page > 0 )
{
   $last = $page - 2;
echo "<a style=\"margin-left:0px;\"href=\"{$_SERVER['PHP_SELF']}?page=$last\">Vorige</a>";
   echo "<a style=\"margin-left:645px;\" href=\"{$_SERVER['PHP_SELF']}?page=$page\">Volgende</a>";
}
else if( $page == 0 )
{
   echo "<a style=\"margin-left:685px;\" href=\"{$_SERVER['PHP_SELF']}?page=$page\">Volgende</a>";
}
else if( $left_rec < $rec_limit )
{
  $last = $page - 2;
echo "<a style=\"margin-left:0px;\" href=\"{$_SERVER['PHP_SELF']}?page=$last\">Vorige</a>";
}
echo '<br><br><br>'; 
```

# bash - Solaris 中的 Bash 复制详细更新

> ID：11191195
> 
> 赞同：2
> 
> 时间：2012-06-25T14:24:45.857
> 
> 标签：bash, solaris

我正在编写一些小的 bash 脚本来复制 GNU/Linux 和 Solaris 中的某些文件/目录。Linux 中一切正常，但 cp 命令在 Linux 和 Solaris 中没有相同的选项。

复制命令是这样的：

```
cp -ruv $source $dest 
```

不幸的是，我不知道如何在 Solaris 中实现复制详细和复制更新。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:28:43.643

不幸的是，`cp`在 Solaris 下没有这个选项。 `man solaris`应该揭示这一点。

您是否愿意让您的脚本依赖于[rsync](http://linux.die.net/man/1/rsync.)？

或者，如果可能，您可以安装[coreutils](http://www.sunfreeware.com/programlistsparc10.html#coreutils)包并使用 GNU 的 cp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T14:51:10.490

我自己也遇到了类似的问题，发现 gcp 也可以解决这个问题。我已将安装 coreutils 作为标准系统设置的一部分。

我在新的 Solaris 安装上运行这些：

```
pkgadd -d http://get.opencsw.org/now
pkgutil -U
pkgutil -i -y coreutils
pkgutil -a vim
pkgutil -i -y vim
pkgutil -i -y findutils 
```

请记住将路径 - 和文档路径 - 添加到您的配置文件，并可能添加到 /etc/profile 的系统配置文件：

```
# Set the program path
PATH=$PATH:/usr/sfw/bin:/usr/sfw/sbin:/usr/openwin/bin:/opt/csw/bin:/usr/ccs/bin:/usr/local/bin:/usr/local
export PATH

# Set the documentation path
MANPATH="$MANPATH:/usr/share/man:/opt/sfw/man:/opt/csw/man"
export MANPATH 
```

听起来您可能是 Solaris 新手——因为我相对较新。我也做这些，应该不会影响任何事情。

我将 VIM 设置为默认编辑器而不是 VI - 它是兼容的，但具有更多功能，包括 ANSI 颜色，并且一些终端仿真器将通过您的鼠标单击和滚动以获得更大的灵活性：

```
# Set the default editor
EDITOR=vim
export EDITOR 
```

然后，如果您仍在使用不显示任何内容的默认提示，您可能需要添加一些信息 - 此版本需要 Bash shell：

```
# Set the command prompt, which includes the username, host name, and the current path.
PS1='\u@\h:\w>'
export PS1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T19:39:32.907

要重新创建详细模式，您可以将输出发送到控制终端 ( `/dev/tty`)，同时将自身的`stdoout`输出`tee`传递给`cp`via `xargs`。

```
find /some/source/directory -type f | \
  tee /dev/tty | xargs -I {} cp {} /copy/to/this-directory/ 
```

将 替换为`find`您喜欢的任何内容，只要它将要通过管道复制到的文件的路径传递到`tee`.

在没有额外 GNU 实用程序的标准 Solaris 10 系统上测试。

# android - android闹钟无法启动闹钟活动

> ID：11191201
> 
> 赞同：0
> 
> 时间：2012-06-25T14:24:57.187
> 
> 标签：android, android-emulator, alarm

我是 android 编程新手，正在尝试制作这个简单的警报应用程序。我编写了我的代码，并且编译时没有错误。该应用程序在模拟器中运行，即主要活动询问日期和时间，但是当我单击确认按钮时，它会显示消息 - “不幸的是，Timer1 已停止工作。”

我的主要活动的代码如下：

```
public void onClick(View v) {
    EditText date = (EditText) findViewById(R.id.editDate);
    EditText month = (EditText) findViewById(R.id.editMonth);
    EditText hour = (EditText) findViewById(R.id.editHour);
    EditText min = (EditText) findViewById(R.id.editMin);
    int dt = Integer.parseInt(date.getText().toString());
    int mon = Integer.parseInt(month.getText().toString());
    int hr = Integer.parseInt(hour.getText().toString());
    int mnt = Integer.parseInt(min.getText().toString());
    Intent myIntent = new Intent(MainActivity.this, AlarmActivity.class);
    pendingIntent = PendingIntent.getService(MainActivity.this, 0, myIntent, 0);
    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.DATE, dt);
    calendar.set(Calendar.MONTH, mon);
    calendar.set(Calendar.HOUR, hr);
    calendar.set(Calendar.MINUTE, mnt);
    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);
} 
```

我不明白 logcat 中的所有错误是什么意思，所以我发布它们：

```
06-25 16:03:32.175: I/Process(566): Sending signal. PID: 566 SIG: 9
06-25 16:03:53.775: I/dalvikvm(612): threadid=3: reacting to signal 3
06-25 16:03:54.046: I/dalvikvm(612): Wrote stack traces to '/data/anr/traces.txt'
06-25 16:03:54.255: I/dalvikvm(612): threadid=3: reacting to signal 3
06-25 16:03:54.305: I/dalvikvm(612): Wrote stack traces to '/data/anr/traces.txt'
06-25 16:03:54.735: I/dalvikvm(612): threadid=3: reacting to signal 3
06-25 16:03:54.785: I/dalvikvm(612): Wrote stack traces to '/data/anr/traces.txt'
06-25 16:03:54.925: D/gralloc_goldfish(612): Emulator without GPU emulation detected.
06-25 16:05:09.605: D/AndroidRuntime(612): Shutting down VM
06-25 16:05:09.605: W/dalvikvm(612): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-25 16:05:09.685: E/AndroidRuntime(612): FATAL EXCEPTION: main
06-25 16:05:09.685: E/AndroidRuntime(612): java.lang.NumberFormatException: Invalid int: "android.widget.EditText@41030b40"
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.Integer.invalidInt(Integer.java:138)
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.Integer.parse(Integer.java:375)
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.Integer.parseInt(Integer.java:366)
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.Integer.parseInt(Integer.java:332)
06-25 16:05:09.685: E/AndroidRuntime(612):  at com.kapymay.tversion1.MainActivity$1.onClick(MainActivity.java:34)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.view.View.performClick(View.java:3511)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.view.View$PerformClick.run(View.java:14105)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.os.Handler.handleCallback(Handler.java:605)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.os.Looper.loop(Looper.java:137)
06-25 16:05:09.685: E/AndroidRuntime(612):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 16:05:09.685: E/AndroidRuntime(612):  at java.lang.reflect.Method.invoke(Method.java:511)
06-25 16:05:09.685: E/AndroidRuntime(612):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 16:05:09.685: E/AndroidRuntime(612):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 16:05:09.685: E/AndroidRuntime(612):  at dalvik.system.NativeStart.main(Native Method)
06-25 16:05:10.445: I/dalvikvm(612): threadid=3: reacting to signal 3
06-25 16:05:10.575: I/dalvikvm(612): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:17:13.630

```
 int dt = Integer.parseInt(date.getText().toString());
                int mon = Integer.parseInt(month.getText().toString());
                int hr = Integer.parseInt(hour.getText().toString());
                int mnt = Integer.parseInt(min.getText().toString()); 
```

其中之一不能解析为整数。

看哪一个的方法：

首先这样写出来：

```
String date = date.getText().toString(); 
```

对于所有 4 做类似

```
and then Log.i("YOURACTIVITNAME", "date:"+date+" hour"+.....); 
```

或者，您可以简单地插入一个断点，而不是 Log.i，然后对其进行调试。看看哪一个犯了错误。

在 tostring 之后使用 .trim() 删除空格也可能很好。

# android - 如何将视频流转换为 android 中的图像？

> ID：11191206
> 
> 赞同：2
> 
> 时间：2012-06-25T14:25:15.527
> 
> 标签：android, video-streaming, rtsp

我是这里和android开发的新手。我正在尝试将从 rtsp 流（我认为是 h.264）接收的视频转换为图像（任何类型的图像）。

有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:54:08.550

我不确定你的要求是什么，你需要每一帧吗？但是我要尝试的是以下内容：

据我所知，您可以将任何视图保存为 jpg 或 png。因此，我首先尝试使用 SurfaceView 播放视频，然后尝试将 SurfaceView 保存到文件中。

这里有一个[关于如何将视图保存到 jp 或 png 的链接](https://stackoverflow.com/questions/3107527/android-save-view-to-jpg-or-png)。

# vb.net - Vb.net - 目标文件夹上的 FileMovement Lock

> ID：11191211
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:25:28.213
> 
> 标签：vb.net

源代码：vb.net

我们正在使用 File.Move() 方法将文件从源移动到目标位置。但是目标位置正在由一个工具监控，每当我们将文件移动到目标位置时，它都会拾取文件并进行处理。这里的问题是，当我们尝试移动大约 5GB 左右的大容量文件时，该工具会立即拾取文件并尝试在移动操作完成之前对其进行处理，并向所有用户发送失败通知。再次成功移动后文件完整，则本次拾取并处理成功，本次发送成功通知。

我们无法控制监视目标文件夹的工具，因为它是第三方工具。但是，我们想找出替代选项，在目标文件夹上加锁，例如读写访问，直到移动操作完成，这样第 3 方将无法获取或尝试访问该文件。

请帮助我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:33:03.600

不确定它是否有效，但您也可以对目录进行以下操作：

```
FileOpen(1, "c:\file.ext", OpenMode.Binary)    
Lock(1)
'Do something with file here
Unlock(1)
FileClose(1) 
```

参考和例子[在这里](http://msdn.microsoft.com/en-us/library/w804hcwf%28v=VS.71%29.aspx)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:53:49.783

首先，我同意@hometoast，有时像这样的工具只是寻找特定的文件扩展名，这样你就可以使用不同的文件扩展名复制然后重命名。

但除此之外，将文件下载到临时位置，然后将文件移动到被监视的目录中。Move 不会重新复制文件内容，而只会更新其在文件系统中的指针。应该是原子的。

# java - 使用 Spring 控制器返回的 jQuery 和 GSON 解析 JSON 对象

> ID：11191212
> 
> 赞同：1
> 
> 时间：2012-06-25T14:25:30.073
> 
> 标签：java, spring-mvc, gson

我在这里寻找一些解决方案，但我没有找到我的问题的任何正确答案，所以我想问你。

我有一些简单的属性的 POJO。和另一个 POJO 的一个列表。

```
public class Standard implements Serializable {
    private String id;
    private String title;
    private String description;
    private Set<Interpretation> interpretations = new LinkedHashSet<Interpretation>();
}

public class Interpretation implements Serializable {
    private String id;
    private String title;
    private String description;
} 
```

在我的控制器类中，我使用 GSON 返回标准 POJO。

```
@RequestMapping(value="/fillStandard", method= RequestMethod.GET)
public @ResponseBody String getStandard(@RequestParam String id) {
    Standard s = DAOFactory.getInstance().getStandardDAO().findById(id);
    return new Gson().toJson(s);
} 
```

问题是，我能否使用 jQuery 获得标准 POJO 中的解释列表？就像是 ：

```
function newStandard() {
$.get("standard/fillStandard.htm", {id:"fe86742b2024"}, function(data) {
    alert(data.interpretations[0].title);
}); 
```

}

非常感谢 ！

**编辑：** 好吧，感谢@Atticus，我的问题有了解决方案。希望它会帮助某人。

```
@RequestMapping(value="/fillStandard", method= RequestMethod.GET, produces="application/json")
    public @ResponseBody Standard getStandard(@RequestParam String id) {
        Standard s = DAOFactory.getInstance().getStandardDAO().findById(id);
        return s;
    } 
```

Using`@ResponseBody`允许您返回整个 POJO，但您需要添加`produces="application/json"`到`@RequestMapping`注释中。然后，您将能够像我想象的那样在 jQuery 中将返回的对象作为 JSON 捕获。

```
function newStandard() {
$.get("standard/fillStandard.htm", {id:"idOfStandard"}, function(data) {
    alert(data.id);    //Standard id
    alert(data.interpretations[0].title);   //id of Interpretation on first place in array
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:44:22.520

那么您必须创建并注册您的自定义序列化程序。

它是这样的：

```
//You create your builder that registers your custom serializer with the class you want to serialize
GsonBuilder builder = new GsonBuilder();
builder.registerTypeAdapter(Standard.class, new StandardSerializer());

//Then you create your Gson object
Gson gson = builder.create();
//Then you pass your object to the gson like
Standard s = DAOFactory.getInstance().getStandardDAO().findById(id);
gson.toJson(s); 
```

您的序列化程序如下所示：

```
public class StandardSerializer implements JsonSerializer<Standard>{

    @Override
    public JsonElement serialize(Standard src, Type typeOfSrc,
            JsonSerializationContext context) {

            JsonObject obj = new JsonObject();
            //You put your simple objects in like this
            obj.add("id",new JsonPrimitive(src.getId()));
            //You put your complex objects in like this
            JsonObject interpretations = new JsonObject();
            //Here you need to parse your LinkedHashSet object and set up the values. 
            //For the sake of simplicity I just access the properties (even though I know this would not compile)
            interpretations.add("title", src.getInterpretation().getTitle());
            obj.add("interpretations", interpretations);
            return obj;
        }

} 
```

在这种情况下，您的 Json 将类似于：

```
{"id":"idValue", "title":"titleValue", "description":"descriptionValue", "interpretations":["id":"interpretationIdValue"]} 
```

现在，您可以`jQuery`像这样访问您的数据：

```
function newStandard() {
$.get("standard/fillStandard.htm", {id:"fe86742b2024"}, function(data) {
    alert(data.interpretations.title);
});
} 
```

我希望这有帮助。

**编辑：** 我看到您的响应被转换为声明的方法参数类型`String`（如此[处](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)所述：16.3.3.2 支持的方法返回类型）。但是您真正想要的是您的`Standrad`POJO 转换为 JSON。我对 Spring 不是很熟悉，但正如我在[这里](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)所读到的（16.3.2.6 Producible Media Types），还有另一个可能更简单的解决方案。如果要返回 JSON 对象，请将 `getStandard`方法的返回类型更改为`Standard`而不是`String`添加`produces="application/json"`到您的`@RequestMapping`注释中。据我所读，这应该告诉`Spring`返回类型应该转换为 JSON。在这种情况下，您不需要使用`Gson`.

# jquery - 选择器中带有变量的 jQuery 选择器

> ID：11191218
> 
> 赞同：2
> 
> 时间：2012-06-25T14:26:11.570
> 
> 标签：jquery, jquery-selectors

快速而愚蠢的 jQuery 选择器问题。

为什么这**不起作用**：**[jsFiddle 演示](http://jsfiddle.net/Seefeld/w7hMk/19/)**

```
//config
var ThisTable = $('.ReallyLongSillyTableName');

// Function
$(ThisTable + ' > tbody > tr > td:last-child').each(function() {
    $(this).append('Sales Orders: ');
}); 
```

但是，这**确实有效**：**[jsFiddle demo](http://jsfiddle.net/Seefeld/w7hMk/20/)**

```
$('.ReallyLongSillyTableName td:last-child').each(function() {
    $(this).append('Some Text');
}); 
```

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:27:01.723

你可以使用这个：

```
$('tbody > tr > td:last-child', ThisTable).each(function() {
    $(this).append('Sales Orders: ');
}); 
```

或这个：

```
ThisTable.find('tbody > tr > td:last-child').each(function() {
    $(this).append('Sales Orders: ');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:27:08.667

尝试如下，

```
ThisTable.find('tbody > tr > td:last-child').each(function() {
    $(this).append('Sales Orders: ');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T14:27:36.390

`$('.ReallyLongSillyTableName');`是一个 jQuery 对象，所以你不能将它用作字符串。

所以试试

```
var ThisTable = '.ReallyLongSillyTableName';

// Function
$(ThisTable + ' > tbody > tr > td:last-child').each(function() {
    $(this).append('Sales Orders: ');
});

$(ThisTable + ' td:last-child').each(function() {
    $(this).append('Some Text');
}); 
```

并且您可以`ThisTable`如上所述使用或`$(ThisTable)`（使其成为 jquery 对象）用于其他目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:36:14.770

1.  `var ThisTable = $('.ReallyLongSillyTableName');`是 jQuery 对象（javascript 对象）

2.  `$(ThisTable + ' > tbody > tr > td:last-child')` 在这里`()`你有javascript对象+字符串，不会给你完整的字符串（不是字符串+字符串！）

3.  你需要`var ThisTable = '.ReallyLongSillyTableName';`

# php - 使用 XAMPP for Windows 为 PHP 启用 cURL 库

> ID：11191219
> 
> 赞同：0
> 
> 时间：2012-06-25T14:26:13.333
> 
> 标签：php, curl, error-handling, xampp

我正在使用以下代码运行 PHP 代码：

```
$ch = curl_init(); 
```

当我到达这一行时，返回以下错误：

致命错误：在第 79 行调用 C:\xampp\htdocs\myfiles\API\IPVIKING_API.php 中未定义的函数 curl_init()

现在我找到了所有关于在 php.ini 文件中启用 curl 扩展的答案，并且我已经做到了，在这里遵循这个问题：[如何在 xampp 中启用 curl？](https://stackoverflow.com/questions/3020049/how-to-enable-curl-in-xampp).

我的问题是我没有这 3 个文件：

```
C:\Program Files\xampp\apache\bin\php.ini
C:\Program Files\xampp\php\php.ini
C:\Program Files\xampp\php\php4\php.ini 
```

相反，我有 2 个文件称为

```
C:\Program Files\xampp\php\php.ini-development
C:\Program Files\xampp\php\php.ini-production 
```

我已取消注释

```
;extension=php_curl.dll 
```

在他们两个中，重新启动我的浏览器和xampp，但它仍然给我同样的错误。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:30:25.143

做一个

```
<?php phpinfo(); ?> 
```

在那里你可以看到加载了哪个**php.ini 。**在此文件中，您取消注释扩展行。

当 phpinfo 中的此路径中没有 php.ini 时，这应该是**xampp/php/php.ini**然后重命名这两个文件之一

```
C:\Program Files\xampp\php\php.ini-development 
```

至

```
C:\Program Files\xampp\php\php.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:30:06.760

您应该将 C:\Program Files\xampp\php\php.ini-production 移动到 C:\Program Files\xampp\php\php.ini。

```
rename "C:\Program Files\xampp\php\php.ini-production" "C:\Program Files\xampp\php\php.ini" 
```

然后改变：

```
;extension=php_curl.dll 
```

至

```
extension=php_curl.dll 
```

然后重新启动 Apache。

有些系统需要将两个文件从 PHP 安装位置复制到您的 WINDOWS\System32 目录：

```
libeay32.dll
ssleay32.dll 
```

**更新：**

```
copy "C:\Program Files\xampp\php\php.ini" "C:\xampp\php\php.ini" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:58:53.783

在中搜索“php.ini”文件

> xampp\php\ 目录

打开 php.ini

查找“卷曲”

你会得到线

> ;扩展=php_curl.dll

通过删除行前的分号取消注释

> 扩展=php_curl.dll

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T08:13:13.637

有一个名为 php 的文件（我认为这是真正的 php.ini），其类型为配置设置，您需要取消注释 extension = php_curl.dll。您还应该取消注释`.ini-development`and `.ini-production`。重新启动浏览器和apache，它应该可以工作。

# java - 如何访问控制器中的 POST 变量？

> ID：11191226
> 
> 赞同：4
> 
> 时间：2012-06-25T14:26:48.153
> 
> 标签：java, post, playframework, playframework-2.0

我正在发出以下 AJAX 请求：

```
$.post('/route', {
    arg1 : 'foo',
    arg2 : 'bar'
}); 
```

通过路线：

```
POST   /route    controllers.Test.readPost() 
```

如何在控制器的方法中访问这些 POST 变量？

```
public static Result readPost() {
    return TODO; // read post variables
} 
```

我在文档中找不到这样做的简单方法。它仅说明如何从 JSON 请求中获取值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T15:26:16.750

利用`DynamicForm`

```
public static Result getValues(){
    DynamicForm requestData = form().bindFromRequest();

    String name = requestData.get("name");
    String desg = requestData.get("desg");
    // etc

    return ok("You sent: " + name + ", " + desg);
} 
```

还有其他可能构造 AJAX 查询并通过以下方式传递参数`javascriptRoutes`：[https ://stackoverflow.com/a/11133586/1066240](https://stackoverflow.com/a/11133586/1066240)

当然，它会通过 URL 传递参数，因此它并不适合每个值，但在许多地方，它足以使用 AJAX 发送 POST 请求。当然，使用文件中`javascriptRoutes`设置的类型创建请求。`routes`

*顺便说一句：如果你写了你正在使用的版本会更好。*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-25T14:32:45.607

您可以将 GET 与 ajaxRequest 一起使用。更多信息可以在这里找到[http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)

```
var mygetrequest=new ajaxRequest()
mygetrequest.onreadystatechange=function(){
 if (mygetrequest.readyState==4){
  if (mygetrequest.status==200 || window.location.href.indexOf("http")==-1){
   document.getElementById("result").innerHTML=mygetrequest.responseText
  }
  else{
   alert("An error has occured making the request")
  }
 }
}
var namevalue=encodeURIComponent(document.getElementById("name").value)
var agevalue=encodeURIComponent(document.getElementById("age").value)
mygetrequest.open("GET", "basicform.php?name="+namevalue+"&age="+agevalue, true)
mygetrequest.send(null) 
```

# ruby-on-rails - 为什么推荐一个 Heroku web dyno 使用 rack？

> ID：11191227
> 
> 赞同：1
> 
> 时间：2012-06-25T14:26:48.727
> 
> 标签：ruby-on-rails, heroku, sinatra, rack

我有一个包含一些静态内容的网站。它包含一些页面、css、javascript 和图像。我想免费在 Heroku 上托管这个，我知道我可以用他们的一个 web dyno 计划来做。我的问题是，为什么他们的文档建议在单个网络测功机上托管静态内容的机架？在一个 web dyno 上运行 Rails 或 Sinatra 会遇到什么问题？使用 rack 是否只能以某种方式解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T08:11:55.443

推荐它，因为它是解决问题的“最简单”的解决方案。为什么要使用 Rails 或 Sinatra 框架，它们将通过数百/数千行代码处理传入的请求，如果该代码无事可做。

但是，如果您想托管一个静态站点，我强烈推荐 AWS S3、Github Pages 或 Google Drive over Heroku 中的任何一个。Heroku 上的单一测功机计划可能是免费的，但那是因为它会在一段时间后闲置，并且不会消耗他们的资源。对空闲测功机的第一个请求往往需要额外的 5-15 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:15:41.287

Rails 和 Sinatra 都是基于 rack 的，所以如果你只有静态内容（比如 .html 页面），那么使用准系统 rack 效果很好。

我在[https://github.com/jwo/rack-static-sample上放了一个示例存储库](https://github.com/jwo/rack-static-sample)

这个想法是你的机架文件（config.ru）只是简单地用你的公共目录中的一个文件来响应（这个版本只是一个单一的 index.html）

```
use Rack::Static, 
  :urls => ["/stylesheets", "/images"],
  :root => "public"

run lambda { |env|
  [
    200, 
    {
      'Content-Type'  => 'text/html', 
      'Cache-Control' => 'public, max-age=86400' 
    },
    File.open('public/index.html', File::RDONLY)
  ]
} 
```

# opengl - 从顶部和底部的两个 3D 点/一个不对称对象的向量中提取三个欧拉角

> ID：11191228
> 
> 赞同：2
> 
> 时间：2012-06-25T14:26:52.817
> 
> 标签：opengl, 3d, geometry, rotation, euler-angles

我知道一条线上的两个 3D 点（不对称物体的顶部和底部），并且想找到欧拉角（沿 x、y 和 z 轴的旋转）。

**示例：**需要对以下 OpenGL 代码进行逆向工程，以下仅是展示场景的示例。

```
//Translation
glTranslated(p1.x, p1.y, p1.z);

//Rotation
glRotatef(rot.x, 1.0f, 0.0f, 0.0f);
glRotatef(rot.y, 0.0f, 1.0f, 0.0f);
glRotatef(rot.z, 0.0f, 0.0f, 1.0f);

// Draw the object ALONG Y-AXIS
p2 = DrawMyObject(); //p2 is top of my object 
```

现在在某些情况下，我只得到 p1 和 p2，我需要知道欧拉角（沿 x、y 和 z 轴的旋转）。如何？

**这是我尝试过的，答案应该是 (Rx, Ry, Rz): (4, -3, -11),**

```
cv::Point3d p1, p2;
p1.x = 0.0525498;
p1.y = 0.0798909;
p1.z = -1.20806;

p2.x = 0.0586557;
p2.y = 0.111226;
p2.z = -1.20587;

double dx, dy, dz;
double angle;

dx = p2.x - p1.x;
dy = p2.y - p1.y;
dz = p2.z - p1.z;

angle = std::atan2(dy, dz); angle = RAD2DEG(angle);
std::cout<<"\n atan2(dy, dz): "<<int(90 - angle);

angle = std::atan2(dx, dz); angle = RAD2DEG(angle);
std::cout<<"\n atan2(dz, dx): "<<angle;

angle = std::atan2(dy, dx); angle = RAD2DEG(angle);
std::cout<<"\n atan2(dy, dx): "<<int(angle -90);

std::cout<<std::endl; 
```

我没有得到完全正确的答案，尤其是沿 Y 的旋转根本不正确。我认为 p1 和 p2 在沿 y 轴旋转时都位于 y 轴上，所以问题是。那么什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:13:46.503

1.  如评论中所述，您将需要对象上的第三点或恒定的世界空间矢量。请注意，根据您的特定应用和线相对于该矢量的方向，使用恒定矢量可能会引入万向节问题，因此如果您有第三点可能更可取。
2.  构造一个正交归一化的 3x3 旋转矩阵：
    1.  使用[Grahm-Schmit 方法](http://en.wikipedia.org/wiki/Gram%E2%80%93Schmidt_process)对前两行进行正交归一化，其中：
        *   u1 = p2 - p1
        *   u2 = p3 - p1（或常数向量）
        *   应用 Grahm-Schmit 后，这些向量将成为 3x3 矩阵的前 2 行。
    2.  矩阵的第三行只是前两行的叉积。
3.  [将生成的矩阵分解为欧拉角。](http://nghiaho.com/?page_id=846)

# php - 在 div 中使用菜单 div 单独发布表单

> ID：11191229
> 
> 赞同：0
> 
> 时间：2012-06-25T14:26:52.960
> 
> 标签：php, mysql, ajax, html

我有 2 个 div，一个用于菜单链接，另一个用于内容。我想要做的是单击一个菜单链接和该菜单链接的页面以加载到内容 div 中。

我已经这样做了，并且有效。问题是 div 内的页面包含一个没有显示成功消息的表单，并且数据库没有更新。

它所做的只是刷新到主内容页面，或者像内容页面一样打开当前窗口，或者打开一个带有内容页面的新窗口。

有什么解决方案？

### Logged_in.php

左 div = 菜单

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
$(document).ready(function(){

  $(".menuLink").click(function(){

$.ajax({
  type: "POST",
  url: $(this).attr('href'),
  data: "",
  cache: false,
  success: function(html){ $("#Middle").html(html); }
});

 });

});
</script>

</head>
<body>
    <div id="head">

<div class="lefttop" align="center">

  <div class="lefttopleft">
  <a class="menuLink" href="Test.php" onclick="return false;"><img src="Images/logo.jpg" width="94" height="21" /></div> 
```

当单击该链接时，页面加载到内容 div 中，所以现在该页面在内容 div 中显示一个表单，我遇到的问题是填写表单，单击提交，它更新数据库，它只是刷新到主要内容 div或者只是页面加载文件点击或在新窗口中这样做。

### 内容 div 中的 Test.php

```
session_start();
include_once("connect.php");
include_once("functions.php");

if($_POST['WallSubmit'] && $_POST['Wall']){

  $wall = makesafe($_POST['Wall']);

mysql_query("INSERT INTO `Wall` (`ID`, `Username`, `MessageBy`, `Date`, `Message`) VALUES ('', '', '$username', '" . time() . "', '$wall')");

}

?>

<body>
<form method="post">
  <table class="default" style="width: 80%" align="center">
<tr>
  <td class="subheader">Wall</td>
</tr>
<tr>
  <td class="content">Post a comment.<br /><textarea name='Wall' id='Wall' style='width: 99%; height: 110px;'></textarea><br /><br/><center><input type='submit' value='Post' name='WallSubmit' /></center><br /><hr><br />Latest Comments.</td>
</tr>
</td>
</table>
</form>
</body>
</html> 
```

有没有一种简单的方法可以解决我到处都看过的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:39:05.240

首先，尝试在表单标签上设置一个操作。该操作定义了表单将提交到的页面。

```
<form method="post" action="Test.php"> 
```

有了这个表单应该被提交到Test.php。如果它仍然没有做任何事情，请尝试在页面顶部打印变量转储（[手册](http://php.net/manual/de/function.var-dump.php)） 。`var_dump($POST);`然后，您将看到帖子属性的所有设置值。从那里开始应该很容易找到错误。

**编辑**

在您发表评论后，我意识到您正在尝试使用 AJAX 发送表单并重新加载内容 div。您必须分两步执行此操作。首先将表单的数据发送到Test.php，然后重新加载内容div。如果偶然发现这个问题：[jQuery AJAX 提交表单](https://stackoverflow.com/questions/1960240/jquery-ajax-submit-form)。这可以帮助您如何提交表单。如果你想使用返回值，你可以尝试这样的事情：

```
$.post("Test.php", $("#form").serialize(),
   function(data) {
     alert("Returned data: " + data);
   }); 
```

见[jQuery.post()](http://api.jquery.com/jQuery.post/)

# jquery - 从包含 jQuery 中文件名的数组中加载图像

> ID：11191233
> 
> 赞同：1
> 
> 时间：2012-06-25T14:27:08.807
> 
> 标签：jquery

是否可以从 jQuery 的数组中加载图像？

```
The array looks like: var imgNames = ['images/image01.jpg, images/image02.jpg, images/image03.jpg'] 
```

我希望它在父元素中创建以下内容：

```
<div id="imgNames">
  <img src="images/image01.jpg">
  <img src="images/image02.jpg">
  <img src="images/image03.jpg">
</div> 
```

我尝试了以下方法：

```
preload = function() {
    this.each(function(){
        $('<img/>')[0].src = imgNames;
    });
}
  var imgNames = ['images/image01.jpg, images/image02.jpg, images/image03.jpg'];
    $(document).ready(function(){
   // Preload Images:
preload();

}); 
```

我在网上找到的，但我认为它是为替换现有元素而量身定制的——而不是创建它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:31:32.860

假设现有的 div：

```
<div id="imgNames"></div> 
```

然后您可以按如下方式循环遍历数组：

```
var imgNames = ['images/image01.jpg', 'images/image02.jpg', 'images/image03.jpg'];

$(document).ready(function() {
    var $div = $("#imgNames");

    $.each(imgNames, function(i, val) {
        $("<img />").attr("src", val).appendTo($div);
    });
}); 
```

注意：根据上面 Krister 的评论，您的数组有一个元素，它是一个包含所有三个图像名称的字符串。我假设您打算包含三个字符串，每个字符串都有一个文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:31:21.520

是的你可以

请看下面的代码

```
preload = function(images) {
    $(images).each(function() {
        $('<img/>').attr("src", this).appendTo("#imgNames");
    });
}
var imgNames = ['images/image01.jpg', 'images/image02.jpg', 'images/image03.jpg'];
$(document).ready(function() {
    // Preload Images:
    preload(imgNames);

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:45:21.027

试试这个

```
preload=function(){   
$.each(imgNames,function(index,value){
$("#imgNames img:nth-child("index")").attr('src',value)
});
} 
```

# regex - 如何在 Vim 中匹配行尾而不是段落与正则表达式？

> ID：11191238
> 
> 赞同：2
> 
> 时间：2012-06-25T14:27:28.080
> 
> 标签：regex, vim

我试图加入一个段落中的所有行，但不将一个段落与下一个段落连接起来。

在我的文本文件中，段落不是由它们之间的空行定义的，而是在行尾有一个句点。句号之后可能有空格，但它仍然定义了段落的结尾。

所以，我想做一个跳转到下一行的宏，而不是停在那些末尾有句点的行上。

我使用了这个正则表达式：

```
[^\.\s][\s]*$ 
```

含义：查找任何不是句点也不是空格的字符，可选地后跟空格到行尾。

然后我会应用该`J` 命令将匹配的行与下一行连接起来，然后重复。

它在[RegexPal](https://regexpal.com)上运行良好，但在 Vim 中它停在有句点和两个空格的行处。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:00:18.887

与其在宏中将正则表达式与`J`命令一起使用，不如使用正则表达式替换来删除换行符？这似乎对我有用：

```
:%s/[^\.]\s*\zs$\n\(^\s*$\n\)*/ / 
```

解释：

*   `[^\.]\s*\zs$\n`-- 不以句点结尾的行；在换行之前开始替换。
*   `\(^\s*$\n\)*`-- 包括仅包含空格的任何其他行

然后用空格替换这个正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:06:26.030

如果光标位于段落的第一行，则可以将其行与

```
:,/\.\s*$/j 
```

要对缓冲区中的所有段落执行相同操作，请使用命令

```
:g/^/,/\.\s*$/j 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T20:22:39.447

这应该会让你分道扬镳：使用*shime*的正则表达式 ( `\.\s*$`) 来识别你想要加入的行，然后使用`:v//j!`将每个这样的行加入到下一行。

然后重复`:v//j!`命令直到完成。（定义一个宏来做到这一点： `:map v :v//j!<cr>`然后`v`重复点击。）

如果您在类似 *NIX 的机器上，更好的解决方案是：

```
awk '/\.\s*$/ { printf("%s\n", $0);} { printf("%s", $0); } END { printf("\n"); }' <your_file >your_other_file 
```

# dictionary - 如何以 Pythonic 方式使用参考字典更新 Python 字典？

> ID：11191243
> 
> 赞同：0
> 
> 时间：2012-06-25T14:27:54.367
> 
> 标签：dictionary, python

我认为这很简单。我要做的就是`'code'`用另一个具有该值的字典更新原始字典。我感觉 2 for 循环和 IF 循环可以进一步缩短以获得答案。在我的实际问题中，我需要更新的字典只有几千个。多谢你们！

**Python：**

```
referencedict = {'A': 'abc', 'B': 'xyz'}

mylistofdict = [{'name': 'John', 'code': 'A', 'age': 28}, {'name': 'Mary', 'code': 'B', 'age': 32}, {'name': 'Joe', 'code': 'A', 'age': 43}]

for eachdict in mylistofdict:
    for key, value in eachdict.items():
        if key == 'code':
            eachdict[key] = referencedict[value]

print mylistofdict 
```

**输出：**

```
[{'age': 28, 'code': 'abc', 'name': 'John'}, {'age': 32, 'code': 'xyz', 'name': 'Mary'}, {'age': 43, 'code': 'abc', 'name': 'Joe'}] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:30:34.990

不需要遍历 的所有值`eachdict`，直接查找`code`即可：

```
for eachdict in mylistofdict:
    if 'code' not in eachdict:
        continue
    eachdict['code'] = referencedict[eachdict['code']] 
```

您可能可以省略`code`存在的测试，您的示例列表始终包含一个`code`条目，但我认为最好是安全的。在 referencedict 结构中查找代码假定所有可能的代码都可用。

我`if 'code' not in eachdict: continue`在这里用过；反之亦然 ( `if 'code' in eachdict`)，但这样您可以在不需要时更轻松地删除该行，并为自己节省一个缩进级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:35:11.550

```
referencedict = {'A': 'abc', 'B': 'xyz'}

mylistofdict = [{'name': 'John', 'code': 'A', 'age': 28}, {'name': 'Mary', 'code': 'B', 'age': 32}, {'name': 'Joe', 'code': 'A', 'age': 43}]

for x in mylistofdict:
   try: 
    x['code']=referencedict.get(x['code'])
   except KeyError:
       pass
print(mylistofdict) 
```

# android - 如何在应用程序内解码 Android 中的 MP3？

> ID：11191246
> 
> 赞同：7
> 
> 时间：2012-06-25T14:28:04.837
> 
> 标签：android, mp3, decode

我目前正在开发一个允许用户选择 MP3 音频文件的应用程序。该文件然后由我的应用程序处理。

对于此处理，应用程序需要解码音频文件以获取原始 PCM 输出。

要解码 MP3，我有两个选择：

1.  使用Android系统解码MP3，获取PCM数据。
2.  自己在手机上解码 MP3，无需支付 MP3 许可费。

我的问题是＃1在技术上是否可行？对于#2，手机上的 MP3 许可证是否也涵盖应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T01:43:18.453

据我所知，没有 Android 提供的解码 MP3 的方法。

我过去使用过[JLayer](http://www.javazoom.net/javalayer/javalayer.html)，可以推荐它用于 MP3 处理。将 NDK 与 c++ 库一起使用可能会更快，但如果您希望将其保留为 Java，那就是我会使用的。它仍然比实时更快，大约 30 秒以平均比特率 3 分钟的 MP3 解码所有帧。这是 Galaxy S(1GHz) 的情况，因此任何较新的手机都更快。

就许可而言，我无法帮助你。JLayer 本身是 LGPL，但 MP3 许可的世界比用过的机油更模糊。经过几天寻找具体答案后，我放弃并做到了。整个世界似乎对谁首先持有许可证存在分歧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-03T15:15:45.137

Android系统现在可以解码mp3文件了，看[这里](https://developer.android.com/guide/topics/media/media-formats.html)介绍了Android平台提供的媒体编解码器、容器和网络协议支持。

MedieCodec 是一个非常强大的框架，用于对媒体文件进行编码和解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:47:18.460

选项 1 绝对不可能（除非您想针对 ICS+ 设备并愿意编写本机 C 代码来使用 OpenSL 解码 MP3）。jLayer 的 Geobits 推荐是一个不错的选择。在大多数情况下，处理 jLayer 是轻而易举的事。这是一篇很好的博客文章，将有所帮助： http: [//mindtherobot.com/blog/624/android-audio-play-an-mp3-file-on-an-audiotrack/](http://mindtherobot.com/blog/624/android-audio-play-an-mp3-file-on-an-audiotrack/)

# ruby-on-rails - 问号和冒号 - 如果在 ruby 中其他

> ID：11191247
> 
> 赞同：11
> 
> 时间：2012-06-25T14:28:05.267
> 
> 标签：ruby-on-rails, ruby, ternary-operator

嗨，我有一个关于 ruby​​ on rails 的问题

显然我有这样的声明：

```
def sort_column
    Product.column_names.include?(params[:sort]) ? params[:sort] : "name"
end 
```

根据我的阅读，据说此方法基于 params[:sort] 对列进行排序，如果没有参数，则产品将按“名称”排序。但是，我不明白这句话的写法，尤其是第二个“？”。有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T14:31:51.433

这是您的代码，重新排列以便于理解。

```
def sort_column
  cond = Product.column_names.include?(params[:sort]) 
  cond ? params[:sort] : "name"
  #  it's equivalent to this
  # if cond
  #   params[:sort]
  # else
  #   'name'
  # end
end 
```

第一个问号是方法名称的一部分，第二个问号是三元运算符的一部分（您应该阅读它）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T14:34:50.537

[`?:`](http://en.m.wikipedia.org/wiki/%3F%3a)是一个存在于许多语言中[的三元运算符。](http://en.m.wikipedia.org/wiki/%3F%3a)它具有以下语法：

```
expression ? value_if_true : value_if_false 
```

在 Ruby 中，它是一个较短的版本：

```
if expression
  value_if_true
else
  value_if_false
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T14:33:59.347

该行大致翻译为：

```
if Product.column_names.include?(params[:sort])
    params[:sort]
else
    "name"
end 
```

这 ？: 是三元运算符；简短 if-else 的简写。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T14:35:59.993

```
Product.column_names.include?(params[:sort]) ? params[:sort] : "name" 
```

第一个问号是方法名的一部分：`include?`.

第二个问号和冒号是三元操作数的一部分： `(if this is true) ? (do this) : (else, do that).`

这意味着，如果`Product.column_names`contains `params[:sort]`，它将返回`params[:sort]`。否则，它将返回`"name"`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T06:40:41.520

我们必须小心要在三元运算符中计算的表达式部分，例如在使用`and`vs时`&&`，可能会发生这种情况：

```
2.6.2 :014 > a = false
 => false
2.6.2 :015 > b = true
 => true
2.6.2 :016 > a and b ? 'first' : 'second'
 => false
2.6.2 :017 > a && b ? 'first' : 'second'
 => "second"
2.6.2 :018 > (a and b) ? 'first' : 'second'
 => "second" 
```

# google-maps - Google Maps API v3：marker - setImage 在地图上设置多个标记

> ID：11191249
> 
> 赞同：1
> 
> 时间：2012-06-25T14:28:13.380
> 
> 标签：google-maps, google-api, google-maps-markers

我有一张带有一组标记的地图。每个标记都分配了一个侦听器（单击）。单击事件触发`setImage`self 的方法，还应检查地图上是否存在相同的图像（分配给另一个标记） - 如果是，则应将另一个标记图像替换为另一张图片。

问题：`setImage`执行方法后，它将当前单击的图像填充到已单击的所有标记（标记存储为数组）。侦听器代码中有一个同步调用。该代码包含一些 RoR 包装器。

```
function initialize() {
  var myLatlng = new google.maps.LatLng(15.000, 0);
  var myOptions = {
    scrollwheel: false,
    center: myLatlng,
    zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);

  var locations = <%= array_or_string_for_javascript(@locations) %>;

  var art_img = new google.maps.MarkerImage('<%= image_path(@artist.img_name + "_small.png") %>',
      new google.maps.Size(70, 61),
      new google.maps.Point(0,0),
      new google.maps.Point(0, 61));

  var shadow = new google.maps.MarkerImage('<%= image_path("flag_shadow.png") %>',
      new google.maps.Size(75, 75),
      new google.maps.Point(0,0),
      new google.maps.Point(-7, 72));
  var markers = [];
  var markers_tmp = [];
  <% @locations.each do |location| %>
    var location = <%= location %>;
    var image_url = location['result'];
    if (image_url == "") {
      image_url = '<%= image_path("flag_unselect.png") %>';
    }
    var image = new google.maps.MarkerImage(image_url,
        new google.maps.Size(70, 61),
        new google.maps.Point(0,0),
        new google.maps.Point(0, 61));

    var unsel_image = new google.maps.MarkerImage('<%= image_path("flag_unselect.png") %>',
        new google.maps.Size(70, 61),
        new google.maps.Point(0,0),
        new google.maps.Point(0, 61));

    var art_img = new google.maps.MarkerImage('<%= image_path(@artist.img_name + "_small.png") %>',
        new google.maps.Size(70, 61),
        new google.maps.Point(0,0),
        new google.maps.Point(0, 61));

    var myLatLng = new google.maps.LatLng(location['posx'], location['posy']);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        shadow: shadow,
        icon: image,
        zIndex: location['loc_id']
    });

    markers.push(marker);

    google.maps.event.addListener(marker, 'click', function() {

      $.__customStorage = {};
      $.ajax({
        url: "/main/get_current_artist",
        dataType: 'json',
        async: false,
        success: function(data) {
          $.__customStorage.ajaxResponse = data;
        }
      })
      var current_artist = '/assets/' + $.__customStorage.ajaxResponse + '_small.png';
      art_img.url = '/assets/' + $.__customStorage.ajaxResponse + '_small.png';

      for (var i = 0; i < markers.length; i++) {
        if (markers[i] == this) {
          markers[i].setIcon(art_img);
        }
      }

  });

  <% end %>
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:11:16.820

我发现 MarkerImage 对象必须在调用 SetIcon 之前的任何时间进行初始化。所以我替换了 addListener 函数体：

```
google.maps.event.addListener(marker, 'click', function() {

  $.__customStorage = {};
  $.ajax({
    url: "/main/get_current_artist",
    dataType: 'json',
    async: false,
    success: function(data) {
      $.__customStorage.ajaxResponse = data;
    }
  })
  var current_artist = '/assets/' + $.__customStorage.ajaxResponse + '_small.png';
  art_img.url = '/assets/' + $.__customStorage.ajaxResponse + '_small.png';

  for (var i = 0; i < markers.length; i++) {
    if (markers[i] == this) {
      markers[i].setIcon(art_img);
    }
  }

}); 
```

使用代码：

```
 google.maps.event.addListener(marker, 'click', function() {

      $.__customStorage = {};
      $.ajax({
        url: "/main/get_current_artist",
        dataType: 'json',
        async: false,
        success: function(data) {
          $.__customStorage.ajaxResponse = data;
        }
      })
      var art_img = new google.maps.MarkerImage('/assets/' + $.__customStorage.ajaxResponse + "_small.png",
        new google.maps.Size(70, 61),
        new google.maps.Point(0,0),
        new google.maps.Point(0, 61));
      this.setIcon(art_img);              
      $.ajax({
        url: "/main/set_markers" + '?image=' + art_img.url + '&locid=' + this.zIndex,
        dataType: 'json'
      }).done(function() {
      });

      for (var i = 0; i < markers.length; i++) {
        if ((markers[i].zIndex != this.zIndex) &&
            (markers[i].icon.url == this.icon.url)) {
          var unsel_image = new google.maps.MarkerImage('<%= image_path("flag_unselect.png") %>',
              new google.maps.Size(70, 61),
              new google.maps.Point(0,0),
              new google.maps.Point(0, 61));
          markers[i].setIcon(unsel_image);
          $.ajax({
            url: "/main/set_markers_unsel" + "?markers_unsel=" + markers[i].zIndex,
            dataType: 'json'
          }).done(function() {
          });
        }
      }
  }); 
```

# stored-procedures - 添加函数导入不适用于函数

> ID：11191254
> 
> 赞同：5
> 
> 时间：2012-06-25T14:28:24.050
> 
> 标签：stored-procedures, entity-framework-4, user-defined-functions, database-first

我在我的数据库中添加了一个函数，我希望它可以在我的代码中调用。对于存储过程，我右键单击 SP 并在模型浏览器中选择添加函数导入来实现这一点，但此选项不适用于我的函数。我该怎么做才能导入该功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:32:43.160

数据库函数不可用于函数导入。函数导入仅适用于存储过程。您必须手动[创建存根函数](http://blogs.msdn.com/b/efdesign/archive/2008/10/08/edm-and-store-functions-exposed-in-linq.aspx)`EdmFunction`并使用模型中可用的数据库函数的属性对其进行标记。

# c# - 您应该捕获所有异常吗？

> ID：11191260
> 
> 赞同：14
> 
> 时间：2012-06-25T14:28:43.593
> 
> 标签：c#

这不是“如何捕获所有异常”，而是“您应该捕获所有异常”吗？在 C# .NET 中，我注意到大量异常。是否建议计划捕获每个异常？

例如`DirectoryInfo()`构造函数抛出 4 个异常。我应该计划捕捉这些还是只捕捉我可以处理的那些？也许让其他人冒泡到`Main()`我有一个包罗万象的地方，然后告诉用户有一个未捕获的异常。似乎在所有这些可能的异常情况下，您的代码可能比实际代码更具异常处理能力。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-25T14:31:09.057

只捕获那些对于您编写代码的抽象级别有意义的处理。大多数异常只会在比它们被抛出的地方更高的级别被捕获。

所以是的，你是对的。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:34:45.433

您应该捕获您期望的异常 - 并在您不期望的异常上优雅地失败（通过在通用异常处理程序中捕获它们）。

在您的示例中-创建 DirectoryInfo() 可以引发多个异常-但是没有理由您不能只是

```
try 
{ 
   var di = new DirectoryInfo(somePath);
}
catch(Exception ex)  
{
   // Messagebox/alert the user etc, gracefully exit/cancel/throw if needed
} 
```

可能是您想捕获安全异常并提供一些其他代码，做得很好，但保留您的“一般情况”处理程序

```
try 
{ 
   var di = new DirectoryInfo(somePath);
}
catch(SecurityException ex) 
{
   // Carry on but use a default path or something etc
}
catch(Exception ex)  
{
   // Messagebox/alert the user etc, gracefully exit/cancel
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:34:02.050

通常，您应该只捕获您知道如何处理的异常。异常冒泡的目的是让代码的其他部分在可以处理它们的情况下捕获它们，因此在一个级别捕获所有异常可能不会让您获得想要的结果。

在顶层，您可能希望有一个包罗万象的功能，以便给用户一个友好的错误消息，这表明您的程序正在错误处理某些东西，您可能需要弄清楚如何正确处理它。

在某些情况下（例如`OutOfMemoryException`），确实没有办法优雅地处理（除了退出），您绝对应该让它们冒泡至少直到 UI 才能优雅地退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:40:53.333

只要抓住那些你能和想要处理的。
逻辑很简单，你将如何处理其余的“投掷”？
除非你想做一些事情（逻辑\日志\错误消息）并且你只是要重新抛出然后你没有理由抓住。

# vb6 - VB6 应用程序在通过重启管理器关闭时锁定

> ID：11191262
> 
> 赞同：3
> 
> 时间：2012-06-25T14:28:44.780
> 
> 标签：vb6, installation

我在通过 Windows [Restart Manager](http://msdn.microsoft.com/en-us/library/windows/desktop/cc948910%28v=vs.85%29.aspx)关闭 VB6 应用程序时遇到问题。这在 Inno 设置中使用新的重新启动管理器支持时非常明显，甚至在编译空的 VB6 项目时也会发生。

当我将日志记录添加到`QueryUnload`and`Unload`事件时，我看到以下序列：

```
QueryUnload(vbAppWindows)
Unload()
QueryUnload(vbAppTaskManager) 
```

此后，VB6 进程似乎锁定在 VB6 运行时内部，调用 Restart Manager 的进程最终超时并放弃。

[之前](https://groups.google.com/d/topic/microsoft.public.vb.general.discussion/MCyT4bVyuvc/discussion)已经报告了类似的问题，但没有合理的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:28:45.263

[2007 年在Windows 应用程序兼容性](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/affa5776-4c0d-4d71-b7f1-4141458c3589)论坛上对此进行了讨论。

`QueryUnload`建议的解决方案是将其添加到主窗体的事件处理程序的末尾：

```
'For Vista Certification requirement.
'Handles TEST CASE 30\. Verify the application is Restart Manager Aware.
If UnloadMode = vbAppWindows Then Unload Me 
```

似乎 VB6 运行时没有正确处理关闭消息之一，因此重新启动管理器随后发送更强制关闭消息，导致运行时锁定。

我已经用一个相当复杂的多进程 VB6 应用程序确认了此修复程序，并且它全部正确关闭，没有明显的不良影响。

# python-3.x - python如何检查列表不包含任何值

> ID：11191264
> 
> 赞同：6
> 
> 时间：2012-06-25T14:28:46.233
> 
> 标签：python-3.x, python-2.7, python

考虑这个简单的功能

```
def foo(l=[]):
    if not l:  print "List is empty"
    else : print "List is not empty" 
```

现在让我们调用 foo

```
x=[]
foo(x)
#List is empty

foo('')
#List is empty 
```

但是如果 x=[''] 列表不被认为是空的！！！

```
x=['']
foo(x)
#List is not empty 
```

问题 -

1.  为什么空值列表不被视为空？（在变量的情况下，它被认为是空的，例如）

    ```
    x=''
    if x:print 'not empty!!'
    else: print 'empty' 
    ```

2.  如何修改函数 foo() 以便在所有这些情况下将列表视为空：`x=[]`, `x=['']`,`x=['', '']`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T14:31:22.383

使用内置`any()`

```
def foo(l=[]):
    if any(l):
        print 'List is not empty'
    else:
        print 'List is empty'

foo([''])
# List is empty 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:31:45.443

在您的示例中，列表真正为空的唯一情况是方括号中没有任何内容。在其他示例中，您有包含各种数量的空字符串的列表。这些只是不同的（在我能想到的所有语言中，都是如此）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:10:53.970

要回答关于为什么空值列表不被视为空的第一个问题，这是因为它确实包含某些内容，即使这些内容本身是空的。把它想象成一盒空盒子。

下面的代码显示了一种修改函数`foo()`以执行您想要的操作（并对其进行测试）的方法。您关于什么是空列表的概念设计起来非常棘手，部分原因是它与语言本身认为空的内容背道而驰。正如您所看到的，根据您的定义确定列表是否为“空”的所有逻辑都已移至一个名为的单独函数`empty_list()`中，因为这可能与`foo()`必须完成的其余部分几乎没有关系。它并不过分复杂，如果没有其他东西应该为您提供一个良好的起点。

此外，如果它传递的参数不是任何类型的列表或者是一个列表但不包含其他列表或字符串，你没有说它应该做什么，所以写它会引发`TypeError`异常 - 某事这类似于大多数内置 Python 函数在发生这种情况时的响应方式。以下是示例代码及其测试输出：

```
try:
    string_type = basestring
except NameError: # probably Python 3.x
    string_type = str

class _NULL(object):  # unique marker object
    def __repr__(self): return '<nothing>'
_NULL = _NULL()

def empty_list(arg=_NULL):
    arg = arg if arg is not _NULL else []
    if not isinstance(arg, (list, string_type)):
        raise TypeError
    elif isinstance(arg, string_type):
        return not len(arg)
    else:
        return len(arg) == 0 or all(empty_list(e) for e in arg)

def foo(list_=None):
    if list_ is None or empty_list(list_):
        print 'list is empty'
    else:
        print 'list is not empty'

testcases = [
    _NULL,
    [],
    [''],
    ['', ''],
    ['', ['']],
    ['abc'],
    ['', 'abc'],
    [False],
    [None],
    [0],
    [0.0],
    [0L],
    [0j],
    [42],
    [{}],
    [{'':0}],
    [{'a':1}],
    False,
    None,
    0,
    0.0,
    0L,
    0j,
    42,
    {},
    {'':0},
    {'a':1},
]

for arg in testcases:
    call = 'foo( {!r:s} ) ->'.format(arg)
    print '{!s:>20s}'.format(call),
    try:
        foo() if arg is _NULL else foo(arg)
    except TypeError:
        print 'illegal argument exception' 
```

这是它使用 Python 2.7 生成的输出：

```
 foo( <nothing> ) -> list is empty
        foo( [] ) -> list is empty
      foo( [''] ) -> list is empty
  foo( ['', ''] ) -> list is empty
foo( ['', ['']] ) -> list is empty
   foo( ['abc'] ) -> list is not empty
foo( ['', 'abc'] ) -> list is not empty
   foo( [False] ) -> illegal argument exception
    foo( [None] ) -> illegal argument exception
       foo( [0] ) -> illegal argument exception
     foo( [0.0] ) -> illegal argument exception
      foo( [0L] ) -> illegal argument exception
      foo( [0j] ) -> illegal argument exception
      foo( [42] ) -> illegal argument exception
      foo( [{}] ) -> illegal argument exception
 foo( [{'': 0}] ) -> illegal argument exception
foo( [{'a': 1}] ) -> illegal argument exception
     foo( False ) -> illegal argument exception
      foo( None ) -> list is empty
         foo( 0 ) -> illegal argument exception
       foo( 0.0 ) -> illegal argument exception
        foo( 0L ) -> illegal argument exception
        foo( 0j ) -> illegal argument exception
        foo( 42 ) -> illegal argument exception
        foo( {} ) -> illegal argument exception
   foo( {'': 0} ) -> illegal argument exception
  foo( {'a': 1} ) -> illegal argument exception 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:35:09.183

首先：即使是空字符串也是字符串。包含空字符串的列表仍然包含一个元素。

虽然`a=''`len = 0 为空，但无论列表如何，它仍然包含一个元素，例如，`mylist = [a]`与 相同，`mylist = ['']`但对您来说可能更清楚。以`a`元素为元素，忽略内容。

要检查列表的元素是否为空，请遍历它们。

```
def isEmpty(li=[]):
  for elem in li:
    if len(elem) > 0: return false
  return true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T14:58:30.137

您可以使用对函数 foo 的递归调用来处理嵌套列表。

```
def foo(l=[]):
    if type(l)==list:
        return any([foo(x) for x in l])
    else:
        return bool(l) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T14:31:56.670

列表 [''] 确实不是空的。它包含一个空字符串。字符串为空，列表*不是*。如果要查找这些列表，请检查列表是否为空，如果不是，请检查每个条目是否为 ''。

# ruby-on-rails - 如何从 ruby on rails 应用程序接收电子邮件

> ID：11191270
> 
> 赞同：0
> 
> 时间：2012-06-25T14:29:01.683
> 
> 标签：ruby-on-rails

我在死胡同！我正在尝试制作一个应用程序来接收 hotmail 上的电子邮件！我创建了一个方法，但我收到一个错误并且没有收到电子邮件..

在我的方法中：

```
class Recivemail < ActiveRecord::Base
  attr_accessible :content, :from, :subject

 def sendmail(content,from,subject)
    subject = 'subject'
    recipients = "linkinpark_8884@hotmail.com"
    from = 'from'
    sent_on = Time.now
  end 
end 
```

在配置>环境>development.rb

```
 config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings ={
    :enable_starttls_auto => true,
    :address => 'smtp.hotmail.com',
    :port => 587,
    :authentication => :plain,
    :domain => 'localhost:3000',
    :user_name => 'linkinpark_8884@hotmail.com',
    :password => 'mypass'

  } 
```

在视图>接收邮件>显示

`<%=@recivemail.sendmail(@recivemail.from,@recivemail.subject,@recivemail.content)%>`

一切似乎都正常，除了我没有收到任何电子邮件任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:41:52.640

> `@recivemail.send(@recivemail.from,@recivemail.subject,@recivemail.content)`

Ruby 中的`send`方法意味着“向该对象发送消息”（就像调用由第一个参数命名的方法一样`send`）。您在这里所做的是尝试调用一个由`@recivemail.from`object的值命名的方法`@recivemail`。

[http://ruby-doc.org/core-1.9.3/Object.html#method-i-send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

在您的代码中，无论如何都`sendmail`没有命名该方法。`send`

（我也不会把它放在一个视图中，但这似乎是你现在最不麻烦的事情。）

至于您最初关于一般接收电子邮件的问题，请从[本文](http://railspikes.com/2007/6/1/rails-email-processing)开始。它是几年前写的，但应该能给你一些想法。

# c# - 在 LINQ 查询中将 KeyValuePair 转换为匿名类型

> ID：11191280
> 
> 赞同：7
> 
> 时间：2012-06-25T14:29:50.370
> 
> 标签：c#, .net, json, linq

我有一个`IEnumerable<KeyValuePair<string,string>>`，理想情况下，我希望有一个匿名对象，它具有作为属性名称的键和作为属性值的值。

我尝试了各种选择表达式（甚至都没有编译...）和一种使用方法`ExpandoObject`（见下文），但没有成功。有没有好的方法来做到这一点？如果可能的话，我想避免对集合进行额外的显式迭代（即使用某种 LINQ 语句完成所有操作）。

这是我到目前为止所尝试的。我希望它也能澄清我正在尝试做的事情：

```
var kvps = getProps(); // returns IEnumerable<KeyValuePair<string,string>>

dynamic o = new ExpandoObject();
foreach (var kvp in kvps)
{
    o.Add(kvp);
} 
```

这在编译时没问题，但在运行时我得到一个[YSOD](http://en.wikipedia.org/wiki/YSOD#Yellow)说明*“System.Dynamic.ExpandoObject”不包含“Add”的定义*- 我猜它在编译时有效，因为`o`它是动态的，所以编译器不知道如果`.Add()`自实例化以来已将方法添加到其中。奇怪的是，在[MSDN 文档页面上 ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx) `.Add()`被列为几个“显式实现的接口方法”之一。

我没有必要把它变成一个动态对象——我只需要根据键值对的键和值来获取具有属性名称和值的东西。

**更新：**嗯，这很尴尬。原来这也是一个 XY 问题。

我正在尝试使用 ASP.NET MVC 的内置功能将其呈现为 JSON，只需`Json(data)`在我的控制器中返回即可。答案都很好地完成了我第一次问的事情，但是当我传递这个对象时，`data`我仍然没有得到我想要的：

```
// What I get:
[
   { Key: 'firstkey', Value: 'FirstValue' }, 
   { Key: 'secondKey', Value: 'secondValue' } 
]

// What I want:
{ firstKey: 'FirstValue', secondKey: 'secondValue' } 
```

显然，`ExpandoObject`添加了相关属性的 an 并没有削减它 - 它在渲染之前被强制转换为字典......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:36:18.903

您需要在填充它时使用它`ExpandoObject`：`IDictionary<string, object>`

```
var kvps = getProps(); // returns IEnumerable<KeyValuePair<string,string>>

IDictionary<string, object> o = new ExpandoObject();
foreach (var kvp in kvps)
{
    // Or use Add(kvp.Key, kvp.Value), if you want
    o[kvp.Key] = kvp.Value;
}

dynamic d = o;
// Now you can use the properties 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T14:38:00.570

`ExpandoObject`显式实现`IDictionary<string, object>`-因此您需要先将其转换为一个：

```
var kvps = getProps();
dynamic o = new ExpandoObject();
var dict = o as IDictionary<string, object>;
foreach (var kvp in kvps)
{
    dict.Add(kvp.Key, kvp.Value);
} 
```

现在您可以`o`按预期使用：

```
var example = o.YourKey; 
```

> 我正在尝试使用 ASP.NET MVC 的内置功能将其呈现为 JSON，只需在我的控制器中返回 Json(data)。

有趣的。

为此，您序列化一个字典，而不是一个 ExpandoObject。MVC 3 的 JSON 序列化器已经用字典做到了。您所要做的就是将您的转换`IEnumerable<KeyValuePair<string, object>>`为字典：

```
var kvps = getProps();
var dictionary = kvps.ToDictionary(k => k.Key, v => v.Value);
return Json(dictionary, JsonRequestBehavior.AllowGet); //take out allow get if you don't need it. 
```

不需要动态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:37:54.203

我认为您必须将 expando 对象转换为 IDictionary 并调用 Add(string, object)

# mfc - CDHTMLDialog : 通过 Frameset 标签加载 HTML 时未收到通知

> ID：11191281
> 
> 赞同：1
> 
> 时间：2012-06-25T14:29:52.743
> 
> 标签：mfc

我正在使用 MFC 中的 CDHTMLDialog 从网页中的 HTML 元素获取点击通知。但是，如果网页有框架集标签，我没有收到任何通知。请让我知道如何获取通知的步骤。

谢谢，埃德温。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:39:10.040

MFC DHTML 事件宏不是为框架内​​的元素设计的。MFC 实现仅在顶级文档中查找元素。

以 MFC 源作为参考手动连接事件接收器。请参阅[处理 HTML 元素事件](http://msdn.microsoft.com/en-us/library/bb508508%28v=VS.85%29.aspx)和[如何获取 HTML 框架的 WebBrowser 对象模型](http://support.microsoft.com/kb/196340)

# c - Linux字符设备驱动程序如何检测使用它的程序何时异常退出？

> ID：11191284
> 
> 赞同：6
> 
> 时间：2012-06-25T14:30:00.540
> 
> 标签：c, linux, file-io, driver

我有一个创建`/dev/mything`条目的 Linux 字符设备驱动程序，然后是一个打开设备并使用它的 C++/Qt 程序。如果该程序正确退出`exit()`，则设备将关闭并且驱动程序会自行正确重置。但是如果程序异常退出，通过segfault之类`SIGINT`的，设备没有正确关闭。

我目前的解决方法是在驱动程序卡在“打开”状态时重新加载驱动程序。

驱动程序中的这一行试图防止多个程序同时使用该设备：

```
int mything_open( struct inode* inode, struct file* filp ) {
    ...
    if ( port->rings[bufcount].virt_addr ) return -EBUSY;
    ...
} 
```

然后清理它：

```
int mything_release( struct inode* inode, struct file* filp ) {
    ...
    port->rings[bufcount].virt_addr = NULL;
    ...
} 
```

我认为`exit()`是导致`mything_release`被调用，但`SIGINT`不是。如何使驱动程序对这种情况更加稳健？

编辑：

以下是我实施的操作。也许我错过了什么？

```
static struct file_operations fatpipe_fops = {
    .owner =    THIS_MODULE,
    .open =     mything_open,
    .release =  mything_release,
    .read =     mything_read,
    .write =    mything_write,
    .ioctl =    mything_ioctl
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:55:12.293

不需要这个测试；问题不是程序异常终止（从您的驱动程序的角度来看，这`close`与设备上的正常情况完全一样），而是您设备的状态保持问题。换句话说，如果您插入`close(dev_fd)`甚至是`exit(0)`在程序崩溃的确切位置，您也会遇到同样的问题。

您应该找出驱动程序行为的哪一部分导致它保持忙碌状态并修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T18:01:25.930

问题归结为这一行`mything_release`，放入等待一些内存写入完成：

```
if (wait_event_interruptible_timeout(port->inq, false, 10)) return -ERESTARTSYS; 
```

在正常程序退出的情况下，这将旋转 10 个 jiffies 并继续。但是由于 SIGINT 异常退出或其他原因，我认为可中断超时被中断并返回`-ERESTARTSYS`，导致我的 if 返回相同。

对我有用的是摆脱`if`并等待：

```
wait_event_interruptible_timeout(port->inq, false, 10); 
```

多年前的这个补丁让我相信`ERESTARTSYS`从 close/_release 函数返回不是一个好主意：[http ://us.generation-nt.com/answer/patch-fix-wrong-error-code-interrupted-close-系统调用-帮助-181191441.html](http://us.generation-nt.com/answer/patch-fix-wrong-error-code-interrupted-close-syscalls-help-181191441.html)

# cocoa - 将麦克风输入重定向到耳机输出（软播放）

> ID：11191285
> 
> 赞同：2
> 
> 时间：2012-06-25T14:30:02.007
> 
> 标签：cocoa, applescript, microphone, headphones

如果我将入耳式耳机与我的 macbook pro 一起使用，我需要几分钟才能完全贴合（由于耳机上的泡沫碎片）:)

我的想法是使用内置的 macbook pro 麦克风来与来到我办公桌前的人交谈，而无需每次都摘下耳机。这样一种“对讲”的东西，可以通过点击热键来启用。

首先想到的是使用可以轻松用于暂停 iTunes 的 applescript，但我找不到有关如何将麦克风输出转发到耳机的信息。

接下来的尝试是检查 Xcode 是否编写了一个 Cocoa 应用程序。从 Apple 提供的示例开始，我认为可以扩展它以满足我的需求。

所以我的问题是：你有更好的想法/方法来解决我的问题吗？

# javascript - 使用 JavaScript 将属性添加到一组链接中的第一个链接

> ID：11191287
> 
> 赞同：0
> 
> 时间：2012-06-25T14:30:11.913
> 
> 标签：javascript, jquery, ajax, gallery

我需要在我正在处理的项目中的链接列表的第一个链接中添加一个属性，并考虑使用 JavaScript 执行此操作的方法。这是下面的代码，它们是动态生成的，但我想要找出一种方法，在每个列表的第一个标签中插入 id="cover_title" 序列，这样代码看起来就像下面一样。有任何想法吗？

```
<ul id="gallery">

<li id="album">
<div id="album_title">Summer 2012</div>
        <div id="photo"><a id="cover_title" href="#"><img src="images/photo1.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo2.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo3.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo4.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo5.png"/></a></div>

</li>

<li id="album">
<div id="album_title">Spring 2012</div>
        <div id="photo"><a id="cover_title" href="#"><img src="images/photo1.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo2.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo3.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo4.png"/></a></div>
        <div id="photo"><a href="#"><img src="images/photo5.png"/></a></div>

</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:35:13.973

首先，注释：`id`来自标识符，并且在整个文档中必须是*唯一的。*您的代码应`class=""`改为使用该属性。参见，例如，[MDN](https://developer.mozilla.org/en/DOM/element.id)：

> ID 在文档中必须是唯一的，......

话虽如此，下面的代码`class`在 th元素上设置了适当的`<a>`值，假设您将`id`上面的所有属性都转换为`class`.

```
var links = document.querySelectorAll( 'div.photo:nth-child(2) a' );
for( var i=0; i<links.length; ++i ) {
  links[i].classList.add( 'cover_title' );
} 
```

**编辑**

这是一个示例小提琴：[link](http://jsfiddle.net/GFm8S/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:36:39.027

Vega 说的对：不要重复 ID，使用类。简单的 jQuery

```
$('.album_title').each(function(){
  $(this).find('a:first').addClass('cover_title');
}); 
```

# android - Android 4.0 上的设计（选项卡布局）

> ID：11191288
> 
> 赞同：3
> 
> 时间：2012-06-25T14:30:19.360
> 
> 标签：android, layout, tabs

我不确定选项卡式布局的方向。

我的目标是 sdk 15，最小 sdk 11。选项卡最好留在操作栏或“正文”中。我还没有为带有这个应用程序的平板电脑设计（还），但似乎平板电脑在操作栏中有标签，而较小的屏幕则没有。

我问的主要原因之一是因为谷歌确实有一些关于标签的信息：http: [//developer.android.com/design/building-blocks/tabs.html](http://developer.android.com/design/building-blocks/tabs.html)

但我似乎无法在他们的新“开发”部分找到它。所以我不知道这是否已被弃用？Tab 布局曾经有一个很好的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:47:26.613

你仍然可以使用它们。它们没有被弃用。在 post android 3.0 版本中，选项卡已放置在平板电脑的操作栏中。在手机上，它们纵向位于操作栏下方，横向位于操作栏。正如android开发人员建议的那样，遵循这些标准被认为是一种好习惯。现在我没有使用新的实现，而是使用了一个名为 ActionBarSherlock 的兼容性库。它实际上非常好，并且在使用方面与常规标签几乎完全相同。您可以在其中找到一些关于如何实现所需内容的好示例。

此外，我很确定您可以在示例/android-14 下的 android sdk 文件夹中找到所有示例。

我一直觉得从那里浏览它们比 developer.android 更容易。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:47:50.120

“如果您在操作栏中使用导航选项卡，一旦操作项在窄屏幕上分开，导航选项卡可能会适合主操作栏，而不是分隔到“堆叠操作栏”中。具体来说，如果您已禁用操作栏图标和标题（使用 setDisplayShowHomeEnabled(false) 和 setDisplayShowTitleEnabled(false)），然后导航选项卡会折叠到主操作栏中。”

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

这实际上是新设计模式的一部分。如果选项卡可以放入主操作栏，让它们。通常，如果您处于纵向模式，它们不会（上述引用中所述的情况除外），但是当您切换到横向模式（或者如果您在平板电脑上）时，它们会很容易适应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:59:19.017

推荐您在开发者网站上找到的所有内容，并被视为良好做法。此外，“设计”和“开发”部分齐头并进……这种分离并不意味着“只有开发人员应该看‘开发’”，反之亦然。在编写应用程序时，您应该将每一个视为同等重要。

所以是的，建议使用操作栏来实现您的选项卡（如`FragmentTabs.java`API 演示中所见），它肯定不会被弃用。

# ruby - RSpec Autotest 循环失败，添加异常时不起作用

> ID：11191289
> 
> 赞同：0
> 
> 时间：2012-06-25T14:30:20.383
> 
> 标签：ruby, rspec, autotest

我一直在玩自动测试，试图让它整天工作..但我遇到了一些问题......

我一直在关注[https://github.com/rspec/rspec/wiki/autotest](https://github.com/rspec/rspec/wiki/autotest)，我正在运行：

*   红宝石 1.9.3-p194
*   rspec 2.10.0
*   禅测 4.8.1

我还创建了一个 .rspec 文件。

因此，使用此设置，我运行自动测试，它可以工作 - 我的测试运行，它通过了，万岁！当我在测试中遇到失败时，例如 false.should == true，然后测试开始循环，一遍又一遍。

发生的事情是它是一个集成测试，我正在写一个 sqlite 数据库。如果我运行，`find . -mmin -1`那么我可以看到我的 db 文件夹已更改 - 所以我认为这就是问题所在。

所以我编辑 .autotest 并添加以下内容：

```
Autotest.add_hook :initialize do |autotest|
  %w{db}.each { |exception| autotest.add_exception(exception) }
  false
end 
```

但是现在当我运行自动测试时，它只显示以下内容：

```
loading autotest/rspec2 
```

就是这样，它不会再做任何事情了。以前的输出是：

`loading autotest/rspec2`

`/home/me/.rbenv/versions/1.9.3-p194/bin/ruby -rrubygems -S` `'/home/me/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/exe/rspec' ``--tty '/home/me/Workspace/myproject/spec/integration/db/lead_spec.rb'`

然后它会运行我的测试并显示结果......

有人知道会发生什么吗？很郁闷，感觉自己遇到了路障......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:06:51.770

自动测试检查定义的异常是否匹配文件名的任何部分。您的规范`db`在其路径中，因此自动测试会忽略它。

如果要忽略`db`文件夹，请执行以下操作：

```
Autotest.add_hook :initialize do |a|
  a.add_exception %r{^\./db}
end 
```

# php - 使用 jquery、ajax 和 php 在您的网站上加载内容而无需重新加载整个页面

> ID：11191297
> 
> 赞同：1
> 
> 时间：2012-06-25T14:30:36.780
> 
> 标签：php, jquery, ajax

我是 ajax 和 php 的新手，如果您能帮助我，我将不胜感激。看到我只知道一点javascript和php，我真的不知道如何解决这个问题，请你帮帮我！我一直在寻找解决方案，但找不到任何解决方案，希望我的搜索将在这里停止。我会尽力解释清楚。

我想要这个：

```
<a href="#" onClick="return false" onmousedown="javascript:swapContent('con1');">load html page called ducks</a> 
```

将一个名为ducks.html 的html 页面加载到myDiv 区域中。

当我点击这个时，我也想这样：

```
<a href="#" onClick="return false" onmousedown="javascript:swapContent('con2');">load a list of html links</a> 
```

我希望它加载一个带有链接列表的 html 页面，单击该链接列表时将加载到 myDiv 区域而不重新加载整个页面。

最后我想设置 myphpscript php 文件。加载一个包含将出现在 myDiv 区域中的链接列表的页面，当我单击其中一个链接时，它同样会加载到 myDiv 区域中。

这是我的代码

```
<!-- This is your PHP script... myphpscript.php --> 

<?php 
    $contentVar = $_POST['contentVar'];
    if ($contentVar == "con1") {
        include 'con2.html'; 
    } else if ($contentVar == "con2") {
        echo "<a href='con2'>View</a>";
    } else if ($contentVar == "con3") {
        echo "Content for third click is now loaded. Any <strong>HTML</strong> or text you  wish.";
    }
?>

<!-- This is the rest of my code -->

<html>
    <head>
        <script type="text/javascript" src="jQuery-1.5.1.js"></script>
        <script language="JavaScript" type="text/javascript">
        <!--
            function swapContent(cv) {
                $("#myDiv").html('<img src="loader.gif"/>').show();
                var url = "myphpscript.php";
                $.post(url, {contentVar: cv} ,function(data) {
                    $("#myDiv").html(data).show();
                });
            }
        //-->
        </script>
        <style type="text/css"> 
            #myDiv {
                width:200px; height:150px; padding:12px; 
                border:#666 1px solid; background-color:#FAEEC5; 
                font-size:18px;
            } 
        </style> 
    </head>
    <body>
        <a href="#" onClick="return false"  
           onmousedown="javascript:swapContent('con1');">Content1</a>
        <a href="#" onClick="return false" 
           onmousedown="javascript:swapContent('con2');">Content2</a>
        <a href="#" onClick="return false" 
           onmousedown="javascript:swapContent('con3');">Content3</a>
        <div id="myDiv">My default content for this page element when the page initially loads</div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:32:33.237

在我看来，如果您希望在单击某些内容时加载外部页面，则需要执行 ajax GET 或 POST 请求，然后将结果打印到 div：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

如果您只想将 div 的内容更改为其他文本，可以使用 jQuery.html 之类的内容：http: [//api.jquery.com/html/](http://api.jquery.com/html/)

```
<script>
$("#idForLink").click(function () {
  var htmlStr = "The new text to show";
  $('#myDiv').text(htmlStr);
});
</script> 
```

在不使用 jQuery 的情况下，您上面的示例将自己的帖子发送到 echo `contentVar`，这将始终刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:42:47.810

如果您只是从另一个文件中获取 HTML，我会使用 load 方法，因为它既快速又简单：

```
$(document).ready(function(){
    $('#myDiv').load("someFile.html");
}); 
```

对于更广泛的请求，您可以使用 Post 和 Get。它们允许您通过 URL 请求传递数据，以影响返回的结果。显然，您请求的 URL 需要是 PHP/ASP 并在这种情况下处理请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:57:10.337

JAVASCRIPT：

```
<script type="text/javascript">
$(document).ready(function(){

   // this is your mouse event (click) listener
   $('.destination_div').on('click','a',function() {
       var url = $(this).attr("href");
       $('.destination_div').load(url);
       return false;
   });

});​
</script> 
```

使您的 HTML 锚点简单，不要包含内联 javascript，因为 on("click") 已经处理了它。

HTML：

```
<a href="http://yourhtml_containing_links.html">Your HTML with links</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:23:12.813

请参阅此小提琴以`jquery+css`解决您的问题 [不需要 PHP]：http: [//jsfiddle.net/bYNeg/](http://jsfiddle.net/bYNeg/)

# sql - 为什么存储过程名称有最大长度？

> ID：11191299
> 
> 赞同：12
> 
> 时间：2012-06-25T14:30:51.197
> 
> 标签：sql, oracle, stored-procedures

> **可能重复：**
> [为什么 Oracle 表/列/索引名称限制为 30 个字符？](https://stackoverflow.com/questions/1378133/why-are-oracle-table-column-index-names-limited-to-30-characters)

在 Oracle 中编写存储过程时，我选择了一个特别具有描述性的名称，当尝试更新脚本时，我被告知该名称太长。

```
37  15  PLS-00114: identifier 'blah_blah_blah_blah_blah_blah' too long 
```

为什么对存储的过程名称有如此严格的限制？这只是特定于 Oracle 还是在其他数据库系统中很常见？

* * *

对不起[重复](https://stackoverflow.com/questions/1378133/why-are-oracle-table-column-index-names-limited-to-30-characters)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:35:15.250

它实际上仅在 Oracle 中只有 30 个字符。

每种语言/数据库在定义名称时都有长度限制，因为在数据库中创建的每个对象的名称都存储在系统表中，并且每列都有一些固定的长度。

为了性能，我们在 DB 的情况下保持名称简短。

# iphone - Salesforce PhoneGap iPhone 应用程序中的 oAuth2 问题（远程访问应用程序授权问题）

> ID：11191311
> 
> 赞同：0
> 
> 时间：2012-06-25T14:31:22.827
> 
> 标签：iphone, cordova, salesforce, oauth-2.0, phonegap-plugins

我已经使用 PhoneGap 创建了一个 iPhone 应用程序。我遵循了本教程中的代码：

[构建由 Database.com 提供支持的 PhoneGap 移动应用程序](http://wiki.developerforce.com/page/Building_PhoneGap_Mobile_Applications_Powered_by_Database.com)

我已成功登录并在此屏幕中被击中： ![在此处输入图像描述](../Images/c2d781d69a7d44b93c488b98b7cdd7a1.png)

我无法移动到其他屏幕来访问数据。这是登录成功后生成的url：

```
https://login.salesforce.com/services/oauth2/success#access_token=0000&refresh_token=0000&instance_url=https%3A%2F%2Fna12.salesforce.com&id=https%3A%2F%2Flogin.salesforce.com%2Fid%000C&issued_at=0000&signature=qqqq&scope=id+api+refresh_token 
```

我需要向这个网址添加 cosumer 密钥吗？这是我的回调网址：

```
https://login.salesforce.com/services/oauth2/success 
```

会有什么问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:10:13.377

所以[https://login.salesforce.com/services/oauth2/success](https://login.salesforce.com/services/oauth2/success)是回调的存根 URL - 这就是您在那里看到的屏幕，而 access_token 变量是您的用户会话 ID。所以 OAuth 流程工作正常。

在代码中，您可能会检查是否：

```
oauthResponse.access_token 
```

设置正确。如果是这样，它看起来像：

```
sfw.login( setupHomeView ); 
```

是什么应该告诉它从该页面移动到下一个 UI 页面。

您还可以查看 Force.com 移动 SDK：http: [//developer.force.com/MobileSDK](http://developer.force.com/MobileSDK)

它还包括 PhoneGap 并内置了一个很棒的 OAuth 包装器。

# javascript - 如何在包含 Unicode 字符 '\u00A0' 的表中换行

> ID：11191322
> 
> 赞同：0
> 
> 时间：2012-06-25T14:31:58.827
> 
> 标签：javascript, html, regex, unicode, whitespace

当我的字符串有空格时，单词会在表中换行。但是因为我想在 innerHTML 中保留空格，所以我将其替换为 '\u00A0' 。

```
var newString = aString.replace(/\s/g,'\u00A0'); 
```

现在，当 newString 在表中呈现时，它并没有结束，因为我已经用相应的 Unicode 字符替换了空格。

```
getTableRow(rowIndex).cells(i).innerHTML = myRow[i]; //Here You can replace myRow[i] with newString 
```

word-wrap CSS 属性对我不起作用。

简而言之，我使用 \u00A0 来防止连续空格折叠为单个空格，但我真的不想防止换行符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:35:03.613

不要用不间断空格 ( `\u00A0`) 替换空格，只需[`white-space`](http://www.w3.org/TR/CSS21/text.html#propdef-white-space)在 CSS 中的元素上设置 : pre-wrap 即可。[浏览器支持](http://www.quirksmode.org/css/whitespace.html)相当不错，包括 IE 8。

但是，如果您还需要覆盖 IE 7 及更早版本，请使用您当前的方法，但是您只需替换任何一对连续空格的第二个空格：

```
aString.replace(/\s\s/g,'\u00A0 ') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:15:31.877

如果我理解正确，您可以插入以下标签来告诉浏览器它可以在某个点换行文本。

```
<wbr> 
```

有关此标签的更多信息，请点击以下链接：[http ://www.w3schools.com/html5/tag_wbr.asp](http://www.w3schools.com/html5/tag_wbr.asp)

据我所知，唯一的障碍是 IE 还不支持这个标签（从 IE9 开始）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T16:24:16.017

我找到了解决方案。

用可识别的可见 Unicode 字符（即“\u2009”）替换空格。它对我来说非常有效。

```
newString = aString.replace(/\s/g,'\u2009');
getTableRow(rowIndex).cells(i).innerHTML = newString; 
```

# ruby-on-rails - 表的未知主键

> ID：11191327
> 
> 赞同：1
> 
> 时间：2012-06-25T14:32:13.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, refinerycms

我正在为rails中的refinerycms进行扩展，这是我遵循的结构：

Project 有很多 project_images Project_images belongs_to Project & Image（炼油厂 Image 类）

现在，当我想在我的 Project 类中创建一个 ProjectImage 的新对象时，我总是会收到此错误：

```
Unknown primary key for table refinery_projects_images in model Refinery::Projects::ProjectImage. 
```

我不需要这个表的主键，因为它是一个连接表。这是我的模型和迁移文件的代码：

迁移.rb

```
class CreateProjectsProjects < ActiveRecord::Migration

  def up
    create_table :refinery_projects do |t|
      t.string :title
      t.text :description
      t.string :investor
      t.string :location
      t.string :area
      t.string :purpose
      t.string :architect
      t.string :users
      t.integer :position
      t.integer :position

      t.timestamps
    end

    add_index :refinery_projects, :id

    create_table :refinery_projects_images, :id => false do |t|
      t.references :image
      t.references :project
      t.integer :position
      t.string :category
      t.string :caption
    end

    add_index :refinery_projects_images, [:image_id, :project_id], :uniq => true

  end

  def down
    if defined?(::Refinery::UserPlugin)
      ::Refinery::UserPlugin.destroy_all({:name => "refinerycms-projects"})
    end

    if defined?(::Refinery::Page)
      ::Refinery::Page.delete_all({:link_url => "/projects/projects"})
    end

    drop_table :refinery_projects
    drop_table :refinery_projects_images

  end

end 
```

项目.rb

```
module Refinery
  module Projects
    class Project < Refinery::Core::BaseModel
      self.table_name = 'refinery_projects'

      attr_accessible :title, :description, :investor, :location, :area, :purpose, :architect, :users, :position, :position, :images_attributes

      acts_as_indexed :fields => [:title, :description, :investor, :location, :area, :purpose, :architect, :users]

      validates :title, :presence => true, :uniqueness => true

      has_many :project_images
      has_many :images, :through => :project_images, :order => 'position ASC'

      accepts_nested_attributes_for :images, :allow_destroy => false

      def images_attributes=(data)
        ProjectImage.delete_all(:project_id => self.id)

        (0..(data.length-1)).each do |i|
          unless (image_data = data[i.to_s]).nil? or image_data['id'].blank?
            project_image = self.project_images.new(:image_id => image_data['id'].to_i, :position => i)
            # Add caption if supported
            if false
              project_image.caption = image_data['caption']
            end
            self.project_images << project_image
          end
        end
      end

    end
  end
end 
```

项目图像.rb

```
module Refinery
  module Projects
    class ProjectImage < Refinery::Core::BaseModel
      self.table_name = 'refinery_projects_images'

      attr_accessible :image_id, :position

      belongs_to :image, :class_name => 'Refinery::Image'
      belongs_to :project, :class_name => 'Refinery::Projects::Project'
    end
  end
end 
```

有人知道他为什么一直在寻找主键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:35:58.903

Refinery::Core::BaseModel 以某种方式从 ActiveRecord::Base 派生而来。当您使用该类时，您的表格布局需要一个 id。如果您不想要 id，请查看`has_and_belongs_to_many`rails 指南： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# cakephp - Cakephp：“领域”中的关联关联

> ID：11191330
> 
> 赞同：0
> 
> 时间：2012-06-25T14:32:30.523
> 
> 标签：cakephp, associations, cakephp-2.0

一个帖子有一个用户（belongsTo），一个用户有一个个人资料（hasOne）。通常一切正常：我可以从 Post 到 User 以及从 User 到 Profile 访问。

从 Post 开始，所有作品都使用通用 Find。结果或多或少是这样的（例如，我删除了一些键）：

```
array(
    'Post' => array(
        'id' => '1',
        'category_id' => '1',
        'user_id' => '1',
        'title' => 'Example',
        'text' => '',
    ),
    'User' => array(
        'password' => '*****',
        'id' => '1',
        'group_id' => '1',
        'username' => 'mirko',
        'status' => 'active',
        'Profile' => array(
            'id' => '1',
            'user_id' => '1',
            'first_name' => 'Mirko',
            'last_name' => 'Pagliai',
        ),
    )
) 
```

当我使用“字段”时，问题就来了，我只想提取几个字段。例如，这有效：

```
'fields'        => array('id', 'title', 'User.id') 
```

结果是：

```
array(
    'Post' => array(
        'id' => '1',
        'title' => 'Articolo di prova :-)'
    ),
    'User' => array(
        'id' => '1'
    )
) 
```

但我不明白，总是使用“字段”，如何访问 Profile。这些不起作用：

```
'fields'        => array('id', 'title', 'User.id', 'Profile.id')

'fields'        => array('id', 'title', 'User.id', 'User.Profile.id') 
```

我总是收到此错误“错误：SQLSTATE [42S22]：找不到列：1054 '字段列表'中的未知列'User.Profile.id'”。

怎么了？谢谢。

编辑：我没有使用 Containable 行为。也许这是问题所在？在这种情况下是否必要？

使用分页的示例：

```
$this->paginate = array(
    'conditions'    => $conditions,
    'fields'        => array('id', 'title', 'User.id', 'Profile.id'),
    'limit'         => 10,
    'recursive'     => 2,
); 
```

EDIT2：感谢@Hoff，我接近解决方案。但是还是有问题（而且 Containable 非常有用！）。在 AppModel.php 我添加：

```
...
class AppModel extends Model {
    public $actsAs = array('Containable');
    public $recursive = -1;
... 
```

但这不起作用：

```
$this->paginate = array(
            'conditions'    => $conditions,
            'contain'       => array(
                'User' => array(
                    'fields' => array('id'),
                    'Profile' => array(
                        'fields' => array('id', 'full_name'),
                    ),
                ),
                'Category' => array(
                    'fields' => 'title',
                ),
            ),
            'fields'        => array('id', 'user_id', 'category_id', 'title', 'created', 'modified', 'published'),
            'limit'         => 10,
        ); 
```

因为我得到：

```
array(
    (int) 0 => array(
        'Post' => array(
            'id' => '1',
            'user_id' => '1',
            'category_id' => '1',
            'title' => 'Articolo di prova :-)',
            'created' => '2012-06-21 18:46:00',
            'modified' => '0000-00-00 00:00:00',
            'published' => true
        ),
        'Category' => array(
            'title' => 'prova',
            'id' => '1'
        ),
        'User' => array(
            'id' => '1'
        )
    )
) 
```

但如果我向用户添加任何字段（电子邮件、用户名、密码等），这将有效：

```
 'User' => array(
                'fields' => array('id', 'username'),
                'Profile' => array(
                    'fields' => array('id', 'full_name'),
                ),
            ), 
```

我得到：

```
array(
    (int) 0 => array(
        'Post' => array(
            'id' => '1',
            'user_id' => '1',
            'category_id' => '1',
            'title' => 'Articolo di prova :-)',
            'created' => '2012-06-21 18:46:00',
            'modified' => '0000-00-00 00:00:00',
            'published' => true
        ),
        'Category' => array(
            'title' => 'prova',
            'id' => '1'
        ),
        'User' => array(
            'id' => '1',
            'username' => 'mirko',
            'Profile' => array(
                'id' => '1',
                'full_name' => 'Mirko Pagliai'
            )
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:15:26.870

我强烈建议不要使用“递归”键，而是使用可包含的行为。可以在[此处](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)找到有关该行为的文档。我建议在您的 AppModel 中应用该行为，这样您就无需将其添加到所有模型中。在模型/AppModel.php 中：

```
App::uses('Model', 'Model');
class AppModel extends Model {
    public $actsAs = array('Containable');
    public $recursive = -1;
} 
```

然后，对于您的分页：

```
$this->paginate = array(
    'conditions'    => $conditions,
    'fields'        => array('id', 'title'),
    'limit'         => 10,
    'contain' => array(
        'User' => array(
            'fields' => array('id'),
            'Profile' => array(
                'fields' => array('id')
            )
        )
    )
); 
```

# windows - 有没有办法以编程方式在 Windows 中配对蓝牙设备

> ID：11191332
> 
> 赞同：3
> 
> 时间：2012-06-25T14:32:37.187
> 
> 标签：windows, bluetooth

有一个问题：有没有办法在 Windows 中以编程方式配对蓝牙设备？(c++, c#)

感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:35:38.763

是[的，参考文档可在 MSDN 上找到](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362927%28v=vs.85%29.aspx)。

32feet.NET 是一个 C# 包装器，[可在此处获得](http://inthehand.co.uk/content/32feet.aspx)。配对信息在[这里](http://32feet.codeplex.com/wikipage?title=Bluetooth%20Security)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-06T16:11:09.450

Python 是一个诱人且整体简单的解决方案，但 PyBlueZ 并未在此处公开 Windows 蓝牙身份验证 API：[https://msdn.microsoft.com/en-us/library/windows/desktop/cc766819(v=vs.85)。 aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/cc766819(v=vs.85).aspx)

解决这个问题的一种方法是创建一个命令行工具并通过 Python 使用它。要为 Windows 创建命令行工具，请使用 Visual Studio 并将必要的库添加到项目链接器属性：Bthprops.lib 和 ws2_32.lib

下面是一个项目的代码，用于制作一个带有 1 个参数的命令行工具，即 MAC 地址，它使用“Just Works”配对来配对指定的设备。请参阅使用密码配对的注释代码。

```
#include "stdafx.h"
#include <initguid.h>
#include <winsock2.h>
#include <BluetoothAPIs.h>
#include <ws2bth.h>

BOOL WINAPI BluetoothAuthCallback(LPVOID pvParam, PBLUETOOTH_AUTHENTICATION_CALLBACK_PARAMS pAuthCallbackParams);

int _tmain(int argc, _TCHAR* argv[])
{
    SOCKADDR_BTH sa = { 0 };
    int sa_len = sizeof(sa);
    DWORD dwRet;
    BLUETOOTH_DEVICE_INFO  btdi = { 0 };
    HBLUETOOTH_AUTHENTICATION_REGISTRATION hRegHandle = 0;

    // initialize windows sockets
    WORD wVersionRequested;
    WSADATA wsaData;
    wVersionRequested = MAKEWORD(2, 0);
    if (WSAStartup(wVersionRequested, &wsaData) != 0) {
        ExitProcess(2);
    }

    // parse the specified Bluetooth address
    if (argc < 2) {
        fprintf(stderr, "usage: csbtpair <addr>\n"
            "\n  addr must be in the form (XX:XX:XX:XX:XX:XX)");
        ExitProcess(2);
    }
    if (SOCKET_ERROR == WSAStringToAddress(argv[1], AF_BTH,
        NULL, (LPSOCKADDR)&sa, &sa_len)) {
        ExitProcess(2);
    }

    // setup device info
    btdi.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);
    btdi.Address.ullLong = sa.btAddr;
    btdi.ulClassofDevice = 0;
    btdi.fConnected = false;
    btdi.fRemembered = false;
    btdi.fAuthenticated = false;

    // register authentication callback. this prevents UI from showing up.
    dwRet = BluetoothRegisterForAuthenticationEx(&btdi, &hRegHandle, &BluetoothAuthCallback, NULL);
    if (dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothRegisterForAuthenticationEx ret %d\n", dwRet);
        ExitProcess(2);
    }

    // authenticate device (will call authentication callback)
    AUTHENTICATION_REQUIREMENTS authreqs = MITMProtectionNotRequired;
    fprintf(stderr, "BluetoothAuthReqs = %d\n", authreqs);
    dwRet = BluetoothAuthenticateDeviceEx(NULL, NULL, &btdi, NULL, authreqs);
    if (dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothAuthenticateDevice ret %d\n", dwRet);
        if (dwRet == ERROR_CANCELLED)
        {
            fprintf(stderr, "Cancelled");
        }
        else if (dwRet == ERROR_INVALID_PARAMETER)
        {
            fprintf(stderr, "Invalid Parameter");
        }
        else if (dwRet == ERROR_NO_MORE_ITEMS)
        {
            fprintf(stderr, "Already paired!");
        }
    }

    fprintf(stderr, "pairing finish\n");
    ExitProcess(0);
    return 0;
}

// Authentication callback
BOOL WINAPI BluetoothAuthCallback(LPVOID pvParam, PBLUETOOTH_AUTHENTICATION_CALLBACK_PARAMS pAuthCallbackParams)
{
    DWORD dwRet;

    fprintf(stderr, "BluetoothAuthCallback 0x%x\n", pAuthCallbackParams->deviceInfo.Address.ullLong);
    BLUETOOTH_AUTHENTICATE_RESPONSE AuthRes;
    AuthRes.authMethod = pAuthCallbackParams->authenticationMethod;
    fprintf(stderr, "Authmethod %d\n", AuthRes.authMethod);
    // Check to make sure we are using numeric comparison (Just Works)
    if (AuthRes.authMethod == BLUETOOTH_AUTHENTICATION_METHOD_NUMERIC_COMPARISON) 
    {
        fprintf(stderr, "Numeric Comparison supported\n");
    }
    AuthRes.bthAddressRemote = pAuthCallbackParams->deviceInfo.Address;
    AuthRes.negativeResponse = FALSE;

    // Commented out code is used for pairing using the BLUETOOTH_AUTHENTICATION_METHOD_PASSKEY method
    //memcpy_s(AuthRes.pinInfo.pin, sizeof(AuthRes.pinInfo.pin), L"1234", 0);
    //AuthRes.pinInfo.pinLength = 0;
    // Respond with numerical value for Just Works pairing
    AuthRes.numericCompInfo.NumericValue = 1;

    // Send authentication response to authenticate device
    dwRet = BluetoothSendAuthenticationResponseEx(NULL, &AuthRes);
    if (dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothSendAuthenticationResponseEx ret %d\n", dwRet);
        if (dwRet == ERROR_CANCELLED)
        {
            fprintf(stderr, "Bluetooth device denied passkey response or communicatino problem.\n");
        }
        else if (dwRet == E_FAIL)
        {
            fprintf(stderr, "Device returned a failure code during authentication.\n");
        }
        else if (dwRet == 1244)
        {
            fprintf(stderr, "Not authenticated\n");
        }
    }
    else
    {
        fprintf(stderr, "BluetoothAuthCallback finish\n");
    }

    return 1; // This value is ignored
} 
```

代替自己创建这个，您可能想尝试这个预制的解决方案： http: [//bluetoothinstaller.com/bluetooth-command-line-tools/](http://bluetoothinstaller.com/bluetooth-command-line-tools/) 它不适用于我的特定解决方案。

然后，您需要以管理员身份从 python 运行下载的或自定义的命令行工具。为了可靠地做到这一点，我推荐stackoverflow问题： [如何在windows上以提升的权限运行python脚本](https://stackoverflow.com/questions/19672352/how-to-run-python-script-with-elevated-privilege-on-windows)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-27T13:09:58.510

我遇到了同样的问题，我已经解决了，也许你可以试试：

1.  制作一个名为pairtool.exe的Windows工具，它可以帮助您与命令行配对。关键api是BluetoothAuthenticateDevice，请参考函数文档

    ```
    dwRet = BluetoothAuthenticateDevice(NULL, NULL, &btdi, L"1234", 4);
    if(dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothAuthenticateDevice ret %d\n", dwRet);
        ExitProcess(2);
    } 
    ```

2.  蟒蛇代码：

    ```
    def connect2Btdev(devName):
    #found the device addr
    addr = inquiry(devName)
    if addr == None:
       return None

    #pairing with pairtool.exe
    cmd=r'%s %s' % ('pairtool.exe',addr)
    ret = os.system(cmd)

    if ret <> 0:
        return None 
    ```

这是pairtool.exe的所有代码：

```
#include "stdafx.h"
#include <initguid.h>
#include <winsock2.h>
#include <BluetoothAPIs.h>
#include <ws2bth.h>

bool BluetoothAuthCallback(LPVOID pvParam, PBLUETOOTH_AUTHENTICATION_CALLBACK_PARAMS pAuthCallbackParams)
{
    DWORD dwRet;

    fprintf(stderr, "BluetoothAuthCallback 0x%x\n", pAuthCallbackParams->deviceInfo.Address.ullLong);

    dwRet = BluetoothSendAuthenticationResponse(NULL, &(pAuthCallbackParams->deviceInfo), L"1234");
    if(dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothSendAuthenticationResponse ret %d\n", dwRet);
        ExitProcess(2);
        return 1;
    }
    fprintf(stderr, "BluetoothAuthCallback finish\n");
    ExitProcess(0);
    return 1;
}

int _tmain(int argc, _TCHAR* argv[])
{
    SOCKADDR_BTH sa = { 0 };
    int sa_len = sizeof(sa);
    DWORD dwRet;
    BLUETOOTH_DEVICE_INFO  btdi = {0};
    HBLUETOOTH_AUTHENTICATION_REGISTRATION hRegHandle = 0;

    // initialize windows sockets
    WORD wVersionRequested;
    WSADATA wsaData;
    wVersionRequested = MAKEWORD( 2, 0 );
    if( WSAStartup( wVersionRequested, &wsaData ) != 0 ) {
        ExitProcess(2);
    }

    // parse the specified Bluetooth address
    if( argc < 2 ) {
        fprintf(stderr, "usage: rfcomm-client <addr>\n"
                "\n  addr must be in the form (XX:XX:XX:XX:XX:XX)");
        ExitProcess(2);
    }
    if( SOCKET_ERROR == WSAStringToAddress( argv[1], AF_BTH,
                NULL, (LPSOCKADDR) &sa, &sa_len ) ) {
        ExitProcess(2);
    }

    //注册回调函数
    btdi.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);
    btdi.Address.ullLong = sa.btAddr;
    btdi.ulClassofDevice = 0;
    btdi.fConnected = false;
    btdi.fRemembered = false;
    btdi.fAuthenticated = false;

    dwRet = BluetoothRegisterForAuthenticationEx(&btdi, &hRegHandle, &BluetoothAuthCallback, NULL);
    if(dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothRegisterForAuthenticationEx ret %d\n", dwRet);
        ExitProcess(2);
    }

    dwRet = BluetoothAuthenticateDevice(NULL, NULL, &btdi, L"1234", 4);
    if(dwRet != ERROR_SUCCESS)
    {
        fprintf(stderr, "BluetoothAuthenticateDevice ret %d\n", dwRet);
        ExitProcess(2);
    }

    Sleep(1000);
      fprintf(stderr, "pairing finish\n");
    ExitProcess(0);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-30T22:17:54.620

微软推出了适用于 UWP 和传统应用程序的[Windows.Devices.Enumeration](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration?redirectedfrom=MSDN&view=winrt-19041) API，这使得蓝牙设备的配对变得非常容易（详细信息请参见[官方 C# 和 C++ 示例](https://github.com/microsoft/Windows-universal-samples/tree/master/Samples/DeviceEnumerationAndPairing)）。据我了解，它是内置“蓝牙和其他设备”UI 对话框使用的 API。作为您可以使用此 API 编写的控制台实用程序的示例，您可以查看我的控制台[BluetoothDevicePairing](https://github.com/PolarGoose/BluetoothDevicePairing)实用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T14:37:46.750

您可以使用[MSDN Bluetooth Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362927%28v=vs.85%29.aspx)中记录的功能来完成此操作。

这些支持以编程方式搜索和配对蓝牙设备。

# sql - SQL - 在表上选择多行结果加倍

> ID：11191340
> 
> 赞同：1
> 
> 时间：2012-06-25T14:33:05.750
> 
> 标签：sql, sql-server, join, left-join

我有一个问题，我从两个表中进行选择，如下所示：

```
select  SUM(tc.WEEKLY_HOURS),
            SUM(pc.var_cash)
from    time_capture tc
LEFT OUTER JOIN PAYMENT_CAPTURE pc on tc.EMP_NO = pc.emp_no
                                                        AND tc.EFFECTIVE_DATE = pc.EFFECTIVE_DATE
where   tc.effective_date = '17 June, 2012'
GROUP BY LEFT(tc.COST_CENTRE, 4) 
```

这两个表包含：

**时间捕获**

```
emp_no     EFFECTIVE_DATE          weekly_hours
---------- ----------------------- ----------------------
1234     2012-06-17              28 
```

**PAYMENT_CAPTURE**

```
emp_no     EFFECTIVE_DATE          INPUT_CODE cost_centre               var_cash
---------- ----------------------- ---------- ------------------------- ----------------------
1234       2012-06-17              KEY        5607.03                   45
1234       2012-06-17              OTHER      5607.03                   19.23 
```

我期待`sum(weekly_hours)`返回 28 但它返回 56（下）由于（我认为）中的两行`payment_capture`。

有人能指出我正确的方向吗？

非常感谢。

```
weekly_hours           var_cash
---------------------- ----------------------
56                     64.23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:05:19.677

您需要使用子查询为此预先汇总您的现金：

```
select  
    SUM(tc.WEEKLY_HOURS) as 'Hrs',
    SUM(pc.var_cash) as 'Cash'
from    
    time_capture tc
LEFT OUTER JOIN 
    (
    SELECT 
        Emp_No, 
        Effective_Date, 
        SUM(var_cash) as 'var_cash'
    FROM
        PAYMENT_CAPTURE)
    pc 
        on tc.EMP_NO = pc.emp_no
        AND tc.EFFECTIVE_DATE = pc.EFFECTIVE_DATE
where   
    tc.effective_date = '17 June, 2012'
GROUP BY L
    EFT(tc.COST_CENTRE, 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:40:01.983

它读对了。由于您正在进行连接，因此它正在返回：

```
 1234 | 2012-06-07 | 28 | 1234 | 2012-06-07 | 5607.03 | 45

 1234 | 2012-06-07 | 28 | 1234 | 2012-06-07 | 5607.03 | 19.23 
```

因此，由于您在求和，因此您得到 28+28 = 56，并且 45+19.23 = 64.23

# ruby-on-rails - 将 premailer gem 与 Rails 2.X 应用程序集成

> ID：11191341
> 
> 赞同：3
> 
> 时间：2012-06-25T14:33:05.923
> 
> 标签：ruby-on-rails, ruby, actionmailer, ruby-on-rails-2, premailer

我有一个 rails 2.3 应用程序，想将[premailer gem](https://github.com/alexdunae/premailer)集成到它。我发现如何为 rails 3.X 应用程序做到这一点： [如何将'premailer'与 Rails 集成](https://stackoverflow.com/questions/6127068/how-to-integrate-premailer-with-rails) 任何人都知道如何为 action mailer 2.3.10 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T12:15:58.567

在过去的几天里，我花了很多时间在这上面，似乎没有很好的解决方案。可以显式呈现消息，然后通过 Premailer 传递结果，但如果与多部分电子邮件和 HTML 布局结合使用，并且模板使用 ASCII-8BIT 以外的其他编码，它就会变得混乱。

在没有多部分并假设为 ASCII-8BIT 编码模板的直接 HTML 电子邮件中，这对我有用：

```
def some_email
    recipients   "Reciever <reciever@example.com>"
    from         "Sender <sender@example.com>"
    subject      "Hello"
    content_type "text/html"

    message = render_message("some_email", { }) # second argument is a hash of locals
    p.body = Premailer.new(message, with_html_string: true).to_inline_css
end 
```

但是，如果模板使用 ASCII-8BIT 以外的其他编码进行编码，Premailer 会销毁所有非 ASCII 字符。Premailer 存储库中合并了一个修复程序，但此后没有发布任何版本。使用最新的版本和调用`Premailer.new(message, with_html_string: true, input_encoding: "UTF-8").to_inline_css`或类似的应该可以工作。合并提交是[https://github.com/alexdunae/premailer/commit/5f5cbb4ac181299a7e73d3eca11f3cf546585364](https://github.com/alexdunae/premailer/commit/5f5cbb4ac181299a7e73d3eca11f3cf546585364)。

对于多部分电子邮件，我还没有真正让 ActionMailer 在内部使用正确的内容类型来呈现模板。这导致通过模板文件名的隐式键入不起作用，因此布局被错误地应用于文本版本。一种解决方法是显式地为文本版本不使用布局，从而产生类似这样的结果（注意模板名称）：

```
def some_multipart_email
    recipients   "Reciever <reciever@example.com>"
    from         "Sender <sender@example.com>"
    subject      "Hello"
    content_type "text/html"

    part "text/html" do |p|
        message = render_message("some_email_html", { })
        p.body = Premailer.new(message, with_html_string: true).to_inline_css
    end

    part "text/plain" do |p|
        p.content_type = "text/plain"
        p.body = render(file: "some_email_text", body: { }, layout: false)
    end
end 
```

# android - 在 Android 上的 Jetty 上的 Jersey 抛出 ContainerException：“没有 WebApplication 提供程序存在”

> ID：11191346
> 
> 赞同：4
> 
> 时间：2012-06-25T14:33:25.463
> 
> 标签：android, jetty, jersey

我正在尝试在 Android 上的 Jetty 上运行 Jersey。

我创建了一个使用 Jersey Servlet 实例化 Jetty 服务器的 Android。无论如何，当我启动 Jetty 并访问 REST 资源（在我的情况下：）时，`http://192.168.1.12:8080/api/hello`我得到一个带有消息的 ContainerException：不存在 WebApplication 提供程序（请参阅下面的异常堆栈跟踪）。

知道为什么吗？

我已将 javax 包 JNDI 添加到项目中，因为 Jetty 或 Jersey 都需要它。Android 不喜欢导入 javax 库，所以我暂时使用 --core-library 命令行参数来编译 dex 文件。

异常跟踪：

```
com.sun.jersey.api.container.ContainerException: No WebApplication provider is present
at com.sun.jersey.spi.container.WebApplicationFactory.createWebApplication(WebApplicationFactory.java:69)
at com.sun.jersey.spi.container.servlet.ServletContainer.create(ServletContainer.java:391)
at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.create(ServletContainer.java:306)
at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:605)
at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:208)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
at javax.servlet.GenericServlet.init(GenericServlet.java:241)
at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:444)
at org.eclipse.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:335)
at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:523)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:479)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:483)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:227)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1031)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:186)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:965)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
at org.eclipse.jetty.server.Server.handle(Server.java:349)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:449)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:910)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:647)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:233)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:615)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
at java.lang.Thread.run(Thread.java:1019) 
```

活动代码：

```
public class StartServerActivity extends Activity {

private Server webServer;
private final static String LOG_TAG = "Jetty";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    System.setProperty("java.net.preferIPv4Stack", "true");
    System.setProperty("java.net.preferIPv6Addresses", "false");

    webServer = new Server(8080);

    ServletHolder servletHolder = new ServletHolder(ServletContainer.class);
    servletHolder.setInitParameter("com.sun.jersey.config.property.packages", "com.famenu.server.resources");
    servletHolder.setInitParameter("com.sun.jersey.config.property.resourceConfigClass", "com.sun.jersey.api.core.PackagesResourceConfig");
    ServletContextHandler servletContextHandler = new ServletContextHandler(webServer, "/api");
    servletContextHandler.addServlet(servletHolder, "/");

    webServer.setHandler(servletContextHandler);

    try {
        webServer.start();
        webServer.join();
        Log.d(LOG_TAG, "started Web server");

    }
    catch (Exception e) {
        Log.d(LOG_TAG, "unexpected exception starting Web server: " + e);
    }
} 
```

}

我正在使用 Jetty 7.3.0.v20110203、Jersey 1.12、Android 1.6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T12:18:13.057

我对 Jetty 8 和 Jersey 1.13 也有同样的问题。为了解决这个问题，我添加了以下依赖项。

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.13</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T18:12:25.280

WebApplicationProviderImpl 通过 jersey-server.jar 中的 META-INF/services 条目注册。您是否有可能将 Jersey 重新包装到自己的罐子中并错过了 META-INF/services 条目？

所以要解决这个异常，需要将 jersey-core jersey-server 和 jersey-servlet 中的 META-INF/services 文件夹添加到 apk 的 META-INF 文件夹中。

然后您将无法使用 Eclipse 进行部署，但以下命令行将起作用：

cd PROJECT_DIRECTORY

蚂蚁调试

adb install -r "bin/YOUR_PROJECT-debug.apk"

# ios - 如何获取 UIBezierPath 的反向路径

> ID：11191353
> 
> 赞同：14
> 
> 时间：2012-06-25T14:33:51.580
> 
> 标签：ios, objective-c, iphone, uibezierpath

```
self.myPath=[UIBezierPath bezierPathWithArcCenter:center 
                                           radius:200 
                                       startAngle:0 
                                         endAngle:180 
                                        clockwise:YES]; 
```

（这就是我能够通过一些网络搜索开始运行的）。

我有这条路。现在我想填充这条路径的反面，所以留下这部分并填充其他所有内容。我怎样才能完成编码？我没有太多这方面的信息。

## 问题

![在此处输入图像描述](../Images/982be57512a63d21a4f1bd51ae62a635.png)

之前使用 Cemal Answer 后显示的区域仅显示一个带有红色笔划的圆圈。

## 编辑

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.backgroundColor = [UIColor whiteColor];
        self.punchedOutPath =  
         [UIBezierPath bezierPathWithOvalInRect:CGRectMake(50, 50, 400, 400)];
        self.fillColor = [UIColor redColor];
        self.alpha = 0.8;
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    [[self fillColor] set];
    UIRectFill(rect);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(ctx, kCGBlendModeDestinationOut);

    [[self punchedOutPath] fill];

    CGContextSetBlendMode(ctx, kCGBlendModeNormal);
} 
```

![在此处输入图像描述](../Images/a67051eca3c8c9aa88f955562b46f569.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T07:31:28.427

使用`bezierPathByReversingPath`. 来自文档（仅限 iOS 6.0+）：

> 创建并返回一个新的贝塞尔路径对象，其内容与当前路径的内容相反。

所以要扭转你的道路，你只需：

```
UIBezierPath* aPath = [UIBezierPath bezierPathWithArcCenter:center
                                                     radius:200
                                                 startAngle:0
                                                   endAngle:180
                                                  clockwise:YES];
self.myPath = [aPath bezierPathByReversingPath]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-29T03:21:13.897

这是一个根本不需要反转路径的替代方案。

您实际上想要“剪掉”视图的一部分：

![剪掉](../Images/8c4425698d3cf1eef59938d6c84dd504.png)

假设您希望白色区域`[UIColor whiteColor]`具有 75% 的 alpha。以下是您快速完成的方法：

*   您创建一个新的`UIView`子类。
*   此视图有两个属性：

    ```
    @property (retain) UIColor *fillColor;
    @property (retain) UIBezierPath *punchedOutPath; 
    ```

*   你重写它的`-drawRect:`方法来做到这一点：

    ```
    - (void)drawRect:(CGRect)rect {
      [[self fillColor] set];
      UIRectFill(rect);

      CGContextRef ctx = UIGraphicsGetCurrentContext();
      CGContextSetBlendMode(ctx, kCGBlendModeDestinationOut);

      [[self punchedOutPath] fill];

      CGContextSetBlendMode(ctx, kCGBlendModeNormal);
    } 
    ```

这里有一个警告：`fillColor`视图的*不能*包含 alpha 组件。所以在你的情况下，你希望它只是`[UIColor whiteColor]`. 然后，您通过调用自己应用 alpha 位`[myView setAlpha:0.75]`。

这里发生了什么：这是使用一种名为“Destination Out”的混合模式。在数学上它被定义为`R = D*(1 - Sa)`，但用外行的话来说，它的意思是“目标图像不透明但源图像透明的目标图像，并且在其他地方透明。”

所以它将使用目的地（即，已经在上下文中的东西），只要*新*东西是透明的（即在贝塞尔路径之外），然后在贝塞尔路径不透明的地方，这些东西就会变得透明。但是，目标内容必须已经是*opaque*。如果它不是不透明的，则混合不会达到您想要的效果。这就是为什么你必须提供一个不透明的`UIColor`，然后直接对视图进行任何你想要的透明度。

* * *

我自己运行了这个，在这些情况下：

*   窗口有`[UIColor greenColor]`背景
*   是`fillColor`白色的
*   这`punchedOutPath`是一个椭圆，距离视图边缘 10 个点。
*   视图有`alpha`一个`0.75`

使用上面的代码，我得到了这个：

![在此处输入图像描述](../Images/b2c8054c0b00768348609ee47c4081d7.png)

内部是纯绿色，外部有半透明覆盖。

* * *

**更新**

如果您的覆盖物是*图像*，那么您需要创建一个新图像。但原理是一样的：

```
UIImage* ImageByPunchingPathOutOfImage(UIImage *image, UIBezierPath *path) {
  UIGraphicsBeginImageContextWithOptions([image size], YES, [image scale]);

  [image drawAtPoint:CGPointZero];

  CGContextRef ctx = UIGraphicsGetCurrentContext();
  CGContextSetBlendMode(ctx, kCGBlendModeDestinationOut);
  [path fill];

  UIImage *final = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return final;
} 
```

然后，您将获取此函数的结果并将其放入`UIImageView`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T12:20:38.657

您可以将其放入视图控制器中的单屏应用程序中：它将创建一个黄色背景视图和一个蓝色层，其顶部有一个被蒙版切割的椭圆形区域。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // create a yellow background
    UIView *bg = [[UIView alloc] initWithFrame:self.view.bounds];
    bg.backgroundColor = [UIColor yellowColor];
    [self.view addSubview:bg];    

    // create the mask that will be applied to the layer on top of the 
    // yellow background
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.fillRule = kCAFillRuleEvenOdd;
    maskLayer.frame = self.view.frame;

    // create the paths that define the mask
    UIBezierPath *maskLayerPath = [UIBezierPath bezierPath];
    [maskLayerPath appendPath:[UIBezierPath bezierPathWithRect:CGRectInset(self.view.bounds, 20, 20)]];
    // here you can play around with paths :)
//    [maskLayerPath appendPath:[UIBezierPath bezierPathWithOvalInRect:(CGRect){{80, 80}, {140, 190}}]];
    [maskLayerPath appendPath:[UIBezierPath bezierPathWithOvalInRect:(CGRect){{100, 100}, {100, 150}}]];
    maskLayer.path = maskLayerPath.CGPath;

    // create the layer on top of the yellow background
    CALayer *imageLayer = [CALayer layer];
    imageLayer.frame = self.view.layer.bounds;
    imageLayer.backgroundColor = [[UIColor blueColor] CGColor];

    // apply the mask to the layer
    imageLayer.mask = maskLayer;
    [self.view.layer addSublayer:imageLayer];

} 
```

这也可以回答这个问题：[UIBezierPath Subtract Path](https://stackoverflow.com/questions/8859285/uibezierpath-subtract-path)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T14:42:40.803

我有两个解决方案给你。

1.  在`CALayer`. 并将其`CALayer`用作您实际的遮罩层`CALayer`。

2.  在添加圆弧之前绘制一个具有框架大小的矩形。

    ```
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:view.frame];
    [path addArcWithCenter:center 
                    radius:200 
                startAngle:0 
                  endAngle:2*M_PI 
                 clockwise:YES]; 
    ```

我会使用第二种解决方案。:)

# jquery - Cookie EU 脚本与其他 Wordpress 插件冲突

> ID：11191362
> 
> 赞同：0
> 
> 时间：2012-06-25T14:34:33.190
> 
> 标签：jquery, wordpress

我一直在我们所有的网站上推出 cookie 欧盟法律脚本。在我访问这个网站之前，一切都很好：

[http://www.ukhealthgateway.com/](http://www.ukhealthgateway.com/)

由于某种原因，它只是不会加载。我认为它与插件冲突。有人可以看看吗？

这是 Wordpress 在头脑中输出的内容：

```
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>National Health Service market access &amp; entry - UK HealthGateway UK HealthGateway</title>
<link rel="stylesheet" href="http://www.ukhealthgateway.com/wp-content/themes/default/style.css" type="text/css" media="screen" />
<link rel="pingback" href="http://www.ukhealthgateway.com/xmlrpc.php" />
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://www.ukhealthgateway.com/wp-content/themes/default/cookie_law.js"></script>
<script type="text/javascript">

    $(document).ready(function(){
        $('body').cwAllowCookies(); 
    });

</script>

<!-- This site is optimized with the Yoast WordPress SEO plugin v1.1.5 - http://yoast.com/wordpress/seo/ -->
<meta name="description" content="Selling to the UK National Health Service is challenging and time consuming. UK HealthGateway gives you the solutions and services to quickly and cost-effectively win sales."/>
<link rel="canonical" href="http://www.ukhealthgateway.com/" />
<meta name="google-site-verification" content="9topKAjyLtAge98viaRrfR2QaeQEAdHk4WI_aMDlD-Q" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="UK HealthGateway &raquo; Feed" href="http://www.ukhealthgateway.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="UK HealthGateway &raquo; Comments Feed" href="http://www.ukhealthgateway.com/comments/feed/" />

    <script type="text/javascript">//<![CDATA[
    // Google Analytics for WordPress by Yoast v4.2.3 | http://yoast.com/wordpress/google-analytics/
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    //]]></script>
<link rel="alternate" type="application/rss+xml" title="UK HealthGateway &raquo; Home Comments Feed" href="http://www.ukhealthgateway.com/home/feed/" />
<link rel='stylesheet' id='jigoshop_frontend_styles-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/css/frontend.css?ver=3.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='jqueryui_styles-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/css/ui.css?ver=3.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='jigoshop_fancybox_styles-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/css/fancybox.css?ver=3.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='nivoStyleSheet-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/nivo-slider-light/nivo-slider.css?ver=3.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='nivoCustomStyleSheet-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/nivo-slider-light/custom-nivo-slider.css?ver=3.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='tribe-events-calendar-style-css'  href='http://www.ukhealthgateway.com/wp-content/plugins/the-events-calendar/resources/events.css?ver=3.3.1' type='text/css' media='all' />
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/nivo-slider-light/jquery.nivo.slider.pack.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/js/jquery.fancybox-1.3.4.pack.js?ver=1.0'></script>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/js/jigoshop_frontend.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/jigoshop/assets/js/script.js?ver=1.0'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/the-events-calendar/resources/jquery.pjax.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-content/plugins/the-events-calendar/resources/events.js?ver=3.3.1'></script>
<script type='text/javascript' src='http://www.ukhealthgateway.com/wp-includes/js/comment-reply.js?ver=20090102'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.ukhealthgateway.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.ukhealthgateway.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.3.1" />
<script type="text/javascript">
/* <![CDATA[ */
    jQuery(document).ready(function($){
        $(".nivoSlider br").each(function(){ // strip BR elements created by Wordpress
            $(this).remove();
        });
        $('.nivoSlider').nivoSlider({
            effect:'fade', //Specify sets like: 'random,fold,fade,sliceDown'
            // All effects:
            // sliceDown, sliceDownLeft, sliceUp, sliceUpLeft, sliceUpDown
            // sliceUpDownLeft, fold, fade, random, slideInRight,
            // slideInLeft, boxRandom, boxRain, boxRainReverse, boxRainGrow
            // boxRainGrowReverse
            animSpeed:500, //Slide transition speed
            pauseTime:6000,
            startSlide:0, //Set starting Slide (0 index)
            directionNav:true, //Next & Prev
            directionNavHide:true, //Only show on hover
            controlNav:false, //1,2,3...
            controlNavThumbs:false, //Use thumbnails for Control Nav
            controlNavThumbsFromRel:false, //Use image rel for thumbs
            controlNavThumbsSearch: '.jpg', //Replace this with...
            controlNavThumbsReplace: '_thumb.jpg', //...this in thumb Image src
            keyboardNav:true, //Use left & right arrows
            pauseOnHover:true, //Stop animation while hovering
            manualAdvance:false, //Force manual transitions
            captionOpacity:0.8, //Universal caption opacity
            beforeChange: function(){},
            afterChange: function(){},
            slideshowEnd: function(){} //Triggers after all slides have been shown
        });
    });
/* ]]> */
</script>

</head> 
```

更新：我已经按照您的建议进行了操作（删除了 jQuery 1.4.2，移动了 cookie 脚本，使其在 Nivoslider 之后加载并将 $ 更改为 jQuery）。它仍然没有加载。例如，我在 teamworksdesign.com 上使用完全相同的脚本，它运行良好。不同之处似乎是，该站点使用 Wordpress 3.1.3，而我的问题中的站点使用 3.3.1。它也适用于 IE7，但不适用于现代浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:50:48.813

好的，看起来您已将代码直接插入头部。您的 Wordpress 安装附带的 jQuery 库将在页面下方（版本 1.7.1）排入队列，因此您也不需要添加 jQuery 1.4.2。可能就是这样。

如果不是，则可能值得将您的 cookie 脚本与您的其他脚本（jQuery UI 和 Nivoslider 正在那里排队）一起正确地排在 functions.php 中。正如 James Allardice 提到的那样，您可以添加您的

```
$('body').cwAllowCookies(); 
```

对于在结束 head 标签之前设置 Nivoslider 的 onload 脚本，它使用 jQuery() 而不是 $()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:14:29.697

有*一些*apache 安全模块会查找包含 cookie.js 的文件名，但它们不提供该文件。

我在 Drupal 上遇到过这个问题，我发现[这个线程](http://drupal.org/node/522646)记录了它。

# google-apps-script - 如何使用 Spreadsheet.setSpreadsheetLocale？

> ID：11191364
> 
> 赞同：0
> 
> 时间：2012-06-25T14:34:41.120
> 
> 标签：google-apps-script, google-sheets, locale

我正在尝试更改电子表格的区域设置，但 setSpreadsheetLocale 似乎不起作用。

如果我做

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
ss.setSpreadsheetLocale('en_AU');
Browser.msgBox(ss.getSpreadsheetLocale()); 
```

消息框显示正确的区域设置，但工作表中日期的格式不会改变。此外，“文件”、“电子表格设置...”仍会显示以前的语言环境。如果我关闭电子表格并重新打开它，它仍然是原始语言环境。

是我做错了什么，还是一个错误？

**在 Serge insas 评论之后编辑：确实，刷新页面 (F5) 确实会使用新的区域设置更新显示**。****

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:26:08.550

在您刷新页面之前，电子表格似乎不尊重新的区域设置，而在 UI 中更改它会使其立即生效。[您可以在问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开错误报告来跟踪此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:51:53.907

我的解决方法是使用该`copyTo()`方法将具有正确设置的电子表格中的工作表移动到新的（刚刚创建的）电子表格中。

这样，新电子表格就会继承这些设置。**

# jquery - jquery change() 不适用于相同 html 元素的 jquery 自动完成

> ID：11191368
> 
> 赞同：0
> 
> 时间：2012-06-25T14:34:45.780
> 
> 标签：jquery

我有一个绑定到 jquery UI 自动完成的输入字段。从自动完成的下拉列表中选择特定条目时，客户端会收到一些条目，然后将其设置为其他字段的值。它工作正常。但是当我在字段中写一些东西作为值并期望接收这些数据时，我没有得到它们。我不知道该怎么做。

我的第二个问题是，为了解决这个问题，我用 jquery change() 绑定了相同的输入字段。更改时，特定值会设置为其他一些字段，但会立即从字段中消失。我无法理解问题是什么。我的代码在这里。

```
 $("#siteID1").autocomplete({
                        source: "sourceSearch.php?field=site",
                        minLength: 1,

                        focus: function(event, ui) { 
                            event.preventDefault();
                            $(this).val(ui.item.label);
                        },

                        select: function( event, ui ) {
                            event.preventDefault();
                            $(this).val(ui.item.label);

                        },
                        change: function (event, ui) {
                            event.preventDefault();
                            if(ui.item!=null)
                            {
                                $("#site1Name").val(ui.item.value.btsName);
                                $("#site1Long").val(ui.item.value.longitude);
                                $("#site1Lat").val(ui.item.value.latitude);
                                $("#site1CId").val(ui.item.value.componentId);
                            }
                            else
                            {
                                $("#site1Name").val("");
                                $("#site1Long").val("");
                                $("#site1Lat").val("");
                                $("#site1CId").val("");
                            }

                        }   
               }); 
```

上面的代码是当我将自动完成与字段绑定时。以下代码是我用 change() 绑定字段时的代码。

```
 $('#siteID1').change(function() {
                    $.ajax({            
                              url: "sourceSearch.php?field=site&term="+$('#siteID1').val(),
                              dataType: 'json',
                              //async: false,
                              success:  function(data){

                                    if(data)
                                    {
                                        $("#site1Name").val(data[0].value.btsName);
                                        $("#site1Long").val(data[0].value.longitude);
                                        $("#site1Lat").val(data[0].value.latitude);
                                        $("#site1CId").val(data[0].value.componentId);
                                    }
                                    else
                                    {
                                        $("#site1Name").val("");
                                        $("#site1Long").val("");
                                        $("#site1Lat").val("");
                                        $("#site1CId").val("");
                                    }

                              }
                        }); 
                }); 
```

在这两种情况下，我都能准确地从服务器接收到 json 数据。但是在更改时，“btesName”、“longitude”等一旦被设置为值就会消失。谁能帮帮我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:44:34.127

如果换行会发生什么

```
 $('#siteID1').change(function() 
```

对此：

```
 $('#siteID1').live('change' ,function() 
```

这些帮助有用？

您是否还在 else 语句中放置了一个警报，以防它在不应该触发的情况下触发？

# compilation - 运行或修改在 GNU 通用公共许可证下可用的源代码（二进制文件）

> ID：11191369
> 
> 赞同：0
> 
> 时间：2012-06-25T14:34:50.213
> 
> 标签：compilation, gnu, binaries

亲爱的 stackoverflow 成员，

我有一个问题，对这里的大多数成员来说可能听起来很傻，但它困扰了我很长一段时间，并且找不到任何合适的答案。

我的问题是，我们如何运行在 GNU 许可下分发的开源项目的源代码或二进制文件。

当我下载项目时，我得到的只是一个**.tar**文件，解压缩后，我得到一个包含许多子文件夹的文件夹，如 src、build 等。这个文件夹看起来类似于由像 netbeans 这样的 IDE 创建的项目文件夹。但是如何编译和修改这些源文件呢？

有没有一个应用程序可以做到这一点？还是我必须切换到 linux 才能做到这一点？

我目前正在使用 Windows 7 的副本，并且还有 Windows XP 的副本可供使用。

任何帮助将不胜感激。

非常感谢您提前。

欢呼基肖尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:01:20.130

在 GNU 和 GNU/Linux 发行版下，软件包由软件包管理器安装（例如，无需构建或下载任何东西）。一些程序员分发（连同源代码）程序的二进制版本（通过单击它们或从命令行调用它们来运行）。[借助 MinGW](http://www.mingw.org)，您可以在 Windows 上编译源代码。要运行指令，请阅读您在解压目录中找到的“README”文件。大多数程序可以通过以下方式构建：

```
./configure; make; make install 
```

如果您发布项目的链接，我可以帮助您完成构建过程。

# c# - 找不到类型或命名空间名称“WebControls”（您是否缺少 using 指令或程序集引用？）

> ID：11191373
> 
> 赞同：0
> 
> 时间：2012-06-25T14:34:57.710
> 
> 标签：c#, asp.net, .net, compiler-errors

我遇到了这个错误：

> 找不到类型或命名空间名称“WebControls”（您是否缺少 using 指令或程序集引用？）

源错误：

```
Line 28:  Login Login1 = (WebControls.Login)LoginView1.FindControl("Login1"); // here the error code
Line 29:  TextBox UserName = (TextBox)Login1.FindControl("UserName");
Line 30:  TextBox FailureText = (TextBox)Login1.FindControl("FailureText"); 
```

我做了一些研究，解决方案是将其添加到源代码中：

```
System.Web.UI.WebControls.Login 
```

但我不知道这段代码可以添加到哪里。起初我尝试将它作为命名空间，但它是错误的。谁能告诉我应该把这段代码放在哪里？？

**编辑**

```
 protected void Login1_LoginError(object sender, System.EventArgs e)
{
    //Login Login1 = (WebControls.Login).LoginView1.FindControl("Login1");

    Login Login1 = (System.Web.UI.WebControls.Login)LoginView1.FindControl("Login1");
        TextBox UserName = (TextBox)Login1.FindControl("UserName");
        TextBox FailureText = (TextBox)Login1.FindControl("FailureText");

    //There was a problem logging in the user
    //See if this user exists in the database

    MembershipUser userInfo = Membership.GetUser(UserName.Text);
    if (userInfo == null)
    {
        //The user entered an invalid username...

        FailureText.Text = "There is no user in the database with the username " + UserName.Text;
    }
    else
    {
        //See if the user is locked out or not approved
        if (!userInfo.IsApproved)
        {
            FailureText.Text = "When you created your account you were sent an email with steps to verify your account. You must follow these steps before you can log into the site.";
        }
        else if (userInfo.IsLockedOut)
        {
            FailureText.Text = "Your account has been locked out because of a maximum number of incorrect login attempts. You will NOT be able to login until you contact a site administrator and have your account unlocked.";
        }
        else
        {
            //The password was incorrect (don't show anything, the Login control already describes the problem)
            FailureText.Text = string.Empty;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:36:22.100

您可能想要添加

```
using System.Web.UI.WebControls; 
```

在文件的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:37:01.463

*再次更新*

最初，保留与您发布的代码相同的代码 - 然后将这两个`using`语句添加到您的代码所在的 .cs 文件的顶部：

```
using System.Web.UI;
using System.Web.UI.WebControls; 
```

我认为代码在这里混合了它对命名空间的使用 - 如果执行上述工作，我会考虑摆脱所有`WebControls.[class]`类型名称，`[class]`因为第二次使用消除了使用`WebControls`子命名空间的需要明确地。在单个代码文件中以两种不同的方式引用同一类型通常是不好的形式。

您的项目中也可能有另一种类型，`Login`它位于另一个命名空间的范围内。如果是这种情况，您将需要为您在第 28 行声明的变量使用完全限定名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:36:05.667

您需要指定类的全名，包括所有命名空间和类名本身：

```
(System.Web.UI.WebControls.LoginView)LoginView1.FindControl("Login1"); // LoginView sic! 
```

或将命名空间添加到 using 块：

```
using System.Web.UI.WebControls;
...
(LoginView)LoginView1.FindControl("Login1");; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T11:18:26.157

正如其他人指出的那样，您需要添加：

使用 System.Web.UI.WebControls；

在文件的顶部。

我唯一可以补充的是，如果您遇到类似的错误（毕竟识别要使用的类相对容易，但有时很难识别要使用的命名空间）。

# sql - 从 csv 导出数据时执行触发器

> ID：11191377
> 
> 赞同：0
> 
> 时间：2012-06-25T14:35:14.683
> 
> 标签：sql, postgresql, ubuntu, bigdata

我们在 postgres 数据库中有七个表。t1,t2,t3,t4,t5,t,t7 每个表都包含具有重复 product_id 编号的各种列

product_id 编号存在于每个表中。这意味着

```
 t1 --> 123(product_id)
 t1 --> 123(with various other column data)
 t2 --> 123 upto  t7 
```

这个“123”产品ID将存在于每个表中直到t7。而且，该表将有多个相同的product_ids。

当前要求是处理我服务器中的所有 product_id，我需要创建具有唯一产品 ID 的中间表。

每当我更新表（t1..t7）时，都必须触发中间表进行更新。

**Edit1**：必须通过将所有七个表放在一起来生成中间视图。

当我再次从 csv/ **(copy tablename from csvpath...)**向这七个表中导入几行时。中间视图也需要通过触发方法计算和更新

因为这是频繁的操作。从 csv 更新表并再次计算和更新中间视图。

那么，通过从 csv 导入更新七个表时，应该如何编写触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:50:09.380

不要创建表，而是创建从这些表中进行选择的视图。

```
create or replace view all_product_ids
as
 select product_id
 from t1
 union 
 select product_id
 from t2
 union 
 ... you get the picture ... 
```

完成此操作后，请重新考虑您的数据库模型。根据您提供的少量信息，听起来您的模型并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:54:23.210

[查看有关PL/pgSQL 触发器](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)的 PostgreSQL 文档，尤其是在[这个示例](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html#PLPGSQL-TRIGGER-AUDIT-EXAMPLE)中，您的活动看起来很相似。

# javascript - OAuth、javascript 和许多 URI

> ID：11191381
> 
> 赞同：0
> 
> 时间：2012-06-25T14:35:19.697
> 
> 标签：javascript, oauth

我正在尝试制作一个可以由许多人托管的程序，例如应用程序。该应用程序使用 REST API，因此我必须使用 Oauth 进行身份验证，并且因为任何人都应该能够托管该程序，重定向 URI 不能是静态的。

此外，我不想使用任何服务器端处理，这对我来说只意味着 javascript。

是否有可能使用非静态重定向 URI 并且仅使用 javascript 来制作一个安全且有效的解决方案，以便在普通的网络浏览器中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:39:38.537

因此，您使用应用请求中提供的信息来指明应用的 URL。例如，如果请求到达`http://example.com/path/to/app`并且您知道您的应用程序`/to/app`是路由基础设施的一部分，那么您的应用程序的路径是`http://example.com/path/`.

这就是我将如何确定它，使用服务器端语言。

使用将从服务器加载的javascript库，我要么像上面那样确定它，要么我只是在生成javascript文件时对其进行硬编码（当你告诉人们在哪里下载javascript时，它可以使用首先需要他们的网址的表格）。

# eclipse - 尝试使用休眠工具生成 pojo 或映射时出现 noclassdeffounderror

> ID：11191386
> 
> 赞同：4
> 
> 时间：2012-06-25T14:35:38.857
> 
> 标签：eclipse, hibernate, code-generation, pojo, hibernate-tools

我正在尝试从我的数据库中生成 pojos，但是在我的构建路径中安装了休眠工具 3.4 插件和休眠 3.6.10 库（它们似乎全部）的 eclipse indigo 3.7.2 上出现以下错误

精简版 ：

```
org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
  java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
  Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
    java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
    Could not initialize class org.hibernate.cfg.reveng.OverrideRepository 
```

来自项目构建路径的我的罐子是（如果重要的话，按顺序）：

*   hibernate-distribution-3.6.10.Final\hibernate3.jar
*   hibernate-distribution-3.6.10.Final\lib\required\antlr-2.7.6.jar
*   hibernate-distribution-3.6.10.Final\lib\required\commons-collections-3.1.jar
*   hibernate-distribution-3.6.10.Final\lib\required\dom4j-1.6.1.jar
*   hibernate-distribution-3.6.10.Final\lib\required\javassist-3.12.0.GA.jar
*   hibernate-distribution-3.6.10.Final\lib\required\jta-1.1.jar
*   hibernate-distribution-3.6.10.Final\lib\required\slf4j-api-1.6.1.jar
*   postgresql-9.0-802.jdbc3.jar

我注意到休眠工具插件在其插件文件夹中有一些较旧的 jar 顺便说一句（例如 slf4j 是 1.5.8 版）同时我会尝试 buddyloading

正常堆栈跟踪

```
ENTRY org.hibernate.eclipse.console 4 666 2012-06-25 04:23:55.946
!MESSAGE org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
!STACK 0
org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.launchExporters(ConsoleExtension3_6.java:149)
    at org.hibernate.eclipse.launch.CodeGenerationLaunchDelegate.launch(CodeGenerationLaunchDelegate.java:270)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6$3.execute(ConsoleExtension3_6.java:249)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.jboss.tools.hibernate3_6.HibernateExtension3_6.execute(HibernateExtension3_6.java:201)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.buildConfiguration(ConsoleExtension3_6.java:239)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.runExporters(ConsoleExtension3_6.java:169)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.launchExporters(ConsoleExtension3_6.java:126)
    ... 6 more
!SUBENTRY 1 org.hibernate.eclipse.console 4 666 2012-06-25 04:23:55.946
!MESSAGE org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
!STACK 0
org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.launchExporters(ConsoleExtension3_6.java:149)
    at org.hibernate.eclipse.launch.CodeGenerationLaunchDelegate.launch(CodeGenerationLaunchDelegate.java:270)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6$3.execute(ConsoleExtension3_6.java:249)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.jboss.tools.hibernate3_6.HibernateExtension3_6.execute(HibernateExtension3_6.java:201)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.buildConfiguration(ConsoleExtension3_6.java:239)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.runExporters(ConsoleExtension3_6.java:169)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.launchExporters(ConsoleExtension3_6.java:126)
    ... 6 more
!SUBENTRY 1 org.hibernate.eclipse.console 4 666 2012-06-25 04:23:55.946
!MESSAGE java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
!STACK 0
java.lang.NoClassDefFoundError: Could not initialize class org.hibernate.cfg.reveng.OverrideRepository
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6$3.execute(ConsoleExtension3_6.java:249)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.jboss.tools.hibernate3_6.HibernateExtension3_6.execute(HibernateExtension3_6.java:201)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.buildConfiguration(ConsoleExtension3_6.java:239)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.runExporters(ConsoleExtension3_6.java:169)
    at org.jboss.tools.hibernate3_6.console.ConsoleExtension3_6.launchExporters(ConsoleExtension3_6.java:126)
    at org.hibernate.eclipse.launch.CodeGenerationLaunchDelegate.launch(CodeGenerationLaunchDelegate.java:270)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:928)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1132)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

我第一次尝试使用代码生成时，我得到了这样的结果：

```
org.hibernate.console.HibernateConsoleRuntimeException: Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class Received a NoClassDefFoundError, probably the console configuration classpath is incomplete or contains conflicting versions of the same class   java.lang.NoClassDefFoundError: org/objectweb/asm/Type   org/objectweb/asm/Type    
java.lang.NoClassDefFoundError: org/objectweb/asm/Type org/objectweb/asm/Type          
java.lang.ClassNotFoundException: org.objectweb.asm.Type     org.objectweb.asm.Type 
```

之后我只得到了`[...]cfg.reveng.OverrideRepository error`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-28T12:44:24.940

在遭受 NoclassDefFoundError 数小时的严重折磨后，我终于找到了解决方案。

重点：hibernate 版本的库应与控制台配置的选定 Hibernate 版本匹配（第 3 点）。

检查清单：

1.  确保您已下载最新版本的 Hibernate 插件（适合您的 Eclipse 版本）。要获得它，请转到 Help->Eclipse Marketplace-> 输入：hibernate（eclipse 版本名称，例如 luna）。选择最新的 JBoss 工具，并选择 Hibernate 和 JBoss Maven Hibernate Configurator 以获得最低功能。

2.  [从http://hibernate.org/orm/downloads/](http://hibernate.org/orm/downloads/)下载最新的 jar 文件。将这些文件存储在构建路径中的文件夹中。

3.  创建 Hibernate 控制台配置时，请确保从下拉列表中选择最新的 Hibernate 版本。例如，在我的情况下，我在构建路径中有 Hibernate 4.x jar 文件，选择版本 4.3。解决了问题。

尝试从控制台配置的下拉列表中更改 Hibernate 版本。它可能会解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:20:12.937

正确答案：[https](https://community.jboss.org/thread/201634?tstart=0)
://community.jboss.org/thread/201634?tstart=0 如果有人有什么要补充的，请花点时间去做，就像我一样。

谢谢

顺便说一句，我不敢相信社区中的任何人都遇到过这个错误/问题

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-05-24T07:19:23.473

我在进行hibernate逆向工程时也遇到了这个问题，我经历了将近3天，但我终于得到了解决方案。

1.  为了进行hibernate逆向工程，您不需要显式添加任何与hibernate相关的jar，因为它与hibernate工具插件一起提供，唯一的问题是您必须为相应的数据库添加jdbc jar。

2.  创建项目后，您在 Eclipse 的角度选择休眠选项，然后您将选择`File => New =>Hibernate Console Configuration`

3.  在这里，您必须进行休眠控制台配置，因为您有“**休眠版本”确保您在此处选择的版本与您在创建****休眠配置文件**时必须选择的版本相同，如果您愿意的话，它只不过是**hibernate.cfg.xml**同样你不会得到这个错误：

> org.hibernate.console.HibernateConsoleRuntimeException: 收到 NoClassDefFoundError，可能控制台配置类路径不完整或包含同一类的冲突版本

# java - GSON 反序列化：如何知道对象？

> ID：11191387
> 
> 赞同：4
> 
> 时间：2012-06-25T14:35:42.473
> 
> 标签：java, gwt, gson

我尝试使用 gson 库来反序列化发送给我的对象流。在我见过的所有示例中，当调用 fromJson 方法时，我们已经知道我们期望拥有的对象类型。

就我而言，我收到了一系列不同的对象，我想知道在反序列化对象之前了解对象类别的最佳方法。

```
{ A : {...}, B : { B1 : {...}, B2 : {...} }, C : {...} } 
```

在这个例子中，我想知道有 3 个对象已发送给我：A.class、B.class 和 C.class

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:39:57.973

[该文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types)包含使用任意类或两次传递的反序列化示例（首先是集合中的一般反序列化，然后是内容反序列化）。

[这个例子](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/extras/examples/rawcollections/RawCollectionsExample.java)看起来和你需要的完全一样。你可以调整它来使用

```
JsonObject obj = parser.parse(json).getAsJsonObject(); 
```

获取 a`JsonObject`而不是数组，以便您可以迭代所有属性（使用[entrySet](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)`a = gson.fromJson(myjsonelement, A.class);` ）并通过简单地将名称映射到类来根据名称 ( ) 进行反序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:55:52.133

是的，我也偶然发现了这个问题。gson 无法确定字段值的实际类别。它只是尝试实例化用于定义字段的类。不用说，这往往不是我们想要的。所以如果你有，说

```
class C {
    private A a;
    private A c;
}

class B extends A {
} 
```

然后在运行时你

```
C c;
c.a = new B();
c.c = new B(); 
```

反序列化后你得到的是

```
c.a.getClass()==A.class;
c.b.getClass()==A.class; 
```

所以你必须明确指定子类。这是一个对 gson 友好的包装类。

```
public class S<T> {
    private String objectClass; 
    private String rawObjectRepresentation;
    // Gson needs no args constructor
    public S() {
    }

    public S(T obj) {
        objectClass = obj.getClass().getName();
        rawObjectRepresentation = getGson().toJson(obj);
    }

    @SuppressWarnings("unchecked")
    public T extract() throws ClassNotFoundException {
        final Class<?> clazz = Class.forName(objectClass);
        return (T)getGson().fromJson(rawObjectRepresentation, clazz);
    }

    private Gson getGson() {
        return new GsonBuilder().create();
    }

    @Override
    public String toString() {
        return "type:"+objectClass;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T17:34:34.410

如果json对象上有一个字段可以用来标识需要使用的子类，那么可以使用Gson on Fire：[https ://github.com/julman99/gson-fire](https://github.com/julman99/gson-fire)

它有一个称为类型选择器的功能，可以完全满足您的需求。

想象一个基类和两个子类 A 和 B，那么代码将如下所示：

```
GsonFireBuilder builder = new GsonFireBuilder()
    .registerTypeSelector(Base.class, new TypeSelector<Base>() {
        @Override
        public Class<? extends Base> getClassForElement(JsonElement readElement) {
            String kind = readElement.getAsJsonObject().get("kind").getAsString();
            if(kind.equals("a")){
                return A.class; //This will cause Gson to deserialize the json mapping to A
            } else if(kind.equals("b")) {
                return B.class; //This will cause Gson to deserialize the json mapping to B
            } else {
                return null; //returning null will trigger Gson's default behavior
            }
        }
    });
Gson gson = builder.createGson(); 
```

# c++ - Qt 命名空间的元类型信息

> ID：11191389
> 
> 赞同：1
> 
> 时间：2012-06-25T14:35:56.407
> 
> 标签：c++, qt

如果您查看`qnamespace.h`来自 Qt 的源代码，您会看到如下内容：

```
#ifndef Q_MOC_RUN
namespace
#else
class Q_CORE_EXPORT
#endif
Qt {

#if defined(Q_MOC_RUN)
    Q_OBJECT
#endif

#if (defined(Q_MOC_RUN) || defined(QT_JAMBI_RUN))
    // NOTE: Generally, do not add Q_ENUMS if a corresponding Q_FLAGS exists.
    Q_ENUMS(ScrollBarPolicy FocusPolicy ContextMenuPolicy)
    Q_ENUMS(ArrowType ToolButtonStyle PenStyle PenCapStyle PenJoinStyle BrushStyle)
    Q_ENUMS(FillRule MaskMode BGMode ClipOperation SizeMode)
    Q_ENUMS(BackgroundMode) // Qt3 
```

我对这段代码的解释是，`moc`预处理器被愚弄为一个伪造的 Qt 对象生成元类型信息。如何访问这个“假”元对象以获取例如`QMetaEnum`for`ArrowType`和其他枚举？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:56:02.830

下面的代码做到了。输出是：

```
LeftArrow 
```

```
#include <QtCore/QTextStream>
#include <QtCore/QMetaEnum>

struct StaticQtMetaObject : public QObject
{
    static inline const QMetaObject& get() {return staticQtMetaObject;}
};

int main(int argc, char *argv[])
{
    const QMetaObject& mo = StaticQtMetaObject::get();
    int index = mo.indexOfEnumerator("ArrowType");
    QMetaEnum me = mo.enumerator(index);
    Qt::ArrowType arrowType = Qt::LeftArrow;
    QTextStream(stdout) << me.valueToKey(arrowType) << endl;
    return 0;
} 
```

礼貌[http://qt-project.org/forums/viewthread/658](http://qt-project.org/forums/viewthread/658)

# r - 如何用矢量版本替换 R 中的 for 循环，将值放入列表的相应索引中？

> ID：11191396
> 
> 赞同：1
> 
> 时间：2012-06-25T14:36:13.800
> 
> 标签：r, vector, for-loop

在 R 中正确的做法是：

```
for(row in 1:10)
{
 counts[row] <- length(otherData[otherData[["some property"]] == otherList[row],])
} 
```

换句话说，在一个新的任何东西（矩阵、data.frame 等）的每一行中放入另一个东西（矩阵、data.frame 等）中与其他列表中的相应条目相等的那些行的计数（再次抽象地说，不是字面上列出对象）？

例如说 x = otherData 是

```
 a   b   c
d  1   2   3
e  1   3   4
f  2   5   6
g  1   5   3 
```

并说“otherList”是x的第一列，所以我想先计算有多少x的行有1、2、3等

所以我想要计数

```
3,
1,
0,
(0s as long as this counts list goes) 
```

请注意，我能够选择出该数据子集比获得它的长度更重要；我还需要将该子集用于其他计算，尽管再次想逐行选择它并将我所做的任何计算的输出存储在结果（在本例中为计数）矩阵的行中。

我显然可以用 for 循环来做到这一点，但是跳过循环的聪明方法是什么？

如果这重复了另一个问题，我们深表歉意。这似乎是一个非常基本的问题，但我不确定要搜索哪些术语。[这个问题](https://stackoverflow.com/questions/10924758/vector-version-vectorizing-a-for-which-equals-loop-in-r)似乎很相似，并且可以延长长度，尽管我不清楚如何在一般情况下应用它。

***编辑***

这是一个例子。我们选择满足某些行相关条件的 x 的某些行（这里 x 就像我上面的描述中的 otherData），在这种情况下，第一个 col 条目 = 到行，但关键是可以替换“== 行”行上的任何条件，例如“<= otherlist[row]-2”等。

```
> x
   condition value
1          2    25
2          9    72
3         41    60
4         41    61
5         25    38
6         41    10
7         41    43
8         41    26
9         41    46
10        12   263
11        26   136
12        24   107
13         9    70
14        12    62
15        12   136
16        34    44
17        12    53
18        32    14
19        32   148
20         4    34

> results = 0*1:20
> results
 [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
> for(row in 1:20) {
+ results[row] = length(x[x[["condition"]]==row,2]) }
> results
 [1] 0 1 0 1 0 0 0 0 2 0 0 4 0 0 0 0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:29:18.477

编辑：

```
sapply( 1:20, function(z) sum(x[["condition"]] == z) )
#[1] 0 1 0 1 0 0 0 0 2 0 0 4 0 0 0 0 0 0 0 0 
```

您将能够替换不同的逻辑测试，总和将是符合条件的行数。（我永远无法弄清楚您为什么使用第 2 列。）如果您希望选择满足条件的行子集（您的示例未说明），那么您可以使用它：

```
x[ x[,1] == test , ]  " e.g.

> x[ x$condition == 9, ]
   condition value
2          9    72
13         9    70 
```

或者，如果您只想要与测试的“条件”列对应的“值”列，请使用：

```
>  x[ x[['condition']] == 9, "value" ]
[1] 72 70 
```

如果您想将函数应用于选定的（不相交的）子集，`x`并且您可以创建一个与数据框一样长的因子变量，那么您可以使用`aggregate`或`by`处理拆分列表。如果您想使用上面的形式，这里有一个示例，它为具有“条件”`sapply`的行计算“值”子集的单独均值：`rownames`

```
> sapply( rownames(x), function(z) mean( x[x[["condition"]] == z , "value"]) )
 [1]   NaN  25.0   NaN  34.0   NaN   NaN   NaN   NaN  71.0   NaN   NaN 128.5   NaN   NaN   NaN   NaN
[17]   NaN   NaN   NaN   NaN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:16:15.513

怎么样`table`？

```
table(factor(x[, 1], x[1, ]))
# 
# 1 2 3 
# 3 1 0 
```

## 更新

在您的问题中使用第二个`x`表格，相同的解决方案：

```
table(factor(x$condition, rownames(x)))
# 
# 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 
# 0  1  0  1  0  0  0  0  2  0  0  4  0  0  0  0  0  0  0  0 
```

另外，尝试`match`：

```
match(x$condition, rownames(x))
# [1]  2  9 NA NA NA NA NA NA NA 12 NA NA  9 12 12 NA 12 NA NA  4
table(match(x$condition, rownames(x)))
# 
# 2  4  9 12 
# 1  1  2  4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:41:32.760

```
> a <- c(seq(1,10))
> a
 [1]  1  2  3  4  5  6  7  8  9 10
> d <- cbind(a,a)
> d
       a  a
 [1,]  1  1
 [2,]  2  2
 [3,]  3  3
 [4,]  4  4
 [5,]  5  5
 [6,]  6  6
 [7,]  7  7
 [8,]  8  8
 [9,]  9  9
[10,] 10 10
> d[,2]
 [1]  1  2  3  4  5  6  7  8  9 10
> d[,2] <- d[,1]*2
> d
       a  a
 [1,]  1  2
 [2,]  2  4
 [3,]  3  6
 [4,]  4  8
 [5,]  5 10
 [6,]  6 12
 [7,]  7 14
 [8,]  8 16
 [9,]  9 18
[10,] 10 20
> 
```

# python - 在复制的 ZODB 数据库上出现错误消息“找不到记录器 ZODB.FileStorage 的处理程序”

> ID：11191398
> 
> 赞同：12
> 
> 时间：2012-06-25T14:36:16.103
> 
> 标签：python, logging

我使用 创建了一个数据库`ZODB`，然后将其复制粘贴到另一台 PC。我想知道为什么每次我登录这个数据库（复制的）我都会收到这个错误：

```
no handlers could be found for logger (ZODB.FileStorage) 
```

注意：程序不会中断，它只是以红色打印出语句，就好像它是一个错误一样。

这是什么烦人的消息，为什么每次登录时都会出现？

更新号（1）：什么是 python 日志系统？为什么我需要在我的应用程序中配置它？

笔记：

1.  我只使用 ZODB。

2.  我的操作系统是 Windows XP sp2。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T19:09:48.490

**简答**

您*无需*为您的应用程序配置它。这样做很有用。

**长答案**

[logging](http://docs.python.org/library/logging.html)模块是一个 python 模块，它允许任何 python 代码以与使用它的实际应用程序输出无关的方式记录信息。任何深度的库都可以导入日志模块、日志信息、警告、错误等，而不必确切知道用​​户将如何接收它们。

您所看到的是您自己的应用程序中缺少处理程序。ZODB 显然是记录信息，但由于您没有定义处理程序，因此这些记录信息只是蒸发到以太中。它通知您，如果您想查看一些日志记录信息，您应该定义一个处理程序

从[记录食谱](http://docs.python.org/howto/logging-cookbook.html#logging-cookbook)：

```
import logging

# create logger with 'spam_application'
logger = logging.getLogger('spam_application')
logger.setLevel(logging.DEBUG)
# create file handler which logs even debug messages
fh = logging.FileHandler('spam.log')
fh.setLevel(logging.DEBUG)
# create console handler with a higher log level
ch = logging.StreamHandler()
ch.setLevel(logging.ERROR)
# create formatter and add it to the handlers
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
fh.setFormatter(formatter)
ch.setFormatter(formatter)
# add the handlers to the logger
logger.addHandler(fh)
logger.addHandler(ch) 
```

此示例为您的应用创建一个带有名称的记录器。然后它创建两种类型的处理程序。一个是文件处理程序，用于将 DEBUG 级别的日志写入文件。第二个是流处理程序，它将向您的控制台发送错误。

如果您想在控制台中看到更详细的信息，可以将日志级别更改为 INFO：

```
ch = logging.StreamHandler()
ch.setLevel(logging.INFO) 
```

还要注意“格式化程序”的概念。您可以为不同的处理程序设置不同的日志格式。

如果您至少在您的应用程序中创建了一个流处理程序，那么它将不再警告您尚未定义处理程序。

对于 python 2.7+，该`logging`模块包括一个`NullHandler`. 它旨在在库（例如您的数据库库）中用作默认处理程序，当最终用户在没有任何日志记录处理程序的情况下使用库时（如您所做的那样），它可以消除错误。因此，如果您根本不关心日志记录，只是想使其静音，您可以`NullHandler`在自己的代码中添加 a。建议实际设置日志记录，但这只是另一种选择：

[将 NullHandler 添加到记录器](http://docs.python.org/2/howto/logging.html#configuring-logging-for-a-library)

```
import logging
logging.getLogger('spam_application').addHandler(logging.NullHandler()) 
```

# ios - AVAssetWriter 记录设置不像 AVAudioRecorder 那样工作

> ID：11191403
> 
> 赞同：0
> 
> 时间：2012-06-25T14:36:30.730
> 
> 标签：ios, audio, avassetwriter

我已经成功地使用这些录制设置来创建格式化为所需格式的音频。然而，这些设置似乎只适用于 AVAudioRecorder。当我使用 AVAssetWriter 尝试它们时，我收到一条错误消息，指出 AVLinearPCMBitDepthKey 需要 AVLinearPCMBitFloatKey 但是当我添加它时说它不允许“ulaw”。我的问题是为什么 AVLinearPCMBitDepthKey 在一台录音机中工作正常，而在另一台录音机中却不行？

```
[recordSettings setObject:[NSNumber numberWithInt: kAudioFormatULaw] forKey: AVFormatIDKey];        
        [recordSettings setObject:[NSNumber numberWithFloat:8000.0] forKey: AVSampleRateKey];//was 44100.0
        [recordSettings setObject:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey];
        [recordSettings setObject:[NSNumber numberWithInt:8000] forKey:AVEncoderBitRateKey];//was 64000
        [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
        [recordSettings setObject:[NSNumber numberWithInt: AVAudioQualityLow] forKey: AVEncoderAudioQualityKey]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:03:55.767

根据 Apple 支持：因此这是错误 - 文件已创建，许多示例已成功写入，然后附加开始由于某种未知原因而失败。

该错误似乎只发生在这些设置和 AVAssetWriter

AudioQueue 应该用于 ulaw 音频

# installation - 在没有 VSTO 自动更新的情况下更新 VSTO Word Addin（用户没有安装权限）

> ID：11191404
> 
> 赞同：1
> 
> 时间：2012-06-25T14:36:34.613
> 
> 标签：installation, ms-word, windows-installer, vsto, clickonce

我想为我创建的单词更新一个 VSTO 插件，而不让 VSTO 自动更新启动。事实上，我的最终用户没有足够的安装权限。

我只想更新它，而不是安装，因为第一次安装将通过具有管理员权限的 VS 发布文件夹中的 vsto 安装来完成。

要更新，我复制

```
MyWordAddIn.dll  
MyWordAddin.dll.manifest 
```

从发布文件夹到安装了我的插件的 appData 文件夹。

当我启动与我的 VSTO 文件链接的 word 文档时。我有一个错误

![在此处输入图像描述](../Images/9c93af3e4e46e8a986493460e3e83931.png)

对不起法语，它说已经安装了另一个版本。

但是当我第二次，第三次启动它时，我没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:50:49.660

您似乎没有禁用 ClickOnce 在应用程序启动时自动安装更新。这可以解释为什么您的应用程序检测到发布文件夹中有新版本并尝试安装更新。然后，发生错误是因为您已经手动更新了 appData 文件夹中的 DLL，所以当它看到发布文件夹包含具有相同版本号的 DLL 时，它会给出错误说明它已经安装。

您可以通过进入 VS 中启动项目的设置，单击发布选项卡，然后按更新按钮并将其设置为从不检查更新来禁用自动更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T23:45:15.297

仅供参考，ClickOnce 安装本身不需要管理权限。先决条件可能，但实际 ClickOnce 应用程序的安装没有。这就是它安装在用户配置文件下的原因。因此，一旦用户安装了先决条件，您就可以使用自动更新，除非在您的情况下，用户甚至无法写入自己的配置文件文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:19:43.853

您也可以从命令提示符处运行以下命令：

```
rundll32 dfshim CleanOnlineAppCache 
```

您无需更改任何更新设置。在指定的更新间隔内找到任何较新的版本时，都会从指定的位置进行更新。

# web-services - 从 WebService 调用下一个结果

> ID：11191406
> 
> 赞同：0
> 
> 时间：2012-06-25T14:36:38.477
> 
> 标签：web-services, windows-phone-7

我开发 WP7 应用程序，我正在从 web 服务调用最后 20 个结果，我想知道当用户转到列表框末尾时如何调用下一个 20？

我找到了一些如何识别用户何时到达列表末尾的主题，但我正在努力如何重新调用 WebService 并要求下一个条目。

编辑：

好吧，事情就是这样。在我的 API 中，我有两个选项： - 获取一些结果（如 10、20、30），然后将它们全部显示在列表中 - 第二个选项是要求 API 在每页上给我 3 页 20 条记录

考虑第二个选项：好吧，我只能显示 1/3 页面，然后当用户关闭时调用另一个页面（已经存储在手机上），但这没有任何意义，因为用户将下载所有记录（即使他不想看到更多比前五...

唯一的想法是调用下一个结果，但不知道如何在某些时候重新调用 web 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:54:09.700

您的问题似乎更多的是与网络服务相关，而不是与 Windows 手机相关。因为如果您从 Web 服务获取一些数据，那么理想情况下，Web 服务提供商应该为您提供一些关于如何获取下一个/上一个记录或条目的文档。

以下是来自 Twitter API 的两个链接，它们为您提供了有关在页面中获取数据的一些想法。

[获取 home_timeline 数据](https://dev.twitter.com/docs/api/1/get/statuses/home_timeline)

[使用时间线](https://dev.twitter.com/docs/working-with-timelines)

这是另一个链接，它提供了有关如何[在 Silverlight 应用程序中实现分页的](http://www.codeproject.com/Articles/270972/Paging-Data-from-the-Server-with-Silverlight)想法（我不确定此方法与 WP 应用程序兼容到什么程度）

如果此数据无法回答您的问题，请使用一些附加数据更新您的问题，例如您使用哪个 url 来获取前 20 条记录等

# python - 使用 pywin32 从单独的 PowerPoint 文件添加幻灯片

> ID：11191408
> 
> 赞同：0
> 
> 时间：2012-06-25T14:36:43.090
> 
> 标签：python, powerpoint, pywin32

我有一个 PowerPoint 文件列表，我想打开每个文件并将它们的每张幻灯片插入到单个模板演示文稿中。任何 pywin32 文档或建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:54:39.513

这是python的语法。在互联网的深处挖掘后找到了它

```
template.Slides.InsertFromFile(os.getcwd() + '\\' + fileName, template.Slides.Count) 
```

# javascript - JS\Jquery - 对变量使用缓动函数

> ID：11191409
> 
> 赞同：0
> 
> 时间：2012-06-25T14:36:43.943
> 
> 标签：javascript, jquery, animation, easing, jquery-easing

我有一个基于 CSS\JS 的仪表，带有一个使用 jQuery.easing 函数进行动画处理的表盘。我想要一个随表盘升高的数字计数器。为此，我需要在变量上同时应用相同的缓动函数（“动画”一个不是属性的数字）

有没有办法做到这一点？

谢谢

# python - 在 OS X Lion 上安装 Cairo

> ID：11191411
> 
> 赞同：2
> 
> 时间：2012-06-25T14:36:47.493
> 
> 标签：python, macos, cairo, pycairo

当我尝试使用 Python 2.7.2 在 OS X Lion 上安装 Cairo 时，它不起作用，我可以构建和安装它，但是在 python 中导入 cairo 时找不到它。我已经尝试了[如何在 Mac OSX 上默认安装 PyCairo 1.10](https://stackoverflow.com/questions/6886578/how-to-install-pycairo-1-10-on-mac-osx-with-default-python)，它只会产生这个错误

```
 "_cairo_xlib_surface_get_width", referenced from:
  _xlib_surface_get_width in surface.c.1.o

ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/l9/71rhp2vs7w34bm4x6mfwms500000gn/T//cc1fcO7s.out (No such file or directory)
Waf: Leaving directory `/Users/andrewlynch/Downloads/py2cairo-1.10.0/build_directory'
Build failed
 -> task failed (exit status 1): 
    {task 4550820944: cshlib cairomodule.c.1.o,context.c.1.o,font.c.1.o,path.c.1.o,pattern.c.1.o,matrix.c.1.o,surface.c.1.o -> _cairo.so}
['/usr/bin/gcc', 'src/cairomodule.c.1.o', 'src/context.c.1.o', 'src/font.c.1.o', 'src/path.c.1.o', 'src/pattern.c.1.o', 'src/matrix.c.1.o', 'src/surface.c.1.o', '-o', '/Users/andrewlynch/Downloads/py2cairo-1.10.0/build_directory/src/_cairo.so', '-L/usr/local/Cellar/cairo/1.10.2/lib', '-lcairo', '-lpython2.7', '-dynamiclib', '-Wl,-F.', '-arch', 'i386', '-arch', 'x86_64', '-Wl,-F.', '-Wl,-F.', '-arch', 'i386', '-arch', 'x86_64', '-arch', 'i386', '-arch', 'x86_64']} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T18:24:32.343

我在尝试在 OSX Lion 上安装 PyCairo 时也有类似的经历。默认安装尝试使用架构 i386 进行安装。您需要将其更改为 64 位架构 x86_64。

我尝试将**CFLAGS**和**CXXFLAGS**设置为“arch x86_64”，但这不起作用。为了让它工作，我必须将**ARCHFLAGS**设置为这个值。

```
export ARCHFLAGS="-arch x86_64" 
```

希望这将为您解决问题。

# ios - iPad 2 上的情节提要布局不正确

> ID：11191412
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:36:51.670
> 
> 标签：ios, ipad, uistoryboard

我正在尝试使用界面构建器在 Storyboard 上布置对象，但是当我在 iPad2 上运行应用程序时，布局被弄乱了，并且对象没有出现在它们应该出现的位置。所有对象都在那里，但它们是水平移动的，并且像素数不同！例如，我有两个相互重叠的 ImageView（一个是 100x100，一个是 75x75 居中），但是当应用程序在 iPad 上运行时，它们都会在屏幕上水平移动不同的距离！

我想添加屏幕截图，但不幸的是我不能出于隐私原因。

我知道这很模糊，但有人对从哪里开始解决这个问题有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:44:19.513

当我第一次制作 iPad 应用程序时，我也遇到了这个问题。

尝试摆弄情节提要中界面元素的一些“支柱和弹簧”。为此，请选择一些界面元素，然后在右侧面板上转到尺寸检查器并尝试使用“自动调整大小”矩形进行一些操作。

![尺寸检查器 XCode](../Images/2af1bb234f7d6361e4af5ffff554342d.png)

希望能帮助到你！

# .net - 如何订购列表（列表（字符串））

> ID：11191416
> 
> 赞同：0
> 
> 时间：2012-06-25T14:37:19.760
> 
> 标签：.net, vb.net, list, sorting

我在 vb.net 中有一个 list(of list(of string))，它是一个包含列表的列表，其中包含 5 个字符串列表项。

我想按包含列表中的第二项对列表进行排序，但我不知道 .sort 方法中需要什么参数。我需要输入什么作为参数。我读了一些关于编写比较器函数并将其放在括号中的内容，但我不明白它是如何工作的。

```
dim multiList as list(of list(of string))

multiList.sort(compare second item in lists) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:07:52.160

根据非默认标准对列表进行排序的最简单方法是编写一个函数，给定任何一对项目，如果第一个大于第二个，则返回一个正整数，如果第二个项目大于第一个，或者如果两个条件都不适用，则为零（意味着项目具有相同的等级——不一定它们是“相等的”）。例如，如果您是绝对肯定的，则列表列表中的每个内部列表都将有一个非空字符串作为其第二项：

```
    共享函数 CompareLists（L1 作为列表（字符串），L2 作为列表（字符串））作为整数
        返回 L1(1).CompareTo(L2(1))
    结束功能

```

然后，当您要执行排序时：

```
    Array.Sort(myArray, AddressOf CompareLists)

```

如果某些列表可能没有有效的内部列表，则必须添加代码来处理所有可能的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:13:27.490

您可以将 lambda 表达式传递给 Sort 方法：

```
multilist.Sort(Function(x, y) x(1).CompareTo(y(1))) 
```

这将按每个包含列表的第二个元素对列表进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:11:36.333

我不完全理解你想要做什么，但你看过排序列表吗？

```
Dim list As New SortedList(Of Integer, String) 
```

它通过按键（在这种情况下为整数）排序​​来工作，正如我所说的，我不确定你的要求是什么，但也许你可以用它来解决你的问题。

# c# - 如何在单元测试中检查模型属性

> ID：11191418
> 
> 赞同：4
> 
> 时间：2012-06-25T14:37:27.437
> 
> 标签：c#, asp.net-mvc-3, unit-testing, razor, moq

我有一个`Action`如下：

```
public ActionResult SaveAndExit()
{
    ViewModel1 viewModel = new ViewModel1();

    return View("Index", viewModel);
} 
```

在单元测试中，我想检查`Reg`viewModel 中的视图是否为空。请有任何建议

测试：

```
//act
var result = controller.SaveAndExit(viewModel) as ViewResult;

//assert
//Assert.IsNotNull(!result.Model["Reg"].Equals(null)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T14:47:48.213

我倾向于按如下方式编写断言（在此处使用 Microsoft 测试框架断言 - 您没有指定 nunit）：

```
// Act
ActionResult result = controller.SaveAndExit(viewModel);

// Assert
Assert.IsInstanceOfType(result, typeof(ViewResult));
ViewResult viewResult = (ViewResult)result;

Assert.IsInstanceOfType(viewResult.Model, typeof(ViewModel1));
ViewModel1 model = (ViewModel1)viewResult.Model;

Assert.IsNotNull(model.Reg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:44:12.677

单元测试应该测试业务逻辑。您不需要编写单元测试来检查某些属性是否为空。

# facebook - 在 Flash AS3 中使用 Facebook Graph API 发布到相册

> ID：11191419
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:37:30.267
> 
> 标签：facebook, flash, facebook-graph-api, for-loop

我在这里遇到了 1 个问题，我使用我的应用 ID 在我的服务器上上传了“在 Flash AS3 中使用 Facebook Graph API 发布到相册”示例，但是当我尝试登录时，它无法登录并且不显示我的名字，请帮助我做…？

**这是示例帖子** [http://permadi.com/blog/2011/02/using-facebook-graph-api-in-flash-as3-to-post-to-photo-album/comment-page-1/#评论 1782](http://permadi.com/blog/2011/02/using-facebook-graph-api-in-flash-as3-to-post-to-photo-album/comment-page-1/#comment-1782)

**这是示例 URL** [http://www.permadi.com/tutorial/as3-save-photo-to-facebook-album/?test](http://www.permadi.com/tutorial/as3-save-photo-to-facebook-album/?test)

并且示例 URL 工作正常:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:09:21.673

给定的链接还告诉您为什么该示例不起作用，因为它是使用 API 1.5 编译的，并且 Facebook API 已经更新和更改。

我的建议是下载最新版本 1.8.1 并按照上面链接中的说明进行操作。

从升级到 1.8.1 必须遵循的一些更改

将 response.session 更改为 response.authResponse。将 .js 中的 getSession 更改为 getAuthResponse。perms 现在称为范围。

“重定向”现在没用了，所以只需从 loginHandle 中删除

```
function handleLogin(response:Object, fail:Object):void {
if (response == null)  {
//resultTxt.text += 'Error login session';
ExternalInterface.call('redirect'); // useless <-- remove it
return;
}
changeToLoginState();
} 
```

我看到许多人询问 loginHandler 在身份验证完成时不会调用的另一件重要的事情。几乎原因是您的 SWF 对象具有热给定的 id 或名称。请记住通过 SWFObject 库提供名称和 ID。请参阅下面的示例，重点关注粗体文本。

```
var flashvars = {};
var params = {allowScriptAccess: "always",wmode: "transparent"};
**var attributes = {id:"main",name:"main" };**
swfobject.embedSWF("main.swf","flashContent", "810", "525", "11.0.0", "expressInstall.swf",flashvars, params, attributes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:11:40.400

您的问题不是很清楚，这可能是它被否决的原因。

facebook API 是一个不断变化的目标，许多与 Facebook 集成的旧 Flash 框架使用旧的已弃用 API。

我发现这个框架非常干净和清晰，并且可以与 Facebook 更新的 API 一起使用 - [https://github.com/Dareville/Facebook-Graph](https://github.com/Dareville/Facebook-Graph)

祝你好运

# node.js - 使用 Jade 在变量中渲染 HTML

> ID：11191421
> 
> 赞同：63
> 
> 时间：2012-06-25T14:37:38.990
> 
> 标签：node.js, pug

我有一些文本存储在一个包含一些 HTML 的变量中。例如，帽子里的<b>猫</b>。但是，当我在 Jade 中渲染它时，它会显示标签而不是渲染格式。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-06-25T14:42:51.787

> 为安全起见，由 = 缓冲的代码默认转义，但是要输出未转义的返回值，您可以使用 !=

```
p!= aVarContainingHTML 
```

[哈巴狗医生](https://pugjs.org/language/code.html)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-03-24T11:42:22.307

您需要的语法是：

```
!{yourJsVariable} 
```

如果你使用`#{yourJsVariable}`它会显示 < >，但使用`!{}`它不会。

# javascript - Selenium IDE - 无法复制电子邮件

> ID：11191426
> 
> 赞同：0
> 
> 时间：2012-06-25T14:37:56.440
> 
> 标签：javascript

嗨，我阅读了下面的文章，使用 Selenium IDE 将值从一个字段复制到另一个字段，但该代码没有做任何事情

[Selenium：如何将值从 field1 复制到 field2？](https://stackoverflow.com/questions/7808378/selenium-how-to-copy-values-from-field1-to-field2)

我有 2 个电子邮件字段 -

Email1 - 输入我正在使用的电子邮件地址 - javascript{"Test+" + Math.floor(Math.random()*11111) + "@test.com";}

Email2 - 验证电子邮件 - 我必须从 Email1 输入相同的电子邮件到我尝试上述代码的该字段，这对我没有帮助。

你能帮我处理这段代码吗？以上是我的场景。请帮我。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T12:42:59.413

在将值输入每个字段之前先尝试使用 StoreEval 命令。

例如，

```
storeEval|["Test+" + Math.floor(Math.random()*11111) + "@test.com"]|email
type     |//*[@fieldname='email1']                                 |${email}
type     |//*[@fieldname='email2']                                 |${email} 
```

# sql - NHibernate：反向存在标准

> ID：11191435
> 
> 赞同：1
> 
> 时间：2012-06-25T14:38:15.430
> 
> 标签：sql, nhibernate, nhibernate-criteria, queryover

我在查询`Foo`。`Foo`没有`IList<FooBar>`财产（不幸的是）。`FooBar`有一个`Foo`属性（但不是 a `Bar`）， Bar 有一个`IList<FooBar>`. 我需要`Foo`存在 a 的所有 s ，其`FooBar`对应`Bar`的字段等于今天。`Bar``Date`

我不是 Criteria API 的真正专家，但使用与否不是我的选择。

* * *

**编辑：**`QueryOver`我对API 进行了同样的尝试，并做到了这一点：

```
 var q1 = session.QueryOver<Foo>()
                 .WithSubquery.WhereExists<Bar>(
                     session.QueryOver<Bar>()
                            .Where(b => b.Date == DateTime.Today)
                            .JoinQueryOver<FooBar>(b => b.FooBars)
                            .Where(fb => fb.Foo == /*???*/ ))
                 .List<Foo>(); 
```

我写什么代替`/*???*/`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:00:55.123

早期免责声明 - 我现在没有安装 NHibernate，所以这是未经测试的，但我会用这样的方法来处理它：

```
var foos = session.CreateCriteria<Bar>("bar")
                      .CreateCriteria("FooBars", "foobar")
                      .Add(
                         Restrictions.Eq(
                            "bar.Date", 
                            DateTime.Today.ToString("d", CultureInfo.InvariantCulture)
                         ))
                      .SetProjection(Projections.Property("foobar.Foo"))
                      .List<Foo>(); 
```

# c# - 在静态方法线程内的 HttpContext.Current 上使用 foreach 是否安全？

> ID：11191437
> 
> 赞同：3
> 
> 时间：2012-06-25T14:38:19.523
> 
> 标签：c#, asp.net, static, foreach, thread-safety

牢记这些

- [HttpContext.Current](https://stackoverflow.com/questions/9465003/confusion-over-system-web-httpcontext-current)

-[前锋](https://stackoverflow.com/questions/512166/c-sharp-the-foreach-identifier-and-closures)

我很难解决这个问题......这段代码在 ASP.NET 中是“线程安全的”吗？

```
public static bool IsCookieMissing()
{
    foreach (string cookieKey in HttpContext.Current.Request.Cookies.AllKeys)
    {
        if (cookieKey.EndsWith("cookie_name"))
        {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:46:03.087

从技术上讲，是的，这段代码是线程安全的。

[HttpContext.Current](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.current.aspx)返回与当前请求关联的上下文。尽管 IIS 可能使用多个线程来处理给定的请求（[线程敏捷性](https://web.archive.org/web/http://blog.idm.fr/2010/03/aspnet-thread-agility-or-why-threadstatic-should-not-be-used.html)），但它不会并行运行这些线程（它只会在异步 I/O 期间切换线程）。

因此，不会有超过一个线程`HttpContext.Current.Request.Cookies`同时访问，这里不需要加锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:44:12.567

> 这段代码在 ASP.NET 中是“线程安全的”吗？

这取决于你期望它做什么。它很可能会执行您期望的操作，因此它是“线程安全的”，除非您正在启动自己的线程来调用它。是调用它时`HttpContext.Current`的*当前HttpContext。*不需要您对链接到的[这个问题](https://stackoverflow.com/questions/512166/c-sharp-the-foreach-identifier-and-closures)中的问题的关注- 您没有使用任何闭包。

# javascript - JavaScript - 构造函数中的继承

> ID：11191438
> 
> 赞同：2
> 
> 时间：2012-06-25T14:38:22.937
> 
> 标签：javascript, inheritance

对于 JavaScript 项目，我们希望引入对象继承以减少代码重复。但是，我不能完全按照我想要的方式工作，需要一些帮助。

我们使用模块模式。假设有一个超级元素：

```
a.namespace('a.elements.Element');
a.elements.Element = (function() {
    // public API -- constructor
    Element = function(properties) {
        this.id = properties.id;
    };

    // public API -- prototype
    Element.prototype = {
        getID: function() {
            return this.id;
        }
    };

    return Element;
}()); 
```

还有一个继承自这个超级元素的元素：

```
a.namespace('a.elements.SubElement');
a.elements.SubElement = (function() {
    // public API -- constructor
    SubElement = function(properties) {
        // inheritance happens here
        // ???
        this.color = properties.color;
        this.bogus = this.id + 1;
    };

    // public API -- prototype
    SubElement.prototype = {
        getColor: function() {
            return this.color;
        }
    };

    return SubElement;
}()); 
```

您会注意到我不太确定如何实现继承本身。在构造函数中，我必须能够将参数传递给超级对象构造函数并创建一个超级元素，然后用于创建继承的元素。我需要一种（舒适的）可能性来访问新对象的构造函数中的超级对象的属性。理想情况下，我可以对超级对象进行操作，就好像它是新对象的一部分一样。

我还希望能够创建一个新的 SubElement 并调用`getID()`它。

我想要完成的似乎是传统的基于类的继承。但是，我想使用原型继承来做到这一点，因为那是 JavaScript 方式。这甚至可行吗？

提前致谢！

编辑：修复了评论中建议的私有变量的使用。EDIT2：代码的另一个更改：重要的`id`是可以从`SubElement`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:04:08.913

试试这段代码（继承方法取自[这里](http://javascript.info/tutorial/inheritance)）：

```
function inherit(proto) {
  function F() {};     
  F.prototype = proto;
  return new F();
}

a.namespace('a.elements.SubElement');
a.elements.SubElement = (function() {
    // private properties
    var color;

    // public API -- constructor
    SubElement = function(properties) {
        color = properties.color;
    };

    //inherit from parent
    SubElement.prototype = inherit(a.elements.Element);

    //add new methods to the prototype

    SubElement.prototype.getColor = function() {
            return color;
    }

    SubElement.prototype.doSomethinkWithID = function() {
            var id = this.getID();
    }

    return SubElement;
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:41:25.733

如果您愿意，可以使用 JavaScript 的原型继承来进行类类继承。[有关完整示例和讨论，请参阅此其他答案](https://stackoverflow.com/a/11072626/157247)，您可以轻松地将其融入您的模式。

# android - 如何使用从另一个类生成的视图？

> ID：11191442
> 
> 赞同：0
> 
> 时间：2012-06-25T14:38:56.500
> 
> 标签：android, view

AOSP 4.0.4 中的扩展状态栏布局有一个 TextView，在 XML 中看起来像这样

```
<com.android.systemui.statusbar.policy.DateView
    android:id="@+id/date"
    android:textAppearance="@style/TextAppearance.StatusBar.Date"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingTop="4dp"
    android:singleLine="true"
    android:gravity="center"
    android:visibility="visible" /> 
```

它由“frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/policy/DateView.java”生成

它被“frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java”夸大，如下所示：

```
ExpandedView expanded = (ExpandedView) View.inflate(context, R.layout.status_bar_expanded, null);
// stuff here
mDateView = (DateView) expanded.findViewById(R.id.date); 
```

我想通过另一个类设置它的可见性，我已经尝试了一些我在这里读过的东西，但都没有运气。我尝试的最后一件事是，在我的班级（也是 systemui 的一部分）中，添加以下内容：

```
TextView mDateView = (TextView) findViewById(R.id.date);
mDateView.setVisibility(View.GONE); 
```

但是，事实证明 mDateView 在我的班级中为空。有什么我想念的吗？我一直在寻找几个小时并在这里和那里尝试一些东西，但没有任何效果。我拥有中级 Java 技能，但我仍在努力拥抱来自 20 年过程语言的 OOP 事物。提前致谢。

我将 mDateView 的定义更改为如下所示：

```
private DateView mDateView;
DateView mDateView = (DateView) findViewById(R.id.date); 
```

但我仍然得到 mDateView 为空:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:43:03.090

最初我误解了您的问题，您可以在一个类中添加方法并通过另一个类访问它。

```
public static void hideDateView() {
        mDateView.setVisibility(View.GONE);
    } 
```

**您可以在PhoneStatusBar** .java中添加以下方法并稍后调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:23:01.290

我可以看到您有两个问题：

1）您需要将`Context`拥有您的内容传递给`View`您要在其中使用视图的类。

假设`Context`是`Activity`，那么您将使用`activity.findViewById(R.id.date)`.

2）如果你要使用`findViewById(R.id.date)`你需要确保你已经以某种方式将视图添加到你的视图层次结构中（膨胀它不会这样做，除非你特别告诉它）。该`inflate()`函数提供了一种方法来执行此操作，方法是传入父视图，而不是`null`后跟一个额外的布尔参数，该参数指定是否应将膨胀视图添加到父视图。

或者，您可以`parentView.addView(expanded)`在现有的充气电话之后说。

# android - 使用javacv android进行人脸识别

> ID：11191443
> 
> 赞同：1
> 
> 时间：2012-06-25T14:39:01.993
> 
> 标签：android, face-recognition, javacv

我曾尝试使用 javacv 人脸识别库。我可以成功识别两个静态图像，但方式不一致。它返回正确的结果，但相同的场景，不同的图像没有得到结果，它抛出了一个错误。

场景 1：相同的两个图像（即 imag1.png），在字节和高度和宽度方面相同的大小 场景 1 的结果：正确。

现在我正在改变图像。

场景 2：相同的两个图像（即 imag2.png），在字节和高度和宽度方面相同的大小 场景 2 的结果：抛出异常

```
Caused by: java.lang.RuntimeException: /home/saudet/workspace/android/OpenCV-2.3.1/modules/legacy/src/eigenobjects.cpp:1629: error: (-5) Different sizes of objects in function cvEigenDecomposite 
```

这个错误的解决方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:16:03.147

java cv人脸识别库是指样本中的FaceRecognition.Java还是opencv/javacv的contrib模块中的FaceRecognizer？

在第一个的情况下，FaceRecognition.java 在将位图转换为 IplImage 并将其传递给 cvEigenDecomposite 时，我遇到了同样的错误。

我很确定错误的含义是您的 IplImage 大小错误。我使用的是 At&T 数据库，所以我只是在将位图转换为 IplImage 之前调整了它的大小，然后它就可以工作了。

因此，在创建 IplImage 时，它​​们的大小可能不一样，或者出现了问题。

# html - 在标签外设置页面的背景图片

> ID：11191444
> 
> 赞同：1
> 
> 时间：2012-06-25T14:39:03.263
> 
> 标签：html, css

我正在尝试在标签之外设置网页的背景图片..请帮助我。我曾尝试在谷歌上搜索，但我看到的每个演示或示例都使用标签背景图像属性..

除了 CSS 中的标签之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:41:37.100

考虑到网页的可见、渲染部分，将背景放在网页之外的任何地方`body`都没有任何意义。`body`

要在网页上应用背景，您确实会使用以下`body`标签：

```
body
{
  background-image:url('..URL HERE..');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:43:24.907

是的，

步骤1：

创建一个带有 id 背景的 div 标签，`<div id="background"></div>` 并将其作为正文中的第一个元素。

第2步：

将您的图像标签放在 div 标签内，这样您就拥有了`<div id="background"><img src="someimg.jpg" alt="bgimage" />`

第 3 步：

在您的 CSS 文件中添加：

```
div#background
{
   position: fixed;
   top: 0px;
   left: 0px;
 }

 div#background img
 {
   width: 100%;
   height: 100%;
  }
body,html 
{
  padding: 0px;
  margin: 0px;
  border: none;
  width: 100%;
  height: 100%;
 } 
```

# xml - XSLT：按值分组

> ID：11191446
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:39:06.440
> 
> 标签：xml, xslt

我想在 integer = '4' 时使用 xslt 对下面的 xml 进行分组，然后循环遍历每个 dict，检查每个元素是否有 integer = 5，然后变量应该设置为仅传递。如果任何整数值是7 状态为失败。

请问有什么建议吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList1.0.dtd">
<plist version="1.0">
<dict>
<key>All Samples</key>
<array>
<dict>
<key>LogType</key>
<string>Start</string>
<key>Message</key>
<string>START:Certificate and Genre filter tests</string>
<key>Timestamp</key>
<date>2012-06-25T10:49:02Z</date>
<key>Type</key>
<integer>4</integer>
</dict>
<dict>
<key>LogType</key>
<string>Pass</string>
<key>Message</key>
<string>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</string>
<key>Timestamp</key>
<date>2012-06-25T10:49:13Z</date>
<key>Type</key>
<integer>5</integer>
</dict>
<dict>
<key>LogType</key>
<string>Pass</string>
<key>Message</key>
<string>START: certificate tests filter tests</string>
<key>Timestamp</key>
<date>2012-06-25T10:49:02Z</date>
<key>Type</key>
<integer>4</integer>
</dict>
<dict>
<key>LogType</key>
<string>Pass</string>
<key>Message</key>
<string>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</string>
<key>Timestamp</key>
<date>2012-06-25T10:49:13Z</date>
<key>Type</key>
<integer>5</integer>
</dict>
<dict>
<key>LogType</key>
<string>Fail</string>
<key>Message</key>
<string>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</string>
<key>Timestamp</key>
<date>2012-06-25T10:49:13Z</date>
<key>Type</key>
<integer>7</integer>
</dict>
</array>
</dict>
</plist>

expected result  in table view with format

| Test Name | test steps |   Test result|
START : GENRE FILTER TEST |    | FAIL ( background color to red)
test step1 | Navigation title bar should contain genre in card view | PASS
test step2 | Navigation title bar should contain genre in card view | FAIL

|START : certificate tests filter tests |    | PASS ( background color to green)
|test step 1 | Navigation title bar should contain genre in card view | PASS 
```

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:54:35.200

实现此目的的一种方法可能是定义一个键以通过整数 = 4 的第一个前同级查找**dict元素**

```
<xsl:key 
   name="test" 
   match="dict[integer[preceding-sibling::key[1]='Type']!=4]" 
  use="generate-id(
       preceding-sibling::dict[integer[preceding-sibling::key[1]='Type']=4][1]
    )" /> 
```

**然后，您首先将所有dict**元素与 integer = 4匹配

```
<xsl:apply-templates 
   select="dict
     [key='All Samples']/array/dict[integer[preceding-sibling::key[1]='Type']=4]" /> 
```

然后你可以编写一个模板，一个存在“失败”元素的模板，并相应地处理它们

```
<xsl:template 
   match="dict
     [key('test', generate-id())[string[preceding-sibling::key[1]='LogType']='Fail']]"> 
```

所有其他匹配的**dict**元素都是成功元素。

然后输出每个单独测试的结果，你可以在键中查找它们

```
<xsl:apply-templates select="key('test', generate-id())" mode="results" /> 
```

注意**模式**是必需的，因为您将有多个模板匹配**dict**元素，因此您需要区分它们。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes"/>
   <xsl:key name="test" match="dict[integer[preceding-sibling::key[1]='Type']!=4]" use="generate-id(preceding-sibling::dict[integer[preceding-sibling::key[1]='Type']=4][1])"/>

   <xsl:template match="plist">
      <xsl:variable name="dicts" select="dict[key='All Samples']/array/dict[integer[preceding-sibling::key[1]='Type']=4]"/>       
      <table>
         <tr>
            <td>
               <xsl:text>Test Name</xsl:text>
            </td>
            <td>
               <xsl:text>Test Steps</xsl:text>
            </td>
            <td>
               <xsl:text>Test Result</xsl:text>
            </td>
         </tr>
      <xsl:apply-templates select="$dicts"/>
      </table>
      <xsl:variable name="fails" select="count($dicts[key('test', generate-id())[string[preceding-sibling::key[1]='LogType']='Fail']])" />
      <xsl:value-of select="concat('total tests passed = ', count($dicts) - $fails)" />
      <br />
      <xsl:value-of select="concat('total tests failed = ', $fails)" /> 
   </xsl:template>

   <xsl:template match="dict[key('test', generate-id())[string[preceding-sibling::key[1]='LogType']='Fail']]">
      <xsl:call-template name="dict">
         <xsl:with-param name="type" select="'Fail'"/>
         <xsl:with-param name="colour" select="'#FF0000'" />
      </xsl:call-template>
   </xsl:template>

   <xsl:template match="dict" name="dict">
      <xsl:param name="type" select="'Pass'"/>
      <xsl:param name="colour" select="'#00FF00'" />
      <tr>
         <td>
            <xsl:value-of select="string[preceding-sibling::key[1]='Message']"/>
         </td>
         <td>
         </td>
         <td style="background-color:{$colour}">
            <xsl:value-of select="$type"/>
         </td>
      </tr>
      <xsl:apply-templates select="key('test', generate-id())" mode="results" />
   </xsl:template>

   <xsl:template match="dict" mode="results">
      <tr>
         <td>
            <xsl:value-of select="concat('Test Step ', position())" />
         </td>
         <td>
            <xsl:value-of select="string[preceding-sibling::key[1]='Message']"/>
         </td>
         <td>
            <xsl:value-of select="string[preceding-sibling::key[1]='LogType']"/>
         </td>
      </tr>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的 XML 示例时，将输出以下内容

```
<table>
  <tr>
     <td>Test Name</td>
     <td>Test Steps</td>
     <td>Test Result</td>
  </tr>
  <tr>
     <td>START:Certificate and Genre filter tests</td>
     <td/>
     <td style="background-color:#00FF00">Pass</td>
  </tr>
  <tr>
     <td>Test Step 1</td>
     <td>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</td>
     <td>Pass</td>
  </tr>
  <tr>
     <td>START: certificate tests filter tests</td>
     <td/>
     <td style="background-color:#FF0000">Fail</td>
  </tr>
  <tr>
     <td>Test Step 1</td>
     <td>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</td>
     <td>Pass</td>
  </tr>
  <tr>
     <td>Test Step 2</td>
     <td>Navigation title bar should contain genre in card view : ACTION &amp; ADVENTURE</td>
     <td>Fail</td>
  </tr>
</table>
total tests passed = 1 
<br/>
total tests failed = 1 
```

请注意使用命名模板来为“成功”和“失败”行使用共享代码。

# c++ - 带有模板的 C++ 中的策略模式

> ID：11191447
> 
> 赞同：3
> 
> 时间：2012-06-25T14:39:09.680
> 
> 标签：c++, templates, strategy-pattern

这是 C++ 中策略模式的示例实现：

具体策略.h

```
class ConcreteStrategy {
public:
    ConcreteStrategy();
    ~ConcreteStrategy();
    const OtherObject* doSomething(const OtherObject &obj);
}; 
```

具体策略.cpp

```
#include "ConcreteStrategy.h"

ConcreteStrategy::ConcreteStrategy() { // etc. }
ConcreteStrategy::~ConcreteStrategy() { // etc. }
const OtherObject* ConcreteStrategy::doSomething(const OtherObject &obj) { // etc. } 
```

我的上下文.h

```
template <class Strategy> class MyContext {
    public:
        MyContext();
        ~MyContext();
        const OtherObject* doAlgorithm(const OtherObject &obj);
    private:
        Strategy* _the_strategy;
}; 
```

我的上下文.cpp

```
#include "MyContext.h"

template <typename Strategy>
MyContext<Strategy>::MyContext() {
    _the_strategy = new Strategy;
}

template <typename Strategy>
MyContext<Strategy>::~MyContext() {
    delete _the_strategy;
}

template <typename Strategy>
const OtherObject* MyContext<Strategy>::doAlgorithm(const OtherObject &obj) {
    obj = _the_strategy(obj);
    // do other.
    return obj;
} 
```

主文件

```
#include "MyContext.h"
#include "ConcreteStrategy.h"
#include "OtherPrivateLib.h"

int main(int argc,char **argv) {
    OtherObject* obj = new OtherObject;
    MyContext<ConcreteStrategy>* aContext = new MyContext<ConcreteStrategy>;
    obj = aContext.doAlgorithm(obj);

    // etc.

   delete aContext;
   delete obj;

   return 0;
} 
```

这个实现对吗？这是我在 C++ 中使用模板的第一种方法，我有一些疑问，特别是关于上下文 (MyContext) 中模板对象 (Strategy) 的构造和销毁。

更新：我在编译时有这个错误：

```
undefined reference to `MyContext<Strategy>::MyContext()' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:15:54.043

首先，类模板实现应该放在头文件或包含在头文件中的文件中，而不是放在要编译的 .cpp 文件中。编译器需要查看模板代码才能创建`MyContext<ConcreteStrategy>`所需的`main`. 这是编译器错误的原因。

其次，与模板无关，您可以无缘无故地使用动态分配的对象。例如，我会更改`doSomething`并按`doAlgorithm`值返回

```
OtherObject doSomething(const OtherObject &obj); 
```

并从 main 中删除所有用途`new`，例如：

```
int main(int argc,char **argv) {
    OtherObject obj;
    MyContext<ConcreteStrategy> aContext;
    obj = aContext.doAlgorithm(obj);
    return 0;
} 
```

如果你真的必须使用动态分配的对象，那么我建议使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，特别是 C++11 的[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T07:10:56.717

将算法封装在类层次结构中，让该算法的客户端持有指向该层次结构的基类的指针，并将对该算法的所有请求委托给该“匿名”包含的对象，称为[策略模式](http://www.cpphub.com/2015/11/design-patterns-strategy-pattern-in-c.html)

# c# - 如何使用 Directshow.Net 放大（缩放）视频的一部分并将其覆盖在原始视频上

> ID：11191449
> 
> 赞同：0
> 
> 时间：2012-06-25T14:39:12.667
> 
> 标签：c#, directshow, directshow.net

我目前使用directshow.net 开发了一个媒体播放器。视频在左上角有一个小时间戳，非常小。我需要放大它，以便在视频播放时它是可见/可读的。

我试过使用：

```
IVMRFilterConfig
IVMRMixerControl 
```

并播放相同视频的两个窗口，但我似乎无法放大一个窗口并仅显示时间戳部分。

还有其他方法可以实现吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:40:13.900

I have solved (sort of) my problem by letting two independant video windows run at the same time. Thus window1 displays the whole image and window2 is a small window in the corner of the screen and it only displays the date time zoomed in.

I just had to make sure they play and stop at the same time and when I used frame skips, that both videos are treated.

# c# - C#异步调用方法定期

> ID：11191451
> 
> 赞同：9
> 
> 时间：2012-06-25T14:39:33.510
> 
> 标签：c#, multithreading, asynchronous, timer

应用程序的主线程正在做一些工作。

还有一个计时器，它应该每 10 分钟调用一些应该异步运行的方法。

你能给我一个很好的例子吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T14:43:45.907

我不建议使用带有循环和睡眠的显式线程。这是不好的做法和丑陋的。为此目的有计时器类：

如果这不是 GUI 应用程序，那么您可以使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)在不同的线程上定期执行代码。

如果这是一个 WinForms/WPF 应用程序，请分别查看[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)和[System.Windows.Threading.DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)。这些很方便，因为它们在 GUI 线程上执行代码，因此不需要显式`Invoke`调用。

这些链接还包含每个链接的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:41:38.957

最简单的方法是调用*一个*在动作之间休眠 10 分钟的大函数。这不会阻塞任何东西，因为它在另一个线程中。

在 .NET 4 中，您可以使用`Task`该类执行此操作：

```
Task t = Task.Factory.StartNew(() => { /* your code here */ });
// or
Task t = Task.Factory.StartNew(YourFunctionHere);

void YourFunction() {
    while (someCondition) {
        // do something
        Thread.Sleep(TimeSpan.FromMinutes(10));
    }
} 
```

（此代码未经测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:43:09.047

使用 BackgroundWorker 线程。

```
void FireTask()
{
    BackgroundWorker bw = new BackgroundWorker();
    bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    bw.RunWorkerAsync();
}

void bw_DoWork(object sender, DoWorkEventArgs e)
{
    //Your job   
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-25T14:43:57.903

启动另一个运行循环的线程

循环内部；睡10分钟然后调用你的方法，重复

# ios - 为什么 ARC 完全使用自动释放？

> ID：11191452
> 
> 赞同：4
> 
> 时间：2012-06-25T14:39:34.637
> 
> 标签：ios, automatic-ref-counting

我在 ARC 下运行**没有自动释放池的代码：**

```
- (NSString*) outName {
    if (!outName) {
        outName = [[NSString alloc] initWithFormat:@"whatever"]; // or stringWithFormat
    }
    return outName;
} 
```

调试器说它 每次都在泄漏**单个实例而没有适当的池。** `outName`

如果我将代码更改为

```
- (NSString*) outName {
    if (!outName) {
        outName = @"whatever";
    }
    return outName;
} 
```

这是我做不到的（这个例子显然是简化的）。此外，如果我在调用代码中创建一个自动释放池（我想避免），泄漏消息就会消失。

为什么 ARC 坚持自动释放这个保存在`strong`属性中的对象？更重要的是，我怎样才能避免这个警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:03:46.387

这是一个所有权问题。

让我们谈谈您首先分配给自己的 NSString。当你分配一个对象时，堆中的内存是为那个对象保留的（除非你 allocWithZone: 到另一个位置）。保留计数隐含地为 1，并且您拥有该对象，即您有责任在完成后释放它。如果您要返回一个指向该对象的指针，即返回该对象，您并没有完全放弃确保该对象不泄漏的责任。您不能释放它，因为保留计数将变为 0，并且该对象将被释放。你自动释放它，确保在你的运行循环结束时（或更早），对象将被释放并可能被释放。如果返回的对象需要存活更长时间，调用函数负责保留返回的对象。

如果没有自动释放池，您将泄漏，因为指定的 autoReleasePool 为空（请记住它可以发送消息为空，这就是为什么这不仅会崩溃而不仅仅是泄漏）。

带有固定 @"whatever" 的示例不会泄漏，因为编译器会为该字符串保留程序内存，而 -release 对它们没有影响。对于一些低价值的 NSNumbers 也是如此。

正如 James 所说，ARC 并没有删除保留发布和自动发布的概念。

编辑： outName 如何声明为 ivar/property？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T05:10:56.173

When ARC returns the ivar (or any object) to the calling method, it has to guarantee that it won't be released before the current RunLoop is finished. As a programmer you **know** that it will never be released, but ARC relies on algorithmic guarantees (best practices). ARC will call `retain] autorelease]` **unless** the variable points to a constant (not instantiated with [NARC](https://stackoverflow.com/a/3067181/8047)), and is therefore not at risk for being released.

You should **not** avoid this warning. You need to fix your code. You can add an autorelease pool. If you do not wish to do this, the other way is to push the logic that uses the ivar down to the object that is actually holding the ivar.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:18:40.037

[Jared 的](https://stackoverflow.com/a/11191882/2998)回答很好，但 ARC 的部分工作方式是使用命名约定。的方法名称`outName`意味着它返回一个`autoreleased`值，因此如果有一个 de-ARC-ifier，您的最后一行将如下所示：

```
return [[outName retain] autorelease]; 
```

显然这需要一个自动释放池。

这在您的第二个示例中不会发生，因为您要返回一个常量，因此保留/自动释放会被优化掉。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T14:51:03.680

奇怪，我有一个非常相似的方法，我使用它并且它不会泄漏。它看起来像这样：

```
-(NSString *) dataFilePath {

    NSString *appendPath;
    if (isPowerMode==YES) {
        appendPath = kDataFileNamePower;
    } else {
        appendPath = kDataFileNameClassic;
    }

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:appendPath];
} 
```

所以也许从那里开始，你想在方法的开头声明一个空的 NSString 指针并填充并返回它而不是 outName。

# php - 什么正则表达式模式只允许双重类型是正确的？

> ID：11191454
> 
> 赞同：3
> 
> 时间：2012-06-25T14:39:39.977
> 
> 标签：php, regex, zend-framework, zend-form, zend-validate

我有以下带有zend框架的代码：

```
$descuentoElement->addValidator(new Zend_Validate_Regex(array('pattern' => '/[0-9]+(.[0-9]+)?/'))); 
```

我想验证双类型输入，例如 1.2 或 4...不是“4sd”，而是这种模式不能正常工作...它允许写入“4s”...是否有任何答案或正确的正则表达式模式...我想要一个建议...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:51:55.770

如果您匹配整行，@Joey 的答案将起作用，但您需要使用类似

```
/[^0-9][0-9]+(\.[0-9]+)?[^0-9]/ 
```

如果您的目标本身并不总是在线。

**分解：**

`/`正则表达式分隔符
    `[^0-9]`非数字
    `[0-9]+`一位或多位数字
    `(`开始可选匹配
        `\.`点字符，以`\`
        `[0-9]+`一位或多位数字
    `)?`结束可选匹配进行转义；使用`?`
    `[^0-9]`非数字
`/`正则表达式分隔符设为可选

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:40:39.297

您必须锚定正则表达式并转义点：

```
^[0-9]+(\.[0-9]+)?$ 
```

锚 (`^`和`$`) 是必需的，因此它匹配完整的字符串，而不仅仅是任意子字符串。点是正则表达式中的特殊字符，通常匹配所有其他字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:43:22.147

这就是你需要的：

```
^\d+(\.\d+)?$ 
```

`^`: 仅从字符串的开头开始匹配

`$`: 仅当您的正则表达式与字符串的结尾匹配时才匹配。

`.`: 点需要转义，因为它将匹配任何字符

`\d`: 匹配任何数字 [0-9]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T07:41:55.783

你为什么不直接使用[`Zend_Validate_Float`](http://framework.zend.com/manual/en/zend.validate.set.html#zend.validate.set.float)？

> Zend_Validate_Float 允许您验证给定值是否包含浮点值。此验证器还验证本地化输入。

参考指南中的示例：

```
$validator = new Zend_Validate_Float();
$validator->isValid(1234.5);   // returns true
$validator->isValid('10a01'); // returns false
$validator->isValid('1,234.5'); // returns true 
```

* * *

如果你仍然想要一个正则表达式，[perl.org 网站](http://perldoc.perl.org/perlretut.html#Defining-named-patterns)建议这个用于双打：

```
{
    ^ (?&osg)\ * ( (?&int)(?&dec)? | (?&dec) ) (?: [eE](?&osg)(?&int) )? $
    (?(DEFINE)
        (?<osg>[-+]?) # optional sign
        (?<int>\d++) # integer
        (?<dec>\.(?&int)) # decimal fraction
    )
}x 
```

[单击此处如何使用 PHP](http://codepad.viper-7.com/sTCxKL)

# vba - 带有更改的标题的数据透视表 VBA 宏

> ID：11191455
> 
> 赞同：1
> 
> 时间：2012-06-25T14:39:40.027
> 
> 标签：vba, excel, pivot-table

我一直在研究一个宏来创建一个数据透视表。我让它按原样工作，但随着源数据的变化，我需要能够让宏继续工作。列标题会根据当前月份而变化。A 到 H 列总是相同的，所以这些都不是问题，但 I 到 O 列代表当前月份，然后是接下来的 6 个月。我需要宏将 I 到 O 列用作数据字段，然后适当地为它们命名。例如，我当前的宏显示`May, 2012`并重`November, 2012`命名为`May`和`Nov`（我正在使用旧数据来制作这个宏）。有没有办法让宏使用 I 到 O 列中的任何标题创建数据字段？

```
Sub CreatePivotTable()

ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
    "CP Monthly Data!R1C1:R451C15", Version:=xlPivotTableVersion14).CreatePivotTable _
    TableDestination:="", TableName:="PivotTable1", DefaultVersion _
    :=xlPivotTableVersion14
ActiveSheet.PivotTables("PivotTable1").Name = "Resource Requests"
With ActiveSheet.PivotTables("Resource Requests")
    .InGridDropZones = True
    .AllowMultipleFilters = True
    .RowAxisLayout xlTabularRow
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Workgroup Name")
    .PivotItems("ATG").Visible = False
    .PivotItems("India - ATG").Visible = False
    .PivotItems("India - Managed Middleware").Visible = False
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Workgroup Name")
    .Orientation = xlPageField
    .Position = 1
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Company name")
    .Orientation = xlRowField
    .Position = 1
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Probability Status")
    .PivotItems("X - Lost - 0%").Visible = False
    .PivotItems("X - On Hold - 0%").Visible = False
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields( _
    "Probability Status")
    .Orientation = xlRowField
    .Position = 2
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Project")
    .Orientation = xlRowField
    .Position = 3
End With
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Project manager" _
    )
    .Orientation = xlRowField
    .Position = 4
End With
ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name"). _
    PivotFilters.Add Type:=xlCaptionBeginsWith, Value1:="*TBD"
With ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name")
    .Orientation = xlRowField
    .Position = 5
End With
ActiveSheet.PivotTables("Resource Requests").TableStyle2 = "PivotStyleMedium4"

ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("May, 2012"), "May" _
    , xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("June, 2012"), _
    "June", xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("July, 2012"), _
    "July", xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("August, 2012"), _
    "August", xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("September, 2012"), _
    "September", xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("October, 2012"), _
    "October", xlSum
ActiveSheet.PivotTables("Resource Requests").AddDataField ActiveSheet. _
    PivotTables("Resource Requests").PivotFields("November, 2012"), _
    "November", xlSum
Range("B6").Select
ActiveSheet.PivotTables("Resource Requests").PivotFields("Probability Status"). _
    Subtotals = Array(False, False, False, False, False, False, False, False, False, False, _
    False, False)
Range("C7").Select
ActiveSheet.PivotTables("Resource Requests").PivotFields("Project").Subtotals _
    = Array(False, False, False, False, False, False, False, False, False, False, False, False _
    )
Range("D7").Select
ActiveSheet.PivotTables("Resource Requests").PivotFields("Project manager"). _
    Subtotals = Array(False, False, False, False, False, False, False, False, False, False, _
    False, False)
Range("A18").Select
ActiveSheet.PivotTables("Resource Requests").PivotFields("Company name"). _
    Subtotals = Array(False, False, False, False, False, False, False, False, False, False, _
    False, False)
ActiveSheet.PivotTables("Resource Requests").PivotFields("Probability Status"). _
    AutoSort xlDescending, "Probability Status"
ActiveSheet.PivotTables("Resource Requests").PivotFields("Resource name"). _
    AutoSort xlAscending, "Resource name"

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:17:48.937

这将从当前日期运行到 6 个月后：

```
Dim DVal As Date
Dim DLoop As Integer

DVal = Now() ' or whatever date you want to start at

For DLoop = 0 To 6 '0=now, to 6 months after
ActiveSheet.PivotTables("Resource Requests").AddDataField
    ActiveSheet.PivotTables("Resource Requests").PivotFields (Format(DateAdd("m", DLoop, DVal), "mmm, yyyy")), _
    Format(DateAdd("m", DLoop, DVal), "mmm"), _
    xlSum
Next DLoop 
```

# javascript - 添加滚动条

> ID：11191459
> 
> 赞同：0
> 
> 时间：2012-06-25T14:39:46.790
> 
> 标签：javascript, jquery, html, css

我的页面有很多滚动条，给我的 UI 一种旧的感觉。它根本不适合设计。有什么改进的建议吗？有什么办法可以在所有浏览器上添加时尚的滚动条吗？大多数插件要么在 webkit 浏览器或 firefox 中工作。是否有任何插件在这两种情况下都可以使用？如果可能的话 IE 也是。

这个在 IE 中不起作用 [http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:43:48.547

jQuery [scrollbarpaper](http://code.google.com/p/scrollbarpaper/source/browse/#svn/trunk)插件是我最喜欢的。它与其他滚动条插件的不同之处在于它只是用 div 覆盖滚动条，而不是替换原生浏览器功能，允许您使用 css 安全地设置滚动条样式。

示例： http: [//www.lelieududesign.com/en/why-le-lieu-du-design](http://www.lelieududesign.com/en/why-le-lieu-du-design)

SO参考：[如何使用jquery滚动条纸插件？](https://stackoverflow.com/q/7117472/1363726)

# c++ - C++ 在 switch 中使用 int 时非常奇怪的行为

> ID：11191465
> 
> 赞同：0
> 
> 时间：2012-06-25T14:40:04.260
> 
> 标签：c++, int, switch-statement, case

使用以下 switch 语句，我得到了一些非常奇怪的行为：

```
string recognise_mti(int mti_code)
{
switch(mti_code)
    {
    case 1100:
    case 1101:
        return (mti_code + " (Auth. Request/Repeat)"); break;

    default:
        return (mti_code + " (NOT RECOGNISED)"); break;
    }
} 
```

它似乎根据输入整数返回各种东西。这可能会变成一个愚蠢的错误，但到目前为止，我无法识别它。感谢任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T14:42:52.020

既不是`mti_code`也不`" (Auth. Request/Repeat)"`是`std::string`。所以事实上，加法要做的就是指针加法。所以你最终会得到一个有点随机（并且可能无效）的指针，然后它被隐式转换为`std::string`.

试试这个：

```
#include <sstream>

...

std::stringstream ss;
ss << mti_code;
switch(mti_code)
    {
    case 1100:
    case 1101:
        ss << " (Auth. Request/Repeat)"; break;

    default:
        ss << " (NOT RECOGNISED)"; break;
    }
return ss.str(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T14:42:48.353

您正在添加一个整数和一个字符串文字。这在 C++ 代码中并不典型。

可能发生的情况是，您正在返回一个由无效字符指针构造的字符串，因为文字（方式）短于 1100 个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T14:45:44.453

您正在尝试将整数添加到 C 样式的字符串中，这与您期望的不符。字符串被转换为指向其第一个字符的指针，然后该指针增加 1100（或其他）字节，离开字符串的末尾，并进入随机内存。如果幸运的话，程序会崩溃；如果你不走运，那么该函数将返回垃圾。

您可以使用字符串流来构建字符串：

```
std::ostringstream result;
switch(mti_code)
{
case 1100:
case 1101:
    result << mti_code << " (Auth. Request/Repeat)"; break;

default:
    result << mti_code << " (NOT RECOGNISED)"; break;
}
return result.str(); 
```

或者在 C++11 中，你可以`std::to_string`用来转换整数：

```
return std::to_string(mti_code) + " (Auth. Request/Repeat)"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T14:46:24.587

您正在尝试将字符串附加到整数。这在 C 或 C++ 中是不可能的。您必须以某种方式将整数转换为字符串，[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)这是推荐的方法：

```
std::string recognise_mti(const int mti_code)
{
    std::ostringstream ostr;

    switch(mti_code)
    {
    case 1100:
    case 1101:
        ostr << mti_code << " (Auth. Request/Repeat)";
        break;

    default:
        ostr << mti_code << " (NOT RECOGNISED)";
        break;
    }

    return ostr.str();
} 
```

或者，如果你有一个支持 C++11 的编译器，[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)你可以使用它：

```
std::string recognise_mti(const int mti_code)
{
    switch(mti_code)
    {
    case 1100:
    case 1101:
        return std::to_string(mti_code) + " (Auth. Request/Repeat)";

    default:
        return std::to_string(mti_code) + " (NOT RECOGNISED)";
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T14:51:45.240

您确实看到您正在将一个整数值添加到给定字符串文字的第一个字节的地址？这基本上是未定义的行为，因为您正在“向右”偏移 1100 处（因为我们正在谈论字符，这是位于内存街道 1100 字节处的某物的地址）。例如，在我的示例中，如果我尝试将给定字符串文字的地址偏移 1100，我会得到“正在初始化”。这是因为偏移地址被返回并隐式转换为一个字符串，该字符串被读取为位于给定地址的任何内容。

可以是任何东西，我的示例字符串、“疯狂的大象”或在 MSVC 中启用完整 C++11 支持的秘密方法。:P

如果我要尝试将其再偏移一个字符（一个字节，向右偏移一个）：

```
recognise_mti(1100);  // "being initialized."  
recognise_mti(1101); // "eing initialized." 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T14:42:56.880

您不能将整数和字符串文字与`+`. 您需要先将整数转换为字符串。您可以使用 a`stringstream`或使用`sprintf()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-25T14:43:01.667

您将 a 添加`int`到 a`const char*`并将其返回为 a `string`。

# wpf - DynamicResource 绑定到颜色不起作用

> ID：11191466
> 
> 赞同：3
> 
> 时间：2012-06-25T14:40:16.077
> 
> 标签：wpf, xaml, binding, styles, dynamicresource

我在 xaml 中为我的窗口创建了一个样式，其中包含对 DynamicResource 的绑定：

```
<Window.Resources>
    <local:RowColorConverter x:Key="RowColorConverter" />
        <Style x:Key="OddEvenRowStyle">
            <Setter Property="DataGridRow.Background">
                <Setter.Value>
                    <Binding RelativeSource="{RelativeSource AncestorType=GroupItem}" Path="(ItemsControl.AlternationIndex)" Converter="{StaticResource RowColorConverter}">
                        <Binding.ConverterParameter>
                            <x:Array Type="Brush">
                                <SolidColorBrush Color="{DynamicResource RowPrimaryBrush}" />
                                <SolidColorBrush Color="{DynamicResource RowSecondaryBrush}" />
                            </x:Array>
                        </Binding.ConverterParameter>
                    </Binding>
                </Setter.Value>
            </Setter>
        </Style>
</Window.Resources> 
```

然后，我将样式分配给 DataGrid 的 RowStyle：

```
<DataGrid Name="dataGrid" AutoGenerateColumns="False" Height="Auto" Width="Auto" ItemsSource="{Binding}" RowStyle="{StaticResource OddEvenRowStyle}"> 
```

在我的窗口的初始化中，我分配了这些 DynamicResource 值：

```
Resources["RowPrimaryBrush"] = Colors.LightGray;
Resources["RowSecondaryBrush"] = Colors.DarkGray; 
```

但是，当我加载窗口时，颜色无法正常工作：

![在此处输入图像描述](../Images/dd72008af687ec50af7f58a4643ab78c.png)

我很确定我的其余代码没问题，因为当我将 xaml 中的颜色值更改为颜色值时：

```
<x:Array Type="Brush">
    <SolidColorBrush Color="LightGray" />
    <SolidColorBrush Color="DarkGray" />
</x:Array> 
```

颜色被正确分配：

![在此处输入图像描述](../Images/a003e524d10e7d7047562a34de602e5b.png)

这就是为什么我被引导相信这与绑定有关。我绑定颜色的方式有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:34:56.030

`Binding.ConverterParameter`不是 WPF 逻辑树的一部分，因此在其中执行动态资源查找将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:52:43.867

确保在窗口初始化之前设置资源。

```
public MainWindow()
{
    Resources["RowPrimaryBrush"] = Colors.LightGray;
    Resources["RowSecondaryBrush"] = Colors.DarkGray;
    InitializeComponent();
} 
```

动态资源在更改时不会更新，例如绑定。它只是推迟到运行时而不是在编译时进行评估。

* * *

不熟悉限制，但这并不奇怪。您可能必须重写您的 RowColorConverter 以直接获取其参数，然后通过代码隐藏更新它

```
(Resources["RowColorConverter"] as RowColorConverter).Parameter = 
    new Brush[]
    {
        Brushes.LightGray, 
        Brushes.DarkGray
    } 
```

或在您的 RowColorConverter 中定义附加属性

```
#region Brushes Attached DependencyProperty
public static readonly DependencyProperty BrushesProperty = DependencyProperty.RegisterAttached(
    BrushesPropertyName,
    typeof(SolidColorBrush[]),
    typeof(RowColorConverter),
    new FrameworkPropertyMetadata(null)
);
public const string BrushesPropertyName = "Brushes";
public static void SetBrushes(DependencyObject element, SolidColorBrush[] value)
{
    element.SetValue(BrushesProperty, value);
}
public static SolidColorBrush[] GetBrushes(DependencyObject element)
{
    return (SolidColorBrush[])element.GetValue(BrushesProperty);
}
#endregion 
```

您可以在每个网格上进行不同的设置

```
<DataGrid Name="dataGrid" SnipPointlessAttributes="True">
    <local:RowColorConverter.Colors>
        <x:Array Type="Brush">
            <SolidColorBrush Color="LightGray" />
            <SolidColorBrush Color="DarkGray" />
        </x:Array>
    </local:RowColorConverter.Colors>
</DataGrid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T16:51:50.833

使用 MultiBinding 而不是带有转换器参数的绑定。

# c# - 如何在解决方案资源管理器中以编程方式更新/刷新字形？

> ID：11191467
> 
> 赞同：1
> 
> 时间：2012-06-25T14:40:16.853
> 
> 标签：c#, visual-studio, vsix, vs-extensibility, solution-explorer

我创建了 VSIX 包，它在 VS2010 的解决方案资源管理器中将文件状态显示为字形。我实现了基本的 SccProvider（继承自 IVsSccProvider、IVsSccManager2、IVsSccGlyphs 等），包括 GetSccGlyph 方法。因此，当解决方案打开 vsix 包时，会成功加载整个解决方案的初始字形。但我找不到如何更新特定（或整个）解决方案项的字形的方法。适当的方式应该看起来像

```
var rgsiGlyphs = new VsStateIcon[1];
var rgdwSccStatus = new uint[1];
GetSccGlyph(1, new[] { itemFilePath }, rgsiGlyphs, rgdwSccStatus);
hierarchy.SetProperty(itemId, (int)__VSHPROPID.VSHPROPID_StateIconIndex, rgsiGlyphs[0]); 
```

其中**itemId** - 是特定的项目项目 ID。不幸的是，这种方法仅适用于解决方案，但不会更新项目/类项目类型的字形。我读到有另一种方法如何强制所有项目子项的字形刷新

```
sccProject2.SccGlyphChanged(0, null, null, null); 
```

但它也不起作用。我还读到字形状态可以缓存在 Scc 中，并且应该以某种方式强制刷新，但我还是没有找到任何正确的参考。

我知道这是可能的，因为 VisualSvn 和其他类似的插件会以某种方式动态更新字形。有没有人解决过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:42:32.823

如果你有一个包，你应该实现[IVsHierarchy](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivshierarchy.aspx)接口。这样做时，您必须实现[AdviseHiarchyEvents](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivshierarchy.advisehierarchyevents.aspx)方法。在此方法中，您必须将传入的接收器添加到您保留的集合中，如下所示：

```
 int IVsUIHierarchy.AdviseHierarchyEvents(IVsHierarchyEvents eventSink, out uint cookie)
    {
        cookie = _sinkCookie++; // come up with some unique cookie
        _eventSinks.Add(cookie, eventSink); // remember this sink
        return VSConstants.S_OK;
    }

    int IVsUIHierarchy.UnadviseHierarchyEvents(uint cookie)
    {
        _eventSinks.Remove(cookie);
        return VSConstants.S_OK;
    } 
```

现在，您可以在需要时引发属性更改事件，如下所示：

```
 private void NotifySccChange()
    {
        foreach (sink in _eventSinks)
        {
            try
            {

                sink.OnPropertyChanged(MyId, (int)__VSHPROPID.VSHPROPID_StateIconIndex, 0);
            }
            catch (Exception e)
            {
                SinkIsDead(sink);
            }
        }
    } 
```

# java - 以编程方式在类集合中查找 main() 方法

> ID：11191470
> 
> 赞同：4
> 
> 时间：2012-06-25T14:40:38.943
> 
> 标签：java, class, jar, javac, main

我正在开发一个项目，该项目需要获取任意数量的 java 文件，对其进行编译、打包，然后运行它们。我面临的问题是：我们跑哪个班？是否可以在一组类中找到入口点？

我愿意假设给定的文件只有一个入口点。

这是我到目前为止所考虑的：

*   向每个使用反射查找带有 main() 的类的 jar 添加一个辅助类。要运行 jar，请调用该帮助程序类。
*   将用户命名为他们的 main() 类“Main”，或者类似的东西。

有什么好的方法可以解决这个问题吗？这个软件是为学生和新手程序员设计的，所以我愿意为了简单而牺牲健壮性。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:52:58.813

我脑海中浮现的一个想法可能是自定义注释。它比命名约定更健壮，但比创建清单文件更容易。

就像是：

```
@MainClass
public class MyClass {
   public static void main(String [] args) {
      // ...
   }
} 
```

您的工具可以扫描类以查找注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:51:54.247

了解哪个类包含 main() 的最佳方法是在调用主类的 JAR 文件中提供清单。

但是，您在以某种方式命名他们的主类的问题中的建议也可能有助于您教他们约定与配置，这是一件有用的事情。

# php - WordPress中的购物车

> ID：11191472
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:40:43.177
> 
> 标签：php, wordpress, shopping-cart

是否有从零开始在 WordPress 中创建购物车功能的教程？我不想使用插件。我需要从头开始创建它的东西，它应该是：

1.  将数据（产品列表）存储在 cookie 中
2.  在结帐时，我想将订单插入数据库并通过电子邮件发送给下订单的管理员和客户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:44:48.533

如果您正在寻找一个像购物车一样大的 Wordpress 项目并且需要教程，那么您将面临很长很长的路要走。

不会有这样的教程，因为任何从头开始构建购物车任务的人都会知道如何去做，没有冒犯。

为什么不试试 Shopplugin 之类的解决方案：[https ://shopplugin.net/](https://shopplugin.net/)

或jigoshop：[http ://www.jigoshop.com/](http://www.jigoshop.com/)

# .net - 使用 NetTcpBinding 中止套接字连接

> ID：11191473
> 
> 赞同：4
> 
> 时间：2012-06-25T14:40:51.950
> 
> 标签：.net, wcf, exception-handling, wcf-binding, net.tcp

我知道已经有很多关于这个问题的问题，但没有回复解决我的问题。

我在服务器上有一个 NetTcpBinding 正在运行，并且不时（并非总是，例如 20 到 60 个调用中的 1 个，完全随机）我在客户端收到此异常：

> 套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“00:01:00”。

我注意到当客户端的连接速度很慢时，这种异常会更频繁地发生。

此外，规定的超时时间为 1 分钟，但在 1 秒左右后已经发生异常。

我做什么：

```
var client = GetClient();
client.Open();
bool success = client.Call(); // Exception occurs here (the return value is a bool) 
```

我有时也会在服务器端遇到这个异常：

> 传输数据时发生 TCP 错误（995：I/O 操作已因线程退出或应用程序请求而中止）。

我启用了服务器跟踪，但我得到了相同的异常，并且它没有为我提供任何额外的见解。

我的GetClient：

```
NetTcpBinding netTcpBinding = new NetTcpBinding
{
    CloseTimeout = new TimeSpan(0, 0, 30),
    OpenTimeout = new TimeSpan(0, 0, 30),
    TransferMode = TransferMode.Buffered,
    ListenBacklog = 2,
    MaxConnections = 2,
    MaxReceivedMessageSize = 10485600,
    ReaderQuotas = { MaxStringContentLength = 1048576 },
    ReliableSession = { Enabled = false },
    Security =
    {
        Mode = SecurityMode.Transport,
        Transport = { ClientCredentialType = TcpClientCredentialType.None, ProtectionLevel = ProtectionLevel.EncryptAndSign },
        Message = { ClientCredentialType = MessageCredentialType.Windows }
    }
}; 
```

服务中的重要配置：

```
<behaviors>
    <serviceBehaviors>
        <behavior name="ServiceBehavior">
            <serviceMetadata httpGetEnabled="true" /> 
            <serviceDebug includeExceptionDetailInFaults="true" httpHelpPageEnabled="true" httpsHelpPageEnabled="true" />
            <serviceAuthorization principalPermissionMode="Custom" serviceAuthorizationManagerType="My.Service.WCF.Tools.CustomAuthorizationManager, My.Service.WCF">
                <authorizationPolicies>
                    <clear/>
                    <add policyType="My.Service.WCF.Tools.CustomAuthorizationPolicy, My.Service.WCF" />
                </authorizationPolicies>
            </serviceAuthorization>
            <serviceCredentials>
                <serviceCertificate findValue="MyService" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
            </serviceCredentials>
            <serviceThrottling maxConcurrentCalls="65536" maxConcurrentSessions="65536" maxConcurrentInstances="65536" />
        </behavior>
    </serviceBehaviors>
</behaviors>
<bindings>
    <customBinding>
        <binding name="ServiceBinding" receiveTimeout="00:05:00" maxConnections="65536" listenBacklog="65536">
            <transactionFlow />                      
            <sslStreamSecurity requireClientCertificate="false" />
            <binaryMessageEncoding />
            <tcpTransport transferMode="Buffered" portSharingEnabled="true" maxReceivedMessageSize="1048576" maxPendingConnections="65536" maxPendingAccepts="10">
                <connectionPoolSettings leaseTimeout="00:05:00" idleTimeout="00:05:00" maxOutboundConnectionsPerEndpoint="65536" />
            </tcpTransport>
        </binding>
        <binding name="MexBinding" receiveTimeout="00:05:00" maxConnections="65536" listenBacklog="65536"> 
            <tcpTransport transferMode="Buffered" portSharingEnabled="true" maxReceivedMessageSize="1048576" maxPendingConnections="65536" maxPendingAccepts="10">
                <connectionPoolSettings leaseTimeout="00:05:00" idleTimeout="00:05:00" maxOutboundConnectionsPerEndpoint="65536" />
            </tcpTransport>
        </binding>
    </customBinding>
</bindings> 
```

我已经更新了服务参考并尝试更改一些缓冲区和大小，但它没有工作（我不希望那里出现问题，因为只返回一个布尔值）。

固定使用：

```
OperationContext.Current.OperationCompleted += Test;

private void Test(object sender, EventArgs e)
{
    OperationContext.Current.Channel.Close();
} 
```

不要使用 Abort 而是使用 Close 方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:00:51.947

我发现了问题：我用

```
OperationContext.Current.OperationCompleted 
```

这叫：

```
OperationContext.Current.Channel.Abort(); 
```

这似乎在 99% 的情况下都可以正常工作，但不是全部，使用：

```
OperationContext.Current.Channel.Close(); 
```

完全解决了我的问题。

# unix - 命令行：管道查找结果到 rm

> ID：11191475
> 
> 赞同：162
> 
> 时间：2012-06-25T14:40:53.393
> 
> 标签：unix, command-line, find, rm

我正在尝试制定一个删除超过 15 天的 sql 文件的命令。

查找部分正在工作，但不是 rm。

```
rm -f | find -L /usr/www2/bar/htdocs/foo/rsync/httpdocs/db_backups -type f  \( -name '*.sql' \) -mtime +15 
```

它会准确列出我要删除的文件，但不会删除它们。路径是正确的。

```
usage: rm [-f | -i] [-dIPRrvW] file ...
       unlink file
/usr/www2/bar/htdocs/foo/rsync/httpdocs/db_backups/20120601.backup.sql
...
/usr/www2/bar/htdocs/foo/rsync/httpdocs/db_backups/20120610.backup.sql 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-06-25T15:03:04.907

您实际上是通过管道将`rm`的**输出**连接到 的输入`find`。你想要的是使用`find`作为**参数**的输出`rm`：

```
find -type f -name '*.sql' -mtime +15 | xargs rm 
```

`xargs`是将其标准输入“转换”为另一个程序的参数的命令，或者，更准确地说，他们将其放在`man`页面上，

> 从标准输入构建和执行命令行

请注意，如果文件名可以包含空格字符，则应更正：

```
find -type f -name '*.sql' -mtime +15 -print0 | xargs -0 rm 
```

但实际上，`find`有一个捷径：`-delete`选项：

```
find -type f -name '*.sql' -mtime +15 -delete 
```

请注意以下警告`man find`：

```
 Warnings:  Don't  forget that the find command line is evaluated
  as an expression, so putting -delete first will make find try to
  delete everything below the starting points you specified.  When
  testing a find command line that you later intend  to  use  with
  -delete,  you should explicitly specify -depth in order to avoid
  later surprises.  Because -delete  implies  -depth,  you  cannot
  usefully use -prune and -delete together. 
```

[PS请注意，直接管道`rm`不是一个选项，因为`rm`不期望标准输入上的文件名。您目前正在做的是将它们向后输送。]

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-08-30T10:57:28.600

```
find /usr/www/bar/htdocs -mtime +15 -exec rm {} \; 
```

将选择`/usr/www/bar/htdocs`超过 15 天的文件并将其删除。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-27T13:23:36.387

另一种更简单的方法是使用`locate`命令。然后，将结果通过管道传输到`xargs`.

例如，

```
locate file | xargs rm 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-06T03:07:49.287

假设您不在包含 *.sql 备份文件的目录中：

```
find /usr/www2/bar/htdocs/foo/rsync/httpdocs/db_backups/*.sql -mtime +15 -exec rm -v {} \; 
```

上面的 -v 选项很方便，它会在删除文件时详细输出正在删除的文件。

我喜欢列出将首先删除的文件以确保。例如：

```
find /usr/www2/bar/htdocs/foo/rsync/httpdocs/db_backups/*.sql -mtime +15 -exec ls -lrth {} \; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-17T23:09:12.440

使用**xargs**传递参数，使用选项**-rd '\n'**忽略名称中的空格：

> "${命令}" | xargs -rd '\n' rm

如果您还想删除只读文件，请包括**--force 。**

# blackberry - 在黑莓中集成 Google+ 和 Linkedin

> ID：11191483
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:41:14.870
> 
> 标签：blackberry, linkedin, google-plus, blackberry-jde

如何在我的黑莓应用程序中集成 Google+ 和链接。是否有任何 SDK 或 API 可用于集成 Google+ 和链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:33:16.187

你甚至尝试过用谷歌搜索它们吗？

当我尝试时，这些是谷歌搜索“Google+ API”和“Linkedin API”的首选

[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

[https://developer.linkedin.com/apis](https://developer.linkedin.com/apis)

对于他们两个，您都需要一个 BlackBerry OAuth 库，尝试自己使用谷歌搜索，有几个选项可用。

如果您在使用 API 或 OAuth 时遇到任何问题，请提出一个新问题，提供问题的具体细节，有人可能会尝试提供帮助。

# java - 如何填充 XMLGregorianCalendar()

> ID：11191484
> 
> 赞同：8
> 
> 时间：2012-06-25T14:41:15.297
> 
> 标签：java, binding, jaxb

我需要从 XML 填充一个 JAX Bean，但是没有 setter 方法。我在下面收到以下消息

```
 Failed to invoke public javax.xml.datatype.XMLGregorianCalendar() with no args 
```

我编写了以下方法来获取日期并将其转换为 XMLGregorianCalendar，然后在我的包装类中调用 setter。但是我仍然得到例外。是否有处理我忽略的这种数据类型的标准方法？也许我的包装类没有调用它，但由于某种原因，Netbeans 不允许我将调试器附加到它。

```
public XMLGregorianCalendar asXMLGregorianCalendar(java.util.Date date) throws DatatypeConfigurationException {
    DatatypeFactory datatypeFactory = DatatypeFactory.newInstance();
    if (date == null) {
        return null;
    } else {
        GregorianCalendar gc = new GregorianCalendar();
        gc.setTimeInMillis(date.getTime());
        return datatypeFactory.newXMLGregorianCalendar(gc);
    }
} 
```

Bean中的setter如下

```
public void setDeliveryDate(XMLGregorianCalendar value) {
    this.deliveryDate = value;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T16:27:48.237

您的示例代码显示您尝试使用 Date 对象填充它，而问题本身表明您正在尝试从 XML 填充。因此，除非我误解，否则从 XML 填充只需使用：

```
XmlGregorianCalendar cal = DatatypeFactory.newInstance().newXMLGregorianCalendar(yourXmlDateTimeString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:45:44.570

我建议使用 Joda Time——Java Date Api 让很多开发人员感到沮丧。如果您想坚持使用核心库，请尝试使用 DataTypeFactory。

```
public static XMLGregorianCalendar asXMLGregorianCalendar(Date date) {
    java.util.GregorianCalendar calDate = new java.util.GregorianCalendar();        
    calDate.setTime(date);
    javax.xml.datatype.XMLGregorianCalendar calendar = null;
        try {
            javax.xml.datatype.DatatypeFactory factory = javax.xml.datatype.DatatypeFactory.newInstance();
            calendar = factory.newXMLGregorianCalendar(
            calDate.get(java.util.GregorianCalendar.YEAR),
            calDate.get(java.util.GregorianCalendar.MONTH) + 1,
            calDate.get(java.util.GregorianCalendar.DAY_OF_MONTH),
            calDate.get(java.util.GregorianCalendar.HOUR_OF_DAY),
            calDate.get(java.util.GregorianCalendar.MINUTE),
            calDate.get(java.util.GregorianCalendar.SECOND),
            calDate.get(java.util.GregorianCalendar.MILLISECOND), 0);
        } catch (DatatypeConfigurationException dce) {
            //handle or throw
        }   
    return calendar;
} 
```

# c# - 有没有办法将本机 WinAPI 窗口“转换”为 WinForms 窗口？

> ID：11191485
> 
> 赞同：0
> 
> 时间：2012-06-25T14:41:23.030
> 
> 标签：c#, winforms, winapi, pinvoke

我很确定答案是否定的，但我必须问。我不想使用内部控件，只是窗口本身。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:46:25.340

可能取决于你想用它做什么。

即使你不能“转换”它，你仍然可以使用 P/Invoke 和 Windows API 来做很多事情。

你也许可以做一些事情

```
var form = Control.FromHandle(handle) as Form; 
```

如果你能得到窗口的 HWND。

# magento - 如何获取客户的最后登录日期

> ID：11191488
> 
> 赞同：2
> 
> 时间：2012-06-25T14:41:30.390
> 
> 标签：magento, magento-1.3

我想获得我的客户的最后登录日期（在 Magento 上）。

我正在这样做：

```
$customer = Mage::getSingleton('customer/session')->getCustomer();  
$logCustomer = Mage::getModel('log/customer')->load($customer->getId());  
$lastVisited = $logCustomer->getLastVisitAt(); 
```

但它不起作用，结果为NULL

我的数据库中有一个名为“customer_log”的表，这个表是空的！此表包含列：“customer_id”和“login_at”。

你知道我是否必须在后台激活一个选项才能让它工作吗？

谢谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:50:24.373

您的表格`customer_log`没有出现在我的 Magento 1.3.2 安装中，但是有一个`log_customer`表格。它有`log_id, visitor_id, customer_id, login_at, logout_at, and store_id`. 该`login_at`专栏将为您提供您想要的内容。

```
// $lastVisited = $logCustomer->getLastVisitAt();
// becomes
$lastVisited = $logCustomer->getLoginAt(); 
```

这将返回 UTC 格式的 MySQL `datetime`（如`2012-06-17 13:45:57`），还有`getLoginAtTimestamp()`一种您可能更喜欢返回 Unix 时间戳的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T12:29:59.893

对我来说，这是最好的方法：

```
$customer = Mage::getSingleton('customer/session')->getCustomer();
$logCustomer = Mage::getModel('log/customer')->loadByCustomer($customer);
$lastVisited = $logCustomer->getLoginAtTimestamp();
$lastVisited = date('Y-m-d H:i:s', $lastVisited); 
```

# cakephp-2.0 - Cakephp 2 Containable 无法正确过滤

> ID：11191499
> 
> 赞同：0
> 
> 时间：2012-06-25T14:41:52.823
> 
> 标签：cakephp-2.0, containable

我不确定我是否在做坏事，或者这实际上是 Cake 的预期行为。

以下是我的代码：

```
$tickets = $this->TicketsPrice->Ticket->find('all',array(
    'contain'=> array(                    
        'TicketsType' => array(
                    'conditions' => array(
                        'provider_id' => $provider_id,
                    ),
                ),
            ),
        )
    ); 
```

这就是我得到的：

```
Array
(
    [0] => Array
        (
            [Ticket] => Array
                (
                    [id] => 17
                    [name] => Telecabina
                    [tickets_type_id] => 9
                )

            [TicketsType] => Array
                (
                    [id] => 9
                    [provider_id] => 5
                    [name] => Name
                )

        )

    [1] => Array
        (
            [Ticket] => Array
                (
                    [id] => 16
                    [name] => Pase General
                    [tickets_type_id] => 8
                )

            [TicketsType] => Array
                (
                    [id] => 8
                    [provider_id] => 5
                    [name] => Name
                )

        )

    [4] => Array
        (
            [Ticket] => Array
                (
                    [id] => 13
                    [name] => Pase fin de semana
                    [tickets_type_id] => 7
                )

            [TicketsType] => Array
                (
                    [id] => 
                    [provider_id] => 
                    [name] => 
                )

        ) 
```

我不应该在阵列中获得票 4。相反，由于 provider_id 不匹配，我得到一个空的 TicketsType 数组。这是预期的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:19:25.487

我意识到条件实际上是过滤好的，但我不确定如何对整个数组实现相同的过滤，而不仅仅是对包含模型的子数组。

我可以通过执行 foreach 并检查空 id 来做到这一点，但不确定如何直接在 find 函数中创建它，就像使用 where SQL 条件一样。

# java - 线程池的设计模式

> ID：11191501
> 
> 赞同：3
> 
> 时间：2012-06-25T14:42:02.900
> 
> 标签：java, c++, multithreading, design-patterns, threadpool

我目前有一个具有大量线程的应用程序，这使得应用程序非常大。每个线程都是长时间运行的，基本上是轮询新电子邮件然后处理它们的无限循环。每个线程都保持一个 SSL 连接，这就是线程对应用程序很好的原因。

我想使用线程池。最简单的方法是固定线程数，然后每个线程添加 10 个用户，但即使在这一点上，它似乎也没有像 1 个用户/线程那样均匀地平衡工作，因为每个循环的处理时间都相当长。另外，这实际上不是线程池。

我的问题是——这里正确的设计模式是什么（因为它肯定比我上面写的更智能），是否有一个 C++ 库可以很好地处理这个问题？将我指向 Java 实用程序也会很有帮助，因为根据我的经验，从 Java 实用程序中制定设计模式非常容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:35:35.887

一个用户/线程可能是一个很好的起点。任何阻塞或可能被阻塞的东西都需要在自己的线程中运行，以避免阻塞或被其他正在执行的代码阻塞。如果电子邮件的实际处理要直接运行，则可以将其放置在“可运行”中，使用 Java 术语，并提交到线程池。Java 术语是[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)，自己编写一个简单的也不会那么难。您希望每个可能的 CPU 内核都有一个线程，以便从您的计算机中获得最大的工作量。

如果每封电子邮件的工作量不是很大，那么跳过线程池并只在阅读器线程上完成工作可能会更简单、更快。你已经支付了运行它的成本，你也可以尽你所能地完成所有工作。

在另一个极端，如果处理电子邮件涉及阻止或被阻止，您可能希望为每封电子邮件启动一个新线程。您最终可能会使用*很多*线程，但它会从您的计算机中获得最大的工作量。您不希望在 CPU 使用率仅为 5% 的情况下落后于电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:49:27.290

我会在后端放置一个 BlockingDeque 和一个线程池消费者。这将电子邮件生产者与消费者分离，并允许您在后端汇集消费者。看看这个：

[生产者消费者示例](http://www.java2s.com/Tutorial/Java/0140__Collections/ProducerandconsumerbasedonBlockingQueue.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:30:44.880

有许多模式可以解决问题，但做出决定的关键是了解模式的后果。[ACE 网站上](http://www.cs.wustl.edu/~schmidt/patterns-ace.html "高手")有一些关于一些可能适合的并发模式的论文，例如Active [Object](http://www.cs.wustl.edu/~schmidt/PDF/Act-Obj.pdf "活动对象")、[Proactor](http://www.cs.wustl.edu/~schmidt/PDF/proactor.pdf "前摄者")和[Reactor](http://www.cs.wustl.edu/~schmidt/PDF/reactor-siemens.pdf "反应堆")。这些示例是 C++，但如果您追求自己的实现，这些图表和描述会很有帮助。

前[摄者](http://www.cs.wustl.edu/~schmidt/PDF/proactor.pdf "前摄者")可以提供一个优雅的解决方案或作为另一种模式的基础。对于 C++ 实现，我会推荐这个[`boost::asio`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html "提升::asio")库：

*   相当完善的文档和示例。
*   SSL 支持。
*   [HTTP Server 3](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3 "HTTP 服务器 3 示例")示例展示了如何使用线程`boost::asio`池。

如果不想依赖`boost`，那么[这里](http://think-async.com/ "阿西奥")`asio`的库也是单独打包的。有关更多模式和信息，请考虑[这](https://rads.stackoverflow.com/amzn/click/com/0471606952)本书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:50:08.563

我并不真正理解您的陈述“似乎没有像 1 个用户/线程那样均匀地平衡工作，因为每个循环的处理时间都相当长”。

无论如何，[Active Object](http://en.wikipedia.org/wiki/Active_object)模式在您的情况下可能是一种优雅的模式。这是其他 6 种模式的组合。实际上，这实现了一个具有良好抽象实体的线程池。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T15:15:14.937

看看[commons ThreadPool](http://commons.apache.org/dormant/threadpool/)。Altough Java - 它是开源的，您可以查看代码并轻松移植到 C++

# javascript - IE麻烦——Jquery中复杂的电话号码错误检查

> ID：11191502
> 
> 赞同：0
> 
> 时间：2012-06-25T14:42:08.167
> 
> 标签：javascript, jquery, validation

我正在编写一段代码来验证三个电话号码。逻辑是，其中一个数字必须有效，否则代码的第 3 行会出错。除了在 IE 中，它工作得很好。IE 没有检测到错误。此代码中是否有任何部分在 IE 中无法正常工作？

```
 //check first homephone
//check second workphone
//check third cellphone
// if nothing = 10 then something is wrong
var numLengthHome = ($('.homephone > .validPhone:eq(0)').val().length) + ($('.homephone > .validPhone:eq(1)').val().length) + ($('.homephone > .validPhone:eq(2)').val().length);
var numLengthWork = ($('.workphone  > .validPhone:eq(0)').val().length) + ($('.workphone  > .validPhone:eq(1)').val().length) + ($('.workphone  > .validPhone:eq(2)').val().length); var numLengthCell = ($('.cellphone > .validPhone:eq(0)').val().length) + ($('.cellphone > .validPhone:eq(1)').val().length) + ($('.cellphone > .validPhone:eq(2)').val().length);

var num1 = true; var num2 = true; var num3 = true; // all assume the numbers are fine until proven otherwise

 if ((($('.homephone > .validPhone:eq(0)').val()) && ($('.homephone > .validPhone:eq(1)').val()) && ($('.homephone > .validPhone:eq(2)').val()) && (numLengthHome == 10))) {
 $('.cellphone > .validPhone:eq(2)').parents('.formgroup').addClass('error');
 num1 = false;      
} 
else if ((($('.workphone > .validPhone:eq(0)').val()) && ($('.workphone > .validPhone:eq(1)').val()) && ($('.workphone > .validPhone:eq(2)').val()) && (numLengthWork == 10))) {
 $('.cellphone > .validPhone:eq(2)').parents('.formgroup').addClass('error'); 
num2 = false; 
  } else if ((($('.cellphone > .validPhone:eq(0)').val()) && ($('.cellphone > .validPhone:eq(1)').val()) && ($('.cellphone > .validPhone:eq(2)').val()) && (numLengCell == 10))) {
 $('.cellphone > .validPhone:eq(2)').parents('.formgroup').addClass('error'); num3 = false;
} else {
 $('.cellphone > .validPhone:eq(2)').parents('.formgroup').removeClass('error');
        }

 if((num1 == true) || (num2 == true) || (num3 == true)) {       
 $('.cellphone > .validPhone:eq(2)').parents('.formgroup').removeClass('error');

 } 
```

HTML：

```
 <tr>
<td class="label_col indent">
      <div class="label">
        Home Phone:
       </div>
    </td>
    <td>
        <div id="ucRelatedContentControls_ctl01_divHomePhone" class="formgroup homephone">
            <input name="ucRelatedContentControls$ctl01$txtHomePhone1" maxlength="3" id="ucRelatedContentControls_ctl01_txtHomePhone1" class="input_10 input_stacked validPhone" type="text"><span class="pipe">-</span>
            <input name="ucRelatedContentControls$ctl01$txtHomePhone2" maxlength="3" id="ucRelatedContentControls_ctl01_txtHomePhone2" class="input_10 input_stacked validPhone" type="text"><span class="pipe">-</span>
            <input name="ucRelatedContentControls$ctl01$txtHomePhone3" maxlength="4" id="ucRelatedContentControls_ctl01_txtHomePhone3" class="input_10 input_stacked validPhone" type="text">

            <div class="tooltip">
                <div class="tooltip_arrow">
                </div>
                <div class="tooltip_message">
                    ipsum. Lorem ipsum dolor sit amet, consectetur adipiscing elit ...
                </div>
            </div>

             <div class="invalid">
                <div class="invalid_arrow">
                </div>
                <div class="invalid_message">
                    Error message
                </div>
            </div>
        </div>
    </td>
</tr> 
```

（不要介意表格 - 不在我正在做的项目范围内:)

# php - 使菜单默认折叠

> ID：11191503
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:42:13.330
> 
> 标签：php, javascript, jquery, html, css

我在一个 Drupal 站点上工作，由于某种原因，当我从周末回来时，默认情况下，我在站点上的一个菜单现在会自动扩展。我筛选了css和php，找不到任何突出的东西。有没有办法通过 css、javascript、jquery 或 php 让菜单默认自动折叠。我更喜欢css，但我可以做任何其他方法。这是一个屏幕截图：

![菜单扩展截图](../Images/520285e859375b216919febfad9c434b.png)

**这是CSS**

```
ul.menu li {
    margin: 0;
    padding: 0;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:57:57.667

是否可以检查drupal中这些菜单项的“扩展”复选框？菜单看起来被适当地扩展了，所以我先看看drupal。

# mysql - 替代子查询

> ID：11191504
> 
> 赞同：1
> 
> 时间：2012-06-25T14:42:15.593
> 
> 标签：mysql, sql

我正在使用 Mysql 5.1，并且有这个查询，有没有办法不使用子查询并完成相同的结果？

```
SELECT oref.affiliate_id, ROUND(sum( oph.amount ) * 0.10 ,2) AS tsum
FROM operators_referer AS oref 
LEFT JOIN operators_payments_history AS oph 
ON oref.operator_id = oph.operator_id
WHERE oref.affiliate_id = 28221
AND
(
    oph.date_paid > 
    (
        SELECT MAX(aph.date_paid) 
        FROM affiliates_payments_history AS aph 
        WHERE aph.operator_id = oref.affiliate_id
    )
    OR 
    (
        SELECT MAX(aph.date_paid)
        FROM affiliates_payments_history AS aph 
        WHERE aph.operator_id = oref.affiliate_id 
    ) 
    is NULL
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:33:02.247

**不要这样做！** 如果表的索引正确，并且数据库结构合理，那么几乎肯定最好将其保留为子查询。根据您的评论，这似乎会简化和加快速度 - 但不一定如此。解析器不一定会更好地处理非子查询表单。子查询的清晰性，以及重写为不使用子查询的查询的复杂性，认为这不是一个值得的目标。

**你需要知道它是否可以完成？它可以：**[对此](https://cs.stackexchange.com/questions/129/do-subqueries-add-expressive-power-to-sql-queries)CS.stackexchange 问题 的回答显示了如何做到这一点，并且有人指出，没有办法让子查询不能写为基于连接的查询，并且没有可能的集合差异。这意味着有一种方法可以简化它，并且一些指向算法方法的链接被链接到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:49:18.360

你试过一个`HAVING`子句吗？

```
SELECT oref.affiliate_id, ROUND(sum( oph.amount ) * 0.10 ,2) AS tsum
FROM operators_referer AS oref 
LEFT JOIN operators_payments_history AS oph 
ON oref.operator_id = oph.operator_id
LEFT JOIN affiliates_payments_history AS aph
ON aph.operator_id = oref.affiliate_id
WHERE oref.affiliate_id = 28221
GROUP BY oref.affiliate_id
HAVING MAX(aph.date_paid) > oph.date_paid OR MAX(aph.date_paid) IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:45:24.873

试试这个：：

```
 SELECT oref.affiliate_id, ROUND(sum( oph.amount ) * 0.10 ,2) AS tsum
    FROM operators_referer AS oref 
    LEFT JOIN operators_payments_history AS oph 
    ON oref.operator_id = oph.operator_id
   LEFT JOIN affiliates_payments_history AS aph ON aph.operator_id = oref.affiliate_id
    WHERE oref.affiliate_id = 28221
  GROUP BY oref.affiliate_id
  HAVING IFNULL(MAX(aph.date_paid),0 > oph.date_paid) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:48:41.057

```
SELECT MAX(aph.date_paid) AS max_aph, 
       oref.affiliate_id, 
       ROUND(sum( oph.amount ) * 0.10 ,2) AS tsum
FROM operators_referer AS oref 
LEFT JOIN operators_payments_history AS oph 
       ON oref.operator_id = oph.operator_id
LEFT JOIN affiliates_payments_history AS aph 
       ON aph.operator_id = oref.affiliate_id
WHERE oref.affiliate_id = 28221
AND (oph.date_paid > max_aph OR max_aph is NULL) 
```

没有尝试过，但我认为这就是您正在搜索的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T14:52:41.540

您正在寻找的是一个简单的`JOIN`逻辑。

像这样：

```
SELECT oref.affiliate_id, ROUND(sum( oph.amount ) * 0.10 ,2) AS tsum
FROM operators_referer AS oref 
     LEFT JOIN operators_payments_history AS oph 
            ON oref.operator_id = oph.operator_id
     LEFT JOIN affiliates_payments_history AS aph
            ON aph.operator_id = oref.affiliate_id
WHERE oref.affiliate_id = 28221
AND ( oph.date_paid > MAX(aph.date_paid)
OR MAX(aph.date_paid) IS NULL)    
GROUP BY oref.affiliate_id; 
```

查询的意思基本上是“将 aph 和 oph 表加入 oref，仅在 oref.affiliate_id 范围内应用 max 函数，并查找条件适用的行”

在 MySQL 手册中了解更多关于`JOIN`和功能是明智的`LEFT JOIN`

# ruby-on-rails - Rails request_parameters 包括控制器信息，如何只获取 POST 数据

> ID：11191519
> 
> 赞同：4
> 
> 时间：2012-06-25T14:43:04.987
> 
> 标签：ruby-on-rails, request

我发送一个应用程序/json 发布请求：

```
curl 'http://127.0.0.1:3000/api/flowers/growth' -H 'Content-Type:application/json' -d '{"type": 1}' 
```

然后我使用**request.request_parameters**，输出为：

```
{"type"=>1, "flower"=>{}} 
```

为什么会自动添加“flower”=>{}？

我怎样才能只获取 POST 数据，而不包括控制器信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-13T04:27:45.847

好的，在我自己在这个确切的问题上苦苦挣扎了几个小时，并通过调用堆栈挖掘之后，我找到了答案。

首先，我想解决这个问题的原因是因为如果使用了无效元素，我想向发送者提供反馈，而不是仅仅接受有效值而忽略其他值。因此，此页面上的其他解决方案对我不起作用。

所以问题的关键是这个叫做 的东西`ActionController::ParamsWrapper`，它位于`actionpack-4.2.3/lib/action_controller/metal/params_wrapper.rb`. 此代码将控制器的请求参数包装在控制器名称中，以*使访问更容易*。然而，如果你有一个专用的 api JSON 接口，这只会让生活变得更糟。

要告诉这个急切的“帮手”，请在您的控制器中添加以下行：

`wrap_parameters format: []`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:47:04.747

您可以使用它`slice`来获取您正在寻找的参数：

```
request.request_parameters.slice(:type) #=> { 'type' => 1 } 
```

也可以`params`用作`request.request_parameters`. `params`虽然有一些额外的信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-24T22:14:22.337

在很多情况下使用`params.slice`或类似方法是不可行的（您可能不知道将传入哪些参数），您只需要获取 POST 参数。在这种情况下，您可以`request.POST`在控制器中使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T15:10:15.757

伙计，你为什么不使用`params`哈希？

```
params[:type] 
```

# python - 即使在应用程序重置后，表 x 也没有 y 列

> ID：11191525
> 
> 赞同：1
> 
> 时间：2012-06-25T14:43:20.200
> 
> 标签：python, django, model

我运行“python manage.py reset appname”，然后运行“python manage.py syncdb”，因为我收到以下错误：

> “数据库错误：表 x 没有名为 y 的列”。

虽然我在新视图 (created_on) 中添加的新列之一有效，但“评级”列仍然存在问题。有什么建议吗？

```
class Review(models.Model):
    review = models.CharField('Review', max_length = 2000)
    date = models.DateField('date')
    created_on = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    user = models.CharField('Username', max_length =  200)
    rating = models.IntegerField()
    product = models.ForeignKey(Product)
    def __unicode__(self):
        return self.review 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:58:25.420

使用命令：

```
python manage.py sqlclear appname
python manage.py syncdb 
```

或更好地使用[南方](http://south.aeracode.org/)

# c++ - 文件保存过程中的进度

> ID：11191535
> 
> 赞同：3
> 
> 时间：2012-06-25T14:44:09.317
> 
> 标签：c++, file, qt, progress-bar, save

我有一个大图像，我必须用`image.save(fichier)`. 我怎么可能显示保存状态的进度条？

这可能是一个微不足道的问题，但我真的不知道如何做到这一点，因为它是一个单行命令......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:47:53.063

您可能无法使用内置的图像保存。您可以估计保存时间（知道图像的大小，猜测 mb/s），并设置一个进度条并使用计时器来更新它。

或者你可以有一个进度条，它只是快速运行到最后并重新启动以显示一些活动，但不显示实际进度。

编辑：如果你真的必须有一个进度，你可以将图像数据“保存”在内存中，然后一次将内存写入磁盘一个块来更新进度。

```
 QImage image;
 QByteArray bytes;
 QBuffer buffer(&bytes);
 buffer.open(QIODevice::WriteOnly);
 image.save(&buffer, "PNG"); // writes image into buffer in PNG format 
```

然后将缓冲区写入磁盘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:54:43.710

您可以`QImage::save()`在另一个线程中运行，而主线程显示进度条，每秒使用 expected_size/current_size 更新其进度值。你可以得到当前大小`QFile::size()`

# c# - 线程分析工具？C# 视觉工作室 2010

> ID：11191538
> 
> 赞同：1
> 
> 时间：2012-06-25T14:44:13.353
> 
> 标签：c#, visual-studio-2010, profiling

在这里的长期 OS X 开发人员，所以我对 Windows 上存在哪些类似于 OS X Instruments 的分析工具有点困惑。

使用 Instruments，我可以从字面上看到函数调用以及每个函数调用的时间，以及确定哪些线程可能占用了过多的 CPU 时间。

我已经尝试过内置的分析器，但它只是告诉我随着时间的推移 CPU 使用情况，没有调用树。

内置分析器是否支持此功能？还是我应该看第三方工具？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:48:09.760

您可以在 VS2010 分析器中看到所有这些，尽管有第三方工具可能做得更好/更容易。（DotTrace、RedGate 的 ANTS Profiler 等）。

在 VS2010 中，如果您转到分析 > 启动性能向导，您有四个选项。前两个与方法级别的计时和计数有关，即单线程性能分析。第三个与分配有关，第四个选项将让您查看多线程应用程序的分析（单个 cpu 内核的使用情况、锁争用等）。对于多线程分析，请同时选中“可视化多线程应用程序的行为”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:46:39.100

Red Gate 的[**ANTS Profiler**](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler)是一个非常有用的工具，用于分析您的 .NET 应用程序；但是，它不是免费的。

Jetbrains使用[**dottrace**](http://www.jetbrains.com/profiler/)制作了一个工具来分析性能和内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:47:25.047

我以前用过ANTS，还不错，但除了试用，我从来没有在意过任何事情

[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:47:32.993

RedGate 为此做了一些很好的工具 - ANTS profiler 可用

还有来自 JetBrains 的 dotTrace

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:07:20.753

EQATEC、ANTS 和 DotTrace 是构建良好的高质量工具，我想 VS2010 分析器也是。

也就是说，恕我直言，最好的工具是您无需支付任何费用的工具，[随机暂停](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)，其他人也这么认为，就像[这里](https://stackoverflow.com/a/2474118/23771)一样，也是[这个答案](https://stackoverflow.com/a/4832698/23771)的最后一段。 [此链接](https://scicomp.stackexchange.com/a/1870/1262)概述了一些使用它的经验，其中发现并删除了一系列问题，导致加速因素可能违反您的期望。

# javascript - 在 smartgwt 页面中使用 selenium webdriver 定位简单元素

> ID：11191542
> 
> 赞同：0
> 
> 时间：2012-06-25T14:44:22.743
> 
> 标签：javascript, html, selenium, webdriver, smartgwt

我正在使用 selenium webdriver 测试 smartgwt 应用程序。这对于具有以下内容的 smartgwt 小部件非常有效：

```
JavascriptExecutor executor = (JavascriptExecutor) context;

return (WebElement) executor.executeScript("return AutoTest.getElement(arguments[0]);", location); 
```

在上述情况下，位置类似于`//IButton[id=isc_button]/`

但是，我们的页面上也有一些“基本”html 元素，它们不是 smartgwt 小部件，但它们确实有一个 id。因此，我尝试按以下方式执行这些操作（因为上述内容不适用于这些元素）：

```
JavascriptExecutor executor = (JavascriptExecutor) context;
executor.executeScript("return document.getElementById(arguments[0]);", location); 
```

但这不起作用。即使使用 firebug，我也尝试`document.getElementById('xxx')`了一个我知道存在给定 ID 的元素（因为我可以在 firebug 的 html 选项卡上通过检查器找到它），但这也不起作用。

有谁知道为什么，以及如何在生成的 DOM 树中通过 javascript 访问一个简单的 html 元素？

谢谢！

# android - 在 Android/iPad/iPhone 中调试客户端代码

> ID：11191546
> 
> 赞同：1
> 
> 时间：2012-06-25T14:44:41.970
> 
> 标签：android, ios, google-chrome, meteor, weinre

我一直在尝试找到一种在移动设备浏览器中调试客户端代码的方法。对于 Android，我找到了这个：

[https://developers.google.com/chrome/mobile/docs/debugging](https://developers.google.com/chrome/mobile/docs/debugging)

对于 iPad/iPhone， weinre 似乎很有希望，但我无法让它工作：

[http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html](http://people.apache.org/~pmuellr/weinre/docs/latest/Home.html)

有没有人能够让 weinre 与 Meteor 合作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T18:58:57.077

我使用[Adob​​e Edge Inspect](http://html.adobe.com/edge/inspect/)取得了一些成功。我认为这与 Weinre 几乎相同（至少它使用 Weinre）。也许试一试，看看你是否有更好的运气。

# xpages - 从@Dblookup 获取错误文本？

> ID：11191547
> 
> 赞同：0
> 
> 时间：2012-06-25T14:44:42.067
> 
> 标签：xpages

如何从 中返回错误文本`@Dblookup`？我有类似的查找，我怀疑它们正在返回错误，因此我希望有一个面板在发生查找错误时显示。

我有：

```
var dbpath = @DbLookup("","Setup","Setup","EIDBServerFilename");
var tmp = @DbLookup(dbpath,"FullName",@Name("[ABBREVIATE]" ,getComponent("inputTextEmpName").getValue()),"HRLogonID");
@If(@IsError(tmp),"Error= "  + @Text(tmp),""); 
```

但我只是看到没有错误文本的“Error=”。

如果我删除`@Text`我得到“错误=未定义”。

如果是错误，我如何获得错误消息？

我在帮助中查找了两者`@IsError`，`@Dblookup`但像往常一样，帮助是可怕的，甚至没有提到`@Dblookup`可能返回错误或如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:59:19.007

来自 SSJS 中的 @DbLookup 的错误会被内部捕获并且不会返回。

这是因为它是通过*session.evaluate*实现的，如果你在*session.evaluate*中做了一个错误的@DbLookup ，那么完整的评估会失败，你不会收到@DbLookup 的错误信息。

如果@DbLookup 错误，则返回*null*，这就是您使用 @IsError 测试的内容：*tmp* is *null*，这就是您在字符串中得到*undefined的原因。*

如果您使用*未定义*的值创建 @Text，则返回一个空字符串。

希望这可以帮助

斯文

**编辑：**

如果您在评估语句中运行代码，您可以获得错误消息。铁这个

```
session.evaluate('lookup:=@DbLookup("";"";"X";"1";1);@if(@isError(lookup);@Text(lookup);lookup)') 
```

将返回错误消息。

# sql - 在 Oracle 中重命名视图

> ID：11191558
> 
> 赞同：6
> 
> 时间：2012-06-25T14:45:26.473
> 
> 标签：sql, oracle, rename, sql-view

> **可能重复：**
> [重命名 Oracle 表或视图](https://stackoverflow.com/questions/835387/rename-oracle-table-or-view)

我知道你可以使用

```
ALTER TABLE oldName RENAME TO newName; 
```

重命名表，但“ALTER”不适用于重命名视图。

在 Oracle 中重命名视图的语法是什么（如果有什么不同，我使用的是 11g）？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-25T14:47:42.270

您可以在视图上使用[RENAME ，如下所示：](http://docs.oracle.com/cd/B13789_01/server.101/b10759/statements_9019.htm)

> 使用 RENAME 语句重命名表、视图、序列或私有同义词。

```
RENAME old_view_name to new_view_name 
```

# css - 滚动时使具有相对位置的 div 位于页脚 div 下方

> ID：11191562
> 
> 赞同：0
> 
> 时间：2012-06-25T14:45:44.470
> 
> 标签：css, html, position, overlay

我对 CSS 和 HTMl 真的不是很熟悉，所以放轻松我正在编辑购买的模板，我遇到了一个小问题，你可以在这里查看它的外观并理解我的问题：[https： //dl.dropbox.com/u/10843829/SITE%20INFORBYTE/shortcodes-text.html](https://dl.dropbox.com/u/10843829/SITE%20INFORBYTE/shortcodes-text.html)

问题是：我有侧边栏 div，我**让它与页面一起移动，**它的 div 上有“position:fixed”属性......问题是，现在**它滚动到页脚 div**上。我试图遵循这个：[http](http://css-tricks.com/scrollfollow-sidebar/) ://css-tricks.com/scrollfollow-sidebar/但效果并不好。

现在一些代码可以更深入地了解我的问题。

**源代码**

```
<div class="grid_4 sidebar " style="position:fixed" id="sidebar"> 
```

* * *

**侧边栏小部件容器 - CSS**

```
 .sidebar h3 {
    font-size:14px;
    color:#333333;
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    font-weight:bold;
    margin-bottom:10px;
    text-transform:uppercase;
    text-shadow:1px 1px 1px #fff}

.sidebar .widget-container h3 {
    margin-left:40px}

.footer .widget-container h3 {
    font-size:15px;}

.footer .widget-container {
    color:#848484}

.footer .widget-container a {
    color:#fff}

.sidebar ul, .sidebar ol {
    margin:0;
    padding:0}

.sidebar ul li {
    list-style:none}

.sidebar_space {
    padding:10px }

.sidebar .box,
.sidebar .widget {
    margin-bottom:20px}

.sidebar .widget-container {
    font-size:13px;
    padding:20px;
    margin-bottom:30px;}

.sidebar .box .widget-container {
    padding:0}

.sidebar .widget-container ul {
    margin:0;}

.sidebar .widget-container ul li ul{
    margin:0 0 0 5px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:48:19.817

将页脚的 z-index 设置为淫秽的东西，例如：

```
z-index: 3000; 
```

这应该迫使它保持领先。或者，您可以尝试使用侧边栏的负值，这也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:51:05.637

将您的页脚设置为`position: relative;`并给它一个`z-index: 5000;`这样的：

```
.footer {
    position: relative;
    z-index: 5000;
} 
```

# android - 如何重置“ScrollView”文本的长度？

> ID：11191569
> 
> 赞同：0
> 
> 时间：2012-06-25T14:46:14.280
> 
> 标签：android, scroll, scrollview

我正在显示一些带有`TextView`内部的文本`ScrollView`。活动更改文本（当用户点击导航箭头时），但`ScrollView`不会更改其高度以更改文本长度。因此，对于比原始文本更长的文本，它不会一直向下滚动。

**需要明确**的是，我不希望视图在屏幕上加长，而只是可滚动长度加长（或缩短）。顺便说一句，这个属性的名称是什么？

这是一个尝试：

```
 ScrollView vscr = (ScrollView) findViewById(R.id.scroller);
    vscr.requestLayout(); 
```

我也尝试过`vscr.computeScroll();`and `vscr.recomputeViewAttributes(findViewById(R.id.content));`，但也许我用错了（我对此很陌生）。

任何人都可以告诉我`ScrollView`当包含的文本变长时如何使自身变长？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:53:19.250

您是否将布局的高度设置为 wrap_content？

# perl - 从 perl 脚本输入到命令提示符

> ID：11191572
> 
> 赞同：-2
> 
> 时间：2012-06-25T14:46:20.460
> 
> 标签：perl, input, command, prompt

如何从 perl 脚本向命令提示符提供输入。例如，从命令提示符中选择一个选项，为命令提示符提供用户名或密码等。我想我已经很清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:49:35.740

```
#!/usr/bin/perl -w

use strict;

my $input = <STDIN>;

chomp($input);

print "You wrote: $input\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T18:33:31.217

如果您正在寻找选项而不是用户输入内容，请考虑[GetOpt::Long](http://search.cpan.org/~jv/Getopt-Long/lib/Getopt/Long.pm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:40:47.967

请参阅[`Term::Prompt`](http://metacpan.org/module/Term%3a%3aPrompt), [`Term::UI`](http://metacpan.org/module/Term%3a%3aUI), [`IO::Prompt`](http://metacpan.org/module/IO%3a%3aPrompt), [`IO::Prompter`](http://metacpan.org/module/IO%3a%3aPrompter), [`IO::Prompt::Tiny`](http://metacpan.org/module/IO%3a%3aPrompt%3a%3aTiny)modules 和所有这些。

# .net - 处理来自子进程的交互式提示

> ID：11191575
> 
> 赞同：1
> 
> 时间：2012-06-25T14:46:24.757
> 
> 标签：.net, process, stream, synchronization, deadlock

我正在扩展一个 .NET4 命令行应用程序，除其他外，它创建了一个外部进程来调用`svn.exe`以从我们的存储库中提取一些数据。问题是当我们的账号密码修改后，认证失败，SVN提示输入账号密码。

SVN 通过向标准错误写入提示来做到这一点。输出如下所示：

```
标准输出：更新“。”：
STDERR：身份验证领域：<http://{host}:8080> VisualSVN 服务器
STDERR：“joe.smith”的密码：

```

我认为出错的地方是子进程（此后称为 CP）的第二个“行”不包含换行符，并且在父进程（PP）阻塞标准输入之前可能没有被*BeginErrorRead **Line**（）*拾取溪流。我的猜测得到了以下事实的支持：关闭 CP 上的输入流会导致来自输出流和错误流的剩余数据由我的*DataReceivedEventHandler*回调处理。

事件的顺序似乎是：

1.  CP 开始写入 STDOUT。
2.  如果缓存的身份验证凭证错误，CP 开始将上述消息写入 STDERR。
3.  根据我是从 STDERR 同步读取还是异步读取，会发生以下情况：
    *   同步：CP 似乎在等待来自 STDIN 的输入，而 PP 等待来自 STDERR 的更多数据。即使偷看或检查流是否关闭也会导致死锁。
    *   异步：在 CP 等待从其 STDIN 读取之前，不读取第二行。

假设我已经正确诊断出问题，我仍然不知道该怎么做。

至于我尝试过的选项：

*   在[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx "重定向标准输出 - MSDN")之后，我尝试从标准错误中同步读取。这似乎充满了危险，因为任何方法只要读取标准错误中的最后一个字符就会无限期地阻塞。
*   上一个链接还建议*“或者，您可以通过创建两个线程并在单独的线程上读取每个流的输出来避免死锁情况。”* ，但是我在这条赛道上的努力显然被误导了。当我知道我已经到达流的尽头时，我看不到线程如何提供帮助，为时已晚。

为了澄清，我怎样才能安全地读到标准错误流的末尾而不会导致死锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:18:18.383

I think your analysis is correct. I've had to do a bit of CP stdio redirection, and it's always a pain on Win32 (designed as a UI platform rather than command-line...).

Anyway, you could try reading from the actual streams (using `BeginRead`, or `ReadAsync` if .NET 4.5) and doing the `Encoding` conversion yourself. That would be my first attempt.

Otherwise, you'd have to use multiple threads. I've done this before, and it's a pain.

Either way, you're not actually waiting for the end of the CP's stderr. Just monitor it for you magic string. Most console programs do not close their stdout or stderr until they exit, so you can't read it all the way to the end until it has exited.

# ios - UIPageViewController：显示和缓存 PDF 页面

> ID：11191580
> 
> 赞同：1
> 
> 时间：2012-06-25T14:46:54.837
> 
> 标签：ios, performance, pdf, uiview, uipageviewcontroller

我正在使用 Apple 的“基于页面的应用程序”Xcode 模板和[这种渲染方法](http://iosguy.com/2010/09/04/presenting-pdf-files-by-yourself/)。

我通过drawRect将每个PDF页面呈现到它自己的PDFPageView中，然后将它作为子视图添加到每个页面的DataViewController。

这是可行的，但是由于页面的渲染需要一些时间，它会延迟页面的滑动动画，所以我想知道如何预渲染和缓存页面。

到目前为止，我在页面呈现**后将**DataViewControllers 放入可变字典中。对该索引的后续调用 viewControllerAtIndex 确实更快，但是如果我继续浏览较长（52 页，11MB）PDF 文件中的页面到最后一页，然后再往回滑动，10 页后事情会再次变慢，尽管 DataViewControllers 已经存在于字典中。

这是正确的方法，还是我应该缓存渲染的 PDFPageViews？

当我想提前预渲染时，是否应该使用 dispatch_async 进行渲染，并将预渲染的 PDFPageView 或 DataViewController 放入字典中？

还是我应该完全使用完全不同的方法？谢谢！

# database-design - hotmail集群数据存储是如何工作的？

> ID：11191587
> 
> 赞同：0
> 
> 时间：2012-06-25T14:47:10.560
> 
> 标签：database-design, architecture, hotmail

根据[本文](http://windowsteamblog.com/windows_live/b/windowslive/archive/2009/12/22/a-peek-behind-the-scenes-at-hotmail.aspx)，每个集群都有自己的存储。

" *一个集群承载着数百万用户（多少取决于硬件的使用年限），并且是一组独立的服务器，包括： **前端服务器**——用于检查病毒并托管与您的浏览器或邮件客户端对话的代码的服务器, 使用 POP3 和 DeltaSync 等协议 **后端服务器**- SQL 和文件存储服务器、垃圾邮件过滤器、监控和垃圾邮件数据的存储、目录代理和处理入站和出站邮件的服务器 **负载平衡器**- 用于分配负载的硬件和软件更均匀以获得更快的性能。* ”

我猜用户分配到哪个集群取决于您的地理位置（IP 地址）。在这种情况下，如果我从德国给自己发送一封电子邮件，然后在我来到美国时检查我的电子邮件，我将被分配到不同的集群（因此不同的 SQL 数据库）。那么对于我来说，能够在美国看到那封邮件，是否意味着所有集群中的所有数据库都在不断同步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:08:05.823

地理很可能是您分配集群的方式（将其视为内容交付网络）。我认为你的假设是正确的。

当然我不能确定这一切是如何运作的，但根据我与其他大型供应商的经验，我的想法如下：

电子邮件冗余存储在集群中（因此机器/硬盘驱动器的丢失）没有任何意义，并且这些集群也（可能）冗余存储在地理上独立的位置，从而减少大规模中断和灾难对最终用户的影响. 这种推/拉在数据集群中不断进行（想想像[HDFS](http://hadoop.apache.org/hdfs/)这样的文件系统），以确保 n 级冗余。由于您在任何给定小时内登录到不同集群中的系统的机会很小，因此不需要实时同步信息（就可用性而言），但可能在几分钟/小时的数量级，并尽可能快地运行他们的机器以确保数据的持久性。

集群设置可能类似于亚马逊：东/西海岸集群，欧洲集群，以及根据许多其他用户所在的位置，一个亚洲集群（或两个或三个）。这些之间的数据推拉不是几分钟，而是几小时。

所有这些冗余和同步对于其他服务来说都很重要，就像你提到的文章一样，skydrive 和 messenger 都共享这个 sayme 基础设施。

# ruby - CarrierWave 无法将 nil 转换为 String

> ID：11191596
> 
> 赞同：2
> 
> 时间：2012-06-25T14:47:38.457
> 
> 标签：ruby, sinatra, datamapper, carrierwave

我只想用carrierwave做一个简单的图像上传，到目前为止上传工作（至少我是这么认为的），但是当我尝试用

```
on "/entries" do

entries = Entry.all

entries.each do |entry|
  @foobar = "#{@foobar} entry.image.url"
end

"#{@foobar}"

end 
```

我只是收到以下错误

```
TypeError - can't convert nil into String:
        /home/peer/.gem/ruby/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/uploader/url.rb:22:in `expand_path'
        /home/peer/.gem/ruby/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/uploader/url.rb:22:in `url'
        /home/peer/.gem/ruby/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/uploader/versions.rb:159:in `url'
        /home/peer/.gem/ruby/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/uploader/default_url.rb:8:in `url'
        /home/peer/.gem/ruby/1.9.1/gems/carrierwave-0.6.2/lib/carrierwave/uploader/url.rb:27:in `to_s'
        /home/peer/Project/myapp/controllers/view_entries.rb:4:in `block in <top (required)>'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1212:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1212:in `block in compile!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `[]'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `block (3 levels) in route!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:801:in `route_eval'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `block (2 levels) in route!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:822:in `block in process_route'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `catch'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `process_route'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:784:in `block in route!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `each'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `route!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:886:in `dispatch!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `block in call!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `block in invoke'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `catch'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:705:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/showexceptions.rb:21:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `block in call'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1416:in `synchronize'
        /home/peer/.gem/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `call'
        /home/peer/.gem/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
        /usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
        /usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
        /usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

这是我的入门模型：

```
class ImageUploader < CarrierWave::Uploader::Base
    def store_dir
        "public/user_uploads"
    end

    def extensions_white_list
        %w(jpg jpeg gif png)
    end

    storage :file
end

class Entry
    include DataMapper::Resource

    property :id, Serial
    property :text, Text
    property :created_at, String

    mount_uploader :image, ImageUploader

    belongs_to :user
end 
```

所以我绝对不知道这里有什么问题......

**为什么无法获取图片的url？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:01:31.690

您应该在以下代码之前初始化 @foobar：

```
entries.each do |entry|
  @foobar = "#{@foobar} entry.image.url"
end 
```

请注意，@foobar 将采用最后一个条目图像 url 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T02:41:25.167

您可能需要设置 Carrierwave 的根路径，例如：

```
CarrierWave.configure do |config|
  config.root = Rails.root
end 
```

# android - android意图问题：

> ID：11191608
> 
> 赞同：0
> 
> 时间：2012-06-25T14:48:17.050
> 
> 标签：android, android-intent

好的，所以我一直在尝试使用意图将所有单独的类（目前是两个）整合到一个类中。还一直在搜寻网络，试图找出问题所在以及如何将所有内容集中在一个屋檐下。

这是代码的链接： [我的代码截至目前。](http://pastebin.stonekeep.com/12171%20%20Code%20as%20of%20present%20time.)
到目前为止，我知道所有这些都有效，因为每个单独的班级都是独立工作的。我检查了清单上的一切都很好。Eclipse 在我运行它时没有显示任何错误，代码 biffs。

我知道这很可能是一些愚蠢的事情，但在过去的几天里我一直为此烦恼，我觉得除非我能解决这个问题，否则我无法在代码中继续前进，因为我最终会回到这个问题上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:53:25.817

您不必使用主要方法！在您的清单中，您声明您的应用程序应该从哪个 Activity 开始。这个活动是一个将扩展“活动”的类。您可以覆盖 onCreate 活动并开始在那里做事。希望我没有误会你...

本文档可能会对您有所帮助：http: [//developer.android.com/guide/components/index.html](http://developer.android.com/guide/components/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:54:56.643

Android 不使用“main()”方法。启动您的应用程序所需要做的就是将您的一项活动注册为主要的启动器活动。您在清单中执行此操作。

然后，当用户触摸应用程序图标时，将显示该活动。

# list - Orchard 查询列表渲染 - 删除 ul li

> ID：11191613
> 
> 赞同：13
> 
> 时间：2012-06-25T14:48:33.523
> 
> 标签：list, widget, orchardcms, projection

我正在使用最新版本的 Orchard，并创建了一个包含三篇文章的投影小部件。我想在源代码中直接显示它们：

```
 <article>content</article>  
 <article>content</article>  
 <article>content</article> 
```

即不包含在列表中

```
<ul>  
<li>  
<article>content</article>  
</li>  
<li>  
<article>content</article>  
</li>  
</ul> 
```

我怎样才能去掉列表标签但留下文章？我不知道如何`Model.List`在 ProjectionPart.cshtml 中编辑，如果这甚至是要编辑的正确文件！？

我真的很感激任何人能给我的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:32:27.330

您可以覆盖主题中的默认行为。当它评论 Bertrand Le Roy 时，您可以在这些帖子中找到更多信息：

[http://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx](http://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx)

[http://weblogs.asp.net/bleroy/archive/2011/05/23/orchard-list-customization-first-item-template.aspx](http://weblogs.asp.net/bleroy/archive/2011/05/23/orchard-list-customization-first-item-template.aspx)

# android - 如何使此滚动布局起作用？

> ID：11191618
> 
> 赞同：1
> 
> 时间：2012-06-25T14:48:42.610
> 
> 标签：android, user-interface

我目前正试图让我的 UI 有一个标题栏，一个底部按钮栏，中间有一个 ScrollView。我可以让它的零碎工作，但是一旦我得到一个不同的工作，旧的部分就会回到不出现的状态。这是左侧我的 UI 的图片，以及我希望它在右侧的样子...（抱歉草率，我在 MS Paint 中对其进行了编辑：P）

总而言之，我希望移动版本和类型字段，以便为 XML 文件中的其他 TextView 留出空间，并且我希望两个按钮都出现在底部栏上。

![在此处输入图像描述](../Images/d9c8e95bdb1ac7b4df6472bb69cfe5f0.png)

编辑 ：

底部的按钮应该大小相等，我在 MS Paint 中制作盒子的天赋不是很高

编辑 2：对不起....这是我的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="SN : " />

            <TextView
                android:id="@+id/serialNumberView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Ver : " />

            <TextView
                android:id="@+id/versionView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Type : " />

            <TextView
                android:id="@+id/typeView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal" />

    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:orientation="vertical"
                android:layout_weight="1">

                    <CheckBox
                        android:id="@+id/floatCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Float" />

                    <CheckBox
                        android:id="@+id/tripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Trip" />

                    <CheckBox
                        android:id="@+id/closeCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Close" />

                    <CheckBox
                        android:id="@+id/blockedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Blocked" />

                    <CheckBox
                        android:id="@+id/hardTripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Hard Trip" />

                    <CheckBox 
                        android:id="@+id/phaseAngleCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase angle wrong for closing" />

                    <CheckBox
                        android:id="@+id/diffVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Differential volts too low" />

                    <CheckBox
                        android:id="@+id/networkVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Network volts too low to close" />

                    <CheckBox
                        android:id="@+id/usingDefaultsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Using Defaults( Reprogram )" />

                    <CheckBox
                        android:id="@+id/relaxedCloseActiveCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Relaxed Close Active" />

                    <CheckBox
                        android:id="@+id/commBoardDetectedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Comm Board Detected" />

                    <CheckBox 
                        android:id="@+id/antiPumpBlock"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Anti-Pump Block" />

                    <CheckBox
                        android:id="@+id/motorCutoffCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Motor Cutoff Inhibit" />

                    <CheckBox
                        android:id="@+id/phaseRotationCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase Rotation Wrong" />

                    <CheckBox
                        android:id="@+id/usingDefaultDNPCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text= "Using Default DNP Profile" />
            </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_weight="1" >

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Back" />

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Read" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:53:23.933

将按钮更改为`android:layout_width="wrap_content"` 您也可以在`sp`或`dip`中输入值`wrap_content`

并在文本中添加`android:layout_marginLeft="10sp"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:52:36.670

试试这个

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="1.0" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
       android:weightSum="9"
       android:gravity="center"
        >
            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="SN : "

                android:layout_weight="1" />

            <TextView
                android:id="@+id/serialNumberView"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                 android:layout_weight="2" 
                 android:text="saasdasd ssadasd sadas asd sd sd"/>

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Ver : "
                 android:layout_weight="1" />

            <TextView
                android:id="@+id/versionView"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:layout_gravity="center"
                 android:layout_weight="2"
                  android:text="saasdasd ssadasd sadas asd sd sd" 
                />

            <TextView
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:text="Type : "
                android:layout_gravity="center"
                   android:layout_weight="1" 

                 />

            <TextView
                android:id="@+id/typeView"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:layout_gravity="center"
                  android:layout_weight="2" 
                   android:text="saasdasd ssadasd sadas asd sd sd" />

    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:orientation="vertical"
                android:layout_weight="1">

                    <CheckBox
                        android:id="@+id/floatCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Float" />

                    <CheckBox
                        android:id="@+id/tripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Trip" />

                    <CheckBox
                        android:id="@+id/closeCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Close" />

                    <CheckBox
                        android:id="@+id/blockedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Blocked" />

                    <CheckBox
                        android:id="@+id/hardTripCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Hard Trip" />

                    <CheckBox 
                        android:id="@+id/phaseAngleCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase angle wrong for closing" />

                    <CheckBox
                        android:id="@+id/diffVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Differential volts too low" />

                    <CheckBox
                        android:id="@+id/networkVoltsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Network volts too low to close" />

                    <CheckBox
                        android:id="@+id/usingDefaultsCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Using Defaults( Reprogram )" />

                    <CheckBox
                        android:id="@+id/relaxedCloseActiveCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Relaxed Close Active" />

                    <CheckBox
                        android:id="@+id/commBoardDetectedCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Comm Board Detected" />

                    <CheckBox 
                        android:id="@+id/antiPumpBlock"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Anti-Pump Block" />

                    <CheckBox
                        android:id="@+id/motorCutoffCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Motor Cutoff Inhibit" />

                    <CheckBox
                        android:id="@+id/phaseRotationCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Phase Rotation Wrong" />

                    <CheckBox
                        android:id="@+id/usingDefaultDNPCheck"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text= "Using Default DNP Profile" />
            </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="1" >

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:text="Back"
            android:layout_weight=".5" />

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:text="Read"
            android:layout_weight=".5" />
    </LinearLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/ff46e44fc09a1fd37ea760a6ed8e62e8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:55:01.693

要修复按钮使用

```
android:layout_weight="1" 
```

我不知道如何帮助你解决其他问题，试着给他们一些左边距。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T14:56:14.593

`Use` **表格布局** `along with` **表格行** `to place both the buttons at the bottom` `side to side.`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T15:03:03.633

这应该会有所帮助。标题由空格分隔，但您可以做一些不同的事情以使其看起来更好。

用 padding 和`TableLayout`for更新`TextViews`。

XML:

```
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TableRow>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="SN: " />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="Test" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="Ver: " />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="Test" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="Type: " />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4"
            android:text="Test" />
    </TableRow>
</TableLayout>

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical" >

        <CheckBox
            android:id="@+id/floatCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Float" />

        <CheckBox
            android:id="@+id/tripCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Trip" />

        <CheckBox
            android:id="@+id/closeCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Close" />

        <CheckBox
            android:id="@+id/blockedCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Blocked" />

        <CheckBox
            android:id="@+id/hardTripCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hard Trip" />

        <CheckBox
            android:id="@+id/phaseAngleCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Phase angle wrong for closing" />

        <CheckBox
            android:id="@+id/diffVoltsCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Differential volts too low" />

        <CheckBox
            android:id="@+id/networkVoltsCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Network volts too low to close" />

        <CheckBox
            android:id="@+id/usingDefaultsCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Using Defaults( Reprogram )" />

        <CheckBox
            android:id="@+id/relaxedCloseActiveCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Relaxed Close Active" />

        <CheckBox
            android:id="@+id/commBoardDetectedCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Comm Board Detected" />

        <CheckBox
            android:id="@+id/antiPumpBlock"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Anti-Pump Block" />

        <CheckBox
            android:id="@+id/motorCutoffCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Motor Cutoff Inhibit" />

        <CheckBox
            android:id="@+id/phaseRotationCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Phase Rotation Wrong" />

        <CheckBox
            android:id="@+id/usingDefaultDNPCheck"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Using Default DNP Profile" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Back" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Read" />
</LinearLayout> 
```

示例图片： ![在此处输入图像描述](../Images/00b13bc23afc5f7ff4d8de92a33f1a43.png)

# iphone - 排序一个 NSArray 并与第二个数组匹配顺序？

> ID：11191620
> 
> 赞同：1
> 
> 时间：2012-06-25T14:48:45.023
> 
> 标签：iphone, objective-c, ipad, sorting

我有两个 NSMutabeArrays，一个是数字，另一个是单词。

假设这两个数组如下所示：

```
1  hello
24 no
11 there
5  boo 
```

现在我对第一个数组进行排序，因此数字是递减的（如下所示，我希望单词与数字一起移动，以便它们保持与它们关联的原始数字）：

```
24 no
11 there
5  boo
1  hello 
```

知道如何实现这一目标吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:54:44.940

您应该将数字和单词组合成一个具有两者属性的对象。然后，您可以维护这些对象的有序数组，而不是尝试协调两个独立的数组。

实现这一点的一种方法是使用 a `NSDictionary`，但我通常建议使用一个简单的模型对象来保存这两个值：

```
@interface SomeObject : NSObject
@property (nonatomic, readwrite, strong) NSString *word;
@property (nonatomic, readwrite, assign) NSUInteger number;
@end

@implementation SomeObject
@synthesize word=_word;
@synthesize number=_number;
@end 
```

还有其他方法可以构建此对象（例如，您可以使其不可变，这对多线程应用程序很有用），但这是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:11:48.607

这两个数组显然是非常紧密耦合的，因此您希望在程序设计中体现这种耦合，而不是仅仅将其埋没在排序例程的实现中。如何最好地做到这一点取决于您必须适应解决方案的上下文。单阵列解决方案可能是最好的，也可能不是。另一种可能的解决方案是创建一个包含两个数组的新类，并负责在排序、插入、删除等时保持它们的一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:15:48.523

虽然不是最佳答案，但肯定是我实现多列表的一种方式（可按任何列排序）。

我这样做是为了让代码本身在平台之间更易于传输。

这样做的方法是保存一个索引映射数组。它的工作方式是，你有 dataArray1 和 dataArray 2。如果你想按 dataArray1 排序，那么你在映射数组中保存新的映射索引（当你对 dataArray1 进行排序时）。排序完成后，映射数组保存的**数据**将是dataTable2中需要放在映射数组**索引****位置的索引**。

我看到很多关于数据耦合的答案。这在很大程度上取决于您真正打算如何使用数据。在我的设计中，数据仅在表格视图中显示（以及表格显示）时才需要耦合，但在我的图表视图中，这种方式的数据排序无关紧要，因此不需要耦合。我认为这里有很多很好的答案，问题是围绕这些数据设计了什么？？？

# java - ResultSet sqlite 多列多表

> ID：11191622
> 
> 赞同：0
> 
> 时间：2012-06-25T14:48:56.237
> 
> 标签：java, sqlite

我是 sqlite 的初学者，我使用它我别无选择，我用 java 编码，我有一个请求，它应该作为 reslutat 两列返回，但它返回任何东西，结果集是 org.sqlite.RS@..，请我需要这方面的帮助，提前谢谢你。

```
 public List<String> executeSelect( String ArgRequete, boolean All) throws SQLException
{
    String ReturnColumn = ArgRequete.substring( ArgRequete.indexOf( "SELECT" )+ 6, ArgRequete.indexOf( "FROM" ) ).replaceAll(" ","");
    List<String> Str = new ArrayList<String>();
    logger.info("ret :"+ReturnColumn);
    String[] columns=ReturnColumn.split(",");
    for(String ico:columns){
     logger.info(ico);
   }
    stmt = con.createStatement();

    rs = stmt.executeQuery( ArgRequete );
    logger.info(ArgRequete);

    logger.info("mon resultSet:"+rs);
    if ( !All )
    {
        if ( rs.next() )
        {
            String result = "";
                   for(String aColumn : columns){
                                result += rs.getString(aColumn ) + ",";
                                logger.info(result);

                    }
                    Str.add( result );
         }
    }
    while ( rs.next() && All )
    {
                               String result = "";
                               for(String aColumn : columns){
                                           result += rs.getString( aColumn ) + ",";
                               }
        Str.add( result );
    }
    stmt.close();
    return Str;
}

   public void etapeParametrerOption(String login) throws IOException, SQLException
{
    assertTrue( "Texte 'Paramétrer les options' non présent, voir code source HTML dans LogOut",selenium.isTextPresent( "Paramétrer les options" ) );

   String [] tab=LogFile.showWSEtAppelCOffrEFrom(login);
  List<String>ls=new ArrayList<String>();

   for(String itab : tab){

       ls=dbCOffrE.executeSelect("SELECT busitypid,attblabel FROM t_article art, t_attribute att , t_srvbrick_attr_article srv WHERE att.attbid = srv.attbid and art.artid = srv.artid and att.modoptidmodifiable = '2' and (att.attbinactivationdate is null or att.attbinactivationdate < date('now')) and art.artshortlabel='"+itab+"'",false);  logger.info("ma liste :"+ls);
   }} 
```

我的文件日志包含什么

```
 INFO  [com.sfr.price.functionalTest.commons.SQLBase.executeSelect](82) [] ret :busitypid,attblabel
 INFO  [com.sfr.price.functionalTest.commons.SQLBase.executeSelect](85) [] busitypid
 INFO  [com.sfr.price.functionalTest.commons.SQLBase.executeSelect](85) [] attblabel
 INFO  [com.sfr.price.functionalTest.commons.SQLBase.executeSelect](90) [] SELECT busitypid,attblabel FROM t_article art, t_attribute att , t_srvbrick_attr_article srv WHERE att.attbid = srv.attbid and art.artid = srv.artid and att.modoptidmodifiable = '2'  and art.artshortlabel='8001P'
 INFO  [com.sfr.price.functionalTest.commons.SQLBase.executeSelect](93) [] mon resultSet:org.sqlite.RS@24c672
 INFO  [com.sfr.price.functionalTest.scenario.impl.AJLINGE.etapeParametrerOption](799) [] ma liste :[] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:14:06.527

打印结果集时得到的`org.sqlite.RS@24c672`原因是该类没有覆盖基对象类中[toString()的默认实现。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)根据[SQLiteJDBC 文档](http://www.zentus.com/sqlitejdbc/)，您应该能够遍历 ResultSet 并相应地打印出值。

像这样的东西应该工作：

```
while (rs.next()) {
    logger.info("busitypid = " + rs.getString("busitypid");
    logger.info("attblabel = " + rs.getString("attblabel");
}
rs.close(); 
```

另外，我不明白你的 boolean 的目的`All`。（注意：Java 风格约定表明此变量应命名为`all`，首字母小写。）由于`while`循环和`if`语句的编写方式，您最终要么*只*打印列标题，要么*只*打印结果集的内容. 根据您的日志文件的内容，我假设您已通过`All = false`- 这将使您的输出正确。

# orbeon - orbeon中的空输入缓冲区

> ID：11191626
> 
> 赞同：1
> 
> 时间：2012-06-25T14:49:14.387
> 
> 标签：orbeon

在 orbeon xml 中选择单选按钮时，我们在错误对话框中得到空输入缓冲区异常。这个问题出现在 IE 8 浏览器及更高版本中，它在 IE 6 中运行良好。我们已经搜索，我们得到了下面的链接，这表明这个问题仍然存在：

[http://forge.ow2.org/tracker/index.php?func=detail&aid=312234&group_id=168&atid=350207](http://forge.ow2.org/tracker/index.php?func=detail&aid=312234&group_id=168&atid=350207)

谁能告诉我们这个问题在最新的 orbeon 3.9 中是否仍然存在？

我们试图提供一些解决方法，但我们仍然面临问题。下面是分析：

场景：重复内的添加/删除单选按钮引发以下错误。解决方法：在本地 Tomcat 上，我们将属性“encrypt-item-values”设置为 false（这不会加密选项值）并且问题已解决，但未选择该选项且未保存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:39:34.927

您指出的问题只有在您有自己的 JavaScript 代码来设置单选按钮的值时才会出现，而不是在您单击页面以选择一个值时出现，这似乎就是您正在做的事情。

在 Orbeon，我们不知道任何像您用最新代码描述的问题。我鼓励你：

1.  使用 PE 或 CE 每晚构建来尝试您的案例，您可以从[下载页面](http://www.orbeon.com/forms/download)获取。
2.  如果您可以使用 PE 或 CE 夜间构建重现此问题，请尝试创建一个重现问题的最小示例，将其粘贴为[Gist](http://gist.github.com/)，并在下面发表评论，以便我们对其进行研究。

# c# - 使用 ServerManager.OpenRemote 远程连接到 IIS7

> ID：11191634
> 
> 赞同：6
> 
> 时间：2012-06-25T14:49:46.563
> 
> 标签：c#, iis, iis-7, iis-7.5

我正在尝试使用 ServerManager.OpenRemote("[IP Address]") 连接到 IIS7+。我正在从 HyperV 主机连接到其客户端虚拟机。我不断收到以下错误：'System.Runtime.InteropServices.COMException：RPC 服务器不可用。（来自 HRESULT 的异常：0x800706BA）'。我可以使用通过管理服务（客户端）连接的 IIS 管理器（服务器）连接到客户端的 IIS。由于我无法使用服务器管理器连接，我猜测管理服务使用 HTTP 而服务器管理器使用 COM 连接。有人可以引导我朝着正确的方向前进，我将如何允许这种远程连接？

编辑：我已经使用 netmon 验证了两台计算机之间的 DCOM 通信。我对客户端机器“DCOM:RemoteGetClassObject Request”和“DCOM:RemoteGetClassObject Response”有以下描述。响应的描述中也有“ORPCFNULL”，这表明客户端找不到请求的 COM 对象。有人可以验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T13:30:52.477

我找到了我的解决方案。添加注释以帮助他人。

默认情况下，Windows 防火墙会阻止端口 135（用于握手此连接）。打开此端口后，我仍然遇到问题。

握手后，使用 1024-65535 之间的动态端口进行通信。如果不允许，Windows 防火墙也会阻止此操作。

因为我的操作纯粹是内部操作，所以我为该端口范围的所有 10.1.10.0/24 IP 创建了一个允许规则。

您还可以将此 DCOM 配置为具有您选择的静态端口并为该端口设置防火墙规则。

更多信息：http: [//mvolo.com/connecting-to-iis-70-configuration-remotely-with-microsoftwebadministration/](http://mvolo.com/connecting-to-iis-70-configuration-remotely-with-microsoftwebadministration/)

# microsoft-sync-framework - 使用预填充数据库部署 MS Sync Framework？

> ID：11191635
> 
> 赞同：0
> 
> 时间：2012-06-25T14:49:46.843
> 
> 标签：microsoft-sync-framework

我想使用预填充的 Sql CE 数据库部署应用程序。

步骤：
1) 在部署时：在 VS 2010 中使用 LocalDataCache 对象创建 sql ce 数据库并预先填充。压缩此数据库并将其放在服务器上。
2) 客户端：下载应用程序
3) 客户端应用程序：下载压缩的数据库并解压缩。
4）客户端应用程序：针对原始数据库对 WCF 服务进行同步，并且只拉下增量更改。

我已经完成了上述工作，直到第 4 步
。在第 4 步，wcf 服务正在返回数据库中的所有数据（即，它将我的本地数据库视为空的。我想这是因为锚点出来了的同步。

我想做的是在部署时重置锚点，以便服务器只返回部署和客户端下载和同步之间发生的更改。

有谁知道如何做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:32:03.120

我认为最简单的方法是将同步数据库的逻辑隔离在一个单独的项目中，制作一个创建数据库的小型控制台应用程序，通过直接与主数据库同步来预填充它，压缩它并自动将它放在服务器上。然后，您可以手动或作为构建过程的一部分触发此控制台应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:51:57.533

听起来您想做所谓的“快照初始化”。有关快照初始化的更多信息，请查看本文：http: [//msdn.microsoft.com/en-us/library/gg294193.aspx](http://msdn.microsoft.com/en-us/library/gg294193.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:54:11.627

在第 1 步，假设您没有选择快照？快照不存储锚点。

如果你想玩转锚，你实际上可以在 SqlCeClientSyncProvider 的 GetTableReceivedAnchor() 和 SetTableReceivedAnchor() 中读/写它们

# c++ - 我应该将单元测试放在单独的库中吗？单独的子目录？

> ID：11191637
> 
> 赞同：4
> 
> 时间：2012-06-25T14:49:59.670
> 
> 标签：c++, unit-testing, code-organization, boost-test

我有一个大型代码库，其中包含一些（太少）单元测试；我正在向库中添加代码，尝试对新代码进行单元测试（我还想在将来为旧代码添加单元测试，当我有更多经验时）。

我们目前使用自定义（不是很精细）的单元测试框架；我想切换到`boost.test`.

我的图书馆布局是：

*   mylib1（300 个文件，70000 行代码）

    *   源代码
        *   富
            *   foo.cpp
            *   foo_part.cpp
            *   foo_part.h
            *   UnitTests -**我应该把它移到外面`mylib`吗？**
                *   foo_test1.cpp
                *   foo_test2.cpp
                *   foo_test3.cpp
        *   酒吧
            *   酒吧.cpp
            *   bar_part.cpp
            *   bar_part.h
            *   UnitTests -**它属于这里吗？**
                *   bar_test1.cpp
                *   bar_test2.cpp
                *   bar_test3.cpp
    *   包括
        *   foo.h
        *   酒吧.h
*   mylib2（70 个文件，7000 行代码）

    *   看起来像上面的mylib1
*   单元测试框架

    *   源代码
        *   MockObject1.cpp -**它属于这里吗？**
        *   Asserter.cpp -*`boost.test`将替换它*
        *   TestFixture.cpp -*`boost.test`将替换它*
    *   包括
        *   模拟对象1.h
        *   Asserter.h -*`boost.test`将替换它*
        *   TestFixture.h -*`boost.test`将替换它*

我在这里问以下问题：

*   单元测试应该是`mylib`DLL 的一部分吗？（我链接`mylib1`到`mylib2`一个 DLL 中）
*   单元测试的源代码应该位于`mylib1`目录下吗？
*   既然我有`mylib1`and `mylib2`，那么相应的单元测试应该如何定位 - 在同级目录中，一起等等？
*   我应该把模拟对象的源代码放在哪里？（他们同时提供`mylib1`和`mylib2`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:01:24.837

1.  单元测试是一种文档，因此我将保持目录结构不变
2.  mocks/fakes 是单元测试中的助手，因此我不会将它们留在源目录中。在源中创建一个新目录，并将它们移动到那里。

实际上，我会进一步简化它：

```
 + mylib1 (300 files, 70000 lines of code)
    + unit_tests
      + test_foo.cpp
      + test_bar.cpp
    + mocks
      + mock_foo.hpp
      + mock_bar.hpp
    + foo.cpp
    + foo.hpp
    + bar.cpp
    + bar.hpp
 + mylib2
similar as for mylib1 
```

# php - 将随机数拉入 symfony 形式

> ID：11191644
> 
> 赞同：0
> 
> 时间：2012-06-25T14:50:29.387
> 
> 标签：php, forms, symfony-1.4, symfony-forms

我正在拉两个随机数以创建一个 symfony 形式的数学方程。问题是表单提交时，随机数更新，导致表单提交无效。如何保持加载初始数值，以便表单处理，但成功处理后，加载一个新集合？

**动作类**

```
 public function executeIndex(sfWebRequest $request)
  {
    $num1 = rand(0 , 20);
    $num2 = rand(0 , 20);
    $realAnswer = $num1 + $num2;

    $show = $num1 . " + " . $num2 . " = ";

    $this->getResponse()->setSlot("displayNum", $show);

    $this->form = new UserForm();

    echo $num1 . "<br>" . $num2 . "<br>" . $realAnswer;

    if ($request->isMethod('post') && ($request->getPostParameter('captcha[answer]') == $realAnswer))
    {
        $this->processForm($request, $this->form);  
    }
  } 
```

我正在使用部分来呈现表单-> **_form.php**

```
<tr height="40">
        <td width="100" valign="middle">
            <?php echo get_slot("displayNum", "default value if slot doesn't exist"); ?>
        </td>
        <td width="400" colspan="4" valign="middle">
        <input type="text" id="captcha" class="url" name="captcha[answer]" style="width:100px" />
        </td>
    </tr> 
```

示例：页面最初加载时，会生成两个随机数（例如 10 和 15）。这将呈现 10 + 15 =（输入字段）

用户插入 25 并点击保存。这是正确的，但是因为表单再次执行索引操作，所以有一组新的随机数使“if”条件为假。

更新：

根据 j0k 的建议，我已对操作进行了更改。

```
public function executeIndex(sfWebRequest $request)
    {
      $user = $this->getUser();

    if (!$request->isMethod('post'))
    {
      // first display of the form, generate nums
      $num1       = rand(0 , 20);
      $num2       = rand(0 , 20);
      $realAnswer = $num1 + $num2;

      // store them in session
      $user->setAttribute('realAnswer', $realAnswer);
      $user->setAttribute('num1', $num1);
      $user->setAttribute('num2', $num2);
    }
    else
    {
      // the form is submitted, retrieve nums from the session
      $num1       = $user->getAttribute('realAnswer', null);
      $num2       = $user->getAttribute('num1', null);
      $realAnswer = $user->getAttribute('num2', null);
    }

    //setup slot
     $show = $num1 . " + " . $num2 . " = ";
     echo $realAnswer . "-Actual<br>" . $request->getPostParameter('captcha[answer]') . "-User submitted";

    $this->form = new UserForm();

    if ($request->isMethod('post') && (($request->getPostParameter('captcha[answer]') == $realAnswer)))
    {
        $this->processForm($request, $this->form);  
    }
  } 
```

这应该工作。查看变量，看起来页面正在拉动会话变量，而不是在第二篇文章中添加新的随机数。奇怪的。

解决

这是一个代码错误。我把变量交叉了。

```
else
    {
    // the form is submitted, retrieve nums from the session
     $num1       = $user->getAttribute('num1', null);
     $num2       = $user->getAttribute('num2', null);
     $realAnswer = $user->getAttribute('realAnswer', null);
../ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:52:44.720

您可以将随机数存储为会话变量，这些变量将在重新加载后持续存在：

```
session_start();
$_SESSION["num1"] = rand(0 , 20);
$_SESSION["num2"] = rand(0 , 20); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:48:40.923

会话是一个好点。

如果未发布表单，请将结果存储在会话中，以便之后进行检查。

```
public function executeIndex(sfWebRequest $request)
{
  $user = $this->getUser();

  if (! $request->isMethod('post'))
  {
    // first display of the form, generate nums
    $num1       = rand(0 , 20);
    $num2       = rand(0 , 20);
    $realAnswer = $num1 + $num2;

    // store them in session
    $user->setAttribute('realAnswer', $realAnswer, 'captcha');
    $user->setAttribute('num1', $num1, 'captcha');
    $user->setAttribute('num2', $num2, 'captcha');
  }
  else
  {
    // the form is submitted, retrieve nums from the session
    $num1       = $user->getAttribute('num1', null, 'captcha');
    $num2       = $user->getAttribute('num2', null, 'captcha');
    $realAnswer = $user->getAttribute('realAnswer', null, 'captcha');
  }

  $show = $num1 . " + " . $num2 . " = ";

  $this->getResponse()->setSlot("displayNum", $show);

  $this->form = new UserForm();

  if ($request->isMethod('post') && ($request->getPostParameter('captcha[answer]') == $realAnswer))
  {
    $this->processForm($request, $this->form);
  }
} 
```

如果表单有效，不要忘记清空会话中的相关值。

```
protected function processForm(sfWebRequest $request, $form)
{
  // bind form

  if ($form->isValid())
  {
    // clear the session
    $this->getUser()->getAttributeHolder()->removeNamespace('captcha');
  }
} 
```

Ps：如果你正在寻找一个透明的验证码，我推荐你[这个方法](https://stackoverflow.com/a/8637/569101)。我已经对其进行了非常成功的测试。

# google-maps - 如何在 Google Places API 上唯一标识一个地点

> ID：11191645
> 
> 赞同：3
> 
> 时间：2012-06-25T14:50:30.077
> 
> 标签：google-maps, google-maps-api-3, autocomplete

我正在开发一个使用 Google Maps JavaScript API v3 的网络应用程序。我有这个问题：我会使用 Places Autocomplete 在我的数据库中保存一个位置。用户在文本字段中输入一个地点，然后在调用 API 之后，我的应用程序应该检查我的数据库中是否存在所选地点的城市；如果为真，则返回城市 ID，否则插入城市并返回最后插入的 ID。

为此，我需要唯一标识一个地点。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:46:05.633

编辑： Places API 给出的 PlaceResult 包含一个标识符。您不能将其用作唯一 ID，因为它可以按照[此处记录的方式更改](https://developers.google.com/maps/documentation/javascript/reference?hl=es#PlaceResult)

这是来自 ES（西班牙语）浏览器的“London, United Kingdom”的位置结果：

```
address_components: Array[4]
formatted_address: "Londres, Reino Unido"
geometry: Object
html_attributions: Array[0]
icon: "http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png"
id: "b1a8b96daab5065cf4a08f953e577c34cdf769c0"
name: "Londres"
reference: "CnRmAAAAxcbYEYZvXgbynu4U43cAtEqvCzpZrJUsDusnrYe2pu9nl0zCjyxdeSBMeTVbYQjzaJc56HEyV-YuSJUXLA0sbJUx-1GcaCEFYYX0HSQqXXoId3u_KClG9TpxCUyZhS-dJoLOQj1YJbmPcaWiuFM87hIQGOszWwqjaFe0bseLKvsicRoUCadktNXFFSgNAcHrD8LMSZuXbSA"
types: Array[2]
url: "https://maps.google.com/maps/place?q=Londres&ftid=0x47d8a00baf21de75:0x52963a5addd52a99"
vicinity: "Londres"
__proto__: Object 
```

你应该实现一些逻辑来更新同一个地方的 id。尚未找到任何解决此问题的方法。

# mysql - Mysql - 触发器 - 连接 - 失败

> ID：11191648
> 
> 赞同：0
> 
> 时间：2012-06-25T14:50:42.350
> 
> 标签：mysql, string, triggers, var, not-exists

我有这个触发器并产生错误：表不存在“lecturas.TablaX”

```
Begin

# Declaramos Variables
Declare MasterX,TablaX, varchar(100);

#Determinamos Master
Set MasterX =  LPAD(New.Master, 3, 0); 

#Armar Ruta
Set TablaX = Concat ( 'lecturas.M',MasterX);

# Insertar datos en la tabla Lecturas
INSERT INTO TablaX (Id) Values (New.Master);

End 
```

# c - 计算克隆函数的变量参数数量

> ID：11191651
> 
> 赞同：3
> 
> 时间：2012-06-25T14:50:51.730
> 
> 标签：c, linux, gcc, x86-64, variadic-functions

我正在尝试 LD_PRELOAD linux 的`clone`功能。`clone`在我的 LD_PRELOADed 版本中，我需要在调用原始函数之前记录输入参数。但是，问题在于它`clone`需要可变数量的参数。它是这样声明的。

```
int clone(int (*fn)(void *), void *child_stack, int flags, void *arg, ...
/* pid_t *pid, struct user_desc *tls, pid_t *ctid */ ); 
```

现在要将这些参数传递给原始`clone`函数，我必须知道传入的参数数量。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:27:47.120

使用`va_*`函数，这些是使用变量参数列表时要走的路。

这是[手册页](http://linux.die.net/man/3/va_start)，最后还包含一个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:33:11.413

如果有 NULL 终止符，您可以`va_arg`在它不返回时调用`NULL`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T04:57:27.890

对此的正确答案是：您无法计算变量参数函数中的参数数量。

但是，对于`clone`函数，您可以通过查看参数来*假设*`flags`参数的数量，因为某些标志需要某些额外的参数。

以`CLONE_PARENT_SETTID`标志为例，它在[手册页](http://linux.die.net/man/2/clone)中指出：

> 将子线程 ID 存储在父子内存中的位置*ptid处。*（在 Linux 2.5.32-2.5.48 中有一个标志 CLONE_SETTID 可以做到这一点。）

因此，如果设置了此标志，那么您知道该`ptid`参数应该存在，并且您可以使用[`va_*`](http://linux.die.net/man/3/va_start)函数来获取它。

但是，没有办法验证用户是否确实传递了参数，这意味着如果用户没有传递，那么事情可能会出现可怕的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:40:11.137

[手册页](http://linux.die.net/man/2/clone)描述了这样的原型：

```
int clone(int (*fn)(void *), void *child_stack, int flags,
          void *arg, ... /* pid_t *ptid, struct user_desc *tls, pid_t *" ctid "); 
```

`tls`注意：我在和之间添加了一个逗号`pid_t`，我认为手册页中有错字。

然后它谈论论点`ptid`和`ctid`。所以我会继续检查文档，对于那些定义了这些额外参数的情况，这就是如何从`va_list`.

# objective-c - 解析 XML 响应 Xcode

> ID：11191652
> 
> 赞同：0
> 
> 时间：2012-06-25T14:51:00.550
> 
> 标签：objective-c, xml-parsing, xcode4.2, asihttprequest

我想使用网络服务并从服务中获取数据。我能够发送请求并接收数据，但可以帮助我解析它。这是我的代码。我想解析 XML 响应并将其存储在数组中以供进一步使用

```
-(void)performSearch:(NSString *)searchText
{
    NSString *param = [NSString stringWithFormat:@"ZIP=%@",
                       searchText];

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://wsf.cdyne.com/WeatherWS/Weather.asmx/GetCityForecastByZIP?%@", param]];

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setRequestMethod:@"GET"];

    [request addRequestHeader:@"Content-Type" value:@"application/x-www-form-urlencoded"];

    NSLog(@"%@",param);

    NSLog(@"%@",url);

    NSLog(@"%@",request);
    [request setDelegate:self];
    [request startAsynchronous];

    }
- (void)requestFinished:(ASIHTTPRequest *)request
{
    NSData *response = [request responseData];

    NSLog(@"%@",response);
help me how to parse the data and store it in array 
    //NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithData:response];

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:56:03.330

有很多很好的教程来学习如何正确解析 XML，这里有一个快速的：

在.h

```
@interface ObjectName : ObjectSuperclass <NSXMLParserDelegate> {
    NSMutableString *currentElement;
    NSMutableString *childElement;
    NSMutableDictionary *array;
    NSXMLParser *parser;
}

@end 
```

以 .m 为单位：

```
-(void)parseWithData:(NSData *)data {
    parser = [[NSXMLParser alloc] initWithData:data];
    [parser setDelegate:self];
    //You might want to consider additional params like:
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    //And then finally (which activates the delegates):
    [parser parse]; 
 } 
```

再次在 .m 中，插入这些 NSXMLParser 委托方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{    
  currentElement = nil;
  currentElement = [elementName copy];
  if ([elementName isEqualToString:@"xmlParentElement"]) {
    //This means the parser has entered the XML parent element named: xmlParentElement
    //All of the child elements that need to be stored in the array should have their own IVARs and declarations.
    childElement = [[NSMutableString alloc] init];
  }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
  //For all child elements, run this if statement.
  if (currentElement isEqualToString:@"childElement") {
    [childElement appendString:string];
  }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{   
  if ([elementName isEqualToString:@"xmlParentElement"]) {
    [array addObject:childElement];
  }
} 
```

如果事情不清楚，请随时发表评论！

# vb.net - 允许在文本框中输入非英文字符

> ID：11191653
> 
> 赞同：3
> 
> 时间：2012-06-25T14:51:02.557
> 
> 标签：vb.net, globalization

在 VB.NET 中，我想允许在文本框中输入非英文字符（例如，俄语、土耳其语）。我怎样才能做到这一点？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:07:34.153

我相信richtextbox 允许这样做。你说的是口音和变音符号吧？

如果是这样，我很确定如果您只是将richtextbox 的大小调整为文本框的大小，那么您会没事的。

如果这不起作用，请尝试导入语言包资源。对于特定的使用 MSDN。

希望有帮助

# objective-c - 在 UITableView 初始化中设置选中的单元格

> ID：11191656
> 
> 赞同：2
> 
> 时间：2012-06-25T14:51:05.713
> 
> 标签：objective-c, uitableview, selection

我想在`UITableView`完成初始化后将单元格编号 0 设置为选定的单元格？

我试着做：

```
[cell setSelected:YES]; 
```

在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但细胞颜色变成黑色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:53:55.867

UITableView 本身可以管理选择。尝试调用：

```
- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition 
```

# php - Foxpro 网站前端 - 无法从下拉列表中读取

> ID：11191659
> 
> 赞同：0
> 
> 时间：2012-06-25T14:51:13.170
> 
> 标签：php, html, foxpro

早上好，我正在建立一个网站来充当 Foxpro 前端。它工作得很好，除了我的一个下拉框必须从另一个 Foxpro 表中读取名称列表。下拉菜单工作正常，但每当我提交表单时，页面就会重置。

这是我的代码。

```
<form id="form1" name="form1" method="post" action="">
<form action= "test.php" method="post"?
<label>Provider:
<select name="lstProvider" id="1stProvider">
<?php
require_once('odbc.php');//this file just handles the connection
$strsql= 'SELECT Distinct id,name FROM provider.dbf';
$query = odbc_exec($odbc, $strsql) or die (odbc_errormsg());
while($row = odbc_fetch_array($query))

{
echo "<option value=\"".$row['id']."\">".$row['name']."</option>\n  ";
}
?>
</select>
<input type="submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:26:22.583

`<form>`页面顶部有两个标签。

另外，我很同情你不得不与 FoxPro 合作。

# java - 2way ssl 与 java

> ID：11191660
> 
> 赞同：0
> 
> 时间：2012-06-25T14:51:14.683
> 
> 标签：java, ssl

我正在尝试编写一个通过 ssl 访问 url 的 java 程序，并打印出响应以确定此端口上的应用程序是否正在运行。我们正在使用 2way ssl。我对使用 ssl 和 java 安全性相当陌生。现在我收到这个错误

> 握手期间远程主机关闭连接

我正在使用这个命令来运行程序

> `java -Djavax.net.ssl.trustStore=rs.truststore TmpUtil`

有没有办法找出我做错了什么以及问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:05:56.860

您通常可以使用`javax.net.debug`系统属性在 Java 中调试使用 JSSE 的 SSL/TLS 连接。您将在[文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/ReadDebug.html)中找到更多详细信息。

由于您在进行客户端证书身份验证，因此您的应用程序很可能需要配置密钥库。您将在[此答案中找到有关](https://stackoverflow.com/a/6341566/372643)*密钥库*和*信任*库之间区别的一些详细信息，当然也可以在[JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html)中找到。

# python - 获取对象名称

> ID：11191662
> 
> 赞同：0
> 
> 时间：2012-06-25T14:51:28.037
> 
> 标签：python, object, gtk, pygtk

我有一个 GTK 窗口，上面有一些小部件。那里有一堆扩展器，它们都有相同的`activate`信号处理程序。在这个处理程序中，我想获取小部件对象的名称。

```
def exItem_activated (self, widget, data=None):
    for i in range (0, 15):
        self.builder.get_object ('exItem' + (str)(i + 1)).set_expanded (False)
    widget.expanded = True

    print widget.name 
```

`widget.name`但是，不起作用；`AttributeError: 'Expander' object has no attribute 'name'`.
所以基本上，当expander2被点击时，我想得到“expander2”作为一个字符串。单击expander14 时，我想将“expander14”作为字符串获取。有没有办法做到这一点？

如果这不能（很容易）完成，那么如果我可以获得一些其他属性，我可以通过这些属性来判断单击了哪个小部件，那也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:05:55.690

据我了解，调用了相应的方法`get_name()`，例如：

```
print expander.get_name() 
```

* * *

*编辑：*对于带有 gtk 2.20+ 的基于林间空地的 UI，`gtk.Buildable.get_name()`应该使用该方法，而不是`gtk.Widget.get_name()`因为小部件名称存储在`id`UI 定义的属性中。

# objective-c - 对 NSDictionaries 的 NSArray 排序

> ID：11191666
> 
> 赞同：1
> 
> 时间：2012-06-25T14:51:49.020
> 
> 标签：objective-c, nsarray, sorting

我在排序时遇到问题...我需要对`NSArray`包含`NSDictionaries`. 作为订单键，我必须使用`NSDictionary`.

我正在阅读一些关于排序的内容`NSArray`，但我不清楚。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:59:06.310

使用一个`NSSortDescriptor`和一个键路径。假设字典的键是`key`：

```
NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"key" ascending:YES];
NSArray *sorted = [array sortedArrayUsingDescriptors:[NSArray arrayWithObject:sd]]; 
```

# nhibernate - NHibernate 中的双重映射

> ID：11191667
> 
> 赞同：0
> 
> 时间：2012-06-25T14:51:51.367
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我遇到了一个间歇性的 NHibernate 问题，结果证明这是由一个 hbm 映射到一个类以及一个 Fluent NHibernate 映射引起的。这是无意的，一旦发现我放弃了 hbm 映射，现在一切正常。我的问题是：是否存在在类/表上有多个映射有效和/或有用的情况？如果没有，有没有办法在单元测试中检测冗余映射，这样可以保证不会发生？

谢谢，马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:55:07.490

不，为同一个类拥有多个映射永远不会有效。我也想不出有什么用处。

对此进行单元测试很容易：只需检查`DuplicateMappingException`在构建 SessionFactory 时没有抛出。

# php - $_POST 或 $_SESSION 哪个更安全？

> ID：11191670
> 
> 赞同：1
> 
> 时间：2012-06-25T14:51:57.033
> 
> 标签：php, jquery, security

我正在使用出色的[jquery-file-upload](https://github.com/blueimp/jQuery-File-Upload)图像上传器，但需要将不同用户的图像存储在子文件夹中。我可以通过将文件夹的名称作为`$_POST`arg 发送到 upload.class.php 或检索名称作为 arg 来做到这一点`$_SESSION`。

是否有安全偏好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T14:54:31.897

如果文件夹名称是由用户输入的，它应该在一个`$_POST`具有适当形式的变量中。

如果它是由服务器确定的变量，则每个用户，它应该是一个`$_SESSION`变量。

这里没有安全问题，有一个问题是哪个更适合所需的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:54:38.250

我会亲自使用从数据库用户行传播的 $_SESSION 。

$_POST 必须通过线路，而 $_SESSION 没有。$_POST 也可以直接从表单修改，因此用户可以操纵您的表单上传到不属于他们的目录，这不是很好。

$_POST 的主要问题来自它的来源，即必须首先发送客户端的 HTML 表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:55:16.170

最有价值的问题是您如何使用变量（例如防止注射）。

两者的坚持也非常不同。您必须选择是希望变量是持久会话方式 ($_SESSION) 还是仅用于特定页面/脚本。

# linq - 使用 IEnumerable 进行 LINQ 选择

> ID：11191671
> 
> 赞同：2
> 
> 时间：2012-06-25T14:51:58.297
> 
> 标签：linq, entity-framework

我正在使用 EF 4。

我有一个`IEnumerable<Type01>`每个项目（的`Type01`）都有一个`IEnumerable<Type02>`。

这可以解释：

```
Type01 objType01 = ...;
IEnumerable<Type02> en = objType01.allObjType02; 
```

我需要做（使用 LINQ）一个选择，它给我一个`IEnumerable<Type01>`结果，但“记录计数”必须与所有`Type02`项目的“记录计数”总和相同。

例如。对于此列表：

```
myItem01a
    myItem02a
    myItem02b
myItem01b
    myItem02c
    myItem02d
    myItem02e 
```

选择返回必须是：

```
myItem01a
myItem01a
myItem01b
myItem01b
myItem01b 
```

我知道如何通过使用老式 SQL（JOIN 子句）来做到这一点。但我对 LINQ 表达式相当陌生。怎么可能做到？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T14:58:13.100

欺骗。使用`SelectMany`（或等效的倍数`from`s）迭代所有s，但每次`Type02`只产生 a ：`Type01`

```
var repeatedType01s = 
    from t01 in enumerableOfType01s
    from t02 in t01.allObjType02
    select t01; 
```

现在`repeatedType01s`是`IEnumerable<Type01>`你想要的基数。

# java - 使用 Jacob 将枚举传递给 COM 库方法

> ID：11191674
> 
> 赞同：4
> 
> 时间：2012-06-25T14:52:05.807
> 
> 标签：java, com, activex, jacob

我实例化一个 COM 对象，然后调用一个方法。

```
ActiveXComponent comp = new ActiveXComponent("MyDll.MyClass");

String argument1 = "test1";
String argument2 = "test2";

Variant[] arguments = { new Variant(argument1), new Variant(argument2) };

comp.invoke("myMethod", arguments) 
```

假设 MyDll 有一个名为的方法

```
myMethod(String s1, String s2) 
```

它工作正常。

现在，如果我有一个方法怎么办

```
myMethod(String s1, ReturnDeletedModeEnum enum) 
```

使用 MyDll 中定义的枚举？

我需要以某种方式将枚举传递给该方法，但我不知道如何访问它。

我尝试将枚举作为 ActiveXComponent，

```
new ActiveXComponent("MyDll.ReturnDeletedModeEnum"); 
```

这（不足为奇）不起作用：

```
com.jacob.com.ComFailException: Can't get object clsid from progid 
```

我尝试找到更多关于 Jacob 的文档，因为似乎有特定于 Enum 的类，但我没有找到任何关于如何使用它们的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-11T15:26:25.480

当我需要调用带有枚举参数的方法时，我遇到了同样的不确定性。我找不到太多文档——JACOB 或其他。

我确实偶然发现了一篇[关于该主题的有用帖子](http://www.wiseowl.co.uk/blog/s225/enumerations.htm)，上面写着`the values ... correspond to internally stored numbers`and `An enumeration in VBA is always of data type Long`。

有了这个和[我的特定枚举的 MS 文档，我](https://msdn.microsoft.com/en-us/library/office/ff193596(v=office.14).aspx)试了一下......

```
Dispatch.call(oDocuments, "Open", fileIn, ... ,  new Variant(1L)); 
```

它奏效了！

我确信有一种方法可以获得实际的“枚举”数据结构，但这对我来说已经足够了。

# asp.net - 在 HttpModule 中阻止 IP 地址

> ID：11191675
> 
> 赞同：1
> 
> 时间：2012-06-25T14:52:13.740
> 
> 标签：asp.net

我接管了一个运行旧版本社区服务器的域。不用说，机器人正在向我发送垃圾邮件以寻找漏洞。

我想在`System.Web.HttpRequest.ValidateInputIfRequiredByConfig()`被解雇之前阻止整个 IP 块。我有一个`IHttpModule`我尝试过的，但我认为它会被调用，因为 HealthMonitoring 正在捕获异常。这是模块：

```
 public class IpBlockerModule : IHttpModule
{
    private static readonly string[] Hacks = new[]
                                                 {
                                                     "60.169.73.",
                                                     "60.169.75.",
                                                     "61.160.232.",
                                                     "61.160.207.",
                                                     "92.85.161."
                                                 };

    public void Dispose()
    {

    }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += (Application_BeginRequest);
    }

    private void Application_BeginRequest(object source, EventArgs e)
    {
        var context = ((HttpApplication) source).Context;
        var ipAddress = context.Request.UserHostAddress;

        if (!IsHackIpAddress(ipAddress))
        {
            context.Response.StatusCode = 403; // (Forbidden)
        }
    }

    private static bool IsHackIpAddress(string ip)
    {
        if (ip == null) return true;

        return Hacks.Any(x => x.StartsWith(ip));
    }
} 
```

以及相关的 web.config 部分：

```
<system.web>
    <httpModules>
      <add name="IpBlockerModule" type="MyNameSpace.IpBlockerModule" />
    </httpModules>    
</system.web>

<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" >
      <add name="IpBlockerModule" type="MyNameSpace.IpBlockerModule" preCondition="" />
    </modules>   
</system.webServer> 
```

这背后的原因是我的收件箱被所有的垃圾邮件

```
A potentially dangerous Request.Path value was detected from the
client 
```

和

```
 A potentially dangerous Request.Form value was detected from the client 
```

通知。我的模块有问题，还是我假设模块在事后才被解雇是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:22:52.000

作为替代解决方案，您是否考虑让 IIS 为您完成工作？这样，请求永远不会到达您的应用程序。您可以通过 web.config 执行此操作，此处有一篇文章详细介绍了该过程[。](http://www.stokia.com/support/misc/web-config-ip-address-restriction.aspx)以下示例直接从该文章中复制，并将放置在`<system.webServer>`您的 web.config 部分中：

```
<security>
    <ipSecurity allowUnlisted="true">    <!-- this line allows everybody, except those listed below -->            
       <clear/>     <!-- removes all upstream restrictions -->                
       <add ipAddress="83.116.19.53"/>     <!-- blocks the specific IP of 83.116.19.53  -->                
       <add ipAddress="83.116.119.0" subnetMask="255.255.255.0"/>     <!--blocks network 83.116.119.0 to 83.116.119.255-->                
       <add ipAddress="83.116.0.0" subnetMask="255.255.0.0"/>     <!--blocks network 83.116.0.0 to 83.116.255.255-->                
       <add ipAddress="83.0.0.0" subnetMask="255.0.0.0"/>     <!--blocks entire /8 network of 83.0.0.0 to 83.255.255.255-->                
   </ipSecurity>
</security> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-11T11:33:50.747

您还可以添加获取和记录 IP 地址的功能，以便仅识别和阻止垃圾邮件。

这是获取 IP 地址的 C# 代码

```
string ipadd;
ipadd = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
if (ipadd == "" || ipaddress == null)
    ipadd = Request.ServerVariables["REMOTE_ADDR"]; 
```

我注意到上面答案中的链接已经死了，所以[在这里使用这篇详细的文章](https://www.classgist.com/blogs/202/how-to-block-ip-addresses-from-accessing-your-aspnet-website.aspx)

# ember.js - 使用 Ember.Route 路由到“显示”页面时出错

> ID：11191676
> 
> 赞同：0
> 
> 时间：2012-06-25T14:52:24.023
> 
> 标签：ember.js, ember-old-router

这个错误让我**发疯**。在问这里之前，我尝试了 freenode #emberjs。

我有以下路由方案：

```
App.Router = Ember.Router.extend({
    //...

    showPost: Ember.State.transitionTo('post'),

    posts: Ember.Route.extend({
       route: '/posts',
       connectOutlets: function(router, context) {
             router.get('applicationController').connectOutlet({ outletName: 'page', name: 'posts', context: App.Post.find()});
             this._super(router, context);
       }
    }),

    post: Ember.Route.extend({
         route: '/posts/:post_id',
         connectOutlets: function(router, post) {
             router.get('applicationController').connectOutlet({ outletName: 'page', name: 'post', context: post});
             this._super(router, post);
         }
    })
}); 
```

`posts`显示帖子列表的路线工作正常。导航到特定帖子，例如，`posts\1`我在控制台中收到以下错误：

```
Uncaught TypeError: Object <App.Post:ember6957> has no method 'addArrayObserver' 
```

如果需要，请查看堆栈跟踪： http: [//pastebin.com/eEJ2hMAV](http://pastebin.com/eEJ2hMAV)

路由器将 App.router.postController 的 content 属性设置为用户单击的帖子。在控制台中，

```
App.router.postController.get('content') instanceof DS.Model 
```

返回`true`。它试图调用`addArrayObserver`this `content`，但 DS.Model 没有扩展 Ember.Array （其中定义了 addArrayObserver ）。

另一方面，

```
App.router.postsController.get('content') instanceof DS.RecordArray 
```

返回`true`，并调用`addArrayObserver`它`content`可以正常工作。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:49:54.553

由于我错过了您代码中的一些上下文，因此我根据您的代码构建了一个工作示例。

查看代码，[http://jsfiddle.net/Sly7/jLbry/](http://jsfiddle.net/Sly7/jLbry/)

查看路线：http: [//jsfiddle.net/Sly7/jLbry/show](http://jsfiddle.net/Sly7/jLbry/show)

希望这可以帮助。

# java - 如何在没有文档的情况下分析和使用 Android 项目？

> ID：11191678
> 
> 赞同：0
> 
> 时间：2012-06-25T14:52:28.610
> 
> 标签：java, android, eclipse, code-analysis

我从我的公司获得了一个没有文档的项目。现在我必须向这个项目添加一些东西，比如新的添加功能等。但我不知道这个项目是如何组织的以及它从哪里开始......有谁知道如何使用这样的项目？我可以用shema分析它吗？

我怎样才能找到这个应用程序的起点？

有没有办法从A到Z调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:58:31.037

在清单文件中查找主要活动。

虽然其他人可能会附和特定于 Android 的答案，但您应该将此项目视为“遗留代码”——由其他人创建，文档不佳或没有文档，并且（最初）对事物的实现方式一无所知。

如果您想要一本关于您的问题的体面的书，请查看 Feathers 的《[有效地使用遗留代码》 。](https://rads.stackoverflow.com/amzn/click/com/0131177052)电子书“Rails Rescue”和 Rails Test Prescriptions 中的“Legacy Code”一章中的建议也是相关的，但不是特定于 Android 的。尽管与 Rails 相关，但作者给出的建议直接适用于大多数项目。

简而言之：

*   如果还没有，则将项目置于版本控制之下（如果是，那么您很幸运，因为您可以查看提交历史以了解情况）
*   让测试套件干净地运行。没有测试套件？开始一个简单的测试存根
*   承诺为您实现的每个新功能创建测试

最后，*阅读代码*。您将不得不咬紧牙关并熟悉实施 - 没有办法解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:57:25.987

应用程序的起点（主要活动）可以在清单文件中找到：

```
 <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

具有此意图过滤器的任何活动都是应用程序的入口点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:58:41.510

检查 Manifest.xml`<activity>`有人应该得到的行

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" /> 
```

这是apk开始的地方

那么我将从`onCreate()`这个类的方法开始。您还应该检查可能在设备启动时启动的服务。检查 a`BroadcastReceiver`和类似的东西

```
 if("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:03:08.667

正如 JesperB 所说，在清单中找到启动活动。

然后我会在调试模式下运行该应用程序，并在您使用该应用程序时遵循所有内容，并在此过程中做笔记。

您也可以尝试在其上运行视图层次结构查看器，这也可以提供一些方向。

# jquery - JQuery - 粘性侧边栏在 Firefox 中不起作用

> ID：11191679
> 
> 赞同：0
> 
> 时间：2012-06-25T14:52:31.853
> 
> 标签：jquery, position, fixed, sidebar, sticky

我正在一个带有粘性侧边栏（在某些条件下固定位置等）的站点上工作，该站点在 Chrome 和 Safari 中运行良好，但在 Firefox 中中断。我不确定问题是什么，因为我没有编写脚本：

```
 $(document).ready(function() {          

      if (!!$('.sticky').offset()) { // make sure ".sticky" element exists

        var stickyTop = $('.sticky').offset().top; // returns number 
        var newsTop = $('#news_single').offset().top; // returns number 

        $(window).scroll(function(){ // scroll event

          var windowTop = $(window).scrollTop(); // returns number 
          var width = $(window).width();
          var height = $(window).height();

          if (stickyTop < windowTop && width > 960 && height > 450){
            $('.sticky').css({ position: 'fixed', top: 40 });
            $('#news_single').css({ left: 230 });               
          }
          else {
            $('.sticky').css('position','static');
            $('#news_single').css({ left: 0 });             
          }

        });

      }         

    }); 
```

这是网站（有问题的侧边栏是左侧的红色标题）： http: [//www.parisgaa.org/parisgaels/this-is-a-heading-too-a-longer-one](http://www.parisgaa.org/parisgaels/this-is-a-heading-too-a-longer-one)

我很感激这方面的任何帮助。

编辑：似乎使它一致的一件事是 barlas 建议的 - 将 left 属性添加到固定元素。但是，这完全破坏了事物，因为它随后固定在 x 轴上并且即使在调整浏览器大小等时也保持不变。这对我不起作用，我只需要通过添加它来坚持 y 轴一个顶级属性。由于某种原因，这样做会导致与 Chrome（它应该出现的地方）和 Firefox（它出现在它应该出现的位置的右​​侧很远的地方）不同的行为。

使困惑。

已解决：好的，我已经弄清楚了。

出于某种原因，Firefox 和 Chrome 似乎对固定元素的处理方式不同。我使结果保持一致的方法是为固定元素添加一个绝对定位的容器元素（我使用媒体查询来确保该元素仅绝对定位在 960 像素以上，因为该站点是响应式的）。

这使得粘性固定位置元素在两种浏览器中的行为方式相同。所以更多的是 CSS 问题而不是 jQuery 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:07:53.107

我编辑了我的答案，尝试定位左侧的粘性元素

```
 $(window).scroll(function(){ // scroll event

      var windowTop = $(this).scrollTop(); // change to this here
      var width = $(window).width();
      var height = $(window).height();

      var positionEle = (width - 960 ) / 2 + 220;  // 220 is ur stick part's width

      if (stickyTop < windowTop && width > 960 && height > 450){
        $('.sticky').css({ 'position': 'fixed', 'top': '40px', 'left':positionEle + 'px' }); //try this
        $('#news_single').css({ left: 230 });      
      }
      else {
        $('.sticky').css('position','static','left':'0');
        $('#news_single').css({ left: 0 });             
      }
  }); 
```

# python - 为什么 python .pyc 文件包含其源代码的绝对路径？

> ID：11191680
> 
> 赞同：20
> 
> 时间：2012-06-25T14:52:36.213
> 
> 标签：python

为什么 python`.pyc`文件包含其源代码的绝对路径，而不是相对路径或其他内容？

Ubuntu 上 Python 2.7的典型`__init__.pyc`示例：

`\ufffd\ufffd\ufffdOc@sddlTdS(i\ufffd\ufffd\ufffd\ufffd(t*N(tdbapi2(((s&/usr/lib/python2.7/sqlite3/__init__.py<module>s`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T01:15:30.490

在回溯中提供信息。参见例如[http://docs.python.org/library/compileall#cmdoption-compileall-d](http://docs.python.org/library/compileall#cmdoption-compileall-d)

# c# - 使用 QBXML 接口在盲模式下连接到 Quickbook 时出错

> ID：11191685
> 
> 赞同：0
> 
> 时间：2012-06-25T14:52:43.077
> 
> 标签：c#, quickbooks

我在尝试以盲模式访问 Quickbooks 的应用程序遇到问题（即 Quickbooks 未运行）。简而言之，我有一个简单的 C# 应用程序，它可以在 Web 服务器上的 Quickbooks 公司文件和 SQL 数据库之间同步信息，以允许客户在线支付发票。该应用程序的 UI 只有一个按钮和一些其他设置，因此，我修改了代码，使其可以在半夜作为计划任务运行。不幸的是，这比我预期的要麻烦得多。

首先，我无法让它通过任务调度程序或提升的命令提示符运行。然后，我遇到了一篇文章，指出如果主机是具有多个会话的终端服务器，则在尝试通过 QBSDK 访问 Quickbooks 时 SDK 中存在错误。临时解决方案是确保 Quickbook 正在运行作业的会话上运行，以防止它尝试附加到另一个会话。因此，我确保 Quickbooks 已加载，但未登录到公司文件。虽然如果我尝试从提升的命令提示符运行我的应用程序，此解决方案有效，但当从 Windows 任务调度程序启动作业时，它仍然不起作用。我现在没有远程登录到服务器，但是错误消息说明了由于打开了一个模式对话框而无法打开会话。一旦我能够连接到我的客户的服务器，我将修改帖子以包含特定的错误消息。Quickbooks 在尝试作为计划任务运行的会话上打开，我可以从提升的命令提示符运行应用程序。有人可以就我如何解决这个问题提供任何建议或反馈吗？在此先感谢您的帮助！

# c++ - 如何在 Linux 上构建“lzma sdk”

> ID：11191689
> 
> 赞同：1
> 
> 时间：2012-06-25T14:52:50.020
> 
> 标签：c++, sdk, lzma

我想`7-zip`为我的应用程序使用存档并为此下载`lzma sdk`。尝试在 Linux (Debian) 上构建，但找不到方法。我在看，`lzma.txt`但我不明白如何完成这项工作。我也找不到任何文档或教程。我需要详细的指导如何构建`LZMA SDK`，因为我是 Linux 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:18:29.250

看看[这个页面](http://tukaani.org/xz/)。我敢打赌，它的软件包已经在流行的 linux 发行版中可用。

当然，在此基础上使用[libarchive](http://libarchive.github.com/)之类的东西可能更容易。

# unit-testing - 当有多个条件时如何对否定进行单元测试？

> ID：11191690
> 
> 赞同：0
> 
> 时间：2012-06-25T14:52:55.677
> 
> 标签：unit-testing

我有这段代码

```
function aFunctionForUnitTesting(aParameter)
    return (aFirstCheck(aParameter) && 
           aOtherOne(aParameter) && 
           aLastOne(aParameter)
    ); 
```

我该如何对此进行单元测试？

我的问题如下，假设我创建了这个单元测试：

```
FailWhenParameterDoesntFillFirstCheck()
{
Assert.IsFalse(new myObject().aFunctionForUnitTesting(aBadParameter));
} 
```

由于第一次检查，我怎么知道这个测试没问题（它可能因为第二次或第三次检查而失败，所以我的函数 firstCheck 可能被窃听了）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:55:56.537

您需要传递参数的不同值，这将通过第一次检查并在第二次检查失败。

```
FailWhenParameterDoesntFillFirstCheck()
{
    Assert.IsFalse(new myObject().aFunctionForUnitTesting(aBadParameterThatPassesFirstCheckButFailsTheSecond));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:22:52.803

您不必编写所有**这些**案例。这取决于您想要什么级别的代码覆盖率。您可以在四个测试中获得“修改后的条件/决策覆盖率”： - 所有参数都正常 - 每个参数中的一个未通过测试

“多条件覆盖”需要 8 次测试。除非我在空中客车公司工作，否则我不确定我会打扰:-)

# android - 不会触发后续的 onBind() 调用

> ID：11191693
> 
> 赞同：3
> 
> 时间：2012-06-25T14:53:07.397
> 
> 标签：android, android-intent, android-service

使用姜饼 2.3.4 api lvl 10。

启动完成后我正在启动服务。为此，我添加了一个启动服务的广播接收器。我在启动器中使用相同的服务。我正在尝试通过向 Intent 添加额外的参数来绑定服务。通过广播回复从服务中取回结果。

问题是当它第一次绑定时，服务上的 onBind() 会被触发。进一步的绑定不会调用服务上的 onBind()。我相信问题是服务直接在_boot之后启动。当我在启动时不启动服务并让活动使用 Context.BIND_AUTO_CREATE 启动它时，它的行为确实符合预期。

我想出的唯一解决方案是更改服务的 onUnbind() 并在服务的 onRebind() 调用中发出 onBind() 。我不喜欢这个解决方案，因为它可能会在以后的 android 版本中中断，导致 onBind() 方法被调用两次。

那么为什么在启动完成后启动的服务上不会触发后续绑定。欢迎任何其他优雅的解决方案。

PS：我已经在aidl中实现了它，但我不喜欢它，因为该服务将执行一些异步操作来返回数据，并且我必须在两个应用程序中添加aidl文件，这将添加导致代码臃肿的处理程序。

提前致谢。我的代码片段：

服务清单：

```
 <intent-filter>
            <action android:name="com.organization.android.ACTION_BOOT_COMPLETED" />
        </intent-filter>

         <intent-filter>
            <action android:name="com.organization.android.WORK_INTENT" />
        </intent-filter>
    </service>

    <receiver android:name=".CoreServiceReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" >
            </action>

            <category android:name="android.intent.category.HOME" >
            </category>
        </intent-filter>
    </receiver> 
```

当我绑定到服务时：

意图意图 = 新意图（WORK_INTENT）；intent.putExtra（“参数”，参数）；

```
context.registerReceiver (broadcastReceiver, new IntentFilter("com.organization.android.WORK_RESULT"));
context.bindService(intent,mConnection, Context.BIND_AUTO_CREATE); 
```

}

当我得到结果时：

```
context.unbindService(mConnection);
context.unregisterReceiver (broadcastReceiver); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T04:50:16.170

From the documentation on binding to services:

> Multiple clients can connect to the service at once. However, the system calls your service's onBind() method to retrieve the IBinder only when the first client binds. The system then delivers the same IBinder to any additional clients that bind, without calling onBind() again.

This behaviour will not change, so your method of overriding onUnbind to return true, and then calling onBind during onRebind is perfectly OK, although the original binding will still be sent to the client, not any new one that you may generate in your new call to onBind. (ie, you really shouldn't be calling onBind, but just handling onRebind as a seperate case)

# jquery - jQuery 计算“已选中”类的项目

> ID：11191694
> 
> 赞同：5
> 
> 时间：2012-06-25T14:53:15.410
> 
> 标签：jquery, css

我正在努力解决这个问题。我有一个项目列表，并且在表单的一部分上，当某些内容经过验证时，它会将“已检查”类添加到相应的列表项中。

```
<ul>
<li class="title">Checklist</li>
<li class="checkType checked">Card Type</li>
<li class="checkNumber checked">Card Number</li>
<li class="checkName checked">Name on Card</li>
<li class="checkMonth checked">Expiry Month</li>
<li class="checkYear checked">Expiry Year</li>
<li class="checkCode checked">Security Code</li>
</ul>

.title{font-size:23px; font-weight:bold;}
.checked{ color:#f00;} 
```

但我需要 jQuery 来检查每个项目是否有类`checked`EXCEPT `title`。

这是可行的吗？

**演示：http:** [//jsfiddle.net/bQtEQ/1/](http://jsfiddle.net/bQtEQ/1/)

感谢答案，我现在有以下内容

```
 var counting = $("li.checked:not(.title)").length;
    if (counting == 6){
        console.log(counting);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T14:55:22.833

这可以通过 1 个简单的选择器来实现

```
$("li.checked:not(.title)").length 
```

这里的优点是，除了必须减少代码之外，`:not()`选择器在搜索过程中被考虑在内以减少结果集。这意味着 jQuery 实例化 dom 元素的时间更少。这意味着更快的执行时间，尤其是在较旧的浏览器上。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T14:54:42.743

这应该为您提供所有具有类“ ”但没有类标题 的`<li>`元素：`checked`

```
$('li.checked').not('.title').length 
```

但是 - 如果您只想要检查元素的数量：

```
$('.checked').length 
```

应该足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:55:24.797

```
$('.checked').not('.title').length == $("ul li").length -1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T14:55:59.430

```
$("li").each(function() {
    if( !$(this).hasClass("title") && $(this).hasClass("checked") ) {
            alert("hah");
    }
 }); 
```

# c# - 使用 linq 过滤集合

> ID：11191703
> 
> 赞同：0
> 
> 时间：2012-06-25T14:53:48.737
> 
> 标签：c#, linq

我有一个包含 FileType 类型对象的集合 FileTypes。该类型具有字段 CounterpartyId。我还有一个 Counterparty 类型的对象的集合 Counterparty ，它具有字段 Id。您能否帮我使用 LINQ 过滤掉所有 Id 不等于任何 FileType 的 CounterpartyId 的交易对手。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T14:57:21.740

您可以使用[Any()](http://msdn.microsoft.com/en-us/library/bb534972.aspx)并编写如下内容：

```
var filteredCounterparties = counterparties.Where(
    cp => !fileTypes.Any(ft => cp.Id == ft.CounterpartyId)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T14:56:25.710

```
IENumerable<Counterparties> filteredcounterparties = Counterparties.Where(w => w.Id != fileType.CounterPartyId); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T14:58:41.373

我会尝试这样的事情。

```
 var filteredcounterparties = counterparties.Where(x => x.Id != fileType.CounterPartyId); 
```

这应该够了吧

# internet-explorer - localhost 会话 cookie 在 Internet Explorer 中不再起作用

> ID：11191706
> 
> 赞同：0
> 
> 时间：2012-06-25T14:53:57.820
> 
> 标签：internet-explorer, cookies, localhost, session-cookies

在 Internet Explorer 中，我正在使用隐私安全设置测试一些东西。完成我的测试后（我将所有设置、安全设置恢复为正常），我在 Internet Explorer 中的 localhost 不再接受 cookie（会话和正常）。

有没有人遇到过这个问题，有人知道如何修复吗？

奇怪的事情：如果我尝试 127.0.0.1 cookie 确实有效。我的主机文件没有任何变化......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:27:24.557

我终于让它再次工作了。我将 Internet Explorer 恢复为默认设置并删除了我的所有个人设置。

# asp.net - asp.net (Visual Studio 2010) 表单验证控件

> ID：11191710
> 
> 赞同：0
> 
> 时间：2012-06-25T14:54:15.913
> 
> 标签：asp.net, visual-studio-2010, asp.net-controls

下午所有，

我有一个网络表单，希望我的用户填写。在表单上，​​我希望在三个字段上设置验证。其中一个是普通文本框，另一个是与日历图标关联的文本框，我的最后一个字段是一个下拉列表，其中包含从枚举列表填充的数据。

我还不太担心我的下拉列表，但我对另外两个文本框感到有些沮丧。我在这两个上都使用了“必需的归档验证器”，并且只希望在用户单击提交按钮时启动验证。目前，如果您在这两个字段之间进行选项卡或单击，验证就会启动。

这是我的网络表格....

```
 <table id="table-3">
          <tr>
                <td style="width: 385px"> 
                    <asp:Label ID="lblOrganiser" runat="server" Text="Meeting Organiser:">
                    </asp:Label></td>
                <td class="style4" style="width: 23px">                 
                   <asp:TextBox ID="txtOrganiser" runat="server" >
                    </asp:TextBox>      
                </td>
               <td>
                    <asp:RequiredFieldValidator ID="RequiredFieldVal0"
                     ControlToValidate="txtOrganiser" 
                     ErrorMessage="Meeting Organiser"
                     Text="*" 
                     runat="server"/>
               </td>
              <td>
                 <asp:Label ID="lblDate" runat="server" Width="40px" Text="Date:">
                 </asp:Label>
              </td>   
              <td class="style5">
                  <asp:TextBox ID="txtAgendaDate" runat="server" ForeColor="Black" >
                  </asp:TextBox>
                  <asp:ImageButton runat="Server" ID="ImageButton1" ImageUrl="~/images/contact_date_SM3.png" 
                AlternateText="Click here to display calendar" ImageAlign="AbsMiddle"  /> 
                  <asp:calendarextender ID="CalendarExtender3" runat="server" 
                    TargetControlID="txtAgendaDate" PopupButtonID="ImageButton1" Format="dd/MM/yyyy"></asp:calendarextender>
              </td>
              <td>
                 <asp:RequiredFieldValidator ID="RequiredFieldVal1"
                 ControlToValidate="txtAgendaDate" 
                 ErrorMessage="Date"
                 Text="*" 
                 runat="server"/>
              </td>
            </tr>

             <tr>
                <td style="width: 385px"><asp:Label ID="lblAgendaTypeDescription" runat="server" Text="Type Of Meeting:"></asp:Label></td>
                <td class="style4" style="width: 23px">
                    <asp:TextBox ID="txtAgendaTypeDescription" runat="server" Text="Monthly" BackColor="#F4F4F4" ReadOnly="True"></asp:TextBox>
                 </td>
                   <td></td>
           <td class="style7" style="width: 24px"><asp:Label ID="lblTime" runat="server" Text="Time"></asp:Label></td>
                <td><asp:TextBox ID="txtTime" runat="server" 
                        Text="4pm" style="margin-top: 2px"></asp:TextBox></td>
                 <td></td>
            </tr>
            <tr>
                <td style="width: 385px">
                    <asp:Label ID="lblVenue" runat="server" Text="Venue"></asp:Label>
                </td>
                <td class="style4"  colspan="6"><asp:TextBox ID="txtVenue" runat="server" 
                        Text="Room 1"  Width="550px" TextMode="SingleLine" ></asp:TextBox></td>
            </tr>
            <tr>
                <td style="width: 385px"><asp:Label ID="lblRead" runat="server" Text="Please Read:"></asp:Label></td>
                <td class="style4" colspan="6">
                    <asp:TextBox ID="txtRead" runat="server" 
                        Width="550px" TextMode="SingleLine" Font-Names="Verdana"  ></asp:TextBox></td>         
            </tr>
             <tr>
                <td style="width: 385px"><asp:Label ID="lblBring" runat="server" Text="Please Bring:"></asp:Label></td>
                <td class="style4" colspan="6">
                    <asp:TextBox ID="txtBring" runat="server" 
                        Width="550px" TextMode="SingleLine" Font-Names="Verdana"  ></asp:TextBox></td>         
            </tr>

            <tr>
                <td style="width: 385px"><asp:Label ID="lblAgendaStatus" runat="server" Text = "Agenda Status" ></asp:Label></td>
                <td class="style4" style="width: 23px">
                    <asp:DropDownList ID="AgendaStatus" 
                        runat="server" Height="24px" Width="125px"> </asp:DropDownList>        
                </td>    
                <td> <asp:RequiredFieldValidator ID="RequiredFieldVal2"
                 ControlToValidate="AgendaStatus" 
                 ErrorMessage="Agenda Status"
                 Text="*" 
                 runat="server"/>
                </td>                  
          </tr>
       </table>

        <br />
           <asp:ValidationSummary ID="ValidationSummary2"
            HeaderText="You must enter a value in the following fields:"
            DisplayMode="BulletList"
            EnableClientScript="true"
            runat="server"/>
            <br />

    <div style="text-align: right;">
                  <asp:ImageButton runat="Server" ID="btnAddMonthlyTemplate" ImageUrl="~/images/Addbutton.png" 
                AlternateText="Add Weekly Template"  /> 
          </div> 
```

如果有人不能指出我正确的方向，那就太好了。提前谢谢了。

贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:10:03.053

您可以将 RequiredFieldValidator 的 EnableClientScript 属性设置为 false：

```
 <asp:RequiredFieldValidator ID="RequiredFieldVal1"
                 ControlToValidate="txtAgendaDate" 
                 ErrorMessage="Date"
                 Text="*" 
                 EnableClientScript="false"
                 runat="server"/> 
```

这样，只有在用户发布表单后才会进行验证。希望这可以帮助，

谢。

# ios - 在 UITableView 中实现多个部分时崩溃

> ID：11191711
> 
> 赞同：0
> 
> 时间：2012-06-25T14:54:18.130
> 
> 标签：ios, objective-c, xcode, uitableview

我现在正在学习`UITableView`iOS开发课程。我想在我的 tableView 中实现三个部分，但是当我点击`tabBarItem`包含`tableView`. 我的代码如下：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"Settings";
        self.tabBarItem.image = [UIImage imageNamed:@"19-gear.png"];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *list1 = [[NSMutableArray alloc] initWithObjects:@"fbfb", @"dfhbfh", @"rtjtj", @"rgrrth", @"grhh", @"tyjtyj", nil];
    NSArray *list2 = [[NSMutableArray alloc] initWithObjects:@"fgngg", @"yjyj", @"rhrht", @"rthfh", @"tjtyjyj", @"fsfsdf", nil];
    NSArray *list3 = [[NSMutableArray alloc] initWithObjects:@"24242", @"24242", @"24242", @"4242", @"4242", @"24242", nil];

    self.array1 = list1;
    self.array2 = list2;
    self.array3 = list3;

    [list1 release];
    [list2 release];
    [list3 release];
}

#pragma mark -
#pragma mark - TableView Data Source Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    switch (section) {
        case 0:
            return [array1 count];
            break;
        case 1:
            return [array2 count];
            break;
        case 2:
            return [array3 count];
            break;
        default:
            break;
    }
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cells = @"Cells";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cells];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cells];
    }
    switch (indexPath.section) {
        case 0:
            cell.textLabel.text = [array1 objectAtIndex:indexPath.row];
            break;
        case 1:
            cell.textLabel.text = [array2 objectAtIndex:indexPath.row];
            break;
        case 2:
            cell.textLabel.text = [array3 objectAtIndex:indexPath.row];
            break;
        default:
            break;
    }
    return cell;

} 
```

崩溃日志如下：

```
2012-06-25 23:33:37.694 X-Factor[617:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<SettingsViewController 0x6c912a0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key tableView.'
*** First throw call stack:
(0x13cd022 0x155ecd6 0x13ccee1 0x9c5022 0x936f6b 0x936edb 0x951d50 0x23971a 0x13cedea 0x13387f1 0x23826e 0xde1fc 0xde779 0xde99b 0xfa0a9 0xf9edd 0xf84aa 0xf834f 0xf9e14 0x13cee99 0x1a14e 0x1a0e6 0x2424bd 0x13cee99 0x1a14e 0x1a0e6 0xc0ade 0xc0fa7 0xc0b13 0x244c48 0x13cee99 0x1a14e 0x1a0e6 0xc0ade 0xc0fa7 0xc0266 0x3f3c0 0x3f5e6 0x25dc4 0x19634 0x12b7ef5 0x13a1195 0x1305ff2 0x13048da 0x1303d84 0x1303c9b 0x12b67d8 0x12b688a 0x17626 0x21c2 0x2135)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:03:21.053

这可能是一个时间问题——当需要填充表视图时，数据还没有准备好被读取。尝试在 initWithNibName (self.array1,self.array2 & self.array3) 中删除 NSMutableArrays，并在 viewWillAppear 而不是 viewDidLoad 中准备数据。另外，当提到保留属性时（我假设 self.array1 等被定义为保留？） - 使用**self** .array1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:07:58.030

这不会解决您的崩溃问题，但除非您在`break;`后面添加以下内容，否则您将遇到其他问题：

```
case 1:
    cell.textLabel.text = [array2 objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:32:20.833

几点：

a) 我建议您使用 ARC 而不是手动内存管理（Apple 也是如此）。ARC 是 Objective-C 的未来，你越早开始考虑对象图而不是保留/释放越好。

b）不要在您的初始化代码中使用属性，而是使用 ivars（代码假设您综合为您的 ivars 的下划线）

```
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    _title = @"Settings";
    _tabBarItem.image = [UIImage imageNamed:@"19-gear.png"];
}
return self; 
```

c) 您需要返回 tableview (3) 中的节数，而不是您输入的 2

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
} 
```

d) 您的 tableView:numberOfRowsInSection 方法不一致。在每个 switch 语句中放置一个 break 语句。IE：

```
switch (section) {
    case 0:
        return [array1 count];
        break;
    case 1:
        return [array2 count];
        break;
    case 2:
        return [array3 count];
        break;
    default:
        break;
}
return 0; 
```

# android - 使用 ArrayAdapter 的自定义子项时，Android Spinner OnItemSelected 不会触发

> ID：11191712
> 
> 赞同：2
> 
> 时间：2012-06-25T14:54:19.800
> 
> 标签：android, android-arrayadapter, android-spinner

我有一个数组适配器的自定义实现，我在 Spinner 中使用它来为我的对象获取自定义布局。

使用自定义数组适配器时，我会出现带有微调器选项的对话框，但没有一个可以选择。我可以使用后退按钮关闭对话框。

OnItemSelected 未被调用。（当我使用后退按钮时，也不会调用 OnNothingSelected）。

这是一些代码：

自定义适配器：

```
public class AboutSettingsServerAdapter extends ArrayAdapter <ServerItem> {

private ArrayList<ServerItem> mServers;
private Context mContext;

public AboutSettingsServerAdapter(Context context, int resource, ArrayList<ServerItem> serverItems) {
    super(context, resource, serverItems);
    mContext = context;
    mServers = serverItems;
}

public int getCount(){
   return mServers.size();
}

public ServerItem getItem(int position){
   return mServers.get(position);
}

public long getItemId(int position){
   return position;
}

public View getView (int position, View convertView, ViewGroup parent) {
       return getAdapterView(position, convertView, parent);
}

public View getDropDownView (int position, View convertView, ViewGroup parent) {
    return getAdapterView(position, convertView, parent);
}

public View getAdapterView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.spinner_item, null);
    }

    ServerItem item = mServers.get(position);
    if (item!= null) {
        TextView titleView      = (TextView) view.findViewById(R.id.server_settings_title);
        TextView subtitleView   = (TextView) view.findViewById(R.id.server_settings_subtitle);
        if (titleView != null) {
            titleView.setText(item.title);
        }

        if (subtitleView != null) {
            subtitleView.setText(item.url + "/" + item.path_extension);
        }

     }
    return view;
    }
} 
```

微调器初始化：

```
 AboutSettingsServerAdapter adapter = new AboutSettingsServerAdapter(this, R.layout.module_about_server_spinner_item, servers);
    adapter.setDropDownViewResource(R.layout.spinner_item);
    adapter.notifyDataSetChanged();
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int index, long id) {
            mSelectedServer = servers.get(index);
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:33:27.467

我的解决方法是从头开始编写一个新的 ArrayAdapter 和一个新的布局。无论出于何种原因，这似乎都做到了。虽然我根本没有改变我的方法论。

# c# - 如何在嵌套查询中使用 DefaultIfEmpty

> ID：11191714
> 
> 赞同：4
> 
> 时间：2012-06-25T14:54:26.280
> 
> 标签：c#, linq

我有这堂课：

```
class OriginalClass {
  string FirstItem;
  List<string> ListOfSecondItems;
} 
```

我想将一个类的列表转换为另一个类的列表，或者将这个类“展平”为新的类：

```
class FlattenedClass {
  string First;
  string Second;
} 
```

我正在使用这个 LINQ 表达式从一个转换为另一个：

```
OriginalClass original;
var flattened = from Item in original
  from secondItem in item.ListOfSecondItems
  select new FlattenedClass(item.FirstItem, secondItem); 
```

问题是如果第二个项目的列表是空的，我会丢失第一个项目。如果列表为空或为空，我想使用一些“（默认）”值。我想`DefaultIfEmpty`是关键，但不知道如何将其合并到现有查询中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T14:56:38.623

这个调用`DefaultIfEmpty`说：“如果 ListOfSecondItems 为空，请改用单个 null。”

```
var flattened =
  from Item in original
  from secondItem in item.ListOfSecondItems.DefaultIfEmpty()
  select new FlattenedClass(item.FirstItem, secondItem); 
```

* * *

您的问题提到 ListOfSecondItems 可能为空的可能性。这段代码处理了这种可能性。它还提供默认字符串而不是 null（使用其他版本的 DefaultIfEmpty）。

```
var flattened =
  from Item in original
  let subList = item.ListOfSecondItems ?? new List<string>()
  from secondItem in subList.DefaultIfEmpty("(default)")
  select new FlattenedClass(item.FirstItem, secondItem); 
```

# php - 从其他表中获取值以插入相关的表中？

> ID：11191716
> 
> 赞同：1
> 
> 时间：2012-06-25T14:54:29.893
> 
> 标签：php, mysql

我有 3 个相互关联的表

```
table1 (for insert)
*******************
id1 |   lable    |     line1

table2
********************
id2 |   id1  |  id3

table3
*******************
id3 | line1 
```

如何在 SQL(MySQL) 脚本中编写而不是 php 脚本？

`INSERT INTO table1 (id1,lable,line1) VALUES ($from_GET, $from_GET,How can I got from table3?);`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:59:03.253

```
INSERT INTO table1 (id1,lable,line1)
SELECT $from_GET, $from_GET, line1 FROM table3 WHERE id3 = $from_GET; 
```

检查[文档中的语法](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:00:00.930

如果你正在做插入，那么你可以这样做：

```
INSERT INTO table1 (id, label, line1)
SELECT ... FROM ... WHERE ... 
```

您还可以更新引用相关表：

```
UPDATE table1
JOIN table2 ON ...
SET table1.field = table2.another_field 
```

请注意，如果您使用 $_GET 变量，那么清理该输入以防止 sql 注入攻击是非常重要的。

# java - 使用显示表将列表元素填充到 jsp

> ID：11191720
> 
> 赞同：0
> 
> 时间：2012-06-25T14:54:40.353
> 
> 标签：java, jsp, struts2, struts, displaytag

我正在尝试使用 display-table 将 LoginAction 中的列表“li”填充到 jsp 页面上。并且该列表应该是可选择的。但是当我运行我的 jsp 时，它说“没有找到要显示的内容”。可能是什么问题.并且显示表是一种更好的方法来使列表可选择和可编辑？还是有其他转机？谢谢

登录操作.java

```
public class LoginAction extends Action {   
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request,
                HttpServletResponse response) throws Exception
        {

            ActionForward nextPage = mapping.findForward("success");
                    LoginForm in  = (LoginForm) form;

                    CaseHistoryData cd =new CaseHistoryData();

                    List<CaseHistoryData> li = new ArrayList <CaseHistoryData>();
                    cd.setNo(1);
                    cd.setShortdesciption("NOA Data verified");
                    li.add(cd);
                    CaseHistoryData cd2 =new CaseHistoryData();
                    cd2.setNo(2);
                    cd2.setShortdesciption("Count Allowance");
                    li.add(cd2);
    } 
```

案例历史数据.java

```
 public class CaseHistoryData extends ActionForm {
        private int no;
        private String shortdesciption;
    setter and getters} 
```

AdvancedCorrection.jsp

```
<html:form action="/OnClick" method="post">
    <display:table export="true"  id="data"
                        name="sessionScope.LoginAction.li"
                        requestURI="/OnClick" pagesize="10" >
                <display:column property="no" title="No" sortable="true"   />

            </display:table> 
```

Struts-config.xml

```
 <form-bean name="AdvancedCorrectionBean" type="us.gov.doc.uspto.patent.palm.advancedcorrection.web.domain.CaseHistoryData">
            </form-bean>

    <action path="/OnClick" type="us.gov.doc.uspto.patent.palm.advancedcorrection.web.action.LoginAction" name="AdvancedCorrectionBean" scope="session" 
            input="/AdvancedCorrectio

n.jsp" validate="true" >
         <forward name="success" path="/jsp/AdvancedCorrection.jsp" />

        </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:43:20.330

您的 display:table 在 中查找列表`sessionScope.LoginAction.li`。但是 LoginAction 不在会话范围内（它不在任何范围内），并且在 LoginAction 中无论如何都没有 getLi() 方法可以返回列表，即使有这样的方法，列表也只是一个局部变量`execute()`方法。

您需要将列表存储在`execute()`方法中的请求属性中：

```
request.setAttribute("caseHistoryDataList", li); 
```

在 JSP 中，您需要使用此请求属性：

```
<display:table name="caseHistoryDataList" ... 
```

# javascript - 如何确定字符串代表 Node.js 中的目录还是文件？

> ID：11191724
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:54:45.483
> 
> 标签：javascript, node.js

> **可能重复：**
> [同步检查 Node.js 中是否存在文件/目录](https://stackoverflow.com/questions/4482686/check-synchronously-if-file-directory-exists-in-node-js)

例如，我有一个字符串“C:/dev/image.folder”，我想确定它是目录还是文件（同步）。我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:57:43.550

```
// Query the entry
stats = fs.lstatSync('/the/path');

// Is it a directory?
if (stats.isDirectory()) {
    // Yes it is
} 
```

在此处查看 TJ Crowder 的答案：[同步检查 Node.js 中是否存在文件/目录](https://stackoverflow.com/questions/4482686/check-synchronously-if-file-directory-exists-in-node-js)

# java - Google Documents List API 文件上传 400 响应

> ID：11191727
> 
> 赞同：0
> 
> 时间：2012-06-25T14:54:53.583
> 
> 标签：java, google-docs-api, apache-httpclient-4.x

我正在为 Android 编写自己的 Google Drive 客户端实现，并且正在使用 docs list api。最近我遇到了以下问题：

起初我使用 HttpURLConnection 上传文件，但似乎它在调用 getResponseCose() 后将数据写入套接字，而不是在我写入连接的 OutputStream 时，这对我来说是必须的。

然后我切换到 Apache HttpClient 但我仍然收到 400 响应，不知道为什么。也许你能帮助我。这是用于上传文件的代码。

```
String putUrl = conn.getHeaderField("Location");//from the previous request
final HttpClient client = new DefaultHttpClient();
final HttpPut put = new HttpPut(putUrl);

MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
put.addHeader("Content-Type", mime==null?"file":mime);
//put.addHeader("Content-Length", String.valueOf(length));
put.addHeader("Content-Range", "bytes 0-"+(length-1)+"/"+length);
put.addHeader("GData-Version", "3.0");
put.addHeader("Authorization", getAuthorizationProperty());
entity.addPart("content", new InputStreamBody(in, name));
put.setEntity(entity);

HttpResponse resp = client.execute(put);
int response = resp.getStatusLine().getStatusCode();
if(response == HttpStatus.SC_CREATED){
    lastCreated = parseSingleXMLEntry(resp.getEntity().getContent());
} 
```

完全相同的标头适用于 HttpURLConnection。也许实体是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:32:27.013

好的，解决方案很简单，希望对某人有用。

我不得不删除向请求添加标题的所有行。之后，我将 mime 类型添加到 InputStreamBody 构造函数并覆盖 getContentLength() 方法以提供流长度。最后它看起来像这样：

```
MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
entity.addPart("content", new InputStreamBody(in, ,mime, name){
     @Override
     public long getContentLength() {
          return length;
     }
});
put.setEntity(entity);

HttpResponse resp = client.execute(put); 
```

就这样。

# c# - 向 WCF 服务发送请求时出现错误请求？

> ID：11191730
> 
> 赞同：0
> 
> 时间：2012-06-25T14:54:57.200
> 
> 标签：c#, wcf

当我使用下面的方法向 asmx 服务发送 xml 请求时，它工作正常，唯一的区别是内容类型是`application/soap+xml`. 我收到错误：400 错误请求。这是我在下面使用的通过 HTTP Post 将请求发送到 WCF 服务的方法：

```
private static void SendRequest(string request)
{
    var req = (HttpWebRequest) WebRequest.Create("http://urltoservice.svc");
    req.ContentType = "text/xml";
    req.Method = "POST";

    using (var stm = req.GetRequestStream())
    {
        using (var stmw = new StreamWriter(stm))
        {

            stmw.Write(request);
        }
    }

    byte[] myData;
    using (var webResponse = req.GetResponse())
    {

        var responseStream = webResponse.GetResponseStream();
        myData = ReadFully(responseStream);
    }

    // Do whatever you need with the response
    string responseString = Encoding.ASCII.GetString(myData);
} 
```

它似乎把它扔到了线上： `var webResponse = req.GetResponse()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:21:40.497

不知道为什么会这样，如果有人可以解释它会很棒。我需要将方法名称附加到 URI 以使其工作，例如，

`http://urltoservice.svc/MethodToCall`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:05:59.943

您尝试调用的服务类型是什么。是 REST WCF 服务还是 SOAP WCF 服务？

[您可以使用Fiddler](http://www.fiddler2.com)监控您的请求，以查看您的请求何时有效以及何时无效。

还可以在您的服务上启用[跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)以了解您收到 400 Bad Request 的原因。

# sql - 是否可以从我的 dbml 文件中创建脚本？

> ID：11191732
> 
> 赞同：0
> 
> 时间：2012-06-25T14:55:03.443
> 
> 标签：sql, linq, datacontext

我有一个像 T1 这样的表，其中包含 C1 和 C2 列。我有这个表 T1 的 dbml。

我想为插入/更新/删除生成脚本。

例如：我不希望 datacontext 执行任务。

```
db.T1.InsertOnSubmit(T);  
db.SubmitChanges(); 
```

相反，我只想要脚本。

```
INSERT INTO 
[DB].[dbo].[T1]("C1","C2")
Values
("abc","abc") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:05:48.810

您可以尝试以下几件事：

1.  您可以设置一个测试类来调用您希望从中获取 SQL 的所有方法，然后使用 SQL Server Profiler 来捕获执行的 SQL
2.  与上面类似，但您可以设置`db.Log = Console.Out`在控制台应用程序中查看生成的 SQL ，而不是使用 Profiler
3.  使用[LINQPad](http://www.linqpad.net/)生成数据库上下文；它允许您通过从“结果”选项卡切换到“SQL”选项卡来查看生成的 SQL

# java - 将图像添加到 PDF 文件

> ID：11191733
> 
> 赞同：0
> 
> 时间：2012-06-25T14:55:05.787
> 
> 标签：java, itext, acrofields

我正在尝试将图像添加到报告模板。我正在使用以下代码添加字符串值：

```
form.setField("name", name); 
```

但我无法使用类似的代码将图像添加到表单中：

```
 form.setField("photo", photo); 
```

我在网上搜索但找不到解决方案。整个代码是：

```
public static ByteArrayOutputStream personelSicilFormOlustur(String sablonDir, String name, byte[] photo) {
        ByteArrayOutputStream baos = null;
        try {
            baos = new ByteArrayOutputStream();
            BaseFont fontTimes = BaseFont.createFont(sablonDir + "\\" + fontName, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
            BaseFont fontTimesBold = BaseFont.createFont(sablonDir + "\\" + fontNameBold, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
            BaseFont fontTimesItalic = BaseFont.createFont(sablonDir + "\\" + fontNameItalic, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);

            PdfReader reader = new PdfReader(sablonDir + "\\" + tmSablonForSicilKaydiName);
            PdfStamper stamper = new PdfStamper(reader, baos);
            AcroFields form = stamper.getAcroFields();

            form.setField("name", name); 
            form.setField("photo", photo);

            stamper.setFormFlattening(true);
            stamper.close();

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            return baos;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:44:58.197

我用这段代码解决了这个问题：

```
InputStream photoImage = new ByteArrayInputStream(photo);
BufferedImage bImageFromConvert = ImageIO.read(photoImage);
int type = bImageFromConvert.getType() == 0? BufferedImage.TYPE_INT_ARGB : bImageFromConvert.getType();

BufferedImage dimensionedImage = resizeImage(bImageFromConvert, type);
ImageIO.write(dimensionedImage, "jpg", new File("c:/new-darksouls.jpg"));

Image image1 = Image.getInstance("c:/new-darksouls.jpg");

image1.setAbsolutePosition(450f, 650f);
canvas.addImage(image1); 
```

# html - 相对路径返回 404

> ID：11191738
> 
> 赞同：0
> 
> 时间：2012-06-25T14:55:10.453
> 
> 标签：html

我有一个简单的相对路径的奇怪问题

浏览器必须加载一些 SWF 文件。

```
../../en2/files/fl.swf 
```

没关系，我明白了。

但是当我将该文件复制到上一层时

```
../../../en2/files/fl.swf 
```

然后我得到404错误。为什么 ？

## 编辑

该文件由`swfobject.embedSWF()`函数加载（作为变量）

这是萤火虫的输出：

```
/Scripts/m_f/../../en45/files/f_l6.swf 
```

好的

但

```
/Scripts/m_f/../../../en45/files/f_l6.swf 
```

给我 404 (flash #2032) 所有文件都存在于该路径中。**似乎它不能超过根文件夹？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:56:41.433

如果您将文件复制到上一层，则应使用：

```
../en2/files/fl.swf 
```

如果您复制了嵌套在主目录下一级的文件，那么您应该使用：

```
../../../en2/files/fl.swf 
```

# ios - 在 iOS 设备上以 root 权限调用命令行工具

> ID：11191742
> 
> 赞同：1
> 
> 时间：2012-06-25T14:55:21.170
> 
> 标签：ios, command-line, root, nstask

我需要在我越狱的 iPhone 上运行一些东西，例如“ifconfig en0 down”，它需要以 root 权限运行。

尽管我的应用程序是使用 cydia 安装并在 root 权限下运行，但我没有任何方法可以调用具有相同权限的命令行工具，这些是我尝试过的不同方式：

1.calling system("ifconfig en0 down"); -> 我在 xcode 的控制台中收到“权限被拒绝”通知；

2.使用NSTask直接运行ifconfig，遇到同样的问题（我从mac osx框架复制了NSTask.h文件，它可以工作！）。

3\. 使用 NSTask 运行“/bin/bash”和一个需要和密码交互的 bash 脚本，但是当我尝试使用 NSPipe 与任务交互时，它根本没有响应。

一些代码会是这样的：

```
NSPipe *p1 = [NSPipe pipe];
[self.task setStandardOutput:p1];

self.output= [p1 fileHandleForReading];

NSPipe *p2 = [NSPipe pipe];
[self.task setStandardInput:p2];

self.input = [p2 fileHandleForWriting];

[self.task launch];

NSLog(@"Launched...");

sleep(1);
[self.input writeData:[@"alpine" dataUsingEncoding:NSASCIIStringEncoding]];
NSLog(@"Password wrote..."); 
```

我从下面的 xcode 设备控制台收到通知...

```
Jun 25 22:10:30 unknown Demo[653] <Warning>: Launched...
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>: We trust you have received the usual lecture from the local System
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>: Administrator. It usually boils down to these three things:
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>:     #1) Respect the privacy of others.
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>:     #2) Think before you type.
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>:     #3) With great power comes great responsibility.
Jun 25 22:10:30 unknown UIKitApplication:com.newland.Demo[0xefba][653] <Notice>: Password:
Jun 25 22:10:31 unknown Demo[653] <Warning>: Password wrote... 
```

另一个问题是，在 NSTask 退出之前，前台进程被冻结，我根本无法操作我的应用程序。

我发现了另一个名为 visudo 的命令行工具，它可以让我在不输入 root 用户密码的情况下与命令行工具进行交互，但我不想尝试这种方式，因为我需要一切都通过代码。

我想知道的是如何与 NSTask 创建的进程进行交互，并使用 root 权限运行 make，或者有什么方法可以以 root 权限运行命令行工具？

非常感谢 ：）

# html - 是否应始终在页脚元素上添加 role="contentinfo"？

> ID：11191746
> 
> 赞同：34
> 
> 时间：2012-06-25T14:55:34.537
> 
> 标签：html, footer, wai-aria

在 ARIA 演示网站上，`role="contentinfo"`通常添加在`footer`元素上。

然而，[现代网页设计中的页脚](http://www.smashingmagazine.com/2008/04/08/footers-in-modern-web-design-creative-examples-and-ideas/)可以是创造性的，因此它们还可以包含补充导航链接、社交网站链接，甚至是新闻通讯表单。

以下面的页脚代码为例。应该`role="contentinfo"`加在`footer`or`p`元素上？

```
<footer>
    <nav>
        <ul>
            ........
            ........
            ........
            ........
            ........
        </ul>
    </nav>
    <form>
        ........
        ........
        ........
    </form>
    <p>© 2012 Website.com. All rights reserved.</p>
</footer> 
```

编辑：我利用 W3C ARIA 邮件列表提出了这个问题，W3C HTML 工作组的成员 Steve Faulkner 回答了这个问题。以下是他的建议：

> 我还会考虑浏览器如何将页脚元素映射到可访问性 API。
> 在 Firefox 中，页脚映射到 ARIA role=contentinfo
> 在 Webkit/safari/chrome 中，如果页脚包含在部分或文章元素中，页脚将映射到 ARIA role=group，否则映射到 role=contentinfo
> 在 IE 中它不映射
> 
> 这样做：
> <div role="contentinfo">
>     一些内容
>     <footer>一些内容</footer>
> </div>
> 
> 将导致在已经将页脚映射到 contentinfo 的浏览器中宣布嵌套的 contentinfo 地标。
> 
> 因此，我建议将 role=contentinfo 添加到主页脚，不要太担心您认为可能不适合在页脚中的内容。

所以建议的方法是添加`role="contentinfo"`到 main `footer`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T01:33:53.447

我认为它应该在你的情况下的页脚标签上。

它旨在提供有关父文档的信息，因此如果您的页脚元素提供了父文档的良好上下文，我会使用它。

[https://www.w3.org/TR/wai-aria/#contentinfo](https://www.w3.org/TR/wai-aria/#contentinfo)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-24T17:17:51.210

到目前为止，还没有确定的正确答案。

如果您按照规范：[http://www.w3.org/TR/wai-aria/roles#contentinfo](http://www.w3.org/TR/wai-aria/roles#contentinfo)，`contentinfo`描述为：

> “包含有关父文档的信息的大型可感知区域。该页面区域中包含的信息示例包括版权和指向隐私声明的链接。”

因此，在这种情况下，它应该放在您的`<p>`标签上。

但是，假设您是使用这些地标的用户。如果每个人都将`role="contentinfo"`放在 上`footer`，那么这就是用户所期望的。用户并不关心“规范”说什么，他们只想要在从一个网站浏览到另一个网站时获得一致的体验。他们可能希望页脚链接等出现在该`contentinfo`部分中，因为这就是它在许多网站上的实现方式，并且正如您所提到的，这是许多可访问性专家推荐的方式。

我更喜欢迎合用户，因此我将它应用到`footer`元素上，但是我一直认为这违反了规范*（或者至少是我对它的解释）*，并且它的实现可能会随着浏览器而改变和其他无障碍技术开始以更一致的方式实现无障碍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T15:06:31.407

我会选择`<p>`元素。我的意思是，HTML 的重点是为您的文本提供上下文。因此，通过适当的标记给出适当的上下文。

将角色赋予最合适的元素，它不是页脚元素的受限属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-26T18:38:50.830

这是多余的信息，因为语义已经通过 HTML5 规范[https://dequeuniversity.com/assets/html/jquery-summit/html5/slides/landmarks.html#the_difference_between_html5_and_aria](https://dequeuniversity.com/assets/html/jquery-summit/html5/slides/landmarks.html#the_difference_between_html5_and_aria)

通常，如果 ARIA 角色与 HTML5 元素的语义理解重叠，则可以跳过它们。

我认为这是正确的，但需要屏幕阅读器进行测试以确定这是准确的。

# php - Cakephp - 具有不同个人资料字段的多个用户

> ID：11191752
> 
> 赞同：0
> 
> 时间：2012-06-25T14:55:52.973
> 
> 标签：php, cakephp

我有三种不同类型的用户，它们具有不同的个人资料列。

我目前有用户表和组表，用户表链接到组。

如何设置它以便为每个组用户选择不同类型的配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:03:43.693

您可以使用 $belongsTo 关系来链接两个表，这样每个用户都属于某个组。

为此，您需要创建用户模型。尝试类似下面的代码

```
class Users extends AppModel {

    var $name = 'Users';
    public $belongsTo = array(
        'Groups' => array(
            'className' => 'Groups',
            'foreignKey' => 'group_id'
        )
    );
} 
```

# ember.js - emberjs 数据刷新已经加载的数据

> ID：11191759
> 
> 赞同：1
> 
> 时间：2012-06-25T14:56:13.893
> 
> 标签：ember.js, ember-data

我似乎无法刷新已加载到商店中的数据。我在这里找到了一个可能的解决方案，但它对我不起作用。

[如何使用 ember 数据刷新实体](https://stackoverflow.com/questions/10563384/how-to-refresh-entity-using-ember-data)

当我尝试执行此操作时 App.store.loadMany(data) 我收到此错误

“未捕获的错误：DS.StateManager:ember563 无法响应状态 rootState.loaded 中的事件 setData。”

当我尝试使用此 App.store.findQuery(App.Model, {}) 时，我得到 findQuery 未定义。

如果可能的话，我更喜欢使用这种方法 App.store.loadMany(data) 。

我感谢任何帮助。谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:24:58.850

我最终在此处使用此解决方案修改了 ember-data.js

[https://github.com/emberjs/data/pull/106](https://github.com/emberjs/data/pull/106)

它现在有效。

# c++ - QString 到 std::string

> ID：11191762
> 
> 赞同：3
> 
> 时间：2012-06-25T14:56:16.633
> 
> 标签：c++, qt, visual-c++, qstring

我正在尝试该示例代码，但它在 visualc++ 2010 中崩溃了

```
QString fileName = "helloworld";
std::string str = fileName.toStdString(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T15:01:51.370

> [如何将 QString 转换为 std::string？](https://stackoverflow.com/questions/4214369/how-to-convert-qstring-to-stdstring)
> 
> 将 QString 转换为 std::string 时应该记住的一件事是，QString 是 UTF-16 编码的，而 std::string... 可能有任何编码。

```
QString qs;

// Either this if you use UTF-8 anywhere
std::string utf8_text = qs.toUtf8().constData();

// or this if you on Windows :-)
std::string current_locale_text = qs.toLocal8Bit().constData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:01:53.990

`std::string str(fileName.toStdString());`如果您希望 str 包含 qstring 的副本

# vim - 在 NERDTREE 中重命名文件

> ID：11191764
> 
> 赞同：42
> 
> 时间：2012-06-25T14:56:25.123
> 
> 标签：vim, rename, nerdtree

是否可以重命名 NERDTree 中的文件？我知道 m 菜单，但没有重命名选项。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-25T15:01:32.533

使用m 菜单中的 , 重命名`Move`。`(m)ove the current node`

# ssas - 单一维度的 MDX 查询

> ID：11191775
> 
> 赞同：0
> 
> 时间：2012-06-25T14:57:17.780
> 
> 标签：ssas, mdx

有人可以提醒我如何做到这一点吗？

我想要一个 MDX 查询（MS SSAS）来查询一个维度。对立方体或度量不感兴趣。

据我所知，语法涉及一个 $ 符号，类似于 [$MyDimension]。

我知道我可以执行以下操作，但我想在不接触多维数据集的情况下查询维度。

```
select [DimensionName].Children on 0 from [CubeName] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T00:50:57.947

我猜他们被称为“维度立方体”：

```
select [dim].members on 0 from [$dim] 
```

或者

```
select [Measures].defaultMember on 0, [dim].members on 1 from [$dim] 
```

# ruby-on-rails - 无法加载 Capistrano Receipe 的配置

> ID：11191779
> 
> 赞同：2
> 
> 时间：2012-06-25T14:57:28.587
> 
> 标签：ruby-on-rails, capistrano

问题是我想从控制台获取我的 Capistrano 配方的**参数**，所以在查看谷歌后我想出了这个：

```
task :set_repo do
  set :repository,  "git@github.com:#{configuration[:repo]}/MyApp.git"
  set :scm_user,  configuration[:repo]
end 
```

尝试运行任务时，我为配置散列提出了**“缺少方法”**错误。在 Google 上再次搜索后，我发现我必须从 Capistrano 加载配置，所以我添加了以下代码：

```
configuration = Capistrano::Configuration.respond_to?(:instance) ?
  Capistrano::Configuration.instance(true) :
  Capistrano.configuration(:must_exist) 
```

但这会引发 LoadError 并显示消息**“请从 Capistrano 配方中要求此文件”**。我试过要求 capistrano/configuration 模块，但我一直收到同样的错误。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:52:50.813

好吧，我找到了一个完全不使用配置的解决方法。

似乎您可以像这样在命名空间之外设置几个任务

```
desc "Use UserA's git repository"
task :usera do
  set :repository,  "git@github.com:UserA/MyApp.git"
  set :scm_user,  "UserA"
end

desc "Use UserB's git repository"
task :userb do
  set :repository,  "git@github.com:UserB/MyApp.git"
  set :scm_user,  "UserB"
end 
```

完成此操作后，您可以简单地在控制台中调用您的部署任务，将您的存储库任务放在前面。例如：

```
$ cap usera deploy 
```

因此，这将首先调用您的**usera**任务，然后调用您的**deploy**任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:37:24.060

您可以从命令行设置 capistano 变量。

例如，以下调用会将 capistrano 变量**scm_user**设置为“userA”，将 capistrano 变量**存储库**设置为“http://myrepo.com/blah”：

```
cap deploy -s scm_user="userA" -s repository="http://myrepo.com/blah" 
```

这与放置相同的效果

```
set :scm_user, 'userA'
set :repository, 'http://myrepo.com/blah' 
```

在 deploy.rb 文件的顶部。

# java - 如何计算 2ndArray 中的距离？

> ID：11191781
> 
> 赞同：-1
> 
> 时间：2012-06-25T14:57:33.400
> 
> 标签：java, algorithm, opencv, javacv

对于一些图片分析，我正在寻找一种有效的算法来计算从某个 (x,y) 点到数组中具有相同值的另一个点的距离。

我想用它来检测包含相同颜色的大区域。有人有想法吗？

例如，我有以下矩阵，想要检测顶部的左方。

```
 [0 255 255 0 0  ]
  [0 255 255 0 0  ]
  [0 255 0   0 0  ]
  [0 0   0   0 255] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:14:56.840

您可以将矩阵视为图形。将每个单元格视为一个节点。如果两个相邻单元格具有相同的值，则假设这些单元格之间存在连接。找出图中所有的连通分量，然后找出最大的连通分量。

另一个非常相关的方法是[区域增长](http://en.wikipedia.org/wiki/Region_growing)算法。这个想法是使用递归来访问给定种子像素的所有附近节点。因此，在您的情况下，如果您可以提供一个具有给定颜色的种子点，该算法将能够找到从给定点构建的所有区域。这可能是一个起点，您可以尝试使用区域增长作为基本方法来寻找最大的区域。

# c# - 如何在工具条按钮上使用工具提示

> ID：11191784
> 
> 赞同：1
> 
> 时间：2012-06-25T14:57:44.900
> 
> 标签：c#, winforms, controls, tooltip

我正在尝试将工具提示应用于工具条按钮，但它一直给我这个错误：

`Operator '==' cannot be applied to operands of type 'System.Windows.Forms.Control' and 'System.Windows.Forms.ToolStripButton'`

关于如何解决这个问题的任何线索？

**更新：**

```
private void toolTip1_Popup(object sender, PopupEventArgs e)
{
    if (e.AssociatedControl == tBtn1)
    {
        using (Font f = new Font("Tahoma", 9))
        {
            e.ToolTipSize = TextRenderer.MeasureText(
                toolTip1.GetToolTip(e.AssociatedControl), f);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:43:01.397

`ToolStripButton`派生自`ToolStripItem`它有一个`ToolTipText`属性。

正如已经解释的那样，`ToolStripItem`它不是从`Control`类派生的，因此提供了自己的实现来呈现工具提示。[这篇](https://stackoverflow.com/a/4669343/577417)文章可以帮助您自定义工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:01:13.330

更新：在 Winform 项目中尝试此操作但未成功后，我在 SO 上搜索了其他线程，这可能对您有所帮助：

[在非焦点 ToolStripItem 上显示工具提示](https://stackoverflow.com/questions/143058/showing-a-tooltip-on-a-non-focused-toolstripitem)

> 第一个问题是您不能直接将其设置为按钮，它不会从 Control 继承，并且工具提示不会显示，除非您在条上而不是按钮上。

别处

> 我试图做同样的事情，并确定这将非常具有挑战性并且不值得。原因是在内部，.NET 代码专门设计为仅在窗口处于活动状态时才显示工具提示 - 他们在 Win32 级别检查此内容，因此很难伪造代码。

用户从来没有接受过任何正确的答案，乍一看，这可能是很多工作却很少得到回报。这是一个从头开始的项目吗？如果是这样，也许你可以使用 WPF 来完成，它比 winforms 灵活得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:38:25.330

奇怪的是，[toolstripbutton](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripbutton.aspx)类不像其他 System.Windows.Forms gui 组件那样继承自 Control 类。也许在您的代码`e.AssociatedControl`中旨在与 System.Windows.Forms 控件一起使用。简而言之，我认为 MS 还没有决定为条形控件提供工具提示。我不知道您的确切要求，但对于一些可能点击的替代方案，请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms171703.aspx)。

# hadoop - 获取hadoop流式jobid

> ID：11191788
> 
> 赞同：1
> 
> 时间：2012-06-25T14:58:02.350
> 
> 标签：hadoop, hadoop-streaming

所有 Hadoop 作业都有唯一的 jobid。您可以使用 jobid 获取作业状态或作业计数器。问题是我怎样才能得到我刚刚从我的脚本运行的工作的jobid？当然，我想以可靠和简单（如果可能的话）的方式做到这一点。

例子：

1）从我的脚本中运行：

```
hadoop jar      ${HADOOP_STREAMING} \
                -D mapred.job.name="$NAME" \
                -D mapred.reduce.tasks=$NREDUCERS\
                -mapper     "cat" \
                -file       ./reducer.py \
                -reducer    "python ./reducer.py" \
                -input       hdfs:/logs/2012-06-25/*.bz2 \
                -output      hdfs:/tmp/test 
```

2）现在我想以某种方式获得已启动任务的*jobid*。

3) 当我有 jobid 时，我可以进行 hadoop job -status 和 hadoop job -counter 查询。

**更新：**

同步情况（等到完成，获取jobid然后询问状态/计数器）似乎是所需的最小值，但有时使用起来并不方便。有时我想同时运行几个 hadoop 流作业（作为后台任务），并且我想记住以后可以使用的所有 jobid，例如用于工作流分析。

事实上，我已经找到了一些解决方案，但我认为它是一种 hack，这让我很困扰。如果有人向我展示更优雅的解决方案，我将不胜感激。这是解决方案：

1）当我运行一个 hadoop 流作业时，我必须指定一个*输出 hdfs 目录*。

2）使用这个目录我可以访问hdfs中的作业配置文件：

```
CONF_FILE_PATH=`hadoop fs -stat hdfs:<output_dir_path>/_logs/history/*.xml | awk '{print $NF}'` 
```

3）最后，我可以从配置文件的名称中提取jobid

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-17T10:49:06.797

您可以选择为作业分配用户定义的名称：

```
|-D mapred.job.name="unique_name_within_the_user" \ 
```

然后从 Hadoop YARN REST API 的响应中识别您的 job_id：

```
curl -H "Accept: application/json" -X GET "http://host.domain.com:8088/ws/v1/cluster/apps" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:32:00.543

在当前的“黑客”之外，您有两个选择（其中一个只是另一个“黑客”！）

1.  捕获正在运行的进程的标准错误，作业 ID 将在前（几）行输出，格式类似于：`Running job: <jobid>`.

2.  修改流式 contrib 文件夹中的[StreamJob.java](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/contrib/streaming/src/java/org/apache/hadoop/streaming/StreamJob.java?view=markup)源代码（大约第 917 行），以将作业 ID 输出到 tmp 文件（可能以进程 ID 为前缀/后缀，以便从 shell 快速发现）。

# c# - XSLT 格式代码文档 (xml) 中的换行符

> ID：11191789
> 
> 赞同：5
> 
> 时间：2012-06-25T14:58:03.573
> 
> 标签：c#, .net, xml, xslt

我们基于 WinForms 的应用程序获取由 Visual Studio 生成的文档文件（Xml 文档），执行一些 XSLT 转换并在表单内的 WebBrowser 控件中显示结果。

问题是，我们似乎无法显示换行符，例如 xml 文档中的标签。

例如：

```
 <member name="T:Genesys.AgentLoginData">
            <summary>
            This is some test summary <br />
            New line here
            </summary>
        </member> 
```

当与 XSL 转换一起使用时，摘要文本将被截断为单行。

为简化起见，转换执行此操作以选择摘要文本：

```
<xsl:template match="member" >
<xsl:value-of select="summary" disable-output-escaping="yes" />
</xsl:template> 
```

我们如何才能在应用程序的 WebBrowser 控件中正确显示新行？

编辑：从 WebBrowser 控件添加“查看源代码”的内容。我所追求的是“这是一种方法”之后的新行，依此类推。浏览器只是将其显示在一行中。

```
<?xml version="1.0" encoding="utf-8"?><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Action Help</title><style type="text/css">
          p  {text-indent:200px;}
          li {text-indent:180px;}
          h1 {color:navy;}
          h2 {color:blueviolet}
          h4 {color:navy;}
        </style></head><body><H2 xmlns="">AgentLogin</H2><H1 xmlns=""></H1><h3 xmlns="">
            This is a method 
            And its parameter 
            Check this out
            name</P></body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:09:08.740

您可能正在寻找`xml:space="preserve"`指令。请参阅[http://msdn.microsoft.com/en-us/library/aa468566.aspx](http://msdn.microsoft.com/en-us/library/aa468566.aspx)以获取有关如何处理 .net 堆栈上的 XSL 和空白的体面文章。

尽管我刚刚注意到您正在 Web 浏览器控件中显示生成的转换，这可能意味着您的问题实际上与生成的 HTML 相关。尝试查看您在控件中显示的内容的源代码并将其添加到您的问题中。

查看更新的评论并做出一些猜测，我认为您的问题是您使用的是 xsl:value-of，它只获取节点的文本，而不是 xsl:copy-of，它会获取文本节点以及`<br/>`元素。尝试替换这个：

```
<xsl:value-of select="summary" disable-output-escaping="yes" /> 
```

和

```
<xsl:copy-of select="summary/node()" /> 
```

您的另一个选择是转义，`<br/>`以便它作为文本而不是子节点出现，并保留禁用输出转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:47:33.783

**[`<xsl:value-of>`](http://www.w3.org/TR/1999/REC-xslt-19991116#value-of)您需要了解和之间的区别[`<xsl:copy-of>`](http://www.w3.org/TR/1999/REC-xslt-19991116#copy-of)。**

`<xsl:value-of>`仅将属性表达式中指定的*字符串值*复制到输出。`select`这*不包括*任何元素（因此`<br/>`输出中不存在）。

另一方面，将属性``<xsl:copy-of>`中指定的节点集中的所有节点复制到结果树。`select`

**因此解决方案很简单**：

**替换**：

```
<xsl:template match="member" >
  <xsl:value-of select="summary" disable-output-escaping="yes" />
</xsl:template> 
```

**与**：

```
<xsl:template match="member" >
  <xsl:copy-of select="summary/node()"/>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:49:12.597

根据您生成原始 xml 的方式，您可能需要使用 html 实体来正确保留这些标签。

[http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

尝试

```
 <member name="T:Genesys.AgentLoginData">
        <summary>
        This is some test summary &lt;br /&gt;
        New line here
        </summary>
    </member> 
```

# javascript - Jasmine 在测试之后调用 beforeEach

> ID：11191790
> 
> 赞同：2
> 
> 时间：2012-06-25T14:58:04.817
> 
> 标签：javascript, unit-testing, coffeescript, jasmine

我正在编写一个具有以下茉莉花规格的 Rails 应用程序：

```
describe "buttons", ->

  beforeEach ->
    loadFixtures("foo.html")
    alert("beforeEach: " + $("tr.foo").length)

  describe ".hide_foo", ->
    alert(".hide-foo: " + $("tr.foo").length)
    ...
    expect($("tr.foo")).toBeHidden() 
```

规范因错误而失败：

```
TypeError: Cannot call method 'expect' of null 
```

所以我输入了警报。首先我们看到“.hide-foo: 0”，然后在我关闭后出现“beforeEach: 44”。很明显，错误是因为我们在`expect`加载夹具之前调用了，但是......为什么*在每个*示例之前都没有`beforeEach`执行该死？

 *我正在使用 jasminerice 来使用 Rails 资产管道来编译我的 Coffeescript。版本：

```
$ bundle show jasmine && bundle show jasminerice
/home/tmacdonald/.rvm/gems/ruby-1.9.2-p320/gems/jasmine-1.2.0
/home/tmacdonald/.rvm/gems/ruby-1.9.2-p320/gems/jasminerice-0.0.9 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:20:17.503

`describe`块不应直接在其中包含测试逻辑。您应该将所有测试逻辑放在一个`it`块中。

```
describe ".hide_foo", ->
    it 'should hide the row', ->
        alert(".hide-foo: " + $("tr.foo").length)

        expect($("tr.foo")).toBeHidden() 
```*

# internationalization - 如何使用 Appcelerator 进行本地化？

> ID：11191791
> 
> 赞同：2
> 
> 时间：2012-06-25T14:58:06.560
> 
> 标签：internationalization, appcelerator-mobile

我想使用字符串，所以我不必为每种语言都有 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:07:20.987

在每个项目中，都有一个名为“i18n”的目录。在“en”的子目录中，有一个名为“strings.xml”的文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
<string name="name">Hello</string>
</resources> 
```

在您的代码中，您可以像这样引用它：

```
L('name'); 
```

[您可以在此处](http://docs.appcelerator.com/titanium/2.0/index.html#!/api/Global-method-L)阅读有关全局 L 函数的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:40:45.820

在寻找 Titanium 帮助时，请始终尝试搜索“wiki Titan {关键字}”，因为 Appcelerator Wiki 有很多好东西，但 SEO 很差。这是指南[https://wiki.appcelerator.org/display/guides/Internationalizing+your+Application/](https://wiki.appcelerator.org/display/guides/Internationalizing+your+Application/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T09:48:28.523

最新答案来自 2012 年，因此[这是文档的当前位置](https://docs.axway.com/bundle/Titanium_SDK_allOS_en/page/internationalization.html)。如果移动了，搜索“Axway SDK How-tos Internationalization”

# ruby-on-rails - 关联，从项目索引视图为项目创建任务

> ID：11191802
> 
> 赞同：0
> 
> 时间：2012-06-25T14:58:39.003
> 
> 标签：ruby-on-rails

我在项目和任务之间有关联。

一个项目有_很多任务，一个任务属于_一个项目。

我的模型工作得很好。我可以从项目等创建任务。

当我想在项目索引视图上添加一个按钮以将任务添加到项目时，我的问题就来了。

**我想要的是这样的**

*（项目索引视图）*

项目 1 显示、编辑、销毁、添加任务

项目 2 显示、编辑、销毁、添加任务

因此，当我单击项目 1 的 add_task 时，我会被重定向到一个新的任务表单来为该项目创建一个任务。

我在项目索引视图中添加了 <%= link_to 'add_task', new_task_path(:project_id => project) %>，所以当我点击 add_task 时，它会将我重定向到 /task/new?project_id=1

但是当我提交任务时，任务没有链接到项目。

如何获取 project_id？

有没有人有教程或我应该怎么做的例子？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:01:23.890

在您的表单中，为项目 ID 添加一个隐藏字段

```
<%= f.hidden_field :project_id %> 
```

编辑：也将其放入您的新操作中：

```
@task = Task.new(:project_id => params[:project_id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:10:14.840

就像 Oscar 建议的那样，您可能希望在表单中添加一个额外的字段，将 project_id 提交给参数。然后在您的更新或创建函数中，您可以使用参数值创建记录，尽管在隐藏字段上确保您正确设置了值。

```
<%= f.hidden_field :project_id, :value => project.id%> 
```

# java - 如何使 JDialog 成为最顶层但不是模态的？

> ID：11191803
> 
> 赞同：4
> 
> 时间：2012-06-25T14:58:40.600
> 
> 标签：java, applet, jdialog

我正在创建一个小程序。该小程序必须从数据库中获取一些大块数据并且该操作很慢......这就是为什么我想创建一个“加载”JDialog，当小程序从小程序加载数据时，它将显示在小程序的顶部DB，但它不应该阻止用户对小程序的输入。
怎么做？如果我创建一个“setAlwaysOnTop(true)”的 JDialog，它将不会显示在顶部。如果我将它设置为模式，它将显示，但它不允许我的小程序与 DB 通信。我什至试图使那个“加载”窗口可运行并从另一个线程运行它，但不走运。

如何为小程序制作适当的、通用的“加载”JDialog，它不会是模态的，但会始终保持在最前面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:17:52.310

从非 EDT 线程调用 swing/awt 通常是一个非常（我的意思是非常非常）坏主意。请注意，小程序 JFrame/JDialog 在 OSX 和 Windows 中的工作方式存在许多问题。`JProgressBarr`如果您的小程序刚刚使用或直接在您的小程序 UI 中使用，IMO 将提供更好的用户体验。如果您绝对必须弹出一个窗口，请使用 JFrame 和`AlwaysOnTop=true`. 你得到奇怪行为的原因是你可能没有使用带有父组件的构造函数或只是传入一个`null`值。

# ios - 从后台恢复显示 ModalViewController，避免下面的内容闪烁

> ID：11191807
> 
> 赞同：0
> 
> 时间：2012-06-25T14:58:55.920
> 
> 标签：ios, uiviewcontroller, uikit

在我的应用程序中，我在启动时以及从后台恢复以呈现加载/摘要屏幕时在根视图控制器顶部呈现模式视图控制器。这在几秒钟后被解除以显示根视图控制器。模态是通过`applicationWillEnterForeground`应用程序委托上的方法呈现的。

一切正常，但是当从后台恢复时，在再次呈现加载模式之前看到下部根视图控制器的闪烁是很常见的。

我正在努力寻找一种明显的方法来进行此演示，以确保它安全地显示而无需先看到下面的视图。我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:54:07.817

该[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)说明了以下内容：

> **准备为他们拍照。**当 applicationDidEnterBackground: 方法返回时，系统会为您的应用程序的用户界面拍照，并将生成的图像用于过渡动画。如果您的界面中的任何视图包含敏感信息，您应该在 applicationDidEnterBackground: 方法返回之前隐藏或修改这些视图。

这意味着您应该修改视图，`applicationDidEnterBackground:`使其以您希望它出现在图片中的方式出现，当应用程序进入后台状态时，iOS 将自动拍摄。

还要记住以下几点：

> 您的应用委托的 applicationDidEnterBackground: 方法大约有 5 秒的时间来完成所有任务并返回。在实践中，此方法应尽快返回。如果该方法在时间用完之前没有返回，您的应用程序将被终止并从内存中清除。如果您仍然需要更多时间来执行任务，请调用 beginBackgroundTaskWithExpirationHandler: 方法来请求后台执行时间，然后在辅助线程中启动任何长时间运行的任务。无论您是否启动任何后台任务，applicationDidEnterBackground: 方法仍必须在 5 秒内退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:43:44.263

我记得，当应用程序作为背景时，Apple 代码会截取屏幕截图并将其存储起来。当您的应用程序重新启动时，它会显示屏幕截图，直到您的应用程序完成并接管。

简短的回答，我认为不可能避免内容的闪现。

你真的有 2 个选择，我只是建议制作一个简短的“出现”动画以进行平滑过渡。如果您尝试通过重新登录提示或其他方式保护敏感材料，那将不起作用。如果你正在处理这样的情况，你需要在进入后台状态时处理事情，而不是在你从它回来时处理事情。

# regex - 将使用正则表达式修改的另一个变量的结果分配给一个变量

> ID：11191812
> 
> 赞同：2
> 
> 时间：2012-06-25T14:59:06.297
> 
> 标签：regex, perl

> **可能重复：**
> [如何在保留原始字符串的同时对字符串执行 Perl 替换？](https://stackoverflow.com/questions/22836/how-do-i-perform-a-perl-substitution-on-a-string-while-keeping-the-original)
> [Perl：使用 s/ （替换）并返回新字符串](https://stackoverflow.com/questions/3440363/perl-use-s-replace-and-return-new-string)

如果您找到更好的描述方式，请随意修改此问题的标题。

想象一下我们有：

```
 my $foo = something;
   my $newfoo = $foo =~ s/.*/something else/; 
```

我以为我会拥有`$newfoo = something else`，而我发现它等于 1。我想这个 1 可以说“匹配和替换成功”。

我找到的唯一解决方案是后续：

```
 my $foo = something;
  my $newfoo = $foo;
  $newfoo =~ s/.*/something else/; 
```

有没有办法完成相同的任务，即使用正则表达式的结果创建一个新变量而不修改第一个变量，没有中间步骤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:01:58.697

如果您使用[perl 5.14](http://search.cpan.org/~jesse/perl-5.14.0/pod/perldelta.pod)或更高版本，这将起作用。它被称为[非破坏性替换](http://search.cpan.org/~jesse/perl-5.14.0/pod/perldelta.pod#Non-destructive_substitution)。否则，您将不得不坚持临时分配：

```
my $newfoo = $foo =~ s/.*/something else/r;
                                         ^ Add this 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T15:56:02.920

您可以在任何版本的 Perl 中通过合理地使用括号来分配和执行替换：

```
(my $newfoo = $foo) =~ s/.*/something else/; 
```

在这种情况下，使用 Perl v5.14 可以为您节省一次击键（尽管 v5.14 可能还有其他好处）

# neo4j - 返回密码中的所有匹配关系

> ID：11191816
> 
> 赞同：0
> 
> 时间：2012-06-25T14:59:23.453
> 
> 标签：neo4j, cypher

我想检索一组节点，这些节点在使用可以具有匹配属性的差异关系之间共享一个公共节点。我认为查询看起来像这样：

```
start 
    n1=node(8) 
match 
    n1-[r1:HAS_VALUE]->value<-[r2:REQUIRES_VALUE]-object 
where 
    all(x in relationship(r1) 
        where all(y in relationship(r2) where x.name==y.name)) 
return 
    object 
```

`SyntaxException: unknown function`但是当我运行它时，密码会返回。有什么办法可以完成这种类型的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:35:55.423

我会这样写这个查询：

```
start 
    n1=node(8) 
match 
    n1-[r1]->value<-[r2]-object 
where 
    r1.name = r2.name
return 
    object 
```

当你有一个可变长度的关系时使用 ALL 函数 - 在这个查询中 r1 和 r2 持有一个单一的关系，而不是它们的集合。

高温下，

安德烈斯

# jsf - 更新后仍显示旧项目

> ID：11191818
> 
> 赞同：0
> 
> 时间：2012-06-25T14:59:35.950
> 
> 标签：jsf, richfaces, jstl, seam

我正在使用 JSF/Facelets/Seam/RichFaces/JSTL。`<c:forEach>`在一个 Facelets 文件中，我使用标签显示了一些基于 bean 属性的命令链接。

```
<c:forEach items="#{myBean.getSkds()}" var="skd">
    <a4j:commandLink value="#{skd.getLabel()}" ... />
</c:forEach> 
```

在页面的另一部分，我更改了`skds`myBean 的属性并重新渲染所有面板。

```
<a4j:commandButton action="#{myBean.changeSkds()}"
    image="/img/ico_change.gif"
    reRender="allPanels"
/> 
```

第一次调用正确显示所有 4 个命令链接。第二次调用应该显示 10 个命令链接，但它是 4 个原始的和 6 个新的，而不是 10 个新的 onws。

例如，第一次调用显示以下链接：

```
a b c d 
```

第二个调用显示以下链接：

```
a b c d 5 6 7 8 9 10 
```

虽然我希望他们是

```
1 2 3 4 5 6 7 8 9 10 
```

这是如何引起的，我该如何解决？

我试过了`<ui:repeat>`，但第二次调用的结果`a b c d`与第一次调用完全相同。
最后尝试使用`<a4j:repeat>`，但结果与 相同`<ui:repeat>`。

另一个尝试：
我用不使用标签来显示`<a4j:commandLink...`每个 Skd 的。`forEach`我现在看到的和以前一样。所以这不是 forEach 的原因，但似乎与重新渲染和`<s:div>`和`<a4j:commandLink>`

有趣的事情：
我现在尝试以下列方式显示标签：

```
<c:forEach items="#{myBean.getSkds()}" var="skd">
    #{skd.getLabel()}
    <a4j:commandLink value="#{skd.getLabel()}" ... />
</c:forEach> 
```

我看到了一件非常奇怪的事情！！！
skd.getLabel() 是正确的，但 commandLink 值不正确！！！
怎么回事？？？！！！

# android - 将 PhoneGap iOS 应用程序迁移到 Android - 遇到可怕的性能问题

> ID：11191819
> 
> 赞同：5
> 
> 时间：2012-06-25T14:59:44.283
> 
> 标签：android, cordova, kendo-ui

几个月来，我们一直在使用 PhoneGap 1.8.1 和 Telerik 的 Kendo UI 开发一个相当大的 iOS 应用程序。我会说 iOS 应用程序的速度大约是其原生应用程序的 90%，这对我们来说是完全可以接受的。我们采用了完全相同的代码库并替换了 Android 等效的 javascript 文件，启动了我们的设备（运行 4.0.3 的摩托罗拉 Xoom），但性能非常糟糕。最糟糕的是页面转换——这可能需要 0.3 秒——需要 2-5 秒。模拟器上的性能即使不是更差也是相同的（这并不奇怪）。

如果我可以发布有用的代码，请告诉我。否则，我想我们正在寻找遇到这种情况的其他人和/或性能改进建议。在这一点上，PhoneGap 对我们来说完全不是 Android 开发的入门者。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T15:24:21.383

我们使用 Sencha Touch 2 进行了一些跨平台的移动开发（没有使用 Kendo UI 的经验）。上次我详细研究性能时，Sencha Touch 2 是功能齐全/成熟的跨平台移动框架（Jquery Mobile、Kendo UI 等）中性能最好的。我们的经验是，Android 上的性能比 iOS 慢很多（尽管 Sencha Touch 2 被认为有点快）。滚动列表、屏幕转换等都低于标准。我对性能差异感到相当惊讶。运行 4.0 的 Galaxy Nexus 上的 Android 性能更好，但仍明显慢于 iOS 设备。

不幸的是，我看不到让您的应用程序在 Android 上与在 iOS 上执行*相同的方法。*这是我不久前遇到的不幸现实。您看到的问题是由于浏览器在不同平台上的性能造成的；phonegap 只是使用 UIWebView 和 WebView 在原生应用程序包装器中加载 html 和 javascript 页面。您可以在设备的浏览器中加载 Kendo UI 应用程序吗？我假设性能与原生包装的应用程序相同。

我们的“解决方案”是首先针对 Android 进行开发，并让应用程序达到其性能良好的地步。然后我们知道它们在 iOS 设备上会很棒。

我对 Kendo UI 不是很熟悉，但就建议或调整而言，我们尽量在 DOM 中保留尽可能少的内容。当应用程序启动时，我们尽可能少地在 DOM 中创建，然后根据应用程序的需要创建/销毁对象。此外，仅对 javascript 进行一般优化会有所帮助。

我认为这是这些移动框架的一个肮脏的小秘密。当你与他们联系时，他们的回答是 Android 浏览器性能很慢，所以应用程序会很慢。即“不是我们的错”，但他们继续描绘一个在所有平台上都运行良好的框架。

对我们来说，Sencha Touch 2 速度足够快，它为我们的用户在 Android 设备上提供了不错的体验，因此与为每个平台开发原生应用程序相比，节省大量时间是值得的。

澄清一下，您看到的性能问题可能与 PhoneGap 无关，而是设备上的浏览器性能。PhoneGap 本质上只是将 WebView 包装在原生应用程序包装器中。我们已经看到了在 Android 上同时使用 PhoneGap 和 Sencha Touch 原生封装时的性能问题。

# java - 使用百分比和 BigDecimal 进行测试

> ID：11191820
> 
> 赞同：4
> 
> 时间：2012-06-25T14:59:51.147
> 
> 标签：java, junit, floating-point, bigdecimal

我有两个 BigDecimals Actual 和 Budgeted。我将实际除以预算得出一个百分比。

我遇到的问题是，当我正在构建一些单元测试时，我试图确认生成的 BigDecimal 是 .1，但是当 try equals(new BigDecimal(.1)) 由于双精度问题而失败时。

我想克服这个问题的方法是创建两个 BigDecimal - 十和一百，将这两个除以进行测试。这样，我只使用定点数，我的计算应该准确无误。

所以我的问题是：有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T15:04:02.290

使用 BigDecimal 时，您应该使用`compareTo`方法而不是`equals`方法进行“数字相等”测试：

```
if (bigDecimal1.compareTo(bigDecimal2) == 0) { //then they are equals 
```

参看。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#equals%28java.lang.Object%29)了解更多信息。

正如其他人所提到的，您应该使用字符串构造函数来避免舍入问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:03:39.290

您可以使用`BigDecimal`( [docu](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29) ) 的字符串构造函数：

```
 equals( new BigDecimal("0.1") ); 
```

# paypal - Paypal 直接付款（信用卡）是否需要帐单地址

> ID：11191823
> 
> 赞同：1
> 
> 时间：2012-06-25T15:00:15.220
> 
> 标签：paypal, credit-card, billing

当用户直接付款时（以客人身份购买 - 用信用卡付款），默认情况下，用户需要填写信用卡帐单地址和电话号码，然后才能转到信用卡号码，csc 等。其实我真的不想要帐单地址，我可以直接将用户定向到信用卡号，csc 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:12:58.000

有些信用卡需要账单地址。例如，Visa 需要账单地址。

是的，如果您想接受所有类型的信用卡，您需要提供账单地址。

仅供参考，如果您使用 PayPal Direct，您还需要显示 PayPal Express 按钮。请确保 PayPal 首先批准您的商家帐户。根据您的业务类型，他们有时不会批准您的商家帐户。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:05:02.483

根据我自己使用 Paypal 的各种 API 的经验，您需要包含账单或运输信息。但作为记录，您应该参考他们的文档（非常好）：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/howto_api_reference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-10T11:49:37.237

我填写的许多抄送表都不要求提供地址，但它们确实有效。他们为地址发送了什么？我发现如果您没有地址，则无法发送空字符串，这只会导致错误，但如果您在地址字段中输入“无”，在邮政编码中输入“0000”，则可以接受。这些是我在每次购买 CC 时发送给电话的参数，它们每次都有效：

```
self.co_params['street'] = 'None'
self.co_params['city'] = 'None'
self.co_params['state'] = 'None'
self.co_params['zip'] = '0000'
self.co_params['countrycode'] = 'GB'
....
nvp_obj = wpp.doDirectPayment(self.co_params) 
```

这是使用 django-paypal。还有其他参数，但这个地址组合对我有用。我没有在 Paypal 的文档中找到这个，而是反复试验。

# objective-c - 在滑动之前允许延迟

> ID：11191824
> 
> 赞同：0
> 
> 时间：2012-06-25T15:00:16.890
> 
> 标签：objective-c, ios, uigesturerecognizer, gesture, gesture-recognition

我正在写一个纸牌游戏。当用户触摸他们手中的卡片时，他们正在触摸的卡片会稍微滑出以明确他们正在触摸的是哪张卡片，因为他们手中最多可以有 18 张卡片，而且它们有点小。我接下来想要的是让用户能够向上刷卡来玩它。

我曾尝试使用`UISwipeGestureRecognizer`，但由于用户在第一次触摸屏幕时可能会暂停（以确保正确的卡片滑出），因此它通常不会将其识别为滑动。用户也可以只是将他的手指滑到相邻的卡片上然后刷卡。所以，这是另一个问题，因为手势只能在触摸开始的 UIView 上被识别。

我能想到的最好的方法是`UIPanGestureRecognizer`在父视图（包含所有卡片的 UIView）上使用 a 。我可以使用它的速度来决定是否应该将其视为滑动。我必须设置`cancelsTouchesInView`并`NO`仍然只使用`touchesBegan`等来检测刷了哪张卡。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:53:50.433

正如我在评论中所说，您可以通过继承 UIGestureRecognizer 来制作您自己的自定义滑动手势，而不是让 UIPanGesture 以可能不正常的方式工作。

看看这个链接。第一部分是关于一般手势，但后半部分是关于制作自定义手势。

[http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:19:45.757

如果我正确理解您要做什么，我会尝试结合使用 UILongPressureGestureRecognizer 和 UISwipeGestureRecognizer。

> UILongPressGestureRecognizer 是 UIGestureRecognizer 的一个具体子类，用于查找长按手势。用户必须在视图上按下一根或多根手指至少指定时间段才能发送操作消息。另外，手指可以只移动指定的距离来识别手势；如果他们超出此限制，则手势失败。
> 
> 长按手势是连续的。当允许的手指数量 (numberOfTouchesRequired) 在指定的时间 (minimumPressDuration) 内被按下并且触摸没有超出允许的移动范围 (allowableMovement) 时，手势开始 (UIGestureRecognizerStateBegan)。每当手指移动时，手势识别器就会转换到 Change 状态，并在任何手指抬起时结束 (UIGestureRecognizerStateEnded)。

`UILongPressGestureRecognizer`将允许用户“挑选”卡片；如果他们移动手指太多（即，在连续的卡片上），则手势失败。

在其中，`UIGestureRecognizerStateBegan`您可以设置一个变量来跟踪当前“挑选”的卡片（只要它保持不变）。

如果用户随后在父视图（包含所有卡片的视图）上滑动，您将移动卡片。

另一方面，我觉得这在`touchesBegan`/ `touchesMoved`/方面实现起来不会那么复杂，`touchesEnded`并且这可能是处理它的最合适的方式。

# loops - 编辑所有功能不起作用 - CakePHP

> ID：11191827
> 
> 赞同：0
> 
> 时间：2012-06-25T15:00:19.967
> 
> 标签：loops, cakephp, foreach, edit

我正在开发一项功能来编辑表格中的所有项目。

这是我的控制器的编辑操作：

```
public function editAll()
    {
        $this->set('isEditAllValid', false);
        $this->set('editAllValidationErrors', false);

        if ($this->request->is('post'))
        {
            $this->LocalClock->table = 'local_clocks';
            $this->LocalClock->getDataSource()->tableFields['local_clocks'] = array( "id", "name", "auto_offset", "utc_offset_sec", "in_month", "in_week", "in_day", "in_hour", "out_month", "out_week", "out_day", "out_hour", "offset_sec");
            $this->set('localClocksEntries', $this->LocalClock->find('all'));
            if ($this->LocalClock->save($this->request->data))
            {
                foreach($localClocksEntries as $LocalClock)
                {
                    $this->set('LocalClock', $this->request->data);
                    $this->LocalClock->save($LocalClock);
                    $this->set('isEditAllValid', true);
                    $this->set('editAllValidationErrors', false);
                }
            }
            else
            {
                $this->set('isEditAllValid', false);
                $this->set('editAllValidationErrors', true);
            }
        }
    } 
```

我在代码中所做的是，将一些布尔变量设置为 false（验证内容），然后如果操作是帖子，则获取本地时钟表并将其插入到变量中进行存储。然后遍历该变量并保存发布到表中每个项目的数据。

我不知道为什么，但在尝试编辑所有内容时出现 2 个错误。

> 注意 (8)：未定义变量：localClocksEntries [APP/Controller/LocalClocksController.php，第 158 行]
> 警告 (2)：为 foreach() [APP/Controller/LocalClocksController.php，第 158 行] 提供的参数无效

基本上我只想遍历表中的每一行并将内容更改为用户在表单中输入的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:03:56.077

```
$this->set('localClocksEntries', $this->LocalClock->find('all')); 
```

*这为视图*设置了一个变量。它不会在当前范围内创建该变量。所以该变量`$localClocksEntries`不存在于`foreach ($localClocksEntries ...`. 如果要在当前范围内使用变量*并将*其传递给视图，请执行以下操作：

```
$localClocksEntries = $this->LocalClock->find('all');
$this->set('localClocksEntries', $localClocksEntries); 
```

# iphone - 尝试在模拟器中使用定位服务时出错

> ID：11191829
> 
> 赞同：0
> 
> 时间：2012-06-25T15:00:20.710
> 
> 标签：iphone, cllocationmanager

我正在使用 iphone 中的定位服务，但我在模拟器中根本无法获得任何位置，而我现在得到的是

```
error is Error Domain=kCLErrorDomain Code=0 "The operation couldn’t be completed. (kCLErrorDomain error 0.)"
error code is 0 
```

并且 long 和 lat 也都是 0。

我想知道为什么我不能得到任何特定的位置......我不太确定这是否是一个问题，因为我在全混凝土的建筑物里......

如果您以前经历过，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:16:52.867

你能发布你的代码吗？

默认情况下，Apple 位置设置在库比蒂诺。也许您还应该尝试导入可以从（构建阶段选项卡，链接二进制文件部分）完成的 MapKit 框架。

您还可以尝试使用此代码设置一个区域来解决您的经度/纬度问题（也就是没有零）

```
 MKCoordinateRegion region = {{0.0,0.0},{0.0,0.0}};
    region.center.latitude= //enter latitude number;
    region.center.longitude= //enter longitude number;
    region.span.longitudeDelta= 0.01f;
    region.span.latitudeDelta= 0.01f;
    [mapView setRegion:region animated:YES]; 
```

# python - 在 Windows 上使用 Python 进行异步 Web 编程

> ID：11191832
> 
> 赞同：0
> 
> 时间：2012-06-25T15:00:43.097
> 
> 标签：python, asynchronous

我想在 python 中做一些异步网络编程。我想使用[http://www.tornadoweb.org](http://www.tornadoweb.org)，但我的代码必须在 Windows 上运行。我的下一个尝试是[TwistedWeb](http://twistedmatrix.com/trac/wiki/TwistedWeb)，但是基于资源的编程模型不能很好地满足我的需要。我更喜欢类似 Flask 的工具包。我试图挖掘各种其他选项，但大多数异步 python 库似乎仅限于 Unix 平台。

有人知道像 Flask 一样工作（即使用路由）但异步工作的 Python Web 框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:50:33.207

看看 gevent，flask 甚至已经集成了它。

# android - Android中的软键盘是怎么画出来的？

> ID：11191834
> 
> 赞同：2
> 
> 时间：2012-06-25T15:00:49.787
> 
> 标签：android, android-layout, z-order

据我了解，软键盘实际上是一个对话窗口，位于所有其他应用程序窗口的基础上。当应用程序请求键盘时，应用程序的 ViewRoot（和窗口）将调整到屏幕顶部，从而使键盘可见。

到现在为止还挺好...

我不明白的是键预览（显示放大的按下键的蓝色视图 - 它实际上是一个 TextView）如何显示在应用程序窗口的***顶部***。毕竟，键盘的窗口位于应用程序窗口的下方，所以我假设在该窗口上创建的任何视图都只会存在于应用程序窗口的后面。这个预览 TextView 是否有任何特殊特征？视图的 z 顺序是根据它们的创建顺序决定的吗？（所以即使两个视图被绘制到同一个表面，它们的 z 顺序也不同？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:06:03.510

事实证明，键盘的布局实际上在顶部。尽管它的窗口可能在应用程序启动之前就已创建，但它是一个对话框窗口，这意味着它被添加到窗口层次结构的顶部。这里唯一的问题是键盘的窗口是整个屏幕的大小（键盘绘制在底部，黑色背景在其上方）。由于它的窗口是顶部窗口，因此人们会期望键盘的黑色背景出现***在激活它的应用程序的顶部......***

解决方法：键盘的窗口有一个半透明的属性！事实证明，由于这个事实，没有绘制黑色背景，这意味着可以看到应用程序显示的任何内容。我花了很长时间才弄清楚那个...

# android - 通过代码接收意图 ACTION_USB_DEVICE_ATTACHED

> ID：11191835
> 
> 赞同：6
> 
> 时间：2012-06-25T15:00:51.340
> 
> 标签：android, android-intent, usb

我使用usb api遇到了障碍。我正在尝试使用广播接收器来接收意图 ACTION_USB_DEVICE_ATTACHED 但它不会。

澄清一下，我通过清单做得很好，但是创建了一个新活动（并添加到后台堆栈）。我发现这是不可取的，特别是考虑到我的应用程序（终端）的性质。

我的猜测是设备过滤器 xml 元数据需要添加到意图过滤器，但我不知道如何。

欢迎任何反馈！

编辑 - 一些代码。这是清单中多汁的部分。请注意，意图过滤器已被注释掉，以便动态注册的 BroadcastReceiver 获取意图（我假设您必须这样做）。

```
//<intent-filter>
//    <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
//    <category android:name="android.intent.category.DEFAULT" />
//</intent-filter>

<meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" 
android:resource="@xml/device_filter"/> 
```

这是连接我的接收器的代码

```
//register for attachment
IntentFilter attachedFilter = new IntentFilter(UsbManager.ACTION_USB_DEVICE_ATTACHED);
registerReceiver(mUsbAttachedReceiver, attachedFilter); 
```

这是广播接收器声明

```
private final BroadcastReceiver mUsbAttachedReceiver = new BroadcastReceiver()
{
@Override
public void onReceive(Context context, Intent intent)
    {
        //BREAKPOINT HERE IS NEVER HIT
        String action = intent.getAction();
        showDebugToast(action);

        if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
            synchronized(this)
            {
                UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
                if (device != null){
                    getDevicePermission(device);
                }
            }
        }
    }
}; 
```

我避免在清单中声明接收器，因为我不完全确定在那里使用的做法（接收器与任何活动分开存在）。我是否认为只要应用程序正在运行接收器就会运行，或者即使在清单中声明它也只是前台？任何有关这方面的文献都值得赞赏。

从那以后，我通过给活动一个“singleTop”启动模式并实现onNewIntent（）来绕过这个问题。这给了我我想要的行为，同时还允许在没有运行活动的情况下启动（使用清单）。这是我的最终目标。但是，我真的很想了解这种行为并对解决方案保持高度兴趣！

进一步编辑：我的调试设备是三星 Galaxy S3。我没有改变ROM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:22:35.660

是的，您需要使用 Activity 添加元数据：

```
<meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
               android:resource="@xml/accessory_filter" /> 
```

附件过滤器：

```
<resources>
    <usb-accessory manufacturer="Acme, Inc" model="Whiz Banger" version="7.0" />
</resources> 
```

请参阅此 Android 开发者博客 [一个好主意：Android 开放式附件](http://android-developers.blogspot.in/2011/05/bright-idea-android-open-accessories.html)

# java - 如何将 Java Servlet 转换为 WAR 文件以部署到 Amazon EC？

> ID：11191841
> 
> 赞同：1
> 
> 时间：2012-06-25T15:01:22.087
> 
> 标签：java, maven, netbeans, war

我已经开发`Java Servlet`并且`Netbeans IDE`现在希望将它们部署在`Amazon EC2`. 为了将 Java Servlet 部署到 Amazon EC2，我需要将它们转换为`.WAR`文件。现在 Netbeans 7.0 自动将 Java Servlet 转换为文件夹中的 .WAR 文件`Files/dist`。

**我的问题**是我应该使用 Netbeans 的 WAR 文件还是应该使用`Maven`来构建 WAR 文件。（我不知道如何使用 Maven）。此外，我不需要 Netbeans 自动生成的大量文件。例如文件夹中的文件，`Web Pages`那么哪种方法将是最佳和最佳实践。

看了faq，感觉这个问题属于*程序员常用的软件工具的范畴。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:35:13.437

您的项目最初是由 maven 生成的吗？如果是，则使用 maven，否则无需这样做。如果您使用 Tomcat 作为 servlet 容器，您可以编写 ant 脚本，将 war 文件部署到您的远程主机。在所有其他情况下，您可以直接将 war 文件复制并粘贴到服务器。

# actionscript-2 - FlashVars 和 AS2 加载动态命名的文本文件

> ID：11191848
> 
> 赞同：1
> 
> 时间：2012-06-25T15:01:35.893
> 
> 标签：actionscript-2, flashvars

我正在尝试将动态生成的文本文件加载到 as2 脚本中。该文件每次都有一个唯一的名称。我有一个可以正常工作的 as2 脚本，它可以在特别命名时很好地加载文件，但当我尝试通过 flashvar 加载它时不会。

html中指定它的行在这里。当我尝试将完整的参数字符串放在这里时，它吓坏了，所以我截断了这条线。

```
FlashVars value="myVariable=mytextfile.txt&mySecondVariable=2" 
```

这里的 AS2 负载变量。我需要从 myVariable 中提取 mydata.txt

```
my_data.load("mydata.txt"); 
```

当我们这样做时，这是将这个 flashvar 加载到 scroll_speed 中的正确方法吗？多变的。

```
var scroll_speed:Number = mySecondVariable; 
```

# c - 交替递增序列

> ID：11191850
> 
> 赞同：3
> 
> 时间：2012-06-25T15:01:45.710
> 
> 标签：c, recursion, sequence

早晨-

我需要一个能够产生以下外观序列的函数：

```
1, -1, 2, -2, 3... 
```

尾递归函数会是处理这个问题的最佳方法吗？有没有办法迭代而不是递归地做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T15:04:46.347

这个序列有一个简单的非递归形式：

```
A[n] = (n + 1) / 2 - (n % 2 ? 0 : n) 
```

取决于索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T16:49:43.557

```
return (n>>1) * -(n&1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:08:31.613

一种可能的方法是使用[`abs()`](http://www.cplusplus.com/reference/clibrary/cstdlib/abs/)函数：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i = 0;
    while (i-- > -10) printf(" %d %d", i, abs(i));
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T15:14:11.107

如果我正确理解了这个问题，那么像下面这样的简单功能会有所帮助。如果你想对它做更多的事情，你需要编写更多的代码。

```
void calc_sequence(int *arr, int size)
{
   int i=0;
   int j=0;

    for(i=1; i<=(size/2); i++)
    {
      arr[j] = i;
      arr[j+1] = -i;
      j = j+2;
    }
 }

 /* The below code should come in the calling function. n is the maximum positive number you plan to see in the sequence */

   int *arr = malloc((n*2) * sizeof(int));
   calc_sequence(arr, (n*2)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T15:25:40.353

您可以使用迭代方式构建您的序列。

```
int *
f(size_t size)
{
    int *p = malloc(size * sizeof *p); // Checks for overflows

    for (size_t i = 0; i < size; ++i) {
        p[i] = (i + 1) / 2;
        if (i & 1) p[i] -= i;
    }

    return p;
} 
```

# javascript - 在 Ember.js (Ember.Router) 中限制对特定路由的访问

> ID：11191857
> 
> 赞同：3
> 
> 时间：2012-06-25T15:02:08.797
> 
> 标签：javascript, ember.js, router

我目前正在测试`Ember.Router`，我想知道如何在匹配特定条件时限制对某些特定路由的访问。在我的示例中，我正在使用结帐流程，其中必须先设置帐单地址，然后用户才能继续使用帐单方式等（例如：帐单方式视图需要知道帐单国家/地区以提供其允许的付款方式）。

在我的尝试中，我试图验证模型（序列化：函数（）或输入：函数（）？），当未设置给定值时，路由器应重定向到以前的状态（必须这样做一点超时，否则哈希将无法正确更新）。

这是我的示例代码

[http://jsfiddle.net/mediastuttgart/uMKGt/](http://jsfiddle.net/mediastuttgart/uMKGt/)

**编辑：**

找到汤姆戴尔的一些话，虽然与这个问题无关，但仍然是一个很好的答案：“状态的全部意义在于避免这种情况......处理它们是当前状态的责任。”。

参看。[http://github.com/emberjs/ember.js/issues/745](http://github.com/emberjs/ember.js/issues/745)

嗯，这是有道理的。

**编辑2：**

尽管在 location 方法设置为“null”时这是有道理的。当使用 'hash' 或 'history' 来处理位置状态并且用户在比 /index 更深的路由上重新加载页面时 - 当前路由必须验证值，然后如果某个条件不匹配，则最终重定向到前一个（而确实验证属于前一条路线）。

长话短说，当前的路由验证应该依赖于前一个，并且应该重定向到满足所有条件的状态。

相反的顺序：

*   运输方式？(/#/delivery/method) 不->
*   计费方式？(/#/billing/method) 不->
*   邮寄地址？(/#/delivery/address) 不->
*   帐单地址 - (/#/billing/address) 请从这里开始。

期待看到一些 EmberJS 的人来解决问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:34:46.723

我一直在做同样的事情。我认为你在正确的轨道上，汤姆关于整个州的引述确实触及了它的核心。路由器变化很快，所以不确定这里是否有既定的模式，但我可以分享我迄今为止学到的东西。

总结一般问题：Ember 路由器使用 url 来序列化/反序列化应用程序状态。除了知道请求的路由之外，它是无状态的。最终用户可以完全控制这个状态，并且可以通过输入一个 url 在任何状态下重新加载应用程序。因此，在给定用户权限和模型当前状态的情况下，所有应用程序都会遇到一个常见问题，即何时/如何验证请求的状态是否“有效”。

来自 Rails，我的第一直觉是像在之前的过滤器中一样保护路由。这在 Ember 中很棘手 - 由于数据加载是异步的，因此在初始下降到路由层次结构期间它不可用。我自己还没有得到这种方法，但其他人有。典型的方法似乎是

*   使用 sproutcore 状态图，它允许并发状态 (SinisterMinister)
*   中途暂停状态转换，等待数据加载（lukemelia 建议）
*   在早期版本的 Ember 路由器中，您可以将标记转换用作异步，但已被删除

鉴于汤姆对州的看法，我会尽可能避免这种情况。与其尝试“保护”路由，不如使用路由+状态的组合来确保用户一开始就无法达到无效状态。在您的示例中，您将更改为：

*   '/billing' 处的单个“可路由”状态
*   2 个名为 'method' 和 'address' 的“子状态”（这些应该扩展 Ember.State 而不是 Ember.Router 并且不设置路由）
*   '/billing' 路由的初始状态将是 'address'
*   当 BillingAddressModel 更改（通过用户操作或异步数据加载）时 router.send('billingAddressUpdated')
*   billingAddressUpdated 事件在“方法”和“地址”子状态之间适当转换

顺便说一句，对于这种方法，您需要使用 HEAD ember，因为没有路由的子状态在最近提交之前被破坏。

非常想知道其他人如何解决这个问题。希望这可以帮助。

# powershell - 在本地执行 powershell 脚本以在远程计算机上运行

> ID：11191859
> 
> 赞同：2
> 
> 时间：2012-06-25T15:02:09.777
> 
> 标签：powershell, batch-file

我有当前的 powershell 脚本

```
$release = read-host "enter release"
$fullPath = "10.0.0.3"
$fullPath = $fullPath + $release
$fullPath = $fullPath + ".bat"
start-process $fullPath 
```

目前，我登录到远程机器以运行此示例 10.0.0.2 的代码。然后代码从另一台远程机器 (10.0.0.3) 中提取文件。我想做的是从我的本地机器（10.0.0.1）执行这个脚本并让它在 .2 上运行。我可以完全访问该框，这样应该会更容易。我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T20:42:41.657

将脚本放入一个脚本文件中，比如 ReleaseProcessing.ps1 并像这样执行它：

```
Invoke-Command -ComputerName 10.0.0.2 -FilePath .\ReleaseProcessing.ps1 
```

系统将提示您在本地计算机上“输入发布”，但脚本将传输到远程计算机并在远程计算机上运行。这要求您运行 PowerShell 2.0 或更高版本，并且您已通过在该计算机上运行 Enable-PSRemoting 在 10.0.0.2 上启用远程处理。此外，由于涉及另一台机器，您可能会遇到第二跳凭证问题。如果是这种情况，请考虑使用`-Authentication`值为 的参数`CredSSP`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T18:18:19.810

我在一个项目中使用过一次。我需要在 APP 服务器上创建网站并且必须从 INT 服务器运行。因此，我将站点设置脚本保存在 App 服务器上，并从 INT 服务器远程运行。

```
 $script = 
 {
 $Filetoexe = $args[0]
 invoke-expression "$Filetoexe"
 }
 Invoke-Command -ComputerName <Computername> -credential <credentials> -ScriptBlock $script -Args "D:\sitesetup.ps1" 
```

保存并运行它。最后一行“Invoke-Command”将被执行，它将访问您提供的远程计算机并执行脚本块。

脚本块接受最后一行中传递的参数并执行脚本块中的文件。

您需要在远程系统上运行的任何功能都必须在脚本块中完成。

希望对您有所帮助....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T20:07:14.933

如果您将远程服务器设置为通过 powershell 进行远程访问，这将很有效

```
$scriptPath = Split-Path -Parent -Path $MyInvocation.MyCommand.Definition
$StrServers = Get-Content -Path "$scriptPath\Environment\$strEnvironment.txt"

$content = [IO.File]::ReadAllText("$scriptPath\environment\test.txt")
foreach ($strServer in $content)
{
Invoke-Command -ComputerName $strServer -FilePath $scriptPath\testScript.ps1 -ArgumentList $StrLog
} 
```

# php - 如何使用 PHP 检测分页符

> ID：11191860
> 
> 赞同：1
> 
> 时间：2012-06-25T15:02:14.873
> 
> 标签：php, page-break

有没有办法用php检测分页符？我使用 PHP 生成报告，并为不同的段落使用分页符。我需要在每一页中保留一个标题。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:22:59.840

**HTML（仅使用 CSS）：**

`<hr style="page-break-after:always; visibility: hidden">`

**PDF：**

使用上面的 HTML 并用于`wkhtmltopdf`转换为 PDF。其他转换器可能工作，但这个是最好的。

**文本/控制台（CLI）：**

`chr(0xC)`，又名`"\f"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:05:00.650

通常你可以在 Wiki 中看到 \f grep：[http ://en.wikipedia.org/wiki/Page_break](http://en.wikipedia.org/wiki/Page_break)

如果你像这样在 \f 上爆炸：

```
explode('\f', $string); 
```

它应该形成一个页面数组。

请注意，这并不总是有效，有时您认为有分页符，但实际上您的查看软件正在为您分页。

# python - Django-Imagekit 不创建缩略图

> ID：11191863
> 
> 赞同：1
> 
> 时间：2012-06-25T15:02:20.867
> 
> 标签：python, django

我希望 imagekit 在上传时将用户图片作为缩略图返回，并且仍然保留原始图片。但是缩略图应该是它会返回的那个。我已经阅读了 imagekit 文档，但没有成功。它不返回缩略图。它只会返回用户上传的图片的实际大小。我一直在寻找有关如何完成这项工作的教程，但我找不到深入研究该主题的教程。如何让 imagekit 以缩略图的形式返回上传的图片？我正在使用 imagekit v2.0。

楷模

```
 class Meek(models.Model):
          user=models.ForeignKey(User)
          title=models.CharField(max_length=250, unique=True)
          address=models.CharField(max_length=200)
          city=models.CharField(max_length=200)
          state=models.CharField(max_length=200)
          main_view=models.ImageField(upload_to="photos",blank=True, null=True)
          side_view=models.ImageField(upload_to="photos",blank=True, null=True)
          pub_date=models.DateTimeField()
          thumbnail=ImageSpecField([Adjust(contrast=1.2, sharpness=1.1),ResizeToFill(50, 50)], image_field='main_view', format='JPEG',options={'quality': 90})
          thumbnail=ImageSpecField([Adjust(contrast=1.2, sharpness=1.1),ResizeToFill(50, 50)], image_field='side_view', format='JPEG',options={'quality': 90})
          def __unicode__(self):
              return self.title 
```

意见

```
 def findme(request):
                extra_data_context={}
                if request.method=="POST":
                    form=MeekForm(request.POST, request.FILES)
                    if form.is_valid():
                       data=form.cleaned_data
                       newmeeks=Meek(
                          user=request.user,
                          pub_date=datetime.datetime.now(),
                          title=data['title'],
                          main_view=request.FILES['main_view'],
                          side_view=request.FILES['side_view'],
                          address=data['address'],
                          city=data['city'],
                          state=data['state'])
                      newmeeks.save()
                   extra_data_context.update({'MeekForm':form})
              else:
                 form = MeekForm()
                 extra_data_context.update({'MeekForm':form})
              extra_data_context.update({'Meeks':Meek.objects.filter(user=request.user)})
              return render_to_response('postme.html',extra_data_context,context_instance=RequestContext(request)) 
```

模板

```
 {% for Meek in Meeks.object_list %}
               {# posted only this because, I'm only having problem with images. #}
           <p><img src="{{MEDIA_URL}}/{{Meek.main_view}}"/> <img src="{{MEDIA_URL}}/{{Meek.side_view}}"/> </p>

         {% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:33:02.897

这对我有用：

模型：

```
class Model(models.Model):
    image_1 = ProcessedImageField([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(500, 370)], upload_to=generate_image_filename_1, format='JPEG', options={'quality': 90})
    thumbnail_1 = ImageSpec([Adjust(contrast=1.2, sharpness=1.1), ResizeToFill(83, 78)], image_field='image_1', cache_to=generate_cache_filename, format='JPEG', options={'quality': 90}) 
```

看法：

```
def thumbnail(request, pk):
    thumb_pk = pk
    instance = Model.objects.get(pk=thumb_pk)
    return render_to_response('thumbnail.html',{'instance': instance},context_instance = RequestContext(request)) 
```

模板“thumbnail.html”：

```
# show the tumbnail

<img alt="thumbnail" src="{{ instance.thumbnail_1.url }}" width="83" height="78"> 
```

# c# - 如果之前未显示，请填写“未响应”

> ID：11191864
> 
> 赞同：3
> 
> 时间：2012-06-25T15:02:30.450
> 
> 标签：c#, winforms

我有一个应用程序可以监视目录的更改。创建文件（日志文件）时，它会分析其内容，将结果写入表单（该表单已存在并已初始化，尽管当前可能隐藏），最后将该表单显示给用户。

当应用程序启动时，任务栏中只显示一个图标。main 方法只是在任务栏中创建图标，并用结果初始化监视/分析和控制表单的类。

```
public static void Main(string[] args) {
    NotificationIcon notificationIcon = new NotificationIcon();
    notificationIcon.notifyIcon.Visible = true;
    if (notificationIcon.Init()) {
        MainForm = ResultForm.GetInstance();
        Application.Run();
    }
} 
```

“ResultForm”就是我刚才提到的那个类，有以下与问题相关的方法：

```
public static ResultForm GetInstance() {
    // _this is an attribute from the class. Is used to work always
    // with just one instance of the classe
    if (_this==null)
        _this= new ResultForm();

    return _this;
}

private ResultForm() {
    // initialization of the GUI form
    InitializeComponent();

    [...]

    // watcher for the log files
    logsWatcher= new FileSystemWatcher(LOGFILES_FOLDER);
    logsWatcher.Created += new FileSystemEventHandler(NewFile);
    logsWatcher.EnableRaisingEvents=true;
    logsWatcher.SynchronizingObject = this;
}

private void NewFile (object source, FileSystemEventArgs e) {
    // make sure the file is of the correct type
    [...]
    // perform some analysis on the file
    [...]
    // update the contents in the form (some TreeViews and labels)
    [...]

    // show the form to the user
    _this.Show();
} 
```

现在问题来了。如果应用程序启动，分析了一个文件并且尚未显示主窗体，则在分析完成时将显示为“未响应”，尽管一切都已完成。如果之后创建了一个新文件，它将被成功分析，尽管表单将保持这种“无响应”状态。

但是，如果自应用程序启动后表单至少打开过一次（例如，您双击图标，显示表单并关闭它（或保持打开状态，没关系）），一切都会工作顺利。

作为一种变通方法，我可以使用以下两行（在`Run()`方法之前）修改 main ，因此在任何文件到来之前表单将至少显示一次：

```
MainForm.Show();
MainForm.Hide(); 
```

（我将其隐藏起来，因为在执行分析或用户明确单击图标之前它不可见。）除此之外，程序没有区别：所做的工作是相同的，形式是一切完成后始终显示。我已使用调试器确保在执行期间到达方法的末尾。

如果没有提到的解决方法，我该如何解决这个问题？

我尝试创建一个用于分析的线程，使用`Application.DoEvents()`类似于[此](https://stackoverflow.com/questions/1360944/force-gui-update-from-ui-thread)的代码块。在最好的情况下，表单会正确显示其所有内容，但仍处于“未响应”状态。我还尝试让`Show()`方法中的调用得到完全相同的结果，这告诉我这不是负载过重的问题，而是我可能做错了什么。

**编辑** 由于@thecoon 要求，我上传了一个重现问题的小项目。它已经用 SharpDevelop 完成，以防你也使用它。--> [http://dl.dropbox.com/u/1153417/test.zip](http://dl.dropbox.com/u/1153417/test.zip)

Main() 方法中有一个小解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:27:47.930

我强烈怀疑这是一个线程问题，由您如何启动 ResultForm 以及如何设置 FileSystemObjects[同步对象](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.synchronizingobject.aspx)引起。

同步对象有效地选择线程来编组更新。在这种情况下，它也是您尝试在其上显示 GUI 的线程，因此您可能遇到了一个很好的旧阻塞操作，或者可能只是有大量文件系统事件导致您的线程来回切换上下文迅速。

作为初学者，试试这个：

```
public static void Main(string[] args) {
    NotificationIcon notificationIcon = new NotificationIcon();
    notificationIcon.notifyIcon.Visible = true;
    if (notificationIcon.Init()) {
        MainForm = new ResultForm();
        Application.Run(MainForm);
    }
} 
```

请注意，我们现在将 ResultForm 直接编组到 UI 线程。

并以这种方式更改 ResultForm （也没有真正需要它是单例）：

```
public ResultForm() {
    // initialization of the GUI form
    InitializeComponent();

    [...]
    this.Load += ResultForm_Load;
}

protected void ResultForm_Load(object sender, EventArgs e)
{
    // watcher for the log files
    logsWatcher= new FileSystemWatcher(LOGFILES_FOLDER);
    logsWatcher.Created += new FileSystemEventHandler(NewFile);
    logsWatcher.EnableRaisingEvents=true;
    //Don't set the synchronization object - now all events from the FileSystemWatcher will be marshalled on a background thread
    Visible = false; //Hide the form if you want or minimize to tray or similar.
}

private void NewFile (object source, FileSystemEventArgs e) {

    if(InvokeRequired){
        //Ensures the file system events are marshalled back to the GUI thread
        Invoke(new MethodInvoker(() => {NewFile(source, e);}));
        return;
    }

    // make sure the file is of the correct type
    [...]
    // perform some analysis on the file
    [...]
    // update the contents in the form (some TreeViews and labels)
    [...]

    // show the form to the user
    Show(); //or Visible = true;
} 
```

通过不将 FileSystemWatcher 上的同步对象设置为表单，您可以确保所有文件系统事件编组将在 ThreadPool 线程中发生。当一个 New 事件被引发时，我们只记得通过检查 InvokeRequired 并在必要时调用表单的 Invoke 方法来编组回 UI 线程。

更新

主要原因是，通过直接调用 MainForm.Show 或通过 Application.Run(MainForm)，您将表单推送到消息循环所在的线程上。

如果您使用原始代码运行应用程序，`NewFile`则调用时`Application.MessageLoop`为 false。

如果您使用您的解决方法，或者按照我的示例显示应用程序的标准方式`Application.MessageLoop`是正确的。

我在这里最好的猜测是表单是死锁的，因为 FileSystemWatcher （因为它在原始示例中使用表单作为同步对象，这实际上意味着它调用`BeginInvoke`表单）。但是，它也可能是各种各样的其他问题；Form.Show() 实际上是挂在方法上的`FPushMessageLoop`——它陷入了无限循环。

@HansPassant 或 @HenkHolterman 都围绕这些问题进行了广泛的发布 -例如，请参阅[https://stackoverflow.com/a/3833002/1073107 。](https://stackoverflow.com/a/3833002/1073107)请注意，如果您在启动时显示启动画面或类似内容，则所有初始化都按预期工作，并且 NewFile 成功完成；简而言之，如果您希望您的流程正常工作，您似乎必须在应用程序启动时显示一些内容*。*我不认为这是一件坏事。例如，用户可以看到应用程序已经启动并正在托盘中运行，您可以确定不会遇到此问题。

# web-parts - Kentico：使用用户贡献 webpart 重新创建 CMSDesk 行为

> ID：11191865
> 
> 赞同：1
> 
> 时间：2012-06-25T15:02:46.073
> 
> 标签：web-parts, kentico

当我使用 Kentico CMSDesk 上传文件（文档类型 CMS.File）时，它会根据上传的文件的名称自动命名文档，无需单独的 FileName 输入。

这可以通过用户贡献 web 部件复制吗？也就是说，是否可以使用此 Web 部件中上传的文件的名称自动生成 FileName（和或 DocumentName）？

非常感谢，奥利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:01:35.867

对于任何文档类型，您都可以设置文档名称的源字段。如果您将在站点管理器 -> 开发 -> 文档类型中检查 CMS.File 文档类型并切换到字段选项卡，您将看到文档名称源字段设置为文件上传字段。您可以对用户贡献中使用的文档类型执行相同的操作。

# android - Android 通过蓝牙拦截文件传输

> ID：11191870
> 
> 赞同：1
> 
> 时间：2012-06-25T15:03:14.250
> 
> 标签：android, sockets, bluetooth, broadcastreceiver, file-transfer

我们可以在安卓上拦截通过蓝牙传输的文件吗？或者我们可以监听文件传输状态，即交付、失败、开始、取消……等等，是否有广播意图操作？我不想从我的应用程序传输文件，我想要的是监听来自 android 内置蓝牙应用程序的传输事件。

# cucumber - 使用 Frank/Cucumber 进行 XCode 自动化测试

> ID：11191871
> 
> 赞同：0
> 
> 时间：2012-06-25T15:03:14.717
> 
> 标签：cucumber, xcode4.3, frank, cucumber-junit

我正在尝试探索可能对我的 XCode 应用程序进行自动化测试的不同方法，并且遇到了 Frank/Cucumber，但我真的很困惑它是如何工作的。Cucumber 在实际开始测试时采取了哪些步骤？你有你的功能文件（* .feature 文件），它似乎有利于某种英文写作风格，然后你有你的定义，这些脚本是我假设与每个功能相关联的脚本？我以前从未做过 ruby​​ 编程，所以这可能是我最困惑的根源。

谁能解释一下它是如何工作的？它在一周冲刺后可能会发生变化的敏捷环境中有用吗？我的想法是，如果您拥有所有这些功能和所有这些脚本，那么很快维护起来可能会令人头疼，但这只是我长期考虑的问题。

任何帮助和想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:51:41.863

Frank/Cucumber 是一个非常有用的测试 x 代码的工具，在敏捷环境中非常有用。

您所需要做的就是安装 gem 并拥有应用程序的 frankified 版本。

然后继续设置 symbiote - 它用于检查应用程序的 UI。

然后针对您的 x 代码目录创建一个功能文件，它用简单的英文编写，并说明了测试元素的步骤。

然后创建一个步骤定义文件并为特征文件中定义的步骤编写 ruby​​ 代码。

继续从终端运行它，看看你的测试是否通过。

# javascript - 来自 Alfresco webscript 的 AJAX 请求

> ID：11191877
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:03:24.897
> 
> 标签：javascript, ajax, alfresco

我有个问题。我不知道如何从 Alfresco javascript webscript 执行 AJAX 请求（不是来自 Share !!!）。当我使用标准方式通过 XMLHttpRequest 创建请求时，出现错误 - “未定义 XMLHttpRequest”。从共享中我确实通过 YUI 请求，但在 Alfresco 中我没有找到用于此的标准工具。如果有人知道该怎么做，请回答。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:50:59.543

您没有为此找到“标准工具”，因为它不是“标准”。在 alfresco javascript API 中没有定义名为“XMLHttpRequest”的根对象。:)

您不能使用基于 JavaScript 的 webscript 轻松做到这一点，但您可以轻松地使用基于 Java 的 webscript 做到这一点。只需包含您最喜欢的 REST 库并提出请求。如果您真的想在基于 JavaScript 的 Web 脚本中使用它，您还可以使用 Java 制作 JavaScript 扩展，并在基于 JavaScript 的 Web 脚本中使用它来执行 REST 调用。

希望能把它弄清楚一点...... :)

# .htaccess - .htaccess 将所有带有路径的 URL 重定向到一个地方，但将没有路径的 URL 重定向到另一个地方

> ID：11191878
> 
> 赞同：0
> 
> 时间：2012-06-25T15:03:30.087
> 
> 标签：.htaccess, redirect

希望有人可以帮助我。我正在尝试执行以下操作：

如果用户导航到 blog.example.com（没有路径），我希望用户重定向到 www.example.com/blog。

但是，如果用户导航到 blog.example.com/blog-post-name，我想将用户重定向到 www.example.com/blog-post-name。

我在 .htaccess 中尝试了各种规则，但没有任何运气。有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:15:58.863

这应该这样做：

```
RewriteCond %{HTTP_HOST} ^blog.example.com$
RewriteRule ^$     http://www.example.com/blog [L,QSA,R=301]
RewriteRule ^(.+)$ http://www.example.com/$1   [L,QSA,R=301] 
```

# xcode - 让一个视图控制另一个视图中的 UIImage

> ID：11191879
> 
> 赞同：0
> 
> 时间：2012-06-25T15:03:31.757
> 
> 标签：xcode, user-interface, uiimageview, uiswitch

我有个问题。在我的应用程序中，我有一个设置屏幕，在设置屏幕中有一个 UISwitch。当您启用此开关时，应用程序主屏幕的背景会发生变化。但是我怎样才能让 UISwitch 控制到另一个 .nib 呢？所以我有一个 homescreen.nib 和一个 settings.nib，当我启用 UISwitch 时，我想更改 homescreen.nib UIImageView 的背景。

感谢高级

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:30:33.503

不要试图让您的设置页面控制另一个页面。您的设置页面应该允许用户选择设置并保存它们。任何想要使用设置的页面都应根据需要读取设置。

我建议使用`NSUserDefaults`

编写设置`[[NSUserDefaults standardUserDefauts] setObject:itemsToShow forKey:@"itemsToShow"];`

读书`[[NSUserDefaults standardUserDefaults] integerForKey:@"itemsToShow"];`

# spine.js - Spine.js 和两个控制器

> ID：11191881
> 
> 赞同：0
> 
> 时间：2012-06-25T15:03:44.327
> 
> 标签：spine.js

立即声明：不将此问题视为实际应用。一切都是为了自学和学习而做的 spin.js

其次，我知道这种关系。我不想用，因为世界比简单的关系更广阔。例如，您要向现在在线的用户或所有参与撰写文章的用户显示文章的页面。

想象一个普通的应用程序，它显示您可以创建、显示、编辑和删除的帖子列表。所有在spine.js 上，一切正常。基于spine.rails3 应用程序。然后我添加了带有字段 post_id 和 body 的 Comment 模型。并在 veiw Show 上添加按钮 Comments。我想要的只是通过按“评论”按钮来加载这篇文章的评论。我的comment.js.coffee：

```
 class App.Comment extends Spine.Model
      @configure 'Comment', 'post_id', 'body', 'created_at', 'updated_at'
      @extend Spine.Model.Ajax

      @fetch_comments: (id) =>
        params =
          data: {post_id: id}
          url: '/comments/fetch'
          processData: true

        @ajax().fetch(params)
        true 
```

在 Rails 控制器中：

```
def fetch
  @comments = Comment.where("post_id = ?", params[:post_id])
  respond_with @comments
end 
```

在 chrome 控制台中，一切正常：

```
App.Comment.fetch_comments(11)
App.Comment.all() 
```

并从服务器接收所有 post_id = 11 的评论。

我的问题是我不知道如何从控制器帖子中做同样的事情:-(在我的posts.js.coffee中：

```
class Show extends Spine.Controller
events:
  ......
  'click [data-type=show]': 'comments'
comments: ->
  @log(@item.id)
  new App.Comments(@item.id) 
```

Аnd 这里的问题....如何实现控制器 App.Comments，所以它是从服务器加载需要评论？现在我的控制器看起来像：

```
Comment = App.Comment

class Index extends Spine.Controller

  constructor: (id)->
    super
    **App.Comment.fetch_comments(id)**   

class App.Comments extends Spine.Stack
  className: 'comments stack'

  controllers:
    index: Index

  routes:
    # '/comments/new':      'new'
    '/comments/':          'index'

  className: 'stack comments' 
```

并且在选定的行上不起作用。我不知道该怎么办...

主要问题是如何从具有特定参数的另一个控制器中调用一个控制器，并将结果显示在主控制器中？

也许这是菜鸟问题，但我希望对您有所帮助。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:47:21.000

我看到你正在使用脊椎堆栈。堆栈在由堆栈管理的控制器中传递。所以在里面`Index`你可以使用`@stack`.

# yql - 如何通过pubDate查询YQL rss表

> ID：11191884
> 
> 赞同：1
> 
> 时间：2012-06-25T15:03:48.603
> 
> 标签：yql, pubdate

我想获得最近 3 天的雅虎财经新闻，类似的

```
select * from rss where url='http://finance.yahoo.com.news/rss' and pubDate >= '2012-06-23' 
```

但是这部分“pubDate >= '2012-06-23'”被忽略了。不管有没有这个子句，我总是得到相同的结果。使它工作的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:23:35.463

正确的查询是

```
select * from rss where url='http://finance.yahoo.com/news/rss' and item.pubDate>='2012-06-26' 
```

注意 item.pubDate。项的原因。是因为在 xml 结构中，pubDate 是 item 的子项。

不幸的是，这不适用于您的用例（按时间排序）。那是因为返回的 pubDate 不在 unix 时间戳中。抱歉，我不知道需要做什么才能让您获得正确的结果，但至少我可以给您正确的查询 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:18:33.523

伊琳娜，
你在字符串上使用“大于”运算符，
要按 pubDate 过滤，你必须使用类似的东西，

```
and pubDate >= date_trunc('month',current_date)
order by pubdate desc; 
```

# c# - 字典内的类中的 C# 泛型

> ID：11191889
> 
> 赞同：0
> 
> 时间：2012-06-25T15:04:06.937
> 
> 标签：c#, generics, dictionary

我有以下代码：

```
protected Dictionary<string, ObjectAttribute<T>> attributes; 
```

每次向目录添加新项目时，我都应该传递一个泛型类型，但我不想使用 object/dynamic，因为它可能会在以后导致一些转换问题。那么，有可能这样吗？

T 没有在类构造函数或其他任何地方定义，因为我每次添加项目时都需要它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:06:01.863

如果您的意思是“并且`T`每个项目都可以更改”，那么否：除非`ObjectAttribute`还具有非泛型基类或实现非泛型接口，即

```
protected Dictionary<string, IObjectAttribute> attributes; 
```

和

```
class ObjectAttribute<T> : IObjectAttribute {...} 
```

会工作。

# apache - jQuery 对 SVG 的 GET 请求给出 500 内部服务错误

> ID：11191894
> 
> 赞同：0
> 
> 时间：2012-06-25T15:04:25.880
> 
> 标签：apache, svg

我正在使用 jQuery/SVG 地图在世界地图上创建点。链接 jQuery 和我运行的 javascript 库后：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#map').mapSvg({
            source: 'maps/world_high.svg',
            width: 600,
            height: 350
        });
    });
</script> 
```

它在我运行相同 apache 版本的本地主机上完美运行。但是当我将它上传到我的网站时，它不会呈现，并且 firebug 给了我这个错误：

![错误信息](../Images/42500e841de206d7ef1a6b2cb07c6152.png)

**编辑**

当我访问地图并查看它时：

```
http://www.domain.com/maps/world_high.svg 
```

它在浏览器中加载地图，当我返回页面时，地图可以工作。不知何故，apache 阻止了 GET 请求，但我不确定如何或为什么。

# asp.net - 为其他控件引发回发后确认丢失的事件

> ID：11191895
> 
> 赞同：1
> 
> 时间：2012-06-25T15:04:42.673
> 
> 标签：asp.net, events, updatepanel, postback, confirm

我有这种情况

带有 AutoPostBack=true 的 TextBox 和用于管理文本更改的服务器端代码。

带有服务器端设置确认和要管理的代码的按钮。btnSend.Attributes.Add("onClick", "return confirm('Confirm message')"); ……

一切都在 UpdatePanel 中

当用户在 TextBox 上书写并且没有离开文本框焦点时，单击按钮，出现确认，并在 inputTextAnswer_TextChanged 后面引发并执行。然后页面已处理回发，因此如果用户在确认时单击“确定”，则不会执行任何操作。用户需要再次点击才能真正执行按钮代码。

有没有办法运行 inputTextAnswer_TextChanged 代码（应该先执行）然后是按钮代码。重要提示：并不总是应该一个接一个地执行，只是当用户填写文本框字段然后单击按钮时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:02:17.363

好的，如果有人有同样的问题，我的解决方案。而不是留下与返回按钮相关联的确认，只需通过javascript手动执行回发。然后执行文本框更改事件，当用户单击“确定”时，我们强制回发并执行按钮代码。

这段代码在服务器端

```
btnSend.Attributes.Add("onClick", "confirmSend();"); 
```

这个在 aspx 上

```
<script>
function confirmSend() {
    var agree = confirm('confirm message');
    if (agree) {
         __doPostBack('btnSend', '');
   }
  }
</script> 
```

# jquery - 从自定义函数访问 Jquery-UI 可拖动事件

> ID：11191907
> 
> 赞同：0
> 
> 时间：2012-06-25T15:05:38.123
> 
> 标签：jquery, jquery-ui, function, jquery-ui-draggable

这是我的自定义函数，称为“doIt”，我确信您可以看到它只是允许某人在类或 id 上调用 .doIt()，在这种情况下，使背景颜色变为红色，然后使元素可拖动。（这是我的第一次尝试，所以请善待）。

```
(function($) {
   $.fn.doIt = function(customOptions) {
      var options = $.extend({}, $.fn.doIt.defaultOptions, customOptions);
      return this.each(function() {
         var $this = $(this); 
         $this.on('click', function(e){
            e.preventDefault();
            $this.css("background-color", options.color);
            $this.draggable();
         });
      });
   };
   $.fn.doIt.defaultOptions = {
    color: "#000"   
   };               
})(jQuery); 
```

因为我的函数使元素可拖动，所以我想使用一些与可拖动相关的事件，例如“停止”，所以当拖动停止时，我希望用户能够在回调中访问相同的事件/ui 信息停止。

但是，我如何与函数中可拖动的停止事件进行交互？

我期待看到的是这样的：

```
$("div#test").doIt({
    color: "#ffeeaa",
    stop: function(e, ui){

      //interact with draggable event/ui here.  
      //So 'e' and 'ui' would return me what the 'stop' event from draggable would normall return.

    }
}); 
```

这是可能的还是我吠错了树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:34:59.867

您只需要将您的选项传递给 jQuery。显然，您定义的选项超出了 jQuery 使用的范围，因此您可能想要过滤掉 jQuery 不关心的选项，但我很确定您不必这样做；jQuery 只会忽略它不使用的属性。

因此，您正在专门尝试参与该`stop`事件。为此，请更改此行：

```
$this.draggable(); 
```

对此：

```
$this.draggable({
    stop: customOptions.stop   // Get the callback defined in custom options
}); 
```

如果您的自定义选项和 jQuery 定义的选项之间没有任何命名冲突，您可以这样做：

```
$this.draggable(customOptions); 
```

一旦用户停止拖动您的可拖动元素，jQuery 将调用您的函数（将`event`和参数传递给它）。`ui`

# asp.net-mvc-3 - jquery 选择器如何使用 MVC 部分视图？

> ID：11191908
> 
> 赞同：0
> 
> 时间：2012-06-25T15:05:40.177
> 
> 标签：asp.net-mvc-3, jquery, jquery-selectors, partial-views

我有一个要编辑的地址模型的可变长度集合。我使用[史蒂夫桑德森](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)的方法来编辑收藏

我通过 Ajax 添加了一个 EditAddress 部分视图（RenderPartial），点击一个按钮，效果很好。

这个局部视图还包含一个谷歌地图“控件”，它允许指出地图上的地址。初始化地图需要传入我希望地图出现的 div 元素的 id。所以在部分视图中，我定义了一个 id 为“#map”的 div，并通过 jquery 将其传递给谷歌地图初始化程序（脚本位于局部视图中）。

现在的问题是，当添加了多个这些部分视图时，页面将有多个“#map”div（当我查看源代码时，我看不到通过 ajax 添加的元素，尽管页面渲染得很好，所以我只是猜测id 将是相同的），如何选择一个元素的正确 id 来连接 jquery？

如果根本不可能，我有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:17:26.597

不要使用 id 选择器，使用其他东西，比如类选择器。

```
var map = new google.maps.Map($('.map')[0], myOptions); 
```

如果您有多个地图选择器，您可以遍历包含它们的列表元素，并单独初始化每个。

```
$('.map-listing-element').each(function(){
    var mapElement = $(this).find('.map-canvas');
    var options = {...};  // whatever the options are
    var googleMap = new google.maps.Map(mapElement[0], options);
});

<div class="this-box-wraps-all-maps">
    <div class="map-listing-element">
        ...load your partial views wrapped in this element
        Map 1
        <div class="map-canvas"></div>
    </div>
    <div class="map-listing-element">
        ...load your partial views wrapped in this element
        Map 2
        <div class="map-canvas"></div>
    </div>
    <div class="map-listing-element">
        ...load your partial views wrapped in this element
        Map 3
        <div class="map-canvas"></div>
    </div>
    <div class="map-listing-element">
        ...load your partial views wrapped in this element
        Map N
        <div class="map-canvas"></div>
    </div>
</div> 
```

# sql - 使用 TinyTds Ruby Gem 解析和运行 .sql 脚本

> ID：11191913
> 
> 赞同：4
> 
> 时间：2012-06-25T15:06:00.257
> 
> 标签：sql, ruby

我正在为按钮夜间部署自动部署数据库脚本。我的第一种方法是在 windows 终端上使用 sqlcmd，将结果保存到 txt 文件，并对其进行解析以确保脚本成功。解析文件并找到返回码有问题，所以我求助于 TinyTds。这是我的代码：

```
 client = TinyTds::Client.new(:username => DB_USER, :password => DB_PASSWORD, :dataserver => DB_SERVERNAME, :timeout => 1200)
      result = client.execute(IO.read(filename))
      puts result.return_code 
```

产生 nil 或以下错误（取决于 .sql 脚本的内容）

```
 run_sql.rb:24:in `execute': Attempt to initiate a new Adaptive Server operation with results pending (TinyTds::Error) 
```

改变

```
 result = client.execute(IO.read(filename)) 
```

到

```
 result = client.execute(IO.read(filename)).do 
```

产量

```
 run_sql.rb:26:in `do': Incorrect syntax near 'go'. (TinyTds::Error) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:24:41.553

我认为您的答案将取决于您尝试提供给 TinyTDS 的 SQL。也许批处理的格式不正确。你也可能想这样做`result = client.execute(data).each`。

# xcode - 界面生成器：锁定选择

> ID：11191915
> 
> 赞同：1
> 
> 时间：2012-06-25T15:06:04.763
> 
> 标签：xcode, interface-builder

是否可以在大纲视图中选择一个项目（在“对象”下）并锁定选择，以便我无法选择画布中的任何其他项目？

基本上，我在画布上有很多对象，并且想移动这些项目，但每次我点击那里时都会选择其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:30:20.480

没办法，我不知道。恼人的。我发现的唯一解决方法是通过侧边栏选择元素，而不是直接单击它们。拖动时使用箭头键移动物体也会导致取消选择或不正确的图层重新排序（视图会发生这种情况）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-20T06:41:20.747

`shift`+`right click`拉出一个菜单，让您选择您想要选择的内容

# java - Android教程错误

> ID：11191918
> 
> 赞同：3
> 
> 时间：2012-06-25T15:06:19.867
> 
> 标签：java, android

我从 Wei-Meng Lee 的“开始 Android 应用程序开发”中借用了以下代码：

```
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {

    private static final String TAG = "DBAdapter";
    private static final String DATABASE_NAME = "MyDB";
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_CREATE =
            "create table contacts (_id integer primary key autoincrement, "
                    + "name text not null, email text not null);";
    private final Context context;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;
    public DBAdapter (Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        DatabaseHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            try {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(db);
        }
    }
} 
```

还有更多，但我试图简化。

我收到以下错误：

> 说明 资源路径 位置 类型
> 
> 令牌 ")" 上的语法错误，{ 在此令牌 DBAdapter.java 之后预期

在......的最后`onUpgrade`

> 语法错误，插入“}”完成ClassBody DBAdapter.java
> 
> 语法错误，插入“}”完成ClassBody DBAdapter.java

在......的最后`onCreate`

我是 Android 应用程序的新手，所以有人可以帮我理解这些消息吗？

这是 Eclipse 显示的内容：

![在此处输入图像描述](../Images/e5ace7176ca674e5862ac54d017faf7c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:11:09.443

这些是来自编译器的消息，告诉您您的大括号`{}`和/或括号`()`在文件中不平衡。如果您复制/粘贴了此代码，请确保您没有错过最后的大括号或类似的东西。您发布的代码看起来很平衡，因此它必须在文件中更靠后。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:11:30.433

尝试在构造函数之前添加 public

```
DatabaseHelper(Context context) 
```

应该

```
public DatabaseHelper(Context context) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T23:44:38.803

是的，如上所示，需要一个支架。特别是如果您只是复制/粘贴代码。右键单击错误，单击“转到”，然后添加/删除（取决于您的问题）所需的令牌。

# lua - Lua 中的控制流

> ID：11191923
> 
> 赞同：0
> 
> 时间：2012-06-25T15:06:47.860
> 
> 标签：lua, embedded-linux, lua-5.2

我有一个问题，我想这一定很常见，你们中的大多数人都会面对它。我在 lua 中编写了一个程序，比如 main.lua，它在接收到关键事件时应该修改坐标并显示几何图形。此 lua 代码调用 reg.c，它在其中进行注册。现在在 reg.ci 中有一个函数引擎，它接收按下的键并将其传递给负责键处理的 lua 函数。但是当key事件到来时，lua代码完成注册并退出，因此来自engine()的调用变成了非法的内存访问，导致了segmentation fault。

另外我想我们不能让 lua 调用挂在 reg 函数中，并从其他地方调用引擎函数。

那么应该是什么解决方案，请指导我完成这个。

* * *

@jacob：这是我想要实现的原型：

```
function key_handler() //this function will get the latest key pressed from some other function
{
     draw.image();
     draw.geometry();
     ...
     ...

     while(1)
     {
         //draw Points until some condition goes wrong      
     }

} 
```

现在，一旦进入 key_handler，当他忙于绘制点时，除非并且直到出现故障情况，我才能收到按键直到那个时候。

我希望这个解释更简单，并表达了我的观点，并有助于其他人理解这个问题。我真的很抱歉，但我不擅长表达或让别人理解。

还有一件事，我已经按照 C 语法来解释了，但是这完全是在 lua 中实现的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:00:32.930

您的代码片段在很大程度上仍然没有提供信息（理想情况下，应该能够在普通的 Lua 解释器中运行您的代码并查看您的问题）。如果你在描述一个 Lua 问题，请使用 Lua 代码来描述它。

但是我开始看到你想去哪里。

您需要做的事情是在您的密钥处理程序中调用一个协程，它将一个参数传递回您的处理程序：

```
function isContinue() --just to simulate whatever function you use getting keypresses.
-- in whatever framework you're using there will probably be a function key_pressed or the like.
    print('Initialize checking function')
    while true do
        print('Continue looping?')
        local ans = io.read():match('[yY]')
        local action
        if not ans then
            print('Do what instead?')
            action = io.read()
            if action:match('kill') then -- abort keychecker.
                break
            end
        end
        coroutine.yield(ans,action)
    end
    print('finalizing isContinue')
    return nil,'STOP' -- important to tell key_handler to quit too, else it'll be calling a dead coroutine.
end

function key_handler()
    local coro = coroutine.create(isContinue)
    local stat,cont,action
    while true do
        print'Draw point'
        stat,cont,action = coroutine.resume(coro)
        if not stat then
            print('Coroutine errored:',cont)
        elseif not cont then
            print('isContinue interrupted keyhandler')
            print("We'll "..action.." instead.")
            break
        end
    end
    print('finalizing key_handler')
end

key_handler()
-- type something containing y or Y to continue, all else aborts.
-- when aborting, you get asked what to do instead of continuing, 
--- with "kill" being a special case. 
```

这应该是不言自明的。您可能应该好好看看[《Lua 编程》第 9 章：协程](http://www.lua.org/pil/9.html)。

最大的困难（好吧，如果你不习惯协作线程）是协程应该让自己产生：它不是负责返回控制的调用函数。

希望这对您有所帮助。

# petapoco - 多线程环境中的 PetaPoco 事务

> ID：11191926
> 
> 赞同：6
> 
> 时间：2012-06-25T15:07:00.147
> 
> 标签：petapoco

我只是以多线程方式测试 PetaPoco Transaction ......

我有一个简单的测试用例：

-- 简单的值对象称为 MediaDevice -- 插入一条记录并更新 1000 次

```
void TransactionThread(Object object)
{

    Database db = (Database) object;

    for(int i= 0; i < 1000;i++)
    {

        Transaction transaction = db.GetTransaction();

        MediaDevice device = new  MediaDevice();
        device.Name = "Name";
        device.Brand = "Brand";

        db.Insert(device);

        device.Name = "Name_Updated";
        device.Brand = "Brand_Updated";

        db.Update(device);

        transaction.Complete();

    }

    long count = db.ExecuteScalar<long>("SELECT Count(*) FROM MediaDevices");

    Console.WriteLine("Number of all records:" + count);

} 
```

我在两个线程中这样调用它：[两个线程的单个数据库对象]

```
void TransactionTest()
{

    Database db =  GetDatabase();

    Thread tThread1 = ... // thread for  TransactionTest()

    Thread tThread2 = ... // thread for  TransactionTest()

     tThread1.Start(db); // pass Database to TransactionTest()
     tThread2.Start(db); // pass same Database to TransactionTest()

} 
```

我收到 Null 错误或有时数据库的对象处理错误..

但是当我提供两个数据库实例时，

```
void TransactionTest()
{

    Database db =  GetDatabase();
    Database db2 =  GetDatabase();

    Thread tThread1 = ... // thread for  TransactionTest()

    Thread tThread2 = ... // thread for  TransactionTest()

    tThread1.Start(db);  // pass Database instance db to TransactionTest()
    tThread2.Start(db2); // pass Database intance db2 to TransactionTest()

} 
```

一切正常...

好吧，当我在事务中检查 PetaPoco 源代码时，我在事务中看到了。完成

```
 public virtual void Complete()
        {
            _db.CompleteTransaction();
            _db = null;
        } 
```

**我的问题是能够使用来自多个线程的事务我必须使用数据库对象的新副本吗？或者我做错了什么？**

为了使其线程安全，我是否必须在每次数据更新查询时打开和关闭新数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:48:22.527

是的，每个线程都需要一个单独的 PetaPoco 数据库实例。请参阅 PetaPoco 文档中的这句话：

> 注意：要使事务工作，所有操作都需要使用相同的 PetaPoco 数据库对象实例。因此，您可能希望使用每个 http 请求或**每个线程 IOC 容器来提供**该对象的共享实例。就我个人而言，StructureMap 是我最喜欢的。

我将给出线索的短语加粗。也就是说，每个线程都应该使用 PetaPoco 数据库对象的一个​​实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:22:16.863

对不起，伙计..是的，你是对的。他们将对象更改为空。所以你不能使用同一个对象来线程化。你必须使用他们使用的描述，如 db=GetDataBase() ；db2=GetDataBase();

否则您可以根据您的要求更改源代码。我认为他们的许可证允许。但我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:10:01.873

您好在选择查询中使用 nolock，因为表可能被锁定。long count = db.ExecuteScalar("SELECT Count(*) with nolock FROM MediaDevices");

# jquery - 如何将类添加到链接 href 的 ID

> ID：11191937
> 
> 赞同：0
> 
> 时间：2012-06-25T15:07:35.793
> 
> 标签：jquery, html

我正在尝试将“可见”类添加到与链接的 href 具有相同 ID 的 div 中，该链接也具有“弹出”类。到目前为止，这是我的代码：

```
 <a href="#about">Sample link</a>
    <div id="#about" class="popup">Sample content</div>  

    <script>
        $(document).ready(function(){
        $("a").click(function(event){
             event.preventDefault();

             var id = $this.attr('href');
             $('id.popup').addClass("visible");
        });
        });
    </script> 
```

我尝试了 ID.popup 组合的许多变体，但似乎无法正确定位。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:49:56.317

你需要修复这些行

```
var id = $this.attr('href');
$('id.popup').addClass("visible");

<div id="#about" class="popup">Sample content</div> 
```

到

```
var id = $(this).attr('href');
$(id + '.popup').addClass("visible");

<div id="about" class="popup">Sample content</div>  <-- remove # from id 
```

# python - Python 正则表达式中的方括号 (re.sub)

> ID：11191945
> 
> 赞同：2
> 
> 时间：2012-06-25T15:08:05.697
> 
> 标签：python, regex

# 问题

我正在使用 Python 正则表达式将 wiki 页面从 FlexWiki 引擎迁移到 FOSwiki 引擎，以处理两个引擎的标记语言之间的差异。

FlexWiki[标记](http://wiki.squirrel-lang.org/default.aspx/SquirrelWiki/FormattingRules.html)和[FOSwiki 标记](http://foswiki.org/System/TextFormattingRules)，供参考。

大多数转换工作得很好，*除非*我尝试转换重命名的链接。两个 wiki 都支持在其标记中重命名链接。

例如，Flexwiki 使用：

```
"Link To Wikipedia":[http://www.wikipedia.org/] 
```

FOSwiki 使用：

```
[[http://www.wikipedia.org/][Link To Wikipedia]] 
```

两者都会产生重写的超链接。

我正在使用正则表达式

```
renameLink = re.compile ("\"(?P<linkText>[^\"]+)\":\[(?P<linkTarget>[^\[\]]+)\]") 
```

从 FlexWiki 标记中解析出链接元素，在运行类似的东西之后

```
"Link Text":[LinkTarget] 
```

可靠地产生组

```
<linkText> = Link Text
<linkTarget = LinkTarget 
```

当我尝试使用 re.sub 将解析的内容插入 FOSwiki 标记时，就会出现我的问题。

我在正则表达式方面的经验没什么好写的，但我的印象是，考虑到这些群体

```
<linkText> = Link text
<linkTarget = LinkTarget 
```

一条线

```
line = renameLink.sub ( "[[\g<linkTarget>][\g<linkText>]]" , line ) 
```

应该产生

```
[[LinkTarget][Link Text]] 
```

但是，在我得到的文本文件的输出中

```
[[LinkTarget [[Link Text]] 
```

这会破坏重命名的链接。

经过一番摆弄后，我设法解决了问题，在哪里

```
line = renameLink.sub ( "[[\g<linkTarget>][ [\g<linkText>]]" , line ) 
```

生产

```
[[LinkTarget][ [[Link Text]] 
```

其中，当在 FOSwiki 中显示时看起来像

```
[[Link Text 
```

哪个有效，但不是很漂亮。

在我尝试转换的页面中可能有数千个这些重命名链接的实例，因此手动修复它没有任何好处。作为记录，我在 Python 2.5.4 和 Python 2.7.3 下运行了脚本，并得到了相同的结果。

我是否错过了语法上非常明显的东西？或者有没有简单的解决方法？

# 解决方案

原来的表情没有任何问题。

我开始在我的脚本中运行其他正则表达式，并注释掉我认为可能与重命名链接表达式重叠的行。这似乎已经成功了，作为一个半永久性的修复，我已经将以链接为中心的表达式和其他表达式分离到单独的脚本中，我一个接一个地运行这些脚本。

我想他们在这里的道德是仔细检查你没有重叠的表达。

## 尝试的解决方案（请参见上面的解决方案）

字符串添加

```
line = renameLink.sub ( "[[\g<linkTarget>]" + "[\g<linkText>]]" , line ) 
```

生产

```
[[linkTarget [[Link Text]] 
```

不管你如何分割连接，结果都是一样的。

转义方括号，例如

```
line = renameLink.sub ( "\[\[\g<linkTarget>\]\[\g<linkName>\]\]" , line ) 
```

生产

```
\[ [[LinkTarget\]] [Link Text\]\] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:57:06.280

## Flexwiki 到 FOSwiki

***代码：***

```
import re
text = '"Link To Wikipedia":[http://www.wikipedia.org/]'
print re.sub(r'"([^"]+)":\[([^\]]+)\]', r'[[\2][\1]]', text) 
```

***输出：***

```
[[http://www.wikipedia.org/][Link To Wikipedia]] 
```

*[在此处](http://ideone.com/06JwB)查看并测试代码。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:40:46.070

> 一条线
> 
> ```
> line = renameLink.sub ( "[[\g<linkTarget>][\g<linkText>]]" , line ) 
> ```
> 
> 应该产生
> 
> ```
> [[LinkTarget][Link Text]] 
> ```

它确实如此。例子：

```
line = r""""Link Text":[LinkTarget]"""
renameLink = re.compile("\"(?P<linkText>[^\"]+)\":\[(?P<linkTarget>[^\[\]]+)\]")
print(renameLink.sub ("[[\g<linkTarget>][\g<linkText>]]", line)) 
```

输出：

```
[[LinkTarget][Link Text]] 
```

除了表情之外，您可能还有其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T15:42:09.787

我完全按照你说的试了。我正在使用 python 2.7.1 版本。

这是结果

```
>>> text = '"Link To Wikipedia":[http://www.wikipedia.org/]'
>>> renameLink = re.compile ("\"(?P<linkText>[^\"]+)\":\[(?P<linkTarget>[^\[\]]+)\]")
>>> s = renameLink.match(text)
>>> lnkname, lnk = s.groups()
>>> substr = "[[%s][%s]]" % (lnk, lnkname)
>>> renameLink.sub(substr, text)
'[[http://www.wikipedia.org/][Link To Wikipedia]]' 
```

一切正常。

# python - 无法在 ubuntu 11.10 中安装 rdkit

> ID：11191946
> 
> 赞同：3
> 
> 时间：2012-06-25T15:08:06.200
> 
> 标签：python, ubuntu, rdkit

我花了很多时间尝试使用 boost 1.49 的预编译版本在 ubuntu 11.10 上为 Python 2.7 (rdkit_201106+dfsg.orig.tar.gz) 构建 RDKit。我失败得很惨。

反复出现的错误在 CMake GUI 中：

```
 CMake Error at CMakeLists.txt:11 (install):

  install FILES given no DESTINATION!

  CMake Error at CMakeLists.txt:14 (add_pytest):

  Unknown CMake command "add_pytest". 
```

请问有什么帮助吗？

解决了之前的问题，但现在运行 python 时出现此错误，即使我按照安装过程安装了 rdkit：

```
 from rdkit import Chem
 Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
 ImportError: No module named rdkit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T15:00:19.263

确保你设置了环境变量：（你可能需要用你所拥有的来修复路径）：在mac上使用bash：

```
export RDBASE=/usr/local/share/RDKit
export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages 
```

您可能希望将这些行添加到 bash 脚本以自动化该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-29T16:38:29.767

对于 Ubuntu 12.04.2 LTS 设置此环境变量对我有用

```
export RDBASE=/usr/share/RDKit
export PYTHONPATH=$PYTHONPATH:/usr/lib/pymodules/python2.7 
```

# maven - 如何将 osgi 包中的导出 bean 导入/使用到另一个 osgi 包中

> ID：11191947
> 
> 赞同：0
> 
> 时间：2012-06-25T15:08:06.870
> 
> 标签：maven, osgi

我是 osgi 的新手，对它的经验很少。我有一个 osgi 包，它使用 config xml 文件将 bean 导出为 osgi 服务。我想在另一个 osgi 包中使用该服务。谁能告诉我该怎么做？我正在使用 maven 和 felix osgi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:50:15.337

您想使用带有蓝图的服务吗？您的描述“config xml”听起来有点像它可能是蓝图。在这种情况下，您可以使用

我的网站上有一个完整的例子： [http ://www.liquid-reality.de/x/DIBZ](http://www.liquid-reality.de/x/DIBZ)

该示例展示了如何使用蓝图导出和导入服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:33:23.697

使用蓝图或其他方式如何导出 OSGi 服务并不重要——因为它是一个 OSGi 服务，您的包可以从 OSGi 服务注册表中获取它。为此，您必须：

1.  在你的包清单中导入它的包，以声明依赖。您必须在 META-INF/Manifest.mf 中添加 Import-Package: com.acme.theservicepackage

2.  在您的 Activator 类中，您必须使用捆绑上下文从服务注册表中获取服务：

    timeRef = bc.getServiceReference(TimeService.class.getName()); if (timeRef != null) { timeService = (TimeService) bc.getService(timeRef); }

然后，您只需通过调用它的方法来使用 timeService（或您的服务使用的任何接口），无论它们是什么。

这里有很多细节，你可以使用帮助器 ServiceTracker 类，或者蓝图，或者声明式服务......但是由于你似乎是 OSGi 的新手，我已经让它尽可能简单，并展示了最基本的方法来做。

[这里](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/index.html)有基本 OSGi 服务的演示。

# ruby-on-rails - 将 Ruby 站点从 EngineYard 迁移到 Heroku

> ID：11191950
> 
> 赞同：0
> 
> 时间：2012-06-25T15:08:10.490
> 
> 标签：ruby-on-rails, ruby, heroku, refinerycms, engineyard

作为一个更大项目的一部分，我的任务是迁移一些现有的 Ruby on Rails 站点（使用旧版本的 refinerycms 0.9.6.34 构建，至少是源代码中包含的 Gemfile 中列出的版本）。我通常不使用 Ruby，所以我有点茫然。之前的开发者只是简单地交出了最新的 git dump 和一个 db dump。

我首先尝试让网站在 Ubuntu 11.10 本地机器上本地运行，然后再推送到测试 Heroku 安装。如果可以直接将他们提供的文件推送到 Heroku，那么我可以尝试，但我的理解是我需要让一切正常工作，然后使用 Heroku 的工具进行部署。

以前的开发人员说他们使用的是 ruby​​ 1.8.7，所以在 Ubuntu 中我做了以下事情：

```
aptitude install ruby1.8 ruby1.8-dev ruby1.8-full
aptitude install rubygems1.8 
```

我已经恢复了数据库，并在 config 目录中对 database.yml 进行了更改以指向恢复的数据库。

当我尝试从提取的源目录的根目录运行“捆绑安装”时，我得到：

```
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/sass-rails-3.2.5.gemspec]: invalid date format in specification: "2012-03-19 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-2.0.2.gemspec]: invalid date format in specification: "2012-04-03 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/sass-rails-3.2.5.gemspec]: invalid date format in specification: "2012-03-19 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-2.0.2.gemspec]: invalid date format in specification: "2012-04-03 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mail-2.4.4.gemspec]: invalid date format in specification: "2012-03-14 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/tilt-1.3.3.gemspec]: invalid date format in specification: "2011-08-25 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/sass-rails-3.2.5.gemspec]: invalid date format in specification: "2012-03-19 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/jquery-rails-2.0.2.gemspec]: invalid date format in specification: "2012-04-03 00:00:00.000000000Z"
Fetching gem metadata from https://rubygems.org/.......
Fetching gem metadata from https://rubygems.org/..
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.3.6)
Using activesupport (3.2.3)
Using builder (3.0.0)
Using activemodel (3.2.3)
Using erubis (2.7.0)
Using journey (1.0.3)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Installing tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.3)
Installing mime-types (1.18)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Installing mail (2.4.4)
Using actionmailer (3.2.3)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.3)
Using activeresource (3.2.3)
Using acts_as_indexed (0.7.8)
Using awesome_nested_set (2.1.3)
Using babosa (0.3.7)
Using bcrypt-ruby (3.0.1)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.3)
Using rdoc (3.12)
Using thor (0.14.6)
Using railties (3.2.3)
Using coffee-rails (3.2.2)
Using orm_adapter (0.0.7)
Using warden (1.1.1)
Using devise (2.0.4)
Using dragonfly (0.9.12)
Using friendly_id (4.0.6)
Using paper_trail (2.6.3)
Using globalize3 (0.2.0)
Installing jquery-rails (2.0.2)
Using bundler (1.1.4)
Using rails (3.2.3)
Using sass (3.1.19)
Installing sass-rails (3.2.5)
Using truncate_html (0.5.5)
Using uglifier (1.2.4)
Using will_paginate (3.0.3)
Using refinerycms-core (2.0.4)
Using refinerycms-authentication (2.0.4)
Using refinerycms-dashboard (2.0.4)
Using refinerycms-images (2.0.4)
Using seo_meta (1.3.0)
Using refinerycms-pages (2.0.4)
Using refinerycms-resources (2.0.4)
Using refinerycms (2.0.4)
Using routing-filter (0.3.1)
Using refinerycms-i18n (2.0.0)
Using sqlite3 (1.3.6)
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

显然，需要解决 Invalid gemspec 的错误，但令我困扰的另一件事是以下几行：

```
Using refinerycms-core (2.0.4)
Using refinerycms-authentication (2.0.4)
Using refinerycms-dashboard (2.0.4)
Using refinerycms-images (2.0.4)
Using seo_meta (1.3.0)
Using refinerycms-pages (2.0.4)
Using refinerycms-resources (2.0.4)
Using refinerycms (2.0.4)
Using routing-filter (0.3.1)
Using refinerycms-i18n (2.0.0) 
```

由于 Gemfile 中列出的炼油厂cms 版本是 0.9.6.34。

当谈到 Ruby 世界时，我有点迷茫，所以任何帮助都将不胜感激。

谢谢，

**更新** 根据要求，gemfile 看起来像：

```
source 'http://rubygems.org'

gem 'refinerycms', '= 0.9.6.34'
gem 'rails', '~> 2.3.14'

gem 'mysql2', '~> 0.2.18'

gem 'hpricot'
gem 'rmagick', '= 2.12.2' 
```

此外，这是 Gemfile.lock 文件中的内容：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.3)
      actionpack (= 4.2.3)
      mail (~> 2.4.4)
    actionpack (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
    activerecord (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
    activesupport (3.2.3)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    acts_as_indexed (0.7.8)
    arel (3.0.2)
    awesome_nested_set (2.1.3)
      activerecord (>= 3.0.0)
    babosa (0.3.7)
    bcrypt-ruby (3.0.1)
    builder (3.0.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    devise (2.0.4)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.3)
      railties (~> 3.1)
      warden (~> 1.1.1)
    dragonfly (0.9.12)
      rack
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    friendly_id (4.0.6)
    globalize3 (0.2.0)
activemodel (>= 3.0.0)
      activerecord (>= 3.0.0)
      paper_trail (~> 2)
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.3)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.3)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.18)
    multi_json (1.3.6)
    orm_adapter (0.0.7)
    paper_trail (2.6.3)
      activerecord (~> 3.0)
      railties (~> 3.0)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.3)
      actionmailer (= 3.2.3)
      actionpack (= 3.2.3)
      activerecord (= 3.2.3)
      activeresource (= 3.2.3)
      activesupport (= 3.2.3)
      bundler (~> 1.0)
      railties (= 3.2.3)
    railties (3.2.3)
      actionpack (= 3.2.3)
      activesupport (= 3.2.3)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    refinerycms (2.0.4)
      bundler (~> 1.0)
      refinerycms-authentication (= 2.0.4)
      refinerycms-core (= 2.0.4)
      refinerycms-dashboard (= 2.0.4)
      refinerycms-images (= 2.0.4)
      refinerycms-pages (= 2.0.4)
      refinerycms-resources (= 2.0.4)
    refinerycms-authentication (2.0.4)
      devise (~> 2.0.0)
      orm_adapter (~> 0.0.7)
      refinerycms-core (= 2.0.4)
    refinerycms-core (2.0.4)
      acts_as_indexed (~> 0.7.7)
      awesome_nested_set (~> 2.1.3)
      coffee-rails (~> 3.2.1)
      friendly_id (~> 4.0.1)
      globalize3 (~> 0.2.0)
      jquery-rails (~> 2.0.0)
      rails (>= 3.1.3, < 3.3)
      sass-rails (~> 3.2.3)
      truncate_html (~> 0.5)
      uglifier (>= 1.0.3)
      will_paginate (~> 3.0.2)
    refinerycms-dashboard (2.0.4)
      refinerycms-core (= 2.0.4)
   refinerycms-i18n (2.0.0)
      refinerycms-core (~> 2.0.0)
      routing-filter (>= 0.2.3)
    refinerycms-images (2.0.4)
      dragonfly (~> 0.9.8)
      rack-cache (>= 0.5.3)
      refinerycms-core (= 2.0.4)
    refinerycms-pages (2.0.4)
      awesome_nested_set (~> 2.1.3)
      babosa (!= 0.3.6)
      refinerycms-core (= 2.0.4)
      seo_meta (~> 1.3.0)
    refinerycms-resources (2.0.4)
      dragonfly (~> 0.9.8)
      rack-cache (>= 0.5.3)
      refinerycms-core (= 2.0.4)
    routing-filter (0.3.1)
      actionpack
    sass (3.1.19)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    seo_meta (1.3.0)
      railties (>= 3.0.0)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.6)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    truncate_html (0.5.5)
    tzinfo (0.3.33)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    warden (1.1.1)
      rack (>= 1.0)
    will_paginate (3.0.3)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  rails (= 3.2.3)
  refinerycms (~> 2.0.0)
  refinerycms-i18n (~> 2.0.0)
  sass-rails (~> 3.2.3)
  sqlite3
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:35:39.613

有几个因素需要考虑：

1) Ruby 版本：确保您的 Heroku 设置使用的是 1.8.7，以便您可以“按原样”复制当前系统。Heroku (Cedar) 的“当前”堆栈正在使用 1.9.3，因此请确保您获得仍然支持 ruby​​ 1.8.7 的旧 heroku 堆栈
确保您安装并开始使用 RVM 来管理您的 ruby​​ 版本。这是大多数人使用的，强烈建议避免痛苦的问题。

2) Rails 版本：我看到您的 Gemfile 列表中列出了 Rails 2.3.2。这是一个非常“当前”的 rails 版本，非常棒。不过，您应该知道，使用这个或下一个小版本的 rails，Ruby 1.8.7 将不受支持（在开源领域它相当“旧”），因此您还需要尝试迁移到 1.9 .3 尽快。如果没有这个，您将开始遇到无穷无尽的 gem 问题，并且为旧版本解决这些问题可能是不切实际的，尤其是如果您对 ruby​​ 和 rails 比较陌生。

3) 数据库。听起来您已经导入了好的东西，因为这可能是一个大问题。不确定您使用的是什么 - 可能是 sql 转储或备份。大概你是在本地做的。对于 Heroku 本身，您可能已经知道使用[https://devcenter.heroku.com/articles/taps 。](https://devcenter.heroku.com/articles/taps)

**最主要的是您的捆绑包完成正常。
99% 的情况下，这意味着您的宝石也可以。**

我会尝试运行该应用程序并查看它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:11:55.743

您可以放心地忽略无效的 gemspec 错误，这只是一个不应影响您的日期格式问题。关于 gem 版本，你能发布你的 Gemfile 的内容吗？我认为只需在您的宝石旁边放置一个版本即可。见[http://gembundler.com/gemfile.html](http://gembundler.com/gemfile.html)

编辑：我不确定这会解决问题，但你应该`=`在你的 Gemfile 中删除。这是它的外观：

`enter code here`宝石'refinerycms'，'0.9.6.34'

对于您使用此语法的其他 gem 也是如此

# c# - 你如何创建一个

> ID：11191951
> 
> 赞同：21
> 
> 时间：2012-06-25T15:08:10.690
> 
> 标签：c#, asp.net

我正在尝试在我正在设计的用户控件后面的代码中以编程方式生成一些 html。

我一直在环顾四周，但似乎无法弄清楚如何为我将要显示的内容动态生成一些 h1 标签。

它只是一个带有特殊属性集的标签吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-25T15:12:35.607

```
var h1 = new HtmlGenericControl("h1");
h1.InnerHtml = "header content"; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-25T15:14:37.737

您还可以使用：

```
<h1 runat="server" /> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-25T15:10:02.647

您可以使用标签或文字控件，如下所示：

```
Label1.Text = "<h1>HI All</h1>"; 
```

或者

```
string heading = "HI All";
Label1.Text = string.Format("<h1>{0}</h1>", heading); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T15:13:50.163

您可以通过以下方式轻松做到这一点

```
literall.Text ="<h1>ABCD</h1>"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-15T07:04:51.550

让，你有一个这样的服务器控件，

```
<div class="cls" runat="server" id="MyServerControlDiv"></div> 
```

使用`HtmlGenericControl`

```
var h1 = new HtmlGenericControl("h1");
h1.InnerHtml = "header content";
MyServerControlDiv.Controls.Add(h1); 
```

使用`LiteralControl`

```
MyServerControlDiv.Controls.Add(new LiteralControl("<h1>"));
MyServerControlDiv.Controls.Add(new LiteralControl("header content"));
MyServerControlDiv.Controls.Add(new LiteralControl("</h1>")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-25T15:11:04.480

使用文字控制，`Literal1.Text = "<h1>" + texttodisplay + "</h1>";`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-25T15:16:42.417

ASP 文字可能会对您有所帮助。

[http://ganeshmohan.wordpress.com/aspnet-and-c-generate-html-controls-dynamically/](http://ganeshmohan.wordpress.com/aspnet-and-c-generate-html-controls-dynamically/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-08T12:15:37.967

就个人而言，我更喜欢为它上课。

```
public class H1: HtmlGenericElement 
{
    public H1(): base("h1") { }
} 
```

或许。

```
public class H: HtmlGenericControl
{
    public H(int size): base("h" + size) { }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-19T04:17:34.303

让我们假设您的设计中有一个 asp 占位符：

```
PlaceHolder placeHolder1 = new PlaceHolder();

string yourText = "Header Text";
Label myLabel = new Label();
myLabel.Text = "<h1>" + yourText + "</h1>";

PlaceHolder1.Controls.Add(myLabel); 
```

或者

```
PlaceHolder1.Controls.Add(new LiteralControl ("<h1>")) // and likewise
for </h1>. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-04T06:52:00.627

只要您不想插入任何子控件，就可以使用通用 HTML 控件或文字控件。如果您确实需要附加一个子控件（例如标签），那么您需要将您的标题创建为 Web 控件，如下所示：

```
WebControl H2Header = new WebControl(HtmlTextWriterTag.H1); 
```

然后你可以像这样附加一个子控件：

```
Label labHeader = new Label() { Text = "Some Header Text" };
H2Header.Controls.Add(labHeader); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-04T16:49:15.303

我一直喜欢使用的：

在前端放置所需的 html 控件，例如

```
<h1 id="title" runat="server">XXX</h1> 
```

然后在后面的代码中声明所需的控件，例如

```
protected HtmlGenericControl PublicTitle
{
   get
   {
       return this.title;
   }
} 
```

代码中的任何地方都可以使用控件

```
PublicTitle.InnerHtml = state.Equals("win") ? "Win" : "Lost";
PublicTitle.Attributes.Add("src", "https://xxxx"); 
```

# function - 函数 f(ab) = b(a) 有通用名称吗？

> ID：11191953
> 
> 赞同：2
> 
> 时间：2012-06-25T15:08:20.303
> 
> 标签：function, terminology

这个函数的类型是`T -> (T -> U) -> U`。我相信在 Haskell 中，它会类似于`($ . flip)`.

或者，从面向对象的角度来看（这是我一直在看的方式）：

```
type T {
    U myFunction(f: T -> U) {
        return f(this);
    }
} 
```

我在笔记中一直将其称为“进入”，并使用单个箭头 ( `->`) 作为运算符。它类似于`map`函数，但对于标量：

```
 a.into f =  f(a)
[a, b, c].map f = [f(a), f(b), f(c)] 
```

实际应用示例：

```
42 -> Math.sqrt
foo.bar.into(doSomething).baz.into(doSomethingElse).xyzzy
(rather than doSomethingElse(doSomething(foo.bar).baz).xyzzy) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T01:45:37.793

看起来 F# 有这个功能。该函数似乎没有命名，但操作符被称为管道操作符。[http://msdn.microsoft.com/en-us/library/dd233229.aspx](http://msdn.microsoft.com/en-us/library/dd233229.aspx)

```
let result = 100 |> function1 |> function2 
```

在 Haskell 中，它是`flip id`. 一个名为 data-aviary 的滑稽包将其定义为`thrush`. [Haskell $ 运算符是否有逆运算？](https://stackoverflow.com/questions/4090168/is-there-an-inverse-of-the-haskell-operator)

# c# - 我在构建 Linq 查询时做错了什么

> ID：11191954
> 
> 赞同：1
> 
> 时间：2012-06-25T15:08:21.597
> 
> 标签：c#, linq

我正在尝试为以下查询编写等效的 linq 代码。

```
SELECT A.*  
FROM  
(  
    SELECT * FROM TableA   
    WHERE id = 100  
) a  
JOIN   
(  
    SELECT Name, MAX(AnotherId) AnotherId   
    FROM TableA   
    WHERE id = 100  
    GROUP BY Name   
) b  
on a.Name  = b.Name and a.AnotherId = b.AnotherId 
```

这是 linq

```
var Collection = from R in DbContext.TableA  
join G in (DbContext.TableA.Where(r => r.Id == 100).GroupBy(r => new { r.Name, r.AnotherId } ).Select(g => new { Name = g.Name , AnotherId = g.Max(o => o.AnotherId) }))  
on new { R.Name, R.AnotherId } equals new { G.Name, G.AnotherId }  
where R.Id == 100  
select R; 
```

但是我遇到了我不知道如何修复的编译错误。有什么想法吗

join 子句中的表达式之一的类型不正确。对“加入”的调用中的类型推断失败。

错误 7“System.Linq.IGrouping”不包含“Name”的定义，并且找不到接受“System.Linq.IGrouping”类型的第一个参数的扩展方法“Name”（您是否缺少 using 指令或装配参考？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:22:41.447

当您只想按 r.Name 分组时，您可以按 r.Name、r.AnotherId 分组。

```
var Collection = from R in DbContext.TableA  
join G in (DbContext.TableA
                      .Where(r => r.Id == 100)
                      .GroupBy(r => r.Name)
                      .Select(g => new { Name = g.Key , AnotherId = g.Max(o => o.AnotherId) }))  
on new { R.Name, R.AnotherId } equals new { G.Name, G.AnotherId }  
where R.Id == 100  
select R; 
```

并拥有流畅的语法

```
var collection = DbContext.TableA
                          .Where(t1 => t1.Id == 100)
                          .Join(DbContext.TableA
                                .Where(t2 => t2.Id == 100)
                                .GroupBy(t2 => t2.Name)
                                .Select(group => new{Name = group.Key, 
                                                      AnotherId = group.Max(e => e.AnotherId)})
                                 ),
                                 t1 => new{t1.Name, t1.AnotherId} ,
                                 t2 => new{t2.Name, t2.AnotherId},
                                 (t1, t2) => t1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:20:30.480

ll您需要以下语法，注意添加'Key'

```
var Collection = from R in DbContext.TableA  
join G in (DbContext.TableA.Where(r => r.Id == 100)
            .GroupBy(r => new { r.Name, r.AnotherId } )
            .Select(g => new { Name = g.Key.Name , AnotherId = g.Max(o => o.AnotherId) }))  
on new { R.Name, R.AnotherId } equals new { G.Name, G.AnotherId }  
where R.Id == 100  
select R; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:24:42.423

我建议对查询的所有部分使用查询语法。通过这种方式，您的 linq 查询将具有与原始 sql 查询更相似的结构。它看起来像这样：

```
var query =
  from a in 
    (from x in DbContext.TableA
     where x.ID == 100 
     select x)
  join b in
    (from x in DbContext.TableA
     where x.ID == 100
     group x by x.Name into x
     select new
     {
       Name = x.Key,
       AnotherId = x.Max(o => o.AnotherId),
     })
  on new { a.Name, a.AnotherId } equals new { b.Name, b.AnotherId }
  select a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T15:26:10.900

saj 和 Raphael 都发现了优点：

```
.GroupBy(r => new { r.Name, r.AnotherId } )
.Select(g => new { Name = g.Name , AnotherId = g.Max(o => o.AnotherId) })) 
```

组没有名称。每个组都有一个 Key（并且 Key 有一个 Name 和 AnotherId）。

由于您需要 Max(AnotherId)，因此您不想在分组键中包含 AnotherId（与原始查询的 GroupBy 子句中不存在相同）。

```
.GroupBy(r => r.Name)  //the Name is the Key
.Select(g => new { Name = g.Key, AnotherId = g.Max(o => o.AnotherId) })) 
```

# c# - 从另一个表中获取 ID

> ID：11191955
> 
> 赞同：2
> 
> 时间：2012-06-25T15:08:23.267
> 
> 标签：c#, .net, linq

我正在尝试将产品添加到我的数据库中，我需要从另一个表中获取类别 ID，但是我不确定我该怎么做？

基本上，我有一个包含所有不同类别的表，我需要从我的外部 Web 服务传递文本，然后它会访问数据库并获取它打算在其中的猫的 ID。

下面是我的代码：

```
using (aboDataDataContext dc = new aboDataDataContext())
{
    var match = (from t in dc.tweProducts
                 where t.sku == productSku
                 select t).FirstOrDefault();

    if (match == null)
    {
        tweProduct tprod = new tweProduct()
        {
            sku = p.productcode,
            categoryId = Convert.ToInt32(catid),
            title = p.name,
            brand = p.manufacturer,
            description = p.description,
            twePrice = p.price,
            weight = decimal.TryParse(p.size, out weight) == true ? (int?)weight : null,
            size = decimal.TryParse(p.size, out weight) == true ? (int?)weight : null,
            contry = p.country,
            region = p.region,
            vintage = int.TryParse(p.vintage, out vintage) == true ? (int?)vintage : null,
            strength = p.strength,
            bottler = p.bottler,
            age = int.TryParse(p.age, out age) == true ? (int?)age : null,
            caskType = p.casktype,
            series = p.series,
            flavour = p.flavour,
            stock = p.freestock,
            tweUpdated = false,
            stockUpdated = false,
            priceUpdated = false,
            dataUpdated = false,
            imgPublished = false,
            lastUpdated = DateTime.Now,
        };
    }
} 
```

所以基本上来自 web 服务的类别是在 Category_1 中传递的（例如），我需要将它传递给我的数据库，以获取 Category_1 的 ID（比如它的 1），然后将其插入我的表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T15:11:08.103

您需要使用[FirstOrDefault()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.firstordefault.aspx)，假设您从您的网络服务获得有效而非空响应。

```
 categoryId = Convert.ToInt32((from c in dc.Categories
                                 where c.Name == p.category
                                 select c.Id).FirstOrDefault()), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:14:24.713

FirstOrDefault/First/SingleOrDefault/Single 接受一个谓词：

```
categoryId = dc.Categories.Single(c => c.Name == p.category).Id; 
```

# xmpp - 我在使用我的客户端的订阅过程中遇到了问题

> ID：11191958
> 
> 赞同：0
> 
> 时间：2012-06-25T15:08:39.130
> 
> 标签：xmpp

我使用 Jabber-Net API 来制作 GMail 客户端。我一直在使用我的客户端的订阅过程中遇到问题，因为它总是返回“subscription=none”和“ask=none”。当我订阅一个新用户时，它可以正常工作，但是，从名册中订阅/取消订阅用户非常频繁地使用户停止发送订阅请求与“to/from/both”等。我发现，“CONTACT”总是收到一个像这样的数据包：

```
<iq type="set">
    <query xmlns="jabber:iq:roster">
      <item
          jid="jabberuser@host"
          subscription="none"
          ask="none"/>
    </query>
  </iq> 
```

任何及时的答案将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:49:00.700

您要发送在线状态订阅吗？

```
<presence type='subscribe' to='jabberuser@host'/> 
```

# ios - 如何使用 ViewDidLoad 加载保存的图像

> ID：11191960
> 
> 赞同：-1
> 
> 时间：2012-06-25T15:08:44.770
> 
> 标签：ios, xcode, viewdidload

我正在制作一个绘画应用程序，我目前有该应用程序可以保存图纸，但是一旦应用程序退出或切换视图，它仍然无法将图纸重新加载到视图中。

我用这个保存图像：

```
-(IBAction)saveImage:(id)sender
{
    UIImage *saveImage = drawImage.image;

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(saveImage)];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:imageData forKey:@"image"];
    [defaults synchronize];

} 
```

### 问题

如何加载`imageData`到视图中？我假设我可以在`viewDidLoad`. 我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:26:05.277

您的保存代码看起来不错。

要读回图像，您可以这样做：

```
NSData* imageData = [[NSUserDefaults standardUserDefaults] objectForKey:@"image"];
UIImage* image = [UIImage imageWithData:imageData]; 
```

是的，您可以在 viewDidLoad 或 viewDidAppear/viewWillAppear 或任何合适的地方执行此操作，这实际上取决于用例。

# objective-c - UIScrollView 没有收到滚动动作

> ID：11191962
> 
> 赞同：1
> 
> 时间：2012-06-25T15:09:02.033
> 
> 标签：objective-c, ios, uiscrollview

在我正在开发的应用程序中，我现在的目标是在键盘显示时滚动内容，并允许用户在显示时滚动。我尝试了一些不同的解决方案，但还没有一个能够实现这一点。

我在应用程序中使用故事板，这是视图控制器中的元素层次结构：

视图控制器 UIScrollView UIView Buttons/textfields/labels/UIPickerView

我首先将 UIScrollView 的内容大小设置为与其中包含所有表单元素的视图大小相同。当这不起作用时，我尝试过度夸大内容的高度，手动将内容大小设置为 320 x 2000。同样，这不起作用。我在滚动视图上也将用户交互启用设置为 YES。这是我此时的代码。

```
CGSize contentSize = CGSizeMake(320, 2000);
[self.scrollView setContentSize:contentSize]; 
```

在滚动视图中，我有一个按钮，它位于整个表单的后面，如果用户触摸它的外部，它可以关闭键盘。我禁用了它以查看它是否可能是阻止它滚动的事件冲突。再次，没有工作。

```
-(IBAction)closeKeyboard:(id)sender
{
    if(![self isFirstResponder]){
        [self.view endEditing:YES];
    }
} 
```

我什至设置了一些观察者来查看键盘是否即将出现或消失。观察者将根据键盘当前所在的位置调整滚动视图的高度，而不是内容大小，仅调整滚动视图本身。所以在这一点上，滚动视图中的内容会比滚动视图本身高得多，但仍然没有滚动发生。

这是我的观察者的代码：

```
// adjust view based on keyboard
- (void)keyboardWillHide:(NSNotification *)n
{
    NSDictionary* userInfo = [n userInfo];

    // get the size of the keyboard
    CGSize keyboardSize = [[userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    // resize the scrollview
    CGRect viewFrame = self.view.frame;
    // I'm also subtracting a constant kTabBarHeight because my UIScrollView was offset by the UITabBar so really only the portion of the keyboard that is leftover pass the UITabBar is obscuring my UIScrollView.
    //viewFrame.size.height += keyboardSize.height;

    CGRect scrollRect = CGRectMake(viewFrame.origin.x, viewFrame.origin.y, viewFrame.size.width, viewFrame.size.height + keyboardSize.height + 100);

    [UIScrollView beginAnimations:nil context:NULL];
     [UIScrollView setAnimationBeginsFromCurrentState:YES];
    [UIScrollView setAnimationDuration:0.3];
    [self.scrollView setFrame:scrollRect];
    self.scrollView.userInteractionEnabled = YES;
    [UIScrollView commitAnimations];

    keyboardShowing = false;
}

- (void)keyboardWillShow:(NSNotification *)n
{
    // This is an ivar I'm using to ensure that we do not do the frame size adjustment on    the UIScrollView if the keyboard is already shown.  This can happen if the user, after fixing editing a UITextField, scrolls the resized UIScrollView to another UITextField and attempts to edit the next UITextField.  If we were to resize the UIScrollView again, it would be disastrous.  NOTE: The keyboard notification will fire even when the keyboard is already shown.
   if (keyboardShowing) {
      return;
   }

   NSDictionary* userInfo = [n userInfo];

   // get the size of the keyboard
    CGSize keyboardSize = [[userInfo objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

   // resize the noteView
   CGRect viewFrame = self.view.frame;
   // I'm also subtracting a constant kTabBarHeight because my UIScrollView was offset by the UITabBar so really only the portion of the keyboard that is leftover pass the UITabBar is obscuring my UIScrollView.

   CGRect scrollRect = CGRectMake(viewFrame.origin.x, viewFrame.origin.y, viewFrame.size.width, viewFrame.size.height - keyboardSize.height - 100);
   //scrollView.frame.size.height -= keyboardSize.height;

    //viewFrame.size.height -= keyboardSize.height;
    [UIScrollView beginAnimations:nil context:NULL];
    [UIScrollView setAnimationBeginsFromCurrentState:YES];
    [UIScrollView setAnimationDuration:0.3];
    [self.scrollView setFrame:scrollRect];
    self.scrollView.userInteractionEnabled = YES;
    [UIScrollView commitAnimations];

    keyboardShowing = YES;
} 
```

如果这是我一直在思考的那些简单错误之一，我不会感到惊讶，但是这种可访问性功能在应用程序中会非常好。任何帮助将不胜感激，甚至我试图解决的问题的其他可能解决方案也将很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:43:47.223

看起来您正在 IB 中使用手势识别器来检测点击外部事件。因为此识别器位于层次结构的最高视图中，所以它会覆盖滚动视图的检测器。您可能需要稍微更改它，具体取决于您希望能够点击哪些区域来关闭键盘。

这是[UIResponder 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIResponder_Class/Reference/Reference.html)。它列出了视图控制器自动继承的所有 UIResponder 事件。可以解决您的问题的方法是将您的 UIScrollView 子类化并向其添加键盘关闭代码。另外，请确保将其设置为第一响应者。

**最终有效的代码：**

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];
    if ([touch tapcount] == 1)
       for(UIView *view in self.view.subviews){
           if([view isKindOfClass:[UITextField class]]){
               [view resignFirstResponder];
           }
       }
    }
} 
```

# c# - 如何使用 MVVM 在 ListBox 中显示字符串？

> ID：11191963
> 
> 赞同：0
> 
> 时间：2012-06-25T15:09:08.290
> 
> 标签：c#, wpf, data-binding, mvvm

我有`ListBox`一个 WPF 表单。我想水平显示字符串项目列表。我有一个`Grid`可以`ListBox`控制的。

当我运行表单时，它会显示封装对象的名称：**ProjectName.Folder.Category**，而不是其中的字符串对象。

`ViewModelLocator`

```
public CategoryViewModel CategoryViewModel
{
    get
    {
        if (categoryviewModel == null)
        {
            categoryviewModel = new CategoryViewModel();
            categoryviewModel.ListData.Clear();
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy1" });
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy2" });
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy3" });
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy4" });
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy5" });
            categoryviewModel.ListData.Add(new Category { MyCategory = "new categroy6" });
        }
        return categoryviewModel;
    }
} 
```

`Model`

```
class Category
{
    public String MyCategory { get; set; }
} 
```

`MainPage.xaml`

```
<Grid>
    <my:featureControl HorizontalAlignment="Left" 
                       x:Name="featureControl1" 
                       VerticalAlignment="Top" Height="332" 
                       Loaded="featureControl1_Loaded" />
</Grid> 
```

`Control.xaml`

```
<UserControl x:Class="AmebaPrototype.UI.Longlist.CategoryControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="1280">
<Grid DataContext="{Binding Source={StaticResource viewModelLocator},Path=CategoryViewModel}">

    <ListBox Height="300" HorizontalAlignment="Left" Name="listBox1" VerticalAlignment="Top" Width="1280" ItemsSource="{Binding ListData}" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>        
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:11:23.487

您需要`DisplayMemberPath`在您的`ListBox`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:15:44.810

这似乎成功了。

```
<DataTemplate x:Key="ListBoxTemplate">
    <TextBlock x:Name="black"  Text="{Binding MyCategory}"/>
</DataTemplate> 
```

# javascript - jQuery 触发器（'click'）不适用于 Jasmine-jquery

> ID：11191966
> 
> 赞同：3
> 
> 时间：2012-06-25T15:09:16.553
> 
> 标签：javascript, jquery, jasmine, jasmine-jquery

这是我的测试代码：

```
describe("Login", function(){
    beforeEach(function(){
        loadFixtures('login-fixture.html');
    })

    it("should enable the button when checking 'remember password'", function(){
        $('#remember').trigger('click');
        expect($('#keepIn')).not.toBeDisabled();
    });
}); 
```

这是我的生产代码：

```
$(document).ready(function(){

    $('#remember').click(function(e) {
        if($('#remember').is(':checked'))
        {
            $('#keepIn').removeAttr('disabled');
        }
    });

}); 
```

这不起作用，生产代码永远不会被调用。我在触发事件之前和之后放置了警报，并且在触发后选中了复选框，但是没有调用 .click 函数。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:24:22.923

在没有看到其余代码的情况下，我假设“login-fixture.html”包含“#remember”复选框。如果是这样，它会在 DOM 加载后加载。这意味着您要分配的“点击”事件将仅适用于先前加载的元素。jQuery on() 事件会将您想要的任何事件分配给新加载的元素。您可能想尝试将 on() 事件添加到该 ID。就像是：

```
$(function(){
    $('#remember').on('click', function(){
        if($('#remember').is(':checked')){
            $('#keepIn').checkboxradio('enable');
        }
    });
}); 
```

希望有帮助。

见：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

# objective-c - 在 IOS 中从 App 上传到服务器

> ID：11191968
> 
> 赞同：3
> 
> 时间：2012-06-25T15:09:18.547
> 
> 标签：objective-c, ios, ios5, upload

我知道，通常应用程序要与互联网交互，它必须使用网络服务来交换信息。但是，如何将数据（照片、文本、录音等）从应用程序上传到服务器（保存所有用户帐户的数据）？我知道有些人使用研究中的电子邮件到服务器策略，但即便如此，它听起来效率低下且速度缓慢。Instagram 等应用程序的上传速度为何如此之快？我正在尝试复制这种上传。请指导我正确的方向。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:26:24.263

您可能知道，上传速度始终与您使用的连接类型的速度有关。即使是最好的上传技术，在连接速度很慢时也会很慢（例如 GPRS 或 EDGE，如果网络覆盖不好，即使 3G 也会很慢）。

要更快/更好地上传大量数据，您可以做的一件事是使用 ZIP 或您希望的任何其他文件压缩格式压缩您发送的数据，甚至开发您自己的压缩算法（您可能不想这样做;-) ）。

例如，如果您想减少 HTTP/HTTPS 连接的开销，您可以编写自己的数据交换协议，在客户端/服务器端实现它并更快地上传。这将是很多工作，因为您不仅要为协议本身做所有的实现工作，因为您需要添加安全性等。但是即使您选择创建一个协议，如开头所说，它也会很慢如果连接很慢。

**更新：** Mike Krieger（Instagram 的联合创始人）的一次演讲，他在其中谈到了你的问题，我刚刚遇到了[https://speakerdeck.com/u/mikeyk/p/secrets-to-lightning-fast-mobile-design?slide =1](https://speakerdeck.com/u/mikeyk/p/secrets-to-lightning-fast-mobile-design?slide=1)。

您认为它如此之快的原因是，他们甚至在请求（在这种情况下为上传）完成之前更新了 UI。这就是迈克所说的“乐观”。如果请求失败，您仍然可以通知用户，但同时让他感到高效并表现得像请求成功完成一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T15:36:51.853

您绝对应该研究 AFNetworking。这是我将图像上传到 php Web 服务的示例：

```
NSData *imageData = UIImagePNGRepresentation(pageImage);

AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://www.SERVER.com"]];

//You can add POST parameteres here
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        author, @"author",
                        title, @"title",
                        nil];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/PATH/TO/WEBSERVICE.php" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {

//This is the image
    [formData appendPartWithFileData: imageData name:@"cover_image" fileName:@"temp.png" mimeType:@"image/png"];

}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

//Setup Upload block to return progress of file upload
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    float progress = totalBytesWritten / (float)totalBytesExpectedToWrite;
    NSLog(@"Upload Percentage: %f %%", progress*100);
}];

//Setup Completeion block to return successful or failure
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *response = [operation responseString];
    NSLog(@"response: [%@]",response);
    //Code to run after webservice returns success response code

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@", [operation error]);
    //Code to Run if Failed

}];

[operation start]; 
```

**编辑-**我还使用 MBProgressHUD 向用户显示上传时间较长的上传。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T15:17:20.800

这是一个非常开放式的问题，但这里有几点需要注意：

“快速上传”取决于用户的连接和服务器带宽，所以我不会涉及。

您可以通过创建 NSData 对象并将它们附加到 POST 请求来上传照片（和其他文件）。已经有大量用于上传 NSData 的示例代码，但要转换 UIImage，您将执行以下操作：

```
NSData *imageData = UIImagePNGRepresentation(image); 
```

您可以使用内置的 Cocoa 类 (NSMutableURLRequest) 和 3rd 方网络类（例如[AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ) - 只需向下滚动到文件上传）来执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T15:16:55.723

当我将简单数据发送到我的网络服务器时，我使用以下方法： 使用 ASIHttpRequest 框架连接到您的服务器。在 HTTP Post body 中发送数据，这在 ASIHttpRequest 框架中很容易做到。在发送数据之前，您需要将数据转换为 XML 或 JSON（为此使用 SBJson 框架）。然后我编写解析 json 或 xml 的 php 脚本，然后使用自定义 SQL 脚本将此数据输入到我的数据库中。如果您在任何这些过程中需要它们，我可以给您代码片段......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T15:14:12.930

在我看来，用你的第一句话，你基本上已经回答了你自己的问题。

您需要在服务器上接收文件，然后编写客户端代码来匹配。它可以像 ftp 一样简单，也可以像自定义协议一样复杂，具体取决于您需要的安全性和控制。

# iis - IIS 7.5 连接问题

> ID：11191973
> 
> 赞同：2
> 
> 时间：2012-06-25T15:09:35.273
> 
> 标签：iis, iis-7.5, freeze

在过去的几周里，我的网站挂了。连接增加但似乎永远不会释放。一旦达到 700 多个当前连接（使用性能工具），整个站点就会挂起，我别无选择，只能进行 iisreset 以使其再次运行。通常在高峰时间大约有 100 个并发连接。停止发布时，事件日志中没有错误或警告，因此没有帮助。在将新的 DLL 复制到旧的 DLL 以进行站点更新后，此问题一直在发生。我只有一台服务器，所以别无选择，只能实时复制。但是在今天的情况下，更新后很好，但问题发生在两个小时后。它是 Windows 2008 R2 64 位上的 .NET 4.5 站点。有什么办法可以查出是什么原因 像其他日志文件一样在某个地方或发生时我应该尝试做的事情？我尝试的是回收应用程序池（没有帮助），关闭应用程序池并重新打开（不打开，给出异常），重新启动站点（没有帮助）和 iisreset（适用于每个时间）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:36:32.290

通常，当您看到这些综合症时，某些请求会“卡住”，因为 app.pool 回收和站点重新启动通常会等待挂起的请求完成（优雅退出），而 iisreset 实际上会在 20 后杀死 w3wp.exe 进程（或30？）秒，如果它没有自行退出（非优雅退出），这就是 iisreset 适合你的原因。

列出活动请求（appcmd.exe list request /?）应该可以让您了解为什么会发生这种情况。

# jboss - 使用 JBoss 7.1 构建的真实 EAR 进行 Arquillian 测试

> ID：11191976
> 
> 赞同：4
> 
> 时间：2012-06-25T15:09:48.170
> 
> 标签：jboss, jboss7.x, jboss-arquillian

我想用 Arquillian 测试一个 Java EE 应用程序。一个简单的设置是把一些测试类放到 Arquillian 管理的服务器上来测试它们。

现在，我想使用在构建过程中构建的 EAR 文件。和

```
@Deployment
public static EnterpriseArchive createDeployment() {
    File earFile = ...
    EnterpriseArchive archive = ShrinkWrap.createFromZipFile(EnterpriseArchive.class, earFile);
    return archive;
} 
```

我可以通过 Arquillian 将 EAR 放到 JBoss 中。我看到了部署，部署期间没有错误。只有 Arquillian 返回一个错误，它找不到测试类，这显然是可以的。

现在是在哪里放置测试类的问题。我可以将测试类放入 Arquillian 放入 EAR 的 test.war 中，但我得到了 ArquillianServletRunner not found 异常。当我将测试类作为模块或库放入 JAR 文件中时，当作为模块放入时找不到测试类，或者由于依赖问题而作为库放入时注入不起作用。

我必须把测试课放在哪里？？？

我的 arquillian.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://jboss.org/schema/arquillian"
    xsi:schemaLocation="http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd">

   <defaultProtocol type="Servlet 3.0" />

    <container qualifier="jboss7" default="true">
        <configuration>
            <property name="jbossHome">${cargo.dir}/jboss-as-dist-7.1.1.Final/jboss-as-7.1.1.Final</property>
        </configuration>
    </container>

    <engine>
        <property name="deploymentExportPath">target/deployments</property>
    </engine>

</arquillian> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:53:54.003

您可以使用 @Deployment(testable = false) 在客户端运行您的测试类，但这有一个缺点，即您目前无法使用持久性扩展（可能还有其他）。

我的示例代码：

```
@RunWith(Arquillian.class)
public class PersonWebServiceIT {

    private PersonWebService service;

    @Deployment(testable = false)
    public static Archive<?> createDeployment() {
        return ShrinkWrap
                .create(ZipImporter.class, "test.war")
                .importFrom(
                        new File("simple-webservice-1.0.0-SNAPSHOT.war"))
                .as(WebArchive.class);
    }

    @Test
    public void testFindPersons(@ArquillianResource URL deploymentUrl) {
        ....
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T20:26:16.633

把测试课放在耳朵里的战争确实对我有用

```
WebArchive war = ear.getAsType(WebArchive.class, "/mywarname.war");
war.addClass(MyTestClass.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T06:41:56.870

当我处理现有的 EAR 时，我更喜欢将运行测试的 WAR 与我放入特殊 JAR 以及其他测试 EJB 的实际测试分开。我已经发布了一个示例，如何`application.xml`在类似问题下进行必要的操作：[https ://stackoverflow.com/a/17036383/1667977](https://stackoverflow.com/a/17036383/1667977)

# scala - Scala 中的模棱两可的标识符：在 SLS 中这是在哪里定义的？

> ID：11191982
> 
> 赞同：0
> 
> 时间：2012-06-25T15:10:03.667
> 
> 标签：scala

考虑 Scala 类的定义`p.X`，`T`并且`Y`：

```
package p {
  object X {
    val y: Int = 21
  }
}

class T { val X = new Y(42) }
class Y(val y: Int)
val p = new T 
```

在这些定义之后，问题出现了标识符`p.X.y`指的是什么：

1.  `y=21`到class中的值`p.X`，或
2.  到值`X.y=42`引用的值`p`？

测试显示，采用了变体 2。

问题：这在 SLS 中是在哪里定义的？

**编辑**

为了澄清这种情况，我已将上述示例更改/扩展为以下编译单元：

```
package p {
  object X { val y: Int = 21 }
}

class T { val X = new Y(42) }
class Y(val y: Int)
object p extends T

object Test extends App { println(p.X.y) } 
```

我不清楚 SLS 第 2 节的定义如何在这里应用。应用程序的范围`Test`没有定义绑定，并且在编译单元的范围内，两个绑定`object p`和`package p`（或对象`p.x`）似乎具有相同的优先级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:20:49.913

[SLS](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 2 章，**标识符、名称和范围**

> 某些内部作用域中的绑定会隐藏相同作用域中较低优先级的绑定以及外部作用域中相同或较低优先级的绑定

本节继续给出*优先规则*和一些示例。`p`在您的示例中， (thre *reference* )的最后声明隐藏了前者 (the *object* )

# mysql - 使用 Ajax 向 MySQL 提交表单

> ID：11191983
> 
> 赞同：0
> 
> 时间：2012-06-25T15:10:08.850
> 
> 标签：mysql, forms, jquery

我想知道是否有人可以帮助我。

一段时间以来，我一直在寻找一个教程/文章，它向我展示了如何使用 AJAX 设置表单并将用户输入提交到 mySQL 数据库。

虽然这并没有告诉我如何将数据发送到数据库，[但这篇](http://www.elated.com/articles/slick-ajax-contact-form-jquery-php/)文章为我提供了一个很好的起点，它也给了我关于在线消息的“外观和感觉”，我想将其合并到我的表单中.

我现在已经开始调整示例脚本，但在将数据提交到我的数据库时遇到了困难。

在表格中，我更改了此部分：

```
 $.ajax( {
          url: contactForm.attr( 'action' ) + "?ajax=true",
          type: contactForm.attr( 'method' ),
          data: contactForm.serialize(),
          success: submitFinished
        } );

  } 
```

至

```
 $.ajax( {
      url: contactForm.attr( 'savecontact.php' ) + "?ajax=true",
      type: contactForm.attr( 'post' ),
      data: contactForm.serialize(),
      success: submitFinished
    } );
  } 
```

在 PHP 脚本中，我将其更改为现在阅读：

```
<?php

// Read the form values
$success = false;
$senderName = isset( $_POST['senderName']);
$senderEmail = isset( $_POST['senderEmail']);
$message = isset( $_POST['message']);

if ( $senderName && $senderEmail && $message ) {

    $query = "INSERT INTO `contact` (senderName, senderEmail, message) VALUES ('$senderName', '$senderEmail', '$message')";  
mysql_query($query) or die(mysql_error());
}           
// Return an appropriate response to the browser
if ( isset($_GET["ajax"]) ) {
  echo $success ? "success" : "error";
} else {
?>
<html>
  <head>
    <title>Thanks!</title>
  </head>
  <body>
  <?php if ( $success ) echo "<p>Thanks for sending your message! We'll get back to you shortly.</p>" ?>
  <?php if ( !$success ) echo "<p>There was a problem sending your message. Please try again.</p>" ?>
  <p>Click your browser's Back button to return to the page.</p>
  </body>
</html>
<?php
}
?> 
```

我遇到的问题是，在发送表单时，`sending`消息出现在屏幕上并继续停留在此消息上，并且没有数据发送到我的数据库，我必须承认我真的不知道为什么。

我很感激，由于我缺乏经验，可能有一种更简单的方法来实现我想要的结果，我可能看得太简单了，但我只是想知道是否有人可以看看这个并让我知道我要去哪里错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:11:54.760

改变：

```
contactForm.attr( 'savecontact.php' ) 
```

至：

```
contactForm.attr( 'action' ) 
```

和

```
type: contactForm.attr( 'post' ), 
```

至

```
type: contactForm.attr( 'method' ), 
```

由于`attr`用于读取标签属性。在这种情况下，您的表单标签的`action`属性。

根据您的表单`method`属性，您将不得不使用`$_POST`or`$_GET`数组来获取通过 AJAX 提交的值，或者您可能还想使用`$_REQUEST`（虽然不推荐的方式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:04:46.717

除了 Blaster 的回答，您的 php 代码还需要一些修复：

```
$senderName = isset( $_POST['senderName']);
$senderEmail = isset( $_POST['senderEmail']);
$message = isset( $_POST['message']); 
```

在这里，您将这些变量设置为是否设置了 POST 变量的布尔值，而不是实际值。

```
$senderName = mysql_real_escape_string($_POST['senderName']);
$senderEmail = mysql_real_escape_string($_POST['senderEmail']);
$message = mysql_real_escape_string($_POST['message']); 
```

这应该可以使事情正常进行，但容易受到 SQL 注入的影响。这些`mysql_*`函数已被弃用，建议学习 PDO 或 MySQLi 和准备好的语句。有关更多信息，请参阅PHP 手册中的[此页面](http://php.net/manual/en/function.mysql-connect.php)。

# git - Git说自动合并失败但是当我检查文件或运行合并工具时没有冲突，它们已正确解决

> ID：11191984
> 
> 赞同：5
> 
> 时间：2012-06-25T15:10:09.677
> 
> 标签：git, version-control, merge, versioning

如描述中所述。当合并冲突被自动解决时，我什至不想被提示解决合并冲突。

我的场景是我将包含固定文本字符串的行添加到一个分支上的文本文件中，在同一个分支上执行一些其他提交，然后在另一个分支上选择添加固定文本的更改，然后与另一个分支。

我这样做是为了测试，因为在我的日常工作中我经常遇到冲突，但是当我使用我的合并工具时它说没有冲突，所以我只是关闭它并手动提交。

问题是，当实际上 git 已经正确合并到更改中时，系统会提示我执行额外的步骤。（我什至手动检查了文件，以确保不是我的合并工具在解决问题，并且确实冲突已经在文件中解决了）。

我尝试使用“--commit”参数来 git merge，但它没有效果。

似乎 git 无法根据消息自动合并更改，但实际上它实际上正确合并了文件。

有没有办法自动合并这些类型的冲突并在没有人工干预的情况下继续？

我正在使用 git 版本 1.7.10.msysgit.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:47:33.620

这可能无法回答您的问题，但是如果您知道要合并的内容，则可以通过给它一个策略（和选项），从而使您根本不需要解决冲突，具体取决于您要合并的内容。非快进合并通常由递归策略完成，这很好，但您也可以给它一个选项。

如果你合并使用

```
$ git merge branchB --strategy=recursive -Xours 
```

然后，您通常会遇到的每个冲突都会自动使用您的线路解决。当您知道自己不应该遇到冲突时，这可能会在您的情况下起作用，但无论如何都会遇到冲突。就像我说的，这会自动解决与你的版本的冲突，所以只有在你事先知道你的版本是需要的时候才使用它。

自动修复与空白有关的任何冲突的更安全的选项是`ignore-all-space`. 所以：

```
$ git merge branchB --strategy=recursive -Xignore-all-space 
```

我推荐这个，因为它非常安全，它可能对你的情况有所帮助，并且它节省了很多要合并的文件将整个内容拆分为本地和远程的情况，这将使解决冲突变得非常困难。

# qt - 如何在不冻结 gui 的情况下运行 QProcess 的同步链？

> ID：11191988
> 
> 赞同：1
> 
> 时间：2012-06-25T15:10:19.457
> 
> 标签：qt, freeze, synchronous, qprocess

我想在一些外部程序的帮助下优化图像。程序必须一个接一个地执行，其中一些取决于最后一个程序的输出，其中一些取决于图像的特性。

我知道，我可以使用信号，但这在这里不是很有用，因为我必须为每个外部程序使用几十个函数和信号，其中一些甚至多次取决于调用程序的位置在链中。一个一个地执行它们会容易得多。但是，如果我这样做，即使在所有进程完成之前不显示状态消息，gui 也会立即冻结。我还可以做些什么？

```
ui->status->setText("Do something with program 1");

QProcess *proc1 = new QProcess;
proc1->setReadChannelMode(QProcess::SeparateChannels);
proc1->start("program 1 -args", QIODevice::ReadWrite);

while(!proc1->waitForFinished(10))
    ;

ui->status->setText("Do something with program 2");

QProcess *proc2 = new QProcess;
proc2->setReadChannelMode(QProcess::SeparateChannels);
proc2->start("program 2 -args", QIODevice::ReadWrite);

while(!proc2->waitForFinished(10))
    ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:27:42.833

在这种情况下，使用 Signals 是“正确”的方式。你只需要链接它们。

```
[...]
ui->status->setText("Do something with program 1");
proc1.setReadChannelMode(QProcess::SeparateChannels);
proc1.start("program 1 -args", QIODevice::ReadWrite);
connect(proc1, SIGNAL(finished(int, QProcess::ExitStatus)), this, SLOT(finishedProc1()))
[...]

void finishedProc1()
{
   ui->status->setText("Do something with program 2");
   proc2.setReadChannelMode(QProcess::SeparateChannels);
   proc2.start("program 2 -args", QIODevice::ReadWrite);
   connect(proc2, SIGNAL(finished(int, QProcess::ExitStatus)), this, SLOT(finishedProc2()))
}

void finishedProc2()
{
  [...]
} 
```

或者，您可以在等待时在 QApplication 中调用 processEvents，或者在不同的 QThread 中执行整个操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:24:31.603

创建工作线程（几个线程，如果您需要并行处理）并在那里等待。GUI 将不会被阻止。

# javascript - 如何在不调用 onBlur 事件的情况下强制模糊

> ID：11191989
> 
> 赞同：2
> 
> 时间：2012-06-25T15:10:20.283
> 
> 标签：javascript, jquery

如何强制模糊，但不调用 JavaScript/jQuery 中的 onBlur 事件？

我将尝试向您描述我需要它的用途：

*   当调用 onBlur 时，我通过 jQuery 调用 PHP 脚本并验证输入。如果有问题，它会返回一条消息，然后我将其显示在 jQuery 脚本中。
*   如果未填充模糊字段，则脚本应将用户重点放在该字段上。

问题是，如果您按 TAB 更改字段，并且您的第一个字段未填充，脚本会将您聚焦回来，但随后从第二个字段调用 onBlur 也未填充，然后它会导致无限循环。

所以，我想在不调用 onBlur 事件的情况下模糊一个字段并聚焦到另一个字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:15:37.560

这不是您问题中指定的答案，但我建议您做的（从某种 UX 角度来看）是取消自动重新聚焦无效输入，而是标记无效字段（我可以建议例如红色？）。现在，您可以处理（可以说）更简单的防止表单提交无效数据的问题，而不是防止事件的*自然浏览器行为*类型的问题。

此外，我敢说自动重新对焦对用户来说很**烦人**。想象一下切换到第二个字段，开始输入，然后突然*yoink！*您被拖到第一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:15:48.660

为什么不只使用“更改”和“keyup”而不是模糊？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T15:17:45.357

我同意上面理查德的观点，没有什么比在打字过程中失去焦点更烦人的了，但是如果您确实需要这样做（由于客户要求等） - 在自动聚焦该字段的代码中，`onBlur`暂时禁用该功能直到您聚焦该领域，然后重新启用它。

# iphone - XMPP 框架：无法接收我的消息

> ID：11191990
> 
> 赞同：1
> 
> 时间：2012-06-25T15:10:28.577
> 
> 标签：iphone, ios, xmpp, xmppframework

我正在研究 xmpp 框架。我已经完成了大部分最初的事情。我创建了流，连接它并获得身份验证。现在我正在从我的应用程序向另一个用户发送好友请求。应用程序显示状态已发送。当我得到名册时，它会在那里显示一个条目。但在其他系统上，我没有得到任何优先权或任何东西。我试图发送消息消息也没有被其他客户端接收。

比我在 ichat 中使用一个 id 并向该 id 发送好友请求。哇，我可以在 ichat 上看到好友请求。我接受来自 ichat 的请求 :( 我的应用程序没有通知。

如果我向 ichat 发送消息。iChat 中显示的消息。但是当我从 ichat 向我的应用程序发送消息时。我的应用程序没有收到任何委托或什么也没有。

我不知道为什么会这样。

我正在使用非 ARC xmpp 框架。

请大家帮帮我。我被严重困在其中:(

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:28:45.117

您是否考虑在获得身份验证后发送出席信息？如果您通过身份验证但未发送优先级，则服务器将认为您离线，并且发送给您的所有消息都将延迟存储在服务器上。

发送您的存在，看看魔术。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:34:22.370

我不是 iPhone 开发人员，所以我无法解释编程。

在 XMPP 中，Presence 订阅有两次握手。就像当第一个用户向第二个用户发送请求时，它会要求第二个用户订阅在线状态。当第二个用户接受时，第一个用户订阅第二个用户的存在。所以他可以获得第二个用户的所有存在。它被称为第一个用户的“to”订阅类型。现在第二个用户向第一个用户请求在线订阅并首先接受请求，然后这个“to”订阅类型更改为“both”订阅类型。现在两个用户都可以互相存在。否则只有第一个用户可以得到第二个用户的存在。

对于消息，侦听器必须存在一些问题。

# clojure - Clojure 中带有闭包和 eval 的函数

> ID：11191992
> 
> 赞同：2
> 
> 时间：2012-06-25T15:10:34.373
> 
> 标签：clojure, closures, eval

与闭包一起使用时，函数似乎会中断`eval`。

```
(eval {:fn (let [x "foo"] (fn [] "x"))})
;=> {:fn #<user$eval14716$fn__14717 user$eval14716$fn__14717@1ddd735>}

(eval {:fn (let [x "foo"] (fn [] x))})
;=> IllegalArgumentException No matching ctor found for class user$eval14740$fn__14741 
;   clojure.lang.Reflector.invokeConstructor (Reflector.java:166) 
```

我对 Clojure（或闭包）了解得不够多，不知道这是一个错误还是故意不允许的东西 - 任何人都可以对此有所了解吗？

编辑：为了清楚起见，我专门谈论`eval`处理函数*对象*的方式。AFAIK`eval`实际上是为处理 java 对象而设计的，包括函数；clojure 网站上给出的示例`(eval (list + 1 2 3))`- 将函数对象传递到`eval`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T02:19:02.637

Cloure`eval`并不完全支持函数对象。甚至不一定是导致问题的闭包。

例如，这在 Clojure **1.0.0**中不起作用：

```
(eval {:fn (fn [x] x)}) 
```

但这确实：

```
(eval (fn [x] x)) 
```

第一个例子得到了修复。以下也有效：

```
(eval (let [x "foo"] (fn [] x))) 
```

但是以下仍然不起作用：

```
(eval {:fn (let [x "foo"] (fn [] x))}) 
```

我不能将它固定到编译器中的一行，但它是关于如何在不同的上下文中处理文字对象（clojure.lang.Compiler$ObjExpr）`eval`：例如在表达式的“顶部”与在另一个数据结构中。

一般来说，我认为，`eval`无论它们是否是闭包，你都不能依赖于能够在 Clojure 中运行对象。它恰好适用于一些简单的示例，主要是为了简化对`(eval (list + 1 2))`. 宏应始终将文字源代码作为数据结构返回，而不是编译函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:37:44.250

尝试将您的论点引用到 eval：

```
(eval '{:fn (let [x "foo"] (fn [] x))})
;=> {:fn #<user$eval345$fn__346 user$eval345$fn__346@17b6dd83>}
((:fn *1))
;=> "foo" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T07:29:08.937

这不是错误。`(eval (list + 1 2 3))`与“闭包”等效的是`(eval (list fn [] "foo"))`，*不是* `(eval (fn [] "foo"))`。

并且`(eval (list fn [] "foo")) => Can't take value of a macro: #'clojure.core/fn`，再次表明您不应该做那样的事情（无论如何也不需要这样做）。

# vb.net - 多个 OpenTK 控件：为什么最初只渲染一个？

> ID：11191993
> 
> 赞同：1
> 
> 时间：2012-06-25T15:10:37.100
> 
> 标签：vb.net, opengl, opentk

我正在尝试实现 2+ 独立的 OpenTK GLControls。在表单加载时，我希望它们在加载时都被渲染和显示。在下图中，您会看到我的问题。一个被正确渲染，但另一个未被渲染。

mouse_drag 之前的 GL 屏幕截图

![mouse_drag 之前的 GL 屏幕截图](../Images/4824de34077b2381f634ccfe80b3b9f7.png)

对错误控件执行 mouse_drag 操作将使其正确呈现。

mouse_drag 后的 GL 屏幕截图

![mouse_drag 后的 GL 屏幕截图](../Images/daab3d3e0f35d0591141a9a512ba1152.png)

**这是我的主要表单的代码。它创建并添加 GLControl 对象：**

```
Imports System
Imports System.Collections.Generic
Imports System.Text
Imports System.Threading.Tasks
Imports OpenTK
Imports OpenTK.Graphics
Imports OpenTK.Graphics.OpenGL

Public Class MultipleDisplay

    Private Sub MultipleDisplay_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        'Creating and adding the controls.
        'The load event prompts the user to choose a file to build the objects.
        Dim task2 As GLControlTask = New GLControlTask()
        task2.MakeCurrent()
        task2.Width = 400
        task2.Height = 400
        task2.Top = 0
        task2.Left = 450
        Me.Controls.Add(task2)

        'The load event prompts the user to choose a file to build the objects.
        Dim task1 As GLControlTask = New GLControlTask()
        task1.MakeCurrent()
        task1.Width = 400
        task1.Height = 400
        task1.Top = 0
        task1.Left = 0
        Me.Controls.Add(task1)

        'INITIAL PAINT
        task2.MakeCurrent()
        task2.Invalidate()

        task1.MakeCurrent()
        task1.Invalidate()

    End Sub
End Class 
```

**这是扩展 GLControl 类的 GLControlTask​​ 类的代码：**

```
Imports System
Imports System.Collections.Generic
Imports System.Text
Imports System.Threading.Tasks
Imports OpenTK
Imports OpenTK.Graphics
Imports OpenTK.Graphics.OpenGL

Public Class GLControlTask
    Inherits GLControl

    Private arm As Arm

    Private rotator As ArcBall

    Private glLoaded As Boolean = False
    Private cameraAngleX As Single
    Private cameraAngleY As Single
    Private cameraAngleZ As Single
    Private prevMouseX As Integer
    Private prevMouseY As Integer
    Private glMouseDown As Boolean

    Private lightAngleX As Single
    Private lightAngleY As Single
    Private lightDistance As Single

    'Perspective Attributes
    Private eyeOffset As Vector3
    Private boxRadius As Single
    Private boxOffset As Vector3

    Private isPerspective As Boolean
    Private hasLighting As Boolean
    Private hasFog As Boolean

    Public Sub New()
        arm = New Arm()
        arm.loadFromXML()
        'MsgBox(arm.ToString())

        isPerspective = False
        hasLighting = True
        hasFog = False

        eyeOffset.X = 0
        eyeOffset.Y = 0
        eyeOffset.Z = 1000.0F

        lightDistance = 10000.0F
        lightAngleX = 0.0F
        lightAngleY = 0.0F

        boxRadius = 2.5F
    End Sub

    Private Sub Me_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.Load
        glLoaded = True

        GL.ClearColor(Color.Black)
        rotator = New ArcBall(Me)
        Me_Resize(Nothing, New EventArgs())
    End Sub

    Private Sub Me_Resize(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.Resize
        If glLoaded = False Then
            Return
        End If

        GL.Viewport(0, 0, Me.Width, Me.Height)
        rotator.windowResized()
        Me.Invalidate()
    End Sub

    'PAINT CODE REMOVED

    Private Sub On_MouseDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseDown
        glMouseDown = True
        Me.MakeCurrent()
        prevMouseX = e.X
        prevMouseY = e.Y

        rotator.mousePressed(e.X, e.Y)
    End Sub

    Private Sub Me_MouseUp(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseUp
        glMouseDown = False
    End Sub

    Private Sub Me_MouseMove(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
        If glMouseDown = False Then
            Return
        End If

        If e.Button = MouseButtons.Left Then
            rotator.mouseDragged(e.X, e.Y)
            Me.Invalidate()
        End If

        prevMouseX = e.X
        prevMouseY = e.Y
    End Sub

    Private Function deg2Rad(ByVal degrees As Double) As Double
        Return degrees * Math.PI / 180
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:48:20.150

我正在制作的项目中遇到类似错误，问题在于 windows7-openTK 兼容性。首先，在使用 openTK 时，您似乎永远不应该使用 Windows7 航空主题。就我而言，这不是唯一的解决方案。您还必须尝试更新您的 GPU 的最新驱动程序（我在 OpenTK 论坛上看到过一些帖子，人们修复了类似的错误绘图问题）但在我的情况下仍然没有工作。因为我有一个非常旧的 GPU，所以我需要购买一个新的，这样我就解决了我所有的图形问题。

可能不是这样，但我在您的代码中找不到任何错误。如果您可以在 XP 机器上测试您的项目，并且如果它在那里正常工作，请尝试更新您的图形驱动程序。

我也看到人们使用 glColor4 函数而不是 GLcolor3 来解决这个问题。

我希望它有所帮助。

# android - 如何在 Monkeyrunner 中使用 Android viewClient 找出视图的真实坐标？

> ID：11191994
> 
> 赞同：0
> 
> 时间：2012-06-25T15:10:38.987
> 
> 标签：android, jython, android-view, monkeyrunner, ui-testing

在 Monkeyrunner 中使用 dtmilano Android vieClient 在 android UI 中查找文本的 (x,y) 坐标。

我只使用以下代码获得相对坐标：-

```
vc = ViewClient(devid,deviceid)
dump=vc.dump()
peer_pos = vc.findViewWithAttribute('text:mText',peer_name)
x, y) = peer_pos.getXY() 
```

（x，y）返回总是不正确的。如何找出真正的坐标。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:10:32.693

你看过这里的指南[吗](http://dtmilano.blogspot.com/2012/02/monkeyrunner-interacting-with-views.html)？它提供了将 ViewClient 与 MonkeyRunner 一起使用的介绍，并且可能会有所帮助。

# java - 在类本身内创建一个实例

> ID：11191995
> 
> 赞同：3
> 
> 时间：2012-06-25T15:10:44.963
> 
> 标签：java, instantiation

当赋值语句在 处执行时发生了什么`Line 4`，编译器是否忽略`new operator`并保持`foo`变量为 null 或者发生其他事情来处理这个尴尬的时刻？

```
 public class Foo {
 // creating an instance before its constructor has been invoked, suppose the "initializing"  
 // gets printed in constructor as a result of the next line, of course it will not print it
    private  Foo foo = new Foo();//Line 4

    public Foo() {
        System.out.println("initializing");
    }
} 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:13:00.097

编译器在这里没有做任何特别的事情。它可能会警告您这不起作用，但这很难确定。

你会得到一个 StackOverflowError。

```
public class Foo {
    private  Foo foo = new Foo();//Line 4

    public Foo() {
        System.out.println("initializing");
    }

    public static void main(String... args) {
        Foo foo = new Foo();
    }
} 
```

印刷

```
Exception in thread "main" java.lang.StackOverflowError
    at Foo.<init>(Foo.java:9)
    at Foo.<init>(Foo.java:7)
    at Foo.<init>(Foo.java:7)
    .. many deleted ...
    at Foo.<init>(Foo.java:7)
    at Foo.<init>(Foo.java:7) 
```

# c++ - 通过私有 CoCreateInstance 使用 DirectShow 过滤器而不注册它

> ID：11191996
> 
> 赞同：6
> 
> 时间：2012-06-25T15:10:45.190
> 
> 标签：c++, encoding, com, directshow, mpeg-4

所以基本上我读了这个，[http:](http://www.gdcl.co.uk/2011/June/UnregisteredFilters.htm) //www.gdcl.co.uk/2011/June/UnregisteredFilters.htm 。

它告诉您如何在不注册过滤器的情况下使用它们。有两种方法，新方法和使用私有 CoCreateInstance。我试图使用 CoCreateInstance 方法。

在该站点的示例中，代码被列为，

```
IUnknownPtr pUnk;
HRESULT hr = CreateObjectFromPath(TEXT("c:\\path\\to\\myfilter.dll"), IID_MyFilter, &pUnk);
if (SUCCEEDED(hr))
{
    IBaseFilterPtr pFilter = pUnk;
    pGraph->AddFilter(pFilter, L"Private Filter");
    pGraph->RenderFile(pMediaClip, NULL);
} 
```

我的代码如下，

```
IUnknownPtr pUnk;
HRESULT hr = CreateObjectFromPath(TEXT("c:\\filters\\mp4demux.dll"), IID_BaseFilter, &pUnk);
if (SUCCEEDED(hr))
{
  //add functionality
} 
```

我猜 IID_BaseFilter 是我应该使用的，它是我用于其他过滤器的。但我收到错误“ClassFactory 无法提供请求的类”。

我在这里错过了什么吗？任何帮助将不胜感激。提前致谢！

编辑：代码

```
IBaseFilter *pSrc = NULL, *pSrc2 = NULL, *pWaveDest = NULL, *pWriter = NULL;
IFileSinkFilter *pSink= NULL;
IGraphBuilder *pGraph;
ICaptureGraphBuilder2 *pBuild;
IMediaControl *pControl = NULL;
// This example omits error handling.

hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER,
    IID_ICaptureGraphBuilder2, (void**)&pBuild);

hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void**)&pGraph);
//Initialize the Capture Graph Builder
hr = pBuild->SetFiltergraph(pGraph);

// Not shown: Use the System Device Enumerator to create the 
// audio capture filter.
hr = pMoniker->BindToObject(0, 0, IID_IBaseFilter, (void**)&pSrc);
hr = pGraph->AddFilter(pSrc, L"VideooCap");

hr = pMoniker2->BindToObject(0, 0, IID_IBaseFilter, (void**)&pSrc2);
hr = pGraph->AddFilter(pSrc2, L"AudioCap");

IBaseFilter *pMux;
//IFileSinkFilter *pSink;
hr = pBuild->SetOutputFileName(
    &MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.
    L"C:\\wav\\Example2.mp4", // File name.
    &pMux,              // Receives a pointer to the mux.
    NULL);              // (Optional) Receives a pointer to the file sink.

IUnknownPtr pUnk;
//static CLSID const clsid = { 0x025BE2E4, 0x1787, 0x4DA4, { 0xA5,0x85,0xC5,0xB2,0xB9,0xEE,0xB5,0x7C } };

static CLSID const clsid = { 0x5FD85181, 0xE542, 0x4e52, { 0x8D,0x9D,0x5D,0x61,0x3C,0x30,0x13,0x1B } };
//5FD85181-E542-4e52-8D9D5D613C30131B
HRESULT hr = CreateObjectFromPath(TEXT("c:\\filters\\mp4mux.dll"), clsid, &pUnk);
if (SUCCEEDED(hr))
{
    IBaseFilterPtr pFilter = pUnk;
    HRESULT hr = pGraph->AddFilter(pFilter, L"Private Filter");
}

hr = pBuild->RenderStream(
    NULL,//NULL,//&PIN_CATEGORY_CAPTURE, // Pin category.
    NULL,//&MEDIATYPE_Interleaved,//NULL,//&MEDIATYPE_Audio,      // Media type.
    pSrc,                  // Capture filter.
    NULL,                  // Intermediate filter (optional).
    pMux);                 // Mux or file sink filter.

hr = pBuild->RenderStream(
    NULL,//NULL,//&PIN_CATEGORY_CAPTURE, // Pin category.
    NULL,//&MEDIATYPE_Interleaved,//NULL,//&MEDIATYPE_Audio,      // Media type.
    pSrc2,                  // Capture filter.
    NULL,                  // Intermediate filter (optional).
    pMux);                 // Mux or file sink filter.

    IMediaControl *pMC = NULL;
    hr = pGraph->QueryInterface(IID_IMediaControl, (void **)&pMC);
    printf("START");  
    hr = pMC->Run();
    Sleep(4000);
      hr = pMC->Stop();
    printf("END");  
CoUninitialize();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:35:20.773

您应该重新阅读[Using Filters without Registration](http://www.gdcl.co.uk/2011/June/UnregisteredFilters.htm)。第二个参数是`CLSID`类标识符，不是接口标识符（`IBaseFilter`）。

对于 GDCL MPEG-4 Demultiplexer，它是这样的：

```
class __declspec(uuid("025BE2E4-1787-4DA4-A585-C5B2B9EEB57C")) GdclMp4Demux; // GDCL Mpeg-4 Demultiplexor
... = CreateObjectFromPath(..., __uuidof(GdclMp4Demux), ...); 
```

# c# - 使用 Server.Transfer 时是否会再次执行整个 Asp.Net 生命周期？

> ID：11191999
> 
> 赞同：5
> 
> 时间：2012-06-25T15:10:52.967
> 
> 标签：c#, asp.net

我了解 Server.Transfer 不会往返于请求客户端。

我无法了解的是，控制权是否直接传递给您要转移到的新请求处理程序，或者是否或是否再次执行整个请求生命周期。

我假设使用传输 URL 再次执行整个生命周期，但想验证情况是否如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T17:22:10.840

这是我通过实验发现的。

当使用`Server.Transfer`整个请求生命周期时不会再次运行。

如果您编写自己的模块，将其挂接到请求生命周期中，然后`Server.Transfer`从该模块调用，请求生命周期的其余部分将被跳过，页面生命周期将立即开始。

在完成传输页面生命周期后，请求生命周期会随着其拆除事件重新开始。请注意，用于拆卸事件的 HtppContext 将是您从中传输的原始事件。也就是说，URL 和 QueryString 值将与原始请求相同，而不是您转移到的页面的 URL 和 QueryString 值。

`Server.Transfer``HttpContext.Request`确实会在您转移到的页面的页面生命周期中修改对象以包含新的 URL 和 QueryString 信息。

如果您转移到一个不是页面而是基于文本的资源（例如，something.xml），则该页面的内容将完全按照其编码设置为 text/html 的方式返回。

如果您传输到一个不是页面且不是基于文本的资源（例如 something.pdf），则会引发 HttpException 错误。即使您为此资源定义了自定义处理程序，也会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:52:07.277

它只是传递，其状态完好无损。请求生命周期不会再次运行，尽管页面生命周期将为您转移到的页面运行。

[http://msdn.microsoft.com/en-us/library/ms525800(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525800(v=vs.90).aspx)

> Server.Transfer 作为 Response.Redirect 方法的有效替代品。Response.Redirect 指定浏览器请求不同的页面。因为重定向强制一个新的页面请求，浏览器向 Web 服务器发出两个请求，所以 Web 服务器处理一个额外的请求。IIS 5.0 引入了一个新函数 Server.Transfer，它将执行转移到服务器上的不同 ASP 页。这避免了额外的请求，从而获得更好的整体系统性能以及更好的用户体验。

此链接也很有帮助 -
[http://www.developer.com/net/asp/article.php/3299641/ServerTransfer-Vs-ResponseRedirect.htm](http://www.developer.com/net/asp/article.php/3299641/ServerTransfer-Vs-ResponseRedirect.htm)