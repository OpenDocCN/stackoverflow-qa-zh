# StackOverflow 问答 11495000-11495999

# php - XML / Php 读取 XML、解析、输出

> ID：11495000
> 
> 赞同：1
> 
> 时间：2012-07-15T19:37:30.553
> 
> 标签：php, xml, parsing

我正在尝试从源中提取数据，然后解析 3 个不同字段的数据：“标题”、“链接”、“描述”，然后输出数据。但是，循环似乎加载了前 10 篇文章，但随后变成了一个*永无止境的循环*。我该如何解决？

```
<?php

#Load in File
$xmlUrl ="http://sports.yahoo.com/mlb/rss.xml";
$ConvertToXml = simplexml_load_file($xmlUrl);

# -> Setup XML
$newsStory = $ConvertToXml->channel->item;

# -----> Load News Stories
for($i = 0;i<10; $i++){

    $title=$newsStory[$i]->title;
    //$link=$newsStory[$i]->link;
    $desc=$newsStory[$i]->description;

    echo '<hr>';
    echo 'Title:'.$title.'<br />';
    //echo 'Link:'.$link.'<br />';
    echo 'Description'.$desc.'<br>';
    echo '<hr>';

}

?> 
```

我正在解析的 XML： ![图像](../Images/f83531026f943eb1d48af12f21ddea79.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:42:05.137

您在 for 循环中忘记了 $ 。 `for($i = 0;$i<10; $i++) { [..] }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:44:51.870

您已经创建了一个无限循环：

```
for($i = 0;i<10; $i++){ 
```

它是无穷无尽的，因为中间的表达总是真实的：

```
i < 10 
```

它给出：*“注意：使用未定义的常量 i - 假定为 'i'”*，所以它是：

```
'i' < 10 
```

并且`"i"`总是小于，`10`因为它`0`在那个操作符上下文中求值。

在您的开发平台上启用最高级别的错误报告，以便您快速发现这些小错误。

简单的解决方案是添加缺少的`$`：

```
for ($i = 0; $i < 10; $i++) {
             ^ 
```

但实际上在整个脚本的上下文中，您可能希望有条件退出：

```
# -> Setup XML
$newsStories = $ConvertToXml->channel->item;

# -----> Load News Stories
foreach ($newsStories as $index => $newsStory) {

    if ($index === 10) break;

    $title = $newsStory->title;
    //$link = $newsStory->link;
    $description = $newsStory->description;

    echo '<hr>';
    echo 'Title:' . $title . '<br />';
    //echo 'Link:' . $link . '<br />';
    echo 'Description' . $description . '<br>';
    echo '<hr>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:43:24.820

它必须是 $i<10.. 你正在使用 i<10 ..如果你的错误报告处于正确的级别，最终也会给出一个未定义的常量通知

# c# - 如何检查当天是否是工作日

> ID：11495008
> 
> 赞同：20
> 
> 时间：2012-07-15T19:38:22.290
> 
> 标签：c#

我有需要在工作日和工作时间内运行的应用程序。

在应用程序配置中，我以格式设置了开始时间

```
Monday-Friday
9:00AM-5:30PM 
```

现在，我有一个问题如何检查当前日期是否在日期边界内（因为时间很容易 - 用`DateTime.ParseExact`简单的分支解析时间就可以了），但我不知道如何解析天数。

我试过：

```
DayOfWeek day = DateTime.Now.DayOfWeek;
if (day >= (DayOfWeek)Enum.Parse(typeof(DayOfWeek), sr.start_day) &&
    day <= (DayOfWeek)Enum.Parse(typeof(DayOfWeek), sr.end_day))
{ /* OK */ } 
```

`sr.start_day`并且`sr.end_day`是字符串

但问题发生在周末测试期间 - 显然，`DayOfWeek` `enum`星期天是一周的第一天（参考[MSDN 页面上的评论](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx "MSDN")

我想我可以用当前的代码做一些体操，但我正在寻找最易读的代码。

**编辑** 对不起误解-工作日不是从星期一到星期五-它们在配置文件中定义为字符串，甚至可以是从星期五到星期六-这破坏了我的原始代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T19:42:31.430

```
if ((day >= DayOfWeek.Monday) && (day <= DayOfWeek.Friday))
{
    // action
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-15T20:30:11.983

来自[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)对我原来的问题的评论：

> 如果结束日小于开始日，只需将 7 添加到结束日。同样，如果天数小于开始天数，则将天数加 7。

```
DayOfWeek day = DateTime.Now.DayOfWeek;
DayOfWeek start_day = (DayOfWeek)Enum.Parse(typeof(DayOfWeek), sr.start_day);
DayOfWeek end_day = (DayOfWeek)Enum.Parse(typeof(DayOfWeek), sr.end_day);

if (end_day < start_day)
    end_day += 7;

if (day < start_day)
    day += 7;

if (day >= start_day && day <= end_day)
{ 
   //Action
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-31T14:50:28.097

DateTime 的扩展

```
public static bool IsWeekend(this DateTime date)
    {
        return new[] {DayOfWeek.Sunday, DayOfWeek.Saturday}.Contains(date.DayOfWeek);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-13T02:09:59.633

这是该问题的优雅解决方案。这是一个可以很容易地导入到其他项目中的类。该编码允许程序员动态分配检查的日期并将它们作为字符串数组传递给类。数据可以来自数据库，也可以在将其传递给此类的实例进行处理时进行硬编码。如果您下班，则返回 True 值，如果您当天工作，则返回 False 值。在类下面我提供了一个简单的实现示例。此类功能：动态分配您的休息日，通过在比较字符串之前将字符串设置为小写的简单错误处理程序，轻松与具有您的工作时间表的数据库集成，其中您的休息日可能并不总是相同。轻松集成为硬编码的休假天数。

```
// The Class To Check If You're Off Work

class DayOffChecker
{
    public bool CheckDays(List<string> DaysOff)
    {
        string CurrentDay = DateTime.Now.DayOfWeek.ToString();
        CurrentDay.ToLower();
        foreach (string DayCheck in DaysOff)
        {
            DayCheck.ToLower();
            if (CurrentDay == DayCheck)
            {
                return (true);
            }
        }
        return (false);
    }
}

// Example usage code:

class Program
{
    List<string> DaysOff = List<string>();
    DaysOff.Add("Saturday");  // Add some values to our list.
    DaysOff.Add("Sunday");
    DayOffChecker CheckToday = new DayOffChecker();
    if(CheckToday.CheckDays(DaysOff))
    {
        Console.WriteLine("You're Off Today!!!");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T12:15:04.000

我们也可以遵循类似的方法来检查给定时间是否在两个小时之间。以下是算法

```
checkIfFallsInRange(index,start,end)

bool normalPattern = start <= end ;

if ( normalPattern)
   return index>=start && index<=end;
else
  return index>=start || index <=end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-18T18:52:12.653

我确定当天是否是工作日的简单解决方案是：

```
public static bool IsWorkDay(this DateTime dt)
{
    return IsWorkDay(dt, DayOfWeek.Sunday, DayOfWeek.Saturday);
}

public static bool IsWorkDay(this DateTime dt, params DayOfWeek[] noneWorkDays)
{
    return !noneWorkDays.Contains(dt.DayOfWeek);
} 
```

它假设周日/周六是非工作日。否则用户可以指定非工作日。并且是易于使用的扩展。

注意：为了避免循环，可能会创建一个位标志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-30T11:40:15.603

```
DayOfWeek Day = DateTime.Today.DayOfWeek;
int Time = DateTime.Now.Hour;
if (Day != DayOfWeek.Saturday && Day != DayOfWeek.Sunday)
 {
 if (Time >= 8 && Time <= 16)
 {
   //It is Weekdays work hours from 8 AM to 4 PM
 {
 }
else
 {
   // It is Weekend
 } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-15T19:46:34.880

您可以使用 DayOfWeek 枚举来查看日期是星期日还是星期六。[http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)我希望这会有所帮助。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-07-15T19:48:56.333

下面的行将返回“星期日”

```
string nameOfTheDay = DateTime.Now.ToString("dddd", new System.Globalization.CultureInfo("en-GB")).ToLower();

if(nameOfTheDay != "sunday" && nameOfTheDay != "saturday")
{
//Do Stuff
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-05-03T02:22:02.107

```
 public bool IsWeekend(DateTime dateToCheck)
    {
        DayOfWeek day = (DayOfWeek) dateToCheck.Day;
        return ((day == DayOfWeek.Saturday) || (day == DayOfWeek.Sunday)); 
    } 
```

# php - PHP 支付中的 Paypal API Express Checkout 错误代码 13113

> ID：11495009
> 
> 赞同：2
> 
> 时间：2012-07-15T19:38:24.047
> 
> 标签：php, paypal

我们已经使用 Paypal 沙箱尝试和测试了我们的网站，它可以完全扣除金额。

我们将 API 详细信息切换到 Paypal 和链接。我们已经尝试了几个贝宝账户，看看它是否有效（他们都有足够的资金进行交易）。

我们通过 returnUrl 页面上的 API 收到此信息 - API 调用失败

```
Array ( [TIMESTAMP] => 2012%2d07%2d15T19%3a31%3a43Z [CORRELATIONID] => 927a89205e54a           
[ACK] => Failure [VERSION] => 65%2e1 [BUILD] => 3300093 [L_ERRORCODE0] => 13113               
[L_SHORTMESSAGE0] => Buyer%20Cannot%20Pay%2e [L_LONGMESSAGE0] =>                          
The%20Buyer%20cannot%20pay%20with%20PayPal%20for%20this%20Transaction%2e [L_SEVERITYCODE0] => Error ) 
```

PHP 进行最终的 API 调用 -

```
$APIUSERNAME="*****";
$APIPASSWORD="***";
$APISIGNATURE="*****";
$ENDPOINT = "https://api-3t.paypal.com/nvp";
//$ENDPOINT     = "https://api-3t.sandbox.paypal.com/nvp";   
$VERSION      = "64"; 

//Build the Credential String:   
$cred_str = "USER=" . $APIUSERNAME . "&PWD=" . $APIPASSWORD . "&SIGNATURE=" .           
$APISIGNATURE . "&VERSION=" . $VERSION;

//Build NVP String for GetExpressCheckoutDetails   
$nvp_str = "&METHOD=GetExpressCheckoutDetails&TOKEN=" . urldecode($token); 

//Lets combine both strings then make the API call
$req_str = $cred_str . $nvp_str; $response = PPHttpPost($ENDPOINT, $req_str); 
```

上面的数组来自我从贝宝收到我的最终确认。

```
//check Response
if($doresponse['ACK'] == "Success" || $doresponse['ACK'] == "SuccessWithWarning") { 
echo "completed"; //just put to test  
include "finishtransaction.php"; //cancels my cart sessions
} else{
    echo "The API Call Failed"; print_r($doresponse); 
} 
```

谷歌上关于这个错误的信息不多，甚至在 API 错误代码中也没有。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:50:30.977

诚然，[PayPal API 错误代码](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_errorcodes)不是很有帮助。

错误代码 13113 或“买方无法使用 PayPal 支付此交易”表示 PayPal 已采取安全措施拒绝处理该交易。这可能是由于以下原因之一（还有更多，但这里有一些）：

*   买家账户中没有足够的钱
*   买家的账户中没有足够的钱，并且他们的信用卡收费出现问题（如果他们在他们的设置中设置了该设置）
*   买家已要求卖家为另一件商品退款，因此 PayPal 已阻止买家的账户向卖家转账，直到情况得到解决。
*   买家涉嫌欺诈活动，因此他们的账户被冻结。
*   由于某些其他原因，买方的帐户仅限于向特定卖方汇款
*   买家账户因某种特定原因被完全冻结

不幸的是，如果不彻底查看您的代码，没有人能告诉您太多信息。我会检查我的代码，并确保设置了所有适当的标志和不存在的东西。如果您等待几个小时后仍然出现错误（尤其是在多个/新帐户上），那么您将需要联系 PayPal。

我知道这很糟糕，但只有 PayPal 才能告诉您交易失败的确切原因。

# css - 为什么 Firefox CSS Debugger 不显示 P 元素默认边距？

> ID：11495010
> 
> 赞同：0
> 
> 时间：2012-07-15T19:38:32.040
> 
> 标签：css, firefox

我刚刚花了一个小时来解决我遇到的一个问题，即我的所有段落元素都被向下移动了。

这发生在我将设计从 jsfiddle.net 移动到我的网络主机之后。

我杀了一个小时才终于意识到我需要插入

```
p{margin:0px;} 
```

一切都很好……还差1px；

问题：

为什么jsfiddle.net没有出现这个错误？

为什么 FF CSS 调试器不让我知道那里有一个边距或它来自哪里。我不知道设置为什么，但它不是 0px；

我正在努力从“我的错误”中学习，这样我就可以知道下一次会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:48:21.743

Web 浏览器为呈现 HTML 元素设置自己的默认值。这包括边距、填充、字体大小等。当您创建没有 CSS 的 HTML 文档时，您可以看到列表、段落和标题以默认方式格式化。

调试器倾向于显示**您**在 CSS 中应用于文档的值。

为了解决这些不一致的问题（浏览器使用不同的默认值），有些人使用“重置”CSS 文件，通过尽可能设置为 0 来消除这种行为。

看看[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# django - 为可扩展性/性能选择最佳 Django 架构

> ID：11495017
> 
> 赞同：1
> 
> 时间：2012-07-15T19:39:50.917
> 
> 标签：django, architecture, model, django-orm

我对如何构建模型有疑问。

我想给一些实体投票的可能性，在这种情况下，是一篇论文。我想出了这两种可能性：

选项1：

```
Link the entity as a relationship

class Vote(model.Model):
    author = models.ForeignKey(User)

    created = models.DateField(auto_now=True)
    value = models.IntegerField(default=1)

class Paper(models.Model):
    author = models.ForeignKey(User)
    edition = models.ForeignKey(ConferenceEdition)

    votes = models.OneToMany(Vote) 
```

好处：

*   使用模型（ORM）更容易
*   我可以和其他人一起使用这个投票实体
*   在呈现 HTML 时，我可能需要这些信息，以显示用户已经投票了哪些论文。

缺点：

*   恐怕数据库越大，越慢。

选项 2：

不链接班级

```
class Vote(model.Model):
    author = models.ForeignKey(User)

    created = models.DateField(auto_now=True)
    value = models.IntegerField(default=1)

    entity_id = models.IntegerField()
    entity_type = models.CharField(max_length=255,default='Paper')

class Paper(models.Model):
    author = models.ForeignKey(User)
    edition = models.ForeignKey(ConferenceEdition)

    num_votes = models.IntegerField(default=0) 
```

优点：

*   这是一种延迟加载，我有一个柜台，如果我需要信息，我可以去找它。
*   它更快（我认为）

缺点：

*   您必须依靠新逻辑来更新所有新投票。

选项 3：

我在听

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T19:41:16.643

仅当您显式调用它们时，Django 才会加载多对多字段。

所以在你的第一种情况下：

```
paper.votes.all() 
```

如果您想在查询时加载所有投票，您可以在 django 1.4 中执行[prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)

```
paper = Paper.objects.get(pk=1).prefetch_related('votes') 
```

顺便说一句，你可以使用 .count() 代替 .all()，它会生成一个更快的不同数据库查询，因为它只需要对值进行计数，而不是将它们检索到 django/python 中。

还有第三种方法：

你可以在你的模型中有额外的字段： votes_count，你可以在 pre_save() 上更新，它会为你保存这个值。这样你就可以得到两者：你可以查询所有选票，但你也可以只获取一个数字。

# java - ImageJ API：从图像中获取 RGB 值

> ID：11495020
> 
> 赞同：0
> 
> 时间：2012-07-15T19:40:39.347
> 
> 标签：java, image-processing, rgb, imagej

我正在尝试从`ImagePlus`对象获取 RGB 值。尝试执行此操作时出现异常错误：

```
import ij.IJ;
import ij.ImagePlus;
import ij.plugin.filter.PlugInFilter;
import ij.process.ColorProcessor;
import ij.process.ImageProcessor;
import java.awt.image.IndexColorModel;

public class ImageHelper implements PlugInFilter {

    public int setup(String arg, ImagePlus img) {
        return DOES_8G + NO_CHANGES;
    }

    public void run(ImageProcessor ip) {

        final int r = 0;
        final int g = 1;
        final int b = 2;

        int w = ip.getWidth();
        int h = ip.getHeight();

        ImagePlus ips = new ImagePlus("C:\\Lena.jpg");
        int width = ips.getWidth();
        int height = ips.getHeight();
        System.out.println("width of image: " + width + " pixels");
        System.out.println("height of image: " + height + " pixels");

        // retrieve the lookup tables (maps) for R,G,B
        IndexColorModel icm = (IndexColorModel) ip.getColorModel();

        int mapSize = icm.getMapSize();
        byte[] Rmap = new byte[mapSize];
        icm.getReds(Rmap);
        byte[] Gmap = new byte[mapSize];
        icm.getGreens(Gmap);
        byte[] Bmap = new byte[mapSize];
        icm.getBlues(Bmap);

        // create new 24-bit RGB image
        ColorProcessor cp = new ColorProcessor(w, h);
        int[] RGB = new int[3];
        for (int v = 0; v < h; v++) {
            for (int u = 0; u < w; u++) {
                int idx = ip.getPixel(u, v);
                RGB[r] = Rmap[idx];
                RGB[g] = Gmap[idx];
                RGB[b] = Bmap[idx];
                cp.putPixel(u, v, RGB);
            }
        }
        ImagePlus cwin = new ImagePlus("RGB Image", cp);
        cwin.show();
    }
} 
```

例外来自这一行：

```
 IndexColorModel icm = (IndexColorModel) ip.getColorModel(); 
```

例外：

> 线程“主”java.lang.ClassCastException 中的异常：java.awt.image.DirectColorModel 无法转换为 java.awt.image.IndexColorModel

...有任何想法吗？^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:53:14.657

发生错误是因为 ip.getColorModel() 不返回 IndexColorModel 对象，而是返回 ColorModel 对象。

要获取 IndexColorModel 对象，您应该使用以下代码：

```
IndexColorModel icm = ip.getDefaultColorModel(); 
```

根据[ImageJ API](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html#getDefaultColorModel%28%29) ，这应该会给你一个 IndexColorModel 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:58:02.167

ColorProcessor 包含方法

```
getChannel() 
```

获得红色、绿色或蓝色通道。

要获得 ColorProcessor，您可以将处理器转换为 ColorProcessor。

```
ColorProcessor cp = (ColorProcessor) ip; 
```

如果图像是灰度图像，则会引发错误。

# android - 在android应用程序中强制关闭

> ID：11495023
> 
> 赞同：0
> 
> 时间：2012-07-15T19:41:09.867
> 
> 标签：android, forceclose

我的代码中没有错误，但应用程序强制在开始时自行关闭。以下是代码。

```
package com.amit.wozzle;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
/** Called when the activity is first created. */
private Button b1;
private Button b2;
private Button b3;
private Button b4;
private Button b5;
private Button b6;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b1 = (Button) findViewById(R.id.g1);
    b2 = (Button) findViewById(R.id.g2);
    b3 = (Button) findViewById(R.id.g3);
    b4 = (Button) findViewById(R.id.g4);
    b5 = (Button) findViewById(R.id.g5);
    b6 = (Button) findViewById(R.id.g6);

    b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 1);
            startActivity(r1);
        }
    });

    b2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 2);
            startActivity(r1);
        }
    });

    b3.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 3);
            startActivity(r1);
        }
    });

    b4.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 4);
            startActivity(r1);
        }
    });

    b5.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 5);
            startActivity(r1);
        }
    });

    b6.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent r1= new Intent("com.amit.wozzle.GAMEPLAY");
            r1.putExtra("choice", 6);
            startActivity(r1);
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

这是日志猫。

```
07-15 12:57:37.632: D/AndroidRuntime(666): Shutting down VM
07-15 12:57:37.632: W/dalvikvm(666): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-15 12:57:37.642: E/AndroidRuntime(666): FATAL EXCEPTION: main
07-15 12:57:37.642: E/AndroidRuntime(666): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.amit.wozzle/com.amit.wozzle.MainActivity}:    java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in    AdapterView
07-15 12:57:37.642: E/AndroidRuntime(666):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-15 12:57:37.642: E/AndroidRuntime(666):  at   android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.os.Looper.loop(Looper.java:123)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-15 12:57:37.642: E/AndroidRuntime(666):  at java.lang.reflect.Method.invokeNative(Native Method)
07-15 12:57:37.642: E/AndroidRuntime(666):  at java.lang.reflect.Method.invoke(Method.java:521)
07-15 12:57:37.642: E/AndroidRuntime(666):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-15 12:57:37.642: E/AndroidRuntime(666):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-15 12:57:37.642: E/AndroidRuntime(666):  at dalvik.system.NativeStart.main(Native Method)
07-15 12:57:37.642: E/AndroidRuntime(666): Caused by: java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.widget.AdapterView.addView(AdapterView.java:461)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:622)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
07-15 12:57:37.642: E/AndroidRuntime(666):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.Activity.setContentView(Activity.java:1647)
07-15 12:57:37.642: E/AndroidRuntime(666):  at com.amit.wozzle.MainActivity.onCreate(MainActivity.java:23)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-15 12:57:37.642: E/AndroidRuntime(666):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-15 12:57:37.642: E/AndroidRuntime(666):  ... 11 more 
```

有人能告诉我有什么错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:45:38.583

我认为您的代码中有错误。在第 4 行，它声明“adapterview 不支持 addview”。看起来这表明您应该将其包装在 try/catch 块中并捕获该错误，以便它不会强制关闭您的应用程序，或者您需要弄清楚为什么适配器视图不支持 addView。此外，从“引起”的那一行中，您可以看到重复的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T19:55:00.550

您的 XML 布局文件 (R.layout.main) 中似乎有错误。它正在崩溃，因为它试图膨胀视图。

Take a look at the adapter view you have defined in there. It would help if you could post this file.

# tomcat - 如何将 Connector/J Jar 复制到 Amazon EC2 上 Tomcat7 的 lib 文件夹？

> ID：11495024
> 
> 赞同：1
> 
> 时间：2012-07-15T19:41:13.153
> 
> 标签：tomcat, amazon-ec2, amazon-web-services, database-connection, connector-j

我使用`Connector/J`JDBC 驱动程序来设置安装在 Amazon EC2 实例上的 Tomcat7 和 MySQL 5.5 之间的连接池。当我尝试从 Java Servlet 访问 MySql 时出现以下错误

```
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

我认为错误是因为我没有复制`lib`Tomcat7文件夹中的Connector/J。

**我的问题**

如何将 Connector/J Jar 复制到 Amazon EC2 上 Tomcat7 的 lib 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:49:16.920

将其上传到相关的 /lib 文件夹中，如果服务器公共池将其放入服务器的 /commons/lib 中（或要求您的管理员按照其配置信息中的指定将其放入服务器 /commons/lib 中），如果它由应用程序使用动态连接池和上下文加载，然后它进入应用程序主目录 /WEB-INF/lib 文件夹。

# python - Python：按名称传递参数

> ID：11495031
> 
> 赞同：9
> 
> 时间：2012-07-15T19:42:10.453
> 
> 标签：python, function, parameters, arguments

嗨，我想知道如何在 python 中实现它。例如，假设您有一个带有两个参数的函数，并且都打印到控制台

```
def myFunc(varA, varB):
    print 'varA=', varA
    print 'varB=', varB 
```

我见过库（pymel 是我想到的），它允许您按名称以不特定顺序指定要解析数据的参数。例如

```
myFunc(varB=12, varA = 'Tom') 
```

我不确定我错过了什么，因为当我尝试在 Maya 环境内部或外部声明自己的函数时，这似乎不起作用。

任何线索都会很棒，谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T19:46:04.257

这是正常的 Python 行为。如果您看到错误，那么您就是在搞砸其他事情（例如，缺少必需的参数，尝试按名称传递位置参数等）。

```
>>> def func(foo, bar):
...   print foo, bar
... 
>>> func(bar='quux', foo=42)
42 quux 
```

# php - 为什么PHPinfo有头版本和库版本？有什么区别？

> ID：11495034
> 
> 赞同：8
> 
> 时间：2012-07-15T19:42:47.077
> 
> 标签：php, openssl

我有一个不一致的地方，我无法正确对齐他们的版本，所以我只想删除库版本。我可以这样做吗？当库来自我的发行版时，是 PHP 的标头版本吗？我可以升级 PHP 的库版本吗？如果是这样，怎么做？我正在使用 PHP 5.4.4

例如， ![phpinfo](../Images/1275ed00bd8f76c3f751de1b0f71ba19.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:12:13.720

> 当库来自我的发行版时，是 PHP 的标头版本吗？

这意味着它是针对 1.0.1 头文件编译的，但现在是针对 0.9.8 动态链接的。因此，您使用的版本比编译 PHP 时使用的版本旧。

许多库将版本存储在头文件中。因此，当程序使用该库时，它可以执行类似的操作`int HEADER_FOO_VERSION = LIBRARY_VERSION`，将版本号嵌入到程序中（例如，php）。现在，当该程序运行时，它会动态链接库，这可能与主机系统上的库不同。

该库可能有一个函数调用，比如`int get_library_version()`. 所以程序（PHP）可以检查是否`HEADER_FOO_VERSION == get_library_version()`. 如果不同，则可能存在兼容性问题。（当然，它不必分配给局部变量......我只是想把头版本号编译成php，并且无论哪个版本的库都保持不变正在运行时使用。）

是否有问题取决于两个版本是否兼容。

通常，如果库大于标题，则可以。如果库比它链接的版本旧，那肯定更有可能成为问题。当然，这是因为不可能知道未来的版本可能会有什么变化。

因此，在您的情况下，我会尝试通过`apt-get`,`yum`等更新您系统的 SSL 库，以匹配 PHP 期望的版本。

要检查 php 在 Linux 上使用的版本：

```
$ ldd `which php` | grep ssl
  libssl.so.1.0.0 => /lib/i386-linux-gnu/libssl.so.1.0.0 
```

请注意，这`which php`只是找到完整路径的捷径。你可以硬编码任何你想检查的可执行文件：`ldd /usr/sbin/httpd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:05:24.240

我自己不知道答案，但是当在谷歌上搜索时，一些很好的资源解释了同样的......

[头文件和库有什么区别？](https://stackoverflow.com/questions/924485/whats-the-difference-between-a-header-file-and-a-library)

文件的版本是用于创建库的 phpinfo 中提到的版本。

希望对您有所帮助，如果在谷歌上搜索，有很多可用的资源。

仍然希望收到有关该问题的详细信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T20:14:31.007

标头版本是*功能*版本，而库版本是*代码*版本。

标头定义了接口——它告诉你库中有哪些函数。如果标头被更新，那么您需要检查以确保所有功能都相同，并查看是否添加或减去任何功能。

但是如果更新了一个库，而不是标题，这意味着所有的函数调用都是相同的，但是一些代码可能会改变（例如，错误修复）。

在您的示例中，PHP 看到 OpenSSL 1.0.1 的功能，但 OpenSSL 加载的源代码的实际版本是 0.9.8o

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T20:10:51.583

这在 openssl 的更新版本中很常见。发生的情况是库的较新版本存储在不同的文件夹中。位于 /usr/bin/openssl 的原始文件夹需要一个指向新文件夹 /usr/local/bin/openssl 的符号链接。这将使两者成为相同的版本或仅显示 OpenSSL 版本 _ *（随便）*

通常无需担心这一点，因为它仍然按照预期的方式工作。这在共享服务器上很常见。

编辑：

```
The information in this post is generic and can be different if you are running
CentOS, RedHat, Ubuntu, or another Linux/BSD version. Check documentation or man
pages for the best information 
```

如果您确实更新了 OpenSSL，某些版本的 *nix 需要您重新构建 PHP 和 Apache 以使其更新

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-15T22:36:20.437

如果您从源代码重建 PHP，我发现了另一个可能导致不匹配的原因。它是如此简单，但如果您不熟悉在 Linux 上从源代码构建，不知道它会花费您很多时间。

答案在这里：[https](https://serverfault.com/a/567705/305059) ://serverfault.com/a/567705/305059 - 不幸的是，我不能对这个不太有用的答案投票，所以如果你在那里有名声，请这样做。

您需要在“make”之前运行“make clean”才能重建所有二进制文件。奇怪的是，如果没有这一步，我得到的是更新的库版本，但是是旧的头文件版本——所以我认为它一定是重建了一些东西，但不是所有的东西。我的重建涉及链接到另一个位置的 curl 版本（使用 ssl 构建），这可能是它背后的原因。

无论如何，我希望这对某人有所帮助。感谢@velcrow 关于服务器故障。

# emacs - Emacs：一起使用 ffap 和 ido-mode

> ID：11495035
> 
> 赞同：2
> 
> 时间：2012-07-15T19:42:47.597
> 
> 标签：emacs, ido

我曾经用来`find-file-at-point`打开文件、URL 等。我的`.emacs`包含

```
(require 'ffap)
(ffap-bindings) 
```

我发现`ido-mode`并尝试将它与

```
(ido-mode 1); enable ido-mode
(setq ido-enable-flex-matching t); flexibly match names
(setq ido-everywhere t); use ido-mode everywhere, in buffers and for finding files
(setq ido-use-filename-at-point 'guess); for find-file-at-point 
```

事实证明，`C-x C-f`查找文件并没有激活`ido-mode`（我没有看到文件名的典型建议，就像我在做缓冲区时所做的那样`C-x b`）。当我注释掉与 相关的两行时`ffap`，它按预期工作，但是，我也想使用`ffap`。

这可能吗？

假设该点位于 URL 上。如果`C-x C-f C-f`（回退到“旧”完成样式）会激活`ffap`并因此提供打开 URL，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:06:34.840

是的——您需要重新绑定您使用的函数。

你在 ffap 里面查看你需要的函数，然后像这样重新绑定它们：

(global-set-key [end] '函数)

（你用你的组合改变结束键）。

有很多方法可以重新绑定一个键，但首先开始查看 ffap 中对您有用的函数。

# naming-conventions - 如何命名包含单数或复数形式的字符串的变量？

> ID：11495043
> 
> 赞同：0
> 
> 时间：2012-07-15T19:44:04.050
> 
> 标签：naming-conventions

有时，根据某些值，您需要将单数或复数形式的字符串变量分配给。

例子：

```
String token = (i > 1) ? "specs" : "spec"; 
```

但是如何命名这样的变量呢？`specToken`? `specOrSpecs`? 只是`token`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:17:50.060

我会用`units`.

请注意，对于零大小写是使用单数还是复数可能是非常特定于语言的。例如，用英语，我可能会写：

```
String units = (i == 1) ? "spec" : "specs"; 
```

因为您想要“0 规格”而不是“0 规格”。

# mercurial - 从文件夹中删除 Mercurial 版本控制

> ID：11495045
> 
> 赞同：3
> 
> 时间：2012-07-15T19:44:05.457
> 
> 标签：mercurial

我目前有一个使用 Mercurial 版本化的项目。在我的计算机上，`.hg`我的本地存储库的根目录中有一个文件夹。

我想从 Mercurial 更改为 Git，所以我想知道删除`.hg`文件夹是否足以从该文件夹中删除 Mercurial 版本控制？

如果没有，我该怎么办？（我不想移动我电脑上的现有资源）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T19:47:23.947

是的，使它成为 Mercurial 存储库的所有位都在 .hg 文件夹中，因此您可以删除它以删除 Mercurial 版本控制。

请注意，这样做显然也会丢失所有源代码控制历史记录。

如果您想保留该历史记录，似乎有一些转换存储库的选项，首先点击谷歌：

[http://arr.gr/blog/2011/10/bitbucket-converting-hg-repositories-to-git/](http://arr.gr/blog/2011/10/bitbucket-converting-hg-repositories-to-git/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T19:47:32.943

是的，这应该工作。

mercurial 在 .hg 文件夹中存储机会等，但如果您只是删除 .hg 文件夹并使用 git 代替，您将丢失所有项目历史记录。

# android - 在 Android 应用上标记照片

> ID：11495046
> 
> 赞同：3
> 
> 时间：2012-07-15T19:44:20.920
> 
> 标签：android

我正在开发一个安卓应用程序，用户可以在其中拍照。我想做的是让用户能够标记这张照片。例如，他们可以触摸屏幕并将该位置标记为“鞋子”或“头部”。

当用户触摸屏幕（例如 API 调用或事件）时，是否有内置方法来获取像素位置？或者有没有更简单的方法来做到这一点？

注意：我是 Android 开发的完整初学者，所以请解释我的问题有什么问题，而不是仅仅投反对票！那会更有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T22:14:50.843

您应该首先有一个包含照片的布局（比如 main.xml）`ImageView`：

```
<ImageView
    android:id="@+id/photo"
    android:src = "@+drawable/filename"
    android:background="@android:color/transparent"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
 /> 
```

然后使用`setOnTouchListener`：

```
setContentView(R.layout.main);
ImageView mView = (ImageView) findViewById(R.id.photo);
mView.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            float x = event.getX();
            float y = event.getY();
        } 
}); 
```

# zend-framework - Zend 身份验证和登录 - 接受 foo 和 foo1！都用于保存的 foo 密码

> ID：11495049
> 
> 赞同：0
> 
> 时间：2012-07-15T19:44:34.207
> 
> 标签：zend-framework, authentication, login, passwords

我正在尝试编写身份验证和登录脚本并且在那里很安静。我的数据库中保存了一个密码“密码”……它可以与密码“密码”一起使用，但不应该与“密码1！”一起使用 或前缀或后缀两个字符......它不应该接受它......但如果我输入不同的东西（不同的字符串，或更多的字符），它会给我一个正确的错误......

那是我的数据库表中唯一的行...没有重复的条目..

以下是代码

```
public function validate_login($valuethrown) {

    $username = $valuethrown['username'];
    $email = $valuethrown['email'];
    $password = $valuethrown['password'];

    echo "Values thrown to the model are : $username, $email, $password";
    $authAdapter = $this->getAuthAdaptor();
    $authAdapter->setIdentity($email)
            ->setCredential(md5($password));
    $auth = Zend_Auth::getInstance();
    $result = $auth->authenticate($authAdapter);
    if ($result->isValid()) {
        $data = $authAdapter->getResultRowObject(null,'password');
        $auth->getStorage()->write($data);
        $this->_redirect('home');
    } else {
        echo "</br>Wrong Password</br>";
    }
    //check login details
}

public function getAuthAdaptor() {
    $authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter());
    $authAdapter->setTableName('users')
            ->setIdentityColumn('email')
            ->setCredentialColumn('password');
    return $authAdapter;
} 
```

帮助！！！！

# python - Python statsmodels OLS 和 R 的 lm 的区别

> ID：11495051
> 
> 赞同：22
> 
> 时间：2012-07-15T19:44:50.263
> 
> 标签：python, r, pandas, rpy2, statsmodels

我不确定为什么对于简单的 OLS 得到的结果略有不同，这取决于我是通过[panda 的实验性 rpy 接口](http://pandas.pydata.org/pandas-docs/dev/r_interface.html)进行回归`R`还是在 Python 中使用[statsmodels 。](http://statsmodels.sourceforge.net/devel/index.html)

```
import pandas
from rpy2.robjects import r

from functools import partial

loadcsv = partial(pandas.DataFrame.from_csv,
                  index_col="seqn", parse_dates=False)

demoq = loadcsv("csv/DEMO.csv")
rxq = loadcsv("csv/quest/RXQ_RX.csv")

num_rx = {}
for seqn, num in rxq.rxd295.iteritems():
    try:
        val = int(num)
    except ValueError:
        val = 0
    num_rx[seqn] = val

series = pandas.Series(num_rx, name="num_rx")
demoq = demoq.join(series)

import pandas.rpy.common as com
df = com.convert_to_r_dataframe(demoq)
r.assign("demoq", df)
r('lmout <- lm(demoq$num_rx ~ demoq$ridageyr)')  # run the regression
r('print(summary(lmout))')  # print from R 
```

从`R`，我得到以下摘要：

```
Call:
lm(formula = demoq$num_rx ~ demoq$ridageyr)

Residuals:
    Min      1Q  Median      3Q     Max 
-2.9086 -0.6908 -0.2940  0.1358 15.7003 

Coefficients:
                 Estimate Std. Error t value Pr(>|t|)    
(Intercept)    -0.1358216  0.0241399  -5.626 1.89e-08 ***
demoq$ridageyr  0.0358161  0.0006232  57.469  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 1.545 on 9963 degrees of freedom
Multiple R-squared: 0.249,  Adjusted R-squared: 0.2489 
F-statistic:  3303 on 1 and 9963 DF,  p-value: < 2.2e-16 
```

`statsmodels.api`用于执行 OLS ：

```
import statsmodels.api as sm
results = sm.OLS(demoq.num_rx, demoq.ridageyr).fit()
results.summary() 
```

结果与 R 的输出相似但不一样：

```
OLS Regression Results
Adj. R-squared:  0.247
Log-Likelihood:  -18488.
No. Observations:    9965    AIC:   3.698e+04
Df Residuals:    9964    BIC:   3.698e+04
             coef   std err  t     P>|t|    [95.0% Conf. Int.]
ridageyr     0.0331  0.000   82.787    0.000        0.032 0.034 
```

安装过程有点麻烦。但是，这里有一个[ipython](https://github.com/skyl/NHANES-opensource/blob/master/1999-2000/RX-Explore.ipynb)*笔记本* ，可以重现不一致。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T19:49:30.727

看起来 Python 默认情况下不会向您的表达式添加截距，而 R 在您使用公式接口时会这样做。

这意味着您确实适合了两个不同的模型。尝试

```
lm( y ~ x - 1, data) 
```

在 R 中排除截距，或者在您的情况下使用更标准的符号

```
lm(num_rx ~ ridageyr - 1, data=demoq) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T09:29:18.437

请注意，您仍然可以使用`ols`from `statsmodels.formula.api`：

```
from statsmodels.formula.api import ols

results = ols('num_rx ~ ridageyr', demoq).fit()
results.summary() 
```

我认为它`patsy`在后端使用来翻译公式表达式，并自动添加拦截。

# c - libqrencode 生成一些 android/ios 阅读器无法读取的二维码

> ID：11495059
> 
> 赞同：0
> 
> 时间：2012-07-15T19:45:46.993
> 
> 标签：c, embedded, qr-code

我正在开发一个嵌入式应用程序，其中设备在 LCD 屏幕上生成 QR 码。

代码生成部分似乎工作得很好，但我似乎在解码它时遇到了一些麻烦。

我通过函数生成二维码

```
QRcode *qr = QRcode_encodeString8bit("http://some/url/", 0, QR_ECLEVEL_Q); 
```

然后将其转换为图像库可以读取的格式以显示在屏幕上。然而，虽然 Android 上的“QR Droid”应用程序可以很好地读取它并将我发送到 URL，但另一个名为“Qr Barcode Scanner”的应用程序似乎无法识别代码，即使它似乎检测到对齐点。iOS 也是如此——有些应用程序读得很好，有些应用程序就像它不是代码一样。

这个问题的可能原因是什么？我尝试了不同的纠错级别，但事实并非如此。

提前感谢您的回复..

编辑：显然代码是水平翻转的。我更改了将其转换为 16 位图像的方式，并且它起作用了。我正在写一个代码片段以供将来参考，以防其他人偶然发现同样的问题。

```
QRcode *qr = QRcode_encodeString8bit(string, 0, QR_ECLEVEL_H);
int i, j;
for (i = 0; i < qr->width; i++) {
    for (j = qr->width - 1; j >= 0; j--) { //flipped this
        if (qr->data[(j * qr->width) + i] & 0x1)
            *(qr_img++) = COLOR_16BIT_BLACK;
        else
            *(qr_img++) = COLOR_16BIT_WHITE;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:05:19.770

在我的情况下，有效的代码（与输出相同结果的二维码生成器相比）看起来像这样

```
QRcode *qr;
qr = QRcode_encodeString("ABC012345", 0, QR_ECLEVEL_H, QR_MODE_8, 1);

int i_qr, j_qr;
for (i_qr = 0; i_qr < qr->width; i_qr++) {
    for (j_qr = 0; j_qr < qr->width; j_qr++) { 
        if (qr->data[(i_qr * qr->width) + j_qr] & 0x1)
            printf("*");
        else
            printf(" ");
    }
    printf("\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:55:23.190

@smparkes 我不确定二维码是否被翻转。zxing 读取它OK，并且它不允许镜像代码（不是没有TRY_HARDER）。

是的，有效二维码的镜像永远无效；旋转是。我想如果图书馆总是生成无效的二维码，我会感到惊讶。QR Droid 也只是基于 zxing，所以如果它不遗余力地读取这些无效代码，就会感到惊讶。

但话又说回来，其他一些证据表明镜像是问题所在。

# node.js - 获取 MongoDB 文档中嵌入集合的计数

> ID：11495060
> 
> 赞同：2
> 
> 时间：2012-07-15T19:45:49.007
> 
> 标签：node.js, mongodb

我正在使用 MongoDB 和 10Gen node.js 驱动程序。

我在 MongoDB 中有一个集合，其中包含与此类似的文档：

```
{
 _id: ObjectId( "500310affdc47af710000001" ),
 name:'something',
 tags:['apple','fruit','red'],
 created: Date( 1342378221351 )
} 
```

我想要得到的是查看所有文档并获得集合中所有文档中所有标签的不同计数。我尝试了 group 功能并得到了这个：

```
> db.photos.group(
... {cond:{}
... ,key:{tags:true}
... ,initial:{count:0}
... ,reduce:function(doc,out){out.count++}
... ,finalize:function(out){}});
[
    {
        "tags" : null,
        "count" : 35
    },
    {
        "tags" : [
            "#strawberry",
            "#friutpicture"
        ],
        "count" : 1
    }
] 
```

这是不对的。我可以在没有这样的计数的情况下得到不同的：

```
> db.photos.distinct('tags')
[
    "#friutpicture",
    "#strawberry",
    "#factory",
    "#wallpaper",
    "#bummber",
    "#test",
    "#fire",
    "#watermark"
] 
```

但我需要计数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:26:40.103

您可以在新的聚合框架 (2.1+) 中使用以下内容：

```
> db.photos..aggregate([{$unwind:"$tags"},
                        {$group:{_id:"$tags"}},
                        {$group:{_id:"DistictCount",count:{$sum:1}}}]) 
```

您的结果将是：

```
{
    "result" : [
        {
            "_id" : "DistictCount",
            "count" : 8
        }
    ],
    "ok" : 1
} 
```

group 函数不会满足您的需要，因为您需要先“展开”标签数组，然后才能对其进行分组，这意味着您需要一个 map 函数来发出文档中的每个标签，以及一个 reduce。如果您卡在 2.0 或更早版本并且无法使用聚合框架，则可以使用 map/reduce。这是[一个](http://cookbook.mongodb.org/patterns/unique_items_map_reduce/)可能有帮助的例子。

# ios - IOS：从辅助视图中启动导航控制器

> ID：11495064
> 
> 赞同：2
> 
> 时间：2012-07-15T19:46:28.180
> 
> 标签：ios, uinavigationcontroller

在我的应用程序中，我有一个第一个视图控制器，并以这种方式打开我的第二个视图控制器：

```
[self presentModalViewController:puntiVendita animated:YES]; 
```

但是当我在 secondViewController 中时，我有一个 tableView 并且我想开始一个导航控制器......我该怎么做才能通过代码从 seconviewcontroller 启动一个导航控制器？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:14:10.723

只需创建一个导航控制器：

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:puntiVendita];
[self presentViewController:navigationController animated:YES completion:nil]; 
```

# iphone - AppStore：发送测试账号进行应用验证

> ID：11495066
> 
> 赞同：0
> 
> 时间：2012-07-15T19:46:52.327
> 
> 标签：iphone, ios, xcode

我刚刚向 AppStore 提交了一个应用程序，但我需要向苹果人提供一个测试帐户。有这个过程吗？在应用提交过程中我没有看到任何可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:52:11.670

提交申请时，您可以在 iTunes Connect 中的评论备注中添加其他信息，这是您提供用户凭据的地方。

![在此处输入图像描述](../Images/1ab8a666395a13c5d80c04d4d0fca63d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:39:09.380

您无需向他们提供任何测试帐户信息。Apple 有一种神奇的秘密方式来测试应用内购买等，无需测试帐户。他们不需要你的帮助来做到这一点。实际上，我已经与 Apple Developer Support 讨论过这个问题。

我之前已经成功完成了很多次；我向你保证这不会是一个问题。

# actionscript-3 - AS3 缩放影片剪辑而不缩放子级

> ID：11495067
> 
> 赞同：0
> 
> 时间：2012-07-15T19:46:53.283
> 
> 标签：actionscript-3, flash

我有一个包含一个按钮和两个标签（都是 Flash 组件）的影片剪辑。单击按钮时，我想通过删除其中一个标签来最小化影片剪辑，然后将影片剪辑的高度更改为仅显示按钮和第一个标签（两者都在影片的顶部）。

我曾尝试更改影片剪辑的高度以及使用 scaleY，但它最终会随影片剪辑一起缩放标签和按钮。

有没有办法只缩放电影的背景而不缩放其子项（按钮和标签）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:27:44.553

我同意 weltraumpirat 的观点，即孩子与父母一起缩放是正确的行为。如果您无法将它们移出父级，您可以考虑使用以下伪代码来撤消父级对子级的缩放影响：

```
public class ParentClip extends MovieClip
{
    // Consider moving all of those unscalable clips into this MovieClip so you would not have to process them individually
    public var clipsDoNotScale:MovieClip;

    public override function set scaleX(value:Number):void
    {
        var previousValue:Number = super.scaleX;
        super.scaleX = value;

        if ( previousValue != value && clipsDoNotScale )
        {
            clipsDoNotScale.scaleX = 1 / value;

            //Proportionally move the clip too
            clipsDoNotScale.x *= value / previousValue;
        }
    }

    public override function set scaleY(value:Number):void
    {
        var previousValue:Number = super.scaleY;
        super.scaleY = value;

        if ( previousValue != value && clipsDoNotScale )
        {
            clipsDoNotScale.scaleY = 1 / value;

            //Proportionally move the clip too
            clipsDoNotScale.y *= value / previousValue;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:49:08.347

它不会那样工作。缩放父级会影响所有子级 - 这是一件好事，因为它使修改大型显示对象组变得更加容易。

您将不得不更改层次结构，以便您尝试缩放的图形剪辑与标签和按钮位于同一级别 - 只需创建一个新的 MovieClip 并将所有四个元素（图形、按钮、标签）放在其中。

# node.js - 无法以用户身份运行 npm 安装的软件包

> ID：11495068
> 
> 赞同：3
> 
> 时间：2012-07-15T19:47:20.037
> 
> 标签：node.js, fedora, npm

今天下午早些时候，我在 Fedora 16 上安装了 Node.js。

```
user@$ sudo yum localinstall --nogpgcheck http://nodejs.tchol.org/repocfg/fedora/nodejs-stable-release.noarch.rpm

user@$ sudo yum install nodejs-compat-symlinks npm 
```

然后我用 npm 安装了一个包。我在 Fedora 上使用 npm 安装的每个软件包（这不是我第一次）都涉及到以下过程。读它并哭泣。显然，这是 hackish 和错误的，但是当我决定安装 less 或任何其他 npm 包时，我必须执行相同的过程。为什么？我的环境或方法有什么问题？

```
user@$ sudo npm install -g jslint
[... this works ... kind of]

user@$ jslint
bash: jslint: command not found

user@$ sudo su

root@$ jslint
No files specified.
Usage: /bin/jslint ... [works]

root@$ which jslint
/bin/jslint

root@$ ls -l jslint
lrwxrwxrwx. 1 root root 38 Jul 15 14:58 /bin/jslint -> /lib/node_modules/jslint/bin/jslint.js

root@$ cd /lib/node_modules; ls -l
...
drwxr-xr-x. 2 root   root     4096 Jul 15 14:22 inherits
drwxr-xr-x. 2 root   root     4096 Jul 15 14:22 ini
drwx------. 6 nobody usergroup 4096 Jul 15 14:58 jshint
drwxr-xr-x. 3 root   root     4096 Jul 15 14:22 lru-cache
...

root@$ find . -type d -print0 | xargs -0 chmod 755

root@$ ls -l
...
drwxr-xr-x. 2 root   root     4096 Jul 15 14:22 inherits
drwxr-xr-x. 2 root   root     4096 Jul 15 14:22 ini
drwxr-xr-x. 5 nobody usergroup 4096 Jul 15 15:32 jslint
drwxr-xr-x. 3 root   root     4096 Jul 15 14:22 lru-cache
...

root@$ su user

user@$ jslint
o files specified.
Usage: /bin/jslint [now it finally works] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:13:52.503

如果使用 sudo 权限运行，最新版本的 npm 会切换到用户“nobody”作为安全措施。尝试在以 root 身份登录时进行全局安装，而不是使用 sudo。

# asp.net - 元素“system.web”具有无效的子元素“defaultDocument”

> ID：11495074
> 
> 赞同：0
> 
> 时间：2012-07-15T19:47:49.717
> 
> 标签：asp.net, web-config, asp.net-4.0, visual-studio-2012

我正在训练我的 web.config 以识别最佳默认文件是什么。根据我的主人的说法，它应该如下面的清单所示。

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <appSettings/>
  <system.web>

    <defaultDocument>
      <files>
        <clear />
        <add value="Defalut.aspx" />
      </files>
    </defaultDocument>

    <compilation debug="true" targetFramework="4.0"/>
    <httpRuntime/>
    <pages controlRenderingCompatibilityVersion="4.0"/>
    <machineKey/>
    <customErrors defaultRedirect="Error.aspx" mode="On"/>
  </system.web>
</configuration> 
```

问题是 VS2012 (Express) 将其标记为蓝色并声明主题中的错误。首先，我认为我可以按原样上传它，然后通过蛮力使服务器喜欢该文件，但随后它生气并吐出以下内容

*HTTP 错误 500.19 - 内部服务器错误 无法访问请求的页面，因为该页面的相关配置数据无效。*

当我阅读错误消息时，它说：*“无法读取配置部分'defaultDocument'，因为它缺少部分声明。”*

我已经完成了我的作业并找到了下面的文章，但是由于我的情况限制（例如，我需要手动上传 web.config 文件并且我无法在我的托管公司的服务器上运行任何脚本），它是无济于事。

我如何解决这个小问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:55:25.523

“Defalut.aspx”是一个明确的黄色标志。

建议：

1.  只需使用 MSVS2012 创建一个新的虚拟项目（我手边没有副本，所以目前无法帮助您）

2.  将自动生成的“web.config”剪切并粘贴到您的项目中并验证它是否有效。如果没有，请*只*进行那些获得干净编译/执行所需的*最小更改。*

3.  保存工作 web.config 的备份

4.  尝试添加您的“defaultDocument”部分，看看会发生什么。

5.  如果它仍然不起作用，请剪切/粘贴：

    a）确切的部分（正如我假设你在上面所做的那样）

    b) 确切的错误信息

还：

问：它现在在您的*MSVS2012*（在本地运行）*和*您的目标 Web 服务器都失败了，对吗？

问：您确定目标 Web 服务器支持 ASP.Net 4.0 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:12:43.393

您的配置看起来正确，但发生错误是因为它找不到意味着您所有网站文件夹的默认文档的文件

所以请用下面xml中文件的正确拼写替换“Defalut.aspx”

```
<defaultDocument>
      <files>
        <clear />
        <add value=*"Defalut.aspx"* />
      </files>
    </defaultDocument> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T11:09:24.133

我知道聚会迟到了，但是对于仍然遇到类似问题的任何人，我认为这与默认页面名称的拼写无关（访问时可能只会给出 404）。

真正的问题是该`defaultDocument`部分实际上应该在下面`system.webServer`，而不是`system.web`。有关详细信息，请参阅[defaultDocument 元素](https://msdn.microsoft.com/en-us/library/ms690361(v=vs.90).aspx)。

因此，您的示例配置文件应类似于：

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
-->
<configuration>
  <appSettings/>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <httpRuntime/>
    <pages controlRenderingCompatibilityVersion="4.0"/>
    <machineKey/>
    <customErrors defaultRedirect="Error.aspx" mode="On"/>
  </system.web>
  <system.webServer>
    <defaultDocument>
      <files>
        <clear />
        <add value="Defalut.aspx" />
      </files>
    </defaultDocument>
  </system.webServer>
</configuration> 
```

# c++ - C++ 字符串压缩

> ID：11495075
> 
> 赞同：0
> 
> 时间：2012-07-15T19:48:11.040
> 
> 标签：c++, string

我编写了一个程序来使用重复字符的计数来压缩字符串。如果压缩后的字符串比原始字符串长，那么我们仍然返回原始字符串。下面是我的程序：

```
void stringCompress(char* src) {
    char* original;
    original = src;
    char* rst;
    rst = src;

    int histogram[256];
    for (int i = 0; i < 256; i++) {
        histogram[i] = 0;
    }
    int length = 0;
    while (*src != NULL) {
        length++;
        src++;
    }
    src = original;
    int j = 0;

    for (int i = 0; i < length; i++) {

        histogram[(int) src[i]]++;
        if (histogram[(int) src[i]] == 1) {
            rst[j] = src[i];

            j++;

        }

    }
    rst[j] = '\0';

    char* final;

    rst = original;
    int index = 0;
    char buffer[33];

    for (int i = 0; i < j; i++) {

        final[index] = rst[i];

        stringstream number;
        number<<histogram[(int)rst[i]];
------->        //cout<<number.str()<<endl;
        char* temp = new char[number.str().length()+1];
        strcpy(temp, number.str().c_str());
        index++;
        cout<<temp<<endl;
        for(int k =0 ;k<number.str().length();k++)
        {
            final[index]=temp[k];
            index++;

        }

    }

    final[index] = '\0';
    src = original;

    if (index <= length) {
        for (int i = 0; i < index; i++)

            cout<<final[i];
    } else {
        cout << src << endl;
    }

} 
```

但奇怪的是，如果我把 cout 句子`cout<<number.str()<<endl;`留在那里（箭头指向句子），那么输出是正确的。例如，aaaabcdaa 输出 a6b1c1d1，aabcd 输出 aabcd。但是，如果我注释掉`cout<<number.str()<<endl;`，则不会生成任何内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:01:25.490

该变量`final`在您的代码中未初始化。当我使用内存缓冲区对其进行初始化时，无论您指向的行是否被注释掉，您的程序都会打印所需的输出。

也许您打算使用`buffer`（未使用的）作为内存`final`，例如：

```
final = buffer; 
```

# cocoa - NSPopover 没有出现

> ID：11495082
> 
> 赞同：2
> 
> 时间：2012-07-15T19:49:00.713
> 
> 标签：cocoa, coordinates, popover

我真的希望我能更具体，但不幸的是，我不能。所有适当的对象都是非零的，并且所有适当的方法调用都（可能）成功地进行了，但我的`NSPopover`只是从未出现过。也没有调用任何委托方法。

```
// ivars
NSPopover *tagPopover;
NSViewController *tagPopoverViewController;

// in method to display popover
tagPopover = [[NSPopover alloc] init];
[tagPopover setBehavior: NSPopoverBehaviorApplicationDefined];
[tagPopover setDelegate: self];
tagPopoverViewController = [[MYViewController alloc] initWithNibName: @"MYViewController" bundle: nil];
[tagPopover setContentViewController: tagPopoverViewController];
[tagPopover setContentSize: tagPopoverViewController.view.frame.size];

[tagPopover showRelativeToRect: NSMakeRect(700, 400, 5, 5) // Screen coordinates
                        ofView: [[NSApp keyWindow] contentView]
                 preferredEdge: NSMinYEdge]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:48:46.720

原来坐标系是错误的：

```
NSRect theRect = [[NSApp keyWindow] convertRectFromScreen: NSMakeRect(700, 400, 5, 5)];
[tagPopover showRelativeToRect: theRect // Window Coordinates
                        ofView: [[NSApp keyWindow] contentView]
                 preferredEdge: NSMinYEdge]; 
```

需要先将其转换为窗口的坐标系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T19:56:21.263

我怀疑那`tagPopoverViewController.view.frame`是 NSZeroRect，因为框架在它们开始出现在屏幕上之前就被设置为那个（例如，它们从 xibs/storyboards 出来时毫无意义）。你确定你需要那条线吗？文档提到 contentSize 无论如何都绑定到内容视图的大小。

# javascript - 如何在three.js中获取顶点的绝对位置？

> ID：11495089
> 
> 赞同：12
> 
> 时间：2012-07-15T19:49:51.383
> 
> 标签：javascript, webgl, three.js

据我所知，将返回对象几何内部的,和点`var point = object.geometry.vertices[i];`的相对位置。`x``y``z`

如果对象被移动、旋转或缩放，如何获得绝对位置？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-15T21:07:11.393

首先确保对象的矩阵已经更新。

```
object.updateMatrixWorld(); 
```

渲染循环通常会为您调用它。

然后，这样做：

```
var vector = object.geometry.vertices[i].clone();

vector.applyMatrix4( object.matrixWorld ); 
```

向量现在将包含世界坐标中的位置。

您可能想阅读一些 CG 参考书。

1.  用于图形和游戏开发的 3D 数学入门 / Fletcher Dunn 和 Ian Parberry 着

2.  游戏和交互式应用程序的基本数学：程序员指南 James M. Van Verth 和 Lars M. Bishop

三.js r69

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-20T21:45:37.663

Three.js (v50+) 的最新版本提供了内置到[类`THREE.Object3D`中](https://threejs.org/docs/?q=object3d#api/en/core/Object3D)的此功能。特别是，要获取`THREE.Vector3`名为 的本地实例的世界坐标`vector`，请使用[以下`localToWorld`方法](https://threejs.org/docs/?q=object3d#api/en/core/Object3D.localToWorld)：

```
object.localToWorld( vector ); 
```

类似地，还有[一种将世界坐标转换为局部坐标的`worldToLocal`方法](https://threejs.org/docs/?q=object3d#api/en/core/Object3D.worldToLocal)，在数学上稍微复杂一些。要将世界`vector`转换为对象的局部坐标空间：

```
object.worldToLocal( vector ); 
```

# mysql - MySQL 在重复键上插入；删除？

> ID：11495090
> 
> 赞同：15
> 
> 时间：2012-07-15T19:49:52.753
> 
> 标签：mysql, key, duplicate-removal, sql-delete

有没有办法删除 MySQL 中重复键的记录？

假设我们在数据库中有一条具有特定主键的记录，我们尝试添加另一个具有相同键`ON DUPLICATE KEY UPDATE`的记录 - 只会更新记录，但是如果已经存在，是否有删除记录的选项？它用于单击按钮时的简单输入/输出功能。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-01-09T19:46:05.447

这是一种解决方法，但它有效：

创建一个新列并将其命名为`do_delete`，或其他任何内容，使其成为一个小整数。然后做`On Duplicate Key Update do_delete = 1;`

根据您的 MySQL 版本/连接，您可以在同一语句中执行多个查询。但是，如果没有，只需在之后立即运行单独的查询。无论哪种方式，下一个查询都只是：`Delete From [table] Where do_delete = 1;`。这样，如果它是一个新条目，它不会删除任何东西。如果它不是新条目，则会将其标记为删除，然后您可以将其删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T19:54:20.190

使用[替换成](http://dev.mysql.com/doc/refman/5.0/en/replace.html)：

```
replace into some_table
select somecolumn from othertable 
```

将插入新数据，或者如果存在相同的数据将删除数据并插入新数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T19:53:55.927

最接近的可能解决方案是**`REPLACE`**语句。这是[REPLACE 的文档](http://dev.mysql.com/doc/refman/5.0/en/replace.html)。

[在MySQL 论坛](http://forums.mysql.com/read.php?10,203800,203800#msg-203800)上提出了类似的问题，[推荐的（也是唯一的）答案](http://forums.mysql.com/read.php?10,203800,203975#msg-203975)是使用**`REPLACE`**.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-25T18:20:59.700

为了更清楚地使用 mySql：
值可以来自同一个表：
`replace into table1 (column1,column2) select (val1,val2) from table1`

或者

值可以来自另一个表：
`replace into table1 (column1,column2) select (val1,val2) from table2`

或者

值可以来自任何具有条件的表：
`replace into table1 (column1,column2) select (val1,val2) from table1 where <br>column3=val3 and column4=val4 ...`

或者

还记住值可以是静态的，具有同名的表名：
`replace into table1 (column1,column2) select (123,"xyz") from table1`

即使更新导致重复条目也不会引发错误，因为它将被替换。
**（记住）只有自动增量值会增加；**

如果您有数据类型为“TIMESTAMP”的列和

**“on update CURRENT_TIMESTAMP”，它将无效；**

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-12-02T10:40:34.230

是的，当然 MySQL 中有解决您问题的方法。

如果表的键列中已经存在重复记录，则要删除或跳过新的插入记录，可以像这样使用 IGNORE：

```
insert ignore into mytbl(id,name) values(6,'ron'),(7,'son'); 
```

这里`id`的列是表中的主键`mytbl`。这将通过删除或跳过新的重复记录在表中插入多个值。

希望这将满足您的要求。

# ruby - ruby中各种变量范围之间的区别

> ID：11495098
> 
> 赞同：27
> 
> 时间：2012-07-15T19:51:17.757
> 
> 标签：ruby, scope

Ruby 有 5 个变量作用域：

1.  **局部变量**：这些是普通变量，例如`x = 25`，`y = gaurish`where`x`和`y`是局部变量。
2.  **实例变量**：这些用`@`实际变量名前面的符号表示。主要与类一起使用，以便类的每个实例/对象具有不同/单独的值。例子。`@employee.name = 'Alex'`
3.  **类变量**：用`@@`变量名前面的符号表示。类变量，我认为所有实例/对象具有相同的值。
4.  **全局变量**：它们以`$`符号开头，*随处*可访问。例子`$LOAD_PATH`
5.  **常量**：必须以大写字母开头，但按约定以`ALL_CAPS`. 虽然，它是一个常量，但它的值不是常量，可以更改（不过，ruby 会抛出警告）。所以从某种意义上说，这也像一个变量。

您可能会注意到，以上所有这些都是存储某种类型的值的变量，并且它们的值可以更改。但是，每个范围都有一些不同。拥有 5 种不同类型的变量范围让我很困惑。主要是，我很难决定在什么情况下，我应该在我的代码中使用特定的范围。所以我有一些疑问。请回答：

1.  我注意到，与实例变量不同，所有对象/实例的局部变量和类变量都保持不变。那么局部变量和类变量有什么区别呢？
2.  可以使用局部变量代替类变量吗？或相反亦然。如果是，那为什么，如果不是，那为什么不呢？
3.  ruby 中的全局变量让我想起了`global $x`PHP 中的邪恶变量。ruby 中的全局变量是否也被认为是邪恶的，因此不应使用。或者，在某些特定情况下，在 ruby​​ 中使用全局变量是有意义的？
4.  为什么常量不是常量并允许更改它们的值？根据定义，常量的值应该是常量，对吗？否则，我们可以只使用另一个变量而不改变它的值。这是否等同于红宝石中的常数？
5.  任何解释 ruby​​ 中 5​​ 个不同变量范围之间差异的页面/资源/链接？我喜欢保留一个方便参考。
6.  在什么用例下，我应该在我的代码中使用特定的变量范围。因此，可以用很酷的示例来解释所有 5 种情况，这是我感到困惑的主要原因。
7.  `public`有没有像java那样的事实上的选择？*在大多数*用例中，哪个是安全的选择？

感谢您花时间阅读和回答问题

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T21:52:27.720

1.  所有实例的类变量都是相同的，因为它们是与类相关联的类变量。一切都访问同一个变量，包括每个实例。

2.  不，局部变量就是局部变量。它们可能是函数的局部变量，也可能是*类声明*的局部变量，这与类变量*不同*。当类声明结束时，类声明中的局部变量超出范围。

3.  那是因为它们完全相同——它们是全球性的。全局状态*总是*邪恶的；这不是语言或环境的属性。也就是说，可能需要*一些*全局状态——就是这样。当有全局状态时使用全局状态是有意义的。诀窍是*正确*使用全局状态，这有时是一项不平凡的工作。

4.  Ruby就是这样。

5.  克里斯已经给了一个。

6.  我*认为*这个问题在很大程度上是自我回答的。当整个世界都需要访问时，全球化。特定于类实例时的实例。仅在本地范围内需要时为本地（例如，方法、块（请注意 1.8 和 1.9 之间在块范围方面的差异）等）。当变量不应该更改时为常量。一个类变量，当它是每个实例都需要的东西，或者如果通过类方法公开，与类紧密相关的东西。

7.  没有“大多数用例”，它完全取决于您对变量所做的事情。这`public`不是 Java 中事实上的选择——它取决于所讨论的实体。默认 Java 范围是包私有的（方法、属性）。在 Ruby 中使用哪个完全取决于用例，注意与 Java 一样，在 Ruby 中更容易，可以规避一些事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T20:27:20.390

局部变量不等同于类变量，它们与您所在的块相关联。在块中声明的任何局部变量都可以在那里使用。类变量与您所在的类结构相关联。定义一个类本身就是一个块，因此您可能能够类似地访问局部变量，但您会发现如果您在不同的上下文中引用您的类，您将无法引用局部变量以相同的方式。

如果被滥用，全局变量会被认为是错误的形式。OOP 应该帮助您构建程序，从而不需要整个程序的常量。把它们想象成实际上是全球性的：如果你不能保证它对整个世界的一致性，比如 PI 的价值或者你是否爱你的妻子，你可能不应该做出承诺。

一旦你掌握了它们，我发现“ [Ruby Variable Scope](http://www.techotopia.com/index.php/Ruby_Variable_Scope) ”是一个很好的参考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T06:36:50.630

我在以下链接中找到了关于 Ruby 中不同范围及其可见性的良好而深入的解释。[范围和可见性与示例详细。](http://www.sitepoint.com/understanding-scope-in-ruby/)

据其介绍，

```
Class variable (@@a_variable): Available from the class definition and any sub-classes. Not available from anywhere outside.

Instance variable (@a_variable): Available only within a specific object, across all methods in a class instance. Not available directly from class definitions.

Global variable ($a_variable): Available everywhere within your Ruby script.

Local variable (a_variable): It is available only in the particular method or block in ruby script. 
```

关于实例变量的更多解释是：您可以在该特定类的任何方法中访问实例变量。虽然不能在方法之外访问局部变量。下面是一个来自 ruby​​ 僧侣的例子，它彻底解释了这个概念。

```
class Item

   def initialize(item_name, quantity)

       @item_name = item_name   
       @quantity = quantity

   end

  def show

   puts @item_name
   puts @quantity
   supplier = "Acme corp"
   puts supplier

  end
end

 Item.new("tv",1).show 
```

这里的supplier 是一个局部变量，只能在我们的示例中从show 方法访问。尝试在initialize 方法中声明supplier 变量并在show 方法中打印出来。作为未定义的变量供应商，它将给出错误。

我希望它有帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-04T17:12:56.617

这是我的两分钱，是为 c++/java/c# 程序员编写的：

Ruby 本地/$Global 变量有点像 c++/java/c# 的本地/全局变量。

Ruby @instance 变量就像 c++/java/c# 的成员变量 /class 属性，可以在任何成员函数/类方法中访问。尽管 Ruby 实例不仅可以应用于类，还可以应用于 Ruby 模块。

Ruby @@class 变量就像 c++/java 的静态成员变量一样，在同一类的所有实例之间共享。

# garbage-collection - 没有垃圾收集的引用计数

> ID：11495099
> 
> 赞同：2
> 
> 时间：2012-07-15T19:51:21.623
> 
> 标签：garbage-collection, reference-counting

我正在学习编程语言设计课程，其中一个主题是垃圾收集。我从材料中了解到RC*可以*用于GC，但它也有其他用途，并且某些语言实现了RC而不是GC。
如果不是 GC，RC 到底有什么用？

( ***RC*** - 引用计数***。GC*** - 垃圾收集)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:58:55.540

例如，可以使用引用计数来关闭未引用的文件句柄，或以某种方式“归档”当前未引用的数据（将来可能通过某些间接路径重新引用这些数据）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:08:27.387

我可以提供一个独立于垃圾收集使用的引用计数的具体示例。Objective-C 使用引用计数来管理其对象的生命周期，在大多数情况下不存在垃圾收集器。

这是通过对对象的平衡调用`-retain`和`-release`处理对象时完成的。基本上，创建一个对象时保留计数为 1，并且每个需要保留对对象的引用的对象在最初传递它时应将其保留计数增加 1，然后在完成时将保留计数减 1它。`-release`导致对象的保留计数降至 0（不再需要它）的最终调用会触发对象类型的内部机制以释放自身。

不需要垃圾收集器进程来执行此操作。事实上，直到最近，在 Apple 的平台上（到目前为止，它们是 Objective-C 的最大用户）上还没有垃圾收集器，甚至没有用于其 iOS 移动设备（现在在 Mac 上已弃用）桌面）。

Objective-C 中的引用计数在本质上是默认手动的，要求开发人员遵循某些约定以确保您安全地平衡保留和释放调用，以避免泄漏或过早释放。一个更新的系统刚刚在 LLVM 编译器中实现，它可以自动执行此操作，并在编译时添加适当的调用。这种自动引用计数消除了管理内存的大部分工作，同时消除了垃圾收集器进程扫描对象图的需要。

垃圾收集器可以处理引用计数不能处理的一个特定条件是检测和删除保留周期。在循环中持有对该点的强引用的对象将永远不会在标准引用计数下被释放，即使所有引用循环中的对象的对象都释放了对其中对象的引用。垃圾收集器会发现这个循环并不植根于更大的对象图中，并且能够在执行扫描时移除整个循环。

# ruby-on-rails - 如何让我的用户控制器中的销毁操作正常工作？

> ID：11495100
> 
> 赞同：0
> 
> 时间：2012-07-15T19:52:06.107
> 
> 标签：ruby-on-rails

我正在使用 Stripe，我想确保当用户在我的网站上删除他或她的帐户时，用户的信息和订阅会自动从 Stripe 中删除。现在，在我的用户控制器中，我有以下用于销毁操作的代码：

```
 def destroy
    User.find(params[:id]).destroy
    flash[:success] = "Your account has been deleted."
    redirect_to root_path
  end 
```

在 Stripe 的网站上，他们有以下代码用于删除订阅了订阅的客户：

```
cu = Stripe::Customer.retrieve("cus_IzJx2FQ7r13IOk")
cu.delete 
```

我想做的是将该代码放在我的 rails 应用程序的销毁操作中。我不确定如何从 Stripe 中正确检索与即将删除的客户 ID 相关的客户 ID。我客户的 Stripe id 设置为 stripe_customer_token，并且 stripe_customer_token 的值存储在我的数据库中。您可以在设置此功能时给我的任何帮助都很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:03:14.703

您可以先删除 Stripe 关联，而不是直接销毁用户实例，如下所示。

```
def destroy
  @user = User.find(params[:id])
  cu = Stripe::Customer.retrieve(@user.stripe_customer_token)
  cu.delete
  @user.destroy
  flash[:success] = "Your account has been deleted."
  redirect_to root_path
end 
```

# php - 打开下载的 zip 文件会创建 cpgz 文件吗？

> ID：11495103
> 
> 赞同：9
> 
> 时间：2012-07-15T19:52:29.650
> 
> 标签：php, http-headers, zip, zipfile

如果我将 zip 文件的 url`href`设为链接的链接并单击该链接，我的 zip 文件将被下载并打开它会得到我期望的内容。

这是 HTML：

```
<a href="http://mysite.com/uploads/my-archive.zip">download zip</a> 
```

问题是我希望链接指向我的应用程序，以便我可以确定用户是否有权访问此 zip 文件。

所以我希望我的 HTML 是这样的：

```
 <a href="/canDownload">download zip</a> 
```

和我的页面PHP `/canDownload`：

```
//business logic to determine if user can download

if($yesCanDownload){

$archive='https://mysite.com/uploads/my-archive.zip';
header("Content-Type: application/zip");
header("Content-Disposition: attachment; filename=".basename($archive));
header("Content-Length: ".filesize($archive));
ob_clean();
flush();
echo readfile("$archive");
} 
```

所以，我认为问题与`header()`代码有关，但我已经根据各种谷歌和其他 SO 建议尝试了一堆与此相关的事情，但没有任何工作。

如果您回答我的问题，您很可能也可以回答这个问题：[Zipped file with PHP results in cpgz file after extract](https://stackoverflow.com/questions/11454158/zipped-file-with-php-results-in-cpgz-file-after-extraction)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-11T14:16:52.287

就我而言，答案是在 readfile() 之前输出了一个空行。

所以我补充说：

> ob_end_clean();
> 
> 读取文件（$文件名）；

但是您可能应该在代码中搜索此行的输出位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T20:00:33.237

[readfile](http://us3.php.net/readfile)的 PHP 文档说它将输出文件的内容并返回一个 int。

因此，您的代码`echo readfile("$archive");`将回`$archive`显（顺便说一句，双引号在这里毫无意义；您应该删除它们），然后输出`int`正在返回的内容。也就是说，您的行应该是：`readfile($archive);`

此外，您应该使用存档的本地路径（不是 http:// 链接）。

共：

```
if($yesCanDownload){
    $archive='/path/to/my-archive.zip';
    header("Content-Type: application/zip");
    header("Content-Disposition: attachment; filename=".basename($archive));
    header("Content-Length: ".filesize($archive));
    ob_clean();
    flush();
    readfile($archive);
} 
```

最后，如果这不起作用，请确保`filesize($archive)`返回文件的准确长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T21:02:27.440

好的，我回答了我自己的问题。

我最初并没有说清楚的主要问题是该文件不在我的应用程序服务器上。它位于 Amazon AWS s3 存储桶中。这就是为什么我在我的问题中使用了完整的 url，`http://mysite...`而不仅仅是服务器上的文件路径。事实证明`fopen()`可以打开 url（所有 s3 存储桶“对象”，也就是文件，都有 url），这就是我所做的。

这是我的最终代码：

```
$zip= "http://mysite.com/uploads/my-archive.zip"; // my Amazon AWS s3 url
header("Content-Type: archive/zip"); // works with "application/zip" too
header("Content-Disposition: attachment; filename='my-archive.zip"); // what you want to call the downloaded zip file, can be different from what is in the s3 bucket   
$zip = fopen($zip,"r"); // open the zip file
echo fpassthru($zip); // deliver the zip file
exit(); //non-essential 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-30T23:01:46.400

另一个可能的答案，我发现经过大量搜索后，我发现`*.zip`“解压缩”到 a的两个可能原因`*.zip.cpgz`是：

1.  文件已`*.zip`损坏
2.  正在使用的“解压缩”工具无法处理 >2GB 的文件

作为 Mac 用户，第二个原因是我解压缩文件时出现问题的原因：标准的 Mac OS 工具是*Archive Utility*，它显然无法处理 >2GB 的文件。（对我来说，有问题的文件是一个压缩的 4GB [raspbian](https://www.raspberrypi.org/downloads/raspbian/)磁盘映像。）

我最终做的是使用一个 Debian 虚拟机，它已经存在于我的 Mac 上的 Virtual Box 中。`unzip`Debian 8.2 上的 6.0 解压缩档案没有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T20:01:10.607

您将 URL 传递给`readfile()`喜欢：

```
$archive = 'https://mysite.com/uploads/my-archive.zip'; 
```

虽然您应该传递服务器上的路径，例如：

```
$archive = '/uploads/my-archive.zip'; 
```

假设文件位于上传文件夹中。

另外尝试以下标题：

```
header("Content-type: application/octet-stream"); 
header("Content-disposition: attachment; filename=file.zip"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-21T12:10:24.357

就我而言，我试图在 public_html 上方的目录中创建文件，但托管规则不允许这样做。

# c# - 是否有一种转换方法可以使用 char 并生成 ConsoleKey？

> ID：11495104
> 
> 赞同：11
> 
> 时间：2012-07-15T19:52:45.570
> 
> 标签：c#, .net

我想知道.NET 框架（或其他地方）中是否有任何帮助类将字符转换为 ConsoleKey 枚举。

```
e.g 'A' should become ConsoleKey.A 
```

在有人问我为什么要这样做之前。我想编写一个助手，它接受一个字符串（例如'Hello World'）并将其转换为一系列 ConsoleKeyInfo 对象。我需要在一些疯狂的单元测试中使用它来模拟用户输入。

我只是有点厌倦了自己创建胶水代码，所以我想，也许已经有一种方法可以将 char 转换为 ConsoleKey 枚举？

**为了完整起见，到目前为止似乎效果很好**

```
 public static IEnumerable<ConsoleKeyInfo> ToInputSequence(this string text)
    {
        return text.Select(c =>
                               {
                                   ConsoleKey consoleKey;
                                   if (Enum.TryParse(c.ToString(CultureInfo.InvariantCulture), true, out consoleKey))
                                   {
                                       return new ConsoleKeyInfo(c, consoleKey, false, false, false);
                                   }
                                   else if (c == ' ')
                                       return new ConsoleKeyInfo(' ', ConsoleKey.Spacebar, false, false, false);
                                   return (ConsoleKeyInfo?) null;
                               })
            .Where(info => info.HasValue)
            .Select(info => info.GetValueOrDefault());
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T20:03:15.937

你有没有尝试过：

```
char a = 'A';
ConsoleKey ck;
Enum.TryParse<ConsoleKey>(a.ToString(), out ck); 
```

所以：

```
string input = "Hello World";
input.Select(c => (ConsoleKey)Enum.Parse(c.ToString().ToUpper(), typeof(ConsoleKey)); 
```

或者

```
.Select(c =>
    {
        return Enum.TryParse<ConsoleKey>(a.ToString().ToUpper(), out ck) ?
            ck :
            (ConsoleKey?)null;
    })
.Where(x => x.HasValue) // where parse has worked
.Select(x => x.Value); 
```

还有[一个忽略大小写的](http://msdn.microsoft.com/en-us/library/dd991317.aspx)`Enum.TryParse()`重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:10:34.640

如果您使用 .NET4 或更高版本，则可以使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/system.enum.tryparse.aspx). 并且[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559%28v=vs.80%29)适用于 .NET2 及更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:01:16.477

> 如果是 [AZ] & [0-9] OP 可以使用

它可能会起作用，因为 ConsoleKey 是一个[枚举](http://msdn.microsoft.com/en-us/library/system.consolekey.aspx)

所以你可以做这样的事情

```
char ch = 'A';
ConsoleKey ck = (ConsoleKey) ch; 
```

# xml - XML中的编码和符号

> ID：11495106
> 
> 赞同：2
> 
> 时间：2012-07-15T19:52:54.480
> 
> 标签：xml, perl

我的 Perl 程序正在处理一个 XML 文件。某些条目可能包含 & 符号。解析器中断，说：“实体中的名称无效”。

如何处理文件并在所有不正确的实体中编码 &-s？

所以，它会是这样的：

```
<words>text1 & text2</words>  -->  <words>text1 &amp; text2</words> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:32:55.897

它不是 XML 文件。如果是 XML，`&`则将写为`&amp;`. 处理非 XML 文件很困难，因为您不能使用 XML 解析器。最好修复创建此文件的程序，将其更改为生成正确格式的 XML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T19:59:13.633

这很棘手，很重要，通常需要权衡取舍。当我遇到类似的问题时，用（和“尾随字符”）替换`&`后跟大写字符或空格（`/\&[A-Z ]/`在正则表达式中）`&amp;`的字符可以解决大多数情况——这通常就足够了，因为你已经加倍努力了接受格式不正确的 XML 输入。

# java - 从 AppEngine Java 将 byte[] 保存到 Google Drive

> ID：11495114
> 
> 赞同：0
> 
> 时间：2012-07-15T19:53:48.090
> 
> 标签：java, google-app-engine, google-drive-api

```
byte[] fileItemData = blobstoreService.fetchData(blobKey, 0, 999999);   
ByteArrayContent mediaContent = new ByteArrayContent(fileItemMimeType, fileItemData);
insert = driveService.files().insert(body, mediaContent);
File file = insert.execute(); 
```

-> 为什么 insert.execute() 不能捕获异常...？什么都不做。-> 当我离开“fileItemData”时，我在谷歌驱动器中得到一个项目。那么它有什么问题呢？我正在尝试上传到 Google AppEngine 并存储到 AppEngine 上的 Google Drive。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T00:08:42.207

您能否使用较小的数据尝试您的代码，例如：

```
ByteArrayContent mediaContent = ByteArrayContent.fromString("text/plain", "Hello World")
driveService.files().insert(body, mediaContent).execute(); 
```

让我知道这是否有效......

# opengl - 3d 线鼠标采摘

> ID：11495121
> 
> 赞同：0
> 
> 时间：2012-07-15T19:55:31.153
> 
> 标签：opengl, 3d, directx, mouse-picking

我有数千行的 3d 场景。我希望能够在鼠标光标的 10 像素邻域中选择所有 3d 线（使用透视投影）。我尝试使用基于独特颜色的方法。但是这种方法不适合我，因为我不能选择所有行 - 只能选择最接近的行。我的问题有什么可以接受的解决方案吗？OpenGL 或 DirectX - 没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:33:56.243

为什么不只计算这些线和相关点之间的距离？这是一个 2D 线到点的距离计算。你可能可以用一个 Perl 脚本来实现它，该脚本调用一个调用 Lua 解释器的 Python 可执行文件，并且仍然在一秒钟内完成 100,000 个。

这是“当我只有一把锤子时，每个问题看起来都像钉子”的问题之一。您不必*使用*渲染来进行挑选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:14:35.407

在旧的 OpenGL (<= 2.1) 中，您可以使用选择模式来做到这一点。用于`gluPickMatrix()`选择光标位置周围的一个小区域，初始化选择缓冲区，进入选择模式 ( `glRenderMode(GL_SELECT)`)，然后重绘场景。然后退出选择模式，您的选择缓冲区将是出现在您感兴趣的区域中的所有绘制对象的全名（实际上是 id 编号）。您必须稍微修改您的绘图代码，以便`glPushName(objIndex)`在您渲染的每个对象周围推送/弹出名称 ( )。

这不是现代图形硬件的最有效使用，但它总是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T23:08:09.027

Neither OpenGL nor DirectX will do the job for you, because they only draw things. What you must do is projecting all the lines in your scene to the screen and test, if the closest point to the selected position is nearer than your desired max distance. You can accelerate this by keeping the lines in some spatial subdivision structure (like a Kd tree or similar) to discard quickly all those lines which definitely don't match your criteria.

# android - 如何在 android 的警报框中创建文本字段？

> ID：11495128
> 
> 赞同：0
> 
> 时间：2012-07-15T19:56:38.770
> 
> 标签：android, textfield

这是我用来创建文本字段的：

```
 final EditText username_input = new EditText(this); // create an text input field
    username_input.setHint("Enter Username"); // put a hint in it 
```

但这会创建一个文本字段，其中默认启用大写锁定。

如何创建默认未启用大写锁定的文本字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:06:31.803

尝试使用适当的[InputType 标志](http://developer.android.com/reference/android/text/InputType.html)[`setInputType`](http://developer.android.com/reference/android/widget/TextView.html#setInputType%28int%29)组合调用对象的方法——这对你来说应该没问题。`EditText``TYPE_CLASS_TEXT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:24:47.630

尝试

```
username_input.setInputType(InputType.TYPE_CLASS_TEXT); 
```

# android - api 7 中的 Android recreate() 函数

> ID：11495130
> 
> 赞同：1
> 
> 时间：2012-07-15T19:56:46.460
> 
> 标签：android, eclipse, recreate

我最近在 api 14 上编写了一个游戏。但是我意识到并不是我所有的朋友都升级了 android 手机，所以我决定在 api 7 上编写它。但是当我从 eclipse 更改属性时，有一个函数（重新创建（ )) 这在 api 7 中无效。所以我的问题是，解决方法是什么？问题是，我有一个菜单按钮，称为指令，当按下它时，它会将布局更改为我有指令的另一个视图。但是当我按回时，我希望之前的活动重新创建（），就像第一次运行一样！有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:26:37.610

选项#1：实施两项活动。

选项 #2：实现两个片段并使用`FragmentTransactions`，使用 Android 支持包的片段实现，适用于 API 级别 4+。

选项 #3：调用`setContentView()`以用不同的 UI 替换现有 UI。

选项#4：调用`startActivity()`您自己的活动来创建一个新实例，然后立即调用`finish()`以销毁原始实例。

# opencv - 多摄像头图像拼接

> ID：11495132
> 
> 赞同：7
> 
> 时间：2012-07-15T19:56:56.757
> 
> 标签：opencv, homography, image-stitching

我一直在运行一个从多个相机拼接图像的项目，但我认为我遇到了瓶颈......我对这个问题有一些疑问。

我想将来尝试将它们安装在车辆上，这意味着相机的相对位置和方向是固定的。

另外，由于我正在使用多个相机并尝试使用 HOMOGRAPHY 从它们中拼接图像，因此我将相机尽可能靠近，以便错误（由于相机的焦点不在同一位置和这是不可能的，因为相机占用了一定的空间。）可以减少。

这是我的一个简短的实验视频。 [http://www.youtube.com/watch?v=JEQJZQq3RTY](http://www.youtube.com/watch?v=JEQJZQq3RTY)

如图所示，拼接结果非常糟糕......即使相机捕获的场景是静态的，单应性仍然保持变化。

以下链接是我到目前为止所做的代码，code1.png 和 code2.png 是显示我在 Stitching_refind.cpp 中的部分代码的图片。

[https://docs.google.com/folder/d/0B2r9FmkcbNwAbHdtVEVkSW1SQW8/edit?pli=1](https://docs.google.com/folder/d/0B2r9FmkcbNwAbHdtVEVkSW1SQW8/edit?pli=1)

几天前我已经更改了代码中的一些内容，例如执行第 2、3 和 4 步（请检查上面提到的 2 张 png 图片），只需一次。

* * *

总结一下，我的问题是：

**1\. 在计算特征之前是否可以找出重叠区域？** 我不想计算整个图像的特征，因为它会导致更多的计算时间和不匹配。**我想知道是否可以仅在 2 个相邻图像的重叠区域中使用计算机特征？**

**2.如何使得到的单应性更准确？** 有人谈到 CAMERA CALIBRATION 并尝试其他一些匹配方法。我还是计算机视觉的新手……我尝试研究一些有关相机校准的材料，但我仍然不知道它的用途。

大约 2 个月前，我在这里问了一个类似的问题： [使用 OpenCV 进行图像拼接时遇到一些困难](https://stackoverflow.com/questions/10730794/having-some-difficulty-in-image-stitching-using-opencv)

，其中一位回答者克里斯说：

> 听起来您这样做是明智的，但是如果您可以访问两个摄像头，并且它们彼此之间将保持静止，那么离线校准并简单地在线应用转换将使您的应用程序更有效率。

“离线校准”是什么意思？它有什么帮助？

感谢您的任何建议和帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:13:59.337

正如克里斯所写：

```
However, your points are not restricted to a specific plane as they are 
imaging a 3D scene. If you wanted to calibrate offline, you could image 
a chessboard with both cameras, and the detected corners could be used
in this function. 
```

离线校准意味着您使用一些易于检测的校准模式。然后计算变换矩阵。在此校准之后，您将此（先前计算的）矩阵应用于获取的图像，它应该适合您。

# xcode - NSTimer If 语句未正常运行

> ID：11495134
> 
> 赞同：0
> 
> 时间：2012-07-15T19:57:35.027
> 
> 标签：xcode, cocoa, if-statement, nstimer

我想要一个按钮“getcoins”来启动一个计时器，然后触发一个 if 语句，以便如果“_currentField”//text 字段的值大于或等于 1000，则运行我编写的代码行。如果还有其他内容，则运行其他代码行。每次我运行此应用程序并尝试执行操作时，它都会运行调试器并突出显示 if 语句的第一行。我究竟做错了什么？

```
- (IBAction)getcoins:(id)sender {
        [_progIndicator startAnimation:(id)sender];
        [NSTimer scheduledTimerWithTimeInterval:5.0
                                         target:self
                                       selector:@selector(onTimer:)
                                       userInfo:nil
                                        repeats:YES];

}
// Timer for get coins
- (void)onTimer:(NSTimer*)aTimer {

    if ([_currentField.stringValue integerValue] >= 1000)

    {
        [_congrats orderFront:(id)self];
        [_progIndicator stopAnimation:(id)self];
    }

    else { 
        [_errormsg orderFront:(id)self];
        [_progIndicator stopAnimation:(id)self];

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:33:17.580

尝试以下操作：

```
- (IBAction)getcoins:(id)sender {
    [_progIndicator startAnimation:(id)sender];
    [NSTimer scheduledTimerWithTimeInterval:5.0
                                     target:self
                                   selector:@selector(onTimer)
                                   userInfo:_nil
                                    repeats:YES];

}
// Timer for get coins
- (void)onTimer:(NSTimer*)aTimer {

    if ([_currentField.stringValue integerValue] >= 1000)

    {
        [_congrats orderFront:self];
        [_progIndicator stopAnimation:self];
    }

    else { 
        [_errormsg orderFront:self];
        [_progIndicator stopAnimation:self];

        }

    } 
```

# css - 如何将自定义内容（如换行符）放入 p:column 标题中

> ID：11495137
> 
> 赞同：6
> 
> 时间：2012-07-15T19:58:19.957
> 
> 标签：css, primefaces, jsf-2, line-breaks

在我的应用程序中，我有以下内容`<p:dataTable>`：

![数据表](../Images/93cb864e0697c1bbb736b15390e9a49c.png)

第二列的标题占用太多空间。因此，我想在`Number of`&之间放置一个换行符，`Sessions`并垂直对齐表格的标题。我试图减小列的宽度，但它并没有自动导致换行。

此外，由于标题名称是从`l10n.properties`文件中检索的，因此我也尝试将其设置为`Number of /n Sessions`但`/n`被打印为普通字符串。

**更新：**我还尝试将属性设置为`Number of <br/> Sessions`. 但是，在生成的 HTML 代码中，`<br/>`消失了，表格看起来和上面完全一样。

如果您能给我一个建议，我将不胜感激。

最好的祝福，

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-16T09:24:26.193

首先，您需要`headerText`从列中删除属性并在其中添加标题方面：

```
/*  no_of_sessions = Number of &#10; Sessions  */
<p:column ... >
    <f:facet name="header">
        <h:outputText value="#{l10n.no_of_sessions}" 
                  escape="false" style="white-space:pre-line;" />
    </f:facet>
    ...
</p:column> 
```

是相关的`escape="false"`，所以 html 被转义，然后你可以把任何你想要的东西放在那里。如果您只想设置内容样式，则不需要

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T06:44:56.350

试试这个

```
<f:facet name="header">
    <h:outputLabel value="Number of&#10;Sessions" style="white-space:pre;"/>
</f:facet> 
```

如果使用属性文件中的“会话数”，请在属性文件中尝试以下操作...

```
myString = Number of \
           Sessions 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T19:59:28.420

如果是 CSS，您可以`<br/>`在“数量”之后添加一个标签。我刚看到你编辑的帖子。

您在 Firebug 中所做的实际上是“编辑文本”但是，您需要做的是“右键单击”，然后是“编辑 HTML”。这样，当您插入
标签时，文本会中断并转移到下一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T09:53:23.080

最简单的答案是在 style 属性中添加 white-space:pre-line。请参阅下面的代码

```
<p:column headerText="Number of Sessions" style="white-space:pre-line;width:50px;">
     <h:outputText value="#{value}"></h:outputText>
</p:column> 
```

# html - 字体大小差异 html/dreamweaver vs illustrator

> ID：11495139
> 
> 赞同：0
> 
> 时间：2012-07-15T19:58:32.123
> 
> 标签：html, fonts, size, dreamweaver

我确定我一定是某个地方的彻头彻尾的人，我一直在寻找答案，但是..

我发现 Dreamweaver 从 photoshop 和 illustrator 渲染字体大小的方式存在巨大差异（尝试了 pt 和 px 相同的问题）。

链接到以下 3 个屏幕截图：Georgia at 18pt in psd, Georgia at 18pt in ai, Georgia at 18pt as html /system text（与其他字体相同的问题）（尝试使用内联 css 和外部 css）

![http://i.imgur.com/ofjum.png](../Images/5837b4a6d216d4d19dd247099c0cb6c5.png)

![http://i.imgur.com/IlRtu.jpg](../Images/031b4f50a2efddb67011863c43b7767d.png)

![http://i.imgur.com/SGJTB.png](../Images/d07ea74f09b6b1dba8ae80438af90cf4.png)

测试代码在这里：

```
<body >
<div style="font-family:Georgia, 'Times New Roman', Times, serif; font-size:18pt;">
 This is a test this is a test</div>
</body>
</html> 
```

任何人都可以让我正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-11T01:23:04.827

来自 W3.org 的 html(browser) pt 声明**px：像素单位 — 1px 等于 0.75pt。**

但是 Adob​​e 产品的 pt 到 html(browser) css 的编码是**1pt(photoshop) = 1px(css)**

因此，如果您尝试在 css 中使用**18px**而不是在 css 中使用 18pt，那么您应该能够获得相同的文本字体。

见链接：[http ://www.sherriwyche.com/tools/fontconversion.html](http://www.sherriwyche.com/tools/fontconversion.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:03:48.530

如果您了解用户代理（浏览器）可以选择字体作为可用的最佳“版本”，我只能建议字体名称。例如衬线或宋体等

代理也有文本缩放设置和他们自己的字体渲染引擎。

操作系统系统使用（如在用户中）字体，所以主要是它可用的类似字体类别。完整的字体也不总是由“AKA”用户代理携带。

# android - 带有 viewpagerindicator 和 achartengine 的图表库

> ID：11495140
> 
> 赞同：1
> 
> 时间：2012-07-15T19:58:38.223
> 
> 标签：android, android-fragments, achartengine, android-adapter, viewpagerindicator

我正在使用 ViewPagerIndicator 的样式选项卡显示 ACE 图表 第一个显示的图表总是可以的。但是当您水平滑动到第二页时，第二个图表显示不好。你只有半张图表

我不知道如何在调用 ACE 之前使视图或其他技巧无效以强制完全显示

任何方向表示赞赏

```
public class Analytics extends FragmentActivity
{
    private List<String> pages;

    FragmentPagerAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        // set layout
        setContentView(R.layout.analytics);

        // set content
        pages = new ArrayList<String>();
        pages.add("history");
        pages.add("category");
        pages.add("cost");

        // set global objects
        mAdapter = new GoogleMusicAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);
    }

    class GoogleMusicAdapter extends FragmentPagerAdapter
    {
        public GoogleMusicAdapter(FragmentManager fm)
        {
            super(fm);
        }

        @Override
        public Fragment getItem(int position)
        {
            return AnalyticsFragment.newInstance(pages.get(position));
        }

        @Override
        public int getCount()
        {
        return pages.size();
        }

        @Override
        public CharSequence getPageTitle(int position)
        {
        return pages.get(position);
        }

    }

} 
```

和带有摘要代码的片段类

```
public final class AnalyticsFragment extends Fragment
{
    private static final String KEY_CONTENT = "TestFragment:Content";
    private String content;

    public static AnalyticsFragment newInstance(String mContent)
    {
        AnalyticsFragment fragment = new AnalyticsFragment();        
        fragment.content = mContent;
        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_CONTENT)) {
            content = savedInstanceState.getString(KEY_CONTENT);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        LinearLayout layout = new LinearLayout(getActivity());
        Charts chart = new Charts(getActivity());
        GraphicalView v;

        if ("history".equals(content)) {
            v = ChartFactory.getBarChartView(context, dataset, renderer, Type.DEFAULT);
        } else {
            v = ChartFactory.getPieChartView(context, dataset, renderer);
        }

        layout.addView(v);        
        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState)
    {
        super.onSaveInstanceState(outState);
        outState.putString(KEY_CONTENT, content);
    }
} 
```

版本：viewpagerindicator 2.3.1，achartengine 1.0.0

一张图值一千字： [https ://docs.google.com/open?id=0BxbpQM-2XoKYM1NZYmRLUnY3cWs](https://docs.google.com/open?id=0BxbpQM-2XoKYM1NZYmRLUnY3cWs)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T21:03:19.973

您可以通过调用使图表无效：

```
mChartView.repaint(); 
```

您可能还想试试这个：

```
mRenderer.setInScroll(true); 
```

# java - 在for循环java中分配数组的值

> ID：11495143
> 
> 赞同：9
> 
> 时间：2012-07-15T19:59:12.527
> 
> 标签：java

我仍然从 java 开始 - 任何指导都会很好。我基本上希望创建一个数组，然后在 for 循环中为该数组赋值。我现在的代码是：

```
int i;
int[] testarray = new int[50];

for (i = 0; i <=50; i++) {  
testarray[i]=i;
} 
```

我想做的就是为每个条目创建一个数组迭代次数（使用这种方法）我知道它非常简单，但我觉得在学习基础知识时我错过了一些重要的东西！谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T20:01:10.513

一切都很好，除了停止条件：

```
for (i = 0; i < 50; i++) { 
```

由于您的数组大小为 50，并且索引从 0 开始，因此最后一个索引是 49。

您应该减少 的范围`i`，避免在任何地方硬编码长度（不要重复自己的原则），并尊重 camelCase 命名约定：

```
int[] testArray = new int[50];

for (int i = 0; i < testArray.length; i++) {  
    testArray[i]=i;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T20:00:56.363

你的数组有 50 个元素，你的循环超过 51 个元素（0 到 50）。

只需将代码更改为：

```
int[] testarray = new int[50];

for (int i = 0; i < 50; i++) {  
    testarray[i] = i;
} 
```

或更好：

```
int[] testarray = new int[50];

for (int i = 0; i < testarray.length; i++) {  
    testarray[i] = i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:03:17.423

使用数组的长度而不是硬编码 50。

```
for (i = 0; i <testarray.length; i++) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-30T19:45:12.800

```
 //Create a function that takes two numbers as arguments (num, length) and returns
    // an array of multiples of num until the array length reaches length.
    package ArrayPractice;

    public class Question1 {

        //Creating array method
        public int[] arrayofMultiples(int number, int demo) {
            int[] testing = new int[demo];
            int y = 1;
            int z = number;
            for (int i = 0; i < testing.length; i++) {
                number = z * y;
                testing[i] = number;
                y++;
            }
            return testing;
        }

        public static void main(String[] args) {
            Question1 question1 = new Question1();
            // Creating an array to get the get values of array method
            int[] t1 = question1.arrayofMultiples(17, 6);
            for (int i : t1) {
                System.out.println(i);
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-01T05:24:08.470

使用for循环在java中的数组中输入元素的程序

```
import java.util.*;

public class Main{

    public static void main(String[]args){

        Scanner a=new Scanner(System.in);

// code starts here

        int length;
        length=a.nextInt();    
        int [] arr = new int[length];    
        for(int i=0;i<length;i++){
            arr[i]=a.nextInt();    
        }

        for(int i=0;i<length;i++){   
            System.out.println(arr[i]);   
        }
    }
} 
```

# html - Safari - “阅读器”功能，仅显示 1 篇文章

> ID：11495145
> 
> 赞同：0
> 
> 时间：2012-07-15T19:59:22.577
> 
> 标签：html

我刚刚注意到在我的 html5 编码的博客上，iPhone/iPod 中的“阅读器”只显示第一个“文章”。每个博客都包含在一个文章标签中。有人有这方面的信息吗？有没有关于如何做到这一点的指导方针？我的博客地址是“storkas”- dot com。

# java - MySQL：从休眠中调用存储过程（从多个表返回数据）

> ID：11495149
> 
> 赞同：0
> 
> 时间：2012-07-15T19:59:52.730
> 
> 标签：java, mysql, hibernate, stored-procedures, primefaces

我在 mysql 中有一个存储过程，它接收多个参数。现在，我想从 java 中的休眠中调用它。另外，我想实现延迟加载，例如，如果数据库中有 50,000 条记录。该过程不会立即返回所有记录，而是仅在用户需要时返回。我正在使用 primefaces 数据表来显示数据。

**注意**我没有数据库表的所有列，根据用户将提供给存储过程的参数，我只需要 5 到 6 个 db 列。为此，我创建了 POJO，其列表将保存日期。

**概括**

1.  从休眠中调用存储过程并将多个参数传递给它。
2.  实现延迟加载以提高应用程序的效率。

**更新**好的，我使用 CallableStatement 和 ResultSet 解决了上述摘要中的问题 1

关于 2 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:00:47.793

通常不需要一次为数万行获取多个字段。大多数用例属于从大量行中仅获取几列或仅为少数行获取大量列的类别。在 ORM 之前的好日子里，标准方法是创建两个查询，一个返回带有几列的结果集/游标，另一个返回单行的所有列。此外，还创建了两个值对象来处理这些存储过程的结果。看起来您已经完成了一半，因此您也可以使用 Hibernate 完全实现此方法。

# c# - FreeImageNET TIFF 转换错误

> ID：11495153
> 
> 赞同：0
> 
> 时间：2012-07-15T20:00:12.203
> 
> 标签：c#, .net, freeimage

我们有一些 TIFF 文件，我们想将其转换为 JPEG。我们尝试使用 FreeImageNET 包装器到 FreeImage 库。在 C# 中，我们有代码：

```
dib = FreeImage.Load(FREE_IMAGE_FORMAT.FIF_TIFF, path, FREE_IMAGE_LOAD_FLAGS.DEFAULT); 
```

TIFF 图像加载 好的，这里没有错误。但是如果我们想通过代码保存图像：

```
FreeImage.Save(FREE_IMAGE_FORMAT.FIF_JPEG, dib, Path.Combine(newPathForSave, fsh.GetNextFileName() + ".jpeg"), FREE_IMAGE_SAVE_FLAGS.DEFAULT); 
```

这里没有错误，但 jpeg 文件大小为零。为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:39:24.757

为什么不尝试将 JPEG 的标志更改为 FREE_IMAGE_SAVE_FLAGS.JPEG_QUALITYGOOD

检查库文档： [SAVE_FLAGS](http://freeimage.sourceforge.net/fnet/html/E77CD483.htm)

我正在使用同一个库将 bmp 保存为 TIFF，这是我从代码中看到的唯一不同之处。

# javascript - 如果我在网站上运行 IE 8 调试器，代码会发生什么变化？

> ID：11495154
> 
> 赞同：0
> 
> 时间：2012-07-15T20:00:11.513
> 
> 标签：javascript, debugging, internet-explorer-8, openlayers, ie-developer-tools

我有一个带有 OpenLayers 的网站，其中地图在 IE8 中不起作用（它在 IE9、Firefox、Opera、Chrome、Safari 中起作用）。

但是，当我在 IE8 中运行调试器工具并一直按 F5 直到完成时，网站突然运行良好。它发现的问题仅在 OpenLayers.js 中，而不在我的脚本中。

现在，我对 Web 开发真的很陌生——但我一直认为调试器不会更改代码中的任何内容，除非我手动更改，如果确实如此，我会实际看到它在做什么。但是IE8只是指出了问题，然后网站就可以工作了。

这是网站的链接：

[http://xweb.geos.ed.ac.uk/~s1148194/eq/map.html](http://xweb.geos.ed.ac.uk/~s1148194/eq/map.html)

有人可以用简单的话向我解释一下吗？

谢谢，如果这个问题相当愚蠢，我们深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:23:06.077

如果您指定它不起作用的方式会有所帮助，但我的猜测是调试器的暂停时间足够长，可以赶上某些东西，否则 IE8 之前无法及时加载或运行这是需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:26:19.270

这几乎可以肯定是一种竞争条件。如果您有 AJAX 调用，即使脚本暂停，它们后面的 HTTP 请求也会继续运行，因此它们有机会在您按 F5 继续之前完成。如果不进行调试，脚本会继续运行，并且可能会在 AJAX 结果到达之前尝试访问它。

要解决此问题，请确保等待 AJAX 结果到达，然后再尝试使用其中包含的任何内容。或者（不推荐，但可能）您可以使您的 AJAX 请求同步。这消除了竞争条件的任何可能性。

# php - 恢复到 Snow Leopard 上的默认 Apache、PHP、MySQL 设置

> ID：11495156
> 
> 赞同：1
> 
> 时间：2012-07-15T20:00:30.967
> 
> 标签：php, mysql, apache, osx-snow-leopard

我已经学会了在 Snow Leopard 上设置 apache、php 和 mysql 的各种方法，而且我对服务器配置、php 或 mysql 还不够熟悉，无法遵循任何方法。

我真的很想重新开始。是的，我知道，我应该在为所有内容保存默认备份文件的同时完成设置，但不幸的是，我想我没有涵盖所有曲目，我不确定如何安全地完全恢复到原始设置。

有什么建议么？有资源吗？有大量的设置教程，但我没有看到任何恢复默认值的教程。

非常感谢:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:09:27.840

我会选择一个 linux 虚拟机作为网络服务器。这是我在 MacOS 上的设置，我使用带有 Ubuntu 操作系统的 virtualbox。

我看到的主要优点是：

*   轻松备份/恢复/维护
*   MacOS 保持清洁
*   在 Linux 上，您可以尝试“真正的”类似生产环境，安装您需要的任何东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:10:26.340

设置 Mac 的最佳方式是使用 Homebrew。您首先需要打开 App Store 并下载最新的 XCode（我相信是 4.3.3），这需要一段时间。然后，您需要进入设置并安装 XCode 命令行工具。完成此操作后，它包括必要的 GCC 编译器等。

然后“魔术”发生了。您在 Mac 上打开终端应用程序并按照以下说明进行操作：

**安装自制软件：**

*   [https://github.com/mxcl/homebrew/wiki/Installation](https://github.com/mxcl/homebrew/wiki/Installation)

**安装 MySQL：**

*   brew install mysql （是的，就是这样）

**安装 PHP：**

*   brew install php（是的，就是这样）

* * *

这里有几个教程（我使用 nginx -> php-fastcgi 或 php-fpm 代替）：

*   [http://www.davidxia.com/2012/05/turn-mac-os-x-lion-into-a-lamp-web-server-without-mamp](http://www.davidxia.com/2012/05/turn-mac-os-x-lion-into-a-lamp-web-server-without-mamp)
*   [http://justinhileman.info/article/building-a-lamp-development-environment-on-snow-leopard/](http://justinhileman.info/article/building-a-lamp-development-environment-on-snow-leopard/)

# python - 迭代 SQLAlchemy 查询正在重置新分配的变量

> ID：11495166
> 
> 赞同：0
> 
> 时间：2012-07-15T20:01:17.330
> 
> 标签：python, sqlalchemy

我一直在使用 SQLAlchemy 连接到 MySQL 数据库。到目前为止，它一直运行良好，但我遇到了一些麻烦。我想在我的一个类被查询后调用一个方法，它会分配一些新的变量。问题是每个查询只有一个用户最终会使用我的“on_query”方法设置变量。

```
...stuff setting up a connection to the database as well as a SQL session.
   All were done using default values.

class UserTest(Base):
    __tablename__ = "testtable"

    ID = Column(Integer(unsigned=True),
                primary_key=True, nullable=False, autoincrement=True)

    def __init__(self):
        pass

    def on_query(self):
        self.foo = "bar"

query = session.query(UserTest)

for u in query:
    u.on_query()

print [hasattr(u, "foo") for u in query]
#prints [False, False, False, False, False, False, False, False, False, True]

session.close() 
```

我发现如果我要通过迭代查询来创建一个列表，'on_query' 方法会按我的预期工作。

```
users = [u for u in query]
for u in users:
    u.on_query()
print [hasattr(u, "foo") for u in users]
#prints [True, True, True, True, True, True, True, True, True, True] 
```

这是什么原因？有没有办法阻止它每次迭代都删除“foo”变量？如果可能的话，我更愿意将用户保留在查询对象中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:11:07.603

在第一种情况下，查询实际上产生了两次，一次是 for 循环，一次是 print 语句。

由于 for 循环不断替换`u`引用，因此在循环结束时，只有最后一个保留在 SQLAlchemy 会话中。您可以使用 来验证这一点`print session.identity_map`。

当 print 语句第二次产生查询时，除了最后一个之外的所有查询都必须再次从数据库中检索，而最后一个则直接从 SQLAlchemy 会话中检索，因此具有`foo`属性集。

编辑：更透明地做到这一点的一种方法是使用重构器，例如

```
class UserTest(Base):
    ...

    @orm.reconstructor
    def init_on_load(self):
        self.foo = "bar" 
```

# c#-4.0 - WCF 服务端点在通过问号 (?) 调用后不返回字符串

> ID：11495169
> 
> 赞同：0
> 
> 时间：2012-07-15T20:01:45.423
> 
> 标签：c#-4.0, rest, wcf-data-services

我正在使用 WCF 构建 Web 服务。该服务必须支持 REST。

这是我到目前为止所做的：

我为应用程序配置了一个`baseAddress`、`mex`端点和一个具有`webhttpbinding`.

这是服务配置：

```
<service name="ServiceLibrary.Service" behaviorConfiguration="myServiceBehavior">
    <endpoint 
        address="" 
        behaviorConfiguration="webHttp"
        binding="webHttpBinding" bindingConfiguration="" 
        contract="ServiceLibrary.IEvalService" >
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/sdata/myApp/myContract/-/"/>
      </baseAddresses>
    </host>
  </service> 
```

这是行为配置：

```
 <serviceBehaviors>
    <behavior name="myServiceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="webHttp">
      <webHttp/>
    </behavior>
  </endpointBehaviors> 
```

我正在建立这样的服务合同：

```
[ServiceContract]
public interface IEvalService
{
    [OperationContract]
    [WebGet(UriTemplate = "/employees('{MDNr}:{ANNr}')")]
    Atom10ItemFormatter GetEmployeeByPK(string MDNr, string ANNr);

    [OperationContract]
    [WebGet]
    string employees(string queryString);
} 
```

我正在一个单独的类中处理操作合同：

```
public class Service : IEvalService
{
    public Atom10ItemFormatter GetEmployeeByPK(string MDNr, string ANNr){return Employee.GetEmployeeByPK(MDNr, ANNr);}
    public string employees(string queryString)
    {
        System.Diagnostics.Debug.WriteLine("Query: " + queryString);
        return queryString;
    } 
```

这两个方法都在执行 GET 方法后被调用。

我这样称呼第一个：

```
http://localhost:8732/sdata/myApp/myContract/-/employees('3:37') 
```

它完美地工作，给我ID等。

我这样称呼的第二个：

```
http://localhost:8732/sdata/myApp/myContract/-/employees?where=name eq 'bla' 
```

这就是麻烦开始的地方。方法员工被调用，但它没有收到任何字符串。我不知道为什么。这是完全相同的代码，就像在那些教程中一样，我只是更改了名称......

有人看到我明显犯的错误吗？我真的很感激任何帮助。

还有一件事：我正在使用 .Net 4.0 并在调试器上运行它，这样我就可以通过 firefox rest 客户端调用 url？这是一个服务库项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:21:08.437

尝试更改参数的名称：

```
string employees(string **where**); 
```

或更改网址：

```
http://localhost:8732/sdata/myApp/myContract/-/employees?**queryString**=name eq 'bla' 
```

回复您的评论：

1.  创建一个名为“查询”的参数，然后解析它的值。在这种情况下，您负责将查询从字符串解析为实际查询并执行它。
2.  检查“ [WCF 数据服务](http://msdn.microsoft.com/en-us/library/cc668792.aspx)”。它可以帮助您使用 URL 查询数据。

# google-app-engine - AppEngine 开发服务器在 JSP 中给出 StackOverflowError

> ID：11495170
> 
> 赞同：2
> 
> 时间：2012-07-15T20:01:50.327
> 
> 标签：google-app-engine, eclipse-plugin, gae-eclipse-plugin

我在从serlvet`JSP`提供的文件中使用以下代码。`AppEngine`

```
<script type="text/javascript" >
    var role = <%= request.getAttribute("role") %>;
</script> 
```

该变量是从`Servlet`使用设置的：

```
req.setAttribute("role", role );
req.getRequestDispatcher("index.jsp").forward(req, resp); 
```

该代码在 AppEngine 生产环境中运行良好，但在本地开发服务器中，我立即得到以下信息：

```
Problem accessing /. Reason:

INTERNAL_SERVER_ERROR
Caused by:

java.lang.StackOverflowError
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438)
at org.mortbay.jetty.servlet.Dispatcher$ForwardAttributes.setAttribute(Dispatcher.java:438) 
```

这就像永远一样。在调试的时候，我还可以看到 Servlet 代码被调用了无数次。

我发现了一些关于 AppEngine 生产的类似问题的参考，但没有发现 AppEngine 开发服务器的可行修复。

任何想法 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-09T01:06:07.640

我在使用 Google App Engine 从 servlet 转发到 JSP 时遇到了类似的问题，甚至没有明确设置任何变量，我所拥有的只是以下行：

```
req.getRequestDispatcher("game.jsp").forward(req, resp); 
```

就我而言，结果是因为在 web.xml 中我有以下行（注意包罗万象的 url 模式：

```
<servlet-mapping>
    <servlet-name>GameServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我认为这也捕获了 JSP 路径并因此循环。当我改变它时，它也不是一个包罗万象的东西。如：

```
<servlet-mapping>
    <servlet-name>GameServlet</servlet-name>
    <url-pattern>/game</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:59:08.377

您确定要在响应中设置属性吗？

```
req.setAttribute("role", role ); 
```

似乎您是在进入 servlet 的请求中设置它，而不是在您发送的响应中设置它。

# css - 将外部css文件加载到haml

> ID：11495175
> 
> 赞同：0
> 
> 时间：2012-07-15T20:02:36.453
> 
> 标签：css, sinatra, haml

我正在使用haml和sinatra

当 css 在 .haml 文件中时，样式有效。当我使用 %link 时，看不到样式

```
%link(rel="stylesheet" type="text/css" href="styles.css") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:21:24.017

通过查看 github 上的一些 sinatra 应用程序偶然发现了答案。我创建了一个名为 public 的目录（与 views 目录相同级别）并将 styles.css 文件放在该目录中。

# android - 如何将应用程序放到后台？

> ID：11495188
> 
> 赞同：1
> 
> 时间：2012-07-15T20:04:49.187
> 
> 标签：android, background-process

如何将应用程序（活动？）放到后台以便它可以在那里工作？

`moveTaskToBack(true);`不起作用。我有`android:noHistory="true"`这个代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    switch(keyCode)
    {
        case KeyEvent.KEYCODE_BACK:
            moveTaskToBack(true);
            return true;
    }
    return false;
} 
```

怎么了？如何将应用程序放到后台？

**upd**：或者我只能在根（MAIN，LAUNCHER）活动中使用moveTaskToBack（true）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:27:12.807

如果您因为某些活动而想跳到主屏幕，您可以这样做：

```
 Intent i = new Intent(Intent.ACTION_MAIN);
    i.addCategory(Intent.CATEGORY_HOME);
    startActivity(i); 
```

只需确保您正在从主活动线程运行代码。“startActivity”意味着这个函数是从主活动中运行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:12:17.090

`activity`不适用于后台进程。为您的后台进程使用[服务](http://developer.android.com/reference/android/app/Service.html)。

# hadoop - Hadoop 映射器从 2 个不同的源输入文件中读取

> ID：11495193
> 
> 赞同：3
> 
> 时间：2012-07-15T20:05:34.340
> 
> 标签：hadoop, mapreduce

我有链接很多 Mappers 和 Reducers 的工具，在某些时候我需要合并以前的 map-reduce 步骤的结果，例如作为输入，我有两个包含数据的文件：

```
/input/a.txt
apple,10
orange,20

*/input/b.txt*
apple;5
orange;40 
```

结果应该是 c.txt，其中**c.value = a.value * b.value**

```
/output/c.txt
apple,50   // 10 * 5
orange,800 // 40 * 20 
```

怎么可能做到？我通过引入简单的 Key => MyMapWritable (type=1,2, value) 并在 reducer 中合并（实际上是相乘）数据解决了这个问题。它有效，但是：

1.  感觉可以做得更容易（闻起来不好）
2.  是否有可能在 Mapper 内部知道哪个文件被用作记录提供者（a.txt 或 b.txt）。现在，我只使用了不同的分隔符：逗号和分号 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:16:46.217

假设它们已经以相同的方式进行了分区和排序，那么您可以使用[CompositeInputFormat](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapred/join/CompositeInputFormat.html)来执行 map-side-join。[这里](http://www.congiu.com/joins-in-hadoop-using-compositeinputformat/)有一篇关于使用它的文章。我不认为它已被移植到新的 mapreduce api。

其次，您可以通过调用来获取映射器中的输入文件`context.getInputSplit()`，这将返回InputSplit，如果您正在使用`TextInputFormat`，您可以将其转换为a `FileInputSplit`，然后调用`getPath()`以获取文件名。我认为您不能将此方法与 CompositeInputFormat 一起使用，因为您不知道 TupleWritable 中的 Writables 来自何处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T07:49:28.547

```
String fileName = ((FileSplit) context.getInputSplit()).getPath()
                .toString();

if (fileName.contains("file_1")) {
   //TODO for file 1
} else {
   //TODO for file 2
} 
```

# zip - 无法在 Gradle 中创建 Zip 存档

> ID：11495195
> 
> 赞同：14
> 
> 时间：2012-07-15T20:05:49.323
> 
> 标签：zip, gradle

我正在尝试创建一个简单的 Zip 存档，其中包含我的资源目录中的所有 javascript 文件

这是代码：

```
 task zip(type:Zip){
    from ('resources/'){
        include '*.js'
    }
    into 'resources'
} 
```

由于某种原因，这似乎不起作用。我听过很多人说你只需要一个`from`和`into`创建一个档案。有人可以在这里帮助我吗？我正在使用 Gradle v1.0。提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T20:29:45.427

尝试这样的事情（[文档](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.bundling.Zip.html#org.gradle.api.tasks.bundling.Zip:)）：

```
task zip(type:Zip) {
 from ('resources/')
 include '*.js'
 into 'resources' // note that this specifies path *in* the archive
 destinationDir file('dir') // directory that you want your archive to be placed in
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-28T11:49:59.247

```
task someTask << {

    // other code...

    task(zipResources, type: Zip) {
        destinationDir new File(projectDir, 'resources')
        archiveName 'resources.zip'
        from 'src/main/webapp'
        include '*.js'
    }.execute()

    task(zipSomethingElse, type: Zip) {
        destinationDir buildDir
        archiveName 'source-code.zip'
        from 'src/main/java'
        include '**/*.java'
    }.execute()

    // some other code...

} 
```

# android - 在不同分辨率之间移动时保持同步？

> ID：11495198
> 
> 赞同：3
> 
> 时间：2012-07-15T20:06:18.527
> 
> 标签：android, animation, android-animation

我的问题是让一个项目以相同的速度和时间在不同的屏幕上移动。目前该项目没有移动或快速移动。我为要到达的项目指定两个点和最大速度。

Var _oneStep 是我尝试同步分辨率。

```
//Get a fraction of screen size?
_oneStep = ScreenWidth / 100;

//Delta being last update time.
public void MoveItem(double Delta)
{
    //Keep at Max speed.
    if(Math.abs(_xVelocity)  > _maxSpeed || Math.abs(_yVelocity)  > _maxSpeed)
    {
        _accelerationSpeed = 0.0001f * (_maxSpeed / _oneStep);
    }
    //Or Speed up.
    else
    {
        _accelerationSpeed = 0.00030f * (_maxSpeed / _oneStep);
    }
    //Destination is above 10% distance or below speed up or down

    _xVelocity += _accelerationSpeed * Math.cos(Math.toRadians(_degrees));
    _yVelocity += _accelerationSpeed * Math.sin(Math.toRadians(_degrees));

    _currentPosition.x += (((_xVelocity * _accelerationSpeed) + _oneStep) * Delta);
    _currentPosition.y += (((_yVelocity * _accelerationSpeed) + _oneStep) * Delta);

    CheckAtDestination();
} 
```

一些数字：

```
System.out.println("X: "+ _xVelocity + " Y: " + _yVelocity); = X: 1.0018943990787657 Y: 1.0109980390961948
System.out.println("XPos: "+ _currentPosition.x + " YPos: " + _currentPosition.x); = XPos: 36 YPos: 36
System.out.println("Degrees: " + _degrees); = Degrees: 80.22677351282063
System.out.println(Delta); = 0.3309303333093033 
```

如果 Delta 变为 1 或更大会怎样？是否产生了奇怪的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:39:32.500

上面的代码有效，只需确保 _oneStep 变量是 screenWidth 或 Height （取决于您的对象大小，可能取决于屏幕）。

所以 _oneStep = ScreenWidth / 100; 并且需要将三角洲添加到任何运动中。

# css - CSS 中的负边距如何工作，为什么是 (margin-top:-5 != margin-bottom:5)？

> ID：11495200
> 
> 赞同：129
> 
> 时间：2012-07-15T20:06:27.477
> 
> 标签：css, margin

垂直定位元素的一个常见技巧是使用以下 CSS：

```
.item {
    position:absolute;
    top:50%;
    margin-top:-8px; /* half of height */
    height: 16px;
} 
```

当在 Chrome 中的度量视图中看到时，您会看到以下内容：

![在此处输入图像描述](../Images/9e8d79bbe5941561ef08d80040b77568.png)

但是，当您将鼠标悬停在元素上时，没有显示可视边距，即边距在边界“外部”并且可以可视化。但负边距不会出现。它们看起来如何，是什么让它与众不同？

为什么`margin-top:-8px` *不一样* `margin-bottom:8px`？

那么负边距是如何工作的，它们背后的直觉是什么。他们如何“撞上”（如果是`margin-top < 0`）一个项目？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-07-16T06:20:18.037

负边距在 css 中是有效的，理解它们的（合规）行为主要基于[盒子模型](http://www.w3.org/TR/CSS2/box.html#box-margin-area)和边距折叠。虽然某些场景更复杂，但在研究规范后可以避免许多常见错误。

*例如，示例代码的呈现由 css 规范指导，如[为绝对定位的非替换元素计算高度和边距中](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height)所述。*

如果我要进行图形表示，我可能会使用这样的东西（不按比例）：

![负上边距](../Images/6a616a996443840a0711567918a80e54.png)

顶部的*边距框*丢失`8px`，但这不会影响*内容和填充框*。因为您的元素是绝对定位的，所以将元素向上移动 8px 不会对布局造成任何进一步的干扰；静态流入内容并非总是如此。

**奖金：**

仍然需要说服阅读规范是要走*的路（而不是*[像这样的文章](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)）？我看到您正在尝试将元素垂直居中，那么为什么必须设置`margin-top:-8px;`而不是`margin-top:-50%;`？

好吧，CSS 中的垂直居中[比它应该的要难](https://stackoverflow.com/a/9758556/1081234)。当以 % 为单位设置**上**边距或**下**边距时，该值始终以相对于[包含块的](https://developer.mozilla.org/en/CSS/margin-top)[**宽度**](https://developer.mozilla.org/en/CSS/margin-top)[的百分比](https://developer.mozilla.org/en/CSS/margin-top)**计算。这是一个相当常见的陷阱，并且在 w3 docos 之外很少描述这个怪癖**

 *** * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-07-15T22:09:19.197

我将尝试直观地解释它：

```
/**
 * explaining margins
 */

body {
  padding: 3em 15%
}

.parent {
  width: 50%;
  width: 400px;
  height: 400px;
  position: relative;
  background: lemonchiffon;
}

.parent:before,
.parent:after {
  position: absolute;
  content: "";
}

.parent:before {
  top: 0;
  bottom: 0;
  left: 50%;
  border-left: dashed 1px #ccc;
}

.parent:after {
  left: 0;
  right: 0;
  top: 50%;
  border-top: dashed 1px #ccc;
}

.child {
  width: 200px;
  height: 200px;
  background: rgba(200, 198, 133, .5);
}

ul {
  padding: 5% 20px;
}

.set1 .child {
  margin: 0;
  position: relative;
}

.set2 .child {
  margin-left: 75px;
  position: relative;
}

.set3 .child {
  margin-left: -75px;
  position: relative;
}

/* position absolute */

.set4 .child {
  top: 50%;
  left: 50%;
  margin: 0;
  position: absolute;
}

.set5 .child {
  top: 50%;
  left: 50%;
  margin-left: 75px;
  position: absolute;
}

.set6 .child {
  top: 50%; /* level from which margin-top starts 
	- downwards, in the case of a positive margin
	- upwards, in the case of a negative margin	
	*/
  left: 50%; /* level from which margin-left starts 
	- towards right, in the case of a positive margin
	- towards left, in the case of a negative margin	
	*/
  margin: -75px;
  position: absolute;
}
```

```
<!-- content to be placed inside <body>…&lt;/body> -->
<h2><code>position: relative;</code></h2>
<h3>Set 1</h3>
<div class="parent set 1">
  <div class="child">
    <pre>
.set1 .child {
  margin: 0;
  position: relative;
}
		</pre>
  </div>
</div>

<h3>Set 2</h3>
<div class="parent set2">
  <div class="child">
    <pre>
.set2 .child {
  margin-left: 75px;
  position: relative;
}
		</pre>
  </div>
</div>

<h3>Set 3</h3>
<div class="parent set3">
  <div class="child">
    <pre>
.set3 .child {
  margin-left: -75px;
  position: relative;
}
		</pre>
  </div>
</div>

<h2><code>position: absolute;</code></h2>

<h3>Set 4</h3>
<div class="parent set4">
  <div class="child">
    <pre>
.set4 .child {
  top: 50%;
  left: 50%;
  margin: 0;
  position: absolute;
}
		</pre>
  </div>
</div>

<h3>Set 5</h3>
<div class="parent set5">
  <div class="child">
    <pre>
.set5 .child {
  top: 50%;
  left: 50%;
  margin-left: 75px;
  position: absolute;
}
		</pre>
  </div>
</div>

<h3>Set 6</h3>
<div class="parent set6">
  <div class="child">
    <pre>
.set6 .child {
  top: 50%;
  left: 50%;
  margin: -75px;
  position: absolute;
}
		</pre>
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-07-15T20:12:09.583

边距是元素外部的间距，就像填充是元素内部的间距一样。

设置下边距表示您希望在当前块下方的距离。设置负上边距表示您希望块上方有负间距。负间距本身可能是一个令人困惑的概念，但就像正上边距将内容向下推一样，负上边距将内容向上拉。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-07-15T20:09:25.747

-8px 的 margin-top 意味着它将比它具有 0 边距时高 8px。

8px 的 margin-bottom 意味着它下面的东西将比它有 0 边距的情况更向下 8px。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2012-07-16T09:06:13.537

这里已经提出了很好的观点，但是虽然有很多关于浏览器***如何***完成边距渲染的信息，但***为什么***还没有完全回答：

> “为什么 margin-top:-8px 与 margin-bottom:8px 不一样？”

我们还可以问的是：

> 为什么正的下边距不会“向上”在元素之前，而正的上边距“向下”在元素之后？

所以我们看到的是，**边距的呈现会有所不同，这取决于它们应用到的一侧**——顶部（和左侧）边距与底部（和右侧）边距不同。

当（简化）查看浏览器如何应用样式时，事情变得更加清晰：元素在视口中自上而下呈现，从左上角开始（现在让我们坚持垂直渲染，请记住水平的也一样）。

考虑以下html：

```
<div class="box1"></div>
<div class="box2"></div>
<div class="box3"></div> 
```

类似于它们在代码中的位置，这三个盒子在浏览器中“自上而下”地堆叠在一起（*为了简单起见，我们不会在这里考虑`order`css3 'flex-box' 模块的属性*）。因此，每当样式应用于框 3 时，前面元素的位置（对于框 1 和 2）已经确定，并且为了渲染速度不应再更改。

现在，想象框 3 的上边距为 -10px。浏览器不会向上移动所有前面的元素以收集一些空间，而是将框 3 向上推，因此它呈现在顶部（或底部，具体取决于 z-index ) 任何前面的元素。即使性能不是问题，向上移动所有元素也可能意味着将它们移出视口，因此必须更改当前滚动位置才能使所有内容再次可见。

这同样适用于框 3 的底部边距，无论是负的还是正的：不是影响已经评估的元素，而是为即将到来的元素确定一个新的“起点”。因此，设置一个正的底部边距会将**以下**元素向下推；消极的人会把他们推高。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-15T20:38:38.873

因为您使用了绝对定位，并指定了顶部百分比，所以只有 margin-top 会影响 .item 对象的位置。相反，如果您使用底部：50% 定位它，那么您需要 margin-bottom -8px 将其居中，而 margin-top 将无效。

边距会在定位元素方面影响元素的边界，无论是绝对像您的情况，还是相对于相邻元素。想象一下，margin 是它所在元素的基础。它们通常与它的大小相同，但可以在四个边缘中的任何一个或所有边缘上做得更大或更小。

您的 CSS 告诉浏览器将元素顶部的边距定位在页面下方 50% 的位置。然而，由于所有元素都不是一个像素，浏览器需要知道它的哪一部分在页面下方排成 50%。为了对齐元素的顶部，它使用上边距。默认情况下，这与元素的顶部一致，但您可以使用 CSS 对其进行更改。

在您的情况下，前 50% 将导致元素的顶部从页面中间开始。通过应用负上边距，浏览器使用从顶部到元素 8px 的点（即穿过它中间的线）作为定位 50% 的位置。

如果您对底部应用正边距，这会扩展浏览器用于将底部定位到远离元素本身的线，从而在底部与下面的任何相邻元素之间产生间隙，或者如果定位基于底端。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-01-16T02:17:02.447

我想知道这个问题是否得到了很好的回答：css margins 是如何工作的，为什么它是 margin-top:-5; 与 margin-bottom:5; 不一样？

边距是与元素周围的距离。margin-top 表示“......当我们从元素的'box'的顶部'side'测量时与周围环境的距离，margin-bottom 是与'box'底部'side'的距离”。然后 margin-top:5; 与顶部“侧面”周长有关，在这种情况下为-5；从顶部“边”接近的任何东西都可以与元素的顶部“边”重叠 5，并且 margin-bottom:5; 表示元素底部“边”与周围之间的距离为 5。

基本上，但受浮动元素等的影响： http: [//www.w3.org/TR/CSS2/box.html#margin-properties](http://www.w3.org/TR/CSS2/box.html#margin-properties)。

[http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)

我接受纠正。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-13T22:15:44.190

只是为了与上面的好答案有所不同，因为这有助于我对负边距有一个直观的理解：

*元素上的负边距允许它占用其父容器的空间。*

在底部添加（正）边距不允许元素这样做 - 它只会推回下方的任何元素。**

# c# - NHibernate - 侦听器未应用于级联子级

> ID：11495204
> 
> 赞同：1
> 
> 时间：2012-07-15T20:06:42.103
> 
> 标签：c#, nhibernate, cascade

我对 Nhibernate 和一个非常简单的父子关系有以下问题。

我有三个听众：保存、更新、删除。如果被持久化的对象实现 IAudiCreate 接口，我分配 CreatedDate 字段。

我的父映射

```
<hibernate-mapping assembly="Model" namespace="Model" xmlns="urn:nhibernate-mapping-2.2">
  <class name="SecSession" table="SEC_SESSION" lazy="true" >
    <id name="SecSessionId">
      <column name="SEC_SESSION_ID" sql-type="bigint" not-null="true" />
      <generator class="identity" />
    </id>
    <property name="CreatedDate">
      <column name="CREATED_DATE" sql-type="datetime" not-null="true" />
    </property>
    <bag name="SecSessionLogs" inverse="true" cascade="all-delete-orphan" >
      <key column="SEC_SESSION_ID" />
      <one-to-many class="SecSessionLog" />
    </bag>
  </class>
</hibernate-mapping> 
```

我的孩子映射

```
<hibernate-mapping assembly="Model" namespace="Model" xmlns="urn:nhibernate-mapping-2.2">
  <class name="SecSessionLog" table="SEC_SESSION_LOG" lazy="true" >
    <id name="SecSessionLogId">
      <column name="SEC_SESSION_LOG_ID" sql-type="bigint" not-null="true" />
      <generator class="identity" />
    </id>
    <many-to-one lazy="false" name="SecSession">
      <column name="SEC_SESSION_ID" sql-type="bigint" not-null="true" />
    </many-to-one>
    <property name="LogMessage" type="StringClob">
      <column name="LOG_MESSAGE" sql-type="nvarchar(max)" not-null="true" />
    </property>
    <property name="CreatedDate">
      <column name="CREATED_DATE" sql-type="datetime" not-null="true" />
    </property>
  </class>
</hibernate-mapping> 
```

所以我创建了一个 SecSession 对象，然后调用 SecSession.AddLog(new SecSessionLog)。

为了坚持，我这样做：

```
using (var dataSession = DataStore.OpenDataSession())
  using (var transaction = dataSession.BeginTransaction())
  {
    var id = (PK)dataSession.Save(secSession);
    transaction.Commit();
    return id;
  } 
```

我没有明确发送要保存的 SecSessionLog，因为映射显示：CASCADE=ALL-DELETE-ORPHAN。

所以这里的问题是没有为子 Log 对象调用侦听器，因此 CreatedDate 字段为空，我在数据库中得到一个空值异常。

映射中是否缺少要配置的内容？在听众中？

您的帮助将不胜感激！

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:39:33.703

我还使用级联到应用程序。在我的情况下，我需要拦截“插入”、“删除”和“更新”命令，以确保在执行的操作范围内仅保留特定的实体子集。

就我而言，以下事件有效：`IPreInsertEventListener`, `IPreUpdateEventListener`, `IPreDeleteEventListener`.

**我之前的回答是错误的！**

正确答案：

不能使用'IPreInsertEventListener'，此时，改变实体的属性是没有效果的。之所以会这样，是因为 NHibernate 已经捕获了将用于运行 SQL 命令的数据。我已经测试过了。

我希望很快有答案。

但我认为您的问题应该涉及以下听众：“合并”、“保存更新”、“保存”、“更新”、“预收集-重新创建”、“预收集-删除”和“预收集-更新”。

**我之前的回答又错了！**

我已经测试并看到使用上面列出的事件*需要大量编码，我无法使其与“SecSession”中的“合并”一起工作，然后插入和更新级联到“SecSessionLogs”。

有一种方法可以在监听器内修改后切换回 NHibernate 的属性值。

*“合并”、“保存更新”、“保存”、“更新”、“收集前重新创建”、“收集前删除”和“收集前更新”

这段代码显示：

```
public class AuditCreateListener : IPreInsertEventListener, IPreUpdateEventListener
{
    public bool OnPreInsert(PreInsertEvent @event)
    {
        return this.OnEventCommon(
            @event, 
            new Action<object[]>(
                delegate(Object[] newState) 
                {
                    newState.CopyTo(@event.State, 0);
                }));
    }

    public bool OnPreUpdate(PreUpdateEvent @event)
    {
        return this.OnEventCommon(
            @event,
            new Action<object[]>(
                delegate(Object[] newState)
                {
                    newState.CopyTo(@event.State, 0);
                }));
    }

    private bool OnEventCommon(AbstractPreDatabaseOperationEvent @event, Action<object[]> setStateCallback)
    {
        IAuditCreate auditCreate = @event.Entity as IAuditCreate;
        if (auditCreate != null && auditCreate.CreatedDate == null)
        {
            auditCreate.CreatedDate = DateTime.Now;

            if (setStateCallback != null)
            {
                Object[] newState = @event.Persister.GetPropertyValues(auditCreate, EntityMode.Poco);
                setStateCallback(newState);
            }
        }

        return false;
    }
} 
```

很快我会发布完整的源代码。

**再次编辑：**

**概念证明：**

*   `AuditCreateListenerBrokenTet`：测试事件：“save”、“save-update”、“update”、“merge”、“flush-entity”、“pre-collection-recreate”、“pre-collection-remove”和“pre-collection” -更新”。
*   `AuditCreateListenerTet`：测试事件：“预更新”和“预插入”。

表格内容：

SEC_SESSION：

```
#|SEC_SESSION_ID|CREATED_DATE    
-+--------------+----------------
1|1             |2012-07-10 16:53
2|2             |2012-07-11 16:53
3|3             |2012-07-12 16:53
4|4             |2012-07-13 16:53 
```

SEC_SESSION_LOG：

```
#|SEC_SESSION_LOG_ID|LOG_MESSAGE  |CREATED_DATE    |SEC_SESSION_ID
-+------------------+-------------+----------------+--------------
1|1                 |LOG_MESSAGE_1|2012-07-10 16:53|1             
2|2                 |LOG_MESSAGE_2|2012-07-11 16:53|2             
3|3                 |LOG_MESSAGE_3|2012-07-12 16:53|3             
4|4                 |LOG_MESSAGE_4|2012-07-13 16:53|4 
```

我正在使用：

*   NHibernate 3.2.0
*   System.Data.SQLite 1.0.80.0

完整的源代码在这里：[Q11495204.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11495204.7z)

**笔记：**

*   在打开解决方案（“.\Src\SofPOC.2010.sln”）之前，运行“.\Dependencies\setup.bat”来加载依赖项。
*   有关依赖项的说明，请参阅“.\readme.txt”和“.\dependencies\readme.txt”。

# apache - mod_rewrite 隐藏“.php”扩展名（无查询字符串）

> ID：11495209
> 
> 赞同：0
> 
> 时间：2012-07-15T20:07:35.843
> 
> 标签：apache, mod-rewrite

我需要做

> domain.com/file.php

进入

> domain.com/文件

我看过其他问题，但大多数是关于隐藏文件名并只显示查询字符串，我不会使用查询字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:29:47.760

你确定[这些都不适合你](https://stackoverflow.com/search?q=removing+php+extension&submit=search)吗？很多这些答案几乎就是你想要的。例如，第一个结果中有以下规则：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L] 
```

或者，您可以尝试打开[Multiviews](http://httpd.apache.org/docs/current/content-negotiation.html)并让它为您处理它：

```
Options +Multiviews 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:29:19.587

```
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule ^/file.php$ /file [L,R=301] 
```

# ruby-on-rails - RoR：如何添加 make link_to 指向当前 URL 并添加参数

> ID：11495210
> 
> 赞同：1
> 
> 时间：2012-07-15T20:07:49.010
> 
> 标签：ruby-on-rails

我正在使用 Ruby On Rails 3.x

一个控制器的多个视图调用同一个局部视图，因为 90% 的局部视图对于所有视图都是相同的，另外 10% 是通过局部视图中的 IF/ENDIF 处理的。

现在我需要一个指向当前 URL 的链接并向它传递一个参数，例如，如果当前 URL 是，`http://myapp.com/welcome/index_1`那么我需要一个指向`http://myapp/welcome/index_1?par=abcd` With

```
<%=link_to "Info",url_for(:only_path=>true)%> 
```

我得到了当前 URL 的链接，但是如何添加附加参数。

```
<%=link_to "Info",url_for(:only_path=>true,:par=>"abcd")%> 
```

不工作，也不是：

```
<%=link_to "Info",url_for(:only_path=>true), :par=>"abcd"%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:18:42.050

尝试这个

```
<%= link_to "info", url_for(par: "abcd") %> 
```

# heroku - 运行我的 play 1.2.4 应用程序时的 Sigsegv

> ID：11495211
> 
> 赞同：1
> 
> 时间：2012-07-15T20:07:54.147
> 
> 标签：heroku, playframework, playframework-1.x

“heroku 日志”输出位于此处：

[https://raw.github.com/gist/3118402/fc9e0617dee107d44ff5b07823b954fb8cd46c15/hrokuLogsOutput](https://raw.github.com/gist/3118402/fc9e0617dee107d44ff5b07823b954fb8cd46c15/hrokuLogsOutput)

在 heroku 上运行播放应用程序时，我找不到太多关于 sigsegv 的信息。从我能找到的小信息来看，JVM似乎有问题，但heroku已经修复了它。

我也不太明白如何在 heroku 中访问以下报告文件以提供更多信息。

2012-07-15T12:33:26+00:00 app[web.1]: # 包含更多信息的错误报告文件保存为：2012-07-15T12:33:26+00:00 app[web.1 ]: # /app/hs_err_pid3.log

sigsegv 对于运行播放应用程序意味着什么？我应该采取哪些步骤来尝试解决这个问题？

编辑：由于我缺乏声誉，我无法在另外 7 个小时内回答我自己的问题。无论如何，这里是

*   所以我尝试了玩 1.2.3 和 1.2.4，在 heroku 上运行它时都没有为我工作。我没有尝试 1.2.5 的原因是因为运行“播放版本”输出“播放 1.2.x-localbuild”。我不相信它会安装在 heroku 上，尽管 1.2.5 是官方版本。

但是，我现在刚刚尝试过，效果很好。确保依赖项是“play 1.2.5”而不是“play 1.2.x-localbuild”

希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:51:35.803

所以我尝试了玩 1.2.3 和 1.2.4，在 heroku 上运行它时都没有为我工作。我没有尝试 1.2.5 的原因是因为运行“播放版本”输出“播放 1.2.x-localbuild”。我不相信它会安装在 heroku 上，尽管 1.2.5 是官方版本。但是，我现在刚刚尝试过，效果很好。确保依赖项是“play 1.2.5”而不是“play 1.2.x-localbuild”

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:10:27.553

该错误意味着 JVM 已崩溃。不幸的是，没有办法访问 Heroku 上保存的转储文件。但是您应该能够通过在本地使用相同版本的 OpenJDK 6 来重现该错误。

# c# - 使用 JSON 获取信息

> ID：11495217
> 
> 赞同：-3
> 
> 时间：2012-07-15T20:08:57.310
> 
> 标签：c#, json

有人可以解释我如何使用 JSON 吗？我知道它与 XML 有一些共同点，但据我所知就这么多。
我正在尝试从此页面[链接](http://bukget.org/api/plugins)中获取所有名称并将它们放入列表中，以便我可以将它们放入列表视图中。

有谁知道我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:13:46.900

JSON（JavaScript 对象表示法）是一种使用文本字符串在两台计算机之间进行信息通信的简单标准化方式。您将需要使用 JSON 库，并且该库应生成可用于填充列表的对象。

有关格式的更多信息以及 C# 库的链接，请参阅[json.org](http://json.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:30:03.843

我在 C# 中使用过[System.Runtime.Serialization.Json](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.aspx) json 库，非常简单。

我建议您将[链接](http://bukget.org/api/plugins)的单词放入一个字符串中，然后尝试将其反序列化到您的班级。

还要检查[数据序列化格式的比较](http://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)和[json](http://en.wikipedia.org/wiki/JSON) wiki。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T20:48:56.110

你有很多选择使用 Json

```
WebClient wc = new WebClient();
string json = wc.DownloadString("http://bukget.org/api/plugins"); 
```

* * *

[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)

```
var ser1  = new DataContractJsonSerializer(typeof(List<string>));
var list1 = (List<string>)ser1.ReadObject(new MemoryStream(Encoding.UTF8.GetBytes(json))); 
```

[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var list2 = new JavaScriptSerializer().Deserialize<List<string>>(json); 
```

[Json.Net](http://json.codeplex.com/)（我的最爱）

```
var list3 = JsonConvert.DeserializeObject<List<string>>(json); 
```

* * *

你甚至可以使用`dynamic`

```
dynamic list4 =  JsonConvert.DeserializeObject(json);
string firstName = list4[0]; 
```

# ruby - RBing - 儿童安全图片搜索

> ID：11495218
> 
> 赞同：2
> 
> 时间：2012-07-15T20:09:01.240
> 
> 标签：ruby, bing, bing-api

如何使用[RBing](https://github.com/mikedemers/rbing)在 Bing 中搜索儿童安全图像？

我看到 Bing API 有一个[`AdultOption`](http://msdn.microsoft.com/en-us/library/dd251007)，但我看不到任何方法可以将此选项与 RBing 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:38:18.087

放`:adult`

```
require 'rbing'                                                                
require 'active_support/inflector'                                             

bing = RBing.new(YOUR_ACCOUNT_KEY)
bing.search('image', 'sex', :adult => "Strict" )

# or another way
bing.image('sex', :adult => "Strict")
# => {"results"=>[]}
bing.image('hump', :adult => "Strict")['results'].size
# contains 50 kid safe images
# => 50 
```

顺便说一句，由于正在发生的 APPID 迁移问题，我不得不使用 travisp 的 2.0-pre fork 来让它工作。因此，如果原始 gem 不起作用，请使用[我](https://github.com/travisp/rbing/tree/features/azure)的帐户密钥所在的 features/azure 分支，而不是已弃用的 APPID。

要安装 travisp 2.0 pre fork gem，请执行以下操作。

```
gem install rbing-2.0.0.pre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T00:49:51.313

这样做可以安装正确的 gem。

> 宝石安装 rbing-2.0.0.pre

# wcf - 有没有办法找到网络数据服务？

> ID：11495226
> 
> 赞同：0
> 
> 时间：2012-07-15T20:10:15.687
> 
> 标签：wcf, web-services, dataservice

有什么方法可以获取网站并找到他们的网络数据服务？我的意思是试图在没有任何先验知识的情况下找到一个 WCF 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:41:21.310

具有网络服务的网站包括“WSDL”或“WADL”页面，因此您可以使用 Google 高级搜索来搜索 URL 中包含 wsdl 或 wadl 的页面，并将搜索限制在您感兴趣的站点。例如：

```
allinurl:  wsdl OR wadl site:ec.europa.eu 
```

这会找到欧盟委员会网站的网络服务：

```
ec.europa.eu/taxation_customs/vies/checkVatService.wsdl 
```

# firefox - 如何在 Firefox 中异步监控文件？

> ID：11495227
> 
> 赞同：2
> 
> 时间：2012-07-15T20:10:18.257
> 
> 标签：firefox, firefox-addon, xpcom

我想监视 Windows 机器上的纯文本文件以对其进行更改。每当外部应用程序更新文件时，我的插件都应该读取它并采取相应的行动。

浏览了相当多的文档，我找不到在 Firefox 中执行此操作的直接工具。所以我想出了以下方法。

请建议。

方法 1 - 在 while 循环中 {
a) 列出正在监视的目录中的所有文件/使用 nsIFile.exists()
b) 如果文件确实存在，则转到下一步，否则进入睡眠
c) 使用“nsIFile”接口并获取文件的属性“lastModifiedTime”并将其与最初存储的值进行比较
d) 休眠 1 秒。 我打算使用 NetUtil.asyncFetch() 来读取这个文件
。
障碍是 a) 绕过安全 b) 在主线程中调用时性能下降。
虽然这不是真正意义上的异步..我可以在“ChromeWorker”线程中将其称为.js

尝试了上述方法..
但我无法入睡..似乎无法入睡.. setTimeOut() 对我没有帮助

方法 2 -有点
牵强，不确定这是否可行:)
如果文件存在，则将“nsIFile”打开为“nsIInputStreamPump”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:35:14.510

没有内置 API 可以获取有关文件更改的通知。但是，您可以使用[js-ctypes](https://developer.mozilla.org/en/js-ctypes/)直接调用操作系统函数。因此，在 Windows 上，您将在那里创建一个`ChromeWorker`并调用[`FindFirstChangeNotification`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364417%28v=vs.85%29.aspx)。然后，您将使用带有以下调用的循环：

*   [`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)- 等待您正在观看的目录中发生更改。
*   如有必要，向主线程发送更改通知。
*   [`FindNextChangeNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364427%28v=vs.85%29.aspx)

[`FindCloseChangeNotification`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364414%28v=vs.85%29.aspx)一旦你看完了，你应该打电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:25:09.540

I may be wrong, but I'm fairly certain this can't be done without some sort of polling approach (ie: check the file over some interval or just before you are about to use it).

# objective-c - QuickDialog 登录表单是第一个加载控制器

> ID：11495230
> 
> 赞同：1
> 
> 时间：2012-07-15T20:10:36.480
> 
> 标签：objective-c, ios, login, quickdialog

我最近开始了 iOS 开发，目标是创建一个登录视图。我遇到了我认为可以完成这项工作的 QuickDialog。在他们的示例中，他们提供了以下代码：

```
QRootElement *root = [[QRootElement alloc] init];
root.title = @"Hello World";
root.grouped = YES;
QSection *section = [[QSection alloc] init];
QLabelElement *label = [[QLabelElement alloc] initWithTitle:@"Hello" Value:@"world!"];

[root addSection:section];
[section addElement:label];

UINavigationController *navigation = [QuickDialogController controllerWithNavigationForRoot:root];
[self presentModalViewController:navigation animated:YES]; 
```

看起来代码创建了一个专门的控制器来加载自定义视图。我不确定在哪里添加这段代码，所以我将它添加到我的 viewDidLoad 中，用于故事板中的原始启动视图。但是，情节提要中的视图会在显示由 QuickDialog 创建的视图之前显示片刻。

我想知道，如何修改应用程序，以便 QuickDialogController 获得的控制器在应用程序启动时加载其视图。我希望使用 QuickDialog 创建一个登录表单。这个登录视图会出现在故事​​板的某个地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:38:57.593

只是为了解决这个问题，这里有一个通过继承 QuickDialogController 在情节提要中使用 QuickDialog 的完整示例：

```
// MyController.h
@interface MyController : QuickDialogController
@end

// MyController.m
#import "MyController.h"

@interface MyController ()
@end

@implementation MyController

- (void)viewDidLoad
{
    self.root = [[QRootElement alloc] init];
    self.root.title = @"Hello World";
    self.root.grouped = YES;
    QSection *section = [[QSection alloc] init];
    QLabelElement *label = [[QLabelElement alloc] initWithTitle:@"Hello" Value:@"world!"];

    [self.root addSection:section];
    [section addElement:label];

    [super viewDidLoad];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T15:04:13.220

当情节提要在 initWithCoder 中创建控制器时，您必须设置分组选项，这意味着您必须在那里创建 QRootElement：

1.  在您的 MyController 类实现中添加以下代码：

    ```
    -(id) initWithCoder:(NSCoder *)aDecoder {
        if ((self = [super initWithCoder:aDecoder])) {
            QRootElement *_root = [[QRootElement alloc] init];
            _root.grouped = YES;
            self.root = _root;
        }
        return self;
    } 
    ```

2.  然后继续自定义viewDidLoad中引用self.root的元素列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T18:56:33.573

所以一切正常，但您不想显示出现的快速对话框登录表单的动画？尝试`animated:NO`在最后一行设置。

QuickDialog 的设计目的不是真正从 Storyboard 中使用，尽管您可以通过创建一个继承自 QuickDialogController 的控制器来做到这一点。

# c - 如何在C中交换两个结构

> ID：11495232
> 
> 赞同：2
> 
> 时间：2012-07-15T20:11:00.723
> 
> 标签：c, pointers, struct, swap

我在看一个用 C 语言编写的代码，它交换 wto 数字的位置，然后是两个结构。第二个没看懂：

```
#define SWAP(a,b) do {NODE *t = (a) ; (a) = (b) ; (b) = t;} 
```

为什么它起作用？当我声明某个结构“节点”的 t 指针时，我直接指向 a ，然后来自 b 的所有数据都被传输到 a ，并且 b 也指向 a ......所以我知道它们都指向同一个对象（结构）。

如果我写 :`Node t = *a`相反，它不应该让它工作吗？或者我错了..

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:17:54.543

在这种特殊情况下，您不会在结构之间传输任何数据。您只是在处理保存结构地址的指针。

首先，您创建一个指针，该指针`t`开始指向`a`所指向的任何内容。然后，您修改指针`a`，使其指向`b`所指向的任何内容。最后，您修改`b`为指向任何`t`指向的内容或 IOW`a`指向之前指向的内容。

所以，总而言之：你没有在结构`*a`和之间移动任何数据`*b`（其中`*`意味着取消引用指针），而只是交换指针`a`和`b`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:19:17.433

这段代码暗示 a 和 b 都是 type 的指针`NODE *`。假设这两个结构如下： realA 是一个类型的结构，`NODE`由 a 指向；realB 也是类型`NODE`，由 b 指向。现在当你写这个时：

```
NODE *t = a; 
```

这里临时变量 t 是一个指针并分配给 a，指向 realA。现在当你看到

```
a = b; 
```

a 不再指向 realA，而是获取存储在 b 中的地址，所以现在 a 指向 realB。最后，同样地，

```
b = t; 
```

推断现在 b 获取存储在 t 中的指针，这又是 realA 的地址。

总而言之，只是指针的内容被改变了；实际数据未受影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T20:16:43.550

显而易见的猜测是他们没有交换指针指向的东西，而只是交换指针本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T20:17:20.520

此代码交换两个指针并且不复制任何其他数据。这似乎是一个糟糕的宏名称； `SWAP_NODE_PTR`会更好。

# c# - C#.net 中的非托管 dll 有入口点错误

> ID：11495233
> 
> 赞同：0
> 
> 时间：2012-07-15T20:11:18.947
> 
> 标签：c#

我有一个名为 OMGICardDll.dll 的 dll，它与 USB 插件智能卡设备通信以从卡中读取数据

这是我使用的代码：

```
public partial class Form1 : Form
{
    [DllImport("OMGICardDll",EntryPoint="ReadName",ExactSpelling=true, CallingConvention = CallingConvention.StdCall,SetLastError=false)]
   public  static extern string ReadName();
  //Form1 fm = new Form1();
    public Form1()
    {
        InitializeComponent();
    }

  private void Form1_Load(object sender, EventArgs e)
  {

  }

  private void btnSave_Click(object sender, EventArgs e)
  {

      txtName.Text = ReadName();
  }

} 
```

当我单击保存按钮时，我发现 System.EntryPointNotFoundException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:15:25.157

该错误可能表明`OMGICardDll.dll`可以找到并加载该函数，但该函数`ReadName`不存在于其中或未从中导出。

你能验证例程的拼写是这样的吗？并且是出口的？（实际上并没有被称为`ReadNameA`或`ReadNameW`？）

# iphone - iPhone iOS 5 核心数据图像

> ID：11495235
> 
> 赞同：2
> 
> 时间：2012-07-15T20:11:37.743
> 
> 标签：iphone, objective-c, ios, ios5

> **可能重复：**
> [我应该如何将 UIImages 存储在我的 Core Data 数据库中？](https://stackoverflow.com/questions/3908910/how-should-i-store-uiimages-within-my-core-data-database)

我决定将图像保存在 Core Data 中，而不是将它们保存在磁盘上。我查看了 Apple 的名为 Locations 的示例代码。但是，该代码针对 iOS 4，我看到另一个 Stack Overflow 帖子，这在 iOS 5 中发生了变化。

我已经阅读了有关允许外部存储的信息，并且我将图像作为二进制数据保存在我的核心数据模型中。

下面的代码从核心数据中检索图像，我在网上找到了这个。但是，我找不到任何关于如何以二进制格式将图像保存到核心数据的教程，或者任何关于使用核心数据和 iOS 5 图像的教程。

```
NSData *savedBinaryData = entity.smallImage;
self.smallImage.image = [UIImage imageWithData:savedBinaryData]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T20:18:26.773

您可以使用 UIImagePNGRepresentation(UIImage* image) 从 UIImage 获取二进制数据，然后将 NSData 保存在核心数据中。

所以你可以这样做：

```
[object setSmallImage: UIImagePNGRepresentation(image)]; 
```

# css - 如何在 Facebook 上更改高度，如框小部件（iframe）？

> ID：11495236
> 
> 赞同：2
> 
> 时间：2012-07-15T20:11:44.873
> 
> 标签：css, facebook, plugins

我正在尝试更改我网站侧边栏上的 facebook 之类的框小部件的高度，但是我似乎无法弄清楚要针对什么 css 来执行此操作。我想将其更改为 200 左右。这是当前使用的代码。有任何想法吗？

```
</div><div id="facebook-likebox-3" class="widget widget_facebook_likebox"><h4 class="Facebook Like Box widget-title"><a href="http://www.facebook.com/noahsdadcom">Like Us On Facebook</a></h4><iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fnoahsdadcom&#038;width=300&#038;height=432&#038;colorscheme=light&#038;show_faces=true&#038;stream=false&#038;header=false&#038;force_wall=false" scrolling="no" frameborder="0" style="border: none; overflow: hidden; width: 300px; height: 432px; background: #fff"></iframe></div><div id="text-43" class="widget widget_text">            <div class="textwidget"><div id="cse-search-form" style="width: 100%;">Loading</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:07:15.210

只需设置`height`使用.`<iframe>``!important`

**演示：http:** [//jsfiddle.net/ThinkingStiff/TpZ9k/](http://jsfiddle.net/ThinkingStiff/TpZ9k/)

```
#facebook-likebox-3 iframe {
    height: 200px !important;
    border-bottom: 1px solid #AAA !important;
}​ 
```

# php - 如何验证两步表单？

> ID：11495237
> 
> 赞同：1
> 
> 时间：2012-07-15T20:11:46.760
> 
> 标签：php, validation, input

我正在验证由两页组成的用户注册表单的输入。如果`$_POST`输入通过验证，则`$valid`变量设置为`true`。

仅当第一个注册表单成功验证（即`$valid`eq. to `true`）时，如何将用户带到第二个注册表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:19:55.577

在接收`$_POST`并传递验证后，使用[标头](http://php.net/header)将用户重定向到第二个注册页面。

在这样做之前，请将 $valid 的值更新`true`为

1.  在`$_SESSION`第二个注册页面进入并访问它
2.  或者，如果您愿意，可以通过附加将其作为 GET 参数`header('Location: http://example.com/2ndregistrationstep.php?valid=true')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:29:30.177

您可以改为使用 Javascript 验证表单，然后在您的表单中添加`onsubmit="validateForm()"`并且您的`validateForm()`函数返回 true 或 false。如果它返回 false 表单将不会提交。

如果要使用 PHP 进行验证，则必须先提交表单，如果无效，则重定向回原始表单页面，但必须重新设置提交的值。我要做的是首先为页面顶部的表单字段实例化所有变量，并使用空白值进行设置。然后对像 valid=false 这样的标志进行部分检查，如果是，则使用发布的值更新这些变量。

例如：

```
<?php
$first_name = '';
$last_name = '';
$email = '';
$phone = '';
$valid = true;

// Check if valid:
if (isset($_POST['first_name'])) {
    // Validate string and if bad valid = false.
    $valid = false;

    // Set value from $_POST;
    $first_name = $_POST['first_name'];
}
if(isset($_POST['email'])) {
    // Perform validation.

    $valid = true;  // else false

    $email = $_POST['email'];
}

// Check valid flag.
if (!valid) {
    // Display some error to the user.
    $message = 'There was something wrong.';
} else {
    // Tedirect to the destination page.
    // header(..);
} 
```

然后在页面顶部使用变量设置字段的值：

```
<form name="myForm" action="" method="post">
    <input type="text" name="first_name" value="<?=echo $first_name?>">
    <input type="text" name="last_name" value="<?=echo $last_name?>">
    <input type="text" name="email" value="<?=echo $email?>">
    <input type="text" name="phone" value="<?=$phone?>">
</form> 
```

请注意，上述示例仅用于说明逻辑。它暴露了[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)和其他类型的漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:29:59.550

我假设您直接在脚本中打印注册表单。为什么不添加简单的逻辑：

```
<?php

if (isset($_POST)) {
    // .. validate, and then 
    $_SESSION['valid'] = TRUE; // or FALSE
}

if (empty($_SESSION['valid'])) {
    // .. print first step
} else {
    // .. print second step
} 
```

# java - 以编程方式操作 Excel 工作表

> ID：11495239
> 
> 赞同：1
> 
> 时间：2012-07-15T20:11:58.587
> 
> 标签：java, spreadsheet

我想将一些数据放入 Excel 电子表格中，并且我发现了一些可能性，例如 Apache POI 和 JExcelApi，但问题是，我想保留原始电子表格中的宏和格式。

那可能吗？

# app-store-connect - Apple 促销代码限制 - 如果我需要超过 50 个怎么办？

> ID：11495240
> 
> 赞同：3
> 
> 时间：2012-07-15T20:12:06.107
> 
> 标签：app-store-connect

我希望有人可以针对我的情况提出一个好的解决方法。我正在为一个拥有庞大用户群的网站工作。我正在创建一个 iPhone 应用程序，客户希望免费提供给他的付费订阅者，但允许非订阅者从应用程序商店付费下载。

我以为我可以向订阅者提供促销代码，但我刚刚发现限制是 50。关于那里的好解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:35:27.990

我建议为所有订阅者发布企业版，这将允许自定义内容，特别是如果他们是付费订阅者。

这样做的教程 -[为 iOS 设备分发企业应用程序](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

这也允许无线下载。

然后对于非订阅者，将他们链接到应用商店中的免费版本。

我认为，如果它是直接分发给付费订阅者的自定义应用程序，它也会使付费订阅者的体验更加个性化。

希望这可以帮助。:)

# java - 存在并发方法调用时的事件顺序保证

> ID：11495258
> 
> 赞同：3
> 
> 时间：2012-07-15T20:14:26.717
> 
> 标签：java, multithreading, race-condition

```
class server {
    private Vector<Msg> v = new ...
    ...
    public void deliver(Msg msg) {
       ...
       v.add(msg);
    }
}

class client {
    private server s = server.getInstance(); // singleton
    ...
    public void propose() {
       s.deliver(new Msg( ... ));
    }
} 
```

如果多个并发客户端通过`Msg`[非同步！]`deliver`方法将值（对象）传递给服务器，是否可以假设任何客户端调用 [或者更准确地说，首先进入]`deliver`将其值首先存储在`v`-还是`deliver`强制同步以使这个假设成立？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:21:12.753

不，您不能做出这样的假设，因为调度程序可以中断内部`deliver()`但尚未到达的当前线程`v.add(msg)`。调度程序切换到另一个调用`deliver()`（之后）但设法完成整个`deliver()`调用的线程。

如果您使用同步`deliver()`方法，它不会阻止调度程序在此期间中断执行。但是当第一个线程持有锁时，没有其他线程能够进入该方法，最终调度程序将唤醒原始线程并让他完成。

BTW[`Vector`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)很古老，有更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:20:09.883

如果服务器是多线程的，那么如果deliver不同步，那么就不能保证收到的第一条消息会先添加。

# android - sms.sendTextMessage 发送消息但强制关闭

> ID：11495260
> 
> 赞同：1
> 
> 时间：2012-07-15T20:14:32.423
> 
> 标签：android

编辑：解决方案是在我的吐司中放置 Main.this 代替 null 。

我正在使用 AsyncTask 发送短信并且它们都成功发送（我已经测试向自己发送 50 条）但是当我按下发送时应用程序会立即强制关闭。我使用了断点，我决定在“sms.sendTextMessage ...”循环之后关闭应用程序强制。这是我的 main.java。

```
package com.dillonregi.spamsms;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Toast.makeText(this, "onCreate", Toast.LENGTH_SHORT).show();
}

public void sms(View view) {
Toast.makeText(this, "sms()", Toast.LENGTH_SHORT).show();
final Handler mHandler = new Handler();
new AsyncTask<String, Integer, Long>() {
protected Long doInBackground(String... params){
     EditText number = (EditText) Main.this.findViewById(R.id.pnumber);
     EditText message = (EditText) Main.this.findViewById(R.id.pmessage);
     EditText hmany = (EditText) Main.this.findViewById(R.id.hmany);
     String _hmany = hmany.getText().toString();
     final String _number = number.getText().toString();
     final String _message = message.getText().toString();
     final int xtime = Integer.parseInt(_hmany);

     mHandler.post(new Runnable() {
           public void run() {
     Toast.makeText(null, "number: " + _number + " message: " + _message + " xtime: " + xtime, Toast.LENGTH_LONG).show();
           }
     });

     long sentTexts = 0; 
    for (int i = 0; i < xtime; i++) {       
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(_number, null, _message, null, null);
        //send SMS's
        sentTexts += 1;
    }
    return sentTexts;
}
protected void onProgressUpdate(Integer... progress) {

}

protected void onPostExecute(Long result) {
           Toast.makeText(null, "number of texts sent will end up going here. maybe add + sentTexts after these quotes?", Toast.LENGTH_LONG).show();

}
}.execute(); }
} 
```

和 LogCat

> 07-15 16:09:39.152: W/dalvikvm(29508): threadid=1: 线程退出未捕获异常 (group=0x40019560) 07-15 16:09:39.152: E/AndroidRuntime(29508): 致命异常: main 07-15 16:09:39.152: E/AndroidRuntime(29508): java.lang.NullPointerException 07-15 16:09:39.152: E/AndroidRuntime(29508): 在 android.widget.Toast.(Toast.java:89 ) 07-15 16:09:39.152: E/AndroidRuntime(29508): at android.widget.Toast.makeText(Toast.java:231) 07-15 16:09:39.152: E/AndroidRuntime(29508): at com .dillonregi.spamsms.Main$1$1.run(Main.java:37) 07-15 16:09:39.152: E/AndroidRuntime(29508): at android.os.Handler.handleCallback(Handler.java:587) 07- 15 16:09:39.152: E/AndroidRuntime(29508): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-15 16:09:39.152: E/AndroidRuntime(29508): 在 android.os。 Looper.loop(Looper.java:130) 07-15 16:09:39.152: E/AndroidRuntime(29508): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-15 16:09:39.152: E/AndroidRuntime(29508): 在java.lang.reflect.Method.invokeNative(Native Method) 07-15 16:09:39.152: E/AndroidRuntime(29508): at java.lang.reflect.Method.invoke(Method.java:507) 07-15 16 :09:39.152: E/AndroidRuntime(29508): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-15 16:09:39.152: E/AndroidRuntime(29508): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-15 16:09:39.152: E/AndroidRuntime(29508): at dalvik.system.NativeStart.main(Native Method) 07-15 16 ：09：39.162：E / AndroidRuntime（29508）：[蓝色错误处理程序]为main 07-15 16：09：39.162制作调试报告文件：E / AndroidRuntime（29508）：java.lang。NullPointerException 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 android.widget.Toast.(Toast.java:89) 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 android. widget.Toast.makeText(Toast.java:231) 07-15 16:09:39.162: E/AndroidRuntime(29508): at com.dillonregi.spamsms.Main$1$1.run(Main.java:37) 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 android.os.Handler.handleCallback(Handler.java:587) 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 android.os.Handler .dispatchMessage(Handler.java:92) 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 android.os.Looper.loop(Looper.java:130) 07-15 16:09:39.162: E /AndroidRuntime(29508): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-15 16:09:39.162: E/AndroidRuntime(29508): 在 java.lang.reflect.Method.invokeNative(Native Method ) 07-15 16:09:39.162:E/AndroidRuntime(29508): at java.lang.reflect.Method.invoke(Method.java:507) 07-15 16:09:39.162: E/AndroidRuntime(29508): at com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:895) 07-15 16:09:39.162: E/AndroidRuntime(29508): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-15 16 :09:39.162: E/AndroidRuntime(29508): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:17:27.710

有道理？？

```
Toast.makeText(null, "number: " + _number + " message: " + _message + " xtime: " + xtime, Toast.LENGTH_LONG).show(); 
```

你正在传递`null`而不是`Context`改变它

```
Toast.makeText(Main.this , "number: " + _number + " message: " + _message + " xtime: " + xtime, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:23:33.013

您的 Logcat 显示此错误：

```
E/AndroidRuntime(29508): java.lang.NullPointerException 07-15 16:09:39.152: 
```

`E/AndroidRuntime(29508): at android.widget.Toast.(Toast.java:89) 07-15 16:09:39.152:` `E/AndroidRuntime(29508): at android.widget.Toast.makeText(Toast.java:231) 07-15 16:09:39.152:`

所以你的错误基本上是你向你的 Toast 小部件传递了一个空指针，编译器抱怨这个！！

在`onPostExecute()`方法中用这个替换你的吐司：

`sentTexts`作为你班级的属性

```
Toast.makeText(Main.this, "number of texts sent will end up going here. maybe add" + sentTexts + "after these quotes?", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:17:35.183

`Toat.makeToast`您在作为第一个参数发送的行收到 NullPointerException，`null`上下文应该在哪里。

所有的标志都指向同一个地方...

# ruby-on-rails - Rails 3.2.6 cache_sweeper 不适用于自定义路线

> ID：11495268
> 
> 赞同：0
> 
> 时间：2012-07-15T20:16:07.263
> 
> 标签：ruby-on-rails

我在运行 Ruby 1.8.7 的 Rails 3.2.6 应用程序中使用片段缓存

在我的控制器中，我有：

```
class ProductsController < ApplicationController
   cache_sweeper :product_sweeper 
```

清扫器适用于 C-UD 操作，但不适用于我的 POST 方法“changeorder”。

我试过了：

```
 cache_sweeper :product_sweeper, :only => 
```

并添加了所有 C-UD 和 :changeorder 但这不起作用。

我将此添加到我的扫地机中：

```
 def after_product_changeorder(product)
   expire_cache(product)
 end 
```

它不会出错，但它也不起作用。我删除了 product_ 并没有出错，也没有工作。

我确实将其更改为 _product* *s* * 并且确实出错了。

我可以使片段过期的唯一方法是使用：

```
expire_fragment('page_home') 
```

在 changeorder 控制器方法中。

为了记录，这里是我的扫地机：

```
class ProductSweeper < ActionController::Caching::Sweeper
  observe Product

  def after_save(product)
    expire_cache(product)
  end

  def after_destroy(product)
    expire_cache(product)
  end

  private

    def expire_cache(product)
      # expire_page products_path 
      # expire_page product_path(product)
      expire_fragment('page_home')
    end

end 
```

和我的控制器方法：

```
def changeorder
  params[:product].each_with_index do |id, index|
    Product.update_all(['displayorder=?', index+1], ['id=?', id])
  end
  render :nothing => true
end 
```

和我的路线文件 - 它可能会有所帮助：

```
resources :products do
  collection do
    post 'changeorder'
  end
end 
```

我确实将“changeorder”更改为 PUT，但这也没有任何区别。

这里有什么想法吗？我已经浏览了一堆 SO 页面，但没有找到任何有用的东西，在其他领域发现了大量有用的东西，所以我没有浪费时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:25:10.543

线索来自我得到的错误以及我只会使用片段缓存的事实。

我的扫地机现在看起来像这样：

```
class ProductSweeper < ActionController::Caching::Sweeper
  observe Product

  def after_save
    expire_cache
  end

  def after_destroy
    expire_cache
  end

  def after_products_changeorder
    expire_cache
  end

  private

    def expire_cache
      expire_fragment('page_home')
    end

end 
```

由于我没有展示页面，因此无需传递产品。

对于我确实有显示页面的页面来说，它会稍微复杂一点！！

# selenium - Selenium ide-如何模拟按键 ctrl-shift-delete 删除 cookie？

> ID：11495273
> 
> 赞同：2
> 
> 时间：2012-07-15T19:56:38.013
> 
> 标签：selenium, selenium-ide, virtual-keyboard

当您手动按下键盘上的`Ctrl`+ `Alt`+`Delete`键时，您会删除所有 cookie。

我使用 Selenium IDE，在我的脚本中，我想通过模拟按下`Ctrl`++来自动删除 cookie ，但我不知道执行此操作的命令、目标和值是什么`Alt`。`Delete`

我不想使用`deleteCookie`诸如...之类的命令

```
<tr>
    <td>deleteCookie</td>
    <td>__utmz</td>
    <td>path=/21910987/, domain=24hmontreal.canoe.ca, recurse=true</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T21:52:52.630

我猜你的意思是++ `Ctrl`，对吧？`Shift``Delete`

根据[参考资料](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)，您需要致电

[`controlKeyDown()`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#controlKeyDown)
[`shiftKeyDown()`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#shiftKeyDown)
[`keyPress("dom:document.body", "\127")`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#keyPress)// 127 是删除的 ASCII 码
[`shiftKeyUp()`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#shiftKeyUp)
[`controlKeyUp()`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#controlKeyUp)

# java - JButton 显示在图标后面

> ID：11495276
> 
> 赞同：1
> 
> 时间：2012-07-15T20:16:55.530
> 
> 标签：java, swing, scale, jbutton, imageicon

我正在尝试创建一个扩展 JButton 的自定义按钮。它接受文本以及按钮的所需宽度和高度。构造函数根据输入的宽度和高度缩放图像按钮。但是，正如您在附图中看到的那样，出现了问题。

![尝试创建按钮。](../Images/e92c4fd3556ba83b9983ea806f12433d.png)

这是我的课：

```
class GameButton extends JButton {
    public GameButton(String text, int width, int height) {
        BufferedImage image = null;
        try {
            image = ImageIO.read(new File("Images/Other/buttonImage.png"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // Create new (blank) image of required (scaled) size
        BufferedImage scaledImage = new BufferedImage(width, height,
                BufferedImage.TYPE_INT_ARGB);

        // Paint scaled version of image to new image
        Graphics2D graphics2D = scaledImage.createGraphics();
        graphics2D.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        graphics2D.drawImage(image, 0, 0, width, height, null);
        // clean up
        graphics2D.dispose();

        ImageIcon icon = new ImageIcon(scaledImage);

        setIcon(icon);
        setMargin(new Insets(0, 0, 0, 0));
        setIconTextGap(0);
        setBorderPainted(false);
        setOpaque(false);
        setBorder(null);
        setText(text);
        setSize(width, height);
    }
} 
```

原始按钮图像仍在绘制中，看起来图像可能未正确缩放。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:32:32.530

为 Button 设置 Horizo​​ntalTextPosition

```
jButton1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER); 
```

# vb.net - 防止 VB.Net 表单关闭

> ID：11495284
> 
> 赞同：0
> 
> 时间：2012-07-15T20:18:00.710
> 
> 标签：vb.net, wndproc

我们正在使用此编码来处理单击大红色 X 作为绕过表单上所有文本框验证的一种手段。

该代码将测试是否对表单上的数据绑定控件进行了任何更改。代码处理取消在关闭表单之前所做的更改。

还想取消点击大 X 并且不允许表单关闭。

您能否显示任何不允许表单实际关闭的所需编码？我们想在下面的编码显示中的 Else 语句之后添加这个新的编码。

```
Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)

    Select Case ((m.WParam.ToInt64() And &HFFFF) And &HFFF0)

        Case &HF060 ' The user chose to close the form.

            Me.StudentsBindingSource.EndEdit()
            Me.AutoValidate = System.Windows.Forms.AutoValidate.Disable

            If Me.StudentsDataSet.HasChanges Then

                ' Alert the user.
                '----------------
                If MessageBox.Show("You are about to loose any *** Student *** changes you have made! " & vbCrLf & vbCrLf & _
                                   "ARE YOU SURE YOU WANT TO DO THIS?" & vbCrLf & vbCrLf, _
                                   "*** W A R N I N G ***", _
                                   MessageBoxButtons.YesNo, _
                                   MessageBoxIcon.Warning, _
                                   MessageBoxDefaultButton.Button2) = Windows.Forms.DialogResult.Yes Then

                    RibbonButtonCancelChanges_Click(Nothing, Nothing)
                Else
                    ' Reset validation.
                    '------------------
                    Me.CausesValidation = True
                End If
            End If
    End Select

    MyBase.WndProc(m)
End Sub 
```

我们尝试了这个，但是文本框控件的验证事件执行，这不是我们想要的。

```
Private Sub FormStudents_FormClosing(sender As System.Object, e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing

    Me.AutoValidate = System.Windows.Forms.AutoValidate.Disable
    Me.StudentsBindingSource.EndEdit()

    If Me.StudentsDataSet.HasChanges Then

        ' Alert the user.
        '----------------
        If MessageBox.Show("You are about to loose any *** Student *** changes you have made! " & vbCrLf & vbCrLf & _
                           "ARE YOU SURE YOU WANT TO DO THIS?" & vbCrLf & vbCrLf, _
                           "*** W A R N I N G ***", _
                           MessageBoxButtons.YesNo, _
                           MessageBoxIcon.Warning, _
                           MessageBoxDefaultButton.Button2) = Windows.Forms.DialogResult.Yes Then

            RibbonButtonCancelChanges_Click(Nothing, Nothing)
        Else
            ' Reset validation.
            '------------------
            Me.CausesValidation = True

            e.Cancel = True
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T20:20:05.140

你根本不应该使用`WndProc`。

相反，处理`FormClosing`事件并设置`e.Cancel`为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:34:39.003

正如 SLaks 所说，您应该使用 FormClosing() 事件过程，而不是使用 WndPorc() 引入复杂性。覆盖 WndProc() 用于 C++ 之类的语言，在这些语言中，您没有事件过程来处理这些事件。但是 VB.NET 的简单性为您提供了一个称为 FormClosing() 的事件过程。只需打开您的代码并在对象下拉列表（左侧）中选择您的表单名称，然后从事件下拉列表（右侧）中选择 FormClosing。这应该为您提供一个模板来编写您的事件代码，如下所示：

```
Private Sub FormClosing(Source as Object, e as EventArgs) Handles MyForm.Closing
    e.Cancel = True
End Sub 
```

只需如上所示添加“e.Cancel = True”，表单将永远不会关闭！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T23:09:15.463

感谢您让我了解 FormClosing 和 e.Cancel

我能够使用 FormClosing 和 WndProc 的组合来处理我们需要的一切。

我在表单类名之后添加了这个：

```
Dim blneCancel As Boolean = False 
```

我的 WndProc 现在看起来像这样。注意blneCancel 的设置。

```
Protected Overrides Sub WndProc(ByRef m As System.Windows.Forms.Message)

    Select Case ((m.WParam.ToInt64() And &HFFFF) And &HFFF0)

        Case &HF060 ' The user chose to close the form.

            Me.StudentsBindingSource.EndEdit()
            Me.AutoValidate = System.Windows.Forms.AutoValidate.Disable

            If Me.StudentsDataSet.HasChanges Then

                ' Alert the user.
                '----------------
                If MessageBox.Show("You are about to loose any *** Student *** changes you have made! " & vbCrLf & vbCrLf & _
                                   "ARE YOU SURE YOU WANT TO DO THIS?" & vbCrLf & vbCrLf, _
                                   "*** W A R N I N G ***", _
                                   MessageBoxButtons.YesNo, _
                                   MessageBoxIcon.Warning, _
                                   MessageBoxDefaultButton.Button2) = Windows.Forms.DialogResult.Yes Then

                    RibbonButtonCancelChanges_Click(Nothing, Nothing)
                Else
                    ' Reset validation.
                    '------------------
                    Me.CausesValidation = True
                    blneCancel = True
                End If
            End If
    End Select

    MyBase.WndProc(m)
End Sub 
```

FormClosing 过程如下所示：

```
Private Sub FormStudents_FormClosing(sender As System.Object, e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing

    If blneCancel = True Then
        e.Cancel = True
    End If
End Sub 
```

现在用户可以在电话号码文本框中输入任何内容，并且不会验证用户是否单击大 X 以关闭表单。该表单将仅显示消息警告用户某些内容已更改，并让他们选择返回并尝试保存更改或直接退出而不保存任何内容。

# jquery - datepicker 提交字符串而不是日期

> ID：11495285
> 
> 赞同：1
> 
> 时间：2012-07-15T20:18:01.873
> 
> 标签：jquery, struts2, datepicker, type-conversion, freemarker

在我的 Web 应用程序中，我使用的是 struts2 和 freemarker。语言环境设置为法语`("dd/MM/yyyy")`。在我的 freemarker 模板中，我`datepicker`在一个 input 元素中定义了 jQuery ui，其 name 属性指向我的对象的 date 属性。

问题是，在提交表单时，有时我会收到`ognl`警告说`"type conversion error - Cannot set String into the Date object."`。作为回应，我可以看到消息`cannot finc input results in my action.`这很奇怪，因为有时会出现问题，有时不会...

在我的页面中，我有一个产品列表，其中包含输入和名称等`product[1].startDate, product[2].startDate`，它们在我的操作中通过列表链接。

我尝试设置`locale`为`struts.properties`法语，这很有帮助，但仍有 10% 的时间我可以看到这个问题。

谁能告诉我如何将 a 映射`datepicker`到 Date 对象而不用 ognl 将其转换为字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:27:14.307

`.datepicker()`调用函数时是否尝试过 dateFormat 选项？

```
$( ".selector" ).datepicker({ dateFormat: "dd/MM/yyyy" }); 
```

日期选择器允许您选择输入到文本字段中的格式，从而在提交时传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:48:53.967

我认为问题可能是由于`String`转换`Date`。查看我之前的两篇文章，[这里](https://stackoverflow.com/questions/11407265/beans-properties-and-modeldriven-in-struts-2/11408772#11408772)和[这里](https://stackoverflow.com/questions/11304255/how-to-get-foreign-keys-using-hibernate-annotations-struts-2-and-jsp/11308703#11308703)的转换细节。您还可以查看[StrutsTypeConverter](http://struts.apache.org/2.0.14/struts2-core/apidocs/org/apache/struts2/util/StrutsTypeConverter.html)和[DefaultTypeConverter](http://www.opensymphony.com/ognl/api/ognl/DefaultTypeConverter.html)的 javadoc 。

# javascript - READYSTATE_LOADED 是否跨浏览器？

> ID：11495286
> 
> 赞同：0
> 
> 时间：2012-07-15T20:18:04.110
> 
> 标签：javascript, ajax

我一直在使用 valums 文件上传器：[https ://github.com/valums/file-uploader](https://github.com/valums/file-uploader)

我遇到的一个问题是它从来没有真正达到 100% onProgress。

文件上传完成后， xhr.upload.onprogress 不再触发。我得到的下一个 ping 是 readyState 4 的完成。

这是因为一旦 100% 发生，我的服务器上就会在请求完成之前进行处理。因此，用户确实会看到类似 98% 的内容，然后是请求完成的“挂起”，然后是 100% 之后的“完成”状态。

就绪状态 2 是：

> READYSTATE_LOADED (2) 已调用发送方法。尚无可用数据。

在那一刻在 UI 中启动我的处理状态是否可靠？

**请注意**，我很好奇这是否也适用于 IE，尽管上传者在 IE 中做了一个正常的帖子，所以我们从来没有他们的进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:13:09.040

从怪癖模式：

> Explorer 有一个观点，因为`load`事件可以被视为事件的子集`readystatechange`。`load`当页面完全加载时触发，相当于说**`readyState` is 4: completed**。
> 
> ...
> 
> [然而，E]explorer 不支持s`load`上的事件`xmlhttprequest`。我们已经知道这一点，但我们应该意识到它甚至不允许您设置事件处理程序，因为它只允许对象上非常有限的一组属性`xmlhttp`。
> 
> `event`Opera 中仍然缺少该对象，但 Mozilla 中没有。

[http://www.quirksmode.org/blog/archives/2005/09/xmlhttp_notes_r_2.html](http://www.quirksmode.org/blog/archives/2005/09/xmlhttp_notes_r_2.html)

# ruby-on-rails-3 - Rails 3：与自身具有多个双向关系的模型

> ID：11495291
> 
> 赞同：0
> 
> 时间：2012-07-15T20:18:35.367
> 
> 标签：ruby-on-rails-3, model, associations, self-join, bidirectional-relation

我正在尝试在 Rails 3 中构建文本冒险游戏（是的，我知道这很愚蠢）。现在我有一个模型叫做 Room。每个房间需要与最多四个其他房间相关联。这种关系是双向的，因此任何两个相关的房间都是彼此的出口。例如，如果我要说：

```
@room1.north = @room2 
```

@room2.south 会自动变成@room1。同样，如果我说：

```
@room1.east = nil 
```

@room2.west 也变为 nil。我想只使用模型关联来实现这一点，而不是在控制器中手动完成。这可能吗？

**编辑**

matzi 给出的第一个例子并不能完全按照我想要的方式工作。考虑以下：

```
class Room < ActiveRecord::Base
  attr_accessible :north, :south, :east, :west

  has_one :north, :class_name => "Room", :foreign_key => "south_id"
  has_one :east, :class_name => "Room", :foreign_key => "west_id"

  belongs_to :south, :class_name => "Room", :foreign_key => "south_id"
  belongs_to :west, :class_name => "Room", :foreign_key => "west_id"
end

@room1 = Room.new
@room2 = Room.new
@room1.save
@room2.save 
```

这工作正常：

```
@room1.north = @room2

@room1.north #Outputs @room2
@room2.south #Outputs @room1

@room1.north = nil

@room1.north #Outputs nil
@room2.south #Outputs nil 
```

到现在为止还挺好。但：

```
@room1.north = @room2

@room2.south = nil

@room1.north #Outputs @room2, but it should be nil
@room2.south #Outputs nil 
```

此外：

```
@room2.south = @room1

@room1.north #Outputs nil, but it should be @room2
@room2.south #Outputs @room1 
```

看到这里的问题了吗？这并不是真正的双向。

**解决了**

事实证明，Matzi 的第一个解决方案毕竟是正确的。正如他所指出的，我在使用该解决方案时遇到的问题是储蓄问题。以下作品：

```
@room1 = Room.create
@room2 = Room.create
@room1.north = @room2
@room1.save

Room.find(1).north #Room 2
Room.find(2).south #Room 1

@room2.south = nil
@room2.save

Room.find(1).north #nil
Room.find(2).south #nil 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:33:43.783

当然这是可能的。选择包含 id 的两个方向（例如北和东）（north_id 和east_id），因为不需要全部四个。然后通过设置关系`:foreign_key`。注意id的，因为has_one标记了对方的id名称，而belongs_to标记了同一对象中的id。

它应该工作：

```
has_one :south, :class_name => 'Room', :foreign_key => 'north_id'
belongs_to :north, :class_name => 'Room', :foreign_key => 'north_id' 
```

但是，我建议您使用连接器模型和 HABTM 关系。该模型可以保存有关方向的信息，并且可以更加灵活。例如，现在你不能创建一个有两个“北”入口的房间，也不能定义一个单向连接。有了它，您甚至可以找到特定的连接，并且可以随意更改它们。如果你想要更复杂的结构，比如这个简单的网格，那么考虑一下。

# c++ - 为什么这会在 Ideone 上编译？

> ID：11495292
> 
> 赞同：9
> 
> 时间：2012-07-15T20:18:37.590
> 
> 标签：c++

好的，所以我在[Ideone](http://ideone.com)上搞砸了，不小心提交了这段代码，但令我惊讶的是，它实际上编译并运行输出值 0，[here](http://ideone.com/Lkbjo)。

```
#include <iostream>

using namespace std;

const int five(  )
{
        const int i = 5;
}

int main() {
        cout << five(  ) << endl;
        return 0;
} 
```

然后我在 Visual Studio 和[Codepad](http://codepad.org)上尝试了这个，但是两者都未能编译，因为`five()`没有返回值，正如人们所期望的那样。我的问题当然是，为什么这在[Ideone](http://ideone.com)上编译得很好，即使我理解的代码是错误的并且不应该编译。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T20:22:06.807

简单明了（来自 C++11 6.6.3 “返回语句”）：

> 从函数的末尾流出相当于没有值的返回；这会导致值返回函数中的未定义行为。

所以编译器几乎可以做它想做的任何事情。显然，诊断是我更喜欢编译器的东西，但有时很难诊断（比如返回在条件逻辑内部，并且永远不会到达函数的“结束”）。

请注意，我在 GCC 4.6.1 中收到以下警告（使用该`Wall`选项）：

```
test.cpp:8:1: warning: no return statement in function returning non-void [-Wreturn-type] 
```

我不确定 ideone 将哪些选项传递给 GCC（我想这`-Wall`对 ideone 使用的 4.3.4 版本会做同样的事情）。

一些相关资料：

在 C 语言中，声明返回值的函数在某些情况下实际上不这样做是可以的；*在 C 中，如果实际使用*了函数的返回值，它只会导致未定义的行为。准标准 C 并不总是支持该`void`类型，因此不返回任何内容的函数通常被`int`显式或隐式声明为 return 。从 C99 6.9.1/12“函数定义”开始：如果`}`到达终止函数的 ，并且调用者使用函数调用的值，则行为未定义。

`main()`此外，正如一些评论中提到的，C++ 和 C99 及更高版本对结尾的流出进行了特殊处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T20:23:24.623

不从非 void 函数返回值是错误的，但并非所有编译器都将其视为错误——例如，GCC 仅在遇到此错误时才会发出警告。其他编译器可能偏执（他们是对的）并且不允许您编译此类代码。当然，编译器行为可以使用不同的开关和选项进行修改。

返回值 0 只是一个随机值——它可能同样是 255、-1 或任何其他垃圾，因为这样做是未定义的行为（除了 main，C99 指定应假定隐式返回值 0） .

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T20:23:33.013

ideone 似乎没有显示警告，它只在出现错误时显示编译器输出。在 ideone 使用的 GCC 版本（gcc 4.3）上，这不是一个错误，它只是一个警告。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T20:24:39.537

代码具有未定义的行为。即使您所做的事情是错误的，编译器也不需要对其进行诊断。另一点是 ideone 使用的是现在相当旧的 gcc 版本。一个合理的当前版本的 gcc（例如，4.7）至少会给你一个警告，你的函数被声明为返回一个值，但没有——但不是默认情况下。你必须打开它`-Wall`来获得警告（但作为一般规则，我*总是*至少使用 -Wall 和 gcc）。

# scala - 斯卡拉；你能把多个参数定义为一个吗

> ID：11495298
> 
> 赞同：3
> 
> 时间：2012-07-15T20:19:28.803
> 
> 标签：scala, functional-programming

你能定义一组变量供以后使用吗？

以下是一些突出我意图的伪代码：

```
def coordinates = x1, y1, x2, y2

log("Drawing from (%4.1f, %4.1f) to (%4.1f, %4.1f)".format(coordinates))
canvas.drawLine(coordinates, linePaint) 
```

这是一个包含重复代码的工作示例。

```
log("Drawing from (%4.1f, %4.1f) to (%4.1f, %4.1f)".format(x1, y1, x2, y2))
canvas.drawLine(x1, y1, x2, y2, linePaint) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T21:15:37.610

是的，你可以，虽然语法可以说是非常笨拙，并且有一些限制，一开始可能看起来有点武断。诀窍是将方法转换为函数（称为“eta 扩展”），然后使用该函数的`tupled`方法来获取可以应用于元组的内容。

假设你有一个这样的类：

```
class Foo {
  def f(a: String, b: String) = "%s, %s".format(b, a)
  def g(x: Int, y: Int, z: Int) = x + y * z
} 
```

还有一个例子：

```
val foo = new Foo 
```

还有一些你想使用`Foo`'s 方法的数据：

```
val names = ("John", "Doe")
val nums = (42, 3, 37) 
```

你不能只写`foo.f(names)`or `foo.g(nums)`，因为类型不对齐——参数列表和元组在 Scala 中是不同的东西。但是您可以编写以下内容：

```
scala> (foo.f _).tupled(names)
res0: String = Doe, John

scala> (foo.g _).tupled(nums)
res1: Int = 153 
```

在方法之后添加下划线将其转换为函数（在我看来，这是 Scala 语法中最令人困惑的小怪癖），`tupled`并将其从具有两个（或三个）参数的函数转换为具有单个元组参数的函数。

您可以通过定义以下辅助函数来稍微清理代码，例如：

```
scala> val myF = (foo.f _).tupled
myF: ((String, String)) => String = <function1>

scala> val myG = (foo.g _).tupled
myG: ((Int, Int, Int)) => Int = <function1>

scala> myF(names)
res2: String = Doe, John

scala> myG(nums)
res3: Int = 153 
```

不过，我不确定那会好得多。

最后，您不能（方便地）在 varargs 方法上使用这种方法——例如，您不能编写以下内容：

```
val coordsTupleToString = ("(%4.1f, %4.1f) to (%4.1f, %4.1f)".format _).tupled 
```

甚至只是：

```
val coordsToString = "(%4.1f, %4.1f) to (%4.1f, %4.1f)".format _ 
```

这是在 Scala 中避免使用可变参数的另一个原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T20:24:04.907

看起来你需要一个元组：

```
val coordinates = (x1, y1, x2, y2) 
```

或者可能是一个成熟的对象？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:27:18.190

现在，这可能很明显，但如果它只在少数情况下让您烦恼，您可以随时增强：

```
implicit def enhancedCanvas(canvas: Canvas) = new {
  // using bad and slow syntax. please change this in Scala 2.10.
  def drawLineC(coordinates: (Float, Float, Float, Float), paint: Paint) = {
    val (x1, y1, x2, y2) = coordinates
    canvas.drawLine(x1, y1, x2, y2, paint)
  }
} 
```

另一种可能性，如果你足够疯狂的话。（可能这样的增强功能已经在 Scalaz 或 Shapeless 中了。）

```
implicit def enhTuple4[A,B,C,D](t: Tuple4[A,B,C,D]) = new {
  def |<[E] (f: (A, B, C, D) => E) = f(t._1, t._2, t._3, t._4)
}

// to be used as
val coordinates = (x1, y1, x2, y2)
coordinates |< (canvas.drawLine(_, _, _, _, linePaint)) 
```

# php - 获取 OAuth2 访问令牌时出错：500 错误

> ID：11495303
> 
> 赞同：3
> 
> 时间：2012-07-15T20:20:13.477
> 
> 标签：php, google-api, oauth-2.0, google-plus

我被以下错误消息随机窃听：
当[php 库](http://code.google.com/p/google-api-php-client/)尝试获取[访问令牌](http://code.google.com/p/google-api-php-client/source/browse/trunk/src/auth/apiOAuth2.php)第 112 行时发生这种情况。

有时我的代码在第一次尝试时获取访问令牌，有时我需要在获取访问令牌之前多次刷新包含“代码”作为获取参数的 URL。

此错误在过去 3-4 天内经常出现。

```
Fatal error: 
Uncaught exception 'apiAuthException' with message 'Error fetching OAuth2 access token, message: 
'<HTML> <HEAD> <TITLE>Error processing OAuth 2 request</TITLE> </HEAD> 
<BODY BGCOLOR="#FFFFFF" TEXT="#000000"> 
<H1>Error processing OAuth 2 request</H1> 
<H2>Error 500</H2> 
</BODY> </HTML> 
'' in /google-api-php-client-0.5.0/google-api-php-client/src/auth/apiOAuth2.php:105
 Stack trace: #0 /google-api-php-client-0.5.0/google-api-php-client/src/apiClient.php(138): apiOAuth2->authenticate(Array) 
#1 l.php(191): apiClient->authenticate() 
#2 l.php(99): googoauthinit(true) 
#3 {main} thrown in /google-api-php-client-0.5.0/google-api-php-client/src/auth/apiOAuth2.php on line 105 
```

我使用的代码是直接从[这里](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/userinfo/index.php)提取的（完全相同的代码，所有参数，如应用程序名称、密钥、id 等都正确填写）。此外，尝试注册新应用程序但收到相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:36:52.990

可能是 Google 同步问题。查看此[Google Groups 帖子](https://groups.google.com/forum/#!topic/oauth2-dev/MHH8LqxBSXI)，看看您是否有类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T15:30:31.143

我相信这个问题类似于关于 SO的[**这个问题。**](https://stackoverflow.com/questions/21428180/google-analytics-api-v3-http-error-unable-to-connect-on-live-server-localhos)您将在答案的评论中找到解决方案。

> 要在运行时禁用，您也可以使用 $this->client->setClassConfig("Google_Http_Request", "disable_gzip", true)。

这对我很有用。

# php - 有什么方法可以获取特定国家/地区的 FB 用户数量？

> ID：11495306
> 
> 赞同：0
> 
> 时间：2012-07-15T20:20:24.813
> 
> 标签：php, facebook, api

我想知道是否有任何方法可以在我的网页中显示特定国家/地区的用户总数。据我发现，您无法通过 API 获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:34:38.733

我猜你真的想要 facebook 上“喜欢”或使用 facebooks oauth 与你的网站连接的用户总数。

您在您的网站中使用图形 api 吗？我很确定您可以按国家/地区名称进行查询——只要与您共享该信息的用户提供了它。

看看这个... [http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)

这：http: [//developers.facebook.com/docs/reference/api/insights/](http://developers.facebook.com/docs/reference/api/insights/)

从他们的网站

> Facebook Insights 提供了查看喜欢页面或安装应用程序的人的地理和人口统计数据的能力。位置数据基于每个人的地理位置，由他们的浏览器 IP 地址确定，并且仅限于排名前 20 的国家和城市。所有其他人口统计信息都是汇总的且不可识别的。

通用搜索可以这样完成： [https ://graph.facebook.com/search?type=location&place=166793820034304](https://graph.facebook.com/search?type=location&place=166793820034304)

地点 ID 是您要搜索的任何内容的 ID。

[https://graph.facebook.com/search?type=location&place=166793820034304](https://graph.facebook.com/search?type=location&place=166793820034304)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:12:06.443

**免责声明：Facebook 不支持此方法。需要您自担风险使用它。我不承担任何责任。**

1.  转到：[https ://www.facebook.com/ads/manage/adscreator/](https://www.facebook.com/ads/manage/adscreator/)
2.  用随机的东西填写广告信息（例如 google.com 作为 url）
3.  在下一部分中，您会注意到动态覆盖面估算值会根据您选择的参数（包括国家/地区）而变化。尝试更改国家/地区并使用例如 Google Chrome 的开发人员工具观察网络活动。
4.  以编程方式调用返回带有适当参数的 json 数据的 ajax url，这在上一步中应该很容易弄清楚。
5.  为你的恶行收集和存储 json 数据。
6.  ？？？
7.  利润！

实际的 ajax 调用和参数会不时变化，这就是为什么我没有直接包含它们的原因，但应该很容易弄清楚。另请注意，它们是*估计值*，即使它们来自 Facebook，它们也不会在每次广告商设置广告时计算每个用户 - 这是您可能获得的最佳估计值。

我提到的这种方法既不是官方的，也不是 Facebook 支持的，但是像 socialbakers.com 或 checkfacebook.com 这样的网站已经使用它们很长时间了。（在那里，我揭开了秘密）

# html - 不透明度在网站上不起作用，但在 jsfiddle 上工作......请帮助

> ID：11495307
> 
> 赞同：-1
> 
> 时间：2012-07-15T20:20:26.737
> 
> 标签：html, css

在右侧，我有社交媒体图标。当您滚动到一个时，其他的应该会消失，而您悬停的那个应该会留下。这适用于 jsfiddle，但不适用于我的页面。

此外，当您将鼠标悬停时，图标的名称应该显示在其上方。确实如此，但它非常紧张，但是在 jsfiddle 中它可以正常工作......

有什么想法吗？

[http://jsfiddle.net/gvqGk/32/](http://jsfiddle.net/gvqGk/32/)

该网站位于

[http://lolabellas.tumblr.com](http://lolabellas.tumblr.com)

非常感谢！

```
.social { list-style:none;margin:0; padding:0;}

.social li { display:inline; float:left;}
.social li a { display:block;width:32px; height:32px; position:relative; text-     decoration:none; padding-right:-5px}
.social li a strong { font-weight:normal; position:absolute; left:30px; top:-1px;   color:#fff; padding:3px; z-index:9999;
text-shadow:1px 1px 0 rgba(0, 0, 0, 0.75); background-color:rgba(0, 0, 0, 0.7);
-moz-border-radius:3px; -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); -webkit-border-radius:3px; -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); border-radius:3px; box-shadow: 0 0 5px rgba(0, 0, 0, 0.5); 
```

}

​</p>

```
 /* SOCIAL ICONS - CSS3 */
 #css3:hover li { opacity:0.2; }

 #css3 li { -webkit-transition-property: opacity; -webkit-transition-duration: 500ms;
 -moz-transition-property: opacity; -moz-transition-duration: 500ms; }
  #css3 li a strong { opacity:0;
 -webkit-transition-property: opacity, top; -webkit-transition-duration: 300ms;
 -moz-transition-property: opacity, top; -moz-transition-duration: 300ms; }

 #css3 li:hover { opacity:1; }
 #css3 li:hover a strong { opacity:1; top:-30px; }

 li.facebook{background:url("http://static.tumblr.com/4aqmjkd/kVVm77wsy/facebook-32x32.png" ) no-repeat; width:32px; height:32px;}

 li.twitter {background:url("http://static.tumblr.com/4aqmjkd/yllm77x0x/twitter-32x32.png") no-repeat; width:32px; height:32px;}

 li.flickr {background:url("http://static.tumblr.com/4aqmjkd/ZzZm77wzi/flickr-32x32.png") no-repeat; width:32px; height:32px;}

 li.pintrest {background:url("http://static.tumblr.com/4aqmjkd/9RNm77x0c/pintrest__32_x_32.png") no-repeat; width:32px; height:32px;}

 li.etsy {background:url("http://static.tumblr.com/4aqmjkd/lWXm77wyk/etsy_32_x_32.png") no-repeat; width:32px; height:32px;}

 li.contact {background:url("http://static.tumblr.com/4aqmjkd/f5om77wxr/email_32_x_32.png") no-repeat; width:32px; height:32px;}

 <ul class="social" id="css3">
                        <li class="facebook"><a href="http://www.facebook.com/lolabellasco" target="_blank"><strong>Facebook</strong></a></li>
                        <li class="twitter"><a href="http://twitter.com/lolabellasco" target="_blank"><strong>Twitter</strong></a></li>

                        <li class="flickr"><a href="http://www.flickr.com" target="_blank"><strong>Flickr</strong></a></li>
                        <li class="pintrest"><a href="http://pinterest.com/lolabellas/" target="_blank"><strong>Pintrest</strong></a></li>
                        <li class="etsy"><a href="http://lolabellas.etsy.com" target="_blank"><strong>Etsy</strong></a></li>

                        <li class="contact"><a href="mailto:lolabellasetsy@gmail.com"><strong>Contact</strong></a></li>

                        </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:36:45.067

我不确定是什么导致了特定的悬停问题，但是有两个冲突`<!DOCTYPE>`的 s，一个`<script>`在`<head>/<body>`区域之外，一个条件注释完全破坏了 IE，因为文本标记了头部的末端并且开始身体的大部分头部仍然来...可能没有帮助。

相反，Fiddle 缺少上述所有的废话并且工作得很好。我建议在想知道为什么事情不起作用之前整理你的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:18:52.083

你在什么浏览器中测试这个？

另一个答案是指`<!DOCTYPE>`HTML 标签。您必须了解此标签的重要性。任何 Web 浏览器都会打开 .HTML 或 .HTM 文档，但浏览器真正了解作者预期文件格式的唯一方法是包含此`<!DOCTYPE>`标记。一开始，我并没有意识到这个事实。

那么谁在乎呢？好吧，浏览器是否将您的文件识别为 HTML4、`transitional`XHTML、`strict`HTML5 等很重要。例如，浏览器可能会自动将缺少 a 的文档识别`<!DOCTYPE>`为 HTML4（因为该属性直到后来才存在）。我相信这意味着浏览器会忽略 CSS 格式。

简而言之，了解什么是 HTML 文档类型，并确保使用支持您尝试使用的大部分或全部内容的一种。希望您可以通过其中一个 doctype 选项找到一种快乐的媒介，但您可能不得不更改一些代码。祝你好运！

编辑：您必须在所有主要浏览器中测试您正在开发的任何内容。具体来说，原因是每个浏览器都有行为/解释差异。如果您在一个小时的编码过程中忘记在多个浏览器中进行测试，您通常会感到非常失望。大声笑，发现您的代码在 5 个浏览器中有 3 个被破坏并不有趣，而且当您在一小时前第一次编写它时，修复它会容易得多。这些是要编码的词：随手测试，广泛测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:03:00.990

@嗨，这应该会有所帮助。重新定义这种风格：

```
.social li a strong { top:-30px !important; left:-10px !important; } 
```

# javascript - 在高级模式下编译时关闭编译器出错

> ID：11495308
> 
> 赞同：-1
> 
> 时间：2012-07-15T20:20:30.367
> 
> 标签：javascript, google-closure-compiler

当我使用[Closure Compiler](http://closure-compiler.appspot.com/home)在高级模式下编译时出现以下错误：（在简单和纯空白模式下，代码根本没有问题）

```
JSC_REDECLARED_VARIABLE: Redeclared variable: e at line 31 character 9
} catch (e) {
         ^
JSC_REDECLARED_VARIABLE: Redeclared variable: e at line 34 character 9
} catch (e) {
         ^ 
```

Closure Compiler 描述为错误的代码如下：

```
function getXMLHttp() {
    var xmlHttp;
    try {
        xmlHttp = new XMLHttpRequest();
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                return false;
            }
        }
    }
    return xmlHttp;
} 
```

为什么我使用高级模式时会出现这个问题，我不知道。我不知道为什么编译器说这也是一个错误。

（快速说明：此代码只是一个简单的 XML 请求，用于处理 IE 的错误捕获处理中的 PHP 文件。我所有的 JavaScript 代码都可以正常工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:22:44.883

`e`您可以通过使用,`e2`和`e3`为您的例外轻松摆脱它。这很脏，但仍然是一个很好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:30:31.377

你使用的方式`e`，不会有问题，你的代码应该按预期工作，但是，如果你想做这样的事情：

```
try {
    xmlHttp = new XMLHttpRequest();
} catch (e) {
    try {
        xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try {
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
            return false;
        }
    }
    console.log(e); // Now there is a chance that e refer to the "wrong" exception
} 
```

闭包编译器会预料到这一点，并对此发出警告，因为您`e`为每个 catch 语句重新声明。

正如 ThiefMaster 建议的那样，如果您想摆脱警告，您可以简单地将变量重命名为`e2`，依此类推。`e3`

# python - 模板语法错误

> ID：11495310
> 
> 赞同：3
> 
> 时间：2012-07-15T20:20:50.147
> 
> 标签：python, django, django-templates

我在 django 模板中使用 {% url %} 标记时遇到问题。

```
<a href="{% url baza.views.thread category.last_post.thread.pk %}">LINK</a> 
```

抛出此错误：

```
Caught NoReverseMatch while rendering: Reverse for 'baza.views.thread' with arguments '('',)' and keyword arguments '{}' not found. 
```

奇怪的是，它的工作原理是这样的：

```
{{ category.last_post.thread.pk }} 
```

返回正确的值“8”，当我像这样使用它时也不会抛出错误：

```
<a href="{% url baza.views.thread 8 %}">LINK</a> 
```

上面的代码工作正常，并重定向到线程。

我的 urls.py ：

```
...
(r"^temat/(\d+)/$", "thread"),
... 
```

后模型：

```
class Post(models.Model):
    title = models.CharField(max_length=60)
    created = models.DateTimeField(auto_now_add=True)
    creator = models.ForeignKey(User, blank=True, null=True)
    thread = models.ForeignKey(Thread)
    body = models.CharField(max_length=10000) 
```

线程视图：

```
def thread(request, pk):
    posts = Post.objects.filter(thread=pk).order_by("created")
    posts = mk_paginator(request, posts, 20) # ZMIEN TAKZE W get_thread_page
    t = Thread.objects.get(pk=pk)

    return render_to_response("baza/thread.html", add_csrf(request, posts=posts, pk=pk, title=t.title,
    element_pk=t.element.pk, media_url=MEDIA_URL, path = request.path)) 
```

类别模型具有“last_post”方法，它返回在此类别中发布的最后一条消息。

有人可以帮我解决这个烦人的问题吗？

问候。

附言。我正在使用 Django 版本：1.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:47:18.663

问题是下一个表达式的值`category.last_post.thread.pk`是 None 或 ''。*'baza.views.thread'*****没有***参数****'(* ***''*** *,)'*的 Reverse 。****

 ****参数 ('',) 表示`category.last_post.thread.pk`为 None 或 ''****

# opencv - 如何在 OpenCV 矩阵中存储复数？

> ID：11495316
> 
> 赞同：2
> 
> 时间：2012-07-15T20:21:31.530
> 
> 标签：opencv, matrix, complex-numbers

我有两个矩阵 A 和 B，其中 A 和 B 包含一些实数。现在我想要一个复数矩阵 C，这样：C[0] = A[0] + i B[0]。

我的问题是如何创建如此复杂的矩阵 C，以及如何将 A、B 矩阵值传递给矩阵 C。

我知道，我可以创建矩阵 C 如下：

CvMat* C_Matrix = cvCreateMat(5, 5, CV_64FC2);

但是现在如何将 A 和 B 的值传递给矩阵 C_Matrix？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:00:43.240

我认为您可以`merge()`在此处使用功能，请参阅**[文档](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=merge#merge)**

它说 ：`Composes a multi-channel array from several single-channel arrays.`

# python - Python 2.7 是否有 64 位二进制版本的 ujson 或 cjson

> ID：11495318
> 
> 赞同：1
> 
> 时间：2012-07-15T20:21:56.940
> 
> 标签：python, windows, json

我正在寻找 uJson 或 cJson（最好是前者）的 Windows 64 位二进制版本。它存在吗？如果是这样，你能发个链接吗？

还是我遗漏了什么，并且有某种方法可以在 64 位 Windows 系统上安装它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:24:35.533

[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)有许多软件包的 Windows 二进制文件（32 位和 64 位）。看起来那里的“基础”包（在页面底部）包含 ujson。

# multithreading - Spring AOP 方面未在线程中触发

> ID：11495320
> 
> 赞同：2
> 
> 时间：2012-07-15T20:22:27.573
> 
> 标签：multithreading, spring, aop

在线程运行之前调用的每个方法都可以正常工作，但是在启动线程之后它不会进入方面。

我正在使用实现接口的 JDK 动态代理对象，所有公共方法都是从其他线程调用的，而不是从对象本身调用的。

我正在使用弹簧 3.0.6。

请帮助我了解我所缺少的。

方面：

```
@Aspect 
public class CabLoggingAspect {

    public void init() {
        System.out.println("CabLoggingAspect: init()");
    }

    @Pointcut("execution(* com.station.taxi.ICab.*(..))")
    public void anyCall() { }

    @Before("anyCall()")
    public void logAnyCall(JoinPoint joinPoint) {
        System.out.println("CabLoggingAspect: logAnyCall(): "+joinPoint.getSignature().getName());
    }
} 
```

弹簧配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd ">

    <bean id="cab" class="com.station.taxi.Cab" scope="prototype" />    
    <aop:aspectj-autoproxy>
        <aop:include name="cabLoggingAspect"/>
    </aop:aspectj-autoproxy>
    <!-- AspectJ -->
    <bean id="cabLoggingAspect" class="com.station.taxi.aop.CabLoggingAspect" init-method="init"/>
</beans> 
```

bean的创建：

```
public ICab createCab(int num, String whileWaiting) {
    Object o = mApplicationContext.getBean("cab", num, whileWaiting);
    return (ICab)o;
} 
```

运行线程：

```
// public interface ICab extends Runnable { ...
// ... 
// initCabs.add(mContext.createCab(Integer.valueOf(cabNum), whileWaiting));
// ...
for(ICab cab: initCabs) {
    cab.setMeter(createTaxiMeter());
    cab.setStationEventListener(this);
    mInitThreads.add(cab);
}
// ...
for(Runnable t: mInitThreads) {
    new Thread(t).start();
} 
```

输出：

```
CabLoggingAspect: init()
CabLoggingAspect: logAnyCall(): setMeter
CabLoggingAspect: logAnyCall(): setStationEventListener
CabLoggingAspect: logAnyCall(): setMeter
CabLoggingAspect: logAnyCall(): setStationEventListener
CabLoggingAspect: logAnyCall(): run
CabLoggingAspect: logAnyCall(): run 
```

调用 run() 函数，并且没有其他任何内容按方面打印。我正在修改现有项目，所有线程都在运行，我可以看到线程的输出，与方面的实现无关

```
15/07/2012 23:19:05 Usjy - Passanger is ready and running...
15/07/2012 23:19:05 Usjy - Took cab starting transit
15/07/2012 23:19:06 MCMk - Passanger is ready and running...
15/07/2012 23:19:06 MCMk - Took cab starting transit
15/07/2012 23:19:08 Usjy - Arrived at TelAviv paid 5.8
15/07/2012 23:19:10 MCMk - Arrived at TelAviv paid 6.3 
```

**更新/解决方案**

*问题*

正如 Biju Kunjummen 在他的回答中所描述的那样。当线程运行时，它会通知调用者并传递 self 实例。以下所有调用都是在此实例上直接绕过代理执行的。

公共类 CabImpl 实现 ICab { @Override public void run() {
mStationListener.onCabReady(this); } }

*解决方案*

因为我有多个地方通过事件传递原始对象的实例，所以快速的解决方案是将对代理对象的引用存储在实例中并发送它。但更正确的解决方案是使用 AspectJ，这将阐明不必要的代码修改和依赖关系。

cab 对象内部的修改

```
private ICab mAopProxy;
//...
public void setAopProxy(ICab proxy) {
    mAopProxy = proxy;
}

@Override
public void run() {
    mStationListener.onCabReady(mAopProxy);
    //...
} 
```

驾驶室的创建

```
Advised advised = (Advised)mApplicationContext.getBean("cab", num, whileWaiting);
Cab cab = (Cab) advised.getTargetSource().getTarget();
cab.setAopProxy((ICab)advised); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:26:16.913

我看到您的 Cab 实现了 Runnable 接口，并且您正在使用 Cab 创建一个线程并启动该线程。

我假设 Cab 中的 run 方法正在调用 Cab 公开的其他方法，如果是这种情况，那么它将完全绕过动态代理，您会看到这种行为。

例如。如果客户端（不是 Cab）调用 setMeter，则调用流程为：

```
client->CabDynamicProxy.setMeter()->cab.setMeter(); 
```

现在考虑 Cab 本身通过它的另一个方法调用 setMeter 的情况（在这种情况下为 run()）：

```
Thread.start()->CabDynamicProxy.run()->cab.run()->cab.setMeter(); 
```

from cab.run `this`() 不会解析为动态代理，而是解析为实际的 cab 本身，因此完全绕过方面。

有一些解决方法：

1.  而不是动态代理使用完整的 AspectJ - 然后编织将直接在您的 Cab 代码中，而不是围绕它的代理。
2.  不要在 cab 的 run() 方法中调用 this.setMeter()，而是在某处保留对代理的引用，然后调用 proxy.setMeter()。

# java - 运行时错误 (NZEC)

> ID：11495322
> 
> 赞同：-1
> 
> 时间：2012-07-15T20:22:58.097
> 
> 标签：java

我编写了以下代码，它在我的 PC 上运行良好，但在 Codechef 上给出了 NZEC 类型的运行时错误：

```
import java.io.*;

class Main {
public static void main(String args[]) throws IOException {
    BufferedReader o = new BufferedReader(new InputStreamReader(System.in));
    int n = Integer.parseInt(o.readLine());       //Total videos
    int s[] = new int[n];
    int e[] = new int[n];
    int c=0, i=0;
    for(i=0;i<n;i++)            //Start and end times
    {
        s[i] = Integer.parseInt(o.readLine());           
        e[i] = Integer.parseInt(o.readLine());
    }
    int q = Integer.parseInt(o.readLine()); //No. of groups
    String st = new String();
    int noa = 0 , j = 0 , k = 0, z = 0;
    int count[] = new int[q];    //No. of videos of each group
    for(i=0;i<q;i++)
    {
        int marked[] = new int[n];
        st = o.readLine();
        String temp[] = st.split(" ");
        noa = Integer.parseInt(temp[0]);
        double toa[] = new double[noa];
        for(j=0;j<noa;j++)                   //Do for every alien of ith group
        {
            toa[j] = Double.parseDouble(temp[j+1]);    
            for(k=0;k<n;k++)                //Check for every video
            {
                if(toa[j]>=s[k]&&toa[j]<=e[k]&&marked[k]!=-1)
                {
                    z++;
                    marked[k] = -1;
                }
            }
        }

        count[i] = z;
        z = 0;
    }
    for(i=0;i<q;i++)
        System.out.println(count[i]);
}
} 
```

有人可以帮我解决这个问题吗？如果完全错误是由于使用该`split()`方法引起的，为什么我的电脑上没有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:38:34.430

您的代码非常不安全，并且一旦输入不完全符合您的预期，很可能会崩溃 - 以下是一些示例：

*   您在`Integer.parseInt()`没有异常处理的情况下继续调用 = 没有检查调用是否成功
*   您使用解析的整数创建数组而不检查它们是否可以接受（您希望它们至少是正数，并且可能不会太大）
*   您尝试访问`temp[j+1]`而不检查 temp 的长度是否至少为`j+2`.

此外，作为一般性评论，您应该尝试使用有意义的变量来使您的代码更具可读性 - 我认为没有人能猜出 n、s、e、c、i、noa、st、toa 是什么......

# cakephp - 在 Cakephp 中，如果我找到一个对象并返回“有很多”项目，我如何收集那些“有很多”项目所属的对象？

> ID：11495326
> 
> 赞同：1
> 
> 时间：2012-07-15T20:23:30.383
> 
> 标签：cakephp, cakephp-2.0, relationship

（在下面寻找一个实际的例子）

大家好，

我试图把它变成一个查询：
Cakephp，虽然很聪明，但它收集了我称之为查找的项目的所有匹配的“有很多”对象（换句话说，第二个表中的所有对象使用它的 ID）。然而，这些返回的对象也有第二个对象，它们受制于“有很多”关系。我还想收集这些对象的信息。是否可以在一个查询中执行此操作？

* * *

**实际例子：**

`House`--有很多--> `People`<--有很多--`Employer`

房子：
`id`,`address`

人：
`name`, `age`, `house_id`,`employer_id`

雇主：
`id`, `name`,`location`

当我请求时`house`，它返回所有`people`生活在`house`. 我想`employers`为每个`person`

有可能一发吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:06:31.553

在您的 Person 模型中使用以下代码：

```
public $belongsTo = array('Employer' => array(
                                              'className' => 'Employer', 
                                              'foreignKey' => 'employer_id'
                                              )
                          ); 
```

现在尝试请求房子。它将返回您想要的相同数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:49:11.567

我实际上发现了一个稍微明显，略显丑陋的解决方案。缺点是它似乎正在执行几个不必要的查询（例如收集`House`每个单个的记录`Person`）。一个更好的解决方案将不胜感激。

`House`我没有使用，而是使用`Person`.

所以如果查询是`$this->House->findById($house_id)`它变成了`$this->Person->findAllByHouseId($house_id)`. 结果不像搜索 from 那样是一个数组`House`，但是 Cake 收集了所有相关`Person`记录，并且还收集了`House`记录和相关`Employer`记录。

我希望这对其他人有用。我仍在寻找更优雅的解决方案，但这肯定是有用的。

# javascript - 如何将 HTML 文件加载到

> ID：11495332
> 
> 赞同：1
> 
> 时间：2012-07-15T20:24:03.943
> 
> 标签：javascript, file-io, xul

我试图弄清楚如何让我的 XUL 应用程序打开 HTML 文件并将其加载到编辑器元素中。但是，文档很少。

现在，我有一个像这样的内容窗口：

```
<hbox id="main-frame" flex="1">
    <tabbox id="workspace-tabbox" flex="1">
        <tabs id="workspace-tabs"/>
        <tabpanels id="workspace-tabpanels" flex="1" context="clipmenu"/>
    </tabbox>
    <splitter id="main-frame-splitter"/>
    <iframe id="preview-frame" src="about:blank" flex="1"/>
</hbox> 
```

使用 javascript，我将 a 附加`<tab>`到`<tabs>`，并将 a附加`<tabpanel>`到`<tabpanels>`. 然后我创建一个`<editor>`，将其附加到`<tabpanel>`，并使其可编辑。

然后，有一个链接到此功能的打开按钮：

```
function promptFile() {
    var filepicker = Components.classes["@mozilla.org/filepicker;1"].createInstance(Components.interfaces.nsIFilePicker);
    var file;
    var choice;
    var path = null;

    filepicker.init(window, "Open", filepicker.modeOpen);
    filepicker.appendFilters(filepicker.filterHTML);
    choice = filepicker.show();

    if (choice == filepicker.returnOK) {
        file = filepicker.file.QueryInterface(Components.interfaces.nsIFile);
        path = file.path;
    }

    return path;
} 
```

从这里开始，我不知道如何将其加载到`<editor>`. 我也不确定我是否在正确的路径上获取“路径”，或者我是否需要对“文件”对象做一些事情。

对此的任何见解或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:50:53.737

An`<editor>`本质上是一个框架 - 您只需将正确的 URL 加载到该框架中。您可以使用[`nsIIOService.newFileURI`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIIOService#newFileURI%28%29)从`nsIFile`实例中获取该 URL：

```
Components.utils.import("resource://gre/modules/Services.jsm");
var uri = Services.io.newFileURI(file);
var editor = document.getElementById("editor");
var loadFlags = Components.interfaces.nsIWebNavigation.LOAD_FLAGS_NONE;
editor.webNavigation.loadURI(uri.spec, loadFlags, null, null, null);
editor.makeEditable("html", true); 
```

以供参考：[`nsIWebNavigation.loadURI`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIWebNavigation#loadURI%28%29)

# vb.net - 编译后尝试从 .txt 文件调用时需要帮助

> ID：11495341
> 
> 赞同：1
> 
> 时间：2012-07-15T20:25:15.510
> 
> 标签：vb.net, browser

又是我迷惑先生。

我正在尝试在运行时从我计算机上的 .txt 文件中添加此代码（调用此代码）。

在编译之前，我可以将此代码添加到我的表单中，它可以通过手动将 webbrowser.navigate 和 addhandlers 放置在一个按钮下而运行良好，其余部分自行放置，但我想在我的应用程序编译后通过单击一个按钮添加此代码.

我对此的思考过程是像我一样在 .txt 中完成代码，然后在编译之前进入我的表单上的 btn1 并对其进行编码以说出我使用 openfiledialog 打开的任何 .txt 将代码拉入表单并使用它。

我知道手动将 webbrowser.navigate 和 addhandlers 手动放置在按钮下（并添加表单的处理程序和公共新实例）就可以解决问题，但必须有更好的方法来解决这个问题，因为我是将有大约 500 个 .txt 文件可供提取。

我正在考虑可能遍历一个文件夹并抓取文件夹中的每个 .txt 并通过执行某些操作将它们调用到表单中？？？但我在这一步迷路了。

关于如何解决这个问题的任何想法？

谢谢

这是来自 .txt 文件之一的代码。

```
'Connotea DECLARATION
Public Connotea as new captchawindow

Public Sub ConnoteaNavigate
Connotea.webbrowser1.navigate("http://www.connotea.org/register")
End Sub

Public Sub ConnoteaHandlers

AddHandler Connotea.button1.click, addressof Connoteabutton
AddHandler Connotea.webbrowser1.documentcompleted, addressof Connoteabrowsercompleted
End Sub

Public Sub Connoteabrowsercompleted

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "firstname" then
element.setAttribute("value", ProfileMaker.FirstName.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "lastname" then
element.setAttribute("value", ProfileMaker.LastName.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "username" then
element.setAttribute("value", ProfileMaker.Username.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "password" then
element.setAttribute("value", ProfileMaker.Password.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "passwordconfirm" then
element.setAttribute("value", ProfileMaker.Password.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "email" then
element.setAttribute("value", ProfileMaker.Email.Text)
End If
Next

For Each element as HtmlElement in Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "email2" then
element.setAttribute("value", ProfileMaker.Email.Text)
End If
Next

If Connotea.WebBrowser1.ReadyState = WebBrowserReadyState.Complete Then
For Each Captcha As HtmlElement In Connotea.WebBrowser1.Document.Images
If Captcha.GetAttribute("src").Contains("http://www.google.com/recaptcha/api/image?c=") Then
Connotea.PictureBox1.Load(Captcha.GetAttribute("src"))
End If
Next
End If

End Sub

Public Sub Connoteabutton

Connotea.show

For Each element as HtmlElement in     Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("id") = "recaptcha_response_field" then
element.setAttribute("value", Connotea.Textbox1.Text)
End If
Next

For Each element as HtmlElement in             Connotea.WebBrowser1.Document.Getelementsbytagname("input")
If element.getattribute("value") ="register" then
 element.InvokeMember("click")
End If
Next

Connotea.dispose
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:36:08.900

我认为您正在使用[CodeDOM寻找解决方案](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)

[这个关于 SO](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)的问题在 C# 中，但应该给你一些指示。

[微软网站上的这篇文章](http://support.microsoft.com/kb/304654)提供了在 VB 中实现这一目标的分步指南

# twitter-bootstrap - 将初始化程序与自定义引导程序和样式引导程序相结合

> ID：11495347
> 
> 赞同：0
> 
> 时间：2012-07-15T20:26:22.910
> 
> 标签：twitter-bootstrap, customization, html5boilerplate

我想开始一个 html5 样板项目，使用 Web 界面自定义引导程序（元素）和自定义样式引导程序（css）。我怎样才能做到这一点？我从[这个问题](https://stackoverflow.com/questions/11125447/colors-in-bootstrap-custom-download)中了解到我必须在本地编译。但是我怎样才能获得一个 GUI 来选择我想要的组件呢？以及如何包含[stylebootstrap](http://stylebootstrap.info/)功能？当您使用这些网站时，您要么使用[bootstrap 的自定义](http://twitter.github.com/bootstrap/download.html)，要么使用stylebootstrap。如果我希望我的引导程序集成在 html 样板中，他们的网站只提供默认版本，没有任何定制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:13:37.510

您可能必须复制并粘贴 stylebootstrap 生成的代码。

阅读所有的 CSS，看看你是否能分辨出哪些选择器与你的页面相关。您可能会发现不使用 Bootstrap 会更容易。

可能有 GUI 生成器，但如果您不清楚基础知识，IMO 只会增加复杂性。

# ios - iOS-> AWS 最佳实践

> ID：11495348
> 
> 赞同：-2
> 
> 时间：2012-07-15T20:26:37.477
> 
> 标签：ios, amazon-web-services

在使用 iOS 和 AWS 构建应用程序时，您是否建议使用 SSL 在用户和服务器之间来回传输数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:31:49.980

当然，为什么不呢？鉴于越来越多的国家（甚至是独立行动的 ISP）正朝着这个方向前进，保护通信免受窥探比以往任何时候都更加重要。

诚然，加密确实会消耗更多的 CPU 功率，但对于短时间传输来说，它不应该有所作为。您打算在 iOS 设备和 AWS 之间传输多少数据（以字节为单位）？

请记住检查证书本身以确保它仍然有效并且是真正的亚马逊证书而不是冒名顶替者。

# python - gevent猴子补丁和断点

> ID：11495357
> 
> 赞同：19
> 
> 时间：2012-07-15T20:27:49.130
> 
> 标签：python, debugging, pydev, monkeypatching, gevent

我一直在和 Gevent 一起玩，我非常喜欢它。但是我遇到了一个问题。没有命中断点，并且调试不起作用（同时使用 Visual Studio Python 工具和 Eclipse PyDev）。这发生在`monkey.patch_all()`被调用之后。

这对我来说是个大问题，不幸的是这是使用 gevent 的一个障碍。我发现了[一些](https://groups.google.com/forum/?fromgroups#!topic/gevent/iBFgoSvyoik)似乎表明 gevent 中断调试的线程，但我想有一个解决方案。

有谁知道如何使调试和断点与 gevent 和猴子补丁一起工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T10:12:26.910

PyCharm IDE 解决了这个问题。设置配置标志后，它支持 gevent 代码调试：http: [//blog.jetbrains.com/pycharm/2012/08/gevent-debug-support/](http://blog.jetbrains.com/pycharm/2012/08/gevent-debug-support/)。

不幸的是，目前我不知道能够调试 gevent 的免费工具。

UPD：有！现在有一个社区版本的 PyCharm。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T22:17:32.253

[pdb - Python 调试器](http://docs.python.org/2/library/pdb.html)

```
import pdb
pdb.set_trace() # Place this where you want to drop into the python interpreter. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-27T14:31:42.343

在 VS Code 中调试时，

我收到了这个错误：

> 似乎正在使用 gevent 猴子补丁。请设置环境变量：GEVENT_SUPPORT=True 以在调试器中启用 gevent 支持。

为此，在调试`launch.json`设置中，我设置了以下内容：

```
"env": {
    "GEVENT_SUPPORT": "True"
}, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-17T20:13:42.760

最简单、最危险的解决方案是修改标准输入和标准输出：

```
import gevent.monkey
gevent.monkey.patch_all(sys=True)

def my_app():
    # ... some code here

    import pdb
    pdb.set_trace()

    # ... some more code here

my_app() 
```

这是非常危险的，因为您可能会在应用程序的剩余生命周期中以奇怪的方式表现标准输入/标准输出。

相反，您可以使用我编写的库：[gtools.pdb](http://github.com/tiagocoutinho/gtools)。它仅将 pdb 提示的风险降至最低：

```
def my_app():
    # ... some code here

    import gtools.pdb
    gtools.pdb.set_trace()

    # ... some more code here

my_app() 
```

基本上，它的作用是告诉 pdb 使用非阻塞标准输入和标准输出作为其交互式提示。任何正在运行的 greenlets 仍将继续在后台运行。

如果你想避免依赖，你需要做的就是告诉 pdb 使用 gevent 友好的标准输入和标准输出，如下所示：

```
import sys
from gevent.fileobject import FileObjectThread as File

def Pdb():
    import pdb
    return pdb.Pdb(stdin=File(sys.stdin), stdout=File(sys.stdout))

def my_app():
    # ... some code here

    Pdb().set_trace()

    # ... some more code here

my_app() 
```

请注意，使用这些解决方案中的任何一个，您都会松开 Key-up、Key-down pdb 提示设施，[请参阅 gevent issue patching stdin/stdout](https://github.com/gevent/gevent/issues/274)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T15:54:24.347

我目前使用 Pycharm 2.7.3，我也遇到了 gevent 0.13.8 破坏调试的问题。但是，当我更新到[gevent 1.0rc3](https://github.com/surfly/gevent/releases)时，我发现我可以再次正确调试。

* * *

边注：

*我现在才知道 Jetbrains 有一个使用配置标志的解决方法。*当我需要使用以下 hack 进行调试时，我正在解决这个问题。老实说，我不知道它为什么起作用，也不知道负面后果是什么。我只是做了一些试验和错误，这恰好允许在使用 grequests 时进行调试。

```
# overrides the monkeypatch issue which causes debugging in PyDev to not work.
def patch_time():
    return
import gevent.monkey
gevent.monkey.patch_time = patch_time 
import grequests 
```

# redirect - 如何从我的域注册商重定向页面 url (example.com/pageurl)？

> ID：11495358
> 
> 赞同：0
> 
> 时间：2012-07-15T20:27:58.167
> 
> 标签：redirect, dns

所以我有一个 Tumblr，这意味着我不能使用 htaccess，我希望有一种方法可以将页面 url（example.com/post/2234324/posttitle 重定向到 example.com/page），纯粹来自我的注册商（Namecheap ）。

是否有我可以更改的主机记录或其他东西来重定向我域上的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:38:38.330

如果您可以访问您的 DNS 并且可以添加 A 记录等，请查看 CNAME 记录。您可以在此处输入别名域。当您设置 cdn.myco.com 并且您的 amazon 存储桶为 cdn.myco.com.amazons3.com 或使用 Google Apps for Business 管理您的电子邮件时，这通常与 Amazon S3 一起使用。

*   请参阅：http : [//support.google.com/blogger/bin/answer.py ?hl=en&answer=58317](http://support.google.com/blogger/bin/answer.py?hl=en&answer=58317)
*   对各种主机的良好说明

# netbeans - 如何在 NetBeans 输出控制台中打开包装模式？

> ID：11495359
> 
> 赞同：38
> 
> 时间：2012-07-15T20:28:02.240
> 
> 标签：netbeans, netbeans-7.2

如何在控制台中打开包装模式？我正在使用 NetBeans IDE 6.8 我不断收到消息：

> ...此行太长，请切换到包裹模式查看整行...

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-03-21T11:20:26.903

在输出窗口中右键单击 -> 换行（`CTRL`+ `R`）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T15:18:15.453

在 Netbeans 7.2 中，它位于 Tools-Options-Editor-Formatting-Line Wrap 中（默认关闭）。

# filemaker - 如何使用 filemaker 创建自动考勤系统

> ID：11495360
> 
> 赞同：0
> 
> 时间：2012-07-15T20:28:03.360
> 
> 标签：filemaker

嗨，我是 filemaker 的新手，我有兴趣学习和使用 filemaker 创建考勤系统。我喜欢这样做的方式是使用 filemaker ( Time Cards ) 中提供的解决方案。我希望我的代码在用户输入他/她的 id 时捕获用户的时间戳，并且 filemaker 将自动存储该特定事件的时间戳。该解决方案还应该能够检测它是否已经捕获了同一用户已经输入的任何先前时间。对不起我的解释。我希望你们清楚易懂。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:55:46.587

如果用户正在登录系统（用户名和密码），您可以通过在打开时（登录）运行脚本来完成此操作。

这将像：

1.  转到跟踪表（由时间戳和 accountName 字段组成的表）
2.  设置错误捕获
3.  执行查找 - accountName = get(accountName)
4.  如果 get(lastError) = 401 [这表明该用户没有记录]，创建新记录，设置字段 timestamp = get(currentTimestamp)，设置字段 accountName = get(accountName)
5.  else [如果他们输入了以前的数据，您可以退出应用程序、显示对话框或跳过添加新记录]
6.  endif，然后编写您需要在 onOpen 上执行的任何其他操作。

如果您的用户正在输入临时字段以登录用户表，这是一个类似的步骤，您只需要获取 $accountName 作为变量以在查找中使用。

# c# - 找不到类型或命名空间名称“布尔”

> ID：11495361
> 
> 赞同：1
> 
> 时间：2012-07-15T20:28:10.767
> 
> 标签：c#

对于我的家庭作业中的以下代码显示错误找不到类型或命名空间名称“布尔”

```
 class LinkedList
   {
private Node first;
public LinkedList()
{
    first = null;
}
public boolean isEmpty()
{
    return (first == null);
}
public void insert(int val)//inserts at beginning of list
{
    Node newNode = new Node(val);
    newNode.next = first;
    first = newNode;
}
public Node delete()//deletes at beginning of list
{
    Node temp = first;
    first = first.next;
    return temp;
} 
```

我在互联网上的每个地方都发现了几乎类似的问题，但不完全是布尔值，请有人帮帮我。顺便说一句，我正在学习 c# for 3-4 说。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T20:30:33.023

它是`bool`（小写的*b*）或`Boolean`在 C# 中。考虑使用`bool`虽然，因为它更短且与其他语言（Java 除外）更一致。

> `bool`关键字是 的别名`System.Boolean`。

来源：http: [//msdn.microsoft.com/en-us/library/c8f5xwh7%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/c8f5xwh7%28VS.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:31:17.437

在 C# 中，我们没有关键字 boolean，我们将其作为 System.Boolean

bool 关键字也是 System.Boolean 的别名。它用于声明变量以存储布尔值，true 和 false。

# mysql - 无法在 Amazon EC2 上的 Tomcat7 和 MySQL 之间建立连接池

> ID：11495364
> 
> 赞同：0
> 
> 时间：2012-07-15T20:29:00.413
> 
> 标签：mysql, tomcat, amazon-ec2, connector-j, data-connections

我正在尝试在 Amazon EC2 机器`connection pool`之间`Tomcat7`建立一个。`MySQL`我已将`Connector/J`JAR 文件复制到`WEB-INF/lib`文件夹，但出现以下错误`catalina.out`

```
Jul 15, 2012 6:49:10 PM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
java.sql.SQLException: com.mysql.jdbc.Driver
    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:242)
    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:175)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:684)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:616)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:479)
    at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:135)
    at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:114)
    at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:101)
    at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:501)
    at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:224)
    at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
    at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1061)
    at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:671)
    at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:270)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:962)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1471)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:857)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:795)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:334)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:211)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:235)
    ... 62 more 
```

我想不出我正在做的可能的错误，任何指针都会有很大的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:36:11.400

将连接器/J 复制到`$CATALINA_HOME/lib`. 这也在[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#MySQL_DBCP_Example)中有所说明。

# python - 未设置记录器级别

> ID：11495368
> 
> 赞同：0
> 
> 时间：2012-07-15T20:29:29.923
> 
> 标签：python, logging

我正在尝试从简单的打印切换到正确的日志记录。

我想使用两个不同的记录器，第一个在屏幕上显示信息，另一个在文件中。

我的问题是，即使我将处理程序级别设置为调试，消息仅从警告显示。

这是我的代码示例：

```
def setup_logger(self):

    """

    Configures our logger to save error messages

    """

    # create logger for  'facemovie'

    self.my_logger = logging.getLogger('FileLog')

    # create file handler which logs even debug messages

    fh = logging.FileHandler('log/fm.log')

    fh.setLevel(logging.DEBUG)

    # create console handler with a higher log level

    self.console_logger = logging.getLogger('ConsoleLog')

    ch = logging.StreamHandler()

    ch.setLevel(logging.DEBUG)

    # create formatter and add it to the handlers

    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')

    fh.setFormatter(formatter)

    #ch.setFormatter(formatter)

    ##Start logging in file

    self.my_logger.info("######")

    # add the handlers to the logger

    self.my_logger.addHandler(fh)

    self.console_logger.addHandler(ch)

    # DEBUG

    self.console_logger.info("MFCKR")

    self.console_logger.debug("MFCKR")

    self.console_logger.warning("MFCKR")

    self.console_logger.error("MFCKR")

    self.console_logger.critical("MFCKR")

    self.my_logger.info("MFCKR")

    self.my_logger.debug("MFCKR")

    self.my_logger.warning("MFCKR")

    self.my_logger.error("MFCKR")

    self.my_logger.critical("MFCKR") 
```

和输出：

```
[jll@jll-VirtualBox:~/Documents/FaceMovie]$ python Facemoviefier.py -i data/inputs/samples -o data/
Selected profile is : frontal_face
MFCKR
MFCKR
MFCKR
Starting Application !
Output #0, avi, to 'data/output.avi':
    Stream #0.0: Video: mpeg4, yuv420p, 652x498, q=2-31, 20780 kb/s, 90k tbn, 5 tbc
FaceMovie exited successfully!
[jll@jll-VirtualBox:~/Documents/FaceMovie]$ cat log/fm.log 
2012-07-15 22:23:24,303 - FileLog - WARNING - MFCKR
2012-07-15 22:23:24,303 - FileLog - ERROR - MFCKR
2012-07-15 22:23:24,303 - FileLog - CRITICAL - MFCKR 
```

我红了文档并在网上搜索了类似的错误，但找不到任何错误。

您对记录器不显示 DEBUGs 和 INFOs 的原因有什么想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:37:41.120

[刚刚在这里找到了答案](https://stackoverflow.com/questions/6614078/logging-setlevel-how-it-works?rq=1)

不知道为什么我之前没有找到它。

必须设置整个记录器级别，即使处理程序也是如此。我没有设置记录器的级别，我猜在这种情况下默认是警告。

问题解决了 ！

# c++ - 需要一个 C++ 库来将曲线拟合到数据点

> ID：11495372
> 
> 赞同：5
> 
> 时间：2012-07-15T20:29:51.920
> 
> 标签：c++, regression, curve-fitting

我有一个创建数据点的程序，其中一些是对数函数的形状，有些是线。我需要能够将曲线拟合到这些数据点才能进行推断。是否有任何 C++ 库可以为我做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:31:43.823

试试 GNU 科学图书馆：[http ://www.gnu.org/software/gsl/manual/html_node/Linear-regression.html](http://www.gnu.org/software/gsl/manual/html_node/Linear-regression.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-13T18:40:23.047

CERN 的 ROOT 包可能是您的最佳选择。它将绘图、GUI 资源和稳定的计算资源结合在一个伟大的包中。

# android - java.lang.NoSuchMethodError: android.app.AlertDialog$Builder

> ID：11495376
> 
> 赞同：1
> 
> 时间：2012-07-15T20:30:26.097
> 
> 标签：android, exception, android-alertdialog

我收到了关于这个特殊异常的报告，它让我很难过，没有任何运气四处寻找它。这个应用程序已经在少数不同的设备上进行了测试，没有任何类似的东西。

奇怪的是，用户第一次运行应用程序时，`AlertDialog.Builder`会创建并呈现 an，因此`AlertDialog.Building`很可能是设备上的真实方法。文档还告诉我，它也从 API 级别 1 开始存在。

异常可能是指其他问题吗？

异常发生在运行 2.3.6 的 GT-N7000 Galaxy Note 上。

堆栈跟踪被反混淆：

```
java.lang.NoSuchMethodError: android.app.AlertDialog$Builder.
at com.slowchop.wifiheat.lib.heat.Filter.void showSubjectDialog(java.lang.String,java.lang.String)(SourceFile:143)
at com.slowchop.wifiheat.lib.heat.Filter.void showChangeAccessPoint()(SourceFile:128)
at com.slowchop.wifiheat.lib.heat.HeatActivity.boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem)(SourceFile:475)
at android.support.v4.app._ActionBarSherlockTrojanHorse.boolean onMenuItemSelected(int,com.actionbarsherlock.view.MenuItem)(SourceFile:119) 
```

涉及的方法：

```
private void showSubjectDialog(String title, final String filter) {
    new AlertDialog.Builder(context, AlertDialog.THEME_HOLO_DARK)
            .setTitle(title)
            .setAdapter(subjectAdapter, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int i) {
                    ListItem item = (ListItem)subjectAdapter.getItem(i);
                    updateFilterFromAlertDialog(dialog, filter, item.id);
                }
            }).show();
} 
```

第 143 行是：

```
 new AlertDialog.Builder(context, AlertDialog.THEME_HOLO_DARK) 
```

还有另一个堆栈跟踪来自不同的路径，但以`showChangeAccessPoint()`相同的方式继续调用。在这种情况下，关于的错误`AlertDialog.Builder`是从另一个调用的`AlertDialog.Builder`！：

```
java.lang.NoSuchMethodError: android.app.AlertDialog$Builder.
at com.slowchop.wifiheat.lib.heat.Filter.void showSubjectDialog(java.lang.String,java.lang.String)(SourceFile:143)
at com.slowchop.wifiheat.lib.heat.Filter.void showChangeAccessPoint()(SourceFile:128)
at com.slowchop.wifiheat.lib.heat.Filter$2.void onClick(android.content.DialogInterface,int)(SourceFile:85)
at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:935) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:37:48.433

我想我刚刚解决了，`THEME_HOLO_DARK`是[API 级别 11](http://developer.android.com/reference/android/app/AlertDialog.html#THEME_HOLO_DARK)。奇怪的是，在运行 2.3.3（API 级别 10）的设备上尝试它似乎没有问题。

这里提到了一种安全使用它的方法：[https ://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/0yNlvDXObAo](https://groups.google.com/forum/?fromgroups#!topic/actionbarsherlock/0yNlvDXObAo)

```
AlertDialog.Builder builder;
try {
    builder =  new AlertDialog.Builder(getActivity(), R.style.Theme.Sherlock.Dialog);
} catch (NoSuchMethodError e) {
    Log.e(TAG, "Older SDK, using old Builder");
    builder =  new AlertDialog.Builder(getActivity());
} 
```

此外，这是代码中唯一使用 THEME_HOLO_DARK 的部分，因此它只发生在那里。我想我在那个阶段正在尝试不同的主题，不小心把它放在那里了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:57:48.857

[https://stackoverflow.com/a/12211522/146167](https://stackoverflow.com/a/12211522/146167)中提到的另一种方式

```
if (Build.VERSION.SDK_INT > 10)
    builder =  new AlertDialog.Builder(getActivity(), R.style.Theme.Sherlock.Dialog);
else
    builder =  new AlertDialog.Builder(getActivity()); 
```

# deployment - 编辑/添加 .jsp 和 .java 文件后如何更新已部署的应用程序？

> ID：11495378
> 
> 赞同：1
> 
> 时间：2012-07-15T20:30:32.257
> 
> 标签：deployment, jboss, intellij-idea

我在本地 jboss-portal-2.7.2 上从 IntelliJ IDEA 11.0 运行调试（远程）。IDEA 进行应用程序部署。浏览器打开。

编辑 .jsp 文件后，我执行“打包文件 (Ctrl+Shift+F9)”并通过以下方式进行重新部署：

```
twiddle.bat -s jnp://localhost:1099 -user=admin -password=admin invoke "jboss.system:service=MainDeployer" redeploy "file:C:/Users/Abbas/Projects/my-app/my-portlet/target/my-portlet.war" 
```

但它只有在编辑不像 JavaScript 代码那样编译的内容后才有帮助。

对于 .java 文件，我一直在尝试执行“编译（Ctrl+Shift+F9）”并通过 twiddle.bat 进行重新部署，但更改没有生效。

现在只能重新启动（运行/停止，运行/调试）。但是我不想每次都重新部署所有的包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:12:26.607

看看杰瑞贝尔。

[http://zeroturnaround.com/software/jrebel/](http://zeroturnaround.com/software/jrebel/)

# yaml - 努力在 Jekyll 配置文件中查找数组（站点导航）

> ID：11495381
> 
> 赞同：6
> 
> 时间：2012-07-15T20:30:48.813
> 
> 标签：yaml, jekyll

在我的`_config.yml`我有：

```
navigation:
- text: Home
  url: index.html
- text: About
  url: about.html
- text: Blog
  url: blog.html
- text: Portfolio
  url: portfolio.html 
```

在我的`default.html`布局中，我有：

```
<ul class="nav-list">
  {% for link in site.navigation %}
    {% assign current = nil %}
    {% if page.url == link.url %}
      {% assign current = 'current' %}
    {% endif %}

    <li class="nav-list-item{% if forloop.first %}first{% endif %} {{ current }} {% if forloop.last %}nav-list-item-last{% endif %}">
      <a class="{{ current }}" href="{{ link.url }}">{{ link.text }}</a>
    </li>
  {% endfor %}
</ul> 
```

由于某种原因，这不起作用。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T22:13:50.397

我刚刚发现您必须重新启动服务器并`jekyll --server`再次运行，并且`_config.yml`可以访问变量。

然后在弄清楚之后回到这个页面并准备发布这个答案，点击`add / show 4 more comments`并看到这也被操作员发现了。所以发布它作为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T12:29:52.773

除了其他答案：您可以 - 正如您在答案中提到的 - 使用`Ctrl`+`C`结束当前正在运行的服务器（在您的 CLI 中）。**但是**，您也可以使用以下命令启动服务器

```
jekyll server -w 
```

告诉 Jekyll 注意你的文件的变化。虽然这不适用于对 的更改`_config.yml`，但它适用于所有其他文件。请注意，这将不起作用，包括该`--safe`选项，因此您不会收到错误。为了捕捉它们，我仍然建议`jekyll --safe build`不时运行以查看是否有语法错误。在您的开发过程中运行`jekyll doctor`/有时也是如此。`jekyll hyde`

# c++ - 更新：Ubuntu SDL SetVideoMode 失败，找不到匹配的 GLX Visual

> ID：11495382
> 
> 赞同：1
> 
> 时间：2012-07-15T20:31:16.097
> 
> 标签：c++, linux, opengl, sdl

我一直在尽我所能追查这个问题，我想我已经找到了罪魁祸首，但我无法解决它。

基本上我正在尝试在 Ubuntu 12.04 中运行我的简单游戏引擎。引擎是一个静态库，它链接到正在使用的游戏。一切都可以编译（在 Ubuntu 中），但是当我运行程序时，它永远不会打开窗口并立即关闭。在 CodeBlocks 中，我收到错误“进程以状态 255 终止”。我相信 SetVideoMode 正在返回 null，正如 Init 代码中的这一行所检查的那样：

```
if((Surf_Display = SDL_SetVideoMode(WindowWidth, WindowHeight, 32,SDL_GL_DOUBLEBUFFER | SDL_OPENGL)) == NULL){
        return false;
   } 
```

我认为这是因为我之前忘记在 NULL 之前添加双等号，并且在这种情况下，应用程序不会终止，只是永远不会创建一个窗口，但程序显然正在系统监视器中运行。

我还注意到一些有趣的事情。静态库的 Debug 版本是 350 奇数 kb，而程序本身只有 150 kb。在 Windows 上，程序总是大于库的大小，这假设库是内置在可执行文件中的。这也许是 Linux 的工作方式。

这是引擎初始化代码：

```
#include "Scales.h"
#include "SDL/SDL.h"
#include "GL/gl.h"
#include "GL/glu.h"
#include "SDL/SDL_opengl.h"
#include <iostream>

Engine *scalesEngine;

bool OnInit(int WindowHeight, int WindowWidth){

    SDL_Surface* Surf_Display;

    if(SDL_Init(SDL_INIT_EVERYTHING) < 0) {
        return false;
   }
    SDL_GL_SetAttribute(SDL_GL_RED_SIZE,        8);
    SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE,      8);
    SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE,       8);
    SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE,      8);

    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE,      16);
    SDL_GL_SetAttribute(SDL_GL_BUFFER_SIZE,        32);

    SDL_GL_SetAttribute(SDL_GL_ACCUM_RED_SIZE,    8);
    SDL_GL_SetAttribute(SDL_GL_ACCUM_GREEN_SIZE,    8);
    SDL_GL_SetAttribute(SDL_GL_ACCUM_BLUE_SIZE,    8);
    SDL_GL_SetAttribute(SDL_GL_ACCUM_ALPHA_SIZE,    8);

    SDL_GL_SetAttribute(SDL_GL_MULTISAMPLEBUFFERS,  1);
    SDL_GL_SetAttribute(SDL_GL_MULTISAMPLESAMPLES,  2);

   if((Surf_Display = SDL_SetVideoMode(WindowWidth, WindowHeight, 32,SDL_GL_DOUBLEBUFFER | SDL_OPENGL)) == NULL){
        return false;
   }

   glClearColor(0.422f,0.576f,1.0f,1.0f);
   glClearDepth(1.0f);

   glViewport(0, 0, WindowWidth, WindowHeight);

   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();

   glOrtho(0, WindowWidth, WindowHeight, 0, 1, -1);

   glMatrixMode(GL_MODELVIEW);

   glEnable(GL_TEXTURE_2D);

   glLoadIdentity();

   game_Init();

   return true;
}

int main(int argc, char* argv[]){

    scalesEngine = new Engine;

    game_preload();

    if(OnInit(scalesEngine->WindowHeight(), scalesEngine->WindowWidth()) == false){
        return -1;
    }

    SDL_Event Event;

    //Main Game Loop
    while(scalesEngine->Running){

        while(SDL_PollEvent(&Event)){
            scalesEngine->OnEvent(&Event);
        }

        scalesEngine->Update();
        scalesEngine->Render();
    }

    scalesEngine->OnCleanUp();
    delete scalesEngine;

    return 0;
} 
```

所有以“game”为前缀的函数调用都是实际程序中的外部函数。上面的代码在引擎库中。

如果您需要更多信息，请询问。

编辑：在进一步寻找问题后，我注意到 SDL 给出了这个错误：

```
Couldn't Find Matching GLX Visual 
```

这是什么意思，我到底该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:50:24.387

```
SDL_SetVideoMode(WindowWidth, WindowHeight, 32,SDL_GL_DOUBLEBUFFER | SDL_OPENGL)) 
```

`SDL_GL_DOUBLEBUFFER`绝不`flags`是[`SDL_SetVideoMode()`](http://www.libsdl.org/cgi/docwiki.cgi/SDL_SetVideoMode).

* * *

此外，您指定了大量的 GL 属性。尝试删除所有`SDL_GL_SetAttribute()`呼叫。如果可行，一次将它们添加回来，以确定您的 GL 实现不喜欢哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:28:52.113

（我知道这是旧的，但我终于破解了它，它已经困扰我好几个月了。）

删除“SDL_GL_ACCUM*”的所有属性集，如果设置多重采样有效，则删除这些属性集。

还记得启用 GL_MULTISAMPLE、GL_LINE_SMOOTH 和 GL_POLYGON_SMOOTH 并可能提供线条/多边形平滑的提示。

您可能会发现在窗口模式下和使用某些图形驱动程序时看不到 AA 的效果（我的催化剂驱动程序似乎没有做任何事情。）

这些是我使用的属性：

```
SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);
SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);
SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);
SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);

SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
SDL_GL_SetAttribute(SDL_GL_BUFFER_SIZE, 32);

//SDL_GL_SetAttribute(SDL_GL_ACCUM_RED_SIZE, 8);
//SDL_GL_SetAttribute(SDL_GL_ACCUM_GREEN_SIZE, 8);
//SDL_GL_SetAttribute(SDL_GL_ACCUM_BLUE_SIZE, 8);
//SDL_GL_SetAttribute(SDL_GL_ACCUM_ALPHA_SIZE, 8);

//SDL_GL_SetAttribute(SDL_GL_ACCELERATED_VISUAL, 1);

SDL_GL_SetAttribute(SDL_GL_MULTISAMPLEBUFFERS, 1);
SDL_GL_SetAttribute(SDL_GL_MULTISAMPLESAMPLES, 4); 
```

# c# - 如何在asp.net mvc中访问全局变量

> ID：11495386
> 
> 赞同：-1
> 
> 时间：2012-07-15T20:31:43.243
> 
> 标签：c#, asp.net-mvc-3

我正在尝试访问在项目的 Global.asax 部分中设置的全局变量。当在我的 DAL 中包含命名空间并访问变量时，Visual Studio 会抱怨。这是代码

```
protected void Application_Start()
{
     AreaRegistration.RegisterAllAreas();
     RegisterGlobalFilters(GlobalFilters.Filters);
     RegisterRoutes(RouteTable.Routes);
     Application["NHSessionFactory"] = CreateSessionFactory();
} 
```

这是我的 DAL 逻辑

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.Mvc;
using NHibernate;

namespace Data.DAL
{
    public class DB
    {
        private ISessionFactory session;
        public DB()
        {
            ISessionFactory session = (ISessionFactory) Application["NHSessionFactory"];   //problems here
        }

        public ISessionFactory GetSession()
        {
            return session;
        }
    }
} 
```

错误的屏幕截图： ![在此处输入图像描述](../Images/0b87e0501d92e4b2e0d3c100fa1e4eac.png)

我将如何访问在 Global.asax 中设置的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:35:45.957

是的，您可以像 asp.net 一样使用应用程序变量

```
Example:

System.Web.HttpContext.Current.Application.Lock();
System.Web.HttpContext.Current.Application["NHSessionFactory"] = "Something";
System.Web.HttpContext.Current.Application.UnLock(); 
```

# java - 在android中通过http连接发送和接收字符串

> ID：11495389
> 
> 赞同：0
> 
> 时间：2012-07-15T20:32:05.450
> 
> 标签：java, android, http, arduino

我会尽量让我的问题保持简单.. 使用 arduino 和以太网屏蔽我已经成功地设置了一个 http 服务器。通过 telnet 接口，我可以在服务器和我的计算机之间发送和接收字符串，这就是我想要的。但我想通过一个 android 应用程序来做到这一点。我已经完成了搜索，我发现与 http 服务器的最简单连接是通过 httpUrlConnection。但我还没有设法通过。我搜索的每个地方都有相同的例子，但我遇到了 writeStream() 和 readStream() 的问题.. 只是为了清楚我不想使用复杂的方法，如 post、get、put 等，我只想发送和接收字符串。在此先感谢，卢卡斯

编辑：对不起，但经过一番搜索，我发现我可以使用 http 客户端而不是 http url 连接，因为我已经在 arduino 设置了服务器。我现在的问题是如何通过 http 模拟 telnet，我只找到了使用套接字的示例，我想使用 httpclient 并且只是发送和接收像 telnet 这样的 sting，谢谢，我真的很抱歉，我不能更清楚..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:30:58.500

事实上，我在您的应用程序中看不到“writeStream”或“readStream”例程。如果您从某个地方进行了复制粘贴，则可能需要查看这些函数的定义...

我用谷歌搜索了一个看起来与你相似的例子，发现了这个，不确定它是否有帮助：

[http://pastebin.com/gE650RrS](http://pastebin.com/gE650RrS)

简而言之：您需要创建这些方法。

# apache - Apache 站点加载缓慢，可能允许覆盖或重写问题

> ID：11495392
> 
> 赞同：1
> 
> 时间：2012-07-15T20:33:02.203
> 
> 标签：apache, .htaccess, mod-rewrite

我发现我的网站加载第一页的速度很慢，但在那之后就很好了，一些对 apache 配置的试验表明以下问题之一可能是问题：

1.  **AllowOverride** - 我知道将 AllowOverride 设置为 All 会降低站点速度，因为它会在每个文件夹中查找 .htaccess 文件，因此我将配置移动到虚拟主机文件中并设置 AllowOverride None 从而关闭 .htaccess 文件，这最初似乎可以解决问题，但是当我再次尝试时，问题又回来了，所以也许不是那样。

2.  我删除了 AllowOverride 行，因此它默认恢复为默认设置（无）。这似乎有所帮助，但有时仍然会再次发生。

3.  可能是重写规则：

    ```
    RewriteEngine On              

    RewriteCond %{HTTP_REFERER} !^$
    RewriteCond %{HTTP_REFERER} !^http(s)?://(.+\.)?example\.com/.*$ [NC]
    RewriteCond %{HTTP_REFERER} !google. [NC]
    RewriteCond %{HTTP_REFERER} !search?q=cache [NC]
    RewriteCond %{HTTP_REFERER} !msn. [NC]
    RewriteCond %{HTTP_REFERER} !yahoo. [NC]
    RewriteRule ^.*$ - [F]    

    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^.*$ index.php [NC,L] 
    ```

但是有些网站不使用它，实际上甚至不使用重写并且仍然很慢，所以这似乎也不是问题。

有任何想法吗？

**编辑：**

问题不是站点，因为即使是只有“Hello World”的简单 HTML 也有问题。

它在以前版本的 Apache 上运行良好，但自从升级到 2.4（当很多事情发生变化时，尤其是配置发生变化时）它变得很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:04:11.090

我在使用 Apache 和 RewriteRule 加载 CSS、JS 和其他静态文件时遇到了一些问题。如果您也遇到此问题，请查看 Chrome 的开发者工具 > 网络。就我而言，.php 渲染速度很快，但我不得不等待 10 秒才能加载 .css 文件！如果这对你来说是一样的，我的修复可能也对你有用。既然你说第一次加载很慢，后来的加载很快（在浏览器中缓存 css 文件）我猜它会:)

而不是让 RewriteRule 引擎处理所有静态文件并实际重写静态文件名......：

```
RewriteRule ^.*\.(jpg|gif|png|js|css|pdf|eot|woff|ttf|svg|ico)$ /$0 [L] 
```

...最好不要打扰 RewriteRule 引擎处理静态文件名：

```
RewriteCond $0 !\.(jpg|gif|png|js|css|pdf|eot|woff|ttf|svg|ico|html)$ 
```

在您的情况下，您的静态文件没有专门的 RewriteRule，但也没有 RewriteCond，所以我猜所有请求都只是传递给 RewriteRule 引擎。

顺便说一句，我不知道为什么通过 RewriteRule 和 Apache (2.4) 加载静态文件会出现这样的问题。任何人？

希望这对您也有帮助！

# jquery - 如何创建自定义水平滑块

> ID：11495395
> 
> 赞同：0
> 
> 时间：2012-07-15T20:33:11.327
> 
> 标签：jquery, html

我研究过的所有东西都希望我使用他们的样式或布局（看起来如此）。我只想拿我现有的 div，然后滑过里面已经存在的 div。我知道我错过了一些简单的东西，或者想得太难了。

这是我要滑过的代码。

```
<div class="slide_wrapper">
     <div class="slide">
         <h3>Heading1</h3>
         <div>"Lorem ipsum </div>
     </div>
     <div class="slide">
         <h3>Heading2</h3>
         <div>"Lorem ipsum 2</div>
     </div>
</div> 
```

我想滑过`.slide`里面的所有类，如果需要的话`.slide_wrapper`，甚至可以有一个微妙的按钮或[箭头](https://i.imgur.com/ViMSo.gif) ![在此处输入图像描述](../Images/17fc8cfa29f3755af84431e20fc7d1a3.png)来手动完成。正确方向的一点将非常有帮助和赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:15:03.433

我创建了一个简单的演示。希望这将是您画廊的良好开端！

## *[jsBin 演示](http://jsbin.com/osaqaj/edit#javascript,html,live)*

有了这个 jQuery：

```
var galW = $('.slider_wrapper').outerWidth(true);
var slidesN = $('.slider_wrapper').find('.slide').length;
var c = 0;   // =  current slide

function animate(){ 
  var curr = c===-1 ? c=slidesN-1 : c=c%slidesN;
  $('.slider').stop().animate({left: -(galW*c) },1000);  
}

$('.btn').click(function(){
  var theclass = $(this).hasClass('btn_right') ? c++ : c--;
  animate();
}); 
```

* * *

**编辑**

## *[带自动幻灯片的演示](http://jsbin.com/osaqaj/2/edit)*

如果您希望它**自动滑动**，只需将其粘贴在`animate()`函数和`$('.btn').click(function(){`：

```
var autoTime;
function autoSlide(){
  autoTime = setInterval(function(){
    $('.btn_right').click();
  },3000);
}
autoSlide();

$('.slide_gallery').on('mouseenter mouseleave',function( e ){
  var inOut = e.type==='mouseenter' ? clearInterval(autoTime) : autoSlide(); 
}); 
```

* * *

HTML：

```
<div class="slide_gallery">

  <div class="btn btn_left"></div>
  <div class="btn btn_right"></div>

  <div class="slider_wrapper">
    <div class="slider">
       <div class="slide">
           <h3>Heading1</h3>
           <div>"Lorem ipsum </div>
       </div>
       <div class="slide">
           <h3>Heading2</h3>
           <div>"Lorem ipsum 2</div>
       </div>
       <div class="slide">
           <h3>Heading3</h3>
           <div>"Lorem ipsum 3</div>
       </div>
       <div class="slide">
           <h3>Heading4</h3>
           <div>"Lorem ipsum 4</div>
       </div>
    </div>
  </div>

</div> 
```

CSS：

```
 .slide_gallery{
    position:relative;
    margin:15px auto;
    width:500px;
    padding:0 50px; /* padding for arrows*/
    background:#fff;
  }
  .slider_wrapper{
    position:relative;
    width:500px;
    height:300px;
    background:#eee;
    overflow:hidden;
  }
  .slider{
    position:absolute;
    width:99999px;
    left:0;
  }
  .slide{
    position:relative;
    float:left;
    width:500px;
    height:300px;
  }
  .btn{
    cursor:pointer;
    position:absolute;
    width:50px;
    height:100%;
    background:url(http://i.stack.imgur.com/tuKVp.gif) no-repeat center center;
  }
  .btn_left{
    left:0px;
    /* remove this after you replace image*/
        -moz-transform: scaleX(-1);
        -o-transform: scaleX(-1);
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
        filter: FlipH;
        -ms-filter: "FlipH";
  }
  .btn_right{
    right:0px;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:39:08.437

[使用jquery.cycle](http://jquery.malsup.com/cycle/)周围最好的幻灯片插件。

# jekyll - Jekyll 中的类别模板

> ID：11495398
> 
> 赞同：6
> 
> 时间：2012-07-15T20:33:31.670
> 
> 标签：jekyll

在我的网站上，将有两种类型的帖子：`blog`和`portfolio`。我希望每个类别都有一个页面，只显示该类别的帖子。

在 Jekyll 中实现这一目标的最佳方法是什么？我做了一些功课，但我很难找到一个好的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T15:59:11.563

如果你把帖子放到文件夹`posts`and`portfolio`中，jekyll 自然会定义两个分类

```
root
 |-- posts
 |     `-- _posts
 |          |-- 2012-01-12-post.textile
 |          `-- 2012-03-22-post.textile
 `-- portfolio
      `-- _posts
            |-- 2011-04-05-post.textile
            `-- 2012-02-02-post.textile 
```

然后你可以有一个生成器来创建类别页面，然后你可以从这篇文章中获得灵感：[http](http://www.justkez.com/generating-a-tag-cloud-in-jekyll/) ://www.justkez.com/generating-a-tag-cloud-in-jekyll/除了不是生成标签页，您生成类别页。

**编辑**

还有这个插件`generate_category.rb`可以帮助你：[http ://recursive-design.com/projects/jekyll-plugins/](http://recursive-design.com/projects/jekyll-plugins/)

# php - 显示 PHP 链接

> ID：11495405
> 
> 赞同：-2
> 
> 时间：2012-07-15T20:34:21.060
> 
> 标签：php

在以下代码函数中：

```
return $_SERVER['PHP_SELF']; 
```

输出是：*/mysqlTilestore/listing.php*

并在以下代码函数中：

```
return $mypage 
```

输出为：*page=5*

如何结合以上两个代码返回以下内容：

*/mysqlTilestore/listing.php/?page=5*

我尝试了以下方法，但出现语法错误：

```
return $_SERVER['PHP_SELF']?$mypage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:36:37.407

```
$path = $_SERVER['PHP_SELF'] . '?' . $mypage;
return $path; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:35:40.540

`?`需要引用为字符串：

```
return $_SERVER['PHP_SELF'] . '?' . $mypage; 
```

# r - 如何使用多列和参数“拆分”创建一个箱形图

> ID：11495406
> 
> 赞同：3
> 
> 时间：2012-07-15T20:34:21.360
> 
> 标签：r, graphics, split, dataframe, boxplot

我需要从具有**三个数字列的****data.frame**创建一个箱线图，并使用参数**split**将框分隔开。我有一个很大的data.frame，但我需要的是下面的示例：

 **```
paint<-c("blue", "black", "red", "blue", "black", "red", "blue", "black", "red")
car1<-c(100, 138, 123, 143, 112, 144, 343, 112, 334)
car2<-c(111, 238, 323, 541, 328, 363, 411, 238, 313)
car3<-c(432, 123, 322, 342, 323, 522, 334, 311, 452)
data<-data.frame(paint, car1, car2, car3)

>data
      paint  car1 car2 car3
   1  blue   100  111  432
   2  black  138  238  123
   3  red    123  323  322
   4  blue   143  541  342
   5  black  112  328  323
   6  red    144  363  522
   7  blue   343  411  334
   8  black  112  238  311
   9  red    334  313  452 
```

**当我只使用一列时，以下功能有效：**

箱线图（拆分（数据[,2]，数据[,1]））

**但是当我尝试使用*三列*创建箱线图时，该功能不起作用：**

箱线图（拆分（数据[，2：4]，数据[，1]））

感谢您的帮助，并为英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T20:48:37.927

尝试先将您的数据放入长格式，然后绘制：

```
temp = reshape(data, direction="long", varying=2:4, sep="")
boxplot(split(temp[,3], temp[,1]))
# boxplot(car ~ paint, data=temp) ### Formula notation, easier to read 
```

![在此处输入图像描述](../Images/072d36f9d0a6705e863dae5f838ec2eb.png)

或者，使用`lattice`：

```
library(lattice)
bwplot(car1 + car2 + car3 ~ paint, data=data) 
```

`boxplot`我不确定为什么该符号不适用于base R。

![在此处输入图像描述](../Images/4a850a47ebcda4e261f9c83f20ab4f01.png)

# 更新

如果我误解了您的原始问题（在阅读了 Roman 的评论之后），这里有一个选项（再次使用`lattice`），它将箱线图分别放在`car1`,`car2`和`car3`并排放置。`temp`这使用在第一个示例中创建的长格式数据：

```
bwplot(car ~ paint | paste0("Car ", time), data = temp) 
```

![在此处输入图像描述](../Images/198990dd559d3f5203e16d97e8500423.png)**

# java - Sqllite数据库不会复制到真机的sd卡 中

> ID：11495413
> 
> 赞同：0
> 
> 时间：2012-07-15T20:35:18.983
> 
> 标签：java, android

我通过这种方法将我的数据库（sqllite）复制到 sd 卡：

```
String currentDBPath =
                "\\data\\com.powergroupbd.tripmileage\\databases\\tripmileagedatabase";
                 String backupDBPath = "tripmileagedatabase";
                File currentDB = new File(data, currentDBpath);
                File backupDB = new File(sd, BackupDbPath);

                if (currentDB.exists()) {
                    FileChannel src = new FileInputStream(currentDB)
                            .getChannel();
                    FileChannel dst = new FileOutputStream(backupDB)
                            .getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close(); 
```

这在模拟器中运行良好，但是当我将它安装在真实设备中时，这不会显示 sd 卡中的任何文件。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:57:52.463

数据库的路径从 /data/data/ 开始。请注意，路径分隔符是正斜杠，而不是反斜杠。因此，将您的代码更改为：

```
String currentDBPath =
            "/data/data/com.powergroupbd.tripmileage/databases/tripmileagedatabase";
             String backupDBPath = "tripmileagedatabase";
            File currentDB = new File(data, currentDBpath);
            File backupDB = new File(sd, BackupDbPath);

            if (currentDB.exists()) {
                FileChannel src = new FileInputStream(currentDB)
                        .getChannel();
                FileChannel dst = new FileOutputStream(backupDB)
                        .getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close(); 
```

# clojure - 使用惰性序列而不破坏堆栈：是否可以将惰性与尾递归结合起来？

> ID：11495420
> 
> 赞同：9
> 
> 时间：2012-07-15T20:35:45.307
> 
> 标签：clojure, stack-overflow, lazy-evaluation

为了学习[Clojure](http://clojure.org/)，我正在解决[4clojure](http://www.4clojure.com/)的问题。我目前正在对问题[164](http://www.4clojure.com/problem/164)咬牙切齿，您将在其中列举（部分）[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)接受的语言。一个有趣的条件是语言可能是无限的，所以解决方案必须是惰性的（在这种情况下，解决方案的测试用例`(take 2000 ...`.

我有一个可以在我的机器上运行的解决方案，但是当我在网站上提交它时，它会炸毁堆栈（如果我将要确定的可接受字符串的数量从 2000 增加到 20000，我也会在本地炸毁堆栈，所以这是一个我的解决方案的缺陷）。

我的解决方案[1] 是：

```
(fn [dfa]
  (let [start-state (dfa :start)
        accept-states (dfa :accepts)
        transitions (dfa :transitions)]
    (letfn [
      (accept-state? [state] (contains? accept-states state))

      (follow-transitions-from [state prefix]
          (lazy-seq (mapcat 
            (fn [pair] (enumerate-language (val pair) (str prefix (key pair))))
            (transitions state))))

      (enumerate-language [state prefix]
        (if (accept-state? state) 
          (cons prefix (follow-transitions-from state prefix))
          (follow-transitions-from state prefix)))
      ]   
      (enumerate-language start-state ""))
  )
) 
```

它接受 DFA

```
'{:states #{q0 q1 q2 q3}
              :alphabet #{a b c}
              :start q0
              :accepts #{q1 q2 q3}
              :transitions {q0 {a q1}
                            q1 {b q2}
                            q2 {c q3}}} 
```

并返回 DFA 接受的语言 ( `#{a ab abc}`)。但是，在确定 DFA 的前 2000 个接受的字符串时

```
(take 2000 (f '{:states #{q0 q1} 
                           :alphabet #{0 1}
                           :start q0
                           :accepts #{q0}
                           :transitions {q0 {0 q0, 1 q1} 
                                         q1 {0 q1, 1 q0}}})) 
```

它炸毁了堆栈。显然我应该将解决方案重组为尾递归，但我不明白这是怎么可能的。特别是，我看不到如何将惰性与尾递归结合起来（通过`recur`or 或`trampoline`）。该`lazy-seq`函数创建了一个闭包，因此使用`recur`inside`lazy-seq`将使用闭包作为递归点。当使用`lazy-seq`inside`recur`时，`lazy-seq`总是会评估，因为`recur`发出一个需要评估其参数的函数调用。

使用时`trampoline`，我看不到如何迭代地构造一个可以懒惰地评估其元素的列表。正如我使用它并看到它使用的那样，`trampoline`它只能在它最终完成时返回一个值（即其中一个蹦床函数不返回函数）。

## 其他解决方案被认为超出范围

我认为这个 4Clojure 问题的另一种解决方案超出了这个问题的范围。我目前正在使用 解决方案`iterate`，其中每个步骤仅计算“下一步”（从当前状态转换之后）接受的字符串，因此它根本不会递归。然后，您只需跟踪当前状态和使您进入该状态的字符串（它们是下一个状态的前缀）。在这种情况下，困难在于检测何时接受*有限*语言的 DFA 将不再返回任何结果。我还没有为`take-while`周围环境设计一个适当的停止标准`iterate`，但我很确定我会设法让这个解决方案发挥作用。对于这个问题，我对基本问题感兴趣：可以将惰性和尾递归结合起来还是根本不可能？

[1] 请注意，该站点存在一些限制，例如无法使用`def`and `defn`，这可能解释了我的代码的一些特殊性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T01:14:23.507

使用时`lazy-seq`只需进行常规函数调用而不是使用`recur`. `recur`惰性避免了否则使用的递归堆栈消耗。

例如，简化版本`repeat`：

```
（定义重复 [x]
  （惰性序列（cons x（重复 x））））

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T18:16:44.953

问题是您正在构建的东西看起来像：

```
(mapcat f (mapcat f (mapcat f ...))) 
```

原则上这很好，但是这个列表最右边的元素很长时间没有被实现，当你真正意识到它们时，它们有一大堆惰性序列需要强制按顺序排列得到一个元素。

如果你不介意剧透，你可以在[https://gist.github.com/3124087](https://gist.github.com/3124087)看到我的解决方案。我做的两件事与你不同，两者都很重要：

1.  遍历树的广度优先。如果这是一个不接受的状态，你不想在从 q0 到 q0 的循环中“卡住”。由于转换传递给您的顺序，对于您失败的特定测试用例来说，这看起来不是问题，但是在此之后的下一个测试用例确实具有该特征。
2.  用来`doall`强制我正在懒惰地构建一个序列。因为我知道很多`concat`s会构建一个非常大的堆栈，而且我也知道序列永远不会是无限的，所以我在构建它时强制整个事情，以防止延迟序列的分层导致堆栈溢出。

编辑：一般来说，你不能将惰性序列与尾递归结合起来。您可以拥有一个同时使用它们的函数，当在添加单个元素之前有更多工作要做时可能会重复出现，并且在有新元素时会延迟重复出现，但大多数时候它们的目标相反并试图组合他们不小心只会导致痛苦，并没有特别的改善。

# ftp - 使用 filezilla 的 FTP

> ID：11495421
> 
> 赞同：1
> 
> 时间：2012-07-15T20:35:56.657
> 
> 标签：ftp, port, ftp-client, filezilla

自从我需要 ftp 一些我似乎忘记了如何去做的事情以来，它已经很久了。

(服务器地址)我有我的 ftp 地址 (密码)我有我的密码 (端口)我假设端口是 20 或 21

我正在使用 Filezilla，上面是它要求的唯一信息。我已经将它连接到本地主机没有任何问题，除了它没有显示存储在我的 htdocs 文件夹中的文件（我看看我是否需要直接到该文件夹​​，但找不到任何说它是必要的) 的端口号是 14147。当我尝试连接到远程主机时，我不断收到错误消息，说端口可能不正确或“已连接，等待身份验证”，我不能将端口选项留空，我尝试了 20， 21, 25, 80, 8080, 14147 和几个随机的在感到沮丧之后。我已经找到我的提供商并试图找到端口，但似乎找不到他们用于除电子邮件之外的任何其他端口，即 25，这就是我收到已连接，等待身份验证消息的时候。

简而言之，有人可以将我引导到 FTP 的白痴指南，我知道它应该很简单，但我真的很挣扎。我看过一些教程，但由于这是一项非常直接的工作，似乎没有人能解决我的问题。

请帮忙（我假设我试图 ftp 没有什么不同？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:13:27.860

理解起来有点混乱，但如果您需要帮助设置 ftp 服务器，请参考以下方法：

1.  下载并安装 Filezilla 服务器（假设已完成）

2.  当它询问什么服务器将其保留为默认值时（主机为 127.0.0.1 和端口 14147）

3.  成立一个小组。为此，请转到编辑-> 组并点击添加并命名。
4.  现在转到共享文件夹并选择您希望该组访问的文件夹以及他们需要的权限。点击确定。
5.  现在在您的组中设置一个用户。转到编辑-> 用户
6.  单击添加，命名帐户（这将是您的用户名）并设置组
7.  确保选中标记为启用帐户的框并且您已设置密码。
8.  点击确定以保存更改。现在尝试使用 FTP 客户端通过 localhost 进行连接。如果它有效，那么继续。如果它不起作用，请确保防火墙没有阻止服务器
9.  为端口 21 设置端口转发（每个路由器都不同，所以尝试谷歌搜索如何做到这一点）。
10.  使用您的外部 IP 地址进行测试。不知道吗？试试 [whatismyip.com](http://whatismyip.com)

这应该是您为新的 FTP 服务器需要做的所有事情

# c# - Windows Phone 7 - 相机闪光灯应用程序无法运行

> ID：11495426
> 
> 赞同：1
> 
> 时间：2012-07-15T20:36:29.283
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在尝试按照此处的说明进行操作时 - [http://msdn.microsoft.com/en-us/library/hh202949.aspx](http://msdn.microsoft.com/en-us/library/hh202949.aspx)我编写了一个非常简单的 WP7 应用程序来打开相机闪光灯。一切似乎都正常，除了....闪光灯没有激活。

我的手机是三星 SGH-I917（最新的操作系统更新），我使用的是 WP7 SDK 7.1，我检查过我的相机闪光灯确实可以工作。我还检查以确保 WMAppManifest.xml 文件中包含以下内容。

```
<Capability Name="ID_CAP_ISV_CAMERA" /> 
```

您在下面我的代码中看到的`MessageBox`使用表明相机对象已正确初始化，支持闪光灯模式并`FlashMode.On`已设置。然而......实际上没有闪光灯会打开。我错过了什么？

这是代码：

```
public partial class MainPage : PhoneApplicationPage
{
    PhotoCamera cam;        

    public MainPage()
    {
        InitializeComponent();  
    }

    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        cam = new PhotoCamera(CameraType.Primary);
        cam.Initialized += new EventHandler<CameraOperationCompletedEventArgs>(cam_Initialized);
        cam.CaptureCompleted += new EventHandler<CameraOperationCompletedEventArgs>(cam_CaptureCompleted);
        cam.CaptureImageAvailable += new EventHandler<ContentReadyEventArgs>(cam_CaptureImageAvailable);
        cam.CaptureThumbnailAvailable += new EventHandler<ContentReadyEventArgs>(cam_CaptureThumbnailAvailable);
        viewfinderBrush.SetSource(cam);
    }

    void cam_CaptureThumbnailAvailable(object sender, ContentReadyEventArgs e)
    {
        return;
    }

    void cam_CaptureImageAvailable(object sender, ContentReadyEventArgs e)
    {
        return;
    }

    void cam_CaptureCompleted(object sender, CameraOperationCompletedEventArgs e)
    {
        return;
    }

    protected override void OnNavigatingFrom(System.Windows.Navigation.NavigatingCancelEventArgs e)
    {
        if (cam != null)
        {
            cam.Dispose();
            cam.Initialized -= cam_Initialized;
            cam.CaptureCompleted -= cam_CaptureCompleted;
            cam.CaptureImageAvailable -= cam_CaptureImageAvailable;
            cam.CaptureThumbnailAvailable -= cam_CaptureThumbnailAvailable;
        }
    }

    void cam_Initialized(object sender, CameraOperationCompletedEventArgs e)
    {
        this.Dispatcher.BeginInvoke(delegate()
        {
            MessageBox.Show("Cam Init, FlashMode.On Supported?: " + cam.IsFlashModeSupported(FlashMode.On).ToString());
        });

        return;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        if(cam.FlashMode == FlashMode.On)
            cam.FlashMode = FlashMode.Off;
        else
            cam.FlashMode = FlashMode.On;

        this.Dispatcher.BeginInvoke(delegate()
        {
            MessageBox.Show(cam.FlashMode.ToString());
        });
    }
} 
```

这是 XAML：

```
<phone:PhoneApplicationPage 
x:Class="PhoneApp1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="True">
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="FlashLite" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>
    <Canvas x:Name="viewfinderCanvas" HorizontalAlignment="Center" >
        <Canvas.Background>
            <VideoBrush x:Name="viewfinderBrush" />
        </Canvas.Background>
    </Canvas>
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Button Width="200" Height="100" Content="Flash" Click="Button_Click" />
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:11:24.453

```
cam.FlashMode = FlashMode.On; 
```

仅表示拍摄图像时将启动闪光灯。

这是通过做

```
cam.CaptureImage(); 
```

编辑：如果你只想触发闪光灯，你可以打电话`cam.Focus();`

# android - dirname：我运行 android 项目时找不到命令错误 - NDK

> ID：11495434
> 
> 赞同：2
> 
> 时间：2012-07-15T20:37:29.740
> 
> 标签：android, bash, compiler-errors, android-ndk, cygwin

我正在eclipse中构建一个android应用程序。我需要调用一个用 C/C++ 编写的函数。我设置了包括 NDK、cygwin 等在内的所有内容（询问您是否需要更多详细信息），但是当我尝试运行项目时，出现此错误

> **********构建项目 C_Google_FaceDetect 的默认配置***** *******
> 
>  **C:\cygwin\bin\bash.exe C:\Android_NDK\ndk-build
> 
> cygwin警告：
> 
> 检测到 MS-DOS 样式路径：
> 
> C:\Documents and Settings\John Smith\eclipse_workspace\C_Google_FaceDetect
> 
> 首选的 POSIX 等效项是：
> 
> /cygdrive/c/Documents and Settings/John Smith/eclipse_workspace/C_Google_FaceDetect
> 
> CYGWIN 环境变量选项“nodosfilewarning”关闭此警告。
> 
> 有关 POSIX 路径的更多详细信息，请参阅用户指南：
> 
> [http://cygwin.com/cygwin-ug-net/using.html#using-pathnames](http://cygwin.com/cygwin-ug-net/using.html#using-pathnames)
> 
> C:\Android_NDK\ndk-build：第 40 行：目录名：找不到命令
> 
> C:\Android_NDK\ndk-build: 第 78 行: uname: command not found 错误:
> 
> 未知的主机操作系统：
> 
> ****** *****构建完成***** *********

 ****项目名称是 C_Google_FaceDetect

如果我使用 cygwin 来获取 PATH，我会得到

> 约翰·史密斯@E-USK3631BE /cygdrive/c
> 
> $ 回声 $PATH
> 
> /cygdrive/c/Program Files/PC 连接解决方​​案
> 
> /cygdrive/c/WINDOWS/system32
> 
> /cygdrive/c/WINDOWS
> 
> /cygdrive/c/WINDOWS/System32/Wbem
> 
> /cygdrive/c/WINDOWS/system32/nls
> 
> /cygdrive/c/WINDOWS/system32/nls/ENGLISH
> 
> /cygdrive/c/Program Files/IVI Foundation/IVI/bin
> 
> /cygdrive/c/Program Files/IVI Foundation/VISA/WinNT/Bin
> 
> /cygdrive/c/Program Files/IVI Foundation/VISA/WinNT/Bin
> 
> /cygdrive/c/Program Files/MATLAB/R2012a/runtime/win32
> 
> /cygdrive/c/Program Files/MATLAB/R2012a/bin
> 
> /cygdrive/c/Program Files/MATLAB/R2010a/runtime/win32
> 
> /cygdrive/c/Program Files/MATLAB/R2010a/bin
> 
> /cygdrive/c/程序文件/emgucv 2.1.0.793/bin
> 
> /cygdrive/c/Documents and Settings/mchi7jb2/My Documents/GLUT/lib
> 
> /cygdrive/c/OGLSDK/lib
> 
> /cygdrive/c/Program Files/Microsoft Platform SDK for Windows Server 2003 R2/Lib
> 
> /cygdrive/c/Program Files/MATLAB/MATLAB Compiler Runtime/v713/runtime/win32
> 
> /cygdrive/c/Python27/python.exe
> 
> /cygdrive/c/程序文件/QuickTime/QTSystem
> 
> /cygdrive/c/Android_NDK
> 
> /cygdrive/c/Android_NDK/build
> 
> /cygdrive/c/Program Files/Java/jdk1.7.0_04/bin
> 
> /cygdrive/c/Android_NDK
> 
> /cygdrive/c/Android_NDK/ndk-build/usr/bin
> 
> /cygdrive/c/Android_SDK/工具
> 
> /cygdrive/c/Android_SDK/平台工具
> 
> /cygdrive/c/Android_NDK

我的 Android.mk 文件如下

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := C_Google_FaceDetect
LOCAL_SRC_FILES := yuv_decoder.c

include $(BUILD_SHARED_LIBRARY) 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:52:32.730

当我使用这个 C:\cygwin\bin\bash.exe --login -i C:\Android_NDK\ndk-build 而不是这个 C:\cygwin\bin\bash.exe C:\Android_NDK\ndk 时，问题就解决了-建造

在 Eclipse 构建命令中

我在那里找到了答案，[从批处理文件运行 Cygwin 命令](https://stackoverflow.com/questions/7881553/running-cygwin-commands-from-batch-file)

也许问题只是因为我现在有更大的问题我不知道****

# performance - Web 服务的 IIS7 性能问题

> ID：11495439
> 
> 赞同：0
> 
> 时间：2012-07-15T20:37:45.193
> 
> 标签：performance, web-services, iis-7

我们在重负载下遇到请求处理缓慢的问题。在查看这些突发期间当前正在运行的请求时，我可以看到对我们的 Web 服务代码的许多请求。

请求的数量不是很大，但它们似乎停留在预处理状态。下面是一个例子：

由于需要支持一些遗留代码，我们在经典模式下运行 IIS7 应用程序池。

继续处理其他请求，但这些卡住的请求似乎逐渐填满了可用线程，导致其他页面的处理速度变慢。

有没有人知道这些请求在哪里卡住了。

数据库似乎没有资源问题，并且请求状态显示表明这都是预处理。

我们已经对本地机器上涉及的代码进行了负载测试，并且无法复制该问题。

另一个可能的因素是我们正在使用 MVC 和 UrlRouting。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:05:29.063

不幸的是，有些问题只发生在生产服务器上，因为负载测试永远无法模拟真实世界的用户。

您可以尝试在性能不佳时捕获挂起转储，然后对其进行分析（您自己或通过[http://support.microsoft.com](http://support.microsoft.com)打开支持案例以与 Microsoft 支持合作）。

通常你可能遇到了著名的线程池瓶颈，[http://support.microsoft.com/kb/821268](http://support.microsoft.com/kb/821268)。转储分析可以很容易地找出罪魁祸首并帮助找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:38:57.720

为什么不将它们移动到它们自己的 AppPool 中以将它们与经典 ASP 应用程序分开 - 然后您将有更多选项可以调整。

# iphone - 如何在 Objective-c 中将数字输入掩码应用于 UITextField

> ID：11495442
> 
> 赞同：1
> 
> 时间：2012-07-15T20:38:32.947
> 
> 标签：iphone, objective-c, ios, xcode

我有一个 TextField，我只希望最终用户输入货币值，例如 20000。我希望该字段自动显示带有显示掩码的输入数字，以便当用户输入击键时它会更改字段内容动态的。例如，输入的 2000050 将显示为 20,000.50。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:42:28.820

您使用

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string` 
```

委托方法。在方法中查看当前字符串是什么（textField.text），应用替换字符串后会是什么，然后创建您自己的格式化字符串并使用 textField.text = "20,000.50" 等设置它。自处理后返回 NO文本。

# iphone - Facebook 深度链接在 iPhone 上不起作用

> ID：11495450
> 
> 赞同：2
> 
> 时间：2012-07-15T20:39:13.603
> 
> 标签：iphone, ios, facebook, single-sign-on, deep-linking

我的应用程序中的 Facebook 集成存在问题。我正在努力为用户提供将他的最新更新发布到 Facebook 的选项。

我可以成功地将消息发布到 Facebook，但我在“通过 MY_APP”部分遇到问题 - 无法从我的 iPhone 上点击 MY_APP。应用程序的名称显示正确，消息按我的预期发布，但是在 iPhone 上查看 Facebook 的帖子时，用户无法单击我的应用程序的名称以将它们重定向到 AppStore或应用程序本身，取决于他们是否安装了它。这通常适用于我的 iPhone 上的其他 iOS 应用程序。

从计算机查看 Facebook 个人资料时，我的应用程序名称是可点击的，它会将我带到应用程序的社区页面（我从 MY_APP->Edit app->Settings->Advanced->App Page 设置它，尽管它是必需的为了解决iPhone上的问题，但没有解决任何问题）。

在 Settings->Basic 屏幕上，我正确配置了所有内容（我认为）：

集成类型选择 Native iOS App，选项如下：

iOS Bundle ID：我的 bundle ID（勾选，正确） iPhone AppStore ID：ID（勾选，正确） iPad AppStore ID：ID（勾选，正确） iOS SSO：启用 iOS Native Deep Linking：启用 URL Scheme Suffix : 我留空了

我还在 Settings->Advanced for Authentication 选项卡下编辑了设置：我将 App Type 从 Web 更改为 Native/Desktop 并禁用了沙盒模式。

你们知道是什么阻止我在从 iPhone 上查看帖子时点击应用程序名称吗？

谢谢

# c++ - 限制指针和内联

> ID：11495453
> 
> 赞同：6
> 
> 时间：2012-07-15T20:40:06.770
> 
> 标签：c++, visual-studio-2010, optimization, restrict-qualifier

我曾尝试使用限制限定指针，但遇到了问题。下面的程序只是一个简单的程序，仅用于提出问题。

calc_function 使用三个指针，这是受限制的，因此它们“应”不相互别名。在 Visual Studio 中编译此代码时，该函数将被内联，因此 Visual Studio 2010 无缘无故忽略限定符。如果我禁用内联，代码的执行速度会快六倍（从 2200 毫秒到 360 毫秒）。但我不想在整个项目或整个文件中禁用内联（因为那样会在所有 getter 和 setter 中调用开销，这将是可怕的）。

（可能唯一的解决方案是仅禁用此函数的内联吗？）

我试图在函数中创建临时限制限定指针，在顶部和内部循环中试图告诉编译器我保证没有别名，但编译器不会相信我，它不会工作。我也尝试过调整编译器设置，但我发现唯一可行的是禁用内联。

我会很感激一些帮助来解决这个优化问题。

要运行程序（在 realease 模式下）不要忘记使用参数 0 1000 2000。为什么使用用户输入/程序参数是为了确保编译器无法知道指针之间是否存在别名a、b 和 c。

```
#include <cstdlib>
#include <cstdio>
#include <ctime>

// Data-table where a,b,c will point into, so the compiler cant know if they alias.
const size_t listSize = 10000;
int data[listSize];

//void calc_function(int * a, int * b, int * c){
void calc_function(int *__restrict a, int *__restrict b, int *__restrict c){
    for(size_t y=0; y<1000*1000; ++y){  // <- Extra loop to be able to messure the time.
        for(size_t i=0; i<1000; ++i){
            *a += *b;
            *c += *a;
        }
    }
}
int main(int argc, char *argv[]){ // argv SHALL be "0 1000 2000" (with no quotes)
    // init
    for(size_t i=0; i<listSize; ++i)
        data[i] = i;

    // get a, b and c from argv(0,1000,2000)
    int *a,*b,*c;
    sscanf(argv[1],"%d",&a);
    sscanf(argv[2],"%d",&b);
    sscanf(argv[3],"%d",&c);
    a = data + int(a);  // a, b and c will (after the specified argv) be,
    b = data + int(b);  // a = &data[0], b = &data[1000], c = &data[2000],
    c = data + int(c);  // So they will not alias, and the compiler cant know.

    // calculate and take time
    time_t start = clock();
        funcResticted(a,b,c);
    time_t end = clock();
    time_t t = (end-start);
    printf("funcResticted       %u (microSec)\n", t);

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:43:20.853

如果你用 声明一个函数`__declspec(noinline)`，它将强制它不被内联：

[http://msdn.microsoft.com/en-us/library/kxybs02x%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/kxybs02x%28v=vs.80%29.aspx)

您可以使用它在每个函数的基础上手动禁用内联。

* * *

至于`restrict`，编译器只有在需要时才可以自由使用。因此，当试图“欺骗”编译器进行此类优化时，摆弄相同代码的不同版本在某种程度上是不可避免的。

# objective-c - 选择器需要什么？

> ID：11495454
> 
> 赞同：0
> 
> 时间：2012-07-15T20:40:07.053
> 
> 标签：objective-c, selector, objective-c-runtime

> **可能的重复：**
> [Objective-C 中的选择器只是向对象发送消息的另一种方式吗？](https://stackoverflow.com/questions/3543137/are-selectors-in-objective-c-just-another-way-to-send-a-message-to-an-object)

我已经阅读了 Apple 关于选择器的文档，但我仍然不明白为什么需要它们。

据我了解，选择器相当于函数指针。那正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:03:01.433

选择器用于获取对象的方法实现。

例如，几乎每个对象都实现了该`description`方法，即使它从其超类继承了实现。函数指针只能指向一个特定的实现`description`（例如，它只能指向 NSString 的版本，或 NSNumber 的版本，但不能同时指向两者）。您不能将一个类的`description`实现的函数指针用于每个类，但是您*可以*使用相同的`description`选择器，并且无论您使用什么对象作为目标，都将始终使用正确的方法实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:43:51.087

选择器不是函数指针。

选择器是唯一地址方法标识符（消息名称）。信使函数 (objc_msgSend_*()) 需要它们快速：当查找方法名称时，信使不需要每次都进行相当昂贵的字符串比较，因为选择器在内存中具有唯一的地址，所以一个简单的指针比较就足够了。

# winforms - 如何发送消息/激活 SysTray 应用程序？

> ID：11495455
> 
> 赞同：0
> 
> 时间：2012-07-15T20:40:31.923
> 
> 标签：winforms, systray

我们正在尝试设置一个可以从其他地方激活的 SysTray 应用程序。*更具体地说，激活将来自我们无法修改但允许我们通过其路径（加上参数/参数）激活我们自己的应用程序*的第三方应用程序。

当它被激活时，我们想要放置一个 BalloonText，不涉及任何表单。

因此我们有两个问题需要解决：

1.  使我们的 SysTray 应用程序成为单个实例（因为生成多个实例并不好）。

2.  允许这个其他应用程序使用参数激活我们的应用程序

有很多帮助可以帮助学习者创建简单的 SysTray 应用程序（事实上，我们已经自己完成了它，作为未连接项目解决方案的一部分）。但是，我们以前从未尝试过使其成为单一实例。

有很多帮助可以帮助学习者创建单实例 Winforms 应用程序（我们再次将其作为其他项目的一部分），但总是使用传统表单（不是 SysTray）的简单应用程序。我们使用 VisualBasic WindowsFormsApplicationBase 方法。

似乎无法将这两种方法组合成一个解决方案。

**更新：**
汉斯回答如下（尤其是他的评论）：

> 这已经通过 NotifyIcon 处理，将其放在表单上。和“制作单实例应用程序”复选框。和 StartupNextInstance 事件。你需要停止假设这有什么特别之处

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:43:58.870

至于您关于检查其他实例的第一个问题，这似乎有效。我使用[CodeProject 示例](http://www.codeproject.com/Articles/75822/Create-A-System-Tray-Application-In-VB-Net)作为基线。`GetProcessesByName`在您的 Sub Main 例程中，您可以使用类的Method检查其他实例`Process`。像这样的东西：

```
Public Sub Main()
    'Turn visual styles back on
    Application.EnableVisualStyles()

    'Run the application using AppContext
    Dim p() As Process
    p = Process.GetProcessesByName("TrayApp") 'Your application name here
    If UBound(p) >= 0 Then
        End
    End If
    Application.Run(New AppContext)

End Sub 
```

对于第二个问题，如果您的 SysTray 应用程序已经在运行，您可能想尝试一下 .Net Interprocess Communication 上的这篇[文章。](http://www.codeproject.com/Articles/17606/NET-Interprocess-Communication)否则，在创建时解析您的命令行参数`Sub Main`。

从上面的文章：

> XDMessaging 库为同框跨 AppDomain 通信提供了一个易于使用、零配置的解决方案。它提供了一个简单的 API，用于跨应用程序边界发送和接收目标字符串消息。该库允许使用用户定义的伪“通道”，通过这些通道可以发送和接收消息。任何应用程序都可以向任何通道发送消息，但它必须在通道中注册为侦听器才能接收。通过这种方式，开发人员可以以编程方式快速设计出他们的应用程序如何最好地相互通信并协调工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:01:48.907

当您真正使用表单时，一切都变得微不足道。将您的应用程序与设计器放在一起很简单，让您的应用程序终止很简单，避免托盘中出现鬼图标很简单，创建上下文菜单很简单，如果需要，可以很容易地添加弹出窗口。

唯一不简单的事情是让表单不显示。将此代码粘贴到表单的类中：

```
Protected Overrides Sub SetVisibleCore(ByVal value As Boolean)
    If Not Me.IsHandleCreated Then
        Me.CreateHandle()
        value = False
    End If
    MyBase.SetVisibleCore(value)
End Sub 
```

上下文菜单中的“退出”命令现在很简单：

```
Private Sub ExitToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExitToolStripMenuItem.Click
    Me.Close()
End Sub 
```

# iphone - Objective-C JSON 解析错误

> ID：11495458
> 
> 赞同：0
> 
> 时间：2012-07-15T20:41:02.523
> 
> 标签：iphone, ios, json, parsing

我正在尝试解析这个 JSON 数组：

[http://www.ifanatic.hu/api/get_recent_posts/?dev=1](http://www.ifanatic.hu/api/get_recent_posts/?dev=1)

但我得到这个错误：

```
 2012-07-15 22:31:59.038 JSONTest[610:f803] -[__NSCFDictionary indexOfObject:]: unrecognized selector sent to instance 0x6a92850
2012-07-15 22:31:59.040 JSONTest[610:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary indexOfObject:]: unrecognized selector sent to instance 0x6a92850'
*** First throw call stack:
(0x13d7052 0x1568d0a 0x13d8ced 0x133df00 0x133dce2 0x236b 0xa23a59 0xa21e94 0xa22eb7 0xa21e4f 0xa21fd5 0x966f6a 0x3989bbd 0x3a565ea 0x3980298 0x3a5616b 0x3980137 0x13ab97f 0x130eb73 0x130e454 0x130ddb4 0x130dccb 0x12c0879 0x12c093e 0x2ea9b 0x1cb8 0x1c15)
terminate called throwing an exception 
```

这是我的来源：

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

NSArray* latestPosts = [responseString JSONValue];

NSDictionary* post = [latestPosts objectAtIndex:[latestPosts indexOfObject:0]];

NSString* title = [post objectForKey:@"title"];

label.text = [NSString stringWithFormat:@"Title: %@", title]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T20:48:20.560

在解析 JSON 时，该 JSON 对象的根元素被转换为 NSDictionary。并且 NSDictionary 不响应

```
indexOfObject: 
```

信息。您需要做的是使用：

```
NSDictionary *post = [[latestPosts objectForKey:@"posts"] objectAtIndex:0]; 
```

等等

# excel - 将悬停标签添加到散点图，使其数据范围在 Excel 2007 中动态更新

> ID：11495461
> 
> 赞同：1
> 
> 时间：2012-07-15T20:41:32.753
> 
> 标签：excel, charts, excel-2007, add-in, vba

嗨，我想为 Excel 中散点图上的绘图点添加标签，但是每当我的宏更新它时，我的图表数据集范围就会发生变化......所以我的第一个问题是：有没有办法设置添加的数据范围-例如VBA中“图表悬停标签”下面的那个？

录制宏什么也没做（我的手指开始交叉）。

这是我知道的其他图表加载项的列表，据我所知，其中只有一个允许您在将鼠标悬停在绘图点上时仅显示标签。我还没有看到一个允许您显示单击该点时的数据范围。

这是允许您仅在悬停时显示的加载项： [http ://www.tushar-mehta.com/excel/software/chart_hover_label/index.html](http://www.tushar-mehta.com/excel/software/chart_hover_label/index.html)

这些是我知道的另外两个：http: [//www.appspro.com/Utilities/ChartLabeler.htm](http://www.appspro.com/Utilities/ChartLabeler.htm) http://spreadsheetpage.com/index.php/file/j_walk_chart_tools_add_in/

有谁知道 Excel 的任何其他图表插件（最好是免费的）提供更多选项？并且可以通过 VBA 更新？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:47:22.450

我不知道加载项，但可以通过图表交互在 VBA 中完成很多工作。只需插入图表表并将以下代码输入到 VBA 中的该表中。

这是我在我的工作图中的一个例子。当我单击一个系列时，它将创建一个文本框并在单元格中填充文本，该单元格在下面的代码中更新。它仅用于系列名称，但您可以为其添加更多功能。

```
Private Sub Chart_MouseDown(ByVal Button As Long, ByVal Shift As Long, ByVal x As Long, ByVal y As Long)
Dim ElementID As Long, Arg1 As Long, Arg2 As Long
Dim chart_data As Variant, chart_label As Variant
Dim last_bar As Long, chrt As Chart
Dim ser As Series, Txt As String

On Error Resume Next 'Sorry for this line of code, I haven't had the chance to look into why it was needed.

Me.GetChartElement x, y, ElementID, Arg1, Arg2

Set chrt = ActiveChart
Set ser = ActiveChart.SeriesCollection(1)
chart_data = ser.Values
chart_label = ser.XValues

Set txtbox = ActiveSheet.Shapes("hover") 'I suspect in the error statement is needed for this.

If ElementID = xlSeries Then

    txtbox.Delete

        Sheet1.Range("Ch_Series").Value = Arg1
        Txt = Sheet1.Range("CH_Text").Value

        Set txtbox = ActiveSheet.Shapes.AddTextbox _
                                        (msoTextOrientationHorizontal, x - 150, y - 150, 150, 40)
        txtbox.Name = "hover"
        txtbox.Fill.Solid
        txtbox.Fill.ForeColor.SchemeColor = 9
        txtbox.Line.DashStyle = msoLineSolid
        chrt.Shapes("hover").TextFrame.Characters.Text = Txt
        With chrt.Shapes("hover").TextFrame.Characters.Font
            .Name = "Arial"
            .Size = 12
            .ColorIndex = 16
        End With

    ser.Points(Arg2).Interior.ColorIndex = 44
    txtbox.Left = x - 150
    txtbox.Top = y - 150

Else
   txtbox.Delete
    ser.Interior.ColorIndex = 16
End If

End Sub 
```

但是您也可以对悬停功能执行以下操作。

```
Private Sub Chart_MouseMove(ByVal Button As Long, ByVal Shift As Long, ByVal x As Long, ByVal y As Long) 
```

请记住，代码需要插入图表工作表而不是模块中。

至于适合图表的数据范围，您是否尝试过动态命名范围，然后将图表设置为引用命名范围？

您可以设置 MouseMove 功能以显示您想要的内容，然后在 MouseDown 上它可以导航到选定的系列数据范围。

希望这可以帮助。

# jquery - 使用 Jquery 的目标类名 + 特定数据 ID

> ID：11495462
> 
> 赞同：1
> 
> 时间：2012-07-15T20:41:38.087
> 
> 标签：jquery, guid

我想以 JQuery 为目标并使用动态 GUID (ruID) 更改 TEXT：

```
<span class="btn btn-mini emailIntive" data-id="a9c83938-0c2e-4433-a0f0-9aafc1aae541"> Invite </span> 
```

我正在使用的 JQuery 代码是：

```
$('.emailIntive' + data('id')=== ruID).text("SENT"); 
```

我收到“未定义数据”错误。

如何使用 JQuery 定位类名 + 特定数据 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T20:45:57.090

```
$('.something[data-id='+theUUID+']'); 
```

这将评估为：

```
$('.something[data-id=a9c83938-0c2e-4433-a0f0-9aafc1aae541]'); 
```

它将选择一个具有类`something`和`data-id`值的元素`a9c83938-0c2e-4433-a0f0-9aafc1aae541`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T20:43:48.713

## *[jsFiddle 演示](http://jsfiddle.net/roXon/vchFR/)*

```
var ruID = $(".emailIntive").data('id');  //a9c83938-0c2e-4433-a0f0-9aafc1aae541
$('.emailIntive').data('id', ruID).text("SENT"); 
```

或者还有：

```
var ruID = $(".emailIntive").data('id');  //a9c83938-0c2e-4433-a0f0-9aafc1aae541
$('.emailIntive[data-id='+ruID+']').text("SENT"); 
```

# sql-server - 将文本字符串转换为十六进制表示或二进制表示

> ID：11495463
> 
> 赞同：9
> 
> 时间：2012-07-15T20:42:15.877
> 
> 标签：sql-server

大家好，我似乎被难住的简单问题。我有一些似乎有效的东西，但我得到了一个空白的结果。我在数据库的列中有一个文本字符串。为了这个问题，假设文本字符串是“jhonSmith”，我想得到这个字符串的十六进制表示。使用 sql server 简单的 select 语句。我无权在数据库上创建或调用过程。这是我能想到的最好的方法，但它返回空白。如果我关闭转换功能，那么它可以工作。

```
select distinct convert (varbinary, dim_employee.full_name) as Employee
from dim_employee
where 1=1 
```

如果我使用 varchar 而不是 varbinary，我会取回数据，这会让我相信我没有正确执行它。有人可以指出我正确的方向。请！！！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-15T20:46:03.910

当我运行以下

```
select distinct convert (varbinary, 'Hogan') as Employee 
```

我得到以下

```
Employee
--------------------------------------------------------------
0x486F67616E 
```

也许您显示结果的方式有问题？

# android - 在 android 应用程序上重新声明 LAUNCHER 活动 - 添加了 Splash

> ID：11495464
> 
> 赞同：0
> 
> 时间：2012-07-15T20:42:24.630
> 
> 标签：android, manifest, launcher, splash-screen

我开发了一个应用程序并决定添加一个启动页面。我创建了类并将活动添加到清单中。我还将 Intent 标记移至新声明并更改名称，但在 logcat 上出现“找不到启动器”错误。

我的启动 java 文件称为 com.rarecreativegroup.dcm1config.splasher，我的清单是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rarecreativegroup.dcm1config"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET" />    
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
       <activity android:name=".splasher" 
            android:label="@string/title_activity_main"
            android:screenOrientation="landscape" 
            >
            <intent-filter>

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            </activity>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main"
            android:screenOrientation="landscape" 
             >

        </activity>
        <activity android:name=".mySettings" 
            android:label="@string/title_activity_main"
            android:screenOrientation="landscape" 
            >
            </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:44:51.990

添加

`<action android:name="android.intent.action.MAIN" />`

到您的 splasher-activity 的意图过滤器

# c# - C# 中带有 DirectX SampleGrabber 的图形可视化工具

> ID：11495470
> 
> 赞同：1
> 
> 时间：2012-07-15T20:43:04.420
> 
> 标签：c#, directx, directshow

感谢您的阅读，我有以下代码来读取 m4a 音频文件，我对下一步是什么有点迷茫。我知道我需要实现 SampleGrabber 来获取样本。理想情况下，我希望能够获得峰值和当前音频频率，就像单击屏幕顶部的箭头时简单的 iTunes 可视化器所做的那样。不过现在，我主要担心将 sampleGrabber 添加到我的图表中，并调用 SampleCB。这是我的图形构造：

```
public class Player
{
    private IGraphBuilder graphbuilder;
    private IMediaControl imc;
    private IMediaEventEx imex;
    private IMediaPosition imp;
    private IBasicAudio iba;
    private ISampleGrabber isg;

    public Player(string file)
    {
        graphbuilder = (IGraphBuilder)new FilterGraph();
        graphbuilder.RenderFile(location, null);

        imc = (IMediaControl)graphbuilder;
        imex = (IMediaEventEx)graphbuilder;
        imp = (IMediaPosition)graphbuilder;
        iba = (IBasicAudio)graphbuilder;
    }
} 
```

我在类中还有其他用于播放、音量等的方法。并且扩展了所有属性以使它们具有动画效果，WPF 风格，呵呵。现在我只是不知道在 GraphBuilder 中的何处添加 SampleGrabber，以及如何使其转到 SampleCB 方法。另外，我是否必须让整个类从 ISampleGrabberCB 继承？我已经尝试了这些不同的组合，但无法使任何工作......

# ios - 使用 OpenCV 提高已知对象检测性能

> ID：11495474
> 
> 赞同：11
> 
> 时间：2012-07-15T20:43:14.160
> 
> 标签：ios, opencv, computer-vision, object-detection

我正在做一个项目，我必须在移动环境中“实时”检测场景中的已知图片（这意味着我正在使用智能手机相机捕获帧并将帧大小调整为 150x225）。图片本身可能相当复杂。现在，我平均在 1.2 秒内处理每一帧（使用 OpenCV）。我正在寻找改善此处理时间和全局准确性的方法。我目前的实施工作如下：

1.  捕获帧
2.  将其转换为灰度
3.  使用 ORB 检测关键点并提取描述符
4.  匹配描述符（2NN）（对象->场景）并用比率测试过滤它们
5.  匹配描述符（2NN）（场景->对象）并用比率测试过滤它们
6.  使用 4\. 和 5\. 去除非对称匹配。
7.  计算匹配置信度（匹配关键点占总关键点的百分比）

我的方法可能不是正确的，但结果还可以，尽管还有很大的改进空间。我已经注意到 SURF 提取太慢了，我无法使用单应性（它可能与 ORB 有关）。欢迎所有建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T07:46:29.573

性能在手机上始终是一个问题:)

您可以做几件事。[OpenCV：C++ 和 C 性能比较](https://stackoverflow.com/questions/11376368/opencv-c-and-c-performance-comparison/11376867#11376867)解释了处理时间改进的通用方法。

以及您项目的一些细节：

*   如果您捕获彩色图像并将它们转换为灰度图像，那就是对资源的极大浪费。原生相机格式是 YUV。它被转换为成本高昂的 RGB，然后再转换为成本高昂的灰色。所有这一切，而 YUV (Y) 中的第一个通道是灰度......所以，捕获 YUV，并通过复制图像数据的第一部分来提取第一个通道（Android 上的 YUV 是平面的，这意味着第一个 w* h 个像素属于 Y 通道）
*   ORB 的创建速度很快。它是。但就在几周前 FREAK 被添加到 OpenCV。这是一个新的描述符，作者声称它比 ORB/SIFT/SURF/etc 更准确、更快。试试看。你可以在 opencv >= 2.4.2 中找到它（这是现在的）

**编辑**

Brad Larsen 的问题很有启发性——如果匹配器保持 900 毫秒的处理时间，那就是个问题！查看 Andrey Kamaev 的这篇文章[OpenCV ORB 特征检测器如何工作？](https://stackoverflow.com/questions/7232651/how-does-opencv-orb-feature-detector-work/7233103#7233103)他解释了描述符和匹配器之间可能的组合。试试基于 FLANN 的 uchar 匹配器。

而且，我想你会得到很多检测 - 数百或数千 - 如果匹配它们需要这么多。尝试限制检测，或仅选择前 n 个最佳值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:05:26.170

您应该尝试 FAST 来检测场景中的对象，它比 SURF 更快，并且您可以找到使用 FAST 金字塔版本的文章。要提高移动设备的性能，您可以优化循环、使用定点算法等。祝你好运。

# actionscript-3 - 如何从影片剪辑的子项中引用对象？

> ID：11495483
> 
> 赞同：0
> 
> 时间：2012-07-15T20:44:35.830
> 
> 标签：actionscript-3

我觉得这个问题很简单，但是我对as3还不太熟悉。

所以我在舞台上添加了一个菜单：

```
var umenu:upgradeMenu = new upgradeMenu(dayNum,damageModifier,speedModifier);
umenu.x=stage.stageWidth/2;
umenu.y=stage.stageHeight/2;
umenu.visible=false;
addChild(umenu) 
```

现在，我在此之后添加了一个过渡动画，当时间合适时，我希望能够引用“umenu”以将其可见性更改为 true。代码将在过渡动画的帧上调用，但我不知道如何引用 umenu？

```
MovieClip(root).umenu.visible=true; 
```

^^ 我知道这行不通，因为从技术上讲它不是电影剪辑，所以我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:55:25.100

弄清楚了！我没有考虑给它起一个名字，然后从根目录作为孩子访问它。

```
MovieClip(root).getChildByName("upgradem") 
```

“升级”是我给 umenu 起的名字。我仍然想听听是否有更好的解决方案

# sql - 使用带参数的 ODBC 执行存储过程

> ID：11495488
> 
> 赞同：0
> 
> 时间：2012-07-15T20:45:05.060
> 
> 标签：sql, visual-studio, stored-procedures, odbc

我正在尝试使用具有参数的 ODBC 执行存储过程，但每次执行时都会得到以下信息：

> 错误 [42000] [Microsoft][ODBC SQL Server Driver][SQL Server] 过程或函数“aaPRO_CloseCall”需要参数“@FaultID”，但未提供该参数。

我的代码是：

```
Dim I As Integer = Convert.ToInt32(LogIDTextBox.Text)
Dim ConnString As String = "Dsn=Test"
Dim Conn As Odbc.OdbcConnection = New Odbc.OdbcConnection(ConnString)
Dim cmd As New Odbc.OdbcCommand("aaPRO_closecall", Conn)
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.AddWithValue("@FaultID", I)
Conn.Open()
cmd.ExecuteNonQuery()
Conn.Close() 
```

我是 Visual Studio 的新手，我看不出我做错了什么。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:46:23.140

这就是我最后所做的

```
 'Create the ODBC connection
        Dim Conn As Odbc.OdbcConnection = New Odbc.OdbcConnection(ConnString)
        Conn.Open()

        'Add the call to the stored procedure including the connection
        Dim cmd As New Odbc.OdbcCommand("{ CALL aaPRO_closecall(?) }", Conn)
        cmd.CommandType = CommandType.StoredProcedure

        'add the parameter to the stored procedure
        Dim MyParm As OdbcParameter = cmd.Parameters.Add("@FaultID", OdbcType.Int)
        MyParm.Value = FL

        'Execute the procedure
        cmd.ExecuteNonQuery()

        'clean up after
        Conn.Close()
        Conn.Dispose() 
```

谢谢你的帮助。

# c# - 如何从第二个函数访问在一个函数中声明的变量？

> ID：11495489
> 
> 赞同：-4
> 
> 时间：2012-07-15T20:45:06.293
> 
> 标签：c#, private-members, downloadfileasync

我是 C# 编程的新手，我正在寻找一个快速的解决方案。我在表单上有 2 个按钮，一个正在调用 DownloadFileAsync()，第二个应该取消此操作。第一个按钮的代码：

```
private void button1_Click(object sender, EventArgs e)
{
...
WebClient webClient = new WebClient();
webClient.DownloadFileAsync(new Uri(textBox1.Text), destination);
} 
```

第二个按钮的代码：

```
private void button2_Click(object sender, EventArgs e)
{
webClient.CancelAsync(); // yes, sure, WebClient is not known here.
} 
```

我正在寻找如何快速解决这个问题的想法（使用第一个函数中的 webClient，在第二个块中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:46:31.490

那不是私有变量。`webClient`超出范围。您必须使其成为该类的成员变量。

```
class SomeClass {
    WebClient webClient = new WebClient();

    private void button1_Click(object sender, EventArgs e)
    {
        ...
        webClient.DownloadFileAsync(new Uri(textBox1.Text), destination);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:48:56.323

您必须`webClient`在您的类中全局定义（变量范围）。`webClient`on`button2_Click`超出范围。

表格 MSDN：[范围](http://msdn.microsoft.com/en-us/library/aa691132%28v=vs.71%29.aspx)

> 在 local-variable-declaration 中声明的局部变量的范围是发生声明的块。

和

> 由 class-member-declaration 声明的成员的范围是声明所在的 class-body。

以便

```
class YourClass 
{
     // a member declared by a class-member-declaration
     WebClient webClient = new WebClient();

    private void button1_Click(object sender, EventArgs e)
    {
        //a local variable 
        WebClient otherWebClient = new WebClient();
        webClient.DownloadFileAsync(new Uri(textBox1.Text), destination);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        // here is out of otherWebClient scope
        // but scope of webClient not ended
        webClient.CancelAsync();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:48:42.637

webclient 在 button1_Click 方法中声明，并且在该方法的范围内可用

因此您不能在 button2_Click 方法中使用它

相反，编译器将使您的构建失败

要解决这个问题，请将 webClient 声明移到方法之外并使其在类级别可用

# php - 使用php远程连接mysql

> ID：11495500
> 
> 赞同：3
> 
> 时间：2012-07-15T20:47:47.290
> 
> 标签：php, mysql

我正在尝试使用 php 脚本登录到远程 mysql 数据库。

数据库对远程连接开放。我可以从我的家用 PC 使用 mysql admininstrator prog 或 openoffice (ODBC) 进行连接。

我尝试在某个网络主机上的两个不同帐户上运行脚本，但与数据库不同，但没有成功。

此外，脚本不会从这两个帐户之一连接到另一个帐户。

似乎托管脚本的服务器上的 php 设置将不允许连接到远程数据库，即使数据库是由同一个虚拟主机托管的。脚本只是超时。

有任何想法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:10:49.240

试试[SQLyog](http://www.webyog.com/en/)。

有了它，您可以使用[HTTP Tunneling](http://www.webyog.com/faq/21_19_en.html)，您基本上将一个 PHP 文件复制到您的文件夹根目录并使用数据库凭据。

![在此处输入图像描述](../Images/59080a7fce638ab50a30499af8878797.png)

您也可以尝试使用 Putty [http://oldsite.precedence.co.uk/nc/putty.html做同样的事情](http://oldsite.precedence.co.uk/nc/putty.html)

我确信有与 SQLyog 具有相同隧道功能的免费软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:05:06.257

> 数据库已为远程连接打开

那么你就有了很大的安全问题。数据库不应该*直接*暴露在互联网上。事实上，ISR 是最近影响 MySQL mariaDB 和 Percona 的漏洞，很容易被利用。

您可以在家连接表明没有主机白名单，而只是您无法连接的机器存在路由问题或防火墙配置为阻止此类访问。这不太可能与 PHP 配置有关。

禁用对目标数据库的远程访问后，解决问题的正确方法是使用 VPN 或 SSL 端口隧道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T21:04:53.463

我不确定，但是有一种叫做[SQL 安全模式](http://www.php.net/manual/en/ini.core.php#ini.sql.safe-mode)的东西。然后 'localhost:3306' 始终用作要[连接](http://php.net/manual/en/function.mysql-connect.php)的服务器。

[@Daniel 是对的：您应该联系您的主机，或检查是否在您的phpinfo](http://php.net/manual/en/function.mysql-connect.php)中设置了此配置值。

# powershell - PowerShell 不使用 Export-Csv cmdlet 导出长度

> ID：11495501
> 
> 赞同：0
> 
> 时间：2012-07-15T20:48:18.050
> 
> 标签：powershell

因此，当我在目录上运行 Get-ChildItem 时，输出将具有“长度”，但是，当我通过管道传输到 Export-Csv 时，输出具有很多附加信息，但由于某种原因不再包含“长度”。

有没有办法确保“长度”包含管道到 Export-Csv 提供的所有信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:54:26.053

Export-Csv 检查管道中的第一个对象并将其用作列定义的基础。在您的情况下，第一个对象是一个没有长度属性的文件夹。因此你得到的结果。

尝试过滤以仅导出文件 ( `where { ! $_.PsIsContainer }`)。

您还可以在导出之前使用 Select-Object - 它会添加选定的属性，并将 $null 分配给那些没有该属性的对象。最终结果或多或少是相同的（而且它更防弹并且允许更“挑剔”的 csv）。

# python - 迭代两个不同长度的生成器，一个环绕

> ID：11495504
> 
> 赞同：2
> 
> 时间：2012-07-15T20:48:31.707
> 
> 标签：python, list, dictionary, generator

无论我尝试什么，我似乎都无法用我的大脑来实现这一点，但必须有一种方法可以使用生成器函数进行映射。

例如，如果我想将列表 [1,2,3,4,5,6,7,8,9,10] 中的每个成员与列表 [1,2,3] 中的相应成员相乘，那么之后[1,2,3] 列表用完它将重新启动：

```
 [1  2  3  4  5  6  7  8  9  10]

x  [1  2  3  1  2  3  1  2  3  1 ]
------------------------------------
   [1  4  9  4  10 18 7  16 27 10] 
```

如果您不知道 [1,2,3,4,5,6,7,8,9,10] 列表的长度，您将如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T22:40:37.850

[itertools 模块](http://docs.python.org/library/itertools.html)是你的朋友。一种方法是使用`itertools.cycle`循环第二个列表：

```
>>> import itertools
>>> a = range(1, 11)
>>> a
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> b = itertools.cycle([1,2,3])
>>> b
<itertools.cycle object at 0x1004be830>
>>> ans = [i*j for i,j in zip(a,b)]
>>> ans
[1, 4, 9, 4, 10, 18, 7, 16, 27, 10] 
```

它利用了在用完时`zip`停止绘制术语的事实。`a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:14:19.497

如果您具有随机访问权限，则遍历第一个列表并通过第一个索引以其他列表长度为模来访问其他元素。

如果您只能迭代，则迭代第一个并在第二个迭代器中使用一个迭代器，每次它到达第二个列表结束时都会重新启动。

如果确实必须使用生成器完成，则需要两个：外部生成第一个列表元素与第二个生成器的值的乘积，第二个生成器生成第二个列表值并在它们的末尾重新开始。

# iphone - 跨越多个 UITableViewCells 的背景图像（分组）

> ID：11495507
> 
> 赞同：3
> 
> 时间：2012-07-15T20:48:43.963
> 
> 标签：iphone, ios, uitableview, background

我正在使用带有一些自定义单元格的分组表格视图，并将图像作为每个单元格的背景颜色。

`cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"custombackground.png"]];`

到目前为止，一切都很好，但我的图像明显高于常规单元格的高度，因此，只有图像的顶部用作背景，每个单元格都是相同的。基本上，它看起来很草率，每个单元格都在重复这种模式。

有没有人这样做，所以该部分的第二行显示图像的下一部分而不是重复它，所以它看起来像一个连续的图像？（例如，第 0 行使用图像的前 44 个点，第 1 行使用第 45-88 个点等）

是否有可能，和/或任何想法如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:14:24.460

是的，你可以这样做。这个问题的关键是使用UIImage的CGImage方法，然后使用Quartz "CGImageRef CGImageCreateWithImageInRect();" 创建子图像。使用 CGImageRef 你可以创建新的 UIImages。

所以让我们说它只是问题的高度。第一个单元格使用自上而下的“h”像素的部分图像。然后下一个从“h”开始，然后再去 h 个像素，依此类推。

请注意，Quartz 使用“翻转”坐标系，因此您必须准确地调整从何处获取子图像。当我这样做时，我似乎总是需要一些调整，所以希望最后花一点时间让它正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:08:34.827

您可以通过 indexPath.row 变量计算每一行的部分大小。之后，使用您计算的 CGRect 值裁剪图像。

```
CGFloat top = (indexPath.row == 0) ? 0 : (indexPath.row * 44) + 1; 
```

`CGRectMake(0, top, 320, 44);`是你裁剪图像的矩形吗

您可以使用[此](https://stackoverflow.com/questions/2635371/how-to-crop-the-uiimage)答案来裁剪 UIImage。

操作编辑：谢谢！添加我从建议中得出的结论：

```
 UIImage *image = [UIImage imageNamed:@"custombackground.png"];
    CGFloat y = indexPath.row * 44;

    for (y; y+44 > image.size.height; y -= image.size.height);
    //Sends our y origin back to the top of the image in case
    //the image would have ended in the middle of a cell, so 
    //it can be used for any length of table.

    CGRect cropRect = CGRectMake(0, y, 320, 44);
    CGImageRef imageRef = CGImageCreateWithImageInRect([image CGImage], cropRect);

    cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageWithCGImage:imageRef]]; 
```

# objective-c - 顺序核心动画的设计模式

> ID：11495508
> 
> 赞同：0
> 
> 时间：2012-07-15T20:48:45.060
> 
> 标签：objective-c, cocoa, core-animation

我正在开发一个 OS X 应用程序，其中我有一个 NSView 来跟踪连接状态。如果连接正常，则显示一个绿点，如果连接断开，则显示一个红点。

我想使用 Core Animation 对此进行动画处理，但是，在连接状态快速变化的情况下我遇到了麻烦。因为动画发生在另一个线程中，并且不会阻塞，所以当我获得视图的当前位置时，如果它仍然在动画，我会得到我想要的东西。

例如，在我的 NSView 中，我有一个`@property`名为 connectionState 的我正在覆盖它来设置状态并为绿点和红点设置动画。

```
- (void)setConnectionState:(BOOL)online
{
   NSPoint newPosition;
   if (online) { 
      newPosition = NSMakePoint(self.iconView.frame.origin.x, 
                                self.iconView.frame.origin.y + 32);
   } else { 
      newPosition = NSMakePoint(self.iconView.frame.origin.x, 
                                self.iconView.frame.origin.y - 32);
   }

   [NSAnimationContext beginGrouping];
   [[NSAnimationContext currentContext] setDuration:0.5];
   [self.iconView.animator setFrameOrigin:newPosition];
   [NSAnimationContext endGrouping];

   _connectionState = online;
} 
```

我相信您可以看到，如果连接状态快速变化，`self.iconView.frame`则不正确并`newPosition`最终错位。

我想看到的是视图动画本身，等到它完成，然后再次动画自己。

我想也许解决方案应该是创建一个队列，然后在一个线程中继续将连接状态信息添加到队列中，然后在后台有另一个线程，它有一个`while(true)`语句，它从该队列中拉出，动画，等待完成，并无限地执行此操作。然而，这似乎是一个非常笨拙的解决方案。

解决问题的正确设计模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:07:57.390

似乎正确的解决方案是知道您想要设置动画的实际值，而不是使用基于视图当前状态的值（可以是任何值）

```
- (void)setConnectionState:(BOOL)online
{
   const NSPoint kViewOnPosition = {...} ;
   const NSPoint kViewOffPosition = {...} ;

   NSPoint newPosition = online ? kOnPosition : kOffPosition ;

   [NSAnimationContext beginGrouping];
   [[NSAnimationContext currentContext] setDuration:0.5];
   [self.iconView.animator setFrameOrigin:newPosition];
   [NSAnimationContext endGrouping];

   _connectionState = online;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T20:54:40.983

不幸的是，仅在 Mac OS X 10.7 中可用，有一种`setCompletionHandler:`方法`NSAnimationContext`可用于检测动画何时完成（因此，在开始时在某处设置标志，并在处理程序中取消设置该标志以标记动画完成） . 这样你就可以知道在*另一个*动画应该开始的时候是否已经有一些动画正在进行中。

（我希望有更好的方法，但这就是我发生的事情。）

# apache - 如何处理 CGI Web 应用程序中的锁？

> ID：11495515
> 
> 赞同：1
> 
> 时间：2012-07-15T20:49:52.423
> 
> 标签：apache, shell, cgi

我正在尝试处理长时间运行的 CGI Web 应用程序因过早关闭选项卡而被终止的情况。然后一个信号`trap`将捕获该事件并清理[锁](https://github.com/kaihendry/Greptweet/blob/master/create.cgi#L80)。

我写了一个简化的 CGI 来演示这个问题。

```
#!/bin/bash
exec 2>&1
cat <<END
Cache-Control: no-cache
Content-Type: text/html

END

trap "rm -f foo$$.log; exit" 1 2 3 6 9 14 15

while true
do
        date | tee -a foo$$.log
        echo '<br>'
        sleep 5
done 
```

如果我对 CGI 进行 strace，我可以看到它在关闭选项卡时收到 SIGKILL，但`trap`在此实例中并未执行 IIUC 以清理日志文件。

这就像 Apache 中的 CGI 处理程序正在发出一个`kill -9`无法捕获的。各位好心人可以建议任何解决方法或更好的方法吗？

# mysql - 大量查询需要 Magento sql 查询帮助

> ID：11495516
> 
> 赞同：3
> 
> 时间：2012-07-15T20:50:12.997
> 
> 标签：mysql, sql, magento, select

我正在尝试为 Magento 修改以下 MySQL 查询。它现在所做的是为报告返回简单和可配置产品的产品信息。不幸的是，简单产品没有父可配置产品所拥有的所有信息。

我想做的是使用该表`catalog_product_super_link`来查找每个产品的父产品 ID，以便对于所有产品，我都可以获得父可配置产品的数据。超级链接表在一列中包含所有产品 ID 的值，在另一列中包含相应的父项。对于可配置产品，产品 ID 和父 ID 相同。

说得通？

我得到的查询是：

```
SELECT IFNULL(category_name.value, category_default_name.value) AS `primarycategory`
     , `product`.`sku`
     , IFNULL(product_name.value, product_default_name.value) AS `product_name`
     , `attribute_option_value`.`value` AS `story`
     , (
         select GROUP_CONCAT(category_name.value)
         from catalog_category_entity as category
            , catalog_category_entity_varchar as category_name
            , catalog_category_product as category_product
         WHERE category_name.entity_id = category.entity_id
           AND category_name.store_id = 0
           AND category_name.entity_type_id = 3
           AND category_name.attribute_id = 33
           AND category_product.product_id = order_item.product_id
           AND category_product.category_id = category.entity_id
           AND category_name.value<>'Default Category'
       ) AS `category`
     , round(sum(order_item.qty_ordered)) AS `unitssoldnum`
     , ROUND(sum(order_item.price-order_item.discount_amount-order_item.tax_amount)
           , 2
       ) AS `unitssoldcur`
     , ROUND((
               SUM(order_item.price-order_item.discount_amount-order_item.tax_amount)
               - (IFNULL(product_cost.value, product_default_cost.value) * SUM(order_item.qty_ordered))
             )
           , 2
       ) AS `grossmargincur`
     , ROUND((
               (
                 SUM(order_item.price-order_item.discount_amount-order_item.tax_amount)
                 - (IFNULL(product_cost.value, product_default_cost.value) * SUM(order_item.qty_ordered))
               )
               / (SUM(order_item.price-order_item.discount_amount-order_item.tax_amount))
             )
             * 100
           , 2
       ) AS `grossmarginpercent`
     , (
         SELECT round(SUM(qty))
         FROM cataloginventory_stock_item AS stock
            , catalog_product_super_link AS product_link
         WHERE product_link.product_id = stock.product_id
           AND product_link.parent_id=order_item.product_id
       ) AS `sohatstore`
     , (
         SELECT round(SUM(qty)/SUM(order_item.qty_ordered))
         FROM cataloginventory_stock_item AS stock
            , catalog_product_super_link AS product_link
         WHERE product_link.product_id = stock.product_id
           AND product_link.parent_id=order_item.product_id
       ) AS `storecover`
     , (
         SELECT round(SUM(order_item.qty_ordered)
                      /(SUM(qty)+SUM(order_item.qty_ordered))
                      *100
                    , 2
                )
         FROM cataloginventory_stock_item AS stock
            , catalog_product_super_link AS product_link
         WHERE product_link.product_id = stock.product_id
           AND product_link.parent_id=order_item.product_id
       ) AS `sellthrupercent`
     , ROUND(SUM(order_item.price),2) AS `originalretail`
     , ROUND(SUM(IFNULL(product_cost.value, product_default_cost.value))
           , 2
       ) AS `costextax`
     , (
         SELECT round(SUM(qty_ordered))
         FROM sales_flat_order_item AS order_total
         WHERE order_total.product_id = order_item.product_id
       ) AS `totalsoldtilldate`
     , (
         SELECT ROUND((
                        SELECT round(SUM(qty_ordered))
                        FROM sales_flat_order_item AS order_total
                        WHERE order_total.product_id = order_item.product_id
                      )
                      /(
                        (
                          SELECT round(SUM(qty_ordered))
                          FROM sales_flat_order_item AS order_total
                          WHERE order_total.product_id = order_item.product_id
                        )
                        +(
                          SELECT round(SUM(qty))
                          FROM cataloginventory_stock_item AS stock
                             , catalog_product_super_link AS product_link
                          WHERE product_link.product_id = stock.product_id
                            AND product_link.parent_id=order_item.product_id
                        )
                      )*100
                    , 2
                )
       ) AS `totalsellthru`
     , (
         SELECT ROUND((
                        (
                          sum(order_total.price-order_total.discount_amount-order_total.tax_amount)
                          - sum(order_total.base_cost * order_total.qty_ordered)
                        )
                        /sum(order_total.price-order_total.discount_amount-order_total.tax_amount)
                      )*100
                    , 2
                )
         FROM sales_flat_order_item AS order_total
         WHERE order_total.product_id = order_item.product_id
       ) AS `totalgrossmarginpercent`
FROM `sales_flat_order` AS `order`
 INNER JOIN `sales_flat_order_item` AS `order_item` ON order_item.order_id = order.entity_id
 INNER JOIN `catalog_product_entity` AS `product`
    ON product.entity_id = order_item.product_id
   AND product.entity_type_id = 4
   AND product.type_id NOT IN('grouped', 'bundle')
 LEFT JOIN `catalog_product_entity_varchar` AS `product_name`
    ON product_name.entity_id = product.entity_id
   AND product_name.store_id = order.store_id
   AND product_name.entity_type_id = 4
   AND product_name.attribute_id = 60
 LEFT JOIN `catalog_product_entity_varchar` AS `product_default_name`
    ON product_default_name.entity_id = product.entity_id
   AND product_default_name.store_id = 0
   AND product_default_name.entity_type_id = 4
   AND product_default_name.attribute_id = 60
 LEFT JOIN `catalog_product_entity_decimal` AS `product_cost`
    ON product_cost.entity_id = product.entity_id
   AND product_cost.store_id = order.store_id
   AND product_cost.entity_type_id = 4
   AND product_cost.attribute_id = 68
 LEFT JOIN `catalog_product_entity_decimal` AS `product_default_cost`
    ON product_default_cost.entity_id = product.entity_id
   AND product_default_cost.store_id = 0
   AND product_default_cost.entity_type_id = 4
   AND product_default_cost.attribute_id = 68
 LEFT JOIN `catalog_category_entity` AS `category`
    ON category.entity_id =  (select MAX(category_id) from catalog_category_product where product_id = product.entity_id)
   AND category.entity_type_id = 3
 LEFT JOIN `catalog_category_entity_varchar` AS `category_name`
    ON category_name.entity_id = category.parent_id
   AND category_name.store_id = order.store_id
   AND category_name.entity_type_id = 3
   AND category_name.attribute_id = 33
 LEFT JOIN `catalog_category_entity_varchar` AS `category_default_name`
    ON category_default_name.entity_id = category.parent_id
   AND category_default_name.store_id = 0
   AND category_default_name.entity_type_id = 3
   AND category_default_name.attribute_id = 33
 LEFT JOIN `catalog_product_entity_int` AS `story_name`
    ON story_name.entity_id = product.entity_id
   AND story_name.store_id = 1
   AND story_name.entity_type_id = 4
   AND story_name.attribute_id = 138
 LEFT JOIN `catalog_product_entity_int` AS `story_default_name`
    ON story_default_name.entity_id = product.entity_id
   AND story_default_name.store_id = 0
   AND story_default_name.entity_type_id = 4
   AND story_default_name.attribute_id = 138
 LEFT JOIN `eav_attribute_option` AS `attribute_option`
    ON attribute_option.option_id = IFNULL(story_name.value, story_default_name.value)
 LEFT JOIN `eav_attribute_option_value` AS `attribute_option_value`
    ON attribute_option_value.option_id = attribute_option.option_id
   AND attribute_option_value.store_id = 0
WHERE (order.state <> 'canceled')
  AND (DATE(order.created_at) <= DATE('2012-07-03'))
  AND (DATE(order.created_at) >= DATE('2012-07-01'))
GROUP BY `product_name`
ORDER BY `category_name`.`value` ASC
       , `category_default_name`.`value` ASC
       , `product_name`.`value` ASC
       , `product_default_name`.`value` ASC 
```

如果有人能指出我正确的方向，将不胜感激:)

这是我为可配置产品获得的输出示例：

```
"Category Name",Product,Name,Story,"Category Description","Units Sold (#)","Units Sold ($)","GM ($)","GM (%)","SOH at Store","Store Cover","Sell through %","Original Retail Price","Cost Ex Tax","Total Units Sold (#)","Total Sell Thru %","GM% Total"
Bottoms,31875,"Denim Babe Jean",DENIM,"Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$59.84,$39.25,65.59,118,59,1.67,$68.00,$10.30,81,40.70,69.38
Bottoms,34475,"Diamante Rip Boot Leg Jean",DENIM,"Bottoms,SALE,Denim,Jeans,Bootleg Jean,Pants",2,$29.92,-$7.56,-25.25,28,14,6.67,$34.00,$18.74,5,15.15,19.90
Bottoms,35853,"Embroidered Back Wide Leg Jean",DENIM,"Bottoms,SALE,Denim,Jeans,Wideleg Jean,Pants",2,$29.92,-$9.08,-30.35,11,6,15.38,$34.00,$19.50,22,66.67,23.93
Bottoms,34278,"Firecracker Bootleg Jean",DENIM,"Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$59.84,$29.92,50.00,9,5,18.18,$68.00,$14.96,39,81.25,43.99
Bottoms,28450,"Glamourzon Jean","CHIC","Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$59.84,$59.84,100.00,101,51,1.94,$68.00,$0.00,51,33.55,100.00 
```

这是我使用简单产品得到的示例。注意所有缺失的数据。这就是为什么对于我的报告，我想查找父产品 ID 并使用它的数据。

```
"Category Name",Product,Name,Story,"Category Description","Units Sold (#)","Units Sold ($)","GM ($)","GM (%)","SOH at Store","Store Cover","Sell through %","Original Retail Price","Cost Ex Tax","Total Units Sold (#)","Total Sell Thru %","GM% Total"
Bottoms,2000004614430,"Denim Babe Jean - Dark Denim - 24",DENIM,"Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$0.00,-$20.59,,,,,$0.00,$10.30,15,,
Bottoms,2000004901523,"Diamante Rip Boot Leg Jean - Black - 14",DENIM,"Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$0.00,-$37.48,,,,,$0.00,$18.74,2,,
Bottoms,2000004883881,"Firecracker Bootleg Jean - Denim Dark - 16",DENIM,"Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$0.00,-$29.92,,,,,$0.00,$14.96,9,,
Bottoms,2000004159955,"Glamourzon Jean - Dark Denim - 24","CHIC","Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$0.00,$0.00,,,,,$0.00,$0.00,11,,
Bottoms,2005010849432,"Glamourzon Night Jean - Black - 28","CHIC","Bottoms,Denim,Jeans,Bootleg Jean,Pants",2,$0.00,-$32.80,,,,,$0.00,$16.40,7,,-68.82 
```

我希望这回答了你的问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:16:37.807

我们正在做一些类似的报告。你需要做什么：

*   从简单的产品开始
*   加入可配置产品上的 catalog_product_super_link 表
*   在查询的 SELECT 部分，使用 IF => 如果简单产品的值在那里，则使用它，否则使用可配置产品的值（或相反）

**例子**

```
SELECT
    o.increment_id,    
    oi.order_id,
    o.STATUS AS order_status,
    o.created_at,                  
    ROUND(SUM(IF(oi2.qty_ordered IS NOT NULL, IF(oi2.qty_ordered > oi.qty_ordered, oi2.qty_ordered, oi.qty_ordered), oi.qty_ordered)), 0) AS cqty_ordered,
    ROUND(SUM(IF(oi2.qty_canceled IS NOT NULL, IF(oi2.qty_canceled > oi.qty_canceled, oi2.qty_canceled, oi.qty_canceled), oi.qty_canceled)), 0) AS cqty_canceled,
    ROUND(SUM(IF(oi2.qty_shipped IS NOT NULL, IF(oi2.qty_shipped > oi.qty_shipped, oi2.qty_shipped, oi.qty_shipped), oi.qty_shipped)), 0) AS cqty_shipped,
    ROUND(SUM(IF(oi2.qty_ordered IS NOT NULL, IF(oi2.qty_ordered > oi.qty_ordered, oi2.qty_ordered, oi.qty_ordered), oi.qty_ordered)) - SUM(IF(oi2.qty_canceled IS NOT NULL, IF(oi2.qty_canceled > oi.qty_canceled, oi2.qty_canceled, oi.qty_canceled), oi.qty_canceled)) - SUM(IF(oi2.qty_shipped IS NOT NULL, IF(oi2.qty_shipped > oi.qty_shipped, oi2.qty_shipped, oi.qty_shipped), oi.qty_shipped)), 0) AS cqty_missing
FROM sales_flat_order_item AS oi
INNER JOIN sales_flat_order AS o ON oi.order_id=o.entity_id
LEFT JOIN sales_flat_order_item AS oi2 ON oi.parent_item_id=oi2.item_id AND oi2.product_type='configurable'
WHERE oi.product_type='simple'
GROUP BY oi.order_id
HAVING cqty_missing=0 AND order_status NOT IN ('complete','canceled','closed'); 
```

# php - 使用 Google Charts API 的饼图不起作用

> ID：11495520
> 
> 赞同：-2
> 
> 时间：2012-07-15T20:51:16.057
> 
> 标签：php, google-visualization, opencart

我正在使用OpenCart构建一个电子商务平台，它遵循MVC结构设计。现在我正在尝试在仪表板中显示饼图，为此我正在使用[Google Charts API](http://en.wikipedia.org/wiki/Google_Chart_API)。现在，当我只运行第一个数据显示时，它不会在循环中获取数据。这是我的代码。我该如何为此设置一个循环？

```
<html>
    <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Task', 'Hours per Day'],
                    $resultViewed = $this->model_report_product->getMostViewed();
                    $stringResult ="var data= google.visualization.arrayToDataTable([ ['Product', 'Views'],";

                    foreach($resultViewed as $resultKey => $resultValue)
                    {
                        //var_dump($resultValue);
                        $stringResult = $stringResult . "['".$resultValue['name']."',".$resultValue['quantity']."],";
                        var_dump($stringResult);
                    }
                    $stringResult .= "]);";

                    $this->data['Viewed'] = $stringResult;
                ]);

                var options = {
                  title: 'My Daily Activities'
                };

                var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
                chart.draw(data, options);
            }
        </script>
    </head>
    <body>
        <div id="chart_div" style="width: 900px; height: 500px;"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:03:34.960

您是否在 PHP 代码周围使用 PHP 标签？从您的代码看来，您不是。

无论如何，这种代码应该适合你：

```
<?php
    $resultViewed = $this->model_report_product->getMostViewed();

    foreach($resultViewed as $resultValue){
        $results[] = "['".$resultValue['name']."', ".$resultValue['quantity']."]";
    }
    $stringResult = implode(",", $results);
?>
<html>
    <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);

            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Task', 'Hours per Day'],
                    <?php
                    print $stringResult;
                    ?>
                 ]);

                var options = {
                    title: 'My Daily Activities'
                };

                var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
                chart.draw(data, options);
            }
        </script>
    </head>
    <body>
        <div id="chart_div" style="width: 900px; height: 500px;"></div>
    </body>
</html> 
```

# lisp - 运行一个非常古老的 InterLisp 程序

> ID：11495523
> 
> 赞同：5
> 
> 时间：2012-07-15T20:51:47.343
> 
> 标签：lisp

我有一些存储在二进制文件中的专有数据（土木工程模型）。还有一些 InterLisp 源代码和一个核心转储文件（我猜这是 Lisp 编译成的……出于某种原因）。有人告诉我，该程序是一个用于操作模型以及导出和导入数据的 GUI。

我正在寻找有关如何从二进制格式中获取数据的建议。是否有适用于现代操作系统的 InterLisp 解释器？如果不是，将代码移植到更新的 Lisp 平台的最佳选择是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T21:37:29.267

我之前使用 QEMU 和旧的 Debian 映像在我的机器上运行了一个 Interlisp 环境（参见[屏幕截图](https://i.imgur.com/gwdB5.png)）。以下是步骤：

*   下载并在虚拟机中安装 Debian 3.0r2（或物理机，如果您有旧的备用机）。从[档案](http://cdimage.debian.org/cdimage/archive/3.0_r2/i386/)中获取磁盘映像。

*   从包含 Interlisp 环境的 PARC FTP 服务器（链接在页面上）获取[LFG软件。](http://www2.parc.com/isl/groups/nltt/medley/)FTP 服务器还有一个 Linux 模拟器`lde`，用于运行映像。

*   用于在虚拟机内`lde`运行 Interlisp 映像 ( IIRC)。`lfg.sysout`

这一切都可以通过在网络上分发的软件来实现。您仍然可以在周围找到旧的 Interlisp 手动扫描。理想情况下，我只会提供一个可用的 VM 映像，但由于它不是免费软件，我不想非正式地重新分发它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T21:08:17.570

Interlisp 要么是 Interlisp 语言（在其生命周期内已被移植到几台不同的机器上），要么是来自 Xerox 的广泛的 Interlisp-D 环境。

Interlisp-D 仿真器（是？）可在此处购买：http: [//top2bottom.net/medley.html](http://top2bottom.net/medley.html)

这是一个用 C 语言为 Linux 和 Windows 编写的 Interlisp（语言）解释器：http: [//algorithms.us/software/lispf4/index.html](http://algorithms.us/software/lispf4/index.html)

# bash - 如何从 CLI 输出分配 CLI 变量

> ID：11495526
> 
> 赞同：-4
> 
> 时间：2012-07-15T20:52:34.510
> 
> 标签：bash, variables, scripting, command-line-interface

您如何从 CLI 中任意提取输出？

在我的具体示例中（但答案应该普遍适用于整体）我正在尝试使用标准 Ubuntu 服务器操作系统（12.04）为 AWS EC2/EBS 之上的 NodeJS/MongoDB 技术堆栈编写一个通用部署/扩展脚本. 目前，我正在通过 AWS 仪表板控制台手动创建和附加 EBS 驱动器，但其他一切都应该自动发生，而无需通过 SSH 登录并执行愚蠢的 CLI（尽管最终我也想自动化创建和附加部分）。

因此，首先，我需要获取所有`lsblk -l`要挂载的 EBS 驱动器块的列表。然后我需要（在第一次条件下）设置 MDADM 和 LVM，但是它们的命令假定我知道块的名称，例如：

```
sudo mdadm --create --verbose /dev/md0 --level=10 --chunk=256 --raid-devices=4 /dev/sdb1 /dev/sdb2 /dev/sdb3 /dev/sdb4 
```

等等。这很好也很简单......如果我是一个通过 lsblk 的 CLI 输出阅读的人。但是如何动态地解析/提取和迭代它呢？不知何故我需要这样做（伪代码）：

```
$EBS_ARRAY = lsblk -l -list_the_names_of_blocks_not_mounted
sudo mdadm --create --verbose /dev/md0 --level=10 --chunk=256 --raid-devices=EBS_ARRAY.length EBS_ARRAY.join(' ')
...rest of my script here... 
```

您显然可以看到我是一个 javascript 人，不知道如何在没有 JSON 和非交互式（脚本）的情况下动态地使用 CLI。那么...您究竟如何以自动方式从 CLI 输出中任意提取信息到变量中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:21:00.913

如果您想在 bash 脚本中解析命令的输出，有几个实用程序，如`grep`, `sed`,`awk`以及[shell builtins](http://tldp.org/LDP/abs/html/string-manipulation.html)，它们有助于根据您的需要操作字符串。

另一方面，您不能真正在 bash 脚本中进行 GUI 编程。对于简单的 GUI，您可以检查`zenity`您是否在 Gnome 下。

如果您必须设计高级 GUI，您可以考虑使用类似`python`with`tkinter`或其他图形库的编程语言。

如果您必须在服务器上运行这些 CLI 命令，您可以在 python 中编写应用程序，使用服务器端的`cgi`/`json`模块和 javascript/ajax 作为主要处理语言。

顺便说一句，手册页并没有那么糟糕，并且参数语法在所有命令中都相当一致。

# java - 从没有附加变量的片段中获取数据

> ID：11495527
> 
> 赞同：0
> 
> 时间：2012-07-15T20:52:38.960
> 
> 标签：java, android, dynamic, android-fragments

```
private void generateFragments() {
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    for (int i = 0; i < numberOfWorkouts; i++) {
        ft.add(LinearLayoutID, new ExerciseFragment());
    }
    ft.commit();
} 
```

上面的代码根据从 NumberPicker 检索到的值创建动态数量的片段。这是我能找到的实现所需的动态片段创建的唯一方法，但问题是我需要稍后在我的应用程序中访问信息，如果我没有使用“new ExerciseFragment()”就可以了。

*   问题是，我怎样才能从我的练习片段中获取信息？
    *   每个包含 3 个 NumberPickers 和一个 EditText。
    *   片段的数量可以从 1 到 20 不等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:47:19.053

如果你这样做：

```
for (int i = 0; i < numberOfWorkouts; i++) {
    ft.add(LinearLayoutID, new ExerciseFragment(), "TAG"+i);
} 
```

您的每个片段在事务管理器中都有一个唯一的标签，因此您可以从这个标签中检索它们`findFragmentByTag`

[添加（）](http://developer.android.com/reference/android/app/FragmentTransaction.html#add%28int,%20android.app.Fragment%29)

[findFragmentByTag()](http://developer.android.com/reference/android/app/FragmentManager.html#findFragmentByTag%28java.lang.String%29)

# android - Android广播接收器的通知不起作用

> ID：11495528
> 
> 赞同：3
> 
> 时间：2012-07-15T20:53:05.790
> 
> 标签：android, notifications, broadcastreceiver

当我的应用程序进行每日检查时，我试图通知用户。代码运行良好，但通知永远不会出现在状态栏中。谁能明白为什么？

```
public class OnNotificationReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    WakeReminderIntentService.acquireStaticLock(context);
    Intent i = new Intent(context, NotificationService.class);
    context.startService(i);

    Bundle extra = intent.getExtras();
    int icon = extra.getInt("icon");
    notification(context, icon);

    Log.d("DailyCheck", "Checking for sales");
}
 private void notification(Context ctx, int icon) {
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) ctx.getSystemService(ns);

        CharSequence tickerText = "ticker";
        long when = System.currentTimeMillis() + 1000;

        Notification notification = new Notification(icon, tickerText, when);

        CharSequence contentTitle = "Title Here";
        CharSequence contentText = "Text here";
        Intent notificationIntent = new Intent(ctx, MainActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(ctx, 0, notificationIntent, 0);

        notification.setLatestEventInfo(ctx, contentTitle, contentText, contentIntent);
        notification.flags |= Notification.DEFAULT_SOUND;

        mNotificationManager.notify(9999, notification);
    } 
```

}

编辑：我尝试将它复制到我的主线程（通知方法）中，它工作正常。所以它必须与BroadcastReceiver有关吗？

编辑 2： 传递给它的上下文是 MainActivity.this （我的主要活动）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:32:21.293

在通知顶部尝试此行，然后将此上下文用于方法的其余部分：

```
Context context = ctx.getApplicationContext(); 
```

# ruby - 哈希数组并向其添加值

> ID：11495530
> 
> 赞同：1
> 
> 时间：2012-07-15T20:53:16.220
> 
> 标签：ruby, arrays, parsing, hash

我正在尝试解析movies.io上种子列表的注入数据（例如，[here](http://movies.io/m/1R)）。

我需要解析整个 torrent 数组并将其放入哈希数组中（它已经在注入的代码中具有这种结构），以便轻松使用它。但我似乎无法找到如何做到这一点。我可以用 gsub 删除 "e; 和 &！但是，这就是我现在所得到的。

我记得的数据是这样的：

```
 [
    {id: 18210, sha1: 13BB6A6F65EA6203ACE218E830395AE61427EDBD, name: Star Wars Episode IV A New   Hope 1977 1080p Bluray x264 anoXmous},
    {id: 3701, sha1: D3F3C5C237299B2B9F4EC84B7F46F6E9E0424574, name: Star Wars Episode IV A New Hope 1977 720p BRRiP XViD AC3 - IMAGi}
  ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:41:41.707

我们还为 torrent、netflix 等来源提供了适当的 API 端点。

例如， http: [//movies.io/m/1R/sources.json](http://movies.io/m/1R/sources.json)

我们正在开发一个带有文档的真正 API，但它还没有准备好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:44:26.600

所以发生的事情是：`data-injected`你正在抓取的属性实际上只是 JSON，但它是用 HTML 编码的。浏览器解析后，它作为普通的 JSON 在 DOM 中。

事实上，您可以通过查看Chrome JavaScript 控制台中的**Scripts**并单击**Pretty Print**来轻松了解它是如何处理的，以保持您的理智。您将看到它将属性分配给`f`，然后将其与`f ? u($.parseJSON(f)) : ...`.

由于您可能正在使用 HTML 解析器，我认为您可能在某处拥有真正的原始 JSON。在任何情况下，系统中的某些组件都需要停止替换最初提供引号的 HTML 实体，然后您可以将字符串提供给 JSON 解析器。

# haskell - “无法将预期类型 `Int' 与实际类型 `[Int] 匹配”在 Project Euler 练习中

> ID：11495531
> 
> 赞同：1
> 
> 时间：2012-07-15T20:53:32.293
> 
> 标签：haskell

我想以“我的方式”帮助我，因为如果我想知道更好/更多 Haskellic 的方法，我可以用谷歌搜索其他解决方案

现在我得到：

```
Couldn't match expected type `Int' with actual type `[Int] 
```

这是我的想法，但在某个地方它是错误的。发送累加器时如何处理（我一直在考虑是否在“基本情况”中使用它）

我的想法是我选择其中一个硬币，然后在单独的递归中添加所有其他硬币并查看它是否等于 200，如果是，那么这就是我想要添加到我的结果中，如果更低，将硬币添加到列出例如`[100,50]`，然后以相同的方式递归。如果高于 200，则返回 null/empty 或其他。`Hand`到目前为止我称之为添加的硬币

```
module Main where

coins = [100,50,20,10,5,2,1]

euler31 :: Int
euler31 = 1 + length (twoPoundCombinations)

twoPoundCombinations = recursion [] [[]]

recursion :: [Int] -> [[Int]] -> [[Int]],
recursion hand result
    | sum hand == 200 = [hand]
    | sum hand  > 200 = [[]]
    | sum hand  < 200 = result ++ map (\x -> recursion (x:hand) [[]]) coins 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T20:59:06.537

```
map (\x -> recursion (x:hand) [[]]) coins 
```

会有类型`[[[Int]]]`。`[]`这是太多的一层。

```
result ++ concat (map (\x -> recursion (x:hand) [[]]) coins) 
```

会有正确的类型。

（但是您的方法需要很长时间并且不会给出正确的结果。）

# console - 启动 xterm 时出现意外的文件结束错误

> ID：11495533
> 
> 赞同：0
> 
> 时间：2012-07-15T20:53:35.697
> 
> 标签：console, terminal

我得到了一个`unexpected end of file on line 27`这个脚本，它不是我写的，但出现在我的 /etc/profile 文件夹中，显然是为了为我的 BASH shell 控制台设置环境变量而执行的。所以每次我启动一个新的控制台时，我都会收到这个错误，这很烦人。

谁能帮我找出问题所在？有 2 个脚本...都是 c-shell 脚本 (*.csh)

## 这是第一个给我的第一个错误（libglib2.csh）：

```
#! /bin/csh
#
# Description:  This script sets the environment variables G_FILENAME_ENCODING
# and G_BROKEN_FILENAMES for the glib-2.0 library.
#
# G_FILENAME_ENCODING
#       This environment variable can be set to a comma-separated list of
#       character set names.  GLib assumes that filenames are encoded in the
#       first character set from that list rather than in UTF-8\.  The special
#       token "@locale" can be used to specify the character set for the
#       current locale.
#
# G_BROKEN_FILENAMES
#       If this environment variable is set, GLib assumes that filenames are
#       in the locale encoding rather than in UTF-8.

# If the LANG you have set contains any form of "UTF", we will guess you are
# using a UTF-8 locale.  Hopefully we're correct.
echo $LANG | grep -iq UTF
if ($status==0) then
  setenv G_FILENAME_ENCODING "@locale"
endif

# It doesn't hurt to export this since G_FILENAME_ENCODING takes priority
# over G_BROKEN_FILENAMES:
setenv G_BROKEN_FILENAMES 1 
```

* * *

## 这是第二个，也给出了一个错误（qt4.csh）：

```
#! /bin/csh
# Environment path variables for the Qt package:
if (! $?QT4DIR ) then

# It's best to use the generic directory to avoid
# compiling in a version-containing path:
if ( -d /usr/lib/qt ) then
    set path "QT4DIR /usr/lib/qt"
else
    # Find the newest Qt directory and set $QT4DIR to that:
    foreach qtd "/usr/lib/qt-*"
        if (-d $qtd ) then 
            setenv QT4DIR $qtd 
        endif
    end
endif
endif

set path = $path "$QT4DIR /bin"
if ( $?CPLUS_INCLUDE_PATH ) then
export CPLUS_INCLUDE_PATH $QT4DIR/include:$CPLUS_INCLUDE_PATH
else
export CPLUS_INCLUDE_PATH $QT4DIR/include
endif
exit 
```

* * *

这些脚本似乎有与之关联的相应 Bourne shell 脚本，但我只从控制台收到错误，告诉我 .csh 文件有错误（文件意外结束）。当我启动控制台终端窗口时，没有任何关于 .sh 脚本的报告。

我是 Unix 脚本和 shell 编程的新手，我感觉在脚本前面的某个地方存在一些小的（对我而言）格式错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:31:02.170

`#!/bin/csh`这些脚本以而不是（更好的形式）开头，因此每次调用它们时它们`#!/bin/csh -f`总是会运行*您自己的*外壳启动文件（例如`.cshrc`，或在您的主目录中）。`.tcshrc`

由于两个不相关的脚本有错误，它们之间的共同点可能是您自己的点文件。首先添加`-f`到每个脚本的第一行，看看这是否解决了问题；然后在您自己的文件中查找语法错误。

# opengl - 每帧几何修改：OpenCL 或 GLSL 几何着色器？

> ID：11495534
> 
> 赞同：2
> 
> 时间：2012-07-15T20:53:48.263
> 
> 标签：opengl, glsl, opencl, geometry-shader

我正在建造水面，我希望正弦顶点移动以获得波浪对水面的影响。在选择 OpenGL 之前，我的理解是最好在几何着色器中完成。

然而，目前，我正在使用 OpenGL 2.1 的 OpenGL ES 2.0 子集，严格利用现代/可编程管道。此版本中不提供几何着色器。

我有三个选择：

*   在 CPU 上进行所有顶点修改，并为所有水面的每一帧上传 VBO，因此仅使用 OpenGL 2；
*   升级到 OpenGL 3.2 并为此使用几何着色器；
*   使用 OpenGL 2 和 OpenCL 来修改顶点，OpenCL 使用 GPU 作为它的上下文来减少瓶颈。

首先，我想让事情变得简单。所以考虑到我还不知道 OpenCL，也许我应该坚持将大批量发送到 CPU？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T21:01:52.557

您不需要几何着色器来置换顶点。仅当您想要创建新顶点（如镶嵌）时才真正需要几何着色器。如果您只想用正弦波替换现有顶点，您可以在顶点着色器中轻松完成。

# javascript - 为什么 getComputedStyle 不能与 :hover 之类的伪类一起使用？

> ID：11495535
> 
> 赞同：13
> 
> 时间：2012-07-15T20:54:05.457
> 
> 标签：javascript, dom, css-selectors

[根据文档](https://developer.mozilla.org/en/DOM/window.getComputedStyle)，该函数`window.getComputedStyle`应该能够获得伪类的计算样式，例如 :hover 。

它也被解释为[另一个问题的答案](https://stackoverflow.com/a/1285212/813759)

但正如该问题中最后一条评论所说，实际上它根本不起作用，它只是返回正常样式，而不是 :hover 样式。您可以在[这个 jsfiddle](http://jsfiddle.net/ukjES/)中亲自查看。警报返回红色，而不是绿色。

developer.mozilla.org 上的[文档](https://developer.mozilla.org/en/DOM/window.getComputedStyle)也有一个示例，但这也不起作用 - 请参阅[此处](http://jsfiddle.net/5bYsG/)。

在[这个问题](https://stackoverflow.com/a/7756455/813759)中，回答者在评论中说它根本不起作用，但没有给出解释。

是否必须在函数返回正确值之前完全呈现样式表？我尝试设置一些延迟，但似乎没有任何效果。

我试过最新的 Firefox、Chrome 和 IE 浏览器。有谁知道为什么这个功能没有按预期工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T21:15:28.470

```
var style = window.getComputedStyle(element[, pseudoElt]); 
```

其中`pseudoElt`是*“指定要匹配的伪**元素***的字符串” 。伪**元素**类似于`::before`or `::after`，它们是由 CSS 样式生成的元素。`:hover`，`:visited`或其他类似的效果是伪**类**。他们不会创建新元素，而是将专门的类样式应用于元素。

不可能获得伪类的计算样式，至少不能使用`getComputedStyle`. 但是，您可以遍历 CSS 规则并尝试找到合适的选择器，但我不建议您这样做，因为某些浏览器不会遵循 DOM-Level-2-Style 规则，您必须检查哪个规则将影响您的特定元素：

```
/* Style */
p a:hover{ color:yellow; background:black;}
p > a:hover{ color:green; background:white;}
p > a+a:hover{ color:fuchsia; background:blue;} 
```

```
// JS
var i,j, sel = /a:hover/;
for(i = 0; i < document.styleSheets.length; ++i){
    for(j = 0; j < document.styleSheets[i].cssRules.length; ++j){    
        if(sel.test(document.styleSheets[i].cssRules[j].selectorText)){
            console.log(
                document.styleSheets[i].cssRules[j].selectorText,
                document.styleSheets[i].cssRules[j].style.cssText
            );
        }
    }
} 
```

```
结果：
pa：悬停颜色：黄色；背景：无重复滚动 0% 0% 黑色；
p > a：悬停颜色：绿色；背景：无重复滚动 0% 0% 白色；
p > a + a：悬停颜色：紫红色；背景：无重复滚动 0% 0% 蓝色；
```

也可以看看：

*   MDN：[`getComputedStyle`示例](https://developer.mozilla.org/en/DOM/window.getComputedStyle#Use_with_pseudo-elements)
*   W3C: [CSS2: 5.10 伪元素和伪类](http://www.w3.org/TR/CSS2/selector.html#pseudo-elements)
*   SO：[从 JavaScript 设置 CSS 伪类规则](https://stackoverflow.com/questions/311052/setting-css-pseudo-class-rules-from-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T03:11:24.423

请注意，至少对于打开远程调试端口的 Chrome，有一种方法可以做到这一点。基本上您需要使用 WebSocket，连接到远程调试器 url，然后发出以下命令：

```
send  { id: 1, method: "Inspector.enable" }
send  { id: 2, method: "DOM.enable" }
send  { id: 3, method: "CSS.enable" }
send  { id: 4, method: "DOM.getDocument" }
send  { id: 5, method: "DOM.querySelector", params: { nodeId: 1, selector: <<whatever you want>> } }
nodeId = response.result.nodeId
send  { id: 6, method: "CSS.forcePseudoState", params: { nodeId:, forcedPseudoClasses: [ "hover" <<or whatever>> ] } } 
```

然后您可以使用常规的 getComputedStyle 或 CSS.getComputedStyleForNode 调试器 API。

# vim - vim+latex，我可以使用 \ll 编译而不显示 Quicklist 窗口和日志文件窗口吗？

> ID：11495536
> 
> 赞同：3
> 
> 时间：2012-07-15T20:54:17.450
> 
> 标签：vim, latex, latex-suite

我是使用latex-suite 的vim+latex 新手。到目前为止，它运作良好。我正在享受 vim。我无法摆脱的一件事是两个窗口：快速列表和日志文件，它们在调用`\ll`. 我不知道如何从快速列表和日志文件中受益。我只是想摆脱他们。有人知道方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:15:31.743

如果编译成功，这两个窗口应该会消失。您应该查看快速修复并尝试修改您的代码以消除那里的错误/警告。

通常要关闭所有其他窗口，但您只需键入的当前窗口`ctrl-w o`是 a`ctrl-w`后跟字母`o`。

@Anand 需要一些解释：

有几个`ctrl-w`以另一个键开头的命令。我经常使用的一些是：

```
ctrl-w + ctrl-w  -- change to previous window (same with ctrl-w+w)
ctrl-w + j       -- move to next window (down)
ctrl-w + k       -- move to previous window (up)
ctrl-w + t       -- move to top window
ctrl-w + b       -- move to bottom window
ctrl-w + c       -- close current window
ctrl-w + o       -- close all windows but this one (only window) 
```

要获得更完整的列表并从 vim 类型中了解更多信息`:he ctrl-w`

# extjs - 如何使用存储和列重新配置网格

> ID：11495542
> 
> 赞同：1
> 
> 时间：2012-07-15T20:54:54.260
> 
> 标签：extjs, extjs4, sencha-architect

我正在尝试编写一个带有搜索文本字段、搜索按钮和显示结果的网格的通用面板组件。我的目标是一个通用组件，您可以使用更多或更少的列、不同的列标题和不同的搜索逻辑来创建它的不同实例。

我已经使用 Sencha Architect 2 创建了 ExtJS4 代码，其中的内容如下所示：

```
initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items: [
            {
                xtype: 'textfield',
                itemId: 'txtObjSearch',
                fieldLabel: 'Search for'
            },
            {
                xtype: 'button',
                itemId: 'btnSearch',
                icon: '/rhidmoplus/icons/zoom.png',
                text: 'Search'
            },
            {
                xtype: 'gridpanel',
                itemId: 'gridResultObjects',
                title: '',
                store: 'testStore',
                colspan: 2,
                columns: [
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'MSKEYVALUE',
                        text: 'ID'
                    },
                    {
                        xtype: 'gridcolumn',
                        dataIndex: 'DISPLAYNAME',
                        text: 'Displayname'
                    }
                ],
                viewConfig: {
                    itemId: 'gridView'
                }
            }
        ]
    });

    me.callParent(arguments);
}, 
```

商店和 2 列只是假人。我想在自定义组件的构造函数中提供真实的存储和真实的列配置。我发现 GridPanel.reconfigure (http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-reconfigure) 方法似乎完全符合我的需要。但是，以下代码会产生错误：

```
 ////////////////////////
    // Prepare store
    ////////////////////////

    // prepare fields and columns
    var __fields = [];
    var __columns = [];

    for (var jj=0; jj<config.columns.length; jj++) {
        var item2 = {};
        var item = [];
        // for fields
        item.name = config.columns[jj].title;
        __fields.push (item);
        // for columns
        item2.xtype = 'gridcolumn';
        item2.dataIndex = config.columns [jj].dataIndex;
        item2.text = config.columns [jj].title;
        __columns.push (item2);    
    }

    console.debug ('columns.length = ' + __columns.length + ', fields.length = ' + __fields.length);

    var sm = new Ext.selection.RowModel();
    //sm.bindComponent (grid.getView ());

    var __store = Ext.create ('Ext.data.Store', {
        storeId: config.storeId,
        fields: __fields,
        selModel: sm,
        proxy: {
            type: 'ajax',
            url: '/rhidmo/rest/ktec_js_searchUtils',
            reader: {
                type: 'json',
                root: 'entries'
            }
        }
    });

    grid.reconfigure (__store, __columns); 
```

这是：

未捕获的类型错误：无法读取未定义的属性“长度”

在选择模型的 onLastFocusChanged 方法中。如果我将 null 作为 reconfigure 的第一个参数传递，那么这不会发生，但我想动态创建一个存储（否则我的组件的每个实例都使用同一个存储，这肯定不好）。

也许我的商店配置不正确，但我从 Sencha Architect 创建的代码中复制了它，所以它不会错。

感谢您的任何提示。干杯凯

=========================================

你好，现在改了代码：

```
// prepare fields and columns
var __fields = [];
var __columns = [];

for (var jj=0; jj<config.columns.length; jj++) {
    var item2 = Ext.create ('Ext.grid.column.Column', {
        dataIndex: config.columns [jj].dataIndex,
        text: config.columns [jj].title
    });
    var item = Ext.create ('Ext.data.Field', {
        name: config.columns[jj].title
    });
    __fields.push (item);
   __columns.push (item2);    
} 
```

我仍然得到同样的错误：

```
Uncaught TypeError: Cannot read property 'length' of undefined
Ext.define.onLastFocusChangedext-all-debug.js:89284
Ext.define.setLastFocusedext-all-debug.js:59431
Ext.define.clearSelectionsext-all-debug.js:59543
Ext.define.refreshext-all-debug.js:59523
Ext.define.bindext-all-debug.js:59143
Ext.define.bindStoreext-all-debug.js:60584
Ext.define.bindStoreext-all-debug.js:78007
Ext.define.reconfigureext-all-debug.js:78033
Ext.define.configureGenericSearchPanel.js:141
Ext.define.onStoreTestPanelRenderMainController.js:471
fireext-all-debug.js:10658 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:20:33.937

我已经修好了。我试图在渲染事件中做到这一点。在那之后不起作用，我向页面添加了一个按钮，并在按钮单击处理程序中调用了重新配置。那工作得很好。这导致我尝试了 afterrender 事件，它可以解决问题。

谢谢你的帮助，

干杯凯

# javascript - Deviceready 不会在带有 Android 4.1 的 Cordova-1.9.0 中触发

> ID：11495544
> 
> 赞同：0
> 
> 时间：2012-07-15T20:55:13.357
> 
> 标签：javascript, android, cordova

**------索引.html**

```
<!DOCTYPE HTML>
<html>
<head>
<title>AmmoAmmo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
<script type="text/javascript" charset="utf-8" src="samin.js"></script>
<script type="text/javascript" charset="utf-8">

function onLoad() {
    console.log("1.......onLoad()..........."); 
    document.addEventListener("deviceready", onDeviceReady(), false);
}

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        console.log("2\. -------------onDeviceReady--------------------");
        // Now safe to use the Cordova API
        alert('3\. _____________onDeviceReady()-DONE!_____________');
    }

    function saveAmmo(value){

        //testAlert();
        window.localStorage.setItem("selectedAmmo", value);
        alert(value,'_top');

    }
    </script>

</head>
<body onload="onLoad()">
    <div data-role="page" id="homePage" data-theme="a">

        <div data-role="header">
            <a href="index.html" data-icon="info">Help</a>
            <h1>Testing</h1>
            <a href="contact.html" data-icon="info">Contact</a>
        </div>

        <div data-role="content">
            <p>
                <label for="select-choice-0" class="select"></label>
                 <select name="select-choice-0" id="select-choice-0"
                    data-mini="true" onchange="saveAmmo(this.options[this.selectedIndex].value)">
                    <option value='null' SELECTED>Select a Ammo</option>
                    <option value='1' >111</option>
                    <option value='2' >222</option>
                </select>
            </p>

        </div>
        <div class="ui-grid-a">
            <div class="ui-block-a" align="center">
                <img src="images/22-250_rem_1.jpeg" data-theme="c"/>
            </div>
            <div class="ui-block-b" align="center">
                <img src="images/22-250_rem_1.jpeg" data-theme="c"/>
            </div>
        </div>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="index.html" class="ui-btn-
           active">Ammo</a></li>
                    <li><a href="testing1.html">Test1</a></li>
                    <li><a href="testing2.html">Test2</a></li>
                </ul>
            </div>
        </div>

    </div>

</body>

</html> 
```

这与 Cordova 文档中的情况完全相同：http: [//docs.phonegap.com/en/1.9.0/cordova_events_events.md.html#deviceready](http://docs.phonegap.com/en/1.9.0/cordova_events_events.md.html#deviceready)

其他一切都在工作，但这将成为一个真正的阻碍，因为我在从本地存储读取数据时需要它。我应该相信这些文件吗？

**--------插件.xml：**

```
<plugins>
<plugin name="App" value="org.apache.cordova.App"/>
<plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
<plugin name="Device" value="org.apache.cordova.Device"/>
<plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
<plugin name="Compass" value="org.apache.cordova.CompassListener"/>
<plugin name="Media" value="org.apache.cordova.AudioHandler"/>
<plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
<plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
<plugin name="File" value="org.apache.cordova.FileUtils"/>
<plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
<plugin name="Notification" value="org.apache.cordova.Notification"/>
<plugin name="Storage" value="org.apache.cordova.Storage"/>
<plugin name="Temperature" value="org.apache.cordova.TempListener"/>
<plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
<plugin name="Capture" value="org.apache.cordova.Capture"/>
<plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
<plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/> 
```

**--------Manifest.xml---------**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mycordova.hellocordova"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".HelloCordovaActivity"
        android:label="@string/title_activity_hello_cordova" 
        android:configChanges="orientation|keyboardHidden|screenSize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

    </activity>
</application> 
```

**--------Activity.java----------**

```
package com.mycordova.hellocordova;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import org.apache.cordova.*;

public class HelloCordovaActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }

} 
```

**- - - - 日志：**

```
07-16 10:23:12.878: D/DroidGap(637): onMessage(onPageStarted,file:///android_asset/www/index.html)
07-16 10:23:13.848: D/chromium(637): Unknown chromium error: -6
07-16 10:23:22.388: D/CordovaLog(637): 1.......onLoad()...........
07-16 10:23:22.388: D/CordovaLog(637): file:///android_asset/www/index.html: Line 16 : 1.......onLoad()...........
07-16 10:23:22.398: I/Web Console(637): 1.......onLoad()........... at file:///android_asset/www/index.html:16
07-16 10:23:22.398: D/CordovaLog(637): 2\. -------------onDeviceReady--------------------
07-16 10:23:22.408: D/CordovaLog(637): file:///android_asset/www/index.html: Line 23 : 2\. -------------onDeviceReady--------------------
07-16 10:23:22.408: I/Web Console(637): 2\. -------------onDeviceReady-------------------- at file:///android_asset/www/index.html:23
07-16 10:23:22.789: I/Choreographer(637): Skipped 44 frames!  The application may be doing too much work on its main thread.
07-16 10:23:31.608: E/CordovaWebView(637): CordovaWebView: TIMEOUT ERROR!
07-16 10:23:31.608: D/Cordova(637): CordovaWebViewClient.onReceivedError: Error code=-6 Description=The connection to the server was unsuccessful. URL=file:///android_asset/www/index.html
07-16 10:23:31.638: D/DroidGap(637): onMessage(onReceivedError,{"errorCode":-6,"url":"file:\/\/\/android_asset\/www\/index.html","description":"The connection to the server was unsuccessful."})
07-16 10:23:31.869: I/Choreographer(637): Skipped 55 frames!  The application may be doing too much work on its main thread.
07-16 10:23:31.869: D/SoftKeyboardDetect(637): Ignore this event
07-16 10:23:31.995: D/dalvikvm(637): GC_CONCURRENT freed 236K, 4% free 8186K/8519K, paused 27ms+64ms, total 279ms
07-16 10:23:32.788: I/Choreographer(637): Skipped 128 frames!  The application may be doing too much work on its main thread.
07-16 10:26:00.398: D/DroidGap(637): onDestroy()
07-16 10:26:00.398: D/CordovaWebView(637): >>> loadUrlNow()
07-16 10:26:00.398: D/CordovaWebView(637): >>> loadUrlNow()
07-16 10:26:00.489: E/WindowManager(637): Activity com.mycordova.hellocordova.HelloCordovaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41232338 that was originally added here
07-16 10:26:00.489: E/WindowManager(637): android.view.WindowLeaked: Activity com.mycordova.hellocordova.HelloCordovaActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41232338 that was originally added here
07-16 10:26:00.489: E/WindowManager(637):   at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
07-16 10:26:00.489: E/WindowManager(637):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
07-16 10:26:00.489: E/WindowManager(637):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
07-16 10:26:00.489: E/WindowManager(637):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
07-16 10:26:00.489: E/WindowManager(637):   at android.view.Window$LocalWindowManager.addView(Window.java:547)
07-16 10:26:00.489: E/WindowManager(637):   at android.app.Dialog.show(Dialog.java:277)
07-16 10:26:00.489: E/WindowManager(637):   at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
07-16 10:26:00.489: E/WindowManager(637):   at org.apache.cordova.CordovaChromeClient.onJsAlert(CordovaChromeClient.java:120)
07-16 10:26:00.489: E/WindowManager(637):   at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:572)
07-16 10:26:00.489: E/WindowManager(637):   at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 10:26:00.489: E/WindowManager(637):   at android.os.Looper.loop(Looper.java:137)
07-16 10:26:00.489: E/WindowManager(637):   at android.app.ActivityThread.main(ActivityThread.java:4745)
07-16 10:26:00.489: E/WindowManager(637):   at java.lang.reflect.Method.invokeNative(Native Method)
07-16 10:26:00.489: E/WindowManager(637):   at java.lang.reflect.Method.invoke(Method.java:511)
07-16 10:26:00.489: E/WindowManager(637):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-16 10:26:00.489: E/WindowManager(637):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-16 10:26:00.489: E/WindowManager(637):   at dalvik.system.NativeStart.main(Native Method) 
```

干杯，萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:43:09.137

加载主页的时间似乎太长了。您应该提取这 3 个 jQuery 文件并将它们与您的应用程序一起打包，而不是远程加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:06:13.777

其他一切都很好

采用

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width"> 
```

代替

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

以及像这样从清单文件中删除**screenSize**

> android:configChanges="orientation|keyboardHidden">

# winapi - NMHDR 中的 wParam WM_NOTIFY 和 idFrom 有什么区别？

> ID：11495545
> 
> 赞同：5
> 
> 时间：2012-07-15T20:55:17.597
> 
> 标签：winapi, visual-c++

[的文档`WM_NOTIFY`说](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775583.aspx)：

> *   `wParam`：
>     发送消息的公共控件的标识符。不保证此标识符是唯一的。应用程序应使用结构的`hwndFrom`or`idFrom`成员`NMHDR`（作为`lParam`参数传递）来标识控件。

[并且文档`NMHDR`说](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775514.aspx)：

> *   `idFrom`
>     发送消息的控件的标识符。

这两者之间究竟有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T12:39:02.077

一般没有区别。这是一种方便。您在消息中获得的同样便利`WM_COMMAND`，它同时传递了一个 ID 和一个窗口句柄，即使您可以通过`GetDlgCtrlID`.

# backbone.js - 使用backbone.js 发出saveWine

> ID：11495548
> 
> 赞同：0
> 
> 时间：2012-07-15T20:55:56.320
> 
> 标签：backbone.js

我从[https://github.com/ccoenraets/backbone-cellar](https://github.com/ccoenraets/backbone-cellar)获得了这段代码。当我尝试使用 slim.php 将新模型添加到数据库时，它显示“错误尝试添加此项目时发生错误”。但是当我试图获取、更新、删除它的工作良好时。为什么它只在添加时显示错误？

bootstrap/js/views/winedetails.js

```
window.WineView = Backbone.View.extend({

    initialize: function () {
        this.render();
    },

    render: function () {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    },

    events: {
        "click .save"   : "beforeSave",
        "click .delete" : "deleteWine"

    },

    beforeSave: function () {
        var self = this;
        var check = this.model.validateAll();
        if (check.isValid === false) {
            utils.displayValidationErrors(check.messages);
            return false;
        }

        // Upload picture file if a new file was dropped in the drop area
        if (this.pictureFile) {
            this.model.set("picture", this.pictureFile.name);
            utils.uploadFile(this.pictureFile,
                function () {
                    self.saveWine();
                }
            );
        } else {
            this.saveWine();
        }
        return false;
    },

    saveWine: function () {
        var self = this;
        this.model.save(null, {
            success: function (model) {
                self.render();
                app.navigate('wines/' + model.id, false);
                utils.showAlert('Success!', 'Wine saved successfully', 'alert-success');
            },
            error: function () {
                utils.showAlert('Error', 'An error occurred while trying to add this item', 'alert-error');
            }
        });
    },

    deleteWine: function () {
        this.model.destroy({
            success: function () {
                alert('Wine deleted successfully');
                window.history.back();
            }
        });
        return false;
    }

}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:05:28.090

您需要查看服务器发回的错误响应。您可以使用 Firebug/Firefox、Chrome 等来查看服务器对您的添加请求的响应。或者，如果您可以`console.log`或`alert`URL（例如来自 Backbone 内部），您可以简单地正常浏览到它。无论哪种方式，一旦您看到您的服务器对您的不满，您应该能够解决您的问题。

# iphone - 从 plist 填充的应用程序添加收藏夹

> ID：11495550
> 
> 赞同：0
> 
> 时间：2012-07-15T20:56:46.357
> 
> 标签：iphone, xcode, nsdictionary, nsnotificationcenter, favorites

我正在使用带有字典数组的 plist 来填充 TableView 和 TableView 中选定单元格（原型单元格）的 DetailView 。当按下按钮时，我想将选定的字典添加到收藏夹选项卡（另一个 TableView）。到目前为止，这是我的代码：

到目前为止在 DetailViewController 中的代码：

```
-(IBAction)FavoriteButton:(id)sender
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelected"
                                                    object:selectedObject];

} 
```

到目前为止捕获FavoritesViewController 中的对象的代码：

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"ItemSelected"
                                                  object:nil
                                                   queue:[NSOperationQueue mainQueue]
                                              usingBlock:^(NSNotification* notif) {
                                              [favoritedObjects release];
                                              favoritedObjects = [[notif object] retain];
                                              [self.tableView reloadData];
                                          }];

//And populate the TableView with the objects:

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 return [favoritedObjects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Favcell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

NSString *cellValue = [favoritedObjects valueForKey:@"Name"];
cell.textlabel.text = cellValue;

return cell;
} 
```

这显示了 20 个单元格，其值来自我按下“添加到收藏夹”按钮的 DetailViewController 中最后一个对象的键值：“名称”。例如，如果我将“Gato Negro”添加到收藏夹，它会在 20 个单元格中显示“Gato Negro”。如果我然后将“Luna”添加到收藏夹中，它会在 FavoritesViewController 的 20 个单元格中将“Gato Negro”替换为“Luna”。那么如何在收藏夹 TableView 中一一显示它们？

以及如何让 NotificationCenter 在应用程序关闭时保存更改，以便下次记住收藏夹？

这似乎是某种地方的沟通问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:03:20.503

您正在发布带有对象的通知`selectedObject`（我假设是您的字典）。当您收到该通知时，您将使用此对象替换您现有的收藏夹：

`favoritedObjects = [[notif object] retain];`

所以事实上 favoritedObjects 现在是单个 selectedObject 字典。这本字典可能有 20 个条目，这就是为什么你最终会得到 20 个单元格。

您需要（至少）进行两项更改才能使您的代码正常工作：

1.  更改上面的那一行以**将**通知对象添加到您的 favoritedObjects 数组（我假设这是一个`NSMutableArray`），而不是用selectedObject 字典**替换favoritedObjects。**您还需要创建一次 favoritedObjects 的实例（当您第一次想向其中添加内容时按需创建，例如检查`favoritedObjects == nil`是否为零，创建一个新的 NSMutableArray，或者在合适的位置创建它，例如`viewDidLoad`（在在某些时候，您可能还会保存和加载收藏夹，因此将其创建到初始化方法之一无论如何都是一个好主意，即使您还没有准备好持久收藏夹）。

2.  `tableView:cellForRowAtIndexPath:`使用`indexPath`传递给您的 实际从您的喜爱对象数组中获取正确的条目。

此外，`tableView:cellForRowAtIndexPath:`如果没有可出列的单元格，您将缺少创建新单元格的代码。也许您刚刚在这里为您的问题省略了这段代码？如果您没有，则需要添加该代码。

以小写字母开头的方法名称也是一个好主意（`-(IBAction)favoriteButton:(id)sender`而不是`-(IBAction)FavoriteButton:(id)sender`，甚至更好`-(IBAction)favoriteButtonPressed:(id)sender`：），因为这是每个人都希望 Objective-C 方法看起来的样子:)

# ios - XIB 控制单击以编程方式引用出口 iAD

> ID：11495551
> 
> 赞同：0
> 
> 时间：2012-07-15T20:56:50.033
> 
> 标签：ios, xcode, xib, iad, banner

我有一个想用 iAD 运行的应用程序。遗憾的是，界面构建器格式中没有视图控制器，所以我必须以编程方式进行。您可以通过视图控制器中的代码来引用插座吗？

非常感谢您，一切都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:55:59.893

您不必使用 IB 来使用 iAD。在您的 .h 中声明一个 UIView，例如 @property (nonatomic, strong) UIView *adView

以 .m 合成

然后当您收到广告时，将其添加到 self.adView

# java - 如何使用@Configuration 配置 Spring Webflow 2.3.1？

> ID：11495555
> 
> 赞同：2
> 
> 时间：2012-07-15T20:57:29.333
> 
> 标签：java, spring, configuration, annotations, spring-webflow

通常，Spring webflow 配置从以下位置导入`application-context.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans .../>

    ....

    <import resource="config/webflow-config.xml" />

</beans> 
```

但是在 spring 3.1 中，可以使用 Java 执行所有配置`@Configuration`并摆脱`application-context.xml`.

我的 Web 配置有以下内容：

```
@Configuration
@Import({ MyConfig1.class, MyConfig2.class })
public class WebConfig extends WebMvcConfigurerAdapter {

    ...

} 
```

是否有可能摆脱`webflow-config.xml`使用`@Configuration`？如果是怎么办？如果没有，如何让我的 Web 配置包含在内`webflow-config.xml`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:38:42.993

最新的 Spring Webflow 不支持通过定义流`@Configuration`，您必须将流定义为 XML 并将其导入`@Configuration`文件。

您可以使用 @ImportResource 将 webflow.xml 文件导入到 @Configuration 文件中：

```
@ImportResource("/WEB-INF/web/webflow.xml") 
```

# java - Java 小程序 - 今天是一个错误的选择吗？

> ID：11495557
> 
> 赞同：14
> 
> 时间：2012-07-15T20:57:48.450
> 
> 标签：java, javascript, applet

我有一些重要的计算代码需要应用于已经下载到浏览器 DOM 并从用户交互中捕获的数据。我不想公开这段代码。我想知道是否：

1.  编写一个 web 服务并通过 websocket 或 HTTP 与浏览器通信。权衡是交互速度（从光滑到差）和更高的流量成本。
2.  编写一个 Java 小程序（签名以隐藏代码），将逻辑封装在页面中并让 JavaScript 与 Java API 交互。我在其他地方读到 Java 和 JavaScript 引擎在某些情况下可能会死锁。但是，由于我只是在计算，所以这不是问题。也许，在多核机器上，我可以使用更多线程来分配我的工作。
3.  用 JavaScript 编写。但是 JavaScript 很难测试，*而且*都在公众视野中。

*[诸如Web 上 Java 小程序的可用性](https://stackoverflow.com/questions/3335456/usability-of-java-applets-in-the-web)*和其他几个问题的问答也令人沮丧。

Java 小程序是一种死技术吗？这些天甚至没有关于这个话题的问答！此外，Java 可能并不总是与所有浏览器（台式机、平板电脑或移动设备）捆绑在一起吗？

有没有更好的方法来完成同样的事情，比如隐藏代码、利用客户端 CPU/RAM、最小化数据流量？

网页基于 JavaScript、HTML5 和 CSS。服务器只提供 JSON 和 XML。数据包为 10-20 KB 并经常更新。计算成本高昂且特定于客户端，因此我真的很想使用客户端来完成所有这些工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-16T06:14:13.800

我认为小程序的最大缺点是它假设您在客户端计算机上安装了[JRE 。](https://en.wikipedia.org/wiki/Java_virtual_machine)这真的是一个可行的假设吗？

当然，您也可以提供下载和安装 JRE，但是为什么要做所有这些只是为了进行一些计算呢？另一个我会问自己的问题，你的客户可以是手机、平板电脑等吗？如果是这样，也许 JavaScript 是一个更好的选择。

还有两美分 :) 你提到了“打开眼睛 JavaScript” 你应该明白保护计算代码的唯一真正方法是将计算放在服务器上。我的意思是，即使你有一个已编译的二进制代码，Java 的程序集对于熟练的攻击者来说也很容易理解。你提到的混淆（它是混淆，不签署[JAR](https://en.wikipedia.org/wiki/JAR_%28file_format%29)文件）使它稍微难一些，但仍然不是不可能的。

我在这里看到的唯一问题是，如果您有很多客户端同时运行计算，并且您将计算负担放在服务器上，它最终可能会崩溃。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-11-04T14:41:43.533

截至 2015 年 9 月，他们对我来说已经死了。使用小程序有利有弊。但是 Chrome 停止支持它们，所以通过使用它们，您根本不支持桌面版 Chrome，而对于移动浏览器，它们中的哪些支持 NPAPI？

甲骨文官方公告：

> Chrome 不再支持 NPAPI（Java 小程序所需的技术） 用于 Web 浏览器的 Java 插件依赖于跨平台插件架构 NPAPI，该架构已被所有主要 Web 浏览器支持了十多年。Google 的 Chrome 版本 45（计划于 2015 年 9 月发布）放弃了对 NPAPI 的支持，影响了 Silverlight、Java、Facebook Video 和其他类似的基于 NPAPI 的插件。
> 
> Java 应用程序通过 Web 浏览器作为 Web 启动应用程序（一旦启动后不与浏览器交互）或作为 Java 小程序（可能与浏览器交互）提供。此更改不会影响 Web Start 应用程序，它只会影响小程序。
> 
> 如果您在使用 Chrome 访问 Java 应用程序时遇到问题，Oracle 建议您改用 Internet Explorer (Windows) 或 Safari (Mac OS X)。

**更新 1** Microsoft Edge 也不支持它们。因此，对已经垂死的 Java 小程序又是一次打击。

**更新 2**

Mozilla 的公告

> 重要提示：新的 64 位版本的 Firefox for Windows 不识别或支持此插件。有关详细信息，请参阅此 Mozilla 博客文章。

是的。Java 小程序已死。

**更新 3**甲骨文正式用 Java 9杀死[了他们。](http://www.theverge.com/2016/1/28/10858250/oracle-java-plugin-deprecation-jdk-9)

**更新 4** [Java Web Start](https://en.wikipedia.org/wiki/Java_Web_Start)也死了。从[Java 11](https://opensource.com/article/19/4/migrating-jnlp-java-se-11)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T05:21:29.563

> ..写一个Java小程序（签名隐藏代码）

代码签名是为了保护用户，而不是我们（或保护代码）。它只是添加了额外的文件。也许您正在考虑混淆，这使得窃取代码变得更加困难。事实上，混淆的 JavaScript 代码比数字签名（但不是混淆）的 Java 类更难破译。

保护代码的唯一真正解决方案是将重要部分留在服务器上。JavaScript 可能处理大部分（如果不是全部）用户/浏览器/服务器交互，因此 Java 小程序可能在其中发挥的唯一作用是可视化返回的（计算的）数据。即使这样，我也可能会寻找在 HTML 5 Canvas 中显示结果的方法。

所以你的问题的答案...

> Java 小程序 - 今天是一个错误的选择吗？

是的，对于这个用例。与在服务器上完成的繁重工作相比，在纯 JavaScript/Canvas 中可以提供的内容上，applet 几乎没有添加任何内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-04T14:10:42.190

John Demetriou 提供了非常好的信息。

此外，现在（2017 年 7 月）只有 Firefox 和 Internet Explorer（也许 Safari 不确定）允许使用小程序。如果您满足以下三个要求，则可以使用它们：

1.  您允许访问 .class 小程序文件的 HTML 站点作为 Java 控制面板中的例外
2.  Java 更新到浏览器支持的版本（很可能是最新版本）
3.  .class 文件与您的 HTML 文件位于同一位置！

您可以通过在浏览器中键入 HTML 内容的位置来访问 Java 小程序。您仍然可能会收到提示，询问是否运行 Java，因此请接受。

我只提供这些信息只是为了让人们知道有一种方法可以运行小程序。但是，小程序被禁用是有原因的。它们允许许多安全漏洞。仅使用它们来学习他们的技术并获得一些见解。不建议在其他地方使用它们。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-09-29T14:54:07.227

嗯，首先，Java 小程序是一项不断发展的技术，而且还远未消亡。其次，浏览器和用户安装量正在下降。一些人使用下降的安装量来声称 Java 正在消亡，但这种说法是错误的，因为 Java 小程序的实际使用量总是比已安装的插件少得多。

但是根据您的描述，我可能不会选择小程序。这是一项强大的技术，我将与我知道会安装他们需要的任何东西以使用它的用户群一起使用。它适用于游戏、内网站点等。在内网上，IT 部门可以确保小程序在所有需要使用它的桌面上运行。

但在你的情况下，我会使用[Vaadin](https://en.wikipedia.org/wiki/Vaadin)。它使用 JavaScript 将 Java 应用程序转换为 Web 应用程序。此外，它可以保护您的代码，这是 Vaadin 的主要功能。您的大部分代码将作为 Java 代码在服务器上运行，并且只有 GUI 前端在浏览器中运行。

因此，Vaadin 比 applet 慢得多（因为 JavaScript）。它也比大多数其他 Web 框架慢得多，因为它严重依赖于在服务器上运行代码。这当然也意味着您的计算不会被翻译成 JavaScript 并传输到客户端计算机。

但是，您将无法访问强大的[Swing](https://en.wikipedia.org/wiki/Swing_%28Java%29) API。Vaadin 有自己的类似于 Swing 的 API，它只涵盖了 Swing 可以做的一小部分。但另一方面，没有其他 Web 框架可以做 Swing 可以做的事情。

真的没有办法满足你所有的愿望。如果您使用客户端进行计算，您将公开您的计算。没有办法解决这个问题。即使您用 C++ 编写本机应用程序也不会。它仍然可以进行逆向工程并提取您的计算。因此，我建议您在服务器上运行您的计算，并找到一种向用户收费的方法。如果您使用 Vaadin，这正是您所做的。

另一方面，如果您想在客户端上进行计算，您*确实*应该使用 Java 小程序。在计算方面，Java 比 JavaScript 快得多。[Flash](https://en.wikipedia.org/wiki/Adobe_Flash)比 JavaScript 快，但 Java 仍然快得多。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-17T14:05:14.507

当您必须使用客户端机器时，小程序总是一个不错的选择，即：使用生物识别解决方案或硬件之类的东西。

但如果你只需要装饰或计算能力，我想更好的方法是重构代码，使其轻巧干净，条件尽可能少。[如果您有单独的服务器机器（例如 DB 和IIS](https://en.wikipedia.org/wiki/Internet_Information_Services) ），也许使用一些视图或存储过程应该会有所帮助。

我被锁定在一个项目中，唯一的解决方案是小程序......另一个选择是[ActiveX](https://en.wikipedia.org/wiki/ActiveX)，但它将我的客户端锁定到 Internet Explorer 并且我们不想要它。

# ruby-on-rails - 使用 Facebook koala gem 点赞帖子

> ID：11495559
> 
> 赞同：2
> 
> 时间：2012-07-15T20:58:07.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, koala

使用考拉宝石时，我如何喜欢当前页面？

我以为它会是这样的......但它不起作用

```
@graph.put_like("http://www.currentpage.com") 
```

@graph 是一个经过身份验证的对象，我让它适用于 put_connections、put_wall 等......但是，put_like 一直返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:09:22.080

我认为`put_like`koala 或 facebook api 中没有方法。`like`是一个 opengraph 动作。因此，您可以执行以下操作：

```
@graph.put_connections("me", "your_app_namespace:like", :object => "http://www.currentpage.com") 
```

您必须`like action`在您的 facebook 应用程序中创建并为您的应用程序设置一个命名空间。

您可以在此处阅读有关[opengraph 操作的](https://developers.facebook.com/docs/opengraph/actions/)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T18:43:44.160

这会喜欢粉丝页面并增加关注者数量还是就像粉丝页面网址一样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T20:16:13.193

Facebook 不会让您为您的应用程序创建自定义的类似操作。您必须在没有应用程序命名空间的情况下使用它们的常见类似操作：

```
@graph.put_connections("me", "og.likes", object: "http://www.currentpage.com") 
```

我相信 .put_like 只能通过引用特定的对象名称或 ID 来工作。如果您只是喜欢一个 URL，请使用上面的代码段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-03T19:06:30.880

Facebook 刚刚在 2016 年 11 月 17 日更新[了他们关于这个问题的文档](https://developers.facebook.com/docs/graph-api/reference/v2.8/object/likes)。现在只有在使用页面访问令牌时才能通过 API 点赞对象。

您可以像这样使用 Koala gem 执行此操作：

```
client.put_connections(object_id, 'likes') 
```

# php - 如何在允许其他用户编辑之前检查用户是否正在编辑表记录，而不是等待发布？

> ID：11495560
> 
> 赞同：2
> 
> 时间：2012-07-15T20:58:27.140
> 
> 标签：php, mysql, delphi, remote-access, zeos

我正在开发一个艺术家个人资料网站和一个桌面软件来管理其数据库内容。许多运营商将在其收件箱中收到相同数量的待修改记录以供批准和发布。问题是当两个或多个操作员尝试编辑同一记录时。数据库服务器（远程 mysql）将引发锁定错误，或者仅维护最后保存它的操作员的数据。

**什么是最好的方法（更简单和更有效的方法）来检查是否有人在向另一个用户授予对该记录的访问权限之前已经在编辑该记录，或者该记录的所有者本人是否正在再次更新他的记录网站？**

该软件仍在实验室中。但是当我将它交付给客户时，我知道这将是一个问题。

我可以创建一个表来将每条记录标记为“正在编辑”或“空闲”，因此我不需要更改表的结构（因为人们已经在网站上使用它们）。但我需要确保有一种更优雅/更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:14:16.520

您可以使用许多系统级方法来处理该问题。锁定记录以进行独家编辑只是传统上由旧系统选择的一种方式。

一种更现代的方法是允许两个编辑在没有锁定的情况下继续进行——称为[*乐观并发控制*](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)。如果存在重叠编辑，请查看是否可以自动解决 - 事实上，许多同时进行的编辑没有争议，尤其是当它们编辑记录的不相关部分时。

在发生冲突的情况下，重要的是不要简单地丢失第一个编辑：第一个编辑器已经发出成功事务的信号。有责任向第二位编辑表明他们的编辑与之前的编辑冲突。通常最好的做法是向他展示他提议的更改以及其他最近的更改，并让他们选择要做什么：放弃他们的更改，覆盖先前的更改（可能会向第一个编辑器指示），或手动合并更改.

这可能没什么大不了的。您的系统描述表明用户不会密切同步到值得编辑的事件。每次编辑发生的随机时间表明编辑冲突很少见。在这种情况下，您的空闲/编辑指示可能绰绰有余。

# php - 打开购物车类别 |首页| 没有重定向到正确的页面

> ID：11495562
> 
> 赞同：-1
> 
> 时间：2012-07-15T20:58:38.637
> 
> 标签：php, url, redirect, rewrite, opencart

我添加了一个类别 |首页| 但是，当点击链接时，它会重定向到 index.php?route=product/category&path=% 我将如何重定向到我网站的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:09:05.817

所以从来没有真正得出结论，但我确实手动添加了一个链接到导航栏。现在都在工作。感谢您花时间提供帮助

# java - 如何提取double / BigDecimal的小数位

> ID：11495565
> 
> 赞同：21
> 
> 时间：2012-07-15T20:58:45.823
> 
> 标签：java

假设我们有一个双重值`12345.6789`（应该是动态的）

现在的要求是拆分数字并获得小数位和小数位，这将是：

```
double number = 12345.6789;
int decimal = 12345;
int fractional = 6789; 
```

我得到了小数部分，但你能提示一下小数部分吗？非常感谢。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-15T21:19:39.480

```
double number = 12345.6789; // you have this
int decimal = (int) number; // you have 12345
double fractional = number - decimal // you have 0.6789 
```

这里的问题是小数部分在内存中并不是写成“0.6789”，而是可能有一定的“偏移量”，可以这么说。例如`0.6789`可以存储为`0.67889999291293929991`.

我认为您在这里主要关心的不是**获得**小数部分，而是获得具有一定**精度**的小数部分。

如果您想获得分配给它的确切值，您可能需要考虑这一点（尽管如此，这不是一个干净的解决方案）：

```
String doubleAsText = "12345.6789";
double number = Double.parseDouble(doubleAsText);
int decimal = Integer.parseInt(doubleAsText.split("\.")[0]);
int fractional = Integer.parseInt(doubleAsText.split("\.")[1]); 
```

但是，正如我所说，这不是最有效和最干净的解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-15T21:01:42.587

你不能以一种确切的方式做你想做的事。

一个问题是，如果你有数字`1.05`，结果应该是什么？

```
double number = 1.05;
int decimal = 1;
int fractional = 5; // Oops! "1.05" and "1.5" give the same result. 
```

这个怎么样？

```
int fractional = 05; // Still not correct. This is an octal number. 
```

另一个问题是 double 类型不能准确表示`12345.6789`. 相反，它存储了一个稍微不同的数字。这称为表示错误。所以小数部分实际上不会是`6789`. 相反，您可以将其四舍五入到小数位数。

```
int fractional = (int)Math.round((number - decimal) * 1000); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T03:02:55.877

您必须决定支持多少小数。我使用这种方法：

```
int decimals = 2;
BigDecimal value = new BigDecimal(123.45).setScale(decimals, RoundingMode.HALF_EVEN);
BigInteger INTEGER = value.abs().toBigInteger();
//(value - INTEGER) * (10 ^ decimais)
BigInteger DECIMAL = ((value.subtract(new BigDecimal(INTEGER))).multiply(new BigDecimal(10).pow(decimals))).toBigInteger(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T21:18:30.683

您可以转换为`String`，找到小数点，获取子字符串，然后再转换回整数。

```
String numberStr = Double.toString(number);
String fractionalStr = numberStr.substring(numberStr.indexOf('.')+1);
int fractional = Integer.valueOf(fractionalStr); 
```

# htmlpurifier - 是否可以在不关闭打开标签的情况下使用 html 净化器？

> ID：11495567
> 
> 赞同：0
> 
> 时间：2012-07-15T20:59:01.410
> 
> 标签：htmlpurifier

我正在动态构建一个页面，我需要在片段上运行净化器以避免任何脚本，但是 div 尚未关闭，其他内容（无法净化）稍后插入其中。所以我想在各个位上运行净化器，但是它会自动关闭该标签，在这种情况下这是一个禁区。

我找不到允许我禁用关闭打开标签的配置选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:36:11.793

是的，正如您所注意到的，无法禁用。它也是一个相当重要的组件，因为它可以防止用户内容泄漏到页面的其余部分。

# android - 状态机和意图

> ID：11495570
> 
> 赞同：1
> 
> 时间：2012-07-15T20:59:14.893
> 
> 标签：android, android-layout

我的 android 应用程序需要像在状态机中一样运行一系列事件

事件一：播放视频#1

事件 2：加载图像并等待按钮按下

活动 3：播放视频 #2

ETC...

一种方法是为每个事件生成一个单独的活动，但是有超过 20 个事件，我认为有一种更简单的方法。

所以我编写了这样的状态机：

```
 int mState = 0;     
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //
    switch(mState) {
    case 0:
        Boolean flag = videoIntent(url0); 
        break;
    case 1:
        flag = loadImage(img1);
    }
    }

public Boolean videoIntent(String video) {
     mBundle.putString("url",video ); 
     Intent myIntent = new Intent();
     myIntent.putExtras(mBundle);
         myIntent.setClass(mySM.this, SM_vPlayer.class);
         startActivity(myIntent);
             mState ++;
    return true;     
 }

public Boolean loadImage(String image) {
    //load image
            mState ++;
    return true;
} 
```

问题：在开始播放视频的意图后（该活动有一个监听器等待完成），然后调用完成（）。

1.  finish() 将在哪里返回 onCreate、onResume 或其他方法？

2.  如何回到 switch 语句？

3.  有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:24:28.827

该`startActivity()`方法是非阻塞的，因此您的循环（假设您正在考虑 onCreate() 方法中的循环）将在视频完成之前循环播放。您可以改为 perform `startActivityForResult()`，这将导致您的（当前）活动中的回调在启动的活动完成（）时被调用。您也可以在不等待的情况下加载您的图像，因为新活动将导致您的图像被隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:51:06.037

您可能会考虑将应用程序子类化或使用 Intent 传递状态值。您应该考虑当用户在您的任何状态下离开应用程序时会发生什么。

For example, you could always pass in the state value, increase it when the action inside the event is finished and call an Application/static method, which returns the intent that should triggered next. This way, you preserve the back trace and keep your state logic in one place.

# google-apps-script - 基于 UiApp 的网络应用程序是否有任何好的示例或教程？

> ID：11495573
> 
> 赞同：2
> 
> 时间：2012-07-15T20:59:27.413
> 
> 标签：google-apps-script

我对电子表格中的 Google Apps 脚本相当有经验，并且希望根据 Google IO 2012 上宣布的新功能开始一些网络应用程序。

对于中等复杂的基于 UIApp 的 Web 应用程序，是否有任何体面的示例（包括源代码）或教程？因此，不仅仅是在单击按钮时执行单个功能的单个页面，而是在不同页面/窗格等之间存在导航的东西。

到目前为止，我想要了解的主要内容是应用程序中的导航 - 我如何跳转到 Web 应用程序中的不同视图/窗格/页面？Web 应用程序是否始终只有一个 doGet()，并且仅在应用程序启动时调用一次，还是可以在用户导航时使用不同的参数重新调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T18:25:37.153

这个站点上有一些非常复杂的 UiApp 示例：[https ://sites.google.com/site/scriptsexamples](https://sites.google.com/site/scriptsexamples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:49:59.620

在 IO 2012 上，我们实际上宣布了 HtmlService，它可以让您构建更传统的 web 应用程序。UiApp 是我们现有的系统。您知道哪个更适合您的需求吗？

# android - 为 android 预建的 ffmpeg 库

> ID：11495578
> 
> 赞同：2
> 
> 时间：2012-07-15T21:00:17.903
> 
> 标签：android, stream, ffmpeg, udp, cygwin

很高兴来到这里。我对这个主题进行了很多研究，但现在我陷入了困境。

目前我尝试在 android 中接收 udp 流，我正在使用来自[http://code.google.com/p/javacv/downloads/list](http://code.google.com/p/javacv/downloads/list)的库，大部分工作正常。但是，如果我尝试使用“avformat_network_init();” （感谢[使用 FFMPEG 库接收 RTSP 流](https://stackoverflow.com/questions/10715170/receiving-rtsp-stream-using-ffmpeg-library)）我收到以下错误：

**未定义对“avformat_network_init”的引用**

我的猜测是名为“libavformat.so”的预建库不包含特定功能，对吗？如果是这样，有人知道我在哪里可以找到合适的图书馆吗？我正在 Windows 上开发，并且已经用 cygwin 自己构建它失败了，目前还没有安装 ubuntu 之类的选项。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T22:22:10.623

在互联网上进行了广泛搜索后，我放弃了寻找一个预建库并自己做了（我需要的所有选项）。自制解决方案通常也是最好的选择，如果起初认为它似乎不是更好的选择，我再次体验到它是更好的选择。

我所做的是使用来自以下网址的虚拟机（ubuntu）：[http](http://code.google.com/p/csipsimple/wiki/HowToBuild) ://code.google.com/p/csipsimple/wiki/HowToBuild 您已经下载了 ffmpeg，包括 libx264。还包括如何构建整个事物的说明。您可以编辑 build_ffmpeg.sh 并更改要启用或禁用的“功能”。最后，它是比寻找一个更清洁、更好、更快的解决方案。;)

无论如何祝你好运！

# c# - 将数据传递到 PartialView 逻辑

> ID：11495581
> 
> 赞同：0
> 
> 时间：2012-07-15T21:00:33.330
> 
> 标签：c#, asp.net-mvc-3, partial-views

我正在关注一本书中关于使用局部视图创建类别侧边菜单的教程。它一直很好，直到它具有显示当前选择的类别的功能。

出现问题是因为**似乎没有任何逻辑将当前选择的类别传递给局部视图。**

CSHTML 文件用于显示类别的布局

```
@{ 
    Html.RenderAction("Menu", "Nav"); 
  } 
```

如您所见，未传递所选类别 ID

如果您查看 NavController 菜单方法接受选择类别 ID

```
 public PartialViewResult Menu(int selCatID = -1)
    {
        ViewBag.SelectedCatID = selCatID;
        return PartialView(repository.Categories);

    } 
```

但是来自 layout.html 文件的调用似乎是在没有参数的情况下调用菜单，导致 selCatID 始终为 -1

这是菜单的视图

```
 @foreach (var cat in Model)
{
 @Html.RouteLink( cat.CategoryName , new {
controller = "Company", action="List"
       , catID=cat.ID, page= 1},
    new { @class = cat.ID == ViewBag.SelectedCatID ? "selected" : null }
)
} 
```

似乎没有任何可见代码显示从主控制器（公司）中选择的 CatID 被传递到 NavController 的视图中。

我认为主控制器应该为选定的 ID 设置 viewbag。我做了以下更改，它有效，但我不确定它是否是正确的技术。**我想知道我是否做得正确或者我错过了什么？**

在布局文件中传递一个参数：

```
Html.RenderAction("Menu", "Nav", new { selCatID = ViewBag.SelCatID }); 
```

在主实体控制器（CompanyController）中设置当前选中ID的viewbag

```
public class CompanyController : Controller
{
    .....
 public ViewResult List(int catID = -1, int page = 1)
      {
       CompaniesListViewModel viewModel = new CompaniesListViewModel
        {
         ...........
        };

        ViewBag.SelectedCatID = catID;
        return View(viewModel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:40:06.200

问题是这段代码

```
 Html.RenderAction("Menu", "Nav", new { selCatID = ViewBag.SelCatID }); 
```

我已经添加了参数，因为没有它传入一个空值并在第一次运行时崩溃。所以我把它改回了：Html.RenderAction("Menu", "Nav");

为了处理空值，我将参数更改为可为空的 int

```
 public PartialViewResult Menu(int? selCatID = -1)
    {
        ViewBag.SelectedCatID = selCatID; 
```

现在一切正常。

# python - 使用请求将数据发布到 html 表单

> ID：11495582
> 
> 赞同：0
> 
> 时间：2012-07-15T21:00:41.557
> 
> 标签：python, html, post, input, python-requests

我希望使用 python 将数据发布到网站表单。该网站是[http://up-to-no-good.appspot.com](http://up-to-no-good.appspot.com) 我知道我需要使用 post，但我不知道如何让它实际发布。我想发送的示例输入（使用请求模块）是：

```
map     : arena_lumberyard at: 0 x, 0 y, 0 z 
```

`players : 21 (33 max)`

`# userid name uniqueid connected ping loss state` `# 88 "gza" STEAM_0:0:31273869 30:33 70 0 active` `# 75 "MasterDovahBeard" STEAM_0:1:41046299 46:08 120 0 active` `# 101 "Gigs" STEAM_0:0:17483483 04:40 78 0 active`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:09:36.997

使用[机械化](http://wwwsearch.sourceforge.net/mechanize/)。该模块自动执行 Web 导航、表单、按钮等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:40:10.047

这是一个示例：[请求文档 - POST 请求](http://docs.python-requests.org/en/latest/user/quickstart/#more-complicated-post-requests)

您需要使用键/值数据创建一个字典并将其传递给`requests.post()`

```
POST_DATA = {'user_id': 88
            ,'name'   : "gza"
            # ...
            }
content = requests.post('http://example.com/', data=POST_DATA).content 
```

# arrays - 将一组值写入电子表格中的一系列单元格

> ID：11495588
> 
> 赞同：28
> 
> 时间：2012-07-15T21:01:57.100
> 
> 标签：arrays, google-apps-script, google-sheets

使用 Google Apps 脚本，有没有办法将 Google 电子表格数组中的值写入范围而无需循环？

我正在考虑类似以下的方法，将一个名称分别放入单元格中`A1:A3`

```
function demoWriteFromArray() {

   var employees=["Adam","Barb","Chris"];

   ssActive = SpreadsheetApp.getActiveSheet();

   rgMyRange = ssActive.getRange("A1:A3");

   rgMyRange.setValue(employees)
} 
```

上面的问题是执行后，`A1:A3`都包含`={"Adam","Barb","Chris"} and display "Adam"`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-19T20:05:00.317

Range.setValue() 用于在范围的每个单元格中设置相同的值，而[setValues](https://developers.google.com/apps-script/class_range#setValues)用于将值数组设置到范围内的相应单元格中。请注意，此方法需要一个多维数组，外部数组为行，内部数组为列。因此，在您的情况下，数据应如下所示：

```
var employees=[["Adam"],["Barb"],["Chris"]]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-12-23T17:37:13.827

最佳答案提供了一种将数组写入 ROW 的良好、紧凑的方式，但写入 COLUMN 有点困难，但由于这是这里的问题，这里有一个快速函数：

```
function addArrayToSheetColumn(sheet, column, values) {
  const range = [column, "1:", column, values.length].join("");
  const fn = function(v) {
    return [ v ];
  };
  sheet.getRange(range).setValues(values.map(fn));
} 
```

然后在代码中调用该函数的位置，如下所示：

```
const ss = SpreadsheetApp.getActiveSpreadsheet();
const cache = ss.getSheetByName("_cache_");
const results = ["Adam","Barb","Chris"];
addArrayToSheetColumn(cache, "A", results); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-26T00:40:02.300

尽管有点晚了，但有人可能会在某个时候遇到这个答案。我编写了一个将一维数组强制转换为二维数组（矩阵）的函数，这是预期的参数`Range.setValues()`：

```
// Morphs a 1-d array into a 2-d array for use with Range.setValues([][])
function morphIntoMatrix(array) {

  // Create a new array and set the first row of that array to be the original array
  // This is a sloppy workaround to "morphing" a 1-d array into a 2-d array
  var matrix = new Array();
  matrix[0] = array;

  // "Sanitize" the array by erasing null/"null" values with an empty string ""
  for (var i = 0; i < matrix.length; i ++) {
    for (var j = 0; j < matrix[i].length; j ++) {
      if (matrix[i][j] == null || matrix[i][j] == "null") {
        matrix[i][j] = "";
      }
    }
  }
  return matrix;
} 
```

我不能保证除了基本数据类型之外的任何值都会被保留。*清理*是必要的，因为 JavaScript 在内部似乎将原始 Array 中的空值替换为`null`或`"null"`当它被分配为另一个 Array 的元素时。至少，这是我的经验。它虽然有效，但有人可能会发现它很有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-17T14:43:26.183

我将脚本执行时间提高了 10 倍。它对我有用：

```
function xabo_api() { 
var sskey = 'KEY-CODE';
var doc = SpreadsheetApp.openById(sskey);    
var conn = Jdbc.getConnection("jdbc:mysql://HOST:PORT/DB", "USER", "PWD");
var stmt = conn.createStatement();

//stmt.setMaxRows(5000);

var rs = stmt.executeQuery("select * from xabo;");
var sheet = doc.setActiveSheet(doc.getSheetByName("xabo laboratories"));

//var cell = doc.getRange('A2');

var row = 0;
var data = [];

while (rs.next()) {
    var rowData = [];
    for (var col = 0; col < rs.getMetaData().getColumnCount(); col++) {
    rowData[col] = (rs.getString(col + 1));
}
data[row] = rowData;
row++;
}

 // My script writes from the second row, as first I use for headers only

 var range = sheet.getRange(2,1,row, col); // check edges or uses a1 notation
 range.setValues(data);

 //   This is what google api doc suggests: It takes 10x more row by row
 //   while (rs.next())
 //   {
 //       for (var col = 0; col < rs.getMetaData().getColumnCount(); col++){
 //         cell.offset(row, col).setValue(rs.getString(col + 1));
 //        }
 //     row++;
 //   } 

 rs.close();
 stmt.close();
 conn.close();
 } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-11-10T08:14:45.327

要包装数组元素以便将它们写入列，您还可以使用 **array.forEach()**

这个：

```
var employees=["Adam","Barb","Chris"];

employees.forEach((item,index,array) => array[index] = [item]); 
```

将对您的数组进行以下更改：

```
["Adam","Barb","Chris"]  -->  [["Adam"],["Barb"],["Chris"]] 
```

有关**forEach**的更多信息：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-06T23:20:24.123

我在为自己的应用程序研究答案时看到了这个问题。另一种解决方案是使用返回二维数组的[自定义函数](https://developers.google.com/apps-script/guides/sheets/functions)。

这是一个例子。假设“Adam, Barb, Chris; Aaron, Bill, Cindy”是 A1 中的文本。如果您在 B1 中引用自定义函数，则可以使用单独的名称填充 B1:D2 范围。

用 Apps 脚本编写的自定义函数：

```
function splitNames(names) {
  // you could do any other work necessary here
  var arr = names.split("; ");
  arr[0] = arr[0].split(", ");
  arr[1] = arr[1].split(", ");

  // output should be 2D array where each element of the
  // main array is a range spanning 1 or more columns and
  // one row and each sub array are cells within that range
  return arr;
} 
```

B1 中引用自定义函数的公式： `=splitNames(A1)`

请注意，如果与 B1 相邻的单元格不为空，则此函数将引发异常。这可以用`IFERROR`公式处理，也可以在自定义公式中尝试/捕获。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T17:48:56.690

```
var employeesRow = ["Adam","Barb","Chris"];    
var employeesCol = employeesRow.map(x => [x]); //where x is your item/element in the array
Logger.log(employeesCol); //expected result [["Adam"],["Barb"],["Chris"]] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-20T10:43:18.660

你可以使用推送

```
var employees=["Adam","Barb","Chris"];
var newarray = [[],[]] ;
newarray[0].push(employees) ;
ssActive = SpreadsheetApp.getActiveSheet();
rgMyRange = ssActive.getRange("A1:A3");
rgMyRange.setValues(newarray) 
```

请注意，您需要将 setValue 更改为 setValues

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-07-25T14:58:23.977

这里有四个功能：(1) 设置值的水平范围 (2) 设置值的垂直范围 (3) 设置值的区域 (4) 复制值的区域并粘贴。

```
function SetHorizontalRange() {
var Spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
var Sheet = Spreadsheet.getActiveSheet();
var row = 1; var numRows = 1;
var column = 1; var numColumns = 3; //("A1:C1")
var Range = Sheet.getRange(row, column, numRows, numColumns)
var values = [[["Adam"],["Barb"],["Chris"]]];

Range.setValues(values)
} 

//////////////////////////////////////////////////////////////////////////////ℱℳ
function SetVerticalRange() {
  var Spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var Sheet = Spreadsheet.getActiveSheet();
  var row = 1; var numRows = 3; 
  var column = 1; var numColumns = 1; //("A1:A3")
  var Range = Sheet.getRange(row, column, numRows, numColumns)
  var values = [["Adam"],["Barb"],["Chris"]];

  Range.setValues(values)
} 

//////////////////////////////////////////////////////////////////////////////ℱℳ
function SetArea(){
  var Spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var Sheet = Spreadsheet.getActiveSheet();
  var row = 1; var numRows = 3; 
  var column = 1; var numColumns = 3; //("A1:C3")
  var Range = Sheet.getRange(row, column, numRows, numColumns)
  var values = [[[["Adam"]], [["Barb"]], [["Chris"]]], [[["Barb"]], [["Chris"]], [["Adam"]]], [[["Chris"]], [["Adam"]], [["Barb"]]]];

  Range.setValues(values)
}

//////////////////////////////////////////////////////////////////////////////ℱℳ
function CopyPasteArea(){
  var Spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
  var Sheet = Spreadsheet.getActiveSheet();
  var row = 1;  var column = 1;
  var Range = Sheet.getRange(row, column);
  var values = new Array(3);
  for (var y = 0; y < 3; y++) {
    values[y] = new Array(3);
    for (var x = 0; x < 3; x++) {
      values[y][x] = Range.offset(x,y).getValues(); Logger.log(x+' '+y);      
    }
  }

  Sheet.getRange(4, 1, 3, 3).setValues(values); Logger.log(values)
  //https://developers.google.com/apps-script/best_practices
} 
```

# c++ - Winsock 重新定义错误

> ID：11495589
> 
> 赞同：10
> 
> 时间：2012-07-15T21:02:02.033
> 
> 标签：c++, windows, visual-studio-2010, winsock, redefinition

我正在用 Visual C++ 2010 编译一个项目，但我遇到了一些 Winsock 重新定义的问题。

首先我得到：

```
syntax error : identifier 'SOCKADDR_STORAGE' 
```

但是，如果我包含 winsock 或 winsock2 或 ws2tcpip 我会收到许多类似以下的错误：

```
error C2011: 'sockaddr' : 'struct' type redefinition 
error C2011: 'WSAData' : 'struct' type redefinition
error C2011: 'linger' : 'struct' type redefinition 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-15T21:10:36.363

你的问题是，通过包含`Windows.h`，你也已经包含了`winsock.h`。正是在这里，您的问题出现了，因为包括`winsock2.h`或`ws2tcpip.h`将尝试重新定义`winsock.h`

通过在包含`#define WIN32_LEAN_AND_MEAN`之前使用，您`Windows.h`可以阻止编译器包含许多附带的额外内容`Windows.h`

# javascript - 如何在“动画”方法中为“-webkit-transform”设置 css 值？

> ID：11495590
> 
> 赞同：2
> 
> 时间：2012-07-15T21:02:07.293
> 
> 标签：javascript, jquery, css, webkit

> **可能重复：**
> [动画元素变换旋转](https://stackoverflow.com/questions/5462275/animate-element-transform-rotate)

当我尝试使用 jquery 为页面中的图像旋转设置动画时，它无法理解元素的 css 属性“-webkit-transform”，出了什么问题？

javascript代码：

```
$("body").toggle(
function(){
    $("img").animate(
        {
        opacity:0.5,
        "-webkit-transform":"rotate(180deg)"
        },1000,function(){
            //some function
        }
    );
},
function(){
    $("img").animate(
        {
        opacity:1,
        webkitTransform:"rotate(-180deg)"
        },1000,function(){
            //some function
        }
    );

});

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:10:30.060

jQuery`animate`方法不识别`webkit`transform属性，可以使用支持该功能的jQuery插件，试试[`jQuery Transit`](http://www.ricostacruz.com/jquery.transit/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:43:01.997

有很多插件可以处理这个问题，但是如果你不想使用它们，你真的不需要使用它们。

`$.fx.step`将满足您的所有需求，并且非常有用且值得学习。

这是一个例子：

```
 $.fx.step.webkitRotate = function(fx){
      if(!fx.init){
          var currentRotation = fx.elem.style.webkitTransform;
          currentRotation = currentRotation.split('(')[1];
          currentRotation = currentRotation.split('deg)')[0];
          fx.begin = currentRotation;
          fx.init = true;
      }         
      fx.elem.style.webkitTransform = 'rotate('+fx.pos+'deg)';
 }; 
```

然后你可以：

```
 $("img").animate(
    {
    opacity:1,
    webkitRotate:-180
    },1000,function(){
        //some function
    }
); 
```

这是一个粗略的例子，需要改进，但希望你能明白。Useinf`$.fx.step`你可以设置自定义动画参数来为 dom 甚至变量的任何方面设置动画。您甚至可以使用它进行自定义计算以确定动画的下一步。例如：我最近`$.fx.step`在css3渐变上做自定义动画，目前没有插件。

如果您必须使用插件进行旋转，我建议：[http ://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

但是最终他的插件使用`$.fx.step`并且值得您自己学习。

# visual-c++ - 如何释放 CString 的动态数组？

> ID：11495592
> 
> 赞同：0
> 
> 时间：2012-07-15T21:02:11.217
> 
> 标签：visual-c++, memory-management, mfc

我的类中有一个动态数组，`CString`我在类`new`的构造函数中使用运算符来创建它，所以我在析构函数中写了一行来释放内存。它不会导致任何错误，但会导致运行时出现断点！错误是：Windows 在遗传算法.exe 中触发了一个断点。

这可能是由于堆损坏，这表明遗传算法.exe 或其已加载的任何 DLL 中存在错误。

这也可能是由于用户在遗传算法.exe 具有焦点时按 F12。

输出窗口可能有更多诊断信息。

代码是：

```
//in constructor
StringFormat = new CString[Info.VariablesCount + 1];
for (int i=0;i<=Info.VariablesCount;i++)
     StringFormat[i] = "%2.3f";`

// in destructor
free(StringFormat); 
```

注意它`StringFormat*`是类的私有成员，我在这个类中也有一些其他的动态数组，但是我可以用 free 方法轻松地释放它们，这个问题只是`CString`动态数组，所以我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:54:59.810

你用来`new[]`分配`CString`数组。您必须使用`delete[]`它来释放它 - 基本 C++ 内存规则。

在您的析构函数中使用：`delete[] StringFormat;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:14:12.747

除了使用删除字符串之外，`delete[] StringFormat`您还需要遵循三个规则

*   提供复制构造函数
*   提供赋值重载函数

检查[这个](http://www.learncpp.com/cpp-tutorial/911-the-copy-constructor-and-overloading-the-assignment-operator/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:51:50.417

您已使用`new`运算符分配内存，并尝试使用`free`. 两者都有不同的堆，除了一些不同的语义。你分配使用`new`，释放内存使用`delete`。同样，您分配 using`malloc`和释放相同 using `free`。你不能混合它们！

此外，正如其他人所提到的，如果您使用数组模式`new`（而不是缩放器`new`），则必须使用数组模式`delete`而不是标量`delete`（即`delete[]`，而不是`delete`）将其删除。

强烈建议您使用`vector`、`list`、或其他容器来拥有字符串数组，而不是自己管理它`CArray`。`CStringArray`

# ruby-on-rails - RSpec2 测试 HAML 助手

> ID：11495593
> 
> 赞同：0
> 
> 时间：2012-07-15T21:02:18.393
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, rspec2

我正在使用 HAML 助手来绘制菜单

```
module ApplicationHelper
  def draw_menu
    items = %w[
      item1
      item2
    ] # community

    capture_haml do
      haml_tag :nav, :class => "main-menu" do
        haml_tag :ul do
          items.each do |item|
            css_class = nil
            css_class = "first-item" unless item != items.first
            css_class = "last-item" unless item != items.last

            haml_tag :li, :class => css_class do
              haml_concat link_to t("nav.#{item}")
            end
          end
        end
      end

      haml_tag :div, :class => "clearize"
    end
  end
end 
```

我正在尝试测试它（我想匹配预期的输出`/<nav class='main-menu'>\s*<\/nav><div class='clearize'><\/div>/`）

我实际上做的是

```
require "spec_helper"

describe ApplicationHelper do

  before(:all) do
    init_haml_helpers
  end

  it "should draw a menu" do
    draw_menu().should_not be_empty
  end

end 
```

但它不断收到以下错误：

```
1) ApplicationHelper should draw a menu
   Failure/Error: draw_menu().should_not be_empty
   ActionController::RoutingError:
     No route matches {}
   # ./app/helpers/application_helper.rb:20:in `block (5 levels) in draw_menu'
   # ./app/helpers/application_helper.rb:19:in `block (4 levels) in draw_menu'
   # ./app/helpers/application_helper.rb:14:in `each'
   # ./app/helpers/application_helper.rb:14:in `block (3 levels) in draw_menu'
   # ./app/helpers/application_helper.rb:13:in `block (2 levels) in draw_menu'
   # ./app/helpers/application_helper.rb:12:in `block in draw_menu'
   # ./app/helpers/application_helper.rb:11:in `draw_menu'
   # ./spec/helpers/application_helper_spec.rb:10:in `block (2 levels) in <top (required)>' 
```

*为什么？* 我怎样才能让它按预期工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:46:22.487

如果您调用`link_to`仅传递一个字符串作为该参数，那么该字符串将用作链接文本。链接的目标只是由当前动作和控制器给出：（`url_for`底层助手）只是将您给出的参数与构成当前动作的参数合并。这就是为什么

```
link_to 'something', :action => :an_action 
```

生成一个链接到`an_action`控制器渲染视图的方法。

在辅助规范中，这个环境不存在：没有当前的动作或控制器，所以这不起作用

# html - 在 Express 中使用 HTML 而不是 Jade

> ID：11495595
> 
> 赞同：106
> 
> 时间：2012-07-15T21:02:27.707
> 
> 标签：html, node.js, express, pug

在 Node.JS 中使用 Express 时如何摆脱 Jade？我只想使用纯 html。在其他文章中，我看到人们推荐了 app.register()，它现在在最新版本中已被弃用。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-03-01T15:11:24.487

你可以这样做：

1.  安装ejs：

    ```
    npm install ejs 
    ```

2.  将 app.js 中的模板引擎设置为 ejs

    ```
    // app.js
    app.engine('html', require('ejs').renderFile);
    app.set('view engine', 'html'); 
    ```

3.  现在在您的路由文件中，您可以分配模板变量

    ```
    // ./routes/index.js
    exports.index = function(req, res){
    res.render('index', { title: 'ejs' });}; 
    ```

4.  然后你可以在 /views 目录中创建你的 html 视图。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-10-14T19:43:22.767

Jade 也接受 html 输入。
只需在行尾添加一个点即可开始提交纯 html。
如果这对您有用，请尝试：

```
doctype html              
html. // THAT DOT
    <body>     
        <div>Hello, yes this is dog</div>
    </body> 
```

PS - 无需关闭 HTML - 这是 Jade 自动完成的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-12-14T05:35:44.400

# 从快递 3 开始，您可以简单地使用[`response.sendFile`](http://expressjs.com/api.html#res.sendfile)

```
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});) 
```

来自[官方快递 api 参考](http://expressjs.com/api.html)：

> `res.sendfile(path, [options], [fn]])`
> 
> 在给定路径传输文件。
> 
> 根据文件名的扩展名自动默认 Content-Type 响应头字段。`fn(err)`当传输完成或发生错误时调用回调。

# 警告

`res.sendFile`通过 http 缓存头提供客户端缓存，但它不会在服务器端缓存文件内容。**上面的代码将在每个请求上命中磁盘**。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-05-23T16:27:55.627

在我看来，使用像 ejs 这样大的东西来读取 html 文件有点笨拙。我刚刚为非常简单的 html 文件编写了自己的模板引擎。该文件如下所示：

```
var fs = require('fs');
module.exports = function(path, options, fn){
    var cacheLocation = path + ':html';
    if(typeof module.exports.cache[cacheLocation] === "string"){
        return fn(null, module.exports.cache[cacheLocation]);
    }
    fs.readFile(path, 'utf8', function(err, data){
        if(err) { return fn(err); }
        return fn(null, module.exports.cache[cacheLocation] = data);
    });
}
module.exports.cache = {}; 
```

我调用了我的 htmlEngine，你使用它的方式很简单：

```
app.engine('html', require('./htmlEngine'));
app.set('view engine', 'html'); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-07-15T21:56:04.660

`app.register()`没有贬值，它刚刚被重命名为，`app.engine()`因为 Express 3[改变了模板引擎的处理方式](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)。

> Express 2.x 模板引擎兼容性需要以下模块导出：
> 
> ```
> exports.compile = function(templateString, options) {
>     return a Function;
> }; 
> ```
> 
> Express 3.x 模板引擎应导出以下内容：
> 
> ```
> exports.__express = function(filename, options, callback) {
>   callback(err, string);
> }; 
> ```
> 
> 如果模板引擎没有公开此方法，您也不会不走运，该`app.engine()`方法允许您将任何函数映射到扩展。假设你有一个 markdown 库并且想要渲染 .md 文件，但是这个库不支持 Express，你的`app.engine()`调用可能看起来像这样：
> 
> ```
> var markdown = require('some-markdown-library');
> var fs = require('fs');
> 
> app.engine('md', function(path, options, fn){
>   fs.readFile(path, 'utf8', function(err, str){
>     if (err) return fn(err);
>     str = markdown.parse(str).toString();
>     fn(null, str);
>   });
> }); 
> ```

如果您正在寻找一个可以让您使用“纯”HTML 的模板引擎，我推荐使用[doT](http://olado.github.com/doT/)，因为它[非常快](http://jsperf.com/dom-vs-innerhtml-based-templating/413)。

当然，请记住 Express 3 视图模型将视图缓存留给您（或您的模板引擎）。在生产环境中，您可能希望将视图缓存在内存中，这样您就不会在每个请求上都执行磁盘 I/O。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-30T16:41:43.920

您可以将 EJS 与 express 一起使用，哪些模板是 HTML 但支持变量。这是一个关于如何在 express 中使用 EJS 的好教程。

[http://robdodson.me/blog/2012/05/31/how-to-use-ejs-in-express/](http://robdodson.me/blog/2012/05/31/how-to-use-ejs-in-express/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-02-14T20:20:41.950

要使渲染引擎接受 html 而不是jade，您可以按照以下步骤操作；

1.  将[consolidate](https://github.com/tj/consolidate.js)和[swig](https://github.com/swig/swig)安装到您的目录中。

    ```
     npm install consolidate
     npm install swig 
    ```

2.  将以下行添加到您的 app.js 文件中

    ```
    var cons = require('consolidate');

    // view engine setup
    app.engine('html', cons.swig)
    app.set('views', path.join(__dirname, 'views'));
    app.set('view engine', ‘html'); 
    ```

3.  在“views”文件夹中添加您的视图模板作为 .html。重新启动节点服务器并在浏览器中启动应用程序。

虽然这将毫无问题地呈现 html，但我建议您通过学习来使用 JADE。Jade 是一个了不起的模板引擎，学习这将帮助您实现更好的设计和可扩展性。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-11-18T02:20:39.127

首先使用以下行检查模板引擎的兼容性版本

```
express -h 
```

那么您必须使用列表中的无视图。选择无视图

```
express --no-view myapp 
```

现在您可以使用公共文件夹中的所有 html、css、js 和图像。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-10-11T18:45:09.237

好吧，听起来您想提供静态文件。并且有一个页面 [http://expressjs.com/en/starter/static-files.html](http://expressjs.com/en/starter/static-files.html)

奇怪的是没有人链接到文档。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-03T19:37:53.840

由于 Jade 支持 HTML，如果你只想拥有 .html ext，你可以这样做

```
// app.js
app.engine('html', require('jade').renderFile);
app.set('view engine', 'html'); 
```

然后你只需将视图中的文件从玉更改为 html。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-07T12:37:56.450

您也可以直接将您的html文件包含到您的jade文件中

```
include ../../public/index.html 
```

原答案：[无玉快递发电机](https://stackoverflow.com/questions/30634054/express-generator-without-jade/44412756#44412756)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-26T01:06:36.930

考虑到您已经定义了路线或确实知道该怎么做。

```
app.get('*', function(req, res){
    res.sendfile('path/to/your/html/file.html');
}); 
```

注意：这条路线必须放在所有其他路线之后，因为 * 接受所有内容。

* * *

## 回答 #13

> 赞同：-10
> 
> 时间：2012-07-15T21:25:29.920

If you want to use **plain html** in nodeJS, without using jade.. or whatever:

```
var html = '<div>'
    + 'hello'
  + '</div>'; 
```

Personnaly i'm doing fine with that.

The advantage is simplicity when control. You can use some tricks, like `'<p>' + (name || '') + '</p>'`, ternary .. etc

If you want an indented code in the browser, you can do:

```
+ 'ok \
  my friend \
  sldkfjlsdkjf'; 
```

and use \t or \n at will. But i prefer without, plus it is faster.

# math - Haskell 中的数字域

> ID：11495601
> 
> 赞同：5
> 
> 时间：2012-07-15T21:03:27.763
> 
> 标签：math, haskell

由于 lambda 演算，Haskell 比许多语言更具数学性，但我认为域对于数字是不完整的：例如，我们有`Integer`and ，但没有or ， or作为域。这有时会使函数不安全，而编译器可能已经捕获了类型错误。例如：mod仅在运行时 输出。但我们可以有类似的东西；类似守卫、间隔或其他数据类型的东西……在游戏中，我希望我的角色在其生命中拥有一个正数。或者从 0 到 100，不下，不上。当他被击中时，我需要打电话给丑陋的人。甚至 C 也有和。`Float``Positive``Negative``[1..5]``5``0``*** Exception: divide by zero``mod :: Integral a => a -> a -> a``mod :: Integral a, a != 0 => a -> a -> a``positive x = if x > 0 then x else 0``signed``unsigned`

这是一个弱点还是他们没有“间隔”域的原因？有解决这个问题的包吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:12:36.280

听起来您正在寻找一种依赖类型的语言，例如 Agda、Idris 或 Coq。

你是对的，限制数字类型会很好，但你也需要考虑如何使用这些类型。假设您的类型`mod`排除了一个`0`值。现在你需要在你的程序中调用它。如果数字是文字，编译器可能“容易”确定它不是`0`并让您调用该函数，但如果数字是在运行时提供的，可能来自用户输入或一些复杂的过程怎么办？您需要某种方式向编译器解释您知道`0`当您将数字传递给`mod`. Haskell 并没有以任何简单的方式做到这一点的工具（有一些烦人的方式，比如将所有值反映到类型系统中），这就是你不这样做的原因

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T02:51:18.920

你可以自由地创建这样的类，但也许它们没有被包含在 Haskell 中的原因是人们找不到让它们**经常**有用的方法。

很明显，您希望对您的班级进行减法，但您也希望将其关闭。

可能是这样的？

```
NonNegative x - NonNegative y = NonNegative (max (x - y) 0) 
```

但随后身份`x - y + y == x`不成立。

人们为 Haskell 制作了替代的数字层次结构，例如['Numeric Prelude'](http://hackage.haskell.org/package/numeric-prelude)。Haskell 对自定义非常友好，你甚至可以用自己的定义替换 Prelude，但它们是否有用并且不会引起比它们解决的问题更多的问题是另一回事。

# php - PHP二叉树插入问题

> ID：11495604
> 
> 赞同：0
> 
> 时间：2012-07-15T21:03:49.320
> 
> 标签：php, binary-tree, abstract-data-type

我正在玩写一棵二叉树。目前它不会是完整的，或者它的每个级别都已满。我只是想让插入以最基本的形式工作（之后我会搞乱重新排序）。

**编码**

```
<?php

class Node {
    public $left = NULL;
    public $right = NULL;
    public $data = NULL;
}

class BinaryTree {
private $root = NULL;

public function insert($value, $node = false) {
    echo "VALUE: $value \n";
    if($node === false) {
        $node = $this->root;
    }

    if($node->data === NULL) {  // Always stuck here.
        $node->data = $value;
    } else {
        if($value <= $node->data) {
            $this->insert($value, $node->left);
        } else if($value >= $node->data) {
            $this->insert($value, $node->right);
        }
    }
}

}

$t = new BinaryTree();
$t->insert(7);
$t->insert(6);
$t->insert(1);

?> 
```

问题是，当我分配 $node->value 某些东西时，$node 对象似乎没有正确地传递到 insert() 函数中。因此，它永远不会通过根。

**编辑**

@Joost 指出我错过了几个步骤。这使我在 BinaryTree 课程中得到以下内容：

```
public function __construct() {
    $this->root = new Node();
}
public function insert($value, $node = false) {
    if($node === false) {
        $node = $this->root;
    }

    if($node->data === NULL) {
        $node->data = $value;
    } else {
        if($value <= $node->data) {
            if(get_class($node->left) != "Node") {
                $node->left = new Node();
            }
            $this->insert($value, $node->left);
        } else if($value >= $node->data) {
            if(get_class($node->right) != "Node") {
                $node->rght = new Node();
            }
            $this->insert($value, $node->right);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:08:12.947

它不起作用，因为您从未初始化根。您可以使用始终为空的根 (init it in `__construct`) 或在插入时直接将新节点分配给根（如果尚未设置根）。

实际上，这个问题适用于所有节点。您永远不会创建`Node`实例，也不会将节点设置为父节点的子节点。

# java - 如何测试示例 TCP Socket 程序

> ID：11495605
> 
> 赞同：1
> 
> 时间：2012-07-15T21:03:52.853
> 
> 标签：java, sockets, tcp

我有一个想要运行的示例 TCP 客户端和服务器应用程序，但我不确定如何运行它们。它说我需要在一台主机上编译客户端程序，在另一台主机上编译服务器应用程序，但是当我只有一台计算机时，我不知道该怎么做。我知道这很简单，但我需要一些帮助才能开始。

这是示例 TCP 服务器应用程序：

```
import java.io.*; 
import java.net.*;

class TCPServer {

public static void main(String argv[]) throws Exception 
{ 
  String clientSentence; 
  String capitalizedSentence;

  ServerSocket welcomeSocket = new ServerSocket(6790); 

  while(true) { 

               Socket connectionSocket = welcomeSocket.accept();

       BufferedReader inFromClient = 
         new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));

       DataOutputStream  outToClient = 
         new DataOutputStream(connectionSocket.getOutputStream());

       clientSentence = inFromClient.readLine();

       capitalizedSentence = clientSentence.toUpperCase() + '\n';

       outToClient.writeBytes(capitalizedSentence); 
    } 
} 
} 
```

这是示例 TCPClient 应用程序

```
import java.io.*; 
import java.net.*; 
class TCPClient {

    public static void main(String argv[]) throws Exception 
    { 
        String sentence; 
        String modifiedSentence;

        BufferedReader inFromUser = 
          new BufferedReader(new InputStreamReader(System.in));

        Socket clientSocket = new Socket("10.0.1.2", 6790);

        DataOutputStream outToServer = 
          new DataOutputStream(clientSocket.getOutputStream());

        BufferedReader inFromServer = 
          new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        sentence = inFromUser.readLine();

        outToServer.writeBytes(sentence + '\n');

        modifiedSentence = inFromServer.readLine();

        System.out.println("FROM SERVER: " + modifiedSentence);

        clientSocket.close(); 

    } 
} 
```

这里有事吗？

这正是我所做的

[![第1步](../Images/7a9f57bd2ce13ae0e6790cef650e375d.png)](https://i.stack.imgur.com/X8xGz.jpg)
[（来源：[skitch.com](https://img.skitch.com/20120715-dkwj4g28hkint1axtq4j79pm84.jpg)）]

[![第2步](../Images/d1074db3550909a75d03af456ceb1465.png)](https://i.stack.imgur.com/l3x2L.jpg)
[（来源：[skitch.com](https://img.skitch.com/20120715-q5a3du7hfh2eshwai37yhajymj.jpg)）]

这是我第一次使用 Eclipse，所以我可能在那里做错了什么。我通常使用 DrJava，但由于某种原因，这并不能让我同时运行两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:07:01.913

*几乎任何套接字程序都可以在同一*台计算机上运行两半。只需在一个窗口中运行服务器，在另一个窗口中运行客户端，并指定连接地址 127.0.0.1（即`localhost`您自己的计算机）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-27T14:32:29.450

对于使用此代码的任何人，我只是单步执行该程序并看到连接已成功建立（如果您更改为适当的 IP，例如“localhost”）。然而，TCPServer 和 TCPClient 都首先执行 readLine，因此它们都被卡在等待永远不会出现的输入。改变其中一个先写点东西。

# java - 为什么 java.io.FileDescriptor 的构造函数是公开的？

> ID：11495606
> 
> 赞同：5
> 
> 时间：2012-07-15T21:04:14.277
> 
> 标签：java

[java.io.FileDescriptor.FileDescriptor()](http://docs.oracle.com/javase/7/docs/api/java/io/FileDescriptor.html#FileDescriptor%28%29)的 JavaDoc说：

> 构造一个（无效的）FileDescriptor 对象。

如果构造函数没有目的，为什么它的访问级别没有声明为*package-private*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T01:02:51.893

此构造函数是公共的，因为它在`java.io`.

`new FileDescriptor()`在 JRE 7u4 Linux x86 中使用的类：

```
java.io.FileInputStream
java.io.FileOutputStream
java.io.RandomAccessFile

java.lang.UNIXProcess
java.net.AbstractPlainDatagramSocketImpl
java.net.AbstractPlainSocketImpl
java.net.ServerSocket

sun.net.sdp.SdpSupport
sun.nio.ch.FileChannelImpl
sun.nio.ch.FileDispatcherImpl
sun.nio.ch.IOUtil
sun.nio.ch.PipeImpl
sun.nio.ch.SctpServerChannelImpl
sun.nio.ch.ServerSocketChannelImpl
sun.nio.ch.UnixAsynchronousServerSocketChannelImpl
sun.nio.fs.UnixChannelFactory 
```

有一种`sun.misc.SharedSecrets`方法允许程序员将 a 的状态更改为`FileDescriptor`有效状态（此代码段可在 中找到`java.io.FileDescriptor`）：

```
 static {
        sun.misc.SharedSecrets.setJavaIOFileDescriptorAccess(
            new sun.misc.JavaIOFileDescriptorAccess() {
                public void set(FileDescriptor obj, int fd) {
                    obj.fd = fd;
                }

                public int get(FileDescriptor obj) {
                    return obj.fd;
                }

                public void setHandle(FileDescriptor obj, long handle) {
                    obj.handle = handle;
                }

                public long getHandle(FileDescriptor obj) {
                    return obj.handle;
                }
            }
        );
    } 
```

这意味着任何可以访问的代码`SharedSecrets`（即 JRE 本身）也可以创建自己的 valid `FileDescriptor`，因此应该被允许访问`FileDescriptor()`。但是，没有办法将构造函数的访问权限限制为仅限 JRE 类，因此它是公共的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-15T21:19:14.143

您的答案可以在类级别文档中找到：

@因为JDK1.0

这也是“为什么 Number 是抽象类而不是接口”、“Vector 为什么要同步？”等问题的答案。

那些旧的类可能有也可能没有@Deprecated 警告，但Java 在删除不推荐使用的功能方面确实很软。像这样的 Cruft 不断出现，因为这些类很有用，但内部 Java 升级过程往往不会删除不推荐使用的方法，而是保留它们，因为自最初的 Java 版本以来一直保持向后兼容性。

# c# - c#程序中sum没有输出

> ID：11495607
> 
> 赞同：-1
> 
> 时间：2012-07-15T21:04:32.453
> 
> 标签：c#

有人可以看看这段代码并帮助我确定为什么在退出 for 循环时我没有得到 sum 的输出吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

/*This program finds 100 3 digit numbers between 100 and 1000, prints the message: "Cha, Cha, Cha!" after every 10th number, and outputs the sum of the numbers */

namespace MikeVertreeseRandom
{
    class RandomNumbers    //using the random class for number generation 
    {
        static void Main(string[] args)
        {
            Random r = new Random();

            int number = 0; //r.Next() finds the next random # bet 100 and 1000

            int sum = 0;  //declaring the variable "numberTotal" for the sum 

            int i = 1;            //i is the index counter

            for (i = 1; i < 100; i++)  //the program will run through 100 iterations
            {
                number = r.Next(100, 1000);

                Console.WriteLine(number); //program prints the next random #

                sum += number; //need to keep a running sum of the numbers found

                if ((i % 10) == 0)    //every 10th iteration, do something
                {

                    Console.WriteLine("Cha, Cha, Cha!"); //prints this message every 10th number
               }
           }

           Console.WriteLine("The sum is: []", sum);
           Console.ReadLine();
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T21:08:52.927

你在做

```
Console.WriteLine("The sum is: []", sum); 
```

而是使用`{n}`，其中 n 是`Console.WriteLine`格式字符串之后的第 n 个参数，即

```
Console.WriteLine("The sum is: {0}", sum); 
```

有关格式字符串的更多信息，请参见[此处](http://www.dotnetperls.com/string-format)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:12:58.810

在[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)中，需要匹配的大括号（“{”和“}”）。

# android - android文本接收器问题

> ID：11495610
> 
> 赞同：0
> 
> 时间：2012-07-15T21:05:14.903
> 
> 标签：android, text

我在清单文件中创建了一个像这样（如下）的文本侦听器。我假设侦听器将始终在任何活动中启用（从而浪费电池）。

```
 <receiver 
      android:name="com.me.basic.SMSReceiverActivity"
      android:enabled="true">
      <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
    </receiver> 
```

但在我的应用程序中，有很多活动，其中只有一个需要开启文本收听。有没有我可以用来禁用和启用这个监听器的代码？

# ruby - Rubymotion：如何通过一个 addSubview 调用将 2 个子视图添加到一个视图中？

> ID：11495616
> 
> 赞同：0
> 
> 时间：2012-07-15T21:06:21.957
> 
> 标签：ruby, rubymotion

在这里，我创建了两个视图（栏和图标），我想打一个电话`@window.addSubview`来添加它们。

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame UIScreen.mainScreen.bounds
    @window.makeKeyAndVisible

    bar = UIView.alloc.initWithFrame [[0, 0], [320, 100]]

    icon= UIImageView.alloc.initWithFrame([[100,0], [100,100]])

    @window.addSubview bar   # I have two calls to addSubview
    @window.addSubview icon

  true
  end
end 
```

我想要这样的东西：

```
@window.addSubview bar, icon 
```

或者

```
@window.addSubview [bar,icon] 
```

我意识到差异是名义上的，但似乎应该有一种方法可以同时调用`addSubview`多个视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:51:16.983

我会说你只是乞求通过这样做在以后的日期绊倒自己和其他人，但如果你必须重新打开`UIView`并自己定义方法

```
class UIView
  def addSubviews *views
    views.flatten.each { |view| addSubview view }
  end
end 
```

这应该允许

```
@window.addSubviews [view_a, view_b]

# OR

@window.addSubviews view_a, view_b 
```

在这里尝试是一个完整的例子

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)

    @window = UIWindow.alloc.initWithFrame UIScreen.mainScreen.bounds
    @window.makeKeyAndVisible

    view_a = UIView.alloc.initWithFrame [[100, 100], [100, 100]]
    view_a.backgroundColor = UIColor.greenColor

    view_b = UIView.alloc.initWithFrame [[200, 200], [100, 100]]
    view_b.backgroundColor = UIColor.redColor

    @window.addSubviews [view_a, view_b]

    true
  end
end

class UIView
  def addSubviews *views
    views.flatten.each { |view| addSubview view }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:25:01.367

据我所知，没有一种方法可以做你想做的事。正常的红宝石方式是这样的：

```
[bar,icon].each do |view|
  @window.addSubview view
end 
```

甚至更短：

```
[bar, icon].each{|v| @window.addSubView(v) } 
```

# android - 创建了一个联系我们表格 - 我如何获得通过电子邮件发送给我的信息？

> ID：11495617
> 
> 赞同：0
> 
> 时间：2012-07-15T21:06:30.043
> 
> 标签：android, xml, android-edittext

我创建了一个联系我们的表格。我遵循了本教程：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-creating-forms/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-forms/)

虽然教程很短。所以我已经完成了所有工作，一旦用户点击提交按钮，它就会收集信息。

任何人都可以填写我的其余部分吗？如何获取发送到我的电子邮件地址的数据？

在此先感谢，非常感谢您的帮助！得到其他东西后有点烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:14:11.630

我不是 Android 开发人员，但原则适用于任何地方。

您需要使用连接到 SMTP 服务器的 SMTP 客户端来发送邮件。

查看此问答以了解如何执行此操作的示例：[使用 JavaMail API 在 Android 中发送电子邮件，而不使用默认/内置应用程序](https://stackoverflow.com/questions/2020088/sending-email-in-android-using-javamail-api-without-using-the-default-built-in-a)

# google-chrome - 你能从 chrome 开发工具中检查 webapp 的文件系统吗？

> ID：11495618
> 
> 赞同：17
> 
> 时间：2012-07-15T21:06:48.663
> 
> 标签：google-chrome, google-chrome-devtools

我正在使用 HTML5 的 Filesystem API 将一些文件写入临时文件系统的网站上工作。有什么方法可以使用 Chrome 开发人员工具来检查我编写的文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T02:59:17.830

如果您转到`chrome://flags`并启用“启用开发人员工具实验”，然后转到“开发工具”设置中的“实验”选项卡，可能会有一个名为“文件系统检查”的选项卡。不过，我还没有尝试过。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-08T17:13:23.530

文件系统检查[不再可用](https://groups.google.com/d/msg/google-chrome-developer-tools/kuD9RH1kQe8/0hCD26JQCwAJ)。
我找不到官方公告，但看起来这个文件系统 API 很快就会被 Chrome 弃用，因为[它从未被](http://lists.w3.org/Archives/Public/public-webapps/2014AprJun/0010.html)W3C 接受为标准，现在（2017 年 1 月，v.55）谷歌 Chrome 是唯一的网络浏览器使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T05:31:34.430

正如其他人在他们的博客中显示的那样，我花了很长时间搜索检查员。我正在使用 v.63，它不再存在。

但他们是另一种使用网络终端的方法。也许你可以这样做[http://www.htmlfivewow.com/demos/terminal/terminal.html](http://www.htmlfivewow.com/demos/terminal/terminal.html)

# java - .compareTo() 具有 2 个排序列

> ID：11495625
> 
> 赞同：2
> 
> 时间：2012-07-15T21:07:55.787
> 
> 标签：java, sorting, collections, comparable

我正在尝试在 Java 中为需要按两个不同列/变量排序的对象实现可比较的接口。我尝试了多种方法，这是迄今为止最好的一种：

```
public int compareTo(Object o) {
    Match m = (Match)o;
    int diff = m.matches - matches;
    if (diff == 0) {
        if (distance > m.distance) {
            return 1;
        } else if (distance < m.distance) {
            return -1;
        } else {
            return 0;
        }
    } else {
        return diff;
    }
} 
```

但它仍然失败

```
java.lang.IllegalArgumentException: Comparison method violates its general contract! 
```

任何想法我做错了什么？

旁注 1：如果 o 为 null 或属于不合适的类，则预期会出现 NPEs/ClassCastExceptions - 这不是这里的问题。

旁注 2：我知道 JDK 1.7 中排序算法的[变化](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#source)，但我真的不知道我在哪里违反了合同。所以关闭异常似乎是错误的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:33:15.293

由于您说`distance`的是双倍，因此您可能遇到与此处所述相同的问题：

[Java 错误：“比较方法违反了它的一般约定！”](https://stackoverflow.com/questions/9469308/java-error-comparison-method-violates-its-general-contract)

也许：

```
public int compareTo(Object o) {
    Match m = (Match)o;
    int diff = m.matches - matches;
    if (diff == 0) {
        return Double.compare(distance, m.distance);
    } else {
        return diff;
    }
} 
```

***但是***，理想情况下，您应该使用我在下面说明的内置比较方法。上面的代码是“需要的最小更改”的示例，说明了关键问题。

## **使用现有的比较方法**

此外，正如@fabian-barney 在他的回答中所说，您应该避免采用直接差异，而是使用内置的比较方法。所以你应该有类似的东西：

```
public int compareTo(Object o) {
    Match m = (Match) o;
    return m.matches == matches ? Double.compare(m.distance, distance) : Integer.compare(m.matches, matches);
} 
```

这样，`Double.compare`将为您处理 NaN 值。对于任何数字`x`（NaN 除外）`Double.compare(x, Double.NaN) == -1`都将返回 true（即，NaN 被认为大于任何其他数字）。

请注意，您可以使用`==`with `int`s 但它更复杂`double`因为`Double.NaN != Double.NaN`。然而，`new Double(Double.NaN).equals(Double.NaN)`确实如此。请参阅[为什么 Java 的 Double.compare(double, double) 以这种方式实现？](https://stackoverflow.com/questions/1726254/why-is-javas-double-comparedouble-double-implemented-the-way-it-is)进行愉快的讨论。

## **违约：**

要查看一个示例，说明如果您有 NaN，您的原始实现可能会违反合同，请参阅[Java compareTo 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)。我们有：

> 最后，实施者必须确保对于所有 z，x.compareTo(y)==0 意味着 sgn(x.compareTo(z)) == sgn(y.compareTo(z))。

所以想象你有`x = NaN`and `y = 5`，`z = 6`然后：

1.  `x.compareTo(y) == 0`（因为`NaN > 5`和`NaN < 5`是假的）
2.  `x.compareTo(z) == 0`（同理）
3.  `y.compareTo(z) == -1`(y < z)。

所以 2 和 3 (+ `sgn`) 不等于所要求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:51:27.543

不要返回`diff`in`compareTo(...)`方法。这不适用于所有值。例如，结果`Integer.MAX_VALUE - Integer.MIN_VALUE`是否定的。

将其重写为：

```
public int compareTo(Object o) {
    Match m = (Match) o;
    return m.matches == matches ? Double.compare(m.distance, distance) : Integer.compare(m.matches, matches);
} 
```

# c++ - 使用 freetype 测试字体文件

> ID：11495628
> 
> 赞同：1
> 
> 时间：2012-07-15T21:08:15.913
> 
> 标签：c++, fonts, sfml, freetype, fontforge

我有一个用softy（字体编辑器）制作的位图.FON字体，它似乎用fontforge打开得很好，我用它生成了bdf、otf、fnt和otb文件。字体看起来很像 profont，除了它是成比例的（不是等宽字体）。因此字形高度非常小（小于 15 像素），所以我不知道 ttf 是否可以正常工作......

SFML 无法显示其中任何一个，有什么建议吗？

代码：

```
sf::Font font;
font.loadFromFile("filename");
text.setFont(font); 
```

我查了一下，字体打开了。我对使用 fontforge 和 freetype 的字体一无所知，也不知道哪种格式更好或更有可能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:45:51.257

这实际上是不可能的。SFML 实际上要求字体具有 unicode 字符集，没有位图字体格式支持。

# python - 如何忽略金字塔中的重复斜线

> ID：11495634
> 
> 赞同：1
> 
> 时间：2012-07-15T21:09:20.847
> 
> 标签：python, url-routing, pyramid

我想确保以下两个 url 以相同的方式处理（有一个现有的客户端以这种方式发送请求）：

```
/resource
//resource 
```

不幸的是，我无法将两个 url 添加到同一条路由中，即使我尝试使用该`//resource`格式，url 匹配在这种情况下也无法正常工作。

有没有办法解决它，这样我就不必在 WSGI 前面的服务器中重写请求？

编辑：我确实找到了允许我访问 NewRequest 事件的pyramid.event，所以我想我可以重写路径，但是由于以各种方式获取路径的不同函数的数量，我不确定我应该怎么做在现有请求中重写它。

编辑2：似乎整个事件不再有相关信息`//resource`- 我查询的任何元素都没有显示它。一切都声称我得到了一个请求`/`。

编辑3：它似乎实际上与粘贴或介于两者之间的其他模块有关，而不是金字塔本身 - uwsgi 使用双斜杠传递原始 path_info 没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:17:03.270

```
import re

class RemoveDoubleSlashes(object):
    def __init__(self, application):
        self.application = application

    def __call__(self, environ, start_response):

        environ['PATH_INFO'] = re.sub('/+', '/', environ['PATH_INFO'])                                                                                                                      

        return self.application(environ, start_response) 
```

在你的主要结束时：

```
return RemoveDoubleSlashes(config.make_wsgi_app()) 
```

我不知道对每个请求进行正则表达式替换有多难，但如果你真的需要它，它会起作用。

*编辑*

请记住，这是一种在 PATH_INFO 到达金字塔之前对其进行编辑的方法。你不应该那样做。您应该创建有效的 url 并让错误的 url 失败。

它应该是一个快速修复，直到您找到一种方法来修复您的应用程序中错误创建的 url。这个中间件不是治愈方法，它只是一个补丁。检查所有 url 是否有重复的斜杠是没有意义的。

只需重新阅读您的问题，您就可以测试它是否以双斜杠而不是使用正则表达式开头。`replace('//', '/')`如果 PATH_INFO 以双斜杠开头，那么简单。

正则表达式只有你才会有类似“//fdf//3dfdf/”的东西才有意义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T11:03:54.447

这似乎是[这个问题](https://stackoverflow.com/questions/10939108/pyramid-replacing-double-forward-slash-in-url-matchdict)的副本，它有一个有用的答案。

WSGI 基本上不支持双斜线，因此 Pyramid 也不支持。

# php - 允许用户编辑和存储 HTML

> ID：11495637
> 
> 赞同：0
> 
> 时间：2012-07-15T21:09:56.627
> 
> 标签：php, html, sanitization

理想情况下，我希望允许用户像 tumblr 那样编辑 HTML，您可以在浏览器中编辑主题 HTML。您还可以完全控制。我听说过诸如 html-purifier 之类的工具。

除了“净化” HTML 之外，还应该采取哪些其他步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:23:48.000

几天前，我问了一个[类似的问题](https://stackoverflow.com/questions/11483638/disable-javascript-execution-on-specific-pages-html-php)，可能会对您有所帮助。

我会将所有用户生成的 HTML 存储在另一个域/子域中，以避免 cookie 被盗，并使您的 cookie 为 HttpOnly，这样它们就不能被 JavaScript 访问。您只能在没有子域的情况下在主域上设置 cookie（用于身份验证等）。此外，您可以使用 CSRF 令牌来避免自动滥用。

如果您想禁止有害代码/JavaScript，您必须过滤您的 HTML，如果这样做，您应该将所有允许的标签列入白名单，而不是将禁止的标签列入黑名单（因为 HTML5 附带了新标签，甚至还有特定于浏览器的标签） .

另一个挑战是过滤属性（事件属性如 onclick 允许执行 JavaScript）。

另一位用户也提醒我注意[内容安全策略](https://developer.mozilla.org/en/Introducing_Content_Security_Policy)，它是一个标头（但不幸的是只有少数浏览器支持）。

但这取决于您想给用户多少自由。

# c# - 对我自己的 c# 应用程序进行数字签名是否免费？

> ID：11495643
> 
> 赞同：5
> 
> 时间：2012-07-15T21:11:02.510
> 
> 标签：c#, .net, winforms, visual-studio-2010, digital-signature

我找到了[这篇](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/84bc2159-d646-4de5-9908-2e82a4239df1)关于如何签署 C# 应用程序的文章。

可以按照上面文章中的说明免费签署我自己的申请吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T21:17:08.247

当然-使用称为“自签名”的方法。通过签名，组织必须基本上以数字方式为您“担保”。他们的详细信息（数字证书）已经安装在大多数人的机器上，它们附带 Windows/Mac OSX/Linux/iOS 等。其中一些组织的例子是 Verisign、Thawte 等。

如果您自签名（使用您提供的链接中的说明），那么当您分发您的程序时，它仍然会被认为是不受信任的，因为您是在为自己担保——这真的没有意义......所以，通常使用自签名用于测试，或者您实际上已经控制了用户的计算基础设施（例如在公司内部网上，并且您正在开发“内部”软件 - 因为您还可以为“凭证”安装证书 -又名发行人）。

如果您希望一家公司为您提供担保，以便您的软件可以在任何用户的计算机上被信任......您需要为该特权付费 - 这是确保数字证书真正有用的必要进入障碍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:12:48.893

是的，它是免费的。每个人都可以签署自己的申请。该签名并不一定意味着什么，但它是免费的。

这样，消费者就可以知道两个应用程序或同一应用程序的两个版本来自同一实体。

# c++ - 关键字符的十进制表示

> ID：11495644
> 
> 赞同：0
> 
> 时间：2012-07-15T21:11:29.470
> 
> 标签：c++

我对 C++ 不熟悉，所以当我在寻找破解的源代码时，当它看起来像是简短的 -223 或

`foo = 0xde;// 222 unarfoo = ~(foo);// -223`

被翻译成字符“！” 当我运行这行代码时......

`cout << (char)(~(foo));// outputs "!"`

这显然不是 ascii 翻译，因为 ascii 不对字符使用负数，所以我猜这是 C 编译独有的东西，因为当我尝试将任何负 short/int 翻译成 java 上的字符时，我得到的是一个“？”。

谁能详细说明到底发生了什么以及为什么？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:16:23.193

0xde = 11011110b, ~(0xde) = 00100001b = 0x21 十六进制，在 ASCII 表中代表！

所以 C++ 中的 ~ 运算符是按位否定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T21:19:55.037

正在发生的是处理器如何处理二进制补码运算和负数。情况是它们是相同的：因为字符几乎每次都是 8 字节，所以你得到的是：

富 = 222; unarfoo = ~foo = -(255 - foo) = - (255 - 222) = -233

所以本质上它只是将 char 解释为有符号或无符号的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:19:02.850

Java 对字符使用 UNICODE（64 位值），因此当您尝试使用 -233 时，它最终会出现在 UNICODE 表顶部附近的某个位置，并且很可能无法在您的系统上表示。

您在 C 中看到的程序使用的`char`是 8 位宽的数据类型。所以 ~(-233) 与 33 （或`!`字符）几乎相同（按位）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T21:19:07.497

`foo`是 0xde 或 0x000000de；

`~foo`是 0xffffff21；

`(char)~foo`是 0x21（感叹号）

# objective-c - 为什么在 iOS 的 FB SSO 中看不到注销按钮？

> ID：11495645
> 
> 赞同：0
> 
> 时间：2012-07-15T21:11:36.380
> 
> 标签：objective-c, facebook, ios5

我对 iOS 应用程序开发真的很陌生。我现在正在将 FB 集成到我的应用程序中。我按照 fb_developer (https://developers.facebook.com/docs/mobile/ios/build/) 的教程进行操作。

这是我的应用程序 delegate.m 中的代码。我想知道为什么我在屏幕上看不到注销按钮，也无法注销。

```
#import "FBtestAppDelegate.h"
#import "FBtestViewController.h"

@implementation FBtestAppDelegate

@synthesize window = _window;
@synthesize viewController=_viewController;
@synthesize facebook;

- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Add the logout button
UIButton *logoutButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
logoutButton.frame = CGRectMake(40, 40, 200, 40);
[logoutButton setTitle:@"Log Out" forState:UIControlStateNormal];
[logoutButton addTarget:self action:@selector(logoutButtonClicked)
       forControlEvents:UIControlEventTouchUpInside];
[self.viewController.view addSubview:logoutButton];

// Override point for customization after application launch.
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];

facebook = [[Facebook alloc] initWithAppId: @"400478970009544"
                               andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"]
    && [defaults objectForKey:@"FBExpirationDateKey"]){
    facebook.accessToken = [defaults objectForKey:@"FBAcccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

// This part, the authorize method will bring you to the authorization page                              
if (![facebook isSessionValid])
    {
        [facebook authorize:nil];
    }

return YES;
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
return [facebook handleOpenURL:url]; 
}

// Save the user credential, specifically the access token and the expiration date to the     user defaults
- (void)fbDidLogin {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAcessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize]; 
```

}

// 按下注销按钮时调用的方法

```
- (void) fbDidLogout {
// Remove saved authorization information if it exists
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"]) {
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:19:53.647

您的应用程序不是唯一在设备上使用 FB 的应用程序...可能还有其他几个应用程序使用 FB 信息...如果您想在您的应用程序中从 FB 注销，则只需从用户默认值中删除访问令牌（因为它发生在代码中的 fbDidLogout 方法中）......

# php - 我什么时候需要使用存储在数据库中的访问令牌？

> ID：11495646
> 
> 赞同：4
> 
> 时间：2012-07-15T21:11:53.953
> 
> 标签：php, facebook, facebook-php-sdk, access-token

我什么时候需要使用存储在我的数据库中的访问令牌？

*   此访问令牌是用户访问令牌。
*   似乎 PHP SDK 在自己获取访问令牌方面做得很好。虽然这看起来像是通过 Session 处理的。
    -- 如果 Session 以某种方式被擦除了怎么办？
    -- 我应该提供一个链接吗？
    - 或者我应该/我可以以某种方式自动化吗？
*   我是 Facebook 的 Open Graph API 的新手。
*   我正在使用 Facebook PHP SDK。

我也对 Facebook 上的文档和实现 PHP SDK 感到有些困惑。在花了相当多的时间混合和调整两者之后，我意识到文档中的几乎所有示例都是 PHP SDK 的一部分。因此我的上述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:26:00.633

没有真正的理由需要将用户存储`access_token`在数据库中。下次你来使用它的机会是 - 它已经无效了。根据我的经验，它们只持续一两个小时。官方文档指出：

> 当您从 Facebook 获得访问令牌时，它将立即生效，并可在 Facebook 定义的一段时间内用于对 API 的请求。这段时间过去后，访问令牌被视为已过期，用户将需要再次进行身份验证，以便您的应用程序获得新的访问令牌。给定访问令牌的有效期取决于它的生成方式。

没有关于（正常）令牌可以有效多长时间的具体时间段，因此没有理由存储它。如果您想使用 API 获得所有交易的详尽日志，您*可以*将令牌存储为参考 - 但 IMO 太过分了......

存储令牌的唯一原因是您正在处理扩展的 access_tokens。如果您正在研究该领域，我可以推荐这篇文章 - “ [http://facebook.stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation](http://facebook.stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation) ”。这*似乎*是处理扩展 access_token 有效性的最全面的帖子。如果您想在用户不一定连接到您的应用程序时代表用户调用 Graph API（或为此根本登录 Facebook -**不知道我是否就这样……**）

# ios - animateWithDuration 基于完全不相关的代码行做动画

> ID：11495647
> 
> 赞同：0
> 
> 时间：2012-07-15T21:12:02.840
> 
> 标签：ios, animation, uigesturerecognizer

今天 animateWithDuration 表现得非常愚蠢，我不知道为什么。我检查了所有的东西，所有的括号，一切都很完美，但它总是显示我没有指定为动画的代码行。

好的，这就是重点。我有一个 longPressGestureRecognizer。在 longPress 开始后，它位于一些正在拖动的 UIImageView 上。当它在某个特殊区域结束时，我想开始动画，将 UIImageView 带到其他地方并完成它。这是我的代码：

```
if ([(UILongPressGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {
    CGPoint dropPoint = CGPointMake(self.center.x, self.center.y-5);
    for (UIView * placeForCharacter in delegate.subviews) {
        if ([placeForCharacter isKindOfClass:[PlaceForCharacterCircle class]]) {
            PlaceForCharacterCircle * newPlaceForCharacter = (PlaceForCharacterCircle *) placeForCharacter;
            if (CGRectContainsPoint(newPlaceForCharacter.dropZone, dropPoint)) {
                    UIViewAnimationOptions options = 0;
                    [UIView animateWithDuration:0.2 delay:0.0 options:0 animations:^{
                        self.frame = CGRectMake(newPlaceForCharacter.frame.origin.x-8, newPlaceForCharacter.frame.origin.y-5, 40, 55);
                        self.alpha = 0.5;
                    } 
                    completion:^(BOOL finished){
                        NSLog(@"animation completed");
                        self.alpha=1;
                        //code referring to the finalizing of moving, doesn't matter here
                        return;
                    }];
            } else {
                if (CGRectContainsPoint(newPlaceForCharacter.dropZone, dropPoint)) {
                    //code referring to the moving to the other place in case the UIImageView was dropped on another zone that is full already, doesn't matter here
                    return;
                }
            }
        }
    }
        //code referring to the comeback of a UIImageView in case it was dropped somewhere else, doesn't matter here
        //These two are the lines that get executed when the animation starts
        //THEY BEGIN
        translatedPoint = CGPointMake(initialX, initialY);
        [[sender view] setCenter:translatedPoint];
        //THEY END
        return;
} 
```

情况是由于某种奇怪的原因，上面的两行代码得到了动画，而不是指定的真实动画。我通过在这些代码行上添加注释来仔细检查它——在这种情况下，动画效果很好。

有人可以帮我解决这个问题，为什么会这样？这似乎是一种非常奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:31:46.337

如果您将`return;`完成块（它不做任何事情）移动到动画设置之后，它应该可以工作。

```
[UIView animateWithDuration:0.2 delay:0.0 options:0 animations:^{
    self.frame = CGRectMake(newPlaceForCharacter.frame.origin.x-8, newPlaceForCharacter.frame.origin.y-5, 40, 55);
    self.alpha = 0.5;
}
completion:^{
    NSLog(@"animation completed");
    self.alpha=1;
    //code referring to the finalizing of moving, doesn't matter here
}];
return; 
```

# json - 从 json 获得响应但肥皂零记录

> ID：11495650
> 
> 赞同：1
> 
> 时间：2012-07-15T21:12:41.387
> 
> 标签：json, api, soap

我正在使用 api 来获取数据，但是当我使用 json 时，我使用以下代码获取数据

```
string apiKey = Connection.AppSettings("APIKey");
        string fullURL = "http://api.hotelspro.com/4.1_test/hotel/b2bHotelJSON.php?method=getAvailableHotel&apiKey=" + apiKey + "&destinationId=LD6J&checkIn=2012-07-20&checkOut=2012-07-24&currency=EUR&clientNationality=UK&onRequest=false&rooms[0][0][paxType]=Adult&rooms[0][1][paxType]=Adult&rooms[0][2][paxType]=Child&rooms[0][2][age]=6&rooms[1][0][paxType]=Adult&rooms[1][1][paxType]=Adult&rooms[1][2][paxType]=Child&rooms[1][2][age]=8&filters[0][filterType]=hotelStar&filters[0][filterValue]=3&filters[1][filterType]=resultLimit&filters[1][filterValue]=10";

        string text;
        try
        {
            HttpWebRequest request = WebRequest.Create(fullURL) as HttpWebRequest;
            request.Method = "Get";
            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                if (response.StatusCode != HttpStatusCode.OK)
                    throw new Exception(String.Format(
                    "Server error (HTTP {0}: {1}).",
                    response.StatusCode,
                    response.StatusDescription));
                using (var sr = new StreamReader(response.GetResponseStream()))
                {
                    text = sr.ReadToEnd();
                }
                 Response.Write(text);

            }
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        } 
```

但是当我在这段代码下面使用相同的东西和肥皂时，它显示零记录。

这是soap wsdl 的代码。

```
b2bHotelSOAPService objsoap = new b2bHotelSOAPService();
        objsoap.Timeout = 20000;
        objsoap.Url = "http://api.hotelspro.com/4.1_test/hotel/b2bHotelSOAP.php";

        string destinationId = "CIEC";
        DateTime checkIn = new DateTime(2012, 7, 20);
        DateTime checkOut = new DateTime(2012, 7, 24);
        string strCurrencyCode = "EUR";

        pax[][] rooms = new pax[3][];
        rooms[0] = new pax[3];
        rooms[0][0] = new pax();
        rooms[0][1] = new pax();
        rooms[0][2] = new pax();

        rooms[1] = new pax[3];
        rooms[1][0] = new pax();
        rooms[1][1] = new pax();
        rooms[1][2] = new pax();

        rooms[0][0].paxType = "Adult";
        rooms[0][1].paxType = "Adult";
        rooms[0][2].paxType = "Child";
        rooms[0][2].age = "6";

        rooms[1][0].paxType = "Adult";
        rooms[1][1].paxType = "Adult";
        rooms[1][2].paxType = "Child";
        rooms[1][2].age = "8";

        filter[] f = new filter[2];
        f[0] = new filter();
        f[0].filterType = "hotelStar";
        f[0].filterValue = "3";

        f[1] = new filter();
        f[1].filterType = "resultLimit";
        f[1].filterValue = "20";

        getAvailableHotelResponse getres = new getAvailableHotelResponse();

        getres = objsoap.getAvailableHotel(apiKey, destinationId, checkIn, checkOut, strCurrencyCode, "UK", false, rooms, f); 
```

这里得到显示零记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:03:17.240

感谢hotelsPro.com 支持团队。最后我得到了他们的答复，我在这个肥皂请求中制作了三个房间，但只发送两个房间的数据。

所以我需要改变这条线

```
pax[][] rooms = new pax[3][]; 
```

进入

```
pax[][] rooms = new pax[2][]; 
```

现在我也得到了肥皂的回应。再次感谢hotelsPro.com 支持团队。

# android-listview - 在选项卡更改/滑动时刷新 ListView (Android)

> ID：11495658
> 
> 赞同：0
> 
> 时间：2012-07-15T21:13:38.697
> 
> 标签：android-listview, android-fragments, adapter, .refresh

我在 FragmentActivitiy 下都有一个 Fragment 和一个 ListFragment。当我在 Fragment 中，并且想滑动到 ListFragment 时，如何让 ListView 更新？

基本上，我在片段中有一个插入按钮/EditText，用户将插入新信息。我想滑动到 ListFragment，然后动态查看该新信息。让它刷新的唯一方法是退出父活动并再次进入。

我看到有 onTabSelected 或 onTabReselected 方法，不确定这是不是你做的？

它会涉及典型的代码“Adapter.notifyDataSetChanged()”吗？

编辑：我在想也许我只需要看看你如何更新片段视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:47:27.697

想我回答了我自己的问题：

我有这个代码

```
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

} 
```

# javascript - 如何截取用户浏览器？

> ID：11495660
> 
> 赞同：0
> 
> 时间：2012-07-15T21:13:59.323
> 
> 标签：javascript, html, actionscript-3, flash, screenshot

> **可能重复：**
> [使用 javascript 截取网页的屏幕截图？](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)

我希望以最简单的方式截取用户浏览器并将其上传到服务器。

有人告诉我，透明的 Flash 电影可以截取页面，但在其他地方听到相反的情况。

这可以通过 java-applet 实现吗？

关于如何做到这一点的任何建议都会很棒。

# html - 将文本与 DIV 水平对齐

> ID：11495669
> 
> 赞同：1
> 
> 时间：2012-07-15T21:15:14.523
> 
> 标签：html, css

Stackoverflow 上有一些关于使用 CSS（div）水平对齐元素的问题。通常，这是使用浮点数或`display: inline-block`.

但是，我有一个非常简单的要求，我很难使用这些技术中的任何一种来让它完美地工作。我只是想将一行文本与 DIV 元素水平对齐。

所以，基本上，有3种方法可以做到这一点：

**方法1（使用`display: inline-block`）**

```
<div style = "display: inline-block;">Foo</div>
<div style = "display: inline-block; padding-left: 19px">
    <div style = "border: 1px solid #000000; height: 1em; width: 100px"></div>
</div> 
```

**方法2（使用`float`）**

```
<div style = "width: 150px">
    <div style = "float:left">Foo</div>
    <div style = "float:right">
        <div style = "border: 1px solid #000000; height: 1em; width: 100px"></div>
    </div>
</div> 
```

**方法3**使用..（请不​​要杀了我）a `<table>`：

```
<table style = "width: 150px" cellpadding = "0" cellspacing = "0" border = "0">
    <tr>
        <td style = "width: 40px">
            Foo
        </td>
        <td>
            <div style = "border: 1px solid #000000; height: 1em; width: 100px"></div>
        </td>
    </tr>
</table> 
```

这三个方法在 Firefox 上呈现如下：

![在此处输入图像描述](../Images/84874403af8989557ee2e867440a7d8f.png)

好的，首先，方法 1 ( `inline-block`) 的问题是文本没有与 DIV 元素垂直对齐（居中），这看起来很尴尬。相反，DIV 的底部边框与文本的底部对齐。我尝试调整填充和边距来解决这个问题，但它没有帮助。

方法 2 ( `float`s) 看起来不错，但是方法 2 的问题是如果文本更改为更长的内容会发生什么？好...

![在此处输入图像描述](../Images/cad0f3ed42bc20816a43b7c350990dbc.png)

所以使用浮点数的问题是，如果文本变长，DIV 元素会被击倒到下一行。所以这是不能接受的。请注意，方法 1 ( `inline-block`) 没有此问题。

满足所有要求的唯一方法是使用 a 的方法`<table>`，但我不想使用它，因为......好吧，[原因](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)。

那么，这里最好的解决方案是什么。如何仅使用带有 CSS 的 DIV 来获得与使用 ? 的方法 3 相同的结果`<table>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:25:19.607

添加`line-height:1em; vertical-align:top;`到包含方法 1 的 div 的文本中似乎可以解决这个问题（其中 line-height 是带边框的 div 的高度）。

`inline-block`由于早期版本的 IE`float`的不可预测性，我自己更喜欢。`float`也很难防止`float`溢出到下一行，因为这就是它的设计目的，真的！

# cakephp - 如何在 CakePHP 中正确存储超过 24 小时的时间？

> ID：11495674
> 
> 赞同：1
> 
> 时间：2012-07-15T21:15:37.340
> 
> 标签：cakephp, time, model, cakephp-2.0

我想用 CakePHP 存储一段时间（20 分钟、3 小时、76 小时和 20 分钟......）。这样做的适当方法是什么？
如果我使用 MySQL 的`TIME`格式，它不一定是数据库交叉兼容的，而且 Cake 预计它是一天中的某个时间，采用 am/pm 或 24 小时格式。

唯一的选择是在几秒钟内将其存储为 int 并自己处理数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:12:41.847

[strtotime()](http://php.net/manual/en/function.strtotime.php)方法可以帮助您将时间以 UNIX 时间戳格式存储到数据库中。[您可以稍后使用mktime()](http://in2.php.net/manual/en/function.mktime.php)方法轻松使用它。

# python - Tkinter 纵横比

> ID：11495675
> 
> 赞同：1
> 
> 时间：2012-07-15T21:15:45.033
> 
> 标签：python, tkinter, aspect-ratio

如何保持 Tkinter 窗口的纵横比固定？我希望我的窗户保持方形，无论它有多大。aspect 方法看起来很有希望，但是当我尝试以下代码时，什么也没发生。

```
win = Toplevel(master)
win.grid()
win.aspect(1,1,1,1) 
```

每当我调整窗口大小时，仍然可以更改方面。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:28:03.543

试图在主窗口上使用它？IE

```
from Tkinter import *
w = Tk()
w.aspect(1,1,1,1)
w.mainloop() 
```

运行 Python 2.7.1 对我来说就像一个魅力。

# c# - 我可以以编程方式更改我发送的电子邮件中的字体和字体大小吗？

> ID：11495681
> 
> 赞同：2
> 
> 时间：2012-07-15T21:18:21.370
> 
> 标签：c#, wpf, fonts, smtp, gmail

我正在使用这样的代码发送电子邮件：

```
var smtp = new SmtpClient
     {
       Host = "smtp.gmail.com",
       Port = 587, //465?
       EnableSsl = true,
       DeliveryMethod = SmtpDeliveryMethod.Network,
       UseDefaultCredentials = false,
       Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
     };
using (var message = new MailMessage(fromAddress, toAddress)
     {
       Subject = subject,
       Body = body
     })
{
  smtp.Send(message);
} 
```

...而且它的工作原理很花哨。不过，现在我希望能够控制所使用字体的大小和样式（例如 Western 12）。

## 更新

虽然我仍然想使用更好看的字体（例如 Western），但我的主要问题是正文中有我称之为“框”的字符（即方形字符）。我发现以下内容纠正了这个困境：

```
body = body.Replace("�", ""); 
```

（尽管在记事本和 VS 编辑器中，它看起来不像一个盒子，而是像一个孤立的问号或类似的东西） - 事实上，在我的问题的格式化版本中，它看起来也是如此。在问题编辑器（术语？）中，它看起来像正方形/框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:24:28.077

您可以将 MailMessage 作为 HTML 发送，在这种情况下，您将获得 HTML 与 CSS 的所有格式化优势

但是，如果您想保留发送文本和 html 副本的选择，请使用[MailMessage.AlternateViews](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.alternateviews.aspx)

> **取自 MSDN ：**还使用 AlternateViews 属性以不同格式指定电子邮件消息的副本。例如，如果您以 HTML 格式发送消息，您可能还希望提供纯文本版本，以防某些收件人使用无法显示 HTML 内容的电子邮件阅读器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:22:35.800

尝试：

```
var message = new MailMessage(fromAddress, toAddress)
{
   Subject = subject,
   IsBodyHtml = true,
   Body = "<strong>" + body + "</strong>"
} 
```

你会明白的。

# python - SQLAlchemy 一对一关系

> ID：11495684
> 
> 赞同：1
> 
> 时间：2012-07-15T21:18:53.507
> 
> 标签：python, orm, sqlalchemy

我有一`File`堂课：

```
class File(DeclarativeBase):
    __tablename__ = 'files'

    id        = Column(Integer, primary_key=True)
    name      = Column(String)
    mime_type = Column(String)
    data      = Column(LargeBinary) 
```

我用于在我的应用程序中存储附件。我也有一`Note`堂课：

```
class Note(DeclarativeBase):
    __tablename__ = 'notes'

    id   = Column(Integer, primary_key=True)
    note = Column(String)
    fid  = Column(Integer, ForeignKey('files.id'))

    file = relationship('File', uselist=False, cascade="all, delete-orphan") 
```

如果用户没有附加文件，`fid`可以在哪里。`NULL`除了`Note`其他类之外，还使用`fid`列来处理附件。

但是，我想知道如何使笔记的创建更加优雅。具体来说，我希望能够做类似的事情`Note(note=note_text,file=File(...))`并让 SQLAlchemy 负责将新条目插入`files`. 同样，`Note`对于现有的.`n.file = File(...)``n.file = None``files`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:41:30.787

SQLAlchemy will persist all your `Note` and `File` objects in database session, assigning foreign keys appropriately during `Session.flush`. There isn't anything else you need to do besides defining the `relationship`s correctly (which, as I can see, you have already done).

# objective-c - 如果语句不能正常工作

> ID：11495687
> 
> 赞同：0
> 
> 时间：2012-07-15T21:19:11.557
> 
> 标签：objective-c, cocoa, if-statement, timer, nstimer

每当“_currentField”（这是一个带有数字格式化程序的文本字段）的值大于或等于 1000 时，我希望“_congrats”（这是一个面板）显示出来，当它小于 1000 时，我想要“_errormsg”（另一个面板）显示。每次我输入任何值时，唯一弹出的是“_errormsg”。我究竟做错了什么？

```
- (void)onTimer:(NSTimer*)aTimer {

    if ([_currentField.stringValue integerValue] >= 1000)

    {
        [_congrats orderFront:(id)self];
        [_progIndicator stopAnimation:(id)self];
    } 

    else { 
        [_errormsg orderFront:(id)self];
        [_progIndicator stopAnimation:(id)self];

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:41:55.390

由于您使用的是格式化程序，因此您需要让格式化程序解析该值。

（继承自）的`formatter`方法返回格式化程序对象。的方法返回适当的数值。`NSCell``NSTextFieldCell``numberFromString:``NSNumberFormatter`

在这种情况下，将文本字段的*字符串*值传递给格式化程序`numberFromString:`，您应该会看到像`1,000`变成`1000`（作为整数）这样的东西。

# java - 如何在不破坏 Java 的情况下重置 While 循环？

> ID：11495689
> 
> 赞同：0
> 
> 时间：2012-07-15T21:19:29.293
> 
> 标签：java, validation, while-loop

我是 Java 初学者，我正在尝试使用 JOptionPanes 输入我的变量。在尝试验证我的输入变量时，我将输入语句放在这个 while 循环中。

```
while (input==false)
{
    inputNumberCoeffa=JOptionPane.showInputDialog("Enter co-efficient of X: ");
    inputNumberConsta=JOptionPane.showInputDialog("Enter Constant Number: ");
    inputNumberPowa=JOptionPane.showInputDialog("Enter Power Bracket should be raised to:");
    if (inputNumberCoeffa==null
        || inputNumberConsta==null
        || inputNumberPowa==null
        ||inputNumberCoeffa.isEmpty()
        || inputNumberConsta.isEmpty()
        || inputNumberPowa.isEmpty()
        || inputNumberCoeffa.matches("[A-Za-z]*")
        || inputNumberConsta.matches("[A-Za-z]*")
        || inputNumberPowa.matches("[A-Za-z]*"))
    {
        JOptionPane.showMessageDialog(null,"Please Enter a Number");        
    }
    else 
    {
        input=true;
    }
    double inputNumberCoeff=Double.parseDouble(inputNumberCoeffa);
    double inputNumberConst=Double.parseDouble(inputNumberConsta);
    double inputNumberPow=Double.parseDouble(inputNumberPowa);
} 
```

这个 while 循环是为了保护底部的 parseDouble 语句免受不良数据的影响。但是，要显示错误消息，您必须在每个数据点中输入。我可以在每个数据入口点周围放置一个 While 循环，但我想知道是否有更有效的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:35:06.390

看看[对话框教程](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

您可以做的事情是创建一个验证输入和实现的类，[`KeyListener`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyListener.html)然后创建`JOptionPane`s 并调用`addKeyListener()`并将其传递给您的侦听器。因此，当用户在您的 JOptionPane 中键入内容时，您可以过滤正在键入的内容（并将属性设置为“0”或其他内容，如果他们`Enter`没有键入任何内容就点击）。如果您需要处理其他事件，还可以添加其他侦听器（另请参阅：[PropertyChangeListener ）。](http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyChangeListener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:27:04.317

创建一个返回 double 并包含 while 循环以及所有必需的检查以及 parse double 语句的方法，并使用它来设置您的 inputNumberXXX 变量。通过这种方式，您不必复制和粘贴代码三次，因为您只需调用相同方法的三次。

# internationalization - Playframework i18 日期绑定

> ID：11495695
> 
> 赞同：1
> 
> 时间：2012-07-15T21:20:07.470
> 
> 标签：internationalization, playframework-2.0

我是否（再次）遗漏了某些东西，或者 Play 2.0（Java）中的表单绑定缺乏（糟糕的）国际化支持？

我们的系统应该至少支持英语和葡萄牙语，它们使用不同的日期模式（dd/MM/yyyy 或 MM/dd/yyyy）。

另一方面，我只找到了一种定义自定义日期格式的方法：在模型类上使用注释（play.data.format.Formats.DateTime）。在我们的例子中不是一个解决方案，因为**格式取决于用户**。

application.conf 中定义的任何 date.format.[locale] 参数似乎都被忽略了，这并不奇怪，因为 Formats.DateFormatter 只有一种模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:02:50.677

好的，我终于让这个“东西”工作了。该解决方案可能对其他人有用。我仍然不能 100% 确定我没有滥用框架......

(1) 我编写了自己的 DateFormatter，它使用地图 Locale/SimpleDateFormat 而不是独特的模式（如基础框架类）。

由于 Play Java 中似乎是（另一个）[错误](https://stackoverflow.com/questions/11497470/playframework-2-0-1dateformatter-receives-system-locale)，我覆盖的 parse(String date, Locale locale) 忽略了 locale 参数并使用请求来获取首选语言。

这是完整的代码：

```
public class DateFormatter extends Formatters.SimpleFormatter<Date> {

    private Map<Locale, SimpleDateFormat> formats;
    private SimpleDateFormat defaultFormat;

    public DateFormatter(String defaultPattern) {
        formats = new HashMap<Locale, SimpleDateFormat>();      
        defaultFormat = new SimpleDateFormat(defaultPattern);
    }

    @Override
    public Date parse(String date, Locale locale) throws ParseException {

        Logger.debug("Parsing date " + date + " for locale " + locale);

        Context ctx = Context.current();
        if (ctx != null) {
            Lang preferred = Lang.preferred(ctx.request().acceptLanguages());
            Locale loc = preferred.toLocale();
            return getFormat(loc).parse(date);
        } else {
        return getFormat(locale).parse(date);
        }
    }

    @Override
    public String print(Date date, Locale locale) {
        return getFormat(locale).format(date);
    }

    public void addPattern(Locale locale, String pattern) {
        formats.put(locale, new SimpleDateFormat(pattern, locale));
    }

    private SimpleDateFormat getFormat(Locale locale) {
        SimpleDateFormat format = formats.get(locale);
        if (format == null)
            return defaultFormat;
        else
            return format;
    }   

} 
```

(2) 此 DateFormatter 由应用程序全局对象在应用程序加载时配置和注册。

```
@Override
public void onStart(Application app) {

    registerDateFormatter(app);

}

/**
 * Registers a custom date formatter using configured
 * available languages and custom date formats.
 * 
 * Browses the locales defined in langs parameter and
 * for each one loads the date format defined in the
 * parameters custom.date.format.xx
 * 
 * Gets also the default (fallback) format defined in
 * date.format. If no one is defined uses an hard-coded
 * format yyyy-MM-dd
 */
private void registerDateFormatter(Application app) {

    Configuration config = app.configuration();

    // Get default format
    String defaultPattern = config.getString("date.format");
    if (defaultPattern == null)
        defaultPattern = "yyyy-MM-dd";

    DateFormatter formatter = new DateFormatter(defaultPattern);

    // Get date format from configuration
    for (Lang lang:    Lang.availables()) {
        Locale locale = lang.toLocale();
        String pattern = app.configuration().getString("custom.date.format." + lang.code());                        
        if (pattern != null)
            formatter.addPattern(locale, pattern);        
    }

    // Register the formatter for java.util.Date
    Formatters.register(Date.class, formatter);        
} 
```

配置（在 application.conf 中）是：

```
# The application languages
# ~~~~~
application.langs="pt-br, en"
#
date.format="MM/dd/yyyy"
custom.date.format.en = "MM/dd/yyyy"
custom.date.format.pt-br = "dd/MM/yyyy" 
```

（参数名称中需要custom.，直接使用date.format.xx会报错）

# html - 使用固定定位是防止元素在视口上触发滚动条的唯一方法吗？

> ID：11495700
> 
> 赞同：2
> 
> 时间：2012-07-15T21:21:23.457
> 
> 标签：html, css

**解释：**

我有一个内容 div 会改变高度的页面。当 div 很小时，我想要一个漂亮的渐变渐变到背景颜色。随着 div 的高度增加，它应该将渐变进一步向下推，直到它离开页面。

**[示例页面](http://signdesignllc.net/fixed%20position.html)**

这个例子可以正常工作，但是我想知道我是否可以在不使用 position:fixed 的梯度 div 的情况下做到这一点。我不想使用固定定位的原因是因为当你上下滚动页面时，上面的例子在 iPad 上看起来很奇怪。除了渐变，一切都在移动，所以它使页面看起来很破碎。

**有什么方法可以在不使用固定定位的情况下构建我的示例？**

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:33:30.340

`overflow`只需调整元素的高度和和的变化`body`（`#content`示例[）](http://jsfiddle.net/R9uX8/)：

```
<div id="content">
    Content here. Use slider to adjust height.<br />
    <div id="slider"></div>
    This div <strong>should</strong> trigger a scrollbar on the window.
</div>
<div id="gradient">Gradient fade to body background. This div <strong>should not</strong> trigger a scrollbar on the window.</div> 
```

```
html, body {
    height:100%;
}
body {
    padding: 0;
    margin: 0;
    background-color: Green;
    overflow:hidden;
}
div {
    color: #fff;
    text-align: center;
    font-size: 16pt;
}
#slider {
    width: 300px;
    margin: 0 auto;
}
#content {
    line-height: 100px;
    background-color: Red;
    overflow:auto;
    max-height:100%;
}
#gradient {
    height: 200px;
    line-height: 200px;
    background: Orange;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:46:29.397

使用 jQuery 是一种选择吗？如果是这样，这可能是一种解决方案：

每当检测到滚动条时，检查它是由于渐变引起的还是由于内容部分引起的。如果是因为内容保持滚动条，如果不是，隐藏它。

```
// check to see if there is s scrollbar
if ($("body").height() > $(window).height()) {
    // ok there is a scrollbar, now lets see why there is a scrollbar:
    if ($("#content").height() > $(window).height()){
        // this is legit, do nothing
    }else{
       // the scroll bar is there because of the gradient, hide scroll bar
       $("body").css('overflow','hidden')
    }
}) 
```

# c# - 表单身份验证、记录时间、从 sqldatasource 参数源中的加密 cookie 获取记录的用户名

> ID：11495702
> 
> 赞同：0
> 
> 时间：2012-07-15T21:21:28.107
> 
> 标签：c#, asp.net

我有一个 sqldatasource 和一个 gridview。我正在使用表单身份验证。

用户登录后，我正在加密他的名字

```
FormsAuthenticationTicket tkt;
      string cookiestr;
      HttpCookie ck;
      tkt = new FormsAuthenticationTicket(1, txtUserName.text, DateTime.Now, 
DateTime.Now.AddMinutes(30), true, false);
      cookiestr = FormsAuthentication.Encrypt(tkt);
      ck = new HttpCookie(FormsAuthentication.FormsCookieName, cookiestr);
      ck.Expires=tkt.Expiration;    
      ck.Path = FormsAuthentication.FormsCookiePath; 
      Response.Cookies.Add(ck); 
```

在重定向页面中，我需要在 sqldatasource 中设置，其中 -> 参数源：cookie

*   但，

*   1.我不知道 cookie 的名称，因为我可以看到它没有。

*   2.由于cookie被加密，sqldatasource必须使用解密的cookie..好吧..我不知道该怎么做才能使用用户名字符串。

总而言之，我正在尝试加密他的名字并在重定向页面中使用 sqldatasource where 条件中记录的用户名。如果我不加密 cookie，我可以这样做，但是..因为 cookie 可以编辑..我不希望 ppl 编辑 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:33:50.293

Ans 1\. FormsAuthentication.FormsCookieName 的默认名称是“.ASPXAUTH”。但是，如果您希望改写名称，则必须在配置中进行

```
<authentication mode="Forms">
  <forms loginUrl="login.aspx"
    cookieless="UseCookies"
    name=".NEW_COOKIE_NAME" />
</authentication> 
```

# jquery - How to write jquery If else statement?

> ID：11495704
> 
> 赞同：8
> 
> 时间：2012-07-15T21:21:48.073
> 
> 标签：jquery

This code shows frm01:

```
$(document).ready(function() {
$("#reg").click(function () {
$("#frm01").show("slide", { direction: "down" }, 1000);
});
}); 
```

But I want to hide frm01 if it is allready visible, and vice versa. How could I do this, please ?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T21:24:50.867

Try jQuery's `toggle()` method:

```
$(function() {
    $("#reg").click(function () {
        $("#frm01").toggle(1000);
    });
}); 
```

You don't need jQuery to use if-else statements; Javascript implements those natively...

```
$(function() {
    $("#reg").click(function () {
        if ($("#frm01").is(":visible"))
            $("#frm01").slideUp(1000);
        else
            $("#frm01").slideDown(1000);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:26:17.313

try this:

```
$(document).ready(function() {
   $("#reg").click(function () {
    if ($("#frm01").is(':hidden')) {
      $("#frm01").show("slide", { direction: "down" }, 1000);
    } else {
      $("#frm01").hide(1000);
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T21:26:59.473

```
 $("#reg").on('click', function () {
    $("#frm01:hidden").show("slide", { direction: "down" }, 1000);
    $("#frm01:visible").hide("slide", { direction: "up" }, 1000);
  }); 
```

或者

```
 $("#reg").toggle(
    function () {
      $("#frm01").show("slide", { direction: "down" }, 1000);
    },
    function(){
      $("#frm01").hide("slide", { direction: "up" }, 1000);
    }
  ); 
```

也应该工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T21:56:46.110

您可以使用 $.toggle() 方法来显示和隐藏。需要一些时间来确定元素是隐藏还是显示。

```
$("#reg").click(function () {
if($("#frm01").hasClass('fram1-slide-on')){
    $("#frm01").hide();
    $("#frm01").removeClass('fram1-slide-on');
}   else {
    $("#frm01").show("slide", { direction: "down" }, 1000);
    $("#frm01").addClass('fram1-slide-on');
} 
```

});

# android - BASH in Android > using wildcards doesn't work

> ID：11495705
> 
> 赞同：1
> 
> 时间：2012-07-15T21:21:57.610
> 
> 标签：android, bash, notifications, pattern-matching, wildcard

I'm attempting to track the deactivation of notifications within android. This I planned on doing by polling the notification dumpsys every x seconds. There for I've put the notification into a variable so I can search the $tmp variable for a text (in this case google.gm) and based on this it will set the $Gmail on true or false.

When I tested my script-setup via Cygwin terminal on the PC it worked great, however not on Android

getting the dumpsys notification into $tmp works fine, but when I test it (in the shell) on android it seems to not want to accept my * wildcards.

```
tmp=$(dumpsys notification)
[[ "$tmp" == *"google.gm"* ]] && Gmail=true || Gmail=false 
```

I've been searching the web for the last two hours, but It'd kinda driving me crazy. I've done simplified tests to debug it and it really seems to be in the wildcard character

Does anybody see what I'm doing wrong?

After the new suggestions I managed to make this out of it:

```
tmp=$(dumpsys notification)
case $tmp in *notify_missed_call*) PRF1="1" ;; *) PRF1="0" ;; esac
case $tmp in *conv_notify*) PRF2="1" ;; *) PRF2="0" ;; esac
case $tmp in *NotYetThere*) PRF3="1" ;; *) PRF3="0" ;; esac
case $tmp in *stat_notify_calendar*) PRF4="1" ;; *) PRF4="0" ;; esac
echo $PRF1,$PRF2,$PRF3,$PRF4, > /sdcard/tmp.txt 
```

But somehow it only works when put in 1 line with ; between them. any way to make this work multiline (easier to maintain) and optimize it?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:41:52.357

听起来您在该 Android 上没有 bash，因此请尝试改用 POSIX。

```
case $(dumpsys notification) in 
    *google.gm*) Gmail=true ;;
    *) Gmail=false ;;
esac 
```

**更新** 鉴于您更新的答案，我看到您正在检查输出中的多个值`dumpsys notification`。假设这些字符串中只有一个可以出现在一行中，更好的方法是使用 shell 或 awk 逐行读取它

```
dumpsys notification | { 
    while read -r line; do
        case $line in
            *notify_missed_call*) prf1=1;;
            *conv_notify*) prf2=1;;
            *NotYetThere*) prf3=1;;
            *stat_notify_calendar*) prf4=1;;
        esac
    done
    echo "${prf1:-0},${prf2:-0},${prf3:-0},${prf4:-0}"
} > /sdcard/tmp.txt 
```

使用 awk，您可以检测同一行中的多个值。

```
dumpsys notification | awk '
    /notify_missed_call/{missed=1}
    /conv_notify/{conv=1}
    /NotYetThere/{notyet=1}
    /stat_notify_calendar/{cal=1}
    END { print missed+0,conv+0,notyet+0,cal+0 }' > /sdcard/tmp.txt 
```

# javascript - Why is some_func(…) != some_func.call(this, …) in a constructor

> ID：11495706
> 
> 赞同：3
> 
> 时间：2012-07-15T21:22:09.793
> 
> 标签：javascript, oop, constructor

I always assumed that `some_function(...)` was exactly the same as `some_function.call(this, ...)`. This seems not to hold true for calls in constructors / an object construction context:

```
function Class(members, parent) {
    function Ctor(value) {
        members.__init__.call(this, value);
        return this;
    };
    Ctor.prototype = members;
    Ctor.prototype.__proto__ = parent.prototype;
    return Ctor;
}

var Base = Class({
    __init__: function(value) {
        this.value = value;
    }
}, {});

var Child = Class({
    __init__: function(value) {
        // Base(value*2); ← WON'T WORK AS EXPECTED
        Base.call(this, value*2); // works just fine
    }
}, Base); 
```

In `Child.__init__` it in necessary to use the explicit call to `Base.call(this, value)`. If I don't use this lengthy expressing, `this` would name the global object (`window` in browsers) in the called base constructor. With `"use strict"` an error would be thrown as there is no global object in strict mode.

Can someone please explain why I have to use `Func.call(this, ...)` in this example?

(Tested with Node.js v0.6.12 and Opera 12.50.)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:26:09.080

Calling a function with `.call` is different from just invoking it with `()`. With `.call` you explicitly set the value of `this` for the call in the first argument. With normal invocation, the `this` value will implicitly be the global object or `undefined`, depending on whether strict mode is enabled or not.

```
func.call({}, 1); //Call the function func with `this` set to the object and pass 1 as the first argument

func(1); //Call the function func with 1 as the first argument. The value of this inside the function depends on whether strict mode is on or off. 
```

See [.call](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

* * *

> I always assumed that some_function(...) was exactly the same as some_function.call(this, ...). This seems not to hold true for calls in constructors / an object construction context:

That's not true, they are never the same. You are probably confusing it with calling a function as a property of some object. `obj.method()` will mean that `obj` is the value of `this` for the method call and it would be effectively the same as `obj.method.call(obj)`.

# mysql - Return results of query based on todays date in SQL (MySQL) Part 2

> ID：11495713
> 
> 赞同：1
> 
> 时间：2012-07-15T21:23:06.970
> 
> 标签：mysql, sql, inner-join, where-clause

I posted [another question](https://stackoverflow.com/questions/11492823/return-results-of-query-based-on-todays-date-in-sql-mysql) which was resolved perfectly however I now need to apply the same code I was given to a different piece of MySQL code.

What I have is

```
SELECT value, COUNT(*) AS 'num' 
FROM table_c 
WHERE table_c_id IN (9, 17, 25)
GROUP BY value 
```

What I would like to do now is only show the results if they have been entered on the current date?

The current code snippet I have for checking the current date, which works great is (the date is in unixtime format)

```
( xxxxxxxxxxxxxx and curdate() = date( from_unixtime( b.crm_date_time_column ) ) ) 
```

The problem I have with query this is the date column is located in a totally different table, table_a.

How do I write the MySQL to check table_a for the date and apply the existing date SQL I have?

This is a MySQL database.

Any help will be gratefully received! This is way over my head!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:38:59.357

您需要`JOIN`首先使用相关列将另一个表放在第一个表上（我假设`id`在另一个表中与 相关`table_c_id`）。

正如我在对您之前的问题的[回答](https://stackoverflow.com/a/11494995/1446794)中所说的那样，您最好在裸日期时间列上进行比较，以便查询保持可搜索（即能够利用索引）：

```
SELECT     a.value
FROM       table_c a
INNER JOIN table_a b ON a.table_c_id = b.id
WHERE      a.table_c_id IN (9,17,25) AND
           b.crm_date_time_column >= UNIX_TIMESTAMP(CURDATE())
GROUP BY   a.value 
```

这假设`crm_date_time_column`将永远不会包含未来的时间（例如明天，下个月等），但如果可以，您只需添加：

```
AND b.crm_date_time_column < UNIX_TIMESTAMP(CURDATE() + INTERVAL 1 DAY) 
```

作为`WHERE`条款中的另一个条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:31:36.830

```
SELECT   c.value
FROM     table_c c, table_a a
WHERE    c.id IN (9, 17, 25)
 AND     b.crm_date_time_column >= UNIX_TIMESTAMP(CURDATE())
 AND     c.id = a.id
GROUP BY c.value 
```

你可以用这样的查询来做到这一点。它从两个表中选择行，检查它们是否具有相同的 ID 并且当前日期是 table_a 的 crm_date_time_column。我不确定您如何知道系统中哪些行相互链接，因此它会检查它们是否具有相同的 id。

# javascript - how to control markup in html5

> ID：11495716
> 
> 赞同：0
> 
> 时间：2012-07-15T21:24:03.003
> 
> 标签：javascript, forms, html, date

In html5 there is the excellent `<date>` which works on Opera (and partially on maxthon) like a charme.

but a user gets all dates, so for example in a form registration, how do i filter dates for a user that have under 18 years?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:51:02.683

如果我理解正确，您只想允许特定范围内的日期。例如，为此，您可以指定`min="2010-01-01"`仅允许 1 月 1 日之后的日期。您还可以指定`max=`. 两者都必须是`yyyy-mm-dd`格式。

# c - Why can't errno's value be printed?

> ID：11495720
> 
> 赞同：20
> 
> 时间：2012-07-15T21:24:44.270
> 
> 标签：c, gdb, errno

I am looking at the following code in an SO "Low Quality" post to make sure the sample works, and my question is why can't I print errno's value?

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int main(){
    FILE *fp;
    errno = 0;
    fp=fopen("Not_exist.txt","r");
    if(fp == NULL && errno == ENOENT)
        perror("file not exist");
    return 0;
} 
```

Here is what happens when I try to print the value:

```
(gdb) p errno
Cannot find thread-local variables on this target
(gdb) 
```

I can print fp's value just fine. As you would expect it's value is `0x00`.

I looked at `/usr/include/errno.h` and a lot of the other include files included as part of `errno.h`, and I cannot figure out how errno is defined. Any pointers or help would be appreciated. I'm just curious about it; nothing is broken.

Thank you.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T21:28:02.917

这个`errno`变量有点像一只奇怪的鸭子。因为现在大多数运行时库都支持线程，所以不能只有*一个* `errno`变量。如果有的话，那么两个线程可以同时做一些事情，并且都设置了这个`errno`值，然后就会产生很大的混乱。

运行时库会使用各种技巧来避免这个问题。例如，可能会执行以下操作：

```
#define errno __get_errno() 
```

where 引用`errno`实际调用内部`__get_errno()`函数，该函数返回当前线程的正确错误编号值。这种方法的缺点是它防止分配给 errno，例如`errno = 0;`（某些代码可能会这样做）。运行时库通常会选择更复杂的方法。

一些运行时库（比如你正在使用的，我想）可以声明一种特殊类型的“线程局部变量”，它可以在每个线程上具有不同的值。听起来您系统上的调试器无法显示那种变量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-15T21:30:08.957

在我的 Ubuntu 安装中，我有以下部分`bits/errno.h`：

```
/* Function to get address of global `errno' variable.  */
extern int *__errno_location (void) __THROW __attribute__ ((__const__));

#  if !defined _LIBC || defined _LIBC_REENTRANT
/* When using threads, errno is a per-thread value.  */
#   define errno (*__errno_location ())
#  endif 
```

也就是说，`errno`不一定是变量。由于各种原因，您可能希望有一个函数为您返回错误值，而不是简单的`extern int`. ¹这就是为什么您不能使用 GDB 打印其值的原因。

¹ [当然，正如您所看到的，函数调用应该返回指向实际变量的指针，而`errno`宏会取消引用它。]

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-29T18:10:07.503

`errno`C 标准实际上要求它是扩展为可修改左值的宏。在最简单的情况下，它可以扩展为已声明变量的名称，但对于需要`errno`不同线程的不同对象的实现，它通常定义如下：

```
#define errno (*__errno_location ()) 
```

`gdb`通常能够评估函数调用；例如，在我的系统上：

```
(gdb) p __errno_location()
$1 = -134383968
(gdb) p errno
Cannot find thread-local variables on this target 
```

第一个打印的值恰好是返回的指针值的低 32 位`__errno_location()`。我不太了解 gdb 来解释这种行为，但它确实证明了它可以执行函数调用。

作为一种解决方法，您可以修改源代码，以便将 的地址`errno`或其值保存在 gdb 可以显示的变量中：

```
(gdb) l
1       #include <errno.h>
2       #include <stdio.h>
3       int main(void) {
4           errno = 42; /* arbitrary value */
5           const int *errno_ptr = &errno;
6           int errno_value = errno;
7           printf("%d %d %d\n", errno, errno_value, *errno_ptr);
8       }
(gdb) b 8
Breakpoint 1 at 0x4005b6: file c.c, line 8.
(gdb) r
Starting program: /home/kst/c 
42 42 42

Breakpoint 1, main () at c.c:8
8       }
(gdb) p errno
Cannot find thread-local variables on this target
(gdb) p errno_value
$1 = 42
(gdb) p *errno_ptr
$2 = 42 
```

该`*errno_ptr`方法的优点是您只需分配一次 - 除非您正在调试多线程程序。在这种情况下， 的值`&errno`可能会根据您评估它的线程而有所不同。

这可能是`gdb`.

**更新**凯文考克斯的评论提出了一种解决方法：

```
print *((int*(*)())__errno_location)() 
```

使用 gcc 6.2 和 gdb 7.11，`print errno`实际上可以工作：

```
(gdb) l
1       #include <errno.h>
2       int main(void) {
3           errno = 42;
4           return 0;
5       }
(gdb) b 4
Breakpoint 1 at 0x6bf: file c.c, line 4.
(gdb) r
Starting program: /home/kst/c 

Breakpoint 1, main () at c.c:4
4           return 0;
(gdb) p errno
$1 = 42
(gdb) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-23T01:36:42.803

正如其他人所说，`errno`不是 gdb 可以打印的变量。但是 gdb 可以评估函数，并`__errno_location()`返回一个指向 `errno' 的指针。那么我们唯一需要做的就是调用函数并取消引用结果：

```
(gdb) p *__errno_location() 
```

就是这样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-29T14:00:15.483

```
_CRTIMP int* __cdecl __MINGW_NOTHROW _errno(void);
#define errno       (*_errno()) 
```

使用它的目的是，您可以只传递首选验证的地址，该地址将包含从调用函数返回的实际错误值。

例如，您可以定义函数 _errno() 如下

```
unsigned int errorValue;

int* _errno()
{
    return (&errorValue);
} 
```

现在用法：

```
void MyFunc()
{
  if(some condition failure)
      errno = 10; //Or any error value as per your design
  else
  {
     //Actual operation
  }
} 
```

执行后`MyFunc()`，`errorValue`将包含错误。

# c++ - 为什么 Strassen 矩阵乘法比标准矩阵乘法慢得多？

> ID：11495723
> 
> 赞同：20
> 
> 时间：2012-07-15T21:25:04.197
> 
> 标签：c++, performance, matrix, multiplication, strassen

我用 C++、Python 和 Java 编写了用于矩阵乘法的程序，并测试了它们乘以两个 2000 x 2000 矩阵的速度（见[帖子](http://martin-thoma.com/matrix-multiplication-python-java-cpp/)）。标准的 ikj 实施 - 在![在此处输入图像描述](../Images/e0af42dd94d076c38260d64d56d08656.png)- 采用：

*   **C++**：15 秒（[来源](https://github.com/MartinThoma/matrix-multiplication/blob/master/C++/ikj-algorithm.cpp)）
*   **Python**：6 分 13 秒（[来源](https://github.com/MartinThoma/matrix-multiplication/blob/master/Python/psyco-ikj-multiplication.py)）

现在，我已经在 Python 和 C++ 中实现了用于[矩阵乘法的 Strassen 算法，](http://en.wikipedia.org/wiki/Strassen_algorithm#Source_code_of_the_Strassen_algorithm_in_C_language)![在此处输入图像描述](../Images/2cb7a8ca6b1cb084ab0922cb31525adf.png)就像在维基百科上一样。这些是我的时间：

*   **C++**：45 分钟（[来源](https://github.com/MartinThoma/matrix-multiplication/blob/master/C++/strassen.cpp)）
*   **Python**：10 小时后被杀死（[来源](https://github.com/MartinThoma/matrix-multiplication/blob/master/Python/strassen-algorithm.py)）

**为什么 Strassen 矩阵乘法比标准矩阵乘法慢得多？**

* * *

想法：

*   一些缓存效果
*   执行：
    *   错误（生成的 2000 x 2000 矩阵是正确的）
    *   空乘（对于 2000 x 2000 -> 2048 x 2048 应该不那么重要）

* * *

这尤其令人惊讶，因为它似乎与其他人的经历相矛盾：

*   [为什么我的 Strassen 矩阵乘法器这么快？](https://stackoverflow.com/q/7827737/562769)
*   [矩阵乘法：Strassen vs. Standard](https://stackoverflow.com/q/4304600/562769) - Strassen 对他来说也较慢，但至少处于同一数量级。

* * *

编辑：在我的情况下，Strassen 矩阵乘法较慢的原因是：

*   我让它完全递归（见 tam）
*   我有两个函数`strassen`和`strassenRecursive`. 如果需要，第一个将矩阵的大小调整为 2 的幂，并调用第二个。但是`strassenRecursive`并没有递归调用自身，而是`strassen`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T21:30:17.767

基本问题是您使用 strassen 实现递归到叶大小为 1。Strassen 的算法具有更好的 Big O 复杂度，但常数在现实中*确实很*重要，这意味着实际上对于较小的问题规模，您最好使用标准的 n^3 矩阵乘法。

因此，要大大改进您的程序，而不是这样做：

```
if (tam == 1) {
        C[0][0] = A[0][0] * B[0][0];
        return;
    } 
```

使用`if (tam == LEAF_SIZE) // iterative solution here`. `LEAF_SIZE`应该是一个常数，您必须为您的给定架构通过实验确定。根据架构的不同，它可能会更大或更小 - 有些架构中 strassen 的常数因子非常大，以至于对于合理的矩阵大小，它基本上总是比简单的 n^3 实现更差。这一切都取决于。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T21:37:21.913

好吧，“算术运算”并不是唯一重要的事情。这不像其他一切都是免费的。

我天真的猜测是，所有这些内存分配和复制都超过了减少算术运算所带来的收益……

尤其是内存访问，当它离开缓存时可能会非常昂贵，相比之下，算术运算可以被认为是免费的:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:34:08.513

尽管 Strassen 算法具有较小的大 O 表示法，但为了利用这一点，您需要乘以在大多数标准机器甚至超级计算机上太大而无法求解的矩阵。

这样想

一个问题是 x^3 ，另一个是 X^1.6734 + 8x^(1/2) +x .....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-27T14:43:06.903

我记得我在大学时也做过同样的事情。我的实现是用 Java 实现的。我还写了一个脚本来测试代码，我有10000多个不同大小的随机矩阵的测试用例（2 *2）~（8192* 8192）。我没有让递归进入标量级别，我使用 2 的所有幂作为停止点。我发现了一个 Strassen 算法更有效的范围，以及一个比朴素算法更差的范围。

我没有调查缓存、内存或 JVM（垃圾收集）。

当我在课堂上展示时，我将这些发现归因于 Strassen 算法的渐近复数是根据乘法次数来衡量的。它是在计算机做加法比乘法更快的时候设计的。

如今，CPU 的速度与它们添加的速度一样快（周期数）。如果检查这两种算法，您会发现只有当大小小于 2^10 时，Strassen 的算术运算才比朴素算法少（如果我没记错的话）

# ruby-on-rails - Rails storing aggregated information

> ID：11495726
> 
> 赞同：5
> 
> 时间：2012-07-15T21:25:20.433
> 
> 标签：ruby-on-rails, database, analytics, aggregate-functions, graphing

I'm making a Rails app which will feature a lot of "calculated" or "aggregated" data, i.e. information which is computed by performing expensive operations on the data stored by the user. I'm thinking I need some way of storing this data so A. I am not constantly performing expensive DB operations, and B. So that I can spit out "reports" with pretty graphs over time etc for given attributes.

I'm wondering what the best way to implement this is? I'd need to be calculating and storing values (numeric) for a given model, and how they change over time. I want this to be efficient and avoid duplicating and data. The records will be pretty much fixed once created, so I don't need to worry about things being changed too much, though it needs to be considered.

I just wondered what the most common approach to this is, and how I should go about implementing this within a Rails app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:31:22.263

我一直在研究类似的问题，并且我也研究过以错误方式执行此操作的应用程序。

这是我的最佳实践建议：

*   将原始数据存储在模型中，我们称之为`Feed`
*   建立与另一个保存计算值的模型的一对一关联，例如`FeedStats`. 这也可能是一对多关联或多对一，具体取决于具体情况；您可能会将一些单独`Feed`的记录汇总到某种聚合中，等等。
*   保留所有原始原始数据。如果您稍后想要将计算切换到其他算法并且您可能需要重新计算旧数据，或者如果您发现计算中的错误等，这将非常有用。
*   使用 Resque（带或不带调度程序）、DelayedJob 或类似工具等工具在后台任务上设置计算。

如果您可以更具体一些并给出一些确切问题的示例，我也许可以提供一些更具体的提示。祝你好运。

# python - Python / Pygame - 网格上的最近坐标

> ID：11495729
> 
> 赞同：2
> 
> 时间：2012-07-15T21:25:39.887
> 
> 标签：python, grid, pygame

这是用 Python 和 Pygame 实现的，但这是一个相当普遍的编程问题（意味着独立于实现）。

我有一个函数，它将 x 和 y 整数作为输入，并且应该生成一个 3x3 的相邻点网格（包括 x 和 y）。

注意：0,0 原点从左上角开始。向右移动时 x 增加，向下移动时 y 增加。

例如。

```
def nearest_grid(x, y):
    return [[(x-1,y-1),(x,y-1),(x+1,y-1)],[(x-1,y)(x,y),(x+1,y)],[(x-1,y+1),(x,y+1),(x+1,y+1)]] 
```

因此，给定一个网格和一个点（标记为 p），它会以 3 个列表的列表形式返回以下内容：

```
x  x  x
x  p  x
x  x  x 
```

这是在 Python 中执行此操作的最有效/最清晰的方法吗？

编辑：假设我想传递一个半径值（上面的半径值为 1）。所以，如果我传递了一个半径值 2，那么上面的方法很快就会变得乏味。有没有更通用的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:32:25.600

```
def nearby_grid_points(x, y, r=1):
    res = []
    for dy in xrange(-r, r+1):
        res.append([(x+dx, y+dy) for dx in xrange(-r, r+1)])
    return res 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:54:30.690

我更喜欢`numpy`基于此的解决方案：

```
>>> import numpy
>>> def nearest_grid(x, y, radius=1):
...     X, Y = numpy.mgrid[-radius:radius + 1, -radius:radius + 1]
...     return numpy.dstack((X + x, Y + y))
... 
>>> nearest_grid(1, 2)
array([[[0, 1],
        [0, 2],
        [0, 3]],

       [[1, 1],
        [1, 2],
        [1, 3]],

       [[2, 1],
        [2, 2],
        [2, 3]]]) 
```

这是一个高度通用的版本，可以接受任意数量的坐标。这不会将返回列表拆分为网格；为简单起见，它只返回一个平面的邻居列表。

```
>>> def nearest_grid(*dims, **kwargs):
...     radius = kwargs.get('radius', 1)
...     width = radius * 2 + 1
...     dims = (d - radius for d in dims)
...     return list(itertools.product(*(xrange(d, d + width) for d in dims)))
... 
>>> nearest_grid(1, 2, 3, radius=1)
[(0, 1, 2), (0, 1, 3), (0, 1, 4), (0, 2, 2), (0, 2, 3), (0, 2, 4), 
 (0, 3, 2), (0, 3, 3), (0, 3, 4), (1, 1, 2), (1, 1, 3), (1, 1, 4), 
 (1, 2, 2), (1, 2, 3), (1, 2, 4), (1, 3, 2), (1, 3, 3), (1, 3, 4), 
 (2, 1, 2), (2, 1, 3), (2, 1, 4), (2, 2, 2), (2, 2, 3), (2, 2, 4), 
 (2, 3, 2), (2, 3, 3), (2, 3, 4)] 
```

请注意，这两个都以您请求的相反顺序返回索引。从表面上看，这仅仅意味着您只需要颠倒参数的顺序——即通过`(y, x)`or`(z, y, x)`而不是`(x, y)`or `(x, y, z)`。我本可以为您做到这一点，*但*请注意这种方法的问题。

```
>>> def nearest_grid(x, y, radius=1):
...     X, Y = numpy.mgrid[-radius:radius + 1, -radius:radius + 1]
...     return numpy.dstack((Y + y, X + x))
... 
>>> grid
array([[[0, 0],
        [1, 0],
        [2, 0]],

       [[0, 1],
        [1, 1],
        [2, 1]],

       [[0, 2],
        [1, 2],
        [2, 2]]]) 
```

现在我们有一个网格，其中的值按`[x, y]`顺序存储。当我们将它们用作索引时会发生什么`grid`？

```
>>> grid = nearest_grid(1, 1)
>>> x, y = 0, 2
>>> grid[x][y]
array([2, 0]) 
```

我们没有得到我们期望的单元格！那是因为网格布局如下：

```
grid = [[(x, y), (x, y), (x, y)],
        [(x, y), (x, y), (x, y)],
        [(x, y), (x, y), (x, y)]] 
```

`grid[0]`给我们*第一行*，即`y = 0`行。所以现在我们必须颠倒顺序：

```
>>> grid[y][x]
array([0, 2]) 
```

最好以行优先 ( `(y, x)`) 顺序存储值。

# heroku - 运行 git push heroku master 时出错

> ID：11495733
> 
> 赞同：1
> 
> 时间：2012-07-15T21:26:05.730
> 
> 标签：heroku

我刚刚设置了我的heroku帐户。我在我的应用程序的根目录中..

所以我跑

```
heroku login
## give my credentials
heroku create --stack cedar
heroku keys:add
git push heroku master 
```

然后我得到错误：

```
ssh: Could not resolve hostname heroku: Name or service not known
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:31:53.503

也许 Heroku git 远程地址以某种方式损坏。

您可以先尝试通过执行直接访问 Heroku `host heroku.com`，`ssh git@heroku.com -T`然后查看结果。像这样：[尝试推送到 Heroku 时出错](https://stackoverflow.com/questions/7366445/getting-error-while-trying-to-push-to-heroku)

你应该得到`host heroku.com`类似的东西：

```
$ host heroku.com
heroku.com has address 50.19.85.132
heroku.com has address 50.19.85.154
heroku.com has address 50.19.85.156
heroku.com mail is handled by 10 aspmx2.googlemail.com.
heroku.com mail is handled by 10 aspmx3.googlemail.com.
heroku.com mail is handled by 10 aspmx4.googlemail.com.
heroku.com mail is handled by 10 aspmx5.googlemail.com.
heroku.com mail is handled by 10 alt1.aspmx.l.google.com.
heroku.com mail is handled by 10 alt2.aspmx.l.google.com.
heroku.com mail is handled by 10 aspmx.l.google.com. 
```

然后尝试修复您的 .git/config 文件，使用：

```
git@heroku.com:your_app.git 
```

像这样：[无法推送到 Cedar Stack 上现有的 live heroku 应用程序](https://stackoverflow.com/questions/8782079/cant-push-to-existing-live-heroku-app-on-cedar-stack)

如果这两个没有帮助，那么可能会更复杂。

# java - Java比较器类型变量问题？

> ID：11495737
> 
> 赞同：-1
> 
> 时间：2012-07-15T21:26:18.357
> 
> 标签：java, comparator

我试图为自定义类实现比较器，以便我可以选择要排序的字段。我做的比较器类之一给了我一个我一点也不理解的错误。随意指出你看到的任何东西，因为我的老板周五早些时候离开了，一旦我开始尝试对下面代码中的“光谱”对象数组进行排序，我就没有机会问他问题：

```
import java.io.*;
import java.util.*;

public class scanComparator<Spectrum> implements Comparator<Spectrum> {
    public int compare(Spectrum o1, Spectrum o2){
        int s1 = o1.getScanNumber();
        int s2 = o2.getScanNumber();
        int eval = s2 - s1;
        return eval;
    }
} 
```

这是错误（来自jGrasp）：

```
scanComparator.java:7: error: cannot find symbol
        int s2 = o2.getScanNumber();
                   ^
  symbol:   method getScanNumber()
  location: variable o2 of type Spectrum
  where Spectrum is a type-variable:
    Spectrum extends Object declared in class scanComparator 
```

getScanNumber() 是公开的并且没有拼写错误。我从 Spectrum 类中重新复制粘贴了方法名称。o1 给出了相同的错误，但由于其冗余而被省略。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:38:49.213

这是错误的：

```
public class scanComparator<Spectrum> implements Comparator<Spectrum> { 
```

应该

```
public class ScanComparator implements Comparator<Spectrum> { 
```

第一个`<Spectrum>`不是类名，是一个未绑定的类型变量，基本等价于`Object`，当然`Object`也没有这个方法。这个类型变量被用于参数的类型`compare()`。删除该无效规范将允许使用真实类型名称`Spectrum`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T21:40:00.197

您的问题是您要声明`scanComparator<Spectrum>`，只需将其更改为“scanComparator”，如下所示，一切正常。

```
import java.io.*;
import java.util.*;

public class scanComparator implements Comparator<Spectrum> {
    public int compare(Spectrum o1, Spectrum o2){
        int s1 = o1.getScanNumber();
        int s2 = o2.getScanNumber();
        int eval = s2 - s1;
        return eval;
    }
} 
```

# ruby-on-rails-3 - Having an issue with check_box and boolean attribute

> ID：11495739
> 
> 赞同：0
> 
> 时间：2012-07-15T21:26:28.117
> 
> 标签：ruby-on-rails-3, form-helpers

I'm using a checkbox in the edit action, and when I go into the form and "check" the box, everything works fine. But then when I go back and try to "uncheck the box" it doesn't seem to save.

Here's my code for the form:

```
<%= f.label :winning, "Did this Proposal Win?", class: "input-title" %>
<%= f.check_box :winning, {}, true, false %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:25:00.143

为什么要提供这组额外参数？这样做：

```
<%= f.check_box :winning %> 
```

最终 - 尝试使用`1`and `0`，而不是`true`and `false`。

# php - 创建多个 htaccess 重写

> ID：11495746
> 
> 赞同：1
> 
> 时间：2012-07-15T21:27:09.853
> 
> 标签：php, .htaccess, mod-rewrite

我目前有一个 .htaccess 文件重写`dyhamb.com/episode.php?episode=1`为`dyhamb.com/1`. 我还想要另一个重写`dyhamb.com/blogpost.php?bp=1`为`dyhamb.com/blog/1`.

我已经为剧集重写设置了代码，但是当我去添加博客重写时，我似乎无法让它工作。我将如何更改以下内容以使其成为可能？

```
Options -Multiviews

RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^dyhamb\.com$
RewriteRule ^(.*) http://dyhamb.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(0|[1-9]\d{0,2})$ /episode.php?episode=$1 [L,QSA]
RewriteRule ^/blog$ /blogpost.php?blog=$1 [L,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+episode\.php\?episode=(\d+) [NC]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+blogpost\.php\?blog=(\d+) [NC]

RewriteRule ^ %1? [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:50:06.217

您需要将 2 分开并复制您拥有的一组条件。这些条件仅适用于紧随其后的规则：

```
RewriteCond <something>
RewriteCond <something-else>
# those 2 conditions only apply to this rule:
RewriteRule <match> <target>

# This rule has no conditions
RewriteRule <match2> <target2> 
```

所以你希望你的 htaccess 看起来像这样：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^dyhamb\.com$
RewriteRule ^(.*) http://dyhamb.com/$1 [R=301,L]

# Setup conditions for internal rewrite of episode.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrite for episode.php
RewriteRule ^(0|[1-9]\d{0,2})$ /episode.php?episode=$1 [L,QSA]

# Setup conditions for internal rewrite of blopost.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Rewrite for blogpost.php
RewriteRule ^blog/(.*)$ /blogpost.php?blog=$1 [L,QSA]

# External redirect for episodes
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+episode\.php\?episode=(\d+) [NC]
RewriteRule ^ /%1? [R=301,L]

# External redirect for blog
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+blogpost\.php\?blog=(\d+) [NC]
RewriteRule ^ /blog/%1? [R=301,L] 
```

请注意，您的博客规则需要进行一些更改。如果这些规则将在 .htaccess 文件中，则在重写引擎处理它之前，会从 URI 中去除前导斜杠，因此表达式`^/blog`需要是`^blog`，并且我在博客之后添加了一个反向引用匹配`(.*)`，因为你想成为能够在它插入到`blog=`目标中的查询字符串之后访问 ID。此外，博客的外部重定向缺少`/blog/`之前的 ID。

# mysql - 如何导出 MySQL 数据库用户？

> ID：11495749
> 
> 赞同：0
> 
> 时间：2012-07-15T21:27:37.860
> 
> 标签：mysql

如何导出 MySQL 数据库用户？我认为用户有权访问mysql。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:54:58.820

MySQL 用户存储在 mysql 数据库中的 user 表中。

`use mysql; select * from user where user= 'Charlie'`

会给你查理的用户记录。

# html - NetBeans：使用HTML 标记的 Javadoc 格式

> ID：11495751
> 
> 赞同：3
> 
> 时间：2012-07-15T21:27:44.537
> 
> 标签：html, tags, format, javadoc, netbeans-7

我正在使用 NetBeans IDE 7.1.1，最近发现了如何根据自己的喜好设置 Java 格式化模式，这样我就可以通过简单的按键轻松地将所有类格式化为特定标准。但是，我发现在方法注释中，例如 Javadoc，

```
<code></code> 
```

HTML 标记插入到它们自己的行中。例如：

```
/**
 * Some Javadoc comment. The <code>paramName</code> does blah.
 */ 
```

产生这个：

```
/**
 * Some Javadoc comment. The
 * <code>paramName</code> does blah.
 */ 
```

在突破 80 个字符的限制之前，有足够的空间容纳整个文本，但它仍然有一个换行符。我探索了 Java 格式化选项和代码模板，但没有找到任何解决此问题的方法。这不是什么大不了的事，只是一个烦恼，因为我可以使用

```
{@code paramName} 
```

达到同样的效果。我只是没有在来自 JDK 的 Javadoc 中看到任何这种用法的示例。Javadoc 网页也没有提到它，只是

```
<code></code> 
```

标签。正如我所说，解决这个问题并不重要，但同时我想编写标准化的 Javadoc。查看 HTML 标签也使我更容易确定我在哪里有这些标签。

# javascript - 如何从我的 Django 网站向不同的服务器发出 POST 请求？

> ID：11495757
> 
> 赞同：0
> 
> 时间：2012-07-15T21:28:44.430
> 
> 标签：javascript, django

我有一个在 Django 上运行的网站。当用户单击提交按钮时，我需要将数据发送到运行在不同域上的服务器，然后显示返回给用户的数据。由于跨域问题，我无法使用 Ajax 请求。许多消息来源建议我应该使用 Javascript 发送到我自己的服务器，然后再发送到外部服务器，但我不知道我将如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:10:24.850

如果提交表单最终需要去的URL，可以在服务器端进行处理。因此，假设您在表单中包含一个隐藏字段，如下所示：

```
<input type="hidden" name="form_urlfield" value="http://anotherwebsite.com/wheretheformneedstogo"> 
```

基本上你可以这样做：

```
 $.ajax({
    type: "POST",
    url: 'http://somewhereonthesameserver.com/submit-form',
    data: $('#ajax-form').serialize(),
    success: function(data){...},
            }); 
```

然后，在与您的提交表单 URL 对应的视图中：

```
import urllib2
data = urllib2.urlopen(request.POST['form_urlfield'], the_post_data)
//the_post_data is the data that you want to post to the other server..
// do something with the returned data
// return a JSON/Other response 
```

另外，确保在 Django 中启用 CSRF-Ajax 功能。 [https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#csrf-ajax](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#csrf-ajax)

以上所有只是伪代码（我只是在这里写出来的......）但它应该让你知道如何继续。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:54:38.307

您可以从 django 应用程序发出 http 请求。

1.  用户从 html 表单向 django 提交数据
2.  使用 urllib 发送数据并从其他域获取响应
3.  向用户提交适当的响应数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:31:04.723

Ashray 和 dm03514 提供的答案是正确的。但我可能会建议考虑使用[Requests](http://docs.python-requests.org/en/latest/index.html)而不是 urllib2 进行服务器端 HTTP 处理。

# php - 为什么 if/else vs. or/exit 在 PHP 中？

> ID：11495759
> 
> 赞同：7
> 
> 时间：2012-07-15T21:28:56.027
> 
> 标签：php, if-statement, fopen, exit

看到`exit()` [PHP 文档](http://php.net/manual/en/function.exit.php)让我想到：

```
$filename = '/path/to/data-file';
$file = fopen($filename, 'r')
or exit("unable to open file ($filename)"); 
```

几个问题：

1.  除了打开文件使用之外，还有哪些常见用例`exit()`？
2.  由于不是每个人都写过的每个函数都以 结尾`exit()`，你怎么知道在某些情况下使用它还是在其他情况下使用它？
3.  是`if/else`和`or/exit`可互换的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:37:43.053

在这种情况下，`or`in that statement 是 PHP 的[逻辑运算符之一，当这样使用时，当](http://www.php.net/manual/en/language.operators.logical.php)*且仅当*第一个语句因[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)而失败时，才会执行第二个语句。

由于`fopen`返回 false，该`or exit`语句在第一部分失败后被执行。

为了更好地理解它，这里是短路评估的快速解释。

```
$x = 5;
$y = 42;

if ($x == 5 or $y == 42) {
    echo "x or y is true";
} 
```

在上面的代码中，表达式`$y == 42`永远不会被计算，因为没有必要因为第一个表达式为真。

在该示例中，他们使用相同的逻辑来决定是否评估调用`exit`.

为了解决您的问题：

1.  除非程序非常具体，否则打开文件失败时我不会使用 exit。更好的做法是记录错误，然后将错误返回给调用者，以便他们决定要做什么。
2.  何时使用`exit`完全取决于您正在编写的代码。
3.  鉴于有关短路的解释，是的，它们在这个意义上是可以互换的。using`or exit`比 using 短一点`if/else`。

希望有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T21:42:35.777

1.  CLI 脚本，exit 可以采用一个整数参数，该参数反馈到控制台以指示成功或某种形式的错误
2.  我不倾向于在应用程序代码中使用`exit()`或使用`die()`，因为首选异常。但是，我个人认为你可能有点过于复杂了......它会杀死脚本执行，所以当你需要杀死脚本时使用它。老实说，我大多只在调试时（一次性断点）在执行过程中终止脚本，这也不理想（同样，异常做得更好）。
3.  使用`or`大多是方便的。不过，这里有一个有趣的点......

为什么

```
$resource = mysql_connect() || die('dead') 
```

不行？

答案是`=`运算符优先，`or`因此首先进行赋值，如下所示：`($resource = mysql_connect()) or die()`. 这样，它就像做一个`if(!($resource = mysql_connnect())) { die() }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T21:36:35.850

我倾向于完全避免使用`exit()`，因为从用户的角度来看，这是一种处理错误的非常丑陋的方式。

如果您必须使用它，任何不可恢复的错误都将成为候选者。例如，数据库查询或连接失败，或远程请求失败。

`if/else`相当于`...or whatever()`。这只是一个风格的东西，后一种形式更简洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T21:35:38.483

我想说`exit`，如果您正在执行的功能失败，您的代码将无法继续运行。例如读取需要的文件。

# android - Android MySQL 异常错误

> ID：11495761
> 
> 赞同：0
> 
> 时间：2012-07-15T21:29:19.440
> 
> 标签：android, jdbc

我正在尝试对 android 应用程序中的数据库执行简单查询。但是每次执行该方法时程序都会崩溃。有人对如何解决这个问题有任何建议吗？

这是错误日志消息：

> 07-15 17:20:23.623: ERROR/AndroidRuntime(544): Uncaught handler: thread main exiting due to unaught exception 07-15 17:20:23.643: ERROR/AndroidRuntime(544): java.lang.VerifyError: com. mysql.jdbc.MysqlIO 07-15 17:20:23.643: ERROR/AndroidRuntime(544): at com.mysql.jdbc.Connection.createNewIO(Connection.java:2771) 07-15 17:20:23.643: ERROR/AndroidRuntime (544): 在 com.mysql.jdbc.Connection.(Connection.java:1555) 07-15 17:20:23.643: 错误/AndroidRuntime(544): 在 com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java ：285）07-15 17：20：23.643：错误/AndroidRuntime（544）：在java.sql.DriverManager.getConnection（DriverManager.java：191）07-15 17：20：23.643：错误/AndroidRuntime（544）：在 java.sql.DriverManager.getConnection(DriverManager.java:226)

这是我的连接：

```
String url = "jdbc:mysql://192.126.0.1:3306/";
        String db = "db";
        String driver = "com.mysql.jdbc.Driver";
        String table = "table";
        Connection conn = null;

        try {
            Class.forName(driver);
            try {
                conn = DriverManager.getConnection(url+db,"root","");

                conn.close();

            } catch (SQLException s) {
                s.printStackTrace();
            }
        } catch (ClassNotFoundException cnfe){
            System.out.println("ERROR");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:59:58.850

您的编译时环境中有不同版本的 JDBC 驱动程序，而运行时环境中有不同版本的 JDBC 驱动程序。扫描您的磁盘和设备`mysql-connector*.jar`并确保您周围只有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:01:54.343

我也在使用在线 mysql db 开发一个 android 应用程序。我认为您不能像在 java 应用程序中那样直接连接它。您应该编写 php 文件并将它们放在服务器上。他们将连接到数据库并向您发送 JSON 格式的数据...

# php - 将两个 $_GET 值与数据库中的行进行比较

> ID：11495768
> 
> 赞同：0
> 
> 时间：2012-07-15T21:30:56.880
> 
> 标签：php, mysql

我正在尝试比较表单中的两个 $_GET 输入，如果在数据库中找到类似的内容，则将它们添加到 SQL 语句中。这是 SQL 代码。

```
<?php
  include('db_connect.php');

  $name1 = $_GET['name1'];
  $name2 = $_GET['name2'];

  $query="SELECT * FROM Stats WHERE `Name` LIKE '$_GET[name1]%' OR '$_GET[name2]%' ";
  $res=mysql_query($query);
  $num=mysql_numrows($res);
  $i=0;

  while($i< $num){
   $Name = mysql_result($res, $i, "Name");
   echo $Name;
   $i++;
  }
?> 
```

这适用于第一个 $_GET[name1] 字段，但是如果 name2 也匹配，我想返回更多。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:36:40.650

您的第二个 LIKE 需要引用正确的列：

```
$query="SELECT * FROM Stats 
            WHERE `Name` LIKE '$_GET[name1]%' OR `Name` LIKE '$_GET[name2]%'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:37:07.407

尝试连接字符串：

```
$query="SELECT * FROM Stats WHERE `Name` LIKE '".mysql_real_escape_string($_GET["name1"])."%' OR `Name` LIKE '".mysql_real_escape_string($_GET["name2"])."%';"; 
```

使用时还需要`LIKE`- 运算符`OR`。也许函数`mysql_numrows()`被准确调用也是一个问题`mysql_num_rows()`。

# ember.js - Ember.js 的真实例子

> ID：11495769
> 
> 赞同：0
> 
> 时间：2012-07-15T21:31:01.170
> 
> 标签：ember.js

请给我一个emberjs的真实例子。这个例子将帮助我理解如何用 emberjs 编写代码。

**示例说明：**

请先打开此链接：http: [//jsfiddle.net/kwladyka/KhQvu/2/](http://jsfiddle.net/kwladyka/KhQvu/2/) （这是原型以便更好地理解我在说什么）

**然后阅读：**

Emberjs`Groups.owner`通过 JSON 从`json.php?name=groups-owner&user_id=58`和`Groups.member`从`json.php?name=groups-member&user_id=58`. 两者在`Groups.all`.

在对象组中，我拥有从 JSON 读取的所有数组值。我想要示例阅读类似的内容：`owner[2][name]`.

然后从`CreateGroupsSelect`我想读取并创建具有值和名称的`Groups.all`ListBox 。当我更改选择时，我想更改和刷新其他 View emberjs 对象中的数据。`group_id``name``<p>You select {{name}} with id {{id}}</p>`

我将非常感谢您的帮助。我正在尝试学习 emberjs，但我完全阻止了这个例子。

* * *

好的，所以我有很多问题:)

1） [如何将值表单输入选择绑定到控制器中的属性](https://stackoverflow.com/questions/8531820/how-to-bind-value-form-input-select-to-attribute-in-controller)

```
var val = $('select option:selected').val(); 
```

我在哪里可以找到可能的用法列表，例如“选择选项：已选择”。有任何文档吗？在哪里？

2）“didInsertElement”我怎么知道我应该使用这个？我应该如何查看文档才能知道这一点？为什么不使用 Ember.Select.Change 呢？

3）为什么作者使用“视图”，我认为选择我应该使用类“选择”？

4) 说真的，这是我的第一语言，当我填写所有内容时，一切都是那么随机，我不知道如何知道我能写什么以及在哪里写。我真的很愚蠢。任何提示如何理解？

5）好的，所以一步一步......

首先，我想读取 JSON 并准备要使用的数据。

```
Organizer.Groups = Ember.Object.extend({
    owner: [],
    member: [],
    all: function(){
        var owner = this.get('owner');
        var member = this.get('member');
        return owner.concat(member);
    }.property('owner', 'member'),

}); 
```

a）“对象”是一个不错的选择吗？

b) 我想用“json.php?name=groups-owner&user_id=58”中的数组填充“owner”。怎么做？我是否正确定义了“所有者”，或者我应该为此编写“ArrayController”或其他内容？也许只是“Array”或“ArrayProxy”？我现在很困惑。

c) 我应该如何从 JSON 启动加载数据？我只想在一开始就这样做一次。

PS对不起，如果你填写我的问题很愚蠢，但我真的不知道答案，我不会隐藏这个:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:00:54.897

这是一个如何在 Ember js 中使用选择菜单的示例

[选择带有 ember 的下拉菜单](https://stackoverflow.com/questions/8911206/select-dropdown-with-ember)

这是使用路线和出口助手的示例

[使用 Ember 进行导航的正确方法](https://stackoverflow.com/questions/11318572/right-way-to-do-navigation-with-ember)

如果您使用路由，请确保您拥有最新的 ember，路由仍未发布。

[路由器/StateManager - 无法使其工作](https://stackoverflow.com/questions/11386176/router-statemanager-cant-make-it-work/11390348#11390348)

使用最新的 emberjs 时请参考源代码中的文档，ember 站点中的文档将是当前稳定版本的文档。

[https://github.com/emberjs/ember.js](https://github.com/emberjs/ember.js)

路由链接由您的文件标题“具有动态路由的路由器”提供

很难解决您的完整问题，请从上面的路由示例开始尝试，当您遇到困难时提出更具体的问题，我们很乐意提供帮助。

编辑：一些链接已经过时了。

# java - 使用 For 语句创建按钮并将它们添加到面板？

> ID：11495772
> 
> 赞同：0
> 
> 时间：2012-07-15T21:31:23.027
> 
> 标签：java, arrays, swing, jpanel

我已经尝试了几种方法来做到这一点......基本上我正在尝试为作业创建一个井字游戏板，也许我遗漏了一些明显的东西，但是当我收到“不是声明”错误时尝试创建按钮。这是我得到的代码：

```
 int rows = 3;
        int cols = 3;
        JPanel ticTacToeBoard = new JPanel();
        ticTacToeBoard.setLayout(new GridLayout(3, 3));
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < cols; j++)
            {
                JButton gameButton[i] = new JButton[];
                ticTacToeBoard.add(gameButton[i]);
            }
        } 
```

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:34:42.167

您需要在某处声明您的数组：

```
JButton[] gameButton = new JButton[size]; 
```

然后在你的循环中：

```
gameButton[i] = new JButton(); 
```

例如：

```
JButton[] gameButton = new JButton[rows * cols];
for (int i = 0; i < rows; i++) {
    for (int j = 0; j < cols; j++) {
        gameButton[i] = new JButton();
        ticTacToeBoard.add(gameButton[i]);
    }
} 
```

您还可以查看[有关数组的 Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

注意：是否有理由不使用 a`List`而不是数组？如果会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T21:35:17.150

以下不正确

```
JButton gameButton[i] = new JButton[]; 
```

不需要 []。做就是了

```
JButton gameButton = new JButton();
ticTacToeBoard.add(gameButton); 
```

如果您还想将按钮存储在数组中，您应该有类似的代码

```
JButton[] buttonArray = new JButton[10];//or whatever length
...
JButton gameButton = new JButton();
buttonArray[i] = gameButton; 
```

# c# - 错误“CommentsController 没有默认构造函数”

> ID：11495776
> 
> 赞同：17
> 
> 时间：2012-07-15T21:32:07.763
> 
> 标签：c#, javascript, asp.net-mvc-4, asp.net-web-api

问题：我正在使用 MVC4 WebAPI 并在 Get() 调用期间抛出错误。

错误：

> System.ArgumentException：类型“Comments2.Controllers.CommentsController”没有默认构造函数

堆栈跟踪：

```
at System.Linq.Expressions.Expression.New(Type type)
at System.Web.Http.Internal.TypeActivator.Create[TBase](Type instanceType)
at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)"} 
```

我很乐意提供所需的任何代码，只需让我知道您想看到什么。

控制器：

```
namespace Comments2.Controllers 
{
    //[Authorize]
    public class CommentsController : ApiController 
    {
        ICommentRepository repository;

    public CommentsController(ICommentRepository repository) 
    {
        this.repository = repository;
    }

    [Queryable]
    public IQueryable<Comment> GetComments()
    {
        return repository.Get().AsQueryable();
    }

    public Comment GetComment(int id)
    {
        Comment comment;
        if (!repository.TryGet(id, out comment))
            throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NotFound));
        return comment;
    }
} 
```

JavaScript：

```
$(function() {
    $("#getComments").click(function () {
        // We're using a Knockout model. This clears out the existing comments.
        viewModel.comments([]);

        $.get('/api/comments', function (data) {
            // Update the Knockout model (and thus the UI) with the comments received back 
            // from the Web API call.
            viewModel.comments(data);
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T21:51:06.550

看起来你正在使用 HttpControllerActivator 的默认实现，它不适用于依赖注入。试试[这个](https://stackoverflow.com/questions/9527988/cannot-inject-dependencies-into-asp-net-mvc-4-web-api-controller-using-unity)，它集成了统一容器来处理依赖关系，但你可以修改它以使用你想要的任何 DI 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T15:48:30.683

我不确定您使用的是什么 IOC 容器，我个人使用 Ninject，[以下](https://gist.github.com/korz/534361a0c9776d971d60)是我用来使其正常工作的说明。

# html - 我的网站在 IE 中不起作用（但在 chrome 和 firefox 中起作用）

> ID：11495779
> 
> 赞同：0
> 
> 时间：2012-07-15T21:32:28.940
> 
> 标签：html, internet-explorer, web

我创建了一个网站[biolonline.co.uk](http://www.biolonline.co.uk)，我认为它在 Firefox 和 Chrome 中看起来相当不错（尽管我不是专家）。

但是，我不知道如何让它在 Internet Explorer 中工作。没有任何东西正确居中，并且浮动静态元素（例如右侧的红色按钮和顶部的导航栏）不会浮动/保持在同一位置。

如果有人能够看一下并告诉我哪里出错了，我将不胜感激。我已经想了很多年了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T19:42:02.007

如果没有正确的文档类型，您将永远不会让 IE 尝试像其他更现代的浏览器一样执行。您处于没有人的怪癖模式。将此添加到您的第一行：`<!DOCTYPE html>`. 然后让我们看看东西在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T19:09:32.423

解决这个问题的一个好方法是为 IE 提供一个单独的样式表，然后让它在 IE 中单独工作。如果将其限制为 IE，请使用 HTML。这是一种常见的方法，并且有很多网站可以这样做。一个例子是[http://www.wordpress.com/](http://www.wordpress.com/)。

*   查看[本文](http://scarfoo.com/archives/16)中的第 4 点，它有一些想法。
*   [本文](http://www.howtocreate.co.uk/fixedPosition.html)解释了一种修复它的方法，并解释了一些其他相关的事情。

这是一些示例代码。

```
<link rel="stylesheet" href="stylepath" />
<!--[if IE 6]>
    <link href="stylepath" rel="stylesheet" />
<![endif]--> 
```

# jquery - 我想清理这个 jQuery 代码，有什么建议吗？

> ID：11495780
> 
> 赞同：1
> 
> 时间：2012-07-15T21:32:45.817
> 
> 标签：jquery

我想清理这个 jQuery 代码，有什么建议吗？我有大约 20 个城市要添加。此代码在地图上滚动区域时为每个城市添加 CSS 类。

```
$("#Auckland").mouseover(function(){                                                
                $(".Auckland").addClass("area");        
        }); 

        $("#Auckland").mouseout(function(){                                             
                $(".Auckland").removeClass("area");     
        }); 

        $("#Northland").mouseover(function(){                                               
                $(".Northland").addClass("area");       
        }); 

        $("#Northland").mouseout(function(){                                                
                $(".Northland").removeClass("area");        
        }); 

        $("#Rodney").mouseover(function(){                                              
                $(".Rodney").addClass("area");      
        }); 

        $("#Rodney").mouseout(function(){                                               
                $(".Rodney").removeClass("area");       
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:35:56.340

```
$('#Auckland,#Northland,#Rodney').hover(function(){
     $('.'+this.id).addClass("area");
},function(){
     $('.'+this.id).removeClass("area");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:37:22.833

**请尝试将**它们链接在一起:)

明显的好处是您编写的代码更少。编写和管理更轻松、更快捷。但是您的代码也运行得更快。查看没有链接的第一个片段。每一行都告诉 jQuery 首先在整个 DOM 中搜索一个对象，然后在该对象上运行一个方法。当我们使用链接时，jQuery 只需要搜索一次对象。

```
$("#Auckland,#Northland,#Rodney").mouseover(function() {
    $(this).addClass("area"); // you can do - > $("." + this.id) if you want to add calss to all the emelents with taht class
     // you can do - > you can also change it with the class name depending your needs
});

$("#Auckland,#Northland,#Rodney").mouseout(function() {
    $(this).removeClass("area");
}); 
```

好读：[http ://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/)

& [http://www.jquery-tutorial.net/introduction/method-chaining/](http://www.jquery-tutorial.net/introduction/method-chaining/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T21:37:51.460

您可以为所有元素添加一个类`cities`并尝试以下操作：

```
$(".cities").mouseover(function(){                                                
     $("." + this.id).addClass("area");        
}); 

$(".cities").mouseout(function(){                                                
     $("." + this.id).removeClass("area");        
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T21:35:38.200

我想这可以写成...

```
$('#Auckland, #Northland, #Rodney').hover(function() {
  var targetClass = this.id;
  $('.' + targetClass).addClass('area'); 
}, function() {
  var targetClass = this.id;
  $('.' + targetClass).removeClass('area');
}); 
```

您（或某人）可能很想用 just 重写它`toggleClass`，但这是一个错误的举动，请参阅：如果有人刷新页面并将鼠标悬停在一个目标项目上，则悬停会搞砸。) 我想，这应该可以正常工作。

# css - CSS垂直拉伸到背景

> ID：11495782
> 
> 赞同：0
> 
> 时间：2012-07-15T21:33:03.243
> 
> 标签：css

我似乎无法让我的背景图像垂直拉伸（使用 CSS）并且无法获得它。不使用 jquery 插件的最佳方法是什么？

[http://realestateunusual.com/](http://realestateunusual.com/)

目前有

```
div#whitewrap {position:fixed; top:0; left:0; width:100%; height:100%;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:43:27.257

尽管问题不清楚，但我假设您希望房屋出现在页面底部？

除非必须，`body`否则不会填满屏幕。因此，您的`whitewrap`div 仅填充 100% 的`body`.

您也需要将身体高度设置为 100%（尽管这有点 hacky）或将图像的背景设置为`body`图像。然后这将在屏幕底部显示背景图像（尽管主体不是全高 - 令人困惑吗？）。

但是，您的 HTML 很难检查，因为（我假设）您用来创建它的软件添加的`div`s 比我想象的要多！

**编辑：**仔细检查后，您似乎需要设置`background-position`属性以将图像强制到底部。然后，您可以将其设置`background-color`为与图像顶部的天空颜色相同。这应该可以创建您想要的效果，而无需实际拉伸和扭曲您的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:50:58.223

您可以使用 CSS 完全做到这一点：使用 background-size 属性。

```
body {
    background-image: url(http://placekitten.com/250/150);
    background-size: 100%;
    } 
```

请参阅[http://jsfiddle.net/5TSVP/](http://jsfiddle.net/5TSVP/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:45:54.323

您应该查看 CSS 中的媒体查询，并为主要平台存储不同分辨率的图像。然后可以使用浏览器调整图像大小。

媒体查询： [http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

```
@media (min-width:800px) { background-image: url(bg-800.jpg) }
@media (min-width:1024px) { background-image: url(bg-1024.jpg) }
@media (min-width:1280px) { background-image: url(bg-1280.jpg) } 
```

用于 img 标签的 CSS 让它调整大小：

```
img { max-width:100%; } 
```

# python - 将子进程 stderr 重定向到 stdout

> ID：11495783
> 
> 赞同：49
> 
> 时间：2012-07-15T21:33:07.643
> 
> 标签：python, stderr, subprocess

我想将子进程的标准错误输出重定向到标准输出。常量[`STDOUT`](http://docs.python.org/library/subprocess.html#subprocess.STDOUT)应该这样做，不是吗？

然而，

```
$ python >/dev/null -c 'import subprocess;\
                        subprocess.call(["ls", "/404"],stderr=subprocess.STDOUT)' 
```

*确实*输出了一些东西。为什么会这样，我如何在标准输出上获得错误消息？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-15T21:33:07.643

仔细阅读[源代码](http://hg.python.org/cpython/file/0b4d0c2173ad/Lib/subprocess.py#l1284)给出了答案。特别是，当[文档](http://docs.python.org/library/subprocess.html#subprocess.STDOUT)说：

> `subprocess.STDOUT`
> (...) 的特殊值表示标准错误应该进入与标准输出相同的**句柄。**

由于在评估时 stdout 设置为“默认”（`-1`从技术上讲）`stderr=subprocess.STDOUT`，因此 stderr 也设置为“默认”。不幸的是，这意味着 stderr 输出仍会进入 stderr。

要解决此问题，请传入 stdout 文件而不是`subprocess.STDOUT`：

```
$ python >/dev/null -c 'import subprocess,sys;subprocess.call(["ls", "/404"],
                        stderr=sys.stdout.buffer)' 
```

或者，为了与 Python 的旧 2.x 版本兼容：

```
$ python >/dev/null -c 'import subprocess,sys;subprocess.call(["ls", "/404"],
                        stderr=sys.stdout.fileno())' 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-13T07:19:16.717

实际上， using`subprocess.STDOUT`完全**符合**文档中的说明：它将 stderr 重定向到 stdout 以便例如

```
proc = subprocess.Popen(self.task["command"], shell=False, bufsize=1, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
output = ""
while (True):
    # Read line from stdout, break if EOF reached, append line to output
    line = proc.stdout.readline()
    line = line.decode()
    if (line == ""): break
    output += line 
```

导致`output`包含来自 stdout 和 stderr 的进程输出的变量。

`stderr=subprocess.STDOUT`将所有 stderr 输出**直接**重定向到调用进程的 stdout，这是一个主要区别。

# iphone - 我在文本字段中输入的任何数字在标签中显示为 0

> ID：11495791
> 
> 赞同：0
> 
> 时间：2012-07-15T21:33:53.890
> 
> 标签：iphone, objective-c, ios, uitextfield, uilabel

我一直在这里使用objective-c做一件事，但我是这门语言的初学者，这就是我所做的：

有一个名为“firstviewclass”的类，它在我的第一个视图的控制中，在这个视图中有一个用户输入数字的文本字段。文本字段位于名为“setNumber”的 firstviewclass.h 中。还有另一个名为“secondviewclass”的类控制第二个视图，在这个视图中有一个标签位于 secondviewclass.h 中，我希望这个标签接收用户在文本字段中输入的值第一个视图，但是当我在 iOS 模拟器上对其进行测试时，我在文本字段中输入的任何数字都会在标签中显示为 0……我真的不知道该怎么做！

我的代码：

第一视图类.h：

```
#import <UIKit/UIKit.h>

@interface firstviewclass : UIViewController

@property (strong, nonatomic) IBOutlet UITextField *setNumber;

- (IBAction)gotonextview:(id)sender;

@end 
```

secondviewclass.h：

```
#import <UIKit/UIKit.h>
#import "firstviewclass.h"

@interface secondviewclass : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *labelthatrecivesthetextfieldvalue;

@end 
```

secondviewclass.m:

```
#import "secondviewclass.h"
#import "firstviewclass.h"

@implementation secondviewclass
@synthesize labelthatrecivesthetextfieldvalue;

-(void)viewDidLoad{
    [super viewDidLoad];

    firstviewclass *object = [[firstviewclass alloc] init];

    NSString *string = [[NSString alloc] initWithFormat:@"%i", [object.setNumber.text intValue]];

    labelthatrecivesthetextfieldvalue.text = string;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:41:06.133

在 secondviewclass 的 viewDidLoad 中，您正在创建 firstviewclass 的新实例，然后访问标签的属性。由于您没有将其设置为任何值，因此它将始终返回零。

您可以发布 gotonextview 方法的实现吗？

编辑：

我认为您需要从第一个视图控制器设置标签属性。所以在你的 gotonextview 方法中，添加这一行：

```
secondviewclass.labelthatrecivesthetextfieldvalue.text = self.setNumber.text; 
```

我承认我对你的命名方案有点迷茫，但这可能会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:43:27.150

How are you initiating the setting of the label? From `viewDidLoad`? If so, then **0** would be correct because you have not set `object.setNumber.text` to anything. Also, you aren't carrying over the data from your first viewController. You need to let the second viewController know what the number is. Try setting this value in your `NSUserDefaults`, then in your second viewController, load that value from your defaults.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T21:44:11.533

First of all, I would strongly recommend not naming a property or instance variable `setSomething`. It will cause headaches for anyone reading your code because it will always look like you're trying to call a setter. Also, please do capitalize your class names.

Your actual problem is that in `viewDidLoad` you're creating an instance of `firstviewclass`, and then trying to get the value from setNumber. That is before the user had any chance to enter anything.

Also, the `setNumber` outlet in `firstviewclass` will probably be going nowhere anyway, since you're instantiating that class yourself, instead of loading the NIB.

* * *

Edit (ah, Storyboard, d'oh):

For Storyboard, you need to pass the setNumber text field's value to the second view.

First of all, remove the `firstviewclass *object = [[firstviewclass alloc] init];` line.

Then, in your first view controller's `prepareForSegue` method, you can pass the value of the `setNumber` text field to a property in your your second view controller, and use it from there (e.g. in `configureView`).

I recommend [working through Apple's Storyboard tutorial](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1), it shows exactly what you need to do, step by step. The step you're having issues with right now, passing data to your next view controller, is [here](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html#//apple_ref/doc/uid/TP40011318-CH5-SW4).

# haskell - 在 Haskell 中，Ord 和 Enum 有时不兼容吗？

> ID：11495797
> 
> 赞同：10
> 
> 时间：2012-07-15T21:35:11.260
> 
> 标签：haskell, typeclass

可以`Ord`并且`Enum`是一个类型类吗？为什么`Enum`不需要`Eq`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T21:41:27.973

有些东西可以不按顺序列举。例如：

```
data Color = Red | Green | Blue deriving Enum 
```

颜色应该有什么顺序？没有固有的顺序，即使颜色可以枚举。

还有一些事情可以列举但不能比较是否相等。例如，浮点数的 NaN 值不等于任何值。但是，可以枚举浮点数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T21:41:22.660

`Enum`表示可以映射到整数的类型。这并没有说明这些类型应该如何排序，只是你可以用整数表示它们。

`Ord`表示有序类型。这与可以映射到整数的类型不同。例如，您不能将任意精度的浮点值映射到整数，但您*可以*对它们进行排序。虽然您在技术上可以尝试将浮点数映射到整数，但没有人会这样做。

至于`Eq`,`Ord`需要这个，因为拥有一个不支持相等的完全有序的数据类型是没有意义的。但是，`Enum`没有必要`Eq`。由于`Enum`不提供任何排序​​保证，它也不提供平等保证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T22:05:43.407

虽然我不确定这在多大程度上被普遍接受，但我一直将其视为`Enum`描述具有规范*总预*排序（即可能存在循环）的类型的类型类，因此术语序列“介于”任何一对术语之间是有限的（由 见证`enumFromTo`）。

`Ord`另一方面，描述具有规范*总阶*的类型，而不要求任何一对项之间的元素集是有限的。

# symfony - 在 Symfony2 开发环境控制器中捕获 swiftmailer 异常

> ID：11495804
> 
> 赞同：10
> 
> 时间：2012-07-15T21:36:13.570
> 
> 标签：symfony, swiftmailer

我不知道为什么我没有在我的控制器中从 Swiftmailer 中捕获异常。我做错了什么或错过了什么？

在控制器中，我有：

```
try {
    $this->get('mailer')->send($email);
}
catch (\Swift_TransportException $e) {
    $result = array(
        false, 
        'There was a problem sending email: ' . $e->getMessage()
    );
} 
```

它似乎在到达我的代码之前就被 Symfony 捕获了，所以我不能自己处理错误，而是得到标准的 500 页面 `Swift_TransportException: Connection could not be established`

如果无法发送电子邮件，则无需停止应用程序，因为电子邮件并不重要——我只想发出通知。

也许有一种方法可以禁用 Symfonys 捕获某些异常或某些控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-11T22:01:31.950

当您这样做`$this->container->get("mailer")->send($email);`时，如果您打开了假脱机，则不会发送电子邮件。请参阅[http://symfony.com/doc/current/cookbook/email/spool.html](http://symfony.com/doc/current/cookbook/email/spool.html)

If you have the default setting of `spool: { type: memory }`, the `\Swift_TransportException` will be thrown during the kernel termination phase, after your controller has exited. One way around this is to turn off the spooling (but then your users might have to wait while the email is sent), or you can make your own eventlistener to handle the exception. [http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:53:31.753

您可以尝试覆盖 config.yml 中的 Twig 异常处理程序：

```
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    exception_controller: MyBundleName:Exception:show 
```

然后，您创建一个扩展的异常类：

Symfony\Bundle\TwigBundle\Controller\ExceptionController

读取该文件的源代码，然后重写方法以在 Exception 类型为 Swift_TransportException 时切换渲染哪个模板

您可以通过在 showAction() 中设置类变量并将其传递给 findTemplate() 来做到这一点

显示动作：

$this->exceptionClassName = $exception->getClass();

查找模板：

```
if (!$debug && $this->exceptionClassName == 'MyBundle\Exception\GenericNotFoundException') {

            return 'BundleName:Exception:generic404.html.twig';
        } 
```

有关更多信息，我推荐 KNPUniversity Symfony Screencasts。

# php - 根据上下文交换表单字段类型的更好方法

> ID：11495805
> 
> 赞同：2
> 
> 时间：2012-07-15T21:36:26.790
> 
> 标签：php, symfony

是否可以制作一个表单类型来处理以下两种情况？

我正在开发一个“普通”用户（例如 ROLE_USER）可以通过填写表格来执行任务的应用程序。创建记录后，他将链接到事件表。此外，ROLE_ADMIN 用户可以代表他们链接人员（使用带有附加“用户”字段的相同表单），从用户列表中选择用户。

目前我有一个“eventType”和一个“eventAdminType”，代码重复率高达 98%。我读过有关变形金刚和形成事件的文章，但我不完全确定如何使它们适应我的需要。

“eventType”的表单代码：

```
$builder
    ->add(
        'reservedSlots', 'choice', array(
            'choices'   => array('1' => '1', '2' => '2', '3' => '3', '4' => '4', '5' => '5'),
            'required'  => true,
        )
    ) 
```

“eventAdminType”的表单代码：

```
$builder
    ->add('user')
    ->add(
        'reservedSlots', 'choice', array(
            'choices'   => array('1' => '1', '2' => '2', '3' => '3', '4' => '4', '5' => '5'),
            'required'  => true,
        )
    ) 
```

实体代码：

```
class EventUser
{
...
/**
 * @ORM\OneToOne(targetEntity="User")
 * @var type
 */
private $user;
...
// all the other fields
/**
 *
 * @ORM\Column(type="integer")
 */
private $reservedSlots 
```

我将如何创建上述单一表单类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:48:43.610

您可以为这两种类型创建表单类型类，并让一个扩展另一个：

```
namespace Acme\Bundle\DemoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class EventType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        // some code
    }
} 
```

* * *

```
namespace Acme\Bundle\DemoBundle\Form;

use Symfony\Component\Form\FormBuilder;

class EventAdminType extends EventType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        parent::buildForm($builder, $options);

        // fields for the admin form
    }
} 
```

[这是有关创建表单类](http://symfony.com/doc/current/book/forms.html#creating-form-classes)的一些附加信息。

# javascript - 使用 Gdata 在博客中检索基于标签的帖子

> ID：11495807
> 
> 赞同：4
> 
> 时间：2012-07-15T21:36:37.447
> 
> 标签：javascript, gdata, blogger

是否可以使用 gdata javascript 或任何其他 javascript api 来检索基于标签的博客文章列表？

我的使用案例：

每篇博文都有一个表示其类别的标签。有些帖子标有“摘要”及其所属类别。

我希望能够在标签页面上显示 MyCategory(Label) 的摘要。例如[http://myblog.blogspot.com/search/label/MyCategory](http://myblog.blogspot.com/search/label/MyCategory)

是否可以检索匹配“摘要”和“我的类别”的博客文章列表？

更新：

更多细节：

*   这是一个我有编辑权限的博客
*   js可以放在google网站或者博客html里面
*   该博客有 18k+ 个帖子，因此不能列出所有帖子并进行过滤。
*   myblog.blogspot 指的是任何博主，而不是实际的博主。我只是在谈论基于标签的博客过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:14:45.527

我已经阅读并重新阅读了这个问题和 blogspot-link 几次。很难理解。

我认为如果您提供更多信息会有所帮助：

*   你想把这个javascript放在哪里？我的意思是：它会被放在同一个博客上吗？我问是因为这决定了跨站点的安全要求。
*   我有一种强烈的感觉，这实际上是一个问题，你想要一个你无法控制的跨域请求（从不同的域|服务器（blogspot.com）加载数据），否则你会玩'Access-服务器端的 Control-Allow-Origin'。
*   此脚本将位于在线或本地 (x)html 源中吗？
*   您能否提供一个包含此标签的现有列表的更详细的示例（或样本），或者您是否想像蜘蛛|索引机器人一样抓取博客？

如果上述假设是正确的，那么问题的第一部分是检索[跨域数据](http://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests)（现在使用 XMLHttpRequest aka AJAX 等简单的解决方案很难）。
然后，您可以开始查看一些自己的服务器端脚本 (php) 以获取此数据并将其（预解析）发送到您的浏览器应用程序（实际上这只是位于您自己域上的代理）。
我还听说过使用 java 对象（或 silverlight？或现在也受到[跨域安全限制的](http://www.dwuser.com/flashslideshow/v4/help/advanced_topics/understanding_flash_player_cross_domain_loading_restrictions.html)flash ）来解决现代跨域安全问题。
然后，您可以嵌入一个或多个这些对象（检索源）并通过 javascript 与它们通信。这种技术的一种变体也经常用于跨浏览器的多个文件上传。
很有可能在 StackOverflow 上已经为您的这部分问题提供了解决方案（对象）。

如果您解决了问题的第一部分，则问题的第二部分简单地归结为解析（例如正则表达式）您检索到的“标签”数据，从中构建新链接以检索您之后的“摘要”内容，使用最初用于获取标签列表的相同数据检索技术。

这就是你所追求的吗？

**更新：** 在纯 javascript/json 中，这里有一个[很棒](https://stackoverflow.com/questions/680562/can-javascript-read-the-source-of-any-web-page)的主题。
如果你使用 java，你可以看看[这个](http://blog.codehangover.com/read-html-with-java-then-7-fun-things-to-do-to-it/)。
在 php 中，您使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)或[file_get_html()](http://php.net/manual/en/function.file-get-html.php)。另请参阅有关 SO 的[此主题。](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

**UPDATE2：****接受**的答案（下面没有评论：）
在谷歌的开发者博客文档 2.0 上，您可以找到：[RetrievingWithQuery](https://developers.google.com/blogger/docs/2.0/developers_guide_protocol#RetrievingWithQuery)。
引用：

> /category
>    指定类别（也称为标签）以过滤提要结果。例如，blogger.com/feeds/blogID/posts/default/-/Fritz/Laurie 返回带有 Fritz 和 Laurie 标签的条目。

您还可以在此处找到使用此技术的 javascript 工作片：[list-recent-posts-by-label](http://www.bloggersentral.com/2010/04/list-recent-posts-by-label.html)

现在您可以简单地继续“AJAX”将您的摘要从这个过滤列表中删除。

祝你好运！

# icarousel - iCarousel 类不适用于 xcode 4.2 和 mac os 10.6 上的 ARC

> ID：11495809
> 
> 赞同：1
> 
> 时间：2012-07-15T21:36:41.837
> 
> 标签：icarousel

我想包含 iCarousel 类并用它来制作画廊，但问题是它不起作用，如果我包含它。我尝试将它与 ARC 一起使用，但没有 - 没有效果。Xcode 在 iCarousel.m 中发现了大约 20 个错误：对于所有消息，例如 [self stopAnimation]、[selflayOutItemViews]、[self ....] .. 它写成“ARC 接收器类型 'iCarousel' 例如消息没有声明带选择器的方法..

我在 xcode 4.2 和 Mac OS X 10.6.8 上工作

我下载了本教程 [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-creating-an-awesome-carousel/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-creating-an-awesome-carousel/) 并且它可以工作，但是没有 iCarousel 效果 - 只是带有图像列表的滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:13:16.430

iCarousel 不再支持 Xcode 4.2 或 Snow Leopard。Lion 上支持的最低版本是 4.3。

如果您想在 4.2 上运行它（请记住，Apple 不再接受使用 4.2 构建的应用商店的应用），您可以从此页面下载旧版本：

[https://github.com/nicklockwood/iCarousel/tags](https://github.com/nicklockwood/iCarousel/tags)

我相信 1.6.1 和更早的版本可以在 4.2 上运行，但是如果您仍然遇到错误，请继续下载早期版本，直到找到可以运行的版本。

编辑：需要明确的是，使用 iCarousel 构建的应用程序*仍然*支持 Snow Leopard，但您不能使用 Snow Leopard 进行*开发。*

# eclipse - Spring roo 项目无法在 Eclipse 中编译

> ID：11495812
> 
> 赞同：0
> 
> 时间：2012-07-15T21:37:05.113
> 
> 标签：eclipse, spring, compilation, aspectj, spring-roo

我必须维护一个 spring roo 项目，所以我在 eclipse 中导入了它，我可以构建它，如果我运行 roo 命令“执行 eclipse”它可以工作。

问题是eclipse显示编译错误，例如：

> 未为 MyType 类型定义方法 entityManager()

或尝试获取模型属性时：

```
mytype.getName(); 
```

> 对于 MyType 类型，方法 getName() 未定义

我可以在文件 MyType_Roo_JavaBean.aj 中看到该方法退出：

```
privileged aspect MyType_Roo_JavaBean {
...
 public String MyType.getName() {
        return this.name;
    }
...
} 
```

我正在使用 eclipse Juno + roo 1.2.2 + Spring framework 3.1.0 + m2e 插件 + STS 插件（每晚构建）。我安装了 STS 插件，希望它会有所帮助，但不管有没有它都会出现同样的错误。

你知道什么是错的吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T17:41:54.307

我正在使用 Spring Tool Suite 3.4.0.RELEASE，遇到了类似的问题。

问题：在我的课堂上发生了许多警告和错误。

解决方案：仔细检查您在类中的任何地方都没有任何格式错误的方法。似乎任何事情都会导致这种情况。一些可能的原因可能是缺少 (1) 分号 (2) 右括号和/或 (3) 右括号。就我而言，我对正在使用的 Enum 进行了一些更改，但我忘记检查它的使用位置。一旦你把它清理干净，你应该会没事的（或者，至少我是这样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:49:19.683

尝试使用完整的 STS 版本 2.9.x 而不是自组装的 Eclipse，因为看起来您的 Eclipse 缺少 AspectJ。如果您使用完整的 STS（不仅是 spring 插件），您应该拥有所需的一切。

另一个提示是在eclipse中运行：project/maven/“Update project configuration”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T07:21:38.027

您需要的是一个 AJDT 配置器，它还需要首先安装 AJDT。

所以，如果你没有在你的 Eclipse (Juno) 中安装 AJDT.. 首先安装它：

[http://download.eclipse.org/tools/ajdt/42/update](http://download.eclipse.org/tools/ajdt/42/update)

然后，您需要从以下位置安装 AJDT Configuarator：

[http://dist.springsource.org/release/AJDT/configurator/](http://dist.springsource.org/release/AJDT/configurator/)

好吧，这件事对我有用，配置相同。让我知道，如果这对你有帮助..

# c - 如何在 C 中创建一个验证用户输入的函数？

> ID：11495816
> 
> 赞同：-3
> 
> 时间：2012-07-15T21:37:22.053
> 
> 标签：c, input, validation, scanf

我需要为我的第一学期 c 作业编写一个函数。如果有人可以帮助我，我已经编写了所有作业，我只需要验证用户输入。这是老师给我的……如果这还不够，我可以发布更多信息

`double get_double(void)` 必须使用函数来验证每个费用和收入的输入。它会不断提示用户输入一个数值，直到满足条件。该值必须是数字并且大于或等于 0。如果任何字符输入在数字之前或之后，则输入将被视为无效。

```
#include <stdio.h>
#include <conio.h>

double get_expenses(double* pSchool, double* pLiving, double* pTransp, double* pOther); /* function prototype */
double get_income(double* pEmploy, double* pOther);                                     /* function prototype */
double display_report(double School, double Living, double Transp, double OtherExp, double Employ, double OtherInc);  /* function prototype */
char get_char(char* pRecalculate);   /* function prototype */
void clear_buffer(void);   /* function prototype */
double get_double(void);   /* function prototype */

main() {

double school, living, transp, otherExp;
double employ, otherInc;
char recalculate;
int counter = 1;

while (counter > 0){  
    printf("Student Budget Planner\n");
    printf("~~~~~~~~~~~~~~~~~~~\n");
    printf("Input Set: %d\n\n", counter);             
    get_expenses(&school, &living, &transp, &otherExp);
    get_income(&employ, &otherInc);
    display_report(school, living, transp, otherExp, employ, otherInc);
    clear_buffer();
    get_char(&recalculate);
     if (recalculate == 'Y' || recalculate == 'y'){
     counter = counter + 1;
        } else {
               counter = 0;
               }

}                                      
return 0;
}

double get_expenses(double* pSchool, double* pLiving, double* pTransp, double* pOther) {
*pSchool = *pLiving = *pTransp = *pOther = 0;

double tuition, textbooks, supplies, rent, utilities, phone, groceries;
double entertainment, transportation, car, insurance, gas, other;

printf("School Expenses:\n");
printf("~~~~~~~~~~~~~~\n");
printf("Tuition (per semester): ");
scanf("%lf", &tuition);
printf("\nTextbooks(per semester): ");
scanf("%lf", &textbooks);
printf("\nSupplies: ");
scanf("%lf", &supplies);

*pSchool = (tuition / 4) + (textbooks / 4) + supplies;

printf("\n\nLiving Expenses:\n");
printf("~~~~~~~~~~~~~\n");
printf("Residence/Rent/Mortgage: ");
scanf("%lf", &rent);
printf("\nUtilities: ");  
scanf("%lf", &utilities);           
printf("\nPhone/Internet: "); 
scanf("%lf", &phone);                
printf("\nGroceries/Eating out: ");
scanf("%lf", &groceries);                 
printf("\nEntertainment: "); 
scanf("%lf", &entertainment);

*pLiving = rent + utilities + phone + groceries + entertainment;

printf("\n\nTransportation: \n");              
printf("~~~~~~~~~~~~~\n");
printf("Public Transportation: "); 
scanf("%lf", &transportation);
printf("\nCar: ");
scanf("%lf", &car);
printf("\nAuto Insurance: ");
scanf("%lf", &insurance);
printf("\nGas/Maintenance: ");
scanf("%lf", &gas);

*pTransp = transportation + car + insurance + gas;

printf("\n\nOther: \n");
printf("~~~~~\n");
printf("Any other expenses: ");
scanf("%lf", &other);

*pOther = other;

return *pSchool, *pLiving, *pTransp, *pOther;
}

double get_income(double* pEmploy, double* pOther){
*pEmploy = *pOther = 0;

double wages, family, scholarship, other;

printf("\n\nEmployment income:\n");
printf("~~~~~~~~~~~~~~~~~\n");
printf("Expected Wages/Tips: ");
scanf("%lf", &wages);

*pEmploy = wages;

printf("\n\nOther income:\n");
printf("~~~~~~~~~~~\n");
printf("Family Support: ");
scanf("%lf", &family);
printf("\nScholarship/Bursaries (per semester): ");
scanf("%lf", &scholarship);
printf("\nOther: ");
scanf("%lf", &other);

*pOther = family + scholarship + other;

return *pEmploy, *pOther;
}

double display_report(double School, double Living, double Transp, double OtherExp, double Employ, double OtherInc) {  

printf("\n\nStudent Name Budget Report\n");  
printf("~~~~~~~~~~~~~~~~~~~~~~~~~~~\n");
printf("Expenses:\n");
printf("~~~~~~~~\n");
printf("                                              MONTHLY  ANNUALY\n");
printf("School Expenses:                              $%.2lf   $%.2lf\n", School, School * 12);
printf("Living Expenses:                              $%.2lf   $%.2lf\n", Living, Living * 12);
printf("Transportation Expenses:                      $%.2lf   $%.2lf\n", Transp, Transp * 12);
printf("Other Expenses:                               $%.2lf   $%.2lf\n", OtherExp, OtherExp * 12);
printf("total Expenses:                               $%.2lf   $%.2lf\n", School + Living + Transp + OtherExp, School * 12 + Living * 12 + Transp * 12 + OtherExp * 12); 
printf("Income:\n");
printf("~~~~~~~\n");
printf("Employment Income:                            $%.2lf   $%.2lf\n", Employ, Employ * 12);
printf("Other Income:                                 $%.2lf   $%.2lf\n", OtherInc, OtherInc * 12);
printf("Total Income:                                 $%.2lf   $%.2lf\n", Employ + OtherInc, Employ * 12 + OtherInc * 12);
printf("Total Savings Available for your Goals:       $%.2lf   $%.2lf\n", (Employ + OtherInc) - (School + Living + Transp + OtherExp), (Employ * 12 + OtherInc * 12)- (School * 12 + Living * 12 + Transp * 12 + OtherExp * 12));

return 0;
}

char get_char(char* pRecalculate){

     int valid_input;

     valid_input = 0;

     while (valid_input == 0){
     printf("\nWould you like to recalculate your budget? (Y/N): ");
     scanf("%c", &*pRecalculate);
     *pRecalculate = toupper(*pRecalculate);
     if (*pRecalculate == 'Y' || *pRecalculate == 'y' || *pRecalculate == 'N' || *pRecalculate == 'n') valid_input = 1;
         else printf("Error Invalid choice\n");

     printf("\n");
     }

     return *pRecalculate;
     }

void clear_buffer(void) {

while ( getchar() != '\n' );
}

double get_double()
{

 // What to put here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:46:07.207

考虑流程的顺序，并考虑您希望程序或功能遵循的流程图/决策树。

在输入有效输入之前，您不想停止询问用户输入。您可以保证至少询问用户一次，但可能会询问多次。输入有效或无效。

现在我们开始起草一些伪代码。这是我的做法：

```
double get_double(void)
{
    double d;
    int ask_again = 1; /* continue if 1 (true), exit if 0 (false) */

    do {
        /* display message to user to let them know to type a number */
        /* read user input */
        if (/* user input didn't input a valid double */)
        {
            /* display appropriate error message */
        }
        else if (/* user entered a double, but it wasn't greater than or equal to zero */)
        {
            /* display appropriate error message */
        }
        else    /* user entered valid input, so ...  */
        {
            /* ... do something to make sure the loop exists */
        }
    } while (/* we need to ask again */);
} 
```

这对我来说是 do-while，所以我在 do-while 循环中编写了它。我提供了一个`int ask_again`变量，但我把它留给你，它可能有用，如果有的话。

您应该考虑所有注释所在的真正代码应该放在哪里。
检查您的课程笔记，看看您的老师希望您知道哪些技巧可以在这里应用。

阅读和清理用户输入在所有计算机语言中都是一个臭名昭著的问题，尤其是 C。StackOverflow 可以让您了解如何执行特定操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:41:48.270

尝试这个：

```
double get_double()
{
    double d;

    if (scanf("%lf", &d) != 1)
        /* handle error */
        reurn -1;

    if (d < 0)
        /* handle error */
        return -1;

    return d;
} 
```

或者，正如 Keith Thompson 指出的那样，您也可以是安全的：

```
double get_double()
{
    double d;
    char *line = NULL;
    size_t len;

    getline(&line, &len, stdin);
    if (line == NULL)
        return -1;

    d = strtod(line, NULL);
    free(line);

    if (d < 0)
        /* handle error */
        return -1;

    return d;
} 
```

你可以像这样使用它（因为没有办法在一个双精度中返回所有输入的双精度——也许你想要一个数组，但问题将目标签名指定为双精度（*）（））：

```
double d;

while ((d = get_double()) >= 0)
{
    /* do what you want */
} 
```

# php - 通过 AJAX 更新的 PHP 对象列表

> ID：11495824
> 
> 赞同：2
> 
> 时间：2012-07-15T21:38:53.210
> 
> 标签：php, javascript, ajax

我想要做的是我有一个待售物品列表，当有人选择其中一个时，我希望它添加到对象列表中并显示在同一页面上，旁边有一个删除按钮，所以用户可以插入/删除itens，然后当它点击确认按钮时，它将完成销售。

我一直在查看 ajax 示例以及如何创建动态组件，但我不确定我将如何做到这一点。有什么想法我该怎么做？

这是单击表格单元格时我的javascript函数：

```
function selectRow(id) {
$.ajax
({
    type: "POST",
    url: "venda.php",
    data: {selected: id},
    cache: false,
    success: function(data)
    {
    }
}); 
} 
```

ajax 函数有效，但我怎样才能让 php 将元素添加到 html 并添加引用该 iten 的删除按钮？最后，我必须获取所有元素并将其放入客户的“包”中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:18:46.280

好吧，有几种方法可以做到这一点。一种选择可能是将所选项目存储在 $_SESSION 变量中，然后将其打印为来自 venta.php 的 html 标记。此外，您可以在单击项目（元素）时添加事件以删除它们。这就像一个伪代码，当然，您需要验证数据，至少这试图解释一个关于如何使用 php、jquery 和 javascript 处理删除/添加项目的流程，而无需插件。

shop.php（存在要选择的项目表）：

```
<!-- here you add jquery and your own javascript to play with that -->

<table>
    <tr>
        <td><a name="item_id" href="#">Item one</a></td>
    </tr>
</table>
<div class="my-selected-items"></div>
<a hef="link-to-proceed-order">Proceed order</a> 
```

javascript:

```
// add the result of php response to the *selected items* div
function selectRow(id) {
$.ajax
({
    type: "POST",
    url: "venda.php?action=add",
    data: {selected: id},
    cache: false,
    success: function(data)
    {
        $('.my-selected-items').html(data);
        register_delete_action();
    }
}); 
}

function register_delete_action()
{
    $(".remove-item").click(function(){
        $.ajax
        ({
            type: "POST",
            url: "venda.php?action=delete",
            data: {selected: id},
            cache: false,
            success: function(data)
            {
                $('.my-selected-items').html(data);
                register_delete_action();
            }
        }); 
    });
} 
```

文塔.php

```
$action = $_GET['action'];

switch ($action)
{
    case "add": addItem();
    case: "delete": deleteItem();
}

function addItem(){
    $selected_id = $_POST['selected'];

    if(!array_key_exists('items', $_SESSION))
    {
        $_SESSION['items'] = array();
    }
    $_SESSION['items'][$selected_id] = array("id" => $item['id'], "name" => $item['name']);

    //print the selected items in html markup
    echo  "<ul>";
    foreach ($_SESSION['items'] as $id => $selection)
    {
        echo '<li> <a href="#" class="remove-item" name="' .$selection["name"] . '">' .$selection["name"] . '</a> </li>';
    }
    echo  "</ul>";
}

function deleteItem(){
    $selected_id = $_POST['selected'];
    unset($_SESSION['items'][$selected_id]); 

    //print the selected items in html markup
    echo  "<ul>";
    foreach ($_SESSION['items'] as $id => $selection)
    {
        echo '<li> <a href="#" class="remove-item" name="' .$selection["name"] . '">' .$selection["name"] . '</a> </li>';
    }
    echo  "</ul>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:09:01.740

JS：

```
function selectRow(id) {
    $.ajax({
        type: "POST",
        url: "venda.php",
        data: {selected: id},
        cache: false,
        success: function(data)
        {
            $('css_selector of div you want the stuff displayed in').append(data);
        }
    }); 
} 
```

PHP：

```
$input = $_POST['selected'];

// do stuff with input

echo $output; // echo data to be returned 
```

# c++ - 如何初始化 OpenSSL BIO 对象？

> ID：11495828
> 
> 赞同：1
> 
> 时间：2012-07-15T21:39:15.230
> 
> 标签：c++, openssl

我有一个 tcp 服务器，它检测传入的 SSL 连接（请参阅[此处](https://stackoverflow.com/questions/11367192/how-can-i-determine-whether-an-incoming-connection-is-expecting-ssl)），然后执行以下操作：

```
BIO* initialize(SSL_CTX *context, int socket){
    BIO *bio = NULL;
    SSL *ssl = SSL_new(context);
    SSL_set_fd(ssl, socket);
    if (SSL_accept(ssl) == -1){
        return NULL; //error
    }
    //what do I do here??
    bio = BIO_new_ssl(context, 1); //this seems wrong...
    return bio;
} 
```

我不知道如何创建 BIO 对象，文档真的很混乱。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:49:38.690

这是我的一个旧学生项目的摘录（大约 2006 年）。我希望它能对这个问题有所启发。我不使用 BIO_new_ssl()，而是使用 SSL_set_bio()。

```
SSL_CTX *ctx = setup_server_ctx("root.pem", NULL);
SSL_CTX *ssl = SSL_new(ctx);
if (NULL == ssl) {
   fprintf(stderr, "Error creating SSL context.\n")
   goto err;
}
BIO *acc = BIO_new_accept(port);

if (BIO_do_accept(acc) <= 0) {
   fprintf(stderr, "Error accepting connection.\n");
   goto err;
}

BIO *client = BIO_pop(acc);
SSL_set_bio(ssl, client, client);

if (0 >= SSL_accept(ssl)) {
    fprintf(stderr, "Error accepting SSL connection\n");
    goto end;
}   

SSL_write(ssl, SOME_MESSAGE, strlen(SOME_MESSAGE));
char buf[BUF_SIZE + 1]= {0};
int ret = SSL_read(ssl, buf, BUF_SIZE);
if (ret <= 0) { 
   break;
}   

/* do some more stuff */

SSL_get_shutdown(ssl); 
```

# c# - 对使用 Timer 的类进行单元测试

> ID：11495830
> 
> 赞同：45
> 
> 时间：2012-07-15T21:39:30.493
> 
> 标签：c#, unit-testing, tdd

我有一个类，它有一个私有成员，该成员为 type `System.Windows.Forms.Timer`。每次我的计时器滴答作响时，都会调用一个私有方法。

1.  是否值得测试该方法？（因为它是私人的）
2.  我该如何测试它？（我知道我可以让我的测试类继承我想要测试的类......）
3.  我应该嘲笑我的计时器吗？因为如果我必须测试一个使用内部计时器的类，我的测试可能需要很长时间才能完成，对吧？

编辑：

实际上，该方法依赖于时间，这里是代码：

```
private void alertTick(object sender, EventArgs e) {
    if (getRemainingTime().Seconds <= 0) {
        Display.execute(Name, WarningState.Ending, null);
        AlertTimer.Stop();
    }
    else {
        var warning = _warnings.First(x => x == getRemainingTime());

        if (warning.TotalSeconds > 0)
            Display.execute(Name, WarningState.Running, warning);
    }
} 
```

如您所见，如果计时器正在运行，它会`Display.execute()`使用与结束时不同的参数进行调用（当剩余时间等于 0 时）。那会是设计的问题吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-15T23:10:58.927

1.  您不是在测试方法（私有或公共） - 您正在验证班级的行为。而且，如果您还没有验证某些行为，那么您就无法判断它是否已实施。可以通过多种方式调用此行为 - 类的公共接口，或某些依赖事件。行为调用也不一定会改变公共接口所达到的内容，与依赖项的交互也很重要。
2.  请参见下面的示例 - 它显示了如何测试这种“隐藏”行为。
3.  请参见下面的示例 - 它展示了如何拆分职责、注入依赖项和模拟它们。

实际上你的班级有太多的责任 - 一个是安排一些任务，另一个 - 执行一些动作。尝试将您的班级分成两个具有[单一职责](http://en.wikipedia.org/wiki/Single_responsibility_principle)的单独班级。

因此，调度转到调度程序 :) 调度程序的 API 可能类似于：

```
public interface IScheduler
{
    event EventHandler<SchedulerEventArgs> Alarm;
    void Start();
    void Stop();
} 
```

现在忘记调度程序。返回并实现你的第二个类，这将显示一些警告。让我们先测试一下（使用起订量）：

```
[Test]
public void ShouldStopDisplayingWarningsWhenTimeIsOut()
{
    Mock<IDisplay> display = new Mock<IDisplay>();
    Mock<IScheduler> scheduler = new Mock<IScheduler>();                      

    Foo foo = new Foo("Bar", scheduler.Object, display.Object);
    scheduler.Raise(s => s.Alarm += null, new SchedulerEventArgs(0));

    display.Verify(d => d.Execute("Bar", WarningState.Ending, null));
    scheduler.Verify(s => s.Stop());
} 
```

编写实现：

```
public class Foo
{
    private readonly IScheduler _scheduler;
    private readonly IDisplay _display;
    private readonly string _name;

    public Foo(string name, IScheduler scheduler, IDisplay display)
    {
        _name = name;
        _display = display;
        _scheduler = scheduler;
        _scheduler.Alarm += Scheduler_Alarm;
        _scheduler.Start();
    }

    private void Scheduler_Alarm(object sender, SchedulerEventArgs e)
    {
        _display.Execute(_name, WarningState.Ending, null);
        _scheduler.Stop();
    }
} 
```

测试通过。再写一个：

```
[Test]
public void ShouldNotStopDisplayingWarningsWhenTimeRemains()
{
    Mock<IDisplay> display = new Mock<IDisplay>(MockBehavior.Strict);
    Mock<IScheduler> scheduler = new Mock<IScheduler>(MockBehavior.Strict);
    scheduler.Setup(s => s.Start());

    Foo foo = new Foo("Bar", scheduler.Object, display.Object);
    scheduler.Raise(s => s.Alarm += null, new SchedulerEventArgs(1));
} 
```

测试失败。啊，你需要剩余时间的条件：

```
private void Scheduler_Alarm(object sender, SchedulerEventArgs e)
{
    if (e.RemainingTime > 0)
        return;

    _display.Execute(_name, WarningState.Ending, null);
    _scheduler.Stop();
} 
```

您可以继续为您的类编写测试，该类负责处理调度程序警报并在显示上执行一些警告。完成后，您可以为您的`IScheduler`接口编写实现。无论您将如何实现调度 - 通过 System.Windows.Forms.Timer 或通过 System.ThreadingTimer 或其他方式。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-15T21:52:50.987

> 是否值得测试该方法？（因为它是私人的）

您的目的是决定您的代码是否有效。即使它是一个私有方法，它也应该生成一个公共接口可以访问的输出。您应该以用户可以知道它是否工作的方式设计您的课程。

此外，当您进行单元测试时，如果您可以模拟计时器，则可以访问分配给计时器的 Elapsed 事件的回调。

> 我该如何测试它？（我知道我可以让我的测试类继承我想要测试的类......）

您可以在此处使用适配器类。首先，您必须定义一个抽象，因为 Timer 类不提供。

```
public interface ITimer
{
    void Start();
    void Stop();
    double Interval { get; set; }
    event ElapsedEventHandler Elapsed;
    //and other members you need
} 
```

然后你可以在一个适配器类中实现这个接口，只是继承自 Timer 类。

```
public class TimerAdaper : Timer, ITimer { } 
```

您应该在构造函数（或作为属性）中注入抽象，以便在测试中模拟它。

```
public class MyClass
{
    private readonly ITimer _timer;

    public MyClass(ITimer timer)
    {
        _timer = timer
    }
} 
```

> 我应该嘲笑我的计时器吗？因为如果我必须测试一个使用内部计时器的类，我的测试可能需要很长时间才能完成，对吧？

当然，你应该嘲笑你的计时器。您的单元测试不能依赖于系统时间。您应该通过模拟来引发事件并查看代码的行为方式。

# mysql - MYSQL 查询跨数据库连接返回 NULL

> ID：11495832
> 
> 赞同：2
> 
> 时间：2012-07-15T21:39:42.350
> 
> 标签：mysql, null, return, left-join, cross-database

```
select t1.CardID,t2.Description,t5.BioData 
from db2.tblemployeeinfob t1
left join (db2.tbldepartments t2,db1.tblbiometrics t5)
on 
(t1.Department = t2.DepartmentID and
t1.CardID=t5.CardID
) 
```

返回结果是`1420 | (NULL) | (NULL)`

预期结果是 `1420 | DB2_Description_Value | DB1_BioData_value`

如果我删除跨数据库连接，比如删除 db1，那么查询将可以很好地连接来自同一数据库的剩余两个表。

**如果我在 db1 和 db2 之间进行跨数据库连接，即使来自同一数据库 db2 的表 t2 也会返回 NULL。**

我的查询哪里出了问题，所以我可以从两个数据库中获取价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:44:30.447

您不应该在这里使用交叉连接。您需要两个单独的左连接：

```
SELECT t1.CardID, t2.Description, t5.BioData 
FROM db2.tblemployeeinfob AS t1
LEFT JOIN db2.tbldepartments AS t2 ON t1.Department = t2.DepartmentID
LEFT JOIN db1.tblbiometrics AS t5 ON t1.CardID = t5.CardID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T18:46:46.940

```
 <?php
            include('../dbcon.php');
            include('../session.php');
            if (isset($_POST['delete_user'])){
            $id=$_POST['selector'];
            $class_id = $_POST['teacher_class_id'];
             $get_id=$_POST['get_id']; 
            $N = count($id);
            for($i=0; $i < $N; $i++)
            {
                $result = mysql_query("select * from files  where file_id = '$id[$i]' ")or die(mysql_error());
                while($row = mysql_fetch_array($result)){

                $fname = $row['fname'];
                $floc = $row['floc'];
                $fdesc = $row['fdesc'];
                $uploaded_by = $row['uploaded_by'];

                mysql_query("insert into files (floc,fdatein,fdesc,class_id,fname,uploaded_by) value('$floc',NOW(),'$fdesc','$class_id','$fname','$uploaded_by')")or die(mysql_error());

                }
            }
            ?>
            <script>
            window.location = 'downloadable.php<?php echo '?id='.$get_id; ?>';
            </script>
            <?php
            }

            if (isset($_POST['copy'])){
            $id=$_POST['selector'];

            $N = count($id);
            for($i=0; $i < $N; $i++)
            {
                $result = mysql_query("select * from files  where file_id = '$id[$i]' ")or die(mysql_error());
                while($row = mysql_fetch_array($result)){

                    $fname = $row['fname'];
                $floc = $row['floc'];
                $fdesc = $row['fdesc'];

                mysql_query("insert into teacher_backpack (floc,fdatein,fdesc,teacher_id,fname) value('$floc',NOW(),'$fdesc','$session_id','$fname')")or die(mysql_error());

                }
            }
            ?>
            <script>
            window.location = 'backpack.php';
            </script>
            <?php
            }
            ?>
            <?php

            if (isset($_POST['share'])){
            $id=$_POST['selector'];
            $teacher_id = $_POST['teacher_id1'];
            echo $teacher_id ; 
            $N = count($id);
            for($i=0; $i < $N; $i++)
            {
                $result = mysql_query("select * from files  where file_id = '$id[$i]' ")or die(mysql_error());
                while($row = mysql_fetch_array($result)){

                    $fname = $row['fname'];
                $floc = $row['floc'];
                $fdesc = $row['fdesc'];

                mysql_query("insert into teacher_shared (floc,fdatein,fdesc,teacher_id,fname,shared_teacher_id) value('$floc',NOW(),'$fdesc','$session_id','$fname','$teacher_id')")or die(mysql_error());

                }
            }
            ?>
            <script>
             window.location = 'tambah_share_file.php';
            </script>
            <?php
            }
            ?> 
```

# jquery - jquery animate - 如果另一个动画开始，则停止动画完成

> ID：11495838
> 
> 赞同：2
> 
> 时间：2012-07-15T21:40:30.230
> 
> 标签：jquery

谁能帮我更好地理解动画。

我想知道是否可以在运行时停止当前的动画位置。然后从另一个动画功能，将它从当前位置进行到新的位置。

试图解释这一点真的很难，所以我创造了一个[小提琴](http://jsfiddle.net/motocomdigital/L5uh4/9/)......

**[小提琴](http://jsfiddle.net/motocomdigital/L5uh4/9/)_**

[http://jsfiddle.net/motocomdigital/L5uh4/9/](http://jsfiddle.net/motocomdigital/L5uh4/9/)

在小提琴中，您将看到一条推文。如果您只是将推文翻过来，它将为左侧位置设置动画，从而将整个推文显示在视野中。

但是，如果您退出推文，它会重新开始动画。

*注意：如果推文比可见的推特区域短，动画将不会运行。如果发生这种情况，请将 fiddle 窗口减小到大致以下大小并重新运行[fiddle](http://jsfiddle.net/motocomdigital/L5uh4/9/)。*

![在此处输入图像描述](../Images/b5640a20b9f07d32bcc2fdda7c1f0b2a.png)

**我的问题**

如果我连续 10 次在推文上和推文上悬停。它想在一个队列中一个接一个地运行所有 10 个动画交替。

我不希望这种情况发生，我需要它，所以如果我将鼠标悬停在推文上 - 动画开始，但如果我悬停在关闭（在动画完成之前），我希望它暂停在当前位置并动画到悬停在关闭位置。而不是堆叠队列。但这也可以反过来吗？

有一个简单的方法吗？谢谢

**查看我的代码**

```
$("#tweet").tweet({

    username: ["seaofclouds", "laughingsquid"],
    count: 1,
    template: "{text}",
    avatar_size: 32

}).bind("loaded", function(){

    var visible = $('#tweet ul').width(),
        spanTweet = $('span.tweet_text').width();  

    if ( spanTweet > visible ) {

        $('#tweet ul').hover(function() {

            $('#tweet ul li').animate({            
                left : '-' + ( spanTweet - visible ) + 'px'              
            }, 3000 );

        }, function() {

            $('#tweet ul li').animate({              
                left : '0px'              
            }, 3000 );

        });

    }

}); 
```

提前感谢您对此的任何帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:47:28.427

只是另一个关于[`.stop`](http://api.jquery.com/stop/).

```
$('#tweet ul li').stop().animate( ... ); 
```

我希望[这个小提琴](http://jsfiddle.net/aGGDK/)是你想要的。

# java - 在 ms 访问中保存 jpeg 格式并在摇摆的面板上显示它

> ID：11495839
> 
> 赞同：0
> 
> 时间：2012-07-15T21:40:35.977
> 
> 标签：java, sql, database, netbeans

我正在开发一个应用程序，它有一个带有照片空间的表格。我想用存储在数据库（MS Access）中的照片填充这个空白区域，但问题是 -

1) 我不知道如何在 MS Access 中存储照片 2) 我不知道使用哪种方法从数据库中检索照片。

我正在使用 Netbeans IDE 和 Java 制作 gui。

请帮我完成这项工作

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:09:31.923

我认为这取决于你要使用什么。我们可以使用两种方法，例如保存路径地址或将图像保存到二进制数据中，但根据我的观点，我想使用路径地址保存数据，以便优化性能。

希望它可以帮助你。

[http://www.daniweb.com/software-development/java/threads/250763/image-to-ms-access](http://www.daniweb.com/software-development/java/threads/250763/image-to-ms-access)

或者

[如何获取图像的绝对路径？](https://stackoverflow.com/questions/3205503/how-to-get-image-absolute-path)

# android - 是否可以启动 android 应用小部件屏幕或列表？

> ID：11495840
> 
> 赞同：2
> 
> 时间：2012-07-15T21:40:43.433
> 
> 标签：android, android-intent, widget

是否可以构建一个意图来启动应用小部件屏幕或列表，用户可以在其中选择应用小部件添加到主屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:55:43.857

我刚刚`Add Widget`在看 LogCat 时打开并看到了这个，也许它会有所帮助：

`Starting: Intent {act=android.appwidget.action.APPWIDGET_PICK}`

# android - SurfaceHolder 回调如何与 Activity 生命周期相关？

> ID：11495842
> 
> 赞同：73
> 
> 时间：2012-07-15T21:40:50.977
> 
> 标签：android, camera, surfaceview

我一直在尝试实现一个需要在表面上进行相机预览的应用程序。正如我所看到的，活动和表面生命周期都包含以下状态：

1.  当我第一次启动我的活动时：`onResume()->onSurfaceCreated()->onSurfaceChanged()`
2.  当我离开我的活动时：`onPause()->onSurfaceDestroyed()`

在这个方案中，我可以在 和 中进行相应的调用，如打开/释放相机和开始/停止`onPause/onResume`预览`onSurfaceCreated()/onSurfaceDestroyed()`。

它工作正常，除非我锁定屏幕。当我启动应用程序时，然后锁定屏幕并稍后解锁，我看到：

`onPause()`- 屏幕锁定后没有其他内容 - 然后`onResume()`解锁后 - 之后没有表面回调。实际上，`onResume()`在按下电源按钮并且屏幕打开后调用，但锁定屏幕仍处于活动状态，因此，它甚至在活动变得可见之前。

使用这个方案，我解锁后黑屏，并且没有调用表面回调。

这是一个代码片段，它不涉及相机的实际工作，而是`SurfaceHolder`回调。即使在我的手机上使用此代码也会重现上述问题（当您按下“返回”按钮时，回调会以正常顺序调用，但在锁定屏幕时会丢失）：

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {

    private static final String tag= "Preview";

    public Preview(Context context) {
        super(context);
        Log.d(tag, "Preview()");
        SurfaceHolder holder = getHolder();
        holder.addCallback(this);
        holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        Log.d(tag, "surfaceCreated");
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.d(tag, "surfaceDestroyed");
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Log.d(tag, "surfaceChanged");
    }
} 
```

关于在 Activity 暂停后为什么表面仍未被破坏的任何想法？此外，在这种情况下，您如何处理相机生命周期？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-02T16:47:17.573

**编辑：**如果 targetSDK 大于 10，则将应用置于睡眠调用`onPause` *和* `onStop`. [资源](https://stackoverflow.com/a/25497907/1094605)

我在姜饼手机上的一个微型相机应用程序中查看了 Activity 和 SurfaceView 的生命周期。你是完全正确的；按下电源按钮使手机进入睡眠状态时，表面不会被破坏。当手机进入睡眠状态时，Activity 会`onPause`。（并且不这样做`onStop`。）`onResume`当手机唤醒时它会这样做，而且，正如你所指出的，它会在锁定屏幕仍然可见并接受输入时这样做，这有点奇怪。当我通过按 Home 按钮使 Activity 不可见时，Activity 会同时执行`onPause`和`onStop`。在这种情况下，有些东西会导致`surfaceDestroyed`在结束`onPause`和开始之间的回调`onStop`。这不是很明显，但似乎非常一致。

当按下电源按钮让手机进入睡眠状态时，除非明确采取措施阻止它，否则相机会继续运行！如果我让相机为每个预览帧执行每个图像的回调，其中有一个 Log.d()，那么当手机假装睡觉时，日志语句就会不断出现。我认为这是*非常偷偷摸摸*的。

作为另一个混乱，如果正在创建表面，则在活动中的回调`surfaceCreated`和*之后*`surfaceChanged`发生。 *`onResume`*

 *通常，我在实现 SurfaceHolder 回调的类中管理相机。

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {
    private boolean previewIsRunning;
    private Camera camera;

    public void surfaceCreated(SurfaceHolder holder) {
        camera = Camera.open();
        // ...
        // but do not start the preview here!
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // set preview size etc here ... then
        myStartPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        myStopPreview();
        camera.release();
        camera = null;
    }

   // safe call to start the preview
   // if this is called in onResume, the surface might not have been created yet
   // so check that the camera has been set up too.
   public void myStartPreview() {
       if (!previewIsRunning && (camera != null)) {
           camera.startPreview();
           previewIsRunning = true;
       }
   }

   // same for stopping the preview
   public void myStopPreview() {
       if (previewIsRunning && (camera != null)) {
           camera.stopPreview();
           previewIsRunning = false;
       }
   }
} 
```

然后在活动中：

```
@Override public void onResume() {
    preview.myStartPreview();  // restart preview after awake from phone sleeping
    super.onResume();
}
@Override public void onPause() {
    preview.myStopPreview();  // stop preview in case phone is going to sleep
    super.onPause();
} 
```

这对我来说似乎没问题。旋转事件导致 Activity 被销毁并重新创建，这导致 SurfaceView 也被销毁和重新创建。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-05-21T14:44:28.110

另一个工作正常的简单解决方案 - 更改预览表面的可见性。

```
private SurfaceView preview; 
```

预览是 init in`onCreate`方法。在预览表面的`onResume`方法集中`View.VISIBLE`：

```
@Override
public void onResume() {
    preview.setVisibility(View.VISIBLE);
    super.onResume();
} 
```

并分别在`onPause`设置可见性`View.GONE`：

```
@Override
public void onPause() {
    super.onPause();
    preview.setVisibility(View.GONE);
    stopPreviewAndFreeCamera(); //stop and release camera
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-10T14:29:09.063

感谢之前的所有答案，我设法让我的相机预览在从背景或锁屏返回时清晰地工作。

正如@e7fendy 提到的，SurfaceView 的回调在屏幕锁定时不会被调用，因为表面视图对系统仍然可见。

因此，正如@validcat 建议的那样，分别调用`preview.setVisibility(View.VISIBLE);`onPause `preview.setVisibility(View.GONE);`() 和 onResume() 将强制表面视图重新布局自身并将其称为回调。

届时，@emrys57 的解决方案加上上面这两个可见性方法调用将使您的相机预览工作简单:)

所以我只能给你们每个人+1，因为你们都应得的；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T02:44:19.430

SurfaceHolder.Callback 与它的 Surface 有关。

活动在屏幕上吗？如果是这样，就不会有SurfaceHolder.Callback，因为Surface还在屏幕上。

要控制任何 SurfaceView，您只能在 onPause/onResume 中处理它。对于SurfaceHolder.Callback，可以在Surface发生变化（created、sizechanged、destroy）时使用，比如surfaceCreated时初始化openGL，surfaceDestroyed时销毁openGL等。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-06-25T07:43:56.727

这是所有回调方法的替代解决方案，它们可能都受到具有活动周期的相同未定义事件顺序行为的影响。除非您要检查用于确定源触发器和控制实现的每个回调的所有 android 代码，并希望代码库将来不会更改，否则真的可以说明回调之间的事件顺序和活动生命周期事件可以得到保证。

现在，出于开发目的，这些顺序交互通常可以称为未定义行为。

因此，最好始终正确处理这种未定义的行为，这样一开始就不会出现问题，方法是确保订单是已定义的行为。

例如，我的 Sony Xperia 在睡眠时会循环我当前的应用程序，方法是销毁应用程序，然后重新启动它并将其置于暂停状态，信不信由你。

google 在他们的 SDK 中提供了多少事件排序行为测试作为宿主环境实现的特殊测试构建我不知道，但他们肯定需要努力确保事件排序的行为都被锁定在相当严格的事情。

[https://code.google.com/p/android/issues/detail?id=214171&sort=-opened&colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened](https://code.google.com/p/android/issues/detail?id=214171&sort=-opened&colspec=ID%20Status%20Priority%20Owner%20Summary%20Stars%20Reporter%20Opened)

导入android.util.Log；导入 android.util.SparseArray；

/** * 由 woliver 于 2016/06/24 创建。* * Android 主机环境，规定了 OnCreate、onStart、onResume、onPause、onStop、onDestory 的 Activity 生命周期，* 我们需要释放内存和句柄以供其他应用程序使用。* 恢复时，我们有时需要重新绑定并激活这些项目与其他对象。* 通常，这些其他对象提供来自宿主环境的回调方法，这些方法提供 * 一个 onCreated 和 onDestroy，其中我们只能从 OnCreated 绑定到该对象，并松开 * 绑定 onDestory。*这些类型的回调方法，运行时间是我们主机环境的控制器*并且它们不能保证活动生命周期的行为/执行顺序和这些回调方法*保持一致。*出于开发的目的，交互和执行顺序在技术上可以称为未定义 *因为它取决于主机实现实施者，三星，索尼，htc。* * 请参阅以下开发者文档：[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html) * 引用：* 如果一个活动完全被另一个活动遮挡，它就会停止。它仍然保留所有状态 * 和成员信息，但是，它不再对用户可见，因此它的窗口 * 隐藏，并且当其他地方需要内存时，它通常会被系统杀死。* EndQuato: * * 如果活动没有被隐藏，那么主机系统调用的任何回调都不会被调用，例如 OnCreate 和 OnDestory 方法接口 SurfaceView 回调。* 这意味着您必须暂停已绑定到 SurfaceView 的对象（例如相机 *），并且永远不会重新绑定对象，因为永远不会调用 OnCreate 回调。* */

```
public abstract class WaitAllActiveExecuter<Size>
{
     private SparseArray<Boolean> mReferancesState = null;

// Use a dictionary and not just a counter, as hosted code
// environment implementer may make a mistake and then may double executes things.
private int mAllActiveCount = 0;
private String mContextStr;

public WaitAllActiveExecuter(String contextStr, int... identifiers)
{
    mReferancesState = new SparseArray<Boolean>(identifiers.length);

    mContextStr = contextStr;

    for (int i  = 0; i < identifiers.length; i++)
        mReferancesState.put(identifiers[i], false);
}

public void ActiveState(int identifier)
{
    Boolean state = mReferancesState.get(identifier);

    if (state == null)
    {
        // Typically panic here referance was not registered here.
        throw new IllegalStateException(mContextStr + "ActiveState: Identifier not found '" + identifier + "'");
    }
    else if(state == false){

        mReferancesState.put(identifier, true);
        mAllActiveCount++;

        if (mAllActiveCount == mReferancesState.size())
            RunActive();
    }
    else
    {
        Log.e(mContextStr, "ActivateState: called to many times for identifier '" + identifier + "'");
        // Typically panic here and output a log message.
    }
}

public void DeactiveState(int identifier)
{
    Boolean state = mReferancesState.get(identifier);

    if (state == null)
    {
        // Typically panic here referance was not registered here.
        throw new IllegalStateException(mContextStr + "DeActiveState: Identifier not found '" + identifier + "'");
    }
    else if(state == true){

        if (mAllActiveCount == mReferancesState.size())
            RunDeActive();

        mReferancesState.put(identifier, false);
        mAllActiveCount--;
    }
    else
    {
        Log.e(mContextStr,"DeActiveState: State called to many times for identifier'" + identifier + "'");
        // Typically panic here and output a log message.
    }
}

private void RunActive()
{
    Log.v(mContextStr, "Executing Activate");

    ExecuterActive();
}

private void RunDeActive()
{
    Log.v(mContextStr, "Executing DeActivate");

    ExecuterDeActive();
}

abstract public void ExecuterActive();

abstract public void ExecuterDeActive();
} 
```

类的实现和使用示例，它处理或未定义的行为 android 主机环境实现者。

```
private final int mBCTSV_SurfaceViewIdentifier = 1;
private final int mBCTSV_CameraIdentifier = 2;

private WaitAllActiveExecuter mBindCameraToSurfaceView =
        new WaitAllActiveExecuter("BindCameraToSurfaceViewe", new int[]{mBCTSV_SurfaceViewIdentifier, mBCTSV_CameraIdentifier})
{
    @Override
    public void ExecuterActive() {

        // Open a handle to the camera, if not open yet and the SurfaceView is already intialized.
        if (mCamera == null)
        {
            mCamera = Camera.open(mCameraIDUsed);

            if (mCamera == null)
                throw new RuntimeException("Camera could not open");

            // Look at reducing the calls in the following two methods, some this is unessary.
            setDefaultCameraParameters(mCamera);
            setPreviewSizesForCameraFromSurfaceHolder(getSurfaceHolderForCameraPreview());
        }

        // Bind the Camera to the SurfaceView.
        try {
            mCamera.startPreview();
            mCamera.setPreviewDisplay(getSurfaceHolderForCameraPreview());
        } catch (IOException e) {

            e.printStackTrace();
            ExecuterDeActive();

            throw new RuntimeException("Camera preview could not be set");
        }
    }

    @Override
    public void ExecuterDeActive() {

        if ( mCamera != null )
        {
            mCamera.stopPreview();

            mCamera.release();
            mCamera = null;
        }
    }
};

@Override
protected void onPause() {

    mBindCameraToSurfaceView.DeactiveState(mBCTSV_CameraIdentifier);

    Log.v(LOG_TAG, "Activity Paused - After Super");
}

@Override
public void  onResume() {

    mBindCameraToSurfaceView.ActiveState(mBCTSV_CameraIdentifier);
}

private class SurfaceHolderCallback implements SurfaceHolder.Callback
{
    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Log.v(LOG_TAG, "Surface Changed");

    }

    public void surfaceCreated(SurfaceHolder surfaceHolder) {

        Log.v(LOG_TAG, "Surface Created");
        mBindCameraToSurfaceView.ActiveState(mBCTSV_SurfaceViewIdentifier);
    }

    public void surfaceDestroyed(SurfaceHolder arg0) {

        Log.v(LOG_TAG, "Surface Destoryed");
        mBindCameraToSurfaceView.DeactiveState(mBCTSV_SurfaceViewIdentifier);
    }
} 
```*

# spring - JSF 和 JSP 共存

> ID：11495846
> 
> 赞同：0
> 
> 时间：2012-07-15T21:41:07.210
> 
> 标签：spring, jsp, jsf, jakarta-ee, tiles

我有一个使用 JSP 的 java web 项目，现在我必须使用 jsf，因为我需要一个仅由 jsp 无法提供的功能。我遇到的问题是我不能将这两种技术合并到同一个项目中，而且我不能重新编码我已经使用 jsp 技术所做的所有事情。有人可以帮助我做我应该做的事情将这两种技术合并到同一个项目中吗？我正在使用带有 maven 的 spring、hibernate、tiles，这解释了我在尝试重新编码我所做的所有事情时遇到的困难；这是我的配置文件的一部分：

从我的 web.xml

```
<filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    /WEB-INF/spring-security.xml
    /WEB-INF/applicationContext.xml
    </param-value>
</context-param> 
```

从我的 application-context.xml

```
<context:component-scan base-package="org.me.myproject" />
    <mvc:annotation-driven />
    <import resource="hibernate-context.xml" />
    <import resource="tiles-context.xml" /> 
```

从我的 spring-servlet.xml

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
    p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" /> 
```

如果我尝试通过 JSF 更改解析器，即使使用 jsf 页面它也不起作用

```
org.springframework.web.jsf.el.SpringBeanFacesELResolver 
```

有人知道我该怎么做吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:45:06.563

我明白了，我为将两种技术共存到同一个项目中所做的解决方案是通过重定向，实际上，我添加了一个从 jsp 重定向到 jsf 文件或从 jsf 重定向到 jsf 文件的文件，在重定向之后，目标页面（例如 jsf 页面）由他自己的控制器（在 jsf 的情况下为托管 bean）管理。

# javascript - 消除“a”标签可以吗？

> ID：11495851
> 
> 赞同：0
> 
> 时间：2012-07-15T21:41:41.717
> 
> 标签：javascript, html, css

我厌倦了单击标签时出现的虚线框......所以我开始用 p 标签替换它们......并为点击事件添加事件侦听器。

我不禁注意到其他热门网站不这样做（例如，当您单击在 SO 上发布您的问题时，会出现烦人的虚线框）

有什么好的理由不用 p 标签替换 a 标签。我不需要任何特殊的 a 标记属性……事实上，我必须在我的 JavaScript 中使用 preventDefault() 来阻止它们有时链接。

几乎可以消除 A 标签吗？

这是一个关于主要现代浏览器的问题。

我即将摆脱它们......而且我很偏执，我错过了一些东西，因为我看到它们几乎无处不在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T21:43:38.620

不，这**不行**。

不支持你的样式的浏览器需要锚标签，我只是在谈论旧版本的 IE。请记住，屏幕阅读器、纯文本用户和浏览器插件都希望找到您的锚标记。

正如 Dash 指出的那样，搜索引擎爬虫等机器人也需要您的锚标签才能跟踪它们并索引您的页面。

HTML 用于文档结构。CSS用于样式。保持这个原则很重要。

关于那个虚线框的注释......在那里显示对元素的关注。不是每个人都使用你知道的鼠标。有些人更喜欢用键盘浏览文档，而焦点框有助于实现这一点。即使您成功地使用 CSS 删除它......请不要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:46:00.977

不要这样做，因为 html 语义。例如，屏幕阅读器和搜索引擎可能无法跟踪您的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:17:54.193

如果您不希望按钮和链接在被点击后周围有一个虚线框，只需添加一个使元素模糊的侦听器：

```
<a href="..." onclick="this.blur();">Look ma, no dots</a> 
```

还有一个 CSS 属性可以设置为没有点，但我不记得了。搜索或查看 Mozilla 默认样式表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T22:41:11.680

我有点不同意其他两位评论者。虽然它确实会破坏屏幕阅读器并且通常不向后兼容......

如果您有一个不关心上述任何内容的特定用例，那么……这是您的项目。:)

你也可以通过将以下内容添加到 CSS 中来实现这一点并保留锚标签：

```
a 
{
text-decoration: none; 
} 
```

# html - 为什么 ”" 元素不发布数据？

> ID：11495855
> 
> 赞同：5
> 
> 时间：2012-07-15T21:42:02.973
> 
> 标签：html, forms, input

按下提交按钮后，以下页面不会在 post 请求中发送任何内容：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>My title</title>
</head>
<body>

                <form id="myform" method="POST" action="save.php" >

                    <label for="title">Title: </label>
                    <input id="title" type="text" size="80" value="Damned"/>

                    <input type="submit">

                </form>

</body>
</html> 
```

为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T21:43:25.070

他们什么都不服从。你必须改变

```
<input id="title"> 
```

到

```
<input id="title" name="somethingThatWillAppearIn$_POST"> 
```

# actionscript-3 - Actionscript 3：健康栏和按钮

> ID：11495856
> 
> 赞同：0
> 
> 时间：2012-07-15T21:42:28.213
> 
> 标签：actionscript-3, variables, layer, movieclip

所以基本上我正在制作一个游戏，其中单击一个按钮来减少健康栏中的健康量。我在舞台上有一个名为 fortyfivedown_btn 的按钮，还有一个健康栏，它是一个 101 帧（包括零）电影剪辑。健康栏的实例名称为 lifebar。在舞台上，按钮编码为：

```
fortyfivedown_btn.addEventListener(MouseEvent.CLICK, fortyfivedownClick);
function fortyfivedownClick(event:MouseEvent):void{
    lifebar.health = lifebar.health-45;
    } 
```

在 healthbar 影片剪辑中，我有一层编码是：

```
var health:int = 100;
gotoAndStop(health + 1);
if(health < 0) health = 0;
else if(health > 100) health = 100;
gotoAndStop(health + 1); 
```

所以，有我的编码。问题是，当单击按钮时，健康栏不会下降。我在按钮中跟踪了健康变量：

```
 fortyfivedown_btn.addEventListener(MouseEvent.CLICK, fortyfivedownClick);
  function fortyfivedownClick(event:MouseEvent):void{
        lifebar.health = lifebar.health-45;
        }
        {
                trace(lifebar.health);  
                } 
```

我看到输出是 0。由于某种原因，按钮认为健康是 0，当我在健康栏电影剪辑中声明它是 100 时？任何帮助表示赞赏。

（编辑）

好吧，在回答跟踪问题时，如果我不那样做，就没有输出。我应该说我是一个初学者，并且正在学习，所以请多多包涵。这是我的 fla 文件：

[https://skydrive.live.com/embed?cid=9AB08B59DCCDF9C6&resid=9AB08B59DCCDF9C6%21107&authkey=AGqFHhlHnvOXvuc](https://skydrive.live.com/embed?cid=9AB08B59DCCDF9C6&resid=9AB08B59DCCDF9C6%21107&authkey=AGqFHhlHnvOXvuc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:58:27.103

好的，所以将生命条影片剪辑中的代码完全删除，您现在可以删除该层，然后用此替换主场景中的代码，您应该会得到所需的结果：

```
fortyfivedown_btn.addEventListener(MouseEvent.CLICK, fortyfivedownClick);

var health:int = 100;

lifebar.gotoAndStop(101);

function fortyfivedownClick(event:MouseEvent):void{
    health -= 45;

    if(health < 0) health = 0;
    else if(health > 100) health = 100;

    lifebar.gotoAndStop(health + 1);

    //Can write this also: lifebar.health += 45;
    trace(health);
} 
```

还有其他方法可以做到这一点，但鉴于您当前的设置，这将是获得您想要的东西的最少修改。另一种选择是设置精灵的宽度。

我上传了一个修改后的 fla 和同伴作为文件，说明我个人将如何做这件事，而不是在时间轴上包含太多内容：

[http://www.mediafire.com/?d38hbm32p71x1n8](http://www.mediafire.com/?d38hbm32p71x1n8)

# matlab - Matlab：编辑文本文件中的值而不更改文件格式

> ID：11495858
> 
> 赞同：0
> 
> 时间：2012-07-15T21:42:42.523
> 
> 标签：matlab, file-io, edit

我有一个以下参数文件，我想在其中更改左侧的值，从`gam.dat`until `1 1 1`（反对`-tail variable, head variable, variogram type`）开始，而不更改文件的格式。

此参数文件将在循环内调用，因此循环的每次迭代都需要更改此参数文件内的值。

从文件读取和写入一直是我的弱点。有关如何轻松完成此操作的任何帮助？谢谢！

```
 Parameters
                  **********

START OF PARAMETERS:
gam.dat                         -file with data
1   1                           -   number of variables, column numbers
-1.0e21     1.0e21              -   trimming limits
gam.out                         -file for output
1                               -grid or realization number
100   1.0   1.0                 -nx, xmn, xsiz
100   1.0   1.0                 -ny, ymn, ysiz
 20   1.0   1.0                 -nz, zmn, zsiz
4  30                           -number of directions, number of h
1  0  1                         -ixd(1),iyd(1),izd(1)
1  0  2                         -ixd(2),iyd(2),izd(2)
1  0  3                         -ixd(3),iyd(3),izd(3)
1  1  1                         -ixd(4),iyd(4),izd(4)
1                               -standardize sill? (0=no, 1=yes)
1                               -number of gamma
1   1   1                       -tail variable, head variable, gamma type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:02:17.327

这样的事情可能会有所帮助。话又说回来，它可能不是您正在寻找的东西。

```
fid = fopen(filename as a string);
n = 1;
textline = [];
while( ~feof(fid) ) // This just runs until the end of the file is reached.
    textline(n) = fgetl(fid)
    // some operations you want to perform?
    // You can also do anything you want to the lines here as you are reading them in.
    // This will read in every line in the file as well.
    n = n + 1;
end

fwrite(fid, textline);  // This writes to the file and will overwrite what is already there.
// You always write to a new file if you want to though!
fclose(fid); 
```

我建议使用`fgetl`这里的唯一原因是因为看起来您想要根据行或行中的信息进行特定的操作/更改。您也可以使用`fread`which 将执行相同的操作，但是您必须在构建矩阵后对整个矩阵进行操作，而不是在读取数据和构建矩阵时对其进行任何修改。

希望有帮助！

基于以下评论的更完整示例。

```
fid = fopen('gam.txt');
n = 1;
textline = {};
while( ~feof(fid) ) % This just runs until the end of the file is reached.
textline(n,1) = {fgetl(fid)}
% some operations you want to perform?
% You can also do anything you want to the lines here as you are reading them in.
% This will read in every line in the file as well.

if ( n == 5 )  % This is just an operation that will adjust line number 5.
    temp = cell2mat(textline(n));
    textline(n,1) = {['newfile.name', temp(regexp(temp, '\s', 'once'):end)]};
end

n = n + 1;
end
fclose(fid)

fid = fopen('gam2.txt', 'w') % this file has to already be created.
for(n = 1:length(textline))
    fwrite(fid, cell2mat(textline(n));
end
fclose(fid) 
```

# c# - 如何直接在 ActiveReports 子报表上绘图？

> ID：11495859
> 
> 赞同：1
> 
> 时间：2012-07-15T21:42:58.723
> 
> 标签：c#, drawing, activereports

我想根据一些参数化数据创建自己的自定义图形，并在子报表中生成它。我在报表上放置了一个 ActiveReports.Picture 元素。然后我使用 System.Drawing.Graphics 对象在内存中绘制我的图像，然后将其设置为 Picture 控件的 Image 属性。这工作正常，但生成的 PDF 上的图像是模糊的，即使将 pdfExport1.ImageQuality 设置为最高。

我认为直接在 ActiveReports Document 画布上绘图会更好，但我不知道如何使它工作。那里的所有示例都指向相同的基本示例：

[http://www.datadynamics.com/Help/ActiveReports6/topic2107.html](http://www.datadynamics.com/Help/ActiveReports6/topic2107.html)

问题是这个例子脱离了上下文。我看不到这段代码应该在哪里运行？在子报告里面？在通话报告中？完全超大报告？当我在报告中尝试它时，Pages 属性没有页面（索引超出范围错误），所以我可能在错误的事件中这样做。

需要明确的是，这不是一份数据驱动的报告。我通过参数获得了我需要的所有数据。不需要数据库访问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:09:06.073

在您引用的文档的示例中，DrawLine 是在父文档/报告（而不是子报告）上绘制的。但是，您可以在处理部分时在页面上绘图。为此，您将渲染代码放在该部分的处理事件中，例如[BeforePrint 事件](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic4464.html)或[AfterPrint 事件](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic4463.html)（我会避免使用 Format，因为使用 Format 时有很多警告）。

要从一个部分的事件中在页面上绘图，您可以从[Section 类的 CurrentLocation 属性](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic4456.html)中找到该部分的位置。例如，要在 BeforePrint 事件的整个部分中绘制一条对角线，您可以使用以下代码：

```
public void Detail_BeforePrint(object sender, System.EventArgs eArgs)
{
    this.CurrentPage.BackColor = System.Drawing.Color.Purple;
    this.CurrentPage.ForeColor = System.Drawing.Color.YellowGreen;
    this.CurrentPage.PenStyle = DataDynamics.ActiveReports.Document.PenStyles.Dot;
    this.CurrentPage.PenWidth = 4;
    this.CurrentPage.DrawLine(Detail.CurrentLocation.X, Detail.CurrentLocation.Y, this.PrintWidth, Detail.Height);
} 
```

~~此代码应该在子报表或父报表中正常工作。~~显然，如果要从子报表中在页面上绘图，则需要更改`this.CurrentPage`为。`ParentReport.CurrentPage`如果要相对于页面进行绘制，可以使用类似的代码，但使用 PageEnd 事件。[PageEnd 事件的文档](http://www.datadynamics.com/Help/ActiveReports6/ActiveReports6_start.html?topic3857.html)中有一个很好的例子。但是，PageEvents 仅适用于父报表，可能难以相对于子报表的位置定位绘图坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:54:08.590

似乎您必须在主页上绘制，甚至从子报表中绘制，这就是 CurrentPage 为空的原因。因此，子报告中的以下内容有效：

this.ParentReport.CurrentPage

[http://www.datadynamics.com/forums/118838/ShowPost.aspx](http://www.datadynamics.com/forums/118838/ShowPost.aspx)

# javascript - 如何重定向 iframe 用户？

> ID：11495860
> 
> 赞同：-3
> 
> 时间：2012-07-15T21:43:16.387
> 
> 标签：javascript, html, iframe, web

我有一个网站：galiro.com/summer.html 我想将在 iframe 中使用我网站的人重定向到实际网站。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T21:49:17.990

这应该这样做：

```
if (window.top != window.self)  { 
    window.top.location.href = "http://galiro.com/summer.html";
} 
```

# magento - Magento：在前面查看示例数据/示例存储

> ID：11495866
> 
> 赞同：1
> 
> 时间：2012-07-15T21:43:44.480
> 
> 标签：magento

我已经从 magento 站点安装了示例数据。然后还安装了magento，每个mysql表都配置为以magento_前缀命名，以便将magento系统表与数据表区分开来。但是我有以下问题（是的，我先安装了数据，然后安装了 magento，所以这不是问题）：

我 http 访问 localhost/magento/index.php 时的主要内容区域是空白的。我没有看到任何数据。我期待看到带有示例类别页面等的 Magento 示例商店...

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:31:50.703

遇到同样的问题，如果您希望显示示例数据，您似乎不能在安装中使用表前缀。

# html - HTML、CSS、显示

> ID：11495868
> 
> 赞同：0
> 
> 时间：2012-07-15T21:43:55.133
> 
> 标签：html, css

我正在尝试了解[http://www.dynamicdrive.com/style/csslibrary/item/matt_black_tabs/](http://www.dynamicdrive.com/style/csslibrary/item/matt_black_tabs/)上的 CSS 规范。

我试图理解有什么区别以及为什么将这些属性放在`li`元素`a`上。如果显示是内联或块状怎么办？我试图关闭一些样式以查看它的外观，但我无法理解。

为什么`li`and`a`元素上的显示设置为`inline`and `block`？没有这些规范会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:48:51.030

display 属性告诉您希望您的对象排列的样式。当您使用块样式时，它会像段落和标题一样显示它。内联是默认的，前后没有换行符。有关显示的更多信息，请访问 [http://www.htmldog.com/guides/cssadvanced/display/](http://www.htmldog.com/guides/cssadvanced/display/)

# sql - 一次获得多对多关系中的相关行

> ID：11495870
> 
> 赞同：0
> 
> 时间：2012-07-15T21:44:10.240
> 
> 标签：sql

好的，我觉得这应该很明显，但我没有看到。我有一个标记系统，其中有两个表（比如 A 和 C）通过第三个表（比如 B）相关（多对多）。

我想根据 C 中的字段选择 A 中满足条件的所有唯一行。也就是说，如果 A 中的同一行被 C 中符合我条件的多个标签标记，我不想要多个后排 - 只是 A 中的单行。

因此，我希望 A 中的所有行都具有符合我基于 C 中的字段的条件的标签。但我从不希望 A 中的行重复，即使它有多个符合条件的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:47:02.303

简单的解决方案是添加`DISTINCT`关键字。换句话说，改变这个：

```
SELECT A.foo FROM ... 
```

对此：

```
SELECT DISTINCT A.foo FROM ... 
```

该`DISTINCT`关键字可确保您不会在结果中出现重复项。

* * *

另一种解决方案是重写您的查询以使用`EXISTS`：

```
SELECT *
FROM A
WHERE EXISTS
(
    SELECT *
    FROM B
    JOIN C
    ON ...
    WHERE ...
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:48:13.793

```
SELECT DISTINCT A.*
FROM A
    INNER JOIN B
        ON A.id = B.id
    INNER JOIN C
        ON C.id = B.id
WHERE C.SomeField = 'SomeValue' 
```

# c - 从文件指针获取旧数据（生产者和消费者问题）

> ID：11495872
> 
> 赞同：0
> 
> 时间：2012-07-15T21:44:22.730
> 
> 标签：c, linux

我每隔几秒钟从 procfs 读取一些文件，并显示信息。我不是每次都打开和关闭文件，而是维护打开的文件句柄并在完成时关闭它们。问题是我一直在获取旧数据。从第一次读取收集的信息会在后续读取中返回，并且我已经确认 procfs 文件确实在更改。

我发现的唯一解决方法是在读取数据时在 rewind() 之前执行 fflush()。这有效，但我不明白为什么。我知道如果我有两个程序读取和写入同一个文件，则需要在生产者端使用 fflush() 以允许消费者看到这些更改。在这里，我在消费者端做了一个 fflush() 并且它有效。生产者和消费者不是有不同的文件句柄，所以消费者中的 fflush() 不会 fflush() 生产者写入的数据吗？

任何想法为什么我在没有 fflush() 的情况下获得陈旧数据，以及使用 fflush() 获得最新信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:49:40.510

我不知道确切的答案，但我想你观察到的行为的原因是消费者端缓存。它以块的形式读取文件，很可能比您一次处理的文件大，因此当您要求“更多”时，缓冲区的“其余部分”会被提供给您。`fflush()`在给你数据之前确保缓存被销毁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:58:53.840

文件流通常是缓冲的，这意味着它们在读取之前被复制到内存中，以避免将它们与其他进程锁定。您必须确保您的 Stream 没有缓冲，以便不断地从硬盘中检索信息。为此，请`setbuf (stream,NULL );`确保清除缓冲区。您可以在此处阅读有关 setbuf 的信息： [http ://www.cplusplus.com/reference/clibrary/cstdio/setbuf/](http://www.cplusplus.com/reference/clibrary/cstdio/setbuf/)

我假设您的流被缓冲的原因是因为`fflush(stream)`清除了缓冲流。你可以在这里阅读： [http ://www.cplusplus.com/reference/clibrary/cstdio/fflush/](http://www.cplusplus.com/reference/clibrary/cstdio/fflush/)

# haskell - 如何使用开始和结束索引查找字符串的所有子字符串

> ID：11495875
> 
> 赞同：3
> 
> 时间：2012-07-15T21:44:37.387
> 
> 标签：haskell

我最近编写了一些处理字符串的 Scala 代码，找到它的所有子字符串并保留在字典中找到的那些的列表。整个字符串中子字符串的开头和结尾也必须保留以供以后使用，因此最简单的方法似乎就是使用嵌套的 for 循环，如下所示：

```
for (i <- 0 until word.length)
  for (j <- i until word.length) {
    val sub = word.substring(i, j + 1)
    // lookup sub in dictionary here and add new match if found
  } 
```

作为练习，我决定尝试在 Haskell 中做同样的事情。它看起来很简单，不需要子字符串索引 - 我可以使用类似[这种方法](https://stackoverflow.com/a/5377754/241990)来获取子字符串，然后调用递归函数来累积匹配项。但如果我也想要索引，它似乎更棘手。

我将如何编写一个函数，该函数返回一个列表，该列表包含每个连续的子字符串及其在“父”字符串中的开始和结束索引？

例如`tokens "blah"`会给`[("b",0,0), ("bl",0,1), ("bla",0,2), ...]`

### 更新

精选的答案和大量新事物可供探索。在搞砸了一点之后，我已经去了第一个答案，丹尼尔的建议是允许使用`[0..]`.

```
data Token = Token String Int Int 

continuousSubSeqs = filter (not . null) . concatMap tails . inits

tokenize xs = map (\(s, l) -> Token s (head l) (last l)) $ zip s ind
    where s = continuousSubSeqs xs
          ind = continuousSubSeqs [0..] 
```

鉴于我有限的 Haskell 知识，这似乎相对容易理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:05:06.773

```
import Data.List

continuousSubSeqs = filter (not . null) . concatMap inits . tails

tokens xs = map (\(s, l) -> (s, head l, last l)) $ zip s ind
    where s   = continuousSubSeqs xs
          ind = continuousSubSeqs [0..length(xs)-1] 
```

像这样工作：

```
tokens "blah"
[("b",0,0),("bl",0,1),("bla",0,2),("blah",0,3),("l",1,1),("la",1,2),("lah",1,3),("a",2,2),("ah",2,3),("h",3,3)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:14:32.963

我的版本：

```
import Data.List

tokens = 
  map join . filter (not . null) . concatMap inits . tails . zip [0..]
  where 
    join s@((i, _):t) = 
      (map snd s, i, foldl' (\_ i -> i) i (map fst t))

main =
  putStrLn $ show $ tokens "blah"

-- [("b",0,0),("bl",0,1),("bla",0,2),("blah",0,3),("l",1,1),("la",1,2),("lah",1,3),("a",2,2),("ah",2,3),("h",3,3)] 
```

**更新**：

```
import Control.Arrow

...

tokens = 
  map join . filter (not . null) . concatMap inits . tails . zip [0..] where 
    join s = (s', i, j) where 
      ((i, j), s') = (first (head &&& last)) $ unzip s

... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:00:15.700

您编写的两个嵌套循环是一个很好的起点。也就是说，我们可以编写一个函数`tokens`，将其工作委托给两个递归函数`outer`并`inner`对应于您的循环：

```
type Token a = ([a], Int, Int)

tokens :: [a] -> [Token a]
tokens = outer 0
  where
    outer _ []         = []
    outer i l@(_ : xs) = inner i [] l ++ outer (i + 1) xs
      where
        inner _ _ []         = []
        inner j acc (x : xs) =
          (acc ++ [x], i, j) : inner (j + 1) (acc ++ [x]) xs 
```

在这里，`outer`遍历字符串，并且对于该字符串中的每个起始位置，调用`inner`以收集从该位置开始的所有段及其结束位置。

虽然这个功能满足你的要求，

```
> tokens "blah"
[("b",0,0),("bl",0,1),("bla",0,2),("blah",0,3),("l",1,1),("la",1,2),("lah",1,3),("a",2,2),("ah",2,3),("h",3,3)] 
```

由于重复的列表连接，它非常低效。更有效的版本会将其结果累积在所谓的[差异列表中](http://www.haskell.org/haskellwiki/Difference_list)：

```
type Token a = ([a], Int, Int)

tokens :: [a] -> [Token a]
tokens l = outer 0 l []
  where
    outer _ []         = id
    outer i l@(_ : xs) = inner i id l . outer (i + 1) xs
      where
        inner _ _ []         = id
        inner j acc (x : xs) =
          ((acc [x], i, j) :) . inner (j + 1) (acc . (x :)) xs 
```

当然，如何构建字典取决于您选择如何表示它。这是一种使用简单有序关联列表的方法，

```
type Dict a = [([a], [(Int, Int)])]

empty :: Dict a
empty = []

update :: Ord a => Token a -> Dict a -> Dict a
update (xs, i, j) []                = [(xs, [(i, j)])]
update (xs, i, j) ((ys, ns) : dict) = case compare xs ys of
  LT -> (xs, [(i, j)]) : (ys, ns) : dict
  EQ -> (ys, (i, j) : ns) : dict
  GT -> (ys, ns) : update (xs, i, j) dict

toDict :: Ord a => [a] -> Dict a
toDict = foldr update empty . tokens 
```

但是由于您的键是字符串，因此[尝试](http://en.wikipedia.org/wiki/Trie)（又名前缀树）可能是更好的选择。

如果您追求的是有效的子字符串查询，我建议您查看[suffix trees](http://en.wikipedia.org/wiki/Suffix_tree)，尽管它们的实现有些涉及。您可能想查看

*   罗伯特·吉格里奇和斯特凡·库尔茨。命令式和纯函数式后缀树结构的比较。*计算机编程科学*25(2–3):187–218, 1995

和 Bryan O'Sullivan 关于 Hackage 的[suffixtree](http://hackage.haskell.org/package/suffixtree)包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T09:22:22.260

另一个版本更容易从左到右阅读，类似于 unix 管道

```
import Data.List
import Control.Category 

tokens = 
     tailsWithIndex
     >>> concatMap (\(i,str) -> zip (repeat i) (initsWithIndex str))
     >>> map adjust
     where
       tailsWithIndex = tails >>> init >>> zip [0..]
       initsWithIndex = inits >>> tail >>> zip [0..]
       adjust (i, (j, str)) = (str, i, i+j) 
```

样品运行

```
>tokens "blah" 
[("b",0,0),("bl",0,1),("bla",0,2),("blah",0,3),("l",1,1),("la",1,2),("lah",1,3),("a",2,2),("ah",2,3),("h",3,3)] 
```

如果`concatMap`是惰性的，那么整个计算都是惰性的并且将是高效的，除了使用 Data.List 函数而不是原始列表访问。

# android - 安卓横向。模拟器没有反应

> ID：11495876
> 
> 赞同：2
> 
> 时间：2012-07-15T21:44:40.993
> 
> 标签：android, emulation

[screenshot http://sdl1.4pda.ru/1862622/image/jpeg/portrait.JPG?00169e49ceae42635003442300000000de9e7e77de71680003e699507907d6e9](http://sdl1.4pda.ru/1862622/image/jpeg/portrait.JPG?00169e49ceae42635003442300000000de9e7e77de71680003e699507907d6e9) [screenshot http://sdl4.4pda.ru/1862623/image/jpeg/Landscape_mode.JPG?00169e49ceae42635003442e00000000e2f203d397cc0154fd07c1a111773c1a](http://sdl4.4pda.ru/1862623/image/jpeg/Landscape_mode.JPG?00169e49ceae42635003442e00000000e2f203d397cc0154fd07c1a111773c1a)

* * *

再会！我遇到了一个问题 - Android 模拟器对方向更改没有响应！版本 2.3.3。您可以在图片上看到主屏幕。在我的应用程序中，我有 2 个文件夹 - layout、layout-land - 正如书中所说，我希望 Android 会为我做转（setContentView(R.layout.main) 应该选择正确的布局）。这两个文件的名称均为 main.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:27:08.690

是的，有时这是**Android 模拟器 2.3.3的问题**

要再次获得纵向模式，请单击主页并再次单击您的应用程序图标。

这是模拟器中唯一的问题，并且在移动设备上不会像这样发生

# xml - Haskell RSS、邮件和 XML 库选择

> ID：11495877
> 
> 赞同：15
> 
> 时间：2012-07-15T21:44:57.387
> 
> 标签：xml, email, haskell, rss, webserver

我学习 Haskell 已经有一段时间了，每学习一种新的编程语言，我都会做一个小项目，需要使用邮件服务器并发布 RSS 和 Atom 内容。唯一的问题是，我似乎找不到合适的包裹，或者至少找不到包裹的任何评论。

所以我会问社区：

与邮件服务器交互的任何首选软件包？（IMAP、POP3 等）

任何用于发布 RSS 和/或 Atom 提要的首选软件包？做不到这一点，通用 XML 的任何首选包？

对于将所有这些绑定在一起的简约、低摩擦的网络服务器有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:18:23.353

只是为了回答这个问题，这个[`feed`](http://hackage.haskell.org/package/feed)包很适合制作 rss。对于电子邮件，人们通常只是直接使用 sendmail 可执行文件。该[`mime-mail`](http://hackage.haskell.org/package/mime-mail)软件包提供了一个包装器以及一些额外的工具。如果要*阅读*邮件，典型的方式是设置`procmail`之类的，然后使用`mbox`解析器直接与生成的文件进行交互。两个解析器是[`mbox`](http://hackage.haskell.org/package/mbox)和[`codec-mbox`](http://hackage.haskell.org/package/codec-mbox)。

如果你真的想和 pop3/imap 交互，你可以用[pop3-client](http://hackage.haskell.org/package/pop3-client)做前者，用 HaskellNet 做后者，它很老但显然有效。使用它的示例代码可[在此处](http://hackage.haskell.org/package/imapget)获得。

# javascript - 忽略自动表单完成设置的值

> ID：11495879
> 
> 赞同：0
> 
> 时间：2012-07-15T21:45:07.587
> 
> 标签：javascript, jquery, forms, validation

我有一个我写的小验证插件，我正在设置`data("defaultvalue")`值 on `document ready`，但在自动表单完成器方面似乎有一个小错误，他们打败了我。

```
if($(this).val() != ""){
    $(this).data("defaultvalue", $(this).val());
} 
```

这是我用来存储默认值或“占位符文本”的代码，稍后会检查它：

```
if($(this).data("defaultvalue") && $(this).val() == $(this).data("defaultvalue")) $(this).val(""); 
```

有什么想法可以跳过自动完成吗？还是我应该硬着头皮在标记中设置默认值数据属性？

是的，我不使用该`placeholder`属性的唯一原因是 IE。谢谢微软。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:53:16.577

对于那些遇到同样问题的人，我最终在我的标记中设置了数据属性。

`<input value="Days" data-defaultvalue="Days" />`

感觉有点像双重处理，但它是避免自动完成脚本的最佳跨浏览器解决方案。

# image-processing - 在 2D 网格上插值

> ID：11495880
> 
> 赞同：2
> 
> 时间：2012-07-15T21:45:15.773
> 
> 标签：image-processing, opencv, language-agnostic

给定一个完美的网格和一些控制点，我如何计算 'interpolatd' 2D 网格 - 类似于 Photoshop 的功能：

![在此处输入图像描述](../Images/541e9956b1ea79a95fe51247ba9a116b.png)

您移动一个控制点，图像“扭曲”以适应新网格。

我要做的是找出每个像素的新位置。任何有关要查找/阅读的术语/关键字的线索将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T02:17:16.843

图像处理中使用了许多类别的 2D 插值，它们的选择完全取决于应用程序的需求。

AFAIC 最常见的是基于[径向基函数](http://en.wikipedia.org/wiki/Radial_basis_function)。他们将插值定义为位于节点处的核函数的线性组合。用于平滑图像变形的一个有用的核函数是[薄板样条](http://en.wikipedia.org/wiki/Thin_plate_spline)。

# knockout.js - 使用 knockout.js 绑定到 foreach 绑定的选定项

> ID：11495881
> 
> 赞同：2
> 
> 时间：2012-07-15T21:45:21.813
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用 knockout.js 和 ko.mapping 插件将 json 对象列表绑定到 html 网格。让我们将每个项目称为卡片（下面的简化示例）

```
{
    "card": [
        {
            "Id": "cards/1",
            "category": "Demo",
            "title": "Card 1",
            "description": "bla bla",
            "picture": "demo1.jpg ",
            "madeBy": "user/1"
        },
        {
            "Id": "cards/2",
            "category": "Demo",
            "title": "Card 2",
            "description": "bla bla",
            "picture": "demo2.jpg",
            "madeBy": "user/2"
        }
    ]
} 
```

我像这样绑定每个元素：

```
 <div data-bind="foreach: card">
    <span data-bind="text:title"></span>
    <a data-bind='click: show'><img data-bind="attr:{src: picture}" /></a>
</div> 
```

当用户点击一张卡片时，我想在不同的 div （在**foreach**之外）中显示所选卡片，其中包含来自所选 json 对象的更多属性

我应该从视图模型中将谁绑定到一张选定的卡片？

我正在尝试类似的东西（但没有得到任何数据）：

```
<h1 data-bind="text: $data.title"> </h1> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T22:31:08.933

您将希望通过跟踪持有卡片的 ViewModel 上的选定卡片来完成此操作。这是一个简单地证明这[一点的小提琴。](http://jsfiddle.net/pWKav/)这是修改后的 HTML 和 JS（为了演示的目的，这已被简化，我没有使用映射，但你明白了）：

HTML：

```
<div data-bind="foreach: cards">
    <span data-bind="text:title"></span>
    <a data-bind='click: $parent.selectedCard'>ImagePlaceholder</a>
    </br>
</div>

<div data-bind="with: selectedCard">
    <h1 data-bind="text: title"></h1>
    <span data-bind="text: description"></span>
</div> 
```

JS

```
var ViewModel = function(cards) {
    this.cards = ko.observableArray(
        ko.utils.arrayMap(cards, function(c) {return new Card(c);})
    );
    this.selectedCard = ko.observable();
}; 
```

注意`click`直接设置选中的卡，不需要使用包装器的“显示”功能。由于 observables*是*函数，我们可以跳过这一步（当然，除非你需要在 show 函数中做更多的事情）。

# html - 像 css 一样的轮播，overflow-x（仅限水平）

> ID：11495884
> 
> 赞同：1
> 
> 时间：2012-07-15T21:46:02.580
> 
> 标签：html, image, css, carousel

我有一个`overflow-x:scroll`和`overflow-y:hidden`。我有图像，但是当我试图让它只水平滚动时，它不起作用？当我突出显示图像并向下拖动突出显示时，它会垂直向下滚动。

```
#contents
{
margin:0 auto;
text-align:center;
width:1200px;
clear:both;
}

#image_contents
{
float:left;
height: 208px;
overflow-x:scroll;
overflow-y:hidden;
margin:0 auto;
}

.images 
{
float:left;
margin:2px;
background:#000;    
overflow:hidden;
position:relative;
display:inline-block;
}

<div id="contents">
<div id="image_contents">

    <div class="images">
        <img src="1.jpg"/>
    </div>

    <div class="images">
         <img src="2.jpg"/>
    </div>

    <div class="images">
          <img src="3.jpg"/>
    </div>

    <!-- and so forth !->
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:54:43.077

据我所知，最好的方法是在 div 中创建另一个`image_contents`div。然后给这个 div 所有图像的宽度（必要时使用 JavaScript）。

另一种解决方案是`display:table-cell`在另一个 div 内的图像上使用`display:table-row`.

或者（我敢说）使用`table`.

# ruby - 使用 Ruby 读取和修改文件中的行

> ID：11495886
> 
> 赞同：1
> 
> 时间：2012-07-15T21:46:25.717
> 
> 标签：ruby

我刚刚开始使用 Ruby，我的第一个程序从一个 txt 文件中读取，并将每一行的修改版本打印到另一行。这个想法是得到这个：

```
- Book Title *Book Author* 
```

对此：

```
 Book Title     Book Author 
```

我的代码如下所示：

```
listold = File.open('listas.txt', 'r+')
listnew = File.new('lista.txt', 'w+')
listold.each_line {|line|
  nome, autor = line.split(' *')
  nome['- '] = '  '
  autor = autor.chomp('*')
  listnew.puts nome << "\t" << autor
} 
```

我遇到的问题是它仅适用于文件中的最后一行。对于其他的，`\t`间距非常小，最后一个 * 没有被削减。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:56:03.537

您的拆分匹配一个*空格*，后跟一个 *。

您可能希望在“*”而不是“*”上进行拆分。

我试过你的代码，它适用于我的测试文件的每一行。

# vba - 使用 VBA 填充数据透视表

> ID：11495889
> 
> 赞同：0
> 
> 时间：2012-07-15T21:47:10.207
> 
> 标签：vba, excel, pivot-table

我已经在工作表（sheetA）中设置了一个数据透视表。在单独的工作表（sheetB）上，我有数据。我每天手动填充这个数据透视表（使用数据透视向导和拖动数据范围）。

有没有办法使用 vba 在 sheetA 上选择这个数据透视表，然后用 sheetB 中的一系列数据填充它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:23:16.343

VBA 当然可以完成这项任务。但更简单的方法是根据命名范围制作数据透视表。只需更改范围的尺寸并右键单击->刷新表格即可为您完成工作。

# ruby - 何时/为什么将 --env-shebang 与红宝石宝石一起使用？

> ID：11495893
> 
> 赞同：4
> 
> 时间：2012-07-15T21:47:28.893
> 
> 标签：ruby, rubygems, interpreter, shebang

[Ikenna Okpala 推荐了这个`.gemrc`](http://railscasts.com/episodes/335-deploying-to-a-vps?view=comments)（我稍微修改了一下）：

```
---
:详细: 真的
:bulk_threshold: 1000
安装：--no-ri --no-rdoc --env-shebang
：来源：
- http://gems.rubyforge.org/
：基准：假
：回溯：假
更新：--no-ri --no-rdoc --env-shebang
:update_sources: 真

```

我之前没有注意到`--env-shebang`。`--env-shebang`我在[http://guides.rubygems.org/command-reference/](http://guides.rubygems.org/command-reference/)上查找了文档：

```
安装/更新选项：
...
-E, -​-[no-]env-shebang - 重写已安装脚本上的 shebang 行以使用 /usr/bin/env

```

实际上，为什么这个`--env-shebang`选项很重要？（我从未使用过它。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:00:03.660

如果由于某种原因 gem 的作者没有使用`#!/usr/bin/env ruby`，您可能希望自动更改它。

（如果你问为什么你想要`env`shebang 线，[这](https://stackoverflow.com/a/2792076/1427098)很好地解释了它。）

rubygems-developers 线程的开头讨论了这个特性的想法在[这里](http://rubyforge.org/pipermail/rubygems-developers/2006-September/002127.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:58:25.870

/usr/bin/env 是一个 Unix 程序，它检查用户的路径以查看程序应该如何运行。使用 /usr/bin/env 允许使用该程序的人能够选择他们自己的 Ruby 版本，而不是可能碰巧安装在系统上的那个版本。您可以让用户决定它的位置，而不是硬编码 Ruby 的位置。

# c++ - 为 Point 类实现复制赋值运算符

> ID：11495895
> 
> 赞同：2
> 
> 时间：2012-07-15T21:48:05.587
> 
> 标签：c++

考虑一个点类，其声明如下：

```
// Point.h
class Point {
    public:
        Point();                           // Default constructor
        Point(const Point & p);            // Copy constructor
        Point & operator=(Point source);   // Copy assignment operator, needs implemented
        ~Point();                          // Destructor
    // ...
    private:
        double m_x;                        // X coordinate
        double m_y;                        // Y coordinate
}; 
```

对于作业，我唯一需要实现的是复制赋值运算符。
如何做到这一点的规范答案是[copy-and-swap idiom](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)。

使用交换功能进行复制分配解决了一个问题并创建了另一个问题（如何实现交换功能）。

虽然我觉得不需要提供交换功能，但我不知道如何最好地实现交换。是专精[`std::swap`](http://en.cppreference.com/w/cpp/algorithm/swap)吗？我还不知道命名空间和模板专业化。

形式上，我的问题有两个：

1.  拷贝赋值应该如何实现？如果它使用交换功能，我应该如何实现它？
2.  在野外，我会不会根本不写[三巨头成员](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)，因为`Point`班级只是两个数字？编译器会正确且最佳地编写操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:58:15.360

1.  复制和交换是最佳实践。`std::swap`如果你因为不熟悉模板不想重写，那么你也可以写一个`swap_points`函数或者`Point::swap(Point &other)`成员函数。

    该（成员）函数的实现非常简单：只需调用`std::swap`所有成员即可。

2.  是的，自己为这门课实施三巨头确实是一项学术练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T21:59:59.417

天真的在这里工作，因为`Point`不管理任何资源。
简单地复制双精度值不会引发异常，因此这段代码是异常安全的（反过来也是自赋值安全的）。

```
// Point.cpp

Point & operator=(Point source);
    m_x = source.m_x;
    m_y = source.m_y;

    return *this;
} 
```

# c# - 如何将这种类型的 json 响应转换为用户定义的类型

> ID：11495896
> 
> 赞同：4
> 
> 时间：2012-07-15T21:48:07.373
> 
> 标签：c#, json, web-services, api, user-defined-types

我正在使用一个 Web 服务，它以以下格式将数据返回到 JSON

```
{
    "responseId": 2933574,
    "availableHotels": [
        {
            "processId": "HC-65870953",
            "hotelCode": "UKI9E6",
            "availabilityStatus": "InstantConfirmation",
            "totalPrice": 971,
            "totalTax": 0,
            "totalSalePrice": 0,
            "currency": "EUR",
            "boardType": "Bed & Continental Breakfast",
            "rooms": [
                {
                    "roomCategory": "Triple Room",
                    "paxes": [
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Child",
                            "age": "6"
                        }
                    ],
                    "totalRoomRate": 486,
                    "ratesPerNight": [
                        {
                            "date": "2012-07-20",
                            "amount": 163
                        },
                        {
                            "date": "2012-07-21",
                            "amount": 163
                        },
                        {
                            "date": "2012-07-22",
                            "amount": 160
                        },
                        {
                            "date": "2012-07-23",
                            "amount": 0
                        }
                    ]
                },
                {
                    "roomCategory": "Triple Room",
                    "paxes": [
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Child",
                            "age": "8"
                        }
                    ],
                    "totalRoomRate": 485,
                    "ratesPerNight": [
                        {
                            "date": "2012-07-20",
                            "amount": 163
                        },
                        {
                            "date": "2012-07-21",
                            "amount": 163
                        },
                        {
                            "date": "2012-07-22",
                            "amount": 160
                        },
                        {
                            "date": "2012-07-23",
                            "amount": -1
                        }
                    ]
                }
            ]
        },
        {
            "processId": "HH-22003963",
            "hotelCode": "UKPDNN",
            "availabilityStatus": "InstantConfirmation",
            "totalPrice": 1085,
            "totalTax": 0,
            "totalSalePrice": 0,
            "currency": "EUR",
            "boardType": "Bed and Breakfast",
            "rooms": [
                {
                    "roomCategory": "Triple Room",
                    "paxes": [
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Child",
                            "age": "6"
                        }
                    ],
                    "totalRoomRate": 544,
                    "ratesPerNight": [
                        {
                            "date": "2012-07-20",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-21",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-22",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-23",
                            "amount": 136
                        }
                    ]
                },
                {
                    "roomCategory": "Triple Room",
                    "paxes": [
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Adult",
                            "age": 30
                        },
                        {
                            "paxType": "Child",
                            "age": "8"
                        }
                    ],
                    "totalRoomRate": 541,
                    "ratesPerNight": [
                        {
                            "date": "2012-07-20",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-21",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-22",
                            "amount": 136
                        },
                        {
                            "date": "2012-07-23",
                            "amount": 133
                        }
                    ]
                }
            ]
        }
    ],
    "totalFound": 2,
    "searchId": "QG-67623913"
} 
```

现在我有一个定义如下的类：

```
 public class getAvailableHotelResponse
    {
        public getAvailableHotelResponse();

        public hotel[] availableHotels { get; set; }
        [SoapElement(DataType = "integer")]
        public string responseId { get; set; }
        public string searchId { get; set; }
        [SoapElement(DataType = "integer")]
        public string totalFound { get; set; }
    } 
```

课程如下`hotel`：

```
public class hotel
    {
        public hotel();

        public string availabilityStatus { get; set; }
        public string boardType { get; set; }
        public string currency { get; set; }
        public string hotelCode { get; set; }
        public string processId { get; set; }
        public roomResponse[] rooms { get; set; }
        [SoapElement(DataType = "integer")]
        public string specialDeal { get; set; }
        public float totalPrice { get; set; }
        [SoapIgnore]
        public bool totalPriceSpecified { get; set; }
        public float totalSalePrice { get; set; }
        [SoapIgnore]
        public bool totalSalePriceSpecified { get; set; }
        public float totalTax { get; set; }
        [SoapIgnore]
        public bool totalTaxSpecified { get; set; }
    } 
```

课程如下`roomResponse`：

```
public class roomResponse
    {
        public roomResponse();

        public pax[] paxes { get; set; }
        public dailyRate[] ratesPerNight { get; set; }
        public string roomCategory { get; set; }
        public float totalRoomRate { get; set; }
        [SoapIgnore]
        public bool totalRoomRateSpecified { get; set; }
    } 
```

`pax`类如下：

```
 public class pax
    {
        public pax();

        [SoapElement(DataType = "integer")]
        public string age { get; set; }
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string paxType { get; set; }
        public string title { get; set; }
    } 
```

`dailyRate`类如下：

```
 public class dailyRate
    {
        public dailyRate();

        public float amount { get; set; }
        [SoapIgnore]
        public bool amountSpecified { get; set; }
        [SoapElement(DataType = "date")]
        public DateTime date { get; set; }
        [SoapIgnore]
        public bool dateSpecified { get; set; }
    } 
```

**编辑**

```
getAvailableHotelResponse h = new getAvailableHotelResponse();

h = (getAvailableHotelResponse)Newtonsoft.Json.JsonConvert.DeserializeObject(text); 
```

我试过了，它抛出了以下错误：

> 无法将类型为“Newtonsoft.Json.Linq.JObject”的对象转换为类型“hotelspro.getAvailableHotelResponse”。

JSON 的结构非常复杂，那么如何将其转换为我的对象呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T18:25:59.420

删除不可编译的构造函数，例如`public pax();`并使用

```
var availHotels = JsonConvert.DeserializeObject<getAvailableHotelResponse>(text); 
```

就这样。

事实上，如果你使用 dynamic ，你甚至不需要声明这一堆类（、[、](http://msdn.microsoft.com/en-us/library/dd264736.aspx)`getAvailableHotelResponse`、`hotel`等`roomResponse`）。例如，`pax``dailyRate`

```
dynamic response = Newtonsoft.Json.JsonConvert.DeserializeObject(text);

foreach (var hotel in response.availableHotels)
{
    Console.WriteLine(hotel.processId);
    foreach (var room in hotel.rooms)
    {
        Console.WriteLine("\t" + room.roomCategory);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T07:03:51.113

大多数时候，当我研究提供响应的框架时，它们至少有一个标准化的响应。

什么反应可能是通用的，但我知道会发生什么。因此，收到广泛的回应并不少见，例如：

```
{
   'data': 'JSON-blah-JSON-blah-IneedAcocktail-JSON-blah',
   'status': 200,
   'fortune': 'shakeHarder'
} 
```

了解该通用响应然后使用它来反映您以后需要的内容可能就是这种情况。

例如，您收到的所有对象都是您已经使用的对象。可能存在您通常不知道的人数之类的东西..继承它以及其他不需要冲突的标准化随机事物。

然后创建一个包含您需要的对象的容器类。也许你需要把它翻译成你的格式；但至少你有它的格式，你知道如何使用它，并且在你变蓝之前你不会解析字符串。

# c++ - 我认为我的析构函数导致发生错误。你能帮我弄清楚为什么吗？

> ID：11495899
> 
> 赞同：1
> 
> 时间：2012-07-15T21:48:13.917
> 
> 标签：c++, oop, destructor

**问题出在我的赋值运算符中，我忘记为字符串类中的指针释放和重新分配内存。我一定是不小心把它当作复制构造函数对待了；这是为什么内存管理非常重要的一个很好的教训。感谢大家的帮助。**

我实现了自己的字符串类，这似乎是调用堆栈上的最后一个函数，然后才中断。

```
String::~String(){
    delete [] rep;
    len=0;
} 
```

有人可以帮助我了解问题所在吗？

这是调用它的函数

```
template <class T> 
void SList<T>::RemoveAfter(typename SList<T>::Iterator i){        
    assert(i.nodePointer !=0 && i.nodePointer->next!=0);
    Node *save = i.nodePointer -> next;
    i.nodePointer->next = i.nodePointer->next->next;
    delete save;

} 
```

如果您需要更多信息来帮助我弄清楚为什么会发生这种情况，请告诉我。

顺便说一句，如果我使用 int 类型，我没有这个问题，所以我知道问题必须与我的字符串类...对吗？

根据要求提供更多信息：

```
struct Node{ // Node: Stores the next Node and the data.
    T data;
    Node *next;
    Node() {next =0;}
    Node(const T& a, Node *p = 0){data=a;next=p;}

}; 
```

错误：

> Windows 在 Algorithms.exe 中触发了一个断点。这可能是由于堆损坏，这表明 Algorithms.exe 或其已加载的任何 DLL 中存在错误。这也可能是由于用户在 Algorithms.exe 获得焦点时按 F12。输出窗口可能有更多诊断信息。

中断的示例功能：

```
 String item1("Example"), item2("Example");
    SList<String> list1;        
    list1.AddFirst(item2);
    list1.AddFirst(item1);
    list1.AddLast("List Class");
    list1.AddLast("Functionality");

    SList<String>::Iterator i1;

    i1 = list1.Begin();     
    i1++;
    i1++;
    list1.RemoveAfter(i1); 
```

有效的例子

```
 SList<int> list1;       
    list1.AddFirst(1);
    list1.AddFirst(2);
    list1.AddLast(3);
    list1.AddLast(4);

    SList<int>::Iterator i1;

    i1 = list1.Begin();     
    i1++;
    i1++;
    list1.RemoveAfter(i1);

    system("pause"); 
```

更多信息：

```
//Default Constructor
String::String(){
rep = new char[1];
rep[0] = '\0';
len = 0;
}  

//Constructor - Converts char* to String object
String::String(const char *s){
len=0;
const char *temp = s;
while(*temp){
    ++len;
    ++temp;
}//Sets len of rep to the length of s
rep = new char[len + 1];
for(int i=0; i<=len; ++i)
    rep[i]=s[i];
}

//Copy Constructor
String::String(const String &obj){
len=0;
char *temp = obj.rep;

while (*temp){
    ++len;
    ++temp;
}//Sets len of rep to length of obj.rep
rep = new char[len + 1];
for (int i = 0; i<=len; ++i)
    rep[i] = obj.rep[i];
}

//Assignment operator
const String& String::operator=(const String &rhs){
if (this != &rhs){
    len=0;
    char *temp = rhs.rep;
    while(*temp){
        ++len;
        ++temp;
    }//Sets len of this to length of rhs.rep
    for(int i = 0; i<=len;++i)
        rep[i]=rhs.rep[i];
}
return *this;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:07:39.940

在您的赋值运算符中，您可能会在 指向的分配区域的范围之外进行写入`char* rep`，这可能会破坏堆栈（即导致*undefined-behavior*）。

当您稍后尝试释放这部分内存时，损坏的堆栈可能会导致事情变得很糟糕，这很可能是您在运行应用程序时收到错误消息的原因。

正如消息本身所说，*“这可能是由于**堆损坏**”*。

* * *

### 如何解决我的问题？

在赋值运算符中，您需要做三件事：

1.  取消分配之前在*this*中分配的内存（除非*this->len* 和*rhs.len*具有相同的值，如果是的话；也跳过第*2*步）
2.  为*rhs.rep分配与**rhs*相同的内存量（即*rhs.len*字节）
***   更新*this->len*表示新内容的长度*   将存储在*rhs.rep指向的内存中的字节复制到**this->rep*指向的内存段。**

 **目前您只执行第 3 步和第 4 步。**

# php - 从 Web 根目录的子目录中的 CodeIgniter URL 中删除 index.php

> ID：11495903
> 
> 赞同：0
> 
> 时间：2012-07-15T21:48:45.033
> 
> 标签：php, linux, apache, codeigniter, mod-rewrite

我已经尝试了几个小时来实现这一目标！

我在 webroot 的子文件夹中有我的 codeigniter 应用程序，该子文件夹称为“Tat”。

我在 codeigniter 文件夹（应用程序和系统文件夹旁边）中使用以下 .htaccess 文件：

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 /index.php
</IfModule> 
```

如果我访问：127.0.0.1/Tat/ - 我去 CodeIgniter 应用程序，那很好。

如果我访问：127.0.0.1/Tat/index.php/register - 我转到我的 CI 应用程序的注册页面（不希望 index.php 在那里！）

如果我访问：127.0.0.1/Tat/register - 它会将我带到整个服务器的 Web 根目录！我想让它带我到注册页面！

我不知道该怎么做！

值得一提的是： * 我的基本 URL 设置为： $config['base_url'] = 'http://127.0.0.1:5678/Tat'; * 我的索引页已设置：$config['index_page'] = ''; * 我完全控制服务器，它是在 Ubuntu Precise 64 上运行 Apache2 的开发服务器。

如果有人能指出我正确的方向或纠正我的 .htaccess 或告诉我如何修改 apache 设置，那就太棒了！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:56:48.557

您的站点位于子文件夹中，因此请在第 4 行设置 RewriteBase：

```
RewriteBase /Tat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:05:55.197

我终于找到了答案！我的服务器配置不正确，我没有启用 mod_rewrite。

Ubuntu 用户，在命令行上关闭它以启用它：sudo a2enmod rewrite

然后重新启动 Apache。

我正在使用以下.htaccess：

```
<IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    ErrorDocument 404 /index.php
</IfModule> 
```

# ajax - Chrome中的jquery标签需要2次点击

> ID：11495904
> 
> 赞同：0
> 
> 时间：2012-07-15T21:48:47.270
> 
> 标签：ajax, jquery

此代码在 Firefox 和 IE 中运行良好。在 Chrome 中，您需要单击每个链接两次，然后页面加载两次。[http://www.crowdfundcenter.com/ajaxpage.php](http://www.crowdfundcenter.com/ajaxpage.php)有一个示例，代码如下：

```
<script type="text/javascript">

$(document).ready(function () { <!-- Begin document ready function -->

    $.history.init(pageload);   

    $('a[href=' + window.location.hash + ']').addClass('selected');

    $('a[rel=ajax]').click(function () {    <!-- Begin click function -->

        var hash = this.href;
        hash = hash.replace(/^.*#/, '');
        $.history.load(hash);   

        $('a[rel=ajax]').removeClass('selected');
        $(this).addClass('selected');

        return false;

    }); <!-- End click function -->

}); <!-- End document ready function -->

function pageload(hash) {   <!-- Begin pageload hash -->
    if (hash) getPage();    
    }   <!-- End pageload hash -->

function getPage() {    <!-- Begin getPage function -->
    var loading = $("#loading");
    var data1 = document.location.hash;
    showLoading();
    switch(data1){
        case "#home":
            $('#content').slideUp();
            $('#content').load('xhome.html', hideLoading);
            $('#content').slideDown();
            break;
        case "#business":
            $('#content').slideUp();
            $('#content').load('xbusiness.html', hideLoading);
            $('#content').slideDown();
            break;
        case "#aboutus":
            $('#content').slideUp();
            $('#content').load('xaboutus.html', hideLoading);
            $('#content').slideDown();
            break;
        case "#hidpage":
            $('#content').slideUp();
            $('#content').load('xhidpage.html', hideLoading);
            $('#content').slideDown();
            break;
        default:
            $('.loading').hide();
            break;
    }

function showLoading(){
    loading
        .css({visibility:"visible"})
        .css({opacity:"1"})
        .css({display:"block"});  
        }

function hideLoading(){
    loading.fadeTo(1000, 0);
    };

};      <!-- End getPage function -->

</script>

<div id="wrapper">  <!-- Begin wrapper -->

<div id="header">
    <ul id="menu">
        <li><a href="#home" rel="ajax">Home</a></li> 
        <li><a href="#business" rel="ajax">Business</a></li> 
        <li><a href="#aboutus" rel="ajax">About Us</a></li>
    </ul>
</div>

    <div style="clear: both;"></div>

    <div style="display: block; float: left; height: 24px;">
    <div id="loading">
    <img src="img/loading99small.gif" alt="Loading..." />
    </div>
    </div>

    <div style="clear: both;"></div>

    <div id="content">  <!-- Begin content -->
        <!-- Ajax Content -->

<div style="display: block; width: auto; margin: auto;">

<div style="display: block; width: auto; margin: 0px 0px 0px 0px; color: #CCCCCC; font-size: 12px;">
    <h2>Home Page</h2>
    This is the home page generated by code on this page.
</div>
    </div>

</div>  <!-- End content -->

<div style="display: block; float: left; clear: both;"></div>

<div style="display: block; width: auto; margin: auto;">  <!-- Begin footer -->

<div id="footer" style="display: block; margin: 40px 0px 40px 0px; color: #808080; font-size: 16px; font-weight: bold;">
    This is the footer for the page.
    </div>

    </div>  <!-- End footer -->

</div>  <!-- End wrapper --> 
```

在 Firefox 和 IE 中一切正常。问题是 Chrome 并且不知道问题是什么，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:00:02.800

问题都是你的。

您在两者中都发出页面加载

*   `$('a[rel=ajax]').click()`， 和
*   `$.history.init()`.

因此，代码实际上按预期工作。

# scripting - MS Batch：检查驱动器是否正在使用中

> ID：11495908
> 
> 赞同：3
> 
> 时间：2012-07-15T21:48:57.317
> 
> 标签：scripting, batch-file, dos

我需要检查驱动器 (Z:) 是否正在使用中（例如，正在被应用程序使用，已打开）。

我的批处理文件如下所示：

```
Mount Z:
wait 15 minutes
check if drive Z: is in use

IF NOT: unmount Z:
ELSE: wait 15 minutes
repeat.. 
```

有什么命令吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:29:21.680

使用**IF EXIST**或**IF NOT EXIST**组合：

```
:FindDrive
if exist Z:\nul goto Mounted
timeout /T 5
goto FindDrive
:Mounted 
```

NUL 是存在于每个文件夹中的“虚拟”文件。因此，如果 c:\anypath\nul 存在，则驱动器存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T20:23:01.470

```
@echo off
echo --------------------------------------------------
echo Checking if Y:\10.210.12.8\Rubicon Drive exist? Please wait...
echo IMPORTANT: DO NOT TOUCH THE COMPUTER DURING THIS PROCESS
echo --------------------------------------------------
Rem : Bill Kingsley

SET LOG=c:\Temp\logs

echo **********[%Date% - %Time%****************>%LOG%\Mapdrive.log

  IF EXIST Y:\  (
        echo. 
    echo The drive is already mapped. 
    echo ...Check if the mapp drive is accessible?....
        echo.
    dir y: >>%LOG%\Mapdrive.log
    if ERRORLEVEL 1 GOTO MAPDRIVE     
        GOTO SKIPPED
    ) ELSE (
      echo The drive has not yet been mapped.
      goto MAPDRIVE   
      )
goto end

:SKIPPED
echo.
Echo ******Mapped Drive Y is working Fine********
Echo.
Goto end

:MAPDRIVE
Net use Y: /d
net use Y: \\172.31.161.100\eBBS 
      dir Y: >> %LOG%\Mapdrive.log
  if errorlevel 0 goto SKIPPED
  if errorlevel 1 goto MAPDRIVE  
Goto end

:end 
echo ----------------------------------------
echo Maintenance check complete. check log in %LOG%
echo ----------------------------------------
rem exit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T21:53:51.487

如果您的电源选项设置正确，它会在不使用时停止模式旋转。

在 Windows 7 中，在您的开始搜索电源选项。在您当前的电源计划中点击更改计划选项。然后点击更改高级电源选项并转到硬盘驱动器。

[http://blog.laptopmag.com/windows-advanced-power-options-explained](http://blog.laptopmag.com/windows-advanced-power-options-explained)

# jquery - Harvest Chosen jQuery 插件显示先前选择和保存的数据

> ID：11495910
> 
> 赞同：0
> 
> 时间：2012-07-15T21:49:18.520
> 
> 标签：jquery, asp.net-mvc-3

我已将 Harvest Chosen 插件添加到我的 MVC3 应用程序中，并且可以从实体加载项目。我可以通过 EF 将所选项目保存回另一个表。我的问题是如何在选择下拉列表中将以前保存的项目显示为选择（显示）？

我应该使用两个选择的下拉菜单吗？下拉列表 A 具有表 A 中的列表，下拉 B 具有表 B 中保存的项目。如果是这样，那么我想我需要编写代码以确保选择的下拉列表 A 不再具有选择的下拉列表 B 中的项目? 或者，我可以使用一个选择下拉菜单吗？

如果我将表 B 加载到 Chosen Dropdown B，那么我希望这些项目位于下拉列表中（未显示为已选择）。我环顾四周，但我显然错过了一些东西:(

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:00:26.993

我解决了，是的，我的 jQuery 技能确实需要一些工作！我最初是在处理一组项目并尝试内联地做所有事情：

```
<div class="editor-field">
   @Html.ListBox("ParticipantsList", Model.Participants,
         new { @class = "chzn-select", data_placeholder = "Select Participants...", style = "width:350px;" })
</div> 
```

“ParticipantsList”是我收集的 id、值对。Model.Participants 是我模型中的集合，我有脚本标签来引用选择的插件。然后，我无处为我的集合中的每个项目设置 option selected 属性。

我更改了选择的脚本：

```
 <script>
        jQuery(document).ready(function () {jQuery(".chosen").data("ParticipantsList", "Select Frameworks...").chosen();});
       </script> 
```

然后使用 foreach 循环迭代集合并设置每个项目的 Selected 属性：

```
 <select class="chosen" multiple="true" style="width:400px;">
          @foreach(var item in Model.Friends)
             {
                <option selected="selected">@item.Text</option>
             }
       </select> 
```

希望对某人有所帮助....

# jquery - 使用 Jquery 为 spring 表单动态添加行

> ID：11495916
> 
> 赞同：2
> 
> 时间：2012-07-15T21:50:30.470
> 
> 标签：jquery

有人可以帮我解决以下问题吗？我在我的项目中使用 spring，并且我有一个 jsp 页面，其中有一个表，其中第一行是从控制器加载的。该表还有一个“添加行”按钮，用户可以使用该按钮添加多行以在提交表单之前添加更多记录。发生的情况是我使用 AutopopulatingList ，因此在提交中每一行都作为控制器中的单独对象处理。我的问题是添加按钮。我使用 JQuery 来动态添加行。但是克隆选项不合适（如果我错了，我想纠正我）因为我无法处理列表的索引。我使用了以下但没有任何效果。

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
 <!DOCTYPE html>
<html>
<head>
    <link href="styles.css" rel="stylesheet" type="text/css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Addcolsinviews Add</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="../js/jquery.validate.min.js"></script>

    <script type="text/javascript">
       $(document).ready(function() {

$("#addStudentButton").click(function() {

          $('#dataTable tbody>tr:last').clone(true).insertAfter('#dataTable tbody>tr:last');     
          return false;

});
});
</script>

    </head>
<body>
    <%@include file="header.jsp" %>
    </div>
    <div class="main">
        <%@include file="tableslist.jsp" %>
        <div class="content">
            <div class="subtitle">ADDCOLSINVIEWS ADD</div>   

  <form:form method="POST" name="addcolsForm" id="addcolsForm" commandName="addcolsinviewsadd">
        <table id="dataTable"> 
            <thead>
                    <tr margin-top="10px">
                        <th>Target View</th>
                        <th>Target Column</th>
                        <th>Source View</th>
                        <th>Source Column</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr  id="rowToClone">                           
                     <td>
                            <spring:bind path="addcolsinviewsadd.addcolsinviews[0].targetview">
                                <form:input path="${status.expression}"/>                              
                            </spring:bind></td>            
                        <td>
                            <spring:bind path="addcolsinviewsadd.addcolsinviews[0].targetcol">
                                <form:input path="${status.expression}"/>
                            </spring:bind></td>    
                        <td>
                            <spring:bind path="addcolsinviewsadd.addcolsinviews[0].sourceview">
                                <form:input path="${status.expression}"/>
                            </spring:bind></td>
                        <td>
                            <spring:bind path="addcolsinviewsadd.addcolsinviews[0].sourcecol">
                                <form:input path="${status.expression}"/>
                            </spring:bind></td>  
                        <td><input type="button" id="addStudentButton" value="Add"/></td>

                    </tr>                        
             </tbody>
          </table>                 
           <input id="actionbtn" type="submit" value="Process">            
 </form:form>   
             </div>
      </div>                   
</body>
</html> 
```

第二次试用是 jquery 的一部分，如下所示：

```
 <SCRIPT language="javascript">      

    $(document).ready(function() {

var incrementVar = 0;
$("#addStudentButton").click(function() {
    incrementVar++;
            var appendTxt = "<tr>";
        appendTxt = appendTxt +                     
             "<td><spring\:bind path=\"addcolsinviewsadd.addcolsinviews[" + incrementVar + "].targetview\">";
            appendTxt = appendTxt + 
             "<form\:input path=\"${status.expression}\"/>";
            appendTxt = appendTxt +
             "</spring\:bind></td>";                 

            appendTxt = appendTxt +                     
             "<td><spring\:bind path=\"addcolsinviewsadd.addcolsinviews[" + incrementVar + "].targetcol\">";
            appendTxt = appendTxt + 
             "<form\:input path=\"${status.expression}\"/>";
            appendTxt = appendTxt +
             "</spring\:bind></td>";  

            appendTxt = appendTxt +                     
             "<td><spring\:bind path=\"addcolsinviewsadd.addcolsinviews[" + incrementVar + "].sourceview\">";
            appendTxt = appendTxt + 
             "<form\:input path=\"${status.expression}\"/>";
            appendTxt = appendTxt +
             "</spring\:bind></td>";

           appendTxt = appendTxt +                     
             "<td><spring\:bind path=\"addcolsinviewsadd.addcolsinviews[" + incrementVar + "].sourcecol\">";
            appendTxt = appendTxt + 
             "<form\:input path=\"${status.expression}\"/>";
            appendTxt = appendTxt +
             "</spring\:bind></td></tr>";
   alert(appendTxt);   

$("#dataTable tr:last").after(appendTxt);

</script> 
```

上面的问题是根本没有添加行。该页面似乎尝试添加一行，但它太小了..我没有收到任何错误。在 appendTxt 的警报中 ${status.expression} 不存在。路径为空。我这就是问题所在。有谁知道语法是否可以，或者我是否可以以其他方式写这个？

我不知道该怎么做，我已经搜索了很多.. 请感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T14:37:43.807

这里有一篇很有帮助的文章... [jquery clone form fields and increment id](https://stackoverflow.com/questions/8018132/jquery-clone-form-fields-and-increment-id)

所以答案是使用 clone() 并使用正则表达式来增加您的索引。详细信息和示例在上面的链接中给出。附加 Spring 表单元素将不起作用，因为附加发生在浏览器端，而 Spring 表单元素是在服务器端编译的。浏览器对 Spring 元素一无所知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:48:38.807

如果您在页面呈现后检查其 HTML 源代码，您会注意到由于服务器端在到达浏览器之前的处理而发生的`<\form:input>`变化。`<\input>`

因此，使用jQuery插入是`form:input`行不通的；您需要以 HTML 呈现形式输入它。查看已经渲染`<\tr>`的 's 并以相同的格式复制其内容。（即不要使用`path=`, 使用`value=`,`name=`等）。

# wpf - 未设置源绑定的一种方法

> ID：11495926
> 
> 赞同：0
> 
> 时间：2012-07-15T21:51:55.880
> 
> 标签：wpf, data-binding

我正在尝试绑定到第三方控件上的只读属性（因此无法控制该属性的实现）。据我了解，我需要将其作为 onewaytosource 绑定类型执行，并且还需要在代码中执行。

我有以下代码来设置绑定：

```
 Binding svBinding = new Binding();
        svBinding.Path = new PropertyPath("SurfaceScrollViewer");
        svBinding.Source = DataContext;
        svBinding.Mode = BindingMode.OneWayToSource;
        Ds.SetBinding(DiagramSurface.ScrollViewerProperty, svBinding); 
```

我在视图模型上的属性实现：

```
public DiagramScrollViewer SurfaceScrollViewer
    {
        get
        {
            return surfaceScrollViewer;
        }
        set
        {
            surfaceScrollViewer = value;
        }
    }

    private DiagramScrollViewer surfaceScrollViewer; 
```

我可以通过代码访问同一数据上下文中的其他属性，但由于某种原因，我无法绑定此属性。谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:35:42.087

它不起作用，因为它是 wpf 的一个错误。看看这个[http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:44:20.647

嗨，我误解了你的问题对不起。这是 wpf 中的一种错误，用于将 ReadOnly 属性与 OneWayToSource BindingMode 绑定，您可以[在这里得到确切的答案](https://stackoverflow.com/questions/658170/onewaytosource-binding-from-readonly-property-in-xaml)

# php - 在 php 中调整和显示来自 sql 的图像

> ID：11495927
> 
> 赞同：2
> 
> 时间：2012-07-15T21:52:09.313
> 
> 标签：php, sql, database, image, resize

我想更改以下 php 代码，以便一次调整大小并显示图像，并带有“下一个”和“上一个”按钮，以便浏览照片。我不想要任何图片库或灯箱解决方案，而只是在页面上显示照片。我是 php 新手，所以如果有人可以帮助或指出我正确的方向，所有帮助都将不胜感激。

```
$sql = "select * from people";
$result = mysql_query($sql) or die ("Could not access DB: " .  mysql_error());
while ($row = mysql_fetch_assoc($result))
{
    echo "<div class=\"picture\">";
    echo "<p>";

// Note that we are building our src string using the filename from the database
    echo "<img src=\"images/" . $row['filename'] . "\" alt=\"\" /><br />";
    echo $row['fname'] . " " . $row['lname'] . "<br />";
    echo "</p>";
    echo "</div>"; 
```

[上述代码的来源](http://www.dreamincode.net/forums/topic/76064-uploading-images-with-php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:59:25.657

`width`你可以在浏览器中使用和属性来缩放它们`height`（或者只使用一个属性来保持纵横比），但这有很多原因，包括带宽、页面性能和图像质量。

您可以使用诸如[`GD`](http://php.net/manual/en/book.image.php)或之类的库重新调整图像大小[`Imagick`](http://www.php.net/manual/en/book.imagick.php)

一个快速示例`IMagick`：

```
$hThumb = new Imagick($path_to_file); // Source file
$hThumb->thumbnailImage($x, $y); // You can use 300, 0 to do 300 width and maintain aspect ratio.
$hThumb->stripImage();  // remove meta data
$hThumb->writeImage($path_to_thumb); // write the image to disk 
```

**笔记**

确保具有读/写权限。您可以使用`is_readable`和来验证此权限`is_writable`。

**正在加载**

建议使用加载图像，如果使用或类似的库`AJAX`非常容易。`JQuery`

```
$('#nextBtn').click(function() {
    var index = 0; // Store this in your image ID tag perhaps
                   // e.g. $('#theImage').attr('id').replace('image', '')
                   // where ID is imageX
    $.ajax({
       url: 'getImages.php?index=' + index,
       type: "GET",
       success: function(data) {
           var result = $.parseJSON(data);
           if (result.success) {
              // Set your image src with the new path. 
              // Use result.image_data.src etc...
           }
       }
    });
}); 
```

PHP 也相对简单，结构类似于：

```
 <?php
    $return = array('success' => false, 'image_data' => array());
    if (isset($_GET['index']) && is_numeric($_GET['index')) {
       // Fetch your image
       $return = array(
           'success' => true,
           'image_data' => array(
              'src' => $src, 
              'title' => $title,
              'index' => $index
           )
        );

    }

    echo json_encode($return);
 ?> 
```

** 另一个注意事项 **

正如 kgb 所述，您应该在上传时调整它们的大小，但是，它们可能不是用户提交的，因此您还可以检查输出中是否存在拇指并根据需要生成任何拇指。当然，不要为每个视图生成它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:02:00.483

您应该在上传时调整图像大小，而不是在输出时。存储原始图像和调整大小的图像，在列表中显示小图像，并在用户需要时显示全尺寸...

[imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php) () 文档中的示例代码：

```
// Get new dimensions
list($width, $height) = getimagesize($filename);
$widthNew = 320; // You decide
$heightNew = 240; // You decide

// Resample
$imageNew = imagecreatetruecolor($widthNew, $heightNew);
$imageOld = imagecreatefromjpeg($filename);
imagecopyresampled($imageNew, $imageOld, 0, 0, 0, 0, $widthNew, $heightNew, $width, $height);

// Output
imagejpeg($imageNew, $newFilename, 100); 
```

此示例期望 gd 扩展名包含在 php.ini 中。Martin 提到的 Imagick 扩展更强大，提供更好的界面，但很少包含在虚拟主机中。

还为您搜索了这个：[http ://www.9lessons.info/2009/03/upload-and-resize-image-with-php.html](http://www.9lessons.info/2009/03/upload-and-resize-image-with-php.html)

# delphi - 如何确保所有属性都已重置

> ID：11495931
> 
> 赞同：1
> 
> 时间：2012-07-15T21:52:52.223
> 
> 标签：delphi, class

我使用一个类来为信用卡充值；每次处理交易时，我只需更改卡号和日期等属性并提交。

碰巧属性设置不正确，交易使用旧卡号进行。糟糕的。

所以为了防止这种情况再次发生，我想确保类中的所有属性都恢复为默认值。我正在考虑处理创建的类并重新创建它。但我不确定如何在 Delphi 中做到这一点。

这是我当前的代码：

```
if frmPayAware = nil then  
  Application.CreateForm(TfrmPayAware, frmPayAware);
  frmPayAware.ProcessCredit(eExpDate.Text,FTrack,eNameOnCard.Text,eCardNum.Text,0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:03:19.320

您可以创建一个清除所有属性的清除方法。或者您可以为每次使用创建表单：

```
var
  frm : TfrmPayAware;
begin
  frm := TfrmPayAware.Create(nil);
  try
    frm.ProcessCredit(eExpDate.Text,FTrack,eNameOnCard.Text,eCardNum.Text,0);
  finally
    frm.Release;
  end;
end; 
```

就个人而言，我更喜欢后一种方法，因为它确保每次使用表单时，它都处于相同的状态（刚刚创建）。

**免费与发布** 发布，将消息 CM_RELEASE 发布到表单。如果消息已处理（在处理所有其他消息之后），则调用 Free。

# python - 不能减去玩家的 hp

> ID：11495932
> 
> 赞同：0
> 
> 时间：2012-07-15T21:53:05.737
> 
> 标签：python

我正在尝试减去玩家的 hp。

这是我的代码示例：

```
class player():
    def __init__(self):
        self.hp = 100

    def check_death(self):
    ....

p = player()
p.hp - 10
print p.hp 
```

但它正在打印 100 所以没有减法完成我该如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:54:13.780

表达方式

```
p.hp - 10 
```

计算一个新值然后将其丢弃，因为您没有告诉 Python 将结果放在任何地方。要么做：

```
p.hp = p.hp - 10 
```

或 Python 支持以下简写：

```
p.hp -= 10 
```

# python - 打破语法错误：语法错误

> ID：11495933
> 
> 赞同：1
> 
> 时间：2012-07-15T21:53:26.473
> 
> 标签：python, syntax, break

我的休息有什么问题？我不明白为什么当我编译代码时它在我的休息时说无效语法

```
for index, (start, end) in enumerate(searchPFAM(fname)):            
    with open('output_'+uniprotID+'-%s.txt' % index,'w') as fileinput:
        print start, end
        for item in lookup[uniprotID]:
            item, start, end = map(int, (item, start, end)) #make sure that all value is int
            if start <= item <= end:
                print item
                result = str(item - start)
                fileinput.write(">{0} | at position {1} \n".format(uniprotID, result))
                #text = fileinput.write(''.join(makeList[start-1:end]))
                textwrap.fill(''.join(makeList[start-1:end],width = 60)
                break
            else:
                fileinput.write(">{0} | N/A\n".format(uniprotID))
                #text = fileinput.write(''.join(makeList[start-1:end]))
                textwrap.fill(''.join(makeList[start-1:end],width = 60) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T21:54:50.540

您在此行缺少右括号：

```
textwrap.fill(''.join(makeList[start-1:end],width = 60)
#            ^       ^                                ^ 
```

应该是这样的：

```
textwrap.fill(''.join(makeList[start-1:end]),width = 60) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:54:58.873

它是上一行缺少的右括号。

# c++ - 是否可以使“原型模式”适应右值引用？

> ID：11495936
> 
> 赞同：1
> 
> 时间：2012-07-15T21:54:25.703
> 
> 标签：c++, design-patterns, c++11, rvalue-reference, move-semantics

我有一个实现 [原型模式](http://en.wikipedia.org/wiki/Prototype_pattern)的类​​层次结构，我想使用移动语义来限制对象的深度复制。我尝试使用`move()`成员函数来调整模式，这意味着我不再需要原始对象。这是我到目前为止所拥有的：

```
#include <iostream>
#include <utility>
#include <vector>

struct base
{
    virtual ~base() { }
    virtual base* clone() const = 0;
    virtual base* move() = 0;
};

struct derived1 : public base
{
    derived1()                { std::cout << "derived1::derived1()\n"; }
    derived1(const derived1&) { std::cout << "derived1::derived1(const derived1&)\n"; }
    derived1(derived1&&)      { std::cout << "derived1::derived1(derived1&&)\n"; }

    virtual ~derived1() { }

    virtual base* clone() const { return new derived1(*this); }
    virtual base* move()        { return new derived1(std::move(*this)); }
};

struct derived2 : public base
{
    derived2()                { std::cout << "derived2::derived2()\n"; }
    derived2(const derived2&) { std::cout << "derived2::derived2(const derived2&)\n"; }
    derived2(derived2&&)      { std::cout << "derived2::derived2(derived2&&)\n"; }

    virtual ~derived2() { }

    virtual base* clone() const { return new derived2(*this); }
    virtual base* move()        { return new derived2(std::move(*this)); }
};

std::vector<base*> vec;

void foo(const base& obj)
{
    vec.push_back(obj.clone());
}

void foo(base&& obj)
{
    vec.push_back(obj.move());
}

int main()
{
    derived1 d1;
    derived2 d2;

    foo(d1);
    foo(d2);
    foo(derived1());
    foo(derived2());
} 
```

当我运行它时，它表明使用了好的构造函数：

```
derived1::derived1()
derived2::derived2()
derived1::derived1(const derived1&)
derived2::derived2(const derived2&)
derived1::derived1()
derived1::derived1(derived1&&)
derived2::derived2()
derived2::derived2(derived2&&) 
```

到目前为止，似乎还不错。我只是不确定这是否是右值引用的标准兼容用法。有没有一点我没有想到会产生不良结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:39:56.730

对于重复的方法定义，我更喜欢[CRTP](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。对于您的情况，我会声明如下：

```
template<typename TDerived>
class virtually_clonable : public base
{
public:
    virtual base* clone() override
    {
        return new TDerived(*AsDerived());
    }

    virtual base* move() override
    {
        return new TDerived(std::move(*AsDerived()));
    }
private:
    TDerived* AsDerived()
    {
        return static_cast<TDerived*>(this);
    }
}; 
```

在实现类时：

```
class derived1 : public virtually_clonable<derived1>
{
public:
/* your ctors goes here*/
/* no need to implement clone/move again */
};

class derived2 : public virtually_clonable<derived2>
{
public:
/* your ctors goes here*/
/* no need to implement clone/move again */
}; 
```

顺便说一句，您可能希望返回`shared_ptr`对象而不是原始指针。这通常是可克隆类型而不是`unique_ptr`.

# php - php preg_match 返回计数

> ID：11495942
> 
> 赞同：0
> 
> 时间：2012-07-15T21:54:55.627
> 
> 标签：php, preg-match

我有以下变量：

```
$texttofind = "story of a test";
$paragraph  = "the story of a test and a test paragraph used for
               testing the story of a test paragraph"; 
```

我想`preg_match();`用来返回计数，在这种情况下是 2。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T21:57:01.237

不需要正则表达式，只需使用[`substr_count`](http://php.net/substr_count)：

```
echo 'Found texttofind ' . substr_count($paragraph, $texttofind) . ' times'; 
```

如果您真的想使用正则表达式，可以使用以下（较慢且不必要的复杂）表达式：

```
echo preg_match_all('/' . preg_quote($texttofind, '/') . '/', $paragraph); 
```

# javascript - 将参数传递给事件处理程序

> ID：11495944
> 
> 赞同：0
> 
> 时间：2012-07-15T21:55:14.950
> 
> 标签：javascript, jquery

在 jquery 中，如何将附加参数传递给事件处理函数？

所以例如

```
mySaveFunction: function(i) {
var msg = "my message " + i;
$.ajax({
  ...
  success: this.successFunction, // i want to pass msg to successFunction
  ...
});

successFunction: function(response) {
   // do something with msg

}, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:59:14.690

匿名函数应该在这里解决问题。但是，在匿名函数内部，`this.successFunction`将是未定义的，因此我们需要存储`this`对匿名函数外部的引用。

```
var that = this;

$.ajax({
    ...
    success: function() {
        that.successFunction(msg);
    }
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:00:16.670

您可以为此使用闭包：

```
mySaveFunction: function(i) {
    var self = this; // <=== Grab what `this` is
    var msg = "my message " + i;
    $.ajax({
      ...
      success: function(response) {
          self.successFunction(response, msg); // <=== Use it and `msg `here
      ...
    });
// ...

successFunction: function(response) {
   // do something with msg
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:10:34.910

您可以使用`$.proxy`：

```
mySaveFunction: function(i) {
    var msg = "my message " + i;
    $.ajax({
          ...
        success: $.proxy(this.successFunction, this, msg), // i want to pass msg to 
          ...
    });
},
successFunction: function(msg, response) {
    // do something with msg
}, 
```

[Docs](http://api.jquery.com/jQuery.proxy)虽然部分应用程序仍然没有记录但已[实现](http://bugs.jquery.com/ticket/7783)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T21:57:39.777

使用匿名函数：

```
 success: function() {
    this.successFunction(parameters);
  } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T21:56:54.450

您可以使用闭包：

```
mySaveFunction: function(i) {
var msg = "my message " + i;
$.ajax({
  ...
  success: function(response) {
       alert(msg);  /* msg is available here */
  }
  ...
}); 
```

# c++ - 异步代理库和数据共享

> ID：11495947
> 
> 赞同：2
> 
> 时间：2012-07-15T21:55:41.140
> 
> 标签：c++, parallel-processing, share, agents

我正在尝试通过使用 C++ 中包含的异步代理库 (AAL) 来调用两个独立线程（另请参阅此处了解 AAL 描述[http://msdn.microsoft.com/en-us/library/dd492627.aspx](http://msdn.microsoft.com/en-us/library/dd492627.aspx)）。代理库通过让您通过基于数据流而不是控制流的异步通信模型连接隔离组件，提供了共享状态的替代方案。数据流是指一种编程模型，当所有需要的数据都可用时进行计算；控制流是指按预定顺序进行计算的编程模型。

因为我不想等待来自一个代理的任意数据，所以我想使用 Concurrency::send() 和 Concurrency::try_receive()。但是，我在实现 try_receive 方法时遇到了问题（可以在此处找到文档[http://msdn.microsoft.com/de-de/library/dd470874.aspx](http://msdn.microsoft.com/de-de/library/dd470874.aspx)）。

我目前的实现：

```
ISource<bool>& _source;    
Concurrency::try_receive(_source, &Received,ITarget<CPlant*>::filter_method()) 
```

将 CPant 作为我的数据发送回 _source-Message 来自的代理。Agent1 使用 CPlant 类发送一个简单的布尔值“true”和 Agent2（包括上面提到的代码）响应。这与 Concurrency::receive() 一起使用，但我不想阻止当前代理的进一步执行。

您是否知道为什么我会遇到编译错误，例如

```
1>c:\users\robert\tum\da\src\sim\anlagensim\anlagensim\main.cpp(57): error C2782: 'bool Concurrency::try_receive(Concurrency::ISource<_Type> &,_Type &,const ITarget<_Type>::filter_method &)' : template parameter '_Type' is ambiguous
1>          c:\program files\microsoft visual studio 10.0\vc\include\agents.h(16553) : see declaration of 'Concurrency::try_receive'
1>          could be 'int *'
1>          or       'bool'
1>c:\users\robert\tum\da\src\sim\anlagensim\anlagensim\main.cpp(57): error C2780: 'bool Concurrency::try_receive(Concurrency::ISource<_Type> &,_Type &)' : expects 2 arguments - 3 provided 
```

?

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:37:27.973

我从来没有对这个库做过任何事情，但是看看你可能试图匹配的函数签名：

```
template <
   class _Type
>
bool try_receive(
   ISource<_Type> & _Src,
   _Type & _value,
   typename ITarget<_Type>::filter_method const& _Filter_proc
); 
```

所有三个参数都`try_receive`期望相同`_Type`。查看您调用它的方式，您正在传递参数（因此期望在您传递`ISource<bool>`的参数的位置（因此期望成为）。因为，编译器变得困惑并且未能解决该函数并尝试使用该函数的其他重载，这就是您收到奇怪错误的原因。`_Src``_Type``bool``_Filter_proc``ITarget<CPlant*>``_Type``CPlant*``bool != CPlant*`

由于我没有使用该库，因此我无法告诉您应该传递什么，但我猜您可能应该使用`ISource<CPlant*>`（或`_Type`as`CPlant`而不是`CPlant*`）。

请注意，第二个参数也是 type `_Type`，因此`Received`需要使用与其他参数相同的模板类型（从您的问题中不清楚该参数当前是什么类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:05:34.183

我通过使用 OpenMP 做了另一种方法，它可以非常轻松地很好地支持数据共享和线程管理。

```
#include <omp.h>
...

#pragma omp parallel shared(Simulation, cout) default(none) num_threads(3)
{
    #pragma omp sections nowait
    {
        #pragma omp section 
        {
        ...
        }

        #pragma omp section 
        {
        ...
        }

        #pragma omp section
        {
        ...
        }
    }
} 
```

建议`/openmp`在使用 Visual C++ 时使用 switch。

# android - 你应该如何使用带有 PathShape 的 ShapeDrawable 在自定义视图上画线？

> ID：11495953
> 
> 赞同：5
> 
> 时间：2012-07-15T21:56:32.273
> 
> 标签：android, path, line, custom-view, shapedrawable

我正在尝试在 custom 中画一条线`View`。在这里，我创建了一个`Path`只有一个片段的简单片段，`PathShape`从中创建了一个，最后将其粘贴到 a`ShapeDrawable`中，目的是使用它在`Canvas`内部绘制`onDraw()`。但是，这不起作用。看我的例子，在这里。

```
package com.example.test;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.drawable.ShapeDrawable;
import android.graphics.drawable.shapes.PathShape;
import android.util.Log;
import android.view.View;

public class TestView extends View {

    private Path mPath = null;
    private Paint mPaint = null;
    private PathShape mPathShape = null;
    private ShapeDrawable mShapeDrawable = null;

    public TestView(Context context) {
        super(context);
    }

    private void init() {
        int width = this.getWidth() / 2;
        int height = this.getHeight() / 2;

        Log.d("init", String.format("width: %d; height: %d", width, height));

        this.mPath = new Path();
        this.mPath.moveTo(0, 0);
        this.mPath.lineTo(width, height);

        this.mPaint = new Paint();
        this.mPaint.setColor(Color.RED);

        this.mPathShape = new PathShape(this.mPath, 1, 1);

        this.mShapeDrawable = new ShapeDrawable(this.mPathShape);
        this.mShapeDrawable.getPaint().set(this.mPaint);
        this.mShapeDrawable.setBounds(0, 0, width, height);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        // Doing this here because in the constructor we don't have the width and height of the view, yet
        this.init();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        Log.d("onDraw", "Drawing");

        // This works, but won't let me do what I'm really trying to do
        canvas.drawLine(0.0f, 0.0f, this.getWidth() / 2.0f, this.getHeight() / 2.0f, this.mPaint);

        // This should work, but does not
        //this.mPathShape.draw(canvas, this.mPaint);

        // This should work, but does not
        //this.mShapeDrawable.draw(canvas);
    }

} 
```

从我在`onDraw()`方法中的评论中可以看出，既不使用`PathShape`也不使用`ShapeDrawable`将 绘制`Path`到`Canvas`实际作品上。当我尝试时，什么都没有画出来。有谁知道为什么？

我正在测试的设备运行的是 Android 4.1.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T01:44:58.353

这有两个问题。

首先是`Paint`风格。默认值为`Paint.Stroke.FILL`，但有一条线没有可填充的内容。我需要添加这个（谢谢，[Romain Guy](http://code.google.com/p/android/issues/detail?id=35229#c1)）：

```
this.mPaint.setStyle(Paint.Style.STROKE); 
```

第二个问题是中的标准高度和宽度`PathShape`不正确。我已经阅读[了这方面的文档](http://developer.android.com/reference/android/graphics/drawable/shapes/PathShape.html#PathShape%28android.graphics.Path,%20float,%20float%29)，但没有正确理解。一旦我解决了第一个问题，这一点就变得很明显。将其设置为我的自定义视图的高度和宽度（因为我正在绘制整个视图）修复了这个问题。我还必须更改`ShapeDrawable`要匹配的边界。

```
this.mPathShape = new PathShape(this.mPath, this.getWidth(), this.getHeight()); 
```

和

```
this.mShapeDrawable.setBounds(0, 0, this.getWidth(), this.getHeight()); 
```

希望这对将来的其他人有所帮助。

# ios - CALayer - CABasicAnimation 不围绕中心/锚点缩放

> ID：11495956
> 
> 赞同：27
> 
> 时间：2012-07-15T21:56:46.320
> 
> 标签：ios, core-animation

使用下面的代码，我一直试图让我的 CALayer 围绕其中心进行缩放 - 但它按左/上 (0,0) 缩放。我看到了这个问题：[CALayer](https://stackoverflow.com/questions/6379648/anchor-point-in-calayer)中的锚点并尝试设置锚点 - 但在我设置它之前它是 [.5, .5] 并且设置没有区别。也试过设置`contentsGravity`。

设置是我`CAShapeLayer`添加了一个，`self.view.layer`我在其中进行了一些绘图，然后添加了 CABasicAnimation。动画运行良好 - 但它向顶部/左侧缩放 - 而不是视图的中心。

已经修补了几个小时 - 它一定很简单，但我不明白。

```
shapeLayer.anchorPoint = CGPointMake(.5,.5);
shapeLayer.contentsGravity = @"center";

printf("anchorPoint %f  %f\n", shapeLayer.anchorPoint.x, shapeLayer.anchorPoint.y);

CABasicAnimation *animation =
[CABasicAnimation animationWithKeyPath:@"transform.scale"];

animation.fromValue = [NSValue valueWithCATransform3D:CATransform3DIdentity];
animation.toValue =   [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.1, 0.1, 1.0)];

[animation setDuration:1.0];
animation.fillMode=kCAFillModeForwards;
animation.removedOnCompletion=NO;
[shapeLayer addAnimation:animation forKey:@"zoom"]; 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-15T22:03:25.640

你`bounds`的层是什么？

我敢打赌它的大小为零；尝试将其大小设置为与您的形状相同的大小。

`CAShapeLayer`将形状绘制为一种覆盖，独立于您`contents`在普通. 这可能有点令人困惑。`bounds``contentsGravity``CALayer`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-27T18:01:42.323

还要确保在**创建视图后添加动画。**如果您尝试在 viewDidLoad 中添加动画，它可能无法正常工作。尝试将其添加到 viewDidAppear 中。

我只知道 Swift，但这里有一个例子：

```
override func viewDidAppear (animated: Bool) {
    addPulsation(yourButton)
}

func addPulsation (button: UIButton) {
    let scaleAnimation:CABasicAnimation = CABasicAnimation(keyPath: "transform.scale")
    scaleAnimation.duration = 1.0
    scaleAnimation.repeatCount = 100
    scaleAnimation.autoreverses = true
    scaleAnimation.fromValue = 1.05;
    scaleAnimation.toValue = 0.95;
    button.layer.addAnimation(scaleAnimation, forKey: "scale")
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-15T13:19:21.490

这是一个旧线程，但以防万一这对任何人都有帮助。

这是一个坐标空间问题。您只需要设置绘图空间和路径的空间。这段代码对我有用...

...只需将其放在动画创建方法的开头（在父视图的方法内）...

```
// add animation to remap (without affecting other elements)
    let animationLayer = CALayer()
    layer?.addSublayer(animationLayer). // (don't use optional for iOS)

// set the layer origin to the center of the view (or any center point for the animation)
    animationLayer.bounds.origin .x = -self.bounds.size.width / 2.0
    animationLayer.bounds.origin .y = -self.bounds.height / 2.0

// make image layer with circle around the zero point
    let imageLayer = CAShapeLayer()
    animationLayer.addSublayer(imageLayer)

    let shapeBounds = CGRect(x: -bounds.size.width/2.0,
                             y:-bounds.size.height/2.0,
                             width: bounds.size.width,
                             height: bounds.size.height)

    imageLayer.path = CGPath(ellipseIn: shapeBounds, transform: nil)
    imageLayer.fillColor = fillColour

    // **** apply your animations to imageLayer here **** 
```

此代码在 iOS 和 MacOS 上保持不变 - 除了 MacOS 所需的可选层。

（顺便说一句，您需要在动画完成后删除动画层！）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-16T15:50:45.097

我花了几个小时根据中心找出如何做到这一点，但找不到任何适用于 OSX 的解决方案。我决定使用 CATransform3DMakeTranslation 移动图层并结合两种变换。

我的代码：

```
NSView *viewToTransform = self.view;
[viewToTransform setWantsLayer:YES];

viewToTransform.layer.sublayerTransform = CATransform3DConcat(CATransform3DMakeScale(-1.0f, -1.0f, 1.0f), CATransform3DMakeTranslation(viewToTransform.bounds.size.width, viewToTransform.bounds.size.height, 0)); 
```

# php - DOMDocument::loadHTMLFile() 修改用户代理

> ID：11495961
> 
> 赞同：3
> 
> 时间：2012-07-15T21:57:06.263
> 
> 标签：php, domdocument, user-agent

我使用 PHP 在 DOM 树中加载网站。有没有办法修改使用发送的用户代理`DOMDocument::loadHTMLFile()`？

```
function parseThis($url)
{
  $html = new DOMDocument();
  $html->loadHtmlFile( $url );

  return $html
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T22:10:43.397

更改 中的`user_agent`值`php.ini`，该值应该在任何使用 http 流包装器的东西中发送，例如`DOMDocument::loadHtmlFile(), file_get_contents()`等。

```
$fake_user_agent = "Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11";
ini_set('user_agent', $fake_user_agent); 
```

如果您的服务器配置允许，也可以`.htaccess`通过设置在 Apache 中完成相同的操作。`php_value user_agent`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T22:11:59.893

好吧，我认为最好的方法是以不同的方式检索内容并在之后加载文档。您可以使用 cURL 来做到这一点。

```
$useragent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1";

$ch = curl_init();

// set user agent
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab content from the website
$content = curl_exec($ch);

// load the content in your dom
$html = new DOMDocument();
$html->loadHTML($content); 
```

# objective-c - 如何在Objective-C中计算经纬度坐标周围的周长？

> ID：11495962
> 
> 赞同：-1
> 
> 时间：2012-07-15T21:57:29.027
> 
> 标签：objective-c, math, latitude-longitude

我需要知道如何在看起来有点像这样的“if”语句中计算纬度/经度坐标（在浮点数中）周围的某种周长：

```
if (lat != perimeterLat && long != perimeterLong) {
    // alert
} 
```

如果有更好的方法（而不是使用“if”语句），请告诉我。

谢谢，雅各布克罗斯

更新：

好的。所以我想通了。我要做的是：

```
- (void)locationChange:(CLLocation *)newLocation:(CLLocation *)oldLocation { 
    CLLocationCoordinate2D newCoordinate = [newLocation coordinate];
    CLLocationCoordinate2D oldCoordinate = [oldLocation coordinate];

    CLLocationDistance meters = [newCoordinate distanceFromLocation:oldLocation];
} 
```

这将是我计算距离的方法。

[在这里找到答案](https://stackoverflow.com/questions/3905896/distancefromlocation-calculate-distance-between-two-points)

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:10:43.220

在球体上，您可以使用半正弦公式计算两点之间的大圆距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:50:44.337

好的。所以我想通了。我要做的是：

```
- (void)locationChange:(CLLocation *)newLocation:(CLLocation *)oldLocation { 
    CLLocationCoordinate2D newCoordinate = [newLocation coordinate];
    CLLocationCoordinate2D oldCoordinate = [oldLocation coordinate];

    CLLocationDistance meters = [newCoordinate distanceFromLocation:oldCoordinate];
} 
```

这将是我计算距离的方法。

[在这里找到答案](https://stackoverflow.com/questions/3905896/distancefromlocation-calculate-distance-between-two-points)

感谢大家的帮助！

雅各布

# cakephp - 从 HABTM 表中删除关联

> ID：11495963
> 
> 赞同：3
> 
> 时间：2012-07-15T21:57:35.003
> 
> 标签：cakephp

我有一个用户和一个报告表，与 HABTM 关系相连。

我可以保存一个在表中创建正确记录的`reports_users`报表，我可以使用查看关系表`$this->User->ReportsUser->..`，等等。

现在我想删除 reports_users 表中的特定行，但我似乎做不到。

我尝试了以下方法：

```
$this->User->ReportsUser->deleteAll(array(
    'ReportsUser.report_id' => $this->data['Report']['report_id'], 
    'ReportsUser.user_id' => $this->data['Report']['user_id']
)); 
```

..但是它使用这个查询删除了所有具有给定user_id的行：

![错误的删除查询](../Images/6d852f1508fd4e45fb5b9efad6a8d9ec.png)

我在这里做错了什么。deleteAll 调用中的数据是否错误？

我不想删除任何用户或报告，只删除它们之间的关系。

我可以确认表名是正确的，并且变量存在并且已设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:20:47.757

您的代码似乎没有错误。要么你`$this->data['ReportUser']['report_id']`有一些问题。最好的方法是首先尝试打印您的`$this->data`. 并检查它是否存在？

为安全起见，使用第二个参数`$cascade = false`并解除所有 ReportUser 模型关联使用`$this->ReportUser->unbindModel()`方法的绑定。

另一个原因似乎是 `$this->User->ReportUser. Try to use $this->ReportUser->deleteAll('your conditions', false);`直接删除数据。

请询问它是否不适合您。

# jquery - jQuery - 具有悬停效果的多个项目

> ID：11495967
> 
> 赞同：2
> 
> 时间：2012-07-15T21:57:52.910
> 
> 标签：jquery, html, css, hover, jquery-animate

在 CSS 中，我有几个带有悬停效果的 DIV 项目。如果我将鼠标悬停在一个元素上，则该元素具有另一种背景颜色。如果我将鼠标悬停在另一个项目上，则先前选择的项目具有默认背景颜色，而没有悬停。

我怎么能用 jQuery 做到这一点？我想为背景颜色设置动画，但想通过将鼠标悬停在另一个项目上来消除淡入淡出（动画）效果。我尝试使用窗口超时，但是在将鼠标指针滑过一些元素后，一切都在闪烁和窃听。

这是我用于鼠标悬停动画效果的代码：

```
$('.entry').mouseover(function() {
 (this).animate({ backgroundColor: "#0F410E" }, { duration: 500, queue: false });
}); 
```

已安装 jQuery 颜色插件 ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:01:57.930

你需要做这样的事情：

请轻弹jsfiddle的代码，我会看一下，但试试这个：

我不确定使用的原因是什么，`queue and duration`我认为您知道`:)`因此您正在使用它。

希望对事业有所帮助。

```
var items = '.entry'
$(items).hover(function() {
    // Mouseover state
    $(this).animate({ backgroundColor: "#0F410E" }, { duration: 500, queue: false });
}, function() {
    // Mouseout state
    $(this).animate({ backgroundColor: "black" }, { duration: 500, queue: false });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:02:20.430

对于元素的动画`background-color`，因为 jQuery 本身不会为颜色设置动画，您应该使用[jQuery Color](https://github.com/jquery/jquery-color)插件。

> 这个插件安装了一个`cssHook`允许 jQuery`.animate()`在两种颜色之间进行动画处理的插件。

# c++ - 从搅拌机导入的模型上的渐变色

> ID：11495974
> 
> 赞同：0
> 
> 时间：2012-07-15T21:59:11.037
> 
> 标签：c++, c, qt, opengl, blender

我将一个模型从搅拌机导入到 C 数组中，并在 Qt 下用 openGL (glew) 显示它。

我也有一个嵌入式资源顶点和片段着色器。我设法使顶点着色器工作并正确显示模型，但现在我想给它一个类似渐变的效果（这是一个简单的盒子，但我打算以某种方式在上面写，所以我需要制作它看起来不错）。

我怎样才能做到这一点？带有搅拌机的纹理？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:17:08.790

对于简单的线性渐变，您可以在顶点着色器中添加一条线，设置`gl_FrontColor`为某个 (vec4) 值，例如取决于顶点的 Y 坐标。在片段着色器中，您将其设置`gl_FragColor`为（如果您还对对象进行纹理化，则将`gl_Color`其乘以）。`gl_Color`

# css - 将列表项内联 - 下拉菜单

> ID：11495977
> 
> 赞同：0
> 
> 时间：2012-07-15T21:59:34.987
> 
> 标签：css, drop-down-menu

我有以下问题：我有一个简单的菜单，其中只有一个菜单项下面有子菜单。

在那个子菜单中，我有两个图标，我想将它们显示在 otehr 旁边，而不是像现在一样，一个在另一个下方。但是，我无法做到这一点。

这是菜单的代码：

```
 <ul class="menu">
    <li class="menu_item"><a href="link.php"><img src="home.png" class="menu_img"/></a></li>
    <li class="menu_item"><a href="link.php"><img src="me.png" class="menu_img"/></a></li>
    <li class="menu_item"><a href="link.php"><img src="listeners.png" class="menu_img"/></a></li>                   
    <li class="menu_item"><a href="link.php"><img src="notifications.png" class="menu_img" /></a> <span class="notification_badge_count"></span></li>
    <li class="menu_item"><a href="link.php"><img src="signout.png"  class="menu_img" /></a></li>

    <li class="menu_item"><a href="#"><img src="arrow.png" alt="Edit Profile / Sign Out" title="Edit Profile / Sign Out" class="menu_img" /></a>
        <ul>
            <li class="menu_item"><a href="link.php"><img src="favorites.png" class="menu_img" /></a></li>
            <li class="menu_item"><a href="link.php"><img src="settings.png"  class="menu_img" /></a></li>
        </ul>
    </li>
</ul> 
```

这是我此时拥有的css：

```
.menu {
    float:right;
}

.menu_item{
    background: rgba(0, 0, 0, 0.0);
}

.menu > li.menu_item{
    float:left;
    height:25px;
    padding:24px 10px 0 10px;
    text-align: center;
    font-size:12px;
    position:relative;
}

.menu_item ul{
    display:none;
}

.menu_img {
    opacity:0.5;
    filter:alpha(opacity=50); /* For IE8 and earlier */
}

.menu_item ul{
    display:none;
}

.menu_item:hover ul{
    display:inline;
    position:absolute;
    right:0px;
    top:100%;
   background: url("/assets/images/menu.jpg") repeat scroll 0 0 transparent;
}

.menu_item ul li{
    background-color:#f6f6f6;
    padding:5px; 
   display:inline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:32:58.860

您需要为您的子菜单设置一个宽度（并将其设置得足够大，至少是两个项目的宽度加上填充、边框和边距的总和），否则它的宽度将是其最宽项目的宽度（或者收藏夹或设置），它们将显示在不同的行上，即使它们是内联元素。

演示[http://dabblet.com/gist/3118949](http://dabblet.com/gist/3118949)

# eventbrite - 事件搜索返回日期范围之外的事件

> ID：11495978
> 
> 赞同：1
> 
> 时间：2012-07-15T21:59:51.223
> 
> 标签：eventbrite

我注意到有时对事件搜索的响应会返回一个超出 que3 日期范围的事件。这是一个示例（删除了我的密钥）：

[http://www.eventbrite.com/json/event_search?app_key=mykey&keywords=Photography&max=10&latitude=34.19751&longitude=-119.1771&within=50&within_unit=K&date=2012-07-20%202012-07-22](http://www.eventbrite.com/json/event_search?app_key=mykey&keywords=Photography&max=10&latitude=34.19751&longitude=-119.1771&within=50&within_unit=K&date=2012-07-20%202012-07-22)

以下是参数，每行一个：

```
http://www.eventbrite.com/json/event_search
?app_key=mykey
&keywords=Photography
&max=10
&latitude=34.19751
&longitude=-119.1771
&within=50
&within_unit=K
&date=2012-07-20%202012-07-22 
```

如果我运行这个查询，我会得到 3 个事件，其中一个看起来像这样（为简洁起见，有些项目被缩短了）：

```
 "event": {
            "box_header_text_color": "005580",
            "link_color": "EE6600",
            "box_background_color": "FFFFFF",
            "timezone": "US/Pacific",
            "box_border_color": "D5D5D3",
            "logo": "http://...",
            "organizer": {
                "url": "http://...,
                "id": 1066754373,
                "name": "Red Brick Gallery"
            },
            "background_color": "FFFFFF",
            "id": 2667310999,
            "category": "seminars,entertainment",
            "box_header_background_color": "EFEFEF",
            "capacity": 8,
            "num_attendee_rows": 9,
            "title": "Copy of Watercolor Workshops with Joe Cibere",
            "start_date": "2011-07-23 14:00:00",
            "status": "Started",
            "description": "...",
            "end_date": "2012-06-16 17:00:00",
            "tags": "...",
            "text_color": "005580",
            "repeat_schedule": "custom-2659333",
            "title_text_color": "", ... 
```

我使用键（在“事件”下）“开始日期”和“结束日期”来识别事件日期，从 2011 年 7 月 23 日到 2012 年 6 月 16 日。

查询时间跨度为 2012-07-20 至 2012-07-22。

事件的日期范围和查询的日期范围不重叠。

我的查询有问题，还是响应不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:52:10.203

尽管此事件计划在“2012-06-16”结束，但它被配置为在未来的不同日期重复。有关详细信息，请参阅“repeat”和“repeat_schedule”属性。

我们最近增加了对允许您访问“start_date”和“end_date”对数组的支持（每个重复实例）。

[每当您向event_get](http://developer.eventbrite.com/doc/events/event_get/)、[event_search](http://developer.eventbrite.com/doc/events/event_search/)、[user_list_events](http://developer.eventbrite.com/doc/users/user_list_events/)或Organizer_list_events API 调用添加值为“ [repeat_schedule](http://developer.eventbrite.com/doc/organizers/organizer_list_events/) ”的“display”参数时，都应包含额外的响应输出。

# c# - 将锯齿状 2d 列表转置为 1d 列表

> ID：11495979
> 
> 赞同：0
> 
> 时间：2012-07-15T21:59:54.650
> 
> 标签：c#, wpf, geometry, jagged-arrays

我正在实施 ZoomableCanvas [http://blogs.msdn.com/b/kaelr/archive/2010/08/11/zoomableapplication2-a-million-items.aspx](http://blogs.msdn.com/b/kaelr/archive/2010/08/11/zoomableapplication2-a-million-items.aspx)

它是一个 WPF 控件，允许在画布中虚拟化显示对象。为了利用虚拟化，该库要求您在数据源对象上实现一个名为“查询”的方法。Query 方法在给定 Rect 的情况下延迟返回 IEnumerable<int>，其中 int 表示元素在数据源中的位置，Rect 是画布的可见区域（画布中不可见的项目不返回，因此不绘制） . 我的数据源已排序，以便对 X 和 Y 值进行排序（myList[0] 将包含最小的 X,Y 坐标）

鉴于此信息，我可以简单地执行以下操作来获取我的物品

```
int c = this.Count;

for (int j = 0; j < c; j++)
{
    if (rectangle.Contains(new Point(this[j].left, this[j].top)))
    {
       yield return (int)j;
    }
} 
```

但是，我们正在遍历整个列表，并且列表中有 100k+ 项。这表现得非常糟糕，尤其是在查看画布的右下角时，因为这些项目位于列表的末尾。

所以我尝试转置数据，以便我可以在画布上的可见区域中获取点，并准确知道数组中对应的索引。

```
 var tilewidth = MapWidthInTiles;

        for (var x = Math.Max(left, 0); x <= right; x++)
        {
            for (var y = Math.Max(top, 0); y <= bottom; y++)
            {

                var i = (y * tilewidth) + x;

                if (i < Count)
                {
                    yield return (int)i;
                }
            }
        } 
```

除了我的数据集不规则（我正在绘制地图）之外，此方法有效，因为地图可能缺少或不完整的“图块”。因此，我的阵列基本上是锯齿状的。![锯齿状数据集缺少“瓦片”的插图](../Images/b3529dbe0b0e4f43b34477c86bcdede1.png)

基本上，我正在寻找一种方法，可以快速识别一维数组中给定二维几何的元素，其中二维数组中的元素可能不完整或不连续。通常 [y * widthOfAllItems] + x 会给我正确的 2d -> 1d 转置。但由于缺少元素，等式不成立。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:25:30.703

您不需要将您的项目存储在一维数组中，您需要将它们返回到一维数组中的 ZoomableCanvas。因此，请随意以您能想到的最有效的方式存储它们。
QuadTree 可能是存储您的点的一种解决方案：一棵树，其中每个节点有 4 个子节点 NE、SE、SW、NW，（NE=North-East，...）每个节点要么是空的，要么用一种颜色填充，要么有4个孩子也。另一种解决方案：使用岛屿作为基础对象，使用边界框更快......也许将岛屿存储在树中。

# sencha-touch - 在 Sencha Touch 中加载关联数据而不嵌套

> ID：11495985
> 
> 赞同：7
> 
> 时间：2012-07-15T22:00:05.810
> 
> 标签：sencha-touch, sencha-touch-2

我正在开发一个基本的 Sencha Touch 应用程序，该应用程序显示文本消息列表和发送消息的关联用户的名称。我已经按照在线教程了解如何设置模型关联，但每个教程都假设服务器生成具有嵌套结构的数据。

我正在使用的数据具有具有主/外键关系的平面结构，我无法弄清楚如何让 Sencha 从单个响应中加载两个存储。

模型/User.js

```
Ext.define('App.model.User', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            { name: 'uid', type: 'number' },
            { name: 'name', type: 'string' },
        ]
    }
}); 
```

商店/Users.js

```
Ext.define('App.store.Users', { 
    extend: 'Ext.data.Store',                                                    

    config: {                                                                    
        model: 'App.model.User',                                                 
        autoLoad: true,
    }
}); 
```

模型/Message.js

```
Ext.define('App.model.Message', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            { name: 'id', type: 'number' },
            { name: 'uid', type: 'number' },
            { name: 'message', type: 'string' }
        ],

        associations: [{
            type: 'belongsTo',
            model: 'App.model.User',
            primaryKey: 'uid',
            foreignKey: 'uid'
        }],

        proxy: {
            type: 'jsonp',
            url: 'messages.json',

            reader: {
                type: 'json',
                rootProperty: 'req_messages'
            }
        }
    }
}); 
```

商店/Messages.js

```
Ext.define('App.store.Messages', {
    extend: 'Ext.data.Store',

    config: {
        model: 'App.model.Message',
        autoLoad: true,
    }
}); 
```

我的应用程序正确加载并显示了这些消息（下面的示例 JSON 响应），但我无法弄清楚如何将关联的用户加载到商店中。这可以通过配置解决，还是我需要自定义阅读器？任何帮助表示赞赏！

示例 JSON

```
{
    "users": [{
        "uid": "1",
        "name": "John"
    }, {
        "uid": "3033",
        "name": "Noah"
    }],
    "req_messages": [{
        "id": "539",
        "uid": "1",
        "message": "my message"
    }, {
        "id": "538",
        "uid": "1",
        "message": "whoops"
    }, {
        "id": "534",
        "uid": "3033",
        "message": "I love pandas."
    }]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T23:10:17.140

我从来没有真正与关联合作过，我通过文档试图找到可以根据请求加载两个商店的东西，但我找不到任何东西。所以我会这样做：

**模型**

```
Ext.define('App.model.User', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            'uid',
            'name'
        ]
    }
});

Ext.define('App.model.Message', {
    extend: 'Ext.data.Model',

    config: {
        fields: [
            'id',
            'message',
            'uid'
        ],
        associations: { type: 'hasOne', model: 'User', primaryKey: 'uid', foreignKey: 'uid'}
    }
}); 
```

**专卖店**

```
Ext.define('App.store.Users', { 
    extend: 'Ext.data.Store',                                                    

    config: {                                                                    
        model: 'App.model.User',
        autoLoad: true,

        proxy: {
            type: 'ajax',
            url: 'http://www.titouanvanbelle.fr/test.json',

            reader: {
                type: 'json',
                rootProperty: 'users'
            }
        },

        listeners:{
          load:function(s,r,success,op){
            var msgs = JSON.parse(op.getResponse().responseText).req_messages;
            Ext.each(msgs, function(msg) {
                Ext.getStore('Messages').add(Ext.create('App.model.Message',msg));
            });
          }
        }
    }
});

Ext.define('App.store.Messages', {
    extend: 'Ext.data.Store',

    config: {
        model: 'App.model.Message'
    }
}); 
```

**列表**

```
Ext.define("App.view.Main", {
  extend: 'Ext.Panel',

  config: {
    fullscreen: true,
    layout:'fit',
    items: [{
      xtype:'list',
      store:'Messages',
      itemTpl: new Ext.XTemplate(
          '<tpl for=".">',
            '{[this.getUserName(values)]} : {message}',
          '</tpl>',
          {
            getUserName(v){
              var s = Ext.getStore('Users'),
                  u = s.getAt(s.find('uid',v.uid));
              return u.get('name');
            }
          }
      )
    }]
  }
}); 
```

你会得到这样的东西：

![在此处输入图像描述](../Images/9081bb92829d4c3e7ec5bc3f789ce516.png)

希望这可以帮助。如果您需要解释，请告诉我。

# .net - WinForms 中表单的可访问性：TitleBar vs Application vs Default

> ID：11495986
> 
> 赞同：1
> 
> 时间：2012-07-15T22:00:08.493
> 
> 标签：.net, winforms, accessibility, screen-readers, jaws-screen-reader

我需要可以访问我的 WinForms 应用程序。我没有更改`AccessibleRole`任何控件的默认属性，因此它们被设置为`Default`. JAWS 可以完美地识别控件，但不能识别表单本身。例如，JAWS 宣布按钮的文本/列表框的选定项等，但 JAWS 不会从表单的标题栏中读取标题。

所以`Default`是没有办法的。我只是想知道为什么不单独阅读表格。

所以我尝试将`AccessibleRole`表单的属性设置为其他各种属性，唯一有帮助的两个选择是`TitleBar`和`Application`。我没有发现它们之间有任何区别，因为 JAWS 读取标题栏的方式相同。`AccessibleRole`理想情况下，我应该为表格选择哪个？`TitleBar`和 和有什么区别`Application`？

我正在使用 .NET 4.0 并使用 JAWS 10 到 13 进行了测试，没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:40:45.363

JAWS 有几种*模式*，其中一种称为表单模式。基本上 JAWS 会忽略除表单元素之外的所有内容。

> 但 JAWS 不会从表单的标题栏中读取标题。

尝试按`insert`+ `T`。

> 我应该为表单理想地选择哪个 AccessibleRole？

对于这个问题，您应该使用`TitleBar`.

> TitleBar 和 Application 有什么区别？

`TitleBar`作用是标识当前窗口的标题栏。作用是标识整个`Application`应用程序或应用程序的主窗口。我不是 .net 开发人员，所以我不能告诉你是否`TitleBar`是 .net 的孩子`Application`。

# sql - 更新一列是最大值的表列

> ID：11495988
> 
> 赞同：2
> 
> 时间：2012-07-15T22:00:33.470
> 
> 标签：sql, duplicates

我正在尝试更新表中一系列约 113000 行中的一列。我有一张表，其中有一个 MRN、遇到和承认有问题的列。我遇到了一个问题，一次遭遇多次进入此表，但使用不同的 MRNS。我想用值“重复遭遇”更新一个名为“消息”的列，但前提是该遭遇不是最新的承认日期。

例如

```
Encounter               MRN                     Admitted
000000000497            0000097778              2006-01-04 20:26:00
000000000497            0000092892              2006-03-17 09:51:00
000000000497            0000003023              2008-08-15 09:50:00
000000000719            0000103691              2008-10-16 14:45:00
000000000719            0000048708              2006-05-26 08:04:00
000000000719            0000024123              2006-01-09 15:43:00
000000003390            0000099595              2006-03-13 11:30:00
000000003390            0000079713              2010-04-22 14:40:00 
```

对于上述信息，我想更新第 1 行和第 2 行的消息列，因为第 3 行是遇到 000000000497 的最新承认。第 5 行和第 6 行是 000000000719，因为第 4 行是其最新的承认日期。

我试过在这里搜索，但什么都想不出来。我只是不知道我是否需要为此或什么创建一个游标。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:17:46.090

你可以做：

```
UPDATE a
SET a.Message = 'Duplicate Encounter'
FROM tbl a
INNER JOIN
(
    SELECT encounter, MAX(admitted) AS maxadmitted
    FROM tbl
    GROUP BY encounter
    HAVING MAX(MRN) <> MIN(MRN)
) b ON a.encounter = b.encounter AND a.admitted <> b.maxadmitted 
```

子选择仅获取与多个不同的 MRN 相关联的遭遇，并且它还获取每个遭遇的最大允许日期。

然后，我们只更新与从子选择返回的遭遇匹配的行，但不更新具有最近允许日期的行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T22:14:07.403

您可以使用子选择来查找`Admitted`每个的最新`Encouter`：

```
UPDATE T1
SET Message = 'Duplicate'
FROM his..hpf_enc AS T1
WHERE Admitted <>
(
    SELECT MAX(Admitted)
    FROM his..hpf_enc AS T2
    WHERE T1.Encounter = T2.Encounter
) 
```

您还可以使用连接：

```
UPDATE T1
SET Message = 'Duplicate'
FROM his..hpf_enc T1
JOIN
(
    SELECT Encounter, MAX(Admitted) AS Admitted
    FROM his..hpf_enc
    GROUP BY Encounter
) AS T2
ON T1.Encounter = T2.Encounter
WHERE T1.Admitted <> T2.Admitted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:31:32.153

您也可以使用该`RANK()`功能。

```
UPDATE a
SET a.Message =  'duplicate encounter'
FROM MyTable a
    INNER JOIN (
        SELECT Encounter
            ,MRN
            ,RANK() OVER(PARTITION BY Encounter ORDER BY Admitted DESC) AS RankVal
        FROM MyTable) b
    ON a.Encounter = b.Encounter
    AND a.MRN = b.MRN
    AND b.RankVal <> 1 
```

# java - 让自定义列表适配器正确膨胀多个线性布局

> ID：11495990
> 
> 赞同：4
> 
> 时间：2012-07-15T22:00:52.370
> 
> 标签：java, android, listadapter, custom-adapter

我对 android 有点陌生，正在尝试找出这些自定义列表适配器。所以我有一个扩展 BaseListActivity 的活动和一个类似的函数：

```
public void inflate(){

    ArrayList<String> words = new ArrayList<String>();
    orders.add("hello");
    orders.add("world");

    wordsList = (ListView) findViewById(R.id.list);

    WordsAdapter adapter = new WordsAdapter(this, R.layout.single_word_container_item,words);
    wordsList.setAdapter(adapter); 
```

然后我实现我的自定义 WordsAdapter 如下：

```
public class WordsAdapter extends ArrayAdapter<String>{
    public Context context;
    public ArrayList<String> _words;

    //not sure the purpose of 'a' here
    public WordsAdapter(Context context, int a, ArrayList<String> words) {
        super(context, a, words);
        _words = words;
        this.context = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(R.layout.single_word_container_item, null);
        TextView wordName = (TextView) findViewById(R.id.wordName);
        if(!_words.isEmpty()){
            wordName.setText(_word.remove(0));
        }

        return v;
    }

} 
```

从日志中我可以看出，永远不会调用 getView。'single_word_container_item' 只是一个 xml 文件，其布局我想多次膨胀。我不确定整个过程 - 我认为您在列表视图上设置了一个适配器，然后在该适配器中您负责显示每次实际显示的内容，那么我在这里做错了什么？目前，我在设置适配器时遇到了一个空指针异常，但之前它不会显示任何内容。日志显示它正在进入 WordsAdapter 构造函数，但随后死亡。提前感谢您的任何建议。

编辑：所以在我的 xml 中识别列表视图似乎有问题。

如果您使用：

```
ListView
android:id="@+id/android:list" OR android:id="@id/android:list"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
ListView 
```

使用时错误是空指针异常

但如果您将其定义为：

```
ListView
android:id="@+id/list"
android:layout_width="match_parent"
android:layout_height="wrap_content" 
ListView 
```

您收到错误消息：07-15 19:18:50.240: E/AndroidRuntime(29842): Caused by: java.lang.RuntimeException: Your content must have a ListView its id attribute is 'android.R.id.list'

编辑：所以显然你不能扩展 listactivity 并调用 setcontentview()。由于我需要在列表视图之上的视图，我不想扩展列表活动，而是调用 setcontentview 并仅通过其 ID 引用列表。

现在我的错误是：

java.lang.IllegalStateException：适配器的内容已更改，但 ListView 没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。

我尝试在 setAdapter() 之后调用 adapter.notifyDataSetChanged() ，但这似乎不起作用。我应该在其他地方调用它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T22:14:53.517

您的 getView() 方法中有错误：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v;
    if (convertView == null) {
       v = inflater.inflate(R.layout.single_word_container_item, null); 
    } else {
       v = convertView;
    }
    TextView wordName = (TextView) v.findViewById(R.id.wordName);

    // questionable logic
    if(!_words.isEmpty()){
        wordName.setText(_word.remove(0));
    }

    return v;
} 
```

必须在行的视图上调用 findViewById()。

再看看上面有问题的逻辑，你到底想干什么？如果您直接从适配器中删除列表视图对象，这将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-16T12:02:07.033

只需使用充气 `val dialog = BottomSheetDialog(context,R.style.BottomSheetTheme)` `val view = inflate(context,R.layout.otpsent1layout,null)` `dialog.setContentView(view)` `dialog.show()`

# iphone - 使用 UIWebView 作为快速更新我们的业务应用程序的一种方式

> ID：11495991
> 
> 赞同：0
> 
> 时间：2012-07-15T22:01:01.270
> 
> 标签：iphone

我们正在考虑为 iPhone 构建一个 b2b 应用程序。一个主要问题是发布应用程序更新可能会延迟。我愿意相信所有更新都会有条不紊地进行，但是对于客户或即将举行的贸易展新发现的错误可能意味着现在更新应用程序至关重要。即使是“加急”一天的等待也是不可接受的。

我想到的一个选项是在用户登录我们的服务器时为我们发送的每个页面设置一个标志。如果设置了标志，那么将有一个带有 UIWebView 的页面代替给定页面的本机屏幕，该页面将从 Web 获取最新的 HTML 或在登录时加载的存储的 HTML。

我更喜欢存储 HTML 并“离线”使用它，因为无法保证数据连接。

问题是：

1) 这是否违反了 Apple 的任何许可？

2）这是可行的还是我没有想到的漏洞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:27:31.867

它没有违反 Apple 的指导方针，据我所知，您在这里没有遗漏任何东西……事实上，我们公司也有完全相同的问题（除了您遇到的问题之外，我们还有客户想要为他们的用户“品牌”应用程序，这就是我们实现这一目标的方式）并且苹果没有问题（现在......:)）。显然，您需要考虑对用户体验的影响……希望对您有所帮助。

# ruby-on-rails-3 - Rails 3：基于项目的权限

> ID：11495992
> 
> 赞同：0
> 
> 时间：2012-07-15T22:01:04.580
> 
> 标签：ruby-on-rails-3, cancan

我正在构建一个内部项目管理软件（ala Basecamp），供我们内部和外部使用。不过，我正在努力寻找执行高级权限的最佳策略。

像 Basecamp 一样，会有很多客户，他们下有很多项目。我希望能够为每个用户分配不同的查看权限给每个客户和项目，这将决定谁可以看到什么。基本上，管理员应该能够说“这个用户可以看到这 4 个项目”，然后当该用户登录时，他们会看到这 4 个项目。

我正在使用 Cancan 获得整体权限，但这似乎无法以我需要的方式分配。我看过 role_model、cantango 等。但找不到一个完全符合我想要做的用例，即使它看起来很标准。

这里有什么见解吗？

谢谢！

编辑：

我显然已经想到只做一个权限表（这里描述：[如何为每个项目关联创建一个基本的用户权限？](https://stackoverflow.com/questions/1029648/how-to-create-a-basic-user-permissions-per-project-association)）。我挣扎a）这是最好的方法吗？更重要的是 b）在应用程序中检查权限并仅显示允许的数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:21:14.357

如何创建额外的模型权限，它将为每个项目的用户保留权限？当然你也可以使用 can_can，但是这种方法很容易分析并且解决方案会专门针对问题。

IE。

```
class Permission < ActiveRecord::Base
  TYPES = {
    :user=>1,
    :manager=>10,
    :admin=>100
  }
  belongs_to :user
  belongs_to :project
  validates :permission_type,
            :inclusion=>{:in=>Permission::TYPES.values},
            :presence=>true
end

class User < ActiveRecord::Base
  has_many :permissions
  has_many :projects, :through=>:permissions
  ...
end

class Project < ActiveRecord::Base
  has_many :permissions
  has_many :users, :through=>:permissions
end 
```

# c++ - eclipse android ndk项目中没有编译c ++文件

> ID：11495993
> 
> 赞同：4
> 
> 时间：2012-07-15T22:01:06.473
> 
> 标签：c++, eclipse, android-ndk

我在 Eclipse 中有一个简单的 ndk 测试项目。我已经安装了所有 ndk、jdk、android sdk、cygwin 和 eclipse cdt。

现在我的 android.mk 文件指向它编译的 main.cpp：

```
#include "test.h"

int main (int argc, char **argv) {
    test* x = new test();
    x->myTest();
} 
```

但抱怨说：

```
C:\Development\Android\Test/jni/main.cpp:18: undefined reference to `test::test()'
C:\Development\Android\Test/jni/main.cpp:19: undefined reference to `test::myTest()' 
```

即使我有一个 test.cpp 的实现，如下所示：

```
#include "test.h"

test::test() {
    // TODO Auto-generated constructor stub
}

test::~test() {
    // TODO Auto-generated destructor stub
}

int test::myTest() {
    #error "this comes from test"
    return 5;
} 
```

并且test.h文件声明了这样的函数（找到了声明，只是c ++文件从未编译过）：

```
#ifndef TEST_H_
#define TEST_H_

class test {
public:
    test();
    virtual ~test();
    int myTest();
};

#endif 
```

这是我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := mylib
LOCAL_SRC_FILES := main.cpp

include $(BUILD_SHARED_LIBRARY) 
```

除非我在我的 Android.mk 的本地源文件中指定类 test.cpp，否则编译器永远不会看到 test.cpp 中的 #error：

```
LOCAL_SRC_FILES := main.cpp test.cpp 
```

我有一个包含数千个类的大项目，我需要将它们移植到 Android，但我无法在其中指定每个文件。为了使编译器正常工作，我可能缺少什么？如何告诉编译器自动使用我的 jni 文件夹中的所有类？它可能只是 Android.mk 或设置中的某个地方的一个衬里？

# email - Azure 从 1.3 升级到 1.7 问题

> ID：11495994
> 
> 赞同：0
> 
> 时间：2012-07-15T22:01:28.260
> 
> 标签：email, azure, web-config

我最近升级了我们的 Azure 解决方案以使用新的 1.7 SDK。CSPack 警告说它在旧语法上运行，并且需要在服务定义中定义才能在完整的 IIS 下运行。这是我添加的内容。

```
 <Sites>
  <Site name="Web" physicalDirectory="..\Portal\MyApp.Portal">
    <Bindings>
      <Binding name="HttpIn" endpointName="HttpIn" />
    </Bindings>
  </Site>
</Sites> 
```

Web 角色是一个 MVC3 应用程序，在 web.config 中定义了以下邮件设置。

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="Network">
    <network host="smtp.gmail.com" userName="support@myapp.com" enableSsl="true" port="587" password="mypassword"/>
  </smtp>
</mailSettings> 
```

这些设置是从 web.config 中提取的，只需声明一个 SMTP 客户端并使用它来发送电子邮件，就可以从代码中发送电子邮件，

```
SmtpClient client = new SmtpClient(); 
```

但是，当我将该部分添加到服务定义中时，未使用该设置，并且每次尝试发送电子邮件时都没有指定 SMTP 主机。新的 SmtpClient() 没有配置中的任何设置。我不知道如何解决这个问题，也无法在其他地方找到任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:15:55.073

尝试将您的站点名称更改为“Web”以外的任何名称。

这种语法有一个记录不充分的特性，一个名为“Web”的站点将忽略它的所有设置，如物理目录。如果这可行，那么考虑一下您是否真的需要指定的物理目录可能是值得的。

# c - C/C++ 到 MATLAB 编译器/转换器

> ID：11495996
> 
> 赞同：1
> 
> 时间：2012-07-15T22:01:43.783
> 
> 标签：c, matlab, compiler-construction

由于有 C 的 MATLAB 编译器，我想知道是否有转换器的编译器可以将一些数学 C/C++ 代码转换为 MATLAB？

我知道 C/C++ 中的许多功能和函数在 MATLAB 中不可用，但至少对于纯数学代码，是否有任何转换工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:05:51.500

查看 Mex 文件： http:
[//www.mathworks.com/help/techdoc/ref/mex.html](http://www.mathworks.com/help/techdoc/ref/mex.html)

有了它，您可以编写 C 或 C++ 并在 Matlab 中调用它，从而允许在 Matlab 中使用提供/已经用 C 或 C++ 编写的设施或代码。