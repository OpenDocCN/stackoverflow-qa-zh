# StackOverflow 问答 10679000-10679999

# javascript - 为什么我的 jQuery 图像大小调整代码只能间歇性地工作？

> ID：10679000
> 
> 赞同：0
> 
> 时间：2012-05-21T02:48:24.933
> 
> 标签：javascript, jquery, css, jcarousellite

第一篇文章。我已经在高处和低处搜索过类似的问题，但空手而归，所以就这样吧。

我目前正在使用少量 jQuery 来按比例缩放图像集合以显示在图像轮播中（感谢 SO 用户提供的大部分代码）。轮播由 jCarousel Lite 插件（[此处](http://www.gmarwaha.com/jquery/jcarousellite/)）提供支持。我有 4 个不同的图像集，它们是使用导航菜单选择的。选择新的图像集时，以下jQuery调整代码的大小在集合中的每个图像上执行，然后使用#slider div内的新大小的图像初始化图像转盘。

**问题**：此代码仅在某些时候有效，似乎是随机的。当滑块初始化时，如果图像没有成功缩放，所有宽度都增加到最大宽度，从而裁剪图像的底部。这个问题对于纵向图像尤其明显，因为滑块是为横向图像（900px x 600px）设计的。无论订单或点击、窗口大小或浏览器如何，我都无法确定导致代码成功与否的原因。

任何想法为什么此代码会随机成功执行？

```
//The following scales images proportionally to fit within the #slider div
$('#slider ul li img').each(function() {
    var maxWidth = $('#slider').outerWidth(false); // Max width for the image
    var maxHeight = $('#slider').outerHeight(false);    // Max height for the image
    var ratio = 0;  // Used for aspect ratio
    var width = $(this).width();    // Current image width
    var height = $(this).height();  // Current image height

// Check if the current width is larger than the max
if(width > maxWidth){
    ratio = maxWidth / width;   // Ratio for scaling image
    $(this).css("width", maxWidth); // Set new width
    $(this).css("height", height * ratio);  // Scale height based on ratio
    height = height * ratio;    // Reset height to match scaled image
}

var width = $(this).width();    // Current image width
var height = $(this).height();  // Current image height

// Check if current height is larger than max
if(height > maxHeight){
    ratio = maxHeight / height; // Ratio for scaling image
    $(this).css("height", maxHeight);   // Set new height
    $(this).css("width", width * ratio);    // Scale width based on ratio
    width = width * ratio;    // Reset width to match scaled image
}
});
initialize(); //initializes the jCarousel Lite carousel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:26:52.760

您是否尝试过在窗口加载时运行它`jQuery(window).load(function() {`

这将有助于确保所有图像在检查尺寸之前都可用

# assembly - 在引导加载程序中启动之前的 cli

> ID：10679001
> 
> 赞同：3
> 
> 时间：2012-05-21T02:48:35.713
> 
> 标签：assembly, x86, bootloader

我在网上冲浪时发现了 512 字节的操作系统竞赛。

一切都安装在引导扇区中。

在阅读了其中一些源文件后，

`cli`我发现在开始例行程序之前总是有说明。（组装中）

```
use16
org 7c00h
jmp 0:start
start:
  cli
  do something here..(this section sometimes include int 10h) 
```

我想知道的是

1.  为什么`cli`在开始例行程序之前是必要的。

2.  之后`cli`，有时，他们使用中断！就像`int 10h`我想知道为什么他们`cli`会在正常之后使用中断？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T03:01:05.380

1）唯一*需要*`cli`在引导扇区初始化之前（或之内）的情况是引导扇区可能在 8086 上运行。对于以后的 CPU 加载会导致中断被禁用（推迟）直到下一条指令之后，这足够长加载并获得一个有效的供潜在的 IRQ 处理程序使用。*`ss``sp``ss:sp`*

 *2) 软件中断（例如`int 0x10`）不是 IRQ，也不会被`cli`. 为了避免弄乱 IRQ，在 a`sti`之后不久执行 a 是正常的。`cli`当您尝试将某些内容压缩为 512 字节时，通常会做一些没有理智的程序员会考虑允许的愚蠢事情（例如禁用中断），只是为了压缩一个额外的代码字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T03:02:28.517

`cli`仅当我们现在不希望处理硬件中断时才需要。

如果没有看到实际代码，很难说出为什么在您所指的代码中使用它，但通常可能有多种原因：

*   避免中断服务程序的竞争条件（访问共享可变数据时）
*   以原子方式更改中断向量表（与上述非常相似）
*   原子地改变`SS:SP`（与上面非常相似）
*   避免在切换 CPU 模式时由 ISR 引起的异常（真实<->受保护）
*   更精确地测量时间，避免 ISR 贡献
*   ETC

基本上，只要硬件 ISR 可能以某些不希望的方式干扰主代码，您就禁用中断。

哦，与`int 10h`来自硬件的中断请求无关。只是一些 ISR 用于处理硬件中断（例如来自键盘或网络），而另一些则用作各种辅助例程或具有方便接口的系统调用（您不需要知道 ISR 的确切位置，向量数字（10h）就足够了）。BIOS`int 10h`功能可让您更改显示模式并在屏幕上写入文本。*

# spring - 如何在 Spring-data-jpa 中集成全文搜索？

> ID：10679006
> 
> 赞同：5
> 
> 时间：2012-05-21T02:48:52.963
> 
> 标签：spring, full-text-search, hibernate-search, spring-data-jpa

有没有办法将全文搜索与 spring data jpa 集成？我习惯在我的项目中使用[休眠搜索。](http://www.hibernate.org/subprojects/search.html)

**Hibernate 搜索**（*Hibernate Search 通过将 Hibernate Core 与 Apache Lucene™ 搜索引擎的功能相结合，将全文搜索引擎的强大功能带入了持久域模型。*）可以与传统的 jpa 一起正常工作。

现在我要转到spring data jpa。实现全文搜索的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:30:21.723

使用 Spring Data JPA 对使用域模型进行索引没有任何影响。它是 JPA 之上的一个薄层，可以在很大程度上简化查询执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:04:14.813

[这里](http://code.google.com/p/sol-dock-r/)的这个项目是基于 solrj 和 spring 构建的，但还没有 spring-data 集成。因此，您仍然需要自己处理索引。但尽管如此，你可能想看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T05:33:19.410

您可能需要考虑 solr，如此[处所述](http://adeithzya.wordpress.com/2011/08/25/using-apache-solr-with-spring-framework/)

# java - 如何在java编程中编写更新sql的命令

> ID：10679020
> 
> 赞同：1
> 
> 时间：2012-05-21T02:51:38.740
> 
> 标签：java, sql, oracle

我面临在 java 编程中编写更新 sql/oracle 命令的问题。我的数据库是甲骨文。我曾尝试过这种方法，但它不起作用。没有更新发生。有人请帮我吗？

```
conn = ds.getConnection();

String updateQ = "update ANI_999 set First_Name='d.getName()',HouseNo='d.getAddr1()',StreetName='d.getAddr2()',AppartmentSuite='d.getAddr3()',Town_City='d.getTownCity()',State='d.getState()',Postal_Code='d.getPostalCd()',Country='d.getCountry()' where CALLER_ID = 'msisdn'";

stmt = conn.prepareStatement(updateQ);
int result = stmt.executeUpdate(updateQ);

conn.commit();
conn.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:08:04.503

```
update ANI_999 set First_Name='d.getName()',HouseNo='d.getAddr1()',StreetName='d.getAddr2()',AppartmentSuite='d.getAddr3()',Town_City='d.getTownCity()',State='d.getState()',Postal_Code='d.getPostalCd()',Country='d.getCountry()' where CALLER_ID = 'msisdn' 
```

`First_Name='d.getName()'`将按原样执行，不会用您的方法中的值替换`d.getName()`，对于所有其他字段也是如此。

而是试试这个：

```
String query = "update ANI_999 set first_name = ? where caller_id = 'msisdn'";

PreparedStatement pstmt = conn.prepareStatement(query);
pstmt.setString(1, d.getName());

int result = pstmt.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:16:41.743

只是为了完成 mprabhat 答案，你应该使用类似的东西

```
String query = "update ANI_999 set first_name = ? where caller_id = ?"; 

PreparedStatement pstmt = conn.prepareStatement(query); 
pstmt.setString(1, d.getName()); 
pstmt.setString(2, msisdn); 

int result = pstmt.executeUpdate(); 
conn.commit() // in case no autocommit is set. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:03:35.103

尝试这个，

```
conn.setAutoCommit(true); 
```

和，

```
Statement st = conn.createStatement(); 
```

和查询最终，

```
String updateQ = "update ANI_999 set First_Name='d.getName()',HouseNo='d.getAddr1()',StreetName='d.getAddr2()',AppartmentSuite='d.getAddr3()',Town_City='d.getTownCity()',State='d.getState()',Postal_Code='d.getPostalCd()',Country='d.getCountry()' where CALLER_ID = 'msisdn'";

if(st.execute(updateQ)) {
    System.out.println("UPDATE! SUCCESS");
} 
```

我希望能帮助你。

# android - 确保在方向更改后保留视频缓冲区，而无需手动处理 onConfiguration 更改

> ID：10679021
> 
> 赞同：8
> 
> 时间：2012-05-21T02:51:50.590
> 
> 标签：android, screen-orientation

无论如何，您可以使应用程序在定向后保留缓冲区，而无需手动处理配置更改。

场景基本上：

1.  当方向改变时，应保留直到最新点的视频缓冲区。

2.  需要重新加载一个新的布局（因为portait和lanscape有不同的布局），因此让app重新启动activity来重新加载新资源是我认为最好的方式。

3.  视频组件位于片段中。

我尝试过但不可接受的替代方案：

1.  第一个解决方法是保存视频的位置，在创建视图后，使用 seekTo 转到最后一点。但是，这将导致设备再次重新缓冲。

2.  我尝试过使用片段 setRetainInstance(true) 并确保媒体播放器在方向更改后不会重新初始化。在每个 onCreateView 之后，我只是将 mediaplayer.setDisplay() 设置为一个新的surfaceholder。不幸的是，这会导致媒体播放器进入错误状态，进而需要重置媒体播放器。

对此有任何建议/解决方法吗？

编辑：我在stackoverflow的某个地方看到你可以在媒体播放器在android 4.0+中处于活动状态时更改媒体播放器表面支架。但是，我正在为 android 3.x 开发一个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T14:43:39.163

也许对你来说已经晚了，但可能还有其他人面临同样的问题。您可以使用第二个选项。如果在销毁片段视图之前没有将 MediaPlayer 的显示设置为 null，当您再次访问 mediaplayer 时，它会进入错误状态。我的解决方案是实现surfaceholder的surfaceCreated和surfaceDestroyed事件。

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
    mediaPlayer.setDisplay(holder);
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    mediaPlayer.setDisplay(null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:29:33.260

我认为您可以覆盖 onConfigurationChanged() 并以编程方式重新布局。

您可以在不触摸视频的情况下修改布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-17T00:11:27.020

我不认为在不使用 android:configChanges 标志的情况下在 android 中旋转时保留缓冲区是不可能的。这些是可用的选项：

1.  允许旋转和活动娱乐，但保存视频位置。这将松开缓冲区，但允许您从最后一个位置继续。这不适用于实时流，仅适用于本地文件或远程 VOD。您必须保存您的位置`onSaveInstanceState`并将其恢复`onCreate`为活动/片段。或者保留使用的值，`setRetainInstance(true)`但不推荐使用最后一个选项。

2.  使用`android:configChanges="orientation|screenSize"`标志并管理自己的 UI 大小更改。看看这个 POC 作为参考：[https ://github.com/caspercba/POCMediaPlayerRotation](https://github.com/caspercba/POCMediaPlayerRotation)

3.  选择像 NexStreaming 这样的第三方播放器。

干杯

# sql - Microsoft SQL Server Management Studio，是否可以看到设计视图背后的代码？

> ID：10679032
> 
> 赞同：2
> 
> 时间：2012-05-21T02:54:00.593
> 
> 标签：sql, sql-server, sql-server-2008, ssms

我尝试谷歌搜索，但没有找到答案，

我正在使用 Microsoft SQL Server 2008 Server 管理服务器，想知道您是否可以使用设计视图来创建表，然后查看它背后的获取代码/（查询？）？

![在此处输入图像描述](../Images/a3b03ddb3043a7f7db0dd68a511f62bb.png)

例如从 ^ 到：

```
CREATE TABLE Member (
MemberNo VARCHAR(8) NOT NULL PRIMARY KEY,
MemberTypeNo INT NOT NULL FOREIGN KEY (MemberTypeNo) REFERENCES MemberTypeNo (MemberType),        
FirstName VARCHAR(15) NOT NULL, 
LastName VARCHAR(15),
DateOfBirth DATE,
) 
```

**-------------------------------------------------- -------------------------------------------------- --------------------------------**

**更新：@Jeff Hornby 描述的解决方案**

![在此处输入图像描述](../Images/eb3912c0dd80104c37824a56f73bfb6b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T16:39:14.763

通过启用“自动更改脚本”选项，您可以在保存更新后让 SSMS 生成脚本。当然，缺点是脚本仅在您保存更改时生成。

*   从 SSMS 菜单中单击“工具”
*   点击“选项...”
*   点击“设计师”
*   选中“自动生成更改脚本”复选框，如下所示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T03:14:40.703

您可以在创建表时使用 SQL Profiler 获取脚本。或者，您可以在创建表后获取 Create 脚本，但是当您尝试创建表时，无法实际显示 SQL，因为有视图（这是我假设您正在寻找的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:16:54.877

您可以右键单击设计器区域中的某个位置，然后从上下文菜单中选择“生成更改脚本”。或者在表设计器菜单中找到相同的选项。这将显示创建设计表（或修改它，如果您正在编辑现有表）所需的 SQL 语句。

# windows - 无法在 Windows 批处理下的“git.exe fetch origin”中使用管道

> ID：10679033
> 
> 赞同：1
> 
> 时间：2012-05-21T02:54:30.030
> 
> 标签：windows, git, batch-file, pipe

我写了一个批处理来从github检查和部署rails应用程序，批处理文件见下文。问题`git.exe fetch origin | find "remote: Counting Objects"`总是返回`errorlevel 1`，即使我们有新的提交。我必须先终止 Rails 应用程序，因为某些文件被锁定 ( `*.jars`) 并导致`git pull`命令失败。

我搜索并找到了以下主题，但即使使用`git.exe`而不是`git.cmd`，问题仍然存在。

*   [检查 Git 中是否需要拉取](https://stackoverflow.com/questions/3258243/git-check-if-pull-needed)
*   [git bash：如何检查是否有新的提交可用](https://stackoverflow.com/questions/6006759/git-bash-how-to-check-if-theres-a-new-commit-available)

我尝试使用临时文件来存储`git.exe fetch origin`结果，但如果看起来这个命令总是将结果打印到控制台。

还：

```
git pull | find "Already up-to-date."
if %errorlevel% == 1 ( 
```

工作正常

```
    REM @echo 关闭
    设置路径=%path%;C:\Program Files\Git\bin;D:\jruby-1.6.7\bin
    设置 JRUBY_OPTS=--1.9
    git.exe 获取来源 | 找到“远程：计数对象”
    如果 %errorlevel% == 0 taskkill /f /im:jruby.exe
    混帐拉| 找到“已经是最新的”。
    如果 %errorlevel% == 1 (
    快速眼动
      启动黄瓜.bat
      REM 在更新时做其他事情
    )

    快速轨道
    任务清单 | 找到“jruby.exe”
    如果 %errorlevel%==1 (
     回声@rails s > rail.bat
     回声@exit >> rail.bat
     启动 cmd /c rail.bat
    )
    出口

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:50:07.517

我猜我会说它很糟糕，因为“计数对象”行显示了一个动态进度指示器，但不要引用我的话。

```
...
git fetch origin
git branch -a --no-merged |find "remotes/origin"
if %errorlevel% == 0 taskkill /f /im:jruby.exe
... 
```

您可能还希望将其限制为仅当前分支：

```
git branch -a --no-merged |find "remotes/origin/mybranch" 
```

# java - 找不到符号“OnKeyListener”

> ID：10679035
> 
> 赞同：3
> 
> 时间：2012-05-21T02:54:52.727
> 
> 标签：java, android, compiler-errors

我错过了什么？我觉得不得不发布这个真的很愚蠢，但也许其他人会看到我正在犯的（可能是明显的）错误。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.*;
import android.widget.*;

public class Primes extends Activity implements OnKeyListener
{
...
} 
```

错误：

```
[javac] ...Primes.java:9: cannot find symbol
[javac] symbol: class OnKeyListener
[javac] public class Primes extends Activity implements OnKeyListener 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T02:56:04.977

那是一个[嵌套接口](http://developer.android.com/reference/android/view/View.OnKeyListener.html)。

```
public class Primes extends Activity implements View.OnKeyListener 
```

# c++ - 如何控制 MediaFoundation 中的摄像头捕捉显示？

> ID：10679040
> 
> 赞同：3
> 
> 时间：2012-05-21T02:55:55.507
> 
> 标签：c++, windows-7, ms-media-foundation

我想知道我可以使用哪个 MediaFoundation API 来控制亮度、对比度、色调和饱和度等？我发现 IMFVideoProcessor::SetProcAmpValues 可以修改这些属性，但是这些属性是在显卡中修改的；我想通过捕获设备或 AVStream 中的 MediaFoundation 接口来修改这些。谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:39:12.517

这与 DirectShow 中的相同：为您的视频捕获设备获取 IMFMediaSource，然后查询 IAMVideoProcAmp 接口：

```
 IMFMediaSource * pSource = NULL;
 ...
 IAMVideoProcAmp *pProcAmp = NULL;
 hr = pSource->QueryInterface(IID_PPV_ARGS(&pProcAmp));
 if (SUCCEEDED(hr))
 {
    long lMin, lMax, lStep, lDefault, lCaps;
    hr = pProcAmp->GetRange(
                      VideoProcAmp_Brightness, 
                      &lMin, 
                      &lMax, 
                      &lStep, 
                      &lDefault, 
                      &lCaps
    );

    if (SUCCEEDED(hr))
    {
       hr = pProcAmp->Set(
                       VideoProcAmp_Brightness, 
                       lMax, 
                       VideoProcAmp_Flags_Manual
       );
    }
 } 
```

# php - PHP 和 FOR 循环

> ID：10679043
> 
> 赞同：0
> 
> 时间：2012-05-21T02:56:20.530
> 
> 标签：php, html, for-loop

我正在尝试使用 for 循环创建一个动态返回如下内容的表：注意 td 内容的排列方式

```
<table>
 <tr>
  <td>1</td>
  <td>3</td>
  <td>5</td>
  <td>7</td>
  <td>9</td>
 </tr>
 <tr>
  <td>2</td>
  <td>4</td>
  <td>6</td>
  <td>8</td>
  <td>10</td>
 </tr>
</table> 
```

到目前为止我尝试过的是

```
$row=2;
$col=20;
$x=0;
echo '<table>';
for($i=0;$i<$row;$i++){
   echo '<tr>';
     for($k=0;$k<$col;$k++)
     {
        echo '<td>'.echo $x+=1.'</td>';
     }
   echo '</tr>';

} 
```

在这种情况下，我得到了一些不同的东西，这不是我想要的。

```
<table>
    <tr>
     <td>1</td>
     <td>2</td>
     <td>3</td>
     <td>4</td>
     <td>5</td>
    </tr>
    <tr>
     <td>6</td>
     <td>7</td>
     <td>8</td>
     <td>9</td>
     <td>10</td>
    </tr>
  </table> 
```

请有人帮我映射这个。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:04:16.487

```
<?php 
  # how high to count
  $count = 10;

  # how many rows in the table
  $rows = 2;

  # figure out how many columns
  $columns = ceil($count/$rows);

  # could also go the other way and declare there to be 5 columns and then 
  # divide to get the rows, but since you're counting down the columns, 
  # I thought this made more sense.  Either way.

?><table><?php 

  for ($i=0; $i<$rows; ++$i) {

 ?><tr><?php

    for ($j=0; $j<$columns; ++$j) {

      # calculate which number to show in column $j of row $i.  Each column adds
      # $rows numbers to the total, while each row just adds one more.  And we
      # want to start at 1 instead of 0.
      $n = $j * $rows + $i + 1;

      ?><td><?= $n ?></td><?php 
    }

  ?></tr><?php

  }
?></table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:04:25.667

```
$total_count = 10;
$total_rows = 2;

$table = array();
//building table array
for($i=1;$i<=$total_count;$i++) {
    $row = $i % $total_rows;
    $row = $row == 0 ? $total_rows : $row;
    $table[$row][] = $i;
}

//generate table based on array
echo "<table>";
for($row=1;$row<=$total_rows;$row++) {
    echo "<tr>";
    foreach($table[$row] as $cell) {
        echo "<td>".$cell."</td>";
    }
    echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T03:12:02.797

这并不像人们想象的那么复杂

从您当前所在的任何行开始内部循环，每次添加 2。

```
<?php
$rows=2;
$cols=10;
?>

<table>
<?php for($i=1;$i<=$rows;$i++): ?>
    <tr>
    <?php for($k=$i;$k<$cols;$k+=2): ?>
        <td><?php echo $k ?></td>
    <?php endfor; ?>
    </tr>
<?php endfor; ?>
</table> 
```

虽然我可能使用 range 和 foreach

```
<?php
$rows=2;
$cols=10;
?>

<table>
<?php foreach( range( 1, $rows ) as $row ): ?>
    <tr>
    <?php foreach( range( $row, $cols, 2 ) as $col ): ?>
        <td><?php echo $col ?></td>
    <?php endforeach; ?>
    </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T03:13:27.310

这种方法将拆分数据本身

```
function array_chunk_vertical($array = null,$cols = 3, $pad = array(null))
{
  if (is_array($array) == true and !empty($array))
  {
    $rows = ceil(count($array)/$cols);
    $array = array_chunk($array,$rows);
    if (count($array) < $cols)
    {
      $array = array_pad($array,$cols,$pad);
    }
    foreach($array as $key => $value)
    {
      $array[$key] = array_pad($value,$rows,null);
    }
    foreach($array as $key => $value)
    {
      foreach($value as $sub_key => $sub_value)
      {
        $output[$sub_key][$key] = $sub_value;
      }
    }
    return $output;
  }
  return $array;
}

$data = array(1,2,3,4,5,6,7,8,9,10,11);

echo '<table border="1">';
foreach(array_chunk_vertical($data,ceil(count($data)/2)) as $row)
{
  echo '<tr>';
  foreach($row as $col)
  {
    echo '<td>' . $col . '</td>';
  }
  echo '</tr>';
}
echo '</table>'; 
```

# asp.net-mvc-3 - 如何访问 MVC 3 项目中的文件夹？

> ID：10679044
> 
> 赞同：0
> 
> 时间：2012-05-21T02:56:36.080
> 
> 标签：asp.net-mvc-3

我使用 Visual Studio 2010 和 IIS 7 创建了一个 MVC 3 项目。将我的项目部署到 IIS 后，我可以使用我的域地址成功访问该网站，但我的文本显示在浏览器上，而不是图像、样式表等。 . 我在浏览器上右键单击其中一个图像以在新选项卡上打开，该站点将我重定向到登录页面。所以我想知道是否需要允许匿名用户查看我的 Content/images 文件夹？或者它可能与 IIS 7 有关？

我正在加载如下图像

```
<img src="@Url.Content("~/Content/images/image.gif")" width="413" height="220" alt="First Image" /></div> 
```

这是我的项目 web.config

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>
<connectionStrings>
<remove name="LocalSqlServer" />
<add connectionString="Server=XXXX;Database=XXXX;User ID=XXXX;Password=XXXX" name="ApplicationServices" providerName="System.Data.SqlClient" />
<add connectionString="Server=XXXX;Database=XXXX;User ID=XXXX;Password=XXXX" name="LocalSqlServer" providerName="System.Data.SqlClient" />
</connectionStrings>

 <appSettings>
  <add key="webpages:Version" value="1.0.0.0" />
  <add key="ClientValidationEnabled" value="true" />
 <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings>

<system.web>
  <customErrors mode="Off" />
  <compilation debug="true" targetFramework="4.0">
    <assemblies>
      <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation>

<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication>

<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>

<profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile>

<roleManager enabled="false">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager>

<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages>
    <authorization>
        <allow users="?" />
        <allow users=".\johnsmith" />
    </authorization>
</system.web>

<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" />
    <security>
        <authorization>
            <add accessType="Allow" users="?" />
        </authorization>
    </security>
</system.webServer>

<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
  </dependentAssembly>
</assemblyBinding>
</runtime>
</configuration> 
```

谢谢，Y_Y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:05:14.707

你的`Content`文件夹不是*公开*的，而你可能是故意的。要授予它访问权限`web.config`，请在*Content*文件夹中添加一个文件并[正确配置它](http://msdn.microsoft.com/en-us/library/8d82143t)。或者，重新配置您的主要`web.config`.

* * *

> 在运行时，授权模块迭代允许和拒绝元素，从最本地的配置文件开始，直到授权模块找到适合特定用户帐户的第一个访问规则。然后，授权模块根据找到的第一个访问规则是允许还是拒绝规则来授予或拒绝对 URL 资源的访问。默认授权规则是 . 因此，默认情况下，除非另有配置，否则允许访问。

# php - 如何获取一些帖子内容的摘录

> ID：10679046
> 
> 赞同：0
> 
> 时间：2012-05-21T02:57:11.090
> 
> 标签：php, codeigniter

我有一个页面，我在其中显示来自数据库的所有帖子，我不想只显示其中的摘录。我知道这很容易，我可以在互联网上搜索它，但我不知道你怎么称呼它。任何人都可以指出我正确的道路谢谢。顺便说一句，我正在为我的网站使用 codeigniter。

我所说的例子是：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

**The Title**

sdfgsjdhfglksjhfdgksdjfhglskdjfghlsdkjfhglskdjfhgslkjdfhg(read more).

**The second title**   
lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum(read more). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:11:29.953

或者您可以使用内置的文本助手[http://s.zah.me/KJXK6o](http://s.zah.me/KJXK6o)并使用这两个功能之一`word_limiter`或`character_limiter`

像

```
$string = "Here is a nice text string consisting of eleven words.";

$string = word_limiter($string, 4);

// Returns: Here is a nice… 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:02:43.610

有很多方法可以做到这一点，具体取决于你想要切断它的位置。

一种简单的方法是用空格分割字符串，然后取前 X 个空格/

```
$excerpt = array_slice( explode( " ", $text ), 0, 30 ); 
```

这样它就不会在单词中间切断文本。

# python - 为什么 Python print() 函数会返回 EOL？

> ID：10679054
> 
> 赞同：0
> 
> 时间：2012-05-21T02:58:46.367
> 
> 标签：python, string

我正在尝试将 Python print() 函数与多行字符串文字一起使用——我使用垂直省略号来表示字符串文字的多行，而不是内容。

```
print("Here is the data table: 
        .
        .
        .                   ") 
```

为什么我在扫描字符串文字错误时收到 EOL。

为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T03:01:12.897

使用`"""`or`'''`表示多行[字符串文字](http://docs.python.org/tutorial/introduction.html#strings)。

编辑：正如@lvc 在评论中指出的那样，由于您在字符串周围有括号，您仍然可以使用单引号，您只需要以 . 开头和结尾每一行`"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:01:28.623

python中以单引号（“或'）开头的字符串不能跨越多行。您必须使用三引号字符串。例如：

```
print("""Here is the data table:
    ....
""") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T03:03:37.650

在分隔字符串时尝试使用 """ 而不是 "：

```
print """
multiline string

...
""" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T03:08:08.807

三个选项：

1.  按照其他人的建议使用三引号。令人讨厌的是，字符串的第一行与代码中的其余部分不一致。

2.  像这样使用反斜杠、加号和多个字符串：

    print ("这里是数据表："
    ""
    "...."
    ""
    )

3.  在字符串中使用换行符 ( `\n`)，如下所示：

    print ("这里是数据表：\n...\n\n\n")

# jquery - 从一个有类问题的执行jquery函数

> ID：10679055
> 
> 赞同：0
> 
> 时间：2012-05-21T02:58:49.250
> 
> 标签：jquery, wordpress, hover, conflict

我已经在我的网站上设置了导航，其中包含列表子项中的链接。链接的文本被标记，以便仅显示图像。对于 2 个链接，我想通过 jquery hover 显示特定的子导航。不幸的是，这并不像计划的那样容易。你可以在这里看到[http://serratedfoundation.com/test/](http://serratedfoundation.com/test/)

页面左上角是一个链接，没有选项卡式文本，显示了我希望在将鼠标悬停在“服务”图像上时获得的功能。我知道这是相当基本的，可能是由我设置导航的 CSS 的方式引起的。也就是说，即使我已经使用上述链接解决了问题，我也没有足够的经验来查明问题。此外，如果有人可以提供如何使用 firebug 对 Javascript 进行故障排除的链接，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:13:11.573

你需要调用里面的函数`jQuery(document).ready()`

```
var j = jQuery.noConflict();

j(document).ready( function(){

    j(".navServices").hover(function () {
        j("#subNavWrap").show();
    }, function() { //on hover out...
        j("#subNavWrap").hide();
    });
}); 
```

# ruby - 红宝石刮刀。如何导出为 CSV？

> ID：10679058
> 
> 赞同：1
> 
> 时间：2012-05-21T02:59:19.670
> 
> 标签：ruby, fastercsv, scraper, anemone

我编写了这个 ruby​​ 脚本来从制造商网站上抓取产品信息。产品对象的抓取和存储在数组中有效，但我不知道如何将数组数据导出到 csv 文件。抛出此错误：scraper.rb:45: undefined method `send_data' for main:Object (NoMethodError)

我不明白这段代码。这是在做什么，为什么它不能正常工作？

```
 send_data csv_data, 
            :type => 'text/csv; charset=iso-8859-1; header=present', 
            :disposition => "attachment; filename=products.csv" 
```

完整代码：

```
#!/usr/bin/ruby

require 'rubygems'
require 'anemone'
require 'fastercsv'

productsArray = Array.new

class Product
    attr_accessor :name, :sku, :desc
end

# Scraper Code

Anemone.crawl("http://retail.pelicanbayltd.com/") do |anemone|
    anemone.on_every_page do |page|

        currentPage = Product.new

        #Product info parsing
        currentPage.name = page.doc.css(".page_headers").text
        currentPage.sku = page.doc.css("tr:nth-child(2) strong").text
        currentPage.desc = page.doc.css("tr:nth-child(4) .item").text

        if currentPage.sku =~ /#\d\d\d\d/
            currentPage.sku = currentPage.sku[1..-1]
            productsArray.push(currentPage)
        end
    end
end

# CSV Export Code

products = productsArray.find(:all) 
csv_data = FasterCSV.generate do |csv| 
    # header row 
    csv << ["sku", "name", "desc"] 

    # data rows 
    productsArray.each do |product| 
      csv << [product.sku, product.name, product.desc] 
    end 
  end 

  send_data csv_data, 
            :type => 'text/csv; charset=iso-8859-1; header=present', 
            :disposition => "attachment; filename=products.csv" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T19:20:20.300

如果您是 Ruby 新手，您应该使用 Ruby 1.9 或更高版本，在这种情况下，您可以使用内置的 CSV 输出，它内置了快速 csv 和 l18n 支持：

```
require 'csv'
CSV.open('filename.csv', 'w') do |csv|
  csv << [sku, name, desc]
end 
```

[http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:42:32.287

这样做可能更有意义：

```
@csv = FasterCSV.open('filename.csv', 'w') 
```

然后一边写一边写：

```
@csv << [sku, name, desc] 
```

这样，如果您的脚本在中途崩溃，您至少获得了一半的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:19:12.813

```
File.open('filename.csv', 'w') do |f|
  f.write(csv_data)
end 
```

# java - 使用 jquery 问题对 jax-rs 进行 ajax 调用

> ID：10679060
> 
> 赞同：2
> 
> 时间：2012-05-21T02:59:44.960
> 
> 标签：java, json, cross-domain, jax-rs, jackson

我正在尝试调用一个使用 post 方法消耗 json 对象的 Web 服务。我做到了然后它不会再次工作不知道是什么问题。
这是我的方法

```
@POST
@Path("/post")
@Consumes("application/json")
@Produces("application/json")
public Response testClient(Client c) throws IOException {
    System.out.println(c.getAdresseCl());
    ResponseBuilder builder = Response.ok(c.getAdresseCl());
    builder.header("Access-Control-Allow-Origin", "*");
    builder.header("Access-Control-Max-Age", "3600");
    builder.header("Access-Control-Allow-Methods", "*");
    builder.header(
            "Access-Control-Allow-Headers",
            "X-Requested-With,Host,User-Agent,Accept,Accept-Language,Accept-Encoding,Accept-Charset,Keep-Alive,Connection,Referer,Origin");
    return builder.build();
} 
```

打电话给这个我用这个

```
$.ajax({
  type: 'POST',
  url: "http://localhost:9080/FournisseurWeb/jaxrs/clients/post",
  data: '{"adresseCl":"tunis"}',
  dataType:'json',
  contentType: "application/json; charset=utf-8", 
  success: function (msg) {
    alert(msg);
  },

  error: function (xhr, ajaxOptions, thrownError) {
    alert('error');
  }

}); 
```

好吧，我注意到当我将 contentType 设置为 application/json 时，方法更改为 OPTIONS 。当我不使用内容类型时，我得到“415 Unsupported Media Type”，我不知道如何解决这个问题。我花了太多时间没有结果:(
谢谢你帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:17:59.563

当尝试在某些浏览器中发出跨域 AJAX 请求时，通常会看到 HTTP 方法更改为 OPTIONS 而不是更有意义的错误消息。

我在您的 URL 中注意到您包含协议、域和端口，这支持您实际上尝试向与原始上下文不同的域/端口组合发出 AJAX 请求的理论。

澄清一下，即使您的请求来自 localhost 并以 localhost 为目标，端口 (9080) 和协议 (http) 也必须匹配。

因此，如果您加载的页面是“http://localhost:8080”并且您尝试向“http://localhost:9080”发出 AJAX 请求，则请求将失败，可能会引发同域安全错误, 415 Unsupported Media Type, 和/或将 HTTP 方法更改为 OPTIONS。

确保避免此错误的一种方法是在发出 AJAX 请求时仅使用完整路径或相对路径，例如：

```
url: "/FournisseurWeb/jaxrs/clients/post", 
```

这迫使您始终向同一个域发出请求。

**跨域请求**

如果您确实需要进行跨域请求的能力，这是可能的，但只能通过两种方法。

首先，您可以使用代理，向您的域发出 HTTP 请求，然后将请求转发到另一台服务器。服务器在相互发送和接收数据时不需要关心同域策略。

其次，您可以使用[JSONP](http://api.jquery.com/jQuery.getJSON/)，也称为脚本标记远程处理，它涉及利用`<script>`元素跨不同域发送请求的能力。

```
// added callback= query parameter to convert this to JSONP
$.ajax({
  type: 'POST',
  url: "http://localhost:9080/FournisseurWeb/jaxrs/clients/post?callback=",
  data: '{"adresseCl":"tunis"}',
  dataType:'json',
  contentType: "application/json; charset=utf-8", 
  success: function (msg) {
    alert(msg);
  },    
  error: function (xhr, ajaxOptions, thrownError) {
    alert('error');
  }
}); 
```

注意：使用 JSONP 时，您的服务器必须使用包含在回调参数标识的函数调用中的 JSON 进行响应。有关更深入的详细信息，请参阅 jQuery 文档。

除此之外，您必须向加载页面的同一域发出 AJAX 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T00:54:34.703

这是使用文本 xml 格式并将其映射到对象以将其持久化的方法

```
@POST
@Path("/inscription")
@Produces(MediaType.TEXT_HTML)
public Response testClient(String s) {
    ResponseBuilder builder = null;

    try {

        final String xmlString = s;
        final StringReader xmlReader = new StringReader(xmlString);
        final StreamSource xmlSource = new StreamSource(xmlReader);
        final JAXBContext jaxbContext = JAXBContext
                .newInstance(Client.class);
        final Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        final Client client = (Client) unmarshaller.unmarshal(xmlSource,
                Client.class).getValue();
        System.out.println("nomCl  : " + client.getNomCl());
        System.out.println("prenomCl  : " + client.getPrenomCl());
        System.out.println("emailCl  : " + client.getEmailCl());
        System.out.println("numTel  : " + client.getNumTel());
        System.out.println("long_  : " + client.getLong_());
        System.out.println("lat  : " + client.getLat());
        System.out.println("LoginCl  : " + client.getLoginCl());
        System.out.println("PasswordCl  : " + client.getPasswordCl());
        System.out.println("adresseCl  : " + client.getAdresseCl());
        EntityManagerFactory factory;
        factory = Persistence.createEntityManagerFactory("FournisseurWeb");
        EntityManager em = factory.createEntityManager();
        em.getTransaction().begin();
        em.persist(client);
        em.getTransaction().commit();
        em.close();
        factory.close();
        builder = Response.ok("true");
    } catch (Exception e) {
        System.out.println(e.getMessage());
        e.printStackTrace();
        builder = Response.ok("false");
        builder.header("Access-Control-Allow-Origin", "*");
        builder.header("Access-Control-Max-Age", "3600");
        builder.header("Access-Control-Allow-Methods", "POST");
        builder.header(
                "Access-Control-Allow-Headers",
                "X-Requested-With,Host,User-Agent,Accept,Accept-Language,Accept-Encoding,Accept-Charset,Keep-Alive,Connection,Referer,Origin");
        return builder.build();
    }
    builder.header("Access-Control-Allow-Origin", "*");
    builder.header("Access-Control-Max-Age", "3600");
    builder.header("Access-Control-Allow-Methods", "POST");
    builder.header(
            "Access-Control-Allow-Headers",
            "X-Requested-With,Host,User-Agent,Accept,Accept-Language,Accept-Encoding,Accept-Charset,Keep-Alive,Connection,Referer,Origin");
    return builder.build();
} 
```

我用这个示例使用 ajax 调用这个方法：

```
var x="<client><nomCl>Taarit</nomCl><prenomCl>Aymen</prenomCl><emailCl>aymen.taarit@gmail.com</emailCl><numTel>222</numTel><long_>1.66</long_></client>";
$.ajax({
        url: 'http://localhost:9080/FournisseurWeb/jaxrs/clients/cl',
        type: 'post',
        scriptCharset: "utf-8" ,
        dataType:"xml",
        data: x,
        success: function(data, status) {  
        console.log(data);         
        }
    }); 
```

这是一个使用跨域的 ajax POST 的 jax-rs 调用，所以希望它有所帮助:)

**注意：没有 JSONP 的跨域调用在这里是合法的，因为服务器返回了以下标头，它启用了跨域 AJAX！**

```
 builder.header("Access-Control-Allow-Origin", "*"); 
```

有关更多详细信息，请参阅[Access-Control-Allow-Origin 上的 Mozilla 开发人员中心页面](https://developer.mozilla.org/en/http_access_control#Access-Control-Allow-Origin)。

# ruby-on-rails - 安装设计后 nil:NilClass 的未定义方法“first_name”

> ID：10679061
> 
> 赞同：0
> 
> 时间：2012-05-21T03:00:02.963
> 
> 标签：ruby-on-rails, devise, routes, associations

当我尝试运行 sunspot:reindex 或在属于用户的 Gears 视图中时，我不断从数据库中的 2 列 first_name 和 last_name 获取未定义的方法。在安装设备之前它工作正常。请参阅下面的代码。谢谢您的帮助。

**用户模型**

```
class User < ActiveRecord::Base 
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name, :last_name, :userimage, :remove_userimage
  has_many :gears
  has_many :comments, :dependent => :destroy 
  has_one :store, :dependent => :destroy
  require 'carrierwave/orm/activerecord'
  mount_uploader :userimage, UserpicUploader
  accepts_nested_attributes_for :store

  email_regex = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i

  validates :first_name,  presence: true,
                          length:  {:maximum => 50 }
  validates :last_name,  presence: true,
                         length:  {:maximum => 50 }                                         

  def name
   first_name + " " + last_name
  end 
```

**齿轮型号**

```
class Gear < ActiveRecord::Base
  attr_accessible :title, :size, :price, :sub_category_id, :user_id, :image, :image_a, :remote_image_url, :color, :year, :latefee, :cancellation, :minrental, :policy, :about, :address, :city, :state, :zip
  belongs_to :user
  belongs_to :sub_category
  has_one :category, :through => :sub_category
  has_many :comments, :dependent => :destroy 
  require 'carrierwave/orm/activerecord'
  mount_uploader :image, GearpicUploader
  mount_uploader :image_a, GearpicUploader

  validates :title, presence: true
  validates :size,  presence: true
  validates :price, presence: true
  validates :sub_category_id, presence: true
  validates :user_id, presence: true

  searchable do
     text :title, :size, :price, :year, :zip, :state, :city, :minrental, :about, :latefee, :color 

     text :user_first_name do
          user.first_name
     end

     text :user_last_name do
          user.last_name
     end
     # **Facet Section**   

     string :size, :price, :year, :zip, :state, :city, :minrental, :latefee, :color 

     string :sub_category_name do
       sub_category.name
     end

     string :category_name do
       category.name
     end
   end

end 
```

**齿轮控制器索引和显示**

```
class GearsController < ApplicationController
  def index
    @search = Gear.solr_search do
            fulltext params[:search]
            paginate(page: params[:page])
            facet (:category_name)
            facet (:sub_category_name)
            with(:sub_category_name, params[:name]) if params[:name].present?
            with(:category_name, params[:categoryname]) if params[:categoryname].present?
    end

    @gears = @search.results
  end

  def show
    @gear = Gear.find(params[:id])
    @storegear = @gear.user.gears.all(:order => 'created_at DESC', :limit => 6)
    @comments = @gear.comments.all
    @user = @gear.user
    @store = @gear.user.store.id
  end 
```

**我试图显示的视图**

```
<%= link_to gear_path(gear) do %>
<div class="gear_list_box">
    <div class="gear_list_box_top"><%= image_tag gear.image_url(:list), class: 'gear_list_box_top_pic' %></div>
    <div class="gear_list_box_bottom">
        <table style="border-collapse:collapse; cellspacing: 0; width: 100%; margin: 0;" >
            <tr>
                <td style="color: #2c6aa7; padding-left: 10px" width="60%"> <span class='gearlist_size'><%= gear.size %></span> - <%=  truncate(gear.title,:length => 12) %></td>
                <td rowspan="2" width="40%" style="color: #5c8d0d; text-align: center; vertical-align: middle; font-size: 120%; border-collapse:collapse;">$<%= gear.price %>/day</td>
            </tr>
            <tr>
                <td width="60%" style="padding-left: 10px; font-size: 12px;"><%= gear.user.first_name + " " + gear.user.last_name %></td>
            </tr>
        </table>
    </div>
</div>
<% end %> 
```

**路线**

```
 devise_for :users, :path => 'accounts', :controllers => {:registrations => "registrations"}

  devise_scope :user do
    get "signin", :to => "devise/sessions#new"
  end

  devise_scope :user do
    post "sign_in", :to => "devise/sessions#create"
  end

  devise_scope :user do
    delete "signout", :to => "devise/sessions#destroy"
  end

  devise_scope :user do
    get "signup", :to => "devise/registrations#new"
  end

  resources :gears do
    resources :comments, :only => [:create, :destroy] 
  end

  match '/gear',   to: "gears#index"

  resources :users, :except => [:destroy, :create, :new ] do
     resources :store
  end

  root to: 'pages#home'

  match '/about',   to: 'pages#about'
  match '/contact', to: 'pages#contact'
  match '/fees',    to: 'pages#fees'
  match '/faq',     to: 'pages#faq' 
  match '/why',     to: 'pages#why'  
  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy' 
```

结尾

***错误********

 **```
rake sunspot:reindex --trace
** Invoke sunspot:reindex (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute sunspot:reindex
rake aborted!
undefined method `first_name' for nil:NilClass
/Users/dave/rails_projects/EquiptMe/app/models/gear.rb:21:in `block (2 levels) in <class:Gear>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/util.rb:208:in `instance_eval'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/util.rb:208:in `instance_eval_with_context'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/util.rb:86:in `instance_eval_or_call'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/data_extractor.rb:33:in `value_for'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/field_factory.rb:58:in `populate_document'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:95:in `block in prepare'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:94:in `each'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:94:in `prepare'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:24:in `block in add'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:24:in `map'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/indexer.rb:24:in `add'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/session.rb:91:in `index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot.rb:184:in `index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/searchable.rb:256:in `block (2 levels) in solr_index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/searchable.rb:345:in `solr_benchmark'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/searchable.rb:255:in `block in solr_index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.0/lib/active_record/relation/batches.rb:72:in `find_in_batches'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.0/lib/active_record/querying.rb:8:in `find_in_batches'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/searchable.rb:254:in `solr_index'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/searchable.rb:198:in `solr_reindex'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/tasks.rb:54:in `block (3 levels) in <top (required)>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/class_set.rb:16:in `each'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot-1.3.1/lib/sunspot/class_set.rb:16:in `each'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/sunspot_rails-1.3.1/lib/sunspot/rails/tasks.rb:53:in `block (2 levels) in <top (required)>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/dave/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/rake:19:in `load'
/Users/dave/.rvm/gems/ruby-1.9.3-p0/bin/rake:19:in `<main>'
Tasks: TOP => sunspot:reindex
Daves-MacBook-Pro:EquiptMe dave$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:58:58.387

Searchable 是一个块，因此您可以重写如下内容：

```
searchable do
     text :title, :size # the rest...

     text :user_first_name do
          user.nil?? '' : (user.first_name.nil?? '' : user.first_name)
     end
end 
```

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:34:22.783

I've fixed it. The problem was I had a Gear object without a User in my sample data. After I deleted the gear it worked fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:20:45.230

您是否尝试过通过设计提供的参考来访问它们，而不是参考`first_name`和`last_name`通过齿轮模型`current_user`？

例如，更改视图以使用此行可能会有所帮助：

```
current_user.first_name + " " + current_user.last_name 
```

一旦你开始使用 devise 访问当前用户的最佳方式是通过`current_user`方便的方法。**

# ruby-on-rails - capistrano 命令适用于服务器，但不适用于本地

> ID：10679069
> 
> 赞同：0
> 
> 时间：2012-05-21T03:02:04.850
> 
> 标签：ruby-on-rails, rake, capistrano

运行此 capistrano 任务时出现此错误（我自己的 - cap deploy:show_pointers）：

```
 * executing `deploy:show_pointers'
  * executing "cd /home/mydomain/public_html/site_folders/rails/current; rake app:show_pointers"
    servers: ["mydomain.net"]
    [mydomain.net] executing command
 ** [out :: mydomain.net] (in /home/mydomain/public_html/site_folders/rails/releases/20120521025150)
 ** [out :: mydomain.net] Could not find rake-0.9.2 in any of the sources
 ** [out :: mydomain.net] Try running `bundle install`.
    command finished in 1584ms
failed: "sh -c 'cd /home/mydomain/public_html/site_folders/rails/current; rake app:show_pointers'" on mydomain.net 
```

但是，当我跑步时

```
sh -c 'cd /home/mydomain/public_html/site_folders/rails/current; rake app:show_pointers 
```

从 capistrano 登录的同一目录手动操作，它可以工作。我将 capistrano 设置为不使用 sudo，所以这不应该是问题，但听起来可能是问题，因为上述命令因 sudo 失败。我认为这是用户问题，或者可能是环境变量问题。或者我不确定是什么。

任何建议。这是一项已经是 rake 任务的任务，但它可以帮助我不必每次运行它时都登录服务器（大约还有 10 个类似的任务）。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T06:44:19.493

> 从 capistrano 登录的同一目录手动操作，它可以工作。

这没什么，Capistrano 创建了一个非登录 tty，这意味着您的配置文件、点文件等没有运行。

```
ssh root@example.de -t /bin/sh 
```

这是将环境与 Capistrano 进行比较的一种更可靠的方法，（尽管这比 Capistrano 使用的功能更全面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:55:19.777

@dbra over on stack overflow 指出我需要完整的 rake 路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:12:55.763

鉴于这些错误消息，我有几个想法：

```
** [out :: mydomain.net] Could not find rake-0.9.2 in any of the sources
** [out :: mydomain.net] Try running `bundle install`. 
```

该应用程序找不到该`rake`命令。您是否尝试`bundle install`按照其推荐在远程计算机上运行？

另一种选择可能是将命令更改为

```
cd /home/mydomain/public_html/site_folders/rails/current; bundle exec rake app:show_pointers 
```

根据`bundle exec`远程服务器上的 ruby​​ 环境，可能会建议在命令前面使用。

# objective-c - 在 for 循环中，在 GCD 中，暂停，获取输入，继续

> ID：10679081
> 
> 赞同：0
> 
> 时间：2012-05-21T03:03:40.700
> 
> 标签：objective-c, performance, for-loop, objective-c-blocks, grand-central-dispatch

我想知道是否有办法脱离 gcd，在输入警报视图中显示，然后返回进程？这是我的日常：

```
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    NSMutableArray *array = [NSMutableArray new];
    for(NSIndexPath * ip in [self.tableView indexPathsForSelectedRows]){
        [array addObject:[CompanyObjectsArray objectAtIndex:ip.row]];
    }
    //I need to check for a an Object here, if present get input from User.
    [self addCompaniesOrCreate:[NSArray arrayWithArray:array]];

    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
}); 
```

我像这样将所有对象添加到核心数据中，

但是我需要如果公司是“Appl3”，我应该从用户那里获得输入，如果我得到它，继续并循环其余的，或者跳过当前的“Appl3”公司。

有没有一种方法可以有效地做到这一点，**而在 for() 循环中，暂停，获取输入，继续 for() 循环**。

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:31:05.710

我不知道有这样的方法。通常的模式是编写自己的方法，将块作为完成处理程序。因此，基本上，当您获得所需的用户输入时，您将要运行的块传递回主线程。

最好的祝福，

斯文。

# java - 无法解析为类型（jsp + eclipse）

> ID：10679082
> 
> 赞同：8
> 
> 时间：2012-05-21T03:03:43.857
> 
> 标签：java, eclipse, jsp, types

我有一个 jsp proyect 作为表示层来显示来自 java 类的函数的结果（一个简单的字符串）。这个类在 src 目录中。

当我尝试运行时，出现以下错误：

> org.apache.jasper.JasperException：无法为 JSP 编译类：

进而：

> 解析器无法解析为类型

我的jsp代码是：

```
<%
        String input="ebnf a{non terminal A;}";
        Symbol tree=null;
        parser p=null;
        InputStream entrada=null;
        analex analizador;
        try{
            entrada=new ByteArrayInputStream(input.getBytes("UTF-8"));
            analizador=new analex(entrada);
            p=new parser(analizador);
            tree=p.parse();
        }catch(Exception e){
            out.println("ERROR");
        }
        finally{}
        out.println("CORRECTO");
        ConDiaCClass cdc=Singleton.getInstance();
        out.println(cdc);
%> 
```

实际上，我对 ConDiaCClass 和 analex 类也有同样的问题。

我没有用 Eclipse 创建这些类。它们来自另一个项目，但它们都放在 src 目录中（应该是 java 类所在的目录）。似乎jsp无法识别它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T03:09:31.103

您应该在 jsp 的开头[添加必要的 import 语句。](https://stackoverflow.com/a/239293/1065197)一个样品：

```
<%@ page import="java.util.List" %>
<%@ page import="yourpackage.parser, yourpackage.analex" %> //and on 
```

一个建议：让你的类遵循[Oracle 提出的 Java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。这是一个很好的指南，可以帮助其他人轻松阅读您的代码（当您想要查看/改进代码时，它会帮助您自己）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-04T03:44:05.857

清理项目，并重新加载 JRE，如下所示：Java Build Path -> Libraries -> Add Library -> JRE System Library

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T16:06:48.780

最后只是类没有得到可见性属性。我没有它们的公共属性，因此尽管 jsp 知道它们在哪里，但它们无法被解析为一种类型。

这是一个 JFlex/CUP 问题：JFlex 和 CUP 创建没有可见性属性的类（分析器和解析器）。

谢谢你的回答。下次我会尝试更具体地回答我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T04:05:14.740

只是在上面的答案中添加更多内容。

`JasperException`是 JSP Engine 抛出的所有异常的超类。当您第一次运行 JSP 时，Tomcat 引擎会编译您的 JSP，并且可能会抛出您得到的编译时错误。

阅读[更多](http://tomcat.apache.org/tomcat-4.1-doc/jasper/docs/api/org/apache/jasper/JasperException.html)

> java类应该在哪里

您的课程应该在`/WEB-INF/classes`目录下。默认情况下 `/WEB-INF/classes`，`/WEB-INF/lib`（第三方 API）目录位于`CLASSPATH`

因此，如果您在目录`foo.bar`下有包`src`，那么您的课程将在`/WEB-INF/classes/foo/bar/`

# python - 如何获得具有不同父级的两个 QWidget 的几何交集？

> ID：10679083
> 
> 赞同：2
> 
> 时间：2012-05-21T03:03:46.127
> 
> 标签：python, qt4, pyqt

使用 Qt4（这里使用 PyQt4）来获得两个 QWidget 的交集区域——这对于 QRubberband 在进行选择时特别有用——只需这样做：

`intersection = rubberband.geometry().intersected(mydocumentwidget.geometry())`

现在这假设`rubberband`和`mydocumentwidget`具有相同的父小部件，即更准确地说，它们的坐标相对于同一原点。这是因为方法调用本身没有父对象，它是一个简单的元组，有 4 个整数和一些方法调用`QRect.intersected()`。`QRect`

现在在我的情况下`rubberband`，并且`mydocumentwidget`有相同的父级，但我对橡皮筋与 mydocument 的子级（即文档的页面）的交叉感兴趣。然而，页面将它们的坐标参考到屏幕上的不同点。

如何计算橡皮筋和我的页面小部件之间的交集？有没有办法将坐标转换为引用父母的父母？我当然可以自己写下数学，但我认为它不是很干净。Qt4 是否提供任何方法来自动转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:31:29.157

您可以做的是将 QRect 的点映射到父小部件。您可以将 QPoints 映射到各种目标（父、其他、全局），但由于您特别想映射到`mydocumentwidget`，因此您可以执行以下操作：

```
doc_child = getChildOfDocument() # pseudo
rect = doc_child.geometry()

mappedPoint = doc_child.mapToParent(rect.topleft())
# alternative #
# mappedPoint = doc_child.mapTo(mydocumentwidget, rect.topleft()) 

mappedRect = QtCore.QRect(mappedPoint, rect.size())
intersection = rubberband.geometry().intersected(mappedRect) 
```

# embed - 在资源管理器中嵌入侧栏

> ID：10679087
> 
> 赞同：-1
> 
> 时间：2012-05-21T03:04:17.420
> 
> 标签：embed, explorer, windows-shell, shell-extensions

如何在资源管理器中嵌入侧栏，如右侧的栏？这是一个中文的dropbox-clone

![例子](../Images/16f97ee7c22dead05aa1f9c66eb34dd7.png) 在摆弄 SP++ 之后，我猜它正在寻找 HWND，调整 SHELLDLL_DefView 的大小并向 CabinetWClass 添加一个窗口。或者是否有一个外壳扩展可以做到这一点？右侧窗口可以根据上下文（左侧选择哪个文件）而改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:29:50.057

这是**探索者酒吧**

[http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099%28v=vs.85%29.aspx)。

# html - 如何使用 CSS 定位类中的类？

> ID：10679090
> 
> 赞同：0
> 
> 时间：2012-05-21T03:04:58.963
> 
> 标签：html, css, drupal

我已经花了几个小时试图完成这项工作，但未能成功。我有一些这样的代码：

```
<h1 class="title ">MasterClass Lessons</h1>
<div class="view view-uc-products view-id-uc_products view-display-id-page_4 3col-grid view-dom-id-1">
  <div class="view-content">
    <table class="views-view-grid">
      <tbody>
        <tr class="row-1 row-first">
          <td class="col-1"><div class="panel-display panel-1col clear-block" >
            <div class="panel-panel panel-col">
              <div>
                <div class="views-field-field-image-cache-fid">
                  <div class="field-content">
                    <a href="/content/gold-pass-all-lessons">
                    <a href="/content/gold-pass-all-lessons"></a>
                  </div>
                </div>
                <div class="views-field-title">
                   <span class="field-content"><a href="/content/gold-pass-all-lessons">GOLD PASS - ALL LESSONS!</a></span> 
                </div> 
```

我想用样式表来定位类“views-field-title”，但我只想应用一个样式，当它是在上面几级的 div 中指定的“3col-grid”的子类时。Drupal 允许我为这个 CSS 定位的特定目的指定我自己的类名（我使用 3col-grid），但是当我执行以下操作时……</p>

```
<style>
.3col-grid .views-field-title {
font-weight:bold;
}
</style> 
```

它不起作用。

我也试过

```
.3col-grid>.views-field-title 
```

和

```
.3col-grid * .views-field-title 
```

和

```
.3col-grid*.views-field-title 
```

我敢肯定一定有办法让它工作，而且我敢肯定这很简单。

任何能告诉我那是什么的人都会让我成为一个快乐的人。

谢谢，乔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T03:08:56.043

您的 HTML 无效。
CSS 类名不能以数字开头。

解决此问题后，您可以使用后代选择器：

```
.OuterClass .InnerClass 
```

# javascript - 如何用 JavaScript 实现 html 的 uncode 功能

> ID：10679099
> 
> 赞同：1
> 
> 时间：2012-05-21T03:07:59.807
> 
> 标签：javascript

```
html.replace(/&lt;/g, "<").replace(/&gt;/g, ">" 
```

是否有任何JavaScript函数可以实现此功能，似乎是unescape函数或escape函数，可以将显示的html转换为实际的html。

那么是否有任何功能可以进行这种替换，以实现类似的功能，（我知道我需要转换除了符号“<”>“之外的其他东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:42:56.500

不幸的是，没有内置的 javascript 函数可以尝试检查这个链接[HtmlSpecialChars 等效于 Javascript 吗？](https://stackoverflow.com/questions/1787322/htmlspecialchars-equivalent-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:25:46.683

在浏览器中运行的 JavaScript 中，最简单的方法是将文本作为 HTML 放入 HTML 元素中，然后将其作为纯文本取出。以下是两种方式进行转换的函数：

```
function htmlentitydecode(html) {
    var div = document.createElement("div");
    div.innerHTML = html;
    return div.innerText || div.textContent;
}

function htmlentityencode(text) {
    var div = document.createElement("div");
    div.innerText = div.textContent = text;
    return div.innerHTML;
} 
```

请注意，`htmlentitydecode`上面的函数也会去除 HTML 标签。如果你不想这样，那么我建议编码，用“&”替换“&”，然后解码。

# jquery-mobile - jQuery Mobile 移除光盘背景

> ID：10679101
> 
> 赞同：4
> 
> 时间：2012-05-21T03:08:06.917
> 
> 标签：jquery-mobile

有没有办法从周围和图标中删除背景光盘（圆圈）？我找到的光盘的唯一参考如下

```
background:                         rgba(0,0,0,.4) /*{global-icon-disc}*/; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-28T13:11:28.213

如果您使用 jquery mobile 1.4 使用`class="ui-nodisc-icon"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T07:02:57.747

尝试这样的事情来覆盖 JQM css。

```
.ui-icon, .ui-icon-searchfield::after {
    background: transparent;
    background-image: url(http://code.jquery.com/mobile/1.1.0/images/icons-18-white.png);    
}​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T14:45:03.107

在 1.3.0 版本中，添加类**ui-icon-nodisc**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T16:26:32.067

我遇到了同样的问题并提出了这个解决方案：

```
.ui-btn-icon-left:after, .ui-btn-icon-right:after, .ui-btn-icon-top:after, .ui-btn-icon-       bottom:after, .ui-btn-icon-notext:after {
background-color: transparent !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T01:01:22.587

这对我有用：

```
.az-nodisc {
    background-color: transparent !important;
    border: none;
    box-shadow: none;
} 
```

然后将样式应用为：

```
<a href="#" class="az-nodisc ui-btn ui-icon-plus ui-btn-icon-notext ui-nodisc-icon">test</a> 
```

# c# - 应用程序块缓存清除事件

> ID：10679104
> 
> 赞同：0
> 
> 时间：2012-05-21T03:08:39.213
> 
> 标签：c#, caching, application-blocks

我正在使用 MS Enterprise 缓存块，并希望在清理缓存启动时记录消息。我想确切地知道缓存何时过期并且必须补水。当我从缓存中获取数据时，如果它为空，那么它可能已被清除。我想知道那是什么时候发生的。

有没有可能这样做。到目前为止，搜索谷歌并阅读文档并没有提供任何信息。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:28:55.777

似乎您需要推出自己的 IBackingStore，例如：

```
public class MyBackingStoreLog : IBackingStore
{
    // TODO: Implement all IBackingStore, pay attention to the Remove method
    public void Remove(string key)
    {
        Log(string.format("{0} was just removed from cache", key));
    }
} 
```

# javascript - 通过 JavaScript 检测和区分 Android 平板电脑和 Android 手机？

> ID：10679110
> 
> 赞同：1
> 
> 时间：2012-05-21T03:09:36.483
> 
> 标签：javascript, android, browser-detection

我已经看到[使用 javascript 检测 Android 设备是手机还是平板电脑，](https://stackoverflow.com/questions/7173642/detecting-whether-android-device-is-a-phone-or-a-tablet-with-javascript)但我想知道是否有任何更新、更稳定的方法来执行此操作，因为答案部分中描述的方法似乎不一致。

基本上，我有一个网站，我有一个 Android 应用程序，但我只想提醒那些使用移动设备的人，因为我想向平板电脑用户展示完整的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:12:07.647

另一种方法是按屏幕宽度/高度。毕竟平板电脑比手机大。

例如，如果您知道您正在处理安卓手机/平板电脑，请检查该`screen.width`属性。

如果您有兴趣利用某些平板电脑可能具有的更大分辨率，此方法可能特别有用。毕竟，并非所有平板电脑都有更大的屏幕。

我建议不要使用用户代理。它们取决于用户当前使用的浏览器。

# android - 三星 S-pen 输入和手指一样吗？

> ID：10679111
> 
> 赞同：3
> 
> 时间：2012-05-21T03:10:04.153
> 
> 标签：android, samsung-mobile

我手头没有实际的 Galaxy Note，也无法访问此类设备，所以我想问一下 S-Pen 的行为方式是否与 SurfaceView 上的手指相同？从 S-Pen SDK 示例在模拟器上运行时的行为来看，S-Pen 的输入似乎与手指输入相同，只是非常精确。（请注意，在模拟器上运行时，由于触摸输入是通过鼠标光标模拟的，因此无法检测到输入是来自手指还是 S-Pen）

我想确认我可以用手指做的手势是否也可以使用 S-Pen？如果是这样的话，是否可以说 S-Pen 堪比一根非常细的手指？唯一不同的是，当应用程序使用三星提供的 SDK 编写特定功能时？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:49:24.520

由于每个人都更容易找到答案而不是评论，因此这是三星开发人员自己的解释：

[SurfaceView 上的 S Pen 行为 - http://developer.samsung.com/](http://developer.samsung.com/forum/board/thread/view.do?boardName=SPenSDK&messageId=152294&startPage=27&curPage=29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T00:30:31.133

s 笔可与 Note 设备中的 Wacom 数字化仪配合使用。这允许精度、压力灵敏度（我的 Note II 上为 256 级）和悬停事件。这些是指针事件，而不是操作系统级别的触摸或鼠标/单击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:18:28.810

是的，使用国际三星 Note（仍在等待 ICS）。[但是，xda 开发者论坛之一](http://forum.xda-developers.com/forumdisplay.php?f=1346)会更好地解决您的问题。

使用 S Memo 应用程序添加备忘录，选择笔输入选项，我可以用手指写笔记。笔触很细，就像笔一样……

我可以使用笔与屏幕上的任何东西进行交互，就好像它是我的手指一样。但是笔无法与电容式按钮交互，更不用说物理按钮了。

# android - 从字符串中删除 HTML 标签

> ID：10679116
> 
> 赞同：-1
> 
> 时间：2012-05-21T03:11:47.240
> 
> 标签：android, html, parsing

我有一个 HTML 字符串：

```
<span class=thisword>anh</span><br />
-grand frère</span><br />
-cousin (fils d'un grand frère ou d'une grande soeur du père ou de la mère)</span><br />
-(nom générique désignant un homme encore jeune)</span><br /> 
```

我想把字符串放进去。我做了以下事情：

```
Elements ed=docu.getElementsByTag("span");
for(Element e: ed)
{
    System.out.println(removeHTML(e.toString()));
    // removeHTML is method remove tags in HTML receive
} 
```

它只显示字符串

```
anh 
```

我希望它显示

```
anh -grand frère -cousin (fils d'un grand frère ou d'une grande soeur du père ou de la mère) -(nom générique désignant un homme encore jeune) 
```

但我没有任何成功。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:15:46.980

HTML 无效...您不能对此抱有太多期望。

您的程序可能正在输出四个字符串，一个带有文本，另外三个为空。您的 HTML 被这样解释（至少对大多数浏览器而言）：

```
<span class=thisword>anh</span><br />
-grand frère<span></span><br />
-cousin (fils d'un grand frère ou d'une grande soeur du père ou de la mère)<span></span><br />
-(nom générique désignant un homme encore jeune)<span></span><br /> 
```

你并没有打开你应该关闭的所有其他跨度。如果您希望将其全部包含在内，则需要在每行文本之前开始一个新的跨度：

```
<span class=thisword>anh</span><br />
<span>-grand frère</span><br />
<span>-cousin (fils d'un grand frère ou d'une grande soeur du père ou de la mère)</span><br />
<span>-(nom générique désignant un homme encore jeune)</span><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:16:42.527

Html 结构似乎不正确。您有一个开口跨度和四个闭合跨度。这可能是原因之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:19:59.957

正确的 HTML 应该是：

```
<span class="thisword">anh</span><br />
<span>-grand frère</span><br />
<span>-cousin (fils d'un grand frère ou d'une grande soeur du père ou de la mère)</span><br />
<span>-(nom générique désignant un homme encore jeune)</span><br /> 
```

你应该注意这些：

*   类应该用引号给出。

*   每个块都应该在各自的`<p>`or内关闭和打开`<div>`。`<span>`应该`</span>`在其中有一个匹配。

*   跨度不应相互重叠。

# performance - OpenGL 渲染性能 - 默认着色器还是无着色器？

> ID：10679122
> 
> 赞同：0
> 
> 时间：2012-05-21T03:12:43.593
> 
> 标签：performance, opengl, shader

我有一些用于渲染视频的代码，因此它的 OpenGL 端（一旦渲染帧在目标纹理中可用）非常简单：只需将其渲染到目标矩形。

让事情变得有点复杂的是，我使用第三方 SDK 来渲染 UI，所以我不知道它会改变什么状态，因此每次渲染帧时，我都必须确保我需要的所有状态都是正确设置。

我正在使用一个顶点和一个纹理坐标缓冲区来绘制我的矩形，如下所示：

```
glActiveTexture(GL_TEXTURE0);
glEnable(GL_TEXTURE_RECTANGLE_ARB);            
glBindTexture(GL_TEXTURE_RECTANGLE_ARB, texHandle);            
glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

glPushClientAttrib( GL_CLIENT_VERTEX_ARRAY_BIT );
glEnableClientState( GL_VERTEX_ARRAY );
glEnableClientState( GL_TEXTURE_COORD_ARRAY );            
glBindBuffer(GL_ARRAY_BUFFER, m_vertexBuffer);
glVertexPointer(4, GL_FLOAT, 0, 0);
glBindBuffer(GL_ARRAY_BUFFER, m_texCoordBuffer);
glTexCoordPointer(2, GL_FLOAT, 0, 0);
glDrawArrays(GL_QUADS, 0, 4);
glPopClientAttrib(); 
```

（有什么我可以跳过的——即使不知道 UI 库中发生了什么？）

现在我想知道——这更具理论性，因为我认为只绘制一个 Quad 时不会有太大区别——如果理论上像上面那样渲染更快，或者改为编写一个简单的默认顶点和片段着色器无非是返回 ftransform() 的位置，并使用片段颜色的默认方式吗？

我想知道通过使用着色器是否可以跳过某些状态更改，或者通常加快速度。或者如果通过在内部使用上面的代码 OpenGL 只是这样做并且结果将完全相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:11:32.373

如果您担心破坏 UI SDK 状态，您也应该使用 glPushAttrib(GL_ENABLE_BIT | GL_TEXTURE_BIT) ... glPopAttrib() 包装代码。

您可以通过使用顶点数组对象稍微简化状态管理代码。

至于使用着色器，对于这个简单的程序，我不会打扰。这将是您必须保存和恢复的一种状态，而且您是对的，OpenGL 内部可能只是为了相同的结果而这样做。

关于加快速度：性能将由发送 10 的成本主导？数百？千字节的视频帧数据到 GPU，添加或删除 OpenGL 调用不太可能产生影响。我会首先查看 UI 和视频流之间帧速率的可能差异：例如，如果帧速率更快，则安排将视频数据复制一次并重新使用，而不是每次 UI 时都复制它重绘。

希望这可以帮助。

# weblogic - Jdeveloper - 无法识别的选项：-jrockit

> ID：10679124
> 
> 赞同：7
> 
> 时间：2012-05-21T03:12:58.540
> 
> 标签：weblogic, jdeveloper, jrockit

每次我尝试在 Jdev 上运行 weblogic webcenter 应用程序时，我都会收到以下错误，并且我无法在网络上的任何地方找到有关如何解决此问题的任何参考。

> 使用 Java 版本启动 weblogic：无法创建 Java 虚拟机。无法识别的选项：-jrockit

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T11:04:55.710

尝试修改 startWebLogic.cmd 文件（WIN7）

```
c:\users\{user}\AppData\Roaming\JDeveloper\system{version}\DefaultDomain\bin\startWebLogic.cmd 
```

包含装有

```
set JAVA_VM=-server
set MEM_ARGS=-Xms512m -Xmx1024m -XX:MaxPermSize=512m 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T09:46:30.640

Jdeveloper 11g 不支持 jdk 1.7

> [https://forums.oracle.com/thread/2482850](https://forums.oracle.com/thread/2482850)

我通过添加到 c:\users{user}\AppData\Roaming\JDeveloper\system{version}\DefaultDomain\bin\setDomainEnv.cmd 的顶部来修复它：

```
set SUN_JAVA_HOME=E:\Oracle\Java\jdk1.6.0_37
set JAVA_VENDOR=Sun 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-05T03:25:05.213

在 OSX 中，查找此文件夹`/Users/{USERNAME}/.jdeveloper/system{VERSION}/DefaultDomain/bin`

编辑文件`setDomainEnv.sh`并查找`SUN_JAVA_HOME`并确保该值与您的值相同`JAVA_HOME`，即`/Library/Java/JavaVirtualMachines/jdk${JDK_VERSION}.jdk/Contents/Home`默认情况下它似乎设置为空字符串`""`。

编辑文件并在调用`startWebLogic.sh`之前添加以下内容。`setDomainEnv.sh`

`JAVA_VENDOR=Sun`

你可以通过运行来测试它`sh ./startWebLogic.sh`，如果它运行有`-jrockit`错误，那么一切都很好:)

我还使用 Java JDK 1.7 进行了测试，它似乎可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-14T10:22:42.490

原因是，较旧的 Weblogic 版本使用 Java VM“JRockit” [http://www.oracle.com/technetwork/middleware/jrockit/overview/index.html](http://www.oracle.com/technetwork/middleware/jrockit/overview/index.html)

Java 7 或更高版本不再支持 JRockit VM。

这里的所有其他解决方案似乎都是黑客，没有一个对我有帮助。我在使用 Weblogic 10.3.5 时遇到了同样的问题，我发现安装不正确。

问题是，安装程序中没有 Java 版本检查，所以如果你不知道你不能使用 Java 7 或更高版本，那你就完蛋了。

这些步骤为我修复了它：

*   您需要确保已安装 Java 6 或更低版本。
*   重新安装 Weblogic 并确保指定正确的 JDK

# wpf - 在代码中绑定来自 sqlite 的动态图像

> ID：10679127
> 
> 赞同：0
> 
> 时间：2012-05-21T03:13:46.527
> 
> 标签：wpf, sqlite, listbox

这是我的 XAML

```
<Window.Resources>
        <DataTemplate x:Key="listBoxTemplate">
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding thumb}" Height="100" Width="130" Margin="5"></Image>
                <StackPanel Orientation="Vertical" Width="247">
                    <TextBlock Text="{Binding recipeName}" Height="60" Padding="15" FontSize="16" HorizontalAlignment="Stretch" VerticalAlignment="Center"></TextBlock>
                    <TextBlock Text="{Binding cuisine}" Height="60" Padding="15" FontSize="16" HorizontalAlignment="Stretch" VerticalAlignment="Center"></TextBlock>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </Window.Resources> 
```

和我的代码：

```
conn = new SQLiteConnection(connString);
                cmd = new SQLiteCommand();
                dtSet = new DataSet();

                cmd.Connection = conn;
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "SELECT id,recipeName,cuisine,thumb FROM RECIPES";

 dataAdapter = new SQLiteDataAdapter();
            dataAdapter.SelectCommand = cmd;

            try{
                dataAdapter.Fill(dtSet,"recipes");
                listBox1.DataContext = dtSet;

            } 
```

问题是图像没有出现。假设从sqlite返回的拇指是图像文件名1.jpg，2.jpg等..那么我应该把图像放在哪里让它出现在程序中？在哪个文件夹？

我在[使用 StringFormat](https://stackoverflow.com/questions/3429851/wpf-image-source-binding-with-stringformat)和[https://stackoverflow.com/questions/3717968/button-image-source-binding-using-string-format-in-wpf](https://stackoverflow.com/questions/3717968/button-image-source-binding-using-string-format-in-wpf)绑定 WPF 图像源时遇到了确切的问题，我需要答案制作某种将图像路径转换为位图源的转换器。但作为菜鸟，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:50:14.430

通常它应该只是应用程序的根文件夹。

如果它不适合您，我建议使用 Visual Studio 中的工具来确定源字符串应该是什么。转到 XAML 设计视图，并查看图像控件的属性。在那里，您应该会在源属性旁边看到一个“...”按钮，可以让您选择图像。当我这样做时，它给了我这样的路径： */MyProject;component/Images/V__6C41.jpg*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:52:22.137

看来我需要添加一个转换器。请参考我的问题（并回答！）这里[找不到类型 imageconverter](https://stackoverflow.com/questions/10689320/the-type-imageconverter-was-not-found)

# r - 如何更改数组维度的顺序

> ID：10679131
> 
> 赞同：39
> 
> 时间：2012-05-21T03:15:25.780
> 
> 标签：r, multidimensional-array

如何重新排序 n 维数组的维度。例如，如果我有一个销售数据的三维数组，其中第一个维度表示日期，第二个维度是商店，第三个维度是部门。如何转换数组，使第一个维度是 Store，第二个维度是 Department，第三个维度是 Date。这只是一个例子。我希望有一个通用的解决方案。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-21T03:16:33.730

这样做的功能是`aperm`，来自基本包。它是将转置`t()`函数推广到多维数组。对于您的示例，您可以按如下方式调用它：

```
new.data <- aperm(old.data, c(2,3,1)) 
```

# multithreading - 从 spawn 线程实例化一个新的 WX Python GUI

> ID：10679134
> 
> 赞同：0
> 
> 时间：2012-05-21T03:15:49.937
> 
> 标签：multithreading, wxpython, python-2.7

我有运行 WX Python GUI 的主线程。主 GUI 为用户提供了一个图形界面来选择脚本（映射到 python 函数）和一个“开始”按钮，它会产生第二个线程（线程 #2）来执行选定的脚本。我遇到的问题是我无法弹出一个新的 WX GUI (GUI2) 并让用户能够输入数据。

```
# Function that gets invoked by Thread #2
def scriptFunction():
  # Code to instantiate GUI2; GUI2 contains wx.TextCtrl fields and a 'Done' button;
  # When 'Done' button is clicked, data entered in fields are process and second GUI is destroyed
  gui2Frame = Gui2Frame(None, "Enter Data Gui")  
  gui2Frame.Show(True)

  # This is where I need help. Cannot figure out how to pend for user input;
  # In this example; my 'Done' button sets the Event flag
  verifyEvent = threading.Event()
  verifyEvent.wait(10)

  # Process entered data time
  processData() 
```

目前，这种方法将 GUI2 锁定 10 秒。这是有道理的，因为生成的线程被锁定了。使用 time.sleep() 实现 while 循环也是如此。我研究了生成第三个线程，只是为了处理 GUI2，但我又回到不知道如何保持 GUI2 处于活动状态。有什么建议么？另外，请不要建议将多线程架构更改为一个线程；谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:40:50.680

一个程序中不能有两个 wxPython 主循环。您确实只需要使用第一个 wxPython 程序的主线程。如果要生成另一个应用程序，请使用子进程。像这样的东西应该工作：

```
import subprocess
subprocess.Popen("python path/to/myscript.py") 
```

# sql - 此 DELETE 程序有任何错误。我们可以这样写还是有更好的方法来编写相同的proc

> ID：10679135
> 
> 赞同：-1
> 
> 时间：2012-05-21T03:15:56.523
> 
> 标签：sql, oracle, plsql

在这里，我们只是从主表和子表中删除 90 天历史记录之前的记录。假设表有超过 20k 条记录要删除。在这里，我为每 5k 条记录添加了提交。如果我在这里错了，请告诉我？

```
create or replace Procedure PURGE_CLE_ALL_STATUS  ( days_in IN number ) 
IS 

       reccount  NUMBER  := 0;

       CURSOR del_record_cur IS

    SELECT EXCEPTIONID   FROM   EXCEPTIONREC
         WHERE  trunc(TIME_STAMP) < trunc(sysdate - days_in );

BEGIN
       FOR rec IN del_record_cur LOOP

      delete from EXCEPTIONRECALTKEY   -- child table 
          where EXCEPTIONID =rec.EXCEPTIONID ;

      delete from EXCEPTIONREC -- master table
          where EXCEPTIONID =rec.EXCEPTIONID;  

         reccount := reccount + 1;

         IF (reccount >= 1000) THEN
           COMMIT;
           count := 0;
         END IF;
       commit;
       END LOOP;
       COMMIT;
       DBMS_OUTPUT.PUT_LINE('Deleted ' || total || ' records from <OWNER>.<TABLE_NAME>.');
END;
/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T03:24:57.360

如果你问代码是否可以变得更高效，最高效的方法总是在 SQL 中做事

```
BEGIN
  DELETE FROM EXCEPTIONRECALTKEY child
   WHERE EXISTS( SELECT 1
                   FROM EXCEPTIONREC parent
                  WHERE child.EXCEPTIONID = parent.EXCEPTIONID 
                    AND parent.timestamp <= trunc(sysdate - days_in ) );
  DELETE FROM EXCEPTIONREC 
   WHERE timestamp <= trunc(sysdate - days_in );
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:29:11.407

如果您有一个从 EXCEPTIONRECALTKEY 到 EXCEPTIONREC 定义的外键，那么您可以对连接两个表的内联视图发出删除操作，对父表指定 WHERE 子句并导致从子表中删除记录。

因此：

```
BEGIN
  delete from (
    select
      p.EXCEPTIONID p_EXCEPTIONID,
      c.EXCEPTIONID c_EXCEPTIONID,
      c.TIME_STAMP  c_TIME_STAMP
    from
      EXCEPTIONREC       p,
      EXCEPTIONRECALTKEY c
    where
      p.EXCEPTIONID = c.EXCEPTIONID and
      c.TIMESTMAP < trunc(sysdate - days_in ));

  delete from
    EXCEPTIONREC
  where
    TIMESTMAP < trunc(sysdate - days_in );  
end;
/ 
```

# php - 如何删除 Magento 中所有产品的所有自定义选项

> ID：10679137
> 
> 赞同：4
> 
> 时间：2012-05-21T03:16:07.600
> 
> 标签：php, magento

我需要从所有 magento 产品中删除所有自定义选项。我有大约 4k 个产品。并且都有自定义选项。现在我们不需要自定义选项。所以我们需要删除所有。是否有任何简单的解决方案，好像我可以轻松删除所有自定义选项

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T07:43:45.220

最好不要直接执行数据库查询，而是使用 magento 模型：

```
<?php

require_once 'app/Mage.php';

Mage::init();

Mage::getModel('catalog/product_option')->getCollection()->walk('delete'); 
```

这 - 将 - 使用多个查询来删除您的产品选项，但对于 4000 个产品来说这应该不是什么大问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T04:35:12.417

如果您需要一次从所有产品中删除所有自定义选项，则可以在数据库中执行以下 SQL 查询：

```
delete from catalog_product_option 
```

但请务必先备份您的数据库。你是不是有这样的意思。

# drupal - Drupal 7：带视图的导航菜单？

> ID：10679138
> 
> 赞同：0
> 
> 时间：2012-05-21T03:16:16.917
> 
> 标签：drupal, drupal-7, drupal-views, drupal-modules

我想制作一个包含多个节点（每个节点的内容类型相同）的长页面。页面顶部应该有导航，可以直接跳转到长页面的所需点，有点像这里： http: [//www.apple.com/macbookpro/features.html](http://www.apple.com/macbookpro/features.html)（导航在图片）

我使用 Views 模块从内容中组装出一个长页面，并且为了导航，我尝试使用相同内容的另一个 View，仅作为一个块插入页面顶部。我将此视图设置为显示字段网格；这看起来不错的样子。只有我不知道如何使网格中的每个单元格成为同一页面上内容的链接。

我尝试修改视图模板，但 $rows 变量原来是一个已经组装好的 html 的字符串。也许我可以修改内容模板，并插入某种条件，根据当前视图所在页面的哪个部分来改变内容的外观，但我也不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:04:51.267

在视图中，编辑选定的字段，那里有一些选项可将字段配置为您可能想要的超链接。您也可以让字段直接链接到节点，有一个选项。干杯

# css - 任意数量窗格的 CSS 动画过渡效果

> ID：10679141
> 
> 赞同：0
> 
> 时间：2012-05-21T03:17:00.973
> 
> 标签：css, animation, user-interface, keyframe, panes

我正在制作一个包含多个窗格的网站，以及一个用于在它们之间切换的导航菜单。我想使用 CSS 中的过渡效果为窗格切换设置动画。窗格是 <li> 元素：

```
<ol class="content">
    <li class="pane">This is pane 1.</li>
    <li class="pane">This is pane 2.</li>
    <li class="pane">This is pane 3.</li>
</ol> 
```

，它们并排放置，因此我正在为内容的 margin-left 属性设置动画，以使窗格左右滚动，进出视图：

```
@-webkit-keyframes scroll1to2 {
   from {margin-left:    0%;}
   to   {margin-left: -100%;}
}

@-webkit-keyframes scroll2to3 {
   from {margin-left: -100%;}
   to   {margin-left: -200%;}
}

@-webkit-keyframes scroll1to3 {
   from {margin-left:    0%;}
   to   {margin-left: -200%;}
} 
```

，当然可以反过来。问题是，对于超过 3 个窗格，此过程会很笨重（代码的长度随着窗格的数量呈二次方增长）。

那么......你将如何为任意数量的窗格编写这个？

编辑：我知道我可以使用 javascript 来生成 CSS 代码，但我希望有一种我错过的更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:57:09.580

我不知道您是否已经死定了为此使用关键帧 - 虽然关键帧允许更高级的动画，但您的特定滑动示例可以通过简单的 css 过渡来完成。

```
.content{
  -webkit-transition:margin-left 1s ease-in-out;
  transition:margin-left 1s ease-in-out;
} 
```

该规则表示，只要属性更改，内容块将使用 1 秒的缓动过渡`margin-left`，您可以在用户导航时在 javascript 中执行此操作。

[您可以在webkit 博客](http://www.webkit.org/blog/138/css-animation/)上找到更多关于 css 转换的信息。

# c++ - 将 * 传递给类的 C++

> ID：10679146
> 
> 赞同：1
> 
> 时间：2012-05-21T03:17:55.147
> 
> 标签：c++, class, pointers, parameter-passing, dereference

我正在尝试从链式数组哈希表中检索项目。检索函数属于一个类表，其中哈希表是其成员。该表是客户端类的成员。这是一个类，所以我们可以使用的东西非常有限（例如......没有字符串，只有字符数组）。我想从客户端传入一个项目数组以及项目的名称或我想从中生成哈希键的项目的特征。

...调用检索函数的 main 的一部分（传入的 int 是一个标志，它确定我按名称或按效果搜索的天气）

```
 program.reference.retrieve("Abecean Longfin", program.client_item, 1);

    cout << program.client_list[0].name;

    getchar();
    return 0;
} 
```

……

项目.h

```
#include <iostream>
#include <fstream>
#include <cctype>
#include <cstdlib>
#include <cstring>
#include <cmath>

using namespace std;

const int ASIZE = 30;
const int SIZE = 92;
const int HNSIZE = 41;
const int HESIZE = 17;

struct item
{
    item();
    ~item();
    char * name;
    char * effect1;
    char * effect2;
    char * effect3;
    char * effect4;
    int count;
    //int keygen(int,int);
    /*int name_key;
    int ef1_key;
    int ef2_key;
    int ef3_key;
    int ef4_key;*/
}; 
```

.... 检索功能

```
int table::retrieve(char item_in[],item*item_list, int name_flag)
{
    int i = 0;
    if(name_flag)
    {
        node * temp;
        int key = keygen(item_in,HNSIZE);
        if(!(name_table.ht[key]))
        return 0;
        else
        temp = name_table.ht[key];
        while(temp)
        {
            if(!strcmp(item_in,temp->ingredient->name))
            item_list[i] = *temp->ingredient;
            ++i;
            temp = temp->next;
        }
    }
    else
    {
        node * temp;
        int key = keygen(item_in,HESIZE);
        if(!(ef1_table.ht[key]) && !(ef2_table.ht[key]) && !(ef3_table.ht[key]) && !(ef4_table.ht[key]))
        return 0;
        else
        {
            temp = ef1_table.ht[key];
            while(temp)
            {
                if(!strcmp(item_in,temp->ingredient->effect1))
                item_list[i] = *temp->ingredient;
                ++i;
                temp = temp->next;
            }
            temp = ef2_table.ht[key];
            while(temp)
            {
                if(!strcmp(item_in,temp->ingredient->effect2))
                item_list[i] = *temp->ingredient;
                ++i;
                temp = temp->next;
            }
            temp = ef3_table.ht[key];
            while(temp)
            {
                if(!strcmp(item_in,temp->ingredient->effect3))
                item_list[i] = *temp->ingredient;
                ++i;
                temp = temp->next;
            }
            temp = ef4_table.ht[key];
            while(temp)
            {
                if(!strcmp(item_in,temp->ingredient->effect4))
                item_list[i] = *temp->ingredient;
                ++i;
                temp = temp->next;
            }
        }
    }
} 
```

……

客户端.h

```
#include "table.h"

struct client
{
    client();
    int fill_list(int,int,int);
    int copy(char*,char*,int);
    int display(char*, int, item*);
    item * client_list;
    table reference;
    table inventory;
    item client_item;
}; 
```

……

表.h

```
#include "hash.h"

class table
{
public:
    table();
    ~table();
    int fill(item*);
    int insert(item&, nHash&);
    int insert(item&, eHash&, int);
    int retrieve(char*,item*,int);
    int remove(int,item&);
    int remove(int);
    int check_hash(int,int,int);
    int keygen(char*, int);
    int from_list(int, item&);
    int into_list(int, item&);
    item* get_list();

private:
    item * item_list;
    nHash name_table;
    eHash ef1_table;
    eHash ef2_table;
    eHash ef3_table;
    eHash ef4_table;
}; 
```

……

注册机功能

```
int table::keygen(char*input, int hash_size)
{
    if(input)
    {
        int key = 0;
        int i = 0;
        while(input[i])
        {
            key = key + input[i] * 101 * input[i++];
        }

        return key%hash_size;
    }
    else
        return -1;
} 
```

.... 添加了 client_item 初始化

```
client::client()
{
    client_item.name = new char[ASIZE];
    client_item.effect1 = new char[ASIZE];
    client_item.effect2 = new char[ASIZE];
    client_item.effect3 = new char[ASIZE];
    client_item.effect4 = new char[ASIZE];
    client_list = NULL;
} 
```

我确定我还需要包括其他内容。但是，我认为这会让事情变得顺利。我对编程和 C++ 还是很陌生。

我遇到的问题是当我尝试计算名称时取消引用 NULL 指针。至少我认为这就是“访问冲突读取位置 0x00000000”是什么。

# c - 带有 C 运行错误的 Eclipse CDT

> ID：10679148
> 
> 赞同：0
> 
> 时间：2012-05-21T03:18:12.540
> 
> 标签：c, eclipse

所以我决定安装 Eclipse 用于我的 C 编程。我想编写一个小程序，只是为了测试一切是否正常，但似乎 Eclipse 不允许我扫描任何 C 输入。对于任何其他不需要输入的程序，它可以正常工作，但由于某种原因，Eclipse 似乎不会运行任何需要使用输入的程序。我通过运行-> 运行方式-> 本地 C/C++ 应用程序来运行程序。我也试过通过命令行运行这些程序，结果很好。有任何想法吗？

代码：

```
#include <stdio.h>

int main(void) {
    int length, width, height, volume, weight;

    printf("Enter the length of box: ");
    scanf("%d", &length);
    printf("Enter the height of box: ");
    scanf("%d", &height);
    printf("Enter the width of box: ");
    scanf("%d", &width);
    volume = length * width * height;
    weight = (volume+165)/166;

    printf("Volume(cubic inches) %d\n", volume);
    printf("Dimensional weight(pounds): %d\n", weight);

    return 0;
} 
```

已安装的软件包： ![在此处输入图像描述](../Images/bb8819cc26606f3f3b2045d875358fcd.png)

在我尝试运行这些程序后，控制台窗口中什么也没有出现，但在我按下停止后，出现的是： ![在此处输入图像描述](../Images/d62867654094682592ef7dda3e8188bc.png)

这是一张更好的照片：http: [//i.imgur.com/zgV1r.png](https://i.imgur.com/zgV1r.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:34:33.243

尝试按照[此处](http://xibaiyu.wordpress.com/2011/09/21/eclipseindigo-with-cdt-no-output-on-console/)`fflush(stdout)`的建议在每次 printf() 调用之后添加一个。

这里有更多关于[为什么需要 fflush 的](http://www.eclipse.org/forums/index.php/t/156519/)讨论。

# nokia - 诺基亚 S40 应用开发

> ID：10679152
> 
> 赞同：5
> 
> 时间：2012-05-21T03:18:23.180
> 
> 标签：nokia, nokia-s40

我是一名**Android 开发人员**。我想为我的**诺基亚 c2-00**手机开发应用程序。我对诺基亚应用程序一无所知，但我对做应用程序**很感兴趣。**所以朋友们可以指导我从哪里开始阅读应用程序开发，也可以建议我重要的**源代码**链接。

朋友让我澄清一下

```
1) In which language apps will be developed.
2) which IDE can be used for application development.
3) which database can be used to store data. 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T15:59:42.337

请在此处查看 Series 40 应用程序开发： http: [//www.developer.nokia.com/Develop/Series_40/](https://web.archive.org/web/20130509001155/http://www.developer.nokia.com/Develop/Series_40/)

以下是关于 Series 40 Java 开发工具，例如*Eclipse*： http: [//www.developer.nokia.com/Develop/Java/Tools/](http://www.developer.nokia.com/Develop/Java/Tools/)

还可以查看诺基亚开发者讨论板和 Wiki 以获取更多信息

我希望这能带你前进！

**编辑：**

至此，开发者资源已移至：http: [//developers.apps.opera.com/](http://developers.apps.opera.com/)

虽然起初它看起来是针对“Nokia Asha”和“Nokia X”的，但您仍然可以找到“经典”内容，例如：

*   40 系列 SDK
*   适用于 Java 的诺基亚 SDK 1.1
*   适用于 Java 的诺基亚 SDK 2.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:56:05.607

[此页面](http://www.developer.nokia.com/Develop/Java/Getting_started/)可以提供您可能需要的所有入门信息

# c - 为什么 -freciprocal-math 在 GCC 中不安全？

> ID：10679154
> 
> 赞同：12
> 
> 时间：2012-05-21T03:18:33.780
> 
> 标签：c, math, gcc, compiler-construction, precision

`-freciprocal-math`在 GCC 中更改以下代码

```
double a = b / c; 
```

至

```
 double tmp = 1/c;
 double a = b * tmp; 
```

在 GCC 手册中，据说这样的优化是不安全的，并且不符合 IEEE 标准。但我想不出一个例子。你能举个例子吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T03:32:58.000

除以 10 和乘以 0.1000000000000000055511151231257827021181583404541015625 不是一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:21:07.907

也许我正在考虑一个不同的编译器标志，但是......

一些处理器具有计算近似倒数的指令。想到 x86 的 RCPSS（SIMD 指令）；它的相对误差为 1.5 ∗ 2^−12。使用该标志可能允许编译器选择近似倒数指令，根据您的应用程序，这可能不安全。

希望这可以帮助。

# c# - 不给出“出局”的论点

> ID：10679158
> 
> 赞同：3
> 
> 时间：2012-05-21T03:19:27.887
> 
> 标签：c#

可以将默认值分配给函数的普通参数，例如

```
bool SomeFunction(int arg1 = 3, int arg2 = 4) 
```

可以通过以下任何一种方式调用。

```
bool val = SomeFunction();
bool val = SomeFunction(6);
bool val = SomeFunction(6,8); 
```

有没有办法做类似的事情（除了创建一个未使用的变量）这样

```
bool SomeOtherFunction(int arg1, out int argOut) 
```

可以通过以下任一方式调用吗？

```
int outarg;
bool val = SomeOtherFunction(4,outarg);
bool val = SomeOtherFunction(4); 
```

这是否可能，或者如果没有，有什么好的解决方法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T03:22:54.090

一个好的解决方法是：

```
bool SomeOtherFunction(int arg1, out int argOut){ ... }

bool SomeOtherFunction(int arg1)
{
    int dummyArgOut;
    return SomeOtherFunction(arg1, dummyArgOut);
} 
```

我什至会说它是**最好**的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:24:19.593

是的，使用不带第二个参数的相同方法的重载版本：

```
public bool SomeOtherFunction(int arg1)
{
    int ignore;
    return SomeOtherFunction(arg1, out ignore);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:23:26.240

不，ref 和 out 参数不能有默认值。解决方法将取决于您想要实现的具体目标。一种方法是将其包装到另一个方法（或重载）中并从该方法传递 out 变量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T03:26:32.537

C#中没有默认参数，要做类似的事情，你应该实现重载方法。或者你可以使用[这个](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)，你必须自己处理参数

# delphi - 为什么 TIdIRC 不能连接到频道？有没有更好的组件？

> ID：10679159
> 
> 赞同：0
> 
> 时间：2012-05-21T03:19:38.263
> 
> 标签：delphi, client, irc, indy, channel

我一直在为谷歌的垃圾文档而苦苦挣扎，即使它连接到服务器很好，也无法让程序加入频道。（它说连接到服务器）

```
//On Form Make
procedure TForm2.FormCreate(Sender: TObject);
  begin
   IdIRC1.Connect();
  end;

//on connected
procedure TForm2.IdIRC1Connected(Sender: TObject);
  begin
   ShowMessage('Connected to server');
   IdIRC1.Join('#TheChannel', 'password');
  end; 
```

一旦我关闭表单，就会出现一个错误：

```
Project raised exception class EIdException with message 'Not Connected' 
```

此外，一旦连接，我会使用哪些功能来谈论频道/检查输入？Delphi 应用程序还有哪些其他 IRC 连接选项（组件）？

任何帮助都将不胜感激，谷歌对此一无所知。我想要的只是能够连接/检查频道聊天消息并在聊天中交谈；通过 IRC 的简单字符串 IO...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:56:13.767

猜猜你没有满足所有的服务器要求。只是 IdIrc.Connect 是不够的，这对我有用：

```
FIRC.Host:= 'irc.freenode.org';
FIRC.Port := 6667;
FIRC.Username:= 'SapoIndy';
FIRC.Nickname:= 'SapoIndy';
FIRC.RealName:= 'Fabio Gomes';
FIRC.Connect;

FIRC.Join('#TheChannel'); 
```

要弄清楚发生了什么，您需要获取一些事件的输出，我已经实现了这些：

```
FIRC.OnStatus:= @Status;
FIRC.OnNotice:= @Notice;
FIRC.OnMOTD:= @MOTD; 
```

搞定一些事件，你应该弄清楚服务器告诉你什么，不要反复试验。

关于发送和接收消息，我前段时间已经实现了一些，这里是项目，它是使用 Lazarus 制作的。

[https://bitbucket.org/fabioxgn/irc/src/b510d73e553d/main.pas](https://bitbucket.org/fabioxgn/irc/src/b510d73e553d/main.pas)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:26:53.343

请勿`Join()`在`OnConnected`活动中致电。该事件仅意味着建立了底层套接字连接。 仍在运行，并且在触发事件`Connect()`时尚未真正登录到 IRC 服务器。`OnConnected`等到`Connect()`退出再发出任何命令：

```
procedure TForm2.FormCreate(Sender: TObject); 
begin 
  IdIRC1.Connect; 
  ShowMessage('Connected to server'); 
  IdIRC1.Join('#TheChannel', 'password'); 
end; 
```

# c# - 为什么我们需要在线程安全的调用块中直接调用？

> ID：10679161
> 
> 赞同：1
> 
> 时间：2012-05-21T03:19:51.253
> 
> 标签：c#, .net, thread-safety

[请参阅MSDN](http://msdn.microsoft.com/en-us/library/ms171728.aspx)上的线程安全调用教程，看看以下语句：

```
// InvokeRequired required compares the thread ID of the
// calling thread to the thread ID of the creating thread.
// If these threads are different, it returns true.
if (this.textBox1.InvokeRequired) { 
    SetTextCallback d = new SetTextCallback(SetText);
    this.Invoke(d, new object[] { text });
} else {
    this.textBox1.Text = text;
} 
```

当然，我在我的代码中已经多次使用它，并且理解了一点为什么要使用它。但是我仍然对这些陈述有一些不清楚的问题，所以请任何人帮助我找出它们。

问题是：

1.  仅使用 if 正文中的语句，代码是否可以正确运行？我试过了，如果控件没有完全初始化，它似乎只是导致问题。不知道还有没有问题？
2.  通过调用程序直接调用方法（else body）实例有哪些优势？它是否节省资源（CPU，RAM）或其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:29:25.243

当然，您总是可以使用 Invoker 进行调用，但是：

*   它通常会使代码更冗长且难以阅读。
*   它的效率较低，因为需要处理几个额外的层（设置委托、调用调度程序等）。

如果您确定您将始终在 GUI 线程上，您可以忽略上述检查并直接调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T05:10:36.027

1.  如果你总是只运行语句的第一部分`if`，它总是没问题的，因为`Invoke`已经检查你是否在 UI 线程上。
    1.  您不想这样做的原因是`Invoke`，即使您已经在正确的线程上，也必须做很多工作才能运行您的方法。下面是它要做的（摘自 Control.cs 的源代码）：
        *   通过父控制链的向上遍历找到编组控制
        *   检查控件是否为 ActiveX 控件，如果是，则要求非托管代码权限
        *   确定是否需要异步调用调用以避免潜在的死锁
        *   获取调用线程的执行上下文的副本，以便在最终调用委托时使用相同的安全权限
        *   将方法调用排入队列，然后发布一条消息以调用该方法，然后等待（如果是同步的）直到它完成

在从 UI 线程直接调用期间，不需要第二个分支中的任何步骤，因为所有先决条件都已经得到保证，所以它肯定会更快，尽管公平地说，除非你非常频繁地更新控件，你'不太可能注意到任何差异。

# ruby - Ruby：获取数组和字符串之间每个匹配项的索引

> ID：10679168
> 
> 赞同：2
> 
> 时间：2012-05-21T03:20:40.320
> 
> 标签：ruby

我有一个字符串数组，如下所示：

```
["Greater New York City Area", "Saudi Arabia", "Bahrain", "Greater New York City Area", "Toronto Canada Area", "Nigeria", "Toronto Canada Area", "United Arab Emirates", "Toronto Canada Area", "Egypt", "Egypt", "Bangladesh", "Gurgaon India", "United Arab Emirates", "New Delhi Area India", "Saudi Arabia", "United Arab Emirates", "United Arab Emirates", "Toronto Canada Area", "Pakistan", "New Delhi Area India", "New Delhi Area India", "United Arab Emirates", "Mumbai Area India", "New Delhi Area India"] 
```

我正在尝试将字符串*“Greater New York City Area”* 与该数组中的每个元素进行匹配，并返回另一个包含每个匹配项*索引的数组。*

对于上面的示例，答案应该是 [0,3]。

我可以通过手动迭代每个元素来做到这一点，但这似乎不是正确的方法。

我需要类似的东西`.find_all`，但它需要返回索引而不是值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T03:29:00.357

试试这个：

```
a = ["Greater New York City Area", "Saudi Arabia", "Bahrain", "Greater New York City Area", "Toronto Canada Area", "Nigeria", "Toronto Canada Area", "United Arab Emirates", "Toronto Canada Area", "Egypt", "Egypt", "Bangladesh", "Gurgaon India", "United Arab Emirates", "New Delhi Area India", "Saudi Arabia", "United Arab Emirates", "United Arab Emirates", "Toronto Canada Area", "Pakistan", "New Delhi Area India", "New Delhi Area India", "United Arab Emirates", "Mumbai Area India", "New Delhi Area India"]

results_with_index = a.each_with_index.select { |i, idx| i =~ /Greater New York City Area/} # [["Greater New York City Area", 0], ["Greater New York City Area", 3]] 

results_with_index.map! { |i| i[1] } # [0,3] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T03:28:42.303

使用“each_with_index”方法。

# ruby-on-rails - Rails 3 渲染部分而不重新加载图像

> ID：10679171
> 
> 赞同：1
> 
> 时间：2012-05-21T03:21:28.467
> 
> 标签：ruby-on-rails, backbone.js, pjax

我有一个呈现部分的视图“edit.html.erb”。

```
<div id="exerciseslist"><%= render 'exerciseslist' %></div> 
```

在“edit.js.erb”中，我有以下行，每次更新时都会重新加载部分内容。

```
$('#exerciseslist').html('<%= escape_javascript(render("exerciseslist")) %>'); 
```

部分是一个包含一堆项目的表格，包括每个项目的图像和一些按钮。局部变化的只是按钮。如果提交成功，按钮会切换状态，表明它已被添加。

它工作正常，问题是我不喜欢图像在请求发生时闪烁的方式，这些项目也在一个可滚动的部分内，每次都会失去它的状态。

有没有一种很好的方法来加载按钮的状态而不渲染完整的部分？或者有没有一种简单的方法来阻止客户端每次请求图像？

我做了一些阅读并找到了 pjax 和backbone.js，它们中的任何一个都是好方法还是有更简单的rails 方法来做到这一点？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:17:08.840

如果没有看到代码，很难确定，但我认为仅使用 Rails 就可以完成。您可以编写一个 AJAX 请求来处理新数据的提交并在成功时，让回调更改按钮状态，而不是重新加载部分，而不是在提交时重新呈现`exerciseslist`部分。

# sencha-touch - Sencha Touch 2 在 Controller 中设置标签

> ID：10679175
> 
> 赞同：1
> 
> 时间：2012-05-21T03:22:31.360
> 
> 标签：sencha-touch, sencha-touch-2

我是 Sencha Touch 2 的 MVC 结构的新手。

在我看来，我有一个标签如下：

> { xtype: 'label', itemId: 'title', html: 'title' }

在我的控制器中，如何设置此标签的值？

目前我的控制器（处理教程示例）：

> Ext.define("NotesApp.controller.Notes", {
> 
> ```
> extend: "Ext.app.Controller",
> config: {
>     refs: {
>         // We're going to lookup our views by xtype.
>         noteView: "noteview",
>         noteEditorView: "noteeditorview",
>         notesList: "#notesList"
>     },
>     control: {
>         noteView: {
>             // The commands fired by the notes list container.
>             noteNextCommand: "onNoteNextCommand",
>             noteAnswerCommand: "onNoteAnswerCommand"
>         },
>         noteEditorView: {
>             // The commands fired by the note editor.
>             saveNoteCommand: "onSaveNoteCommand",
>             deleteNoteCommand: "onDeleteNoteCommand",
>             backToHomeCommand: "onBackToHomeCommand"
>         }
> 
>     }
> },
> 
> onNoteNextCommand: function () {
>        var noteView = this.getNoteView();           
>        console.log("loaded view"); 
>        //set label here                  
> },
> // Base Class functions.
> launch: function () {
>     this.callParent(arguments);
>     var notesStore = Ext.getStore("Notes");
>     notesStore.load();
>     console.log("launch");
> },
> init: function () {
>     this.callParent(arguments);
>     console.log("init");
> } }); 
> ```

完整的查看代码：

> Ext.define("NotesApp.view.Note", { extend: "Ext.Container", 别名: "widget.noteview",
> 
> ```
> config: {
>     layout: {
>         type: 'fit'
>     },
>     items: [
>             {
>             xtype: "toolbar",
>             title: "Random Question",
>             docked: "top",
>             items: [
>                     { xtype: 'spacer' },
>                     {
>                         xtype: "button",
>                         text: 'List',
>                         ui: 'action',
>                         itemId: "list"
>                     }
>                     ]
>             },
>             {                
>                     xtype: "label",
>                     html: 'question',                        
>                     itemId: "question"                        
>             },
>             {                
>                     xtype: "label",
>                     html: 'answer',                        
>                     itemId: "answer"                        
>             }
>             ],
>     listeners: [{
>                 delegate: "#list",
>                 event: "tap",
>                 fn: "onListTap"
>                 }, 
>                 {
>                 delegate: "#question",
>                 event: "tap",
>                 fn: "onQuestionTap"
>                 },
>                 {
>                 delegate: "#answer",
>                 event: "tap",
>                 fn: "onAnswerTap"
>                 }]
> },    
> onListTap: function () {
>     console.log("list");
>     this.fireEvent("showList", this);
> },
> onQuestionTap: function () {
>     console.log("noteAnswer");
>     this.fireEvent('noteAnswer', this);
> },
> onAnswerTap: function () {
>     console.log("noteNext");
>     this.fireEvent('noteNext', this);
> } }); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:26:30.493

您需要在控制器中添加对标签的引用：

```
config: {
  refs: {
    yourlabel : #YOUR_LABEL_ID'
  }
  …
} 
```

然后在您的控制器中，您可以通过调用访问标签`this.getYourlabel();`

所以，为了改变标题，你需要做（在你的控制器中的任何地方）

```
this.getYourlabel().setHtml('Label'); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T04:36:51.353

给你的标签一些`id`属性值

```
{                
  xtype: "label",
  html: 'answer',                        
  id: "answerLabel"                        
} 
```

然后在你的`controller`.

```
.....
..... // Controller code ..
refs: {
     answerLabel: '#answerLabel',
    },
control: {
     answerLabel: {
       tap: 'answerLabelFn'
     }
}
.....
.....
answerLabelFn : function() {
      // Your Label tap handler code...
} 
```

# iphone - 在我的自定义 App 中使用外部硬件音乐控件

> ID：10679178
> 
> 赞同：0
> 
> 时间：2012-05-21T03:23:18.643
> 
> 标签：iphone, hardware, external, externalinterface

我正在寻找一种方法来检测按下外部音乐控制按钮的按钮，我已经通过蓝牙集成在我的汽车中。是否可以在我的应用程序中使用它们来播放和停止音乐？

非常感谢！马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:02:02.083

这些控件可能正在使用远程控制术语（iAP（iPod 附件协议）的一部分）与您的 iPhone 通话。有关这方面的文档，您需要加入 Apple 的 MFi 计划，该计划是与普通开发者帐户分开的帐户，并且很难获得批准。

我不确定是否可以让您的应用程序与这些设备通信，因为您需要专门在设备本身上启用应用程序通信，并且您需要处理一个身份验证方案。

# java - 如何在 java swing 应用程序中打开水晶报表？

> ID：10679179
> 
> 赞同：6
> 
> 时间：2012-05-21T03:23:25.103
> 
> 标签：java, swing, crystal-reports, crystal-reports-xi

我有这个代码

```
import com.crystaldecisions.reports.sdk.ReportClientDocument;
...

ReportClientDocument rpt =  new ReportClientDocument();
    rpt.open(reportPath+fileName, 0);
    rpt.getDatabaseController().logon(DBConnect.getUsername(), DBConnect.getPassword());
    Tables tables = rpt.getDatabaseController().getDatabase().getTables();

    for(int i=0; i< tables.size(); i++){
        System.out.print(i);
        ITable table = tables.getTable(i);

        IConnectionInfo connInfo = table.getConnectionInfo();

        PropertyBag innerProp = connInfo.getAttributes();
        innerProp.clear();

        PropertyBag propertyBag = new PropertyBag();
        propertyBag.put("Server Type", "JDBC (JNDI)");
        propertyBag.put("Database DLL", "crdb_jdbc.dll");
        propertyBag.put("Connection String", DBConnect.getConnectionString());
        propertyBag.put("Database Class Name", "com.mysql.jdbc.Driver");
        propertyBag.put("Use JDBC", "true");
        propertyBag.put("Server Name", DBConnect.getServer());
        propertyBag.put("Generic JDBC Driver Behavior", "No");
        propertyBag.put("URI", "!com.mysql.jdbc.Driver!jdbc:mysql://"+DBConnect.getServer()+":"+DBConnect.getPort()+"/"+DBConnect.getDatabase()+"!ServerType=29!QuoteChar=`");

        connInfo.setAttributes(propertyBag);
        connInfo.setKind(ConnectionInfoKind.SQL);

        table.setConnectionInfo(connInfo);
        rpt.getDatabaseController().setTableLocation(table, tables.getTable(i)); 
```

我试图做的是打开一个报告并将连接信息传递给该报告，以便我可以动态更改报告的数据库，但由于某种原因它无法正常工作，并且报告仍然从数据库中生成信息最初设置。有人可以告诉我我做错了什么吗？这是一个摇摆应用程序，我正在使用水晶报表 XI。顺便说一句，我使用 com.crystaldecisions.reports.sdk.ReportClientDocument 而不是 com.crystaldecisions.sdk.occa.report.application.ReportClientDocument 因为当我使用另一个时，我得到一个找不到服务器错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:54:05.260

要在运行时切换连接，您可以使用以下命令：

```
IConnectionInfo oldConnInfo = new ConnectionInfo();
IConnectionInfo newConnInfo = new ConnectionInfo();

// If this connection needed parameters, we would use this field.   
com.crystaldecisions.sdk.occa.report.data.Fields pFields = null;

try{
    // Assign the old Connection info to the reports current info
    //DatabaseController dbController = rptClient.getDatabaseController();
    oldConnInfo=dbController.getConnectionInfos(null).getConnectionInfo(0);
    com.crystaldecisions.sdk.occa.report.lib.PropertyBag boPropertyBag1 = new com.crystaldecisions.sdk.occa.report.lib.PropertyBag();
    boPropertyBag1.put("JDBC Connection String","...");
    boPropertyBag1.put("Server Type","...");
    boPropertyBag1.put("Database Type","...");
    boPropertyBag1.put("Database Class Name","...");
    boPropertyBag1.put("Use JDBC","...");
    boPropertyBag1.put("Connection URL","...");
    boPropertyBag1.put("Database DLL","...");
    // Assign the properties to the connection info
    newConnInfo.setAttributes(boPropertyBag1);
    // Set the DB Username and Pwd
    newConnInfo.setUserName("...");
    newConnInfo.setPassword("...");    
    // The Kind of connectionInfos is SQL
    newConnInfo.setKind(ConnectionInfoKind.SQL);

    // set the parameters to replace.
    // The 4 options are:
    // _doNotVerifyDB 
    // _ignoreCurrentTableQualifiers 
    // _mapFieldByRowsetPosition 
    // _useDefault  
    int replaceParams = DBOptions._ignoreCurrentTableQualifiers + DBOptions._doNotVerifyDB;
    // Now replace the connections
    dbController.replaceConnection(oldConnInfo, newConnInfo, pFields, replaceParams);
    }catch(ReportSDKException rse){
    ...
    } 
```

在上面的代码片段中传递适当的值。抱歉，这使用了 com.crystaldecisions.sdk.occa.report API。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:38:05.053

[您可以在此处](http://www.businessobjects.com/campaigns/forms/downloads/crystal/eclipse/datasave.asp)使用 eclipse 版本进行水晶报表开发。从那里您可以下载 eclipse 的插件。

[您可以在此处](http://www.businessobjects.com/campaigns/forms/downloads/crystal/eclipse/datasave.asp)找到使用 Java 进行水晶报表开发的一个很好的示例

您可以在[此处](http://www.javathinking.com/2011/09/using-the-crystal-reports-java-api-to-generate-pdf/)找到与水晶报表相关的答案，其中说明了有关使用 Java 开发水晶报表的所有必要信息。

# ruby-on-rails - ruby mailman 从电子邮件正文中删除标题

> ID：10679181
> 
> 赞同：2
> 
> 时间：2012-05-21T03:23:35.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, email-headers, mailman-gem

我正在尝试在我的 RoR 项目中显示电子邮件正文。

```
class IncomingMail
  def initialize(message, params)
    if person = Person.find_by_email(message.from)
      changeMessage = Message.where({person_id: person.id})

      #message = message.subject.force_encoding("UTF-8")

      message = message.body.encoded

      changeMessage.first.text = message
      changeMessage.first.backInMinutes = 0
      changeMessage.first.showText = 1
      changeMessage.first.doNotDisturb = 0
      changeMessage.first.save
    end
  end 
```

但我也得到了电子邮件标题

```
> --e89a8ff1c0465030f204c082e054 Date: Mon, 21 May 2012 04:45:12 +0200 Mime-Version: 1.0 Content-Type: text/plain; charset=ISO-8859-1
> Content-Transfer-Encoding: 7bit Content-ID:
> <4fb9ac38c71d2_1e1343dd8042105b@ubuntu.mail> Text of the mail 
```

如何删除标题？

主题是这样的

```
message = message.subject.force_encoding("UTF-8") 
```

但与身体无关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T22:56:29.370

我找到了解决办法！！！

改变：

```
message = message.body.encoded 
```

至：

```
message = message.text_part.body.decoded 
```

删除所有标题细节，只给我电子邮件的文本。

花了很长时间，但它有效，我希望它也可以帮助其他用户

# java - 如何在类属性上添加注释并迭代属性？

> ID：10679183
> 
> 赞同：1
> 
> 时间：2012-05-21T03:24:22.627
> 
> 标签：java, reflection, annotations

我想在我的类属性上添加注释，然后通过查找注释的能力来迭代我的所有属性。

例如，我有一个像这样的类：

```
public class User {

   @Annotation1
   private int id;
   @Annotation2
   private String name;
   private int age;

   // getters and setters
} 
```

现在我希望能够遍历我的属性，并且能够知道属性上的注释（如果有的话）。

我想知道如何仅使用 java 来做到这一点，但也很好奇使用 spring、guava 或 google guice 是否会使这更容易（如果他们有任何帮助者可以更容易地做到这一点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:54:18.220

Here is an example that utilizes the (barely maintained) bean instrospection framework. It's an all Java solution that you can extend to fit your needs.

```
public class BeanProcessor {
   public static void main(String[] args) {
      try {
         final Class<?> beanClazz = BBean.class;
         BeanInfo info = Introspector.getBeanInfo(beanClazz);
         PropertyDescriptor[] propertyInfo = info.getPropertyDescriptors();
         for (final PropertyDescriptor descriptor : propertyInfo) {
            try {
               final Field field = beanClazz.getDeclaredField(descriptor
                     .getName());
               System.out.println(field);
               for (final Annotation annotation : field
                     .getDeclaredAnnotations()) {
                  System.out.println("Annotation: " + annotation);
               }

            } catch (final NoSuchFieldException nsfe) {
               // ignore these
            }
         }
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T04:22:01.627

以下是创建自己的注释的方法

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)

public @interface Annotation1 {
    public String name();
    public String value();
} 
```

定义注释后，使用问题中提到的注释，您可以使用以下反射方法获取带注释的类详细信息

```
Class aClass = User.class;
Annotation[] annotations = aClass.getAnnotations();

for(Annotation annotation : annotations){
    if(annotation instanceof Annotation1){
        Annotation1 myAnnotation = (Annotation1) annotation;
        System.out.println("name: " + myAnnotation.name());
        System.out.println("value: " + myAnnotation.value());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-18T08:27:58.143

我创建了下面的方法，它创建了一个类中所有字段的流，它是具有特定注释的超类。还有其他方法可以做到这一点。但是我觉得这个方案很容易复用和实用，因为当你需要知道那些字段的时候，通常是对每个字段做一个动作。而 Stream 正是你需要做的。

```
 public static Stream<Field> getAnnotatedFieldStream(Class<?> theClass, Class<? extends Annotation> annotationType) {
      Class<?> classOrSuperClass = theClass;
      Stream<Field> stream = Stream.empty();
      while(classOrSuperClass != Object.class) {
        stream = Stream.concat(stream, Stream.of(classOrSuperClass.getDeclaredFields()));
        classOrSuperClass = classOrSuperClass.getSuperclass();
      }
      return stream.filter(f -> f.isAnnotationPresent(annotationType));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T03:32:52.663

您将使用反射来获取类的字段，然后`getAnnotations()`在每个字段上调用类似的东西。

# javascript - 检查视频是否正在播放而不重新启动的脚本

> ID：10679184
> 
> 赞同：-1
> 
> 时间：2012-05-21T03:24:29.673
> 
> 标签：javascript, jquery, html, video, html5-video

好吧，这措辞很尴尬，但我正在寻找的是一个脚本，它检查是否正在播放视频，如果正在播放，则不要再次开始播放。
这是一个在数组中有六个拇指的页面，每个拇指都播放一个视频，你不应该能够重新启动视频（这意味着它的行为就像它没有被选中）
我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T03:35:52.677

要防止单击对视频执行任何操作，您可以执行以下操作：

```
$("video").click(function(e) {
   e.preventDefault();
   return false;
}); 
```

要确定视频是否正在播放，您可以阅读上一个问题： [检测 HTML5 视频元素是否正在播放](https://stackoverflow.com/questions/8599076/detect-if-html5-video-element-is-playing)

因此，您需要阅读该内容，然后执行以下操作：

```
$("video").click(function(e) {
   if (videoStatus === "playing") {
      e.preventDefault();
      return false;
   }
}); 
```

如果您不使用 jQuery，请告诉我，我会更新我的答案以使用`getElementsByTagName`.

# heroku - 我可以在 Heroku 中托管 RAP 应用程序（富 Ajax 平台）吗？

> ID：10679185
> 
> 赞同：2
> 
> 时间：2012-05-21T03:24:44.727
> 
> 标签：heroku

我正在考虑创建一个应用程序（RAP）。我想知道我是否可以在 Heroku 中托管，或者您是否知道提供此服务的托管服务提供商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:38:58.750

你可以托管任何可以在 Linux 上运行的东西，只要你不需要在[文件系统](https://devcenter.heroku.com/articles/read-only-filesystem)上持久化任何东西，并且你有一个适合你需要的[buildpack 。](https://devcenter.heroku.com/articles/buildpacks)

一旦这些到位，世界就是你的牡蛎。

# bash - 在bash中套管箭头键

> ID：10679188
> 
> 赞同：13
> 
> 时间：2012-05-21T03:25:31.613
> 
> 标签：bash

如果按下向上/向左箭头键，是否可以在 bash 脚本中使用大小写箭头键来运行一组命令，如果按下向下/向右箭头键，是否可以运行一组命令？我试图通过在显示数据时使用箭头键在用户之间快速切换，使用此脚本从中读取数据。

```
function main()  # The main function that controls the execution of all other functions
{
  mkdir -p ~/usertmp  # Make a new temporary user directory if it doesn't exist
  touch ~/last_seen_output.txt  # Create the output file if it doesn't exist
  cat /dev/null > ~/last_seen_output.txt  # Make sure that the output file is empty
  gather  # Call the "gather" function
  total=$((`wc -l ~/usertmp/user_list.txt|awk '{print $1}'`-1))  # Calculate the total amount of lines and subtract 1 from the result
  echo Current Time: `date +%s` > ~/last_seen_output.txt  # Print the current time to the output file for later reference
  echo "" > ~/last_seen_output.txt  # Print a blank line to the output file
    if [ $log -eq 1 ]
      then
        # If it is enabled, then delete the old backups to prevent errors
        while [ $line_number -le $total ]
          do

            line_number=$((line_number+1))  # Add 1 to the current line number
            calculate # Call the "calculate" function
            hms  # Call the "hms" function to convert the time in seconds to normal time
            log
        done
      else
        while [ $line_number -le $total ]
          do
            line_number=$((line_number+1))  # Add 1 to the current line number
            calculate # Call the "calculate" function
            hms  # Call the "hms" function to convert the time in seconds to normal time
            echo "Displaying, please hit enter to view the users one by one."
            read  # Wait for user input
            if [ "$log_while_displaying" ]
              then
                log
                display
              else
                display
            fi
        done
    fi
} 
```

[https://github.com/jbondhus/last-seen/blob/master/last-seen.sh](https://github.com/jbondhus/last-seen/blob/master/last-seen.sh)是完整的脚本。

注释为“等待用户输入”的读取命令是您按回车键转到下一个用户的命令。基本上，该脚本的作用是列出用户以及自每个用户登录以来经过的时间。我正在尝试使用箭头键在显示的每个用户之间切换。我认为可以使用 case 语句来区分关键输入。重申我的观点，我不确定这是否可能。如果不是，谁能想到另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-09-29T03:02:04.573

您可以阅读箭头键以及其他键，而无需任何异常命令；您只需要有条件地添加第二个`read`调用：

```
escape_char=$(printf "\u1b")
read -rsn1 mode # get 1 character
if [[ $mode == $escape_char ]]; then
    read -rsn2 mode # read 2 more chars
fi
case $mode in
    'q') echo QUITTING ; exit ;;
    '[A') echo UP ;;
    '[B') echo DN ;;
    '[D') echo LEFT ;;
    '[C') echo RIGHT ;;
    *) >&2 echo 'ERR bad input'; return ;;
esac 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-01T12:23:37.710

如前所述，光标键生成三个字节 - 像 home/end 这样的键甚至生成四个！我在某处看到的一个解决方案是让最初的单字符读取（）跟随三个后续的单字符读取，并且超时非常短。最常见的键序列可以这样显示：

```
#!/bin/bash
for term in vt100 linux screen xterm
  { echo "$term:"
    infocmp -L1 $term|egrep 'key_(left|right|up|down|home|end)'
  } 
```

此外，/etc/inputrc 包含其中一些带有 readline 映射的内容。所以，回答原始问题，这是我刚刚破解的那个 bash 菜单的一个片段：

```
while read -sN1 key # 1 char (not delimiter), silent
do
  # catch multi-char special key sequences
  read -sN1 -t 0.0001 k1
  read -sN1 -t 0.0001 k2
  read -sN1 -t 0.0001 k3
  key+=${k1}${k2}${k3}

  case "$key" in
    i|j|$'\e[A'|$'\e0A'|$'\e[D'|$'\e0D')  # cursor up, left: previous item
      ((cur > 1)) && ((cur--));;

    k|l|$'\e[B'|$'\e0B'|$'\e[C'|$'\e0C')  # cursor down, right: next item
      ((cur < $#-1)) && ((cur++));;

    $'\e[1~'|$'\e0H'|$'\e[H')  # home: first item
      cur=0;;

    $'\e[4~'|$'\e0F'|$'\e[F')  # end: last item
      ((cur=$#-1));;

    ' ')  # space: mark/unmark item
      array_contains ${cur} "${sel[@]}" && \
      sel=($(array_remove $cur "${sel[@]}")) \
      || sel+=($cur);;

    q|'') # q, carriage return: quit
      echo "${sel[@]}" && return;;
  esac                  

  draw_menu $cur "${#sel[@]}" "${sel[@]}" "$@" >/dev/tty
  cursor_up $#
done 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-21T05:44:59.950

您可以使用`read -n 1`读取一个字符，然后使用`case`语句根据键选择要执行的操作。

问题是箭头键输出多个字符，并且序列（及其长度）因终端而异。

例如，在我使用的终端上，右箭头输出`^[[C`. `Ctrl`您可以通过按-来查看终端输出的顺序`V` `Right Arrow`。其他光标控制键（例如`Page Up`和）也是如此`End`。

相反，我建议使用单字符键，例如`<`and `>`。在脚本中处理它们会简单得多。

```
read -n 1 key

case "$key" in
    '<') go_left;;
    '>') go_right;;
esac 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-07-31T17:32:39.973

```
# This will bind the arrow keys

while true
do
    read -r -sn1 t
    case $t in
        A) echo up ;;
        B) echo down ;;
        C) echo right ;;
        D) echo left ;;
    esac
done 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-05-03T04:46:30.327

不确定这是否直接回答了这个问题，但我认为它是相关的 - 我在徘徊这些代码来自哪里，我终于发现：

*   [Linux 键码表 (comptechdoc.org)](http://www.comptechdoc.org/os/linux/howlinuxworks/linux_hlkeycodes.html)

一开始有点难读；对于左箭头，在“Key”列中查找“LEFT 4”，对于`bash`看到的序列，查找第 5（“keymap” - “normal”）列，其中写为“[D 1b 5b 44” - 代表此密钥的三个字节（27、91、68）。

查找线程[How to read arrow keys on real old bash？- UNIX 和 Linux 论坛](http://www.unix.com/shell-programming-scripting/27118-how-read-arrow-keys-really-old-bash.html)，启发我写了一个简短的单行代码，它转储按下的键的键代码。基本上，您按下一个键，然后按 Enter（触发 结束`read`），然后使用`hexdump`输出`read`已保存的内容（最后按 Ctrl-C 退出循环）：

```
$ while true; do read -p?; echo -n $REPLY | hexdump -C; done
?^[[D     
00000000  1b 5b 44                                          |.[D| # left arrow
00000003
?^[[C
00000000  1b 5b 43                                          |.[C| # right arrow
00000003
?^[[1;2D
00000000  1b 5b 31 3b 32 44                                 |.[1;2D| # Shift+left arrow
00000006
?^[[1;2C
00000000  1b 5b 31 3b 32 43                                 |.[1;2C| # Shift+right arrow
00000006
?^C 
```

因此，虽然箭头键需要 3 个字节，但 Shift+箭头键需要 6 个字节！但是，似乎所有这些序列都以 0x1b (27) 开头，因此可以`read -n1`在读取更多字节之前检查 的这个值；`5b`对于上表的“正常”和“移位/数字锁定”列，还保留多字节序列中的第二个字节。

* * *

编辑：在 Linux 中扫描按键终端代码的更简单和正确的方法是通过[showkey](http://linux.about.com/library/cmd/blcmdl1_showkey.htm)：

```
$ showkey 
Couldn't get a file descriptor referring to the console

$ showkey -h
showkey version 1.15

usage: showkey [options...]

valid options are:

    -h --help   display this help text
    -a --ascii  display the decimal/octal/hex values of the keys
    -s --scancodes  display only the raw scan-codes
    -k --keycodes   display only the interpreted keycodes (default)

$ sudo showkey -a

Press any keys - Ctrl-D will terminate this program

^[[A     27 0033 0x1b
         91 0133 0x5b
         65 0101 0x41
^[[B     27 0033 0x1b
         91 0133 0x5b
         66 0102 0x42
^[[A     27 0033 0x1b
         91 0133 0x5b
         65 0101 0x41
^[[D     27 0033 0x1b
         91 0133 0x5b
         68 0104 0x44
^[[C     27 0033 0x1b
         91 0133 0x5b
         67 0103 0x43
^C       3 0003 0x03
^M       13 0015 0x0d
^D       4 0004 0x04 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-05-18T14:50:07.477

使用`eMPee584`答案，我想我为你想出了一个很好的解决方案。它的输出与答案大致相同，`user3229933`但不会由 shift 键触发，并且可以在大多数终端中使用。

它有 UP DOWN LEFT RIGHT HOME 和 END 键 按 'q' 退出 这主要是由于`eMPee584`

如果您收到类似`illegal option n`.

```
#!/bin/bash

while read -sn1 key # 1 char (not delimiter), silent
do

  read -sn1 -t 0.0001 k1 # This grabs all three symbols 
  read -sn1 -t 0.0001 k2 # and puts them together
  read -sn1 -t 0.0001 k3 # so you can case their entire input.

   key+=${k1}${k2}${k3} 

  case "$key" in
    $'\e[A'|$'\e0A')  # up arrow
        ((cur > 1)) && ((cur--))
        echo up;;

    $'\e[D'|$'\e0D') # left arrow
        ((cur > 1)) && ((cur--))
        echo left;;

    $'\e[B'|$'\e0B')  # down arrow
        ((cur < $#-1)) && ((cur++))
        echo down;;

    $'\e[C'|$'\e0C')  # right arrow
        ((cur < $#-1)) && ((cur++))
        echo right;;

    $'\e[1~'|$'\e0H'|$'\e[H')  # home key:
        cur=0
        echo home;;

    $'\e[4~'|$'\e0F'|$'\e[F')  # end key:
        ((cur=$#-1))
        echo end;;

    q) # q: quit
        echo Bye!
        exit;;

   esac                  

done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-05T20:28:56.003

对于任何寻找 Mac 兼容版本的人，该版本还可以处理按住 shift 键以及输入和空格：

```
#!/bin/bash

ESC=$'\033'
SHIFT=$'[1;2'
# distinguish between enter and space
IFS=''

while true; do
    read -rsn1 a
    # is the first character ESC?
    if [[ $ESC == $a ]]; then
        read -rsn2 b
        # does SHIFT start with the next two characters?
        if [[ $SHIFT == "$b"* ]]; then
            read -rsn3 c
        fi
    fi

    input=$a$b$c
    unset b c

    case $input in
        $ESC[A) echo UP ;;
        $ESC[B) echo DOWN ;;
        $ESC[C) echo RIGHT ;;
        $ESC[D) echo LEFT ;;

        $ESC$SHIFT'A') echo SHIFT UP ;;
        $ESC$SHIFT'B') echo SHIFT DOWN ;;
        $ESC$SHIFT'C') echo SHIFT RIGHT ;;
        $ESC$SHIFT'D') echo SHIFT LEFT ;;

        '') echo ENTER ;;
        ' ') echo SPACE ;;

        q) break ;;
    esac
done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-03T19:24:03.773

以上答案都不适合我！我不得不从这个线程中的许多答案以及通过谷歌进行的其他搜索中获取点点滴滴。我花了大约一个小时来编造这个。

我正在运行 Ubuntu 20.04 LTS，这对我有用（尽管它可能并不完美，因为我不得不“破解”它）：

```
waitkey() {
  local end=""
  local key=""

  echo
  echo "   Press ESC ... "

  while [ "$end" == "" ]; do
    read -rsn1 key
    case "$key" in
      $'\x1b')
        local k=""
        # I'm not sure why I have to do this if statement,
        # but without it, there are errors.  took forever
        # to figure out why 'read' would dump me outta the script
        if [ "$IFS" ]; then
          read -rsn1 -t 0.1 holder && k="$holder"
        else
          IFS=read -rsn1 -t 0.1 holder && k="$holder"
        fi 

        if [ "$k" == "[" ]; then
          read -rsn1 -t 0.1 holder && kk="$holder"

          ##############################
          # you put your arrow code here
          #
          # eg:
          #  case "$kk" in
          #    "A") echo "up arrow!" ;; # do something ...
          #  esac
          ##############################
        elif [ "$k" == "O" ]; then
          read -rsn1 -t 0.1 holder && kk="$holder"

          # I am honestly not knowing what this is for
        elif [ "$k" == "" ]; then
          end=1
        fi
    esac
  done
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-28T14:59:35.480

扩展 JellicleCat 的答案：

```
#!/bin/bash
escape_char=$(printf "\u1b")
read -rsn1 mode # get 1 character
if [[ $mode == $escape_char ]]; then
    read -rsn4 -t 0.001 mode # read 2 more chars
fi
case $mode in
    '') echo escape ;;
    '[a') echo UP ;;
    '[b') echo DOWN ;;
    '[d') echo LEFT ;;
    '[c') echo RIGHT ;;
    '[A') echo up ;;
    '[B') echo down ;;
    '[D') echo left ;;
    '[C') echo right ;;
    '[2~') echo insert ;;
    '[7~') echo home ;;
    '[7$') echo HOME ;;
    '[8~') echo end ;;
    '[8$') echo END ;;
    '[3~') echo delete ;;
    '[3$') echo DELETE ;;
    '[11~') echo F1 ;;
    '[12~') echo F2 ;;
    '[13~') echo F3 ;;
    '[14~') echo F4 ;;
    '[15~') echo F5 ;;
    '[16~') echo Fx ;;
    '[17~') echo F6 ;;
    '[18~') echo F7 ;;
    '[19~') echo F8 ;;
    '[20~') echo F9 ;;
    '[21~') echo F10 ;;
    '[22~') echo Fy ;;
    '[23~') echo F11 ;;
    '[24~') echo F12 ;;
    '') echo backspace ;;
    *) echo $mode;;
esac 
```

# javascript - 指定 css 属性的条件语句

> ID：10679189
> 
> 赞同：0
> 
> 时间：2012-05-21T03:25:36.267
> 
> 标签：javascript, jquery

这很可能很容易，但我很挣扎

```
$(window).bind("load resize", function(){
var wH = $(window).height();
var wW = $(window).width();
var hwH = (wH) / 2;
// ---- slide size w+h ----
  $('.slide').css({'height': (wH) +'px', 'width': (wW) +'px'});
  $('#features') .css({'height': (wH+hwH) + 'px'});

// ---- size/min-size for featureItem div's ----
  $('.featureItem') .css({'height': (wH * 1.5) / 5 - 17 +'px'});

});// end resize.function 
```

我想为#features 添加一个条件语句

```
if$(wH+hwH < 735) {
    $('#features').css({'height': 735 +'px'});
    }
  else {
    $('#features').css({'height': (wH+hwH) + 'px'});
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T03:30:16.067

改变

```
if$(wH+hwH < 735) 
```

至

```
if (wH+hwH < 735) 
```

应该做的伎俩...如果那是你要问的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:30:46.657

也许这会起作用？您的 if 语句中有一个`$`，我认为您的`.css()`函数语法不正确。`.height()`可能更容易。

```
if(wH+hwH < 735) {
  $('#features').height(735);
}
else {
  $('#features').height(wH+hwH);
} 
```

# iphone - iphone - 如何从滚动视图中的uibutton触摸的事件滚动uiscrollview

> ID：10679191
> 
> 赞同：2
> 
> 时间：2012-05-21T03:25:40.780
> 
> 标签：iphone, uiscrollview, uibutton, scroll

**结构** UIViewController - UIScrollview - UIButton

我要让滚动视图可以接收按钮事件。因此，每当用户在按钮上滚动（拖动）时，滚动视图都会做出滚动反应。

我按下按钮并使用事件转发移动处理程序，如下所示

```
- (IBAction)buttonTouchedMove:(id)sender withEvent:(UIEvent *)event {
    [[sender nextResponder] touchesMoved:[event allTouches] withEvent:event];
}
- (IBAction)buttonTouchedDown:(id)sender withEvent:(UIEvent *)event {
    [[sender nextResponder] touchesBegan:[event allTouches] withEvent:event];
} 
```

并随着触摸的变化移动滚动视图，我做了以下代码

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    self.oldPoint = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint offset = self.scrollView1.contentOffset;
    UITouch *touch = [touches anyObject];
    self.newPoint = [touch locationInView:self.view];
    int diffX = newPoint.x - oldPoint.x;
    offset.x = offset.x - diffX;
    [scrollView1 setContentOffset:offset animated:YES];
    self.oldPoint = self.newPoint;
} 
```

但是，滚动视图反应很奇怪..当我触摸移动时移动不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:48:35.190

```
// get the button width

CGFloat buttonWidth = self.theButton.frame.size.width;
// replace your button name here

// now get the view width

CGFloat viewWidth = self.view.frame.size.width;
// replace your view name here

// now get the multiplier which i said u as 10

CGFloat mult = viewWidth / buttonWidth;

// and now use it in your code

.
.
.
 diffX = mult*(newPoint.x - oldPoint.x);
.
.
. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T11:33:46.730

最终答案，使用 UIView 动画，我得到了我想要的。

```
- (IBAction)buttonTouchedDown:(id)sender withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    self.oldPoint = [touch locationInView:self.view];
    self.velocity = 0;
    isButtonTouchedDown = YES;
}

- (IBAction)buttonTouchedMove:(id)sender withEvent:(UIEvent *)event {
    CGPoint offset = self.scrollView1.contentOffset;
    UITouch *touch = [[event allTouches] anyObject];
    self.newPoint = [touch locationInView:self.view];
    int diffX = self.newPoint.x - self.oldPoint.x;
    velocity = diffX;

    offset.x = offset.x - diffX;
    [self.scrollView1 setContentOffset:offset animated:NO];
    self.oldPoint = self.newPoint;
} 
```

有一个技巧..我通过区分 TouchedMove 函数中的移动距离来计算速度。在 Button TouchUp 事件处理程序中，我使用速度值和 CurveEaseout 动画控制 Scrollview 以滚动更多。通过提供非常短的动画持续时间并在没有事件（按下按钮）时重复它。它与滚动视图的动画非常相似。

```
- (IBAction)buttonTouchedUp:(id)sender withEvent:(UIEvent *)event {
    CGPoint offset = self.scrollView1.contentOffset;
    amountX = (self.velocity)*(abs(self.velocity));
    dX = amountX;
    isButtonTouchedDown = NO;
    if (offset.x - amountX < 0) {
        offset.x = 0;
        [scrollView1 setContentOffset:offset animated:YES];
    }
    else if (abs(dX) < 70) { // 70: content item size
        offset.x = roundf(offset.x/70)*70;
        [scrollView1 setContentOffset:offset animated:YES];
    }
    else {
        [self endScrollAnimation];
    }

- (void)startAnimation:(float)x moveAmount:(float)moveAmount
{
    CGPoint offset = self.scrollView1.contentOffset;
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:duration];

    offset.x = x < 0 ? offset.x + moveAmount : offset.x -moveAmount;

    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(endScrollAnimation)];
    [scrollView1 setContentOffset:offset animated:NO];
    [UIView commitAnimations];

}

- (void)endScrollAnimation
{
    CGPoint offset = self.scrollView1.contentOffset;
    float slowMoveAmount = abs(amountX) * 0.05;
    float fastMoveAmount = abs(amountX) * 0.1;
    if (isButtonTouchedDown) {
        return;
    }
    else if (abs(dX) > abs(amountX)*0.35 && offset.x > 0) {
        [self startAnimation:dX moveAmount:fastMoveAmount];
        dX  = dX < 0 ? dX + fastMoveAmount : dX -fastMoveAmount;
    }
    else if (abs(dX) > slowMoveAmount && offset.x > 0) {
        [self startAnimation:dX moveAmount:slowMoveAmount];
        dX = dX < 0 ? dX + slowMoveAmount : dX - slowMoveAmount;
    }
    else {
        offset.x = roundf(offset.x/70)*70;
        [scrollView1 setContentOffset:offset animated:YES];
    }
} 
```

# python - 使用VISA时没有连接设备如何返回错误信息？

> ID：10679193
> 
> 赞同：3
> 
> 时间：2012-05-21T03:25:50.493
> 
> 标签：python, visa

例如，如下所示，如果我的设备连接正确，我可以使用以下代码简单地初始化我的设备。

```
from visa import *
my_instrument = instrument("GPIB::14") 
```

但是如果设备没有连接到电脑怎么办？我要做的是在初始化设备之前，首先我想检查设备是否连接正确？如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:44:48.337

你可以通过两种方式做到这一点：

1）检查它是否在 get_instruments_list()

```
from visa import *
my_instrument_name = "GPIB::14"
if my_instrument_name in visa.get_instruments_list():
    print('Instrument exists connecting to it')
    my_instrument = instrument(my_instrument_name)
else:
    print('Instrument not found, not connecting') 
```

2）尝试连接并捕获异常，您需要等待超时发生

```
from visa import *
my_instrument_name = "GPIB::14"
try:
    my_instrument = instrument(my_instrument_name)
    print('Instrument connected')
except(visa.VisaIOError):
    print('Instrument not connected (timeout error)') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:38:17.920

用于[`get_instruments_list`](http://pyvisa.sourceforge.net/pyvisa.html#module-functions)确保您要连接的仪器可用。

# php - 使用 OR 和 LIKE % 查询 PHP foreach？

> ID：10679194
> 
> 赞同：1
> 
> 时间：2012-05-21T03:25:56.830
> 
> 标签：php, mysql, arrays, sql-like

我有一个棘手的问题，我想看看是否有更简单的方法来解决它。

我说

```
$numbers= $_GET['numbers']; //resulting in $numbers=array(1,2,3) 
```

*   数组中的计数可能会因 $_GET 值而异...
*   这些需要使用**'%" . $number. "%'**进行搜索，因为行中可能有多个以逗号分隔的数字

**我的理想结果**是搜索 $numbers(1,2,3) ：

```
SELECT * FROM database WHERE numbers LIKE('%1%' OR '%2%' OR '%2%') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:28:20.620

这段代码：

```
<?php
$numbers = array(1,2,3);
$sql = "SELECT * FROM table WHERE numbers LIKE ('%" . implode("%' OR '%", $numbers) . "%')"; 
```

产生这个查询：

```
SELECT * FROM table WHERE numbers LIKE ('%1%' OR '%2%' OR '%3%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T04:22:26.093

无需`OR`为数组的每个元素注入许多运算符。相反，您可以使用[rlike（MySQL 的正则表达式匹配器运算符）](http://dev.mysql.com/doc/refman/5.5/en/regexp.html)并在很大程度上简化您的代码，如下所示：

```
$numbers = array(1,2,3);
$sql = 'SELECT * from `database` WHERE number rlike "^'.implode('|', $numbers).'$"';
// $sql becomes: SELECT * from `database` WHERE number rlike "^1|2|3$" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T03:33:14.240

```
$like_part = implode(' OR ', array_map(function($i) {
        return "(_utf8 '%{$i}%' USING latin1)";
    }, $numbers)
); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T03:34:07.590

使用 foreach 构建 where 字符串，然后将其添加到查询中。

```
$query = '...';

$where = '';
foreach ($numbers as $number) {
    $where .= ...
}

$query .= $where; 
```

我不会提到您应该[规范化您的表](http://en.wikipedia.org/wiki/Database_normalization)并使用准备好的查询。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T03:32:09.687

大意为：

$query = "select * from `table`where condition like ('text before '".implode("' text after text before'", $array)." ' text after')"

$query = "select * from `table`where numbers like (\"_utf8 '%" . implode("%' using latin1\", $_GET['numbers']) . "%' using latin1 OR _utf8 '%\")

[不确定内爆是否是针/干草堆，反之亦然]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-18T13:26:46.853

```
1 - SELECT * FROM b AS B INNER JOIN a AS A ON A.a=B.a WHERE A.a RLIKE '^1-|^2-|^3'
2 - SELECT * FROM b AS B INNER JOIN a AS A ON A.a=B.a WHERE (A.a LIKE '1-%' OR A.a LIKE '2-%' OR A.a LIKE '3-%') 
```

第一个查询出现了

1.  内存使用=需要时间
2.  执行时间 = 需要时间
3.  PHPMYADMIN 显示第 0 - 24 行（总共 138 行，查询耗时 1.1243 秒。） - 使用比直接 PHP 脚本更少的数据进行测试

第二个查询出现了

1.  内存使用量 = 1198.0807113647 MB
2.  执行时间 = 30.719851970673 秒
3.  PHPMYADMIN - 显示第 0 - 24 行（总共 138 行，查询耗时 0.0018 秒。） - 使用比直接 PHP 脚本更少的数据进行测试

Foreach 到处走走

1.  内存使用 = 972.3137588501 MB
2.  执行时间 = 10.898797988892 秒

配置

1.  32GB 内存
2.  Intel I9 - 第 10 代 CPU@2.81GHz
3.  PHP 7.3
4.  MYSQL - 5.7.31
5.  表大小 - SQL 过程生成的 200 万条数据
6.  显示变量，例如“have_query_cache”；// 是的
7.  获取的数据大小 275093
8.  索引 - 可用
9.  LIKE 运算符 4739 中的变量计数`(i.e. 1,2,3... in RLIKE '^1-|^2-|^3....etc')`
10.  php函数计算的内存使用量`memory_get_usage();`

欢迎提出异议。

# ruby - 我无法加载 Ruby Gems

> ID：10679196
> 
> 赞同：1
> 
> 时间：2012-05-21T03:26:09.033
> 
> 标签：ruby, rubygems, rvm

每当我尝试加载红宝石宝石时，我都会收到此错误

```
/home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- twit
ter (LoadError)
        from /home/hilarl/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from sample.rb:2:in `<main>' 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:59:10.340

您错过了使用红宝石，在正常控制台首次运行：

```
rvm use 1.9.3 
```

如果它在脚本中，则改为使用以下 ruby​​ 路径：

```
$rvm_path/wrappers/ruby-1.9.3-p194/ruby 
```

您还应该了解使用 RVM 的基本知识：

*   截屏：[http ://screencasts.org/episodes/how-to-use-rvm](http://screencasts.org/episodes/how-to-use-rvm)
*   备忘单：http : [//cheat.errtheblog.com/s/rvm/](http://cheat.errtheblog.com/s/rvm/)
*   rvm 站点：[https ://rvm.io/](https://rvm.io/)

# c# - 如何在linq中计算重复？

> ID：10679199
> 
> 赞同：2
> 
> 时间：2012-05-21T03:27:17.733
> 
> 标签：c#, asp.net, linq

> **可能的重复：**
> [如何使用 LINQ 计算列表中的重复](https://stackoverflow.com/questions/454601/how-to-count-duplicates-in-list-with-linq)

知道如何计算 linq 中的重复项。假设我有一个学生对象列表，我想在其中找到名为“约翰”的学生数量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T03:31:42.243

您可以使用[GroupBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)：

```
var students = new List<string>{"John", "Mary", "John"};

foreach (var student in students.GroupBy(x => x))
{
    Console.WriteLine("{0}: {1}", student.Key, student.Count());
} 
```

回报：

```
John: 2
Mary: 1 
```

您也可以显示那些有重复的：

```
var dups = students.GroupBy(x => x)
                   .Where(g => g.Count() > 1)
                   .Select(g => g.Key);

foreach (var student in dups)
{
    Console.WriteLine("Duplicate: {0}", student);
} 
```

回报：

```
Duplicate: John 
```

**注意：**您当然需要`GroupBy(x => x)`根据您的`Student`对象进行更改。在这种情况下，它只是一个`string`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:43:30.367

```
var students = new List<string> { "John", "Mary", "John" };
var duplicates = students.GroupBy(x => x)
                         .Select(x => new { Name = x.Key, Count = x.Count() }); 
```

# vb.net - NullReferenceException 未处理“未将对象引用设置为对象的实例。”

> ID：10679201
> 
> 赞同：0
> 
> 时间：2012-05-21T03:27:26.437
> 
> 标签：vb.net, visual-studio-2010, nullreferenceexception

我在将数据发送到我的访问数据库时遇到问题。

我收到这个错误

> NullReferenceExeption 未处理 - “对象引用未设置为对象的实例。” `on this part of my code`maxrows = ds.Tables("asdf").Rows.Count

那意味着什么？

这是我的代码：

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click

    ID = TextID.Text
    FName = Textfname.Text
    LName = Textlname.Text
    If con.State = ConnectionState.Closed Then
        con.Open()
    End If

    If TextID.Tag & "" = "" Then
        cmd = New OleDbCommand("INSERT INTO asdf(ID,fname,lname) " & _
        "VALUES(' " & TextID.Text & "', '" & Textfname.Text & "', '" & Textlname.Text & "')", con)
        cmd.ExecuteNonQuery()
    Else
        cmd.CommandText = "UPDATE asdf" & _
        "SET ID=" & TextID.Text & _
        ", fname='" & Textfname.Text & "'" & _
        ",lname ='" & Textlname.Text & "'" & _
        ", WHERE ID =" & TextID.Tag
    End If

    btnClear.PerformClick()

    MessageBox.Show("Data successfully saved!")
    maxrows = ds.Tables("asdf").Rows.Count ' <---- Exception occurs here
    inc = 1
    con.Close()
    RefreshData()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:09:48.430

在这行代码上放置一个断点（F9 或单击空白处）`maxrows = ds.Tables("asdf").Rows.Count`并运行它。

采取以下步骤：

*   将鼠标悬停在`ds`或右键单击并选择快速观看，看看它是否显示`null`。
*   如果不是，请突出显示`ds.Tables("asdf")`并快速观看它，看看它是否是`null`.
*   如果不是，则突出显示`ds.Tables("asdf").Rows`并查看是否为 `null`.

如果它在那里崩溃，其中之一必须为空。如果是这种情况，那么您没有正确填写它，或者没有任何东西可以填写。

# c++ - 由于背景而没有颜色变化的情况下绘制抗锯齿线？

> ID：10679204
> 
> 赞同：4
> 
> 时间：2012-05-21T03:27:47.470
> 
> 标签：c++, graphics

我遇到的所有抗锯齿线条绘制算法都简单地说，像素的“强度”需要成为线条穿过它的数量的函数。这在恒定背景（即白色）上效果很好，但我希望能够在任意复杂的背景上绘制，这意味着用透明度替换强度，并将线条与背景混合。

这样做必然会根据背景改变线条的颜色，因为对于 1px 的线条，它很少会完全穿过单个像素，从而使其完全不透明。我很好奇是否有一种技术可以在保持原始颜色外观的同时绘制这些混合线。

这是我在彩色背景上进行渲染尝试的示例。您会注意到垂直/水平线是使用真实颜色绘制的特殊情况，并且抗锯齿对角线具有蓝色色调。

![在此处输入图像描述](../Images/6492375f9f1845778a90d1c5ca80ddce.png)

是否有适当的方法将抗锯齿线条混合到背景中，同时保持正确线条颜色的外观？

编辑：和实际绘制点的代码：

```
// Plot pixel at (x,y) with color at transparency alpha [0,1]
static inline void plot(pixel_t *pixels, uint16_t stride, const pixel_t &color, uint16_t x, uint16_t y, uint8_t alpha) {
    pixel_t pix = pixels[y*stride+x];
    pixels[y*stride+x].r = (uint16_t)color.r * alpha/255 + pix.r * (255 - alpha) / 255;
    pixels[y*stride+x].g = (uint16_t)color.g * alpha/255 + pix.g * (255 - alpha) / 255;
    pixels[y*stride+x].b = (uint16_t)color.b * alpha/255 + pix.g * (255 - alpha) / 255;
} 
```

编辑：对于后代，混合绿色和蓝色可以使您的线条呈现蓝色调。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:58:06.517

I'm glad you spotted the bug in your code.

Another problem to watch out for is gamma correction. Anti-aliasing must be applied in a linear color space to look correct, but most of the time to save some processing steps it is applied in a gamma-corrected color space instead. The effects are much more subtle than your example.

# jquery - Highchart 不使用 highchart.visualize 生成条形图

> ID：10679210
> 
> 赞同：0
> 
> 时间：2012-05-21T03:28:57.910
> 
> 标签：jquery, highcharts

我只是基于 html 元素生成一个虚拟图表。我在这里指的是highchart上显示的示例：[http ://www.highcharts.com/demo/column-parsed](http://www.highcharts.com/demo/column-parsed)

所以我做了一些修改以满足我的需要。这里的代码

```
$(function () {
    $(document).ready(function()
    {
        Highcharts.visualize = function(table, options) {               
            options.xAxis.categories = [];  // the categories           
            options.series           = [];  // the data series
            var candidateArray = [
                'Nuh',
                'Saleh',
                'Ibrahim',
                'Musa',
                'Ishak',
                'Harun',
                'Ilyas Ishak',
                'Zulkifli',
                'Idris',
                'Isa',
                'Muhammad'
            ];

            $('tbody tr', table).each( function(i) {
                var randomNumber = Math.floor(Math.random() * candidateArray.length);
                //options.xAxis.categories.push(candidateArray[randomNumber]);
                options.series[i] = {
                    name: candidateArray[randomNumber],
                    //name: 'Candidate Name',
                    type: 'column',
                    data: [{
                            x: candidateArray[randomNumber], 
                            y: Math.floor((Math.random()*10)+1)
                          }]
                };
                console.log(options.series[i]);
            });
            var chart = new Highcharts.Chart(options);
        }
            var table = document.getElementById('datatable'),
                options = {
                    chart: {
                        renderTo: 'chart',
                        backgroundColor: '#FBFBFB'
                    },
                    title: {
                        text: 'Top ' + $("#html5shim-2-out").html() + ' Best Candidate'
                    },
                    xAxis: {

                    },
                    yAxis: {
                        title: {
                            text: 'No. of PT'
                        }
                    },
                    plotOptions: {
                                series: {
                                    borderRadius: 5        
                                }
                            },
                    tooltip: {
                        formatter: function() {
                            return '<b>'+ this.series.name +'</b><br/>'+
                                this.y +' '+ this.x.toLowerCase();
                        }
                    }
                };

            Highcharts.visualize(table, options);
    });
}); 
```

如您所见，页面加载后没有生成图表，并且正在使用最新的 highchart 库和 jQuery JavaScript Library v1.6.1

提前感谢愿意回复的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:57:44.647

你能解释一下你想要做什么吗？当您似乎不再读取数据时，为什么您仍在读取和传递 dataArray？您似乎正在对其进行迭代，但填写您自己的值。如果您想更改表中的值，您应该在 JSFiddle 的 HTML 部分中更改它们，而不是在函数本身中。

# c# - 如何为 HttpClient 请求设置 Content-Type 标头？

> ID：10679214
> 
> 赞同：972
> 
> 时间：2012-05-21T03:29:17.847
> 
> 标签：c#, asp.net, rest, content-type, dotnet-httpclient

我正在尝试根据我正在调用的 API 的要求设置对象的`Content-Type`标头。`HttpClient`

我尝试设置`Content-Type`如下：

```
using (var httpClient = new HttpClient())
{
    httpClient.BaseAddress = new Uri("http://example.com/");
    httpClient.DefaultRequestHeaders.Add("Accept", "application/json");
    httpClient.DefaultRequestHeaders.Add("Content-Type", "application/json");
    // ...
} 
```

它允许我添加`Accept`标题，但是当我尝试添加`Content-Type`它时会引发以下异常：

> 误用的标头名称。确保请求标头与 一起使用 `HttpRequestMessage`，响应标头与 一起使用`HttpResponseMessage`，内容标头与`HttpContent`对象一起使用。

如何`Content-Type`在`HttpClient`请求中设置标头？

* * *

## 回答 #1

> 赞同：1213
> 
> 时间：2012-05-21T03:54:34.030

内容类型是内容的标头，而不是请求的标头，这就是失败的原因。[`AddWithoutValidation`正如 Robert Levy 所建议的那样](https://stackoverflow.com/a/10679234/542251)可能有效，但您也可以在创建请求内容本身时设置内容类型（请注意，代码片段`application/json`在两个地方添加了 Accept 和 Content-Type 标头）：

```
HttpClient client = new HttpClient();
client.BaseAddress = new Uri("http://example.com/");
client.DefaultRequestHeaders
      .Accept
      .Add(new MediaTypeWithQualityHeaderValue("application/json"));//ACCEPT header

HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, "relativeAddress");
request.Content = new StringContent("{\"name\":\"John Doe\",\"age\":33}",
                                    Encoding.UTF8, 
                                    "application/json");//CONTENT-TYPE header

client.SendAsync(request)
      .ContinueWith(responseTask =>
      {
          Console.WriteLine("Response: {0}", responseTask.Result);
      }); 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2013-06-06T10:15:17.987

对于那些没有看到约翰对卡洛斯解决方案发表评论的人......

```
req.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream"); 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-06-22T15:19:50.010

如果您不介意小型库依赖项，[Flurl.Http](https://flurl.dev/) [披露：我是作者] 让这个超级简单。它的`PostJsonAsync`方法负责序列化内容和设置`content-type`标头，并`ReceiveJson`反序列化响应。如果`accept`需要标头，您需要自己设置，但 Flurl 也提供了一种非常简洁的方法：

```
using Flurl.Http;

var result = await "http://example.com/"
    .WithHeader("Accept", "application/json")
    .PostJsonAsync(new { ... })
    .ReceiveJson<TResult>(); 
```

Flurl 在后台使用 HttpClient 和 Json.NET，它是一个 PCL，因此可以在各种平台上工作。

```
PM> Install-Package Flurl.Http 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2015-11-19T22:48:39.167

**尝试使用 TryAddWithoutValidation**

```
 var client = new HttpClient();
  client.DefaultRequestHeaders.TryAddWithoutValidation("Content-Type", "application/json; charset=utf-8"); 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2016-12-19T21:32:04.923

.Net 试图强制您遵守某些标准，即`Content-Type`只能在具有内容的请求上指定标头（例如`POST`,`PUT`等）。因此，正如其他人所指出的，设置标题的首选方法`Content-Type`是通过[`HttpContent.Headers.ContentType`](https://msdn.microsoft.com/en-us/library/system.net.http.headers.httpcontentheaders.contenttype(v=vs.118).aspx)属性。

话虽如此，某些 API（例如[LiquidFiles Api](https://support.liquidfiles.com/hc/en-us/articles/215034806-List-Messages-and-Download-Attachments)，截至 2016 年 12 月 19 日）需要设置请求的`Content-Type`标头。`GET`.Net 不允许在请求本身上设置此标头——即使使用`TryAddWithoutValidation`. 此外，您不能`Content`为请求指定 a ——即使它的长度为零。我似乎可以解决这个问题的唯一方法是诉诸反思。代码（以防其他人需要它）是

```
var field = typeof(System.Net.Http.Headers.HttpRequestHeaders)
    .GetField("invalidHeaders", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Static) 
  ?? typeof(System.Net.Http.Headers.HttpRequestHeaders) 
    .GetField("s_invalidHeaders", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Static);
if (field != null)
{
  var invalidFields = (HashSet<string>)field.GetValue(null);
  invalidFields.Remove("Content-Type");
}
_client.DefaultRequestHeaders.TryAddWithoutValidation("Content-Type", "text/xml"); 
```

**编辑：**

如评论中所述，该字段在不同版本的 dll 中具有不同的名称。在[GitHub 上的源代码中](https://github.com/dotnet/corefx/blob/master/src/System.Net.Http/src/System/Net/Http/Headers/HttpRequestHeaders.cs)，该字段当前名为`s_invalidHeaders`. 根据@David Thompson 的建议，该示例已被修改以解决此问题。

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2019-08-18T07:19:38.630

## 对于那些烦恼的人`charset`

我有一个非常特殊的情况，服务提供者不接受字符集，他们拒绝更改子结构以允许它......不幸的是，HttpClient 正在通过 StringContent 自动设置标题，无论您传递 null 还是 Encoding.UTF8，它总是会设置字符集...

今天我处于改变子系统的边缘；从 HttpClient 转移到其他任何东西，我想到了一些东西......为什么不使用反射来清空“字符集”？...在我尝试之前，我想到了一种方法，“也许我可以在初始化后更改它”，并且有效。

以下是如何在没有“; charset=utf-8”的情况下设置确切的“application/json”标头。

```
var jsonRequest = JsonSerializeObject(req, options); // Custom function that parse object to string
var stringContent = new StringContent(jsonRequest, Encoding.UTF8, "application/json");
stringContent.Headers.ContentType.CharSet = null;
return stringContent; 
```

**注意：**后面的`null`值无效，并附加"; charset=utf-8"

```
return new StringContent(jsonRequest, null, "application/json"); 
```

## 编辑

@DesertFoxAZ 建议也可以使用以下代码并且可以正常工作。（我自己没有测试，如果它的工作率和评论他的功劳）

```
stringContent.Headers.ContentType = new MediaTypeHeaderValue("application/json"); 
```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2017-06-12T08:48:20.180

有关 .NET Core 的一些额外信息（在阅读 erdomke 关于设置私有字段以在没有内容的请求上提供内容类型的帖子后）...

调试我的代码后，我看不到要通过反射设置的私有字段 - 所以我想我会尝试重新创建问题。

我使用 .Net 4.6 尝试了以下代码：

```
HttpRequestMessage httpRequest = new HttpRequestMessage(HttpMethod.Get, @"myUrl");
httpRequest.Content = new StringContent(string.Empty, Encoding.UTF8, "application/json");

HttpClient client = new HttpClient();
Task<HttpResponseMessage> response =  client.SendAsync(httpRequest);  //I know I should have used async/await here!
var result = response.Result; 
```

而且，正如预期的那样，我得到了内容的聚合异常`"Cannot send a content-body with this verb-type."`

但是，如果我对 .NET Core (1.1) 做同样的事情 -**我不会遇到异常。**我的服务器应用程序很高兴地回答了我的请求，并且获取了内容类型。

我对此感到惊喜，我希望它对某人有所帮助！

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2012-05-21T03:32:53.207

调用`AddWithoutValidation`而不是`Add`（请参阅[此 MSDN 链接](http://msdn.microsoft.com/en-us/library/hh204926(v=vs.110))）。

或者，我猜您正在使用的 API 实际上只需要 POST 或 PUT 请求（不是普通的 GET 请求）。在这种情况下，当您调用`HttpClient.PostAsync`并传入 an时，请在该对象的属性上`HttpContent`设置 this 。`Headers``HttpContent`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-05-28T13:56:52.693

```
var content = new JsonContent();
content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
content.Headers.ContentType.Parameters.Add(new NameValueHeaderValue("charset", "utf-8"));
content.Headers.ContentType.Parameters.Add(new NameValueHeaderValue("IEEE754Compatible", "true")); 
```

这就是你所需要的。

使用 Newtonsoft.Json，如果您需要内容作为 json 字符串。

```
public class JsonContent : HttpContent
   {
    private readonly MemoryStream _stream = new MemoryStream();
    ~JsonContent()
    {
        _stream.Dispose();
    }

    public JsonContent(object value)
    {
        Headers.ContentType = new MediaTypeHeaderValue("application/json");
        using (var contexStream = new MemoryStream())
        using (var jw = new JsonTextWriter(new StreamWriter(contexStream)) { Formatting = Formatting.Indented })
        {
            var serializer = new JsonSerializer();
            serializer.Serialize(jw, value);
            jw.Flush();
            contexStream.Position = 0;
            contexStream.WriteTo(_stream);
        }
        _stream.Position = 0;

    }

    private JsonContent(string content)
    {
        Headers.ContentType = new MediaTypeHeaderValue("application/json");
        using (var contexStream = new MemoryStream())
        using (var sw = new StreamWriter(contexStream))
        {
            sw.Write(content);
            sw.Flush();
            contexStream.Position = 0;
            contexStream.WriteTo(_stream);
        }
        _stream.Position = 0;
    }

    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        return _stream.CopyToAsync(stream);
    }

    protected override bool TryComputeLength(out long length)
    {
        length = _stream.Length;
        return true;
    }

    public static HttpContent FromFile(string filepath)
    {
        var content = File.ReadAllText(filepath);
        return new JsonContent(content);
    }
    public string ToJsonString()
    {
        return Encoding.ASCII.GetString(_stream.GetBuffer(), 0, _stream.GetBuffer().Length).Trim();
    }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-07-10T04:01:03.970

你可以用这个它会工作！

```
HttpRequestMessage msg = new HttpRequestMessage(HttpMethod.Get,"URL");
msg.Content = new StringContent(string.Empty, Encoding.UTF8, "application/json");

HttpResponseMessage response = await _httpClient.SendAsync(msg);
response.EnsureSuccessStatusCode();

string json = await response.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2022-01-05T13:20:02.960

诀窍是您可以设置各种标题，例如：

```
HttpRequestMessage request = new HttpRequestMessage();
request.Headers.Add("Accept-Language", "en"); 
```

但没有任何标题。例如：

```
request.Headers.Add("Content-Type", "application/json");//wrong 
```

将引发运行时异常`Misused header name`。这似乎可行：

```
request.Headers.Add(
   HttpRequestHeader.ContentType.ToString(), //useless
   "application/json"
); 
```

但这给出了一个名为 的无用标题`ContentType`，没有连字符。标题名称不区分大小写，但对连字符非常敏感。

在将正文添加到 http 请求的 Content 部分时，您必须声明正文的编码和类型：

```
string Body = "...";
request.Content = new StringContent(Body, Encoding.UTF8, "application/json"); 
```

只有这样，适用的 http 标头才会自动添加到请求中：

```
Content-Type: application/json; charset=utf-8 
```

It was hard to find this out, with Fiddler, on a machine without a proxy server. Visual Studio used to have a Network Tool where you could inspect all headers, but only in version 2015, not in newer versions 2017 or 2022\. If you use the debugger to inspect `request.Headers`, you will not find the header added automagically by `StringContent()`.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-07-09T20:21:33.207

好的，它不是 HTTPClient，但如果你可以使用它，WebClient 非常简单：

```
using (var client = new System.Net.WebClient())
 {
    client.Headers.Add("Accept", "application/json");
    client.Headers.Add("Content-Type", "application/json; charset=utf-8");
    client.DownloadString(...);
 } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-03-03T02:12:40.967

似乎微软试图强迫开发人员遵循他们的标准，甚至没有提供任何选项或设置来做其他事情，这真的很可惜，特别是考虑到这是一个客户端，我们受服务器端要求的支配，特别是考虑到Microsoft 服务器端框架本身需要它！

因此，基本上微软在连接到强迫我们养成不良习惯的服务器技术时，试图强迫我们养成良好的习惯……

如果 Microsoft 的任何人正在阅读此内容，请修复它...

无论哪种方式，对于需要 Get 等内容类型标头的任何人，在较旧的 .Net 版本中，都可以在[https://stackoverflow.com/a/41231353/640195](https://stackoverflow.com/a/41231353/640195)使用@erdomke 的答案，不幸的是没有在较新的 .Net 核心版本中工作时间更长。

以下代码已经过测试，可与 .Net core 3.1 一起使用，从 GitHub 上的源代码来看，它似乎也可以与较新的 .Net 版本一起使用。

```
private void FixContentTypeHeaders()
{
    var assembly = typeof(System.Net.Http.Headers.HttpRequestHeaders).Assembly;
    var assemblyTypes = assembly.GetTypes();

    var knownHeaderType = assemblyTypes.FirstOrDefault(n => n.Name == "KnownHeader");
    var headerTypeField = knownHeaderType?
                .GetFields(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance)
                .FirstOrDefault(n => n.Name.Contains("HeaderType"));
    if (headerTypeField is null) return;

    var headerTypeFieldType = headerTypeField.FieldType;            
    var newValue = Enum.Parse(headerTypeFieldType, "All");

    var knownHeadersType = assemblyTypes.FirstOrDefault(n => n.Name == "KnownHeaders");
    var contentTypeObj = knownHeadersType.GetFields().FirstOrDefault(n => n.Name == "ContentType").GetValue(null);

    if (contentTypeObj is null) return;

    headerTypeField.SetValue(contentTypeObj, newValue);
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-08-09T18:55:33.937

你需要这样做：

```
 HttpContent httpContent = new StringContent(@"{ the json string }");
    httpContent.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));                
    HttpResponseMessage message = client.PostAsync(@"{url}", httpContent).Result; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-02-28T22:17:17.623

尝试使用 HttpClientFactory

```
services.AddSingleton<WebRequestXXX>()
        .AddHttpClient<WebRequestXXX>("ClientX", config =>
        {
           config.BaseAddress = new System.Uri("https://jsonplaceholder.typicode.com");
           config.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
           config.DefaultRequestHeaders.TryAddWithoutValidation("Content-Type", "application/json; charset=utf-8");
        }); 
```

=======================

```
public class WebRequestXXXX
{
    private readonly IHttpClientFactory _httpClientFactory;

    public WebRequestXXXX(IHttpClientFactory httpClientFactory)
    {
        _httpClientFactory = httpClientFactory;
    }

    public List<Posts> GetAllPosts()
    {
        using (var _client = _httpClientFactory.CreateClient("ClientX"))
        {
            var response = _client.GetAsync("/posts").Result;

            if (response.IsSuccessStatusCode)
            {
                var itemString = response.Content.ReadAsStringAsync().Result;
                var itemJson = System.Text.Json.JsonSerializer.Deserialize<List<Posts>>(itemString, 
                    new System.Text.Json.JsonSerializerOptions 
                    {
                        PropertyNameCaseInsensitive = true
                    });

                return itemJson;
            }
            else
            {
                return new List<Posts>();
            }
        }
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-04-20T19:45:52.737

我得到了 RestSharp 的答案：

```
 private async Task<string> GetAccessTokenAsync()
        {
            var client = new RestClient(_baseURL);

            var request = new RestRequest("auth/v1/login", Method.POST, DataFormat.Json);

            request.AddHeader("Content-Type", "application/json");
            request.AddHeader("x-api-key", _apiKey);
            request.AddHeader("Accept-Language", "br");
            request.AddHeader("x-client-tenant", "1");

            ...
        } 
```

它对我有用。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-07-18T14:01:49.553

对于那些想要专门将 Content-Type 设置为 Json 的人，您可以使用扩展方法 PostAsJsonAsync。

```
using System.Net.Http.Json; //this is needed for PostAsJsonAsync to work
//....
HttpClient client = new HttpClient();
HttpResponseMessage response = await
    client.PostAsJsonAsync("http://example.com/" + "relativeAddress",
                new
                {
                    name = "John Doe",
                    age = 33
                });
//Do what you need to do with your response 
```

这里的优点是代码更简洁，您可以避免字符串化的 json。更多详细信息，请访问：[https://docs.microsoft.com/en-us/previous-versions/aspnet/hh944339(v=vs.118)](https://docs.microsoft.com/en-us/previous-versions/aspnet/hh944339(v=vs.118))

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-11T22:10:01.057

我发现通过以下方式最简单易懂：

```
async Task SendPostRequest()
{
    HttpClient client = new HttpClient();
    var requestContent = new StringContent(<content>);
    requestContent.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    var response = await client.PostAsync(<url>, requestContent);
    var responseString = await response.Content.ReadAsStringAsync();
}
...

SendPostRequest().Wait(); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-09-18T16:16:24.127

我最终遇到了类似的问题。所以我发现Software PostMan可以在点击左上角的“代码”按钮时生成代码。从中我们可以看到“幕后”发生的事情，并且 HTTP 调用是用多种代码语言生成的；curl 命令，C# RestShat，java，nodeJs，...

这对我有很大帮助，我最终没有使用.Net base HttpClient，而是使用了 RestSharp nuget 包。

希望可以帮助别人！

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2020-11-26T10:13:24.570

stringContent.Headers.ContentType = new MediaTypeHeaderValue(contentType); 捕获

是的！...这解决了 ATS REST API 的问题：SharedKey 现在可以工作了！ [https://github.com/dotnet/runtime/issues/17036#issuecomment-212046628](https://github.com/dotnet/runtime/issues/17036#issuecomment-212046628)

# ios - 在应用程序资源文件夹中获取文件列表时出现 Cocoa 错误 256

> ID：10679217
> 
> 赞同：0
> 
> 时间：2012-05-21T03:29:48.777
> 
> 标签：ios, nsfilemanager

以下代码正在输出`The operation couldn’t be completed. (Cocoa error 256.)`，文件名 NSArray 为空/空。这个文件夹里应该有文件，有什么想法坏了吗？

```
NSError *error;
NSFileManager *fm = [NSFileManager defaultManager]; 
filenames = [fm contentsOfDirectoryAtPath:[[NSBundle mainBundle] pathForResource:@"files" ofType:nil] error:&error];

NSLog(@"%@", [error localizedDescription]); 
```

# 编辑

[[NSBundle mainBundle] pathForResource:@"files" ofType:nil] 由于某种原因返回 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:53:31.640

Nil 扩展不是文件夹，iOS 将它们视为文件。您必须使用`-resourcePath`然后附加文件夹的名称。

# php - php按字母数字值对多维数组进行排序

> ID：10679227
> 
> 赞同：1
> 
> 时间：2012-05-21T03:31:49.047
> 
> 标签：php

我正在寻找一个自定义函数，它将尊重数组的顺序并按“名称”索引对其进行排序。'strcasecmp()' 函数无法理解人类会读到的字母数字值。它认为“Apples 12”的价值低于“Apples 5”。我尝试了这种方法，但找不到比较字母数字值的函数：

```
$array = array(
    0 => array(
        'id' => 2,
        'type' => 'Apples',
        'name' => 'Apples 5',
    ),
    1 => array(
        'id' => 3,
        'type' => 'Grapes',
        'name' => 'Apples',
    ),
    2 => array(
        'id' => 4,
        'type' => 'Apples',
        'name' => 'Apples 4',
    ),
    3 => array(
        'id' => 5,
        'type' => 'Grapes',
        'name' => 'Apples 01',
    ),
    4 => array(
        'id' => 6,
        'type' => 'Apples',
        'name' => 'Apples 1',
    ),
    5 => array(
        'id' => 7,
        'type' => 'Grapes',
        'name' => 'Apples 12',
    )
);

uasort($array, function($a, $b) {
    return strcasecmp($a['name'], $b['name']);
});

foreach($array as $single) {
    echo $single['name'].'<br />';
} 
```

上面代码的意外结果：

```
Apples
Apples 01
Apples 1
Apples 12
Apples 4
Apples 5 
```

我想要达到的结果：

```
Apples
Apples 01
Apples 1
Apples 4
Apples 5
Apples 12 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T03:41:01.320

使用[strnatcasecmp](http://php.net/manual/en/function.strnatcasecmp.php) () 进行自然排序

# facebook - 如何查询Facebook access-token的过期时间？

> ID：10679231
> 
> 赞同：1
> 
> 时间：2012-05-21T03:32:36.393
> 
> 标签：facebook, token

我需要知道 Facebook 访问令牌的到期时间。

我已经知道以下方法：

1.  延长令牌寿命。响应将包含令牌过期时间。但是这种方法需要我们并不总是拥有的应用程序秘密。

2.  使用 Facebook 令牌调试器 ( [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) )。但这需要我们的代码来解析这个 html 文件，而且看起来不太优雅。

那么有没有可能使用graph api/fql来查询token的过期时间呢？我在谷歌上搜索过，但没有得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T16:21:33.443

您需要查询以下端点并检查响应：

```
graph.facebook.com/debug_token?
             input_token={token-to-inspect}
             &access_token={app-token-or-admin-token} 
```

如果管理员令牌错误，则 fb 返回

`{"error":{"message":"Invalid OAuth access token.","type":"OAuthException","code":190}}`

如果 input_token 错误，则 fb 返回

`{"data":{"error":{"message":"Invalid OAuth access token.","code":190},"is_valid":false}}`

```
 /* successful response
     * {
            "data": {
            "app_id": APPID,
            "is_valid": true,
            "application": "APPNAME",
            "user_id": UID,
            "issued_at": 1371671725,
            "expires_at": 0,
            "scopes": ["create_note", "manage_pages", "photo_upload", "publish_actions", "publish_stream", "share_item", "status_update", "video_upload"]
            }
        }
     */ 
```

# android - 如何管理我的应用程序图标在 android 中的位置

> ID：10679239
> 
> 赞同：1
> 
> 时间：2012-05-21T03:33:41.807
> 
> 标签：android

安装我的应用程序后，我想将应用程序图标定位到我的文件夹中，而不是直接出现在主菜单中。安装应用程序后如何编写更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:44:14.183

不要这样做。

您的应用程序不应干扰它在应用程序启动器中的显示方式。这种事情应该是用户的决定，而不是开发人员的决定。

# asp.net - 仅将 CSS 样式表应用于单个 UserControl

> ID：10679241
> 
> 赞同：0
> 
> 时间：2012-05-21T03:33:54.080
> 
> 标签：asp.net

我有一个文件夹 /css ，其中包含许多通用 css 样式表

如果我想将相同的样式表与其他 UserControls 一起使用，如何仅在页面中将 ccs 样式表应用于特定的 UserControl？

css 被动态注入到文档中，因此 css 不知道 UserControl 当前显示的内容。

最多可以有 4 个不同的 css 文档注入到同一个页面中，但是，每个应该只影响一个用户控件。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:59:49.803

可能正在为用户控件提供它自己的皮肤文件，而 css 文件将为您工作。由于主题是在 Page_PreInit 中完成的，这对 UserControl 不可用，我们仍然有一个选项。

[用户控件中的主题](https://stackoverflow.com/questions/5788819/theme-in-user-control)

[在 Silverlight 4.0 中为 UserControl 动态应用主题](https://stackoverflow.com/questions/8266925/apply-themes-dynamically-for-usercontrol-in-silverlight-4-0)

或者

[如何让用户控件了解 ASP.NET 中的 css 类](https://stackoverflow.com/questions/34390/how-to-make-user-controls-know-about-css-classes-in-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:10:45.957

我不确定我是否正确理解了您的问题。我认为css继承可以帮助你。

假设为第一个用户控件创建一个名为 mainDivCtrl1 的最外层 div，而不是您要在控件中应用的类应如下所示：

.mainDivCtrl1 div {

}

.mainDivCtrl1 表 {

}

同样，您也可以对其他控件执行此操作。

# javascript - 为每个值重复 Javascript 函数

> ID：10679243
> 
> 赞同：0
> 
> 时间：2012-05-21T03:34:09.640
> 
> 标签：javascript, function, setinterval, repeat

我有两个问题：1 - 对于具有输入值的函数我如何设置间隔我测试这个但现在工作

```
<script>
function bn(x)
{
alert (x);
}
setInterval("bn(x)",3000);
</script>
<a href="#" onclick="bn(1);">bn 1</a><br> 
```

有`setInterval("bn()",3000);`工作但显示“未定义”而不是“1”

一个 2- 如何设置重复两个值的意思是当重复这个函数时我尝试新值和函数重复两个值

```
<script>
function bn(x)
{
alert (x);
}
setInterval("bn(x)",3000);
</script>
<a href="#" onclick="bn(1);">bn 1</a><br>
<a href="#" onclick="bn(2);">bn 2</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:38:07.450

好的，我想我明白你想要什么；见下文：

对于您的第一个问题，您目前正在做的事情显然行不通（正如您可能已经想到的那样）。要解决这个问题，您必须使用匿名函数；下面的例子：

```
<script>
var x = 1;

function bn(x)
{
    alert (x);
}
setInterval(function() {
    bn(x);
},3000);

</script>

<a href="#" onclick="x = 1;">bn 1</a><br>
<a href="#" onclick="x = 2;">bn 2</a> 
```

至于您的第二个问题，请参见上面的最后两行；由于该函数已经在运行，因此您需要控制的只是 的值`x`，并确保将其范围设置为一般，而不是特定于使用它的函数。

onclick 事件设置 的值`x`。我已经确保代码有效；如果该值设置为`2`，则将显示警报`2`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:45:07.447

```
<script>
function bn(x) {
  alert(x);
}
setInterval(function() { bn(1) }, 3000)
</script> 
```

将`bn`每 3 秒调用一次并将值传递给它`1`

您之前未定义的原因是因为您试图传递`x`从未声明过的（在您发布的代码中）。

传递给函数的参数不必与函数参数同名。

```
<script>
var some_var = 1;
function bn(x) {
   alert(x);
}
setInterval(function() { bn(some_var) }, 3000);
</script> 
```

将执行与前一个示例相同的操作，但您可以在脚本中的其他位置更改 some_var 并将更新后的值传递给 bn。

# google-app-engine - 具有嵌套重复结构化属性的 GAE 重复结构化属性

> ID：10679244
> 
> 赞同：3
> 
> 时间：2012-05-21T03:34:16.847
> 
> 标签：google-app-engine

我在 google app engine 和 python 上使用 NDB 时遇到了这个错误：Cannot repeat StructuredProperty None that has repeating properties of its own。

它是“无”，因为我在创建新的空字符的过程中遇到错误，因此我可以在创建后填写属性。

我猜它不喜欢我希望我的实体“Character”有一个重复和结构化的属性“weaponList”，其中包含另一个实体“Weapon”，该实体“Weapon”也有一个重复的结构化属性，包含和实体“诅咒” .

与史蒂夫霍夫曼一起在 Udacity 的 cs253 上的第 5 周左右，似乎我知道足够危险，所以我想我会确认这是问题所在，并希望能得到一个更好的解决方案来实现我的目标。

基本上，我正在制作一个类似于龙与地下城的角色管理系统，该系统具有一些 GM/玩家实时消息传递和角色表更新功能，我认为这些功能将对越来越多的 google+ 环聊 RPG 玩家有用。我有一份武器、物品、诅咒和魔法效果的清单，它们都是单独的实体，所以我可以随意混合和匹配它们。

武器和物品可以有任意数量的诅咒或良好的魔法效果。角色可以拥有任意数量的武器，yadda yadda。起初，我认为存储实体键列表是可行的方法。然后我想我必须单独从数据库中获取每种武器，每种武器的每个诅咒……这似乎是一种低效的方法。

另外，玩家和 GM 喜欢定制东西，而这并不适合。所以，它击中了我，我可以在一个表中列出标准的东西，并且，当你将它“添加”到一个角色时，它会以重复的结构化属性专门复制到该角色，你可以自定义地狱了在不影响其他任何人的情况下，或者无需我做任何额外的工作。

但它不起作用，所以我认为这是不允许的，因为很可能，列表中的列表中的列表永远不会结束，这可能会导致。有什么更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T14:14:39.650

结构化属性 的[文档清楚地指出：](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

> 虽然 a`StructuredProperty`可以重复，并且 a`StructuredProperty`可以包含另一个`StructuredProperty`，但请注意：**如果一个结构属性包含另一个，则只能重复其中一个**。一种解决方法是使用`LocalStructuredProperty`，它没有此约束（但不允许查询其属性值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T19:31:56.413

为我的新手们回答我自己的问题。简短的回答 - 使用 LocalStructureProperty。我的理论是，在嵌套列表上创建索引（Google 会自动执行）会很愚蠢。文档并没有真正指定这一点，至少从我的读数来看，或者它可能而且我只是没有足够的知识来“理解它”。但是，LocalStructuredProperties 不创建索引，我的设置现在可以正常工作。如果您需要列表格式的数据库对象的本地副本（而不是引用） - 它们也具有本地列表作为属性 - localStructuredProperty 可能是您所需要的。

我想更详细地介绍一下，以及我尝试使用标准数据存储和 NDB json 属性数据类型的几个选项

在我的模型类看起来像这样之前

```
class Character(ndb.Model):
    name = stringProperty()
    weaponList = StructuredProperty(WeaponModel.Weapon, repeated=True)

class WeaponModel(ndb.Model):
    name = stringProperty()
    curseList = StructuredProperty(BufferModel.Curse, repeated=True)

class BufferModel(ndb.Model):
    name = stringProperty() 
```

我得到了上面提到的错误：Cannot repeat StructuredProperty None that has repeating properties of its own。

我决定对可能的解决方案进行调查。

1）我切换到基本数据存储 db（不是 ndb）并将所有内容更改为 List 属性

WeaponList = ListProperty(WeaponModel.Weapon) //你必须在这里传递一个数据类型，这样它就知道它将存储什么

结果 Listproperty 只允许已知数据存储类型（键、字符串、整数）的列表 - 所以存储我的模型实体是行不通的。不过，存储密钥列表会。

武器列表 = ListProperty(db.key)

它工作得很好。为了允许用户编辑或创建他们自己的武器，我可以在武器上添加一个创建者属性，然后根据该属性或其他一些参考（如公共或私人）进行查询。

真的不喜欢那个主意。无论出于何种原因，意大利面怪物的景象一直在我脑海中浮现，所以我想 - NDB 中的这个 json 对象家伙呢？

构建该东西的大部分伪代码版本如下所示：

```
aCurse = getcurse
aJsonCurse = json.dump(aCurse)
aWeapon = getWeapon(curseList=[aJsonCurse])
aJsonWeapon = json.dump(aWeapon)

aCharacter.weaponList = [aJsonWeapon] 
```

但它并没有那么容易。武器之前有 json 对象，它本身被转储到 json，所以用嵌套的 json 转储武器不是很好。我通过不同的方式构建东西来解决它，但是意大利面怪物来了开始大笑，所以我停下来去吃午饭。

当我回来时，我想我会再次查看文档。结构化和 LocalStructured 之间唯一的书面区别是缺少索引，这似乎没有帮助，但我想我还是会试一试 - 它工作正常。好吧，我没有出错，我可以根据需要检索实体——谁知道前方潜伏着什么危险。

希望这将为一些盲人指明正确的方向。

# c# - 采用“组”元素的迭代版本

> ID：10679245
> 
> 赞同：0
> 
> 时间：2012-05-21T03:34:28.110
> 
> 标签：c#, .net, linq

我正在研究一种旧的辅助方法，我已经使用了一段时间来将字节数组跟踪到输出。我很久以前写过它，它一直运行良好，但我想知道是否有更好的方法来做到这一点（代码更少）。我想到了 Linq，但我的解决方案非常低效。我需要的是类似于“foreach16”的东西，或者一些枚举器，它不是一次返回一个元素，而是返回一组可枚举的元素。除了我创建自己的枚举器类之外，还有内置的方法吗？

下面的示例包含有关我要完成的工作的更多信息。

**原始代码**

```
 static void PrintBytes(byte[] bytes)
    {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < bytes.Length; i++)
        {
            if (i > 0 && ((i % 16) == 0))
            {
                // end of line, flushes bytes and resets buffer
                Console.WriteLine("   {0}", sb.ToString());
                sb.Length = 0;
            }
            else if (i > 0 && ((i % 8) == 0))
            {
                Console.Write(" ");
                sb.Append(' ');
            }

            Console.Write(" {0:X2}", (int)bytes[i]);
            if (' ' <= bytes[i] && bytes[i] <= '~')
            {
                sb.Append((char)bytes[i]);
            }
            else
            {
                // non-ASCII or control chars are printed as '.'
                sb.Append('.');
            }
        }

        // flushes the last few bytes
        if ((bytes.Length % 16) > 0)
        {
            // prints spaces where the missing bytes would be
            int spacesToPrint = 3 * (16 - (bytes.Length % 16));
            if ((bytes.Length % 16) <= 8)
            {
                spacesToPrint++;
            }

            Console.Write(new string(' ', spacesToPrint));
        }

        Console.WriteLine("   {0}", sb.ToString());
    } 
```

**我现在所拥有的**——这是我试图简化代码的。但是我正在做很多 Skip/Take，这将代码的复杂性从线性增加到二次。

```
 static void PrintBytesV2(byte[] bytes)
    {
        for (int i = 0; i < bytes.Length; i += 16)
        {
            PrintLineV2(bytes, i, Math.Min(16, bytes.Length - i));
        }
    }

    static void PrintLineV2(byte[] array, int offset, int count)
    {
        Console.Write(
            string.Join(
                " ", 
                array
                    .Skip(offset)
                    .Take(count)
                    .Select((b, i) =>
                        ((i == 8) ? " " : "") +
                            string.Format("{0:X2}", (int)b))));

        Console.Write( 
            new string(
                ' ', 
                (16 - count) * 3 +
                    (count <= 8 ? 1 : 0)) + 
            "  ");

        Console.WriteLine(
            string.Join(
            "", 
            array
                .Skip(offset)
                .Take(count)
                .Select(b => (' ' <= b && b <= '~') ? (char)b : '.')));
    } 
```

请注意，即使新代码是线性的，我也可能会坚持使用原始代码，因为 1) 它可以工作；2）我认为它更清晰。但我不禁想知道是否有某种方法可以迭代组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:56:55.597

LINQ 使代码更具可读性，并且与您使用的 IEnumerable 类型解耦......但由于是抽象的性质，它的效率将低于为您的特定需求手工制作较低级别的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:20:42.050

好吧，我不确定这是否更具可读性，但这是一个使用`Buffer`类似于 Reactive Extensions 的扩展方法的解决方案。

```
public static IEnumerable<IList<T>> Buffer<T>(this IEnumerable<T> orig, int count)
{
    return orig.Select((o,i) => new { o, i })
               .GroupBy(x => x.i / count, x => x.o)
               .Select(g => g.ToList());
} 
```

给定一个 16 字节的块，将它们变成一个字符串（在每一行的末尾）：

```
static string FormatAsString(IList<byte> bytes)
{  
    return String.Join(" ", 
                 bytes.Buffer(8).Select(
                     bs => new String(bs.Select(b => ' ' <= b && b <= '~' ? (char)b : '.').ToArray())
                 )
           );
} 
```

给定一个字节块（通常为 16 宽），将它们转换为这些字节的字符串表示形式（位于每行的开头）：

```
static string FormatAsBytes(IList<byte> bytes)
{
    var blocks = 
        bytes.Buffer(8)
             .Select(bs => String.Join(" ", 
                bs.Select(b => String.Format("{0:X2}", (int)b)))
             );

    return String.Join("  ", blocks);
} 
```

现在，如果我们将输入字节转换为块，那么我们可以在输出上运行上述两个：

```
static void PrintBytesWide(byte[] bytes, int width)
{
    foreach (var line in bytes.Buffer(width))
    {
        Console.WriteLine("{0} {1}", FormatAsBytes(line).PadRight((width + 1) * 3, ' '), FormatAsString(line));
    }
} 
```

使用 16 字节块运行：

```
var bytes = Encoding.UTF8.GetBytes("the quick brown fox");
PrintBytesWide(bytes, 16); 
```

对我来说，这返回的输出与原始输出基本相同；

原来的：

```
 74 68 65 20 71 75 69 63  6B 20 62 72 6F 77 6E 20   the quic k brown 
 66 6F 78                                           fox 
```

新的：

```
74 68 65 20 71 75 69 63  6B 20 62 72 6F 77 6E 20    the quic k brown 
66 6F 78                                            fox 
```

但当然，美妙之处在于你可以做不同的宽度！

```
PrintBytesWide(bytes, 8);

74 68 65 20 71 75 69 63     the quic
6B 20 62 72 6F 77 6E 20     k brown 
66 6F 78                    fox

PrintBytesWide(bytes, 24);

74 68 65 20 71 75 69 63  6B 20 62 72 6F 77 6E 20  66 6F 78                  the quic k brown  fox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T04:46:38.417

对于 foreach16() 类型的实现，这个怎么样？

```
var sampleSet = Enumerable.Range(0, 200);
sampleSet.ForEachBlock(16, x => Console.WriteLine(string.Join(",", x)));

... 
```

使用此扩展方法：

```
public static void ForEachBlock<T>(this IEnumerable<T> source, int blockSize, Action<IEnumerable<T>> action)
{
    foreach (var group in source.Select((x, index) => new { x, index }).GroupBy(x => x.index / blockSize, y => y.x))
    action(group);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T04:51:39.010

这是您需要的：

```
var result =
    String.Join("\n",
        bytes
            .Select((b, i) => new { b, i })
            .GroupBy(x => x.i / 16, x => x.b)
            .Select(bs =>
                String.Join(" ",
                    bs.Select(b =>
                        String
                            .Format("{0:X2}", b)))
                            .PadRight(16 * 3, ' '))); 
```

我用“The quick brown fox”测试了上面的代码。（使用 UTF8）并得到这个输出：

```
54 68 65 20 71 75 69 63 6B 20 62 72 6F 77 6E 20 
66 6F 78 2E 
```

* * *

我的第一个版本显然有点草率。这可能会更完整一些。

```
Func<string, IEnumerable<byte>> toBytes =
    x => System.Text.UTF8Encoding.UTF8.GetBytes(x);

Func<IEnumerable<byte>, string> toString =
    x => System.Text.UTF8Encoding.UTF8.GetString(x.ToArray());

Func<IEnumerable<byte>, string> toHexBlock =
    xs => String.Join(" ", xs.Select(x => String.Format("{0:X2}", x)));

Func<IEnumerable<byte>, string> toHexLine =
    xs =>
        String
            .Format("{0}  {1}",
                toHexBlock(xs.Take(8)),
                toHexBlock(xs.Skip(8).Take(8)))
            .PadRight(16 * 3 + 1, ' ')
        + String
            .Format("{0} {1}",
                toString(xs.Take(8)),
                toString(xs.Skip(8).Take(8)));

var result =
    String.Join("\n",
        toBytes("The even quicker brown fox.")
            .Select((b, i) => new { b, i })
            .GroupBy(x => x.i / 16, x => x.b)
            .Select(bs => toHexLine(bs))); 
```

# extjs - Sencha Touch 2 计算器实时绑定

> ID：10679250
> 
> 赞同：2
> 
> 时间：2012-05-21T03:35:50.443
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在开发一个具有计算器功能的应用程序：例如，我有 4 个文本字段，当用户在第一个字段、第二个字段和第三个字段中输入数字时，该应用程序将自动计算并给出答案没有用户按下任何按钮的第 4 个字段。1 + 1 + 1 = 3 答案是 3 是自动计算的。我的文本字段的代码是：

```
Ext.define("ikhlas.view.assetallocate", {
    extend: 'Ext.Panel',
    xtype: 'assetpanel',

    config: {
        title: 'Asset',
        iconCls: 'info',
        scrollable: true,
        styleHtmlContent: true,

        items: [{
            layout: 'hbox',
            items: [{
                html: 'Sum 1:',
                flex: 1

            }, {
                xtype: 'textfield',
                flex: 1
            }, ]

        }, {
            xtype: 'spacer',
            height: 10

        }, {
            layout: 'hbox',
            items: [{
                html: 'Sum 2:',
                flex: 1

            }, {
                xtype: 'textfield',
                flex: 1
            }, ]

        }, {
            xtype: 'spacer',
            height: 10

        }, {
            layout: 'hbox',
            items: [{
                html: 'Sum 3:',
                flex: 1

            }, {
                xtype: 'textfield',
                flex: 1
            }, ]

        }, {
            xtype: 'spacer',
            height: 10

        }, ]
    }
}); 
```

![我现在的界面。](../Images/c8500c9f8436eef85b2b08adbabda627.png)

我的控制器看起来像这样，它仍然是空的：

```
Ext.define('ikhlas.controller.SubmitController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {

        },
        control: {

        }
    },

    submitbutton: function () {

    }
}); 
```

我的商店和我的模型现在都是空的。谁能帮我设置一下这真的让我很难过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:56:58.927

首先，像这样给`id`你们每个人财产，`4 textfield`

```
xtype:' textfield',
id: 'txtField1' 
```

等等。然后，`Submit`在您的垫片下方添加按钮代码，

```
{
   xtype: 'button',
   text:'Submit',
   id: 'submitBtn'
} 
```

然后，在你的`controller`文件中，这样写，

```
config:{
    refs:{
       submitBtn: '#submitBtn',
       txtField1: '#txtField1',
       txtField2: '#txtField2',
       txtField3: '#txtField3',
       txtField4: '#txtField4'
    },
    control:{
       submitBtn: {
           tap: 'submitBtnTapFn' 
       }
    }
},

submitBtnTapFn : function(){
   var value1 = Ext.getCmp('txtField1').getValue();
   var value2 = Ext.getCmp('txtField2').getValue();
   var value3 = Ext.getCmp('txtField3').getValue();
   var value4;

   value4 = value1 + value2 + value3;
   Ext.getCmp('txtField4').setValue(value4);
} 
```

# android - Android内存泄漏，没有静态变量

> ID：10679255
> 
> 赞同：1
> 
> 时间：2012-05-21T03:37:10.960
> 
> 标签：android, image, memory-leaks, android-activity, screen-orientation

我是一名初级Android开发人员，作为一个实践项目，我正在尝试制作一个可以拍照的活动，将其保存到外部存储中，并将其显示在ImageView中。几乎一切似乎都在工作，但是，我似乎有内存泄漏。

当屏幕方向改变时，我相信活动被破坏，然后重新创建。为了继续显示图像，我将图像的路径作为字符串存储在 onSaveInstanceState 中的包中，并在 onResotreInstanceState 中重置图像。拍摄 5mp 图片，我可以旋转一次屏幕，然后在第二次旋转时，应用程序崩溃，LogCat 报告内存不足错误。使用较低分辨率的图像，我得到更多的旋转，但应用程序最终仍然崩溃，我得到同样的错误。

我一直在阅读有关 android 内存泄漏的信息，一切似乎都在说不要使用静态 Drawables，它可以引用视图，并防止 vm 释放内存。据我所知，我不会做这样的事情来保持引用。如果有人可以帮助我找到我的错误，我将不胜感激。这是代码：

```
public class CameraTestsActivity extends Activity {

private Uri fileUri;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void takePicture(View view){
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

    fileUri = getOutputImageFileUri();
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    startActivityForResult(intent, 0);
}

private static Uri getOutputImageFileUri() {
    return Uri.fromFile(getOutputImageFile());
}

private static File getOutputImageFile(){
    Log.d("CameraTestsActivity", "Storage state: " + Environment.getExternalStorageState());
    if (Environment.getExternalStorageState().equals("mounted")){
        File mediaStorageDirs = new File (Environment.getExternalStorageDirectory().getAbsolutePath() + "/Pictures" + "/CameraTestsActivity");
        if (! mediaStorageDirs.exists()){
            if (! mediaStorageDirs.mkdirs()){
                Log.d("CameraTestsActivity", "Failed to create directories");
                mediaStorageDirs = null;
                return null;
            }
        }

        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File imageFile = new File(mediaStorageDirs.getPath() + File.separator + "IMG_" + timeStamp + ".jpg");
        mediaStorageDirs = null;
        return imageFile;

    }
    Log.d("CameraTestsActivity", "Storage state bad");
    return null;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK){
        if (requestCode == 0){
            setImage();
        }
    }
    else{
        super.onActivityResult(requestCode, resultCode, data);
    }
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    fileUri = Uri.parse(savedInstanceState.getString("uri"));
    setImage();
    super.onRestoreInstanceState(savedInstanceState);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("uri", fileUri.toString());
    super.onSaveInstanceState(outState);
}

private void setImage(){
    ImageView image = (ImageView)findViewById(R.id.imageView1);
    File file = new File(fileUri.toString().substring(7));
    if (!file.exists())
        Log.d("CameraTestsActivity", "File " + fileUri.toString().substring(7) + "does not exist");
    image.setImageURI(fileUri);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:24:14.703

在显示位图时，我们应该注意它的大小不超过堆大小或虚拟机预算。尽管您没有任何内存泄漏，但是当您更改方向时，可能需要一些时间来清理以前加载的位图，因此您会遇到内存溢出错误。为避免此错误，请阅读此[如何有效显示位图](http://androidtrainningcenter.blogspot.in/2012/04/displaying-bitmaps-efficiently-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:28:12.113

尝试分析您的应用程序的内存以找出泄漏的位置，这里有一些链接：[link1](https://stackoverflow.com/questions/3112671/android-memory-analysing-eclipse-memory-analyzer)、[link2](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)

您也可以尝试通过从 ImageView 中删除它并在调用 Activity 的 onStop() 时调用 Bitmap.recycle() 来手动释放以前的 Activity 的位图，因为在 Honycomb 之前，可以释放位图的后备缓冲区的时间是非常不确定的。

# plsql - 两次更新同一字段

> ID：10679256
> 
> 赞同：-1
> 
> 时间：2012-05-21T03:38:05.170
> 
> 标签：plsql

hye...我有 1 个表名 rumah，其中包含 id、nama、jenis_rumah 和 sewa 字段。当 nama 像 %RIZAL% 时，我需要更新 sewa 字段，然后更新 sewa*3。如果 jenis_rumah = cornet lot 则以 20% 的折扣更新 sewa。这是我的 pl/sql，但更新过程失败...需要专家的建议。tq。

第一次审判：

```
DECLARE CURSOR rec IS

SELECT id, nama, jenis_rumah, sewa
FROM rumah;

nama varchar2 (100);
jenis_rumah varchar2(100);
upd_cntr  NUMBER := 0;
tot_all      NUMBER :=0;

    BEGIN
    FOR z1 IN rec LOOP 

            if upper (nama) like '%RIZAL%' then 
                begin
                UPDATE rumah
                SET sewa = sewa*3
                where id = z1.id ;
                 end;

               elsif  jenis_rumah = 'CORNER LOT' THEN
               Begin
              UPDATE rumah
              SET sewa = (sewa * 80/100)
              where id = z1.id;
              end;

              END IF;      

            upd_cntr := upd_cntr + 1;
            tot_all := tot_all + 1;

        END LOOP; 

            DBMS_OUTPUT.PUT_LINE('Total Updated Sewa:' || tot_all);     
    END; 
```

第二次试用：我尝试不同的方式，只有像 %RIZAL% 这样的名称被更新

```
DECLARE CURSOR rec IS

SELECT id, nama, jenis_rumah, SUM (sewa*3) AS upd_sewa
FROM rumah
WHERE UPPER (nama) LIKE '%RIZAL%'
GROUP BY id, nama, jenis_rumah, sewa;

jenis_rumah varchar2(100);
upd_cntr  NUMBER := 0;
tot_all      NUMBER :=0;

    BEGIN
    FOR z1 IN rec LOOP 

            UPDATE rumah
            SET sewa = z1.upd_sewa
            where id = z1.id ;

         IF  jenis_rumah = 'CORNER LOT' THEN
          UPDATE rumah
          SET sewa = (sewa * 80/100);
            END IF;      

            upd_cntr := upd_cntr + 1;
            tot_all := tot_all + 1;

        END LOOP; 

            DBMS_OUTPUT.PUT_LINE('Total Updated Sewa:' || tot_all);

    END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:45:59.707

您将不需要 PL/SQL 来实现您想要实现的目标。

试试这个：

```
 UPDATE rumah
        SET sewa = 
                CASE 
                    WHEN UPPER(nama) LIKE '%RIZAL%' THEN  sewa*3
                    WHEN jenis_rumah = 'CORNER LOT' THEN (sewa * 80/100)
                    ELSE sewa
                END
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:46:00.243

你不需要程序。只需运行 2 个更新语句。

```
UPDATE rumah
   SET sewa = sewa*3
 where upper (nama) like '%RIZAL%';

UPDATE rumah
   SET sewa = (sewa * 80/100)
 where jenis_rumah = 'CORNER LOT'; 
```

# algorithm - 使用分治法实现简单算法

> ID：10679259
> 
> 赞同：0
> 
> 时间：2012-05-21T03:38:23.567
> 
> 标签：algorithm, divide-and-conquer

我正在尝试使用分治法实现以下算法，以使运行时间达到 O(n*logn)。

> 给定一个数字序列 a_1、a_2、...、a_n 和一个数字 k，找到 i 和 j 使得 1<= j – i <= k，同时最大化 a_i + a_j。
> 
> 例如对于序列 10,2,0,8,1,7,1,0,11 和 k = 2，最大值为 15 = 8 + 7。

我已经实现了某种分而治之的方法，但我正在努力弄清楚如何检查跨越每个分界间隔的值。这是我到目前为止所拥有的：

```
int MaxInterval(int array[], int left, int right, int k)
{
    int BestSum = 0;
    int sumL = 0;
    int sum = 0;
    int sumR = 0;
    int sumMid = 0;
    int count = 0;
    if( right - left <= 2*k-3 ) //
    {
      //elaborate straightforward search right way
      for(int i = left; i <= right; i++)
      {
          sum = 0;
          count = k;
          for(int j = i+1; j <= right; j++ )
          {
              if(count == 0) break;
              sum = array[i] + array [j];
              if(sum > BestSum) BestSum = sum;
              count--;
          }

      }
      return BestSum;
    }
    int mid = (right + left)/2;
    sumL = MaxInterval(array, left, mid, k);
    sumR = MaxInterval(array, mid + 1, right, k);
    sumMid = MaxInterval(array, max(left, mid - k + 2), min(right, mid + k - 1), k);
    return max(max(sumL, sumR), sumMid);
} 
```

我认为我在正确的轨道上，我只是在努力弄清楚如何合并跨越两个间隔的数字的校验和，而不使用会产生 O(n^ 2) 复杂性。

如果有任何关于如何继续此操作的指示或提示，将不胜感激。另外，我目前正在假设数组中有偶数个整数。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:59:45.057

伪代码中的一些线索。n=8, k = 2 的示例 - 此代码将从 a[0..3]、a[4..7] 和 a[2..5] 中搜索最佳结果。请注意，我删除了其他数组。

```
int MaxInterval(int array[], int left, int right, int k)
{
    if( right - left <= 2*k-1 ) //
    {
      //elaborate straightforward search right way
      return BestSum;
    }
    sumL = MaxInterval(array, left, mid, k);
    sumR = MaxInterval(array, mid + 1, right, k);
    sumMid = MaxInterval(array, max(left, mid - k + 1), min(right, mid + k), k);
    return max(sumL, sumR, sumMid);
} 
```

# android - 同时访问Android中的前置和后置摄像头

> ID：10679261
> 
> 赞同：2
> 
> 时间：2012-05-21T03:38:27.653
> 
> 标签：android

我想同时访问前置和后置摄像头。这可能吗？根据我的测试，这是无法做到的。如果一个应用程序已经在访问后置摄像头并且另一个应用程序正在尝试访问前置摄像头，它会崩溃。

我在这里发现了一些以前的帖子，但没有答案：

[我们可以在多个应用程序中一次访问相机吗？](https://stackoverflow.com/questions/7835894/can-we-access-at-a-time-camera-in-multiple-application)

[同时打开安卓前置摄像头和后置摄像头](https://stackoverflow.com/questions/6676859/open-android-front-camera-and-back-camera-at-the-same-time)

但我不明白的是为什么会有这样的限制？

前置摄像头和后置摄像头不是两种不同的硬件吗？

或者可以这样做，我错了吗？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:07:26.607

从[文档](http://tinyurl.com/bp4fec5)中：

> 您的应用程序一次应该只有一个处于活动状态的 Camera 对象。

摄像头模块切换到前置或后置摄像头。没有设计可以同时启动它们。[**HTC 已经在这里**](http://developer.sprint.com/show_thread.do?forumId=528&threadid=26999&messageId=78914)确认了这一点。对不起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-31T22:41:50.487

接受的答案是错误的。

您可以同时拥有两者。这是该链接文档中的实际行：

**对于特定的硬件摄像头，**您的应用程序一次应该只有一个处于活动状态的摄像头对象。

# ruby-on-rails - validates vs db check up in rails 3.1 for field presence

> ID：10679266
> 
> 赞同：0
> 
> 时间：2012-05-21T03:39:45.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

In rails 3.1, we can validate presence of a field in model with:

```
validates :name, :presence => true 
```

In db migration file, we also can do

```
t.string :name, :null => false 
```

It seems that validates checks the data integrity before saving which is better. However db check up only happens during the saving process which may have started actual saving before aborting. Is validates in model better? Thanks so much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:29:38.023

在模型中编写验证通常是一种很好的做法，因为它更易于维护，可以在需要时轻松更改，并且将所有核心登录放在一个地方也很好。

当你只在 db 级别编写这样的东西时，编写测试用例就成了一个问题，当你回到后面时，你可能没有意识到你已经在 db 级别编写了这样的“逻辑”。

实际上，我什至在模型上写了我的“默认”值（尽管这可以讨论）。这样做的原因是具有默认选项是业务登录，因此需要在模型级别进行。

由于上述原因，在模型级别编写此类代码是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T03:22:49.557

这是一个老问题，但我今天偶然发现了它，我认为无论您使用的是 Rails 3.1 还是 Rails 6，答案都是一样的：**这取决于**.

数据库约束和模型验证都存在是有原因的。除了这两个之外，我认为还值得考虑客户端检查的位置。

我的简短回答是：

*   总是写模型验证
*   在大多数情况下，使用数据库约束来备份它们
*   有时添加客户端检查

与大多数事情一样，在学习时坚持这些简单的规则，你就不会出错。稍后你可以开始打破这些规则，一旦你知道你为什么要打破它们。

[我在博客上的一篇文章](https://www.matt17r.com/2019/05/29/validating-data-in.html)中写下了我更长（“取决于”）的答案（以及我对上述规则的原因）。

# java - 带有 Minimax 的井字游戏：玩家先走时计算机有时会输；否则工作

> ID：10679269
> 
> 赞同：5
> 
> 时间：2012-05-21T03:40:37.690
> 
> 标签：java, algorithm, tic-tac-toe, minimax

我正在研究用于无与伦比的井字游戏的 Minimax 算法。我需要它在计算机先行和播放器先行时都能正常工作。使用当前版本，计算机先行永远不会丢失。但是，如果玩家先走，Minimax 似乎永远不会找到最佳移动（总是返回 -1 作为分数）。

如果玩家迈出第一步，是什么导致计算机返回的 Minimax 得分为 -1？

例子：

```
board.addMark( 1, Mark2.PLAYER ); // add a 'PLAYER' mark to an arbitrary location
Minimax.minimax( board, Mark2.COMPUTER ); // will always return -1 
```

这是“Minimax”类：

```
public class Minimax {
  public static int minimax( Board board, Mark2 currentMark ) {
    int score = (currentMark == Mark2.COMPUTER) ? -1 : 1;
    int[] availableSpaces = board.getAvailableSpaces();

    if ( board.hasWinningSolution() )
      score = (board.getWinningMark() == Mark2.COMPUTER) ? 1 : -1;
    else if ( availableSpaces.length != 0 ) {
      Mark2 nextMark = (currentMark == Mark2.COMPUTER) ? Mark2.PLAYER : Mark2.COMPUTER;

      for ( int availableIndex = 0; availableIndex < availableSpaces.length; availableIndex++ ) {
        board.addMark( availableSpaces[availableIndex], currentMark );
        int nextScore = minimax( board, nextMark );
        board.eraseMark( availableSpaces[availableIndex] );

        if ( currentMark == Mark2.COMPUTER && nextScore > score
            || currentMark == Mark2.PLAYER && nextScore < score )
          score = nextScore;
      }
    }

    return score;
  }
} 
```

这是“董事会”课程：

```
public class Board {
  private Mark2 gameBoard[];
  private int blankSpaces;

  private boolean solutionFound;
  private Mark2 winningMark;

  public final static int winSets[][] = {
      { 0, 1, 2 }, { 3, 4, 5 },
      { 6, 7, 8 }, { 0, 3, 6 },
      { 1, 4, 7 }, { 2, 5, 8 },
      { 0, 4, 8 }, { 2, 4, 6 }
  };

  public Board() {
    gameBoard = new Mark2[9];
    blankSpaces = 9;

    for ( int boardIndex = 0; boardIndex < gameBoard.length; boardIndex++ ) {
      gameBoard[boardIndex] = Mark2.BLANK;
    }
  }

  public void addMark( int spaceIndex, Mark2 mark ) {
    if ( gameBoard[spaceIndex] != mark ) {
      gameBoard[spaceIndex] = mark;

      if ( mark == Mark2.BLANK ) {
        blankSpaces++;
      } else {
        blankSpaces--;
      }
    }
  }

  public void eraseMark( int spaceIndex ) {
    if ( gameBoard[spaceIndex] != Mark2.BLANK ) {
      gameBoard[spaceIndex] = Mark2.BLANK;
      blankSpaces++;
    }
  }

  public int[] getAvailableSpaces() {
    int spaces[] = new int[blankSpaces];
    int spacesIndex = 0;

    for ( int boardIndex = 0; boardIndex < gameBoard.length; boardIndex++ )
      if ( gameBoard[boardIndex] == Mark2.BLANK )
        spaces[spacesIndex++] = boardIndex;

    return spaces;
  }

  public Mark2 getMarkAtIndex( int spaceIndex ) {
    return gameBoard[spaceIndex];
  }

  public boolean hasWinningSolution() {
    this.solutionFound = false;
    this.winningMark = Mark2.BLANK;

    for ( int setIndex = 0; setIndex < winSets.length && !solutionFound; setIndex++ )
      checkSpacesForWinningSolution( winSets[setIndex][0], winSets[setIndex][1], winSets[setIndex][2] );

    return solutionFound;
  }

  public Mark2 getWinningMark() {
    return this.winningMark;
  }

  private void checkSpacesForWinningSolution( int first, int second, int third ) {
    if ( gameBoard[first] == gameBoard[second] && gameBoard[third] == gameBoard[first]
        && gameBoard[first] != Mark2.BLANK ) {
      solutionFound = true;
      winningMark = gameBoard[first];
    }
  }

  public void printBoard() {
    System.out.printf( " %c | %c | %c\n", getMarkCharacter( gameBoard[0] ), getMarkCharacter( gameBoard[1] ),
        getMarkCharacter( gameBoard[2] ) );
    System.out.println( "------------" );
    System.out.printf( " %c | %c | %c\n", getMarkCharacter( gameBoard[3] ), getMarkCharacter( gameBoard[4] ),
        getMarkCharacter( gameBoard[5] ) );
    System.out.println( "------------" );
    System.out.printf( " %c | %c | %c\n", getMarkCharacter( gameBoard[6] ), getMarkCharacter( gameBoard[7] ),
        getMarkCharacter( gameBoard[8] ) );
  }

  public char getMarkCharacter( Mark2 mark ) {
    char result = (mark == Mark2.PLAYER) ? 'O' : ' ';
    result = (mark == Mark2.COMPUTER) ? 'X' : result;
    return result;
  }
} 
```

如果有任何混淆，这里是“Mark2”类：

```
public enum Mark2 {
  BLANK,
  PLAYER,
  COMPUTER
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:55:00.753

经过长时间的休息后，在@GuyAdini 的回复的帮助下，我顿悟了。我写了一个测试来计算 minimax() 返回的三个可能分数的出现。结果它没有产生 0，这让我意识到我需要 0 被算法视为可能的分数。

我最初将“分数”的初始化更改为可能的最低/最高结果（-1/1）并与它们进行比较。但是，这禁止结果仅从返回的分数集中获得最低/最高值，而是还包括初始化值。这破坏了结果。

我在“分数”的条件变化中添加了以下比较：

```
|| availableIndex == 0 
```

这迫使所有剩余的比较都针对属于返回分数集的值进行。

```
public class Minimax {
  public static int minimax( Board board, Mark2 currentMark ) {
    int score = 0;
    int[] availableSpaces = board.getAvailableSpaces();

    if ( board.hasWinningSolution() )
      score = (board.getWinningMark() == Mark2.COMPUTER) ? 1 : -1;
    else if ( availableSpaces.length != 0 ) {
      Mark2 nextMark = (currentMark == Mark2.COMPUTER) ? Mark2.PLAYER : Mark2.COMPUTER;

      for ( int availableIndex = 0; availableIndex < availableSpaces.length; availableIndex++ ) {
        board.addMark( availableSpaces[availableIndex], currentMark );
        int nextScore = minimax( board, nextMark );
        board.eraseMark( availableSpaces[availableIndex] );

        if ( currentMark == Mark2.COMPUTER && nextScore > score
            || currentMark == Mark2.PLAYER && nextScore < score
            || availableIndex == 0 )
          score = nextScore;
      }
    }

    return score;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:07:50.033

让我们看一些更简单的东西 - 棋盘是 1x1 的，第一个在该处放置标记的玩家获胜。

现在计算机启动，score=-1。没有获胜的解决方案（检查一个获胜集，它不是一排一排），并且有一个可用的空间。所以我们通过回溯继续尝试一个可用的位置。

现在 Mark=PLAYER，并且棋盘有一个获胜的解决方案。所以计算机获胜，得分 = -1。

回到第一个调用，行“int nextScore = minimax(board, nextMark);” 再次返回-1，最终得分为-1。

对于更大的问题，同样的事情也会发生在你身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:08:29.653

在井字游戏中，有 3 种可能性，而不仅仅是 2：玩家 1 获胜，玩家 2 获胜，无人获胜。

您应该替换这样的行：

```
int score = (currentMark == Mark2.COMPUTER) ? -1 : 1; 
```

通过这样的事情：

```
int score = (currentMark == Mark2.COMPUTER) ? -1 : ((currentMark == Mark2.PLAYER) ? 1 : 0); 
```

# objective-c - 保存多个 UISwitch 状态

> ID：10679272
> 
> 赞同：0
> 
> 时间：2012-05-21T03:41:18.090
> 
> 标签：objective-c, ios, xcode

我一直在尝试`UISwitch`在我的文件中保存多个开关的状态，`grocery.m`因此当用户终止应用程序时，开关的状态将保持原样。到目前为止，我就是这样做的，但没有任何运气。我认为这个问题必须在我的`grocery.m`文件中而不是`appDelegate.m`. 如果有人能告诉我我的错误在哪里，将不胜感激。谢谢！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];    

push.switchstore1.on = [defaults boolForKey: @"mySwitch1"];
push.switchstore2.on = [defaults boolForKey: @"mySwitch2"];
push.switchstore3.on = [defaults boolForKey: @"mySwitch3"];

UIApplication *app = [UIApplication sharedApplication];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationWillTerminate:) name:UIApplicationWillTerminateNotification object:app]; //Listener
    }

 - (void)applicationWillTerminate:(UIApplication *)application {

NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
[defaults setBool: push.store1.on forKey: @"mySwitch1"];
[defaults setBool: push.store2.on forKey: @"mySwitch2"];
[defaults setBool: push.store3.on forKey: @"mySwitch3"];

[[NSUserDefaults standardUserDefaults] synchronize];
[self saveContext]; //Already in the method by default
} 
```

**杂货店.M 内**

```
 -(void) viewDidLoad
 { 
 NSUserDefaults* defaults  = [NSUserDefaults standardUserDefaults];
 switchStore1.on = [defaults boolForKey: @"mySwitch1"];
 switchStore2.on = [defaults boolForKey: @"mySwitch2"];
 switchStore3.on = [defaults boolForKey: @"mySwitch3"];
 } 
```

**编辑已添加到 delegate.h 的内容（属性也已在 .m 中合成）**

```
groceryViewController *push;
@property (nonatomic, retain) groceryViewController *push; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:44:39.697

在您的应用程序WillTerminate 中，您将启动一个全新的groceryViewController，它将始终具有开关的默认“关闭”值。您需要使用在应用程序的 didFinishLaunchingWithOptions 中实例化的相同的groceryViewController。有多种方法可以做到这一点，包括使用全局变量或使用 AppDelegate 中的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T03:47:00.550

您总是在创建 的新实例`groceryViewController`，因此它不会引用您要从中捕获信息的相同内存位置。

# php - 在 ACL 检查失败时绕过 method()/function() 代码。不使用 IF 语句，否则返回；

> ID：10679274
> 
> 赞同：0
> 
> 时间：2012-05-21T03:41:34.600
> 
> 标签：php, kohana, kohana-3

我正在使用带有 Controller_Template 的 Kohana 3.2。基本上我想做的是检查每个action_method的ACL。如果失败，则加载拒绝访问视图并跳过其余的 action_method 代码；否则继续加载。

我知道我可以使用 if...else 语句来做一个简单的布尔检查（甚至做一个），但我希望有一种更优雅的方式来处理它，并且在... if`if(check_permission())return;`中使用最少的无关代码`action_page()`可能，只是`check_permission();`。我可以在其中添加更多代码`function check_permission()`

```
function check_permission() {
    $this->template->content = View::factory('system/access_denied')
        ->bind('title', $title);
    $title = 'Access Denied';
}

function action_page() {
    check_permission();

    $this->template->content = View::factory('page/index')
        ->bind('title', $title);
        ->bind('data', $data);

    $title = 'Page loaded';
    .
    .
    .
} 
```

也许在 kohana 中有一些方法可以实现这一点？原生php也不错...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:18:49.110

如果您需要一个不错的 ACL 模块，您可以使用[Zend Framework 的 Acl](http://framework.zend.com/manual/de/zend.acl.html)。[这](https://github.com/kolanos/kohana-zend)是包含 Zend 框架的 Kohana 模块。

你可以像这样使用它：

开始：

```
$acl = new Zend_Acl(); 
```

添加角色：

```
$acl->addRole(new Zend_Acl_Role('guest'))
  ->addRole(new Zend_Acl_Role('member'))
  ->addRole(new Zend_Acl_Role('admin')); 
```

添加资源（控制器）：

```
$acl->add(new Zend_Acl_Resource('someController')); 
```

允许访问资源（控制器）的角色和权限（操作）：

```
 $acl->allow('member', 'someController' array('page')); 
```

然后在您获得用户许可之前检查您：

```
public function befor() 
{
    $role = .... // role from user
    $resource = $this->request->controller();
    $action = $this->request->action();

    if ($acl->isAllowed($role, $resource, $action)) 
    {
      //...redirect
    }
} 
```

这是，你在找什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:47:02.417

我想[`Request::current()->redirect('...')`](http://kohanaframework.org/3.2/guide/api/Request#redirect)有[`befor()`](http://kohanaframework.org/3.2/guide/api/Controller_Template#before)帮助你的意愿。

像这样：

```
 public function befor() 
  {
    parent::befor();

    if (... have no access) 
    {
       Request::current()->redirect('access/denied');
    }
  } 
```

...

```
Class Access extends Controller_Template {

  public function action_denied() 
  {
    $this->template->content = View::factory('system/access_denied')
        ->bind('title', $title);
    $title = 'Access Denied';
  }
} 
```

# node.js - Coffeescript 中的“扩展”和 node.js 中的“util.inherits”之间的区别

> ID：10679276
> 
> 赞同：14
> 
> 时间：2012-05-21T03:42:09.510
> 
> 标签：node.js, coffeescript

我最近在学习 Node.js。`util.inherits`我对Node.js中的函数有疑问。我可以`extends`在咖啡脚本中使用来替换它吗？如果不是，它们之间有什么区别？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-21T04:04:38.663

是的，您可以使用`extends`它来代替它。

至于区别？让我们先来看看 CoffeeScript：

```
class B extends A 
```

让我们看看[CoffeeScript 编译器](http://coffeescript.org/#try:class%20B%20extends%20A)为这个 JavaScript 生成的 JavaScript：

```
var B,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

B = (function(_super) {

  __extends(B, _super);

  function B() {
    return B.__super__.constructor.apply(this, arguments);
  }

  return B;

})(A); 
```

所以，用于声明和`__extends`之间的继承关系。`B``A`

`__extends`让我们在 CoffeeScript 中重述一下更具可读性：

```
coffee__extends = (child, parent) ->
  child[key] = val for own key, val of parent

  ctor = ->
    @constructor = child
    return
  ctor.prototype = parent.prototype

  child.prototype = new ctor
  child.__super__ = parent.prototype

  return child 
```

[（您可以通过将其编译回 JavaScript](http://coffeescript.org/#try:coffee__extends%20%3D%20(child%2C%20parent)%20-%3E%0A%20%20child%5Bkey%5D%20%3D%20val%20for%20own%20key%2C%20val%20of%20parent%0A%0A%20%20ctor%20%3D%20-%3E%0A%20%20%20%20%40constructor%20%3D%20child%0A%20%20%20%20return%0A%20%20ctor.prototype%20%3D%20parent.prototype%0A%0A%20%20child.prototype%20%3D%20new%20ctor%0A%20%20child.__super__%20%3D%20parent.prototype%0A%0A%20%20return%20child)来检查它是否是一个忠实的复制品。）

这是正在发生的事情：

1.  直接找到的所有键`parent`都设置在 上`child`。
2.  创建了一个新的原型构造函数`ctor`，将其实例的`constructor`属性设置为子级，并将其`prototype`设置为父级。
3.  子类的`prototype`设置为`ctor`. `ctor`'s`constructor`将被设置为`child`，而`ctor`'s 原型本身是`parent`.
4.  子类的`__super__`属性设置为`parent`'s `prototype`，供 CoffeeScript 的`super`关键字使用。

[node的文档](http://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor)描述`util.inherits`如下：

> 将原型方法从一个构造函数继承到另一个构造函数。构造函数的原型将被设置为从 superConstructor 创建的新对象。
> 
> 作为一个额外的便利， superConstructor 可以通过 constructor.super_ 属性来访问。

`util.inherits`总之，如果您使用的是 CoffeeScript 的类，则不需要使用；只需使用 CS 为您提供的工具，您就可以获得`super`关键字等奖励。

# mysql - 我创建了两个表尝试为第二个创建外键，它不起作用，但是当我从第二个创建它时我能够得到它，为什么？

> ID：10679277
> 
> 赞同：-3
> 
> 时间：2012-05-21T03:42:25.513
> 
> 标签：mysql, foreign-keys, mysql-error-1452

> > 第一个表“A”由 refid（主键）、姓名、性别、年龄、状态组成 第二个表“b”由 refid（主键）和 statename 组成，当我在表 A 中编写查询以引用 B 时，它没有'不起作用，但是当我从表 B 中尝试时它起作用了 1）为什么我无法从表 A 访问？

2）我想知道从A引用它和从B引用它有什么区别？

```
 ALTER TABLE A
         ADD FOREIGN KEY (refId)
         REFERENCES B(refId)

         // it doesn't work

         ALTER TABLE B
         ADD FOREIGN KEY (refId)
         REFERENCES A(refId)

         // it works 
```

通过“不工作”，我的意思是我从外键中得到一个错误：

```
#1452 - Cannot add or update a child row: a foreign key constraint fails
(testdrive.<result 2 when explaining filename '#sql-4b8_8d'>, CONSTRAINT
#sql-4b8_8d_ibfk_1 FOREIGN KEY (refid) REFERENCES reserve (refid)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:35:09.700

你说你得到一个

> 无法添加或更新子行：外键约束失败

当你有一个 FK from `A.refid`to时出错`B.refid`：

```
ALTER TABLE A
ADD FOREIGN KEY (refId)
REFERENCES B(refId) 
```

外键用于维护引用完整性，因此如果您有一个 FK from `A.refid`to `B.refid`，那么您不能插入`refid=X`到`A`，除非`refid=X`已经在`B`. 错误消息告诉您您正在尝试插入（或更新）一个不在的`refid`值，例如：`A``B`

```
insert into A (refid) values (1);
insert into B (refid) values (1); 
```

如果将 FK 反转为指向 from`B.refid`到，`A.refid`则上面的 INSERT 序列将起作用。或者，您可以反转 INSERT：

```
insert into B (refid) values (1);
insert into A (refid) values (1); 
```

这样外键就不会被破坏。

# sql-server-2008 - SQL Server 左连接“With”表

> ID：10679282
> 
> 赞同：0
> 
> 时间：2012-05-21T03:43:47.993
> 
> 标签：sql-server-2008

我有一个看起来像这样的查询

```
WITH CTE AS 
(
 SELECT
    ROW_NUMBER() OVER(PARTITION BY JobID ORDER BY JobID) AS RowNbr,JobsTagMap.JobID
 FROM JobsTagMap
)
SELECT 
    *,
    STUFF((SELECT ',' + Title 
           FROM Tags
           JOIN JobsTagMap ON Tags.TagID = JobsTagMap.TagID
           WHERE JobsTagMap.JobID = CTE.JobID
           FOR XML PATH('')
          ), 1, 1, '') AS Title
FROM CTE
WHERE CTE.RowNbr = 1 
```

现在，我想做这样的事情（上面的查询称为“我的大查询”）

```
SELECT * FROM Jobs LEFT JOIN ('my big query') q on Jobs.JobID=q.JobID 
```

但是当我这样做时，我得到一个错误

> 关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

我应该如何加入这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:49:19.410

试试这个：

```
;WITH Cte AS 
(
    SELECT Row_number() OVER(partition BY JobID ORDER BY JobID) AS RowNbr, 
         JobsTagMap.JobID 
    FROM JobsTagMap
), FinalCte AS
( 
    SELECT*, 
                Stuff ((SELECT ',' + Title 
                                FROM   Tags 
                                             JOIN JobsTagMap 
                                                 ON Tags.TagID = JobsTagMap.TagID 
                                WHERE  JobsTagMap.JobID = CTE.JobID 
                                FOR xml path('')), 1, 1, '') AS Title 
    FROM   cte 
    WHERE  CTE.RowNbr = 1 
)
SELECT * 
    FROM Jobs LEFT JOIN FinalCte q 
        ON Jobs.JobID=q.JobID 
```

# php - 子窗口启动时父窗口灰显

> ID：10679283
> 
> 赞同：1
> 
> 时间：2012-05-21T03:43:57.730
> 
> 标签：php, javascript, jquery, ajax, jquery-ui

我正在寻找一种方法来做到这一点：

1.  Javascript 函数，可打开一个显示我的员工列表视图的弹出窗口
2.  当弹出窗口打开灰色父/打开器窗口时
3.  当弹出窗口关闭时，父窗口“面纱”被移除。

感谢您提供任何代码或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T03:45:50.873

我的理解是这样的……

您正在尝试使用称为“覆盖”的东西（在父项打开时将灰色背景放在子项中）。这被称为模态弹出窗口，在这里我给你一个插件链接，以便将它们与 jQuery 一起使用：

[http://www.designlabelblog.com/2009/03/20-ways-to-create-javascript-modal.html](http://www.designlabelblog.com/2009/03/20-ways-to-create-javascript-modal.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:18:12.037

这是我为此构建的解决方案，可通过`open()`或`close()`

您可以将所有内容粘贴在其中`#container`

*   [http://jsfiddle.net/mikeymagic/eT2Lz/17/](http://jsfiddle.net/mikeymagic/eT2Lz/17/)

**的HTML：**

```
<span id="empli">Employees</span>

<div id="block"></div>
<div id="container">
    <h3>Employees</h3>
    <ul>
        <li>James</li>
        <li>Jemima</li>
        <li>lenny</li>
        etc..
    </ul>
    <span id="closebtn">Close</span>
</div>​ 
```

**的CSS：**

```
* { font-family: Trebuchet MS; }
#container {width:90%; height: 90%; display: none; position: fixed;margin-top: 5%; margin-left: 5%; background:#FFF; border: 1px solid #666;border: 1px solid #555;box-shadow: 2px 2px 40px #222; z-index: 999999;}
#container iframe {display:none; width: 100%; height: 100%; position: absolute; border: none; }
#block {background: #000; opacity:0.6;  position: fixed; width: 100%; height: 100%; top:0; left:0; display:none;}
ul { padding:10px; background: #EEE; position: absolute; height: 200px; overflow: scroll;}
ul li {color: #222; padding: 10px; font-size: 22px; border-bottom: 1px solid #CCC;  }
h3 { font-size: 26px; padding:18px; border-bottom: 1px solid #CCC; }
#closebtn { top: 13px;position: absolute;right: 13px; padding: 10px; background: #EEE; border: 1px solid #CCC;}
#closebtn:hover {  cursor: pointer; background: #E5E5E5 }

#empli { top: 13px;position: absolute;left: 13px; padding: 10px; background: #EEE; border: 1px solid #CCC;}
#empli:hover {  cursor: pointer; background: #E5E5E5 } 
```

​<strong>jquery：

```
function open() {
    $('#block').fadeIn();
    $('#container').fadeIn();   
}

function close() {  
    $('#block').fadeOut();
    $('#container').fadeOut();  
}

$(document).ready(function() {
  $('ul').css({width: $('#container').width()-20,height:    $('#container').height()-90})

     $('#closebtn').click( function() { close() })
     $('#empli').click( function() { open() })

}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:45:23.347

只需使用`window.open`然后添加一些您需要将父窗口灰显的条件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T04:05:27.237

如何做到这一点有很多变化。面对同样的需求，我最终决定使用 jQuery.impromptu。一旦定义了窗口的内容，我就会弹出它，同时用一个阶段将父级灰显：

```
 $.prompt(sFirstText,{overlayspeed:'fast',prefix:'wideJqi',top:80}); 
```

[您可以在http://terryliittschwager.com/WB/JWB.php](http://terryliittschwager.com/WB/JWB.php)看到它。

Impromptu 可在[http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)获得。

# php - 这种模型结构容易死循环吗？

> ID：10679292
> 
> 赞同：0
> 
> 时间：2012-05-21T03:45:06.930
> 
> 标签：php, mysql, sql, codeigniter, infinite-loop

我正在尝试在我的 codeigniter 应用程序上调试一个问题，其中我的服务器返回 500 错误，因为当我尝试加载包含多个帖子的页面时它会永远挂起。

此错误是间歇性的。10 次中有 7 次，我的页面加载速度很快，CI 的分析器显示执行时间 < 0.6。

该模型使用这种结构，其中将根据发出的请求（即我的帖子、收藏夹、其他帖子）插入不同的 FROM 子句。没有 SQL 错误，没有 PHP 错误。只有处理的显着延迟和一些 Apache 错误，如

```
[Sat May 19 21:27:21 2012] [warn] mod_fcgid: process 21174 graceful kill fail, sending SIGKILL
[Sat May 19 21:27:27 2012] [notice] mod_fcgid: process /var/www/vhosts/example.com/httpdocs/blog/index.php(21174) exit(communication error), get stop signal 9 
```

这种 SQL 模型是否容易出现无限循环或其他可能证明我的服务器发疯的问题？

```
class Home_model extends CI_Model {

    function __construct()
    {
        parent::__construct();
    }

    function count_posts($author_id = NULL, $section = NULL, $user_id = NULL, $origin = NULL)
    {
        $clause = $this->clause($author_id, $section, $user_id, $origin);

        $query = $this->db->query("
        SELECT  *
        $clause
        ");

        return $query->num_rows;
    }

    function clause($author_id, $section, $user_id, $origin = NULL)
    {
        if ($section == 'favorites') {

            $clause  = "FROM post RIGHT JOIN favorites ON post_id_fk = post_id WHERE user_id_fk = $user_id";

        } elseif (($section == 'posts') AND ($origin == 'user')) {

            $clause = "FROM post WHERE post_author_id = $author_id";

        } else {

            if ($author_id == NULL) {

                $clause = "FROM post";

            } else {

                $clause = "FROM post WHERE post_author_id = $author_id";
            }
        }

        return $clause;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:25:08.270

我猜在你看来你会做类似的事情

```
for ($i=0; $i<$this->count_posts(); $i++){
         // show posts
  } 
```

?

您可以发布您的查看代码吗？

但是鉴于您可能正在做类似的事情 - 可以合理地假设模型中的 count_posts() 函数可能返回错误的数字，从而导致您的循环变得无限。

要调试它，请执行以下操作

```
//for ($i=0; $i<$this->count_posts(); $i++){
         // show posts
// }
echo $count_posts(); 
```

看看输出是否总是你所期望的......

# c# - C# 从另一个表单访问表单的组合框项目

> ID：10679296
> 
> 赞同：1
> 
> 时间：2012-05-21T03:45:20.660
> 
> 标签：c#, forms, combobox

我有两种形式：form1 和form 2。comboBox 在form2 中。我正在尝试将一个项目添加到 form1 的组合框选项列表中。这是我到目前为止所尝试的。

```
form1:          
var form2 = new Form2();                   
if (variable == "value") {           
  form2.Controls["ComboBox1"].Items.Add("another item")          
}

this.Hide();          
form2.Show; 
```

这个问题是它不允许我选择项目。（它不允许我输入 .Items.Add）

* * *

我还尝试通过在表单中​​单击它并将私有更改为公共来公开组合框。这就是我改变它时的样子。

```
public void comboBox1_SelectedIndexChanged(object sender, EventArgs e){
} 
```

但是当我尝试访问`comboBox1`所有可用的内容时：

```
comboBox1_SelectedIndexChanged

form2.comboBox1    //This doesn't work            
form2.comboBox1_SelectedIndexChanged   //This is the only option available 
```

我可能犯了很多错误，但那是因为我对此很陌生。我刚开始学习，所以如果你能试着简单地解释一下，那会有所帮助。如果可能，请避免 get{} set{} 事情。请向我解释如何以不同的形式公开按钮和其他内容，因为我知道单击它并将私有更改为公开并不是我在上面示例中所做的正确方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-22T19:20:30.613

转到可视化 UI 设计器并在属性中找到修饰符并将其更改为 Public： ![在此处输入图像描述](../Images/dc8683e2c984a18487d54a5c9c4a4e3f.png)

现在您需要对代码进行一些小改动：

```
var form2 = new Form2();                   
if (variable == "value") {           
 form2.ComboBox1.Items.Add("another item");      
}

this.Hide();          
form2.Show; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:52:13.637

You should write a public method on the Form2 adding items to the combo box on this.

```
public class Form2 : Form {
    ...

    public void AddItem(object item) {
       comboBox1.Items.Add(item);
    }

    ...
} 
```

That way, you just call that method on Form1.

```
form2.AddItem(variable); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:57:58.940

it's best to use event handler to do this, you register an event handler in form 1 with the corresponding method when this event handler is called. Then call this event handler in form2\. The method will be responsible to add item to the combo box.

# spring - 带有动态参数的spring中的@constructor

> ID：10679303
> 
> 赞同：0
> 
> 时间：2012-05-21T03:46:03.057
> 
> 标签：spring, constructor, autowired

我有一个要求，我必须使用 spring 自动装配来调用类构造函数。

旧代码如下 -

```
public void method(String arg){
 MyClass obj = new MyClass(arg);
 System.out.println("Constructor called with parameter : " + obj.toString());
} 
```

我得把上面的代码改成spring。我已经阅读了关于 sprinsource 的教程，但找不到解决方案。

我是 Spring 框架的新手，因此我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:18:03.707

看起来您可以从[*3.4.6.1 Lookup method injection*](http://nurkiewicz.blogspot.com/2010/08/creating-prototype-spring-beans-on.html)中受益。但是，它目前不支持参数化构造函数，请参阅[SPR-7431](https://jira.springsource.org/browse/SPR-7431) - 此票证很可能会在 Spring 3.2 中修复。

另请参阅[我](http://nurkiewicz.blogspot.com/2010/08/creating-prototype-spring-beans-on.html)描述该功能的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:40:54.383

This seems to be a method, not a constructor. Also, there is plenty of material on the web if you search. e.g. [here](http://blog.springsource.org/2007/05/14/annotation-driven-dependency-injection-in-spring-21/)

# ruby-on-rails - 如何在初始化文件Rails中获取域URL

> ID：10679304
> 
> 赞同：5
> 
> 时间：2012-05-21T03:46:16.743
> 
> 标签：ruby-on-rails, initializer, domain-name

我想知道是否可以获取域 url 即

```
localhost or myapp.heroku.com 
```

从初始化文件？

我相信

```
request.url 
```

并且请求方法仅适用于控制器。是否有相当于 javascript

```
document.domain 
```

我可以在初始化文件中做什么？或者我可以用javascript嵌入.rb文件吗？或请求对象的其他替代方案？

我尝试了一些不起作用的东西，例如

```
Rails.root 
```

并且很难弄清楚。

谢谢你=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:56:07.017

我刚刚将我的一个应用程序更改为暂存环境。我无法让插座工作。

```
heroku config:add RAILS_ENV=staging --app myapp-staging
heroku config:add RACK_ENV=staging --app myapp-staging 
```

然后我在我的环境文件夹中创建了一个 staging.rb 文件（我只是从我的生产文件中复制并粘贴了所有内容）并且 rails 能够推断出该方法

```
Rails.env.staging? 
```

在我的初始化程序中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T03:50:01.547

就像是：

```
require 'socket'

Socket.gethostname 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-10T14:45:50.747

您的应用程序只能在服务请求时确定它的域。（因此它可用于 中的控制器`request`。）在初始化程序中，它在启动时执行一次，在任何请求得到服务之前，这是不可能的。（除非您，维护者，提前知道域并在配置中指定它，例如在环境变量中。）

一个应用程序甚至可以在多个域上运行。然后每个请求可能有不同的域。

# iphone - 由于未捕获的“NSUnknownKeyException”而终止应用程序，

> ID：10679307
> 
> 赞同：0
> 
> 时间：2012-05-21T03:47:36.397
> 
> 标签：iphone

不断收到此代码的此错误，我使用了它崩溃的断点

```
GameSelect *selectGame = [[GameSelect alloc] initWithNibName:nil bundle:nil]; 
```

我不知道发生了什么我只是从一个笔尖切换到另一个笔尖

```
- (IBAction)playButtonPressed:(UIButton *)sender {
    GameSelect *selectGame = [[GameSelect alloc] initWithNibName:nil bundle:nil];
    selectGame.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:selectGame animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:59:25.333

your initWithNibName is set to nil. You should put a name for your nib.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:25:31.387

尝试将您的 nib 文件名放在这里： GameSelect *selectGame = [[GameSelect alloc] initWithNibName:@"" bundle:nil];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:26:36.737

制作如下，

```
- (IBAction)playButtonPressed:(UIButton *)sender 
{
    GameSelect *selectGame = [[GameSelect alloc] initWithNibName:@"GameSelect" bundle:nil];
    selectGame.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:selectGame animated:YES];
} 
```

如果您的笔尖名称是任何其他名称而不是“GameSelect”，请给出“您的笔尖名称”。

# sybase - Sybase 中的数据库/对象/查询更改通知

> ID：10679309
> 
> 赞同：1
> 
> 时间：2012-05-21T03:48:15.963
> 
> 标签：sybase

Oracle 具有 CQN 或更改通知功能，允许客户端在数据库中的查询/对象更改时注册回调。Sybase中是否有类似的功能特性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T11:21:39.813

没有可能的直接回调机制。但是您可以做的是使用触发器发送带有`syb_sendmsg()`. 这可以发送到任何可从 Sybase 服务器访问的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:46:20.573

您没有指出您使用的是哪个版本的 Sybase。ASE 12.5 和 15 没有任何此类功能。

# hibernate - 表不使用休眠更新

> ID：10679312
> 
> 赞同：1
> 
> 时间：2012-05-21T03:48:24.073
> 
> 标签：hibernate

我正在使用休眠将记录更新到表中。程序执行良好，但记录未更新。你能建议可能是什么问题吗？

配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
    <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="hibernate.connection.url">jdbc:oracle:thin:@localhost:1521:orcl</property>
    <property name="hibernate.connection.username">scott</property>
    <property name="hibernate.connection.password">tiger</property>
    <property name="show_sql">true</property>
    <mapping resource="com/hibernate/demo/employee.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

表配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
  <class name="com.hibernate.demo.Employee" table="EMP">
      <id name="empnum" type="integer" column="EMPNO">
  <generator class="assigned"/>
  </id>

  <property name="empnum" insert="false" update="false">
      <column name="EMPNO"/>
  </property>
  <property name="name">
      <column name="ENAME"/>
  </property>
  <property name="job">
      <column name="JOB"/>
  </property>

  </class>    
</hibernate-mapping> 
```

表的 Java 文件

```
package com.hibernate.demo;

/**
 *
 * @author Anil Modipalle
 */
public class Employee {

    private int empnum;
    private String name;
    private String job;

    /**
     * @return the empnum
     */
    public int getEmpnum() {
        return empnum;
    }

    /**
     * @param empnum the empnum to set
     */
    public void setEmpnum(int empnum) {
        this.empnum = empnum;
    }

    /**
     * @return the name
     */
    public String getName() {
        return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * @return the job
     */
    public String getJob() {
        return job;
    }

    /**
     * @param job the job to set
     */
    public void setJob(String job) {
        this.job = job;
    }
} 
```

会话工厂文件：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.hibernate.demo;

import java.io.File;
import org.hibernate.*;
import org.hibernate.cfg.Configuration;

/**
 *
 * @author Anil Modipalle
 */
public class Update {

    public static void main(String args[]){

        Session ses = null;

        try{

            SessionFactory sf = new Configuration().configure().buildSessionFactory();

            ses = sf.openSession();

            System.out.println("inserting record");

            Employee emp = new Employee();

            emp.setEmpnum(1010);
            emp.setName("Anil");
            emp.setJob("Manager");

            ses.save(emp);            
        }
        catch(Exception e){
        e.printStackTrace();
        }

        finally{

        ses.flush();
        ses.close();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:12:21.803

使用事务

```
Transaction transaction = session.beginTransaction();

// your save goes here

transaction.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:01:38.483

在事务中执行更新。一开始从 Session 中检索事务，最后提交。

# android - 如何在独立的 android 服务中避免 ANR

> ID：10679315
> 
> 赞同：2
> 
> 时间：2012-05-21T03:49:19.147
> 
> 标签：android, service

您好，感谢您的帮助：

我想将 Java 系统移植到 Android，并且我想通过透明的独立服务将其提供给 3rd 方应用程序，因此它类似于系统库。该系统是一个 VoiceXML 解释器，它将解释由 3rd 方应用程序处理的文档并将结果发回给它。解释这些文件可能需要任意时间，甚至是很长的时间。

现在，我有一项服务可以创建完成所有工作的解释器。我在一个名为 startJVoiceXML() 的方法中执行此操作。

问题是我的服务在服务创建后大约 20 到 30 秒被 Android 杀死并出现 ANR。但是，如果我不在该方法上做任何繁重的工作（只是之前的代码），则服务将继续运行，并且不会在更长的时间内被杀死。

我需要创建一个线程来做我需要做的事情吗？我在代码中添加了一些注释以供进一步解释。

谢谢！

```
 public synchronized void startJVoiceXML(final URI uri) throws JVoiceXMLEvent, InterruptedException
    {
    AndroidConfiguration config = new AndroidConfiguration();
    jvxml = new JVoiceXmlMain(config);
    jvxml.addListener(this);
    jvxml.start();
    int a=0;

            //the wait is not the problem, the jvxml object run method calls jvxmlStarted in the service that does a .notifyAll() on this thread
    this.wait();    

            //this while is just to "do" some long running operation in order to emulate the Interpreter behaviour
    while(a<1000)
    {
        Thread.sleep(500);
        Log.e("JVoiceXML","esto en el while");
        a=a+1;
    }

    }

    public synchronized void jvxmlStarted() {
     this.notifyAll();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:19:45.050

[您应该在](http://developer.android.com/guide/topics/fundamentals/services.html)单独的线程中运行 CPU 密集型代码，如下所述：

> 服务在其宿主进程的主线程中运行——该服务不会创建自己的线程，也不会在单独的进程中运行（除非您另外指定）。这意味着，如果您的服务要执行任何 CPU 密集型工作或阻塞操作（例如 MP3 播放或网络），您应该在服务中创建一个新线程来完成这项工作。通过使用单独的线程，您将降低应用程序无响应 (ANR) 错误的风险，并且应用程序的主线程可以保持专用于用户与您的活动的交互。

# embed - Spotify 在 iOS 上嵌入播放按钮

> ID：10679319
> 
> 赞同：0
> 
> 时间：2012-05-21T03:50:21.970
> 
> 标签：embed, spotify

有没有办法为 iOS 网络浏览器调整 Spotify 播放按钮嵌入小部件的大小。当我从 iPhone 上查看时，播放器显示为最大宽度（~450 像素）和最大高度（~800 像素），这比我设置的 250x330 像素大得多。我将它作为一个小部件嵌入到 wordpress 网站上。我的嵌入代码如下。

```
<iframe src="https://embed.spotify.com/?uri=spotify:user:121423693:playlist:13BiALujfGYzQgNMhuffsJ&theme=white" width="250" height="330" frameborder="0" allowtransparency="true"></iframe> 
```

我的代码有问题吗？我似乎在移动设备上找不到有关此小部件的任何文档。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:08:21.587

几周前有一个错误，即在 iOS 上的 Safari 中，即使 iframe 设置为较小的尺寸，它也总是将播放按钮呈现在其全部荣耀中，此问题已得到修复。

我认为我们不支持比 250x80（小视图）或 250x330（封面/列表视图）更小的 iframe

# asp.net-mvc-3 - 我可以在 MVC3 的模型中包含视图吗

> ID：10679322
> 
> 赞同：1
> 
> 时间：2012-05-21T03:51:18.643
> 
> 标签：asp.net-mvc-3

我有一个模型，其中 Area 是谷歌地图覆盖（区域）详细信息，AreaData 是用于在谷歌地图中呈现区域的数据。

```
public class AreaDetailsViewModel
{
     public Area Area{get;set;}
     public AreaData Data{get;set;}
} 
```

现在的问题是我正在尝试使用 ajax 调用同时检索视图和数据。

但是如果我将整个数据作为 json 返回，我将无法查看；如果我以 html 形式返回，我会将 areadata 包含到 html 中。

因为我需要本地化视图，所以我不能只检索没有本地化标签信息的数据。

那么我可以将视图包含在模型中吗？

```
public class AreaDetailsViewModel
{
     public View AreaView{get;set;}
     public AreaData Data{get;set;}
} 
```

但这似乎很奇怪，我真的需要你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:27:53.657

MVC 的工作方式是你有一个视图（可能是 HTML、部分 HTML、JSON、XML ......）和一个控制器动作，它填充一个模型（视图显示所需的所有数据）并传递这个模型到视图。

因此，在您的示例中，您可以有一个控制器操作，该操作将使用 AJAX 调用进行查询，并将模型传递给部分视图，该部分视图将以所需的格式显示此数据。

# c++ - Easy way to create my output stream and keep with with a specific format in C++?

> ID：10679327
> 
> 赞同：0
> 
> 时间：2012-05-21T03:52:30.653
> 
> 标签：c++, output-formatting

There are several ways to do this (I believe). But I simply want a stream that will get all my data and output it to console. I tried using a `stringstream` by setting the `strinstream::out` flag and then doing a `cout` on the `str()` member function, but it didn't work as I expected.

Example:

```
somestream myS;
myS.flags(ios::left);
myS<<data<<data<<data<<endl; 
```

This will either automatically output to console or I will have to do it manually (Somehow). The data will always be formatted to what I set.

P.s.: I can't use printf, or boost.

Thanks for your attention

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:58:16.853

sprintf 对于以有用的方式打印出字符串/空终止字符串很有用。它很旧，但它有效。它可以采用可变参数等。 [sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/) (sprintf)

# php - 将数据库中的数据调用到具有行跨度的表中

> ID：10679328
> 
> 赞同：0
> 
> 时间：2012-05-21T03:52:44.320
> 
> 标签：php, mysql, html

我的数据库中有一个表“所有者”，其中一个字段（系统）保存了文本区域框中的数据。

表所有者；

```
staf_id || name || system 
```

下面是 textarea 框的输入示例；

```
aimsweb
elearning
registration 
```

该示例显示每行代表不同类型的系统。我如何将系统字段中的数据调用到下表中？

[表 http://img546.imageshack.us/img546/1170/31920845.png](http://img546.imageshack.us/img546/1170/31920845.png)

当它被调用时，“Staf ID”和“Name”列将根据 textarea 中的输入增加其行跨度。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:04:37.300

在 php 中，您可以使用：

```
$rows_in_text_area = explode( "\n", $system ); 
```

这应该为您提供文本区域中的文本行数。从那里应该可以直接`$rows_in_text_area`在员工 ID 和名称单元格中使用行跨度，如下所示：

```
<td rowspan="$rows_in_text_area">$name</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:00:34.723

“这个例子表明，每一行代表不同的类型系统。” - 这是一个坏表结构的例子。您应该有一个包含以下列的新表 System（例如：StaffID、System

但是，如果您想以这种方式使用它并回到您的问题：不，它不会增加行跨度。它只会使系统单元格更大。如果您没有将换行符转换为
甚至没有，因为文本将显示在一行中。

# objective-c - Can't set text and segmentedCtrl in UINavigationBar

> ID：10679329
> 
> 赞同：0
> 
> 时间：2012-05-21T03:52:44.543
> 
> 标签：objective-c, ios, xcode, ipad, uinavigationbar

I try to call UINavigationBar @ main page. It shows navigationbar but without text and segmented controll. I dont know why it doesn't show. Please help me why and how I fix it.

Here is code

@MainController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NavigationBar = [[BINavigationBar alloc] init];

    [self.view addSubview:[NavigationBar getNavigationbar:@"Desktop"]];
} 
```

@BINavigationBar.m

```
-(UINavigationBar *)getNavigationbar:(NSString *)name
{
    navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 1024, 44)];
    //UILabel *namelb = [[UILabel alloc] init];
    //namelb.text = @"DesktopTest";
    //[navigationBar.topItem.titleView addSubview:namelb];
    navigationBar.topItem.title = @"Desktop";

    UIBarButtonItem *segmentBarItem = [[UIBarButtonItem alloc] initWithCustomView:[self getSegmentedControl]];
    navigationBar.topItem.rightBarButtonItem = segmentBarItem;

    return navigationBar;
}

-(UISegmentedControl *)getSegmentedControl
{
    UISegmentedControl *segmented = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"Archieve", @"Desktop", @"Library", nil]];
    segmented.frame = CGRectMake(0, 2, 120, 40);
    segmented.segmentedControlStyle = UISegmentedControlStyleBar;

    return segmented;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T03:58:54.137

To set the title, just use:

```
navigationBar.topItem.title = @"Title" 
```

# javascript - How can I get single page inner text?

> ID：10679333
> 
> 赞同：3
> 
> 时间：2012-05-21T03:53:24.340
> 
> 标签：javascript, uiwebview

Using CSS3 columns to take a somewhat large text document and make it scroll horizontally. Here is demo of code.- [http://jsfiddle.net/wojtiku/bFKpa/](http://jsfiddle.net/wojtiku/bFKpa/)

I use "document.documentElement.innerText" js code ,get all document text,but I want to get a column text,How to do ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:03:29.107

您可以获取每列的根元素以及该元素的根`innerText`元素。

```
var elements = document.getElementById("container").getElementsByTagName("p");
for(var i = 0; i < elements.length; ++i) {
    console.log("COLUMN " + i + "\n");
    console.log(elements[i].innerText);
}; 
```

小提琴：http: [//jsfiddle.net/4mHCb/3/](http://jsfiddle.net/4mHCb/3/)

您可以打开浏览器的 JS 控制台并查看输出（chrome 中的 ctrl+shift+j）。

**编辑**

感谢 voithos 指出我忽略的内容。考虑到他所说的话，我很确定没有办法准确地做到这一点。但是，这是一个与您正在寻找的近似的总黑客。它使用屏幕外[画布](https://developer.mozilla.org/en/Canvas_tutorial)和 2d 上下文的[mesaureText](https://developer.mozilla.org/en/Drawing_text_using_a_canvas#measureText%28%29)方法：http: [//jsfiddle.net/4mHCb/5/](http://jsfiddle.net/4mHCb/5/)

```
var elements = document.getElementById("container").getElementsByTagName("p");
var g2d = document.createElement("canvas").getContext("2d");
var containerStyle = document.getElementById("container").style;

var columnWidth = 150;
var lineHeight = 18;
var columnHeight = 300;
var linesPerCol = columnHeight / lineHeight;
var results = [];
for(var i = 0; i < elements.length; ++i) {
    var colText = elements[i].innerText;
    var textWidth = g2d.measureText(colText).width;
    var numCols = textWidth / (columnWidth * linesPerCol);

    var charIdx = 0;
    for (var column = 0; column < numCols; ++column) {
       var currString = "";
       var currTextWidth = 0;
       for (; charIdx < colText.length && currTextWidth < columnWidth*linesPerCol;    ++charIdx) {
           currString += colText[charIdx];
           currTextWidth = g2d.measureText(currString).width;
       }
       results.push(currString);
   }
}

for(var column = 0; column < results.length; ++column) {
   console.log("COLUMN: " + column);
   console.log(results[column]);
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:04:08.273

我不确定，这就是你想要得到的..

```
 var childElement= document.getElementById("container").getElementsByTagName("p");
 for(var i=0;i<childElement.length;i++)
 {
   alert(childElement[i].innerHTML);  
 } 
```

上面的代码片段返回 para 标记的集合，您可以循环并获取 html 内容。

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:17:31.593

没有简单的方法可以做到这一点。列不作为单独的 DOM 元素存在，不超过文本行。

您也许可以查找分栏符（例如，通过在文本中插入一堆大小为零的内联元素并查看它们的位置），但这将是一个混乱且容易出错的过程。

# c++ - Visual Studio 包含文件中的意外错误

> ID：10679341
> 
> 赞同：1
> 
> 时间：2012-05-21T03:54:37.460
> 
> 标签：c++, windows, visual-studio-2010

我已经使用 f2c 转换器 ( [f2c](http://www.netlib.org/f2c/) ) 将一些旧版 Fortran 代码转换为 C，并且我已经在 Windows 7（64 位）上使用 Cmake 创建了一个 Visual Studio 10 解决方案。我还必须将我的 C++ 程序（test.cpp，包含我的 main 函数）与 f2c 库（使用 nmake 在我的系统上构建）链接起来。尽管我与 CMake 和 Visual Studio 进行了广泛的合作，但在编译程序后，我现在收到了一些与 Visual Studio 附带的头文件相关的神秘错误：

```
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\intrin.h(141): error C2059: syntax error : '('
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\intrin.h(141): error C2059: syntax error : '-'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\intrin.h(141): error C2059: syntax error : ')'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2027: use of undefined type '_Ty'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2226: syntax error : unexpected type 'std::complex<_Other>'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2988: unrecognizable template declaration/definition
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2059: syntax error : '-'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2065: '_Ty' : undeclared identifier
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(250): error C2059: syntax error : ')'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(263): error C2065: '_Ty' : undeclared identifier
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(263): error C2065: '_Ty' : undeclared identifier
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(264): error C2143: syntax error : missing ';' before '{'
2>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xcomplex(264): error C2447: '{' : missing function header (old-style formal list?) 
```

从头开始创建 Visual Studio 解决方案文件似乎也不能很好地工作，而且我仍然收到相同的错误。我可以做些什么来追踪这些错误的问题？显然，我包含或编写的文件有问题，但它可能是什么？错误不会立即指向代码的某个部分，因此调试具有挑战性。

这是 f2c.h 头文件 ( [f2c.h](http://www.netlib.org/f2c/f2c.h) ) 的链接。我已经添加

```
#ifdef __cplusplus
extern "C" {
#endif 
```

到顶部和

```
#ifdef __cplusplus
 }
#endi 
```

到这个头文件的底部，因为我的 test.cpp 是一个 C++ 程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:50:07.293

似乎问题在于`f2c.h`定义了许多宏，包括一些用于数学函数的宏，例如`abs`. 当在标准标头中遇到相同的标识符时，这些宏会导致问题。

出于这个原因，我建议您始终将其包含`f2c.h`为文件中的最后一个标头（或`#undef`在包含其他文件之前包含冲突的宏）。

# playframework - Does guice module work in Play framework unittest?

> ID：10679342
> 
> 赞同：2
> 
> 时间：2012-05-21T03:54:42.623
> 
> 标签：playframework, playframework-1.x

I have some Play framework unit tests and I can't seem to inject Guice module..

Does Guice module works in the scope of unit test ?

Play 1.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:14:28.230

“guice 模块包含一堆测试（参见 modules/guice-1.2/tests），它们是在类路径中提取的，但并不是真正的意图。”（此评论属于 Mark Piper）

一个解决方案将运行

**玩 deps --forProd**

在测试模式下开始播放之前。

# google-app-engine - 使用 feedparser 访问评论

> ID：10679345
> 
> 赞同：0
> 
> 时间：2012-05-21T03:56:07.923
> 
> 标签：google-app-engine, feedparser

我有一个谷歌应用引擎应用程序，我正在尝试使用 feedparser 来访问对提要的评论。我正在使用来自 Google 博客示例的提要进行测试

```
<?xml version='1.0' encoding='utf-8'?>
<?xml-stylesheet href="http://www.blogger.com/styles/atom.css" type="text/css"?>
<feed xmlns='http://www.w3.org/2005/Atom'
   xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/'
   xmlns:gd='http://schemas.google.com/g/2005'
   gd:etag='W/"CUYMQ348fyp7ImA9WB9UFkU."'>
  <id>tag:blogger.com,1999:blog-blogID.postpostID..comments</id>
  <updated>2007-12-14T17:46:22.077-08:00</updated>
  <title>Comments on Lizzy's Diary: Quite disagreeable</title>
  <entry gd:etag='W/"CUYCQX47eSp7ImA9WB9UFkU."'>
     <id>tag:blogger.com,1999:blog-blogID.post-commentID</id>
     <published>2007-12-14T17:46:00.001-08:00</published>
     <thr:in-reply-to xmlns:thr='http://purl.org/syndication/thread/1.0' 
        href='http://blogName.blogspot.com/2007/12/quite-disagreeable_5283.html'
        ref='tag:blogger.com,1999:blog-blogID.post-postID'
        source='http://www.blogger.com/feeds/blogID/posts/default/postID'
        type='text/html' />
  </entry> 
```

目前，我的代码有

```
d= feedparser.parse(feedurl)
for child in d.entries:
   _url = child.thr_in-reply-to.href 
```

我收到错误消息

```
raise AttributeError, &quot;object has no attribute '%s'&quot; % key
AttributeError: object has no attribute 'thr_in' 
```

如何访问评论及其任何属性？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:33:12.743

看起来点符号即**child.thr_in-reply-to.href**不适用于其他名称空间。当我将其更改为

```
child['thr_in-reply-to']['href'] 
```

有效。

然而，点符号仍然适用于原子命名空间，即访问条目的 id，我仍然可以这样做

```
child.id 
```

# c# - 无法弄清楚如何使用 LINQ 替换或添加 XML 元素

> ID：10679348
> 
> 赞同：0
> 
> 时间：2012-05-21T03:57:11.250
> 
> 标签：c#, wpf, xml, linq

好的，所以我正在制作一个程序，您可以在其中选择当天，并添加当天吃的东西并将其记录到 xml 文件中。您还可以选择吃饭的时间，例如早餐后锻炼等。现在我的 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Log>
  <DAY date="11/8/1995" id ="1">
    <Breakfast>
      <food size="1">mys</food>
    </Breakfast>
    <MidAfternoon>
      <food size="2">mys</food>
    </MidAfternoon>
    <Lunch>
      <food size="0.5">mys</food>
    </Lunch>
    <PostWorkout>
      <food size="10">mys</food>
    </PostWorkout>
    <BeforeBed>
      <food size="20">mys</food>
    </BeforeBed>
  </DAY>
  <DAY date="5/20/12" id="2">
    <Breakfast>
      <food size="1">mys</food>
    </Breakfast>
    <MidAfternoon>
      <food size="2">mys</food>
    </MidAfternoon>
    <Lunch>
      <food size="0.5">mys</food>
    </Lunch>
    <PostWorkout>
      <food size="10">mys</food>
    </PostWorkout>
    <BeforeBed>
      <food size="20">mys</food>
    </BeforeBed>
 </DAY> 
```

我需要做的是 1 找出日期是否存在，如果不创建一个新的“DAY”（我知道怎么做），但如果它搜索 xml 文件并发现当前选择的日期（使用日期选择器）已经记录了一个 DAY 来确定用户是什么时候吃这种食物并将其添加到该部分中。

我们知道当用户通过组合框吃食物时，他们选择时间基本上我需要帮助的是如何通过使用“DAY”的日期属性缩小范围以找到正确的“DAY”，然后缩小搜索范围在“DAY”中找到正确的时间来放置新的。

```
<food size="numberhere">foodname</food> 
```

请帮助我到目前为止得到的只是：

```
 var NOD = from dates in xmlDoc.Descendants("DAY")
                  select dates;
        int i = 0;
        foreach (XElement d in NOD)
        {

            dlist[i] = d;
            i++;
        }

        for (int j = 0; j < i; j++ )
        {

            if (dlist[j].Attribute("date").Value == datePicker1.Text)
            {
                Console.WriteLine("this date already has a record");
                bRecorded = true;
                break; 
            }
            bRecorded = false;

        } 
```

另外，如果有人知道执行上述操作的更好方法，那将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:08:22.387

```
var day = xmlDoc
          .Elements("day")
          .FirstOrDefault(d => d.Attribute("date").Equals(datePicker1.Text)) 
```

如果`day`为空，则您没有记录日期。您继续：

```
if (day != null)
    day.Element(chosenMomentOfTheDay).Add(XElementOfTheFoodToBeAdded); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T14:27:38.333

如果您可以使用此库 ( [https://github.com/ChuckSavage/XmlLib/](https://github.com/ChuckSavage/XmlLib/) )，您可以通过以下方式之一使用它。

```
XElement root = XElement.Load(file);
//XElement day = root.XPathElement("DAY[@date={0}]", DateTime.Now.ToString("M/d/yy"));
XElement day = root.XPathElement("DAY[@date={0}]", DateTime.Now.Date));// or by specific new DateTime(2012, 5, 21)); 
```

如果返回 null，则该日期尚不存在。

```
if(null == day)
{
    // day not found
}
else
{
    // day found
} 
```

# javascript - 显示 json 数组中的所有项目

> ID：10679355
> 
> 赞同：7
> 
> 时间：2012-05-21T03:58:25.613
> 
> 标签：javascript, jquery, json

我正在尝试使用 json 并且我几乎拥有我需要的东西。我得到了要显示的正确信息，但我必须将数组的每个项目传递给一个变量，然后打印该变量。我想显示每个数组中的所有项目。我正在使用的 json 数据来自一个发票应用程序 ( [www.curdbee.com](http://www.curdbee.com) )，我正在尝试为客户显示每张发票。我要显示的数据是每个订单项、订单项价格和总金额。这是我的代码：

```
$(document).ready(function() {

    $.getJSON('https://nspirelab.curdbee.com/invoices.json?api_token=__token__', function(data){
        $.each(data, function(index, item){
            var total = item.invoice.total_billed;
            var lineItemName1 = item.invoice.line_items[0].name_and_description;
            var lineItemName2 = item.invoice.line_items[1].name_and_description;
            var lineItemPrice1 = item.invoice.line_items[0].price; 
            var lineItemPrice2 = item.invoice.line_items[1].price; 

            $('#results').append('<div class="lineItem"><ul><li>' + lineItemName1 + lineItemPrice1 + '</li><li>' + lineItemName2 + lineItemPrice2 + '</li><li>' + total + '</li></ul></div>');
        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T04:09:57.577

一个嵌套循环（或者，在 jQuery 中，一个嵌套的`$.each()`）将完成这项工作：

```
$.getJSON('https://nspirelab.curdbee.com/invoices.json?api_token=&client=104929', function(data){
   $.each(data, function(index, item){
      // create an empty ul (initially disconnected from the DOM)
      var $ul = $("<ul/>");

      // iterate over the line items
      $.each(item.invoice.line_items, function(i, lineItem) {
         // create an li element with the line details and append
         // it to the ul
         $ul.append( $("<li/>").html(lineItem.name_and_description + lineItem.price) );
      });

     // add the totals to the end of the ul
     $ul.append( $("<li/>").html(item.invoice.total_billed) );

     // create a new div, append the ul to it, and append the div to results
     $('#results').append( $('<div class="lineItem"/>').append($ul) );
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:04:34.610

有很多可笑的库可以让这样的事情变得更容易。搜索“javascript 模板”以查看您缺少的内容并了解您可以为此选择的各种库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:09:31.457

如果我正确理解了您的问题，我认为您正在寻找的是某种迭代机制，请尝试[underscore.js](http://underscorejs.org/)。

# algorithm - 贝尔曼-福特变体

> ID：10679359
> 
> 赞同：2
> 
> 时间：2012-05-21T03:59:03.540
> 
> 标签：algorithm, graph, bellman-ford

我在这里有一个更智能的 Bellman-Ford 版本：

```
 //Queue Q; source s; vertices u, v
    Q ← s // Q holds vertices whose d(v) values have been updated recently.
    While (Q !empty)
    {

    u ← Dequeue(Q)

     for each neighbor v of u
     {
        Relax(u, v)
        if d(v) was updated by Relax and v not in Q
           Enqueue(v)
     }
   } 
```

谁能想到这种算法的下限为 (V*E) 时间复杂度的图类型，其中 v = #vertices, E = #edges

我想看看这其中的陷阱在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:29:52.313

自从我上次考虑短路径算法以来已经有好几年了，如果我忘记了什么，请纠正我。

首先，我们将首先排除负加权周期情况，但它可能是最坏情况下表现的来源。

假设您访问了一个完整的图表。从第一个节点开始，您将排队 V-1 个节点，因为所有节点都是 s 的邻居。假设您不走运，并且您排队的最后一个节点是到所有节点的最短路径的一部分。因此，您将不得不排队 V-2 节点（所有节点，减去源节点和您正在评估的节点......）。现在让我们非常不走运，假设您排队的最后一个节点再次成为所有剩余节点的路径的一部分......您必须排队 V-3 节点，等等。

因此，如果一切都出错了，您将评估 V-1*V-2*...*3*2*1 节点。您应该很容易找出这与 |E| 的总和。

对于每个节点，你在做什么？检查它的每个邻居。每个节点都有 V-1 个邻居。

对于您的算法，我们已经处于 O(|V-1| *|E|) 最坏情况复杂度。如果我没记错的话，Bellman-Ford 算法会检查每条边以确保没有负权循环，你也应该这样做；并且将 1 添加到 V-1，也就是 (|V|* |E|) 最坏情况复杂度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:38:15.180

我不确定这是否有效，但假设它有效，您可以创建一个 BF 没有改进的案例。创建开始和结束节点，并在两者之间放置 N 个顶点连接两者。该算法仍然必须考虑每条路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T08:52:10.090

这是福特-贝尔曼的一个改进。它的实施速度比平时快。当然，在最坏的情况下，时间复杂度可能是 O(nm)。但是，很难创建一个输入来破解这个算法。在比赛中，带队列的福特-贝尔曼比 Dijkstra 执行得更快。但是，您必须创建一个数组调用 Inqueue 来检查当前元素是否在队列中：

```
qu : queue;
inqueue : array of bool;

for i in [1..n] do { d[i]=oo; inqueue[i]=false; }
qu.push(start);
d[start] = 0;

repeat
    u=qu.pop;
    inqueue[u]=false;
    for v in adj[u] do
    if minimize(d[v], d[u]+uv) then
    if !inqueue[v] then
    { inqueue[v] = true; qu.push(v); }
until qu.empty;
print d[target]; 
```

# javascript - How to render redis records in express.js?

> ID：10679363
> 
> 赞同：0
> 
> 时间：2012-05-21T03:59:50.180
> 
> 标签：javascript, node.js, redis, express

I am new to node.js and express.js. I know this is a little bit silly, but I really don't know how to solve this problem. Hope there is someone can help me.

I have some information stored in Redis.

```
redis 127.0.0.1:6379> hgetall "store1"
1) "apple"
2) "10"
3) "banana"
4) "15"
5) "pear"
6) "20"
7) "name"
8) "A Street"
redis 127.0.0.1:6379> hgetall "store2"
1) "apple"
2) "30"
3) "banana"
4) "40"
5) "pear"
6) "50"
7) "name"
8) "B Street" 
```

I want to show these information in a table. Using express.js, I created the following routes file.

**routes/report.js**

```
var redis = require('redis'),
    redisclient = redis.createClient();

exports.index = function(req, res){
  redisclient.on("error", function (err) {
      console.log("Error " + err);
  });

  var reports = [];
  redisclient.keys("*", function(err, stores) {
    for (var store in stores) {
      redisclient.hgetall(store, function(err, figures) {
        reports.push(figures);
      });
    }
  });

  res.render('report', { title: 'Store Report', reports: reports });
}; 
```

And also the following `jade` view files.

**views/report.jade**

```
h1= title
table(class="table table-striped table-condensed")
  thead
    tr
      th store
      th apple
      th banana
      th pear

  tbody
  - each report in reports
    !=partial('partials/record', {store:record.name, apple:record.apple, banana:record.banana, pear:record.pear}) 
```

**views/partials/record.jade**

```
tr
  td= store
  td= apple
  td= banana
  td= pear 
```

When I open `localhost:3000/report`, I get the table structure with no content.

I understand that redis call is async. The `report.js` file rendered the `report.jade` before redis return any result.

Would anyone please to tell me how can I solve this problem?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:12:25.147

尝试使用[async](https://github.com/caolan/async)模块，在所有 IO 操作完成后执行回调以呈现结果。

来自异步 README 的代码示例：

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback); 
```

# php - Perform delete while inner joining table

> ID：10679364
> 
> 赞同：0
> 
> 时间：2012-05-21T03:59:57.270
> 
> 标签：php, mysql, pdo, sql-delete

I want to delete an entry in my **PAGES** table. Upon deletion of it, it will cascade to **OBJECTS** table. No worries in here, it's working if I delete the entry by using simple `DELETE`. However, I need to specify some conditions:

**PAGES** table

```
+--------------------------+--------------+------+-----+---------+----------------+
| Field                    | Type         | Null | Key | Default | Extra          |
+--------------------------+--------------+------+-----+---------+----------------+
| page_id                  | int(11)      | NO   | PRI | NULL    | auto_increment |
| users_id                 | int(11)      | NO   | MUL | NULL    |                |
| page_value               | varchar(20)  | NO   | UNI | NULL    |                |
+--------------------------+--------------+------+-----+---------+----------------+ 
```

**OBJECTS** table

```
+----------------------------+-------------+------+-----+---------+----------------+
| Field                      | Type        | Null | Key | Default | Extra          |
+----------------------------+-------------+------+-----+---------+----------------+
| objects_id                 | int(11)     | NO   | PRI | NULL    | auto_increment |
| page_id                    | int(11)     | NO   | MUL | NULL    |                |
| objects_name               | varchar(50) | NO   |     | NULL    |                |
| objects_avail              | varchar(20) | NO   |     | NULL    |                |
+----------------------------+-------------+------+-----+---------+----------------+ 
```

If `objects_avail == "ALL"`, I must not include that entry in cascade delete. I came up with this SQL query but got an error:

```
$query = "
    DELETE FROM pages AS p 
    INNER JOIN objects AS o ON p.page_id = o.page_id 
    WHERE p.page_id = ? 
      AND p.users_id = ? 
      AND p.page_value = ? 
      AND o.objects_avail != ?"; 
```

The error thrown:

> ["42000",1064,"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS p INNER JOIN objects AS o ON p.page_id = o.page_id WHER' at line 1"]

Example value for the PDO placeholders:

`$params = array(81,5,"main page","ALL");`

where all of this is valid and I'm sure this is not where the problem is.

I doubt or prettry sure I'm missing some in my query, any suggestions please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:04:22.963

对于内部连接 ​​UPDATE 或 DELETE，您需要明确指定实际要删除的表，否则解析器将不知道您的意思。您可以选择 1 个或多个要从中删除的表。在您的情况下，只删除页面的别名 p 是有意义的。

```
DELETE p
FROM pages AS p
INNER JOIN objects AS o ON p.page_id = o.page_id
WHERE
    p.page_id = ? AND
    p.users_id = ? AND
    p.page_value = ? AND
    o.objects_avail != ? 
```

我唯一改变的行是 DELETE 变成了 DELETE p

# android - Android background Image to fill screen

> ID：10679366
> 
> 赞同：35
> 
> 时间：2012-05-21T04:00:24.157
> 
> 标签：android, android-layout

How do I get my relative layout to display my image view like this:

![enter image description here](../Images/f5461b92705d2cce0b34fb43e8457712.png)

Instead of this?:

![enter image description here](../Images/c611df0de848538ae4e527f527981525.png)

I want my layout to display as much of the image as it can and crop the outsides of the image, like when you're setting desktop background image to "Fill" in windows:

![enter image description here](../Images/ee62b4c234354377cb62577ed46fc0a2.png)

My xml layout so far:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" android:fitsSystemWindows="true" android:alwaysDrawnWithCache="false">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:src="@drawable/background_race_light"/>

    <LinearLayout
        android:id="@+id/linearLayout1"
        style="@style/SessionResumeBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/home_resumeSessionBar_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Button
            android:id="@+id/home_resumeSessionBar_buttonResume"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Resume" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-21T04:09:46.970

将比例类型添加到您的图像视图。有几种类型。你需要的是

```
android:scaleType="center" 
```

此[页面](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)将帮助解释所有不同的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T04:17:37.043

将`ImageView`布局参数设置为`match_parent`并将比例类型设置为满足您需求的适当比例类型：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:scaleType="centerCrop"
    android:layout_alignParentTop="true" android:src="@drawable/background_race_light"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:07:21.487

设置`scalexy = true`在`ImageView`

# css - CSS-从左到右移动文本

> ID：10679367
> 
> 赞同：9
> 
> 时间：2012-05-21T04:00:28.943
> 
> 标签：css, animation, marquee, keyframe

我想创建一个在网站上来回滚动的动画 HTML“选框”：

```
<div class="marquee">This is a marquee!</div> 
```

和CSS：

```
.marquee {
    position: absolute;
    white-space: nowrap;
    -webkit-animation: rightThenLeft 4s linear;
}

@-webkit-keyframes rightThenLeft {
    0%   {left: 0%;}
    50%  {left: 100%;}
    100% {left: 0%;}
} 
```

问题是，当字幕到达屏幕的右边缘时，它不会停止。它一直从屏幕上移开（短暂地出现一个水平滚动条），然后又回来了。

那么，当右侧边缘到达屏幕的右边缘时，如何使车牌停止？

编辑：奇怪的是，这不起作用：

```
50% {right: 0%} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:02:37.363

您可以简单地使用[CSS 动画文本生成器](http://cssload.net/en/animated_text)。已经有预先创建的模板

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T04:45:41.310

不知何故，我通过使用 margin-right 并将其设置为从右向左移动来使其工作。 [http://jsfiddle.net/gXdMc/](http://jsfiddle.net/gXdMc/)

不知道为什么在这种情况下，margin-right 100% 不会离开屏幕。：D（在 chrome 18 上测试）

编辑：现在从左到右也可以使用[http://jsfiddle.net/6LhvL/](http://jsfiddle.net/6LhvL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T07:30:13.483

嗨，您可以使用以下方法实现您的结果 `<marquee behavior="alternate"></marquee>`

**HTML**

```
<div class="wrapper">
<marquee behavior="alternate"><span class="marquee">This is a marquee!</span></marquee>
</div> 
```

**CSS**

```
.wrapper{
    max-width: 400px;
    background: green;
    height: 40px;
    text-align: right;
}

.marquee {
    background: red;
    white-space: nowrap;
    -webkit-animation: rightThenLeft 4s linear;
} 
```

看演示：- [http://jsfiddle.net/gXdMc/6/](http://jsfiddle.net/gXdMc/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T00:41:06.310

我喜欢使用以下内容来防止事情超出我的`div`元素。它也有助于 CSS 翻转。

```
.marquee{
    overflow:hidden;
} 
```

这将隐藏任何移动/在 div 之外的东西，这将阻止浏览器扩展并导致出现滚动条。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T04:04:22.913

如果我正确理解你的问题，你可以在你的选框周围创建一个包装器，然后为包装元素分配一个`width`（或）。`max-width`例如：

```
<div id="marquee-wrapper">
    <div class="marquee">This is a marquee!</div>   
</div> 
```

然后`#marquee-wrapper { width: x }`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T04:42:17.857

我不确定这是否是正确的解决方案，但我通过在动画 CSS 之后重新定义 .marquee 类来实现这一点。

检查以下：

```
<style>
#marquee-wrapper{
    width:700px;
    display:block;
    border:1px solid red;
}

div.marquee{
width:100px;
height:100px;
background:red;
position:relative;
animation:myfirst 5s;
-moz-animation:myfirst 5s; /* Firefox */
}

@-moz-keyframes myfirst /* Firefox */{
0%   {background:red; left:0px; top:0px;}
100% {background:red; left:100%; top:0px}
}
div.marquee{ 
left:700px; top:0px
}
</style>

<!-- HTMl COde -->

<p><b>Note:</b> This example does not work in Internet Explorer and Opera.</p>
<div id="marquee-wrapper">
<div class="marquee"></div> 
```

# android - 添加图像资源并将其用作布局背景

> ID：10679373
> 
> 赞同：0
> 
> 时间：2012-05-21T04:00:48.130
> 
> 标签：android, android-layout, android-resources, android-resolution

所以我正在开发我的第一个应用程序，我有一个关于图像的问题

首先，有 4 个不同的可绘制文件夹，我是否只需将图像放入其中一个？添加资源图像的正确方法是什么？

其次，我知道手机有很多不同的分辨率。我应该只使用960x720dp吗？还是有另一种合适的方式来做到这一点？我想将图像作为资源添加到我的项目中，然后将其用作我的应用程序布局的背景...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T14:26:42.993

最好的方法是将 4 个不同版本的图像放在 4 个文件夹中。找出每个文件夹必须具有的分辨率的最简单方法是使用 mdpi 图像作为参考并将其他 3 相乘，如下所示：

```
ldpi  = mdpi x 0.75
mdpi  = this is the reference resolution
hdpi  = mdpi x 1.5
xhdpi = mdpi x 2 
```

示例：对于具有 100 x 80 像素作为基础图像的图像，另一个文件夹应该包含具有以下分辨率的图像：

```
ldpi  =  75 x  60 px
mdpi  = 100 x  80 px  this is the reference image
hdpi  = 150 x 120 px
hhdpi = 200 x 160 px 
```

最好的方法是在图像编辑器中创建您需要的最大图像，并从中制作更小的变体。你可以找到你自己的乘法数学公式

如果您不想为图像放置不同的变体，那么让 Android 操作系统为您转换图像 Android 操作系统将在 mdpi 文件夹中搜索参考图像，因此请确保将图像放在此文件夹中

更多信息[在这里](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T04:12:10.103

您只需要将图像粘贴到可绘制文件夹中。为了解决不同的分辨率，您可以将不同的图像放入具有相同名称的不同可绘制文件夹中，例如将 logo.jpg 放入 drawable-ldpi 可能具有适合 ldpi 的分辨率的图像 logo.jpg，而 drawable-mdpi 具有具有分辨率的图像 logo.jpg适合 mdpi。或者如果所有分辨率的任何图像都必须相同，则将单个图像放入任何可绘制文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:17:24.877

您可以通过在任何文件夹中仅添加一个图像来做到这一点，但是[支持多屏幕和图像分辨率的](http://developer.android.com/guide/practices/screens_support.html)链接为您提供了最好的方法来做到这一点。刚读完

# mysql - 如何在不获取重复数据的情况下进行查询？

> ID：10679382
> 
> 赞同：3
> 
> 时间：2012-05-21T04:04:04.217
> 
> 标签：mysql

我有一个在另一个表上有连接的查询：

```
select * from tbl_scales s
join tbl_recipes r on r.category_id = s.product_id 
```

它显示这样的冗余数据，

```
scale_id    r_id     date       recipe_name

1       1   2012-05-20  Cheese Bread
6       1   2012-05-21  Cheese Bread
1       1   2012-05-20  Spanish Bread
6       1   2012-05-21  Spanish Bread
3       4   2012-05-20  Pancake
8       4   2012-05-21  Pancake
1       1   2012-05-20  Pandesal
6       1   2012-05-21  Pandesal 
```

我不知道该怎么做..有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T04:08:36.013

SELECT DISTINCT 将消除列中具有相同数据的行。但由于您的日期不同，您可能希望使用 GROUP BY recipe_name （在查询末尾添加）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:10:54.847

[独特的](http://www.mysqlfaqs.net/mysql-faqs/SQL-Statements/Select-Statement/How-does-DISTINCT-work-in-MySQL)关键字是你的朋友。

```
select distinct r_id, scale_id, recipe_name from tbl_scales s
join tbl_recipes r on r.category_id = s.product_id 
```

# ruby-on-rails - 通过一个简单的测试

> ID：10679386
> 
> 赞同：0
> 
> 时间：2012-05-21T04:04:30.567
> 
> 标签：ruby-on-rails, testunit

我正在使用 Rails 3.2 的 rake 测试功能。我正在尝试通过测试，但它给了我错误。顺便说一句，当你看到我的写作方式时，我是个菜鸟。这是一种被黑的测试方式，但至少我想先尝试通过它。

```
 test "product title must have at least 10 characters" do
    ok = %w{ aaaaaaaaaa aaaaaaaaaaa }
    bad = %w{ a aa aaa aaaa aaaaa aaaaaa aaaaaaa aaaaaaaa aaaaaaaaa}

    ok.each do |name|
        assert new_product_title(name).valid?, "#{name} shouldn't be invalid"
    end

    bad.each do |name|
        assert new_product_title(name).invalid?, "#{name} shouldn't be valid"
    end
  end 
```

与功能

```
def new_product_title(title)
    Product.new(title: title,
        description: "yyy",
        price: 1,
        image_url: "fred.gif")
end 
```

不知何故，它没有通过。

这是什么原因？有没有更好的写法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:28:08.383

我更关心方法。我假设这种方法在产品模型中？似乎您尝试做的事情绝对应该由模型控制，但我认为您不能在类的定义中调用类的方法。在创建具有指定标题但静态描述、价格和 image_url 的新产品的方法中，我也没有看到太多实用程序。如果您需要特定属性的默认值，您可以在初始化方法中设置它们，并在需要时覆盖它们。有些人不赞成在初始化中设置默认值，因此您可以在 after_initialize 回调中设置它们，如下所示：

```
class Product < ActiveRecord::Base
  after_initialize :init

  def init
    self.description ||= 'yyy'
    self.price ||= 1
    self.image_url ||= "fred.gif"
  end
end 
```

然后，每当您需要创建具有标题和默认属性的新产品时，您就可以使用

```
Product.new(:title => "some title") 
```

如果你不想要所有的默认值，你可以像往常一样将值传递给 new

```
Product.new(:title => "some other title", :price => 400) # desc & url are still default 
```

关于你的测试。我总是在 RSpec 中测试。由于您使用的是测试单元（或迷你测试或现在的任何东西），我的建议是不正确的。但首先我会让变量名更具描述性。其次，在你的断言末尾有一些不应该出现的逗号。

```
test "product title must have at least 10 characters" do
  valid_name = "a" * 10
  short_name = "a" * 9

  valid_product = Product.new(:name => valid_name)
  assert valid_product.valid?

  invalid_product = Product.new(:name => short_name)
  assert invalid_product.invalid?
end 
```

如果你得到了这个工作，你可能需要使用 invalid_product.errors.full_messages 上的 assert equals 方法和错误中的预期字符串来验证产品是否因正确原因无效。

# ruby-on-rails - Rails 将 haml 模板渲染为 html

> ID：10679390
> 
> 赞同：1
> 
> 时间：2012-05-21T04:04:37.543
> 
> 标签：ruby-on-rails, haml

在 Rails 中，我可以使用以下内容将 erb 转换为 html

```
erb(filename_as_string) 
```

虽然我找不到haml等价物。所以我开始像这样创建一个助手：

```
 def haml(file)
    lines = File.new(Rails.root.to_s + file).readlines.first
    engine = Haml::Engine.new(lines)
    engine.render
  end 
```

不过，这不会将任何实例变量传递给我的 haml 文件。

是否有现有的功能可以做到这一点？或者我应该在我的助手中添加什么来传递我在控制器方法中创建的所有实例变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:46:30.407

查看[http://haml.info/docs/yardoc/Haml/Engine.html#render-instance_method](http://haml.info/docs/yardoc/Haml/Engine.html#render-instance_method)。如您所见，它获取了一个默认传递的新对象，用作绑定。所以在你的情况下，你可能想要

```
engine.render(self) 
```

另外，为了创建引擎，你可以

```
engine = Haml::Engine.new(File.read "#{Rails.root}#{file}") 
```

# php - 15分钟间隔的PHP小时计算和数组中的工作时间永远不会加起来

> ID：10679392
> 
> 赞同：1
> 
> 时间：2012-05-21T04:04:40.550
> 
> 标签：php, arrays

我有一个开始时间和结束时间，它们总是在一个小时：00 或 :15、:30、:45 开始或结束。

例如：

```
00:30 21-05-2012 // startdate and time
18:15 22-05-2012 // enddate and time (+1 day) 
```

如果时间进入傍晚或夜间，我必须额外收取 % 的费用。

所以我有 2 个阵列，一个用于晚上时间，一个用于夜间时间，看起来像这样。

```
$eveningHours = array(
    '18:00',
    '18:15',
    '18:30',
    // etcetera
    '00:00'
); 
```

上面的数组基本上涵盖了从 18:00 到 00:00 的时间，因为这些时间正落入晚上。

夜间时间也是如此，它们涵盖从 00:00 到 07:00 的时间。

由于开始时间和结束时间总是准确地落在 :00 或 :15, :30, :45.. 我在开始日期时间和结束日期时间之间运行一个循环，间隔为 15 分钟，然后在每个间隔我检查是否当前的间隔时间是夜间/晚上时间，然后将 +15 添加到晚上/夜间时间计数器，最后我将其除以 60 以获得总小时数。

但不知何故，它总是有 15 分钟到多或 15 分钟到少......我已经尝试了几乎所有东西，但无法让它正常工作......

因此，例如开始时间是 00:30，它已经在第一个间隔上增加了 15 分钟：

00:30（计数器：+15） 00:45（计数器：+15）

总共需要 30 分钟，但如果你从 00:30 到 00:45 工作，它应该只有 15 分钟。所以我认为这就是出错的地方。我只需要一种方法来修复它。我已经尝试了很多方法，方法是用 -15 分钟启动计数器，或者检查开始时间或结束时间是否在一个小时范围内，然后将计数器设置为 -15 或 + 15分钟..但这也出错了。

*编辑*这是循环的基础：

```
$start_time = mktime($_POST['worked_start_hour'], $_POST['worked_start_min'], 0, date("m"), date("d", strtotime("+1 days")), date("Y")); // +1 day for testing purpose
$end_time   = mktime($_POST['worked_end_hour'], $_POST['worked_end_min'], 0, date("m"), date("d", strtotime("+2 days")), date("Y")); // +2 days for testing purpose

$date['start_h_i']  = date("Y-m-d H:i", $start_time); # Start date: yyyy-mm-dd hours:minutes
$date['end_h_i']    = date("Y-m-d H:i", $end_time);   # End date: yyyy-mm-dd hours:minutes

$counter['eveningMinutes'] = 0;
$counter['nightMinutes'] = 0;

$eveningHours = array(
  '18:00',
  '18:15',
  '18:30',
  '18:45',
  '19:00',
  '19:15',
  '19:30',
  '19:45',
  '20:00',
  '20:15',
  '20:30',
  '20:45',
  '21:00',
  '21:15',
  '21:30',
  '21:45',
  '22:00',
  '22:15',
  '22:30',
  '22:45',
  '23:00',
  '23:15',
  '23:30',
  '23:45',
  '00:00'

);

$nightHours = array(
    '00:00',
    '00:15',
    '00:30',
    '00:45',
    '01:00',
    '01:15',
    '01:30',
    '01:45',
    '02:00',
    '02:15',
    '02:30',
    '02:45',
    '03:00',
    '03:15',
    '03:30',
    '03:45',
    '04:00',
    '04:15',
    '04:30',
    '04:45',
    '05:00',
    '05:15',
    '05:30',
    '05:45',
    '06:00',
    '06:15',
    '06:30',
    '06:45',
    '07:00'
);

while (strtotime($date['start_h_i']) <= strtotime($date['end_h_i'])) {

    if (in_array(date("H:i", strtotime($date['start_h_i'])), $eveningHours)) {
        $counter['eveningMinutes'] = $counter['eveningMinutes'] + 15;
    }

    if (in_array(date("H:i", strtotime($date['start_h_i'])), $nightHours)) {
        $counter['nightMinutes']  = $counter['nightMinutes'] + 15;
    }

    $date['start_h_i'] = date ("Y-m-d H:i", strtotime("+15 minutes", strtotime($date['start_h_i']))); // 15 minutes interval

} // end while 
```

我希望有人可以在这里发光，谢谢！

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T13:20:49.207

更改此行：

```
while (strtotime($date['start_h_i']) <= strtotime($date['end_h_i'])) { 
```

对此：

```
while (strtotime($date['start_h_i']) < strtotime($date['end_h_i'])) { 
```

您遇到的问题是您正在更新已经完成计算时间的小时数。因此，使用您自己的示例`00:30 - 00:45`：

*   第一次循环：00:30 <= 00:45，所以增加 15 分钟
*   在循环第二次：00:45 <= 00:45，所以增加 15 分钟

通过将 更改`<=`为 a`<`您可以删除第二个操作： 00:45 !< 00:45 所以什么都不添加。

# python - 使用python时gevent发生线程异常

> ID：10679393
> 
> 赞同：1
> 
> 时间：2012-05-21T04:04:51.757
> 
> 标签：python, multithreading, thread-safety, gevent

当我运行这个 python 代码时，出现了一些线程问题。我在互联网上搜索，但没有找到答案。

```
import urllib2
from time import time
import gevent
import numpy as np

tmp = np.loadtxt('data.txt', dtype=str)
visit_list=tmp[:20]

result_list =[]

def visitUrl(u):
  print 'start %s' %u
  begin = time()
  data = urllib2.urlopen(u).read()
  print len(data)
  print 'end-------- %s' %u
  end = time()
  print ('%s ::begin=%s ::end= %s::end-begin= %s' %(u, begin,end, end-begin))

for i in range(3):
    reqs = []
    begin = time()
    for u in visit_list:
        start = time()
        reqs.append(gevent.spawn(visitUrl, u))
        stop = time()
        print ('%s $$$ %s' %(u, stop-start))
    #reqs = [gevent.spawn(visitUrl, u) for u in visit_list]
    gevent.joinall(reqs)
    end = time()

    print 'ciclie %s=%s' %(i, end - begin)
    result_list.append(end-begin) 
```

问题：

```
Exception KeyError: KeyError(4475468392,) in <module 'threading' from '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.pyc'> ignored 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T04:49:49.317

根据[这个线程](https://stackoverflow.com/questions/8774958/keyerror-in-module-threading-after-a-successful-py-test-run)，您的主循环在所有线程完成其工作之前结束。

只需`gevent.shutdown()`在最后调用或在调用时增加超时`joinall`：

```
gevent.joinall(reqs, timeout=30) 
```

# php - PHP如何循环直到确认。

> ID：10679394
> 
> 赞同：1
> 
> 时间：2012-05-21T04:05:03.847
> 
> 标签：php, loops, while-loop, sms-gateway

我正在编写一个脚本以通过 URL 链接将字符串发送到 SMS 网关并从它们那里获取响应。

他们将以代码和文本作为答案，“ **200 = SUCCESS** ”或错误代码：“- **100 = UNKNOWN ERROR** ”、“- **101 = MISSING PARAMETER** ”等。

在我的后端代码中，我想知道如何继续循环，等待 SMS 网关返回带有错误代码的消息，然后将我的字符串重新发送到 SMS 网关，直到成功或确认？

```
$link = "http://www.smsgateway.com/send.php?phoneno=".$phonenumber."&message=".urlencode($smsMessage); 
```

接下来，我使用 cURL 发送此链接并获得响应：

```
$returned_content = using_cURL_function_to_get_response($link); 
```

现在，我的**$returned_content**将显示：
成功代码：**200 = SUCCESS** 失败代码：**-100 = UNKNOWN ERROR** 失败代码：**-101 = MISSING PARAMETER** 以及更多**-1xx**失败/错误代码

然后，我想执行一个循环来检查 $returned_content，如果它是失败/错误代码，然后通过 cURL 再次将字符串发送到 SMS 网关。

```
if ($returned_content = 'ANY FAILURE / ERROR-CODE') {
    //redo cURL
    $link = "http://www.smsgateway.com/send.php?phoneno=".$phonenumber."&message=".urlencode($smsMessage);
    $returned_content = using_cURL_function_to_get_response($link);

    // Check the $returned_content
} else {
    // inform me the '200 = SUCCESS' via email
    mail($myEmail, $successfulSubjectt, $returned_content, $msgHeaders);
} 
```

我不确定这个循环部分，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:35:17.717

我猜你想要做的是这样的：

```
$link = "http://www.smsgateway.com/send.php?phoneno=".$phonenumber."&message=".urlencode($smsMessage);
while ($returned_content != '200 = SUCCESS')
{
    $returned_content = using_cURL_function_to_get_response($link);
}

mail($myEmail, $successfulSubjectt, $returned_content, $msgHeaders); 
```

但这不是一个好主意。假设你永远不会成功？您将有一个无限循环。你真的应该重新考虑你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:05:54.060

那么当您尝试发送短信并收到错误消息时，您想重试发送吗？那将如何运作？

另外，不确定，但目标服务器可能会将其解释为 DoS 攻击。

我认为你应该重新考虑你的方法。如果您的目标是让某些用户能够发送 SMS，那么如何向他们显示一条消息，说明发送他们的 SMS 时出错，他们应该稍后再试？

# hibernate - 可能的 Envers 有效性审计策略错误 - 任何人都可以确认吗？

> ID：10679404
> 
> 赞同：2
> 
> 时间：2012-05-21T04:06:57.513
> 
> 标签：hibernate, seam2, hibernate-envers

我们有一个在 JBoss AS 7 上运行的 Seam 2 应用程序。为了加快访问实体的历史修订，我们切换到 Envers Validity Audit Strategy。一切似乎都很好，但是保存一种特定类型的实体会导致

```
org.hibernate.AssertionFailure: possible nonthreadsafe access to session 
```

错误。关闭有效性审计策略解决了这个问题。

是否有人在有效性审计策略方面取得了任何成功（文档确实说它是[实验性](http://docs.jboss.org/hibernate/envers/3.6/reference/en-US/html/configuration.html#config-audit-strategy)的）？

我应该指出我们使用的是 Hibernate 3.6.8.Final。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:36:06.943

我认为问题与 FlushMode 有关。有关如何解决此问题的说明，请参阅[https://hibernate.onjira.com/browse/HHH-7329?focusedCommentId=46833#comment-46833 。](https://hibernate.onjira.com/browse/HHH-7329?focusedCommentId=46833#comment-46833)

# graphics - 从不可平铺的 3D 纹理生成可平铺的 2D 纹理

> ID：10679405
> 
> 赞同：0
> 
> 时间：2012-05-21T04:07:20.403
> 
> 标签：graphics, textures, procedural-generation

我正在开发一个用于程序纹理生成的库（[https://github.com/mikera/clisk](https://github.com/mikera/clisk)），它开始很好地融合在一起。

我现在正在尝试找出制作**可平铺 2D 纹理**的好方法。

一种似乎可行的方法是将 (0,0) - (1,1) 2D 纹理空间映射到 3D 纹理内的表面上，使表面连接左边缘和右边缘以及顶部和底部边缘纹理（例如圆环）。这样做，应该确保 2D 纹理是自动平铺的。

由于我已经拥有良好的（不可平铺的）3D 纹理（柏林噪声、分形噪声等），这似乎是允许从任意 3D 纹理创建可平铺 2D 纹理的好方法。

所以我的问题：

*   这是一种有效的技术吗？
*   如果是这样，我应该映射到什么样的表面以最大限度地减少扭曲/获得好看的平铺效果？
*   有什么需要注意的陷阱吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:30:18.223

为此使用 3D 噪声会产生失真，答案是使用 4D 噪声，尽管这不是唯一的方法 - 您还可以使 2D 函数平铺。

这里有几个有用的链接：

*   [http://www.gamedev.net/blog/33/entry-2138456-seamless-noise/](http://www.gamedev.net/blog/33/entry-2138456-seamless-noise/)
    *   介绍 4D 方法
*   [https://gamedev.stackexchange.com/questions/23625/how-do-you-generate-tileable-perlin-noise](https://gamedev.stackexchange.com/questions/23625/how-do-you-generate-tileable-perlin-noise)
    *   对此有多个答案：制作 2D 平铺、3D 失真和 4D 方法

# r - 向数据框添加一行

> ID：10679408
> 
> 赞同：0
> 
> 时间：2012-05-21T04:07:29.950
> 
> 标签：r, dataframe

我正在逐行读取文件，然后将特定行添加到数据框中。这是我将添加到数据框中的一行示例：

ATOM 230 CA GLU A 31 66.218 118.140 2.411 1.00 31.82 C

我已经验证我的检查没问题，我认为这与我的 rbind 命令特别有关。谢谢你的帮助！

编辑：错误如下，数据框的输出为：

```
Residue AtomCount SideChain XCoord  YCoord ZCoord
2       MET         1         A 62.935  97.579 30.223
21     <NA>         2         A 63.155  95.525 27.079
3      <NA>         3         A 65.289  96.895 24.308 
```

似乎它不再拿起残留物的名称了..

我正在使用的代码是：

```
get.positions <- function(sourcefile, chain_required = "A"){
positions = data.frame()
visited = list()
filedata <- readLines(sourcefile, n= -1)
for(i in 1: length(filedata)){
  input = filedata[i]
  id = substr(input,1,4)
  if(id == "ATOM"){
    type = substr(input,14,15)
      if(type == "CA"){
        #if there are duplicates it takes the first one
        residue = substr(input,18,20)
        type_of_chain = substr(input,22,22)
        atom_count = strtoi(substr(input, 23,26))
        if(atom_count >=1){
          if(type_of_chain == chain_required && !(atom_count %in% visited) ){
            position_string = trim(substr(input,30,54))
            position_string = lapply(unlist(strsplit(position_string," +")),as.numeric)
            positions<- rbind(positions, list(residue, atom_count, type_of_chain, position_string[[1]], position_string[[2]], position_string[[3]]))
            }
        }
      }
     }

    } 
        return (positions)
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:22:22.693

当我用我得到的数据运行你的代码时`type=="LU"`（所以它没有通过`type=="CA"`测试），其余的处理从未完成。我认为您可能需要将索引更改为

```
type = substr(input,10,11) 
```

解决该问题会带来其他问题，并且由于目标没有明确说明，因此很难解决所有问题，但是它建议您编辑代码和数据以使其可重现。这可能是一种可重现的输入/执行方法：

```
get.positions(textConnection("ATOM 230 CA GLU A 31 66.218 118.140 2.411 1.00 31.82 C") ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:11:33.170

最后，以下工作。首先我制作了一个更大的数据框，然后只替换特定的行（感谢 Joran 将我链接到 R inferno）。

对于问我为什么要加分的用户，您的假设是不正确的。语法实际上是“+”，这是一个空格加号，所以它在多个空格上分割。最后，至于不正确的索引，我终于想出了如何在表单上显示额外的空格。这是正确的原始行，您将看到索引匹配。

```
ATOM      2  CA  MET A   1      62.935  97.579  30.223  1.00 37.58           C 
```

有效的 R 代码如下。

```
get.positions <- function(sourcefile, chain_required = "A"){
N <- 10^5
AACount <- 0
positions = data.frame(Residue=rep(NA, N),AtomCount=rep(NA, N),SideChain=rep(NA, N),XCoord=rep(NA, N),YCoord=rep(NA, N),ZCoord=rep(NA, N),stringsAsFactors=FALSE)     

visited = list()
filedata <- readLines(sourcefile, n= -1)
for(i in 1: length(filedata)){
  input = filedata[i]
  id = substr(input,1,4)
  if(id == "ATOM"){
    type = substr(input,14,15)
      if(type == "CA"){
        #if there are duplicates it takes the first one
        residue = substr(input,18,20)
        type_of_chain = substr(input,22,22)
        atom_count = strtoi(substr(input, 23,26))
        if(atom_count >=1){
          if(type_of_chain == chain_required && !(atom_count %in% visited) ){
            visited <- c(visited, atom_count)
            AACount <- AACount + 1
            position_string = trim(substr(input,30,54))
            position_string = lapply(unlist(strsplit(position_string," +")),as.numeric)
            #print(input)
            positions[AACount,]<- c(residue, atom_count, type_of_chain, position_string[[1]], position_string[[2]], position_string[[3]])
            }
        }
      }
  }

} 
positions<-positions[1:AACount,]
return (positions) 
```

}

# android - android客户端套接字没有接收数据

> ID：10679409
> 
> 赞同：0
> 
> 时间：2012-05-21T04:07:47.980
> 
> 标签：android, tcp

我有一个不在java中的tcp服务器，它也是一个硬件设备，我需要发送和接收数据，

我正在连接服务器并使用以下代码发送一些配置数据

```
 this.clientSocket=new Socket("198.168.1.17",9999);
        this.os=new DataOutputStream(this.clientSocket.getOutputStream());
        this.in=new DataInputStream(this.clientSocket.getInputStream());
        System.out.println("Conncted");

          char data[]={0x03,0x03,0x00};
            byte b[]=new byte[data.length];
          for (int i = 0; i < b.length; i++) {
              b[i] = (byte) data[i];
             }
            try {
                os.write(b); 
```

设备正确接收数据，现在在我的 tcp 客户端中我无法接收数据，尽管我在上面的代码之后编写了以下代码

```
 int size =in.available();
                byte data1[]=new byte[size];
              //  in.read(data1);
                String str=new String(data1);
                System.out.println("Reading data:"+str); 
```

它只显示读取数据，字符串没有数据我也尝试过线程中的代码

```
 public void run(){
try{
    while(true){
        int size =in.available();
        byte data[]=new byte[size];
        in.read(data);
        String str=new String(data);
        System.out.println("Reading data:"+str);

    } 
```

在线程中它只显示读取数据，请帮助我如何从服务器获取数据还请注意服务器是内置的，我无法更改服务器代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:25:24.737

available() 方法在代码“int size =in.available();”中做了什么？？？？？？？？？

**解决方案可能是：** available() 方法返回 0，因此您无法接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-22T17:37:28.300

使用此代码从套接字接收数据。在 onCreate 之前编写此代码。

```
private EditText mInputMessageView;
    private Emitter.Listener onNewMessage = new Emitter.Listener() {
        @Override
        public void call(final Object... args) {
            MainActivity.this.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    JSONObject data = (JSONObject) args[0];
                    String username;
                    String message;
                    try {
                        username = data.getString("username");
                        message = data.getString("message");
                    } catch (JSONException e) {
                        return;
                    }

                    // add the message to view
                    addMessage(username, message);
                }
            });
        }

    }; 
```

# android - 为什么在listview中总是显示arraylist的最后一个值？

> ID：10679411
> 
> 赞同：-1
> 
> 时间：2012-05-21T04:08:16.730
> 
> 标签：android

我已经启动了一个计时器，它调用 getMessage webservice，它返回该用户数组列表大小的通信消息总是显示正确的消息数量，但是当在该消息的列表视图中显示时，只显示最后一条由 web 服务发送的消息，我使用了这个代码。

```
public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);

        if(msg.arg1!=RECIEVEFAILURE)
           {
            objrReceiveMessageSiteList =(ArrayList<ReceiveMessageSiteList>)msg.obj;
            System.out.println("objrReceiveMessageSiteList.get(0)"+objrReceiveMessageSiteList.get(0).getMessageStatus());
            System.out.println("objrReceiveMessageSiteList.get(0)"+objrReceiveMessageSiteList.size());
            if(objrReceiveMessageSiteList.size()!=0 && !objrReceiveMessageSiteList.get(0).getMessageStatus().equalsIgnoreCase("No New Message"))
            {
                for(int i=0;i<objrReceiveMessageSiteList.size();i++)
                {
                    objkeyvaluepair.setMessage(objrReceiveMessageSiteList.get(i).getMessage());
                    objkeyvaluepair.setMessageType(objrReceiveMessageSiteList.get(i).getMessageType());
                    objkeyvaluepair.setTimeStamp(objrReceiveMessageSiteList.get(i).getTimeStamp());
                    objkeyvaluepair.setSenderFirstName(objrReceiveMessageSiteList.get(i).getSenderFirstName());
                    objkeyvaluepair.setSenderId(objrReceiveMessageSiteList.get(i).getSenderId());
                    objkeyvaluepair.setRecieverFirstName(objrReceiveMessageSiteList.get(i).getReceiverFirstName());
                    messagerecord.add(objkeyvaluepair);
                    System.out.println("MESSAGE SIZE"+messagerecord.size());
                    System.out.println("MESSAGE---------- findeee"+messagerecord.get(i).getMessage());

                }
                System.out.println("objrReceiveMessageSiteList.get(0)--------------"+objrReceiveMessageSiteList.get(0).getMessageStatus());
                message.setText(""+messagerecord.size());
            }
    }

    }
}; 
```

在这个 for 循环 arraylist 中，在 syste.out.println 中显示正确的消息。但是当在适配器中发送时，适配器设置正确的大小，但在所有列表视图中只显示最后一条消息。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:37:30.993

您正在通过嵌套循环将相同的对象 ( `objkeyvaluepair`) 添加到每次迭代中。`ArrayList``for`

在最里面的`for`循环中，您应该创建一个新`objkeyvaluepair`对象，然后将这个新对象添加到`ArrayList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:24:53.670

将此方法更改为以下内容：

```
public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);

        if(msg.arg1!=RECIEVEFAILURE)
           {
            objrReceiveMessageSiteList =(ArrayList<ReceiveMessageSiteList>)msg.obj;
            System.out.println("objrReceiveMessageSiteList.get(0)"+objrReceiveMessageSiteList.get(0).getMessageStatus());
            System.out.println("objrReceiveMessageSiteList.get(0)"+objrReceiveMessageSiteList.size());
            if(objrReceiveMessageSiteList.size()!=0 && !objrReceiveMessageSiteList.get(0).getMessageStatus().equalsIgnoreCase("No New Message"))
            {
                for(int i=0;i<objrReceiveMessageSiteList.size();i++)
                {
                    //Create Local object of the Objkeyvaluepair here, for example
                    //ObjectKeyValuePair objkeyvaluePair=new OjectKeyvaluePair();
                    objkeyvaluepair.setMessage(objrReceiveMessageSiteList.get(i).getMessage());
                    objkeyvaluepair.setMessageType(objrReceiveMessageSiteList.get(i).getMessageType());
                    objkeyvaluepair.setTimeStamp(objrReceiveMessageSiteList.get(i).getTimeStamp());
                    objkeyvaluepair.setSenderFirstName(objrReceiveMessageSiteList.get(i).getSenderFirstName());
                    objkeyvaluepair.setSenderId(objrReceiveMessageSiteList.get(i).getSenderId());
                    objkeyvaluepair.setRecieverFirstName(objrReceiveMessageSiteList.get(i).getReceiverFirstName());
                    messagerecord.add(objkeyvaluepair);
                    System.out.println("MESSAGE SIZE"+messagerecord.size());
                    System.out.println("MESSAGE---------- findeee"+messagerecord.get(i).getMessage());

                }
                System.out.println("objrReceiveMessageSiteList.get(0)--------------"+objrReceiveMessageSiteList.get(0).getMessageStatus());
                message.setText(""+messagerecord.size());
            }
    }

    }
}; 
```

# php - Wordpress - 循环一行只显示4个结果

> ID：10679412
> 
> 赞同：0
> 
> 时间：2012-05-21T04:08:22.273
> 
> 标签：php, wordpress

这是我的自定义代码，它将列出来自特定父级的所有页面，但现在，如何仅显示每行 4 个结果，最后一行将具有“last”类。

```
<?php

        //this is custom query for show page from specific parent page in different page        

        $child_pages = $wpdb->get_results("SELECT * FROM $wpdb->posts WHERE post_parent = '11' AND post_type = 'page' ORDER BY menu_order", 'OBJECT'); 
        if ( $child_pages ) : foreach ( $child_pages as $pageChild ) : setup_postdata( $pageChild ); ?>         

        <div class="child-thumb_home looping">

            <div class="property_thumb"><a href="<?php echo  get_permalink($pageChild->ID); ?>"><?php echo get_the_post_thumbnail($pageChild->ID, array(222,123)); ?></a></div>

            <a href="<?php echo  get_permalink($pageChild->ID); ?>" rel="bookmark" class="property_name" title="<?php echo $pageChild->post_title; ?>">
            <?php echo $pageChild->post_title; ?>
            </a>

            <div class="some_desc"><?php the_advanced_excerpt('length=50&use_words=0&no_custom=1&ellipsis=%26hellip;&exclude_tags=img,p,strong'); ?></div>

            <div class="read_more"><a href="<?php echo  get_permalink($pageChild->ID); ?>">MORE INFO...</a></div>

        </div>   

        <?php endforeach; endif; ?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:19:11.297

更改此行：

```
$child_pages = $wpdb->get_results("SELECT * FROM $wpdb->posts WHERE post_parent = '11' AND post_type = 'page' ORDER BY menu_order", 'OBJECT'); 
```

到：

```
$child_pages = $wpdb->get_results("SELECT * FROM $wpdb->posts WHERE post_parent = '11' AND post_type = 'page' ORDER BY menu_order LIMIT 4", 'OBJECT'); 
```

这些行：

```
if ( $child_pages ) : foreach ( $child_pages as $pageChild ) : setup_postdata( $pageChild ); ?>         
    <div class="child-thumb_home looping"> 
```

到：

```
$num_child_pages = count($child_pages);
if ( $num_child_pages ) : for ($i = 0; $i < $num_child_pages; $i++):
    $pageChild = $child_pages[$i];
    setup_postdata( $pageChild ); ?>

    <div class="child-thumb_home looping <?php if ($i == $num_child_pages - 1): ?>last<?php endif; ?>"> 
```

# iphone - 将 AVAudioPlayer 与底部多任务栏中的媒体按钮链接？

> ID：10679413
> 
> 赞同：0
> 
> 时间：2012-05-21T04:08:33.610
> 
> 标签：iphone, objective-c, xcode4.2, avaudioplayer

我有一个应用程序，它使用 AVAudioPlayer 播放文档文件夹中的歌曲，我得到了背景播放。当您向左滑动时，我希望能够使用多任务栏底部的按钮来播放/暂停。

谢谢 ：）

# c++ - 如何在 Visual Studio 2010 上安装 Symbolic C++？

> ID：10679416
> 
> 赞同：2
> 
> 时间：2012-05-21T04:08:40.527
> 
> 标签：c++, visual-studio-2010, installation, symbolic-math, symbolic-computation

我有 Symbolic C++（可以与 V 集成的版本，没有关于如何安装它的文档。我从这个网站得到它，它有它如何工作的示例：

[http://issc.uj.ac.za/symbolic/symbolic.html](http://issc.uj.ac.za/symbolic/symbolic.html)

有谁知道如何安装它以与我在 Visual Studio 中的项目一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T07:45:48.727

这些指令在 Visual C++ 2010 Express 中进行了测试。

从这个[网站](http://issc.uj.ac.za/symbolic/symbolic.html)下载“SymbolicC++3 3.35 for Visual C++”。

解压缩存档。

双击文件`SymbolicC++3\SymbolicC++3.sln`。这是 Microsoft Visual Studio 解决方案。

Visual Studio 转换向导将启动。点击下一步。

在“选择是否创建备份”步骤中，单击下一步。

在“准备转换”步骤中，单击完成。

在“转换完成”步骤中，单击关闭。

按“F7”构建解决方案。

此时，您可能会在“输出”窗口中收到许多错误。如果是这样，请编辑文件`Program Files (x86)\Microsoft Visual Studio 10.0\vc\include\xlocmon`并将第 410 行更改为：

```
_Str2 += '-', ++_Off; 
```

到

```
{ _Str2 += '-'; ++_Off; } 
```

然后按“F7”再次开始构建。有关此问题和解决方法的更多讨论，请参阅[此 StackOverflow 问题](https://stackoverflow.com/questions/9619774/compiling-symbolicc-operator-is-ambiguous)。

# 创建示例项目

在解决方案资源管理器中，右键单击解决方案，然后选择“添加”->“新建项目”。

选择“Win32 控制台应用程序”。

将您的项目命名为“示例”。

在“Win32 应用程序向导”中单击下一步。单击完成。

在解决方案资源管理器中，右键单击示例项目并选择“设置为启动项目”。

在解决方案资源管理器中，右键单击示例项目。选择“参考文献...”。选择“添加新参考...”。应选择“SymbolicC++3”项目。单击确定。

单击确定。

在解决方案资源管理器中，右键单击解决方案，选择“配置管理器...”。

将“示例”的配置更改为“发布”。

将“SymbolicC++3”的配置更改为“静态”。

点击“关闭”。

在您的 Example.cpp 源文件中，输入此示例程序：

```
#include "stdafx.h"

#include "..\include\symbolicc++.h"

int _tmain(int argc, _TCHAR* argv[])
{
    auto x = Symbolic("x");
    auto y = Symbolic("y");

    auto z = x * 3 * y * 4 * y * x / y;

    cout << "simplified: " << z << endl;

    cout << "numerical value: " << z[x == 1.2, y == 3.4] << endl;

    system("pause");
    return 0;
} 
```

按“F5”运行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:58:24.987

也许是一个迟到的答案，但可能对其他人仍然有用。

**对于 *nix 系统：**

有两个版本：

```
[1] Tarball that do not need to be installed in your system: 
```

[http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35.tar.gz](http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35.tar.gz)

```
[2] Library, intended to be installed in your system: 
```

[http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35-ac.tar.gz](http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35-ac.tar.gz)

Y 选择了图书馆。现在，解压缩 tarball，然后从 README 文件中：

```
This project attempts to extract the parts of SymbolicC++ that can
be compiled as part of a library and so create the include / library
infrastructure. The src and include directories are populated by
scripts from the SymbolicC++ header files.

== Installation to /usr/local ===============================================

To install to /usr/local:

  ./configure
  make
  make install

To compile a program using SymbolicC++ with GCC:

  g++ -o program program.cpp -lsymbolicc++

To run the program:

  ./program

A brief PDF document describing SymbolicC++ is provided (doc/introsymb.pdf)
and is installed as /usr/local/share/doc/SymbolicC++.pdf. 
```

这是一个简单的例子（来自维基百科，做工作！）：

```
#include <iostream>
#include "symbolicc++.h"
using namespace std;

int main(void)
{
  Symbolic x("x");
  cout << integrate(x+1, x) <<endl;       // => 1/2*x^(2)+x
  Symbolic y("y");
  cout << df(y, x) << endl;               // => 0
  cout << df(y[x], x) << endl;            // => df(y[x],x)
  cout << df(exp(cos(y[x])), x) << endl ; // => -sin(y[x])*df(y[x],x)*e^cos(y[x])
  return 0;
} 
```

**视觉工作室**

VS有一个特殊的版本：

[http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35-vc.zip](http://issc.uj.ac.za/symbolic/sources/SymbolicC++3-3.35-vc.zip)

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-07T01:24:54.990

# Visual Studio 2013 的说明

这些说明在 Visual Studio 2013 中进行了测试。

从这个[网站](http://issc.uj.ac.za/symbolic/symbolic.html)下载“SymbolicC++3 3.35 for Visual C++”。

解压缩存档。

双击文件`SymbolicC++3\SymbolicC++3.sln`。这是 Microsoft Visual Studio 解决方案。

将出现“查看项目和解决方案更改”窗口。单击确定。

按 CTRL-SHIFT-B 构建解决方案。

# 创建示例项目

在解决方案资源管理器中，右键单击解决方案，然后选择“添加”->“新建项目”。

选择“Win32 控制台应用程序”。

将您的项目命名为“示例”。单击确定。

在“Win32 应用程序向导”中单击下一步。单击完成。

在解决方案资源管理器中，右键单击示例项目并选择“设置为启动项目”。

在解决方案资源管理器中，右键单击示例项目。选择“添加 -> 引用...”。单击“添加新参考”按钮。检查“SymbolicC++3”项目。单击确定。单击确定。

在解决方案资源管理器中，右键单击解决方案，选择“配置管理器...”。

将“示例”的配置更改为“发布”。

将“SymbolicC++3”的配置更改为“静态”。

点击“关闭”。

在您的 Example.cpp 源文件中，输入此示例程序：

```
#include "stdafx.h"

#include "..\include\symbolicc++.h"

int _tmain(int argc, _TCHAR* argv[])
{
    auto x = Symbolic("x");
    auto y = Symbolic("y");

    auto z = x * 3 * y * 4 * y * x / y;

    cout << "simplified: " << z << endl;

    cout << "numerical value: " << z[x == 1.2, y == 3.4] << endl;

    system("pause");
    return 0;
} 
```

按“F5”运行程序。

# user-interface - 使用 wxPython（菜单栏）构建一个 gui 应用程序

> ID：10679421
> 
> 赞同：1
> 
> 时间：2012-05-21T04:09:52.320
> 
> 标签：user-interface, wxpython

在创建菜单栏并向其添加菜单项时，我的面板显示为空白...菜单栏未显示并且收到此消息-（python：4106）：LIBDBUSMENU-GLIB-WARNING **：试图删除一个孩子那不相信我们是它的父母。

我该如何解决这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:56:25.580

我知道我来晚了，但是...

您使用的是 Ubuntu 11/12 吗？这是我收集到的 Ubuntu GTK 实现中的一个错误

有非官方的补丁，但它们适用于 C++ Wx。我和你有同样的问题，这很烦人 [http://trac.wxwidgets.org/ticket/14292](http://trac.wxwidgets.org/ticket/14292)

对我自己来说，菜单栏会显示出来，但是当鼠标越过它时，信号不会发送到状态栏。

我使用票证上的链接从 Unity 中删除了“全局菜单栏”。它解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:37:14.037

我们需要一个示例应用程序：[http](http://wiki.wxpython.org/MakingSampleApps) ://wiki.wxpython.org/MakingSampleApps这将帮助我们找出问题所在。但是，在几乎所有情况下，菜单都应该是框架的子级，所以我怀疑这是你的问题。将其连接到框架而不是面板上。另见[http://www.blog.pythonlibrary.org/2008/07/02/wxpython-working-with-menus-toolbars-and-accelerators/](http://www.blog.pythonlibrary.org/2008/07/02/wxpython-working-with-menus-toolbars-and-accelerators/)或[http://zetcode.com/wxpython/menustoolbars/](http://zetcode.com/wxpython/menustoolbars/)

# java - JTable中带有复选框的多行选择

> ID：10679425
> 
> 赞同：6
> 
> 时间：2012-05-21T04:10:05.487
> 
> 标签：java, swing, jtable

我有一个带有复选框的 JTable 作为列之一。我在标题中还有一个复选框来选中/取消选中所有。AFAIK JTable 的默认行为是，如果选择新行，它会取消选择之前选择的所有行。但是我们可以通过复选框实现 CTRL 点击行为吗？即保留先前选择的行。我面临的主要问题是使用复选框启用多个 JTable 行的选择。

## 预期产出

检查第一行，然后选择第一行，如果检查第三行，则选择第三行以及第一行（已检查并选择）

## 实际输出

当第一行被选中并选择时，如果选择第三行，那么它会取消选择之前选择的所有行，并且只选择第三行。

我有一个示例代码，它模拟了我想要实现的与`Add Another One`按钮相同的场景，但带有复选框选择。

```
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.table.AbstractTableModel;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.event.ListSelectionListener;
import javax.swing.table.TableColumn;
import javax.swing.event.CellEditorListener;

public class JTableRowSelectProgramatically extends JPanel {

final JTable table = new JTable(new MyTableModel());

public JTableRowSelectProgramatically() {
    initializePanel();
}

private void initializePanel() {
    setLayout(new BorderLayout());
    setPreferredSize(new Dimension(475, 150));

    table.setFillsViewportHeight(true);
    JScrollPane pane = new JScrollPane(table);

    JLabel label2 = new JLabel("Row: ");
    final JTextField field2 = new JTextField(3);
    JButton add = new JButton("Select");

    table.setRowSelectionAllowed(true);
    table.setColumnSelectionAllowed(false);
    table.getSelectionModel().addListSelectionListener(new ListSelectionListenerImpl());
    TableColumn tc = table.getColumnModel().getColumn(3);
    tc.setCellEditor(table.getDefaultEditor(Boolean.class));
    tc.setCellRenderer(table.getDefaultRenderer(Boolean.class));
    ((JComponent) table.getDefaultRenderer(Boolean.class)).setOpaque(true);
    tc.getCellEditor().addCellEditorListener(new CellEditorListenerImpl());

    add.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent event) {
            int index2 = 0;
            try {
                index2 = Integer.valueOf(field2.getText());
            } catch (NumberFormatException e) {
                e.printStackTrace();
            }
            table.addRowSelectionInterval(index2, index2);
            field2.setText(String.valueOf(index2));
        }
    });

    JPanel command = new JPanel(new FlowLayout());
    command.add(label2);
    command.add(field2);
    command.add(add);

    add(pane, BorderLayout.CENTER);
    add(command, BorderLayout.SOUTH);
}

public static void showFrame() {
    JPanel panel = new JTableRowSelectProgramatically();
    panel.setOpaque(true);

    JFrame frame = new JFrame("JTable Row Selection");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(panel);
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            JTableRowSelectProgramatically.showFrame();
        }
    });
}

public class MyTableModel extends AbstractTableModel {

    private String[] columns = {"ID", "NAME", "AGE", "A STUDENT?"};
    private Object[][] data = {
        {1, "Alice", 20, new Boolean(false)},
        {2, "Bob", 10, new Boolean(false)},
        {3, "Carol", 15, new Boolean(false)},
        {4, "Mallory", 25, new Boolean(false)}
    };

    public int getRowCount() {
        return data.length;
    }

    public int getColumnCount() {
        return columns.length;
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        return data[rowIndex][columnIndex];
    }

    @Override
    public String getColumnName(int column) {
        return columns[column];
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return columnIndex == 3;
    }

    //
    // This method is used by the JTable to define the default
    // renderer or editor for each cell. For example if you have
    // a boolean data it will be rendered as a check box. A
    // number value is right aligned.
    //
    @Override
    public Class<?> getColumnClass(int columnIndex) {
        return data[0][columnIndex].getClass();
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        if (columnIndex == 3) {
            data[rowIndex][columnIndex] = aValue;
            fireTableCellUpdated(rowIndex, columnIndex);
        }
    }
}

class ListSelectionListenerImpl implements ListSelectionListener {

    public void valueChanged(ListSelectionEvent lse) {
        ListSelectionModel lsm = (ListSelectionModel) lse.getSource();
        int row = table.getRowCount();
        if (lsm.isSelectionEmpty()) {
        } else {
//                If any column is clicked other than checkbox then do normal selection
//                i.e select the click row and deselects the previous selection
            if (table.getSelectedColumn() != 3) {
                for (int i = 0; i < row; i++) {
                    if (lsm.isSelectedIndex(i)) {
                        table.setValueAt(true, i, 3);
                    } else {
                        table.setValueAt(false, i, 3);
                    }
                }

            }
        }
    }
  }
public class CellEditorListenerImpl implements CellEditorListener{

    public void editingStopped(ChangeEvent e) {
        for(int i=0; i<table.getRowCount();i++){
            if((Boolean)table.getValueAt(i, 3)){
                table.addRowSelectionInterval(i, i);
            }
            else{
                table.removeRowSelectionInterval(i, i);
            }
        }
    }

    public void editingCanceled(ChangeEvent e) {
        System.out.println("do nothing");
    }

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T04:57:17.553

一旦你实现了这些`TableModel`方法，你就可以`setValueAt()`在你的按钮监听器中使用来根据需要调整模型，以保持复选框状态和选择模型同步。[这里](https://stackoverflow.com/a/7137801/230513)有一个相关的例子。

```
@Override
public boolean isCellEditable(int rowIndex, int columnIndex) {
    return columnIndex == 3;
}

@Override
public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    if (columnIndex == 3) {
        data[rowIndex][columnIndex] = aValue;
        fireTableCellUpdated(rowIndex, columnIndex);
    }
} 
```

附录：作为一个具体示例，您的`clear`侦听器可能会调用以下`TableModel`方法`clearChecks()`：

```
MyTableModel model = (MyTableModel) table.getModel();
model.clearChecks();
...
private void clearChecks() {
    for (int i = 0; i < data.length; i++) {
        data[i][3] = false;
    }
    fireTableRowsUpdated(0, data.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:21:00.630

在高层次上，我会调用一个键侦听器并检查 VK_CTRL 在您的选择侦听器中是否被标记。这听起来像是逻辑块问题或侦听器冲突。

除此之外，JList 框允许进行多项选择。

# android - 滚动时的android-List View Error

> ID：10679427
> 
> 赞同：1
> 
> 时间：2012-05-21T04:10:22.933
> 
> 标签：android, eclipse, listview

我有一个使用列表视图的应用程序。当我们滚动时，我们没有得到列表项的值。显示错误强制关闭..有人可以帮我吗？

```
Click_button.setOnClickListener(new OnClickListener() {

            @Override
                public void onClick(View v) {

                final Resources res = getResources();
                final String[] colors = res.getStringArray(R.array.Country);
                final ListView l = (ListView) findViewById(R.id.listView1);
                ArrayAdapter<String> adapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1, colors);
                l.setAdapter(adapter);

                l.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {

                        final ListView lsv=(ListView) arg0;
                        TextView tsv=(TextView) lsv.getChildAt(arg2);
                        String s=tsv.getText().toString();

                        TextView tv=(TextView) findViewById(R.id.test);

                        tv.setText(s);

                        new AlertDialog.Builder(context).setTitle(s)
                        .setMessage("Message")
                        .setNeutralButton("Close", new DialogInterface
                        .OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                        // do nothing – it will close on its own
                        }
                        }).show();

                    }
                }); 
```

# php - PHP extractTo 不能在一台计算机上正确提取文件，但可以在另一台计算机上工作。

> ID：10679428
> 
> 赞同：1
> 
> 时间：2012-05-21T04:10:34.753
> 
> 标签：php, wamp, ziparchive

我面临一个非常奇怪的问题！我正在使用以下方法将 .zip 文件的内容提取到新文件夹中。它在我的一台电脑上工作得很好，但在另一台电脑上却不行！我在两台计算机上都有 Windows XP，并且在两台计算机上都安装了相同的 wampServer。两台计算机之间的一切都是一样的，除了它们的 CPU 和 RAM！我的计算机功能强大，而提取过程失败的计算机是非常慢的计算机。这是为什么？如何确保 PHP 代码即使在缓慢的环境中也能完美运行？

要添加的一件事：要提取的 zip 存档包含一个目录和该目录中的一些文件。如果我使用其中没有目录的 zip 文件测试该过程，则它在两台计算机上都可以正常工作。有任何想法吗？！

```
public function extract($pluginName, $pasteLocation) {

    $zip = new ZipArchive(); 
    $plugin = $pasteLocation.$pluginName.".zip";

    if ($zip->open($plugin) === TRUE) {
        $zip->extractTo($pasteLocation);
        $zip->close();
        unlink($pasteLocation.$pluginName.'.zip');
        $status = "true";
        $msg = "success";
    } else {
        $status = "false";
        $msg = "error";
    }

    $result["status"] = $status;
    $result["msg"] = $msg;
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:49:28.147

你说它在一个系统中不起作用。你能说出什么不起作用，比如文件是否被部分提取？还是文件损坏了？

您是否尝试过使用不同的目录。目标目录是否包含与 zip 中的目录同名的文件？那么我猜目录创建将不起作用。

另外你使用的是什么版本的php？

编辑：您是否使用 ZipArchive::getStatusString 函数来获取任何生成的错误？您是否在两台机器上使用相同的源存档？

您也可以在[这里](http://www.php.net/manual/en/class.ziparchive.php.)尝试“hardcorevenom”在评论中解释的程序。

如果没有任何效果，您也可以尝试[此处](http://www.phpconcept.net/pclzip)显示的此类。

# selenium-ide - 将 HttpWatch 与 Selenium IDE 集成

> ID：10679442
> 
> 赞同：0
> 
> 时间：2012-05-21T04:14:48.090
> 
> 标签：selenium-ide, httpwatch

我使用 Selenium IDE 来记录我们项目的测试用例。我们计划使用 HttpWatch 来监控我们网站的性能。有什么方法可以将 Selenium IDE 和 Httpwatch 集成在一起，这样每当我们运行 Selenium 测试用例时，Httpwatch 也应该同时开始记录。

等待回复:)

问候， 拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:25:32.137

HttpWatch 8.4 改进了对 Selenium 和一些代码示例的支持：

[http://blog.httpwatch.com/2012/07/17/httpwatch-8-4-supports-firefox-14-and-selenium/](http://blog.httpwatch.com/2012/07/17/httpwatch-8-4-supports-firefox-14-and-selenium/)

# google-app-engine - 使用 Appengine 持久化 HashMap

> ID：10679443
> 
> 赞同：0
> 
> 时间：2012-05-21T04:15:19.523
> 
> 标签：google-app-engine, objectify

我有一个类似于这个的类：

```
public static class Stats implements Serializable {
    private static final long serialVersionUID = 1L;        
    @Persistent(serialized = "true", defaultFetchGroup="true")
    private Map<String, Integer> requests;

    public Stats() {
        requests = new HashMap<String, Integer>();
    }
} 
```

但是，Appengine 抱怨说`HashMap is not a supported property type.`

那么如何使用 Appengine 存储“HashMap”呢？还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:50:51.420

看起来您正在使用 JDO。请参阅[支持](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses?hl=pl#Collections)的JDO 集合类型。您可以考虑是否可以使用其中一种受支持的集合类型来表示您的数据，或者您可以将 HashMap 存储为序列化字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T17:14:40.463

您可能想看看 EmbeddedEntity。它还没有出现在官方的 Javadoc 中，但很快就会出现。详见[AE 群 1.6.6 SDK 预发布公告](https://groups.google.com/d/topic/google-appengine/8zmSKSYJC_o/discussion)。

另一种解决方案可能是将您的地图序列化为 Blob 属性，例如

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
ObjectOutputStream writer;

try {
   writer = new ObjectOutputStream(out);
   writer.writeObject(requests);
   writer.close();

  Blob requestsMapAsBlob = new Blob(out.toByteArray());

} catch (Exception e) {
  // TODO: handle exceptions 
} 
```

然后，您可以使用该 blob 恢复地图`readObject()`

# objective-c - 目标 C：获取双引号之间的子字符串

> ID：10679444
> 
> 赞同：2
> 
> 时间：2012-05-21T04:15:22.690
> 
> 标签：objective-c, ios, xcode, nsstring, substring

将双引号之间的每个子字符串放入数组中的最佳方法是什么？

例如，如果字符串 (NSString) 是：

```
@"abcd \"efgh\" ijklm \"no\" p \"qrst\" uvwx \"y\" z" 
```

我希望结果是：

```
{@"efgh", @"no", @"qrst", @"y"} 
```

作为 NSArray。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T04:47:52.290

这应该让你开始：

```
NSString *str = @"abcd \"efgh\" ijklm \"no\" p \"qrst\" uvwx \"y\" z";
NSMutableArray *target = [NSMutableArray array];
NSScanner *scanner = [NSScanner scannerWithString:str];
NSString *tmp;

while ([scanner isAtEnd] == NO)
{
    [scanner scanUpToString:@"\"" intoString:NULL];
    [scanner scanString:@"\"" intoString:NULL];
    [scanner scanUpToString:@"\"" intoString:&tmp];
    if ([scanner isAtEnd] == NO)
        [target addObject:tmp];
    [scanner scanString:@"\"" intoString:NULL];
}

for (NSString *item in target)
{
    NSLog(@"%@", item);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T04:41:17.117

一种方法是使用`componentsSeparatedByString:`基于`"`. 这应该给你一个单词数组，其中的计数应该是奇数。将所有偶数单词过滤到一个数组中。这应该是您想要的数组。

或者看看`NSPredicate`。

# android - 如何在 Android 中为图像添加水印效果？

> ID：10679445
> 
> 赞同：20
> 
> 时间：2012-05-21T04:15:47.247
> 
> 标签：android, image, watermark

我有一个带框架的图像，我需要添加水印效果。我该怎么做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-21T11:20:24.513

[我在这里](http://xjaphx.wordpress.com/2011/06/23/image-processing-watermarking-on-the-fly/)找到了关于 Android 图像处理的很棒的教程。

```
public static Bitmap mark(Bitmap src, String watermark, Point location, Color color, int alpha, int size, boolean underline) {
    int w = src.getWidth();
    int h = src.getHeight();
    Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());

    Canvas canvas = new Canvas(result);
    canvas.drawBitmap(src, 0, 0, null);

    Paint paint = new Paint();
    paint.setColor(color);
    paint.setAlpha(alpha);
    paint.setTextSize(size);
    paint.setAntiAlias(true);
    paint.setUnderlineText(underline);
    canvas.drawText(watermark, location.x, location.y, paint);

    return result;
} 
```

感谢 Pete Houston，他分享了有关基本图像处理的有用教程。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-28T07:28:38.557

供其他人参考，如果您想在图像顶部添加应用程序的徽标（位于可绘制文件夹中），请使用以下方法：

```
private Bitmap addWaterMark(Bitmap src) {
        int w = src.getWidth();
        int h = src.getHeight();
        Bitmap result = Bitmap.createBitmap(w, h, src.getConfig());
        Canvas canvas = new Canvas(result);
        canvas.drawBitmap(src, 0, 0, null);

        Bitmap waterMark = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.logo);
        canvas.drawBitmap(waterMark, 0, 0, null);

        return result;
    } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-15T12:47:52.963

如果有人还在寻找这个，我在**[这里找到了一个很好的解决方案](https://androidluckyguys.wordpress.com/2017/08/14/add-watermark-to-captured-image/)**

**它在右下角**添加了一个水印，并根据我正在寻找的源图像**对其进行缩放。**

```
/**
 * Embeds an image watermark over a source image to produce
 * a watermarked one.
 * @param source The source image where watermark should be placed
 * @param watermark Watermark image to place
 * @param ratio A float value < 1 to give the ratio of watermark's height to image's height,
 *             try changing this from 0.20 to 0.60 to obtain right results
 */
public static Bitmap addWatermark(Bitmap source, Bitmap watermark, float ratio) {
    Canvas canvas;
    Paint paint;
    Bitmap bmp;
    Matrix matrix;
    RectF r;

    int width, height;
    float scale;

    width = source.getWidth();
    height = source.getHeight();

    // Create the new bitmap
    bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    paint = new Paint(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG | Paint.FILTER_BITMAP_FLAG);

    // Copy the original bitmap into the new one
    canvas = new Canvas(bmp);
    canvas.drawBitmap(source, 0, 0, paint);

    // Scale the watermark to be approximately to the ratio given of the source image height
    scale = (float) (((float) height * ratio) / (float) watermark.getHeight());

    // Create the matrix
    matrix = new Matrix();
    matrix.postScale(scale, scale);

    // Determine the post-scaled size of the watermark
    r = new RectF(0, 0, watermark.getWidth(), watermark.getHeight());
    matrix.mapRect(r);

    // Move the watermark to the bottom right corner
    matrix.postTranslate(width - r.width(), height - r.height());

    // Draw the watermark
    canvas.drawBitmap(watermark, matrix, paint);

    return bmp;
} 
```

并且评论很好，这是一个巨大的优势！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-21T04:25:37.603

看来你正在寻找一个[`waterrippleeffect`](http://code.google.com/p/waterrippleeffect/source/checkout)像这个一样的。查看完整的源代码。还要检查截图效果如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-23T16:56:08.593

您可以使用[androidWM](https://github.com/huangyz0918/AndroidWM)在图像中添加水印，即使有不可见的水印：

添加依赖：

```
dependencies {
  ...
  implementation 'com.huangyz0918:androidwm:0.2.3'
  ...
} 
```

和java代码：

```
 WatermarkText watermarkText = new WatermarkText(“Hello World”)
                    .setPositionX(0.5) 
                    .setPositionY(0.5) 
                    .setTextAlpha(100) 
                    .setTextColor(Color.WHITE) 
                    .setTextFont(R.font.champagne) 
                    .setTextShadow(0.1f, 5, 5, Color.BLUE); 

 WatermarkBuilder.create(this, backgroundBitmap) 
                    .loadWatermarkText(watermarkText) 
                    .getWatermark() 
                    .setToImageView(backgroundView); 
```

您可以像这样轻松添加图像类型的水印或文本水印，并且库大小小于 30Kb。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-05-21T04:22:47.150

使用框架布局。将两个图像视图放在框架布局内并指定水印图像视图的位置。

# json - perl DBI recipes 列数组

> ID：10679453
> 
> 赞同：1
> 
> 时间：2012-05-21T04:17:36.857
> 
> 标签：json, perl, dbd

下面是我的sql查询输出

```
Company Col1    Col2    Col3
Comp1   1       2       3
Comp2   4       5       6
Comp3   7       8       9 
```

连接和检索结果的 Perl 过程

```
my $query1= qq(select * from database_table);
my $result1 = $dbh->selectall_arrayref($query1, {Slice => {}}); 

  my %result1 =
        map { shift @$_, [ @$_ ]}
        @{$dbh->selectall_arrayref($query1)};
    my @json_output = map { encode_json( { 'name' => $_, 'data'=> $result1{$_} } )
                  } sort keys %result1 ;
    print Dumper %result1;

    [{"name":"Comp1","data":[1,2,3]}, {"name":"Comp2","data":[4,5,6]}, {"name":"Comp3","data":[7,8,9]}] 
```

我一直在阅读[http://www.perlmonks.org/?node_id=284436#fetching](http://www.perlmonks.org/?node_id=284436#fetching)但我不知道如何将列值存储为数组元素。（如下所示）

```
 [{"name":"Col1","data":[1,4,7]}, {"name":"col2","data":[2,5,8]}, {"name":"col3","data":[3,6,9]}] 
```

此外，默认情况下，值字段在 json 中以“字符串”的形式出现，关于如何将它们转换为数字的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:19:18.703

这就是它的样子

```
use strict;
use warnings;

use DBI;
use DBD::mysql;    
use JSON;    
use Data::Dumper;

my $dbh = DBI->connect('DBI:mysql:dbnew:localhost');    
my $query1=qq(select * from database_table);    
my $sth=$dbh->prepare($query1);    
$sth->execute;

my @col_names=@{$sth->{NAME}};

my %result1;    

for(my $i=0;$i<3;$i++)
{
my @res = map { $_->[$i]} @{$dbh->selectall_arrayref($query1)};

@res=map {$_ * 1} @res;

$result1{shift @col_names}=\@res;
}
my @json_output = map {encode_json( { 'name' => $_ , 'data'=> $result1{$_} } )}  sort keys %result1;

print @json_output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T07:47:28.533

假设我有您展示的表格，但称为“fm”。

```
use DBI;
use strict;
use warnings;
use Data::Dumper;
use JSON::XS;

my $h = DBI->connect('dbi:ODBC:xxx', 'xxx', 'xxx');
my $r = $h->selectall_arrayref(q/select company, col1, col2, col3 from fm/);
print Dumper($r);
my @to_encode;
foreach my $row (@$r) {
    my $hash;
    $hash->{name} = shift @$row;
    $hash->{data} = $row;
    push @to_encode, $hash;
}
my $js = encode_json(\@to_encode);
print Dumper($js); 
```

输出：

```
$VAR1 = [
          [
            'comp1',
            '1',
            '2',
            '3'
          ],
          [
            'comp2',
            '4',
            '5',
            '6'
          ],
          [
            'comp3',
            '7',
            '8',
            '9'
          ]
        ];
$VAR1 = '[{"name":"comp1","data":["1","2","3"]},{"name":"comp2","data":["4","5","6"]},{"name":"comp3","data":["7","8","9"]}]'; 
```

编辑：重新阅读您的示例，我认为这确实是您想要的：

```
use DBI;
use strict;
use warnings;
use Data::Dumper;
use JSON::XS;

my $h = DBI->connect('dbi:ODBC:baugi', 'sa', 'easysoft');
my $s = $h->prepare(q/select col1, col2, col3 from fm/);
$s->execute;
my $cols = $s->{NAME};

my @data;
for (my $n = 0; $n < scalar(@$cols); $n++)  {
    push @data, {name => $cols->[$n], data => []};
}
while (my @row = $s->fetchrow) {
    for (my $n = 0; $n < scalar(@$cols); $n++) {
        push @{$data[$n]->{data}}, shift @row;
    }
}
my $js = encode_json(\@data);
print Dumper($js);

$VAR1 = '[{"name":"col1","data":["1","4","7"]},{"name":"col2","data":["2","5","8"]},{"name":"col3","data":["3","6","9"]}]'; 
```

可能有更优雅的方法可以做到这一点，并使用更好的 SQL 简化 Perl 工作，但现在还为时过早，我还没有喝到第一杯咖啡。

正如您指出的那样，数字看起来像编码 JSON 中的字符串。那是因为您的 JSON 模块（无论如何是 JSON::XS）在标量上使用类似 sv_POK 的东西来尝试猜测它们是数字还是字符串，并且大多数 DBD 模块将所有列绑定为字符串并使用 sv_setpv 设置返回的标量。这很烦人，但您需要在调用 encode_json 之前为每个数字添加 0 或：

纯属偶然，我碰巧正在更​​改 DBD::ODBC，因此它将整数绑定为整数 - 请参阅[Perl DBD::ODBC 中列绑定的重大更改](http://www.martin-evans.me.uk/node/138)

使用 DBD::Oracle 您可以将列绑定为 SQL_INTEGER 添加 DiscardString 属性，例如，

```
$s->prepare(q/select company,col1,col2,col3 from mytable);
$s->execute;
$s->bind_col(2, undef, {TYPE => SQL_INTEGER, DiscardString => 1});
# repeat for col2 and col3
$r = $s->fetchall_arrayref 
```

我相信其他一些 DBD 已经将整数绑定为整数 - 可能是 DBD::Pg。

# ruby-on-rails - 使用 capistrano 进行分期和实时应用程序

> ID：10679455
> 
> 赞同：5
> 
> 时间：2012-05-21T04:17:52.537
> 
> 标签：ruby-on-rails, passenger, capistrano, staging

我想我会做一个简单但可能非常有用的事情，并创建另一个名为 live 的符号链接，它指向任意版本，并将 current 留在它通常所在的位置：

```
20120519235508 
20120521004833 
20120521024312 <-- live
20120521025150 
20120521030449 <-- current 
```

然后我将 www.mysite.com 配置为点击

```
live/public 
```

和 stage.mysite.com 命中

```
current/public 
```

不幸的是，两个主机似乎都运行同一个应用程序，而不是两个不同的应用程序。我已经确认 httpd.conf 具有正确的设置并重新启动它。但是没有变化，它们都仍在运行同一个应用程序，确切地说是 current/public 引用的应用程序。

我不知道我是否设置错误，或者是否需要重新启动其他东西，或者这是否无法像我想象的那样工作。我正在使用乘客。

有人可以对这个主题有所了解，因为这种配置对我来说对许​​多项目都非常有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T09:21:45.037

我建议使用多级扩展，而不是在发布目录中创建其他符号链接。使用此扩展，您可以定义不同的阶段并向它们添加自定义配置。因此，不要为登台和生产使用一个部署目录，而是为彼此使用一个单独的部署目录。

将这些行添加到 deploy.rb：

```
require "capistrano/ext/multistage"

set :stages, ["staging", "production"]
set :default_stage, "staging" 
```

从 deploy.rb 中删除 deploy_to 变量。然后在 config 中创建一个部署目录，其中包含带有阶段名称的文件。在这种情况下：deploy/staging.rb 和 deploy/production.rb。staging.rb 的内容：

```
set :rails_env, "staging"
set :deploy_to, "staging/capistrano" 
```

同样对于production.rb：

```
set :rails_env, "production"
set :deploy_to, "production/capistrano" 
```

当然更改 deploy_to 中的路径。然后将 staging.example.com 指向`staging/capistrano/current/public`并将 www.example.com 指向`production/capistrano/current/public`。

要进行分段部署，执行`cap staging deploy`或简单`cap deploy`（请记住，分段在 deploy.rb 中设置为默认值）并`cap production deploy`部署到生产环境。

# sql-server-2008 - 删除特定模式下的所有视图 - SQL

> ID：10679457
> 
> 赞同：2
> 
> 时间：2012-05-21T04:18:29.213
> 
> 标签：sql-server-2008

如何删除特定架构下的所有视图。

例如：如果我在 db 中得到以下视图。

```
[dbo].[view1]
[dbo].[veiw2]
[dbo].[view3]
[myView].[view1]
[myView].[veiw2]
[myView].[view3] 
```

我只想一次删除模式 myView 下的所有视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:53:11.143

试试这个：

```
select 'drop view ' + QUOTENAME(sc.name) + '.' + QUOTENAME(obj.name) + ';'
from sys.objects obj
INNER JOIN sys.schemas sc
ON sc.schema_id = obj.schema_id
where obj.type='V'
and sc.name = 'myView'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-09T14:28:11.960

我有大量的视图（所以，只是将删除查询聚合到一个`nvarchar(max)`不起作用 - 查询被截断。）我想排除一些删除的视图。

在这个例子中，我想从每个模式中删除每个视图，但`usr_*`不以`usr_test`, `usr_usr`,和开头。`usr_usr1``usr_usr2``usr_usr3`

`cursor`使用是因为我不在乎几毫秒。这个视图清理查询是在集成测试之前使用的，它对速度不是很关键（但它表现得非常好）

```
declare drop_view_cursor cursor for
  select 'drop view ' + QUOTENAME(sys.schemas.name) + '.' + QUOTENAME(sys.views.name) + ';'
    from sys.views
    inner join sys.schemas on sys.schemas.schema_id = sys.views.schema_id
    where sys.schemas.schema_id in
    (
      select s.schema_id
        from sys.schemas as s
        where s.name like 'usr_%'
          and s.name not in ('usr_test', 'usr_usr', 'usr_usr1', 'usr_usr2', 'usr_usr3')
    )

declare @sql nvarchar(max)

open drop_view_cursor
fetch next from drop_view_cursor into @sql
while @@FETCH_STATUS = 0  
begin
  exec (@sql)
  fetch next from drop_view_cursor into @sql
end

close drop_view_cursor
deallocate drop_view_cursor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:55:27.643

这考虑了 Schema，使用系统表，并输出到一个变量，然后可以执行。这样，您就不会遇到 Select 截断脚本的问题，因为 Select 和 Print 语句在它们可能返回的长度上受到限制。

以下在 SQL Server 2008 中运行：

```
DECLARE @DropViewCommand nVarChar(MAX) = ''
 SELECT @DropViewCommand = @DropViewCommand
                        + 'DROP VIEW '+ QUOTENAME(S.Name) + '.' + QUOTENAME(V.name) + '; '
   FROM sys.views   as V
   JOIN sys.schemas as S
     ON S.schema_id = V.schema_id
  WHERE S.name = 'dbo'--Selectively delete by Schema.  Comment out to delete all views.
PRINT @DropViewCommand--See the command used in dropping all views (will be truncated in Select/Print, but not when Executing).
EXEC (@DropViewCommand) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-19T07:03:29.647

为那些寻找特定解决方案的人重新发布[答案。](https://stackoverflow.com/a/13414944/2508781)将 DROP 视图代码放入 WHILE 循环中，如下所示：

```
DECLARE @name VARCHAR(128) 
DECLARE @SQL VARCHAR(254)
DECLARE @schema VARCHAR(128)

SELECT @name = (SELECT TOP 1 [name] FROM sysobjects WHERE [type] = 'V' AND category = 0 ORDER BY [name]) 
SELECT @schema = (SELECT TOP 1 schema_name(schema_id) FROM sys.views WHERE [name] = @name)

WHILE @name IS NOT NULL 
BEGIN 
    SELECT @SQL = 'DROP VIEW [' + @schema + '].[' + RTRIM(@name) +']' 
    EXEC (@SQL) 
    PRINT 'Dropped View: ' + @name 
    SELECT @name = (SELECT TOP 1 [name] FROM sysobjects WHERE [type] = 'V' AND category = 0 AND [name] > @name ORDER BY [name]) 
    SELECT @schema = (SELECT TOP 1 schema_name(schema_id) FROM sys.views WHERE [name] = @name)
END 
GO 
```

# python - Mongoengine，只检索一些 MapField

> ID：10679458
> 
> 赞同：2
> 
> 时间：2012-05-21T04:18:47.723
> 
> 标签：python, django, mongodb, pymongo, mongoengine

例如..在MongoDB中..

```
> db.test.findOne({}, {'mapField.FREE':1})
{
    "_id" : ObjectId("4fb7b248c450190a2000006a"),
    "mapField" : {
            "BOXFLUX" : {
                    "a" : "f",
            }
    }
} 
```

'mapField' 字段由 Mongoengine 的 MapField 组成。和'mapField'字段有一个键和数据的日志..但我只检索到'BOXFLUX'..

此查询在 MongoEngine 中不起作用.. 例如..

```
BoxfluxDocument.objects( ~~ querying ~~ ).only('mapField.BOXFLUX') 
```

如您所见.. **only('mapField.BOXFLUX')** 或 only **('mapField__BOXFLUX')**不起作用。它检索所有“mapField”数据，包括“BOXFLUX”一个..

**我怎样才能只检索 MapField 的一个字段？？？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:54:51.967

我看到有一张票：[https ://github.com/hmarr/mongoengine/issues/508](https://github.com/hmarr/mongoengine/issues/508)

对我有用这里有一个示例测试用例：

```
def test_only_with_mapfields(self):

    class BlogPost(Document):
        content = StringField()
        author = MapField(field=StringField())

    BlogPost.drop_collection()

    post = BlogPost(content='Had a good coffee today...', 
                    author={'name': "Ross", "age": "20"}).save()

    obj = BlogPost.objects.only('author__name',).get()

    self.assertEquals(obj.author['name'], "Ross")
    self.assertEquals(obj.author.get("age", None), None) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T05:58:42.517

试试这个：

```
query = BlogPost.objects({your: query})
if name:
    query = query.only('author__'+name)
else:
    query = query.only('author') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:14:29.367

我发现我的错了！我用`only`了两次。

例如：

```
BlogPost.objects.only('author').only('author__name') 
```

我花了一整天的时间找出问题所在`Mongoengine`。

所以我的错误结论是：

```
BlogPost.objects()._collection.find_one(~~ filtering query ~~, {'author.'+ name:1}) 
```

但如您所知，这只是原始数据而不是`mongoengine`查询。

在这段代码之后，我无法运行任何`mongoengine`方法。

**就我而言，我应该根据某些条件进行查询。**

**所以'only'方法会覆盖之前写的'only'方法会很棒..在我的拙见中。**

我希望这个功能将与下一个版本集成。现在，我必须编写重复的代码：

不是这段代码：

```
query = BlogPost.objects()
query( query~~).only('author')
if name:
    query = query.only('author__'+name) 
```

这段代码：

```
query = BlogPost.objects()
query( query~~).only('author')
if name:
    query = BlogPost.objects().only('author__'+name) 
```

所以我认为第二个看起来比第一个更脏。

`only('author')`当然，第一个代码使用not向您显示所有数据`only('author__name')`

# entity-framework - DevExpress XPO vs NHibernate vs Entity Framework：数据库升级问题

> ID：10679466
> 
> 赞同：6
> 
> 时间：2012-05-21T04:21:20.087
> 
> 标签：entity-framework, nhibernate, devexpress, upgrade, xpo

*使用ORM*（[DevExpress XPO](http://www.devexpress.com/Products/NET/ORM/)、[NHibernate](http://nhforge.org/Default.aspx)或[MS Entity Framework](http://msdn.microsoft.com/en-us/library/bb399572.aspx) ）升级数据库的最佳实践是什么？

我正在开始一个新项目，必须选择一个*ORM*。开发过程需要经常发布中间测试版本，并且每个版本都可能在数据库结构中发生变化。每个新版本都必须轻轻升级数据库以保留当前数据。

对于旧解决方案，我将提供一组 SQL 脚本，用于将数据库从*v1*升级到*v2*，从*v2*升级到*v3*等，并按顺序执行它们。

但它如何为*ORM*工作？我还应该编写 SQL 脚本来升级数据库吗？

我知道简单地添加新字段不会导致问题（例如，请参阅XPO 的[UpdateSchema() 方法](http://documentation.devexpress.com/#XPO/DevExpressXpoSession_UpdateSchematopic)），但是如果我必须拆分表并将当前记录重新分配到 2 个新表中怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:04:08.870

我无法评论其他 ORM，但自 2007 年以来，我一直将 DevExpress XPO 用于企业财务应用程序。架构随着每个版本的发布而略有变化，但多年来也发生了一些重大的架构变化。默认 XPO 升级机制的某种扩展版本已轻松满足所有更改。

[这里](http://documentation.devexpress.com/#xaf/CustomDocument2795)有关于升级 XPO 应用程序的很好的基本信息。

*   DevExpress 提供了一个 DBUpdater 工具来帮助您完成升级生产环境的任务。您可以扩展此工具以满足其他要求。在我的应用程序中，我们添加了一些用于日志记录、带回滚预览等的选项。

*   每个模块都有虚拟`UpdateDatabaseBeforeSchemaUpdate()`和`UpdateDatabaseAfterSchemaUpdate()`方法。您可以在其中显着控制升级过程。

正如您所提到的，某些升级将由 XPO 自动处理（例如，添加新列），但有些事情需要额外的控制，例如使用现有记录的默认值初始化新列。

例如，假设`MyNewField`已`MyEntity`在您的应用程序 2.0 版中添加到 XPO 类。假设它应该默认为现有记录的值 3。XPO 将处理新列的创建，但现有记录将为 NULL。（如果您在 XPO 类中指定默认值，它将只与新记录有关）。为了更正现有记录的值，您可以将以下内容添加到实体模块的覆盖`UpdateDatabaseAfterSchemaUpdate()`：

```
public override void UpdateDatabaseAfterUpdateSchema()
{
    base.UpdateDatabaseAfterUpdateSchema();
    if (CurrentDBVersion < new Version(2, 0, 0, 0))
        ObjectSpace.GetSession().ExecuteNonQuery(
            "UPDATE [MyEntity] SET [MyNewField] = 3 WHERE [MyNewField] IS NULL");
} 
```

（如果您不想直接使用 SQL，也可以使用`ObjectSpace.GetObjects<MyEntity>()`and a 。）`foreach`

在将表一分为二的更极端示例中，您可以使用相同的方法，但您可以改写`UpdateDatabaseBeforeUpdateSchema()`，运行 SQL 来拆分表，让 XPO 执行任何其他模式更新，并在必要时填充任何默认值`UpdateDatabaseAfterUpdateSchema()`. _

您会发现遇到约束问题，例如外键违规，因此您可能会发现需要编写一些通用例程，例如`DropAllForeignKeyConstraints()`作为`UpdateDatabaseBeforeUpdateSchema()`. 有时您会发现 XPO 已经提供了一些东西，有时却没有。缺少的约束和索引将在模式更新中重新生成。（根据我的经验，切换主数据表的主键是最难正确更新的例程。）

默认情况下，所有调用都发生在 SQL 事务中，因此如果有任何失败，它都应该回滚。

开发人员需要注意对域模型的更改何时可能导致底层模式出现问题。

对于测试，我们保留一些旧的客户数据库，并在构建过程中运行一系列前后测试，以确保现有客户能够正确升级他们正在升级的任何版本。在生产中，每当我们遇到升级问题时，都会将问题数据添加到此测试库中，以防止将来出现类似问题。

我们正在与主要的国际公司和银行打交道。客户对结果非常满意。在公司的 DBA 需要签署更改的情况下，他们似乎不介意使用命令行工具而不是脚本来进行升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:29:59.660

大多数迁移解决方案可以处理简单的任务，例如添加新列、关系或删除一个，但是当您重命名列时无法工作（这是添加吗？还是添加后的删除等于重命名？您应该如何处理在那种情况下的数据？）

这三个解决方案都支持基本的迁移，XPO 甚至可以让您运行自己的脚本作为过程的一部分（插入静态/测试/持续数据等）

您还可以使用[MigratorDotNet](http://code.google.com/p/migratordotnet/)项目，而不需要依赖任何 ORM 特定的迁移功能。

就个人而言，我只会在开发/测试环境中使用自动迁移，并且在客户端特定数据库上运行时会拥有全套升级脚本，例如从 v1 升级到 v2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:15:40.723

> 它将如何为 ORM 工作？我还应该编写 SQL 脚本来升级数据库吗？

这个问题的明确答案应该在程序员的 stackexchange 线程上 -[评估 ORM for.NET 的标准是什么？](https://softwareengineering.stackexchange.com/questions/9498/what-are-the-criteria-for-evaluating-an-orm-for-net)，对于您提出的问题，我得到了简单的答案，并且与我在使用实体框架和 Code smith ORM 模板开发一些项目时使用 ORM 的经验相匹配。

***ORM 如何管理数据模型的变化？如果我必须拆分表并将当前记录重新分配到 2 个新表中怎么办？***

> 有些可以在一定范围内自动更新数据库，有些什么都不做，你必须自己做这些脏活；其他提供了一个处理更改的框架，可以让您控制数据库更新。[这意味着每隔几天](https://softwareengineering.stackexchange.com/a/41843/33403)有人需要花一个小时更新模型以添加表或更改正在更改的数据类型

参考：
[https ://softwareengineering.stackexchange.com/questions/6543/what-are-the-benefits-of-using-database-abstraction-by-orm](https://softwareengineering.stackexchange.com/questions/6543/what-are-the-benefits-of-using-database-abstraction-by-orm)
[https://softwareengineering.stackexchange.com/questions/41739/best -arguments-for-against-introducing-orm-technology-into-a-companies-dev-proce/41833#41833](https://softwareengineering.stackexchange.com/questions/41739/best-arguments-for-against-introducing-orm-technology-into-a-companies-dev-proce/41833#41833)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-11-16T09:53:55.143

如果您问 - 使用 ORM 升级数据库的最佳做法是什么 - 我的回答是：如果您的应用程序不仅仅是一个爱好者应用程序，请不要使用它。

在很多情况下，许多 ORM 无法为您的特定数据库需求提供支持，例如在不编写 sql 脚本的情况下创建存储过程、创建索引和视图甚至索引视图/物化表。在 ORM-Migration-Code 中解决诸如向现有表中添加新的不可为空列之类的问题比编写 SQL 脚本要困难得多。

像 Visual Studio Data Tools 这样的当前工具确实可以更好地处理这类问题。

# c# - 需要帮助在 C# 中加入两个对象列表

> ID：10679473
> 
> 赞同：0
> 
> 时间：2012-05-21T04:22:46.930
> 
> 标签：c#, linq

使用我的两个对象列表，我想保留基于字符串键的唯一项的总集合，其中任何冲突都来自第一个列表，任何未命中都来自第二个列表。换句话说，我想忽略第一个列表中不在第二个列表中的任何项目，但我想保留第二个列表中确实存在的所有项目以及第二个列表中的任何剩余项目。

最好的方法是什么？

**编辑：**这个问题比简单的联合更微妙。联合将连接两个列表中的不同项目。在发生冲突的情况下，它会从外部列表中获取项目。

就我而言，我不想保留 List1 中的一些项目，因为它们不存在于 List2 中，而我确实想保留列表 2 中的所有项目。

是否有更清洁/更短的方法来执行以下操作？

```
var remaining = allowedItems.Except(recentItems)
var allowedRecentItems = recentItems.Intersect(allowedItems)
var result = allowedRecentItems.Concat(remaining); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:36:59.967

尝试这个：

```
var resultlist = list1.Union(list2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:30:28.360

```
var list1 = new List<string>{"A", "B", "C"};
var list2 = new List<string>{"B", "C", "D"};
var list = list1.Union(list2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:45:21.020

使用第二个列表就可以了。直接翻译您的要求会产生： `list1.Intersect(list2).Union(list2)`哪些结果 list2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T05:08:15.360

如果我理解正确 - 你应该只保留第二个列表。这样你的两个条件都满足了

> *   我想忽略第一个列表中不在第二个列表中的任何项目

如果你只保留第二个列表，那么第一个列表中不存在于第二个列表中的所有项目将被自动忽略。

> *   我想保留第二个列表中确实存在的所有项目以及第二个列表中的任何剩余项目

另一方面，将自动选择两个列表中存在的项目，包括仅存在于第二个列表中的项目。

如果这不是您想要的，那么您应该检查[List.Distinct()](http://msdn.microsoft.com/en-us/library/bb348436.aspx)、[List.Except()](http://msdn.microsoft.com/en-us/library/bb300779.aspx)和[List.Union()](http://msdn.microsoft.com/en-us/library/bb341731.aspx)扩展方法。

# javascript - 为每个孩子循环 jQuery

> ID：10679476
> 
> 赞同：3
> 
> 时间：2012-05-21T04:23:05.530
> 
> 标签：javascript, jquery, loops

我如何编写使用 for(i=1; ... ...); 的短代码 允许我遍历每个孩子并添加不同类的函数。

```
$('#WebPartWPQ3 > table:first-child').addClass('blogpost1');
$('#WebPartWPQ3 > table:nth-child(2)').addClass('blogpost2');
$('#WebPartWPQ3 > table:nth-child(3)').addClass('blogpost3');
$('#WebPartWPQ3 > table:nth-child(4)').addClass('blogpost4');
$('#WebPartWPQ3 > table:nth-child(5)').addClass('blogpost5');
$('#WebPartWPQ3 > table:nth-child(6)').addClass('blogpost6');
$('#WebPartWPQ3 > table:nth-child(7)').addClass('blogpost7');
$('#WebPartWPQ3 > table:nth-child(8)').addClass('blogpost8');
$('#WebPartWPQ3 > table:nth-child(9)').addClass('blogpost9'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T04:27:11.533

尝试

```
$('#WebPartWPQ3 > table').each(function(i,j){

 $(this).addClass("blogpost"+(i+1));
}); 
```

# android - Wifi Adhoc:: 安卓手机到安卓手机

> ID：10679478
> 
> 赞同：1
> 
> 时间：2012-05-21T04:23:34.237
> 
> 标签：android, wifi, android-wifi

我需要在不使用外部接入点的情况下使用 Wifi 将消息从 Android 手机传输到另一部 Android 手机。我试图在网上搜索，但我的努力是徒劳的。我已经将手机植根并修补了 WPA_supplicant 文件，以便每部手机都可以检测到 adhoc 网络。我有以下问题。

1.  是否可以使用wifi将消息从手机传输到手机？
2.  是否有任何教程或示例可用于通过 wifi 广播消息？
3.  我在 youtube 上发现了一个有趣的视频（链接：[http](http://www.youtube.com/watch?v=Zsydxw2BGEI) ://www.youtube.com/watch?v=Zsydxw2BGEI ）。谁能告诉我那家伙是如何让 Wifi adhoc 工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T13:19:48.753

你可以谷歌“将临时连接到安卓”！我发现了一些视频
[https://www.youtube.com/results?q=adhoc%20android&um=1&ie=UTF-8&gl=IN&sa=N&tab=w1](https://www.youtube.com/results?q=adhoc%20android&um=1&ie=UTF-8&gl=IN&sa=N&tab=w1)

# javascript - 加载div时加载javascript？

> ID：10679481
> 
> 赞同：0
> 
> 时间：2012-05-21T04:24:33.637
> 
> 标签：javascript, javascript-events, event-handling

我有一个脚本，可以将页面（内容）重新加载到随机 DIV 如何实现这一点，以便在加载 div 后加载脚本？

我准备好了以下代码：

```
<script>  
$(document).ready(function() {
   $("#getAssignment").click(function() {
      var $divs = $(".assignment");
      if ($divs.length > 0) {
         window.location.hash = "#" + $divs[ Math.floor(Math.random() * 
         $divs.length) ].id;
      }
  });
});    
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:25:12.000

```
$("div").load(function(){
    blah();
}); 
```

这将做你想要的，但它没有意义，因为`div`它不像图像或`<script>`页面。`<div>`（无论如何，您都不能真正“加载” a 。）

# javascript - 如何创建 iPad 应用程序来重用我为 Web 应用程序构建的 JS 库

> ID：10679483
> 
> 赞同：0
> 
> 时间：2012-05-21T04:24:58.897
> 
> 标签：javascript, xcode, ipad, cordova, rhodes

所以我是一名网络（Rails）开发人员，我想为我的网站创建一个 iPad 应用程序。Web 应用程序严重依赖于专门为以独特方式与用户交互而构建的 javascript 库。

现在我想将相同的交互转换为我的 iPad 应用程序。我需要一种方法来重用我的 js 文件，因为重新编码库需要很长时间。我可能会遵循三个选项：
1- 使用 Rhodes：建立在 ruby​​ 之上并受到 Rails 的启发。
2- PhoneGap：它基本上是应用程序内的网络浏览器，所以我认为包含 js 文件是可能的。
3- xCode：我需要花费大量时间来学习和实施。

我的问题是：
1- 我可以在 rhodes 项目中导入我的 js 文件吗？
2-哪个是最好的实现？
3-我还有其他选择吗？

任何提示和指示将不胜感激，

非常感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:54:37.653

由于我不知道您正在开发的应用程序及其设计，我在这里看到两种方法，因为它是 Rails，

**移动网络**

*   现有的网络应用程序应针对移动网络（实际上是 iPad 和大部分平板电脑）进行定制。
*   创建特定于手机/平板电脑的控制器。这将连接到特定于移动/平板电脑创建的视图。
*   在发布 HTTP 请求并重定向到您创建的特定视图时检测设备/平台。

好消息是你的 JS 总是一样的（你需要做一些小的修改），并且在不学习新东西的情况下显着减少了开发时间。

**电话间隙**

您可以提取您编写的所有 JS 并构建一些 html/css 集成所有内容并在 iOS 的 phonegap 模板中构建项目，并创建一个设备上的应用程序并分发。但是 JS 也会在这里发生一些变化。

但这与移动网络没有什么不同，这会带来其他开销，例如 CORS 和构建/发布、更新管理和应用商店等。

**原生APP**

正如你所说，你必须学习 iOS 开发（objC）。您可以在 Rails 端创建 RESTful 服务并将它们公开给 iOS 应用程序。

Rhodes 我不太确定，它有点棘手，它也取决于您现有的网络应用程序。在部署之前尝试一下。

# jsf-2 - java.lang.ClassNotFoundException：org.apache.myfaces.webapp.StartupServletContextListener

> ID：10679490
> 
> 赞同：6
> 
> 时间：2012-05-21T04:25:34.380
> 
> 标签：jsf-2, myfaces

我的 JSF Web 应用程序启动时出现以下异常：

```
SEVERE: Error configuring application listener of class org.apache.myfaces.webapp.StartupServletContextListener
java.lang.ClassNotFoundException: org.apache.myfaces.webapp.StartupServletContextListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3786)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

这是我的`web.xml`文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
 <display-name>J2S</display-name>
 <context-param>
  <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  <param-value>client</param-value>
 </context-param>
 <context-param>
  <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
  <param-value>resources.application</param-value>
 </context-param>
 <context-param>
  <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
  <param-value>true</param-value>
 </context-param>
 <context-param>
  <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
  <param-value>true</param-value>
 </context-param>
 <context-param>
  <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
  <param-value>false</param-value>
 </context-param>
 <context-param>
  <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
  <param-value>true</param-value>
 </context-param>
 <listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>
 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping>
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
 </servlet-mapping>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
 </servlet-mapping>
 <welcome-file-list>
  welcome-file>index.xhtml</welcome-file>
 </welcome-file-list>
</web-app> 
```

此异常是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T12:23:07.697

> java.lang.ClassNotFoundException：org.apache.myfaces.webapp.StartupServletContextListener

这`ClassNotFoundException`意味着应用程序的运行时类路径中缺少提到的类。提到的类是[MyFaces](http://myfaces.apache.org) JSF 实现的一部分。您需要 [下载](http://myfaces.apache.org/download.html)MyFaces Core Distribution，解压缩文件并将文件`/lib`夹中的 JAR 文件放入`/WEB-INF/lib`您的 webapp 项目的文件夹中。请注意，MyFaces 附带三个`myfaces-*.jar`文件，您应该将和JAR文件放在一起，*或者**将*JAR 文件单独放在.`myfaces-api``myfaces-impl`*`myfaces-bundle``/WEB-INF/lib`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:17:50.083

我在 Eclipse 上使用 Tomcat7 时遇到了同样的问题。我有所有必需的 jar 文件。我发现这是由于服务器配置错误造成的。确保在 Eclipse 上创建动态 Web 项目时，为 Tomcat 选择 JSF 配置，而不是默认配置。*

# powershell - 在循环中使用新变量的问题

> ID：10679493
> 
> 赞同：0
> 
> 时间：2012-05-21T04:26:45.863
> 
> 标签：powershell

所以，我有一个有趣的问题，我没有运气解决。我需要创建一堆动态数组变量。

代码：

```
$temp = 'arr1=(1,2,3);arr2=(4,5,6);arr3=(7,8,9)'
foreach($item in $temp.split(";")){
    $var = $item.split("=")
    New-variable $var[0] $var[1]
    get-variable $var[0]
} 
```

结果：

```
$arr1 (1,2,3)
...   (4,5,6)
...   (7,8,9) 
```

我有变量 $temp ，其中包含我要创建的以分号分隔的变量/值列表。正如您在上面看到的，我正在使用新变量来创建它。有趣的是，当我从脚本运行它时，新变量适用于第一次调用，但随后我得到数组中所有其他变量的“...”。知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:29:06.400

正如 Andy 在评论中已经指出的那样，您不是在创建一个以分号分隔的列表，而是在创建多个名为`$arr1`,`$arr2`等的变量，而`$temp`只是引用`$arr1`.

修复代码的一种方法是

```
$temp = 'arr1=(1,2,3);arr2=(4,5,6);...' 
```

请注意，`New-Variable`您不能为`$`印记添加前缀。*变量名称*是`arr1`，即使您在代码中将其称为or`$arr1`或`(gv arr1).Value`其他名称。

但这是在 PowerShell 中编写代码的一种非常奇怪的方式。您只是没有真正提供足够的细节，以便我们真正知道您在做什么。

你也可以这样做

```
$arr1 = '(1,2,3)'
$arr2 = '(4,5,6)'
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T01:01:37.933

不知道为什么会这样，但是当我拆分字符串时，我的数组中出现了一些随机的 ascii 字符。能够看到这要感谢 PowerGUI ！！！解决方案是在使用之前修剪字符串。（即 $var[0].Trim() ）

# java - Tomcat无效的lib目录

> ID：10679498
> 
> 赞同：1
> 
> 时间：2012-05-21T04:27:57.617
> 
> 标签：java, spring, tomcat, ubuntu

我正在尝试通过 eclipse 使用 tomcat 部署一个基本的 HelloWorld Web 应用程序，但我似乎无法使用 eclipse 部署它。这是我在手动部署时收到的错误消息。

```
May 20, 2012 10:44:09 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/home/chris/lib], exists: [false], isDirectory:         [false], canRead: [false]
May 20, 2012 10:44:09 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [/home/chris/lib], exists: [false], isDirectory:     [false], canRead: [false]
java.lang.ClassNotFoundException: org.apache.catalina.startup.Catalina
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:217)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:406) 
```

我正在运行 ubuntu 11.10，我手动安装了 eclipse 并通过 eclipse 安装了 tomcat。我正在努力将我的代码放入 github，并在我确认其工作时发布链接。

如何在 ubuntu 上通过 tomcat 测试我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:08:48.770

尝试从 Apache Tomcat 站点下载。[http://tomcat.apache.org/download-70.cgi](http://tomcat.apache.org/download-70.cgi)

我假设您正在使用 tar.gz 文件。使用 tar 命令在 uBuntu 上提取它。

您将拥有这种文件夹结构：

*   斌
*   库
*   网络应用
*   日志
*   等等

如果你想启动你的tomcat。去斌。找到文件并运行**startup.sh** (linux) 然后去你的 webapps。将您的 .WAR 文件放在这里。假设你的**HelloWorld.war**

如果您使用的是 Eclipse。您可以将您的 tomcat 目录添加到服务器。转到服务器，添加服务器，并在那里注册您的 tomcat。将其指向您提取 tar.gz 文件的目录。希望能帮助到你

# c# - 只读部分 XML 文件

> ID：10679499
> 
> 赞同：-3
> 
> 时间：2012-05-21T04:27:58.923
> 
> 标签：c#, asp.net, xml, linq

```
<Peoples>
 <People>
  <Name>RadheyJang</Name> 
  <Location>India</Location> 
  <Work>Software Developer</Work> 
  <Point>5</Point> 
  <details>
    <People>
    <Name>ArunaTiwari</Name> 
    <Location>India</Location> 
    <Work>SoFtwareCoder</Work> 
    <Point>3</Point> 
    <details/>
    <Test>A</Test>
    </People>
  </details>
  <Test>NA</Test>    
 </People>
</Peoples> 
```

我可以通过使用下面的代码来阅读那个 Xml。

```
 XDocument xmlDoc = XDocument.Load(str);
                       var vrresult = from a in xmlDoc.Descendants("People") 
                       select new
                       {
                           Name= a.Element("Name").Value,
                           Location= a.Element("Location").Value,
                           Point= a.Element("Point").Value
                       };

                        GridView1.DataSource = vrresult;
                        GridView1.DataBind(); 
```

但它也在阅读详细的内容。我想跳过阅读**details** Element 中的内容。请让我知道如何跳过详细信息中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:42:15.137

您需要为此使用 XPath...

```
using System.Xml.XPath;

string xml = @"
    <Peoples>
        <People>
        <Name>RadheyJang</Name> 
        <Location>India</Location> 
        <Work>Software Developer</Work> 
        <Point>5</Point> 
        <details>
            <People>
            <Name>ArunaTiwari</Name> 
            <Location>India</Location> 
            <Work>SoFtwareCoder</Work> 
            <Point>3</Point> 
            <details/>
            <Test>A</Test>
            </People>
        </details>
        <Test>NA</Test>    
        </People>
    </Peoples>";

XDocument xmlDoc = XDocument.Parse(xml);

var vrresult = from a in xmlDoc.XPathSelectElements("/Peoples/People")
                select new
                {
                    Name = a.Element("Name").Value,
                    Location = a.Element("Location").Value,
                    Point = a.Element("Point").Value
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:39:26.023

我唯一能想到的是 XML 是不合法的：

```
<Peoples>
 <People> *You have an opening People tag here*
  <Name>RadheyJang</Name> 
  <Location>India</Location> 
  <Work>Software Developer</Work> 
  <Point>5</Point> 
  <details> *You create a details tag here*
   <People> *You generate the same tag inside of another People tag*
    <Name>ArunaTiwari</Name> 
    <Location>India</Location> 
    <Work>SoFtwareCoder</Work> 
    <Point>3</Point> 
    <details/> *Then you close the details tag here*
    <Test>A</Test>
    </People>
  </details> *Then you close another one, but there is not a second opening detail tag*
  <Test>NA</Test>    
 </People>
</Peoples> 
```

我不确定这是否有帮助，但您可能需要考虑修复您的 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T04:59:18.407

```
 var ele = XElement.Parse(xml);
    // change to XElement.Load if loading from file  
    var result = ele.Descendants("Section").Zip(ele.Descendannt("Mark"),  (s,m) => new {Section = s.Value, Mark = m.Value}); Now you can create your DataTable:

    var table = new DataTable(); 
    var marks = new DataColumn("Mark");
    var sections = new     DataColumn("Sections"); 
    table.Columns.Add(marks); table.Columns.Add(sections); 
    foreach (var item in result) 
    {   
     var row = table.NewRow();   
     row["Mark"] = item.Mark;     
     row["Sections"] = item.Section; 
     table.Rows.Add(row);
    } 
```

试试这个代码..

# c - 使用 insmod 插入模块后没有输出到终端

> ID：10679500
> 
> 赞同：0
> 
> 时间：2012-05-21T04:28:09.187
> 
> 标签：c, linux, module, linux-kernel, kernel-module

我正在遵循以下[教程](http://lwn.net/Kernel/LDD3/)，尝试学习如何开发设备驱动程序，在第 2 章中，重点是开发一个工作模块并将其插入内核。我使用了以下代码（hello.c）：

```
#include <linux/init.h>
#include <linux/module.h>
#include <linux/kernel.h>

MODULE_LICENSE("Dual BSD/GPL");

static int hello_init(void)
{
    printk(KERN_ALERT "Hello World!\n");
    return 0;
}

static void hello_exit(void)
{
    printk(KERN_ALERT "Goodbye, cruel world!\n");
}

module_init(hello_init);
module_exit(hello_exit); 
```

我的这是 Makefile：

```
obj-m += hello.o

all:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

然后我在 LXTerminal 中运行以下命令：

```
brian@brian-desktop:~/driver_stuff/hello$ su
root@brian-desktop:/home/brian/driver_stuff/hello# make
make -C /lib/modules/2.6.32-21-generic/build M=/home/brian/driver_stuff/hello modules
make[1]: Entering directory `/usr/src/linux-headers-2.6.32-21-generic'
Building modules, stage 2.
MODPOST 1 modules
make[1]: Leaving directory `/usr/src/linux-headers-2.6.32-21-generic'
root@brian-desktop:/home/brian/driver_stuff/hello# insmod ./hello.ko
root@brian-desktop:/home/brian/driver_stuff/hello# rmmod hello
root@brian-desktop:/home/brian/driver_stuff/hello# exit 
```

然而，在**insmod ./hello.ko**命令之后，人们应该期望终端会打印**“Hello world！”。**然后**是“再见，残酷的世界！”** 在**rmmod hello**命令之后。这本书提到当你在控制台中运行命令时会发生这种情况，而不是在模拟终端中，这可能是问题吗？

我还在 /var/log/messages 和 /var/log/messages.1 下检查了其中没有任何“Hello World！”的记录。也不是“再见，残酷的世界！”。这些消息是否可能位于不同的文件中，或者消息是否一开始没有被推送到内核？

如果您需要有关我正在运行的内核的信息（Lubuntu 10.04，在 VM 内）：

```
brian@brian-desktop:~/driver_stuff/hello$ uname -r
2.6.32-21-generic 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T04:33:47.717

的输出`kprintf`始终是内核日志。这也可能会发生在系统控制台上（因此，如果您在控制台上，则会到达您正在使用的终端），但是没有任何东西可以将其链接回您加载模块的特定终端。

要读取内核日志，请运行`dmesg`.

# apache - 从 httpd.conf 中删除 ServerAlias

> ID：10679504
> 
> 赞同：0
> 
> 时间：2012-05-21T04:28:21.040
> 
> 标签：apache, .htaccess, cpanel, whm

我正在使用 WHM/cPanel 来管理网络托管，并且想知道如何删除“cpanel、whm、webmail”ServerAlias。例如，我不希望任何人这样做 {HTTP_HOST}/cpanel 以访问他们的 cPanel。

这些规则在 httd.conf 文件中明确定义，该文件位于

```
/usr/local/apache/conf 
```

我已经尝试手动修改它们，并收到以下消息：

```
# DO NOT EDIT. AUTOMATICALLY GENERATED.  IF YOU NEED TO MAKE A CHANGE 
PLEASE USE THE INCLUDE FILES. 
```

即使文件已成功保存，也没有真正发生任何事情。用户仍然可以使用这些不需要的别名。我应该怎么做才能有效地做出改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:14:01.213

您是否重新启动了 Apache？

```
service httpd graceful 
```

..或者你可以通过WHM来做到这一点。

# php - 点击按钮获取请求

> ID：10679506
> 
> 赞同：0
> 
> 时间：2012-05-21T04:28:40.650
> 
> 标签：php, html, request

这是挑战，我有一个网页，里面有一个表单，与之对应的按钮当然会导致提交。我拥有的另一个按钮本质上必须触发一个数据库调用，该调用在此页面上显示来自数据库的内容。

所以从技术上讲，我的大脑理解这个按钮应该向服务器发送一个 GET 请求，然后我检索必要的信息并显示它。但从语法上讲，我不明白如何实现这一点，一种方法是将这个按钮封装在另一种形式中，它有一个名为 GET 的方法，在我的服务器端，我检索我的信息，对其进行编码和将其发送回客户端。但是在表单中进行编码的想法对我没有吸引力，因为这不是表单，我真正想了解的是如何通过单击按钮来触发 GET 方法。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T04:33:06.440

发送 GET 请求有两种简单的方法。一个是你想出来的，一个新的表单，有那个按钮作为输入，没有任何问题，所以我不确定什么对你没有吸引力。第二种方式可以通过链接，例如：

```
<a href="somesite.php?something=value">Link</a> 
```

# javascript - 添加 里面 动态包含标签

> ID：10679507
> 
> 赞同：-1
> 
> 时间：2012-05-21T04:29:07.233
> 
> 标签：javascript, jquery, html, dynamic

在 ul 标记之后，我想在 javascript 中调用函数来动态添加列表项，并且我想在里面放置图像标记，如下所示。

```
<li> <img src="images/testpic" height="200px" width="200px" /> </li> 
```

我在 jquery 中使用了 .append() 方法但不起作用

```
<script type="text/javascript">
                '$('ul').append("<li><img src='thumbs/image"+i+".jpg' width='175' height='175' /></li>");
                '$('ul').append("<li><img src='thumbs/image"+i+".jpg' width='175' height='175' /></li>");
                '$('ul').append("<li><img src='thumbs/image"+i+".jpg' width='175' height='175' /></li>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T04:37:20.077

### 从 for 循环

```
for ( var i = 0; i < 10; i++ ) {
    $("<li>",{ html:'<img src="http://placekitten.com/100/100?image='+i+'" />' })
        .appendTo("#images");   
}​ 
```

### 来自图像数组

如果您只想添加带有图像的列表项：

```
// You have a mention of i in your example, so I assume you are
// cycling over some sort of list - so I'll do the same
​var images = [ 'http://placekitten.com/50/50', 
               'http://placekitten.com/50/50?image=2' ];

// You had some malformed markup in your code, the following keeps it simple
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​$.each( images, function( i, v ) {
    $("<li>", { html: '<img src="' + v + '" />' }).appendTo("#images");        
});​ 
```

小提琴：http: [//jsfiddle.net/YwH7Z/](http://jsfiddle.net/YwH7Z/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:01:45.587

假设您的图像编号从`0`...开始

```
$('ul').each(function(i) {
    $(this).append("<li><img src='thumbs/image"+i+".jpg' style='width:175px; height:175px; '/></li>");
}); 
```

[例子](http://jsfiddle.net/yRS9R/)

假设它开始于`1`..

```
$('ul').each(function(i) {
    $(this).append("<li><img src='thumbs/image"+(i+1)+".jpg' style='width:175px; height:175px; '/></li>");
}); 
```

[例子](http://jsfiddle.net/yRS9R/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T04:31:13.387

```
$('ul').each(function() {
   $(this).append("<li><img src='thumbs/image"+i+".jpg' width='175' height='175'/></li>");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T04:48:25.803

可以通过以下步骤修复错误：

1.  你确定 using`$('ul')`可以找到 ul 标签元素吗？如果没有，请将您的代码放入`$(function(){/**put your append code**/})`，并确保`<body>`包含`<ul>`元素。
2.  您确定附加的 html 已格式化吗？把 " `li><img src='thumbs/image"+i+".jpg' width='175' height='175' /></li>>`" 放进去`<ul>`，然后在浏览器上看到 li 了吗？

# mapping - 如何在 vim 中映射 {Ctrl 0,-,=} 键？

> ID：10679510
> 
> 赞同：3
> 
> 时间：2012-05-21T04:30:04.257
> 
> 标签：mapping, keyboard-shortcuts, vim, ubuntu-12.04

我的键盘布局（第二行）：

````1`...`0``-``=``Backspace`

我想将函数调用映射到`Ctrl`+ `0`, `-`, `=`.

这是我创建的功能：

```
" it doesn't work
nnoremap <C-=>  :call IncFontSize(+1)<CR>

" it works
nnoremap <C-->  :call IncFontSize(-1)<CR>

" it doesn't work
nnoremap <C-0>  :call IncFontSize(0)<CR>

fun! IncFontSize(inc)
    if !exists('+guifont')
        return
    endif
    let s:defaultfont = 'Ubuntu Mono 12'
    if a:inc==0 || empty(&guifont)
        let &guifont = s:defaultfont
        return
    endif
    let &guifont = substitute(&guifont, '\d\+$', '\=submatch(0)+'.a:inc, '')
endfun 
```

如何将函数调用映射到这些键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T06:31:10.267

请注意，在命令行模式下，`Ctrl`-`_`会导致`^_`，但`Ctrl`-`0`和`Ctrl`-`=`不会产生任何结果。

由于键盘输入在内部处理的方式，即使在 GVIM 中，今天也无法区分这个以及许多其他组合键（如`Ctrl`+`Letter`与`Ctrl`+ `Shift`+ ）。`Letter`这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[关联](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:00:19.237

[http://vim.wikia.com/wiki/Fast_window_resizing_with_plus/minus_keys](http://vim.wikia.com/wiki/Fast_window_resizing_with_plus/minus_keys)

只是只有`+`和`-`……没有别名

```
:nmap + :echo "hello world"<CR> 
```

是你想要的吗？

# c# - WinRT 投影类型文档

> ID：10679515
> 
> 赞同：6
> 
> 时间：2012-05-21T04:30:41.293
> 
> 标签：c#, .net, windows-8, windows-runtime

WinRT 中有一种叫做**投影类型的东西。**例如，在元数据中，`IXamlType.UnderlyingType`定义为：

```
TypeName UnderlyingType { get; } 
```

但是，当在 C# 应用程序中使用时，它会发生如下变化：

```
Type UnderlyingType { get; } 
```

我的问题是 - 是否有任何关于用于此类映射的规则、API、属性的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:16:13.253

没错，CLR 中内置的语言投影会自动将 WinRT 类型映射到 CLR 类型。文档很难获得，尤其是现在这仍然是测试版材料。但是有一个很好的白皮书描述了 CLR 投影的某些方面。下载（当前）[可在此处获得](http://download.microsoft.com/download/2/3/E/23E1E9BE-41AA-4716-A7B3-82040271394C/CLRandtheWindowsRuntime.docx)（注：Word .docx 文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:12:05.633

当使用低级创作工具（带有 /winrt 开关和 MDMERGE 的 MIDL）创建 Windows 元数据时，程序集中通常使用 typedef 的任何位置，typedef 都将替换为指向同一程序集内的 typerefs。

这允许 CLR 重写 winmd 文件的内容，将 windows 运行时类型替换为相应的 CLR 类型。最简单的例子是 Windows.Foundation.Uri 类型被 System.Uri 替换为 C# 应用程序。CLR 在内部知道如何在 WFUri 和 S.Uri 之间进行映射，它会自动为您执行此转换。

所有这些都是由系统自动处理的，有规则，但我不相信这个过程是开发人员可以控制的——我相信类型映射被烧录到 CLR 实现中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:33:26.307

这是我正在谈论的链接，它是第 9 频道上的视频[http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-874T](http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-874T)请注意，这是基于构建会议的视频开发者预览。我无法预测消费者预览版中这些信息有多少变化。

我同意应该有关于这是如何工作的文档。希望他们能尽快更新 MSDN 上的文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-16T13:11:26.430

他们说源代码是最好的文档。在这种情况下，它似乎是唯一的文档。以下是我通过 .NET 源代码探索的发现。

[元数据投影列表使用宏迭代器](https://github.com/dotnet/coreclr/blob/master/src/inc/winrtprojectedtypes.h)在 .NET 源中编码。

此标头包含在各个位置，在这些位置它被转换为手头任务的数据结构。我发现对我们来说最容易访问的地方是[WinMD 元数据导入](https://github.com/dotnet/coreclr/blob/master/src/md/winmd/winmdimport.cpp)器及其[适配器](https://github.com/dotnet/coreclr/blob/master/src/md/winmd/adapter.cpp)。从来源：

```
// This metadata importer is exposed publically via CoCreateInstance(CLSID_CorMetaDataDispenser...).
// when the target is a .winmd file. It applies a small number of on-the-fly
// conversions to make the .winmd file look like a regular .NET assembly. 
```

我的看法是，您可以使用文件`CoCreateInstance(CLSID_CorMetaDataDispenser...)`来创建一个`IMetaDataDispenser`调用[OpenScope()](https://msdn.microsoft.com/en-us/library/ms231248%28v=vs.110%29.aspx)以获取元数据导入器。然后，它会在您阅读元数据时为您进行类似的转换。我推测，但我很确定这就是 Visual Studio 在从元数据或接口实现生成类型定义时所做的事情。`IID_IMetaDataImport``.winmd``IMap``IDictionary`

您还可以将带有宏迭代器的标头包含到您自己的 C/C++ 项目中，并将其中的数据转换为对您最有用的任何形式，例如从中生成代码。

# mysql - 调用存储过程对数组执行计数

> ID：10679516
> 
> 赞同：0
> 
> 时间：2012-05-21T04:30:49.843
> 
> 标签：mysql, vb.net, stored-procedures

我正在`distinct user`从中选择一个`IT_Cases_List`并将*其存储*在一个`arraystaff()`. 从这个数组中，我将调用 a`Stored Procedure` *来计算这个用户参与的案例数*，`(arraystaff(i))`并循环它直到 arraystaff.length-1

但问题是计数不相符。

```
Sub getStaff(ByVal month As String)
    If Not con.State = ConnectionState.Closed Then
        con.Open()
    End If
    Dim s As String = "select distinct Attended_by from IT_Cases_List where month(Resolution_date) ='" & month & "' "
    s = s & "And Year(Resolution_date) ='" & ddyear.SelectedValue & "' and Attended_by is not null "
    cmd = New SqlCommand(s, con)
    da = New SqlDataAdapter
    ds = New DataSet
    da.SelectCommand = cmd
    da.Fill(ds)
    If ds.Tables(0).Rows.Count > 0 Then
        staffcount = ds.Tables(0).Rows.Count
        ReDim arrstaff(staffcount - 1)
        For Me.i = 0 To staffcount - 1
            arrstaff(i) = ds.Tables(0).Rows(i).Item("Attended_by")
        Next
            getCases()
     End If
End Sub

Sub getCases()
    If con.State = ConnectionState.Closed Then
        con.Open()
    End If

    ReDim arrdata(arrstaff.Length - 1, 0)
    For Me.i = 0 To arrstaff.Length - 1
        cmd = New SqlCommand("get_cases", con)
        cmd.CommandType = CommandType.StoredProcedure
        cmd.Parameters.Add("@ename", SqlDbType.VarChar).Value = arrstaff(i)
        cmd.Parameters.Add("@Yr", SqlDbType.VarChar).Value = ddyear.SelectedValue
        cmd.Parameters.Add("month", SqlDbType.VarChar).Value = m

        cmd.ExecuteNonQuery()
        da = New SqlDataAdapter()
        da.SelectCommand = cmd
        ds = New DataSet
        da.Fill(ds)

        If Not IsDBNull(ds.Tables(0).Rows(i).Item("NoCase")) Then
            arrdata(i, 0) = ds.Tables(0).Rows(i).Item("NoCase")
        End If
    Next

    cmd = New SqlCommand("delete from cases_Temp", con)
    cmd.ExecuteNonQuery()
    con.Close()
End Sub 
```

这是我的存储过程

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[get_cases](
@Ename  varchar(100),
@Yr varchar(50),
@month varchar(30))

 AS
BEGIN
declare @NoCase as int

select @NoCase=COUNT(*)
from IT_Cases_List
where Attended_by= @Ename and month(Resolution_date) =@month and 
Year(Resolution_date)=@Yr and Attended_by is not null 

insert into cases_temp(Ename,NoCase)
values(@Ename,@NoCase)

select * from cases_Temp

end 
```

我不知道我做错了什么。任何帮助都感激不尽。

**更新**

好的，我只打过一次电话，`getcases`但我仍然遇到同样的问题。

这是我运行程序时得到的：

![http://imgur.com/dkhmU](../Images/ad6930034701ea5ae74631f4e72a0a42.png)

如果我从数据库中得到 Count(*)，我应该得到的病例总数是 132，而我从程序中得到的病例总数是 157 (7+7+20+20+49+49+5)

如果我从 sql 运行查询，这就是我应该得到的 ![在此处输入图像描述](../Images/c4641dc8517b148bd021adb7ff95f44b.png)

我注意到计数被重复 (7,7,20,20,49,49,5) 而不是 (7,20,49,5,10,27,13)

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:13:54.020

您应该只调用`getCases()`一次，因为在它内部每个员工 ( *arraystaff* ) 都有一个循环。另一件事，您能否向我们提供有关该问题的更多信息？例如。样本记录，所需的输出，以便我们可以为您提供更多帮助:)

**更新 1**

`ds = New DataSet`在 For 循环之前移动，并将*传递*给.`Command Object``DataAdapter Object`

```
Sub getCases()
    If con.State = ConnectionState.Closed Then
        con.Open()
    End If

    ReDim arrdata(arrstaff.Length - 1, 0)

    ds = New DataSet
    For Me.i = 0 To arrstaff.Length - 1

        cmd = New SqlCommand("get_cases", con)
        cmd.CommandType = CommandType.StoredProcedure
        cmd.Parameters.Add("@ename", SqlDbType.VarChar).Value = arrstaff(i)
        cmd.Parameters.Add("@Yr", SqlDbType.VarChar).Value = ddyear.SelectedValue
        cmd.Parameters.Add("month", SqlDbType.VarChar).Value = m

        da = New SqlDataAdapter(cmd)
        da.Fill(ds)

        If Not IsDBNull(ds.Tables(0).Rows(i).Item("NoCase")) Then
            arrdata(i, 0) = ds.Tables(0).Rows(i).Item("NoCase")
        End If

    Next

    cmd = New SqlCommand("delete from cases_Temp", con)
    cmd.ExecuteNonQuery()
    con.Close()
End Sub 
```

# sql - Rails 中的高级 SQL

> ID：10679517
> 
> 赞同：7
> 
> 时间：2012-05-21T04:31:01.777
> 
> 标签：sql, ruby-on-rails, activerecord

我有 2 个模型

```
class User < AR
 has_many :friends
end

class Friend < AR
  # has a name column
end 
```

我需要找到所有与“乔”和“杰克”都是朋友的用户

知道如何在 Rails 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T08:23:31.353

一种选择是将每个名称作为单个 INNER JOINS 的参数。在 SQL 中，它会是这样的：

```
SELECT users.* FROM users
INNER JOIN friends AS f1 
    ON users.id = f1.user_id 
    AND f1.name = 'Joe'
INNER JOIN friends AS f2 
    ON users.id = f2.user_id 
    AND f2.name = 'Jack' 
```

由于它是 INNER JOINS，它只会显示用户表可以同时使用 f1 和 f2 连接的结果。

要在 Rails 中使用它，也许可以这样做：

```
class User < AR
  has_many :friends

  def self.who_knows(*friend_names)
    joins((1..friend_names.length).map{ |n| 
      "INNER JOIN friends AS f#{n} ON users.id = f#{n}.user_id AND f#{n}.name = ?" }.join(" "),
      *friend_names)
    })
  end
end 
```

然后你可以这样调用：

```
@users = User.who_knows("Joe", "Jack") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T08:18:54.710

可能`User.all(:joins => :friends, :conditions => ["friends.name IN (?,?)", "Joe", "Jack"], :group => "users.id")`的方式：然后遍历数组以找到有 2 个朋友的用户。

这是我尝试为自己解决类似问题时得到的最佳解决方案。如果你找到了使用纯 sql 或 ActiveRecord 的方法——请告诉我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T16:23:01.897

尽管按照 DanneManne 的建议使用硬编码 SQL 通常会起作用，并且可能是您想要的方式，但它不一定是可组合的。一旦你硬编码了一个表名，你可能会遇到将它组合到 ActiveRecord 可能决定为表别名的其他查询的问题。

因此，以一些额外的复杂性为代价，我们可以使用一些 ARel 来解决这个问题，如下所示：

```
f = Friend.arel_table
User.
  where(:id=>f.project(:user_id).where(f[:name].eq('Joe'))).
  where(:id=>f.project(:user_id).where(f[:name].eq('Jack'))) 
```

这将使用一对子查询来完成这项工作。

我相当肯定还有一个使用连接的 ARel 解决方案，但是我可以弄清楚如何在 ARel 中编写该查询，而不是如何使用该查询作为 ActiveRecord 查询的基础来获取用户模型实例。

# emacs - 无法在 Emacs 中复制文本并粘贴到另一个应用程序中

> ID：10679520
> 
> 赞同：6
> 
> 时间：2012-05-21T04:32:09.403
> 
> 标签：emacs, elisp

我正在运行 GNU Linux 和 GNU Emacs 23.4.2

当我在 Emacs 中复制文本（使用`M-w`，或在 CUA 模式下`C-c`）然后键入`C-v`其他应用程序以尝试粘贴复制的文本时，它不起作用——来自 Emacs 的文本没有被粘贴。

但是，当我改为使用 Emacs**菜单**（编辑->复制）复制文本时，这是可行的——我可以成功地将复制的文本粘贴到另一个应用程序中`C-v`。

我该如何解决这个问题，以便通过键绑定复制与通过菜单复制相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T07:22:21.270

阅读[手册](http://www.gnu.org/software/emacs/manual/html_node/emacs/index.html)，第[25.1.5 节使用剪贴板](http://www.gnu.org/software/emacs/manual/html_node/emacs/Clipboard.html)：

> 您可以自定义变量`x-select-enable-clipboard`以使 Emacs yank 函数在主选择之前咨询剪贴板，并使 kill 函数与主选择一样存储在剪贴板中。否则，这些命令根本不会访问剪贴板。

您可能还应该阅读第[25.1.3 节使用其他窗口应用程序进行剪切和粘贴](http://www.gnu.org/software/emacs/manual/html_node/emacs/Cut_002fPaste-Other-App.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T10:02:45.040

把它放在你的 .emacs 中`(setq x-select-enable-clipboard t)`

# c# - ASP.NET 中继器 - 在 HeaderTemplate 中显示数据绑定

> ID：10679521
> 
> 赞同：1
> 
> 时间：2012-05-21T04:32:15.787
> 
> 标签：c#, asp.net, repeater

我有一个中继器，我想在我的数据库中的 HeaderTemplate 中添加一个标题

到目前为止，这是我的代码

```
<asp:Repeater ID="topicView" runat="server">
    <HeaderTemplate>
        <tr>
            <td>
                <h1><%#DataBinder.Eval(Container.DataItem, "TopicName")%></h1>
            </td>
        </tr>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <%#DataBinder.Eval(Container.DataItem, "PostBody")%>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        <tr>
            <td>
            </td>
        </tr>
    </FooterTemplate>
</asp:Repeater> 
```

但是我的标题中没有显示任何内容。我听说你不能在标题中使用数据绑定器，所以有人可以推荐如何做到这一点吗？

这是我的 CS 代码

```
 string topic = Request.QueryString["topicid"].ToString();

    // Define the select statement.
    // All information is needed
    string selectSQL = "SELECT * FROM PostView WHERE TopicID ='" + topic + "'";

    // Define the ADO.NET Objects
    SqlConnection con = new SqlConnection(connectionString);
    SqlCommand cmd = new SqlCommand(selectSQL, con);
    con.Open();
    SqlDataReader postView = cmd.ExecuteReader();
    topicView.DataSource = postView;
    topicView.DataBind(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T04:40:33.057

您不需要绑定到数据源，只需绑定到页面的简单属性即可。在 HeaderTemplate 中使用它：

```
<h1><%# TopicName %></h1> 
```

然后将 TopicName 作为公共属性添加到代码隐藏中。

```
public string TopicName { get; set; } 
```

然后在运行查询时设置它：

```
TopicName = Request.QueryString["topicid"].ToString(); 
```

*边注*

不确定你是否知道，但你应该小心 SQL 注入。与其将查询字符串直接注入 SQL 查询，不如使用

```
string selectSQL = "SELECT * FROM PostView WHERE TopicID ='{0}'; 
```

然后将主题作为参数添加到您的 SqlCommand 中。

# matlab - 将值设置为二进制

> ID：10679522
> 
> 赞同：0
> 
> 时间：2012-05-21T04:32:32.867
> 
> 标签：matlab, binary

```
 for s=1:length(C_tem)
        for w=1:length(C_tem{s})
            if (abs(C_tem{s}{w}) >= 0)
               C_tem{s}{w} = 1;
            else
               C_tem{s}{w} = 0;
            end
          end
        end 
```

我试图将大于 0 的值设置为 1，如果小于或等于 0，但由于某种原因这不起作用。我是 matlab 新手，如果可能的话，我真的需要帮助。先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T04:38:05.643

我没有在matlab上工作太多，但是这部分代码感觉很可疑-

```
if (abs(C_tem{s}{w}) >= 0)
               C_tem{s}{w} = 1;
            else
               C_tem{s}{w} = 0;
            end 
```

你为什么在这里做腹肌？我认为它会从号码中删除符号。代码应该是这样的 -

```
if (C_tem{s}{w} > 0) //I have removed abs and >= is replaced with >
               C_tem{s}{w} = 1;
            else
               C_tem{s}{w} = 0;
            end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:37:24.993

`abs(x)>=0`对于 x 的所有值都为真。简单的答案是去除腹肌。更完整的答案跟进丹的评论。单元阵列在内部级别是不必要的。如果您有一个常规数组的元胞数组，那么您可以对整个代码块执行此操作。

```
for s=1:length(C_tem)
    C_tem{s} = (C_tem{s} >= 0);
end 
```

有两点需要注意：比较运算符是矢量化的，这意味着它们返回一个与输入大小相同的矩阵，从而一次比较所有值。并且，运算符的输出是 1 表示真，0 表示假。

还要查看内置函数`sign`，看看它是否更接近你想要做的。

# python - 带权重的 Numpy 数组求和

> ID：10679523
> 
> 赞同：13
> 
> 时间：2012-05-21T04:32:38.187
> 
> 标签：python, arrays, numpy

我有一个二维 numpy 数组。

每行是三个元素长，是一个整数 0-3。这表示一个 6 位整数，每个单元格按顺序表示两位。

我正在尝试将它们转换为完整的整数。

例如

```
for i in range(len(myarray)):
  myarray[i] = myarray[i][0] * 16 + myarray[i][1] * 4 + myarray[i][2] 
```

例如，我试图根据 [16,4,1] 的某个权重向量对每一行求和。

最优雅的方法是什么？我想我必须先做某种点积，然后是一个总和，但我不是 100% 有信心在哪里做点。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-21T05:23:22.643

点积倾斜是正确的，其中包括您需要的总和。因此，要获得目标数组的元素和一组权重的乘积之和：

```
>>> a = np.array([[0,1,2],[2,2,3]])
>>> a
array([[0, 1, 2],
       [2, 2, 3]])
>>> weights = np.array([16,4,2])
>>> np.dot(a,weights)
array([ 8, 46]) 
```

# c++ - 如何避免辅助函数被警告？“ xxx 已定义但未使用”

> ID：10679525
> 
> 赞同：3
> 
> 时间：2012-05-21T04:32:56.440
> 
> 标签：c++

我从这篇文章中学到了在命名空间中创建辅助函数。 [C++ 中的“助手”函数](https://stackoverflow.com/questions/80619/helper-functions-in-c)

```
//stringhelper.hpp
namespace utility{
static std::string intToString(int integer)
{
    std::stringstream sstream;
    sstream << integer;
    return sstream.str();
}
static void toLowerCase(std::string& y)
{
    std::transform(y.begin(), y.end(), y.begin(), (int(*)(int))tolower);
}
} 
```

我包含此标题，但收到以下警告

```
'void utility::toLowerCase(std::string&)' defined but not used 
```

是的。我使用了 intToString(int integer) 但没有使用 toLowerCase(std::string&)。我不想看到那些警告或为每个标题划分一个辅助函数。

任何人都可以提出一个好的解决方案吗？我应该禁用警告吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T04:37:48.220

您可以选择关闭该警告：

```
-Wno-unused-function 
```

在逐个功能的基础上，使用 GCC，您可以定义：

```
void whatever () __attribute__ ((unused));

void whatever () {
    stuff;
} 
```

这告诉 GCC 该函数可能未被使用。

**有关属性**的更多信息，请参阅[编译器文档](http://gcc.gnu.org/onlinedocs/gcc-3.4.1/gcc/Function-Attributes.html#Function%20Attributes)

# c++ - c++"没有匹配的函数调用

> ID：10679526
> 
> 赞同：1
> 
> 时间：2012-05-21T04:33:00.947
> 
> 标签：c++, arrays, pointers, parameter-passing

当尝试将数组作为参数传递时，我得到：

```
"No matching function to call to ' table::retrieve(const char[16], item&, int)' 
```

我正在尝试使用

```
program.reference.retrieve("Abecean Longfin", program.client_item, 1); 
```

功能是

```
int table::retrieve(char item_in[],item*item_list, int name_flag) 
```

我敢肯定这是我不明白的简单事情，但我是新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T04:38:53.027

你的调用失败的真正原因是你传递了一个`item&`你的函数需要一个`item*`. 您的代码*也*违反了字符串的 const 正确性，但在 C++03 中，它们有一个特殊规则，使之合法。

# ruby-on-rails - 在 ActiveAdmin 中创建搜索页面

> ID：10679530
> 
> 赞同：0
> 
> 时间：2012-05-21T04:33:36.863
> 
> 标签：ruby-on-rails, activeadmin, actioncontroller

我正在使用 ActiveAdmin 来部署我的项目。我在开发时遇到了一些问题。我有一些数据库表，例如：“Worker”、“Product”、“Task”。我想创建一个页面来搜索那些有很多情况的表。

我创建了一个简单的页面：

```
ActiveAdmin.register_page "my page" do
content do
    panel "Search details" do
        panel "By Name" do
            render :partial => "form"
        end
    end
end 
end 
```

这是`_form.html.erb`

```
<form action="" method="post">
<input type="text" value="" name="taskid">Task ID</input>
<input type="text" value="" name="productid">Product ID</input>
<input type="text" value="" name="workerid">Worker ID</input>
<input type="submit" value="Submit"/>
</form> 
```

但我不知道如何从表单中调用控制器？（定义了哪个控制器）以及如何将结果`content`从控制器呈现或显示到 Activeadmin 中的“my_page”区域？

任何人都可以帮助我吗？请！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:50:59.183

设计表单，使其使用现有的活动管理过滤器并相应地显示结果。您可能需要查看过滤器表单的 HTML（使用 firebug），以获取所需的参数和提交操作。这是我用来搜索我的用户模型的部分（由用户过滤器构建）：

```
<div class="panel_contents">
  <form method="get" id="q_search" class="filter_form" action="/admin/users" accept-charset="UTF-8">
    <div class="filter_form_field filter_string">
      <label for="q_email" class=" label">Search User Email</label><br/>
      <input type="text" name="q[email_contains]" id="q_email" />
      <input type="submit" value="Go" name="commit" id="q_submit" />
    </div>
  </form>
</div> 
```

并以现有格式显示结果。您无需为此设计新视图。

# c# - 我可以发送图像和 rar 文件，但这些文件使用 asp.net 已损坏？

> ID：10679532
> 
> 赞同：3
> 
> 时间：2012-05-21T04:33:58.420
> 
> 标签：c#, asp.net, email, email-attachments

我正在使用 asp.net 和 c#.net 发送带有大附件（最大 10mb）的邮件，这是我可以转换文件的原因，.txt、.doc、.xls 文件可以完美发送，但图像和 rar 文件损坏了什么是问题请给我任何建议， **我的代码是**

```
 DataSet ds = SqlHelper.ExecuteDataset(con, "usp_GetEmailSettings", Session["UserID"].ToString());
                message.To.Add(ds.Tables[0].Rows[0]["Email"].ToString());
                message.CC.Add(ds.Tables[1].Rows[0]["EmailID"].ToString());
                message.Subject = ds.Tables[0].Rows[0]["Email_Subject"].ToString();
                message.From = new System.Net.Mail.MailAddress(ds.Tables[1].Rows[0]["EmailID"].ToString());
                message.Body = ds.Tables[0].Rows[0]["Email_Body"].ToString() +
                                       "<br/><br/> <font size='2.0em'>Submission Number : " +filename+"<br/> DBA Name : " +txtDBAName.Text + "<br/> Insured Name : " +TxtInsured.Text + "<br/> Additional Comments : " + txtcomment.Value ;
                message.IsBodyHtml = true;
                string attachId;
                System.Net.Mail.Attachment at;
 // Get the HttpFileCollection and Attach the Multiple files
                HttpFileCollection hfc = Request.Files;
                if (hfc.Count > 0)
                {
                    for (int i = 0; i < hfc.Count; i++)
                    {
                        HttpPostedFile hpf = hfc[i];
                        if (hpf.ContentLength > 0)
                        {
                            if (i == 0)
                            {
                                string[] ext = System.IO.Path.GetFileName(hpf.FileName).Split('.');
                                attachId = filename + "." + ext[1];
                                at = new System.Net.Mail.Attachment(fluuploader.FileContent, attachId);
                            }

                            else
                            {
                                string[] ext = System.IO.Path.GetFileName(hpf.FileName).Split('.');
                                attachId = filename + "(" + i + ")" + "." + ext[1];
                                at = new System.Net.Mail.Attachment(fluuploader.FileContent, attachId);
                            }
                            at.TransferEncoding = System.Net.Mime.TransferEncoding.SevenBit;
                           // at.TransferEncoding = System.Net.Mime.TransferEncoding.QuotedPrintable;                       
                            message.Attachments.Add(at);
                        }

                    }
                }
 smtp.Timeout = 9999999;
                smtp.Send(message); 
```

web.config 我的代码是

```
<httpRuntime executionTimeout="240" maxRequestLength="20480"/> 
```

**at.TransferEncoding = System.Net.Mime.TransferEncoding.SevenBit;** 我可以在该行中发表评论，不发送大文件，但一切正常，但我发送的大文件最大为 10mb，请给我建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T21:33:22.367

除非幕后发生了一些黑魔法，否则我认为你需要换掉`fluuploader.FileContent`. `hpf.InputStream`此外，我发现将 In​​putStream 的 Position 设置为 0 会有所帮助。您在 for 循环中的最终代码应如下所示：

```
 HttpPostedFile hpf = hfc[i];

    if (hpf.ContentLength > 0)
    {
        hpf.InputStream.Position = 0;

        if (i == 0)
        {
            string[] ext = System.IO.Path.GetFileName(hpf.FileName).Split('.');
            attachId = filename + "." + ext[1];
            at = new System.Net.Mail.Attachment(hpf.InputStream, attachId);
        }

        else
        {
            string[] ext = System.IO.Path.GetFileName(hpf.FileName).Split('.');
            attachId = filename + "(" + i + ")" + "." + ext[1];
            at = new System.Net.Mail.Attachment(hpf.InputStream, attachId);
        }

        message.Attachments.Add(at);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:25:39.290

试试这个代码。这应该可以我附上近 25MB 的 zip 文件

```
public static void CreateMessageWithAttachment(string server)
    {
        // Specify the file to be attached and sent.
        // This example assumes that a file named Data.xls exists in the
        // current working directory.
        string file = "data.xls";
        // Create a message and set up the recipients.
        MailMessage message = new MailMessage(
           "jane@contoso.com",
           "ben@contoso.com",
           "Quarterly data report.",
           "See the attached spreadsheet.");

        // Create  the file attachment for this e-mail message.
        Attachment data = new Attachment(file, MediaTypeNames.Application.Octet);
        // Add time stamp information for the file.
        ContentDisposition disposition = data.ContentDisposition;
        disposition.CreationDate = System.IO.File.GetCreationTime(file);
        disposition.ModificationDate = System.IO.File.GetLastWriteTime(file);
        disposition.ReadDate = System.IO.File.GetLastAccessTime(file);
        // Add the file attachment to this e-mail message.
        message.Attachments.Add(data);

        //Send the message.
        SmtpClient client = new SmtpClient(server);
        // Add credentials if the SMTP server requires them.
        client.Credentials = CredentialCache.DefaultNetworkCredentials;

  try {
          client.Send(message);
        }
        catch (Exception ex) {
          Console.WriteLine("Exception caught in CreateMessageWithAttachment(): {0}", 
                ex.ToString() );              
        }
        // Display the values in the ContentDisposition for the attachment.
        ContentDisposition cd = data.ContentDisposition;
        Console.WriteLine("Content disposition");
        Console.WriteLine(cd.ToString());
        Console.WriteLine("File {0}", cd.FileName);
        Console.WriteLine("Size {0}", cd.Size);
        Console.WriteLine("Creation {0}", cd.CreationDate);
        Console.WriteLine("Modification {0}", cd.ModificationDate);
        Console.WriteLine("Read {0}", cd.ReadDate);
        Console.WriteLine("Inline {0}", cd.Inline);
        Console.WriteLine("Parameters: {0}", cd.Parameters.Count);
        foreach (DictionaryEntry d in cd.Parameters)
        {
            Console.WriteLine("{0} = {1}", d.Key, d.Value);
        }
        data.Dispose();
    } 
```

如果您收到错误请回帖

# iphone - iPhone UIAlertView UIActionSheet tableView

> ID：10679536
> 
> 赞同：1
> 
> 时间：2012-05-21T04:34:57.690
> 
> 标签：iphone, uitableview, uialertview, uiactionsheet

我有一个表格视图。当用户单击 tableView 的任何单元格时，我想同时显示 UIAlertView 和 UIActionSheet 。AlertView 应显示在 ActionSheet 上方。如果用户单击 AlertView 中的“取消”按钮，则 UIActionSheet 和 UIAlertView 应该同时消失。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:42:52.233

遵循这个：-

```
UIActionSheet *actionSheetTitleFontStyle = [[UIActionSheet alloc] initWithTitle:@"\n\n\n\n\n\n\n\n" delegate:self cancelButtonTitle:@"ok"     destructiveButtonTitle:nil otherButtonTitles:nil];
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"Hello" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[actionSheetTitleFontStyle addSubview:alert];
[alert show]; 
```

它可以帮助你。谢谢:)

# google-maps - 与 Google Fusion Table 一起使用时，JQuery 滑块不会移动

> ID：10679542
> 
> 赞同：1
> 
> 时间：2012-05-21T04:35:39.697
> 
> 标签：google-maps, layer, google-fusion-tables, jquery-slider

我对 JQuery Slider 和 Google Fusion Table 有一点问题。这是一个谷歌地图应用程序。我在 Fusion Table 中存储了几个位置，它们将在地图初始化期间显示在地图上。当然，这不是很有趣，所以我想添加一个 JQuery Slider，以便通过设置事件回调函数，当用户与滑块交互时，地图上出现的位置可以动态变化。但是，即使使用以下代码，滑块也不会移动，这应该非常简单。

我所做的只是初始化地图和滑块。在slider的回调函数中有两行，第一行在网页上显示slider的当前值，范围为0到100；第二行再次查询融合表以反映更新的数据（这里我只是将查询简化为它只是选择所有条目并将它们发送回，因此即使与滑块交互，地图上显示的数据也不会改变）。

在 Chrome 中，我得到的是地图初始化成功，显示了所有数据点。但是，当我尝试移动滑块时，它只是停留在那里，但滑块的值（第 1 行显示的内容）确实发生了变化。但是，如果我注释掉第 2 行，一切都很好，滑块可以自由移动，虽然不发送任何查询...

有没有人有同时使用 Maps、fusion table 和 JQuery 滑块的经验？任何建议表示赞赏。

下面是代码：

```
 // initialize map
  function initialize() {
      var place = new google.maps.LatLng(30, -120);

      map = new google.maps.Map(document.getElementById('map_canvas'), {
        center: place,
        zoom: 4,
        mapTypeId: 'terrain'
      });

      var layer = new google.maps.FusionTablesLayer('132848');
      layer.setMap(map);
  }

  // define the JQuery Slider
  $(function(){
    $('#slider').slider({
        max: 100,
        min: 0,
        step: 1,
        value: 0,
        slide: function(event, ui) {
            document.getElementById("slider-value").innerHTML = ui.value + " mi";// line 1
            layer.setQuery('select Location from 132848');// line 2
        }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:18:15.390

正如 Eric 已经指出的，`layer`必须在全局范围内，以便滑块能够访问它。我稍微更改了您的代码，因为我认为使用语法时更容易理解和阅读`layer.setOptions()`，但这只是个人喜好问题。我使用了该`distance`字段的滑块过滤器，将其更改为您喜欢的任何内容:-)

这是我改编代码的演示：http: [//jsfiddle.net/odi86/kb4TV/](http://jsfiddle.net/odi86/kb4TV/)

```
var layer;
var tableId = '132848';
var map;

// initialize map
function initialize() {
    var place = new google.maps.LatLng(30, -120);
    map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: place,
        zoom: 4,
        mapTypeId: 'terrain'
    });

    layer = new google.maps.FusionTablesLayer({
        query: {
            select: "Location",
            from: tableId
        },
        map: map
    });
}

// define the JQuery Slider
$(function() {
    $('#slider').slider({
        max: 100,
        min: 0,
        step: 1,
        value: 0,
        slide: function(event, ui) {
            document.getElementById("slider-value").innerHTML = ui.value + " mi";
            layer.setOptions({
                query: {
                    select: "Location",
                    from: tableId,
                    where: "distance <= " +  ui.value
                }
            });
        }
    });
});​ 
```

# delphi - 将 Utf8 转换为 Unicode

> ID：10679543
> 
> 赞同：2
> 
> 时间：2012-05-21T04:36:36.670
> 
> 标签：delphi, delphi-2009

我有一个文本文件。我应该将其转换为 Utf8。转换后，文件中的所有数字都转换为问号。例如 1380 转换为 4 个问号，如下所示：'????'。我正在使用delphi 2009。

这是我的转换代码：

```
RichEdit1.Lines.LoadFromFile(OpenDialog1.FileName,TEncoding.UTF8); 
```

我该如何纠正这种转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:31:49.857

`TEncoding.Unicode`如果您的文件是 UTF-16LE（“Unicode”）格式，您应该使用。或者您应该在将文件加载到 RichEdit 之前将其转换为 UTF-8。

# java - 如何将 url 中传递的值传递给模型和视图控制器？

> ID：10679544
> 
> 赞同：0
> 
> 时间：2012-05-21T04:36:36.957
> 
> 标签：java, model-view-controller, jsp, spring-mvc, jstl

我需要使用 jstl 标签获取在我的 jsp 中传递的 url 值，以获取模型和视图控制器中的方法。

在我的 jsp iam 中，单击购买时有一个选项购买，它被映射到我需要所有传递值的方法

我在jsp上传递这样的值

```
<a href="/licensing/purchaseMoreSeat.sp?${Constants.PART_NUMBER}=${suites.partNumber}&${Constants.ENTITLEMENT_ID_PARAM}=${suites.entitlementId}&${Constants.LICENSE_TYPE}=${suites.licenseType}&${Constants.QUANTITY}=1&&attribName=${Constants.EXISTING_ENT_ID}"/> 
```

在单击购买选项时，我需要获取方法内 url 中传递的所有值（使用弹簧技术）

```
public purchaseMoreSeat()
{
} 
```

请帮我解决这个问题。我对java和spring都是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:39:26.640

我建议您在控制器中使用**@RequestMapping**注释来映射您的 url。然后，您将很容易在控制器中获取 url 参数值。请参考以下示例。

```
@RequestMapping("/GetStateCombo")
    public void getStateCombo(@RequestParam String cmbCountryId, ModelMap map, HttpServletRequest request, HttpServletResponse response) 
```

在上面的示例中，您可以看到函数中的第一个参数`@RequestParam String cmbCountryId`。它将匹配 url 中具有相同名称的参数并将其值绑定到该参数。之后，您只需要在函数中访问它。

希望这对您有所帮助。

干杯。

# html - CSS“背景图像”未正确调整大小

> ID：10679551
> 
> 赞同：0
> 
> 时间：2012-05-21T04:37:24.610
> 
> 标签：html, css, navigation

我正在制作导航栏。我早些时候来到这里并得到了一些帮助来重新组织和编码所说的项目。一切看起来都很好，看起来应该可以工作，但是当使用以下代码而不是调整每个图像大小时，它只显示图像高度的 X% 和图像宽度的 Y%。我无法弄清楚出了什么问题。

CSS：

```
#navbar a.newr:link { background-image: url('newr.png'); display: block; width: 5%; height: 2%; }

#navbar a.newr:hover { background-image: url('newrhover.png'); display: block; width: 5%; height: 2%; } 
```

请参阅[它在我的网站上的外观](http://www.step-down.co.uk)以了解我的意思。另请参阅[我的其他导航栏问题。](https://stackoverflow.com/questions/10677702/resizable-nav-bar)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:41:23.523

背景图像不会调整大小。它们以全尺寸显示，如果容器较小，它们会被剪裁。

你可以做什么：

*   最好的方法是将图像大小调整为目标大小
*   一种骇人听闻的方法是使用绝对定位的`<img>`标签作为背景，使用`<span>`文本作为前景。

    ```
    <div class="hasBg">
        <img>
        <span>text</span>
    <div>

    .hasBg{
        position:relative;
    }
    //will autofit depending on how span stretches the container
    .hasBg img{
        position:absolute;
        top: 0;
        bottom: 0;
        left: 0;
    }

    .hasBg span{
        position:absolute;
    } 
    ```

*   一个原生但新的特性是使用新的 CSS3 [`background-size`](http://www.css3.info/preview/background-size/)。但这不是跨浏览器 afaik

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:43:53.473

由于您已将其作为背景图像，因此宽度和高度属性仅适用于 div，而不适用于图像。

你有两个选择。

*   调整图像大小以适合尺寸
*   将您的图像放在页面上并使用 javascript 实现悬停效果

# iphone - Storyboard & Segue - 传递数据我做得好吗？

> ID：10679559
> 
> 赞同：2
> 
> 时间：2012-05-21T04:38:21.207
> 
> 标签：iphone, ios, uitableview, storyboard, segue

我正在使用故事板和转场。我想从“联系人列表”（tableView）切换到“个人资料视图”（ScrollView）。

**三个问题**：

*   这是做到这一点的最佳方式（更干净、更漂亮）吗？**＆ 为什么 ？**
*   当我这样做时： ProfileViewController *aProfileView = (ProfileViewController *)[segue destinationViewController]; 这是实例化一个新视图吗？（就像它会创建 2 个配置文件视图）。
*   我需要清理（删除某处的“个人资料视图”吗？）还是单独使用导航控制器进行清理？

// 代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showProfileSelected"]) 
    {
        // Get the Selected raw
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        Profile *selectedProfile = [self.profilesTable objectAtIndex:indexPath.row];

        // Using segue --> Send the current selected profile to "ProfileView"
        ProfileViewController *aProfileView = (ProfileViewController *)[segue destinationViewController];
        aProfileView.currentProfile = selectedProfile;
    }
} 
```

// 其他方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showProfileSelected"]) 
    {
        // Get the Selected raw
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        Profile *selectedProfile = [self.profilesTable objectAtIndex:indexPath.row];

        // Using segue --> Send the current selected profile to "ProfileView"
        [segue.destinationViewController setCurrentProfile:selectedProfile];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:12:24.083

你的第一个例子很好。您没有创建任何东西，只是获取对目标控制器的引用。设置这样的变量允许您在目标视图控制器上设置多个属性，而无需一遍又一遍地进行转换。

因此，要回答您的具体问题：

*   是的，这是最好的方法。由于目标视图控制器的通用类，很难让 prepareForSegue “漂亮”
*   不，你没有创造任何东西。
*   不，你没有什么要清理的。

# plsql - 插入更新触发器 PL/SQL 后

> ID：10679561
> 
> 赞同：2
> 
> 时间：2012-05-21T04:38:34.750
> 
> 标签：plsql, triggers, oracle11g

我有一个表 as`Student`并且有一个`varchar`类型列 as `status`。我需要在此表上为此`status`列`after insert or update`过程设置值。我试图为此写一个`Trigger`。但我不能用作`:new.status`。它给了`Error: ORA-04084: cannot change NEW values for this trigger type`。我怎么能这样做？

**我的代码**

```
create or replace
TRIGGER STUDENT_AIU_TRI 
AFTER INSERT OR UPDATE ON STUDENT
FOR EACH ROW 
DECLARE

v_status VARCHAR2(2);

BEGIN

  v_status := '1';

  select v_status into :NEW.status from dual;
END; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T05:13:20.973

如果要更改列中的值，则需要使用`BEFORE INSER OR UPDATET`触发器，而不是`AFTER INSERT OR UPDATE`触发器。为什么你认为你需要使用`AFTER INSERT OR UPDATE`触发器？

您也不需要局部变量或 to `SELECT`from dual

```
CREATE OR REPLACE TRIGGER trigger_name
  BEFORE INSERT OR UPDATE ON student
  FOR EACH ROW
BEGIN
  :new.status := '1';
END; 
```

# expression - 将algerberic表达式转换为函数？

> ID：10679562
> 
> 赞同：0
> 
> 时间：2012-05-21T04:38:39.360
> 
> 标签：expression, algebra, javascript

我一直在尝试创建一个表达式来计算砖和玻璃的价格。

```
I'm working with a, b and c 

so the price is $30m^2  for bricks and $20m^2 for glass 
```

A 和 B 是墙壁 C 是圆窗半径

```
A = 3m (not m^2) 
B = 2m (not m^2)
C = 1m (not m^2) 
```

我相信我的表达式**(a*b)*30 – (c^2*20)**有效，但我怎样才能把它变成一个 java 脚本函数，将来我可以在计算器中使用它来计算价格等......

有点java脚本的新手。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:45:17.890

假设我已经理解了这个问题，我相信以下功能`cost(a,b,c)`应该可以满足您的需求：

```
function cost(a,b,c) { 
    return (a * b * 30) - (Math.PI * Math.pow(c,2) * 20) 
} 
```

这将返回给定`117.16814692820414`参数`a = 3`和。`b = 2``a = 1`

`cost`正在使用的函数的一个示例是：

```
var price = cost(3,2,1); 
```

# android - 从活动中调用相机，捕获图像并上传到服务器

> ID：10679571
> 
> 赞同：9
> 
> 时间：2012-05-21T04:40:44.227
> 
> 标签：android, image, android-camera

在我的应用程序中，我有一个调用相机的按钮 1，捕获图像后，必须将其保存到设备库中。当我点击 button2 时，它必须打开图库，并要求选择一张图片。选中后，它必须显示在这些按钮下方的 imageView 上。

这是我的代码：

```
package com.android.imageuploading;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class ImageUploadingActivity extends Activity {
    private static final int REQUEST_CODE = 1;
    private Bitmap bitmap;
    private ImageView imageView;
    private Button button_1;
    public int TAKE_PICTURE = 1;
    private Button button_2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageView = (ImageView) findViewById(R.id.image);
        button_1 = (Button) findViewById(R.id.button1);
        button_1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                startActivityForResult(intent, TAKE_PICTURE);

            }
        });
        button_2 = (Button) findViewById(R.id.button2);
        button_2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                pickImage(getCurrentFocus());
            }
        });
    }

    public void pickImage(View view) {
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        startActivityForResult(intent, REQUEST_CODE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
            try {
                // We need to recyle unused bitmaps
                if (bitmap != null) {
                    bitmap.recycle();
                }
                InputStream stream = getContentResolver().openInputStream(
                        data.getData());
                bitmap = BitmapFactory.decodeStream(stream);
                stream.close();
                imageView.setImageBitmap(bitmap);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        super.onActivityResult(requestCode, resultCode, data);
    }

    public static boolean isIntentAvailable(Context context, String action) {
        final PackageManager packageManager = context.getPackageManager();
        final Intent intent = new Intent(action);
        List<ResolveInfo> list = packageManager.queryIntentActivities(intent,
                PackageManager.MATCH_DEFAULT_ONLY);
        return list.size() > 0;
    }
} 
```

问题是，当我捕获图像时，它会要求保存或丢弃。当我点击保存时，我的应用程序崩溃了，说：

> java.lang.RuntimeException：将结果 ResultInfo{who=null, request=1, result=-1, data=Intent { act=inline-data (has extras) }} 传递给活动 {com.android.imageuploading/com. android.imageuploading.ImageUploadingActivity}：java.lang.NullPointerException

我需要在哪里更改代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T04:50:32.943

在我的情况下，我使用这个：当我点击保存按钮时，图片是保存并在 filePath 变量中返回我的路径。

```
String filePath =
        Environment.getExternalStorageDirectory() +"/your_image_name.jpeg";
File file = new File(filePath);
Uri output = Uri.fromFile(file);
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, output); 
```

在 onactivityresul() 我使用这个 "filePath" 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T05:05:01.090

**捕获图像：**

```
 public class Camera extends Activity 
  {
 private static final int CAMERA_REQUEST = 1888;
 private String selectedImagePath;
 WebView webview;
 String fileName = "capturedImage.jpg";
 private static Uri mCapturedImageURI; 

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_REQUEST) 
        { 
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
            Random randomGenerator = new Random();randomGenerator.nextInt();
            String newimagename=randomGenerator.toString()+".jpg";
            File f = new File(Environment.getExternalStorageDirectory()
                                    + File.separator + newimagename);
            try {
                f.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //write the bytes in file

            try {
                fo = new FileOutputStream(f.getAbsoluteFile());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo.write(bytes.toByteArray());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                uri=f.getAbsolutePath(); 
    //this is the url that where you are saved the image
      }

  } 
```

**选择图像：**

```
 public class ChoosePicture extends Activity 
   {
      private static final int SELECT_PICTURE = 1;
      private String  selectedImagePath;

      @Override
      public void onCreate(Bundle savedInstanceState)
      {
          super.onCreate(savedInstanceState);
          webview=(WebView)findViewById(R.id.webView1);
          Intent intent = new Intent();
          intent.setType("image/*");
          intent.setAction(Intent.ACTION_GET_CONTENT);
          intent.addCategory(Intent.CATEGORY_OPENABLE);
          startActivityForResult(intent, SELECT_PICTURE);
      }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE)
            {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                try {
                    FileInputStream fileis=new FileInputStream(selectedImagePath);
                    BufferedInputStream bufferedstream=new BufferedInputStream(fileis);
                    byte[] bMapArray= new byte[bufferedstream.available()];
                    bufferedstream.read(bMapArray);
                    Bitmap bMap = BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);
  //this is the image that you are choosen

                    if (fileis != null) 
                    {
                        fileis.close();
                    }
                    if (bufferedstream != null) 
                    {
                        bufferedstream.close();
                    }
                } catch (FileNotFoundException e) {                 
                    e.printStackTrace();
                } catch (IOException e) {                   
                    e.printStackTrace();
                }               
            }
        }
    }

public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

# c# - 传输会话变量

> ID：10679572
> 
> 赞同：0
> 
> 时间：2012-05-21T04:41:09.200
> 
> 标签：c#, asp.net, vbscript, session-state, session-variables

我正在尝试将一个 vbscript 会话变量传递给我的 c# 页面。经过研究，我发现了这个页面：

[将会话变量从经典 ASP 传输到 ASP.NET](http://www.eggheadcafe.com/articles/20021207.asp)

我不知道如何改变我的

```
Int32 intresortID = Convert.ToInt32(Request.QueryString["TypeID"]); 
```

以与上面链接中提供的代码相同的方式读取会话变量（粘贴在下面：）

```
 <TITLE>ASPNETPage1.aspx</TITLE>
<%@ Page language="c#" %>
<script runat=server>
// We iterate through the Form collection and assign the names and values
// to ASP.NET session variables! We have another Session Variable, "DestPage"
// that tells us where to go after taking care of our business...
private void Page_Load(object sender, System.EventArgs e)
{
for(int i=0;i<Request.Form.Count;i++)
{
Session[Request.Form.GetKey(i)]=Request.Form[i].ToString();
}
Server.Transfer(Session["DestPage"].ToString(),true);
}
</script> 
```

==================================================== ==============================

```
<TITLE>FinalPage.aspx</TITLE>
<%@ Page language="c#" %>
<script runat=server>
// This page is just a "proof of concept page"...

private void Page_Load(object sender, System.EventArgs e)
{ 
Response.Write("Shared Session Variable Names/Values between Classic ASP and ASP.NET:<BR>");
for (int i = 0; i < Session.Contents.Count; i++) 
{ 
Response.Write("Assigned to \"" +Session.Keys[i].ToString()+"\"");  
Response.Write(" Value: "+ Session[i].ToString() +"<BR>");
} 
}
</script> 
```

更新：在 C# 页面上调用会话变量的代码：

```
 private void FillGrid()
        {
            string connStr = ConfigurationManager.ConnectionStrings["bdsConnectionString"].ConnectionString;
            using (SqlConnection Con = new SqlConnection(connStr))
            {
                Con.Open();
                Int32 intresortID = Convert.ToInt32(Request.Form["TypeID"]);
                Label4.Text = Convert.ToString(intresortID);
                Label4.Visible = true;
                DateTime startdate;
                startdate = Convert.ToDateTime(TextBox1.Text);

                Int32 ed = Convert.ToInt32(TextBox2.Text);
                DateTime enddate;
                enddate = startdate.AddDays(ed);

                string str = "SELECT TOP (100) PERCENT tblAvail.dtm as Dtm, tblResortsRooms.strRoomType as strRoomType, tblResortsRooms.strDescription as strDescription, tblAvail.intQty as intQty, tblAvail.curPrice as curPrice, tblResortsRooms.intWSCode  as intWSCode FROM tblAvail INNER JOIN tblResortsRooms ON tblAvail.intResortID = tblResortsRooms.intResortID AND tblAvail.strRoomType = tblResortsRooms.strRoomType WHERE (tblResortsRooms.curRecRate > 0) AND (tblAvail.intResortID = @intResortID) and (tblAvail.dtm between @startdate and @enddate) ORDER BY tblResortsRooms.strRoomType";
                SqlDataAdapter sdr = new SqlDataAdapter(str, Con);
                sdr.SelectCommand.Parameters.AddWithValue("@intResortID", intresortID);
                sdr.SelectCommand.Parameters.AddWithValue("@startdate", startdate);
                sdr.SelectCommand.Parameters.AddWithValue("@enddate", enddate);
                DataTable dt = new DataTable();
                sdr.Fill(dt);
                if (dt.Rows.Count > 0)
                {
                    GridView1.DataSource = dt;
                    GridView1.DataBind();
                    Button2.Visible = true;
                }

            }

        } 
```

有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:18:42.033

底线是经典 ASP 中的会话变量对 ASP.Net 不可用（无论使用何种语言）。您将需要通过一个查询字符串或表单将这个值提供给 ASP.Net 页面，该查询字符串或表单会被发回 ASP.Net 页面。因此，建议的解决方案是通过查询字符串将值（显然位于经典 ASP 页面中的会话变量中）传递给 ASP.Net 页面。然后在 ASP.Net 页面上检索查询字符串值并使用它做任何你想做的事情。

我希望我没有错过重点。但底线是经典 ASP 和 ASP.Net 中的会话变量之间没有交互，因为它们使用完全不同的框架和引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:17:56.777

我建议遵循 Microsoft 路径[http://msdn.microsoft.com/en-us/library/aa479313.aspx](http://msdn.microsoft.com/en-us/library/aa479313.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T12:38:34.893

首先，在“ASPNETPage1.aspx”中，您将整个`Form`集合复制到`Session`变量中 - 这是绝对没有必要的，因为您已经通过[http://msdn.microsoft.com/en-us/library/caxa892w](http://msdn.microsoft.com/en-us/library/caxa892w.aspx)`Server.Transfer`保存了它。[aspx](http://msdn.microsoft.com/en-us/library/caxa892w.aspx)

其次，在“FinalPage.aspx”中，您可以直接通过属性`Session`访问同一集合，而不是遍历整个状态：http: [//msdn.microsoft.com/en-us/library/system.web.ui。 page.previouspage.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.previouspage.aspx)`Form``Page.PreviousPage`

**更新：**哇，我的错，我真的以为你在谈论`Visual Basic`（正如你的问题标题、文章链接和示例代码都会建议的那样）而不是`VBScript`- 这是一种**客户端**语言，所以你需要一个等价于`JavaScript PageMethod`或一个`WebService`（从不used `VBScript`，所以不知道它是否支持那些东西）访问**服务器**`Session`上的状态

 **我对您的代码示例的更正仍然有效，当然

**更新2：** `PageMethod` or a`WebService`由服务器上的**服务器**语言（`Visual Basic`or `C#`）实现， and `VBScript`or `JavaScript`（两种**客户端**语言）仅用于从客户端访问它-您需要学习区分服务器语言和客户端语言...

那么，最后一次，您使用的是`Visual Basic`or`VBScript`吗？如果您希望其他人提供任何有意义的帮助，请发布您的原始代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T07:37:17.887

没有 C# 经验，但基于我的经典 ASP 经验 id 应该是

```
Int32 intresortID = Convert.ToInt32(Request.Form[i]); 
```

或者如果您知道键的名称，在这种情况下为 TypeID，则不需要 For 循环

```
Int32 intresortID = Convert.ToInt32(Request.Form("TypeID")); 
```

如果这不起作用，请尝试拆分并记录

```
for(int i=0;i<Request.Form.Count;i++)
{
  loggingRoutine(Request.Form.GetKey(i) + "=" + Request.Form[i].ToString());
} 
```

（正如我所说，我不是 C# 人，只是为了让你有个想法）

会话变量仅用于记住页面刷新之间和其他页面之间的值，如果您直接在第一个 .ASPX 中读取表单，则不需要它们。**

# iphone - 如何在 xcode 中检查配置文件是否已安装

> ID：10679576
> 
> 赞同：1
> 
> 时间：2012-05-21T04:41:54.423
> 
> 标签：iphone, xcode

我的配置文件在 xcode 3.2.6 上运行良好并显示已安装，当我在设备上测试应用程序时它运行良好我在 macbook 上也有 xcode 4 如何查看配置文件是否也安装在它上面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:44:54.703

在 Xcode 中转到 Window > Organizer > Devices ，然后查看已安装的配置文件列表。

[http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/ProvisioningYourApplication/ProvisioningYourApplication.html](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/ProvisioningYourApplication/ProvisioningYourApplication.html)

# java - Netbeans 7.1.2 无法确定 WADL 或 WSDL

> ID：10679577
> 
> 赞同：0
> 
> 时间：2012-05-21T04:42:01.260
> 
> 标签：java, rest, jakarta-ee, netbeans, wadl

我正在为 java 桌面创建一个应用程序。这个应用程序访问我们运行 RESTful 和基于 SOAP 的网络服务的网络服务器。

在 netbeans 7.1.2的*服务选项卡*中添加新服务客户端时遇到问题。添加新的 RESTful 网络服务时，netbeans 总是说：

**“无法确定 wadl 或 wsdl”**

我所做的是放置宁静的网址：

```
http://localhost:8080/Walcoo/resources/application.wadl 
```

进入 URL 文本字段。

如何解决这个错误？我用谷歌搜索了它，但它表明在 netbeans 6.9 中它是一个错误。但是在 netbeans 7.1.2 中呢？

谢谢

# javascript - JSON对象内的Javascript搜索

> ID：10679580
> 
> 赞同：49
> 
> 时间：2012-05-21T04:42:39.230
> 
> 标签：javascript, jquery, jsonp, json

我的应用程序中有一个 JSON 字符串/对象。

```
{"list": [
    {"name":"my Name","id":12,"type":"car owner"},
    {"name":"my Name2","id":13,"type":"car owner2"},
    {"name":"my Name4","id":14,"type":"car owner3"},
    {"name":"my Name4","id":15,"type":"car owner5"}
]} 
```

我的应用程序中有一个过滤器框，当我在该框中输入名称时，我们必须过滤对象并显示结果。

例如，如果用户键入“姓名”并点击搜索，那么我们必须在 JSON 对象中搜索全名并返回数组，就像 MySQL 搜索一样...

我的问题是用字符串过滤json对象并返回数组......

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-21T04:49:32.857

您可以遍历数组并找到匹配项：

```
var results = [];
var searchField = "name";
var searchVal = "my Name";
for (var i=0 ; i < obj.list.length ; i++)
{
    if (obj.list[i][searchField] == searchVal) {
        results.push(obj.list[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-05-21T04:48:47.867

如果您的问题是，是否有一些内置的东西可以为您进行搜索，那么不，没有。[`String#indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)您基本上使用正则表达式或[正则表达式](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)遍历数组来测试字符串。

对于循环，您至少有三个选择：

1.  一个无聊的老`for`循环。

2.  在启用 ES5 的环境（或使用 shim）上，[`Array#filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter).

3.  因为您使用的是 jQuery [`jQuery.map`](http://api.jquery.com/jQuery.map/)，.

无聊的旧`for`循环示例：

```
function search(source, name) {
    var results = [];
    var index;
    var entry;

    name = name.toUpperCase();
    for (index = 0; index < source.length; ++index) {
        entry = source[index];
        if (entry && entry.name && entry.name.toUpperCase().indexOf(name) !== -1) {
            results.push(entry);
        }
    }

    return results;
} 
```

您将在哪里调用它`obj.list`as`source`和所需的名称片段 as `name`。

或者，如果有任何可能存在空白条目或没有名称的条目，请将其更改`if`为：

```
 if (entry && entry.name && entry.name.toUpperCase().indexOf(name) !== -1) { 
```

`Array#filter`例子：

```
function search(source, name) {
    var results;

    name = name.toUpperCase();
    results = source.filter(function(entry) {
        return entry.name.toUpperCase().indexOf(name) !== -1;
    });
    return results;
} 
```

同样，如果有任何可能有空白条目（例如，`undefined`与缺失相反；`filter`将跳过*缺失*的条目），将内部返回更改为：

```
 return entry && entry.name && entry.name.toUpperCase().indexOf(name) !== -1; 
```

`jQuery.map`示例（这里我假设`jQuery`=`$`通常是这种情况；如果您正在使用，请更改`$`为）：`jQuery``noConflict`

```
function search(source, name) {
    var results;

    name = name.toUpperCase();
    results = $.map(source, function(entry) {
        var match = entry.name.toUpperCase().indexOf(name) !== -1;
        return match ? entry : null;
    });
    return results;
} 
```

（再一次，`entry && entry.name &&`如有必要，请在此处添加。）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-02-05T04:15:15.707

您可以简单地将数据保存在变量中，然后使用 JavaScript 的 find（获取单个记录对象）或 filter（获取单个记录数组）方法。

例如 ：-

```
let data = {
 "list": [
   {"name":"my Name","id":12,"type":"car owner"},
   {"name":"my Name2","id":13,"type":"car owner2"},
   {"name":"my Name4","id":14,"type":"car owner3"},
   {"name":"my Name4","id":15,"type":"car owner5"}
]} 
```

现在使用以下命令 onkeyup 或输入

获取**单个对象**

```
data.list.find( record => record.name === "my Name") 
```

获取**单个数组对象**

```
data.list.filter( record => record.name === "my Name") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T05:12:56.810

使用[PaulGuo](https://github.com/PaulGuo)的[jSQL](https://github.com/PaulGuo/jSQL)，一个使用 javascript 的类似 SQL 的数据库。例如：

```
var db = new jSQL();
db.create('dbname', testListData).use('dbname');
var data = db.select('*').where(function(o) {
    return o.name == 'Jacking';
}).listAll(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-27T19:36:52.007

我调整了正则表达式以使用 JSON。

首先，对 JSON 对象进行字符串化。然后，您需要存储匹配子字符串的开始和长度。例如：

```
"matched".search("ch") // yields 3 
```

对于 JSON 字符串，它的工作原理完全相同（除非您明确搜索逗号和大括号，在这种情况下，我建议您在执行正则表达式之前先对 JSON 对象进行一些转换（例如：、{、}）。

接下来，您需要重构 JSON 对象。我编写的算法通过从匹配索引递归地向后检测 JSON 语法来做到这一点。例如，伪代码可能如下所示：

```
find the next key preceding the match index, call this theKey
then find the number of all occurrences of this key preceding theKey, call this theNumber
using the number of occurrences of all keys with same name as theKey up to position of theKey, traverse the object until keys named theKey has been discovered theNumber times
return this object called parentChain 
```

有了这些信息，就可以使用正则表达式来过滤 JSON 对象以返回键、值和父对象链。

[您可以在http://json.spiritway.co/](http://json.spiritway.co/)看到我编写的库和代码

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-07T15:34:17.337

如果您在应用程序中的多个位置执行此操作，则使用客户端 JSON 数据库是有意义的，因为创建由 array.filter() 调用的自定义搜索函数比其他方法更麻烦且不易维护。

查看 ForerunnerDB，它为您提供了一个非常强大的客户端 JSON 数据库系统，并包括一个非常简单的查询语言来帮助您完成您正在寻找的事情：

```
// Create a new instance of ForerunnerDB and then ask for a database
var fdb = new ForerunnerDB(),
    db = fdb.db('myTestDatabase'),
    coll;

// Create our new collection (like a MySQL table) and change the default
// primary key from "_id" to "id"
coll = db.collection('myCollection', {primaryKey: 'id'});

// Insert our records into the collection
coll.insert([
    {"name":"my Name","id":12,"type":"car owner"},
    {"name":"my Name2","id":13,"type":"car owner2"},
    {"name":"my Name4","id":14,"type":"car owner3"},
    {"name":"my Name4","id":15,"type":"car owner5"}
]);

// Search the collection for the string "my nam" as a case insensitive
// regular expression - this search will match all records because every
// name field has the text "my Nam" in it
var searchResultArray = coll.find({
    name: /my nam/i
});

console.log(searchResultArray);

/* Outputs
[
    {"name":"my Name","id":12,"type":"car owner"},
    {"name":"my Name2","id":13,"type":"car owner2"},
    {"name":"my Name4","id":14,"type":"car owner3"},
    {"name":"my Name4","id":15,"type":"car owner5"}
]
*/ 
```

免责声明：我是 ForerunnerDB 的开发者。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-18T05:58:48.877

这是使用[object-scan](https://github.com/blackflux/object-scan)的迭代解决方案。好处是你可以很容易地在过滤器函数中做其他处理，并以更易读的格式指定路径。但是，引入依赖项需要权衡取舍，因此它实际上取决于您的用例。

```
// const objectScan = require('object-scan');

const search = (haystack, k, v) => objectScan([`list[*].${k}`], {
  rtn: 'parent',
  filterFn: ({ value }) => value === v
})(haystack);

const obj = { list: [ { name: 'my Name', id: 12, type: 'car owner' }, { name: 'my Name2', id: 13, type: 'car owner2' }, { name: 'my Name4', id: 14, type: 'car owner3' }, { name: 'my Name4', id: 15, type: 'car owner5' } ] };

console.log(search(obj, 'name', 'my Name'));
// => [ { name: 'my Name', id: 12, type: 'car owner' } ]
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@13.8.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-10-19T09:20:15.150

你可以试试这个：

```
function search(data,search) {
    var obj = [], index=0;
    for(var i=0; i<data.length; i++) {
      for(key in data[i]){
         if(data[i][key].toString().toLowerCase().indexOf(search.toLowerCase())!=-1) {
                obj[index] = data[i];
                index++;
                break;
         }
     }
     return obj;
}
console.log(search(obj.list,'my Name')); 
```

# android - Android访问远程SQL数据库

> ID：10679588
> 
> 赞同：7
> 
> 时间：2012-05-21T04:43:46.580
> 
> 标签：android, sql-server

我可以直接从安卓程序访问远程 SQL 数据库（在网络服务器上）吗？即只需打开所有必需参数的连接，然后执行 SQL 查询？

这是一个私人程序（不向公众开放），只能在指定的手机上使用，所以我不担心第三方获得数据库访问权。

如果是这样 - 我在 Java 中需要哪些库？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-21T09:36:16.320

这个问题已经出现了好几次了。如果您将 MSSQL JDBC 驱动程序部署到您的 android 设备，然后将您的 SQL 服务器直接暴露在互联网上，您可能可以将您的 android 设备直接连接到 SQL 服务器。如果 MSSQL 驱动程序能在 Android 上正常工作，那就是完全不同的问题了。

这就是你可能能够做到的方式。然而，这就是为什么这是一个坏主意。

1.  您将 SQL 服务器直接暴露在 Internet 上。除非你加密你的 MSSQL 服务器和安卓设备之间的数据，否则对于一个坚定的黑客来说，嗅探设备和 MSSQL 之间的 TDS 数据流并对其进行逆向工程并窃取你的数据相对容易。加密可能会使攻击者几乎不可能窃取您的数据变得更加困难。然而，攻击者仍然可以直接对您的数据库发起 DOS/DDOS 攻击。**不是个好主意！**

2.  如果您计划连接其他移动设备（iPhone、Symbian、BlackBerry 等），您还需要能够从这些设备创建 SQL 连接。例如，iPhone 本身不支持 Java（根据我的记忆），因此您需要找到一种将 iPhone 连接到 SQL 服务器的方法。黑莓可能更容易，但塞班你会不走运。因此，您几乎需要为连接到数据库的每个设备创建一个自定义解决方案。**坏主意 大量维护**

创建可以操作数据库的 Web 服务或自定义 TCP/IP 服务器。从您的设备连接到此网络服务/服务。Web服务是要走的路。如今，超过 90% 的设备本身就能够进行 Web 服务调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T04:48:29.393

我认为您必须使用 web 服务与 SQL 数据库进行通信。您可以在该 Web 服务中定义诸如 runSomeScalarQuery 或 runOneTabularQuery 之类的通用方法，并通过自定义协议（如自定义对象）发送数据库响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T10:51:42.917

这是一种非常糟糕的做法，但如果您出于测试目的需要它，或者由于您没有任何其他选择，仍然可以连接到外部数据库。如果数据访问不是太繁重，它在大多数情况下都可以正常工作。

*   从这里下载驱动程序：http: [//dev.mysql.com/downloads/connector/j/3.0.html](http://dev.mysql.com/downloads/connector/j/3.0.html)（有一些较新的驱动程序，但这个运行良好）
*   如果您的项目没有“libs”文件夹，请立即创建它。
*   解压下载的文件，将mysql-connector-java-3.0.17-ga-bin.jar文件复制到libs文件夹
*   将其添加到构建路径：
    *   右键单击项目>构建路径>配置构建路径
    *   选项卡库 > 添加 JAR
    *   浏览到 libs 文件夹并选择 jar 文件
*   一旦准备就绪，我们就可以继续编程了。众所周知，Android 强制我们在单独的线程中进行网络访问，所以我们必须选择一种创建线程的方式，例如我们可以使用一个 `AsynkTask`，并将我们的代码添加到该`doInBackground`方法中。

    ```
    private static final String url = "jdbc:mysql://{URL_SERVER}/{BASE_DATOS}";
    private static final String user = "usuario";
    private static final String password = "contraseña";
    int count=0;
    try {
         // The newInstance() call is a work around for some broken Java implementations
         //this creates some static objects that we need. 
         Class.forName("com.mysql.jdbc.Driver").newInstance();
         Connection con = DriverManager.getConnection(url, user, password);
         Statement st = con.createStatement();
         ResultSet rs = st.executeQuery("QUERY");
         while (rs.next()) {
               //in every iteration we have a  result
               //if query is a Select, for instance 
               //"select one_column, another_column from ..." 
               //remember that rs has functions such as
               //rs.getString(0)  
               //rs.getDouble(1) 
               //etc, that get the index of the columns in the select 
               //and cast it to the specific type

               //here we do whatever we need with the results, 
               //and probably keep track of the progress with something like
          // publishProgress(++count);

               // end early if asynctask was cancel() 
               if (isCancelled())
            break;

       }
    }

    catch (Exception e) {
     e.printStackTrace();
    } 
    ```

# iphone - 未调用 applicationDidEnterBackground 和 applicationWillResignActive

> ID：10679594
> 
> 赞同：2
> 
> 时间：2012-05-21T04:45:02.730
> 
> 标签：iphone, ios, uiapplicationdelegate

我正在创建一个简单的应用程序，它在主线程上执行一些任务。我正在打印进程，`NSLog`所以我可以了解我的进程是否正在运行。

现在，当我按下主页按钮而不启动进程时（当我点击按钮时进程将启动）应用程序进入后台并且我的两个方法`applicationDidEnterBackground`都`applicationWillResignActive`被调用。

但是当我第一次点击我的按钮并在主线程上启动进程时，如果我按下主页按钮，这两种方法都不会被调用。所以我的应用程序无法知道该应用程序是否在后台输入。

即使在那之后，当我再次激活该应用程序时，它也会向我显示一个只有状态栏的黑屏。

1.  为什么会这样？
2.  为什么应用程序不进入后台？
3.  为什么不调用苹果的方法？
4.  有没有办法解决它？

**更新** 这是我的 appdelegate 类代码

```
- (void)applicationWillResignActive:(UIApplication *)application
{

}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{

}

- (void)applicationDidBecomeActive:(UIApplication *)application
{

} 
```

所有方法都没有实现。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T01:19:55.413

> 我正在创建一个简单的应用程序，它在主线程上执行一些任务。

**不要在主线程上执行长时间运行的操作。**

委托回调发生在主线程上。如果主线程很忙，那么在您返回“运行循环”之前不会发生回调。

当您的应用程序前景化时，操作系统实际上会显示一个屏幕截图（如果有），然后退回到启动图像 (Default.png)。屏幕截图是在`-applicationDidEnterBackground:`返回后拍摄的，它允许您自定义保存的内容（出于安全原因，您可能希望这样做，或者隐藏在重新启动时可能没有意义的 UI 元素，例如倒数计时器）。

黑屏可能是因为您的应用没有启动图像。如果你的应用程序需要超过 10 秒才能进入后台（确实如此，因为主线程被阻塞了），它就会被杀死。除了调试器已附加并捕获 SIGKILL，因此除非您正在观看 Xcode，否则很容易错过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:18:55.063

有一些情况

如果`UIApplicationExitsOnSuspend`在您的应用程序中将 key 设置为 true `Info.plist`，则当用户点击主页按钮时不会调用 applicationWillResignActive 方法。可能还有别的东西。在此处检查密钥[Apple 密钥](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)，看看您是否向 plist 添加了新内容。并且没有其他情况表明您的委托方法没有调用。由于项目的适当行为，它也可能有一段时间。尝试清理您的项目并重建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T00:48:41.457

这听起来很奇怪，但对那些有帮助的人来说。我遇到了同样的问题并清理了我的项目，然后它又开始工作了。

# android - CCGLSurfaceView 错误

> ID：10679602
> 
> 赞同：4
> 
> 时间：2012-05-21T04:45:52.007
> 
> 标签：android, cocos2d-android

我正在开发一些示例代码。我在使用 cocos2d 时遇到了一些问题。那就是 CCGLSurfaceView 的问题。

首先，我使用 fps_images.png 文件在我的项目中导入了 cocos2d.jar。我修改了我的项目以使用 cocos2d 库。

这是代码。

```
public class ToadActivity extends Activity {

protected CCGLSurfaceView _glSurfaceView;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON, WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    _glSurfaceView = new CCGLSurfaceView(this);

    setContentView(_glSurfaceView);
}
@Override
public void onStart()
{
    super.onStart();

    CCDirector.sharedDirector().attachInView(_glSurfaceView);

    CCDirector.sharedDirector().setDisplayFPS(true);

    CCDirector.sharedDirector().setAnimationInterval(1.0f / 60.0f);
}
} 
```

==>>> _glSurfaceView = new CCGLSurfaceView(this);

在这里，我的应用程序发现了一个错误。结果，它在我的android模拟器中被杀死了。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T11:35:47.923

该库已被取消，而不是更新更多。最好开始使用： http: [//www.cocos2d-x.org/](http://www.cocos2d-x.org/)。它使用 c++，在 android 上工作，使用 JNI（本机代码）。代码可以移植到其他平台，例如 IO。

希望对您有所帮助！

# jquery - 存在默认值时如何在 Jquery 中显示验证错误

> ID：10679605
> 
> 赞同：2
> 
> 时间：2012-05-21T04:47:22.920
> 
> 标签：jquery, validation, input

我是 Jquery 的新手，尝试在任何地方搜索谷歌都没有运气，我正在寻找一个验证规则/或函数来验证表单并在默认值在表单中时要求，因此，不要将默认值计算为有效. 我尝试了几个没有运气的代码，我的 URL 是[http://jconstruction.us.cloudlogin.co/formtst.php](http://jconstruction.us.cloudlogin.co/formtst.php)

Jquery 代码是

```
<script type="text/javascript">
$(document).ready(function()
{
    $("#myform").validate({
        valid: function(input){
                    var value = $("input").val();
                    if(value == "test"){ return false;}
                       // check input value against your default values
                       // - If match, return false (is NOT valid)
                       // - If no match, return true (is valid)
                     },  

        debug: false,
        rules: {
          name: "required",
          email: {
            required: true,
            email: true
          }
        },

        messages: {
            name: "Please let us know who you are.",
            email: "A valid email will help us get in touch with you.",
        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('proc.php', $("#myform").serialize(), 
                            function(data) {
                $('#light').html(data);
                $('#light').show();
                $('#fade').show();
            });
        }
    });
});
</script> 
```

有效：函数输入是我尝试过的那个认为是最实用的输入，但是，我不知道在函数中放入什么来验证。任何帮助表示赞赏。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:54:09.790

您`$(input)`需要是一个类或一个 id，不是吗？`.`还是`#`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:50:28.863

你的意思是这样的：

```
$.validator.addMethod("defaultInvalid", function(value, element) {
    //check if its default value, if yes then invalidate  
    return !(element.value == element.defaultValue); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:24:24.180

[演示](http://www.position-relative.net/creation/formValidator/demos/demoValidators.html)

这是使用默认值验证的插件

```
<form id="formID" class="formular" method="post">
     <input value="This is a placeholder" data-validation-placeholder="This is a placeholder" class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder" />
</form>

<script>

    jQuery(document).ready(function(){

        // binds form submission and fields to the validation engine

        jQuery("#formID").validationEngine();

    });
</script> 
```

# actionscript-3 - 将 Mpeg 文件转换为 flv 并同时使用 as3 在 flash cs3 中播放转换后的文件

> ID：10679606
> 
> 赞同：0
> 
> 时间：2012-05-21T04:47:28.020
> 
> 标签：actionscript-3, video, flv, flash-cs3, mpeg

我有一个 mpg 文件，我想转换为 flv 格式，但我有一个要求，在转换 mpg 文件的同时，我还必须在 flash cs3 中同时播放转换后的 flv 文件。怎么做？我正在使用cs3和as3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:14:02.043

如果您想以编程方式转换文件，请使用[ffmpeg](http://ffmpeg.org/)。这是一个命令行工具，可以将视频文件转换为几乎所有内容。您必须使用正确的参数执行 ffmpeg 并等待视频准备好。这仅适用于服务器端。表示 Flash 客户端将视频文件加载到服务器。它在那里被转换。您可以使用任何服务器端语言（如 php）执行 ffmpeg。

可悲的是，我不知道是否可以在转换时观看视频。我认为不是，但也许其他人知道更多。

# coronasdk - Corona SDK：从表格中删除显示对象

> ID：10679607
> 
> 赞同：0
> 
> 时间：2012-05-21T04:47:30.337
> 
> 标签：coronasdk

我一直在做一个塔防游戏。所以基本上我有一个循环来制作一个显示对象的表格，这些对象是坦克，并向它们添加物理体。然后它“将坦克”交给一个名为 moveTank 的函数来实际移动它们。

但是，为了节省内存，我想删除物理体并在它离开屏幕后显示对象本身。该代码在第 234 行出现。在模拟器中，如果您测试只是移除物理体，一切正常。但是，如果我删除显示对象（也许我做错了？）它会删除图像，但是使用它的一些其他函数会给出错误，说我正在尝试将数字与零值进行比较@第 229 行. nil 值是对象被删除，我将其属性 isMoving 和 isAlive 设置为 false 那么它为什么还要尝试执行操作？

谁能帮我完成这部分尝试删除显示对象而没有错误？

```
local storyboard = require( "storyboard" )
local scene = storyboard.newScene()

local physics = require "physics"
physics.start()
physics.setGravity( 0, 0)
physics.setDrawMode("hybrid")

local screenW, screenH, halfW, halfH = display.contentWidth, display.contentHeight,      display.contentWidth*0.5, display.contentHeight*0.5

local tanks = {}
local tickCnt = 0
local TOTAL_TANKS = 2
local tankCnt = 1

function AddCommas( number, maxPos )

    local s = tostring( number )
    local len = string.len( s )

    if len > maxPos then
            -- Add comma to the string
            local s2 = string.sub( s, -maxPos )             
            local s1 = string.sub( s, 1, len - maxPos )             
            s = (s1 .. "," .. s2)
    end

    maxPos = maxPos - 3             -- next comma position

    if maxPos > 0 then
            return AddCommas( s, maxPos )
    else
            return s
    end

end

function tickCntFunct()
if tickCnt <= 2000 then
tickCnt = tickCnt + 25
print("tick count", tickCnt)
else
tickCnt = 0
end
end
timer.performWithDelay(10, tickCntFunct, 0)

function moveTank(aTank)

local mSpeed = 150
rSpeed = 6

if aTank.isAlive == true and aTank.isKilled == false then
print("aTank.x = ", aTank.x)
print("aTank.y = ", aTank.y)
print("tank rotation = ", aTank.rotation)

local disP1 = math.sqrt((math.abs(aTank.x - pointer1.x))^2 + (math.abs(aTank.y - pointer1.y))^2)
local disP2 = math.sqrt((math.abs(aTank.x - pointer2.x))^2 + (math.abs(aTank.y - pointer2.y))^2)
local disP3 = math.sqrt((math.abs(aTank.x - pointer3.x))^2 + (math.abs(aTank.y - pointer3.y))^2)
local disP4 = math.sqrt((math.abs(aTank.x - pointer4.x))^2 + (math.abs(aTank.y - pointer4.y))^2)

removeTanknumber = 0

if aTank.x < 0 then
aTank.rotation = 90
aTank:setLinearVelocity( mSpeed, 0)
end
if aTank.rotation < 180 and disP1 < 1 then
aTank:setLinearVelocity( 0, 0)
aTank.rotation = aTank.rotation + rSpeed
end 
if aTank.rotation >= 180 and disP1 < 1 then
aTank.rotation = 180
aTank:setLinearVelocity( 0, mSpeed)
end
if aTank.rotation > 90 and disP2 < 1 then
aTank:setLinearVelocity( 0, 0)
aTank.rotation = aTank.rotation - rSpeed
end 
if aTank.rotation <= 90 and disP2 < 1 then
aTank.rotation = 90
aTank:setLinearVelocity( mSpeed, 0)
end 
if aTank.rotation > 0 and disP3 < 1 then
aTank:setLinearVelocity( 0, 0)
aTank.rotation = aTank.rotation - rSpeed
end 
if aTank.rotation <= 0 and disP3 < 1 then
aTank.rotation = 0
aTank:setLinearVelocity( 0, -1*mSpeed)
end 
if aTank.rotation < 90 and disP4 < 1 then
aTank:setLinearVelocity( 0, 0)
aTank.rotation = aTank.rotation + rSpeed
end 
if aTank.rotation >= 90 and disP4 < 1 then
aTank.rotation = 90
aTank:setLinearVelocity( mSpeed, 0)
end 
end
end
timer.performWithDelay(1, moveTank, 0)

function scene:createScene( event )
local group = self.view

pointersGroup = display.newGroup()
mapGroup = display.newGroup()

-- create a grey rectangle as the backdrop
map = display.newImage( "map1.png" )
map:setReferencePoint(display.TopLeftReferencePoint)
map.x = 0
map.y = 0

spawner = display.newImage("pointer.png")
spawner:setReferencePoint(display.CenterReferencePoint)
spawner.y = 210
spawner.x = -40

pointer1 = display.newImage("pointer.png")
pointer1:setReferencePoint(display.CenterReferencePoint)
pointer1.x = 210
pointer1.y = 210

pointer2 = display.newImage("pointer.png")
pointer2:setReferencePoint(display.CenterReferencePoint)
pointer2.x = 210
pointer2.y = 390

pointer3 = display.newImage("pointer.png")
pointer3:setReferencePoint(display.CenterReferencePoint)
pointer3.x = 510
pointer3.y = 390

pointer4 = display.newImage("pointer.png")
pointer4:setReferencePoint(display.CenterReferencePoint)
pointer4.x = 510
pointer4.y = 90

sideBlock = display.newImage("side_block.png")
physics.addBody( sideBlock, "static", { friction=0.5, bounce=0.3 } )
sideBlock:setReferencePoint(display.CenterReferencePoint)
sideBlock.x = screenW - 100
sideBlock.y = screenH/2

-- all display objects must be inserted into group

pointersGroup:insert( spawner )
pointersGroup:insert( pointer1 )
pointersGroup:insert( pointer2 )
pointersGroup:insert( pointer3 )
pointersGroup:insert( pointer4 )
pointersGroup:insert( sideBlock )
mapGroup:insert( map )
group:insert( pointersGroup )
group:insert( mapGroup )

end

function scene:enterScene( event )
local group = self.view

for i = 1, TOTAL_TANKS do
-- create 5 tanks, place them off screen, set their status to isAlive and not isMoving
table.insert(tanks, display.newImage("tank.png"))
print("memory (all spawned): ", AddCommas( system.getInfo("textureMemoryUsed"), 9 ) .. " bytes" )
tanks[i]:setReferencePoint(display.CenterReferencePoint)
tanks[i]:scale(0.75, 0.75)
tanks[i].x = spawner.x
tanks[i].y = spawner.y
tanks[i].isAlive = true
tanks[i].isMoving = false
tanks[i].isKilled = false
end

local function gameLoop(event)

-- normally should not have loops inside the game loop, because
-- if there is too much going on during each frame call it can cause issues
-- but for moving only 5 tanks, this is how you can do it.
-- each tank will call the same function above (moveTank)

-- have a variable that you would check here, to see if 'so many ticks or seconds'
-- has passed, and if so, set the isMoving to true for the next tank .. will just use
-- a simple incremented variable 'tickCnt'

    if tickCnt > 2000 and tankCnt <= TOTAL_TANKS then
    physics.addBody( tanks[tankCnt], { density=3.0, friction=0.5, bounce=0.3 } )
    tanks[tankCnt].isMoving = true
    print("tankCnt= ", tankCnt)
    tankCnt = tankCnt + 1
    print("memory (moving): ", AddCommas( system.getInfo("textureMemoryUsed"), 9 ) .. " bytes" )        
    end

    for i=1, TOTAL_TANKS do
        if tanks[i].isMoving == true and tanks[i].isAlive == true and tanks[i].isKilled == false then
        moveTank(tanks[i])
        end
    end

    for i = 1, TOTAL_TANKS do
        if tanks[i].x >= 40 and tanks[i].isKilled == false then
        tanks[i].isKilled = true
        tanks[i].isMoving = false
        tanks[i].isAlive = false
        physics.removeBody( tanks[i] )
        display.remove(tanks[i])
        tanks[i] = nil
        end
    end

end

Runtime:addEventListener("enterFrame", gameLoop)

physics.start()

end

function scene:exitScene( event )
local group = self.view

physics.stop()

end

function scene:destroyScene( event )
local group = self.view

package.loaded[physics] = nil
physics = nil
end

---------------------------------------------------------------------------------------   --
-- END OF YOUR IMPLEMENTATION
-----------------------------------------------------------------------------------------

-- "createScene" event is dispatched if scene's view does not exist
scene:addEventListener( "createScene", scene )

-- "enterScene" event is dispatched whenever scene transition has finished
scene:addEventListener( "enterScene", scene )

-- "exitScene" event is dispatched whenever before next scene's transition begins
scene:addEventListener( "exitScene", scene )

-- "destroyScene" event is dispatched before view is unloaded, which can be
-- automatically unloaded in low memory situations, or explicitly via a call to
-- storyboard.purgeScene() or storyboard.removeScene().
scene:addEventListener( "destroyScene", scene )

-----------------------------------------------------------------------------------------

return scene 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T22:00:01.850

尝试从最后一个坦克循环到第一个坦克。

# python - 是否可以使用 python matplotlib 垂直绘制绘图？

> ID：10679612
> 
> 赞同：11
> 
> 时间：2012-05-21T04:48:23.170
> 
> 标签：python, matplotlib

我需要画一个像这样的情节：

![在此处输入图像描述](../Images/5ba7c8074ef0c53493309df25de63a1b.png)

可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T05:53:57.933

我不知道你的数据是什么……但这里是一个“垂直”图，描绘了近海表面的*假设氧气水平……*

请注意，没有什么特别的要求。只需对您的`x`和`y`值进行排序，以便从第一个坐标到第二个坐标绘制的线等给出您想要的垂直线。

（我在这里做的一件特别的事情——可能是也可能不是你想要的——是把 放在`xticks`情节的顶部，使用`tick_top`。）

```
import matplotlib.pyplot as plt

# define data

Oxygen = [ 0.1 , 0.5, 1, 10, 15, 20, 15, 10, 1, 0.5, 0.5]
Depth  = [ 0,     1,  2,  4,  8, 10, 12, 14, 16, 20, 40 ]

fig = plt.figure()
ax = fig.add_subplot(111)

ax.plot(Oxygen, Depth, 'go--')
ax.xaxis.tick_top()

ax.set_ylabel('depth')
ax.set_ylim(50, 0)
ax.set_xlim(0, 25)
ax.set_xlabel('Oxygen level [ppm]')

plt.show() 
```

这产生： ![在此处输入图像描述](../Images/af650afb26f30ab8866efdaceabefece.png)

我希望它有帮助...

# jakarta-ee - 找不到适合 jdbc:mysql://localhost:3306/ 的驱动程序

> ID：10679621
> 
> 赞同：1
> 
> 时间：2012-05-21T04:48:48.980
> 
> 标签：jakarta-ee, tomcat, servlets, jdbc, mysql-connector

我有一个 A 类，它连接到我的本地主机中的 mysql 数据库。它在日食中工作正常。
然后我修改了项目以从 servlet 调用/调用类 A 并部署到 tomcat。
我得到了这个例外：

```
No suitable driver found for jdbc:mysql://localhost:3306/a 
```

这个异常发生在：

```
DriverManager.getConnection(connectionUrl, user, password); 
```

这里出了什么问题？我该如何解决这个问题？

补充：
我确定 .jar 在 WEB-INF/lib 下，这不是问题。
我只是想通了，问题是我忘了添加这一行：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

有谁知道为什么这条线在 web 应用程序中是必须的，而不是在 java 项目中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T04:56:08.430

没有合适的驱动程序”通常意味着您提供的用于连接的 JDBC URL 语法不正确，或者根本没有加载驱动程序。

当调用 getConnection 方法时，`DriverManager`将尝试从初始化时加载的驱动程序和使用与当前小程序或应用程序相同的类加载器显式加载的驱动程序中找到合适的驱动程序。（使用`Class.forName()`）

还要检查你`mysql-jdbc.jar`的类路径中是否有。我建议将`.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中。然后 tomcat 将负责其余的工作。

# php - PHP中的mysql_query参数错误

> ID：10679622
> 
> 赞同：0
> 
> 时间：2012-05-21T04:49:06.970
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

```
$connection = mysql_connect('localhost', 'username', 'password') or die('Database connection failed:' . mysql_error());                                

mysql_select_db('db_test', $connection) or die('Database connection failed: ' . mysql_error());

$var = '';

switch ($var) {
    case 'dosomething':
        break;
    default:
        default_func();
}

function default_func() {
    if (isset($_POST['submit'])) {
        $query = "INSERT INTO `table_test` (`some_field`) VALUES ('test')";
        $result = mysql_query($query, $connection) or die(mysql_error());

    header('Location: index.php?submit=success');
    }
}

mysql_close($connection); 
```

我得到了一个“mysql_query() 期望参数 2 是资源空给定错误”。

我确保将 $connection 分配给数据库连接资源 ID 的值，所以这似乎不是问题。不知道为什么 $connection 的值给了我一个 NULL。关于为什么会发生此错误的任何解释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T04:52:38.727

`$connection`变量不在函数[范围](http://nz.php.net/manual/en/language.variables.scope.php)内`default_func()`。

如果您只有一个连接 - 只需省略第二个参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T04:53:46.810

$connection 变量在 中不可见`default_func`。如果你想要它，只需将它声明为全局：

```
function default_func() {
    global $connection;
  ...
} 
```

但是，当代码稍微复杂一些时，全局变量可能会导致难以诊断的错误。隐藏的全局状态（如果您完全不使用第二个参数，这就是您正在使用的状态`mysql_query`）甚至更糟。你最好将连接传递给函数：

```
switch ($var) {
    case 'dosomething':
        break;
    default:
        default_func($connection);
}

function default_func($conn) {
    if (isset($_POST['submit'])) {
        $query = "INSERT INTO `table_test` (`some_field`) VALUES ('test')";
        $result = mysql_query($query, $conn) or die(mysql_error());

    header('Location: index.php?submit=success');
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T04:52:53.687

`$connection`没有在函数内部定义。

无论如何它都不是必需的，因为如果您将其排除在外，则假定最后打开的连接。

解决方案：只需`,$connection`从`mysql_query`通话中删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T04:54:09.783

`$connection`未在该范围内定义，将连接传递给函数或将其声明为全局或将其排除在外，因为您只有一个连接
[PHP VARIABLE SCOPE](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T04:56:08.070

由于您没有`$connection`在函数内部贴花变量，并且您想使用外部变量`$connection`，因此您必须使用它，`global $connection`以便外部变量的范围在您的函数中持续存在

# drupal-7 - 在特定页面中添加滑块

> ID：10679629
> 
> 赞同：0
> 
> 时间：2012-05-21T04:49:53.253
> 
> 标签：drupal-7, slider

我是 drupal 新手，我使用母船创建了一个主题，并使用代码将滑块添加到首页。我的问题是我还需要在另一个页面中添加相同的滑块。有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:54:47.447

转到管理/结构/块，使用滑块配置块旁边的链接，然后您可以将选项设置为 1）在除...之外的每个页面上显示或 2）仅在这些页面上显示。在选项 radios 下方的文本区域中输入路径 (node/233) 或路径别名，每行一个。

或者，您可以使用 Context 模块 (http://drupal.org/project/context)

# c - 在不使用 libelf 或其他库的情况下创建 ELF 二进制文件

> ID：10679632
> 
> 赞同：6
> 
> 时间：2012-05-21T04:50:10.557
> 
> 标签：c, linux, compiler-construction, elf

最近尝试自己在linux平台上写一个简单的编译器。

当谈到编译器的后端时，我决定生成 ELF 格式的二进制文件，而不使用第三方库，例如`libelf`.

相反，我想尝试将机器代码直接写入与ELF ABI相对应的文件中，只需使用该`write()`函数并控制ELF文件的所有细节即可。

这种方法的优点是我可以为我的编译器控制一切。

但我在犹豫。考虑到 ELF ABI 的详细程度，这种方式可行吗？

我希望有任何建议和指向可用的可用资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T05:09:42.773

这有多容易/可行取决于您要支持的功能。如果要使用动态链接，则必须处理符号表、重定位等。当然，如果您希望能够与现有库（甚至是静态库）链接，则必须支持它们需要的任何东西。但是，如果您的目标只是制作独立的静态 ELF 二进制文件，那真的很容易。您只需要一个主 ELF 头文件（100% 样板文件）和 2 个`PT_LOAD`程序头文件：一个用于加载程序的代码段，另一个用于加载其数据段。理论上它们可以组合，但安全强化内核不允许给定页面既可写又可执行，因此将它们分开是明智之举。

一些建议阅读：

[http://www.linuxjournal.com/article/1059](http://www.linuxjournal.com/article/1059)

# .net - 在 Couchbase 中插入 6000 行，但未存储成功

> ID：10679633
> 
> 赞同：0
> 
> 时间：2012-05-21T04:50:17.043
> 
> 标签：.net, memcached, generic-list, couchbase

我在List中生成了6000个对象，并使用memcached将List存储到Couchbase中，但是Store方法返回“false”没有任何消息，我不知道为什么6000行数据不能存储而2000行数据有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T02:01:36.590

Couchbase 并非旨在将大量数据列表存储为一个对象。您不能更改 20MB 的限制。因此，要存储您的对象，您需要分别存储每个对象。

请参阅[此处](http://www.couchbase.com/forums/thread/change-maximum-item-size)了解更多信息。

# iphone - 从 UITabBar 上的另一个视图控制器发送数据时 UI 没有更新？

> ID：10679635
> 
> 赞同：0
> 
> 时间：2012-05-21T04:50:28.120
> 
> 标签：iphone, uitabbarcontroller, updating

我正在使用 UITabBar 来显示两个 viewController，firstViewController 是一个 uiview，secondViewController 是一个表格视图。我需要的是当我单击第二个视图表单元格时，该值应该在 firstViewController 的 UILabel 上更新。我的代码在这里，在`secondviewcontroller.h`

```
 @interface firstviewcontroller {
 NSMutableArray *stationnamestobepassed;
  }
 @property (nonatomic, retain) NSMutableArray *stationnamestobepassed;
 @end 
```

在`secondviewcontroller.m`声明这个

```
@implementation firstviewcontroller
@synthesize stationnamestobepassed;

 -(void) someaction{
  stationnamestobepassed = [NSMutableArray     
    arrayWithObjects:@"string1",@"string2",@"string3"];
  secondviewcontroller = [[secondviewcontroller alloc]initWithNibName:@"NIbName" 
Bundle:nil];
  secondviewcontroller.stationnamespassed = self.stationnamestobepassed;
  //i am not pushing the view controller.

 }

@end 
```

在`firstviewcontroller.h`声明这个

```
@interface secondviewcontroller {
 NSMutableArray *stationnamespassed;
}
@property (nonatomic, retain) NSMutableArray *stationnamespassed;

@end 
```

在`firstviewcontroller.m`声明这个

```
@implementation secondviewcontroller
@synthesize stationnamespassed;

  -(void)viewWillAppear:(BOOL)animated
   {
  //stationNameDisplay is a uilabel

stationNameDisplay.text=[stationnamespassed objectAtIndex:0];
NSLog(@"station name %@",[stationnamespassed objectAtIndex:0]);

 }
  -(void) dealloc{
  [stationnamespassed release];
   [super release];
 }
@end 
```

问题是，值没有更新，它给出了 NULL。但我尝试推动第一个 vie 并且它有效。实际上我不想推送那个视图控制器，因为我已经存在于选项卡上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:03:21.687

当您选择选项卡时，您的视图将被调出。而这一行创建了该控制器的新对象，而不是选项卡控制器的新对象。

```
secondviewcontroller = [[secondviewcontroller alloc]initWithNibName:@"NIbName" 
Bundle:nil]; 
```

做你想做的事。你将不得不做这样的事情

```
UINavigationController* navController = [[self.tabBarController viewControllers] objectAtIndex:/*your tab index on which desiredControllerResides*/];
NSArray* viewControllers= [navController viewControllers];
for(UIViewController *theController in viewControllers)
{
if([theController isKindOfClass:[secondviewcontroller]])
{
   theController.stationnamespassed = self.stationnamestobepassed;
//i.e  this line of your code secondviewcontroller.stationnamespassed = self.stationnamestobepassed;
}
} 
```

# html - 如何让盒子阴影出现在我的 content-bg 上？

> ID：10679637
> 
> 赞同：0
> 
> 时间：2012-05-21T04:50:29.370
> 
> 标签：html, css

我正在一个名为[http://ccrccmo.com](http://ccrccmo.com)的网站上工作，但我无法让 box-shadow 显示在带有 css 的 content-bg 上。

```
nav{
    background:url(images/nav-bg2.png);
    height:74px;
    box-shadow: 0px 3px 5px #222;
}
#content-bg{
    background:white;
    margin-top:0px;
    z-index:-1000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:16:55.437

你不见了

```
box-shadow: inset 0 3px 10px #000;
box-shadow: initial; 
```

尝试

```
#content-bg {
background: white;
margin-top: 0px;
box-shadow: inset 0 3px 10px #000;
box-shadow: initial;
} 
```

# ruby - 将 JSON 解析为 Ruby 迭代器

> ID：10679643
> 
> 赞同：0
> 
> 时间：2012-05-21T04:51:58.850
> 
> 标签：ruby, arrays

我有一个 JSON 文件，其解析数据存储在 @colors 实例变量中，如下所示：

```
[{:color=>"red", :value=>"#f00"} {:color=>"green", :value=>"#0f0"} {:color=>"blue", :value=>"#00f"} {:color=>"cyan", :value=>"#0ff"} {:color=>"magenta", :value=>"#f0f"} {:color=>"yellow", :value=>"#ff0"} {:color=>"black", :value=>"#000"}] 
```

现在我想遍历这个输出以在一个视图中创建一个表

```
<tr><td>color</td><td>value</td></tr> 
```

当我派生另一个这样的实例变量时——

```
@even_colors = @colors.values_at(* @colors.each_index.select {|i| i.even?}).map(&:values) 
```

我得到一个由其他所有颜色/值对组成的数组数组

```
[["red", "#f00"], ["blue", "#00f"], ["magenta", "#f0f"], ["black", "#000"]] 
```

但是我想创建两个单独的数组，一个仅包含由 :color （红色、蓝色等）指示的颜色名称，另一个仅由 :value （#f00、#00f 等）指示的十六进制组成。 ）。我似乎无法弄清楚如何做到这一点。有人有什么建议吗？谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:10:00.980

您可以通过两次通过`@colors`：

```
names = @colors.map { |h| h[:color] }
hexes = @colors.map { |h| h[:value] } 
```

或者你可以通过：

```
parts = @colors.each_with_object({ :names => [ ], :hexes => [ ]}) do |h, parts|
    parts[:names].push(h[:color])
    parts[:hexes].push(h[:value])
end 
```

然后查看`parts[:names]`颜色名称和`parts[:hexes]`十六进制值。

不过，我真的不明白您为什么要拆分`@colors`，您可以直接从以下位置生成表格`@colors`：

```
<table>
    <% @colors.each do |h| %>
        <tr><td><%= h[:color] %></td><td><%= h[:value] %></td></tr>
    <% end %>
</table> 
```

分成`@colors`两个数组对我来说似乎很忙。

# asp.net-mvc - 从 UserControl 更新模型 - mvc

> ID：10679648
> 
> 赞同：0
> 
> 时间：2012-05-21T04:52:29.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个问题：我创建了一个 UserControl A，A 有自己的控制器，以便在添加的每个视图中重用 Usercontrol 操作，UserControl A 需要一个模型 UserControlModel，我想要做的是更新包含视图的模型用户控件 A。

如何将值从 UserControl 传递到主视图或包含用户控件的任何视图以保留此值？

一些代码：

用户控制控制器

```
 public class ColorBlockUserControlController : Controller
    {
        /// <summary>
        /// Callback method for ColorBlockUserControl's AJAX form.
        /// </summary>
        /// <param name="model">ColorModel</param>
        /// <returns>HTML string to be dispalyed within target DIV tag.</returns>
        [HttpPost]
        public ActionResult DrawColor(ColorModel model)
        {
            if (ModelState.IsValid)
            {
                return Content(ColorManager.GetGradientDiv(model.RGBColor, model.Width, model.Height));
            }
            else
            {
                return Redirect("/");
            }
        }

        [AcceptVerbs(HttpVerbs.Post)]
        public JsonResult Sumar(int Height, int Width)
        {
            return Json(true);
        }
    } 
```

用户控件 HTML：

```
<script type="text/javascript">
    $(document).ready(function () {
        var Valores = {
            'Height': 30,
            'Width': 30
        };

        $("#btnSumar").click(function () {
            var targetDiv = "#TargetResult";

            $.post(
            '/ColorBlockUserControl/Sumar',
            Valores,
            function (data) {
                if (data === true) {
                    debugger;
                    $(targetDiv).html('Sumado');
                }
                else {

                    alert('Failed to save the user');

                }
            },
            'json'
        );
        });

    });

</script>

@using (Ajax.BeginForm("DrawColor", "ColorBlockUserControl", new AjaxOptions { UpdateTargetId = "color-" + Model.Id }))
{
    <div>RGB (example: FFAA00)</div>
    <div class="formLine">
        @Html.EditorFor(x => x.RGBColor)
    </div>

    @Html.ValidationMessageFor(x => x.RGBColor)

    <div>Width</div>
    <div class="formLine">
        @Html.EditorFor(x => x.Width)
    </div>

    <div>Height</div>
    <div class="formLine">
        @Html.EditorFor(x => x.Height)
    </div>

    <div id="btnSumar" style="cursor:pointer;">This is a Test</div>

    <p><input type="submit" value="Color Me!" /></p>

    <div id="color-@Model.Id"><!-- Will be populated by AJAX method --></div>
} 
```

使用用户控件查看：

```
@model MVCColorUserControl.Models.HomeModel
@using MVCColorUserControl.Models

@{
    ViewBag.Title = "Color Demo";
}
<h2>@Model.WelcomeText</h2>
<p>
    A Partial Control</p>
    @Html.Partial("UserControls/ColorBlockUserControl", new ColorModel())
<hr />
@*<p>
    A Partial Control that is initialized on Server-Side</p>
@{
    Html.RenderAction("InitializeUserControl");
}*@

@Html.ActionLink("Ir a Test View", "Test")

@Html.ActionLink("Usando otro controller", "InNewController") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:04:11.143

要回答有关 FormCollection 的问题：

在您的控制器中，您可以这样做：

```
[HttpPost]
public ActionResult GetMeSomeValues(FormCollection formCollection)
{
   string text = formCollection.Get("Name of the input or whatever you have in your form");

   //same goes for int values which you will need to convert from a string.
   //Now if you want to pass the value to a Model simply create a new Model in here
   //and add it.

   var model = new Model();
   model.Value = text;

   return View(model);   
} 
```

# html - 需要版权才能保持底部

> ID：10679650
> 
> 赞同：0
> 
> 时间：2012-05-21T04:52:41.130
> 
> 标签：html, css, css-float

这是html：

```
<div id="terms" class="terms">
        <center><a href="terms.html">Terms & Conditions</a>
</div> 
```

CSS：

```
# terms {
width: 100%;
position: absolute;
bottom: 0;

}

.terms {
width: 100%;
position: relative;
bottom: 5px;
} 
```

我究竟做错了什么？我已经尝试了大约 50 种不同的 html 和 css 变体，以使这些术语留在页面底部，但它在页面中心浮动。它会从顶部到中间到左右，但我不能让它浮动到页面底部！整个页面设置为两个浮动列`.right`，并且`.left`

请帮忙！！谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:58:14.730

我为你准备了一个小提琴：

**[http://jsfiddle.net/uh53X/1/](http://jsfiddle.net/uh53X/1/)**

修改您的代码如下：

**HTML**

```
<div class="terms">
  <center><a href="terms.html">Terms & Conditions</a></center>
</div> 
```

**CSS**

```
div.terms{
    display:block;
    position:absolute;
    bottom:0;
    right:0;
    width:100%;
    background:#eee;
    border:1px solid #ddd;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:03:55.560

请参考下面的演示

[单击此处进行演示](http://jsfiddle.net/tfQPz/2/)

**HTML**

```
<div class="wrapper">
    <div id="terms">
        <center><a href="terms.html">Terms &amp; Conditions</a></center>
    </div>
</div> 
```

**CSS**

```
.wrapper{
    width:500px;
    height:500px;
}

#terms {
    position: fixed;
    bottom:5px;
    width: 100%;
    left:0px;
    height:25px;
} 
```

* * *

**根据评论更新：**

[点击演示 2](http://jsfiddle.net/tfQPz/5/)

**HTML**

```
<div class="wrapper">
    <div class="pageBox">
        <p>
        This is test page height will be managed accordingly and footer will be attached after this box.
        </p>
        <p>
        This is test page height will be managed accordingly and footer will be attached after this box.
        </p>
        <p>
        This is test page height will be managed accordingly and footer will be attached after this box.
        </p>
        <p>
        This is test page height will be managed accordingly and footer will be attached after this box.
        </p>
        <p>
        This is test page height will be managed accordingly and footer will be attached after this box.
        </p>
    </div>

    <div id="terms">
        <center><a href="terms.html">Terms &amp; Conditions</a></center>
    </div>
</div> 
```

**CSS**

```
.wrapper{
    width:500px;
}

.pageBox{
    height:auto;
}

#terms {
    width: 100%;
    height:25px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T08:47:24.017

无论您有多少内容，您都想将页脚粘贴到页面底部吗？-[粘性页脚](http://www.cssstickyfooter.com/)，这是我想将页脚锚定到底部时使用的（尽管从您的示例页面的外观来看，它可能不是您所追求的）

或者您只是想确保它位于页面中最后一项的下方？为什么不在最后一项下方和条款之前添加一个清除 div/br

```
.clearboth {
    font-size: 1px;
    line-height: 0px;
    clear: both;
    height: 0px;
}

<br class="clearboth" /> 
```

然后不管两边的浮动，你都可以让你的 div 作为常规项目坐在它下面

希望这些都有帮助

# android - Android 应用程序与 IMAP 接口并填充 Gmail 电子邮件

> ID：10679659
> 
> 赞同：1
> 
> 时间：2012-05-21T04:53:28.363
> 
> 标签：android, email, imap

我正在尝试制作一个与股票电子邮件应用程序基本相同的应用程序。允许我使用 IMAP 和 SMTP 登录电子邮件帐户。我一直在尝试了解协议以及如何将它们与应用程序接口，但不知所措。任何人都可以指导我找到解决方案或直接下载股票应用程序的来源吗？

# java - 在两个类之间建立正确的关系

> ID：10679660
> 
> 赞同：0
> 
> 时间：2012-05-21T04:53:30.507
> 
> 标签：java

对于我的程序，我有一个`Server`班级和一个`Protocols`班级。

当我的服务器收到来自客户端的消息时，我希望服务器将消息发送到协议。然后，协议会找出需要对消息执行的操作并调用适当的方法。现在，需要调用的方法在服务器内部。

所以本质上，服务器需要访问协议并且协议需要访问服务器。

建立这种关系的最佳方式是什么？我该怎么做？我不想要循环引用，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:01:04.870

遵循请求/响应对象的 Servlet 模型怎么样？

每次收到消息时，都将其打包到请求对象中，然后创建响应对象，并将其发送给协议处理程序（充当一种 servlet）。

您的处理程序处理请求，无论它需要传回什么，它都会将其放入响应对象中，服务器最终使用该对象将实际响应发送给客户端。如果服务器需要做出任何决定，它可以在你的协议处理程序处理请求后，根据响应对象中已经提供的信息来做。

您可以稍后将类似的概念添加到 servlet 模型的概念中，例如过滤器或事件处理程序来处理类似的需求。

# asp.net - 在编码中访问 SQL 输出

> ID：10679661
> 
> 赞同：0
> 
> 时间：2012-05-21T04:53:33.967
> 
> 标签：asp.net, sql-server-2008

我有一个类似的 SQL 输出

```
TotalLeave    Status
----------    ------
    3        PaidLeave
    5        MedicalLave 
```

我需要在我的标签控件中显示这个值，比如，

```
lblMedicalLeave.text = 5
lblPaidLeave.text    = 3 
```

为此，我刚刚在我的代码中为我的数据集创建了对象，例如，

```
StaffAttendanceStatusTableAdapters.StaffTypesTableAdapter staffAttendanceStatus = 
                  new StaffAttendanceStatusTableAdapters.StaffTypesTableAdapter();
StaffAttendanceStatus.StaffTypesDataTable StaffDataTable = 
               staffAttendanceStatus.GetDataStaffAttendanceStatus(staff.StaffId);

        if (StaffDataTable[0] != null)
        {
            StaffAttendanceStatus.StaffTypesRow StaffRow = StaffDataTable[0];

            lblTotalMedicalLeave.Text = StaffRow.TotalLeave.ToString();
            lblTotalPaidLeave.Text = StaffRow.TotalLeave.ToString();
        } 
```

它显示相同的值（3），是否可以获得相应状态的 TotalLeave 值？有人能帮我一下吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:57:12.143

*您两次*都访问同一行。使用**StaffDataTable[1]**访问第二行。无论如何，您应该在访问任何值之前检查是否有结果！

```
using StaffAttendanceStatusTableAdapters;
....

StaffTypesTableAdapter staffAttendanceStatus = new StaffTypesTableAdapter();
StaffAttendanceStatus.StaffTypesDataTable StaffDataTable = 
           staffAttendanceStatus.GetDataStaffAttendanceStatus(staff.StaffId);

if (StaffDataTable != null && StaffDataTable.Count > 1)
{
    lblTotalMedicalLeave.Text = StaffDataTable[0].TotalLeave.ToString();
    lblTotalPaidLeave.Text = StaffDataTable[1].TotalLeave.ToString();
} 
```

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:14:58.153

由于需要从两行获取 TotalLeave，因此需要从两行获取数据。

```
if (StaffDataTable != null && StaffDataTable.Rows.Count > 1)
{
  StaffAttendanceStatus.StaffTypesRow StaffRow1 = StaffDataTable[0];
  StaffAttendanceStatus.StaffTypesRow StaffRow2 = StaffDataTable[1];

  lblTotalMedicalLeave.Text = StaffRow1.TotalLeave.ToString();
  lblTotalPaidLeave.Text = StaffRow2.TotalLeave.ToString();
} 
```

如果没有 PaidLeave 和 MedicalLave 状态的顺序，只需检查 row.Status 并将总值分配给相应的标签

# css - HTML、CSS 标题辅助

> ID：10679663
> 
> 赞同：1
> 
> 时间：2012-05-21T04:53:49.943
> 
> 标签：css, html, scroll, position

由于我将无法发布图像，这里是它的链接

[http://i.stack.imgur.com/LxO1e.png](http://i.stack.imgur.com/LxO1e.png)

我有这个网站，PHP 和所有其他东西都在工作。问题是当我向上滚动查看下面的其他内容时，向上滚动的元素会越过标题而不是下方。我该如何解决这个问题？

我似乎无法在这里发布 HTML，我尝试了缩进四个空格的东西，但它不适用于 HTML 的东西，所以这里是网站：pageboost.comze.com

这是 main 的 css 是 over 而不是 under

```
.inmain
{
width:95%;
height:100%;
left:20px;
top:42px;
position:relative;
} 
```

这是标题的CSS

```
.header
{
background-color:#ffd800;
width:100%;
height:42px;
position:fixed;
left:0px;
top:0px;
-webkit-box-shadow: 0 5px 6px -6px black;
-moz-box-shadow: 0 5px 6px -6px black;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T05:03:00.173

您必须使用这些位置之一来定义**z-index**`relative,absolute or fixed`。

例如像他这样写：

```
.header{
 position:fixed;
 z-index:1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:06:31.607

只需将**z-index**值定义到您定义位置的**Header**类或 Id 中。它发生了，所以当你给出**z-index**值时，我希望它能顺利工作.....

**更新的答案**

我已经在**标题类中给出了****z-index**值，现在它工作正常请检查它.....

 ****HTML**

```
<div class="header"></div>
<div class="inmain">afdadfasf</div> 
```

**CSS**

```
.header
{
background-color:#ffd800;
width:100%;
height:42px;
position:fixed;
left:0px;
top:0px;
-webkit-box-shadow: 0 5px 6px -6px black;
-moz-box-shadow: 0 5px 6px -6px black;
    z-index:1;
}

.inmain
{
width:95%;
height:100%;
left:20px;
top:35px;
position:relative;
} 
```

为了更好地理解，请参阅现场演示：- [http://jsfiddle.net/X8vpg/6/](http://jsfiddle.net/X8vpg/6/)**

# java - java中的自定义bean验证

> ID：10679664
> 
> 赞同：0
> 
> 时间：2012-05-21T04:53:50.753
> 
> 标签：java, bean-validation, hibernate-validator

我一直在寻找一种方法来验证 bean 仅针对某些属性而不是所有属性。

例如：

```
public Class TestA {

 @NotEmpty
 private String first;

 @NotEmpty
 @Size(min=3,max=80)
 private String second;

 //getters and setters

} 
```

我有另一个名为“TestB”的类，它指的是“TestA”类，如下所示

```
public Class TestB {

 @NotEmpty
 private String other;

 @Valid
 private TestA testA; 

 //public getters and setters
} 
```

是否可以编写自定义注释验证器来仅验证某些属性？像下面的东西......

```
public Class TestB {

 @NotEmpty
 private String other;

 @CustomValid(properties={"second"})
 private TestA testA; 

 //public getters and setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:23:53.193

使用`groups`属性来做到这一点。它看起来像这样：

```
public Class TestA {

 @NotEmpty(groups = {Second.class})
 private String first;

 @NotEmpty(groups = {Second.class})
 @Size(min=3,max=80, groups = {Second.class})
 private String second;

 //getters and setters

} 
```

和

```
public Class TestB {

 @NotEmpty
 private String other;

 @Valid
 private TestA testA; 

 //public getters and setters
} 
```

Where`Second`是在某处定义的空接口。

有关更多详细信息，请参阅文档中的示例：[2.3。验证组](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-usingvalidator.html#validator-usingvalidator-validationgroups)`@Validates`此外，如果您使用 Spring >= 3.1，您可能会对允许验证指定组的注释感兴趣。

# c# - 字符串的正则表达式

> ID：10679669
> 
> 赞同：-1
> 
> 时间：2012-05-21T04:54:22.530
> 
> 标签：c#, regex

我有一个字符串

例如 AHDFFH XXXX

其中 'AHDFFH' 可以是任意长度的字符字符串。AND 'XXXX' 将重复没有。任何长度的“X”字符，需要用表中自动递增的数据库值替换。

我需要使用正则表达式从上面的字符串中找到重复的“X”字符。

谁能帮我解决这个问题..？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:02:06.413

**尝试这个：**

```
\b(\p{L})\1+\b 
```

**解释：**

```
<!--
\b(\p{L})\1+\b

Options: case insensitive; ^ and $ match at line breaks

Assert position at a word boundary «\b»
Match the regular expression below and capture its match into backreference number 1 «(\p{L})»
   A character with the Unicode property “letter” (any kind of letter from any language) «\p{L}»
Match the same text as most recently matched by capturing group number 1 «\1+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert position at a word boundary «\b»
--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:10:27.113

你的意思是一些字符+（或一些）空格+一些数字吗？

如果是这样，你可以使用这个正则表达式：

```
\w+\s+(\d+) 
```

像这样的c#代码：

```
System.Text.RegularExpressions.Regex regex = new System.Text.RegularExpressions.Regex(@"\w+\s+(\d+)");
System.Text.RegularExpressions.Match m = regex.Match("aaaa 3333");
if(m.Success) {
    MessageBox.Show(m.Groups[1].Value);
} 
```

# json - 使用不同类型的内部数组解析 Json

> ID：10679671
> 
> 赞同：0
> 
> 时间：2012-05-21T04:54:29.567
> 
> 标签：json

我在解析一个非常困难的 json 字符串时遇到了很大的问题。例如

```
{
    "facilityDetails": [
        {
            "tableName": "FACILITY",
            "facilityDetails": [
                {
                    "id": 1,
                    "itemId": "s101",
                    "name": "facility",
                    "status": 1,
                    "lastEditedOn": "01/Jan/201200: 00: 00.000"
                }
            ]
        },
        {
            "tableName": "PLACE_SERVICE",
            "facilityDetails": [
                {
                    "id": 1,
                    "itemId": "22",
                    "name": "placeservice",
                    "facility": "5",
                    "status": 1,
                    "lastEditedOn": "01/Jan/201000: 00: 00.000"
                },
                {
                    "id": 2,
                    "itemId": "55",
                    "name": "placeservice",
                    "facility": "t",
                    "status": 2,
                    "lastEditedOn": "01/Jan/201000: 00: 00.000"
                },
                {
                    "id": 3,
                    "itemId": "99",
                    "name": "placeservice",
                    "facility": "r",
                    "status": 33,
                    "lastEditedOn": "01/Jan/201000: 00: 00.000"
                },
                {
                    "id": 4,
                    "itemId": "22",
                    "name": "placeservice",
                    "facility": "",
                    "status": 0,
                    "lastEditedOn": "01/Jan/201000: 00: 00.000"
                }
            ]
        },
        {
            "tableName": "AGENT",
            "facilityDetails": [
                {
                    "agentId": 2,
                    "itemId": "1",
                    "name": "agent",
                    "defUnitId": 0,
                    "defRouteId": 0,
                    "color": "",
                    "synonyms": "",
                    "administrationType": 0,
                    "status": 0,
                    "lastEditedOn": "01/Jan/201200: 00: 00.000"
                }
            ]
        }
    ]
} 
```

对于这个 json 字符串，“facilityDetails”是一个内部数组，每次都有不同的细节。我如何解析这种类型的 json。如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:00:30.453

您应该能够使用 Json.NET 库来解析它。

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# c# - 从 Active Directory 中检索用户管理器的代码引发异常

> ID：10679672
> 
> 赞同：0
> 
> 时间：2012-05-21T04:54:38.040
> 
> 标签：c#, active-directory

我需要从 Active Directory 中检索所有与用户相关的信息。

我的代码检索`username,useremail, Full Name`了用户，但是当我尝试检索经理的姓名时，代码会引发异常。

以下是我的代码：

```
DataTable table = new DataTable();
table = dt;

DirectoryEntry dEntry = new DirectoryEntry("LDAP://" + domain);

DirectorySearcher dSearch = new DirectorySearcher(dEntry);
SearchResultCollection sResultcol;

try
{
   dSearch.Filter = "(objectCategory=organizationalUnit)";
   sResultcol = dSearch.FindAll();

   foreach (SearchResult sResult in sResultcol)
   {
      DirectoryEntry dUserEntry = new DirectoryEntry();
      DirectorySearcher dSearchUsers = new DirectorySearcher(dEntry);

      SearchResultCollection sUserResults;
      dSearchUsers.Filter = "(objectClass=User)";
      dSearchUsers.SearchScope = SearchScope.Subtree;

      sUserResults = dSearchUsers.FindAll();

      foreach (SearchResult sUserResult in sUserResults)
      {
         DataRow dr = table.NewRow();
         string empCode = sResult.Properties["pager"].ToString();

         if (empCode.Length != 0)
         {
            dr["empcode"] = empCode;
            string namee = sUserResult.Properties["samaccountname"][0].ToString();
            dr["name"] = namee;
            string disname = sResult.Properties["distinguishedName"][0].ToString();
            dr["ou"] = disname;
            string manager = sUserResult.Properties["manager"].Value.ToString();
            dr["manager"] = manager;

            dt.Rows.Add(dr);
         }
      }

      dUserEntry.Close();
   }

   return dt;
}
catch (Exception ex)
{
    throw new Exception("Error at retrieveUsers() : " +       ex.Message.ToString());
} 
```

我得到了例外

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

当我尝试获取经理姓名时。

根据 Active Directory 的结构，管理员的姓名位于另一个选项卡中。

有没有人知道从 Active Directory 的常规以外的选项卡中检索数据？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:04:43.870

好吧，对于给定的用户，经理的内容*可能*是空的 - 如果一个属性没有分配给它的值，在 Active Directory 中，它将`.Properties[...]`是 NULL - 所以你**必须**在访问该不存在的属性之前检查它：

```
if(sUserResult.Properties["manager"] != null)
{
    string manager = sUserResult.Properties["manager"].Value.ToString();
} 
```

另外：此条目只是经理的 DN（专有名称） - 类似于

```
CN=Joe Blow,OU=Sales,OU=Europe,DC=yourcompany,DC=com 
```

它不包含经理的“好”显示名称，或类似的东西....要获取该信息，您必须使用 DN 绑定到经理的用户对象并获取该数据。

**另外：**您是否真的设置了数据表？在您显示的代码中，您只是在创建`DataTable`- 但您没有在其中设置任何列 - 所以任何分配都像

```
dr["empcode"] = empCode; 
```

肯定会失败，因为其中还没有`empcode`列`DataTable`...

# java - 如果在同步方法中调用 thread.yield() 是否会失去对对象的锁定？

> ID：10679676
> 
> 赞同：9
> 
> 时间：2012-05-21T04:55:36.263
> 
> 标签：java, multithreading, synchronization, sleep, yield

我知道这`Thread.currentThread().yield()`是对线程调度程序的通知，如果存在任何此类线程，它可能会将 cpu 周期分配给具有相同优先级的其他线程。我的问题是：如果当前线程已锁定某个对象并调用`yield()`，它会立即失去该锁定吗？而当线程调度器发现没有这样的线程来分配cpu周期时，那么已经调用的线程`yield()`将再次争夺锁定它之前丢失的对象？

我在 javadoc 和论坛中找不到它 [http://www.coderanch.com/t/226223/java-programmer-SCJP/certification/does-sleep-yield-release-lock] 有 50-50 个答案。

我认为`yield()`（比如说thread1）应该释放锁，因为如果某个具有相同优先级的线程（比如说thread2）想要对同一个对象进行操作，那么当线程调度程序最终将cup分配给thread2时，它就有机会。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T05:01:43.857

不`Thread.yield()`，不像`Object.wait()`。它只是放弃控制以允许线程切换。它不会影响您的程序的并发性。

无法保证调度程序将在产生后运行哪个线程。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-21T05:13:24.113

在[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.3)
***17.3 Sleep and Yield***
*中重要的是要注意 Thread.sleep 和 Thread.yield 都没有任何同步语义。特别是，编译器不必在调用 Thread.sleep 或 Thread.yield 之前将缓存在寄存器中的写入刷新到共享内存，编译器也不必在调用 Thread.sleep 或 Thread 之后重新加载缓存在寄存器中的值。屈服。*

我的评论：

在 java 的早期，当它并不真正支持并行执行，而只支持并发（绿色线程）时，`yield()`正在暂停当前线程，而 jvm 正在选择另一个线程来恢复。现在，`yield`由于通常胎面调度是在操作系统级别上，因此没有太大意义。

因此，`yield`这只是对 JVM 的提示，即当前线程想要休息而不是别的，由线程调度程序决定要做什么。 `yield`没有任何同步语义。如果线程持有锁，它将继续持有它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:40:43.350

只有 Object 类的等待方法释放当前实例的内在锁（线程可能获得了其他锁，它们不会被释放）。屈服，睡眠，加入不用担心锁。然而，join 有点特别，你可以保证看到你正在等待完成的线程所做的所有更改。

# testing - 在本地机器的 Web 浏览器上运行自动化测试用例 - HUDSON

> ID：10679678
> 
> 赞同：0
> 
> 时间：2012-05-21T04:55:48.337
> 
> 标签：testing, hudson, automated-tests

我使用远程 hudson 服务器来测试 web 应用程序的自动化。当我运行自动化测试用例时，它们会在远程机器的浏览器上运行。我宁愿他们在我的机器上运行。

有没有办法我可以做到这一点。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:39:12.033

您可以在您的机器上运行[Jenkins slave](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)并将作业绑定到它（作业定义页面上有这样的选项）。此外，您可以使用[NodeLabel 参数插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)并使用参数来指定要将作业绑定到哪个节点。例如：默认情况下它将在 Master 上运行，但您也可以在手动运行时指定您的 slave。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:31:42.357

考虑到您正在谈论一个测试浏览器，我假设您使用 hudson/jenkins 的 selenium 插件。您可以在测试代码中更改运行测试的节点的位置/功能。

```
capabilities.setBrowserName("firefox");
capabilities.setPlatform(org.openqa.selenium.Platform.WINDOWS); 
```

也可以通过编辑 jenkins 插件文件夹中的配置文件从节点列表中排除主节点

如果您指的是仅限制项目可以运行的位置，则可以找到

https://[jenkins 名称]/job/[jobname]/configure

在限制此项目可以运行的位置下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:19:37.080

你没有说你使用什么工具来驱动浏览器。如果你使用 selenium，你可以在你的机器上设置一个 selenium 服务器，然后让你的测试使用你的机器。

# ios - 如何在 IOS 5 Storyboard 中添加 TableFooterView？

> ID：10679689
> 
> 赞同：2
> 
> 时间：2012-05-21T04:56:19.270
> 
> 标签：ios, uitableview, ios5, storyboard

如何以与在 iOS 5 StoryBoard 中添加 tableheader 视图相同的方式添加 tablefooterview，如本页所述：

[StoryBoards 中的表头视图](https://stackoverflow.com/questions/7841167/table-header-views-in-storyboards)

它似乎并不容易工作。有人可以帮忙吗？

# c++ - 如何从 .exe 文件创建 .cab 文件以从网页安装？

> ID：10679690
> 
> 赞同：0
> 
> 时间：2012-05-21T04:56:48.397
> 
> 标签：c++, .net, activex, cab

我有 .exe 文件来安装 activeX 控件。现在我想创建一个 .cab 文件来从网页安装该 activeX 控件。我怎样才能做到这一点？例如，预期结果：当我访问网页并提示我安装时，我单击接受安装。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:34:59.660

MakeCAB.exe！ [http://msdn.microsoft.com/en-us/library/dd583149(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/dd583149(v=office.11).aspx)

# c++ - 用给定的向量定义一个 boost::ublas 矩阵

> ID：10679692
> 
> 赞同：0
> 
> 时间：2012-05-21T04:57:08.493
> 
> 标签：c++, matrix, ublas

我正在寻找一种从 boost::ublas 中给定的 1xm 向量定义 nxm 矩阵的方法。我尝试以下代码

```
boost::numeric::ublas::vector<double> v(100);
boost::numeric::ublas::matrix<double> m(10, 100);
std::copy(v.begin(), v.end(), m.begin2()); 
```

但这只会将向量复制到矩阵的第一行。我想要的是将 v 复制到行，以便 M 的每一行与 v 相同。所以除了循环每一行并运行复制 10 次之外，还有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:59:57.887

没有循环，你可以这样做：

```
m = outer_prod(scalar_vector<double>(10, 1), v); 
```

虽然它可能不是最优化的，性能方面。

# iphone - EKEventEditViewController 错误的开始/结束日期保存在 iCal 中

> ID：10679695
> 
> 赞同：2
> 
> 时间：2012-05-21T04:57:24.437
> 
> 标签：iphone, objective-c

我有一个奇怪的问题，我正在使用 EKEventEditViewController 从我的应用程序中保存事件。代码是

```
- (void)addEvent:(id)sender {

    // When add button is pushed, create an EKEventEditViewController to display the event.
    EKEventEditViewController *addController = [[EKEventEditViewController alloc] initWithNibName:nil bundle:nil];

    // set the addController's event store to the current event store.
    addController.eventStore = self.eventStore;
    addController.event.title = self.reportTitle;

    // present EventsAddViewController as a modal view controller
    [self presentModalViewController:addController animated:YES];

    addController.editViewDelegate = self;
    [addController release];
} 
```

问题是它在我的 iOS 5 iphone 中运行良好。但是当我在带有 iOS 4.1 的 iPhone 3GS 中测试它时，它在 iCal 中存储了错误的开始/结束日期和时间。任何人都可以指导我出了什么问题。

# matlab - 从不同的 matlab 文件中绘图

> ID：10679696
> 
> 赞同：0
> 
> 时间：2012-05-21T04:57:37.940
> 
> 标签：matlab, plot

我有四个 matlab 代码，每个代码都生成一个图，如何能够将所有图组合成一个图以显示每个图的过渡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:28:43.597

如果要在同一个图形上绘制多条线，可以使用[hold on](http://www.mathworks.com/help/techdoc/ref/hold.html)例如：

```
plot(x1,y1,'ok');    
hold on
plot(x2,y2,'or'); 
```

如果您说它们都形成一行，那么尝试像这样连接您的输入向量：

```
%Mock input
x1 = 0:9;
x2 = 10:19;
x3 - 20:29;
x4 = 30:39;
y1 = 2*x1 -20;
y2 = 2*x2 -20;
y3 = 2*x3 -20;
y4 = 2*x4 -20;
%Example of plotting concatenated vectors
plot( [x1;x2;x3;x4], [y1;y2;y3;y4]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:18:04.033

如果您希望所有四个都在同一个数字上（例如图 1），那么您可以这样做：

```
%% In PlotCode1.m
figure(1)
hold on
...%your plotting code

%% In PlotCode2.m
figure(1)
hold on
...%your plotting code 
```

如果您在不关闭或清除图 1 的情况下运行每个 PlotCode.m 文件，那么所有行都将显示在同一个图上。

或者，您可以将每个不同的绘图文件转换为以图形编号作为输入的函数。例如：

```
 % In PlotCode1.m
   function PlotCode1(num)
     figure(num)
     hold on
     %Your plotting code

% In PlotCode2.m
  function PlotCode2(num)
     figure(num)
     hold on
     %Your plotting code 
```

现在您可以在一个脚本中调用这些函数中的每一个：

```
 fignum = 2;
 PlotCode1(fignum)
 PlotCode2(fignum) 
```

现在一切都将绘制在图 2 上。

# android - 触摸页面导航，在 Android 的 PhoneGap 应用程序中

> ID：10679697
> 
> 赞同：-1
> 
> 时间：2012-05-21T04:57:45.730
> 
> 标签：android, cordova

我正在为 Android 平台制作一个 PhoneGap 应用程序。我希望在触摸移动时从左到右和从右到左进行页面导航。你能帮我怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:45:05.787

遵循这些教程。但是你用 CSS 做动画。通过添加类名。这就是我在图像轮播中用于从右向左滑动图像的内容。

因此，回答您的问题： 1\. 熟悉触摸代码和“快速按钮” 2\. 了解 CSS 中的关键帧。

```
/*   Transitions   */
.sliding .in {
  -webkit-animation-name: slideinfromright;
}
.sliding .out {
  -webkit-animation-name: slideouttoleft;
}

@-webkit-keyframes slideinfromright {
  0% {
    -webkit-transform: translate3d(100%, 0, 0);
  }

  100% {
    -webkit-transform: translate3d(0, 0, 0);
  }
}

@-webkit-keyframes slideouttoleft {
  0% {
    -webkit-transform: translate3d(0, 0, 0);
  }

  100% {
    -webkit-transform: translate3d(-100%, 0, 0);
  }
} 
```

# awk - 如何在 unix 中将双精度类型更改为整数类型？

> ID：10679701
> 
> 赞同：1
> 
> 时间：2012-05-21T04:58:20.143
> 
> 标签：awk

我有这个 awk 命令。

```
awk '{t1=$1/5;t2=$2/5;t3=$3/5} END{print t1" "t2" "t3}' temp1 > temp3 
```

我想将 t1 值的数据类型更改为整数。我怎样才能做到这一点？

问候

苏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:00:52.577

只需指定`t1`应格式化为整数：

```
awk '{t1=$1/5;t2=$2/5;t3=$3/5} END{printf "%d %.6g %.6g\n", t1, t2, t3}' temp1 > temp3 
```

这`%.6g`是默认格式（也在 OFMT 中保存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:02:27.787

尝试`int()`对值使用函数`t1`：

```
int(t1) 
```

它截断小数，只留下值的整数部分。

# c++ - 需要说明：编写一个程序，读取一个 0 到 2G 之间的十进制数，并在视频显示器上显示 32 位二进制版本

> ID：10679702
> 
> 赞同：-1
> 
> 时间：2012-05-21T04:58:53.750
> 
> 标签：c++, c, binary, decimal, pseudocode

```
Write a program that reads an decimal number between 0 and 2G and 
displays the 32-bit binary version on the video display 
```

有人问我这个问题，好的 0 是 0，但我需要在这里解释一下**“2G”**是什么意思以及**“视频显示器上的 32 位二进制版本”**与普通 32 位二进制有什么区别（32 数字 1 和 0） ?

注意：这里没有任何相关的编码。谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:07:20.703

据我所知，

2G 是最大可表示的 32 位有符号值，即 2147483647，表示为 0 后跟 31 个 1。

> 视频显示上的 32 位二进制版本”与普通 32 位二进制（32 位数字 1 和 0）有什么区别？

据我所知，没有区别。

# codeigniter - CodeIgniter：显示自定义视图而不是“数据库错误”消息

> ID：10679714
> 
> 赞同：4
> 
> 时间：2012-05-21T05:01:12.047
> 
> 标签：codeigniter

在数据库意外关闭的情况下，如何显示自定义视图而不是附加的一般错误？

![在此处输入图像描述](../Images/89c1addaf5ac4f5d94b9013969b3b43f.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T05:05:43.087

在**应用程序文件夹**中有一个名为**errors**的文件夹。`error files`发生错误时会出现所有问题。

当发生**数据库错误**时，**error_db.php**文件会显示在浏览器中。您可以编辑它或将其替换为您的自定义文件。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-21T06:27:47.417

你应该`$db_debug = FALSE;`在你的生产服务器上设置你的配置数据库设置——你不应该向你的用户显示原始数据库错误消息，因为它是一个巨大的安全风险

# sql-server-2005 - 为什么我不能使用 ASP 和 SQL Server 编辑记录？

> ID：10679717
> 
> 赞同：0
> 
> 时间：2012-05-21T05:01:58.163
> 
> 标签：sql-server-2005, asp-classic

我有一个使用 ASP 经典和 SQL Server 2005 的 Web 应用程序。

当我尝试编辑记录时，网页显示`HTTP 500 - Internal server error`. 我尝试跟踪错误，我认为问题来自 FORM ACTION 目录。

这是我的表单声明：

```
<form name="frmEdit" method="post" action="/dairypo/master/tpl/queries/qupdate.asp" 
      onsubmit="return CheckOtherInfo();"> 
```

这是在 qupdate.asp 上：

```
<!-- #include file="../../../include/createconnection.asp" -->
<%
    act = 1
    if trim(request.form("chkAct")) = "" then
        act = 0
    end if
    curid = trim(request.form("hdnId"))
    nprice = cDbl(request.form("txtPrice"))
    nprice_big = cDbl(request.form("txtPrice_Big"))
    nrate = cDbl(request.form("txtRate"))
    csatuan_big = trim(request.form("selOrdSatuan1"))
    csatuan = trim(request.form("selOrdSatuan2"))

    objCommand_1.commandText = " SELECT nkonversi FROM ms_metriks WHERE csatuan1 = '" & csatuan_big & "' AND csatuan2 = '" & csatuan & "' "
    set qMetriks = objCommand_tpl.execute
    nkonversi = 1
    if NOT qMetriks.BOF then
        nkonversi = cDbl(qMetriks("nkonversi"))
    end if
    if nprice_big<>0 AND nprice=0 then
        nprice = nprice_big/nkonversi
    elseif nprice_big=0 AND nprice<>0 then
        nprice_big = nprice*nkonversi
    end if
    objCommand_tpl.commandText = "UPDATE ms_tpl SET " &_
                            "   dlastupdate = '" & date() & "', " &_
                            "   ctipejual = '" & trim(request.form("selBy")) & "'," &_
                            "   ckdgruprelasi = '" & trim(request.form("selgCust")) & "', " &_
                            "   ckdrelasi = '" & trim(request.form("selCust")) & "', " &_
                            "   dtglvalidawal = '" & trim(request.form("txtDate1")) & "', " &_
                            "   dtglvalidakhir = '" & trim(request.form("txtDate2")) & "', " &_
                            "   ckdcurrency = '" & trim(request.form("selCurr")) & "', " &_
                            "   nhargaperiod = " & nprice & ", " &_
                            "   nhargaperiodmax = " & nprice & ", " &_
                            "   nharga1 = " & nprice & ", " &_
                            "   nharga2 = " & nprice_big & ", " &_
                            "   csatuan1 = '" & csatuan & "', " &_
                            "   csatuan2 = '" & csatuan_big & "', " &_
                            "   nrate = " & nrate & ", " &_
                            "   bactive = " & act & ", " &_
                            "   ckdwilayah = '" & trim(request.form("selLok")) & "' " &_
                            " WHERE id = " & curid & " "
    set qUpdateRelasi = objCommand_tpl.Execute

    objCommand_tpl.commandText = "INSERT INTO ms_tplhist "&_
                               "( cUserId, dLastUpdate,ctipejual,cKdUnitKey, cKdGrupRelasi, cKdRelasi, cKdBarang, bIsFluc, cSatPeriod, "&_
                               "  nHargaPeriod,dTglValidAwal, dTglValidAkhir, cKdCurrency,cSatuan1,cSatuan2, nHarga1, nHarga2,nRate, bActive ) "&_  
                               "SELECT cUserId, dLastUpdate,ctipejual,cKdUnitKey, cKdGrupRelasi, cKdRelasi, cKdBarang, bIsFluc, cSatPeriod, "&_
                               "  nHargaPeriod,dTglValidAwal, dTglValidAkhir, cKdCurrency,cSatuan1,cSatuan2, nHarga1, nHarga2,nRate, bActive "&_
                               "FROM ms_tpl "&_
                               " WHERE id = " & curid & " "
    set qBackupData = objCommand_tpl.Execute            
%>

<form name="frmControl" action="/dairypo/homepage.asp?contID=mstpl_idxs" method="post">
<%
    for each form in request.form
        response.write "<input type=""hidden"" name=""" & form & """ value=""" & request.form(form) & """>" & vbcrlf
    next
%>  
</form>
<script>
    document.frmControl.submit()
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T19:21:25.023

根据上述评论，跟进答案以结束此问题。

“HTTP 500 Internal Server Error”是一个通用响应；它可以是任何东西。关闭浏览器中的“友好错误消息”，并确保您的 Web 服务器也配置为输出错误消息。快速浏览一下，您的 ASP 代码看起来还不错；我猜这是与SQL相关的东西

此外，对 AnthonyWJones 所说的话 +1：

> 顺便说一句，blankon91，您应该考虑研究“SQL 注入攻击”，以了解将来自客户端的值连接到 SQL 字符串中是多么不明智。改用参数化查询

# php - 使用 Yii 进行网站搜索

> ID：10679719
> 
> 赞同：2
> 
> 时间：2012-05-21T05:02:09.580
> 
> 标签：php, yii

我是 Yii 框架的新手，我想将“网站搜索”与 Yii 集成。任何人都可以建议将其集成到我的网站中的最佳和最简单的方法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T09:52:21.653

你可以尝试使用[Zend Lucene](http://framework.zend.com/manual/fr/zend.search.lucene.html)，有一个[wiki 解释了如何在 Yii 中做到这一点](http://www.yiiframework.com/wiki/248/adding-search-to-yii-blog-example-using-zend-lucene/)。您必须意识到，对于大量内容（数据库中有数十万个条目），[Zend Lucene](http://framework.zend.com/manual/fr/zend.search.lucene.html)执行查询会非常慢。

如果您可以在您的服务器上安装[Solr](http://lucene.apache.org/solr/)（需要 java），则有一个[扩展来处理这个搜索引擎](http://www.yiiframework.com/extension/solr/)。

# javascript - 使用 D3.js 编写简单的力布局应用程序

> ID：10679720
> 
> 赞同：2
> 
> 时间：2012-05-21T05:02:10.560
> 
> 标签：javascript, d3.js, force-layout

我开始学习 D3.js 并想使用强制布局编写一个简单的应用程序。目标是创建 3 个浮动的节点，可以使用鼠标拖动。这是我使用文档所取得的进展，但是我看到的只是窗口左上角的一个黑色小圆圈（我假设所有三个都重叠在那里）。我对每一步都发表了评论——至少我认为他们正在这样做。

```
<!doctype html>
<html>
<head>
    <title>Simple Force Layout</title>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.29.1"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.geom.js?1.29.1"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?1.29.1"></script>
</head>

<body>
    <div id="canvas"></div>

    <script type="text/javascript">

var conf = {
    canvasWidth: 600,
    canvasHeight: 400
}

var nodes = [
    { 'name': 'Node 1' },
    { 'name': 'Node 2' },
    { 'name': 'Node 3' }
];

// Add nodes to force layout and start it
var force = d3.layout.force()
    .nodes(nodes)
    .size([conf.canvasWidth, conf.canvasHeight])
    .start();

// Create an svg element
var svg = d3.select("#canvas")
    .append("svg:svg")
    .attr("width", conf.canvasWidth)
    .attr("height", conf.canvasHeight);    

// Create a circle for each node
var circle = svg.append("svg:g").selectAll("circle")
    .data(force.nodes())
  .enter().append("svg:circle")
    .attr("r", 6)
    .call(force.drag);

    </script>
</body>
</html> 
```

我的问题：

1.  我错过了什么？我还需要做什么才能让节点浮动并可以拖动？
2.  我想要混合或圆形和矩形节点（基于节点的某些属性）。我该怎么做呢？
3.  当我运行应用程序时，我在 Firebug 中看到以下错误：

    “网络错误：404 未找到 - [http://mbostock.github.com/d3/d3.geom.js?1.29.1](http://mbostock.github.com/d3/d3.geom.js?1.29.1) ” d3.geom.js?1.29.1

    “网络错误：404 未找到 - [http://mbostock.github.com/d3/d3.layout.js?1.29.1](http://mbostock.github.com/d3/d3.layout.js?1.29.1) ”

为什么是这样？我尝试的一些强制布局示例也给出了这个错误，但它们似乎工作正常！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T17:33:54.227

我将通过向您展示有效的示例来尝试回答您的问题。

1.  强制布局具有这种特殊性，它首先在屏幕上部显示所有节点。由于您的节点之间没有链接（如果它们有我在您的代码中看不到它），它们被绘制在彼此之上是正常的。您可以尝试通过将节点的 X 和 Y 属性设置为屏幕上的随机位置来修复此初始渲染。至于浮动问题：我不是 100% 确定这会起作用，因为我还没有测试过，但你可以尝试对节点施加不同的力，或者至少在显示窗口的角落。这将确保它们移动并且不会超出屏幕（或使用窗口的边界框）。如果你想确保节点总是移动，你还需要检查一些与速度和布局稳定性相关的力属性，不只是漂浮一段时间并保持在固定位置。让节点可拖动调用*force.drag*如 [http://bl.ocks.org/1095795](http://bl.ocks.org/1095795)

2.  这个例子展示了如何在力布局中呈现不同形状的节点：http: [//bl.ocks.org/1062383](http://bl.ocks.org/1062383)。

3.  我建议*使用 D3 的单文件版本，*它通常有一个名为 d3v2 或类似文件的文件...由于网络问题或 CORS 问题或类似问题，您可能无法访问这些文件，这意味着浏览器不会为您提供文件。您似乎使用的是非常旧的 D3 版本（一岁？）。看起来更像您在下一个片段中看到的版本可能不会向您抛出该错误：如果您不能使用在线版本，只需下载文件并将其放在同一目录中。

稍微玩一下 D3 示例并阅读文档。

# java - Xml 签名在添加 c14n 独占转换时无效

> ID：10679722
> 
> 赞同：8
> 
> 时间：2012-05-21T05:02:37.057
> 
> 标签：java, xml, transform, xml-signature

这是我生成 xml 签名的代码：

```
DOMSignContext dsc = new DOMSignContext
  (prk, xmldoc.getDocumentElement());

XMLSignatureFactory fac = 
  XMLSignatureFactory.getInstance("DOM");   

  DigestMethod digestMethod = 
      fac.newDigestMethod("http://www.w3.org/2000/09/xmldsig#sha1", null);
  C14NMethodParameterSpec spec = null;
  CanonicalizationMethod cm = fac.newCanonicalizationMethod(
      "http://www.w3.org/2001/10/xml-exc-c14n#",spec);
  SignatureMethod sm = fac.newSignatureMethod( 
      "http://www.w3.org/2000/09/xmldsig#rsa-sha1",null);
  ArrayList transformList = new ArrayList();
  TransformParameterSpec transformSpec = null;
  Transform envTransform =   fac.newTransform("http://www.w3.org/2000/09/xmldsig#enveloped-signature",transformSpec);
  Transform exc14nTransform = fac.newTransform(
      "http://www.w3.org/2001/10/xml-exc-c14n#",transformSpec);
transformList.add(exc14nTransform); 
transformList.add(envTransform);

 Reference ref = fac.newReference("",digestMethod,transformList,null,null);
 ArrayList refList = new ArrayList();
 refList.add(ref);
 SignedInfo si =fac.newSignedInfo(cm,sm,refList); 
```

这使得参考验证为假，核心有效性为假。但是当我删除`envTrasnform`变量 ie`fac.new Transform("http://www.w3.org/2001/10/xml-exc-c14n#",transformSpec)`并使用以下代码执行时：

```
DOMSignContext dsc = new DOMSignContext
  (prk, xmldoc.getDocumentElement());

XMLSignatureFactory fac = 
  XMLSignatureFactory.getInstance("DOM");   

  DigestMethod digestMethod = 
      fac.newDigestMethod("http://www.w3.org/2000/09/xmldsig#sha1", null);
  C14NMethodParameterSpec spec = null;
  CanonicalizationMethod cm = fac.newCanonicalizationMethod(
      "http://www.w3.org/2001/10/xml-exc-c14n#",spec);
  SignatureMethod sm = fac.newSignatureMethod( 
      "http://www.w3.org/2000/09/xmldsig#rsa-sha1",null);
  ArrayList transformList = new ArrayList();
  TransformParameterSpec transformSpec = null;
  Transform envTransform = fac.newTransform(
      "http://www.w3.org/2000/09/xmldsig#enveloped-signature",transformSpec);
 transformList.add(envTransform);
 Reference ref = fac.newReference("",digestMethod,transformList,null,null);
 ArrayList refList = new ArrayList();
 refList.add(ref);
 SignedInfo si =fac.newSignedInfo(cm,sm,refList); 
```

这使得核心效度和参考效度为真。为什么会这样。我从[这个](http://java.sun.com/developer/technicalArticles/xml/dig_signatures/)链接获得了这个代码（创建封装签名部分的代码片段 2）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T10:18:37.513

实际上，c14n 变换应该在封装签名变换之后执行。它应该在提取要签名的文档之后进行规范化（文档当前也包含签名元素。因此必须在规范化实际要签名的部分之前将其分离）。顺序应该是这样的：

```
transformList.add(envTransform);
 transformList.add(exc14nTransform); 
```

# algorithm - 时间和空间复杂度

> ID：10679723
> 
> 赞同：0
> 
> 时间：2012-05-21T05:02:43.590
> 
> 标签：algorithm, asymptotic-complexity

在以下 2 个案例中，我对时间和空间复杂度有疑问

> 块引用

**案例一：**

递归：阶乘计算。

```
int fact(int n)
{
    if(n==0)
      return 1;
    else
      return (n*fact(n-1));
} 
```

这里时间复杂度如何变成 2*n 和空间复杂度与 n 成正比。

和

> **案例二：**

迭代：-

```
int fact(int n)
{
    int i, result = 1;
    if(n==0)
    result = 1;
    else
         {
           for(1=1;i<=n;i++)
              result*=i;
         }
     return (result);
} 
```

时间复杂度与 n 成正比，空间复杂度是常数。这总是让我感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:48:50.597

如果我的推理有问题，请有人纠正我:)

对于空间复杂度，这是我的解释：

对于递归的解决方案，会有`n`递归调用，所以会`n`用到栈；每个呼叫一个。因此`O(n)`空间。迭代解决方案不是这种情况——只有一个堆栈，你甚至没有使用数组，只有一个变量。所以空间复杂度为`O(1)`。

对于迭代解决方案的时间复杂度，您`n`在循环中有乘法`for`，因此松散的界限将是`O(n)`. 可以假设所有其他操作都是单位时间或恒定时间，与算法的整体效率无关。对于递归解决方案，我不太确定。如果每一步有两个递归调用，你可以把整个调用栈想象成一棵平衡的二叉树，节点总数会是`2*n - 1`，但是这种情况下我不太确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T10:45:18.050

来自：[https ://cs.nyu.edu/~acase/fa14/CS2/module_extras.php](https://cs.nyu.edu/~acase/fa14/CS2/module_extras.php)

空间复杂度

下面我们将比较对迭代和递归阶乘函数的三种不同调用，并查看内存是如何使用的。请记住，我们声明的每个变量都必须在内存中保留空间来存储它的数据。因此，最简单形式的算法的空间复杂度是使用的变量数。所以在这个最简单的情况下，我们可以使用这个等式计算近似的空间复杂度：

**空间复杂度 = 函数调用次数 * 每次调用的变量数**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-27T04:43:02.877

时间复杂度：程序在运行期间执行的（机器）指令的数量在计算机科学中称为时间复杂度。

空间复杂度：本质上是算法需要的存储单元的数量。

案例1：在程序中递归计算阶乘，所以会直接调用一次函数，然后会回溯，所以时间复杂度变成2*n。

说到空间复杂度，在程序执行的时候会声明n个栈，所以是n。

案例 2：这个案例很简单，你在 for 循环中有 n 次迭代，所以时间复杂度为 n

迭代解决方案不是这种情况——只有一个堆栈，你甚至没有使用数组，只有一个变量。所以空间复杂度是O(1)

# magento - Magento“使用默认值”批量更新

> ID：10679724
> 
> 赞同：0
> 
> 时间：2012-05-21T05:02:45.957
> 
> 标签：magento, default

另一个 Magento 问题，有人可以帮我解决这个问题吗？我试图指定一系列product_id 来更新属性以设置标志“使用默认值”，但我不断收到错误，我认为我试图以错误的方式设置范围。

```
<?php
 include_once '.../app/Mage.php';
 Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
 error_reporting (E_ALL ^ E_NOTICE);

 $prods = range(5490,5495);

 $product = Mage::getModel('catalog/product')
 ->load($prods)
 ->setStoreId(1)
 ->setData('status', false)
 ->setData('name', false)
 ->setData('short_description', false)
 ->save();
echo "successful";
 ?> 
```

当我在 Daniel S 的帮助下运行这个版本时，

```
<?php
include_once '/home/sites/billyguyatts.com.au/docs/app/Mage.php';
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
error_reporting (E_ALL ^ E_NOTICE);

$prods = range(5492,5498);

$productCollection = Mage::getModel('catalog/product')->getCollection()
->addAttributeToFilter('entity_id', array('in' => $prods))
->load();

$productCollection
->setStoreId(1)    
->setDataToAll('status', false)
->setDataToAll('name', false)
->setDataToAll('short_description', false)
->save();
echo "successful";
?> 
```

当我运行它时，我得到了成功的回声但没有结果

```
 $productCollection->setDataToAll('status', false)
    ->setData('name', false)
 ->setData('short_description', false)
    ->save(); 
```

我收到此错误：

> 致命错误：调用未定义的方法 Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection::setData()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:14:58.547

您不能使用单个模型来加载多个产品。使用集合：

```
$productCollection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToFilter('entity_id', array('in' => $prods))
    ->load();

$productCollection->setDataToAll('status', false)
                  ->...
                  ->...
                  ->save(); 
```

# c# - 输出多个列表的最佳方式是什么？

> ID：10679726
> 
> 赞同：0
> 
> 时间：2012-05-21T05:03:03.540
> 
> 标签：c#, list, collections, csv

我正在准备一份报告，我需要对系统中的每个用户进行分类。大约有 15K 用户。

所以我会检查每个用户，检查他们的各种条件，并根据条件将每个用户分配到一个列表中。

大约有 8-9 个列表，这意味着系统中有大约 8-9 个用户类别。

现在我需要以一些易于理解的格式报告这些用户。我正在考虑一个 CSV 文件，其中的列将代表这 8-9 个类别，并且在每个列标题下，我将拥有该列表中的用户。

我可以将所有这些列表写入 CSV，但随后它们会出现在另一个之下。我不知道如何将它们写成表格格式，以便于阅读和理解。

例如，让我们考虑一下我有三类用户。

```
category1: abc, def, ghi
category2: lmn, opq, rst
category3: uvw, xyz, adf 
```

所以我的输出应该如下所示：

```
category1      category2      category3
abc              lmn             uvw
def              opq             rst
uvw              xyz             adf 
```

我也愿意接受其他关于如何以易于理解的格式输出结果的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:12:23.340

如果您将在 Excel 之类的文件中使用这些 CSV，我相信您现在拥有的格式是理想的。

为了输出结果，像这样的东西呢：

```
// Get categories with all users in it
// and get max count in a category across all categories
List<List<Category>> categories = GetCategoriesWithUsers();
int maxUsersInCategory = categories.Max(x => x.Count);

using (StreamWriter writer = new StreamWriter("output.csv")
{
    // Loop through each user per category
    for (int userCount = 0; userCount < maxUseresInCategory; userCount++)
    {
       string outputLine = string.Empty;

       // Loop through each category
       foreach(List<Category> category in categories)
       {
          // If category end isn't reached, add user
          if (category.Length > userCount)
          {
              outputLine += category[userCount];
          }

          outputLine += ",";
       }

       outputLine = outputLine.Remove(outputLine.Length - 1);
       writer.WriteLine(outputLine);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:33:03.773

出于导出数据的目的，或为了存储在数据库中，您只能使用一种格式：

```
user   category
user1  category1
user1  category2
user2  category1
user2  category2 
```

Excel 和任何其他报告平台都可以将此数据转换为所需的格式 - 例如

```
user   category1  category2  category3
user1  x          x
user2  x                     x 
```

# javascript - 提供应用程序名称时未激活 AngularJS 解析器

> ID：10679727
> 
> 赞同：4
> 
> 时间：2012-05-21T05:03:13.743
> 
> 标签：javascript, html, angularjs

使用 AngularJS，以下 html 代码打印 {{1+1}} 而不是 2

```
<!doctype html>
<html lang="en" ng-app="myApp">
<head>
    <script src="/js/angular.min.js"></script>
</head>
<body>
{{1+1}}
</body>
</html> 
```

如果我像下面这样删除“myApp”，它会正确打印 2。

```
<!doctype html>
<html lang="en" ng-app>
<head>
    <script src="/js/angular.min.js"></script>
</head>
<body>
{{1+1}}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T05:28:41.613

因为您没有指定模块`myApp`，所以它会因错误而爆炸。

打开 Web 检查器控制台以查看它。

```
// adding this will fix it
angular.module('myApp', []); 
```

# jetty - 在 Jetty 独立服务器中配置 JVM 设置

> ID：10679736
> 
> 赞同：6
> 
> 时间：2012-05-21T05:05:17.113
> 
> 标签：jetty

我正在尝试在 CENTOS 中安装独立的 jetty 7.6.3 服务器。我能够使用默认设置成功部署和运行示例应用程序。现在我想增加 JVM 内存，即设置 Xmx 和 Xms 参数。阅读完文档后，我将它们设置在 start.ini 文件中。但是当我启动服务器时，这并没有得到反映。我曾尝试在 start.ini 中使用 --exec 参数，但这会产生一个单独的 VM。我正在使用 java -jar start.jar 来启动服务器

如何在 jetty 独立服务器中配置 JVM 内存 GC 设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:43:32.460

您需要`JAVA_OPTIONS`在`jetty.sh`文件中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T00:25:49.540

转到 $JETTY_HOME/bin/jetty.sh 并更新 JAVA_OPTIONS 参数：

```
JAVA_OPTIONS="-Xms1024m -Xmx1024m -server -XX:+UseConcMarkSweepGC" 
```

我使用了 Jetty 9.2.9 并且更改对我有用。

# android - 你好世界Phonegap Android应用程序未加载

> ID：10679738
> 
> 赞同：1
> 
> 时间：2012-05-21T05:05:47.427
> 
> 标签：android, cordova, dojox.mobile

昨天是我phonegap的第一天。尝试完全按照 wiki 设置。当它尝试运行时，应用程序没有加载到 AVD 设备中，并抛出此消息“不幸的是应用程序已停止”。

以下是我的配置

1.  Eclipse 4.2 朱诺发布
2.  安卓 android-sdk_r18-windows
3.  电话差距尝试了 1.7 和 1.5

接下来的步骤..

1.  创建了项目
2.  将 xml 复制到 res ，将 jar 复制到 lib 文件夹以及 www 文件夹中的 js 文件和 index.html 文件。

我在这里错过了什么吗.. 多次尝试不同的应用程序。请帮忙

问候

哈希克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:18:10.800

实际上你需要创建`libs`文件夹而不是`lib`文件夹，因为最新的 android SDK 是从 r17 更新的。所以只需创建一个 libs 文件夹并将 jar 文件放入其中。然后自动将其添加到构建路径中，您将不会收到此错误....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:34:16.430

他们有 Eclipse 插件来为 PhoneGap Android 生成初始设置。按照这个。无论如何，我建议您在自己设置 helloworld 后添加插件。因为你需要了解发生了什么。无论如何，如果没有任何效果，请使用它。

[http://www.mobiledevelopers.com/](http://www.mobiledevelopersolutions.com/)

# android - 无法将 null 传递给 execute()；android 4.0中AsyncTask的方法

> ID：10679739
> 
> 赞同：16
> 
> 时间：2012-05-21T05:05:47.657
> 
> 标签：android, null, android-asynctask

我正在尝试将空值传递给执行（）；android 4.0 中的 AsyncTask 方法显示错误“该方法 execute(Integer[]) 对于类型不明确”但相同的代码适用于 android 2.2 代码是：

```
public class AllianceAnalysisDemoActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new AsynPageLoader().execute(null);
}

public class AsynPageLoader extends AsyncTask<Integer, Integer, Bitmap> {

    @Override
    protected void onPreExecute() {
        // progressBar.setVisibility(VISIBLE);
    }

    @Override
    protected Bitmap doInBackground(Integer... params) {

        return null;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        if (result != null && result.getHeight() > 0
                && result.getWidth() > 0) {

        }else {

        }
    }

} 
```

}

请帮助我如何传递空值 .execute(null); android 4.0 中的方法

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-21T05:07:12.467

这应该有效：

```
new AsynPageLoader().execute((Integer) null); 
```

# xpages - Xpages 扩展库安装

> ID：10679742
> 
> 赞同：0
> 
> 时间：2012-05-21T05:06:09.057
> 
> 标签：xpages, xpages-extlib

在为 8.5.3 Notes Designer 安装扩展库最新版本后，我只看到标签我看不到标签的图形表示。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:02:04.937

检查您安装的扩展库的更新站点。有一个特定的更新站点，其中包含名为 updateSiteOpenNTF-designer.zip 的 Domino Designer 工具。听起来您可能刚刚安装了 updateSiteOpenNTF.zip 更新站点。

我没有尝试过，但从 -designer 更新站点安装可能只安装所需的其他插件。这将避免您需要卸载扩展库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T06:47:31.450

检查数据库属性，以便在那里检查扩展库。[如何启用 Ext Lib](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_Extension_Library_enablement_ddxl853)

并且还要检查 xpage 的顶部，那里应该定义了 2 个名称空间。[扩展库名称空间](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_Extension_Library_namespace_ddxl853)

# jquery - 播放下一个视频数组为点击添加索引的增量

> ID：10679744
> 
> 赞同：0
> 
> 时间：2012-05-21T05:07:06.567
> 
> 标签：jquery, arrays, html, video

我不确定这是否真的有意义......

对不起，但我不知道该怎么说。问题在于我有一个播放数组功能。功能是

```
$("#myVid").bind("ended", function() {
            $("#MyT").fadeIn(250);
            function playArray(ele, array) {
                index++;
                if (index >= array.length) {
                    index = i;
                }
                ele.src = array[index];
                ele.load();
                ele.play();
            }
            playArray(document.getElementById("myVid"), videos); 
```

基本上，当正在播放的视频结束时，它会播放数组中的下一个视频。这个想法是您可以使用`<li>`标签的应用程序播放阵列中的任何视频。工作正常。

除非这是您第二次点击。此时，点击“堆叠”，所以不是播放下一个视频，而是在下一个视频之后播放。我怎样才能解决这个问题？

编辑：好的，这是js

```
$(window).load(function(){
        var index = 0;
        var videos = ['images/Answer1b.m4v', 'images/Answer2b.m4v', 'images/Answer3b.m4v', 'images/Answer4b.m4v', 'images/Answer5b.m4v', 'images/Answer6b.m4v'];
        $("#MyT").fadeOut();
$("li, .thumbs").bind("touchstart click", function() {
        $("#bigPic").removeClass("move");
        $("#MyT").fadeIn(0);
        });

$('li', '.thumbs').on('touchend click', function() {
    index = $(this).index();
    var myVideo = document.getElementById('myVid');
        myVideo.src = videos[index];
        myVideo.load();
        myVideo.play();

        $("#myVid").bind("loadeddata", function() {
        $("#bigPic").addClass("move");
        $("#MyT").fadeOut(750);
        });

    $("#myVid").bind("playing", function() {
        ("#bigPic").removeClass("move");
        $("#MyT").fadeOut(750);
        });

        $("#myVid").bind("ended", function() {
            $("#bigPic").removeClass("move");
            $("#MyT").fadeIn(250);
            function playArray(ele, array) {
                index++;
                if (index   >= array.length) {
                    index = 1;
                }
                ele.src = array[index];
                ele.load();
                ele.play();
            }
            playArray(document.getElementById("myVid"), videos);
        });
    });
    video.on("timeupdate", function() {
        var currentPos = myVid.currentTime;
        var maxduration = myVid.duration;
        var perc = 100 * currentPos / maxduration;
        $(".timeBar").css("width",perc+"%");    
    });
    var updatebar = function(x) {
        var progress = $(".progress");
        var maxduration = myVid.duration;
        var percentage = 100 * position / progress.width();
        if(percentage > 100) {
            percentage = 100;}
        if(percentage < 0) {
            percentage = 0;}
        $(".timeBar").css("width",percentage+"%");  
        myVid.currentTime = maxduration * percentage / 100;
    };
}); 
```

我在两次点击（`touchstart`和`touchend`）中绑定了一些东西，因为如果不这样设置它们就会干扰......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:00:27.250

继续我最初的评论：

有点击时，索引值减1

尝试在你的 jquery $(document).ready 函数中添加这个：

```
/*Target you play button click function here*/
$("#play-button").click(function(){
    index--;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:21:32.703

通过使用两种不同的播放功能解决了这个问题。

单击时会调用一个

```
$('li', '.thumbs').bind('touchend click', function() {
        $("#myVid").bind("loadeddata", function() {
        $("#bigPic").addClass("move");
        $("#MyT").fadeOut(750);
                });
        playVideo2( $(this).index() );
        }); 
```

另一个在视频结束时

```
$("#myVid").bind("ended", function() {
    //stuff happens
 playVideo( (currentVideo + 1) % videos.length );
        }); 
```

除了索引之外，这两个函数是相同的

```
function playVideo(videoNumToPlay) {
            var myVideo = document.getElementById('myVid');
             myVideo.src = videos[videoNumToPlay];
             myVideo.load();
             myVideo.play();
             currentVideo = videoNumToPlay;
        }

        function playVideo2(index) {
            var myVideo = document.getElementById('myVid');
             myVideo.src = videos[index];
             myVideo.load();
             myVideo.play();
             currentVideo = index;
        } 
```

哦，而且数组是`document.ready`在click下而不是下设置的，像这样

```
var videos = ['images/intro01.m4v', 'images/intro02.m4v', 'images/intro3.m4v', 'images/talking1.m4v', 'images/chord.m4v', 'images/dizzy.mp4'],
        currentVideo; 
```

# php - 扩展异常类和日志/电子邮件

> ID：10679751
> 
> 赞同：0
> 
> 时间：2012-05-21T05:08:47.203
> 
> 标签：php, exception-handling

我正在尝试扩展异常类，以便在传递指定错误代码时记录和发送电子邮件-我希望抛出的所有错误都属于自定义异常类型以进行诊断-我遇到的问题是如何解决当电子邮件或记录器类因任何原因失败时

我想我需要在电子邮件或记录器类的情况下恢复为默认异常，而对于其他所有情况，将使用自定义异常

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:35:24.917

> 我遇到的问题是当电子邮件或记录器类因任何原因失败时如何解决

将邮件/日志尝试包装在 try-catch 块中。

```
try{
    myExceptionClass::logException( $customException );
    myExceptionClass::emailNotification( $adminEmail );
}catch( Exception $e ){
    exit( "dangit" );
} 
```

理想情况下，您的错误处理永远不会允许这种情况实际发生，因此您应该能够将其视为“边缘情况”。我假设您仍然允许服务器记录您的 PHP 错误，因此您仍然可以使用一些东西来查找此类问题。

# javascript - 在 Javascript 中，您如何检测浏览器窗口何时在视图中？

> ID：10679755
> 
> 赞同：2
> 
> 时间：2012-05-21T05:09:48.353
> 
> 标签：javascript, cross-browser, window

我意识到您可以使用以下方法轻松检查焦点：

```
var hasFocus = true;
$(window).blur(function(){
    hasFocus = false;
});
$(window).focus(function(){
    hasFocus = true;
}); 
```

但是，这仍然等于 false，例如，当用户在另一个应用程序的第一个屏幕上工作时，在第二个屏幕上打开了浏览器窗口。

这是用于报告实时数据的实时应用程序，当用户将应用程序放在选项卡中或最小化时，我不想进行长时间轮询，但我确实想在窗口显示时运行轮询（即使它没有聚焦）。

有没有办法检查窗口是否是视图？（最好在较旧的浏览器中工作？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:47:47.303

```
var hasFocus = true;
$(window)
.focus(function(eventObject){
    eventObject.stopPropagation();
    hasFocus = true;
})
.blur(function(eventObject){
     eventObject.stopPropagation();
     hasFocus = false;
 }); 
```

# d - 负实数的指数

> ID：10679756
> 
> 赞同：3
> 
> 时间：2012-05-21T05:09:56.373
> 
> 标签：d, exponentiation, real-datatype

有人可以解释为什么我在第一种情况下得到积极的结果，而在第二种情况下得到否定的结果。

```
auto r1 = -3.0L;
auto r2 = 2.0L;
writeln(typeid(r1)); // real 
writeln(typeid(r2)); // real 
writeln(typeid(r1 ^^ r2)); // real
writeln(r1 ^^ r2); // 9

writeln(typeid(-3.0L)); // real
writeln(typeid(2.0L)); // real
writeln(typeid(-3.0L ^^ 2.0L)); // real
writeln(-3.0L ^^ 2.0L);  // -9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T05:43:07.950

免责声明：我不知道 D。这是在我的背景下使用其他语言编写的。

当您平方一个负（实）数时，该数变为正数。您正在编写模棱两可的（对人类而言）表达式：

```
-3^2 
```

这可能意味着：

*   `-(3^2) = -9`或者
*   `(-3)^2 = 9`

从输出来看，我假设编程语言的运算符优先级是第一个。尝试将最后一行替换为：

```
writeln((-3.0L) ^^ 2.0L);  // -9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T17:46:40.137

上面的来源没有错。更好的是，旧的 FORTRAN 具有最高优先级的电源运算符（参见[http://h21007.www2.hp.com/portal/download/files/unprot/fortran/docs/lrm/lrm0067.htm](http://h21007.www2.hp.com/portal/download/files/unprot/fortran/docs/lrm/lrm0067.htm)示例）。因此，在几乎所有*具有*幂运算符的现代编程语言中，表达式`-3^2`将被计算为`-(3^2)`.

即使在数学表达式中，此规则也是相同的：[http ://en.wikipedia.org/wiki/Order_of_operations#Exceptions_to_the_standard](http://en.wikipedia.org/wiki/Order_of_operations#Exceptions_to_the_standard)

# ruby-on-rails - rails radio_button 和 label 在两条不同的行中

> ID：10679759
> 
> 赞同：2
> 
> 时间：2012-05-21T05:10:07.093
> 
> 标签：ruby-on-rails, css, radio-button

我对 CSS 很陌生。

我的应用中有单选按钮

```
<%= f.radio_button :gender, true %> <%= f.label :gender, "Male" %>        
<%= f.radio_button :gender, false%> <%= f.label :gender, "Female" %> 
```

但是页面在两行中显示单选按钮和标签，例如

```
O
Male
O
Female 
```

我怎样才能使它在同一行？像

```
 O Male
  O Female 
```

谢谢

和

```
input[type="radio"], label{
     float:left;
}
label{
 clear:left;
} 
```

页面看起来像

```
O
Male O
Female 
```

试了几个不同的浏览器，都一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T05:12:28.123

在你的 CSS 中这样写：

```
input[type="radio"], label{
 display:inline-block;
 *display:inline/*For IE7*/
 *zoom:1;
} 
```

**更新**

像这样写：

```
input[type="radio"], label{
     float:left;
    }
input{
 clear:left;
} 
```

检查这个[http://jsfiddle.net/nuyqd/](http://jsfiddle.net/nuyqd/)

# python - Biopython本地BLAST数据库错误

> ID：10679760
> 
> 赞同：3
> 
> 时间：2012-05-21T05:10:23.697
> 
> 标签：python, database, path, biopython, blast

我正在尝试使用 Biopython 的 NcbiblastxCommandline 工具使用“nr”数据库在本地运行 blastx，但我总是收到有关蛋白质数据库搜索路径的以下错误：

```
>>> from Bio.Blast.Applications import NcbiblastxCommandline
>>> nr = "/Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr.pal"
>>> infile = "/Users/Priya/Documents/Python/Tutorials/opuntia.txt"
>>> blastx = "/Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/blastx"
>>> outfile = "/Users/Priya/Documents/Python/Tutorials/opuntia_python_local.xml"
>>> blastx_cline = NcbiblastxCommandline(blastx, query = infile, db = nr, evalue = 0.001, out = outfile)
>>> stdout, stderr = blastx_cline()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File     "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/Application/__init__.py", line 443, in __call__
stdout_str, stderr_str)
Bio.Application.ApplicationError: Command '/Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/blastx -out /Users/Priya/Documents/Python/Tutorials/opuntia_python_local.xml -query /Users/Priya/Documents/Python/Tutorials/opuntia.txt -db /Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr.pal -evalue 0.001' returned non-zero exit status 2, 'BLAST Database error: No alias or index file found for protein database [/Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr.pal] in search path [/Users/Priya::]' 
```

我不确定如何更改路径以指向我下载的 nr 数据库，但我认为我正确地指出了它，因为我可以从命令行运行此代码而没有任何问题：

```
Priyas-iMac:~ Priya$ /Users/priya/Documents/Python/ncbi-blast-2.2.26+/bin/blastx -query /Users/priya/Documents/Python/Tutorials/opuntia.txt -db /Users/priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr -out /Users/priya/Documents/Python/Tutorials/opuntia_local.xml -evalue 0.001 -outfmt 5 
```

如我所料，上面的命令行代码创建了爆炸结果的 xml 文件。

任何使用 Biopython NCBI 命令行工具解决此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T05:36:23.327

您的`nr`变量以`nr.pal`. `nr`（没有`.pal`）应该没问题。如果删除`pal`不起作用。`.ncbirc`您可以尝试在您的主目录中设置一个文件，该文件具有以下内容：

```
[BLAST]
BLASTDB=/directory/path/to/blast/databases 
```

它基本上为爆炸数据库查找设置了一个环境变量。之后，您可以在变量中简单地使用`nr`（不需要路径） 。`nr`

顺便说一句，您可以检查`NcbiblastxCommandline`使用`print blastx_cline`. 我的猜测是它与您手动输入的不同。

编辑：查看[http://www.biostars.org/](http://www.biostars.org/)以了解类似于 StackExchange 格式的特定于生物信息学的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:31:30.863

似乎有效的命令列出了与从代码示例中调用的数据库不同的数据库：

```
# In the code
-db /Users/Priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr.pal 
```

对比

```
# From the command line
-db /Users/priya/Documents/Python/ncbi-blast-2.2.26+/bin/nr 
```

尝试在第 2 行中将该路径的分配更改为 nr，以便它反映您在命令行中使用的不带“.pal”的路径。

# javascript - 如何比较两个 HTML 元素

> ID：10679762
> 
> 赞同：31
> 
> 时间：2012-05-21T05:10:28.703
> 
> 标签：javascript, jquery, html

我们如何比较两个 HTML 元素是否相同？

我试过这个东西，但没有运气

```
<div class="a"> Hi this is sachin tendulkar </div>
<div class="a"> Hi this is sachin tendulkar </div> 
```

然后在按钮单击时，我调用一个函数 check()

```
var divs = $(".a");
alert(divs.length);    // Shows 2 here which is correct
if (divs.get(0) == divs.get(1)) alert("Same"); 
```

但这不起作用。两个 div 中的一切都是一样的。除此之外，我们如何比较两个 HTML 元素是否完全相同。包括它们的innerHTML、className、Id 和它们的属性。

这是可行的吗？

实际上，我有两个 HTML 文档，我想从它们中删除相同的内容所以两个元素可以有相同的 id。

PS：在克劳德的宝贵意见后更新。如果我们将两个元素作为字符串进行比较，我们将不会得到匹配，因为它们的属性顺序可能会有所不同所以唯一的选择是遍历每个子属性并进行匹配。我仍然必须弄清楚完全可行的实施策略。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-10-13T06:37:24.263

您可以使用：

```
element1.isEqualNode(element2); 
```

在您的具体示例中：

```
var divs = $(".a");
if ( divs.get(0).isEqualNode(divs.get(1)) ) alert("Same"); 
```

[DOM Level 3 Core Spec](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isEqualNode)包含所有细节。本质上，这将返回 true 的两个节点具有匹配的属性、后代和后代的属性。

有一个类似的 .isSameNode() 仅当两个元素是同一个节点时才返回 true。在您的示例中，这些不是相同的节点，但它们是相等的节点。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-21T05:16:30.833

### 更新

请参阅[Keen 的回答](https://stackoverflow.com/a/19342581/157247)以及[ccproj 对密切相关问题的回答](https://stackoverflow.com/a/56687078/157247)。有[`isEqualNode`](https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isEqualNode)这个，但它比较`class`和`style`属性作为文本，所以同一组类或不同顺序的同一组样式属性会使其认为节点不等效。[ccprog 的答案](https://stackoverflow.com/a/56687078/157247)可以解决这个问题。

### 原始答案

*（请参阅下面的完整的、大部分未经测试的、当然未经重构的现成解决方案。但首先，它的点点滴滴。）*

比较它们`innerHTML`很容易：

```
if (divs[0].innerHTML === divs[1].innerHTML)
// or if you prefer using jQuery
if (divs.html() === $(divs[1]).html()) // The first one will just be the HTML from div 0 
```

...尽管根据您的标准，您必须问自己这两个元素是否等效：

```
<div><span class="foo" data-x="bar">x</span></div>
<div><span data-x="bar" class="foo">x</span></div> 
```

...因为它们`innerHTML`会有所*不同*（至少在 Chrome 上，我怀疑在大多数（如果不是所有）浏览器上）。（更多内容如下。）

然后你需要比较它们的所有属性。据我所知，jQuery 没有提供枚举属性的方法，但 DOM 提供了：

```
function getAttributeNames(node) {
  var index, rv, attrs;

  rv = [];
  attrs = node.attributes;
  for (index = 0; index < attrs.length; ++index) {
    rv.push(attrs[index].nodeName);
  }
  rv.sort();
  return rv;
} 
```

然后

```
var names = [getAttributeNames(div[0]), getAttributeNames(div[1])];
if (names[0].length === names[1].length) {
    // Same number, loop through and compare names and values
    ...
} 
```

请注意，通过对上面的数组进行排序，我假设它们的属性顺序在您对“等效”的定义中并不重要。我希望是这样，因为它似乎没有被保留，因为我在运行[这个测试](http://jsbin.com/agukag)时从不同的浏览器得到不同的结果。既然如此，我们就必须回到`innerHTML`问题上来，因为如果元素本身的属性顺序不重要，那么推测后代元素上的属性顺序应该不重要。如果*是*这种情况，您将需要一个递归函数来根据您对等价物的定义检查后代，并且根本不使用`innerHTML`。

然后是[这个后续问题](https://stackoverflow.com/questions/56681649/compare-two-html-elements-where-order-of-style-properties-is-irrelevant)引起的关注：如果元素具有不同但等效的`style`属性怎么办？例如：

```
<div id="a" style="color: red; font-size: 28px">TEST A</div>
<div id="b" style="font-size: 28px; color: red">TEST B</div> 
```

[我的回答](https://stackoverflow.com/a/56682067/157247)通过遍历元素`style`对象的内容来解决它，如下所示：

```
const astyle = div[0].style;
const bstyle = div[1].style;
const rexDigitsOnly = /^\d+$/;
for (const key of Object.keys(astyle)) {
    if (!rexDigitsOnly.test(key) && astyle[key] !== bstyle[key]) {
        // Not equivalent, stop
    }
}
// Equivalent 
```

可悲的是，正如我在那个答案中所说：

> *请注意，如果（其中一个 has`color: red`和另一个 has `color: #ff0000`）*，至少在某些浏览器上，上述操作将失败，因为当样式属性使用字符串值时，通常您会以提供的方式获取值，而不是标准化。您可以使用`getComputedStyle`来获取计算的（ish）值，但随后我们会遇到有关 CSS 适用性的问题：具有**完全相同**标记的两个元素可能具有不同的值，`getComputedStyle`因为它们在 DOM 中的位置以及应用于它们的 CSS结果。并且`getComputedStyle`不适用于不在文档中的节点，因此您不能仅克隆节点以解决该问题。

但是您应该能够将上面的部分组合在一起，以根据您的标准比较两个元素。

更多探索：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

这个问题让我很感兴趣，所以我踢了一会儿，想出了以下问题。它大多未经测试，可以使用一些重构等，但它应该能让你大部分时间到达那里。我再次假设属性的顺序并不重要。以下假设即使文本中最细微的差异*也很*重要。

```
function getAttributeNames(node) {
  var index, rv, attrs;

  rv = [];
  attrs = node.attributes;
  for (index = 0; index < attrs.length; ++index) {
    rv.push(attrs[index].nodeName);
  }
  rv.sort();
  return rv;
}

function equivElms(elm1, elm2) {
  var attrs1, attrs2, name, node1, node2;

  // Compare attributes without order sensitivity
  attrs1 = getAttributeNames(elm1);
  attrs2 = getAttributeNames(elm2);
  if (attrs1.join(",") !== attrs2.join(",")) {
    display("Found nodes with different sets of attributes; not equiv");
    return false;
  }

  // ...and values
  // unless you want to compare DOM0 event handlers
  // (onclick="...")
  for (index = 0; index < attrs1.length; ++index) {
    name = attrs1[index];
    if (elm1.getAttribute(name) !== elm2.getAttribute(name)) {
      display("Found nodes with mis-matched values for attribute '" + name + "'; not equiv");
      return false;
    }
  }

  // Walk the children
  for (node1 = elm1.firstChild, node2 = elm2.firstChild;
       node1 && node2;
       node1 = node1.nextSibling, node2 = node2.nextSibling) {
     if (node1.nodeType !== node2.nodeType) {
       display("Found nodes of different types; not equiv");
       return false;
     }
     if (node1.nodeType === 1) { // Element
       if (!equivElms(node1, node2)) {
         return false;
       }
     }
     else if (node1.nodeValue !== node2.nodeValue) {
       display("Found nodes with mis-matched nodeValues; not equiv");
       return false;
     }
  }
  if (node1 || node2) {
    // One of the elements had more nodes than the other
    display("Found more children of one element than the other; not equivalent");
    return false;
  }

  // Seem the same
  return true;
} 
```

活生生的例子：

*   [等效的 div](http://jsbin.com/osapir)
*   [属性值差异](http://jsbin.com/osapir/2)
*   [属性差异](http://jsbin.com/osapir/3)
*   [文字差异](http://jsbin.com/osapir/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T05:21:14.677

为什么不做简单的方法呢？

```
<div id="div1"><div class="a"> Hi this is sachin tendulkar </div></div>
<div id="div2"><div class="a"> Hi this is sachin tendulkar </div></div>

if($('#div1').html() == $('#div2').html())
    alert('div1 & div2 are the same');        
else
    alert('div1 & div2 are different'); 
```

[http://jsfiddle.net/5Zwy8/1/](http://jsfiddle.net/5Zwy8/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T05:22:06.890

这是怎么编码的？

```
var d1 = document.createElement("div");
d1.appendChild(divs.get(0));
var d2 = document.createElement("div");
d2.appendChild(divs.get(1));
if (d1.innerHTML == d2.innerHTML) ? 
```

# spring - Spring Security 2.0 到 Spring Security 3.0

> ID：10679763
> 
> 赞同：0
> 
> 时间：2012-05-21T05:10:31.660
> 
> 标签：spring, spring-security

我正在将我的应用程序从升级`spring security 2.0`到`spring security 3.0`.

有很多变化`spring security 3.0`。

我毫不费力地进行了一些迁移，但有些麻烦，例如 custom-authentication-provider 等。

可以分享一些迁移的步骤或细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:20:13.847

您是否看过[这篇](http://www.packtpub.com/article/migration-to-spring-security-3)解决一些常见迁移问题的文章？

Spring Security站点还推荐阅读[Spring Security Book](http://www.springsecuritybook.com/)。第 13 章，迁移到 Spring Security 3 涵​​盖了所有配置更改，并且可能包含您正在寻找的信息。

另请参阅有关 SO 的相关问题[。](https://stackoverflow.com/questions/8543229/migrating-from-spring-security-2-0-to-spring-security-3-0-7)

# iphone - Wikipedia JSON API 检索没有链接的页面内容

> ID：10679768
> 
> 赞同：1
> 
> 时间：2012-05-21T05:11:19.657
> 
> 标签：iphone, objective-c, xml, json, wikipedia-api

我正在使用 Wikipedia JSON API，例如，我可以在没有链接的情况下检索页面内容，

```
https://en.wikipedia.org/w/api.php?action=query&format=json&titles=May_21&prop=revisions&rvprop=content&rvsection=1 
```

例如：

```
[[293]] &ndash; Roman Emperors [[Diocletian]] and [[Maximian]] appoint [[Galerius]] as [[Caesar (title)|''Caesar'']] to Diocletian, beginning the period of four rulers known as the [[Tetrarchy]]. 
```

替换`&ndash`为`-`

`[[Caesar (title)|''Caesar'']]`应该`Caesar`

我正在使用 Objective-C

如何检索相同的页面内容，但没有链接字符？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:52:51.163

使用 HTML 到文本转换器（例如[链接](http://www.jikos.cz/~mikulas/links/)或一些浏览器模拟器，例如[PhantomJS](http://phantomjs.org/)）。比将 wikitext 转换为文本要少得多，在这种情况下，您将不得不处理模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T15:14:15.070

那应该是:-)

```
NSString * stringToParse = @"{\"query\":{\"normalized\":[{\"from\":\"May_21\",\"to\":\"May 21\"}],\"pages\":{\"19684\":{\"pageid\":19684,\"ns\":0,\"title\":\"May 21\",\"revisions\":[{\"*\":\"==Events==\\n* [[293]] &ndash; Roman Emperors [[Diocletian]] and [[Maximian]] appoint [[Galerius]] as [[Caesar (title)|''Caesar'']] to Diocletian, beginning the period of four rulers known as the [[Tetrarchy]].\\n* [[878]] &ndash; [[Syracuse, Italy]], is [[Muslim conquest of Sicily|captured]] by the ...";

//Replace &ndash with -
stringToParse = [stringToParse stringByReplacingOccurrencesOfString:@"&ndash" withString:@"-"];

//[[Caesar (title)|''Caesar'']] Should be Caesar
//and [[Maximian]] should be Maximian
//same for [[1972]] -> 1972
NSString *regexToReplaceWikiLinks = @"\\[\\[([A-Za-z0-9_ ()]+?\\|)?(\\'\\')?(.+?)(\\'\\')?\\]\\]";

NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexToReplaceWikiLinks
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];

// attention, the found expression is replacex with the third parenthesis
NSString *modifiedString = [regex stringByReplacingMatchesInString:stringToParse
                                                           options:0
                                                             range:NSMakeRange(0, [stringToParse length])
                                                      withTemplate:@"$3"];

NSLog(@"%@", modifiedString); 
```

结果是：

```
{"query":{"normalized":[{"from":"May_21","to":"May 21"}],"pages":{"19684":{"pageid":19684,"ns":0,"title":"May 21","revisions":[{"*":"==Events==\n* 293 -; Roman Emperors Diocletian and Maximian appoint Galerius as Caesar to Diocletian, beginning the period of four rulers known as the Tetrarchy.\n* 878 -; Syracuse, Italy, is captured by the ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:40:06.627

[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)是解决这个问题的方法；这是一个使用 JavaScript 的示例（但您可以将相同的解决方案应用于任何具有正则表达式的语言）；

```
<dl>
    <script type="text/javascript">

        var source = "[[293]] &ndash; Roman Emperors [[Diocletian]] and [[Maximian]] appoint [[Galerius]] as [[Caesar (title)|''Caesar'']] to Diocletian, beginning the period of four rulers known as the [[Tetrarchy]].";

        document.writeln('<dt> Original </dt>');
        document.writeln('<dd>' + source + '</dd>');

        // Replace links with any found titles
        var matchTitles = /\[\[([^\]]+?)\|\'\'(.+?)\'\']\]/ig; /* <- Answer */
        source = source.replace(matchTitles, '$2');

        document.writeln('<dt> First Pass </dt>');
        document.writeln('<dd style="color: green;">' + source + '</dd>');

        // Replace links with contents
        var matchLinks = /\[\[(.+?)\]\]/ig;
        source = source.replace(matchLinks, '$1');

        document.writeln('<dt> Second Pass </dt>');
        document.writeln('<dd>' + source + '</dd>');
    </script>
</dl> 
```

你也可以在这里看到这个工作：http: [//jsfiddle.net/NujmB/](http://jsfiddle.net/NujmB/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T15:49:20.480

*我不知道目标 C，但这是我用于相同目的的 javascript 代码*
（它可以作为您的伪代码并帮助 javascript 中的其他用户）

```
 var url = 'http://en.wikipedia.org/w/api.php?callback=?&action=parse&page=facebook&prop=text&format=json&section=0';
     // Section = 0 for taking first section of wiki page i.e. introduction only     
            $.getJSON(url,function(response){
                // Taking only the first paragraph from introduction
                var intro = $(response.parse.text['*']).filter('p:eq(0)').html();
                var wikiBox = $('#wikipediaBox .wikipedia div.overview');
                wikiBox.empty().html(intro);
                // Converting relative links into absolute ones and links into outer links
                wikiBox.find("a:not(.references a)").attr("href", function(){ return "http://www.wikipedia.org" + $(this).attr("href");});
                wikiBox.find("a").attr("target", "_blank");
                // Removing edits markers
                wikiBox.find('sup.reference').remove(); 
            }); 
```

# asp.net - 从 DB2 上传和检索图像

> ID：10679769
> 
> 赞同：0
> 
> 时间：2012-05-21T05:11:32.007
> 
> 标签：asp.net, image, gridview, db2

H！我正在尝试在 DB2 数据库中上传图像。图像大小为 JPG（6.76 kb - 6924 字节）。

数据库表有一个长度为 1048576 的 BLOB 字段。

我插入图像的代码如下：

```
If fileup.PostedFile IsNot Nothing AndAlso fileup.PostedFile.FileName <> "" Then
   Dim imagesize As Byte() = New Byte(fileup.PostedFile.ContentLength - 1) {}
   Dim uploadedimage1 As HttpPostedFile = fileup.PostedFile

   uploadedimage1.InputStream.Read(imagesize, 0, CInt(fileup.PostedFile.ContentLength))

   Dim uploadedimage2 As New OleDbParameter("@Image", OleDbType.VarBinary, imagesize.Length)
   uploadedimage2.Value = imagesize

   Dim cmd As New OleDbCommand()
   cmd.CommandText = "INSERT INTO xxx_TBL(x, IMAGE)  VALUES (?, ?)"
   cmd.Parameters.Add(x)
   cmd.Parameters.Add(uploadedimage2)

   cmd.Connection = clsDatabase.Open_DB()
   Dim result As Integer = cmd.ExecuteNonQuery()
   If result > 0 Then
      Return True 
```

图像被插入到数据库中。

从数据库中获取图片到DataTable中，然后绑定到GridView上显示在网页上的代码如下：

```
Dim cmd As New OleDbCommand()

cmd.CommandText = "SELECT x, IMAGE FROM xxx_TBL WHERE y = 1" 

cmd.Connection = clsDatabase.Open_DB()
Dim dReader As OleDbDataReader
dReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)

Dim dt As New DataTable
dt.Columns.Add(New DataColumn("Comments", GetType(String)))
dt.Columns.Add(New DataColumn("Picture", GetType(Bitmap)))

Do While (dReader.Read())
   Dim dr As DataRow = dt.NewRow()

   dr("Comments") = dReader(0).ToString
   Dim imageobj = dReader(1)
       Using ms As New System.IO.MemoryStream
            Dim bm As Bitmap
            Dim bytearray = DirectCast(imageobj, Byte())
            ms.Write(bytearray, 0, bytearray.length)
            bm = New Bitmap(ms)
            dr("Picture") = bm
       End Using

    dt.Rows.Add(dr)
Loop

GridView1.DataSource = dt
GridView1.DataBind() 
```

x 来自数据库的罚款，并显示。但是，我没有得到图片 - 只是一个小的“缺少图片（白底红十字）图标”。

检查数据库时，BLOB 字段中图像的长度为 8192。但是，将其复制到“TEST”文件（无扩展名）时，大小为 13848 字节。我猜这可能是因为 DB2 读取/编码图像二进制文件的方式，但我不确定。有人可以强调错误的可能原因吗？关于使这项工作或调试的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:57:38.833

我对 DB2 不熟悉，但是由于您能够显示`comments`，因此您`image`应该可以正确阅读。假设您的`image`数据也被正确存储，您的代码不会在浏览器中显示它们，因为它们需要一点不同的照顾`comments`。每个图像都需要是对服务器的附加 HTTP 请求，因此您必须创建这些`<img src=myImg.png>`标签来代替图像持有者。

在您的`dt`中，您不需要实际的图像数据，只需要图像的 ID，因为您需要使用 a`HttpHandler`来检索图像，然后流式传输到浏览器。

首先，您需要`<img>`在 GivdView1 的图像列中添加一个标签。

然后，在数据绑定过程中，一定要更新为`<img src="MyHttpHandler.ashx?id=1"/>`，当然，ID 值必须是动态的。

现在，将一个新文件添加`Generic Handler`到您的 Visual Studio 项目中，并为其命名`MyHttpHandler.ashx`并编写如下代码：

```
public class MyHttpHandler : IHttpHandler
{    
    public void ProcessRequest(HttpContext context)
    {
        string sid = context.Request.QueryString["id"];
        int id = -1;
        if(int.TryParse(sid, out id) && id > 0){
            cmd.CommandText = "SELECT IMAGE FROM xxx_TBL WHERE ID=" + id.ToString() + ";";
            byte[] img = dr["IMAGE"];
            context.Response.ContentType = "image/png";
            context.Response.BinaryWrite(img);
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

现在，在 gridview 呈现 html 之后，浏览器将对所有这些图像发出 HTTP 请求，并且您`MyHttpHandler.ashx`将流回每个图像以供浏览器显示。

# android - 获得 sd 卡的写权限

> ID：10679770
> 
> 赞同：2
> 
> 时间：2012-05-21T05:11:34.507
> 
> 标签：android, eclipse, permissions, android-emulator

我无法在模拟器上安装我的 sd 卡，它只为我提供了 sd 卡的读取选项，如下所示：

![在此处输入图像描述](../Images/365001ad29a9315e4aafa19630f6a4b8.png)

如何获得虚拟 sd 卡的写权限，以便我能够将一些媒体推送到 sd 卡上以测试我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:15:49.793

打开外壳。打开提示符，输入：

```
adb shell 
```

然后，使用 rw 权限重新安装您的 sdcard。

```
mount -o remount rw /sdcard 
```

**编辑**

没有权限的sdcard：

![在此处输入图像描述](../Images/8e248c21229b988600c01470a433feeb.png)

打开外壳：

![在此处输入图像描述](../Images/0a81f416fdf54022a093c7c69d37b8e0.png)

权限变更：

![在此处输入图像描述](../Images/50b52a97e92fa3e594b1f716906fbb11.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:17:01.610

确保您可以通过以下方式为模拟器创建`size`SDCard

`SD Card`- 标签，并且您已在- 标签`SD Card Support`下添加到您的设备`Hardware`

![在此处输入图像描述](../Images/ed7f44e422bdd69ff15a29fd96c11fb3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:07:26.827

avd 中小于 1024 MB 的 sdcard 大小 -> 编辑然后保存然后运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T05:31:27.650

使用您的 AVD 管理器并指定 AVD 目标在虚拟化上具有 sd 卡。此外，谷歌将模拟卡限制为 50Mb，至少他们曾经这样做过。所以只需打开 Eclipse，从菜单栏中调出您的 AVD 管理器并编辑目标 AVD 仿真以安装卡，然后在您的 android 清单文件中输入写入权限以获得权限，从那里应该可以正常工作。

# visual-studio-2008 - 将 localhost 更改为另一个域名

> ID：10679772
> 
> 赞同：4
> 
> 时间：2012-05-21T05:11:50.107
> 
> 标签：visual-studio-2008

例如，我想将 Visual Studio 中的 localhost 名称更改为我自己的名称`jeson.com`

我搜索并找到一些主题[1](https://stackoverflow.com/questions/5810528/visual-studio-2010-change-localhost-to-custom-domain) [2](https://stackoverflow.com/questions/4270516/change-localhost-domain-when-running-locally) 我将主机文件更改为

> 127.0.0.1 jeson.com
> ::1 jeson.com

但是，这种方法对我不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T05:16:05.393

`IIS -> Create Site`

`Binding -> jeson.com`

`Project -> properties -> Web -> Use Local IIS server -> ProjectUrl: http://jeson.com`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:15:39.497

只需将其添加到主机文件的底部：

```
 127.0.0.1     jeson.com 
```

省略：

```
::1 jeson.com 
```

如果它不起作用，请尝试重新启动 httpd

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T12:54:50.043

将您的本地主机名称更改为域名。转到此路径。
`File Path-> C:\WINDOWS\system32\drivers\etc`
这是主机文件
`127.0.0.1 localhost loopback`
`::1 localhost`
`127.0.0.1 localhost`
`127.0.0.1 facebooktest.com`
重新启动服务器的示例。 [阅读此内容](http://www.gkdreamz.com/apache-server/how-to-change-your-default-locahost-name-in-hosts-file/)

# eclipse - Atpana 3 - 如何切换项目的当前遥控器？

> ID：10679777
> 
> 赞同：0
> 
> 时间：2012-05-21T05:13:07.683
> 
> 标签：eclipse, ide, aptana, aptana3

我正在将 Atpana 3 用于同时具有开发和实时服务器的项目，我希望能够将两者都设置为远程，然后能够切换哪个用于该项目。它们都在遥控器视图中设置为遥控器，但是当我转到下拉列表时仅包含我最初设置项目`Project -> Properties -> File Transfer`的`connection`遥控器 - 如何将另一个添加到此列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T01:07:19.267

使用第一台服务器设置项目后，您可以右键单击项目并选择**Publish** (或**Deploy** ) -> **Connections** -> **Add New Connection...**然后在连接管理器对话框中，选择第二台服务器作为目的地，然后单击确定。现在该项目将设置为连接到两台服务器。

之后，如果您转到项目 -> 属性 -> 文件传输，您应该会在组合框中看到两台服务器，如果未选中**使用默认连接**，则会弹出一个窗口，询问每次上传时使用哪个服务器或执行同步；检查它使操作始终使用选定的服务器。

希望这可以帮助。

# iphone - 处理两个警报视图

> ID：10679782
> 
> 赞同：2
> 
> 时间：2012-05-21T05:14:30.120
> 
> 标签：iphone, ios

我正在申请

1）我显示一个警报视图以接受或拒绝呼叫....

2) 但是，如果呼叫被呼叫者本身取消，则会显示一个警报，说明呼叫被呼叫者取消。

我的问题是，如果在我接受之前取消呼叫，警报视图会堆叠，并且在警报视图（2）附近我仍然可以看到警报视图（1），因为我的要求是直接在更接近任何警报视图。

我已经创建了一种生成警报视图的方法我给警报视图提供了差异标签

> -(void)generateMessage:(const char*)msg Title:(const char*)title withAcceptButton:(bool)doAddAcceptButton Tag:(int)tag{
> 
> dispatch_async(dispatch_get_main_queue(), ^{
> 
> ```
>  // We are now back on the main thread
>                  UIAlertView *alertView = [[UIAlertView alloc] >init];
>                 //add button
> 
>                  if(doAddAcceptButton==true)
>                  {
>                      [alertView  addButtonWithTitle:@"OK"];
>                      [alertView addButtonWithTitle:@"Cancel"];
>                      alertView.cancelButtonIndex=1;
> 
>                  }
>                  else {
>                      [alertView  addButtonWithTitle:@"OK"];
>                      alertView.cancelButtonIndex=0;
>                  }
> 
>                  //add tag
>                  [alertView setTag:tag];
> 
>                  //add title
>                  if(title==NULL)
>                  {
>                      [alertView setTitle:@"MESSAGE"];
>                  }
>                  else {
>                      NSMutableString *head = [[NSMutableString >alloc] initWithCString:title
>                                                                              >encoding:NSUTF8StringEncoding];
>                      [alertView setTitle:head];
>                      [head release];
>                  }
> 
>                  if(msg==NULL)
>                  {
>                      [alertView setMessage:@"ERROR"];
>                  }
>                  else {
>                      NSMutableString *body = [[NSMutableString >alloc] initWithCString:msg
>                                                                              >encoding:NSUTF8StringEncoding];
>                      [alertView setMessage:body];
>                      [body release];
>                  }
>                  [alertView setDelegate:self];
>                  [alertView show];
>                  [alertView release];
> 
>              }); 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:25:33.843

只需保留对警报视图的引用即可。这样，如果第一个仍在显示，您可以在显示第二个之前清除它。就像是：

.h 文件：

```
@interface ViewController : UIViewController <UIAlertViewDelegate> {
  UIAlertView * _alertView1;
  UIAlertView * _alertView2;
} 
```

.m 文件：

```
- (void)viewDidLoad; {
  [super viewDidLoad];
  _alertView1 = [[UIAlertView alloc] initWithTitle:@"Alert 1" message:@"A New call!" delegate:self cancelButtonTitle:@"Deny" otherButtonTitles:@"Accept", nil];
  _alertView2 = [[UIAlertView alloc] initWithTitle:@"Alert 2" message:@"The Call was cancelled!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
}

- (void)callWasCancelled; { // This would be the method where the second AlertView is called.
  if(_alertView1.isVisible){
    [_alertView1 dismissWithClickedButtonIndex:0 animated:YES];
  }
  [_alertView2 show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex; {
  if(alertView == _alertView1){
    if(buttonIndex == 1){
      // Accept the call!
    }
  }
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:23:40.787

您可以使用通知来实现这一点。当您意识到呼叫已被取消时，发出通知。处理通知时，关闭第一个 UIAlertView：

```
- (void)callCancelled {
    // Fire the notification
    [[NSNotificationCenter defaultCenter] postNotificationName:@"CallCancelled" 
                                                        object:nil];   
} 
```

处理“CallCancelled”通知：

```
[NSNotificationCenter defaultCenter] addObserver:self 
                                        selector:@selector(handleCancelNotification:) 
                                            name:@"CallCancelled" 
                                          object:nil];

- (void)handleCancelNotification:(id)object {
  // Dismiss the first AlertView.
  [alertView dissmissWithClickedButtonIndex:-1 animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T05:32:57.753

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Confirm" message:@"Do you pick Yes or No?" delegate:self cancelButtonTitle:@"Yes" otherButtonTitles:@"No", nil];
    [alert setDelegate:self];
    [alert show];
    [alert release];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0 && [alertView.title isEqualToString:@"Confirm"])
    {
        UIAlertView *alert1=[[UIAlertView alloc]initWithTitle:@"Call is Cancelled" message:@"" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert1 setDelegate:self];
        [alert1 show];
        [alert1 release];

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T06:48:53.523

实际上，最好重新设计您的应用程序以避免 2 个 alertViews 显示一个在另一个顶部的可能性。

# jquery - 需要文本展开功能

> ID：10679783
> 
> 赞同：0
> 
> 时间：2012-05-21T05:14:34.003
> 
> 标签：jquery, html

这是我的代码

```
$(document).each(function()
{
$('.imgContent span',this).unwrap();
}); 
```

html

```
<div>
     <h3>
         <span>$200</span>
      </h3>
</div> 
```

我想删除跨度标签（NB-仅删除没有内容的跨度标签）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:18:28.880

怎么了`$(document).each()`？无论如何，下面的代码应该可以解决问题：

```
$(function() {
    $('h3 span').contents().unwrap(); 
}); 
```

# javascript - 在 javascript 文件中处理 i18n

> ID：10679785
> 
> 赞同：2
> 
> 时间：2012-05-21T05:14:51.353
> 
> 标签：javascript, ajax, jsf-2, internationalization, primefaces

例如，我的应用在进行 CRUD 操作时严重依赖 AJAX 的使用。

截至目前，消息是与此类似的硬编码。

```
function handleSaveNewMember(xhr, status, args) {  
    if(args.validationFailed || !args.result) {   
    }else{  
        showmsg.show([{summary:'Add New Member', detail: 'Successfully Added New Member', severity: 'info'}]);
    }  
} 
```

但是，如果您将应用程序部署到不同的语言环境会怎样？那么你如何处理 i18n 功能呢？

顺便说一句，我在这里使用了 Primefaces。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:40:19.370

它可能不是最好的解决方案，但在过去，我基本上链接了一个 js 文件，其中包含我在代码中引用的字符串常量。加载时，我为当前文化加载适当的 js 文件。如果该文件未加载，请确保为每个常量设置某种默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T09:03:39.453

另一种方法是遍历您的属性文件并将其填充为`HashMap`say`mapOfLabels`然后使用 Gson 转换为 Json 字符串`gson.toJson(mapOfLabels);`

而不是将Json字符串放入一个bean变量中，该变量将通过getter“链接”到您的`xhtml`页面，如下所示

```
<h:inputText id="locLabelsID" value="#{myBean.locLabelsField}" styleClass="hide"/> 
```

在 js 方面，您可以简单地访问它并使用 jQuery 解析它，如下所示：

```
var myJsonVar= $("#locLabelsID").val();
locLabels = $.parseJSON(myJsonVar); 
```

并像这样使用您的标签密钥访问它

```
locLabels[key]; 
```

当然，哈希映射的初始化只执行一次，js 端的初始化也是如此……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T05:37:55.787

如果你被允许使用 JQuery——我们在 i18n 项目中使用了这个不错的小插件——

[http://code.google.com/p/jquery-i18n-properties/](http://code.google.com/p/jquery-i18n-properties/)

很适合我们的需求。。

# swing - 如何在 JTable 中创建用于输入密码的列单元格

> ID：10679786
> 
> 赞同：2
> 
> 时间：2012-05-21T05:14:54.003
> 
> 标签：swing, jtable, jpasswordfield

我正在为密码创建一个 JTable 列。

我可以使用以下代码将单元格编辑器更改为密码编辑器：

```
JPasswordField pwf = new JPasswordField();
    DefaultCellEditor editor = new DefaultCellEditor(pwf);
    jTable1.getColumnModel().getColumn(3).setCellEditor(editor); 
```

我无法找出正确的解决方案，以与 JPassword 控件相同的行为来渲染密码字段内容。默认情况下，它渲染输入的文本并显示它。如何覆盖它，使渲染器仅显示与输入的密码长度相同的“*”或黑点。

谢谢，钱德拉

更新 1：目前我正在使用下面给出的密码字段渲染器：

```
class PasswordCellRenderer extends JPasswordField
implements TableCellRenderer {

    public PasswordCellRenderer() {
        super();
        // This displays astericks in fields since it is a password.
        // It does not affect the actual value of the cell.
        this.setText("filler123");
    }

    public Component getTableCellRendererComponent(
    JTable arg0,
    Object arg1,
    boolean arg2,
    boolean arg3,
    int arg4,
    int arg5) {
        return this;
    }
} 
```

使用以下方式调用上述渲染器：

```
jTableJDBCPools.getColumnModel().getColumn(3).setCellRenderer(new PasswordCellRenderer()); 
```

即使密码字段为空，此渲染器仍在屏蔽。因此，用户很难找出密码单元格是空的还是填充的（因为它总是显示一些被屏蔽的内容）。

如何编写一个在密码字段中没有输入任何内容并且在密码字段中输入内容时保持空白的渲染器，它必须显示在密码字段中输入的字符的长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T08:38:14.670

您需要使用[setCellRenderer](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableColumn.html#setCellRenderer%28javax.swing.table.TableCellRenderer%29)为该列设置一个专用的单元格渲染器，该渲染器将返回密码的屏蔽版本。[在Oracle 的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)中查看更多信息。

编辑

沿着这些思路：

```
class PasswordCellRenderer extends DefaultTableCellRenderer {

    private static final String ASTERISKS = "************************";

    @Override
    public Component getTableCellRendererComponent(JTable arg0, Object arg1, boolean arg2, boolean arg3, int arg4, int arg5) {
        int length =0;
        if (arg1 instanceof String) {
            length =  ((String) arg1).length();
        } else if (arg1 instanceof char[]) {
            length = ((char[])arg1).length;
        }
        setText(asterisks(length));
        return this;
    }

    private String asterisks(int length) {
        if (length > ASTERISKS.length()) {
            StringBuilder sb = new StringBuilder(length);
            for (int i = 0; i < length; i++) {
                sb.append('*');
            }
            return sb.toString();
        } else {
            return ASTERISKS.substring(0, length);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-21T20:00:23.997

实施的答案在 Nimbus 的外观和感觉上看起来很有趣。我会做这样的事情：

```
public class PasswordCellRenderer extends DefaultTableCellRenderer {

    private static final long serialVersionUID = 1L;
    private static final int MAX_LENGTH = 25;

    @Override public Component getTableCellRendererComponent(
            JTable table, 
            Object value, 
            boolean isSelected, 
            boolean hasFocus,
            int row,
            int column) {

        String maskedValue = "";
        for(int index = 0; index < value.toString().length(); index++) {
            maskedValue += "*";
            if(index > MAX_LENGTH) {
                break;
            }
        }

        return super.getTableCellRendererComponent(
                table,
                maskedValue,
                isSelected,
                hasFocus, 
                row, 
                column);
    }
} 
```

这将保留原始默认渲染器的行为，但屏蔽数据*除外。*

# asp.net - GridView, RowDataBound 事件每行执行两次

> ID：10679787
> 
> 赞同：0
> 
> 时间：2012-05-21T05:14:56.903
> 
> 标签：asp.net

我有一个使用 SQLDataSource 绑定到数据库的 GridView。

出于某种原因，我在 GridView 上的 RowDataBound 事件执行了两次。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:06:20.580

看来，如果您从后面的代码 (gv.ShowFooter = true;) 中启用 GridView 中的页脚并且之前未设置为 true，它将重新绑定数据。这对我来说似乎是一个错误！

相反，我在我的 .aspx 文件中启用了页脚，一切都很好。

# vba - 遍历mac上的文件夹

> ID：10679790
> 
> 赞同：0
> 
> 时间：2012-05-21T05:15:17.767
> 
> 标签：vba, macos, ms-word

我有一个 Word 宏来迭代 Word 文档的指定文件夹的内容。我无法获得以下功能来返回我的 Microsoft Word 文档。

```
strFolder = MacScript("return (path to desktop folder) as string") & "docs:"
MsgBox strFolder
strFile = Dir(strFolder, MacID("MSWD")) 'this is the line that returns nil!!!
MsgBox strFile 
```

我在指定的文件夹中有文档，在 .docx、.doc 和 .txt 中，当我更改文件时，只有文本文件有效`MacID("TEXT")`

我注意到，如果我将`.docx`文件保存为旧格式，`.doc`它将适用于设置`MacID("W8BN")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:21:46.563

如果您确实决定仍然需要处理多种文件类型，则可以考虑使用更多 Applescript 来发现文件夹中每个文件的文件类型 - 对于单个文件，您可能会根据

```
tell application "System Events"
    set p to the properties of ("Macintosh HD:Users:me:Documents:Document2.doc" as alias)
    return the file type of p
end tell 
```

在我的 10.6 系统上，.doc 返回“W8BN”，.docx 返回“WXBN”，.docm 返回“WXBM”，所以我可能需要找出 .dotx、.dotm 等的作用。

即我的看法是，在这种情况下，“支持已被放弃”意味着“由您决定您可以依赖这些东西的程度”而不是“所有相关设施都已消失”

OP 评论说“我尝试了函数 strFile = Dir(strFolder, MacID("WXBN")) 但它没有返回任何东西”

我的回答是我不希望 MacID("WXBN") 返回任何东西——我提到的值是从我提供的 Applescript 返回的。如有必要，您可以通过使用更多 AppleScript 来解决“Dir”的限制，可能会完全替换 Dir 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:42:46.990

好的，根据以下链接，我显然无法做到这一点

[http://www.microsoft-word-answers.com/microsoft/MAC-Office-Word/36053797/macro-for-combining-word-documents-into-one-converting-pc-macro.aspx](http://www.microsoft-word-answers.com/microsoft/MAC-Office-Word/36053797/macro-for-combining-word-documents-into-one-converting-pc-macro.aspx)

Mac osx 10.6 及更高版本已放弃对 Type 和 Creator 代码的支持！

所以我按照文章说的做，目录中只有 .docx 文件

# android - 在Android的SQLite数据库中插入远程（互联网）xml文件

> ID：10679791
> 
> 赞同：0
> 
> 时间：2012-05-21T05:15:29.510
> 
> 标签：android, database, sqlite, xml-parsing

这是我的大问题。根据我搜索过的选项，一个是解析我需要的数据然后存储在 sqlite 中，另一个是将整个 xml 文件作为文本存储在 sqlite 中。我实际上不知道从哪里开始，但我认为第二个选项对我来说更可取。有人能指出我该怎么做吗？或者如果有更多关于我的问题的建议。

任何回复将不胜感激..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:12:15.543

对不起，我的英语不是很好。

我会选择第二个选项。您可以使用 XmlPullParser 和 XmlPullParserFactory 读取文件 XML：

```
 XmlPullParser xmlPullParser;  
    String output; 
    XmlPullParserFactory fabrica = null;

    File archivoXml = new File(Environment.getExternalStorageDirectory() + servicioXML); //servicioXML is a xml path 
    FileInputStream fisArchivo = null;
    XmlPullParser analizador = null;
    int tipoEvento = 0; 

    try {
        fisArchivo = new FileInputStream(archivoXml);
        fabrica = XmlPullParserFactory.newInstance();
        fabrica.setNamespaceAware(true);
        analizador = fabrica.newPullParser();
        analizador.setInput(new InputStreamReader(fisArchivo));
        fabrica = XmlPullParserFactory.newInstance();  
        xmlPullParser = fabrica.newPullParser();  
        xmlPullParser.setInput(fisArchivo, "UTF-8"); 
        tipoEvento = xmlPullParser.getEventType(); 

    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();

    } catch (XmlPullParserException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    while (tipoEvento != XmlPullParser.END_DOCUMENT) {  
        analizarEvento(tipoEvento);  
        try {  
            tipoEvento = xmlPullParser.next();  
        } catch (XmlPullParserException e) {  
            // TODO Auto-generated catch block  
            e.printStackTrace();  
        } catch (IOException e) {  
            // TODO Auto-generated catch block  
            e.printStackTrace();  
        }  
    } 
}  

private void analizarEvento(int evento){  
    switch (evento) {  
    case XmlPullParser.START_DOCUMENT:  
        break;  

    case XmlPullParser.END_DOCUMENT:    
        break;  

    case XmlPullParser.START_TAG:   
        break;  

    case XmlPullParser.END_TAG:  
        break;  

    case XmlPullParser.TEXT:  
        output = xmlPullParser.getText();  
        AdapterBBDD.setDBField(output); //add the xml data to the database
        break;  
    } 
```

更多信息：[Android 中的 XmlPullParser](http://www.happygeek.in/xmlpullparser-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:54:25.830

如果您将数据解析一次并存储在数据库中，那就更好了。u 只能查询需要的数据并显示。

```
 SAXParserFactory spf = SAXParserFactory.newInstance();
                    SAXParser sp = spf.newSAXParser();
                    XMLReader xr = sp.getXMLReader();
                    /** Create handler to handle XML Tags ( extends DefaultHandler ) */
                    XMLHandler dbXMLHandler = new XMLHandler();
                    xr.setContentHandler(dbXMLHandler);
                    InputStream is = new ByteArrayInputStream(
                            xmlData.getBytes("UTF-8"));
                    xr.parse(new InputSource(is));

    phoneList = XMLHandler.phoneList;
                for(int id = 0; id < phoneList.getID().size();id++)
                {
                    database.open();
                    database.insertupdateintoPhonebook(phoneList.getUserName().get(id),
                            phoneList.getUserName().get(id)
                                    .get(id), phoneList.getDOB().get(id)

                    database.close();
} 
```

DBXMLHAndler.java 如下

```
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XMLHandler extends DefaultHandler{
Boolean currentElement = false;
String currentValue = null;
public static Phonelist phoneList = null;

public static Phonelist getPhoneList() {
    return phoneList;
}

public static void setPhonelist(Phonelist phoneList) {
    DBXMLHandler.phoneList = phoneList;
}
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    currentElement = true;

    if (localName.equals("NewDataSet"))
    {
        phoneList = new Phonelist();
    }

}

/** Called when tag closing ( ex:- <name>AndroidPeople</name> 
 * -- </name> )*/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    currentElement = false;

    /** set value */ 
    if (localName.equalsIgnoreCase("Id"))
        phoneList.setID(currentValue);
    else if (localName.equalsIgnoreCase("Username"))
        phoneList.setUserName(currentValue);    
    else if (localName.equalsIgnoreCase("Dob"))
        phoneList.setDOB(currentValue);

}

/** Called to get tag characters ( ex:- <name>AndroidPeople</name> 
 * -- to get AndroidPeople Character ) */
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

    if (currentElement) {
        currentValue = new String(ch, start, length);
        currentElement = false;
    }

} 
```

}

# php - 如何在css中删除跨浏览器效果

> ID：10679798
> 
> 赞同：1
> 
> 时间：2012-05-21T05:16:16.670
> 
> 标签：php, javascript, html, css

如何使用javascript或jquery或php或任何脚本删除css中的跨浏览器效果以删除css中的所有跨浏览器效果

前任：

```
-moz-transform: matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0); 
    -o-transform: matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0);
    -webkit-transform : matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0);
    -ms-transform : matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0); 
```

我需要如果我编写 css 因为 `-moz-transform:matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0);`它应该适用于任何浏览器，chrome IE 或 safari 等没有任何变化

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:20:07.043

[这个http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)有一个`JS`插件可能对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:25:39.280

如果你只想写一次这一行，你应该这样写：

```
transform: matrix(0.99998, -0.00638621, 0.00638621, 0.99998, 0, 0); 
```

然后等到 transform 成为官方标准的一部分并且所有浏览器都认可它。在那之前，也许[http://prefixr.com/](http://prefixr.com/)会帮助你。仍然需要前缀是有原因的。请理解这个原因。

# x509 - X.509证书和WTLS证书有什么区别

> ID：10679805
> 
> 赞同：0
> 
> 时间：2012-05-21T05:16:55.783
> 
> 标签：x509

我想知道这两个证书之间的区别以及哪一个在无线通信环境中有用。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:26:14.010

好吧，我实际上对 WTLS 一无所知，但我确实知道维基百科，维基百科[告诉我们](http://en.wikipedia.org/wiki/Wireless_Transport_Layer_Security)

1) WTLS 证书基于 x509，但设计得更紧凑……这通常被认为是移动设备的一个好目标

2）WTLS是WAP栈的一部分……一般认为是死技术

所以把这一切放在一起......如果你出于某种原因正在使用 WAP 堆栈，那么你会很糟糕，但是嘿，至少现在你有充分的理由了解更多关于 WTLS 的信息。如果您不使用 WAP，那么恭喜您成为目前正在构建的 99% 的其他东西，并且您也可以忽略 WTLS 以支持更传统的东西，例如 SSL。

# bash - 如何为每个 ping 结果添加时间戳？

> ID：10679807
> 
> 赞同：93
> 
> 时间：2012-05-21T05:17:02.570
> 
> 标签：bash, osx-lion, ping, bsd

[Ping](https://en.wikipedia.org/wiki/Ping_%28networking_utility%29)默认返回：

```
64 bytes from 203.173.50.132: icmp_seq=0 ttl=244 time=57.746 ms 
```

有什么方法可以让它添加时间戳吗？

例如，

```
Mon 21 May 2012 15:15:37 EST | 64 bytes from 203.173.50.132: icmp_seq=0 ttl=244 time=57.746 ms 
```

我在 OS X v10.7 (Lion) 上，它似乎有一些[BSD](https://en.wikipedia.org/wiki/Berkeley_Software_Distribution)版本的 ping。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-06-26T11:13:47.053

由于某种原因，我无法将基于 Perl 的解决方案重定向到文件，因此我不断搜索并找到了`bash`唯一的方法：

`ping www.google.fr | while read pong; do echo "$(date): $pong"; done`

```
Wed Jun 26 13:09:23 CEST 2013: PING www.google.fr (173.194.40.56) 56(84) bytes of data.
Wed Jun 26 13:09:23 CEST 2013: 64 bytes from zrh04s05-in-f24.1e100.net (173.194.40.56): icmp_req=1 ttl=57 time=7.26 ms
Wed Jun 26 13:09:24 CEST 2013: 64 bytes from zrh04s05-in-f24.1e100.net (173.194.40.56): icmp_req=2 ttl=57 time=8.14 ms 
```

功劳归于[https://askubuntu.com/a/137246](https://askubuntu.com/a/137246)

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-05-21T05:59:52.027

如果您的 AWK 没有`strftime()`：

```
ping host | perl -nle 'print scalar(localtime), " ", $_' 
```

要将其重定向到文件，请使用标准 shell 重定向并关闭输出缓冲：

```
ping host | perl -nle 'BEGIN {$|++} print scalar(localtime), " ", $_' > outputfile 
```

如果您想要时间戳的 ISO8601 格式：

```
ping host | perl -nle 'use Time::Piece; BEGIN {$|++} print localtime->datetime, " ", $_' > outputfile 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-05-21T05:20:10.690

来自`man ping`：

```
 -D     Print timestamp (unix time + microseconds as in gettimeofday) before each line. 
```

它会产生这样的东西：

```
[1337577886.346622] 64 bytes from 4.2.2.2: icmp_req=1 ttl=243 time=47.1 ms 
```

然后时间戳可以从`ping`响应中解析出来并转换为所需的格式`date`。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2017-08-22T10:10:49.343

在 OS X 上，您可以简单地使用 --apple-time 选项：

```
ping -i 2 --apple-time www.apple.com 
```

产生如下结果：

```
10:09:55.691216 64 bytes from 72.246.225.209: icmp_seq=0 ttl=60 time=34.388 ms
10:09:57.687282 64 bytes from 72.246.225.209: icmp_seq=1 ttl=60 time=25.319 ms
10:09:59.729998 64 bytes from 72.246.225.209: icmp_seq=2 ttl=60 time=64.097 ms 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2016-05-27T06:02:56.880

1.  终端输出：

    `ping -i 5 google.com | xargs -L 1 -I '{}' date '+%Y-%m-%d %H:%M:%S: {}'`

2.  文件输出：

    `ping -i 5 google.com | xargs -L 1 -I '{}' date '+%Y-%m-%d %H:%M:%S: {}' > test.txt`

3.  终端+文件输出：

    `ping -i 5 google.com | xargs -L 1 -I '{}' date '+%Y-%m-%d %H:%M:%S: {}' | tee test.txt`

4.  文件输出背景：

    `nohup ping -i 5 google.com | xargs -L 1 -I '{}' date '+%Y-%m-%d %H:%M:%S: {}' > test.txt &`

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-08-09T00:52:18.200

我最初的提交是不正确的，因为它没有评估每一行的日期。已进行更正。

试试这个

```
 ping google.com | xargs -L 1 -I '{}' date '+%+: {}' 
```

产生以下输出

```
Thu Aug 15 10:13:59 PDT 2013: PING google.com (74.125.239.103): 56 data bytes
Thu Aug 15 10:13:59 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=0 ttl=55 time=14.983 ms
Thu Aug 15 10:14:00 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=1 ttl=55 time=17.340 ms
Thu Aug 15 10:14:01 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=2 ttl=55 time=15.898 ms
Thu Aug 15 10:14:02 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=3 ttl=55 time=15.720 ms
Thu Aug 15 10:14:03 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=4 ttl=55 time=16.899 ms
Thu Aug 15 10:14:04 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=5 ttl=55 time=16.242 ms
Thu Aug 15 10:14:05 PDT 2013: 64 bytes from 74.125.239.103: icmp_seq=6 ttl=55 time=16.574 ms 
```

-L 1 选项使 xargs 一次处理一行而不是单词。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-10-19T22:10:35.513

在macos上你可以做

`ping --apple-time 127.0.0.1`

输出看起来像

```
16:07:11.315419 64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.064 ms
16:07:12.319933 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.157 ms
16:07:13.322766 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.066 ms
16:07:14.324649 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.148 ms
16:07:15.328743 64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.092 ms 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-01-17T16:40:54.623

试试这个：

```
ping www.google.com | while read endlooop; do echo "$(date): $endlooop"; done 
```

它返回如下内容：

```
Wednesday 18 January  09:29:20 AEDT 2017: PING www.google.com (216.58.199.36) 56(84) bytes of data.
Wednesday 18 January  09:29:20 AEDT 2017: 64 bytes from syd09s12-in-f36.1e100.net (216.58.199.36): icmp_seq=1 ttl=57 time=2.86 ms
Wednesday 18 January  09:29:21 AEDT 2017: 64 bytes from syd09s12-in-f36.1e100.net (216.58.199.36): icmp_seq=2 ttl=57 time=2.64 ms
Wednesday 18 January  09:29:22 AEDT 2017: 64 bytes from syd09s12-in-f36.1e100.net (216.58.199.36): icmp_seq=3 ttl=57 time=2.76 ms
Wednesday 18 January  09:29:23 AEDT 2017: 64 bytes from syd09s12-in-f36.1e100.net (216.58.199.36): icmp_seq=4 ttl=57 time=1.87 ms
Wednesday 18 January  09:29:24 AEDT 2017: 64 bytes from syd09s12-in-f36.1e100.net (216.58.199.36): icmp_seq=5 ttl=57 time=2.45 ms 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2021-02-13T00:32:59.837

更简单的选择只是使用[`ts(1)`](https://manpages.debian.org/testing/moreutils/ts.1.en.html)from moreutils （在大多数发行版上相当标准）。

```
$ ping 1.1.1.1 | ts 

Feb 13 12:49:17 PING 1.1.1.1 (1.1.1.1) 56(84) bytes of data. 
Feb 13 12:49:17 64 bytes from 1.1.1.1: icmp_seq=1 ttl=57 time=5.92 ms
Feb 13 12:49:18 64 bytes from 1.1.1.1: icmp_seq=2 ttl=57 time=5.30 ms
Feb 13 12:49:19 64 bytes from 1.1.1.1: icmp_seq=3 ttl=57 time=5.71 ms
Feb 13 12:49:20 64 bytes from 1.1.1.1: icmp_seq=4 ttl=57 time=5.86 ms 
```

或者

```
 ping 1.1.1.1 -I eth0 | ts "[%FT%X]" 
```

允许使用与 shell/ 解决方法相同的 strftime 格式字符串`date`。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-05-21T05:28:31.653

将结果通过管道传输到`awk`：

```
 ping host | awk '{if($0 ~ /bytes from/){print strftime()"|"$0}else print}' 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-03-31T10:59:05.893

您可以在`~/.bashrc`文件中创建一个函数，以便在控制台上获得一个 ping 命令`ping-t`：

```
function ping-t { ping "$1" | while read pong; do echo "$(date): $pong"; done; } 
```

现在您可以在控制台上调用它：

```
ping-t example.com 
```

> Sa 31\. Mär 12:58:31 CEST 2018：PING example.com (93.184.216.34) 56(84) 字节的数据。
> Sa 31\. Mär 12:58:31 CEST 2018：来自 93.184.216.34 (93.184.216.34) 的 64 个字节：icmp_seq=1 ttl=48 time=208 ms
> Sa 31\. Mar 12:58:32 CEST 2018：来自 93.184 的 64 个字节.216.34 (93.184.216.34): icmp_seq=2 ttl=48 时间=233 ms

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-05-21T18:25:18.123

您没有指定需要此类输出多长时间的任何时间戳或间隔，因此我认为它是一个无限循环。您可以根据需要进行相应更改。

```
while true
do
   echo -e "`date`|`ping -n -c 1 <IP_TO_PING>|grep 'bytes from'`"
   sleep 2
done 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-10-31T02:16:30.413

```
ping -D -n -O -i1 -W1 8.8.8.8 
```

或许

```
while true; do \
    ping -n -w1 -W1 -c1 8.8.8.8 \
    | grep -E "rtt|100%" \
    | sed -e "s/^/`date` /g"; \
    sleep 1; \
done 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-15T13:35:38.023

我还需要这个来监控我的数据库镜像超时问题的网络问题。我使用如下命令代码：

```
ping -t Google.com|cmd /q /v /c "(pause&pause)>nul & for /l %a in () do (set /p "data=" && echo(!date! !time! !data!)&ping -n 2 Google.com>nul" >C:\pingtest.txt 
```

您只需要将 Google.com 修改为您的服务器名称。它非常适合我。并记住在完成后停止此操作。pingtest.txt 文件将以每秒 1 KB 的速度增加（大约）。

感谢 raymond.cc。[https://www.raymond.cc/blog/timestamp-ping-with-hrping/](https://www.raymond.cc/blog/timestamp-ping-with-hrping/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-11-22T01:50:20.860

试试这条线。

```
while sleep 1;do echo "$(date +%d-%m-%y-%T) $(ping -c 1 whatever.com | gawk 'FNR==2{print "Response from:",$4,$8}')" | tee -a /yourfolder/pingtest.log;done 
```

你必须取消它`ctrl-c`。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-13T03:00:20.060

只需使用 sed：

```
ping google.com|sed -r "s/(.*)/$(date) \1/g" 
```

# c# - C# Web 服务可以调用其他 DLL 代码吗？

> ID：10679809
> 
> 赞同：2
> 
> 时间：2012-05-21T05:17:25.453
> 
> 标签：c#, asp.net, web-services, dll, call

我有一个 C# Web 服务，并且想从另一个具有一些 DB 相关函数的 C# DLL 调用函数。

我在哪里放置 DLL 以及如何在我的 Web 服务中引用 DLL 以使一切正常工作。

我是网络服务的新手，感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:55:49.363

您可以像在任何其他项目中一样在 Web 服务中添加和调用 DLL。只需右键单击引用并选择“添加引用”并选择您要使用的 DLL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:19:47.213

您可以在 Web 服务项目中调用 DLL，就像在任何其他项目类型中一样。只需将 DLL 的引用添加到您的 Web 服务项目中并调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T08:30:01.167

只需在包含 Web 服务（.asmx 文件）的项目中使用“添加引用”，然后像往常一样在后面的 Web 服务方法代码中使用 dll。

您不需要将该 DLL 复制到任何客户端/消费站点或类似的站点，因为实际上只有 Web 服务在访问该 DLL，并且客户端可以通过 Web 服务层“使用”该 DLL。

hth

# html - Css3 3D Basic 4 边旋转

> ID：10679814
> 
> 赞同：0
> 
> 时间：2012-05-21T05:18:56.827
> 
> 标签：html, css, 3d, rotation

我一直在尝试创建一个可以在 x 轴上旋转的框，以在 4 面的每一面显示几个不同的图片。但是，我似乎无法让我的代码正常工作。这里是：

```
<style type="text/css">

#cube {
position:relative;
left:20px;
top:20px;
height:300px;
width:300px;
-webkit-transition: -webkit-transform 1s linear;
}

.side {
position:absolute;  
height:300px;
width:300px;
}

.one {
background-color:green;
-webkit-transform:rotateX(0deg) translateZ(150px); 
}

.two {
background-color:grey;
-webkit-transform:rotateX(90deg) translateZ(150px); 
}

.three {
background-color:red;
-webkit-transform:rotateX(180deg)  translateZ(150px); 
}

.four {
background-color:black;
-webkit-transform:rotateX(270deg) translateZ(150px); 
}

#turn {
height:30px;
width:30px;
background-color:green;
margin:30px;
}

</style>
<script type="text/javascript">

q = 1
deg = 0
function turn() {

var cube = document.getElementById('one');
deg = deg + 90

if( q == 1 ) {
cube.style.cssText = "-webkit-transform:rotateY(" + (deg) + "deg);";
q += 1;
console.log("left" + (deg));}
else if( q == 2 ) {
cube.style.cssText = "-webkit-transform:rotateY(" + (deg) + "deg);";
q += 1;
console.log("right" + (deg));}
else if( q == 3 ) {
cube.style.cssText = "-webkit-transform:rotateY(" + (deg) + "deg);";
q += 1;
console.log("back" + (deg));}
else if ( q == 4 ) {
cube.style.cssText = "-webkit-transform:rotateY(" + (deg) + "deg);";
q = 1;
console.log("front" + (deg));}

}

</script>
</head>
<body>

<div id="cube">
<div id ="one" class="side two"></div>
<div id="two" class="side three"></div>
<div id="three" class="side four"></div>
<div id="four" class="side one"></div>
</div>

<div id="turn" onclick="turn()"></div>

</body> 
```

关于我如何无法让这个脚本工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:13:52.327

您的代码中缺少几个概念。

*   CSS 类与 CSS ID
*   透视 div 容器
*   正确的“墙”div 定位
*   适当的事件处理

我的 JSFiddle

*   将事件处理程序移至 javascript 以使其更合规

[http://jsfiddle.net/sw7aV/2/](http://jsfiddle.net/sw7aV/2/)

我的 HTML

```
<div id="turn" onclick="turn()"></div>
<div id="container">
    <div id="cube" class="sprite">
        <div class="wall" id="front">front</div>
        <div class="wall" id="back">back</div>
        <div class="wall" id="top">top</div>
        <div class="wall" id="bottom">bottom</div>
        <div class="wall" id="left">left</div>
        <div class="wall" id="right">right</div>
    </div>
</div> 
```

我的 CSS

```
#container {
    float: left;
    position: relative;
    width: 300px;
    height: 300px;
    overflow: hidden;
    border: 1px solid #CCCCCC;

    -webkit-perspective: 900;
    -moz-perspective: 900;
    -o-perspective: 900;
    perspective: 900;
}

.sprite {
    width: 100%;
    height: 100%;
    position: absolute;

    text-indent: 0px;

    -webkit-transform:  rotateY(0deg);
    -moz-transform:  rotateY(0deg);
    -o-transform:  rotateY(0deg);
    transform:  rotateY(0deg);

    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -o-transform-style: preserve-3d;
    transform-style: preserve-3d;
}

#cube {
    width: 300px;
    height: 300px;
    -webkit-transition: -webkit-transform 1s linear;
}

#cube .wall {
    display: block;
    position: absolute;
    height: 100%;
    width: 257px;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -o-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-background-origin: content-box;
    -moz-background-origin: content-box;
    -o-background-origin: content-box;
    background-origin: content-box;
    border: 1px solid #DEDEDE;
    color: white;
}

#cube #front {
    -webkit-transform: rotateX(0deg) rotateY(-90deg) translateZ(150px);
    -moz-transform: rotateX(0deg) rotateY(-90deg) translateZ(150px);
    -ms-transform: rotateX(0deg) rotateY(-90deg) translateZ(150px);
    -o-transform: rotateX(0deg) rotateY(-90deg) translateZ(150px);
    transform: rotateX(0deg) rotateY(-90deg) translateZ(150px);
    width: 300px;
    height: 300px;
}

#cube #back {
    -webkit-transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
    -moz-transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
    -ms-transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
    -o-transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
    transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
    width: 300px;
    height: 300px;
}

#cube #top {
    -webkit-transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
    -moz-transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
    -ms-transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
    -o-transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
    transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
    width: 300px;
    height: 300px;
}

#cube #bottom {
    -webkit-transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
    -moz-transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
    -ms-transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
    -o-transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
    transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
    width: 300px;
    height: 300px;
}

#cube #left {
    -webkit-transform: rotateX(0deg) rotateY(180deg) translateZ(150px);
    -moz-transform: rotateX(0deg) rotateY(180deg) translateZ(150px);
    -ms-transform: rotateX(0deg) rotateY(180deg) translateZ(150px);
    -o-transform: rotateX(0deg) rotateY(180deg) translateZ(150px);
    transform: rotateX(0deg) rotateY(180deg) translateZ(150px);
    width: 300px;
    height: 300px;
}

#cube #right {
    -webkit-transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
    -moz-transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
    -ms-transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
    -o-transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
    transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
    width: 300px;
    height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:12:15.290

试试这个：[http ://css3.bradshawenterprises.com/demos/cubecarousel.php](http://css3.bradshawenterprises.com/demos/cubecarousel.php)

您需要查看源代码以了解它是如何工作的，但它应该非常简单。

# xpath - 重复表中的计算值

> ID：10679815
> 
> 赞同：1
> 
> 时间：2012-05-21T05:18:58.350
> 
> 标签：xpath, infopath2010, repeat

![在此处输入图像描述](../Images/420e3ed60132d6fcfe5c0ac5e04b786f.png)

我有这个草稿表格，我正在努力完成以下工作：
因为我有`repeating table`并且每一行代表一个月，我需要`Budget Remain`根据以下公式为每一行（月）重新计算`Budget Remain = Budget - Total (for all the previous months)`，但不得影响上个月的预算保持

IE：

```
Budget = 100  
jan : Cost + Penalties = 20 (Total) --> Budget Remain = 100 - 20 = 80
Feb : Cost + Penalties = 30 (Total) --> Budget Remain = 100 - (20 + 30) = 50 
```

但是当我尝试这样做时，我最终得到每个`budget remain`等于`last budget remain calculated value`

# tfs - TFS 2010 中的“在构建中找到”下拉菜单

> ID：10679818
> 
> 赞同：1
> 
> 时间：2012-05-21T05:19:13.030
> 
> 标签：tfs, tfs-2010

每当用户从列表中选择值时，我们可以设置的任何选项（例如“找到于”字段中的最新版本号）都位于顶部？

这是为了确保用户不必拖动控件来选择适当的构建号以减少花费的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:54:00.157

据我所知，没有简单的方法可以按照**Found 在构建**字段中使用的任何顺序对建议的全局列表值进行排序，默认情况下它们将按字母顺序升序。

# android - 在Android中将对话框主题设置为父主题

> ID：10679819
> 
> 赞同：2
> 
> 时间：2012-05-21T05:19:15.127
> 
> 标签：android

我正在创建一个自定义 Holo 主题，我想在其中自定义 Dialog 的外观。Dialog的属性是什么？

```
<style name="MyHolo" parent="@android:style/Theme.Holo.Light">
   <item name="android:actionBarStyle">@style/MyActionBar</item>
   <item name="*********">@style/MyDialogStyle</item>
....
</style>

<style name="MyDialogStyle" parent="android:style/Theme.Dialog">
   <item name="android:textColor">#223523</item>
...
</style> 
```

并在清单中：

```
<activity android:theme="@style/MyHolo"> 
```

ps 我在哪里可以找到所有属性？我没有看到一个地方适合所有人。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T14:48:38.663

看一下这个！[https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml)

```
<style name="Theme.Holo.Light" parent="Theme.Light">
        <item name="colorForeground">@android:color/bright_foreground_holo_light</item>
        <item name="colorForegroundInverse">@android:color/bright_foreground_inverse_holo_light</item>
        <item name="colorBackground">@android:color/background_holo_light</item>
        <item name="colorBackgroundCacheHint">@android:drawable/background_cache_hint_selector_holo_light</item>
    <item name="disabledAlpha">0.5</item>
    <item name="backgroundDimAmount">0.6</item>

    <item name="colorPressedHighlight">@color/holo_blue_light</item>
    <item name="colorLongPressedHighlight">@color/holo_blue_bright</item>
    <item name="colorFocusedHighlight">@color/holo_blue_dark</item>
    <item name="colorMultiSelectHighlight">@color/holo_green_light</item>
    <item name="colorActivatedHighlight">@color/holo_blue_dark</item>

    <!-- Text styles -->
    <item name="textAppearance">@android:style/TextAppearance.Holo.Light</item>
    <item name="textAppearanceInverse">@android:style/TextAppearance.Holo.Light.Inverse</item>

    <item name="textColorPrimary">@android:color/primary_text_holo_light</item>
    <item name="textColorSecondary">@android:color/secondary_text_holo_light</item>
    <item name="textColorTertiary">@android:color/tertiary_text_holo_light</item>
    <item name="textColorPrimaryInverse">@android:color/primary_text_holo_dark</item>
    <item name="textColorSecondaryInverse">@android:color/secondary_text_holo_dark</item>
    <item name="textColorTertiaryInverse">@android:color/tertiary_text_holo_dark</item>
    <item name="textColorPrimaryDisableOnly">@android:color/primary_text_disable_only_holo_light</item>
    <item name="textColorPrimaryInverseDisableOnly">@android:color/primary_text_disable_only_holo_dark</item>
    <item name="textColorPrimaryNoDisable">@android:color/primary_text_nodisable_holo_light</item>
    <item name="textColorSecondaryNoDisable">@android:color/secondary_text_nodisable_holo_light</item>
    <item name="textColorPrimaryInverseNoDisable">@android:color/primary_text_nodisable_holo_dark</item>
    <item name="textColorSecondaryInverseNoDisable">@android:color/secondary_text_nodisable_holo_dark</item>
    <item name="textColorHint">@android:color/hint_foreground_holo_light</item>
    <item name="textColorHintInverse">@android:color/hint_foreground_holo_dark</item>
    <item name="textColorSearchUrl">@android:color/search_url_text_holo</item>
    <item name="textColorHighlight">@android:color/highlighted_text_holo_light</item>
    <item name="textColorHighlightInverse">@android:color/highlighted_text_holo_dark</item>
    <item name="textColorLink">@android:color/holo_blue_light</item>
    <item name="textColorLinkInverse">@android:color/holo_blue_light</item>
    <item name="textColorAlertDialogListItem">@android:color/primary_text_holo_light</item>

    <item name="textAppearanceLarge">@android:style/TextAppearance.Holo.Light.Large</item>
    <item name="textAppearanceMedium">@android:style/TextAppearance.Holo.Light.Medium</item>
    <item name="textAppearanceSmall">@android:style/TextAppearance.Holo.Light.Small</item>
    <item name="textAppearanceLargeInverse">@android:style/TextAppearance.Holo.Light.Large.Inverse</item>
    <item name="textAppearanceMediumInverse">@android:style/TextAppearance.Holo.Light.Medium.Inverse</item>
    <item name="textAppearanceSmallInverse">@android:style/TextAppearance.Holo.Light.Small.Inverse</item>
    <item name="textAppearanceSearchResultTitle">@android:style/TextAppearance.Holo.Light.SearchResult.Title</item>
    <item name="textAppearanceSearchResultSubtitle">@android:style/TextAppearance.Holo.Light.SearchResult.Subtitle</item>

    <item name="textAppearanceButton">@android:style/TextAppearance.Holo.Light.Widget.Button</item>

    <item name="editTextColor">?android:attr/textColorPrimary</item>
    <item name="editTextBackground">@android:drawable/edit_text_holo_light</item>

    <item name="candidatesTextStyleSpans">@android:string/candidates_style</item>

    <item name="textCheckMark">@android:drawable/indicator_check_mark_light</item>
    <item name="textCheckMarkInverse">@android:drawable/indicator_check_mark_dark</item>

    <item name="textAppearanceLargePopupMenu">@android:style/TextAppearance.Holo.Light.Widget.PopupMenu.Large</item>
    <item name="textAppearanceSmallPopupMenu">@android:style/TextAppearance.Holo.Light.Widget.PopupMenu.Small</item>

    <!-- Button styles -->
    <item name="buttonStyle">@android:style/Widget.Holo.Light.Button</item>

    <item name="buttonStyleSmall">@android:style/Widget.Holo.Light.Button.Small</item>
    <item name="buttonStyleInset">@android:style/Widget.Holo.Light.Button.Inset</item>

    <item name="buttonStyleToggle">@android:style/Widget.Holo.Light.Button.Toggle</item>
    <item name="switchStyle">@android:style/Widget.Holo.Light.CompoundButton.Switch</item>

    <item name="selectableItemBackground">@android:drawable/item_background_holo_light</item>
    <item name="borderlessButtonStyle">@android:style/Widget.Holo.Light.Button.Borderless</item>
    <item name="homeAsUpIndicator">@android:drawable/ic_ab_back_holo_light</item>

    <!-- List attributes -->
    <item name="listPreferredItemHeight">64dip</item>
    <item name="listPreferredItemHeightSmall">48dip</item>
    <item name="listPreferredItemHeightLarge">80dip</item>
    <item name="dropdownListPreferredItemHeight">?android:attr/listPreferredItemHeightSmall</item>
    <item name="textAppearanceListItemSmall">?android:attr/textAppearanceMedium</item>
    <item name="listPreferredItemPaddingLeft">8dip</item>
    <item name="listPreferredItemPaddingRight">8dip</item>

    <!-- @hide -->
    <item name="searchResultListItemHeight">58dip</item>
    <item name="listDivider">@drawable/list_divider_holo_light</item>
    <item name="listSeparatorTextViewStyle">@android:style/Widget.Holo.Light.TextView.ListSeparator</item>   

    <item name="listChoiceIndicatorSingle">@android:drawable/btn_radio_holo_light</item>
    <item name="listChoiceIndicatorMultiple">@android:drawable/btn_check_holo_light</item>

    <item name="listChoiceBackgroundIndicator">@android:drawable/list_selector_holo_light</item>

    <item name="activatedBackgroundIndicator">@android:drawable/activated_background_holo_light</item>

    <item name="expandableListPreferredItemPaddingLeft">40dip</item>
    <item name="expandableListPreferredChildPaddingLeft">?android:attr/expandableListPreferredItemPaddingLeft</item>

    <item name="expandableListPreferredItemIndicatorLeft">3dip</item>
    <item name="expandableListPreferredItemIndicatorRight">0dip</item>
    <item name="expandableListPreferredChildIndicatorLeft">?android:attr/expandableListPreferredItemIndicatorLeft</item>
    <item name="expandableListPreferredChildIndicatorRight">?android:attr/expandableListPreferredItemIndicatorRight</item>

    <item name="listDividerAlertDialog">@android:drawable/list_divider_holo_light</item>

    <!-- Gallery attributes -->
    <item name="galleryItemBackground">@android:drawable/gallery_item_background</item>

    <!-- Window attributes -->
    <item name="windowFrame">@null</item>
    <item name="windowNoTitle">false</item>
    <item name="windowFullscreen">false</item>
    <item name="windowIsFloating">false</item>
    <item name="android:windowContentOverlay">@android:drawable/ab_solid_shadow_holo</item>
    <item name="windowShowWallpaper">false</item>
    <item name="windowTitleStyle">@android:style/WindowTitle.Holo</item>
    <item name="windowTitleSize">25dip</item>
    <item name="windowTitleBackgroundStyle">@android:style/WindowTitleBackground.Holo</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Holo.Activity</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustUnspecified</item>
    <item name="windowActionBar">true</item>
    <item name="windowActionModeOverlay">false</item>

    <!-- Dialog attributes -->
    <item name="alertDialogStyle">@android:style/AlertDialog.Holo.Light</item>
    <item name="dialogTheme">@android:style/Theme.Holo.Light.Dialog</item>
    <item name="dialogTitleIconsDecorLayout">@layout/dialog_title_icons_holo</item>
    <item name="dialogCustomTitleDecorLayout">@layout/dialog_custom_title_holo</item>
    <item name="dialogTitleDecorLayout">@layout/dialog_title_holo</item>
    <item name="alertDialogCenterButtons">false</item>
    <item name="alertDialogTheme">@android:style/Theme.Holo.Light.Dialog.Alert</item>
    <item name="alertDialogIcon">@android:drawable/ic_dialog_alert_holo_light</item>

    <item name="toastFrameBackground">@android:drawable/toast_frame_holo</item>

    <!-- Panel attributes -->
    <item name="panelBackground">@android:drawable/menu_hardkey_panel_holo_light</item>
    <item name="panelFullBackground">@android:drawable/menu_background_fill_parent_width</item>
    <!-- These three attributes do not seems to be used by the framework. Declared public though -->
    <item name="panelColorBackground">#000</item>
    <item name="panelColorForeground">?android:attr/textColorPrimary</item>
    <item name="panelTextAppearance">?android:attr/textAppearance</item>

    <item name="panelMenuIsCompact">true</item>
    <item name="panelMenuListWidth">250dip</item>
    <item name="panelMenuListTheme">@android:style/Theme.Holo.Light.CompactMenu</item>

    <!-- Scrollbar attributes -->
    <item name="scrollbarFadeDuration">250</item>
    <item name="scrollbarDefaultDelayBeforeFade">300</item>
    <item name="scrollbarSize">10dip</item>
    <item name="scrollbarThumbHorizontal">@android:drawable/scrollbar_handle_holo_light</item>
    <item name="scrollbarThumbVertical">@android:drawable/scrollbar_handle_holo_light</item>
    <item name="scrollbarTrackHorizontal">@null</item>
    <item name="scrollbarTrackVertical">@null</item>

    <!-- Text selection handle attributes -->
    <item name="textSelectHandleLeft">@android:drawable/text_select_handle_left</item>
    <item name="textSelectHandleRight">@android:drawable/text_select_handle_right</item>
    <item name="textSelectHandle">@android:drawable/text_select_handle_middle</item>
    <item name="textSelectHandleWindowStyle">@android:style/Widget.Holo.TextSelectHandle</item>
    <item name="textSuggestionsWindowStyle">@android:style/Widget.Holo.Light.TextSuggestionsPopupWindow</item>
    <item name="textCursorDrawable">@android:drawable/text_cursor_holo_light</item>

    <!-- Widget styles -->
    <item name="absListViewStyle">@android:style/Widget.Holo.Light.AbsListView</item>
    <item name="autoCompleteTextViewStyle">@android:style/Widget.Holo.Light.AutoCompleteTextView</item>
    <item name="checkboxStyle">@android:style/Widget.Holo.Light.CompoundButton.CheckBox</item>
    <item name="dropDownListViewStyle">@android:style/Widget.Holo.ListView.DropDown</item>
    <item name="editTextStyle">@android:style/Widget.Holo.Light.EditText</item>
    <item name="expandableListViewStyle">@android:style/Widget.Holo.Light.ExpandableListView</item>
    <item name="expandableListViewWhiteStyle">@android:style/Widget.Holo.Light.ExpandableListView.White</item>
    <item name="galleryStyle">@android:style/Widget.Holo.Light.Gallery</item>
    <item name="gestureOverlayViewStyle">@android:style/Widget.Holo.Light.GestureOverlayView</item>
    <item name="gridViewStyle">@android:style/Widget.Holo.Light.GridView</item>
    <item name="imageButtonStyle">@android:style/Widget.Holo.Light.ImageButton</item>
    <item name="imageWellStyle">@android:style/Widget.Holo.Light.ImageWell</item>
    <item name="listViewStyle">@android:style/Widget.Holo.Light.ListView</item>
    <item name="listViewWhiteStyle">@android:style/Widget.Holo.Light.ListView.White</item>
    <item name="popupWindowStyle">@android:style/Widget.Holo.Light.PopupWindow</item>
    <item name="progressBarStyle">@android:style/Widget.Holo.Light.ProgressBar</item>
    <item name="progressBarStyleHorizontal">@android:style/Widget.Holo.Light.ProgressBar.Horizontal</item>
    <item name="progressBarStyleSmall">@android:style/Widget.Holo.Light.ProgressBar.Small</item>
    <item name="progressBarStyleSmallTitle">@android:style/Widget.Holo.Light.ProgressBar.Small.Title</item>
    <item name="progressBarStyleLarge">@android:style/Widget.Holo.Light.ProgressBar.Large</item>
    <item name="progressBarStyleInverse">@android:style/Widget.Holo.Light.ProgressBar.Inverse</item>
    <item name="progressBarStyleSmallInverse">@android:style/Widget.Holo.Light.ProgressBar.Small.Inverse</item>
    <item name="progressBarStyleLargeInverse">@android:style/Widget.Holo.Light.ProgressBar.Large.Inverse</item>
    <item name="seekBarStyle">@android:style/Widget.Holo.Light.SeekBar</item>
    <item name="ratingBarStyle">@android:style/Widget.Holo.Light.RatingBar</item>
    <item name="ratingBarStyleIndicator">@android:style/Widget.Holo.Light.RatingBar.Indicator</item>
    <item name="ratingBarStyleSmall">@android:style/Widget.Holo.Light.RatingBar.Small</item>
    <item name="radioButtonStyle">@android:style/Widget.Holo.Light.CompoundButton.RadioButton</item>
    <item name="scrollViewStyle">@android:style/Widget.Holo.Light.ScrollView</item>
    <item name="horizontalScrollViewStyle">@android:style/Widget.Holo.Light.HorizontalScrollView</item>
    <item name="spinnerStyle">?android:attr/dropDownSpinnerStyle</item>
    <item name="dropDownSpinnerStyle">@android:style/Widget.Holo.Light.Spinner.DropDown</item>
    <item name="starStyle">@android:style/Widget.Holo.Light.CompoundButton.Star</item>
    <item name="tabWidgetStyle">@android:style/Widget.Holo.Light.TabWidget</item>
    <item name="textViewStyle">@android:style/Widget.Holo.Light.TextView</item>
    <item name="errorMessageBackground">@android:drawable/popup_inline_error_holo_light</item>
    <item name="errorMessageAboveBackground">@android:drawable/popup_inline_error_above_holo_light</item>
    <item name="webTextViewStyle">@android:style/Widget.Holo.Light.WebTextView</item>
    <item name="webViewStyle">@android:style/Widget.Holo.Light.WebView</item>
    <item name="dropDownItemStyle">@android:style/Widget.Holo.Light.DropDownItem</item>
    <item name="spinnerDropDownItemStyle">@android:style/Widget.Holo.Light.DropDownItem.Spinner</item>
    <item name="spinnerItemStyle">@android:style/Widget.Holo.TextView.SpinnerItem</item>
    <item name="dropDownHintAppearance">@android:style/TextAppearance.Holo.Widget.DropDownHint</item>
    <item name="keyboardViewStyle">@android:style/Widget.Holo.KeyboardView</item>
    <item name="quickContactBadgeStyleWindowSmall">@android:style/Widget.Holo.QuickContactBadge.WindowSmall</item>
    <item name="quickContactBadgeStyleWindowMedium">@android:style/Widget.Holo.QuickContactBadge.WindowMedium</item>
    <item name="quickContactBadgeStyleWindowLarge">@android:style/Widget.Holo.QuickContactBadge.WindowLarge</item>
    <item name="quickContactBadgeStyleSmallWindowSmall">@android:style/Widget.Holo.QuickContactBadgeSmall.WindowSmall</item>
    <item name="quickContactBadgeStyleSmallWindowMedium">@android:style/Widget.Holo.QuickContactBadgeSmall.WindowMedium</item>
    <item name="quickContactBadgeStyleSmallWindowLarge">@android:style/Widget.Holo.QuickContactBadgeSmall.WindowLarge</item>
    <item name="listPopupWindowStyle">@android:style/Widget.Holo.Light.ListPopupWindow</item>
    <item name="popupMenuStyle">@android:style/Widget.Holo.Light.PopupMenu</item>
    <item name="stackViewStyle">@android:style/Widget.Holo.StackView</item>
    <item name="activityChooserViewStyle">@android:style/Widget.Holo.Light.ActivityChooserView</item>

    <!-- Preference styles -->
    <item name="preferenceScreenStyle">@android:style/Preference.Holo.PreferenceScreen</item>
    <item name="preferenceFragmentStyle">@style/PreferenceFragment.Holo</item>
    <item name="preferenceCategoryStyle">@android:style/Preference.Holo.Category</item>
    <item name="preferenceStyle">@android:style/Preference.Holo</item>
    <item name="preferenceInformationStyle">@android:style/Preference.Holo.Information</item>
    <item name="checkBoxPreferenceStyle">@android:style/Preference.Holo.CheckBoxPreference</item>
    <item name="switchPreferenceStyle">@android:style/Preference.Holo.SwitchPreference</item>
    <item name="yesNoPreferenceStyle">@android:style/Preference.Holo.DialogPreference.YesNoPreference</item>
    <item name="dialogPreferenceStyle">@android:style/Preference.Holo.DialogPreference</item>
    <item name="editTextPreferenceStyle">@android:style/Preference.Holo.DialogPreference.EditTextPreference</item>
    <item name="ringtonePreferenceStyle">@android:style/Preference.Holo.RingtonePreference</item>
    <item name="preferenceLayoutChild">@android:layout/preference_child_holo</item>
    <item name="detailsElementBackground">@android:drawable/panel_bg_holo_light</item>

    <!-- Search widget styles -->
    <item name="searchWidgetCorpusItemBackground">@android:color/search_widget_corpus_item_background</item>

    <!-- Action bar styles -->
    <item name="actionDropDownStyle">@android:style/Widget.Holo.Light.Spinner.DropDown.ActionBar</item>
    <item name="actionButtonStyle">@android:style/Widget.Holo.Light.ActionButton</item>
    <item name="actionOverflowButtonStyle">@android:style/Widget.Holo.Light.ActionButton.Overflow</item>
    <item name="actionModeBackground">@android:drawable/cab_background_top_holo_light</item>
    <item name="actionModeSplitBackground">@android:drawable/cab_background_bottom_holo_light</item>
    <item name="actionModeCloseDrawable">@android:drawable/ic_cab_done_holo_light</item>
    <item name="actionBarTabStyle">@style/Widget.Holo.Light.ActionBar.TabView</item>
    <item name="actionBarTabBarStyle">@style/Widget.Holo.Light.ActionBar.TabBar</item>
    <item name="actionBarTabTextStyle">@style/Widget.Holo.Light.ActionBar.TabText</item>
    <item name="actionModeStyle">@style/Widget.Holo.Light.ActionMode</item>
    <item name="actionModeCloseButtonStyle">@style/Widget.Holo.Light.ActionButton.CloseMode</item>
    <item name="android:actionBarStyle">@android:style/Widget.Holo.Light.ActionBar.Solid</item>
    <item name="actionBarSize">@dimen/action_bar_default_height</item>
    <item name="actionModePopupWindowStyle">@android:style/Widget.Holo.Light.PopupWindow.ActionMode</item>
    <item name="actionBarWidgetTheme">@null</item>

    <item name="actionModeCutDrawable">@android:drawable/ic_menu_cut_holo_light</item>
    <item name="actionModeCopyDrawable">@android:drawable/ic_menu_copy_holo_light</item>
    <item name="actionModePasteDrawable">@android:drawable/ic_menu_paste_holo_light</item>
    <item name="actionModeSelectAllDrawable">@android:drawable/ic_menu_selectall_holo_light</item>
    <item name="actionModeShareDrawable">@android:drawable/ic_menu_share_holo_light</item>
    <item name="actionModeFindDrawable">@android:drawable/ic_menu_find_holo_light</item>
    <item name="actionModeWebSearchDrawable">@android:drawable/ic_menu_search_holo_light</item>

    <item name="dividerVertical">?android:attr/listDivider</item>
    <item name="dividerHorizontal">?android:attr/listDivider</item>
    <item name="buttonBarStyle">@android:style/Holo.Light.ButtonBar</item>
    <item name="buttonBarButtonStyle">?android:attr/borderlessButtonStyle</item>
    <item name="segmentedButtonStyle">@android:style/Holo.Light.SegmentedButton</item>

    <!-- SearchView attributes -->
    <item name="searchDropdownBackground">@android:drawable/search_dropdown_light</item>

    <item name="searchDialogTheme">@style/Theme.Holo.Light.SearchBar</item>

    <!-- NumberPicker attributes and styles-->
    <item name="numberPickerUpButtonStyle">@style/Widget.Holo.Light.ImageButton.NumberPickerUpButton</item>
    <item name="numberPickerDownButtonStyle">@style/Widget.Holo.Light.ImageButton.NumberPickerDownButton</item>
    <item name="numberPickerInputTextStyle">@style/Widget.Holo.Light.EditText.NumberPickerInputText</item>
    <item name="numberPickerStyle">@style/Widget.Holo.Light.NumberPicker</item>

    <!-- CalendarView style-->
    <item name="calendarViewStyle">@style/Widget.Holo.Light.CalendarView</item>

    <!-- TimePicker style -->
    <item name="timePickerStyle">@style/Widget.Holo.Light.TimePicker</item>

    <!-- DatePicker style -->
    <item name="datePickerStyle">@style/Widget.Holo.Light.DatePicker</item>

    <item name="fastScrollThumbDrawable">@android:drawable/fastscroll_thumb_holo</item>
    <item name="fastScrollPreviewBackgroundLeft">@android:drawable/fastscroll_label_left_holo_light</item>
    <item name="fastScrollPreviewBackgroundRight">@android:drawable/fastscroll_label_right_holo_light</item>
    <item name="fastScrollTrackDrawable">@android:drawable/fastscroll_track_holo_light</item>
    <item name="fastScrollOverlayPosition">atThumb</item>

</style> 
```

# cordova - 使用 phonegap 的 Android 平板电脑应用程序？

> ID：10679820
> 
> 赞同：1
> 
> 时间：2012-05-21T05:19:16.047
> 
> 标签：cordova, android

我是 android 新手，目前正在使用 phonegap 开发 android 智能手机应用程序，我们希望同时在 android 平板电脑上工作。我想知道我们可以将Android智能手机的相同代码和程序用于平板电脑版本或概念上的任何差异。谁能帮助我简要介绍如何使用phonegap开始使用平板电脑应用程序以及在开发平板电脑应用程序时我应该记住哪些事情或概念？我希望我的问题很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:38:18.003

使用响应式布局听起来很有可能。你看过 Twitter 上的 Bootstrap 吗？他们的响应式布局易于使用，将帮助您使用您的应用程序。[http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

如果平板电脑的分辨率与手机相比太小，您可能需要更改 Android Manifest 中的分辨率。

此外，较新的 Android 上的 css 动画效果很好，但在较旧的 Android 上却非常不稳定。我拥有的 Android 平板电脑 Galaxy S 在动画方面表现不佳。这是由于它试图动画的视觉记忆量。平板电脑的动画效果通常比手机慢。

就您的 javascript 逻辑而言，移植它应该没有任何问题。

祝你好运。

# cakephp - 如何在查找或读取中检索 cakephp 使用的查询

> ID：10679828
> 
> 赞同：1
> 
> 时间：2012-05-21T05:20:23.287
> 
> 标签：cakephp

通常我们通过检查 sql-dump 来检查 find 操作。但是如果通过ajax完成查询操作是不可能的。我们如何检查在背景中完成的任何 find 操作，以及在 pr() 中打印它的任何方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:12:49.860

因此，要查找查询，您必须按照以下步骤操作

1- 现在去 cake 文件夹并找到这个路径 **cake\libs\model\datasources\dbo\dbo_mysql.php**

2-找到函数**_execute**。该函数负责 cakephp 从其函数中执行的所有查询。

3-调试 $sql 变量，如

```
function _execute($sql) {
            echo $sql;
        return mysql_query($sql, $this->connection);
    } 
```

4- 死掉cakephp后台检索功能后的代码。喜欢

```
$referral = $this->find('first', array(
            'conditions' => array('Referral.id' => $id)
        ));
die(); 
```

5-如果这是 ajax 调用，您可以在 firebug 中查看查询。

*注意：最后显示的查询将是您死前的愿望查询*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:36:03.570

如果您提供`$this->layout='ajax'`控制器代码，则它不会显示查询。因此，如果您想查看查询，只需将布局设置为您的正常布局（仅用于测试）并检查查询，然后还原代码。

# java - 区分大小写的 jcombobox

> ID：10679829
> 
> 赞同：0
> 
> 时间：2012-05-21T05:20:35.187
> 
> 标签：java, swing, jcombobox, case-sensitive

我的问题有点棘手。我正在使用一个`Editable JComboBox`. 它可能包含区分大小写的项目。例如，它可能有`Item1`和`item1`。因此，在我的情况下，这两个项目应该被视为不同。

但问题是，这两个项目被视为相同。无论我选择了哪些项目，它总是选择第一个（`Item1`）。我在谷歌中搜索过，但没有找到任何解决方案。这就是为什么，我在这里。

**代码：**

```
//loading of Items
jdcbmItemType = new javax.swing.DefaultComboBoxModel(ItemTypeHandler.getItemTypeComboData(MainFrame.companyId));

private void jcbItemTypeMouseReleased(MouseEvent evt)
{
    if (jcbItemType.getSelectedIndex() != -1)
    {
        loadItemTypeDetails(((ItemObject) jcbItemType.getSelectedItem()).getId());
    }
    else
    {
        resetFields();
    }
}

public static Vector<ItemObject> getItemTypeComboDataV(BigInteger companyId, BigInteger categoryId, boolean addFirstElement, TriState deleted) throws ExceptionWrapper, EJBException
{
    try
    {            
        return (Vector<ItemObject>)lookupItemTypeFacade().getItemTypeComboData(companyId, categoryId, addFirstElement, deleted);
    } catch (ExceptionWrapper exceptionWrapper)
    {
        throw exceptionWrapper;
    } catch (EJBException ejbEx)
    {
        throw ejbEx;
    } catch (Exception ex)
    {
        throw new ExceptionWrapper(ex.getMessage());
    }
} 
```

`ItemObject`是一个 customClass，其中一个字段是`BigInteger`，另一个字段是`String`。

`getItemTypeComboData`运行正常。所以，你可以假设从这里得到一个列表，`ItemObject`它会很好地将它转换为`Vector<ItemObject>`

`jcbItemType.getSelectedIndex()``Item1`和总是返回相同的索引`item1`。但它返回不同的索引`item2`。

我知道，如果我可以使用`itemStateChanged`事件会更好。但就我而言，我无法使用它。但我的问题是，对于不同的名称字符串，但对于不同大小写的相同字符串，效果很好`MouseReleased`。`FocusLost`我真的很迷茫。

**另一种提问方式：**

是否`MouseReleased`或`FocusLost`事件检查区分大小写的项目？

如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T05:57:50.210

这是我的[SSCCE](http://sscce.org)，它工作正常，如果这不是您要找的，那么发布您的[SSCCE](http://sscce.org)以获得更好的帮助！

* * *

```
import javax.swing.*;
import java.awt.event.*;

public class ComboBoxTest {

    JComboBox combo;
    JTextField txt;

    public static void main(String[] args) {
        new ComboBoxTest();
    }

    public ComboBoxTest() {
        String items[] = {"Item1", "item1"};
        JFrame frame = new JFrame("JComboBox Case-sensitivity Test");
        JPanel panel = new JPanel();
        combo = new JComboBox(items);
        combo.setEditable(true);

        txt = new JTextField(10);
        panel.add(combo);
        panel.add(txt);
        frame.add(panel);
        combo.addItemListener(new ItemListener() {

            @Override
            public void itemStateChanged(ItemEvent ie) {
                String str = (String) combo.getSelectedItem();
                txt.setText(str);
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 100);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:31:44.077

我认为您正在这样做：-

```
String[] items = {"item1", "item2"};
JComboBox cb = new JComboBox(items);
cb.setEditable(true); 
```

现在您必须访问已插入其中的 JCombobox 元素，如下所示：- MyItemListener actionListener = new MyItemListener(); cb.addItemListener(actionListener);

```
class MyItemListener implements ItemListener {
// This method is called only if a new item has been selected.
public void itemStateChanged(ItemEvent evt) {
    JComboBox cb = (JComboBox)evt.getSource();

    // Get the affected item
    Object item = evt.getItem();

    if (evt.getStateChange() == ItemEvent.SELECTED) {
        // Item was just selected
    } else if (evt.getStateChange() == ItemEvent.DESELECTED) {
        // Item is no longer selected
    }
    }
 } 
```

添加 itemListener 后，您可以使用单个 JCombobox 项目执行不同的任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T06:16:37.427

试试这个，效果很好...

使用 ActionListener() 捕获点击...然后使用 getSelectedItem() 捕获在 JComboBox 上单击的项目

试试这个，

检查你的控制台的输出

```
myComboBox.addItemListener(new ItemListener() {

        @Override
        public void itemStateChanged(ItemEvent ie) {
            String str = (String) myComboBox.getSelectedItem();
           System.out.println(str);
        } 
```

# php - 获取 PHP 以显示 PING RESPONSE

> ID：10679831
> 
> 赞同：0
> 
> 时间：2012-05-21T05:21:06.687
> 
> 标签：php, exec, ping

我无法让我的 PHP 脚本显示对访问者 IP 的响应时间，以毫秒为单位。我已经看到了：[PHP - get server to ping a visitor IP and return the ping in ms](https://stackoverflow.com/questions/7555846/php-get-server-to-ping-a-visitors-ip-and-return-the-ping-in-ms)

当我尝试做一些相同的代码时，我的所有输出都是

“8.8.8.8 还活着”

我实际上希望它返回平均往返时间或仅以毫秒为单位的响应时间。

这是我的代码，仅输出上述内容：

```
$pinginfo = array();
exec("/usr/sbin/ping -v -c 1 8.8.8.8", $pinginfo);
var_dump($pinginfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:27:43.120

尝试将您的执行结果保存到 $pinginfo

```
$pinginfo = exec("/bin/ping -v -c 1 8.8.8.8");
echo $pinginfo; 
```

你现在这样做的方式，你只是保存整数返回值。exec 函数从执行的标准输出返回最后一个字符串。

# jquery - jScrollPane 通过单击滚动到顶部

> ID：10679832
> 
> 赞同：0
> 
> 时间：2012-05-21T05:21:10.757
> 
> 标签：jquery, jscrollpane

我在使用[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)时遇到了一些麻烦。我在垂直窗格中创建了一个链接列表。这些链接触发 jquery 加载到另一个 div。当我向下滚动链接列表并单击一个时，它将窗格滚动回顶部并且不会触发加载。如果滚动条已经在顶部，则负载工作正常。

```
--html--
    <div id="projects" class="span-9" style="margin:0 !important">
        {% for project in projects %}
            <a href="project/{{ project.id }}/details">
                <div class="left clear" style="width:335px; margin:0 !important; {% if loop.first %} border-top:1px solid #AAA;{% endif %} border-bottom:1px solid #AAA;">
                    <img src="{{asset(project.thumbnail)}}" class="left" style="width:150px; height:100px; margin:5px 5px 5px 0;">
                    <span style="font-weight:bold">{{ project.title }}</span><br>
                    {{ project.short }}
                </div>
            </a>
        {% endfor %}
    </div>

    <div id="details"></div>

--js--  
    $(function(){   
        $('#projects').jScrollPane();

        $("#projects a").live("click", function(){
            $("#details").load(this.href);
            return false;
        });
    });

--cs--
        #projects{ height: 667px; overflow:auto ;} 
```

任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:29:22.727

我和你有同样的问题。我所做的是删除`<a>`div 周围的标签并在 div 上放置一个`onclick`重定向。这为我解决了问题；希望它对你也一样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:39:14.087

也许晚了，但是当你坚持使用 href 时，这里会发布一个很好的修复：[https ://groups.google.com/forum/?fromgroups=#!topic/jscrollpane/Ww1jwPVfAKE](https://groups.google.com/forum/?fromgroups=#!topic/jscrollpane/Ww1jwPVfAKE)

# objective-c - 应用程序在启动时崩溃

> ID：10679833
> 
> 赞同：-2
> 
> 时间：2012-05-21T05:21:14.453
> 
> 标签：objective-c, ios, xcode

嗨，我早些时候做了一些测试，我的应用程序运行得很好。我想做更多的测试，所以我决定从我的设备中删除该应用程序，然后通过运行重新安装它。

好吧，现在由于某种原因，我进入了我的启动屏幕出现的阶段，然后它崩溃了，我得到了错误：

```
 Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]' 
```

这显然意味着数组越界正确吗？但是为什么现在以及我如何才能知道这发生在哪里和哪个视图控制器上？当我尝试通过再次运行它来重新安装应用程序时，它怎么会突然运行，我得到这个错误？

谢谢

**编辑** 错误与以下代码中的数组有关

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

  exploreViewController *view1 = [[exploreViewController alloc] initWithNibName:@"exploreViewController" bundle:nil];
view1.title= @"Explore";

Upcoming *view2 = [[Upcoming alloc] initWithNibName:@"Upcoming" bundle:nil];
view2.title = @"Upcoming";

calcViewController *view3 = [[calcViewController alloc] initWithNibName:@"calcViewController" bundle:nil];
view3.title = @"Calc";

UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:view1];
UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:view2];
UINavigationController *nav3 = [[UINavigationController alloc] initWithRootViewController:view3];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:nav1,nav2,nav3,nil];
self.tabBarItem = [[[UITabBarItem alloc] init] autorelease];

NSArray *tabBarItems = self.tabBarController.tabBar.items; 
UIImage *tab1 = [UIImage imageNamed:@"85-trophy.png"]; 
UIImage *tab2 = [UIImage imageNamed:@"12-eye.png"]; 
UIImage *tab3 = [UIImage imageNamed:@"237-key.png"];

NSArray *tabBarImages = [[[NSArray alloc] initWithObjects:tab1, tab2, tab3,nil]autorelease]; 
NSInteger tabBarItemCounter; 
for (tabBarItemCounter = 0; tabBarItemCounter < [tabBarItems count]; tabBarItemCounter++) 
{ 
    tabBarItem = [tabBarItems objectAtIndex:tabBarItemCounter]; 
    tabBarItem.image = [tabBarImages objectAtIndex:tabBarItemCounter]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:37:12.593

好吧，这次崩溃的原因如下：您正在向 tabBar 添加五个项目（nav1、nav2、nav3、nav4、nav6），但您的选项卡只有三个图像（tab1、tab2、tab3）。因此，当 for 循环到达第四个选项卡时，它会崩溃，因为`tabBarImages`它只包含三个对象。

除此之外，您的代码看起来有点乱 - 这可能是第一眼看不到错误的原因。

**// 编辑**

您使事情复杂化了-只需尝试以下代码

```
UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:__your_viewController__];
nav1.title = @"Explore";
nav1.tabBarItem.image = [UIImage imageNamed:@"85-trophy.png"];

UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:__your_viewController__];
nav2.title = @"Upcoming";
nav2.tabBarItem.image = [UIImage imageNamed:@"12-eye.png"];

UINavigationController *nav3 = [[UINavigationController alloc] initWithRootViewController:__your_viewController__];
nav3.title = @"Calc";
nav3.tabBarItem.image = [UIImage imageNamed:@"237-key.png"];

UITabBarController *tabBarController = [[UITabBarController alloc] init];    
[tabBarController setViewControllers:[NSArray arrayWithObjects:nav1, nav2, nav3, nil]];

[nav1 release];
[nav2 release];
[nav3 release]; 
```

# c# - 如何从 C# 代码设置 WPF ComboBox 项的值

> ID：10679838
> 
> 赞同：0
> 
> 时间：2012-05-21T05:21:51.833
> 
> 标签：c#, .net, wpf, xaml, controls

我正在像这样填充我的 WPF ComboBox

```
foreach (Function fx in XEGFunctions.GetAll())
{
    ComboBoxItem item = new ComboBoxItem();
    item.Content = fx.Name;
    item.ToolTip = fx.Signature;               
    //item.( some property ) = fx.FunctionValue;
    cmbBoxTransformation.Items.Add(item);
}
cmbBoxTransformation.SelectedIndex = 0; 
```

如何为每个 ComboBoxItem 设置一些不同的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:25:07.600

如果您要设置的值仅在后端使用，而不向用户显示，则 Tag 属性可能是您最好的选择。

```
item.Tag = fx.FunctionValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:27:32.347

两种选择

1.  您可以从 ComboBoxItem 创建派生类型，并在派生类型中定义属性。

2.  您可以创建任意项目集合（使用您的自定义属性），并将 ComboBox.ItemsSource 设置为该集合，并将 DisplayMemberPath 设置为需要在组合框中显示的字段。

[绑定组合框以显示源和绑定源](http://www.lhotka.net/weblog/CommentView,guid,7bec0b2c-60c5-4e46-aac0-be029f802bd9.aspx)

[SelectedValue 和 DisplayMemberPath 如何挽救了我的生命](http://www.codeproject.com/Articles/31656/How-SelectedValue-and-DisplayMemberPath-saved-my-l)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T15:45:42.140

这个小勾可能会帮助某人

```
<ComboBox SelectedIndex="1" SelectedValuePath="Tag"  SelectedValue="{Binding SampleDept,Mode=OneWayToSource}" >
                                <ComboBoxItem Content="8-bit" Tag="8"  ></ComboBoxItem>
                                <ComboBoxItem Content="16-bit" Tag="16" ></ComboBoxItem>
                                <ComboBoxItem Content="24-bit" Tag="24"></ComboBoxItem>
                                <ComboBoxItem Content="32-bit" Tag="32"></ComboBoxItem>
                            </ComboBox> 
```

> ```
> public class SampleModel{
> 
>    public int SampleDept{
> 
>             get { return _sampleDept; }
>             set {
>                 
>                 _sampleDept = value;
>             OnPropertyChanged("SampleDept");
>             }
>         }
> } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-10T10:45:26.783

```
var listItems = val.Split('$');
DataTemplate dt = new DataTemplate();
var combo = new FrameworkElementFactory(typeof(ComboBox));
combo.SetValue(ComboBox.ItemsSourceProperty, listItems);
combo.SetValue(ComboBox.SelectedValueProperty, "Whatever");
combo.SetBinding(ComboBox.SelectedValueProperty, new Binding("Value") { Source = mkvc });
dt.VisualTree = combo;
dt.Seal(); 
```

将此添加到您想要添加组合框的任何编辑器模板中 => mkvc 是一个用于保存我的数据的类

```
PropertyDefinition pd = new PropertyDefinition();
pd.EditorTemplate = dt;
//rpg =>radPropertyGrid
rpg.PropertyDefinitions.Add(pd);
rpg.Item = propertyList; 
```

propertylist 是 myclass 的列表

# c++ - ifstream get() 不填充字符数组

> ID：10679839
> 
> 赞同：1
> 
> 时间：2012-05-21T05:21:54.890
> 
> 标签：c++, iostream

我不知道该怎么做

```
#include "fstream"
#include "iostream"

using namespace std;

#define out(a) cout << #a << ": " << a << '\n'

void print(string s)
{
  cout << s << '\n';
}

 int main()
{
  ifstream readt1;
  readt1.open("test1.yaml");

  while(readt1.good())
  {
    char cc[128];
    readt1.get(cc,128);
    out(cc);
  }
readt1.close();
} 
```

该代码...输出：

```
cc: version: 0.14.1
cc: 
```

test.yaml 就是这个

```
version: 0.14.1
name: scrumbleship
author: dirkson
description: >
  A minecraft like game that allows you
  to build your own spaceship! 
```

我已经尝试了很多方法来让它工作，但它根本没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:32:21.763

如果`readt1.ignore();`在 get() 之后添加 a 它应该可以工作：

```
 while(readt1.good())
  {
    char cc[128];
    readt1.get(cc,128);
    readt1.ignore(); // <--- add this to ignore newline
    out(cc);
  } 
```

这解决了眼前的问题，但使用`std::getline`C `std::string`++ 会更好。就像是：

```
while(std::getline(readt1, line)) {// Do stuff} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T05:27:04.757

您应该使用`getline()`通过 ifstream 读取行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:29:32.100

另外，我会在循环之外获取第一行，并且循环应该检查 EOF 以确保您获得整个文件。good() 不只是暗示有要读取的文件吗？

# mule - Mule Flow 中的自定义元素

> ID：10679846
> 
> 赞同：0
> 
> 时间：2012-05-21T05:23:00.913
> 
> 标签：mule

我想向 mule 流添加一些自定义元素，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
xmlns:custom="http://www.example.com/schema/custom"
xsi:schemaLocation="
      http://www.example.com/schema/custom file:/example/schema/custom.xsd">

<flow name="myFlow">
    <custom:template name="generic-xml" type="flow"/>
    <custom:template name="file" type="message-source"/>
</flow>
</mule> 
```

是否有可能做到这一点？如果是，如何实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T16:29:31.107

为 Mule 配置创建自定义元素（消息源和处理器）的最简单方法是使用[DevKit](http://www.mulesoft.org/documentation/display/DEVKIT/Home)。

不要被 DevKit 附带的*云连接器*营销术语所迷惑：它可以让您做的不仅仅是连接到云！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T16:31:19.677

您可以实现[MessageProcessor](http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/processor/MessageProcessor.html)接口并使用[自定义处理器或处理器](http://www.mulesoft.org/documentation/display/MULE3USER/Routing+Message+Processors#RoutingMessageProcessors-CustomProcessor)调用它：

或者，您也可以使用[DevKit](http://www.mulesoft.org/documentation/display/DEVKIT/Creating+Message+Processors)编写自己的模块。

# database - 为 nhibernate 指定命名 SQL Server 实例

> ID：10679847
> 
> 赞同：1
> 
> 时间：2012-05-21T05:23:01.240
> 
> 标签：database, nhibernate, fluent-nhibernate, instance, sessionfactory

我第一次尝试在 ASP.NET MVC 3 应用程序上使用流利的 nHibernate。因为我有多个 SQL Server Express 实例，所以在使用 Fluently.Configure() 方法创建会话工厂时，我一直在尝试指定一个命名实例以及服务器。我的数据库连接字符串的格式为：

```
Server=myServerName\theInstanceName;Database=myDataBase;Trusted_Connection=True; 
```

这会导致 nHibernate 异常读取：

> 初始化字符串的格式不符合从索引 19 开始的规范

其中给定的索引对应于实例名称之前的斜杠。此连接字符串适用于 Entity Framework 4。那么如何在 nHibernate 中指定要连接的命名实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:40:12.580

由于您在代码中执行此操作，因此您必须`\`通过将其加倍 ( `\\`) 或使用逐字字符串来转义：

```
connectionString = @"Server=myServerName\theInstanceName;Database=myDataBase;..." 
```

否则，`\t`被解释为制表符。

# css - Sass 约定

> ID：10679852
> 
> 赞同：-1
> 
> 时间：2012-05-21T05:24:14.897
> 
> 标签：css, sass

这是一个关于 sass 最佳实践的问题。

假设我有一个 _colors.scss 文件，其中包含变量分配，例如：

```
 $white : #ffffff;
 $black : #000000; 
```

我有一个使用颜色变量的 _typography.scss 文件：

```
 H1 {
 color: $white;
 }
 h2 {
  color : $black;
  } 
```

在 styles.scss 文件中：

我这样导入：@import "colors"; @import "排版";

我的想法是，在 screen.scss 文件中，您首先要导入颜色，然后是排版。由于首先导入了颜色，因此这些变量可用于排版和屏幕。

有人告诉我，你必须在 _typography.scss 和 styles.scss 中都导入 _colors.scss。那不是多余的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:38:09.080

不久前，我在 Rails 的资产管道中遇到了一些问题，我必须在其他所有样式表中导入 mixin/variable 样式表，才能在 Heroku 上正确预编译。我不知道这个问题是否仍然存在，或者只是我的配置有问题，但是如果你可以在主样式表中只导入一次文件，并且它在开发中工作，并且可以编译，那么我认为可以肯定地说您*不必*将其包含两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T15:39:25.573

不需要导入两次。

我建议使用 project_variable.scss 文件，在其中声明将在项目中使用的所有变量。在 main.css 的开头导入它（在其中导入 _colors et _typo）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T08:01:45.390

你的想法是正确的。导入变量后，只要在调用变量之前完成，其他 @import 就可以使用它们。

你应该看看“[如何构建一个 sass 项目](http://thesassway.com/beginner/how-to-structure-a-sass-project)”。它很有帮助

# c# - 在我的程序中为图表着色并添加值

> ID：10679853
> 
> 赞同：0
> 
> 时间：2012-05-21T05:24:21.540
> 
> 标签：c#, charts

我想问是否可以将图表的负值着色为与正值不同的颜色。另外，我如何在值上输入标记，例如在 1、2、3..10 等处标记值！值范围从 -300000 到 700000

该图表在 C# 中，我有一个执行以下操作的按钮：

```
decimal[] numbers = new decimal[20];

for (int i = 0; i < 20; i++) 
{  
    numbers[i] = Convert.ToDecimal(dataGridView1[7, i].Value);  
    chart1.Series["Loan_Balance"].Points.AddXY(i+1, numbers[i]); } 
    chart1.Series["Loan_Balance"].Color = Color.Blue; 
    chart1.ChartAreas[0].AxisX.Interval = 1;
    chart1.ChartAreas[0].AxisY.Interval = 50000;
    chart1.Series["Loan_Balance"].ChartType = SeriesChartType.Range;
} 
```

我还想问，为什么当我直接从数据库（datagridview）输入值时。例如在 for 循环中，不是创建一个数组并将值从 datagridview 转换为十进制，而是直接绘制它们，如下所示：

```
chart1.Series["Loan_Balance"].Points.AddXY(i, dataGridView2[i, 0].Value); 
```

行为奇怪，`chart1.ChartAreas[0].AxisY.Interval = 50000;` 大多数时候它根本不起作用

如果您能帮助我，着色问题将更加重要，我将不胜感激。

在此先感谢您向 George Georgiou 致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:04:25.937

您应该直接创建点而不是使用`AddXY`. 这使您可以完全控制点，包括它的颜色。所以，而不是：

```
chart1.Series["Loan_Balance"].Points.AddXY(i+1, numbers[i]); 
```

利用：

```
var point = new DataPoint(i+1, numbers[i]);
point.Color = numbers[i] < 0 ? Color.Red : Color.Black; // or whatever logic
point.Label = numbers[i].ToString();                    // and so on
chart1.Series["Loan_Balance"].Points.Add(point); 
```

您可以在`DataPoint`此处查看其他可用属性：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.datapoint.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.datapoint.aspx)

# android - 我们可以在滚动视图中有列表视图吗？

> ID：10679859
> 
> 赞同：0
> 
> 时间：2012-05-21T05:25:29.287
> 
> 标签：android

我已将滚动视图应用于整个布局，并且该布局有一个列表视图。在模拟器中运行应用程序时，两个滚动视图都在为整个布局工作一个滚动视图，另一个为 listview 滚动视图（两者都工作正常）。但是当我在手机中安装我的应用程序时，只有外部滚动视图正在工作，listview 的滚动视图不起作用。谁能告诉我问题的原因和解决方案。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ScrollView1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"> 

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg4"
android:orientation="vertical"
android:scrollbarAlwaysDrawVerticalTrack="true" >
 <ListView
        android:id="@+id/listViewTickets"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="10dp" >
    </ListView>
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_marginBottom="70dp"
    android:orientation="horizontal"
    >

    <Button
        android:id="@+id/btnNew"
        android:layout_width="80dp"
        android:layout_height="30dp"
        android:background="@drawable/btnnew" />

    <Button
        android:id="@+id/btnUpdate"
        android:layout_width="80dp"
        android:layout_height="30dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@drawable/edit" />
</LinearLayout> 
```

列表视图的内容是动态显示的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:32:52.313

列表视图已经是可滚动的，因此您无法将其添加到滚动视图中。这是负责 ListView 的 Google 工程师的类似问题和回答： [如何将 ListView 放入 ScrollView 而不会崩溃？](https://stackoverflow.com/questions/3495890/how-can-i-put-a-listview-into-a-scrollview-without-it-collapsing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:51:46.147

我发现 youtube 视频[Google I/O 2010 - ListView](http://www.youtube.com/watch?v=wDBM6wVEO70)的世界是必不可少的手表。其中提到永远不要使用多个滚动小部件，除非它们在不同的轴上滚动。

# android - 如何有旋转图标的效果？

> ID：10679860
> 
> 赞同：0
> 
> 时间：2012-05-21T05:25:32.143
> 
> 标签：android

![在此处输入图像描述](../Images/d568da3a8e88894c3ed0e4fd6341e5f9.png)

您会看到图标是旋转的。如何在 Android 上实现这一点？是通过 OpenGL 还是有其他更简单的实现。这几个月来一直困扰着我，我只需要一个指针或一个突破性的代码。教程会很有帮助...请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:32:46.777

有一个[`project 3D Carousel`](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)，你可以得到它，由于截图似乎是自定义的主屏幕，所以你必须提供自己的[自定义主屏幕](https://stackoverflow.com/a/3666849/593709)，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T06:02:51.790

作为 Google I/O 2011 上“为手机和平板电脑设计 Android UI”会议的一部分，Google 发布了一个带有源代码的轮播示例。您可以在[此处](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=2&q=)获取源代码。它使用[Renderscript](http://developer.android.com/guide/topics/renderscript/index.html)创建 3D 效果。

# ios - “选择器'RequestWithUrl'xcode ios的未知类方法

> ID：10679864
> 
> 赞同：0
> 
> 时间：2012-05-21T05:26:02.913
> 
> 标签：ios, xcode

当我做：

```
[webView LoadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://wwww.google.com"]]]; 
```

我得到的错误是`No known class method for selector requestwithurl`

那么我该如何解决呢？

# c# - 逐页迭代的 OpenXML 字处理

> ID：10679874
> 
> 赞同：0
> 
> 时间：2012-05-21T05:27:36.463
> 
> 标签：c#, ms-word, openxml, openxml-sdk

如何逐页循环？我需要在不使用页眉、页脚和水印的情况下为所有页面设置一些元素到顶部和底部。我使用下面的代码，但它不适用于所有文档。

```
public void AddLabel()
{
   IEnumerable<Paragraph> topP = wdDoc.MainDocumentPart.Document.Body.Elements<Paragraph>();
   bool skip = false;
   foreach (Paragraph p in topP)
   {
      if (!ContainLastRenderedPageBreak(p))
      {
         if (!skip)
         {
           p.Append(runElementFooter.CloneNode(true));
           p.Append(runElementHeader.CloneNode(true));
           skip = true;
         }
       }
       else skip = false;
       if (ContainPageBreak(p))
       {
         p.Append(runElementFooter.CloneNode(true));
         p.Append(runElementHeader.CloneNode(true)); 
         skip = false; 
       }
   }
}
public bool ContainPageBreak(Paragraph p)
{
 return p.Elements<Run>().FirstOrDefault(r => r.Elements<Break>().FirstOrDefault(b => b.Type == BreakValues.Page) != null) != null;
}
public bool ContainLastRenderedPageBreak(Paragraph p)
{
 return p.Elements<Run>().FirstOrDefault(r => r.Elements<LastRenderedPageBreak>().FirstOrDefault() != null) != null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:08:35.487

像这样的东西（即依赖**LastRenderedPageBreak**）是你最好的方法，没有建立一个页面布局模型（如果你的页面只包含文本段落就很容易；在更一般的情况下更难）。

# ruby - 用什么代替两个包括？

> ID：10679894
> 
> 赞同：0
> 
> 时间：2012-05-21T05:29:07.960
> 
> 标签：ruby

以下红宝石条件的更简单方法是什么？我可以用什么代替两个`include?`

```
str1="str"
str2="sss"
string='string'

puts "yes" if (string.include?(str1) or string.include?(str2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:41:54.070

你可以这样做：

```
puts "yes" if string[str1] || string[str2] 
```

但是怎么样：

```
puts "yes" if [str1,str2].any?{|s| string[s]} 
```

甚至：

```
puts "yes" if string[/#{str1}|#{str2}/] 
```

# android - Android：如何获取最后 50 个单元（塔）的位置详细信息？

> ID：10679896
> 
> 赞同：18
> 
> 时间：2012-05-21T05:29:29.593
> 
> 标签：android, android-ndk

默认情况下，android 存储最后 200 个 wifi 连接和 50 个单元位置详细信息。

我通过使用`getConfiguredNetworks()`从`WifiManager`

同样，我想获取最后 50 个单元格位置详细信息。

请参阅[https://play.google.com/store/apps/details?id=ch.rrelmy.android.locationcachemap](https://play.google.com/store/apps/details?id=ch.rrelmy.android.locationcachemap)

在此示例中，他们将 API 密钥传递给服务器。我如何获得手机的密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T11:46:26.880

据此：[https://github.com/rrelmy/LocationCacheMap](https://github.com/rrelmy/LocationCacheMap)访问您提到的缓存需要 root 并且可能是因为 SDK 不支持它。

我确实发现，您可能可以通过侦听它们来构建自己的位置缓存：[按照这些说明](http://www.anddev.org/poor_mans_gps_-_celltowerid_-_location_area_code_-lookup-t257.html)将塔的经纬度对存储在 SQLite 数据库中。

# windows-phone-7 - 数据绑定不会更新后退导航的属性值

> ID：10679899
> 
> 赞同：1
> 
> 时间：2012-05-21T05:30:20.970
> 
> 标签：windows-phone-7, xaml, data-binding

```
<TextBlock Text="{Binding Name}"/> 
```

当我第一次导航到包含上述代码的页面时，绑定工作正常。然后我向前导航到对模型（名称属性）进行更改的页面并向后导航（使用返回键）。但是，Text 属性仍显示旧值。如何强制绑定值在后退导航时更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:12:28.533

确保您的模型实现了 INotifyPropertyChanged 并且 PropertyChanged 事件在 Name 的设置器中触发

# xcode - 如何在 iPhone 的 Xcode 4.3.2 iOS 5 SDK 中显示来自 wordpress 站点的 rss 提要？

> ID：10679901
> 
> 赞同：1
> 
> 时间：2012-05-21T05:30:25.660
> 
> 标签：xcode, wordpress, ios5, rss

我从以下网址查看了教程：[http](http://www.raywenderlich.com/) ://www.raywenderlich.com/和类似文章。

我已经下载并查看了github： [https ://github.com/mwaterfall/MWFeedParser](https://github.com/mwaterfall/MWFeedParser)

我还没有找到一种简单的方法来执行以下操作：

在表格视图中显示一个特定网站的最后 10 篇文章（通过 rss 提要）（有或没有图像现在不重要）。当用户点击一个表格视图单元格时，他们将看到带有图片和主体内容的帖子。

了解我仍然是一名业余 iOS 5 开发人员并且我还没有使用任何 3rd 方库（来自 github 等），因此任何可能将我引导到简单教程或如何轻松实现 3rd 方库的答案会有帮助的。同时，我将继续研究和了解我迄今为止除了 github 之外的发现。但我想我会在此期间发布这个问题。感谢您的任何支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T03:33:03.707

我找到了！还没试过，但本教程适用于 iOS 5.1 Xcode 4.3.2。我花了几天时间才找到我要找的东西，哈哈。 [http://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create-a-simple-rss-reader-for-ios.html](http://www.kieranmcgrady.com/blog/2012/4/25/tutorial-how-to-create-a-simple-rss-reader-for-ios.html)

# google-app-engine - 使用 Objectify 持久化 Blob

> ID：10679905
> 
> 赞同：0
> 
> 时间：2012-05-21T05:30:34.403
> 
> 标签：google-app-engine, objectify

虽然我知道 Appengine 已经有 Blob 服务，但我想尝试在数据存储区中存储大 Blob。

基本上我正在尝试使用 Objectify 来持久化这个对象：

[BigBlob.java](https://github.com/honzasterba/bigblobae/blob/master/src/org/honzasterba/bigblobae/BigBlob.java)

[BigBlobFragments.java](https://github.com/honzasterba/bigblobae/blob/master/src/org/honzasterba/bigblobae/BigBlobFragment.java)

但是，appengine 抱怨说：“ `BigBlobFragment is not a supported property type`”

对于 BigBlob 类型，我创建了一个带有 CRUD 操作的 DAO 类并注册了这样的类型：

```
static {
    ObjectifyService.register(BigBlob.class);
    //ObjectifyService.register(BigBlobFragment.class);
}

protected BigblobDaoImpl() {
    super(BigBlob.class);
} 
```

我实际上也尝试过注册 BigBlobFragment。

希望有人可以分享一些关于如何使用 Objectify 实际持久化大 blob 和片段的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:50:28.427

我自己没有使用过 Blob，但我注意到您`@PersistenceCapable`的实体上方有……那应该是 @Entity。

```
import com.googlecode.objectify.annotation.Entity; 
```

然后您应该能够使用 Objectify 注册您的实体。

```
ObjectifyService.register(BigBlob.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T00:50:44.753

您需要同时注册 BigBlob 和 BigBlobFragment 并将所有 JDO 注释替换为 Objectify 注释（假设您使用的是 ofy4。您可能还需要考虑将 BigBlobFragment 对象嵌入到 BigBlob 中以使用 @Embed 提高性能。

# java - 有哪些替代方案可以安全地将文件保存在 android 应用程序中？

> ID：10679907
> 
> 赞同：0
> 
> 时间：2012-05-21T05:31:02.473
> 
> 标签：java, android, encryption

我的应用程序将文件从服务器下载到应用程序中。可能有很多这些文件。一个文件大约 100 mb。我需要做一些事情来安全地将它们保存在我的应用程序中。

口渴我试图加密文件。这是多么糟糕的解决方案，因为加密和解密 100 mb 文件（它是 pdf 文件）需要一些时间。我也需要一次读取这个文件，所以我需要解密并将解密的文件写入其他文件，以便此时可以访问文件。此外，由于文件大小，我无法将此文件保存在内存中。那么也许有办法在保存文件的内部存储中加密目录？或者这不是一个好主意，因为我应该加密目录中的每个文件。

由于我的文件是 pdf，我可以将密码输入 int，但是如何做到这一点？我也可以尝试检查设备是否已植根，但我认为有人会找到解决方法。

那么你有什么建议呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:40:33.140

似乎您有 3 个选项：加密您的数据；将pdf存储在私人文件夹中；或不将文件存储在设备上。

**1）加密你的数据：**正如你所说，有一些缺点，因为 pdf 文件很大，如果你不能将它们存储在内存中，你需要在显示它们之前将解密的文件写入文件，所以这不会并不能真正解决你的问题。

**2) 将 pdf 存储在私人文件夹中：**或者，您可以将 pdf 存储在只能通过您的应用程序访问的私人文件夹中。这可以使用

```
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE); 
```

如此[处](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)所述。“`MODE_PRIVATE`将创建文件（或替换同名文件）并使其对您的应用程序私有”。我看到的唯一问题是人们是否使用有根手机并且可以访问您应用程序的私人文件夹。解决这个问题的唯一方法（据我所知）是使用选项 3。

**3）不要将文件存储在设备上：**您可以每次下载数据或部分数据。这将保证人们无法复制文件，因为它们永远不会保留在设备上。如果需要，您可以使用 Google Docs 仅流式传输文档的部分内容以减少下载要求。问题在于庞大的数据需求。

我认为您需要权衡利弊并决定哪个最适合您。我个人会选择选项 2。我认为您不会找到解决所有问题的解决方案。

# objective-c - opencv ios cvseq 存储

> ID：10679908
> 
> 赞同：0
> 
> 时间：2012-05-21T05:31:20.457
> 
> 标签：objective-c, ios, opencv, nsmutabledictionary

我打算预加载我存储在应用程序中的所有图像。图像的预加载包括：

1.  从包中读取图像。
2.  使用 cvExtractSurf 从 opencv 框架中提取对象描述符。
3.  将 IPLImage 与相应的对象描述符和关键点一起存储。

我在创建包含 CvSeq* 键和 CvSeq* decs 的字典时遇到问题。请建议如何将这些值存储在 NSMutableDictionary 中。

```
-(void) preloadImages:(NSMutableDictionary *)dictionary{
NSArray *d = [[NSBundle mainBundle] pathsForResourcesOfType:@"png" inDirectory:nil];
CvSURFParams params = cvSURFParams(500, 1);
CvMemStorage* storage = cvCreateMemStorage(0);

for( int i=0;i<[d count];i++){
    NSString *searchForMe = @"myapp.app/1";
    NSString *s = [[NSString alloc] initWithString:[d objectAtIndex:i]];
    NSRange range = [s rangeOfString:searchForMe];
    if( range.location != NSNotFound ){
        NSMutableDictionary *surfDict = [[NSMutableDictionary alloc] init];
        NSString *substring = [s substringFromIndex:range.location];
        substring = [substring stringByReplacingOccurrencesOfString:@"myapp.app/" withString:@""];
        UIImage *testImage = [UIImage imageNamed:substring];
        IplImage *iplTestImage = [OpenCVUtilities CreateGRAYIplImageFromUIImage:testImage];

        CvSeq *keys = 0 ;
        CvSeq *descs = 0;
        cvExtractSURF( iplTestImage, 0, &keys, &descs, storage, params );

        [surfDict setObject:(id)testImage forKey:@"uiImage"];

        NSLog(@"Image name : %@", substring);
        [dictionary setObject:surfDict forKey:[NSString stringWithFormat:@"%d",i]];
        [dictionary setObject:(NSObject *)keys forKey:@"keys"]; // error here
        [dictionary setObject:(NSObject *)descs forKey:@"descs"]; // error here
        [surfDict release];
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:12:54.723

创建一个具有 cvseq 类型的实例变量的类，将您的 cvseq 添加到对象中，然后将该类添加到字典中。

# php - 从 MySQL 数据库查看实时更新？

> ID：10679910
> 
> 赞同：0
> 
> 时间：2012-05-21T05:31:28.397
> 
> 标签：php, mysql, html, live

我想创建一个页面，人们可以在其中插入一些文本，按 Enter，然后将文本存储在 MySQL 数据库中。我可以这样做，但是我希望能够加载页面，输入密码，并查看所述数据库中所有信息的列表，然后每当将某些内容添加到数据库中时，它就会添加到页面上的列表中，无需我刷新页面或设置一些 javascript 代码来每五秒刷新一次页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:37:35.237

我相信 Satya 建议您使用 Ajax 来刷新数据而不刷新页面是正确的。您可以让它从 php 脚本请求更新的信息，该脚本查询您的数据库以获取您希望显示的数据，然后相应地设置页面上的元素。

[这可能是您使用 javascript http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)实现 ajax 调用的最佳方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:10:17.290

或者您只需借助`setInterval()`功能即可完成。您可以使用 div 调用 html 代码

```
$('#id').html("<htmlcode></htmlcode>"); 
```

示例：http: [//jsfiddle.net/ipsjolly/995PJ/6/](http://jsfiddle.net/ipsjolly/995PJ/6/)

# android - 如何创建这种 UI

> ID：10679913
> 
> 赞同：1
> 
> 时间：2012-05-21T05:31:50.857
> 
> 标签：android, user-interface

我可以知道如何创建这种 UI，请参阅下面发布的图片。

![在此处输入图像描述](../Images/f57b8549f189edfa7bfbf93c916ad8b0.png)

是简单的线性布局，有一些不同大小的按钮，或者不同的图像控件，或者这到底是什么？我怎样才能创建这种用户界面。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:49:17.090

试试这个。请注意，这是我自己的代码的复制粘贴，并且在此代码下方发布了某些属性：

```
<LinearLayout
    android:background="@drawable/nav_bar"
    style="@style/TitleBar" >
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="4dp"
        android:gravity="center"    >
        <ImageButton 
            style="@style/TitleBarAction"
            android:layout_margin="2dp"
            android:id="@+id/btnStatusUpdate"
            android:src="@drawable/ic_tab_compose_selected" >
        </ImageButton>
    </LinearLayout>
    <ImageView style="@style/TitleBarSeparator" />
    <TextView
        android:id="@+id/actionbarTitle"
        android:text="ACTIVITY"
        android:textColor="#FFFFFF"
        android:textSize="16sp"
        android:textStyle="bold"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:gravity="left|center_horizontal|center"
        android:padding="5dp"   >
    </TextView>
    <ImageView style="@style/TitleBarSeparator" />
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="4dp"
        android:gravity="center"    >
        <ImageButton 
            style="@style/TitleBarAction"
            android:layout_margin="2dp"
            android:id="@+id/btnStatusUpdate"
            android:src="@drawable/ic_tab_compose_selected" >
        </ImageButton>
     </LinearLayout>
     <ImageView style="@style/TitleBarSeparator" />
     <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="4dp"
            android:gravity="center"    >
            <ImageButton
                style="@style/TitleBarAction"
                android:layout_margin="2dp"
                android:id="@+id/btnUploadPhoto"
                android:src="@drawable/ic_tab_camera_selected"  >
        </ImageButton>
    </LinearLayout>
</LinearLayout> 
```

上述代码的样式元素。这在你的`styles.xml`：

```
 <style name="TitleBar">
        <item name="android:id">@id/title_container</item>
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">45dp</item>
        <item name="android:gravity">center</item>
        <item name="android:orientation">horizontal</item>
    </style>

    <style name="TitleBarSeparator">
        <item name="android:layout_width">1px</item>
        <item name="android:layout_height">fill_parent</item>
        <item name="android:background">USE A COLOR OF YOUR CHOICE HERE</item>
    </style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T06:18:06.890

是动作栏。您可以使用[ActionBarSherlock](http://actionbarsherlock.com/)或 Google [ActionBarCompat - 操作栏兼容性](http://developer.android.com/resources/samples/ActionBarCompat/index.html)示例来实现此外观

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T05:36:02.280

```
<LinearLayout android:orientation="horizontal" ... >
    <ImageView ... android:layout_weight="0.1" .../>
    <TextView ... android:layout_weight="0.7" .../>
    <ImageView ... android:layout_weight="0.1" .../>
    <ImageView ... android:layout_weight="0.1" .../>
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T06:12:48.933

我试图创建它。只需更改背景颜色并在图像按钮上设置图像。更改文本及其样式，我认为它会为您工作。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="center_vertical" android:background="#0000ff">

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" android:background="#0000ff"/>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="xxx"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:layout_weight="1"/>

        <ImageButton
            android:id="@+id/imageButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" android:background="#0000ff"/>

        <ImageButton
            android:id="@+id/imageButton3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" android:background="#0000ff"/>

    </LinearLayout>

</RelativeLayout> 
```

# linux - OpenSUSE 需要 Postgresql 8.3 版本

> ID：10679926
> 
> 赞同：2
> 
> 时间：2012-05-21T05:33:31.060
> 
> 标签：linux, postgresql, opensuse

我已经在机器上安装了 OpenSUSE 12.1。我有 postgresql-contrib-8.3.11-0.1.i586.rpm、postgresql-devel-8.3.11-0.1.i586.rpm、postgresql-docs-8.3.11-0.1.i586.rpm、postgresql-libs-8.3 .11-0.1.i586.rpm,postgresql-server-8.3.11-0.1.i586.rpm..我想安装基于上述软件包的postgresql 8.3版本..但是当我使用这个命令安装时.它显示错误。

**opnsu121:/ # rpm -Uvh postgresql-server-8.3.11-0.1.i586.rpm 错误：依赖失败：postgresql = 8.3 is needed by postgresql-server-8.3.11-0.1.i586**

即使我找不到 postgresql 8.3 基本版本，因为我认为上面的版本是更新。我已经通过了 download.openSUSE.orf,ftp.openSUSE.org .. [http://download.opensuse.org/update/ 11.0/rpm/i586/](http://download.opensuse.org/update/11.0/rpm/i586/) ..但找不到我需要的东西..所以请帮忙，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:25:27.467

如果可能，请使用`YaST`SuSE 或任何软件包管理器来安装当前版本的 PostgreSQL。从[存储库](http://download.opensuse.org/factory/repo/oss/suse/x86_64/)看起来是 9.1.1。

如果您特别需要 PostgreSQL 8.3，我建议您使用[EnterpriseDB 中独立于发行版的安装程序](http://www.enterprisedb.com/products-services-training/pgdownload)。这在 SuSE 12.2 上应该可以正常工作。如果您的组织有特别严格和不安全的版本策略，迫使您使用具有已知错误的旧版本，您可以在此处获得 32 位 Linux 的 8.3.14 和 32 位 Linux[的](http://www.enterprisedb.com/postgresql-8314-installers-linux32?ls=Crossover&type=Crossover)8.3.11[此处](http://www.enterprisedb.com/postgresql-8311-installers-linux32?ls=Crossover&type=Crossover)。

如果您在使用 PostgreSQL 的经过良好测试和已知可工作的 EnterpriseDB 二进制安装程序版本时遇到问题，您的另一个选择（也是一个不错的选择）是从源代码安装。从[FTP 站点](http://www.postgresql.org/ftp/source/)下载[PostgreSQL 8.3.18 源代码](http://www.postgresql.org/ftp/source/v8.3.18/)，然后：

```
sudo mkdir -p /opt/postgresql93
sudo chown `id -un` /opt/postgresql93
./configure --prefix=/opt/postgresql93
make
make install 
```

之后，您可以根据[PostgreSQL 文档](http://www.postgresql.org/docs/current/static/)`/opt/postgresql93/bin/initdb`使用（参见[initdb 手册](http://www.postgresql.org/docs/current/static/app-initdb.html)）创建数据库并`/opt/postgresql93/bin/pg_ctl`（参见[pg_ctl 手册](http://www.postgresql.org/docs/current/static/app-pg-ctl.html)）启动/停止它。

不要试图强制将旧版本 SuSE 中的软件包安装到新版本上。它可能会导致依赖关系树的增加并以痛苦告终。

如果可能的话，试着让你的公司相信他们要求 PostgreSQL 的特定*次要*版本（例如 8.4.14 而不仅仅是“8.4.x”）的政策是不安全的，而且会适得其反。他们强迫您进行肮脏的黑客攻击或手动编译独特的自定义安装，以便*避免使用包含额外错误修复的经过良好测试的构建*。在从 8.3 升级到 8.4/9.0/9.1/etc 之前要求批准是有意义的，因为存在需要仔细测试的功能和向后兼容性更改，但在从 8.3.14 升级到 8.3.18 之前要求批准会适得其反。PostgreSQL[的小版本升级非常保守](http://www.postgresql.org/support/versioning/)；您应该及时了解最新的次要版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:13:51.843

万岁...我得到了答案..我得到了下面的包：postgresql-contrib-8.3.11-0.1.i586.rpm, postgresql-devel-8.3.11-0.1.i586.rpm,postgresql-docs-8.3 .11-0.1.i586.rpm,postgresql-libs-8.3.11-0.1.i586.rpm,postgresql-server-8.3.11-0.1.i586.rpm 来自以下链接：http: [//download.opensuse.org /update/12.1/i586/](http://download.opensuse.org/update/12.1/i586/)

我一直在努力获得的另一个包裹是：

postgresql-8.3.11-0.1.i586.rpm 带有以下链接：

[http://rpm.pbone.net/index.php3/stat/4/idpl/17194424/dir/opensuse_11.x/com/postgresql-8.3.11-0.1.i586.rpm.html](http://rpm.pbone.net/index.php3/stat/4/idpl/17194424/dir/opensuse_11.x/com/postgresql-8.3.11-0.1.i586.rpm.html)

使用我安装的所有上述软件包.. **rpm -ivh packagename** 如果存在依赖关系，则**rpm -ivh --nodeps packagename**

太好了。。完成了。。

# php - 使用 JavaScript 将 HTML 导出到 Excel，在 Firefox 中工作，但不在 IE 和 Chrome 中

> ID：10679927
> 
> 赞同：1
> 
> 时间：2012-05-21T05:33:34.117
> 
> 标签：php, javascript, jquery, export, export-to-excel

我有一个使用 PHP 生成的数据库表。

为了导出表格，我使用以下代码将其内容保存为 .xls 格式。

以前这个脚本在 Chrome 中运行良好，但现在它已经停止了......当我点击按钮然后一个窗口打开但没有文件下载......？

**但在 Firefox 中它可以工作**

Chrome 中可能有什么问题？我如何找出这个问题，是否有任何工具可以找出 Chrome 中的脚本问题？

请帮忙。

```
$( "#Export" ).click(function() {  
    var Contents = $('#MyTable').html();    
    alert(''+Contents);
    window.open('data:application/vnd.ms-excel, ' +  '<table>'+encodeURIComponent($('#MyTable').html()) +  '</table>' );
    alert('exporting records...');
}); 
```

在 Chrome 中，两个消息框也会显示，但没有文件保存在我的 PC 上。它以前工作没有任何问题，但我不知道为什么它现在停止了。

# c++ - 重复流的纠错

> ID：10679928
> 
> 赞同：3
> 
> 时间：2012-05-21T05:33:37.790
> 
> 标签：c++, error-correction

我有一个需要使用纠错的应用程序。我不确定哪种方法最有意义。Reed Solomon 似乎是最受欢迎的选择，但我想我只是列出我的环境，看看是否会出现其他问题。

我有一个可能非常嘈杂的数据流，有 50% 的数据丢失和偶尔的同步丢失问题。发送者将多次重复数据。接收方可以读取数据的多个副本，但每个副本都会遭受不同的损失，并且可能会丢失一些数据。在每个数据块中我一般可以确定哪些字节由于传输而丢失，但是纠错还应该包括验证和纠正整个数据块的方法。

当我说缺少片段时，我的意思是同步丢失。我将退出数据流并稍后在某个任意时间点返回。如果没有某种标记代码，就无法判断我在流中的位置。这些我可以自己添加，但如果这里也有标准方法，那就太好了。

如果 Reed-Solomon 是要走的路，有人知道一个好的 C++ 实现吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-21T10:49:19.017

Reed-Solomon 源代码：http: [//sourceforge.net/projects/rscode/](http://sourceforge.net/projects/rscode/)

但是，对于 50% 的数据丢失率，我认为 turbo 码或 LDPC 将具有比 Reed-Solomon 更好的性能。

# ruby-on-rails - Paypal：付款后如何更新运费，如 Etsy 所做的那样？

> ID：10679929
> 
> 赞同：1
> 
> 时间：2012-05-21T05:33:59.130
> 
> 标签：ruby-on-rails, paypal, payment-gateway

我正在开发一个类似于 Etsy 的市场应用程序。具体来说，我目前正在实施结帐流程，并且正在努力实施贝宝付款。

我想要一个类似于 etsy 的工作流程：

1.  客户在我的网站上登录/注册
2.  客户重定向到贝宝，输入收货地址并授权付款
3.  客户重定向回我的网站，最终更改送货地址并完成结帐

我不明白如何在步骤 3) 中考虑更改订单总额的任何更改。例如，客户可能会选择不同的运输国家，因此可能会支付更高或更低的运输成本。我不想取消之前的付款并将客户发回贝宝以重新验证付款，因为这很可能会导致客户放弃订单。

*   Etsy 如何考虑这些变化？
*   他们使用什么样的贝宝支付类型（标准、自适应等）？

如果您能指出一些真实的例子（我在 Rails 上使用 ruby​​，但欢迎任何框架），将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T03:29:00.547

您的问题是您的第 3 步并没有真正的意义。让我解释。

*   在上面的第 2 步中，您可能知道，只有在提供送货地址时，您才能真正为客户提供良好的运输估算。在那之前，您的估计不会那么严格。

*   在您的第 3 步中，支付处理器（例如 Paypal 或 Google Checkout）将根据运费调整订单总额。（详细信息各不相同，请参阅下面的 Google Checkout 示例。）

*   完成第 3 步后，这将完成订单。处理器将向您的网站报告说订单已完成详细信息。您的网站进行任何最终处理。（您上面的问题是“客户可能会选择不同的运输国家，因此可能会支付更高或更低的运输成本”，但这对我来说没有意义。此时，订单已**完成**- 您的网站**不应**允许用户更改送货地址——除非用户想*完全取消订单*。）

### 谷歌结帐

至于详细信息，Google Checkout API 文档提供了许多您会感兴趣的选项。请阅读[Google Checkout XML API 开发人员指南](https://developers.google.com/checkout/developer/Google_Checkout_XML_API)的“运输和数字交付”部分。这是我认为最相关的两个：

> 1.  商家计算的运费 - 对于商家计算的运费，您必须运行一个计算并返回运费的网络服务。Google Checkout 将向您的服务发送请求，其中包含买家的送货地址、订单中的商品以及您提供的送货方式。（您之前会在 Checkout API 请求中将商品和运输方式发送给 Google。）然后您的网络服务会计算每种运输方式的运输成本并将该信息返回给 Google。
>     
>     
> 2.  承运人计算的运输方式 - 对于承运人计算的运输方式，您确定您提供的一种或多种 FedEx、UPS 或 USPS 运输方式。然后，Google 将根据您购物车中商品的总重量动态计算每个选项的运费。承运人计算的运输文件定义了 Google 支持的每个承运人的具体运输方式。对于承运人计算的运费选项，仅当 Google 未能尝试获取承运人的运费时才使用默认运费。

有关完整的详细信息，请参阅文档。我希望选项 2 有效——它似乎涉及的定制开发工作要少得多。

### 贝宝

与 Google Checkout 相比，浏览 Paypal 的文档是相当迟钝的。因此，我将为您指出正确的方向，但我不会仅为您详细介绍所有内容。退房：[计算运费和税金](https://www.paypal.com/cgi-bin/webscr?cmd=xpt/Marketing/shipping/EasyCalculateShipAndTax-outside)

### 不要忘记税收

奖励材料！税费也可能因运输地点而异。支付服务有向您展示如何执行此操作的文档。

# javascript - 在使用 jquery 在 mouseover 上淡入之前。如何让隐藏元素占用空间？

> ID：10679932
> 
> 赞同：2
> 
> 时间：2012-05-21T05:34:04.007
> 
> 标签：javascript, jquery, html, css, mouseover

在使用 jquery mouseover 使其出现之前，如何让元素在隐藏时占用空间。

这是一个例子。

[http://jsfiddle.net/Nj97k/](http://jsfiddle.net/Nj97k/)

当我隐藏可见性时，图标不再在鼠标悬停时淡入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:35:53.543

最初使不透明度为0

```
<a id='posttext'class='flagpost' style='color:grey;' href='javascript:void(0)'>
    <i style="opacity: 0 " class='icon-flag'>This is an icon</i>Flag
</a>​ 
```

然后正常淡入淡出：

```
$('.flagpost').mouseover(function() {
    $('.icon-flag').fadeTo(500, 1);

});
$('.flagpost').mouseleave(function() {
    $('.icon-flag').fadeTo(300, 0);
});​ 
```

[演示在这里](http://jsfiddle.net/Nj97k/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:41:11.310

您可以在您的元素上替换为，也可以立即触发`display:none`jQuery事件为您执行此操作：`opacity:0``mouseleave`

```
.icon-flag {
    opacity: 0;
} 
```

或者

```
$('.flagpost')
    .mouseover(function(){
        $('.icon-flag').fadeTo(500,1);
    }).mouseleave(function(){
        $('.icon-flag').fadeTo(300,0);
    }).trigger("mouseleave");​​​​​ 
```

# iphone - xcode 3.2.6 未创建 ipa 文件

> ID：10679934
> 
> 赞同：0
> 
> 时间：2012-05-21T05:34:11.230
> 
> 标签：iphone, xcode

我正在 xcode 3.2.6 中创建一个 ipa 文件，但是当我构建和归档应用程序时它没有创建它不要求保存文件并停止处理如何解决这个问题并使 ipa 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:39:18.720

如果 id 没有产生任何错误，那么您的项目中可能有多个项目文件。即您的项目已合并。或者您可能没有为您的项目选择任何可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T07:15:28.110

尝试这个：

1）构建一个应用程序。你会得到一个 .app

2) 打开 iTunes

3) 将 .app 拖放到顶部左侧面板的 iTunes 中。要真正放下，当您在面板上拖动 .app 时，您必须看到一个绿色的“+”关于光标。

4) iTunes 会将您的 .app 转换为 .ipa 文件

5) 查看 Users/{you}/Music/iTunes/iTunes Media/Mobile Applications 文件夹并找到您的 IPA 应用程序文件

希望这可以帮助你

# php - 将复选框表单数组发送到电子邮件，格式化

> ID：10679935
> 
> 赞同：0
> 
> 时间：2012-05-21T05:34:13.980
> 
> 标签：php, html, forms, email, checkbox

我有三个 php 页面。首先是一个 selection.php 页面，其中包含由复选框选择的选项。提交时，将显示选项和用于将结果发送到的电子邮件字段（可选）。问题在于电子邮件的格式。请参阅下面的代码、电子邮件结果和理想输出。我感谢任何人的帮助和时间！

选择.php

```
 $sqlSAT1 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 1'";
    $sqlSAT2 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 2'";  
    $sqlSAT3 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 3'"; 

    mysql_query($sqlSAT1); 
    $result = mysql_query($sqlSAT1);

    while($row = mysql_fetch_array($result))
    {
    echo "<ul><li>";
    echo'<input type="checkbox" name="id[]" value="'.$row['id'].' " id="bandSched_' . $row['id'] . '" />';
    echo '<label for="bandSched_' . $row['id'] . '">' . $row['timeShow']." ".$row['bandName'] . '</label>'; 
    echo "</li></ul>";

    }

    ?> 
```

结果.php

```
 <?php
      if ( ! empty($_POST['id']))
    { foreach($_POST['id'] as $key => $id) { $_POST['id'][$key] = mysql_real_escape_string($_POST['id'][$key]); } 
    $in = implode(', ', $_POST['id']); 

    $sqlSAT1 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 1' AND id IN ($in) ORDER BY FIELD(id, $in)"; 

    $result = mysql_query($sqlSAT1) or die('MySQL Error ' . mysql_errno() . ': ' . mysql_error()); 
    }
    if ( ! isset($result))
    {
    echo 'You did not select anything';
    }
    else
    {
      while ($row=mysql_fetch_assoc($result))
    {   

    echo "<tr>";
    echo "<td>". $row['timeShow'] ."</td><td>" . $row['bandName'] . "</td>";
    echo "</tr>";
    }

    }

    ?> 
```

和 EmailProcess.php

```
 <?php
    $to = $_POST["email"];
    $subject = "This is subject";
    $headers .= "MIME-Version: 1.0\r\n";
            $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
            $headers .= "From:abc@somedomain.com \r\n";
    foreach($_POST as $key => $value){
    if(!(!isset($value))){$set=1;}
    if(is_array($value)){
    $message = $message . "$key: ".implode( ', ', $value)."\n\n";
    } else {
    $message = $message . "$key: $value\n\n";
    }
    }
    $retval = mail ($to,$subject,$message,$headers);
    if( $retval == true )  
    {
    echo "Message sent successfully...";
    }
    else
    {
    echo "Message could not be sent...";
    }?> 
```

最后，这就是带有结果的实际电子邮件的样子——

```
 divcontent:

    <div class=\"saturdaySched full_width light_gray\">
    <div style=\"padding:20px\">

    <h2>SATURDAY</h2>

    <div id=\"stage1sat\" class=\"stageBox\">
    <h3>STAGE 1</h3>
    <table>
    <tbody><tr><td>11:30</td><td>G.Wizz</td></tr><tr><td>12:20</td><td>Sideshow Tramps</td></tr><tr><td>1:40</td><td>Clap Your Hands
    Say Yeah</td></tr>        </tbody></table>
    </div>

    <div id=\"stage2sat\" class=\"stageBox\">

    <h3>STAGE 2</h3>
    <table>

    <tbody><tr><td>12:00</td><td>The Wheel Workers</td></tr><tr><td>2:20</td><td>Starfucker</td></tr><tr><td>3:40</td><td>Phantogram</td></tr> 
```

理想的电子邮件格式可以像列表（或类似的东西）一样简单

```
Stage 1- band1 2:30
Stage 1- band5 3:30
Stage 2- band4 3:10
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:39:29.283

发送邮件时添加以下标题：

$headers .= "MIME 版本：1.0\r\n";

$headers .= "内容类型: text/html; charset=ISO-8859-1\r\n";

# linux - Debian/Linux 组权限无法正常工作

> ID：10679937
> 
> 赞同：2
> 
> 时间：2012-05-21T05:34:51.823
> 
> 标签：linux, permissions, debian, usergroups

我正在做 BOINC 项目。

我有两个用户：boincadm 和 www-data（用于 apache）。都属于boinc组

```
www-data : boinc www-data boincadm
boincadm : boinc adm dialout fax cdrom floppy tape audio dip www-data video plugdev netdev bluetooth lpadmin fuse scanner sambashare subversion 
```

我在 /home/boincadm/projects/myproject/ 中创建了一个 boinc 项目，所有文件和文件夹都归 boincadm 所有：boinc 并具有 rwxrwx--- 权限。

问题是 www-data 用户无法访问文件，这会导致多个错误，例如：

> 警告：require_once(../inc/db.inc)：无法打开流：/home/boincadm/projects/myproject/html/user/index.php 中的权限被拒绝
> 
> 致命错误：require_once()：在 /home/boincadm/projects/myproject 中打开所需的 '../inc/db.inc' (include_path='.:/usr/share/php:/usr/share/pear') 失败/html/user/index.php

要不就

> 无法访问文件 XXX

在日志中..

如果我将 grant rwx 更改为“其他”（777），它会起作用..

我的问题是，为什么组权限没有按我的预期工作？有任何想法吗？

我不是linux专家，因此我可能会错过一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T06:15:22.553

这是一种可能性：

`www-data`有主组`www-data`；其余为[补充组](http://pubs.opengroup.org/onlinepubs/009604599/xrat/xbd_chap03.html#tag_01_03_00_56)。

服务器进程具有正确的用户（by[`setresuid`](http://www.kernel.org/doc/man-pages/online/pages/man2/setresuid.2.html)或类似）和主要组（by[`setresgid`](http://www.kernel.org/doc/man-pages/online/pages/man2/setresgid.2.html)或类似），但缺少其他补充组（没有[`initgroups`](http://www.kernel.org/doc/man-pages/online/pages/man3/initgroups.3.html)或类似）。

如果是这种情况，您有几个选择：将文件所有权更改为主要组，更改服务器运行的组，或修复服务器以包含所有补充组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:35:22.047

这是我解决它的方法：

首先我读到这个： [链接](http://www.debian.org/doc/manuals/debian-tutorial/ch-files.html) 在某些时候，这篇文章提到`/etc/group`了存储有关组的信息的文件。

我打开了这个文件并提到尽管我之前的操作没有`www-data`in group `boinc`。并且没有`www-data`在组 `boincadm`中，相反。这很奇怪！奇怪，因为我已使用`usermod`命令将这些用户添加到 boinc 组，并确保该组是两者的主要组。而且命令`groups <username>`显示他们在组中`boinc`。

所以现在的问题是：**为什么会这样？**

通过修改 3 行解决了该问题：

```
boinc:x:1111:boincadm, www-data
boincadm:x:1112:boincadm, www-data
www-data:x:1113:www-data, boincadm 
```

我需要所有 3 行才能使其正常工作。希望它可以帮助某人。而且我仍然想了解为什么`/etc/group`使用`usermod`. 如果是这样，为什么 grops 显示正确的结果。

# java - 关于100个任务的线程创建或线程池

> ID：10679938
> 
> 赞同：15
> 
> 时间：2012-05-21T05:34:57.333
> 
> 标签：java, multithreading, threadpool

我正在创建一个可以监控 100-150 个设备的监控应用程序......现在要设计一个监控应用程序，我有两种方法：-

1.  为每个设备创建一个线程来监控，每个线程将ping（使用ICMP）到设备以了解设备是否在线。这些线程将在特定时间间隔（例如 60 秒）后无限期地运行以了解其状态。

2.  创建一个线程池，并为每个设备提交一个任务到线程池。任务是简单地对设备执行 ping 操作。因此，在当前的设计中，任务将比线程池中的线程多。例如，假设有 100 个设备要监控，将有 100 个任务要监控，线程池将有 40 个线程来完成这 100 个任务。当然，运行下一批任务的持续时间将使得完成线程池中的所有待处理任务。

哪种方法会更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T05:48:41.177

我会创建一个[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)（例如 via [`Executors.newScheduledThreadPool`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newScheduledThreadPool%28int,%20java.util.concurrent.ThreadFactory%29)）允许您安排重复的 ping。您知道每次 ping 可能需要多长时间吗？如果您只需要每分钟 ping 100 台设备中的每台设备，我*希望您可以使用很少的线程——远远少于 40 条。*

您可以从相当少量的线程开始 - 但请注意 Mark Peters 在评论中提出的信息 - 使用的实现*不会*扩展（正如我所期望的那样）；它实际上是一个固定的线程池。不过，您应该可以使用少于 40 个...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T05:59:23.417

为每个设备创建单独的线程不是可扩展的解决方案。试想一下，如果您的解决方案必须使用更多的设备，比如从 100 到 1000；你不能每次都单独产生一个。

创建一个线程池将是一个理想的解决方案。您可以根据需求和资源可用性调整线程池的大小。如果您需要在固定间隔后定期 ping 设备，那么您可以使用计划的执行器服务，该服务在内部负责定期安排任务。但是，是的，使用线程池是显而易见的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T06:00:28.120

在计算最大线程数时，您应该考虑 ping 超时。给定 5 秒的 ping 超时时间和 60 秒的重复周期，有多少线程需要 ping 100 台设备？

在 60 秒内，每个线程可以执行 12 次设备 ping（60 秒允许 12 次 ping 在 5 秒后超时）。这意味着您至少需要 9 个线程，每个线程每 60 秒执行 12 次 ping。

numberOfThreads = numberOfDevices / (pollingPeriod/pingTimeout) = 100 / (60/5) = 100/12 = 9 个线程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T05:49:14.363

我建议使用线程池，而不是为每个设备创建一个新线程。线程池适用于许多持续时间短的任务，您的问题非常适合这一点。

# c++ - C ++中的翻转抛物线

> ID：10679939
> 
> 赞同：0
> 
> 时间：2012-05-21T05:34:58.927
> 
> 标签：c++, math

我正在编写一个需要评估函数 y = -x^2+49 的游戏。当我在 TI-84 中输入以下内容时，我必须输入 -(x)^2 + 49 或 -x^2 + 49，而不是 (-x)^2 + 49。这就是我如何实现它C++

```
pp[i].death = -(j)^2 + 49;  // Upside down hyperbola 
```

我设置了一个断点来跟踪该值，但这没有任何意义。我的 j 在 [-7, +7] 范围内，因此它应该返回 [0, 49] 范围内的结果。但是 C++ 代码给了我 52 或一些随机数，这很遥远。答案将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T05:37:29.673

`^`是[按位异或运算符](https://en.wikipedia.org/wiki/Bitwise_operation#XOR)，而不是求幂。

改为使用`std::pow`。

# php - 如何在 PHP 中根据用户类型显示/隐藏内容？

> ID：10679941
> 
> 赞同：0
> 
> 时间：2012-05-21T05:35:01.203
> 
> 标签：php, mysql

我有一个会员网站，用户的会员级别在登录时识别（`PRO=1, ELITE=2, PLATINUM=3, DIAMOND=4`），使用 mysql。有许多产品出售，包括会员资格。我需要隐藏他们的会员身份作为订单选项。所以我需要根据他们的成员级别，用一些 php 代码和 if 语句将 div 括起来。

这是基本的html：

```
 <div><a href='#'>Order PRO Membership</a></div>
    <div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div> 
```

如果我是 ELITE 会员，我应该看到的唯一订单选项是 PLATINUM 和 DIAMOND。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:56:43.607

我会做这样的事情：

```
<?php
$member = $_SESSION['member'];

if($member == 1) {
    echo "<div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
} elseif($member == 2) {
    echo "<div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
} elseif($member == 3) {
    echo "<div><a href='#'>Order DIAMOND Membership</a></div>";
}

?> 
```

如果我这样做 $member = 3; 我可以证明这是有效的 [http://meowman.sytes.net/so/memberif/member3.php](http://meowman.sytes.net/so/memberif/member3.php)和[http://meowman.sytes.net/so/memberif/member3.txt](http://meowman.sytes.net/so/memberif/member3.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:42:49.577

在不知道“如何”存储会员资格的情况下 - 这应该给你一个粗略的想法

```
<?php if ($_SESSION['user_level_status'] < 2) {

<div><a href='#'>Order PRO Membership</a></div>
<div><a href='#'>Order ELITE Membership</a></div>

<php } ?>

<div><a href='#'>Order PLATINUM Membership</a></div>
<div><a href='#'>Order DIAMOND Membership</a></div> 
```

你可以从这里扩展它——但是这个逻辑会引导你朝着正确的方向前进

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T14:39:38.653

我建议使用这样的开关功能：

```
<?php
$rank1 = mysql_query("SELET FROM tblname WHERE column='" . mysql_real_escape_string($_SESSION['Username']) . "'");
$rank = mysql_result($rank1, 0, 'rank');

switch ($rank)
{
case 3:
  echo "<div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

case 2:
  echo "<div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

case 1:
  echo "<div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
  break;

default:
  echo "<div><a href='#'>Order PRO Membership</a></div>
    <div><a href='#'>Order ELITE Membership</a></div>
    <div><a href='#'>Order PLATINUM Membership</a></div>
    <div><a href='#'>Order DIAMOND Membership</a></div>";
}

?> 
```

# iphone - 如何在xcode中裁剪缩放图像？

> ID：10679943
> 
> 赞同：0
> 
> 时间：2012-05-21T05:35:14.913
> 
> 标签：iphone, xcode, ipad

我已经完成了图像的缩放。现在我想裁剪那个放大的图像。
有可能这样做吗？
我使用下面的代码来缩放图像。

```
//Scroll View settings for Zoomin-ZoomOut
Scroll.contentSize= CGSizeMake(img.frame.size.width, img.frame.size.height);
Scroll.maximumZoomScale=3.0;
Scroll.minimumZoomScale=.20;
Scroll.clipsToBounds=YES;
Scroll.delegate=self;
[Scroll addSubview:img];
Scroll.imageContainer=img;

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{       
    return img; 
} 
```

这里我使用了 customScroll 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T05:40:25.990

如果您在滚动视图中缩放图像并想裁剪可见区域，请尝试以下操作：

```
-(IBAction) cropSelecteArea
{
//Calculate the required area from the scrollview
CGRect visibleRect;
float scale = 1.0f/scrollView.zoomScale;
visibleRect.origin.x = scrollView.contentOffset.x * scale;
visibleRect.origin.y = scrollView.contentOffset.y * scale;
visibleRect.size.width = scrollView.bounds.size.width * scale;
visibleRect.size.height = scrollView.bounds.size.height * scale;
UIImage *image = [self imageByCropping:previewImage toRect:visibleRect];
//UIImage *image = imageFromView(imageView.image, &visibleRect);
[croppedImageImageView setImage:self.objPostPikUploadPhotoPage.croppedImage];
}

- (UIImage*)imageByCropping:(UIImage *)myImage toRect:(CGRect)cropToArea{
CGImageRef cropImageRef = CGImageCreateWithImageInRect(myImage.CGImage, cropToArea);
UIImage* cropped = [UIImage imageWithCGImage:cropImageRef];

CGImageRelease(cropImageRef);
return cropped;
} 
```

# grails - Groovy has 属性快捷方式

> ID：10679953
> 
> 赞同：0
> 
> 时间：2012-05-21T05:36:11.760
> 
> 标签：grails, properties, groovy

我正在迭代混合类型的对象列表。对于每个对象，我访问一堆属性。其中一些对象将不具有某些属性。有没有办法避免使用 object.hasProperty 方法来安全地访问不存在的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:59:35.653

您可以遍历对象的属性。

以下链接可能对此有所帮助：-

[Groovy 属性迭代](https://stackoverflow.com/questions/1477706/groovy-property-iteration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:00:29.980

看起来唯一合理的方法是使用 hasProperty 方法进行完整性检查

# mongodb - 如何使用 Mongoose 填充存储 ObjectId 以外的数据？

> ID：10679958
> 
> 赞同：0
> 
> 时间：2012-05-21T05:36:53.650
> 
> 标签：mongodb, mongoose

以here为例

[http://mongoosejs.com/docs/populate.html](http://mongoosejs.com/docs/populate.html)

如果我尝试调整它以使“粉丝”也包含评分

```
var db = require('houselib/db');
var Schema = db.Schema;
var mongoose = db.mongoose;

var PersonSchema = new Schema({
    name    : String
    , age     : Number
    , stories : [{ type: Schema.ObjectId, ref: 'Story' }]
});

var StorySchema = new Schema({
    _creator : { type: Schema.ObjectId, ref: 'Person' }
    , title    : String
    , fans     : [{ type: Schema.ObjectId, ref: 'Person', rating: Number}]
});

var Story  = mongoose.model('Story', StorySchema);
var Person = mongoose.model('Person', PersonSchema);

var aaron = new Person({ name: 'Aaron', age: 100 });

aaron.save(function (err) {
    if (err) throw err;

  var story1 = new Story({
      title: "A man who cooked Nintendo"
    , _creator: aaron._id
    , fans: [{type: aaron._id, rating: 4}]
  });

  story1.save(function (err) {
    if (err) throw err;
        Story
        .find({ _creator: aaron._id })
        .populate('_creator') // <-- not really necessary
        .run(function (err, stories) {
            if (err) throw err;
            console.log('The stories JSON is an array: ', stories);
        })
  });

}) 
```

我收到以下错误

> CastError：值“[object Object]”的未定义转换失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:43:32.880

文档说手动链接优于 DBRef

[http://www.mongodb.org/display/DOCS/Database+References#DatabaseReferences-SimpleDirect%2FManualLinking](http://www.mongodb.org/display/DOCS/Database+References#DatabaseReferences-SimpleDirect%2FManualLinking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T18:00:42.913

`story.fans`是一个对象 ID 数组。objectids 不能有评级。您需要将评级添加到 Person 模式而不是故事模式。

```
var PersonSchema = new Schema({
    name    : String
    , age     : Number
    , rating: Number
    , stories : [{ type: Schema.ObjectId, ref: 'Story' }]
}); 
```

# jquery - 如何使用 jquery 进行身份验证？

> ID：10679960
> 
> 赞同：0
> 
> 时间：2012-05-21T05:37:13.417
> 
> 标签：jquery

我正在尝试从客户端登录，这是我的代码

```
$.ajax({
                类型：“获取”，
                url: "http://150.15.43.10:8002/stream.jpg?jsoncallback=?",
                //数据： {}，
                //异步：​​真，
                //contentType: "application/jsonp; charset=utf-8",
                //标题：{
                // 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5',
                // '接受'： '*/*'，
                // '授权': '基本' + auth
                //},
                超时：500，
                数据类型：“jsonp”，
                //跨域：真，
                发送前：函数（请求）{
                    console.log('发送前调用');
                    req.setRequestHeader('User-Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5');
                    req.setRequestHeader('接受', '*/*');
                    req.setRequestHeader('授权', '基本 Y2FtYmE6Q2FtYmExMjM=');
                },
                成功：函数（数据）{
                    $("#imgLive").attr("src", "http://150.15.43.10:8002/stream.jpg");
                }
            });

```

但它没有用。如果您有任何线索，必须回答。

# jquery - Jquery在新切换时切换回其他元素

> ID：10679976
> 
> 赞同：0
> 
> 时间：2012-05-21T05:39:26.617
> 
> 标签：jquery

我有一张以月份为标题的表格。单击月份时，我想在相应标题的所有 tds 中显示周数。我为此使用切换。单击新标题时如何切换回其他元素。

这是[小提琴](http://jsfiddle.net/sameer_kc/57BmW/16/)。在第一次单击后，需要单击两次才能完成这项工作。出了什么问题？有没有其他简洁的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:10:24.923

像这样的东西？

```
 $(document).ready(function() {
    $('th').click(

    function() {
        // hide all expanded
        $('#ex td #td_data').show();
        $('#ex td #o_data').hide();

        // show only corresponding weeks
        $('#ex td:nth-child(' + ($(this).index() + 1) + ')').each(function(index) {
            $(this).find('#td_data').hide();
            $(this).find('#o_data').show();
        });

    });

});​ 
```

* * *

> 编辑：

@Sami - 我想我现在得到了你的要求......

在这里检查修改小提琴 - [http://jsfiddle.net/johnbk/JYkS6/](http://jsfiddle.net/johnbk/JYkS6/)

-> 我删除了 #o_data 的 css

-> 每个元素的 id 应该是唯一的 - 改为将其更改为 class

-> 修改上面的代码如下

```
$('.o_data').hide();
$('.td_data').show();
$('th').click(

function() {
    var id = $(this).index() + 1;

     //loop through corresponding tds and display data
    $('#ex td:nth-child(' + id + ')').each(function(index) {
        $(this).find('.td_data').toggle();
        $(this).find('.o_data').toggle();
    });   

     //reset everything else
    $('#ex td').not(':nth-child(' + id + ')').each(function(index) {
        $(this).find('.td_data').show();
        $(this).find('.o_data').hide();
    });   

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:01:50.133

[http://jsfiddle.net/aKPDT/2/](http://jsfiddle.net/aKPDT/2/)

JavaScript

```
$(document).ready(function(){
    $("th").click(function(){
        var myClass = $(this).attr("class");
          $(".col"+myClass).toggle();
    });
}); 
```

HTML

```
<table id='ex' border='1'>
            <thead>
                <tr>
                    <th  class="1">Jan</th>
                    <th  class="2">Feb</th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td>
                        <div id="td_data">#11</div>
                        <div id="o_data" class="col1">
                            <span>Week1</span><span>Week2</span><span>Week3</span><span>week4</span>
                        </div>                        
                    </td>
                    <td>
                        <div id="td_data">#12</div>
                        <div id="o_data" class="col2"><span>Week1</span><span>Week2</span><span>Week3</span><span>week4</span></div>                        
                    </td>
                </tr>
                <tr>
                    <td>
                        <div id="td_data">#21</div>
                        <div id="o_data" class="col1"><span>Week1</span><span>Week2</span><span>Week3</span><span>week4</span>
                        </div>                        
                    </td>
                    <td>
                        <div id="td_data">#22</div>
                        <div id="o_data" class="col2">
                            <span>Week1</span><span>Week2</span><span>Week3</span><span>week4</span></div>
                    </td>
                </tr>
            </tbody>

        </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T06:10:16.733

```
$('th').click(function(){
    var i = $('th').index(this);
    $('tr').each(function(index){
        var x = $(this).children('td').eq(i).find('div').eq(0);
        var y = $(this).children('td').eq(i).find('div').eq(1);
        $(x).toggle();
        $(y).toggle();
    });
});
​ 
```

[http://jsfiddle.net/57BmW/7/](http://jsfiddle.net/57BmW/7/)

# sql-server - birt：添加数据源但日食没有响应

> ID：10679979
> 
> 赞同：2
> 
> 时间：2012-05-21T05:39:33.730
> 
> 标签：sql-server, eclipse, datasource, birt

我正在尝试使用具有以下凭据的 SqlServer JDBC 驱动程序（sqljdbc4.jar）创建一个新的数据源

```
Driver class : com.microsoft.sqlserver.jdbc.SQLServerDriver (v3.0)
Database URL : jdbc:sqlserver://xx.xx.xx.xx:1433;DatabaseName=xxx; 
```

但是当我点击“Test Connection...”按钮测试连接时，整个BIRT eclipse很长时间没有响应。同样的凭据也在 Navicat 工具中成功创建数据源。

如果您需要更多信息，请告诉我。请帮助我，谢谢~！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:38:31.217

这意味着 Eclipse 无法建立与数据库的连接，您必须确保已在 Eclipse 中加载与 SQL Server 相关的 jar 驱动程序文件，并确保已在您的 SQL Server 上**启用 TCP/IP 连接**和**SQL Browser**安装 。

除此之外：*您确定 JDBC URL 正确吗？您是否尝试访问命名实例？*

如果您有一个命名实例，则 URL 应如下所示：

```
jdbc:sqlserver://localhost;instanceName=instance1;DatabaseName=xxx; 
```

# jsf-2 - 关于 JSF 2.0 中的会话的困惑

> ID：10679988
> 
> 赞同：1
> 
> 时间：2012-05-21T05:41:10.513
> 
> 标签：jsf-2

我对会话有效感到困惑。我读到会话属于浏览器而不是标签。这意味着如果您打开浏览器并打开您的 hotmail 帐户，然后关闭浏览器，然后再次打开它，您必须重新登录。但是，如果您打开浏览器并在新选项卡中打开您的 hotmail，然后关闭选项卡，然后再次在新选项卡中打开 hotmail，那么您已经登录了。但是在维护会话时，我遇到了一些非常令人困惑的事情。Java 对有效会话进行检查，例如

```
/**
 * Each time user closes the browser then this will become null, but then onwards it always
 * has value, which is called cliendId
 */
String sessionID = httpServletRequest.getRequestedSessionId();

/**
 * Each time user close the tab or browser or session expires automatically this will
 * become false
 */
boolean sessionValid = httpServletRequest.isRequestedSessionIdValid(); 
```

**getRequestedSessionId()**很好。当您第一次打开您的网站时，它为空，但它始终具有相同的值。表示该用户正在使用相同的浏览器。美好的。但是**isRequestedSessionIdValid()**让我很困惑。每当我关闭选项卡时，它就会变为空。为什么它变得空了？如果我关闭选项卡，为什么我的会话无效？我是否需要在我的 web.xml 文件中设置一些东西来告诉 java 在标签关闭时会话不会过期？

谢谢你。

# wordpress - 在 wordpress 中加载特定类别

> ID：10679990
> 
> 赞同：0
> 
> 时间：2012-05-21T05:41:23.447
> 
> 标签：wordpress, loading

我开发了一个 wordpress 网站。在这个站点中，我面临一个关于加载类别的问题。有两个特定的类别需要大约两分钟才能加载。我没有得到这个问题的确切解决方案。

您可以在此链接上引用 url www.deohill.com 类别“社交网络”和“如何”需要时间来加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:41:50.807

就我而言，您的整个网站加载时间过长。可能您应该询问您的托管服务提供商，因为我觉得您的服务器响应太慢了。谢谢，Nasir

# ruby-on-rails - 自定义 rake 任务错误

> ID：10679991
> 
> 赞同：2
> 
> 时间：2012-05-21T05:41:31.467
> 
> 标签：ruby-on-rails, rake

我正在尝试运行自定义 rake 测试。这是代码：

```
task :test => :environment do
  user = User.first
  puts "Winner: #{user.email}"
  puts "test"
end 
```

但是当我运行它时，我得到了这个错误。

```
$ rake test

rake aborted!
undefined method `email' for nil:NilClass

Tasks: TOP => test
(See full trace by running task with --trace) 
```

关于为什么我无权访问用户类的任何见解？即使我有 :environment 在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:03:19.077

我最近遇到了类似的事情。我试图得到它`id`，但在我使用映射之前我无法让它工作。试试这个：

```
task :test => :environment do 
  email = User.first.map(&:email)
  puts "Winner: #{email}"
  puts "test" 
end 
```

我并不是说这是正确的方法，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:48:52.040

您收到此错误的原因是由于某种原因您没有获得任何用户

```
User.first 
```

您可以使用调试器检查这一点，或者简单地尝试

```
User.first.nil? 
```

# android - 在 Google Play 应用程序中，显示应用程序顶部列表的 ViewGroup 是如何实现的？

> ID：10679997
> 
> 赞同：7
> 
> 时间：2012-05-21T05:41:56.967
> 
> 标签：android, android-view

Google Play 应用程序以类似 GridView 的方式显示不同类别的顶部列表（[屏幕截图](http://dl.dropbox.com/u/15759867/play.png)）。我很确定它不是标准的 GridView，因为当我一直滚动到底部时，它会显示一个屏幕范围的“正在加载”项目，据我所知，这在标准 GridView 中是不可能的。

我可以在某处找到此 ViewGroup 的代码吗？如果不是，实现这样一个 ViewGroup 的最佳方式是什么？我正在考虑使用 ListView 处理这个问题，但它需要一个非常混乱的适配器，根据可用的屏幕宽度将多个列表项放在一行中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T14:04:27.357

回答我自己的问题：

我反汇编了 Google Play 应用程序，发现他们在这里使用的是简单的 ListView，带有一个 BucketListAdapter。此适配器以类似 GridView 的方式呈现列表元素，将它们拆分为列。这样他们也可以使用列表页脚和页眉。

我已经推出了自己的实现，如果有人感兴趣，可以在这里找到：[https](https://github.com/rzsombor/bucket-list-adapter) ://github.com/rzsombor/bucket-list-adapter 。但是，它仍在进行中。

# jquery - 使用 jquery 滑块使用增量号或减量号更改框颜色

> ID：10679999
> 
> 赞同：0
> 
> 时间：2012-05-21T05:42:12.290
> 
> 标签：jquery, jquery-ui, colors, jquery-ui-slider

我是 jQuery 的初学者，想知道是否有人能指出我正确的方向。我想创建一个滑块，将颜色从红色变为绿色，并记录分数。该值应从 0 开始，当用户向右滑动时，颜色变为红色，并记录为 -1 的分数。如果它向左滑动，颜色变为绿色并记录 +1 的分数。请帮忙。

JS：

```
$(function(){
   $( "#slider" ).slider({
      value:0,
      min: -3,
      max: 3,
      step: 1,
      slide: function( event, ui ) {
         $( "#score" ).val( ui.value );
      }
   });
   $( "#score" ).val($( "#slider" ).slider( "value" ) );
}); 
```

html:

```
<html>
<p>
  <label for="score">Rating (+/-1 increment):</label>
  <input type="text" id="score" />
</p>
<div id="slider"></div>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:23:22.267

似乎设置“背景”CSS属性就可以了。这是你的意思吗：http: [//jsfiddle.net/UweCD/1/](http://jsfiddle.net/UweCD/1/)

```
 slide: function(event, ui) {
        $("#score").val(ui.value);
        $(this).css("background", ui.value>0 ? "green" : ui.value<0 ? "red" : "");
    } 
```

无论如何应该足以让你开始......