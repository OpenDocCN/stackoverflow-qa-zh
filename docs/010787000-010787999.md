# StackOverflow 问答 10787000-10787999

# maven - 使用 Maven 程序集插件创建 EAR

> ID：10787010
> 
> 赞同：2
> 
> 时间：2012-05-28T15:25:42.293
> 
> 标签：maven, ear, maven-assembly-plugin

我尝试使用 maven 程序集插件创建 EAR，但收到错误消息而不是 EAR 文件...

> [错误] 无法执行目标 org.apache.maven.plugins:maven-assembly-plugin:2.3: single (assembly:package) on project business-serviceability-ear: 无法创建程序集：创建程序集存档 bin 时出错：无法创建程序集配置归档器：org.codehaus.plexus.archiver.dir.DirectoryArchiver：在“appxml”的 org.codehaus.plexus.archiver.dir.DirectoryArchiver 中找不到 setter、adder 或字段 -> [帮助 1]

我的 pom.xml 中有趣的部分：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-assembly-plugin</artifactId>
<version>2.3</version>
<executions>
    <execution>
        <id>assembly:package</id>
        <phase>package</phase>
        <goals>
            <goal>single</goal>
        </goals>
        <configuration>
            <archiverConfig>
                <appxml>src/main/resources/META-INF/application.xml</appxml>
            </archiverConfig>
            <descriptors>
                <descriptor>src/main/assembly/bin.xml</descriptor>
            </descriptors>
        </configuration>
    </execution>
</executions> 
```

你能帮我把元素放在 pom.xml 中的什么地方吗？我必须放一些，否则我会收到此错误：

> [错误] 无法在项目 business-serviceability-ear 上执行目标 org.apache.maven.plugins:maven-assembly-plugin:2.3:single (assembly:package)：创建程序集失败：创建程序集存档 bin 时出错：appxml属性是必需的 -> [帮助 1]

谢谢你，维克托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:46:07.557

对不起，我在 bin.xml 中犯了一个错误。我定义了更多的格式元素，而不仅仅是一个……这是可行的解决方案。

```
 <formats>
<!--        <format>dir</format> -->
<!--        <format>war</format> -->
        <format>ear</format>
    </formats> 
```

# php - how can I post data from input field without submit by ajax

> ID：10787013
> 
> 赞同：0
> 
> 时间：2012-05-28T15:25:58.577
> 
> 标签：php, jquery, ajax

I want to enter value, to input field so when I leave the input field by clcking out side from the input field I will run the ajax code and send the value input `dataString` to same file which in this case cald ajax.php. Thanks

my code:

```
$(document).ready(function()
{

    var dataString;

$("valueforajax").mouseleave(function() {//when  we leave the field.
    alert('test it is mouseup ');
    dataString=$("#valueforajax").val();
    alert(dataString);
  if ("" = dataString){//it is mean that input field not empty
        $.ajax({
        type: "POST",
         url: "../../ajax.php",
             data: dataString,
             cache: false,
             success: function(html)
             {
             alert("There is submited sucsses");
             }
             });//ajax
        }//if
    });//mouseup
});//ready 
```

ajax.php

```
<?php
    if  (isset($_POST['dataString'])){
        echo ("dataString not empty:= ".$_POST['dataString']);}
    ?>
    <html>
    <head>
    <link rel="stylesheet" type="text/css" href="./public/stylesheets/stylesheets.css"  >
    <script type="text/javascript" src="./public/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="./public/js/ajax.js"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
    <title>mange panel</title>
    </head>
    <body>

    <br>Type value for test in ajax<input id="valueforajax" type=text name='ajaxtest'>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:28:28.280

You missed `#` sign in you selector

`$("valueforajax")` should be `$("#valueforajax")`.

also

`data: dataString` should be `data: 'dataString=' + dataString` OR `data: {"dataString": dataString}` because in your php code you're searching for

`$_POST['dataString']` i.e. for `dataString` key.

```
$("#valueforajax").blur(function() { // blur is perfect for what you searching

    dataString = $.trim(this.value); // you don't need $("#valueforajax").val(); 
                                     // here, this is enough

  if (dataString){  // checking for presence of value
        $.ajax({
        type: "POST",
         url: "../../ajax.php",
             data: 'dataString=' + dataString, // or {"dataString": dataString}
             cache: false,
             success: function(html) {
                alert("There is submited sucsses");
             }
          });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:43:13.457

您想使用模糊而不是鼠标离开。

每当您离开表单元素时都会发生模糊事件。当您点击 TAB、在字段外单击、更改字段等时会发生这种情况......

mouseleave 仅在您的鼠标从字面上离开元素时发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:38:09.370

数据必须是对象（例如`{"dataString" : "test"}`）或字符串（例如`"dataString=test"`）

# sql - storing data ranges - effective representation

> ID：10787017
> 
> 赞同：0
> 
> 时间：2012-05-28T15:26:45.857
> 
> 标签：sql, sql-server, database-design, relational-database

I need to store values for every day in timeline, i.e. every user of database should has status assigned for every day, like this:

```
from 1.1.2000 to 28.05.2011 - status 1
from 29.05.2011 to 30.01.2012 - status 3
from 1.2.2012 to infinity - status 4 
```

Each day should have only one status assigned, and last status is not ending (until another one is given). My question is what is effective representation in sql database? Obvious solution is to create row for each change (with the last day the status is assigned in each range), like this:

```
uptodate     status
28.05.2011   status 1
30.01.2012   status 3
01.01.9999   status 4 
```

this has many problems - if i would want to add another range, say from 15.02.2012, i would need to alter last row too:

```
uptodate     status
28.05.2011   status 1
30.01.2012   status 3
14.02.2012   status 4
01.01.9999   status 8 
```

and it requires lots of checking to make sure there is no overlapping and errors, especially if someone wants to modify ranges in the middle of the list - inserting a new status from 29.01.2012 to 10.02.2012 is hard to implement (it would require data ranges of status 3 and status 4 to shrink accordingly to make space for new status). Is there any better solution?

* * *

i thought about completly other solution, like storing each day status in separate row - so there will be row for every day in timeline. This would make it easy to update - simply enter new status for rows with date between start and end. Of course this would generate big amount of needless data, so it's bad solution, but is coherent and easy to manage. I was wondering if there is something in between, but i guess not.

* * *

more context: i want moderator to be able to assign status freely to any dates, and edit it if he would need to. But most often moderator will be adding new status data ranges at the end. I don't really need the last status. After moderator finishes editing whole month time, I need to generate raport based on status on each day in that month. But anytime moderator may want to edit data months ago (which would be reflected on updated raports), and he can put one status for i.e. one year in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:52:40.797

您似乎希望将此表用于两件事 - 记录当前状态和状态更改的历史记录。您应该将当前状态分开并将其移至父级（就像注册日期一样）

```
User
===============
Registered Date
Current Status

Status History
===============
Uptodate 
Status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T23:07:05.530

您的表格结构应包括状态期的生效日期和结束日期。这有效地将状态“平铺”成不重叠的组。最后一行应该有一个虚拟的结束日期（如上所示）或 NULL。如果您在结束日期有索引，则使用值而不是 NULL 很有用。

使用此结构，要获取任何给定日期的状态，请使用以下查询：

```
select *
from t
where <date> between effdate and enddate 
```

要在期末添加新状态，需要进行两项更改：

1.  修改表中 enddate = 01/01/9999 的行，使其结束日期为昨天。
2.  插入一个 effdate 为今天且结束日期为 01/01/9999 的新行

我会把它包装在一个存储过程中。

要更改过去某个日期的状态，需要将其中一个历史记录一分为二。多个日期可能需要更改多条记录。

如果您有日期范围，则可以通过查询获取与给定时间段重叠的所有图块：

```
select *
from t
where <periodstart> <= enddate and <periodend> >= effdate 
```

# android - 简单动画出错

> ID：10787021
> 
> 赞同：1
> 
> 时间：2012-05-28T15:27:19.510
> 
> 标签：android

我尝试使用以下代码为 ImageView 启动 AlphaAnimation：

```
 ImageView view;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.prueba);

            view=(ImageView)findViewById(R.id.icon);
            view.setAlpha(0x00);        
            view.setVisibility(View.VISIBLE);
            view.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent e) {
                    switch (e.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        Log.i("Down v", "x:" + e.getX() + " y:" + e.getY());
                        view.startAnimation(new AlphaAnimation(0x22, 0xFF));
    //                  break;
                    case MotionEvent.ACTION_MOVE:
                        Log.i("Move", "x:" + e.getX() + " y:" + e.getY());
                        break;
                    case MotionEvent.ACTION_UP:
                        Log.i("Up", "x:" + e.getX() + " y:" + e.getY());
                        view.setAlpha(0x00);
                        break;
                    case MotionEvent.ACTION_OUTSIDE:
                        Log.i("Out", "x:" + e.getX() + " y:" + e.getY());
                        break;
                    default:
                        Log.i("None", "nada");
                    }
                    return false;
                }
            });
            view.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.i("Click", "es un click");
                }
            });
        } 
```

这段代码应该是让 ImageView 在被触摸时出现，但什么也没发生。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:42:04.623

这是关于 Android 动画的奇怪之处。

您`setAlpha()`用于将视图的 alpha 设置为 0。同时您`AlphaAnimation`用于将 alpha 值设置为 1。这*似乎*可行。问题是他们在两个不同的框架上工作。 [与 Honeycomb 和ObjectAnimators](http://developer.android.com/reference/android/animation/ObjectAnimator.html)`setAlpha()`一起引入，而自 Cupcake 以来一直存在（可能也是 API 1，但我忘记了）。ObjectAnimators 改变了 View 的实际属性，而 AlphaAnimation 只是改变了视图的绘制方式（感到困惑吗？：P）。`AlphaAnimation`

无论如何，`AlphaAnimation`不​​会像您想象的那样影响视图的 alpha 属性。它将视图从 0 设置为 1，但属性仍然为 0，因此它仍然不可见。

您在这里有两个选择。

保持原样`setAlpha()`并`ObjectAnimators`像这样使用：

```
ObjectAnimator anim = ObjectAnimator.ofFloat(view, "alpha", 0f, 1f);
anim.setDuration(1000);
anim.start(); 
```

这是最简单和首选的方法。它只适用于 API 级别 11+。如果这是需要的，那就去吧。

另一种选择是移除`setAlpha()`视图并将其预先设置动画，`0`持续时间为`0`. `setFillAfter(true)`在开始之前调用动画。这将确保它保持不可见（默认情况下可能是真的，但我不记得了）。

我希望这是有道理的。

# jquery - jQuery价格滑块过滤器

> ID：10787027
> 
> 赞同：4
> 
> 时间：2012-05-28T15:28:11.507
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我已经创建了我的 jquery 价格滑块，但我不确定如何过滤我的结果，以便在滑动时您只能看到具有该值的产品。

HTML：

```
<div class="demo">

<p>
    <label for="amount">Price range:</label>
    <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" />
</p>

<div id="slider-range"></div>
<ul>
        <li> product - £10 </li>
        <li> product - £50 </li>
        <li> product - £100 </li>
        <li> product - £150 </li>
        <li> product - £200 </li>
    </ul>
</div>​ 
```

JavaScript：

```
$(function() {
    var options = 
        {
            range: true,
            min: 0,
            max: 500,
            values: [ 50, 300 ],
            slide: function( event, ui ) {
                $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
            }
        };

        $( "#slider-range" ).slider(
            options
        );
        $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
            " - $" + $( "#slider-range" ).slider( "values", 1 ) );
    }); 
```

​我的小提琴是[http://jsfiddle.net/ktcle/uvJ8F/](http://jsfiddle.net/ktcle/uvJ8F/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-28T16:25:03.407

我会做一些改变：

1.  为您的产品列表赋予一个`id`属性，并为每个产品赋予一个`data-price`等于商品价格的属性：

    ```
    <ul id="products">
        <li data-price="10"> product - £10 </li>
        <li data-price="50"> product - £50 </li>
        <li data-price="100"> product - £100 </li>
        <li data-price="150"> product - £150 </li>
        <li data-price="200"> product - £200 </li>
    </ul> 
    ```

2.  添加一个在`slide`事件发生时显示或隐藏这些产品的函数：

    ```
    function showProducts(minPrice, maxPrice) {
        $("#products li").hide().filter(function() {
            var price = parseInt($(this).data("price"), 10);
            return price >= minPrice && price <= maxPrice;
        }).show();
    } 
    ```

3.  从`slide`事件处理程序调用该函数：

    ```
    slide: function(event, ui) {
        var min = ui.values[0],
            max = ui.values[1];

        $("#amount").val("$" + min + " - $" + max);
        showProducts(min, max);
    } 
    ```

4.  在滑块初始化后立即调用该函数，以便最初隐藏正确的产品：

    ```
    var options = {
       /* snip */
    }, min, max;

    $("#slider-range").slider(options);

    min = $("#slider-range").slider("values", 0);
    max = $("#slider-range").slider("values", 1);

    $("#amount").val("$" + min + " - $" + max);

    showProducts(min, max); 
    ```

整个片段：

```
function showProducts(minPrice, maxPrice) {
    $("#products li").hide().filter(function() {
        var price = parseInt($(this).data("price"), 10);
        return price >= minPrice && price <= maxPrice;
    }).show();
}

$(function() {
    var options = {
        range: true,
        min: 0,
        max: 500,
        values: [50, 300],
        slide: function(event, ui) {
            var min = ui.values[0],
                max = ui.values[1];

            $("#amount").val("$" + min + " - $" + max);
            showProducts(min, max);
        }
    }, min, max;

    $("#slider-range").slider(options);

    min = $("#slider-range").slider("values", 0);
    max = $("#slider-range").slider("values", 1);

    $("#amount").val("$" + min + " - $" + max);

    showProducts(min, max);
});​ 
```

**示例：http:** [//jsfiddle.net/5aPg7/](http://jsfiddle.net/5aPg7/)

# php - how can i use preg_match with alphanumeric and unicode acceptance?

> ID：10787029
> 
> 赞同：5
> 
> 时间：2012-05-28T15:28:15.080
> 
> 标签：php, regex, preg-match

I am going to build a multilingual website with PHP and need to have a preg_match which passes all Unicode characters and numbers.
i.e I need it to pass English letters, Spanish letters,Italian letters and as you may know I don't want to pass other characters like ' " _ - and ...

I want some thing like this :

```
$pattern='/^[unicode chars without \'-_;?]*$/u'; 
if(!preg_match($pattern, $url))
   echo #error; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T17:14:59.103

字母的 Unicode 属性是`\pL`这样的`preg_match`：

```
preg_match('/^\pL+$/u', $string); 
```

对于网址，您可以添加数字`\pN`和点：

```
preg_match('/^[\pL\pN.]+/u', $string); 
```

# c# - Make sure that the class defined in this code file matches the 'inherits' attribute,

> ID：10787033
> 
> 赞同：1
> 
> 时间：2012-05-28T15:28:26.393
> 
> 标签：c#, asp.net, vb.net

Sometimes in my web applications I used to get this sort of error, I have no clue why is it coming however if I refresh the page few times the page is loading normally. ![enter image description here](../Images/c1d955b7278fc5dd4134a35dede04649.png)

I am using .net framework 2.0 and visual web developer 2005.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:32:13.357

我只在文件中包含的类与 HTML 页面中调用的类不同时看到此错误消息

例如，在您的 html 页面顶部会有一行代码，如下所示：`<%@ Page Language="C#" AutoEventWireup="true" CodeFile="@whereyourcodeis.aspx.cs" Inherits="@ClassName" Title="whatever" %>`

在你的 whereyourcodeis.aspx.cs 文件中应该有一个构造函数方法，它与你的 html 中的继承行同名。IE`Class ClassName{ rest of your code}`

如果由于某种原因这两个名称不匹配，您会遇到错误，希望这可以阐明您的代码出错的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:48:53.673

当我偶然更改另一个 aspx 文件的代码文件以指向与当前页面文件相同的代码文件时，它发生在我身上。

确保每个 aspx 文件都指向正确的代码文件。Visual Studio 不会将您指向正确的文件。

您可以尝试搜索导致错误的文件的名称，以找到指向它的其他页面。

# android - andengine vs no framework development

> ID：10787034
> 
> 赞同：0
> 
> 时间：2012-05-28T15:28:28.067
> 
> 标签：android, andengine

I am trying to learn to create 2D games on android, and I have heard that andengine is one of the best tools for that. I tried using it, but unfortunately there I have encountered numerous issues with andengine having little documentation, and no stable place where I can learn things. So my question is that what would you recommend to a completely newbie developer? Should I try learning andengine, or learn things the hard way? And can you please provide some good links to learn? So far a lot of links I found were quite old and would not work properly all the time.

Thanks to anyone for their help.

Also just to clarify, I am middle skilled in 2D game development (especially in java and C++), so I know the basic structure, my main issue is making things run on an android since I am completely new to android itself.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T15:31:34.020

使用 andengine，您最好的选择是下载、编译和运行[示例游戏和示例](http://code.google.com/p/andengineexamples/)。通过阅读和理解这些源代码，您将学习如何使用它。特别是这些示例是有效的文档，它们非常好！

# c# - Getting records in between two records using Linq

> ID：10787037
> 
> 赞同：0
> 
> 时间：2012-05-28T15:28:32.193
> 
> 标签：c#, linq, collections

I have a list of objects and need to get the list of records from this list. like I have of Countries and I need to get the list of countries which are in between country with name "Australia" and country "Indonasia", the list will not be sorted.

Am using c#.

I tried to use something like, get the index of first and second and then use that to get the list with a for loop, but would be handy if it can be done in single query.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:34:58.837

如果您执行以下操作：

```
var elementsBetween = allElements
        .SkipWhile(c => c.Name != "Australia")
        .Skip(1) // otherwise we'd get Australia too
        .TakeWhile(c => c.Name != "Indonasia"); 
```

您将获得所需的结果，而无需遍历列表 3 次。

（这是假设您的国家是例如`Country`具有`Name`字符串属性的项目。）

请注意，这根本不会对国家/地区进行排序-从您的问题中不清楚您是否想要这个，但是`OrderBy`在`SkipWhile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:36:13.563

这应该做的工作

```
var query = data.SkipWhile(x => x != "Australia").TakeWhile(x => x != "Indonesia") 
```

# objective-c - 检查由 stringWithFormat 创建的字符串：

> ID：10787038
> 
> 赞同：0
> 
> 时间：2012-05-28T15:28:53.943
> 
> 标签：objective-c, cocoa-touch, nsstring

为按钮设置图像时，我使用`stringWithFormat:`如下：

```
 [buttonImage setImage:[ImgUtil image:[NSString stringWithFormat:@"myImage_%d.png", selectNum + 1 ]] ]; 
```

我想检查那个字符串。我想也许我可以从按钮中取回名称：

```
 if (buttonImage.image == [UIImage imageNamed:@"myImage_2.png"]) {
        NSLog(@"the name of the buttonImage is %@", buttonImage.image);
 } 
```

但这不起作用。我怎么看那个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:35:49.630

您可以使用关联的引用在加载时附加一个字符串键“名称”。您从文件中创建 UIImage，并使用 Objective-c 关联的引用 API 附加名称：[here。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)

您还可以将 UIImage 子类化以存储额外的名称。

您甚至可以添加一个类别来提供简单的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:44:40.827

如果您想要的是在以下行中“测试“myImage_%d.png”最终是什么”：

```
[buttonImage setImage:[ImgUtil image:[NSString stringWithFormat:@"myImage_%d.png", selectNum + 1 ]] ]; 
```

然后我建议你重新格式化并简化你的代码。它将为您提供更易于阅读的额外优势：

```
NSString* imageName = [NSString stringWithFormat:@"myImage_%d.png", selectNum + 1 ];
NSLog(@"imageName is %@", imageName);

[buttonImage setImage:[ImgUtil image:imageName]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T15:50:55.757

不，你不能。

`buttonImage.image`是一个 UIImage 存储在按钮内部的内存中。

`[UIImage imageNamed:@"myImage_2.png"]`创建一个完全不同的 UIImage。两个 UIImage 很可能是从同一个文件创建的——在这种情况下，——`@"myImage_2.png"`但它们是内存中的两个独立的 UIImage。

检查您的`==`线路：

```
if(buttonImage.image == [UIImage imageNamed:@"myImage_2.png"]) 
```

不检查 UIImages 是否是从同一个文件创建的；它检查它们是否指向内存中的相同位置。它们不是，因为它们是两个单独创建和存储的 UIImage 实例。

--

所以，不——你不能这样做。但是，可能以另一种方式解决您的问题的方法是将 UIButton 子类化并正确添加`NSString* imageFilename`. （如果您为每种控制状态设置不同的图像，则需要多个变量来存储这些图像文件名）。然后重写`setImage:forControlState`UIButton 子类的方法，并在每次更改图像时将文件名存储在那里。然后您可以执行以下检查：

```
if([imageFileName isEqualToString:[[NSString stringWithFormat:@"myImage_%d.png", selectNum + 1 ]]) 
```

这会给你你想要的答案！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T15:30:53.977

您可以将 UIImage 存储为类的实例，并进行比较。您不会使用比指针更多的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:41:12.320

selectNum代表选中的图片对吧

# sql - 当且仅当兄弟行不存在时才返回一行

> ID：10787043
> 
> 赞同：0
> 
> 时间：2012-05-28T15:29:15.523
> 
> 标签：sql

我今天有一个白痴日。我敢肯定这相对简单，但我的大脑并没有给我答案。

我有一个表，其行是对象类型。看起来像这样：

```
id    name    foo    bar    house_id
1     Cat     12     4      1
2     Cat     9      4      2
3     Dog     8      23     1
4     Bird    9      54     1
5     Bird    78     2      2
6     Bird    29     32     3 
```

这不是我选择实现它的方式，但它是我正在使用的。对象（猫、狗和鸟，在现实生活中它们是实际的商业事物）已临时添加到表中。当 house_id 1 需要猫时，会输入一个猫的记录。当 house_id 3 有狗时，会输入一个狗的记录。

我现在需要更新此表，以便*每种*类型的对象（猫、狗、鸟）都有给定 house_id 的记录。我想通过插入一个选择查询的结果来做到这一点，该查询为每种类型返回一条记录，当且仅当不存在记录时，该类型的行中“foo”和“bar”的最早值对于具有给定 house_id 的类型。

因此，对于上面的示例数据，给定的 house_id = 3，选择查询将返回以下内容：

```
name    foo    bar    house_id
Cat     12     4      3
Dog     8      23     3 
```

然后我可以将其直接插入表中。

基本上，如果没有具有给定 house_id 的名称的行，则返回每个不同名称的第一行。

欢迎提出建议。如果有帮助，数据库引擎是 postgres。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:51:22.543

```
SET search_path= 'tmp';

DROP TABLE dogcat CASCADE;
CREATE TABLE dogcat
        ( id serial NOT NULL
        , zname    varchar
        , foo    INTEGER
        , bar    INTEGER
        , house_id INTEGER NOT NULL
        , PRIMARY KEY (zname,house_id)
        );
INSERT INTO dogcat(zname,foo,bar,house_id) VALUES
  ('Cat',12,4,1)
 ,('Cat',9,4,2)
 ,('Dog',8,23,1)
 ,('Bird',9,54,1)
 ,('Bird',78,2,2)
 ,('Bird',29,32,3)
        ;
-- Carthesian product of the {name,house_id} domains
WITH cart AS (
        WITH beast AS (
                SELECT distinct zname AS zname
                FROM dogcat
                )
        , house AS (
                SELECT distinct house_id AS house_id
                FROM dogcat
                )
        SELECT beast.zname AS zname
        ,house.house_id AS house_id
        FROM beast , house
        )
INSERT INTO dogcat(zname,house_id, foo,bar)
SELECT ca.zname, ca.house_id
        ,fb.foo, fb.bar
FROM cart ca
     -- find the animal with the lowes id
JOIN dogcat fb ON fb.zname = ca.zname AND NOT EXISTS
        ( SELECT * FROM dogcat nx
        WHERE nx.zname = fb.zname
        AND nx.id < fb.id
        )
WHERE NOT EXISTS (
        SELECT * FROM dogcat dc
        WHERE dc.zname = ca.zname
        AND dc.house_id = ca.house_id
        )
        ;

SELECT * FROM dogcat; 
```

结果：

```
SET
DROP TABLE
NOTICE:  CREATE TABLE will create implicit sequence "dogcat_id_seq" for serial column "dogcat.id"
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dogcat_pkey" for table "dogcat"
CREATE TABLE
INSERT 0 6
INSERT 0 3
 id | zname | foo | bar | house_id 
----+-------+-----+-----+----------
  1 | Cat   |  12 |   4 |        1
  2 | Cat   |   9 |   4 |        2
  3 | Dog   |   8 |  23 |        1
  4 | Bird  |   9 |  54 |        1
  5 | Bird  |  78 |   2 |        2
  6 | Bird  |  29 |  32 |        3
  7 | Cat   |  12 |   4 |        3
  8 | Dog   |   8 |  23 |        2
  9 | Dog   |   8 |  23 |        3
(9 rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:46:04.517

通常情况下，我整个上午都在纠结一个问题，将其发布到 Stack Overflow 并在接下来的半小时内自己解决

```
 select name, foo, bar, 3
 from table
 where id in
 (
    select min(id) from table where name not in
    (
       select name from table where house_id = 3
    )
    group by name
 ); 
```

# android - 回到我的主要活动，并刷新片段

> ID：10787044
> 
> 赞同：0
> 
> 时间：2012-05-28T15:29:25.330
> 
> 标签：android, android-activity, android-fragments

因此，我的应用程序有一个活动`ProjectActivity`作为主页，其中包含 3 个片段`HomeFragment` `ListFragment` `TagFragment`（每个选项卡一个）。当我单击一个按钮（在 上`homeFragment`）时，它会打开一个新活动`CaptureActivity`。该活动启动 ASyncTask `ParseData`，.

在`ParseData`onPostExecute 上，我想回到我的`ProjectAcitity`，专注于指定的选项卡（包含 的选项卡`ListFragment`），并更新`ListFragment`视图。

我实际上不知道如何做到这一点。我只需要打电话`ProjectActivity`吗？但是，如果我按下后退按钮，它不会返回整个链条 ( `Project Activity`, `CaptureActivity`, `ProjectActivity`) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:37:55.327

好吧，你可以做一些事情。

首先让 ListFragment 监视器 w/e 它的列表并在它的 onStart/onResume 中刷新它，当您返回到 ProjectActivity 时将调用它。

或者更直接地你可以做 startActivityForResult(captureActivity); 然后当你回到你的 ProjectActivity 时，在 onActivityResults() 中得到结果，然后从那里更新你的 ListFragment。

# cocoa - examining audio file alternative to spotlight

> ID：10787046
> 
> 赞同：3
> 
> 时间：2012-05-28T15:29:32.613
> 
> 标签：cocoa, audio, qtkit, spotlight

i'm looking for an efficient alternative to grabbing **audio file attributes** in case spotlight is turned off.

**Spotlight's MDItem** attributes: `kMDItemDurationSeconds, kMDItemAudioEncodingApplication, kMDItemAudioBitRate, kMDItemAudioSampleRate,kMDItemAudioChannelCount, kMDItemCodecs`, are possible.

however **QTKit's movieAttributes** (if the file can be a QTMovie type), are not as complete, only `QTMovieDurationAttribute` fills my spec.

should i use **Audio Format Services** : `OSStatus AudioFormatGetProperty`, or is there something else, perhaps more light-weight that will suffice in the absence of MDItem information ?

i don't need to modify or play any files, i only need to know the property values.

thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:08:38.803

如果您不害怕使用终端，mdls 可能是适合您的工具：

```
mdls /path/toYour/file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:43:29.487

从音轨的媒体而不是电影中获取属性。这是一个如何以秒为单位获取持续时间的示例。

```
for (QTTrack* track in [movie tracks])
{
    QTMedia* trackMedia = [track media];

    if ([trackMedia hasCharacteristic:QTMediaCharacteristicAudio])
    {
        QTTime mediaDuration = [(NSValue*)[trackMedia attributeForKey:QTMediaDurationAttribute] QTTimeValue];
        long long mediaDurationScaleValue = mediaDuration.timeScale;
        long long mediaDurationTimeValue = mediaDuration.timeValue;
        result = (double)mediaDurationTimeValue / (double)mediaDurationScaleValue;
        break;
    }
} 
```

`[trackMedia mediaAttributes]`将为您提供音频的其他可用属性。

# asp.net-mvc-3 - 无法使用 SqlServer CE 4.0 为实体生成控制器：ScaffoldingConnectionFactory 错误

> ID：10787047
> 
> 赞同：0
> 
> 时间：2012-05-28T15:29:35.327
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, sql-server-ce, sql-server-ce-4, asp.net-mvc-scaffolding

我感觉**SqlServer CE 4.0**无需安装即可与 MVC 3 一起使用。事情进展顺利。我已经成功集成了 Troy Goode 的[MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)以及 ErikEJ 的[SqlServerCEMembership](http://erikej.blogspot.in/2010/08/sql-server-compact-40-aspnet-membership.html)提供程序。两者都在寻找。现在我有一个现代课程：

```
public class Student
{
    [Key]
    public int Id{get;set;}
    [Required]
    public string FirstName{get;set;}
    [Required]
    public string LastName{get;set;}
    [Required]
    public DateTime DOB{get;set;}
    [Required]
    public string Gender{get;set;}
} 
```

我也在使用`DBContext`类：

```
public class MyDbContext: DBContext
{
    public DbSet<Student> Students{get;set;}
} 
```

当我尝试通过选择`Student`类作为模型来添加控制器时，我收到以下错误：

```
Unable to retrieve metadata for 'MVCProject1.Models.Student'. There was an error 
generating 'ScaffoldingConnectionFactory. Try Rebuilding your project. 
```

我已经尝试了 EntityFrameWork.SqlServerCompact 包的 4.3.0 和 4.3.2 版本，但仍然出现错误。我的方法有什么问题？

编辑：-通过卸载/重新安装软件包，我在重建项目后一次又一次地尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:14:07.940

好吧，事实证明这是一个混淆扩展的问题。我已经安装了`EntityFramework`和`EFCodeFirst`，`EFCodeFirst.SqlServerCompact`。这似乎引起了问题。我卸载了`EFCodeFirst`，`EFCodeFirst.SqlServerCompact`包括依赖项，然后`EntityFramework`也卸载了。

干净安装`EntityFramework`，`EntityFramework.SqlServerCompact`问题解决。

# .net - 发布.net 强名称私钥的含义？

> ID：10787051
> 
> 赞同：2
> 
> 时间：2012-05-28T15:29:57.480
> 
> 标签：.net, security, strongname

假设我想发布一个开源类库。我想知道我是否应该用它发布 snk。例如，我确实想要一个 snk 来使 dll GAC 友好。我见过有公开 snk (NHibernate) 和未公开的项目 (DevExpress) 的大项目，以及双方的小项目，所以没有普遍的协议，这是肯定的。

假设我不发布私钥。这个库的用户本身就是开发人员，如果他们想要进行任何更改，要么需要重新编译我的源代码，要么对强名称验证进行例外处理。既是脖子痛，我也去过。

假设我发布它。我看不到如何利用它。CAS 和其他东西不再广泛使用，更重要的是，它甚至在 .NET 4.5 中已被弃用。所以这不像是可怜的用户根据它的公钥令牌授予我的程序集一些权利，而坏人用相同的令牌产生一个错误的程序集。如果一个坏人可以将他自己的 dll 放在某人的计算机上，那么阻止他们的并不是强大的名称。

我认为没有人会检查程序集的公钥令牌。当然，运行时会检查它自引用程序集编译后是否未更改，但仅此而已。发布者不发布他们的代币，所以据我所知，我可能会在编译我的代币时首先引用一个错误的程序集。

所以我倾向于发布snk。在我看来，它在理论上提供的安全性很小，在实践中没有安全性，所以为什么要让我的用户的生活更加艰难。也许我应该进行 X.509 代码签名（使用真正私钥的代码签名），但我认为大多数人也不会检查。

发表还是不发表？最好的论点获胜。理论方面，实践方面，MS™ 指南，都欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:01:50.470

我不会发布它。

它将允许攻击者重新编译程序集，向其中添加恶意代码。更改后的程序集将与您的程序集具有相同的强名称。

如果您不发布密钥，则可以分发库的“受信任”二进制文件和没有密钥的源代码。如果第 3 方开发人员需要自定义库，他们只需为其生成一个新密钥（但生成的程序集将具有与官方版本不同的强名称，允许运行时区分两者）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T13:39:22.010

您不应该分发强命名密钥，但这与安全性几乎没有关系。

强命名是一种识别技术，而不是一种安全措施。它仅用于防止意外的装配身份冲突。（为了使其足够强大以供“严肃”的安全使用，它需要可撤销的密钥而不是自行生成的密钥。）

但是，防止意外碰撞是不在开源项目上分发签名密钥的充分理由。这是防止您的版本 1.2.3.4 看起来与其他人从修改的源代码编译的版本 1.2.3.4 相同的主要因素。鉴于为项目开放源代码的主要目标之一通常是允许人们分发从更改的代码编译的程序集，有人甚至可能会争辩说，适当的个性化强命名对于开源项目比对于一个开源项目*更*重要。闭源分发。

# css - SASS 中的嵌套类

> ID：10787055
> 
> 赞同：3
> 
> 时间：2012-05-28T15:30:13.113
> 
> 标签：css, compass-sass, sass

我有以下代码：

```
 li {
            a {
                /* style removed for brevity */
                &:hover {   
                    color:#4f9269;
                    @include background-image(linear-gradient(top, #fff, #f0f6f2));
                }
            }
            &.active a {
                color:#4f9269;
                @include background-image(linear-gradient(top, #fff, #f0f6f2));
            }
        } 
```

当菜单项处于活动状态时，活动类将应用于 li，所以我不得不像这样应用 CSS。

我也考虑过写一个mixin：

```
@mixin activestate() {
    color:#4f9269;
    @include background-image(linear-gradient(top, #fff, #f0f6f2));
} 
```

然后这样做：

```
 li {
            a {
                /* style removed for brevity */
                &:hover {   
                    activestate();
                }
            }
            &.active a {
                activestate();
            }
        } 
```

通常使用 CSS 我会写这样的东西

```
li a:hover, li.active a {
    /* active styles here */
} 
```

我想知道 SASS 是否有办法实现类似的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:16:19.503

SCSS 可以使用与 CSS 相同的语法。此外，CSS 与 SCSS 完全兼容。所以你可以使用：

```
li a:hover, li.active a {
   @include activestate();
} 
```

或者在 SASS 中：

```
li:hover, li.active a 
  +activestate() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T00:25:30.530

或者不编写额外的 mixin：

```
li {
  /* styles removed for brevity */
  a {
    /* styles removed for brevity */
  }
  &.active a,
  a:hover {
    color:#4f9269;
    @include background-image(linear-gradient(top, #fff, #f0f6f2));
  }
} 
```

# sql-server - SQL Server 2008 R2 中的索引创建策略

> ID：10787057
> 
> 赞同：0
> 
> 时间：2012-05-28T15:30:22.443
> 
> 标签：sql-server, indexing

我有一个外键 (IdForign)，并且总是在 where 子句中使用它。我有三个领域：

```
Id
Name
IdForign 
```

如何为名称字段创建索引？(IdForign, Name) 还是只有一个用于 IdForign 而其他用于 Name？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:55:50.423

If I undertand correctly your question, you need to create an Index only for `IdForign`, because it's the one you use in the `where`

**UPDATE**
As per your comment, if you are using both fields I suggest you to use an index with Name and IdForign

Read [this](http://www.sqlskills.com/BLOGS/KIMBERLY/post/Indexes-in-SQL-Server-20052008-Best-Practices-Part-1.aspx). It should give you some tips on indexing with Sql Server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:38:08.430

您所要求的基本系统税似乎是：

```
CREATE INDEX yourIndexName ON yourTableName (yourFieldName); 
```

这也是假设您的意思是 Microsoft SQL Server。[有关MSDN 文档](http://msdn.microsoft.com/en-us/library/ms188783.aspx)，请参见此处。

我希望这有帮助。

# c++ - 如何避免这段代码中的 DOS 攻击？

> ID：10787062
> 
> 赞同：4
> 
> 时间：2012-05-28T15:30:34.767
> 
> 标签：c++, sockets, asyncsocket, recv, ddos

我有一个用 C/C++ 编写的代码，如下所示：

```
 while(1)
{
    //Accept
    struct sockaddr_in client_addr;
    int client_fd = this->w_accept(&client_addr);
    char client_ip[64];
    int client_port = ntohs(client_addr.sin_port);
    inet_ntop(AF_INET, &client_addr.sin_addr, client_ip, sizeof(client_ip));

    //Listen first string
    char firststring[512];
    memset(firststring,0,512);
    if(this->recvtimeout(client_fd,firststring,sizeof(firststring),u->timeoutlogin) < 0){
        close(client_fd);
    }

    if(strcmp(firststring,"firststr")!=0)
    {
        cout << "Disconnected!" << endl;
        close(client_fd);
        continue;
    }

    //Send OK first string
    send(client_fd, "OK", 2, 0);

    //Listen second string
    char secondstring[512];
    memset(secondstring,0,512);
    if(this->recvtimeout(client_fd,secondstring,sizeof(secondstring),u->timeoutlogin) < 0){
        close(client_fd);
    }

    if(strcmp(secondstring,"secondstr")!=0)
    {
        cout << "Disconnected!!!" << endl;
        close(client_fd);
        continue;
    }

    //Send OK second string
    send(client_fd, "OK", 2, 0);

}
    } 
```

所以，它是可以使用的。我在 perl 中编写了一个非常简单的 dos 脚本来关闭服务器。

```
#Evildos.pl
use strict;
use Socket;
use IO::Handle;
sub dosfunction
{
my $host = shift || '192.168.4.21';
my $port = 1234;
my $firststr = 'firststr';
my $secondstr = 'secondstr';
my $protocol = getprotobyname('tcp');
$host = inet_aton($host) or die "$host: unknown host";
socket(SOCK, AF_INET, SOCK_STREAM, $protocol) or die "socket() failed: $!";
my $dest_addr = sockaddr_in($port,$host);
connect(SOCK,$dest_addr) or die "connect() failed: $!";
SOCK->autoflush(1);
print SOCK $firststr;
#sleep(1);
print SOCK $secondstr;
#sleep(1);
close SOCK;
}

my $i;
for($i=0; $i<30;$i++)
{
&dosfunction;
} 
```

循环 30 次，服务器宕机。

问题是：有没有一种方法、一个系统、一个解决方案可以避免这种类型的攻击？

编辑：recvtimeout

```
int recvtimeout(int s, char *buf, int len, int timeout)
     {

fd_set fds;
int n;
struct timeval tv;
// set up the file descriptor set
FD_ZERO(&fds);
FD_SET(s, &fds);
// set up the struct timeval for the timeout
tv.tv_sec = timeout;
tv.tv_usec = 0;
// wait until timeout or data received
n = select(s+1, &fds, NULL, NULL, &tv);
if (n == 0){
    return -2; // timeout!
}
if (n == -1){
    return -1; // error
}
// data must be here, so do a normal recv()
return recv(s, buf, len, 0);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:46:38.850

我认为一般来说没有任何 100% 有效的软件解决方案来应对 DOS 攻击；无论您做什么，总有人会在您的网络接口上抛出比它可以处理的更多的数据包。

但是，在这种特殊情况下，您的程序似乎一次只能处理一个连接——也就是说，在连接 #1 完成其事务（或超时）之前，不会处理传入的连接 #2。所以这是一个明显的瓶颈——攻击者所要做的就是连接到您的服务器，然后什么也不做，并且您的服务器实际上被禁用了（无论您的超时时间有多长）。

为避免这种情况，您需要重写服务器代码以一次处理多个 TCP 连接。您可以通过切换到非阻塞 I/O（通过将 O_NONBLOCK 标志传递给 fcntl()）并使用 select() 或 poll() 等来一次等待多个套接字上的 I/O，或者通过产生多个线程或子进程以并行处理传入连接，或使用异步 I/O。（我个人更喜欢第一种解决方案，但都可以在不同程度上起作用）。在第一种方法中，在接受来自该 IP 地址的新套接字之前强制关闭来自给定 IP 地址的任何现有套接字也是可行的，这意味着任何给定的攻击计算机最多只能占用一个套接字。一次服务器，

您可以阅读[这篇文章](http://www.kegel.com/c10k.html)以了解有关同时处理多个 TCP 连接的更多讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:43:33.067

DOS 和 DDOS 攻击的主要问题是它们利用了您的弱点：即您可以用来提供服务的内存/端口数量/处理资源有限。即使您使用亚马逊农场之类的东西具有无限的可扩展性（或关闭），您也可能希望限制它以避免账单通过屋顶。

在服务器级别，您主要担心的是通过施加自我保护限制来避免崩溃。例如，您可以设置您知道可以处理的最大连接数，并简单地拒绝任何其他连接。

完整的策略将包括专门的材料，如防火墙，但总有一种方法可以发挥它们，你将不得不忍受它。

例如令人讨厌的攻击，请阅读wikipedia 上的[Slow Loris](http://en.wikipedia.org/wiki/Slowloris)。

> Slowloris 尝试保持与目标 Web 服务器的许多连接处于打开状态，并尽可能长时间地保持打开状态。它通过打开与目标 Web 服务器的连接并发送部分请求来实现此目的。它会定期发送后续的 HTTP 标头，添加（但永远不会完成）请求。受影响的服务器将保持这些连接打开，填充它们的最大并发连接池，最终拒绝来自客户端的额外连接尝试。

DOS 攻击有很多变种，因此很难找到一个具体的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:50:55.087

这并不是 DOS 攻击的万灵药，但使用非阻塞套接字肯定有助于提高可扩展性。如果你可以扩大规模，你可以减轻许多 DOS 攻击。此设计更改包括将接受调用中使用的侦听套接字和客户端连接套接字设置为非阻塞。

然后，您不会阻塞 recv()、send() 或 accept() 调用，而是阻塞 poll、epoll 或 select 调用 - 然后尽可能多地处理该连接的事件。使用合理的超时时间（例如 30 秒），这样您就可以从轮询呼叫中醒来，以清除并关闭任何似乎没有通过您的协议链进行的连接。

这基本上要求每个套接字都有自己的“连接”结构，该结构跟踪该连接相对于您实现的协议的状态。这可能还意味着保留所有套接字的（散列）表，以便它们可以映射到它们的连接结构实例。这也意味着“发送”也是非阻塞的。Send 和 recv 无论如何都可以返回部分数据量。

[您可以在此处查看](https://github.com/jselbie/stunserver/blob/master/server/tcpserver.cpp)我的项目代码中的非阻塞套接字服务器示例。（在第 360 行查看 Run 方法中主循环的开始）。

将套接字设置为非阻塞状态的示例：

```
int SetNonBlocking(int sock)
{
    int result = -1;
    int flags = 0;

    flags = ::fcntl(sock, F_GETFL, 0);
    if (flags != -1)
    {
        flags |= O_NONBLOCK;
        result = fcntl(sock , F_SETFL , flags);
    }
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T15:49:05.270

您的代码在成功时会泄漏文件句柄，这最终会使您用尽 fds 来分配，从而`accept()`导致失败。

`close()`完成后的套接字。

另外，要直接回答您的问题，除了纠正错误代码之外，没有其他解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:51:55.290

我将使用`boost::asio::async_connector`from [boost::asio](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/async_connect/overload3.html)功能来创建多个连接处理程序（适用于单线程和多线程环境）。在单线程的情况下，您只需要不时运行，`boost::asio::io_service::run`以确保通信有时间处理

您要使用 asio 的原因是因为它非常擅长处理异步通信逻辑，因此如果连接被阻塞，它不会阻塞（如您的情况）。您甚至可以安排在打开新连接时要投入多少处理，同时继续为现有连接提供服务

# php - 如何停止在 PHP 结果中列出重复项？

> ID：10787070
> 
> 赞同：0
> 
> 时间：2012-05-28T15:30:58.560
> 
> 标签：php, search

我编写了一个 PHP 脚本，它为网站上的列表分配分数并将其分配给结果页面。我已经让它工作了，它显示了分数和细节，但它一遍又一遍地列出相同的结果。

我无法弄清楚它在做什么，但我希望有一小部分代码可以防止重复列表。谁能给它一个调整，看看我是否会在某个地方拧紧？

**该代码是：**

```
$dupCatch .= $adId.","; 
$dupResults = explode(',', $dupCatch);

foreach($dupResults as $dupResult){

  if($dupResult == $adId){
    print "";
  } else {
    print $showResults;
    $scoreBox = 'THIS IS THE SCORE: '  . $finalScore . '';
    print $scoreBox;
  }

} 
```

提前致谢！

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:36:23.190

您可以尝试`array_unique`从 php 端使用或在 mysql 的字段中使用唯一属性，这样可以在插入之前防止重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:48:04.740

问题是您在检查它是否存在*之前*`$adId`将您的当前添加到重复列表中 - 当然，它将永远存在。

 *将一堆数字存储在一个字符串中，`explode`每次都 ing 有点奇怪，请改用数组。您也不需要手动遍历所有项目，只需使用[`in_array()`](http://de.php.net/in_array)

```
if( !in_array($adId, $dupCatch) ){
    print $showResults;
    $scoreBox = 'THIS IS THE SCORE: '  . $finalScore . '';
    print $scoreBox;
}

$dupCatch[] = $adId; 
```

不用说：首先修复给您提供重复结果的部分会是一个更好的主意。*

# c# - 在 ListView 中绑定项目集合，但显示其子集合而不是主项目本身

> ID：10787074
> 
> 赞同：0
> 
> 时间：2012-05-28T15:31:21.847
> 
> 标签：c#, wpf

我的程序包含一个`ObservableCollection`of `MapFiles`，我在各种 ListView 中绑定到它。但是，有些`MapFiles`包含列表`TagItems`，在我的最新窗口中，我希望 ListView 同时显示所有`TagItems`相关内容`MapFiles`。

我知道我可以通过手动添加`Items`到 ListView 来做到这一点，但是如果`TagItems`添加或删除了，我还需要维护它，所以我真的很想使用`ItemsSource`.

所以基本上我想绑定到我所有的`MapFiles`，但不是`MapItems`在 ListView 中显示他们自己，我想显示他们的`TagItems`，如果他们有的话。我敢肯定这一定是可能的， - 有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:41:05.857

如果您希望显示每个地图项的标记项，那么您可以使用全名.. 就像

```
listview.itemssource = mapitem.tagitem; 
```

在xml中

```
<ListView ItemsSource={Binding MapItem.TagItem}" /> 
```

这将只显示列表中的标记项。

# python - 将json对象作为参数传递给jinja2 python中的render()

> ID：10787080
> 
> 赞同：0
> 
> 时间：2012-05-28T15:31:49.337
> 
> 标签：python, jinja2

我试图创建一个 json 对象并将该对象传递给`template.render(JSONObj)`，但是有一些错误说

```
ValueError: dictionary update sequence element #0 has length 1; 2 is required 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T15:43:28.613

你必须给那个“JSONObj”对象一个键值。模板接收包含要在其中呈现的对象和值的字典。所以，尝试使用这个：

```
template.render(jsonobj=JSONObj) 
```

然后，在您的模板中，您可以通过以下方式使用此对象：

```
{{jsonobj.some_key_inside_json_object}} 
```

这`jsonobj`是一个名称，用于标识模板参数中的“JSONObj”对象。

希望能帮助到你！

# java - Java SWT GUI 在长时间运行的后台进程期间对更新无响应

> ID：10787081
> 
> 赞同：1
> 
> 时间：2012-05-28T15:31:49.807
> 
> 标签：java, multithreading, swt

**使用的技术：** Java 1.6 SWT GUI

**问题：** 在后台任务运行大约 60 分钟后，GUI 信息更新最终会停止（GUI 完全没有响应）。

问题似乎与 GUI 更新有关，我无法弄清楚如何解决这种情况（查看了 Java 并发选项等）。优化线程使用处理信息定期更新 GUI 中的文本框。在我的测试过程中，这个“更新”明显落后于控制台输出和数据库输出——假设优化执行了 4000 个优化步骤。控制台可以报告优化步骤 1900 的工作（在数据库中确认），但 GUI 仍然输出来自步骤 700 的信息。

**背景信息：** 我正在运行机器学习优化任务并将该任务合并到 SWT GUI 中。该任务可能需要一个小时或更长时间才能完成，具体取决于参数。我将优化任务设计为一个单独的线程。GUI 允许用户按下按钮来启动优化。GUI 包括（为了简化）1）任务表和 2）优化期间用于反馈的 SWT 文本框。随着每个不同的任务组完成，任务表会更新。SWT 文本框输出更常规/频繁的反馈（很像`System.out`但使用线程通过 GUI EDI 线程更新文本框）。也就是说，我相信我至少使用了三个线程：1) GUI 线程，2)`aSync`用于 GUI 更新 (SWT) 的线程，以及 3) 用于优化本身的后台线程。*（我提到这一点是因为 Java 并发教程明确指出长时间运行的任务必须在它们自己的线程中运行以避免 GUI 死锁和饥饿。然而，即使我认为我这样做了，在长时间的优化运行后 GUI 仍然停止——并且这就是我要解决的问题。因为优化运行需要很长时间才能完成，所以 GUI 停顿是一个主要问题——在意识到 GUI 停顿之前损失了一个多小时。）*

**基本程序结构：** GUI类-->为优化类启动一个单独的线程

优化类可以通过回调更新 GUI 类组件（使用 SWT `asyncExec`）

**已确认：** 我可以确认后台线程运行完全--1）后​​台线程更新了几个数据库表并且所有表都完全完全更新了；2）`System.out`直接从Eclipse中发送到控制台的优化任务的输出显示优化线程完全运行。

此外，在测试期间，如果我将优化设置缩减到 400 步，GUI 似乎运行良好。

**相关代码：** GUI CLASS——更新 GUI 和 GUI 类中的代码（由优化类线程调用）——

```
public void setFeedback(final String workerthreadinfo, final boolean append) {
try{  
    Display.getDefault().asyncExec(new Runnable(){  
    public void run(){  
        if(!textfeedback.isDisposed() && textfeedback !=null){  
        if (append) {
                      textfeedback.setText(workerthreadinfo + "\n" +
                            textfeedback.getText()) ;
        } else {
            textfeedback.setText(workerthreadinfo) ;
        }  
         } 
    }  
    });
     } ..... 
```

GUI 类中优化工作线程的实例化

```
private OptimizerWorkerThread workerthread = 
   new OptimizerWorkerThread(this) ; 
```

GUI 类中的代码启动优化类（作为线程）

```
protected void optimize() {
    workerthread.go() ;
} 
```

OPTIMIZATION CLASS--“链接”到 GUI 的优化线程方法（guiwindow = 上面的 GUI 类）

```
// ==================================================================
// GUI Update Methods
// ================================================================== 
public void updateFeedBackInfo(String update, boolean append) {
    guiwindow.setFeedback(update, append) ;
} 
```

从优化线程回调 GUI 的示例

```
//GUI Feedback
this.updateFeedBackInfo("Saving optimization run record to database ... ", 
   APPENDTEXT ) ; // APPENDTEXT = boolean TRUE instructing GUI textbox to append 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:54:51.993

**解决方案附录：**

在此应用程序的最终测试期间，我更仔细地确定了 GUI 速度变慢的明显原因。通过 GUI 减速，我的意思是复制 2500 个文件之间的区别。减速问题需要将近 20 分钟才能完成复制。应用修复后，复制完全相同的文件只需不到 1 分钟。

**问题** 副本是通过工作线程处理的。工作线程定期更新 GUI。更新包括 ProgressBar 更新和文本框更新。

文本框更新似乎是问题的根源。我想要的是一个文本框，用于预置状态更新信息——例如“复制文件 C:/hello.txt”——而不是附加（在 SWT 中可用）。要创建我使用的人造前缀（在单独的线程中）：

```
textfeedback.setText(workerthreadinfo + "\n" + textfeedback.getText()) ; 
```

这段小代码似乎是导致速度变慢的罪魁祸首——而且可能很容易看出原因。在每个文件副本中，都会复制整个文本框内容，然后将新信息附加到文本框中。在复制了大约 700 个文件后，这开始陷入困境（您可以明显地看到减速）并在之后继续恶化。

尽管我对此不满意，但解决方法是改用 SWT TextBox append() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:51:12.377

这听起来不像是线程问题。

如果您在 GUI 线程中意外运行，则在单击按钮后 GUI 将立即死机。所以我认为我们可以排除这种可能性。

您所描述的听起来更像是内存负载/性能问题。我强烈建议将 Visualvm 与您的应用程序连接起来，并特别注意不断增加的内存消耗。此外，使用 visualvm 中包含的分析器可能会暗示消耗大量 cpu 或内存的东西。

# c# - 覆盖派生类上的自定义属性

> ID：10787082
> 
> 赞同：16
> 
> 时间：2012-05-28T15:31:50.320
> 
> 标签：c#, .net, inheritance, custom-attributes

我们有一个自定义属性

```
[AttributeUsage(AttributeTargets.All, AllowMultiple = true)]
public class CustomDesignerAttribute: Attribute 
```

然后我们有一个用这个属性装饰的基类

```
[CustomDesigner(someKey, someValue)]
public class BaseClass 
```

然后我们有一个派生自这个类的类，装饰有相同的属性（具有相同的键，不同的值）

```
[CustomDesigner(someKey, someOtherValue)]
public class ChildClass : BaseClass 
```

ChildClass 是否有可能不创建属性的副本，而是覆盖现有键的值（覆盖整个父属性）？如果没有，如果 ChildClass 没有定义他自己的，从 BaseClass 获取默认值的最佳模式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T15:43:16.283

不，不可能覆盖现有属性。

属性是附加到对象（程序集、类、方法、变量等）的元数据，因此它们始终保持这种*连接*。

如果您想在基类中提供默认的“行为”并在某些派生类中覆盖它，则必须检查返回的所有属性`GetCustomAttributes()`以仅使用最派生的属性（列表中的第一个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:53:49.567

用于`[AttributeUsage(Inherited=false)]`防止属性被派生类继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-25T08:57:57.113

我认为可以通过以下方式：

## 1.使用类型描述符

在您的`CustomDesignerAttribute`覆盖中`TypeId`：

```
public override object TypeId
{
     get
     {
         return Key.GetHashCode();
      }
 } 
```

的基本实现`TypeId`只使用属性类型，因此不涉及任何参数。

然后你可以使用 `TypeDescriptor.GetAttributes(typeof(ChildClass)).OfType<CustomDesignerAttribute>()`

`TypeDescriptor`（与 相比`GetType().GetCustomAttributes`）仅返回一个基于相同的属性`TypeId`。我对其进行了测试，它是与`TypeId`返回的最匹配的派生属性。

因此，如果您`TypeId`代表属性的键，那么您可以在派生类上覆盖它 -`TypeDescriptor`用于获取属性时！请注意，只要它们的键不同，多个属性仍然是可能的。

注意：TypeDescriptor 还查找动态添加的属性（在运行时添加）

## 2\. 使用移除属性

您可以`bool Remove { get; set; }`向您的`CustomDesignerAttribute`. 您可以`true`在派生类中将其设置为，同时将其他参数设置为与要删除的基类属性相同。然后将另一个具有相同键但您想要的值的属性添加到派生类。获取属性时，您必须以智能的方式评估 Remove 属性。使用 TypeDescriptor （如 1），`TypeId`例如返回`Key.HashCode() + Value.GetHashCode()`或使用`GetType().GetCustomAttributes`，在这两种方式中，您都必须遍历属性列表和过滤器。您必须知道这些列表的顺序是最先派生的类型还是相反。

# python - 使用两个版本的 Python (Windows) 安装 IPython

> ID：10787084
> 
> 赞同：3
> 
> 时间：2012-05-28T15:31:57.640
> 
> 标签：python, windows, python-3.x, installation, ipython

是否可以在 具有两个不同版本的 Python（v 2.7 和 3.2）的*同一*系统上安装**IPython（0.12 ）？**目前，我的两个版本的 Python 都在我的系统上愉快地运行。

 *我正在使用两台机器，一台装有 **Windows 7 64-bit**，另一 台装有**XP SP2 32-bit**，并且都安装了**Python 2.7.2**和**3.2**。我一直在使用 IPython 和 Python 2.7，两者都没有任何问题。

现在我希望 IPython 也可以使用 3.2，但是当我尝试运行二进制 Windows IPython 安装程序时，我在安装结束时收到此错误：

```
*** run_installscript: internal error 0xFFFFFFFF *** 
```

并且没有创建开始菜单等的快捷方式/条目。（我在 Win 7 下以管理员身份运行安装）我在 XP 和 Win 7 上遇到了同样的问题。

在网上和 SO 闲逛了一段时间后，我看到了获取[setuptools](http://pypi.python.org/pypi/setuptools#files)的参考资料。不幸的是，没有 Python 3.x 的版本，但建议使用我运行和安装的[Distribute.py](http://pypi.python.org/pypi/distribute#installation-instructions)代替。我不确定下一步如何进行。而且我什至不确定是否可以这样做（尽管我认为是:)

有什么建议么？

更新：`import readline`不使用 Python 3.2.3 时出现问题，但我能够通过下载适用于 Python 3.2.3 的[pyreadline-2.0-dev1.win32.exe](https://launchpad.net/pyreadline/+download)来修复它。不幸的是，上述问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T23:04:59.703

好的，这是我的解决方案，让**IPython 0.12.1**在同一系统上同时与**Python 2.7.x 和 3.2.x**一起工作（即在**Windows 7** 64 位和**XP** SP2 32 位下）。它并不完美，但很有效，希望能对其他人有所帮助。我在哪里显示它们引用 XP 的目录（但应针对 Windows 7 进行相应调整）

**两者的步骤：**

1.  [通过Python.org](http://Python.org)提供的二进制 Windows 安装程序安装两个版本的 Python

2.  安装此版本的 pyreadline [pyreadline-2.0-dev1.win32.exe](https://launchpad.net/pyreadline/+download)，它适用于Python 的*两个*版本（我无法让广泛可用的 1.7 版与 Python 3.2.x 一起使用）

3.  我不确定是否需要[distribute.py](http://pypi.python.org/pypi/distribute#installation-instructions)，我会在第一次尝试时跳过它。

4.  下载 [ipython-0.12.1.zip](http://archive.ipython.org/release/0.12.1/ipython-0.12.1.zip)文件并解压。将它放在您的 Programs 目录下并 cd 进入它（我将其称为`ipython_dir`）[我多次尝试二进制安装程序但没有成功]

**对于 Python 3.2（更简单）**

在`ipython_dir`：

```
c:\python32\pyton.exe setup.py install 
```

将 `ipython3.exe`在其中创建`c:\python32\Scripts`可用于启动 iPython

**对于 Python 2.7（有点奇怪）**

上述方法失败。但是，可以从`ipython_dir`with启动 IPython

```
c:\python27\python.exe  ipython.py 
```

我无法解释为什么会这样，但由于我使用[Console2](http://sourceforge.net/projects/console/)，我可以隐藏这两种启动 IPython 的方式。

**摘要**：

要使用 Python 的 v 2.7.x 启动 IPython：

```
c:\python27\python.exe "C:\Program Files..\ipython_dir\ipython.py" 
```

要使用 Python 3.2.x 版本启动 IPython：

```
c:\python32\Scripts\python3.exe 
```

那是大量的工作并且花费了一天的大部分时间，所以我希望发布上面的步骤可以为其他人节省很多时间（并帮助我记住下次遇到这个问题时我必须做什么）

感谢大家的建议。

*附录*：以上都没有导致开始/程序菜单中的快捷方式或条目。可以手动创建快捷方式，或者在我的情况下不需要，因为我使用特殊的 shell (Console2) 来运行 IPython。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:47:03.690

iPython [FAQ](http://ipython.org/faq.html)中标题为“针对多个 Python 版本运行 IPython”的第一个问题可能会有所帮助。*

# authentication - 在需要身份验证的代理后面使用 ELPA (Emacs)

> ID：10787087
> 
> 赞同：23
> 
> 时间：2012-05-28T15:32:08.573
> 
> 标签：authentication, emacs, proxy, emacs24, elpa

我读过[这个](https://stackoverflow.com/questions/1595418/emacs-behind-http-proxy)和[这个](https://stackoverflow.com/questions/2783267/how-to-configure-emacs-behind-an-authenticated-http-proxy)问题。他们都说 Emacs 可以处理身份验证，但它对我不起作用。

问题是：怎么了？

Emacs 版本是 24.0.97-1，它在 64 位 Linux 上运行。

在工作中，我必须使用代理服务器进行任何 Internet 连接。所以我设置了以下环境变量：

```
http_proxy="http://username:password@ip:port
https_proxy="https://username:password@ip:port
ftp_proxy="ftp://username:password@ip:port 
```

这行得通。我可以毫无问题地下载软件包。

当我`M-x package-refresh-contents`在 Emacs 中运行时，它要求我输入代理服务器的登录名和密码，但它无法连接到服务器。它甚至不尝试连接，即在我输入密码并按下`Enter`Emacs后**立即**报告： `Failed to download 'marmalade' archive`

如果我从`http_proxy`变量中删除用户名和密码或者我`url-proxy-services`在 Emacs 中设置（即使我取消设置系统变量），也会发生同样的情况。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-09T11:27:54.810

Emacs`HOST`仅`PORT`使用`http_proxy`.

我通过以下方式获得授权，无需用户交互：

```
(setq url-proxy-services
   '(("no_proxy" . "^\\(localhost\\|10.*\\)")
     ("http" . "proxy.com:8080")
     ("https" . "proxy.com:8080")))

(setq url-http-proxy-basic-auth-storage
    (list (list "proxy.com:8080"
                (cons "Input your LDAP UID !"
                      (base64-encode-string "LOGIN:PASSWORD"))))) 
```

这适用于 Emacs 24.3。它基于非公共 API 技巧，因此可能无法工作是另一个 Emacs 版本......

用您的身份验证信息替换`LOGIN`和`PASSWORD`...

还有`url-http-proxy-digest-auth-storage`. 只需使用身份验证数据填写提示并检查 Emacs 使用的 var （通过`M-:` *var* `RET`）...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T07:03:32.357

看起来 Emacs 在身份验证方面存在一些问题。所以我已经安装了 Squid，现在将它用作外部代理服务器和我所有应用程序之间的中介。Squid 被配置为无需身份验证的代理，并且一切正常。

许多人推荐此解决方案，但没有给出准确的说明。我用`/etc/squid/squid.conf`另一个为不同目的设计的。可能它包含一些不需要的东西和/或错过了它应该拥有的东西。欢迎任何改进：

```
# only access from localhost is allowed
acl localhost src 127.0.0.1/32
acl all src all
http_access allow localhost
http_access deny all
icp_access deny all

never_direct allow all

# turn off cache
cache_dir null /tmp
cache deny all

# logs
access_log /var/log/squid/access.log squid

# turn off proxy-headers (no idea what is it :))
via off
forwarded_for off

# describe external proxy server
cache_peer <proxy_ip> parent <proxy_port> 0 no-query default proxy-only login=<my_login>:<my_password>
http_port 10000
acl port10000 myport 10000
cache_peer_access <proxy_ip> allow port10000 
```

这个代理有地址`127.0.0.1:10000`。在 Emacs 中，我必须执行以下代码：

```
(setq url-proxy-services '(("http" . "127.0.0.1:10000"))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T17:32:44.017

这里有两个错误 - 一个在 url-http.el 中，可以用我刚刚发送到[http://debbugs.gnu.org/cgi/bugreport.cgi?bug=12069](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=12069)的补丁修复 这将阻止 Emacs每次尝试都会提示您输入密码，当它不提示您时，它应该可以工作。

另一个bug还没有找到，但似乎代理服务器请求认证时，会提示认证，然后代理服务器的认证请求立即被包代码处理。同时，真正的请求在后台继续进行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-11-06T23:02:37.863

在 emacs < 28.1 中存在另一个相关的错误`url-http`，`url-https-proxy-connect`导致所有通过身份验证代理的 https 调用失败。

请参阅[https://debbugs.gnu.org/cgi/bugreport.cgi?bug=42422](https://debbugs.gnu.org/cgi/bugreport.cgi?bug=42422)。

作为 emacs < 28.1 的解决方法，使用固定版本覆盖该函数：

```
(with-eval-after-load 'url-http
  (defun url-https-proxy-connect (connection)
    (setq url-http-after-change-function 'url-https-proxy-after-change-function)
    (process-send-string connection (format (concat "CONNECT %s:%d HTTP/1.1\r\n"
                            "Host: %s\r\n"
                            (let ((proxy-auth (let ((url-basic-auth-storage
                                         'url-http-proxy-basic-auth-storage))
                                    (url-get-authentication url-http-proxy nil 'any nil))))
                              (if proxy-auth (concat "Proxy-Authorization: " proxy-auth "\r\n")))
                            "\r\n")
                        (url-host url-current-object)
                        (or (url-port url-current-object)
                        url-https-default-port)
                        (url-host url-current-object))))) 
```

# apache - 水晶报表无法显示

> ID：10787090
> 
> 赞同：0
> 
> 时间：2012-05-28T15:32:23.737
> 
> 标签：apache, crystal-reports

我正在为我的项目使用 Visual Studio 2010 asp.net 和 Crystal Report Ver.13，一切正常，直到我将我的项目发布到 Apache。尽管其他页面工作正常，但没有显示水晶报表。是否可以在使用 mod_aspdotnet 配置的 APACHE 上运行水晶报告

需要帮助和建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:45:11.927

您是否在 apache 服务器上安装了运行时？

# sql - SQL - 连接任何表中的所有列

> ID：10787092
> 
> 赞同：1
> 
> 时间：2012-05-28T15:32:29.417
> 
> 标签：sql, sql-server, sql-server-2008, auditing

我正在使用触发器来审核表更改。现在，我在以下内容中捕获了各个列的更改：

```
DECLARE @statement VARCHAR(MAX)
SELECT @statement =
'Col1: ' + CAST(ISNULL(Col1, '') AS VARCHAR) + ', Col2: ' + CAST(ISNULL(Col2, '') AS VARCHAR) + ', Col3: ' + CAST(ISNULL(Col3, '') AS VARCHAR)
FROM INSERTED; 
```

问题是，我需要调整要审计的每个表/触发器的列名。有没有一种方法可以使用更通用的方法构建@statement，独立于表？

欢呼大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:44:44.200

您需要做的是使用以下查询构建一个内存表，然后循环通过它来生成您想要的 SQL 语句

从 information_schema.columns 中选择 column_name 其中 table_name like 'tName' order by ordinal_position

但是我不确定这对 AUDIT 来说是不是正确的做法。以后怎么拉回来。假设在您的某个版本中，您碰巧删除了该列，然后会发生什么？你怎么知道哪一列保存了哪些数据。

# c# - 带有单选按钮列的 GridView

> ID：10787094
> 
> 赞同：1
> 
> 时间：2012-05-28T15:32:36.653
> 
> 标签：c#, winforms, devexpress

我正在尝试使用单选按钮作为第一列来制作 gridView。

我在用着

```
 DevExpress.XtraEditors.Repository.RepositoryItemCheckEdit m_repositoryItemCheckEdit 
```

作为第一个的列存储库编辑。

特性：

```
 m_repositoryItemCheckEdit.CheckStyle = DevExpress.XtraEditors.Controls.CheckStyles.Radio; 
```

作为第一列的编辑。

我正在尝试创建一个普通的单选按钮列表：1）至少选择一个选项 2）最多选择一个选项

对于第二条规则，我使用 CheckedChange 事件来获取行为：

```
 void m_repositoryItemCheckEdit_CheckedChanged(object sender, System.EventArgs e)
    {
        var selectedRow = m_gridView.GetSelectedRows()[0];

        for (int i = 0; i < m_gridView.RowCount; i++)
        {
            //change the checked state to false for all rows except the selected one
            if (i != selectedRow)
            {
                MyRecord o = m_gridView.GetRow(i) as MyRecord;
                o.Checked = false;
            }
        }
        m_gridView.RefreshData();

    } 
```

我不知道如何获得第一条规则。

你能帮我吗？

编辑：

我的记录是：

```
 public class MyRecord
{
    public bool Checked { get; set; }
    public string Name { get; set; }
    public MyRecord(bool i_checked, string name)
    {
        Checked = i_checked;
        Name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:47:18.480

要实现第一条规则，请处理[GridView.ShowingEditor](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_ShowingEditortopic)事件。此事件允许您根据任意规则禁用某个单元格。在事件处理程序中验证[GridView.FocusedColumn](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseColumnView_FocusedColumntopic)是否等于您的复选框列。然后查看行，如果焦点行是唯一选中的行，则不要通过将 e.Cancel 属性设置为 true 来显示编辑器。

# ios - UITextView 计算行中的单词

> ID：10787097
> 
> 赞同：1
> 
> 时间：2012-05-28T15:33:15.107
> 
> 标签：ios, cocoa-touch, uitextview

如果 UITextView 有框架，有没有办法计算单行 UITextView 中的单词？我知道文本大小、框架大小和行数，但我不知道如何获得每行中的字数。

# objective-c - 无法在我的文本视图中显示成功的 sqlite 查询

> ID：10787098
> 
> 赞同：0
> 
> 时间：2012-05-28T15:33:25.017
> 
> 标签：objective-c, ios, xcode

我正在尝试在文本视图中显示一串文本。根据 NSLog 找到了数据库，但是我无法从表中检索数据。有人可以指出我的查询有什么问题吗？（我可能需要用非常简单的术语来解释这个。我只唱了几天的objective-c。）

```
 - (void)viewDidLoad {

 NSString *docsDir;
 NSArray *dirPaths;

 // Get the documents directory
 dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

 docsDir = [dirPaths objectAtIndex:0];

 // Build the path to the database file
 databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent:@"trivia_game.db"]];
 NSLog(@"Full DB path: %@", databasePath);

 NSFileManager *filemgr = [NSFileManager defaultManager];

 if ([filemgr fileExistsAtPath: databasePath ] == NO)
 {
     const char *dbpath = [databasePath UTF8String];
     NSLog(@"[SQLITE] DB not found");

     } else {
     NSLog(@"[SQLITE] trivia_game.db found");
         }

 const char *dbpath = [databasePath UTF8String];
 sqlite3_stmt *statement;

 if (sqlite3_open(dbpath, &questionsForGame) == SQLITE_OK)
 {
     NSLog(@"[SQLITE] db opened");

     NSString *querySQL = [NSString stringWithFormat: @"SELECT question, answer0, answer1, answer2, answer3 FROM questions"];
     NSLog(@"[SQLITE] string is: %@", querySQL);

     const char *query_stmt = [querySQL UTF8String];

     if (sqlite3_prepare_v2(questionsForGame, query_stmt, -1, &statement, NULL) == SQLITE_OK)
     {
         NSLog(@"[SQLITE] written!");

         if (sqlite3_step(statement) == SQLITE_ROW)
         {
             NSString *textField = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
             questHolder.text = textField;
             NSLog(@"[SQLITE] string is: %@",textField);

             [textField release];

         } else {
             questHolder.text = @"query not found";
             NSLog(@"[SQLITE] Unable to open database!");

         }
         sqlite3_finalize(statement);
         sqlite3_close(questionsForGame);

     } else {
         NSLog(@"[SQLITE] Screwed up query!");
         questHolder.text = @"query not found";

     }

 }

 [filemgr release];
 [super viewDidLoad]; 
```

}

日志：

[会话开始于 2012-05-28 12:27:19 -0300。] 2012-05-28 12:27:20.547 ans[9374:207] 完整数据库路径：/Users/admin/Library/Application Support/iPhone Simulator /4.3/Applications/0B4C50FB-5A3F-4371-83D6-1A2AF95B9F66/Documents/trivia_game.db

2012-05-28 12:27:20.549 ans[9374:207] [SQLITE] trivia_game.db 找到

2012-05-28 12:27:20.550 ans[9374:207] [SQLITE] db 打开

2012-05-28 12:27:20.551 ans[9374:207] [SQLITE] 字符串是：SELECT question, answer0, answer1, answer2, answer3 FROM questions

2012-05-28 12:27:20.553 ans[9374:207] [SQLITE] 搞砸了查询！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:29:33.970

我不熟悉您使用的 SQLite 库，但我建议切换到 Core Data。参看。[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/cdprogrammingguide.html)

# c# - LINQ 和 XmlNodes 元素

> ID：10787100
> 
> 赞同：3
> 
> 时间：2012-05-28T15:33:51.477
> 
> 标签：c#, .net, sharepoint, linq-to-xml

我正在尝试从此 XML 返回属性值，这是从 Sharepoint Webmethod 调用的 XmlNodes 的集合。

**XML 数据**

```
 <Lists xmlns="http://schemas.microsoft.com/sharepoint/soap/">

    <List DocTemplateUrl="" DefaultViewUrl="/Lists/Announcements/AllItems.aspx" MobileDefaultViewUrl="" ID="{E6172717-EB95-4845-B8CB-8161832565C6}" Title="Announcements" Description="Use the Announcements list to post messages on the home page of your site." ImageUrl="/_layouts/images/itann.gif" Name="{E6172717-EB95-4845-B8CB-8161832565C6}" BaseType="0" FeatureId="00bfea71-d1ce-42de-9c63-a44004ce0104" />

    <List DocTemplateUrl="" DefaultViewUrl="/Lists/Calendar/calendar.aspx" MobileDefaultViewUrl="" ID="{C0735477-BE48-4DDF-9D93-3E1F8E993CEC}" Title="Calendar" Description="Use the Calendar list to keep informed of upcoming meetings, deadlines, and other important events." ImageUrl="/_layouts/images/itevent.gif" Name="{C0735477-BE48-4DDF-9D93-3E1F8E993CEC}" BaseType="0" FeatureId="00bfea71-ec85-4903-972d-ebe475780106" />

///... Several more like this
    </Lists> 
```

我一直在关注一些不同的指南，刚刚[在 DiC 上经历过这样](http://www.dreamincode.net/forums/topic/218979-linq-to-xml/)的指南，并且我已经设法让这些示例正常工作。

```
 public List<Dictionary<string, XmlAttribute>> GetListData(XmlNode collection)
    {            
        #region Test
    string nodeInput = Convert.ToString(collection.OuterXml);

    TextReader sr = new StringReader(nodeInput);

                 //from <List> node, decendant of <Lists>
    var lists = (from list in XElement.Load(sr).Descendants("List")
                 //where the baseType element value equals 0
                 where int.Parse(list.Element("BaseType").Value) == 0
                 //Output the titles values to a list
                 select list.Element("Title").Value).ToList();
     }

    #endregion 
```

我一直在尝试根据我的数据调整一些示例，以便更多地了解它是如何工作的，但是这个查询并没有像我预期的那样返回任何结果。除了评论中的每一行之外，我还写了我认为该命令在做什么，有人能说明我的错误吗？

* * *

**解决方案**

一旦我知道命名空间是问题所在，就很容易找到。

[http://msdn.microsoft.com/en-us/library/bb669152.aspx](http://msdn.microsoft.com/en-us/library/bb669152.aspx) 与 VB 不同，C# 需要命名空间，即使节点没有前缀也是如此。

所以我需要一个`XNamespace`

```
 XNamespace nameSpace = "http://schemas.microsoft.com/sharepoint/soap/";
    XElement node = XElement.Parse(nodeInput);

    var lists = from list in node.Descendants(nameSpace + "List")
                select list;
    foreach (var list in lists)
    {
        var doc = list.Document;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:00:11.617

你的代码应该是

```
XNamespace ns = "http://schemas.microsoft.com/sharepoint/soap/";

var lists = (from list in XElement.Parse(nodeInput).Descendants(ns + "List")
             where (int)list.Attribute(ns + "BaseType") == 0
             select (string)list.Attribute(ns + "Title")).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:11:55.263

**解决方案**

一旦我知道命名空间是问题所在，就很容易找到。

[http://msdn.microsoft.com/en-us/library/bb669152.aspx](http://msdn.microsoft.com/en-us/library/bb669152.aspx) 与 VB 不同，C# 需要命名空间，即使节点没有前缀也是如此。

所以我需要一个`XNamespace`

```
 XNamespace nameSpace = "http://schemas.microsoft.com/sharepoint/soap/";
    XElement node = XElement.Parse(nodeInput);

    var lists = from list in node.Descendants(nameSpace + "List")
                select list;
    foreach (var list in lists)
    {
        var doc = list.Document;
    } 
```

# maven - 具有特殊结构的多模块项目的Maven组装

> ID：10787101
> 
> 赞同：4
> 
> 时间：2012-05-28T15:34:00.923
> 
> 标签：maven, maven-assembly-plugin, multi-module

我是 Maven 的新手，我想我已经开始了解它是如何工作的了。但我无法理解 maven 程序集插件。我想要实现的是：

当所有项目都打包后，以及它们各自的依赖项，我想把它们都放在目标目录中。我不希望将它们打包到一个超级 jar 中，因为该系统是基于模块的。

让我解释一下，我有一个主项目，服务器，在maven项目“common”中，我有两个模块，“core”和“android”。在 common 文件夹中，还有一个我想要复制的 conf 文件夹。我想要这个结构：

*   目标/common.jar
*   目标/conf/ *（配置文件）*
*   目标/模块/core.jar
*   目标/模块/android.jar

我的项目结构是这样的：

*   pom.xml（父项目）
*   common/ (maven 模块)
*   核心/（maven模块）
*   安卓/（maven模块）

感谢您的任何帮助，或以正确的方式提供指导。:)

**编辑**这是 100% 工作的 ant 构建文件，也许我应该保留它？

```
<target name="init">
    <mkdir dir="dist" />
    <mkdir dir="dist/conf/" />
    <mkdir dir="dist/modules/" />
    <mkdir dir="dist/libs/" />

    <copy includeemptydirs="false" todir="dist/conf">
        <fileset dir="common/conf" />
    </copy>
</target>

<target name="copy-server">
    <copy todir="dist">
        <fileset file="common/target/server*.jar" />
    </copy>
</target>

<target name="copy-modules">
    <copy todir="dist/modules/">
        <fileset file="core/target/*.jar" />
        <fileset file="android/target/*.jar" />
    </copy>
</target>

<target name="copy-libs">
    <copy todir="dist/libs">
        <fileset dir="common/target/libs" />
        <fileset dir="core/target/libs" />
        <fileset dir="android/target/libs" />
    </copy>
    <delete>
        <fileset file="dist/libs/server*.jar" />
    </delete>
</target>

<target name="clean">
    <delete dir="dist" />
</target>

<target name="full-build" depends="clean, init, copy-server, copy-libs, copy-modules, increment">
    <echo message="Copying the fully built Maven project" />
</target>

<target name="increment">
    <propertyfile file="common/conf/version.properties">
        <entry key="build.number" type="int" operation="+" default="0" />
    </propertyfile>
    <property file="common/conf/version.properties" />
    <echo message="Build number is ${build.number}"/>
</target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T06:16:11.380

首先，程序集插件的作用：它使制作包含 Maven 项目的工件、依赖项和其他相关文件的 tar 或 zip 存档变得非常容易。

听起来您需要做的就是使用自定义描述符[设置程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)，以提取您感兴趣的 jars 和配置文件。如果您有一个代表“可分发”事物的模块 - 即使那样模块依赖于其他模块——那么您可能只需向它添加一个[程序集描述符](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)，其中包括一些[files](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_file)、[fileSets](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_fileSet)和/或[dependencySets](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_dependencySet)。

如果您的项目中有几个模块要包含并且没有任何依赖于所有模块，那么您需要查看[moduleSets](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html#class_moduleSet)。我自己从来没有使用过这些，但它们正是为了解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:46:27.950

此设置将完全按照您的要求解决。

`directory layout`

```
+- pom.xml
+- android
| +- pom.xml
| +- src
|   +- main
|     +- java
+- core
| +- pom.xml
| +- src
|   +- main
|     +- java
+- common
  +- pom.xml
  +- src
    +- main
     +- java
     +- resources
       +- conf 
```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>my-project</artifactId>
    <packaging>pom</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <modules>
        <module>android</module>
        <module>common</module>
        <module>core</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>core</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>android</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

</project> 
```

`android/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>android</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

</project> 
```

`core/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>core</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

</project> 
```

`common/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>common</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>core</artifactId>
        </dependency>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>android</artifactId>
        </dependency>
    </dependencies>

    <build>
        <finalName>${project.artifactId}</finalName>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <targetPath>${project.build.directory}</targetPath>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/modules</outputDirectory>
                            <stripVersion>true</stripVersion>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

最后一个 pom 是您可以根据需要更改行为的地方。

如果您想将所有这些打包在一些 uber-jar 中，那么您可以自由地这样做。

* * *

**编辑**：

好的，在阅读了您的评论并查看了您的 Ant 构建脚本之后，我提出了以下设计/设置，它将或多或少地为您提供所需的东西。

`directory layout`

```
+- pom.xml
+- android
| +- pom.xml
| +- src
|   +- main
|     +- java
+- core
| +- pom.xml
| +- src
|   +- main
|     +- java
+- common
| +- pom.xml
| +- conf.xml
| +- src
|   +- main
|    +- java
|    +- resources
|      +- conf
+- dist
  +- pom.xml 
```

`pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.example</groupId>
    <artifactId>my-project</artifactId>
    <packaging>pom</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <modules>
        <module>android</module>
        <module>common</module>
        <module>core</module>
        <module>dist</module>
    </modules>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>common</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>common</artifactId>
                <version>${project.version}</version>
                <classifier>conf</classifier>
            </dependency>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>core</artifactId>
                <version>${project.version}</version>
            </dependency>
            <dependency>
                <groupId>com.example</groupId>
                <artifactId>android</artifactId>
                <version>${project.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project> 
```

`android/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>android</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>common</artifactId>
        </dependency>
    </dependencies>
</project> 
```

`core/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>core</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>common</artifactId>
        </dependency>
    </dependencies>
</project> 
```

`common/pom.xml`

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>common</artifactId>
    <packaging>jar</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <executions>
                    <execution>
                        <id>assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <descriptors>
                                <descriptor>conf.xml</descriptor>
                            </descriptors>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

`common/conf.xml`

这个程序集描述符会将你的 conf 文件打包到一个单独的 jar 中，任何项目都可以依赖它。

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>conf</id>
    <formats>
        <format>jar</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <fileSets>
        <fileSet>
            <directory>${basedir}/src/main/resources/conf</directory>
            <outputDirectory>conf</outputDirectory>
            <includes>
                <include>*.properties</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

`dist/pom.xml`

dist 模块将解压缩 conf 依赖项并将其他依赖项复制到您的目标目录。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.example</groupId>
        <artifactId>my-project</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>com.example</groupId>
    <artifactId>dist</artifactId>
    <packaging>pom</packaging>

    <name>${project.artifactId}-${project.version}</name>

    <dependencies>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>common</artifactId>
        </dependency>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>common</artifactId>
            <classifier>conf</classifier>
        </dependency>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>android</artifactId>
        </dependency>
        <dependency>
            <groupId>com.example</groupId>
            <artifactId>core</artifactId>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>modules</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>com.example</groupId>
                                    <artifactId>android</artifactId>
                                </artifactItem>
                                <artifactItem>
                                    <groupId>com.example</groupId>
                                    <artifactId>core</artifactId>
                                </artifactItem>
                                <artifactItem>
                                    <groupId>com.example</groupId>
                                    <artifactId>common</artifactId>
                                    <outputDirectory>${project.build.directory}</outputDirectory>
                                </artifactItem>
                            </artifactItems>
                            <outputDirectory>${project.build.directory}/modules</outputDirectory>
                            <stripVersion>true</stripVersion>
                        </configuration>
                    </execution>
                    <execution>
                        <id>unpack</id>
                        <phase>package</phase>
                        <goals>
                            <goal>unpack</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>com.example</groupId>
                                    <artifactId>common</artifactId>
                                    <classifier>conf</classifier>
                                </artifactItem>
                            </artifactItems>
                            <excludes>**/MANIFEST.MF</excludes>
                            <outputDirectory>${project.build.directory}</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

我倾向于喜欢与the一起工作，`maven-dependency-plugin`我发现它非常强大。

dist 模块将具有对其他模块的所有必要依赖项，并根据需要下载和解压缩。如果您希望将其全部打包成 zip 或 tar.gz 或其他格式，那么您可以使用`maven-assembly-plugin`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T19:37:52.307

为您的项目构建时，Maven 将默认使用以下结构：

*   common/target/common-.jar
*   核心/目标/核心-.jar
*   android/target/android-.jar

然而，一切都没有丢失！与 maven 中的大多数选项一样，这可以使用适当的配置标签轻松覆盖。在您的情况下，您希望将标签下的 outputDirectory 标签（在每个模块 POMS 中）设置为正确的目录。

例如，应该编辑您的 ${basedir}/common/pom.xml 以添加以下行：

```
...
<build>
    <outputDirectory>../target</outputDirectory>
... 
```

您的 ./android/pom.xml 将被类似地编辑：

```
...
<build>
    <outputDirectory>../target/modules</outputDirectory>
... 
```

我不确定复制配置文件的最佳方法。您可能想尝试查找（或编写，因为它是一个相当简单的操作）一个插件来简单地复制文件并给它一个范围，例如“编译”，同时将其指向正确的目录。

# python - matplotlib 中的 2d hsv 颜色空间

> ID：10787103
> 
> 赞同：9
> 
> 时间：2012-05-28T15:34:09.543
> 
> 标签：python, numpy, matplotlib

我正在尝试在 matplotlib 中重现此图（取自维基百科）

[![在此处输入图像描述](../Images/0cb7e3009b7b606ceee95d47bf3a24ca.png)](https://i.stack.imgur.com/XLF9E.png)

基本上是饱和度设置为 1.0 的 2d hsv 颜色空间。这是我到目前为止所做的

```
from pylab import *
from numpy import outer

x = outer(arange(0, 1, 0.01), ones(100))

imshow(transpose(x), cmap=cm.hsv)
show() 
```

这绘制了色调通道，但我不知道如何添加第二个通道。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T00:51:51.443

您需要创建 HSV 数组并将其转换为 RGB，这是一个示例：

```
import numpy as np
import pylab as pl
from matplotlib.colors import hsv_to_rgb

V, H = np.mgrid[0:1:100j, 0:1:300j]
S = np.ones_like(V)
HSV = np.dstack((H,S,V))
RGB = hsv_to_rgb(HSV)
pl.imshow(RGB, origin="lower", extent=[0, 360, 0, 1], aspect=150)
pl.xlabel("H")
pl.ylabel("V")
pl.title("$S_{HSV}=1$")
pl.show() 
```

输出是：

![在此处输入图像描述](../Images/fae2dc38fa751d3fe0f5a0d82fa53414.png)

# android - android.view.ScaleGestureDetector 无法解析

> ID：10787104
> 
> 赞同：0
> 
> 时间：2012-05-28T15:34:10.367
> 
> 标签：android

我在我的 android 应用程序中使用 GraphView 并将包包含到我的项目中工作得很好。但是，由于 Eclipse 没有解析 android.view.ScaleGestureDetector，所以缺少一些东西。

有一个打印屏幕[http://www.mediafire.com/i/?sc8j7r341u126ak](http://www.mediafire.com/i/?sc8j7r341u126ak)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:40:59.187

很抱歉这个迟到的答案，但我刚刚在我的项目中解决了这个问题。

其实解决方案上写了一点警告，就在所有错误下面： Attribute minSdkVersion (8) is higher than the project target API level (7)

我不得不更改 Project > Properties > Android 并选择 Google APIs Level 8 而不是 Level 7。

稍后构建，我所有的错误都消失了。希望这个答案会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:52:48.287

[android.view.ScaleGestureDetector](http://developer.android.com/reference/android/view/ScaleGestureDetector.html) supported from **API LEVEL 8**.make sure you are using Sdk version 8 or greater then 8 if not using then set in manifest as:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mkyong.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" /> 
```

# php - 通过 Facebook-SDK 创建 Auto-POST

> ID：10787110
> 
> 赞同：1
> 
> 时间：2012-05-28T15:34:58.443
> 
> 标签：php, facebook

我想在我的网站中启用 Facebook Auto Post。

首先我创建了一个应用程序，然后按照我使用 facebook-sdk for PHP 的 facebook 文档，我插入了 APP-ID 和 APP-SECRET，创建 LOGIN-URL 和...到我的脚本（一切都像 facebook 文档），但是我还是有问题！！

问题是：

当用户第一次访问我的页面时，他会看到登录链接。当他点击它时，他将重定向到 facebook 对话框页面以允许应用程序活动。在此之后，当 facebook 将用户重定向到我的画布页面时，他再次看到登录链接！（似乎 getUser() 函数在我的脚本中无法正常工作！）。

基于 facebook 指南，用户必须查看用户个人资料详细信息......但登录链接仍然可见。

我该如何解决这个问题...？

```
<?php 

        require_once("libs/facebook.php");
        $config = array(
            'appId' => 'XXXX',
            'secret' => 'XXXX'      
        );
        $fbConnect = new Facebook($config);

        $user_id = $fbConnect->getUser();
        if($user_id)
        {
            try {

                $userProfile = $fbConnect->api('/me', 'GET');
                echo "Name: " . $userProfile['name'];

            } catch (FacebookApiException $e) {

                $loginUrl = $fbConnect->getLoginUrl();
                echo "<a href='" . $loginUrl . "'>LOGIN 2</a>";

            }
        }
        else
        {
            $loginUrl = $fbConnect->getLoginUrl(array( 'scope' => 'publish_stream' ));
            echo "<a href='" . $loginUrl . "'>LOGIN 1</a>";
        }
    ?> 
```

用户总是看到“LOGIN 1”！这意味着 $user_id 始终为空（在应用程序允许活动之前和之后）！应用程序允许后（当用户第一次单击 loginUrl 链接时）我的 url 查询字符串中有“stat”和“code”！但仍然可以看到“LOGIN 1”！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:32:12.063

我猜你想发布一条消息，比如“*嘿，伙计们，我现在正在使用 Aref 的超棒 Facebook 应用程序*”，对吧？

这可以通过以下几行来完成：

```
<?php
require_once("/FBAPI/src/facebook.php");

$config = array();
$config['appId'] = 'your_app_id';
$config['secret'] = 'your_app_secret';
$facebook = new Facebook($config);

$user = $facebook->getUser();
if(!$user){
    $loginUrl = $facebook->getLoginUrl(array('scope'=>'publish_stream', 'redirect_uri'=>'http://www.example.com'));
}
if($user){
    try{
        $user_profile = $facebook->api('/me');
        $access_token = $facebook->getAccessToken();
        $vars = array(
        'caption' => 'Aref\'s Facebook Application',
        'message' => 'Hey guys, I am now using Aref\'s superawsome Facebook App :D',
        'name' => 'Test',
        'link' => 'http://www.example.com',
        'description' => 'Aref\'s Facebook Canvas App',
        'picture' => 'http://fbrell.com/f8.jpg'
        );
        $result = $facebook->api('/me/feed', 'post', $vars);
        if($result){
            echo "Post was set";
        }
        else{
            echo "Error!";
        }
    }
    catch(FacebookApiException $e){
        error_log($e);
        $user = NULL;
    }
}
else{
    echo '<a href="'.$loginUrl.'"><img src="img/login.png"/></a>';
}
?> 
```

# sencha-touch - Ext.dataview.ListView ：禁用过度滚动？

> ID：10787113
> 
> 赞同：2
> 
> 时间：2012-05-28T15:35:09.270
> 
> 标签：sencha-touch, sencha-touch-2

在 sencha 可滚动视图中，例如**Ext.dataview.ListView**，我们总是可以将元素列表滚动到屏幕外。

如果我举这个例子：[http ://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/list](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/list)

有没有办法阻止列表项“Alana Wiersma”？我希望这个项目与“top <= 0px”一起使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T02:51:57.623

您的问题完全称为**overscrolling**。试试这个：

```
scrollable : {
  direction: 'horizontal',
  directionLock: true,
  momentumEasing:  {
     momentum: {
       acceleration: 30,
       friction: 0.5
     },
     bounce: {
        acceleration: 0.0001,
        springTension: 0.9999,
     },
     minVelocity: 5
  },
  outOfBoundRestrictFactor: 0   
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:45:11.003

我的第一个猜测是使用初始偏移量设置列表的滚动条

```
config:{
  scrollable:{
    direction:'vertical',
    initialOffset : {x: 0, y: VALUE}
  }
} 
```

并将 VALUE 替换为您需要的任何值

希望这可以帮助

# ios - 如何在推送通知中正确使用 UDID？

> ID：10787115
> 
> 赞同：1
> 
> 时间：2012-05-28T15:35:10.150
> 
> 标签：ios, apple-push-notifications, udid

我想了解如何正确使用 UDID 和推送通知到 iOS ！

最近，Apple 拒绝了几个使用 UDID 跟踪人员的应用程序。当我阅读 Apple 的通知指南时，它似乎至少一年以来没有修改过。那么苹果如何知道我们是否使用好的或坏的 UDID 进行推送通知......没有 UDID 我可以通知 iphone 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T19:43:24.133

为什么推送通知需要 UDID？`- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken`您可以从方法获取推送通知的设备令牌。

[指导](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

> 在 APNs 中，通过设备令牌确保准确的消息路由或令牌信任成为可能。设备令牌是设备的不透明标识符，当 APNs 首次与设备连接时，它会提供给设备。设备与其提供者共享设备令牌。此后，此令牌伴随来自提供者的每个通知。它是建立信任的基础，即特定通知的路由是合法的。
> 
> 注意：设备令牌与由 identifierForVendor 或 UIDevice 的 uniqueIdentifier 属性或任何其他类似属性（如 ASIdentifierManager 的 adsIdentifier 属性）返回的设备 UDID 不同。以下部分讨论连接信任和令牌信任的必要组件以及建立信任的四个过程。

# c# - 如何在两种方法之间共享一个 LINQ 查询？

> ID：10787116
> 
> 赞同：2
> 
> 时间：2012-05-28T15:35:10.643
> 
> 标签：c#, linq

有没有办法在两种方法之间共享一个 LINQ 查询？我有很长的 LINQ 查询从数据库中获取搜索结果，我需要使用这个查询来获取结果（某种列表<>）-第一种方法-并获取它的计数（int）-第二种方法-。我不想在两个单独的方法中复制此查询，也无法返回包含搜索结果和记录计数的自定义类对象（由此查询返回）。所以我想做的是获取 LINQ 查询定义（或类似的东西？），但没有我可以在其他方法中使用的结果集。也许还有另一种好方法可以做到这一点。谢谢你的帮助；）

代码如下所示：

```
public ??? GetSearchResultsQuery(SearchRequest search_request)
{
    var queryGetSearchResults = ....
    return queryGetSearchResults;
} 

public int GetSearchResultsCount(SearchRequest search_request)
{
    return GetSearchResultsQuery(search_request).Count();
}

public List<SearchResults> GetSearchResults(SearchRequest search_request)
{
return GetSearchResultsQuery(search_request).Skip(search_request.startRowIndex).Take(search_request.maximumRows).ToList(); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:39:17.057

```
public IQueryable<SearchedForType> GetSearchResultsQuery(SearchRequest search_request)
{
    var queryGetSearchResults = context.SearchedForTypes.Where(x => x == search_request.X);
    ... build up your search query ...
    return queryGetSearchResults;
} 
```

# android - 以编程方式解决我的 Android 手机上的通话中音频问题？

> ID：10787121
> 
> 赞同：0
> 
> 时间：2012-05-28T15:35:24.780
> 
> 标签：android, audio

我的手机是三星 Galaxy Note，有通话音频问题。

当我拨打或接听电话时，通话双方的听筒、扬声器、耳机或蓝牙耳机都没有声音。

但是，当我播放音乐或视频、录制音频和视频、在 Skype 和 ym 上进行语音通话时，听筒、扬声器、蓝牙耳机或耳机没有问题。

我该如何解决这个问题？有没有人遇到过类似的问题，他们可以帮助我修复有关如何解决此问题的指南的链接？

我试过了：

*   升级到 ics 4.0.3

*   闪烁其他库存ROM

*   闪烁的股票内核

*   全面擦拭

这些操作都没有解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:49:04.360

使用 Pro Key 试试这个应用程序。Pro 键启用电话声音路由设置。

[https://play.google.com/store/apps/details?id=com.woodslink.android.wiredheadphoneroutingfix](https://play.google.com/store/apps/details?id=com.woodslink.android.wiredheadphoneroutingfix)

# django - 如何将字典传递给 Django 模板？

> ID：10787125
> 
> 赞同：0
> 
> 时间：2012-05-28T15:35:40.087
> 
> 标签：django, django-templates, django-views

我无法在 Django 模板中获取字典的值。看一看`views.py`

```
 def subnet_network(request, page=None):
     ipv4_sub_net , ipv6_sub_net= get_netmask(user=request.user)
     extra_context = {
         'ipv4_net': ipv4_sub_net,
         'ipv6_net': ipv6_sub_net
         }
     return direct_to_template(request, 'networks/subnet_network.html',
                          extra_context=extra_context) 
```

要获取这两个字典的值和`subnet_network.html`. 我写了以下代码：

```
 <tbody>
  {% for k,v in ipv4_net.items %}
     <tr>
         <td>
             {{ v }}
         </td>
    </tr>
  {% endfor %}
 </tbody> 
```

上面的代码同样适用于 ipv6_net 字典，而我使用`pdb.set_trace()`. 它像这样打印：

```
 (Pdb) print ipv4_sub_net
 [{'ipv4_sub_net': u'255.0.0.0'}, {'ipv4_sub_net': u'255.255.255.255'}]

 (Pdb) print ipv6_sub_net
 [{'ipv6_sub_net': u'/12'}, {'ipv6_sub_net': u'/128'}] 
```

代码有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:52:57.847

查看打印语句，您有一个包含 2 个字典的列表，而不是一个包含 2 个元素的字典。因此 ipv4_sub_net.items 无效。

如果你这样做，你会看到它：

```
for v in ipv4_sub_net:
    print v 
```

# c++ - Makefile 修改以支持 c++11

> ID：10787126
> 
> 赞同：7
> 
> 时间：2012-05-28T15:35:48.557
> 
> 标签：c++, makefile, c++11

我可以使用带有 -std=c++0x 选项的 gcc 编译单个文件。但是我不能通过makefile来做到这一点。这是我的makefile中的一组标志（在make抱怨c ++ 11关键字之后）：

```
MACHINE = $(shell echo `uname -s`-`uname -m` | sed "s/ //g")
CCC     = CC
CCC     = g++
CFLAGS  = -O3
CFLAGS  = -std=c++0x
CFLAGS  = -pg -D_DEBUG -g -c -Wall
LFLAGS  = -O
LFLAGS  = -pg -g 
```

我错过了什么？

**编辑**：我将其更改为以下内容，但仍然出现编译错误，这是命令行 gcc 调用所没有的。

```
CXXFLAGS=-O3 -std=c++0x -pg -D_DEBUG -g -c -Wall 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T15:37:43.607

这样你的makefile将使用你所有的`CFLAGS`：

```
CFLAGS=-O3 -std=c++0x -pg -D_DEBUG -g -c -Wall 
```

您正在用每个“CFLAGS=...”声明覆盖它们。

而且，应该是`CXXFLAGS`，不是`CFLAGS`。`CFLAGS`用于 C 应用程序。

正如@Florian Sowade 所说，您可以使用`CFLAGS += -O3 -std....`（或 CXXFLAGS ..），以便用户在执行 make 时可以提供自己的标志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T15:38:19.790

您可以将其保留在多行中，但您可能想要*append*，而不是*assign*：

```
# e.g.
CFLAGS  += -O3
CFLAGS  += -std=c++0x
CFLAGS  += -pg -D_DEBUG -g -c -Wall 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:31:31.603

你从哪里弄来的这么多乱七八糟的东西？早在你为 C++11 修改它之前，那个 makefile 就错了。

让我们从第一行开始：

```
MACHINE = $(shell echo `uname -s`-`uname -m` | sed "s/ //g") 
```

尝试运行命令`echo `uname -s`-`uname -m``，你会看到是否没有空格，那么`sed`命令的意义何在？

也许你想要这个：

```
MACHINE = $(shell uname -s -m | sed "s/ /-/g") 
```

那只运行两个进程（uname 和 sed）而不是四个（两个 unames，echo 和 sed）

如果您使用的是 GNU make 它应该是

```
MACHINE := $(shell uname -s -m | sed "s/ /-/g") 
```

所以它只运行一次。

```
CCC     = CC 
```

是什么`CC`？

```
CCC     = g++ 
```

哦，没关系，反正你已经替换了值。C++ 编译器的常规 make 变量是`CXX`

```
CFLAGS  = -O3
CFLAGS  = -std=c++0x
CFLAGS  = -pg -D_DEBUG -g -c -Wall 
```

正如其他人指出的那样，您设置 CFLAGS，然后将其设置为不同的东西，然后设置为不同的东西。仅保留最后一个值。

```
LFLAGS  = -O
LFLAGS  = -pg -g 
```

同样在这里，什么是`LFLAGS`？你的意思是`LDFLAGS`？

调试 makefile 的一个好方法是创建一个目标来打印您正在设置的变量，以检查它们是否具有您期望的值：

```
print-vars:
        echo CFLAGS is $(CFLAGS)
        echo LDFLAGS is $(LDFLAGS) 
```

# mysql - 如何高效地处理 MySQL 表的所有行？

> ID：10787127
> 
> 赞同：1
> 
> 时间：2012-05-28T15:35:48.957
> 
> 标签：mysql, sql, perl, cursor

我有一个包含 2.37 亿行的 MySQL 表。我想处理所有这些行并用新值更新它们。

我确实有顺序 ID，所以我可以使用很多`select`语句：

```
where id = '1'
where id = '2' 
```

[这就是顺序运行100万条记录的MYSQL表](https://stackoverflow.com/questions/10521318/sequentially-run-through-a-mysql-table-with-1-000-000-records)中提到的方法吗？.

但是我想知道是否有一种更快的方法使用像游标这样的东西来顺序读取一个大文件，而无需将整个文件集加载到内存中。`select`在我看来，游标比运行数百万条语句以将数据恢复为可管理的块要快得多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T17:25:22.730

理想情况下，您可以让 DBMS 为您完成工作。您创建 SQL 语句，使其仅在数据库中运行，而不向应用程序返回数据。除此之外，这节省了发送给客户端的 2.37 亿条消息和返回服务器的 2.37 亿条消息的开销。

这是否可行取决于更新的性质：

*   DBMS 能否确定新值应该是什么？
*   您能否将必要的数据输入数据库，以便 DBMS 可以确定新值应该是什么？
*   会更改 2.37 亿行中的每一行，还是只更改一个子集？
*   DBMS 可以用来确定子集吗？
*   `id`是否会更改任何值？

如果这些`id`值永远不会改变，那么您可以安排将数据划分为可管理的子集，以实现“可管理”的任何灵活定义。

您可能需要考虑事务边界；可以在一个事务中完成所有操作而不会破坏日志吗？如果你在子集中进行操作而不是作为单个原子事务，如果你的驱动进程在处理 1.97 亿行时崩溃，你会怎么做？或者 DBMS 在那个时候崩溃了？您如何知道在哪里恢复操作以完成处理？

# c# - 试图将 form2 文本框绑定到 form1 列表视图

> ID：10787129
> 
> 赞同：1
> 
> 时间：2012-05-28T15:35:52.507
> 
> 标签：c#, .net, winforms, data-binding

我有 winform1`ListView`和添加按钮。当我按下添加按钮时，它会打开新的 winform2，其中包含 2 个文本框、姓名和保存按钮。现在我想要的是在我按下保存时将这些值添加到 listView 中。我的代码没有错误，但我的列表框不会更新。

这是我的列表类的代码：

```
public class Person
{
    public string Name { get; set; }

    public string Surname { get; set; }
} 
```

这是form2代码：

```
public partial class add : Form
{
    public add()
    {
        InitializeComponent();
    }

    Form1 f1 = new Form1();
    List<Person> People = new List<Person>();

    private void button1_Click(object sender, EventArgs e)
    {
        Person p = new Person();
        p.Name = textBox1.Text;
        p.Surname = textBox2.Text;
        People.Add(p);
        f2.listView1.Items.Add(p.Name + " " + p.Surname);
    }
} 
```

现在问题是调试没有显示任何错误。我的 listbox1 没有更新，我不知道我做错了什么。

尝试使用`f2.ShowDialog();`然后它在列表视图中显示添加的项目，但它再次打开 form1，当我添加新数据时，以前的数据将丢失。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:45:23.520

我会确保调用者可以`Person`使用`add`表单中的信息，`Form1`以便当用户单击“确定”按钮时，您可以将该信息添加到列表视图中。

为简单起见，我已更改我的版本以添加单个项目。我让你来决定如何为`List<Person>`.

在代码中，这看起来像这样：

```
public partial class add : Form
{
    // notice that we don't need a List, just a single item
    public Person person = new Person();

    public add()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        this.person.Name = this.nameTextBox.Text;
        this.person.Surname = this.surnameTextBox.Text;

        // the listView is only be updated if the changes were accepted
        // setting the result to OK will also close the dialog
        this.DialogResult = DialogResult.OK;
    }
} 
```

和代码`Form1`：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void addButton_Click(object sender, EventArgs e)
    {
        var add = new add();

        if (add.ShowDialog() == DialogResult.OK)
        {
            this.listView1.Items.Add(add.person.Name +
                                     " " + add.person.Surname);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:45:41.740

这段代码似乎是错误的：

```
f2.listView1.Items.Add(p.Name + " " + p.Surname); //Form2 
```

也许你的意思是：

```
f1.Show();
f1.listView1.Items.Add(p.Name + " " + p.Surname); //Form1
//this.Close(); <-- if you want to close the form after show f1 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:39:54.097

试试这个你的文本框：

```
public string textbox1_text
    {
        get { return textBox1.Text; }
        set { textBox1.Text = value; }
    } 
```

使用这些代码加载新表单：

```
Form2 f2 = new Form2();
        f2.Owner = this;
        f2.Show(); 
```

# android - 多个位图的潜在内存不足错误

> ID：10787130
> 
> 赞同：0
> 
> 时间：2012-05-28T15:35:53.163
> 
> 标签：android, memory, bitmap

我有一个用户评论说，在我的应用程序中查看一堆图像后，它崩溃了（他认为这是由于内存不足错误）。我有以下相关代码：

```
 int themeID = mNav[mPos];
    String icon = getThemeData(DbAdapter.KEY_ICON, themeID);
    ImageView viewer = (ImageView)findViewById(R.id.viewer);

    Bitmap bMap = null;
    try {
        bMap = getJPG(icon + ".jpg");
    } catch (IOException e) {
        e.printStackTrace();
    }

    viewer.setImageBitmap(bMap); 
```

当用户在图像之间翻转时，它会重新运行。从[这里](https://stackoverflow.com/questions/8871262/setimageresource-running-out-of-memory)我看到你应该在位图上调用 recycle() 。设置图像后是否需要在 bMap 上调用它？或者在设置下一个之前有什么方法可以将它从 viwer 中拉出来？

根据回收的文档（如果我在 bMap 上调用它），我似乎不需要使用它：这是一个高级调用，通常不需要调用，因为正常的 GC 进程会在出现时释放此内存不再引用此位图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:49:43.743

如果你需要显式调用`recycle()`它可能意味着你有内存泄漏。调用它几乎从来都不是解决方案。

您是否尝试检查您的应用程序是否存在潜在的内存泄漏？

要检查它，您可以例如旋转您的设备几次并检查垃圾收集器的行为方式。你应该有类似 GC_... 释放 211K，71% 释放 300K/1024K，外部 0K/0K，几乎每次旋转时在 LogCat 中暂停 1ms+1ms。注意这部分的变化：300K/1024K。如果您没有内存泄漏，那么第一部分应该会在几次 GC 后增长然后变小。如果您有内存泄漏，它会不断增长，直至出现 OOM 错误。

[查看](https://stackoverflow.com/questions/9818407/out-of-memory-error-in-android-due-to-heap-size-increasing/10409761#10409761)我关于内存泄漏的其他答案。

如果您确定没有泄漏并且您在 Honeycomb 上运行，您可以像这样增加您的应用程序可访问的堆大小：`android:largeHeap="true"`但仅在处理一些 huuuge 位图或视频时才建议这样做，[所以不要过度使用它](https://stackoverflow.com/questions/7596950/android-heap-memory-increase)。

# java - 动态设置列表

> ID：10787138
> 
> 赞同：5
> 
> 时间：2012-05-28T15:36:44.113
> 
> 标签：java, list, reflection, casting

我以前只使用反射来做一些事情，比如动态获取类并在其中设置字段值。我的谷歌搜索显示我也可以使用反射进行动态类型转换？

我的代码如下：

```
import entity.Shipvia;
import entity.Route;
import java.lang.reflect.Field;
import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.Persistence;
import javax.persistence.Query;

public class RetrieveResultList {

    public static List retrieveResultList(String tablename) {
        EntityManager entityManager = Persistence.createEntityManagerFactory("EntityLibraryPU").createEntityManager();
        Query query = entityManager.createNamedQuery(tablename + ".findAll");
        List<Shipvia> resultList = query.getResultList();
        return resultList;
    }
} 
```

我正在使用此方法从数据库表中动态检索结果。因为表名总是不同的，所以我不能有 List 因为每个表都会不同。

我将如何将我传入的表名字符串转换为列表的类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:43:23.007

你不能这样做，即使你可以，它也是无用的，因为在编译 Java 代码时，所有泛型信息都会从 Java 代码中删除，只有强制转换存在，并且因为你将使用反射，所以不会进行强制转换.

您将能够做的最接近的事情是，而不是发送一个**字符串**发送一个**类**对象。调用者代码必须说明它想要哪个类（调用者可能知道它正在使用哪种对象），并且您将使用它来使列表具有正确的泛型。

一个非常简单的实现是这样的：

```
List<Shipvia> shipvias = RetrieveResultList.retrieveResultList( Shipvia.class ); 
```

实现可能是这样的：

```
public class RetrieveResultList {

    private static final EntityManagerFactory FACTORY = Persistence.createEntityManagerFactory("EntityLibraryPU");

    public static <T> List<T> retrieveResultList(Class<T> type) {
        EntityManager entityManager = FACTORY.createEntityManager();
        String tablename = type.getName(); // figure out table name from **type**
        Query query = entityManager.createNamedQuery(tablename + ".findAll");
        List<T> resultList = query.getResultList();
        entityManager.close();
        return resultList;
    }
} 
```

然后你应该有你正在寻找的东西。

**另外，不要在每次调用此方法时创建实体管理器工厂，实体管理器工厂必须是您项目中的单例，因为它是一个非常昂贵的创建对象**。您还应该在离开该方法之前关闭您创建的**EntityManager 。**

# dependency-injection - 使用单个容器以完全信任的方式使用 Azure WebRole 实施依赖项注入

> ID：10787139
> 
> 赞同：1
> 
> 时间：2012-05-28T15:36:48.110
> 
> 标签：dependency-injection, inversion-of-control, azure-web-roles

我正在尝试为托管在以完全信任模式运行的 Azure WebRole 中的 WCF 服务实现依赖项注入（因此有两个单独的进程）。

到目前为止，我已经尝试过 Ninject，并且使用本文中描述的方法将依赖项注入 WCF 服务没有问题：http: [//tinyurl.com/cnxrscg](http://tinyurl.com/cnxrscg)

但是，我还有两个未解决的问题：

1.  我似乎找不到实例化`Kernel`before的方法`RoleEntryPoint`，以便可以将所需的依赖项注入其中。我应该从那里创建它还是有更好的做法？
2.  由于完全信任运行意味着两个进程，这是否也意味着我别无选择，只能创建两个单独的内核实例？

注意：我对特定于 Ninject 的解决方案不感兴趣。事实上，我在处理它时偶然发现了许多缺点，所以我正在考虑使用不同的 IoC 容器。哪一个最适合 Azure？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:51:49.617

每个 AppDomain 都需要自己的容器。通过 AppDomain 甚至跨进程共享容器通常是不受容器支持的，如果支持，则会消耗大量性能，因为所有编组将在两个 AppDomain 之间进行。此外，每个 AppDomain 通常代表自己的应用程序，并且每个应用程序通常都需要唯一的注册。这本身就证明了为每个 AppDomain 提供自己的容器是合理的。

# javascript - 如何检测 HTML 元素的移动？

> ID：10787140
> 
> 赞同：0
> 
> 时间：2012-05-28T15:37:00.297
> 
> 标签：javascript, jquery, html

我需要检测图像何时移动。关键是我的页面有一个与第一个相关的 HTML 元素（另一个图像），这取决于它的位置。我虽然[像 Watch](http://www.west-wind.com/weblog/posts/2008/Sep/12/jQuery-CSS-Property-Monitoring-Plugin-updated)这样的插件可以提供帮助，但我所知道的与位置 (`top`和`left`) 有关的唯一属性永远不会更改为该插件（将其原始值保持为“自动”）。

页面元素移动时如何触发事件？

**更新**：为了避免误解，我将解释实际发生的情况。我有一个图像（称为 AUX，绝对位置），它位于另一个图像位置（图像 BASE）的函数中。BASE 和 AUX 在 HTML 中除了 BODY 元素之外不共享任何内容，因此不能使用相对位置或类似位置。所以，我有一个函数可以获取 BASE 位置并计算 AUX 位置。问题是在页面加载时：当加载文档并且 BASE 的位置与最终位置不同时调用函数（当加载其他元素时，如其他图像、javascript 函数等，BASE 会更改其位置）。这使得 AUX 有一个无效的位置（它是有效的，但还不是）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:49:44.453

我不会使用 javascript 来设置位置，而是使用 javascript 使它们都成为最小公共元素的子元素，以便可以使用相对定位方案。因为否则，您将需要轮询位置并更新，并且充其量只能每 10-15 毫秒左右执行一次。

# language-agnostic - 区分开发服务器和生产服务器的可靠方法？

> ID：10787150
> 
> 赞同：2
> 
> 时间：2012-05-28T15:38:06.883
> 
> 标签：language-agnostic, configuration, production

以下是我想出的方法：

1.  有一个不受版本控制的配置文件
2.  根据已知开发服务器列表检查服务器名称/IP 地址
3.  设置一些可以读取的环境变量

我在我的一些项目中使用了 (2)，并且仅在一台开发机器上运行良好，但现在我们已经达到了 10 台左右，管理不断变化的列表可能会变得很困难。

(1) 我不喜欢，因为那是一个重要的文件，它*应该*是版本控制的。

(3) 我从未尝试过。当我们设置每台服务器时，它需要更多的配置，但这可能是一个不错的解决方案。

还有其他我想念的吗？有什么优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:59:58.687

(3) 不需要在服务器上进行更多配置。您可以改为默认为服务器模式，并且需要在开发机器上进行更多配置。

一般来说，我总是想让开发机器成为特例，并将发布行为设为默认值。唯一棘手的部分是，如果相关设置在配置文件中，那么开发人员会不断地意外检入他们修改后的文件版本。您可以在版本控制系统（例如签入挂钩）中避免这种情况，或者：

*   读取两个配置文件，其中一个允许不存在（并且只存在于开发机器上，或者可能存在于专家用户设置的服务器上）
*   读取允许不存在的环境变量。

我个人更喜欢有一个配置覆盖文件，因为你已经有了加载一个配置文件的代码，添加另一个应该很简单。读取环境并不难，当然，它只是一个单独的机制。

有些人真的很喜欢他们的程序由环境控制（尤其是那些想在从脚本运行时控制它们的人。当从脚本）。因此，可能值得使用该 POV 中的环境，但不仅限于此设置。

另一个完全不同的选项：如果您以适当的管理员权限登录应用程序，则可以在应用程序中配置开发/发布模式。这是否是一个好主意可能取决于您是否有那种编写调试日志消息的开发人员，“我懒得解决这个问题，但没有客户会说出区别，他们是都太傻了。” 如果是这样，(a) 不允许应用管理员启用调试模式 (b) 重新教育您的开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:12:39.890

这里有一些其他的可能性。

一些组织将开发机器放在一个网络上，将生产机器放在另一个网络上，例如`dev.example.com`，`prod.example.com`. 如果您的组织采用这种做法，那么应用程序可以通过运行它的完全限定主机名来确定其环境，或者可能通过检查其 IP 地址中的某些位来确定其环境。

另一种可能性是使用可嵌入的脚本语言（想到 Tcl、Lua 和 Python）作为配置文件的语法。这样做意味着您的配置文件可以轻松查询环境变量（或 IP 地址）并使用它来驱动`if-then-else`语句。这种方法的一个缺点是有人编辑配置文件以添加恶意代码（例如，删除文件）的潜在安全风险。

最后一种可能性是通过 shell/Python/Perl 脚本启动每个应用程序。该脚本可以查询其环境，然后使用它来驱动一个`if-then-else`语句，以将命令行选项传递给“真实”应用程序。

顺便说一句，我不喜欢编写`if-then-else`如下的环境测试语句：

```
if (check-for-running-in-production) {
    ... // run program in production mode
} else {
    ... // run program in development mode
} 
```

`check-for-running-in-production`如果尚未更新测试以处理新添加的生产机器，则上述逻辑会静默中断。相反，如果更喜欢防御性地编写代码：

```
if (check-for-running-in-production) {
    ... // run program in production mode
} else if (check-for-running-in-development) {
    ... // run program in development mode
} else {
    print "Error: unknown environment"
    exit
} 
```

# java - 使用 Nimbus，仅当控件具有焦点时才将控件背景颜色设为黄色？

> ID：10787152
> 
> 赞同：4
> 
> 时间：2012-05-28T15:38:07.567
> 
> 标签：java, swing, look-and-feel, nimbus

这似乎应该很简单，但我还没有找到一个“好”的方法来做到这一点......

在使用 Swing Nimbus L&F 时，我想在我的控件（JButtons、JTextField 等）**有焦点时给它们**一个黄色背景色。除了黄色背景颜色，我希望它们保持所有通常的 Nimbus 样式。

当不集中时，我希望它们以正常的 Nimbus 样式绘制。

我发现这样做的唯一方法是为每个控件重写*控件*[Focused].backgroundPainter（这相当于从头开始重写 Nimbus 的大部分内容）。

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T17:26:42.160

[Nimbus Default](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)为 Nimbus 外观和感觉提供简单的矩阵，但需要覆盖所有相关的鼠标和焦点事件，而不覆盖......可能只是，

![在此处输入图像描述](../Images/a11ca2339d08f31c8a1459514385867b.png)![在此处输入图像描述](../Images/6618372d79616d4800ee3d11643d67f5.png)![在此处输入图像描述](../Images/863140930bc8820a00316836761c3b35.png)

从代码

```
import com.sun.java.swing.Painter;
import java.awt.*;
import javax.swing.*;

public class NimbusJPanelBackGround {

    public NimbusJPanelBackGround() {
        JButton btn = new JButton("  Whatever  ");
        JButton btn1 = new JButton("  Whatever  ");
        JPanel p = new JPanel();
        p.add(btn);
        p.add(btn1);
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.add(p, BorderLayout.CENTER);
        f.pack();
        f.setLocation(150, 150);
        f.setVisible(true);
    }

    public static void main(String[] args) {

        try {
            for (UIManager.LookAndFeelInfo laf : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(laf.getName())) {
                    UIManager.setLookAndFeel(laf.getClassName());
                    UIManager.getLookAndFeelDefaults().put("Panel.background", Color.white);
                    UIManager.getLookAndFeelDefaults().put("nimbusFocus", Color.blue);
                    UIManager.getLookAndFeelDefaults().put("Button[Focused+MouseOver].backgroundPainter",
                            new FillPainter(new Color(127, 255, 191)));
                    UIManager.getLookAndFeelDefaults().put("Button[MouseOver].backgroundPainter",
                            new FillPainter(new Color(127, 255, 191)));
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                NimbusJPanelBackGround nimbusJPanelBackGround = new NimbusJPanelBackGround();
            }
        });
    }
}

class FillPainter implements Painter<JComponent> {

    private final Color color;

    public FillPainter1(Color c) {
        color = c;
    }

    @Override
    public void paint(Graphics2D g, JComponent object, int width, int height) {
        g.setColor(color);
        g.fillRect(0, 0, width - 1, height - 1);
    }
} 
```

# r - 循环是在同一向量中的元素之间进行操作的最有效方法吗？

> ID：10787155
> 
> 赞同：0
> 
> 时间：2012-05-28T15:38:11.053
> 
> 标签：r, loops

我知道标题中的措辞很尴尬。但是这里有免费的片段：

假设我有一个向量`x`。假设我想获得`x[i] - x[i-1]`沿向量运行的值列表，即变化率。如果您参考该示例，我希望将 等的值`24.30518 - 24.43082`保存在新向量中。在 R 中循环是最有效的方法吗？

```
 hour   value
1    00 24.43082
2    01 24.30518
3    02 24.18798
4    03 24.07979
5    04 23.99070
6    05 23.91297
7    06 23.84412
8    07 23.83976
9    08 24.37504
10   09 25.24583
11   10 26.22111
12   11 27.14665
13   12 27.85554
14   13 28.34957
15   14 28.53274
16   15 28.39928
17   16 28.03880
18   17 27.51899
19   18 26.91361
20   19 26.16487
21   20 25.52663
22   21 25.10923
23   22 24.79797
24   23 24.58154 
```

有可能做到这一点`lapply`吗？或者任何其他方式，例如使用延迟？或者任何其他简约的方式？

**额外问题：** 我处理的数据是一个循环温度序列，意思是说向量的最后一个元素将跟随向量的第一个元素。在这种情况下，是否可以扩展上述任何方法以获得完整的值集（而不是输出的第一个元素的空值）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:46:24.720

'diff' 给出了滞后的差异，滞后默认为 1（这里需要）。

要获取附加元素，请直接计算它并将其添加到 diff 的结果之前：

```
first <- x$value[1] - x$value[length(x$value)
result <- c(first, diff(x$value)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:42:17.440

避免 R 中的循环 - 它们很慢。为您的特定任务使用`diff`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T18:06:09.297

对你的问题更一般的答案是在你的向量和你的向量的移动副本之间进行数学运算。diff() 函数只是差异的特例，但您可以在两个移位向量上使用任何向量化函数。例如，假设您想要 x 的乘积和 x 中的下一项。

```
n <- length(x)
x[1:(n-1)] * x[2:n] 
```

（您可能希望填充它以匹配原始向量的长度，在这种情况下可能在最后，因为最后一项不能乘以下一项。）

{在一般情况下直接回答您的问题，这是一个差异方程

```
x[2:n] - x[1:(n-1)] 
```

}

# python - 在 Python 中检查两个 json 文件之间差异的最快方法是什么？

> ID：10787156
> 
> 赞同：1
> 
> 时间：2012-05-28T15:38:17.077
> 
> 标签：python

所以，我有一个 JSON 文件，我通过执行以下操作从中获取特定数据：

```
user['screen']['username'],update['timestamp'] 
```

之后，我调用该文件，得到格式相同但包含新数据的 JSON 文件。我想检查我是否有任何新数据。我想做的是将其转储到一个列表中，然后在旧列表和新列表之间进行设置。我在两个地方遇到了问题： 1\. 将数据转储到列表理解中的最快方法是什么？2.这是一个好方法吗（当数据变化最小时，转储大量数据有什么意义？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:43:54.383

我认为您正在寻找的是某种深度比较，对吗？

也许这会为您解决问题：[http](http://code.google.com/p/python-deep/) ://code.google.com/p/python-deep/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:01:38.110

如果您只是 通过比较整个列表来获取 **相同格式的某些****特定数据，那就太奇怪了。**我的意思是，如果您已经知道 dict 的某些部分可能会更改，那么您可以直接获取或比较它们。

 **为什么要比较整个字典？**

# python - Fabric：rsync_project 与 upload_project 的可扩展性

> ID：10787158
> 
> 赞同：4
> 
> 时间：2012-05-28T15:38:22.517
> 
> 标签：python, django, deployment, fabric

我正在编写代码以使用 Fabric 部署到所有 Web 机器，并且想知道[rsync 与上传项目](http://docs.fabfile.org/en/1.4.2/api/contrib/project.html)在**并行化和最短时间**方面是如何工作的。

有没有基准？

我可以并行同步到 100 台机器吗？限制因素是什么？

```
 rsync_project(
        env.root,
        exclude=RSYNC_EXCLUDE,
        delete=True,
        extra_opts=extra_opts,
    ) 
```

同样，upload_project 的限制因素是什么？sftp 的数量限制是多少？

```
@parallel
def testapp():
    with cd('~/projects'):
        upload_project('./receiver', '/home/sysadmin/projects') 
```

从直觉的角度来看，上传项目应该更好，因为 tar 只需要完成一次，然后是 sftp。还是上面显示的示例多次？

Fabric 是否会进行某种节流以确保网络不会阻塞到极限？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:30:52.243

在对 rsync 和 upload_project 进行基准测试之前，您必须知道 rsync 仅传输[**差异数据**](http://en.wikipedia.org/wiki/Rsync#Algorithm)。当您的部署只包含很少的更改时，rsync 将变得比 upload_project 更高效。

**delete=True**表示本地已删除的文件将被远程删除。这可能是你想要的。

如果您坚持，我不得不说基准测试结果将取决于文件编号和它们的大小。例如，如果你有 1K 大小的 1G 文件，rsync 会比 upload_project 慢很多。因为后者总是打包一个 tar/gzip 然后传输这个大文件。

最后，fabric 没有“tar 缓存”，它会在每次部署时重复 tar，因为[代码](https://github.com/fabric/fabric/blob/master/fabric/contrib/project.py)写成：

```
 finally:
        run("rm -f %s" % tar_file)
finally:
    local("rm -rf %s" % tmp_folder) 
```

但是你可以添加一些缓存或者手动注释掉它们。

对于网络问题，fabric 将它们留给具有*拥塞窗口*的 sftp，以确保网络不会阻塞。

# java - Android 调用另一个类的方法

> ID：10787159
> 
> 赞同：24
> 
> 时间：2012-05-28T15:38:27.383
> 
> 标签：java, android, class, android-activity, call

我知道这个问题是重复的，但我在互联网上找不到答案。

我想调用另一个类的方法。

我有 Class1 和 Class2。

在第 2 课中，我有这个方法：

```
public void UpdateEmployee(){
    //some code
} 
```

我想从 Class1 调用上述方法。

感谢您的任何回答。

- - 编辑 - -

```
final Button btnUpdate = (Button)findViewById(R.id.btnUpd);
   btnUpdate.setOnClickListener(new View.OnClickListener() {      
     public void onClick(View v) {
             Employee updEmple = new Employee();
             updEmple.UpdateEmployee();      

    }
    }); 
```

----LogCat---

```
05-28 16:30:44.030: E/AndroidRuntime(25198): FATAL EXCEPTION: main
05-28 16:30:44.030: E/AndroidRuntime(25198): java.lang.NullPointerException: println    needs a message
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.util.Log.println_native(Native Method)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.util.Log.v(Log.java:116)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at   and.net.Employee.UpdateEmployee(Employee.java:77)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at and.net.AndActivity$2.onClick(AndActivity.java:51)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.view.View.performClick(View.java:2485)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.view.View$PerformClick.run(View.java:9080)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.os.Handler.handleCallback(Handler.java:587)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.os.Looper.loop(Looper.java:123)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at android.app.ActivityThread.main(ActivityThread.java:3683)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at java.lang.reflect.Method.invokeNative(Native Method)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at java.lang.reflect.Method.invoke(Method.java:507)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-28 16:30:44.030: E/AndroidRuntime(25198):    at  dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-28T15:42:21.510

您应该使用以下代码：

```
Class2 cls2 = new Class2();
cls2.UpdateEmployee(); 
```

如果您不想创建一个新实例来调用该方法，您可以将该方法标记为`static`，然后您可以调用`Class2.UpdateEmployee()`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T15:40:31.637

在第 1 类中：

```
Class2 inst = new Class2();
inst.UpdateEmployee(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-28T15:42:19.917

而且，如果您不想实例化 Class2，请将 UpdateEmployee 声明为静态并像这样调用它：

```
Class2.UpdateEmployee(); 
```

但是，您通常会按照@parag 所说的去做。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2015-05-18T05:45:33.310

在 MainActivity 中添加它。

```
Intent intent = new Intent(getApplicationContext(), Heightimage.class);
startActivity(intent); 
```

# jquery - jQuery ui 全屏对话框

> ID：10787160
> 
> 赞同：5
> 
> 时间：2012-05-28T15:38:29.850
> 
> 标签：jquery, dialog, fullscreen

我正在尝试使用 jquery ui 制作全屏对话框。

我通过 ajax 加载了一些内容，结果填充了对话框：

```
function openResource(id) {
  $.ajax({
    url      : "",
    type     : 'post',
    dataType : 'html',
    data : {
      idRes: id
    },
    success : function(response) {
      $("#popupRecurso")
        .html("<div style='float:right; cursor: pointer;' onclick='$(\"#popupRecurso\").dialog(\"destroy\");'>fechar</div>" + response);

      $("#popupRecurso").dialog({
        title       : '',
        bgiframe    : true,
        position    : 'center',
        draggable   : false,
        resizable   : false,
        dialogClass : 'dialogRecurso',
        width       : $(window).width(),
        height      : $(window).height(),
        stack       : true,
        zIndex      : 99999,
        autoOpen    : true,
        modal       : true,
        open        : function() {
          $(".ui-dialog-titlebar").hide();
        },
        error : function(err) {
          alert(err);   
        }
      });
    }
  });
} 
```

不幸的是，对话框没有出现在中心并且没有正确的尺寸。有没有人遇到过同样的问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:48:12.403

我想在 jfiddle 中看到这一点，以便更好地了解可能影响这一点的任何变量差异。尝试删除对话框属性的“宽度”和“高度”设置，并将宽度：100％和高度：100％的css属性添加到您为对话框内容调用的容器中。“#popupRecurso”。这样，对话框属性不会覆盖它，并且它会随着任何大小的 DOM 更改事件而改变。我目前在我的公司经常使用模态模型，并且遇到过类似的问题。我喜欢将 CSS 属性设置为宽度：%120、高度：120%。这样，即使用户放大或缩小，您正在寻找的对话功能也能保持真实。希望这会帮助你。快乐编码！

# android - 适用于 Android 的 Aztec 编码器

> ID：10787161
> 
> 赞同：1
> 
> 时间：2012-05-28T15:38:59.903
> 
> 标签：android

我正在寻找可以将字符串转换为 Aztec 条形码图像以在我的应用程序中使用的 Aztec 编码库。

我见过 ZXing [http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)但它只进行解码（将 Aztec 图像转换为其文本表示）。我正在寻找可以将字符串转换为 Aztec 图像的编码器。

任何指针将不胜感激。

谢谢，亚西尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T15:15:43.767

从 2.2 版开始，ZXing 支持 Aztec 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:44:11.637

RACO 提供了一个[基于 Web 的 API](http://www.racoindustries.com/barcodegenerator/2d/aztec-code.aspx)，用于生成 Aztec 和其他条形码。它不是一个库，但可以很容易地从您的应用程序中调用。

# python - 如何在 Python 中处理长 SQL 语句字符串

> ID：10787163
> 
> 赞同：18
> 
> 时间：2012-05-28T15:39:01.807
> 
> 标签：python, sql

我正在尝试使用 python 从 SQL 数据库中获取信息

当 SQL 语句很简单时，我能够连接和检索数据，例如

```
#cursor.execute("SELECT * FROM Client WHERE UsesTimesheet = 1 ORDER BY ClientName") 
```

但是，当我转到更复杂的语句时，我收到如下所示的错误

```
Traceback (most recent call last):
 File "F:\Python\Test - AutoCad.py", line 30, in <module>
where jobnum = 1205992")
File "C:\Python26\ArcGIS10.0\lib\site-packages\pymssql.py", line 196, in execute
raise OperationalError, e[0]
OperationalError: SQL Server message 102, severity 15, state 1, line 1:
Incorrect syntax near 'jobnum'. 
```

此语句在我使用 Microsoft SQL 2008 客户端时有效，但在 python 中无效。

我在做什么不正确？对于复杂的语句，我应该使用 SQLAlchemy 吗？

[http://www.sqlalchemy.org/](http://www.sqlalchemy.org/)

当前代码如下

```
import pymssql
import _mssql
import sys

# Connect to db using Windows Integrated Authentication.
conn = _mssql.connect(server='000.000.0.0', database='Mydb', trusted=True)
conn = pymssql.connect(host='000.000.0.0', database='Mydb', trusted=True)

# prepare a cursor object using cursor() method
cursor = conn.cursor()

cursor.execute("""SELECT PJI.*, PJO.*,
        CST.ABCGS
FROM  dbo.Traverse AS TRE
              LEFT OUTER JOIN dbo.TraversePreEntry AS TPE
                    ON TRE.JobNum = dbo.GetJobNumberFromGroupId(TPE.GroupId)
              LEFT OUTER JOIN AutoCADProjectInformation AS PJI
                    ON TRE.JobNum = PJI.JobNumber
              LEFT OUTER JOIN CalculationStorageReplacement AS CST
                    ON CST.ProjectNumber = dbo.GetJobNumberFromGroupId(TPE.GroupId
              LEFT OUTER JOIN dbo.TraverseElevations AS TEV
                  ON TRE.TraverseId = TEV.TraverseId
              LEFT OUTER JOIN VGSDB.dbo.ProjectOffice AS PJO
                    ON PJI.PjbId = PJO.PjbId
where jobnum = 1205992""")

# Fetch rows
data = cursor.fetchall()

print "Info : %s " % str(data) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-28T15:46:02.170

`where`您的 python 字符串在没有换行符的情况下连接在一起，因此关键字之前没有空格。使用多行字符串文字时，最好使用三引号字符串：

```
cursor.execute("""\
SELECT PJI.*, PJO.*, 
        CST.ABCGS 
FROM  dbo.Traverse AS TRE 
              LEFT OUTER JOIN dbo.TraversePreEntry AS TPE 
                    ON TRE.JobNum = dbo.GetJobNumberFromGroupId(TPE.GroupId)
              LEFT OUTER JOIN AutoCADProjectInformation AS PJI
                    ON TRE.JobNum = PJI.JobNumber
              LEFT OUTER JOIN CalculationStorageReplacement AS CST
                    ON CST.ProjectNumber = dbo.GetJobNumberFromGroupId(TPE.GroupId)
              LEFT OUTER JOIN dbo.TraverseElevations AS TEV
                  ON TRE.TraverseId = TEV.TraverseId
              LEFT OUTER JOIN VGSDB.dbo.ProjectOffice PJO
                    ON PJI.PjbId = PJO.PjbId
where jobnum = 1205992""") 
```

三引号字符串保持换行符：

```
>>> "one\
... two"
"onetwo"
>>> """one
... two"""
"one\ntwo" 
```

如果这是您中的一个，则不一定需要使用 SQLAlchemy，但是随着项目的增长，您会发现该库提供了许多优势，包括使条件逻辑更容易（基于 if/then 分支添加更多 WHERE 子句， ETC）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T15:44:38.877

`where`在关键字之前放置一个空格。Python 在使用 \ 时不添加空格：

```
In [5]: print "a\
   ...: b"
ab 
```

为了补充 Martijn Pieters 的答案，如果您使用三引号字符串，则必须删除`\`，同时使用两者都不会得到换行符：

```
In [6]: """a\
b"""
Out[6]: 'ab' 
```

# java - 内存不足错误的堆转储

> ID：10787164
> 
> 赞同：2
> 
> 时间：2012-05-28T15:39:16.360
> 
> 标签：java, tomcat6

我正在使用 Tomcat 服务器，我想获得内存不足错误的堆转储。如何通过在 Catalina.bat 文件中指定参数来做到这一点？还有一种方法可以指定存储转储文件的路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:50:56.870

根据这个[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html) 你可以使用 option `-XX:HeapDumpPath=./java_pid<pid>.hprof`。

您无需修改​​ calatalina.bat 或其他脚本即可将选项添加到 Tomcat。`CATALINA_OPTS`只需在运行 Tomcat 之前设置系统变量。

# jquery - jQuery 旋转插件 IE7

> ID：10787168
> 
> 赞同：0
> 
> 时间：2012-05-28T15:39:27.917
> 
> 标签：jquery, jquery-plugins, internet-explorer-7

我正在使用 Jquery 插件 Rotate v2.2。[http://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

在 IE7 中，我看到以下错误。

SCRIPT5007：无法获取属性“removeChild”的值：对象为空或未定义

```
_Loader:(function()
    {
        if (IE)
        return function()
        {
            var width=this._img.width;
            var height=this._img.height;
            this._img.parentNode.removeChild(this._img); ***//Error Here***

            this._vimage = this.createVMLNode('image');
            this._vimage.src=this._img.src;
            this._vimage.style.height=height+"px";
            this._vimage.style.width=width+"px";
            this._vimage.style.position="absolute"; // FIXES IE PROBLEM - its only rendered if its on absolute position!
            this._vimage.style.top = "0px";
            this._vimage.style.left = "0px";

            /* Group minifying a small 1px precision problem when rotating object */
            this._container =  this.createVMLNode('group');
            this._container.style.width=width;
            this._container.style.height=height;
            this._container.style.position="absolute";
            this._container.setAttribute('coordsize',width-1+','+(height-1)); // This -1, -1 trying to fix that ugly problem
            this._container.appendChild(this._vimage);

            this._temp.appendChild(this._container);
            this._temp.style.position="relative"; // FIXES IE PROBLEM
            this._temp.style.width=width+"px";
            this._temp.style.height=height+"px";
            this._temp.setAttribute('id',this._parameters.id);
            this._temp.className=this._parameters.className;            

            this._BindEvents(this._temp,this._parameters.bind);
            _finally.call(this);

        }
        else 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:03:32.010

这是插件的记录问题之一。

[http://code.google.com/p/jqueryrotate/issues/detail?id=31&q=remove](http://code.google.com/p/jqueryrotate/issues/detail?id=31&q=remove)

建议的唯一解决方法如下：

尝试更换线〜132

```
 this._img.parentNode.removeChild(this._img);//replace this...

 jQuery(this._img).parent().find(this._img).remove();// with this 
```

# pdf - Mono for Android PDF 阅读器

> ID：10787170
> 
> 赞同：1
> 
> 时间：2012-05-28T15:39:37.577
> 
> 标签：pdf, xamarin.android

我正忙于在使用 Xamarin 的 Mono for Android 构建的 Android 应用程序上查看 PDF 的应用程序。Mono for Android 中是否有“CGPDFDocument”类型的类？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:00:52.647

Android 不像 iOS 那样支持 PDF。

如果您需要在应用程序内查看 PDF，那么有一些可用的开源库 - 请参阅[Android - Load PDF / PDF Viewer](https://stackoverflow.com/questions/4468621/android-load-pdf-pdf-viewer)了解一些可能的 Java 解决方案

或者，如果您的应用程序可以将文件传递给外部应用程序（例如 Adob​​e Reader），那么我过去使用过这个 Intent 代码：

```
 var targetUri = Android.Net.Uri.FromFile(targetPath);

        var intent = new Intent(Intent.ActionView);
        intent.SetDataAndType(targetUri, "application/pdf");

        context.Activity.StartActivity(intent); 
```

其中 targetPath 通常是共享 SD 卡上的路径。

# java - 编译中的 Java 默认修饰符

> ID：10787171
> 
> 赞同：3
> 
> 时间：2012-05-28T15:39:48.757
> 
> 标签：java, javac

我目前正在修改 javac 编译器，以某种方式生成我们自己的编程语言。

我们希望摆脱 Java 的默认访问修饰符，将没有访问修饰符的所有内容都设为公开。

但是到目前为止，我还没有成功地找到在 Java 编译代码中实现它的位置。我可以轻松地添加到声明阶段之一，但这是我们不希望拥有的糟糕解决方案。

对此有何见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:47:36.270

查看[*文件格式*](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html)，尤其是第[*4.5`class`*](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html)*节字段*和第*4.6 节方法*，我看到定义了以下常量：

```
ACC_PUBLIC     0x0001
ACC_PRIVATE    0x0002
ACC_PROTECTED  0x0004 
```

> 但是，类的特定方法（*字段*）最多只能设置其 ACC_PRIVATE、ACC_PROTECTED 和 ACC_PUBLIC 标志之一（JLS [§8.3.1](https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1)）。

由于没有`ACC_DEFAULT`标志并且文档说***最多****一个*（不*完全是一个**）***我猜想根本没有标志意味着默认访问。**

# javascript - 如何在表格行中显示三行，而不是三列

> ID：10787172
> 
> 赞同：0
> 
> 时间：2012-05-28T15:39:49.297
> 
> 标签：javascript, jquery, html

我在[这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)有一个应用程序，您可以查看我遇到的问题的布局。当您打开应用程序时，如果单击“添加问题”按钮，您将看到它显示一个表格行，其中三列显示内容。

第一列显示选项文本框，第二列是数字文本框，第三列是 2 个按钮。问题是它在一行中并排显示三列。

相反，它应该在表格行中显示，三行，而不是三列。

所以目前它为每个表格行显示：

```
Option Textbox | Number Textbox | 2 Buttons 
```

相反，它应该在表格行内：

```
Option Textbox

Number Textbox

2 Buttons 
```

所以就像我说的，我需要一行内的三行，而不是三列。但是我如何使用下面的代码来实现这一点：

```
var $tbody = $('#qandatbl > tbody'); 
            var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
            var $noofanswers = $("<tr><td class='noofanswers'></td></tr>");
            var $options = $("<tr><td class='option'></td></tr>");
            var $answer = $("<tr><td class='answer'></td></tr>");
            var $extratr = $("<tr></tr>");

        /*Below is an example of a function that worked before I included the <tr> tag
 but stopped working after including the <tr> tags */

      $('.numberAnswerTxt', context).each(function() {
            var $this = $(this);
            var $noofanswersText = '';

            if ($questionType == 'True or False' || $questionType == 'Yes or No'){

        $noofanswersText = $("<span class='naRow string' style='display: block;'>Only 1 Answer</span><input type='text' class='numberAnswerTxtRow answertxt' style='display: none;' onkeyup='numberKeyUp(this)' onkeypress='return isNumberKey(event)' onChange='getButtons()'>").attr('name', $this.attr('name')).attr('value', $this.val());

        }else{

        $noofanswersText = $("<span class='naRow string' style='display: none;'>Only 1 Answer</span><input type='text' class='numberAnswerTxtRow answertxt' style='display: block;' onkeyup='numberKeyUp(this)' onkeypress='return isNumberKey(event)' onChange='getButtons()'>").attr('name', $this.attr('name')).attr('value', $this.val());  

        }

            $noofanswers.append($noofanswersText);

            }); 

            $tr.append($extratr);
            $extratr.append($options);
            $extratr.append($noofanswers);
            $extratr.append($answer);
            $tbody.append($tr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:53:08.880

为什么不在单元格中放置一个表格并给它三行，或者尝试将 rowspan 属性与其他单元格一起使用，以便跨越 3 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:45:39.300

表格行由开始和结束表示，`tr`因此您需要进行此更改：

```
var $noofanswers = $("<tr><td class='noofanswers'></td></tr>");
var $options = $("<tr><td class='option'></td></tr>");
var $answer = $("<tr><td class='answer'></td></tr>"); 
```

每个都将在您的表中创建一行。

# java - 未定义的 getTabHost() 方法

> ID：10787182
> 
> 赞同：0
> 
> 时间：2012-05-28T15:40:49.573
> 
> 标签：java, android

我正在android中制作标签。我正在使用 TabHost 来实现这一点。我`getTabHost()`在这条线上的方法下得到红线`TabHost tabHost = getTabHost();`。我不确定我为什么会得到这个。我怎样才能使这个例子工作？

这是我的完整代码

```
public class TabActivity extends Activity {
//TabHost mTabHost;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    //Artist Tab
    intent = new Intent(this, Artist.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

  //Songs
    intent = new Intent(this, Songs.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

  //Albums
    intent = new Intent(this, Album.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(1);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:02:10.353

您需要扩展 MyTabActivity 而不是简单的活动尝试

```
public class MyTabActivity extends TabActivity 
```

而不是

```
public class MyTabActivity extends Activity 
```

# c++ - 如何包含 在 Linux 上的 C++ 中？

> ID：10787183
> 
> 赞同：2
> 
> 时间：2012-05-28T15:40:53.617
> 
> 标签：c++, linux, gcc, pthreads, atomic

我正在尝试在我的 C++ pthread 程序中包含原子。

```
#include <atomic> 
```

但是，我得到了错误：

错误：原子：没有这样的文件或目录

我试过 ：

```
 #include <asm/atomic>
 #include <atomic.h>
 #include <linux/atomic>
 #include <util/atomic>
 #include <stdcatomic>
 #include <catomic> 
```

没有人工作。

我的 gcc 是 gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-52)

帖子：

[#include <cstdatomic> 在ubuntu中“没有这样的文件”](https://stackoverflow.com/questions/7697588/include-cstdatomic-no-such-file-in-ubuntu)

[g++ 4.4.3 中的 std::atomic 支持](https://stackoverflow.com/questions/4620559/stdatomic-support-in-g-4-4-3)

也不行。

```
And #include <thread> also got : No such file or directory 
```

任何帮助将不胜感激。

谢谢 ！

更新，

我正在尝试在 Linux 上安装 GCC 4.7，但在“make check”中，出现错误，

```
 autogen -T /remote/mypath/gcc_4_7_2012_5_28/gcc_4_7_new_2012_5_29/trunk/fixincludes/check.tpl , remote/mypath/gcc_4_7_2012_5_28/gcc_4_7_new_2012_5_29/trunk/fixincludes/inclhack.def ,

   make[2]: execvp: autogen: Permission denied, then I tried to install autogen, but 
   got: I need to install guile-devel, then when I installed guile-2.0.5-2.1.src.rpm , 

   I got  rpm -ivh guile-2.0.5-2.1.src.rpm, warning: guile-2.0.5-2.1.src.rpm: Header V3 
   RSA/SHA256 signature: NOKEY, key ID 3dbdc284

   error: cannot write to %sourcedir /usr/src/redhat/SOURCES, I cannot get root 
   authorization. 
```

任何帮助将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:43:14.740

您的帖子有点令人困惑，因为您链接到的帖子说 GCC 4.4 is required for `atomic`，但您希望它可以在 4.1.x 上运行。

您需要至少升级到 GCC 4.4 以获得`atomic`支持。在 GCC 4.1 中无法启用对 atomic 的支持，尽管您可以使用它[`boost::atomic`](http://www.chaoticmind.net/~hcb/projects/boost.atomic/doc/index.html)。为了将来参考，[此图表](http://gcc.gnu.org/projects/cxx0x.html)显示了哪个版本的 GCC 支持哪些 C++11 功能。

如果由于某种原因您无法升级 GCC，您也可以尝试完全使用不同的编译器（例如 clang）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:43:37.210

[该表](http://gcc.gnu.org/projects/cxx0x.html)跟踪 gcc 实现状态。您的编译器版本还不支持原子。

在任何情况下，您都需要使用`std=c++11`（或`c++0x`在旧版本中）开关来启用 C++11 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T12:45:48.823

实际上 gcc 4.4 无法为我编译包含`#include <atomic>`. 这发生在编译别人的代码（[fasttext](https://github.com/salestock/fastText.py/blob/master/fasttext/cpp/src/fasttext.h)）时，所以我宁愿避免将代码更改为`#include <cstdatomic>`.

我升级到 gcc 4.8 并且它工作。

如果您使用的是 CentOS 6.8，[这里是如何升级 gcc](https://superuser.com/questions/381160/how-to-install-gcc-4-7-x-4-8-x-on-centos)。

# matlab - 没有工具箱的 Matlab 曲线拟合

> ID：10787192
> 
> 赞同：0
> 
> 时间：2012-05-28T15:41:28.807
> 
> 标签：matlab, curve-fitting

我正在尝试找到如下所述的拟合曲线。MATLAB[`polyfit`](http://www.mathworks.com/help/techdoc/ref/polyfit.html)在我的情况下不起作用。
已知参数：`x`和`y`，以及拟合曲线`y_fit = a * (x_fit) .^ n`
（这里，n 可能不是整数）。
我需要找到`a`和`n`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:55:51.813

Take the logarithm of both sides and use `polyfit` or just a plain `x = A\b` approach.

y_fit = a*(x_fit).^n

log(y_fit) = log(a) + n*log(x_fit)

If `x_fit` and `y_fit` are column vectors of data:

```
A = [ones(length(x_fit), 1), log(x_fit)];
b = log(y_fit);
x = A\b;
n = x(2)
a = exp(x(1)) 
```

# sql - SQL 为什么这个连接不起作用？

> ID：10787203
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:42:17.747
> 
> 标签：sql, sql-server

我有以下 SQL：

```
SELECT tab4.IRSpot as IRSpot, tab4.IRVol AS MaxPlauShift, tab4.VegElement AS MaxPlauLoss FROM
    (SELECT tab1.IRSpot, MIN(tab1.VegaElement*Probability) AS PlausibleLoss FROM
        (SELECT IRSpot, IRVol, VegaElement 
        FROM SEL_VegaElementMatrix()) tab1
    JOIN
        (SELECT IRSpot, IRVol, Probability 
        FROM Table_Name_2) tab2
    ON tab1.IRSpot = tab2.IRSpot AND tab1.IRVol = tab2.IRVol
    GROUP BY tab1.IRSpot) tab3
JOIN
    (SELECT IRSpot, IRVol, VegaElement 
    FROM SEL_VegaElementMatrix()) tab4
ON tab3.PlausibleLoss = tab4.VegaElement AND tab3.IRSpot = tab4.IRSpot 
```

tab3 返回一行 {2,0}，而 tab4 返回许多行，其中八行包含相同的值 {2,0}。

我期待我的加入返回八行结果，因为我正在执行 JOIN 但我只返回一个结果行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:49:30.153

将其更改为 RIGHT JOIN 以找出不匹配的内容。INNER JOIN 将仅显示在两个表中都找到匹配项的行。我怀疑这是最后一个 where/on 子句中的东西，但是如果没有看到表结构和数据，很难说。

```
SELECT tab4.IRSpot as IRSpot, tab4.IRVol AS MaxPlauShift, tab4.VegElement AS MaxPlauLoss FROM 
    (SELECT tab1.IRSpot, MIN(tab1.VegaElement*Probability) AS PlausibleLoss FROM 
        (SELECT IRSpot, IRVol, VegaElement  
        FROM SEL_VegaElementMatrix()) tab1 
    JOIN 
        (SELECT IRSpot, IRVol, Probability  
        FROM Table_Name_2) tab2 
    ON tab1.IRSpot = tab2.IRSpot AND tab1.IRVol = tab2.IRVol 
    GROUP BY tab1.IRSpot) tab3 
RIGHT JOIN 
    (SELECT IRSpot, IRVol, VegaElement  
    FROM SEL_VegaElementMatrix()) tab4 
ON tab3.PlausibleLoss = tab4.VegaElement AND tab3.IRSpot = tab4.IRSpot 
```

# html - 帖子页脚仅在悬停后可见？

> ID：10787208
> 
> 赞同：0
> 
> 时间：2012-05-28T15:42:30.800
> 
> 标签：html, css

我需要仅在悬停 .post *div*时才可以看到*后置页脚*。我怎样才能做到这一点？后页脚*div*仅包含链接（标签）。

 **```
<div class="post"> 
  <!-- other divs --> 
  <div class="post-footer"><!-- footer content here -->
  </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:59:16.587

具有如下结构：

```
<div class="post">
    <!-- other divs -->
    <div class="post-footer"><!-- footer content here --></div>
</div> 
```

你需要使用类似的东西：

```
.post-footer { display:none; }

.post:hover .post-footer { display: block; } 
```

* * *

或者，如果你想让它看起来平滑，你可以使用转换`max-height`：

```
.post-footer { max-height: 0; transition: max-height 1s linear; }

.post:hover .post-footer { max-height: 300px; /* some value that will always be larger than the height of your footer */ } 
```

注意：[转换的浏览器兼容性表](http://caniuse.com/#feat=css-transitions)

两种方法的演示：http: [//dabblet.com/gist/2819975](http://dabblet.com/gist/2819975)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:00:01.030

下载 jquery 并将其包含到您的 html 中；

```
$(document).ready(function(){
    $('.post').hover(function(){
        $(this).find('.post-footer').toggle(true);
    },function(){
        $(this).find('.post-footer').toggle(false);
    });
}); 
```

在 javascript 文件中尝试上述操作**

# vim - 用于在行首自动插入“>”的 Vim 选项

> ID：10787209
> 
> 赞同：8
> 
> 时间：2012-05-28T15:42:37.040
> 
> 标签：vim

假设我有一个`test.c`包含以下内容的文件：

```
// line 1
// line 2 
```

如果我在 Vim 中打开这个文件并在正常模式下导航到第一行，然后键入`o`，我会得到以下信息：

```
// line 1
// 
// line 2 
```

现在假设我有一个文件`test.lhs`（识字 Haskell）包含

```
> data X = A | B
> data Y = C | D 
```

如果我打开这个文件并在正常模式下导航到第一行，然后输入`o`，我得到

```
> data X = A | B

> data Y = C | D 
```

**问题：**如何让 Vim`>`在`.lhs`文件的行首自动插入，类似于如何`//`自动插入`.c`文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T15:52:43.603

Got it! To `.vimrc`, add

```
set formatoptions+=o 
```

This automatically inserts the "comment leader" (character sequence indicating a comment, or, in the case of literate Haskell, the Haskell code) at the start of the line.

For more information on the options accepted by `formatoptions`, type `:help fo-table`.

# javascript - Javascript中有没有办法对浏览器重排进行计时？

> ID：10787210
> 
> 赞同：13
> 
> 时间：2012-05-28T15:42:44.317
> 
> 标签：javascript, performance, dom, webkit, reflow

我需要能够对基于 webkit 的浏览器的特定构建进行基准测试，并测量执行某些操作（如 DOM 操作、内存限制等）所需的时间长度。

我在下面有一个测试，它记录了同时加载 10 个相当重的 PNG 图形所需的时间长度。在代码中，我需要能够计算加载完成所需的时间。我尝试在动态 Image 对象上设置 onLoad 函数以产生以毫秒为单位的时间。但是，如下面的上限所示，它给出的读数不准确，因为它给出的读数很小，因为它只记录负载的数据传输部分，然后当图像是可见的 -**蓝色循环，这是浏览器回流循环**。

webkit 中是否有一些事件可以用来记录浏览器何时完成重排，以便我可以对此进行基准测试？我必须能够*在代码*中以毫秒为单位记录时间，因为我正在测试的 webkit 构建没有开发人员工具。我可以观察到 Chrome 中的差异，但是两个版本之间的性能差异很大，我需要能够准确地量化它以进行比较。

![图像基准](../Images/a3f422ee40fc4a37f24b0ed5270d8948.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:01:02.193

如果您使用的是 jQuery，您可以尝试记录[document ready](http://api.jquery.com/ready/)和[window load](http://api.jquery.com/load-event/)之间的时间，这会给您一个近似值。

```
(function(){
    var start, end;

    $(document).ready(function(){
         start = new Date()    
    });
    $(window).load(function(){
         end = new Date();
         console.log(end.getTime() - start.getTime());
    });

}()); 
```

编辑：

你看过[Browserscope 回流计时器](http://www.browserscope.org/reflow/about)吗？基本上，它会检查浏览器在更改 dom 后将控制权返回给 JavaScript 引擎需要多长时间。根据页面，它应该可以在任何浏览器中使用，尽管我没有亲自测试过。也许您可以调整在测试期间运行的代码以计时页面中的重排。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:57:27.323

此外，您可能想看看 CSS 压力测试。小书签非常适合页面性能测试。[http://andy.edinborough.org/CSS-Stress-Testing-and-Performance-Profiling](http://andy.edinborough.org/CSS-Stress-Testing-and-Performance-Profiling)

如何将 PNG 设置为 div`background-image`并运行压力测试，它应该使用时间多次启用/禁用图像。

# php - 通过 ISBN 在 Google 图书中获取数量

> ID：10787211
> 
> 赞同：0
> 
> 时间：2012-05-28T15:42:51.230
> 
> 标签：php, api, google-books

最近谷歌几乎改变了他们所有的 API，现在我不能再实现了。

如何通过 ISBN 获取图书数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:10:09.637

此请求使用单个必需参数“q”请求 Google Books API，它将搜索包含此文本字符串的卷。但是，您可以在搜索词中指定特殊关键字以在特定字段中进行搜索。

您要查找的是`isbn:`返回此关键字后面的文本是 ISBN 号的结果。例如，`isbn:0521609283`.

您可以通过向以下 URI 发送 HTTP GET 请求来执行批量搜索：

[https://www.googleapis.com/books/v1/volumes?q=isbn:0521609283](https://www.googleapis.com/books/v1/volumes?q=isbn:0521609283)

* * *

[[+] 有关如何通过 Google Books API 执行搜索的更多信息](https://developers.google.com/books/docs/v1/using#WorkingVolumes)

# c# - 通过 TCP 托管 WCF 服务 | 构建项目

> ID：10787213
> 
> 赞同：0
> 
> 时间：2012-05-28T15:43:10.267
> 
> 标签：c#, wcf

我正在尝试以下列方式开发 WCF 服务：

*   一个类库项目，它将包含所有合同及其实现，称为 WcfContracts。

*   一个 WCF 服务库项目，它将具有配置部分，即它只有 app.config。该项目将引用具有合同及其实现的类库。即 WcfContracts。该项目称为 WcfServiceHosting。

*   可以托管 WCF 服务的 Windows 服务。该服务将具有与 WCF 服务相同的 app.config，并且仅用于托管 WCF 服务。我在服务项目中创建了一个新的 app.config，并将 app.config 的内容从 WCF 服务库复制到它。

*   一个 WPF 客户端应用程序，旨在与 Windows 服务中托管的服务进行通信。我正在将 ServiceReference 添加到 WCF 合同中。

*   所有项目都在同一个解决方案中。

但是，在执行上述操作时，我无法在客户端项目中添加服务引用。如果我将合同和实现保留在同一个 WCF 服务库中，一切正常。

以下是我的 WCF 服务库的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>

  <system.serviceModel>
    <services>
      <service behaviorConfiguration="WcfServiceHosting.Service1Behavior"
        name="WcfServiceHosting.CalculatorService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="**WcfServiceHosting.ICalculatorService**">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/CalculatorService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfServiceHosting.Service1Behavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

现在上面的工作很好，因为 IcalculatorService 和 CalculatorService 驻留在同一个程序集中，即 WcfServiceHosting。

现在，如果我从 WcfServiceHosting 中删除 ICalculatService 和 CalculatorService 并将其添加到 WcfContracts，我将无法添加服务引用。发现时它不会显示在参考对话框中。

以下是我修改后的合同：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>

  <system.serviceModel>
    <services>
      <service behaviorConfiguration="WcfServiceHosting.Service1Behavior"
        name="**WcfContracts.CalculatorService**">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
          contract="WcfContracts.ICalculatorService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
          contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8523/CalculatorService" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="WcfServiceHosting.Service1Behavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

上面的不行，能告诉我为什么吗？我已经添加了必要的参考和所有。

谢谢， - 迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:34:59.670

添加服务参考将无法查看任何未托管的合同。您需要在托管 WCF 服务的项目中引用合同（或将合同包含在其中）。

例如，如果没有主机来包含配置，添加引用如何知道应该如何托管您的 CalculatorServce（TCP、HTTP、NamedPipes、MSMQ）？

# php - PHP fread 读取字符串'0'

> ID：10787220
> 
> 赞同：0
> 
> 时间：2012-05-28T15:43:28.457
> 
> 标签：php, fread

你好，我使用 fread 来从 url 中获取整数：

```
$f = fopen("http://sometextfilecontaininganinteger.txt", "r");
$incoming = fread($f, 16);
fclose($f);
if ($incoming)
{ 
```

if 检查是否存在以查看 http 调用是否成功。不幸的是，当文本文件包含字符串“0”时，这也会失败。我该如何解决这个问题？

[http://php.net/manual/en/function.fread.php](http://php.net/manual/en/function.fread.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:46:08.963

检查是否“[不相同](http://php.net/manual/en/language.operators.comparison.php)”

```
if ($incoming !== false) {
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:46:43.093

代替

```
if ($incoming)
{ 
```

你必须使用

```
if ($incoming !== FALSE)
{ 
```

因为 '0' 在不比较类型时等于 FALSE。

# java - Grails渲染插件css问题

> ID：10787221
> 
> 赞同：3
> 
> 时间：2012-05-28T15:43:28.610
> 
> 标签：java, grails, pdf-generation, rendering

我刚刚安装了 grails 渲染插件，想用它来生成 PDF 文件。我创建了简单的模板，但它在没有任何 CSS 样式的情况下导出。如果我只是从 grails 渲染模板，那么页面会在我的 Web 浏览器中显示所有样式。

所以，我的问题是 - 如何在 PDF 生成过程中正确包含 CSS 文件？

我的模板：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <link rel="stylesheet" href="${resource(dir:'css',file:'main.css')}" />
    <link rel="stylesheet" href="${resource(dir:'css',file:'webui.css')}" />
    <r:layoutResources/>
    <title>Report</title>
</head>
<body>
    <div id="content">
        <div id="center-container">
        <h1><g:message code="default.list.label" args="[entityName]" /></h1>
        <table>
            <thead>
                <tr>
                    <th class="trip">trip</th>
                </tr>
            </thead>
            <tbody>
                <tr class="odd">
                    <td>
                        ${tip}
                    </td>
                </tr>
            </tbody>
        </table>
</div>
    </div>
</body>
</html> 
```

我的 webui.css 中有样式 .odd，但它没有应用于行。

任何帮助，将不胜感激。

Edit1：如果我按以下方式进行操作，我发现样式已被获取：

```
<link rel="stylesheet" href="my_appname${resource(dir:'css',file:'main.css')}" /> 
```

但我不想硬编码应用程序名称（这也是基本上下文路径）。有没有更好的方法来生成指向 css 文件的正确链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T02:16:44.967

我的回答可能已经晚了，但我想在这里分享我在 grails 中渲染 pdf 的经验。我按照以下步骤操作并故障转移到下一个，直到我得到一个 pdf：

1.  使用模板 gsp 中的资源插件来获取捆绑了 css 的模块。

例如：Test.gsp

```
<html>
<head>
  <r:require modules="bootstapApp"/>
  <r:layoutResources/>
</head>
<body>
   ....
   <r:layoutResources/>
</body>
</html> 
```

以上工作正常，但渲染后未在 pdf 中使用样式。我不得不跌倒到第 2 步。

2.开始使用问题陈述中提到的标签。结果：没有变化。我无法获得 pdf 中的样式。失败转移到第 3 步

3.在模板gsp中添加了内联样式。然后我能够将它们应用于pdf。这里要注意的是，如果您按照第 3 步进行操作，并且您有像 bootstrap.css 这样的 css，那么在模板中内联它们会很麻烦。即使我们添加它们，也不要忘记将它们放在媒体标签中。对我来说，以下工作非常好：

```
<style type="text/css">
@media all {
    //CSS styles goes here
}
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:52:44.873

尝试`grails.serverURL`在 Config.groovy 中设置应用程序 url（例如 grails.serverURL=http://localhost:8080/appname）。该插件通过此设置解析所有相关链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T15:43:42.173

我在其他地方分享了我的答案，但我最终只是将外部文件内容嵌入到 gsp 中以进行 pdf 渲染：

[https://stackoverflow.com/a/32767378/1599616](https://stackoverflow.com/a/32767378/1599616)

# ios - 如何将 iBook 集成到我的应用程序中？

> ID：10787225
> 
> 赞同：2
> 
> 时间：2012-05-28T15:43:40.807
> 
> 标签：ios, ibooks

据我所知，iBooks 很像交互式 PDF。它们以什么语言保存，如果我想在我的应用程序中显示或使用 iBook（它是用 Objective-C 编写的），什么是一个好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:54:03.710

Here's a good guide that breaks down the basics of the iBooks concept and how they work and can be produced:

[http://mattgemmell.com/2012/01/19/ibooks-author-for-authors/](http://mattgemmell.com/2012/01/19/ibooks-author-for-authors/)

As for the points you have raised:

*   What language?

Well, the iBooks format is a zip-like archive of assets. There's no language there per se, but the iBooks Author Mac app assembles your project and associated files into the required format.

*   Display an iBook in an iOS app

Not possible. You can display normal documents that iOS supports like PowerPoint, Word, PDFs etc through a `QLPreviewController` or `UIDocumentInteractionController` for example.

I'd definitely recommend downloading the free `iBooks Author` Mac app from the Mac App Store, linked below:

[http://itunes.apple.com/gb/app/ibooks-author/id490152466?mt=12](http://itunes.apple.com/gb/app/ibooks-author/id490152466?mt=12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:50:05.107

iBooks 是使用[iBooks Author](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CHEQFjAA&url=http://www.apple.com/ibooks-author/&ei=mJ7DT6SSDsKO6gH3hZ3TCg&usg=AFQjCNHMCBMuFJ3esY_bXR2PfoFLBIhybw&sig2=tJyIwjlvohPlX4Nt2IVLZw)开发的，而不是 Xcode。此外，iBooks 可与适用于较新版本 iOS的[iBooks 应用程序一起使用。](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGEQFjAA&url=http://itunes.apple.com/us/app/ibooks/id364709193?mt=8&ei=Cp_DT8z9OPCK6QG53dShCg&usg=AFQjCNGhCD5RdwV_Uk1gwETRN9AoCJZJNQ&sig2=zJFBozneVeHXjW9c1-Qi6Q)它们不适合在 iOS 应用程序中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:51:02.773

对于新的 iBooks 2.0，您可以只使用[iBooks Author 应用程序](http://itunes.apple.com/us/app/ibooks-author/id490152466?ls=1&mt=12)。

# javascript - jQuery load() 方法参数用法？

> ID：10787232
> 
> 赞同：2
> 
> 时间：2012-05-28T15:43:59.173
> 
> 标签：javascript, jquery

根据jQuery load() 方法api：

```
.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 
```

1.  第一个参数是网址
2.  第二个参数是发送到服务器的地图或字符串
3.  第三个参数是回调函数。

使用下面的工作示例

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

它提供“url”和“回调函数”的参数，[data] 参数被跳过。

**示例代码不应该将回调函数视为 [data] 参数（第二个参数）吗？由于 API 中定义的参数的顺序。按照API，第一个是url，第二个是数据，第三个是回调。**

我不明白为什么代码会起作用。很迷茫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:48:47.127

它在 jQuery 源代码中写得很清楚。

[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js)

搜索`load: function( url, params, callback )`

它检查参数（第二个参数），如果它存在，它将调用`isFunction`内部检查参数类型的方法，如果它是一个函数，则返回 true。剩下的你懂的......

![在此处输入图像描述](../Images/f160ec2d45ecd923ee35f2cc04b4a8e8.png)

这是`isFunction`看起来的样子

![在此处输入图像描述](../Images/beead0e83bb2c454a58923d98e38848f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:46:18.453

不，它检查参数的数据类型。如果它找到一个函数作为第二个参数，那么它将它用作回调。

参数的位置和顺序已经考虑到典型的用例，而不是必须给出一个空值来跳过参数 .load('url', null, null, function() {}) ; 您只是想像跳过时参数“移位”的位置。

这适用于很多功能，而不仅仅是 .load。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:46:19.790

文档中参数周围的方括号 ( `[]`) 表示它是可选的。因此，根据所述文档，您的示例完全有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T15:50:34.437

在 Github 中查看 jquery 的源文件 ajax.js：[https ://github.com/jquery/jquery/blob/master/src/ajax.js#L178](https://github.com/jquery/jquery/blob/master/src/ajax.js#L178)

在这里它检查第二个参数是否是函数。如果是，则将其作为回调并将参数作为`undefined`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:51:53.327

规范中的括号表示参数是可选的，因此您可以使用以下任何形式：

```
.load(url, data, complete)
.load(url, data)
.load(url, complete)
.load(url) 
```

该方法将根据数据类型确定第二个参数是回调函数还是数据对象/字符串。

# javascript - 使用 d3.js 的捆绑布局和给定的 json 文件结构

> ID：10787236
> 
> 赞同：5
> 
> 时间：2012-05-28T15:44:40.933
> 
> 标签：javascript, json, svg, d3.js, bundle-layout

我有一个包含如下元素的 json 文件：

```
[{
    "name": "Manuel Jose",
    "ttags": ["vivant", "designer", "artista", "empreendedor"]
}] 
```

我正在尝试使用此结构获取节点和边以完成如下图：

![在此处输入图像描述](../Images/a2296c8c7d2723fee4c1aa8b08586b10.png)

（图表取自[d3.js 文档](https://github.com/mbostock/d3/wiki/Bundle-Layout)）

`name`和在我的 json 文件中都`ttags`引用节点，`ttags`实际上是节点和另一个节点之间的链接。

但是，我无法理解如何使用这个库 d3 及以上的 json 文件来创建这个图表。

```
 d3.json("/data/tedxufrj.json", function(classes) {
      var nodes = cluster.nodes(package.root(classes)),
          links = package.imports(nodes);

      vis.selectAll("path.link")
          .data(splines = bundle(links))
        .enter().append("path")
          .attr("class", "link")
          .attr("d", line);

      vis.selectAll("g.node")
          .data(nodes.filter(function(n) { return !n.children; }))
        .enter().append("g")
          .attr("class", "node")
          .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })
        .append("text")
          .attr("dx", function(d) { return d.x < 180 ? 8 : -8; })
          .attr("dy", ".31em")
          .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
          .attr("transform", function(d) { return d.x < 180 ? null : "rotate(180)"; })
          .text(function(d) { return d.key; });
    }); 
```

这是文件 package.js：

```
 (function() {
              packages = {

                // Lazily construct the package hierarchy from class names.
                root: function(classes) {
                  var map = {};

                  function find(name, data) {
                    var node = map[name], i;  
                    if (!node) {
                      node = map[name] = data || {name: name, children: []};
                      if (name.length) {
                        node.parent = find(name.substring(0, i = name.lastIndexOf(".")));
                        node.parent.children.push(node);
                        node.key = name.substring(i + 1);
                      }
                    }
                    return node;
                  }

                  classes.forEach(function(d) {
                    find(d.name, d);
                  });

                  return map[""];
                },

                // Return a list of imports for the given array of nodes.
                imports: function(nodes) {
                  var map = {},
                      imports = [];

                  // Compute a map from name to node.
                  nodes.forEach(function(d) {
                    map[d.name] = d;
                  });

                  // For each import, construct a link from the source to target node.
                  nodes.forEach(function(d) {
                    if (d.imports) d.imports.forEach(function(i) {
                      imports.push({source: map[d.name], target: map[i]});
                    });
                  });

                  return imports;
                }

              };
            })(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-17T06:20:06.240

@wceo，实际上不需要root。它是可选的，用于创建视觉分隔。

@VividD，您需要做的是为“vivant”、“designer”、“artista”、“empreendor”创建节点，链接回它们自己。

我知道这很奇怪，但这就是所需要的。

所以你的 json 应该是这样的：

```
[
  {"name": "Manuel Jose", "ttags": ["vivant", "designer", "artista", "empreendedor"]},
  {"name": "vivant", "ttags": ["vivant"]},
  {"name": "designer", "ttags": ["designer"]},
  {"name": "artista", "ttags": ["artista"]},
  {"name": "empreendedor", "ttags": ["empreendedor"]}
] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T11:00:02.070

看看这个：[http ://testprogramming.googlecode.com/svn-history/r391/trunk/javascript/svg/d3/test/flare-imports.json](http://testprogramming.googlecode.com/svn-history/r391/trunk/javascript/svg/d3/test/flare-imports.json)

此示例显示了捆绑布局所需的数据结构。最初，数据结构是分层的，就像该图中的可视化一样：http: [//mbostock.github.com/d3/ex/cluster.html](http://mbostock.github.com/d3/ex/cluster.html)

我会在你的位置做的是添加虚构的根来创建层次结构，如下所示：

```
[
{"name": "root.Manuel_Jose", "imports": ["root.vivant", "root.designer", "root.artista", "root.empreendedor"]},
{"name": "root.vivant", "imports": []},
{"name": "root.designer", "imports": []},
{"name": "root.artista", "imports": []},
{"name": "root.empreendedor", "imports": []}
] 
```

# php - 请解释 PHP $_GET 请求

> ID：10787262
> 
> 赞同：0
> 
> 时间：2012-05-28T15:46:29.667
> 
> 标签：php, get

我从来不明白这一点，在我自己的项目中，我从来不需要它。但我一直在为 WordPress 做一些贡献，他们大量使用它。

不知何故，他们能够通过 URL 中的某种 GET 变量将用户重定向到不同的页面（我理解这是使用 GET 而不是 POST 的优势）。他们怎么做到的？像制作标题一样简单`header('site.com/page.php?foo=true');`吗？这没有用，因为您必须对所有内容进行硬编码（除非您想基于其他变量创建一个字符串，这有点烦人，甚至仍然如此）。我以为会有一个内置函数，比如`send_get('page.php', $foo);`.

我了解如何使用 using 来使用信息`$foo = $_GET['foo'];`，但我不知道如何使用 PHP 发送它。

解释将不胜感激 - 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:03:01.060

没有完全“习惯”的使用方式。它是九个超全球之一。您使用它们的方式由您自行决定。正如 Greg P 已经提到的，它们是通过 URL 传递的。

> 我知道如何设置一个以这种方式发送变量的 HTML 表单，但是我怎样才能用 PHP 做同样的事情呢？

如果您正在谈论仅使用 PHP 发送 GET 变量，答案是否定的。您甚至不需要 PHP 来发送 GET 变量。就像添加一个问号后跟一个变量名 = 一样简单。使用与号 (&) 分隔其中的几个

设置 GET 变量就像创建锚链接一样简单。 `<a href='somepage.php?getVar1=foo&anotherVariable=2&thirdVar=3`

您可以使用 PHP 在其中动态放置某些信息，而不是手动编写它，这是该语言开始的全部目的。它是一个预处理器

所以，这样的事情应该让你开始

```
<?php
$someID = // An id pulled from a mysql_query
echo "<a href='somepage.php?someID=" . $someID . "'>GET LINK</a>"; 
```

> 我以为会有一个像 send_get('page.php', $foo); 这样的内置函数。

同样，PHP 是一个预处理器。它不发送信息，它只输出它。你在说的是Javascript ..此外，AJAX。AJAX 是唯一允许您在“幕后”发送 GET 变量的方法。而且，就像在另一篇文章中提到的那样，jQuery 有一个很棒的代码库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:53:14.893

我认为您错过了树木的森林... $_GET/$_POST 只是传递给处理它们的页面的变量-它们的完成方式以及完成方式取决于应用。例如，Joomla 总是将 component_id 和 item_id 放在 $_GET 数组中，并且在设计时就考虑到了这一点，因此期望它们在那里，并构造页面，或重定向，或考虑到这一点。

在您的示例中， send_get() 函数*可能*是一个好主意（我没有设计它），但出于某种原因，架构师并不这么认为。Joomla 恰好有一个重定向功能，它确实对 $_GET 中传递的内容有一定的依赖性，但这只是应用程序作者的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:54:08.677

也许重定向`URL`被保存在一些`session`变量中。正确`$_GET`的变量，为 wordpress 指明：“检查重定向 URL 的会话变量”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:03:32.477

[PHP.net](http://php.net/manual/en/reserved.variables.get.php)说：

> 通过 URL 参数传递给当前脚本的变量关联数组。

URL 参数：通常是通过 URL 传递给脚本的变量，例如在您的示例`site.com/page.php?foo=true`中。之后的所有内容都`?`被视为参数。

引用自[StackOverflow 问题：](https://stackoverflow.com/questions/504947/when-should-i-use-get-or-post-method-whats-the-difference-between-them)

> HTTP 协议将 GET 类型的请求定义为幂等，而 POST 可能有副作用。在痛苦的英语中，这意味着 GET 用于查看某些内容，而不更改它，而 POST 用于更改某些内容。例如，搜索页面应使用 GET，而更改密码的表单应使用 POST。

# java - SwingWorker 的替代方案或在这种情况下如何实现它......？

> ID：10787263
> 
> 赞同：1
> 
> 时间：2012-05-28T15:46:34.803
> 
> 标签：java, swing, user-interface, swingworker

我有数百个不同的函数在 EDT 中运行。其中很多包括长时间运行的任务，有些包括对 GUI 的更改。GUI 偶尔会为用户挂起，但由于 GUI 挂起并非 100% 的时间都发生在同一区域，因此很难跟踪发生这种情况的所有位置。这个问题不是高优先级，因为挂起通常在窗口最小化/最大化后开始工作，但最终需要完成。

[经过一些研究，我发现我可以在SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)下使用 doInBackground()来处理任何需要劳动密集型工作的方法，并使用 done() 来绘制 GUI。此外，我相信我可以对碰巧在 doInBackground() 函数中的每个 GUI 绘图使用[SwingUtilities.invokeLater 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)但是，我想避免调整代码中数百个函数中的每一个。

有没有办法可以使用单个 SwingWorker 并将任何长时间运行的方法发送到 doInBackground() 函数？对每个使用 SwingWorker 的错位 GUI 代码多次使用 invokeLater 函数**不是**问题，因为它并不频繁。

如果这是不可能的，我可以使用某种替代方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:55:01.960

All methods that update the GUI must be invoked on the EDT, otherwise you may end up with some unexplained GUI behavior (which sounds like what you are seeing). You could have repaints that don't happen properly, thread races, etc.

It is not advised to run long running tasks on the GUI because they will cause the GUI to become unresponsive, so for long running tasks, SwingWorker is a good solution to use (note that the process and done methods are called on the EDT automatically so your worker can do its long running work in doInBackground but you can safely update the GUI without using SwingUtilities.invokeLater from the done method).

As you mentioned you have hundreds of methods and you don't want to call SwingUtilities.invokeLater every time, you might want to look into one of the task frameworks. The Swing Application Framework was developer under JSR-296 [http://java.sun.com/developer/technicalArticles/javase/swingappfr/](http://java.sun.com/developer/technicalArticles/javase/swingappfr/) but is not actively supported, but still provides a nice framework. [http://en.wikipedia.org/wiki/Swing_Application_Framework](http://en.wikipedia.org/wiki/Swing_Application_Framework) is a list of alternative frameworks.

It sounds like you are going to need to do some significant rewriting in your application. Calling GUI methods from outside the EDT is unsafe to do.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T18:00:49.410

我不明白你的要求是怎么可能的。Swing 无法在执行前知道什么是“长时间运行”的方法调用。如果该方法已经在执行（在 EDT 上），Swing 不能简单地将其拾取并将其移动到新线程。即使您指出应该在后台线程中运行哪些方法调用，也很难将其关闭。我能想到的在 Java 中实现这一点的唯一方法是使用 AOP（您可以拦截方法调用）。但是实现[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)会比重新实现现有应用程序以使用 SwingWorkers 更难。

听起来您的 Swing 应用程序的体系结构已损坏。不得在 EDT 上执行长时间运行的任务。我很抱歉，但我认为你只需要在这个问题上硬着头皮。如果您希望您的应用程序感觉敏捷、响应迅速并具有可预测的行为，您必须通过将长时间运行的代码置于后台线程中来解决此问题。

如果您的应用程序使用大量后台任务，您可能希望使用出色的[Swing Task API](http://developerlife.com/tutorials/?p=268)。否则你会很快发现自己陷入了 SwingWorker 意大利面条。

> 对于碰巧在 doInBackground() 中的每个 GUI 绘图

您不能在 'doInBackground()' 方法中调用 Swing 绘图、更新等方法（实际上可以，但不能这样做）。这是因为这是在 EDT 之外执行的方法。GUI 绘图和组件更新只能在 SwingWorker 的 'done()' 方法中调用。

# javascript - Chrome 扩展：在每个选项卡上执行脚本

> ID：10787267
> 
> 赞同：3
> 
> 时间：2012-05-28T15:46:51.367
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试开发一个插件，该插件会在单击浏览器操作时影响浏览器中的每个选项卡和窗口。

这是我目前拥有的代码：

```
function updateIcon() {
  chrome.browserAction.setIcon({path:current});

  if (current == "icon-left.png") 
    { 
    current = "icon-right.png"; 
    chrome.tabs.executeScript(null, {file: "cursor.js"});
    }
  else 
    { 
    current = "icon-left.png";
    chrome.tabs.reload(null);
    }
} 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:24:00.623

我是这样解决的：

```
 chrome.tabs.query({}, function (tabs) {
            for (var i = 0; i < tabs.length; i++) {
                chrome.tabs.executeScript(tabs[i].id, {file: "cursor.js"});
            }
        }
    ); 
```

# java - 在 Java Web 服务中返回错误

> ID：10787271
> 
> 赞同：1
> 
> 时间：2012-05-28T15:48:00.780
> 
> 标签：java, web-services, error-handling

我有这样的课：

```
@Override
public StudentDTO getStudent(@WebParam(name = "name") String studentName) {
    StudentDTO student = new StudentDTO();
    try {
        student = studentService.findStudentByName(studentName);
    } catch (Exception e) {
        return new ErrorActionResponse("student couldn't find by name");
    }
    return student;
} 
```

像往常一样，这不起作用，因为返回类型是*StudentDTO*，我尝试返回另一种类型的类：*ErrorActionResponse*。ErrorActionResponse 是一个错误类，其中包含有关错误的详细信息。

如何设计可以处理错误情况的 Web 服务架构？（在我的 REST 架构中，我将错误信息写入响应并将错误发送到客户端）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:39:00.390

为了最小的影响，我建议：`ErrorActionResponse`作为`StudentDTO`setter 和 getter 方法的私有成员。在服务中，当出现异常时，在's 成员中实例化`ErrorActionResponse`并设置相同。`StudentDTO`因此，客户必须首先检查是否`getErrorActionResponse()`返回`null`。如果是，则进行正常处理，否则，处理异常情况。

班级学生DTO：

```
public class StudentDTO {

    ...
    private ErrorActionResponse errorActionResponse;
    ...

    public ErrorActionResponse getErrorActionResponse() {
        return errorActionResponse;
    }

    public void setErrorActionResponse( ErrorActionResponse errorActionResponse ) {
        this.errorActionResponse = errorActionResponse;
    }

} 
```

服务：

```
@Override
public StudentDTO getStudent(@WebParam(name = "name") String studentName) {
    StudentDTO student = new StudentDTO();
    try {
        student = studentService.findStudentByName(studentName);
    } 
    catch (Exception e) {
        student.setErrorActionResponse( new ErrorActionResponse("student couldn't find by name") );
    }
    finally {
        return student;
    }
} 
```

客户代码：

```
if( student.getErrorActionResponse() == null ) {
    // do normal processing
}
else {
    // handle exception case
} 
```

在上述情况下，DTO 具有`ErrorActionResponse`与其基本状态无关的成员。所以，为了更简洁的方法，我建议你考虑[Adapter pattern](http://en.wikipedia.org/wiki/Adapter_pattern)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:25:24.320

如果您想返回一个`Collection`（如我之前回答的评论中所述），我建议您创建一个带有两个键的 Map 。如果没有例外，第一个键值对将`StudentDTO`分别包含“students”字符串和集合。并且，第二个键值对将分别包含“异常”字符串和空值。如果有异常，第一个键值对将分别包含“students”字符串和空值。并且，第二个键值对将分别是“异常”字符串和一个`ErrorActionResponse`对象。例子：

无异常情况：

```
Map<String, List> result = new HashMap<String, List>();
result.put( "students", COLLECTION_OF_STUDENTS );
result.put( "exception", null ); 
```

无异常情况：

```
Map<String, List> result = new HashMap<String, List>();
result.put( "students", null );
result.put( "exception", ErrorActionResponse_OBJECT ); 
```

希望这可以帮助...

# json - Internet Explorer 9 中的 JSON 支持

> ID：10787272
> 
> 赞同：1
> 
> 时间：2012-05-28T15:48:04.290
> 
> 标签：json, internet-explorer-9

在 IE9 中运行：

```
if (typeof(JSON) === 'object' && 
    typeof(JSON.parse) === 'function') {
  // Native JSON parsing is available.
} 
```

它不支持原生 json。我错了什么？我的 IE 中是否存在错误的安全设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:51:23.203

也许您的页面处于怪癖模式？我相信您需要 IE9 的标准模式才能启用 JSON。

确保您之前没有任何奇怪之处，`<!DOCTYPE`并确保它是在 IE9 中触发标准模式的一种。

# sql-server - 获取常用行

> ID：10787275
> 
> 赞同：0
> 
> 时间：2012-05-28T15:48:16.147
> 
> 标签：sql-server

我有一张桌子：

```
 Subject_ID StudyPlan_ID   
       271            2   
       279            2  
       276            2  
       279            8 
       271            8   
       267            9   
       279            9 
```

我想找到它们`Subject_ID`之间的共同点，`StudyPlan_ID`所以它`279`使用的是 SqlServer 2008 所以请大家帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:02:43.053

如果我理解正确，您的意思是找到链接到每个 StudyPlan_ID 的 Subject_ID。

```
DECLARE @Data TABLE(Subject_ID int, StudyPlan_ID int)
INSERT INTO @Data
    VALUES
        (271, 2),
        (279, 2),
        (276, 2),
        (279, 8),
        (271, 8), 
        (267, 9),
        (279, 9)

SELECT Subject_ID
FROM @Data AS a
GROUP BY Subject_ID
HAVING COUNT(Distinct StudyPlan_ID) = (SELECT COUNT(Distinct StudyPlan_ID) FROM @Data) 
```

# java - 转换日期对象的字符串格式日期

> ID：10787281
> 
> 赞同：0
> 
> 时间：2012-05-28T15:48:39.173
> 
> 标签：java, date, string-to-datetime

我在字符串中得到一个日期格式作为输出，就像这样。

> 2012 年 5 月 18 日星期五 00:00:00 EDT

我需要将其转换为日期对象。我应该使用什么方法？

谢谢你。

这是我使用的程序。

```
import java.util.*;
import java.text.*;

public class DateToString {
    public static void main(String[] args) {
        try {
            DateFormat formatter ;
            Date date ;
            formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss 'EDT' yyyy ");
            date = (Date)formatter.parse("Fri May 18 00:00:00 EDT 2012");
            String s = formatter.format(date);
            System.out.println("Today is " + s);
        } catch (ParseException e) {
            System.out.println("Exception :"+e); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:51:42.227

看看：[java.text.SimpleDateFormat Java API](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
SimpleDateFormat dateParser = new SimpleDateFormat("EEE MMM d HH:mm:ss z yyyy", 
    Locale.US);
Date date = dateParser.parse("Fri May 18 00:00:00 EDT 2012"); 
```

**更新：**注意自我，语言环境可能很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:53:11.743

[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)与以下模式一起使用：

```
EEE MMM dd HH:mm:ss 'EDT' YYYY 
```

这不担心时区，或者，包含时区：（*未经测试*）`EEE MMM dd HH:mm:ss z YYYY`（它是小写的`z`）。请记住，我还没有测试它（因为我正在下班回家的路上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:04:12.080

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)和实现以您想要的格式获取可显示的日期。

**示例**：

```
String myDateString = "Fri May 18 00:00:00 EDT 2012";
SimpleDateFormat dateFormat = new SimpleDateFormat();
dateFormat.applyPattern( "EEE MMM dd HH:mm:ss z yyyy" );

try {
    Date d = dateFormat.parse( myDateString );
    System.out.println( d ); // Fri May 18 00:00:00 EDT 2012

    String datePattern1 = "yyyy-MM-dd";
    dateFormat.applyPattern( datePattern1 );
    System.out.println( dateFormat.format( d ) ); // 2012-05-18

    String datePattern2 = "yyyy.MM.dd G 'at' HH:mm:ss z";
    dateFormat.applyPattern( datePattern2 );
    System.out.println( dateFormat.format( d ) ); // 2012.05.18 AD at 00:00:00 EDT

    String datePattern3 = "yyyy.MM.dd G 'at' HH:mm:ss Z";
    dateFormat.applyPattern( datePattern3 );
    System.out.println( dateFormat.format( d ) ); // 2012.05.18 AD at 00:00:00 -400
}
catch ( Exception e ) { // ParseException
    e.printStackTrace();
} 
```

# java - jBoss AS 7.1 和 LDAP 身份验证 - 无法实例化 InitialContextFactory com.sun.jndi.LdapCtxFactory

> ID：10787282
> 
> 赞同：0
> 
> 时间：2012-05-28T15:48:41.203
> 
> 标签：java, jboss, ldap, jboss7.x

我正在尝试使用 LDAP 身份验证设置 jBoss。我已经将全局模块配置如下：

```
 <subsystem xmlns="urn:jboss:domain:ee:1.0">
        <global-modules>
            <module name="sun.jdk" slot="main"/>
            <!--
             this no longer exists in AS 7.1
             <module name="com.sun.jndi.ldap" slot="main"/>
            -->
        </global-modules>
    </subsystem> 
```

但是我在验证我的网络应用程序时遇到了这个错误。

```
16:17:56,505 ERROR [org.jboss.security.authentication.JBossCachedAuthenticationManager] (http--127.0.0.1-8080-3) Login failure: ja
vax.security.auth.login.FailedLoginException: Password Incorrect/Password Required
        at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:270) [picketbox-4.0.7.Fi
nal.jar:4.0.7.Final]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_17]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_17]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_17]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_17]
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:769) [rt.jar:1.6.0_17]
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:186) [rt.jar:1.6.0_17]
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:683) [rt.jar:1.6.0_17]
        at java.security.AccessController.doPrivileged(Native Method) [rt.jar:1.6.0_17]
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:680) [rt.jar:1.6.0_17]
        at javax.security.auth.login.LoginContext.login(LoginContext.java:579) [rt.jar:1.6.0_17]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:4
49) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManage
r.java:383) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:3
71) [picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:160) [
picketbox-infinispan-4.0.7.Final.jar:4.0.7.Final]
        at org.jboss.as.web.security.JBossWebRealm.authenticate(JBossWebRealm.java:214) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]

        at org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:280) [jbossweb-7.0.13.Final.jar
:]
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:381) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:
7.1.1.Final]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-we
b-7.1.1.Final.jar:7.1.1.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final
.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_17]
Caused by: javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory com.sun.jndi.LdapCtxFactory from cla
ssloader null
        at org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:664) [rt.jar:1.6.0_17]
        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288) [rt.jar:1.6.0_17]
        at javax.naming.InitialContext.init(InitialContext.java:223) [rt.jar:1.6.0_17]
        at javax.naming.ldap.InitialLdapContext.<init>(InitialLdapContext.java:134) [rt.jar:1.6.0_17]
        at org.jboss.security.auth.spi.LdapExtLoginModule.constructInitialLdapContext(LdapExtLoginModule.java:655) [picketbox-4.0.
7.Final.jar:4.0.7.Final]
        at org.jboss.security.auth.spi.LdapExtLoginModule.createLdapInitContext(LdapExtLoginModule.java:436) [picketbox-4.0.7.Fina
l.jar:4.0.7.Final]
        at org.jboss.security.auth.spi.LdapExtLoginModule.validatePassword(LdapExtLoginModule.java:312) [picketbox-4.0.7.Final.jar
:4.0.7.Final]
        at org.jboss.security.auth.spi.UsernamePasswordLoginModule.login(UsernamePasswordLoginModule.java:267) [picketbox-4.0.7.Fi
nal.jar:4.0.7.Final]
        ... 27 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:30:34.240

我`java.naming.factory.initial`从我的 LDAP 部分中删除了该属性，`standalone.xml`现在一切正常。

# grails - 将 Grails (1.3.x) 中的 slf4j-api-1.5.8.jar 文件升级到较新的文件，需要考虑什么？

> ID：10787285
> 
> 赞同：1
> 
> 时间：2012-05-28T15:49:15.977
> 
> 标签：grails, slf4j, logback

我打算用 logback 替换 log4j。为了让 Groovy 配置 ( [http://logback.qos.ch/manual/groovy.html](http://logback.qos.ch/manual/groovy.html) ) 运行，我至少需要 logback-0.9.22。

问题是 Grails 1.3.x 附带 slf4j-api-1.5.8 仅足以使用 logback-0.9.17，而 logback-0.9.17 又不支持 Groovy 配置。

如果我在 Grails 中升级 slf4j-api，实际会发生什么（是否会破坏/导致意外情况）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:59:15.200

[请参阅http://slf4j.org/news.html](http://slf4j.org/news.html)上的 slf4j 发布历史。

1.6.0 版本只列出了一个不兼容的地方：

> LocationAwareLogger 接口中的 log 方法现在接受一个 Object[] 类型的附加参数，表示日志请求的附加参数。由于此修改，slf4j-api 版本 1.6.x 将不适用于随 SLF4J 1.5.x 提供的绑定——必须使用随 1.6.x 提供的绑定。

我想这是 slf4j-api-1.5.8 和 logback-0.9.22 不匹配的唯一原因。

因此，在升级 slf4j-api 和 logback 之后，一切都应该正常工作。

# session - 如何使用基于每个席位的方法限制 SaaS 的应用程序使用？

> ID：10787287
> 
> 赞同：0
> 
> 时间：2012-05-28T15:49:19.453
> 
> 标签：session, authentication, cookies, session-cookies, saas

我正在开发我的企业 SaaS 应用程序，我的一些用户希望按每个席位收费。

我想知道如何确保访问确实受到限制。我现在可以看到具有相同登录名/密码的人同时从不同的 IP 地址、不同的用户代理登录，即使公司只为一个席位付费。

从业务和技术角度实施限制的最佳方式是什么？我不想太严格，同时我希望公司为他们实际需要的座位数量付费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:43:09.810

使用 IP 似乎是个坏主意——局域网中的人（通常）都拥有相同的 IP。

假设 PHP 没有 API 来访问与当前不同的检查会话 - 一个想法是：

*   如果您还没有这样做，对于您发出的每个登录 cookie，还要发出一个唯一的 ID（UUID 将服务于您的目的）
*   将这些 id 存储在某处（在 java 中，您可以将它们存储在应用程序上下文中，也许在 php 中，您需要一个 db 表 - 我不是 php 专家），以及两个时间戳：“会话开始”和“最后一个活动” "
*   在每次请求时，在“最后一个活动”中记录当前时间戳

然后，当你收到一个新请求时，计算有多少其他活跃用户

*   `last activity >= current session start`
*   `last activity >= now - session TTL`（仅在无法及时修剪过期会话时才需要）

这应该给你占用座位的数量。

*请注意，直到多余用户登录之后*，您才会*注意到*席位数量的违规，直到您在其他会话中看到活动 - 我看不到任何解决此问题的方法，因为您不知道确切的时间席位变得空置（好吧，您可能会说它只有在其会话到期时才空置，但这似乎不公平）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:10:30.553

不要按用户代理过滤，我认为这太严格了，有些人可能安装了各种浏览器。按 IP 过滤也可能很棘手，一些用户的动态 IP 可能会定期更改。

我的一个想法是强制用户安装浏览器扩展，浏览器扩展可以从操作系统上的某些东西生成一个唯一的 ID。也许使用 HDD 卷号或 Windows 序列号，任何该计算机独有的东西。

拥有此唯一 ID 后，每次用户登录时在后端跟踪中使用它。如果用户超过一定数量的席位，您可以阻止用户帐户或先与他们联系。

允许用户有一定的自由度也是一个好主意，这样如果他们有一个座位，那么后端可能会允许一个月有 2 个座位（滚动期），以防用户购买新电脑或安装新硬盘。*

# php - 在 PHP 中将百分之一转换为“分钟：秒.百分位”

> ID：10787288
> 
> 赞同：0
> 
> 时间：2012-05-28T15:49:23.423
> 
> 标签：php, date

> **可能重复：**
> [如何在 PHP 中将毫秒数格式化为分钟：秒：毫秒？](https://stackoverflow.com/questions/1833869/how-do-i-format-an-amount-of-milliseconds-into-minutessecondsmilliseconds-in-p)

在 PHP 中，我需要帮助将百分之一的字符串转换为“minutes:seconds.hundredths”。

因此，例如，如果我有这个：'10420' 并且想像这样显示它：01:44.20。

我玩了一下 php date() 但我无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:54:36.237

呃，日期的简单数学有什么问题？

```
$start=10420;//Or whatever... your example value
$hs=$start%100;//Hundredths
$start-=$hs;
$m=floor($start/6000);//Minutes
$start-=$m*6000;
$s=$start/100;//Seconds

echo "It's $m:$s.$hs;" 
```

显然这最好写在一个函数中......但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:58:00.953

像这样（应该是不言自明的）：

```
$hundreds = 10420;
$secs = intval($hundreds / 100);
$frac = $hundreds - $secs * 100;
echo gmdate("i:s", $secs).sprintf(".%02d", $frac), "\n"; 
```

您的要求很有趣，因为您似乎想忽略小时数部分。如果需要，您仍然可以使用 重新添加它`gmdate("H:i:s", $secs)`。当然，这也只能在 24 小时内正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:01:39.527

在这些代码中尝试此更改：

```
$start=10420;//Or whatever... your example value
$hs=$start%100;//Hundredths
$start-=$hs;
$m=floor($start/6000);//Minutes
$start-=$m*6000;
$s=$start/100;//Seconds
$m = sprintf("%02s",$m);

echo "It's $m:$s:$hs"; 
```

# vb.net - 从日期时间中排除周末

> ID：10787289
> 
> 赞同：0
> 
> 时间：2012-05-28T15:49:23.590
> 
> 标签：vb.net

我需要从这条线上排除周末。

```
 If Convert.ToDateTime(e.Row.Cells(4).Text).ToString < DateTime.Now.AddDays(-3) Then
                            e.Row.BackColor = System.Drawing.Color.FromName("red") 
```

我希望有一个简单的方法来做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:54:02.763

Use the following code

```
DateDiff(DateInterval.Weekday,Date2, Date1) 
```

--Hiren V

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:00:15.210

我曾经做过类似的事情。

诀窍是从您的行中获取字符串，将它们转换为您拥有的 DateTime，然后检查 DateTime 对象的 DayOfWeek 属性。

DayOfWeek 属性可以这样使用：

```
DateTime date = new DateTime();
label1.text = date.DayOfWeek.ToString(); 
```

这样，只需检查该值是否等于字符串“Saturday”或“Sunday”。

这应该可以帮助你过滤掉你的周末。

# vb.net - VB.Net - 继承 - 父母和孩子都可以有 ToString 方法吗？两者都可以访问/使用吗？

> ID：10787297
> 
> 赞同：2
> 
> 时间：2012-05-28T15:50:10.940
> 
> 标签：vb.net, inheritance, tostring

我正在 VB.Net 中学习继承。一个家庭作业要求我编写一个带有名称（字符串）属性的基类和一个显示名称的 ToString 方法。它还要求我创建基类的一些子类，并在这些子类中实现一个 ToString 方法。我可以从子类和基类调用 ToString 方法吗？

一些示例代码如下：

我的基类：

```
Public MustInherit Class MyBaseClass
    Public Property Name as String

    Public Overloads Function ToString() as String
        Return Name
    End Function
End Class 
```

我的孩子班：

```
Public Class ChildClass
    Inherits MyBaseClass

    Public Sub New()
        Name = "This is the name"
    End Sub

    public Overloads Function ToString() as string
        ' Is it possible to call my base class ToString and append the text to
        ' this ToString method? I realize I can simply access my Name property
        ' however this does not fulfill the requirements i was given
        return "Some text"
    End Function
End Class 
```

一些使用上述代码的代码：

```
dim someObject as new ChildClass("Hello VB.Net ")
lblLabel.text = someObject.ToString() 
```

同样，我想知道是否有一种方法可以在子类中调用 ToString() 方法，然后在基类中生成类似的输出：“Hello VB.Net This is the name”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:52:08.753

```
public Overloads Function ToString() as string 
    return MyBase.ToString() + "Some text"
End Function 
```

# c# - WCF 错误：无法加载扩展

> ID：10787299
> 
> 赞同：9
> 
> 时间：2012-05-28T15:50:31.603
> 
> 标签：c#, .net, wcf, exception-handling, wcf-extensions

我在我的项目中定义了一个覆盖`IDispatchMessageInspector`并添加了相关配置的类，但它不起作用

> System.Configuration.ConfigurationErrorsException：无法加载为扩展“customHeaders”注册的类型“InMotionGIT_NT.Address.Service、CustomHeaders、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null”。（C:\Users\jmachado\Documents\Visual Studio 2010\Projects\InMotionGIT_NT\Address Service\InMotionGIT_NT.Address.Service\bin\Debug\InMotionGIT_NT.Address.Service.dll.config 第 67 行）

这就是我调用自定义扩展的方式

```
<endpointBehaviors>
    <behavior name="jsonBehavior">
        <enableWebScript/>
        <customHeaders/>
        <!--<webHttp/>-->
    </behavior>
</endpointBehaviors> 
```

这就是我定义我的自定义扩展的方式

```
<behaviorExtensions>
    <add name="customHeaders" type="InMotionGIT_NT.Address.Service, CustomHeaders, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
</behaviorExtensions> 
```

这是我定义的类，在我的项目中

```
[AttributeUsage(AttributeTargets.Class)]
public class CustomHeaders : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, ClientChannel channel, InstanceContext instanceContext)
    {
        if ((WebOperationContext.Current.IncomingRequest.Method == "GET"))
        {
            WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
            WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Methods", "POST");
            WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Headers", "Content-Type, Accept");
        }
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
    }
} 
```

我错过了配置中的某些内容吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T17:53:09.323

更改您的类型定义。首先，指定完整的类型名称（命名空间 + 类名）。在逗号之后，放置包含您的类型的 DLL 的名称。然后剩下的就是一个完全限定的类型名称。像这样：

```
<behaviorExtensions>
    <add name="customHeaders" type="InMotionGIT_NT.Address.Service.CustomHeaders, <DLLName> , Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
</behaviorExtensions> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T09:31:29.910

确保该版本与 dll 版本相同。在我的情况下，我引用了这些类所属的相同的 asssemlby。但是我更改了 AssemlbyInfo.cs 文件中的程序集版本，该版本与 App.config 文件中的版本不匹配。

# ruby - 减少 Ruby on Rails 中的冗余代码

> ID：10787303
> 
> 赞同：0
> 
> 时间：2012-05-28T15:50:48.797
> 
> 标签：ruby, ruby-on-rails-3, devise

我`Devise`在 Ruby on Rails 中用于身份验证，并且我正在覆盖注册更新控制器，以不需要当前密码来更新 User 模型。所以，基本上下面的代码说“如果用户不提供密码，更新使用`update_without_password`，否则更新使用`update_attributes`”。

```
if resource_params["password"].empty?

    if resource.update_without_password(resource_params)
      if is_navigational_format?
        if resource.respond_to?(:pending_reconfirmation?) && resource.pending_reconfirmation?
          flash_key = :update_needs_confirmation
        end
        set_flash_message :notice, flash_key || :updated
      end
      sign_in resource_name, resource, :bypass => true
      respond_with resource, :location => after_update_path_for(resource)
    else
      clean_up_passwords resource
      respond_with resource
    end

else

    if resource.update_attributes(resource_params)
      if is_navigational_format?
        if resource.respond_to?(:pending_reconfirmation?) && resource.pending_reconfirmation?
          flash_key = :update_needs_confirmation
        end
        set_flash_message :notice, flash_key || :updated
      end
      sign_in resource_name, resource, :bypass => true
      respond_with resource, :location => after_update_path_for(resource)
    else
      clean_up_passwords resource
      respond_with resource
    end

end 
```

显然，这里有减少代码冗余的空间，但我还是 ruby​​ 新手，想知道是否有人可以提出一种干净的方法来编写相同的东西，而无需复制嵌套中的所有代码`if`。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:54:52.217

如果我没看错，并且没有遗漏任何内容，那么那里只有一条区别。你可以这样写：

```
result = if resource_params["password"].empty?
    resource.update_without_password(resource_params)
  else 
    resource.update_attributes(resource_params)
  end

if result
  if is_navigational_format?
    if resource.respond_to?(:pending_reconfirmation?) && resource.pending_reconfirmation?
      flash_key = :update_needs_confirmation
    end
    set_flash_message :notice, flash_key || :updated
  end
  sign_in resource_name, resource, :bypass => true
  respond_with resource, :location => after_update_path_for(resource)
else
  clean_up_passwords resource
  respond_with resource
end 
```

# c# - 何时为类使用 GUID

> ID：10787316
> 
> 赞同：0
> 
> 时间：2012-05-28T15:51:38.973
> 
> 标签：c#, generic-list, gethashcode

我正在开发一个包含几个类的简单应用程序。这一切都始于我想[`Remove`](http://msdn.microsoft.com/en-us/library/cd666k3e)在`List<Car>`. 此方法要求您覆盖该类型的`Equals`和`GetHashCode`方法`Car`。在这种情况下，我决定在`Car`类上实现一个 ID 属性。这样，我的`Equals`方法只检查 ID 是否相等，然后我的`GetHashCode`方法返回`base.GetHashCode()`.

这是一个好方法，还是为一个小班实施 GUID 过于严厉？如果没有我上面解释的原因，就不需要它。此 Car 类型唯一性的唯一要求是它在`List<T>`其所属的集合中是唯一的。但添加 GUID 属性似乎是解决`GetHashCode`混乱的最快方法。顺便说一句，我的 Car 类型没有 int 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:54:30.903

> 如果没有我上面解释的原因，就不需要它。

如果您的班级在*逻辑上*没有 ID，那么仅仅为了平等而包含它肯定看起来很奇怪。

例如，如果您有两个实例，除了 ID 之外的*所有内容都具有相同的属性，那么它们真的不相等吗？*如果是，您应该可能只使用`Equals`/的默认实现，`GetHashCode`它使用引用标识来实现相等。如果您将使用具有相同 ID 的两个对象，则只需使用对同一对象的两个引用。

这实际上完全取决于上下文，而您并没有给出太多的内容 - 但是为了相等而添加一个 ID*有点*设计味道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:06:08.693

而不是实现 Equals 和 GetHashCode 只是使用[`RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)：

```
myList.RemoveAll(x => x.ID == myCar.ID); 
```

这允许您指定一个谓词来指示应该删除哪些项目（您只删除一个项目并不重要）。

* * *

实现`Equals`和`GetHashCode`您描述的方式让我觉得非常狡猾-如果您的`Equals`实现返回`true`，那么您的`GetHashCode`方法**需要**返回相同的值，以便将这两个对象放在哈希表的同一个桶中。您的实现（据我了解）与此标准不匹配，因为基本`GetHashCode`实现几乎肯定会为两个`Car`实例返回不同的值，无论它们是否具有相同的 ID。

实施`Equals`并不`GetHashCode`完全是微不足道的，如果有替代方案，我通常会避免这样做。如果您真的想这样做，请查看以下资源：

*   [覆盖 System.Object.GetHashCode 的最佳算法是什么？](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode)
*   [Object.GetHashCode() 的默认实现](https://stackoverflow.com/questions/720177/default-implementation-for-object-gethashcode/720282#720282)。
*   [实现 Equals 方法](http://msdn.microsoft.com/en-us/library/336aedhh%28v=vs.100%29.aspx)

哈希码也不是[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)

# c# - XTRA 报告分页符不起作用 Dev Express

> ID：10787329
> 
> 赞同：0
> 
> 时间：2012-05-28T15:52:40.843
> 
> 标签：c#, devexpress, xtrareport

所以我想创建多个 XR 对象，并在每个对象初始化之间添加一个分页符。我写了一个小例子来演示：

在 XtraReportsClass 里面我有这个......

```
int k =0; 
public void addLabel()
{
    XRLabel l = new XRLabel();
    l.Text = "iteration:" + k;
    l.LocationF = new PointF(20, 200);
    k++;
    Detail.PageBreak = DevExpress.XtraReports.UI.PageBreak.AfterBand;
    Detail.Controls.Add(l);
} 
```

所以我的逻辑是每次都创建一个标签，然后从主窗体中调用标签，比如......

```
private void button1_Click(object sender, EventArgs e)
{
    xrReport r = new xrReport();
    r.addLabel();
    r.addLabel();
    r.addLabel();
    r.addLabel();
    r.ShowRibbonPreview();
} 
```

所以我希望在每个页面上都有一个标签，在 Location(20,200) 处，输出为“iteration:{value of k}”不幸的是，它们都在同一个位置被打在一起，而不是移动到下一页。 ..

我已经尝试过，

```
private void Detail_BeforePrint(object sender, PrintEventArgs e) 
```

活动，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:28:42.063

Dev Express 已经回答了我的问题@--> [http://www.devexpress.com/Support/Center/Question/Details/Q404605](http://www.devexpress.com/Support/Center/Question/Details/Q404605)

# multidimensional-array - Reduce multidimensional array in processing to drop empty odd rows

> ID：10787338
> 
> 赞同：0
> 
> 时间：2012-05-28T15:53:29.750
> 
> 标签：multidimensional-array, processing, reduce

I have the following problem, I imported a file .csv into a 2d array called csv.

This has null entries in each odd row, therefore just even rows, starting from 0 (0, 2, 4, ... 606) are filled with data relevant for me

so, the size of the 2d array is 609, 560 and they come from printing csv.length and csv[1].length

I need to have a file whose size is 304x561, and I call it csv2.

However, the following code gives me an error

```
String rows[] = loadStrings("cit2.txt");
String [][] csv; // initialize csv file
String [][] csv2; // initialize reduced csv file
int csvWidth=0;

//calculate max width of csv file
for (int i=0; i < rows.length; i++) {
  String [] columns = split(rows[i],'\t'); 
  if (columns.length>csvWidth){
    csvWidth=columns.length;
  }
}

//create csv array based on # of rows and columns in csv file
csv = new String [rows.length][csvWidth];

//parse values into 2d array
for (int i=0; i < rows.length; i++) {
  String [] temp = new String [rows.length];
  //strDelimiter = (strDelimiter || ",");

  temp= split(rows[i], '\t');
  for (int j=0; j < temp.length; j++){
   csv[i][j]=temp[j];
  }
}

//test
println(csv[604][0]);
println(csv.length);
println(csv[0].length);

int row = csv.length;
println(((row-1)/2));
int newrow = 0;

int col = csv[0].length;
//int row = csv.length;

csv2 = new String [((row-1)/2)-1][col];

for (int c=0; c <csv[0].length; c++)
{
  for(int r=0; r<(csv.length)-1; r = r+2)
  {
    String temp = csv[r][c]; 
    newrow = newrow +1; 
    csv2[newrow][c]= temp;
  }
} 
```

any idea?

# javascript - JavaScript/jQuery html(null) 与 html('')

> ID：10787341
> 
> 赞同：0
> 
> 时间：2012-05-28T15:53:34.650
> 
> 标签：javascript, jquery, performance

有没有使用 jQuery 在元素内“清除”html 的最佳方法？我使用`.html(null)`但`.html("")`效率更高。有没有更好/更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T15:58:09.063

有理由不只是使用`.empty()`吗？

而且，顺便说一句，如果您的问题是关于“效率”，只要效率与速度大致相当，那么我是否可以建议使用[JS Perf](http://jsperf.com/)进行自我测试？

顺便说一句，在与 Chromium 18/Ubuntu 11.04 的[JS Perf 比较](http://jsperf.com/empty-null-or-empty-string)中，`.empty()`似乎始终是更快的方法。参考：

除上述以外；如果您不介意使用普通的原生 JavaScript，它*会更快*（在我的三星 II 上，DOM 以 ~82k ops/sec 的速度运行，在我的 Chromium 18/Ubuntu 11.04 的桌面（没什么特别的）上，DOM 运行在： ~860k ops/sec，而不是`.empty()`（下一个最快的）8.4k ops/sec）。

基于 DOM 的方法：

```
var list = document.getElementsByTagName('ul')[0];
while (list.firstChild) {
  list.removeChild(list.firstChild);
} 
```

[以上所有方法的 JS Perf 比较](http://jsperf.com/empty-null-or-empty-string/2)。

参考：

*   [`empty()`](http://api.jquery.com/empty/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:58:36.680

[http://api.jquery.com/empty/](http://api.jquery.com/empty/)

由 jQuery 提供

# jquery - 为什么 JQuery 到处都有美元符号？

> ID：10787342
> 
> 赞同：123
> 
> 时间：2012-05-28T15:53:36.443
> 
> 标签：jquery

我正在开发一个包含大量 JQuery 的项目。JQuery 到处都有很多 $ 符号，例如

```
$(document).ready(function () {
        $('input[type=file]').wl_File({
            url: '/Admin/PolicyInventory/UploadDocuments',
            onFileError: function (error, fileobj) {
                $.msg('file is not allowed: ' + fileobj.name, {
                    header: error.msg + ' Error ',
                    live: 10000
                });
            }
        });
... 
```

我的问题是，这个美元符号是什么意思？为什么到处都在使用它，我如何理解和解释它？这让我想起了我在大学学习 Scheme 的可怕日子，不得不在不知道为什么这样做的情况下到处放括号。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-05-28T15:55:37.457

`$`只是一个快捷方式[`jQuery`](http://api.jquery.com/jQuery/)。这个想法是**所有事情**都是用一个全局符号完成的（因为全局命名空间非常拥挤），`jQuery`但是如果你喜欢，你可以使用`$`（因为它更短）：

```
// These are the same barring your using noConflict (more below)
var divs = $("div");       // Find all divs
var divs = jQuery("div");  // Also find all divs, because
console.log($ === jQuery); // "true" 
```

如果您不想使用别名，则不必这样做。如果你不想`$`成为 的别名`jQuery`，你可以使用[`noConflict`](http://api.jquery.com/jQuery.noConflict/)并且库将恢复`$`到 jQuery 接管它之前的任何状态。（如果您还使用 Prototype 或 MooTools，则很有用。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-28T15:55:10.403

`$`符号是 的别名`jQuery`。的简短版本`jQuery`，更少的写入机制。

举个例子：（在jQuery中它更复杂）

```
var yourFunction = function() {
    alert('a function');
}

window.Myf = yourFunction; 
```

现在你可以`yourFunction`这样调用：

```
Myf(); // definitely a short syntax 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-28T15:54:21.867

它只是一个方便的字符，比“jQuery”键入更短且更易于阅读。

没有什么特别的，只是它传统上不用于启动变量或函数名称，这降低了风险或名称冲突。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-02-23T16:22:57.413

# 可写性和性能

* * *

当我们在开发库或编程语言时，我们应该注意一些可写性规则。感谢 jQuery，他们已经实现了很多选项。你可以使用`$`或者你可以使用`jQuery`或者你可以使用`_`

```
(function (_) {
    _("#wow").click()
})(jQuery); 
```

或者也许你可以做一些花哨的改变，javascript 标识符是 unicode，所以你可以使用`Ω`

```
(function (Ω) {
    Ω("#wow").click()
})(jQuery); 
```

但其背后的主要思想是，按一次键盘比打字好`jQuery`

* * *

另一方面，我们有性能......我只是随机打开我的一个项目并搜索，我在单个 javascript 文件中`$`使用了 54 。`$`

`$`是一个字节。

`jQuery`是 6 个字节。

差异是巨大的 54 * 5 = 220 字节。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-28T15:55:02.350

谷歌是你的朋友： [$ 符号 JQuery](http://www.google.com.pk/search?q=jQuery%20%24%20sign&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)

美元符号只是 JQuery 的别名。

```
jQuery(document).ready(function(){}); 
```

或者

```
$(document).ready(function(){}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-28T15:57:24.070

在 javascript 中，`$`（单个美元字符）是一个有效的变量名。几个框架，其中 jQuery，已经将它作为对象的同义词，其中包含框架提供的顶级便利方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-25T04:25:12.657

$ 符号用作 Jquery 的别名。而不是使用 jquery.hide，jquery.show 每个我们可以使用别名 $ ($.hide) 因为我们使用这个词很多次。'Jquery' 不是一个方便的方法，所以我们使用别名 $。如果我们想改变它，我们可以通过 noConflict 方法改变它 var Sample=$.noConflict()

# c# - Command line argument issues

> ID：10787346
> 
> 赞同：4
> 
> 时间：2012-05-28T15:54:05.300
> 
> 标签：c#, command-line-arguments

I have a batch file which uses an external program called ASET.exe (http://www.pement.org/sed/bat_env.htm) to set values to variables. This was used as it has some advanced capabilities than the normal SET command. ASET can change the given string to different formats and then assign it to it. It has functions like UPPER(), Fread(), Lower(), left().

```
c:\test> aset var := left('asdf',2) 
```

the above statement assigns "as" to Variable "var". But the problem is it will work only in win 98 or before machines. It will not work in win NT or in XP or 2008\. So, I decided to write a small program like ASET in c# which supports some small number of functions. I am reading those commands as Command line arguments and parsing them, and then using a for loop and switch case, I am able to achieve the desired result to some extent. But I am not able to parse properly for all types of commands.

For Eg: I cannot parse this properly:

```
aset var := left(upper(fsdsf),2). 
```

My question is that What is the correct procedure for parsing commandline arguments? How to distinguish function names, various switches, operators ? Using "switch" is the only solution to call a function based on the input string ?

This is my Grammar file

```
grammar sra;

options {

  language = Java;
  output = AST;
}

start returns [String res]: expression 
{
$res=$expression.res;
System.out.println("value equals at start: "+$expression.text+$res);
} ;

expression returns [String res]
: Identifier Assignop statement
{$res=$statement.res;
System.out.println("value equals at ecpression: "+$statement.text+" "+$res);}
;

statement returns [String res]
  : function {$res=$function.res;
  System.out.println("value equals at statement: "+$function.text+" "+$res);}

  //|function Plus function
  //|function Plus Identifier
  //|Identifier
  //|Identifier Plus Identifier
  ;

   function returns [String res]
  : e=upper {$res=$e.res;
  System.out.println("value equals at function: "+$e.text+" "+$res);}  
  ;
upper returns [String res]
  : e=Upper '(' b=arguments   ')'
  {
  System.out.println("argum before conver "+$b.text);
  $res= ($b.text).toUpperCase();
  System.out.println("value equals at upper: "+$e.text+" "+"Arguments="+$b.text+" "+$res); }

  ;
arguments  returns [String res]     
                :   e1=Identifier   {$res=$e1.text;}
                |  function  {$res=$function.res;} 
                ;

Upper : 'upper';
Lower : 'lower';

Identifier  :  ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')*;
Assignop :':=' ;

Lparen  : '(';
Rparen  : ')';
Plus  : '+';
WS  : (' '|'\t'|'\r'|'\n')+{$channel = HIDDEN;}; 
```

Now how to achieve functionality like var := upper(upper(fsf)) ?? I am getting output as UPPER(FSF)..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:05:25.097

您可以根据需要解析命令行参数。您建议的用法不是命令行参数的典型用法，因此对于您想要做的事情没有一个“正确”的过程。

您似乎有自己的语法（我猜可能基于帕斯卡），因此您需要为您的语法找到或编写解析器和评估器。一方面是像[ANTLR](http://www.antlr.org)这样的东西，或者你可以用[sprache](http://code.google.com/p/sprache/)去某个地方。

也可能值得看看[http://commandline.codeplex.com/](http://commandline.codeplex.com/)关于解析和处理命令行参数的一些想法（尽管我怀疑这是否足以满足您的要求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:04:00.050

Windows 98 已停止支持 6 年，ASET 也是如此。

你可能会看到“Take Command”（4NT）是否会做你想做的事，但否则我认为带有 FreeDOS 的 VirtualBox 可能是你最好的选择。

# ruby-on-rails - working with a database record without saving it in rails

> ID：10787365
> 
> 赞同：1
> 
> 时间：2012-05-28T15:55:08.237
> 
> 标签：ruby-on-rails, activerecord, session-variables

I am developing an application using ruby on Rails that is going to be used to train learners in high fidelity simulations in which they need to record notes in an web based electronic record-keeping system.

The idea is to be able to allow users to retrieve a simulated record from the database, interact with it by adding child records that represent procedure notes, messages to other people and the like, and at the end of the session display the changes and additions that were made. After all of that the "template" record will need to be able to be reset to its original state, returning to the state it was in before the user worked with it.

Multiple users will use the same "template" record in different simulation rooms, so changes made by one user should not affect the data available to other users.

I have already developed much of the application using generated scaffolding that I have modified to produce the basic functionality of the record system.

Now I need to figure out the "simulation mode" functionality which allows a user to "tear off" a copy of a record that will be thrown away after changes are made at the end of a session.

Has anyone developed a rails application that has similar requirements to those I listed above?

I am thinking I will need to store copies of the patient and its child objects in session variables. Are there any examples available to that show how to store copies of objects in session variables and modify and add to those objects using forms? Any help and advice would be very appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:32:26.197

[https://github.com/collectiveidea/audited](https://github.com/collectiveidea/audited)

非常酷的宝石，您只需将审核状态存储在会话中，然后回滚到该会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:47:42.990

我认为您正在寻找的是版本管理。有很多宝石可以做到这一点，我建议看看：

[http://railscasts.com/episodes/255-undo-with-paper-trail](http://railscasts.com/episodes/255-undo-with-paper-trail)

...看看这种功能是否可以通过书面记录来解决。如果没有，请结帐：

[https://www.ruby-toolbox.com/categories/Active_Record_Versioning](https://www.ruby-toolbox.com/categories/Active_Record_Versioning)

# php - Render drupal field widget in custom page

> ID：10787371
> 
> 赞同：4
> 
> 时间：2012-05-28T15:55:31.590
> 
> 标签：php, drupal-7, widget, field

I have my module called mymodule.

In mymodule.module I have:

```
function mymodule_menu() {
    $items['mymodule/ship/%node'] = array(
        'title' => t('Shipment details'),
        'page callback' => '_mymodule_addr',
        'page arguments' => array(2),
        'access callback' => TRUE,
        'type' => MENU_VISIBLE_IN_BREADCRUMB,
        'weight' => 0,  
    );
    return $items;
} 
```

I want to render the addressfield widget inside the page. Then I want to read form values. Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T10:16:47.980

如何使用 Field API：

在您的回调函数中使用：

```
$node = node_load($parameter);
$my_field_value = '<front>';
$my_field_items = field_get_items('node', $node, 'field_my_field');
  if ($my_field_items) {
    $my_field_first_item = reset($my_field_items);
    $my_field_value = $my_field_first_item['value'];
}

return l($my_field_value, 'Link name'); 
```

看看：[Drupal Field API](https://api.drupal.org/api/drupal/modules!field!field.module/7)并找到适合您的功能。

同样位于：[Drupal 示例](https://drupal.org/project/examples)是您可能会使用的一些有用示例。

至少，不要忘记您可以在主题中使用自定义 .tpl 文件，您可以在其中将自定义标记添加到您的字段中。

# c# - 如何从 VSTO 应用程序插件调用 Excel VBA 函数

> ID：10787373
> 
> 赞同：1
> 
> 时间：2012-05-28T15:55:39.940
> 
> 标签：c#, excel, vba, vsto

看到了很多从 VBA 调用 VSTO 函数的示例，使用自动化加载项、COM 互操作等，但反之则不然。

我有一个 Excel 应用程序 VSTO 插件，它仅设计用于仅使用一个 Excel 工作簿。此 Excel 工作簿是 Office 2003 以来的旧工作簿，包含许多 VBA 代码。

如何从 VSTO 调用这些 VBA 函数和子函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:59:38.253

您可以使用该方法调用它`Application.Run`。例如

```
ThisApplication.Run("MyVbaMacroName",
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

# android - 无法实例化 PackageManager

> ID：10787374
> 
> 赞同：0
> 
> 时间：2012-05-28T15:55:47.130
> 
> 标签：android, android-package-managers

我正在制作一个依赖于使用 BroadCastReceiver 的类的应用程序，以便我可以在安装和卸载应用程序时捕获。意图被很好地接收，并且 onReceive 中的代码按应有的方式执行。然而，我遇到的问题是当我尝试实例化一个新的 PackageManger 时收到一条错误消息。错误是：“无法实例化类型 PackageManager”。我几乎尝试了所有变体，但我就是无法让它发挥作用。

我的代码：

```
package com.my.package;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.net.Uri;
import android.util.Log;

public class PackageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Uri datauri         = intent.getData(); 
        String uri          = datauri.toString();
        PackageManager pm   = new PackageManager();
        //pm.getApplicationInfo(uri);   //broken
        test(datauri);                  //works fine
    }//end method

    public void test(Uri uri){
        Log.d("test", "data: "+uri);
    }//end method
}// end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:01:24.383

采用

```
PackageManager pm= context.getPackageManager(); 
List<ApplicationInfo> applicationInfos = pm.getInstalledApplications(0);
.... 
```

代替

```
PackageManager pm   = new PackageManager(); 
```

# android - 如何在 Android 上使用 google-api-java-client 共享文档？

> ID：10787379
> 
> 赞同：0
> 
> 时间：2012-05-28T15:56:21.857
> 
> 标签：android, google-docs, google-docs-api, google-api-java-client, google-drive-api

我想为 Google Documents List API 创建一个 Android 客户端应用程序，考虑到它可能会在不久的将来被 Google Drive API 取代。因此，我使用 google-api-java-client 实现了身份验证，这可能会在需要时简化向新 API 的过渡。

现在我正在尝试扩展在 Google 提供的 shared-sample-docs 项目中找到的[DocsClient.java](http://code.google.com/p/google-api-java-client/source/browse/shared/gdata/shared-sample-docs/src/main/java/com/google/api/services/docs/DocsClient.java?repo=samples)类，以便能够与用户联系人共享文档。

我发现没有比@yanivinbar 编写的以下介绍更好的信息了：http: [//javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client /googleapis/xml/atom/package-summary.html](http://javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client/googleapis/xml/atom/package-summary.html)

从 Google Documents List API 文档中，我发现 ACL 用于让其他用户访问特定文档。但是，我不清楚应该实施哪些方法来实现此或其他常见的 API 相关事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:17:48.960

没错，您需要为您的文档条目添加 ACL 条目。您可以使用以下方法：

```
public void shareFile(DocumentListEntry documentListEntry,
        AclScope.Type type, String value, String role)
        throws MalformedURLException, IOException, ServiceException {

    // Instantiate a AclEntry object to update sharing permissions.
    AclEntry acl = new AclEntry();

    // Set the ACL scope.
    acl.setScope(new AclScope(type, value));

    // Set the ACL role.
    acl.setRole(new AclRole(role));

    // Insert the new role into the ACL feed.
    service.insert(new URL(documentListEntry.getAclFeedLink().getHref()), acl);             
} 
```

这里的**service**是 com.google.gdata.client.docs.DocsService 的一个对象。您还可以在文档上指定不同的共享[类型](https://developers.google.com/gdata/javadoc/com/google/gdata/data/acl/AclScope.Type)和[角色。](https://developers.google.com/gdata/javadoc/com/google/gdata/data/acl/AclRole)

对上述方法的可能调用可以是

```
shareFile(entryObj,AclScope.Type.USER,"your email id",AclRole.OWNER);
shareFile(entryObj,AclScope.Type.DOMAIN,"domain name",AclRole.READER); 
```

# c - 4维数组分配：访问冲突

> ID：10787381
> 
> 赞同：3
> 
> 时间：2012-05-28T15:56:26.287
> 
> 标签：c, multidimensional-array, matrix, allocation

我编写了这段简单的代码来动态分配一个 4 维数组：

```
#include <stdlib.h>
#include <stdio.h>

int**** alloc() {

    int i,j,k;
    int ****matrix;
    int x,y,z,n_pairs;

    x= 62;
    y= 45;
    z= 28;
    n_pairs = 4;

    matrix = (int ****) malloc(x*sizeof(int***));

    for (i=0; i<x; i++) {
        matrix[i] = (int ***) malloc(y*sizeof(int**));

        if(matrix[i]==NULL)
            return NULL;

        for (j=0; j<y; j++) {
            matrix[i][j] = (int **) malloc(z*sizeof(int*));

            if (matrix[i][j] == NULL)
                return NULL;

            for (k=0; k<n_pairs; k++) {
                matrix[i][j][k] = (int *)calloc(n_pairs,sizeof(int));

                if (matrix[i][j][k] == NULL)
                    return NULL;
            }
        }
    }

    return matrix;
}

void freeMatrix(int ****m) {

    int i,j,k;
    int x,y,z;

    x= 62;
    y= 45;
    z= 28;

    for(i=0; i<x; i++) {
        for(j=0; j<y; j++) {
            for(k=0; k<z; k++) 
                free(m[i][j][k]);

            free(m[i][j]);
        }

        free(m[i]);
    }

    free(m);
}

int main() {

    int i,j,k,h;
    int ****m = NULL;

    m = alloc();

    for(i=0;i<62;i++)
        for(j=0;j<45;j++)
            for(k=0;k<28;k++)
                for(h=0;h<4;h++)
                    printf("%d\t",m[i][j][k][h]);

    system("pause");

    return 0;
} 
```

问题是`Access Violation`当我尝试执行它时，这段代码会导致。这不是分配/释放多维数组的正确方法吗？如果是，那么问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:00:04.860

这里有一个问题：

```
 for (k=0; k<n_pairs; k++) { //<----- This should read `k<z'
            matrix[i][j][k] = (int *)calloc(n_pairs,sizeof(int)); 
```

您可能打算循环到`z`，而不是`n_pairs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:17:22.563

如果你制作一个矩阵，正确的方法是分配你需要的所有内存，然后把它挖出来。

对于 2.dim

```
#include <stdlib.h>
#include <stdio.h>

int main(void)
{
  int i;
  int ** matrix;
  int rows = 10;
  int colums =10;

  matrix = (int**)malloc(rows*sizeof(int*));
  matrix[0] = (int*)malloc(rows*colums*sizeof(int));

  for(i =1; i<rows;i++)
    matrix[i] = &matrix[i-1][colums];

  free(matrix[0]);
  free(matrix);
  return 0;
} 
```

这是为了为矩阵提供一个连续的内存区域。这可以更快

# css - 如何创建一个 div 填充垂直可用空间而不重叠包含的 div？

> ID：10787387
> 
> 赞同：0
> 
> 时间：2012-05-28T15:57:30.310
> 
> 标签：css, layout, html, cross-browser

我正在使用容器（div）进行布局，容器内有两个元素，一个用于标题的 div 和另一个用于内容的 div。标题 div 有一个固定的高度，内容的 div 必须填满可用空间。容器 div 有自己的样式，不能重叠。我的目标是创建简单的基于 div 的元素以在网页上放置简单的小部件。

我检查了其他类似的问题，例如：

*   [如何使 div 扩展以适应可用的垂直空间？](https://stackoverflow.com/questions/2351674/how-to-make-a-div-expand-to-fit-available-vertical-space)
*   [强制填充所有可用的垂直空间](https://stackoverflow.com/questions/9884085/force-div-to-fill-all-available-vertical-space)
*   [添加一个占据所有可用垂直空间的 DIV](https://stackoverflow.com/questions/3432288/add-a-div-that-takes-up-all-available-vertical-space)

但是这些解决方案都不适用于我。

我设法得到了这个 html/css：

```
<?xml version="1.0"?>
<html>
    <head>
        <style type="text/css">
            .workbench {
                width: 100%;
                height: 100%;
                background: white;
            }
            .widget {
                width: 100px;
                height: 500px;
                position: absolute;
                top: 50px;
                left: 50px;
                border: solid 1px black;
                margin: 2px;
            }
            .widget-header {
                height: 50px;
                border: solid 1px red;
                margin: 2px;
            }
            .widget-body {
                position: absolute;
                top: 50px;
                bottom: 0px;
                left: 0px;
                right: 0px;
                border: solid 1px blue;
                overflow: hidden;
                margin: 2px;
            }
        </style>
    </head>
    <body>
        <div id="workbench" class="workbench">
            <div id="widget" class="widget">
                <div id="widget-header" class="widget-header">
                    Header
                </div>
                <div id="widget-body" class="widget-body">
                    Body
                </div>
            </div>
        </div>
    </body>
</html> 
```

这在 FireFox 和 Chrome 上就像一个魅力，但在 Internet Explorer 8 上不起作用：

![页面结果](../Images/b717fb27dd7db747006bf3f0370c9013.png)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:26:40.087

意识到您不是针对 IE5.5 / IE6 市场，并且根据您的描述（在 jsFiddle 上呈现良好，而不是来自文件），问题似乎源于缺少[doctype 声明](http://www.w3.org/QA/2002/04/valid-dtd-list.html)。

为了使文档正确呈现，您必须指定一个 doctype，以拒绝浏览器陷入 quirksmode。您的文档似乎符合有效的 XHTML 约定，因此您可以使用 XHTML 过渡文档类型来指示 IE8 以标准模式呈现，或者使用 HTML5 文档类型（以及[HTML5 shim/shiv](http://code.google.com/p/html5shim/)，如果您将使用 HTML5 的语义以及）。

为方便起见，XHTML 过渡文档类型声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

*注意：[Modernizr](http://modernizr.com/)包含自己的 HTML5 shiv，建议无论如何简化开发。*

*这是[jsFiddle](http://jsfiddle.net/2xnxN/2/)供您使用*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T16:11:00.550

因为小部件的高度为 500px，小部件标题为 50px；为什么不把 widget-body 设为 450px；（还减去任何额外的边距和填充）并使小部件标题和小部件主体相对定位。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T16:10:26.477

jquery 可以帮助解决这个问题。

```
$('.workbench').each(function(){
  var total=$(this).height();
  var headerHeight=$(this).find('.widget-header').height();
  $(this).find('.widget-body').height(total-headerHeight);
}); 
```

# qt - 子类化 QStandardItemModel 以避免 QAbstractItemModel

> ID：10787389
> 
> 赞同：0
> 
> 时间：2012-05-28T15:57:49.417
> 
> 标签：qt, qabstractitemmodel, qstandarditemmodel

我正在为树状结构实现[模型/视图](http://qt-project.org/doc/qt-4.8/model-view-programming.html)，并且我决定尝试使用[QStandardItemModel](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html)，我想在其上包装一个特定的类（我在这里称之为“appSpecificClass”）。

基本上，我希望该类的一部分（例如名称或某些数据）显示在模型中，并且当我更改模型（在编辑角色或拖放中）时，我希望这会对 appSpecificClass 产生影响（也就是说，当我更改模型上显示的名称时，与模型的 appSpecificClass 项关联的对象上的名称也会更改）。

因此，我从一个 appSpecificItem 子类化 QStandardItem 开始，它只有一个指向 appSpecificClass 的指针。当我构造 appSpecificItem 时，从 appSpecificClass 调用文本和图标，一切正常。

但是，当从 appSpecificItem 更改数据时，它自然不会更改 appSpecificClass，因为到目前为止我还没有找到任何通过重载虚函数（或其他）与 appSpecificItem 的指针交互的方式

有谁知道该怎么做/如果可能的话？例如，如果[信号](http://qt-project.org/doc/qt-4.8/qstandarditemmodel.html#itemChanged)

```
QStandardItemModel::itemChanged ( QStandardItem * item ) 
```

发出，我可以更改 appSpecificItem 的指针。

如果没有，是否有任何关于从头开始实现模型的好教程？我已经尝试了一些，但这并不是一件容易的事。理想情况下，我想要一个类似 QStandardItemModel 的模型，但对它进行一些抽象（这样我就可以将我的 appSpecificClass 放在上面）。

# objective-c - 从返回 NSArray 的方法发出错误信号

> ID：10787391
> 
> 赞同：1
> 
> 时间：2012-05-28T15:57:50.563
> 
> 标签：objective-c, cocoa-touch, error-handling

我有一点架构问题。我有一个方法可以根据来自服务器的数据返回一个数组。

```
NSArray *myStuff = [anObject getMyStuff]; 
```

显然，服务器可能会失败。解决这个问题的最佳方法是什么？我正在研究如何`performFetch:`工作，但它有一个`BOOL`作为返回类型。我能有......吗：

```
NSArray *myStuff = [anObject getMyStuff:&anError]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:04:00.793

简短的回答是：*这取决于你*。

一些 Cocoa 类确实使用了您描述的简单的指向错误的对象。如果您从服务器加载数据，您可能希望查看处理[异步](https://stackoverflow.com/questions/2297398/objetive-c-async-http-request)数据的更复杂的请求/响应系统。

或者，如果您正在寻找一个非常简单的解决方案，`nil`请在请求失败时返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T16:23:39.547

正如 e.James 之前建议的那样，您应该进行适当的异步处理，其中执行提取的对象将调用一个方法，如果它成功或另一个，如果它失败。
这有一个变体，在流行的[AFNetworking](https://github.com/AFNetworking/AFNetworking/)中使用：将两个块传递给方法，一个用于失败案例，一个用于成功案例

这可能看起来像这样：

```
[client shopsFeedForUserWithID:2 
                       success:^(id response) {
                           blockSelf.shops = [Shop shopsFromReponseDict:response];
                           [blockSelf.tableView reloadData];
                      } failure:^(NSError *error) {
                           //handle the error
                      }]; 
```

# javascript - 如何在Javascript中的变量中添加单引号？

> ID：10787393
> 
> 赞同：16
> 
> 时间：2012-05-28T15:57:56.940
> 
> 标签：javascript, quotes

我有`var str`如下变量：

```
var str = <option value="1">tea</option>; 
```

我想做如下

```
var quote_str = '<option value="1">tea</option>;' 
```

有没有人可以帮助我？提前致谢！

**编辑：**

我已经尝试了以下代码，但是它不正确。

```
var quote_str =  'str'; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-28T16:00:07.177

我认为您希望在字符串文字之外使用分号：

```
var quote_str = '<option value="1">tea</option>'; 
```

如果您的意思是您还希望在字符串中使用撇号字符，则可以使用`\'`将撇号放在由撇号分隔的字符串中：

```
var quote_str = '\'<option value="1">tea</option>\''; 
```

您还可以使用引号来分隔字符串。那么你不必转义撇号，但你必须转义引号：

```
var quote_str = "'<option value=\"1\">tea</option>'"; 
```

如果你已经有一个字符串，并且想在它周围添加撇号，你可以连接字符串：

```
var quote_str =  "'" + str + "'"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T16:01:28.717

用反斜杠转义每个单引号：

```
var quote_str = '\'<option value="1">tea</option>;\'' 
```

…或将字符串用不同类型的引号（即双引号）括起来，但请务必转义内部双引号，以免无意中关闭字符串：

```
var quote_str = "'<option value=\"1\">tea</option>;'" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T16:00:20.730

您可以在 Javascript 中使用`\`. 如果这是你的问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-03T11:58:17.663

我们可以使用反斜杠 () 转义字符来防止 JavaScript 将引号解释为字符串的结尾。

\' 的语法将始终是单引号，而 \" 的语法将始终是双引号，不用担心会破坏字符串。

使用这种方法，我们可以在用 ".

“我们在单引号中安全地使用撇号。” 我们也可以在用 ".

“然后他说，”你好，世界！“”；

# haskell - 使用 -with-rtsopts ghc 选项作为编译指示

> ID：10787396
> 
> 赞同：10
> 
> 时间：2012-05-28T15:58:09.530
> 
> 标签：haskell, runtime, stack-overflow, ghc, pragma

我正在尝试解决 Haskell 中的算法难题，为此我需要一个相当大的数据结构。然而，我提交解决方案的问题解决站点不使用任何运行时选项来允许更大的堆栈，但我听说我可以使用编译器选项作为编译指示。我尝试在我的代码中使用以下编译指示：

```
{-# OPTIONS_GHC -O2 -rtsopts -with-rtsopts=-K32m #-} 
```

然后我用`ghc --make algo.hs`. 但是，当我在我的机器上运行一些大型测试时，程序会因堆栈溢出而崩溃，并报告当前堆栈大小为 8MB。另一方面，当我这样编译时：

```
ghc -rtsopts -with-rtsopts=-K32M --make algo.hs -fforce-recomp 
```

该程序在相同的数据上运行良好，无需添加任何`+RTS`参数。我使用 GHC 7.0.2，但问题解决站点使用的是 6.12.3，所以最好我正在寻找也可以与旧版本一起使用的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T16:32:07.007

请记住，几乎任何类型的原生二进制文件的编译都至少包含两个步骤：实际对象编译（`.hs`-> `.o`）和链接（`.o`、、`.a`- `.lib`> 可执行文件`.exe`///等`.so`）`.dll`

当你用这个编译时：

```
ghc -rtsopts -with-rtsopts=-K32M --make algo.hs -fforce-recomp 
```

...幕后实际发生的事情基本上是：

```
# object compilation - creates algo.o
ghc -c algo.hs -fforce-recomp
# linking - links together algo.o and libHSsomepackage.a into the "algo" binary
# (we assume that `algo.hs` included some module from the package `somepackage`
#  e.g. `Data.Package.Some`)
ghc -rtsopts -with-rtsopts=-K32M -o algo -package somepackage algo.o 
```

即该`--make`选项告诉 GHC 在链接结果之前自动编译目标文件，它会为您填补大量空白。请注意各个命令行标志的最终位置。

当您在文件顶部指定该编译指示时，会发生这种情况（使用`ghc --make algo.hs`）：

```
ghc -c algo.hs -rtsopts -with-rtsopts=-K32M
ghc -o algo -package somepackage algo.o 
```

`OPTIONS_GHC`pragma 告诉编译器**在将该特定模块编译为目标文件时**要添加的选项。因为`-rtsopts`是一个**链接器选项**（它告诉 GHC 链接到一组不同的命令行处理内容），所以在编译目标文件时不能指定它。您必须在链接时指定它，并且不能在模块头中指定此类选项。

有两种解决方案：

1.  使用[Cabal](http://www.haskell.org/cabal/)为您构建东西并在您的`.cabal`文件中指定您想要的 GHC 选项
2.  修复您的算法，以便您不需要太多的堆栈空间，例如通过使用尾递归和更严格的折叠。有关更多信息，请参阅[wiki](http://www.haskell.org/haskellwiki/Stack_overflow)。

# php - PHP返回并保留参数

> ID：10787397
> 
> 赞同：0
> 
> 时间：2012-05-28T15:58:11.990
> 
> 标签：php, url, header

我已使用此页面[http://www.binarytides.com/blog/php-redirect-go-back-to-previous-page/](http://www.binarytides.com/blog/php-redirect-go-back-to-previous-page/) 返回

但从

```
http://page.co/test.php?item=26 
```

我发布一些东西到 post.php 然后调用 php Go back 函数但我回到

```
http://page.co/test.php 
```

失去论证路径，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:12:13.700

在您的表单中，将查询字符串填写到操作属性中，如下所示：

```
<form action="?item=26" name="myform">
...
</form> 
```

并在提交后您的 HTTP_REFERER 将包含此查询字符串，因此重定向到它将成功...

编辑：如果表单在页面 post.php 上，使用它就足够了`action="?item=26"`- 当然，您可以并且应该使用 PHP 来记下项目的编号/ID，无论它何时出现......

假设您的项目 ID 存储在变量 $item_id 中 - 那么您的操作将如下所示：`action="?item=<?php echo $item_id; ?>"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:31:14.580

你应该使用会话来处理这样的事情。在发布数据时设置一个会话，你就设置好了。

# android - 如何过滤一些应用程序？

> ID：10787403
> 
> 赞同：1
> 
> 时间：2012-05-28T15:59:02.337
> 
> 标签：android, list, filter, android-applicationinfo

我需要显示一个包含所有已安装应用程序的屏幕。我已经可以这样做了，但是我需要过滤一些系统应用程序。我正在这样做：

```
if((appInfo.flags & ApplicationInfo.FLAG_SYSTEM) == 1) 
```

这可行，但问题是它隐藏了系统、视频播放器和录音机等应用程序。但是，我也需要这些应用程序出现。问题是，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:12:08.757

您必须通过它们的进程名称手动过滤它们，例如：

`if(appInfo.packageName().equals("com.android.soundrecorder"))`

如果这不起作用，请发布更多代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T20:17:40.770

如果一个应用程序是一个非系统应用程序，它必须有一个启动意图，通过它可以启动它。如果启动意图为空，则它是一个系统应用程序。

系统应用示例：“com.android.browser.provider”、“com.google.android.voicesearch”。

对于上述应用程序，当您查询启动 Intent 时，您将获得 NULL。

```
PackageManager pm = getPackageManager();
List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
for(ApplicationInfo packageInfo:packages){
    if( pm.getLaunchIntentForPackage(packageInfo.packageName) != null ){
                String currAppName = pm.getApplicationLabel(packageInfo).toString();
               //This app is a non-system app
    }
    else{
        //System App
    }
} 
```

# java - 使用 Java 监听 Thread 中的传入流

> ID：10787409
> 
> 赞同：0
> 
> 时间：2012-05-28T15:59:40.933
> 
> 标签：java, multithreading, sockets, vlc, interrupt

所以在这个阶段我有一个服务器和一个客户端，它们每个都有输入和输出流。

我正在使用 VLC 包装器实现视频流媒体。基本上，当我在客户端选择一个视频时，它会发送一个服务器应该期望接收的对象字符串。（视频文件/commentWrite/ratingWrite）。它会在选择视频时发送所有这三个对象，以便更新流、更新评论框和评级框。

现在的问题是，当我需要发送这些标头并接收数据时，我必须使用类似的东西：

```
 replyToServer.writeObject("videoFile");
        replyToServer.writeObject(selectedVideo);       

        //get comments
        listening();

        //get rating
        listening(); 
```

因此，通过预先知道您期望的许多回复来进行硬编码。此外，如果您想在客户端工作的任何时候从服务器接收一些东西，但是您不能使用简单的 while 循环来检查 listener() 函数，因为它会阻塞所有其他功能。

PS。侦听器的结构如下：

```
public void listening() throws IOException, ClassNotFoundException {
    String mode = null;
            // blocks the process till gets the output.
        mode =  (String) inputFromServer.readObject();
        System.out.println("Mode Received:" +mode);

    if (mode.equals("videoList")) {
        getListFromSocket();
    } else if [.....] 
```

**所以......**所以我明白它可以通过使用线程来完成。*我并没有真正使用 Java 做过很多线程，但是是否可以在(String) inputFromServer.readObject()*上进行某种中断；或*inputFromServer.available()*所以一旦它看到流上有东西它就跳转到 listener() 函数？

更新：

通过使用 lxx 代码，我注意到我收到的 null 异常是由于更新了 gui。我在那个监听（）中有一个函数 updateComments；。当我看到评论等时，一切似乎都运行良好。但它仍然在控制台中显示那些空异常......

```
 public void updateComments(List<Comment> commentList) {

    commentLabel.setText("<html><div style='width:130px; border: 1px solid black; list-style-type: none; text-align:left;'>");
    if (commentList.size() == 0) {

         commentLabel.setText(commentLabel.getText()+"<font style='font-family: Century Gothic, sans-serif;  font-weight:normal; color:#444;  font-size:9px;'>No comments...</font><br>");

    } else {

    for (Comment tempComment : commentList) {

         commentLabel.setText(commentLabel.getText()+"<div style='margin:3px;'><font style='font-family: Century Gothic, sans-serif;  font-size:9px; color:#333;'>"+tempComment.getUser()+":</font><br>");
         commentLabel.setText(commentLabel.getText()+"<font style='font-family: Century Gothic, sans-serif; font-weight:normal; font-size:8px;'>"+tempComment.getText()+"</font><br>");
         commentLabel.setText(commentLabel.getText()+"<font style='font-family: Century Gothic, sans-serif; font-weight:normal; font-size:7px;'><i>"+tempComment.getDate()+"</i></font></div><hr>");
    }

    }
     commentLabel.setText(commentLabel.getText()+"</div></html>");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:10:31.427

为什么不将侦听（）或调用侦听（您的阻塞操作）的循环放在线程中：

```
new Thread(new Runnable() {

    @Override
    public void run() {
        listening();

    }

}).start(); 
```

这样，阻塞操作在一个单独的线程中，您的主代码继续正常执行。

# jpa - 如何使用 EntityManager 注入调用 dbms_application_info

> ID：10787410
> 
> 赞同：1
> 
> 时间：2012-05-28T15:59:41.603
> 
> 标签：jpa, cdi

我们正在使用 Oracle 数据库构建 Java EE / JPA / CDI 应用程序。数据模型（我们无法更改）通过使用视图和 client_info 部分实现安全性......类似于......

```
create view the_view
as select * 
from the_table
where organization_id = USERENV('CLIENT_INFO') 
```

其中 userenv('CLIENT_INFO') 基本上是通过调用设置的

```
dbms_application_info.set_client_info(11); 
```

现在，我们有一系列无状态 Bean，它们基本上注入 Persistence Context 并执行查询（本地查询和常规 POJO），我们需要一种方法将客户端信息（我们可以从安全上下文中获取）注入 PersistenceContext，然后再进行调用 EntityManager

简而言之，我需要能够调用它..

```
@PersistenceContext 
EntityManager em;

@Inject
UserInfo userInfo;

public TheView getTableData(long id) {
    // At this point security Information should be set.. 
    // Call the query
    return em.find(TheView.class, id);

} 
```

无需手动调用 setClientInfo() ..

这样做的一种方法可能是使用拦截器并注释该方法并在那里进行调用（假设我可以掌握该方法将使用的 PersistenceContext ..）.. 这甚至可以工作吗？

还有其他方法吗？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:19:18.573

您所写的拦截器方法听起来非常合适。

我不是 100% 确定我是否正确理解了您的要求，但将授权逻辑与实际业务逻辑分离似乎是一个好主意，以便能够编写如下内容：

...

```
@IsEditor("someMoreData")
public X getData() {
 ...
} 
```

`IsEditor`是一个拦截器，将封装相关的数据库查找。

Seam Security 作为一个独立的 CDI 模块，带有几个概念（和实现），您一定要[检查一下](http://docs.jboss.org/seam/3/latest/reference/en-US/html/security-authorization.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:36:26.420

如果您使用的是 EclipseLink，这里有一些关于将 EclipseLink 与 Oracle VPD 结合使用的信息，看起来很相似。

从本质上讲，您可以使用事件来执行您的调用。

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated#Oracle_Virtual_Private_Database_.28VPD.29](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching/Shared_and_Isolated#Oracle_Virtual_Private_Database_.28VPD.29)

# android - 在 Android 应用程序启动时隐藏按钮

> ID：10787411
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:59:51.990
> 
> 标签：android, user-interface

我有一个`MenuView ViewGroup`封装了我界面的所有按钮。在应用程序启动时，所有按钮都通过 定位`button.layout()`。然后我隐藏了所有按钮，只有一个例外：菜单按钮。当我按下菜单按钮时，会显示所有其他按钮（通过缩放动画）。

现在的问题是：通过 定位按钮时`button.layout()`，它们是可见的。所以几乎 1 秒所有按钮都显示在应用程序启动时。

我怎样才能避免这种情况？

我的按钮代码：

```
public class CircleButton extends Button {

    static final int StateDefault = 0;
    static final int StateFocused = 1;
    static final int StatePressed = 2;

    private Bitmap mBitmapDefault;

    private String mCaption;
    protected int radius;
    protected int color = 0xff000000;
    private Typeface font1;
    private boolean visible = true;
    private int savedLeft, savedTop;
    // indicates whether the button is visible when the menu is rendered
    public boolean visibleInMenu = true;
    private Paint paint;
    private static String TAG = "CircleButton";

    public int getRadius(){
        return radius;
    }

    public CircleButton setRadius(int radius){
        this.radius = radius;
        this.setWidth(2*radius);
        this.setHeight(2*radius);
        return this;
    }

    public CircleButton setColor(int color){
        this.color = color;
        return this;
    }

    public CircleButton setCaption(String caption){
        mCaption = caption;
        return this;
    }
    public CircleButton(Context context) {
        super(context);
        init(context);
    }

    public CircleButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public CircleButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    private void init(Context context) {
        setClickable(true);
        setBackgroundColor(0x00000000);

        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        paint.setStyle(Paint.Style.FILL);
        font1 = Typeface.createFromAsset(context.getAssets(), "fonts/Bebas/BEBAS___.ttf");
        mCaption = "Caption";
        this.setRadius(45);
        this.setTextSize(18);

        setOnClickListener(onClickListener);
        setOnTouchListener(onTouchListener);
    }

    public void setVisibility(int visibility) {
        if(visibility == GONE){
            this.visible = false;
        }else{
            this.visible = true;
        }
        super.setVisibility(visibility);
    }
    /**
     * draws the normal button (without rollover)
     * @param canvas
     */
    protected void drawDefault(Canvas canvas){
        //canvas.drawARGB(255, 255, 0, 0);
        Paint paintText = new Paint();
        paintText.setAntiAlias(true);
        paintText.setTextSize(this.getTextSize());
        paintText.setColor(0xffffffff); // white
        paintText.setTypeface(this.font1);

        Rect bounds = new Rect();
        //Paint textPaint = this.getPaint();
        paintText.getTextBounds(mCaption,0,mCaption.length(),bounds);

        float left = (float) (2*radius-bounds.width())/2;
        float top = (float) radius+bounds.height()/2;
        //Log.v("Button","bounds:"+bounds.width()+"x"+bounds.height());
        //Log.v("Button","this.getWIdth:"+2*radius);
        // create the Drawing Tool (Brush)
        Paint paint = new Paint();
        paint.setAntiAlias(true); // for a nicer paint

        paint.setColor(color);
        paint.setStrokeWidth(1);
        paint.setStyle(Style.FILL);

        Path path = new Path();
        path.addCircle(radius, radius, radius, Path.Direction.CW);
        canvas.drawPath(path, paint);

        canvas.save(); 
        canvas.rotate(-45,this.getRadius(),this.getRadius());
        canvas.drawText(mCaption, left, top, paintText);
        canvas.restore();
    }

    protected Bitmap getDefaultBitmap(){
        if(mBitmapDefault == null){
            mBitmapDefault = Bitmap.createBitmap(2*radius, 2*radius, Config.ARGB_8888);
            Canvas canvas = new Canvas(mBitmapDefault);
            this.drawDefault(canvas);
            return mBitmapDefault;
        }
        return mBitmapDefault;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        //Log.v("Button","onDraw(): "+this.getWidth()+"x"+this.getHeight());
        super.onDraw(canvas);
        canvas.drawBitmap(this.getDefaultBitmap(), 0, 0, paint);
        //super.onDraw(canvas);
        //canvas.drawBitmap(this.getDefaultBitmap(), new Rect(0, 0, this.radius*8, this.radius*8), new Rect(0,0, this.radius*2, this.radius*2), null);
    }

    public void recycle() {
        if(mBitmapDefault != null){
            mBitmapDefault.recycle();
            mBitmapDefault = null;
        }
    }

    public void hide(){
        this.hide(true);
    }
    public void hide(boolean withAnimation){
        if(this.visible == true){
            savedLeft = getLeft();
            savedTop = getTop();

            ScaleAnimation anim = new ScaleAnimation(1, 0, 1, 0, this.getRadius(), this.getRadius());
            anim.setDuration(300);
            anim.setFillAfter(true);
            anim.setAnimationListener(new AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {}
                @Override
                public void onAnimationRepeat(Animation animation) {}

                @Override
                public void onAnimationEnd(Animation animation) {
                    visible = false;
                    layout(0, 0, 0, 0);
                }
            });
            this.startAnimation(anim);

        }

    }

    public void show(){
        if(this.visible == false){
            this.setVisibility(VISIBLE);
            OvershootInterpolator inter = new OvershootInterpolator();
            ScaleAnimation anim = new ScaleAnimation(0, 1, 0, 1, this.getRadius(), this.getRadius());
            anim.setDuration(300);
            anim.setInterpolator(inter);
            anim.setFillAfter(true);
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) { }

                @Override
                public void onAnimationRepeat(Animation animation) { }

                @Override
                public void onAnimationEnd(Animation animation) {
                    visible = true;

                }
            });
            this.startAnimation(anim);

            this.layout(this.savedLeft, this.savedTop, this.savedLeft+2*this.radius, this.savedTop+2*this.radius);
        }
        this.visible = true;
    }

    public CircleButton setOnClickCallback(OnClickListener l) {
        super.setOnClickListener(l);
        return this;
    }
    private OnClickListener onClickListener = new OnClickListener() {
        @Override
        public void onClick(View arg0) {

        }
    };

    private OnTouchListener onTouchListener = new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            //Log.v("Button","onTouch()");
            if(event.getAction() == MotionEvent.ACTION_DOWN){
                OvershootInterpolator inter = new OvershootInterpolator();
                ScaleAnimation anim = new ScaleAnimation(1, (float) 1.5, 1,(float) 1.5, CircleButton.this.getRadius(), CircleButton.this.getRadius());
                anim.setInterpolator(inter);
                anim.setDuration(200);
                anim.setFillAfter(true);
                CircleButton.this.startAnimation(anim);
            }else if(event.getAction() == MotionEvent.ACTION_UP){
                ScaleAnimation anim = new ScaleAnimation((float) 1.5, 1, (float) 1.5, 1, CircleButton.this.getRadius(), CircleButton.this.getRadius());
                anim.setDuration(300);
                anim.setFillAfter(true);
                CircleButton.this.startAnimation(anim);
            }
            return false;
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:26:49.490

在对象上使用 [setVisibility(int visibility)](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)方法以使用 VISIBLE、INVISIBLE 或 GONE 之一的参数可见性隐藏它：

## 消失了

此视图是不可见的，并且它不占用任何空间用于布局目的。与 setVisibility(int) 和 android:visibility 一起使用。常数值：8 (0x00000008)

## 无形的

这个视图是不可见的，但它仍然占用空间用于布局。与 setVisibility(int) 和 android:visibility 一起使用。常数值：4 (0x00000004)

## 可见的

这个视图是可见的。与 setVisibility(int) 和 android:visibility 一起使用。常数值：0 (0x00000000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:15:14.577

尝试将`android:visibility="invisible"`这些按钮放在布局 xml 中。

# c# - WPF 列表框选择已更改

> ID：10787415
> 
> 赞同：4
> 
> 时间：2012-05-28T15:59:59.200
> 
> 标签：c#, wpf, listbox

我目前有`Entity`一个集合属性。我想知道为什么只有一次会触发并且一旦我尝试选择之前选择的项目`SelectionChanged`就不会再次触发。`SelectionChanged`

**主窗口视图模型**

```
 public MainWindowViewModel()
    {
        var a = new List<Test>();

        a.Add(new Test() { Name = "Leo", Test1 = new List<Test1> { new Test1() { Content = "aaa"} } });
        a.Add(new Test() { Name = "2", Test1 = new List<Test1> { new Test1() { Content = "bbb"} } });
        a.Add(new Test() { Name = "Le33o", Test1 = new List<Test1> { new Test1() { Content = "ccc"} } });
        A = a;
    }

    private List<Test> _a;
    public List<Test> A
    {
        get { return _a; }
        set { _a = value; OnPropertyChanged("A");}
    }

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
    public event PropertyChangedEventHandler PropertyChanged; 
```

**我的主窗口**

```
public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new MainWindowViewModel();
        }
        private void Test(object sender, SelectionChangedEventArgs e)
        {
        } 
```

**我的列表框结构**

```
public class Test
{
    public List<Test1> Test1 { get; set; }
    public string Name
    {
        get;set;
    }
}

public class Test1
{
    public string Content { get; set; }
} 
```

我选择第一个对象，事件触发，我选择第二个对象，事件触发，我选择第一个对象，事件不触发，我选择第三个对象，事件触发。似乎它只触发和调用一次事件。

我的`XAML`代码：

```
<ItemsControl x:Name="Lists" ItemsSource="{Binding A}" Grid.Row="1">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Name}" FontWeight="Bold" 
                                                        Style="{StaticResource DefaultTextBlockStyle}" />

                    <ListBox  SelectionChanged="Test"  ItemsSource="{Binding Test1}"
                                 Margin="5,0,0,0" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Content}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

测试方法只是一个空方法我只想每次更改时都打断点。

```
 private void Test(object sender, SelectionChangedEventArgs e)
    {
    } 
```

**更新 1**：我试图在一个简单的 WPF 应用程序中重现这一点，似乎 ListBoxItem 正在将 IsEnabled 设置为 false，但我窥探了它并启用了所有控件。它只是得到一个看起来像禁用的灰色背景。将尝试进一步调查。

**更新 2**：当您更改项目时，似乎没有取消设置 ListBoxItem IsSelected 属性。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-20T07:36:16.067

要回答你的问题...

> *我想知道为什么 SelectionChanged 只会触发一次，并且一旦我尝试选择先前选择的项目，它就不会再次触发 SelectionChanged。*

... 边做边学

打开一个新的 WPF 项目添加 2 个列表框为两者创建一个 SelectionChanged 事件并向每个列表框添加一些项目

让我们提一下它现在看起来像这样

```
 <ListBox Height="100" Name="listBox1" Width="120" SelectionChanged="listBox_SelectionChanged"/>
    <ListBox Height="100" Name="listBox2" Width="120" SelectionChanged="listBox_SelectionChanged"/> 
```

.

```
 var list = new List<string>();
        list.Add("Element1");
        list.Add("Element2");
        list.Add("Element3");
        list.Add("Element4");

        listBox1.ItemsSource = list;
        listBox2.ItemsSource = list; 
```

如果你现在`Element1`在`listBox1`你的`listBox_SelectionChanged`get triggert 中选择`Element2`，`listBox2`那么你的`listBox_SelectionChanged`get triggert 再次被选中。

如果你仔细看看你的，`listBox1`你会发现你的`Background`背后`Element1`是灰色的，这意味着它被选中，但没有焦点。如果您现在再次选择 `Element1`，`listBox1`则`listBox_SelectionChanged`不会触发，因为选择不会改变，只有 Focuse 会改变。

这与您的代码中的“问题”完全相同，因为您`DataTemplate`的想法与我们所做的相同，因为我们只是自动添加了 2 个列表框

作为简单而肮脏的解决方法，您可以使用以下代码

```
 private object seletedItem;
    private ListBox ItemsHost;

    private void Test(object sender, SelectionChangedEventArgs e)
    {
        var buff = sender as ListBox;

        if (seletedItem != null)
            if (ItemsHost != buff)
                ItemsHost.SelectedItem = null;

        ItemsHost = buff;

        if (e.AddedItems.Count > 0)
            seletedItem = e.AddedItems[0];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T16:41:53.187

我发现的简单解决方案是`selectedItem`在`null`事件处理程序中进行。

```
private void tempList_SelectionChanged(object sender, SelectionChangedEventArgs e)

{    
    Card selectedOffer = (TempList.SelectedItem as Card);
    if (selectedOffer != null)
    {
        MessageBox.Show(selectedOffer._id);
    }
    ListBoxNeeded.SelectedItem = null;
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-05-28T16:28:14.347

选择同一个项目不是一个 SelectionChanged 事件。选择没有改变。

问题陈述不清楚。

把它分解。这对我有用。如果我第二次选择任何项目，第 3 次，第 4 次事件触发。

OP 断言，如果它是列表中的列表，则它不起作用。仍然对我有用。

```
 public MainWindow()
        {
            this.DataContext = this;
            InitializeComponent();
        }

        public List<ListList> ListList1 
        {
            get { return new List<ListList>{new ListList("name1", new List<string> { "one", "two", "three" })}; } 
        }

        private void Test(object sender, SelectionChangedEventArgs e)
        {
            ListBox lb = (ListBox)sender;
            System.Diagnostics.Debug.WriteLine(lb.SelectedItem.ToString());
        }

        public class ListList
        {
            public string Name { get;  set; }
            public List<string> Values { get;  set; }
            public ListList(string name, List<string> values) { Name = name; Values = values; }
        }

<ListBox ItemsSource="{Binding Path=ListList1}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <ListBox  SelectionChanged="Test" ItemsSource="{Binding Path=Values}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" />
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

# drupal - 从 drupal 6 升级到 drupal 7 时缺少管理菜单

> ID：10787419
> 
> 赞同：1
> 
> 时间：2012-05-28T16:00:07.203
> 
> 标签：drupal, drupal-7

我刚刚将我的网站从 Drupal 6 升级到了 drupal 7。由于某种原因，应该跨越页面顶部的新管理菜单根本没有显示。我按照升级路径的指示没有成功。

我也尝试重新上传站点/所有和主题目录，但这并没有改变任何东西。我也运行了 update.php。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:21:15.813

您是否启用了核心模块工具栏？如果没有，请转到*您的站点*/?q=admin/modules 并启用它。此外，如果您不使用 Garland 或其他一些通用主题，请启用一个用于管理用途。您的主题可能会覆盖工具栏应该显示的区域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T22:11:55.710

我刚刚遇到了同样的问题，不仅仅是顶部菜单没有显示，外观和模块链接根本无法访问。

原来这是因为我用来登录的用户帐户不是第一个用户，也就是超级用户。由于我没有“第一个”管理员用户的密码，我不得不将我的用户帐户的 UID 更改为 1。您可以使用 UID = 1 创建一个新用户

INSERT INTO users (uid, name, pass) VALUES ('1', 'yourname', md5('yourpassword'));

# c - 如何将空白数组排序到顶部以便我可以删除它们

> ID：10787424
> 
> 赞同：1
> 
> 时间：2012-05-28T16:00:15.503
> 
> 标签：c, arrays

```
int id_swap()
{
    char tempstring[15];

    strcpy(tempstring, id[index+1]);
    strcpy(id[index+1], id[index]);
    strcpy(id[index], tempstring);
}

int delete_student()
{
    int found=0;
    char id_to_find[10];

    printf("Please enter the student ID to delete\n\n");
    scanf("%s", & id_to_find);
    fflush(stdin);
    system("cls");

    for(index=0;index<height_of_array+1;index++)
    {
        if(strcmpi(id_to_find, id[index]) == 0)
        {
            found=1;
            id_swap();
            system("cls");
            printf("Student deleted");
            height_of_array = height_of_array--;
        } 
```

好的，这是我的代码的一部分。一个简单的例子

我对已经在程序中的学生进行排序，所以它会像这样出现，例如

```
Student#1 Chris ID: 1831
Student#2 etc
student#3 etc
student#4 Brian ID: 4432
student#5 etc
student#6 etc 
```

但是，例如，当我尝试删除说 Brian 时，它会删除它，但它看起来像这样

```
student#1 ID:
Student#2 Chris ID:1831
Student#3 etc 
```

有没有办法将该空白数组移动到最后一个位置，这样我就可以减少我的“Height_of_array”，以便可存储的学生数量减少 1 以反映删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:08:16.700

您的代码存在一些问题：跳到我身上：

```
 fflush(stdin); 
```

永远不要那样做。仅刷新输出流。

```
height_of_array = height_of_array--; 
```

是未定义的行为，您的意思是：

```
height_of_array--; 
```

# eclipse - struts 2 Action 类 [MyClassAction] 未找到

> ID：10787426
> 
> 赞同：0
> 
> 时间：2012-05-28T16:00:26.237
> 
> 标签：eclipse, tomcat, struts2

我正在使用 struts2 开发一个 Web 应用程序。

我已将一项操作的名称 OldNameAction.java 更改为 NewNameAction.java。

现在，当我使用 tomcat 运行应用程序时，出现以下错误：

```
Action class [oldNameAction] not found - action - file:/C:/path/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/projectname/WEB-INF/classes/struts.xml:155:98
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:374)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:329)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:429)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:239)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:152)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:203)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4624)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5281)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
28.05.2012 17:41:04 org.apache.catalina.core.StandardContext startInternal 
```

我的 struts.xml 文件如下所示：

```
<action name="getSimulation" class="newNameAction" method="getSimulation">
            <result name="dnf_andOr">dnf_andOr_simulator.jsp</result>

        </action> 
```

和 applicationContext.xml：

```
<bean id="newNameAction" class="com.org.action.NewNameAction" scope="prototype">
    </bean> 
```

我使用了“clean tomcat workdirectory”和“clean”选项，但没有成功。任何想法？任何想法，为什么它保留新名称？

# html - 顶部标题跨越网站的整个宽度

> ID：10787437
> 
> 赞同：2
> 
> 时间：2012-05-28T16:01:13.990
> 
> 标签：html, css

只是建立一个网站，我想做一些我还没有遇到过的事情。当站点顶部没有边距但主要内容有边距时，与[本站点](http://surreypaintingdecoratingservices.co.uk/)顶部相同。

有人可以指出我正确的方向吗？

目前我已经给了它：

```
<div id="header"><h1>Header</h1></div> 
```

只是有点卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:06:07.237

默认情况下，body 和/或 html 元素将具有边距和/或填充（具体值取决于浏览器）。

如果您删除它们，那么作为主体子级的任何 div（如果您不应用限制宽度的 CSS）将填充窗口的宽度。

```
html, body {
    margin: 0;
    padding: 0;
} 
```

然后，您可以在主要内容上设置边距。

```
#main_content {
    margin: 5px 10%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:06:19.007

如果我正确理解您的问题，这就是您需要在 css 中执行的操作：

```
body {
  margin:0px;
  padding: 0px;
} 
```

就这样。

# email - Extjs 工具栏上的电子邮件按钮

> ID：10787438
> 
> 赞同：1
> 
> 时间：2012-05-28T16:01:17.153
> 
> 标签：email, extjs, toolbar

我在添加 mailto: 到网格面板工具栏的链接时遇到问题。

我已经尝试修改对象的 HTML 配置以及通过处理程序，但都没有打开新的电子邮件。

```
{
text   : 'Support', 
html: '<a href="mailto:email@xx.com" target="_blank">Support</a>'
}

{
text   : 'Support', 
handler: function() {
   return '<a href="mailto:email@xx.com">Support</a>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:07:22.977

`handler:`用于创建按下按钮的处理函数。要使您的 mailto 链接正常工作，您应该重定向到以下`mailto:email@xx.com`地址：

```
handler: function() {
    window.location = 'mailto:email@xx.com';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:05:55.887

我会按照@webbandit 的建议做，除非我会使用`window.open('mailto:address.com')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T18:46:34.237

如果你使用的是 ExtJS 4.x，你可以在 href 中定义它：

```
{
    text : 'Support', 
    href : "mailto:email@xx.com"
 } 
```

`hrefTarget="_blank"`是默认值，但最好将其设置为`_self`：

```
{
    text : 'Support', 
    href : "mailto:email@xx.com",
    hrefTarget: "_self"
 } 
```

# c# - Windows Phone SDK - ListBox 按下效果

> ID：10787439
> 
> 赞同：0
> 
> 时间：2012-05-28T16:01:19.377
> 
> 标签：c#, windows, windows-phone-7

我`ListBox`在我的`Windows Phone`应用程序中有一个，我想让一行的downstate 有一个' *pressed* ' 状态，就像window phone OS 应用程序菜单一样。*即*，当用户按下元素左侧时，`listbox`元素左侧向下移动，当用户按下元素右侧时，右侧向下移动。

**有没有人看到任何方法来复制这个？**我用谷歌搜索了一堆，没有太多运气。

干杯，布雷特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:05:58.443

它被命名为[倾斜效应](http://msdn.microsoft.com/en-us/library/ff941094%28v=vs.92%29.aspx)，可以很容易地完成，例如。使用 Windows Phone 工具包（[教程](http://windowsphonegeek.com/articles/Silverlight-for-WP7-Toolkit-TiltEffect-in-depth)）

# ruby - ERROR URI::InvalidURIError: bad URI(is not URI?) because of browsers

> ID：10787440
> 
> 赞同：4
> 
> 时间：2012-05-28T16:01:20.827
> 
> 标签：ruby, http, browser, sinatra, uri

我的一些网址上有一些特殊字符。例如：

`http://blabla.com/title/?t=burası`

当我从其他页面提供指向该页面的链接时，我使用：

```
URI.encode(s) 
```

这产生了这个链接：

```
/title/?t=buras%C4%B1 
```

虽然到目前为止一切正常，但我在页面上还有另一个表单，其中包含编码的 url。但是当用户访问时浏览器倾向于解码我编码的 url`/title/?t=buras%C4%B1`并将 url 转换为`/title/?t=burası`. 问题从这里开始，因为当用户尝试从“burası”页面上的表单发送内容时，sinatra 给出了错误：

`ERROR URI::InvalidURIError: bad URI(is not URI?): http://localhost:3000/title/?t=burası`

我认为这是因为 HTTP 请求的“引荐来源”字符串，但只要浏览器倾向于自动解码字符串，我就找不到任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T01:31:05.463

您应该在 FORM 方法中对 URI 进行编码。

例如，让您的 HTML FORM 动作看起来像这样：

```
<form action="/title/?t=buras%C4%B1" method="post"> 
```

这能为你解决吗？

（编辑：感谢 x1a4 的更正——当然你是对的！:)

# node.js - 如何保留查询字符串中的类型

> ID：10787449
> 
> 赞同：1
> 
> 时间：2012-05-28T16:01:49.400
> 
> 标签：node.js, get, query-string, http-post

我试图将一个使用 json 数据的 API 放在一起，但我在保留变量类型时遇到了问题。

警告：我正在使用 Node.js

给定数据：

```
{
  id: "string",
  data: [
    {input: [0,1,0], output: [1,1]},
    {input: [1,0,0], output: [1,0]}
  ]
} 
```

当我使用该数据发出 jquery ajax 发布请求时，它被传输为：

```
data[0][input][]    0
data[0][input][]    1
data[0][input][]    0
data[0][output][]   1
data[0][output][]   1
data[1][input][]    1
data[1][input][]    0
data[1][input][]    0
data[1][output][]   1
data[1][output][]   0
id                  string 
```

或者：`id=string&data%5B0%5D%5Binput%5D%5B%5D=0&data%5B0%5D%5Binput%5D%5B%5D=1&data%5B0%5D%5Binput%5D%5B%5D=0&data%5B0%5D%5Boutput%5D%5B%5D=1&data%5B0%5D%5Boutput%5D%5B%5D=1&data%5B1%5D%5Binput%5D%5B%5D=1&data%5B1%5D%5Binput%5D%5B%5D=0&data%5B1%5D%5Binput%5D%5B%5D=0&data%5B1%5D%5Boutput%5D%5B%5D=1&data%5B1%5D%5Boutput%5D%5B%5D=0`

我需要做的是在服务器端解码数据，但***我的数组中的所有值 data 都被转换为 strings***。

是否有保留值类型的技术，即：“string”或“int”等？

我目前正在使用`qs`npm 上的模块来解析我的 POST 请求正文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T04:01:34.400

JQuery 将`data`AJAX 请求选项中传递的任何对象序列化为`application/x-www-form-urlencoded`格式（就像查询字符串一样）。您想要的是`JSON.stringify()`您的对象并将结果字符串作为 传递`data`，同时将 设置`Content-Type`为前面的答案提到的。

请记住，该`dataType`选项指定 jQuery 应该如何处理对请求的*响应*，而不是如何编码请求的主体（我已经被这个烧毁了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:06:35.097

由于它是 JSON 服务器，请在 POST 请求中设置 Content-Type: application/json，这样您将解析对象而不是字符串。该对象将保留数据类型。在服务器上使用 req.is('application/json') 以确保请求的类型为 'application/json'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T06:09:30.397

这是一个可行的解决方案，希望对您有所帮助。

```
$.ajax({
    type: 'POST',
    data: JSON.stringify(data),
    contentType: 'application/json',
    url: 'http://localhost:3000/endpoint',                      
    success: function(data) {
        //TODO: do something with data   
    }
}); 
```

# ssl - 自己为域的子域颁发 SSL 证书 我有 SSL 证书

> ID：10787452
> 
> 赞同：3
> 
> 时间：2012-05-28T16:02:21.510
> 
> 标签：ssl, openssl, certificate, ssl-certificate

我想这是不可能的，但如果是这样，我想知道为什么。

假设我从周围的官方证书颁发机构之一获得了 example.com 的 SSL 证书。假设我正在运行 a.example.com 和 bcdexample.com 并希望为它们提供 SSL 证书。

我可以使用 example.com 证书自己为 a.example.com 和 bcdexample.com 颁发证书吗？它们会被用户的浏览器识别吗？如果不是，为什么不呢？

（我猜测它无法完成是因为它会破坏非常有利可图的通配符证书商业模式，不是吗？）

**澄清：**我不能使用我获得官方证书的密钥对充当“自签名”证书颁发机构，并简单地将我的官方证书添加到验证链中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:10:53.943

您不能使用您的证书颁发其他证书，因为证书的用途已编码在您的证书中，并且“证书颁发机构”当然不包含在该列表中。

Web 浏览器检查从您的证书开始的“证书链”、用于签署它的证书、该证书的签署者等。

您的证书必须与当前用例（主要是“识别网站”）匹配，并且所有签名证书都必须包含“证书颁发机构”标志。浏览器必须知道最后一个证书（根证书）。

正如您已经猜到的那样，通配符证书可能对您的情况有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:09:22.210

你是对的，你不能从`certificate`. 您需要[证书颁发机构](http://en.wikipedia.org/wiki/Certificate_authority)来颁发证书。

证书颁发机构的全部意义在于它们是受信任的第 3 方。大多数浏览器默认信任像 Verisign 这样的 CA，因此您不必手动接受来自它们的证书。他们拥有所谓的*可信根证书*。

如果您创建自己的证书颁发机构并开始分发证书，那么 Web 浏览器将不认识您并且不会信任您。将提示用户。

# .net - 快速使用 BlockingCollection 导致 UI 线程卡住？

> ID：10787456
> 
> 赞同：0
> 
> 时间：2012-05-28T16:02:44.590
> 
> 标签：.net, multithreading, c#-4.0, thread-safety, blockingcollection

我即将编写一个从 TCP 端口获取流数据的应用程序，并对它们进行一些实时计算。到目前为止一切都很好，但是当生产者线程开始对数据块进行一些打包（参见代码）时，用户界面和选框进度条会卡住（对于不规则的短时间段）。

```
 void Produce()
    {
        try
        {
            while (true)
            {
                foreach (Chunk _chunk in bcPort)
                {
                    if (_ThreadCanceler.IsCancellationRequested) break;
                    Chunk chunk = bcPort.Take();
                    chunk.TimeTracker = new Stopwatch();  
                    chunk.SegmentId = iSegmentId;
                    if (chunk.Channel + 1 == iChannels) iSegmentId++; // last channel, raise segment id.                     
                    iPrevChannel = chunk.Channel;
         //         _ProcessAndJoin.EnqueueTask(chunk, _ThreadCanceler);                       
                    iChunksProduced++;
                    _LogWriter.WriteMessage("Task " + Task.CurrentId.ToString() + "(producer): ADDED_ Chunk[" + chunk.Channel + ":" + chunk.Vals.Count.ToString() + ":" + chunk.SegmentId + "] [" + iChunksProduced + "]. " + bcPort.Count + " for takeaway. Thread: " + Thread.CurrentThread.ManagedThreadId.ToString());
                }
                if (_ThreadCanceler.IsCancellationRequested) break;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("ForkAndCrate.cs: Produce(): " + ex.ToString());
        }
    } 
```

我做了很多测试，发现对 BlockingCollection bcPort 的访问似乎是问题所在。bcPort 不断从另一个数据加法器线程获取块，该线程也应该不会影响 ui 线程。所以我不明白以下内容：

1.) 当我使用不同的线程来添加和打包块时，为什么 GUI 会卡住？

2.) 为什么在我使用 BC 存储数据时会发生这种情况？这些线程安全集合不是为了这个特定目的吗？

顺便说一句：Windows 7 ResourceManager 在流式传输期间显示 100% 的 CPU 使用率，每个块包含大约 2000 个浮点值，其中 4 或 5 个每秒涌入。我也禁用了记录器，但没有效果。消费者和评估线程被禁用。

除了 ui 线程，只有一个名为“ReceiveAndSave”的线程从传入的浮点值中生成块（参见代码，方法“Add”）。线程“Producer”正在做一些进一步的打包并将消费者的块排入队列（停用）。

```
 public void Add(short iChannel, float fValue)
    {
        try
        {
            _Benchmark.UpdateRec();  // one value received, update benchmark:
            if (!cdBasin[iChannel].Enqueue(fValue))
            {
                Chunk chunk = new Chunk();
                chunk.Vals = cdBasin[iChannel].ToListDeep;
                chunk.Channel = iChannel;
                bcPort.Add(chunk);
                cdBasin.AddOrUpdate(iChannel, new BoundedQueue<float>(iSegmentSizePerChannel), (key, oldValue) => new BoundedQueue<float>(iSegmentSizePerChannel));
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString(), "Stop", MessageBoxButtons.OK, MessageBoxIcon.Stop);
        }
    } 
```

生产者以 'myThreads[0] = new Thread(Produce); 开始 myThreads[0].Name = "生产"; myThreads[0].Start();'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:19:07.840

它并没有*真正*卡住，你只是给它太多的工作要做。这使得它不再处理它的低优先级任务，响应输入和绘制通知。这确实使它*看起来*像是被卡住了，您的用户肯定会这样认为。

关键是仅以对人眼有意义的速率更新 UI。除了每秒超过 25 次更新的模糊之外，它什么也看不见。如果您将其推送到每秒多达一千次更新，您将获得您描述的行为。所以收集结果并且在足够的时间到期之前不要调用/更新。而且通常将您显示的信息压缩成可消耗的块，以便为用户提供有意义的反馈，每秒显示数百个新项目的列表对任何人都没有用。

# java - 来自java的Powershell进程 - 在某些环境中进程可能“延迟”（不挂起）

> ID：10787457
> 
> 赞同：1
> 
> 时间：2012-05-28T16:02:52.803
> 
> 标签：java, powershell

我们正在创建一堆 PoSH 脚本并从 Java 有序地运行它们（构建一个进程，处理所有可能导致挂起的输入/输出流，然后使用本地管理员权限调用它）。

在我们的一些部署中，我们正面临一个有趣的事件。在跟踪此操作的日志文件时，我们有时会看到相当大的延迟。延迟是**一致**的，时钟为 35 秒：如果在进程构建之前有一个日志列表，并且下一个日志记录是从调用的 PoSH 脚本完成的 -**它们之间的延迟是一致的，为 35 秒。该机器上调用的所有脚本都是一致的。**

这种行为并不一致。我们有几台（不相关的）机器表现出这种行为，但还有许多其他机器表现出 2-5 秒，我们接受这是构建过程的正常时间。

我们的Java进程是32bit的进程，延迟机器大多是Win2K8 server R2的64bit VM。这些虚拟机中的大多数都使用域身份验证和策略（不同客户的不同）。

我们尝试通过各种不同的方法（例如 PSTools）运行 Powershell，但没有真正的发现 - 它总是在几秒钟内启动。比较机器安装也没有给我们带来任何见解。性能似乎也不是问题，尽管我承认我们没有对其进行深入分析，只是仔细查看了任务管理器。

重要的是要提到该过程永远不会挂起 - 它会在启动时快速运行。延迟发生在 PoSH 过程的启动期间。

任何想法、建议或投机方向都将受到欢迎。

谢谢，亚龙

# javascript - 一个函数在 Javascript 中可以存在多长时间？

> ID：10787460
> 
> 赞同：0
> 
> 时间：2012-05-28T16:03:03.783
> 
> 标签：javascript

在 Java 中，函数的最大大小为[65535 字节](http://bugs.sun.com/view_bug.do?bug_id=4262078)。

ECMAScript 中是否有任何指定的限制？

浏览器中的已知限制呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:09:25.870

*在 ECMAScript 规范中对FunctionBody*的最大大小没有明确的限制，据我所知，浏览器中函数声明的最大大小也没有任何记录限制。

许多浏览器确实对字符串长度有大小限制，例如 Chrome 中的 512MB，因此使用`Function`构造函数创建的任何函数肯定不会大于此限制，并且可能相同或类似的限制也适用于已解析代码中的函数。

# visual-studio-2010 - 在 VS.NET 代码编辑器中突出显示当前行

> ID：10787463
> 
> 赞同：0
> 
> 时间：2012-05-28T16:03:33.467
> 
> 标签：visual-studio-2010, visual-studio, text-editor

有没有办法改变当前行的颜色（*那个光标在闪烁*）？

我尝试在“选项 > 环境 > 字体和颜色”中找到这样的选项，但找不到颜色选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:11:23.933

从[Visual Studio 库](http://visualstudiogallery.msdn.microsoft.com/)[中突出显示所有出现的选定单词](http://visualstudiogallery.msdn.microsoft.com/4b92b6ad-f563-4705-8f7b-7f85ba3cc6bb)或[HighlightLine](http://visualstudiogallery.msdn.microsoft.com/5c9fb156-bc4d-40a2-b976-5025fe905c26)。

# qt - Qt：可以使用QString作为异常类的成员吗

> ID：10787465
> 
> 赞同：2
> 
> 时间：2012-05-28T16:03:42.537
> 
> 标签：qt, exception, segmentation-fault, qstring, copy-on-write

我正在开发一个自定义异常，我需要一个 QString 成员。就像是：

```
class MyException
{
private:
    const QString fDescription;

public:
    MyException(QString desc);
};

MyException::MyException(QString desc) : fDescription(desc)
{} 
```

当我尝试使用它时：

```
if (isErrorEncountered)
{
    MyException e(QString("Descriptive message here..."));
    throw e;
} 
```

我得到一个分段错误。症状与此处描述的相似： [Qt QString cloning Segmentation Fault](https://stackoverflow.com/questions/1861964/qt-qstring-cloning-segmentation-fault)

SIGSEGV 源自`QBasicAtomicInt::ref`，来自`QString::QString(const QString &other)`。

在我看来，好像有人试图在复制构造函数中复制无效的 QString。我的理解是，只要有对它的有效引用，QString 就会保留一个指向其内容的指针。如果正在制作 MyException 实例的副本，那么临时堆栈实例是否没有离开范围并且副本应该成功？

当我在`MyException`没有 QString 成员的情况下实现时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:52:56.993

问题的答案是“是的，QString 可以安全地成为异常中的成员”。

我遇到的问题是由于对象，作为 的数据源`fDescription`，有一个错误。它实现了一个getter方法：

```
class Source
{
private: QString fData;
public:  QString GetData(void) { this->fData; }   // There is a missing return
} 
```

当然，此调用的结果是当前驻留在堆栈上的随机值，因此是 SIGSEGV。

QString 的行为与预期一样，并且对它的有效引用，在异常中使用它没有问题。

引发 SIGSEGV 的确切点是离开`try`块的范围，其中正在构造异常的副本（请记住：按值抛出，按引用捕获）。默认复制构造函数尝试创建所有成员的浅表副本，并且无法访问无效的 QString 引用。

# javascript - 使用 jQuery 撤消/返回历史

> ID：10787467
> 
> 赞同：1
> 
> 时间：2012-05-28T16:03:48.157
> 
> 标签：javascript, jquery

我正在开发一个完全基于 jQuery 的自定义网站（我对编码完全陌生，因为这是我目前所知道的唯一编码）。这是我正在为朋友工作的项目的链接，[这里是它的链接](http://hybridimaginations.com/lambada/test.html)。我想让右上角的撤消按钮起作用。

用户单击颜色，然后单击袋子部分，该区域颜色会发生变化。撤消按钮应该撤消当前应用的颜色并逐步返回到以前的颜色。

我还坚持为袋子部分的颜色创建一个摘要，它只显示我选择的所有颜色，而不是袋子上的颜色。

如果有人可以帮助我解决这两件事，那将是一个很大的帮助。在过去的 3 个月里，我一直在研究开发这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:08:16.057

好吧，由于您没有更改 url，因此您无法使用浏览器返回或历史记录功能。我的建议是保留一个包含对象中所有可能值的数组。这样，如果您想返回，您可以执行类似`arr.length-1`获取前一组设置的操作。

# css-float - 为什么左边距跳起来？

> ID：10787470
> 
> 赞同：2
> 
> 时间：2012-05-28T16:04:08.740
> 
> 标签：css-float, margin, css

我正在关注[In Search of the Holy Grail](http://www.alistapart.com/articles/holygrail/)，但无法理解步骤 3 中实际发生的情况。

为了解决这个问题，我禁用了“左”和“右” div 的边距/偏移量。这为您提供了顶部的内容，然后是其他两个元素并排坐在它下面，正如我所期望的那样**[参见 P1]**。

然后，我逐渐将“左”div 的左边距从 0px 减少到 -199px，这再次达到了我的预期**[参见 P2]**。

但是在 -200px（左侧元素本身的宽度）处，它会向上射到顶部**[参见 P3]**，左边缘靠在内容的右边缘。我原以为它会继续走下坡路。

为什么会跳起来？如果没有关于为什么的概念解释，它在规范中的哪里描述了该功能？

**图片：**

# P1

![照片 1](../Images/9307138146fe23f4196affc1d907dc8d.png)

* * *

# P2

![照片 2](../Images/f772cab9185f565a7898c8a5fe5a3088.png)

* * *

# P3

![照片 3](../Images/5866b3835c0ee422734cfe3911eee0e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:56:14.000

请记住，`#content`和`#left`（以及`#right`）都是浮动的。

由于浮动的性质，它们（或它们的内容）可能会重叠。[这在规范的这一部分中得到了](http://www.w3.org/TR/CSS21/visuren.html#floats)很好的描述，并且相当容易理解。如果您将负边距应用于与另一个浮动元素相邻的浮动元素，它将简单地向其左侧移动（类似于具有`left`相对偏移），*超过*其兄弟。

在关于[`float`属性](http://www.w3.org/TR/CSS21/visuren.html#float-position)的部分，您会找到“控制浮动行为的精确规则”的列表。现在，我对浮动模型不是 100% 熟悉，但我认为这些点是相关的：

> 2\. 如果当前框是左浮动的，并且源文档中存在由更早的元素生成的左浮动框，那么对于每个这样的更早的框，当前框的左[外边缘](http://www.w3.org/TR/CSS21/box.html#outer-edge)必须在前一个盒子的右[外边缘](http://www.w3.org/TR/CSS21/box.html#outer-edge)，或者它的顶部必须低于前一个盒子的底部。类似的规则适用于右浮动框。¹
> 
> 7\. 一个左浮动框在其左侧有另一个左浮动框，其右外边缘可能不在其包含块的右边缘的右侧。（松散地说：左浮动可能不会突出在右边缘，除非它已经尽可能地向左。）类似的规则适用于右浮动元素。
> 
> 8、浮箱一定要放在尽可能高的地方。
> 
> 9\. 左浮箱尽量放在左边，右浮箱尽量放在右边。较高的位置优于更左/右的位置。

所以我的猜测是：-200px 的边距，正如你所说的`#left`元素本身宽度的负等价物，导致它一直*向上*和*向右*（而不是向左）浮动并拥抱`#center`本身也是浮动的元素的边缘。由于这个完整的、相等的负边距，两个元素的右边缘相互接触。因此，随着您继续增加（或减少？）负边距，您会看到`#left`元素继续向左移动。

请注意，应用于`#container`元素的填充不与边距交互；即使您删除任一侧或两侧的填充，边距也会以相同的方式交互。

* * *

¹ [另请注意，在规范的链接部分中关于[折叠边距](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)的部分中有一个声明，它描述了负边距的行为，但这无关紧要，因为我们在这里关注的边距是水平的并且属于浮动元素，并且所以永远不会受到崩溃的影响。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:23:13.707

您正在`<h2>`为左右标题使用标签，但在中心您正在使用`<h1>`这就是为什么您有这个问题如果您想解决这个问题做一件事1使用所有`<h2>`标签作为标题，如果您想使用然后应用下面的类

```
h1
{
margin-top:10px;
} 
```

# mysql - 获取所有用户，即使另一个表中没有记录

> ID：10787472
> 
> 赞同：2
> 
> 时间：2012-05-28T16:04:18.630
> 
> 标签：mysql, join

我在这里遇到一个问题：

我有两张桌子：

一张`users`桌子：

```
+----+---------------+----------+
| id | username      | company  |
+----±---------------±----------+
| 1  | John          | 0        |
| 2  | Jack          | 0        |
| 3  | Casimir       | 0        |
±----±---------------±----------± 
```

一张`orders`桌子：

```
+----+---------------+----------+--------+
| id | date          | iduser   | status |
+----±---------------±----------+--------+
| 1  | 2012-05-28    | 1        | 1      |
| 2  | 2012-05-25    | 1        | 1      |
| 3  | 2012-04-28    | 2        | 1      |
| 4  | 2012-03-28    | 1        | 1      |
| 5  | 2012-02-28    | 2        | 0      |
±----±---------------±----------±--------+ 
```

我想要做的是得到这样的结果：

```
+----------+---------------+-------------+
| username | COUNT(order)  | MAX(date)   |
+----------±---------------±-------------+
| John     | 3             | 2012-05-28  |
| Jack     | 1             | 2012-04-28  |
| Casimir  | 0             | NULL        |
±----------±---------------±-------------± 
```

这是我目前的要求：

```
SELECT u.username, COUNT(o.id), MAX(o.date)
FROM users u
INNER JOIN orders ON u.id = o.iduser
WHERE o.status = 1
GROUP BY u.id 
```

这个请求给了我这样的结果：

```
+----------+---------------+-------------+
| username | COUNT(order)  | MAX(date)   |
+----------±---------------±-------------+
| John     | 3             | 2012-05-28  |
| Jack     | 1             | 2012-04-28  |
±----------±---------------±-------------± 
```

如您所见，用户`Casimir`没有显示，因为他没有下订单。请问如何修改我的请求以获得我需要的结果？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:05:46.457

一个`LEFT JOIN`or`LEFT OUTER JOIN`将包括初始表的所有行，包括那些在joined-to表中没有匹配的行

```
SELECT u.username, COUNT(o.id), MAX(o.date)
FROM users u
LEFT OUTER JOIN orders o ON u.id = o.iduser AND o.status = 1
GROUP BY u.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T16:06:37.797

您需要使用 an`OUTER JOIN`而不是当前的`INNER JOIN`.

看看 Jeff 的帖子，看看它们有何不同： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# javascript - Ruby 中的 JavaScript + DOM 代码？

> ID：10787474
> 
> 赞同：1
> 
> 时间：2012-05-28T16:04:33.597
> 
> 标签：javascript, ruby, dom

如何在 ruby​​ 中执行 javascript + DOM 代码？我想要一个像 Harmony 这样的宝石，但不是那么有问题（Harmony 使用 johnson，它在 ruby​​ >= 1.9.1 时存在编译问题）。

# button - LIKE 按钮 - 不会使用新的元描述

> ID：10787478
> 
> 赞同：0
> 
> 时间：2012-05-28T16:04:52.173
> 
> 标签：button, facebook-like, meta-tags, reset

当我按下网页上的 LIKE 按钮时，我尝试将文本更改为 FB 上显示的链接。（使用元）

但是发生了一些事情......当我按下网页上的 LIKE 按钮时，我的新描述出现在评论字段中。但是当链接出现在 FB 上时，它是一个旧文本，我已经有一段时间没有使用它了——而且它不在我的 HTML 中。

FB 必须以某种方式记住这一点并使用它。这个不知道怎么重置。。

我无法发布我的代码，因为 stackoverflow 不会显示它......但我使用了 open 标记和前缀 = og。所以我的meta没有错。再说了……为什么它会记住一个已经不存在的旧文本？

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:14:39.400

调试器确实可以工作，但您必须关闭浏览器清除机会或使用其他浏览器才能使其效果生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:17:30.880

将您的链接放入调试工具：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

这将重置数据，Facebook 将开始使用更新后的文本。

# scala - 是否可以在不使用反射的 Scala 中实现 `??`（来自 C# 的空合并运算符）？

> ID：10787480
> 
> 赞同：6
> 
> 时间：2012-05-28T16:05:06.087
> 
> 标签：scala, reflection, null-coalescing-operator, structural-typing

我在某处找到了 C# 空合并运算符'??'的实现：

```
implicit def coalescingOperator[T](pred: T) = new {
  def ??[A >: T](alt: =>A) = if (pred == null) alt else pred
} 
```

然后可以像`a ?? b`which mean一样使用它`if (a == null) b else a`。

在反编译类文件后，我看到它生成了带有反射的代码（在 Scala 2.8.1 中）。

为什么它会产生反射，是否可以修改该代码使其不会产生反射？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T16:33:04.097

Scala 没有与 Java 相同的匿名类概念。如果你说类似

```
new {
  def fish = "Tuna"
} 
```

然后它将把新方法的所有使用解释为需要*结构类型*，即与

```
def[T <: {def fish: String}](t: T) = t.fish 
```

由于没有通用的超类，因此需要使用反射。我不知道为什么会这样；对于性能而言，这完全是错误的做法，而且通常不是您所需要的。

无论如何，修复很简单：创建一个实际的类，而不是匿名类。

```
class NullCoalescer[T](pred: T) {
  def ??[A >: T](alt: => A) = if (pred == null) alt else pred
}
implicit def anyoneCanCoalesce[T](pred: T) = new NullCoalescer(pred) 
```

在 2.10 中，它*仍然*会做可以说是错误的事情，但是（1）它会向您发出警告，因为您以这种方式使用反射（因此至少您会知道它何时发生），除非您将其关闭，并且（2）您可以使用较短的版本`implicit class /* blah blah */`并跳过`implicit def`仅添加样板的版本。

# php - 在 RESTful API 中引用 URL

> ID：10787481
> 
> 赞同：2
> 
> 时间：2012-05-28T16:05:11.933
> 
> 标签：php, ruby, api, rest, terminology

以下是 RESTful API 的几个标准 URL。

*   [http://api.example.com/user/123](http://api.example.com/user/123)
*   [http://api.example.com/users](http://api.example.com/users)

第一个检索单个用户，第二个检索用户集合（比如说 20 个）。

指代这些 URL的“ [REST ”术语是什么？](http://en.wikipedia.org/wiki/Representational_state_transfer)将它们称为资源是否正确？如果第一个是资源，那么第二个应该是资源集合还是应该只是类型集合的资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T16:50:26.217

RESTful 应用程序上的每个 URI 都是一个资源，这个描述就足够了。

链接到相同类型的多个资源的资源可以称为集合，但没有正式名称。每个资源，无论是否是集合，都可以有链接。

资源之间的链接是 RESTful 系统的超媒体部分。最近，为此出现了一个新术语：HATEOAS，超媒体作为应用程序状态的引擎。

以复数形式命名集合是一种常见的良好做法，因此您的`/users/`示例似乎是正确的。用户 123 是*users*集合的子集合，因此最好也将其放在`/users/123`复数形式下。

一个 RESTful、HATEOAS 应用程序将响应`/users/`指向单个资源的链接列表。就像是：

```
{
    "links": [
        {
            "href" : "/users/123/"
            "title" : "Alexandre Gaigalas"
        },
        {
            "href" : "/users/125/"
            "title" : "John Doe"
        },
    ]
} 
```

或者在 XML 中：

```
<link href="/users/123" title="Alexandre Gaigalas">
... 
```

除了`links`JSON 中的对象或 XML 中的标签之外，还可以提供其他信息。

这些链接稳定了资源之间的 RESTful 超媒体关系。我给出的示例大多是集合和个体之间的分层，但可以声明其他类型的链接：

```
<link href="/users/123/picture.jpg" title="Alexandre Gaigalas avatar" rel="picture"> 
```

*集合*术语主要是为抽象编程语言中的 RESTful 实现而创建的，因此开发人员可以更轻松地分组和操作类似资源的组。

当存在时，查询字符串参数也标识不同的资源，因此`/users/?since=2009`不同于`/users/`. 它们都是不同的资源，尽管非常相似。

片段标识符，即使没有发送到服务器，也被认为是不同的资源，因此`/users/123#bio`不同于`/users/123`.

如果可能，更有意义的分页会更好。页码很难以 REST 方式处理，因为它们变化很大。如果有一个经常更新的集合（例如 StackOverflow 问题的列表），则第一页经常更改，用户可能会丢失从第 1 页更改为第 2 页的项目。大多数集合可以按日期或字母顺序分页。增量页码并没有错，但有更好的机制。

# java - 如何使用两个 @manytomany 属性持久化 Jpa 实体

> ID：10787485
> 
> 赞同：0
> 
> 时间：2012-05-28T16:05:48.110
> 
> 标签：java, jakarta-ee, persistence, jpa-2.0

我有一个带有两个 @manytomany 注释属性的实体。这里的问题是，其中一个属性是持久的，而另一个则不是。可能是什么问题呢。实体如下。

```
@Entity("payment")
 public class PaymentData implements Serializable
{
    private Long pk;

    private Collection<PaymentItemData> paymentItem;
    /**
     *  minorPaymentItem
     *
     */
    private Collection<MinorPayItemData> minorPaymentItem;

@LazyCollection(LazyCollectionOption.FALSE)
    @ManyToMany
    @JoinTable(name = "payitem_m_assig",
    joinColumns =
    @JoinColumn(name = "pay_item_id", nullable = false),
    inverseJoinColumns =
    @JoinColumn(name = "minor_pay_item_id", nullable = false))
    public Collection<MinorPayItemData> getMinorPaymentItem()
    {
        return minorPaymentItem;
    }

    /**
     * @param minorPaymentItem the minorPaymentItem to set
     */
    public void setMinorPaymentItem(final Collection<MinorPayItemData> value)
    {
        this.minorPaymentItem = value;
    }

 @LazyCollection(LazyCollectionOption.FALSE)
    @ManyToMany
    @JoinTable(name = "payitem_assigned",
    joinColumns =
    @JoinColumn(name = "pay_item_id", nullable = false),
    inverseJoinColumns =
    @JoinColumn(name = "new_pay_item_id", nullable = false))
    public Collection<PaymentItemData> getPaymentItem()
    {
        return paymentItem;
    }

    /**
     * Set the property paymentItem
     *
     * @param value -paymentItem
     *
     */
    public void setPaymentItem(final Collection<PaymentItemData> value)
    {
        this.paymentItem = value;
    }    

}

 @Entity("minor")
    public class MinorPayItemData implements Serializable
    {

    }

 @Entity("major")
    public class PaymentItemData extends MinorPayItemData
    {

    } 
```

MinorPayItemData 和 PaymentItemData 保存在同一个数据库中。它们由鉴别器列分开。

仅保留 paymentItem 属性。我究竟做错了什么。

# c# - xml 到 linq 查询写入

> ID：10787486
> 
> 赞同：-3
> 
> 时间：2012-05-28T16:05:56.520
> 
> 标签：c#, xml, linq

我有一个 xDocument 对象，它是通过一个包含以下给定数据的 xml 文件加载的。

```
<note>
   <header>This is xml2linq -- Part1.</header>
   <from>From me</from>
   <to>to stackoverflow</to>
   <message>ohh wow</message>
</note>
<note>
   <header>This is xml2linq -- Part2 .</header>
   <to>to stackoverflow</to>
   <message>ohh wow</message>
</note>
<note>
   <header>This is xml2linq -- Part3 .</header>
   <from>From me</from>
   <to>to stackoverflow</to>
</note>
<description>
  <item1>ohh nice</item1>
</description>
<description>
   <language>c-sharp</language>
   <item1>Inheritance</item1>
<description> 
```

我想在 xDocument 上编写 linq 查询并获得以下给定的输出

```
 note(header,from,to,message)
 description(item1,language) 
```

** 描述。我想要不同的节点名称列表，后面跟着 Note 节点。但我不想写一个长的 foreach 或 for 循环。但我想在 xDocument 对象上编写一个简单的 linq 查询。

帮我得到这个输出......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:10:19.973

```
var doc = XDocument.Parse(" -- your XML here -- ");
var notes = from note in doc.Elements("note")
            select new {
                Header = (string)note.Element("header"),
                From = (string)note.Element("from"),
                To = (string)note.Element("to"),
                Message = (string)note.Element("message"),
            }; 
```

这将为您提供具有 4 个属性的匿名对象列表：Header、From、To 和 Message。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:33:44.157

没有硬编码`header,from,to,..`等。

```
XDocument xDoc = XDocument.Load(....);

List< List<KeyValuePair<string,string>> > list =
    xDoc.Descendants("note")
    .Select(note => note.Elements()
                        .Select(e => new KeyValuePair<string, string>(e.Name.LocalName, e.Value))
                        .ToList())
    .ToList(); 
```

# python - Python用字典值替换字符串

> ID：10787487
> 
> 赞同：1
> 
> 时间：2012-05-28T16:05:58.240
> 
> 标签：python, regex, dictionary

基于给定的输入：

> 我可以做得更好 waaaaaaaaaaaay :DDDD!!!! 我对此感到非常兴奋：）））好！

期望：输出

> 我可以做得更好/液化天然气：D/液化天然气！/液化天然气我很兴奋/液化天然气对此感到兴奋:)/液化天然气好！/液化天然气

--- 挑战：

1.  更好 vs. soooooooooo >> 我们需要保持第一个不变，但缩短第二个
2.  其次，我们需要添加一个标签（LNG），因为它可能对加强主观性和情绪有一定的重要性

---- 问题：错误消息“不平衡括号”

有任何想法吗？

我的代码是：

```
import re 

lengWords = {} # a dictionary of lengthened words 

def removeDuplicates(corpus):

data = (open(corpus, 'r').read()).split()
myString = " ".join(data)

for word in data:
    for chr in word: 
        countChr = word.count(chr)
        if countChr >= 3: 
            lengWords[word] = word+"/LNG"
            lengWords[word] = re.sub(r'([A-Za-z])\1+', r'\1', lengWords[word])
            lengWords[word] = re.sub(r'([\'\!\~\.\?\,\.,\),\(])\1+', r'\1', lengWords[word])                             

    for k, v in lengWords.items():
        if k == word: 
            re.sub(word, v, myString)
return myString 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:30:15.137

这不是完美的解决方案，但我现在没有时间完善它 - 只是想让你开始使用简单的方法：

```
s = "I can do waaaaaaaaaaaaay better :DDDD!!!! I am sooooooooo exicted about it :))) Good !!"
re.sub(r'(.)(\1{2,})',r'\1/LNG',s)
>> 'I can do wa/LNGy better :D/LNG!/LNG I am so/LNG exicted about it :)/LNG Good !!' 
```

# css - 更改分页符上的文档流以填充空间

> ID：10787490
> 
> 赞同：15
> 
> 时间：2012-05-28T16:06:02.363
> 
> 标签：css, printing-web-page, css-paged-media

打印时（或通常在分页媒体上显示文档），是否可以重排文档元素，以便当某些元素（例如图像）因为不适合实际页面上的可用空间而转移到下一页时，它后面的元素会被移动到实际页面的剩余空间吗？

我正在尝试实现与[LaTeX Floats](http://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions#Floats)类似（或相同）的效果，但仅使用 CSS。

为了说明这一点，假设我们有这种情况：

```
Page 1  | Paragraph A (...)   |
        | Paragraph B (...)   |
        |  _________________  |
        | | Top of image A  | |
        |_|_________________|_|

         ---- page break -----
         _____________________
Page 2  | | Rest of image A | |
        | |_________________| |
        |                     |
        | Paragraph C (...)   |
        | Paragraph D (...)   |
        |         ...         |
        |_____________________| 
```

使用一些基本的 CSS（参见[这个问题](https://stackoverflow.com/questions/2649169/print-styles-how-to-ensure-image-doesnt-span-a-page-break)），实现这一点没有问题：

```
Page 1  | Paragraph A (...)   |
        | Paragraph B (...)   |
        |                     |
        |                     |
        |_____________________|

         ---- page break -----
         _____________________
Page 2  |  _________________  |
        | | Image A (whole) | |
        | |                 | |
        | |_________________| |
        |                     |
        | Paragraph C (...)   |
        | Paragraph D (...)   |
        |         ...         |
        |_____________________| 
```

但我真正需要的是这样的：

```
Page 1  | Paragraph A (...)   |
        | Paragraph B (...)   |
        | Paragraph C (...)   |
        | Paragraph D (...)   |
        |_____________________|

         ---- page break -----
         _____________________
Page 2  |  _________________  |
        | | Image A (whole) | |
        | |                 | |
        | |_________________| |
        |         ...         |
        |_____________________| 
```

所以，基本上，我只想用后面的元素填充实际页面上剩余的所有空间`image A`（当然，只有当它们适合它时）。

我正在做一些 CSS3 研究，想看看 Office 编辑器是否可以完全被 CSS 样式取代，所以我不需要支持该解决方案（即此时在某些浏览器中实现）。我只想知道它是否包含在任何 CSS 模块或构造中（即使它只是工作草案），所以我可以假设浏览器将来会支持它。

我已经在

*   **CSS3 分页媒体**，
*   **CSS3 区域**和
*   **为分页媒体生成的 CSS3 内容**

规范并一无所获，但仍有机会我只是忽略了某些东西（或根本不理解），所以经过两天的谷歌搜索，我认为是时候在这里问了:-)

* * *

**编辑：**再次澄清一下：我**现在***不需要任何浏览器都支持该解决方案* ，我需要知道是否有允许这样做的标准或规范（如果是，如何）。 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:50:38.313

这完全是在黑暗中刺伤，但它至少可以让你朝着正确的方向前进……

结合[page(n) 伪元素](http://www.w3.org/TR/css3-gcpm/#selecting-columns-and-pages)选择器、[float / float-modifier](http://www.w3.org/TR/css3-gcpm/#page-floats)属性以及可能的[CSS4 父选择器](http://www.w3.org/TR/selectors4/#subject)可能会提供某种解决方案。

以下是一些行为示例：

```
/* CSS3 GCPM */
#image-a::page(2) {
  page-break-before: auto;
  float: top next-page;
  margin-bottom: -320px; /* Assuming the image height is 320px */
}

/* CSS4 Parent Selector */
$#image-a ::page(2) {
  page-break-before: auto;
  float: top next-page;
  margin-bottom: -320px; /* Assuming the image height is 320px */
} 
```

这基本上表明如果 image-a 实际上换到第二页，则应该对其应用浮点数，将其发送到下一页的顶部。根据浏览器选择呈现的方式，您可能会得到您正在寻找的结果（希望如此）：

1.  检测到换行到第二页
2.  该`page-break-before`属性强制该`float`属性应用于整个元素（或父选择器完成它的工作）
3.  `float`and属性将`margin`元素从文档流中取出并允许其他内容占用它的空间

我知道这是一个真正的延伸并且不会起作用，但也许它会引发一个思路，让你想出一个更可靠的解决方案:)**

# ruby-on-rails - Rails 重定向 301 编码

> ID：10787491
> 
> 赞同：1
> 
> 时间：2012-05-28T16:06:02.917
> 
> 标签：ruby-on-rails, redirect

我重新创建了一个网站，并且有很多 301 需要处理（从 php url 到 Rails url）。

它完美地适用于：

```
match "/produits/les-dallages/dallage-riva.html", :to => redirect("/produits/dallages/dalle-riva") 
```

我的问题是这种旧网址（由谷歌网站管理员工具提供）：

```
"/produits/les-pavages/paves-carres/item/48-pav%C3%A9s-carr%C3%A9s.html" 
```

无法理解编码，因为 url 是由浏览器转换的，Rails 无法理解带有“é”而不是“%C3%A9”的 url...

如何管理这种网址？

第二个问题：我可以在 routes.rb 文件中添加多少条路线（301）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:02:49.887

理论上，您可以添加许多您想要的路线。但是，我们不应该在路由文件中添加不必要的内容，因为它会占用内存，并且需要花费一些时间来处理每个请求的所有路由逻辑，然后才能到达控制器。

如果你有很多 url 来做重定向，而不是弄乱路由文件，我建议你创建一个控制器来做重定向，因为你可以编写更灵活的代码。也许您可以创建一个表来存储`from_url`（旧网址）和`new_url`（用于重定向）。然后，在一个新的控制器中，只需在数据库中找到旧的 url 并进行重定向。

```
class RedirectionController < ApplicationController
  def index
    redirect = Redirection.find_by_from_url(request.request_uri)
    if redirect
      redirect_to redirect.to_url, :status => :moved_permanently
    else
      render 'public/404', :status => :not_found, :layout => false
    end
  end
end 
```

最后，使用**Route Globbing**匹配任何 url 以进行重定向。您可以在[http://guides.rubyonrails.org/routing.html上查看更多信息](http://guides.rubyonrails.org/routing.html)

```
match '/produits/*' => 'redirection#index' 
```

对于像“é”这样的重音字符，您只需将该值存储在数据库中即可。对于 MySQL，您应该配置数据库服务器以存储`utf-8`和更新 database.yml 中的连接。

```
encoding: utf8
collation: utf8_unicode_ci 
```

您可以尝试通过以下代码进行重定向。它工作得很好。它必须`# encoding: UTF-8`在文件的开头，因为有那些重音字符。

```
# encoding: UTF-8
class RedirectionController < ApplicationController
  def index
    redirect_to "produits/les-pavages/paves-carres/item/48-pavés-carrés"
  end
end 
```

# c++ - 跨越二进制边界的异常

> ID：10787492
> 
> 赞同：21
> 
> 时间：2012-05-28T16:06:04.867
> 
> 标签：c++, exception-handling, g++, shared-libraries

我知道，这个问题已经被问过很多次了，但是我找不到我的问题的解决方案。

我有以下情况：

```
 A
  / \
 /   \
B <-- C 
```

*   A 是一个包含类的共享库`EException`
*   B 和 C 链接 A
*   C也是一个共享库
*   B 在运行时动态加载 C

在某些时候 C 抛出一个实例`EException`：

```
void doSometing() {
    throw EException("test-message");
} 
```

在`B`我想捕捉这个异常：

```
try {
    doSomething();
} catch (const EException& ex) {
    // Not reached
} catch (...) {
    // Not reached
} 
```

但正如代码中所提到的，没有一个 catch 子句被调用。相反，执行此代码的线程被中止。

我尝试了以下事情：

*   的可见性属性`EException`在编译 A 时设置为“默认”
*   头`EException`文件只包含声明
*   我`-fvisibility=hidden`在 A、B 和 C 中使用链接器选项
*   我`-E`在 C 中使用链接器选项

使用`nm`我得到`A`：

```
0000000000066260 T EException::EException(QString const&)
0000000000066306 T EException::EException(EException const&)
00000000000661d0 T EException::EException() 
0000000000066260 T EException::EException(QString const&) 
0000000000066306 T EException::EException(EException const&) 
00000000000661d0 T EException::EException() 
00000000000664de T EException::~EException()
000000000006641e T EException::~EException() 
000000000006641e T EException::~EException() 
00000000000663b6 T EException::operator=(EException const&)
<...>
000000000028de40 V typeinfo for EException
000000000028dd80 V typeinfo for EException*
000000000007342b V typeinfo name for EException
0000000000072ab7 V typeinfo name for EException*
000000000028de00 V vtable for EException 
```

对于`B`：

```
U EException::EException(QString const&)
U EException::~EException()
<...>
0000000000726f60 V typeinfo for EException 
```

和`C`：

```
U EException::EException(QString const&)
U EException::~EException()
<...>
U typeinfo for EException 
```

问题可能是，它`B`使用自己的 typeinfo `EException`，而`C`使用 提供的`A`？我将如何解决这个问题？

我的环境：

*   x86_64-linux-gnu 上的 gcc 4.6.3
*   使用 Qt

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T16:01:04.497

我在 gcc < 4.5 和跨共享库边界使用 RTTI 符号时遇到了类似的问题，但在 gcc 4.6 中没有。但是，您可能仍会发现以下信息很有用。

如前所述，vtable（包含 typeinfo 对象的条目）`EException`似乎在某些翻译单元中重复，这绝对是 gcc < 4.5 的问题（好吧，据我所知，这是 libsupc++ 的问题，不是合并 type_info 对象）。`EException`通过定义一个虚拟的外联析构函数（它必须是头文件中的第一个虚函数声明）来锚定 vtable`A`对我来说是诀窍。

发布完整的头文件`EException`也可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T09:31:09.630

检查

> -fvisibility=隐藏

链接器设置中的选项。如果已设置，请将其更改为

> -fvisibility=默认

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T09:55:23.590

恕我直言，这与编译器标志无关。

将您的异常对象声明为 extern，并且除了在您的主二进制文件中之外，不要在任何地方提供任何实现。

这将强制链接器（动态链接器 BTW）使用唯一可能的实现。

仅在外部定义上不生成类型信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T18:19:20.857

您可以尝试编译`A`，`B`并`C`使用`-rdynamic`（在链接阶段）

GCC 手册页讲述了 -rdynamic：

> 在支持它的目标上将标志 -export-dynamic 传递给 ELF 链接器。这指示链接器将所有符号（不仅是使用的符号）添加到动态符号表中。*对于“ dlopen* ”的某些用途或允许从程序中获取回溯，需要此选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T01:57:00.573

B 使用它自己的 EException 类定义`V typeinfo for EException`，而 C 似乎使用 Unresolved 类定义（U 表示该类型在当前翻译单元中未定义，必须由加载器和动态链接器解析）。

验证 B 仍然是一个共享库，并且它不是静态链接到 A 而是动态链接，防止 C 找到 A 的东西，因为我看不到 B 不会链接与 A 相同的类型。照顾你的标题 ^^。

# java - Android：SurfaceView 停止在第三根手指上绘图

> ID：10787497
> 
> 赞同：0
> 
> 时间：2012-05-28T16:06:13.523
> 
> 标签：java, android, touch, multi-touch, motion-detection

以下代码是测试应用程序中使用的实际代码，位于扩展 surfaceView 的类上。

```
@Override
public void onDraw(Canvas canvas)
{       
    canvas.drawCircle(touched_x, touched_y, 50, myPaint);
}

@Override
public boolean onTouchEvent(MotionEvent event)
{
    touched_x = event.getX();
    touched_y = event.getY();  
    return true;    
} 
```

**它基本上画出你的手指去哪里。**测试它是否跟踪。

**添加第二根手指，您仍然可以跟踪您的第一根手指。但是添加第三个，它就停止了。**你从那里做什么都没关系。除非您移开所有手指并重新开始，否则它不会跟踪。

现在这是一个问题，因为它有时认为一根手指就是三根！我可以克服手指之间的测试距离，但这仍然不能解决问题。

当第三根手指敲击时，它会冻结跟踪。它不会调用 action.Cancel。

**我知道第一根手指在何时何地被释放是至关重要的。**

然而它认为最后一个事件是`MotionEvent.ACTION_MOVE`。不是`MotionEvent.ACTION_UP`或`MotionEvent.ACTION_CANCEL`。

目前因为一根手指可以是三个。我的应用似乎无法加载给定的图像滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:01:22.263

发布更多您的代码。我没有遇到任何问题。也许您在某些情况下忘记使视图无效或有错误？有我的完整代码，它可以工作：

```
float x1 = -100, y1;

@Override
protected void onDraw(Canvas canvas) {
    Paint paint = new Paint();
    paint.setAntiAlias(true);
    canvas.drawColor(Color.WHITE);

    paint.setColor(Color.RED);
    canvas.drawCircle(x1, y1, 30, paint);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    x1 = event.getX();
    y1 = event.getY();

    invalidate();
    return true;
} 
```

也许您的设备上有[错误](http://www.youtube.com/watch?v=5puAvPqXpuc&feature=related)，但这不太可能..

# matlab - 在 Matlab 中加载 LibSVM 的模型文件

> ID：10787498
> 
> 赞同：2
> 
> 时间：2012-05-28T16:06:16.263
> 
> 标签：matlab, libsvm

我需要在 Matlab 中加载 LibSVM 模型文件。Python 接口中提供了这样的功能。有人知道这个功能存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:25:16.843

“要通过 MATLAB 读取数据，可以使用LIBSVM 包中的*libsvmread* ”

[http://www.csie.ntu.edu.tw/~cjlin/libsvm/#matlab](http://www.csie.ntu.edu.tw/~cjlin/libsvm/#matlab)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T08:18:24.803

我编写了一个简单的脚本来将 libsvm 中的文件加载到数据和标签中，而不使用任何 mex 文件。当然它效率不高，但它可以完成工作

```
file_name = 'real_sim';
fid = fopen(file_name,'r');
num_of_observations = 0;
num_of_features = 0;
num_of_nonzeros = 0;
% First pass: Extract general information
while 1
    % Read line
    line_str = fgetl(fid);
    if ~ischar(line_str)
        break;
    end    
    line_str(line_str == ':') = ' ';
    % File format: <label> <index1>:<value1> <index2>:<value2> ...
    number_list = sscanf(line_str,'%f');

    % Find number of rows, columns and nonzeros    
    feature_indices = 2:2:numel(number_list);
    temp_num = max(number_list(feature_indices));    
    if temp_num > num_of_features
        num_of_features = temp_num;
    end
    num_of_nonzeros = num_of_nonzeros + numel(feature_indices);
    num_of_observations = num_of_observations + 1;    
end
fclose(fid);

% Second pass: Read into sparse matrix
labels = zeros(num_of_observations,1);
row_indices = zeros(1,num_of_nonzeros);
col_indices = zeros(1,num_of_nonzeros);
val_list = zeros(1,num_of_nonzeros);
pos = 1;

fid = fopen(file_name,'r');
for line_num = 1 : num_of_observations
    % Read line
    line_str = fgetl(fid);
    line_str(line_str == ':') = ' ';
    % File format: <label> <index1>:<value1> <index2>:<value2> ...
    number_list = sscanf(line_str,'%f');
    % Extract data and labels
    labels(line_num) = number_list(1);
    feature_indices = 2:2:numel(number_list);
    value_indices = 3:2:numel(number_list);
    first_index = pos;
    last_index = pos + numel(feature_indices) - 1;

    row_indices(first_index:last_index) = line_num;
    col_indices(first_index:last_index) = number_list(feature_indices);
    val_list(first_index:last_index) = number_list(value_indices);

    pos = pos + numel(feature_indices);
end
fclose(fid);

data = sparse(row_indices,col_indices,val_list,num_of_observations,num_of_features);
clearvars row_indices col_indices val_list line_str 
% Convert labels to range 1-N
unique_labels = unique(labels);
num_of_labels = numel(unique_labels);
map_obj = containers.Map(unique_labels,1:num_of_labels); % Hash map
map_func = @(x) map_obj(x);
labels = arrayfun(map_func,labels); 
```

# php - 在 php 页面中定义 javascript 函数

> ID：10787500
> 
> 赞同：0
> 
> 时间：2012-05-28T16:06:20.050
> 
> 标签：php, javascript, html, javascript-events

我遇到了从 span 对象的 onclick 事件调用 javascript 函数的问题。

这是跨度对象：

```
<td><span class="button" onclick="submitUser();">Save</span></td> 
```

这是我试图嵌入到保存按钮所在的 php 页面顶部的 javascript 函数：

```
<script type="text/javascript">

    submitUser = function()
    {
        alert('hello');
    }

</script> 
```

如果我在与保存按钮相同的页面上定义 javascript 函数，我会不断收到 javascript 错误，“未捕获的引用错误：submitUser() 未定义”。但是，如果我将函数定义放在调用包含保存按钮的页面的页面上，该函数就可以正常工作。有没有办法可以在保存按钮的页面范围内获得该功能。我真的不想每次加载调用保存按钮页面的页面时都必须将该函数加载到内存中，这是目前我可以让它工作的唯一方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:40:52.350

尝试这个 ：

```
<script>
function submitUser() {
    alert("hello!");
}
</script> 
```

和这个：

```
<span onclick="javascript:submitUser()">Save</span> 
```

# api - 宁静的 URL 模式

> ID：10787510
> 
> 赞同：0
> 
> 时间：2012-05-28T16:08:11.963
> 
> 标签：api, http, url, rest, permalinks

假设我有一个如下的网址，例如

1.  [http://www.company.com/categories](http://www.company.com/categories) # 列出所有类别
2.  [http://www.company.com/categories/car](http://www.company.com/categories/car) # 列出所有汽车
3.  [http://www.company.com/products/303](http://www.company.com/products/303) # 唯一 id = 303 的汽车

我的问题是，对于 2\. `http://www.company.com/categories/car`，如果我使用它的复数形式会更好吗？

例如

```
http://www.company.com/categories/cars 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T04:08:22.160

如果您对资源使用复数，这是正确的。但是，如果您使用这样的 url，它就不会被称为 Restful：

```
 http://www.company.com/categories/cars 
```

因为汽车是类别的子资源......所以为了更好，我建议您应该将您的汽车资源公开为特定类别的子资源：

```
 http://www.company.com/categories/123/cars #get all cars under category which id = 123 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:14:18.223

为了使**2.**更像一个 RESTful 模式，您将发出一个`GET`检索汽车列表的请求。

在这种情况下，使用复数是有意义的：

```
http://www.company.com/categories/cars 
```

这为使用特定（单一）汽车记录扩展它提供了可能性：

```
http://www.company.com/categories/cars/ferrari 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T04:45:10.453

这完全取决于您和您的应用程序。如果您有许多 REST 服务，您也可以使用 carList 代替 car 或 cars。这是有道理的，而且更少混乱。确保在所有 REST URI 中保持统一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T09:29:40.587

将其视为 Windows 资源管理器目录。如果您在本地文件夹中组织汽车，法拉利会在哪里？

另一件要考虑的事情是专门为 PUT 和 POST 请求设计 URI，在这些请求中有更多的名词和更少的动词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:36:06.963

**复数**。url 中的“汽车”元素应反映类别的名称。根据我的经验，类别的名称通常是复数，因为它们标识了一组多个实体。例如：交通工具的类别是：汽车、飞机、自行车和滑板。

某物是汽车，属于“汽车”类别。

很好的例子是 wikipedia 上集合类别的命名约定：

> 集合类别以类命名（通常以复数形式）。例如，Category:Cities in France 包含主题为法国城市的文章。

[https://en.wikipedia.org/wiki/Wikipedia:Set_category#Set_category](https://en.wikipedia.org/wiki/Wikipedia:Set_category#Set_category)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T02:42:06.910

一个类别包含很多项目。所以，是的。**汽车比****汽车**更有意义

 **```
http://www.company.com/categories/cars/mitsubishi/lancer (if you have more categories) 
```

或者

```
http://www.company.com/categories/cars/lancer 
```**

# android - 在 AVD 中安装应用程序的问题

> ID：10787513
> 
> 赞同：0
> 
> 时间：2012-05-28T16:08:17.703
> 
> 标签：android, avd

我正在开发安卓应用程序。要在 AVD 上测试我的应用程序，我需要在模拟器上安装“日历”应用程序并同步到谷歌帐户。安装日历应用程序 ( `adb install Calendar.apk`) 后，它不会与我的谷歌帐户上的日历同步。我试图安装 GoogleCalendarSyncAdapter ( `adb install GoogleCalendarSyncAdapter.apk`) 但我有一个错误说：

```
195 KB/s (113455 bytes in 0.565s)
    pkg: /data/local/tmp/GoogleCalendarSyncAdapter.apk
Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES] 
```

这到底是什么东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:17:30.253

首先，确保您已设置同步帐户（通过系统设置，请参阅[此处](https://stackoverflow.com/questions/6978877/how-can-i-configure-gmail-in-android-emulator)）并检查您的模拟器是否针对 Google-API 而不是 AVD-Manager 中的通用 SDK。

[您可以尝试的其他方法是按照本](http://tech-droid.blogspot.com/2009/11/android-market-on-emulator.html)演练下载预配置的系统映像，其中预装了 Android 电子市场和所有 Google Apps（包括日历）（看起来就像“真实”设备） 。

# .net - 为 NHibernate 注册扩展

> ID：10787516
> 
> 赞同：0
> 
> 时间：2012-05-28T16:08:43.070
> 
> 标签：.net, nhibernate, fluent-nhibernate, extension-methods

我想使用“等于”来检查我的数据库中的一个值是否与另一个给定值相同。不幸的是，NHbernate 不支持“Equals”，所以我在互联网上搜索并找到了这个教程： http: [//www.primordialcode.com/blog/post/nhibernate-3-extending-linq-provider-fix-notsupportedexception](http://www.primordialcode.com/blog/post/nhibernate-3-extending-linq-provider-fix-notsupportedexception)
最后，我必须注册扩展 - 但我应该在哪个文件中注册？

**编辑**
也许我应该更好地描述我的问题......
*情况：*我有一个名为“GoodsType”的枚举。可能的值例如是“Iron”、“Wood”、“Stone”等。这个枚举用于“InventoryGoods”类中：

```
public class InventoryGoods: Goods
{
    public virtual User Owner { get; set; }
    public virtual Guid Id { get; set; }
    public virtual long Amount { get; set; }
    public virtual GoodsType GoodsType { get; set; }
    public virtual float Price { get; set; }
} 
```

如果用户想卖东西，我必须检查他是否有足够的这种特定商品。我为此检查创建了一个函数。这个函数能够自己找到实际的所有者（登录的用户），所以我只需要发送 GoodsType 和 Amount。但是如果我使用这个请求：`InventoryGoods good = _repository.First(x => (Equals(x.GoodsType, GivenGoodsType)) && (x.Amount >= GivenAmount));`，脚本会停止并出现错误*System.NotSupportedException: Boolean Equals(System.Object, System.Object)*

我搜索了很多，在 SO 的某个地方（不幸的是我不记得链接）我发现 NHibernate 不支持“Equals”的语句（因为它不能转换为 SQL）。所以我搜索了一个解决方案，并找到了上面命名的教程。但是我找不到必须注册扩展名的文件。

我已经找到了这个解决方案：`InventoryGoods good = _repository.First(x => x.Amount >= GivenAmount).Where(x => (Equals(x.GoodsType, GivenGoodsType)));`，但我更喜欢一种不通过“Where”进行双重检查的方法，只有“First”。

**编辑 2**
我正在使用 Fluent NHibernate 进行映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:22:38.853

据我所知，NHibernate 支持 Equals 进行对象比较。事实上，你应该重写它，只要默认等于实现中继内存地址，而不是对象值。

看到这个类似的问题： [当 Equals 方法被覆盖时，为什么覆盖 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overriden-in-c)

[NHibernate：重写 Equals 和 GetHashCode 的原因](https://stackoverflow.com/questions/5851398/nhibernate-reasons-for-overriding-equals-and-gethashcode)

# android - 是否有用于删除警报的 Android API

> ID：10787518
> 
> 赞同：6
> 
> 时间：2012-05-28T16:08:55.713
> 
> 标签：android, alarmmanager, alarm

我有一个应用程序，允许用户在不同时间设置警报。目前，它使用 AlarmManager 加上一个 BroadcastReceiver 和一个 AlertDialog 来提醒用户警报响起。

我想看看我的应用程序是否可以使用内置闹钟。我知道我可以像这样安排警报：

```
 Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
        i.putExtra(AlarmClock.EXTRA_HOUR, new Date(alarm.getTime()).getHours());
        i.putExtra(AlarmClock.EXTRA_MINUTES, new Date(alarm.getTime()).getMinutes());
        i.putExtra(AlarmClock.EXTRA_MINUTES, alarm.getDescription());
        i.putExtra(AlarmClock.EXTRA_SKIP_UI, true);
        context.startActivity(i); 
```

但这提出了两个问题：

1.  似乎没有办法在未来 24 小时内安排闹钟
2.  Android内置闹钟只允许设置10个闹钟

作为第 1 项的解决方法，我可以使用 AlarmManager 将用户警报安排在到期时间的 24 小时内设置。但是，这给我留下了第 2 项 - 理想情况下，我需要一种方法在它们执行后从 Android 闹钟中删除我的应用程序的闹钟（以避免我的应用程序的闹钟占用闹钟空间），但找不到离开的地方警报列表并删除一个。

这可能吗，还是我需要坚持手动 AlarmManager/AlertDialog 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T15:21:42.357

如果您需要在 24 小时内发出警报，您可以使用警报。如果将来更远，您需要向日历事件添加通知。您还可以制作自己的警报管理器自定义实现，这完全是关于您尝试实现的目标，而您根本没有说过任何事情。

# php - 无法让我的逻辑在我的 if 语句中工作

> ID：10787520
> 
> 赞同：0
> 
> 时间：2012-05-28T16:09:02.697
> 
> 标签：php, sql, database, if-statement

我有一个 if 语句并且遇到了问题。

它需要说：

> 如果耐力场大于 0 则 + exp 场，+ 金场，- 耐力场 else 做其他事情

我有添加和删除字段的部分工作。然而，在这个 if 语句中它没有这样做，除非我把它放在“做其他事情”部分。但是，当我将它放在 if 语句的该部分时，它不会停在 0 处。

```
<?php  

    include '../core/init.php';
    $id = $_SESSION['user_id'];
    $result = mysql_query('SELECT `stamina`FROM `characters` WHERE `id` = "$id"');
    $row = mysql_fetch_row($result);
    $stam = $row[0];

    if ($stam > 0) {
        mysql_query('UPDATE `characters` SET `exp` = `exp` + 1, `gold` = `gold`+10, `stamina`=`stamina`-1 WHERE id = "'.$id.'"');
    } else {

    }

?> 
```

我的连接在 init.php 中是“必需的”，它工作得很好。

我已经尝试了很多不同的方法来扭转等式。

好的，现在我已经编辑了声明，现在它已经完成了一半。这里是：

```
<?php

    include '../core/init.php';
    $id = $_SESSION['user_id'];
    $stam = mysql_query('SELECT `stamina` FROM `characters` WHERE `id` = "$id"');

    if ($stam >= 1){
        mysql_query('UPDATE `characters` SET `exp` = `exp` + 1, `gold` = `gold`+10, `stamina`=`stamina`-1 WHERE id = "'.$id.'"');
    } else if ($stam < 1){

    }

?> 
```

新问题是即使 $stam 小于 1，它仍然在 if 语句中运行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:39:12.890

尝试：

```
$result = mysql_query('SELECT `stamina` FROM `characters` WHERE `id` = ' . $id);

if ($result['stamina'] >= 1){
mysql_query('UPDATE `characters` SET `exp` = `exp` + 1, `gold` = `gold`+10,                      
    `stamina`=`stamina`-1 WHERE id = ' . $id);
} else if ($result['stamina'] < 1){
} 
```

尽管您应该研究新的 mysqli_* 函数。[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

**编辑：** 我刚刚意识到另一个问题。在您的第一个查询中，您将 $id 变量包含在单引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:45:33.717

也许指定这`$stam`是一个`integer`？尝试：

```
if ((int)$stam >= 1 ){ 
```

# android - 跨 App 回调机制

> ID：10787522
> 
> 赞同：0
> 
> 时间：2012-05-28T16:09:23.267
> 
> 标签：android

我有一个需要解决的问题，至少对于我认为不是 Android 开发专业水平的人来说。

我正在开发一个存储用户请求（GET、PUT、POST、DELETE）的 API。这些请求可以由使用我的 API 的任何应用程序发出，并存储在属于我的 Manager 应用程序的 SQLite DB 中（API 为此公开了一个内容提供程序），它处理维护不同用户的帐户并将所有请求排队并执行它们当有网络可用时。每个请求都与它的所有者（用户 ID）和源（应用程序包）相关联。

当有网络覆盖时执行请求，在我的特定上下文中，这主要发生在生成请求的应用程序关闭时。

该请求由连接网络时触发的 IntentService 执行。

现在的问题：

当应用程序离线时，这个 IntentService 如何使用它们的业务逻辑更新每个应用程序的信息？

我曾考虑在 API 中有一个基类，该基类必须由应用程序的开发人员扩展，并且在该类中，他们将根据应用程序的业务逻辑实现 HTTP 响应（我为他们得到）的解析。但是现在我又该如何调用该代码来解析属于我的 Manager 应用程序的意图服务中的响应。

谢谢大家，

亚历山大

# sql - 比较 2 个模式后生成差异 DDL

> ID：10787526
> 
> 赞同：0
> 
> 时间：2012-05-28T16:09:35.420
> 
> 标签：sql, triggers, schema, ddl

假设我在数据库 B 中有架构 A，在数据库 D 中有架构 C

用户在模式 A 中应用了一些更改，而模式 C 未更改。

此时我需要收集模式 A 的仅更改对象的 DDL，这些对象可能会在列中更改、添加表、添加序列...等我们知道 Toad 和其他 GUI 实用程序可以做到，但我们必须从命令中做到这一点行脚本

我应该如何进行？我应该尝试创建一个触发器来记录对架构所做的任何更改吗？

# knockout.js - 使用 KnockoutJS 时如何引发 DOM 事件

> ID：10787534
> 
> 赞同：0
> 
> 时间：2012-05-28T16:10:17.713
> 
> 标签：knockout.js, dom-events

假设我有简单的 html 标记：

```
<div>
    <input type="text"/>
</div> 
```

当我单击 div 时，我想集中输入。我有什么方法可以做到这一点？

我在考虑几种可能性，但看起来不错：

*   忘记淘汰赛并使用好的旧jQuery。但随后代码变成了意大利面条，UI 行为分布在许多地方。
*   为输入创建自定义 bindingHandler 并将单击绑定添加到 div，单击更改某些模型属性，自定义绑定对其做出反应并引发焦点事件。但这对于如此简单的事情来说看起来太复杂了（至少在 jq 中这很容易）。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:52:48.347

Knockout 非常适合使用支持数据模型构建 UI。当您需要进行低级 DOM 操作（如您所描述的）时，这无济于事。事实上，在淘汰赛的[介绍页面上，作者说：](http://knockoutjs.com/documentation/introduction.html)

> 每个人都喜欢 jQuery！它是我们过去不得不忍受的笨重、不一致的 DOM API 的出色替代品。jQuery 是一种极好的低级方式来操作网页中的元素和事件处理程序。**我当然仍然使用 jQuery 进行低级 DOM 操作。KO解决了一个不同的问题。**

*（强调我的）*

就我个人而言，我认为使用 jQuery 进行这种类型的操作很好。如果将事件处理程序和 MVVM 代码分解为单独的 JavaScript 文件，则可以避免编写意大利面条式代码。

# javascript - 使用 cookie 插件从图像点击触发复选框点击

> ID：10787542
> 
> 赞同：1
> 
> 时间：2012-05-28T16:10:33.033
> 
> 标签：javascript, jquery, image, cookies, toggle

不幸的是，当我尝试将其与基于图像的复选框切换结合使用时，我正在使用 cookie 插件在多个页面“产品列表”中保留一个清单，我似乎无法让 ChangeBox(CheckBox) 方法正确触发。我究竟做错了什么？

**标记：**

```
<form name="CheckList" action="#">
      <table cellspacing="0" cellpadding="0" border="0">
    <tr>
          <td><img src="images/1.jpg" id="item1" name="checkboximg" alt="" onclick="swapImage('item1'); changeBox('pen1')" /></td>
          <td onclick="swapImage('item1')"> item 1\. </td>
        </tr>
    <tr>
          <td><img src="images/1.jpg" id="item2" name="checkboximg" alt="" onclick="swapImage('item2')" /></td>
          <td onclick="swapImage('item2')"> item 2\. </td>
        </tr>
    <tr>
          <td><img src="images/1.jpg" id="item3" name="checkboximg" alt="" onclick="swapImage('item3')" /></td>
          <td onclick="swapImage('item3')"> item 3\. </td>
        </tr>
    <tr>
          <td><img src="images/1.jpg" id="item4" name="checkboximg" alt="" onclick="swapImage('item4')" /></td>
          <td onclick="swapImage('item4')"> item 4\. </td>
        </tr>
  </table>
      <input type="checkbox" id="pen2" value="item1" class="hide" />
      <input type="checkbox" id="pencil2" value="item2" class="hide" />
      <input type="checkbox" id="paper2" value="item3" class="hide" />
      <input type="checkbox" id="eraser2" value="item4" class="hide" />
    </form> 
```

**Javascript：**

```
//This Function Creates your Cookie for you just pass in the Cookie Name, Value, and number of days before you want it to expire.

function CreateCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    }
    else var expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
}

//This Function reads the value of a given cookie for you.  Just pass in the cookie name and it will return the value.

function ReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}

//This Function Erases Cookies.  Just pass in the name of the cookies you want erased.

function EraseCookie(name) {
    CreateCookie(name, "", -1);
}

//Sets or UnSets Cookies for given checkbox after it's been clicked on/off.

function ChangeBox(CheckBox) {

    if (document.getElementById(CheckBox).checked) {

        //var thisBox = document.getElementById(CheckBox).value;
        //alert(thisBox);
        var CurrentCookie = ReadCookie("productlist");
        CurrentCookie = CurrentCookie + CheckBox;
        CreateCookie("productlist", CurrentCookie, "1000");
    }
    else {
        var CurrentCookie = ReadCookie("productlist");
        CurrentCookie = CurrentCookie.replace(CheckBox, "");
        CreateCookie("productlist", CurrentCookie, "1000");
    }
}

//Runs on body load to check history of checkboxes on the page.

function CheckCookies() {

    var CurrentCookie = ReadCookie("productlist");

    for (i = 0; i < document.CheckList.elements.length; i++) {
        if (document.CheckList.elements[i].type == "checkbox") {
            document.CheckList.elements[i].onclick = function() {
                ChangeBox(this.id);
            };
            if (CurrentCookie && CurrentCookie.indexOf(document.CheckList.elements[i].id) > -1) {
                document.CheckList.elements[i].checked = true;
            }
        }
    }

    //IF COOKIE CHECKED
    if (document.getElementById("pen2").checked == true) {
        swapImage("item1");
    }
    if (document.getElementById("pencil2").checked == true) {
        swapImage("item2");
    }
    if (document.getElementById("paper2").checked == true) {
        swapImage("item3");
    }
    if (document.getElementById("eraser2").checked == true) {
        swapImage("item4");
    }
    else {}
}

//Clears Form

function ClearBoxes() {
    for (i = 0; i < document.CheckList.elements.length; i++) {
        if (document.CheckList.elements[i].type == "checkbox") {
            document.CheckList.elements[i].checked = false;
            ChangeBox(document.CheckList.elements[i].id);
        }
    }
}

window.onload = CheckCookies;

//*********************************IMAGES*********************************//
var imgUp = "images/1.jpg";
var imgDown = "images/2.jpg";
var checkedItems = new Array();

function swapImage(imgID) {
    var theImage = document.getElementById(imgID);
    var theState = theImage.src;

    //*****************CHANGE THE CORRECT CORRESPONDING CHECKBOX **************************//
    var imgBox = document.getElementById(imgID).value;
    //alert(imgBox);
    alert(theImage);

    if (theState.indexOf(imgUp) != -1) {
        theImage.src = imgDown;
    }
    else {
        theImage.src = imgUp;
    }
} 
```

**CSS：**

```
input.hide {/*display: none;*/} 
```

[你可以在这里](http://jsfiddle.net/esoteric/TpsUa/1/)看到 jsfiddle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T07:35:59.890

对此进行排序的最简单方法是**`CheckBox`**从函数内调用您的**`swapImage`**函数并传递多个参数。这是一个例子：

```
function swapImage(imgID, checkboxID) {
    var theImage = document.getElementById(imgID);
    var theState = theImage.src;

    /* CHANGE THE CORRECT CORRESPONDING CHECKBOX */
    var imgBox = document.getElementById(imgID).value;
    //alert(imgBox);
    alert(theImage);

    if (theState.indexOf(imgUp) != -1) {
        theImage.src = imgDown;
    }
    else {
        theImage.src = imgUp;
    }

    /* CALL THE CHANGEBOX FUNCTION */
    ChangeBox(checkboxID);
} 
```

顺便说一句，您可能会发现使用 CSS 样式切换而不是更改 image.src 更容易/更干净。您是否考虑过使用带有背景图像的类？这是一个例子：

```
/* CHANGE CLASSES + UPDATE COOKIE - Function formerly called "swapImage" */
function setChecked(divID, checkboxID, updateCookie){
    var theDiv = document.getElementById(divID);
    var theCheckbox = document.getElementById(checkboxID);

    // Toggle Classes/Checkboxes
    if(theDiv.className == "img1"){
        theDiv.className = "img2";
        theCheckbox.checked = true;
    }else{
        theDiv.className = "img1";
        theCheckbox.checked = false;
    }

    // If updateCookie is true change cookie
    if(updateCookie){
        ChangeBox(checkboxID);
    }
} 
```

在这里你可能会注意到我还添加了一些东西： - 一个布尔参数**`updateCookie`**，让你可以选择是否更新 cookie - 立即检查正确的复选框

这是[关于 jsfiddle 的一个工作示例](http://jsfiddle.net/TpsUa/5/)。顺便说一句，我绝对提倡使用 jQuery 进行这种编码，因为它确实可以通过使用 CSS 选择器加快编码速度，[请在此处查看](http://jquery.com)。我希望这会有所帮助！

# php - 获取对象属性，我应该抛出异常吗？

> ID：10787547
> 
> 赞同：3
> 
> 时间：2012-05-28T16:11:02.440
> 
> 标签：php, exception-handling

有一次我看到有人在 __get 方法中使用了下面的代码，它看起来很优雅，所以我复制了。

```
public function __get($param)
{
    if (!isset($this->params[$param])) {
        throw new Exception("Property doesn't exist");
    }
    return $this->params[$param];
} 
```

但是现在在根据属性是否存在进行简单操作时处理异常似乎太多了。在这种情况下，最好的做法是什么。是返回 NULL 然后检查足够吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:16:52.687

我会说返回 NULL 并检查就足够了，尽管这取决于您的应用程序的功能。

如果您的类在运行时创建属性，那么抛出异常可能会很好，但如果所有属性在编译时都存在，那么 NULL 是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:54:54.437

在 php 中，与其他一些语言不同，这不是一个例外情况。我同意你的观点，除非有特殊情况，否则例外太戏剧化了。

我倾向于模仿 php 中正常的预期行为，即返回 null 的值并[触发](http://php.net/manual/en/function.trigger-error.php)level`E_NOTICE`或`E_USER_NOTICE`. 这是您尝试读取未定义的属性、数组索引或变量时的正常行为。

顺便说一句-您可能还对实现魔术[__isset](http://www.php.net/manual/en/language.oop5.overloading.php#object.isset)方法感兴趣

# javascript - 如何为我们的电话号码做一个不以 0 或 1 开头的正则表达式验证？

> ID：10787557
> 
> 赞同：1
> 
> 时间：2012-05-28T16:11:47.400
> 
> 标签：javascript, regex, validation, phone-number

我一直在查看电话号码的许多正则表达式验证，但我找不到一个只允许 10 位数字且不以 0 或 1 开头的验证，显然只有数字

我找到了这个

```
^((\+)?[1-9]{1,2})?([-\s\.])?((\(\d{1,4}\))|\d{1,4})(([-\s\.])?[0-9]{1,12}){1,2}$ 
```

但是是为了满足我的需要。

我在 javascript 中使用这个表达式，我可以在那里使用最多 10 位数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T16:13:31.123

10 位数字，不以 0 或 1 开头：

```
^[2-9]\d{9}$ 
```

快速解释：

```
^       start of string
[2-9]   matches only digits 2 to 9 (thus excluding 0 and 1 as requested)
\d{9}   any 9 digits
$       end of string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T17:07:46.243

如果您有 3 个电话号码输入框并想测试第一个框，请使用 @m0skit0 建议的相同正则表达式...

```
/^[2-9]\d{2}$/.test(phone_field_1.val()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T17:12:59.943

在这里，您可以看到我的 10 位数解决方案。重要提示：它们不以 0 或 1 开头！！！

```
^[2-9]\d{9}$
Further explanation:

^       beginning of string
[2-9]   matches only digits 2 to 9 (NOT 0 and 1 as I mentioned above)
\d{9}   any 9 digits
$       end of string 
```

我希望我能帮助你！

# android - 如何使用预览帧在 Android 中使用 Zxing 解码 QR

> ID：10787560
> 
> 赞同：0
> 
> 时间：2012-05-28T16:12:05.830
> 
> 标签：android, android-camera, qr-code, zxing

我知道以前有人问过与这篇文章相关的问题，但我无法找到明确的答案。我是 Android 的初学者，如果有人能逐步帮助我，我将不胜感激。我必须构建一个应用程序，打开一个相机并将其预览帧传递给 Zxing。Zxing 必须处理这些帧中的每一个，并找出其中是否存在二维码。我有这个代码片段，它解码存储在 SD 卡中的图像。

```
Bitmap bMap = BitmapFactory.decodeFile("/sdcard/image2.png");
    TextView textv = (TextView) findViewById(R.id.mytext);
    View webbutton=findViewById(R.id.webbutton);
    LuminanceSource source = new RGBLuminanceSource(bMap); 
    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
    Reader reader = new MultiFormatReader();
    try {
         Result result = reader.decode(bitmap);
         Global.text = result.getText(); 
            byte[] rawBytes = result.getRawBytes(); 
            BarcodeFormat format = result.getBarcodeFormat(); 
            ResultPoint[] points = result.getResultPoints();
            textv.setText(Global.text);
            webbutton.setOnClickListener(this);
    } catch (NotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ChecksumException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FormatException e) {
        // TODO Auto-generated catch block
e.printStackTrace();

    }   
} 
```

我需要将它与预览回调集成，以便解码器获取预览帧而不是 SD 卡图像。谁能告诉我该怎么做？任何示例代码都会有很大帮助。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:47:14.747

这差不多。您不能使用`RGBLuminanceSource`，因为它是用于 JavaSE。你需要`PlanarYUVLuminanceSource`.

您还需要处理这些异常。`QRCodeReader`如果您只是扫描二维码，则可以使用。

查看 Barcode Scanner 的源代码，[尤其是 DecodeHandler](http://code.google.com/p/zxing/source/browse/trunk#trunk/android/src/com/google/zxing/client/android)的源代码。这显示了您如何与预览框架进行交互。或者至少是一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:49:35.123

首先你必须打电话给画廊。为此使用此代码。

```
private void callGallery() {
    if(newBitmap!=null){
    imageView=null;
}
 Intent intent = new Intent();
 intent.setType("image/*");
 intent.setAction(Intent.ACTION_GET_CONTENT);
 startActivityForResult(Intent.createChooser(intent,
         "Select Picture"), SELECT_PICTURE);
} 
```

并在 onActivityResult

```
 if (requestCode == SELECT_PICTURE) {
      if (resultCode == RESULT_OK) {

         Uri selectedImageUri = intent.getData();
         //OI FILE Manager
         filemanagerstring = selectedImageUri.getPath();
         //MEDIA GALLERY
         selectedImagePath = getPath(selectedImageUri);
         scanQRImage(selectedImagePath);
     }
  }
protected void scanQRImage(String imagePath) {
    // TODO Auto-generated method stub

      BitmapFactory.Options options = new BitmapFactory.Options();
      options.inScaled = true;
      options.inDensity = 240;// previously it was 240
      options.inTargetDensity = 240;//previously it was 240

      Bitmap bMap = scaleImage(imagePath);

      ImageView view = (ImageView) findViewById(R.id.image_view);
        view.setImageBitmap(bMap);

      LuminanceSource source = new RGBLuminanceSource(bMap); 
      BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
      Reader reader = new MultiFormatReader();

      try {

           Result result = reader.decode(bitmap);
           String contents = result.getText(); 
              byte[] rawBytes = result.getRawBytes(); 
              BarcodeFormat format = result.getBarcodeFormat(); 
              ResultPoint[] points = result.getResultPoints(); 
```

您将在内容字符串中获得结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T07:39:42.177

```
public void onPreviewFrame(byte[] data, Camera arg1) {
                FileOutputStream outStream = null;
                try {
                    YuvImage yuvimage = new YuvImage(data,ImageFormat.NV21,arg1.getParameters().getPreviewSize().width,arg1.getParameters().getPreviewSize().height,null);
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();
                    yuvimage.compressToJpeg(new Rect(0,0,arg1.getParameters().getPreviewSize().width,arg1.getParameters().getPreviewSize().height), 80, baos);

                    outStream = new FileOutputStream(String.format("/sdcard/%d.jpg", System.currentTimeMillis()));  
                    outStream.write(baos.toByteArray());
                    outStream.close();

                    Log.d(TAG, "onPreviewFrame - wrote bytes: " + data.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                }
                Preview.this.invalidate();
            } 
```

“onPreviewFrame() 提供的 byte[] 数据实际上是无用的，因为没有有效的方法可以转换为 Android 其余部分可以理解的格式” - [https://code.google.com/p/android/issues/详细信息？id=823](https://code.google.com/p/android/issues/detail?id=823)

所以继续在 onPreview 中将你的字节转换为 YuvImage

# c# - 阻止 VS 将属性值放入 .Designer.cs 文件中

> ID：10787567
> 
> 赞同：4
> 
> 时间：2012-05-28T16:12:39.117
> 
> 标签：c#, .net, winforms, properties, user-controls

我有一个自定义控件，我已将其放到 Visual Studio 2010 和 c# winforms 中的表单上。

当我将控件放在表单上时，属性会自动填充到 From1.Designer.cs 文件中。我想阻止特定属性出现在文件中。我已经将其标记为，`[Browsable(false)]`但这还不足以阻止 VS 干扰我的财产。VS 是否有一个属性可以忽略该属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T16:16:08.773

如果您希望该属性被序列化，请使用它：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)] 
```

相反，如果您想停止要序列化的属性（如果它具有默认值），您可以执行@HandPassant 在评论中指出的操作并应用`DefaultValueAttribute`（仅当值与您指定的默认值不同时才会序列化）。

# c# - C#正则表达式匹配这些字符串

> ID：10787574
> 
> 赞同：1
> 
> 时间：2012-05-28T16:13:20.267
> 
> 标签：c#, regex

我有一些以下格式的字符串：

```
--> ABCDEF_(0) "Abcde fgh"

--> GHIJ4 1 
```

第一个应该返回 3 个匹配项：

```
-->
ABCDEF_(0)
"Abcde fgh" 
```

第二个也应该返回 3 个匹配项：

```
-->
GHIJ4
1 
```

所以我要匹配的是：

1.  箭头 (-->)
2.  非空白、非引号包围的字符组
3.  用引号括起来的表达式，包括它们的空格

可以想象，一个字符串中可能有更多类型 (2) 和 (3) 的组，因此单个字符串可能有超过 3 个匹配项。

到目前为止，这就是我所拥有的：

```
 var regex = new Regex(
      @"-->" + // match the starting arrow
      @"|[^""\s]*\S+[^""\s]*" + // match elements not surrounded by quotes, trimmed of surrounding whitespace
      @"|""[^""]+"""); // match elements surrounded by quotes 
```

但这不起作用，因为它打破了引号中的表达式，返回第一个字符串：

```
-->
ABCDEF_(0)
"Abcde
fgh" 
```

什么正则表达式会起作用？如果有比正则表达式更简单的方法，我也会接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:31:56.283

使用捕获会更容易（我在这里使用了命名捕获）：

```
var regex = new Regex(@"-->" // match the arrow
    + @"\s+(?<first>[^\s]+)" // capture the first part always unquoted
    + @"(\s+(?<second>(""[^""]+"")|[^\s]+))+"); // capture the second part, possibly quoted

var match = regex.Match("--> ABCDEF_(0) \"Abcde fgh\"");
Console.WriteLine(match.Groups["first"].Value);
Console.WriteLine(match.Groups["second"].Value);

match = regex.Match("--> GHIJ4 1");
Console.WriteLine(match.Groups["first"].Value);
Console.WriteLine(match.Groups["second"].Value);

match = regex.Match("--> GHIJ4 1 \"Test Something\" \"Another String With Spaces\" \"And yet another one\"");
Console.WriteLine(match.Groups["first"].Value);
Console.WriteLine("Total matches:" + match.Groups["second"].Captures.Count);
Console.WriteLine(match.Groups["second"].Captures[0].Value);
Console.WriteLine(match.Groups["second"].Captures[1].Value);
Console.WriteLine(match.Groups["second"].Captures[2].Value);
Console.WriteLine(match.Groups["second"].Captures[3].Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:02:44.830

感谢一个由于某种原因被迅速删除的答案，我已经设法解决了这个问题。

想法：

*   第一组“-->”是多余的
*   第二组和第三组应该互换。

产生的正则表达式：

```
Regex sWordMatch = new Regex(
      @"""[^""]*""" + // groups of characters enclosed in quotes
      @"|[^""\s]*\S+[^""\s]*", // groups of characters without whitespace not enclosed in quotes 
```

# android - 保存数据以备后用的最佳方法？

> ID：10787578
> 
> 赞同：0
> 
> 时间：2012-05-28T16:13:47.553
> 
> 标签：android, xml, data-storage

将多个（大约 80 个）字段保存为单个实体的最佳方法是什么？我的应用程序创建了一个“程序”对象，它本身在一个数组中包含大约 75 个字符串、大约 4 个其他随机字符串和一个 int 字段。我希望能够保存这些，以便用户能够在 ListView 中查看有关每个程序的基本信息，然后单击其中一个以查看其余数据。

保存这些的最好方法是什么？我一直在考虑将它们各自保存为自己单独的 XML 文件，但我也听说过数据库（尽管对于我正在尝试做的事情来说似乎有点多）。或者我应该将它们保存为常规的 .txt 文件并稍后解析它们？或者甚至只是将每个程序保存到一个 txt/xml 文件中，然后一起解析它们？或者我还缺少什么更有效的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:18:06.737

只要您不创建大量对象，我会说序列化您的对象并以这种方式存储就足够了。如果您发现自己创建了许多这样的对象，我建议您研究一个数据库实现来处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:19:21.750

这取决于：

如果你想要快速的东西 - 使用 SQLite 数据库。

如果您想要一些易于实现（但速度较慢）的东西 - 使用[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:20:16.793

在您的情况下，将数据存储到 XML 文件中是最好的方法。SQLite 数据库可用于更强大的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:21:22.167

如果您不想担心光标或数据库管理，只需使用 SharedPreferences。我习惯于使用[GSON](http://code.google.com/p/google-gson/)序列化/反序列化我的对象，这很容易设置并且运行良好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T16:48:36.810

你也可以看看[`ObjectOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)课堂。它可以将对象打印`that implements the Serializable interface`到文件或其他流中。

所以你可以做一些事情，比如用这些字符串和 int 制作一个 ArrayList，然后将 ArrayList 写入一个文件。

# jquery - 通过幻灯片向后循环

> ID：10787582
> 
> 赞同：1
> 
> 时间：2012-05-28T16:14:14.883
> 
> 标签：jquery, slideshow

我有以下 jQuery：

```
 var $active = $('#slideshow li.active');

            if ( $active.length == 0 ) $active = $('#slideshow li:last');

            // use this to pull the images in the order they appear in the markup
            var $next =  $active.next().length ? $active.next()
                : $('#slideshow li:first');

            // uncomment the 3 lines below to pull the images in random order

            // var $sibs  = $active.siblings();
            // var rndNum = Math.floor(Math.random() * $sibs.length );
            // var $next  = $( $sibs[ rndNum ] );

            $active.addClass('last-active');

            $next.css({opacity: 0.0})
                .addClass('active')
                .animate({opacity: 1.0}, 500, function() {
                    $active.removeClass('active last-active');
                }); 
```

如何修改它以便我可以向后循环？

我已经走了这么远，但它不会从第一个元素循环回到最后一个元素。一定有一些我想念的相当简单的东西，但我真的无法理解它。

```
 var $active = $('#slideshow li.active');

            if ( $active.length == 0 ){ $active = $('#slideshow li:last');}

            // use this to pull the images in the order they appear in the markup
            var $next =  0 ? $active.prev()
                : $('#slideshow li:first');

            // uncomment the 3 lines below to pull the images in random order

            // var $sibs  = $active.siblings();
            // var rndNum = Math.floor(Math.random() * $sibs.length );
            // var $next  = $( $sibs[ rndNum ] );

            $active.addClass('last-active');

            $next.css({opacity: 0.0})
                .addClass('active')
                .animate({opacity: 1.0}, 500, function() {
                    $active.removeClass('active last-active');
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:19:08.853

当前解决方案检查元素之后是否有`active`元素。我们将更改它以查看元素*之前*是否有一个。`active`最初的后备是选择`#slideshow`. 我们将改为选择最后一个。

```
var $next = $active.prev().length ? $active.prev() : $('#slideshow li:last'); 
```

如果您不熟悉三元运算符，它本质上与编写 if 语句相同：

```
// If there are previous elements
if ( $active.prev().length > 0 ) {
    // The next element will be the previous element
    $next = $active.prev();
} else {
    // The next element will be the last list item in #slideshow
    $next = $("#slideshow li:last");
} 
```

# c# - 铸造和反射 C#

> ID：10787583
> 
> 赞同：-2
> 
> 时间：2012-05-28T16:14:15.773
> 
> 标签：c#, .net, c#-4.0, reflection

我正在尝试使用反射将一个对象转换为它的类型。

所以我想做一些事情，比如使用 typeOf() 方法来查找它的类型，然后动态地将对象转换为它找到的类型。

我不确定如何很好地做到这一点，也许使用 linq？

我正在使用 c# 4.0。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T16:17:52.203

对象已经有了它的类型。它存储在对象类型的变量中仅意味着您（程序员）在编程时不知道类型，或者您不想或无法指定它。您只能转换为在设计（编程）类型中已知的类型。我不知道你打算做什么，但可能转换为 dynamic 会实现你想要的：

```
dynamic dyn = obj; 
```

# javascript - 在 IE 中从 Javascript 调用 Silverlight 代码

> ID：10787586
> 
> 赞同：4
> 
> 时间：2012-05-28T16:14:40.460
> 
> 标签：javascript, html, silverlight

我在 HTML 页面中有一个 Silverlight 应用程序。SL 插件托管在“对象”HTML 标记中。当用户关闭网页时，我想在我的 Silverlight 应用程序中调用一个函数。代码是这样的：

（简化的）HTML 代码：

```
<div id="silverlightControlHost">
    <object id="MyApp" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
        <param name="source" value="ClientBin/MyApp.xap" />
        ...
        </object><iframe id="_sl_historyFrame"></iframe></div> 
```

Javascript代码：

```
<script type="text/javascript">
    window.onbeforeunload = confirmExit;

    function confirmExit()
    {
        var control = document.getElementById("MyApp");
        var message = control.content.BrowserIntegration.MyAppFunction();

        if (message)
        {
            return message;
        }
    }
</script> 
```

它曾经可以工作，但现在不再工作了，至少在 Internet Explorer 8 中是如此。HTML 对象 (control.content) 的内容属性未定义。奇怪的。该物业最近有变化吗？我很确定它在 2 个月前有效，并且在此之前很长一段时间都运作良好。该网站位于我的受信任站点中，并且我在 IE 中没有找到从那时起我更改的设置（可能有一两个，但扫描列表，我没有找到任何东西）。

当我使用 HTML 对象的“onLoad”事件进行测试时，内容已经未定义。

我不知道异常是它以前起作用还是现在不起作用。但如果有人能告诉我如何让它现在工作，它会让我很开心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:10:27.630

我创建了一些从 IE 调用 Silverlight 代码的向导：

1）需要识别silverlight控件：添加“id”标签：

```
<object data="data:application/x-silverlight-2," type="application/x-silverlight-2"
            width="100%" height="100%" id="_sl_facebookapp"> 
```

2）需要从silverlight代码注册脚本对象：

```
HtmlPage.RegisterScriptableObject("FBSHandler", this); 
```

3) 将需要的 silverlight 方法标记为 ScriptableMember：

```
[ScriptableMember]
        public void FBAuthorized(string authKey){} 
```

4) 您应该使用已注册的脚本对象来调用 Silverlight 方法：

```
var silverlightCtrlId = '_sl_facebookapp';

function handleStatusResponse(response) {
    var control = document.getElementById(silverlightCtrlId);    
        var accessToken = response.authResponse.accessToken;
        if (control != null) {
            control.Content.FBSHandler.FBAuthorized(accessToken);
        }
    }
} 
```

它工作正常。希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T01:42:17.160

这些操作没有解决我的问题：

*   检测和清除病毒
*   降低IE8的安全级别
*   重新安装 Internet Explorer 8
*   重新安装 Silverlight 组件

这就是解决我的问题的方法：

*   重新安装 Silverlight Developer 运行时

注意：我使用 MS Visual Studio 2010 进行 .NET 开发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T08:42:47.103

我认为这是一个时间问题。您访问 Content 元素的代码可能在 Silverlight 组件完全加载之前执行。

我遇到了完全相同的问题，并通过使用 Javascript Timer 解决了它，直到元素完全加载。有趣的是，问题只出在 IE 上，其他浏览器都没有。

# javascript - 为什么 jQuery-UI 可拖动不起作用？

> ID：10787587
> 
> 赞同：0
> 
> 时间：2012-05-28T16:14:46.730
> 
> 标签：javascript, jquery, jquery-ui

我有以下代码，并试图允许一个点（img 和 div 中的文本）在创建后可拖动。

```
<div id="container">
    <img src="images/aoi.png" alt="" />
    <div id="point_panel">
        <form>
            <fieldset id="point_container">
                <img id="point" src="images/point.png" alt="" /><input id="point_name" type="text" />
            </fieldset>
        </form>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('#point').click(function() {
            var alt = $('#point_name').val();
            $('#container').append('<div class="points"><img src="images/point.png" alt=\"'+alt+'\" />'+alt+'</div>');
        });
        $('.points').draggable({ containment: '#container', stack: '.points', opacity: 0.5, zIndex: 100 });
    });
</script> 
```

用户单击表单中的 img，创建一个具有相同 img 和文本的新 div。然后，该 div 应该可以拖动到 div 内具有容器 id 的任何位置。

当我创建点时，它不能被拖动。我的代码有什么遗漏吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:24:59.537

试试这个：

```
$(document).ready(function() {
    $('#point').click(function() {
        var alt = $('#point_name').val();
        var el = $('<div class="points"><img src="images/point.png" alt=\"'+alt+'\" />'+alt+'</div>');
        $('#container').append(el);
        $(el).draggable({ containment: '#container', stack: '.points', opacity: 0.5, zIndex: 100 });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:25:14.537

```
 $(document).ready(function() {
            $('#point').click(function() {
                var alt = $('#point_name').val();
                $('#container').append('<div class="points"><img src="images/point.png" alt=\"'+alt+'\" />'+alt+'</div>');
                //bind draggable to last inserted div 
                $('#container').find('.points:last').draggable({ containment: '#container', stack: '.points', opacity: 0.5, zIndex: 100 });            
             });
            $('.points').draggable({ containment: '#container', stack: '.points', opacity: 0.5, zIndex: 100 });
        }); 
```

# php - 在 PHP 中自动连接 OR 正则表达式

> ID：10787591
> 
> 赞同：0
> 
> 时间：2012-05-28T16:14:55.517
> 
> 标签：php, regex, concatenation

我有一个这样的 PHP 数组（来自 MySQL 数据库，YouTube 只是一个例子）：

```
[regexpr] => array(4) (
   [0] => (string) http://*.youtube.com/v/*
   [1] => (string) https://*.youtube.com/v/*
   [2] => (string) http://youtu.be/*
   [3] => (string) http://m.youtube.com/watch*
) 
```

现在，我想要实现的是在 URL 中找到*任何*匹配项（在这种情况下：检查 URL 是否是有效的 YouTube URL）。

我尝试过的是以下内容：

```
for($i = 0; $i < count($regexpr); $i++)
   $regexpr[$i] = preg_quote($regexpr[$i]); // because of the URLs

$expr = '/(('. implode('|', $regexpr) . '))/i'; // Concatenating the ORs

$found = preg_match($expr, 'http://www.youtube.com/[foo]&v=MyVidID', $matches); 
```

然而，不幸的是，我无法成功地连接这些表达式——我没有得到任何成功的“命中”。

有人能指点一下如何解决这个问题吗？

¡ 谢天谢地！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:19:31.463

问题是您的来源“正则表达式”：

```
http://*.youtube.com/v/*
       ^---            ^--- 
```

星号是“零个或多个前一个”字符，而不是通用通配符。因此，您正在使`/`字符成为可选的。你想要的可能`.*`是“零个或多个任意字符”

但是，您通过 preg_quote 传递它们，这将转义**任何**正则表达式元字符，因此实际上您没有传递任何通配符。您正在传递文字星号、文字句点等...

您应该自己逃避正则表达式并跳过 preg_quote 阶段，例如

```
http:\/\/.*\.youtube.com\/v\/.* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T16:28:48.907

如果您解析网址然后将它们与白名单进行比较会怎样？就像是：

```
$myurls= array('http://example.com', 'http://foo.com/', 'http://mysite.com/', 'http://youtube.com?feeble=2&blob=ixls');
$whitelist=array('foo.com', 'youtube.com');

foreach($myurls as $url){
    $parsed=parse_url($url);
    if(in_array($parsed['host'],$whitelist)) echo "$url OK";
} 
```

# javascript - 在for循环中覆盖函数

> ID：10787595
> 
> 赞同：1
> 
> 时间：2012-05-28T16:15:12.317
> 
> 标签：javascript, openlayers

我正在开发一个对矢量图层进行动态分类的 OpenLayers 应用程序。因此，我试图遍历特定数量的主题类（类别）并为里面的每个类定义一个过滤器。

一个名为*OpenLayers.Filter.Function*的 OpenLayers 对象代表每个过滤器。每个 OpenLayers.Filter.Function 都会覆盖 OpenLayers 类的 evaluate() 函数。

我的代码如下所示：

```
var rules = new Array();

for (var i = 0; i < numClasses; i++) {
    filter_x = function() {
    return new OpenLayers.Filter.Function({
            evaluate: function(attributes) {
                // some code to define the filter
                // uses specific values: array[i] & array[i+1
    }
    var rule_x = new OpenLayers.Rule({
        filter: filter_x,
        symbolizer: { fillColor: colors[i],
                    fillOpacity: 0.5, strokeColor: "white"}
    });
    rules.push(rule_x);
}
thematicStyle.addRules(rules); 
```

不幸的是，这不起作用。似乎所有过滤器都执行最后一个循环周期的评估（）函数。

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:43:14.423

您正在执行一个**可变**`i`的闭包，也就是说，对于您的所有规则，最终的值将是相同的，即. 是同一个变量，为所有迭代共享。在循环体内不会创建任何副本。**`i``numClasses - 1``i`**

 **这是正确的方法：

```
var rules = new Array();

for (var i = 0; i < numClasses; i++) (function (i) {
    filter_x = function() {
    return new OpenLayers.Filter.Function({
            evaluate: function(attributes) {
                // some code to define the filter
                // uses specific values: array[i] & array[i+1
    }
    var rule_x = new OpenLayers.Rule({
        filter: filter_x,
        symbolizer: { fillColor: colors[i],
                    fillOpacity: 0.5, strokeColor: "white"}
    });
    rules.push(rule_x);
})(i);
thematicStyle.addRules(rules); 
```

在 Javascript 的未来版本中，您将能够`let j = i`在 for 循环中执行操作，但现在，您仍受制于这些语义。**

# algorithm - 从未知数量的集合中选择元素

> ID：10787597
> 
> 赞同：1
> 
> 时间：2012-05-28T16:15:15.840
> 
> 标签：algorithm, permutation, combinations, combinatorics

我想列出所有可能的组合，这些组合是从用户输入的一组（未知）集合中选择每个集合中的至少一个和至多所有元素。一个元素可能在多个集合中，但不止一次列出它不是问题。

例如：- 如果用户输入 3 组为

```
{1,3,5}
{2,4}
{1} 
```

输出

```
1,2,1
1,4,1
1,2,4,1
3,2,1
3,4,1
3,2,4,1
5,2,1
5,4,1
5,2,4,1
1,3,2,1
1,3,4,1
1,3,2,4,1
1,5,2,1
1,5,4,1
1,5,2,4,1
3,5,2,1
3,5,4,1
3,5,2,4,1
1,3,5,2,1
1,3,5,4,1
1,3,5,2,4,1 
```

C# 代码将更有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:49:10.490

看起来好像您想要输入集的*幂集的**笛卡尔积*，但您不感兴趣的皱纹包括空集，它正式地是任何集的幂集的成员。我强调了两个术语，对 SO 的搜索将为这些操作生成算法，可能还有 C# 代码。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:47:19.257

像这样的东西：（一组不包含重复项）

```
def permutate(set_to_perm, perm):
    Boolean used; 

    for elemen_set_  in set_to_perm:
        used = false

        for element_perm in perm
             if element_set_ == element_perm:
                 used = true;
                 break;
        if used false:
           if lengh(set_to_perm) < lenght(perm)
               permutate(set_to_perm, append element_set_ to perm)
           else:
               print per

take input from user;
set_to_perm = make a set from user input;
permutate(set_to_perm,[]): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:25:09.840

您可以使用递归算法枚举所需的所有集合：

```
 current_set = { }

 enumerate (list_of_sets):
    if (list_of_sets is empty):
       REPORT current_set
    f = list_of_sets.front()
    r = list_of_sets.tail() /* all sets except f */
    n = f.size()
    for (i = 0 .. n - 1):
       current_set.insert(f[i])
       rec (f, i + 1, r)
       current_set.remove(f[i])

 rec (set, index, remaining_sets):
    if (index == set.size()):
       enumerate(remaining_sets)
    else:
       current_set.insert(f[index])
       rec(set, index + 1, remaining_sets)
       current_set.remove(f[index])
       rec(set, index + 1, remaining_sets) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T22:58:45.840

由 F#

```
let rec comb n l =
  match n, l with
  | 0, _  -> [[]]
  | _, [] -> []
  | n, x::xs -> List.map (fun l -> x ::l) (comb (n - 1) xs) @ (comb n xs)

let powersets xs = seq {
    for i = 1 to List.length xs do
      for x in comb i xs -> x
  }

let rec powerset_out xs (acc:int list list) =
  if List.isEmpty xs then
    System.String.Join(",", seq { for el in acc do yield! el })
    |> printfn "%s"
  else
    let x::xs = xs
    for el in powersets x do
      powerset_out xs (acc @ [el]) 
```

执行示例：

```
> powerset_out [[1;3;5];[2;4];[1]] [];;
1,2,1
1,4,1
1,2,4,1
3,2,1
3,4,1
3,2,4,1
5,2,1
5,4,1
5,2,4,1
1,3,2,1
1,3,4,1
1,3,2,4,1
1,5,2,1
1,5,4,1
1,5,2,4,1
3,5,2,1
3,5,4,1
3,5,2,4,1
1,3,5,2,1
1,3,5,4,1
1,3,5,2,4,1 
```*

# c# - c# 重启for循环

> ID：10787598
> 
> 赞同：7
> 
> 时间：2012-05-28T16:15:18.570
> 
> 标签：c#, for-loop, restart

所以我有这几行代码：

```
string[] newData = File.ReadAllLines(fileName)
int length = newData.Length;
for (int i = 0; i < length; i++)
{
    if (Condition)
    {
       //do something with the first line
    }
    else
    {
      //restart the for loop BUT skip first line and start reading from the second
    }
} 
```

我已经尝试过使用 goto，但是正如您所看到的，如果我再次启动 for 循环，它将从第一行开始。

那么如何重新启动循环并更改起始行（从数组中获取不同的键）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T16:18:37.183

我认为 a`for loop`在这里是错误的循环类型，它没有正确表达循环的意图，并且肯定会向我建议您不会弄乱计数器。

```
int i = 0;
while(i < newData.Length) 
{
    if (//Condition)
    {
       //do something with the first line
       i++;
    }
    else
    {
        i = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T16:17:07.847

只需更改`index`for 循环的：

```
for (int i = 0; i < newData.Length; i++) // < instead of <= as @Rawling commented.
{
    if (//Condition)
    {
       //do something with the first line
    }
    else
    {
      // Change the loop index to zero, so plus the increment in the next 
      // iteration, the index will be 1 => the second element.
      i = 0;
    }
} 
```

请注意，这看起来像是一个出色的意大利面条代码...更改 for 循环的索引**通常**表明您做错了什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T16:17:21.653

只需`i = 0`在您的`else`声明中设置；然后`i++`in 循环声明应将其设置为`1`并因此跳过第一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:18:07.183

```
string[] newData = File.ReadAllLines(fileName)

for (int i = 0; i <= newData.Length; i++)
{
    if (//Condition)
    {
       //do something with the first line
    }
    else
    {
      //restart the for loop BUT skip first line and start reading from the second
      i = 0;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T16:20:45.533

您只需重置`i`并调整数组大小

```
int length = newData.Length; // never computer on each iteration
for (int i = 0; i < length; i++)
{
    if (condition)
    {
       //do something with the first line
    }
    else
    {
      // Resize array
      string[] newarr = new string[length - 1 - i];
      /*
       * public static void Copy(
       *    Array sourceArray,
       *    int sourceIndex,
       *    Array destinationArray,
       *    int destinationIndex,
       *    int length
       * )
       */
      System.Array.Copy(newData, i, newarr, 0, newarr.Length); // if this doesn't work, try `i+1` or `i-1`
      // Set array
      newData = newarr;
      // Restart loop
      i = 0;
    }
} 
```

# .net - 将 MySQL 查询添加到 PHPMYAdmin

> ID：10787599
> 
> 赞同：0
> 
> 时间：2012-05-28T16:15:26.030
> 
> 标签：.net, mysql

我使用 MYSQL Workbench 在 Visual Studio 中创建了一个带有 MYSQL 的项目。它工作正常。然后我去我的托管服务提供商并尝试添加存储的过程

错误 SQL 查询：

创建过程 spLogin_VerifyUser( IN User VARCHAR( 50 ) , IN Pass VARCHAR( 50 ) , OUT ChurchID INT ) BEGIN DECLARE ChurchIDTemp INT DEFAULT 0;

MySQL 说：

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

当我尝试添加以下存储过程时：

```
create procedure spLogin_VerifyUser(IN User VARCHAR(50),IN Pass VARCHAR(50),OUT ChurchID INT)
begin
DECLARE ChurchIDTemp INT DEFAULT 0;
select idchurch into ChurchIDTemp FROM loginusers
WHERE Username=User and Password=Pass;
select IFNULL(ChurchIDTemp,0) into ChurchID;
end
;; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:18:51.170

尝试

```
delimiter |
create procedure spLogin_VerifyUser(IN User VARCHAR(50),IN Pass VARCHAR(50),OUT ChurchID INT)
begin
    DECLARE ChurchIDTemp INT DEFAULT 0;
    select idchurch into ChurchIDTemp FROM loginusers
    WHERE Username=User and Password=Pass;

    select IFNULL(ChurchIDTemp,0) into ChurchID;
end;
| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:18:40.780

是完整版的 MySQL 还是社区版？

社区版是免费的，但不允许存储过程。

（几年前我也遇到过同样的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:25:02.553

这是一个常见的错误。

您可能已经知道 mySQL 允许过程，但 phpMyAdmin 允许您设计它们。现在，如果您已经在其他地方编写了一个并希望 phpMyAdmin 简单地执行它，那么请确保：

1.  您没有免费的社区版 mySQL，因为它不允许存储过程。我相信这是不同版本和 phpMyAdmin 之间的兼容性问题。检查以下可能的解决方案。

参考这个：[http ://tycoontalk.freelancer.com/the-database-forum/117270-phpmyadmin-and-procedures.html](http://tycoontalk.freelancer.com/the-database-forum/117270-phpmyadmin-and-procedures.html)

在数据库的 PhpMyAdmin 列表中应该是 information_schema。其中有一个表名 ROUTINES。你通过发出一个查询它

```
select ROUTINE_NAME from ROUTINES; 
```

这将输出存储过程名称的列表。要查看过程，请运行查询

```
show create procdure [procedure name from above select] 
```

# java - 游戏事件运行良好，但场景不渲染

> ID：10787600
> 
> 赞同：0
> 
> 时间：2012-05-28T16:15:44.247
> 
> 标签：java, rendering, game-engine, lwjgl

我正在创建自己的简单游戏引擎，用于我即将进行的一些项目。我有一个世界对象，它存储了一堆扩展基类 RenderObject 的对象。

RenderObject 包含诸如缩放旋转位置是否平滑着色等内容，并强制所有扩展类实现自己的方法 render()。

为了导航我的世界，我有一个 FPS 风格的相机控制设置，我已经通过 system.out.println() 对其进行了测试，以检查俯仰和偏航，它工作正常。

**但是，我的所有对象都没有渲染。我的世界对象有一个名为 renderObjects() 的方法，它循环遍历世界中的所有对象并调用它们的 render() 函数。** *已修复 - 新问题...现在我得到 4 个 2x2 像素点，它们在特定位置随机飞来飞去。然后我移动鼠标，整个集群移动。每个游戏tick都会调用onUpdate()方法，然后lookThrough()*

FPSCameraControl.java

```
public class FPSCameraControl
{
    private boolean DEBUG = false;

    public Vector3f position = null;
    public float yaw = 0.0f;
    public float pitch = 0.0f;

    public FPSCameraControl(float x, float y, float z)
    {
        position = new Vector3f(x, y, z);
    }
    public void yaw_(float amount)
    {
        yaw -= amount;
        if(yaw>360){
            yaw=0+(yaw-360);
        }
        if(yaw<1){
            yaw=360-(1-yaw);
        }
    }
    public void pitch_(float amount)
    {
        pitch -= amount;
        if(pitch>=155)
        {
            pitch=155;
        }
        if(pitch<=25)
        {
            pitch=25;
        }
    }
    public void walkForward(float distance)
    {
        position.x -= -distance * (float)Math.sin(Math.toRadians(yaw));
        position.z += -distance * (float)Math.cos(Math.toRadians(yaw));
    }
    public void walkBackwards(float distance)
    {
        position.x += -distance * (float)Math.sin(Math.toRadians(yaw));
        position.z -= -distance * (float)Math.cos(Math.toRadians(yaw));
    }
    public void strafeLeft(float distance)
    {
        position.x -= distance * (float)Math.sin(Math.toRadians(yaw-90));
        position.z += distance * (float)Math.cos(Math.toRadians(yaw-90));
    }
    public void strafeRight(float distance)
    {
        position.x -= distance * (float)Math.sin(Math.toRadians(yaw+90));
        position.z += distance * (float)Math.cos(Math.toRadians(yaw+90));
    }
    public void lookThrough()
    {
        GL11.glRotatef(pitch, 1.0f, 0.0f, 0.0f);
        GL11.glRotatef(yaw, 0.0f, 1.0f, 0.0f);
        GL11.glTranslatef(position.x, position.y, position.z);
    }
    public void onUpdate()
    {
        debug("Updating View");

        //Calculate Sensitivity

        float sen = (0.02F*10);

        debug("Sensitivity: " + sen);

        //Get Center Of Screen

        int cx = Display.getDisplayMode().getWidth()/2;
        int cy = Display.getDisplayMode().getHeight()/2;

        //Get Mouse Position From Center

        int x = Mouse.getX()-cx;
        int y = Mouse.getY()-cy;

        debug("Mouse Moved: " + x + ", " + y);

        //Apply Inverting If Set

        //Apply Sensitivity

        float _yaw = (x*sen);
        float _pitch = (y*sen);

        yaw_(_yaw);
        pitch_(_pitch);

        debug("New Yaw: " + yaw);
        debug("New Pitch: " + pitch);

        UpdatePosition();

        //SET MOUSE TO CENTER

        Mouse.setCursorPosition(cx, cy);

        lookThrough();
    }
    public void printROT()
    {
        System.out.println("Pitch : "+pitch);
        System.out.println("Yaw : "+yaw);
        System.out.println();
        System.out.println("XYZ : "+position.x+", "+position.y+", "+position.z);
    }

    public void debug(String msg)
    {
        if(DEBUG)
        {
            System.out.println(msg);
        }
    }

    public void UpdatePosition()
    {
        float f=0;
        float b=0;
        float r=0;
        float l=0;
        boolean moved =false;
        boolean shift = Keyboard.isKeyDown(Keyboard.KEY_LSHIFT);
        if(Keyboard.isKeyDown(Keyboard.KEY_W))
        {
            if(shift)
            {
                f=0.04F;
            }
            else
            {
                f=0.02F;
            }
            moved=true;
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_S))
        {
            if(shift)
            {
                b=0.04F;
            }
            else
            {
                b=0.02F;
            }
            moved=true;
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_D))
        {
            if(shift)
            {
                r=0.025F;
            }
            else
            {
                r=0.016F;
            }
            moved=true;
        }
        if(Keyboard.isKeyDown(Keyboard.KEY_A))
        {
            if(shift)
            {
                l=0.02F;
            }
            else
            {
                l=0.016F;
            }
            moved=true;
        }
        if(moved)
        {
            walkForward(f);
            walkBackwards(b);
            strafeLeft(l);
            strafeRight(r);
        }
    }
} 
```

渲染对象.java

```
public abstract class RenderObject
{
    public  double []  location  =  new  double [] {0, 0, 0};
    public  double []  rotation  =  new  double [] {0, 0, 0};
    public  double []     scale  =  new  double [] {1, 1, 1};
    public Color color = new Color(180, 180, 180);

    public boolean smooth = false;

    public RenderObject parent = null;
    public LinkedList<RenderObject> children = new LinkedList<RenderObject>();

    public abstract void render();

    public void setScale(double x, double y, double z)
    {
        scale = new double[]{x, y, z};
    }

    public void setParent(RenderObject object)
    {
        parent = object;
    }
    public void removeParent()
    {
        parent = null;
    }
    public RenderObject getParent()
    {
        return parent;
    }
    public void addChild(RenderObject object)
    {
        object.setParent(this);
        children.add(object);
    }
    public void removeChild(RenderObject object)
    {
        if(children.contains(object))
        {
            object.removeParent();
            children.remove(object);
        }
    }
} 
```

和 RenderCube.java

```
public class RenderCube extends RenderObject
{
    @Override
    public void render()
    {
        if(smooth)
        {
            GL11.glShadeModel(GL11.GL_SMOOTH);
        }
        else
        {
            GL11.glShadeModel(GL11.GL_FLAT);
        }
        GL11.glBegin(GL11.GL_QUADS);

        GL11.glPushMatrix();

        GL11.glColor3b( color.getRedByte(),color.getGreenByte(), color.getBlueByte() );

        GL11.glRotated(rotation[0], 1.0, 0.0, 0.0);
        GL11.glRotated(rotation[1], 0.0, 1.0, 0.0);
        GL11.glRotated(rotation[2], 0.0, 0.0, 1.0);

        //TOP
        GL11.glNormal3d(0.0, 1.0, 0.0);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]-scale[2]);

        //BOTTOM
        GL11.glNormal3d(0.0, -1.0, 0.0);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]-scale[2]);

        //FRONT
        GL11.glNormal3d(0.0, 0.0, 1.0);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]+scale[2]);

        //BACK
        GL11.glNormal3d(0.0, 0.0, -1.0);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]-scale[2]);

        //RIGHT
        GL11.glNormal3d(1.0, 0.0, 0.0);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]+scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]+scale[0], location[1]-scale[1], location[2]+scale[2]);

        //LEFT
        GL11.glNormal3d(-1.0, 0.0, 0.0);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]+scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]+scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]-scale[2]);
        GL11.glVertex3d(location[0]-scale[0], location[1]-scale[1], location[2]+scale[2]);

        Color _color = new Color(180, 180, 180);

        GL11.glColor3b( _color.getRedByte(),_color.getGreenByte(), _color.getBlueByte() );

        GL11.glPopMatrix();

        GL11.glEnd();
    }
} 
```

有谁看到什么可能不起作用？因为我没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:51:17.927

什么都没有渲染。

当我添加：

```
GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();
GL11.glOrtho(-500, 500, -281, 281, -1, 1);
GL11.glMatrixMode(GL11.GL_MODELVIEW); 
```

它开始渲染，我没想到此时我正在正交视图中渲染。我将其替换为：

```
GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();      
GLU.gluPerspective(45.0f, ((float) 800) / ((float) 600), 0.1f, 100.0f);
GL11.glMatrixMode(GL11.GL_MODELVIEW);
GL11.glHint(GL11.GL_PERSPECTIVE_CORRECTION_HINT, GL11.GL_NICEST); 
```

并且场景完全渲染。但是我的相机还是有点乱，但这证明了我的引擎到目前为止工作正常。相机不是引擎的一部分，它是我为测试而制作的，所以“引擎”工作正常。

为简单起见，我将让 World 包含一个 Camera 对象，该对象将控制观看位置、角度、FoV 等。

感谢@pwny 的帮助-您确实提供了帮助，只是一个简单的更改。

# magento - Magento 两次显示顶部菜单

> ID：10787601
> 
> 赞同：3
> 
> 时间：2012-05-28T16:16:07.747
> 
> 标签：magento

Magento 升级后两次显示顶部（类别）菜单，请参见屏幕截图。

在我看来，文件中`top.phtml`的行正在执行两次。`<?php echo $this->getChildHtml('topMenu') ?>``header.phtml`

我已经尝试为这些文件中的每一个切换到默认代码（即从基本/默认主题），但我得到了相同的结果。我还检查了后端管理员，当我选择一个类别并从`Include in Navigation Menu`该类别中选择“否”时，它会从菜单的两次迭代中消失。

任何人都可以提出可能的解决方案或行动方案。

Magento 社区版 1.7.0.0

![在此处输入图像描述](../Images/7dd3945453dc6e486fe7d063914ca133.png)

**编辑：**我发现将**system>config>design>themes>layout**设置为原始（下载的）主题而不是我自己的主题会使问题消失，但是我需要保留布局模型，所以我仍然需要隔离问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T03:20:04.130

从 1.6 升级到 1.7.0.2 后，这个问题在我的网站上出现了。

1.6 使用 top.phtml 来渲染菜单。我已经自定义了 top.phtml 并通过 mytheme/layout/catalog.xml 在我的自定义主题中包含了更改

```
 <reference name="top.menu">
        <block type="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml"/>
        </reference> 
```

1.7.0.2 现在似乎使用模块 topmenu.phtml 来呈现菜单。

因此，我通过删除catalog.xml 中的调用来删除我的自定义，并将我的自定义添加回topmenu.phtml。

不再有双重菜单！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T17:15:39.780

从 1.6 升级到 1.7 后我遇到了同样的问题，并且能够通过删除以下代码来解决它

```
<reference name="top.menu">
    <block type="catalog/navigation" name="catalog.topnav" template="catalog/navigation/top.phtml"/>
</reference> 
```

在。。。之初

```
/design/frontend/mytheme/default/layout/catalog.xml 
```

在原始 1.6 文件的开头提到了此代码（因此也在我的主题中复制了），但在原始 1.7 文件中，此代码似乎已被删除。

希望这可以帮助！？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:21:16.107

将当前的 page.xml 布局与之前的或基本的布局进行比较，看看您是否可能再次添加顶部菜单。导航在 page.xml 的这个块中定义

```
<block type="core/text_list" name="top.menu" as="topMenu" translate="label">
    <label>Navigation Bar</label>
    <block type="page/html_topmenu" name="catalog.topnav" template="page/html/topmenu.phtml"/>
</block> 
```

在您的设计文件夹中查看 top.menu 或 catalog.topnav 字符串，看看它们是否在其他任何地方复制。

# c++ - 此用例是否需要读写锁

> ID：10787603
> 
> 赞同：0
> 
> 时间：2012-05-28T16:16:09.033
> 
> 标签：c++, multithreading, readwritelock

我的问题与[此线程](https://stackoverflow.com/questions/3225223/do-i-need-to-protect-this-variable-with-a-lock)类似，但是我确定在给定线程中得出的结论是否适用于此。

我的用例：在应用程序中，有一个状态线程每 1 秒发送一次相同的文本信息。文本信息包含应用程序组名称。状态读取器使用此状态来确定应用程序服务器是否打开/关闭。

现在应用程序组名称可以在其生命周期内更改。由于某些用户活动，确保只有应用程序中的单个线程触发此事件。现在这个单线程有我需要更新到我的状态线程的新应用程序组名称。

我目前的实现如下

1.  状态线程 Main() Take ReadLock 读取应用组名 Release the ReadLock

    发送状态

2.  Updater Thread Main() 获取写锁 更新组名 释放 WriteLock

但是，由于要发送大量更新，我担心我可能会因重负载而导致性能下降。所以我正在努力执行以下操作，但我不确定这是否可行。

新提议的实施是

1.  发送者线程持有 char* ptr、char[1024] primaryData、char[1024] secondaryData。
2.  首次启动应用程序时，组名在 primaryData 中更新，并且 ptr 指向 primaryData。
3.  每当更新线程有更新事件时，它会检查是否 (ptr == primaryData) 将新应用程序名称复制到辅助数据 ptr = secondaryData else 将新应用程序名称复制到primaryData。ptr = 主数据
4.  状态线程将始终使用 ptr 指向的数据来发送状态。状态线程最终将接收更新的 ptr（考虑缓存一致性）并将开始传输新数据。

这里有几点需要考虑。1.即使状态线程不能立即获得新数据也没关系 2.我不希望由于无效的内存访问而导致程序崩溃。

朋友们，你能告诉我上面的逻辑是否能帮助我避免读写锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:31:14.307

在具有单个读取器和单个写入器的场景中的读写锁与普通的旧互斥锁没有什么不同。只需使用互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:20:52.103

> 您能否告诉我上述逻辑是否可以帮助我避免读写锁定。

不，这个逻辑不会让你避免锁定。提议的方案充满了竞争条件。

我的建议是使用`char`状态和更新线程共享的单个数组和单个互斥锁。这将导致非常简单的逻辑，很容易正确。

如果 - 并且仅当 - 事实证明这会导致不可接受的锁争用，您应该考虑进一步优化。

# opensocial - 如何嵌入 OpenSocial 小工具

> ID：10787605
> 
> 赞同：0
> 
> 时间：2012-05-28T16:16:17.103
> 
> 标签：opensocial

我在 Jira 仪表板中有一个小工具。谁能清楚简单地解释我如何在我的 html 页面上显示小工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:43:29.413

如果您想在自己的 html 页面上显示 Jira 小工具，您的站点必须是 OpenSocial 容器。尝试下载并运行参考容器 Apache Shindig。

如果您想使用访问受保护资源的小工具（例如“我的活动”），那么您还需要实现 OAuth 消费者功能来使用 Jira 服务器（OAuth 生产者）上的资源。我现在不记得是否有开箱即用的有效消费者实现。将您的网站注册为 Jira 上的外部应用程序，设置正确的使用者密钥，您应该一切顺利。

# xml - E4X 选择后代可以是 A OR B 或 A && B 的节点

> ID：10787607
> 
> 赞同：4
> 
> 时间：2012-05-28T16:16:29.037
> 
> 标签：xml, actionscript-3, e4x

所以我有这个 XML 结构：

```
<Items>
<Item name="aaa">
    <ProductRanges>
        <ProductRange id="1" />
    </ProductRanges>
</Item>
<Item name="bbb">
    <ProductRanges>
        <ProductRange id="2" />
    </ProductRanges>
</Item>
<Item name="ccc">
    <ProductRanges>
        <ProductRange id="1" />
        <ProductRange id="2" />
    </ProductRanges>
</Item>
</Items> 
```

使用以下 E4X 查询，我只得到项目“aaa”和项目“bbb”。

```
trace(   Items.Item.(descendants("ProductRange").@id == "1" || descendants("ProductRange").@id == "2")   ); 
```

但是，我可以明白为什么我没有看到项目“ccc”，因为它既是 id="1" && "2"

所以不确定这里应该是什么正确的查询，即使后代是正确的技术。

我也不想做冗长的额外 id="1" && id="2" 查询，因为我有这些值的无限组合（"2" && "3"、"1" && "2" && " 3") 等。

任何想法都会最有帮助..

谢谢

* * *

所以帕特里克用这个表达式解决了这个问题：

```
xml.Item.(descendants('ProductRange').(@id=="1" || @id=="2").length()>0); 
```

但是，更进一步，如何动态创建@id 值，因为这将是一个根据用户选择而变化的查询。

像这样的东西（但是这个，但这不起作用）：

```
var attributeValues:String = "@id==\"1\" || @id==\"2\" || @id==\"3\" || @id==\"4\"";
xml.Item.(descendants('ProductRange').(attributeValues).length()>0); 
```

还有更多想法帕特里克..有人吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:39:15.253

对于 Or 搜索，您可以简单地执行以下操作：

```
xml.Item.(descendants('ProductRange').(@id=="1" || @id=="2").length()>0); 
```

* * *

使用自定义过滤器功能，您可以进行比 Or 更复杂的 And 搜索：

```
var xml:XML=<Items>
<Item name="aaa">
    <ProductRanges>
        <ProductRange id="1" />
    </ProductRanges>
</Item>
<Item name="bbb">
    <ProductRanges>
        <ProductRange id="2" />
    </ProductRanges>
</Item>
<Item name="ccc">
    <ProductRanges>
        <ProductRange id="1" />
        <ProductRange id="3" />
        <ProductRange id="2" />
    </ProductRanges>
</Item>
</Items>;

function andSearch(node:XMLList, searchFor:Array) {
    var mask:int = 0;
    var match:int = (1 << searchFor.length ) - 1;
    var fn:Function = function(id:String) {
        var i:int = searchFor.indexOf(id);
        if (i >= 0) {
            mask = mask | (1<<i);
        }
        return mask==match;
    }
    node.(ProductRange.(fn(@id)));
    return mask==match;
}

trace( xml.Item.( andSearch( ProductRanges, ["1", "2"] ) ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:32:52.337

这可能很混乱，但请耐心等待：

```
Items.Item.(
    ( descendants("ProductRange").@id == "1" || descendants("ProductRange").@id == "2" ) ||
    ( descendants("ProductRange").@id == "1" && descendants("ProductRange").@id == "2" )
) 
```

# android - 在 LinearLayout 上设置背景图像

> ID：10787608
> 
> 赞同：3
> 
> 时间：2012-05-28T16:16:34.900
> 
> 标签：android

有没有办法可以将背景图像添加到 LinearLayout，以便将按钮控件绘制到其上？我试图查看是否有办法将位图作为 LinearLayout 的背景，但找不到方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T16:20:40.970

您可以使用 xml-Tag`android:background="@drawable/yourbackground"`或通过代码设置它 `setBackgroundResource(int)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T12:59:45.190

使用框架布局并放置图像视图，然后像这样放置线性布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="centerCrop"
    app:srcCompat="@drawable/chrysanthemum"
    android:contentDescription="@string/todo" />

<LinearLayout
    android:id="@+id/linearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <TextView
        android:id="@+id/quan"
        android:layout_width="107dp"
        android:layout_height="56dp"
        android:gravity="center"
        android:text="quantity"
        android:textAllCaps="true"
        android:textColor="#000000" />

</LinearLayout>
</FrameLayout> 
```

# css - 在属性值中使用 % 和 for 循环变量时出现 SASS 错误

> ID：10787609
> 
> 赞同：0
> 
> 时间：2012-05-28T16:16:35.480
> 
> 标签：css, for-loop, syntax-error, sass

我正在尝试编写一些 SASS（.scss）来为捐赠晴雨表生成 CSS（想想进度条）。

我需要的 CSS 看起来像这样：

```
.p-0:after {
    left: 0%;
}

.p-1:after {
    left: 1%;
}

[... up to 100] 
```

我拥有的 SASS 是这样的：

```
@for $i from 0 through 100 {
    .p-#{$i}:after {left: #{$i}%;}
} 
```

这给了我这个错误：

```
Syntax error: Invalid CSS after "...r {left: #{$i}%": expected expression (e.g. 1px, bold), was ";}" 
```

奇怪的是，如果我将上述 SASS 中的“%”替换为“px”，SASS 会非常酷，但这不是我需要的。

也许这是非常明显的，但我对这个 SASS 东西很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:41:40.210

它看起来很奇怪，但尝试将值乘以 1%：

```
@for $i from 0 through 100 {
  .p-#{$i}:after {left: #{$i*1%};}
} 
```

# c++ - 检查指向自定义类的指针是否不再存在

> ID：10787614
> 
> 赞同：0
> 
> 时间：2012-05-28T16:16:55.713
> 
> 标签：c++, winapi

我有一个由引用传递的另一个对象构造的对象。传递给构造函数的对象如下所示：

```
 HTTPServerResponse::HTTPServerResponse(Poco::Net::HTTPServerResponse &response) 
```

我的包装类 ( `HTTPServerResponse`)`response`在某些时候会破坏，但它不会自行破坏。`response`实际上，即使在我的课堂之外，也有多种（外部）原因可能会被破坏。

我想要的是在调用任何其他方法`response`检查它的存在之前。

我试过了：

```
if(!response) {... 
```

哪个产生了`error C2675: unary '!' : 'Poco::Net::HTTPServerResponse' does not define this operator or a conversion to a type acceptable to the predefined operator`；当然，我也尝试过：

```
if(response) {... 
```

这也失败了`error C2451: conditional expression of type 'Poco::Net::HTTPServerResponse' is illegal; No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called`

我该如何解决这个烂摊子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:26:31.883

您永远无法知道您指向的引用或指针是否无效（请参阅[为什么我不需要检查引用是否无效/空？](https://stackoverflow.com/questions/2524870/c-why-dont-i-need-to-check-if-references-are-invalid-null)）。

您只需要小心（并清楚）谁拥有引用/指针以及谁应该删除它。为了帮助获得所有权，您可以使用 std::unique_ptr 或 std::shared_ptr （在 C++0x 中，使用 boost 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T19:57:19.727

我最终让整个线程保持忙碌，防止对象被删除，直到我完成它。我知道，这是乡巴佬，但它为我省去了在整个代码中进行乡巴佬的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:02:32.670

你真的必须知道对象是否存在吗？阅读接收器设计模式。它在 Boost Asio 中很常见。如果您使用的是指针，则必须记住在删除等之后为空指针...尝试使用 smart_ptr。

对我来说，很难想象为什么需要检查指针是否仍然存在。您的代码中存在设计问题。

# php - 如何从 Android 应用程序连接到 PHP 和 MySql？

> ID：10787625
> 
> 赞同：-1
> 
> 时间：2012-05-28T16:17:40.020
> 
> 标签：php, android, mysql

我想做一个可以检索位置、向 Ozeki NG 服务器发送短信的 android 应用程序。发送消息后，可以将消息的详细信息保存到 MySQL 并从 PHP 中查看。任何人都可以教我如何将 android 短信应用程序连接到 MySQL 和 PHP？

我已经测试过了。它可以检索经度和纬度，但会出现谷歌地图。是我的编码有问题吗？这是我第一次创建android应用程序，非常感谢大家的帮助。谢谢

ParkingPaymentLBSMapsActivity.java

```
package com.android.googlemap;

import com.google.android.maps.GeoPoint
import com.google.android.maps.GeoPoint;`
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class ParkingPaymentLBSMapsActivity extends MapActivity {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

protected LocationManager locationManager;

protected Button retrieveLocationButton;

MapController mControl;
GeoPoint GeoP;
MapView mapV;
MyLocationOverlay compass;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapV = (MapView) findViewById(R.id.mapView);
    mapV.displayZoomControls(true);
    mapV.setBuiltInZoomControls(true);

    double lat = 40.8;
    double longi = -96.666;

    GeoP = new GeoPoint ((int) (lat *1E6), (int) (longi *1E6) );

    mControl = mapV.getController();        
    mControl.animateTo(GeoP);
    mControl.setZoom(13);

    compass = new MyLocationOverlay(this, mapV);
    mapV.getOverlays().add(compass);

    Button next = (Button) findViewById(R.id.nextbtn);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent myIntent = new Intent(view.getContext(), SMS.class);
            startActivityForResult(myIntent, 0);
        }

       });

    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
            );

    retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showCurrentLocation();
        }

    });

}

protected void showCurrentLocation() {
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (location != null) {
        String message = String.format(
                "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(ParkingPaymentLBSMapsActivity.this, message,
                Toast.LENGTH_LONG).show();                  
    }
}

private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(ParkingPaymentLBSMapsActivity.this, message, Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(ParkingPaymentLBSMapsActivity.this, "Provider status changed",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
            Toast.makeText(ParkingPaymentLBSMapsActivity.this,
                    "Provider disabled by the user. GPS turned off",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            Toast.makeText(ParkingPaymentLBSMapsActivity.this,
                    "Provider enabled by the user. GPS turned on",
                    Toast.LENGTH_LONG).show(); 
```

}

```
 }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        compass.disableCompass();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        compass.enableCompass();
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

短信.java

```
package com.android.googlemap;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.telephony.gsm.SmsManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SMS extends Activity{

Button btnSendSMS;
EditText txtPhoneNo;
EditText txtMessage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sms);        
    btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
    txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
    txtMessage = (EditText) findViewById(R.id.txtMessage);

    Button next = (Button) findViewById(R.id.Button02);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish();
        }

    });

    btnSendSMS.setOnClickListener(new View.OnClickListener() 
    {
        public void onClick(View v) 
        {               
            String phoneNo = txtPhoneNo.getText().toString();
            String message = txtMessage.getText().toString();               
            if (phoneNo.length()>0 && message.length()>0)                
                sendSMS(phoneNo, message);                
            else
                Toast.makeText(getBaseContext(), 
                    "Please enter both phone number and message.", 
                    Toast.LENGTH_SHORT).show();
        }
    });        
}

//---sends a SMS message to another device---
private void sendSMS(String phoneNumber, String message)
{      
    /*
    PendingIntent pi = PendingIntent.getActivity(this, 0,
            new Intent(this, test.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, pi, null);        
    */

    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                      
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);               
} 
```

}

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.android.googlemap"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

<uses-library android:name = "com.google.android.maps" />

    <activity
        android:name=".ParkingPaymentLBSMapsActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<activity android:name=".SMS"></activity>

</application>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.SEND_SMS">
</uses-permission>
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission>

<uses-sdk android:minSdkVersion="10" />

</manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0VV4vaNBXBx4Vu19jim2eoGAn5BnbatPvHRer5Q"
             />

<Button
    android:id="@+id/retrieve_location_button"
    android:text="Retrieve Location"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

<Button
    android:id="@+id/nextbtn"
    android:layout_width="wrap_content"
    android:layout_height="55px"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/retrieve_location_button"
    android:text="Next"
    android:textSize="18px" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:28:42.967

最好的建议是查找[REST](http://www.gen-x-design.com/archives/create-a-rest-api-with-php/)或 SOPA API。使用 PHP 进行设置以访问您的 MySQL，并在 Java 中查找如何发送 HTTP 请求。

又名，类似于：[如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)

# iphone - iOS 5 中是否有标准方法可以像在联系人中一样进行删除确认？

> ID：10787632
> 
> 赞同：2
> 
> 时间：2012-05-28T16:18:12.190
> 
> 标签：iphone, ios, cocoa-touch

iOS 5 中是否有标准方式来显示此屏幕截图中的删除确认？

如果没有标准的方法，任何解决方案都是好的。

![删除确认](../Images/b43f9d794afcd5752284091ef4e2691a.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T16:19:33.637

这是一个`UIActionSheet`具有破坏性的按钮集。请参阅[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)。

例如

```
// Create the action sheet
UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                   delegate:self 
                                          cancelButtonTitle:@"Cancel" 
                                     destructiveButtonTitle:@"Delete" 
                                         otherButtonTitles:nil];

...

- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if (buttonIndex == actionSheet.destructiveButtonIndex) {
        // Do the delete
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T16:29:36.163

您可以使用 UIActionSheet 如下。

```
UIActionSheet *actionSheet = [UIActionSheet alloc] initWithTitle:@"Confirm" delegate:aDelegate cancelButtonTitle:nil destructiveButtonTitle:@"Delete" otherButtonTitles:@"Cancel", nil];
[actionSheet showFromRect:aRect inView:aView animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-17T19:19:07.263

`UIActionSheet`在 iOS 8 中已弃用。而是使用[`UIAlertController`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAlertController_class/)首选样式`UIAlertControllerStyleActionSheet`.

```
// Create a new alert, with an (optional) title and message
UIAlertController* alert = [UIAlertController alertControllerWithTitle:nil
                                                               message:nil
                                                        preferredStyle:UIAlertControllerStyleActionSheet];

// When style is set to UIAlertActionStyleDestructive, the button appears with red text
UIAlertAction* deleteAction = [UIAlertAction actionWithTitle:@"Delete"
                                                       style:UIAlertActionStyleDestructive
                                                     handler:^(UIAlertAction * action) {                                     
                                                          // ========
                                                          // Perform your delete operation here...
                                                          // ========
                                                      }];

// This cancel action will appear separated from the rest of the items
UIAlertAction* cancelAction = [UIAlertAction actionWithTitle:@"Cancel"
                                                       style:UIAlertActionStyleCancel
                                                     handler:^(UIAlertAction * action) {}];

// Add the actions to the alert
[alert addAction:deleteAction];
[alert addAction:cancelAction];

// Present the sheet.
[self presentViewController:alert animated:YES completion:nil]; 
```

我通常忽略删除确认的标题和消息字段，因为我发现 iOS 上的内置应用程序（如联系人、消息、邮件等）通常不使用这些字段。按钮不言自明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:19:45.163

请参阅该 UI 组件的文档：[UIActionSheet](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)和[UIActionSheetDelegate](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIModalViewDelegate_Protocol/UIActionSheetDelegate/UIActionSheetDelegate.html)

# r - ddply + summarise 用于在大量列中重复相同的统计函数

> ID：10787640
> 
> 赞同：23
> 
> 时间：2012-05-28T16:19:03.513
> 
> 标签：r, multiple-columns, plyr, idioms, split-apply-combine

好的，接下来是第二个 R 问题。

我的数据：

```
 Timestamp    St_01  St_02 ...
1 2008-02-08 00:00:00  26.020 25.840 ...
2 2008-02-08 00:10:00  25.985 25.790 ...
3 2008-02-08 00:20:00  25.930 25.765 ...
4 2008-02-08 00:30:00  25.925 25.730 ...
5 2008-02-08 00:40:00  25.975 25.695 ...
... 
```

基本上通常我会使用`ddply`和的组合`summarize`来计算合奏（例如全年每小时的平均值）。

在上述情况下，我将创建一个类别，例如小时（例如`strptime(data$Timestamp,"%H") -> data$hour`，然后在 中使用该类别`ddply`，例如`ddply(data,"hour", summarize, St_01=mean(St_01), St_02=mean(St_02)...)`按每个列的类别进行平均。

但这是它变得粘稠的地方。我有 40 多列要处理，我不准备将它们一一键入作为`summarize`函数的参数。我曾经在 shell 中编写一个循环来生成这段代码，但这不是程序员解决问题的方式吗？

所以祈祷告诉，有没有人有更好的方法来实现相同的结果，但击键次数更少？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-28T16:28:52.353

您可以使用`numcolwise()`对所有数字列运行摘要。

这是一个使用示例`iris`：

```
ddply(iris, .(Species), numcolwise(mean))
     Species Sepal.Length Sepal.Width Petal.Length Petal.Width
1     setosa        5.006       3.428        1.462       0.246
2 versicolor        5.936       2.770        4.260       1.326
3  virginica        6.588       2.974        5.552       2.026 
```

* * *

同样，`catcolwise()`要对所有分类列进行汇总。

有关`?numcolwise`更多帮助和示例，请参阅。

* * *

**编辑**

另一种方法是使用`reshape2`（由@gsk3 提出）。在此示例中，这有更多的击键，但为您提供了极大的灵活性：

图书馆（重塑2）

```
miris <- melt(iris, id.vars="Species")
x <- ddply(miris, .(Species, variable), summarize, mean=mean(value))

dcast(x, Species~variable, value.var="mean")
     Species Sepal.Length Sepal.Width Petal.Length Petal.Width
1     setosa        5.006       3.428        1.462       0.246
2 versicolor        5.936       2.770        4.260       1.326
3  virginica        6.588       2.974        5.552       2.026 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-25T14:14:40.830

您甚至可以通过完全省略 ddply 调用来简化 Andrie 提出的第二种方法。只需`mean`在 dcast 调用中指定为聚合函数：

```
library(reshape2)
miris <- melt(iris, id.vars="Species")
dcast(miris, Species ~ variable, mean)

     Species Sepal.Length Sepal.Width Petal.Length Petal.Width
1     setosa        5.006       3.428        1.462       0.246
2 versicolor        5.936       2.770        4.260       1.326
3  virginica        6.588       2.974        5.552       2.026 
```

使用该`data.table`包也可以非常快速地计算出相同的结果。j 表达式中的`.SD`变量是一个特殊的 data.table 变量，其中包含每个组的数据子集，不包括 中使用的所有列`by`。

```
library(data.table)
dt_iris <- as.data.table(iris)
dt_iris[, lapply(.SD, mean), by = Species]

     Species Sepal.Length Sepal.Width Petal.Length Petal.Width
1:     setosa        5.006       3.428        1.462       0.246
2: versicolor        5.936       2.770        4.260       1.326
3:  virginica        6.588       2.974        5.552       2.026 
```

另一个选择是 Hadley`dplyr`软件包的新版本 0.2

```
library(dplyr)
group_by(iris, Species) %>% summarise_each(funs(mean))

Source: local data frame [3 x 5]

     Species Sepal.Length Sepal.Width Petal.Length Petal.Width
1     setosa        5.006       3.428        1.462       0.246
2 versicolor        5.936       2.770        4.260       1.326
3  virginica        6.588       2.974        5.552       2.026 
```

# eclipse - 将 PhoneGap 应用程序导入 Dreamweaver 6

> ID：10787645
> 
> 赞同：0
> 
> 时间：2012-05-28T16:19:23.190
> 
> 标签：eclipse, cordova, dreamweaver

我正在尝试将之前在 Eclipse 中使用的 PhoneGap APP 导入 DW6。

我在 DW 中创建了一个新站点并将其指向 APPs 文件夹。当我去构建APP并重新下载它进行测试时。它似乎正在构建错误的APP。APP 显示“PhoneGap 正在运行”的警报，并在页面上显示“嘿，它是 PhoneGap！”

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:57:50.983

我遇到了同样的问题，并意识到这是因为 PhoneGap 将利用 DW 中的站点文件。在 DW 的右下角，您应该会看到站点的本地文件。您可以选择当前站点上的下拉菜单来管理站点并选择一个新站点并指向保存应用程序文件的 DIR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T20:21:37.690

我正在使用 Dreamweaver cs5.5，所以我可能不在基地，但在我看来，您的应用程序正在使用 Phonegap 的原始教程索引页面。查看并确保您的 DW 站点中没有错误的索引。

顺便说一句，你知道如何在不使用 Adob​​e 的付费服务的情况下构建 DW 应用程序吗？AFAIKT，DW 6 不允许开发人员在不支付 Adob​​e 费用的情况下构建应用程序。我不升级。我喜欢控制自己的应用程序。恕我直言，已经有太多中间人了。

祝你好运。

# symfony - 教义2中的类之间的多个CTI（类表继承）？

> ID：10787646
> 
> 赞同：7
> 
> 时间：2012-05-28T16:19:28.870
> 
> 标签：symfony, doctrine, doctrine-orm

我想在 Doctrine2 中有以下层次结构：

```
- Message
    - SMS
        - SentSMS
        - ScheduledSMS
        - FailedSMS
    - Newsletter
    - SystemComunication 
```

但是当我尝试在 Symfony 2 中生成实体时，我收到以下错误：

> [Doctrine\ORM\Mappin\MappingException]
> 实体 'Acme\HelloBundle\Entity\FailedSMS' 具有复合标识符，但使用 ID 生成器而不是手动分配（身份、序列）。这是不支持的。

我认为这是因为`id`（`FailedSMS`继承自）它与它本身应该有一个分配`Message`的事实相冲突，以便 CTI（与）工作。`FailedSMS``id``SMS`

**我在问月亮还是有办法让它工作？**层次结构的一点概述：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="message")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="type", type="string")
 * @ORM\DiscriminatorMap({"newsletter" = "Newsletter", "sms" = "SMS"})
 */
class Message {}

/**
 * @ORM\Entity
 * @ORM\Table(name="newsletter")
 */
class Newsletter extends Message {}

/**
 * @ORM\Entity
 * @ORM\Table(name="sms")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="status", type="string")
 * @ORM\DiscriminatorMap({"sent"="SentSMS", "scheduled"="ScheduledSMS", 
 *     "failed"="FailedSMS"
 * })
 */
class SMS extends Message {}

/**
 * @ORM\Entity
 * @ORM\Table(name="failed_sms")
 */
class FailedSMS extends SMS {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:12:47.223

在我看来，您实际上并不需要表格“消息”。如果是这种情况，您应该将 Message 定义为映射的超类

```
<?php

namespace Your\Bundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\MappedSuperClass
 *
 */
abstract class MappedSuperClassMessage
{
  /**
   * @var integer $id
   *
   * @ORM\Column(name="id", type="integer")
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="AUTO")
   */
  private $id;

  /**
   * Get id
   *
   * @return integer
   */
  public function getId()
  {
    return $this->id;
  }

  /**
   * Everything else you want the subclasses to have
   */
} 
```

现在，您需要设置的唯一 CTI 是 SMS 类。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="newsletter")
 */
class Newsletter extends MappedSuperClassMessage {}

/**
 * @ORM\Entity
 * @ORM\Table(name="sms")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="status", type="string")
 * @ORM\DiscriminatorMap({"sent"="SentSMS", "scheduled"="ScheduledSMS", 
 *     "failed"="FailedSMS"
 * })
 */
class SMS extends MappedSuperClassMessage {}

/**
 * @ORM\Entity
 * @ORM\Table(name="failed_sms")
 */
class FailedSMS extends SMS {} 
```

这不是经过测试的回复，所以我不确定您是否会遇到问题。

# vb.net - 简单的 Visual Basic 程序有问题？

> ID：10787647
> 
> 赞同：-2
> 
> 时间：2012-05-28T16:19:29.430
> 
> 标签：vb.net

我创建了一个带有两个复选框和一个按钮的表单。我添加了这段代码

```
Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim Bg1.txt As String = "C:\Users\Josh\Documents\Bg1.txt"

        Dim objReader As New System.IO.StreamReader(Bg1.txt)

        TextBox1.Text = objReader.ReadToEnd

        objReader.Close()
    End Sub
End Class 
```

按钮认为它会在单击时打开 Bg1.txt 但它不起作用？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:36:09.320

简单的文本框是一行。您不能创建名称包含点“。”的变量。打开设计器（在其中编辑表单）右键单击文本框并检查多行。

```
Dim TXTpath As String = "C:\Users\Josh\Documents\Bg1.txt"
Dim FileReader As System.IO.StreamReader
FileReader = New System.IO.StreamReader(TXTpath)
TextBox1.Text = FileReader.ReadToEnd()
FileReader.Close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:49:11.583

对我来说最突出的是您使用 Bg1.Txt 作为无效的字符串名称。我已经采用了您的代码并像这样对其进行了修改，并且确实有效。

```
Dim filename As String = "C:\Users\Josh\Documents\Bg1.txt"
Dim objReader As New System.IO.StreamReader(filename)
TextBox1.Text = objReader.ReadToEnd
objReader.Close() 
```

# javascript - 检查 JS 对象是否存在

> ID：10787651
> 
> 赞同：4
> 
> 时间：2012-05-28T16:19:46.060
> 
> 标签：javascript

我需要在运行时发现是否存在具有给定名称的对象，但该名称作为字符串存储在变量中。

例如，在我的 Javascript 中，我有一个名为 test 的对象，然后在运行时我将单词“text”写在一个框中，并将这个字符串存储在一个变量中，我们将其命名为 input。如何检查是否存在以存储在输入变量中的字符串命名的变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T16:25:10.637

如果对象在全局范围内；

`var exists = (typeof window["test"] !== "undefined");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:24:12.990

如果您在浏览器中（即不是节点）：

```
var varName = 'myVar';
if (typeof(window[varName]) == 'undefined') {
  console.log("Variable " + varName + " not defined");
} else {
  console.log("Variable " + varName + " defined");
} 
```

但是，让我说，我*很难*证明在项目中编写此代码是合理的。您应该知道您拥有哪些变量，除非您希望人们为您的代码或其他东西编写插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:24:37.360

```
if( window[input])... 
```

所有全局变量都是`window`对象的属性。`[]`表示法允许您通过表达式获取它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T16:25:09.483

如果要查看它是否作为全局变量存在，可以检查窗口对象上的成员变量。window 是全局对象，所以它的成员是全局的。

```
if (typeof window['my_objname_str'] != 'undefined')
{
    // my_objname_str is defined
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-05T03:48:27.180

我正在编写我的代码，但并非总是可以知道方法是否存在。我根据请求加载我的 js 文件。此外，我有“通过”ajax 响应绑定对象的方法，并且需要知道它们是否必须调用默认回调或者是否有特定的方法可用。所以像这样的测试：

```
function doesItExist(oName){ 
   var e = (typeof window[oName] !== "undefined"); 
   return e;
} 
```

适合我。

# c++ - C++：友元声明'声明一个非模板函数

> ID：10787655
> 
> 赞同：8
> 
> 时间：2012-05-28T16:20:01.317
> 
> 标签：c++, templates, gcc, ostream

我在重载`<<`流运算符时遇到问题，但找不到解决方案：

```
template<class T, unsigned int TN>
class NVector
{
    inline friend std::ostream& operator<< (
        std::ostream &lhs, const NVector<T, TN> &rhs);
};

template<class T, unsigned int TN>
inline std::ostream& NVector<T, TN>::operator<<(
    std::ostream &lhs, const NVector<T, TN> &rhs)
{
    /* SOMETHING */
    return lhs;
}; 
```

它产生以下错误消息：

> 警告：朋友声明 'std::ostream& operator<<(std::ostream&, const NVector&)' 声明了一个非模板函数 [-Wnon-template-friend]
> 
> 错误：'std::ostream& NVector::operator<<(std::ostream&, const NVector&)' 必须只采用一个参数

如何解决这个问题？

非常感谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-28T16:27:14.227

您的代码中有两个不同的问题，第一个是`friend`声明（正如警告明确指出的那样，可能不太清楚）将单个非模板化函数声明为友元。也就是说，当您实例化模板时`NVector<int,5>`，它会将非模板化函数声明`std::ostream& operator<<(std::ostream&,NVector<int,5>)`为友元。请注意，这与声明您作为朋友提供的模板函数不同。

我建议您在类定义中定义朋友函数。您可以在此[答案](https://stackoverflow.com/a/4661372/36565)中阅读更多相关信息。

```
template <typename T, unsigned int TN>
class NVector {
   friend std::ostream& operator<<( std::ostream& o, NVector const & v ) {
      // code goes here
      return o;
   }
}; 
```

或者，您可以选择其他选项：

1.  将模板声明`operator<<`为友元（将授予对模板的任何和所有实例的访问权限），
2.  将该模板的特定实例声明为友元（编写起来更麻烦）或
3.  完全避免友谊，提供公共`print( std::ostream& )`成员函数并从非朋友模板调用它`operator<<`。我仍然会选择与非模板函数成为朋友，并在模板类中提供定义。

第二个问题是，当您想在左侧参数的类之外定义运算符时，该运算符是一个*自由函数*（未绑定到类），因此它不应该被限定：

```
template<class T, unsigned int TN>
inline std::ostream& operator<<(std::ostream &lhs, const NVector<T, TN> &rhs)
{
    /* SOMETHING */
    return lhs;
}; 
```

# html - HTML 实体验证错误

> ID：10787656
> 
> 赞同：0
> 
> 时间：2012-05-28T16:20:14.333
> 
> 标签：html

谁能告诉我为什么我不断收到以下代码的错误：

```
<div class="sidebox-header-left">
<h3 class="rightBoxHeading" id="ezpagesHeading">Advertisement</h3>
    <br/>
<a href="http://www.test.com/tread.php?s=000&v=0&q=000&r=000&clickref=test.com"><img src="http://www.test.com/tshow.php?s=000&v=000&q=000&r=000" border="0"></a>            </div>
    <div id="ezpagesContent" class="sideBoxContent">
</div>
    </div> 
```

我正在使用 HTML 4.01 Transitional，但是对于上述代码，我不断收到以下错误：

> 警告第 298 行，第 56 列：在属性值中引用外部实体...<code>p://www.test.com/tread.php?s=000&v=000&q=000&r=000&clickref=test.com
> 
> 这通常是与符号未正确转义以包含在属性中的符号，例如在 href 中。您需要将所有 ' ' 实例转义`&`为 ' `&amp;`'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:22:54.810

从验证器（您在问题中包含的）查看此信息？

> 您需要将所有 ' ' 实例转义`&`为 ' `&amp;`'。

去做。

```
<a href="http://www.test.com/tread.php?s=000&amp;v=0&amp;q=000&amp;r=000&amp;clickref=test.com"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:23:09.077

`&``&amp;`如果您关心验证，应该在 URL 中。

# ldap - LDIF 文件错误？？无效的格式？

> ID：10787658
> 
> 赞同：2
> 
> 时间：2012-05-28T16:20:18.440
> 
> 标签：ldap, ldif

我目前正在使用 UNIX 服务器上的 LDAP。我现在的主要目的是通过命令行通过 Ldapmodify 修改目录中的两个条目。**命令**如下：

```
ldapmodify -a -D 'cn=ldap,dc=cs,dc=ttu,dc=edu' \
  -w *password* -H *server address* -f Documents/user.ldif 
```

**user.ldif**文件如下：

```
dn: cn=*username*,cn=Users,dc=ttu,dc=edu  
changetype: modify  
replace: displayName  
displayName:  abc  
-
replace: loginShell  
loginShell: /bin/tc   
- 
```

当我尝试运行它时出现以下**错误：**

```
ldapmodify: invalid format (line 5) entry: "cn=*username*,cn=Users,dc=ttu,dc=edu" 
```

我检查了“dn”，它是正确的。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T23:48:40.070

我有一个类似的问题。就我而言，我的 dn 是正确的，但它说 "invalid format (line 16) ..." 。

这就是我解决这个问题的方法：错误消息可能会产生误导，因为 dn 确实是正确的。但是行号“（第 5 行）”是问题的准确指针。在你的情况下，我认为破折号'-'是导致问题的原因。尝试删除破折号，它可能会起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:32:33.860

肯定是dash(-)的字符编码问题

我之前遇到过同样的问题，因为我在 windows 上编辑文件并在 Virtualbox 的 centOS 上使用它

然后我在centos中使用`touch`并编辑了一个新文件，`vi`它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:15:31.490

是条目的 cn RDN 吗？

可以在目录 sn=john, ou=Users 中有一个条目.....

* * *

sn：约翰

CN: 母鹿

## 显示名称：约翰尼

RDN 是用作参考的属性，在本例中为 dn: cn=doe,....

将是错误的，无论该条目具有指定值的属性。在您提供的示例中，DN 是第一行，错误说大约是第 5 行。假设您将它放在某个批次中，也许某些条目的 CN 中有一些特殊字符？并且“Users”通常是“ou”或“dc”之类的，即使容器具有“cn”属性，“Users”作为 cn 值之一。条目是否由空换行符分隔？您没有在上一个条目的最后修改后加上减号，而不是一个（或多个）换行符吗？

哦，当将 ldif 与许多条目（更改）一起放置时，使用“-n”尝试它是明智的。而且（实际上由于某种原因我不记得了）我个人更喜欢管道 ldif 而不是“-f”

猫用户.ldif | ldapmodify ...选择...

?

PS。哈哈 :) 尝试删除“-a”，它实际上将 ldapmodify 转换为 ldapadd :) 如果您想使用“简单”身份验证（使用 -w 密码），请添加“-x”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T20:42:12.420

我遇到了同样的问题。就我而言，在分隔条目的破折号 (-) 字符之后有一个额外的空格。

例如，请注意第 5 行中破折号后的空格：

```
$cat -A sample.ldif 

dn: uid=noelp,ou=People,dc=example,dc=co,dc=us$
changetype: modify$
replace: employeeType$
employeeType: fulltime$
- $
replace: title$
title: Sr IT Analyst$
-$
replace: employeeNumber$
employeeNumber: 1299$ 
```

同样的问题也可能发生在后面有空格的空行上。

# python - 在 Python 2.7 中定义类似“属性”的装饰器

> ID：10787667
> 
> 赞同：1
> 
> 时间：2012-05-28T16:21:00.797
> 
> 标签：python, decorator

我正在尝试编写一个像@property 一样工作的装饰器，但遇到了一些问题。

```
class Dec(object):
  def __init__(self, fn):
    self._fn = fn
    self._before = None
  @property
  def before(self)
    return self._before
  @before.setter
  def before(self, fn):
    self._before = fn
  def __call__(self, *args, **kwargs):
    self._before(*args, **kwargs)
    self._fn(*args, **kwargs)

def withbefore(fn):
  return Dec(fn) 
```

它是一个简单的链接装饰器。@property/@.setter 语法正是我想要克隆的。

这有效：

```
@withbefore
def foo():
   ...
@foo.before
def beforefoo():
  ... 
```

但是在课堂上它不会：

```
class Weee(object):
    @withbefore
    def do_stuff(self):
      pass
    @do_stuff.before
    def before_do_stuff(self):
      pass 
```

它会引发导入错误。

```
TypeError: 'NoneType' object is not callable 
```

我怎样才能正确模拟 @property/.{setter,getter,deleter} ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:00:46.973

实际上，它引发了 TypeError。

无论如何，在使用函数运行装饰器时，我也遇到了同样的错误。发生这种情况是因为，当您使用 装饰函数时`@foo.before`，它将`self._before`以装饰函数作为参数调用该函数。由于`self._before`is `None`，它将引发错误。

有各种解决方案。我最喜欢的是设置一个不同的默认值`self._before`- 一个将设置`self._before`值的函数：

```
class Dec(object):
  def __init__(self, fn):
    self._fn = fn
    def setbefore(b):
        self._before = b
    self._before = self.default_before = setbefore 
```

当然，调用*对象的**时候不应该调用`Dec`*这个函数，所以我们改变`__call__`方法：

```
 def __call__(self, *args, **kwargs):
      if self._before != self.default_before:
         self._before(*args, **kwargs)
      self._fn(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:06:48.270

真诚的，我认为你会更好：

```
from functools import wraps

def withbefore(fn):
    def dec(bef):
        fn._before_fn = bef
        return bef

    @wraps(fn)
    def _wrapper(*args, **kwargs):
        fn._before_fn(*args, **kwargs)
        return fn(*args, **kwargs)

    _wrapper.before = dec
    return _wrapper 
```

它更紧凑，更 Pythonic，并且在所有情况下都可以正常工作。

# php - 如何在 PHP 脚本中访问从带有 jQ uery.ajax() 的 HTML 页面传递的表单数据的单个值？

> ID：10787670
> 
> 赞同：0
> 
> 时间：2012-05-28T16:21:21.770
> 
> 标签：php, jquery, html, ajax, forms

我将表单数据传递给 PHP 脚本以通过 JS( `jQuery.ajax()`) 进行处理。

问题是 - 我想不出一种方法来访问 PHP 中的单个表单控件值（例如`$_POST['zipcode']`）。

相反，我只能使用 访问数据`$_POST['form']`，这是一个表示为一个长字符串（例如`string(89)"color=red&color=blue&zipcode=12345..."`）的完整表单。

如何访问通过 JS 从 HTML 表单传递的 PHP 脚本中的表单数据的各个值？

*index.php（表格）*

```
 <form id="myform">
    <select name="color" id="color">
    <option value="Red">Red</option>
    <option value="Green">Green</option>
    <option value="Blue">Blue</option>
    </select>
    <input type="text" id="zipcode" name="zipcode" />
    <input type="submit" id="submit" name="submit" value="Submit" />
    </form> 
```

*索引.php(JS)*

```
$('#myform').on('submit', function(e) {
                    e.preventDefault();
                    $.ajax({
                        type: 'POST',
                        dataType: 'html',
                        url : 'PHPscript.php',
                        data: {form : $('#myform').serialize()}
                    }).done(function(data) {
                         var myJSONresult = data;
                         alert(myJSONresult);
                    });
                }); 
```

*PHP脚本*

```
<?php
if(isset($_POST["form"])){
$form = $_POST["form"];

$myzipcode = $_POST['zipcode']; // won't work; will be null or empty

echo json_encode($form);

}
?> 
```

**编辑：** *邮政编码字段：*

```
$("#zipcode").focus(function(){
                    if(this.value == "zipcode"){
                        $(this).val("");
                    }
                }).blur(function(){
                    if(this.value == ""){
                        $(this).val("zipcode");
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:23:08.683

您需要在表单数据上使用 serializeArray() 而不是序列化。这将作为一个数组提交。

```
data: $('#myform').serializeArray() 
```

HTML

```
<input type="hidden" name="action" value="submit" /> 
```

PHP

```
if(isset($_POST["action"]))
{
    //code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:23:26.297

添加`dataType: 'json'`到您的 ajax 处理程序并进一步修改您的代码，如下所示：

```
$.ajax({
    type: 'POST',
    dataType: 'json', // changed to json
    url : 'PHPscript.php',
    data: {form : $('#myform').serialize()},
    success : function(data){ // added success handler
     var myJSONresult = data;
     alert(myJSONresult.yourFieldName);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:29:42.820

将传统设置为 true like

```
$.ajax({
traditional:true,
//your rest of the ajax code
}); 
```

在 php 端，你得到的值很好，问题出在表单序列化端

# android - 如何获取微调器选定的项目

> ID：10787672
> 
> 赞同：0
> 
> 时间：2012-05-28T16:21:22.803
> 
> 标签：android

我只是尝试使用 2 spinner 制作一个简单的离线货币转换器。

我想使用微调器选定项目的值创建一个“if”函数，如下所示

```
 ArrayAdapter<CharSequence> isispinner = ArrayAdapter.createFromResource(this, R.array.nilai_item, android.R.layout.simple_spinner_item);
    isispinner.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(isispinner);
    spinner1.setAdapter(isispinner);

    hitung.setOnClickListener(new View.OnClickListener() {

  Object item1 = spinner.getSelectedItem();
  Object item2 = spinner1.getSelectedItem();

  @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
             if ("IDR".equals(item1) && "USD".equals(item2)) {
                    ubahIDRtoUSD();
                }

                if ("USD".equals(item1) && "IDR".equals(item2)){
                    ubahUSDtoIDR();
                }
        }
    });

} 
```

它不工作大声笑..我做错了还是我错过了什么XD？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:32:29.560

我的猜测是，您尝试在选择项目之前获取所选项目（即在`onClick()`方法之外。试试这种方式：

```
@Override
    public void onClick(View v) {

Object item1 = spinner.getSelectedItem();
Object item2 = spinner1.getSelectedItem();

        // TODO Auto-generated method stub
         if ("IDR".equals(item1) && "USD".equals(item2)) {
                ubahIDRtoUSD();
            }

            if ("USD".equals(item1) && "IDR".equals(item2)){
                ubahUSDtoIDR();
            }
    }
}); 
```

}

而且该`getSelectedItem()`方法不会返回`String`afaik，因此将其与`String`("IRD") 进行比较是没有意义的。

顺便说一句，有一个关于如何设置微调器的[完整教程。](http://developer.android.com/resources/tutorials/views/hello-spinner.html)

# java - 致命信号 11（Sigsegv）在 0x00000000（代码=1）？

> ID：10787676
> 
> 赞同：15
> 
> 时间：2012-05-28T16:21:38.597
> 
> 标签：java, android, crash, signals

为什么会出现这个问题？

```
public static String path;
private VideoView mVideoView;

mVideoView = (VideoView) findViewById(R.id.surface_view);
mVideoView.setVideoPath(path);
mVideoView.setMediaController(new MediaController(this));
mVideoView.requestFocus();

//...

    private int mLayout = VideoView.VIDEO_LAYOUT_ZOOM;

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        if (mVideoView != null)
            mVideoView.setVideoLayout(mLayout, 0);
        super.onConfigurationChanged(newConfig);
    } 
```

![这是错误](../Images/e78b9d42ed72d90951bece43802b97b7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T11:24:08.420

您看到的错误消息是由取消引用本机代码中的空指针引起的。从您所显示的内容很难猜测可能是什么原因。

在您的位置，我会仔细检查您是否没有将空引用传递给系统或库方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-31T08:21:14.473

正如 Nicola 所提到的，这很可能是由于在本机代码中取消引用空指针引起的。我有一个类似的问题，并通过调试堆栈跟踪解决了它。

如果您在 log cat 中关闭过滤，您将看到整个堆栈跟踪。这将为您提供崩溃发生位置的详细信息，我使用以下 python 脚本来查找确切原因；[https://code.google.com/p/android-ndk-stacktrace-analyzer/wiki/Usage](https://code.google.com/p/android-ndk-stacktrace-analyzer/wiki/Usage)

在我的情况下，由于运行自定义 android 构建而出现空指针。

祝你好运

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T11:13:54.977

`Fatal Signal 11`很可能是线程问题......当我在错误的线程上做事时，我也曾经遇到过......

`onConfigurationChanged()`可能是您实现中的 setVideoLayout() 调用。

如果您可以发布更多代码，将会很有帮助...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-04T06:43:59.167

您可以从最后一次垃圾收集调用中看到垃圾收集器未能释放任何内存并且您没有可用内存。你的缓冲区有多大？他们需要多少额外的头部空间？

`android:largeHeap="true"`一种可能的解决方案是通过在应用程序清单中设置允许较大的堆大小来研究使用较大的堆大小，记录在[开发人员网站上。](http://developer.android.com/guide/topics/manifest/application-element.html).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-08T14:22:57.180

我在使用 samsung galaxy tab 2 加载任何 WiX 网站时遇到了同样的问题：

致命信号 11 (SIGSEGV) 在 0x00000000 (code=1)

并退出整个应用程序。

研究更多，我发现一篇关于 ROM BUG 的帖子。所以，我插上电话和 F11 (eclipse) 来编译相同的代码。而且......它正在工作！我的平板电脑仍然出现错误。

平板电脑：三星 Galaxy Tabg 2 GT-P5100 ANDROID 4.0.3 内核 3.0.8

电话：三星 Galaxy Young DUOS（旧但固件更新）GT-S6102B ANDROID 4.4.2 内核 2.6.35.7

在我的手机上工作，但当我加载使用 WiX 工具制作的任何网站时，在平板电脑上崩溃。

这里有很好的信息[：google+ 链接](https://plus.google.com/app/basic/stream/z12hvl2qrlfgi32ly230hzyhbxjuhv4bk04?cbp=17db45gjvgibg&sview=27&cid=5&soc-app=115&soc-platform=1&spath=/app/basic/%2bRonaldAmmann/posts&sparm=cbp=1czn5ceohmorm&sview=28&cid=5&soc-app=115&soc-platform=1&spath=/app/basic/s/%252523iOS/related&sparm=cbp%253D10fyyjeg3e8eg%2526sview%253D28%2526sro%253D%252523Android,%252523Apps%2526sri%253D0%2526spath%253D/app/basic/s/%25252523Apple/related%2526sparm%253Dcbp%25253D17y6m56vixlno%252526sview%25253D28%252526sro%25253D%25252523iPhone%252526sri%25253D0%252526spath%25253D/app/basic/s%252526sparm%25253Dcbp%2525253D2sji81wiukb%25252526sview%2525253D28%25252526sq%2525253DiPhone%2525252B5%25252526sc%2525253Dpo)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-03T21:37:12.103

I had a similar problem when finishing my activity with two TextureViews (i.e. pressing the home button):

```
Fatal signal 11 (SIGSEGV), code 1, fault addr 0xa4680000 in tid 29013 (pool-4-thread-1) 
```

The logcat showed that the segv showed up inside a drawXXX function. So I tried to not draw when the surface is destroyed:

```
private synchronized void doDraw(Canvas canvas) {
...
} 
```

doDraw() is called regularly by a background thread. To be precise, using a ScheduledExecutorService. This thingy is stopped in the destroyed listener, which also got the synchronized keyword:

```
public synchronized boolean onSurfaceTextureDestroyed(SurfaceTexture surfaceTexture) {
    executorService.shutdownNow();
    return true;
} 
```

This guarantees that the surface can only be destroyed when currently nothing is drawn.

No more crashes on leaving the activity now!

It seems to me that nobody is using TextureViews but still SurfaceViews. Unfortunately, the latter has some problems when drawing translucent graphics on some devices, that's why I switched to TextureView.

Hope this helps.

# excel - 如何用Excel做sum的乘积

> ID：10787678
> 
> 赞同：0
> 
> 时间：2012-05-28T16:22:04.500
> 
> 标签：excel, excel-formula

![在此处输入图像描述](../Images/bfa3a828af78520c3b85c3944cf0ce81.png)

我想在“TOTAL”旁边的单元格中通过 1 个公式得到结果

现在我必须：

1.  `SUM(QTY1, QYT2, QTY3)*Price`在每一行
2.  `SUM`

有没有办法通过 1 步得到最终结果`SUMPRODUCT(PRICE, SUM(QTY1,QTY2,QTY3))`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:28:41.447

您可以将公式分解为

```
SUMPRODUCT(PRICE, QTY1) + SUMPRODUCT(PRICE, QTY2) + SUMPRODUCT(PRICE, QTY3) 
```

或使用

```
SUMPRODUCT(PRICE, QTY1 + QTY2 + QTY3) 
```

直接（`PRICE`, `QTY1`, ... 是您的示例中显示的区域的名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:26:45.787

也许

```
SUMPRODUCT(Price*(QTY1+QTY2+QTY3)) 
```

抱歉，我目前无法尝试。

# c# - 在 jQuery 和 MVC 控制器操作之间传递非结构化 JSON

> ID：10787679
> 
> 赞同：1
> 
> 时间：2012-05-28T16:22:05.307
> 
> 标签：c#, asp.net-mvc, json

关于 MVC 模型绑定有很多有用的信息。我的问题源于我试图避免在我的 MVC 应用程序中创建强类型数据，因为它主要需要充当数据路由器。

基本上，我在页面上有一组字段，带有一个类“输入”，我可以收集`jQuery('.input')`、迭代并填充到一个 javascript 对象中。然后我将它发送到我的 ASP.NET MVC 控制器：

```
var inputData = my_serialize( $('input');
$.ajax({
  type:'POST',
  url: '/acme/Ajax/CaptureInput',
  dataType: "json",
  data: { inputData: JSON.stringify(inputData) },
  success: Page_Response_RegisterAndDeposit,
  error: Page_AjaxError
}); 
```

在 C# 方面，我有

```
public JsonResult CaptureInput(string inputDataAsJsonString)
{
  JavaScriptSerializer JSON = new JavaScriptSerializer();
  object inputData = JSON.DeserializeObject(inputDataAsJsonString); 
```

这似乎是一种浪费的间接级别，我更愿意将数据作为 contentType:application/json 传递，并让 CaptureInput 接受一个`object`或`IDictionary`什至一个`dynamic`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:20:06.157

您可以使用[serializeArray](http://api.jquery.com/serializeArray/)方法。假设您有一个包含任何类型的输入元素的表单，并且您想要调用以下控制器操作：

```
public ActionResult CaptureInput(Dictionary<string, string> values)
{
    ...
} 
```

以下是您可以继续的方法：

```
<script type="text/javascript">
    var values = $('form').serializeArray();
    var data = {};
    $.each(values, function (index, value) {
        data['[' + index + '].key'] = value.name;
        data['[' + index + '].value'] = value.value;
    });

    $.ajax({
        url: '@Url.Action("CaptureInput")',
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(data),
        success: function (result) {
            alert('success');
        }
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:49:50.370

不完全是您所追求的，但也许通过允许您绑定到具有嵌入式字典的简单包装器对象，此问题的解决方案将为您提供部分解决方法。它甚至可能允许直接绑定到字典。不确定...您可能还需要在 $.ajax 调用中显式设置 json ContentType 标头

[“ASP.NET MVC/WebAPI 中 IDictionary<> 的 JSON 模型绑定”](http://aspnetwebstack.codeplex.com/workitem/99)

# java - 在标签应用程序中强制关闭消息

> ID：10787681
> 
> 赞同：1
> 
> 时间：2012-05-28T16:22:17.197
> 
> 标签：java, android

我正在使用本[教程](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)制作一个标签应用程序。当我在设备上运行我的应用程序时，它会给我强制关闭消息。这是我的主要活动代码，我的 logcat 在下面。我不知道我在哪里犯错。这是代码

```
public class TabLayoutActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    //Artist Tab
    intent = new Intent(this, Artists.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

  //Songs
    intent = new Intent(this, Songs.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

  //Albums
    intent = new Intent(this, Album.class);
    spec = tabHost.newTabSpec("artists").setIndicator("Artist", res.getDrawable(R.drawable.tab_icon)).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(1);
}
} 
```

这是我的日志猫

```
05-28 19:16:51.421: D/dalvikvm(15189): GC_EXTERNAL_ALLOC freed 43K, 50% free 2725K/5379K, external 0K/0K, paused 33ms
05-28 19:16:51.441: D/AndroidRuntime(15189): Shutting down VM
05-28 19:16:51.441: W/dalvikvm(15189): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-28 19:16:51.451: E/AndroidRuntime(15189): FATAL EXCEPTION: main
05-28 19:16:51.451: E/AndroidRuntime(15189): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zafar.tablayout/com.zafar.tablayout.TabLayoutActivity}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.os.Looper.loop(Looper.java:130)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at java.lang.reflect.Method.invokeNative(Native Method)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at java.lang.reflect.Method.invoke(Method.java:507)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at dalvik.system.NativeStart.main(Native Method)
05-28 19:16:51.451: E/AndroidRuntime(15189): Caused by: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.TabActivity.onContentChanged(TabActivity.java:105)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:218)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.Activity.setContentView(Activity.java:1663)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at com.zafar.tablayout.TabLayoutActivity.onCreate(TabLayoutActivity.java:14)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-28 19:16:51.451: E/AndroidRuntime(15189):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-28 19:16:51.451: E/AndroidRuntime(15189):    ... 11 more
05-28 19:16:57.256: I/Process(15189): Sending signal. PID: 15189 SIG: 9 
```

**更新**

这是我在 main.xml 中的标签主机

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tabHost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" > 
```

**第二次更新**

将 tabHost 更改为 tabhost 后的 Logcat

```
05-28 19:47:56.271: I/Process(16575): Sending signal. PID: 16575 SIG: 9
05-28 19:47:58.381: D/dalvikvm(16782): GC_EXTERNAL_ALLOC freed 46K, 50% free 2725K/5379K, external 0K/0K, paused 20ms
05-28 19:47:58.411: D/AndroidRuntime(16782): Shutting down VM
05-28 19:47:58.411: W/dalvikvm(16782): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
05-28 19:47:58.411: E/AndroidRuntime(16782): FATAL EXCEPTION: main
05-28 19:47:58.411: E/AndroidRuntime(16782): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zafar.tablayout/com.zafar.tablayout.TabLayoutActivity}: java.lang.RuntimeException: Your TabHost must have a TabWidget whose id attribute is 'android.R.id.tabs'
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.os.Looper.loop(Looper.java:130)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread.main(ActivityThread.java:3691)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at java.lang.reflect.Method.invokeNative(Native Method)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at java.lang.reflect.Method.invoke(Method.java:507)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at dalvik.system.NativeStart.main(Native Method)
05-28 19:47:58.411: E/AndroidRuntime(16782): Caused by: java.lang.RuntimeException: Your TabHost must have a TabWidget whose id attribute is 'android.R.id.tabs'
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.widget.TabHost.setup(TabHost.java:114)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.widget.TabHost.setup(TabHost.java:163)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.TabActivity.onContentChanged(TabActivity.java:109)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:218)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.Activity.setContentView(Activity.java:1663)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at com.zafar.tablayout.TabLayoutActivity.onCreate(TabLayoutActivity.java:14)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-28 19:47:58.411: E/AndroidRuntime(16782):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-28 19:47:58.411: E/AndroidRuntime(16782):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:26:24.977

在您`main.xml`的 中，TabHost 的 ID 是什么？

一定是`android:id="@android:id/tabhost"`。

**编辑**

您`TabWidget`必须定义为：

```
<TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" /> 
```

从 logcat 中其实很容易看出：“你的 TabHost 必须有一个 id 属性为 'android.R.id.tabs' 的 TabWidget”。

如果您发布整个 xml 布局文件会更容易，因此我们可以看到所有可能的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:25:31.823

您是否在 main.xml 中的 tabhost 中添加了正确的 id？

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 
```

你错过了id的问题，你必须使用@android，只需替换该行

```
android:id="@+id/tabHost" 
```

和

```
android:id="@android:id/tabhost" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:03:22.920

你必须导入你的包名.R; 像

> 导入包.R;

并且还以这种方式安装，我更喜欢使用它来获取标签主机。就像是。`

> TabHost th = (TabHost)findViewbyid(R.id.tabhost);

并继续下去

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T17:04:33.183

**解决方案**

问题出在 main.xml 文件中。我应该`@android:id/idname`在 main.xml 的任何地方都使用过。但是我用`@+id/idname`了哪个是错误的。它现在正在工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T05:11:47.583

您需要遵循的一些主要事项..

1.需要在manifestfile中给予权限。2.与当前模拟器或屏幕比较时，有时布局高度和宽度太大

# java - 丰富的jboss-seam-pdf：modalPanel无法工作

> ID：10787682
> 
> 赞同：1
> 
> 时间：2012-05-28T16:22:28.607
> 
> 标签：java, jsf, pdf, seam, itext

我有一个 modalPanel 声明为

```
<rich:modalPanel id="printEmailExcel" minWidth="800" minHeight="600" resizable="true">
    <div style="width: 1055px; height: 700px; overflow: auto">
        <s:decorate template="/view/popup/printEmailExcelPopup.xhtml"styleClass="popupCDiv">
            <ui:param name="panelid" value="printEmailExcel" />value="/view/printForm/order.xhtml" />
        </s:decorate>
    </div>
</rich:modalPanel> 
```

还有一个命令按钮可以在同一页面中显示 modalPanel

```
<s:button oncomplete="#{rich:component('printEmailExcel')}.show()" image="/images/icons/btn_print.gif" ></s:button> 
```

在 printEmailExelPopup.xhtml 里面，有一个

```
<h:form><s:button view="/view/print/order.xthml" /></h:form> 
```

订单.xhtml：

```
<p:document xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://jboss.com/products/seam/pdf">

The document goes here.

< /p:document> 
```

问题是当我单击 modalPanel 中的 s:button 时，它只会刷新整个页面并且不会下载 pdf 文件。但是，如果我将 s:button 放在 modalPanel 之外（与 rich:modalPanel 相同级别，它可以正常工作）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:08:08.540

尝试用表单标签包围你的 commandButton。

# java - Spring 上的 Apache Shiro 会话管理

> ID：10787684
> 
> 赞同：2
> 
> 时间：2012-05-28T16:22:30.313
> 
> 标签：java, spring, shiro

我是 Spring 和 Shiro 的新手。我有一些关于会话管理的问题。

我看到[一个问题](https://stackoverflow.com/questions/8501058/shiro-authentication-with-sessionid-or-usernamepassword)很好地介绍了会话管理。

但我不明白的是，Shiro 是如何与客户端通信以传递会话信息的，以及客户端将如何通过后续请求再次验证自己。Shiro 是否会自动传递会话 ID，而无需我对其进行编码？

1.  浏览器是否会自动存储会话 ID 并将其与后续请求一起发送（可能通过 HTTPS）？
2.  会话注销如何与客户端通信？客户如何理解它必须再次登录？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:50:06.810

1.  会话 ID 存储为浏览器 cookie。

2.  当用户注销时，会话 ID cookie 将从浏览器中删除（并且会话在服务器上无效）。在删除 cookie 后发出的请求在 Shiro 看来是来自匿名用户，因此如果 Shiro 尝试请求需要您登录的 URL，Shiro 会将浏览器重定向到登录页面。

# android - android onclick按钮在Socket上写入字符串

> ID：10787687
> 
> 赞同：1
> 
> 时间：2012-05-28T16:22:58.677
> 
> 标签：android, sockets, onclick, android-asynctask

嗨，我正在构建一个需要用户按下按钮（总共 8 个按钮）的应用程序。这些按钮用于将字符串发送到服务器 onclick 。我遇到的问题是，当我在连接到服务器后按下任何按钮时，它会按原样发送字符串，但第二次没有任何反应。有人建议我使用 AsyncTask 中的 doInBackground() 来运行，继续运行套接字并在每次按下按钮时写入它。但我无法这样做。我该怎么办 ？我不知道问题出在哪里。我在这里放我的代码。

这是我的活动

```
public class Acontroller extends Activity {

Button bForward;
Button bBackward;
Button bRight;
Button bLeft;
Button bSelect;
Button bStart;
Button bB;
Button bA;
Socket s;
DataOutputStream os;
String ip;

// MyAppActivity ip = new MyAppActivity();
MyThread start = new MyThread();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.nesskin);

    bForward = (Button) findViewById(R.id.bForward);
    bBackward = (Button) findViewById(R.id.bBackward);
    bRight = (Button) findViewById(R.id.bRight);
    bLeft = (Button) findViewById(R.id.bLeft);
    bSelect = (Button) findViewById(R.id.bSelect);
    bStart = (Button) findViewById(R.id.bStart);
    bA = (Button) findViewById(R.id.bA);
    bB = (Button) findViewById(R.id.bB);

    Bundle gotIP = getIntent().getExtras();
    ip = gotIP.getString("ipAddress");

//  start.doInBackground(ip);
    //start.execute(ip);
    // sock.start();

}

protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    bForward.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            start.execute(ip);
        }
    }); 
```

并从线程。

```
public class MyThread extends AsyncTask <String, Void, String>{

Socket s;
DataOutputStream os;
String ip;
String cmd;

  @Override
  protected void onPreExecute() {
      Log.i("AsyncTask", "onPreExecute");
  }

@Override
protected String doInBackground(String... params) {
    int port = 2222;

    // TODO Auto-generated method stub

    if(s.isConnected()){
        try {
            os.writeUTF("forward");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }else{

    try {
    s= new Socket(ip, port);
    os = new DataOutputStream(s.getOutputStream());
    os.writeUTF("forward");

    }catch(Exception e){

        e.printStackTrace();
    }

    finally{
          if (s!= null){
           try {
            s.close();
           } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
           }
          }

          if (os != null){
           try {
            os.close();
           } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
           }
          }
    }

}

    return null;
} 
```

我的目标是用户点击按钮的次数，相应的字符串必须发送到服务器。这是我使用 PC 作为服务器的服务器代码。

```
public class Server

public static void main(String[] args) throws AWTException {
    String msg_received = null;
    String fw = "forward";
    String bw = "backward";
    String l = "left";
    String r = "right";
    String se = "select";
    String st = "start";
    String a = "a";
    String b = "b";
    String fin = "finish";
//  Boolean finish = (msg_received.equal(fin));
    Robot robot = new Robot();

    try {
        ServerSocket ss = new ServerSocket(2222);
        System.out.println("Server Started...");

        while (true) {
            Socket s = ss.accept();

            System.out.println("Connection Request Received");

            DataInputStream DIS = new DataInputStream(s.getInputStream());
            msg_received = DIS.readUTF();
            System.out.println(msg_received);
            // s.close();
            // ss.close();

            if (msg_received.equals(fw)) {
                // tu yeh kerna

                robot.keyPress(KeyEvent.VK_UP);
                robot.keyRelease(KeyEvent.VK_UP);

            } 
```

请帮助我，这对我来说真的很重要。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:39:11.337

您不能重复使用 AsyncTask。您必须创建一个新对象并调用执行。

代替

start.execute();

和

开始 = 新的 MyThread(); 开始.执行（IP）；

或者如果您可以在完成后删除实例，那么您可以这样做：

(new MyThread()).start();

编辑：

要将参数发送到 AsyncTask，请执行以下操作：

start.execute(ip, cmd, param3, param4, param5);

像`doInBackground`这样收集参数：

```
protected Void doInBackground(String... params)
{
   String ipParam = params[0];
   String cmdParam = params[1];
   String thirdParam = params[2];
   String fourthParam = params[3];
   String fifthParam = params[4];
} 
```

您可以传递任意数量的字符串`params`，它会在运行时自动创建一个包含所有参数的新数组。请注意，如果您只传入两个，那么`params`大小将只有两个。如果传入 100 个参数，则`params`大小为 100 个单位。

# php - PHP：在异常中异常代码的目的是什么？

> ID：10787696
> 
> 赞同：3
> 
> 时间：2012-05-28T16:23:57.393
> 
> 标签：php

这可以是我根据个人喜好选择的任何数字（我自己的应用程序代码集）还是假设是标准数字代码？

供参考：[http ://www.php.net/manual/en/exception.getcode.php](http://www.php.net/manual/en/exception.getcode.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:27:24.480

它允许您区分错误。假设您有一个代码对多个错误抛出相同的异常，您可以在对象声明中使用可选的“代码”参数来区分它们。

在该页面上的示例中，他们调用代码为 30 的新异常，因此当您检查输出的对象时，它返回“30”。

例如：

```
try {
    if ($something) {
        throw new Exception("Generic Error",1);
    }
    else {
        throw new Exception("Generic Error #2",2);
    }
}
catch (Exception $e) {
    echo "Error ID ".$e->getCode()." was thrown.";
} 
```

# php - 多个唯一的MYSQL

> ID：10787700
> 
> 赞同：0
> 
> 时间：2012-05-28T16:24:13.650
> 
> 标签：php, mysql

我有一些代码正在尝试开始工作。我正在寻找的是拥有它以便我查询一个站点，然后显示结果并上传到数据库。我希望它通过检查日期来忽略我工作的重复项。我遇到的问题是，当用户搜索另一个股票代码时，它不会插入数据库，因为日期相同。有人有什么建议吗？

```
<?php
$con = mysql_connect("localhost","user","pass");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("bbpinpal_stocks", $con);
mysql_query("INSERT INTO stocks (stock_name, stock_value, stock_perc, date)
VALUES ('$name', '$last','$perc2', '$date')");

$result = mysql_query("SELECT * FROM stocks");

echo "<table border='1'>
<tr>
<th>Name</th>
<th>Value</th>
<th>Percent Change</th>
<th>Date</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
echo "<tr>";
  echo "<td>" . $row['stock_name'] . "</td>";
  echo "<td>" . $row['stock_value'] . "</td>";
    echo "<td>" . $row['stock_perc'] . "</td>";
      echo "<td>" . $row['date'] . "</td>";
  echo "</tr>";
  } 
echo "</table>";

mysql_close($con);
?> 
```

我已将日期设置为唯一但我知道这是我的问题。我怎样才能拥有它，以便它检查名称和日期以及是否匹配以忽略

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:27:54.663

将您的`UNIQUE`索引 on替换为`date`on `(stock_name, date)`：

```
ALTER TABLE stocks
  DROP KEY date,
  ADD UNIQUE KEY (stock_name, date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:29:15.707

> 我已将日期设置为唯一但我知道这是我的问题

这很可能是问题所在。为什么不使用另一列来唯一标识一行？

[http://en.wikipedia.org/wiki/Unique_key](http://en.wikipedia.org/wiki/Unique_key)

“..每个唯一键都由该数据实体的一个或多个数据属性组成..”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:29:51.697

INSERT IGNORE 可防止您使用数据库中已有的主键添加数据。您可以拥有一个由 2 个字段组成的主键。

# objective-c - 带有 MPMovieViewController 的 PageViewController

> ID：10787701
> 
> 赞同：0
> 
> 时间：2012-05-28T16:24:18.167
> 
> 标签：objective-c, ios, ipad, mpmovieplayercontroller, pageviews

我正在为 iPad 开发 iOS 应用程序并使用 PageView 模板。我添加了一些播放一些视频文件的按钮。到目前为止一切正常，但问题是两个视图都调用了触摸手势。我的视图架构看起来像这样

我创建了一个 MPMovieViewcontroller，设置全屏模式并将视图添加到我的网页浏览中：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerFinished:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerFinished:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];
    mediaView = [[MPMoviePlayerViewController alloc] initWithContentURL:mediaURL];
    mediaView.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
    mediaView.moviePlayer.fullscreen = YES;
    mediaView.moviePlayer.view.exclusiveTouch = YES;
    [mediaView shouldAutorotateToInterfaceOrientation:YES];
    [mediaView setWantsFullScreenLayout:YES];
    [mediaView.moviePlayer prepareToPlay];
    [mediaView.moviePlayer play];
    [self.view addSubview:mediaView.view]; 
```

问题是，如果我尝试控制音量滑块，该手势会打开我的 MPMovieViewController 的超级视图的页面。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:26:39.407

我遇到了同样的问题，我最终从主视图中删除了 UIPageViewController 手势，然后在完成后读取它们。在我的情况下，当有人单击页面视图控制器然后它淡出回到页面视图控制器时，我在屏幕上显示一个工具栏。为了允许在工具栏上点击，我做了以下事情：

```
// Remove the page controller gestures from the view
for (UIGestureRecognizer *gesture in self.gestureRecognizers) {
    [self.view removeGestureRecognizer:gesture];
} 
```

self 是我的扩展 UIPageViewController ，我在屏幕上显示某些内容的方法中执行此操作。在您的情况下会有所不同，但实际上这应该对您有用！

# c# - 带有大对象的 C# UDP 对象二进制序列化

> ID：10787702
> 
> 赞同：1
> 
> 时间：2012-05-28T16:24:19.273
> 
> 标签：c#, serialization, udp, binary-serialization

我正在编写一个网络库，它同时利用 TCP 和 UDP 通过 Internet 传输序列化对象。

库（简化）分为客户端和服务器。

在编写 TCP 元素时，我没有遇到任何问题。每次我想发送一个序列化对象时，我只需在对象本身之前发送传入对象的大小，然后等待 NetworkStream 有足够的字节排队。

但是，编写 UDP 服务器有点困难。我有个问题：

做的时候：

```
data = udpClient.Receive(ref sender); 
```

我不确定在服务器端会发生什么。在第一个示例中，我将假设没有数据丢失或排序错误。但是，如果我序列化的对象被分成多个数据包，并且来自多个客户端，会发生什么？例如，如果这两个事件同时发生：

*   客户端 A 发送 10,000 字节的对象
*   客户端 B 发送 12,000 字节的对象

然后我会按这个顺序（或足够接近）收到这样的东西吗？

*   客户 A 对象部分 1/5
*   客户 B 对象部分 1/6
*   客户 A 对象部分 2/5
*   客户 B 对象部分 2/6
*   ETC...

如果是这样，我是否应该将我收到的每个客户端的数据存储在某个地方，直到我认为我有足够的数据，然后尝试反序列化它？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:27:35.817

当您添加零件订购和拆分时，您在重新发明 TCP 的道路上已经走了很长一段路 - 但您自己这样做，而不是使用多年来之不易的经验。

从根本上讲，UDP 听起来并不*适合*您正在尝试做的事情。是绝对要求吗？

# iphone - iPhone 应用程序和 IPad 视网膜图标

> ID：10787704
> 
> 赞同：2
> 
> 时间：2012-05-28T16:24:40.990
> 
> 标签：iphone, ios, icons

我为 iPhone 创建了一个应用程序，带有用于视网膜和无视网膜显示的图标版本（icon@2x.png 和 icon.png）。每当我尝试在 iPad 3 上安装此应用程序时，都会使用 Default@2x.png 的一部分而不是 icon@2x.png。我要为 iPad 上传特定的图标吗？在这种情况下，在哪里！？从 Xcode 4.3.2 我只看到 2 个空格来包含图标，但为 iPhone 版本保留。我想我需要在 plist 文件中创建一个新的声音......但我不确定，文档并没有帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:51:01.320

我遇到了同样的问题。我在包的根目录中创建了资源文件 Icon-72.png 和 Icon-72@2x.png 并将它们添加到目标 (Info.plist) 的信息页面中的“图标文件”中。奇怪的是，这并没有奏效。

我最终的解决方案是将目标临时转换为通用应用程序，将 iPad 图标拖到目标摘要页面的相应插槽中并构建它。之后，将目标恢复为 iPhone/iPod touch 应用程序，清理它，重新构建它。

有趣的是，这似乎有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:17:41.583

当确定适当的 App-Icon 时，操作系统会在 CFBundleIconFiles 数组或 Info.plist 中的 CFBundleIcons 中搜索“最佳拟合大小”图标。如果 Default(@2x).png 在其中一个数组中，则选择它以最适合 iPad Retina。解决方案：

1.  从此数组中消除 Default(@2x).png。对于 Launch 图像，还有另一个属性。如果你这样做，iPhone Retina 图标将被选中。
2.  （可选）将 iPad 分辨率图标（72、72 / 144、144）添加到这些阵列之一。然后操作系统将确定其中一个最合适。

对于 Info.plist 键，另请参阅： [https ://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/ TP40007072-CH6-SW1](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)

考虑一下，这些图标文件的命名仅与较旧的 iOS 版本相关。在新版本中，操作系统只在提到的数组中搜索大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T17:38:49.433

我会再创建 2 个图标，称为

```
icon~ipad.png
icon@2x~ipad.png 
```

第一个将允许 iPad 1/2，第二个将允许 Retina iPad (iPad 3)。

添加这两个图标可能就足够了。另外，尝试按照卢克所说的清洁和重建。

希望这会有所帮助=)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T13:59:17.630

老问题，但对于 Xcode 6.3，如果您使用资产目录，请选择 AppIcon，勾选 iPad（适用于 iOS 7 及更高版本）并将您的 76x76 和 152x152 图标添加到目录

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T18:25:18.530

我认为你应该使用 Icon-72。我用那个

# php - 无法使用 Valum 的 AJAX 上传器和 IE9 获取上传文件的名称

> ID：10787716
> 
> 赞同：0
> 
> 时间：2012-05-28T16:25:28.873
> 
> 标签：php, ajax, file-upload, internet-explorer-9

当使用 Valum 的 AJAX Uploader 和 IE9 时，你可能会做一些后端的事情，比如将文件名添加到数据库中。在每个浏览器中，股票 Valum 的 PHP 脚本都可以正常工作。但如果您使用的是 IE9，则在尝试获取文件名时会出错。下面是一个决议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:25:29.107

在qqUploadedFileXhr.php 中有一个`save($path)`函数。在其中，还有另一个名为`getName()`. 将其替换为以下内容：

```
function getName() {
    if (isset($_GET['qqfile'])) {
        return $_GET['qqfile'];
    } elseif (isset($_FILES['qqfile'])) {
        return $_FILES['qqfile']['name'];
    }
} 
```

IE9 在上传时使用 $_FILES，而不是 $_GET，所以我们需要检查一下。因此，如果设置了 $_FILES，我们将返回文件名。简单，有效。花了我很长时间才弄清楚，所以希望这对你有帮助！

# gwt - 如何在 listgrid 的单元格中拖放元素？

> ID：10787726
> 
> 赞同：0
> 
> 时间：2012-05-28T16:26:47.623
> 
> 标签：gwt, drag-and-drop, smartgwt, listgrid

我正在使用：SmartGwt 3.0；重量 2.4; 火狐 11 和谷歌浏览器 19.0.1084.52。

首先我要为我的英语道歉，因为它非常糟糕。我需要的是在listgrid 的单元格中拖放一个组件（例如标签、图像等...）。我知道您可以拖动记录，但我想在单元格中添加任何类型的组件。感谢任何帮助，无论多么小，否则我将创建一个表格组件，它具有大量属性 listgrid，您可以在其中添加一个单元格中的组件。事实并没有解决问题。

我正在使用最新版本的 smartgwt

我正在试验方法“getShowRecordComponents”、“getShowRecordComponentsByCell”、“WillAcceptDrop”和“CreateRecordComponent”。我必须拖放一个组件 smartgwt（通过先前的配置），但我在记录的末尾 Arreaga，我希望你把它放在你放置组件的列行中。

这个类在其他类中被调用。

```
private class CustomList extends ListGrid{
    //record que hace el drop
    private ListGridRecord currentRecord = null;
    //elemento que se va a dropear
    private Canvas currentCanvas = null;

    //private int index;

public CustomList() {
    this.setHeight(400);
    this.setWidth(400);
    this.setCanResizeFields(true);
    this.setResizeFieldsInRealTime(true);
    this.setShowRecordComponentsByCell(true);
    this.setShowRecordComponents(true);      
    this.setCanAcceptDrop(true);          

    this.addRecordDropHandler(new RecordDropHandler() {

      @Override
      public void onRecordDrop(RecordDropEvent event) {
          System.out.println("X: " + event.getX());
          System.out.println("Y: " + event.getY());
          System.out.println("index: " + event.getIndex());
          System.out.println("event.getDropRecords() ==>  "+ event.getDropRecords());
          //guardamo el record y el canvas que se hace el drop
          currentRecord = event.getTargetRecord();
          currentCanvas = EventHandler.getDragTarget();
       }
     });
    //defino columna ico
    ListGridField field = new ListGridField("icon");
    ListGridField field2 = new ListGridField("valor");
    this.setFields(field, field2);

    //añado record para poder aceptar drops
    ListGridRecord record = new ListGridRecord();
    ListGridRecord record2 = new ListGridRecord();
    record.setCanAcceptDrop(true);
    record.setAttribute("icon", "Hola"); 
    record.setAttribute("valor", "adios");
    record2.setAttribute("icon", "Segundo"); 
    record2.setAttribute("valor", "Segundo Adios");
    this.addData(record);
    this.addData(record2);
  }

  //la llamada a createRecordComponent la hace el listgrid al crearse.
  @Override
  protected Canvas createRecordComponent (ListGridRecord record, Integer colNum) {

    System.out.println("record: " + record);
    System.out.println("colNum: " + colNum);
    System.out.println("currentRecord: " + currentRecord);

    if (record.equals(currentRecord)) {
      System.out.println("createRecordComponent - REGRESARA: " + currentCanvas);

      return currentCanvas;
    }

    return null;
  }

  @Override
  public Boolean willAcceptDrop(){
    return true;
  }

  @Override
  public Canvas updateRecordComponent (ListGridRecord record, Integer colNum, Canvas component, boolean recordChange) {
    System.out.println("***************************************************************************************");
    System.out.println("Estoy en gridView");
    System.out.println("***************************************************************************************");
    System.out.println("record es : "+record);
    System.out.println("colNum es : "+colNum);
    System.out.println("component es : "+component);
    System.out.println("recordChange es :"+recordChange);
   System.out.println("***************************************************************************************");
    return component;
  }
} 
```

你能帮助我吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:35:14.077

我继续研究并设法在列表网格的单元格中插入其他小部件，尽管我根本没有设法配置它，因此向知道正确方法的任何人寻求帮助。1.- SmartGWT 版本：

SmartClient 版本：SC_SNAPSHOT-2011-12-05/LGPL 仅限开发（建于 2011-12-05）

2.- 浏览器版本：

VersGoogle Chrome 19.0.1084.52 m 和 Firefox 11.0

3.- 问题：如果设置为 true，这个 listGrid 应该在网格的每一行中创建并显示一个嵌入式组件。使用该功能的开发者应该实现 ListGrid.createRecordComponent 和 ListGrid.updateRecordComponent 方法，但要实现方法“updateRecordComponent”，而这个方法之所以被调用，只是因为我是从“createRecordComponent”中调用的。为什么会有这种行为？

每次运行“createRecordComponent”方法都会创建一个新行，为什么要这样做？我只想在一个单元格列表网格中做一个下降

4.- 代码：

```
private class CustomList extends ListGrid{
    //record que hace el drop
    private ListGridRecord currentRecord = null;
    private ListGridRecord[] listRecord;
    //elemento que se va a dropear
    private Canvas currentCanvas = null;
    private EmbeddedPosition position;
//posiciones offset respecto a diferentes indices.
    private int x, x1, x2;
    private int y, y1, y2;      
    private int col, fil;

  public CustomList() {
    this.setHeight(400);
    this.setWidth(400); 
    this.setCanResizeFields(true);
    this.setResizeFieldsInRealTime(true);
    this.setRecordComponentPoolingMode(RecordComponentPoolingMode.RECYCLE);
    this.setRecordComponentPosition(EmbeddedPosition.EXPAND);
    this.setCanResizeFields(true);
    this.setShowRecordComponentsByCell(true);
    this.setShowRecordComponents(true);      
    this.setCanAcceptDrop(true);
    this.setCanReorderRecords(true);
    this.setCanAcceptDroppedRecords(true);
    this.setCanDrop(true);

    this.addRecordDropHandler(new RecordDropHandler() {

    @Override
    public void onRecordDrop(RecordDropEvent event) {
      //guardamo el record y el canvas que se hace el drop
      listRecord = event.getDropRecords();          
      currentRecord = event.getTargetRecord();
      currentCanvas = EventHandler.getDragTarget();
      position = getRecordComponentPosition();          
      x=event.getX();
      y=event.getY();          
      col=getEventColumn();
      fil=getEventRow();         
    }
  });

  //defino columna ico y valor
  ListGridField field = new ListGridField("icon");
  ListGridField field2 = new ListGridField("valor");
  this.setFields(field, field2);

  //añado record para poder aceptar drops
  ListGridRecord record = new ListGridRecord();
  ListGridRecord record2 = new ListGridRecord();
  record.setCanAcceptDrop(true);
  record.setAttribute("icon", "Hola"); 
  record.setAttribute("valor", "adios");
  record2.setAttribute("icon", "Segundo"); 
  record2.setAttribute("valor", "Segundo Adios");
  this.addData(record);
  this.addData(record2);
}

//la llamada createRecordComponent ,debería hacersela al crearse.
@Override
protected Canvas createRecordComponent (ListGridRecord record, Integer colNum) {
//como comprueba, porque setShowRecordComponentsByCell está a true, celda por celda, me quedo para actualizar solo cuando coincide
//la fila y la columna en la que he hecho el drop.
  if (record.equals(currentRecord) && (colNum.equals(col))) {
    updateRecordComponent(currentRecord,colNum,currentCanvas, true);
  }
  return null;
}

@Override
public Boolean willAcceptDrop(){
  return true;
}

@Override
public Canvas updateRecordComponent (ListGridRecord record, Integer colNum, Canvas component, boolean recordChange) {
  x1=this.getAbsoluteLeft();
  y1=this.getAbsoluteTop();
  x2 = component.getAbsoluteLeft();
  y2 = component.getAbsoluteTop();
  //currentCanvas.setSnapTo("C");
  addEmbeddedComponent(component, record, fil, colNum, EmbeddedPosition.WITHIN);      

  return component;
} 
```

}

# python - 在类定义中执行语句：解释器知道哪些变量？

> ID：10787727
> 
> 赞同：7
> 
> 时间：2012-05-28T16:27:03.247
> 
> 标签：python

以下是我的部分类定义：

```
class Trial:
    font = pygame.font.Font(None, font_size)
    target_dic = {let: font.render(let, True, WHITE, BG) for let in list("ABCDEFGHJKLMNPRSTUVWX")} 
```

部分类定义的最后一行，`target_dic = {let: font.render(let, True, WHITE, BG) for let in list("ABCDEFGHJKLMNPRSTUVWX")`返回错误：未定义全局名称'font'。很公平。

但是，我尝试了以下测试用例并没有出现错误：

```
class x:
    dat = 1
    datlist = [dat for i in range(10)] 
```

为什么第一种情况不起作用？`font`在达到字典理解时该成员不存在吗？

我是否需要将这些操作移到`__init__`或者是否可以在创建类对象时只定义一次列表？

编辑：

为清楚起见，我希望能够在创建类对象时填充列表，以减少创建 Trial 对象所花费的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T17:06:28.670

部分答案，因为它更多的是减少一些错误的路径。

如果我收回您的工作样本并进行 dict 理解：

```
class x:
    dat = 1
    datlist = {i:dat for i in range(10)} 
```

我也得到这个：

```
>>> NameError: global name 'dat' is not defined 
```

所以看起来dict理解在类语句执行期间隐藏了临时**dict**使用，但列表理解没有。

目前在文档中没有找到关于此的更多信息......

根据@interjay 评论进行编辑：在这篇[文章](https://stackoverflow.com/a/1773697/624829)中解决了不符合范围规范的类构造。简短的故事是列表理解在 2.x 中存在错误，并且可以看到班级成员，但他们不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:45:10.620

因为类装饰器是在创建类之后调用的，所以您可以使用一个来解决在类主体中引用类属性的限制，并有效地“后处理”刚刚创建的类并添加任何缺少的属性：

```
def trial_deco(cls):
    cls.target_dic = {let: cls.font.render(let, True, WHITE, BG) for let in "ABCDEFGHJKLMNPRSTUVWXZ"}
    return cls

@trial_deco
class Trial:
    font = pygame.font.Font(None, font_size)
    target_dic = None  # redefined by decorator 
```

另一种方法是使属性最初成为（仅）在第一次读取属性时调用的数据描述符（又名“属性”）。这是通过用计算值覆盖描述符来完成的，所以它只发生一次。

```
class AutoAttr(object):
    """ data descriptor for just-in-time generation of instance attribute """
    def __init__(self, name, font, antialias, color, background):
        self.data = name, font, antialias, color, background

    def __get__(self, obj, cls=None):
        name, font, antialias, color, background = self.data
        setattr(obj, name, {let: font.render(let, antialias, color, background)
                                for let in "ABCDEFGHJKLMNPRSTUVWXZ"})
        return getattr(obj, name)

class Trial(object):
    font = pygame.font.Font(None, fontsize)    
    target_dic = AutoAttr('target_dic', font, TRUE, WHITE, BG) 
```

还有其他方法可以做这样的事情，例如使用元类或定义`__new__`方法，但值得怀疑的是，任何一种方法会更好或更简单。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T16:42:24.817

在类创建期间可用的名称是全局变量，并且名称*已经*在类的顶层定义（即，随着名称的定义，它们在类代码的下方变得可用）。

请注意，类级别的对象可能不是您通过实例获得的，甚至不是通过类对象获得的；最值得注意的是，在类创建期间， a 的结果`def`仍然是一个函数而不是一个方法。

关于 OP 的代码，此示例显示`font`在类级别定义：

```
class Trial:
    font = 'foo'
    target_dic = dict((lambda fnt:((let,fnt) for let in "ABCDEFGHJKLMNPRSTUVWX"))(font))
    target_two = []
    for let in "ABCDEFGHJKLMNPRSTUVWX":
        target_two.append(let)

print(Trial.target_dic)
print(Trial.target_two) 
```

这产生：

```
{'A': 'foo', 'C': 'foo', 'B': 'foo', 'E': 'foo', 'D': 'foo', 'G': 'foo', 'F': 'foo', 'H': 'foo', 'K': 'foo', 'J': 'foo', 'M': 'foo', 'L': 'foo', 'N': 'foo', 'P': 'foo', 'S': 'foo', 'R': 'foo', 'U': 'foo', 'T': 'foo', 'W': 'foo', 'V': 'foo', 'X': 'foo'}
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'R', 'S', 'T', 'U', 'V', 'W', 'X'] 
```

(http://ideone.com/aC7VY)

`font`正如预期的那样，可以传递给 lambda。

问题不在于类范围内可用的名称（`font`在那里可用）。问题是理解引入了自己的新范围（在python 3中）：[http ://docs.python.org/py3k/reference/expressions.html#displays-for-lists-sets-and-dictionaries](http://docs.python.org/py3k/reference/expressions.html#displays-for-lists-sets-and-dictionaries)

# database - 如何将 cmsplugin_text 表中的文本与 Django CMS 中的 URL 匹配

> ID：10787731
> 
> 赞同：1
> 
> 时间：2012-05-28T16:27:17.950
> 
> 标签：database, django, django-cms

我们已经使用 Django CMS 为客户创建了一个站点，并且即将发布。他们的旧网站上有许多指向文件的链接。对表格进行搜索`cmsplugin_text`，我找到了 12 个包含 URL 的条目。没有从旧下载 URL 到新文件下载 URL 的简单映射，因此我需要找到这 12 个条目出现的页面并告诉我们的客户以便他们可以编辑该页面。

但是数据库不容易跟上。那么如何从`cmsplugin_ptr_id`列的`cmsplugin_text`列的值到页面的URL呢？我相当确定`cmsplugin_ptr_id`是为了与`id`桌子`cms_cmsplugin`对齐。那张桌子也有`parent_id`,`tree_id`和`placeholder_id`，但我现在有点迷路了。

我很乐意直接使用数据库命令，或者用来`manage.py shell`执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:48:31.780

在回答之前应该更努力一点。

有效的步骤是查找`cms_page_placeholder`带有 的行`placeholder_id`并查找相应的`page_id`. [然后，我可以在http://mysite.com/en/admin/cms/page/page_id](http://mysite.com/en/admin/cms/page/page_id)的管理员中查找该页面，并且该页面具有“查看站点链接”。

我使用的 SQL 语句是：

```
SELECT cpp.page_id 
    FROM cmsplugin_text AS cpt 
    LEFT JOIN cms_cmsplugin AS ccp ON cpt.cmsplugin_ptr_id = ccp.id 
    LEFT JOIN cms_page_placeholders AS cpp ON ccp.placeholder_id = cpp.placeholder_id  
    WHERE cpt.body like '%userfiles%'; 
```

`userfiles`旧站点上文件路径的一部分在哪里。

# php - 使用 Session 登录 PHP

> ID：10787732
> 
> 赞同：0
> 
> 时间：2012-05-28T16:27:22.620
> 
> 标签：php, session, login

我正在学习如何制作登录页面，在那里我了解了有关会话如何工作的更多详细信息。我搜索了不同的站点，直到找到一个成功的站点。但是，在成功登录后，我想设置用户可以单击其个人资料、编辑个人资料、帐户设置和登录后注销的位置。注销没有问题，但没有显示个人资料的链接。

这是测试登录检查：

```
ob_start();  
// To protect MySQL injection (more detail about MySQL injection)
$email = stripslashes($email);
$password = stripslashes($password);
$email = mysql_real_escape_string($email);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM users WHERE email='$email' and password='$password'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $username and $password, table row must be 1 row
if($count==1){

// Register $username, $password and redirect to file "login_success.php"
session_register('email');
session_register('password');
session_register('userID'); // Tried and didn't work
session_register('lastlogin'); // Tried and didn't work

ob_end_flush(); 
```

这是在主页上

```
session_start(); 

// See if they are a logged in member by checking Session data
$userlinks = "";

if (isset($_SESSION['email'])) {
    // Put stored session variables into local php variable
    $userID = $_SESSION['userID'];
    $username = $_SESSION['username'];
    $lastlogin = $_SESSION['lastlogin'];

    //If session is successful, the following is available: profile, last login,    account and logout.
    $userlinks = '
    <a href="testuser.php?userID=' . $_SESSION['userID'] . '">' . $_SESSION['email'] . '</a> &bull; (' . $_SESSION['lastlogin'] . ') 
    <a href="testuser_account.php">Account</a> &bull; 
    <a href="testlogout.php">Log Out</a>';
} else {
    // If session failed, see if the user has a Damju account.
    $userlinks = 'Have an account? <a href="testlogin.php">Click Here</a> <br/> Not registered? <a href="testreg.php">Click Here</a>';
} 
```

这就是我想要的： `(a href="testuser.php?userID=#")username(/a)`

正如你所看到的，我试图弄清楚自己，所以我不会看起来我没有尝试。

参考

*   [http://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html)

PS：我查看了其他链接，但它们几乎是以不同的方式制作的。令人困惑...

感谢任何理解和抱歉的人，如果你不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:34:16.970

使用设置用户 ID

```
$_SESSION['userid'] = $userid; 
```

只要您的会话在每个页面上启动，您就可以从任何地方访问会话变量

```
session_start(); 
```

使用

```
$_SESSION['userid']; 
```

例如

```
$userid= $_SESSION['userid'];
echo $_SESSION['userid']; 
```

如果您甚至想查看会话中的内容，只需执行

```
print_r($_SESSION); 
```

当您的用户注销时，请确保您取消设置变量然后销毁会话

```
unset($_SESSION['userid']);
session_destroy(); 
```

# graphite - 如何防止 Graphite URL API 中的图形截断？

> ID：10787735
> 
> 赞同：1
> 
> 时间：2012-05-28T16:27:31.837
> 
> 标签：graphite

我有一些石墨图，有时会在顶部切掉的情况下渲染，请参见下面的示例。我怎样才能防止这种情况？yMax 参数对我不起作用，因为我事先不知道最大值。

![石墨屏幕截图](../Images/8b376f6b5306c9d74985a1cceb961947.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T07:46:30.330

我遇到了同样的问题，发现即使设置显式 yMax 也无法解决它（除非大到足以跨越下一个“步骤”）。

很快就想出了一个修复方法，请参阅[https://bugs.launchpad.net/graphite/+bug/1007480/comments/4](https://bugs.launchpad.net/graphite/+bug/1007480/comments/4)。

# asp.net-mvc - 在 ServiceStack Mvc 中扩展用户身份验证

> ID：10787738
> 
> 赞同：1
> 
> 时间：2012-05-28T16:27:45.710
> 
> 标签：asp.net-mvc, servicestack, authentication

我需要分级认证。（仅电子邮件就足以进行身份​​验证-无需用户名，无需密码-这对于电子商务网站来说很常见）。

*   仅邮件身份验证（1 级会员资格）
*   邮件+密码认证（通过注册）（二级会员）

您对此要求有何建议？

*   获取源代码并更改它（更新问题）
*   编写你自己的 AuthFeature (Long way)
*   框架中有任何可用的选项吗？

额外的信息

这是一个电子商务应用程序。用户订阅时事通讯。这是他们的会员。他们是网站的成员。他们的 EmailValidationState 未设置。但他们是网站的成员。

# java - 将大型排队数据写入文件时出现内存错误

> ID：10787739
> 
> 赞同：1
> 
> 时间：2012-05-28T16:27:53.260
> 
> 标签：java, io, queue

我不确定如何具体处理这个（Java 新手）。基本上我有一个程序可以生成大量超出我记忆的数据（例如，它的 10 gigs 数据和我有 4 gigs 的 ram）。我决定派生一个线程来获取数据并将其写入磁盘，尽管我知道磁盘写入永远无法跟上生成它的进程，但我希望我的应用程序可以绑定到我写入磁盘的速度。但是过了一会儿，我得到了堆内存不足的错误。

以下是我认为相关的部分：所有要写入的数据都放在这个变量中：

```
private static Queue<short[]> result =  new LinkedList <short[]> (); 
```

这是保存到文件的部分：

```
 static class SaveToFile extends Thread {

        public void run() {
                FileWriter bw = null;
                try {
                    bw = new FileWriter("output.csv");
                    Thread.sleep(500); //delay the start so the queue can have some data
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            System.out.println("size of results during execution is " + result.size());
            while(!result.isEmpty()) {
                short[] current = result.poll();
                try {
                    bw.write(Arrays.toString(current) + "," + "\n");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            try {
                bw.flush();
                bw.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("file writing is done");
        }
    } 
```

我不确定我做错了什么，我是否需要以一定的大小阻止结果队列，以便我的进程停止写入它？还是我在写入文件时做错了什么，我显示的是非缓冲版本，但我尝试过 bufferedWriter 得到相同的结果？我观察到，当程序运行时，文件大小为 0，只有当它崩溃时它才似乎在写入……即使没有 bufferedWriter，它是否将它保存在内存中，这是否会导致内存问题？

我的想法是，当 SaveToFile 线程清除队列时，它为其他进程继续写入它腾出了更多空间（这些是我正在运行的唯一线程，主程序和 SaveToFile）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:29:32.570

> 我是否需要以一定的大小阻止结果队列，以便我的进程停止写入它？

是的你是。生产者生成数据的速度快于写入速度是您的进程内存不足的最可能原因。

另一个问题是不同步，因此在使用 a在线程之间传递数据`LinkedList`时需要使用锁定。`LinkedList`

要限制容量，您可以使用`ArrayBlockingQueue`或`LinkedBlockingQueue`。作为额外的好处，两者都是线程安全的，因此不需要外部同步。

最后，如果您的代码是 I/O 绑定的，就像看起来那样，您可能从将其拆分为两个线程中获得的好处相对较少。这一点值得牢记，因为您可能会引入所有这些额外的复杂性而几乎没有好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:35:38.643

正如您已经说过的，您的磁盘写入器比您的内存写入器慢。因此，我相信你永远不会到达冲洗部分，因为结果永远不会是空的。

我相信最好的方法是创建一个包含队列的类并建立最大队列大小。因此，如果 memorywriter 试图将某些内容排入队列，它将被阻止。

我建议您的队列方法不要忙于等待，而是进入睡眠状态等待来自您的 dequeue 方法的信号。

# ajax - 如何在每个页面可能从不同的偏移量开始时进行分页

> ID：10787748
> 
> 赞同：0
> 
> 时间：2012-05-28T16:28:21.273
> 
> 标签：ajax, algorithm, paging

例如：每页 50 行

*   第 1 页：首先获取 50 行。第 0 行到第 49 行，并通过过滤器删除 15 行。所以我只有 35 行，然后我又取了 50 行。第 50 行到第 99 行，然后我通过相同的过滤器从这些行中获取 15 行以合并这 35 行。现在我有 50 行，但至少花了 65 行。
*   第 2 页：从 >= 第 65 行开始。
*   第 3 页：从 >= 第 115 行开始。
*   第 4 页：从 >= 第 165 行开始。

获取page4时如何获取page2的起始偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:16:47.217

如果您从数据库中获取，请将过滤器作为查询本身的一部分，并让数据库软件为您计算。例如

```
SELECT * from myrows WHERE [condition] LIMIT 50 OFFSET 200 
```

将为您提供过滤后的记录 200..249，即第 5 页的内容。

# minimax - 解决 minimax 中的“拖延症”

> ID：10787749
> 
> 赞同：3
> 
> 时间：2012-05-28T16:28:23.010
> 
> 标签：minimax

我正在为一个小游戏实现极小极大，并注意到我称之为“拖延”的东西。归结为一个非常简单的例子：

在夺旗游戏中，旗帜距离玩家 A 向上一格，而玩家 B 距离玩家 50 格。轮到A了，他可以向前搜索6步。我所看到的是所有可能的动作都有一个“赢”的价值，因为 A 知道他可以在 B 之前到达旗帜，即使他没有立即抓住它。因此，如果 UP 是顺序中的最后一步，他将向左和向右移动一段时间，直到 B 处于攻击距离之内，然后他必须最终拿到旗帜。

起初这种行为看起来像一个错误，但通过它我说服自己每一步确实是“胜利”，但行为并不好。我可以通过使从现在起 4 步后捕获的标志的价值低于现在捕获的标志来影响评估，但我想知道 minimax 搜索是否有比我遗漏的方面？有没有比后来才获得的同样高分更可取的高分概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T01:50:49.403

极小极大搜索本身没有任何东西可以让您更快获胜。由于所有终端位置评估为相同的分数，该算法有效地随机选择移动。使您的评估函数在调用它的树中更深的每个级别略微降低获胜分数，并且 minimax 将选择更快获胜。

# objective-c - 当前日期和时间 - NSDate

> ID：10787751
> 
> 赞同：7
> 
> 时间：2012-05-28T16:28:24.973
> 
> 标签：objective-c, ios, cocoa-touch

我需要显示当前的日期和时间。

我用过 ;

```
NSDate *currentDateNTime        = [NSDate date]; 
```

我想要当前的日期和时间（应该显示系统时间而不是 GMT 时间）。输出应该是`NSDate`格式而不是`NSString`.

例如;

```
 NSDate *currentDateNTime        = [NSDate date];
// Do the processing....

NSDate *nowDateAndTime = .....; // Output should be a NSDate and not a NSString 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T16:43:45.200

由于所有 NSDate 都是 GMT 参考的，你可能想要这个：（不要忘记 nowDate 不会是实际的当前系统日期时间，但它是“移位”的，所以如果你将使用 NSDateFormatter 生成 NSString，你会看到日期错误）

```
NSDate* currentDate = [NSDate date];
NSTimeZone* currentTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* nowTimeZone = [NSTimeZone systemTimeZone];

NSInteger currentGMTOffset = [currentTimeZone secondsFromGMTForDate:currentDate];
NSInteger nowGMTOffset = [nowTimeZone secondsFromGMTForDate:currentDate];

NSTimeInterval interval = nowGMTOffset - currentGMTOffset;
NSDate* nowDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:currentDate]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T17:03:17.297

世界各地的每一刻都是同一时刻——它只是表示为不同时区的不同时钟时间。因此，您不能将日期更改为代表您所在时区时间的其他日期；您必须使用`NSDateFormatter`您所在的时区提供的一个。生成的字符串是以您所在位置的时钟时间表示的时间点。

在 GMT 中进行所有需要的计算，并使用格式化程序进行显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-09T14:51:27.800

值得一读 [[NSDate date] 是否返回本地日期和时间？](https://stackoverflow.com/questions/5214947/does-nsdate-date-return-the-local-date-and-time)

对于最近来此的人来说，一些有用的资源：

如果您对日期和时间做任何认真的事情，请阅读 Apple 日期和时间编程指南。 [https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i?language=objc](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i?language=objc)

NSDate 上具有许多实用程序的有用类别确实允许根据现有日期生成 ~new~ 日期。 [https://github.com/erica/NSDate-Extensions](https://github.com/erica/NSDate-Extensions)

还有一个快速版本的类别 [https://github.com/erica/SwiftDates](https://github.com/erica/SwiftDates)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:39:23.050

你需要一个 NSDateFormatter 并调用 stringFromDate 这个方法来获取你的日期字符串。

```
NSDateFormatter *dateformater = [[NSDateFormatter alloc] init];
[dateformater setDateFormat:@"yyyyMMdd,HH:mm"];
NSString *str = [dateformater stringFromDate: currentDateNTime]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T16:57:17.407

使用这个方法

```
-(NSDate *)convertDateToDate:(NSDate *) date
{
    NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
    NSDate *nowDate = [[[NSDate alloc] init] autorelease];
    [formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    [formatter setDateFormat:@"yyyy-MM-d H:m:s"];
    NSString * strdate = [formatter stringFromDate:date];
    nowDate = [formatter dateFromString:strdate];
    return nowDate;
} 
```

这可能会返回你想要的。

我希望你这可以帮助你。

# playframework - 从 Play 目录结构之外直接提供文件

> ID：10787753
> 
> 赞同：4
> 
> 时间：2012-05-28T16:28:34.347
> 
> 标签：playframework, cdn, playframework-2.0

问候玩家

我需要`CDN`为小型应用程序创建类似自定义的解决方案，并想知道直接使用 Play 提供文件但不放在`public`应用程序目录下的最佳方式是什么？我需要访问 FTP 上传文件夹。

假设我的应用程序是从`/home/myaccount/playapps/app201`文件夹运行的，并且在`http://somedomain.tld`地址处可用。我还有一个常用的 FTP 帐户，其文件夹指向`/home/myaccount/ftp_upload`.

`/home/myaccount/ftp_upload/folder_1/sub_2/file.txt`提供文件的 最佳方式是什么`http://somedomain.tld/ftp_upload/folder_1/sub_2/file.txt`（没有任何检查和限制）？

*   一种选择是使用 HTTP 服务器并设置单独的`host`or `alias`，`ftp folder`但我想避免在某些节点上使用其他服务器（**参考：** *如果您正在寻找服务器解决方案，请检查[示例配置](https://stackoverflow.com/questions/10882313/play-framework-2-0-how-to-display-multiple-image/10884297#10884297)*）。
*   其次是编写`Application.serve(String filepath)`动作+路由，但在提供文件之前我不需要任何额外的动作。使用这种方法有意义吗？

还有其他选择吗？

（这个问题也可以在[Google Groups](https://groups.google.com/forum/?fromgroups#!topic/play-framework/OWFKlDE12mY)上找到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:13:21.103

如果您的 Play 文件夹和 FTP 文件夹在同一主机上，则可以使用公共资源。从[文档](http://www.playframework.org/documentation/2.0.1/Assets)中：

注意，如果你在“public”之外定义了资产映射，你需要告诉 sbt，例如，如果你想：

```
GET  /assets/*file               controllers.Assets.at("/public", file)
GET  /liabilities/*file          controllers.Assets.at("/foo", file) 
```

您应该将其添加到项目设置中`project/Build.scala`

```
// Add your own project settings here
playAssetsDirectories <+= baseDirectory / "foo" 
```

我没有测试它，但值得一试:-)

# facebook - Facebook 拒绝访问我的应用

> ID：10787754
> 
> 赞同：1
> 
> 时间：2012-05-28T16:28:38.963
> 
> 标签：facebook, cross-domain, facebook-javascript-sdk

我有一个显示共享弹出窗口的应用程序。我在尝试让它从不同的服务器上工作时遇到了一个问题。我收到以下错误：

> 错误 myapp 发生错误。请稍后再试。
> 
> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序
> 错误消息：redirect_uri 不属于应用程序。

我怎样才能让它在所有服务器上工作？不管他们是不是我的？有什么建议么？

提前致谢。

*注意：我希望它通过 JS SDK。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:18:59.410

Facebook 应用程序只能与一个主域一起使用。
主域源自开发人员应用程序的应用程序设置页面中定义的“站点 url”或“移动 web url”。

但是，您可以为同一域添加子域。
例如，假设您的“站点 url”是`http://app.example.com`，您可以通过将它们添加到设置页面（基本选项卡）中的“应用程序域”字段来添加更多要与 facebook 一起使用的子域。
您可以添加子域，例如：`http://sub1.example.com`或`http://example.com`.

如果您尝试添加不是从该 URL 派生的 url，则在尝试保存设置时应该会收到以下错误消息：

> **错误**
> DOMAIN_YOU_ADDED 必须来自您的站点 URL 或您的移动网络 URL。

* * *

# 编辑

如果您想使用该`FB.ui`方法，您会遇到问题。
fb sdk 将只接受来自您自己的域的使用，如果您从自己的域加载 iframe，则父窗口（属于另一个域）将无法与该 iframe 通信（同源策略）。

您应该能够使用[提要对话框](http://developers.facebook.com/docs/reference/dialogs/feed/)的直接网址：

```
http://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=http://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://www.example.com/response 
```

您可以在新窗口/选项卡中打开它，或者如果它是用户单击的操作，则甚至打开一个弹出窗口。
但是您将无法使用 sdk 的 iframe 对话框。

# javascript - this.argument和argument之间的区别？

> ID：10787760
> 
> 赞同：0
> 
> 时间：2012-05-28T16:28:51.517
> 
> 标签：javascript

我像这样调用下面的对象方法。

```
new Cout( elem1 ).load( 'body' )

new COut( elem1 ).display( 'email' ) 
```

我一次只使用一个实例。因为我一次只使用一个实例，所以我想删除`this.element`并使用传入的实例`element`。

这让我想知道传入的元素是静态的还是基于实例的。我认为它可能是 this.element （基于实例）......即使我没有明确说明它。我计划删除所有提及 this.element 的元素。

是吗？

注意：如果没有给出其他返回，则隐式返回。

```
var COut = function ( element ) 
{
    var messages = 
    {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        email_s:      'Please enter a valid email.',
        pass:         'Please enter password, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:fo@foo.com">support</a> to reset your password'
    };
    this.element = element;
    this.display = function( type ) 
    {
        this.element.innerHTML = messages[ type ];
    };
    this.load = function( location )
    {
        new AjaxRequest().invoke( 'ajax_type=async_load', function( response_text )
        {
            document[location].innerHTML = response_text;  
            new Cin().init( response_text.charAt( 6 ) ); // Correlate this point to Ajax Call.
        } ); 
    };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:47:52.890

`element`也不是。它是构造函数的局部变量，将在每次调用时定义。它只是一个属性，`this`因为它已被明确设置：

```
var COut = function ( element ) 
{
    // ...
    this.element = element;
    // ...
}; 
```

尽管如此，使用它而不是`this.element`应该与构造函数中定义的任何函数/方法一起正常工作：

```
var COut = function ( element ) 
{
    // ...
    this.display = function( type ) 
    {
        element.innerHTML = messages[ type ];
    };
    // ...
}; 
```

如果您改为使用`prototype`在构造函数之外定义方法，则无法访问它。在这里，`element`不在范围内；但`this`会，也会如此`this.element`：

```
COut.prototype.display = function ( type ) {
     this.element.innerHTML = messages[ type ];

     element.innerHTML = messages[ type ]; // ERROR: `element` is not defined
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:32:43.723

当您使用`this`它时，您需要使用关键字实例化该类的*成员*`new`，否则如果`this`不创建类的实例就没有使用的意义。

此外，您通过设置的任何内容都将`this`成为实例成员，这意味着它会添加到您创建的每个实例签名中。您可以通过使用`prototype`属性来避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:36:14.880

如果您不使用`this`并且只是`element`在函数中引用，那么它将引用`element`您在参数中传递的那个。

您`new`每次引用对象时都在使用，但我认为这是错误的。每个实例都不知道您之前放置的属性，`this`并且您每次都必须传入相同的元素（这就是您正在做的事情，但如果您只是在第一次保存对象时不需要这样做实例化它）。

就是`new`这样 - 为您提供一个干净的对象`this`。

我认为你想要的是这样的：

```
var c = new Cout(some_element);
c.display(); 
```

如果你在构造函数中将元素保存为 this 的属性，那么当你调用`c.display()`它时就可以正常访问`this.element`了。

# sql - 选择每日/每小时数据

> ID：10787765
> 
> 赞同：1
> 
> 时间：2012-05-28T16:29:04.580
> 
> 标签：sql, postgresql, datetime, aggregate-functions, crosstab

我必须生成每天和每小时完成的任务量的报告。这样，报告将看起来像一个网格。

我想在水平轴上是一个月中的天数（从 1 到 31），在垂直轴上是小时数（从 8:00 到 18:00）。

如何在 PostgreSQL 中使用 SQL 从数据库中选择此类数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:33:38.120

您正在查找的查询是 SQL 聚合查询。它可能看起来有点复杂，但结构很简单。

```
select extract(hour from date_time_of_task) as thehour,
       sum(case when extract(day from date_time_of_task) = 1 then 1 else 0 end) as day_01,
       sum(case when extract(day from date_time_of_task) = 2 then 1 else 0 end) as day_02,
       sum(case when extract(day from date_time_of_task) = 3 then 1 else 0 end) as day_03,
       sum(case when extract(day from date_time_of_task) = 4 then 1 else 0 end) as day_04,
       ... up to day 31
group by extract(hour from date_time_of_task)
order by 1 
```

这只是按一天中的时间分组。然后，它会为每个月的每一天手动旋转数据。“总和”计算同时满足两个条件的行数——行的小时数和列的天数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T00:52:34.967

一个优雅的解决方案的关键元素是[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html)、[`date_part()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)、[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)[`GROUP BY`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-GROUPBY)和，最后是：来自附加模块 tablefunc 的[`count(*)`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)函数[（](http://www.postgresql.org/docs/current/interactive/tablefunc.html)带有 1 个参数）。要安装它，每个数据库运行*一次：*[`LEFT JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)[`crosstab()`](http://www.postgresql.org/docs/current/interactive/tablefunc.html)

 *```
CREATE EXTENSION tablefunc; 
```

询问：

```
SELECT *
FROM   crosstab($x$

WITH x AS (
    SELECT date_part('day', date_time_of_task)::int AS d
          ,date_part('hour', date_time_of_task)::int AS h
          ,count(*)::int AS ct
    FROM   tasks
    GROUP  BY 1,2
    )
SELECT d, h, ct
FROM  (SELECT generate_series(1,31) AS d, generate_series(0,23) AS h) t
LEFT   JOIN x USING (d,h)
ORDER  BY 1,2

$x$)
AS orders(
 day int
,h8  int, h9  int, h10 int, h11 int, h12 int, h13 int, h14 int, h15 int
,h16 int, h17 int, h18 int); 
```

生成一个包含天数和小时数的矩阵，其中包含您描述的每个字段中的任务数。

顺便说一句：我用过这个辅助。生成目标定义列表的函数：

```
SELECT 'day int, ' || string_agg (x, ', ')
FROM (SELECT ('h' || generate_series(8,18) || ' int') AS x) a 
```*

# c++ - 我什么时候应该真正使用 noexcept？

> ID：10787766
> 
> 赞同：618
> 
> 时间：2012-05-28T16:29:09.123
> 
> 标签：c++, c++11, exception, noexcept

该`noexcept`关键字可以适当地应用于许多函数签名，但我不确定何时应该考虑在实践中使用它。根据我目前所读到的内容，最后一分钟的添加`noexcept`似乎解决了移动构造函数抛出时出现的一些重要问题。但是，对于一些导致我首先阅读更多内容的实际问题，我仍然无法提供令人满意的答案`noexcept`。

1.  我知道有许多函数示例永远不会抛出，但编译器无法自行确定。**在所有这些情况下**，我应该附加`noexcept`到函数声明吗？

     **必须考虑是否需要在**每个**`noexcept`函数声明后附加会大大降低程序员的工作效率（坦率地说，这会让人头疼）。在哪些情况下我应该更加小心使用，在哪些情况下我可以摆脱暗示？**`noexcept``noexcept(false)`**** 
*****   使用后我什么时候可以真正期望观察到性能改进`noexcept`？特别是，给出一个代码示例，C++ 编译器在添加`noexcept`.

    就我个人而言，我关心的是`noexcept`因为为编译器提供了更大的自由度，以安全地应用某些类型的优化。现代编译器是否`noexcept`以这种方式利用？如果没有，我可以期待他们中的一些人在不久的将来这样做吗？**** 

 ***** * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-05-28T17:02:16.210

我认为现在给出一个“最佳实践”的答案还为时过早，因为没有足够的时间在实践中使用它。如果在抛出说明符出现后立即询问这个问题，那么答案将与现在大不相同。

> 必须考虑是否需要`noexcept`在每个函数声明后附加会大大降低程序员的工作效率（坦率地说，这会很痛苦）。

好吧，然后在很明显该函数永远不会抛出时使用它。

> 使用后我什么时候可以真正期望观察到性能改进`noexcept`？[...] 就我个人而言，我很在意，`noexcept`因为它为编译器提供了更大的自由度，可以安全地应用某些类型的优化。

似乎最大的优化收益来自用户优化，而不是编译器优化，因为有可能对其进行检查`noexcept`和重载。大多数编译器都遵循一个 no-penalty-if-you-don't-throw 异常处理方法，所以我怀疑它会在代码的机器代码级别上改变很多（或任何东西），尽管可能会通过删除来减少二进制大小处理代码。

`noexcept`在四大（构造函数、赋值，而不是已经存在的析构函数）中使用`noexcept`可能会带来最好的改进，因为`noexcept`检查在模板代码（例如`std`容器）中是“常见的”。例如，除非它被标记（或者编译器可以以其他方式推断它），否则`std::vector`不会使用你的类的移动。`noexcept`

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2012-05-28T17:34:43.683

正如我这些天不断重复的那样：**语义第一**。

添加`noexcept`,`noexcept(true)`和`noexcept(false)`首先是关于语义的。它只是偶然条件一些可能的优化。

作为一名阅读代码的程序员， 的存在`noexcept`类似于`const`: 它可以帮助我更好地理解可能发生或可能不会发生的事情。因此，值得花一些时间考虑您是否知道该函数是否会抛出。提醒一下，任何类型的动态内存分配都可能抛出。

* * *

好的，现在开始可能的优化。

最明显的优化实际上是在库中执行的。C++11 提供了许多特征，允许知道一个函数是否存在，如果可能`noexcept`的话，标准库实现本身将使用这些特征来支持`noexcept`对他们操作的用户定义对象的操作。比如*移动语义*。

编译器可能只会从异常处理数据中减少一点（也许），因为它*必须*考虑到您可能撒谎的事实。如果标记的函数`noexcept`确实抛出，则`std::terminate`调用 then。

选择这些语义有两个原因：

*   `noexcept`即使依赖项尚未使用它也能立即受益（向后兼容性）
*   允许指定`noexcept`何时调用理论上可能抛出的函数，但对于给定的参数预计不会抛出

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2012-05-28T18:33:41.060

这实际上确实对编译器中的优化器产生了（潜在的）巨大差异。多年来，编译器实际上已经通过函数定义后的空 throw() 语句以及适当的扩展来拥有此功能。我可以向您保证，现代编译器确实利用这些知识来生成更好的代码。

几乎编译器中的每个优化都使用函数的“流程图”来推理什么是合法的。流程图由通常称为函数的“块”（具有单个入口和单个出口的代码区域）和块之间的边组成，以指示流可以跳转到的位置。Noexcept 改变了流程图。

你问了一个具体的例子。考虑这段代码：

```
void foo(int x) {
    try {
        bar();
        x = 5;
        // Other stuff which doesn't modify x, but might throw
    } catch(...) {
        // Don't modify x
    }

    baz(x); // Or other statement using x
} 
```

这个函数的流程图是不同的 if`bar`被标记`noexcept`（没有办法在 end`bar`和 catch 语句之间跳转）。当标记为`noexcept`时，编译器确定在 baz 函数期间 x 的值为 5 - x=5 块被称为“支配” baz(x) 块，没有从`bar()`到 catch 语句的边缘。

然后它可以做一些叫做“不断传播”的事情来生成更有效的代码。在这里，如果 baz 是内联的，则使用 x 的语句也可能包含常量，然后以前的运行时评估可以变成编译时评估，等等。

无论如何，简短的回答：`noexcept`让编译器生成更紧密的流程图，流程图用于推理各种常见的编译器优化。对于编译器来说，这种性质的用户注释非常棒。编译器会尝试找出这些东西，但它通常不能（有问题的函数可能在另一个编译器不可见的目标文件中，或者传递地使用了一些不可见的函数），或者当它这样做时，有可能会引发一些您甚至不知道的微不足道的异常，因此它不能将其隐式标记为`noexcept`（例如，分配内存可能会抛出 bad_alloc）。

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2012-09-24T07:31:45.237

`noexcept`可以显着提高某些操作的性能。这不会发生在编译器生成机器代码的级别，而是通过选择最有效的算法：正如其他人提到的，您使用 function 进行此选择`std::move_if_noexcept`。例如，`std::vector`（例如，当我们调用`reserve`）的增长必须提供强大的异常安全保证。如果它知道`T`' 移动构造函数不会抛出，它可以移动每个元素。否则它必须复制所有`T`s。这在[这篇文章](http://cpp-next.com/archive/2009/10/exceptionally-moving/)中有详细描述。

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2012-05-28T16:59:26.607

> 除了观察使用后的性能改进外，我什么时候可以实际使用`noexcept`？特别是，给出一个 C++ 编译器在添加 noexcept 后能够生成更好的机器代码的代码示例。

嗯，从来没有？从来没有时间？绝不。

`noexcept`用于*编译器*性能优化，其方式与`const`编译器性能优化相同。也就是说，几乎从来没有。

`noexcept`主要用于允许“您”在编译时检测函数是否可以引发异常。请记住：大多数编译器不会为异常发出特殊代码，除非它实际上抛出了一些东西。因此`noexcept`，向编译器提供有关如何优化函数的提示，而不是向*您*提供有关如何使用函数的提示。

像这样的模板`move_if_noexcept`将检测是否定义了移动构造函数，如果不是，`noexcept`则返回 a`const&`而不是`&&`类型的 a。如果这样做非常安全，这是一种说法。

`noexcept`通常，当您认为这样做实际上*有用*时，您应该使用它。`is_nothrow_constructible`如果该类型为真，则某些代码将采用不同的路径。如果您正在使用可以做到这一点的代码，那么请随意使用`noexcept`适当的构造函数。

简而言之：将它用于移动构造函数和类似的构造，但不要觉得你必须对它发疯。

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2017-01-09T14:49:12.210

用[Bjarne](https://en.wikipedia.org/wiki/Bjarne_Stroustrup)的话来说（*C++ 编程语言，第 4 版*，第 366 页）：

> 在终止是可接受的响应的情况下，未捕获的异常将实现这一点，因为它变成了对 terminate() 的调用（第 13.5.2.5 节）。此外，`noexcept`说明符（第 13.5.1.1 节）可以明确表示该愿望。
> 
> 成功的容错系统是多级的。每个级别都尽可能多地处理错误，而不会过于扭曲，并将其余部分留给更高级别。例外支持该观点。此外， 如果异常处理机制本身已*损坏*或未完全使用，则`terminate()`通过提供转义来支持此视图，从而使异常未被捕获。同样， *为尝试恢复似乎不可行的错误提供了简单的转义。***`noexcept`**
> 
>  *```
> double compute(double x) noexcept;     {
>     string s = "Courtney and Anya";
>     vector<double> tmp(10);
>     // ...
> } 
> ```
> 
> 向量构造函数可能无法为其十个双精度获取内存并抛出一个`std::bad_alloc`. 在这种情况下，程序终止。它通过调用`std::terminate()`（§30.4.1.3）无条件终止。它不会从调用函数中调用析构函数。`throw`是否调用来自和之间范围的析构函数 `noexcept`（例如，在compute() 中的for s）是实现定义的。程序即将终止，所以无论如何我们都不应该依赖任何对象。***通过添加`noexcept`说明符，我们表明我们的代码不是为了处理抛出而编写的。****

 ** * *

## 回答 #7

> 赞同：28
> 
> 时间：2014-12-25T17:08:13.527

> 1.  我知道有许多函数示例永远不会抛出，但编译器无法自行确定。在所有这些情况下，我应该在函数声明中附加 noexcept 吗？

`noexcept`很棘手，因为它是函数接口的一部分。特别是，如果您正在编写一个库，您的客户端代码可以依赖于该`noexcept`属性。以后可能很难更改它，因为您可能会破坏现有代码。当您实现仅由您的应用程序使用的代码时，这可能不是一个问题。

如果你有一个不能抛出的函数，问问你自己它是喜欢留下`noexcept`还是会限制未来的实现？例如，您可能希望通过抛出异常（例如，用于单元测试）来引入对非法参数的错误检查，或者您可能依赖于可能更改其异常规范的其他库代码。在这种情况下，保守并省略 会更安全`noexcept`。

另一方面，如果您确信该函数永远不应该抛出，并且它是规范的一部分是正确的，那么您应该声明它`noexcept`。`noexcept`但是，请记住，如果您的实现发生更改，编译器将无法检测到违规行为。

> 2.  在哪些情况下我应该更加小心使用 noexcept，在哪些情况下我可以使用隐含的 noexcept(false)？

您应该专注于四类功能，因为它们可能会产生最大的影响：

1.  移动操作（移动赋值运算符和移动构造函数）
2.  交换操作
3.  内存释放器（运算符删除，运算符删除 []）
4.  析构函数（尽管这些是隐含的`noexcept(true)`，除非你制作它们`noexcept(false)`）

这些函数通常应该是`noexcept`，并且库实现很可能可以使用该`noexcept`属性。例如，`std::vector`可以在不牺牲强异常保证的情况下使用非抛出移动操作。否则，它将不得不退回到复制元素（就像在 C++98 中所做的那样）。

这种优化是算法层面的，不依赖编译器优化。它可能会产生重大影响，尤其是在复制元素成本高昂的情况下。

> 3.  使用 noexcept 后，我​​什么时候可以真正期望观察到性能改进？特别是，给出一个 C++ 编译器在添加 noexcept 后能够生成更好的机器代码的代码示例。

`noexcept`反对无异常规范的优点`throw()`是该标准允许编译器在堆栈展开时有更大的自由度。即使在这种`throw()`情况下，编译器也必须完全展开堆栈（并且它必须按照对象构造的完全相反的顺序进行）。

`noexcept`另一方面，在这种情况下，不需要这样做。没有要求必须展开堆栈（但仍然允许编译器这样做）。这种自由允许进一步的代码优化，因为它降低了总是能够展开堆栈的开销。

关于[noexcept、堆栈展开和性能](https://stackoverflow.com/q/26079903/783510)的相关问题详细介绍了需要堆栈展开时的开销。

我还推荐 Scott Meyers 的书“Effective Modern C++”，“第 14 条：声明函数 noexcept 如果它们不会发出异常”以供进一步阅读。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2012-05-29T13:10:39.940

> 我知道有许多函数示例永远不会抛出，但编译器无法自行确定。在所有这些情况下，我应该在函数声明中附加 noexcept 吗？

当您说“我知道 [他们] 永远不会抛出”时，您的意思是通过检查函数的实现，您知道该函数不会抛出。我认为这种方法是由内而外的。

最好将函数是否可能引发异常作为函数*设计*的一部分来考虑：与参数列表以及方法是否为 mutator (... `const`) 一样重要。声明“这个函数从不抛出异常”是对实现的约束。省略它并不意味着该函数可能会抛出异常；这意味着该函数的当前版本*和*所有未来版本都可能抛出异常。这是一个使实施更加困难的约束。但是有些方法必须有约束才能实际有用；最重要的是，它们可以从析构函数中调用，也可以用于在提供强大异常保证的方法中执行“回滚”代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-17T03:00:08.287

这是一个简单的例子来说明什么时候它真的很重要。

```
#include <iostream>
#include <vector>
using namespace std;
class A{
 public:
  A(int){cout << "A(int)" << endl;}
  A(const A&){cout << "A(const A&)" << endl;}
  A(const A&&) noexcept {cout << "A(const A&&)" << endl;}
  ~A(){cout << "~S()" << endl;}
};
int main() {
  vector<A> a;
  cout << a.capacity() << endl;
  a.emplace_back(1);
  cout << a.capacity() << endl;
  a.emplace_back(2);
  cout << a.capacity() << endl;
  return 0;
} 
```

这是输出

```
0
A(int)
1
A(int)
A(const A&&)
~S()
2
~S()
~S() 
```

如果我们删除移动构造函数中的 noexcept，这里是输出

```
0
A(int)
1
A(int)
A(const A&)
~S()
2
~S()
~S() 
```

主要区别是`A(const A&&)`vs `A(const A&&)`。在第二种情况下，它必须使用复制构造函数复制所有值。非常低效！*****

# c# - 'C:\MPIHello\bin\Debug' 不是内部或外部命令、可运行程序或批处理文件

> ID：10787770
> 
> 赞同：0
> 
> 时间：2012-05-28T16:29:22.507
> 
> 标签：c#

```
using System;
using MPI;

class MPIHello
{
    static void Main(string[] args)
    {
        using (new MPI.Environment(ref args))
        {
            Intracommunicator comm = Communicator.world;
            if (comm.Rank == 0)
            {
                //Send its rank to the next neighbor
                comm.Send(comm.Rank, 1, 0);

                //Receive message 
                int msg = comm.Receive<int>(comm.Size, 0);

                Console.WriteLine("I am MPI process " + comm.Rank + " of " + comm.Size    + ", on my left is " + msg);
            }
            else
            {
                //Receive message
                int msg = comm.Receive<int>(comm.Rank - 1, 0);

                Console.WriteLine("I am MPI process " + comm.Rank + " of " + comm.Size + ", on my left is " + msg);

                //Send message to next neighbor
                comm.Send(comm.Rank, (comm.Rank + 1) % comm.Size, 0);
            }
        }
    }
} 
```

这是我已经完成的C#编码，但是当我想在命令提示符中运行它时，出现这个错误'C:\MPIHello\bin\Debug' is not Recognized as an internal or external command, operable program or batch文件...我可以知道是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:32:43.663

是的，它是一个目录。通常，程序位于此目录中。你能提供更多信息吗？

# php - 在PHP中将字符串数组转换为整数数组时使用引用会导致意外输出？

> ID：10787774
> 
> 赞同：0
> 
> 时间：2012-05-28T16:29:35.537
> 
> 标签：php, arrays, string, integer, type-conversion

假设我们有这个字符串数组：

```
$arrString = ["1", "2", "3"]; 
```

将值转换为整数的一种传统方法如下：

```
foreach ($arrString as $key => $value)
    $arrString[$key] = (int) $arrString[$key];

echo var_dump($arrString); 
```

这输出：

```
array(3) { [0]=> int(1) [1]=> int(2) [2]=> int(3) } 
```

很期待。但是，我相信使用参考是完成相同工作的更快方法：

```
foreach ($arrString as &$strValue)
    $strValue = (int) $strValue;

 echo var_dump($arrString); 
```

猜猜它输出什么？

```
array(3) { [0]=> int(1) [1]=> int(2) [2]=> &int(3) } 
```

也就是说，它将最后一个值分配为对 int 的引用。当在循环中使用引用时（即使只有一个元素），这总是发生在最后一个元素上，而且无论我使用 (int) cast 还是 PHP 的 settype- 和 intval 函数，它也会发生。

它打败了我；为什么会这样？我真的应该关心吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:38:10.967

您应该关心，并且在此之前已在 SO 上多次解释过（并且 PHP 文档中有明确的警告）

做

```
unset($strValue); 
```

循环之后

请参阅[此处](https://stackoverflow.com/questions/4969243/strange-behavior-of-foreach/4969286#4969286)以获取说明

**编辑**

[参考](http://uk.php.net/manual/en/control-structures.foreach.php)

带引号：

> **警告**
> 
> 即使在*foreach*循环之后，对*$value*和最后一个数组元素的引用仍然存在。建议通过 unset() 将其销毁。

# ruby - ROR 如何在自定义验证中最好地处理 nil

> ID：10787778
> 
> 赞同：0
> 
> 时间：2012-05-28T16:29:48.223
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有这个自定义验证，当因为生日为 nil 而没有设置生日时，它会抛出一个“未定义的方法 `>' for nil:NilClass”。

```
validate :is_21_or_older 
def is_21_or_older
  if birthday > 21.years.ago.to_date
    errors.add(:birthday, "Must 21 Or Older")
  end
end 
```

我已经为生日设置了 validates_presence_of，所以有没有办法让 is_21_or_older 仅在 validates_presence_of 通过后才调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:58:19.940

Rails 独立运行所有验证器，以便一次为您提供所有错误的数组。这样做是为了避免太常见的情况：

> 请输入密码。
> 
> **`pass`**
> 
> 您输入的密码无效：它不包含数字。
> 
> **`1234`**
> 
> 您输入的密码无效：它不包含字母。
> 
> **`a1234`**
> 
> 您输入的密码无效：密码长度至少为六个字符。
> 
> **`ab1234`**
> 
> 您输入的密码无效：您不能在一个序列中使用三个或更多连续字符。
> 
> **`piss off`**
> 
> 您输入的密码无效：它不包含数字。

据我所知，你可以做两件事。要么将所有内容包含在您的自定义验证器下，在这种情况下，一切都在您的控制之下，或者使用`:unless => Proc.new { |x| x.birthday.nil? }`修饰符明确限制您的验证器在它会中断的情况下运行。我肯定会建议第一种方法；第二个是hacky。

```
def is_21_or_older
  if birthday.blank?
    errors.add(:birthday, "Must have birthday")
  elsif birthday > 21.years.ago.to_date
    errors.add(:birthday, "Must 21 Or Older")
  end
end 
```

也许更好的方法是保留存在验证器，当它看到另一个验证器的条件失败时退出您的自定义验证器。

```
def is_21_or_older
  return true if birthday.blank? # let the other validator handle it

  if birthday > 21.years.ago.to_date
    errors.add(:birthday, "Must 21 Or Older")
  end
end 
```

# javascript - html元素（div）的全高，包括边框，填充和边距？

> ID：10787782
> 
> 赞同：91
> 
> 时间：2012-05-28T16:30:10.730
> 
> 标签：javascript, css

我需要一个 div 的全高，我目前正在使用

```
document.getElementById('measureTool').offsetHeight 
```

> `offsetHeight`- 返回元素的高度，包括边框和填充（如果有），但不包括边距

但是 div 内的一个嵌套元素有一个`margin-top`of `20%`，所以我得到了错误的测量结果。我试过了`style.marginTop`，`scrollHeight`但没有成功。

如何在javascript中获取元素（div）的完整高度（边框、填充、边距）？

如果没有其他方法，我可以使用 jQuery。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2014-05-20T00:47:21.477

像这样的东西（没有jquery）呢？它类似于@gdoron 的答案，但更简单一些。在 IE9+、Firefox 和 Chrome 中进行了测试。

```
function getAbsoluteHeight(el) {
  // Get the DOM Node if you pass in a string
  el = (typeof el === 'string') ? document.querySelector(el) : el; 

  var styles = window.getComputedStyle(el);
  var margin = parseFloat(styles['marginTop']) +
               parseFloat(styles['marginBottom']);

  return Math.ceil(el.offsetHeight + margin);
} 
```

这是一个[工作 jsfiddle](http://jsfiddle.net/7926G/2/)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-05-28T16:32:07.567

如果你可以使用 jQuery：

```
$('#divId').outerHeight(true) // gives with margins. 
```

[**jQuery 文档**](http://api.jquery.com/outerHeight/)

对于 vanilla javascript，您需要编写更多内容（像往常一样......）：

```
function Dimension(elmID) {
    var elmHeight, elmMargin, elm = document.getElementById(elmID);
    if(document.all) {// IE
        elmHeight = elm.currentStyle.height;
        elmMargin = parseInt(elm.currentStyle.marginTop, 10) + parseInt(elm.currentStyle.marginBottom, 10) + "px";
    } else {// Mozilla
        elmHeight = document.defaultView.getComputedStyle(elm, '').getPropertyValue('height');
        elmMargin = parseInt(document.defaultView.getComputedStyle(elm, '').getPropertyValue('margin-top')) + parseInt(document.defaultView.getComputedStyle(elm, '').getPropertyValue('margin-bottom')) + "px";
    }
    return (elmHeight+elmMargin);
} 
```

​现场 [**演示**](http://jsfiddle.net/rA6Cb/)

[代码源](http://www.webdeveloper.com/forum/archive/index.php/t-45522.html)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-02-05T19:14:33.170

```
var el = document.querySelector('div');

var elHeight = el.offsetHeight;
elHeight += parseInt(window.getComputedStyle(el).getPropertyValue('margin-top'));
elHeight += parseInt(window.getComputedStyle(el).getPropertyValue('margin-bottom'));

console.log(elHeight); 
```

[https://jsfiddle.net/gbd47ox1/](https://jsfiddle.net/gbd47ox1/)

我认为这个解决方案更具可读性，但是所提供的解决方案都没有考虑到不是像素的大小...... :(

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-11-28T16:26:16.030

另一个使用[箭头函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)的功能解决方案：

```
let el = document.querySelector('div');
let style = window.getComputedStyle(el);
let height = ['height', 'padding-top', 'padding-bottom']
        .map((key) => parseInt(style.getPropertyValue(key), 10))
        .reduce((prev, cur) => prev + cur); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-01-08T16:02:16.750

qdev 写了一个[不错的解决方案](https://stackoverflow.com/a/50490646/5950626)，但是我认为 offsetHeight 比 getBoundingClientRect() 更快且支持更好。我还使用 ES6 来减少代码大小。

```
/**
 * Returns the element height including margins
 * @param element - element
 * @returns {number}
 */
function outerHeight(element) {
    const height = element.offsetHeight,
        style = window.getComputedStyle(element)

    return ['top', 'bottom']
        .map(side => parseInt(style[`margin-${side}`]))
        .reduce((total, side) => total + side, height)
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-01-17T20:33:20.713

依次使用所有道具、边距、边框、填充和高度。

```
function getElmHeight(node) {
    const list = [
        'margin-top',
        'margin-bottom',
        'border-top',
        'border-bottom',
        'padding-top',
        'padding-bottom',
        'height'
    ]

    const style = window.getComputedStyle(node)
    return list
        .map(k => parseInt(style.getPropertyValue(k), 10))
        .reduce((prev, cur) => prev + cur)
} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-05-23T14:13:31.720

原版 JavaScript ECMAScript 5.1

*   [element.getBoundingClientRect()](https://caniuse.com/#feat=getBoundingClientRect)返回一个 DOMRect 对象，其中包含`height`（包括`padding`& `border`）
*   [window.getComputedStyle(element)](https://caniuse.com/#search=getComputedStyle)在应用活动样式表并执行任何计算（如果存在）后返回具有所有 CSS 属性的对象

```
var element = document.getElementById('myID'),
    height = element.getBoundingClientRect().height,
    style = window.getComputedStyle(element);

// height: element height + vertical padding & borders
// now we just need to add vertical margins
height = ["top", "bottom"]
  .map(function(side) {
    return parseInt(style['margin-' + side], 10)
  })
  .reduce(function(total, side) {
    return total + side
  }, height)

// result: compare with devtools computed measurements
document.querySelector('.result').innerText = 'Total height is: ' + height + 'px';
```

```
#myID {
  padding: 10px 0 20px;
  border-top: solid 2px red;
  border-bottom: solid 3px pink;
  margin: 5px 0 7px;
  background-color: yellow;
}

.result {
  margin-top: 50px;
}
```

```
<div id="myID">element</div>
<div class="result"></div>
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-12-09T22:02:41.330

旧的 - 无论如何......对于所有 jQuery-banning 和快捷方式的人来说，这里有一些附加脚本，它扩展了其他答案的维度/getabsoluteheight 方法：

```
function getallinheight(obj) {
  var compstyle=(typeof window.getComputedStyle==='undefined')?obj.currentStyle:window.getComputedStyle(obj);
  var marginTop=parseInt(compstyle.marginTop);
  var marginBottom=parseInt(compstyle.marginBottom);
  var borderTopWidth=parseInt(compstyle.borderTopWidth);
  var borderBottomWidth=parseInt(compstyle.borderBottomWidth);
  return obj.offsetHeight+
         (isNaN(marginTop)?0:marginTop)+(isNaN(marginBottom)?0:marginBottom)+
         (isNaN(borderTopWidth)?0:borderTopWidth)+(isNaN(borderBottomWidth)?0:borderBottomWidth);
}
alert(getallinheight(document.getElementById('measureTool'))); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-03-12T21:08:54.403

早期的解决方案可能是理想的。为了寻找一种简单的方法，我想出了类似的方法。这将目标包装在一个`div`. 的高度`div`已经计算并四舍五入。

```
<div style="margin: 0; padding: 0; border: none;">
    <p class="target">something info ex</p>
</div> 
```

在 JavaScript 中：

```
var height = document.querySelector(".target").parentElement.offsetHeight; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-11T12:45:50.570

在 Vanilla JS 的 getAllmargin 函数中，我们得到顶部和底部边距的总和，使用 clientHeight 我们得到包括所有填充的高度

```
var measureTool = document.getElementById('measureTool');
function getAllmargin(elem){
//Use parseInt method to get only number
        return parseInt(window.getComputedStyle(elem, null).getPropertyValue('margin-top')) 
        + parseInt(window.getComputedStyle(elem, null).getPropertyValue('margin-bottom'));
}
//Finally we get entire height  
console.log(measureTool.clientHeight + getAllmargin(measureTool)); 
```

# wpf - WPF Window 构造函数使 C++ 应用程序崩溃

> ID：10787784
> 
> 赞同：0
> 
> 时间：2012-05-28T16:30:19.173
> 
> 标签：wpf, c++-cli

我有一个 C++ 应用程序，我试图在其中显示一个 WPF 表单（名为 WSWindow），特别是一个从 System.Windows.Window 类继承的表单，以便我可以使用 WindowInteropHelper 类获取窗口句柄。

我的问题是，每当我调用下面的方法时，应用程序就会崩溃。

```
public IntPtr GetHWND()
{
    if (ivWindow == null)
    {
        ivWindow = new WSWindow();

        ivWindow.WindowStartupLocation = WindowStartupLocation.Manual;

        ivWindow.Show();
    }

    IntPtr handle = new WindowInteropHelper(ivWindow).Handle;

    return handle;                    
} 
```

我相信 WSWindow 构造函数导致崩溃。在 C# 方面，有一个调用 WSWindow 构造函数的 WSService 类，如果我将 WSWindow 构造函数放在 WSService 构造函数中，C++ 应用程序在调用 WSService 构造函数时崩溃（当 WSService 构造函数不包含WSWindow 构造函数）。此外，除了调用上述方法外，我还在 C++ 应用程序中尝试了以下方法：

```
WSWindow^ w = gcnew WSWindow(); 
```

并且紧随此行之后的日志行不会写入日志文件。

在 WSWindow 构造器中，有一个对 InitializeComponents 的调用，它是在 WSWindow.g.cs 文件中生成的代码：

```
[System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public void InitializeComponent() {
        if (_contentLoaded) {
            return;
        }
        _contentLoaded = true;
        System.Uri resourceLocater = new System.Uri("/Project_Name;component/wswindow.xaml", System.UriKind.Relative);

        #line 1 "..\..\WSWindow.xaml"
        System.Windows.Application.LoadComponent(this, resourceLocater);

        #line default
        #line hidden
    } 
```

起初我认为可能是对 LoadComponent 的调用失败，因为无法解析 uri，但我在调用 InitializeComponent() 之前在 WSWindow 构造函数中添加了一条日志行，该日志行是在从 Windows 窗体测试创建 WSWindow 时写入的应用程序，但不是当 WSWindow 是由 C++ 应用程序的调用创建时，所以似乎 WSWindow 构造函数中的任何内容都没有被执行，它只是立即崩溃。

我可以说的参考没有问题；我已经编写了几个测试方法，一个返回一个 int，一个是一个简单的自定义 Window 对象，其中包含宽度/高度成员，并成功地从 C++ 应用程序调用了这两种方法。

当它被编译为 WPF 应用程序并在启动 C++ 应用程序之前运行时，我还成功地检索了 WSWindow 的句柄，但我需要能够从 C++ 应用程序中的调用创建 WSWindow。

我花了几天的时间来解决这个问题，试图弄清楚为什么会发生崩溃而没有运气。我希望阅读本文的人了解可能导致此问题的 WPF，或者 C++/CLI 和 WPF 控件之间的已知问题。我完全没有想法。

附加信息：当我启动 C++ 应用程序并将 VS 附加到进程时，调用堆栈中没有显示任何内容（我需要处理的一个单独问题），但我注意到一些看起来可能相关的异常：

```
First-chance exception at 0x75a8b9bc (KernelBase.dll) in MM.EXE: Microsoft C++ exception: HRException at memory location 0x06e6b158..
First-chance exception at 0x75a8b9bc (KernelBase.dll) in MM.EXE: Microsoft C++ exception: [rethrow] at memory location 0x00000000..
First-chance exception at 0x75a8b9bc (KernelBase.dll) in MM.EXE: Microsoft C++ exception: HRException at memory location 0x06e6b608..
First-chance exception at 0x75a8b9bc (KernelBase.dll) in MM.EXE: Microsoft C++ exception: [rethrow] at memory location 0x00000000.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:36:28.003

解决方案是我需要标记调用线程以使用 [STAThread] 属性创建/显示 WPF 窗口。

# .net - 发起TCP连接关闭后如何接收数据？

> ID：10787788
> 
> 赞同：2
> 
> 时间：2012-05-28T16:30:46.567
> 
> 标签：.net, tcp

TCP 允许一方发出“FIN”，并让另一方在结束其一侧的连接之前响应一些数据。

如何使用 .NET 实现这一点`TcpClient`？看来我必须使用`Close`来发出 FIN，但之后我不能再调用`Client.Receive`，因为`Client`设置为`null`by `Close`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:00:24.473

发出关闭输出。这会发送 FIN 并阻止您编写任何其他内容，但会使连接的另一半保持打开状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T22:10:03.470

在 .NET 中执行此操作的方法是调用

```
Socket.Shutdown(SocketShutdown.Send); 
```

或者，如果您使用的是`TcpClient`：

```
TcpClient.Client.Shutdown(SocketShutdown.Send); 
```

# ruby-on-rails-3 - Ruby（Rails）电子邮件（base64）在变音符号和内容在mysql中丢失时分裂

> ID：10787791
> 
> 赞同：1
> 
> 时间：2012-05-28T16:31:07.973
> 
> 标签：ruby-on-rails-3, email, mailman

我的应用程序使用 mailman gem（也使用邮件）从外部服务器读取电子邮件时遇到问题。

```
ruby 1.9.2p0
mail (2.3.0)
mailman (0.4.0) 
actionmailer (= 3.1.3) 
```

**数据库.yml**

```
production:
  adapter: mysql2
  encoding: utf8 
```

这是接收“邮件”的简单方法。我从多部分电子邮件的 text_part（例如，带有附件）或整个正文（已解码）构建 @message_body。

```
def self.receive_mail(message)
    # some code here 
    @message_body = message.multipart? ? message.text_part.body.to_s : message.body.decoded
    # some code here, to save message in database 
```

我的问题是，如果消息没有附件但有变音符号，例如 ą ś ł ń ż ź ó ... 正文在第一个变音符号之前被拆分。因此，如果 body 是：“test żłóbek test”，我将在@message_body 中仅获得“test”。

我的问题是如何以一种优雅的方式保存这样的消息，以便文本部分与所有变音符号一起保存在数据库中。

编辑：为了让它更干净，我收到的电子邮件看起来像这样（它只是从 gmail 发送的电子邮件的一部分）

--20cf307ac4372d830104c11c8cc6 日期：2012 年 5 月 28 日星期一 20:06:16 +0200 Mime 版本：1.0 内容类型：文本/纯文本；charset=ISO-8859-2 内容传输编码：base64 内容 ID：<4fc3be989b76e_794650c25f6625e3@vk1057.some_domain>

dGVzdCC/s7zm8bbzsSB0ZXN0Cg==

所以我们有这个“身体”：dGVzdCC/s7zm8bbzsSB0ZXN0Cg==

解码后我们得到：'test \xbf\xb3\xbc\xe6\xf1\xb6\xf3\xb1 test\n'

问题是从 '\xbf' 开始的数据没有保存在数据库中。

**更新**

另一个例子，我认为这是这里的问题：

```
irb(main):008:0* require 'base64'
=> true
irb(main):009:0> a = "test źćłżąńś"
=> "test źćłżąńś"
irb(main):010:0> b = Base64.encode64(a)
=> "dGVzdCDFusSHxYLFvMSFxYTFmw==\n"
irb(main):011:0> Base64.decode64(b)
=> "test \xC5\xBA\xC4\x87\xC5\x82\xC5\xBC\xC4\x85\xC5\x84\xC5\x9B" 
```

看，在 decode64 之后我的变音符号丢失了，该怎么做才能让它们回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:18:12.217

```
force_encoding('utf-8') 
```

不起作用，因为数据不是 utf-8 - 您的邮件标题清楚地表明邮件正文是 ISO 8859-2。

Mysql2 假设一切都是 utf8 但不能将字节转换为 utf8 （因为 ruby​​ 不知道原始编码）所以你的非 ascii 字符被 mysql 丢弃

对于那一个字符串，您可以尝试

```
body.force_encoding('ISO-8859-2').encode('utf-8') 
```

但你真的想从内容类型标头中找出要使用的编码。我很惊讶邮件宝石没有为你做那件事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:22:57.670

我有解决办法。的串联

```
.force_encoding("ORIGINAL_CHARSET").encode("UTF-8") 
```

电子邮件正文对象上的方法是解决方案。

我不得不将我的`receive_mail()`定义从以前的“一个班轮”更改为：

```
if message.multipart?
    charset = message.text_part.content_type_parameters[:charset]
    @message_body = message.text_part.body.to_s.force_encoding(charset).encode("UTF-8")
else
    charset = message.content_type_parameters[:charset]
    @message_body = message.body.decoded.force_encoding(charset).encode("UTF-8")
end 
```

有了这个结构，我可以检测到原始电子邮件的字符集是什么，然后强制它并编码回 UTF-8。这确保了从原始到 utf-8 的 base64 正确解码。

如果有人有更优雅的解决方案，请分享。

# sql - 根据使用的 where 子句索引正确的列

> ID：10787792
> 
> 赞同：3
> 
> 时间：2012-05-28T16:31:10.217
> 
> 标签：sql, performance, optimization, indexing

我有一张有消息的桌子。所以我有列，，，`id`等`from`。`to`如果我想为特定用户显示收件箱，我会写一个选择语句

```
where to = 'username' order by id desc limit 0,20; 
```

这将显示该用户的前 20 条消息。所以显然我应该在列上放置索引`to`，并且 id 列上已经有一个索引，因为它是一个主键，但是在 ( `to`, `id`) 上设置索引会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:43:27.360

不幸的是，答案比适合 SO 的要大。人们已经写了这方面的书。

在简单的层面上，拥有一个索引`(to, id DESC)`将是解决该查询的最佳选择。索引中的第一个字段确保数据易于搜索，并且所有感兴趣的记录都在一个连续的块中。索引中的第二个字段可确保对连续块进行预排序，从而轻松找到前 20 条记录。

但维持该指数也是一个问题。这样的索引可能很容易产生碎片。是否有能力在夜间维护工作中重建索引？并且您拥有的索引越多，磁盘空间开销就越大。您是否有磁盘空间为可能需要的每个查询创建一个新索引？额外的索引会增加写入开销。表多久被写入一次，最小延迟有多重要？添加您将要查询的字段，除了您正在过滤/搜索/加入的字段之外，还意味着您只需要读取索引而不需要“加入”到基表。这种好处是否值得进一步增加拥有更多和更广泛索引的开销？

这是一个很好的问题，有一个非常广泛的答案，我在这里只提到了表面。

# ruby-on-rails-3 - Heroku pgbackups：本地主机还原上的语法错误

> ID：10787794
> 
> 赞同：18
> 
> 时间：2012-05-28T16:31:12.240
> 
> 标签：ruby-on-rails-3, postgresql, heroku

尝试恢复使用 heroku pgbackups -tool 制作的数据库备份。

我通过公开网址下载备份：

```
$ heroku pgbackups:url 'backup-name' 
```

创建数据库：

```
$ createdb 'dbname' -U postgres 
```

并尝试从 *.dump 文件中恢复：

```
$ psql -U postgres -d 'dbname' -f *.dump 
```

我最终会遇到以下类型的语法错误：

```
ERROR:  syntax error at or near "PGDMP"
...
ERROR:  invalid byte sequence for encoding "UTF8": 0x9d
HINT:  This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding" 
```

好的，所以这与编码有关 - 但我如何解决它？

config/application.rb 和我的 postgres 服务器都将编码设置为 UTF-8。database.yml 已为其配置了 sqlite（尚未涉及生产配置）。Gemfile 很简单：

```
gem 'pg' 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-28T16:39:09.367

[我直接从手册中](https://devcenter.heroku.com/articles/heroku-postgres-import-export)找到了答案：

```
$ curl -o latest.dump `heroku pgbackups:url`

$ pg_restore --verbose --clean --no-acl --no-owner -h myhost -U myuser -d mydb latest.dump 
```

# php - 从另一个 php 文件调用未定义的函数

> ID：10787796
> 
> 赞同：5
> 
> 时间：2012-05-28T16:31:17.017
> 
> 标签：php, include, undefined

好吧，这就是我的代码的样子

**索引.php**

```
require_once($WebsiteRoot . "/include/testfile.php");
TestFunction(); 
```

**/include/testfile.php**

```
function TestFunction()
{
    echo "It Works";
} 
```

**它给了我错误：**

```
Fatal error:
Call to undefined function TestFunction() in /path/index.php on line 49 
```

知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T17:13:29.043

您没有`<?php`在包含的文件中包含标签，因此它只是被解释为纯文本输入。

请记住……没有 PHP 脚本之类的东西。只有包含 PHP 代码块的文件。如果没有至少一个`<?php`开始标签，PHP 解释器将永远不会被调用，文件的内容将被简单地视为输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:35:19.153

尝试从 testfile.php 调用另一个函数，如果这不起作用，则它与包含有关。添加代码：

```
error_reporting(E_ALL | E_WARNING | E_NOTICE);
ini_set('display_errors', TRUE); 
```

到 index.php 的顶部并刷新浏览器以查看您的错误，尝试从那里进行调试。

我可以预见的问题是您使用的是 URL 而不是路径，您的 $websiteRoot 变量应该包含如下路径：

```
$websiteRoot = "/var/www/html/websiteName";
OR
$websiteRoot = "C://xampp/htdocs/websiteName"; 
```

而不是像这样的 URL：

```
$websiteRoot = "http://www.somesite.com"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-31T03:37:09.583

我有一个类似的问题。我在包含的文件中挖掘了 PHP，发现了一个无效的 PHP 标签。我有`<?`而不是`<?php`. PHP 7.2 和更早的版本原谅了这一点，但是 PHP 7.3 抛出了你遇到的同样的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:35:44.867

确保您包含您认为的文件。如果您的`index.php`页面看起来与您所说的完全一样，那么它不会返回任何内容。

如果您想从站点上的任何位置链接到相同的位置而不用担心相对位置，那么在文件的开头，输入：

```
$WebsiteRoot=$_SERVER['DOCUMENT_ROOT']; 
```

它应该可以正常工作，前提是您的文件位于[http://mywebsite.com/include/testfile.php](http://mywebsite.com/include/testfile.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-21T09:15:56.127

尝试重命名包含的文件。

我有一个名为“system.php”的包含文件。看起来好像刚刚跳过了包含命令。即使使用最严格的错误报告，也没有消息，甚至包含文件主体中的 echo 命令也没有产生输出。它在 PHP 5 下运行良好，但在升级到 7.2 环境后出现了这些问题。经过很多努力 - 我忘记了如何 - 我设法收到一条错误消息。它说与名为“system”的 PEAR 类存在冲突。然而我的文件不包含任何类，只包含变量和函数。无论如何，给文件命名为“system.php”之外的其他名称对我有用。

我希望其他人可以添加更多关于这里出了什么问题的技术评论。

# android - 设置一个捕获以仅在加载时回收位图

> ID：10787799
> 
> 赞同：0
> 
> 时间：2012-05-28T16:31:30.657
> 
> 标签：android, button, asynchronous, bitmap, android-asynctask

我有这个问题我只想回收图像，如果它没有完成加载并且用户导航离开它，那么我不应该回收位图，因为它不存在并且系统在我身上崩溃，

```
Button bRight = (Button) findViewById(R.id.buttonRight);
    bRight.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startActivity(new Intent("intent"));
            bitmaptwo.recycle();
            finish();

        }
        }); 
```

我这样做是为了阻止内存泄漏，它可以工作，但不是实现它的最佳方式，因为当图像没有加载时系统崩溃，因为它是一个异步任务，有人可以帮助我吗？，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:08:01.730

```
if(bitmaptwo != null){
    bitmaptwo.recycle();
} 
```

# c# - 如何提高具有多个后台工作人员的 WPF 应用程序的性能

> ID：10787800
> 
> 赞同：0
> 
> 时间：2012-05-28T16:31:31.090
> 
> 标签：c#, .net, wpf

我有一些 WPF 应用程序，它通过下载文件`Background Worker`并同时显示一些动画。

在那一刻动画会定期卡住的主要问题。

我不知道为什么。但我想我必须降低`Background Worker`下载文件的优先级。

任何线索如何在 WPF 应用程序下更好地合并动画和文件下载？

当然，我总是可以设计这个功能，但我的想法是保持一体式瓶子。:)

有什么好的性能方法吗？

谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:32:47.177

我的猜测是 9 个 BackgroundWorker 正在排队等待 UI 线程报告进度。

解决方案：

*   更少的后台工作人员 - 9 是与服务器的大量连接，也许您可​​以尝试在一次调用中加载更多数据。
*   更少的进度报告 - 如果 UI 线程是瓶颈，您可以让每个后台工作人员设置一个属性并让一个后台工作人员报告所有进度。
*   更少的动画 - 也会释放 UI 线程。

# vb.net - SUM 的 LINQ 组

> ID：10787802
> 
> 赞同：2
> 
> 时间：2012-05-28T16:31:47.897
> 
> 标签：vb.net, linq, linq-to-sql, group-by

给定以下查询

```
Dim Query = From c In DB.Crt _
                        Where c.Member.Locked = False _
                        And c.Member.Verified = True _
                        And c.Ct > 0 _
                        Order By c.Ct Ascending _
                        Select New With {.MemberID = c.MemberID, _
                                         .Ct = c.Ct} 
```

我如何按 SUM 分组`c.ct`？

就像是`SUM OF(c.Ct) > 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:07:06.317

试试这个：

```
Dim Query =
    From c In DB.Crt _
    Where c.Member.Locked = False _
    And c.Member.Verified = True _
    And c.Ct > 0 _
    Order By c.Ct Ascending _
    Group c.Ct By Key = c.MemberID Into Cts = Group _
    Select New With { .MemberID = Key, .Ct = Cts.Sum() } 
```

# android - 启动外部活动而不出现在后台堆栈中

> ID：10787812
> 
> 赞同：2
> 
> 时间：2012-05-28T16:32:21.947
> 
> 标签：android, android-intent, android-activity, back-stack

我需要启动一个外部`activity`（不是我的）一瞬间，然后我有一个`service`启动我以前`activity`的用户查看。

这很好用，但问题是当用户按下后退键时，他会到达那个 external `activity`。

我在`activity`这里有两个不同的启动，一个用于 external `activity`，一个用于我`activity`返回（我需要使用`FLAG_ACTIVITY_NEW_TASK`它，因为我从 a 启动它`service`）。

对于这两次发布，我尝试了以下任意组合： `FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET`, `FLAG_ACTIVITY_NO_HISTORY`, `FLAG_ACTIVITY_NEW_TASK`, `FLAG_ACTIVITY_CLEAR_TOP`, `FLAG_ACTIVITY_CLEAR_TASK`, `FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`.

没有任何帮助，我`activity`在按下后一直看到外部。

我在这里看到了一些类似的问题，但他们都在自己的应用程序中有中间活动，所以他们可以调用完成，或者`noHistory="true"`在清单中设置。

有任何想法吗？

更新：似乎问题是我从服务重新启动了我以前的活动，这意味着我需要从[任务和返回堆栈](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html#TaskLaunchModes)的文档中给它 FLAG_ACTIVITY_NEW_TASK ：

> FLAG_ACTIVITY_NEW_TASK 在新任务中启动活动。如果您正在启动的 Activity 的任务已经在运行，则该任务将被带到前台并恢复其最后状态，并且该 Activity 在 onNewIntent() 中接收新意图。这会产生与上一节中讨论**的“singleTask”launchMode 值相同的行为。**

从 singleTask 段落：

> "singleTask" 系统创建一个新任务，并在新任务的根目录下实例化activity... 注意：虽然activity在一个新任务中开始，**但是Back按钮仍然让用户返回到前一个activity**。

所以我需要一个以某种方式覆盖这种行为的标志......

# c++ - 在 C++ 中使用 Dos 命令时使用 GetLastError

> ID：10787816
> 
> 赞同：0
> 
> 时间：2012-05-28T16:32:42.077
> 
> 标签：c++, file

所以我有一些代码使用 Dos 命令来尝试重命名文件夹。所以

```
system("rename C:\\Users\\me\\SecondDir NewDir); 
```

所以这试图将 SecondDir 重命名为 NewDir。该位置已经有一个名为 NewDir 的文件夹，因此它应该会失败。它确实如此。然后我使用 GetLastError 来获取返回的错误代码，以确保问题是我所期望的。但它只返回 ERROR_NO_MORE_FILES。这不是我应该得到的错误，即 ERROR_ALREADY_EXISTS。我假设这与使用系统命令有关？

编辑：我刚刚检查过，我什至在命令成功时返回 ERROR_NO_MORE_FILES 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:44:05.807

GetLastError 不会返回有意义的值，除非在记录的情况下这样做。这不是其中之一-您获得的值是无关紧要的，并且是针对其他人的。

要从 C 中重命名文件，您应该使用 C 运行时`rename`函数而不是使用 system 来调用重命名实用程序。

`GetLastError`仅在调用 Win32 函数后立即有意义，该函数被记录为使用`SetLastError`. C 等效项是`errno`，它适用于 C 函数。

该`rename`函数在失败时返回 -1 并设置`errno`。

例如： http: [//msdn.microsoft.com/en-us/library/zw5t957f (v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/zw5t957f(v=VS.80).aspx)

# java - 成员变量在声明时未能初始化

> ID：10787818
> 
> 赞同：0
> 
> 时间：2012-05-28T16:32:43.057
> 
> 标签：java, variables, subclass, member

使用 Java 我试图在声明时初始化成员变量，但由于某种原因，变量保持在它们的默认值，例如 0、null 等。

请看一段示例代码，它演示了我要完成的工作：

```
public class B extends A {

Map<Integer, Integer> map = new HashMap <Integer, Integer>();
int number = 10;

public B() {
  super();
}

public Map getMap() {
  return map;
}

public int getNumber() {
  return number;
}

} 
```

代码的重要部分是它是一个子类，并且我试图在声明时初始化两个成员变量。当我进入构造函数时，map 和 number 的值分别为 null 和 0，这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:38:03.177

按照规范，基类的构造函数在初始化类 B 的成员之前执行。

另请参阅：[Java 构造函数和字段初始化顺序](https://stackoverflow.com/questions/10589828/java-constructor-and-field-initialization-order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:17:56.000

我的猜测是这里发生了什么：

```
 class A {
        protected Map<Integer,Integer> map;
        protected int number;

        public A() {
            map=new Map() {{ //This is just initializing the map
                put(1,1);
            }}
            number=5;
        }
    }

    public class B extends A {

        Map<Integer, Integer> map = new HashMap <Integer, Integer>();
        int number = 10;

        public B() {
          super();
        }
    } 
```

`B`从编译器的角度来看，这是构造函数中发生的事情：

1.  转到 的无参数构造函数`A`。
2.  新建一个`Map`名为`map`.
3.  新建一个`int`名为`number`.
4.  `map`在键 1 处使用值 1 进行初始化。
5.  初始化`number`为 5。
6.  在这里完成，进入其余`B`的构造函数。
7.  新建一个`Map`名为`map`. 这将覆盖名为`map`constructor的变量`A`。
8.  新建一个`int`名为`number`. 这将覆盖名为`number`constructor的变量`A`。
9.  （不要初始化`map`。）
10.  （不要初始化`number`。）
11.  完毕。

我希望这能解决问题。如果您不希望这种情况发生，请`B`在其自己的构造函数中初始化 的字段。

# java - 查找字符串的特定部分

> ID：10787824
> 
> 赞同：0
> 
> 时间：2012-05-28T16:33:11.227
> 
> 标签：java, regex

我有一个字符串，我希望保存它的特定部分。

资产/主题/更新/文件名_hj10134532.html.xls

我想得到“hj10134532”部分。我将如何提取字符串的那部分？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:36:25.863

```
String s="Assets/Topics/Update/filename_hj10134532.html.xls";
System.out.println(s.split("\\.")[0].split("_")[1]);
//out hj10134532 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:43:56.793

你也可以这样做：

```
String input = "Assets/Topics/Update/filename_hj10134532.html.xls";
String part = input.substring(input.lastIndexOf("_") + 1, input.indexOf(".")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:45:46.993

实际上，有一个比你们三个发布的更简单的方法。

```
 String s="Assets/Topics/Update/filename_hj10134532.html.xls";
    return s.substring(s.indexOf("_"),s.indexOf(".")); 
```

更具可读性，并且不需要字符串拆分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:36:08.250

如果以下是固定格式

```
sometext_requiredText.html.xls 
```

那么你可以通过以下方式做到这一点

1.  将字符串拆分为`_`
2.  取第二部分（即`str.split("_")[1]`检查结果数组的长度）
3.  找到第一次出现`.`using`indexOf()`
4.  利用`substring(int, int)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T16:37:59.063

查看：

```
String pat = "hj10134532";
if ("Assets/Topics/Update/filename_hj10134532.html.xls".contains (pat))
    return pat; 
```

如果它包含（“hj10134532”），则返回它。没有必要提取它。

# asp.net - WebRequest 异步回调代码仅在第一次被调用

> ID：10787825
> 
> 赞同：0
> 
> 时间：2012-05-28T16:33:12.837
> 
> 标签：asp.net, vb.net, asynchronous, webrequest

我是 ASP.net (VB) 的绝对初学者。如果问题对于有经验的成员来说太明显了，请原谅我。

我尝试在异步模式下创建一个简单的 WebRequest，以防目标 URL 需要很长时间才能提供数据。在下面的代码中，我只想查看是否每次都正确调用了回调块（RespCallback）。如果一切顺利，每次我单击调用“GetData”子的按钮时，lblResult 都应该附加字符串“123”。

但是，第一次单击后 lblResult 仅显示 123。在随后的单击之后，lblResult 只附加了“12”，就好像永远不会调用 RespCallback。当我尝试在 Visual Studio 中对此进行调试时，执行实际上直接进入了 RespCallback 部分，并且 lblResult.Text 手表实际上显示了“123123”，但生成的网页始终只显示“12312”

我确定我在这里遗漏了一些基本的东西，但我只是不知道是什么。我什至猜测它与浏览器缓存有关（因此结果第二次发生变化），但我也不知道如何解决这个问题。

有人可以帮忙吗？提前致谢。

吉姆

```
Dim myWebRequest As WebRequest

Public Shared allDone As New ManualResetEvent(False)
Private Shared BUFFER_SIZE As Integer = 1024

Public Class RequestState
    ' This class stores the state of the request
    Private Shared BUFFER_SIZE As Integer = 1024
    Public requestData As StringBuilder
    Public bufferRead() As Byte
    Public request As WebRequest
    Public response As WebResponse
    Public responseStream As Stream

    Public Sub New()
        bufferRead = New Byte(BUFFER_SIZE) {}
        requestData = New StringBuilder("")
        request = Nothing
        responseStream = Nothing
    End Sub ' New
End Class ' RequestState

Public Sub GetData(Sender As Object, Args As System.EventArgs)
    lblResult.Text += "1"
    myWebRequest = WebRequest.Create(dataURL)

    Dim myRequestState As New RequestState()

    myRequestState.request = myWebRequest

    ' Start the asynchronous request.
    Dim asyncResult As IAsyncResult = CType(myWebRequest.BeginGetResponse(AddressOf RespCallback, myRequestState), IAsyncResult)

    lblResult.Text += "2"
    allDone.WaitOne()

End Sub

Private Sub RespCallback(asynchronousResult As IAsyncResult)
    lblResult.Text += "3"
    allDone.Set()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:38:10.233

我不了解 VB，所以对我来说很难阅读，但我怀疑`GetData`是你的`onClick`处理程序。

不正确的第一件事是你有`Shared`成员。为什么你的重置事件是`Shared`？它使所有请求都使用相同的对象。基本上，您的代码`ManualResetEvent`不起作用，因为在 first 之后`allDone.Set()`，您的对象保持设置（只要 Web 应用程序存在）。每次你应该在`allDone.Reset()`之后添加“123” `allDone.WaitOne()`。`RespCallback`在您的情况下，除了第一次调用（当您的重置事件处于非信号状态时）之外，每次调用 之前，Web 请求都会返回到客户端。`AutoResetEvent`自动重置。这就是它起作用的原因。

但！你不能这样做。使您的`ResetEvent` `Shared`所有请求都使用相同的对象。当您的应用程序同时处理多个请求时，您将获得未确定的行为。

从您的代码中删除 Shared。在没有 allDone.Reset() 和 AutoResetEvent 的情况下，您的代码将工作（但不是异步）。但它会提供已知的结果（不取决于请求的数量）。

关于异步调用（现在我们有代码“工作”）。出色地。您的网页没有异步请求。`allDone.WaitOne()`等到您的异步 webRequest 完成。所以基本上你也可以做同步请求。

您需要一种用于异步网页的特殊模式。[您可以在此处](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)阅读如何执行此操作。

但我不确定这是你想要的。您是否希望异步调用您的请求以便它不会使用服务器资源，或者您是否希望向用户显示一些消息（如“正在下载数据......”），而您的网页将保持全权负责？

如果是第二个，您应该使用 AJAX 功能（如`UpdatePanel`或直接使用 JavaScript）。你可以在[这里](http://www.asp.net/ajax)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:03:05.653

几件事情要检查：

1.  如果您的标签是固定宽度，则可能会剪切文本
2.  如果您使用的是 UpdatePanel，则需要将其模式设置为 'Conditional' 并`Update()`在 RespCallback 回调方法中调用它，以便使用最新的标签文本值刷新 UI。

# javascript - 用于在 Chrome 上不起作用的圆角图像的 Javascript

> ID：10787827
> 
> 赞同：1
> 
> 时间：2012-05-28T16:33:19.377
> 
> 标签：javascript

我有一个在 IE9 和 Firefox 中运行良好的 JavaScript，但在 Chrome 中却不行。我想要一些建议来解决这个问题。

我正在尝试一个很酷的技巧来绕过我从[http://www.bram.us/sandbox/roundedcorners/](http://www.bram.us/sandbox/roundedcorners/)学到的图像的角落。我更新了我的 css 并在上面的站点中包含了 javascript，但实际上所有图像在 Chrome 上都消失了，而其他两个浏览器按预期呈现圆角。

我知道这个脚本也适用于 Chrome，因为[http://www.bram.us/sandbox/roundedcorners/](http://www.bram.us/sandbox/roundedcorners/)在 Chrome 上运行良好。

这是javascript。

```
jQuery(function($) {
    $('img').wrap(function() {
        return '<span style="background-image:url(' + $(this).attr('src') + '); height: '+ $(this).height() + 'px; width: '+ $(this).width() + 'px;" class="rounded" />';
    });
}); 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:13:34.913

Chrome 对使用 CSS 舍入图像有很好的原生支持。我建议在这里避免使用 JavaScript，而是使用以下内容：

```
img {
    -webkit-border-radius: 12px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
    border-radius: 12px;         /* Opera 10.5, IE9, Saf5, Chrome, 
                                    FF4+, iOS 4, Android 2.1+ */
} 
```

以上内容可在[css3please.com](http://css3please.com/)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:18:02.800

你确定你没有忘记在你的`.rounded`课程中包含任何这些吗？

`-webkit-border-radius`

`border-radius`

`display: block`或者`display:inline-block`

# android - 在 Android 上添加动态视图

> ID：10787830
> 
> 赞同：0
> 
> 时间：2012-05-28T16:34:00.667
> 
> 标签：android, views

我有以下代码：

```
scroll = (ScrollView) findViewById(R.id.scrollView1);
...
public void addItem(String str, int id) {
    LinearLayout lay = new LinearLayout(this);
    lay.setId(id);

    TextView txt = new TextView(this);
    txt.setText(str);

    lay.addView(txt);
    scroll.addView(lay);    
} 
```

当我调用 addItem() 一次就可以了，但是当我调用它两次或更多次时，就像这样：

```
addItem("text1",1);
addItem("text2",2); 
```

我的应用程序崩溃:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:45:11.877

这是因为`ScrollView`只能容纳 1 个直接孩子。

您可以将 a 创建`LinearLayout`为 的唯一子级`ScrollView`，然后将其添加到方法中的而`LinearLayout`不是。`ScrollView``addItem`

```
scroll = (ScrollView) findViewById(R.id.scrollView1);
LinearLayout lay = new LinearLayout(this);
scroll.addView(lay); 
// maybe do some more with lay here, or define it in xml instead of adding it here in the code
...
public void addItem(String str, int id) {
    LinearLayout lay2 = new LinearLayout(this);
    lay2.setId(id);

    TextView txt = new TextView(this);
    txt.setText(str);

    lay2.addView(txt);
    lay.addView(lay2);    
} 
```

# regex - 查找并替换为正则表达式 (Batch .BAT)

> ID：10787831
> 
> 赞同：2
> 
> 时间：2012-05-28T16:34:07.713
> 
> 标签：regex, batch-file, replace, find

我想在几个文本文件中进行查找/替换。如何使用 .BAT 自动执行此操作？（我也需要正则表达式）

示例：寻找：

```
<ObjectList ObjectType="MyObject">
(anything here)
</ObjectList> 
```

然后删除此文本并替换为：

```
<ObjectList ObjectType="MyNewObject">
Blablabla
Blablabla
</ObjectList> 
```

如何使用 .BAT 脚本执行此操作？

编辑：我有很多文件要查找/替换，其中一些不是 XML。所以我需要一个通用的解决方案......最简单的方法是什么（我不想安装第三方软件）。VBS 还是批处理？如果有人有一个非常小的示例代码，提前非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T20:41:55.290

通过 VBScript 的 VBScript.RegExp 类使用正则表达式。

例如：

```
@ECHO OFF
(
    ECHO Set Regex = CreateObject^("VBScript.RegExp"^)
    ECHO Regex.Pattern = "[E-G]$"
    ECHO MsgBox^(Regex.Replace^("A B C D E", "X"^)^)
) > Regex.vbs
CSCRIPT //NOLOGO Regex.vbs
DEL Regex.vbs
PAUSE > NUL 
```

上面的代码将显示消息“ABCD X”。

我希望我有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:36:47.423

由于您正在操作 XML，我将使用特定于 XML 的东西来维护编码、实体等。

查看[XMLStarlet](http://xmlstar.sourceforge.net/doc/xmlstarlet.txt)以获取基于命令行的 XML 工具集，尤其是`ed`允许您编辑文档的命令。

```
xml ed --help
XMLStarlet Toolkit: Edit XML document(s)
Usage: xml ed <global-options> {<action>} [ <xml-file-or-uri> ... ]
where
  <global-options>  - global options for editing
  <xml-file-or-uri> - input XML document file name/uri (stdin is used if missing)

<global-options> are:
  -P (or --pf)        - preserve original formatting
  -S (or --ps)        - preserve non-significant spaces
  -O (or --omit-decl) - omit XML declaration (<?xml ...?>)
  -N <name>=<value>   - predefine namespaces (name without 'xmlns:')
                        ex: xsql=urn:oracle-xsql
                        Multiple -N options are allowed.
                        -N options must be last global options.
  --help or -h        - display help

where <action>
   -d or --delete <xpath>
   -i or --insert <xpath> -t (--type) elem|text|attr -n <name> -v (--value) <value>
   -a or --append <xpath> -t (--type) elem|text|attr -n <name> -v (--value) <value>
   -s or --subnode <xpath> -t (--type) elem|text|attr -n <name> -v (--value) <value>
   -m or --move <xpath1> <xpath2>
   -r or --rename <xpath1> -v <new-name>
   -u or --update <xpath> -v (--value) <value>
              -x (--expr) <xpath> (-x is not implemented yet) 
```

# php - 来自 base64_decode 的 PHP 裁剪图像

> ID：10787836
> 
> 赞同：0
> 
> 时间：2012-05-28T16:34:33.023
> 
> 标签：php

我正在使用这段代码中的 html2canvas 生成屏幕抓取 jpg。但是我不能针对特定的 div，所以我要抓住整个屏幕。

```
$canvasImg = $_POST['img'];
$data = base64_decode($canvasImg);
$File = "z.jpg"; 
$Handle = fopen($File, 'w');
fwrite($Handle, $data);  
fclose($Handle); 
```

**问题**：如何裁剪图像？

这是我的尝试

```
$canvasImg = $_POST['img'];
$image = base64_decode($canvasImg);
$dest_image = 'z.jpg';
$img = imagecreatetruecolor('200','150');
$org_img = imagecreatefromstring($image);
$ims = getimagesize($image);
imagecopy($img,$org_img, 0, 0, 20, 20, 200, 150);
imagejpeg($img,$dest_image,90);
imagedestroy($img); 
```

但我得到一个错误
`Warning: getimagesize(�PNG ) [<a href='function.getimagesize'>function.getimagesize</a>]: failed to open stream: Invalid argument`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:37:59.950

你想要`imagecreatefromstring();`，没有`imagecreatefrompng();`。这会将其转换为 PHP 图像对象，然后您可以使用 JPEG 将其输出为`imagejpeg();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:38:07.890

您的问题在于您将 PNG 的缓冲区传递给函数。因此，为什么您会得到 PNG 的幻数（89 50 4e 47 0d 0a 1a 0a ---OR--- 0x89 "PNG" CR LF 0x1A LF）。您需要将文件保存到临时位置并将该位置传递给 getimagesize 等。因此，他们为什么抱怨溪流。

您可以使用`imagecreatefromstring(...)`which 将获取缓冲区并输出资源句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:44:44.570

的第一个参数`getimagesize($image);`必须是**图像的文件名。**

# querydsl - 在 Querydsl 中创建 where 子句以检查 Timestamp 列

> ID：10787838
> 
> 赞同：3
> 
> 时间：2012-05-28T16:34:48.947
> 
> 标签：querydsl

我正在尝试创建一个 where 子句，该子句检查是否存储在列中的值（在“Q”类中标识为

```
 public final DateTimePath<java.sql.Timestamp> startDate = createDateTime("StartDate",    java.sql.Timestamp.class); 
```

) 大于或等于提供的值。

该值以 long 形式提供，但（自然）我可以在检查之前创建任何必要的数据类型。

我尝试了以下方法：

```
{
....
final QViewVETFullList fullList = QViewVETFullList.viewVETFullList;

....
final String startDate = "28.05.2012"; // test data
final BooleanExpression startDateExp = getDateGTEExpression(fullList.startDate, startDate);

.....
query = query.from(fullList);
query = query.where(startDateExp); // this is where it falls over

...

}

    public static BooleanExpression getDateGTEExpression(
        DateTimePath<Timestamp> path, String dateStr) {

            // this seems to be the problem??
    final DateTimePath<Timestamp> datePath = Expressions.dateTimePath(
            java.sql.Timestamp.class, dateStr);

            // this syntax works successfully with other data types
    return BooleanOperation.create(Ops.GOE, path, datePath );
} 
```

代码编译并运行到添加“where”子句的位置。然后它会因以下内容而崩溃：

```
....
Caused by: java.lang.IllegalArgumentException: Undeclared path 28.05.2012
at com.mysema.query.types.ValidatingVisitor.visit(ValidatingVisitor.java:48)
at com.mysema.query.types.ValidatingVisitor.visit(ValidatingVisitor.java:10)
at com.mysema.query.types.path.DateTimePath.accept(DateTimePath.java:46)
at com.mysema.query.types.ValidatingVisitor.visit(ValidatingVisitor.java:101)
at com.mysema.query.types.ValidatingVisitor.visit(ValidatingVisitor.java:36)
at com.mysema.query.types.ValidatingVisitor.visit(ValidatingVisitor.java:10)
at com.mysema.query.types.expr.BooleanOperation.accept(BooleanOperation.java:44)
at com.mysema.query.DefaultQueryMetadata.validate(DefaultQueryMetadata.java:296)
at com.mysema.query.DefaultQueryMetadata.addWhere(DefaultQueryMetadata.java:138)
at com.mysema.query.support.QueryMixin.where(QueryMixin.java:375)
at com.mysema.query.support.QueryBase.where(QueryBase.java:44)
at com.***.***.***.***.***DAOBean.get*****(***tDAOBean.java:185) 
```

如果您对此事有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T19:36:19.613

您尝试将常量 2​​8.05.2012 转换为路径。路径用于变量和属性。另一个问题是您想将时间戳与字符串进行比较。在我看来，最好的选择是从你的 String 常量构造一个 Timestamp 并比较它的路径。

不安全的事情是

```
query.from(fullList)
     .where(fullList.startDate.stringValue().goe("28.05.2012")) 
```

但这取决于日期如何在数据库级别序列化为 Strings / varchars。

Querydsl 查询也是可变的，因此无需一直重新分配它们。

# ios - 在 iOS 上调试 Cordova (PhoneGap) 代码

> ID：10787839
> 
> 赞同：3
> 
> 时间：2012-05-28T16:34:50.070
> 
> 标签：ios, cordova

我正在开发一个我想通过 Cordova (PhoneGap) 在 iOS 中托管的应用程序。当我尝试访问 device.platform 和 device.version 属性时遇到了一些问题。我不确定问题是什么。无论哪种方式，我都无法弄清楚如何查看代码以更好地了解正在发生的事情。

我以为我可以在桌面版 Safari 中启动 .html，但是，这并没有提供任何见解。简而言之：

1.  如何调试在 Cordova 内部运行的代码？
2.  任何想法为什么我不能只做一个“alert(device.platform);”？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-24T09:07:11.553

从 iOS 6 开始，您只需在 Safari 中启用“开发”菜单并使用[Safari Web Inspector](http://phonegap-tips.com/articles/debugging-ios-phonegap-apps-with-safaris-web-inspector.html)在 iOS 模拟器或 USB 连接设备中远程调试 Cordova 应用程序。如果您使用过 Chrome 的调试器，您会感到宾至如归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:25:42.403

除了 Weinre，还有 iWebInspector，它在 ios 上很有用而且可能更好。 [http://www.mobilexweb.com/blog/debugging-web-safari-phonegap-iphone-ipad](http://www.mobilexweb.com/blog/debugging-web-safari-phonegap-iphone-ipad)

我认为它可能仅适用于模拟器，但无论如何对于大多数情况都很好。在我看来，它更像是 Xcode 和 iOs 调试解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:50:39.927

1.  [我使用名为 Weinre 的漂亮调试工具](http://people.apache.org/~pmuellr/weinre/)，它是调试 cordova(phonegap) 应用程序时的救星。它基本上是一个远程调试工具，类似于 Chrome 和其他一些浏览器中可用的常用 webkit 开发工具。

2.  确保在尝试调用 device.platform 之前加载了 Cordova。触发 deviceready js 事件时加载 Cordova。

# java - 列联表

> ID：10787846
> 
> 赞同：2
> 
> 时间：2012-05-28T16:35:31.460
> 
> 标签：java

我正在努力寻找解决这个问题的 Java 代码。首先，我处于初学者水平，这个问题我很难回答。我知道这使用了二维数组，对吗？但是我在为这个问题编写 Java 代码时遇到了问题。

这是问题：

> 编写一个 Java 程序
> 
> 1.  向用户查询列联表的行数和列数，
> 2.  逐行读取数据
> 3.  以表格形式显示数据以及行总计、列总计和总计。
> 
> 例如，如果 2x3 表的六个数据是
> 
> 1、3、6、7、9 和 8。程序将这六个数字与相应的总数一起显示为
> 
> ```
> 1 3 6   | 10  
> 7 9 8   | 24  
> 8 12 14 | 34 
> ```
> 
> 字符“|” 用于将数据与行总计分开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:27:27.043

我将首先建议您忘记“数组”并更多地考虑“类”。Java 是一种面向对象的语言。将您想要的行为封装在一个类中。让我们称之为`Tableau`。

您的班级至少需要纠正四种不同的行为：

1.  从某种 Stream 或 Reader 中将值读入 Tableau（例如`PrintStream`, `FileInputStream`）
2.  计算 Tableau 的行和列总和
3.  将 Tableau 呈现为字符串。
4.  将 Tableau 写入某种 OutputStream 或 Writer。

计算机科学是将复杂的任务分解成更小、更易于管理的部分。这叫做“分解”。这是学习它的好机会。

所以这是一个开始：

```
package model;

public class Tableau {
    private int numRows; 
    private int numCols; 
    private int[][] values;

    public Tableau(int numRows, int numCols) {
        if (numRows <= 0) throw new IllegalArgumentException("numRows must be positive");
        if (numCols <= 0) throw new IllegalArgumentException("numCols must be positive");
        this.numRows = numRows; 
        this.numCols = numCols; 
        this.values = new int[numRows+1][numCols+1];
    }

    // You add the rest
    public String toString() { 
        StringBuilder builder = new StringBuilder();

        return builder.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T02:29:41.953

好吧，在您的示例中：首先创建一个 2x3 数组，然后向用户询问每个单元格的输入（提示：两个 for 循环）然后，当您打印行时，遍历行并将它们相加以打印最后一个数字. 最后遍历列并添加它们。母鸡打印。

实际代码将为您完成作业，但如果您可以将这些步骤翻译成 java，您就可以很好地理解二维数组。

最好的。

# android - Android - Populating sqlite table takes long

> ID：10787849
> 
> 赞同：1
> 
> 时间：2012-05-28T16:35:45.470
> 
> 标签：android, achartengine

I had this problem a couple of months before and now it is time to get back to it.

I query the phone's calllog into a database, but it takes around 30 seconds to populate the table. It looks like querying takes around 1 sec, but the population takes forever, although the phone stores only the last 500 calls. Why is it so slow? Am I doing something wrong?

I test it only on my phone, since I have only 8 items in the emulator's calllog.

```
 final String[] projection = null;

            HotOrNot infoA = new HotOrNot(Charts.this);
            infoA.open();
            infoA.createtable_Calls();
            infoA.deleteAllEntries_Calls();
            infoA.close();

            final Context context = getApplicationContext();
            final String selection = null;
            final String sortOrder = android.provider.CallLog.Calls.DATE + " DESC";

            Cursor c = context.getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI, projection, selection, null, sortOrder);
            while (c.moveToNext()) { 
                String callLogID = c.getString(c.getColumnIndex(android.provider.CallLog.Calls._ID));

                int numberColumn = c.getColumnIndex(android.provider.CallLog.Calls.NUMBER);
                int dateColumn = c.getColumnIndex(android.provider.CallLog.Calls.DATE);
                int typeColumn = c.getColumnIndex(android.provider.CallLog.Calls.TYPE);
                int durationColumn = c.getColumnIndex(android.provider.CallLog.Calls.DURATION);
                int person = c.getColumnIndex(android.provider.CallLog.Calls.CACHED_NAME);

                String number = c.getString(numberColumn);
                int duration = c.getInt(durationColumn);
                String personname = c.getString(person);
                long callDate = c.getLong(dateColumn);
                int callType = c.getInt(typeColumn);

                if (duration >= 0)
                {
                    switch (callType) {
                    case 1:
                        duration_in = duration;
                        duration_out = 0;
                        break;
                    case 2:
                        duration_out = duration;
                        duration_in = 0;
                        break;
                    case 3:
                        duration_in = 0;
                        duration_out = 0;
                        break;

                    }
                    }

    //Here comes the slow part

                    HotOrNot info = new HotOrNot(Charts.this);
                    info.open();
                    info.pop   
ulate_Calls(personname, number, String.valueOf(callType), Integer.toString(duration), Long.toString(callDate), callLogID);
                info.close();   
             } 
```

This is the populating function:

```
public long populate_Calls(String name, String phone, String type, String duration, String date, String contactid) {
        ContentValues cv = new ContentValues();
        cv.put(KEY_NAME, name);
        cv.put(KEY_PHONE, phone);
        cv.put(KEY_TYPE, type);
        cv.put(KEY_DURATION, duration);
        cv.put(KEY_DATE, date);
        cv.put(KEY_CONTACTID, contactid);
        return ourDatabase.insert(DATABASE_TABLE, null, cv);        
    } 
```

**EDIT**:

To Andreas Ka's and twaddington's answers I modified the population method in the SQLiteOpenHelper class, but unfortunately it did not make a difference:

```
public long populate_Calls(String name, String phone, String type, String duration, String date, String contactid) {
    ContentValues cv = new ContentValues();
     try {
         ourDatabase.beginTransaction();

         cv.put(KEY_NAME, name);
         cv.put(KEY_PHONE, phone);
         cv.put(KEY_TYPE, type);
         cv.put(KEY_DURATION, duration);
         cv.put(KEY_DATE, date);
         cv.put(KEY_CONTACTID, contactid);

         ourDatabase.yieldIfContendedSafely();

         ourDatabase.setTransactionSuccessful();
     } finally {
         ourDatabase.endTransaction();
     }

    return ourDatabase.insert(DATABASE_TABLE, null, cv);        
} 
```

**EDIT2:** Posting the whole code based on Babibu and twaddington's answers. By the way the temp_ arrays are now LinkedLists, but that does not make a difference in time.

```
 final String[] projection = null;
        final Context context = getApplicationContext();
        final String selection = null;
        final String sortOrder = android.provider.CallLog.Calls.DATE + " DESC";
        lv1 = (ListView) findViewById(R.id.ListView02); 

        HotOrNot infoA = new HotOrNot(Calllogs.this);
        infoA.open();
        infoA.createtable_Calls();
        infoA.deleteAllEntries_Calls();
        infoA.close();

          pd = ProgressDialog.show(Calllogs.this, "Please wait..", "Loading data, it may take a few" +
                " seconds based on the number of data.", false, true);

        Cursor c = context.getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI, projection, selection, null, sortOrder);
        while (c.moveToNext()) { 
            String callLogID = c.getString(c.getColumnIndex(android.provider.CallLog.Calls._ID));

            int numberColumn = c.getColumnIndex(android.provider.CallLog.Calls.NUMBER);
            int dateColumn = c.getColumnIndex(android.provider.CallLog.Calls.DATE);
            int typeColumn = c.getColumnIndex(android.provider.CallLog.Calls.TYPE);
            int durationColumn = c.getColumnIndex(android.provider.CallLog.Calls.DURATION);
            int person = c.getColumnIndex(android.provider.CallLog.Calls.CACHED_NAME);

            String number = c.getString(numberColumn);
            int duration = c.getInt(durationColumn);
            String personname = c.getString(person);
            long callDate = c.getLong(dateColumn);
            int callType = c.getInt(typeColumn);

            if (duration >= 0)
            {
                switch (callType) {
                case 1:
                    duration_in = duration;
                    duration_out = 0;
                    break;
                case 2:
                    duration_out = duration;
                    duration_in = 0;
                    break;
                case 3:
                    duration_in = 0;
                    duration_out = 0;
                    break;
                }
            }

            temp_name.add(personname);
            temp_num.add(number);
            temp_type.add(String.valueOf(callType));
            temp_dur.add(Integer.toString(duration));
            temp_date.add(String.valueOf(callDate));
            temp_id.add(callLogID);
          } //end of while loop

        HotOrNot infotemp = new HotOrNot(Calllogs.this);
        infotemp.open();

            for (int i=0; i<temp_name.size(); i++)
            {
                infotemp.populate_Calls(temp_name.get(i), temp_num.get(i), temp_type.get(i), temp_dur.get(i), temp_date.get(i), temp_type.get(i));
            }
 infotemp.close(); 
```

**SOLUTION**

I am posting twaddington's solution, which reduced the time from 8 seconds to less than 2:

```
 HotOrNot infotemp = new HotOrNot(Calllogs.this);
        infotemp.open();

        // Get our database. You can do this however you wish, but
        // it seems like since the database is contained in your `HotOrNot`
        // object, it would be best to simply add a getter method to
        // the class.
        SQLiteDatabase db = infotemp.getDatabase();

        try {
            // Begin our transaction
            db.beginTransaction();

            // Loop over the array of calls and
            // perform a db insert for each.
            for (int i=0; i<temp_name.size(); i++) {
                // Yield the database lock if requested. This will
                // temporarily suspend our loop, but it should
                // continue when the lock is opened.
                db.yieldIfContendedSafely();

                infotemp.populate_Calls(temp_name.get(i), temp_num.get(i),
                        temp_type.get(i), temp_dur.get(i), temp_date.get(i), temp_type.get(i));
            }

            // Mark our transaction as successful!
            db.setTransactionSuccessful();
        } finally {
            // Always end the transaction!
            db.endTransaction();
        }

        infotemp.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:19:16.327

For each change that you make to the SQLite database a series of complicated steps occur, including the creation of a [journal file](http://www.sqlite.org/atomiccommit.html#section_3_5) to rollback the change if an error occurs. You can wrap your series of updates in a database transaction to force SQLite to treat the entire series as a single operation. This will be much more efficient.

```
try {
    db.beginTransaction();
    while (c.moveToNext()) {
        // Yield the database lock if requested
        db.yieldIfContendedSafely();

        // Add your code here!
        // ...

        // Perform the database insert
        populate_Calls(...);
    }
    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:23:46.360

Try to use a single transaction for the whole method: [http://notes.theorbis.net/2010/02/batch-insert-to-sqlite-on-android.html](http://notes.theorbis.net/2010/02/batch-insert-to-sqlite-on-android.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T17:29:20.480

You are inserting while browsing, this makes locks on your database. You need first finish your while loop and and only then insert it in your database. Just keep the data in same temporary linked List(better then array in your case, coz it got fast inserts)

# java - 用两个键映射一个值？

> ID：10787860
> 
> 赞同：9
> 
> 时间：2012-05-28T16:36:27.113
> 
> 标签：java, data-structures, map, arraylist, linked-list

我想创建一个有两个键的地图：

```
map.put (key1,key2,value1);// Insert into map
map.get(key1,key2); // return value1 
```

我正在研究**multikeyMap**但我不知道我会怎么做

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T16:38:20.337

听起来您只需要一个由两个值创建的键。您可能会发现这两个值自然应该被封装到另一种类型中——或者您*可以*创建一个`Key2<K1, K2>`类型。（这里的命名将允许`Key3`等`Key4`。不过我不鼓励你走得太远。）

对于介于两者之间的东西，您可以在真正*需要*的类中创建一个私有静态类（如果它只是一个内部实现细节）。如果它不是自然封装（例如，它类似于“名称和人口”，在此特定场景之外没有意义），那么在保留有意义的属性名称方面会很好，但不会公开。

在任何这些场景中，您最终都会得到一个新类型，其中包含两个最终变量，这些变量在构造函数中初始化，并且对 和 都有`equals`贡献`hashCode`。例如：

```
public final class Key2<K1, K2> {
    private final K1 part1;
    private final K2 part2;

    public Key2(K1 part1, K2 part2) {
        this.part1 = part1;
        this.part2 = part2;
    }

    @Override public boolean equals(Object other) {
        if (!(other instanceof Key2)) {
            return false;
        }
        // Can't find out the type arguments, unfortunately
        Key2 rawOther = (Key2) other;
        // TODO: Handle nullity
        return part1.equals(rawOther.part1) &&
            part2.equals(rawOther.part2);
    }

    @Override public int hashCode() {
        // TODO: Handle nullity
        int hash = 23;
        hash = hash * 31 + part1.hashCode();
        hash = hash * 31 + part2.hashCode();
        return hash;
    }

    // TODO: Consider overriding toString and providing accessors.
} 
```

更多特定于情况的类型会稍微简单一些，因为它们不是通用的——特别是这意味着你不需要担心类型参数，你可以给变量更好的名字。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T16:39:14.673

怎么样

```
class Key{
 private final String key1;
 private final String key2;
//accessors + hashcode + equals()
} 
```

和

```
Map<Key, Value> map 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T16:50:08.693

您可以考虑使用 Guava 的一种[`Table`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)实现。从文档中：

> 将有序键对（称为行键和列键）与单个值相关联的集合。一个表可能是稀疏的，只有一小部分行键/列键对拥有相应的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T16:50:15.017

如果您可以使用外部库，[Guava](http://guava-libraries.googlecode.com)提供的正是这个[`Table<R, C, V>`](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)，将两个键分别称为“行”和“列”。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T16:39:14.360

为什么不将键映射到字符串并连接 key1+key2

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T16:39:20.040

如果您总是想通过 key1 和 key2 一起访问，您可以将它们与分隔符连接在一起作为键并使用法线贴图。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-03T17:54:03.720

不幸的是，Java 不支持语言级别的元组，因此您必须使用像这里的一些答案中显示的那样的临时结构。这会导致大量的样板和代码重复。

[函数式 Java](http://functionaljava.org/)具有对元组的库支持。适合这里的类是`P2`. 该名称的意思是“具有 2 个元素的产品”。（产品只是复合类型的代数术语。）该库支持最多 8 个元素的元组。`P{n}`类覆盖所有必要的方法

有一个名为的类`P`，它提供了`p`用于构造元组的静态工厂方法。

**用法：**

```
import fj.P2;
import fj.Ord;
import fj.data.TreeMap;

import static fj.Ord.*;
import static fj.P.*;

TreeMap<P2<Integer, String>, String> m = 
  TreeMap.<P2<Integer, String>, String>empty(p2Ord(intOrd, stringOrd)).
  set(p(1, "2"), "onetwo").
  set(p(5, "3"), "fivethree"); 
```

# java - android中警报框上的倒数计时器

> ID：10787863
> 
> 赞同：3
> 
> 时间：2012-05-28T16:36:47.497
> 
> 标签：java, android, android-alertdialog, countdowntimer

如何在我的警报框中显示倒数计时器。我想通知用户会话将在 5 分钟后结束，并在 android 的警报弹出框中显示一个正在运行的计时器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:43:07.557

创建一个带有 a 的自定义对话框`TextView`。

`CountDownTimer`并在这样的类的帮助下更新该代码。

```
new CountDownTimer(300000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

您可以在 中关闭您的对话框`onFinish()`。

有关更多详细信息，您可以[点击此链接](http://developer.android.com/reference/android/os/CountDownTimer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-05T18:49:14.847

下面的代码会按照您的描述创建一个提示。它将倒计时计时器添加到默认操作按钮。

[![带有倒计时的对话框截图](../Images/2a210708d3115f56a5d497064a734315.png)](https://i.stack.imgur.com/Ha8Kv.png) **对话监听类**

```
private static class DialogTimeoutListener
        implements DialogInterface.OnShowListener, DialogInterface.OnDismissListener {
    private static final int AUTO_DISMISS_MILLIS = 5 * 60 * 1000;
    private CountDownTimer mCountDownTimer;

    @Override
    public void onShow(final DialogInterface dialog) {
        final Button defaultButton = ((AlertDialog) dialog).getButton(AlertDialog.BUTTON_NEGATIVE);
        final CharSequence positiveButtonText = defaultButton.getText();
        mCountDownTimer = new CountDownTimer(AUTO_DISMISS_MILLIS, 100) {
            @Override
            public void onTick(long millisUntilFinished) {
                if (millisUntilFinished > 60000) {
                    defaultButton.setText(String.format(
                            Locale.getDefault(), "%s (%d:%02d)",
                            positiveButtonText,
                            TimeUnit.MILLISECONDS.toMinutes(millisUntilFinished),
                            TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished % 60000)
                    ));
                } else {
                    defaultButton.setText(String.format(
                            Locale.getDefault(), "%s (%d)",
                            positiveButtonText,
                            TimeUnit.MILLISECONDS.toSeconds(millisUntilFinished) + 1 //add one so it never displays zero
                    ));
                }
            }

            @Override
            public void onFinish() {
                if (((AlertDialog) dialog).isShowing()) {
                    // TODO: call your logout method
                    dialog.dismiss();
                }
            }
        };
        mCountDownTimer.start();
    }

    @Override
    public void onDismiss(DialogInterface dialog) {
        mCountDownTimer.cancel();
    } 
```

**警报对话框**

```
AlertDialog dialog = new AlertDialog.Builder(this)
        .setTitle("Session Timeout")
        .setMessage("Due to inactivity, you will soon be logged out.")
        .setPositiveButton("Extend Session", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO: call your log out method
            }
        })
        .setNegativeButton("Log Out Now", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO: call method to extend session
            }
        })
        .create();
DialogTimeoutListener listener = new DialogTimeoutListener();
dialog.setOnShowListener(listener);
dialog.setOnDismissListener(listener);
dialog.show(); 
```

# loops - 在火花视图引擎中增加变量值

> ID：10787864
> 
> 赞同：3
> 
> 时间：2012-05-28T16:36:56.237
> 
> 标签：loops, spark-view-engine

我尝试通过一个 for each 循环并增加变量的值来用下面的代码命名我的标签

```
<set i="0"/>
<div each="var x in Model">

<input name='field-${i}' value='${x.Id}'/>

<set i=i+1 />
</div> 
```

但它没有增加 'i' 的值，我怎样才能在上面的循环中增加 i 的值

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:07:47.460

最好的方法是使用 Spark 在 for 循环中创建的内置索引器。上面可以这样写：

```
<div each="var item in Model">
   <input name='field-${itemIndex}' value='${item.Id}'/>
</div> 
```

比原来的还要短，而且不需要自己去跟踪变量。此外，无需专门使用`item`，在您的情况下，这将是`xIndex`因为`x`是您的实例。

希望有帮助，罗布

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:16:34.140

稍作修改：

```
<var i="0"/>
<div each="var x in Model">
    <input name='field-${i}' value='${x.Id}'/>
    <set i="i+1" />
</div> 
```

这应该有效。

最初的 'set' 已更改为 'var' 并在 i+1 附近添加了引号。

# jquery-ui - 将类添加到 jquery ui 对话框的问题

> ID：10787865
> 
> 赞同：14
> 
> 时间：2012-05-28T16:37:03.417
> 
> 标签：jquery-ui

我正在尝试使用该`dialogClass`属性向我的 jQuery 对话框中添加一个附加类。这是javascript：

```
$(function(){
    $( "#toogleMAmaximized" ).dialog({
            title: 'Missions and Achivments',
            autoOpen: false,
            height: 500,
            width: 700,
            modal: true,
            dialogClass: 'noPadding',
            buttons: {
                    Cancel: function() {
                            $( this ).dialog( "close" );
                    }
            },
            close: function() {
                    allFields.val( "" ).removeClass( "ui-state-error" );
            }

    })
    $( "#toogleMAminimized" ).click(function() {
            $( "#toogleMAmaximized" ).dialog( "open" );
            $( "#toogleMAmaximized" ).dialog({dialogClass:'noPadding'});
    });
})

<div id="toogleMAminimized" style="" class="noPadding">
<div class="" style="cursor: pointer;position: absolute;right: 0;top: 45px;"><img src ="images/MAminimized.png" alt="missions and achivments"/></div>
</div> 
```

以防万一你需要它，我的html代码

```
<div id="toogleMAmaximized" >
<div id="missions">
    <div id="mission1" missiontitle="A new home!" missionpoint="1" missionicon="images/missions/icon/anewhome-icon.png" missionimage="images/missions/anewhome.png" made="f" class="mission notDone">  </div>
</div>
<div id="achivments">
    <div id="achivment1" achivmenttitle="Lucha sin cuartel!" achivmentpoint="10" achivmenticon="images/achivments/icon/1.png" achivmentimage="images/achivments/icon/luchasincuartel-plata-ico.png" made="t" class="achivment done">  </div>
</div>
</div> 
```

如您所见，我尝试以多种方式添加课程，我尝试了所有可能的组合，但始终得到相同的结果：没有`noPadding`课程

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T16:54:55.373

您的`noPadding`课程已成功添加到对话框中。我通过将您的标记和脚本放在小提琴中并加载 jQuery UI 1.8.16（您正在测试的版本）确认了这一点。此测试可在[http://jsfiddle.net/QHJKm/3/](http://jsfiddle.net/QHJKm/3/)在线获得。

我怀疑这里的混淆是`noPadding`对对话本身的预期效果。可能您将其缺乏效果解释为一开始就没有添加它的迹象。正如您将在我的示例中注意到的那样，我有一个相当大胆的风格，红色背景。这很快确认该类确实被添加到对话框中。

# asp.net - 图表数据点操作数用法

> ID：10787866
> 
> 赞同：1
> 
> 时间：2012-05-28T16:37:15.270
> 
> 标签：asp.net

在下面的代码片段中，我试图比较两个数据点，因为我试图将饼图数据集中的所有低值点放入“其他”数据点。

我在此代码行“如果 pointValue <= minValue AndAlso Me.series.Points(index) < > 收集数据点“

```
 Dim collectedValue As Double = 0.0
        For index As Integer = 0 To Me.series.Points.Count - 1
            Dim pointValue As Double = Math.Abs(Me.series.Points(index).YValues(0))
            If pointValue <= minValue AndAlso Me.series.Points(index) <> colectedDataPoint Then
                ' Add point value to the collected value
                collectedValue += pointValue

                ' Add point to supplemental series
                Me.supplementalSeries.Points.Add(Me.series.Points(index).Clone())

                ' Remove point from the series
                Me.series.Points.RemoveAt(index)
                index -= 1
            End If
        Next 
```

但是，如果我在 C# 中编写相同的循环，那么等效的行就可以了；this.series.Points[index] != colectedDataPoint

任何人都有解决方案，因为整个项目都是用 vb.net 编写的，我更愿意保持统一。

# glassfish - 成功消息“域 domain1 已启动。” 未记录但启动 GlassFish 时可以访问控制台

> ID：10787876
> 
> 赞同：1
> 
> 时间：2012-05-28T16:38:00.590
> 
> 标签：glassfish, asadmin

安装 Java EE6 SDK 后，我安装了带有更新工具等的教程。根据 Oracle 文档，我开始使用 glassfish

> asadmin 起始域 --verbose

日志中没有错误，但也没有成功消息，并且命令没有结束执行，控制没有返回到 dos 提示符。日志中的最后一行是

> [#|2012-05-28T19:48:31.213+0530|INFO|glassfish3.1.2|javax.enterprise.system.jmx.org.glassfish.admin.mbeanserver|_ThreadID=40;_ThreadName=Thread-2;|JMX005: JMXStartupService 已经在 J​​MXService URL 服务上启动了 JMXConnector:jmx:rmi://WIN-PZ021TGFDU4:8686/jndi/rmi://WIN-PZ021TGFDU4:8686/jmxrmi|#]

知道可能出了什么问题吗？能够分别访问 8080 和 4848 上的服务器和管理控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:10:56.223

这是正常行为。Glassfish 详细模式将服务器日志消息打印到`System.out`（除了日志文件），您可以在控制台窗口中看到它。如果您没有收到错误消息，则一切正常。

Ctrl-C 将停止以详细模式运行的服务器，然后您将返回命令提示符。

如果您想看到成功消息，只需在没有`verbose`选项的情况下启动服务器。

# javascript - 如何使用 JavaScript 检索多个 JSON 文件？

> ID：10787883
> 
> 赞同：0
> 
> 时间：2012-05-28T16:38:35.780
> 
> 标签：javascript, ajax

我有一个从服务器接收 json 的 Web 应用程序。我正在使用这段代码：

```
var http_request = new XMLHttpRequest();
var url = "url where I have the json"
http_request.onreadystatechange = handle_json;
http_request.open("GET", url, true);
http_request.send(null);
var obj;

function handle_json() {
if (http_request.readyState == 4) {
if (http_request.status == 200) {
     var json_data = http_request.responseText; 
     obj = eval("(" + json_data + ")");
     processData(obj);

} else {
  alert("A problem ocurred");
}
http_request = null; 
```

} }

但现在我想从两个 url 接收 json 并显示信息。如何使用 JavaScript 做到这一点？我知道 eval 不是合适的做法，但这只是一个原型。

非常感谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:16:52.303

正如其他人所提到的，您只需要提出 2 个请求。为了重用您已经编写的代码，您可以定义一个函数来获取带有 url 参数的 json。像这样的东西：

```
function getJson(url, callback){
  function handle_json() {
    if (http_request.readyState == 4) {
      if (http_request.status == 200) {
        var json_data = http_request.responseText;
        var parser = (JSON && typeof JSON.parse == 'function') ? JSON.parse : eval;
        var obj = parser("(" + json_data + ")");
        callback(obj);
      } else {
        alert("A problem ocurred");
      }
      http_request = null;
    }
  }

  var http_request = new XMLHttpRequest();
  http_request.onreadystatechange = handle_json;
  http_request.open("GET", url, true);
  http_request.send(null);
} 
```

我用一些逻辑替换了对 eval 的调用，`JSON.parse`如果它存在就会调用，否则它将使用`eval`. 使用此函数将允许您通过多次调用它来发出多个请求，如下所示：

```
getJson("some url", processData);
getJson("some other url", processData"); 
```

如果您想以不同的方式处理来自不同 url 的数据，只需定义另一个类似的函数`processData`并将其传递，例如`getJson("some crazy url", processCrazyData);`

使用像[jQuery](http://jquery.com/)这样的框架会减少你必须编写的代码量，但是这个解决方案应该使用基本的 javascript 来完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T16:42:05.580

最简单的方法是将它放入一个函数中。

```
function getJson(url) {
    //Remove the var url="string" line
    //Rest of code
}

function handleJson() {
    //Other code
} 
```

或者，您可以使用[jQuery](http://jquery.org)，在这种情况下，您的代码将是：

```
$.getJSON('url goes in here',function(data){
    processData(data);
}); 
```

只要你想抓取一个页面，就使用它。

# java - Java 实体错误 - 空主键

> ID：10787894
> 
> 赞同：1
> 
> 时间：2012-05-28T16:39:23.883
> 
> 标签：java, jpa, entity, eclipselink, netbeans-platform

我有 2 个实体类：Shipvia 和 Route。我的 Shipvia 工作正常。路由实体类是它的精确副本，但当然是为表名和字段量身定制的。使用此方法读取两个类：

```
public class RetrieveResultList {

private static final EntityManagerFactory FACTORY = Persistence.createEntityManagerFactory("EntityLibraryPU");

    public static <T> List<T> retrieveResultList(Class<T> type) {
        EntityManager entityManager = FACTORY.createEntityManager();
        String tablename = type.getName(); // figure out table name from **type**
        Query query = entityManager.createNamedQuery(tablename + ".findAll");
        List<T> resultList = query.getResultList();
        entityManager.close();
        return resultList;
    }
} 
```

我的 Shipvia 工作实体类在这里：[http ://pastebin.com/R53tNHyp](http://pastebin.com/R53tNHyp)

我的 Route 实体类是： http: [//pastebin.com/8f4L2Z62](http://pastebin.com/8f4L2Z62)

除非我因缺少变量或字段而在某处出错，否则我不确定为什么在尝试从上述方法获取 resultList 时会出现以下错误。

我收到以下错误：

```
Local Exception Stack: 
Exception [EclipseLink-6044] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.QueryException
Exception Description: The primary key read from the row [ArrayRecord(
ROUTE.ROUTEKEY => null
ROUTE.RUADD_DATE => null
ROUTE.RUADD_TERM => null
ROUTE.RUADD_TIME => null
ROUTE.RUADD_USER => null
ROUTE.RUCHG_DATE => null
ROUTE.RUCHG_NUMB => null
ROUTE.RUCHG_TERM => null
ROUTE.RUCHG_TIME => null
ROUTE.RUCHG_USER => null
ROUTE.ROUTE => null)] during the execution of the query was detected to be null.      
Primary keys must not contain null.
Query: ReadAllQuery(name="Route.findAll" referenceClass=Route sql="SELECT ROUTEKEY, RUADD_DATE, RUADD_TERM, RUADD_TIME, RUADD_USER, RUCHG_DATE, RUCHG_NUMB, RUCHG_TERM, RUCHG_TIME, RUCHG_USER, ROUTE FROM ROUTE") 
```

奇怪的是，如果我运行上面的查询

```
SELECT ROUTEKEY, RUADD_DATE, RUADD_TERM, RUADD_TIME, RUADD_USER, RUCHG_DATE, RUCHG_NUMB, RUCHG_TERM, RUCHG_TIME, RUCHG_USER, ROUTE FROM ROUTE 
```

它返回一个完美的结果。我不确定从哪里开始寻找错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:01:22.360

我相信这个sql会解决它

```
delete from ROUTE where ROUTEKEY is null 
```

# jquery - 使用 youtube api 上传文件视频的进度条

> ID：10787896
> 
> 赞同：2
> 
> 时间：2012-05-28T16:40:12.203
> 
> 标签：jquery, twitter-bootstrap

我正在使用 youtube api 从我的网页上传视频。

这是我的html表单：

```
<form method="post" id="video_form" enctype="multipart/form-data" action="http://uploads.gdata.youtube.com/action/FormDataUpload/key=http://localhost:3000/en/id=4fc3af871d41c808f3000249" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="key=" name="authenticity_token"></div>
        <label for="Select_a_video">Select a video</label>
        <input type="file" name="yt_video_id" id="yt_video_id">
         <div class="actions">
        <input type="submit" value="Upload video" name="commit" id="submit_video_button" data-disable-with="Upload video" class="btn-large btn-primary">
         </div>
</form> 
```

我使用 twitter bootstrap 进行设计，我有这个进度条：

```
$(document).ready(function(){

    var progress = setInterval(function() {
    var $bar = $('.bar');

    if ($bar.width()==400) {
        clearInterval(progress);
        $('.progress').removeClass('active');
    } else {
        $bar.width($bar.width()+40);
    }
    $bar.text($bar.width()/4 + "%");
}, 800);

});​ 
```

您可以在[http://jsfiddle.net/xXM2z/68/中查看示例](http://jsfiddle.net/xXM2z/68/)

我的问题是进度条（进度）与发送文件的字节或兆字节不同步。

**我希望进度条与发送文件的字节或兆字节同步，并正确显示进度...**

我该怎么做？

**非常感谢你**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:31:32.110

AFAIK，你不能，除非你使用 AJAX/XHR 来上传文件。如果你把它留给浏览器，你只会知道整个文件何时上传。

这是一个 XHR 示例：

[http://hacks.mozilla.org/2009/06/xhr-progress-and-richer-file-uploading-feedback/](http://hacks.mozilla.org/2009/06/xhr-progress-and-richer-file-uploading-feedback/)

但是，我不知道 YouTube API 是否支持这一点。

# javascript - 在 JavaScript 中使用“try catch”包装每个方法的性能问题

> ID：10787902
> 
> 赞同：4
> 
> 时间：2012-05-28T16:40:47.097
> 
> 标签：javascript, performance, error-handling, try-catch, wrapper

我想知道你对我制作的一个函数的看法，它包装了一个对象的每个方法，添加了“try catch”处理程序来记录服务器端的 JavaScript 错误。

`window.onerror`由于此[安全限制](https://stackoverflow.com/a/7778424/1382292)，我不想使用，并且我的脚本将托管在 CDN 上的不同域上。

```
/*
 * object: Object to be wrapped
 * errorHandler: Instance of ErrorHandler Object
 */
function addLog(object, errorHandler) {
    var name, method;

    for (name in object) {
        method = object[name];
        if (typeof method === "function") {
            object[name] = function(method, name) {
                return function() {
                    try {
                        return method.apply(this, arguments);
                    } catch (ex) {
                        ex.message += "; method: '" + name + "'";
                        errorHandler.addToStack(ex.message);
                        throw ex;
                    }
                };
            }(method, name);
        }
    }
    return object;
} 
```

`errorHandler.addToStack`是自定义对象上的一种方法，它使用 Ajax 消息将错误报告异步发送到服务器。

我想用这个函数包装在我的应用程序上实例化的每个对象，但我不确定是否：

*   这是一个不好的做法吗？
*   它有性能问题吗？
*   有没有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:47:46.420

与 Java 等更严格的代码不同，Javascript 不需要对大多数实例化的对象进行 try/catch。如果出现问题，它往往根本不起作用，并且不会爆炸或结束于你。

然而，有些部分确实结束了函数，因此更好的方法是用 try/catch 将代码作为一个整体包围，这样它就会静默失败，并在发送错误报告时使用 catch 调用原始代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T20:45:49.470

我认为最好的方法是通过防止错误发生添加验证和检查来避免 try catch 语句，但如果你真的需要这样做，我认为它不会有很大的性能问题。

这里我做了一个[jspref](http://jsperf.com/try-catch-performance-closure)测试来测量它，差异只在IE中表现出来，但不是很显着。

我不知道errorHandler方法是否有性能问题或者拖慢你的代码，但是如果是异步的，我想应该不会有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:21:58.490

您仍然可以使用全局 try/catch 将日志发送到服务器，因为异常对象包含信息。

但是错误对象在浏览器中不是标准的，我认为

# android - Android ListView 滚动很慢

> ID：10787905
> 
> 赞同：1
> 
> 时间：2012-05-28T16:41:28.730
> 
> 标签：android

我有一个显示标准图像文本项的列表视图，我使用标准 ArrayAdapter 来处理视图。

我的问题是滚动卡住并且不是很流畅。

我做了一些分析，发现大多数时候 Measure 操作正在进行中（对于许多控件，其中大多数是容器）

有没有可能让东西工作得更快？从哪儿开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:46:37.840

这是关于 ListView 性能的非常好的演示[http://www.google.com/events/io/2010/sessions/world-of-listview-android.html](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)

编辑：这篇文章也可以帮助[http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/](http://www.curious-creature.org/2009/02/22/android-layout-tricks-1/)

# c# - 如何从 IIS 托管的 WCF 服务向控制台应用程序发送消息

> ID：10787913
> 
> 赞同：1
> 
> 时间：2012-05-28T16:42:19.350
> 
> 标签：c#, wcf, iis, logging, console

我开发了一个 WCF 服务，在开发过程中我自己托管在控制台应用程序中，然后最近部署在服务器上的 IIS 中。控制台应用程序提供了一个有用的视图，了解当时系统中发生的情况，现在我想复制它，因为我在 IIS 中托管服务。

我能看到的最简单的方法是开发一个新的控制台应用程序，它的唯一工作是接收消息并输出它。然后我可以更新我的 WCF 服务的日志方法以将消息发送到新应用程序。

我不希望控制台应用程序始终处于打开状态。我想在需要监视系统的当前状态时启动它，但如果我关闭控制台，则让服务保持运行。

关于如何最好地实现这一目标的任何想法？我在想另一个自托管的 WCF 服务，也许只是让主要服务 ping “localhost:8080/ConsoleLogger?message=abc”。虽然看起来有点乱，而且不可扩展（比如在网页上而不是控制台上输出，这样我就可以通过网络看到它）。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:58:01.917

您可以为此使用 WCF 广播，订阅不同的客户端以接收消息。 [http://msdn.microsoft.com/en-us/library/bb756931.aspx](http://msdn.microsoft.com/en-us/library/bb756931.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:44:49.403

我在这里找到了答案：

[http://www.paulrohde.com/building-a-really-simple-wcf-p2p-application/](http://www.paulrohde.com/building-a-really-simple-wcf-p2p-application/)

这是一个关于创建简单的码头到码头聊天室的很棒的教程，它很容易适应我的目的，允许我将控制台应用程序连接到服务器并从多台机器进行监控。

# arrays - 使用向量运算在 MATLAB 中按大小对向量条目进行排名

> ID：10787916
> 
> 赞同：3
> 
> 时间：2012-05-28T16:42:30.530
> 
> 标签：arrays, matlab, sorting, vector, ranking

我试图找到短而有效的向量操作，这些操作可以通过它们的相对大小有效地对向量中的条目进行排名。例如，如果一个向量是：

```
A = [212 314 196]; 
```

我想要一个返回的函数：

```
B = [2 3 1]; 
```

我在搞乱排序功能，但到目前为止，我所有的解决方案都有我认为可能不必要的 for 循环。我很难过——有人知道更优雅的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:01:59.270

[Loren 有一篇关于反转排序顺序](http://blogs.mathworks.com/loren/2007/08/21/reversal-of-a-sort)的不错的博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T19:05:59.283

[~,B]=sort(A) 当 A 是行向量时。

[~,B]=sort(A,2) 当 A 是矩阵并且您想要每行的相对大小时。

[http://www.mathworks.com/help/matlab/ref/sort.html](http://www.mathworks.com/help/matlab/ref/sort.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T20:22:47.540

假设向量 A 中的所有数字都是不同的，你可以使用 A 的转置找到它们的排名：

```
sum(A > A.') + 1 
```

对于您的向量，这会导致：

> [2 3 1]

# python-3.x - Python：重复语法错误（Minecraft MCP 设置）

> ID：10787923
> 
> 赞同：0
> 
> 时间：2012-05-28T16:43:15.263
> 
> 标签：python-3.x, minecraft

我现在正在尝试反编译我的世界 bin 文件夹以进行改装，并且多次遇到此错误，我环顾四周，找不到修复它的方法。

错误：
![错误](../Images/42dbbbe288fd507afdea37ef07e59ff9.png)

图片中引用的文件在[此处](http://db.tt/ITqpiusn "清理.py")和[此处](http://db.tt/NX65OR5S "命令.py")。

我安装了 Python 3.2.3，所以我不知道为什么它说 Python 2.6。

提前感谢您的帮助！

--ZD9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:48:10.253

如我们所见，该脚本使用 Python 2 并且需要 Python 2.6+，而您安装了 Python 2.5 或更早版本。
Python 3 在这里不算。

# android - Robolectric 测试活动创建，包括意图附加功能

> ID：10787928
> 
> 赞同：4
> 
> 时间：2012-05-28T16:43:52.893
> 
> 标签：android, tdd, android-2.3-gingerbread, robolectric, android-testing

我有一项活动可以从临时演员中获得一个 pojo，如下所示：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bundle extras = getIntent().getExtras();
        if (extras != null)
        {
            MyPojo pojo = extras.getParcelable("pojo");
            // do stuff with my pojo here
            }
        }
        // button that shows a toast message
    } 
```

我很难使用 Robolectric 对此进行测试，我相信我需要结合使用 ShadowIntents 和 ShadowActivities，但是文档有点薄，关于这个特定场景的任何有用的教程都相当稀少。

到目前为止，这是我想出的：

```
@Test
    public void assertClickingTagSightingDisplaysToast()
    {
        myActivity = new MyActivity();
        myActivity.onCreate(null);
        ShadowActivity shadowMyActivity = shadowOf(myActivity);
        shadowMyActivity.setIntent(new Intent().putExtra("pojo", generateAPojo()));

        ShadowButton shadowButton = (ShadowButton) shadowOf(shadowMyActivity.findViewById(R.id.myButton));
        shadowButton.performClick();

        assertThat(ShadowToast.getTextOfLatestToast(), equalTo("Button was clicked!"));
    } 
```

当我执行这些测试时，我不断收到一个空指针，在`getIntent().getExtras()`我的活动行中，我假设我用意图模拟活动的过程是不正确的。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:55:00.143

我自己打了这个东西。在调用 onCreate() 之前，您似乎需要使用 shadowActivity 来操作 Intent *。*

```
Robolectric.shadowOf(activity).setIntent(intent); 
```

似乎操纵活动本身应该可以解决问题，但事实并非如此。比我聪明的人将不得不解释为什么会*这样*——或者比我聪明一点的人会告诉你以上是错误的。

——速记。由于 Robolectric 似乎正在使用 javassist 来操作影子分类，因此在第一次加载类之前进行类绑定很重要。我按照他们的建议在 Runner 中进行绑定。

# java - Android 初学者：启用按钮

> ID：10787930
> 
> 赞同：-1
> 
> 时间：2012-05-28T16:43:54.637
> 
> 标签：java, android, eclipse, android-layout, android-intent

我正在创建一个顶部有两个导航栏的应用程序：“上一个”和“下一个”。我正在尝试使按钮分别在第一页和最后一页被禁用。我不确定为什么这段代码不起作用。上一个按钮被禁用，但“下一个”按钮未启用（假）。

这是我的代码：

```
previous =(Button)findViewById(R.id.button_previous);
        next = (Button)findViewById(R.id.button_next);
            previous.setOnClickListener(this);
            next.setOnClickListener(this);

        spinner = (Spinner)findViewById(R.id.spinner);
        heading = (TextView)findViewById(R.id.textNavigationHeading);
        text = (TextView)findViewById(R.id.textNavigationText); 

        Bundle ext = getIntent().getExtras();
        this.list = ext.getInt("list");
        this.page = ext.getInt("page");

        if(list == 0){
            itemsHeading = campaignHeadings;
            MAX_PAGES = campaignHeadings.length;
        }

        if(list == 1){
            itemsHeading = specopsHeadings;
            MAX_PAGES = specopsHeadings.length;
        }

        setContent();       
    }

    private void setContent() {
        heading.setText(itemsHeading[page]);
        text.setText("Blah blah blah");     
        checkButtons(page);
    }

    private void checkButtons(int page) {
        if(page == 0)
            previous.setEnabled(false);
        if(page != MAX_PAGES)
            next.setEnabled(true);
    }

    private void resetButtons(int page){
        previous.setEnabled(true);
        next.setEnabled(false);
        checkButtons(page);
    }

    public void onClick(View v) {

        switch(v.getId()){
        case R.id.button_next:
            page += 1;
            break;
        case R.id.button_previous:
            page -= 1;
            break;
        }
        setContent();
        resetButtons(page);

    } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:50:51.200

启用和禁用按钮的代码如下：

```
private void checkButtons(int page) {
    if(page == 0)
        previous.setEnabled(false);
    if(page != MAX_PAGES)
        next.setEnabled(true);
}

private void resetButtons(int page) {
    previous.setEnabled(true);
    next.setEnabled(false);
    checkButtons(page);
} 
```

您有两种不同的方法，有时调用一种方法，有时调用另一种方法。使其成为一种方法，如下所示：

```
private void enableOrDisableButtons(int page) {
    previous.setEnabled(page != 0);
    next.setEnabled(page != (MAX_PAGES - 1));
} 
```

另外，请注意这`MAX_PAGES`是您列表的长度，并且索引从包含`0`到`length - 1`包含。因此，当页面为 时，需要禁用下一个按钮`MAX_PAGES - 1`。

# php - PHP将值传递给包含文件中的变量

> ID：10787936
> 
> 赞同：3
> 
> 时间：2012-05-28T16:44:22.867
> 
> 标签：php, variables, include, scope

我有一个 php 文件（**article.php**），其中包含保存内容的变量和一个包含对保存 html 结构（**template.php**）的模板的引用。

```
<?php
$headline = 'Headline';
$author = 'Author';
$paragraph = 'Text';
include 'template.php';
?> 
```

这是上面提到的**template.php 。**它包括**blockTemplate.php**。（更多内容，见下文。）：

```
<html>
   <body>
      <?php include 'blockTemplate.php'; ?>
   </body>
</html> 
```

这是**blockTemplate.php**。它有变量，我想在**article1.php**中提供的值，（顶级文件）：

```
<h1>Title: <?php $headline ?></h1>
<h2>Author: <?php $author ?></h2>
<p>Text: <?php $paragraph ?></p> 
```

这是我应该从 article1.php 得到的输出：

# 标题：标题

## 作者：作者

文字：文字

这是我得到的输出。注意变量没有被包括在内：

# 标题：

## 作者

文本：

**问题：如何将 article1.php 中的值传递给包含的 blockTemplate.php 中的变量？** 包含的文件在包含之前正在处理中发生了什么，以便在包含它们时不包含任何变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T17:42:30.633

你有没有尝试过：

```
<h1>Title: <?php echo $headline ?></h1>
<h2>Author: <?php echo $author ?></h2>
<p>Text: <?php echo $paragraph ?></p> 
```

这对我行得通

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T03:34:51.573

我遇到了类似的问题。在我的 include.php 中，我有这样一行，

```
echo '<form id="frm"><input type="hidden" id="Variable" valve=$>Variable</form>' 
```

哪个 PHP 应该评估但没有。因此，在阅读了 Xare 的上述帖子后，我尝试了，

```
echo '<form id="frm"><input type="hidden" id="Variable" valve=$Variable></form>'; 
```

从单引号中删除我的 $Variable 修复了它。

# android - 在外部类中使用 Toast

> ID：10787940
> 
> 赞同：0
> 
> 时间：2012-05-28T16:44:34.790
> 
> 标签：android, toast

我有一个控制我的应用程序逻辑的类，除了扩展 Activity 的类，它在最后一个中声明。

我想知道是否有办法在该课程中使用 toast。

我尝试使用 Activity 扩展该类并在他的构造函数中发送上下文，但它不起作用。

**编辑：**

这里有我如何在构造函数中传递上下文的代码：

```
GameController newgame = new GameController(getApplicationContext());

public GameController(Context _context)
{       
    //...       
    context = _context;
}

Toast.makeText(context, "You can't bet this amount, the minimun bet is: " + minimun_bet, 2).show(); 
```

当我运行这个我得到这个错误：

```
05-29 10:58:06.230: E/AndroidRuntime(5753): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T17:06:26.717

Toast 只需要使用 Context 来展示。您需要做的就是将 Context 传递给此类，一切都会好起来的。我一直为我的所有自定义课程这样做。如果您可以分享您如何在构造函数中实现/调用此传递上下文，我们可以帮助指出。

基本上，它是这样的：

```
public MyClass{
    private Context context;
    public MyClass(Context context){
        this.context = context;
    }
    private void alert(String msg){
        Toast.makeText(this.context, msg, Toast.LENGTH_LONG).show();
    }
} 
```

现在，您要做的是检查该 Context 在您传入时是否有效。当我不小心使用 getBaseContext 而不是 getApplicationContext 并导致问题时，有很多情况。但实际上，您可以将 Activity 传入并将其转换为 Context 没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:52:19.687

```
public class ClassName {        
    public ClassName(Activity _activity) {
            Toast.makeText(_activity, "text", Toast.LENGTH_LONG).show();
    }
} 
```

您可以将其用作 ClassName(YourActivity.this);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T07:10:38.633

**试试这个**它对我有用

在您的活动中

上下文上下文 = new yourclass().getAndSetMyContext(Activity.this);

在你的类私有静态上下文 c;

```
public  Context getAndSetMyContext(Context c) {
    this.c = c;
    return this.c;
} 
```

在需要 Toast 的方法中，只需使用

Toast.makeText(c,message,Toast.LENGTH_SHORT).show();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T16:57:04.840

该类不需要从 Activity 扩展，但您需要以某种方式传递给它一个上下文以供使用。这可能是一个活动上下文或应用程序上下文。

只要确保它不会永远保留上下文。

# javascript - 显示另一个 div 时隐藏一个 div

> ID：10787941
> 
> 赞同：0
> 
> 时间：2012-05-28T16:44:40.877
> 
> 标签：javascript, jquery, html

我有 4 个 div，其中两个在单击（链接）时显示，并以相同的方式隐藏。当我单击其他 2 个 div 的链接时，前 2 个应该再次隐藏，反之亦然。现在，如果单击 2 个链接，将显示所有 4 个 div。

简单：点击链接>显示div；单击第二个链接>在隐藏第一个 div 时显示第二个 div

**2个链接：**

```
 <a class="show_hideAbout show_hideAboutArr" href="#" >About</a>

 <a class="show_hideContact show_hideContactArr" href="#" >Contact</a> 
```

**前 2 个 div：**

```
<div class="slidingDivAbout">Some Content</div>
<div class="slidingDivAboutArr">
  <img src="img/dropdownarrow.png" width="24" height="12" alt="">
</div> 
```

**其他2个div：**

```
<div class="slidingDivContact">Some Content</div>
<div class="slidingDivContactArr">
  <img src="img/dropdownarrow.png" width="24" height="12" alt="">
</div> 
```

**还有我的脚本：**

```
$(document).ready(function() {
  $(".slidingDivAbout").hide();
  $(".show_hideAbout").show();

  $('.show_hideAbout').click(function() {
    $(".slidingDivAbout").slideToggle(350);
  });

  $(".slidingDivAboutArr").hide();
  $(".show_hideAboutArr").show();

  $('.show_hideAboutArr').click(function() {
    $(".slidingDivAboutArr").fadeToggle("fast", "linear");
  });
  $(".slidingDivContact").hide();
  $(".show_hideContact").show();

  $('.show_hideContact').click(function() {
    $(".slidingDivContact").slideToggle(350);
  });

  $(".slidingDivContactArr").hide();
  $(".show_hideContactArr").show();

  $('.show_hideContactArr').click(function() {
    $(".slidingDivContactArr").fadeToggle("fast", "linear");
  });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:28:22.590

在不更改标记的情况下，您可以使用它：

```
$(document).ready(function() {
    $(".slidingDivAbout, .slidingDivAboutArr, .slidingDivContact, .slidingDivContactArr").hide(0);

    $('.show_hideAbout').click(function() {
        $(".slidingDivContact").slideUp(300, function() {
            $(".slidingDivContactArr").fadeOut(300, function() {
                $(".slidingDivAbout").slideToggle(350, "linear", function() {
                    $(".slidingDivAboutArr").fadeToggle(350);
                });
            });
        });
    });
    $('.show_hideContact').click(function() {
        $(".slidingDivAbout").slideUp(300, function() {
            $(".slidingDivAboutArr").fadeOut(300, function() {
                $(".slidingDivContact").slideToggle(350, function() {
                    $(".slidingDivContactArr").fadeToggle(350, "linear");
                });
            });
        });
    });
}); 
```

**[工作样本](http://jsfiddle.net/thecodeparadox/QStkd/85/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:29:54.400

嗨，我会像这个[jsfiddle](http://jsfiddle.net/37ty2/76/)示例那样做

HTML

```
<a class="show_hideAbout" href="#" >About</a>

<a class="show_hideContact" href="#" >Contact</a>
<div class="slidingDivAbout">Some Content1</div>
<div class="slidingDivAboutArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
<div class="slidingDivContact">Some Content2</div>
<div class="slidingDivContactArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>​ 
```

脚本

```
$(function(){

         $('.slidingDivAbout').hide();
         $('.slidingDivAboutArr').hide();
         $('.slidingDivContact').hide();
         $('.slidingDivContactArr').hide();

         $('.show_hideAbout').click(function() {
            $('.slidingDivAbout').show(350);
            $('.slidingDivAboutArr').show()
            $('.slidingDivContact').hide();
            $('.slidingDivContactArr').hide();
        });

        $('.show_hideContact').click(function() {         
            $('.slidingDivContact').show(350);
            $('.slidingDivContactArr').show('fast', 'linear');
            $('.slidingDivAbout').hide();
            $('.slidingDivAboutArr').hide();
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:05:17.823

对于每个链接，您应该绑定一次点击。

```
<a class="show_hideAbout show_hideAboutArr" href="#" >About</a>
<a class="show_hideContact show_hideContactArr" href="#" >Contact</a> 
```

以下 2 个是重复的，因为它们将点击绑定到同一个标签。class="show_hideAbout show_hideAboutArr")

```
$('.show_hideAbout').click(function(){
      $(".slidingDivAbout").slideToggle(350);
      });

$('.show_hideAboutArr').click(function(){
      $(".slidingDivAboutArr").fadeToggle("fast", "linear");
      }); 
```

只保留一个。和

```
$('.show_hideAbout').click(function(){
    $(".slidingDivAbout").slideToggle(350);
    $(".slidingDivAboutArr").fadeToggle("fast", "linear");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T17:23:46.147

我会在您的 html 标记中使用自定义属性：

[这是一个工作演示](http://jsfiddle.net/MXaEk/)

HTML：

```
<a class="slidingLink" slide="about" href="#" >About</a>
<a class="slidingLink" slide="contact" href="#" >Contact</a>

<div class="slidingContainer" id="about">
    <div>Some Content</div>
    <div><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
</div>
<div class="slidingContainer" id="contact">
    <div>Some Content</div>
    <div><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
</div>​​​​​​​​​​​​​​​​ 
```

JavaScript：

```
$(document).ready(function(){
    $('.slidingContainer').hide();
    $('.slidingLink').click(function () {
        var toSlide = $(this).attr("slide");
        $("#"+toSlide).slideDown(350);
        $('.slidingContainer').each(function () {
            if ($(this).attr("id") != toSlide) {
                $(this).slideUp(350);
            }
        });
    });
}); 
```

这绝对是通用的，因此添加新链接所需要做的就是添加一个新`a`标签，其`slide`属性设置为`id`具有类的 div 的属性`slidingContainer`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T17:00:28.903

也许尝试这样的事情？

```
<a class="show_hideAbout" href="#" >About</a>
<a class="show_hideContact" href="#" >Contact</a>

<div class="divAbout">
  <div class="slidingDivAbout">Some Content</div>
  <div class="slidingDivAboutArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
</div>

<div class="divContact">
  <div class="slidingDivContact">Some Content</div>
  <div class="slidingDivContactArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
</div> 
```

和javascript：

```
$(document).ready(function() {

    $(".divAbout").hide();
    $(".divContact").hide();

    $('.show_hideAbout').click(function() {
        if( $(".divContact").is(":visible") ) {
          $(".divContact").slideToggle(350, 'linear', function(){
            $(".divAbout").slideToggle(350, 'linear');
          });
        } else {
          $(".divAbout").slideToggle(350, 'linear');
        }
    });

    $('.show_hideContact').click(function() {
        if( $(".divAbout").is(":visible") ) {
          $(".divAbout").slideToggle(350, 'linear', function(){
            $(".divContact").slideToggle(350, 'linear');
          });
        } else {
          $(".divContact").slideToggle(350, 'linear');
        }
    });

});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T17:17:10.350

我认为最好使用 CSS 类而不是大量的隐藏/显示方法来做到这一点。HTML 看起来像：

```
<a class="showAbout" href="#" >About</a>
<a class="showContact" href="#" >Contact</a>
<div id='wrapper'>
    <div class="about">
        <div class="slidingDivAbout">Some Content 1</div>
        <div class="slidingDivAboutArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
    </div>
    <div class="contact">
        <div class="slidingDivContact">Some Content 2</div>
        <div class="slidingDivContactArr"><img src="img/dropdownarrow.png" width="24" height="12" alt=""></div>
    </div>
</div> 
```

有两个 CSS 规则：

```
#wrapper > div {
    display: none;
}
​#wrapper > div.show {
    display: block;
}​ 
```

然后是 jQuery：

```
$(function() {

    $(document).on('click', '.showAbout', function() {
        $('.about').siblings('div').removeClass('show').end().toggleClass('show');
    });

    $(document).on('click', '.showContact', function() {
        $('.contact').siblings('div').removeClass('show').end().toggleClass('show');
    });

});​ 
```

# java - Android - 只读文件系统 IOException

> ID：10787942
> 
> 赞同：20
> 
> 时间：2012-05-28T16:44:41.537
> 
> 标签：java, android, android-emulator

我正在尝试在 Android 系统上写入一个简单的文本文件。这是我的代码：

```
public void writeClassName() throws IOException{
    String FILENAME = "classNames";
    EditText editText = (EditText) findViewById(R.id.className);
    String className = editText.getText().toString();

    File logFile = new File("classNames.txt");
       if (!logFile.exists())
       {
          try
          {
             logFile.createNewFile();
          } 
          catch (IOException e)
          {
             // TODO Auto-generated catch block
             e.printStackTrace();
          }
       }
       try
       {
          //BufferedWriter for performance, true to set append to file flag
          BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true)); 
          buf.append(className);
          buf.newLine();
          buf.close();
       }
       catch (IOException e)
       {
          // TODO Auto-generated catch block
          e.printStackTrace();
       } 
```

但是，此代码会产生“java.io.IOException：打开失败：EROFS（只读文件系统）”错误。我尝试按如下方式向我的清单文件添加权限，但没有成功：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="hellolistview.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ClassView"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity 
        android:name=".AddNewClassView" 
        />

</application>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

有人知道问题是什么吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-05-28T16:51:22.843

因为您正在尝试将文件写入根目录，所以您需要将文件路径传递给您的文件目录。

例子

```
String filePath = context.getFilesDir().getPath().toString() + "/fileName.txt";
File f = new File(filePath); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T16:55:34.920

尝试在开发人员指南中使用[本文中的方法：](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

# haskell - Reactive-banana：来自 fromPoll 的最新值

> ID：10787945
> 
> 赞同：7
> 
> 时间：2012-05-28T16:44:48.010
> 
> 标签：haskell, frp, reactive-banana

我正在用反应香蕉在 Haskell 中写一个音乐播放器。我遇到的一个问题是使用 fromPoll 获取最新值。我想让用户**在播放时**有选择地选择曲目的一部分。我的代码看起来像这样：

```
makePlayNetworkDescr :: Player a => AddHandler Command -> a -> NetworkDescription t ()
makePlayNetworkDescr addCmdEvent player = do
    bPosition <- fromPoll (getPosition player)
    eCmds <- fromAddHandler addCmdEvent

    let eSetStart = filterE (isJust) $ bPosition <@ filterE (==SetStart) eCmds
        eSetEnd = filterE (isJust) $ bPosition <@ filterE (==SetEnd) eCmds
        eClearRange = filterE (==ClearRange) eCmds

        bStart = accumB Nothing ((const <$> eSetStart) `union` (const Nothing <$ eClearRange))
        bEnd = accumB Nothing ((const <$> eSetEnd) `union` (const Nothing <$ eClearRange)) 
```

上面，*getPosition*是一个偏函数，在真正开始播放之前返回*Nothing 。*问题是一旦*addCmdEvent*第一次触发，*bPosition*仍将保持*Nothing*值。*eSetStart/End*基于此计算它们的值。只有这样*bPosition 才会*更新，这是下次触发*addCmdEvent*时使用的值。依此类推，可以说，值将始终“减一”。

有一个相关的[SO question](https://stackoverflow.com/questions/8618069/reactive-banana-firing-event-that-contain-the-most-up-to-date-value-of-a-behavi)，但在这种情况下，存在一个“触发”事件，可用于计算行为的新值。使用 fromPoll 可以实现类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:16:37.870

从 reactive-banana-0.5 和 0.6 开始，`fromPoll`只要外部事件触发事件网络，该函数就会更新行为。您可以通过使用将这些更新作为事件访问

```
eUpdate <- changes bSomeBehavior 
```

但是，请注意，行为表示不支持“更新事件”的一般概念的连续时变值。该`changes`函数将尝试返回一个有用的近似值，但没有正式的保证。

或者，您可以更改外部事件以将玩家位置作为`addCmdEvent`. 在您的情况下，这意味着向`SetStart`and`SetEnd`构造函数添加更多数据。然后，您可以使用

```
eSetStart = filterJust $ matchSetStart <$> eCmds
    where
    matchSetStart (SetStart pos) = Just pos
    matchSetStart _              = Nothing 
```

* * *

这两种解决方案都要求您将最近的值作为事件而不是行为来观察。原因是使用创建的行为`stepper`将始终在更新时返回旧值（它们“落后一个”），因为这对于递归定义非常有用。

无论如何，**根本问题**是玩家位置在`addCmdEvent`发生之前很久就在外部更新，但问题是这不是事件网络所看到的。相反，网络认为`fromPoll`更新返回的行为与`addCmdEvent`. 事实上，除非你有权访问负责更新玩家位置的外部事件源，否则它只能这么想。（如果您有访问权限，则可以使用该`fromChanges`功能。）

我意识到这种行为`fromPoll`对于您的常见用例来说有些不令人满意。`fromPoll`不过，我不确定是否应该在我的库中修复它：在返回最新值和`changes`试图做到最好的函数之间需要权衡。如果返回最新的值，那么`changes`它将表现得好像它跳过了一次更新（当值被外部更新时）并触发了多余的更新（当网络更新值以匹配外部更新时）。如果您对此有任何意见，请告诉我。

* * *

请注意，将行为与应用运算符`<*>`结合起来可以很好地结合最新的值。

# c# - 插入 Windows 键盘缓冲区

> ID：10787949
> 
> 赞同：4
> 
> 时间：2012-05-28T16:45:24.543
> 
> 标签：c#, windows, input, keyboard

我们需要从一个硬件（RFID 扫描仪）读取数据并将其注入到 Windows 键盘缓冲区中。这样 RFID 扫描仪就可以用于捕获字符串并注入光标当前所在的任何位置，例如，如果 Windows 应用程序中的文本框具有焦点，那么这就是字符串出现的位置。如果通过 Web 浏览器呈现的 Web 应用程序中的文本框具有焦点，则输入需要出现在那里。

请注意：问题不在于从 RFID 设备读取数据——我们可以这样做，而是将我们读取的字符串放入 Windows 键盘缓冲区，这样无论哪个应用程序具有焦点，输入都会出现在光标处。

开发环境为 C# .NET

非常感谢

托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:53:06.947

您可以简单地使用 SendKeys.SendWait() 或 SendInput。如果您只想将击键发送到 Windows 中的活动应用程序，请使用 SendKeys。

# ruby-on-rails - erb:to:haml rake 任务

> ID：10787951
> 
> 赞同：1
> 
> 时间：2012-05-28T16:45:38.710
> 
> 标签：ruby-on-rails, rake, haml, html2haml

我按照这个截屏视频制作了一个 erb:to:haml rake 任务： [http ://teachmetocode.com/screencasts/creating-a-rake-task-to-convert-erb-to-haml/](http://teachmetocode.com/screencasts/creating-a-rake-task-to-convert-erb-to-haml/)

我用 git 备份了所有内容，然后运行它，它完美地完成了这项工作，但现在我的页面没有加载。

这是截屏视频中的 rake 任务、我的 gemfile、haml 中的页面、错误以及终端上“bundle install”的输出。

我现在很难过。

--

早些时候忘记了要点，出现错误： [https ://gist.github.com/2820027](https://gist.github.com/2820027)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:26:42.950

正如 Buck 注意到的，第 67 行不包含有效的 HAML 代码：

```
 - if @cart
    = hidden_div_if(@cart.line_items.empty?, id: 'cart') do
    = render @cart 
```

# php - 如何阻止特定的 PHP 语句

> ID：10787953
> 
> 赞同：2
> 
> 时间：2012-05-28T16:46:09.333
> 
> 标签：php, file-upload, filesystems

尽管听起来很危险，但我希望用户能够在我的网站上创建自己的 PHP 程序。

我有什么办法可以编写代码，这样当用户发布他们的代码时，他们就不会删除或编辑已经存在的文件，也许是使用 RegExp？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:49:43.187

看看 php.ini 指令[`disable_functions`](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T16:50:54.563

除非您想简单地通过禁用功能`php.ini`（这会限制您自己的脚本，尤其是如果您允许用户上传和管理他们的 PHP 文件），那么任何类型的这种规模代码的审核脚本都将是可怕和复杂的。您至少需要监视所有创建的文件或操作，并取消对尚未创建的文件或操作的任何调用。

PHP 在解析 HTML 或 XML 之类的东西时遇到了很多麻烦，所以我会避免使用原始 PHP 来允许人们执行他们自己的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:51:53.590

看到 PHP 中可用的功能数量，这使得安全地设置共享主机已经有些困难，实际上没有办法通过将某些语句列入黑名单来安全地允许用户执行此操作。

但是，如果您真的现在正在做的事情，则可以使用允许执行的函数的**白名单。**如果您真的想安全地做到这一点，您可以通过在非特权 PHP 解析器中运行代码并使用结果来实现这一点。以与您的网站相同的权限运行代码是**不安全的。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T17:13:28.713

如果您在服务器管理方面得心应手，您可能会想出一些办法。您可能想在服务器故障时问这个问题。我认为如果您将文件复制到具有正确权限的一个目录（可能是 550），它不会让脚本写任何东西，但我不太确定。

我的一个建议是将 set_time_limit() 添加到所有脚本的顶部以保持运行时间短。另外我会设置一个脚本，一次只允许执行这么多，这样你的服务器就不会被破坏。

# php - 发送数据的编码不起作用

> ID：10787962
> 
> 赞同：0
> 
> 时间：2012-05-28T16:47:24.713
> 
> 标签：php, jquery, ajax, encoding

我有一个小聊天框，一切正常，除了发送特殊的拉丁字符，如 äöü。

这是发送输入的帖子，一旦按下输入（它被放置在正文中，而不是在标题中，无法弄清楚如何将它放在标题中-> vBulletin 模板）：

```
<script type="text/javascript">
  $("#shout").keypress(function(e) {
    if(e.keyCode == 13) {
      $.ajax({
        url: "http://example.com/api.php",
        contentType: "text/html; charset=ISO-8859-1",
        data: {
          action: "shout",
          // This is what I found on the internet to
          // encode the data, but didn't help.
          message: $('<div />').text($("#shout").val()).html()
        },
        success: function() {
          $("#shout").val("");
        }
      })
    }
  });
</script> 
```

**在服务器端**

```
// Insert shout
case "shout":
if(isset($_GET['message']) && $_GET['message'] != "") {
  $mc->insertShout($userid, mktime(), $_GET['message']);
}

break; 
```

**insertShout 逻辑**

```
public function insertShout($userid, $date, $message, $notification = 0) {
  $sql = "INSERT INTO
  vb_chatbox_shout (userid, dateline, message, message_raw, notification)
        VALUES
          (?, ?, ?, ?, ?)";

  $stmt = $this->db->prepare($sql);

  $stmt->bindParam(1, $userid);
  $stmt->bindParam(2, $date);
  $stmt->bindParam(3, $message);
  $stmt->bindParam(4, $message);
  $stmt->bindParam(5, $notification);

  if(!$stmt->execute()) {
    var_dump($stmt->errorInfo());
  }

  return 1;
} 
```

我试过使用 utf-8 作为字符集，但没有运气。另外，帖子没有帮助。使用这种 ajax 来提取聊天框内容就像一个魅力（使用 phpmyadmin 直接插入到 db 的特殊字符正确显示）。

问题不在于将字符插入数据库。当我在第一个入口点转储 $_GET 变量时，它已经搞砸了，所以问题出在 jQuery 和 PHP 之间。

**新标题**

```
GET /api.php?action=shout&message=%25C3%25B6%25C3%25A4%25C3%25BC HTTP/1.1
Host: example.com
Connection: keep-alive
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
Accept: */*
Referer: http://example.com/forum/forum.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: de
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: skimlinks_enabled=1; bb_lastvisit=1316066700; bb_lastactivity=0; bb_userid=1;

HTTP/1.1 200 OK
Date: Mon, 28 May 2012 17:26:14 GMT
Server: Apache
X-Powered-By: PHP/5.2.9
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:54:49.717

代替

```
message: $('<div />').text($("#shout").val()).html() 
```

和

```
message: encodeURIComponent($('<div />').text($("#shout").val()).html()) 
```

在javascript中，然后替换

```
$mc->insertShout($userid, mktime(), $_GET['message']); 
```

和

```
$mc->insertShout($userid, mktime(), urldecode($_GET['message'])); 
```

并添加

```
header('Content-type: text/html; charset=utf-8'); 
```

在 PHP 文件的开头。

如果`urldecode`at php 不起作用，请尝试将其替换为`rawurldecode()`.

# c++ - 在数组中找到一个索引在它之前和之后给出一个总和？

> ID：10787964
> 
> 赞同：0
> 
> 时间：2012-05-28T16:47:41.377
> 
> 标签：c++, algorithm

给定一个数组，我想找到一个索引，它前面的数字和它后面的数字给出相等的总和。

例如像这样的数组 `[4,5,6,11,7,8]`

输出是索引`3`，因为`4+5+6 = 7+8`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:59:51.360

首先找到所有项目的总和，将其保存为`sum`，然后从数组的开头读取并汇总要到达的项目`(sum - current index value)/2`，如果没有得到这样的结果，则意味着没有这样的索引，如果你进入`sum/2`每个索引迭代，意味着相关索引是你的答案。

示例：`4,5,6,11,7,8` 总和 = 41。

```
check index 0: currentSum  = 4, currentSum - currentValue = 4-4 != (41 - 4)/2
check index 1: currentSum  =  9, currentSum - currentValue = 9-5 != (41 - 5)/2
check index 2: currentSum  = 15, currentSum - currentValue = 15-6 != (41 - 6)/2
check index 3: currentSum  = 26, currentSum - currentValue = 15 == (41 - 11)/2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:52:35.133

创建（包含）前缀和数组（这需要 O(n) 步）

然后对于每个索引`0 < i < n`，检查是否`prefixsum[i - 1] == prefixsum[n - 1] - prefixsum[i]`，`i`如果返回`true`。（也需要 O(n) 步）。

* * *

您可以更轻松地执行此操作（并且空间更少）：

计算数组的总和。在）

然后，通过数组，跟踪前缀总和（这次不包括在内）。比较`prefixsum == sum - (prefixsum + current)`。如果为真，则返回当前索引。也是 O(n)。

本质上它与上面的相同，但避免将前缀和保存在数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:55:20.733

尝试构建范围和段树？检查每个节点，如果它们的左/右子节点相等，则返回它的索引。也许矫枉过正。

# php - 使用 git 和 CI 进行多站点部署

> ID：10787967
> 
> 赞同：2
> 
> 时间：2012-05-28T16:47:50.627
> 
> 标签：php, git, github, continuous-integration, web-deployment

目前，我使用 github 来托管我的代码仓库，然后通过 FTP 将文件复制和粘贴到服务器上，将更新推送到我的站点。但是，我使用的主机允许 ssh 访问，必须有一种更简单的方法来执行此操作。

我要做的是以下几点：

*   设置一个 Jenkins（一个 CI），在部署之前检查我的所有代码。
*   能够从单个存储库部署到多个站点。但是每个站点中都有一个或两个唯一文件（例如其中包含 Google Analytics 代码的视图）。

到目前为止，从我的谷歌搜索来看，我既可以通过他们提供的 GitHub 的 webhook 进行部署，也可以通过 Capistrano 进行部署。

所以，我的问题是***设置一切的最佳方法是什么？***

*注意：我仍然是编程 n00b，所以请注意我在提问时没有考虑到的任何事情*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:35:02.887

您可能会发现仅[`git-ftp`](https://github.com/resmo/git-ftp)用于上传更改更简单。此脚本将服务器上最后一次上传的提交的名称存储在一个特殊文件中，当您重新上传时，它仅发送自上次上传状态以来已更改的文件。文件/目录重命名/删除之类的事情也得到了正确处理。在我们的设置中，我们发现这个脚本比滚动一些更高级的解决方案更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:07:44.707

在您的存储库中，您可以有两个根级文件夹。一个用于站点，一个用于包含站点特定文件。对于**每个站点**，创建一个 Jenkins 构建配置以执行以下操作：

1.  您的 git 存储库的签出代码
2.  执行任何构建操作
3.  将站点文件复制到生产环境
4.  将站点特定文件复制到生产环境

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T20:37:12.380

您可以使用具有 的本地存储库，该存储库`clean script`将在签出版本时根据需要更改这些特定文件中的设置。

这在 Pro Git 书的**关键字扩展**部分的**git 属性**章节中有所介绍：

 **[http://git-scm.com/book/en/Customizing-Git-Git-Attributes](http://git-scm.com/book/en/Customizing-Git-Git-Attributes)**

# java - 如何检查用户是否正在输入消息

> ID：10787968
> 
> 赞同：0
> 
> 时间：2012-05-28T16:47:51.413
> 
> 标签：java, xmpp, smack

我一直在部署一个与 gtalk 交互的基于 Web 的聊天应用程序。我能够成功地制作应用程序。我想为这个应用程序添加一个新功能。我想在发送消息之前检查是否有任何 gtalk 用户正在输入，即在调用聊天之后，是否有任何方法可以检查 gtalk 用户是否正在输入；就像在有人打字时 gtalk 显示“有人在打字”的方式一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T08:57:10.810

XEP-0085：聊天状态通知是您正在寻找的。您必须在您的客户端中实现这一点。 [http://xmpp.org/extensions/xep-0085.html](http://xmpp.org/extensions/xep-0085.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:51:18.083

附加一个按键侦听器，该侦听器在用户每次按下某个键时通知服务器。服务器必须接收此信息并通知其他服务器。

虽然我没有使用 gtalk 的经验。这是一个通用的解决方案。不要使用您正在使用的库/框架有多远。

# db2 - 比较 DB2 日期

> ID：10787973
> 
> 赞同：14
> 
> 时间：2012-05-28T16:48:07.677
> 
> 标签：db2

我在 DB2 表中有一个 DB2 DATE 类型字段。我想通过日期过滤器选择数据。例如：

```
SELECT *
FROM   table
WHERE registrationdate > '2002-10-01'; 
```

从上面的查询中，我得到注册日期从“1943-10-01”开始的记录，但这是不正确的。

这些也不起作用：

```
registrationdate > date('2002-10-01')
date(registrationdate) > date('2002-10-01')
date(registrationdate) > '2002-10-01' 
```

我如何需要比较日期？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-28T17:17:05.587

DATE 文字的 SQL 标准格式是：

```
DATE '2002-10-01' 
```

至少，值得一试：

```
SELECT *
  FROM table
 WHERE registrationdate > DATE '2002-10-01'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T11:06:34.547

我探索了数据库的其他一些问题，重新启动后它开始工作，所以现在可以正常工作：

```
registrationdate > '2002-10-01' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-02T13:32:04.973

用于日期的默认格式由**DB2**数据库的地区代码确定（可以在创建数据库时指定）。例如，我的数据库是使用 region=US 创建的。因此日期格式如下所示：

```
values current date 
1 
---------- 
05/30/2003 

1 record(s) selected. 
```

您可以从 DB CFG 获得地区代码。

```
db2 get db cfg | egrep 'code|territory'
 Database territory                                      = US
 Database code page                                      = 1208
 Database code set                                       = UTF-8
 Database country/region code                            = 1 
```

也就是说，格式是**MM/DD/YYYY**。如果要更改格式，可以绑定 db2 实用程序包集合以使用不同的日期格式。

要使用 SQL 获取当前日期、时间和时间戳（基本上让您了解日期格式是什么），请参考适当的 DB2 寄存器：**sysibm.sysdummy1**表是一个特殊的内存表，可用于发现DB2 寄存器的值

```
db2 "SELECT current date FROM sysibm.sysdummy1 "

1
----------
06/02/2014

  1 record(s) selected. 
```

即使我们在函数中省略引号，DATE 函数仍然有效，但结果不正确：

```
db2 "SELECT date(2001-09-22) FROM sysibm.sysdummy1 "

1
----------
05/24/0006

  1 record(s) selected. 
```

当 DATE 函数获得一个字符串作为输入时，它假定它是 DB2 日期的有效字符表示，并相应地对其进行转换。相反，当输入为数字时，该函数假定它表示从当前时代（即 0001-01-01）开始的天数减一。在上面的查询中，输入是 2001-09-22，等于 (2001-9)-22，等于 1970 天。

如果以上所有内容都适用，那么下面的命令应该可以很好地解决您的问题。

> **`SELECT * FROM table WHERE registrationdate > '10/01/2002';`**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-27T06:51:44.050

使用这种格式。

```
registrationdate > 'mm/dd/yyyy' 
```

# ruby-on-rails - 在 Rails 中正确设置 has_many

> ID：10787981
> 
> 赞同：0
> 
> 时间：2012-05-28T16:48:40.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many-through

昨天我问了一个关于在 Rails 中设置模型之间的 has_and_belongs_to_many 关系的问题。我最终得到了这些关系，但是，我意识到我需要在我的连接表中存储额外的信息，这意味着我应该使用 has_many through 与连接模型的关系（我猜？）。

我现在有一个配方模型、成分模型和一个数量连接模型。每个食谱都有许多成分，反之亦然。并且配方中的每种成分在特定的单位类型中都有一定的数量。

到目前为止，这是我的设置：

模型/recipe.rb

```
class Recipe < ActiveRecord::Base
  has_many :amounts
  has_many :ingredients, :through => :amounts
end 
```

模型/成分.rb

```
class Ingredient < ActiveRecord::Base
  has_many :amounts
  has_many :recipes, :through => :amounts
end 
```

模型/数量.rb

```
class Amounts < ActiveRecord::Base
  belongs_to :recipes
  belongs_to :ingredients
end 
```

MySQL 表：

```
$ mysql > show columns from recipes;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(255) | NO   |     | NULL    |                |
| desc       | text         | NO   |     | NULL    |                |
| image_url  | varchar(255) | YES  |     | NULL    |                |
| created_at | datetime     | NO   |     | NULL    |                |
| updated_at | datetime     | NO   |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> show columns from ingredients;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| id         | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(255) | NO   |     | NULL    |                |
| created_at | datetime     | NO   |     | NULL    |                |
| updated_at | datetime     | NO   |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> show columns from amounts;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| recipe_id     | int(11)      | NO   |     | NULL    |                |
| ingredient_id | int(11)      | NO   |     | NULL    |                |
| amount        | int(11)      | NO   |     | NULL    |                |
| units         | varchar(255) | NO   |     | NULL    |                |
| created_at    | datetime     | NO   |     | NULL    |                |
| updated_at    | datetime     | NO   |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

我想我的关系设置正确......我只是不确定如何正确添加到连接模型/表然后访问这些值。例如，我可以调用@recipe.ingredients 并返回所有相关的成分吗？

**编辑：** 对于我想要做的事情的困惑，我深表歉意。

当我使用 has_and_belongs_to_many 关系时，我可以使用 '<<' 推送到 @recipe.ingredients 并使用 recipe_id 和成分 ID 自动插入连接表。但是，由于连接表中的附加属性，此方法在使用 has_many through 时似乎不起作用。

我将如何创建这些关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:05:55.113

建立一个`has_many :through`关联是 Rails 的一些魔法。您将有权访问`has_many`关联为连接表和相关表设置的所有方法。Rails 会自动处理任何关联。

[在这里](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)查看 Rails 指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:59:05.687

您可以`recipe.ingredients`直接读取和分配，它会自动写入连接表。

但您不太可能需要它，因为您需要有关金额的其他信息。您可能需要为来自表单的金额更新/创建具有嵌套属性的食谱。

在数量模型中考虑每个配方的成分的唯一性约束。

希望这有帮助

# iphone - 越狱iOS设备的后台处理

> ID：10787983
> 
> 赞同：2
> 
> 时间：2012-05-28T16:48:48.303
> 
> 标签：iphone, ios, jailbreak

我想制作一个应用程序，其中有一个后台进程，每隔几个小时就会更改一次铃声。后台进程还需要能够连接到 Web 服务器以下载铃声（如果可用）。

我只想为越狱设备制作这个应用程序，因此应用商店提交不是问题。我真的不确定我们是否可以拥有这样的后台处理能力。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T02:20:52.963

是的，您可以在越狱的 iPhone 上拥有后台进程。我不确定你是否有任何用户界面。也许您会构建一个普通的**应用程序**UI 用于偶尔与用户交互，以及一个后台**守护程序**定期检查服务器是否有新的铃声，并重置手机的铃声。

查看[本教程了解如何构建 iPhone 守护进程](http://chrisalvares.com/blog/?p=7)。

# html - css 类不应用样式，但 id 应用样式？

> ID：10787985
> 
> 赞同：1
> 
> 时间：2012-05-28T16:48:59.567
> 
> 标签：html, css, styling

我的 HTML 设置如下

```
<div>
    <ul>
        <li></li>
    </ul>
    <ul>
        <li>
            <a class="nodecoration"></a>
        </li>
    </ul>
</div> 
```

CSS：

```
.nodecoration {
    text-decoration:none;
} 
```

当我将锚标记`<a id="nodecoration"></a>`更改为并将 CSS 更改为：

```
#nodecoration {
    text-decoration:none;
} 
```

该元素现在样式。为什么是这样？

旁注：我也在使用 Twitter Bootstrap，来自那个干扰的 CSS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:52:51.517

这表明另一个样式规则优先于该规则。`a.nodecoration`您可能希望通过使用which 应该增加其优先级来使该规则更加具体。

仅供参考，Firefox 的 firebug 等工具会告诉您哪些规则具有更高的优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:58:32.093

bootstrap 已经有规则，你需要更具体。

*   标记 1 分
*   等级 10 分
*   身份证 100 分

您可以通过这种方式计算以知道哪个更具体。

# c# - 更新旧的 Windows 服务？

> ID：10787992
> 
> 赞同：1
> 
> 时间：2012-05-28T16:49:26.430
> 
> 标签：c#, visual-studio-2008, service, windows-services

我正在寻找更新已经运行了几年而没有中断的旧 Windows 服务。我在项目中更新了几个连接字符串，一切似乎都很好。

有没有办法在无需卸载和重新安装的情况下更新此服务？考虑到它在稳定状态下运行了多长时间，我宁愿不卸载。

我可以简单地停止服务，更换重建的 EXE 并重新启动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:52:47.940

只要注册表中所需的设置没有什么不同，就可以了。

如果可能，请先在另一台机器上进行测试。

# android - Android 谷歌地图发布 API 密钥

> ID：10787994
> 
> 赞同：1
> 
> 时间：2012-05-28T16:49:39.393
> 
> 标签：android, google-maps

有人可以解释一下如何生成 Google Api 发布密钥。谷歌地图在虚拟设备管理器上完美运行，但在手机上却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-16T12:40:12.633

您需要为发布版本生成一个新密钥。请仔细阅读此[官方页面](https://developers.google.com/maps/documentation/android-api/start?hl=fr#step_1_download_android_studio)中提到的信息。此外，如果您想为调试和发布目的使用单个密钥，您可以为您的发布和调试构建添加 SHA1。

# java - 如何使它只接受来自第一个文本字段的字符串？

> ID：10787996
> 
> 赞同：0
> 
> 时间：2012-05-28T16:49:41.483
> 
> 标签：java, string, applet, int, textfield

我的代码用于扩展二项式的小程序。我还没有完成它，但它只接受 1 到 10 之间的指数，包括 1 到 10。我到了 7 点，但就像我说的，我还没有完成。我的问题是：在第一个文本字段中，它将接受一个数字和一个变量（如 4a 或其他东西）。而且我写的代码不能考虑这个数字（它应该只接受一个变量）。所以......我如何得到它，以便第一个 textField 不能允许有一个 int？谢谢！

```
import java.applet.Applet; 
import java.awt.*;
import java.awt.event.*; 
import java.applet.*; 
import javax.swing.*; 
import java.text.DecimalFormat; 
import java.util.ArrayList; 
import javax.swing.Action;

public class BinomialExpander extends JApplet implements ActionListener
{
  JLabel welcome;
  JLabel directions;
  JLabel example;

  JLabel instructions;
  JLabel startOfBinomial;
  JLabel plusSign;
  JLabel forExponent;
  JLabel endOfBinomial;

  JTextField firstVar;
  JTextField txtSecond;
  JTextField exp;

  JLabel lblExpanded; 
  JLabel outputExpanded;  
  FlowLayout layout;

  JButton compute;

  private int[] pascal1 = {1,1};
  private int[] pascal2 = {1,2,1};
  private int[] pascal3 = {1,3,3,1};
  private int[] pascal4 = {1,4,6,4,1};
  private int[] pascal5 = {1,5,10,10,5,1};
  private int[] pascal6 = {1,6,15,20,15,6,1};
  private int[] pascal7 = {1,7,21,35,35,21,7,1};
  private int[] pascal8 = {1,8,28,56,70,56,28,8,1};
  private int[] pascal9 = {1,9,36,84,126,84,36,9,1};
  private int[] pascal10 = {1,10,45,120,210,120,45,10,1};

  private String a;
  private int y; 
  private int expo;
  private String x;

  public void init() 
  {
      Container c = getContentPane(); 
      c.setBackground(Color.pink);

      layout = new FlowLayout();
      layout.setAlignment(FlowLayout.LEFT);
      c.setLayout(layout);
      setSize(500,175);

      welcome = new JLabel("Welcome to the Binomial Expander Applet!");
      welcome.setFont(new Font("Copperplate Gothic Bold", Font.PLAIN, 16));
      directions = new JLabel("Enter binomial ONLY in the form: (VARIABLE + NUMBER)^EXPONENT");
      directions.setFont(new Font("Times New Roman", Font.PLAIN, 14));
      example = new JLabel("EXAMPLE: (x + 2)^2.");
      instructions = new JLabel("Enter the variable of your binomial:");
      startOfBinomial = new JLabel(" (");
      firstVar = new JTextField(4);
      plusSign = new JLabel(" + ");
      txtSecond = new JTextField(4);
      endOfBinomial = new JLabel(")");
      forExponent = new JLabel("^");
      forExponent.setFont(new Font("Times New Roman", Font.PLAIN, 10));
      exp = new JTextField(2);
      compute = new JButton("Compute!");
      compute.addActionListener(this);
      lblExpanded = new JLabel("Your expanded binomial is: ");
      outputExpanded = new JLabel("");
      c.add(welcome);
      c.add(directions);
      c.add(example);
      c.add(instructions);
      c.add(startOfBinomial);
      c.add(firstVar);
      c.add(plusSign);
      c.add(txtSecond);
      c.add(endOfBinomial);
      c.add(forExponent);
      c.add(exp);
      c.add(compute);
      c.add(lblExpanded);
      c.add(outputExpanded);
  }
  public void actionPerformed(ActionEvent event) 
  {
      a = firstVar.getText();
      y = Integer.parseInt(txtSecond.getText());
      expo = Integer.parseInt(exp.getText());

      outputExpanded.setText(expand()); 
  }
  public String expand()
  {  
     if (expo < 1 || expo > 10)
     {
        x = "ERROR: Exponent value must be between 1 and 10, inclusive.";
        return x;
     }
     else if (expo == 1)
     {
        x = a + "+" + y;
        return x;  
     }
     else if (expo == 2)
     {
        x = a + "^" + expo + " + " + (pascal2[1] * y) + a + " + " + (pascal2[2] * Math.pow(y, expo));
        return x;
     }
     else if (expo == 3)
     {
        x = a + "^" + expo + " + " + (pascal3[1] * y) + a + "^" + (expo-1) + (pascal3[2] * Math.pow(y, expo-1)) + a + " + " + (Math.pow(y, expo));
        return x;
     }
     else if (expo == 4)
     {
        x = a + "^" + expo + " + " + (pascal4[1] * y) + a + "^" + (expo-1) + " + " + (pascal4[2] * Math.pow(y, expo-2)) + a + " ^ " + (expo-2) + " + " + (pascal4[3] * 
        Math.pow(y, expo-1)) + a + "+" + (Math.pow(y,expo));
        return x;
     }
     else if (expo == 5)
     {
        x = a + "^" + expo + " + " + (pascal5[1] * y) + a + "^" + (expo-1) + " + " + (pascal5[2] * Math.pow(y,expo-3)) + a + "^" + (expo-2) + " + " + (pascal5[3] * 
        Math.pow(y, expo-2)) + a + "^" + (expo-3) + " + " + (pascal5[4] * Math.pow(y, expo-1)) + a + " + " + (Math.pow(y, expo));
        return x;
     }
     else if (expo == 6)
     {
        x = a + "^" + expo + " + " + (pascal6[1] * y) + a + "^" + (expo-1) + " + " + (pascal6[2] * Math.pow(y, expo-4)) + a + "^" + (expo-2) + " + " + (pascal6[3] *
        Math.pow(y, expo-3)) + a + "^" + (expo-3) + " + " + (pascal6[4] * Math.pow(y, expo-2)) + a + "^" + (expo-4) + " + " + (pascal6[5] * Math.pow(y, expo-1)) +
        a + " + " + (Math.pow(y,expo));
        return x;
     }
     else if (expo == 7)
     {
        x = a + "^" + expo + " + " + (pascal7[1] * y) + a + "^" + (expo-1) + " + " + (pascal7[2] * Math.pow(y, expo-5)) + a + "^" + (expo-2) + " + " + (pascal7[3]
        * Math.pow(y, expo-4)) + a + "^" + (expo-3) + " + " + (pascal7[4] * Math.pow(y, expo-3)) + a + "^" + (expo-4) + " + " + (pascal7[5] * Math.pow(y, expo-2))
        + a + "^" + (expo-5) + (pascal7[6] * Math.pow(y, expo-1)) + a + " + " + (Math.pow(y, expo));
        return x;
     }
     return x; 
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:32:33.513

上面的答案足以回答你的问题。让我有点多管闲事，并指出您的代码可以通过使用循环而不是硬编码指令得到很大改进（和缩短）。

我很快准备了以下代码：

公共静态浮点系数（int n，int k）{int sup = 1；int inf = 1; for (int i = (nk)+1; i <= n; i++) { sup *= i; } for (int i = 2; i <= k; i++) { inf *= i; } 返回 (sup / inf); }

```
public static String Binomials(int limit, int y, String variable) {
    StringBuilder result = new StringBuilder("");
    for (int i = 0; i <= limit; i++) {
        if (i>0) {
            result.append("+"+variable );
            if (i>1) {
                result.append("^" + i );
            }
            result.append("*");
        }
        result.append(  Math.pow(y, limit-i) * coefficient(limit, i));
    }
    return (result.toString());
} 
```

它没有经过彻底的测试，也没有提高效率，但它似乎工作得很好。因此，我相信它可以作为您创建方法的通用版本的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:59:00.373

假设 a 是您要从中删除数字的字符串，请尝试此操作

```
a = a.replaceAll("[0-9]*$", ""); 
```

这将取出所有数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:59:23.140

我建议使用`String's` `match()`函数来查看值`a`是否是有效答案（我不知道什么对你有效）。然后如果它无效，您可以使用 a`JDialog`显示错误消息而不是计算二项式。

它看起来像这样：

```
 public void actionPerformed(ActionEvent event) 
  {
      a = firstVar.getText();
      y = Integer.parseInt(txtSecond.getText());
      expo = Integer.parseInt(exp.getText());

      if(a.matches(/*Some REGEX*/)) {
          outputExpanded.setText(expand());
      }
      else {
          //Use the JDialog
      } 
  } 
```

以下是页面：

[细绳](http://docs.oracle.com/javase/6/docs/api/)

[对话框](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html)