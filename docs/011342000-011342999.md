# StackOverflow 问答 11342000-11342999

# c# - 是否需要在实体模型中传递时间戳值才能将数据插入到 sql 表中

> ID：11342003
> 
> 赞同：1
> 
> 时间：2012-07-05T10:01:16.560
> 
> 标签：c#, sql-server, entity-framework, tsql, timestamp

我正在研究 ado.net 实体模型，我想将数据插入到 sql 表中。SQL 表结构如下所示。

```
ID int,
Name varchar(20),
EventTime Timestamp 
```

我正在尝试使用 entitymodel 将数据插入 SQL 表，但数据未插入表中。

我传递`(1,"Test")`的论点是它不起作用。

我发现当我通过时`(1, "test", new Datetime())`它会起作用。

谁能告诉我这样做的原因？

我了解时间戳值是由 SQL 服务器自动插入的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:08:11.030

“时间戳”数据类型为您提供了一个二进制值，每次您的字段更改时都会自动更新，但它不会为您提供一个好的日期/时间值。

**更新：** 根据**MSDN**：timestamp 是一种数据类型，它在数据库中公开自动生成的唯一二进制数。时间戳通常用作对表行进行版本标记的机制。存储大小为 8 个字节。时间戳数据类型只是一个递增的数字，不保留日期或时间。

**要在插入记录时记录日期时间，请使用日期时间数据类型。您可以将日期时间类型的列添加到表中并设置 getDate() 以生成日期时间。**

# spring - Spring DispatcherServlet 和 Filters 的关系

> ID：11342010
> 
> 赞同：2
> 
> 时间：2012-07-05T10:01:59.020
> 
> 标签：spring, servlets, spring-mvc, servlet-filters

Spring MVC 使用 a`DispatcherServlet`将控制路由到适当的 Controller。但是过滤器在哪里适合流？如果我指定一个过滤器来执行会话管理或身份验证，过滤器是否总是在 DispatcherServlet 之前调用？

我的困惑来自于他们都指定了一个 URL 模式这一事实。如果它们都提供相同的 url 模式会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:07:17.520

这并不是 Spring 和 Spring MVC 所特有的。一般来说，过滤器总是在servlet*之前调用。*当您有多个过滤器和一个与给定 URL 模式匹配的 servlet 时，所有过滤器按定义顺序首先执行，`<filter-mapping>`而 servlet 最后执行。

这样，您可以即时修改请求，甚至完全忽略 servlet。

# c# - PDF（iTextSharp）中表格的最后一列没有对齐

> ID：11342012
> 
> 赞同：1
> 
> 时间：2012-07-05T10:02:05.963
> 
> 标签：c#, asp.net, itextsharp

我使用 iTextSharp 从 HTML 页面开始生成了一个 PDF 文件。但是，正如您在图像中看到的那样，表格的最后一列没有对齐。

我能做些什么来解决这个问题？

![pdf代码生成的表格](../Images/7c9849a875aa942727de14359743ab4c.png)

以下是部分代码：

```
StyleSheet ss = new StyleSheet();
TextReader htmlReader = new StringReader(strHTML);
ArrayList htmlarraylist = HTMLWorker.ParseToList(htmlReader, ss);
foreach (IElement el in htmlarraylist)
    {
        document.Add(el);
    } 
```

在 strHTML 中有这个 HTML 代码：

```
<TABLE style="WIDTH: 100%" border=1 cellSpacing=1 cellPadding=1><BR><TBODY><BR><TR><BR><TD>1</TD><BR><TD>2</TD><BR><TD>4</TD><BR><‌​TD>4</TD><BR><TD>5</TD></TR><BR><TR><BR><TD>6</TD><BR><TD>7</TD><BR><TD>8</TD><BR‌​&gt;<TD>9</TD><BR><TD>0</TD></TR><BR><TR><BR><TD>0</TD><BR><TD>98</TD><BR><TD>7</TD>‌​&lt;BR><TD>5</TD><BR><TD>4</TD></TR><BR><TR><BR><TD>3</TD><BR><TD>2</TD><BR><TD>3</T‌​D><BR><TD>4</TD><BR><TD>5</TD></TR><BR><TR><BR><TD>76</TD><BR><TD>7</TD><BR><TD>9‌​&lt;/TD><BR><TD>0</TD><BR><TD>4</TD></TR></TBODY></TABLE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:20:15.993

再见

你使用循环来生成你的pdf，吗？你确定你对每个单元格都做了适当的动作......

```
int howManyCell = ....

for (int i = 0; i < howManyCell + 1; i++) {

                PdfPCell cell = new PdfPCell();

                cell.HorizontalAlignment = Element.ALIGN_RIGHT;

                cell.VerticalAlignment = Element.ALIGN_TOP;

                table.AddCell(cell);
} 
```

也许您使用自动转换，而不使用任何 pdf 类元素？在这种情况下，请向我们展示您的 html 表格的标题和表格第一行的示例，以检查这是否正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:50:32.537

我发现了问题！

所有那些 BR 标签都弄乱了我的桌子！这些是由隐藏在另一个类中的替换添加的：

```
Replace("\r\n", "<BR>"); 
```

谢谢你们的帮助！

# css - 引导程序中的中心侧边栏内容

> ID：11342013
> 
> 赞同：2
> 
> 时间：2012-07-05T10:02:09.697
> 
> 标签：css, twitter-bootstrap

我需要居中侧边栏。这是我的布局（不起作用）：

```
<body>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span9">
        ...
      </div>
    <div class="span3">
    //sidebar
      <div class="row-fluid">
        <div class="span12 center-block">
          //content which should be centered
        </div>
      </div>
    </div>
  </div>
</body> 
```

我在[这里](https://stackoverflow.com/questions/9554724/bootstrap-css-center-span7)采取的中心块代码：

```
.center-block {
 margin:0 auto;
 float:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:11:57.323

```
.center-block {
    margin:0 auto;
    float:none;
} 
```

通过使用上面的代码，它将`center-block`Div 而不是其中的内容居中，以对齐您需要`text-align:center`在`.center-block`类中添加的内容，如下所示：

```
.center-block {
    margin:0 auto; /*It will center the block*/
    float:none;
    text-align:center; /*It will center the content inside block*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:03:19.893

为了`margin: 0 auto;`工作，您还需要`width`在`div`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:04:16.563

如果要使内容居中，请尝试以下操作。

```
.center-block {
  text-align: center;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:05:55.813

您还可以将 span3 的 text-align 属性设置为居中。

```
div.span3
{
    text-align:center;
} 
```

希望这能回答你的问题:)

# c++ - LSH和ORB opencv？

> ID：11342018
> 
> 赞同：2
> 
> 时间：2012-07-05T10:02:40.143
> 
> 标签：c++, opencv, sift, object-recognition, orb

基本上，我有很多对象可以使用 ORB 描述符在测试图像（查询图像）中识别。

我想使用 LSH 来获得更快的匹配，但我在 opencv 中找不到示例。开发了吗？如果你有不同的对象并且你想在测试图像中找到它们中的每一个，你会使用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:57:34.753

这是在**OpenCV 2.3.1**中添加的。

在 OpenCV 2.3.1 中，您可以找到在`modules/imgproc/src/lsh.cpp`.

在 OpenCV 2.4.0 中，您可以在`modules/legacy/src/lsh.cpp`.

OpenCV 不包含它的演示，但[这个线程](http://opencv-users.1802565.n2.nabble.com/how-to-use-the-ORB-descriptor-td6606424.html)很快就会讨论它。

快乐的谷歌搜索！

# android - 在 iOS 和 Android 之间同步应用程序数据

> ID：11342019
> 
> 赞同：6
> 
> 时间：2012-07-05T10:02:49.917
> 
> 标签：android, ios, sync, icloud

有些应用程序可以在 iOS 和 Android（手机和平板电脑）上运行，并且它们设法在不同设备之间同步数据。

1.  有没有提供这种同步功能的框架或库？
2.  如果不是，有哪些不同的实施方案？
3.  iCloud 可以用于在 Android 和 iOS 设备之间同步应用程序数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:28:33.093

**有没有提供这种同步功能的框架或库？**

您可以查看 OpenMobster 云平台。同步服务确实在 Android 和 iOS 设备之间安全复制数据。您所要做的就是在云端开发 Java Sync Channel，并在设备端使用 Device API 来访问您的数据。这是该项目的链接：http: [//openmobster.googlecode.com](http://openmobster.googlecode.com)

全面披露：我是 OpenMobster 平台的总工程师

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T06:53:55.840

> 有没有提供这种同步功能的框架或库？

不，没有任何框架或库可以提供 iCloud 为 Apple 设备提供的那种跨平台同步。

> 如果不是，有哪些不同的实施方案？

1.  根本不要使用同步机制，而是使用网络服务。对于某些情况，这可能是一个很好的解决方案。
2.  在 iOS 和 Android 应用程序中使用 SQLite 数据库，并自行实现同步解决方案。如果您选择实施自定义同步解决方案，您将面临的一些挑战如下：
    *   提供注册机制，使用云/服务器端服务
    *   从服务器/云读取和写入数据
    *   检测和解决冲突（即合并冲突）
    *   离线访问数据，以及设备未连接任何网络时的处理情况
    *   在 iOS 中，您将无法使用 Core-Data（这使得开发相对非常容易），因此您必须注意有效地显示数据、优化数据访问等

> iCloud 可以用于在 Android 和 iOS 设备之间同步应用程序数据吗？

不可以。iCloud 仅适用于 Apple 设备（截至 2012 年 7 月）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T22:20:31.000

Dropbox Datastore API 可以同步你的结构数据（database），以及同步 API 和同步图片、文档等文件。

[https://www.dropbox.com/developers/datastore](https://www.dropbox.com/developers/datastore)

[https://www.dropbox.com/developers/sync](https://www.dropbox.com/developers/sync)

他们有 iOS 和 Android 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T19:50:39.980

Orando [Labs](https://orandolabs.com)的 EnduroSync是一款完全符合您要求的新产品。有适用于 iOS 和 Android 的客户端，还会有更多。

全面披露：我在 Orando Labs 工作。

EnduroSync 客户端允许您在本地设备上创建对象数据存储。客户端相当复杂——数据被建模为我们支持的每个客户端的本地对象（现在是 iOS 和 Android，还有更多）。客户离线和在线工作。数据保存在本地的 sqlite 数据库中。

当您更改模型中的对象时，增量会记录在设备上。在某些时候，您可以“同步”对象数据存储。同步使用提交/推送/拉取过程（如 git），但这对您来说是不可见的。同步使您的本地副本与服务器上的任何内容保持同步，并发送您所做的任何更改。使用基于时间戳的合并解决冲突，因此较新的数据不会被较旧的数据覆盖。

EnduroSync 是一项在线服务，因此您无需设置服务器。

还有一个灵活的权限系统，可让您以多种方式共享对象数据存储。例如，大多数应用程序将为每个用户提供一个或多个对象数据存储，用于偏好、注释、标签等。您还可以按应用程序、每个用户类型以及使用通配符等许多其他方式共享对象数据存储。

因此，基本上您使用我们的客户端 SDK 对设备上的数据进行建模。建模是使用设备本机编程语言中的简单对象。如果您注册同步服务，您也会获得同步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T10:09:59.533

我不了解 iOS，但使用 Android，您可以使用同步适配器将数据同步到云（您的服务器）或从云（您的服务器）同步数据。例子：

[http://developer.android.com/training/cloudsync/index.html](http://developer.android.com/training/cloudsync/index.html)

因此，如果您从 iPhone 应用程序获取一些数据到您的服务器，您也可以将其同步到 Android 应用程序，反之亦然。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-05T10:15:20.477

c2dm 已被弃用：

> 重要提示：C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为 Android 版 Google Cloud Messaging (GCM)。有关更多信息，请参阅 C2DM 到 GCM 迁移文档。开发人员必须使用 GCM 进行新的开发。

使用 GCM：[链接](http://developer.android.com/guide/google/gcm/index.html)

# ios - 未调用正确的 NIB 文件

> ID：11342027
> 
> 赞同：0
> 
> 时间：2012-07-05T10:03:23.300
> 
> 标签：ios, uiinterfaceorientation

我有这个代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
if( UIInterfaceOrientationIsLandscape(toInterfaceOrientation) )
{
    [[NSBundle mainBundle] loadNibNamed:@"ChatViewController-landscape" owner:self options:nil];

}else {

    [[NSBundle mainBundle] loadNibNamed:@"ChatViewController" owner:self options:nil];

}
} 
```

我在 if( UIInterfaceOrientationIsLandscape(toInterfaceOrientation) 行中设置了一个断点。但是第一次它没有进入那行代码。如果我转动手机，那个时间和随后的方法被调用。我怎样才能调用那个方法第一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:14:00.580

I think for the first time you will have to check the orientation on viewdidload and then load the nib file accordingly, you can create a single method that can be called from willRotateToInterfaceOrientation and viewDiD load for that

[[UIDevice currentDevice] orientation] this will give current orientation

# android - 如何在 DialogFragment 中显示现有的 ListFragment

> ID：11342032
> 
> 赞同：10
> 
> 时间：2012-07-05T10:03:59.660
> 
> 标签：android, dialog, fragment, popupwindow

我有以下问题：

我有一个现有的`ListFragment`，但我想将其显示为一个对话框。

我的第一种方法是创建一个`DialogFragment`必须`ListFragment`在其中的，但显然目前不可能将片段放入片段中。

由于大量使用方法，扩展`DialogFragment`而不是`ListFragment`也不可能`ListFragment`。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T10:56:31.280

对我有用的是

**1）**在 DialogFragment 的 xml 布局中调用，比如说，**DialogFragmentwWithListFragment**指定 ListFragment 类，
例如**dialog_fragment_with_list_fragment.xml**：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <fragment
             android:id="@+id/flContent"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:padding = "10dp"
             class="com.xxx.yyy.DialogFragmentwWithListFragment " />
</LinearLayout> 
```

**2)**在**DialogFragmentwWithListFragment**中膨胀**dialog_fragment_with_list_fragment.xml**

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.dialog_fragment_with_list_fragment, null);
} 
```

**3)**调用**DialogFragmentwWithListFragment** 作为常规 DialogFragment：

```
 DialogFragmentwWithListFragment dialogFragment = DialogFragmentwWithListFragment  .newInstance();
 dialogFragment.setRetainInstance(true);
 dialogFragment.show(getFragmentManager(), "tag"); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T19:51:56.480

我要么把`ListView`里面 a`DialogFragment`或者试着把`ListFragment`里面 a `Dialog`。我不确定第二个是否可能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T09:40:03.817

您可以通过`DialogFragment`这种方式显示列表：（使用支持 v4 库）

```
public class MyListDialogFragment extends DialogFragment {
    onDlgListClick mCallback;

    private String[] lista;//the list you want to show with the dialog

    public static MyListDialogFragment newInstance(Bundle fB){
    MyListDialogFragment lstFrag = new MyListDialogFragment();
    Bundle args = new Bundle();
        args.putStringArray("lista", fB.getStringArray("lista"));//the list
        args.putString("titulo", fB.getString("titulo"));//the title of the list
        lstFrag.setArguments(args);

        return lstFrag;
    }

    public interface onDlgListClick{
        public void onLstItemSelected(String selection);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            mCallback = (onDlgListClick) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement onLstItemSelected");
        }
        this.setCancelable(false);
    }

     @Override
     public Dialog onCreateDialog(Bundle savedInstanceState) {
         lista = getArguments().getStringArray("lista");

         return new AlertDialog.Builder(getActivity())
         .setTitle(getArguments().getString("titulo"))
         .setCancelable(false)
         .setItems(lista, new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dialog, int item){

                mCallback.onLstItemSelected(lista[item]);
                getDialog().dismiss(); //maybe you dont need these two lines
                MyListDialogFragment.this.dismiss();
            }
         }).create();
     }

} 
```

在您扩展`FragmentActivity`和实现接口的主要活动上`MyListDialogFragment.onDlgListClick`

```
//the interface
@Override
public void onLstItemSelected(String selection) {//list dialog fragment interface
//do whatever you want
}

//calling the dialog
public void showFrags(int id){

        Bundle fB = new Bundle();

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        Fragment prev = getSupportFragmentManager().findFragmentByTag("listdialog");
        if (prev != null) {
            ft.remove(prev);
        }
        ft.commit();
        switch(id){
        case 0:
        fB.putStringArray("lista", list); fB.putString("titulo",title);
        MyListDialogFragment newListDlg = MyListDialogFragment.newInstance(fB);
        newListDlg.show(ft, "listdialog");
        break;
        }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T14:52:08.247

当在另一个片段中添加一个片段时，文档说你应该动态地做它（即，而不是将`<fragment>`标签硬编码到你的布局 XML 中。

所以这里是如何动态地做到这一点。在这种情况下，我添加`MyListFragment`到`MyDialogFragment`：

**MyDialogFragment.java**

```
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.support.annotation.Nullable;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;

public class MyDialogFragment extends DialogFragment {

    public static final String TAG = MyDialogFragment.class.getSimpleName();
    private static final String ARG_TITLE = "ARG_TITLE";

    private EditText mEditText;

    public MyDialogFragment() {
        // Empty constructor required for DialogFragment
    }

    public static MyDialogFragment newInstance(String title) {
        MyDialogFragment myDialogFragment = new MyDialogFragment();
        Bundle args = new Bundle();
        args.putString(ARG_TITLE, title);
        myDialogFragment.setArguments(args);
        return myDialogFragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        Dialog dialog = super.onCreateDialog(savedInstanceState);
        Bundle args = getArguments();
        if (args != null) {
            dialog.setTitle(args.getString(ARG_TITLE));
        }
        return dialog;
    }

    public void setTitle(String title) {
        Dialog dialog = getDialog();
        dialog.setTitle(title);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.dialog_fragment_selected_products, container, false);
        //addInnerFragment();

        Button okButton = (Button)view.findViewById(R.id.okButton);
        okButton.setOnClickListener(
                new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        dismiss();
                        //dismissAllowingStateLoss();
                    }
                }
        );

        return view;
    }

    @Override
    public void onStart() {
        super.onStart();
        //addInnerFragment();
    }

    @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        addInnerFragment();
    }

    public void addInnerFragment() {

        FragmentManager childFragmentManager = getChildFragmentManager();
        FragmentTransaction transaction = childFragmentManager.beginTransaction();
        //transaction.add(R.id.fragmentContainer, new MyListFragment());
        transaction.add(R.id.fragmentContainer, MyListFragment.newInstance(MyListFragment.MODE_SELL));
        //transaction.commit();
        transaction.commitAllowingStateLoss();
        childFragmentManager.executePendingTransactions();

    }

} 
```

（如您所见，它还包含一些设置对话框标题的功能。）

**dialog_fragment_selected_products.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MyDialogFragment"
    android:orientation="vertical">

    <LinearLayout
        android:id="@+id/fragmentContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_alignParentTop="true"
        android:layout_above="@+id/okButton" />

    <Button
        android:id="@+id/okButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/ok" />

</RelativeLayout> 
```

这样做的另一个优点是您可以创建内部片段的实例，以便将任何参数传递给它。

为了完整起见，这里是我在活动中用来显示 DialogFragment 的代码：

**我的活动.java**

```
private void showCurrentItemsDialog() {

    MyDialogFragment myDialogFragment = MyDialogFragment.newInstance("cpuk.org");
    //myDialogFragment.setRetainInstance(true);

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction transaction = fragmentManager.beginTransaction();
    transaction.add(myDialogFragment, MyDialogFragment.TAG);
    transaction.commitAllowingStateLoss();
    fragmentManager.executePendingTransactions();

} 
```

# java - 当 ClassLoader.getSystemRessource(filename) 给出结果时，为什么我会得到 FileNotFoundException？

> ID：11342034
> 
> 赞同：0
> 
> 时间：2012-07-05T10:04:03.643
> 
> 标签：java, bufferedreader, filenotfoundexception, filereader

我当前的应用程序需要从文件中获取数据以初始化其属性。它需要存储在一个文件中才能对用户进行修改。

```
String strFile = ClassLoader.getSystemResource("myFile.csv").getPath();
if(strFile==null)
        throw new Exception("File not find");
BufferedReader br = new BufferedReader(new FileReader(strFile));
//Begin reading file process.. 
```

我的问题是它`strFile`不为空，但在初始化时我有一个*java.io.FileNotFoundException*`br`，请参见以下堆栈：

```
java.io.FileNotFoundException: C:\Users\TH951S\My%20Documents\Eclipse\Workspace
                                 \My%20App\bin\myFile.csv 
                                 (The system cannot find the path specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileReader.<init>(Unknown Source) 
```

我检查了文件是否在指定的路径中，并且一切似乎都正确。

有谁知道为什么会这样？或者当路径未知时，还有另一种获取文件的方法吗？

感谢阅读和更多的回答，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:04:04.377

我解决了我的问题，其中一个让你因为没有尽快解决而感到愚蠢。

URL 是用值编码空格， Java 在初始化`%20`时不会用空格字符替换值。`FileReader`因此有必要改变`%20`。`" "`

还有另一种计数方式。也可以`BufferedReader`使用`InputStreamReader`如下方式初始化：

```
InputStream in=ClassLoader.getSystemResourceAsStream("myFile.csv");
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T10:26:09.373

只是为了完整性：我遇到了同样的问题，但结果*必须*是一个`File`对象（因为我需要文件的大小）。

```
URL url = ClassLoader.getSystemResource("myFile.csv");
File file = new File(url.toURI());
System.out.println("Correct path: " + file.getAbsolutePath());
System.out.println("Size of file: " + file.length()); 
```

该解决方案的灵感来自[java 中的 sysLoader.getResource() 问题](https://stackoverflow.com/questions/3263560/sysloader-getresource-problem-in-java#13470643)。

我很惊讶我必须上这么多课，但我没有找到更接近的解决方案。

# android - 在应用程序生命周期中保持登录网站

> ID：11342040
> 
> 赞同：0
> 
> 时间：2012-07-05T10:04:40.393
> 
> 标签：android

我可以使用以下代码通过我的 android 应用程序登录到[http://yearbook08.com/ ：](http://yearbook08.com/)

```
 String URL="http://yearbook08.com/login.php";

    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = null;

    HttpPost httppost = new HttpPost(URL); 
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("userId", uname));
    nameValuePairs.add(new BasicNameValuePair("password", pass));
    try {
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

现在，当我移动到另一个活动时，我想检索[http://yearbook08.com/wall.php](http://yearbook08.com/wall.php)但网络服务器无法识别我的上次登录并要求我再次登录。

有没有一种方法可以让我在登录后保持登录状态？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:29:44.623

您的代码没有考虑会话管理。发生这种情况是因为在成功登录后没有设置 cookie，因此如果您发送另一个请求，初始身份验证将丢失，服务器会将其视为新请求。我建议你使用 Apache httpcomponents library 4.x（特别是 httpclient）

创建一个 httpcontext 并附加一个 cookie 存储为

```
// Create a local instance of cookie store
CookieStore cookieStore = new BasicCookieStore();
// Create local HTTP context
HttpContext localContext = new BasicHttpContext();
// Bind custom cookie store to the local context
localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
HttpGet httpget = new HttpGet("http://www.google.com/"); 
// Pass local context as a parameter
HttpResponse response = httpclient.execute(httpget, localContext); 
```

在后续请求中使用相同的 localContext。另请注意 cookiestore 和 httpcontext 应声明为静态或全局变量，因为它们的范围必须存在于您携带 httprequest 的任何位置。您不必自己设置 cookie，它会自动完成！并阅读有关 HttpComponents 4.x [http://hc.apache.org/httpcomponents-client-ga/index.html](http://hc.apache.org/httpcomponents-client-ga/index.html)

**更新 1：** 确保它是 v4 和 v3。basicCookiestore 从 v4 开始才存在。现在很清楚，您正在使用不了解 basiccookiestore 对象的 v3。将 v4 库添加到您的项目中。它会解决你的问题

**更新 2** 如果您尝试从第二个活动中检索[http://yearbook08.com/wall.php](http://yearbook08.com/wall.php)，则会出现此问题，因为第二个活动中没有 httpcontext、httpclient 或 Cookiestore 对象。所以它会发送一个新的请求。 **第一种方法** 因此，您应该尝试在第一个活动本身中获取您需要的内容，然后将获取的数据传递给第二个活动。这样你就可以保持会话。 **第二个解决** 方案如果您对此不满意，可以查看[http://www.jameselsey.co.uk/blogs/techblog/android-implementing-global-state-share-data-between-activities-and-across- your-application/](http://www.jameselsey.co.uk/blogs/techblog/android-implementing-global-state-share-data-between-activities-and-across-your-application/)跨活动共享 httpcontext、cookiestore 和 httpclient 以完成任务。

# php - .htaccess 中的 mod_rewrite、链接和格式

> ID：11342045
> 
> 赞同：1
> 
> 时间：2012-07-05T10:05:06.983
> 
> 标签：php, .htaccess, mod-rewrite

我的网站上有各种链接，这些链接都是通过 PHP MySQL 查询生成的。因此，在一个页面上，它可能会提供大量结果，如果单击一个页面，我可能会：

.../sector.php?county=肯特

但是我有一个重写规则

```
RewriteEngine On
RewriteRule ^county/([^/]*)\.html$ /sector.php?county=$1 [L] 
```

但是当我点击链接时，我仍然看到上面的而不是：

```
http://sitename.co.uk/county/Kent 
```

难道我做错了什么？这是 .htaccess 文件的顶部，以防万一格式错误，其他一切正常。：

```
RewriteEngine On
RewriteRule ^county/([^/]*)\.html$ /sector.php?county=$1 [L]
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /customers/6/c/d/sitename.co.uk/httpd.www/...
AuthGroupFile /dev/null 
<Files site.php>
require valid-user 
```

...显然这不是全部，只是他的结构。

即使我手动定向到新链接......县/肯特我得到一个 404

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:30:33.350

Mod_rewrite 不会修改您输出的链接。它只修改从一个 url 到另一个的传入请求。该 url 如何解释取决于您的应用程序。以 href='/county/xxx' 的形式获取链接输出取决于您。此时只有您可以回答如何执行此操作，因为这取决于您的应用程序的编码方式。

尝试转到 /county/Keny 时收到 404 的原因可能是因为您在 .htaccess 文件的匹配规则中包含了 .html。您的第一个示例规则没有它，但您的示例 .htaccess 文件中的规则有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:06:36.280

您需要重写 html 中的链接 url。

# eclipse - Hello World Struts 2 Eclipse 项目 404 错误

> ID：11342048
> 
> 赞同：1
> 
> 时间：2012-07-05T10:05:21.320
> 
> 标签：eclipse, struts2

![在此处输入图像描述](../Images/32d3c3ab4d4e2da4ccbc71d2b68d35d9.png)我用eclipse创建了一个struts2项目，执行时显示消息错误：

HTTP 状态 404 - /StrutsHelloWorld/Login.jsp 类型状态报告消息 /StrutsHelloWorld/Login.jsp 描述 请求的资源 (/StrutsHelloWorld/Login.jsp) 不可用。Apache Tomcat/7.0.26

我已按照分步指南[http://viralpatel.net/blogs/tutorial-create-struts-2-application-eclipse-example/](http://viralpatel.net/blogs/tutorial-create-struts-2-application-eclipse-example/) 进行操作，但我收到了该消息错误。请任何人帮助我！

这是目录结构。网址：localhost:8080/StrutsHelloWorld/Login.jsp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T07:03:27.837

尝试将以下 jar 添加到 web-inf/lib 文件夹和 BuildPath

```
commons-fileupload-x.y.z.jar

commons-io-x.y.z.jar

commons-lang-x.y.jar

commons-logging-x.y.z.jar

commons-logging-api-x.y.jar

freemarker-x.y.z.jar

javassist-.xy.z.GA

ognl-x.y.z.jar

struts2-core-x.y.z.jar

xwork-core.x.y.z.jar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T06:37:49.410

我也按照教程进行操作，（对我而言）缺少的是我必须将 struts 库添加到部署程序集中`(project->properties->'Deployment Assembly')`

`Struts2`我已经配置了一个包含所有的用户库`struts2 jars`，我已经包含了这个要部署到的条目`web-inf/lib`。查看控制台错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T10:02:06.317

从给定的 url，有完整的项目[可供下载](http://viralpatel.net/blogs/download/struts/Struts2_Hello_world.zip)。并且永远不要忘记将 struts2 库包含在`WEB-INF/lib`. 这个对我有用。

# selenium - Selenium 无法在下拉列表中加载动态选项

> ID：11342050
> 
> 赞同：1
> 
> 时间：2012-07-05T10:05:37.810
> 
> 标签：selenium, selenium-rc

我正在测试的网页上的下拉选项取决于为早期文本框和选择提供的值（例如，根据指定的货币和金额，产品的下拉列表将显示适当的值。如果没有值，则提供的下拉列表为空白。 ）。

现在，虽然我已经提供了货币和金额的值，但产品下拉菜单仍然是空白的。它不是根据提供的早期数据获取过滤后的值。我正在使用 Selenium 服务器（2.24.1）并使用 TestNG 在 Eclipse 中用 Java 编写脚本并在 IE8 上进行测试。

检查时，下拉菜单与其他下拉菜单没有什么不同，只是它的选项会根据页面上其他元素的值而变化。Web 应用程序是用 Java（[Wicket 框架](http://wicket.apache.org/)）开发的。

硒代码：

```
selenium.select(ownerBranch, "label=4521 - Branch one");

selenium.select(currency, "label=SEK - Swedish kronor");
Thread.sleep(sleep);

selenium.type(amountSantioned,"100000");
Thread.sleep(sleep);

selenium.click(chooseLoanTermBymatDate);
Thread.sleep(sleep);

timeNow=Calendar.getInstance();
timeNow.add(Calendar.DATE,+360);selenium.type(maturityDate,dateformat.format(timeNow.getTime()));
Thread.sleep(sleep);

selenium.type(amountSantioned,"100000");
Thread.sleep(sleep);

selenium.select(serviceDelChannel, "label=BackOffice");
Thread.sleep(sleep);
selenium.select(product, "label=");
Thread.sleep(sleep*2);
selenium.select(product,"label=LN7292 - Consumer loan for Year2026");
Thread.sleep(sleep); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:04:40.803

我不会尝试重现该问题（如果您可以将我指向具有类似行为的公开可见网站，我可能会对其进行测试），所以我只是在这里猜测：

由于 Selenium RC 是用纯 Javascript 编写的，并且“仅”`change`在从下拉列表中选择值时触发事件，因此 Wicket 可能正在等待其他东西或依赖于完全不同的机制。

你可以尝试的事情：

*   使用 Selenium WebDriver。Selenium RC 已经被弃用了一年多，因为它有严重的技术限制（你可能刚刚碰到一个），现在 WebDriver 解决了这些限制。此外，您永远不必`Thread.sleep()`再次使用（尽管我几乎可以肯定即使在这里也可以摆脱它，主要是）。这个解决方案是最痛苦的，但几乎可以保证运行良好，因为 WebDriver 的行为就像一个真实的用户。
*   调用您正在与之交互的[`selenium.fireEvent()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#fireEvent%28java.lang.String,%20java.lang.String%29)所有元素。[有用的事件](https://developer.mozilla.org/en/DOM/DOM_event_reference/)可能是, , 甚至可能在它们之间。`input``focus``blur``click`
*   在您每次更改下拉列表后调用`selenium.keyPressNative(String.valueOf(KeyEvent.VK_ENTER))`（本机按下）。`Enter`如果更改后的下拉菜单在此之前没有聚焦，您可能需要[`focus()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#focus%28java.lang.String%29)事先进行设置。
*   尝试尽可能接近地模拟用户行为而不是使用 JS 方法的痛苦方式：而不是使用`select()`，尝试下拉元素，然后通过反复[按](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#keyPressNative%28java.lang.String%29)[`focus()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/com/thoughtworks/selenium/Selenium.html#focus%28java.lang.String%29)选择其中一个选项，然后. `Down arrow``Enter`

# javascript - 谷歌地图上的文本框值更改更新标记

> ID：11342052
> 
> 赞同：1
> 
> 时间：2012-07-05T10:05:49.277
> 
> 标签：javascript, google-maps, google-maps-api-3, accordion

我有使用谷歌地图 API v3 的谷歌地图。我所拥有的是手风琴中的谷歌地图，用户可以点击并放置一个标记和纬度和经度的值填充顶部的两个文本框。

这部分在下面的脚本中运行良好。但是，如果用户更改文本框标记中的 lat 或 lon 值需要相应地更改，我现在想要的文本框填充了 lat 和 lon。

```
var map = null;
function initialize() {
var myLatlng = new google.maps.LatLng(25.263327,55.329895);
    var myOptions = {
        zoom: 10,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var marker;

function placeMarker(location) {
    if ( marker ) {
        marker.setPosition(location);
    } else {
        marker = new google.maps.Marker({
        position: location,
        map: map
        });
        }
    }

google.maps.event.addListener(map, 'click', function(event) {
    placeMarker(event.latLng);
    document.getElementById("latFld").value = event.latLng.lat();
    document.getElementById("lngFld").value = event.latLng.lng();
});

  }

$(document).ready(function() {

$("#accordion").bind('accordionchange', function(event, ui) {
    if (ui.newContent.attr('id') == 'tabThree' && !map)
    {
        map = initialize();
    }
    });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:02:42.843

像这样的东西可能会起作用：

```
function updatePosition(){
    var lat = parseFloat(document.getElementById("latFld").value);
    var lon = parseFloat(document.getElementById("lngFld").value);
    if (lat && lon) {
        var newPosition = new google.maps.LatLng(lat,lon);
        placeMarker(newPosition);
    }
} 
```

...在您的 HTML 中

```
<input id ='latFld' onkeyup='updatePosition()'>
<input id ='latFld' onkeyup='updatePosition()'> 
```

您可能想使用 onchange 而不是 onkeyup 来减少它的过度活跃。:-)

# android - 如何获取所有设备的图像路径 Uri 和 Crop

> ID：11342056
> 
> 赞同：2
> 
> 时间：2012-07-05T10:06:13.190
> 
> 标签：android, android-layout, android-intent, android-library

我有我的主要项目，它从某些来源获取图像（返回 Uri）。下一步是按比例裁剪图像（触摸输入）。我最近发现一些手机制造商搞乱了 android 基类，所以：

```
com.android.camera.action.crop 
```

并不总是存在。

所以我找到了一个可以裁剪的库：[https](https://github.com/lvillani/android-cropimage) ://github.com/lvillani/android-cropimage 我已经将该库添加到我的 Eclipse 构建路径和项目库中。

我的问题是，我可以像这样打开图书馆吗：

```
 Intent intent = new Intent("com.android.camera.action.CROP");  
    //intent.setClassName("com.android.camera", "com.android.camera.CropImage"); 
    intent.setDataAndType(uri, "image/*");
    intent.putExtra("crop", "true");
    intent.putExtra("output", Uri); 
    intent.putExtra("outputFormat", "JPEG");
    startActivityForResult(intent, 1); 
```

然后检索裁剪的图像还是我必须做其他额外的事情？

1.  另一个问题：当我将其投放市场时，这也会影响我的应用程序（用户是否需要下载或接受额外库的许可？

我想确保我的应用程序适用于所有内容，那么这是最好的方法吗？或者有没有更好的方法，请解释一下。（同时保持简单，对 Android 开发人员来说相当新！，谢谢！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T16:49:34.367

我安装了库并确保它链接到我的项目并且在构建路径中，然后我只是做了：

打开文件管理器：

```
 Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent,"Select Picture"), PICK_FROM_FILE); 
```

或者，如果您想从相机捕捉

```
 Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra("return-data", true);
        startActivityForResult(intent, GET_IMAGE_FROM_CAMERA); 
```

然后裁剪图像：

```
 Intent intent = new Intent(this, com.android.camera.CropImage.class);
    intent.setData(uri);
    intent.putExtra("return-data", true);
    startActivityForResult(intent, CROP); 
```

我已经在一些设备上对此进行了测试，它工作得很好而且很漂亮。也适用于相机。

# android - 在 google play store 上访问我的应用程序的统计信息

> ID：11342057
> 
> 赞同：6
> 
> 时间：2012-07-05T10:06:16.653
> 
> 标签：android, google-play

我知道有一个 Android 开发者控制台，我可以检查关于我的应用程序的所有统计信息，我现在看到的那些统计信息，都是关于我的应用程序安装、卸载、升级的次数......有什么办法吗我可以知道有多少人看过我的申请..？

以防万一我错过了什么，我写了一封信向 Google Play Team 询问这个问题，支持人员说他们不提供这种分析

再次，Ankit 是正确的 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-27T02:17:16.360

现在您可以在 Google Play Developer Console 中找到它

[![用户获取](../Images/13f547322f68c14ac60f59815f3ff0ca.png)](https://i.stack.imgur.com/oYVEP.png)

[Google Play 开发者控制台的新功能：了解您最有价值的用户来自哪里。](https://plus.google.com/u/0/photos/+AndroidDevelopers/albums/6187357094637098993/6187357092776174738?pid=6187357092776174738&oid=108967384991768947849)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:11:19.613

> > 有什么办法可以知道有多少人看过我的申请..？

如果您的意思是“您想知道您的应用程序在 Play 商店中被查看了多少次！！”

答案是 >> AFAIK**不！**

这个链接可能有用 [谷歌分析](https://developers.google.com/analytics/devguides/collection/android/)

如果您想知道安装后用户在他们的设备上打开您的应用程序的次数！！

**这个[链接](https://stackoverflow.com/questions/5799819/android-application-launch-count)有答案。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-29T07:58:48.217

谷歌整合了 Play 商店和谷歌分析：[http ://analytics.blogspot.co.il/2013/10/google-play-integration.html](http://analytics.blogspot.co.il/2013/10/google-play-integration.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:10:43.920

我不确定我是否理解正确，但您可以使用不同的服务分析用户打开应用的频率、用户的位置等。

android 的一个很好的例子是[Flurry](http://www.flurry.com/ "乱舞")。

# objective-c - 我在情节提要中放置了两个视图，如何将 NSString 从一个视图传递到另一个视图？

> ID：11342062
> 
> 赞同：0
> 
> 时间：2012-07-05T10:06:31.273
> 
> 标签：objective-c

C大师，

有没有办法简单地将对象从一个 ViewController 传递到另一个？我在网上搜索过，但是它们都使用单独的 .nib 文件。有没有办法实现故事板的传递？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:23:13.620

只需在此方法中使用 prepareForSegue:sender: 方法，发送者可以将任何数据传递给目标控制器

```
if ([[segue identifier] isEqualToString:@"CONTROLLER's IDENTIFIER DEFINED IN STORYBOARD"]) {
        (TARGETED CONTROLLER)ImageViewController *ivc = (ImageViewController *)[segue destinationViewController];
 //ANY VARIABLE WANT TO INITIALIZE       
ivc.capturedImg = image;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:23:34.690

事实上，我最近写了一篇关于这个的文章。正如 Aalok 所说，使用`prepareForSegue:sender:`会成功。

如果您愿意，请查看[文章以获取详细说明。](http://www.lwxted.com/blog/2012/pass-objects-between-viewcontrollers-objective-c/)

# python - 用已知积分 Python 进行曲线拟合

> ID：11342064
> 
> 赞同：1
> 
> 时间：2012-07-05T10:06:35.123
> 
> 标签：python, scipy, curve-fitting, integral

我有一些数据是箱内未知曲线的积分。出于您的兴趣，数据是海浪能量，并且箱用于方向，例如 0-15 度。如果可能的话，我想在数据上拟合一条曲线，以保存箱内的积分。我试过用铅笔在记事本上画草图，似乎有可能。有谁知道 Python 中有任何曲线拟合工具可以做到这一点，例如在 scipy 插值子包中？

提前致谢

编辑：

谢谢您的帮助。如果我这样做，看起来我会尝试本文第 4 节中推荐的方法：http: [//journals.ametsoc.org/doi/abs/10.1175/1520-0485%281996%29026%3C0136%3ATIOFFI %3E2.0.CO%3B2](http://journals.ametsoc.org/doi/abs/10.1175/1520-0485%281996%29026%3C0136%3ATIOFFI%3E2.0.CO%3B2)。理论上，它基本上使用矩阵从每个波段之间的已知积分中制作一些“假”数据。绘制后，此数据会生成一个保留积分的插值线图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:51:55.020

一种可能性：计算 bin 体积的累积总和 (np.cumsum)，对其进行插值样条拟合，然后求导数得到曲线。

scipy splines 有计算导数的方法。

唯一的限制是，如果它与您的情况相关，则通过累积和的样条曲线可能不是单调的，并且导数可能在某些间隔内为负数。

我想关于平滑直方图的文献着眼于对积分/箱的体积的类似限制，但我没有任何参考资料准备好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:50:36.587

**1/ fit2直方图**

您的问题是关于拟合直方图。我刚刚浏览了一些用于多变量模式分析的 Python 包的文档，PyMVPA，并提出了一些用于直方图拟合的函数。一个例子在这里：[PyMVPA](http://www.pymvpa.org/generated/mvpa2.misc.fx.fit2histogram.html?highlight=fit2histogram#mvpa2.misc.fx.fit2histogram)。

但是，我猜这组可用的发行版仅限于著名的发行版。

**2/积分计算**

如前所述，下一个解决方案是近似整数值，并将模型拟合到结果数据集。您要么知道导数的显式表达式，要么使用计算推导：有限差分，分析方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T12:32:16.430

这有点超出我的管辖范围，但我可以建议看看[SciKits](http://scikits.appspot.com/scikits)看看是否有任何可能有用的东西。其他要浏览的包是[pandas](http://pandas.pydata.org/)和[StatsModels](http://statsmodels.sourceforge.net/)。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:55:18.550

如果您有一条曲线`f(x)`是另一条曲线积分的近似值`g(x)`，即`f=int(g,x)`两者通过[微积分基本定理](http://en.wikipedia.org/wiki/Fundamental_theorem_of_calculus)相关，也就是说，您的原始函数是第一条曲线的导数`g = df/dx`。因此，您可以使用[`numpy.diff`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)或任何[更高阶的方法](http://en.wikipedia.org/wiki/Numerical_differentiation)来近似`df/dx`以获得原始曲线的估计值。

# node.js - Mongoose 中的嵌套数组

> ID：11342073
> 
> 赞同：8
> 
> 时间：2012-07-05T10:07:06.760
> 
> 标签：node.js, mongodb, mongoose

在我正在处理的集合中，一个文档如下所示：

```
{
    name: 'Myname',
    other: 'other',
    stuff: [
        ['something', 12, 4, 'somethingelse'],
        ['morestuff', 2, 4, 8],
        ['finally', 12, 'again', 58],

    ]
} 
```

我写了这个 Mongoose 模式来访问它：

```
var MyDocSchema = new Schema({
    name: String,
    other: String,
    stuff: [],
}); 
```

当我查询文档时，一切正常，控制台中显示的输出是正确的。但是，当我尝试执行 console.log(myDoc.stuff) 时，我得到了以下信息：

```
['something', 12, 4, 'somethingelse', 'morestuff', 2, 4, 8, 'finally', 12, 'again', 58] 
```

代替

```
[
    ['something', 12, 4, 'somethingelse'],
    ['morestuff', 2, 4, 8],
    ['finally', 12, 'again', 58],

] 
```

我究竟做错了什么？感谢您的帮助！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T14:08:54.897

## 免责声明：此回复已过时，2012 年！这可能不是最准确的。

### 来自猫鼬文档。

*[http://mongoosejs.com/docs/schematypes.html](http://mongoosejs.com/docs/schematypes.html)：向下滚动到数组部分：*

> 注意：指定一个空数组等价于`[Mixed]`. 以下所有创建的数组`Mixed`。

有关这意味着什么的详细信息，请参见 Array 部分正上方的 Mixed 部分。

### 这是你需要做的。

为嵌入文档定义一个模式：

```
var Stuff = new Schema({
  name: String,
  value1: Number,
  ...
}); 
```

使用它而不是空数组`[]`：

```
var MyDocSchema = new Schema({
  name: String,
  other: String,
  stuff: [Stuff],
}); 
```

# php - WordPress 简单的购物车

> ID：11342074
> 
> 赞同：0
> 
> 时间：2012-07-05T10:07:08.830
> 
> 标签：php, wordpress

我需要有或没有任何插件的 WordPress 购物车功能。当注册用户点击普通帖子上的添加到购物车按钮时，它需要进入购物车。结帐功能不应该有运输和支付网关，因为用户单击结帐按钮他应该收到邮件以确认订单，并带有他购买的帖子的永久链接，同时帖子的永久链接必须保存在数据库中，可以供用户稍后查看。管理员应收到购买订单的邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:10:01.427

也许你可以使用[这个插件](http://wordpress.org/extend/plugins/wp-e-commerce/)。它是一个 wordpress 电子商务插件，应该处理你提到的所有事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:20:58.290

Salman，尝试[WP e-Commerce](http://wordpress.org/extend/plugins/wp-e-commerce/)我最喜欢的 os 插件之一

更多[http://sixrevisions.com/wordpress/top-5-excellent-e-commerce-plugins-for-wordpress/](http://sixrevisions.com/wordpress/top-5-excellent-e-commerce-plugins-for-wordpress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:20:07.850

[请在此处](https://wordpress.stackexchange.com/questions/16576/shopping-cart-without-checkout)查看我对类似问题的回答。

此外 - [WP Order Cart](http://wordpress.org/extend/plugins/wp-order-cart/)插件不会将订单保存到数据库，它只会将订单电子邮件发送给买家和卖家 - 此功能仍在开发中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T12:24:04.457

如果你真的需要一个简单的购物车而不是 Wordpress 集成插件，你可以选择 OpenCart，它易于管理和用户友好的分析等等......

# java - java多线程应用程序：thread.sleep（100）几乎永远

> ID：11342075
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:10.610
> 
> 标签：java, producer-consumer, java.util.concurrent, thread-sleep, email-threading

我正在尝试修复一个向客户发送大量电子邮件的应用程序。发送由多线程 Java 应用程序（在生产者-消费者模型上）完成，生产者从数据库中调用消息列表，消费者调用 Python 脚本来发送邮件。

从一天到另一天，我的老板告诉我，程序停止工作 - 我不知道发生了什么，也许发生了一些变化，但系统管理员一直说什么都没发生，程序昨天还在工作，然后突然变慢了。 .. 现在它每小时只发送 2-3 条消息，而不是之前的 1000 条。

开发人员不再可用，所以我必须自己修复它。

我清理了数据库，它只包含关于“过去”的数据，它不需要，而且很大...... 6GB的数据，7M行，非常慢。但问题依然存在。

现在我正在使用 java 应用程序登录屏幕，我看到这些行：

```
try
    {
      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" is sleeping for "+consumerSleepTime+" ms ::");
      Thread.sleep(consumerSleepTime);
      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" sleeptime over in try block ::");
    }
    catch (InterruptedException e)
    {
      e.printStackTrace();
      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" was interrupted ::");
      Thread.currentThread().interrupt();
      break main_while_loop;
    } 
```

“停留”在睡眠中，我看到：

> 11:24:15:: consumer_thread_1 正在休眠 100 毫秒 ::

没有其他事情发生。没有“睡眠时间结束”，没有堆栈数据，看起来线程睡眠需要永远......但是，如果我保持进程运行几次，随机时间后，线程继续，然后再次睡眠......几个小时。

有任何想法吗？

这里有一些文件，也许需要它们来理解整个结构......

## 运行java

```
#!/bin/sh
java -cp /usr/share/java/mysql-connector-java.jar:. newthread 
```

## 新线程.java

```
import java.util.ArrayList;
import java.util.Random;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;
import java.sql.SQLException;
import java.sql.Driver;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import java.io.Closeable;
import java.io.IOException;

class ReentrantLockTest
{
  int maxSize = 100;
  ArrayList boundedBuffer = new ArrayList( maxSize );

  ReentrantLock lock = new ReentrantLock(false);
  Condition telire_var = lock.newCondition(),
            uresre_var = lock.newCondition();

  volatile boolean shutdown = false;
  long producerSleepTime = 5000;
  long consumerSleepTime = 100;

  long mainDriverWaitTime = 1000;

  int totalProduerThreads = 1;

  int totalConsumerThreads = 2;
  long criticalSectionDelay = 0;
  int currentIndex = -1;
  String sqlhost = "localhost";
  String sqluser = "user";
  String sqlpassword = "pass";
  String sqldb = "db";
  String mysqlUrl = "";

  public ReentrantLockTest()
  {
    System.out.println(sqluser);
    java.text.DateFormat shortTime = java.text.DateFormat.getTimeInstance(java.text.DateFormat.MEDIUM);

    ArrayList<Thread> threads = new ArrayList<Thread>();
    ThreadGroup tg = new ThreadGroup("ReentrantLockTest Thread Group");
    // get sql
    mysqlUrl = "jdbc:mysql://"+ sqlhost +"/"+ sqldb +"?autoReconnect=true";

    try
    {
      Class.forName("com.mysql.jdbc.Driver").newInstance();
    }
    catch (Exception e)
    {
      System.out.println(e);
      return;
    }

    for (int i = 1; i<=totalProduerThreads; i++)
    {
      threads.add( new Thread( tg , new ReentrantLockTest.Producer() , "producer_thread_"+i) );
    }
    for (int i = 1; i<=totalConsumerThreads; i++)
    {
      threads.add( new Thread( tg , new ReentrantLockTest.Consumer() , "consumer_thread_"+i) );
    }
    for (Thread t: threads)
      t.start();

    try
    {
      while (true)
      {
        for (Thread t: threads)
          t.resume();
          Thread.sleep(mainDriverWaitTime);
      }
    }
    catch (InterruptedException e)
    {
      e.printStackTrace();
    }
    finally
    {
      shutdown = true;
      System.out.println(shortTime.format(new java.util.Date()) + ":: ReentrantLockTest - setting shutdown to false ::");
    }

    System.out.println(":: ReentrantLockTest - signalling interrupt and waiting for "+tg.activeCount()+" threads to die ::");

    for (Thread t: threads)
    {
      System.out.println(shortTime.format(new java.util.Date()) + ":: Interrupting "+t.getName()+" ::");
      try
      {
        t.interrupt();
      }
      catch (Exception e)
      {
        e.printStackTrace();
      }
    }
    for (Thread t: threads)
    {
      try
      {
        StringBuilder sb = new StringBuilder( t.getName() );
        System.out.println(shortTime.format(new java.util.Date()) + ":: Waiting for "+sb+" to die ::");
        t.join();
        System.out.println(shortTime.format(new java.util.Date()) + ":: "+sb+" is dead ::" );
      }
      catch (InterruptedException e)
      {
        e.printStackTrace();
      }
    }
  }

  public class Consumer implements Runnable
  {
    java.text.DateFormat shortTime = java.text.DateFormat.getTimeInstance(java.text.DateFormat.MEDIUM);
    private void close(Closeable c)
    {
      if (c != null)
      {
        try
        {
          c.close();
        }
        catch (IOException e)
        {
          // ignored
        }
      }
    }

    public void run()
    {
      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" has been started ::");
      main_while_loop: while( shutdown == false && !Thread.currentThread().isInterrupted() )
      {
        try
        {
          lock.lock();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" acquired the lock ::");
          Thread.sleep(criticalSectionDelay);

          if (currentIndex == -1)
          {
            uresre_var.signal();
            System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" signalling waiting_on_full_buffer ::");
          }

          while(currentIndex == -1)
          {
            System.out.println(shortTime.format(new java.util.Date()) + ":: buffer is empty - "+Thread.currentThread().getName()+" is going to wait ::");
            telire_var.await();
          }//while condition waiting_on_empty_buffer

          // sendmail
          String mail_id = boundedBuffer.remove(currentIndex).toString();
          currentIndex--;
          Process proc = null;

          System.out.println(shortTime.format(new java.util.Date()) + ":: buffer size: "+ currentIndex);

          lock.unlock();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" released the lock ::");

          try
          {
            System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName() +" starts python ("+ mail_id +")");

        //this randomwaiting on sending is not needed
        /*Random generator = new Random();
            int randomWait = generator.nextInt(1000) + 100;
            Thread.sleep(randomWait);
            System.out.println(" => "+ randomWait);*/

            proc = Runtime.getRuntime().exec("python ./new_mail.py "+ mail_id);
            proc.waitFor();
            System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName() +" ends python");
          }
          catch (Exception e)
          {
            e.printStackTrace();
          }
          finally
          {
            if (proc != null)
            {
              close(proc.getOutputStream());
              close(proc.getInputStream());
              close(proc.getErrorStream());
              proc.destroy();
              System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName() +" close python proc");
            }
          }
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" was interrupted ::");
          Thread.currentThread().interrupt();
          break main_while_loop;
        }
        try
        {
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" is sleeping for "+consumerSleepTime+" ms ::");
          Thread.sleep(consumerSleepTime);
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" sleeptime over in try block ::");
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" was interrupted ::");
          Thread.currentThread().interrupt();
          break main_while_loop;
        }
        System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" sleeptime over ::");
      }//end while: main_while_loop

      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" has been shutdown ::");
    }//end run
  }

  public class Producer implements Runnable
  {
    java.text.DateFormat shortTime = java.text.DateFormat.getTimeInstance(java.text.DateFormat.MEDIUM);
    public void run()
    {
      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" has been started ::");
      main_while_loop: while( shutdown == false && !Thread.currentThread().isInterrupted() )
      {
        try
        {
          lock.lock();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" acquired the lock ::");

          while (currentIndex != -1)
          {
            System.out.println(shortTime.format(new java.util.Date()) + ":: a bufferben van valamennyi - "+Thread.currentThread().getName()+" varakozik ::");
            uresre_var.await();
          }//while condition waiting_on_full_buffer

          Thread.sleep(criticalSectionDelay);

          Connection con = null;
          Statement st = null;
          ResultSet rs = null;
          try
          {
            con = DriverManager.getConnection(mysqlUrl, sqluser, sqlpassword);
            st = con.createStatement();
            rs = st.executeQuery("SELECT mail_id FROM mail_queue WHERE status = 0 OR (status BETWEEN 2 AND 100 AND proof_counter <= 3 AND UNIX_TIMESTAMP() - proof_stamp > 15*60 ) ORDER BY status, mail_id DESC LIMIT "+ maxSize);

            boundedBuffer = new ArrayList(maxSize);
            currentIndex = -1;

            while(rs.next())
            {
              String mail_id = Integer.toString(rs.getInt(1));
              boundedBuffer.add(mail_id);
              currentIndex++;
            }
            con.close();
          }
          catch (Exception err)
          {
            System.out.println(err);
            break;
          }

          telire_var.signal();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" signalling waiting_on_empty_buffer ::");
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" was interrupted ::");
          Thread.currentThread().interrupt();
          break main_while_loop;
        }
        finally
        {
          lock.unlock();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" released the lock ::");
        }

        try
        {
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" is sleeping for "+producerSleepTime+" ms ::");
          Thread.sleep(producerSleepTime);
        }
        catch (InterruptedException e)
        {
          e.printStackTrace();
          System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" was interrupted ::");
          Thread.currentThread().interrupt();
          break main_while_loop;
        }
      }

      System.out.println(shortTime.format(new java.util.Date()) + ":: "+Thread.currentThread().getName()+" has been shutdown ::");
    }
  }
}

class newthread
{
  public static void main(String[] args)
  {
    new ReentrantLockTest();
  }
} 
```

任何帮助表示赞赏！

编辑：

这是一个线程转储：

```
2012-07-05 12:15:06
Full thread dump OpenJDK 64-Bit Server VM (14.0-b16 mixed mode):

"SIGHUP handler" daemon prio=10 tid=0x00007f7bb0001000 nid=0x838 runnable [0x00007f7beb205000]
   java.lang.Thread.State: RUNNABLE
        at java.lang.Terminator$1.handle(Terminator.java:52)
        at sun.misc.Signal$1.run(Signal.java:212)
        at java.lang.Thread.run(Thread.java:636)

"consumer_thread_2" prio=10 tid=0x00007f7d940f4800 nid=0x68c runnable [0x00007f7beb51b000]
   java.lang.Thread.State: RUNNABLE
        at java.io.PrintStream.write(PrintStream.java:446)
        - locked <0x00007f7d137703b0> (a java.io.PrintStream)
        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:220)
        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:290)
        at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:103)
        - locked <0x00007f7d137704a8> (a java.io.OutputStreamWriter)
        at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:185)
        at java.io.PrintStream.write(PrintStream.java:494)
        - locked <0x00007f7d137703b0> (a java.io.PrintStream)
        at java.io.PrintStream.print(PrintStream.java:636)
        at java.io.PrintStream.println(PrintStream.java:773)
        - locked <0x00007f7d137703b0> (a java.io.PrintStream)
        at ReentrantLockTest$Consumer.run(newthread.java:151)
        at java.lang.Thread.run(Thread.java:636)

"consumer_thread_1" prio=10 tid=0x00007f7d940f4000 nid=0x68b waiting on condition [0x00007f7beb61c000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00007f7d137acee0> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:838)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:871)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1201)
        at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
        at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
        at ReentrantLockTest$Consumer.run(newthread.java:150)
        at java.lang.Thread.run(Thread.java:636)

"producer_thread_1" prio=10 tid=0x00007f7d940e5000 nid=0x68a waiting on condition [0x00007f7beb71d000]
   java.lang.Thread.State: WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x00007f7d137acf38> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
        at ReentrantLockTest$Producer.run(newthread.java:250)
        at java.lang.Thread.run(Thread.java:636)

"Low Memory Detector" daemon prio=10 tid=0x00007f7d940af800 nid=0x688 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"CompilerThread1" daemon prio=10 tid=0x00007f7d940ac800 nid=0x687 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"CompilerThread0" daemon prio=10 tid=0x00007f7d940aa800 nid=0x686 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007f7d940a8800 nid=0x685 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x00007f7d94087800 nid=0x683 in Object.wait() [0x00007f7bebd36000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00007f7d13761210> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
        - locked <0x00007f7d13761210> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0x00007f7d94085800 nid=0x682 in Object.wait() [0x00007f7bebe37000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00007f7d13761078> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:502)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
        - locked <0x00007f7d13761078> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00007f7d94007000 nid=0x673 sleeping[0x00007f7d99285000]
   java.lang.Thread.State: TIMED_WAITING (sleeping)
        at java.lang.Thread.sleep(Native Method)
        at ReentrantLockTest.<init>(newthread.java:81)
        at newthread.main(newthread.java:320)

"VM Thread" prio=10 tid=0x00007f7d94080800 nid=0x681 runnable

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007f7d94011800 nid=0x674 runnable

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007f7d94013000 nid=0x675 runnable

"GC task thread#2 (ParallelGC)" prio=10 tid=0x00007f7d94015000 nid=0x676 runnable

"GC task thread#3 (ParallelGC)" prio=10 tid=0x00007f7d94017000 nid=0x677 runnable

"GC task thread#4 (ParallelGC)" prio=10 tid=0x00007f7d94018800 nid=0x678 runnable

"GC task thread#5 (ParallelGC)" prio=10 tid=0x00007f7d9401a800 nid=0x679 runnable

"GC task thread#6 (ParallelGC)" prio=10 tid=0x00007f7d9401c800 nid=0x67a runnable

"GC task thread#7 (ParallelGC)" prio=10 tid=0x00007f7d9401e000 nid=0x67b runnable

"GC task thread#8 (ParallelGC)" prio=10 tid=0x00007f7d94020000 nid=0x67c runnable

"GC task thread#9 (ParallelGC)" prio=10 tid=0x00007f7d94022000 nid=0x67d runnable

"GC task thread#10 (ParallelGC)" prio=10 tid=0x00007f7d94023800 nid=0x67e runnable

"GC task thread#11 (ParallelGC)" prio=10 tid=0x00007f7d94025800 nid=0x67f runnable

"GC task thread#12 (ParallelGC)" prio=10 tid=0x00007f7d94027800 nid=0x680 runnable

"VM Periodic Task Thread" prio=10 tid=0x00007f7d940b2000 nid=0x689 waiting on condition

JNI global references: 1000

Heap
12:15:06:: consumer_thread_2 acquired the lock :: PSYoungGen      total 112448K, used 17376K [0x00007f7d13760000, 0x00007f7d1b4e0000, 0x00007f7d91000000)
  eden space 96384K, 18% used [0x00007f7d13760000,0x00007f7d148581c0,0x00007f7d19580000)
  from space 16064K, 0% used [0x00007f7d1a530000,0x00007f7d1a530000,0x00007f7d1b4e0000)
  to   space 16064K, 0% used
 [0x00007f7d19580000,0x00007f7d19580000,0x00007f7d1a530000)
 PSOldGen        total 257152K, used 0K [0x00007f7c18600000, 0x00007f7c28120000, 0x00007f7d13760000)
  object space 257152K, 0% used [0x00007f7c18600000,0x00007f7c18600000,0x00007f7c28120000)
 PSPermGen       total 21248K, used 7359K [0x00007f7c0de00000, 0x00007f7c0f2c0000, 0x00007f7c18600000)
  object space 21248K, 34% used [0x00007f7c0de00000,0x00007f7c0e52fe38,0x00007f7c0f2c0000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:54:44.157

（从评论中复制）

这种行为是从上周末开始的吗？这可能与许多人遇到的闰秒问题有关吗？（症状：Java 进程的 CPU 使用率非常高，这可能会导致线程睡眠时间比正常时间长得多）

* * *

如果这确实是问题，一种解决方案是简单地重新启动系统。另一种解决方案是运行：

```
date -s "`date`" 
```

正如[本文](http://artipc10.vub.ac.be/wordpress/2012/07/01/leap-second-causing-ksoftirqd-and-java-to-use-lots-of-cpu-time/)所建议的那样。

# android - View.post() 以及 Runnables 执行时

> ID：11342080
> 
> 赞同：2
> 
> 时间：2012-07-05T10:07:24.313
> 
> 标签：android

我最初的问题是需要知道我的根的高度和宽度，`View`以便我可以进行编程布局更改。出于我的目的，我不一定需要在`onCreate()`;期间确定此信息。对我来说，在 root 的布局完成后以编程方式添加我的 child 就足够了`View`，因此我很乐意`onWindowFocusChanged()`用作挂钩来确定何时调用 root并`View`返回有效结果。`getWidth()``getHeight()`

但是，我看到很多人问如何`View`在`onCreate()`. 我猜人们想这样做是为了更好的用户体验——也许是为了让用户看不到分阶段构建的布局（如果有人能澄清原因，我会很感激）。现在，我通常看到的答案，例如[这里](https://stackoverflow.com/questions/3602026/linearlayout-height-in-oncreate-is-0)的答案，是将 a 发布到内`Runnable`的根目录。在里面我们执行，等等。这样做的原因显然是因为发布到 a 的对象是在具有布局和/或附加到窗口时执行的。`View``onCreate()``Runnable``getWidth()``Runnable``View``View`

这让我想到了我的问题。在 API 文档中`View`，它似乎没有描述这种行为。那么，谁能告诉我它是在哪里定义和记录的？或者，是检查源头的问题吗？它是一个绝对且严格定义的功能，`Runnables`将留在 a`View`的队列中，并且仅在布局过程之后的某个时间点处理吗？

**进一步澄清：**在阅读 Kerry 的答案并仔细考虑后，我的基本问题可以澄清如下：在[这里](https://stackoverflow.com/questions/3602026/linearlayout-height-in-oncreate-is-0)给出的答案以及这个[CodeProject 条目](http://www.codeproject.com/Tips/313848/Get-actual-screen-size-for-the-application-layout)中，我知道我们解决了根`View's`维度不存在的问题期间可`onCreate()`通过发布`Runnable`到`View`。正如 Kerry 指出的那样，保证是`Runnable`在执行之前不能执行此消息`onCreate()`。我知道布局发生在 之后的某个时间点`onCreate`，但我现在仍然无法理解为什么在' 的尺寸已知`Runnable`时应该执行此操作。`View`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:36:47.243

我查看了[View.post(Runnable)](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)方法，在我看来，通过调用该方法，您只是在向 UI 线程队列添加一条消息。唯一要“保证”的是 Runnable 将在调用 post(Runnable) 的方法完成后的某个时间执行。这假设您正在从 UI 线程调用 post(Runnable) 但正如文档所说：

> 仅当此视图附加到窗口时，才能从 UI 线程外部调用此方法。

我认为要确保您的 Root 视图和 Child 视图都具有大小，您需要从子 onSizeChanged() 方法调用 post(Runnable) 因为如果孩子有大小，我认为它遵循 Parent 即 Root 视图因此也必须有大小。

抱歉，如果这是一个有点漫不经心的答案。我有点理解您想要实现的目标，但不是 100% 确定。如果你想让我澄清任何事情，请告诉我。

就我个人而言，每当我需要 View 的大小时，我都会在 onSizeChanged() 中执行所有操作，我认为这是“正确”的做法，并且一直有效。

# ios - 如何为 Retina 设置 Xcode 项目？

> ID：11342081
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:27.630
> 
> 标签：ios, xcode, ipad, resolution, retina-display

我正在尝试使用视网膜分辨率构建我的应用程序，`(2048x1536)`但使用：

```
NSLog(@"resolution from xcode %f %f", [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height); 
```

我总是得到`1024x768`解决。任何想法如何设置视网膜分辨率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:38:26.933

你得到的是以点为单位的价值，而不是像素。来自[Apple 的文档](http://developer.apple.com/library/ios/#documentation/2ddrawing/conceptual/drawingprintingios/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW7)：

> **点与像素**
> 
> 在 iOS 中，您在绘图代码中指定的坐标和底层设备的像素是有区别的。当使用 Quartz、UIKit 和 Core Animation 等原生绘图技术时，您可以使用逻辑坐标空间指定坐标值，该空间以点为单位测量距离。该逻辑坐标系与系统框架用来管理屏幕像素的设备坐标空间分离。系统自动将逻辑坐标空间中的点映射到设备坐标空间中的像素，但这种映射并不总是一对一的。这种行为导致了一个重要的事实，你应该永远记住：
> 
> **一点不一定对应屏幕上的一个像素。**
> 
> 使用点（和逻辑坐标系）的目的是提供与设备无关的一致大小的输出。点的实际大小无关紧要。点的目标是提供一个相对一致的比例，您可以在代码中使用它来指定视图和渲染内容的大小和位置。点如何实际映射到像素是系统框架处理的一个细节。例如，在具有高分辨率屏幕的设备上，一个点宽的线条实际上可能会在屏幕上产生一个两个像素宽的线条。结果是，如果您在两台相似的设备上绘制相同的内容，而其中只有一台具有高分辨率屏幕，那么两台设备上的内容大小似乎大致相同。

# ruby-on-rails-3 - ruby on rails 表单并将其参数传递给控制器

> ID：11342083
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:33.017
> 
> 标签：ruby-on-rails-3, view, controller, parameter-passing

当视图将参数传递给控制器​​时，控制器以某种方式对所有争论都为零。

谁能解决这个问题？？谢谢！

而且我没有名为“消息”的模型

控制器/messages_controller.rb

```
 def deliver

   recipient = User.find_by_username(params[:recipient])
   subject = params[:subject]
   body = params[:body]

   current_user.send_message(recipient, body, subject)
    redirect_to :controller => 'messages', :action => 'received' 
    flash[:notice] = "message sent!"

  end 
```

意见/消息/new.html.erb

```
<%=form_for :messages, url: url_for( :controller => :messages, :action => :deliver ) do |f| %>
    <div class="field">
      <%= f.label :subject %><br />
      <%= f.text_field :subject %>
    </div> 

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div> 

  <div class="actions">
    <%= f.submit %>

<% end %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T10:23:24.723

检查您的源 HTML 以更好地了解 FormHelpers 的作用。

使用`form_for` `f.text_field`将生成以下格式的名称属性：

```
messages[subject] 
```

因此，您的参数将采用以下格式：

```
params[:messages][:subject] 
```

您还可以使用`<%= debug params %>`来检查参数中的内容，这非常有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:46:27.587

`datas = params[:messages]`
您可以使用这些值以数组形式获取参数值。所以你可以获取数组`datas`如果你想要单独的数据然后使用 检查运行以下代码查看 这给出了主题的值。
`subject = datas[:subject]
body = datas[:body]`

`<%= subject %>`

# php - 检查所选值是否在数组中最后一个

> ID：11342084
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:36.247
> 
> 标签：php

我有这样的功能：

```
function ypg_delete_img($id, $img)
        {
            $q = $this->ypg_get_one($id);

            $imgs = explode(',', $q->image);

            if(count($imgs) > 1) :
                $z = ",";
            else :
                $z = "";
                $data['image'] = 'avatar_mali_oglas.png';
                $this->db->where('id_yellow_pages', $id);
                $this->db->update('yellow_pages', $data);
            endif;
            if($imgs[0] != 'avatar_mali_oglas.png') :
                $query  = "UPDATE `yellow_pages` ";
                $query .= "SET `image` = REPLACE(`image`,'". $img . $z ."', '')
                           WHERE `id_yellow_pages` = $id "; 
                $this->global_functions->delete_img('zute_strane', $img);
            $this->db->query($query);
            endif; 
        } 
```

我需要检查**$img是否是****$imgs**数组中的最后一个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:09:44.340

利用[`end()`](http://php.net/manual/en/function.end.php)

```
if ($img == end($imgs)) {
   // $img is the last element of the array
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:10:33.027

检查 end() ： http: [//php.net/manual/fr/function.end.php](http://php.net/manual/fr/function.end.php)

喜欢： if($img == end($imgs))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:12:43.000

Something like this should work:

```
<?php
  $lastitem = array_pop($imgs);
  if ($img == $lastitem) {
    // is last image
  }
?> 
```

[array_pop](http://php.net/manual/en/function.array-pop.php) returns the last element of an array, after that you just need to compare the two values.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:10:24.170

请参考下面的代码。

```
if($imgs[count($imgs) -1] == $img)
{
   // $img is the last image
} 
```

希望这会有所帮助:)

# nginx - Vagrant 转发端口 8080 到 80

> ID：11342085
> 
> 赞同：2
> 
> 时间：2012-07-05T10:07:38.387
> 
> 标签：nginx, vagrant

所以我有一个 NGINX 服务器在 Vagrant 盒子上使用 uwsgi 监听端口 8080。config.vm.forward_port 8080, 80 对我不起作用。我知道建议在高于 2000 的端口上转发，但我需要 80。这有什么问题吗？

我正在使用 vagrant 进行开发，但我需要使用我的域名在端口 80 上从外部进行一些测试。感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T17:11:41.883

当尝试将端口转发到小于 1025 vagrant 时，我会收到您可能错过的以下消息：

> 您正在尝试转发到特权端口（端口 <= 1024）。大多数操作系统将此限制为仅特权进程（通常以管理用户身份运行的进程）。这是一个警告，以防端口转发不起作用。如果出现任何问题，请尝试使用高于 1024 的端口。

我正在使用端口转发到具有以下配置的同一端口：

```
config.vm.forward_port 80, 80 
```

然后运行`vagrant up`，但尝试时`curl localhost`，它无法连接到主机。但是当以 sudo user 身份运行 vagrant 时`sudo vagrant up`，我能够从我的主机访问该端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:27:25.037

端口 80 是否可用，即如果您运行 netstat -an | grep 80，它是否在列表中显示为已被另一个进程使用？uwsgi 是否已添加到 nginx 的模块列表中（并且您是否在其上运行过 make/make install ）？您是否尝试过检查是否需要使用更高的权限（也许尝试以 sudo 运行）。

# iphone - iOS：获取屏幕截图

> ID：11342086
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:38.990
> 
> 标签：iphone, objective-c, ios, ipad

伙计们，我正在寻找通过**CoreGraphics 以外**的方式检索应用程序屏幕截图的方法。

我知道苹果建议在`CoreGraphics` [这里使用](https://developer.apple.com/library/ios/#qa/qa1703/_index.html#//apple_ref/doc/uid/DTS40010193)

`UIView`但是我在使用`UIBezierPath`我在[这里](https://stackoverflow.com/questions/11340079/uibezierpath-incorrect-retrieval-of-view-screenshot)描述的使用时这样做有一个问题。

那么有没有人知道通过其他方式获取应用程序屏幕截图的任何替代方法`CoreGraphics`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:32:36.567

这是唯一的方法，但如果真的不能尝试引导用户同时按下主页和电源按钮。

# c# - 在 MySQL 上使用 SELECT 在 DataGridView 中检索数据

> ID：11342087
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:43.823
> 
> 标签：c#, mysql, visual-studio-2008, datagridview

我有一个 Windows 窗体应用程序。我必须使用“Like”运算符从 MySQL 数据库中搜索数据。我已经使用占位符（@test，见下面的代码）作为搜索词，但它没有发生。

简单来说，我有一个名为 txtSearch 的 TestBox，我可以在其中部分或全部输入学生的姓名。我需要在 DataGrid 上检索与搜索条件匹配的所有条目。

请检查我下面的代码，让我知道我错在哪里（下面删除了 Conn 字符串）：

```
try
{
dataGridView1.Visible = true;
BindingSource bs = new BindingSource();
DataTable newadm = new DataTable();
String term = txtSearch.Text;
string db = ----Connection String goes here----

bs.DataSource = newadm;
this.dataGridView1.DataSource = bs;

MySqlConnection conn = new MySqlConnection(db);
conn.Open();

string s = "select * from newadm where firstname like '%@term%' OR lastname like '%@term%'";
MySqlCommand cmd = new MySqlCommand(s, conn);
cmd.CommandType = CommandType.Text;
cmd.Parameters.Add("@term", MySqlDbType.VarChar).Value = txtSearch.Text;

MySqlDataAdapter da = new MySqlDataAdapter();
da.SelectCommand = new MySqlCommand(s, conn);

da.Fill(newadm);
da.Update(newadm);
conn.Close();
}
catch (Exception ex)
{
MessageBox.Show(ex.Message.ToString());
} 
```

使用此代码（以及它的许多变体），我在 DataGrid 中没有得到任何结果。如果我删除“@Term”占位符并替换确切的术语，它就可以工作。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:16:48.010

尝试，

```
string s = "select * from newadm where firstname like @term OR lastname like @term";
MySqlCommand cmd = new MySqlCommand(s, conn);
cmd.CommandType = CommandType.Text;
cmd.Parameters.Add("@term", MySqlDbType.VarChar,40).Value = "%" + txtSearch.Text + "%"; 
```

# c# - 自定义 GridView 控件中的 TemplateControl 复选框事件

> ID：11342088
> 
> 赞同：0
> 
> 时间：2012-07-05T10:07:46.670
> 
> 标签：c#, asp.net, events, gridview, custom-controls

我有一个自定义的 GridView 控件，我从数据库中获取数据以填充控件。在页面上，我还创建了一个 HeaderTemplate 复选框控件和一个 ItemTemplate 复选框控件：

```
<nm:ContactGridViewControl runat="server" ID="grdContacts">
        <Columns>
            <asp:TemplateField>
                <HeaderTemplate>
                    <asp:CheckBox runat="server" AutoPostBack="true" />
                </HeaderTemplate>
                <ItemTemplate>
                    <asp:CheckBox runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </nm:ContactGridViewControl> 
```

我在 OnInit 事件中按如下方式填充 GridView。我选择不在每次回发时重新填充，因为它会减慢应用程序的速度。

```
protected override void OnInit(EventArgs e)
    {
        this.RowDataBound += new GridViewRowEventHandler(ContactGridViewControl_RowDataBound);
        this.RowCreated += new GridViewRowEventHandler(ContactGridViewControl_RowCreated);

        if (!Page.IsPostBack)
        {
            List<EnquiryItem> contactList = new List<EnquiryItem>();
            DataTable list = new DataTable();

            if (SessionManager.LoginState != null)
            {
                contactList = SiteDataLayerHandler.GetContactList(SessionManager.LoginState.UserID);
            }

            if (contactList != null)
            {
                list.Columns.Add("LeadID");
                list.Columns.Add("Name");
                list.Columns.Add("Email Address");

                foreach (EnquiryItem item in contactList)
                {
                    DataRow row = list.NewRow();

                    row["LeadID"] = item.LeadID;
                    row["Name"] = string.Format("{0} {1}", item.FirstName.ToCapitalize(), item.LastName.ToCapitalize());
                    row["Email Address"] = item.EmailAddress;

                    list.Rows.Add(row);

                }

                this.DataSource = list;
                this.DataBind();
            }
        }

        base.OnInit(e);
    } 
```

为了将与控件关联的所有代码保留在一个地方，我在“OnRowDataBound”上动态添加了一个“CheckedChanged”事件，这仅适用于 HeaderTemplate 中的复选框。原因是我可以将此复选框用作“选择/取消选择所有行”：

```
protected void ContactGridViewControl_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex == -1) // Check if row is Header row
        {
            CheckBox chk = e.Row.GetAllControls().OfType<CheckBox>().FirstOrDefault();

            if (chk != null)
            {
                chk.CheckedChanged += new EventHandler(chk_CheckedChanged);
            }
        }
    } 
```

然后我在同一页面上有事件代码，如下所示：

```
protected void chk_CheckedChanged(object sender, EventArgs e)
    {
        bool isChecked = ((CheckBox)sender).Checked;

        foreach (GridViewRow row in this.Rows)
        {
            CheckBox chkBox = row.Cells[0].Controls[0] as CheckBox;

            if (chkBox != null)
            {
                chkBox.Checked = isChecked;
            }
        }
    } 
```

这就是问题开始的地方。我的活动永远不会受到打击！但是，该复选框会回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:28:27.993

好的，答案是这样的。我需要在“OnRowCreated”事件而不是“OnRowDataBound”上分配 CheckedChanged 事件

```
protected override void OnRowCreated(GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex == -1)
        {
            CheckBox chk = e.Row.GetAllControls().OfType<CheckBox>().FirstOrDefault();

            if (chk != null)
            {
                chk.CheckedChanged += new EventHandler(chk_CheckedChanged);
            }
        }
        base.OnRowCreated(e);
    } 
```

这样事件每次都会命中方法

# c# - 选择所有相交的项目

> ID：11342091
> 
> 赞同：0
> 
> 时间：2012-07-05T10:07:59.630
> 
> 标签：c#, .net, linq, linq-to-xml, intersect

我想从这个 LINQ 查询中获取所有相交的值：

```
Where(x => x.Attribute("name").Value).Intersect(myList).Any(); 
```

我不知道如何添加选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:48:18.347

我假设您想要 myList 中的所有 Attribute("name").Value

你可以做

```
Where(x=>myList.Contains(x.Attribute("name").Value)).Select(x=>x.Attribute("name").Value) 
```

或者

```
Select(x=>x.Attribute("name").Value).Intersect(myList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:12:08.190

为什么要做交叉点？为什么不只是 List.Contains？

```
data.Where(x => myList.Contains(x.Attribute("name").Value).ToList(); 
```

或者

```
data.Select(x => x.Attribute("name").Value).Intersect(myList); 
```

# javascript - 如何告诉 iframe 将图像链接的大小调整为给定的宽度和高度

> ID：11342092
> 
> 赞同：1
> 
> 时间：2012-07-05T10:07:59.770
> 
> 标签：javascript, jquery, html, css

我有 1 个 iframe 并有 youtube 链接，但我还需要显示相同的 iframe 图像。一旦我通过宽度和高度的图像链接，它就不会调整大小。

怎么做？

html:

```
<iframe width="257" 
        height="194" 
        src="http://www.youtube.com/embed/adadfad" 
        frameborder="0" 
        allowfullscreen=""></iframe> 
```

jQuery：

```
 divID.find('iframe').attr('src', function(i, val) {
      return 
      "<img src=http://img.youtube.com/vi/" + 
         match[2] + 
       "/2.jpg width=300 height=200/>"
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:55:04.340

这行得通。

```
root.find('iframe').ready(function(){
  root.find('iframe')
      .contents()
      .find('body')
      .html("<img src=http://img.youtube.com/vi/" + match[2] + "/2.jpg />");
  root.find('iframe')
      .contents()
      .find('img')
      .css({'width':'225px', 'height':'175px'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:21:58.170

如果你想调整图像的大小，你可以使用普通的 jquery。

```
$('img').css('width','300px');
     $('img').css('height','300px'); 
```

# ios - IMEI 作为 UDID 的后备，是个好主意吗？

> ID：11342094
> 
> 赞同：3
> 
> 时间：2012-07-05T10:08:02.910
> 
> 标签：ios, udid, imei

关于UDID的另一个问题......

UDID 是手机的唯一标识符，但 IMEI 号码也是唯一标识符。我知道一个设备可以有不同的 MAC 地址，但 IMEI 是唯一的。

所以我的问题是我应该使用 IMEI 作为 UDID 的后备。虽然，如果 UDID 已被弃用以避免客户跟踪，Apple 是否有可能拒绝使用 IMEI 号码的应用程序，甚至禁用访问 IMEI 号码的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:26:04.913

我敢肯定，如果`iPhone's` `IMEI`不使用私有框架，您将无法获得，如果这样做，您将被自动拒绝。更`iPods`没有`IMEI`编号。`Apple`也禁止使用`UDID`，所以你应该坚持`Apple's`建议：

> **特殊注意事项**
> 不要使用 uniqueIdentifier 属性。要创建特定于您的应用程序的唯一标识符，您可以调用 CFUUIDCreate 函数来创建 UUID，并使用 NSUserDefaults 类将其写入默认数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:27:54.253

通常，当移动开发者想要一些唯一的 id 时，解决方案是询问用户的电子邮件地址。如果你真的想区分用户设备，你可以创建一些随机的 UUID 保存在应用偏好中。

希望能帮助到你 ;）

# c# - 以编程方式将 Excel 文件导入 SharePoint 自定义列表 UnauthorizedAccessException

> ID：11342095
> 
> 赞同：0
> 
> 时间：2012-07-05T10:08:09.067
> 
> 标签：c#, sharepoint, excel-interop, unauthorizedaccessexcepti

我正在尝试使用 C# 编码的 Visual Studio 工作流以编程方式将 Excel 文件中的数据导入 SharePoint 自定义列表。

我正在使用 Microsoft.Office.Interop.Excel 命名空间并在其中调用 Application() 接口以提供对应用程序的引用，以便我可以按照许多论坛的建议使用它。

当我尝试这个时，我收到 UnauthorizedAccessException 错误。

我已经尝试了 SPSecurity 类中的 RunWithElevatedPrivileges 方法（如此处所建议的：）[尝试](http://jasonlochan.blogspot.co.uk/2008/09/unauthorizedaccessexception-and.html)使用系统级权限但效果不佳。无论如何，我应该拥有系统管理员权限，因为我在本地托管站点的笔记本电脑上将其作为本地开发会话运行。

如果有人对我如何解决这个问题有任何想法，或者可以建议一种将数据从 Excel 导入 SharePoint 列表的替代方法，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:10:29.863

我可以在大约 5 分钟内在 MS Access 中做同样的事情。右键单击将电子表格导入链接的共享点表。

# c# - 为什么内存会变大（t4模板）

> ID：11342096
> 
> 赞同：-2
> 
> 时间：2012-07-05T10:08:10.973
> 
> 标签：c#, asp.net, .net, t4

当我调用此方法时，内存将增加（1M-3M）：engine.ProcessTemplate（inputTemplate，host）。我不知道为什么？

注意：我使用 t4 模板生成代码。

这是我的代码：

```
Engine engine = new Engine();
host.Session = new TextTemplatingSession();
 Parameter nameSpaceParameter = new Parameter() { Text = "NameSpace", Value = this.txtNameSpaceRoot.Text };//+ strTmp.Replace("Templates." + this.CurSelectedNode.DisplayName, string.Empty)
host.Session.Add("NameSpace", nameSpaceParameter);

Parameter tableNameParameter = new Parameter() { Text = "TableName", Value = oName.Substring(2)};
host.Session.Add("TableName", tableNameParameter);
string inputTemplate = File.ReadAllText(host.TemplateFileValue);
string content=engine.ProcessTemplate(inputTemplate, host); 
```

这是我的 t4 模板文件：

```
<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ output extension=".cs" #>
<#@ parameter name="NameSpace" type="SmartCodeGenerator.Parameter" #>
<#@ parameter name="TableName" type="SmartCodeGenerator.Parameter" #>
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;
using <#=NameSpace.Value#>.DAL;
using <#=NameSpace.Value#>.Model;
namespace <#=NameSpace.Value#>.BLL
{
    public class <#=TableName.Value#>Repository 
    {
        RepositoryBase<<#=TableName.Value#>Model> repository = null;
        public <#=TableName.Value#>Repository()
        {
            repository = new RepositoryBase<<#=TableName.Value#>Model>();

        }
        #region IRepository<T> 成员

        public <#=TableName.Value#>Model Create()
        {
            return repository.Create();
        }

        public <#=TableName.Value#>Model Update(<#=TableName.Value#>Model entity)
        {
            return repository.Update(entity);
        }

        public <#=TableName.Value#>Model Insert(<#=TableName.Value#>Model entity)
        {
            return repository.Insert(entity);
        }

        public void Delete(<#=TableName.Value#>Model entity)
        {
            repository.Delete(entity);
        }

        public IList<<#=TableName.Value#>Model> FindAll()
        {
            return repository.FindAll();

        }
        public List<<#=TableName.Value#>Model> QueryByPage<TKey>(Expression<Func<<#=TableName.Value#>Model, bool>> filter, Expression<Func<<#=TableName.Value#>Model, TKey>> orderby, int OrderType, int Take, int Skip, out int recordsCount)
        {
            recordsCount = repository.Query(filter).Count();
            if (OrderType == 0)
            {
                return repository.Query(filter).OrderBy(orderby).Take(Take).Skip(Skip).ToList();
            }
            else
            {
                return repository.Query(filter).OrderByDescending(orderby).Take(Take).Skip(Skip).ToList();
            }
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:26:16.853

我不确定是什么引起了您的关注，或者什么情况导致您需要直接实例化引擎而不是使用 VS Service 接口。但是，如果 Engine 的实例化是您第一次在给定的 VS 进程中调用任何 T4 方法，则 NGEN 的程序集将出错，从而导致工作集跳转。如果它在调用 ProcessTemplate，那么这可能是第一次在您的场景中使用您的实际参数程序集。如果没有更多的上下文，这有点难以判断。

# jquery - jquery不显眼的验证依赖解决

> ID：11342099
> 
> 赞同：0
> 
> 时间：2012-07-05T10:08:13.103
> 
> 标签：jquery, validation, unobtrusive

我在使用不显眼的 jquery 时遇到问题 - Uncought type error cannot set property unobtrusive of 'undefined' on page load and the resource is not loaded 我正在使用：* jQuery Validation Plugin 1.8.1 * jQuery JavaScript Library v1.4.4
Jquery.validate .不显眼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:58:05.323

确保关于 javascript 的顺序

```
1\. jquery.js

2\. jquery.validate

3\. jquery.validate.unobtrusive or other jquery.validate.additional script 
```

# objective-c - Imageview 的“触摸区域矩形”在动画移动到其他位置后仍然存在

> ID：11342100
> 
> 赞同：0
> 
> 时间：2012-07-05T10:08:19.117
> 
> 标签：objective-c, ios, events, cabasicanimation

我正在使用 CABasicAnimation 移动图像，但我注意到它的触摸事件矩形保持在其旧位置 - 如何更新矩形使其不会注册在错误的位置？

```
CABasicAnimation *theAnimation; 
theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
theAnimation.duration=0.3;
theAnimation.repeatCount=0;
theAnimation.fillMode = kCAFillModeForwards;
theAnimation.removedOnCompletion = NO;
theAnimation.autoreverses=NO;
theAnimation.fromValue=[NSNumber numberWithFloat:0];
theAnimation.toValue=[NSNumber numberWithFloat:-rect.size.width*0.9];
[self.layer addAnimation:theAnimation forKey:@"animateLayer"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:26:19.557

在这种情况下，您需要移动, 而不是的`TouchImageView`子类。后者是一个较低级别的绘图表面，但不是处理触摸事件等的。`UIImageView``self.layer`

从[iPad：Move UIView with animation, then move it back](https://stackoverflow.com/questions/2899067/ipad-move-uiview-with-animation-then-move-it-back)，这里有一些改编的代码可以`translation`像你一样为属性设置动画：

```
CGFloat moveX = -rect.size.width*0.9;
CGFloat moveY = 0;

[UIView beginAnimations: @"Move View" context:nil];
[UIView setAnimationDuration: 0.3 ];
self.transform = CGAffineTransformMakeTranslation(moveX,moveY);
[UIView commitAnimations]; 
```

但是，您应该能够通过更改视图的框架来简化这一点：

```
CGRect newFrame = self.frame;
newFrame.x -=rect.size.width*0.9;

[UIView beginAnimations: @"Move View" context:nil];
[UIView setAnimationDuration: 0.3 ];
self.frame = newFrame;
[UIView commitAnimations]; 
```

# android - android、ios和黑莓测试是否需要物理设备

> ID：11342101
> 
> 赞同：0
> 
> 时间：2012-07-05T10:08:23.220
> 
> 标签：android, ios, blackberry, device

购买设备以在不同的 android/ios/blackberry 手机上测试您的 apk/ipa/alx 正在给口袋带来沉重的负担，因为随着技术进步太快，它很快就会变成一项无效投资，您不能只是继续购买了解您的应用的用户体验。

有没有公​​司提供服务来节省我们的死投资？我已经探索了 Keynote DeviceAnywhere，它非常好，但价格非常高。

我正在等待尽快的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:12:32.423

Definitely.

I am not familiar with Eclipse or the Android simulators/emulators (nor BB or winPhone 7), but in any case you **want** to test on the real thing.

Even if the behavior is the same (some times it isn't), the performance is completely different between a real device and a simulator.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:40:00.613

**安卓**
绝对是的。应用程序在设备上比在模拟器上运行得更快。从长远来看，购买设备将为开发人员节省时间，从而为您节省资金。对于开发人员来说，最好的设备是不受 OEM 软件影响的 Nexus 系列（想想三星 Touchwiz、HTC Sense）。 [三星](http://developer.samsung.com/home.do)允许您在一段时间内通过网络使用他们的真实设备。

**iOS**
是的。模拟器非常接近现实。如果你有预算，你可以买二手：

*   iphone 4 或等待即将到来的 iphone 5
*   仅当您针对此支持时才使用 iPad。

还要添加开发者许可额外费用，要在设备上运行，您必须有许可。iOS 开发者标准 = 99 美元，企业计划更多 = 299 美元

**黑莓** 不知道

# c# - LINQ to Entities 无法识别该方法

> ID：11342105
> 
> 赞同：0
> 
> 时间：2012-07-05T10:08:58.457
> 
> 标签：c#, entity-framework, .net-4.0

`Entity Framework`我很好奇执行包含不支持且不`SQL`进行转换的方法/函数的查询的最佳实践是什么。

例如：

```
DataContext db = new DataContext();
Administrator admin = db.Administrators.Where(admin => admin.Username.ToString() == "test"); 
```

将不起作用，因为该方法`ToLower()`不支持`SQL`转换。

目前我这样做：

```
DataContext db = new DataContext();
Administrator admin = db.Administrators.ToArray().Where(admin => admin.Username.ToString() == "test"); 
```

但是，我不认为将管理员设置为数组来执行这些查询在性能方面是非常好的。

有人可以告诉我这些查询的最佳做法是什么`Entity Framework`吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:15:54.387

两种选择——

*   编写存储过程并导入
*   使用将结果推送到内存中`ToArray()`，然后您可以使用所有您想要的方法（除非初始结果集很小，否则性能不会很好）。

实体框架查询提供者必须知道如何将方法调用转换为 SQL，虽然您可以开发自己的方法，但我认为您不能将它们的子类化——因此向其中添加您自己的方法并不容易。或者，换句话说，非常困难！

它可能非常不受欢迎，但是当我了解数据查询的真正细节时，我仍然使用很多 SP。尽管我的环境中的部分动机是其他非 EF 环境是否需要能够重现类似的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:12:51.730

You can use:

```
DataContext db = new DataContext();
Administrator admin = db.Administrators.Where(admin => admin.Username.Equals("test", StringComparison.InvariantCultureIgnoreCase));

```

beside that if you want to fetch only one entry you should use

```
DataContext db = new DataContext();
Administrator admin = db.Administrators.SingleOrDefault(admin => admin.Username.Equals("test", StringComparison.InvariantCultureIgnoreCase));

```

or

```
DataContext db = new DataContext();
var admins = db.Administrators.Where(admin => admin.Username.Equals("test", StringComparison.InvariantCultureIgnoreCase));
var admin = admins.First();

```

In case of more than one Administrator with username "test" Where will cause exception

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:16:34.620

尝试这个

```
Administrator admin = (from a in db.Administrators where a.Username == "test" select a).FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T10:11:12.593

使用[`EntityFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)类中的方法。

# iphone - Salesforce iPhone 应用程序的推送通知

> ID：11342109
> 
> 赞同：1
> 
> 时间：2012-07-05T10:09:08.760
> 
> 标签：iphone, ipad, salesforce, push-notification, apple-push-notifications

我正在尝试评估我可以为`salesforce`我要创建的 iPhone 应用程序实现推送通知的方式。我要探索的选项是`Urban Airship`或`Salesforce's Streaming API`。有没有人有任何建议（可用的最佳解决方案）或有没有人知道任何其他方式。`salesforce.com`另外，请指导我为从使用获取数据的应用程序实现推送通知的步骤`salesforce.com's rest API`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T19:14:51.390

从 Spring 14 版本开始，Salesforce 通过 Connected Apps 框架支持 Apple (APNS) 和 Google (GCM) 移动推送通知。请查看 Developer Force 上的移动推送通知提示表以获取更多信息：[http ://www2.developerforce.com/en/mobile/resources](http://www2.developerforce.com/en/mobile/resources)

# sql - 在存储过程后面抽象我们的数据库有什么优点和缺点？

> ID：11342110
> 
> 赞同：0
> 
> 时间：2012-07-05T10:09:16.633
> 
> 标签：sql, api, postgresql, database-design

在工作中，我们目前有一个 PostgreSQL 数据库，我们通过一些 Perl 绑定来访问它，以访问数据库并编组对 Perl 类型的响应。这可以正常工作，但由于各种原因，我们对 Perl 越来越不满意。我们一直在考虑的一种选择是将这个 API 中的大部分工作作为`plpgsql`存储过程转移到数据库本身。

# 简要示例

例如，我们可能在数据库中有以下内容：

```
-- This matches our 'Entity::Artist' object
CREATE TYPE loaded_artist (
  artist_id uuid,
  revision_id integer,
  artist_tree_id integer,
  name text,
  sort_name text,
  artist_type_id integer,
  -- etc
);

-- This gets the latest 'master' version of an artist and joins in basic data
-- from the artist tree
CREATE FUNCTION get_latest_artist_by_mbid(in_mbid UUID)
RETURNS SETOF loaded_artist AS $$
  BEGIN
    RETURN QUERY
    SELECT
      artist_id, revision_id, artist_tree_id, name.name,
      sort_name.name AS sort_name, artist_type_id
    FROM artist
    JOIN artist_revision USING (artist_id)
    JOIN artist_tree USING (artist_tree_id)
    JOIN artist_data USING (artist_data_id)
    WHERE artist.master_revision_id = revision_id
      AND artist_id = in_mbid;
  END;
$$ LANGUAGE 'plpgsql'; 
```

现在我们当前的 Perl API 可以有效地简化为以下内容：# 而在 Perl

```
package Data::Artist;
sub get_latest_by_mbid {
    my ($self, $mbid) = @_;
    return $self->new_from_row(
        $self->sql->select_single_row_hash(
            'SELECT * FROM get_latest_artist_by_mbid(?)',
            $mbid));
} 
```

# 这是明智的吗？

从表面上看，我喜欢这个。我们：

*   远离 Perl，但不要承诺使用另一种语言。这意味着我们可以将我们的实际应用程序迁移到 Python/任何未来，并且我们的大部分 API 已经完成。
*   由于指定了类似的东西，从 PostgreSQL 获得额外的类型安全性`RETURNS SETOF loaded_artist`
*   仍然通过 PGTAP 进行单元测试和东西。

有几个缺点：

*   由于我们现在必须替换数据库中的功能，因此可能会降低开发周期。不是世界末日，但这有效地在我们的工作流程中引入了以前不存在的“编译”步骤。
*   可能更困难的版本控制，但肯定有办法做到这一点

有没有人做过这样的工作？你会鼓励它，还是充满危险？

* * *

# 脚注：更多关于我们的案例

这是一个开源网站。我们分发我们数据库的转储，供人们导入 PostgreSQL 数据库。我们没有计划在短期内离开 PG，因此与数据库无关的决定并不真正适用于我们。我们是一个非常小的团队（2 个付费开发人员，更多的开源贡献者），这让我们在部署策略方面非常灵活。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:28:27.673

优点：

*   数据库架构/布局/存储更改对应用程序完全隐藏；
*   你有一个统一的 API 来处理数据库；
*   您可以对数据库中完成的所有操作（包括所有`SELECT`查询）进行大量日志记录。

缺点：

*   对优秀 DBA 的需求增加；
*   数据库开发人员对数据库如何处理数据以及 DB 端程序如何工作的深入了解的需求增加；
*   数据库端和应用端团队之间需要更多的协调；
*   ORM 集成的困难；
*   使用存储过程限制了数据库的优化可能性，并且某些查询（尤其是报告）会产生性能问题，最好使用视图，因为优化器可以将谓词下推到视图中并正确利用索引。

最好的组合是在数据库端实现大量业务逻辑，而不仅仅是包装函数。

架构版本控制是可能的。对配置表中的数据进行版本控制更加棘手。在我参与的一个项目中，这是通过为我们处理这部分的外部工具（基于 perl）完成的：

*   首先将数据加载/提取到中间表中；
*   然后分析 RI 约束和所有可能的违规行为；
*   在将数据加载到活动表之前可以进行数据操作；
*   可以一次性定义和提取生成多个表的业务对象；
*   存在几种处理匹配实体的方法，例如：覆盖、合并、复制。

我们正在对提取文件进行版本控制（这是一个普通的 SQL），并且在安装脚本中有一个特殊的步骤来加载新配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:53:16.020

关于便携性：

*   正如您已经指出的，通过使用存储过程，您在客户端上更加便携。
*   通过**不**使用存储过程，您在服务器上的可移植性更高（您可以更轻松地移动到不同的 DBMS）。

# asp.net - 实时数据馈送和网站的架构

> ID：11342115
> 
> 赞同：0
> 
> 时间：2012-07-05T10:09:35.600
> 
> 标签：asp.net, .net, web-services, comet

我已经获得了提供位置信息的实时数据源的访问权限，并且我想围绕它建立一个网站，但我有点不确定使用什么架构来满足我的需求。

不幸的是，我可以访问的提要只允许每个 IP 地址进行一个连接，因此建立一个直接与提要对话的网站已经失败——因为每个用户都会生成一个新请求，该请求将被拒绝。还需要对数据执行一些预处理，所以我想我需要某种后端来检索数据，处理它，然后将其提供给网站。

从前端连接的角度来看，Web 服务听起来好像可以工作，但这是否也会为每个用户创建多个到订阅源的连接？我还希望后端连接是持久的，这样即使网站不被访问也能检索和处理数据，我相信IIS会在它们空闲时回收web服务和网站？

我想保持设计相当灵活——将来我会添加一些移动客户端，所以 API 需要支持远程连接。

简单的解决方案是将所有处理过的数据记录到数据库中，然后网站可以获取该数据库，但这会丢失数据的实时性。理想情况下，我希望每次数据更改或现在收到数据时将数据推送到网站。

实现这一目标的最佳方式是什么，有哪些技术可以帮助实现这一目标？Comet 架构听起来很接近我的需要，但这需要构建一个可以同时处理多个基于 Web 的查询的后端，这似乎是一项艰巨的任务。

理想情况下，我会寻找带有 Javascript 客户端的基于 C#/ASP.NET 的解决方案，尽管我猜这个问题更多地基于架构和概念，而不是这些的技术实现。

提前感谢所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:05:15.663

## 实时数据消费者

最简单的解决方案似乎是拥有一个专用于读取实时提要的组件。然后，它可以将接收到的数据发布到一个队列（或多个队列）中，以供架构中的其他组件使用。

这个组件**(A)**将是一个独立的进程，可能是一个服务。

## 排队消费者

队列可以通过以下方式读取：

1.  一个组件**(B)**专用于持久化数据以供将来检索或查询。如果数据量很大，您可以添加更多从持久队列中读取的组件。
2.  将数据直接发布给任何连接的订阅者的组件**(C) 。**它也可以进行一些处理，但如果您正在考虑进行大量处理，您可能需要多个组件来执行此任务。

## 实时网络技术组件 (D)

[如果您使用的是 .NET 堆栈，那么SignalR](https://github.com/SignalR/SignalR/)似乎获得了最大的吸引力。您还可以查看[XSockets （我的](http://xsockets.net)[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)中有更多选项。只需搜索“.NET”。

您将希望使用 signalR 来管理订阅，然后将消息发布到注册客户端（PubSub -[这个 SO 帖子似乎相关](https://stackoverflow.com/questions/9449601/does-signalr-support-the-publish-subscribe-messaging-paradigm)，也许您可​​以要求更多信息）。

您还可以考虑将 PubSub 组件卸载到托管服务，例如我*工作的*[Pusher](http://pusher.com)。这将处理管理订阅，组件 C 只需将数据发布到适当的通道。[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)中还列出了其他选项。

 *所有这些组件都带有一个 JavaScript 库。

## 概括

成分：

*   **A** - .NET 服务 - 将信息发布到队列
*   **队列**- MSMQ、NServiceBus 等。
*   **B** - 也可以是读取队列的简单 .NET 服务。
*   **C** - 这真的取决于 D，因为一些实时网络技术将能够直接集成。但它也可能只是一个读取队列的简单 .NET 服务。
*   **D** - 实时网络技术，提供一种将信息路由到订阅者 (PubSub) 的简单方式。

如果您提供更多信息，我会更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:26:03.463

一个很好的解决方案是[http://rubyeventmachine.com/](http://rubyeventmachine.com/)或[http://nodejs.org/](http://nodejs.org/)。它不是asp.net，但它可以轻松解决将实时数据分发给其他用户的问题。由于每个频道都内置了用户连接、订阅和广播，这将使其余部分的编码变得超级简单。您的客户只需通过标准 tcp 连接即可。

如果您需要客户端轮询更新，那么您将需要一个查询系统来存储下一个请求的信息。这可以是一个简单的数组，也可以是一个更复杂的查询系统，具体取决于您的要求和用户数量。

.net 可能有一些我不知道的解决方案可以做同样的事情，但这些是我所知道的 2 个。*

# javascript - 转换为日期格式时，给定时间和当前时间不会发生减法

> ID：11342131
> 
> 赞同：0
> 
> 时间：2012-07-05T10:10:28.490
> 
> 标签：javascript, jquery, asp.net, html

//我正在检查给定时间是否与当前机器时间相比较。//即使时间开始时间和结束时间已经过去，我也没有收到警报。

```
 var currDate  = new Date();
    var startDate = setTime("09:30:00");
    var endDate   = setTime("10:15:00"); 
```

// 给定一个格式为“hh:mm:ss”的输入字符串，返回一个日期对象， // 与今天相同，但给定时间。

```
function setTime(timeStr) {
    var dateObj = new Date();          // assuming date is today
    var timeArr = timeStr.split(':');  // to access hour/minute/second
    var hour    = timeArr[0]; 
    var minute  = timeArr[1];
    var second  = timeArr[2];

    dateObj.setHours(hour);
    dateObj.setMinutes(minute);
    dateObj.setSeconds(second);
    return dateObj;
} 
```

// 现在我们可以减去它们（减去两个 Date 对象可以得到它们 // 以毫秒为单位的差异）

```
if (currDate - startDate < 0 || currDate - endDate < 0) {
    alert("Unfortunately, you can't schedule a meeting in the past. 
             We apologize for the inconvenience.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:45:04.517

为了检查给定时间是否已过或不与当前机器时间相比，请更改如下所述的条件。

```
if (currDate > startDate && currDate  < endDate) 
{
    alert("Unfortunately, you can't schedule a meeting in the past. We apologize for the inconvenience.");
} 
```

如果当前时间在开始时间和结束时间之间，它将显示警报。

让我知道它是否有效。

# android - 无法使用 android 手机调试连接到 localhost

> ID：11342138
> 
> 赞同：1
> 
> 时间：2012-07-05T10:10:55.167
> 
> 标签：android

我很难从我的本地主机中检索数据。我使用 xampp。我想要的是显示从本地主机到安卓手机列表视图的数据。这是我在网上找到的讨论 localhost 和 android 的基本代码。这是片段：

p

```
ublic class Database_demo extends ListActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        String result = null;
        InputStream is = null;
        StringBuilder sb = null;
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        List<String> r = new ArrayList<String>();

        try{

        //http post
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/android_connect3/");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
        }
        catch(Exception e){
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
       }

        //Convert response to string  
        try
        {
          BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));

          sb = new StringBuilder();

          String line = null;

          while ((line = reader.readLine()) != null) 
          {
             sb.append(line + "\n");
          }

          is.close();

          result = sb.toString();
        }
        catch(Exception e)
        {
            Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }
        //END Convert response to string   
        try{
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data=null;
                for(int i=0;i<jArray.length();i++)
                {
                   json_data = jArray.getJSONObject(i);
                   r.add(json_data.getString("reg"));
               }
               setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, r));
            }
            catch(JSONException e1){
                Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                Toast.makeText(getBaseContext(),e1.toString() ,Toast.LENGTH_LONG).show();
        }

    }
} 
```

这是我的 PHP 文件：

```
<?php
mysql_connect('localhost','root','');
mysql_select_db('android_sql');
$sql = "select * from reg";
$query = mysql_query($sql);

while($row = mysql_fetch_assoc($query)){
$output[] = $row;
}
print (json_encode($output));
mysql_close();

?> 
```

这是我的例外： http: [//pastebin.com/QZkfG0bp](http://pastebin.com/QZkfG0bp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:10:05.147

我明白了..这就是我所做的。

```
 InputStream is;
    String result;

    StringBuilder sb;
    @Override
    public void onCreate(Bundle savedInstanceState) {

  } 
```

我将它们声明为全局并删除分配给它们的空值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:24:53.057

你必须检查这条线

```
HttpPost httppost = new HttpPost("http://10.0.2.2/android_connect3/"); 
```

改成

```
HttpPost httppost = new HttpPost("http://10.0.2.2/android_connect3/your_php_file_name"); 
```

# javascript - 数据 uri 页面上的 cookie

> ID：11342139
> 
> 赞同：4
> 
> 时间：2012-07-05T10:10:58.307
> 
> 标签：javascript, cookies, data-uri

我[之前](https://stackoverflow.com/questions/11181831/does-a-data-uri-page-allow-writing-and-reading-a-cookie)关于同一主题的问题给了我 8 票反对票。我希望现在更清楚。如果你跑

```
document.cookie ='ppkcookie1=testcookie;';alert(document.cookie); 
```

在任何网页上，cookie 的内容都会出现在消息框中。如果您在一个非常简单的 data-uri 页面中运行上面的代码（您可以将以下字符串复制并粘贴到 FF 或 Chrome 的地址栏上，因为 IE 不支持它）

```
 data:text/html;charset=utf-8,<h1>hi people</h1><script>document.cookie='ppkcookie1=testcookie;';alert(document.cookie);</script> 
```

消息框为空

这是否意味着无法在 data-uri 页面上使用 cookie，或者我的代码中有一些错误？

# jquery - 如何制作精美的精选列表？

> ID：11342146
> 
> 赞同：0
> 
> 时间：2012-07-05T10:11:13.497
> 
> 标签：jquery, html, css

我有标准选择列表 - [https://imgur.com/3UaO0](https://imgur.com/3UaO0)

我需要让它美丽

![在此处输入图像描述](../Images/a8cf28a602e8c964714eb2a743c0b0f4.png)

使用 Bootstrap 框架制作的精美选择。

这是html：

```
.field select{
    width:300px;
    font-size: 14px;
    border: 1px solid rgba(98,141, 40, 0.5);
    border-radius:5px;
    -moz-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
    -webkit-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
    box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);  
} 
```

Box-shadow 没有添加，我想设置选项列表的样式。

我怎样才能改变箭头？

我怎样才能让它看起来不错？我应该使用 CSS 还是 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:19:13.007

为什么不使用[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)并更改您的 css 以适合您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:19:19.487

您可以使用很多 jQuery 插件，只需在 google 上搜索“select plugin jquery”即可。

我的最爱之一。是[DropKick](http://jamielottering.github.com/DropKick/)。

# java - 有人可以建议一个测试自动化工具来自动化 Java 小程序窗口吗？

> ID：11342150
> 
> 赞同：7
> 
> 时间：2012-07-05T10:11:22.160
> 
> 标签：java, applet, automation, gui-testing

有人可以建议一个测试自动化工具来自动化 Java 小程序窗口吗？也需要它来识别小程序窗口中的各种按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T15:17:53.703

我强烈推荐[FEST](http://docs.codehaus.org/display/FEST/Testing+Applets)用于所有功能性 Java GUI 测试，是的，它支持小程序。

# javascript - 在 WebBrowser 控件中加载本地文件

> ID：11342153
> 
> 赞同：1
> 
> 时间：2012-07-05T10:11:37.860
> 
> 标签：javascript, html, windows-phone-7, browser, local

我试图在 Windows Phone 7.1 上的 WebBrowser 中加载本地文件，但我总是遇到异常或空白页。

我试过了

```
Stream stream = Application.GetResourceStream(
                   new Uri("./Html/par/index.html", 
                   UriKind.Relative)).Stream;
using (StreamReader reader = new StreamReader(stream))
{
    // Navigate to HTML document string
    this.webBrowser.NavigateToString(reader.ReadToEnd());
} 
```

这是触发空白页。

我将 index.html 和所需的所有文件（css/js）设置为 Content 并将 IsScriptEnable 设置为“true”。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:33:39.287

我认为路径不正确。

你的项目中有`/Html/par`目录吗？其次是 index.html 设置为 content 吗？

尝试

```
var rs = Application.GetResourceStream(new Uri("myFile.html", UriKind.Relative));
using(StreamReader sr = new StreamReader(rs.Stream))
{
    this.webBrowser.NavigateToString(sr.ReadToEnd()); 
} 
```

这可能会有所帮助 [http://phone7.wordpress.com/2010/08/08/loading-a-local-html-file-in-the-webbrowser-control/](http://phone7.wordpress.com/2010/08/08/loading-a-local-html-file-in-the-webbrowser-control/)

这可能有助于理解资源和内容之间的差异 [http://invokeit.wordpress.com/2011/09/30/images-and-build-actio-settings-in-wp7/](http://invokeit.wordpress.com/2011/09/30/images-and-build-actio-settings-in-wp7/)

此链接详细说明如何加载文件和其他链接文件 [http://transoceanic.blogspot.co.uk/2011/07/wp7-load-local-html-files-and-all.html](http://transoceanic.blogspot.co.uk/2011/07/wp7-load-local-html-files-and-all.html)

# javascript - jQuery Toggle 复制停止工作

> ID：11342154
> 
> 赞同：0
> 
> 时间：2012-07-05T10:11:41.853
> 
> 标签：javascript, jquery

只需设置 jQuery Toggle。这是下面的功能。它工作正常。基本上，当您单击“显示更多”时，它会显示更多内容，并且“显示更多”一词会变为“显示更少”。

```
$('#toggle').toggle(
        function() {
            $('#content').slideDown();
            $(this).html('Show less &rarr;');
        }, 
        function() { 
            $('#content').slideUp(); 
            $(this).html('Show more &rarr;');
        }
    ); 
```

这很好，我的问题是页面上有多个。出于某种原因，当我多次复制和粘贴相同的 HTML 以创建多个切换内容时，其他的不起作用，只有第一个起作用。这是HTML：

```
<div id="team-page">

    Intro paragraph

    <a id="toggle" href="#">Show more &rarr;</a>

    <div id="content">
    Content shown when toggled
    </div>
</div> 
```

所以当我多次复制这个时，其余的都不起作用。通过添加 #toggle1 #toggle2 并复制和修改 jQuery 显然可以解决问题 - 但更好的方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:19:55.323

```
$('#toggle').toggle( ... 
```

您只得到第一个元素，因为您使用的是**ID**选择器。并且 id 是唯一的。您需要使用**CLASS** 'content' ：

```
<div class="content">
</div> 
```

并转换您的代码：

```
$('.toggle').toggle( ... 
```

# sql - 向数据库中的所有表添加一些字段

> ID：11342156
> 
> 赞同：1
> 
> 时间：2012-07-05T10:11:46.207
> 
> 标签：sql, sql-server

我想添加2个字段：

```
lastUpdatedUserId
lastUpdatedTime 
```

到我的 sql serverdatabase 中的所有表。

我怎样才能轻松做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:24:13.007

这一行查询将完成您正在尝试做的事情。

请根据您的要求修改数据类型。

使用 sp_msforeachtable 系统存储过程。

```
exec sp_MSforeachtable "ALTER table ? add lastUpdatedUserId varchar(20), lastUpdatedTime datetime PRINT '? modified' " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:54:14.007

可能这会帮助你

```
Declare @Count int
Set @Count=0
Declare @Sample TABLE
(Name varchar(max),rowNum int)

Declare @sql nvarchar(max)

Insert into @Sample
SELECT TABLE_NAME ,row_number() over ( order by TABLE_NAME) as rowNum
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_TYPE = 'BASE TABLE' and TABLE_CATALOG='Your database name'

while @count<(Select max(rowNum) from @Sample)
 BEGIN
 DEclare @Table varchar(max)
 Set @Table=(Select Name from @Sample where rowNum=@Count)

 SET @sql='ALTER Table ' + @table +' Add lastUpdatedUserId int ,lastUpdatedTime   datetime'
 execute (@sql)

Set @count=@count+1
END 
```

更简单的方法是

```
Declare @Sample Table
(Name nvarchar(max))
 Insert into @Sample
 Select 'ALTER TABLE dbo.' + TABLE_NAME + ' ADD lastUpdatedUserId int NULL' 
 from INFORMATION_SCHEMA.TABLES 
 WHERE TABLE_TYPE = 'BASE TABLE' 
```

现在执行@Sample 表中的语句

# linux - 当需要用户输入时，Emacs --batch 在 cron 中运行会挂起吗？

> ID：11342158
> 
> 赞同：0
> 
> 时间：2012-07-05T10:11:50.253
> 
> 标签：linux, ubuntu, emacs, cron, crontab

我在 crontab 中有一个需要 emacs --batch 的工作，但如果文件当前打开，它会请求 (s, p, q) 到 (steal, quit, etc...) 如果这个文件被编辑为不运行脚本，但我想确保它杀死 cron 运行脚本，这样它就不会坐在后台占用内存。我将输出设置为转到日志文件，因此我可以看到这种情况发生，但即使要求用户输入，也无法判断脚本是否已终止。

cron 是否终止这些脚本以及如何检查 PID 以确保？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:12:06.443

如果我没记错的话，cron 会将标准输入重定向到`/dev/null`. 我尝试`emacs --batch foo.txt --eval '(insert "a")' < /dev/null`在运行的 Emacs 中打开和修改 foo.txt 时运行，它打印了问题但没有等待响应就退出了。我希望它在 cron 下表现相同。

# jquery - 添加addmethod后jquery验证不起作用

> ID：11342160
> 
> 赞同：1
> 
> 时间：2012-07-05T10:11:52.173
> 
> 标签：jquery, validation

我正在使用 jquery 验证插件。添加用于验证某些字段的 addmethod 后，对上述字段使用的简单验证不起作用。如果我把我的文本框放在下面，那么一切都好。请帮忙！

这是 jsFiddle 中的一个示例：http: [//jsfiddle.net/mhmBs/435/](http://jsfiddle.net/mhmBs/435/)

**已解决：** 在谷歌搜索后，我找到了解决方案。有人发布说，在 addmethod "require_from_group" 中删除几行代码后，一切正常。

删除的代码行：

```
if(!$(element).data('reval')) {
        var fields = $(options[1], element.form);
        fields.data('reval', true).valid();
        fields.data('reval', false);
    } 
```

# javascript - 将在一个 html 页面中接收到的数据传递到另一个

> ID：11342161
> 
> 赞同：0
> 
> 时间：2012-07-05T10:11:53.120
> 
> 标签：javascript, jquery, html

假设我在一个 html 页面中获得了变量，例如 UserName 或 url 或其他东西。在另一个 html 页面中，我有这些变量的输入框，我想通过将数据从第一个 html 页面发送到第二个页面中的输入框来自动完成它们。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:38:24.527

为此，您可以使用 php session .store 该变量在 session 中并在任何页面中获取它们。或者如果您从您有值的页面调用该页面，请说用户名调用

```
<a href="nextpage.php?username='ur value'">next page </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:22:59.797

您可以为此使用 JQuery。假设您没有使用任何服务器端代码。

将值作为参数传递到下一页。

喜欢`myurl?param=xyz`

然后你可以像这样在下一页中获取值，

请参阅此[答案](https://stackoverflow.com/questions/831030/how-to-get-get-request-parameters-in-javascript)和[源代码](https://github.com/allmarkedup/jQuery-URL-Parser/blob/master/jquery.url.js)

`var xyz = jQuery.url.param("param_in_url");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:18:34.057

使用 JavaScript 创建等效集合以供其他 JS 代码使用：

代码：

```
<script type="text/javascript">
var querystring = [ ];
var qs = location.search;
if ( qs.length > 1 )
{
    qs = qs.substring(1); // skip past the ?
    var pairs = qs.split( /\&/g ); // get all the name=value pairst
    for ( var p = 0; p < pairs.length )
    {
        var pair = pairs[p];
        querystring[ pair[0] ] = unescape( pair[1].replace(/\+/g," ");
    }
}
</script> 
```

然后，在您的页面中您可能会使用 ASP 代码的任何地方

代码：

`var foo = Request.QueryString("foo");`

你只是简单地做

代码： `var foo = querystring["foo"];`

注意："foo" 将区分大小写，这与 ASP 不同。如果你愿意，你可以替换代码：

```
querystring[ pair[0] ] = unescape( pair[1].replace(/\+/g," "); 
```

和 `querystring[ pair[0].toLowerCase() ] = unescape( pair[1].replace(/\+/g," ");`

然后在查找值时始终使用小写名称（“foo”代替“Foo”或“FOO”）。

未经测试，尽管我以前使用过相同的代码。如果有错误，那只是一个错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:17:17.527

**您应该在 php.ini 中使用 $_SESSION 变量。**或者你可以使用 javascript 的 sessionStorage。

# amazon-ec2 - 如何增加 Amazon EC2 实例的 ulimit？

> ID：11342167
> 
> 赞同：46
> 
> 时间：2012-07-05T10:12:14.773
> 
> 标签：amazon-ec2, ulimit

在通过 SSH 连接到运行 Amazon Linux AMI 的 EC2 实例后，我尝试了：

```
ulimit -n 20000 
```

...并得到以下错误：

```
-bash: ulimit: open files: cannot modify limit: Operation not permitted 
```

但是，shell 允许我**减少**这个数字，仅适用于当前会话。

无论如何**增加**EC2实例的ulimit **（永久）**？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-05T13:23:37.370

实际上，通过`ulimit`命令更改值仅适用于当前 shell 会话。如果要永久设置新限制，则必须编辑`/etc/security/limits.conf`文件并设置硬限制和软限制。这是一个例子：

```
# <domain> <type> <item>  <value>
    *       soft  nofile  20000
    *       hard  nofile  20000 
```

保存文件，注销，再次登录，通过`ulimit -n`命令测试配置。希望能帮助到你。

PS 1：请记住以下几点：

*   软限制：内核对相应资源强制执行的值。
*   硬限制：作为软限制的上限。

PS 2： 中的其他文件`/etc/security/limits.d/`可能会影响`limits.conf`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-25T19:55:41.697

谢谢你的回答。对我来说，仅仅更新 /etc/security/limits.conf 是不够的。只有“打开的文件” ulimit -n 得到更新，而 nproc 没有得到更新。更新 /etc/security/limits.d/whateverfile 后，nproc "ulimit -u" 也得到了更新。

脚步：

*   `sudo vi /etc/security/limits.d/whateverfile`
*   为 nproc/nofile 设置的更新限制
*   `sudo vi /etc/security/limits.conf`

```
*  soft  nproc  65535
*  hard  nproc  65535
*  soft  nofile 65535
*  hard  nofile 65535 
```

*   重启机器`sudo reboot`

PS我无法将其添加为评论，因此不得不发布作为答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-04T01:25:47.293

我没有足够的代表点来发表评论……很抱歉有新的回复，但也许这会让某人不会浪费一个小时。

Viccari 的回答终于为我解决了这个头疼的问题。每个其他来源都会告诉您编辑 limits.conf 文件，如果这不起作用，请添加

```
session   required    pam_limits.so 
```

到`/etc/pam.d/common-session`文件

**不要这样做！**

我正在运行一个 Ubuntu 18.04.5 EC2 实例，这*使我完全无法使用 SSH*。我可以登录，但是当它要让我进入提示时，它就断开了我的连接（我什至看到了所有的欢迎消息和内容）。详细显示这是最后一个错误：

```
fd 1 is not O_NONBLOCK 
```

我找不到这意味着什么的答案。因此，在关闭实例后，等待大约一个小时对卷进行快照，然后将其挂载到另一个正在运行的实例上，我删除了对`common-session`文件的编辑并 bam，SSH 登录再次工作。

对我有用的修复是在文件`/etc/security/limits.d/`夹中查找文件，然后编辑这些文件。

（不，我不需要重新启动来获得新的限制，只需注销并重新登录）

# java - 读取和写入同一个 Excel 文件

> ID：11342169
> 
> 赞同：1
> 
> 时间：2012-07-05T10:12:21.327
> 
> 标签：java, jxl, jxls

```
package jexcel.jxl.nimit;  

import java.io.File;  
import java.io.IOException;  

import jxl.Cell;  
import jxl.CellType;  
import jxl.LabelCell;  
import jxl.Sheet;    
import jxl.Workbook;  
import jxl.read.biff.BiffException;  
import jxl.write.Label;  
import jxl.write.WritableSheet;  
import jxl.write.WritableWorkbook;  
import jxl.write.WriteException;  

public class ExcelJxl {

    public static void main(String[] args) throws WriteException, IOException,     BiffException{
        String S="D:\\nimit.xls";
        ExcelJxl.WriteFile(S);
    }
    public static void WriteFile(String path) throws IOException, WriteException, BiffException{
            Workbook wb=Workbook.getWorkbook(new File(path));
           Sheet sheet=wb.getSheet(0);
            String s1=null;
            String s2=null;
            Cell c1=sheet.getCell(0,0);
            Cell c2=sheet.getCell(1,0);
             if (c1.getType() == CellType.LABEL)
            {
              LabelCell lc = (LabelCell) c1;
               s1 = lc.getString();
            } 
            if (c2.getType() == CellType.LABEL)
            {
          LabelCell lb = (LabelCell) c2;
           s2 = lb.getString();
        }
        String s3=s1+s2;

    WritableWorkbook copy=Workbook.createWorkbook(new File("D:\\demo.xls"),wb);
    WritableSheet Wsheet = copy.getSheet(0); 
    Label l1=new Label(0,0,s1);
    Wsheet.addCell(l1);
    Label l2=new Label(1,0,s2);
    Wsheet.addCell(l2);
    Label l3 = new Label(2, 0,s3);
    Wsheet.addCell(l3);
    copy.write();
    copy.close();
 }
} 
```

我正在尝试学习如何读取和写入同一个 Excel 文件。

我从一个文件中取出两个字符串并放入另一个文件。

如何将内容放入同一个文件中？

我正在创建一个新文件，然后我正在放置内容。如何读取和写入同一个文本文件？如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:25:43.273

读写锁：[http ://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock](http://en.wikipedia.org/wiki/Readers%E2%80%93writer_lock)

# azure - Upgrade to Azure 1.7 now connecting to different dev storage

> ID：11342170
> 
> 赞同：1
> 
> 时间：2012-07-05T10:12:22.873
> 
> 标签：azure, azure-storage, azure-storage-emulator

I have just upgraded to the Azure 1.7 sdk and have now lost the contents of my devstorage.

I can still see it in the local instance of sqlexpress (as DevelopmentStorage20110606), but when I use UseDevelopmentStorage=true, it longer connects to this.

Where has the new development storage db gone? I need to import my data from the previous version, as we use local storage for testing on the build server and have test data setup on it, or is there an upgrade script to be able to port this data accross.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:00:21.613

SDK 1.7 现在使用 IIS Express（计算）和 SQL Server 2012 Express LocalDB（存储）。您应该能够通过运行 dsinit 将您的模拟器指向您现有的数据库。

Michael Collier 在他的帖子中谈到了 1.6 与 1.7 的差异，[这里](http://michaelcollier.wordpress.com/2012/06/15/whats-new-for-the-windows-azure-developer-lots-2/)。

有关 LocalDB 的更多信息在[这里](http://msdn.microsoft.com/en-us/library/hh510202.aspx)。

DSInit 文档在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/gg433005.aspx)。

# sql - Active Record 按日期选择 15 条记录，使用不同的字段值

> ID：11342173
> 
> 赞同：0
> 
> 时间：2012-07-05T10:12:29.847
> 
> 标签：sql, activerecord

这里我有一些文章：

```
id  text  group_id source_id
1   t1    1        1
2   t2    1        1
3   t3    2        2
4   t4    3        4 
```

所以我希望结果中的记录按 created_at 列排序（它存在，但我没有在表中显示它）并具有不同的组 id，例如：

```
id  text  group_id source_id
1   t1    1        1
3   t3    2        2
4   t4    3        4 
```

另外，我应该能够使用 source_id 过滤结果。

我被这个问题困扰了两天，甚至不知道如何开始解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:24:32.700

假设您想要非重复列的最小值，请尝试：

```
select   min(id) as id, 
         min(text) as text, 
         group_id, 
         source_id, 
         min(created_at) as created_at
from     articles
where    source_id = @your_parameter_value
group by group_id,
         source_id
order by 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:19:35.400

```
Select * from
(Select * from articles
Order by group_id, id) x
Group by group_id 
```

# plone - Changing folder default batch site in Plone

> ID：11342176
> 
> 赞同：2
> 
> 时间：2012-07-05T10:12:41.890
> 
> 标签：plone

In Plone the default folder_contents etc. views display 20 items per page. This is too small number for most of our use cases. How to increase this number to 100?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:30:43.110

见[https://dev.plone.org/ticket/8115](https://dev.plone.org/ticket/8115)：

> 默认情况下，文件夹内容中显示的项目数在 BrowserView: [tableview.py](https://github.com/plone/plone.app.content/blob/master/plone/app/content/browser/tableview.py)中硬编码。虽然我认为这是一个很好的默认设置，但我发现它对于我的一些网站来说太小了。我建议将此值移动到 site_properties 中的新属性。

我想你必须编辑[`tableview.py`](https://github.com/plone/plone.app.content/blob/master/plone/app/content/browser/tableview.py)。

# javascript - Facebook like button loads only once

> ID：11342182
> 
> 赞同：2
> 
> 时间：2012-07-05T10:12:56.173
> 
> 标签：javascript, facebook, event-handling, facebook-like, facebook-javascript-sdk

I've added facebook like button, but it works only once on the page. The page consists of "tiles" and every tile has own link and user should be able to "like" any tile on the page. The code of the called function is the following:

```
FB.Event.subscribe('edge.create', handleResponse(response));

var handleResponse = function(response) {
    var query = FB.Data.query('SELECT like_count FROM link_stat WHERE url="some_url_goes_here"');
    query.wait(function(rows) {
        alert('number of likes ' + rows[0].like_count);
        // ... other code
    });
}; 
```

When user presses some button - appears Facebook "like" button (e.i. called function startFacebook(), the content of which is given above) together with like buttons of some other social networks.

Some time ago the contents of this function started with:

```
FB.Event.clear('edge.create'); 
```

but this is deprecated now and Facebook says that is should not be used any more and sends response like this:

```
c   jssdk_error
m   {"error":"Private method used","extra":{"args":"Event.clear"},"appId":"246731078776510"} 
```

When I used FB.Event.clear - everything worked fine. Does anyone knows how to substitute this lacking funciton?

Thanks for help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:03:28.497

您是否要删除事件侦听器？
如果是这样，那么就像您使用的那样使用[FB.Event.unsubscribe](http://developers.facebook.com/docs/reference/javascript/FB.Event.unsubscribe/)`FB.Event.subscribe`：

```
var handleResponse = function(response) {
    ...
}

FB.Event.subscribe("edge.create", handleResponse);

...

FB.Event.unsubscribe("edge.create", handleResponse); 
```

# windows - 当包裹在 Windows 批处理 (.bat) 文件中的“if”语句中时，“for”语句的行为很奇怪

> ID：11342184
> 
> 赞同：0
> 
> 时间：2012-07-05T10:13:02.797
> 
> 标签：windows, batch-file

有两个文件，output.txt 和 test.bat。output.txt中只有一行'1 2 3 4'，test.bat的内容是

```
@echo off
set condition=1

if "%condition%" == "1" (
    for /F "tokens=1,2,3,4* delims= " %%a in (output.txt) do set variable=%%a
    echo %variable%
)
pause 
```

运行 test.bat 不会回显任何内容。但如果我稍微改变一下，如下：

```
@echo off
set condition=1
for /F "tokens=1,2,3,4* delims= " %%a in (output.txt) do set variable=%%a
echo %variable%
if "%condition%" == "1" (
    for /F "tokens=1,2,3,4* delims= " %%a in (output.txt) do set variable=%%a
    echo %variable%
)
pause 
```

它会回显“1”两次。奇怪的？漏洞？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:29:41.373

我认为这两个脚本中的任何一个都不会像您认为的那样做（具体来说，第二个脚本之所以这样工作，只是因为您在第一个脚本之后运行它）。

## 为什么它会这样？

需要注意的重要一点是，除非打开*延迟变量扩展，否则将在执行该命令之前为每个命令评估变量。*这在使用时尤其重要`IF`，因为**括号内的整个命令块被视为一个命令**。

为了显示：

```
SET foo=
ECHO foo = %foo%
IF 1==1 (
    SET foo=bar
    ECHO foo = %foo%
) 
```

上面的脚本将输出：

```
foo =
foo = 
```

原因是条件相当于

```
IF 1==1 SET foo=bar && ECHO foo = %foo% 
```

这只是一个命令，因此变量在运行之前只扩展一次（特别是，它们不会在 the 之后`SET`和之前扩展`ECHO`）。

这也是您的脚本中发生的情况。因为在块内`%variable%`设置*和*回显，`ECHO`实际操作的是`%variable%`在进入块之前的值，因此您看不到“当前”值。

## 如何解决？

### 解决延迟变量扩展的问题

有两种方法可以解决这个问题。最直接的一种是启用延迟变量扩展，`SETLOCAL`然后使用语法`!var!`而不是引用变量`%var%`：

```
SETLOCAL ENABLEDELAYEDEXPANSION
SET foo=
ECHO foo = !foo!
IF 1==1 (
    SET foo=bar
    ECHO foo = !foo!
) 
```

上面的脚本将输出：

```
foo =
foo = bar 
```

### 通过分解命令块来解决问题

还有另一种方法可以做到这一点：请记住，在执行每个命令（或块）之前，变量会被扩展一次。`SET`因此，如果您希望在和之间发生扩展`ECHO`，可以通过分解块来实现。您可以通过反转测试`NOT`并使用 a`GOTO`跳过“成功”分支中较早的代码来做到这一点：

```
SET foo=
ECHO foo = %foo%
IF NOT 1==1 GOTO :proceed
SET foo=bar
ECHO foo = %foo%
:proceed 
```

上面的脚本也会输出：

```
foo =
foo = bar 
```

# 将解决方案应用于您的示例

这两种方法转化为：

```
SETLOCAL ENABLEDELAYEDEXPANSION
IF "%condition%" == "1" (
    FOR /F "tokens=1,2,3,4* delims= " %%a in (output.txt) DO SET variable=%%a
    ECHO !variable!
) 
```

或这个：

```
IF NOT "%condition%" == "1" GOTO :proceed
FOR /F "tokens=1,2,3,4* delims= " %%a in (output.txt) DO SET variable=%%a
ECHO %variable%
:proceed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:20:51.733

不是错误——它是 CMD 如何实现变量扩展的副作用。Raymond Chen在这里有一篇文章：

> [http://blogs.msdn.com/b/oldnewthing/archive/2006/08/23/714650.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2006/08/23/714650.aspx)

具体来说，在您的第一个示例中，截至何时`%variable%`展开，它从未设置过。

# javascript - 没有弹出窗口的 Google Analytics API OAuth 2.0 授权

> ID：11342185
> 
> 赞同：1
> 
> 时间：2012-07-05T10:13:13.280
> 
> 标签：javascript, google-analytics, google-api

这里的目的是使用[API](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api)检索我的谷歌分析数据并将其显示在网页中。

如果我使用基本上调用此代码的“弹出”方法，我可以毫无问题地进行身份验证：

```
gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult); 
```

但是，我不想在想要查看此页面时单击“允许访问”。特别是因为我打算让 CMS 中的多个人都能看到它。

看到它是我的 Google Analytics 帐户，并且我已经注册了 Web 应用程序，是否没有办法在页面加载时通过 javascript 进行身份验证而不必向用户显示弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:00:30.473

通过使用此代码检查用户是否授权您的应用

```
gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult); 
```

如果你设置 immidiate true 那么它不会显示 popup 如果 false 它将向用户显示弹出窗口

在句柄AuthResult

```
 handleAuthResult = function (authResult) {
var authorizeButton = document.getElementById('authorize-button');
if (authResult && !authResult.error) {
    authorizeButton.style.display = 'none';
     // do your processing here
    } else {
    authorizeButton.style.display = 'block';
    authorizeButton.onclick = handleAuthClick;
} 
```

}

```
handleAuthClick = function (event) {
gapi.auth.authorize({
    client_id: clientId,
    scope: scopes,
    immediate: false
}, handleAuthResult);
return false; 
```

}

我想它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:55:42.347

听起来您需要使用 OAuth 身份验证。看看[这篇文章](https://developers.google.com/accounts/docs/OAuth2)。一旦授权一次，就不需要后续授权了。

# single-sign-on - Windows Identity Foundation does not officially support SAML 2.0; use WIF CTP or stick with SAML 1.1?

> ID：11342186
> 
> 赞同：6
> 
> 时间：2012-07-05T10:13:13.793
> 
> 标签：single-sign-on, wif, saml, saml-2.0

We would like to use SAML 2.0 for a Single Sign On solution. As a typical Microsoft shop, we prefer to use Microsoft components as much as possible. Windows Identity Foundation supports SAML 2.0, but the extension is still in Community Technology Preview (CTP) for more than a year, with no information anywhere on future course. See [http://blogs.msdn.com/b/alikl/archive/2011/05/16/windows-identity-foundation-wif-extension-for-saml-2-0-protocol-community-technology-preview-ctp.aspx](http://blogs.msdn.com/b/alikl/archive/2011/05/16/windows-identity-foundation-wif-extension-for-saml-2-0-protocol-community-technology-preview-ctp.aspx)

I came across an inspiring article by Michèle Bustamante: [http://www.devproconnections.com/article/federated-security/generate-saml-tokens-using-windows-identity-foundation](http://www.devproconnections.com/article/federated-security/generate-saml-tokens-using-windows-identity-foundation) She actively promotes WIF + SAML 2.0, but nowhere in the article she talks about CTP or final release. Neither could I reach her for a clarification.

With this background, is it safe to use WIF Community Technology Preview for SAML 2.0 or stick with SAML 1.1? Does SAML 2.0 offer significant advantage over SAML 1.1? Is the future of SAML 1.1 in question?

Any other alternatives?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T14:50:34.847

您应该澄清您是在谈论 SAML 2.0 协议（例如 SAMLP）还是只是令牌类型。WIF RTM 支持 SAML 2.0 令牌，但不支持 SAMLP。

因此，如果您只需要 SAML 2.0 令牌支持，WIF RTM 就足够了，尽管 WIF 扩展 CTP 确实添加了一些 SAMLP 支持。

如果您正在寻找 SAMLP 解决方案并且您是 Microsoft 商店，那么您应该考虑 ADFS 2.0。

ADFS 2.0 将执行“协议转换”：它将与身份提供者和 WS-Federation 与您的应用程序进行 SAMLP 对话（两者都使用 SAML“令牌”）。WIF 支持 WS-Federation。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:42:02.917

看看[Identity Server](http://identityserver.codeplex.com/)，它是一个使用 SQL Server 进行身份验证的 STS。您可以轻松地将其与 ADFS 联合。

从我记得阅读 CTP 版本的许可协议的内容来看，它只是用来发表评论的——你不能在生产环境中使用它。

根据@Eugenio，WIF 仅支持 WS-Federation。

您打算如何“坚持使用 SAML 1.1”？

**更新：**我建议您使用 Identity Server 对数据库进行身份验证。您的 WIF 应用程序使用 FedUtil 绑定到 Identity Server。然后将 Identity Server 与 ADFS 联合。您的外部方使用 SAML 与 ADFS 对话，ADFS 将处理管道以使他们能够使用 Identity Server DB 进行身份验证。

请注意，WIF 根本不支持 SAML。

# c# - C# save/retrieve an array of structures from settings file

> ID：11342195
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:06.010
> 
> 标签：c#, settings

I have a simple question (I think) that I'm not making much progress finding an answer to with Google. I have a structure as follows:

```
/// <summary>
/// A class to represent the sync settings for a single camera.
/// </summary>
public class CameraSyncSettings
{
    public string ID { get; set; }
    public string SyncPath { get; set; }
    public bool OverwriteExisting { get; set; }
}; 
```

And then an array of these in the program, one for each camera:

```
List<CameraSyncSettings> MyCameraSettings = new List<CameraSyncSettings>(); 
```

Now, what I want to do is have a property in my settings such that I can read/write this array into it to persist the information between sessions.

How can I do this and what is the best/most efficient way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:50:05.990

您可以通过使用 ListDictionary 类型的 Properties.Settings 来实现它

```
 Example:
    Properties.Settings.Default.Example.Add("Setting1", new CameraSyncSettings());
    Properties.Settings.Default.Example.Add("Setting2", new CameraSyncSettings());
    Properties.Settings.Default.Example.Add("Setting3", new CameraSyncSettings());

    Properties.Settings.Default.Save(); 
```

有关更多信息，请参阅链接：http: [//msdn.microsoft.com/en-us/library/aa730869 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

**注意：您可以将 Properties.Settings.Default.Example 的范围设置为 Application 或 User**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:35:07.403

正如我们在您想要使用 app.config 的评论中清除的那样：[这个](http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0)项目应该几乎可以满足您的所有需求。

# javascript - How to load a part of page every 30 seconds

> ID：11342199
> 
> 赞同：4
> 
> 时间：2012-07-05T10:14:22.157
> 
> 标签：javascript, jquery, html, ajax, javascript-events

> **Possible Duplicate:**
> [jQuery Ajax request every 30 seconds](https://stackoverflow.com/questions/4450579/jquery-ajax-request-every-30-seconds)

I know we can load a part of page on some event. I also know we can load whole web page every specified time. But i wanted to know how to load a part of page every 30 seconds.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T10:21:08.340

```
function refreshPage() {
    $.ajax({
        url: 'ajax/test.html',
        dataType: 'html',
        success: function(data) {
            $('.result').html(data);
        },
        complete: function() {
            window.setTimeout(refreshPage, 30000);
        }
    });
}

window.setTimeout(refreshPage, 30000); 
```

使用`setTimeout`的好处是，如果连接挂起一段时间，您将不会收到大量待处理的请求，因为只有在前一个完成后才会发送新的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:15:51.297

```
function load_content(){

    setTimeout(function(){

        $.ajax({
            url: 'ajax/example.html',
            dataType: 'html',
            success: function(data) {
                $('.result').html(data);
                load_content();
            }
        });dataType: 'html',

    },30000);

}

load_content(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:57:24.960

jQuery 已经内置了用远程文件替换元素内容的功能，称为[`load()`](http://api.jquery.com/load/). 你可以使用[`load()`](http://api.jquery.com/load/)这个oneliner：

```
window.setTimeout($('#refresh').load('/remote/content.html'), 30000); 
```

`#refresh`是要刷新的元素的id，`/remote/content.html`是远程内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T10:38:13.150

```
$(function() {
   setInterval(function() {
     getData();  // call to function
   }, 30000 );  // 30 seconds
});

// define your function here
function getData() {
   var url ="/mypage.php?type=load_data";
   var httpobj = $.ajax({url:url,async:false});  // send request
   var response = httpobj.responseText.trim(); //get response
   $('#myDiv').html(response);  // display data
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-05T10:21:27.053

如果你使用 jQuery，你可以使用[load()](http://api.jquery.com/load/)方法

```
setInterval(function(){

    $('#some-kinda-container').load('/some/kinda/url.html #bit-you-need');

}, 30000); 
```

# eclipse-rcp - Edit domain of Eclipse not providing the child nodes when product is exported

> ID：11342201
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:29.703
> 
> 标签：eclipse-rcp, eclipse-emf, eclipse-emf-ecore, emf

I am developing a RCP application which deals with EMF resources. Actually, I am having a XML file for which I am creating a model.

At a particular instant, I am having the root node of the XML file and when I try to get the children of the node using EMF edit domain, it does not return any value and i get 0 children under the root node. But in my XML file, there are 2 children under the root node.

The application works fine, when run from Eclipse IDE. But when i tried to export it as a RCP product, the problem arises. What may be the reason for such a behavior when we export it as a product? Is there something, which we should take care of when we export our product for EMF related application.

# apache-flex - 灵活：具有动态级别的单页脚

> ID：11342203
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:32.297
> 
> 标签：apache-flex, flexicious

使用具有 enableDynamicLevels="true" 的终极灵活数据网格，我尝试使用唯一的页脚而不是每个级别一个。

那可能吗 ？如果是，如何？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:00:45.397

你在哪个版本？如果您获得最新版本，则应该有一个事件 dynamicLevelCreated。分派的事件的级别属性是新创建的级别。您可以在其中设置 enableFooters=false 。`dynamicLevelCreated="testODG1_dynamicLevelCreatedHandler(event)"`

```
protected function testODG1_dynamicLevelCreatedHandler(event:FlexDataGridEvent):void
            {
                event.level.enableFooters=false;
            } 
```

# lucene - Lucene.Net 搜索带下划线的文本

> ID：11342204
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:35.900
> 
> 标签：lucene, lucene.net

我正在使用标准分析器并使用以下代码添加要搜索的字段

```
 doc.Add(
                    new Field(
                        "BookId",
                        book.CatalogueBookNo.ToString(),
                        Field.Store.YES,
                        Field.Index.NOT_ANALYZED,
                        Field.TermVector.NO));

                doc.Add(
                    new Field("Title",
                        strTitle, 
                        Field.Store.YES, 
                        Field.Index.ANALYZED, 
                        Field.TermVector.NO));

                doc.Add(
                    new Field("Author",
                        strAuthor,
                        Field.Store.YES,
                        Field.Index.ANALYZED,
                        Field.TermVector.NO));

                doc.Add(
                    new Field("IssueId_fk", 
                        book.IssueId_fk, 
                        Field.Store.YES, 
                        Field.Index.NOT_ANALYZED, 
                        Field.TermVector.NO)); 
```

所有字段都是可搜索的，除了 IssueId_Fk 字段（未分析，因此是完整的） - 此字段包含格式为“11_12_4”、“11_12_3”等的字符串值。

我已经在记事本中打开了 lucene 索引，并且可以确认这些值是用下划线分隔和完整的，但是在 IssueId_Fk 字段上搜索什么也不返回。

有谁知道如何解决这个问题？

干杯

翅膀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:28:22.167

实际上，现在已经通过创建 customanalyzer 解决了这个问题。但是，感谢您提供有关 solr 标记器的信息。但是不太清楚是否需要关键字标记器 - 如果您希望字段保持完整（例如 ID 字段等）并且不以任何方式更改，您只是不分析它。这应该有效，但使用标准分析仪却没有。–

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:23:20.107

那么您可以尝试使用 solr.KeywordTokenizerFactory 进行分析吗？

# html - css按中心定位

> ID：11342206
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:37.987
> 
> 标签：html, css, positioning

我有很多具有已知 x,y 坐标的可拖动子级的父框。**问题是通过 center**来定位孩子，而不是左上角。儿童boxen的尺寸是自动的。

有没有办法实现这一点，而无需在每次调整父母和孩子的大小时重新计算 javascript 位置？

![在此处输入图像描述](../Images/052b4dfd79ab0f6ca870ffa1f718c6d3.png)

PS jquery-ui 具有插件“位置”，在使用类似时主要完成所需的操作

```
child.position({ my: center, at: left top, of: parent, offset: x y}) 
```

但是插件以像素为单位计算位置，我更喜欢使用 % 以便父级调整大小不会涉及重新定位所有子级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:18:16.210

您可以使用死点中心。

## CSS：

```
#horizon        
{
    color: white;
    background-color: transparent;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 0px;
    width: 100%;
    height: 1px;
    overflow: visible;
    visibility: visible;
    display: block
}

#content    
{
    font-family: Verdana, Geneva, Arial, sans-serif;
    background-color: transparent;
    margin-left: -125px;
    position: absolute;
    top: -35px;
    left: 50%;
    width: 250px;
    height: 70px;
    visibility: visible
} 
```

**演示： http:** [//www.wpdfd.com/editorial/thebox/deadcentre4.html](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)

# php - 将表单结果发送到另一个页面 php mysql

> ID：11342207
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:38.717
> 
> 标签：php, mysql, forms

您好，我有一个表格可以正常使用

```
php echo $_SERVER['PHP_SELF'] 
```

结果显示在与表格相同的页面上。

`results.php`当用户提交表单时，我需要能够将表​​单数据和结果发送到另一个页面（例如）。

这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:18:21.810

只需将表单操作指向 results.php

```
<form action="results.php">
 <!--Inputs-->
</form> 
```

或者，如果您需要在**$_SESSION['parameters']处进行重定向存储****$_GET**。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:29:48.530

`<form>`这是您需要设置它们的表单标签的一些属性。

```
<form action="controller.php" method="post">
 <!--form elements-->
<input type="submit" name="submit" value="Submit Form" />
</form> 
```

在这里，当单击提交按钮时，它会将表单提交给它的操作，即`controller.php`通过`post`方法（即表单元素的值不会显示在查询字符串中）。

`controller.php`稍后您可以通过`$_REQUEST['element_name']`或`$_POST['element_name']`或`$_GET['element_name']`根据表单方法类型访问它们的值。**

# c# - 函数中的参数是按顺序执行的吗？

> ID：11342208
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:41.610
> 
> 标签：c#

在 C# 中，如果我有打印两个值的函数，则假定它被称为 print... 在以下情况下，输出是什么

```
int i=0;
public int current_I(){return i;}
public int next_I(){return ++i;}
//---------
print(next_I(),current_I()); 
```

换句话说，我们能否知道哪个函数将首先执行 {current_I 或 next_I} 或者就像 C++ 一样，我们永远无法知道参数的执行顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:16:36.677

[函数参数严格从左到右进行评估](http://msdn.microsoft.com/en-us/library/Aa691335)。

寻找线

> 在函数成员调用的运行时处理期间（第 7.4.3 节），参数列表的表达式或变量引用按从左到右的顺序计算，如下所示：

在第三组要点之上。

# c# - 如何使用字符串定位对象的属性？

> ID：11342209
> 
> 赞同：0
> 
> 时间：2012-07-05T10:14:41.703
> 
> 标签：c#, object, reflection, properties

例如，如何动态地引用 Employee 类型的对象的属性？我在追求类似的东西`employee."hasBeenPaid"`？它涉及反射吗？

```
class Employee
{
    String name;
    Bool hasBeenPaid;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:18:11.200

你可以试试：

```
Type type = your_class.GetType();
PropertyInfo propinfo = type.GetProperty("hasBeenPaid"); 
```

如果你需要价值

```
value = propinfo.GetValue(your_class, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:17:35.160

您可以使用[动态 C# 功能](http://msdn.microsoft.com/en-us/library/dd264736.aspx)；是的，它将在运行时使用反射来解析您的属性。

# java - java.lang.InterruptedException 使用 swingworker

> ID：11342210
> 
> 赞同：1
> 
> 时间：2012-07-05T10:14:50.283
> 
> 标签：java, swing, interrupted-exception

我正在使用 Swingworker 从 url 地址请求值以动态更改显示信息的版本。在某些情况下，该工人被取消。问题是我有时会得到 java.lang.InterruptedException （但不是每次我取消工作人员时）。我不知道如何处理它，而且我不知道它被扔到哪里，我无法调试它，因为我在短时间内进行大量版本更改时得到它（我使用滑块，当我拖动它时会发生这种情况一段时间）。一切正常，但我收到这个烦人的错误：

```
 java.lang.InterruptedException
at java.lang.Object.wait(Native Method)
at sun.plugin2.message.Queue.waitForMessage(Unknown Source)
at sun.plugin2.message.Pipe$2.run(Unknown Source)
at com.sun.deploy.util.Waiter$1.wait(Unknown Source)
at com.sun.deploy.util.Waiter.runAndWait(Unknown Source)
at sun.plugin2.message.Pipe.receive(Unknown Source)
at sun.plugin2.main.client.MessagePassingExecutionContext.doCookieOp(Unknown Source)
at sun.plugin2.main.client.MessagePassingExecutionContext.getCookie(Unknown Source)
at sun.plugin2.main.client.PluginCookieSelector.getCookieFromBrowser(Unknown Source)
at com.sun.deploy.net.cookie.DeployCookieSelector.getCookieInfo(Unknown Source)
at com.sun.deploy.net.cookie.DeployCookieSelector.get(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.setCookieHeader(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.writeRequests(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at org.dbwiki.web.applet.ValueRequester.doInBackground(ValueRequester.java:40)
at org.dbwiki.web.applet.ValueRequester.doInBackground(ValueRequester.java:1)
at javax.swing.SwingWorker$1.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at javax.swing.SwingWorker.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

同样在上面显示的每个异常之后，都会引发附加消息：

```
sun.plugin2.main.client.PluginMain: unrecognized message ID 46 
```

有趣的是，只有当程序作为小程序在浏览器中运行时才会引发异常，如果程序从 api 作为小程序运行，则不会引发异常。

我的字符串工作者：

```
 package org.dbwiki.web.applet;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import javax.swing.SwingWorker;

public class ValueRequester extends SwingWorker<Void, Void> {
    HtmlGenerator htmlGen;
    ArrayList<String[]> versionsData;
    String id;
    private String dbName;
    ValueRequester (HtmlGenerator htmlGen, ArrayList<String[]> versionData, int ver){
    try {
        this.htmlGen=htmlGen;
        if (TreeVisualiser.typeParameter.equals(TreeVisualiser.StructureVisualiserParameter))
            this.id=htmlGen.getElem().getVersionElementId(ver);
        else if(TreeVisualiser.typeParameter.equals(TreeVisualiser.HistoryVisualiserParameter))
            this.id=htmlGen.getElem().getId();
        this.dbName=htmlGen.getElem().getDBName();
        this.versionsData=versionData;
    } catch (Exception e) {
        e.printStackTrace();
    }

    }
    protected Void doInBackground() throws Exception {
    try{
        String value="";
        URL historyURL = new URL("http://127.0.0.1:8080/"+dbName+id+"?value");
        URLConnection hc = historyURL.openConnection();     
        BufferedReader in = new BufferedReader(new InputStreamReader(hc.getInputStream()));  
        String line;
        while ((line = in.readLine()) != null) {
            value+=line;
        }
        in.close();

        this.htmlGen.formDisplayerHead();
        this.htmlGen.formNodeDataHtml(value,this.versionsData);
        this.htmlGen.formDisplayerTail();
    }   
    catch(Exception e)
    {
        e.printStackTrace();
    }
        return null;
}

protected void done()
{
    if (!this.isCancelled())
    this.htmlGen.dataDisplayer.setText(this.htmlGen.getHtml());

}

} 
```

我现在知道是什么原因造成的，如何处理它或至少如何隐藏它（因为一切正常）。任何帮助，将不胜感激。

**更新：**

我尝试在 ValueRequester.doInBackround() 中捕获此异常，但是我的 catch 语句没有捕获该异常。我更新的 doInBackground() 代码：

```
protected Void doInBackground() throws Exception {
       try{
          String value="";
            URL historyURL = new URL("http://127.0.0.1:8080/"+dbName+id+"?value");

            URLConnection hc = historyURL.openConnection(); 
            InputStream inputStrm=hc.getInputStream();
           InputStreamReader inputStrmRdr= new InputStreamReader(inputStrm);
            this.in = new BufferedReader(inputStrmRdr);  
            String line;
            while ((line = in.readLine()) != null) {
                value+=line;
            }
            this.htmlGen.formDisplayerHead();
            this.htmlGen.formNodeDataHtml(value,this.versionsData);
            this.htmlGen.formDisplayerTail();
       }catch (InterruptedException e){
           System.out.println("Interrupted Exception caught!");
          // e.printStackTrace();
       }

    return null;
} 
```

不幸的是，仍然打印堆栈跟踪而不是我的系统输出消息。知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:44:37.860

据我所知，`InterruptedException`只有在其他线程调用`Thread.interrupt()`被阻塞的线程时才会发生。在这种情况下，很明显被中断的线程当时正在`wait()`调用中。

查看 SwingWorker 代码，如果调度的线程决定调用`cancel(true)`它，则似乎工作线程将获得中断。根据工作线程当时正在做什么，它可能会得到一个`InterruptedException`，或者它可能只是`Thread.interrupted`设置了它的标志。

因此，您的问题的解决方案似乎是找出调用实例`cancel(true)`的内容。`SwingWorker`然后要么将其更改为不这样做……要么让您的工人阶级`InterruptedException`适当地处理。适当的行为可能是捕获异常并从`call(...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:35:11.787

对我来说，它看起来就像你在打电话`worker.cancel(true);`（假设工人是你的 SwingWorker）。`true`表示如果当前 Thread 处于可中断状态，则该 Thread 可以被中断。发生这种情况时，它会自动抛出一个异常，指示线程已被中断，从而允许您释放资源并可能做一些事情。我想在您的情况下，您可以放心地忽略这一点并简单地关闭打开的流。

就您而言，根据您在“工作”中的距离，任务可能会被中断或不被中断。

在此处查看有关[线程中断](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)的更多信息。

# android - 带有处理程序的 Android AsyncTask

> ID：11342211
> 
> 赞同：2
> 
> 时间：2012-07-05T10:14:51.503
> 
> 标签：android, android-asynctask, orientation, handler

我正在开发一个 android 应用程序，我需要在其中下载一些图像并开始幻灯片放映。为了下载图像，我使用的是 AsynTask，一旦图像被下载，我就使用处理程序来开始幻灯片放映。但是在方向改变期间，我无法控制处理程序。因为处理程序对象是用 AsyncTask 类定义的。

以下是我所做的大致情况：

**A 类扩展 Activity**

B 类异步 = 新 ClassB(this);

async.execute();

**B类扩展AsyncTask实现OnPageChangeListener、OnTouchListener**

onPreExecute() --------这个方法什么都没有

doInBackground --------我在这里下载图片

onPostExecute ---------处理程序从这里开始，每 5 秒运行一次，以实现幻灯片放映

**现在的问题：**

在方向更改期间，我确保 AsyncTask 仅被调用一次，否则它会再次下载图像，因此处理程序在方向更改期间未运行。

启动的第一个处理程序对象，它继续运行，但更改不会反映在屏幕上。

我正在考虑以一种方式实现，即使用 AsyncTask 下载图像，一旦下载完成，ClassA 应该获得焦点，并且应该在 ClassA 中实现处理程序（仅在下载图像时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:32:51.237

接口类命名是根据我的情况。请根据您的要求进行调整。`ArtikelDetailsDataLoader`我的异步任务。这告诉我的活动详细信息已加载。

在你的 B 类

```
public interface OndetailsLoadInterface {
    public void onDetailsLoad(ArtikelDetailsInfo artikelDetails);
}

OndetailsLoadInterface detailsLoaderInterface;

public void setOnDetailsLoadListener(OndetailsLoadInterface detailsLoader) {
    detailsLoaderInterface = detailsLoader;
} 
```

并且在`onPostExecute`

`detailsLoaderInterface.onDetailsLoad(artikelDetails);`

并且在 A 级

`ArtikelDetailsDataLoader mLoader = new ArtikelDetailsDataLoader( items.get(position).getId(), mContext); mLoader.setOnDetailsLoadListener(mLoaderLisnter);`

和

```
OndetailsLoadInterface mLoaderLisnter = new OndetailsLoadInterface() {

        @Override
        public void onDetailsLoad(ArtikelDetailsInfo artikelDetails) {
            //do slide show

        }

    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:35:30.653

只需在您的`Activity`调用`startSlideShow(position)`中创建一个您从您的方法调用的`onPostExecute()`方法，使用`startSlideShow(0)`.

在方向更改时保存您当前的幻灯片放映位置和下载的图像，然后在您`onCreate(Bundle savedInstance)`使用`startSlideShow(restoredPosition);`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:53:16.413

如果您的问题是由于方向更改时 Activity 重新启动引起的，您是否考虑在您的 AndroidManifest.xml 条目中为 Activity 设置 android:configChanges="orientation" 以防止重新启动？

然后，如果您需要对 UI 执行任何更新（例如切换到不同的布局），您可以处理 onConfigurationChanged(Configuration) 并自己实现它。

# joomla - Joomla 2.5 中一页上的相同模块

> ID：11342216
> 
> 赞同：0
> 
> 时间：2012-07-05T10:15:35.790
> 
> 标签：joomla, module

我正在使用 JA Cloris 模板，它是 joomla 2.5 的单页模板。我在页面的一部分中实现了一个模块。是否可以在同一页面的不同位置实现相同的模块。如果有请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:16:37.290

如果您想在页面上显示相同的模块两次，只需将模块的另一个副本添加到模块管理器并将其放置在不同的模块位置。只需在模块管理器中添加另一个副本，即可在相同或不同页面上多次使用大多数模块。

如果您需要以不同的方式设置模块的样式（例如：一个是宽阔的水平模块位置与垂直或方形侧边栏位置），请添加模块类后缀。这将允许您向模块添加 CSS 样式，而不会影响页面上的其他副本。

# java - 安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE

> ID：11342223
> 
> 赞同：7
> 
> 时间：2012-07-05T10:15:54.573
> 
> 标签：java, android, eclipse, android-emulator, google-tv

我尝试了很多方法来修复`Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE`，但直到现在，我可以增加我的实习内存。

我试过的方法：

1.  右键单击您的 Android 项目的根目录，转到“运行方式”然后转到“运行配置...”在左侧树中找到“Android 应用程序”节点，然后选择您的项目并转到“目标”窗口右侧的选项卡向下查找“Additional Emulator Command Line Options”字段（有时您需要使窗口更大），最后将“-partition-size 1024”粘贴到那里。单击应用，然后单击运行以使用您的模拟器。

2.  转到 Eclipse 的 Preferences，然后选择“Launch” 在“Default emulator option”字段中添加“-partition-size 1024”，然后单击“Apply”并像往常一样使用您的模拟器。

3.  打开您的 .Android 目录。通常在您的主目录中。然后转到 avd，然后打开包含您要更改的 avd 名称的目录。

4.  现在编辑 config.ini 文件并添加以下行或修改以下行：`disk.dataPartition.size=1024`

这一切都在 Linux 中为我工作。

我使用我的应用程序通过以下方式存储在外部存储中：

```
android:installLocation="preferExternal" 
```

但后来我收到了

> 安装错误：INSTALL_FAILED_MEDIA_UNAVAILABLE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T07:44:12.297

错误

```
Installation error: INSTALL_FAILED_MEDIA_UNAVAILABLE 
```

表示您的设备没有 SD 卡。

错误

```
Installation error: INSTALL_FAILED_INSUFFICIENT_STORAGE 
```

意味着您的应用程序在设备上没有足够的空间。

接下来你应该做：

1.  Write`android:installLocation="auto"`和 android 本身会关心在哪里安装您的应用程序 - 内部或外部存储器。
2.  确保设备有足够的内存用于安装（通常大于 apk 的大小）。
3.  如果您的应用确实需要大量空间 - 请阅读本[指南](http://developer.android.com/guide/google/play/expansion-files.html)。
4.  如果您使用模拟器 - 设置 sd 卡支持：![在此处输入图像描述](../Images/17dd1650c1c6bcc8ba02ffdff1ee1a26.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T23:03:16.250

尝试使用这些选项，使用该配置我可以安装一个 23MB 的应用程序：![在此处输入图像描述](../Images/85127202f1eeb2ccf1173eda9ae1adef.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:26:36.687

尝试卸载安装在模拟器上而不是内置的应用程序。您还可以通过编辑模拟器设置来更改 SD 卡的大小，但是运行您的应用程序需要时间，因为需要将这么多内存转换为可挂载分区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T08:10:51.277

当我运行我的应用程序时，我也遇到了类似的问题。在我的 Google TV 模拟器中，它没有显示用于外部存储的 USB 存储。尝试增加模拟器新硬件中的缓存内存和内存大小。

如何增加模拟器的虚拟内存：

```
\\emulator -avd "Emulator Name" -partition-size 500 
```

之后，尝试安装您的 apk。

# liferay-6 - Liferay：如何通过Portlet类接收renderURL的参数

> ID：11342224
> 
> 赞同：0
> 
> 时间：2012-07-05T10:15:57.007
> 
> 标签：liferay-6

我读到renderURL将只负责执行renderPhase（即java类的doView方法）

现在在其中一个 JSP 中，我有一个超链接可以导航到如图所示的另一个页面（这是 Portlet 的起始页面）

```
 <a href="<portlet:renderURL>
  <portlet:param name="goto" value="IpByHourPage"/>
<portlet:param name="jspPage" value="/page2.jsp" />
</portlet:renderURL>">
Click here to go to Second Page
</a> 
```

现在我的问题是，是否有可能代替在 page2.jsp 中获取参数并对其进行处理，是否可以在 java 文件中接收这些参数

我想在 SecondPort 中接收这个参数，如下所示。

**例如**

```
public class SecondPort extends MVCPortlet {
public void doView(RenderRequest renderRequest, RenderResponse renderResponse  throws IOException, PortletException 
{

// do something in this code here .

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:54:12.340

是的，您可以`<portlet:param>`在 portlet 类的标记中获取参数集。
您可以通过以下方式在方法中读取该参数`doView`：-

```
public class SecondPort extends MVCPortlet {
public void doView(RenderRequest renderRequest, RenderResponse renderResponse  throws  
IOException, PortletException 
{
   String goto = renderRequest.getParameter("goto");
   String jspPage= renderRequest.getParameter("jspPage");      

    //Do something here....
} 
```

像这样..

# c# - 如何在asp.net中将gridview下载为pdf？

> ID：11342229
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:16:20.387
> 
> 标签：c#, asp.net, pdf, gridview

我有一个名为 GridView1 的网格视图。我想以 PDF 格式下载此网格视图。为此，我尝试了以下代码。

PDF 文件正在下载但未打开。我收到错误，即 Adob​​e Reader 无法打开此文件。

请帮我。

```
 SqlDataAdapter da = new SqlDataAdapter("select * from info", con);
    DataTable dt = new DataTable();
    da.Fill(dt);
    GridView1.DataSource = dt;
    GridView grdview = new GridView();
    GridView1.DataBind();

    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=GridViewExport.pdf");
    HttpContext.Current.Response.ContentType = "application/pdf";  
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    GridView1.RenderControl(hw);
    HttpContext.Current.Response.Write(sw.ToString());
    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:26:06.377

事实上 PDF 文件有自己的格式，但是 GridView.RenderControl 呈现 HTML。您必须使用将 HTML 转换为 PDF 的第三方 PDF 创建库，或以其他方式创建 PDF。

# r - 从任何变量不为 NA 的数据框中选择行

> ID：11342230
> 
> 赞同：6
> 
> 时间：2012-07-05T10:16:29.243
> 
> 标签：r

> **可能重复：**
> [在 R 中删除数据文件的空行](https://stackoverflow.com/questions/6437164/removing-empty-rows-of-a-data-file-in-r)

假设我有一个数据框`df`

我想从中选择行，其中行中的任何变量都不是`NA`. 也就是说我只想排除**所有**变量所在的行`NA`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T11:55:09.173

```
df[apply(!is.na(df), 1, any), ] 
```

# ios - 如何让 UITableView 与 CAShapeLayer 掩码一起使用？

> ID：11342236
> 
> 赞同：0
> 
> 时间：2012-07-05T10:16:48.647
> 
> 标签：ios, uitableview, cashapelayer

我想以三角形的形状掩盖 UITableView。我的第一种方法是设置一个 CAShapeLayer 并将其作为蒙版直接添加到表格视图上。但后来，我得到了与表格视图一起滚动的三角形。

我的下一个方法是将表格视图作为具有完全相同位置和大小的超级视图放在 UIView 中。在下面的代码片段中，self.triangleView 是超级视图。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CAShapeLayer *mask = [[[CAShapeLayer alloc] init] autorelease];
    mask.frame = _tableView.bounds;
    mask.fillColor = [[UIColor blackColor] CGColor];

    CGFloat width = self.triangleView.frame.size.width;
    CGFloat height = self.triangleView.frame.size.height;

    CGMutablePathRef path = CGPathCreateMutable();

    // draw the triangle
    CGPathMoveToPoint(path, NULL, 0, height);
    CGPathAddLineToPoint(path, NULL, width, 0);
    CGPathAddLineToPoint(path, NULL, width, height);
    CGPathCloseSubpath(path);

    mask.path = path;
    CGPathRelease(path);

    self.triangleView.layer.mask = mask;
} 
```

到目前为止，这很有效，因为我现在有一个形状像三角形的表格视图。但我现在有问题，我无法滚动表格视图。超级视图不会将触摸路由到内部的表格视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:42:40.897

TableView 是 UIScrollView 的子类。并且 UITableViewDelegate 符合 UIScrollViewDelegate，所以你可以覆盖 scrollViewDidScroll 并根据 UIScrollView contentOffset 移动你的遮罩层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:04:16.717

解决方案是在层次结构中再使用一个 UIView 来掩盖它们的顶部。听起来很奇怪，但对我有用。

# css - html5 样式在 IE8 中不起作用

> ID：11342237
> 
> 赞同：0
> 
> 时间：2012-07-05T10:16:50.627
> 
> 标签：css, html, jquery-masonry, modernizr

我正在使用modernizr并声明显示：元素的css中的块，但没有应用任何样式！

链接是： http: [//www.complexd.co.uk/blog-intro/](http://www.complexd.co.uk/blog-intro/)

jquery masonry 在 IE 中也坏了 - 不确定这是否相关。我所有解决此问题的尝试都失败了，所以如果有人能引导我朝着正确的方向前进，我将不胜感激。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:24:17.170

下载 [http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

尝试这个

`<!--[if lt IE 9 ]> <script src="/public/script/html5shiv.js"></script> <![endif]-->`

将 src 更改为您的路径

# r - R在多个条件下丢弃行

> ID：11342239
> 
> 赞同：0
> 
> 时间：2012-07-05T10:16:54.180
> 
> 标签：r, filter, dataframe, subset

我有一个关于在我的数据集中进行过滤的问题。我的数据集如下所示：

```
 PROJECT       FREQ
1       <NA>         NA
2       <NA>         NA
3       FSHD 0.01282051
4       <NA>         NA
5       <NA>         NA
6  GROEI,CMS 0.02564103
7       <NA>         NA
8      GROEI 0.00000132
9       <NA>         NA
10  NMD,BRCA 0.03846154 
```

这是我的问题：我想丢弃 PROJECT 字段中没有的所有行：GROEI 和 FREQ 字段中：大于 0.01。

我想过这样的事情，但这不是办法..

```
a1<-a[!(a$PROJECT != "GROEI" & a$FREQINHDB >= 0.02),] 
```

谁能帮我这个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:34:14.633

由于您想匹配部分字符串，您可以使用`grepl`正则表达式与您的数据进行匹配：

```
na.omit(a[!grepl("GROEI", a$PROJECT), ])
    n  PROJECT       FREQ
3   3     FSHD 0.01282051
10 10 NMD,BRCA 0.03846154 
```

# windows - 在 qt creator 中链接 ffmpeg 库时出现运行时错误

> ID：11342243
> 
> 赞同：2
> 
> 时间：2012-07-05T10:17:18.347
> 
> 标签：windows, qt, ffmpeg, qt-creator

我在这里很新，但我听说如果你想回答一个问题，stackoverflow 是问它的地方>.<。所以我希望我的问题不是太琐碎，每个人都会对我缺乏研究感到恼火（我已经尝试用谷歌搜索两天了 D = 没有进展！）我也在 Qt 论坛中问过这个问题，但是我想我也会在这里问。

所以...

最近几天我一直在摆弄opengl之类的东西，试图写一个视频播放器。

但是，当我尝试导入 ffmpeg 库（avcodec、avformat、avutils 等）时，运行时出现错误（程序编译正常）。在调试模式下编译和运行时，错误消息只给我一个内存地址和错误代码 135（找不到 DLL）。

当我在我的代码中包含来自这些库的函数（例如 av_register_all()）时会发生此错误，并且无论是否实际调用该函数都会发生此错误。

所以我在想我在链接这些库时做错了什么。我目前正在使用：Windows vista (32bit)、基于 Qt 4.7.4 (32bit) 的 Qt creator 2.4.1、Zeranoe 的 FFmpeg build git-3233ad4 (2012-06-30)

我的 .pro 文件包括：

```
QT       += core gui opengl

TARGET = test
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    glwidget.cpp

HEADERS += mainwindow.h \
    glwidget.h \

FORMS    += mainwindow.ui

LIBS += -L"$$_PRO_FILE_PWD_/libraries/ffmpeg/libs/" -lavcodec -lavformat -lavutil
INCLUDEPATH += libraries/ffmpeg/includes 
```

我尝试了 LIBS += 行的许多变体，并多次检查了我的文件路径。但是，在所有这些变体中都会出现 DLL not found 错误 =(.

做这些包括时有什么我忘记的吗？

在此先感谢>.<，（年轻而天真）有抱负的开发者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:50:19.890

由于错误表明未找到 DLL，并且当您包含 ffmpeg 函数时会发生此错误，这意味着 ffmpeg 库是动态链接的（即它们是 DLL）。这意味着要让您的 exe 工作，它需要加载 ffmpeg DLL。您需要将这些 DLL 与您的 exe 文件放在同一目录中。在那里复制它们。使用[dependency walker](http://www.dependencywalker.com/)来查看您需要复制哪些DLL，但它们应该看起来像`avcodec-52.dll, avdevice-52.dll, avformat-52.dll, avutil-49.dll`，可能还有更多，这取决于您构建的ffmpeg。

# url - 如何从当前月份和年份构造一个 url 以将用户重定向到当前月份的页面？

> ID：11342246
> 
> 赞同：0
> 
> 时间：2012-07-05T10:17:35.747
> 
> 标签：url, date, redirect

我每个月都会在我的网站上发布一个新页面，这些页面都采用以下形式：

.../[月]_[年]/index.php

我编写了一个名为 latest.html 的简单文件，它通过包括以下内容将用户重定向到最近一个月的页面（以便他们始终可以使用相同的 URL 访问最新页面）：

```
<meta HTTP-EQUIV="REFRESH" content="0; url=/july_2012"> 
```

但是，显然，我需要每个月手动更新它。我想知道如何实现自动化，以便根据我服务器上的当前月份/日期自动生成 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:22:04.450

在 latest.html 文件中，您可以使用：

```
<?php

header('Location: '.date('m', time()).'_'.date('Y', time()).'/index.php');
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:36:29.883

您可以根据月份和年份进行检查，然后替换页面

例如，如果您有 4 个月：

```
jan.php
feb.php 
march.php 
april.php 
```

只需在`index.php`.

```
<?php
    $date =date('m-Y');
    if( $date =='01-2012' ){
        include('jan,php');}
    else if($date=='02-2012'){
        include('feb,php');}
    elseif (some condtion){
        ....
    }
    else{
        include('index,php');
    }
?> 
```

如果您以这种方式尝试它可能会有所帮助。

# svn - 我的 svn 差异不工作？

> ID：11342249
> 
> 赞同：0
> 
> 时间：2012-07-05T10:17:46.960
> 
> 标签：svn, unix

我正在运行“post-review”，它在我的工作区域中有效地调用 svn diff。但是，在运行命令时，我收到以下错误消息：

```
Failed to execute command: ['svn', 'diff', '--diff-cmd=diff']
 "svn: Directory 'src/third-party/src/boost_1_49_0/tools/build/v2/engine/bootstrap/.svn' containing working copy admin area is missing\n"] 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:20:32.200

将您的文件夹签出到其他位置，然后将其 .svn 文件夹复制回原始文件夹。

也许 ：）

编辑：您是否不小心删除了 .svn 文件夹？

# c# - 从 C# 中的 24 bpp 图像验证特定颜色

> ID：11342251
> 
> 赞同：0
> 
> 时间：2012-07-05T10:18:00.453
> 
> 标签：c#, image-processing

> 是否可以从 24bpp 图像中检测某些颜色，如灰色或红色，以便我可以提取或突出显示提供的图像上的特定颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:32:43.973

是的，您可以比较像素值。

以下链接显示了 [如何在运行时更改图像的颜色](https://stackoverflow.com/questions/383103/how-to-change-color-of-image-at-runtime-c-sharp-asp-net)

如何比较，

```
 bmp.GetPixel(x, y) == Color.Red 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T20:47:27.923

就像@Tilak 所说，您可以使用`bitmap.GetPixel`循环`for`来搜索图像，就像这样

```
for(int y = 0; y < b.Height; y++)
{
     for(int x = 0; x < b.Width; x++)
     {
         if(b.GetPixel(x, y) == Color.Red)
         {
              //do something
         }
     }
} 
```

但是如果你想要一个“更简单”的方式，你可以使用

```
foreach(Color c in b)
{
     if (c == Color.Red)
     {
          //do something
     }
} 
```

但由于这些`arbg`值可能不*完全*等于 Red 的值，请执行以下操作：

```
 int pixelA = c.A;
            int pixelR = c.R;
            int pixelG = c.G;
            int pixelB = c.B;

            int searchA = Color.Red.A;
            int searchR = Color.Red.R;
            int searchG = Color.Red.G;
            int searchB = Color.Red.B;

            diffA = Math.Abs(pixelA - searchA);
            diffR = Math.Abs(pixelR - searchR);
            diffG = Math.Abs(pixelG - searchG);
            diffB = Math.Abs(pixelB - searchB);

            if (diffA < 10 && diffB < 10 && diffG < 10 && diffR < 10)
            {
                //do something                }

            if (diffA > 10 && diffA < 20 && diffR > 10 && diffR < 20 && diffG > 10 && diffG < 20 &&
                diffB > 10 && diffB < 20)
            {
                //do something                }

            if (diffA > 20 && diffA < 130 && diffR > 20 && diffR < 130 && diffG > 20 && diffG < 130 &&
                diffB > 20 && diffB < 130)
            {
                //do something
            }

            if (diffA > 130 && diffA < 240 && diffR > 130 && diffR < 240 && diffG > 130 && diffG < 240 &&
                diffB > 130 && diffB < 240)
            {
                //do something
            }

            if (diffA > 240 && diffA < 350 && diffR > 240 && diffR < 350 && diffG > 240 && diffG < 350 &&
                diffB > 240 && diffB < 350)
            {
                //do something
            } 
```

所以你可以看到不同程度的颜色。希望这可以帮助！

# iphone - 带有情节提要的 UITabBar 图像到 UITabBarItem

> ID：11342258
> 
> 赞同：2
> 
> 时间：2012-07-05T10:18:10.407
> 
> 标签：iphone, ios, ios5, storyboard

我有`UITabBarController`哪`UITabBar`三个`UITabBarItem`。项目带有故事板。如何为每个设置不同的图像`UITabBarItem`？

我想做这样的事情：

`TabBarItem1 -> image1_unselected and image1_selected`

`TabBarItem1 -> image2_unselected and image2_selected`

`TabBarItem1 -> image3_unselected and image3_selected`

**编辑：**

可能我写的不准确，但我想设置自定义图像并`UITabbar`使用自定义图形制作。类似于`UITabbar`“查找我的朋友”应用程序中的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:07:06.187

好的，我找到了解决方案。

在我的开头，`viewDidLoad`我`firsTabBarViewController.m` 添加了以下代码：

```
UIImage *selectedImage0 = [UIImage imageNamed:@"barBtn1_selected.png"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"barBtn1.png"];

UIImage *selectedImage1 = [UIImage imageNamed:@"barBtn2_selected.png"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"barBtn2.png"];

UIImage *selectedImage2 = [UIImage imageNamed:@"barBtn3_selected.png"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"barBtn3.png"];

UITabBar *tabBar = self.tabBarController.tabBar;

UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2]; 
```

现在我的问题正是我想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:38:39.677

`TabBar`图像为 32x32 点或更小，并且由 iOS 自动设置样式以显示在`monochromatic`配色方案中（无论您选择什么）。在创建标签栏界面艺术时，具有透明背景的简单线条图效果最好。

这是通过首先将图像资源添加到您的项目来完成的。

然后单击`TabBarItem`您要编辑的，然后转到属性检查器 ( `Alt + Cmd + 4`)

然后把' `Identifier`'改成' `Custom`'

最后，从图像下拉列表中选择您的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T23:59:58.243

**murzynpl**答案是正确的，但是您也可以通过`AppDelegate.m`在`didFinishLaunchingWithOptions`方法中添加以下代码来做到这一点

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
UITabBar *tabBar = tabBarController.tabBar;
UITabBarItem *tabBarItem1 = [tabBar.items objectAtIndex:0];
UITabBarItem *tabBarItem2 = [tabBar.items objectAtIndex:1];

tabBarItem1.title = @"Home";
tabBarItem2.title = @"Favorites";

NSString *tabOneImage = [[NSString alloc] init];
NSString *tabOneImageSelected = [[NSString alloc] init];
NSString *tabTwoImage = [[NSString alloc] init];
NSString *tabTwoImageSelected = [[NSString alloc] init];

if ([UIScreen mainScreen].bounds.size.height > 480.0f) {
    tabOneImageSelected = @"home_icon_selected-568h@2x.png";
    tabTwoImageSelected = @"fav_icon_selected-568h@2x.png";
    tabOneImage = @"home_icon-568h@2x.png";
    tabTwoImage = @"fav_icon-568h@2x.png";
}
else {
    tabOneImageSelected = @"home_icon_selected.png";
    tabTwoImageSelected = @"fav_icon_selected.png";
    tabOneImage = @"home_icon.png";
    tabTwoImage = @"fav_icon.png";
}

[tabBarItem1 setFinishedSelectedImage:[UIImage imageNamed:tabOneImageSelected]
          withFinishedUnselectedImage:[UIImage imageNamed:tabOneImage]];
[tabBarItem2 setFinishedSelectedImage:[UIImage imageNamed:tabTwoImageSelected]
          withFinishedUnselectedImage:[UIImage imageNamed:tabTwoImage]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:51:48.467

在每个 `viewcontroller`.

-> 在`initwithnibname`....; 方法

`self.tabBarItem.image = [UIImage imageNamed:@"image.png"];`

# javascript - 有没有办法在直播时调整图像大小？

> ID：11342264
> 
> 赞同：1
> 
> 时间：2012-07-05T10:18:24.027
> 
> 标签：javascript, html, css, image, web

例如，使用类似于 firebug 的东西，这样您就可以看到其他页面元素是如何环绕它的。[除了http://makiapp.com/maki](http://makiapp.com/maki)之外，我不知道类似的东西，这很有用但并不理想，因为它不会在图像周围环绕文本。

有没有办法直接在网站上重新调整图像大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:32:05.187

不清楚你到底想要什么，但我还是做了一个小提琴：http: [//jsfiddle.net/sveinatle/r8J9F/2/](http://jsfiddle.net/sveinatle/r8J9F/2/)

如果您想在自己的页面上使用它，那么您可以按原样添加代码，并将类添加`resizable`到您希望能够调整大小的任何元素（不需要是图像）。

如果您想在页面上使用它而不修改其源代码，那么您可以打开 Firebug 并在控制台中运行代码，只需将`$('.resizable')`选择替换为与您要调整大小的元素匹配的内容即可。`$('*')`将其应用于一切。

编码：

```
var startX,startY,
    startW,startH,
    $box=null;
$('.resizable').mousedown(function(e){
    startX = e.pageX;
    startY = e.pageY;
    $box = $(this);
    startW = $box.innerWidth();
    startH = $box.innerHeight();
    return false;
});

$('body')
    .mouseup(function(){
        $box = null;
        return false;
    })
    .mousemove(function(e){
        if($box!=null){
            $box.innerWidth (startW + e.pageX-startX);
            $box.innerHeight(startH + e.pageY-startY);
        }
    }); 
```

# c# - 来自 C# 的 Google 图表 javascript 值？

> ID：11342266
> 
> 赞同：0
> 
> 时间：2012-07-05T10:18:29.423
> 
> 标签：c#, javascript, parameters, charts

我在我的网站上使用 Google 图表，我想从我的 c# 后面的代码中向 javascript 传递一个值。我该怎么做？下面示例中的 0 值应该是从 C# 计算得出的值。

我在标题中的javascript：

```
 google.load('visualization', '1', { packages: ['gauge'] });
  google.setOnLoadCallback(drawChart);
  function drawChart() {
      var BudgetData = google.visualization.arrayToDataTable
        ([
            ['Label', 'Value'],
            ['YTD', 0]
        ]);

      var options = {
          width: 350, height: 150,
          max: 100, min: -100
      };
      //Budget
      var chart = new google.visualization.Gauge(document.getElementById('BudgetGauge'));
      chart.draw(BudgetData, options);
  } 
```

然后图形显示为：div id="BudgetGauge" style="height: 100px;">"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:32:01.227

您可以使用 C# 中的注册数组声明方法来注册一个 java 脚本数组，然后从 Javascript 中访问它。

在页面加载

```
Page.Clientscript.RegisterArrayDeclaration("ArrayName","['Label', 'Value']");
Page.Clientscript.RegisterArrayDeclaration("ArrayName","['YTD', 0]"); 
```

然后像这样将数组放在arrayToDataTable方法中

```
var BudgetData = google.visualization.arrayToDataTable(ArrayName); 
```

# jboss - 错误 jsp 154 java.lang.classnotfound

> ID：11342268
> 
> 赞同：0
> 
> 时间：2012-07-05T10:18:34.430
> 
> 标签：jboss, struts2, ejb, liferay

我正在开发一个portlet struts 2 ejb3 我配置了项目ejb，在portlet项目中我配置了动作类和struts.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
 <package namespace="/view" extends="struts-portlet-default" name="view">
     <!-- If no class attribute is specified the framework will assume success and
        render the result index.jsp -->
        <!-- If no name value for the result node is specified the success value is the default -->
  <action name="index">
   <result>/html/view/index.jsp</result>
  </action>

  <action name="create" method="ajouterOUmodifier" class="com.esprit.action.AdressAction">
          <result name="success" type="redirect">index</result>
           <result name="input">/html/view/ajoutAdress.jsp</result>
    </action>

    </package>
</struts> 
```

和jsp文件

```
 <%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sx" uri="/struts-dojo-tags" %>
<html>
<head>
    <link href="<s:url value="/resources/main.css"/>" rel="stylesheet" type="text/css"/>
</head>
<body>
<s:form action="create" method="post">

 <s:textfield name="adress.nom" label="Firstname"/>
  <s:textfield name="adress.prenom" label="Lastname"/>
                <s:submit value="ok" />
        </s:form>
</body>
</html> 
```

但是当我执行项目时显示错误：

> 错误 [jsp:154] java.lang.ClassNotFoundException: com.esprit.metier.AdressDao 来自 BaseClassLoader@33b2c7a8{VFSClassLoaderPolicy@1e52011c{name=vfsfile:/D:/android/jboss-5.1.0.GA/server/default/ deploy/DepartmentWEB-portlet.war/ domain=ClassLoaderDomain@69ac5f83{name=vfsfile:/D:/android/jboss-5.1.0.GA/server/default/deploy/DepartmentWEB-portlet.war/ parentPolicy=AFTER_BUT_JAVA_BEFORE parent=ClassLoaderDomain @5183a17c{DefaultDomain}} 根=[MemoryContextHandler@432465105[路径=上下文=vfsmemory://5c4o13m-e9nqdk-h49ogxti-1-h49ohbp5-2a

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:16:37.927

ClassNotFound 条件可能由两个问题引起：

1.  类加载器抱怨的类不在类路径上
2.  类加载器抱怨的类引用了另一个由于某种原因无法加载的类（例如，它不在类路径上或引用了其他不存在的东西......）

所以：检查你的类路径：`com.esprit.metier.AdressDao`在那儿吗？它的超类（整个层次结构）和它实现的所有接口？所有成员和引用的类（也请参见方法签名）。

此外，如果这确实是一个 portlet 的 jsp，它不应该包含`<html>`，因为这是门户网站的业务，将这些添加到页面中`<head>`。`<body>`您可能还需要在主题或`<header-css>`部分中的 liferay-portlet.xml 中包含您的 css（但这不应该影响您的类未找到体验，这只是一般门户建议）

# javascript - 为什么要将函数声明分配给命名变量？

> ID：11342270
> 
> 赞同：4
> 
> 时间：2012-07-05T10:18:46.213
> 
> 标签：javascript, function, function-declaration

编辑：**这不是将函数声明分配给命名变量**- 检查接受的答案。保留标题是因为其他人可能会犯和我一样的错误。

* * *

在阅读 Paul Irish 的[无限](https://github.com/paulirish/infinite-scroll)滚动 jquery 插件代码时，我一次又一次地绊倒了以下模式：

```
...
_create : function infscr_create (options, callback) { /* ... */ },
... 
```

这样做有什么好处，而不是：

```
...
_create : function (options, callback) { /* ... */ },
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:20:57.753

这样做的好处（称为“命名函数表达式”）是函数具有实际名称。在您的第二个版本中，该*属性*有一个名称，但该函数没有。为函数提供实际名称有助于您的工具帮助您（调用堆栈列表、断点列表等）更多：[*匿名者匿名*](http://blog.niftysnippets.org/2010/03/anonymouses-anonymous.html)

它的*缺点*是它在一些损坏的 JavaScript 引擎中会产生意想不到的结果，例如 IE8 和更早版本中的引擎。在 IE8 和更早版本中，Paul Irish 的版本[在两个完全不同的时间创建了两个独立的函数](http://blog.niftysnippets.org/2010/09/double-take.html)。但这并不是真正的问题，除非您保留并使用对它们的引用，并期望它们是相同的函数（例如，在连接和取消连接事件处理程序时）。鉴于是保罗，我猜他肯定不会那样做。

* * *

关于您的问题标题：请注意，它**不是**函数*声明*，但您认为它是可以原谅的，因为它看起来几乎完全一样。:-) 这是一个函数*表达式*。函数声明和函数表达式发生在完全不同的时间，并且对创建它们的范围有不同的影响。

只是为了完整性：

```
// This is a function declaration -- note that it's not a "right-hand
// value", e.g., we're not using the result of it immediately (via an
// assignment, a property initializer, calling it, or passing it into
// a function as an argument -- none of those).
//
// Declarations happen upon entry to the scope (not as part of step-by-
// step code). The function's name is added to the scope in which it's
// declared. Declarations are illegal inside branches (`if`, `try/catch`,
// `for`, etc.), but some engines will rewrite them as expressions for
// you if you do that. Others will not, they'll just always declare the
// function regardless of whether the code was reached. So don't do that.
function foo() {
}

// These are all anonymous function expressions. The function in the
// expression has no name, although some debuggers are pretty smart
// about looking at the expression and (where they can) listing a
// kind of pseudo-name for the function. Others are not that smart,
// which is why I avoid anonymous functions.
//
// Expressions happen when they're reached in step-by-step code.
var f = function() { };
var obj = {
    prop: function() { }
};
doSomethingCoolWithAFunction(function() { });
(function() { })(); // Call it immediately
!function() { }();  // Call it immediately
~function() { }();  // Call it immediately, there are a few variants

// These are all *named* function expressions.
//
// Since they're expressions, they happen when they're reached in the
// step-by-step code. The function's name is NOT added to the containing
// scope (except by engines with bugs).
//
// These are the same examples as above, but with a name. No other changes.
var f = function foo() { };
var obj = {
    prop: function foo() { }
};
doSomethingCoolWithAFunction(function foo() { });
(function foo() { })(); // Call it immediately
!function foo() { }();  // Call it immediately
~function foo() { }();  // Call it immediately, there are a few variants 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T10:21:20.640

1.  该函数有一个名称，而不是匿名函数；这显示在调试跟踪中，使调试更容易。
2.  该函数可以通过调用来调用自己`infscr_create()`

# c# - 返回一个已经从 WCF 格式化为 JSON 的字符串

> ID：11342272
> 
> 赞同：1
> 
> 时间：2012-07-05T10:19:00.900
> 
> 标签：c#, .net, ajax, json, wcf

有类似的问题，但它们涉及返回自动解析为 JSON 的对象。

我有一个包含 JSON 格式数据的字符串，我只想从我的 WCF Web 服务返回，以便我可以在 ajax 中读取它。

它不能通过简单地返回字符串来工作（我从 ajax 得到一个解析器错误）。我想知道是否有一种特定的方式可以让我从 Web 服务返回我的 JSON 字符串？

我的 ajax 很好，因为我已经使用其他提供 Web 服务的外部 json 对其进行了测试，但它不适用于我自己的（所以我假设它是我要返回的数据）。

作为参考，这里是获取和返回 JSON 的重要部分：

```
WebResponse wr = myReq.GetResponse();
Stream receiveStream = wr.GetResponseStream();
StreamReader reader = new StreamReader(receiveStream, Encoding.UTF8);
return reader.ReadToEnd(); 
```

和接口声明：

```
[OperationContract]
[WebInvoke(Method = "GET", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
string DoWork(); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T14:29:06.507

如果您不希望 WCF 在您的响应中使用任何格式（即，不将其转换为您当前拥有的字符串），您可以`Stream`从操作中返回 a。这样，WCF 将按原样返回流中的字节（请参见下面的示例代码）。您可以在这篇关于[WCF“原始”编程模型](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-web.aspx)的帖子中阅读更多相关信息。

```
public class StackOverflow_11342272
{
    [ServiceContract]
    public class Service
    {
        [OperationContract]
        [WebGet(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        public Stream DoWork()
        {
            string json = "{\"name\":\"John Doe\",\"age\":33,\"married\":true}";
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/json; charset=utf-8";
            MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
            return ms;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/DoWork"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# asp.net - PlaceHolder - 如何在 aspx 中替换占位符？

> ID：11342273
> 
> 赞同：0
> 
> 时间：2012-07-05T10:19:02.323
> 
> 标签：asp.net, asp.net-placeholder

我的项目中有一个 PlaceHolder 组件，但我想将它放在页面的右侧，因为现在它位于顶部。有机会改变它吗？

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server" Visible="true">  
        <dx:ReportParametersPanel ID="reportParameterPanel1" runat="server" ReportViewerID="ReportViewer1">    
        </dx:ReportParametersPanel>
</asp:PlaceHolder> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:26:01.223

我认为您应该将整个`Place Holder`代码包含在 a中，并将 Div 的`Div`设置为.`Style``Float:Right`

要更可控地定位 Div，请使用：

```
Position:Absolute; 
```

# java - webapplication 配置不将 .jad 文件视为 .jad 文件

> ID：11342275
> 
> 赞同：3
> 
> 时间：2012-07-05T10:19:06.677
> 
> 标签：java, jakarta-ee, configuration, java-me, jad

我正在开发一个 webapplication + j2me 应用程序。.jad/.jar 文件已经创建，现在我想从诺基亚手机中的实时 url（我部署的应用程序）下载它。但是访问 .jad 文件会给我**“文件格式未知”**错误！.

令人惊讶的是，如果我直接下载 jar 文件，它可以正常工作。但我需要下载 .jad 文件而不是 .jar 文件。

我的 .jad 文件在模拟器中运行良好。另一个惊喜是，如果我部署另一个 web 应用程序和同一个 jad 文件，我可以从同一个手机成功下载它。

我认为问题是我的 web 应用程序的配置。我在 mywebapplication 中创建了一个文本文件并尝试从手机访问它，它给了我同样的错误！这意味着配置将我的 .jad 文件视为文本文件。

如果您需要查看 web.xml 文件，任何人都可以说可能是什么问题，我将显示代码。

.jad 和 .jar 文件工作得非常好，因为我已经尝试通过在另一个应用程序中部署它并正确下载它。我认为某些过滤器和侦听器或 servlet 会导致问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:23:03.893

您需要您的服务器将这些文件的 MIME 类型设置为

```
JAD: text/vnd.sun.j2me.app-descriptor
JAR: application/java-archive 
```

如果您正在运行基于 Java 的 Web 服务器，则可以将其设置为`web.xml`

```
<mime-mapping>
 <extension>jad</extension>
 <mime-type>text/vnd.sun.j2me.app-descriptor</mime-type>
</mime-mapping>

<!--JAR file -->
<mime-mapping>
 <extension>jar</extension>
 <mime-type>application/java-archive</mime-type>
</mime-mapping> 
```

或配置适当的过滤器来做同样的事情

# android - 在 CDMA 上开始通话时数据连接丢失？

> ID：11342277
> 
> 赞同：0
> 
> 时间：2012-07-05T10:19:12.073
> 
> 标签：android, mobile, connection, cdma

我有一个可以在拨打电话时工作的应用程序。有时我需要数据。如果我使用的是具有 CDMA 网络的设备并且没有 WiFi，我将丢失网络运营商的“数据”。我知道这是 CDMA 限制。我只是想知道究竟是什么时候发生的。何时建立连接、何时开始响铃或何时建立呼叫……或何时……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:14:46.217

CDMA 有多种形式。假设您的设备只有一个收音机，它（基本上）采用 CDMA-1X 和 EvDO 风格。CDMA-1X 使用旧的电路交换网络来传输数据。因此，当您开始语音通话时，您只是拿走了数据管道。交换机可以通过“暂停数据流”来处理它，但您确实会丢失管道。
EvDO 在某些方面更像是一个数据包流，但最终，我们仍然需要电路。这是从 CDMA 迁移到 LTE 的主要好处。

# windows - LoadImage 在 8 位图像中失败

> ID：11342279
> 
> 赞同：2
> 
> 时间：2012-07-05T10:19:15.943
> 
> 标签：windows, winapi, gdi

当我加载 8 位 BMP 文件时，此代码有问题。

```
HBITMAP hbm = LoadImageW(NULL, L"C:\\Test.bmp", IMAGE_BITMAP, 0, 0,LR_LOADFROMFILE); 
```

但**HBITMAP**为 0，**GetLastError**也返回 0。

哪里有问题 ？

我在 stackoverflow 上看到了类似的问题，但此代码仅在 8 位位图中失败。

MSDN 对这种行为只字未提。

感谢您的回答或任何建议。

***编辑：与资源加载相同的位图工作正常**。*

***操作系统：Windows XP SP2***

***编辑 2：我昨天测试了用 Photoshop 打开这张图片 - 很好，MSPAINT - 很好，微软代理字符编辑器 - 失败了，我的应用程序 - 失败了！今天测试 - 现在工作！10 分钟前再次测试 - 不工作。应该是某种锁吧？我发现了类似的问题：[http](http://social.msdn.microsoft.com/Forums/pl-PL/vcmfcatl/thread/df4aa858-6d59-402d-8d96-6414774fed31)** ://social.msdn.microsoft.com/Forums/pl-PL/vcmfcatl/thread/df4aa858-6d59-402d-8d96-6414774fed31 。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:31:07.477

好的。我找到了导致问题的原因。

问题是*BITMAPINFOHEADER的**biSizeImage*成员设置不正确。

 *但是在不眠之夜测试两张图像（80x80、128x128）之后，我发现了一些有趣的东西。

*LoadImage*仍然成功地从**0**到**real size + 1052**加载不正确的*biSizeImage*图像。例如对于 80x80 图像，*biSizeImage*必须为 6400，但*LoadImage*加载图像时将*biSizeImage*设置为 0 或 1，或 6401，或 6402……但设置 7453 后失败。

 *******仍然存在疑问，为什么*LoadImage成功地从具有任何**biSizeImage*值的资源加载图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:29:57.487

尝试改用 GDI+。它具有更多的图像处理功能：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms535411 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535411(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:28:45.260

由于文件在 中`C:\`，也许您没有访问权限？尝试将其放在桌面或我的文档上。

此外，更新到 XP SP3 也不会受到影响。********

# facebook - 安全地奖励 Facebook 墙上的帖子

> ID：11342283
> 
> 赞同：0
> 
> 时间：2012-07-05T10:19:30.313
> 
> 标签：facebook, security

我们正在 Facebook 上开发一款社交游戏，玩家可以通过它在墙上分享帖子。现在我们想用游戏内的货币奖励他们。

当然，这不应该为黑客提供无限资金的机会，但由于发布完全发生在客户端，他们可以通过反复告诉我们的服务器“我已经发布”来实现，尽管他们没有。除非我们增加对策。

*   我们的服务器是否可以通过 Facebook 检查是否真的发布了帖子？
*   我们可以将数据附加到wallpost，例如我们的服务器生成的加密签名吗？
*   如果没有，我们需要通过某种洪水控制来限制黑客可以获得的货币。那里有提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:18:43.447

> 我们正在 Facebook 上开发一款社交游戏，玩家可以通过它在墙上分享帖子。现在我们想用游戏内的货币奖励他们。

我认为这违反了[Facebook 平台政策](https://developers.facebook.com/policy/)：

> 四。应用程序集成点
> 
> 1.  您不得激励用户使用 Facebook 社交渠道（或限制使用内容背后的内容），或暗示激励与使用我们的渠道直接相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:22:06.723

使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)后获得的回调将返回给您一个`post_id`. 您可以将其`post_id`与一个标志一起存储在您的数据库中，该标志表明您已经为该特定帖子奖励了用户。这样，您可以通过测试`post_id`数据库中该 + 标志的存在来“奖励”每个帖子的用户一次。

# objective-c - IOS加载带有数据的tableview

> ID：11342284
> 
> 赞同：0
> 
> 时间：2012-07-05T10:19:32.903
> 
> 标签：objective-c, ios, tableview

我对 iOS 还很陌生，还有很多东西要学，希望你们能指导我从我的错误中解脱出来。

我最近学习了将数据从 TableView 传递到 DetailView，并想，为什么不反过来呢。我也开始构建一个秒表应用，觉得日志功能会很有用。

话虽如此，我目前正在构建一个秒表应用程序，它可以用作计时器并具有高分日志功能。它从 View(stopwatch) 到 tableView(log board) 我使用 NSMutableArray 作为临时存储来保存信息，因为它们应该在应用程序启动/关闭时丢失。不幸的是，似乎通过到处跟踪和更改变量，我现在让自己感到困惑并陷入困境。

感谢你们提供的建议和帮助，并感谢@Abizern 给我提示。设法解决所有问题。将代码留在这里，以防将来有人做类似的事情。

TimerViewController.h

```
#import <UIKit/UIKit.h>
#import "SampleData.h"
#import "SampleDataDAO.h"
#import "HighScoreTableViewController.h"
@interface TimerViewController : UIViewController
{
    NSTimer *stopWatchTimer; // Store the timer that fires after a certain time
    NSDate *startDate; // Stores the date of the click on the start button
}
@property(nonatomic, strong) SampleDataDAO *daoDS;
@property(nonatomic, strong) NSMutableArray *ds;

@property (retain, nonatomic) IBOutlet UILabel *stopWatchLabel;
@property (weak, nonatomic) IBOutlet UIButton *onStartPressed;
@property (weak, nonatomic) IBOutlet UIButton *onStopPressed;
@property (weak, nonatomic) IBOutlet UIButton *onLogPressed;
@property (weak, nonatomic) IBOutlet UIButton *onHighscorePressed;

- (IBAction)onStartPressed:(id)sender;
- (IBAction)onStopPressed:(id)sender;
- (IBAction)onLogPressed:(id)sender;
- (IBAction)onHighscorePressed:(id)sender;

@end 
```

TimerViewController.m

```
#import "TimerViewController.h"

@interface TimerViewController ()

@end

@implementation TimerViewController
@synthesize stopWatchLabel;
@synthesize onStartPressed;
@synthesize onStopPressed;
@synthesize onLogPressed;
@synthesize onHighscorePressed;
@synthesize ds,daoDS;
- (void)viewDidLoad
{
    [super viewDidLoad];
    daoDS = [[SampleDataDAO alloc] init];
    self.ds = daoDS.PopulateDataSource;
    onStopPressed.enabled=false;
}

- (void)viewDidUnload
{
    [self setStopWatchLabel:nil];
    [self setOnStartPressed:nil];
    [self setOnLogPressed:nil];
    [self setOnStopPressed:nil];
    [self setOnHighscorePressed:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        HighScoreTableViewController *detailViewController = [segue destinationViewController];
        detailViewController.arrayOfSampleData = self.ds;
   }
}

- (void)updateTimer
{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.S"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    stopWatchLabel.text = timeString;

}

- (IBAction)onStartPressed:(id)sender {
    startDate = [NSDate date];

    // Create the stop watch timer that fires every 10 ms
    stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                      target:self
                                                    selector:@selector(updateTimer)
                                                    userInfo:nil
                                                     repeats:YES];
    onStartPressed.enabled=false;
    onStopPressed.enabled=true;
}

- (IBAction)onStopPressed:(id)sender {
    [stopWatchTimer invalidate];
    stopWatchTimer = nil;
    [self updateTimer];
    onStartPressed.enabled=true;
}   

- (IBAction)onLogPressed:(id)sender {
    NSString * timeCaptured = stopWatchLabel.text;

    static NSInteger i = 1  ;
        SampleData* mydata = [[SampleData alloc]init];

        mydata.clueName=[NSString stringWithFormat:@"clue %d",i++ ];
        mydata.timeLog = timeCaptured;
        [self.ds addObject:mydata];

        NSLog(@"%@",mydata.clueName);
        NSLog(@"time %@", mydata.timeLog);
        NSLog(@"%d",[self.ds count]);
        mydata=nil;
    }

- (IBAction)onHighscorePressed:(id)sender {
    NSLog(@"Proceeding to HighScore");
}

@end 
```

HighScoreTableView.h

```
 #import <UIKit/UIKit.h>
    #import "SampleData.h"
    #import "SampleDataDAO.h"
    #import "TimerViewController.h"
    @interface HighScoreTableViewController : UITableViewController
    @property (nonatomic, strong) NSMutableArray *arrayOfSampleData;
    @property (nonatomic, strong) SampleData * highscoreData;
    @end

HighScoreTableView.m

#import "HighScoreTableViewController.h"

@interface HighScoreTableViewController ()

@end

@implementation HighScoreTableViewController
@synthesize highscoreData;
@synthesize arrayOfSampleData;
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    highscoreData = [[SampleData alloc]init];
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.arrayOfSampleData.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"highscoreCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //highscoreData = [self.arrayOfSampleData objectAtIndex:indexPath.row];

highscoreData = (SampleData *)[self.arrayOfSampleData objectAtIndex:indexPath.row];  //if above line doesn't work, use this
cell.textLabel.text=[NSString stringWithFormat:@"%@ time %@",highscoreData.clueName, highscoreData.timeLog];
return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

样本数据.h

```
#import <Foundation/Foundation.h>

@interface SampleData : NSObject
@property(nonatomic,strong) NSString * clueName;
@property(nonatomic,strong) NSString * timeLog;
@end 
```

样本数据.m

```
#import "SampleData.h"

@implementation SampleData
@synthesize clueName,timeLog;
@end 
```

样本数据DAO.h

```
#import <Foundation/Foundation.h>
#import "SampleData.h"
@interface SampleDataDAO : NSObject
@property(nonatomic, strong) NSMutableArray * someDataArray;

-(NSMutableArray *)PopulateDataSource;
@end 
```

SampleDataDAO.m（不确定是否需要这个 DAO NSObject）

```
#import "SampleDataDAO.h"

@implementation SampleDataDAO
@synthesize someDataArray;

-(NSMutableArray *)PopulateDataSource
{
    someDataArray = [[NSMutableArray alloc] init];
    SampleData * mydata = [[SampleData alloc] init];

   mydata = nil;

    return someDataArray;
} 
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:47:51.620

在您`HighScoreTableViewController`中，您需要访问您的数组，例如通过声明和定义可写属性：

```
@property(nonatomic, strong) NSMutableArray *myArr; 
```

那么你可以定义

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
     return [self.myArr count];
} 
```

和

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // ... like in your code

    // Tried changing variable here and there base on tutorial, but can't seem to get it right.** 

    SampleData * sample = (SampelData *) [self.myArr objectAtIndex:indexPath.row];
    cell.textLabel.text = @"%@ time %@ ",sample.clueName, sample.timeLog;
    NSLog(@"Cell Value %d %@",indexPath.row,  cell.textLabel.text);
    return cell;
} 
```

所以基本上你只需要在你的方法定义中改变两行。大多数情况下，您使用 TableViews 是这样的：将要从中读取数据的数组分配给自定义属性。返回数组的大小`tableView:numberOfRowsInSection:`并从适当的索引中获取一个对象以填充 中的单元格`tableView:cellForRowAtIndexPath:`。

如果您的数组内容发生变化，您必须执行额外的操作来更新您的表格视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:23:46.460

*   首先在 .h 文件中声明数组（例如`NSMutableArray *arrStopwatchDetails`）。
*   创建该数组的属性，如`@property(nonatomic,retain)NSMutableArray *arrStopwatchDetails`.
*   在 .m 文件中合成数组，例如`@synthesize arrStopwatchDetails`.
*   在 viewDidLoad 或要使用之前分配数组。

    前任。`self.arrStopwatchDetails = [[NSMutableArray alloc]init];`

*   在`numberOfRowsInSection`方法中，返回类似于 return 的数组计数`[self.arrStopwatchDetails count]`。

*   `In cellForRowsAtIndexPath`方法，将数组元素的值分配给单元格文本

SampleData * sample = [[[SampleDataDAO alloc]init ].self.arrStopwatchDetails objectAtIndex:indexPath.row]; cell.textLabel.text = @"%@ time %@",sample.clueName, sample.timeLog; 就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T13:19:14.327

您的编码中有几个失误：

1.  您确实需要使用`prepareForSegue`将数据从父视图控制器传递到子视图控制器。在您的情况下，从`TimerViewController`到`HighScoreTableViewController`。

2.  在您的`HighScoreTableViewController`班级中，创建一个 iVar 数组，该数组将保存`sampleData`您将`TimerViewController`通过`prepareForSeque`. 像这样的东西：

HighScoreTableViewController.h

```
@property (nonatomic, strong) NSArray *arrayOfSampleData; 
```

3\. 在您`prepareForSeque`的 中`TimerViewController`，这一行是错误的：

//TimerViewController.highscoreData = [self.ds objectAtIndex:[self.tableView indexPathForSelectedRow].row];

试试这个：

```
detailViewController.arrayOfSampleData = self.ds; 
```

4\. 在 HighScoreTableViewController.m 的 viewDidLoad 下，替换这个

```
highscoreData = (SampleData *)self.highscoreData; 
```

和：

```
highscoreData = [SampleData alloc]init]; 
```

5\. 在 numberOfRowsInSection 中，您现在可以这样做：

```
return self.arrayOfSampleData.count; 
```

6\. 在 cellForRowAtIndexPath 中，

```
highscoreData = [self.arrayOfSampleData objectAtIndex:indexPath.row];

//highscoreData = (SampleData *)[self.arrayOfSampleData objectAtIndex:indexPath.row];  //if above line doesn't work, use this

cell.textLabel.text = @"%@ time %@ ", highscoreData.clueName, highscoreData.timeLog; 
```

# aptana - 像aptana studio 3这样的dreamweaver中的代码着色？

> ID：11342290
> 
> 赞同：1
> 
> 时间：2012-07-05T10:19:43.463
> 
> 标签：aptana, dreamweaver

我想知道是否有人找到了一个以 aptana studio 3 为蓝本的dreamweaver 的深色代码着色主题？我在这个论坛和其他地方搜索过，我已经看到了在 aptana 中实现 DW 代码着色的解决方案，但不是相反；默认的 aptana 3 颜色主题非常顺眼。

感谢这里的任何指示；我可能会继续自己制作一个，在这种情况下，我会在这里分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:08:51.153

我让它看起来像 Aptana Studio。:) (Dreamweaver CS6)
不是 100% 看起来那样，但我仍然认为值得分享。它仅适用于 CSS、JS、PHP 和 HTML。

[Dreamweaver CS6 Aptana Studio 类似颜色主题](http://dl.dropbox.com/u/1848610/ColorsDark.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:56:45.570

您可能会认为现在有人会创建一个扩展程序以允许轻松导入配色方案，但事实并非如此。

您可以随时通过*编辑 |自行设置。偏好 | 代码着色*并在那里设置选项。这很耗时，但肯定可以复制 Aptana 的设置。

或者，如果你用谷歌搜索它，你会发现有几个人提供了一个深色主题的 colors.xml 文件，可以从他们的网站下载。您可以备份位于任一位置的文件

```
C:\Users\%username%\AppData\Roaming\Adobe\Dreamweaver\en_US\Configuration\CodeColoring 
```

或者

```
/Users/%name%/Library/Application Support/Adobe/Dreamweaver/%localization(en_US)%/Configuration/CodeColoring 
```

分别适用于 Windows 和 Mac，并将其替换为下载的版本。这将更改您的 DW 界面以使用其他文件中的颜色设置。

# asp.net - wkhtmltopdf.exe 将 HTML 文件转换为 PDF 的路径问题

> ID：11342292
> 
> 赞同：0
> 
> 时间：2012-07-05T10:19:56.047
> 
> 标签：asp.net, c#-4.0, pdf-generation, webforms, wkhtmltopdf

我正在使用链接按钮[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)`wkhtmltopdf`将 HTML 文件转换为 PDF 文档

当用户单击链接按钮时，它将运行以下代码，如下面的代码所示，在传递文件路径中作为参数 ProcessStartInfo。此代码仅在以下场景中运行良好

考虑到该网站托管在域[http://www.xyz.net/](http://www.xyz.net/)

1.  当我提到路径时`http://demo.XYZ.net/`它工作正常
2.  当我提到路径时`http://www.XYZ.net/`它不起作用
3.  在本地主机的情况下，如果路径是`http://localhost:51005/XYZ/`或`http://web:8080/`

为了让它正常工作，我们需要给网站完全信任级别&我不确定为什么代码不运行我给它相同的域路径如果我创建 put`PrintArticle.aspx`如果我创建一个子域那么它会正常工作。我不确定这是安全问题还是什么

下面的代码

```
protected void lnkbtnDownload_Click(object sender, EventArgs e)
{
    //ConvertURLToPDF();
    try
    {
        string url = "PrintArticle.aspx?articleID=" + Request["articleID"] + "&download=yes&Language=" + Request["Language"];

        //string args = string.Format("\"{0}\" - ", "http://demo.XYZ.net/" + url); //Works
        //string args = string.Format("\"{0}\" - ", "http://www.xyz.net/" + url); Doesnt work
        //string args = string.Format("\"{0}\" - ", url);

        string args = string.Format("\"{0}\" - ", "http://localhost:51005/XYZ/" + url); //Works

        var startInfo = new ProcessStartInfo(Server.MapPath("bin\\wkhtmltopdf.exe"), args)
        {
            UseShellExecute = false,
            CreateNoWindow = true,
            RedirectStandardOutput = true
        };
        var proc = new Process { StartInfo = startInfo };
        proc.Start();

        string output = proc.StandardOutput.ReadToEnd();
        byte[] buffer = proc.StandardOutput.CurrentEncoding.GetBytes(output);
        proc.WaitForExit();
        proc.Close();
        Response.ContentType = "application/pdf";
        Response.AddHeader("Content-Disposition", "attachment;filename=download.pdf");
        Response.BinaryWrite(buffer);
        Response.End();
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

如果文件在同一域上，则出现错误消息

> “/”应用程序中的服务器错误。无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。请求的 URL：/PrintArticle.aspx
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:40:00.657

我通过使用以下语句解决了这个问题

```
var url = Request.Url.GetLeftPart(UriPartial.Authority) + "/PrintArticle.aspx?articleID=" + Request["articleID"] + "&download=yes&Language=" + Request["Language"]; 
```

现在它工作正常我不确定当我指定文件路径时它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T12:47:58.347

输出变量包含空字符串 我的代码如下： try { string url=Request.Url.GetLeftPart(UriPartial.Authority) +"/PrintQuickPrescription.aspx?DoctorId=" + DoctorID + "&DispnID=" + DispnID + "&ApptID=" + ApptID + "&PatientID=" + PatientID; System.Diagnostics.Process 进程 = 新 System.Diagnostics.Process();

```
 string args = string.Format("\"{0}\" - ", "http://localhost:50013/DPMNewWeb/"+url);
        //string  args="http://localhost:50013/DPMNewWeb/PrintQuickPrescription.aspx";

        var startInfo = new ProcessStartInfo(Server.MapPath("~\\Bin\\wkhtmltopdf.exe"), args)
        {
            UseShellExecute = false,
            CreateNoWindow = true,
            RedirectStandardOutput = true
        };
        var proc = new Process { StartInfo = startInfo };
        proc.Start();

        string output = proc.StandardOutput.ReadToEnd();

        byte[] buffer = proc.StandardOutput.CurrentEncoding.GetBytes(output);
        proc.WaitForExit();
        proc.Close();
        Response.ContentType = "application/pdf";
        Response.BinaryWrite(buffer);
        Response.End();

        //byte[] fileContent = GeneratePDFFile();
        //GeneratePDFFile();
        //if (fileContent != null)
        //{
        //    Response.Clear();
        //    Response.ContentType = "application/pdf";
        //    Response.AddHeader("content-length", fileContent.Length.ToString());
        //    Response.BinaryWrite(fileContent);
        //    Response.End();
        //}
    }
    catch
    {
    } 
```

# java - JAVAPNS 2.2 成功推送但未在设备上接收

> ID：11342293
> 
> 赞同：3
> 
> 时间：2012-07-05T10:20:11.413
> 
> 标签：java, apple-push-notifications

在此处输入代码我尝试使用 JAVAPNS 2.2 从 Java 推送

这是我的代码

```
import java.util.*;
import org.apache.log4j.BasicConfigurator;
import org.json.JSONException;
import javapns.*;
import javapns.communication.exceptions.CommunicationException;
import javapns.communication.exceptions.KeystoreException;
import javapns.notification.PushNotificationPayload;
import javapns.notification.PushedNotification;
import javapns.notification.ResponsePacket;

public class Test {

/**
 * @param args
 */
public static void main(String[] args) {

    BasicConfigurator.configure();

    try {

        PushNotificationPayload payload = PushNotificationPayload.complex();

        payload.addAlert("Hello World");
        payload.addBadge(1);
        payload.addSound("default");
        payload.addCustomDictionary("id", "1");

        System.out.println(payload.toString());
        List<PushedNotification> NOTIFICATIONS = Push.payload(payload, "D:\\keystore1.p12", "123456", true, "AA67F2F18586D2C83398F9E5E5BE8BA1CD3FF80257CC74BACF2938CE144BA71D");

        for (PushedNotification NOTIFICATION : NOTIFICATIONS) {
            if (NOTIFICATION.isSuccessful()) {
                    /* APPLE ACCEPTED THE NOTIFICATION AND SHOULD DELIVER IT */  
                    System.out.println("PUSH NOTIFICATION SENT SUCCESSFULLY TO: " +
                                                    NOTIFICATION.getDevice().getToken());
                    /* STILL NEED TO QUERY THE FEEDBACK SERVICE REGULARLY */  
            } 
            else {
                    String INVALIDTOKEN = NOTIFICATION.getDevice().getToken();
                    /* ADD CODE HERE TO REMOVE INVALIDTOKEN FROM YOUR DATABASE */  

                    /* FIND OUT MORE ABOUT WHAT THE PROBLEM WAS */  
                    Exception THEPROBLEM = NOTIFICATION.getException();
                    THEPROBLEM.printStackTrace();

                    /* IF THE PROBLEM WAS AN ERROR-RESPONSE PACKET RETURNED BY APPLE, GET IT */  
                    ResponsePacket THEERRORRESPONSE = NOTIFICATION.getResponse();
                    if (THEERRORRESPONSE != null) {
                            System.out.println(THEERRORRESPONSE.getMessage());
                    }
            }
      }

    } catch (CommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (KeystoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

图书馆已成功发送，但我的设备从未收到推送。我已经尝试了许多设备令牌，甚至尝试重新生成证书 .12 但仍然没有用。

日志

```
0 [main] DEBUG javapns.notification.Payload  - Adding alert [Hello World]

1 [main] DEBUG javapns.notification.Payload  - Adding badge [1]

1 [main] DEBUG javapns.notification.Payload  - Adding sound [default]

1 [main] DEBUG javapns.notification.Payload  - Adding custom Dictionary [id] = [1]

{"id":"1","aps":{"sound":"default","alert":"Hello World","badge":1}}

292 [main] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocketFactory

341 [main] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocket to gateway.push.apple.com:2195

972 [main] DEBUG javapns.notification.PushNotificationManager  - Initialized Connection to 
Host: [gateway.push.apple.com] Port: [2195]: 1923e91b[SSL_NULL_WITH_NULL_NULL: Socket[addr=gateway.push.apple.com/17.149.35.173,port=2195,localport=65225]]

974 [main] DEBUG javapns.notification.PushNotificationManager  - Building Raw message from deviceToken and payload

974 [main] DEBUG javapns.notification.PushNotificationManager  - Built raw message ID 1 of total length 113

974 [main] DEBUG javapns.notification.PushNotificationManager  - Attempting to send notification: {"id":"1","aps":{"sound":"default","alert":"Hello World","badge":1}}

974 [main] DEBUG javapns.notification.PushNotificationManager  -   to device: AA67F2F18586D2C83398F9E5E5BE8BA1CD3FF80257CC74BACF2938CE144BA71D

1743 [main] DEBUG javapns.notification.PushNotificationManager  - Flushing

1743 [main] DEBUG javapns.notification.PushNotificationManager  - At this point, the entire 113-bytes message has been streamed out successfully through the SSL connection

1743 [main] DEBUG javapns.notification.PushNotificationManager  - Notification sent on first attempt

1743 [main] DEBUG javapns.notification.PushNotificationManager  - Reading responses

1744 [main] DEBUG javapns.notification.PushNotificationManager  - Closing connection
PUSH NOTIFICATION SENT SUCCESSFULLY TO: AA67F2F18586D2C83398F9E5E5BE8BA1CD3FF80257CC74BACF2938CE144BA71D 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T06:26:28.730

这条线应该

```
List<PushedNotification> NOTIFICATIONS = Push.payload(payload, "D:\\keystore1.p12", "123456", true, "AA67F2F18586D2C83398F9E5E5BE8BA1CD3FF80257CC74BACF2938CE144BA71D"); 
```

应该改成这个

```
List<PushedNotification> NOTIFICATIONS = Push.payload(payload, "D:\\keystore1.p12", "123456", false, "AA67F2F18586D2C83398F9E5E5BE8BA1CD3FF80257CC74BACF2938CE144BA71D"); 
```

# node.js - 简单的猫鼬示例不起作用

> ID：11342299
> 
> 赞同：4
> 
> 时间：2012-07-05T10:20:44.877
> 
> 标签：node.js, mongodb, mongoose

我正在尝试运行一个简单的猫鼬/节点示例，我在 stackoverflow 上找到了该示例：

```
var mongoose = require('mongoose'),
db = mongoose.connect('mongodb://localhost/db'),
Schema = mongoose.Schema;

var sentinel = setTimeout(function(){
    throw "failed to connect to MongoDB after one minute!";
}, 60*1000); // 60 seconds

mongoose.model('User', new Schema({
    properties: {
        name    : { type: String, index: true }
    }
}));    

var User = db.model('User');

var u = new User();
u.name = 'Foo';
u.save();

User.find().all(function(arr) {
    clearTimeout(sentinel); // cancel the timeout sentinel
    console.log('Users found');
    console.log(arr);
    console.log('length='+arr.length);
});

process.stdin.resume(); 
```

如果我得到正确的代码，脚本末尾的终端应该会输出一个输出，其中应该打印“找到用户”消息和集合中的所有用户。但我只是收到超时消息。为什么？

我在 Amazon EC2 微型实例上运行我的服务器。Node、Mongodb 和 mongoose 已安装并且 Mongodb 服务器正在运行（我可以通过“mongo”从终端与它交互）。我还创建了目录 /data/db。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:14:35.357

我不知道猫鼬，但`u.save()`可能是异步的，因为它写入数据库。尝试

```
u.save(function (err){
    if(err) console.log(err);
    User.find().all(function(arr) {
        clearTimeout(sentinel); // cancel the timeout sentinel
        console.log('Users found');
        console.log(arr);
        console.log('length='+arr.length);
    });
}); 
```

编辑：这很好用

```
var mongoose = require('mongoose');
var connection = mongoose.connect('mongodb://localhost/my_database');

var Schema = mongoose.Schema
var User = new Schema({
    author    : String
  , type      : String
});

var MyUserModel = mongoose.model('User', User); //create and access the model User

var u = new MyUserModel();
u.author = 'authorname';
u.save(function(err){
    if (err) console.log(err);
});

MyUserModel.find({}, function (err,docs) {
    console.log(docs);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T09:43:13.397

我通过在使用 DB 的每个路由器中添加一个额外的步骤来解决这个问题。

它有点乱，但它可以工作并且 100% 没有泄漏。

像这样的东西：

```
// file: 'routes/api/v0/users.js'
router
var User = require('../../../models/user').User,
    rest = require('../../../controllers/api/v0/rest')(User),
    checkDB = require('../../../middleware/checkDB');

module.exports = function (app) {
  app.get('/api/v0/users', checkDB, rest.get);
  app.get('/api/v0/users/:id', checkDB, rest.getById);
  app.post('/api/v0/users', checkDB, rest.post);
  app.delete('/api/v0/users', checkDB, rest.deleteById);
  app.put('/api/v0/users', checkDB, rest.putById);
};

// file: 'middleware/checkDB.js'
var HttpError = require('../error').HttpError,
    mongoose = require('../lib/mongoose');

// method which checks is DB ready for work or not
module.exports = function(req, res, next) {
  if (mongoose.connection.readyState !== 1) {
    return next(new HttpError(500, "DataBase disconnected"));
  }
  next();
}; 
```

PS如果您知道更好的解决方案，请告诉我。

# javascript - 带有JS onclick相对路径的网页URL链接？

> ID：11342300
> 
> 赞同：0
> 
> 时间：2012-07-05T10:20:45.423
> 
> 标签：javascript, asp.net, asp.net-mvc-3

我有一个在 ASP.Net 中开发的旧 Web 应用程序，其样式背后的旧类型代码。我最终将在 ASP.Net MVC 3 中重新制作完整的 Web 应用程序 - 刚刚开始完成第一部分并集成它们。我在顶部显示的菜单上遇到了一些问题。所以有一个主页按钮，它在代码中如下所示：

```
onclick='document.location.href=\"Home.aspx\"'> 
```

但是，如果我有菜单并且尝试点击主页图标，我会在 web 的新 mvc 部分中获取 url，但找不到页面：

/MyWeb.Web.App/mvc/Controller/Home.aspx

实际的主页 aspx 页面位于 \MyWeb.Web.App\mvc\Home.aspx 位置

我目前对我可以在 JS href 中编辑什么以使其指向该位置感到困惑，因此这些图标将在现有实现和新的 MVC 中工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:24:41.447

使用 urls 助手。例如，如果您使用的是 Razor，并且此代码位于 MVC 视图中：

```
onclick='document.location.href="@Url.Content("~/mvc/home.aspx")"'> 
```

或者如果您使用的是 WebForms 视图引擎：

```
onclick='document.location.href="<%= Url.Content("~/mvc/home.aspx") %>"'> 
```

* * *

更新：

如果这是在单独的 javascript 文件中，那么您可以在 Razor 视图中声明一个全局变量，该变量将指向基本 url：

```
<script type="text/javascript">
    var baseUrl = '@Url.Content("~/mvc")';
</script> 
```

然后在你的 javascript 文件中：

```
onclick='document.location.href=\"" + baseUrl + "/home.aspx\"' 
```

当然有更好的方法来实现这一点，但是由于您没有提供有关您的方案的足够详细信息，因此很难建议最好的方法。例如，您可以`data-*`在 DOM 或其他一些元素中使用 HTML5 属性来正确生成此 url 并在您的 javascript 文件中访问它。

# sql - 我可以将存储过程的结果放入 SQL 中另一个存储过程中的游标中吗

> ID：11342306
> 
> 赞同：12
> 
> 时间：2012-07-05T10:21:02.900
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, database-cursor

我正在尝试将存储过程的结果放入游标中以在当前过程中使用。我在下面添加了我的代码，但我不确定这是否可行或者我的语法是否正确？

```
DECLARE cursorIDList CURSOR FOR
    EXEC spGetUserIDs
OPEN cursorIDList

FETCH NEXT FROM cursorIDList INTO @ID 
```

我收到以下错误：“EXEC”附近的语法不正确。期待 SELECT、'(' 或 WITH。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T10:49:25.223

你可以这样做：

```
DECLARE @t TABLE (ID INT)
INSERT INTO @t
EXEC spGetUserIDs

DECLARE cursorIDList CURSOR FOR
    SELECT * FROM @t
OPEN cursorIDList

FETCH NEXT FROM cursorIDList INTO @ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:41:00.737

在我看来，非常有趣的方法是使用游标作为参数（尽管如果你不打算更新表，我认为它不是更好的选择）：

```
create Table dbo.MyTable
(
    i int 
);
Insert Into dbo.MyTable (i) values (1)
Insert Into dbo.MyTable (i) values (2)
Insert Into dbo.MyTable (i) values (3)
Insert Into dbo.MyTable (i) values (4)
Go
Set NoCount ON;
Go
Create Proc dbo.myProc 
(
    @someValue int,
    @cur Cursor Varying Output
)
As
Begin 
    declare @x int;

    Set @cur = Cursor for
        Select i From dbo.MyTable
        Where i < @someValue;

    open @cur
End
Go
-- Use of proc
declare @cur cursor;
declare @x int;
Exec dbo.myProc 3, @cur output

fetch next from @cur into @x
while @@fetch_status = 0
begin
    print 'value: ' + cast(@x as varchar)
    fetch next from @cur into @x
end

close @cur;
Deallocate @cur;

Go
--Cleanup
Drop Proc dbo.myProc 
Drop Table dbo.MyTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T11:59:18.617

SQL-Server 中游标的语法是：

```
DECLARE cursor_name [ INSENSITIVE ] [ SCROLL ] CURSOR FOR select_statement 
```

之后`FOR`你必须写一个`SELECT`.

有关详细信息，请参阅： [https ://msdn.microsoft.com/it-it/library/ms180169.aspx](https://msdn.microsoft.com/it-it/library/ms180169.aspx)

# jquery - 为什么 jquery 不能与 wordpress enqueue 一起使用？

> ID：11342307
> 
> 赞同：0
> 
> 时间：2012-07-05T10:21:03.640
> 
> 标签：jquery, wordpress

我只是从这个方法切换了我在主题中排队 jquery 的方式：

```
function my_init() {
if (!is_admin()) {
    // comment out the next two lines to load the local copy of jQuery
    wp_deregister_script('jquery');
    wp_register_script('jquery', 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', false, '1.7.2');
    wp_enqueue_script('jquery');
}
}
add_action('wp_enqueue_scripts', 'my_init'); 
```

对此：

```
function my_scripts_method() {
wp_enqueue_script('jquery');
}
add_action('wp_enqueue_scripts', 'my_scripts_method');

function my_admin_scripts_method() {
wp_enqueue_script('jquery');
}
add_action('admin_enqueue_scripts', 'my_admin_scripts_method'); 
```

老版本使用的是1.7.2，wordpress的内置版本是1.7.1。我尝试将 1.7.1 的地址复制并粘贴到第一个版本中，但它还是一样。该链接在 1.7.1 版本的源代码中，但 jquery 不起作用。有什么想法可能导致这种情况吗？

网址：www.brainbuzzmedia.com/themes/vertex/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:18:02.340

我不知道这里到底有什么问题，但试试这个。

```
function wptuts_scripts_with_jquery()
{
    // Register the script like this for a plugin:
    wp_register_script( 'custom-script', plugins_url( '/js/custom-script.js', __FILE__ ), array( 'jquery' ) );
    // or
    // Register the script like this for a theme:
    wp_register_script( 'custom-script', get_template_directory_uri() . '/js/custom-script.js', array( 'jquery' ) );

    // For either a plugin or a theme, you can then enqueue the script:
    wp_enqueue_script( 'custom-script' );
}
add_action( 'wp_enqueue_scripts', 'wptuts_scripts_with_jquery' ); 
```

欲了解更多[信息](http://wp.tutsplus.com/articles/how-to-include-javascript-and-css-in-your-wordpress-themes-and-plugins/)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:21:15.020

```
function my_scripts_method() {
if (!is_admin()) {
    wp_enqueue_script('jquery');
 }
}
add_action('wp_enqueue_scripts', 'my_scripts_method');

function my_admin_scripts_method() {
// you don't need to load jquery here, because its automatically loaded in the adminby default 
}
add_action('admin_enqueue_scripts', 'my_admin_scripts_method'); 
```

# html - 标记类不起作用

> ID：11342309
> 
> 赞同：3
> 
> 时间：2012-07-05T10:21:09.167
> 
> 标签：html, css, hyperlink, tags

我有一个 A 标签，我正在尝试添加一个类。这可能是非常简单的东西，但我以前从未这样做过。

```
<a class="button" href="landscaping.html">Find out more about our landscape design services</a> 
```

和CSS：

```
a .button{
color:#7cc242;
font-family: 'PTSansNarrowBold';
font-size:18px;
margin-top: 7px;
margin-bottom: 0px;
text-align:right;
text-decoration:none;
display: inline-block;
zoom:1;
*display:inline;
padding-right:30px;
background:url(images/more-btn.png) no-repeat top right;} 
```

似乎没有任何效果，我只是得到标准的蓝色。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T10:22:42.060

不应该有空格！请更换：

```
a .button{ 
```

到：

```
a.button{ 
```

在这里查看小提琴：http: [//jsfiddle.net/VhaNQ/](http://jsfiddle.net/VhaNQ/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T10:24:19.183

您在 CSS 中所说的是“我希望所有带有 class的**孩子**`button`，在所有`a`标签中都使用下一个 CSS 规则”。

您需要说的是“我希望`a`带有类`button`的标签使用下一个 CSS 规则”。

这是通过编写下一个 CSS 来实现的：

```
a.button{
  color:#7cc242;
  font-family: 'PTSansNarrowBold';
  font-size:18px;
  margin-top: 7px;
  margin-bottom: 0px;
  text-align:right;
  text-decoration:none;
  display: inline-block;
  zoom:1;
  *display:inline;
  padding-right:30px;
  background:url(images/more-btn.png) no-repeat top right;
} 
```

注意和之间**没有空格**`a``.button`

标签/类/ID之间的空格表示“元素的子元素”。

祝你好运 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T10:24:58.500

`a .button`像这样删除空间`a.button`或简单地使用`.button`

# c - Winsock recv() 没有收到任何数据 (C)

> ID：11342311
> 
> 赞同：1
> 
> 时间：2012-07-05T10:21:15.507
> 
> 标签：c, windows, sockets, networking, winsock

我正在使用 Winsock 中的 TCP 套接字在 C 中编写一个 Minecraft Classic Server，我正在编写执行“心跳”的函数，只是一个 HTTP 请求，它应该向我返回一个 URL - 根本没有标题或 HTML。

它将数据发送到 Minecraft.net（至少它是这么说的），但在那之后它只是在那里呆了几分钟，最终告诉我它没有从 minecraft.net 获得数据，即它显示“HeartBeat: Recieved no data来自 minecraft.net"

到目前为止，我有以下代码（不包括 WSAStartup 等）：

```
void HeartBeat()
{
    unsigned int clSock;
    struct hostent *host;
    struct sockaddr_in server_addr;
    char buffer[128] = "";
    char request[256] = "GET /"; //(I will not show the rest of the request...)
    if((clSock = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
            printf("HeartBeat: Error creating socket\n");
            return;
    } else {
            printf("HeartBeat: Success in creating socket\n");
    }
    printf("HeartBeat: Resolving hostname 'www.minecraft.net'... ");
    if((host = gethostbyname("www.minecraft.net")) == NULL)
    {
        printf("failed\n");
        return;
    } else {
        printf("success!\n");
    }
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(80);
    server_addr.sin_addr.s_addr = *((unsigned long*)host->h_addr);
    if (connect(clSock, (SOCKADDR*) &server_addr, sizeof(server_addr)) == SOCKET_ERROR)
    {
        printf("HeartBeat: Error conneting to www.minecraft.net\n");
        return;
    } else {
        printf("HeartBeat: Connected to www.minecraft.net\n");
    }
    if (send(clSock, request, sizeof(request), 0) < 0)
    {
        printf("HeartBeat: Sending data failed.\n");
        closesocket(clSock);
        return;
    } else {
        printf("HeartBeat: Success in sending data.\n");
    }
    if ((recv(clSock, buffer, sizeof(buffer), 0)) == 0)
    {
        printf("HeartBeat: Received no data from www.minecraft.net\n");
        closesocket(clSock);
        return;
    } else {
        printf("HeartBeat: Yay, success! Url is '%s'", buffer);
        closesocket(clSock);
        return;
    }
} 
```

有人可以指出我哪里出错了吗？太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:34:36.297

您没有发送 HTTP 请求。

（最小）HTTP 请求必须至少是字符串：

```
char request[256] ="GET / HTTP/1.0\r\n\r\n"; 
```

或者在 HTTP 0.9 的情况下：

```
char request[256] ="GET /\r\n\r\n"; 
```

您必须只发送该字符串，而不是包含大量 0 字节的整个请求缓冲区，因此请执行以下操作：

```
 send(clSock, request, strlen(request), 0) 
```

您只进行了 1 个 recv() 调用，这可能不会读取整个响应。您应该阅读直到连接关闭（直到 recv() 返回 0）。或者要真正遵循 HTTP 协议，您需要解析响应，查找 Content-Length 标头。读取所有标题，然后读取正文中的字节数（如果有）。但是，要真正处理 HTTP 的所有细节，您确实需要一个 HTTP 库。

# python - vi 命令返回错误格式数据？

> ID：11342314
> 
> 赞同：3
> 
> 时间：2012-07-05T10:21:20.917
> 
> 标签：python, linux, paramiko

我正在使用 python 2.7 和**paramiko**库。在窗口上运行的客户端应用程序将 ssh 命令发送到在 linux 上运行的服务器应用程序。当我发送**vi**`<-[0m<-[24;2H<-[K<-[24;1H<-[1m~<-[0m<-[25;2H....`命令时，我得到了 我不知道这些字符是什么意思以及我如何处理它的响应 。我挣扎了几个小时，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:40:08.027

回顾我这周的 SO 活动，看到了这个为代表嫖娼的机会：

这些看起来像 ANSI/VT100 终端控制代码，这表明认为它连接到终端的东西正在发送它们，但它们被不知道如何处理它们的东西接收。

现在您可以通过 Google 搜索“VT100 控制代码”并了解您想要的内容。

# c# - struct c# 及其相关的内存

> ID：11342316
> 
> 赞同：0
> 
> 时间：2012-07-05T10:21:21.793
> 
> 标签：c#, memory-management, struct

给定结构点：

```
public struct Point {
    double x, y;
    Point(double i, double j) {
        x=i;
        y=j;
    }
} 
```

**Q1**：有什么区别：

```
Point p; 
```

和

```
Point p=new Point(2.0,3.0); 
```

据我了解，在第二部分中，匿名 Point 结构被分配在堆上，并被逐位复制到堆栈上分配的 p 变量的内存中。我对么？

**Q2**：我需要做什么来携带对 Point 的引用，而不是在堆栈上分配它并按值传递它？（不使用不安全的指针）

```
class Linear {
    private double m, n;
    ref Point p = new Point(2.0,3.0); // not compiling
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:26:43.080

```
class Wrapper
{
    public Point Point { get; set; }
} 
```

使用包装值类型（结构）的引用类型（类），您将在堆中分配它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:28:00.130

A1：在第一条语句中，您只是声明了变量，而不是像在第二条语句中那样创建结构的实例。

A2：您需要在将对象“提供”给另一个方法的地方使用 REF 关键字，而不是在声明变量的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:33:26.977

如果我不想要 valuetype 结构，我通常会创建一个非常简单的类。对于您的示例，这看起来像下面的代码。在某些情况下，一个类将防止结构装箱/拆箱性能下降。但是，如果您有一个 List<> 结构，那么它就是所有数据的单个内存块。使用 List<> of class，您可以获得指向许多类实例的单个指针块。

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public class Point
{
    public double x, y;

    public Point(double i, double j)
    {
        x = i;
        y = j;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:15:57.673

在第二个语句中，`Point`创建了一个匿名类型的临时存储位置，很可能在堆栈上，并将它作为隐式`ref`参数传递给参数化构造函数。构造函数完成后，通过使用匿名临时字段中的相应字段覆盖每个字段（公共或私有）来改变`Point`变量，然后将其丢弃。`p`请注意，无论结构是否假装不可变，行为都是相同的。

# c# - 没有大小规范的 varchar 会降低 SQLite 的性能吗？

> ID：11342317
> 
> 赞同：1
> 
> 时间：2012-07-05T10:21:25.910
> 
> 标签：c#, sqlite, varchar

我在 c# 中将 SQLITE 用于我的磁盘目录项目。在测试期间，我在使用固定大小的 varchar 时遇到了长度问题。所以我决定在开发时保持 varchar 大小不受限制。有时我必须一次读取一个表中的 40,000 行。

我的问题是固定大小的 varchar 可以提高 sqlite 的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:11:56.823

SQLite 完全忽略任何长度限制：

[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)说：

> **2.2 关联名称示例**
> 
> 请注意，类型名称后面的括号中的数字参数（例如：“VARCHAR(255)”）会被 SQLite 忽略 - SQLite 不会对字符串、BLOB 或数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:50:49.503

答案是肯定的。它确实会稍微提高性能，因为它不会在特定列上发生重写时进行任何动态大小分配。

# c++ - 寻求无效的论点？

> ID：11342321
> 
> 赞同：0
> 
> 时间：2012-07-05T10:21:31.030
> 
> 标签：c++, seekg

我第一次尝试使用 seekg 。它在文档中说它的论点可能是：

istream& seekg (streampos pos);

istream& seekg (streamoff off, ios_base::seekdir dir);

据我了解，“streampos pos”可能是一个 int？我看到了像“seekg(0)”这样的例子但是当尝试编译它时它说我使用了无效的参数：

```
void function(int pos){
ifstream reader("data.dat");
if(!reader.is_open())
    return 0;
int posinArchive = pos * 74;
reader.seekg(posinArchive); 
```

我什至尝试将其直接转换为 streampos：

```
 void function(int pos){
ifstream reader("data.dat");
if(!reader.is_open())
    return 0;
int posinArchive = pos * 74;
reader.seekg((streampos)posinArchive); 
```

一样。seekg(0)，什么也没有。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:22:38.527

第一个版本

```
stream& seekg ( streampos pos ); 
```

当您想要寻找您之前通过调用`tellg`.

如果要寻找位置 0，则必须使用`seekg(0, ios::beg)`从文件开头获得零偏移量。

# linux - bash printf 前缀

> ID：11342326
> 
> 赞同：0
> 
> 时间：2012-07-05T10:21:52.200
> 
> 标签：linux, bash, printf

在 Bash 中，我可以`printf`像这样格式化字符串输出：- （请注意我如何`W`在字符串中添加后缀，并且这不包含在填充中）

```
$ printf "Blah %11.1fW\n" 123 456 78965 5 56
Blah       123.0W
Blah       456.0W
Blah     78965.0W
Blah         5.0W
Blah        56.0W 
```

如果我想为字符串添加前缀，我可以这样做：-

```
$ printf "Blah £%11.1f\n" 123 456 78965 5 56
Blah £      123.0
Blah £      456.0
Blah £    78965.0
Blah £        5.0
Blah £       56.0 
```

但是请注意这如何导致在前缀之前应用填充。

我将如何（如果可能的话）`printf`在填充之前为值添加前缀，以便输出如下：-

```
Blah      £ 123.0
Blah      £ 456.0
Blah    £ 78965.0
Blah        £ 5.0
Blah       £ 56.0 
```

如果不可能，任何 Bash 解决方案都是合适的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:36:02.577

我想出了这个：

```
$ printf "Rate: %11s\n" $(printf "$%.1f " 12345 123)
Rate:    $12345.0
Rate:      $123.0 
```

只要确保`%11s`为您的情况选择正确的。

* * *

看来你自己解决了这个空间问题。为了完整起见，我将把它放在这里。

```
$ printf "Rate: %11s\n" $(printf "$%.1f " 12345 123) | sed 's/\$/\$ /g'
Rate:    $ 12345.0
Rate:      $ 123.0 
```

* * *

这是@FatalError 给出的解决方案：

```
printf "Rate: %11b\n" $(printf '$\\0040%.1f ' 12345 123)
Rate:   $ 12345.0
Rate:     $ 123.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:16:32.403

不可能。你需要类似的东西`strfmon`。解决方法：

```
$ a=(123 456 78965 5 56)
$ printf 'blah %*s %.1f\n' {,,,,}{$((10 - ${#a[n]})),£,"${a[n++]}"}
blah      £ 123.0
blah      £ 456.0
blah    £ 78965.0
blah        £ 5.0
blah       £ 56.0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T10:58:29.967

虽然我喜欢 ormaaj 将东西保存在 shell 中的解决方案，但我不喜欢使用子 shell，除非我真的需要它们。一条既有子壳又有管道的线似乎……没有必要。

```
$ printf "Rate: %11.1f\n" 123 | sed 's/  \([0-9]\)/$ \1/'
Rate:     $ 123.0 
```

# c# - Nhibernate QueryOver - 获取分页的子计数

> ID：11342329
> 
> 赞同：1
> 
> 时间：2012-07-05T10:22:05.007
> 
> 标签：c#, nhibernate, pagination, queryover

我正在使用 Nhibernate 3.0，需要在站点上实现分页。基本上，我们有一个 ProductCategory，其中包含与之关联的产品集合。到目前为止，我有这个确实有效

```
var result = Session.QueryOver<TEntity>().TransformUsing(Transformers.DistinctRootEntity)
            .Where(category => category.CategoryId == criteria.CategoryId)
            .Fetch(category => category.Products).Eager
            .Take(pageSize)
            .Skip((pageIndex - 1)*pageSize)
            .Future<TEntity>(); 
```

这将返回我请求的类别以及根据传入的页面大小和页面索引正确分页的子产品。

我现在要做的实际上是获取产品的总行数，例如，即使我只返回 5 个产品，我也需要知道总共有 100 个。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T12:51:04.530

您应该通过从`Product`侧面使用另一个查询来执行此操作`.RowCount()`。

像这样的东西（如果你`Product`有财产`Category`）：

```
int count = session.QueryOver<Product>()
    .Where(x => x.Category.Id == categoryId)
    .RowCount(); 
```

在这里您可以找到更多获取计数的方法：[如何使用 NHibernate QueryOver api 获取行数？](https://stackoverflow.com/questions/2489548/how-do-i-get-row-count-using-the-nhibernate-queryover-api)

另一篇可能对您有帮助的博文：
[NHibernate 3.0 QueryOver - Searching, and Paging at database level](http://random-monkey-wibblings.blogspot.com/2010/11/nhibernate-30-queryover-maximum-love.html)

# sql-server - 从 SQL Server 中的用户选择中设置变量

> ID：11342333
> 
> 赞同：1
> 
> 时间：2012-07-05T10:22:07.373
> 
> 标签：sql-server, variables, set, sapb1

我是 SQL Server 的初学者

我在 SAP B1 中的查询是

```
 DECLARE @FROMDATE AS DATETIME
  SET @FROMDATE= [%0]

  DECLARE @TODATE AS DATETIME
  SET @TODATE= [%1]

  DECLARE @ACCNUM AS NVARCHAR(100)
  SET @ACCNUM= [%2] 
```

获取账户每笔交易的账户名称、编号

```
 SELECT 
   T4.[ACCOUNT] AS 'A/C NUM',
   T4.[ACCTNAME] AS 'A/C NAME',
   T4.[TransId] AS 'KEY',

   SUM(VEL_DB) AS 'VEL DB',
   SUM(VEL_CR) AS 'VEL CR',

   SUM(DEF_DB) AS 'DEF_DB',
   SUM(DEF_CR) AS 'DEF CR',
   T4.[LINEMEMO],
   T1.[U_Naaration]

   FROM OJDT T1 
```

根据 ocrcode2 计算账户中的每笔交易的贷方和借方

```
 INNER JOIN 
      (
     SELECT T2.[TRANSID],T2.[ACCOUNT],T3.[ACCTNAME],T2.[LINEMEMO],

     case
     when T2.[OcrCode2]='VEL'
     THEN
       (T2.[Debit]) 
     ELSE
       NULL
     END as VEL_DB,

    case
    when T2.[OcrCode2]='VEL'
    THEN
     (T2.[CREDIT]) 
    ELSE
     NULL
    END as VEL_CR,

   case
   when T2.[OcrCode2]='' OR T2.[OCRCODE2] IS NULL
   THEN
     (T2.[Debit]) 
   ELSE
     NULL
   END as DEF_DB,

   case
   when T2.[OcrCode2]='' OR T2.[OCRCODE2]IS NULL
   THEN
       (T2.[CREDIT]) 
   ELSE
     NULL
   END as DEF_CR

   FROM JDT1 T2 
      INNER JOIN OACT T3 ON T3.[ACCTCODE]=T2.[ACCOUNT]
    where T2.[DUEDATE]>=@FROMDATE AND T2.[DUEDATE]<=@TODATE ) 
    T4 ON T4.TRANSID = T1.TRANSID AND T4.[ACCOUNT]=@ACCNUM

  GROUP BY T4.[TransId] ,T1.[U_Naaration],T4.[ACCTNAME],T4.[ACCOUNT],T4.[LINEMEMO]

   FOR BROWSE 
```

我收到错误

> 必须选择要从中选择的表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:28:36.690

根据[此处](https://scn.sap.com/message/7293272)Petr Verner 的正确答案，您可能需要重写查询以避免使用子查询。

答案还继续建议选项：

1.  将查询嵌入到存储过程中并改为调用该 SP。

2.  使用视图。（您可以将它用于子查询部分或整个查询）。

3.  将子查询的结果存储到表变量（或临时表）中，然后在主查询中使用保存的结果集。

# dojo - dijit.form.DateTextBox - 在日历弹出窗口上设置一个类？

> ID：11342335
> 
> 赞同：2
> 
> 时间：2012-07-05T10:22:18.210
> 
> 标签：dojo, dijit.form

我只是创建一个简单的日期字段，如下所示：

```
new dijit.form.DateTextBox({
    value:d
}, input); 
```

我需要访问生成的日历弹出窗口（单击该字段时）并向其中添加一个类。

背景：由于 Dojo 坚持将小部件作为 body 的子级，我不能使用普通的 CSS，因为我需要根据 DateTextBox 所在的位置有不同的行为。

谢谢！

/J

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:04:33.843

您可以连接到 openDropDown 方法，然后访问下拉小部件以添加 css 类。

```
var cal = new dijit.form.DateTextBox({
  value:d
}, input);

aspect.after(cal, "openDropDown", function(deferred){
  dojo.addClass(cal.dropDown.domNode, 'myCal');
}); 
```

[http://jsfiddle.net/cswing/Kjr78/](http://jsfiddle.net/cswing/Kjr78/)

# c++ - 通过迭代打开文件

> ID：11342336
> 
> 赞同：1
> 
> 时间：2012-07-05T10:22:28.530
> 
> 标签：c++, c, text-files

在我的程序中需要打开大约 50 个文件以供阅读，我将所有文件从 1.txt 重命名为 50.txt 希望我可以通过增加文件号的循环传递文件名，但我不知道如何/不认为可以将整数传递给 char 或者是否有更好的方法来解决我的情况。

```
char* filename = "";

for(int i =0; i < 50; i++)
{
if(i == 0){filename = "0.txt";}
if(i == 1){filename = "1.txt";} // ..
int num = 0, theinteger = 0;
ifstream in(filename, ios::binary);
unsigned char c;
while( in.read((char *)&c, 1) )
{       
        in >> theinteger;
        sca.chac[num]=theinteger; 
        num++;
}
}

return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:27:58.873

有一种相对简单的方法 - 在 C 中，使用[`sprintf`](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)函数，如下所示：

```
char filename[100];
sprintf(filename, "%d.txt", i); 
```

在 C++ 中，使用[`ostringstream`](http://www.cplusplus.com/reference/iostream/ostringstream/)：

```
ostringstream oss;
oss << i << ".txt"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T10:27:26.783

只需构建代表您必须使用以下之一打开的文件名称的字符串：

```
stringstream ss;
ss << anIntVal;
mystring = ss.str() + ".txt"; 
```

或者

```
mystring = boost::lexical_cast<string>(anIntVal);
mystring += ".txt" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:41:17.707

看看[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/ "http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/")函数。它就像 printf 函数一样工作，但它打印到`char*`. 您必须确保`char*`足够大（您需要的字符数加上 1 用于 NULL 终止符）。然后，您可以在 for 循环中增加文件编号并使用 sprintf 函数更新`char* filename`，然后打开文件。

在你的情况下：

```
char* filename[10];
int i;
for( i = 0; i <= 50; ++i){
    sprintf(filename,"%i.txt",i);
    //do stuff with the files
} 
```

我发现它很有用（对于很好的排序，例如使用填充文件名，这也使得分配空间`char*`更容易：

```
char* filename = "50.txt"; //the highest number should fit
int i;
for( i = 0; i <= 50; ++i){
    sprintf(filename,"%02i.txt",i);
    //do stuff with the files
} 
```

希望这对你有帮助！

# c++ - 在 C++ 中使用 pthreads 实现线程池

> ID：11342337
> 
> 赞同：0
> 
> 时间：2012-07-05T10:22:29.937
> 
> 标签：c++, pthreads, threadpool

我在设计具有线程池的程序时遇到了麻烦。

我遇到的主要问题是当一个线程完成工作时，父级必须等待threadId（这是父级使用pthread_join等待线程的方式）。因为我们不知道哪个线程将首先完成，所以我无法找出解决问题的编程方法。

任何带有一小段代码的解释都值得赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:04:25.127

池通常实现为在生产者-消费者队列中等待任务项的多个线程。任务是派生自具有“run()”方法的任务类的对象。无论哪个线程获得一个任务，它都会调用 run()，当它返回时，线程循环以从队列中获取另一个任务对象。

这消除了任何线程微管理，并且可以在我尝试过的每种系统/语言上可靠且安全地工作。

我知道的完成通知最灵活的方法是线程在 run() 返回时调用任务的“OnComplete”事件，或者可能是虚拟的“完成”方法，就在循环返回以获取下一个任务之前，使用任务作为参数。例如，此方法/事件可以发出一个事件/condvar/sema 信号，任务发起线程正在等待该事件/condvar/sema，可以将已完成的任务排队到发起线程或另一个线程，甚至只是 delete() 任务，（也许它是作业完全在线程池中完成）。

对于错误通知，我捕获 run() 抛出的任何未捕获的异常，并将异常存储在 tast 字段中，然后再调用完成方法/事件。

除了那些保护生产者-消费者队列的锁之外，没有任何锁（它们只需要足够长的时间来推送/弹出一个*任务）。

无论您使用哪种设计，请尽量不要：

```
1) continually create/terminate/destroy threads - avoidable overhead and tricky to manage
2) wait with Join() for any thread to terminate - just don't :)
3) loop around some 'poll thread status' to see if they're finished yet - gets it wrong
4) Move 'working/finished' threads into and out of containers with complicated locks - deadlock-in-the-making
5) use any other sort of micro-management - difficult, messy, error-prone, too many locks, unnecesary, avoidable 
```

理想的线程池是您不知道哪个线程完成了工作。事实上，通常甚至不需要保留对线程的任何引用。两行伪线程池：

```
TblockingQueue *inQueue=new TblockingQueue();
for(int i=0;i<CpoolDepth,i++) new Thread(inQueue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:34:37.677

好吧，我不知道您的设置或要求，但是您遇到了 pthread_join() 恰好等待一个线程的问题，而您实际上想要等待任何线程。

因此，最明显的结论是 pthread_join 对您没有帮助。很抱歉说明了这一点，但我需要建立我的案例:-)

相反，你可能不得不想出另一个主意。例如，您可以等待条件变量；在线程退出之前，它会将条件设置为“退出”。主线程可以等待该条件，遍历线程以找出哪些线程已终止（可能不止一个），并最终重置条件。条件互斥锁通常足以防止竞争。

除了设置条件之外，线程还可以将一些 ID 添加到已退出线程的列表中（您可以使用条件互斥锁来保护该列表），因此主线程只需通过该列表而不是检查每个线程。

伪代码：

```
initialize condition variable with status "not exited"
...
...
launch your threads
...
...
while (some threads are still running) do
   lock condition variable on "exited"
   iterate through threads, remove the ones that have exited
   unlock condition variable with new condition "not exited" 
```

在你的线程里面：

```
 ...
 do whatever it needs to do
 ...
 ...
 lock condition variable
 unlock condition variable with new condition "exited"
 /* end of thread */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:34:20.843

如果你想实现一个线程池，看看我几年前玩过的这个架构。我在这里写了：[C++ 中的线程池](http://www.lateral.co.za/5mins/060215_5mins_threadpooling.pdf)

对于非阻塞 pthread_join，请参阅此 SO 讨论：[非阻塞 pthread_join](https://stackoverflow.com/questions/73468/non-blocking-pthread-join)

如果你只是在等待所有线程完成它们的工作，你可以一个一个地等待它们：顺序无关紧要，没有理由使用条件。此示例演示：

```
#include <memory.h>
#include <pthread.h>

#include <iostream>

using namespace std;

#define NTHREADS 10

void *thread(void *arg) {
    int *n = (int *) arg;
    sleep(10 - *n);
    cout << "Thread " << (*n) << endl;
    delete n;
    return NULL;
}

int main(int argc, char **argv) {
    pthread_t threads[NTHREADS];
    pthread_attr_t attr;
    memset(&attr, 0, sizeof(attr));
    int i;
    for (i=0; i<NTHREADS; i++) {
        int *p = new int;
        *p = i;
        pthread_create(threads + i, &attr, thread, p);
    }
    void *rval;
    for (i=0; i<NTHREADS; i++) {
        pthread_join(threads[i], &rval);
        cout << "Joined thread " << i << endl;
    }
    return 0;
} 
```

虽然线程的完成顺序与等待的顺序相反（即线程 0 最后完成，但我们先等待线程 0），但直到所有线程都完成后，主线程才会退出。不需要条件。

* * *

# ruby-on-rails - 如何在 ruby on rails 中上传文件？

> ID：11342338
> 
> 赞同：20
> 
> 时间：2012-07-05T10:22:31.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload

我对 ruby​​ on rails 很陌生。我遇到了一个问题。我想制作一个文件上传功能，通过它我可以上传任何类型的文件（文本、图像等）。我的控制器文件是（upload_controller.rb）：

```
class UploadController < ApplicationController
def index
    render :file => 'app\views\upload\uploadfile.html.erb'
end
def uploadFile
    post = DataFile.save(params[:upload])
    render :text => "File has been uploaded successfully"
end
end 
```

我的模型文件是（data_file.rb）：

```
class DataFile < ActiveRecord::Base
    attr_accessor :upload
  def self.save(upload)
    name = upload['datafile'].original_filename
    directory = 'public/data'
    # create the file path
    path = File.join(directory,name)
    # write the file
    File.open(path, "wp") { |f| f.write(upload['datafile'].read)}
  end
end 
```

我的视图文件是（uploadfile.html.erb）：

```
<h1>File Upload</h1>
<%= form_tag({:action => 'uploadFile'}, :multipart => true) do %>
<p><label for="upload_file">Select File</label>
<%= file_field 'upload', 'datafile' %></p>
<%= submit_tag "Upload" %>
<% end %> 
```

现在，当我尝试上传图像时，我在模型文件中收到错误“invalid access mode wp”。当我在模型文件中将 File.open(path, "wp") 更改为 File.open(path, "w") 时，这会给出错误“'\x89' from ASCII-8BIT to UTF-8”。对于 .txt 文件，它工作正常。我正在使用 ruby​​ 1.9.3 和 rails 3.2.6

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T08:39:57.223

谢谢，例如，我也学习rails！

它适用于rails 3.1

我的代码：

```
Routes
resources :images do
      collection { post :upload_image }
    end 
```

控制器

```
class ImagesController < ApplicationController
  def index
    @car = Car.find(params[:car_id])
    @images = @car.images.order("order_id")
  end

  def upload_image   
    DataFile.save_file(params[:upload])
    redirect_to images_path(:car_id => params[:car_id])
  end 
```

查看 index.html.erb

```
<h1>File Upload</h1>
  <%= form_tag({:action => 'upload_image', :car_id => @car.id}, :multipart => true) do %>
    <p><label for="upload_file">Select File</label>
    <%= file_field 'upload', 'datafile' %></p>
    <%= submit_tag "Upload" %>
  <% end %>

  <% @images.each do |image| %>
     <%= image.id %><br/>
     <%= image.name %>
  <% end %> 
```

模型

```
class DataFile < ActiveRecord::Base
    attr_accessor :upload

  def self.save_file(upload)   

    file_name = upload['datafile'].original_filename  if  (upload['datafile'] !='')    
    file = upload['datafile'].read    

    file_type = file_name.split('.').last
    new_name_file = Time.now.to_i
    name_folder = new_name_file
    new_file_name_with_type = "#{new_name_file}." + file_type

    image_root = "#{RAILS_CAR_IMAGES}"

    Dir.mkdir(image_root + "#{name_folder}");
      File.open(image_root + "#{name_folder}/" + new_file_name_with_type, "wb")  do |f|  
        f.write(file) 
      end

  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:33:12.193

问题的原因是编码问题。您似乎正在以 ASCII-8BIT 模式读取文件并以 UTF-8 写入，这意味着需要进行转换。而且从 ASCII-8BIT 到 UTF-8 的转换也不是直截了当的。或者，您可以为读取和写入文件指定二进制模式。

```
upload_file = File.new(<original file>, "rb").read 
```

和

```
File.open(<final uploaded file>, "wb") {|f| f.write(upload_file) } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T09:41:52.120

使用“wb”而不是“wp”。有用

```
File.open(path, "wb") { |f| f.write(upload['datafile'].read)} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T15:21:50.780

另一个不错的选择是[carrierwave](https://github.com/jnicklas/carrierwave)，它的安装非常简单，github 上的指南可以让您在几分钟内启动并运行。将其添加到您的 gemfile 然后运行`bundle install`

关于这个主题还有一个很好的[railscast](http://railscasts.com/episodes/253-carrierwave-file-uploads)

# c# - 优化将股市指数传递给其他线程的无锁代码

> ID：11342340
> 
> 赞同：1
> 
> 时间：2012-07-05T10:22:48.300
> 
> 标签：c#, real-time, hft

我正在计算经常变化的股票市场指数，所以我决定给我的服务器（运行 2 * E5-2640）单独的“核心”（24 个虚拟可用核心之一），因为到目前为止我只有 5% CPU 负载，所以我有很多可用的空闲 CPU 电源。

由于我需要尽快对股市指数变化做出反应，我决定使用无锁代码。这是我将在现实生活中使用的示例：

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Threading.Tasks;

namespace TestBlockingCollection2
{
    class Program
    {

        static void Main(string[] args)
        {
            Stopwatch sw = Stopwatch.StartNew();
            int i = 0;

            Task.Factory.StartNew(() =>
            {
                while (true)
                {
                    Console.WriteLine("Adding " + (i + 1));
                    sw = Stopwatch.StartNew();
                    i++;
                    Thread.Sleep(1000);
                }
            }, TaskCreationOptions.LongRunning);

            Task.Factory.StartNew(() =>
                                      {
                int prevI = 0;
                while (true)
                {
                    if (prevI < i)
                    {
                        sw.Stop();
                        long microseconds = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
                        Console.WriteLine("Received " + i + ". Spent " + microseconds + " microseconds.");
                        prevI = i;
                    }
                }
            }, TaskCreationOptions.LongRunning);

            while (true)
            {
                Thread.Sleep(1000);
            }
        }
    }
} 
```

输出：

```
C:\bin\testBlockingCollection2>TestBlockingCollection2.exe
Adding 1
Received 1\. Spent 1 microseconds.
Adding 2
Received 2\. Spent 5 microseconds.
Adding 3
Received 3\. Spent 2 microseconds.
Adding 4
Received 4\. Spent 2 microseconds.
Adding 5
Received 5\. Spent 2 microseconds.
Adding 6
Received 6\. Spent 4 microseconds.
Adding 7
Received 7\. Spent 2 microseconds.
Adding 8
Received 8\. Spent 2 microseconds.
Adding 9
Received 9\. Spent 5 microseconds.
Adding 10
Received 10\. Spent 2 microseconds.
Adding 11
Received 11\. Spent 2 microseconds.
Adding 12
Received 12\. Spent 2 microseconds.
Adding 13
Received 13\. Spent 2 microseconds.
Adding 14
Received 14\. Spent 2 microseconds.
Adding 15
Received 15\. Spent 2 microseconds.
Adding 16
Received 16\. Spent 3 microseconds.
Adding 17
Received 17\. Spent 5 microseconds.
Adding 18
Received 18\. Spent 2 microseconds.
Adding 19
Received 19\. Spent 2 microseconds. 
```

与我使用`BlockingCollection` [异步执行方法比 BlockingCollection 更好的 18 微秒相比，平均有 2 微秒是相当惊人的？](https://stackoverflow.com/questions/10267850/what-better-do-we-have-to-asynchronous-execute-method-than-blockingcollection)

我真的很想要这个微秒，因为我有很多空闲的 CPU 能力，而且在 HFT 中微秒很重要。

所以这个问题很简单——你看到我的例子有什么问题吗？我从来没有写过无锁代码，所以我想我可能会犯愚蠢的错误。我不使用自旋锁，因为我假设原始更改（int/double/decimal）是“原子的”，所以在第二个线程中，我总是收到以前的或新的值，但没有别的。

即，如果在一个线程中我将 int x 从 100 更改为 555，那么在第二个线程中我将拥有 100 或 555，但绝不会是 500 或 155 或其他任何值。

# html - 绝对位置后文本装饰下划线不起作用

> ID：11342341
> 
> 赞同：1
> 
> 时间：2012-07-05T10:22:49.340
> 
> 标签：html, css, positioning, css-position

[http://jsfiddle.net/ZPNxh/2/](http://jsfiddle.net/ZPNxh/2/)

当我绝对定位覆盖层时，h3 上的悬停（下划线）不起作用（尽管 A 标签包裹了所有内容）。

当它正常定位时，下划线就像一个魅力。

我尝试使用 z-indexes，但徒劳无功

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:28:46.613

首先，`a`标签是内联元素，`h3`标签是块元素！您不能将`h3`标签放在标签内`a`。因此，首先删除`a`标签并将其作为其他块级元素，如`div`.

伪类在IE 6 上除了 for标记`:hover`之外不起作用。`a`因此，如果您使用`div`标签并将其定位为`div:hover`，那么它适用于所有浏览器，除了那些低于 IE 7 的浏览器。

不过，如果您想使用相同的标记，请添加：

```
a {display: block;} 
```

因此，它将它呈现为一个块元素，而不是内联元素，持有`h3`and `div`！

## 预习

![在此处输入图像描述](../Images/3fec0301339ef0c3149958b76d8bbe1c.png)

另一种最好的方法是添加`border-bottom: 2px solid;`而不是`text-decoration`！

# ruby-on-rails - 会话在某些 rspec 文件中可用，而在其他文件中不可用。怎么会？

> ID：11342355
> 
> 赞同：9
> 
> 时间：2012-07-05T10:23:32.427
> 
> 标签：ruby-on-rails, session, rspec

在尝试测试某些登录/注销功能时，我想从会话中删除一些信息。我发现我根本无法访问会话。我不断收到错误：nil:NilClass 的未定义方法“会话”。

但令我惊讶的是，我发现我可以从其他 rspec 页面访问会话。其他详细信息如下。我的问题是：为什么我可以从某些文件而不是其他文件访问会话？我怎样才能做到这一点，以便我可以在下面的第二个示例中访问会话？

详细信息文件：spec/controllers/tenants_controller_spec.rb

```
require 'spec_helper'

describe TenantsController do
  specify { session[:tag].should == 'abc' }
end 
```

文件：spec/requests/test.rb

```
require 'spec_helper'

describe 'Test' do
  specify { session[:tag].should == 'abc' }
end 
```

当我通过 rspec 运行第一个文件时，我得到：

```
Failure/Error: specify { session[:tag].should == 'abc' }
  expected: "abc"
    got: nil (using ==) 
```

哪个好。由于这个原因，这应该失败。

但是，当我运行第二个文件时，我得到：

```
 Failure/Error: specify { session[:tag].should == 'abc' }
 NoMethodError:
   undefined method `session' for nil:NilClass 
```

那么为什么 session 在这里是一个未定义的方法呢​​？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T19:08:00.673

您的第二个测试是一个“请求”规范，它是一个集成测试。这些旨在模拟浏览器和您获得的帮助程序，让您单击按钮并填写表单并断言页面上的文本、标签。这是检查会话对象的错误抽象级别。

如果您想取消身份验证，例如最好通过应用程序。参见，例如这里：[请求规范中的存根身份验证](https://stackoverflow.com/questions/5787409/stubbing-authentication-in-request-spec)

要知道集成测试是“探索性”或“冒烟”测试，是检查组件之间接缝的高级测试，而不是组件本身的内部测试。它们的编写和维护成本最高。使用控制器规范来验证会话内容并将所有业务逻辑移动到最容易测试的模型中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:13:36.670

你正在测试两种不同的东西。在第一个测试中，您测试了一个 Rails 控制器，因此 RSpec`session`为您添加了类似的助手。在第二个测试中，您处于请求测试中，因此 RSpec 不会添加任何与控制器相关的帮助程序。

**更新**

我没有对此进行测试，但查看[源代码](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/example.rb#L15..L17)我认为这应该足够了

```
include ::RSpec::Rails::ControllerExampleGroup 
```

有关更多信息，请查看`rspec-rails`github 上的项目。

**更新 2**

您不应该在请求规范中测试 cookie，引用[RSpec 文档](https://www.relishapp.com/rspec/rspec-rails/docs/request-specs/request-spec)：

请求规范为 Rails 的集成测试提供了一个精简的包装器，旨在通过整个堆栈来驱动行为，包括路由（由 Rails 提供）和没有存根（这取决于你）。

# actionscript-3 - DateTimeFormatter 和 setDateTimePattern

> ID：11342358
> 
> 赞同：1
> 
> 时间：2012-07-05T10:23:39.047
> 
> 标签：actionscript-3, date-formatting

我很难理解 AS3 DateTimeFormatter ：

```
var df:DateTimeFormatter = new DateTimeFormatter("fr_FR");
df.setDateTimePattern("DD-MM-YYYY");
result = df.format(date);
//result = lundi 19 mars 2012 00:01:00 
```

livedoc说使用setDateTimePattern应该覆盖dateStyle和timeStyle，现在它似乎对我设置的模式没有给出一个f ***，有没有人知道这种行为的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:03:42.037

你应该写：

```
var df:DateTimeFormatter = new DateTimeFormatter("fr_FR");
df.setDateTimePattern("dd-MM-yyyy");
result = df.format(date); 
```

# javascript - Backbone.js 模型中的几个问题

> ID：11342364
> 
> 赞同：0
> 
> 时间：2012-07-05T10:23:45.990
> 
> 标签：javascript, backbone.js

我是backbone.js的初学者。这是我正在努力的方向。

[http://jsfiddle.net/pW3SZ/](http://jsfiddle.net/pW3SZ/)

```
Person = Backbone.Model.extend({
        defaults: {
            name: 'Fetus',
            age: 0,
            children: []
        },
        initialize: function(){
            //alert("Welcome to this world");
        }
});

var person = new Person({name: 'John', age: '100'});
delete person;

//var person = new Person;
//person.set({name: 'Cooper', age: '90'});

alert(person.get('name') + ' ' + person.get('age')); 
```

1.  我确实删除了我的 person 实例，但是当我提醒为什么我得到 John 和 100 而不是默认值时。
2.  初始化和构造函数有什么区别。它做同样的工作吗？
3.  这些值存储在内存的哪个部分。我知道它可能是堆栈，但有人可以对此提供见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:56:02.790

-1 [“delete 运算符删除对象、对象的属性或数组中指定索引处的元素。”](http://www.openjs.com/articles/delete.php)

基本上就像 delete 运算符适用于数组一样，如果你有这样的[fiddle](http://jsfiddle.net/pW3SZ/3/)。检查您的 js 控制台，它会引发错误，因为删除运算符已从数组中删除该项目。

-2 在 Backbone.js 中，您可以将 initialize -function 视为构造函数。您可以使用它以其他默认方式处理在初始化时传递给对象的参数。

对于-3，我没有答案。

希望这（部分）有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:55:44.390

1.  3\. 你真的没有。从数组中删除对象或元素的删除属性[。](http://msdn.microsoft.com/en-us/library/2b2z052x%28v=vs.94%29.aspx)您不能删除 javascript 对象，只能删除指向该对象的指针并等待 GC 清理内存。替换 `delete person;`为`person = undefined;`删除指针

2.  `Person.prototype.constructor`是一个真正的构造函数，Backbone 做它自己的内部事情。最后它运行`Person.prototype.initilalize`——放置你的 on_create 逻辑的地方

# jfilechooser - jfilechooser 如何在 DIRECTORIES_ONLY 模式下隐藏文件夹名称中的完整路径

> ID：11342366
> 
> 赞同：2
> 
> 时间：2012-07-05T10:23:48.887
> 
> 标签：jfilechooser, directory

我将 jfilechooser 设置为 DIRECTORIES_ONLY 模式。我不喜欢我当前的 jfilechooser 是在 directory_only 模式中选择文件夹会在文件夹名称中显示完整的绝对路径。有没有办法覆盖这种行为，只显示文件夹名称，就像在文件的情况下一样？

我的 jfilechooser 旨在为即将创建的文件夹指定一个名称，以将内容保存到或者如果选择了一个文件夹，则覆盖该文件夹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-25T14:51:31.253

我不是用 java 编码，而是用 kawa（jvm 方案）编码，所以我只能尽可能地给出类似 java 的解决方案。

基本上，我在我的 JFileChooser Override propertyChange 方法中添加了一个 PropertyChangeListener 来执行以下操作我监听属性更改 SELECTED_FILE_CHANGED_PROPERTY 并将文件名显示手动设置为 FileChooserUI，它是 JFileChooser 的一部分。

请注意，所有这些只是为了美观，所选择的文件夹无论如何都不会改变。只是文件名显示不应以这种方式显示完整路径，而应仅显示您刚刚选择的文件夹的名称。

这是我在不测试的情况下编写 java 代码的尝试。当我有更多时间时，我会再次测试这个。

```
JFileChooser folder_chooser = new JFileChooser();

folder_chooser.setFileSelectionMode (JFileChooser.DIRECTORIES_ONLY);

PropertyChangeListener folder_name_changer = new PropertyChangeListener () {
    public void propertyChange(PropertyChangeEvent e) {
        String property_name = e.getPropertyName();
        JFileChooser chooser = e.getSource();
        if (property_name.equals(JFileChooser.SELECTED_FILE_CHANGED_PROPERTY) {
            File selected_file = chooser.getSelectedFile();
            FileChooserUI chooser_ui = chooser.getUI();

            // BasicFileChooserUI is the subclass that implements a setFileName method
            if ( selected_file != null && (chooser_ui instanceof BasicFileChooserUI)) {
                chooser_ui.setFileName( selected_file.getFileName() );
            }
        } 
    }
};

folder_chooser.addPropertyChangeListener( folder_name_changer ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T20:25:04.503

我遇到过同样的问题。我删除了关于将模式设置为 DIRECTORIES_ONLY 的部分，而是使用了文件过滤器，以便只有目录会显示在浏览视图中：

```
chooser.setFileFilter(new FileFilter() {
  def accept(f: File) = f.isDirectory
}) 
```

（抱歉，这是 Scala，但应该足够清楚）。

但是，这对于您希望用户能够选择要覆盖的目录的第二个用例来说不会特别好。

# objective-c - 如何将数据从 iphone 应用程序保存到文本文件并保存在文档中

> ID：11342367
> 
> 赞同：-2
> 
> 时间：2012-07-05T10:23:56.990
> 
> 标签：objective-c, xcode

正如我们所知，可以在 iphone 应用程序中创建 pdf 文件，但我希望我在表格视图中的数据必须保存在应用程序的文档中的文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:48:46.613

您创建一个文本文件，让它成为“file.txt”并写入所需的数据，这里的“yourString”如下所示，

```
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];
 NSString *stringWithoutSpaces = [yourString stringByReplacingOccurrencesOfString:@" " withString:@""];
[stringWithoutSpaces writeToFile:filePath atomically:TRUE encoding:NSUTF8StringEncoding error:NULL]; 
```

您可以按如下方式读取保存的数据，

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"file.txt"];
    NSString *yourString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL]; 
```

# heroku - 在 heroku 打印应用程序日志上播放 2.0 应用程序

> ID：11342369
> 
> 赞同：1
> 
> 时间：2012-07-05T10:24:09.890
> 
> 标签：heroku, playframework-2.0

当我将 Play 2 应用程序部署到 Heroku 时，我可以从“heroku 日志”中看到以下日志。

```
2012-07-05T10:13:08+00:00 app[web.1]: Play server process ID is 3
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Class path contains multiple SLF4J bindings.
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Found binding in [jar:file:/app/target/staged/slf4j-log4j12-1.6.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Found binding in [jar:file:/app/target/staged/logback-classic-1.0.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
2012-07-05T10:13:09+00:00 app[web.1]: log4j:WARN No appenders could be found for logger (com.jolbox.bonecp.BoneCPDataSource).
2012-07-05T10:13:09+00:00 app[web.1]: log4j:WARN Please initialize the log4j system properly.
2012-07-05T10:13:09+00:00 app[web.1]: log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

当我尝试从 Play 应用程序打印日志时，我无法从 heroku 日志输出中获取它。这是我的播放日志配置。

```
# Logger used by the framework:
logger.play=INFO

# Logger provided to your application:
logger.application=DEBUG 
```

我在 Play 2 java 类中使用的日志语句：

```
play.Logger.debug("log output......"); 
```

**更新 1** 这是我为解决多个依赖项问题所做的。

```
("com.jayway.facebooktestjavaapi" % "facebook-test-java-api" % "1.1.5" notTransitive()).exclude("org.slf4j", "slf4j-log4j12") 
```

**更新 2** 在我解决了上述错误之后，日志语句仍然没有输出到“heroku 日志”。所以我在这里（https://github.com/playframework/Play20/wiki/SettingsLogger）设置logger.xml。但它仍然没有输出任何东西。

```
$ vi conf/application.conf
logger.resource=dev-logger.xml
db.default.logStatements=true

$ cat conf/dev-logger.xml 
<configuration>

  <conversionRule conversionWord="coloredLevel" converterClass="play.api.Logger$ColoredLevel" />

  <appender name="FILE" class="ch.qos.logback.core.FileAppender">
     <file>${application.home}/logs/application.log</file>
     <encoder>
       <pattern>%date - [%level] - from %logger in %thread %n%message%n%xException%n</pattern>
     </encoder>
   </appender>

  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%coloredLevel %logger{15} - %message%n%xException{5}</pattern>
    </encoder>
  </appender>

  <logger name="play" level="TRACE" />
  <logger name="application" level="TRACE" />

  <root level="DEBUG">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
  </root>

</configuration> 
```

**更新 3** 我将所有内容还原并使用原始应用程序日志，但仍未输出。

```
# Root logger:
logger.root=DEBUG

# Logger used by the framework:
logger.play=DEBUG

# Logger provided to your application:
logger.application=DEBUG

# Logger ebean
logger.com.jolbox=DEBUG 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:07:42.563

如果您阅读 Heroku 日志，您会注意到您的日志系统已损坏。首先，您有多个 SLF4J 实例：

```
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Class path contains multiple SLF4J bindings.
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Found binding in [jar:file:/app/target/staged/slf4j-log4j12-1.6.3.jar!/org/slf4j/impl/StaticLoggerBinder.class]
2012-07-05T10:13:08+00:00 app[web.1]: SLF4J: Found binding in [jar:file:/app/target/staged/logback-classic-1.0.0.jar!/org/slf4j/impl/StaticLoggerBinder.class] 
```

其次，您没有定义任何附加程序，这意味着您的日志消息不会在任何地方打印：

```
2012-07-05T10:13:09+00:00 app[web.1]: log4j:WARN No appenders could be found for logger (com.jolbox.bonecp.BoneCPDataSource).
2012-07-05T10:13:09+00:00 app[web.1]: log4j:WARN Please initialize the log4j system properly. 
```

解决第一个问题也可以解决第二个问题。否则，请修复第一个问题 (SLF4J)，然后，如果您使用自定义日志记录配置，请验证它是否已正确设置。

**编辑更新：** 请删除您的自定义“logger.xml”并重新上传。它应该可以工作，这将指向您的“logger.xml”作为罪魁祸首（如果您没有更改任何其他日志配置）。我在 Heroku 中使用默认的 Play 日志记录，它工作正常，所以它应该适合你。

如果没有，那么我很肯定您已经对日志配置进行了一些其他更改，或者您的应用程序中有一些其他日志配置正在停止日志。你应该找到并恢复它。

**根据要求编辑：**

正如我所提到的，我的配置是默认配置：

```
# Root logger:
logger.root=ERROR

# Logger used by the framework:
logger.play=INFO

# Logger provided to your application:
logger.application=DEBUG 
```

没有logger.xml，没有别的。有用。如果您遇到问题，可能是您在其他地方覆盖了配置，请检查您使用的任何 jar 或 Heroku 显示的日志中的任何其他冲突，这些冲突可能暗示该区域存在错误。

# javascript - 处理从 CDN 加载资源的失败或缓慢。

> ID：11342371
> 
> 赞同：3
> 
> 时间：2012-07-05T10:24:15.333
> 
> 标签：javascript, cdn, fallback

我在网站上为 js、css 和图像使用 CDN (maxcdn.com)。我注意到，从一些 ISP 那里，这些资源要么完全无法加载，要么加载速度非常慢。但是，来自我的服务器的本地静态服务总是可以正常工作。因此，我希望能够检测到此类资源加载失败并通过回退到本地服务来响应它们。

我在这里找到了几种检测 js 和 css 加载失败的解决方案。最常见的是使用嵌入式 js 从 css 中检查一些 js var 和一些 cssRules（位于脚本和链接标签之前、之后）。但是，这不允许：

1.  检测加载缓慢（检测到加载缓慢后应立即开始...）
2.  检测从 css 引用的图像的加载失败。

**是否有任何简单、优雅的方法来检测资源加载失败/缓慢并快速回退到本地服务？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:09:06.713

如此处所述[https://stackoverflow.com/a/2021325/745190](https://stackoverflow.com/a/2021325/745190)在开始加载脚本后无法禁用它。

您可以尝试最初从 cdn 加载一个非常小的 (.1kb) 脚本。在很短的时间后测试该脚本，如果它下载使用 javascript 将其他脚本标签附加到您的页面，如果没有，它是一个不必要的小文件下载。

遗憾的是，这种方法有两个主要缺点。第一个是对 cdn 的额外查询，第二个是无法完全加载小脚本可能会导致您的浏览器滚轮继续旋转。

如果你不确定，测试是这样的：

```
/* tiny-file.js */
var window.speedTest = true; 
```

和

```
/* The test */
setTimeout(function(){
    if (window.speedTest !== true) {
        //append local javascript
    }
    else {
        //append cdn javascript
    }
}, 50); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:42:53.850

我怀疑您的问题主要发生在某些 ISP 上。

如果您的主要目标是在保持 CDN 作为主要解决方案的同时实现性能，我可以看到两个选项。首先，您尝试识别失败的 ISP，但这可能会非常耗时且成本高昂。另一种选择是“学习”。尝试从 CDN 加载一个简单的 JS 设置变量。如果失败，您可以假设存在问题。设置一个 cookie 并在下一页加载时使用它来自动从您的主服务器加载所有内容。

# jasper-reports - 如何在 jasper ireport 中创建新页面

> ID：11342374
> 
> 赞同：0
> 
> 时间：2012-07-05T10:24:19.733
> 
> 标签：jasper-reports, ireport

我必须在每个页面中显示一个组的详细信息。
所以它应该是 1 个页面的 1 个组，另一个组也应该显示在另一个页面中。
我正在使用*iReport* 4.6.0 版。我找不到“在新页面上创建”属性。

请告诉我如何在此版本的新页面上进行分组和创建。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:44:37.883

您需要在菜单“格式-> 页面格式...”中设置每个页面的大小。然后根据需要创建详细信息带。每个细节带需要与您之前在格式菜单中设置的页面尺寸相同。您需要将每个组分别放在一个详细信息带中，并且 iReport 会自动将每个详细信息带设置在一个页面中。

# parsing - 如何在使用 F# FsYacc 进行解析时添加和使用自定义上下文参数？

> ID：11342379
> 
> 赞同：3
> 
> 时间：2012-07-05T10:24:56.550
> 
> 标签：parsing, f#, fsyacc

我在 F# 应用程序中使用*FsLex*和*FsYacc*进行字符串解析。在抽象语法树 (AST) 创建期间，解析器必须决定如何创建 AST（制作不同的树、抛出异常等）。解析器行为必须依赖于几个参数。

[在这里](http://fsharppowerpack.codeplex.com/wikipage?title=FsYacc)，我发现允许声明如下内容：

```
%type < (context -> context) > toplevel 
```

但我找不到如何使用这种结构，并且在项目编译期间，*“fsyacc.exe”以代码 1 退出。”*错误

**问题**是：在使用 FsYacc 解析期间是否可能以及如何使用上下文参数？

**我尝试过的**示例：****

 **```
%start startAst

%type < (bool -> MyAst) > startAst

%%   

startAst:
| MyAst EOF { 
                    (fun (x : bool) -> 
                        if x then 
                            MyAst.Type1 $1 
                        else 
                            MyAst.Type2) 
                }
... 
```

我期望使用这样的东西：

```
let lexbuf = Lexing.LexBuffer<char>.FromString text
lexbuf |> Lexer.tokenize |> Parser.startAst (ctx: bool) 
```

提前致谢

**更新**以下异常并在 fsycc.exe 执行期间生成调用堆栈：

```
Unhandled Exception: System.Exception: more than one input given
   at FSharp.PowerPack.FsYacc.Driver.clo@67-5.Invoke(String x)
   at <StartupCode$fsyacc>.$Arg.findMatchingArg$cont@104-1(FSharpRef`1 cursor, FSharpFunc`2 other, String usageText, FSharpList`1 argSpecs, String arg, Unit unitVar)
   at <StartupCode$fsyacc>.$Arg.findMatchingArg@64(FSharpRef`1 cursor, String[] argv, FSharpFunc`2 other, String usageText, Int32 nargs, FSharpList`1 argSpecs, String arg, FSharpList`1 args)
   at Internal.Utilities.ArgParser.ParsePartial(FSharpRef`1 cursor, String[] argv, IEnumerable`1 arguments, FSharpOption`1 otherArgs, FSharpOption`1 usageText)
   at Internal.Utilities.ArgParser.Parse(IEnumerable`1 arguments, FSharpOption`1 otherArgs, FSharpOption`1 usageText)
   at <StartupCode$fsyacc>.$FSharp.PowerPack.FsYacc.Driver.main@() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T09:20:55.327

抱歉耽搁了这么久，但终于解决了这个问题。

编写 FsYacc（F# 团队？）的人错过了这些功能，从他们在您链接的页面上的评论中可以看出。我尝试了几种变体，但这是我唯一能够工作的变体（注意：这需要文件中`#nowarn "62"`的a `.fsy`，它将传播到`.fs`文件或`--nowarn:62`整个项目）：

```
%{

open Ast

type ('a,'b) Fun = 'a -> 'b

%}

%start startAst

%token <string> MyAst
%token EOF

%type < (bool, MyAst) Fun > startAst

%%

startAst:
| MyAst EOF { (fun (x : bool) ->
                if x then
                    MyAst.Type1 $1
                else
                    MyAst.Type2) } 
```

我不知道为什么（而且没有时间查看 FsYacc 的来源，至少现在没有）。**

# sql-server - SQL Server 2012 Express 中的 Unicode

> ID：11342380
> 
> 赞同：3
> 
> 时间：2012-07-05T10:24:56.707
> 
> 标签：sql-server, database

我正在使用 ac# 程序将一些 unicode 字符（例如中文字符）插入到 SQL Server 2012 数据库中。

我要插入的列是`nvarchar`，但仍然得到 ??????? 而不是正确的字符。我正在从 twitter 获取推文并将其插入数据库。

我正在使用 SQL Server 2012 Express。我必须安装任何语言包或更改设置吗？我对 SQL Server 不是很熟悉。

这就是我使用 c# 将代码插入数据库的方式：

```
String command4 = "INSERT INTO  tweets ([username], [createdDate], [tweet]) Values ('" + item.user.screen_name + "' , '" + item.created_at + "' ,N'" + escapedString + "')";

SqlCommand insertTweet = new SqlCommand(command4, connectionstring);

insertTweet.ExecuteNonQuery(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:07:19.683

将字符作为 SQL 字符串传递时，始终以“N”开头：

```
N'Unicode' 
```

而不仅仅是

```
'Unicode' 
```

或者在你的情况下：

```
@"INSERT INTO tweets ([username], [createdDate], [tweet]) 
Values (N'" + item.user.screen_name + "' , '" + item.created_at + "' , N'" + escapedString + "')" 
```

顺便说一句，**你应该[使用参数](http://www.dotnetperls.com/sqlparameter)**。它可以一次解决许多问题（例如您拥有的问题、日期和数字格式、安全性......）

# wordpress - 新的 wp_query 分页给出 404

> ID：11342381
> 
> 赞同：1
> 
> 时间：2012-07-05T10:24:57.660
> 
> 标签：wordpress, pagination, http-status-code-404, permalinks

我终于用尽了耐心拖网谷歌试图找到解决方案......非常感谢任何帮助。

我在 WP 3.3.2 上设置了一个站点，并且正在使用 wp_query 查询自定义帖子类型：

```
$paged = (get_query_var('page')) ? get_query_var('page') : 1;

$args = array(
    'post_type' => 'feedback',
    'meta_key' => 'Overall how would you grade this course?',
    'orderby' => $orderby,
    'order' => $order,
    'posts_per_page' => '10',
    'paged' => $paged
    );

$feedback  = new WP_Query($args); 
```

我也有一些额外的元查询，但这就是它的症结所在。

我的问题是分页...我的网址显示为 domain.com/client-feedback/page/2/ 但我得到了 404。

到目前为止，我已经尝试获取如上所示的 $paged 变量，并从 URL 中提取页码。我相当有信心我已经搞定了。如果我强迫`'paged' => 2`我得到第二页的结果没有问题。

我也尝试过如图所示运行查询，但也劫持了 $wp_query （将原始数据转储到 $temp 变量中，并在完成后恢复它。）

无论我尝试什么，我都无法超越第 1 页。我一直在使用 pagenavi 插件以方便使用，但禁用它没有任何区别。

我最好的猜测是它与永久链接相关 - 我试过 /%category%/%postname/ 和只是 /%postname%/ 但这也没有什么区别。

我在这个死胡同-非常感谢任何想法/见解/哀悼。

大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:51:16.507

我给我的自定义帖子类型添加了一个复数 slug 并在下面添加了这个函数来解决这个问题。

```
add_filter( 'redirect_canonical', 'department_listing_disable_redirect_canonical' );

function department_listing_disable_redirect_canonical( $redirect_url ) 
{

    if ( is_singular( 'your_custom_post_type_SLUG' ) )
        $redirect_url = false;

    return $redirect_url;
} 
```

希望对你有帮助 =D

# azure - 适用于 1.7 的 Azure Powershell cmdlet，2012 年 6 月：Get-OperationStatus 发生了什么？

> ID：11342390
> 
> 赞同：5
> 
> 时间：2012-07-05T10:25:27.207
> 
> 标签：azure, azure-configuration, azure-powershell

新的 Powershell cmdlet（在此处记录：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj152841](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841)）看起来很可爱，但似乎缺少一个：

`Get-OperationStatus -WaitToComplete`

没有这个我的 Azure 操作（例如`Set-AzureDeployment`）不要等待完成。

这使得在进行 VIP 交换之前很难知道登台实例何时运行。

有没有其他选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T14:37:49.890

因此，经过调查，我最初的假设部分错误：对新 Powershell cmdlet 的调用*确实会*等待成功完成，*但*.`Set-AzureDeployment -newStatus "Running"`

这很好，因为我们不再需要`Get-OperationStatus`分散在脚本中的调用；但是，这很糟糕，因为`Set-AzureDeployment`会使部署旋转。

不过，我们可以调用`Get-AzureDeployment`，并遍历`RoleInstanceList`以找出发生了什么。像这样：

```
function Get-StagingReady {
    $stagingStatus = Get-AzureDeployment $azureService -slot staging 
    if (-not $($stagingStatus.Status -eq "Running")) {
        Write-Host $(" ... ... Staging slot status is not Running; value is " + $stagingStatus.Running)
        return $False
    }

    if (-not $stagingStatus.RoleInstanceList) {
        Write-Host " ... ... Staging slot has no instances configured yet."
        return $False
    }

    $notReady = $False

    Foreach ($roleInstance in $stagingStatus.RoleInstanceList) {
        if (-not $($roleInstance.InstanceStatus -eq "ReadyRole")) {
            Write-Host $(" ... ... ... Staging slot instance " + $roleInstance.InstanceName + " has status " + $roleInstance.InstanceStatus)
            $notReady = $True
        }
    }

    if ($notReady) {
        Write-Host " ... ... One or more instances not running."
        return $False
    }

    Write-Host " ... Staging slot ready for use."
    return $True
}

function Wait-ForStagingToBeReady {
    while ( -not $(Get-StagingReady) ) {
        Write-Host " ... ... Staging slot not ready, waiting 15 seconds for Azure to spin up instances."
        Start-Sleep -s 15
    }
}

function Start-Staging {
    Write-Host " ... Starting staging slot."

    $staging = Get-Staging $azureService 
    $result = Set-AzureDeployment `
            -Status `
            -serviceName $azureService `
            -slot "Staging" `
            -newStatus "Running" 

    if (-not $?) {
        Write-Host
        Write-Host "Unable to start staging slot."
        Write-Host "DEPLOY FAILED"
        Write-Host
        exit 1
    }

    Wait-ForStagingToBeReady

    Write-Host " ... Deployment in Staging slot started."
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:44:04.183

> > 但是有一个似乎不见了

如果不支持，请寻找替代方案。例如，请直接使用 REST API 而不是使用 PowerShell。REST API 允许我们跟踪异步请求：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460791](http://msdn.microsoft.com/en-us/library/windowsazure/ee460791)。

此外，您还可以在[http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting)上提交功能请求。

最好的祝福，

明旭。

# php - 如果不是格式，则将尾随零添加到 php 字符串

> ID：11342392
> 
> 赞同：1
> 
> 时间：2012-07-05T10:25:28.467
> 
> 标签：php

有一个获取价格数据的文本框。如果有人输入类似“3”的内容。我想让它转换为“3.0”我不能简单地在最后附加“0”，因为如果它是“100”则转换为“1000”

is_numeric("3.") 也返回 1。

什么是可能的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:29:54.457

你需要[number_format()](http://php.net/manual/en/function.number-format.php)：

```
number_format('3', 1, '.', ''); // = 3.0
number_format('3.', 1, '.', ''); // = 3.0
number_format('3.22', 1, '.', ''); // = 3.2
number_format('3.22abc', 1, '.', ''); // = 3.2 and a "PHP Notice:  A non well formed numeric value encountered"
number_format('abc3.22', 1, '.', ''); // = "PHP Warning:  number_format() expects parameter 1 to be double, string given" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:29:37.977

您将需要为此使用[`number_format()`](http://hu2.php.net/manual/en/function.number-format.php)。

`number_format($number, 1, ".", "");`将为您解决问题：

*   `3`变成`3.0`
*   `2500`变成`2500.0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:53:46.920

尝试先将其转换为浮点数，然后使用 number_format 对其进行格式化。

```
$number = (float) $_POST['text_box'];
number_format($number, 1, '.', ''); 
```

希望这可以帮助

# php - PHP - 获取 XML 节点的值

> ID：11342393
> 
> 赞同：3
> 
> 时间：2012-07-05T10:25:31.810
> 
> 标签：php, xml, xpath, domdocument

我有一个像这样的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<GeteBayDetailsResponse xmlns="urn:ebay:apis:eBLBaseComponents">
  <Timestamp>2012-07-04T13:54:51.873Z</Timestamp>
  <Ack>Success</Ack>
  <Version>779</Version>
  <Build>E779_CORE_BUNDLED_14986049_R1</Build>
  <SiteDetails>
    <Site>US</Site>
    <SiteID>0</SiteID>
    <DetailVersion>1</DetailVersion>
    <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
  </SiteDetails>
  <SiteDetails>
    <Site>Canada</Site>
    <SiteID>2</SiteID>
    <DetailVersion>1</DetailVersion>
    <UpdateTime>2009-07-09T10:48:17.000Z</UpdateTime>
  </SiteDetails>
</GeteBayDetailsResponse> 
```

我正在尝试找到一种方法来获取 SiteID 节点的值，其中 Site 节点等于任何值。

我曾尝试使用 XPath 和 DomDocument 函数，但没有任何运气。一些混乱的代码如下：

```
 $xml_file ='SiteDetails.xml';
    $xmlDoc = new DomDocument();
    $xmlDoc->load($xml_file);
    $xpath = new DOMXpath($xmlDoc);

    $xpath->registerNamespace('ebay', 'urn:ebay:apis:eBLBaseComponents');

    //$siteIDList = $xpath->query("/ebay:GeteBayDetailsResponse/ebay:SiteDetails[ebay:Site='UK']/ebay:SiteID");
    //$siteIDList =  $xpath->query("/GeteBayDetailsResponse/SiteDetails[Site=\"UK\"]/SiteID");

//$siteIDList =  $xpath->query("//*[namespace-uri()='urn:ebay:apis:eBLBaseComponents' and name()='Site' and text()='$site']/following-sibling::*[namespace-uri()='urn:ebay:apis:eBLBaseComponents' and name()='SiteID']/text()");

    //var_dump($siteIDList);
    //echo $siteIDList->item(0)->nodeValue;

            /*$SiteDetails = $xmlDoc->getElementsByTagName('SiteDetails');
            $count = 0;
            foreach($SiteDetails as $details){
            //  print_r($details);
            echo $details->nodeValue;
                if ($details->nodeValue == $site){
                    echo 'YEAH';
                    echo $details->SiteID;
                }
            $count ++;  
            }*/
            //$siteID = $siteIDNode->item(8)->nodeValue;        

    //var_dump($siteIDNode);
} 
```

任何人都可以帮忙吗？从上面可以看出，我很困惑......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:20:36.120

一般的想法是您遍历每个`SiteDetails`节点并`Site`根据您要查找的值检查节点值。

假设`$xml`包含您的 xml 作为[`SimpleXML`](http://php.net/manual/en/book.simplexml.php)实例

```
$site = 'Canada';
$siteId = null;

foreach($xml->SiteDetails as $sd) {
  if(((string)$sd->Site) === $site) {
    $siteId = (int)$sd->SiteID;
    //break;
  }
}

var_dump($siteId); //int(2) 
```

[这是键盘上的一个工作示例](http://codepad.org/zGDDXtFY)

## 使用 xpath() 的解决方案

这是使用的解决方案[`xpath()`](http://www.php.net/manual/en/simplexmlelement.xpath.php)

```
$xml->registerXPathNamespace('ebay','urn:ebay:apis:eBLBaseComponents');
$site = 'Canada';
$siteId = $xml->xpath('ebay:SiteDetails/ebay:Site[text()="'.$site.'"]/../ebay:SiteID');
echo (string)$siteId[0]; //2 
```

[键盘中的工作示例](http://codepad.org/IU5jmlGX)

解释：

1.  首先，我们通过使用返回元素值的 xpath 函数找到具有值为“Canada”（或 中的任何其他值）的`SiteDetails`子节点的节点。`Site``$site``text()`
2.  `SiteDetails`然后我们使用`..`xpath选择器去对应的父亲。
3.  `SiteID`最后，我们从所需`SiteDetails`元素中提取 的值。

祝你好运=)

# mongodb - 是否有从一个文档返回多个结果的查询？

> ID：11342397
> 
> 赞同：3
> 
> 时间：2012-07-05T10:25:49.877
> 
> 标签：mongodb

我有一个结构如下的文档 -

```
Doc {
    "DocName": "DocName",
    "Array": [{
        "Name": "Name1",
        "Value": "Value1"
    },{
        "Name": "Name2",
        "Value": "Value2"
    },{
        "Name": "Name3",
        "Value": "Value3"
    }]
} 
```

是否可以查询 Mongo 以便它以如下格式返回多个文档？

```
{
    DocName: "DocName",
    Name: "Name1",
    Value: "Value1"
},
{
    DocName: "DocName",
    Name: "Name2",
    Value: "Value2"
},
{
    DocName: "DocName",
    Name: "Name3",
    Value: "Value3"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T13:56:33.390

使用[mapReduce](http://www.mongodb.org/display/DOCS/MapReduce)

**记录对象：**

```
> db.doc.findOne();
{
  "_id" : ObjectId("4ff5925327064149c3d7a31f"),
  "docname" : "lorem",
  "array" : [
    {
      "name" : "John",
      "value" : "Blond"
    },
    {
      "name" : "Eric",
      "value" : "Brown"
    }
  ]
} 
```

**地图功能：**

```
map = function () {
  var docname = this.docname;
  this.array.forEach(function (item) {
    emit(item, {'docname': docname});
  });
} 
```

**减少功能：**

```
reduce = function(key, value) {
  return value;
} 
```

**把它放在一起：**

```
res = db.doc.mapReduce(map, reduce, { out: 'output' }); 
```

**查询：**

```
db.output.find(); 
```

**结果：**

```
{ "_id" : { "name" : "Eric", "value" : "Brown" }, "value" : { "docname" : "lorem" } }
{ "_id" : { "name" : "John", "value" : "Blond" }, "value" : { "docname" : "lorem" } } 
```

这不完全是你想要的，但它应该让你开始。

# javascript - JQuery 自动完成搜索框上的动画 gif 显示

> ID：11342398
> 
> 赞同：0
> 
> 时间：2012-07-05T10:25:51.920
> 
> 标签：javascript, jquery

如何将动画 gif 放在进度自动完成搜索框上？

```
<script type="text/javascript">
$(document).ready(function(){
    $('head').append('<link rel="stylesheet" href="/js/autocomplete/styles.css" type="text/css" />');
    $('#search').autocomplete({
        serviceUrl: '/js/autocomplete/search-box.php',
        onSelect: function(value, data){
            location.href='http://www.domain.com/'+data['id']+'/';
        }       
    });
});
</script> 
```

风格

```
.autocomplete-w1 { background:url(shadow.png) no-repeat bottom right; position:absolute; top:0px; left:0px; margin:8px 0 0 6px; /* IE6 fix: */ _background:none; _margin:0; }
.autocomplete { border:1px solid #999; background:#FFF; cursor:default; text-align:left; max-height:350px; overflow:auto; margin:-6px 6px 6px -6px; /* IE6 specific: */ _height:350px;  _margin:0; _overflow-x:hidden; }
.autocomplete .selected { background:#F0F0F0; }
.autocomplete div { padding:2px 5px; white-space:nowrap; }
.autocomplete strong { font-weight:normal; color:#3399FF; }
.working{background:url('/js/wait.gif') no-repeat right center;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:29:09.293

尝试这个：

```
$('#search').autocomplete({
    serviceUrl: '/js/autocomplete/search-box.php',
    onSelect: function(value, data){
        location.href='http://www.domain.com/'+data['id']+'/';
    },
    search: function( ){
        $(this).addClass('working');
    },
    open: function( ){
        $(this).removeClass('working');
    }
}); 
```

或者您可以为此使用 CSS。自动完成插件已经添加了 class `.ui-autocomplete-loading`，所以在你的 css 中你可以写：

```
.ui-autocomplete-loading{background:url('/js/wait.gif') no-repeat right center;} 
```

而不是`.working`类名。

# android - 在 Android 应用程序中播放 YouTube 视频

> ID：11342399
> 
> 赞同：0
> 
> 时间：2012-07-05T10:25:55.710
> 
> 标签：android, video, webview, youtube, youtube-api

我一直在尝试获取通过 YouTube 数据 API 访问的 YouTube 视频的链接。我想在自己的应用程序中播放视频，但还没有找到方法。到目前为止，我已经尝试使用 WebView，但没有成功。WebView 显示整个页面，而不是只显示视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:33:15.840

你可以这样做，

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:VIDEO_ID"));
startActivity(i); 
```

这是获取视频ID的方法，

```
Uri uri = Uri.parse(url);
String vid = uri.getQueryParameter("v"); 
```

当然，您可以使用整个 url。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=cxLG2wtE7TM"))); 
```

[这](http://www.keyeslabs.com/joomla/blogs/i-think-im-becoming-an-android/51-polish-your-app-free-embeddable-android-youtube-activity)是一篇很棒的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:35:13.277

我从来没有尝试过这个，它更像是一种解决方法而不是一个正确的解决方案，但你说你尝试过使用 webview。我相信创建一个只嵌入 youtube 视频的空 html 页面并不难。[教程](http://www.htmlgoodies.com/tutorials/web_graphics/article.php/3480061/How-To-Add-a-YouTube-Video-to-Your-Web-Site.htm)

现在你可以把这个 html 文件放在你的资产或其他地方，然后把它放在你的 webview 中，现在你有一个 webview，我猜它只显示一个 youtube 视频。

# java - 如何在hadoop hdfs中列出目录及其子目录中的所有文件

> ID：11342400
> 
> 赞同：25
> 
> 时间：2012-07-05T10:25:59.110
> 
> 标签：java, hadoop, hdfs

我在 hdfs 中有一个文件夹，其中有两个子文件夹，每个子文件夹大约有 30 个子文件夹，最后，每个子文件夹都包含 xml 文件。我想列出所有 xml 文件，只给出主文件夹的路径。在本地，我可以使用[apache commons-io 的](http://commons.apache.org/io/)FileUtils.listFiles() 来做到这一点。我试过这个

```
FileStatus[] status = fs.listStatus( new Path( args[ 0 ] ) ); 
```

但它只列出了前两个子文件夹，并没有更进一步。有没有办法在hadoop中做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-09-03T13:08:47.187

如果您使用 hadoop 2.* API，则有更优雅的解决方案：

```
 Configuration conf = getConf();
    Job job = Job.getInstance(conf);
    FileSystem fs = FileSystem.get(conf);

    //the second boolean parameter here sets the recursion to true
    RemoteIterator<LocatedFileStatus> fileStatusListIterator = fs.listFiles(
            new Path("path/to/lib"), true);
    while(fileStatusListIterator.hasNext()){
        LocatedFileStatus fileStatus = fileStatusListIterator.next();
        //do stuff with the file like ...
        job.addFileToClassPath(fileStatus.getPath());
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-05T13:25:13.497

您需要使用[FileSystem](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/fs/FileSystem.html)对象并对生成的 FileStatus 对象执行一些逻辑，以手动递归到子目录中。

您还可以应用 PathFilter 以仅使用[listStatus(Path, PathFilter)](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/fs/FileSystem.html#listStatus%28org.apache.hadoop.fs.Path,%20org.apache.hadoop.fs.PathFilter%29)方法返回 xml 文件

hadoop FsShell 类为 hadoop fs -lsr 命令提供了这样的示例，这是一个递归 ls - 请参阅[源代码](http://svn.apache.org/viewvc/hadoop/common/tags/release-1.0.3/src/core/org/apache/hadoop/fs/FsShell.java?view=markup)，在第 590 行附近（递归步骤在第 635 行触发）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-05-07T11:56:08.410

```
/**
 * @param filePath
 * @param fs
 * @return list of absolute file path present in given path
 * @throws FileNotFoundException
 * @throws IOException
 */
public static List<String> getAllFilePath(Path filePath, FileSystem fs) throws FileNotFoundException, IOException {
    List<String> fileList = new ArrayList<String>();
    FileStatus[] fileStatus = fs.listStatus(filePath);
    for (FileStatus fileStat : fileStatus) {
        if (fileStat.isDirectory()) {
            fileList.addAll(getAllFilePath(fileStat.getPath(), fs));
        } else {
            fileList.add(fileStat.getPath().toString());
        }
    }
    return fileList;
} 
```

快速示例：假设您具有以下文件结构：

```
a  ->  b
   ->  c  -> d
          -> e 
   ->  d  -> f 
```

使用上面的代码，你得到：

```
a/b
a/c/d
a/c/e
a/d/f 
```

如果您只想要叶子（即文件名），请在`else`block 中使用以下代码：

```
 ...
    } else {
        String fileName = fileStat.getPath().toString(); 
        fileList.add(fileName.substring(fileName.lastIndexOf("/") + 1));
    } 
```

这将给出：

```
b
d
e
f 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-07-05T10:32:04.380

你有没有试过这个：

```
import java.io.*;
import java.util.*;
import java.net.*;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class cat{
    public static void main (String [] args) throws Exception{
        try{
            FileSystem fs = FileSystem.get(new Configuration());
            FileStatus[] status = fs.listStatus(new Path("hdfs://test.com:9000/user/test/in"));  // you need to pass in your hdfs path

            for (int i=0;i<status.length;i++){
                BufferedReader br=new BufferedReader(new InputStreamReader(fs.open(status[i].getPath())));
                String line;
                line=br.readLine();
                while (line != null){
                    System.out.println(line);
                    line=br.readLine();
                }
            }
        }catch(Exception e){
            System.out.println("File not found");
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-05T14:44:04.260

现在，人们可以使用 Spark 来做同样的事情，而且比其他方法（例如 Hadoop MR）更快。这是代码片段。

```
def traverseDirectory(filePath:String,recursiveTraverse:Boolean,filePaths:ListBuffer[String]) {
    val files = FileSystem.get( sparkContext.hadoopConfiguration ).listStatus(new Path(filePath))
            files.foreach { fileStatus => {
                if(!fileStatus.isDirectory() && fileStatus.getPath().getName().endsWith(".xml")) {                
                    filePaths+=fileStatus.getPath().toString()      
                }
                else if(fileStatus.isDirectory()) {
                    traverseDirectory(fileStatus.getPath().toString(), recursiveTraverse, filePaths)
                }
            }
    }   
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-23T19:05:04.327

递归和非递归方法的代码片段：

```
//helper method to get the list of files from the HDFS path
public static List<String>
    listFilesFromHDFSPath(Configuration hadoopConfiguration,
                          String hdfsPath,
                          boolean recursive) throws IOException,
                                        IllegalArgumentException
{
    //resulting list of files
    List<String> filePaths = new ArrayList<String>();

    //get path from string and then the filesystem
    Path path = new Path(hdfsPath);  //throws IllegalArgumentException
    FileSystem fs = path.getFileSystem(hadoopConfiguration);

    //if recursive approach is requested
    if(recursive)
    {
        //(heap issues with recursive approach) => using a queue
        Queue<Path> fileQueue = new LinkedList<Path>();

        //add the obtained path to the queue
        fileQueue.add(path);

        //while the fileQueue is not empty
        while (!fileQueue.isEmpty())
        {
            //get the file path from queue
            Path filePath = fileQueue.remove();

            //filePath refers to a file
            if (fs.isFile(filePath))
            {
                filePaths.add(filePath.toString());
            }
            else   //else filePath refers to a directory
            {
                //list paths in the directory and add to the queue
                FileStatus[] fileStatuses = fs.listStatus(filePath);
                for (FileStatus fileStatus : fileStatuses)
                {
                    fileQueue.add(fileStatus.getPath());
                } // for
            } // else

        } // while

    } // if
    else        //non-recursive approach => no heap overhead
    {
        //if the given hdfsPath is actually directory
        if(fs.isDirectory(path))
        {
            FileStatus[] fileStatuses = fs.listStatus(path);

            //loop all file statuses
            for(FileStatus fileStatus : fileStatuses)
            {
                //if the given status is a file, then update the resulting list
                if(fileStatus.isFile())
                    filePaths.add(fileStatus.getPath().toString());
            } // for
        } // if
        else        //it is a file then
        {
            //return the one and only file path to the resulting list
            filePaths.add(path.toString());
        } // else

    } // else

    //close filesystem; no more operations
    fs.close();

    //return the resulting list
    return filePaths;
} // listFilesFromHDFSPath 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-08T17:43:15.363

这是一个代码片段，它计算特定 HDFS 目录中的文件数（我用它来确定在特定 ETL 代码中使用多少个 reducer）。您可以轻松修改它以满足您的需求。

```
private int calculateNumberOfReducers(String input) throws IOException {
    int numberOfReducers = 0;
    Path inputPath = new Path(input);
    FileSystem fs = inputPath.getFileSystem(getConf());
    FileStatus[] statuses = fs.globStatus(inputPath);
    for(FileStatus status: statuses) {
        if(status.isDirectory()) {
            numberOfReducers += getNumberOfInputFiles(status, fs);
        } else if(status.isFile()) {
            numberOfReducers ++;
        }
    }
    return numberOfReducers;
}

/**
 * Recursively determines number of input files in an HDFS directory
 *
 * @param status instance of FileStatus
 * @param fs instance of FileSystem
 * @return number of input files within particular HDFS directory
 * @throws IOException
 */
private int getNumberOfInputFiles(FileStatus status, FileSystem fs) throws IOException  {
    int inputFileCount = 0;
    if(status.isDirectory()) {
        FileStatus[] files = fs.listStatus(status.getPath());
        for(FileStatus file: files) {
            inputFileCount += getNumberOfInputFiles(file, fs);
        }
    } else {
        inputFileCount ++;
    }

    return inputFileCount;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-10T09:34:52.670

不要使用递归方法（堆问题）:) 使用队列

```
queue.add(param_dir)
while (queue is not empty){

  directory=  queue.pop
 - get items from current directory
 - if item is file add to a list (final list)
 - if item is directory => queue.push
} 
```

这很容易，享受！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-11T05:17:23.667

感谢 Radu Adrian Moldovan 的建议。

这是使用队列的实现：

```
private static List<String> listAllFilePath(Path hdfsFilePath, FileSystem fs)
throws FileNotFoundException, IOException {
  List<String> filePathList = new ArrayList<String>();
  Queue<Path> fileQueue = new LinkedList<Path>();
  fileQueue.add(hdfsFilePath);
  while (!fileQueue.isEmpty()) {
    Path filePath = fileQueue.remove();
    if (fs.isFile(filePath)) {
      filePathList.add(filePath.toString());
    } else {
      FileStatus[] fileStatus = fs.listStatus(filePath);
      for (FileStatus fileStat : fileStatus) {
        fileQueue.add(fileStat.getPath());
      }
    }
  }
  return filePathList;
} 
```

# php - 如何在 symfony2 中为实体 ManyToOne 关系嵌入表单？

> ID：11342402
> 
> 赞同：4
> 
> 时间：2012-07-05T10:26:04.520
> 
> 标签：php, symfony, doctrine, symfony-forms, many-to-one

我对 Symfony 2 框架很陌生。我想为实体**多对一**关系形成嵌入。我必须实体**地址**和**地址类型**

**地址实体**

```
namespace Webmuch\ProductBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

class Address
{

    private $id;
    private $line1;
    private $city;
    private $zip;
    private $phone;

    /**
     * @var string $type
     *
     * @ORM\ManyToOne(targetEntity="AddressType")
     * @ORM\JoinColumn(name="address_type_id", referencedColumnName="id")
     */
    private $type;
} 
```

**地址类型实体**

```
namespace Webmuch\ProductBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

class AddressType
{
    private $id;
    private $title;
} 
```

**地址控制器**

```
namespace Webmuch\ProductBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Webmuch\ProductBundle\Entity\Address;
use Webmuch\ProductBundle\Form\AddressType;

/**
 * Address controller.
 *
 * @Route("/address")
 */
class AddressController extends Controller
{
    /**
     * Displays a form to create a new Address entity.
     *
     * @Route("/new", name="address_new")
     * @Template()
     */
    public function newAction()
    {
        $entity = new Address();
        $form   = $this->createForm(new AddressType(), $entity);

        return array(
            'entity' => $entity,
            'form'   => $form->createView()
        );
    }
} 
```

**表格部分**

```
namespace Webmuch\ProductBundle\Form;
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
class AddressType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('line1')
            ->add('line2')
            ->add('state')
            ->add('city')
            ->add('zip')
            ->add('phone')
            ->add('type')
        ;
    }
} 
```

我一整天都在坚持这一点，我尝试了很多东西，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:04:15.970

它包含在[文档](http://symfony.com/doc/master/book/forms.html#embedded-forms)中。

您为 AddressType 再创建一种表单类型（称为 AddressTypeType？难看，但您选择了名称）并替换`->add('type')`为`->add('type', new AddressTypeType());`.

# jquery - jQuery.on() - 加载元素后如何初始化

> ID：11342408
> 
> 赞同：5
> 
> 时间：2012-07-05T10:26:14.617
> 
> 标签：jquery, hoverintent, jquery-on

我正在尝试将**hoverIntent**插件添加到页面上的元素中，但是稍后将向 DOM 添加一些元素，这意味着我还必须将插件绑定到未来的元素。你是怎样做的？我在 SO 上看到过同样的问题几次，但没有人有明确的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-20T23:19:38.463

使用“**选择器**”参数进行事件委托。

```
$('#PARENT').hoverIntent({
    over: function() {
        console.log($(this));
    },
    out: function(){
        console.log($(this));
    },
    selector: '.CHILD'
}); 
```

资料来源：[hoverIntent 文档](https://briancherne.github.io/jquery-hoverIntent/ "文档")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:30:52.963

jQuery 不支持这样做；这是插件本身必须支持的东西。最常见的方法是在添加新内容后简单地重新初始化插件；这通常不是问题。

另一种选择是使用[`liveQuery`插件](http://docs.jquery.com/Plugins/livequery)，并做这样的事情；

```
$('yourSelector').livequery(function () {
    $(this).hoverIntent({
        // blah
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:30:51.773

实现此目的的最佳方法是在将新元素添加到页面时引发自定义事件。然后，此事件的订阅者可以调用适当的 hoverIntent 初始化程序。

将以[突变观察者](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#mutation-observers)的形式提供更多原生支持，但目前浏览器支持几乎为零。

监听`DOMSubtreeModifed`事件是不可靠的并且会导致主要的性能问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:47:02.947

尝试更改您的 jquery 结构；

```
ABC = {
   init: function() {//all function names goes here
       ABC.myFunction1();
       ABC.myFunction2();
       ABC.myFunction3();
   },
   myFunction1: function() {
     //code
   },
   myFunction2: function() {
     //code
   },
   myFunction3: function() {
     //code
   }//dont put comma last one
}

$(function() {
    ABC.init();//calls all functions after everything is initialized and ready.
}); 
```

# django - 如何在 Django 中提供用户上传的文件？

> ID：11342410
> 
> 赞同：8
> 
> 时间：2012-07-05T10:26:20.513
> 
> 标签：django

我正在编写一个 Django 应用程序，用户可以在其中上传图像，但我不知道如何为它们提供服务。我可以看到两种方式：

1-上传为静态文件：上传到`static`我项目目录下的文件夹中，然后运行`python manage.py collectstatic`，但是不知道每次上传文件时如何自动运行这个命令，而且这个好像要处理很多因为每次服务器都会删除并重新加载我的静态应用程序中的所有内容。

2-`django.views.static.serve`在我的 urls.py 中使用：

```
url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
        'document_root': settings.MEDIA_ROOT,
    }), 
```

但[文档](https://docs.djangoproject.com/en/dev/howto/static-files/#django.views.static.serve)不建议将其用于生产。

提供用户上传文件的推荐方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:43:46.707

您上传的文件进入`MEDIA_ROOT`并可以使用`MEDIA_ROOT`. 您需要在 settings.py 中设置这些参数。

您的开发可以通过 django dev 服务器为它们提供服务，但您可以将其配置为从 apache 或其他服务器提供服务。

请参阅[Django 管理存储的文件](https://docs.djangoproject.com/en/dev/topics/files/#using-files-in-models)

# c++ - 指向指针的指针的返回类型

> ID：11342414
> 
> 赞同：0
> 
> 时间：2012-07-05T10:26:36.253
> 
> 标签：c++, pointers, gige-sdk

在 GigE SDK C++ 中，规范注释 GetDataPointer() 的定义如下：

```
PvUInt8 * PvBuffer::GetDataPointer  (   )   
Get the buffer's data pointer. 
Const version.
Returns:
A pointer to the memory pointer. 
```

我在我的程序中使用了这个函数（请参见最后一行）：

```
PvBuffer * lBuffer = new PvBuffer();
// Create the Data (buffers are created as images, GetImage() is valid on a fresh buffer)
lBuffer->GetImage()->Alloc( 1224, 1029, PvPixelMono8 );
PvUInt8 *lDataBuffer = lBuffer->GetDataPointer(); //use in actual code 
```

问题是关于 PvUInt8；查看定义，这是缓冲区中数据的类型还是指针的类型，它总是可以是 4 字节（在 32 位机器上）或 8 字节（在 64 位机器上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:31:16.630

从提供的信息来看，`PvUInt8`似乎是`unsigned char`（又名“一个字节”）的别名。这意味着它`PvUInt8 *`只是一个字节指针。 `sizeof(PvUInt8)`应该是`1`，并且`sizeof(PvUInt8 *)`应该是执行环境中指针的本机大小（例如，在 32 位系统上为 4，在 64 位系统上为 8，等等）。

# php - 将 php 调用作为 href 值返回

> ID：11342418
> 
> 赞同：0
> 
> 时间：2012-07-05T10:26:46.783
> 
> 标签：php, jquery, html, ajax, href

我对使用 php 很陌生，所以我不确定这是否可能；

我要做的是从href标签中调用一个php函数，并使用返回的值作为标签..

例如，我有以下代码：

# HTML

```
<a href= 'tele.php'> <img src="images/image1" alt="Preview1" /> </a> 
```

然后：

# PHP

```
<?php
return header("Location: tel:762347723447");    
exit;       
?> 
```

我希望 href 标记是 php 代码返回的内容：“位置：电话：762347723447”。是否有可能做到这一点？还是我以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:30:39.443

`header()`返回 void，因此 PHP 代码不会返回任何内容。

但你可能想要这样的东西：

```
<?php
   function foo() {
       return "tel:762347723447"
   }
?>

<a href= '<?php echo foo(); ?>'> <img src="images/image1" alt="Preview1" /> </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:29:04.110

你以错误的方式解决这个问题。我不确定您要做什么，但是如果您希望您的 HTML 调用 tele.php，获取一些 PHP 的输出并替换 HREF，请查看 AJAX

## HTML

```
<a id="this-link-id" href="tele.php"><img src="images/image1.jpg" alt="Previe1" /></a>

<script> 
    $.post( $('#this-link-id').attr('href'), {}, function( response ) {
        $('#this-link-id').attr('href', response);
    });
</script> 
```

## PHP (tele.php)

```
<?php
echo 'tel:762347723447';
die(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:29:26.470

我建议你使用 jQuery 和 ajax 来实现你想要的效果。

更多信息：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java-native-interface - 在 cocos2d-x 场景中访问 android 视图？

> ID：11342422
> 
> 赞同：1
> 
> 时间：2012-07-05T10:27:00.630
> 
> 标签：java-native-interface, cocos2d-x, jniwrapper

我正在 cocos2d-x 中制作演示应用程序，我试图在其中集成 admob 广告。我将它添加到添加 cocos2dx GLSurfaceview 的 game_demo.xml 布局中。它在整个 cocos2d-x 场景中都能正常工作。但是现在如果我想让那个视图只在特定场景中可见怎么办呢？我知道 JNI 出现在图片中，但我不知道我将如何使用这些 JNI 调用来使 View 不可见或消失，就像我们以正常的 android 方式那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:01:25.873

我想你必须通过 jni 在 cocos2dxActiity.java 中创建一个名为的静态方法

```
setDisplayAd(bool value){
    //your java code goes here.
    //disable or enable the ad activity here
} 
```

比你需要在你的 cocod2d-x 代码中调用这个 Java 方法（在你想要的场景中）

# php - 图像未显示在我的 php Web 应用程序中

> ID：11342425
> 
> 赞同：0
> 
> 时间：2012-07-05T10:27:18.300
> 
> 标签：php, html

我是 php5 和 Zend Framework 的新手，我正在尝试开发一个小型 Web 应用程序，使用它们来处理公司的帐户。

但是，无论我做什么，我都无法将图像插入到我的文件中。

这是我的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml" lang = "en">

<style>
</style>

<head>
    <meta name="keywords" content="" /></meta>
    <meta name="description" content="" /></meta>
    <title>Accounts Handling</title>
</head>

<body>
    <div id="header"></div>
    <div id="main">
        <div id="menu">
        <?php 
          inlude('C:\wamp\www\Accounts\application\views\scripts\header\header.php');?>
        </div>
        <div id="content">
        <p>
    <img src="C:\...\application\views\scripts\images\blue.jpg" alt="blue">
          //the error comes here.
                      </p>

        </div>
        <div><?php 
          inlude('C:\wamp\www\Accounts\application\views\scripts\header\header.php');?>
            </div>
    </body>
  </html> 
```

在这里，我使用了绝对路径，但我尝试过使用相对路径 =“../images/blue.jpg”，也尝试过使用“php include()”

```
<?php 
define('__ROOT__', dirname(dirname(__FILE__))); 
include(__ROOT__.'/blue.jpg'); 
?></div> 
```

另外，我尝试过，

```
 <?php 
 include('C:\wamp\......\images\blue.jpg'); 
?></div> 
```

请帮我解决这个问题。如果需要更多详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:54:14.557

您应该了解 PHP 的主要概念：它生成 HTML 代码并将其发送到浏览器。浏览器读取代码，查找标签，从服务器下载图像并将它们显示给用户。这就是它的工作原理。浏览器对 PHP 一无所知。而PHP与图像无关。

所以你不应该使用 include 来插入图像 - 只使用标签。永远不要使用完整的系统路径。例如，如果您的图像是`C:\wamp\www\images\1.jpg`，则正确的标签将是，`<img src="http://localhost/images/1.jpg">`或者您可以使用相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:07:57.463

所有图像必须存储在“公共”文件夹中。然后你需要使用函数 `$this->baseUrl()`
fe `<img src="<php echo $this->baseUrl('images/blue.jpg'); ?>" alt="" />`

# wordpress - wordpress新版本发布时wordpress插件兼容性说明（理论）

> ID：11342426
> 
> 赞同：0
> 
> 时间：2012-07-05T10:27:22.087
> 
> 标签：wordpress, compatibility

最近我将我的插件更新`wordpress`到最新`version 3.4.1`版本，并注意到我的一些插件只兼容到 3.3，尽管它们在我的网站上正常工作，即使是最新版本。

这是否意味着我需要禁用这些插件并寻找替代品，这些插件不再`SAFE`使用，或者它是别的东西（我`wordpress.org`只下载了所有插件）。

需要对此进行更好的澄清，并让我知道是否在升级时缺少某些概念:)。非常感谢详细的回答，然后我会尽我所能:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:31:54.960

插件作者需要明确记住登录并批准他们的插件以用于新版本；恐怕不是自动的。

好消息是，除非工作方式发生巨大变化，否则开发良好的插件往往会保持兼容。

请记住，从 wordpress.org 下载本身并不能告诉您插件是 100% 的——这完全取决于作者，有些作者很好地维护了他们的插件，而另一些作者则不再关注它们。

要评估插件是否更有可能长期使用，请查看它的更改频率，以及支持论坛中的问题是否已得到响应。星星的数量告诉你一点点，下载数量，如果真的很高，往往表明该插件很受信任。

# c# - 如何使用数据库在 mvc3 中的 jquery 中显示确认框

> ID：11342428
> 
> 赞同：4
> 
> 时间：2012-07-05T10:27:23.173
> 
> 标签：c#, javascript, jquery, asp.net

我在 mvc3 中使用了提交按钮来执行删除操作。我想在单击按钮时显示一个确认框，所以我使用了下面的 jquery。该查询用于静态数据，但我想使用我的数据库。当我单击提交按钮时，会出现消息，但即使我单击确定，它也会显示错误消息。我应该怎么做才能让它工作。

```
<script type="text/javascript">
    $(document).ready(function () {
               $("#button").click(function (event) {
            event.preventDefault();
            var link = this;
            if (confirm("Are you sure that you want to delete this user?")) {
                $.ajax({

                    type: "POST",
                    url: link.href,

                    success: function (data) 
                    {
                        $(link).parents("tr").remove();
                        alert("deleted");                     
                     },

                    error: function (data)
                     {
                        event.preventDefault();
                        alert(" Unsuccessful");
                      }
                });

            }
        }
            );
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:31:49.557

尝试这个：

```
<asp:Button ID="btn" runat="server" Text="Click"
            OnClientClick="return confirmDialog(this);"
            onclick="btn_Click" />

var confirmed = false;
function confirmDialog(obj)
{
    if(!confirmed)
    {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Yes": function()
                {
                    $( this ).dialog( "close" );
                    confirmed = true; obj.click();
                },
                "No": function()
                {
                    $( this ).dialog( "close" );
                }
            }
        });
    }

    return confirmed;
} 
```

[http://markmintoff.com/2011/03/asp-net-jquery-confirm-dialog/](http://markmintoff.com/2011/03/asp-net-jquery-confirm-dialog/)

[如何在 Jquery UI 对话框中实现“确认”对话框？](https://stackoverflow.com/questions/887029/how-to-implement-confirmation-dialog-in-jquery-ui-dialog)

# php - Mysql 执行查询并删除特殊字符

> ID：11342430
> 
> 赞同：0
> 
> 时间：2012-07-05T10:27:25.717
> 
> 标签：php

我想在用户输入文本框时删除特殊字符，为此，我在上面使用 mysql_real_escape_string 来做，但今天，我在 php 手册中看到没有使用它。

对此的替代品是 MySQLi 或 PDO_MySQL 。使用 this 有什么优点。内置函数来执行查询和删除特殊字符。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:40:37.520

对我来说，我用

*   带斜杠
*   strip_tags
*   preg_replace('/[^A-Za-z0-9._]/','',$formdata);

用于处理 _GET 信息，而且我听说现在你应该使用**filter_input**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:32:28.627

选择 PDO。它将很好地处理所有转义的东西，你将能够支持更多的数据库。

# javascript - jScrollPane 如何删除鼠标滚轮功能

> ID：11342431
> 
> 赞同：2
> 
> 时间：2012-07-05T10:27:25.763
> 
> 标签：javascript, jquery, scrollbar, jscrollpane

每当我的鼠标进入 jScrollPane 并使用鼠标滚轮时，我希望浏览器本身的滚动条滚动而不是 jScrollPane 中的滚动条。

因此，当我用鼠标滚轮在浏览器中向下滚动并用鼠标越过 jScrollPane 时，它​​不应该停止在浏览器中向下滚动。

为什么？我在我的 jScrollPane 中使用水平滚动条，我希望我的鼠标滚轮仅用于垂直滚动。

希望这是有道理的，不要含糊其辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:55:16.347

Mhh .. jScrollPane 似乎没有启用/禁用鼠标滚轮的功能，但我认为您可以找到 2 个解决方案：

1.  不包括 jquery 鼠标滚轮插件（对于 jScrollPane 是可选的）

2.  使用 jQuery 之后使用 `$(**yourcontainer**).jScrollPane();`类似的方法取消绑定容器的“鼠标滚轮”事件：

    ```
    $(**yourcontainer**).unbind('mousewheel'); 
    ```

**编辑 ：**

这是绑定鼠标滚轮事件的插件代码：

```
 $container.bind(
   'mousewheel',
   function (event, delta) {
     delta = delta || (event.wheelDelta ? event.wheelDelta / 120 : (event.detail) ? -event.detail/3 : 0);
     initDrag();
     ceaseAnimation();
     var d = dragPosition;
     positionDrag(dragPosition - delta * mouseWheelMultiplier);
     var dragOccured = d != dragPosition;
     return !dragOccured;
   }
 ); 
```

这里是插件的描述及其配置：

```
 * @name jScrollPane
 * @type jQuery
 * @param Object        settings        hash with options, described below.
 *                                                              scrollbarWidth  -       The width of the generated scrollbar in pixels
 *                                                              scrollbarMargin -       The amount of space to leave on the side of the scrollbar in pixels
 *                                                              wheelSpeed              -       The speed the pane will scroll in response to the mouse wheel in pixels
 *                                                              showArrows              -       Whether to display arrows for the user to scroll with
 *                                                              arrowSize               -       The height of the arrow buttons if showArrows=true
 *                                                              animateTo               -       Whether to animate when calling scrollTo and scrollBy
 *                                                              dragMinHeight   -       The minimum height to allow the drag bar to be
 *                                                              dragMaxHeight   -       The maximum height to allow the drag bar to be
 *                                                              animateInterval -       The interval in milliseconds to update an animating scrollPane (default 100)
 *                                                              animateStep             -       The amount to divide the remaining scroll distance by when animating (default 3)
 *                                                              maintainPosition-       Whether you want the contents of the scroll pane to maintain it's position when you re-initialise it - so it doesn't scroll as you add more content (default true)
 *                                                              tabIndex                -       The tabindex for this jScrollPane to control when it is tabbed to when navigating via keyboard (default 0)
 *                                                              enableKeyboardNavigation - Whether to allow keyboard scrolling of this jScrollPane when it is focused (default true)
 *                                                              animateToInternalLinks - Whether the move to an internal link (e.g. when it's focused by tabbing or by a hash change in the URL) should be animated or instant (default false)
 *                                                              scrollbarOnLeft -       Display the scrollbar on the left side?  (needs stylesheet changes, see examples.html)
 *                                                              reinitialiseOnImageLoad - Whether the jScrollPane should automatically re-initialise itself when any contained images are loaded (default false)
 *                                                              topCapHeight    -       The height of the "cap" area between the top of the jScrollPane and the top of the track/ buttons
 *                                                              bottomCapHeight -       The height of the "cap" area between the bottom of the jScrollPane and the bottom of the track/ buttons
 *                                                              observeHash             -       Whether jScrollPane should attempt to automagically scroll to the correct place when an anchor inside the scrollpane is linked to (default true)
 * @return jQuery 
```

# api - 获取 chrome.topSites 和最近关闭的标签

> ID：11342436
> 
> 赞同：5
> 
> 时间：2012-07-05T10:27:41.737
> 
> 标签：api, google-chrome-extension, browser-history

我正在开发 chrome 扩展，它将替换新的标签 UI，我可以检索已安装的应用程序信息。但是我无法检索访问次数最多和最近关闭的标签信息..

我的 manifest.json

```
{
 "name": "Cloud Tab",
"version": "1.0",
"description": "New Tab with cloud UI.",
"background_page": "background.html",
"permissions": [ "tabs","management","topSites",
    "chrome://favicon/"],

"chrome_url_overrides": {
"newtab": "CloudTab.html"
}
} 
```

我的 CloudTab.html 页面的脚本标签包含

```
 chrome.topSites.get(function(info){
   for(var i=0;i<info.length;i++) {alert(info[i].url);}
  }); 
```

但我得到错误>未捕获的类型错误**：无法调用未定义的方法'get'** 我已经为此参考了谷歌的api但没有运气我正在运行chrome的13.0.782版本有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T06:40:21.793

我试过这种方式，它在**chrome 37中工作**

### popup.js

```
function onAnchorClick(event) {
  chrome.tabs.create({ url: event.srcElement.href });
  return false;
}

function buildPopupDom(mostVisitedURLs) {
  var popupDiv = document.getElementById('mostVisited_div');
  var ol = popupDiv.appendChild(document.createElement('ol'));

  for (var i = 0; i < mostVisitedURLs.length; i++) {
    var li = ol.appendChild(document.createElement('li'));
    var a = li.appendChild(document.createElement('a'));
    a.href = mostVisitedURLs[i].url;
    a.appendChild(document.createTextNode(mostVisitedURLs[i].title));
    a.addEventListener('click', onAnchorClick);
  }
}
chrome.topSites.get(buildPopupDom); 
```

### popup.html

```
<!DOCTYPE html>
<html>
  <body>

    <h2>Most visited links</h2>
    <div id="mostVisited_div"></div>
    <script src="popup.js"></script>
  </body>
</html> 
```

### 清单.json

~~“chrome_url_overrides”：{“newtab”：“CloudTab.html”}~~

```
"permissions": [
        "tabs",
        "topSites",
        "http://*/*",
        "https://*/*"
  ],            
"browser_action": {
        "default_icon": "icon_32.png",
        "default_popup": "popup.html"
  },
 "content_scripts": [{
    "matches": ["<all_urls>"],
    "js": ["popup.js"]
 }] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T03:31:18.530

要使用此 API，您的 Chrome 版本必须大于或等于 19。请参阅 Google Chrome 扩展的“扩展中的新功能”页面：[http ://code.google.com/chrome/extensions/whats_new.html#19](http://code.google.com/chrome/extensions/whats_new.html#19)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T13:38:07.950

[您可以在后台页面中使用onRemoved](http://code.google.com/chrome/extensions/tabs.html#event-onRemoved)事件的侦听器跟踪关闭的选项卡，并通过一些[消息](http://code.google.com/chrome/extensions/messaging.html)从它那里请求信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T07:23:39.813

大多数 Chrome API 方法都是异步的。所以你需要做的是传入一个回调函数。

```
getTopSites: function(callbackfunc) {
    chrome.topSites.get (function(url_list) {
        for(var i=0;i<url_list.length;i++) {callbackfunc(url_list[i]);}
    });
} 
```

然后，您可以使用回调函数调用它，如下所示：

```
getTopSites(function(url){alert(url);}); 
```

请原谅我在上面犯的任何语法错误..

# java - 遍历列表 在 jsp 中 (jsp:getProperty?)

> ID：11342440
> 
> 赞同：2
> 
> 时间：2012-07-05T10:27:54.890
> 
> 标签：java, jsp, jstl, jsp-tags

我想遍历作为 User 对象的成员变量的 List。我不想使用代码片段，而是想使用某种形式的 jsp 标签来解决问题。

**用户类**

```
public class User {

  private List<Option> options;

  public getOptions()...
} 
```

**我想在片段中做什么**

```
<%
User user = (User)session.getAttribute("user");
List<Option> options = user.getOptions();
%>

<select id="alertFilter">

<% for (Option o : options) { %>

<option><%=o.getTitle()%></option>

<% } %>

</select> 
```

我已经看到了一些我正在尝试做的简单示例，但它们总是得到简单的对象。

**标记库方式 - 不起作用**

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<jsp:useBean id="user" class="ie.openmobile.smsjobs.entity.User" scope="request"></jsp:useBean>

<c:forEach var="options" items="$user.options" >   <--incorrect references to alerts/getOptions()

<br>$options.title   <--incorrect syntax

</c:forEach> 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T10:29:32.143

改成如下

```
<select id="alertFilter">

<c:forEach var="option" items="${user.options}" >
  <option><c:out value="${option.title}"/></option>
</c:forEach>

</select> 
```

**解释**：${user.options} 将使用其`getOptions()`方法从会话和选项集合中获取用户，并将迭代每个条目

虽然在迭代下`${option.title}`会给出`option`（这是遍历下的当前选项实例）和`option.getTile()`

# android - MyLocationOverlay 或 LocationManager 用于更新当前位置

> ID：11342449
> 
> 赞同：6
> 
> 时间：2012-07-05T10:28:35.577
> 
> 标签：android, google-maps, geolocation, mylocationoverlay, google-maps-mobile

我正在使用 MapView 在地图上显示用户的当前位置。要在用户移动时更新位置，我必须选择：

*   我可以使用 MyLocationOverlay 绘制当前位置并将其扩展以允许跟踪移动中的用户位置并具有自定义标记。MyLocationOverlay 的问题是我无法控制设备从 GPS 请求位置的频率。我担心这里的电池耗尽。
*   我可以使用位置管理器并使用 requestLocationUpdates 订阅以从 GPS 获取位置。在这里，我可以更好地控制查询 GPS 的频率。我可以连接一个 LocationListener 并在其中编写代码。

但是我在这里读到了使用位置管理器可能不是好方法，而 MyLocationOverlay 应该优先于此。

另外，考虑到我的应用程序是基于位置的应用程序，用户的位置应该在他移动时被跟踪。

人们能否建议哪种方法是最好的实施方法，并且对电池的影响相对较小。

请注意，我是 Android 的初学者，所以请原谅任何明显的错误。

提前谢谢你，安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:50:17.123

我使用 Little Fluffy Location - 它是一个库，您可以设置更新或距离的时间，该库制作广播接收器，实现 LocationListener，当位置更改时通知您的应用程序。

简单，快速，容易！

请参考[这个](http://code.google.com/p/little-fluffy-location-library/)链接：

位置更改后，更新地图上的叠加层！=)

如果您需要，我会发送我的完整位置解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:50:32.837

使用 Little Fluffy 位置 1º：

在清单中：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-feature android:name="android.hardware.location" android:required="true" />
<uses-feature android:name="android.hardware.location.gps" android:required="false" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<Application...>
<service android:name="com.littlefluffytoys.littlefluffylocationlibrary.LocationBroadcastService" />

    <receiver android:name="com.littlefluffytoys.littlefluffylocationlibrary.StartupBroadcastReceiver" android:exported="true">
      <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
      </intent-filter>  
    </receiver>
    <receiver android:name="com.littlefluffytoys.littlefluffylocationlibrary.PassiveLocationChangedReceiver" android:exported="true" /> 
```

2º 创建类以扩展应用程序

```
public class YourApplication extends Application {
    public void onCreate(){
        super.onCreate();
        LocationLibrary.showDebugOutput(true);
        LocationLibrary.initialiseLibrary(getBaseContext(), 0, 2 * 60 * 1000, "com.yourpackage.broadcastpackage");      
    }

    public static Context getAppContext() {
        return ApplicationVexPromoter.context;
    }
} 
```

3º 创建广播接收器

```
public class Broadcast extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
       final LocationInfo locationInfo = (LocationInfo) intent.getSerializableExtra(LocationLibraryConstants.LOCATION_BROADCAST_EXTRA_LOCATIONINFO);

    }
} 
```

并使用：

在您的活动中：

```
public class YourActivity extends Activity {

LocationInfo info;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.id.yourview);
        info = new LocationInfo(getBaseContext());
        double latitude = info.lastLat;
        double longitude = info.lastLong;
    }
} 
```

需要更多？ [请参考这里](http://code.google.com/p/little-fluffy-location-library/)

为我工作！

# php - PHP 是否取代了 SSI 和 CGI ？

> ID：11342454
> 
> 赞同：1
> 
> 时间：2012-07-05T10:28:44.233
> 
> 标签：php, cgi, ssi

我被要求使用 SSI 或 CGI 编写 Web 应用程序，我想知道这是否意味着我将使用过时的技术？我对 SSI 或 CGI 的历史知之甚少，但我在 Indeed.co.uk 上基本上看不到它们中的任何一个的职位列表。我看到数以万计的 PHP。我是否正确地说 PHP 现在已经有效地取代了这些技术？

我是否正确地说 PHP 是这些技术的超集，因为它可以做任何他们可以做的事情，甚至更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:37:08.490

是的，PHP 可以匹配 SSI 和 CGI​​ 功能。我认为 CGI 可能会比普通 PHP 稍微提高性能，但是使用像 APC PHP 这样的适当操作码缓存可能会在这方面击败他们。

一些公司出于遗留原因仍在使用 CGI，但它不再是一个很好的技能。

PHP 也有替代品，例如 Python + mod_wsgi、Node.js、Ruby + Ruby on Rails、ASP、JSP 等。PHP 恰好是此时最流行的 Web 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:47:08.140

我认为 CGI 被 PHP 和其他脚本语言取代的主要原因之一是人们更喜欢轻量级框架。在 CGI 中，每个命令都会在服务器上启动一个进程，因此它本质上比 PHP、Perl 等重得多。此外，能够从文件系统“提升”PHP 文件夹的简单性将其放到其他地方并且它几乎可以工作不依赖于服务器基础架构。至于 SSI，我认为它仍然到处使用，但它是一种非常简单的语言，甚至不支持循环。CGI/SSI 等不仅过时而且功能较差，从长远来看，您会发现使用更现代的技术更容易。

# mysql - mysql 为 ids 对选择最后一个条目

> ID：11342455
> 
> 赞同：1
> 
> 时间：2012-07-05T10:28:46.173
> 
> 标签：mysql

我想实现一个使用mysql进行存储的消息系统。

这是表格：

```
CREATE TABLE `message` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_from` int(10) unsigned NOT NULL,
  `id_to` int(10) unsigned NOT NULL,
  `time` datetime NOT NULL,
  `message` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
); 
```

id_from 是味精发送者，id_to 是味精接收者。

下面插入 4 条消息用于测试目的：

```
INSERT INTO `message`(`id`,`id_from`,`id_to`,`time`,`message`) VALUES
(1,1,2,'2012-07-05 12:18:49','msg1'),
(2,2,1,'2012-07-05 12:18:58','msg2'),
(3,3,1,'2012-07-05 12:19:04','msg3'),
(4,1,3,'2012-07-05 12:19:10','msg4'); 
```

我想做但没有成功的是构建一个查询，该查询为特定用户的每对（id_from，id_to）获取最后发送或接收的消息。在这种情况下，结果将是：

```
row1: 2,2,1,'2012-07-05 12:18:58','msg2'
row2: 4,1,3,'2012-07-05 12:19:10','msg4' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:32:38.927

SELECT * FROM messages WHERE id_from = 1 OR id_to = 1 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:38:02.760

```
SELECT id, id_from, id_to, time, message
FROM (  SELECT 
        FROM message
        WHERE 1 IN (id_from, id_to) # 1 is user_id in this case
        ORDER BY time DESC) AS h
GROUP BY LEAST(id_from, id_to), GREATEST(id_from, id_to) 
```

**获取最后发送和接收的消息的解决方案**（虽然不是要求的）

```
SELECT id, id_from, id_to, time, message
FROM (  SELECT 
        FROM message
        WHERE 1 IN (id_from, id_to) # 1 is user_id in this case
        ORDER BY time DESC) AS h
GROUP BY id_from, id_to 
```

我猜应该这样做。

我确信有“更漂亮”的格式可以捕捉到这一点。

考虑：

```
SELECT id, 'from' AS type, id_from AS type_id, time, message
FROM message
WHERE id_to = 1
ORDER BY time DESC
LIMIT 1
UNION ALL
SELECT id, 'to', id_to, time, message
FROM message
WHERE id_from = 1
ORDER BY time DESC
LIMIT 1 
```

这会给你：

```
id  type  type_id  time                 message
3   from  3        2012-07-05 12:19:04  msg3
4   to    3        2012-07-05 12:19:10  msg4 
```

# graphviz - 三角剖分失败，源点不在任何三角形中

> ID：11342460
> 
> 赞同：3
> 
> 时间：2012-07-05T10:29:02.190
> 
> 标签：graphviz, dot

当我要求 dot 呈现以下内容时：

```
digraph foo {
   GRAPH [rankdir="LR" nodesep=".3" ranksep=".3"];
   NODE  [shape="box"  width=".2"   height=".2" ];

   D;E;F;A;B;C;G;

   A->G; B->C; B->G; C->G; D->A; D->E; E->B; E->D; E->F; F->C; F->E;

   {rank="same"; A; B; C;}
   {rank="same"; D; E; F;}
} 
```

我收到错误“**三角测量失败，源点不在任何三角形中**”；

将 rankdir 更改为“TB”会使错误消失，输出（渲染的图像）是：

![在此处输入图像描述](../Images/8b2e2e050fbd37e265ebebf6747a9894.png)

与[这个问题](https://stackoverflow.com/questions/8488064/dot-gives-triangulation-failed-error)不同，添加**约束 =“真”**（或假）并不能解决问题。

你以前见过这个吗？有解决办法吗？

# java - 避免在 gwt 中出现双倍指数

> ID：11342463
> 
> 赞同：1
> 
> 时间：2012-07-05T10:29:18.437
> 
> 标签：java, javascript, gwt

如何在 gwt 中从客户端的 double 中删除指数。

```
public double evaluate(final double leftOperand, final double rightOperand) {
        Double rtnValue = new Double(leftOperand * rightOperand);
            //Require to write code which remove exponent before return
        return rtnValue.doubleValue();
    } 
```

服务器端可以使用 NumberFormat

```
NumberFormat formatter = new DecimalFormat("#0.00");
        System.out.println(number);
        System.out.println(formatter.format(number)); 
```

但是客户端会抛出异常，例如： 16:08:04.190 [ERROR] [vflow] Line 359: No source code is available for type **java.text.NumberFormat** ; 你忘了继承一个必需的模块吗？

因为 gwt 不包含 lib java.text [JRE Emulation Reference](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

而且我也试过**String.format("%.2f", doubleResult);**

GWT 不支持 String.format()，还是我在这里做错了什么？

那么我怎样才能避免双倍指数呢？有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:21:32.383

尝试将 javascript 与 JSNI 一起使用：

```
native String format(double num) /*-{

  // ...implemented with JavaScript
  var v = num;
  return "" + v.valueOf();

}-*/; 
```

我现在没有 GWT sdk 来尝试它，但它应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T08:44:37.867

GWT 中有一个自定义 NumberFormat 可用：http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/i18n/client/NumberFormat.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/i18n/client/NumberFormat.html)

由于兼容性原因，GWT 不支持 NumberFormat 和 DateFormat 的 Java API。本页对此进行了描述：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsFormatting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsFormatting)

# ios - 如何为分组单元格的 UITableView 部分绘制渐变颜色背景

> ID：11342471
> 
> 赞同：1
> 
> 时间：2012-07-05T10:29:40.607
> 
> 标签：ios, uitableview, background, gradient

我需要自定义一个**部分，其中包括一个****分组**样式的 UITableView 的几个单元格。实际上，我想为每个单元格部分设置渐变颜色背景。每个部分的单元格数量可以更改。

我发现了很多解决方案来自定义每个单元格的一个背景，而不是自定义单元格的一部分。

例如，以下代码为每个部分的每个单元格设置背景颜色：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{    

[cell setBackgroundColor:[UIColor clearColor]];

CAGradientLayer *grad = [CAGradientLayer layer];
grad.frame = cell.bounds;
grad.colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor] CGColor], (id)[[UIColor greenColor] CGColor], nil];
grad.cornerRadius = 5.0;

[cell setBackgroundView:[[UIView alloc] init]];
[cell.backgroundView.layer insertSublayer:grad atIndex:0];

CAGradientLayer *selectedGrad = [CAGradientLayer layer];
selectedGrad.frame = cell.bounds;
selectedGrad.colors = [NSArray arrayWithObjects:(id)[[UIColor blackColor] CGColor], (id)[[UIColor whiteColor] CGColor], nil];

[cell setSelectedBackgroundView:[[UIView alloc] init]];
[cell.selectedBackgroundView.layer insertSublayer:selectedGrad atIndex:0];

} 
```

这不是我需要实现的，我必须为每个部分的所有单元格设置线性渐变颜色。

如果有人遇到同样的问题并找到解决方案，请告诉我们

非常感谢

# c# - 如何将动态字典值转换为列表？

> ID：11342477
> 
> 赞同：3
> 
> 时间：2012-07-05T10:29:54.950
> 
> 标签：c#, .net, dynamic

我有以下代码：

```
List<Type> p1 = new List<Type>();
p1.Add(typeof(int));
p1.Add(typeof(string));
dynamic genericDic = typeof(Dictionary<, >);
dynamic specificDic1 = genericDic.MakeGenericType(p1.ToArray());
dynamic dic1 = Activator.CreateInstance(specificDic1);
dic1.Add(1, "John");
dic1.Add(2, "Smith");
dynamic genericLst = typeof(List<>);
dynamic specificLst = genericLst.MakeGenericType(typeof(string));
dynamic list = Activator.CreateInstance(specificLst);
list.AddRange(dic1.Values.ToList()); 
```

当我尝试执行时，`list.AddRange(dic1.Values.ToList());`我得到以下异常

> 未找到类型“ValueCollection”的公共成员“ToList”。

堆栈跟踪：

```
 at Microsoft.VisualBasic.CompilerServices.Symbols.Container.GetMembers(String& MemberName, Boolean ReportErrors)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.ObjectLateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack)
   at StyleResearch.DataManagement.DataStream.Business.MonthEndProcess.ConverToLegacyStructureInMemory(List`1 marketDataTypeIds, String tableName, Int32 placeHolderValue) in C:\Style Research\Work\SRDM\trunk\StyleResearch.DataManagement.DataStream.Business\MonthEndProcess.vb:line 1850
   at StyleResearch.DataManagement.DataStream.UI.DDLMonthEndProcess._Lambda$__6(LegacyStructureDetail legacy) in C:\Style Research\Work\SRDM\trunk\StyleResearch.DataManagement.DataStream.UI\DDLMonthEndProcess.vb:line 1198
   at System.Threading.Tasks.Parallel.<>c__DisplayClass2d`2.<ForEachWorker>b__23(Int32 i)
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c() 
```

注意：我已将 VB.NET 示例转换为 C#，但堆栈跟踪来自 VB.NET 项目

当我执行以下操作时，它工作得非常好：

```
Dictionary<int, string> dic = new Dictionary<int, string>();
dic.Add(1, "John");
dic.Add(2, "Smith");
List<string> lst = new List<string>();
lst.AddRange(dic.Values.ToList()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:43:17.917

只需投射它：

```
list.AddRange(((IEnumerable<string>)dic1.Values).ToList()); 
```

此外，您可以再次通过动态：

```
list.AddRange((dynamic)dic1.Values)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:40:14.437

ToList<T>() 是 IEnumerable<T> 的扩展方法。但是您的 dic1.Values 是动态类型而不是 IENumerable<string> 所以.Net 无法找到并使用这种扩展方法。您可以尝试简单的 foreach：

```
foreach (var value in dic1.Values)
  list.Add(value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:56:16.197

尝试在没有扩展函数语法的情况下调用，即类似

```
Enumerable.ToList ( (dynamic) dic1.Values ) 
```

DLR 不会在运行时搜索继承接口的扩展函数（我猜是出于性能原因或避免歧义）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T10:44:42.340

```
list.AddRange((IEnumerable<string>)dic.Values)) 
```

或者

```
List<string> list = ((IEnumerable<string>)dic.Values).ToList(); 
```

或者

```
List<string> list = new List<string>((IEnumerable<string>)dic.Values); 
```

# json - 在scala中的json中创建子树

> ID：11342478
> 
> 赞同：1
> 
> 时间：2012-07-05T10:29:56.590
> 
> 标签：json, scala

我正在使用 scala.util.parsing.json 并且我想创建一个具有以下格式的 json：

```
{ users : { 
    username: foo,
    password: bar}
} 
```

我尝试使用此代码：

```
 val json = JSONObject(
  Map(
    "users" -> Map(
      "username" -> "foo",
      "password" -> "bar"))) 
```

但是这个方法创建了这个json：

```
{"user" : Map(username -> foo, password -> bar)} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:35:02.027

```
val json = JSONObject(
           Map("users" -> JSONObject(Map(
               "username" -> "foo",
                "password" -> "bar")))) 
```

似乎做到了。

# image - 在 Kohana 3 中制作水印

> ID：11342479
> 
> 赞同：1
> 
> 时间：2012-07-05T10:30:08.400
> 
> 标签：image, image-processing, kohana, watermark

请帮助我尽快在 Kohana 3 中解决此问题。Kohana 是一个图像模块，可以在其中操作裁剪、调整大小等图像。我正在尝试通过这个模块制作水印。代码如下所示：

```
 $image = Image::factory('image-path');
    $image->watermark('watermark-image.png',100,100,80);
    $image->save(); 
```

但我收到以下错误：

```
 Argument 1 passed to Kohana_Image::watermark() must be an instance of Image, none given, called in /var/www/virtual/verana.ge/htdocs/application/classes/model/fileupload.php on line 73 and defined 
```

你能告诉我如何修复这个错误并在 Kohana 3 中制作水印吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:37:22.620

我想这会成功：

```
$image = Image::factory('image-path');
$watermark = Image::factory('watermark-image.png');
$image->watermark($watermark,100,100,80);
$image->save(); 
```

该错误表明 watermark 方法需要 Image 类的实例，而不是字符串。

# jquery - jQuery：数据处理

> ID：11342490
> 
> 赞同：0
> 
> 时间：2012-07-05T10:30:48.250
> 
> 标签：jquery, jquery-ui, datatables

我正在使用 jQuery UI 和数据表。通过 ajax 将数据上传到表中。在这个数据中，我有一个复选框。所以应该相应地对待它们 ($('.checkbox_class').uniform()) 问题是表有分页并且只处理了前 10 行，而其余的仍然存在。如何处理以下项目？我想使用 live()，但是没有合适的事件类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:44:20.110

数据表有自己的内置事件集，因此您可以使用该`draw`事件：（也`.live()`已弃用，因此请`.on()`改用）

```
$("#myTable").on("draw", function() {
    myFunctionToReapplyClasses();
}); 
```

每次更改页面或过滤结果时都会触发该功能。

# c++ - 智能指针以及当它们破坏它们指向的对象时

> ID：11342493
> 
> 赞同：0
> 
> 时间：2012-07-05T10:30:59.517
> 
> 标签：c++

我希望使用一个智能指针指向一个对象，该对象将被很多不同的对象访问。因此，在所有指针都释放到它之前，我不想破坏它。智能指针将指向一个实例化几个对象的对象，该对象实例化几个对象，依此类推，这样您就可以通过这个指针访问所有单独的 System object。但是，假设我在 main 中创建智能指针为`std::shared_ptr<System> object(new System);`然后假设我有另一个对象，所有其他实体都从该对象派生出一个静态 std::shared_ptr ，我将其设置为等于上面的对象。静态声明意味着它由编译器管理，而不是基于每个实例。所以假设所有从基类派生的对象都使用这个静态指针来访问 System object。这个智能指针何时被破坏？我需要在 main 中的那个指针之前销毁这个指针，谁的销毁应该将引用计数降至 0，从而销毁它指向的对象。所以我的问题是，什么时候静态声明的 std::shared_ptr 在事物方案中被破坏。或者即使一个指针被全局声明并被全部使用，这个对象什么时候会被破坏？

基类看起来像这样：

```
class Base
{
public:
    static shared_ptr<System> m_System;
};

int main()
{
    std::shared_ptr<System> system(new System);
    Base::m_System = system;

    /*
        other stuff
    */ 
    return 0;
} 
```

还有另一件事有人可以帮助我，我对 const-ness 不是很好，我希望那个静态指针是一个不能被派生类更改的常量。但是如果它是 const 我不能像我在 main 中那样初始化它，对吧？那么我将如何声明它以使其为 const，但我仍然可以将它设置为最初像这样的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:38:38.283

我们有 2 个对象引用，因此，当我们退出主函数时 - 我们减少引用计数器，然后销毁静态对象减少引用计数器，当引用计数器等于 0 时，我们的 System object 将被销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:52:07.487

> 这个智能指针何时被破坏？

像所有静态对象一样，它在`main`退出后被销毁。

> 我需要在 main 中的那个指针之前销毁这个指针，谁的销毁应该将引用计数降至 0，从而销毁它指向的对象。

在这种情况下，也许您希望静态指针为`weak_ptr`. 它不会参与保持对象活动的引用计数，但只要有指向它的共享指针，它就会允许访问该对象。`main()`然后，一旦其中的指针（以及该指针的任何其他副本）超出范围，该对象将被销毁。

或者，可能值得考虑避免静态对象，而是在其中实例化对象`main()`并将引用传递给任何需要它的对象。这避免了与静态对象相关的各种问题（特别是它们的初始化顺序），也使程序的依赖结构更加清晰。在这种情况下，您可能根本不需要智能指针，因为对象的生命周期与程序的生命周期绑定。

# c# - 可能“死”一个asp。网络超链接？

> ID：11342494
> 
> 赞同：2
> 
> 时间：2012-07-05T10:31:04.977
> 
> 标签：c#, asp.net, hyperlink, controls, label

有没有办法让 asp .net 超链接表现得像一个标签？即没有指定url并且没有点击事件（包括鼠标光标不会改变以显示它可以被点击）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:43:45.583

一个简单的超链接

```
<asp:HyperLink ID="HyperLink1" runat="server">HyperLink</asp:HyperLink> 
```

没有导航 url 只显示一个标签。

将这一行添加到后面的代码中，让它变得像超链接一样

```
HyperLink1.NavigateUrl = "Mypage1.aspx"; 
```

或设置超链接的 NavigateUrl 属性

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/Mypage1.aspx">HyperLink</asp:HyperLink> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:36:07.773

我不认为这是可能的。但是，您可以向它添加一个返回 false 的 javascript onclick 事件。这应该会阻止链接触发。您还可以更改 css 中的光标，以便当鼠标经过链接时它仍然是指针。

所以：

```
<a href="http://www.google.com" runat="server" onclick="return false;">Hello</a> 
```

# c# - 如何在sql server中删除整列中的一个单词？

> ID：11342497
> 
> 赞同：1
> 
> 时间：2012-07-05T10:31:12.110
> 
> 标签：c#, .net, sql-server

我只是用一个 excel 文件填充了我的数据库，在检查它之后，我发现在许多列中都有一个错误。

我在互联网上查看，在多行中插入单元格时，这是 Excel 的一个错误。所以现在“ *x000D* ”这个词出现在许多列中。

我如何在整个数据库中使用 sql 查询将其删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:39:39.630

如果您想在所有数据库上执行此操作，则必须创建一个循环遍历的过程

`INFORMATION_SCHEMA.COLUMNS`视图，它将为您提供数据库的所有列（及其表）。您可以检查列的 DATA_TYPE（例如，您不需要更新整数列）

然后使用动态sql，在循环中构建一个这样的查询

```
UPDATE <MYTABLE> SET <MYCOLUMN> = REPLACE(<MYCOLUMN>, 'x000D', '') 
```

并执行它。

**编辑**

更快，不那么干净，没有存储过程，你可以在 SQL Server Management studio 中输入：

```
SELECT 'UPDATE ' 
+ c.TABLE_NAME 
+ ' SET ' 
+ c.COLUMN_NAME 
+ ' =REPLACE(' + c.COLUMN_NAME + ', ''x000D'', '''');'
FROM INFORMATION_SCHEMA.COLUMNS c
WHERE c.DATA_TYPE = 'nvarchar' // or IN (<the types you wanna correct>) 
```

你复制结果并执行它，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:32:50.337

你可以这样做：

```
update MyTable -- <<=== Your table name
set myColumn = null -- <<=== Your column name
where myColumn='x000D' 
```

此查询将清除设置为`x000D`的`myColumn`所有行中的值`x000D`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:42:09.470

使用更正的 xls 可以更容易地整理和重新加载表格

# jquery - 跨设备 iframe/小部件 css 问题

> ID：11342499
> 
> 赞同：0
> 
> 时间：2012-07-05T10:31:17.337
> 
> 标签：jquery, html, iframe, css

我有一个客户，我正在为他开发一个小部件，他希望我们的小部件可以跨设备显示。我正在寻找这样做的最佳实践方式。

目前他们所拥有的是该站点上的一个链接，该链接使用 qtip 和 jquery 将我们的 iframe 作为弹出窗口打开，如下所示：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.tools-1.2.5.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.qtip-1.0.0-rc3.js"></script>
    <link href="Content/Reset.css" rel="stylesheet" type="text/css" />
    <link href="Content/RTL.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .closeWidget
        {
            left: 420px;
            position: absolute;
            top: 316px;
        }
        .emsTitle
        {
            background-color: transparent;
        }
        #OpenOneByFour
        {
        }
        #OpenOneByFour
        {
        }
        .closeWidgetOBT
        {
            left: -46px;
            position: absolute;
            top: 209px;
        }
    </style>
</head>
<body>
    <!-- This is auto centered -->
    <div id="centeredTechnology" class="centered">
        <!-- We have a shadow effect to the left of the main content box -->
        <div id="leftShadowTechnology" class="leftShadow">
        </div>
        <!-- the central content box top to bottom -->
        <div id="centerTechnology" class="center">
            <!-- The Top Green Login box -->
            <div id="loginBox">
                <div id="loginFields">
                </div>
            </div>

            <div id="topLineTechnology" class="topLine">
            </div>

            <div id="contentTechnology" class="content">
                <div class="fullWidth-column">
                    <h1 title="Video Production and Hosting" style="clear: both; margin-top: 40px;">
                       Widget 
                    </h1>
                    <p>
                        click <a href="#" id="OpenOneByFour">here</a> to launch widget pop up demo
                    </p>

                </div>
            </div>
            <div id="footer">

            </div>
            <div id="footerMenu">

                <div>
                    <br />

                </div>
            </div>
            <div id="copyright">

            </div>
        </div>
        <!-- we have a right shadow effect to the right of the main content box -->
        <div id="rightShadowTechnology" class="rightShadow">
        </div>
    </div>
    <script type="text/javascript">
        //<![CDATA[
        $(document).ready(function () {         // Create the modal backdrop on document load so all modal tooltips can use it
            $('<div id="qtip-ras-blanket">').css({
                position: 'absolute',
                top: $(document).scrollTop(), // Use document scrollTop so it's on-screen even if the window is scrolled
                left: 0,
                height: $(document).height(), // Span the full document height...
                width: '100%', // ...and full width
                opacity: 0.7, // Make it slightly transparent
                backgroundColor: 'black',
                zIndex: 5000  // Make sure the zIndex is below 6000 to keep it below tooltips!
            }).appendTo(document.body) // Append to the document body
         .hide(); // Hide it initially
        });

        $('#OpenOneByFour').qtip({
            content: {
                title: {
                    text: '<div class="emsTitleOTB"></div>',
                    button: '<img class="closeWidgetOBT" src="http://widgeturl.com/Content/Images/close.png" alt="" />'
                },
                text: '<iframe style="background-color: transparent; overflow-y: hidden; overflow-x: hidden;" width="779" height="203" scrolling="no" src="http://WidgetURL.co.uk/Widgets/OneByFour/8718114621562"></iframe><div style="clear: both;">&nbsp;</div>'
            },
            position: {
                target: $(document.body), // Position it via the document body...

  corner: 'topMiddle' // ...at the center of the viewport
        },
        show: {
            when: 'click', // Show it on click
            solo: true // And hide all other tooltips
        },
        hide: false,
        style: {
            width: 779,
            height: 203,
            padding: '0px',
            title: { 'padding-bottom': '0', 'padding-left': '0', 'padding-top': '0', 'background-color': 'Transparent', 'width': '779', 'height': '203' },
            border: {
                width: 0,
                radius: 0,
                color: '#000000'
            }
        },
        api: {
            beforeShow: function () {
                // Fade in the modal "blanket" using the defined show speed
                $('#qtip-ras-blanket').fadeIn(this.options.show.effect.length);
            },
            beforeHide: function () {
                // Fade out the modal "blanket" using the defined hide speed
                $('#qtip-ras-blanket').fadeOut(this.options.hide.effect.length);
            }
        }
    });

    //]]>
</script> 
```

所以上面的以下部分获取了 iframe：

```
 $('#OpenOneByFour').qtip({
            content: {
                title: {
                    text: '<div class="emsTitleOTB"></div>',
                    button: '<img class="closeWidgetOBT" src="http://widgeturl.com/Content/Images/close.png" alt="" />'
                },
                text: '<iframe style="background-color: transparent; overflow-y: hidden; overflow-x: hidden;" width="779" height="203" scrolling="no" src="http://WidgetURL.co.uk/Widgets/OneByFour/8718114621562"></iframe><div style="clear: both;">&nbsp;</div>'
            },
            position: {
                target: $(document.body), // Position it via the document body... 
```

当它在手机浏览器中打开时它太小了，当你放大它时它不喜欢它 - 偏离中心等等......

我一直在研究显示小部件的不同方式，例如使用 CSS3 @media - 并尝试只更改小部件的 css，但我遇到了问题，因为 iframe 在 jquery 中设置了宽度/高度（我真正想要做的是在普通桌面上让它按原样弹出，但在较小的设备上 - 即点击点击此处链接时的手机我希望它填满整个页面）

我尝试了以下方法：

```
@media only screen and (touch-enabled: 0) {
        .w6392597
        {
            width: 133px;
            height: 135px;
            overflow: hidden;
            float: left; 
background-color:lightblue;
        }
}

@media only screen and (max-device-width: 650px) {

 .w6392597
        {
            width: 133px;
            height: 135px;
            overflow: hidden;
            float: left; 
background-color:orange;
        }
} 
```

只是想看看颜色是否有差异

```
 <!-- Viewport is very important, since it affects results of media
       query matching. -->
  <meta name="viewport" content="width=device-width">

  <!-- Include device.js in each version for redirection. -->
  <script src="Scripts/device.js"></script> 
```

有没有人对将弹出式小部件放置到跨设备使用的网站的最佳方式有任何建议，即使我目前正在使用 jquery 和 iframe，这可以更改 - 任何建议表示赞赏....

# javascript - 使用 jquery/javascript 居中按钮

> ID：11342502
> 
> 赞同：0
> 
> 时间：2012-07-05T10:31:32.983
> 
> 标签：javascript, jquery

是否可以在下面的脚本中居中投票按钮？

```
 <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
    <noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>​ 
```

该按钮的样式为类：'pds-vote-button'

这是一个小提琴：http: [//jsfiddle.net/25LjE/8/](http://jsfiddle.net/25LjE/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:39:34.127

**通过使用 JQUERY：**

```
$('.pds-votebutton-outer').css('text-align','center'); 
```

**使用 JQUERY 的演示** [http://jsfiddle.net/rathoreahsan/25LjE/29/](http://jsfiddle.net/rathoreahsan/25LjE/29/)

**或通过使用 CSS：**

```
.pds-votebutton-outer {
    text-align:center;
} 
```

**使用 CSS 进行演示** [http://jsfiddle.net/rathoreahsan/25LjE/33/](http://jsfiddle.net/rathoreahsan/25LjE/33/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:49:14.683

你可以试试

```
$('#example td:nth-col(1)').textAlign(','); 
```

您的班级将替换为指定的 id。

# maven - 使 maven 构建失败创建的工件包含某些类

> ID：11342503
> 
> 赞同：0
> 
> 时间：2012-07-05T10:31:38.000
> 
> 标签：maven, build, maven-ear-plugin

我有复杂的多 pom 设置，最终将创建一个 EAR 包。有时依赖关系会混乱，一些不需要的依赖关系（如 JUnit）最终会出现在最终的 EAR 包中。

如果最终工件包含某些类，有没有办法使 Maven 构建失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:38:37.723

也许不会失败，但您可以排除一些您知道永远不会使用的 jar 文件。

`maven-ear-plugin`排除文件时有一个要使用的标签，请看[这里](http://maven.apache.org/plugins/maven-ear-plugin/examples/excluding-files-from-ear.html)。

例如，使用`<packagingExcludes/>`标签排除 JUnit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:45:43.437

您可以将[maven-enforcer-plugin](http://maven.apache.org/plugins/maven-enforcer-plugin/)与您可能必须自己编写的[自定义规则一起使用。](http://maven.apache.org/enforcer/enforcer-api/writing-a-custom-rule.html)我没有搜索过，但我认为目前还没有这样的规则。

# android - android.support.v4.view.ViewPager 不允许在 android 2.2 中滚动子项？

> ID：11342505
> 
> 赞同：3
> 
> 时间：2012-07-05T10:31:41.943
> 
> 标签：android, android-4.0-ice-cream-sandwich

我的应用程序使用 ViewPager 支持 v4，我的一个视图在页面内有一个 Horizo​​ntalScrollView，在 4.0 版本中它可以正常滚动，但运行 2.2 版本时，ViewPager 正在移动到下一个。

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T21:46:16.287

也许你可以试试这个：

```
public class CustomViewPager extends ViewPager {

public CustomViewPager(Context context) {
    super(context);
}

public CustomViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected boolean canScroll(View v, boolean checkV, int dx, int x, int y) {
    if(v instanceof HorizontalScrollView){
        return true;
    }
    return super.canScroll(v, checkV, dx, x, y);
}

} 
```

**解释：**

这将告诉 viewpager 如果您滚动的视图中的视图是水平列表视图，那么他需要忽略滚动并让水平滚动“处理它”，但您需要记住任何滚动（水平scroll) 水平滚动视图之外将使您的 viewpager 更改页面，此外，如果您从外部滚动到内部（您的手指在平板电脑之外并进入），viewpager 将忽略此行为并移动页面。

# redirect - 使用 c# 代码在 sharepoint 2010 webpart（沙盒解决方案）中进行页面重定向是否可能？

> ID：11342509
> 
> 赞同：2
> 
> 时间：2012-07-05T10:32:00.283
> 
> 标签：redirect, sharepoint-2010, sandbox, office365

我正在使用沙盒解决方案（sharepoint 2010 项目在 office 365 上，因此使用沙盒解决方案）并且希望在按钮单击事件上从一个页面转到另一个页面。这是通过 javascript 实现的，但未执行 click 事件中的操作。

例如，我将页面加载时的 javascript 分配给所需的事件，然后该事件执行重定向而不进入事件内部的代码。

用于重定向的 javascript 是：

```
string redirectURL = "http://ksreejit:32512/sites/SplTeam/Pages/QuizMasterDashboard.aspx";
btnCancel.Attributes.Add("OnClick", "javascript:{window.location='" + redirectURL + "';return false;}"); 
```

事件代码是：

```
protected void btnSubmit_Click(object sender, EventArgs e)
        {

            if (ViewState["QuestionID"].ToString() != string.Empty)
            {
                SaveDetails(ViewState["QuestionID"].ToString());
                foreach (Control contrl in this.Controls)
                {
                    contrl.Visible = false;
                }

            } 
            else
            {
                SaveDetails();
                foreach (Control contrl in this.Controls)
                {
                    contrl.Visible = false;
                }

            }
            Label lblMessage = new Label();
            lblMessage.Visible = true;
            lblMessage.Text = "The Question is successfully saved and sent to reviewer for reviewing. Thanks for uploading.";

   } 
```

如您所见，重定向成功地适用于 btnCancel。我没有为 btnSubmit 分配它，因为它只会重定向并且不会转到上面指定的代码。尝试过微软的帮助，他们也一无所知。将不胜感激。项目要求已被修改。好久没有答案了，请多看看。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:21:31.353

在您的按钮单击中添加此代码

```
string redirectURL = "http://ksreejit:32512/sites/SplTeam/Pages/QuizMasterDashboard.aspx";
this.Controls.Add(new LiteralControl("<script>window.location.href='" + redirectURL + "';</script>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:42:51.887

对于 btnSubmit 按钮，不要像为 btnCancel 那样添加属性。然后只需`Response.Redirect(...);`在您的事件方法中添加一个。

```
... lblMessage.Text = "The Question is successfully saved and sent to reviewer for reviewing. Thanks for uploading.";

Response.Redirect("http://ksreejit:32512/sites/SplTeam/Pages/QuizMasterDashboard.aspx"); 
```

# javascript - 在这种情况下使用什么 javascript 库/模板引擎？

> ID：11342517
> 
> 赞同：0
> 
> 时间：2012-07-05T10:32:31.460
> 
> 标签：javascript, jquery, facebook, json

我必须邀请您的 Facebook 朋友模块，该模块会获取您朋友的姓名、照片并允许您向他们发送消息。我需要它看起来像我网站的一个组成部分，所以我必须对其进行样式设置。我用朋友的 id、名字等获取 json，并希望将这些值放在某些 html 标记和属性中。我该如何解决这个问题？我可以在 jQuery 中实现，但希望避免使用 ragu 字符串和变量的 jQuery 意大利面条代码。你推荐我什么库/模板引擎？易用性和重量是最重要的事情。该网站已经包含 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:37:18.463

> 我可以在 jQuery 中实现，但希望避免使用 ragu 字符串和变量的 jQuery 意大利面条代码。你推荐我什么库/模板引擎？

我建议不要使用额外*的*大库或模板引擎——我会继续使用 jQuery，并为网络上浮动*的 jQuery 实现嵌入其中一个 sprintf 。*

因此，您可以在*一个*位置将输出的“HTML 模板”定义为*一个*字符串，然后在循环 jQuery 中的数据时用变量值替换该字符串中的占位符。

如果您不喜欢那里的任何 sprintf-Jquery-plugins，这里有另一个非常简单且简短的函数，它只实现基本的字符串占位符 %s（但更多的是您很可能不需要）：[http ://www.nczonline.net/blog/2011/10/11/simple-maintainable-templating-with-javascript/](http://www.nczonline.net/blog/2011/10/11/simple-maintainable-templating-with-javascript/)。

（如果您必须在模板字符串的多个位置插入值，那么请查看我在该页面底部的评论，如果已建议对 Nicolas 的功能进行简单调整，该功能将实现“参数交换”功能PHP 的 sprintf，因此您只需将值传递给函数一次，但可以在模板字符串中的多个位置使用它们。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T10:58:03.650

最简单的方法是使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)。您需要做的第一件事是创建一个应用程序。一旦你有了这个，你应该能够在请求对话框页面上使用 JavaScript 示例。

# android - 添加阴影以滑出导航

> ID：11342522
> 
> 赞同：10
> 
> 时间：2012-07-05T10:32:41.533
> 
> 标签：android

[我已经使用这个](https://github.com/gitgrimbo/android-sliding-menu-demo)实现了滑出导航。![当前实施](../Images/15202112b0cae26b758c3cd4d6ca7f02.png)

内容应该在菜单列表的右边缘附近投下阴影；喜欢![预期结果](../Images/b74b563a5855de3adfaaf4ab9387a5d3.png)

我正在尝试通过向内容左边缘添加视图来添加阴影，但它不会显示出来。

任何有关如何执行此操作的线索将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-29T15:21:52.250

伙计们，我知道我迟到了，但我很难找到让我满意的这个问题的答案，所以我只想分享我的解决方案。首先，创建一个可绘制的 navbar_shadow.xml 并将其与其余的可绘制对象放在一起。它只是一个带有透明渐变的矩形。

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient android:startColor="#111"
        android:endColor="#00000000">
    </gradient>
    <size
        android:height="@dimen/activity_vertical_margin"
        android:width="5dp">
    </size>
</shape> 
```

然后，无论您在哪里实例化您的抽屉，使用您的 DrawerLayout 变量将其附加到您的抽屉。

```
mDrawerLayout.setDrawerShadow(R.drawable.navbar_shadow, Gravity.LEFT); 
```

巴姆。无需逐行绘制或包含任何额外资源。您可以使用自己的 startColor 来匹配您的抽屉颜色，但 endColor 应保持 #00000000 因为它是透明的黑色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:00:16.720

我知道这篇文章已经很老了，但是我很难找到解决方案，所以我认为如果我在这里发布我的帖子可能会对某人有所帮助。

我想在这个简单的 ListView 的右侧添加淡入黑色。

```
<ListView
    android:id="@+id/sideMenuList"
    android:layout_width="300dp"
    android:layout_height="match_parent"/> 
```

[使用 GIMP](http://blog.bottomlessinc.com/2008/06/opaque-to-transparent-gradient-on-layers-in-gimp/)创建了一个带有渐变的 PNG 文件。将其添加到 /res/drawable。我的被​​命名为 fade_from_right.png

用RelativeLayout 包围ListView。为 RelativeLayout 提供您希望 ListView 具有的背景颜色。

在 ListView 的右侧添加另一个视图。将新视图背景设置为您的“fade_from_right.png”

而已。

```
<RelativeLayout
    android:layout_height="match_parent"
    android:layout_width="300dp"
    android:background="@color/solarized_base02">

    <ListView
        android:id="@+id/sideMenuList"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

    <View
        android:layout_alignRight="@id/sideMenuList"
        android:layout_width="5dp"
        android:layout_height="match_parent"
        android:background="@drawable/fade_from_right"/>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T07:07:57.620

有什么需要用列表视图添加另一个视图，我认为它不会是完美的..你可以这样尝试吗？

```
sm = getSlidingMenu();
sm.setShadowDrawable(R.drawable.shadowbar); 
```

因为我们可能会设置一些 behindView 的宽度和偏移量。我认为这个选项会很好看。

# java - 打包和分发 Ant 项目

> ID：11342533
> 
> 赞同：0
> 
> 时间：2012-07-05T10:33:30.853
> 
> 标签：java, ant, build, packaging

我在 NetBeans 中构建了一个 Ant 项目，作为 Java 自由格式项目。我想要做的是打包项目并分发它只是为了执行一个 .bat 并运行应用程序，但该项目使用 SunSpot 等。

综上所述，如果我在我的项目的根目录（文件夹src，文件build.xml等）中创建一个.bat（其单行是“ant”）并运行它，一切都很好。但我不想将 NetBeans 项目文件夹和 .bat 传递给客户，我只想将 .jar 和 .bat 传递给他

我怎么能做到这一切？？如果它在编译时来自 build.xml，那就更好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:58:26.127

我建议阅读以下内容：

*   [将程序打包成jar文件](http://docs.oracle.com/javase/tutorial/deployment/jar/)
*   [ANT 教程](http://ant.apache.org/manual/tutorials.html)

# asp.net - 从 cookie 事件加载数据

> ID：11342538
> 
> 赞同：0
> 
> 时间：2012-07-05T10:33:48.660
> 
> 标签：asp.net, devexpress

请给个平安的建议。我有登录表格。登录和密码文本框，以及“输入”按钮。如果文本框为空，则按钮禁用。所以我制作了使按钮启用的客户端事件。两个文本框的事件 TextChaged。但是在进入应用程序用户登录名和密码后写入cookies。当我下次输入时，我将登录名输入到第一个框中，密码会自动出现。并且“进入”按钮仍然被禁用。是否存在粘贴 cookie 后发生的某些事件？ps：使用 devexpress 文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:15:55.913

当您第二次输入登录详细信息时，理想情况下您的 textchange 事件应该已经触发！并且“Enter”按钮应该已启用。你确定一切正常吗？

或者，您可以执行以下操作：

文本框的 onblur 事件，检查两个文本框的长度（登录名和密码）。如果两个文本框的长度都大于零，请启用 Enter 按钮。

希望能帮助到你。

# c++ - 使用 std::pair 作为 std::unordered_map 中的键

> ID：11342539
> 
> 赞同：1
> 
> 时间：2012-07-05T10:33:53.150
> 
> 标签：c++, c++11, unordered-map

我正在尝试创建一个动态属性映射。为此，我创建了单独的属性映射 Dynamic_attribute，然后创建了一个 std::unordered_map 容器来存储它们。下面是我写的代码。但是在使用 g++ 选项 -std=c++0x 编译时会导致一个非常奇怪的错误。

```
#include <iostream>
#include <vector>
#include <map>
#include <unordered_map>
#include <algorithm>
#include <string>
#include <typeinfo>
#include <cstdlib>
#include <cstring>
#include <boost/property_map/property_map.hpp>
#include <boost/property_map/dynamic_property_map.hpp>

class Dynamic_attribute_base{
public:
  Dynamic_attribute_base(const std::string& name) : name_(name){}

  /// Destructor
  virtual ~Dynamic_attribute_base(){}

  /// Destroy the object
  virtual void destroy() = 0;

protected:
  std::string name_;
};

/// @models
/// - LValuePropertyMap
/// - std:unordered_map
template<typename Key, typename Value>
class Dynamic_attribute
    : public Dynamic_attribute_base{
public:
  typedef Key key_type;
  typedef Value value_type;
  typedef std::unordered_map<key_type, value_type> map_type;
  typedef typename map_type::reference referencnce;
  typedef typename map_type::const_reference const_reference;

  /// Constructor
  Dynamic_attribute(const std::string& name):
    Dynamic_attribute_base(name) {}

public:  // virtual interface of Dynamic_attribute_base

  virtual void destroy(){
    data_.clear();
    this->~Dynamic_attribute();
  }
public:
  /// Return the value corresponding to key k.
  /// if key doesn't exists unexpected value is returned.
  value_type get(key_type& k){
    assert(!data_.empty());
    if (data_.find(k) != data_.end()){
      return data_[k];
    }
    else{
        std::cout<<"Key not found"<< std::endl;
        return NULL;
    }
  }

  /// Set the property corresponding to particular Key K
  /// to value V.
  void set(key_type& k, value_type& v){
    data_[k] = v;
  }

  /// Remove a key from the map.
  void remove(key_type& k){
    data_.erase(k);
  }

protected:
  map_type data_;
};

std::unordered_map< std::pair<std::string,unsigned int> , Dynamic_attribute_base*> d_attribute_container;
template<typename T>
void add_dynamic_attribute(unsigned int admin, std::string name){
  if (d_attribute_container.find(make_pair(name,admin)) != d_attribute_container.end()){
    std::cout<<"Error. Key already exists.";
    return;
    }
  Dynamic_attribute<int, T> *d_attr = new Dynamic_attribute<int, T>(name);
  d_attribute_container[make_pair(name,admin)] = d_attr;
}

template<typename T>
T get_dart_attribute(int handle, unsigned int admin, std::string name){
  if (d_attribute_container.find(make_pair(name,admin)) == d_attribute_container.end()){
      std::cout<<"Error. Key doesn't exists.";
      return;
    }
  return dynamic_cast<Dynamic_attribute<int,T>*>(d_attribute_container[make_pair(name,admin)])->get(handle);
}

int main()
{
  add_dynamic_attribute<std::string>(1,"first");
  add_dynamic_attribute<double>(2,"second");
  add_dynamic_attribute<double>(2,"second");
  return 0;
} 
```

我收到的错误消息

/tmp/ccLK64Ja.o: 在函数`std::__detail::_Hash_code_base<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int>, std::pair<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const, Dynamic_attribute_base*>, std::_Select1st<std::pair<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const, Dynamic_attribute_base*> >, std::equal_to<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> >, std::hash<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const&) const': main.cpp:(.text._ZNKSt8__detail15_Hash_code_baseISt4pairISsjES1_IKS2_P22Dynamic_attribute_baseESt10_Select1stIS6_ESt8equal_toIS2_ESt4hashIS2_ENS_18_Mod_range_hashingENS_20_Default_ranged_hashELb0EE12_M_hash_codeERS3_[std::__detail::_Hash_code_base<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int>, std::pair<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const, Dynamic_attribute_base*>, std::_Select1st<std::pair<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const, Dynamic_attribute_base*> >, std::equal_to<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> >, std::hash<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, false>::_M_hash_code(std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int> const&) const]+0x37): undefined reference to`std::hash, std::allocator >, unsigned int> >::operator()(std::pair, std::allocator >, unsigned int>) const'

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:38:08.953

您需要专门`std::hash`针对您的配对，或者为它提供一个哈希模板参数。

# android - 在android中将四个应用程序分组在一个应用程序图标下

> ID：11342540
> 
> 赞同：3
> 
> 时间：2012-07-05T10:33:53.783
> 
> 标签：android, grouping

在我的 android 应用程序中，我必须为四个不同的应用程序使用一个图标，这意味着当我单击主图标时，必须出现四个不同的应用程序图标，当我单击一个应用程序图标时，必须为每个图标打开一个不同的应用程序.

和

当我安装新应用程序时，应用程序图标必须仅在主图标下创建。

可能吗 ？如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:39:06.200

我的第一种方法是使用小部件执行此操作：http: [//developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

您可以使用它打开一个对话框并根据所需应用程序可以处理的选择发送一个意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:37:29.230

您不能将它们全部捆绑到一个 apk 中，然后将您的第一个活动显示为具有 4 个图标的菜单屏幕，当您单击一个时，它会将您带到相关活动？

我知道这是一种解决方法，如果例如必须单独安装应用程序但只是一个想法，它就行不通。

# android - 使用 CursorLoader 获取所有者的电子邮件地址

> ID：11342544
> 
> 赞同：0
> 
> 时间：2012-07-05T10:33:58.690
> 
> 标签：android, email, android-contacts, android-cursorloader

我正在尝试用所有者的电子邮件填充 ArrayList。我在一个片段中这样做。这是我的代码：

```
 public class ItemDetailFragment extends Fragment implements
        LoaderManager.LoaderCallbacks<Cursor> {

    ArrayList<String> emails = new ArrayList<String>();

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);

    }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
                View myFragmentView = inflater.inflate(R.layout.formal_email_layout,
                                container, false);
                return myFragmentView;
       }

 public Loader<Cursor> onCreateLoader(int id, Bundle arguments) {
            return new CursorLoader(getActivity(),
                    // Retrieve data rows for the device user's 'profile' contact.
                    Uri.withAppendedPath(
                            ContactsContract.Profile.CONTENT_URI,
                            ContactsContract.Contacts.Data.CONTENT_DIRECTORY),
                    ProfileQuery.PROJECTION,

                    // Select only email addresses.
                    ContactsContract.Contacts.Data.MIMETYPE + " = ?",
                    new String[]{ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE},

                    // Show primary email addresses first. Note that there won't be
                    // a primary email address if the user hasn't specified one.
                    null);
        }

public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
            List<String> emails = new ArrayList<String>();
            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
                emails.add(cursor.getString(ProfileQuery.ADDRESS));
                // Potentially filter on ProfileQuery.IS_PRIMARY
                cursor.moveToNext();
            }

               Log.d("test", cursor.getString(ProfileQuery.ADDRESS));
            }

public void onLoaderReset(Loader<Cursor> cursorLoader) {
            }

            private interface ProfileQuery {
                String[] PROJECTION = {
                        ContactsContract.CommonDataKinds.Email.ADDRESS,
                        ContactsContract.CommonDataKinds.Email.IS_PRIMARY,
                };

                int ADDRESS = 0;
                int IS_PRIMARY = 1;
            }

    } 
```

我基本上使用了[这里](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)给出的例子，我只是把它改编成一个片段。

当片段被午餐时，应用程序崩溃，我得到这个错误：

```
07-05 12:27:55.235: W/dalvikvm(23217): threadid=1: thread exiting with uncaught exception (group=0x40c2f1f8)
07-05 12:27:55.235: E/AndroidRuntime(23217): FATAL EXCEPTION: main
07-05 12:27:55.235: E/AndroidRuntime(23217): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

（我的设备上有一个 Gmail 帐户）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:25:07.180

这是一个获取所有者电子邮件的小课程。

您只能使用获取帐户名称（谷歌同步电子邮件地址）的代码的第一部分。

*   [https://github.com/jehy/Android-GetOwnerInfo](https://github.com/jehy/Android-GetOwnerInfo)

# jquery - 如何使用 UpdatePanels 在 ASP.NET 应用程序中防止使用 jQuery 双重提交

> ID：11342546
> 
> 赞同：2
> 
> 时间：2012-07-05T10:34:07.027
> 
> 标签：jquery, asp.net, double-submit-prevention

我有一个有时响应缓慢的 Intranet ASP.NET 应用程序。我的要求是防止重复提交，最好向用户提供表单已经提交的反馈。

我发现的示例显示了如何禁用提交按钮，但这还不够，因为在我的应用程序中可能会发生提交：

*   从提交按钮。
*   从任何具有 AutoPostBack = true 的控件（使用 javascript AFAIK 提交）。
*   从 UpdatePanel 中的上述任何一个 - 在我理解的这种情况下，POST 是使用 AJAX 完成的，当 AJAX 调用完成时我需要重新启用。

我正在考虑显示覆盖/模式弹出窗口之类的东西，可能带有动画进度图像，该图像将在提交时显示。对于 UpdatePanel，在 AJAX 调用完成时隐藏。

有没有人有一个可以像上面那样轻松集成到 ASP.NET 页面中的示例？或者指出我需要挂钩哪些事件来显示/隐藏覆盖。

**更新**

@Aristos 的回答让我大部分时间都在那里。关键部分是处理 PageRequestManager.endRequest 以在 AJAX 调用完成时隐藏进度对话框。

有一种情况我仍然有问题：如果提交按钮导致文件下载，我没有可以用来隐藏我的进度对话框的事件。 [这个问题](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)有一个答案可以解决问题，我会试试看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:50:09.627

您根据标志放置允许/不允许提交表单，如下所示：

```
Page.Form.Attributes["onsubmit"] = "return fAllowToSubmit();"; 
```

当您通过更新面板发送并等待返回时，您打开关闭提交的标志。

```
 <script type="text/javascript"> 
    var _fAllowToSubmit = true;
    // here you can throw and an alert() when _fAllowToSubmit==false
    function fAllowToSubmit() 
     {
        if(!_fAllowToSubmit)
          alert("Please wait for the page to be updated");

       return _fAllowToSubmit;
     }

    // to avoid calling it before the Sys loaded
    jQuery(document).ready(function() {
      var prm = Sys.WebForms.PageRequestManager.getInstance();    
       prm.add_initializeRequest(InitializeRequest);
       prm.add_endRequest(EndRequest);
    });

    function InitializeRequest(sender, args) {
       _fAllowToSubmit = false;
       // to make it even nicer you can place here a fade css class
       // it will auto-clear with the next update.
       jQuery("#YourWarpDiv").addClass("FadedDiv");
    }

    function EndRequest(sender, args) {
        _fAllowToSubmit = true;
    }
</script> 
```

和

```
.FadedDiv
{
    background-color: white;
    filter:alpha(opacity=50);
    opacity: 0.5;
    -moz-opacity:0.50;
} 
```

当然，您还可以使用更新面板自动打开“请稍候”消息。

# jsf - Xpages 的库控制和使用 ssjs 作为默认值/验证器

> ID：11342557
> 
> 赞同：0
> 
> 时间：2012-07-05T10:34:52.270
> 
> 标签：jsf, xpages, xpages-extlib

我正在为 Xpages 开发一个库控件，在创建时需要一些帮助。

我会创建一个控件来读取配置文件并在表格中创建控件，如编辑框、复选框组等控件。[我在他的博尔格条目http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766](http://xprentice.gbs.com/A55BAC/keithstric.nsf/default.xsp?documentId=82770C11FA7B9B21852579C100581766)中像 Keith Strickland 一样建立我的控制

所以现在我的queststion：

我会在我的配置 ssjs 代码中存储用于计算默认值或验证，但我如何计算 ssjs？

Designer 自动生成的代码使用 PageExpressionEvaluator 对象，但我无法自己创建一个。

某人的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:34:36.830

您可以改用 ExpressionEvaluatorImpl 类：

```
com.ibm.xsp.page.compiled.ExpressionEvaluatorImpl( facesContext ) 
```

# javascript - 如何在点击融合图表中的列时调用javascript函数

> ID：11342561
> 
> 赞同：0
> 
> 时间：2012-07-05T10:35:03.287
> 
> 标签：javascript, html

html 中有 2 个 div，我想在单击 div1 时加载 div2。

每当 div2 加载后退按钮时，也会加载到 div1。

如何在html中做到这一点？

```
<td background="images/bgTd.gif" class="MenuTxt">Trends</td>
  <td width="17">
    <div style="position: relative; left: 0; top: 0;">
      <img src="images/back.png" style="position: relative; top: 0; right: 0;"/>
      <a class="aclass"onclick="plottrend1()">
        <img src="images/back.png" width="17" height="22"style="position: absolute; top: 30; right: 70;"/>
      </a>
  </td>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:52:12.553

在融合图中调用 Java 脚本函数。在您的设置标签中使用以下内容

```
 link="JavaScript:yourfunctionname()" 
```

# java - 使用 JUNG 库显示顶点信息

> ID：11342562
> 
> 赞同：0
> 
> 时间：2012-07-05T10:35:06.857
> 
> 标签：java, swing, jung

当用户单击一个顶点时，我想设置一个显示（部分）顶点属性的面板可见（JUNG 教程使用弹出菜单解释了相同的行为）。有人可以解释一下我必须使用哪个插件吗？

感谢任何提示，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:45:40.460

听起来你需要自己的插件。不过，基本上你只需要监听顶点的点击，所以你可以使用现有的插件来指导大部分内容。填充和显示面板由您决定。

# ruby-on-rails-3 - Ruby on rails 中的库类

> ID：11342564
> 
> 赞同：0
> 
> 时间：2012-07-05T10:35:08.347
> 
> 标签：ruby-on-rails-3

我将在 Ruby on Rails 上开发一个应用程序，它有许多库类。但我没有这样的想法。在 Rails 中是否可能？如果可能，我如何在 Rails 应用程序中开发自己的库类？请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:03:40.020

由于我不太了解您的问题，所以我只能猜测您的意思。

在 ruby​​ 和 ruby​​ on rails 中有几种抽象逻辑的方法。

最通用的方法是创建红宝石。这是一个 ruby​​ 代码包，可以在每个 ruby​​ 项目中使用。可以通过 railties 通过 gems 挂钩到 rails。

有两件事是特定于 Rails 的。第一个是插件，它的工作方式与 gems 非常相似，被认为是提供功能的传统方式，但仍然有一些插件，特别是对于版本 3 之前的 Rails 应用程序。

另一件事是引擎。这些是可以安装到任何 Rails 应用程序中的微应用程序。它们是自包含的，可以根据其命名空间路由提供许多功能。

由于 rails 是基于机架的，因此也可以将任何符合机架的 ruby​​ 应用程序挂接到 rails 路由器。通过这种方法，可以将 Rails 应用程序与 ie 连接起来。sinatra 应用程序。

# .net - 找不到类 DataContractJsonSerializer .net 4.0

> ID：11342565
> 
> 赞同：4
> 
> 时间：2012-07-05T10:35:09.243
> 
> 标签：.net

我正在尝试创建 DataContractJsonSerialize 的对象

使用 System.Runtime.Serialization.Json；不起作用，我使用的是 .Net 4.0 我已经向 System.ServiceModel.Web 添加了一个参考，我也使用了 System.ServiceModel.Web；在我的使用语句中。

我读到的所有地方都说要添加对 System.ServiceModel.Web.dll 的引用，但这并没有为我解决问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T10:46:15.910

根据 MSDN，`DataContractJsonSerializer`实现于`System.Runtime.Serialization.dll`：

> [http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)

确保您有对该程序集的引用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T07:24:30.970

1.  搜索并添加`System.Runtime.Serialization.dll`参考。

2.  然后在指令中使用`System.Runtime.Serialization.Json;`

# android - Android Spinner：如果在 onCreate() 之外调用，则无法选择

> ID：11342573
> 
> 赞同：0
> 
> 时间：2012-07-05T10:35:35.593
> 
> 标签：android, spinner, oncreate

我有以下显示我的问题的最小程序（android 2.2（API 8））：如果我从 onCreate() 调用 start()-Method 一切正常，但如果我从 onWindowFocusChanged() 调用它我不是能够从微调器中选择一个项目。有谁能够帮我？

```
package de.thomasklein1982;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class SpinnerExample extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //call start() from here and everything is just fine
        //start();
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        //call start() from here and it's impossible to select a spinner-item
        start();
    }

    public void start(){
        Spinner spinner=new Spinner(this);
        List<String> list = new ArrayList<String>();
        list.add("Item 1");
        list.add("Item 2");
        list.add("Item 3");
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getBaseContext(),
                    android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(dataAdapter);
        setContentView(spinner);    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T14:01:19.097

当您选择微调器中的任何项目时，也会调用您的 start() 方法。所以它每次都变成一个新创建的，并且默认选择第一个作为列表中的第一个。

# frameworks - QUnit 的替代品

> ID：11342574
> 
> 赞同：4
> 
> 时间：2012-07-05T10:35:38.877
> 
> 标签：frameworks, qunit

QUnit 单元测试框架的最佳替代方案是什么，也易于最终用户学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:37:40.823

你可以试试茉莉花。请参阅这些参考资料，了解 QUnit 和 Jasmine 之间的一些比较：

*   [qUnit vs Jasmine - stackoverflow.com](https://stackoverflow.com/questions/7047419/qunit-vs-jasmine)
*   [在 qUnit 和 Jasmine 之间进行选择 - effectif.com](http://effectif.com/coffeescript/choosing-between-qunit-and-jasmine)

最终用户易于理解 - 最终用户应该做什么？写测试？查看结果并确定产品是否足够稳定？单元测试通常是针对团队的，而不是针对最终用户的（除非最终用户是技术男/女并且能够欣赏单元测试的价值）

# java - JNAerator - 使用 typedef 生成的接口

> ID：11342579
> 
> 赞同：1
> 
> 时间：2012-07-05T10:36:01.053
> 
> 标签：java, c++, jna, jnaerator, bridj

我正在尝试使用 JNAerator 从 typedef 指令生成的接口，但我找不到这样做的方法：

.h 文件中的函数是：

```
MyClass::Initialize(LPCWSTR path); 
```

头文件还包括原始的 typedef 指令：

```
typedef __nullterminated CONST WCHAR *LPCWSTR, *PCWSTR; 
```

JNAerator 生成：

**方法：**

```
public native int Initialize(LPCWSTR path); 
```

**界面：**

```
/// Undefined type
/// Undefined type
public static interface LPCWSTR {

}; 
```

**和课程：**

```
/// C type : WCHAR*
    public Pointer<Short > LPCWSTR() {
        try {
            return (Pointer<Short >)BridJ.getNativeLibrary("dlls").getSymbolPointer("LPCWSTR").as(DefaultParameterizedType.paramType(Pointer.class, Short.class)).get();
        }catch (Throwable $ex$) {
            throw new RuntimeException($ex$);
        }
    }
    /// C type : WCHAR*
    public MainLibrary LPCWSTR(Pointer<Short > LPCWSTR) {
        try {
            {
                BridJ.getNativeLibrary("dlls").getSymbolPointer("LPCWSTR").as(DefaultParameterizedType.paramType(Pointer.class, Short.class)).set(LPCWSTR);
                return this;
            }
        }catch (Throwable $ex$) {
            throw new RuntimeException($ex$);
        }
    } 
```

问题是，我不知道如何`LPCWSTR`使用`Pointer`和`LPCWSTR`接口实例化一个对象，使用一个字符串，以便我可以将它传递给`Initialize`方法。

我怎样才能做到这一点？

**更新：**

我修改了 .h 文件以使用`wchar_t*`：

```
MyClass::Initialize(wchar_t* path) 
```

JNAerator 生成的方法如下：

```
public native int Initialize(Pointer<Character > path); 
```

所以我这样称呼它：

```
MyClass factory = new MyClass();
Pointer<Character> path = org.bridj.Pointer.pointerToWideCString("dlls");
factory.Initialize(path); 
```

问题是我得到以下异常：

```
java.lang.UnsatisfiedLinkError: main.MyClass.Initialize(Lorg/bridj/Pointer;)I 
```

在这一行：

```
factory.Initialize(path); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:21:35.253

`UnsatisfiedLinkError`表示您的本机方法`Initialize`不受 BridJ 约束。

此绑定由[CPPObject](http://nativelibs4java.sourceforge.net/bridj/api/development/org/bridj/cpp/CPPObject.html)的构造函数完成（我假设您有一个继承自它的 JNAerated MyClass 类），并且任何绑定失败都应导致控制台中出现错误日志（无论如何，您可以使用*BRIDJ_VERBOSE增加日志的详细程度=1*环境变量）。

另外，请注意，您`MyClass`应该有一个`@Library("mylibrary")`注释，让它知道在哪里可以找到适当的库（*.dll*、*.so*或*.dylib*），或者应该是具有此类注释的类的内部类。这通常是 JNAerated 类的情况，但如果不是，请在[NativeLibs4Java 的 tracker](https://github.com/ochafik/nativelibs4java/issues/new)中报告错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:22:18.490

我也遇到了这个问题。zOlive 的回应让我走上了正确的道路。我更改了 JNAerator 库选项以匹配我的 DLL 名称（例如`-library MyLib MyLib.dll MyLib.h`）。那为我修好了。[这里](https://code.google.com/p/jnaerator/wiki/CommandLineOptionsAndEnvironmentVariables)有关于库选项的更多信息。

# ruby-on-rails - 在 ruby 中，如何将对象添加到数组中，为每个对象保留一个计数器，并且仍然可以轻松检查对象是否在数组中？

> ID：11342583
> 
> 赞同：0
> 
> 时间：2012-07-05T10:36:19.737
> 
> 标签：ruby-on-rails, ruby

我想编制一份推荐朋友的名单。

我在想的是这样的（这是半伪（sudo）代码！）：

```
recommended_friends = []
friends.each do |friend|
   while recommeded_friends.length < 10
      friend.friends.each do |friend|
         if friend.in?(recommeded_friends)
             recommeded_friends[friend][counter] += 1
         else
             recommeded_friends << [friend, 0]
         end
      end
    end
end 
```

但这显然行不通。你们将如何处理这个问题？

感谢您的任何建议。

表格（一些被缩短）：

```
Users:
id | name 

Friendships
id | user_1_id | user_2_id | requested_at | accepted_at | declined_at | 
```

user1 和 user2 之间的友谊在数据库中只发生一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:40:55.590

更新。尝试这样的事情，它应该工作：

```
recommended_friends = {}
friends.each do |friend|
   if recommeded_friends.length < 10
      friend.friends.each do |other_friend|
         if other_friend != this_user          # exclude myself 
           recommeded_friends[other_friend] =
             (recommeded_friends[other_friend] | 0) + 1
         end
      end
   end
end
recommendend_friends.sort_by{|key, value| value}.reverse
top_ten = recommended_friends.first(10).map{|a| a[0]} 
```

SQL 版本：

```
Users.find_by_sql([
  "SELECT u.*
   FROM 
   (SELECT f2.id, f2.user_1_id u_1_id, f2.user_2_id u_2_id, (count(f1.id)) cnt
      FROM friendships f1 
      JOIN friendships f2 ON f1.user_1_id = f2.user_1_id
                          OR f1.user_2_id = f2.user_1_id
                          OR f1.user_2_id = f2.user_2_id
                          OR f1.user_1_id = f2.user_2_id
      WHERE (f1.user_1_id = ? OR f1.user_2_id = ?)
        AND (f2.user_1_id <> ? AND f2.user_2_id <> ?)
      GROUP BY f2.id, f2.user_1_id, f.user_2_id
      HAVING count(f2.id) = 1
      ORDER BY cnt DESC) fs
   JOIN friendships ff ON ff.user_1_id = fs.u_1_id
                       OR ff.user_2_id = fs.u_1_id
                       OR ff.user_2_id = fs.u_2_id
                       OR ff.user_1_id = fs.u_2_id
   JOIN users u ON 
     CASE WHEN (ff.user_1_id = fs.u_1_id OR ff.user_2_id = fs.u_1_id) 
                THEN fs.u_2_id ELSE fs.u_1_id END = u.id ", 
 user.id, user.id, user.id, user.id]).first(10) 
```

理论上应该可以的，试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:41:54.670

recommeded_friends 将始终保持为空数组。你不能这样做：recommeded_friends < 10

试试这个：recommeded_friends.length < 10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:21:48.097

我能想到的最简单的方法：

```
 recommended_friends = friend.friends.sort do |a,b|
   a <=> b # insert your ranking algorithm here
 end.take 10 
```

# java - 活动将服务与应用程序上下文绑定-> 配置更改后按回时服务泄漏

> ID：11342584
> 
> 赞同：0
> 
> 时间：2012-07-05T10:36:27.803
> 
> 标签：java, android, android-service

我有一个在用户交互时启动更多自身实例的活动。此活动绑定到维护蓝牙连接的服务。目前这是这样实现的：

```
@Override
public void onResume()
{
    super.onResume();
    //bind the activity to the service when it is not bound yet.
    if (!this.isBound)
    {
        //Application context, because the Connection shall be kept over configuration change, and the activity will be replaced then.
        Intent serviceIntent = new Intent(this.getApplicationContext(), ConnectionService.class);
        bindService(serviceIntent, this.connection, Context.BIND_AUTO_CREATE);
        this.isBound = true;
    }
    else
    {
        this.connection = (ServiceConnection)getLastNonConfigurationInstance();
    }
    this.visible = true;
}

/**
 * Saves the bound state.
 */
@Override
public void onSaveInstanceState(Bundle outState)
{
    outState.putBoolean("isBound", this.isBound);
}

/**
 * Loads the bound state.
 */
@Override
public void onRestoreInstanceState(Bundle inState)
{
    this.isBound = inState.getBoolean("isBound");
}

/**
 * Called by system, gives the current ServiceConnection to the system to be retrieved again after restart.
 */
@Override
public Object onRetainNonConfigurationInstance() {
    return this.connection;
}

@Override
public void onPause()
{
    //unbind the activity to the service when it is finishing.
    super.onPause();
    this.visible = false;
    if (this.isFinishing() && this.isBound)
    {
        unbindService(this.connection);
        this.isBound = false;
    }
} 
```

现在我的问题是：当我在应用程序运行时更改方向时，一切正常，我按下后退按钮。然后

```
07-05 12:07:03.039: E/ActivityThread(17850): Activity mm.android.prototype.uilayer.DatapointActivity has leaked ServiceConnection mm.android.prototype.uilayer.DatapointActivity$1@408bcbb8 that was originally bound here  

07-05 12:07:03.039: E/ActivityThread(17850): android.app.ServiceConnectionLeaked: Activity mm.android.prototype.uilayer.DatapointActivity has leaked ServiceConnection mm.android.prototype.uilayer.DatapointActivity$1@408bcbb8 that was originally bound here 
```

写在 Log 上，应用在 unbind 命令的 onPause() 方法中崩溃。我已经在谷歌论坛上阅读了 Dianne Hackborn 关于这件事的帖子，我不能依赖 ServiceConnection，但我没有找到任何解决方案来应对它。你能帮我摆脱这个错误和/或解释为什么我的应用程序会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:51:22.230

我通过将 ServiceConnection 设为静态并在 myActivity 的每个实例中重用它来解决它。我还添加了一个统计实例的静态计数器，如果最后一个实例关闭，则取消绑定。这也解决了配置更改问题：

```
private boolean isBound = false;

private static int bindCount = 0;

// handles the service connection.
protected static ServiceConnection connection = new ServiceConnection(){
// ...
}

@Override
public void onResume()
{
    super.onResume();
    //bind the activity to the service when it is not bound yet.
    if (!this.isBound)
    {
        if (bindCount == 0) {
            //Application context, because the Connection shall be kept over configuration change, and the activity will be replaced then.
            Intent serviceIntent = new Intent(this.getApplicationContext(), ConnectionService.class);
            bindService(serviceIntent, DatapointActivity.connection, Context.BIND_AUTO_CREATE);
            this.isBound = true;
        }
        bindCount++;
        this.isBound = true;
    }
    this.visible = true;
}

/**
 * Saves the bound state.
 */
@Override
public void onSaveInstanceState(Bundle outState)
{
    outState.putBoolean("isBound", this.isBound);
}

/**
 * Loads the bound state.
 */
@Override
public void onRestoreInstanceState(Bundle inState)
{
    this.isBound = inState.getBoolean("isBound");
}

@Override
public void onPause()
{
    //unbind the activity of the service when it is finishing.
    super.onPause();
    this.visible = false;
    if (this.isFinishing())
    {
        if(bindCount <= 1 && this.isBound )
        {
            unbindService(DatapointActivity.connection);                
        }
        bindCount--;
    }

} 
```

# google-bigquery - 文件的其余部分未处理

> ID：11342586
> 
> 赞同：0
> 
> 时间：2012-07-05T10:36:38.293
> 
> 标签：google-bigquery

状态显示为成功，但文件实际上并未传输到大查询。

```
# bq show -j abc

  Job Type    State      Start Time      Duration   Bytes Processed  
 ---------- --------- ----------------- ---------- ----------------- 
  load       SUCCESS   05 Jul 15:32:45   0:26:24 
```

从网络界面，我可以看到实际的错误。

```
Line:9732968, Too few columns: expected 27 column(s) but got 9 column(s)
Line:10893908 / Field:1, Bad character (ASCII 0) encountered. Rest of file not processed. 
```

1) 我如何知道需要删除哪个坏字符？

2) 为什么“成功”显示为工作状态？

**更新：**

作业编号：summary_2012_07_09_to_2012_07_10a2

我在命令提示符处遇到的错误：加载操作中的 BigQuery 错误：后端错误

很多行根本没有处理。Web界面的详细信息：

行：9857286 / 字段：1，遇到错误字符（ASCII 0）：字段开头：<15>

行：9857287 / 字段：1，遇到错误字符 (ASCII 0)。其余文件未处理。

* * *

在第二次尝试中成功处理的所有行：

job_id：**summary_2012_07_09_to_2012_07_10a3**

**更新 2：**

行：174952407 / 字段：1，遇到错误字符 (ASCII 0)。其余文件未处理。

作业编号：job_19890847cbc3410495c3cecaf79b31fb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:33:30.573

很抱歉响应缓慢，假期周末意味着 bigquery 团队的大多数人都没有回答支持问题。“坏字符”看起来可能是某些 gzip 压缩文件的已知错误，我们在文件末尾不正确地检测到 ascii 0 值。

如果作业实际上失败但报告成功，这听起来像是一个问题，但我们需要失败作业的作业 ID 才能进行调试。此外，如果您可以重现它，那将很有帮助，因为我们可能不再拥有原始工作的日志。

# android - 渲染纹理和轨迹不消失

> ID：11342589
> 
> 赞同：3
> 
> 时间：2012-07-05T10:36:45.900
> 
> 标签：android, opengl-es, framebuffer, render-to-texture

我正在尝试使用点精灵来实现烟花，然后通过将烟花渲染到两个不同的纹理来绘制轨迹，然后每隔一次将它们相互拉回，并将 alpha 设置为 < 1，从而使之前的每次绘制逐渐消失。

它看起来不错，并且取决于我在绘制先前渲染的纹理时使用的 alpha，轨迹会变长或变短，正如预期的那样。但是，在大多数设备（不是全部）上，这些轨迹永远不会完全消失。在它们应该消失之后，它们会留下非常透明但仍然引人注目的痕迹。

这就是我目前所做的：

根据名为 second 的布尔值，我将帧缓冲区设置为渲染到名为 buff1 和 buff2 的两个纹理之一。

```
((GL11ExtensionPack)gl).glBindFramebufferOES(GL11ExtensionPack.GL_FRAMEBUFFER_OES, myFBO.get(0));
if (second){
    ((GL11ExtensionPack)gl).glFramebufferTexture2DOES(GL11ExtensionPack.GL_FRAMEBUFFER_OES, GL11ExtensionPack.GL_COLOR_ATTACHMENT0_OES, GL10.GL_TEXTURE_2D, buff2.texture.textureId, 0);
} else {
    ((GL11ExtensionPack)gl).glFramebufferTexture2DOES(GL11ExtensionPack.GL_FRAMEBUFFER_OES, GL11ExtensionPack.GL_COLOR_ATTACHMENT0_OES, GL10.GL_TEXTURE_2D, buff1.texture.textureId, 0);
}
gl.glViewport(0, 0, bufferSize, bufferSize);
gl.glClearColor(0, 0, 0, 0);
gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA); 
```

然后我在当前的纹理上渲染之前绘制的纹理，使用的 alpha 值 < 1。buff 对象只是绘制带有纹理的四边形的助手。draw 函数将 alpha 预乘到其他颜色通道。

```
// a = alpha, higher value = longer trails = more distinct leftovers
if (second){
    buff1.setColor(1, 1, 1, a);
    buff1.draw(gl);
    second = false;
else {
    buff2.setColor(1, 1, 1, a);
    buff2.draw(gl);
    second = true;
} 
```

之后我绘制点精灵烟花。还使用预乘 alpha 和 gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

最后，我重置了帧缓冲区，并让我的新纹理包含了旧轨迹的褪色和顶部的当前烟花以 100% 的 alpha 绘制。然后我使用这个纹理与烟花纹理后面和前面的所有其他对象一起绘制到我的场景中。

正如我所说，几乎一切都在工作，除了那些几乎透明的痕迹在痕迹应该已经消失后留下。绘制前一个缓冲区的 alpha 值越高，永久保留的痕迹“剩余物”就越明显。

我一直在尝试不同的混合模式，预乘而不是预乘 alpha 等。但由于这是一个 android opengl es 1.1，我认为混合应该是 GL_ONE 和 GL_ONE_MINUS_SRC_ALPHA，因为默认情况下所有位图都是预乘的。

我究竟做错了什么？有一个更好的方法吗？

感谢您的帮助，安德斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:19:28.440

> 我究竟做错了什么？

您对缩小（在它们的值中）图像求和的方式实际上是一个幂级数，可以将您的 alpha 值指数化。这样的幂级数将渐近为零，但永远不会达到它。

> 有一个更好的方法吗？

其实这是正确的做法。您刚刚忘记了最后一步：您希望添加一些阈值，以便将低于某个 alpha 值的值限制为零。最容易做到这一点的是添加 GL_GREATER alpha 测试，阈值略高于您想要删除的轨迹的 alpha 值。

# android - Android“返回”按钮操作

> ID：11342592
> 
> 赞同：6
> 
> 时间：2012-07-05T10:36:53.557
> 
> 标签：android

我可以将默认的 Android 'Back' 按钮的操作分配给另一个按钮吗？我的意思是无需编写代码，是否有预定义的“返回”方法？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T10:37:56.647

onClick 按钮添加`onBackPressed();`

```
public void onClick(){

  onBackPressed();

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T10:42:11.813

有两种方法可以达到您的目的：

第一：覆盖`onBackPressed`你的方法`Activty`：

```
@Override
    public void onBackPressed()
    {
        super.onBackPressed();
    } 
```

第二：覆盖`onKeyDown`并寻找`KeyEvent.KEYCODE_BACK`

```
public boolean onKeyDown(int keyCode, KeyEvent event){
        if (keyCode == KeyEvent.KEYCODE_BACK)
        {

        }
        return false;
    } 
```

如果你想结合两者（假设你想要 menuButton 上的 backAction，它看起来像这样：

```
public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode == KeyEvent.KEYCODE_MENU)
        {
                onBackPressed();
        }
        return false;
    } 
```

# oracle - APEX：在验证之后但在处理之前调用 JavaScript 函数

> ID：11342593
> 
> 赞同：2
> 
> 时间：2012-07-05T10:36:53.837
> 
> 标签：oracle, oracle10g, oracle-apex

我的任务是在 Application Express (Apex) 中重新创建一个旧的 PL/SQL Web Toolkit 前端。

我想在页面提交**后以及计算和验证后**显示一个弹出窗口。

该页面可以通过单击按钮或按 Enter 提交。

我已经用谷歌搜索并得到了一个模态弹出窗口（由 javascript 调用），但我似乎无法在正确的位置调用它。我可以在提交时调用它（在验证之前等），但不能在验证之后调用它。

我尝试在正确的处理点创建一个指向 URL 的分支，然后将 URL 设置为：

```
javascript:openForm(); 
```

但是后来我得到一个页面不会显示错误。

任何人都可以解释我怎么能做到这一点？

Apex 版本：4.0.2 Oracle 10g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:50:51.543

我想您想要做的是执行验证，将值提交到会话状态，但不执行进一步的过程。但是，当您提交页面时，它会发送到服务器；并且您在页面处理区域中看到的所有内容都会依次触发。没有办法在进程中途调用 javascript 函数，因为基本上你不再在客户端了。

您可以做的是在验证到同一页面后创建一个分支。重定向到它但提供一个`REQUEST`值，例如`OPENFORM`.

创建一个动态动作，在页面加载时触发，使用执行 javascript 并打开模态页面的真实动作。然后将动态操作的条件设置为`Request = Expression 1`，将请求值提供给表达式 1 ( `OPENFORM`)。（请注意，这是条件**区域**，而不是“时间”区域的“条件”字段）

这应该会导致页面被提交、验证，然后重新加载但带有请求值，并且动态操作触发，打开您的模式页面。

只是一个兴趣点：如果您在此页面上有实际流程，请小心使用 Enter 键。默认情况下，按钮提交到会话，请求值设置为其名称，因此可以有条件地执行流程或分支。我相信输入键没有提交请求值集。因此，如果您的分支是有条件的，则回车键可能会简单地跳过它。

# ruby - 使用“调试器”gem 在 Emacs 中调试 Ruby 1.9

> ID：11342596
> 
> 赞同：2
> 
> 时间：2012-07-05T10:37:06.910
> 
> 标签：ruby, emacs

我正在使用**调试器**gem 来调试我在 Windows 上用 Ruby 1.9 编写的代码。如何将它集成到 Emacs 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:06:22.997

你知道 Emacs dbgr 吗？

[https://github.com/rocky/emacs-dbgr](https://github.com/rocky/emacs-dbgr)

它具有 ruby​​-debug 的内置功能，包括 .el 源文件，对您来说可能是一个很好的起点。

# asp.net - Thread.CurrentPrincipal 不能设置为表单身份验证主体

> ID：11342598
> 
> 赞同：1
> 
> 时间：2012-07-05T10:37:15.733
> 
> 标签：asp.net, https, forms-authentication, iprincipal

我有一个 WCF 服务，它托管在 ASP.NET MVC 应用程序中（如[http://msdn.microsoft.com/en-us/library/aa702682.aspx](http://msdn.microsoft.com/en-us/library/aa702682.aspx)中所述）。部分 MVC 操作和 WCF 服务操作受到保护，我对两者都使用 ASP.NET 表单身份验证：

```
// protected MVC action
[Authorize]
public ActionResult ProtectedMvcAction(string args)

// protected WCF operation
[PrincipalPermission(SecurityAction.Demand, Role = "User")]
public void ProtectedWcfOperation(string args) 
```

我的 WCF 客户端确保表单身份验证`.ASPXAUTH`cookie 在每次 WCF 调用时传输到服务器。

这在很长一段时间内都非常有效。现在我正在`HTTPS`使用`SSL`证书向我的服务器添加加密。这需要我对 Web.config` 进行以下更改：

```
<basicHttpBinding>
  <binding name="ApiServiceBinding">
    <security mode="Transport">
      <transport clientCredentialType="None" />
    </security>
  </binding>
</basicHttpBinding> 
```

服务被激活，客户端可以调用服务器操作。但是，`[PrincipalPermission]`受保护的服务器操作前面的属性突然阻止了所有服务调用。我发现了以下内容：

*   在 HTTP 情况下（没有`<security mode="Transport">`），两者`Thread.CurrentPrincipal`和`HttpContext.Current.User`都设置为一个`RolePrincipal`实例，属性中有一个`FormsIdentity`实例`RolePrincipal.Identity`。在这种情况下，一切正常。
*   在 HTTPS 情况下（`<security mode="Transport">`在 web.config 中），该属性`HttpContext.Current.User`仍设置为`RolePrincipal/FormsIdentity`组合。但是，属性`Thread.CurrentPrincipal`突然设置为`WindowsPrincipal/WindowsIdentity`实例，这使得`[PrincipalPermission]`属性抛出异常。

我尝试了以下方法：

*   将 更改`AppDomain.CurrentDomain.SetPrincipalPolicy`为每个可能的值（在`Global.asax`'s中`Application_Start`），但这并没有改变任何东西。
*   `Thread.CurrentPrincipal`在 中设置属性`Application_PostAuthenticate`，但在`Application_PostAuthenticate`实际服务调用之间，`Thread`'再次`CurrentPrincipal`更改为 a `WindowsPrincipal`。

有什么提示吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:57:19.210

这解决了它：

[http://www.codeproject.com/Articles/304877/WCF-REST-4-0-Authorization-with-From-Based-authent](http://www.codeproject.com/Articles/304877/WCF-REST-4-0-Authorization-with-From-Based-authent)

我修改了这段代码以涵盖 Windows 和 Forms 端点以及相同的服务 - 这也有效 -

```
public bool Evaluate( EvaluationContext evaluationContext, ref object state )
{
    bool ret = false;
    // get the authenticated client identity
    HttpCookie formsAuth = HttpContext.Current.Request.Cookies[ ".MyFormsCookie" ];
    if( null != formsAuth )
    {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt( formsAuth.Value );
        if( null != ticket )
        {
            GenericIdentity client = new GenericIdentity( ticket.Name, "Forms" );

            // set the custom principal
            CustomPrincipal p = new CustomPrincipal( client );
            p.RoleManagerProvider = "Internet";
            evaluationContext.Properties[ "Principal" ] = p;

            ret = true;
        }
    }
    else
    {
        CustomPrincipal p = new CustomPrincipal( HttpContext.Current.User.Identity );
        p.RoleManagerProvider = "Intranet";
        evaluationContext.Properties[ "Principal" ] = p;

        // assume windows auth
        ret = true;

    }
    return ret;
} 
```

它会查找表单身份验证 cookie，如果不存在则尝试使用 Windows 身份验证。我还“翻转”了内部和外部的角色提供者

这允许我将用户凭据从 Internet（通过转发 cookie）和 Intranet（使用 Windows 约束委派）传播到相同的内部服务。

我在 config 中进行了配置（而不是按照示例的代码），看起来不错。

对于行为，它类似于：

```
 <behavior name="FormsPaymentsBehavior">
          <serviceAuthorization principalPermissionMode="Custom" >
            <authorizationPolicies>
              <add policyType="FormsPolicy.AuthorizationPolicy,FormsPolicy" />
            </authorizationPolicies> 
          </serviceAuthorization> 
```

这用于两个端点，因为 FormsPolicy（上图）处理这两个端点，您不能为不同的端点指定不同的行为。

绑定在适当的端点上强制执行 Windows 凭据握手：

```
<basicHttpBinding>
        <binding name="WindowsHttpBinding">
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
          </security>
        </binding>
        <binding name="FormsHttpBinding" allowCookies="true">          
          <security mode="None">
            <transport clientCredentialType="None" />            
          </security>
        </binding>
      </basicHttpBinding> 
```

运输方式可以更改为

```
<security mode="Transport">
            <transport clientCredentialType="None" />
          </security> 
```

对于https，它工作正常。

对于您的自定义主体，我发现我必须明确调用角色管理器

```
...

public bool IsInRole( string role )
        {
            RoleProvider p = Roles.Providers[ RoleManagerProvider ];
            return p.IsUserInRole( Identity.Name, role );
        }

        public String RoleManagerProvider { get; set; } 
```

...

我猜这是因为我不再使用任何 aspnet 兼容的东西。因为我根据我的身份验证类型来翻转角色管理器，所以嗡嗡声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:19:24.253

我也遇到过这个问题，这里有另一个报告（和我的）。[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8f424d4f-2f47-4f85-a6b0-00f7e58871f1/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/8f424d4f-2f47-4f85-a6b0-00f7e58871f1/)

此线程指向正确的解决方案是创建自定义授权策略 (http://msdn.microsoft.com/en-us/library/ms729794.aspx) 和此代码项目文章 (http://www.codeproject. com/Articles/304877/WCF-REST-4-0-Authorization-with-From-Based-authent) 似乎准确地解释了如何为 FormsAuth 执行此操作 - 设置 evaluationContext.Properties["Principal"] = new CustomPrincipal(client ) 根据 MS 评论。

我还没有实现这个——我的“快速修复”是简单地恢复到一个普通的旧 asmx 服务——但我会“试一试”一段时间！

如果您找到其他解决方案 - 请告诉我。

# python - 如何将 python 装饰器应用于函数？

> ID：11342606
> 
> 赞同：-8
> 
> 时间：2012-07-05T10:37:59.203
> 
> 标签：python, decorator

> **可能的重复：**
> [理解 Python 装饰器](https://stackoverflow.com/questions/739654/understanding-python-decorators)

您能否给出一个简短的代码示例来解释装饰器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:40:47.620

```
def spam(func):
    def wrapped(*args, **kwargs):
        print "SPAM"
        return func(*args, **kwargs)
    return wrapped

@spam #this is the same as doing eggs = spam(eggs)
def eggs():
    print "Eggs?" 
```

请注意，您还可以使用类来编写装饰器

```
class Spam(object):
    def __init__(self, func):
        self.func = func

    def __repr__(self):
        return repr(self.func)

    def __call__(self, *args, **kwargs):
        print "SPAM"
        return self.func(*args, **kwargs)

@Spam
def something():
    pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:38:24.413

装饰器接受函数定义并创建一个执行该函数并转换结果的新函数。

```
@deco
def do():
    ... 
```

相当于：

```
do = deco(do) 
```

例子：

```
def deco(func):
    def inner(letter):
        return func(letter).upper()  #upper
    return inner  # return a function object

#This
@deco
def do(number):
    return chr(number)  # number to letter
#end

# is equivalent to this
def do2(number):
    return chr(number)

do2 = deco(do2)
#end

# 65 <=> 'a'
print(do(65))
print(do2(65))
>>> B
>>> B 
```

要理解装饰器，重要的是要注意，装饰器创建了一个新的函数*do*，它是*内部*的，它执行*func*并转换结果。

# mysql - 如何在存储过程或事件中备份 mysql 数据库？

> ID：11342608
> 
> 赞同：1
> 
> 时间：2012-07-05T10:38:07.683
> 
> 标签：mysql, database, backup

有没有办法在 mysql 中使用事件调度程序备份数据库？我想在 phpmyadmin 中运行此事件，现在我有一个用于备份单个表的代码，但我希望它是单个数据库文件。这可能吗？

# android - 在android中使用选择器进行图像视图

> ID：11342610
> 
> 赞同：0
> 
> 时间：2012-07-05T10:38:10.953
> 
> 标签：android, android-imageview

我有大约 6 张图像，我在我的应用程序中用作选项卡。它只是图像，它们不是 android 提供的选项卡。
所以我的问题是，当我单击图像时，我想用另一个图像替换图像，以便它可以让用户知道选择了哪个选项卡。
我所做的是在我的布局中为此创建不同的 xml。但是这样做很乏味，因为我不能为每个图像创建不同的 xml。
我现在要做的是使用这个但没有得到结果。

怎么可能用于这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:15:00.603

它非常简单。您不必为每个图像/选项卡制作不同的 xml。您只需制作一个 xml 并将此 xml 包含在需要这些图像的每个 xml 中..在 xml 中仅设置一个图像为选中，其余未选中.假设image1保持image1选中，其余未选中。单击image2将重定向到activity2。在activity2中设置image2选中，其余未选中，其余活动相同。这种方式将是最简单的方法。相信我，我有实现了这一点，也会对你有所帮助。你可以问我任何类型的问题。

我已经完成了 4 张图片，但在你的情况下将有 6 张。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
    <Button 
        android:id="@+id/btn1"
        style="@style/toolButton"
        android:background="@drawable/image1"           
        android:gravity="center"
        />

    <Button 
        android:id="@+id/btn2"
        style="@style/toolButton"
        android:background="@drawable/image2"
        android:gravity="center"
        />

    <Button 
        android:id="@+id/btn3"
        style="@style/toolButton"
        android:background="@drawable/image3"
        android:gravity="center"/>

    <Button 
        android:id="@+id/btn4"
        style="@style/toolButton"
        android:background="@drawable/image4"
        android:gravity="center"
       />
    </LinearLayout>
</RelativeLayout> 
```

这里是 style.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="toolButton">
        <item name="android:layout_width">0dp</item>
        <item name="android:layout_height">45dip</item>
        <item name="android:gravity">center_horizontal</item>
        <item name="android:layout_gravity">center_vertical</item>
        <item name="android:layout_weight">5</item>
        <item name="android:layout_marginBottom">0dip</item>
        <item name="android:layout_marginTop">0dip</item>
    </style>

</resources> 
```

# c - ARMv5 程序集中的 PUSH/POP

> ID：11342612
> 
> 赞同：1
> 
> 时间：2012-07-05T10:38:12.020
> 
> 标签：c, assembly, arm, push, calling-convention

我是 ARMv5 汇编编码的新手。

假设我希望使用 CALL_VM_FUNCTION 从我的汇编代码中调用一个 C 函数。我的 C 函数使用三个参数。在调用 C 函数之前，我将参数保存在哪些寄存器中？为此是否有特定的约定？

除此之外，我想确保在 C 函数调用完成之前和之后，寄存器保留这些值。push 和 pop 指令会完全解决这个问题吗？

例如：

```
PUSH {a1-a4}  /*values held in registers a1-a4 are saved*/    
/*instruction to pass arguments in the registers for C function call*/    
CALL_VM_FUNCTION(C-function)
POP {a1-a4} 
```

提前致谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:15:07.650

如果您有需要保存在任何调用破坏寄存器中的数据，则必须`push`在调用之前保存它们（例如使用 ）。这与参数传递无关；这只是为了避免被调用者破坏您自己的数据。特别是，`lr`除非您的函数永远不会返回，否则您必须始终保存。

至于如何传递参数，不是将 a1-a4 压入堆栈。前 4 个整数/指针参数直接进入 a1-a4*寄存器*。之后，他们进入堆栈。浮点和聚合类型的事情变得有点复杂，所以你最好阅读 ABI：

[http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf](http://infocenter.arm.com/help/topic/com.arm.doc.ihi0042d/IHI0042D_aapcs.pdf)

# sql - 如何通过更新两个字段来插入记录？

> ID：11342614
> 
> 赞同：0
> 
> 时间：2012-07-05T10:38:22.437
> 
> 标签：sql, oracle

我有一个包含 5 个字段的表。5列中的一列是PK。我的要求是我需要根据某些列（非重复但不是 PK）获取行，并且对于所有返回的结果，我需要分配新的 PK 并保存。

如果我的表中有 10 条记录。如果我根据某个列获得 10 条记录。我需要为所有 10 条记录分配新的 PK 并保存。最后，表中将有 20 条记录。是否有执行此操作的单个 SQL 查询？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:46:21.517

```
--  create a sequence to manage the primary keys
create sequence key_sequence;

--  i don't know what data you want in your table
create table tempTable (
myKey int primary key,
myValue varchar(12))

--  create four rows of arbitrary data, they will get primary keys of 1,2,3 and 4
insert into tempTable values (key_sequence.nextval, 'eggs')
insert into tempTable values (key_sequence.nextval, 'bacon')
insert into tempTable values (key_sequence.nextval, 'chips')
insert into tempTable values (key_sequence.nextval, 'salad')

--  you can see the 4 rows
select * from tempTable

--  select all four rows (as no where clause) and re-insert them into the table
--  the sequence will take care of allocating new primary keys
insert into tempTable
select  key_sequence.nextval, myValue 
from    tempTable

--  now you can see eight rows in the table
select * from tempTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:43:31.990

IF col1 是 PK（用于自动增量列）

```
insert into table (col1, col2, col3, col4, col5) 
    select null, col2, col3, col4, col5 
    from table 
    where col2 = 'anyvalue' and more conditions... ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:43:45.833

我不确定我是否正确理解了您，但这会满足您的需要吗？

由于您没有提供太多详细信息，因此您必须填写空白！

```
INSERT INTO <table> (
   pk_col,
   col2,
   col3,
   col4,
   col5
)
   SELECT <new_pk>,
          col2,
          col3,
          col4,
          col5
     FROM <table>
    WHERE <your search criteria>; 
```

希望能帮助到你...

# python - 检查 wx.lib.scrolledpanel.ScrolledPanel 当前是否正在滚动

> ID：11342620
> 
> 赞同：0
> 
> 时间：2012-07-05T10:38:34.220
> 
> 标签：python, wxpython, wxwidgets

我正在尝试在 wx.lib.scrolledpanel 中使用 ScrolledPanel，并且我想检查 ScrolledPanel 的滚动条当前是否可见，因此我可以为我的 StaticText 提供正确的换行宽度。因为当滚动条可见时，我需要从换行宽度中再删除 10 个像素左右...

有人知道这是怎么做到的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T09:56:37.697

我通过获取滚动面板内的父小部件的宽度而不是滚动面板本身的宽度来解决这个问题。

有时答案是如此明显:)

# python - 在 mod_python (apache) 中设置和读取 cookie

> ID：11342626
> 
> 赞同：0
> 
> 时间：2012-07-05T10:38:44.753
> 
> 标签：python, apache, cookies, session-cookies, mod-python

我已经看到很多解释如何读写 cookie 的东西，但是，我不知道如何在 apache 的 mod_python 中做到这一点。我试着把它放在我的 HTML 代码的开头，但它说把它放在 HTTP 标头中。我怎么做？另外，我该如何找回它们？我最初主要看这个网站： [http ://webpython.codepoint.net/cgi_set_the_cookie](http://webpython.codepoint.net/cgi_set_the_cookie)

我的代码目前是这样开始的（它显示为 HTML 的一部分）

```
Content-Type: text/html
Set-Cookie: test=1
<html>
    <head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:21:49.933

mod_python 不是 CGI，并提供了自己的方式来设置和读取 cookie：

```
from mod_python import Cookie, apache
import time

def handler(req):
    # read a cookie
    spam_cookie = get_cookie(req, 'spam')

    # set a cookie
    egg_cookie = Cookie.Cookie('eggs', 'spam')
    egg_cookie.expires = time.time() + 300
    Cookie.add_cookie(req, egg_cookie)

    req.write('<html><head></head><body>There's a cookie</body></html>')
    return apache.OK 
```

您可以在此处找到更多文档： [http ://www.modpython.org/live/current/doc-html/pyapi-cookie.html](http://www.modpython.org/live/current/doc-html/pyapi-cookie.html)

# c++ - Json cpp asCstring() 存储在变量中时返回空 cstring

> ID：11342627
> 
> 赞同：1
> 
> 时间：2012-07-05T10:39:01.257
> 
> 标签：c++, json, jsoncpp

我正在使用 Json-cpp 来解析我的配置文件，并且我使用[asCString()](http://jsoncpp.sourceforge.net/class_json_1_1_value.html#5b7da48b163bcec63b1424f1608b7da6)得到了一些奇怪的行为。谁能解释为什么 2 的输出为空？

```
#include <iostream>
#include <fstream>
#define JSON_IS_AMALGAMATION
#include "json/json.h"
using std::cout;
using std::endl;

int main(int argc, char** argv) {
    Json::Value root;
    Json::Reader reader;
    std::ifstream config("dev.json", std::ifstream::binary);
    if (!reader.parse(config, root, false)) {
      cout << "Could not parse json" << endl;
      return 1;
    }
    std::string str = root["redis"].get("host", "localhost").asString();
    const char* cstr = root["redis"].get("host", "localhost").asCString();
    cout << "1:" << str << endl;
    cout << "2:" << cstr << endl;
    cout << "3:" << std::string(root["redis"].get("host", "localhost").asCString()) << endl;
    config.close();
    return 0;
} 
```

输出：

```
c++ -o test test.cpp jsoncpp.cpp
1:127.0.0.2
2:
3:127.0.0.2 
```

我的json数据：

```
{ "redis": { "host": "127.0.0.2", "port": 6379 } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:49:02.110

我怀疑`root["redis"].get("host", "localhost")`or`root["redis"]`返回 a `Value`，而不是对 a 的引用`Value`。该`Value`对象将一直存在到表达式结束，在`2`临时`Value`对象的情况下将被销毁，并`cstr`作为悬空指针留下。取消引用悬空指针时行为未定义。

在 的情况下`1`，`str`是`std::string`返回的副本`asString()`。

在 的情况下`3`，临时变量`Value`将一直存在到表达式 (the `;`) 结束，从而允许成功处理`const char*`返回的 by 。`asCString()`

要解决，要么：

*   更改`cstr`to的类型，`std::string`它将复制返回的`const char*`，或
*   `Value`制作返回的副本`get()`并查询它，而不是`root[]`.

编辑：

基于此[来源](http://jsoncpp.sourceforge.net/json__value_8cpp_source.html)，所有变体都`Value.get()`返回 a `Value`。所以原因如前所述。

# android - thread.stop() 异常

> ID：11342630
> 
> 赞同：3
> 
> 时间：2012-07-05T10:39:14.090
> 
> 标签：android, multithreading, android-event

我希望当用户打开应用程序播放歌曲并且歌曲完成时会触发一个新活动，我放了一个跳过按钮以允许用户停止歌曲并转到下一个活动，这是代码

```
timer = new Thread() {
            public void run() {
                try {
                    sleep(13000);
                } catch (InterruptedException e) {
                    // TODO: handle exception
                } finally {
                    Intent openStartingPoing = new Intent(
                            "com.localizedbasedcompetition.SIGNIN");// action
                                                                    // name
                    startActivity(openStartingPoing);
                }
            }
        };
        timer.start(); 
```

这是跳过按钮的onclick

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bSplashSkip:
            timer.stop();
            Intent openStartingPoing = new Intent(
                    "com.localizedbasedcompetition.SIGNIN");// action name
            startActivity(openStartingPoing);
            break;

        default:
            break;
        }
    } 
```

并且该代码运行良好，我的意思是如果我单击跳过按钮歌曲停止并且新活动开始，但我的问题是即使也很好，我有一个异常（但应用程序仍然有效）并且应用程序是

```
07-05 13:34:19.687: E/global(26114): Deprecated Thread methods are not supported.
07-05 13:34:19.687: E/global(26114): java.lang.UnsupportedOperationException
07-05 13:34:19.687: E/global(26114):    at java.lang.VMThread.stop(VMThread.java:85)
07-05 13:34:19.687: E/global(26114):    at java.lang.Thread.stop(Thread.java:1280)
07-05 13:34:19.687: E/global(26114):    at java.lang.Thread.stop(Thread.java:1247)
07-05 13:34:19.687: E/global(26114):    at com.localizedbasedcompetition.Splash.onClick(Splash.java:73)
07-05 13:34:19.687: E/global(26114):    at android.view.View.performClick(View.java:2552)
07-05 13:34:19.687: E/global(26114):    at android.view.View$PerformClick.run(View.java:9229)
07-05 13:34:19.687: E/global(26114):    at android.os.Handler.handleCallback(Handler.java:587)
07-05 13:34:19.687: E/global(26114):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-05 13:34:19.687: E/global(26114):    at android.os.Looper.loop(Looper.java:130)
07-05 13:34:19.687: E/global(26114):    at android.app.ActivityThread.main(ActivityThread.java:3701)
07-05 13:34:19.687: E/global(26114):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 13:34:19.687: E/global(26114):    at java.lang.reflect.Method.invoke(Method.java:507)
07-05 13:34:19.687: E/global(26114):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
07-05 13:34:19.687: E/global(26114):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
07-05 13:34:19.687: E/global(26114):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T10:42:06.287

使用 timer.interrupt() 而不是 .stop()。正如您的日志所说，不推荐使用 Thread.stop() 。

# css - 由于最小高度，jQuery Mobile 打破了样式

> ID：11342636
> 
> 赞同：0
> 
> 时间：2012-07-05T10:39:44.947
> 
> 标签：css, jquery-mobile

我正在为客户建立一个测试移动网站：http: [//preview.stafforce.co.uk/mobile/](http://preview.stafforce.co.uk/mobile/)

如您所见，在移动设备或桌面上使用正确的视口大小加载网站后，您将看到一个带有三个选项的红色框。红色框是页面本身被一类splash告知为红色。（我最初将它作为一个单独的 DIV，它使用固定位置位于页面顶部，但在定位方面存在一些问题）。

在桌面上这工作正常，但在移动设备上，例如使用 Safari 的 iPhone，当工具栏消失和/或您滚动/更改方向时，您会看到一个黑条，这是因为主体出现，因为 div 没有占用完整屏幕大小（jq mobile 使用最小高度，这是使用框架完成的以实现这一点）。

有想法该怎么解决这个吗？或者有类似的问题？还注意到，在进行过渡时，它们在某些地方似乎又被切断了，这可能是由于这个最小高度没有让事情变得正确。

例子：

![在此处输入图像描述](../Images/cb88b0246063d9a5f26702c05475a55e.png)

**编辑：我将 body 更改为黑色的原因是因为当你进行翻转过渡时，这是你在后面看到的，黑色是在 iPhone 等手机上进行过渡时背景的正确颜色。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:58:52.037

您应该使用 Jquery mobile 增强的“listview”并将您的内容保存在 DIV 中，并使用 data-role='content'。Jquery mobile 将使您的内容全屏显示。您不应手动设置列表视图或其他任何样式。

这是演示：http: [//jsfiddle.net/nachiket/YSp3x/](http://jsfiddle.net/nachiket/YSp3x/)

我没有设置图标和你的标志，但你会明白的。如果可能的话，使用[Jquery mobile Theme Roller](http://jquerymobile.com/themeroller/index.php)进行基本样式设置，并在其之上进行自定义。

**编辑：** 您可以在具有 data-role="page" 的 div 上设置颜色。

喜欢：

```
.myPage {
    background-color:#ff0000; 
    background-image:none;
}​ 
```

在 HTML 中

```
<div data-role="page" class="myPage"> 
```

我已经更新了 jsfiddle 链接。

# python - 使用python获取这一行的最后一项

> ID：11342638
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:40:00.297
> 
> 标签：python

我有输出`['Q 0006 005C 0078 0030 0030 0033 0034 ONE_OF 0002 ']`我只想要 0002 最后一项以及如何从输出中删除这些 [' ']

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:48:02.930

假设输入是一个列表：

```
>>> x=['Q 0006 005C 0078 0030 0030 0033 0034 ONE_OF 0002 ']
>>> x[0].split()[-1].strip()
'0002' 
```

或者如果它是一个字符串：

```
>>> x="['Q 0006 005C 0078 0030 0030 0033 0034 ONE_OF 0002 ']"
>>> x.split()[-2].strip()
'0002' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:42:04.363

```
>>> 'Q 0006 005C 0078 0030 0030 0033 0034 ONE_OF 0002 '.split()[-1]
'0002' 
```

# android - ANDROID：如果列表视图元素有 url，则使其可点击

> ID：11342641
> 
> 赞同：0
> 
> 时间：2012-07-05T10:40:09.450
> 
> 标签：android, url, listview

我有这个代码：

```
import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Bookmarks extends ListActivity{
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bookmarks);
    Database info=new Database(this);
    info.open();
    String data=info.getData();
    String[] data_array = data.split(",");
    info.close();
    ListView listView1 = (ListView) findViewById(R.id.list_mia);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, data_array);
    listView1.setAdapter(adapter);
    listView1.setOnItemClickListener(){
        public void onItemClick(AdapterView<?> a, View v, int position, long id){
            if(data_array[position].startsWith("http://")){
                //do this
            }else{
                //do this
            }
        }
    }
}
} 
```

这是正常工作。如果它有一个网址，我怎样才能使该项目可点击？我在网上尝试了各种帮助，但我无法让它工作！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:46:32.797

试试这个

```
listView.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
  if(data_array[position].startsWith("http://")){
//do this
}
else{
//do this
}
 }
}); 
```

# javascript - 数据绑定页面中的“系统未定义”错误

> ID：11342643
> 
> 赞同：2
> 
> 时间：2012-07-05T10:40:13.060
> 
> 标签：javascript, asp.net, data-binding, formview, sys

我有一个带有生成“系统未定义”错误的表单视图的页面。

这是唯一存在此问题的页面，因此它不是 web.config 错误或 IIS 配置错误。

该页面包含一个带有三个模板（项目、插入和编辑）的表单视图。里面还有一些下拉列表控件，它们自己进行数据绑定以填充其列表项。

问题和解决方案！：在仔细卸载我的页面并逐步重新安装以捕获问题的根源后，我得到数据绑定到页面的 DropDownLists（页面充当数据源）是错误发电机。

我太“白痴”了，处理了 Dropdownlists 的 ObjectDataSource.ObjectCreating 事件以将页面实例设置为 ObjectInstance，但没有处理 ObjectDisposing 以取消对象实例 dispose。而且（瞧！），出现“系统未定义”错误！！！

这是一只蝴蝶在日本扇动翅膀，在美国引发地震的案例！！！

我希望读完这篇文章后没有其他人会被这种类型的错误抓住。

# python - 尝试安装 numpy 1.7

> ID：11342647
> 
> 赞同：2
> 
> 时间：2012-07-05T10:40:28.127
> 
> 标签：python, numpy, python-2.7

我目前正在使用 Python 2.7 和 Numpy 1.6.2。我想使用[`numpy.polyfit()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.polynomial.polyfit.html)带有权重参数的函数。但是，似乎 weights 参数在 numpy 1.6.2 中不可用。Sourceforge[下载链接](http://sourceforge.net/projects/numpy/files/NumPy/)显示 1.6.2 是最新版本。我找到了[`polynomial.py`](https://github.com/numpy/numpy/blob/master/numpy/lib/polynomial.py#L394)包含`polyfit()`函数权重参数的更新文件。我只是用`polynomial.py`网站上的更新版本替换了我的当前版本。但是，当我尝试运行 Python 程序时，出现错误：

```
Traceback (most recent call last):
  File "C:\Python27\first.py", line 13, in <module>
    import matplotlib
  File "C:\Python27\lib\site-packages\matplotlib\__init__.py", line 133, in <module>
    from matplotlib.rcsetup import (defaultParams,
  File "C:\Python27\lib\site-packages\matplotlib\rcsetup.py", line 19, in <module>
    from matplotlib.colors import is_color_like
  File "C:\Python27\lib\site-packages\matplotlib\colors.py", line 52, in <module>
    import numpy as np
  File "C:\Python27\lib\site-packages\numpy\__init__.py", line 153, in <module>
    import polynomial
  File "C:\Python27\lib\site-packages\numpy\polynomial\__init__.py", line 18, in <module>
    from polynomial import Polynomial
ImportError: cannot import name Polynomial 
```

`first.py`只是我要运行的所有代码的文件

我究竟做错了什么？有没有另一种方法可以简单地获得最新版本的 Numpy (1.7?) ？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:04:05.300

NumPy中有两个文件被调用`polynomial.py`；`lib/polynomial.py`和`polynomial/polynomial.py`。你换错了。

我不知道 1.7.x for Windows 的任何开发版本；如果您对自己构建包感到满意，那么您可以使用 git 下载源代码并按照[https://github.com/numpy/numpy/blob/master/doc/HOWTO_RELEASE.rst.txt](https://github.com/numpy/numpy/blob/master/doc/HOWTO_RELEASE.rst.txt)和链接资源的说明构建它。

# arrays - 为什么我的 PowerShell 脚本提示允许将项目添加到数组？

> ID：11342648
> 
> 赞同：0
> 
> 时间：2012-07-05T10:40:28.383
> 
> 标签：arrays, powershell, scripting

我有一个带有以下摘录的 PowerShell 脚本：

```
foreach ($pc in $ComputerName) {
  $appnames = $appnames | Sort-Object
  Write-Debug "Number of entries in `$appnames = $($appnames.count)"
  if ($AsHTML) {#Switch Parameter
    Write-Verbose "Generating HTML Report..."
    $th = "<TR><TH>Application Name</TH>" #Create Top header
    foreach ($pc in $ComputerName) {
       $th += "<TH>$pc</TH>" #Another header for each pc
    }
    $th += "</TR>" #Header finished
    $rows = ""
    foreach ($app in $appnames) {
      $rows += "<TR><TH>$app</TH>"
      foreach ($pc in $ComputerName) {
        Write-Debug $RegistryEntries[$pc].Value[$app]
        $currentApp = $RegistryEntries[$pc].Value[$app]
        if ($currentApp) {
          if ($currentApp.DisplayVersion) {
            $status = $currentApp.DisplayVersion
          } else {
            $status = "Version-nr. N/A"
          }
        } else {
          $status = "Application N/A"
        }
        $rows += "<TD>$status</TD>" #Intersection cell for each pc
      }
      $rows += "</TR>"
    }
    Write-Verbose "Finishing html report..."
    $html = "
    <html>
      <head>
        <style>
          body { background-color:#FFFFCC;
          font-family:Tahoma;
          font-size:12pt; }
          td, th { border:1px solid #000033;
          border-collapse:collapse; }
          th { color:white;
            background-color:#000033; }
          table, tr, td, th { padding: 0px; margin: 0px }
          table { margin-left:10px; }
        </style>
        <Title>Application versions Report</Title>
      </head>
      <body>
        <table>
          $th
          $rows
        </table>
      </body>
    </html>"
  }
} 
```

所以，稍微解释一下上面的文字墙；

*   $RegistryEntries 是哈希表的哈希表，顶级键是计算机名称，低级哈希表键是注册表卸载部分中的应用程序名称。Application-name-keys 的对应值是具有三个通用属性的自定义 PSObject：.Displayname、.DisplayVersion 和 .UninstallString。（并非所有对象都具有这三个属性，但每个对象至少具有一个）。
*   我希望用这个 HTML 表实现的是获得某种“数据透视表”（参考 Wikipedia entry for Pivot Tables，但不完全），我可以在其中获得 Y 轴上的应用程序名称和计算机名称在 X 轴上，以及在它们相交的所述计算机上的所述应用程序的版本号。

因此，再次考虑到这一点，有人可以帮助我理解为什么我的脚本在运行时会在 shell 中提示我允许将应用程序名称添加到数组 $appnames（脚本中的其他位置），以及对 HTML 执行相同操作被放入 $rows 的输入？

另一件事有点偏题（甚至可能是题外话），我的 $RegistryEntries 对象，哈希表的哈希表，由于某种原因无法以我在以下两行中的方式访问：

```
Write-Debug $RegistryEntries[$pc].Value[$app]
$currentApp = $RegistryEntries[$pc].Value[$app] 
```

谁能告诉我为什么？

总结/TL; DR：

1.  为什么我的函数在尝试将项目添加到脚本内创建的数组时提示我允许在 shell 中执行此操作？

2.  使用我上面描述的自定义对象保存我想要在我的 HTML 表中显示的数据，我在上面的代码摘录中尝试访问它时做错了什么？

PS：该脚本的工作原理是，如果我坐在 shell 中的所有提示中，一直按 A + Return，我将获得我想要的那种 HTML 表格，但是应用程序所在的所有单元格名称间隙计算机名称将显示“应用程序不适用”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T13:55:23.313

我猜你有你的`$DebugPreference`和/或`VerbosePreference`设置为`Inquire`每次都会提示`Write-Debug`或`Write-Verbose`分别被调用：

```
Confirm
Continue with this operation?
[Y] Yes  [A] Yes to All  [H] Halt Command  [S] Suspend  [?] Help (default is "Y"): 
```

您可能希望将它们设置为`Continue`。另一个来源可能是`-Debug`开关。

关于您的第二个问题，解释起来有点长，但是对于命令的参数，您必须将这些表达式放在括号中：

```
Write-Debug ($RegistryEntries[$pc].Value[$app])
$currentApp = $RegistryEntries[$pc].Value[$app] 
```

# iphone - 如何将用户应用内购买信息移动到其他应用？

> ID：11342651
> 
> 赞同：2
> 
> 时间：2012-07-05T10:40:42.700
> 
> 标签：iphone, in-app-purchase

我的应用程序目前在 App Store 中。

稍后我将从 AppStore 中删除此应用并提交一个新应用。

所以，旧的应用内购用户信息必须转移到新的应用中。

什么是最好的方法？有安全的方法吗？

如何写出最好的代码？有示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:12:04.380

没有官方的、受支持的方式来执行此操作。也就是说，您的新应用永远无法像旧应用那样“恢复购买”。

我想您可以在旧应用程序中有一个按钮（或 URL 方案），将数据发送到新应用程序（使用 URL 方案）。当然，除非你小心，否则这可能是伪造的。

您还需要注意传输的数据。例如，如果您在新应用中规避 IAP，Apple 可能会拒绝。

# c# - 如何在不使用 TaskCreationOptions.AttachedToParent 的情况下等待所有任务（创建的任务和子任务）

> ID：11342652
> 
> 赞同：5
> 
> 时间：2012-07-05T10:40:44.790
> 
> 标签：c#, .net, parallel-processing, task-parallel-library, thread-synchronization

我将不得不创建一个创建多个任务的并发软件，每个任务都可以生成另一个任务（也可以生成另一个任务，...）。

我需要调用阻塞启动任务的方法：在所有任务和子任务完成之前不返回。

我知道有这个`TaskCreationOptions.AttachedToParent`属性，但我认为它不适合：

服务器至少有8个核心，每个任务会创建2-3个子任务，所以如果我设置`AttachedToParent`选项，我的印象是第二个子任务不会在第一个子任务的三个任务之前启动结束。所以我将在这里进行有限的多任务处理。

所以有了这个进程树：

![在此处输入图像描述](../Images/7fa33a969863c196b1976b4e7b84a3f4.png)

我的印象是，如果我每次启动线程时都设置 AttachedToParent 属性，B 不会在 E、F、G 完成之前结束，所以 C 将在 B 完成之前开始，我将只有 3 个活动线程而不是 8 个我可以有。

如果我不放置 AttachedToParent 属性，A 将很快完成并返回。

那么，如果我不设置此选项，我该如何确保我的 8 个内核始终得到充分利用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:45:01.010

正如 Me.Name 所提到的，`AttachedToParent`不会根据您的印象行事。我认为在这种情况下这是一个不错的选择。

但是，如果您出于某种原因不想使用它，则可以等待所有子任务完成[`Task.WaitAll()`](http://msdn.microsoft.com/en-us/library/dd270695.aspx). 尽管这意味着您必须将所有这些都放在一个集合中。

`Task.WaitAll()`阻塞当前线程，直到所有`Task`s 完成。如果您不希望这样并且您使用的是 .Net 4.5，则可以使用[`Task.WhenAll()`](http://msdn.microsoft.com/en-us/library/hh139093%28v=vs.110%29)，它将返回一个单曲，该单曲`Task`将在所有给定`Task`的 s 完成时完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:07:50.070

不会阻止其他子任务启动，`TaskCreationOptions.AttachedToParent`而是阻止父任务本身关闭。因此，当 E、F 和 G 以 AttachedToParent 启动时，B 不会被标记为已完成，直到所有三个都完成。所以它应该按照你的意愿去做。

[来源](http://social.msdn.microsoft.com/Forums/en-US/parallelextensions/thread/6e142b15-0e41-4cbc-bccc-bb7bdebe0795/)（在接受的答案中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T16:52:37.150

您可以`TaskFactory`像在此示例中那样创建选项：

```
Task parent = new Task(() => { 
var cts = new CancellationTokenSource(); 
var tf = new TaskFactory<Int32>(cts.Token,  
                                        TaskCreationOptions.AttachedToParent,  
                                        TaskContinuationOptions.ExecuteSynchronously,  
TaskScheduler.Default); 

 // This tasks creates and starts 3 child tasks 
 var childTasks = new[] { 
       tf.StartNew(() => Sum(cts.Token, 10000)), 
       tf.StartNew(() => Sum(cts.Token, 20000)), 
       tf.StartNew(() => Sum(cts.Token, Int32.MaxValue))  // Too big, throws Overflow
 }; 

// If any of the child tasks throw, cancel the rest of them 
for (Int32 task = 0; task <childTasks.Length; task++) 
  childTasks[task].ContinueWith( 
     t => cts.Cancel(), TaskContinuationOptions.OnlyOnFaulted); 

// When all children are done, get the maximum value returned from the  
// non-faulting/canceled tasks. Then pass the maximum value to another  
// task which displays the maximum result 
tf.ContinueWhenAll( 
   childTasks,  
   completedTasks => completedTasks.Where( 
     t => !t.IsFaulted && !t.IsCanceled).Max(t => t.Result), CancellationToken.None) 
   .ContinueWith(t =>Console.WriteLine("The maximum is: " + t.Result), 
      TaskContinuationOptions.ExecuteSynchronously); 
}); 

// When the children are done, show any unhandled exceptions too 
parent.ContinueWith(p => { 
    // I put all this text in a StringBuilder and call Console.WriteLine just once  
    // because this task could execute concurrently with the task above & I don't  
    // want the tasks' output interspersed 
    StringBuildersb = new StringBuilder( 
                      "The following exception(s) occurred:" + Environment.NewLine); 

    foreach (var e in p.Exception.Flatten().InnerExceptions)  
         sb.AppendLine("   "+ e.GetType().ToString()); 

    Console.WriteLine(sb.ToString()); 
  }, TaskContinuationOptions.OnlyOnFaulted);

  // Start the parent Task so it can start its children 
  parent.Start(); 
```

# javascript - 与 SlickGrid 复选框格式化程序/编辑器不一致的数据

> ID：11342653
> 
> 赞同：0
> 
> 时间：2012-07-05T10:40:47.260
> 
> 标签：javascript, slickgrid

我正在查看`SlickGrid`'s `editors`/ `formatters`features 以了解这些将如何修改`data`用于构建网格的对象（因为据我了解，对表所做的修改会自动复制到`data`对象中）。

我正在查看一个特定示例，该示例显示了如何`booleans`将其编辑和格式化为复选框（而不是处理一个`true`或`false`字符串），并注意到复制到`data`对象的值是不一致的。

要了解我的意思，请编辑`effortDriven`前 4 行的列，如下所示：
-**任务 0**：请勿触摸
-**任务 1**：检查
-**任务 2**：请勿触摸
-**任务 3**：选中和取消选中

![在此处输入图像描述](../Images/e07633245a04b7b3790dba4596cab95f.png)

现在在你的萤火虫控制台中，提醒数据对象：

![在此处输入图像描述](../Images/62a65f51fad1606f1a3cf31624bc0fbe.png)

以下是您将获得的`effortDriven`字段值：
-**任务 0**：`true`
-**任务 1**：`checked`
-**任务 2**：`false`
-**任务 3**：`(void 0)`

正如你所看到的，对于一个最初应该是 a 的字段`boolean`，我们最终得到了 4 个不同的值。作为一般评论，我认为逻辑`formatters/editors`只是检查可视化，但保持`data`对象的完整性：**因此，我强烈建议人们在使用`SlickGrid`时仔细检查他们的`data`对象是如何更新的`formatters/editors`，并且不要假设数据完整性被保留**）。

**如何确保我的`data`对象保留 2 个`boolean`值，同时仍使用 UI 上的复选框？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:40:48.803

编辑`CheckboxEditor`函数`slick.editors.js`如下：

```
this.applyValue = function (item, state) {
  //item[args.column.field] = state;  <-- remove that line, add lines below
  if (state == 'checked') {
      item[args.column.field] = true;
  } else {
      item[args.column.field] = false;  
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:52:21.280

我也发现了这个问题。在自定义`CheckboxEditor`中`slick.editors.js`只需更改值序列化器：

```
function CheckboxEditor(args) {

    ...

    this.serializeValue = function () {
        return $select.attr("checked") ? true : false;
    };

    ...

} 
```

# c# - 使用 FireFox 在 asp.net 4.0 中进行本地化

> ID：11342655
> 
> 赞同：4
> 
> 时间：2012-07-05T10:40:47.930
> 
> 标签：c#, asp.net, firefox, localization

我需要用芬兰语本地化我的项目。我在工作中使用了 asp.net 4.0 (c#)。我遵循了所有必要的步骤来做到这一点。例如，我想本地化我的 Default.aspx 页面。为此，我在本地资源文件夹中创建了一个名为“Default.aspx.fi-FI.resx”的资源文件。我已在此资源文件中设置了所有必要的键/值对，并在浏览器中设置了必要的更改。我的目的是完美地使用 Internet Explorer 中的服务器。但它在 Firefox 中不起作用。迫切需要与 Firefox 一起使用它。任何人都可以帮我做到这一点吗？

提前致谢。

BR，戈拉姆拉比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:44:54.833

显示的语言将由 Firefox 在请求标头中设置为首选语言的语言确定。

要更改此设置，在 Firefox 中，转到工具 -> 选项 -> 内容选项卡 -> 语言 -> 选择并将芬兰语设置为首选语言。

# opencv - 在windows中安装OpenCV

> ID：11342660
> 
> 赞同：3
> 
> 时间：2012-07-05T10:41:02.600
> 
> 标签：opencv

我正在尝试在 Windows 中安装 opencv。手册（secn 1.4）说“选择一个构建[例如vs2010，win32]并下载”，但只有完整的可执行文件可用（2.4.2）。所以我下载了那个文件，然后扩展成几个目录。但是，此目录列表与该部分第 7 项下显示的内容不匹配 - 主要是缺少“bin”目录。所以我想除了点击可执行文件之外还需要做更多的事情。

在“build”目录下，我看到了 x86/vc10/bin（我猜 vc10 代表 Visual c++ 2010）。但是如何安装这些并将 Visual Studio 2010 与它链接呢？手册只说设置“OPENCV_DIR”变量，它下面应该有“bin”，但我没有。

这似乎是任何新用户在安装 opencv 时都会面临的真正问题。有关如何为 windows+visual studio 2010 安装的任何正确说明和链接？

更新：下面发布了完整的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T10:26:43.897

经过大量实验，我得到了 opencv-2.4.2(win-exe) + vstudio2010-express 一起工作。感谢 Abid 提供了一个有用的链接，另一个有用的链接是[http://blog.hcilab.org/bastian/2012/06/installing-opencv-2-4-windows-7-visual-studio](http://blog.hcilab.org/bastian/2012/06/installing-opencv-2-4-windows-7-visual-studio)

以下是完整的步骤列表：

*   设置系统 var OPENCV_DIR = install_dir\build
*   设置系统 var TBBROOT = tbb_install_dir
*   路径 += ;%OPENCV_DIR%\x86\vc10\bin;%TBBROOT%\bin\ia32\vc10
*   创建空项目：File->New->Project->Win32ConsoleApp
*   在 project->Properties 中添加以下项目：
    *   配置属性->VC++目录->包含：$(OPENCV_DIR)\include;$(TBBROOT)\include
    *   Linker->General->AdditionalLibDirs: $(OPENCV_DIR)\x86\vc10\lib;$(TBBROOT)\lib\ia32\vc10
    *   Linker->Input->AdditionalDeps：添加来自 opencv 和 tbb 的 lib 项（在 Debug 和 Release 模式下）。
        *   有关要包含哪些文件的详细信息，请参阅[http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to)
*   从上面的站点下载图像显示测试文件，将其保存在项目目录中。但是该页面中的 Test.cpp 需要更多的输入，所以它并不容易工作。相反，请使用[http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html#display-image中的代码](http://docs.opencv.org/doc/tutorials/introduction/display_image/display_image.html#display-image)
*   Properties->ConfigProps->Debugging->CommandArgs：提及要加载的文件名
*   Tools->Option->Debugging->Symbol->MS-Server=yes（这消除了大部分“PDB not found”错误）
*   Tools->Settings->ExpertSettings=on（这也消除了一些错误）
*   将 tbb_debug.dll 和 tbb.dll 从 TBBROOT\bin\ia32\vc10 复制到项目目录（我不知道为什么这些没有通过上面的设置自动拾取）
*   Ctrl+F5 运行（不调试启动）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:51:10.173

我认为你的安装没问题。只需要用VS配置

1.  在项目属性 > C/C++ > 添加*附加包含目录*：**C:\opencv\build\include;C:\opencv\build\include\opencv**

2.  C/C++ > Linker > Input add *Additional Dependencies* : **C:\opencv\build\x86\vc9\lib\opencv_core231.lib
    C:\opencv\build\x86\vc9\lib\opencv_flann231.lib
    C:\opencv\build\ x86\vc9\lib\opencv_highgui231.lib
    C:\opencv\build\x86\vc9\lib\opencv_imgproc231.lib**
    和更多如果需要

3.  添加值为*C:\opencv\build\x86\vc10\bin的***OPENCV_DIR**环境变量

 *更多详细信息请关注这个[OpenCV 2.1 with MS Visual Studio](http://opencv.willowgarage.com/wiki/VisualC%2B%2B)*

# java - 绘制点之间的路径

> ID：11342661
> 
> 赞同：2
> 
> 时间：2012-07-05T10:41:04.477
> 
> 标签：java, android, google-maps, path, android-maps

我在谷歌地图上工作。我想在 5 到 6 个节点之间创建一个路径，我的意思是在点之间画一条线。

以下类是绘图的内部类：

```
class MyOverlay extends Overlay{
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        Paint  mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        GeoPoint gP1 = new GeoPoint(19240000,-99120000);
        GeoPoint gP2 = new GeoPoint(37423157, -122085008);
        GeoPoint gP3 = new GeoPoint(20000000 , -50000000) ; 
        GeoPoint[] G = new GeoPoint[3] ;
        G[1] = gP1 ; 
        G[2] = gP2 ; 
        G[3] = gP3 ; 
        Point p1 = new Point();
        Point p2 = new Point();
        Point p3 = new Point () ; 
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);
        projection.toPixels(gP3, p3) ; 
        //path.moveTo(p2.x, p2.y);
        //path.lineTo(p1.x,p1.y);
        //path.lineTo(p3.x, p3.y) ;       
        //canvas.drawLines(pts , mPaint) ; 
        canvas.drawPath(path, mPaint);
    }
} 
```

这两行代码是`onCreate()`外部类中方法的代码：

```
 projection = mapView.getProjection();

 mapOverlays.add(new MyOverlay()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:36:06.237

上面的答案是正确的 - 问题是你没有`Point`在你的`Path`. 有关与您正在做的事情完全相同的事情，请参阅[此答案。](https://stackoverflow.com/a/2184239/1345119)此外，`draw()`每次地图需要重新绘制路线时都会执行，这基本上是地图移动的任何时候。我有一个应用程序，我在上面绘制路线`MapView`，让我告诉你，如果你的路线变长，你的地图可能会变得迟钝。所以我会把你的`Paint`东西放在你的类的构造函数中，这样你就不会在每次重绘路由时都创建一个新对象。另外，如果您打算绘制多个点，我会使用`for`类似于此的循环：

```
Path path = new Path();
for(GeoPoint g : arrayOfGeoPoints) {
            Point next = new Point();
            projection.toPixels(g, next);
            path.lineTo(next.x, next.y);
            path.moveTo(next.x, next.y);
        }
canvas.drawPath(path, myPaint); 
```

它很简单，但可以快速有效地迭代多个点。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:32:39.183

我对 GeoPoint 或 MapView 不熟悉，所以您可能还有其他问题，但我可以指出显而易见的：

您已注释掉生成路径的行，因此您正在绘制一个空路径。`path.`如果您取消注释以（但保留注释）开头的三行，假设没有其他错误`canvas.drawLines(...)`，您*应该*有一行 from `p2`to`p1`和另一行 from `p1`to 。`p3`

# javascript - jquery或jquery mobile中的分页

> ID：11342664
> 
> 赞同：0
> 
> 时间：2012-07-05T10:41:27.900
> 
> 标签：javascript, jquery, jquery-mobile, pagination, jquery-pagination

我正在开发一个应用程序，我需要在其中实现分页以更改图像。我正在使用的代码是。

索引.html

```
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<link rel="stylesheet" href="css/demo.css" type="text/css" media="screen" />
</head>

<body>

<div class="imagesScreen" id="imagesScreen">

            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            <img style="border-radius:10px;height:70px;width:70px;margin:10px;" src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />              
</div>

 </body>
 </html> 
```

这里根据上面的代码，我在页​​脚标签中有两个按钮（上面没有提到代码）。在每个页面中，我想显示大约 6-10 张图像，当我单击同一页面中的下一个按钮或上一个按钮时，需要使用分页技术更改数据。在这里，我获取了静态数据，但在我的应用程序中，数据在运行时来自服务器。所以，我需要创建动态数据。

根据链接[分页链接](http://thomaslanciaux.pro/jquery/jquery_carousel.htm)here一次获取一张图像。但我想要大约 6-10 张图片，如下图所示。当我点击下一个按钮页面需要相同但数据必须根据[分页链接](http://thomaslanciaux.pro/jquery/jquery_carousel.htm)更改。

![在此处输入图像描述](../Images/a3f5af53db26c94bca19484ecd2abad6.png) 任何人都可以帮助我了解如何获得那种类型的分页技术以及如何创建 div 和图像标签（和标签）的动态数据，因为我希望按照下面显示的黑莓图像查看视图。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:51:55.413

这是一个相当合乎逻辑的功能。首先，我假设您使用限制 SELECT * FROM `images`ORDER BY `time`DESC LIMIT 0, 9使用 SQL 提取数据

我假设您将 PHP 用于服务器端脚本，如果没有，请尝试将其适应您的语言。假设我们有一个用于页面 ID 的`GET`值，`page=123`当然`123`是一个任意数字；我们需要从开始拉图像`page number * items per page`，例如，在 page `2`，我们得到`2 * 9`which is `18`，所以我们的第一张图片应该是 picture `18`。现在我继续在`LIMIT`SQL 查询中使用正确的子句：

PHP：

```
$start = $_GET['page'] * $items_per_page; 
```

SQL：

```
SELECT * FROM `images` ORDER BY `time` DESC LIMIT {$start}, {$items_per_page} 
```

这就是它的基本要点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:45:57.963

您可以尝试以下 URL 作为参考。

[http://cssglobe.com/lab/easypaginate/02.html](http://cssglobe.com/lab/easypaginate/02.html)

谢谢

# entity-framework - 在 Linq to Entities 中，您可以将 IQueryable 转换为 SQL 字符串吗？

> ID：11342669
> 
> 赞同：4
> 
> 时间：2012-07-05T10:41:55.967
> 
> 标签：entity-framework, linq-to-entities

例如。

```
var result = myObject.Where(x => x.prop == 5);

string s = result.toSQL(); 
```

结果：

`s`是`"SELECT * FROM [myObjects] WHERE prop = 5"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T11:36:02.103

如果是`IQueryable`/`ObjectQuery`你可以使用[`ToTraceString`](http://blog.cincura.net/227674-how-to-show-sql-command-created-by-entity-framework/). 如果是 IDbSet/DbSet 可以`ToString`直接使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T11:51:05.937

使用 EF 6 我无法让 .ToString() 返回类似以下内容的 SQL：

```
 db.Entry(parent)
   .Collection(p => p.Children)
   .Query()
   .Where(c => c.Active)
   .Load(); 
```

然后我记得您可以使用以下命令将其记录到调试输出：

```
db.Database.Log = (entry) => System.Diagnostics.Debug.WriteLine(entry); 
```

只需在加载查询之前进行上述设置（duh）:)

**这里的db**是一些 DbContext 派生类的实例。

# java - 如何使用 GWT 将日期时间字符串转换为日期？

> ID：11342670
> 
> 赞同：16
> 
> 时间：2012-07-05T10:41:58.487
> 
> 标签：java, gwt, datetime, date

在 mysql 中，我有一个 datetime 类型的字段 time_entered（示例数据：2012-06-20 16:00:47）。我还有一个方法 getTimeEntered()，它以字符串形式返回值。我想使用 GWT 中的 DateTimeFormat 以 2012-06-20 格式显示日期。

这是我的代码：

```
String date = aprHeaderDW.getTimeEntered();
DateTimeFormat fmt = DateTimeFormat.getFormat("MM-dd-yyyy");
dateEntered.setText("" + fmt.format(date)); 
```

问题是，格式方法不接受字符串形式的参数。因此，如果只有一种方法可以将日期从 String 类型转换为 Date 类型，它可能会起作用。我尝试了类型转换，但没有奏效。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-05T10:50:13.153

您应该可以只使用[DateTimeFormat](http://www.gwtproject.org/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)。

```
Date date = DateTimeFormat.getFormat("yyyy-MM-dd HH:mm:ss").parse("2012-06-20 16:00:47");
String dateString = DateTimeFormat.getFormat("yyyy-MM-dd").format(date); 
```

否则，有一个支持此模式[的 SimpleDateFormat 的轻量级版本。](http://gwt-widget.sourceforge.net/docs/apidocs/org/gwtwidgets/client/util/SimpleDateFormat.html)

```
Date date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2012-06-20 16:00:47"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:01:39.593

您好，有两种选择。

第一个是因为它已经是一个字符串，您可以使用正则表达式来修改格式。

第二个是使用 SimpleDateFormater 您可以将字符串解析为日期然后再返回。例如：

```
public class DateMerge {

    public static void main(String arg[]) 
    {
        String out = dateConvert("2012-06-20 16:00:47");
        System.out.println(out);
    }

    public static String dateConvert (String inDate)
    {
        try {
         DateFormat formatter ; 
         Date date ; 
          formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
          date = (Date)formatter.parse(inDate);
          formatter = new SimpleDateFormat("dd-MM-yyyy");
          String outDate = formatter.format(date);
          return outDate;

          } catch (ParseException e)
          {System.out.println("Exception :"+e);  }  

    return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T11:08:00.807

你可以这样使用。

```
 String date = "2012-06-20 16:00:47";

    SimpleDateFormat sf=new SimpleDateFormat("yyyy-MM-dd");
    String lDate=sf.format(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(date));

    System.out.println(lDate); 
```

**输出：**

```
2012-06-20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T15:45:29.527

在尝试了很多次之后，我想出了一个基于@Keppil 并添加我自己的代码的解决方案。

这是 Keppil 建议的将 String datetime 转换为 Date 类型的解决方案：

```
Date date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse("2012-06-20 16:00:47"); 
```

...但我的第二个要求是仅显示日期，例如 2012-06-20。即使我删除了 HH:mm:ss，它仍然显示像这样的时间 2012-06-20 00:00:00。

这是我的最终解决方案：

```
Date date = null;
String d = rs.getString(SQL_CREATION_TIME); // assigns datetime value from mysql

// parse String datetime to Date
try {
date = new SimpleDateFormat("yyyy-MM-dd").parse(d);
System.out.println("time entered: "+  date);
} catch (ParseException e) { e.printStackTrace(); }

// format the Date object then assigns to String
Format formatter;
formatter = new SimpleDateFormat("yyyy-MM-dd");
String s = formatter.format(date); 
```

# sql - 如何在插入和更新时检查表中的重复记录

> ID：11342671
> 
> 赞同：0
> 
> 时间：2012-07-05T10:42:01.723
> 
> 标签：sql, tsql, sql-server-2005

我需要在插入和更新时检查表中的重复记录。以下是我的查询。在插入的情况下它工作正常，但在更新时失败。我无法弄清楚。请帮我。

```
Insert:

Set @Count =  (Select ISNULL(Count(*),0) From AccountMaster Where [Name] = @Name and Id=@Id and Flag=1);
If @Count >0 and @InsertUpdateFlag=1
  BEGIN
    Set @DbErrormessage = 'Business Name and Account Id must be unique. Try again.';
  END 
```

更新 ：

```
Set @Count =  (Select Count(*) From AccountMaster Where [Name] = @Name and Id <> @Id and Flag=1);
 If @Count >0 and @InsertUpdateFlag=2
  BEGIN
   Set @DbErrormessage = 'Business Name is in already in use by some other account. Try another one.';
  END 
```

更新的条件是Id和Name不能存在于数据库中。因此，我正在计算名称与任何其他 ID 不存在的情况。但似乎，不工作。

下面是我的表模式。

```
SELECT [PkId] //Primary Key as Int
      ,[Id]  // Unique Key varchar(25)
      ,[Created]
      ,[Type]
      ,[Status]
      ,[Name]  //Business Name
      ,[ContactPerson]
      ,[ContactNumber]
      ,[Email]
      ,[Address]
      ,[LocationId]
      ,[Remarks]
      ,[Flag]
  FROM [AccountMaster] 
```

ID 和企业名称在插入/更新时必须是唯一的。所以我需要在插入和更新时检查它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:46:11.170

将唯一约束放在名称中并忘记检查，您可以处理约束违规，然后您知道名称已经存在

# java - java将字符串[]数组拆分为多个文件

> ID：11342675
> 
> 赞同：0
> 
> 时间：2012-07-05T10:42:05.170
> 
> 标签：java, json, string, file

我在弄清楚如何将字符串拆分为多个文件时遇到问题。目前我应该得到两个包含 JSON 数据的文件。下面的代码写入第一个文件，但第二个为空。任何想法为什么？

```
public void splitFile(List<String> results) throws IOException {

  int name = 0;
  for (int i=0; i<results.size(); i ++) {

    write = new FileWriter("/home/tom/files/"+ name +".json");
    out = new BufferedWriter(write);
    out.write(results.get(i));

    if (results.get(i).startsWith("}")) {
      name++;
    }      
  } 
} 
```

编辑：它在开头的行拆分，`{`因为这表示 JSON 文档的结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:44:08.103

在每个完成的写入序列后，我会关闭您的缓冲写入器。即在您分配`write`给新的`FileWriter()`.

关闭`BufferedWriter`将关闭底层`FileWriter`，*从而强制刷新写入磁盘的数据*。

注意：如果您使用不同的`FileWriter`每个循环，那么我会将该变量范围限定为该内部循环，例如

```
FileWriter write = new FileWriter("/home/tom/files/"+ name +".json"); 
```

对于`BufferedWriter`. 实际上你可以写：

```
BufferedWriter outer = new BufferedWriter(new FileWriter(... 
```

并处理`outer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T10:51:59.923

**加强切割控制**

把这个放在一起：

```
write = new FileWriter("/home/tom/files/"+ name +".json");
out = new BufferedWriter(write); 
```

还有这个：

```
name++; 
```

**检查开始，而不是结束**

检查以 开头的行`{`，然后执行这三行以打开文件。

**记得关闭并冲洗**

如果它不是第一行 ( `i > 0`)，则关闭最后一个编写器 ( `write.close();`)。

**关闭最后打开的 writer**

```
if (!results.isEmpty())
    out.close(); 
```

**结果**

它应该看起来像这样：

```
public void splitFile(List<String> results) throws IOException {

  int name = 0;

  BufferedWriter out = null;
  for (int i=0; i<results.size(); i ++) {
    String line = results.get(i);
    if (line.startsWith("{")) {
       if (out != null) // it's not the first
          out.close(); // tell buffered it's going to close, it makes it flush
       FileWriter writer = new FileWriter("/home/tom/files/"+ name +".json");
       out = new BufferedWriter(writer);
       name++;
    }
    if (out == null)
       throw new IllegalArgumentException("first line doesn't start with {");
    out.write(line);
  } 

  if (out != null) // there was at least one file
     out.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:48:28.210

试试下面的代码..

```
 public void splitFile(List<String> results) throws IOException {

    int name = 0;
    for (int i = 0; i < results.size(); i++) {

        write = new FileWriter("/home/tom/files/" + name + ".json");
        out = new BufferedWriter(write);
        out.write(results.get(i));
        out.flush();
        out.close();  // you have to close your stream every time in your case.

        if (results.get(i).startsWith("}")) {
            name++;
        }
    }
} 
```

# android - 旋转后Android片段堆栈为空

> ID：11342683
> 
> 赞同：3
> 
> 时间：2012-07-05T10:42:37.410
> 
> 标签：android

我正在使用 a在单个活动应用程序中`FragmentActivity`显示堆栈。`Fragments`这工作正常，我可以通过片段移动并回击以返回堆栈，直到我旋转设备，当我最终`Fragment`旋转堆栈顶部时，但点击后退按钮将我带回根`Fragment`目录之间的所有其他`Fragment`s 都消失了。

我正在使用以下代码将 a 添加`Fragment`到堆栈中：

```
FragmentTransaction transaction = getFragmentManager().beginTransaction();
transaction.replace(R.id.mainContentViewContainer, newFragment, "DetailFragment");
transaction.addToBackStack(null);
transaction.commit(); 
```

什么可能导致旋转后堆栈为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:45:06.543

强制 android 不重新启动 Activity，添加`android:configChanges`到`AndroidManifest.xml`，是错误的。

牢记这一点：

> 什么可能导致旋转后堆栈为空？

由于 Android 的行为，当您旋转屏幕时 MainActivity 将重新启动。`android:configChanges`您可以使用AndroidManifest 文件的选项覆盖此行为。

```
android:configChanges="orientation|screenSize" 
```

# javascript - blackberry.io.dir.appDirs 未定义

> ID：11342686
> 
> 赞同：0
> 
> 时间：2012-07-05T10:42:52.220
> 
> 标签：javascript, blackberry, config, blackberry-webworks

```
var dirs = blackberry.io.dir.appDirs;
alert(dirs); 
```

打印“未定义”...

我的 config.xml 的重要部分：

```
<content src="http://10.0.0.117/MyApp/index.html"/>

<access uri="http://10.0.0.117" subdomains="true">
    <feature id="blackberry.app" required="true" version="1.0.0.0"/>
    <feature id="blackberry.io.file" required="true" version="1.0.0.0"/>
    <feature id="blackberry.io.dir" required="true" version="1.0.0.0"/>
</access>

<rim:permissions>
    <rim:permit>access_shared</rim:permit>
</rim:permissions>

<feature id="blackberry.app" required="true" version="1.0.0.0"/>
<feature id="blackberry.io.file" required="true" version="1.0.0.0"/>
<feature id="blackberry.io.dir" required="true" version="1.0.0.0"/> 
```

任何帮助将不胜感激，在此先感谢您！

我发现这个[链接](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/blackberry-io-dir-appDirs-not-working/td-p/1606225)几乎是同样的问题，但也没有解决......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:02:46.733

你在剧本上测试这个吗？Playbook 支持 appDirs，而不是手持设备。

谢谢

纳文 M

# android - 单击 TextView 将电子邮件发送到特定的电子邮件 ID

> ID：11342696
> 
> 赞同：1
> 
> 时间：2012-07-05T10:43:49.937
> 
> 标签：android, email, textview

我有一个忘记密码 TextView，我在其上执行了 onPressed() 事件，并希望应用程序将电子邮件发送到特定的预设电子邮件 ID。我的代码如下，但它不会向指定地址发送电子邮件。

```
 String value = "Hello Sir/Madam," + "\n" + "\t" + "Your email id and password are:" + "\n"  + passw;
    String[] address = {"nilaysheth@yahoo.co.in"};
    String subject = "Forgot Password";
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, address);
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, value);
    startActivity(Intent.createChooser(emailIntent, "Send Email..")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:47:55.777

看看这里，这个论坛已经有人问过了：

*   [电子邮件意图电子邮件选择器](https://stackoverflow.com/questions/9689732/email-intent-email-chooser)

*   [电子邮件意图未显示选择器](https://stackoverflow.com/questions/1793752/email-intent-not-showing-the-chooser?rq=1)

# c# - 在asp.net mvc 3中单击提交按钮后如何保留选定的值？

> ID：11342697
> 
> 赞同：0
> 
> 时间：2012-07-05T10:43:50.397
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

你好; 我有 2 个下拉列表。一个是客户 ddl，另一个是工作。我想在任何选择过程之后保持选定的值。但是我不能。我想在单击按钮后保留 ddl'selected 项目上的选定值。（我用过 2 种方法：dropdownlist 和 dropdownlistfor。）我最喜欢的文章是 http://stackoverflow.com/questions/6981698/how-to-keep-dropdownlist-selected-value-after-postback 和 http://stackoverflow .com/questions/4950798/how-to-post-the-selected-of-a-selectlist-to-the-controller-using-a-view-mo

**视图模型：**

```
 public class MyViewModel
    {
        public IEnumerable<string> Columns { get; set; }
        public IEnumerable<dynamic> Values { get; set; }
        public bool HasNext { get; set; }
        public bool HasPrevious { get; set; }
        public IEnumerable<CustomerModel> Customers { get; set; }
        public IEnumerable<SelectListItem> Jobs { get; set; }
    } 
```

**控制器：**

```
 public class JobController : Controller
      {
        public ActionResult Index(int? page)
        {
            var model = new MyViewModel();
            model.Customers = CustomerOperation.GetCustomers().Items;
            ViewData["Jobs"] = new SelectList(JobOperation.GetCustomersAssemblyList().Items, "scheduleId", "name", null);
            return View(model);
        } 
```

**看法：**

```
 <table style="padding:25px; margin:10px 10px 10px 10px; width:800px" id="sample">
                <tr>
                <td>Customer Name: </td>
                <td>
               <%= Html.DropDownListFor(X=>X.Customers,new SelectList(Model.Customers,"Id","Name"),"** Please Select **", new { id = "ddlCustomers" })%>
               </td>
                <td>Job Name:</td>
                <td>
              <%= Html.DropDownList("Jobs", (IEnumerable<SelectListItem>)ViewData["Jobs"], "** Please Select **", new { id = "ddlJobs", disabled = "disabled" })%>
                </td>
                <td>
                 <input value="monitor" name="submitButton" type="submit" />
                </td>
                </tr>
                </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:19:28.113

你的模型应该是这样的

```
public class MyViewModel
{
    public IEnumerable<string> Columns { get; set; }
    public IEnumerable<dynamic> Values { get; set; }
    public bool HasNext { get; set; }
    public bool HasPrevious { get; set; }
    public IEnumerable<CustomerModel> Customers { get; set; }
    public IEnumerable<SelectListItem> Jobs { get; set; }

    public CustomerModel Customer {get; set;}
} 
```

在您看来，添加下拉列表的代码应该是这样的

```
<%= Html.DropDownListFor(X=>X.Customer,Model.Customers) %> 
```

希望这可以帮助。

# javascript - MVC4 剃刀。如何将javascript变量传递给服务器？

> ID：11342701
> 
> 赞同：0
> 
> 时间：2012-07-05T10:43:59.563
> 
> 标签：javascript, razor, asp.net-mvc-4

我有一个 javascript 变量，我想将它传回服务器端，此后我打算将其用作访问令牌，以授予用户访问需要此令牌的其他页面的权限。

我想知道如何将此 javascript 变量传递回服务器，以便将其设置为会话变量？我需要使用 ajax 将其发回吗？

**这是我用来从服务器检索令牌的 jQuery 的一部分**

```
$(document).ready(function () {
        $('#loginForm').submit(function(e) {
            var blargh = $(this).find('input').serialize();

            $.ajax({
                type: 'post',
                url: '/WebAPI/api/authenticate/login',
               data: blargh,
                success: function (data) {
                    $.each(data, function(index, token) {
                        $('#container').prepend('<input type="hidden" name="MY_HIDDEN_FIELD_NAME" id="MY_HIDDEN_FIELD_NAME" value="'+token+'">');
                    });
                },
                error: function(jqXHR, status, errorThrown) {
                    alert("Error " + status + "\nError Thrown" + errorThrown )
                },
            });
            e.preventDefault();

        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:45:02.810

您不能将其作为隐藏的表单元素传回，或者在 ajax 回发的查询字符串中传回吗？

在 global.asmx 中获取回发值的钩子示例

```
protected void Session_Start(object src, EventArgs e)
    {
        if(!string.IsNullOrEmpty(Request.Form["MY_HIDDEN_FIELD_NAME"]))
        {
            Session["MY_SESSION_NAME"] = Request.Form["MY_HIDDEN_FIELD_NAME"]
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:48:41.433

当您发送 ajax 请求时，我建议您在请求标头中向您发送访问令牌

```
xhr.setRequestHeader('custom-header', 'value'); 
```

在服务器端，您可以获取请求标头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:05:08.233

首先 - 为什么您的客户生成令牌（我希望我在那里正确理解了您）？服务器应该生成令牌，然后客户端必须负责维护它。

如果它是一个 API 令牌，只能在 javascript 的浏览器中使用，那么我建议使用身份验证 cookie - 所有浏览器都知道如何处理它们，如果您不再希望允许，您也可以轻松地在服务器端使它们过期可以访问的特定令牌（这是非常重要的一点）。此外，我强烈建议不要依赖服务器端会话来维护身份验证会话。

理想情况下，身份验证令牌应该是无状态的（就像在 Forms Authentication 的 cookie 中一样） - 证明的责任在于客户端向您发送正确的令牌，该令牌包含您使用正确的用户重新初始化当前请求状态所需的信息.

但是，如果它是任何类型客户端的通用 API，那么您应该允许客户端至少在所有请求的查询字符串中向您发送令牌。您还应该支持在请求标头中使用它 - 可以轻松支持设置请求标头的客户端通常更喜欢，因为它会从 URL 中隐藏身份验证令牌并使格式化请求更容易（还有可能最大化 Web 服务器的如果令牌足够大，则查询字符串限制）。

然后，我建议您至少查看覆盖[`AuthorizeAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)MVC（有 2 个 - 一个用于“标准”MVC 4 管道，一个用于新的 Web API 管道，如果您同时使用这两种技术，它们都需要完成） . 该链接是为 MVC 4 之一）破解你的 cookie/header/query 字符串值。在那里，您可以获取值、解密令牌、识别用户并设置角色。然后，该属性的核心代码包含根据用户是否经过身份验证/是否具有特定角色/是否是特定用户来拒绝请求的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:45:39.807

要在 AJAX POST 中传回附加项目，您可以像这样添加它...

```
var blargh = $(this).find('input').serialize();
blargh.someItem = "value"; 
```

请记住，这仅在使用 AJAX 提交表单时有效，因此不适用于 JavaScript 不可用或被禁用的情况。

所有正常的安全免责声明都适用！

# c# - Logger Service 需要有 log4net / WISE 的默认配置文件

> ID：11342702
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:00.643
> 
> 标签：c#, windows-services, installation, setup-deployment, wise

我正在开发一个简单的记录器服务 (C#2.0)，它记录从不同客户端到达的消息（通过 MSMQ）。Logger Service 的日志机制是使用 log4net 库。我想为 log4net 配置提供单独的文件。服务应该与其他应用程序一起安装在一个通用安装包中（使用 WISE）。我希望在第一次安装时为 Logger Service 提供默认的 log4net 配置文件，并且仅当它丢失时才将该文件写入安装目录，否则保留现有文件。

请帮助新手。

我是否在安装包或服务中管理它..或在两个地方？什么是最好的方法？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:50:58.887

```
XmlCconfigurator.Configure(FileInfo ... ) 
```

允许您指定应用程序配置文件以外的文件。对于 WISE 设置：检查文档，我确信有一些选项可以不覆盖现有文件。

# jquery-selectors - 使用 jquery 选择正确的元素

> ID：11342703
> 
> 赞同：1
> 
> 时间：2012-07-05T10:44:00.997
> 
> 标签：jquery-selectors, jquery-ui-dialog

从 Nick Caver 提供的[解决方案](https://stackoverflow.com/a/4518917/86112)开始，我希望将用户提供的一些输入保存到数据库中。问题是我不知道如何使用 jQuery 从当前对话框中选择正确的输入。

[这](http://jsfiddle.net/ddole/AC5mP/4/)是我的工作代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:09:00.303

我已经解决了。我不得不使用 :last 选择器。我认为是一个很好的解决方案。

你怎么看？我是 jQuery 新手

# asp.net-mvc - MVC中的NAudio，我如何通过文件上传器提供文件路径？其他选择？

> ID：11342704
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:04.303
> 
> 标签：asp.net-mvc, file-upload, naudio

我正在使用 NAudio 将我的 mp3 文件转换为波形图像，为此我正在使用文件上传器

```
<input type="file" name="file" /> 
```

因此用户可以选择他们的 mp3 文件，并可以将波形图像上传到服务器的特定位置。如果我对“c:\media\cat\001\music.mp3”进行硬编码，它工作正常，我该如何根据用户上传的内容进行更改。

```
//here filePath should be "c:\media\cat\001\music.mp3"
using(Mp3FileReader reader = new Mp3FileReader(filePath)) {
      using(WaveStream pcmStream = WaveFormatConversionStream.CreatePcmStream(reader)) {

        WaveFileWriter.CreateWaveFile(outputFile, pcmStream);
      }
    } 
```

请为此提供一些解决方案以获取文件的完整路径？我知道通过文件上传我们永远不会得到客户端文件的完整路径，那么如何读取该文件，上面的代码将适合 WPF，如何在 MVC 中执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:04:20.953

我找到了从 url 读取的解决方案，这样我可以将多个文件传递给读取/流，这是代码

```
string filePath = "your mp3 url";

using(Stream ms = new MemoryStream()) {
    using(Stream stream = WebRequest.Create(filePath)
        .GetResponse().GetResponseStream()) {
      byte[] buffer = new byte[32768];
      int read;
      while((read = stream.Read(buffer, 0, buffer.Length)) > 0) {
        ms.Write(buffer, 0, read);
      }
    } 
```

此代码将从 url 流式传输 mp3 文件并读取 mp3 并保存在内存中。

# php - 引用 json 数据

> ID：11342708
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:13.323
> 
> 标签：php, json

嗨，您可以在农村管理之前看到报价，这在 json 解码时引起了问题。我如何使用 PHP json_decode 来检索它？

```
[{
"employ":{
        "id":"234",
        "name":""rural management"
        },
"pos":{
        "name":"Programme Officer"
        }
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:03:02.050

你不能。数据不是 JSON。

*在*将数据传递给`json_decode`.

作为一个快速破解，您可以只执行字符串替换并更改`""`为`"\"`全局，但这不是一个强大的解决方案。您从中获取数据的底层 JSON 生成器存在问题，需要在源头进行修复（可能通过切换到使用 JSON 库而不是将字符串组合在一起）。

# android - ArrayAdapter 在 ListFragment 中的 onActivityCreated 之外为空

> ID：11342713
> 
> 赞同：1
> 
> 时间：2012-07-05T10:44:30.437
> 
> 标签：android, android-fragments, android-arrayadapter, android-listfragment

我有一个使用自定义 ArrayAdapter 填充列表视图的 ListFragment。这工作正常。但是当我尝试使用“exerciseSetsItemAdapter.notifyDataSetChanged();”向列表视图添加新列表项时 我不能，出于某种原因，onActivityCreated() 之外的所有内容都为空。

```
public class SingleExListFragment extends SherlockListFragment {

    ArrayList<ExerciseSetsRecord> sets= new ArrayList<ExerciseSetsRecord>();
    public ExerciseSetsItemAdapter exerciseSetsItemAdapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.single_exercise, container, false);
        return v;
    }

    public void onCreate(Bundle sa)
    {
        Log.d("Tag1", "ONCREATE!!!!");
        super.onCreate(sa);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ExerciseSetsRecord exerciseSetsRecord1 = new ExerciseSetsRecord(1, 0, 0);
        sets.add(exerciseSetsRecord1);
        ExerciseSetsRecord exerciseSetsRecord2 = new ExerciseSetsRecord(2, 0, 0);
        sets.add(exerciseSetsRecord2);
        ExerciseSetsRecord exerciseSetsRecord3 = new ExerciseSetsRecord(3, 0, 0);
        sets.add(exerciseSetsRecord3);

        exerciseSetsItemAdapter = new ExerciseSetsItemAdapter(getActivity(),
                android.R.layout.simple_list_item_1, sets);

        setListAdapter(exerciseSetsItemAdapter);

        Log.d("Tag1", "onActivitycreated: " + exerciseSetsItemAdapter);

        Utility.setListViewHeightBasedOnChildren(getListView());

    }

    public void addSet(){

        Log.d("Tag1", "onClick Fragment" + exerciseSetsItemAdapter + " sets " + sets);

        ExerciseSetsRecord exerciseSetsRecord4 = new ExerciseSetsRecord(1, 0, 0);
        sets.add(exerciseSetsRecord4);

//      exerciseSetsItemAdapter.notifyDataSetChanged();
    }

} 
```

logcat onCreate:
07-05 12:37:44.855: DEBUG/Tag1(18853): onCreate singleexlistfrag SingleExListFragment{4171f760} 07-05 12:37:44.865: DEBUG/Tag1(18853): ONCREATE!!!!
07-05 12:37:44.875：调试/标签 1（18853）：onActivitycreated：com.example.ExerciseSetsItemAdapter@416f1bf0

首先是在片段活动中创建片段时，最后是在该片段中的onActivityCreated。

按钮点击：
07-05 12:38:58.070：DEBUG/Tag1(18853)：addClickHandlerSingleExListFragment{4171f760}
07-05 12:38:58.070：DEBUG/Tag1(18853)：onClick Fragmentnull 集 []

第一个是activity中的onclick方法第二个是Fragment中的addSet方法。现在，如您所见，我的 ArrayAdapter 和我的 ArrayList 都是空的。

这里有什么问题？？？

编辑@Goofyahead：在 ListFragments FragmentActivity 中调用 AddSet()：

```
public void addClickHandler(View target){

        Log.d("Tag1", "addClickHandler" +singleExListFragment);
        singleExListFragment.addSet();
    } 
```

xml中有一个OnClick。

Fragment 在 FragmentActivity 中实例化，如下所示：

SingleExListFragment singleExListFragment;

...

```
 mTabsAdapter.addTab(mTabHost.newTabSpec("exercises").setIndicator("Exercise"),
            singleExListFragment.getClass(), null); 
```

一切都按预期工作，除了“AddSet”中的sets和ExerciseItemAdapter为空。

# java - 如何将 Spring 容器扩展为特定于部署？

> ID：11342715
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:36.527
> 
> 标签：java, spring

由于我们的要求，我们将拥有特定于部署的视图和用例。部署将具有通用和特定于部署的部分（bean）。这意味着我们可能需要一个 context.xml 文件，其中包含所有部署的通用 bean，然后是每个部署的特定于部署的 deploymentContext.xml。这意味着一些 POJO 存在于一个部署中，但不存在于另一个部署中。

我的问题：1）是否可以使用特定于部署的上下文文件来扩展通用上下文文件？2）是否可以在通用上下文文件中已经存在的部署特定上下文文件中描述一个类？即它将覆盖通用上下文文件中描述的bean，就像在类继承中一样。3) 上述方法是否可行，或者构建描述符是否应该动态生成 context.xml 文件？我更喜欢扩展方法... 4）如果我部署所有特定于部署的上下文，但从 src 目录中删除一些 POJO 类，应用程序会在部署时中断还是仅在我尝试实例化不存在的 bean 之后?

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:48:03.820

不完全是你问的方式，但`@Profile`在这里使用西装

```
@Profile("dev")
public class SomeBean{

} 
```

仅当配置文件集为`dev`

**文档**

*   [spring-3-1-m1-introducing-profile](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)

* * *

**另见**

*   [有什么方法可以启用或禁用 applicationContext.xml 文件中的 Spring bean 定义？](https://stackoverflow.com/questions/8279270/is-there-any-way-to-enable-or-disable-the-spring-bean-definition-in-applicationc)
*   [如何在 Spring 中动态设置 bean 引用？](https://stackoverflow.com/questions/9124982/how-to-set-the-dynamically-a-bean-reference-in-spring)

# jquery - jQuery 验证表单远程规则，成功消息

> ID：11342716
> 
> 赞同：6
> 
> 时间：2012-07-05T10:44:37.613
> 
> 标签：jquery, ajax, validation, message

我正在为我的注册表单使用 jquery 验证，它运行良好，但我遇到了问题。我检查电子邮件是否存在，如果电子邮件确实存在，我会收到一条错误消息。现在我想编辑这个，所以，如果电子邮件是免费使用的。错误消息将更改为：此电子邮件可免费使用。

```
$(document).ready(function(){
    $("#registratieform").validate({
        rules: {
            email: {
                required: true,
                email: true,
                remote: {
                    url: "includes/check_email.php",
                    type: "post",
                    complete: function(data){
                        if( data.responseText == "false" ) {
                            alert("Free");
                          }
                     }
                },
            },
        },

        messages: {
            email: {
                required: "This field is required",
                email: "Please enter a valid email address",
                remote: jQuery.format("{0} is already taken")
            },
        },
    });
}); 
```

警报有效，但此消息必须出现在错误所在的标签中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-24T07:36:32.753

@Ruub：远程消息应该是一个函数，而远程规则只是一个用于检查的网址示例：

```
$("#registratieform").validate({
    rules: {
        email: {
            required: true,
            email: true,
            remote: "includes/check_email.php"                    
        }
    },
    messages: {
        email: {
            required: "This field is required",
            email: "Please enter a valid email address",
            remote: function() { return $.validator.format("{0} is already taken", $("#email").val()) }
        },
    },
}); 
```

在服务器端（包括/check_email.php）：

```
if (!isValidEmail($_REQUEST['email'])) {
        echo "false";
        exit;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T22:18:22.220

您可以使用`success`选项。

如果指定，则显示错误标签以显示有效元素。如果给定一个字符串，它会作为一个类添加到标签中。如果给定一个函数，它会使用标签（作为 jQuery 对象）和经过验证的输入（作为 DOM 元素）调用。标签可用于添加诸如“ok！”之类的文本。

文档中的示例：将类“valid”添加到有效元素，通过 CSS 设置样式，并添加文本“Ok！”。

```
$("#myform").validate({
    success: function(label) {
        label.addClass("valid").text("Ok!")
    },
    submitHandler: function() { alert("Submitted!") }
}); 
```

在您的代码中：

```
$(document).ready(function(){
    $("#registratieform").validate({
        rules: {
            email: {
                required: true,
                email: true,
                remote: {
                    url: "includes/check_email.php",
                    type: "post",
                    complete: function(data){
                        if( data.responseText == "false" ) {
                            alert("Free");
                          }
                     }
                },
            },
        },

        messages: {
            email: {
                required: "This field is required",
                email: "Please enter a valid email address",
                remote: jQuery.format("{0} is already taken")
            },
        },

        success: function(e) {
            // Remove error message
            // Add success message
        },
    });
}); 
```

我建议阅读：[.validate()](http://jqueryvalidation.org/validate)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-01T09:19:01.883

我为我们的问题找到了解决方案，花了一天时间了解所有现有的解决方案但没有人让我满意并学习了一点 jqvalidator 的源代码我发现它很容易实现

```
 $("#myform").validate({
       rules: {
            somealiasname: {
                required: true,
                remote: {
                    url: "www.callthisurl.com/remote",
                    type: "GET",
                    success: function (data) {// Here we got an array of elements for example
                        var result = true,
                            validator = $("#myform").data("validator"), //here we get the validator for current form. We shure that validator is got because during initialization step the form had stored validator once.
                            element = $("#myform").find("input[name=somealiasname]"),
                            currentAlias = element.val(),
                            previous, errors, message, submitted;

                        element = element[0];
                        previous = validator.previousValue(element); // here we get the cached value of element in jqvalidation system

                        data.forEach(function (it) {//here we check if all alias is uniq for example
                            result = !result ? false : it.alias != currentAlias;
                        });

                        validator.settings.messages[element.name].remote = previous.originalMessage; // this code I found in the source code of validator (line 1339)

                        if (result) {
                            submitted = validator.formSubmitted;
                            validator.prepareElement(element);
                            validator.formSubmitted = submitted;
                            validator.successList.push(element);
                            delete validator.invalid[element.name];
                            validator.showErrors();
                        } else {
                            errors = {};
                            message = validator.defaultMessage(element, "remote");
                            errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;
                            validator.invalid[element.name] = true;
                            validator.showErrors(errors);
                        }

                        previous.valid = result;
                        validator.stopRequest(element, result);
                    }.bind(this)
                }
            }
        } 
```

```

tadam - 一切都很完美！

此代码已使用 jqvalidation 1.14.0 进行测试

我希望，我可以帮助别人

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T11:32:28.240

用您的完整功能替换以下代码：

```
dataFilter: function (data) {
                        return 'false';// If email not exist
                        return 'true';// If email exist ( Display message on return true )
                    } 
```

请检查这将有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-08T19:39:09.607

如果要使用 Laravel，我发现这很有用。关键是使用**dataFilter**

```
email: {
   required: true,
   remote: {
       headers: {
           'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
       },
       type: "post",
       url: "existsEmail.php",
       data: {email: function() {
           return $('#email').val();
       }},
       dataFilter: function(response) {
           var data = JSON.parse(response);

           return data.success;
       },
   }

messages: {
    email: {
        required: "Email Required",
        remote: $.validator.format("Email Invalid"),
} 
```

重要的是返回状态为 200（或 void），即使返回 false。如果您放置另一个状态，则不会（无）向**dataFilter发送正确响应**

```
public function existsEmailCloud(Request $request){
   $sEmail = strtolower($request->email);

   $result = GeneralFunctions::existsEmail($sEmail);

   if($result) {
       return Response::json([
           'success' => true,
       ], 200);
   } else {
       return Response::json([
           'success' => false,
       ], 200);
   } 
```

# javascript - jquery不解析ajax结果

> ID：11342720
> 
> 赞同：1
> 
> 时间：2012-07-05T10:44:43.110
> 
> 标签：javascript, ajax, jquery, http-headers

为了解决无法在 IE 中运行的 ajax 请求的问题，我更改了代码。现在它在任何浏览器中都不起作用。奇怪的是，ajax 请求确实得到了正确的结果。只有这个结果没有被解析。如何解决这个问题？我需要更改一些标题吗？

所有函数都是 tbGeocoder 对象中的方法。

```
 $.ajax({
        url: 'http://nominatim.openstreetmap.org/search',
        type: 'GET',
        dataType: 'jsonp',
        jsonp: 'false',
        jsonpCallback: 'json_callback' + tbGeocoder.requestIndex,
        data: {
            format: 'json',
            q: input,
            limit: 1,
            json_calback: 'json_callback' + tbGeocoder.requestIndex
        },
        beforeSend: function(x) { 
            if (x && x.overrideMimeType) { 
                x.overrideMimeType("application/json;charset=UTF-8"); 
            } 
        },
        dataFilter: function (data, type) {
            console.log(data);
            console.log(type);
          /*for (key in data) {
                //console.log(key);
            }*/
            return data;
        },
        success: tbGeocoder.processRequestResult,

        error: function(data, textStatus, jqXHR) {
            console.log(textStatus);
        }
    });
    tbGeocoder.requestIndex++;
},
preProcessRequestResult: function (data, type) {
    console.log(data);
    console.log(type);
    for (key in data) {
        //console.log(key);
    }
    return data;
},
processRequestResult: function (data) {
    console.log('==>in loop for nominatim');
} 
```

在 firebug 中，输入类似 input="Den Dolechh" 的控制台输出如下：

```
code address location
Den Dolech
undefined
jsonp
parsererror
Object { readyState=4, status=200, statusText="success"} 
```

在网络状态中，您可以看到标题如下：

```
 Replyheaders
 Access-Control-Allow-Orig...   *
 Connection close
 Content-Length 445
 Content-Location   search.php
 Content-Type   application/json; charset=UTF-8
 Date   Thu, 05 Jul 2012 10:31:11 GMT
 Server Apache/2.2.14 (Ubuntu)
 TCN    choice
 Vary   negotiate
 X-Powered-By   PHP/5.3.2-1ubuntu4.17

 Requestheaders
 Accept */*
 Accept-Encoding    gzip, deflate
 Accept-Language    nl,en-us;q=0.7,en;q=0.3
 Connection keep-alive
 Host   nominatim.openstreetmap.org
 Referer    http://localhost/locations/add
 User-Agent Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1 
```

回复是：

```
 [{"place_id":"44757488","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"way","osm_id":"36859933","boundingbox":["51.4484252929688","51.449333190918","5.48478031158447","5.48527336120605"],"lat":"51.4489435225293","lon":"5.48514453068994","display_name":"Den Dolech, Eindhoven, Samenwerkingsverband Regio Eindhoven, Noord-Brabant, 5600 MB, Nederland","class":"highway","type":"residential"}] 
```

我该如何解决？我得到了数据，但我怎么把它拿出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:02:11.093

你不应该直接使用数据`processRequestResult`

使用`data.d`并将其存储在某个变量中。

```
var tempData = data.d; 
```

现在使用`tempData`而不是`data`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:33:33.473

您附加的 JSON 是有效的 JSON，**而不是 JSONP**。

```
// Some valid JSON responses:
// (even yours is valid JSON)
{x: 1}
[{x: 1}, {x: 2}]

// Some valid JSONP responses:
foo({x: 1})
bar([{x: 1}, {x: 2}]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T13:15:20.413

好的，这很烦人。答案是对错字的修复！

线

```
 json_calback: 'json_callback' + tbGeocoder.requestIndex 
```

应该

```
data: {
            format: 'json',
            q: input,
            addressdetails: 1,
            limit: 1,
            json_callback: 'json_callback' + tbGeocoder.requestIndex
        }, 
```

注意回调中的双'l'。我还添加了地址详细信息，因为这就是我一直在寻找的 ;-)

有了这个，我得到了正确的 jsonp 共鸣：

```
 json_callback11([{"place_id":"44757488","licence":"Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0.","osm_type":"way","osm_id":"36859933","boundingbox":["51.4484252929688","51.449333190918","5.48478031158447","5.48527336120605"],"lat":"51.4489435225293","lon":"5.48514453068994","display_name":"Den Dolech, Eindhoven, Samenwerkingsverband Regio Eindhoven, Noord-Brabant, 5600 MB, Nederland","class":"highway","type":"residential","address":{"road":"Den Dolech","residential":"Eindhoven","suburb":"Eindhoven","city":"Eindhoven","county":"Samenwerkingsverband Regio Eindhoven","state":"Noord-Brabant","postcode":"5600 MB","country":"Nederland","country_code":"nl"}}]) 
```

这是正确处理的。这是一个需要技巧（使 json_callback 和 jsonp_callback 相同......）来解决相同的起源问题和浏览器之间的差异。这适用于 Windows 上的 IE9、FF 和 Chrome，以及 Mac 上的 FF、Chrome 和 Safiri。

# session - IE9 不保存会话数据

> ID：11342721
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:43.477
> 
> 标签：session, cookies, internet-explorer-9

我在使用 IE9 保存会话数据时遇到问题。当用户登录时，会话被正确保存。现在，如果他们浏览应用程序，应用程序会将页面历史存储到会话数据中（我将其用于应用程序的后退按钮）。不幸的是，IE9 并不总是将这些数据保存到会话中（有时会，有时不会）。它与其他浏览器完美配合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:49:53.060

如果您使用的是 PHP，请尝试添加如下标头：

```
//vfranchi - necessary to IE8, so it won't throw a warning
header('P3P:CP="This site does not contain a P3P policy."'); 
```

我认为这与 IE8 在网站没有明确的隐私政策时不保存 cookie 信息有关。我有同样的问题，这对我来说是固定的。

请记住，此语句需要在任何输出之前，就像 session_start()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:19:18.393

通过关闭IE8兼容模式解决了这个问题。

# android - Android 列表视图，每行中有备用项目

> ID：11342722
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:44:44.773
> 
> 标签：android, android-listview

带有第一行左侧图像和右侧文本的 android listview，第二行与第一行正好相反。任何人都可以帮我提供示例代码吗？或者它可能在 listview 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:03:19.233

我们做如下替代项目

```
 row.xml
    <RelativeLayout>
    <ImageView
    android:visibility="gone"
    android:id="@+id/img1"
    android:layout_alignParentLeft="true"
    />
    <TextView
    android:id="@+id/txt1"
    android:layout_alignParentLeft="true"
    />
    <ImageView
    android:id="@+id/img2"
    android:layout_alignParentRight="true"
    />
    <TextView
    android:id="@+id/txt1"
    android:layout_alignParentRight="true"
    android:visibility="gone"
    />
    </RelativeLayout>

//In Adapter
    public View getView(int position, View convertView, ViewGroup parent) 
    {
    if(position%2==0)
    {
    //left side image and right side text
    img2.setImgResource();
    img2.setVisibility(VIEW.GONE);
    txt2.setVisibility(VIEW.GONE);
    img1.setVisibility(VIEW.VISABLE);
    txt1.setVisibility(VIEW.VISABLE);
    txt2.setText();
    }
    else
    {
    //left side text and right side image code

    img2.setImgResource();
    img1.setVisibility(VIEW.GONE);
    txt1.setVisibility(VIEW.GONE);
    img2.setVisibility(VIEW.VISABLE);
    txt2.setVisibility(VIEW.VISABLE);
    txt2.setText();
    }
    } 
```

# php - session_start() - 警告...但是没有 BOM，没有空格，是空的

> ID：11342723
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:46.113
> 
> 标签：php, session, warnings

我的会话有问题，我收到以下警告消息：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 已在 /home/... 中发送标头（输出开始于 /home/.../public_html/admin/cp.php:1） /public_html/admin/cp.php 在第 2 行

我以为是 BOM，但不是，我在 Dreaweaver 中编辑（重写了 session_start() 函数）文件，然后重新上传，同样的警告，我在 Notepad++ 中编辑，同样的警告。

没有空格，没有制表符，代码开头是：

```
<?php
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html xmlns:fb="http://ogp.me/ns/fb#">
<html itemscope itemtype="http://schema.org/Blog"> 
```

有什么问题？我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:49:41.813

如果您在 php 开始标记的同一行有这样的错误，那么它肯定是空格或 BOM，或另一个不可见字符。尝试使用可以显示所有不可见字符的编辑器，例如 Notepad++。

另外，请确保您替换服务器上的正确文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T11:36:12.703

请`ob_start();`在页面顶部和开头使用。

# c++ - c ++代码在输出中抛出意外字符

> ID：11342724
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:46.977
> 
> 标签：c++, function-pointers

我从我的程序中粘贴了一部分代码片段，代码的输出给出了一些不需要的字符，请查看它并让我知道其背后的明显逻辑原因。

```
class print {
FILE *pFile;
vector <char> st;
public:
char *formatForHtml(string str, string htmlTag) {
    string strBegin;
    strBegin = "<";
    strBegin.append(htmlTag);
    strBegin.append(">");
    strBegin.append(str);
    string strEnd = "</";
    strEnd.append(htmlTag);
    strEnd.append(">");
    strBegin.append(strEnd);
    st.resize(strBegin.size());
    for (int i =0;i <strBegin.size();i++) {
        st[i] = strBegin[i];
    }
    return &st[0];
}
void generatePath() { 
    char fileName[_MAX_FNAME];
    _makepath(fileName,"C:","\\Users\\vinitg\\Documents\\Visual Studio 2010\\Projects\\continous_beam_cpp.cpp\\", "myf9", "html");
    pFile = fopen(fileName,"a+");
}
void writeInFile() {
    string str = "DESIGN OF A CONTINOUS BEAM!";
    char *procString;
    procString = formatForHtml(str, "p");
    fprintf(pFile, procString);
    fclose(pFile);
    ShellExecute(NULL, "open", "file:///C:/Users/vinitg/Documents/Visual%20Studio%202010/Projects/continous_beam_cpp.cpp/myF9.html",NULL, NULL, SW_SHOWMAXIMIZED);
}
void passString (char g[]) {
    cout << &g[0];
}
};
int main() {
    print generateReport;
    generateReport.generatePath();
    generateReport.writeInFile();
    cout << "Press any one key to continue..";
    getch();
}` 
```

您一定已经猜到创建的 HTML 文件并以 html 格式显示结果，下面粘贴的是输出（带有不需要的字符）

`DESIGN OF A CONTINUOUS BEAM!`

`ýýýý««««««««îþ`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:49:10.590

一切都在意料之中。您的字符串没有空终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:55:30.730

`formatForHtml`返回`char*`非空分隔的 a。你必须附加`0`到它：

```
st.resize(strBegin.size() + 1);
...
st.push_back('\0'); 
```

而不是返回`char*`，我宁愿返回`std::string`并使用`procString.c_str()`来获取原始数据以写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:57:56.743

您定义了一个字符向量并期望它表现为一个字符串。向量的元素不会被连续分配。所以，声明

```
return &st[0]; 
```

不会像您期望的那样返回字符数组/字符串。

**编辑** ：从下面的评论中，我检查了规范。在交叉检查向量标准后，保证了向量的连续内存分配，所以，这是我的错误。不过，您不需要实现一个向量来获取字符指针。

实现您的类，如下所示。即，从 formatForHTML 函数返回格式化字符串。对于文件，只需使用字符串的 c_str() 函数打印内容。无需使用字符指针。

```
class print {
FILE *pFile;
vector <char> st;
public:
string formatForHtml(string str, string htmlTag) {
    string strBegin;
    strBegin = "<";
    strBegin.append(htmlTag);
    strBegin.append(">");
    strBegin.append(str);
    string strEnd = "</";
    strEnd.append(htmlTag);
    strEnd.append(">");
    strBegin.append(strEnd);

    return strBegin;
}
void generatePath() { 
    char fileName[_MAX_FNAME];
    _makepath(fileName,"C:","\\Users\\vinitg\\Documents\\Visual Studio 2010\\Projects\\continous_beam_cpp.cpp\\", "myf9", "html");
    pFile = fopen(fileName,"a+");
}
void writeInFile() {
    string str = "DESIGN OF A CONTINOUS BEAM!";
    string procString;
    procString = formatForHtml(str, "p");
    fprintf(pFile, procString.c_str());
    fclose(pFile);
    ShellExecute(NULL, L"open", L"file:///C:/Users/vinitg/Documents/Visual%20Studio%202010/Projects/continous_beam_cpp.cpp/myF9.html",NULL, NULL, SW_SHOWMAXIMIZED);
}
void passString (char g[]) {
    cout << &g[0];
}
}; 
```

# jquery - 大写标题页如果

> ID：11342725
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:48.687
> 
> 标签：jquery

我写了这个脚本来大写标题的第一个字母，或者如果 URL 包含 giocatori_ 名称的第一个字母直到 '-' (Giovanni Rossi) 但**如果**它不起作用。

```
$(document).ready(function(){
    function capitaliseFirstLetter(string){
        if (/giocatore_/.test(window.location)) {
            var title = document.title;
        subTitle = title.split('-')[0];
        subTitleNext = title.split('-')[1];
        subTitle=subTitle.replace('_',' ');

        subTitle = subTitle.toLowerCase().replace(/\b[a-z]/g, function(letter) {
            return letter.toUpperCase();
        })

        document.title = subTitle+' - '+subTitleNext;
    } else {
        return string.charAt(0).toUpperCase() + string.slice(1);
    }
    document.title = capitaliseFirstLetter(document.title);
}); 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:50:21.810

在查看另一个线程后：[如何检查字符串是否包含子字符串？](https://stackoverflow.com/questions/3480771/jquery-how-to-see-if-string-contains-substring)

我认为您可能在语句中缺少[`i`标志](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions#Advanced_Searching_With_Flags)，这使得匹配不区分大小写。

```
if (/giocatore_/i.test(window.location)) { 
```

# grails - 休息插件：设置cookie不起作用

> ID：11342726
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:51.080
> 
> 标签：grails, cookies, groovy, httpclient, httpbuilder

我想在经过 SSO 身份验证的服务器上调用经过身份验证的 URL。为此，我正在处理对 HTTPClient 的请求中的 cookie。下面的代码工作正常。

```
 def cookies = []
    request.getCookies().each {
        def cookie = new BasicClientCookie(it.name, it.value)
        cookie['domain'] = it.domain
        cookie['path'] = it.path
        cookie.secure = true
        cookies.add(cookie)
    }

   // **** Setting cookies using header *****
   def output = withHttp(uri: "https://testserver.com") {
        def builder = delegate;

        def html = get(path : '/testactoin.do', 
            headers:['Cookie':cookies.collect{it.name+"="+it.value}.join("; ")],
            contentType : ContentType.XML, 
            query : 
            [
                query: params.query,
                count: params.count,
                cacheName: 'contentStoreCityState',
                filterString: 'address.country=CA,GB,US'
            ]
        )
        return html
    } 
```

但是，如果我尝试使用 api 设置 cookie，它就不起作用。请参阅下面的代码片段：

```
def cookies = []
request.getCookies().each {
    def cookie = new BasicClientCookie(it.name, it.value)
    cookie['domain'] = it.domain
    cookie['path'] = it.path
    cookie.secure = true
    cookies.add(cookie)
}

def output = withHttp(uri: "https://testserver.com") {
    def builder = delegate;

    // **** Setting cookies using api call *****
    cookies.each {
       builder.client.cookieStore.addCookie(it)
    }

    def html = get(path : '/testactoin.do', 
        contentType : ContentType.XML, 
        query : 
        [
            query: params.query,
            count: params.count,
            cacheName: 'contentStoreCityState',
            filterString: 'address.country=CA,GB,US'
        ]
    )
    return html
} 
```

使用 addCookie 方法设置 cookie 有什么问题？它既不会产生任何异常，也不会产生任何警告消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:17:01.640

在您的第一个代码片段中，您正在设置 Cookie，但标头实际上是 Set-Cookie。

# javascript - 从另一个对象的原型调用对象原型

> ID：11342728
> 
> 赞同：0
> 
> 时间：2012-07-05T10:44:58.063
> 
> 标签：javascript, object

可能很明显，但仍然让我感到困惑。

无论如何都可以从另一个对象的原型调用另一个对象内的原型吗？

**当前集：**

```
function obj1() {
    this.myVar = 1;
}

obj1.prototype.helloWorld = function() {
    alert("Hello world!");
}

function obj2() {
   this.myVar = 2;
}

obj2.prototype.nonSense = function() {
    console.log(this.myVar);
} 
```

**1.**`Obj2`原型可以以`nonSense`某种方式调用原型吗？** **2.**原型可以以某种方式访问​​变量吗？`helloWorld``Obj1`
**`Obj2``nonSense``Obj1``myVar`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:11:51.817

我不太确定您要做什么，但您可以`helloWorld`直接调用该方法：

```
obj1.prototype.helloWorld(); 
```

如果您有 的*实例*，`obj1`则可以摆脱`prototype`：

```
var myObj1 = new obj1();
myObj1.helloWorld(); 
```

`myVar`要从外部访问，`obj1`您需要调用`obj1`-`myVar`在您调用声明它的函数之前不会存在。最有可能的是，您希望`obj1`通过使用运算符调用它来创建一个实例`new`，如上所示。然后，您可以`myVar`像访问任何其他属性一样访问：

```
console.log(myObj1.myVar); 
```**

# android - Android TelephonyManager 检测未接听电话

> ID：11342732
> 
> 赞同：0
> 
> 时间：2012-07-05T10:45:16.737
> 
> 标签：android, android-intent

在我的应用程序中，我使用 BroadcastReceiver 在 TelephonyManager 的帮助下发送启动服务的意图...

```
@Override
public void onReceive(Context context, Intent intent) {     

    if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) 
    {
        IntentService = new Intent(context, PlayService.class).setAction("outgoing_call");
        IntentService.putExtra("phone_number",intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER));  
        context.startService(IntentService);            
    }
    else
    {
        tl= (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE); 
        int type = tl.getCallState();

        switch (type) {

        case TelephonyManager.CALL_STATE_OFFHOOK:

            break;

        case TelephonyManager.CALL_STATE_RINGING:
            Toast.makeText( context, "incoming call", Toast.LENGTH_LONG).show();
            IntentService = new Intent(context, PlayService.class).setAction("incoming_call");
            IntentService.putExtra("phone_number",intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER) );
            if (SmsReceiver.bool)
            context.startService(IntentService);
            break;

        case TelephonyManager.CALL_STATE_IDLE:
            break;
        }

    }
} 
```

当电话响起且无人接听时，应用程序崩溃并出现此类错误...我该如何检测这种情况

```
07-05 14:39:37.304: E/AndroidRuntime(11357): java.lang.RuntimeException: Unable to stop service com.samples.broadcastreceiver.PlayService@405364b8: java.lang.NullPointerException
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.app.ActivityThread.handleStopService(ActivityThread.java:2086)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.app.ActivityThread.access$2900(ActivityThread.java:117)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1001)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.os.Looper.loop(Looper.java:130)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.app.ActivityThread.main(ActivityThread.java:3687)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at java.lang.reflect.Method.invokeNative(Native Method)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at java.lang.reflect.Method.invoke(Method.java:507)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at dalvik.system.NativeStart.main(Native Method)
07-05 14:39:37.304: E/AndroidRuntime(11357): Caused by: java.lang.NullPointerException
07-05 14:39:37.304: E/AndroidRuntime(11357):    at com.samples.broadcastreceiver.PlayService.onDestroy(PlayService.java:77)
07-05 14:39:37.304: E/AndroidRuntime(11357):    at android.app.ActivityThread.handleStopService(ActivityThread.java:2069) 
```

# java - 为什么改变joinColumn的顺序，hibernate返回正确或错误的查询？

> ID：11342733
> 
> 赞同：3
> 
> 时间：2012-07-05T10:45:28.953
> 
> 标签：java, spring, hibernate, hibernate-annotations, spring-annotations

**问题：**

为什么改变joinColumn的顺序，hibernate返回正确或错误的查询？

**首次加入：**

```
@OneToOne
      @JoinTable(name="TTR_POA_UPA",
        joinColumns = {
          @JoinColumn(name="ANO", insertable=false, updatable=false),
          @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
          @JoinColumn(name="MES", insertable=false, updatable=false)          
        },
        inverseJoinColumns = {
          @JoinColumn(name="ANO", insertable=false, updatable=false),
          @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
          @JoinColumn(name="MES", insertable=false, updatable=false)
        }     
      )
private PoaUpa poaUpa; 
```

返回：

```
Hibernate: select * from ( select autorizaci0_.ano as ano0_, autorizaci0_.ID_ESCALA as ID2_0_, autorizaci0_.mes as mes0_, autorizaci0_.AUTORIZACION_HORAS_DIA_FIJIS as AUTORIZA4_0_, autorizaci0_.AUTORIZACION_HORAS_EVENT as AUTORIZA5_0_, autorizaci0_.AUTORIZACION_HORAS_FACTP as AUTORIZA6_0_, autorizaci0_.AUTORIZACION_HORAS_FIJIS as AUTORIZA7_0_, autorizaci0_.AUTORIZACION_HORAS_FIJOS as AUTORIZA8_0_, autorizaci0_.AUTORIZACION_HORAS_SEM_FACTP as AUTORIZA9_0_, autorizaci0_.AUTORIZACION_NAP as AUTORIZ10_0_, autorizaci0_.AUTORIZACION_NUM_PERS_EVENT as AUTORIZ11_0_, autorizaci0_.AUTORIZACION_OBSERVACIONES as AUTORIZ12_0_, autorizaci0_.PETICION_HORAS_DIA_FIJIS as PETICION13_0_, autorizaci0_.PETICION_HORAS_EVENT as PETICION14_0_, autorizaci0_.PETICION_HORAS_FACTP as PETICION15_0_, autorizaci0_.PETICION_HORAS_FIJIS as PETICION16_0_, autorizaci0_.PETICION_HORAS_FIJOS as PETICION17_0_, autorizaci0_.PETICION_HORAS_SEM_FACTP as PETICION18_0_, autorizaci0_.PETICION_NAP as PETICION19_0_, autorizaci0_.PETICION_NUM_PERS_EVENT as PETICION20_0_, autorizaci0_.PETICION_OBSERVACIONES as PETICION21_0_, autorizaci0_.REALIZACION_HORAS_DIA_FIJIS as REALIZA22_0_, autorizaci0_.REALIZACION_HORAS_EVENT as REALIZA23_0_, autorizaci0_.REALIZACION_HORAS_FACTP as REALIZA24_0_, autorizaci0_.REALIZACION_HORAS_FIJIS as REALIZA25_0_, autorizaci0_.REALIZACION_HORAS_FIJOS as REALIZA26_0_, autorizaci0_.REALIZACION_HORAS_SEM_FACTP as REALIZA27_0_, autorizaci0_.REALIZACION_NAP as REALIZA28_0_, autorizaci0_.REALIZACION_NUM_PERS_EVENT as REALIZA29_0_, autorizaci0_.REALIZACION_OBSERVACIONES as REALIZA30_0_, autorizaci0_1_.ANO as ANO1_, autorizaci0_1_.ID_ESCALA as ID2_1_, autorizaci0_1_.MES as MES1_ from TTR_AUTORIZACION autorizaci0_ left outer join TTR_POA_UPA autorizaci0_1_ on autorizaci0_.ano=autorizaci0_1_.ANO and autorizaci0_.ID_ESCALA=autorizaci0_1_.ID_ESCALA and autorizaci0_.mes=autorizaci0_1_.MES where autorizaci0_.ano=? and autorizaci0_.mes=? and autorizaci0_.ID_ESCALA=? ) where rownum <= ? 
```

有了这个加入：

```
on autorizaci0_.ano=autorizaci0_1_.ANO and autorizaci0_.ID_ESCALA=autorizaci0_1_.ID_ESCALA 
```

**第二次加入：**

```
@OneToOne     
      @JoinTable(name="TTR_POA_UPA",
        joinColumns = {
          @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
          @JoinColumn(name="ANO", insertable=false, updatable=false),
          @JoinColumn(name="MES", insertable=false, updatable=false)          
        },
        inverseJoinColumns = {
          @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false),
          @JoinColumn(name="ANO", insertable=false, updatable=false),
          @JoinColumn(name="MES", insertable=false, updatable=false)
        }         )     
private PoaUpa poaUpa; 
```

返回：

```
Hibernate: select * from ( select autorizaci0_.ano as ano0_, autorizaci0_.ID_ESCALA as ID2_0_, autorizaci0_.mes as mes0_, autorizaci0_.AUTORIZACION_HORAS_DIA_FIJIS as AUTORIZA4_0_, autorizaci0_.AUTORIZACION_HORAS_EVENT as AUTORIZA5_0_, autorizaci0_.AUTORIZACION_HORAS_FACTP as AUTORIZA6_0_, autorizaci0_.AUTORIZACION_HORAS_FIJIS as AUTORIZA7_0_, autorizaci0_.AUTORIZACION_HORAS_FIJOS as AUTORIZA8_0_, autorizaci0_.AUTORIZACION_HORAS_SEM_FACTP as AUTORIZA9_0_, autorizaci0_.AUTORIZACION_NAP as AUTORIZ10_0_, autorizaci0_.AUTORIZACION_NUM_PERS_EVENT as AUTORIZ11_0_, autorizaci0_.AUTORIZACION_OBSERVACIONES as AUTORIZ12_0_, autorizaci0_.PETICION_HORAS_DIA_FIJIS as PETICION13_0_, autorizaci0_.PETICION_HORAS_EVENT as PETICION14_0_, autorizaci0_.PETICION_HORAS_FACTP as PETICION15_0_, autorizaci0_.PETICION_HORAS_FIJIS as PETICION16_0_, autorizaci0_.PETICION_HORAS_FIJOS as PETICION17_0_, autorizaci0_.PETICION_HORAS_SEM_FACTP as PETICION18_0_, autorizaci0_.PETICION_NAP as PETICION19_0_, autorizaci0_.PETICION_NUM_PERS_EVENT as PETICION20_0_, autorizaci0_.PETICION_OBSERVACIONES as PETICION21_0_, autorizaci0_.REALIZACION_HORAS_DIA_FIJIS as REALIZA22_0_, autorizaci0_.REALIZACION_HORAS_EVENT as REALIZA23_0_, autorizaci0_.REALIZACION_HORAS_FACTP as REALIZA24_0_, autorizaci0_.REALIZACION_HORAS_FIJIS as REALIZA25_0_, autorizaci0_.REALIZACION_HORAS_FIJOS as REALIZA26_0_, autorizaci0_.REALIZACION_HORAS_SEM_FACTP as REALIZA27_0_, autorizaci0_.REALIZACION_NAP as REALIZA28_0_, autorizaci0_.REALIZACION_NUM_PERS_EVENT as REALIZA29_0_, autorizaci0_.REALIZACION_OBSERVACIONES as REALIZA30_0_, autorizaci0_1_.ID_ESCALA as ID2_1_, autorizaci0_1_.ANO as ANO1_, autorizaci0_1_.MES as MES1_ from TTR_AUTORIZACION autorizaci0_ left outer join TTR_POA_UPA autorizaci0_1_ on autorizaci0_.ano=autorizaci0_1_.ID_ESCALA and autorizaci0_.ID_ESCALA=autorizaci0_1_.ANO and autorizaci0_.mes=autorizaci0_1_.MES where autorizaci0_.ano=? and autorizaci0_.mes=? and autorizaci0_.ID_ESCALA=? ) where rownum <= ? 
```

有了这个不正确的连接：

```
on autorizaci0_.ano=autorizaci0_1_.ID_ESCALA and autorizaci0_.ID_ESCALA=autorizaci0_1_.ANO 
```

**解决方案：**

**完美的解决方案是：（感谢@JB Nizet）**

```
@OneToOne
  @JoinTable(name="TTR_POA_UPA",
    joinColumns = {
      @JoinColumn(name="ANO", insertable=false, updatable=false, referencedColumnName="ANO"),
      @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false, referencedColumnName="ID_ESCALA"),
      @JoinColumn(name="MES", insertable=false, updatable=false, referencedColumnName="MES")          
    },
    inverseJoinColumns = {
      @JoinColumn(name="ANO", insertable=false, updatable=false, referencedColumnName="ANO"),
      @JoinColumn(name="ID_ESCALA", insertable=false, updatable=false, referencedColumnName="ID_ESCALA"),
      @JoinColumn(name="MES", insertable=false, updatable=false, referencedColumnName="MES")
    }     
  )
private PoaUpa poaUpa; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:12:20.553

连接表的连接列引用连接表中的列。它在第一种情况下偶然起作用，因为构成实体 ID 的列的顺序与连接列的顺序相同。您应该指定每个连接列的引用列名，以使事情更清晰、更安全：

```
@JoinColumn(name="ID_ESCALA", insertable=false, updatable=false, referencedColumnName="ID_ASCALA"),
@JoinColumn(name="ANO", insertable=false, updatable=false, referencedColumnName="ANO"),
... 
```

不过，带有连接表的 OneToOne 真的很奇怪。

# c++ - C++ Destructor 无法正常工作，编译错误，只是试图用 destr 删除一个成员变量

> ID：11342734
> 
> 赞同：0
> 
> 时间：2012-07-05T10:45:36.300
> 
> 标签：c++, destructor

下面的类将使用成员变量`newTodayTaskString`( `string`) 启动。

销毁对象时，我喜欢删除字符串，但是在编译项目时，我收到一条指向析构函数删除行的错误消息：

**删除：std::string 无法转换为 void**

班级：

```
class TodayTask {
private:   
    string newTodayTaskString;

public: 
    TodayTask (string t) : newTodayTaskString (t){}

    // Destr.
    ~TodayTask () {
        delete newTodayTaskString;
    }

    string getTodayTaskString () const {
        return newTodayTaskString;
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T10:54:37.767

`delete`必须给定一个指针，并且只能用于销毁用 . 创建的对象`new`。

在这种情况下，对象是类成员，因此会自动销毁。你不需要在析构函数中对它做任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T10:52:42.050

在 C++ 中，内存可以自动或手动分配。如果你定义一个简单的变量，它的内存会自动分配在[*Stack*](http://en.wikipedia.org/wiki/Stack-based_memory_allocation)中。然后自动释放内存。例如：

```
void foo()
{
    std::string s;//memory is allocated here
}//the variable only lives inside the function, so at this point the memory is freed 
```

*第二种方法是使用操作符 new*手动分配内存，如下所示：

```
void foo()
{
    int * i = new int();//we allocate the memory for our variable here.
} 
```

在这里，内存分配在[*堆中*](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)，它**不会**在函数结束时或其他任何地方自动释放，直到您的程序结束。在这种情况下，您需要调用*operator delete*，但您**只能**为每个变量调用一次：

```
void foo()
{
    int * i = new int();
    <...some code...>
    delete i;//we free the memory at this point.
} 
```

请注意，如果您尝试删除相同的变量两次，您可能会遇到分段错误。

在您的情况下，您尝试手动删除尚未手动为其分配内存的变量，这会导致错误。在您的情况下，您不需要使用析构函数，一切都会自动完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T10:49:05.400

您应该`delete`仅在使用创建它时使用`new`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T10:54:37.123

`delete`仅在使用 . 创建对象时才需要`new`。在这种情况下，您的对象会在构造函数之前自动创建，因为它是一个成员变量。因此，在调用析构函数后它会自动销毁。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T10:47:33.657

您不会“删除”newTodayTaskString，因为它还没有被分配“new”。它是一个成员变量——它会被自动构造和销毁，你不需要做任何事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T10:47:42.687

您不需要删除`newTodayTaskString`，因为分配内存的不是您

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T11:09:32.327

你真的不必删除字符串。它不是动态分配的。

只要记住这一点：当你新的东西时使用删除。当你新建一个数组时使用 delete[] 。

# c# - 如何在 C# 中创建锯齿状数组？

> ID：11342735
> 
> 赞同：3
> 
> 时间：2012-07-05T10:45:37.273
> 
> 标签：c#, arrays, multidimensional-array

我熟悉C。我可以这样写：

```
uint array[0xFFFF][20]; 
```

但我不知道如何在 Csharp 中做到这一点。我尝试了所有 MS 教程和其他教程，但没有运气。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T10:47:23.327

[官方教程](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)。基本上，您首先创建“外部”数组，然后循环遍历它，并单独创建每个“内部”数组。

两个例子：

```
int[][] a = new int[] { new int[]{ 1, 2 }, new int[]{ 3, 4, 5, 6, 7 }};

int[][] c = new int[100][];
for (int i = 0; i < c.length; i++) c[i] = new int[5]; 
```

如果您只需要一个二维矩形阵列，您可以使用`int[,] b = new int[10, 7];`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:47:32.290

```
int[][] jaggedArray = new int[3][];
jaggedArray[0] = new int[5];
jaggedArray[1] = new int[4];
jaggedArray[2] = new int[2]; 
```

或者

```
jaggedArray[0] = new int[] { 1, 3, 5, 7, 9 };
jaggedArray[1] = new int[] { 0, 2, 4, 6 };
jaggedArray[2] = new int[] { 11, 22 }; 
```

请参阅[交错数组（C# 编程指南）](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T10:51:36.320

我不知道在 C 中，但在 c# 中，您可以使用锯齿状数组，例如：

```
// Declare local jagged array with 3 rows.
    int[][] jagged = new int[3][];

    // Create a new array in the jagged array, and assign it.
    jagged[0] = new int[2];
    jagged[0][0] = 1;
    jagged[0][1] = 2;

    // Set second row, initialized to zero.
    jagged[1] = new int[1];

    // Set third row, using array initializer.
    jagged[2] = new int[3] { 3, 4, 5 };

    // Print out all elements in the jagged array.
    for (int i = 0; i < jagged.Length; i++)
    {
        int[] innerArray = jagged[i];
        for (int a = 0; a < innerArray.Length; a++)
        {
        Console.Write(innerArray[a] + " ");
        }
        Console.WriteLine();
    } 
```

[http://www.dotnetperls.com/jagged-array](http://www.dotnetperls.com/jagged-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T13:06:38.313

我认为这可能会帮助你

```
 static void Main(string[] args)
    {
        Console.WriteLine("enter the size of rows");

        int n = Convert.ToInt32(Console.ReadLine());

        int[][] a = new int[n][];
        for (int i = 0; i < a.Length; i++)
        {
            Console.WriteLine("enter the number of elements for row {0}", i + 1);
            int x = Convert.ToInt32(Console.ReadLine());
            a[i]=new int[x];
            for (int j = 0; j < a[i].Length; j++)
            {
                a[i][j] = Convert.ToInt32(Console.ReadLine());
            }
        }
        for (int i = 0; i < a.Length; i++)
        {
            for (int j = 0; j < a[i].Length; j++)
            {
                Console.Write(a[i][j]+"\t"); 
            }
            Console.WriteLine();
        }

            Console.ReadKey();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T18:47:50.287

```
namespace jaggedarray
{
    class Program
    {
        static void Main(string[] args)
        {

            int[][] jagged = new int[5][];
            jagged[0] = new int[4] { 22, 33,44,55 };
            jagged[1] = new int[1] { 2 };
            jagged[2] = new int[4] { 1, 2, 3, 4 };
            jagged[3] = new int[2] { 12,13};
            jagged[4] = new int[1] {2};
            for (int i = 0; i < jagged.Length; i++ ) {
                for (int j = 0; j < jagged[i].Length; j++)
                {
                    Console.Write("\t{0}",jagged[i][j]);
                }
                Console.WriteLine();
                Console.WriteLine();
            }

            // input jagged array

            int [][] arrays=new int[5][];
            Console.WriteLine("Please Enter the ValueType to make a jagged array:");
            arrays[0] = new int[1];
            arrays[1] = new int[2];
            arrays[2]=new int [3];
            arrays[3]=new int [4];
            arrays[4] = new int[5];
            for (int i = 0; i < arrays.Length;i++ ) {

                for (int j = 0; j < arrays[i].Length; j++)
                {
                    arrays[i][j] = Convert.ToInt32(Console.ReadLine());
                }
            }

            Console.WriteLine("This is jagged array::");
            for (int i = 0; i < arrays.Length;i++ ) {

                for (int j = 0; j < arrays[i].Length;j++ ) {
                    Console.Write("\t{0}", arrays[i][j]);

                }
                Console.WriteLine();
            }
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-18T18:24:22.477

创建和显示锯齿状数组的元素

```
 int[][] a = new int[2][];//its mean num of row is 2 which fixed
        int choice;//thats i left on user choice that how many number of column in each row he wanna to declare

        for (int row = 0; row < a.Length; row++)
        {
            Console.WriteLine("pls enter number of colo in row {0}", row);
            choice = int.Parse(Console.ReadLine());
            a[row] = new int[choice];
            for (int col = 0; col < a[row].Length; col++)
            {
                a[row][col] = int.Parse(Console.ReadLine());
            }
        }
        //loop for out put the values of jagged array
        for (int row = 0; row < a.Length; row++)
        {
            for (int col = 0; col < a[row].Length; col++)
                Console.Write(a[row][col]+"\t");
            Console.WriteLine("");
        } 
```

在我使用的插入循环中

> a[行].length

代替

> a.长度，

背后的原因是每一行都有不同的列数，所以在第二个循环中你必须提到每行的长度

# javascript - 使用 Jasmine 和 Sublime Text 2

> ID：11342741
> 
> 赞同：3
> 
> 时间：2012-07-05T10:46:08.787
> 
> 标签：javascript, bdd, jasmine, sublimetext2

我找到了一个插件，可以在 sublime text 2 中集成茉莉花测试，[https://github.com/gja/sublime-text-2-jasmine](https://github.com/gja/sublime-text-2-jasmine)，但我无法让它工作。它看起来像 TextMate 插件的一个端口。

有人知道如何使它正常工作吗？

提前致谢

编辑：实际上插件并没有将崇高与茉莉花集成......运气不好:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T14:44:06.467

所说的包唯一增加的是从模块切换到其规范的能力。[您可以使用出色的Sublime Package Control](http://wbond.net/sublime_packages/package_control)轻松干净地安装`Jasmine`执行相同操作的软件包。

# javascript - 获取所有类名的 HTML

> ID：11342746
> 
> 赞同：0
> 
> 时间：2012-07-05T10:46:19.113
> 
> 标签：javascript, jquery, html

如何获取多次使用类名的类名的所有html

```
jQuery().ready(function(){
    $("span.feeditemtext.cxfeeditemtext").each(function() {
        alert(this.html());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:48:13.943

采用

```
alert(this.innerHTML); 
```

或者

```
alert($(this).html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:47:31.667

```
$("span.feeditemtext.cxfeeditemtext").each(function() {
   alert($(this).attr('class'))
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:50:54.043

使用`$(this).html()`不`this.html()`也给空间

`span.feeditemtext``.cxfeeditemtext`在你的选择器中

`$("span.feeditemtext.cxfeeditemtext")`

像这样：

```
$("span.feeditemtext .cxfeeditemtext").each(function() {
    alert($(this).html());
}); 
```

**查看演示：http:** [//jsfiddle.net/rathoreahsan/wHVdN/5/](http://jsfiddle.net/rathoreahsan/wHVdN/5/)

# eclipse - 如何将 Eclipse 项目正确转换为 Maven 项目？

> ID：11342757
> 
> 赞同：1
> 
> 时间：2012-07-05T10:47:09.003
> 
> 标签：eclipse, maven

我在 Eclipse 动态 Web 项目中创建。然后我从右键菜单的“配置”中选择了“转换为 Maven 项目”选项。现在我可以在我的项目中的 Java Resources 文件夹上看到红色错误。但是没有一个子文件夹出现红色错误。我可以通过什么方式解决这个问题？我正在使用 Eclipse Juno 和 m2e 插件。我已经认识到 m2n 插件没有在 Java 资源中创建 src/main/java、src/main/resources 和 src/main/webapp 目录。但错误仍然相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:04:55.063

该过程手动进行。您需要创建一个 pom.xml 并[更改您的文件夹结构以遵循 Mavens 约定](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。我建议[通过 maven 原型创建一个 Web 项目，](http://maven.apache.org/guides/mini/guide-webapp.html)并逐步将您的项目移动到新结构中。

# language-agnostic - 将图数据表示为键值对象

> ID：11342758
> 
> 赞同：20
> 
> 时间：2012-07-05T10:47:12.993
> 
> 标签：language-agnostic, graph, key-value, graph-databases

我开始深入研究图形数据库，但我不知道这些图形是如何在内部存储的。假设我有这张图（取自[维基百科](http://en.wikipedia.org/wiki/Graph_database)）：

![](../Images/0f3f4d8cad1412016ad7f1afa2f5ec63.png)

**如何将此图序列化为键值对象？**（例如 Python 字典）

我想象两个字典，一个用于顶点，一个用于边缘：

```
{'vertices':
 {'1': {'Name': 'Alice', 'Age': 18},
  '2': {'Name': 'Bob', 'Age': 22},
  '3': {'Type': 'Group', 'Name': 'Chess'}},
 'edges':
 {'100': {'Label': 'knows', 'Since': '2001/10/03'},
  '101': {'Label': 'knows', 'Since': '2001/10/04'},
  '102': {'Label': 'is_member', 'Since': '2005/7/01'},
  '103': {'Label': 'Members'},
  '104': {'Label': 'Members'},
  '105': {'Label': 'is_member', 'Since': '2011/02/14'}},
 'connections': [['1', '2', '100'], ['2', '1', '101'],
                 ['1', '3', '102'], ['3', '1', '103'],
                 ['3', '2', '104'], ['2', '3', '105']]} 
```

但我不确定，这是否是最实际的实现。也许“连接”应该在“顶点”字典中。那么，使用键值对象实现图形数据存储的最佳方式是什么？我可以在哪里阅读更多关于它的信息？

可能相关，但不重复：[如何在某些数据结构中表示一个奇怪的图](https://stackoverflow.com/q/6376586/596361)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-18T07:04:37.183

正常模式是没有单独的`connections`结构，而是将信息放入`edges`结构中。这给出了类似的东西：

```
{
'vertices': {
    '1': {'Name': 'Alice', 'Age': 18},
    '2': {'Name': 'Bob', 'Age': 22},
    '3': {'Type': 'Group', 'Name': 'Chess'} },
'edges': [
    {'from': '1', 'to': '2', 'Label': 'knows', 'Since': '2001/10/03'},
    {'from': '2', 'to': '1', 'Label': 'knows', 'Since': '2001/10/04'},
    {'from': '1', 'to': '3', 'Label': 'is_member', 'Since': '2005/7/01'},
    {'from': '3', 'to': '1', 'Label': 'Members'},
    {'from': '3', 'to': '2', 'Label': 'Members'},
    {'from': '2', 'to': '3', 'Label': 'is_member', 'Since': '2011/02/14'} ] } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T23:02:15.367

似乎没问题 - 每个对象都有它，没有重复。它有利于“阅读和处理目的”。但没有“最佳”代表。它总是取决于你的目的。您希望能够通过名称快速找到顶点吗？或按日期边缘？或者您想快速测试两个顶点是否连接？或相反 - 您想快速修改图表的某些部分？每个目的都需要不同的数据库表数据结构

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-29T23:33:15.377

> 这些图表是如何在内部存储的
> 
> 如何将此图序列化为键值对象

这些问题是不同的，他们需要不同的答案。

在前一种情况下，主要要求可能是有效地执行复杂的查询。
我建议调查现有的工业强度解决方案。

在 NoSQL 术语中，这些嵌套的键值对象是*文档*。因此，人们可以研究图形是如何存储在“分层”多模型数据库中的：

*   支持图数据模型，*以及*
*   使用底层文档数据模型。

此类数据库的示例包括 ArangoDB、OrientDB、Azure CosmosDB。

您也可以将“文档数据模型”替换为“宽列数据模型”，因为可以将宽列数据模型视为二维键值模型。

此类数据库的示例是 DataStax Enterprise Graph，也许还有 Grakn。

* * *

例如，在 ArangoDB 中，边[存储](https://docs.arangodb.com/3.4/Manual/Graphs/Edges/)为常规文档，但存储在特殊集合中。

显然，使用的数据结构可能伴随着额外的索引等（[或没有](https://www.arangodb.com/2016/04/index-free-adjacency-hybrid-indexes-graph-databases/)）。

* * *

> 那么，使用键值对象实现图形数据存储的最佳方式是什么？
> 
> 我可以在哪里阅读更多关于它的信息？

我建议来自 ArangoDB 的另一篇文章：

*   [将图形存储在纯文档存储中](https://medium.com/@neunhoef/graphs-in-data-modeling-is-the-emperor-naked-2e65e2744413#a73d)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-31T10:05:27.350

我会对 Eamonn 的回答做一些改动。

每个顶点和边都有 3 个东西.. id、Label 和 Properties

```
{
'vertices': {
    '1': {'Label' : Person, 'Properties' : { 'Name': 'Alice', 'Age': 18}},
    '2': {'Label' : Person, 'Properties' : {'Name': 'Bob', 'Age': 22}},
    '3': {'Label': 'Group', 'Properties' : { 'Name': 'Chess'} },
'edges': [
    '4' : {'from': '1', 'to': '2', 'Label': 'knows', 'Properties':{'Since': '2001/10/03' , 'Until' : '2001/10/03'}},
    '5' : {'from': '2', 'to': '1', 'Label': 'knows', 'Properties':{'Since': '2001/10/04', 'Until' : '2001/10/05'}}
 ]
} 
```

这样，您可以按顶点/边、它们的标签和它们的属性进行查询。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-31T13:33:38.383

我会像这样序列化它，除了你应该根据你正在查找的内容选择键。我假设您使用的是 id，但也许使用名称可能会更好。

```
{
    'members': {
        '1': {
            'id': '1',
            'name': 'Alice',
            'age': 18,
            'groups': {
                '3': {
                    'path': 'groups.3',
                    'since': '2005-07-01'
                }
            },
            'knows': {
                '2': {
                    'path': 'members.2',
                    'since': '2001-10-03'
                }
            }
        },
        '2': {
            'id': '2',
            'name': 'Bob',
            'age': 22,
            'groups': {
                '3': {
                    'path': 'groups.3',
                    'since': '2011-02-14'
                }
            },
            'knows': {
                '1': {
                    'path': 'members.1',
                    'since': '2001-10-04'
                }
            }
        }
    },
    'groups': {
        '3': {
            'id': '3',
            'name': 'Chess',
            'members': {
                '1': { 'path': 'members.1' },
                '2': { 'path': 'members.2' }
            }
        }
    }
} 
```

如果您有一种方法可以序列化对图的其他部分的引用，那么您可以将图直接序列化为键值对，这就是我所使用`'path'`的。如果我将其反序列化为字典，我可能会考虑将路径值替换为它们所引用的实际字典。请记住，这可能会导致循环引用，如果您将其序列化为 json 或其他内容，可能会导致问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-31T14:04:10.420

我也会为结构添加邻接。我的看法是这样的，

```
{
  'vertices': {
    '1': {'Name': 'Alice', 'Age': 18},
    '2': {'Name': 'Bob', 'Age': 22},
    '3': {'Type': 'Group', 'Name': 'Chess'} 
   },
'edges': {
 '100' : {'from': '1', 'to': '2', 'Label': 'knows', 'Since': '2001/10/03'},
 '101': {'from': '2', 'to': '1', 'Label': 'knows', 'Since': '2001/10/04'},
 ....
  },
'adjacency': {
  '1': ['101', '102'],
  ...
  }
} 
```

这样我可以很容易地找到与我的顶点相邻的边，而不是遍历所有边。

# matlab - Matlab主成分回归（pcr）分析中的常数项

> ID：11342759
> 
> 赞同：3
> 
> 时间：2012-07-05T10:47:15.177
> 
> 标签：matlab, components, regression, principal

我正在尝试使用 Matlab 学习主成分回归（pcr）。我在这里使用本指南：http: [//www.mathworks.fr/help/stats/examples/partial-least-squares-regression-and-principal-components-regression.html](http://www.mathworks.fr/help/stats/examples/partial-least-squares-regression-and-principal-components-regression.html)

这真的很好，但我只是无法理解一个步骤：

我们做 PCA 和回归，很好很清楚：

```
[PCALoadings,PCAScores,PCAVar] = princomp(X);
betaPCR = regress(y-mean(y), PCAScores(:,1:2)); 
```

然后我们调整第一个系数：

```
betaPCR = PCALoadings(:,1:2)*betaPCR;
betaPCR = [mean(y) - mean(X)*betaPCR; betaPCR];
yfitPCR = [ones(n,1) X]*betaPCR; 
```

为什么系数需要`'mean(y) - mean(X)*betaPCR'`为常数一个因素？你能给我解释一下吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:13:25.697

This is really a math question, not a coding question. Your PCA extracts a set of features and puts them in a matrix, which gives you `PCALoadings` and `PCAScores`. Pull out the first two principal components and their loadings, and put them in their own matrix:

```
W = PCALoadings(:, 1:2)
Z = PCAScores(:, 1:2) 
```

The relationship between `X` and `Z` is that `X` can be approximated by:

```
Z = (X - mean(X)) * W      <=>      X ~ mean(X) + Z * W'                  (1) 
```

The intuition is that `Z` captures most of the "important information" in `X`, and the matrix `W` tells you how to transform between the two representations.

Now you can do a regression of `y` on `Z`. First you have to subtract the mean from `y`, so that both the left and right hand sides have mean zero:

```
y - mean(y) = Z * beta + errors                                           (2) 
```

Now you want to use that regression to make predictions for `y` from `X`. Substituting from equation (1) into equation (2) gives you

```
y - mean(y) = (X - mean(X)) * W * beta

            = (X - mean(X)) * beta1 
```

where we have defined `beta1 = W * beta` (you do this in your third line of code). Rearranging:

```
y = mean(y) - mean(X) * beta1 + X * beta1

  = [ones(n,1) X] * [mean(y) - mean(X) * beta1; beta1]

  = [ones(n,1) X] * betaPCR 
```

which works out if we define

```
betaPCR = [mean(y) - mean(X) * beta1; beta1] 
```

as in your fourth line of code.

# css - 为什么 CSS 子元素大于父元素（可排序）？

> ID：11342762
> 
> 赞同：2
> 
> 时间：2012-07-05T10:47:24.837
> 
> 标签：css, hover, css-position, parent

我有一个带有几个 LI 的 UL。在这些里有表（每里1个）。

我使用 mootools 使我的 li 可拖动/可排序。不过，我将把 JavaScript 排除在外，因为它不是问题的一部分。

一切都很好，除了我不希望我的整个 li （以及子表）都是可拖动的。可以说只是一小部分。

然后我试图“相对和绝对”摆脱这个，但是 li 的“悬停”效果仍然存在......所以当我悬停我的（子）表时，（父）li 总是显示它：悬停效果. 这是不应该的！

```
<ul>
  <li>
    <table cellpadding="0" cellspacing="0">
      <tr>
        <td>...</td>
        <td><a href="foobar.html">foobar</a></td>
        <td>...</td>
        <td>...</td>
        <td>...</td>
      </tr>
    </table>
  </li>
</ul>

<style>
  ul {
    list-style: none;
    margin: 0;
    padding: 0;
    float: left;
  }

  li {
    background-color: red;
    width: 25px;
    height: 25px;
    float: left;
    clear: both;
  }

  li:hover {
    background-color: green;
    cursor: move;
  }

  li table {
    border: 1px solid #eee;
    width: 850px;
    position: absolute;
  }
</style>
```

如果你应用这个，你会看到实际的 li 是 25x25。但是当你悬停在桌子上时， li 变成绿色（只是那个 25x25 部分）......

只有那个 25x25 的部分应该响应悬停！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:08:38.293

当您将鼠标悬停在 的`table`子级上时，您也会`li`触发.`:hover``li`

一个解决方案可能是**将一个类应用于所有 li 里面有一个表**：

```
<li class="withTable">
    <table cellpadding="0" cellspacing="0">
        <tr>
            <td>...</td>
            <td><a href="foobar.html">foobar</a></td>
            <td>...</td>
            <td>...</td>
            <td>...</td>
        </tr>
    </table>
</li> 
```

**并将此规则添加到您的 CSS 中**：

```
li.withTable:hover {
        background-color:transparent;
        cursor:default;
} 
```

显然，您可以根据需要设置另一种颜色

```
li.withTable:hover {
        background-color:blue;
        cursor:default;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:51:46.170

问题在于您的标记。您在列表项 (li) （的兄弟）中有表格，因此您应用于 li 的任何效果/样式都将应用于其中的所有内容；因此，为什么当您将鼠标悬停在桌子上时，li 会变成绿色。

# c - 使用 opengl 在游戏过程中拍摄快照

> ID：11342766
> 
> 赞同：0
> 
> 时间：2012-07-05T10:47:33.747
> 
> 标签：c, opengl-es, blackberry-playbook

我正在为黑莓剧本开发一款游戏，在该游戏中，要求在游戏过程中它应该在随机位置拍摄快照，为此我正在使用以下 open GL 功能

glGetIntegerv(GL_FRAMEBUFFER_BINDING_OES, 参数);

现在我有两个问题

1.  执行后，此函数在 params (GLUInt*) 中设置 NULL，如果是这样，这是某种错误，我该如何解决此错误。
2.  这是获取快照的正确功能吗，如果没有我应该使用什么其他功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:51:52.957

[使用glReadPixels](http://www.khronos.org/opengles/documentation/opengles1_0/html/glReadPixels.html)可能会更幸运。此函数将帧缓冲区的一部分复制到客户端内存中。

（我假设您使用的是 OpenGL ES，因为您提到了移动设备。）

# javascript - jquery ui dateinput 替代字段

> ID：11342770
> 
> 赞同：0
> 
> 时间：2012-07-05T10:47:43.880
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery ui dateinput，当用户单击一个小图像时，我正在显示日历。在日历中，我将选择器设置为 true，因此它还显示月份和年份。我想要的是将所选日期作为值传递到文本框中。

到目前为止，我做到了这一点。

```
$("img[id='CalIcon']").data("dateinput").onHide(function(e){
   var dt = $("img[id='CalIcon']").data("dateinput").getValue('dd-mm-yyyy');
   $('#relativeDOB').attr({value:dt});
}); 
```

问题是我选择的任何年份或月份都只通过当前。这一天工作得很好。

有任何想法吗？谢谢

# android - 具有多个值的 SQLite 列

> ID：11342771
> 
> 赞同：1
> 
> 时间：2012-07-05T10:47:47.220
> 
> 标签：android, sql, database, sqlite

我在 SQLite 数据库中有 3 个表：

**歌曲：**

```
_id | name | length | artist_id | album_id 
```

**艺术家：**

```
_id | name 
```

**专辑：**

```
_id | name 
```

* * *

我需要`artist_id`在`Songs`表中才能拥有多个值。实现这一目标的最佳方法是什么？

1- 将其设为字符串字段，其值类似于：`1, 2, 5`，其中每个数字代表`Artists`表中的一个 id。

2-为表中的每条记录创建一个表`Songs`，其中每个表都有多个值（似乎非常糟糕的解决方案？！）。

3-创建一个包含以下字段的表：

```
_id | artist_id 
```

where`_id`表示`_id`在`Songs`表中，不是主键。While`artist_id`是艺术家的 id。

* * *

**问题的第二部分：**

如果我正确创建了 3 个表，我如何编写查询以获得下表：

```
_id | name | length | artist1_id | artist1_name | artist2_id | artist2_name | ... 
```

我将一首歌的所有艺术家放在一张桌子上（尽管大多数歌曲只有一个艺术家，有些没有）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:33:14.860

情况是你有*一个* **艺术家**可以写*很多*首歌，而*一* **首歌**可以由*很多*艺术家写。

这结束了关联[多对多](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)。通常，这种类型的关系由存储关系的附加表表示，在您的情况下将是

**艺术家_歌曲：**

```
artist_id | song_id 
```

**然后，您应该从Artist**表中删除该列。然后数据库将在[3NF中](http://en.wikipedia.org/wiki/Third_normal_form)[标准化](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)。

这种方法不是经验法则，有时会因为数据库解析数据需要额外的工作量而改变。

就第二个问题而言，这取决于数据库模式。如果您使用上述结构，那么您将必须连接表格以获得所有必需的信息，但这些信息将按行显示，那么您应该旋转以在列中表示艺术家。

顺便提一句。请不要忘记一首歌可以出现在不同的专辑中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:00:30.420

1个问题：歌曲中的artist_id。典型的主从表

2问题：我想最简单的方法是返回一个如下所示的数据集，虽然动态创建列很困难，但解析起来更容易，而且sqlite在做这些事情时并不那么合作：

歌曲ID | 艺术家 ID

上面的数据集应该有重复的条目，因为一个艺术家有不止一首歌曲，这样通过艺术家姓名的简单排序，你可以非常整齐地排序。然后对于所有必要的歌曲，只需进行第二次选择

从 song_id 在 (1,2,3,4,...) 中的歌曲中选择 [字段]；

这将返回一个包含歌曲所有必要信息的新数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:07:36.967

为什么艺术家、专辑和歌曲的 ID 相同？

如果您制作artist_id 和album_id 外键，您将有一个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:08:01.290

对于您问题的第一部分，我建议您将第三个提案作为遵循的方式。您可以通过执行以下查询来简单地获取歌曲来跳过表创建（如果需要）：

```
select Songs.* 
from Songs, Artists
where Songs.id = Artists.id and Artists.id = $the_id_of_the_artist_whose_songs_you_want_to_get$ 
```

对于您问题的第二部分，我不知道您是否可以按照您的建议做，但这里有一个类似但不准确的解决方案。您可以使用此查询创建视图：

```
create view your_view as
select songs.id, songs.name, songs.length, artists.id, artists.name
from songs
left outer join artists
on songs.id = artists.id
where songs.id = &the_id_of_the_song_you_want& 
```

但是，在我看来，您可以使用查询来获得您想要的结果，如下所示：

```
select songs.id, songs.name, songs.length, artists.id, artists.name
from songs
left outer join artists
on songs.id = artists.id
where songs.id = &the_id_of_the_song_you_want& 
```

以上将为歌曲中的每个艺术家返回多行，但不会返回多列。

# jsp - 将会话变量从一只耳朵传递到另一只耳朵

> ID：11342772
> 
> 赞同：3
> 
> 时间：2012-07-05T10:47:47.797
> 
> 标签：jsp, jboss, struts2

实际上我已经在 jboss 5.x 服务器上部署了两个耳朵 test.ear 和 test1.ear。test.ear 在这个 jsp 中包含 index.jsp 页面，我设置了一个会话变量，如：

```
session.setAttribute("Initiated","true") 
```

从 index.jsp 我将控制转发到 test1.ear 中的 action(struts2 action class) 类。但是当我从动作类中检索变量时，它是空的

```
Map session = (Map)ActionContext.getContext().getSession();
String sessionExistence=(String)session.get("Initialted"); 
```

那么我如何将会话变量从 test.ear 的 jsp 共享到 test1.ear 中的 struts2 动作类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:52:00.033

您不能在不同的应用程序之间进行共享会话。原因很简单，属性名称会有冲突，可能会导致值被覆盖。

在转发到另一个应用程序时，您只能随请求一起发送参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:01:25.257

如果您想在多个不同应用程序之间共享内存中（或持久性）信息，请考虑使用 Infinispan 之类的数据网格，[请](http://www.infinispan.org) 参阅[Infinispan 教程](http://www.mastertheboss.com/jboss-application-server/248-infinispan-tutorial-part-1.html)以开始使用。希望能帮助到你。

# c# - Flickr API 从 URL 上传照片

> ID：11342774
> 
> 赞同：1
> 
> 时间：2012-07-05T10:47:48.317
> 
> 标签：c#, upload, flickr

我有一个带有照片库的网站，我想将每张照片（一张一张）上传到我的 Flickr 帐户。我设法从本地磁盘上传了一张照片，但是有没有办法指定 URL，以便从该 URL 中挑选图像并上传到 Flickr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:55:49.127

根据文档（http://www.flickr.com/services/api/upload.api.html 和[http://www.flickr.com/services/api/upload.example.html](http://www.flickr.com/services/api/upload.example.html)），唯一的方法是上传是通过将图像的字节放在网络上。 ~~但是，根据您的实现语言（您的 SO 问题标签未指定语言），可能有一个库可以为您将 URL 转换为可上传的字节。~~

**更新**

Flickr 链接到[FlickrNet](http://flickrnet.codeplex.com/)，其中可能包含可以将 URL 转换为可上传字节的代码。该项目的文档看起来很少，但显然由[Sam Judson](http://www.codeplex.com/site/users/view/samjudson)积极维护。

# c++ - 在全局夹具中使用系统提升 UTF

> ID：11342776
> 
> 赞同：1
> 
> 时间：2012-07-05T10:47:52.250
> 
> 标签：c++, unit-testing, boost, fixture

我正在尝试在 Boost UTF 全局装置中检查正在运行的服务器进程。我正在像这样在我的夹具构造函数中调用系统来执行此操作...

```
class MyTestFixture
{
public: 
    MyTestFixture(); 
    ~MyTestFixture() ;

};

MyTestFixture::MyTestFixture()
{

    int rc = system("pidof myserver > /dev/null");
    if ( rc != 0 )
    {
        cout << "myserver not running so cannot continue" << endl;
        fflush (stdout) ;
        sleep(10);
        exit(4) ;
    }

    cout << "fixture setup ok!" << endl ;
}

BOOST_GLOBAL_FIXTURE( MyTestFixture );

BOOST_AUTO_TEST_CASE( pgmiia_main_test1 )
{
// some test code...
} 
```

当“myserver”运行正常时，一切都很好，但是当它不是时，我会崩溃。它不会进入 if 部分并退出。奇怪的是，如果我在 gdb 中运行它而 myserver 没有运行，它确实会像我预期的那样进入我的退出分支。

我对 Boost UTF 有点陌生。我正在使用动态链接执行此操作。有任何想法吗？

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:58:26.273

据我记得，如果没有运行，`pidof -s 'proc_name'`则返回 0 ，否则返回 PID。`proc_name`由于`system`应该返回被调用进程的 retval，因此您实际上是在测试进程是否正在运行：`rc != 0`，而`rc == 0`测试进程是否未运行。不确定问题是否与 Boost 细节有关。

# c# - 使用 LINQ 进行分组/多重分组

> ID：11342781
> 
> 赞同：7
> 
> 时间：2012-07-05T10:48:06.283
> 
> 标签：c#, .net, linq, group-by

我正在尝试输出一些数据，分组，然后再次分组。

这是一些示例数据（来自 db）

![示例数据](../Images/1f11811bc40a132ae3a563b9269326f3.png)

我正在尝试输出这个，分组如下：

```
Best Type Name
 - Discipline name
   -- Result  
   -- Result
   -- Result 
```

CompetitorBest 类看起来像：

```
public class CompetitorBest
{
    public int ResultId { get; set; }
    public string BestTypeName { get; set; }
    public int BestTypeOrder { get; set; }
    public string DisciplineName { get; set; }
    public string ResultValue { get; set; }
    public string Venue { get; set; }
    public DateTime ResultDate { get; set; }
} 
```

目前，我有以下

```
var bestsGroups = from b in Model.CompetitorBests
                  group b by new { b.BestTypeName, b.BestTypeOrder }
                  into grp
                  orderby grp.Key.BestTypeOrder
                  select new
                  {
                      BestType = grp.Key.BestTypeName,
                      Results = grp.ToList()
                  }; 
```

但这显然没有考虑到 DisciplineName 的分组。
我的输出代码类似于：

```
foreach (var bestsGroup in bestsGroups)
{
    <h2>@bestsGroup.BestType</h2>

    foreach (var result in bestsGroup.Results)
    {
        //i am guessing here i'll need another foreach on the discipline group....
        <p>@result.DisciplineName</p>
        <p>@result.ResultId </p>
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T11:30:36.607

我认为这就是你要找的：

```
from b in Model.CompetitorBests
group b by new { b.BestTypeName, b.BestTypeOrder } into grp
orderby grp.Key.BestTypeOrder
select new
{
    BestType = grp.Key.BestTypeName,
    Results = from d in grp
              group d by d.DisciplineName into grp2
              select new
              {
                  DisciplineName = grp2.Key,
                  Results = grp2
              }
}; 
```

**编辑：**

像这样迭代它：

```
foreach (var bestsGroup in bestsGroups)
{
    <h2>@bestsGroup.BestType</h2>

    foreach (var discipline in bestsGroup.Results)
    {
        <p>@discipline.DisciplineName</p>

        foreach (var result in discipline.Results)
        {
            <p>@result.ResultId</p>
        }
    }
} 
```

# json - 来自 Backbone.js 的 WCF Rest Post 始终在服务器上接收空对象

> ID：11342782
> 
> 赞同：0
> 
> 时间：2012-07-05T10:48:08.940
> 
> 标签：json, wcf, rest, backbone.js

我正在使用主干.js 并将模型 ( todo ) 发布到 wcf Rest 服务，您可以在下面找到其详细信息。由于某种原因，无论发布的 json 是什么，实现总是收到一个空值。

### 合同

```
 [WebInvoke(ResponseFormat = WebMessageFormat.Json, Method = "POST", UriTemplate = "Todos", RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    [OperationContract]
    Wallet CreateTodos(Todo instance); 
```

### 执行

```
 public Wallet CreateTodos(Todo instance)
    {
        if (instance == null)
        {
            WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.NotAcceptable;
            return null;
        }

      ... blah blah blah 
```

### 数据合约

```
[DataContract]
Public Class Todo
{    
  [DataMember]
  public string Name{get;set;}    
} 
```

### 发布 Json

{“姓名”：“欢迎客人”}

### Http 详细信息

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Content-Length:281
Content-Type:application/json
Host:localhost
Origin:http://localhost
Pragma:no-cache
Referer:http://localhost/todos/index.html
X-Requested-With:XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:12:20.937

您的原始请求应如下所示：

```
POST http://localhost:54897/Sample.svc/Todos HTTP 1.1
Content-Type: application/json
Host: localhost

{"instance":{"Name":"This is my first todo"} 
```

# jquery - 使用jquery延迟，然后淡出并删除

> ID：11342789
> 
> 赞同：1
> 
> 时间：2012-07-05T10:48:37.303
> 
> 标签：jquery, css, fadeout

我在一个网站上有一个对话，我正在努力通过执行以下操作来开始工作。

它的构建使用 .append() 等待 5 秒，然后是 fadeout() 和 remove()。我写了以下内容，但似乎不起作用。

**html**

```
<div class="addAddressDialog"></div>
<div class="overlay"></div> 
```

**js**

```
 $(".addAddressDialog").append("<span> Thank you </span>")
     .delay(5000)
     .queue(function(next){
      $('.addAddressDialog, .overlay').fadeOut('fast',function(){$(this).remove()});                                
    }); 
```

[http://jsfiddle.net/mynameisdonald/pAzyc/](http://jsfiddle.net/mynameisdonald/pAzyc/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T10:53:33.537

更新小提琴 - [http://jsfiddle.net/pAzyc/2/](http://jsfiddle.net/pAzyc/2/)

不要调用`remove`回调函数

```
 $('.overlay').css("height",$(document).height());

    $(".addAddressDialog").append("<span> Thank you </span>").delay(5000).queue(function(next){
      $('.addAddressDialog, .overlay').fadeOut('fast').remove(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:02:04.927

稍微修改了你的小提琴 - [http://jsfiddle.net/shershen08/pAzyc/6/](http://jsfiddle.net/shershen08/pAzyc/6/)所以现在它可以工作了。问题是 $(this) 只指向一个元素，但如果你想将函数应用于多个元素，你可以使用 $.each

# java - 在服务器运行时将表内容从 Oracle DB 加载到 Spring Bean

> ID：11342790
> 
> 赞同：1
> 
> 时间：2012-07-05T10:48:38.827
> 
> 标签：java, spring, spring-mvc, spring-webflow

1.  我有一个`Oracle11 DataBase`有两列的表（`KEY(varchar2)`，`PROPERTY(varchar2)`）的表。
2.  通过使用 Spring 框架，我想将表中的全部内容（所有行）加载到 Spring Bean 中，而不是从**DataBase中获取值**我就可以使用 Bean
3.  我使用了 Bean 类“ `org.apache.commons.configuration.DatabaseConfiguration`”。它工作正常，但是这个 bean 类没有将整个表格内容加载到其中的规定。

**PFB，我的 Spring-config.xml：**

```
 <bean name="propertyPlaceholderConfigurer"
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="properties" ref="commonsConfigurationFactoryBean"/>
        </bean>

<bean name="commonsConfigurationFactoryBean"
    class="org.springmodules.commons.configuration.CommonsConfigurationFactoryBean">
<constructor-arg ref="databaseConfiguration"/>
</bean>

<bean name="databaseConfiguration"
            class="org.apache.commons.configuration.DatabaseConfiguration">
        <constructor-arg type="javax.sql.DataSource" ref="dataSource"/>
        <constructor-arg type="java.lang.String" index="1" value="schema.Table_Name1"/>
        <constructor-arg type="java.lang.String" index="2"  value="KEY"/>
        <constructor-arg type="java.lang.String" index="3" value="PROPERTY"/>
</bean>

<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
        <property name="url" value="jdbc:oracle:thin:SYSTEM_NS:PORT:sid"/>
        <property name="username" value="xxxx"/>
        <property name="password" value="xxxx"/>
    </bean> 
```

**Java 代码：**

```
ApplicationContext classpathCtx = new ClassPathXmlApplicationContext("Spring-config.xml");
DatabaseConfiguration dBConfig = (DatabaseConfiguration)classpathCtx.getBean("databaseConfiguration");

// To display the value in the property column by sending the value of column KEY
System.out.println(dBConfig.getProperty("Value in the KEY column")); 
```

上面的代码工作正常。但是每次我向`DatabaseConfiguration`它发送密钥时，都会在内部进行**数据库**调用以获取我不希望发生的属性。

整个上述概念都是关于尝试将 .properties 中存在的所有数据存储到 DB 并将其从 DB 获取到我的 Java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:51:17.693

您可以创建一个 FactoryBean，通过从 databaseConfiguration 读取所有键并将它们复制到创建的属性对象来创建属性对象。

这个属性对象是一个单例，可以在你的spring配置中使用。

```
<bean name="properties" class="...ConfigurationPropertiesFactoryBean">
   <property name="configuration" ref="databaseConfiguration"/>
</bean>

public class ConfigurationPropertiesFactoryBean implements FactoryBean<Properties>
{
   private Properties props = new Properties();
   public void setConfiguration(Configuration configuration)
   {
     props.put ...
   }
   public Properties getObject()
   {
      return props;
   }
} 
```

或者，您可以使用 JdbcTemplate，而不是 DatabaseConfiguration：

```
<bean name="properties" class="...DataSourcePropertiesFactoryBean">
   <property name="dataSource" ref="dataSource"/>
</bean>

public class DataSourcePropertiesFactoryBean implements FactoryBean<Properties>
{
   private Properties props = new Properties();
   public void setDataSource(DataSource dataSource)
   {
     props = new JdbcTemplate(dataSource).query("SELECT KEY, PROPERTY FROM ...", 
       new ResultSetExtractor(){
        public void Properties extractData(ResultSet rs)
        {
           props.put(...);
        }
     });
   }
   public Properties getObject()
   {
      return props;
   }
} 
```

# mysql - MySql 选择语句获取每个 client_id 的最新行

> ID：11342792
> 
> 赞同：2
> 
> 时间：2012-07-05T10:48:43.553
> 
> 标签：mysql, database, select

嗨，我对 mysql select 语句有疑问，我无法理解，

表client_directory_data

id int，已验证 int，client_id int，创建时间戳，描述 longtext

select * from client_directory_data where verify = 1 order by created desc

但这会为每个 client_id 选择多行

我需要做的是选择每个经过验证的client_id = 1，但只获取每个client_id 的最新行，我希望这是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:11:22.020

这是我一直面临的问题。幸运的是，有一个很好的小技巧可以做到这一点：

```
SELECT
client_id,
SUBSTRING_INDEX(GROUP_CONCAT(id ORDER BY created DESC),",",1) AS `id`
FROM client_directory_data
WHERE verified = 1
GROUP BY client_id 
```

如果你想要整行，你可以像这样加入它：

```
SELECT
*
FROM (
  SELECT
  client_id,
  SUBSTRING_INDEX(GROUP_CONCAT(id ORDER BY created DESC),",",1) AS `id`
  FROM client_directory_data
  WHERE verified = 1
  GROUP BY client_id
) ids
JOIN client_directory_data USING (id); 
```

当然，如果您无论如何都按索引字段排序（因此无论如何您都可以有效地加入），最好使用`MAX(id) AS id`，尽管它实际上对性能影响很小。使用 MAX() 的主要原因实际上是为了让代码更简单一些。它还避免了如果字段包含逗号（您可以使用组 concat 的不同分隔符来解决）或达到最大 GROUP_CONCAT 长度（可以扩展`SET group_concat_max_len = xxx;`并且无论如何只会导致警告）时可能遇到的陷阱。

我可以理解为什么这在直觉上看起来会出现性能问题，但它实际上是我为这些查询找到的最佳性能方法——尤其是在大型表上。

以下是我从当前可用的一些较大的表中获取的一些基准，比较了这个线程中的三种方法。

查询 A：（约 5,000 条记录，约 900 条结果，非索引字段）

*   GROUP_CONCAT 方法：0.0100 秒
*   MAX方法：0.102秒
*   LEFT JOIN 方法：0.0082 秒

查询 B：（~300,000 条记录，~95,000 个结果）

*   GROUP_CONCAT 方法：1.8618 秒
*   MAX方法：1.7904秒
*   LEFT JOIN 方法：6.4649 秒

查询 C：（~300,000 条记录，~7 个结果）

*   GROUP_CONCAT 方法：0.103 秒
*   MAX方法：0.0102秒
*   LEFT JOIN 方法：（4小时后我感到无聊）

查询 D：（约 500,000 条记录，约 5,000 个被分组的字段的不同值）

*   GROUP 方法：0.1355 秒
*   MAX 方法：0.0429 秒
*   LEFT JOIN 方法：（10分钟后我觉得无聊）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T10:53:42.290

这是有道理的，是一个经典的问题。

假设`the most recent row is the one with highest id`，您可以使用：

```
SELECT *
FROM client_directory_data c
LEFT JOIN client_directory_data d ON c.client_id = d.client_id AND d.verified = 1 AND d.id > c.id
WHERE d.id IS NULL
    AND c.verified = 1; 
```

您可以在[此处](https://stackoverflow.com/questions/11131237/mysql-can-i-do-a-left-join-and-pull-only-one-row-from-the-join-table/11134161#11134161)了解此查询模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:55:27.810

将 id 作为表 client_directory_data 的主键

# mysql - 带值连接查询基值的三表是第一表、第二表和第三表

> ID：11342795
> 
> 赞同：0
> 
> 时间：2012-07-05T10:48:49.120
> 
> 标签：mysql

我需要用 join 或任何我做不到的东西来开发查询

我的概念是第一个表有 usr id 和 usr type id 第二个表有 usr 类型和 id 的详细信息以及 usr master 详细信息 id 第三个表有 usr master 详细信息和 id 我的问题是我如何选择这三个表的值

样品表是

```
user_details
usr_id   Name  us_ty_id
25       john     2
34       sam      3
24       rose     1

user_type
us_ty_id    type    usr_ma_id
1            dev      2
2            desi     1
3            test     2

user_master
usr_ma_id   details
1            team1
2            team2
3            team3 
```

我的输出如下

```
usr_id   type     details
34       test      team3 
```

第一个表 us_type_id 在第二个表中找到类型和 usr_ma_id 并在第二个表中找到 usr_ma_id 的选定 id 的详细信息并找到详细信息

请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:04:37.533

简单的呢：

```
SELECT *
FROM user_details d
INNER JOIN user_type t ON t.us_ty_id = d.us_ty_id
INNER JOIN user_master m ON m.usr_ma_id = t.usr_ma_id; 
```

# c# - c# 中的浅拷贝现实生活中的用法？

> ID：11342796
> 
> 赞同：2
> 
> 时间：2012-07-05T10:48:55.660
> 
> 标签：c#, .net, clr

除了浅层和深层复制差异的常规无聊差异之外，

我想知道，我将使用浅拷贝的现实生活场景是什么？

我没有看到任何用法（我一定是错的）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:43:31.727

现实生活中的一个例子是提供一个排序的对象列表，同时保持原始顺序的记录。创建浅拷贝允许为用户提供以各种方式排序的相同列表，但所有列表都链接回原始对象。

# python - 如何以编程方式删除黑色网格？

> ID：11342797
> 
> 赞同：5
> 
> 时间：2012-07-05T10:48:56.347
> 
> 标签：python, graphics, imagemagick, extraction, image-recognition

我的想法是：

> *   **1.0。[未解决，硬图像检测]**将图像分成正方形并去除边框，当然还有其他技术！
>     
>     
> *   **1.1。[未解决]** Imagemagick：裁剪（[此处](http://www.imagemagick.org/Usage/crop/#crop_equal)为说明），删除某些边框-这可能需要很多时间来定位网格，图像检测问题（此处比较白色/黑色）-或者可能有一些魔杖样式的过滤器。
>     
>     
> *   **1.2\. [未解决]** Python：你可能需要这个`from PIL import Image`.

显然，Gimp 的橡皮擦是解决此问题的错误方法，因为它速度慢且容易出错。您将如何以编程方式删除网格？

![在此处输入图像描述](../Images/9033b73647de0990bb938800fc21c811.png)

*Ps 在 Graphics.SE 中关于这个问题的休闲讨论在[这里](https://graphicdesign.stackexchange.com/questions/8253/how-to-automate-the-removal-of-a-black-grid)包含更多的物理和机械黑客。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T11:33:36.997

如果所有图像都由灰色网格上的黑线组成，您可以调整白色阈值以移除网格（例如使用 ImageMagick）：

```
convert -white-threshold 80% with-grid.png without-grid.png 
```

您可能必须尝试使用​​确切的阈值。80% 使用您的示例图像为我工作。这将使线条像素化。但也许重新采样可以将其减少到可接受的数量，例如：

```
convert -resize 200% -white-threshold 80% -resize 50% with-grid.png without-grid.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:31:52.557

在您的图像中，网格比绘图要轻一些，因此我们可以设置一个阈值，并过滤图像，使所有“亮”像素都设置为白色。使用`PIL`它可能看起来像这样：

```
import Image

def filter(x):
    #200 is our cutoff, try adjusting it to see the difference.
    if x > 200:
        return 255
    return x

im = Image.open('bird.png')
im = im.point(filter)
im.show() 
```

使用此代码处理您上传的图像会给出：

![在此处输入图像描述](../Images/4e654cd4a473ba025fa08f663df0d035.png)

在这种情况下，这是一个很好的结果。如果您的绘图比网格更暗，您应该能够使用此方法而不会出现太多问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T03:32:58.603

**对答案的反馈：emulbreh 和 fraxel**

> python 版本使用 ImageMagick，所以让我们考虑 ImageMagick。由于不同的颜色通道配置文件，它不适用于如下彩色版本。让我们进一步研究一下。
> 
> ![在此处输入图像描述](../Images/a52196dfbf5fde53dfef1f106487ee63.png)
> 
> ![在此处输入图像描述](../Images/b77eab5d27f29593971526a883d4316b.png)
> 
> $ convert -white-threshold 0% bird.png without.png
> 
> ![在此处输入图像描述](../Images/792de606db870bb8d945247c9b037acc.png)
> 
> *这张图片显示了原始扫描图片中的噪声量。*

**谜题：以去掉右上角为例**

> 我颠倒了颜色`$ convert -negate whiteVersion.png blackVersion.png`以使其更容易可视化。现在使用下面的黑色照片，我想删除蓝色的右上角，即使其变黑——这意味着我想将 BG 通道设置为 BG 的 0 和 100% 通道值。
> 
> $ convert -channel BG -threshold 100% bbird.png without.png
> 
> ![在此处输入图像描述](../Images/71760dd213527b65480e6693b1af5623.png)
> 
> ![在此处输入图像描述](../Images/3d9b9f2b1849c7a99525ab77832a1edb.png)
> 
> 现在唯一剩下的当然是红色通道，我删除了 GB，但白色仍然剩下红色。现在我怎样才能只删除右手角？我需要指定区域，然后执行较早的操作。
> 
> **我怎样才能让这个与任意照片一起工作，你想删除某些颜色但保留一些颜色完整？**
> 
> 我不知道一个简单的方法。第一个问题是颜色检测问题——你为颜色（R、G、B）指定了一些不等式的条件。如果条件为真，则仅在部分中删除它。现在您对所有基本颜色执行此操作，即 when`(R,G,B)=(100%,0,0), (R,G,B)=(0,100%,0)`和`(R,G,B)=(0,0,100%)`. 是否存在一些现成的实现？可能，但自己做会更好，拼图！

**必备知识**

> *   *关于 Imagemagick 的教程[在这里](http://www.imagemagick.org/script/command-line-options.php?ImageMagick=mgl0ugrabnnk8o7e3k3kp1e1p6#white-threshold)和[这里。](http://www.imagemagick.org/script/command-line-options.php#channel)*
>     
>     
> *   *为了理解这个话题，我们需要了解一些基本的物理学：白色是所有颜色的混合，黑色是没有颜色的。*

# jquery - 如何在运行时在 jCarouselLite 上添加元素？

> ID：11342804
> 
> 赞同：0
> 
> 时间：2012-07-05T10:49:08.590
> 
> 标签：jquery, carousel, jcarousellite

我很难做到这一点。我想`ul`在运行时添加元素，但这在 jCarouselLite 上无法正常工作。
当我添加`li`元素时，它只是在底部添加但不与流对齐。

为了让您明白我的意思，请参阅[此处的代码](http://jsfiddle.net/MyNameIsCode/5kMaD/)

希望有人能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:34:11.710

`jCarouselLite`似乎不支持动态添加元素。您可能需要考虑使用[jCarousel](http://sorgalla.com/projects/jcarousel/#Dynamic-Content-Loading)，它似乎确实支持这一点。

当您添加`li`它时，它被包装到下一行，因为在您的元素`jCarouselLite`上设置了明确的宽度。您可以通过在添加新项目时增加其宽度`ul`来停止包装：`li``li`

```
$("#list").width(52 + $("#list").width()); 
```

但是，这并不能解决问题，因为该`jCarousel`对象包含一个私有成员变量`itemLength`，用于进行边界检查，因此在您到达 Carousel 的末尾并查看新添加的项目之前它会停止。

您可以通过删除 + 然后重新创建 Carousel 来捏造一些东西，但是如果您需要该功能，感觉就像您应该尝试使用开箱即用的支持它的插件。

# php - 如何从foursquare获取当前用户使用API 管理的场地列表？

> ID：11342808
> 
> 赞同：2
> 
> 时间：2012-07-05T10:49:30.940
> 
> 标签：php, foursquare

我正在使用 android 应用程序和 PHP 中的foursquare API，我正在尝试获取用户使用 PHP 中的 API 管理的所有场所的列表。

但是，它总是给“玛戈的货物”而不是我自己的场地。我使用[**Managed Venues**](https://developer.foursquare.com/docs/venues/managed) API 来获取管理场所的列表。

请帮我获取当前用户管理的场所列表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:05:46.177

您的意思是您在[API Explorer](https://developer.foursquare.com/docs/explore)中尝试过？它默认将端点设置为`simulate/venues/managed`，它确实返回“Margo's Cargo”。删除`simulate/`应该工作：

[https://developer.foursquare.com/docs/explore#req=venues/managed](https://developer.foursquare.com/docs/explore#req=venues/managed)

# android - Android 条码扫描器问题

> ID：11342809
> 
> 赞同：0
> 
> 时间：2012-07-05T10:49:37.180
> 
> 标签：android, zxing

我正在研究条形码扫描仪。当我单击扫描按钮时，出现以下异常。

07-05 16:15:50.328: E/AndroidRuntime(301): android.content.ActivityNotFoundException: 没有找到处理 Intent { act=com.google.zxing.client.android.SCAN (has extras) }

这是我的代码：

```
 getWindow().setFormat(PixelFormat.UNKNOWN);

    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    scan_btn.setOnClickListener( new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent scanIntent= new Intent("com.google.zxing.client.android.SCAN");
            scanIntent.putExtra("SCAN_MODE", "PRODUCT_MODE");

            startActivityForResult(scanIntent, 0);

               if(!previewing){
                     camera = Camera.open();
                     if (camera != null){
                      try {
                       camera.setPreviewDisplay(surfaceHolder);
                       camera.startPreview();
                       previewing = true;
                      } catch (IOException e) {
                       // TODO Auto-generated catch block
                       e.printStackTrace();
                      }
                     }
                    }

        }

    });
} 

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
               if (requestCode == 0) {
                  if (resultCode == RESULT_OK) {
                 String contents = intent.getStringExtra("SCAN_MODE");
                 String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
                 // Handle successful scan
                result_text.setText(intent.getStringExtra("SCAN_RESULT"));
                  } else if (resultCode == RESULT_CANCELED) {
                     // Handle cancel
                      result_text.setText("Scan cancelled.");
                  }
               }
            }           

@Override
public void surfaceCreated(SurfaceHolder paramSurfaceHolder) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceChanged(SurfaceHolder paramSurfaceHolder, int paramInt1,
        int paramInt2, int paramInt3) {
    // TODO Auto-generated method stub

}
@Override
public void surfaceDestroyed(SurfaceHolder paramSurfaceHolder) {
    // TODO Auto-generated method stub

}

} 
```

我在清单文件中注册了 captureActivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:56:40.290

我认为你应该遵循[这个](http://code.google.com/p/zxing/wiki/ScanningViaIntent)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T10:53:12.507

如果您正在与 Zxing 集成，请确保您的 Manifest 中有此内容：

```
 <activity android:name="com.google.zxing.client.android.CaptureActivity"
 android:screenOrientation="landscape"
 android:configChanges="orientation|keyboardHidden"
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
 android:windowSoftInputMode="stateAlwaysHidden">
 <intent-filter>
   <action android:name="com.google.zxing.client.android.SCAN"/>
  <category android:name="android.intent.category.DEFAULT"/>
 </intent-filter> 
```

您还需要将此发送到调用意图：

```
intent.setPackage(yourpackagestring); 
```

# php - 一个奇怪但可能很简单的 shell_exec 问题

> ID：11342814
> 
> 赞同：0
> 
> 时间：2012-07-05T10:50:07.360
> 
> 标签：php

如果我在命令行上运行这个命令（在我的 Mac OS X 上）：

```
echo -n "hello" > foo-cmd.txt 
```

我得到了预期的结果，即一个`foo-cmd.txt`包含“ `hello`”的文件，最后没有任何换行符。

但是，如果我运行这个 PHP 代码：

```
<?php
shell_exec("echo -n \"hello\" > foo-php.txt");
?> 
```

我得到一个`foo-php.txt`包含文本“ `-n hello`”的文件，后跟换行符！换句话说，参数`-n`作为输出潜入，而不是被视为参数！

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:55:04.523

您的命令正在使用不支持该选项的 shell*内置*版本。`echo``-n`

试试`/bin/echo`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:52:52.450

试试这个：

```
shell_exec("echo\ -n \"hello\" > foo-php.txt"); 
```

# jquery - flv，网站上的 youtube 视频流，具有跨浏览器和 iphone ipad 兼容性。

> ID：11342821
> 
> 赞同：0
> 
> 时间：2012-07-05T10:50:33.383
> 
> 标签：jquery, ios, youtube, video-streaming

我已经在我的网站上集成了 jwplayer。这在 Windows 中运行良好，但在 iphone 和 ipad 等设备中无法运行。我想播放来自 youtube 的视频或来自我的目录的 flv 文件。您能否建议我播放器或在所有浏览器和设备中工作的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:07:28.590

最简单（也是最便宜的，因为您不必为带宽付费）的方法是将您的视频上传到 YouTube 并使用其中一种[iframe 嵌入方法从那里运行所有视频内容](https://developers.google.com/youtube/player_parameters)

值得注意的是，iOS 设备（以及许多类似设备）无法播放 .flv 文件。YouTube 还将通过为您重新编码视频并以兼容的方式自动显示它们来解决此问题。

# asp.net - 在相应行中按下 DELETE 按钮时删除 Gridview 行

> ID：11342822
> 
> 赞同：0
> 
> 时间：2012-07-05T10:50:36.803
> 
> 标签：asp.net, gridview, visual-studio-2008, sql-delete

这是我的代码，我想在单击该行的 DELETE 按钮时删除该行，同时数据库也应该得到更新。

```
 protected void gvDetails_RowCommand(object sender, GridViewCommandEventArgs e)
    {
     if (e.CommandName.Equals("Delete"))
     {
        int index = Convert.ToInt32(e.CommandArgument);
        GridViewRow row = gvDetails.Rows[index];
        string productID = gvDetails.DataKeys[index].Value.ToString();
        string productName = row.Cells[1].Text;
        this.RemoveProduct(productID, productName);
     }
    }
public void RemoveProduct(string productID, string productName)
{
   DataRow dr;
   SQLConnection objcon;
   SqlDataAdapter objadp;
   objcon=new SqlConnection("Connecting string");
    try
    {
        objcon.Open();
        DataSet ds = new DataSet();
        objadp = new SqlDataAdapter("Select *from Bus_Table", objcon);
        objadp.Fill(ds, "Bus_Table");
        objadp.DeleteCommand = objcon.CreateCommand();
        objadp.DeleteCommand.CommandText = "DELETE from Bus_Table where B_ID=" +int.Parse(productID);
        DataTable objtable = new DataTable();
        ds.Tables.Add(objtable);
        foreach (DataRow dr in ds.Tables[0].Rows)
        {
            if (dr["B_ID"].Equals(productID))
            {
                DataRow objrow = dr;
                objrow.Delete();
                objadp.Update(ds, "Bus_Table");
                ds.AcceptChanges();
                Response.Write("Bus Deleted");
                break;
            }
        }
    }
    catch (SqlException ex)
    {
        Response.Write(ex.Message);
    }
    finally
    {
        objcon.Close();
    }
} 
```

当我编译此代码时出现错误：

> “除非指定了 DeleteCommand，否则数据源 'SqlDataSource1'（我的数据源）不支持删除”。

当我设置断点时，我注意到`RemoveProduct(string productID, string productName)`没有被调用，`gvDetails_RowCommand()`但条目也被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:28:37.457

看看这些文章，它将详细解释如何从 gridview 中删除单行/多行。 [http://technico.qnownow.com/2012/06/15/how-to-delete-multiple-rows-from-gridview-with-checkboxes/](http://technico.qnownow.com/2012/06/15/how-to-delete-multiple-rows-from-gridview-with-checkboxes/) http://technico.qnownow.com/2012/06/14/如何从gridview-with-client-side-confirmation删除一行/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:26:40.127

GridView 可以识别一些保留的命令名称：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

`GridView`当在和中引发的命令事件`CommandName`是“保留”事件之一时，在这种情况下为“*删除*”，`GridView`将尝试使用它被分配`DataSource`（使用分配`DataSourceId`）来执行删除。

要解决问题：

*   向 SqlDataSource 添加删除命令

或者

*   将按钮上的更改`CommandName`为其他内容并在您的代码中检查

# jquery - 图片库全屏图像... $.vegas('slideshow')

> ID：11342823
> 
> 赞同：0
> 
> 时间：2012-07-05T10:50:45.750
> 
> 标签：jquery, slideshow, fullscreen, image-gallery

我们目前正在网站上使用全屏图像幻灯片，初始测试很有效，下面的代码显示了它是如何工作的：

```
$.vegas( 'slideshow' , {
    backgrounds:[
    { src:'/uploads/images/1397/lmwp_02.jpg', fade:1000 },
    { src:'/uploads/images/1397/lmwp_03.jpg', fade:1000 },
    { src:'/uploads/images/1397/lmwp_04.jpg', fade:1000 }
    ]
})('overlay'); 
```

我们想要做的是从我们的 CSM 动态写入图像。我目前正在这样做是为了吐出一个简单的列表，如下所示：

```
<ul id="homeSlides">    
    <li><a href="/uploads/images/001.jpg">001</a></li>
    <li><a href="/uploads/images/002.jpg">002</a></li>
</ul> 
```

我们需要做的是获取这个图像列表并将其注入 $.vegas backgrounds:[] 函数列表......

我已经尝试了下面的代码并且可以获得图像列表，但我不确定您将如何将其放入 $.vegas 函数中：

```
var homeImgURLs = [];
    $('#homeSlides li a').each(function(index) {
    homeImgURLs.push('{ src:' + $(this).attr('href') + ', fade:1000}');
}); 
```

因此这里的帖子。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:10:14.400

这样的事情应该可以解决问题：

```
var homeImgURLs = [];
$('#homeSlides li a').each(function(index) {
  homeImgURLs.push({
    src: $(this).attr('href'),
    fade: 1000
  });
});

$.vegas( 'slideshow' , {
  backgrounds: homeImgURLs
})('overlay'); 
```

在您的示例中，`homeImgURLs`当您想要推送对象时，您正在将字符串推送到数组中。

# asp.net - 从 CSV 文件构建数据表？ASP.NET VB

> ID：11342825
> 
> 赞同：1
> 
> 时间：2012-07-05T10:50:51.227
> 
> 标签：asp.net, xml, vb.net, csv, datatable

我有一个读取 CSV 文件并构建数据表的函数。我不会声称这是我自己的，因为它不是。我不记得我从哪里得到它，但它是来自几个不同来源的组合。

我的函数工作正常，直到我需要处理一些值中有“，”逗号的 CSV。谁能帮我解决这个问题来处理这个问题？

非常感谢 ..

示例 CSV 文件

```
 FirstName, LastName, Comment, "address, just city",
    John, Smith, "you are very good, but ugly", London,
    Britney, Spear, "I am a singer, and beautiful", New York, 
```

我的功能

```
 Public Function BuildDataTable() As DataTable

    Dim myTable As DataTable = New DataTable("MyTable")
    Dim i As Integer
    Dim myRow As DataRow
    Dim fieldValues As String()
    Dim myReader As IO.StreamReader
    Dim csv2xml As New csv2xml

    Try
        'Open file and read first line to determine how many fields there are.
        myReader = File.OpenText(_fileFullPath)
        fieldValues = myReader.ReadLine().Split(_seperator)
        'Create data columns accordingly
        If _hasheader = False Then
            For i = 0 To fieldValues.Length() - 1
                myTable.Columns.Add(New DataColumn("Column(" & i & ")"))
            Next
        Else
            'if the file has header, take the first row as header for datatable
            For i = 0 To fieldValues.Length() - 1
                myTable.Columns.Add(New DataColumn(fieldValues(i).Replace(" ", "")))
            Next
        End If

        'Adding the first line of data to data table
        myRow = myTable.NewRow

        'if the csv file has not got a column header. defined by radio button list on first page by user
        'if csv file has header, then not need to read the first line
        If _hasheader = False Then
            For i = 0 To fieldValues.Length() - 1
                myRow.Item(i) = fieldValues(i).ToString
            Next
            myTable.Rows.Add(myRow)
        End If

        'Now reading the rest of the data to data table
        While myReader.Peek() <> -1
            fieldValues = myReader.ReadLine().Split(_seperator)
            myRow = myTable.NewRow
            For i = 0 To fieldValues.Length() - 1
                myRow.Item(i) = fieldValues(i).Trim.ToString
            Next
            'check if there are empty rows in csv, ignore empty rows

            If Not csv2xml.AreAllColumnsEmpty(myRow) = True Then
                myTable.Rows.Add(myRow)
            End If

        End While
    Catch ex As Exception
        'MsgBox("Error building datatable: " & ex.Message)
        Dim oError As ErrorLog = New ErrorLog
        oError.LogError(_strWebsiteName, _
            loginID, _
            ex.Source.ToString, _
            ex.Message.ToString, _
            , _
            ex.StackTrace.ToString)
        oError = Nothing
        Return New DataTable("Empty")
        'Server.Transfer(CustomErrorPage)
    Finally
        csv2xml = Nothing
        myRow = Nothing
    End Try
    myReader.Close()
    Return myTable

    End Function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T15:37:00.413

只需使用 VB [TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类，并将 HasFieldsEnclosedInQuotes 属性设置为 True：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T13:05:06.140

您的问题是您似乎通过简单地用逗号分隔每个行字符串作为分隔符来解析列。该方法不适用于所有 CSV 文件，因为如果它是包含逗号的字符串，如您所示，整个字段值将被引号括起来。因此，您需要先用引号分隔，然后在剩下的部分用逗号分隔，然后从字段的值中删除引号，这是一个更复杂的算法。您可以自己编写类似的内容，或使用正则表达式来执行此操作，但那时，我认为您最好使用 ADO 加载 CSV 文件：

```
Public Function LoadCsvFile(filePath As String, hasHeader As Boolean) As DataTable
    Dim folderPath As String = Path.GetDirectoryName(filePath)
    Dim fileName As String = Path.GetFileName(filePath)
    Dim hdr As String = Nothing
    If hasHeader Then
        hdr = "Yes"
    Else
        hdr = "No"
    End If
    Dim connectionString As String = String.Format("Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq={0};Extended Properties=""Text;HDR={1};FMT=Delimited""", folderPath, hdr)
    Dim connection As New OdbcConnection(connectionString)
    Dim adapter As New OdbcDataAdapter("SELECT * FROM [" + fileName + "]", connection)
    Dim table As New DataTable()
    adapter.Fill(table)
    Return table
End Function 
```

# iphone - 我怎样才能从上到下移动连续的敌人精灵？？？

> ID：11342827
> 
> 赞同：1
> 
> 时间：2012-07-05T10:50:52.747
> 
> 标签：iphone

这是一些我无法理解的问题...我想从上到下移动一个敌方精灵，但敌方精灵在不同的类别中，无法移动它。

这是通过 Enemyscene 在 GameScene 中添加精灵的代码 这是 Enemy.m 的代码

```
#import "Enemy.h"
#import "GameScene.h"

@implementation Enemy
@synthesize theGame,newSprite,lastTimeFired,firingSpeed,fireInterval,movementSpeed,launched,hp,maxHp;

-(id)initWithGame:(GameLayer *)game
{
    self=[super init];
    if(self !=nil)
    {
        CGSize size=[[CCDirector sharedDirector]winSize];
        self.theGame=game;
        self.lastTimeFired=0;
        NSLog(@"Enemy INIT ");

        int random=arc4random()%3+1;

        newSprite=[CCSprite spriteWithFile:[NSString stringWithFormat:@"enemy%d.png",random]];
        newSprite.position=ccp(100,200);
        [theGame addChild:newSprite];

        switch (random) 
        {
            case 1:
                movementSpeed=5;
                fireInterval=-1;
                break;
            case 2:
                movementSpeed=10;
                fireInterval=-1;
                break;
            case 3:
                movementSpeed=7;
                fireInterval=-1;
                break;
            case 4:
                movementSpeed=3;
                fireInterval=-1;
                break;
            default:
                movementSpeed=5;
                fireInterval=-1;
                break;
        }

    }
    return self;
} 
```

我想把这个敌人精灵移动到 GameScene 层，这里是代码 GameScene.m

```
#import "GameScene.h"
#import "Hero.h"
#import "Enemy.h"
#define STARTING_LIVES 3;
@implementation GameScene
-(id) init
{
    self =[super init];
    if(self !=nil)
    {
        [self addChild:[GameLayer node]];
    }
    return self;
}

-(void) dealloc
{
        [super dealloc];
}   
@end

@implementation GameLayer
-(id)init
{
    if(self=[super init])
    {

       Hero *hero=[[Hero alloc]initWithGame:self];
        Enemy *e=[[Enemy alloc]initWithGame:self];

        lastTimeEnemyLaunched=0;
        enemyInterval=20;
        lives=3;
        [self schedule:@selector(doThis)];
        NSLog(@"After Schedule");
    }
    return self;
}

-(void)doThis

{
    Enemy *e;

    [e update];

}

@end 
```

请帮助我，我是 cocos2d 游戏开发的新手......当我在模拟器中运行此代码时，它会出现错误

此代码给出 EXC_BAD_ACCESS

```
 -(void) update: (ccTime) dt
    {
        if( elapsed == - 1)
            elapsed = 0;
        else
            elapsed += dt;
        if( elapsed >= interval ) {
            impMethod(target, selector, elapsed);  //this code gives EXC_BAD_ACCESS
            elapsed = 0;
        }
    } 
```

请帮助我....谢谢

# php - 获取小尺寸图片 url

> ID：11342831
> 
> 赞同：0
> 
> 时间：2012-07-05T10:51:13.710
> 
> 标签：php, wordpress

我想获取我上传的图片的小尺寸版本的 url。我保存一张图片，给它一个标题，然后保存一张小分辨率的图片（150X150 或 148X150）。我知道如何通过标题获取图像 url，但我总是得到全分辨率的图像 url。

您对我如何获得 150X150/148X150 图像网址有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:39:59.807

You want the function [`wp_get_attachment_image_src()`](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)

```
<?php 
$attachment_id = 8; // attachment ID

$image_attributes = wp_get_attachment_image_src( $attachment_id, array( 150, 150 ) ); // returns an array

// Alternatively, you can pass a second parameter of 'thumbnail', 'small', 
// 'medium' or 'large' instead of an array
?> 

<img src="<?php echo $image_attributes[0]; ?>" width="<?php echo $image_attributes[1]; ?>" height="<?php echo $image_attributes[2]; ?>"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:00:28.390

如果您上传图片，您应该有 4 个文件：

```
filename-150x150.jpg
filename-resized_widthx300.jpg
filename-resized_widthx1024.jpg
filename.jpg 
```

或者

```
filename-150x150.jpg
filename-300xresized_height.jpg
filename-1024xresized_height.jpg
filename.jpg 
```

当您将上传的图片插入帖子/页面时，您可以选择要使用的图片大小，例如我可以选择：

```
Thumbnail (150 × 150)
Medium (195 × 300)
Large (668 × 1024)
Full Size (2618 × 4013) 
```

您需要使用*缩略图*获取 150x150 像素图像的 url

# go - 是否可以在 Go 中同时等待通道和文件描述符？

> ID：11342833
> 
> 赞同：18
> 
> 时间：2012-07-05T10:51:24.087
> 
> 标签：go, channel

我知道我可以使用 Go 中的语法等待多个通道，并使用或类似函数`select {}`等待多个文件描述符。`syscall.Select()`但是有可能同时在两个频道上等待吗？

作为背景，我希望有一个 goroutine 通过通道接受消息并通过套接字连接（由[gozmq](http://github.com/alecthomas/gozmq)提供）转发它们，同时等待套接字连接的回复。

由于底层库的线程安全要求，一次只能在一个线程中访问套接字，这就是为什么我想知道是否有办法从单个 goroutine 处理这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T14:21:43.530

不可能同时选择通道和文件描述符，因为抽象处于不同的级别。通道由 go 运行时处理，文件描述符由操作系统处理。您需要在它们之间架起一座桥梁，这可以通过`net.Pipe()`.

您需要做的几乎就是将一个 goroutine 专用于`epoll()`/`select()`来监视您的 zmq-sockets 和一个单一的 "wake up" `net.Pipe()`。这是您的投票服务器。另一个 goroutine 监听你的读写通道。当有人在读或写通道上发送时，第二个 goroutine 将在管道上发送以唤醒轮询服务器。

这就是标准库中的 net 包的工作方式。我强烈建议阅读它以获得灵感（或窃取...... BSD 许可证非常自由）。

这是网络本身对 pollServer 的描述。您可能需要阅读代码才能理解它在说什么，但本节`fd.go`应该是开始查找的好地方。

```
// A pollServer helps FDs determine when to retry a non-blocking
// read or write after they get EAGAIN.  When an FD needs to wait,
// send the fd on s.cr (for a read) or s.cw (for a write) to pass the
// request to the poll server.  Then receive on fd.cr/fd.cw.
// When the pollServer finds that i/o on FD should be possible
// again, it will send fd on fd.cr/fd.cw to wake any waiting processes.
// This protocol is implemented as s.WaitRead() and s.WaitWrite().
//
// There is one subtlety: when sending on s.cr/s.cw, the
// poll server is probably in a system call, waiting for an fd
// to become ready.  It's not looking at the request channels.
// To resolve this, the poll server waits not just on the FDs it has
// been given but also its own pipe.  After sending on the
// buffered channel s.cr/s.cw, WaitRead/WaitWrite writes a
// byte to the pipe, causing the pollServer's poll system call to
// return.  In response to the pipe being readable, the pollServer
// re-polls its request channels.
//
// Note that the ordering is "send request" and then "wake up server".
// If the operations were reversed, there would be a race: the poll
// server might wake up and look at the request channel, see that it
// was empty, and go back to sleep, all before the requester managed
// to send the request.  Because the send must complete before the wakeup,
// the request channel must be buffered.  A buffer of size 1 is sufficient
// for any request load.  If many processes are trying to submit requests,
// one will succeed, the pollServer will read the request, and then the
// channel will be empty for the next process's request.  A larger buffer
// might help batch requests.
//
// To avoid races in closing, all fd operations are locked and
// refcounted. when netFD.Close() is called, it calls syscall.Shutdown
// and sets a closing flag. Only when the last reference is removed
// will the fd be closed. 
```

祝你好运重新实现网络。最后的好消息是，您的 zmq-socket 在 go 中将是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T07:10:15.953

`fd`为您希望等待的每个人生成一个新的 goroutine ，让他们`fd`在阅读内容时将其发送到频道，然后在频道上进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:48:20.263

Go 中的所有 net.Conn 都可以同时访问。如果您的库基于此，则应该没有任何问题。

否则，在 Go 中每个连接生成一个 goroutine 是很常见的。这个 goroutine 通常只负责从套接字读取（可能会阻塞）并使用通道将所有数据转发到另一个协调器 goroutine。然后，该协调器 goroutine 能够使用 select 语句与所有这些套接字连接（包装在通道中）和其他事件进行交互。另请注意，您可以轻松地向这些通道添加缓冲区，以便慢速客户端无法阻止您的协调器 goroutine。

# ruby-on-rails - 如果被一个类包围，则指定 css

> ID：11342834
> 
> 赞同：-2
> 
> 时间：2012-07-05T10:51:26.057
> 
> 标签：ruby-on-rails, css, sass

我试图在我的 Rails 应用程序中执行以下操作：

假设我有一堂课 .foo

```
 .foo{ color:red;} 
```

我还有另一堂课.bar

```
.bar{ color:green;} 
```

我希望将 foo 元素的颜色更改为蓝色，仅当**被 bar 类包围时**

示例：在这里我希望“blah blah”为蓝色

```
<div class = "bar" >
  <div class = "foo" >
  blah blah
  </div>
</div> 
```

我该怎么做？不使用 LESS 或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T10:52:46.990

像这样写：

```
.bar .foo{
color:blue
} 
```

& 更具体的写法是这样的：

```
.bar > .foo{
    color:blue
    } 
```

检查这个[http://jsfiddle.net/DEmk7/1/](http://jsfiddle.net/DEmk7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:08:04.880

根据这个例子：

```
<div class = "bar" >
  <div class = "foo" >
  blah blah
  </div>
</div> 
```

你也可以给你的 div 类 foo 另一个类。

```
<div class = "bar" >
  <div class = "foo blue" >
  blah blah
  </div>
</div> 
```

在您的CSS中，您编写以下内容：

```
.foo{ color:red;}
.bar{ color:green;}
.blue{color:blue !important;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:02:37.033

您可以用空格分隔 css 选择器以指定嵌套。例如

```
.bar .foo
{
    color:blue;
} 
```

值得注意的是，在这种格式下，它将同时匹配：

```
<div class = "bar" >
  <div class = "foo" >
  blah blah
  </div>
</div> 
```

和

```
<div class = "bar" >
  <div class = "yay" >
    <div class="foo">
      blah blah
    </div>
  </div>
</div> 
```

使用 ">" 子选择器将允许您仅定位直接子代，这意味着不会匹配带有 yay 的子代。

# objective-c - 是否有关于带有外部数据源的 NScombobox 可可的教程？

> ID：11342849
> 
> 赞同：0
> 
> 时间：2012-07-05T10:52:16.410
> 
> 标签：objective-c, cocoa

我没有找到说明如何将组合框与外部数据一起使用的教程。我是可可的初学者。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:32:26.247

Apple 的**SimpleComboBox**示例代码演示了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:00:42.610

这个[网站](http://etutorials.org/Programming/Cocoa/Part+II+API+Quick+Reference/Chapter+16.+Application+Kit+Protocols/NSComboBoxDataSource/)`NSCombobox`包含一些关于可可的很好的解释

# c# - LocalDate 来自 Week 和 WeekYear

> ID：11342856
> 
> 赞同：7
> 
> 时间：2012-07-05T10:52:41.773
> 
> 标签：c#, nodatime

使用 NodaTime 库，如何根据周数和周 WeekYear 计算一周第一天的 LocalDate。

反过来：

```
var date = new LocalDate(2012, 1, 1);
int weekYear = date.WeekYear;      // 2011
int weekNr = date.WeekOfWeekYear;  // 52 
```

像这样的假代码：

```
var newDate = LocalDate.FirstDayFromWeek(weekYear, weekNr); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T11:00:42.090

首先，您应该研究如何构建相关`LocalDate`信息 - 如果您有一个`WeekYear`and ，这就是您在逻辑上拥有的所有信息`WeekOfWeekYear`。`LocalDateTime`如果你真的想要的话，你可以从一个`LocalDate`with中得到一个`AtMidnight`- 但我会坚持下去，`LocalDate`直到你真的*需要*其他任何东西，因为这样你合成的信息更少。

老实说，我不相信我们目前让这变得特别简单——尽管底层引擎支持足够的计算，我们可以很容易地*添加它。*

如果不对 API 进行任何更改，我建议您最好使用以下内容：

*   在所需年份内构建 6 月 1 日，应该具有相同的`WeekYear`（我假设您使用的是 ISO 日历......）
*   到达一周的第一天 ( `date = date.Previous(IsoDayOfWeek.Monday)`)
*   计算当前周数
*   添加或减去正确的周数

所以像：

```
public static LocalDate LocalDateFromWeekYearAndWeek(int weekYear,
    int weekOfWeekYear)
{
    LocalDate midYear = new LocalDate(weekYear, 6, 1);
    LocalDate startOfWeek = midYear.Previous(IsoDayOfWeek.Monday);
    return startOfWeek.PlusWeeks(weekOfWeekYear - startOfWeek.WeekOfWeekYear);
} 
```

不是非常愉快或高效，但也不算*太*`WeekOfWeekYear`糟糕......如果您发现自己想用and做很多工作`WeekYear`，请针对您想做的事情提出功能请求。

编辑：就像更新一样，我们现在支持这个：

```
LocalDate date = LocalDate.FromWeekYearWeekAndDay(year, week, IsoDayOfWeek.Monday); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T16:55:43.983

下面的代码返回 2018-11-04 作为第 44 周的第一天：

```
LocalDate.FromWeekYearWeekAndDay(2018, 44, IsoDayOfWeek.Sunday); 
```

但是日期 2018-10-28, 2018-10-29, 2018-10-30, 2018-10-31, 2018-11-01, 2018-11-02, 2018-11-03 以下代码返回周44 号：

```
WeekYearRules
.FromCalendarWeekRule(
    CultureInfo.InvariantCulture.DateTimeFormat.CalendarWeekRule,
    CultureInfo.InvariantCulture.DateTimeFormat.FirstDayOfWeek)
.GetWeekOfWeekYear(new LocalDate(2018, 10, 28)); 
```

所以看起来这两个函数的实现不匹配。对我来说，第二种情况似乎给出了正确的值，而第一种情况可能没有考虑到`CalendarWeekRule`和`FirstDayOfWeek`。

# php - 如何在magento中构建查询字符串

> ID：11342866
> 
> 赞同：3
> 
> 时间：2012-07-05T10:53:16.520
> 
> 标签：php, magento-1.6

您好想在 magento 中构建查询字符串。我试过了

```
<?php 
echo $this->getUrl("catalog/category/view",
  array(
    "_use_rewrite"=>false,
    "category"=>$_category->getId(),
    "product"=>$_product->getId()
  )
);
?> 
```

我想要网址： `http://www.localhost.com/hungermunch/fujigrill/catalog/category/view?category=11&product=1` 但我得到了

```
http://www.localhost.com/hungermunch/fujigrill/catalog/category/view/category/11/product/1/ 
```

我怎样才能获得所需的网址。可能吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:02:40.030

您还可以像这样在 Magento 中附加 url 查询字符串参数：

```
$params = array(
    '_query' => array(
        'category' => $_category->getId(),
        'product'  => $_product->getId(),
    )
);

echo Mage::getUrl('catalog/category/view', $params); 
```

下面是 getUrl() 方法的参考：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/reference/geturl_function_parameters](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/geturl_function_parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:42:16.927

如果要在末尾添加查询字符串，可以使用此方法：

```
$this->getUrl("catalog/category/view") . "?" .
http_build_query(
    "category" => $_category->getId(),
    "product"  => $_product->getId()
); 
```

尽管我认为没有理由不使用您的第一种方法，然后根据需要从 Magento 获取值，例如在控制器中，您可以这样做：

```
$productId = $this->getRequest()->getParam('product');
$categoryId = $this->getRequest()->getParam('category'); 
```

然后，Magento 将从您的代码生成的 url 中为您获取这些值。

# workflow-foundation-4 - 在自定义活动中列出可用的工作流变量？

> ID：11342867
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:53:23.863
> 
> 标签：workflow-foundation-4

我正在编写一个自定义活动，以允许我从我们的一个 LOB 系统为工作流中的变量分配值 - 这将有一个 GUI，允许您输入您希望为其分配值的工作流变量的名称。目前我们正计划使用一个文本框，以便用户可以输入变量，但如果我可以在运行时使用工作流中的可用值填充下拉列表，那将是非常酷的......

...有谁知道这是否可能？即抓取活动已被拖到的工作流中可用变量的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:01:37.957

活动的正常方式是使用`OutArgument<T>`属性和创建工作流的活动用户，使用表达式将这些联系起来。

# c - 用于交互式 bash 的 C 接口

> ID：11342868
> 
> 赞同：5
> 
> 时间：2012-07-05T10:53:25.100
> 
> 标签：c, linux, bash

我正在寻找 bash shell 的 C 接口。即我想要一组函数，允许我打开会话、执行命令、返回输出（STDOUT、STDERR）并最终关闭 shell。它可以是一个库或基于标准库的 C 源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:59:07.933

一般的根本问题似乎是*如何以编程方式运行交互式终端程序*。

现在这在我看来需要实际测试，但您大致需要

1.  使用系统调用创建对应于子进程,和(父进程读写和) 的三个[管道；](http://www.kernel.org/doc/man-pages/online/pages/man7/pipe.7.html)`stdin``stdout``stderr``stdin_pipe``stdout_pipe``stderr_pipe`[`pipe(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)
2.  [fork](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)和 in child [close](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html)通过调用将标准输入、输出和错误重定向到上述管道的正确端[`dup2(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html)；
3.  exec ( [`execve(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)/ [`execv(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/execv.3.html)) 你的交互式shell；
4.  开始向其他两个管道[写入](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)命令`stdin_pipe`并[读取](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)错误和响应。

（如果你不需要区分`stdout`和`stderr`你可以通过使用来简化你的生活[`popen(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/popen.3.html)- 你可以通过正确选择命令字符串来重定向`stderr`到）。`stdout`

但是，对于正常工作的解决方案，我相信您可能需要[`pty(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/pty.7.html)通过调用[`forkpty(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/forkpty.3.html)而不是 fork 来使用伪 ttys ()。

随着考虑到处理伪终端的所有细节变得越来越复杂，为什么不搜索应该能够为您完成所有这些工作的 C 期望库。或模拟[期望](http://expect.sourceforge.net)或其他类似语言[`pexpect`](http://www.noah.org/wiki/Pexpect)的实现方式。实际上`expect`似乎提供了一个[`libexpect(3)`](http://docs.activestate.com/activetcl/8.4/expect/libexpect.3.html)为您调用的 C 库，因此您无需编写 tcl/tk 来编程交互。我个人对图书馆并不熟悉，可能还有其他更好的图书馆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:01:39.133

您是否希望实现这样的目标：

```
 #include<stdio.h>
    int main()
    {
      char a[1000];
      gets(a);
      system(a);
      return 0;
    } 
```

输出：

```
./a.out
cat testing.c
#include<stdio.h>
int main()
{
  char a[1000];
  gets(a);
  system(a);
  return 0;
} 
```

`gets()`并且`system`call 可以进入一个循环。

# database - 比较各种数据库，如 oracle、mysql、mssql、db3 等。？

> ID：11342876
> 
> 赞同：0
> 
> 时间：2012-07-05T10:53:57.473
> 
> 标签：database

大多数人都在使用各种数据库系统，

哪个最适合你？

告诉我为什么？并告诉我功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:15:12.190

没有“最好”。每个都有许多怪癖和许多令人兴奋的功能：

关系：

[http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems](http://en.wikipedia.org/wiki/Comparison_of_relational_database_management_systems)

[http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL](http://www.wikivs.com/wiki/MySQL_vs_PostgreSQL)

NoSQL：

[http://nosql-database.org/](http://nosql-database.org/)

# java - NoClassDefFound - 首次使用类后的两行

> ID：11342877
> 
> 赞同：0
> 
> 时间：2012-07-05T10:54:02.283
> 
> 标签：java, eclipse, classpath, noclassdeffounderror

我在我的 Java 项目（如果有帮助的话，Eclipse IDE）中使用 .dll，说这个 .dll 包含类“myclass”并且我导入了它。构建时没有错误。

我在使用以下代码时遇到问题（NoClassDefFound）：

```
byte[] sources = myclass.getsources();

myclass.close(); 
```

在第二行我得到一个 NoClassDefFoundError，但不是在第一行！这两行都出现在同一个方法中，它们之间只有 3-4 行（保证这些行与 myclass 无关）。

怎么会这样？`.getsources`如果有 NoClassDefFound，上面的一些行如何工作？我希望我提供了足够的信息，有人可以告诉我我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:59:15.533

你可能会错过“myclass”对象的类。或者该课程不在您的课程路径中。绝对类加载器无法从您的路径加载类。检查该特定类的类路径。

# java - 在 windows 中更改 Tomcat 的 Charset.defaultCharset

> ID：11342884
> 
> 赞同：19
> 
> 时间：2012-07-05T10:54:39.827
> 
> 标签：java, tomcat, servlets, character-encoding, tomcat6

我在 Windows 7 中使用 tomcat 6.0.32。在一个非常简单的 servlet 中，在 init 方法中，我正在打印：

```
System.out.println(Charset.defaultCharset()); 
```

输出是：

```
windows-1253 
```

据我了解，这是 JVM 中的 tomcat 启动方式，因为我在独立的 java 类中打印相同的内容，并且得到“UTF8”作为响应。

那么，如何将其更改为 UTF-8？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-05T11:39:50.180

只需在 TOMCAT/bin 目录中创建一个**setenv.bat文件，内容如下：**

```
set "JAVA_OPTS=%JAVA_OPTS% -Dfile.encoding=UTF8" 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-09T09:13:03.060

您也可以在 Tomcat 7.0 Windows 服务管理器中添加此设置。

![截屏](../Images/31a86dea3c73e8502e8df67544e3f06e.png)

来自[James Bayley 博士的博客](http://blog.jamesbayley.com/2013/09/09/tomcat-7-on-windows-is-not-utf-8-by-default/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-19T08:37:09.900

对于作为 Windows 服务运行的 Tomcat，%JAVA_OPTS% 和 setenv.bat 答案都不适用于我的情况。

我在注册表中设置了选项“-Dfile.encoding=UTF8”：

“HKEY_LOCAL_MACHINE\SOFTWARE\Apache Software Foundation\Procrun 2.0\tomcatstackTomcat\Parameters\Java --> 选项*

然后它工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T11:18:42.700

尝试将 (Windows) 环境变量设置`JAVA_TOOL_OPTIONS`为`-Dfile.encoding=UTF-8`并启动`Tomcat Server`.

将从此链接获得更多想法： [设置默认 Java 字符编码](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

# c - C GMP 无限精度 - 我做错了什么？

> ID：11342886
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:54:44.570
> 
> 标签：c, numbers, gmp

我有这样的代码（从维基复制粘贴）。它乘以你在代码中看到的那些大数字。我的 gmp 版本是 5.0.5。

```
#include <stdio.h>
#include <gmp.h>

int main() {
    mpz_t x;
    mpz_t y;
    mpz_t result;

    mpz_init(x);
    mpz_init(y);
    mpz_init(result);

    mpz_set_str(x, "762323423423423443534512034534534534558254738945", 10);
    mpz_set_str(y, "92635911345345345345234534534534567767i888439081", 10);

    mpz_mul(result, x, y);
    gmp_printf("%Zd\n", result);

    mpz_clear(x);
    mpz_clear(y);
    mpz_clear(result);

    return 0;
} 
```

结果是.. 0。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T13:15:45.283

起初它看起来很好，所以我不得不自己运行它并打印出你的另外两个变量。

`y`设置为 0，因为您的号码中间有一个字母“i”，所以它无法解析它。

# c# - Windows Server 2008 中的奇怪套接字行为

> ID：11342888
> 
> 赞同：0
> 
> 时间：2012-07-05T10:55:02.587
> 
> 标签：c#, .net, windows, sockets, tcp

很久以前我就用这段代码的原理做了一个基于socket的服务端应用（IP地址和端口常量只做测试用）：

```
 ...
   _mainSocket = new Socket(AddressFamily.InterNetwork, 
                            SocketType.Stream, ProtocolType.Tcp);

   _mainSocket.SetSocketOption(SocketOptionLevel.IP, 
                               SocketOptionName.ReuseAddress, 1);

   IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("192.168.1.103"), 77);

   _mainSocket.Bind(endPoint);

   _mainSocket.Listen(5);

   _mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null);
   ... 
```

它多年来一直运行良好，直到最近，当客户在 Windows Server 2008 机器上安装该服务并尝试从另一个网络（即通过一个或多个路由器）连接到它时。

令人惊讶的是，这是不可能的！

进一步分析显示，根本原因是我的服务的所有回复数据包中的**TTL**（ IP 数据包标头中*的生存时间*参数）设置为**1**，从而有效地导致它们在遇到的第一个路由器上被丢弃。

有趣的是，如果我删除**SetSocketOption(...)**调用，TTL 会回到通常的 128！

这种奇怪的行为似乎只适用于 Windows Server 2008。Windows XP 和 Windows 7 都保持 TTL=128，正如我所期望的那样。我完全看不出为什么应该使用“ReuseAddress”选项更改 TTL。谁能解释一下？

我还可以通过在第一个调用之后添加*第二个*SetSocketOption(...) 调用将 TTL 恢复到 128：

```
_MainSocket.SetSocketOption( SocketOptionLevel.IP,
                             SocketOptionName.DontRoute, 0). 
```

这有效地抵消了第一个 SetSocketOption(..) 调用的不良副作用......

请告诉我在这件事上我似乎不明白什么？

马丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:00:44.287

这个发布在 MSDN 页面上的简介`SocketOptionName`似乎有点启发性，尽管我还没有确认：

> 使用.NET Reflector阅读.NET Framework源码时的误区使用Red Gate的.NET Reflector解码.NET Framework v2.0中的类Socket...
> 
> ...
> 
> 为什么那是 ReuseAddress 而不是 IpTimeToLive？
> 
> 实际上：
> 
> **SocketOptionName.IpTimeToLive == SocketOptionName.ReuseAddress == 4**

如果情况确实如此，那就可以解释为什么将`TTL`设置为`1`-这就是您传递给的值`ReuseAddress`。

# salesforce - 是否可以将报表从 Salesforce 生产移动到沙盒？

> ID：11342889
> 
> 赞同：1
> 
> 时间：2012-07-05T10:55:02.790
> 
> 标签：salesforce

我想将生产中的报告移动到沙盒。我不想刷新沙箱，因为沙箱上的数据不在生产中。有没有办法将报告移动到沙箱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:35:09.553

是的，您可以使用以下方法将报表从生产迁移到沙盒：

1.  ANT 迁移工具
2.  变更集
3.  工作台（开源）：迁移 -> 部署菜单选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T07:27:11.523

首先在“未归档的公共报告”中检查要移动的报告，否则将其移动到此文件夹。然后将其添加到更改集并将更改集上传到沙箱并部署它。

# javascript - iframe 使用 javascript 调整大小

> ID：11342894
> 
> 赞同：0
> 
> 时间：2012-07-05T10:55:27.703
> 
> 标签：javascript, iframe, resize, xss

嗨，我想根据内容调整 iframe 的大小

```
 frame = document.getElementById(frameId);
  innerDoc = frame.contentWindow.document;
  objToResize = (frame.style) ? frame.style : frame;
  objToResize.height = innerDoc.body.scrollHeight + 10; 
```

但是当 iframe 在另一个域上时，我得到

```
Unsafe JavaScript attempt to access frame 
```

有没有其他方法可以做到这一点？

# ios - 如何比较两个 UIImage 对象

> ID：11342897
> 
> 赞同：74
> 
> 时间：2012-07-05T10:55:45.647
> 
> 标签：ios

我正在开发一个应用程序。因为我在更改图像`imageviews`之前使用.SO，所以`UIImageview`我需要在对象中获取该图像`UIimage`并与另一个`UIImage`对象进行比较，以发现两者是否相同。所以请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-07-05T11:01:02.493

一种方法是先将它们转换为图像数据，然后进行比较。

```
- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2
{
    NSData *data1 = UIImagePNGRepresentation(image1);
    NSData *data2 = UIImagePNGRepresentation(image2);

    return [data1 isEqual:data2];
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-11-26T11:41:41.270

@Simon 答案的 Swift 实现：

```
func image(image1: UIImage, isEqualTo image2: UIImage) -> Bool {
    let data1: NSData = UIImagePNGRepresentation(image1)!
    let data2: NSData = UIImagePNGRepresentation(image2)!
    return data1.isEqual(data2)
} 
```

或者根据@nhgrif 的建议扩展 UIImage ：

```
import UIKit

extension UIImage {

    func isEqualToImage(image: UIImage) -> Bool {
        let data1: NSData = UIImagePNGRepresentation(self)!
        let data2: NSData = UIImagePNGRepresentation(image)!
        return data1.isEqual(data2)
    }

} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-02-25T18:29:28.407

更新了 Mark Tickner 对 Swift 4 的解决方案

```
import UIKit

extension UIImage {

    func isEqualToImage(_ image: UIImage) -> Bool {
        let data1 = self.pngData()
        let data2 = image.pngData()
        return data1 == data2
    }

} 
```

这两个变量可能有点矫枉过正，但它们可能有助于向对此不熟悉的人解释。可以缩短为：

```
import UIKit

extension UIImage {

    func isEqualToImage(_ image: UIImage) -> Bool {
        return self.pngData() == image.pngData()
    }

} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-06T01:22:04.850

当两者都使用时`[UIImage imageNamed:]`，我们可以使用`isEqual:`，否则我们可以比较数据。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-17T01:02:55.273

我的首选（Swift）解决方案

```
import UIKit

func ==(lhs: UIImage, rhs: UIImage) -> Bool
{
  guard let data1 = UIImagePNGRepresentation(lhs),
            data2 = UIImagePNGRepresentation(rhs)
    else { return false }

  return data1.isEqual(data2)
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-04-20T08:25:29.353

正确答案取决于“您要进行什么样的比较？”。

1.  最**简单的方法**就是比较数据。
2.  如果你想知道**图像是否是从一个本地文件创建的**——你可以使用 -isEqual: （但有一种危险的方法，因为我不确定如果图像缓存由于某种原因被清除会发生什么）。
3.  困难的方法是提供**每个像素的比较**（当然，系统会花更多的时间在上面）。由于法律原因，我无法提供我们公司图书馆的代码:(

但是你可以在这里查看 facebook 的 ios-snapshot-test-case 项目的好例子：[link right to the required file](https://github.com/facebook/ios-snapshot-test-case/blob/master/FBSnapshotTestCase/Categories/UIImage%2BCompare.m)。您可以使用性能测试来衡量流程时间。

为了大法官，我将从下面复制代码：

```
- (BOOL)fb_compareWithImage:(UIImage *)image tolerance:(CGFloat)tolerance
{
  NSAssert(CGSizeEqualToSize(self.size, image.size), @"Images must be same size.");

  CGSize referenceImageSize = CGSizeMake(CGImageGetWidth(self.CGImage), CGImageGetHeight(self.CGImage));
  CGSize imageSize = CGSizeMake(CGImageGetWidth(image.CGImage), CGImageGetHeight(image.CGImage));

  // The images have the equal size, so we could use the smallest amount of bytes because of byte padding
  size_t minBytesPerRow = MIN(CGImageGetBytesPerRow(self.CGImage), CGImageGetBytesPerRow(image.CGImage));
  size_t referenceImageSizeBytes = referenceImageSize.height * minBytesPerRow;
  void *referenceImagePixels = calloc(1, referenceImageSizeBytes);
  void *imagePixels = calloc(1, referenceImageSizeBytes);

  if (!referenceImagePixels || !imagePixels) {
    free(referenceImagePixels);
    free(imagePixels);
    return NO;
  }

  CGContextRef referenceImageContext = CGBitmapContextCreate(referenceImagePixels,
                                                             referenceImageSize.width,
                                                             referenceImageSize.height,
                                                             CGImageGetBitsPerComponent(self.CGImage),
                                                             minBytesPerRow,
                                                             CGImageGetColorSpace(self.CGImage),
                                                             (CGBitmapInfo)kCGImageAlphaPremultipliedLast
                                                             );
  CGContextRef imageContext = CGBitmapContextCreate(imagePixels,
                                                    imageSize.width,
                                                    imageSize.height,
                                                    CGImageGetBitsPerComponent(image.CGImage),
                                                    minBytesPerRow,
                                                    CGImageGetColorSpace(image.CGImage),
                                                    (CGBitmapInfo)kCGImageAlphaPremultipliedLast
                                                    );

  if (!referenceImageContext || !imageContext) {
    CGContextRelease(referenceImageContext);
    CGContextRelease(imageContext);
    free(referenceImagePixels);
    free(imagePixels);
    return NO;
  }

  CGContextDrawImage(referenceImageContext, CGRectMake(0, 0, referenceImageSize.width, referenceImageSize.height), self.CGImage);
  CGContextDrawImage(imageContext, CGRectMake(0, 0, imageSize.width, imageSize.height), image.CGImage);

  CGContextRelease(referenceImageContext);
  CGContextRelease(imageContext);

  BOOL imageEqual = YES;

  // Do a fast compare if we can
  if (tolerance == 0) {
    imageEqual = (memcmp(referenceImagePixels, imagePixels, referenceImageSizeBytes) == 0);
  } else {
    // Go through each pixel in turn and see if it is different
    const NSInteger pixelCount = referenceImageSize.width * referenceImageSize.height;

    FBComparePixel *p1 = referenceImagePixels;
    FBComparePixel *p2 = imagePixels;

    NSInteger numDiffPixels = 0;
    for (int n = 0; n < pixelCount; ++n) {
      // If this pixel is different, increment the pixel diff count and see
      // if we have hit our limit.
      if (p1->raw != p2->raw) {
        numDiffPixels ++;

        CGFloat percent = (CGFloat)numDiffPixels / pixelCount;
        if (percent > tolerance) {
          imageEqual = NO;
          break;
        }
      }

      p1++;
      p2++;
    }
  }

  free(referenceImagePixels);
  free(imagePixels);

  return imageEqual;
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-06-07T14:53:09.233

将图像转换为 JPG / PNG，或依赖可访问性标识符要么是一项昂贵的操作，要么是脆弱的且容易失败。

在这里，我遵循 Apple 在[以下链接](https://developer.apple.com/documentation/uikit/uiimage)中提供的建议：

> isEqual( *:) 方法是确定两个图像是否包含相同图像数据的唯一可靠方法。您创建的图像对象可能彼此不同，即使您使用相同的缓存图像数据对其进行初始化也是如此。确定它们是否相等的唯一方法是使用 isEqual(* :) 方法，该方法比较实际的图像数据。清单 1 说明了比较图像的正确和错误方法。

为了简化事情，我创建了以下扩展来进行比较，这样我就可以避免转换第一张图像的问题：

```
import UIKit

extension UIImage {
    func isEqual(to image: UIImage) -> Bool {
        return isEqual(image)
    }
} 
```

有了这个，我现在可以设置一个示例来在一对图像上进行比较：

```
let imageA = UIImage(named: "a")!
let imageB = UIImage(named: "b")!
let imageC = UIImage(named: "a")!

print(imageA.isEqual(to: imageA)) // true
print(imageA.isEqual(to: imageC)) // true
print(imageA.isEqual(to: imageB)) // false 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-05-30T20:58:07.820

我对 Mark 的回答做了一些更改，并使用了 Data 和 elementsEqual 而不是 NSData 和 isEqual。

```
extension UIImage {
    func isEqual(to image: UIImage) -> Bool {
        guard let data1: Data = UIImagePNGRepresentation(self),
            let data2: Data = UIImagePNGRepresentation(image) else {
                return false
        }
        return data1.elementsEqual(data2)
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-12-28T12:00:49.363

Swift 4.x 版本 Facebook 的比较算法：

```
/// Value in range 0...100 %
typealias Percentage = Float

// See: https://github.com/facebookarchive/ios-snapshot-test-case/blob/master/FBSnapshotTestCase/Categories/UIImage%2BCompare.m
private func compare(tolerance: Percentage, expected: Data, observed: Data) throws -> Bool {
    guard let expectedUIImage = UIImage(data: expected), let observedUIImage = UIImage(data: observed) else {
        throw Error.unableToGetUIImageFromData
    }
    guard let expectedCGImage = expectedUIImage.cgImage, let observedCGImage = observedUIImage.cgImage else {
        throw Error.unableToGetCGImageFromData
    }
    guard let expectedColorSpace = expectedCGImage.colorSpace, let observedColorSpace = observedCGImage.colorSpace else {
        throw Error.unableToGetColorSpaceFromCGImage
    }
    if expectedCGImage.width != observedCGImage.width || expectedCGImage.height != observedCGImage.height {
        throw Error.imagesHasDifferentSizes
    }
    let imageSize = CGSize(width: expectedCGImage.width, height: expectedCGImage.height)
    let numberOfPixels = Int(imageSize.width * imageSize.height)

    // Checking that our `UInt32` buffer has same number of bytes as image has.
    let bytesPerRow = min(expectedCGImage.bytesPerRow, observedCGImage.bytesPerRow)
    assert(MemoryLayout<UInt32>.stride == bytesPerRow / Int(imageSize.width))

    let expectedPixels = UnsafeMutablePointer<UInt32>.allocate(capacity: numberOfPixels)
    let observedPixels = UnsafeMutablePointer<UInt32>.allocate(capacity: numberOfPixels)

    let expectedPixelsRaw = UnsafeMutableRawPointer(expectedPixels)
    let observedPixelsRaw = UnsafeMutableRawPointer(observedPixels)

    let bitmapInfo = CGBitmapInfo(rawValue: CGImageAlphaInfo.premultipliedLast.rawValue)
    guard let expectedContext = CGContext(data: expectedPixelsRaw, width: Int(imageSize.width), height: Int(imageSize.height),
                                          bitsPerComponent: expectedCGImage.bitsPerComponent, bytesPerRow: bytesPerRow,
                                          space: expectedColorSpace, bitmapInfo: bitmapInfo.rawValue) else {
        expectedPixels.deallocate()
        observedPixels.deallocate()
        throw Error.unableToInitializeContext
    }
    guard let observedContext = CGContext(data: observedPixelsRaw, width: Int(imageSize.width), height: Int(imageSize.height),
                                          bitsPerComponent: observedCGImage.bitsPerComponent, bytesPerRow: bytesPerRow,
                                          space: observedColorSpace, bitmapInfo: bitmapInfo.rawValue) else {
        expectedPixels.deallocate()
        observedPixels.deallocate()
        throw Error.unableToInitializeContext
    }

    expectedContext.draw(expectedCGImage, in: CGRect(origin: .zero, size: imageSize))
    observedContext.draw(observedCGImage, in: CGRect(origin: .zero, size: imageSize))

    let expectedBuffer = UnsafeBufferPointer(start: expectedPixels, count: numberOfPixels)
    let observedBuffer = UnsafeBufferPointer(start: observedPixels, count: numberOfPixels)

    var isEqual = true
    if tolerance == 0 {
        isEqual = expectedBuffer.elementsEqual(observedBuffer)
    } else {
        // Go through each pixel in turn and see if it is different
        var numDiffPixels = 0
        for pixel in 0 ..< numberOfPixels where expectedBuffer[pixel] != observedBuffer[pixel] {
            // If this pixel is different, increment the pixel diff count and see if we have hit our limit.
            numDiffPixels += 1
            let percentage = 100 * Float(numDiffPixels) / Float(numberOfPixels)
            if percentage > tolerance {
                isEqual = false
                break
            }
        }
    }

    expectedPixels.deallocate()
    observedPixels.deallocate()

    return isEqual
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-04-13T10:50:31.453

> 斯威夫特 3

有两种方法。像：-

1) 使用 isEqual() 函数。

```
 self.image?.isEqual(UIImage(named: "add-image")) 
```

2）使用accessibilityIdentifier

将accessibilityIdentifier设置为图像名称

```
myImageView.image?.accessibilityIdentifier = "add-image" 
```

然后使用以下代码。

```
extension UIImageView
{
func getFileName() -> String? {
// First set accessibilityIdentifier of image before calling.
let imgName = self.image?.accessibilityIdentifier
return imgName
}
} 
```

最后，识别方法的调用方式

```
myImageView.getFileName() 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-10-17T09:22:20.457

**斯威夫特 5.x**

你可以使用

```
let image: UIImage!
let anotherImage: UIImage!

image == anotherImage 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-07-23T13:32:56.653

## 最初比较图像大小

对于较便宜的方法，首先比较图像大小。即使图像内部有微小的变化，大小也会有所不同。

```
NSData *data1 = UIImagePNGRepresentation(image1);
NSData *data2 = UIImagePNGRepresentation(image2);

if(data1.length == data2.length) {
    // if required, compare the data to confirm it
    if(data1 isEqual:data2) {
        // images are exactly same
    } else {
        // even though size is same images are different
    }
} else {
    // images are different.
} 
```

在比较来自相同来源（相同尺寸、格式等）的图像时成功进行了测试。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-03-03T01:03:42.343

这种方法效果很好：

```
func isEqualImages(image1: UIImage, image2: UIImage) -> Bool {
    let data1: Data? = UIImagePNGRepresentation(image1)
    let data2: Data? = UIImagePNGRepresentation(image2)
    return data1 == data2
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-02T14:31:55.123

速记和 Swifty 解决方案

```
extension UIImage: Equatable {
    static func ==(lhs: UIImage, rhs: UIImage) -> Bool {
        return lhs.pngData() == rhs.pngData()
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-07-03T21:38:27.523

我不确定比较 UIImage 数据，因为它会非常昂贵。你可以做的是继承 Uimage 并添加你自己的标签属性，然后在更改图像之前比较标签。分配

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-01-12T22:17:38.557

我需要检测视频馈送帧中的差异并阈值该差异，以便决定在我的代码中执行某些操作。您可以使用类似的像素比较来查看 UIImage 的 pngData。

[在这里](https://stackoverflow.com/questions/41456328/comparing-two-images-and-finding-the-percent-difference/59708593#59708593)查看我的答案

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2017-05-03T10:38:02.470

如果您知道一个图像名称，它将对您有所帮助....

```
CGImageRef cgImage = [imageView.image CGImage];
if (cgImage == [UIImage imageNamed:@"imagename.png"].CGImage) {
   // True Statement
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-08-10T17:30:50.130

我们需要在 Objective-C 中使用 isEqualToData 方法。苹果文件指出

`Two data objects are equal if they hold the same number of bytes, and if the bytes at the same position in the objects are the same.`

```
- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2
{
    NSData *data1 = UIImagePNGRepresentation(image1);
    NSData *data2 = UIImagePNGRepresentation(image2);

    return [data1 isEqualToData:data2];
} 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2012-09-05T13:20:07.063

好吧，您还可以使用“标记”属性来识别程序后期的对象。只需设置整数值就可以了

# c# - “显式实现接口”类中的方法调用

> ID：11342898
> 
> 赞同：1
> 
> 时间：2012-07-05T10:55:46.170
> 
> 标签：c#, .net, inheritance

我想根据下面描述的上下文/场景来了解在 C# 中**显式实现接口的含义。**可以说我有以下**界面**：

```
public interface ITestService
{
    void Operation1();
    void Operation2();
} 
```

假设我显式地实现了接口，如下所示，是否可以使用任何方式从 Operation1() 调用 Operation2()？

```
public sealed class TestService : ITestService
{
    public TestService(){}

    void ITestService.Operation1()
    {
        // HOW WOULD ONE SUCCESSFULLY INVOKE Operation2() FROM HERE. Like:
        Operation2();
    }

    void ITestService.Operation2()
    {

    }
} 
```

发生什么不同（在包装下）以允许下面声明不同的 testService1 和 testService2 表现不同？

```
static class Program
{
    static void Main(string[] args)
    {
        ITestService testService1 = new TestService();      
        testService1.Operation1(); // => Works: WHY IS THIS POSSIBLE, ESPECIALLY SINCE Operation1() AND Operation2() WOULD BE *DEEMED* private?
        // *DEEMED* since access modifiers on functions are not permitted in an interface

        // while ...
        TestService testService2 = new TestService();
        testService2.Operation1(); //! Fails: As expected
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:57:51.823

```
void ITestService.Operation1()
{
    ((ITestService)this).Operation2();
} 
```

至于你的第二个问题：

接口的所有成员都是公共的。因此，实施也将是公开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:01:30.713

对于你的第二个问题

> testService1.Operation1(); // => 有效：为什么这可能，特别是因为 Operation1() 和 Operation2() 会*被视为* 私有？

因为接口中的函数是公共的，你可以调用它们。此外，您已经显式实现了接口方法，您不能针对类对象调用它。例如

```
TestService ts = new TestService();
ts.Operation1();// this would cause an error 
```

您可能会看到：[显式接口实现（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173157)

# ios5 - NSArrayM objectAtIndex：空数组的索引 5 超出范围

> ID：11342900
> 
> 赞同：0
> 
> 时间：2012-07-05T10:55:58.907
> 
> 标签：ios5

我在这个网站上搜索过：

[https://stackoverflow.com/search?page=2&tab=relevance&q=nsarraym%20objectatindex%20index%205%20beyond%20bounds%20for%20empty%20array%27](https://stackoverflow.com/search?page=2&tab=relevance&q=nsarraym%20objectatindex%20index%205%20beyond%20bounds%20for%20empty%20array%27)但解决方案不适合我。

我在我的应用程序中使用了拉刷新： [https](https://github.com/leah/PullToRefresh) ://github.com/leah/PullToRefresh ，但是当我拉的高度太大时，它让我崩溃：NSArrayM objectAtIndex：索引5超出空数组的范围，如果我的tableview单元只访问4个单元格，它给我：NSArrayM objectAtIndex：空数组的索引4超出范围，如果只有3个单元格可以访问它给我NSArrayM objectAtIndex：空数组的索引3超出范围。同时我使用了其他拉刷新库，如：[https](https://github.com/emreberge/EGOTableViewPullRefresh) ://github.com/emreberge/EGOTableViewPullRefresh 等等，给我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:18:46.247

当然它是越界的：你的数组是空的，你不能从中提取任何对象。

如果数组有`n`对象，您最多可以检索到 index `n - 1`。空数组有 0 个对象，因此您甚至无法检索索引 0。

# iphone - 如何制作非矩形形状的图像

> ID：11342902
> 
> 赞同：1
> 
> 时间：2012-07-05T10:55:59.877
> 
> 标签：iphone, ios5, photolibrary

我在创建不规则形状的图像时遇到问题。这是我的框架的例子。

![包含两部分奇形怪状的框架](../Images/01b7b0c3ade3e5cc66e039403aea66b1.png)

请给出任何想法来创建这样的图像。它包含两个不同帧中的两个图像。但是这两个图像在装入框架后都隐藏了其中的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:35:49.887

你需要有边框的图像来掩盖你的 imagview 的图像。现在这样做：

```
 #import <QuartzCore/QuartzCore.h>
 // remember to include Framework as well

CALayer *mask = [CALayer layer];
mask.contents = (id)[[UIImage imageNamed:@"bordered_image_mask.png"] CGImage]; // here bordered image
mask.frame = CGRectMake(5, 5, <img_width>, <img_height>); // here x and y is 5 to show white boder around like in image
yourImageView.layer.mask = mask;
yourImageView.layer.masksToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:03:30.653

您必须创建遮罩图像，以遮盖原始图像的一部分。尝试查看[如何遮罩 UIImageView](https://stackoverflow.com/questions/5757386/how-to-mask-an-uiimageview)可能会有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:07:01.300

您可以使用掩码：

```
- (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage
{
    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);

    return [UIImage imageWithCGImage:masked];
} 
```

*   图像是您的原始图像。
*   maskImage 是黑白图像。maskImage 为黑色的地方将显示您的原始图像。

# collision-detection - V-Collide 碰撞检测 VRML

> ID：11342906
> 
> 赞同：1
> 
> 时间：2012-07-05T10:56:17.707
> 
> 标签：collision-detection, vrml

我想检测 VRML 对象之间的碰撞，不希望它们相互绘制。我是我的研究，我找到了 v-collide，但不知道如何使用它，并且可以找到任何可以帮助我的网站。任何人都知道如何使用它 openvrml 以便我可以检测到我的对象之间的碰撞？

# cakephp - 分类列表分页

> ID：11342907
> 
> 赞同：1
> 
> 时间：2012-07-05T10:56:20.800
> 
> 标签：cakephp, cakephp-2.2

我在 CategoriesController 中的 admin_index() 方法中使用了以下代码

```
$this->set('title_for_layout', __('Categories', true));
$treelist = $this->Category->generateTreeList(null, null, null, '_');
$categories = $this->Category->children();
$i = 0;

foreach ($treelist as $value) {
    $categories[$i]['Category']['path'] = $value;
    $i++;
}

$this->set(compact('categories')); 
```

如何对类别列表进行分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:00:14.397

你应该能够调用分页。

```
$this->set('categories', $this->paginate()); 
```

您需要确保视图中有分页控件。

# c# - C# 中的接口委托

> ID：11342909
> 
> 赞同：8
> 
> 时间：2012-07-05T10:56:24.860
> 
> 标签：c#, delphi, interface

在 Delphi 中，我们可以将接口的实现委托给另一个类，我想知道这在 C# 中是否可行？

例如，我有接口 IMyInterface，我说 TMyClass 实现了 IMyInterface。但实际上并没有。在内部，我可以使用 implements 关键字将接口实现委托给另一个类，而不必在 TMyClass 中声明每个方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:05:42.830

有一个简单的答案：不，C# 不允许它以与 Delphi 相同的方式。

对于那些了解 C# 但不了解 Delphi 的人，这就是意思：[http](http://docwiki.embarcadero.com/RADStudio/en/Implementing_Interfaces) ://docwiki.embarcadero.com/RADStudio/en/Implementing_Interfaces ，请参阅“通过委托实现接口（仅限 Win32）”部分。

我猜你将不得不手动将方法调用传递给接口。我的 C# 有点生疏（不过我仍然可以很好地阅读它）：

```
public class Blah : ISomeInterface
{
    public ISomeInterface implementer { getter and setter here }

    public int ISomeInterface.DoThis() 
    { 
        if (implementer) return implementer.DoThis(); 
    }
    public void ISomeInterface.DoThat(int param) 
    { 
        if (implementer) implementer.DoThat(param); 
    }

etc... 
```

Where`DoThis`和`DoThat`are 方法`ISomeInterface`必须由`Blah`. 在 C# 中，您必须将这些方法中的每一个显式委托给包含的接口。`implements`在Delphi 中，当您在a`class`或`interface`类型的属性之后使用关键字时，这是自动完成的（即方法在幕后生成和调用，对用户不可见） 。

我假设一些回答者对术语`implements`and 的使用感到困惑`delegation`，它们在 C# 中具有不同的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:02:32.273

我认为没有任何实用的方法。您*可以*将实现类编写为抽象类，这反过来变得非常笨拙，因为您不能再实例化第一个类。唯一的办法是写一些丑陋的空虚方法，像这样：

```
public interface ISomething
{
    void DoOne();
    void DoTwo();
}

public class Something : ISomething
{
    public virtual void DoOne() { }
    public virtual void DoTwo() { }
} 
```

但这是一个糟糕的类设计 IMO，因为您确实应该首先将实现类*抽象*化，因此人们无法实例化实现虚假接口的类的实例。

因此，正确的方法是在您的“抽象”类中部分实现接口，并通过将其他类标记为抽象来将它们委托给继承类（直到要实现的派生类）。

IE

```
public interface ISomething
{
    void DoOne();
    void DoTwo();
}

public abstract class Something : ISomething
{
    public abstract void DoOne();
    public abstract void DoTwo();
} 
```

这样，没有人可以直接实例化你不稳定的“Something”类，但仍然*需要*派生类来实现尚未实现的接口的抽象方法。这更加健壮和安全。

请注意，如果您正在实现的是您的 OWN 接口，请将其废弃。将接口编写为一个抽象类，以开始并实现一些方法，这要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T11:07:56.483

您可以使用部分类，这将使您可以将实现放到不同的文件中，类的两个部分应该在同一个程序集中。

Class1.cs

```
public partial class Class1: IInterface {} 
```

Class1Impl.cs

```
public partial class Class1 { /*implementation */ } 
```

我无法想象另一种方式来做你想做的事。只需使用封装 =) 这不是您真正想要的，您必须编写一些存根代理方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:08:34.970

在 C# 中，您不能委托类的接口实现，除非通过继承（请参阅*Nikola Anusev*的答案）。

但是，您可以使用部分类定义将接口实现与类的其余部分分开。

在一个（**MyClass.Specific.cs**）文件中，您有：

```
public partial class MyClass
{
    void MySpecificMethod() {...}
} 
```

在另一个文件（**MyClass.IMyInterface.cs**）中，您只有特定于类的方法：

```
public partial class MyClass : IMyInterface
{
    void IMyInterface.MySpecificMethod() {...}
} 
```

您仍然拥有 MyClass 中的所有方法，但在不同的文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T11:04:49.763

您可以使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)：

```
// SomeThing.cs
public partial class SomeThing
{
   // your interface independant part
}

// SomeThing.ISomeThing.cs
public partial class SomeThing: ISomeThing
{
   // ISomeThing implementation
} 
```

这两个文件需要在同一个程序集中。它们被编译器组合成一个类。

# html - 节省设计时间网页

> ID：11342910
> 
> 赞同：-1
> 
> 时间：2012-07-05T10:56:25.300
> 
> 标签：html, save, webpage

我有一个简单的问题是可以保存一个有一些更改的 html，我不是在谈论代码更改。用户将在文本框中输入一些单词并单击一些复选框，然后用户将保存当前页面并保留更改。

我在 Internet Explorer 上尝试它我有我的页面我在文本框中输入了一些单词，而不是当我将文件另存为并保存时，当我重新打开它时，更改不会保留。

有任何想法吗？

作为后续，非常感谢你们的回复，我不知道我是怎么忘记饼干的。

无论如何，当重新检查我的项目时，我发现我希望我的网页充当普通文档，这意味着当用户进行一些更改时，正如我在输入文本等之前所说的那样。我希望我的用户保存这些更改并发送这个“已更改” ' 网页作为电子邮件的附件。所以我的主要想法是用户将对本地页面进行一些输入，顺便说一下它不在服务器上，他们将保存此页面并发送它。

这可能吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:58:13.350

浏览器是客户端，它会将数据保存在缓存中特定时间，然后每次重新加载后都会刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:05:18.147

是的，您可以为此使用 cockkies，将控件的状态保存在 cockkie 中，并在下次重新加载页面时重新加载，有关 cockies 的更多信息，请[转到此处](http://www.w3schools.com/js/js_cookies.asp)

第二种基于 HTML 5 的解决方案是`local storage`，有关更多信息，请[点击此处](http://www.w3schools.com/html5/html5_webstorage.asp)

# iphone - 如何在 xcode 4.2 管理器中添加应用程序

> ID：11342911
> 
> 赞同：-3
> 
> 时间：2012-07-05T10:56:25.613
> 
> 标签：iphone, xcode4

我在 xcode 中开发了一个示例 iphone 应用程序，配置文件已成功添加，但我无法将我的应用程序添加到管理器应用程序选项卡。

然后在我运行应用程序之前，如果我选择我的设备，我会收到类似的错误

`[BEROR] Copde Sign error: a valid provisioning profile matching the application's Identifier 'Application name' could not be found`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:19:00.417

Provisioning Profile 必须与您的 Bundle Identifier 相同

# asp.net-mvc - 如何使用 Knockout js 在 foreach 项目中显示“已保存的消息”？

> ID：11342913
> 
> 赞同：0
> 
> 时间：2012-07-05T10:56:37.080
> 
> 标签：asp.net-mvc, asp.net-mvc-3, knockout.js, knockout-2.0

我有一个用于编辑一些项目的 foreach。每个项目都有一个“保存”按钮。我想在按钮下方显示一条消息。如何在点击事件中显示此消息？这是html：

```
 <div id="divhorarios" data-bind="foreach: horarios">
    <div>
    <label>Fecha Ini: </label><input data-bind="value: FechaIni, datepicker: FechaIni, datepickerOptions: {dateFormat: 'dd/mm/yy'}" />
    <label>Fecha Fin: </label><input data-bind="value: FechaFin, datepicker: FechaFin, datepickerOptions: {dateFormat: 'dd/mm/yy'}" />
     <label>Nombre:</label> <input data-bind="value: Nombre"/>
    <br />
<button data-bind='click: $root.saveHorario'>Guardar</button>
    <br />
    <span data-bind="visible: showGuardado" style=" color: Green;">El horario ha sido guardado</span>
    </div>
    </div> 
```

在模型的 javascript 代码中，我设置了 showGuardado=true 但消息未显示：

```
var HorariosModel = function (horarios) {
    var self = this;

    self.horarios = ko.observableArray(horarios);

    self.guardarHorario = function (horario) {
        $.post('/admin/horariosjsonguardar/' + idModelo, horario, function (returnedData) {
            horario.showGuardado = true;
        });
    };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:28:48.393

您还没有那里的所有代码，但很可能您需要将其更改为：-

```
self.horarios = ko.observableArray([]);
ko.mapping.fromJS(horarios, {}, self.horarios); 
```

这会将所有传入的东西变成可观察的。

但是，给定点击处理程序，您实际上可能想要处理每个数组项上的点击的东西，这是一个显示实际代码的小提琴：-

[http://jsfiddle.net/keith_nicholas/UqFP2/](http://jsfiddle.net/keith_nicholas/UqFP2/)

这样每个按钮都是独立的，每个按钮都有自己的绿色消息。

注意：我将日期选择器更改为简单的输入，并删除了仅用于示例的帖子...

# cassandra - 使用同一台计算机作为 Cassandra 节点和 Cassandra 客户端

> ID：11342918
> 
> 赞同：1
> 
> 时间：2012-07-05T10:56:48.583
> 
> 标签：cassandra

如果您使用 Cassandra 分布式键值存储，您将有多个 Cassandra 节点，因此会有几台计算机。数据不只是在那里，当然，您还有一个或多个与 Cassandra 节点通信的客户端程序。客户端完成的计算密集型工作也可能分布在多台计算机上。客户端和 Cassandra 节点是否应该是独立的计算机？可以将同一台计算机用作 Cassandra 节点和 Cassandra 客户端吗？从正确执行的意义上说，我希望它会起作用，但是会有不可接受的性能问题吗？

我看到的 Cassandra 文档中提到 Cassandra 节点和客户端应该是独立的计算机，但我没有看到明确的建议。

我为什么要问？我为什么要这样做？我想到的应用程序不需要客户端在本地存储任何数据，他们使用 Cassandra 存储所有持久数据。他们的工作是计算密集型的，因此瓶颈可能是客户端 CPU 处理而不是 Cassandra 处理。也不将它们用作 Cassandra 节点似乎很浪费。

另外，如果每个计算（客户端）节点也是一个 Cassandra 节点，我可以使用每个节点的 Cassandra 令牌（用于分发 Cassandra 的数据）来分发客户端计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T16:31:30.857

对于某些类型的部署，这是一个有效的设置。人们这样做的最常见情况是针对 Cassandra 运行 Hadoop 作业时。[Cassandra Wiki 建议您在集群中的每个节点上运行一个 Hadoop](http://wiki.apache.org/cassandra/HadoopSupport#ClusterConfig) TaskTracker 。这种类型的部署类似于您所描述的。

# android - 在整个应用程序中保持 XMPP 连接（使用 smack）处于活动状态

> ID：11342920
> 
> 赞同：7
> 
> 时间：2012-07-05T10:56:50.123
> 
> 标签：android, xmpp

我正在使用 XMPP 连接（使用 smack）在 android 应用程序中进行聊天。我已经与 openfire 建立了连接，我也可以发送和接收消息。但问题是当我进入 XMPPClient.java 活动时，它做了连接。所以在没有进入那个活动之前我无法收到任何消息。那么如何在开始时建立连接，然后在其他活动中重用。代码在这 2 个链接[ConnectionSettings 文件](http://pastesite.com/39159)和聊天[屏幕](http://pastesite.com/39162)中，我们可以在其中进行聊天。在此链接中，评论行也是我的问题，因此也请参阅该评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:03:26.940

创建全局 XMPPConnection 对象并在下面使用函数并存储在全局 XMPPConnection 对象中并在任何地方使用该连接对象。这是一个示例 gtalk 示例。

```
 public XMPPConnection login() throws XMPPException {

         ConnectionConfiguration config = new
         ConnectionConfiguration("talk.google.com",5222,"gmail.com");   
         config.setSecurityMode(SecurityMode.required);
         config.setTruststoreType("BKS");
         config.setTruststorePath("/system/etc/security/cacerts.bks");
         XMPPConnection connection = new XMPPConnection(config);        
        connection.connect();
        connection.login(username, password);
        Presence presence = new Presence(Presence.Type.available);
        presence.setMode(Presence.Mode.available);  
        connection.sendPacket(presence);
        try {
            Thread.sleep(3000);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
     return connection;
} 
```

# javascript - 限制 tinyMCE 中的字符数

> ID：11342921
> 
> 赞同：26
> 
> 时间：2012-07-05T10:56:56.793
> 
> 标签：javascript, tinymce, rte

我`tinyMCe`用于我的项目。一切正常，但现在我想限制将插入到`tinyMce`textarea中的字符数

```
tinyMCE.init({
// General options
mode : "textareas",
theme : "simple",
plugins : "autolink,lists,pagebreak,style,table,save,advhr,advimage,advlink,emotions,media,noneditable,nonbreaking",

// Theme options
theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect",
theme_advanced_buttons2 : "bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,code,|,forecolor,backcolor",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "bottom",
max_chars : "10",
max_chars_indicator : "lengthBox",
theme_advanced_resizing : true
}); 
```

我用了 ：-

```
max_chars : "10",
max_chars_indicator : "lengthBox", 
```

但仍然无法正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-06-15T15:51:51.460

这适用于 tinyMCE 4.3.12 并且还捕获粘贴：

编辑：修复了错误和扩展代码以在编辑器下显示字符计数器。可能不是最好的方法，因为它有点依赖于 tinyMCE 的当前 HTML 结构，在隐藏的文本区域之前有编辑器 div。

这个版本只计算文本长度，忽略 HTML 标签长度。要计算完整的 HTML 长度，请将所有“innerText”替换为“innerHTML”。

```
tinymce.init({
    max_chars: 1000, // max. allowed chars
    setup: function (ed) {
        var allowedKeys = [8, 37, 38, 39, 40, 46]; // backspace, delete and cursor keys
        ed.on('keydown', function (e) {
            if (allowedKeys.indexOf(e.keyCode) != -1) return true;
            if (tinymce_getContentLength() + 1 > this.settings.max_chars) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
            return true;
        });
        ed.on('keyup', function (e) {
            tinymce_updateCharCounter(this, tinymce_getContentLength());
        });
    },
    init_instance_callback: function () { // initialize counter div
        $('#' + this.id).prev().append('<div class="char_count" style="text-align:right"></div>');
        tinymce_updateCharCounter(this, tinymce_getContentLength());
    },
    paste_preprocess: function (plugin, args) {
        var editor = tinymce.get(tinymce.activeEditor.id);
        var len = editor.contentDocument.body.innerText.length;
        var text = $(args.content).text();
        if (len + text.length > editor.settings.max_chars) {
            alert('Pasting this exceeds the maximum allowed number of ' + editor.settings.max_chars + ' characters.');
            args.content = '';
        } else {
            tinymce_updateCharCounter(editor, len + text.length);
        }
    }
});

function tinymce_updateCharCounter(el, len) {
    $('#' + el.id).prev().find('.char_count').text(len + '/' + el.settings.max_chars);
}

function tinymce_getContentLength() {
    return tinymce.get(tinymce.activeEditor.id).contentDocument.body.innerText.length;
} 
```

参考：[如何防止 tinyMCE 的粘贴事件？](https://stackoverflow.com/questions/15016210/how-can-i-prevent-tinymces-paste-event)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-07T16:55:25.803

TinyMCE 4+
+
jQuery

```
<textarea id="description_edit" name="description_edit"><?=htmlspecialchars($this->company->description);?></textarea>

<div><span>Characters left:</span> <span id="chars_left"></span></div>

<script type="text/javascript" src="/js/tinymce/tinymce.min.js"></script>
<script>
    var max_chars = 200; //max characters
    var max_for_html = 300; //max characters for html tags
    var allowed_keys = [8, 13, 16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 46];
    var chars_without_html = 0;

    function alarmChars() {
        if (chars_without_html > (max_chars - 25)) {
            $('#chars_left').css('color', 'red');
        } else {
            $('#chars_left').css('color', 'gray');
        }
    }

    $(function () {
        tinymce.init({
            selector: "#description_edit",
            theme: "modern",
            width: 320,
            height: 130,
            plugins: [
                "advlist autolink lists charmap print preview hr anchor pagebreak",
                "searchreplace visualblocks visualchars code insertdatetime media nonbreaking",
                "save table contextmenu directionality paste textcolor"
            ],
            image_advtab: true,
            language: 'en',
            menubar: false,
            statusbar: false,

            setup: function (ed) {
                ed.on("KeyDown", function (ed, evt) {
                    chars_without_html = $.trim(tinyMCE.activeEditor.getContent().replace(/(<([^>]+)>)/ig, "")).length;
                    chars_with_html = tinyMCE.activeEditor.getContent().length;
                    var key = ed.keyCode;

                    $('#chars_left').html(max_chars - chars_without_html);

                    if (allowed_keys.indexOf(key) != -1) {
                        alarmChars();
                        return;
                    }

                    if (chars_with_html > (max_chars + max_for_html)) {
                        ed.stopPropagation();
                        ed.preventDefault();
                    } else if (chars_without_html > max_chars - 1 && key != 8 && key != 46) {
                        alert('Characters limit!');
                        ed.stopPropagation();
                        ed.preventDefault();
                    }
                    alarmChars();
                });
            },

            toolbar: "bold italic underline | alignleft aligncenter alignright alignjustify | forecolor backcolor | bullist numlist | charmap",
            style_formats: [
                {title: 'Bold text', inline: 'b'},
                {title: 'Red text', inline: 'span', styles: {color: '#ff0000'}},
                {title: 'Red header', block: 'h1', styles: {color: '#ff0000'}},
                {title: 'Example 1', inline: 'span', classes: 'example1'},
                {title: 'Example 2', inline: 'span', classes: 'example2'},
                {title: 'Table styles'},
                {title: 'Table row 1', selector: 'tr', classes: 'tablerow1'}
            ]
        });

        chars_without_html = $.trim($("#description_edit").text().replace(/(<([^>]+)>)/ig, "")).length;
        $('#chars_left').html(max_chars - chars_without_html);
        alarmChars();
    });
</script> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T03:57:49.620

上面的答案很棒！我做了一个小的修改，以便我们可以通过将 max_chars 作为属性添加到 textarea 元素本身来设置它

```
setup : function(ed) {
        ed.onKeyDown.add(function(ed, evt) {
            //if ( $(ed.getBody()).text().length+1 > ed.getParam('max_chars')){
            if ( $(ed.getBody()).text().length+1 > $(tinyMCE.get(tinyMCE.activeEditor.id).getElement()).attr('max_chars')){
                evt.preventDefault();
                evt.stopPropagation();
                return false;
            }
        });
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-14T23:03:32.367

Providing support to backspace and delete keys. My version:

```
max_chars : 2000,
max_chars_indicator : ".maxCharsSpan",

setup : function(ed) {  
    wordcount = 0;
    wordCounter = function (ed, e) {
        text = ed.getContent().replace(/<[^>]*>/g, '').replace(/\s+/g, ' ');
        text = text.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        this.wordcount = ed.getParam('max_chars') - text.length;
        $(ed.getParam('max_chars_indicator')).text( this.wordcount + " (out of " +ed.getParam('max_chars')+ ") char(s) left." );
    };

    ed.onKeyUp.add( wordCounter );

    ed.onKeyDown.add(function(ed, e) {
    if (this.wordcount <= 0 && e.keyCode != 8 && e.keyCode != 46) {
         tinymce.dom.Event.cancel(e);
    }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-03T18:13:16.620

这是对我有用的解决方案。

我基本上采用了@needfulthing 提供的代码并修复了错误并改进了它。

```
function initTinymce(){

        tinymce.init({
            selector: '.richtext-editable',
            plugins: ['paste'],

            max_chars: 50000, // max. allowed chars

            setup: function (ed) {                              
                var allowedKeys = [8, 13, 16, 17, 18, 20, 33, 34, 35, 36, 37, 38, 39, 40, 46];
                ed.on('keydown', function (e) {
                    if (allowedKeys.indexOf(e.keyCode) != -1) return true;
                    if (tinymce_getContentLength() + 1 > this.settings.max_chars) {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                    return true;
                });
                ed.on('keyup', function (e) {
                    tinymce_updateCharCounter(this, tinymce_getContentLength());
                });                             
            },

            init_instance_callback: function () { // initialize counter div
                $('#' + this.id).prev().append('<div class="char_count" style="text-align:right"></div>');
                tinymce_updateCharCounter(this, tinymce_getContentLength());
            },

            paste_preprocess: function (plugin, args) {                             
                var editor = tinymce.get(tinymce.activeEditor.id);
                var len = editor.contentDocument.body.innerText.length;                             
                if (len + args.content.length > editor.settings.max_chars) {
                    alert('Pasting this exceeds the maximum allowed number of ' + editor.settings.max_chars + ' characters for the input.');
                    args.content = '';
                }                                   
                tinymce_updateCharCounter(editor, len + args.content.length);                               
            }

        });

        function tinymce_updateCharCounter(el, len) {
            $('#' + el.id).prev().find('.char_count').text(len + '/' + el.settings.max_chars);
        }

        function tinymce_getContentLength() {
            return tinymce.get(tinymce.activeEditor.id).contentDocument.body.innerText.length;
        }

} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-08T12:37:17.437

只是为了改进 Vladimir Miroshnichenko 给出的好例子，以获得更准确的计数，主要是针对带有重音字符的语言。

我还包括 Javascript SpellChecker，因为 tinyMCE 的一个（4.1）不能再使用了。因此 ed.addButton() 将在工具栏中包含一个按钮来调用 $Spelling.SpellCheckInWindow('editors')。这与 tinyMCE 4.1.7 完美配合。

如果您更喜欢在单词而不是字符上触发警报，我还添加了单词计数。

```
<textarea id="paragraph1" name="description_edit"><?=htmlspecialchars($this->company->description);?></textarea>

<div><span>Characters left:</span> <span id="chars_left"></span></div>

<script type="text/javascript" src="tinymce/tinymce.min.js"></script>
<script type="text/javascript" src="JavaScriptSpellCheck/include.js"></script>

<script>
var max_chars    = 300; //max characters
var max_for_html = 1000; //max characters for html tags
var allowed_keys = [8, 13, 16, 17, 18, 20, 33, 34, 35,36, 37, 38, 39, 40, 46];
var chars_without_html = 0;

function alarmChars(){
    if(chars_without_html > (max_chars - 25)){
        $('#chars_left').css('color','red');
    }else{
        $('#chars_left').css('color','gray');
    }
}        

$(function() {
    tinymce.init({
        selector: "textarea#paragraph1",
        theme: "modern",
        plugins: [
            "advlist autolink lists charmap preview hr anchor pagebreak",
            "visualblocks visualchars insertdatetime nonbreaking",
            "directionality paste textcolor"
        ],
        menubar:false,
        statusbar:false,

        toolbar: "bold italic underline | alignleft aligncenter alignright alignjustify | forecolor backcolor | bullist numlist | charmap | preview | Spellcheck", 

        setup : function(ed) {
            ed.addButton('Spellcheck', {
                title : 'Spellcheck',
                image : '/img/dict.png',
                onclick : function() {
                    // Add you own code to execute something on click
                    $Spelling.SpellCheckInWindow('editors');
                }
            });

            ed.on("KeyDown", function(ed,evt) {
                    whtml = tinyMCE.activeEditor.getContent();

                    without_html = whtml.replace(/(<([^>]+)>)/ig,"");
                    without_html = without_html.replace(/&([A-za- z])(?:acute|cedil|caron|circ|grave|orn|ring|slash|th|tilde|uml);/ig,'$1');
                    without_html = without_html.replace(/&hellip;/ig,'...');
                    without_html = without_html.replace(/&rsquo;/ig,'\'');
                    without_html = $.trim(without_html.replace(/&([A-za-z]{2})(?:lig);/ig,'$1'));

                    chars_without_html = without_html.length;
                    chars_with_html    = whtml.length;

                    wordscount = without_html.split(/[ ]+/).length;  // Just to get the wordcount, in case...

                    var key = ed.keyCode;

                    $('#chars_left').html(max_chars - chars_without_html);

                    if(allowed_keys.indexOf(key) != -1){
                        alarmChars();
                        return;                                                         
                    }

                    if (chars_with_html > (max_chars + max_for_html)){
                        ed.stopPropagation();
                        ed.preventDefault();
                    }else if (chars_without_html > max_chars-1 && key != 8 && key != 46){
                        alert('Characters limit!');
                        ed.stopPropagation();
                        ed.preventDefault();
                    }
                    alarmChars();                                                   
                }
            );
        },
    });

    whtml = $("#paragraph1").text();

    without_html = whtml.replace(/(<([^>]+)>)/ig,"");
    without_html = without_html.replace(/&([A-za-z])(?:acute|cedil|caron|circ|grave|orn|ring|slash|th|tilde|uml);/ig,'$1');
    without_html = without_html.replace(/&hellip;/ig,'...');
    without_html = without_html.replace(/&rsquo;/ig,'\'');
    without_html = $.trim(without_html.replace(/&([A-za-z]{2})(?:lig);/ig,'$1'));

    chars_without_html = without_html.length;

    $('#chars_left').html(max_chars - chars_without_html);
    alarmChars();                                           
}); 
```

我希望它会有所帮助，因为 tinyMCE 团队似乎在这个问题上有点固执......

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-05T13:15:17.600

除了您自己实现之外，没有 tinymce 配置设置`max_chars`：

```
tinyMCE.init({
   ...
   max_chars : "10",
   setup : function(ed) {
      ed.onKeyDown.add(function(ed, evt) {

        if ( $(ed.getBody()).text().length > ed.getParam('max_char')){
          e.preventDefault();
          e.stopPropagation();
          return false;
        } 

      });
   }
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-05T11:04:04.080

```
 // Returns text statistics for the specified editor by id
function getStats(id) {
    var body = tinymce.get(id).getBody(), text = tinymce.trim(body.innerText || body.textContent);

    return {
        chars: text.length,
        words: text.split(/[\w\u2019\'-]+/).length
    };
} 

function submitForm() {
        // Check if the user has entered less than 10 characters
        if (getStats('content').chars < 10) {
            alert("You need to enter 1000 characters or more.");
            return;
        }

        // Check if the user has entered less than 1 words
        if (getStats('content').words < 1) {
            alert("You need to enter 1 words or more.");
            return;
        }

        // Submit the form
        document.forms[0].submit();
    } 
```

[http://www.tinymce.com/wiki.php/How_to_limit_number_of_characters/words](http://www.tinymce.com/wiki.php/How_to_limit_number_of_characters/words)

希望能帮助到你

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-13T13:09:44.883

该解决方案对我有用，但有一个小错误。如果您看到字符数不正确，那是因为您使用

```
ed.on("KeyDown") 
```

将其更改为

```
ed.on("KeyUp") 
```

，然后它会正常工作。我没有用（'Change'）测试它。它也可能有效！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-31T11:41:38.450

tinyMCE 不提供任何方法来限制字符并限制用户输入更多字符，唯一的方法是使用任何显式插件或您的逻辑。下面的代码显示了我提出的问题，它工作正常。

这用于具有 id`summary`和另一个`character_count`用于显示字符数的段落 id 的 textarea。用户无法输入超过`max`限制的字符，在这种情况下，只有退格键有效。如果键在条件中，您可以通过提供 ascii 值来自由使用任何键。

```
tinymce.init({
  selector: '#summary',  // change this value according to your HTML
  auto_focus: 'element1',
  statusbar: false,
  toolbar: 'undo redo | styleselect | bold italic underline | formatselect | aligncenter | fontselect',
  setup: function (ed) {
            ed.on('KeyDown', function (e) { 
                var max = 150;
                var count = CountCharacters();
                if (count >= max) {
                        if(e.keyCode != 8 && e.keyCode != 46)
                          tinymce.dom.Event.cancel(e);
                          document.getElementById("character_count").innerHTML = "Maximun allowed character is: 150";

                } else {
                    document.getElementById("character_count").innerHTML = "Characters: " + count;
                 }
            });

        }
 });

 function CountCharacters() {
    var body = tinymce.get("summary").getBody();
    var content = tinymce.trim(body.innerText || body.textContent);
    return content.length;
}; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-23T19:57:38.087

下面的解决方案对我很有用： 1 - 在 textarea 的 html 代码中，必须包含 maxlength 的值和 textarea 的 id。
2 - 在脚本部分，代码如下。如果需要，请取消注释 alert() 行，然后输入您的消息。

```
<script type="text/javascript">
  tinymce.init ({
    ...
    ...
      setup: function(ed) {
        var maxlength = parseInt($("#" + (ed.id)).attr("maxlength"));
        var count = 0;
        ed.on("keydown", function(e) {
          count++;
          if (count > maxlength) {
            // alert("You have reached the character limit");
            e.stopPropagation();
            return false;
          }
        });
     },
```

```
<textarea type="text" id="test" name="test" maxlength="10"></textarea>
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-07-02T10:13:18.183

好的，新的 tinyMCE4X 有点变化。

```
 tinymce.init({
    charLimit : 10, // this is a default value which can get modified later
    setup: function(editor) {
        editor.on('change', function(e) {
            //define local variables
            var tinymax, tinylen, htmlcount;
            //setting our max character limit
            tinymax = this.settings.charLimit;
            //grabbing the length of the curent editors content
            tinylen = this.getContent().length;
            if (tinylen > tinymax) {
                alert('to big');
            }
        });
    }
    }); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-14T21:19:28.897

如果您在这里，也许您正在寻找简单的解决方案。这是我的解决方案。它并不完美，但非常简单

```
var max_length = 3;
    tinymce.init({
        selector: '#description',
        // some my settings for tiny mce
        toolbar: ' undo redo | bold italic | formatselect',
        setup : function(ed) {
           // important part
           ed.on("keypress", function(event){
                // get content of the tinymce and remove tags
                // tinymce will be adding tags while you type in it.
                // when tags are removed, you will heave real input length (the one that customer sees)
                var content =  tinymce.activeEditor.getContent().replace(/(<([^>]+)>)/ig,"");
                // now just compare that length to your prefered length.
                // if it is larger or same, return false, and that will disregard last input.
                if(content.length >= max_length){
                    return false;
                }
            });
        }

    }); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-01-12T14:26:07.057

最简单的方法：

```
contentContentLenght = tinyMCE.activeEditor.getContent({format : 'text'}).length; //takes lenght of current editor

if (contentContentLenght > 1499) {
                    e.preventDefault();
                    e.stopPropagation();
                    return false;
                } // 1500 is my limit in mine project. 
```

防止粘贴：

```
editor.on('paste', function(e){
            contentContentLenght = tinyMCE.activeEditor.getContent({format : 'text'}).length;
            var data = e.clipboardData.getData('Text');
            if (data.length > (1500 - contentContentLenght)) {
                return false;
            } else {
                return true;
            }
        }); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-01-18T11:59:31.930

## TinyMCE + AngularJS

这是使用[`ng-maxlength`](https://docs.angularjs.org/api/ng/directive/textarea)AngularJS 指令限制前端最大字符数的方法。

> **参数**：`ngMaxlength`
> **类型**：数字
> **详细信息**`maxlength`：如果值长于最大长度，则设置验证错误键。

请注意，该指令不仅计算显示的文本字符，还计算`<textarea>`HTML 中的所有文本，如标签和脚本。

首先，包括[AngularJS](https://angularjs.org/)、[TinyMCE](https://www.tinymce.com/) 4 分布式和[TinyMCE 的 AngularUI 包装器](https://github.com/angular-ui/ui-tinymce)。

HTML：

```
<form name="form" action="#">
    <textarea ng-model="myMCEContent" ui-tinymce ng-maxlength="200" name="body"></textarea>
    <span ng-show="form.body.$error.maxlength" class="error">Reached limit!/span>
</form> 
```

JavaScript：

```
angular.module('myApp', ['ui.tinymce'])
.config(['$sceProvider', function($sceProvider) {
    // Disable Strict Contextual Escaping
    $sceProvider.enabled(false);
}])
.constant('uiTinymceConfig', {/*...*/})
.controller('myCtrl', ['$scope', function($scope) {
    // ...
}]); 
```

`[jsFiddle](https://jsfiddle.net/naXa/zsnLupvd/)`

## ！注意力 ！

在使用此解决方案之前阅读手册以充分了解在 AngularJS 中禁用 SCE 的后果：[$sce service](https://docs.angularjs.org/api/ng/service/$sce)。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2013-01-23T16:38:18.833

Thariama 的答案很棒，刚刚实现了它，这正是我想要的，只是做了一些修改：

```
 max_chars : "10",
    setup : function(ed) {
        ed.onKeyDown.add(function(ed, evt) {
            if ( $(ed.getBody()).text().length+1 > ed.getParam('max_chars')){
                evt.preventDefault();
                evt.stopPropagation();
                return false;
            }
        });
    } 
```

谢谢塔里亚马。

# c# - 使用 C# 搜索文件

> ID：11342925
> 
> 赞同：0
> 
> 时间：2012-07-05T10:57:23.333
> 
> 标签：c#, c#-4.0

我有一个文件并搜索多个值，即我需要搜索 {Name,Class} 并将其存储在文件中的列表或字典中。我需要使用 c#。

前任。姓名：“ABC” 班级：“5th” 由于表现不佳，他考试不及格。姓名 : "CYS" Class :9th 由于表现出色，他通过了考试。第 10 级 无需评论。

```
 string Filename = @"ClassInfo.fo";
         XmlTextReader reader = new XmlTextReader(Filename);
        List<string> xmlValue = new List<string>();
        while (reader.Read())
        {
            switch (reader.NodeType)
            {
                case XmlNodeType.Text: //Display the text in each element.
                    Console.WriteLine(reader.Value);
                    xmlValue.Add(reader.Value);
                    break;
            }
        }
         string searchString = "Name :"

         var foundIndices = new List<int>(xmlValue.Count);
         int countValue=0;

         Collection<PdfContent> pdfContent = new Collection<PdfContent>();
        for (int i = 0; i < xmlValue.Count; i++)
        {
            if (xmlValue[i] == searchString)
            {
                foundIndices.Add(i);

                pdfContent.Add(new PdfContent
                {
                    Name= xmlValue[indexOfName],
                    Class=xmlValue[indexOfClass]

                });

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:59:37.547

请在读取文件的字符串变量中的所有文本后使用正则表达式匹配模式

正则表达式示例：[http ://www.regular-expressions.info/examples.html](http://www.regular-expressions.info/examples.html)

# java - JAVA：关于 System.out

> ID：11342928
> 
> 赞同：2
> 
> 时间：2012-07-05T10:57:46.330
> 
> 标签：java

JAVA：两个引用“p”&&“pp”之间有区别吗？

```
 PrintStream p = new PrintStream(System.out);
    p.println("lol");

    PrintStream pp = System.out;
    pp.println("lol"); 
```

我只想缩短 System.out.println(); 一些原型的声明。干杯！马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:00:32.337

没有功能上的区别，尽管第一个创建了一个您不需要的新对象，因此效率略低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T11:02:35.707

不，两者之间没有行为差异。

`System.out`已经是 a `PrintStream`，并且 a`new PrintStream(otherPrintStream)`只是创建了一个包装器对象，它只委托给给定的`PrintStream`.

* * *

正如@MarkoTopolnik 建议的那样，您甚至可以这样做

```
import static java.lang.System.out; 
```

然后做

```
out.println("lol"); 
```

如果你想保持简短。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:04:35.113

没有不同。

这两种说法的效果是一样的。略有不同的是，我们在第一个语句中创建了 PrintStream 类的新对象，这是不必要的。

# r - 在 r 中查找潜在的重复（拼写错误）

> ID：11342931
> 
> 赞同：1
> 
> 时间：2012-07-05T10:58:00.803
> 
> 标签：r, duplicate-data

> **可能重复：**
> [R：如何测量字符串之间的相似性？](https://stackoverflow.com/questions/6044112/r-how-to-measure-similarity-between-strings)

我一直在研究一个大型数据集。我需要找到潜在的重复 - 类似的名称，例如：

```
NewYork, new york, New York, Naw York, Niy Work 
```

因此，我认为以下规则可以帮助捕捉这种潜在的重复：

如果任何三个连续字符匹配： 问题：然后它将检测以下作为潜在的重复，实际上它们不是。命运迟到率 如果变得更保守，我可能需要 4 个连续的字符，那么我可能会遇到短词的问题。

有没有什么聪明的方法可以找到重复的错字类型？

考虑以下小例子：

```
myfruits <- c("Apple", "Apricot", "Avocado", "Banana", "Bilberry", 
"Blackberry", "Blackcurrant",    "Blueberry", "Currant", 
"Cherry", "Cherimoya", "Clementine", "Aple", "Binana", "BlaCkbarry",
"pricot") 
```

拼写错误，但实际上是上述列表中的重复项：

```
 "Apple" & "Aple",
"Banana" &  "Binana", 
"Blackberry" & "BlaCkbarry", 
"Apricot" &  "pricot" 
```

# svg - 大量放大后得到扭曲的 svg 圆圈

> ID：11342936
> 
> 赞同：1
> 
> 时间：2012-07-05T10:58:19.610
> 
> 标签：svg, raphael, viewbox

我正在使用 raphael 创建 svg 圆圈。我还按照[http://jsfiddle.net/9zu4U/10/](http://jsfiddle.net/9zu4U/10/)中的建议使用 setViewBox 进行缩放和平移。实际上，我的问题就像我在屏幕上创建了一个圆圈，然后单击该圆圈在大圆圈内创建了 20 个较小的圆圈。所以我放大并单击任何较小的圆圈。它在该圆圈内创建了 20 个圆圈。我放大等等。但是在 6-7 级之后，它给了我扭曲的圆圈和六边形。这可能是什么原因？它不会发生在 Mozilla 中。

我最初尝试创建一个非常大的纸张和一个非常大的圆圈并将其缩小显示以适合屏幕。只是为了确保最小圆的半径不进入十进制值。

编辑：例如[jsfiddle.net/LbcPd/3](http://jsfiddle.net/LbcPd/3)。

# schema - 网络标准：模式或数据词汇

> ID：11342937
> 
> 赞同：0
> 
> 时间：2012-07-05T10:58:19.903
> 
> 标签：schema, web-standards

我正准备更新电子商务商店的模型/标签。我有点困惑在产品元素、面包屑和网站的其余部分实施哪些标准。有谁知道我应该遵循哪些标准以及为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:44:28.557

产品有很多词汇表，例如：

*   *GoodRelations*词汇： [http ://wiki.goodrelations-vocabulary.org/Quickstart](http://wiki.goodrelations-vocabulary.org/Quickstart)
*   *schema.org 产品*词汇：http: [//schema.org/Product](http://schema.org/Product)

您应该能够在**微数据**和/或**RDFa**中使用这两个词汇表：请参阅[http://wiki.goodrelations-vocabulary.org/Microdata](http://wiki.goodrelations-vocabulary.org/Microdata)和[http://schema.org/docs/datamodel.html](http://schema.org/docs/datamodel.html)

# javascript - 在屏幕上显示 javascript 验证消息而不是警报消息？

> ID：11342938
> 
> 赞同：0
> 
> 时间：2012-07-05T10:58:20.870
> 
> 标签：javascript, struts, struts-1

我正在使用struts1.3.8。我正在使用 struts ValidatorPlugIn 来生成客户端和服务器端验证消息。
现在客户端 javascript 由验证器插件生成。如果有任何验证错误，它会显示在警报消息中。但我想在文本字段之外显示它们。
我现在仍然只处理警报消息。但现在要求改变了。我试过了，但没用……
怎么办？
这是插件生成的代码

```
   `在此处输入代码` function jcv_handleErrors(messages, focusField) {
          if (focusField && focusField != null) {
              var doFocus = true;
              if (focusField.disabled || focusField.type == 'hidden') {
                  焦点=假；
              }
              如果 (doFocus &&
                  focusField.style &&
                  focusField.style.visibility &&
                  focusField.style.visibility == '隐藏') {
                  焦点=假；
              }
              如果（焦点）{
                  focusField.focus();
              }
          }
          alert(messages.join('\n'));
      }
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:11:59.813

如果没有具体信息，我真正能建议的只是以下内容的变体：

```
window.alert = function(message){
    console.log(message);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pYXvq/1/)。

这只是确保传递给传递的任何消息`alert()`都会传递给`console.log()`.

相反，您可以将消息定位到特定元素：

```
window.alert = function(message) {
    var output = document.getElementById('output'),
        newTextContainer = document.createElement('p'),
        text = document.createTextNode(message);
    newTextContainer.appendChild(text);
    output.appendChild(newTextContainer);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pYXvq/)。

但是，使用其中任何一个都会破坏`alert()`页面中函数的任何使用。所以我建议，相反，用后一个例子（就在上面）创建一个新函数并调用该函数，而不是 over-writing `alert()`。

关于创建自定义函数来处理警报，以及指定应附加新“警报”的特定元素：

```
function newAlert(message, elem) {
    // message is a string containing the message to display.
    // elem is the id of the element into which the message should be displayed,
    // defaults to an id of 'output' if no element is specified.
    var output = elem ? document.getElementById(elem) : document.getElementById('output'),
        newTextContainer = document.createElement('p'),
        text = document.createTextNode(message);
    newTextContainer.appendChild(text);
    output.appendChild(newTextContainer);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pYXvq/3/)。

* * *

**针对 OP 的问题进行了编辑**，如下：

> 接下来再次提交表单我要覆盖之前的错误信息。不是两次显示相同的消息。

有几种方法可以做到这一点，假设您只想显示最后一条错误消息，而不是附加这些错误消息；在第一个示例中，我使用`while`循环来删除元素的`firstChild`，`output`并在为空时附加新的错误消息：

```
function newAlert(message, elem) {
    var output = elem ? document.getElementById(elem) : document.getElementById('output'),
        newTextContainer = document.createElement('p'),
        text = document.createTextNode(message);
    while (output.firstChild){
        output.removeChild(output.firstChild);
    }
    newTextContainer.appendChild(text);
    output.appendChild(newTextContainer);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pYXvq/4/)。

另一种方法是获取对元素中第一个段落元素的引用`output`（如果存在，则创建一个），然后简单地覆盖该元素中的文本：

```
function newAlert(message, elem) {
    var output = elem ? document.getElementById(elem) : document.getElementById('output'),
        textContainer = output.getElementsByTagName('p')[0] || output.appendChild(document.createElement('p'));

    if (textContainer.firstChild){
        textContainer
            .firstChild
            .nodeValue == message;
    }
    else {
        textContainer
            .appendChild(document
                         .createTextNode(message));
    }
} 
```

# java - Intellij + maven jetty 插件 vs eclipse + jetty 热部署？

> ID：11342941
> 
> 赞同：1
> 
> 时间：2012-07-05T10:58:37.970
> 
> 标签：java, intellij-idea, maven-3, maven-jetty-plugin

我有来自同一个工作区的 eclipse 和 intellij，因为它们都回复 pom.xml 文件。我注意到一些不同的东西。在 Eclipse 中，当我在 Run Configurations 下设置 Jetty Webapp 并运行 jetty 时，它会查看 /classes 文件夹是否有任何更改，如果某些项目是打开的（我有大约 15 个项目，其中一些关闭了其中一些打开）。如果某些项目未打开，它将查看 .m2 文件夹中的 jar 文件，这很好。因此，当我更改某些内容时，我可以编译文件并查看更改而无需重新启动服务器。

但是，在 Intellij CE 中，当我从 maven 运行 jetty:run 时，它只会查看 .m2 文件夹中的 jar 文件，因此我`mvn clean install`每次都必须更新 .m2 文件夹并重新启动服务器。我怎样才能在 IntelliJ 中实现同样的目标？那么，当我更改 Java 类中的某些内容时，我不必重新启动服务器？

# jquery - 如何检查jquery中是否存在变量

> ID：11342943
> 
> 赞同：0
> 
> 时间：2012-07-05T10:58:55.363
> 
> 标签：jquery

我在 jquery 代码中有两个变量，如果 item.a 不存在，它会输出一个“null”，所以我想检查变量是否存在。这是代码：

```
.append( "<a>" + item.a + ", " + item.b + "</a>" ) 
```

如果没有“item.a”，则会导致

```
null, Blabla 
```

我试过这个 if / else 语句，但它什么也没返回

```
.append( "<a>" + (item.a) ? item.a : + ", " + item.b + "</a>" ) 
```

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:00:26.397

你的尝试很接近。试试这个：

```
.append( "<a>" + (item.a ? item.a : "") + ", " + item.b + "</a>" ) 
```

或者，假设您在没有 时不想要逗号`item.a`：

```
.append( "<a>" + (item.a ? item.a + ", " : "") + item.b + "</a>" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:00:08.343

您使用的条件运算符

**编辑**

```
.append( "<a>" + (item.a != null ? item.a + ", " : "") + item.b + "</a>" ) 
```

如果变量为空

```
if(varName === null)
{
    alert("variable has null");
} 
```

如果变量不存在

```
if(typeof varName === 'undefined')
{
    alert("variable not defined");
} 
```

# antlr - 与程序 ANTLR 一起构建 C 运行时

> ID：11342944
> 
> 赞同：2
> 
> 时间：2012-07-05T10:59:04.890
> 
> 标签：antlr, antlr3

我想使用 antlr（目标 C 语言）编写一个程序，并且我想将库（C 运行时分发）发送到包中，以便它可以在其他机器上使用，而无需在该机器上安装 antlr。[我已经在这个链接http://www.antlr.org/download/C](http://www.antlr.org/download/C)上下载了这个运行时的最新版本。谁能告诉我我是否可以这样做？干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:14:13.323

是的，您可以静态链接它，但如何做到这一点取决于您的平台。对于带有 gcc 或 llvm 的 Linux，您可以执行以下操作：

```
g++ main.c -Wl,-Bstatic -lantlr3c -Wl,-Bdynamic -l<other dynamic libraries> 
```

-Bstatic 之后的任何内容都将包含在可执行文件中。

根据您的管辖范围，C 目标许可证要求您以某种方式在程序中包含许可证文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:27:53.210

我没有使用 C 目标，但使用了 C# 目标。我认为它们以类似的方式工作。

您需要将 C 运行时库与您的程序一起部署，因为生成的解析器和词法分析器将使用该库中的函数。

您不需要安装 Antlr 本身，例如 AntlrWorks 或任何 .jar 文件

# android - 以最少的设置安装 Android SDK。

> ID：11342945
> 
> 赞同：0
> 
> 时间：2012-07-05T10:59:06.643
> 
> 标签：android

我是 android 生态系统的新手。

我真的需要安装从 Android 1.5 到 Android 4.1 的所有 SDK 吗？创建一个支持几乎所有安卓版本的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:00:11.357

不，一个应该没问题。选择最新的。所以4.1吧！

只需将您的应用最小 sdk 版本设置为所需的 api 级别。

如果您使用不适用于该最低版本的东西，Eclipse 应该会警告您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:00:47.530

> 我真的需要安装从 Android 1.5 到 Android 4.1 的所有 SDK 吗？创建一个支持几乎所有安卓版本的应用程序

您需要在您打算支持的任何版本上测试您的应用程序。对于那些你有物理设备的 Android 版本，你可以在上面测试你的应用程序（很可能）。对于其他任何事情，您至少需要下载模拟器图像，这样您就可以为那些较旧的 Android 版本创建模拟器。

# web-services - Java、Netbeans、Tomcat 中基于 SOAP 的 Web 服务的安全性

> ID：11342947
> 
> 赞同：1
> 
> 时间：2012-07-05T10:59:12.073
> 
> 标签：web-services, soap

我创建了一个 android 应用程序，它通过 Intranet 调用（使用 kSOAP 库）基于 SOAP 的 Web 服务（用 java、netbeans 开发）。

现在我想让应用程序上线，所以这需要我的网络服务在互联网上公开。

我有以下问题...

1.  我如何确保除了我的 android 应用程序之外没有人知道 Web 服务链接
2.  除了我的 android 应用程序之外，没有人能够调用 Web 服务
3.  安卓应用程序和网络服务之间传输的数据是安全和加密的
4.  应该使用什么样的认证机制

我是 Web 服务安全的新手，如果我的问题很愚蠢，请原谅我 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:07:18.043

1.  这是不可能的。任何拥有您的应用程序的人都可能使用像[wireshark](http://www.wireshark.org/)这样的流量分析器并查看它发出的所有请求。
2.  签署您应用程序发出的每个请求（添加一些肥皂头）并检查服务器端的签名
3.  使用 HTTPS
4.  [如何使用 SOAP 进行身份验证？](https://stackoverflow.com/questions/2737685/how-to-do-authentication-using-soap)

# django - 将数据从一个 django 应用程序传输到另一个应用程序的有效方法

> ID：11342951
> 
> 赞同：0
> 
> 时间：2012-07-05T10:59:21.230
> 
> 标签：django, performance, client-server, xml-rpc

目前，我正在开发一个项目，在该项目中，两个运行在不同主机上的 django 应用程序之间存在服务器-客户端关系。

服务器必须存储和提供大量的关系数据，例如：供应商、公司、产品等。

客户端根据请求从服务器下载数据并将其添加到他们的数据库中。客户也可以从他们的站点上传到数据库以扩展它。

之前开发此工具的人使用 XMLRPC 将庞大的（通常为 13MB）XML 文件从服务器传输到客户端。现在我们真正发送的只是要存储在数据库中的与数据库无关的对象，所以我想知道是否有更有效的方法来做到这一点？

如果您需要，请询问更多详细信息，我不确定您需要知道什么

编辑：在网络和服务器端处理方面高效。客户可以完成繁重的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:56:47.690

共享数据库设计似乎更合适。但当然可能有安全、政治或组织方面的原因排除了这种可能性。此外，还需要进行大量的重新设计。

要减少网络带宽，首先检查是否启用了 HTTP gzip 压缩。

如果它只是一个愚蠢的数据传输，JSON 通常会比 XMLRPC 紧凑得多。数据看起来是否适合直接转换为 JSON？这仍然需要一些服务器端处理。

对于最少的服务器端处理（如果数据库表相对相似），仅向客户端发送相关数据库查询的转储可能非常有效。当然，除非表具有相同的架构，否则您将不得不对原始 SQL 进行一些客户端处理，这并不理想。

# android - 按类别公开搜索 Twitter 用户

> ID：11342953
> 
> 赞同：0
> 
> 时间：2012-07-05T10:59:33.007
> 
> 标签：android, twitter

在我的应用程序中，用户可以尝试搜索 twitter 用户类别（例如电影明星、运动员、科学家等），**他们可以在不登录的情况下尝试此**操作。

我需要 xml 中的结果，以便我的应用程序可以解析它。现在的问题是我需要正确的 URL 来在我的应用程序中执行搜索，如下所示：

```
HttpGet httpGet = new HttpGet(URL); ... and so on. 
```

**我需要正确的 URL。**

我有以下 URL，但它们要么需要身份验证，要么无法正常工作。我搜索了 Twitter 开发者网站和 stackoverflow，但没有找到相关主题。网址如下：

1.  [http://api.twitter.com/1/users/search.xml?q=sports+persons](http://api.twitter.com/1/users/search.xml?q=sports+persons)
    [**错误：** 07-05 16:25:43.276：W/DefaultRequestDirector(985)：身份验证错误：无法响应任何这些挑战中： {oauth=WWW-Authenticate: OAuth realm="http://api.twitter.com"} 07-05 16:25:43.286: E/TweetHandler(985): 无法对您进行身份验证。07-05 16:25:43.297: E/TweetHandler(985): /1/users/search.xml?q=sports+persons 07-05 16:25:43.297: E/TweetHandler(985): ]

2.  [http://twitter.com/#!/search/users/sports+persons](http://twitter.com/#!/search/users/sports+persons) [不工作]

请帮我找到正确的网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:30:16.380

答案在您收到的错误消息中 - 您需要在搜索之前进行身份验证。

阅读[用户/搜索文档](https://dev.twitter.com/docs/api/1/get/users/search)。

您的搜索 URL 是正确的，但您需要先签署请求。

# android - 谷歌需要多少时间来验证应用程序......？

> ID：11342954
> 
> 赞同：1
> 
> 时间：2012-07-05T10:59:33.897
> 
> 标签：android

我昨天下午 6 点上传了一个应用程序，但直到现在我在 Google Play 上找不到应用程序.. 任何人都可以在 think link 上找到除私人收件箱以外的应用程序.. 请帮助..

[https://play.google.com/store/apps/developer?id=AMTEC+Pvt.Ltd](https://play.google.com/store/apps/developer?id=AMTEC+Pvt.Ltd) 有谁知道上传一个应用程序需要多少时间..？变得可见的时间是否与应用程序的内容有关..？？我已经上传了一个大约需要几个小时的应用程序，但现在几乎是 24 小时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:11:08.823

在 Play Store 上成功发布您的应用程序后，没有验证过程。

需要考虑的几点：

*   出现在搜索结果中需要一些时间。
*   如果您在 Android 设备上使用 Google Play 商店应用程序，请记住，该应用程序可能会由于各种条件而被过滤掉，并且即使已发布，也不会在应用程序的搜索结果中显示。它可以根据国家/地区、屏幕尺寸/分辨率、最低 SDK 版本、手机功能等进行过滤。

查看此[链接](http://developer.android.com/guide/google/play/filters.html)，了解`Filters on Google Play`其中的某些选择如何`AndroidManifest.xml`影响您的应用程序通过不同 Android 设备上的 Play 商店应用程序出现在搜索中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:06:24.747

很多时候，这种情况会发生。该应用程序可能会上传到 Play 商店，但可能不会立即显示在搜索结果中。[您可以通过转到此链接https://play.google.com/store/apps/details?id=yourpackagename](https://play.google.com/store/apps/details?id=yourpackagename) 将“yourpackagename”替换为包名称来检查应用程序是否已上传。如果显示应用程序，则您的上传成功。

# mysql - 存储过程，在 LIMIT 表达式中使用变量

> ID：11342961
> 
> 赞同：7
> 
> 时间：2012-07-05T11:00:13.320
> 
> 标签：mysql, variables, stored-procedures, limit

我有一个存储过程，如果我在没有变量的情况下编写以下查询，all: 运行良好

```
 CREATE PROCEDURE `some_proc` ()
 BEGIN
 SELECT blabla FROM  mytable ORDER BY id LIMIT 3,1
 ..... 
```

但是，如果我在 LIMIT 表达式中使用变量作为起始编号，则会出现错误：

```
 CREATE PROCEDURE `some_proc` ()
 BEGIN
 DECLARE start INT;
 SET start = 3;
 SELECT blabla FROM  mytable ORDER BY id LIMIT start,1
 ..... 
```

有没有办法在存储过程中的 LIMIT 表达式中使用变量？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T11:26:00.307

您不能直接使用变量。我见过的一个很好的解决方法是 -

```
CREATE PROCEDURE `some_proc` (
IN _START INTEGER, 
IN _LIMIT INTEGER 
)
BEGIN 
PREPARE STMT FROM 
" SELECT * FROM products LIMIT ?,? "; 
SET @START = _START; 
SET @LIMIT = _LIMIT; 
EXECUTE STMT USING @START, @LIMIT;
DEALLOCATE PREPARE STMT;
END $$ 
```

另一个搜索返回了这个 - [http://bugs.mysql.com/bug.php?id=8094](http://bugs.mysql.com/bug.php?id=8094)。

[您还可以在手册](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)中阅读有关准备好的语句的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T12:52:08.460

您可以在 MySQL 5.5- [SELECT 语句](http://dev.mysql.com/doc/refman/5.5/en/select.html)中执行此操作。

从文档中：

> 在存储程序中，LIMIT 参数可以使用整数值例程参数或 MySQL 5.5.6 的局部变量来指定。

# model - MongooseJS 无法更新数值

> ID：11342962
> 
> 赞同：0
> 
> 时间：2012-07-05T11:00:17.207
> 
> 标签：model, mongoose, updates

使用它时，`user.meta.logins.$inc();`我在控制台中收到此错误：

> Mongoose MongooseNumber#$inc / MongooseNumber#increment 已弃用。改用 Model.update() 在 v3 中获取增量。

我一直在做的是这个（代码被简化为基本用法）：

```
userSchema.methods = {
  userFind : function (user, pass, callback) {
    this.model('user').findOne({ 'username':user, 'password':pass }, callback); 
  }
}

var userModel = new model();
userModel.userFind(username, password, function(err, user) {
  user.meta.logins.$inc();
  user.meta.last_action = new Date();                   
  user.save();
}); 
```

这工作得很好，但是由于即将弃用，我想使用建议的`Model.update()`方法来更新用户，但是我无法实现。

我试过这样做`userModel.update()`，`user.update()`但在这两种情况下我都会出错。也许我的语法对于更新是错误的。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T13:15:44.160

为此`update`：

```
userModel.update(
  { 'username': user, 'password': pass },
  { $inc: { logins: 1 }, $set: { last_action: new Date() }},
  function(err, numAffected) {
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:58:39.000

所以这就是问题和解决方案：

当您定义 Schema.methods 时，您必须创建模型实例才能使用它们：

```
var myModel = new Model();
myModel.mySchemaMethod(); 
```

这会导致问题，因为模型自己的方法（例如 Model.update）不再可访问。

在这种情况下，方法应该定义为静态的，因此不需要实例并且一切正常：

```
myModel.mySchemaStatic(); 
```

# mysql - VB.net - 连接到数据库

> ID：11342963
> 
> 赞同：0
> 
> 时间：2012-07-05T11:00:19.373
> 
> 标签：mysql, database, vb.net, winforms

我在 phpmyadmin 中有 mysql 数据库，我尝试从我的应用程序连接到数据库。

我的连接字符串是：

```
Server=12.919.18.12;Port=3306;Database=hbd;Uid=hb;Pwd=123; 
```

出现异常：

```
"Unable to connect to any of the specified MySQL hosts." 
```

我需要安装mysql还是什么？

（我刚导入 MySql.Data.dll 并尝试了它。有什么我忘记了吗？我检查了 ip ping 我的网站）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:16:04.497

**IP 无效 *12.919.18.12***

```
Server=12.919.18.12;Port=3306;Database=hbd;Uid=hb;Pwd=123; 
```

IP 块**< 256**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T04:04:20.000

这个问题已解决:)

尝试将端口放在最后，例如：“Server=12.919.18.12;Database=hbd;Uid=hb;Pwd=123;Port:3306;”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T03:14:36.657

连接字符串是正确的，但我阅读了很多论坛，他们都遇到了和你一样的问题。我的解决方案是，如果您尝试在 LAN 类型的网络上创建网络基础系统，您应该使用 XAMPP 或 WAMPP，但我更喜欢 xampp 并仔细检查您的帐户或用户是否有管理员或任何其他用户名用于您的连接，然后查看如果他们授予了所有权限并且当然有密码。以下是 ff 说明： 打开 Xammp 然后打开 Web 浏览器，然后打开 127.0.0.1 或 localhost。单击 phpmyadmin 然后在顶部单击权限。添加用户并确保允许所有权限并检查所有访问权限。然后使用正确的用户名和密码使用相同的连接字符串再次连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:05:11.090

如果数据库是本地数据库，请尝试使用 localhost 或 127.0.0.1 作为 IP 地址。

服务器在您的网络上吗？如果是，则 IP 无效。如果我是你，我会尝试与给你的人检查 IP。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T11:07:10.927

> [MySQL](http://www.connectionstrings.com/mysql) 的连接字符串在连接字符串方面非常有用。您的连接字符串似乎无效。

您可以检查 mysql 服务器是否正常工作，您可以像这样在连接字符串中添加 mysql 的端口号

> **“服务器=myServerAddress；端口=1234；数据库=myDataBase；Uid=myUsername；Pwd=myPassword；”**

* * *

*MySql 可能被配置为仅侦听本地主机的其他原因。*

请点击以下链接获取更多信息：
[启用 MySQL 远程访问 - MySQL 连接仅适用于本地计算机](http://www.razorsql.com/docs/support_mysql_local.html)
[无法连接到任何指定的 MySQL 主机。](http://www.codeproject.com/Questions/368297/Unable-to-connect-to-any-of-the-specified-MySQL-ho)

# php - 验证我的网站时显示错误

> ID：11342968
> 
> 赞同：-2
> 
> 时间：2012-07-05T11:00:30.827
> 
> 标签：php

没有属性“身高”

```
padding="0" cellspacing="0" border="0" align="center" width="969" height="180"> 
```

我在我的 xcart 版本 4.4.2 的 tpl 文件中遇到了这个问题。如何解决这个问题？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:01:59.537

这个具体？删除`height`属性。它在您使用的语言中不存在。

一般来说？使用 CSS 进行演示，而不是 HTML。

# codeigniter - 如何调用其他模块的方法？

> ID：11342970
> 
> 赞同：0
> 
> 时间：2012-07-05T11:00:37.313
> 
> 标签：codeigniter, module

我是 CodeIgniter 框架和 PHP 的新手。我正在尝试调用另一个模块控制器中的方法。为此，我正在使用：

```
modules::run('addons/demo'); 
```

但它不起作用。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:13:22.500

包括它，它会起作用，但使用它是一种不好的做法。而是创建一个库并在那里定义方法，它可以在您加载库的整个应用程序中访问。在应用程序/库中创建 my_library.php

```
<?php Class My_library{
       function common_method(){
            echo 'this is a common method';
       }
   } 
```

并在控制器方法中调用它

```
<?php Class test_controller extends CI_Controller{
       function __construct(){
          parent::__construct();
       }

       function index(){
            $this->load->library('my_library');
            $this->my_library->common_method();
       }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:49:37.223

首先只需要加载模块

```
$this->load->module("module_name"); 
```

然后从加载的模块中调用控制器方法。

```
$this->module_name->method_name(); 
```

# android - android以编程方式在tableRows中创建textViews

> ID：11342975
> 
> 赞同：1
> 
> 时间：2012-07-05T11:00:52.970
> 
> 标签：android, android-layout, android-event

我有这三个具有相同数量元素的列表

```
List<String>competitoinsIDs = new LinkedList<String>();
List<String>marks = new LinkedList<String>();
List<String>numOfQuestions = new LinkedList<String>(); 
```

我想将每个列表的第一个元素放在一个 tablerow 中，然后将每个列表的第二个元素放在另一个 tablerow 中，请你帮帮我，这是 xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tlMarksTable"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dip"
            android:weightSum="2" >

            <TextView
                android:id="@+id/tvMarksCompetitionID"
                android:layout_weight="1"
                android:text="Competition"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksMarks"
                android:layout_weight="1"
                android:text="Marks"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/tvMarksQuestionsNum"
                android:layout_weight="1"
                android:text="Questions"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </TableRow>
    </TableLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T11:43:45.943

首先将您的 XML 文件更改为：

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tlMarksTable"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    </TableLayout>
    </FrameLayout> 
```

我们将动态添加所有内容。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    List<String>competitoinsIDs = new LinkedList<String>();
    List<String>marks = new LinkedList<String>();
    List<String>numOfQuestions = new LinkedList<String>();

 //make sure that the lists contain data or else display will be blank screen

    TableRow.LayoutParams  params1=new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,1.0f);
    TableRow.LayoutParams params2=new TableRow.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
    TableLayout tbl=(TableLayout) findViewById(R.id.tlMarksTable);
    for(int ctr=0;ctr<marks.size();ctr++)
    {
    //Creating new tablerows and textviews
    TableRow row=new TableRow(this);
    TextView txt1=new TextView(this);
    TextView txt2=new TextView(this);
    TextView txt3=new TextView(this);
    //setting the text
    txt1.setText(competitoinsIDs.get(ctr));
    txt2.setText(marks.get(ctr));
    txt3.setText(numOfQuestions.get(ctr));
    txt1.setLayoutParams(params1);
    txt2.setLayoutParams(params1);
    txt3.setLayoutParams(params1);
    //the textviews have to be added to the row created
    row.addView(txt1);
    row.addView(txt2);
    row.addView(txt3);
    row.setLayoutParams(params2);
    tbl.addView(row);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T11:42:27.967

请在此处查看 android 代码并在您的活动`onCreate`方法中使用它

```
setContentView(R.layout.table_layout_xml); // use your layout xml file here

TableLayout tableLayout = (TableLayout)findViewById(R.id.tlMarksTable);

List<String>competitoinsIDs = new LinkedList<String>();
List<String>marks = new LinkedList<String>();
List<String>numOfQuestions = new LinkedList<String>();

// adding static values to test the layout. use your dynamic data here
competitoinsIDs.add("123");
competitoinsIDs.add("124");
competitoinsIDs.add("125");

marks.add("56");
marks.add("57");
marks.add("58");

numOfQuestions.add("10");
numOfQuestions.add("11");
numOfQuestions.add("12");

TableRow tableRows[] = new TableRow[competitoinsIDs.size()];
for (int i = 0; i < tableRows.length; i++) {

    tableRows[i] = new TableRow(this);
    tableRows[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    tableRows[i].setWeightSum(2.0f);
    tableRows[i].setPadding(5, 5, 5, 5);

    TextView text = new TextView(this);
    text.setLayoutParams(new android.widget.TableRow.LayoutParams(android.widget.TableRow.LayoutParams.WRAP_CONTENT,
            android.widget.TableRow.LayoutParams.WRAP_CONTENT, 1.0f));
    text.setText(competitoinsIDs.get(i));
    tableRows[i].addView(text);

    text = new TextView(this);
    text.setLayoutParams(new android.widget.TableRow.LayoutParams(android.widget.TableRow.LayoutParams.WRAP_CONTENT,
            android.widget.TableRow.LayoutParams.WRAP_CONTENT, 1.0f));
    text.setText(marks.get(i));
    tableRows[i].addView(text);

    text = new TextView(this);
    text.setLayoutParams(new android.widget.TableRow.LayoutParams(android.widget.TableRow.LayoutParams.WRAP_CONTENT,
            android.widget.TableRow.LayoutParams.WRAP_CONTENT, 1.0f));
    text.setText(numOfQuestions.get(i));
    tableRows[i].addView(text);

    tableLayout.addView(tableRows[i]);

} 
```

# java - 如何在java中阅读doc和docx

> ID：11342978
> 
> 赞同：2
> 
> 时间：2012-07-05T11:01:07.253
> 
> 标签：java, android, apache-poi

首先，您应该知道我已经研究了很多问题，但没有一个对我有帮助。我希望能够阅读 doc 和 docx 文档（当我说阅读时，我的意思是最简单的事情，只阅读文本）。我看到了一些关于 poi 和暂存器的帖子，但我无法让它正常工作，而且大多数时候 eclipse 甚至无法构建我的项目......

有人可以给我一个 doc 和 docx 的代码示例，并给我我需要使用的所有 jar 的名称（或链接）吗？

谢谢！

基本上这是代码：

```
try {
    if (getFileExtention(path).equals("docx")) {
        FileInputStream fis = new FileInputStream(path);
        XWPFWordExtractor oleTextExtractor =
            new XWPFWordExtractor(new XWPFDocument(fis));
        return oleTextExtractor.getText();
    } else if (getFileExtention(path).equals("doc")) {
        FileInputStream fis = new FileInputStream(path);
        WordExtractor we = new WordExtractor(fis);
        return we.getText();
    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}

return ""; 
```

我有以下罐子：

dom4j-1.6.1.jar

poi-3.8-20120326.jar

poi-ooxml-3.8-20120326.jar

poi-scratchpad-3.8-20120326.jar

xmlbeans-xmlpublic-2.4.0.jar

我有以下问题：

这个在构建过程中发生了很多次

```
> [2012-07-05 14:12:53 - iCards] Dx warning: Ignoring InnerClasses
> attribute for an anonymous inner class
> (org.dom4j.xpath.DefaultXPath$1) that doesn't come with an associated
> EnclosingMethod attribute. This class was probably produced by a
> compiler that did not target the modern .class file format. The
> recommended solution is to recompile the class from source, using an
> up-to-date compiler and without specifying any "-target" type options.
> The consequence of ignoring this warning is that reflective operations
> on this class will incorrectly indicate that it is *not* an inner
> class. 
```

另一个：（尝试阅读docx时）

```
> 07-05 14:17:13.245: W/System.err(4339): java.io.IOException: read
> failed: EBADF (Bad file number) 07-05 14:17:13.255:
> W/System.err(4339):   at libcore.io.IoBridge.read(IoBridge.java:432)
> 07-05 14:17:13.260: W/System.err(4339):   at
> java.io.FileInputStream.read(FileInputStream.java:179) 07-05
> 14:17:13.265: W/System.err(4339):     at
> java.io.PushbackInputStream.read(PushbackInputStream.java:196) 07-05
> 14:17:13.270: W/System.err(4339):     at
> libcore.io.Streams.readFully(Streams.java:81) 07-05 14:17:13.275:
> W/System.err(4339):   at
> java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:230)
> 07-05 14:17:13.280: W/System.err(4339):   at
> org.apache.poi.openxml4j.util.ZipInputStreamZipEntrySource.<init>(ZipInputStreamZipEntrySource.java:51)
> 07-05 14:17:13.285: W/System.err(4339):   at
> org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:83)
> 07-05 14:17:13.290: W/System.err(4339):   at
> org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:228)
> 07-05 14:17:13.295: W/System.err(4339):   at
> org.apache.poi.util.PackageHelper.open(PackageHelper.java:39) 07-05
> 14:17:13.300: W/System.err(4339):     at
> org.apache.poi.xwpf.usermodel.XWPFDocument.<init>(XWPFDocument.java:120)
> 07-05 14:17:13.305: W/System.err(4339):   at
> com.ronEven.iCards.AddRemove.loadFile(AddRemove.java:504) 07-05
> 14:17:13.310: W/System.err(4339):     at
> com.ronEven.iCards.AddRemove.showDoc(AddRemove.java:495) 07-05
> 14:17:13.315: W/System.err(4339):     at
> com.ronEven.iCards.AddRemove.setFilePath(AddRemove.java:492) 07-05
> 14:17:13.320: W/System.err(4339):     at
> com.ronEven.iCards.FileDialog$1.onClick(FileDialog.java:177) 07-05
> 14:17:13.325: W/System.err(4339):     at
> android.view.View.performClick(View.java:3591) 07-05 14:17:13.330:
> W/System.err(4339):   at
> android.view.View$PerformClick.run(View.java:14263) 07-05
> 14:17:13.335: W/System.err(4339):     at
> android.os.Handler.handleCallback(Handler.java:605) 07-05
> 14:17:13.340: W/System.err(4339):     at
> android.os.Handler.dispatchMessage(Handler.java:92) 07-05
> 14:17:13.345: W/System.err(4339):     at
> android.os.Looper.loop(Looper.java:137) 07-05 14:17:13.345:
> W/System.err(4339):   at
> android.app.ActivityThread.main(ActivityThread.java:4507) 07-05
> 14:17:13.345: W/System.err(4339):     at
> java.lang.reflect.Method.invokeNative(Native Method) 07-05
> 14:17:13.350: W/System.err(4339):     at
> java.lang.reflect.Method.invoke(Method.java:511) 07-05 14:17:13.350:
> W/System.err(4339):   at
> com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
> 07-05 14:17:13.350: W/System.err(4339):   at
> com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557) 07-05
> 14:17:13.350: W/System.err(4339):     at
> dalvik.system.NativeStart.main(Native Method) 07-05 14:17:13.355:
> W/System.err(4339): Caused by: libcore.io.ErrnoException: read failed:
> EBADF (Bad file number) 07-05 14:17:13.360: W/System.err(4339):   at
> libcore.io.Posix.readBytes(Native Method) 07-05 14:17:13.360:
> W/System.err(4339):   at libcore.io.Posix.read(Posix.java:118) 07-05
> 14:17:13.360: W/System.err(4339):     at
> libcore.io.BlockGuardOs.read(BlockGuardOs.java:149) 07-05
> 14:17:13.360: W/System.err(4339):     at
> libcore.io.IoBridge.read(IoBridge.java:422) 07-05 14:17:13.365:
> W/System.err(4339):   ... 24 more 
```

尝试阅读文档时的最后一个

```
 07-05 14:17:37.015: W/System.err(4339): java.io.IOException: read failed: EBADF (Bad file number)
07-05 14:17:37.020: W/System.err(4339):     at libcore.io.IoBridge.read(IoBridge.java:432)
07-05 14:17:37.025: W/System.err(4339):     at java.io.FileInputStream.read(FileInputStream.java:179)
07-05 14:17:37.055: W/System.err(4339):     at java.io.PushbackInputStream.read(PushbackInputStream.java:196)
07-05 14:17:37.055: W/System.err(4339):     at java.io.InputStream.read(InputStream.java:163)
07-05 14:17:37.060: W/System.err(4339):     at org.apache.poi.hwpf.HWPFDocumentCore.verifyAndBuildPOIFS(HWPFDocumentCore.java:95)
07-05 14:17:37.065: W/System.err(4339):     at org.apache.poi.hwpf.extractor.WordExtractor.<init>(WordExtractor.java:53)
07-05 14:17:37.070: W/System.err(4339):     at com.ronEven.iCards.AddRemove.loadFile(AddRemove.java:509)
07-05 14:17:37.075: W/System.err(4339):     at com.ronEven.iCards.AddRemove.showDoc(AddRemove.java:495)
07-05 14:17:37.085: W/System.err(4339):     at com.ronEven.iCards.AddRemove.setFilePath(AddRemove.java:492)
07-05 14:17:37.090: W/System.err(4339):     at com.ronEven.iCards.FileDialog$1.onClick(FileDialog.java:177)
07-05 14:17:37.095: W/System.err(4339):     at android.view.View.performClick(View.java:3591)
07-05 14:17:37.100: W/System.err(4339):     at android.view.View$PerformClick.run(View.java:14263)
07-05 14:17:37.105: W/System.err(4339):     at android.os.Handler.handleCallback(Handler.java:605)
07-05 14:17:37.110: W/System.err(4339):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-05 14:17:37.115: W/System.err(4339):     at android.os.Looper.loop(Looper.java:137)
07-05 14:17:37.120: W/System.err(4339):     at android.app.ActivityThread.main(ActivityThread.java:4507)
07-05 14:17:37.120: W/System.err(4339):     at java.lang.reflect.Method.invokeNative(Native Method)
07-05 14:17:37.125: W/System.err(4339):     at java.lang.reflect.Method.invoke(Method.java:511)
07-05 14:17:37.125: W/System.err(4339):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-05 14:17:37.130: W/System.err(4339):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-05 14:17:37.130: W/System.err(4339):     at dalvik.system.NativeStart.main(Native Method)
07-05 14:17:37.130: W/System.err(4339): Caused by: libcore.io.ErrnoException: read failed: EBADF (Bad file number)
07-05 14:17:37.150: W/System.err(4339):     at libcore.io.Posix.readBytes(Native Method)
07-05 14:17:37.160: W/System.err(4339):     at libcore.io.Posix.read(Posix.java:118)
07-05 14:17:37.160: W/System.err(4339):     at libcore.io.BlockGuardOs.read(BlockGuardOs.java:149)
07-05 14:17:37.160: W/System.err(4339):     at libcore.io.IoBridge.read(IoBridge.java:422)
07-05 14:17:37.165: W/System.err(4339):     ... 20 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:14:03.147

[Tika](http://tika.apache.org/)支持 Microsoft Office 格式以及许多其他格式，它为您提供了所有格式的通用界面，并隐藏了维护和学习如何使用许多不同库的复杂性。就像调用这个[函数](http://tika.apache.org/1.1/api/org/apache/tika/Tika.html#parse%28java.io.InputStream,%20org.apache.tika.metadata.Metadata%29)一样简单。您也可以直接使用[Office Parser](http://tika.apache.org/1.1/api/org/apache/tika/parser/microsoft/OfficeParser.html)和[OOXMLParser](http://tika.apache.org/1.1/api/org/apache/tika/parser/microsoft/ooxml/OOXMLParser.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:53:40.700

您还有非常强大的应用程序，如[LibreOffice SDK](https://www.google.fr/search?q=libreoffice%20sdk&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3afr%3aofficial&client=firefox-a)（或 OpenOffice 3），您可以在其中阅读和管理文档（如 docx）并以`.txt`格式保存它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T18:07:28.963

*   为了阅读**DOCX**文档，我们可以使用**XWPFWordExtractor**和 **XWPFDocument**。
*   为了阅读**DOC**文档，我们可以使用**WordExtractor**和**HWPFDocument**。

你得到了 DOCX 文档的正确代码：

`XWPFWordExtractor oleTextExtractor = new XWPFWordExtractor(new XWPFDocument(fis));`

但是您的 DOC 文档代码中缺少 HWPFDocument。只需更改此行：

`WordExtractor we = new WordExtractor(fis);`

进入这个：

`WordExtractor we = new WordExtractor(new HWPFDocument(fis));`

至于 jar 文件，您的构建路径中似乎只缺少 poi-ooxml-schemas-3.8-20120326.jar。

# java - Grizzly 服务器的基本身份验证

> ID：11342981
> 
> 赞同：2
> 
> 时间：2012-07-05T11:01:32.883
> 
> 标签：java, basic-authentication, grizzly

我已经在我的应用程序中实现了这个示例：

[https-clientserver-grizzly](http://java.net/projects/jersey/sources/svn/show/trunk/jersey/samples/https-clientserver-grizzly?rev=5752)

这是来自该链接的*Server.java ：*

```
public class Server {

    private static HttpServer webServer;

    public static final URI BASE_URI = getBaseURI();
    public static final String CONTENT = "JERSEY HTTPS EXAMPLE\n";

    private static URI getBaseURI() {
        return UriBuilder.fromUri("https://localhost/").port(getPort(4463)).build();
    }

    private static int getPort(int defaultPort) {
        String port = System.getProperty("jersey.test.port");
        if (null != port) {
            try {
                return Integer.parseInt(port);
            } catch (NumberFormatException e) {
            }
        }
        return defaultPort;
    }

    protected static void startServer() {

        // add Jersey resource servlet
        WebappContext context = new WebappContext("context");
        ServletRegistration registration = 
                context.addServlet("ServletContainer", ServletContainer.class);
        registration.setInitParameter("com.sun.jersey.config.property.packages",
                "com.sun.jersey.samples.https_grizzly.resource;com.sun.jersey.samples.https_grizzly.auth");

        // add security filter (which handles http basic authentication)
        registration.setInitParameter(ResourceConfig.PROPERTY_CONTAINER_REQUEST_FILTERS,
                SecurityFilter.class.getName());

        // Grizzly ssl configuration
        SSLContextConfigurator sslContext = new SSLContextConfigurator();

        // set up security context
        sslContext.setKeyStoreFile("./keystore_server"); // contains server keypair
        sslContext.setKeyStorePass("asdfgh");
        sslContext.setTrustStoreFile("./truststore_server"); // contains client certificate
        sslContext.setTrustStorePass("asdfgh");

        try {

            webServer = GrizzlyServerFactory.createHttpServer(
                    getBaseURI(),
                    null,
                    true,
                    new SSLEngineConfigurator(sslContext).setClientMode(false).setNeedClientAuth(true)
            );

            // start Grizzly embedded server //
            System.out.println("Jersey app started. Try out " + BASE_URI + "\nHit CTRL + C to stop it...");
            context.deploy(webServer);
            webServer.start();

        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
    }

    protected static void stopServer() {
        webServer.stop();
    }

    public static void main(String[] args) throws InterruptedException, IOException {
        startServer();

        System.in.read();
    }
} 
```

但是我决定只启用基本身份验证（不需要 Ssl 身份验证）

我改变了那部分：

```
UriBuilder.fromUri("http://localhost/").port(getPort(4463)).build(); 
```

我评论了该行的部分：

```
SSLConfig sslConfig = new SSLConfig(); 
```

直到那一行：

```
System.out.println("Jersey app started. Try out " + BASE_URI + "\nHit CTRL + C to stop it..."); 
```

但是我得到了那个错误：

```
com.sun.grizzly.DefaultProtocolChain executeProtocolFilter
SEVERE: ProtocolChain exception
java.lang.NullPointerException
    at com.sun.grizzly.filter.SSLReadFilter.newSSLEngine(SSLReadFilter.java:331)
    at com.sun.grizzly.filter.SSLReadFilter.obtainSSLEngine(SSLReadFilter.java:378)
    at com.sun.grizzly.filter.SSLReadFilter.execute(SSLReadFilter.java:147)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:136)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:103)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:89)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:67)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

如何编写只需要在 grizzly 进行基本身份验证的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:03:13.147

这是关于灰熊的一个错误。欢迎任何有关克服该错误的想法。然而，一个棘手的解决方案在这里：

[http://grizzly.1045725.n5.nabble.com/Grizzly-2-Guice-Jersey-tp5709778p5709787.html](http://grizzly.1045725.n5.nabble.com/Grizzly-2-Guice-Jersey-tp5709778p5709787.html)

# javascript - 更改文件字段内显示的路径的位置

> ID：11342987
> 
> 赞同：0
> 
> 时间：2012-07-05T11:01:59.320
> 
> 标签：javascript, html

我在我的站点中使用了一个文件字段来上传图像。当我浏览并选择图像时，图像的路径显示在字段中。但在 IE 中，此路径向下移动，因此路径不可读。我该怎么办解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:10:23.790

感谢 Ramblex 的宝贵时间。无论如何我已经找到了解决方案。我已经修改了样式，这对我有用。

字体：14px/20px 'Arial', Arial, Helvetica, sans-serif; 颜色：#545454; 宽度：248px；高度：22px；边框：薄实#bbbbbb；-webkit-border-radius：5px；-moz-边界半径：5px；边框半径：5px；填充：0px 10px 0px 0px; 背景：#fff;

这是对我有用的代码。

# unix - 如何使用 sed 提取字符或单词之间的一组字符串

> ID：11342990
> 
> 赞同：2
> 
> 时间：2012-07-05T11:02:11.400
> 
> 标签：unix, sed

我有这样一个特殊的句子-

```
|/billing/gcdr/ftpdir|fw43/collectors/ANHMCA04ANT| 
```

我需要从这个特定的句子中提取以下部分 -

```
/billing/gcdr/ftpdir 
```

我可以用 sed 做到这一点吗？如果是，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T11:11:13.183

以及你也可以`sed`使用. 使用：`awk``cut``cut`

`echo "|/billing/gcdr/ftpdir|fw43/collectors/ANHMCA04ANT|" | cut -d'|' -f2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T11:07:48.607

这不是一个`sed`解决方案，但是如果您可以使用[awk](http://www.grymoire.com/Unix/Awk.html)：

```
echo "|/billing/gcdr/ftpdir|fw43/collectors/ANHMCA04ANT|"| awk -F"|" '{print $2}' 
```

将产生：

```
/billing/gcdr/ftpdir 
```

*awk 命令说明：*

```
awk -F"|" '{print $2}' 
```

`-F="|"`指定“字段分隔符” - 它使用字符将输入行分隔/分组为不同的字段`'|'`（而不是默认使用空白），然后打印该行的第二个字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T11:09:51.960

`sed`可以很容易地做到这一点：

```
sed 's/^|//;s/|.*//;' 
```

第一个`sed`命令 ( `s/^|//`) 将删除第一个`|`符号，第二个命令 ( `s/|.*//`) 将删除下一个`|`和之后的所有符号。

要测试它在控制台中运行：

```
echo "|/billing/gcdr/ftpdir|fw43/collectors/ANHMCA04ANT|" | sed 's/^|//;s/|.*//;' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T11:31:03.937

这可能对您有用：

```
echo '|/billing/gcdr/ftpdir|fw43/collectors/ANHMCA04ANT|' | 
sed 's/^|\([^|]*\).*/\1/'
/billing/gcdr/ftpdir 
```

# php - 多级选择框

> ID：11342995
> 
> 赞同：2
> 
> 时间：2012-07-05T11:02:45.817
> 
> 标签：php, html

我在构建多级选择框时遇到问题。我有结构的类别表：id，parent_id，name。如果 parent_id = 0 它是顶级的。我不知道关卡深度，所以可能是 2,3-5 关卡。我如何使用查询“SELECT * FROM cats”来构建它结果假设看起来像

```
<select>
<option>cat_name</option>
<option>--cat_name_l1</option>
<option>--cat_name_l1</option>
<option>----cat_name_l2</option>
<option>----cat_name_l2</option>
<option>cat_name</option>
</select> 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T11:32:41.397

```
function _buildTree($data, $idParent, $indentSymbol, $level)
{
    $cat = array();
    foreach($data as $row){
        if($row['parent_id'] == $idParent){
            if($indentSymbol AND $level > 0){
                $symbols = array_fill(0, $level, $indentSymbol);
                $cat[$row['id']] = implode('', $symbols) . $row['name'];
            }else{
                $cat[$row['id']] = $row['name'];
            }

            $cat = $cat + _buildTree($data, $row['id'], $indentSymbol, $level++);
        }
    }
    return $cat;
}

$result = mysql_query("SELECT * FROM cats");

$data = array();
while($row = mysql_fetch_assoc($result)){
    $data[] = $row;
}

$select = '<select>';

foreach(_buildTree($data, 0, '-', 0) as $key=>$option){
    $select .= '<option value=' . $key . '>' . $option . '</option>';
}

$select .= '</select>'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T11:26:16.100

试试这个来生成所需的下拉列表：

```
$result=mysql_query("SELECT * FROM cats");
$opt='<select>';
while($row=mysql_fetch_array($result))
{
    $cat[$row['id']][0]=$row['parent_id'];
    $cat[$row['id']][1]=$row['name'];
}
foreach($cat as $ct)
{
    $level=0;
    $temp=$ct;
    while($temp[0]!=0)
    {
        $temp=$cat[$temp[0]];
        $level++;
    }
    $opt.="<option>";
    for($i=0;$i<$level;$i++)
    {
        $opt.="--";
    }
    $opt.=$ct[1];
    $opt.="</option>";
}
$opt.="</select>"; 
```

然后，您可以将其用作：

```
echo $opt; 
```

# html - 我需要一个包含所有 HTML5 元素的测试文件

> ID：11342999
> 
> 赞同：11
> 
> 时间：2012-07-05T11:02:59.010
> 
> 标签：html, file

我正在对一个新的 html5-css3 框架进行一些测试，我想针对一些无类 HTML 文件对其进行测试，以了解我的框架的行为方式。

有谁知道一个或多个静态 HTML 文件，其中包含各种配置（最好没有类）中的所有 HTML5 标记，我可以使用它们来测试我的框架。这对我来说将是一个很大的节省时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-05T11:44:50.330

我从未使用过它，但[~~此页面~~](http://ackernaut.com/space-station/html5-elements/)^(*链接已失效*) [*此*页面](https://github.com/cbracco/html5-test-page)似乎非常详尽，似乎正是您正在寻找的。您可以随时检查[HTML5 医生元素索引](http://html5doctor.com/element-index/)，以确保所有 HTML5 元素都出现在此测试页面中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-27T14:21:48.577

用于!DOCTYPE `Ctrl+C`、`Ctrl+v`a、abbr、首字母缩略词、地址、applet、区域、文章、aside、audio、b、base、basefont、bdi、bdo、big、blockquote、body、br、按钮、画布、标题、中心、引用，代码，col，colgroup，命令，datalist，dd，del，详细信息，dfn，dir，div，dl，dt，em，嵌入，字段集，figcaption，数字，字体，页脚，表格，框架，框架集，h1， h2, h3, h4, h5, h6, head, header, hgroup, hr, html, i, iframe, img, input, ins, kbd, keygen, label, legend, li, link, map, mark, menu, meta,仪表，导航，noframes，noscript，对象，ol，optgroup，选项，输出，p，参数，pre，进度，q，rp，rt，ruby，s，samp，脚本，部分，选择，小，源，跨度，罢工，强，风格，子，摘要，sup，表格，tbody，td，textarea，tfoot，th，thead，时间，标题，tr，轨道，tt，u，ul，var，视频，wbr。