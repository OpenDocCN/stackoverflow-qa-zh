# StackOverflow 问答 11758000-11758999

# ajax - 带有上传字段的 Wicket Ajax - 在 IE 中

> ID：11758003
> 
> 赞同：2
> 
> 时间：2012-08-01T11:11:48.197
> 
> 标签：ajax, internet-explorer, wicket

1.  我有一个检票口形式的上传字段。

2.  我将 AjaxFormSubmitBehavior 与事件“onchange”一起使用，因此当用户只需选择一个文件并且我已经上传并在旁边的一个小面板中显示图像时。

3.  它在 Firefox 和 Chrome 中运行良好，但在 IE (IE8 / IE9) 中却不行。在 IE 中当用户选择一个文件时：

    一个。一个带有响应代码的新窗口（在一个名为“ajax-response”的标签中）被打开。

    湾。Wicket Ajax 调试框显示：“错误：解析响应错误”。

4.  请注意，此应用程序中的其他 Ajax 调用在 IE 中也运行良好。

5.  我附上了相关的代码。在此先感谢，大卫

私有 FileUploadField 文件；

```
 FileUploadField fuf = new FileUploadField("file");

        AjaxFormSubmitBehavior ajaxFormSubmitBehavior = new AjaxFormSubmitBehavior("onchange") {

            private static final long serialVersionUID = 1L;

            @Override
            protected void onSubmit(AjaxRequestTarget target) {

                MlCmpBlob img = handleUpload();

                ImageDisplayPanel imageDisplayPanelTmp = new ImageDisplayPanel("uploadImgDisplay", new Model<MlCmpBlob>(img));
                imageDisplayPanel.replaceWith(imageDisplayPanelTmp);
                imageDisplayPanel = imageDisplayPanelTmp;
                target.add(imageDisplayPanel);
            }

            @Override
            protected void onError(AjaxRequestTarget target) {
                target.add(wizardFormFeedback);
            }
        };
        ajaxFormSubmitBehavior.setDefaultProcessing(false);
        fuf.add(ajaxFormSubmitBehavior);
        add(file = fuf); 
```

# linux - linux proc文件夹

> ID：11758004
> 
> 赞同：0
> 
> 时间：2012-08-01T11:11:48.337
> 
> 标签：linux

我正在尝试获取有关 linux 中进程空间（伪文件系统）的一些信息。

我发现很少有进程在我的服务器中长时间卡住（没关系）但是当我检查与该进程相对应的 proc 文件夹时，我发现了以下信息并且很有趣地找到（粗体数据） **lrwxrwxrwx 1 rmail rmail 0 Aug 1 16:11 exe -> /usr/local/bin/geneliaTesting（已删除）**

```
dr-xr-xr-x 2 rmail rmail 0 Aug  1 16:19 attr
-r-------- 1 rmail rmail 0 Aug  1 16:19 auxv
-r--r--r-- 1 rmail rmail 0 Aug  1 16:24 cmdline
-rw-r--r-- 1 rmail rmail 0 Aug  1 16:19 coredump_filter
-r--r--r-- 1 rmail rmail 0 Aug  1 16:19 cpuset
lrwxrwxrwx 1 rmail rmail 0 Aug  1 16:11 cwd -> /home8
-r-------- 1 rmail rmail 0 Aug  1 16:19 environ
lrwxrwxrwx 1 rmail rmail 0 Aug  1 16:11 exe -> /usr/local/bin/geneliaTesting (deleted)
dr-x------ 2 rmail rmail 0 Aug  1 16:11 fd
-r--r--r-- 1 rmail rmail 0 Aug  1 16:19 io
-r-------- 1 rmail rmail 0 Aug  1 16:19 limits
 .....   and some other info. 
```

二进制文件存在并且被其他进程持续使用......任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:11:12.867

这是一个正在运行的进程，其可执行文件在运行时已从存储设备中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T16:26:00.400

尝试使用 lsof .. pipe to less 以便您可以通过它阅读...但这将列出所有打开的文件/套接字（-n 删除名称解析，这使得该命令需要很长时间才能在网络套接字反向 DNS 等上完成）

```
lsof -n | less 
```

然后您可能可以搜索您的流程

如果您看到已删除的部分..它可能是真的但仍在运行，因为某些东西打开了 inode

如果您找到进程 ID (pid)，您可以查看内部

```
ls /proc/PID_NUMBER/fd/ 
```

如果你确实在那里看到它，你可以很好地从中取出一个副本

```
cp /proc/PID_NUMBER/fd/FD_NUMBER /tmp/copy_of_that_in_memory_file 
```

那么您可以对其进行分析..也许可以尝试使用字符串等？确定文件类型等

文件 /tmp/copy_of_that_in_memory_file

在上面使用字符串

```
strings /tmp/copy_of_that_in_memory_file | less 
```

不能说我知道那是什么...

一旦您也知道 pid，strace 可以帮助您找出它在做什么.. 使用 -f 跟随打开的孩子..

```
strace -fp PID_NUMBER 
```

# java - 为什么不强制在 java.util.Comparator 中实现 equals？

> ID：11758006
> 
> 赞同：14
> 
> 时间：2012-08-01T11:11:51.310
> 
> 标签：java, interface, comparator

在 Javadoc 以及代码本身中，Comparator 接口定义：

```
 int compare(T o1, T o2);
 boolean equals(Object obj); 
```

但这并没有给出编译的概率：

```
 Comparator a = new Comparator() {      
     @Override public int compare(Object o1, Object o2) {
        //..
     }
 }; 
```

但这确实：

```
 Comparator a = new Comparator() {      
     @Override public boolean equals(Object comparator) {
        //..
     }
 }; 
```

它是如何为允许我们不覆盖方法的接口完成的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T11:17:01.493

首先[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html#equals(java.lang.Object))清楚地解释了你应该实现这个方法：

> 此外，只有当指定的对象也是一个比较器并且它强制执行与此比较器相同的排序时，此方法才能返回 true。因此，`comp1.equals(comp2)`意味着`sgn(comp1.compare(o1, o2))==sgn(comp2.compare(o1, o2))`对于每个对象引用`o1`和`o2`.

但后来：

> 请注意，不要覆盖`Object.equals(Object)`.

`equals()`即使它是接口的一部分，怎么可能不覆盖？因为这个方法已经为 Java 中的每个对象（[在`Object`类](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))中）实现了。

接口中的声明只是为了通过添加额外的 JavaDoc 解释来强调`equals()`关于的重要性。`Comparator`

顺便说一句，如果您的比较器是无状态的，您应该只有一个实例——在这种情况下，默认`equal()`实现就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T22:43:01.807

因为每个对象都已经实现了 equals()。

实际上，在 Comparator 接口定义中再次指定 equals() 只是提供了一个机会来记录合同及其与 compareTo() 的关系。

# c++ - 检测网络连接

> ID：11758007
> 
> 赞同：0
> 
> 时间：2012-08-01T11:11:55.647
> 
> 标签：c++, qt, network-programming

是否有允许管理网络连接的跨平台库？例如，Qt 库是否能够做到这一点？如果是这样，我应该寻找哪些课程？

通过管理网络连接，我的意思是检测它们并监控它们。库支持的平台必须是 Windows 和 Linux。该库必须在 c++ 上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:05:57.963

查看`<QtNetwork>` 并阅读有关 QNetworkInterface的信息

# java - 在eclipse中设置JVM参数的正确方法是什么

> ID：11758010
> 
> 赞同：8
> 
> 时间：2012-08-01T11:12:05.177
> 
> 标签：java, eclipse, jvm, jvm-arguments

我正在使用 eclipse 4.2 执行 junit 测试。测试使用了大量内存，所以我想做的是扩大分配给 jvm 的内存。我想知道在eclipse ini文件中设置堆内存参数和运行配置之间是否有区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T11:15:46.507

请注意，eclipse 启动的 Java 进程的内存设置与 eclipse 本身允许的最大内存大小不同。

日食本身的津贴是在启动时设置的

`-vmargs -Xmx1024M -Xms1024M -XX:PermSize=2048m -XX:MaxPermSize=2048m`

注意“mx”中的m区分大小写，而“1024M”中的m不区分大小写；并且单 X 选项拼写不带“=”，但双 X 选项拼写带有“=”。

*由*eclipse启动的 JVM 的内存大小（您想要影响单元测试的内容）*在*eclipse 中设置：

`Window::Preferences::Java::Installed JREs::Edit::Default Vm Arguments: -Xms128M -Xmx2048M`

（菜单条目的确切标题可能因 Eclipse 版本而异。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:15:44.893

您可以增加`eclipse.ini`文件中的堆大小，如下所示。

```
 -Xms1024m
 -Xmx1024m
 -XX:MaxPermSize=256m 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T11:21:58.590

如果您将其设置为`eclipse.ini`，它适用于 Eclipse 进程本身，而不适用于您从 Eclipse 启动的任何新 Java 进程。

如果您在运行配置中设置它，它*仅*适用于该运行配置，而不适用于 Eclipse 本身。

由于您的单元测试使用大量内存，因此 Eclipse 有多少可用内存并不重要。单元测试将在一个新的 Java 进程中运行，并使用默认内存分配。

# android - 检索纬度和经度时出现应用程序崩溃

> ID：11758011
> 
> 赞同：0
> 
> 时间：2012-08-01T11:12:10.607
> 
> 标签：android, gps, location, latitude-longitude

您好，我目前正在尝试检索我当前的纬度和经度并将它们转换为地址，但是每次运行程序时我都会遇到应用程序崩溃。知道可能是什么原因造成的吗？

活动：

```
public class LocatahActivity extends Activity {

    LocationManager lm;
    String towers;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);

        towers = lm.getBestProvider(criteria, false);
        Location location = lm.getLastKnownLocation(towers);        

        //double lat = (location.getLatitude()*1E6);
        //double longi = (location.getLongitude()*1E6);

        double lat = location.getLatitude();
        double longi = location.getLongitude();

        Log.e("TAG", "Latitude: " + lat);
        Log.e("TAG", "Longitude: " + longi);

        TextView myLatitude = (TextView)findViewById(R.id.mylatitude);
        TextView myLongitude = (TextView)findViewById(R.id.mylongitude);
        TextView myAddress = (TextView)findViewById(R.id.myaddress);

        myLatitude.setText("Latitude: " + String.valueOf(lat));
        myLongitude.setText("Longitude: " + String.valueOf(longi));

        Geocoder geocoder = new Geocoder(this, Locale.ENGLISH);

        try {
            List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
            StringBuilder sb = new StringBuilder();
            if (addresses.size() > 0) {
            Address address = addresses.get(0);
            for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
            sb.append(address.getAddressLine(i)).append("\n");
            sb.append(address.getLocality()).append("\n");
            sb.append(address.getPostalCode()).append("\n");
            sb.append(address.getCountryName());

            myAddress.setText(sb.toString());
            }
        }catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            myAddress.setText("Cannont get Address!");
        }

    }

} 
```

显现：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

日志猫

```
08-01 19:20:45.572: E/AndroidRuntime(6233): FATAL EXCEPTION: main
08-01 19:20:45.572: E/AndroidRuntime(6233): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.location/com.example.location.LocatahActivity}: java.lang.NullPointerException
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.os.Looper.loop(Looper.java:137)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread.main(ActivityThread.java:4511)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at dalvik.system.NativeStart.main(Native Method)
08-01 19:20:45.572: E/AndroidRuntime(6233): Caused by: java.lang.NullPointerException
08-01 19:20:45.572: E/AndroidRuntime(6233):     at com.example.location.LocatahActivity.onCreate(LocatahActivity.java:44)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.Activity.performCreate(Activity.java:4470)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-01 19:20:45.572: E/AndroidRuntime(6233):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
08-01 19:20:45.572: E/AndroidRuntime(6233):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:13:09.007

您的对象似乎`location`为空。这可能在您使用[getLastKnownLocation()](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)时发生。如果没有最后一个位置，或者如果提供程序当前被禁用，您将使用此方法获得 null。

除此之外，您说您想要当前位置。这是获取当前位置的错误方法。要获取用户的当前位置，您需要使用[LocationManager](http://developer.android.com/reference/android/location/LocationManager.html) API 中提供的 requestLocationUpdates() 方法。使用这些和[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)来接收更新。请记住，在获得位置之前可能需要几秒钟到几分钟的时间。

# c - C调用时如何逐行执行Lua函数

> ID：11758012
> 
> 赞同：0
> 
> 时间：2012-08-01T11:12:17.517
> 
> 标签：c, lua, blocking

尽管我认为它应该很常见，但我一直无法找到这个问题的答案，所以我猜我在做一些愚蠢的事情或者没有正确阅读手册。

无论如何，这就是我想要做的。我有一个程序，它有一些为 Lua 注册的 C 函数。

在另一点，我调用 lua 函数

```
lua_getglobal(mainL,"interact"); 
```

和

```
 if (lua_pcall(mainL, 2, 0, 0) != 0)
          printf("error running function `f': %s",
     lua_tostring(L, -1));
    printf("interact\n"); 
```

现在在 Lua 函数中，我经常调用其​​他注册的 C 函数。似乎每次这样做时，它都在其单独的线程中运行。（如我错了请纠正我）

所以我想问的是，在执行 Lua 函数的下一行之前，它是否有任何阻塞直到 C 函数调用完成。

（是的，我尝试在我的 C 程序中使用互斥锁，它适用于我，但由于某种原因似乎不适用于其他 PC 上的其他人，所以我试图让它阻塞，因为这会使一切变得很多更轻松）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:33:37.543

> 似乎每次这样做时，它都在其单独的线程中运行。（如我错了请纠正我）

你错了 ;-) 或者至少，如果你看到创建了其他线程，那么你从 Lua 调用的 C 代码中的某些东西正在这样做。从 Lua 调用的 C（反之亦然）将显式阻塞。

# mongoose - 有没有更好的方法来监听 Mongoose 模型上的事件？

> ID：11758014
> 
> 赞同：2
> 
> 时间：2012-08-01T11:12:23.420
> 
> 标签：mongoose, events, listener

创建连接时，将运行此函数：

```
function setupModelListenersForConnection(c){
    var Job = c.model('Job');
    Job.addListener('created', function(jobInstance){
    });
    console.log('Models have been wired!');
} 
```

在工作的架构中，我有这个：

```
JobSchema.post('save', function(next){
  this.db.models.Job.emit('created', this);
}) 
```

我真正不喜欢的是`this.db.models.Job`，我认为有更好的方法来做到这一点；）非常感谢

为什么我需要它？

想象一下创建了一个工作。我想更新工作人员并将其设置为当前工作和新状态（忙碌）。

我喜欢解耦模型，这样 Job 模型就不必知道 Worker 模型。只知道有关工人的一些详细信息，例如 id 和 name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T08:54:43.647

这就是[猫鼬生命周期](http://github.com/fzaninotto/mongoose-lifecycle)的做法

```
JobSchema.post('save', function(next){
  var model = this.model(this.constructor.modelName);
  model.emit('created', this);
}) 
```

# jquery - JSON对象迭代不起作用

> ID：11758015
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:12:24.033
> 
> 标签：jquery

我正在尝试使用以下代码迭代 json 对象，但迭代不起作用

```
function iterateRows()
{
    var timein_rows = [{"id":"72","date":"2012-08-01"},{"id":"73","date":"2012-08-01"}];
    $.each(timein_rows, function(i, item) {
       alert(item.id);
    });
} 
```

我已经使用 php 创建了 json 字符串`json_encode`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:15:53.973

在这个小提琴[**演示**](http://jsfiddle.net/yFcdM/)中它工作正常。

查看：

*   你的代码正在调用`iterateRows()`你期望它被调用的地方
*   在执行脚本的位置包含/引用了所需的 jQuery 库

根据评论，如果上述情况良好，请在每次执行调用时检查 JSON 值，您可以执行类似于`console.log(timein_rows);`before的操作`.each()`。

例如，使用您发布的控制台输出代码执行此操作类似于：

```
[Object { id="72",  date="2012-08-01"}, Object { id="73",  date="2012-08-01"}] 
```

检查工作调用和非工作调用之间的 JSON 输出是否存在差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:19:25.190

检查浏览器的错误控制台。这很可能是您使用的版本中的 JavaScript 错误。

# android - Android 在 AlertDialog 上管理项目

> ID：11758016
> 
> 赞同：2
> 
> 时间：2012-08-01T11:12:25.317
> 
> 标签：android, android-alertdialog

我有这种情况。

在我的布局中，我有 3 个按钮和一个带有两个单选按钮的单选组。用户必须按下`button1`, `button2`，选择其中一个单选按钮，然后按下`button3`并执行对数据库的查询。

按下 后`button1`，将执行查询，结果将显示在 MultipleChoiceItems AlertDialog 上。

我有一些问题。

**多项选择项**

我对这个 AlertDialog 有三个问题。

第一：查询结果显示在我的 AlertDialog 上，但如果我按下任何项目，复选框上不会出现复选标记。我可以在我的 toast 消息中看到正在检查这些项目。

第二：查询是对数据库执行的，但我可以添加一个查询未返回的元素吗？想象一下 AlertDialog 在查询之后显示`One`, `Two`, `Three`。我想再添加一项。像`This was not returned by the query`, `One`, `Two`,之类的东西`Three`。

第三：

`public AlertDialog.Builder setMultiChoiceItems (Cursor cursor, String isCheckedColumn, String labelColumn, DialogInterface.OnMultiChoiceClickListener listener)`第二个参数是设置选中或取消选中的项目。我的数据库没有此列，因此我传递了一列，我知道它总是不同于零。有没有办法绕过这个？

这是我的代码：

```
public class MyClass extends ListActivity implements OnClickListener, OnCheckedChangeListener {
    Database db = new Database(this);
    int order;
    boolean groupCheck = false;
    boolean orderCheck = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.n);

        Button proc = (Button) findViewById(R.id.procButtonProc);
        proc.setOnClickListener(this);
        Button pickGroup = (Button) findViewById(R.id.procButtonGroup);
        pickGroup.setOnClickListener(this);
        RadioGroup pickOrder = (RadioGroup) findViewById(R.id.procRadioOrder);
        pickOrder.setOnCheckedChangeListener(this);
    }

    @Override
    public void onClick(View v) {

        if (v.getId() == R.id.procButtonGroup) {

            db.open();
            final Cursor query = db.getData(0, 0, null);
            AlertDialog.Builder pickGroup = new AlertDialog.Builder(this);
            pickGroup.setTitle(getString(R.string.procGroupTitle));

            pickGroup.setMultiChoiceItems(query, "GROUP_NAME", "GROUP_NAME", new DialogInterface.OnMultiChoiceClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                    // TODO Auto-generated method stub

                    if (isChecked) {
                        query.moveToPosition(which);
                        String str = query.getString(1).toString();
                        Toast.makeText(MyClass.this, "You have selected " + str, Toast.LENGTH_LONG).show();
                        // ListView list = ((AlertDialog) dialog).getListView();
                        // list.setItemChecked(which, true);

                    }
                }
            });

            pickGroup.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                }
            });

            pickGroup.show();
            db.close();

        } 

        if (v.getId() == R.id.procButtonProc) {

            if (orderCheck == true && groupCheck == true) {
                // Based on the conditions, perform query on the database

            } else {
                Toast.makeText(getApplicationContext(), "Select GROUP, N and ORDER", Toast.LENGTH_SHORT).show();
            }
        }
    }

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        // TODO Auto-generated method stub
        switch (checkedId) {
            case R.id.procOrderASC:
                order = 0;
                orderCheck = true;
                break;
            case R.id.procOrderDSC:
                order = 1;
                orderCheck = true;
                break;
        }
    }
} 
```

谢谢，

收藏夹

# java - 将 JSF/Seam/JBoss 应用程序升级到新版本

> ID：11758020
> 
> 赞同：1
> 
> 时间：2012-08-01T11:12:58.807
> 
> 标签：java, hibernate, jboss, seam, icefaces

我正在为我们的应用程序创建升级路径，在此过程中出现了几个问题。我想，我的配置经常在这种情况下使用，所以也许有人以前经历过。

简短的应用说明：

*   JSF Web 应用程序
*   ICEfaces 作为 JSF 框架（实际版本 1.8.3 最新是 3.1）
*   Seam 作为 EJB/View 之间的连接（实际是 2.1.1，最新的是 2.2.2 或 3）
*   部署在 JBoss 4.2.2.GA（最新是 7.1）
*   通过 Hibernate/Seam EntityManager 连接数据库

首先应该升级什么？哪个更新可能甚至不需要？

这是我发现的：

*   ICEfaces 似乎几乎是无害的，只是更换 jars 并升级到 JSF 2，该应用程序已经使用 facelets 并且没有 JSP 应该使它更容易。尽管如此，它的工作，但似乎是直截了当

*   像 Hibernate 这样的附加库随应用程序一起提供，但可以通过类加载集成到 JBoss 中，所以这应该不是什么大问题。

*   由于 Seam3 似乎是一个新的实现，我想留在 2.X 上下文中。2.2.2 似乎是合理的并且存在迁移指南，但它似乎与 JBoss AS 紧密耦合。

这让我想到了主要问题：升级 JBoss

最新的 JBoss 版本是 7.1，我们使用的是 4.2.2。这是版本号上的一大步，它似乎是复杂的部分。此外，Seam 似乎对 JBoss 7 有一些问题。初步升级到 JBoss 6 似乎是介于两者之间的合理步骤，只是为了让一些东西更新一点。

这里有没有人进行了这么大的升级进度，可以给菜鸟一些提示？也许一些关于已知陷阱和要做的事情的提示（除了不断地对现有代码库进行测试）

而且，一般来说，在给定的 J2EE 上下文中，何时应该升级使用的库（撇开安全更新或主要错误修正）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:16:09.340

如果您在升级 2.3 时遇到麻烦，它仍处于测试阶段（我上次听说是 beta2，可能支持 seam-gen），但具有 jsf2 的 2.2 的所有功能并在 jboss 7 上运行。从 2.1 升级到 2.2 并没有真正让你获得太多，2.2 没有太多工作就不能与 jboss7 一起使用，也没有 jsf2，尽管到 2.2/jboss5 更容易。

如果您正在考虑 Seam3，请阅读[本文](http://in.relation.to/Bloggers/SoWhatsHappeningWithSeam)——改用 Java EE/CDI。
我会

开始学习 maven

使用 jboss 工具和 maven 插件将 eclipse 升级到至少 indigo

让 Jboss 7 启动并运行——它与 6 之前的版本完全不同，但让它运行相对容易，困难的部分是弄清楚现在一切都在哪里。

重新配置您的应用程序以使用 Maven

将 Seam 2.3 库添加到您的应用程序

无论是构建 - 修复 - 部署 - 修复

或者剥离您的应用程序直到它工作并一次添加组件。

Marek 的 2.3 博客在[这里](https://community.jboss.org/blogs/marek-novotny)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:27:21.483

选择“通过 Hibernate/Seam EntityManager 连接数据库”作为第一优先级，并测试数据库操作在 JBoss 7 上是否正确运行，因为 JBoss 7 与旧 JBoss 版本完全不同。并尝试“Seam 作为 EJB/View 之间的连接”部分。最后要更新的部分是“ICEfaces as JSF framework”。

# php - 使用 S3 实现一致性和数据存储的无数据库应用程序

> ID：11758023
> 
> 赞同：1
> 
> 时间：2012-08-01T11:13:02.123
> 
> 标签：php, amazon-s3

我正在使用一个简单的提交应用程序，它为每个访问者执行以下操作：

*   检查目录列表以找到标题中数字最大的目录
*   将该数字加一并创建新目录
*   将上传内容存储到该新目录中

我知道可能存在两个同时客户端获取目录列表并为它们确定相同的下一个最大数字的经典竞争条件。为了缓解这个问题，我正在使用以下步骤：

*   首先，像以前一样获取最大的数字并增加它
*   由于 S3 的目录是文件，所以在新创建的目录中存储一个随机数
*   获取目录的内容（实际文件的内容）并与其中存储的内容进行比较
*   如果数字不同，则意味着其他线程“赢得”了比赛，因此该过程从第一步重新开始。

这看起来像足够的步骤吗？我在想，网络拥塞是否会导致进程 A 存储和读取自己的号码并确定它已经获胜，然后进程 B 会得出相同的结论。我怎样才能减轻这种情况？我正在考虑为操作引入显式超时 - 例如，目录创建需要最多 n 秒，这将是进程在检查随机数之前等待的时间。

或者有没有办法进行检查 FS 内容和创建目录的原子操作，或者至少做创建但不替换操作？或者创建会失败而不是替换现有文件？

顺便说一句 - 我正在使用 PHP 和官方 SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:06:15.330

我对 Amazon S3 没有太多经验，但这里有以下[声明](http://docs.amazonwebservices.com/AmazonS3/latest/dev/Introduction.html)：

> Amazon S3 当前不支持对象锁定。如果同时对同一个键进行两次看跌，则具有最新时间戳的看跌获胜。如果这是一个问题，您将需要在应用程序中构建对象锁定机制。

连同“Amazon S3 数据一致性模型”部分的其余内容，它表明您想做的事情不能单独使用对 Amazon S3 SDK 的请求来实现，而是需要外部同步。[此处](https://stackoverflow.com/questions/3431418/locking-with-s3)提供了一种使用 SimpleDB 的可能方法。

# python - 在 while 语句中尝试块

> ID：11758029
> 
> 赞同：6
> 
> 时间：2012-08-01T11:13:36.617
> 
> 标签：python, if-statement, exception-handling, while-loop

我刚开始使用 Python 2.7，但我不明白为什么会发生一些事情：

在以下代码中，一个来自 python 2.7.2 教程的示例的修饰版本，我得到了一个意想不到的结果：

```
while True:
    try:
        x = int(raw_input("Please enter a number: "))
        break
    except ValueError:
        print "Oops!  That was not a valid number.  Try again..."
    else:
        print 'Thanks,',x,'is indeed an integer'
    finally:
        print 'all done, bye' 
```

当我输入一个整数时，代码会忽略该`else:`语句并直接切换到`finally:`. 显然这与`while True:`顶部有关，但为什么会发生呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T11:21:06.407

break 语句退出循环，因此永远不会到达 else 语句。

将 break 放在 else 子句中，如下所示：

```
while True:
    try:
        x = int(raw_input("Please enter a number: "))
    except ValueError:
        print "Oops!  That was not a valid number.  Try again..."
    else:
        print 'Thanks,',x,'is indeed an integer'
        break

print 'all done, bye' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T11:16:59.870

这可能是因为`break`离开循环的语句。`break`只有在前一行没有异常时才到达该语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-22T15:56:15.260

不是蟒蛇人，但是这个怎么样

```
while True:
    try:
        x = int(raw_input("Please enter a number: "))
        print 'Thanks,', x, 'is indeed an integer'
    except ValueError:
        print "Oops!  That was not a valid number. Try again..."
    finally:
        print 'all done, bye' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-05T12:33:58.613

我最近遇到了一个没有输入的问题，有多少测试用例。`while`循环，`try-except`非常有帮助。

```
while(True):
    try:
        x=(input())
        x1,x2=x.split()
        print(int(x1)+int(x2))
    except:
        break 
```

# vb.net - VB.NET & SOAP - 发现该合约的多个端点配置

> ID：11758030
> 
> 赞同：2
> 
> 时间：2012-08-01T11:13:53.517
> 
> 标签：vb.net, wcf, web-services, soap

我正在尝试调用可以在以下位置看到的 Web 服务： [http ://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx?op=GetAirportLocations](http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx?op=GetAirportLocations)

我正在使用 VB.net，但 C# 中的任何解决方案都将受到欢迎。

我这样做的方式是：

1.  我正在向[http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx](http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx)添加一个新的服务引用并选择 fchXMLInterface > fchXMLInterfaceHttpPost

2.  在我的代码中，我有：`Dim API As New ServiceReference1.fchXMLInterfaceSoapClient`

当我运行它时，我收到一条错误消息：

> 无法加载合同“ServiceReference1.fchXMLInterfaceSoap”的端点配置部分，因为找到该合同的多个端点配置。请按名称指明首选端点配置部分。

我在此处发布的第一个链接上查看了帮助，但找不到。我该如何解决？

如果我不能将此 Web 服务称为 ServiceReference，我该如何调用此 Web 服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:47:21.583

当我添加服务参考时，它已经创建了下面提供的配置。在那里，您可以看到同一联系人的两个端点。
您应该指定要使用的端点名称，例如

```
var a = new ServiceReference1.fchXMLInterfaceSoapClient("fchXMLInterfaceSoap12"); 
```

或者只是删除不需要的端点配置。

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="fchXMLInterfaceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
  <customBinding>
    <binding name="fchXMLInterfaceSoap12">
      <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
          messageVersion="Soap12" writeEncoding="utf-8">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      </textMessageEncoding>
      <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
          maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
          bypassProxyOnLocal="false" decompressionEnabled="true" hostNameComparisonMode="StrongWildcard"
          keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
          realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
          useDefaultWebProxy="true" />
    </binding>
  </customBinding>
</bindings>
<client>
  <endpoint address="http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx"
      binding="basicHttpBinding" bindingConfiguration="fchXMLInterfaceSoap"
      contract="ServiceReference1.fchXMLInterfaceSoap" name="fchXMLInterfaceSoap" />
  <endpoint address="http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx"
      binding="customBinding" bindingConfiguration="fchXMLInterfaceSoap12"
      contract="ServiceReference1.fchXMLInterfaceSoap" name="fchXMLInterfaceSoap12" />
</client>
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T05:52:15.667

```
 [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)] 
```

将它添加到接口文件中就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T21:06:31.763

无论调用什么协议，如基本、net.tcp 或 wshttp，该地址都应该在 web 配置文件中从 app.config 文件中的客户端部分删除其他地址，在我的情况下，我将服务称为 htp://machinename:700 /test.svc 但在客户端部分有带有 net.tcp 和 wshttp 配置的地址，删除了这些地址，问题已为我解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:53:39.137

以下是我尝试使用上述 Web 服务并返回无效代理代码/密码错误消息的步骤：

单击添加 Web 引用并添加 URL，我将其命名为“CarHireRef”作为引用名称，然后单击确定。

现在我调用服务的代码如下所示：

```
CarHireRef.fchXMLInterface ob = new CarHireRef.fchXMLInterface();
CarHireRef.ResultsGetLocations result = ob.GetAirportLocations("", ""); 
```

上述过程没有任何配置条目，因为我添加的是 Web 引用而不是服务引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-26T16:59:30.273

请注意，您有两个端点

```
<endpoint address="http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx"
      binding="basicHttpBinding" bindingConfiguration="fchXMLInterfaceSoap"
      contract="ServiceReference1.fchXMLInterfaceSoap" name="fchXMLInterfaceSoap" />
  <endpoint address="http://www.flexiblecarhire.com/flexibleservice/fchxmlinterface.asmx"
      binding="customBinding" bindingConfiguration="fchXMLInterfaceSoap12"
      contract="ServiceReference1.fchXMLInterfaceSoap" name="fchXMLInterfaceSoap12" />
</client 
```

它们完全相同，因此服务器不知道您要访问哪个端点。删掉一个就好了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-27T15:44:07.893

只需从您的 web.config 文件中删除 customBinding`<system.serviceModel></system.serviceModel>`

# javascript - 如何使背景图像适合所有屏幕尺寸但允许垂直滚动

> ID：11758032
> 
> 赞同：2
> 
> 时间：2012-08-01T11:13:53.440
> 
> 标签：javascript, css, background

我浏览了互联网，发现了大量教程，可让您创建适合所有屏幕分辨率的背景。但是，我只想要一个适合页面宽度的背景，并允许访问者在没有固定位置的情况下向下滚动图像......这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:28:38.137

试试这个链接

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

正如其他人所说，你可以试试

```
background-size:100% auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:34:49.860

适合所有屏幕并且可以滚动的背景可以是重复的，例如纹理：

CSS：

```
body {
    background: url(path_to/texture.png) repeat;
} 
```

# extjs - 从组合框中删除打字光标

> ID：11758035
> 
> 赞同：7
> 
> 时间：2012-08-01T11:14:03.743
> 
> 标签：extjs, combobox, listener, text-cursor

我正在使用 ExtJS 组合框。专注于组合框时有一个打字光标。我在创建组合框时尝试实现`editable: false`，但它仅对 chrome 有帮助。

还尝试`clearListeners()`了查看这是否适用于该光标的功能 - 没有帮助，它仍然出现在 FireFox 和 IE 中。

另一个想法是`disabled`在组合框中的输入字段上进行设置。当我手动完成时，它有所帮助。

但是当我写下一个

`Ext.get('bu-encodingcount-combobox').select('input').set({disabled:'disabled'});`

它没有帮助 - 不知道，也许表达是错误的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T17:38:03.327

您看到光标的原因是因为组合框获得了焦点，因此处理此问题的最简单方法是在组合获得焦点时将焦点移动到下拉选择器上。

只需将此`onFocus`配置添加到您的组合框配置中：

```
// example combobox config
xtype: 'combo',
allowBlank: false,
forceSelection: true,
valueField:'id',
displayField:'name',
store: myStore,

// add this "onFocus" config
onFocus: function() {
    var me = this;

    if (!me.isExpanded) {
        me.expand()
    }
    me.getPicker().focus();
}, 
```

另外，如果这是一个组合框，我只建议这样做`forceSelection: true`。它会破坏用户在字段中输入任何内容的能力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-03T09:35:33.873

您可以添加配置，

*可编辑：假*

然后表现为正常的 Combo 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T06:12:36.420

尝试 -

**对于 IE**

```
combo.inputEl.set({disabled:'disabled'}); 
```

**对于火狐**-

```
combo.inputWrap.set({disabled:'disabled'}); 
```

**对于铬**-

```
combo.inputCell.set({disabled:'disabled'}); 
```

# http - VPN连接（iPhone）？

> ID：11758040
> 
> 赞同：0
> 
> 时间：2012-08-01T11:14:39.757
> 
> 标签：http, proxy, header, vpn

我想在我的 iphone 和 VPN 服务器之间启动 VPN 连接。我知道我可以在 iphone 中设置 VPN 设置。但我想从 iphone 以编程方式做到这一点。那么，如何在代码中建立 VPN 连接（目标 c）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:18:05.277

简短的回答是你不能这样做。至少不是正式的...

请参阅[iPhone VPN 连接应用程序](https://stackoverflow.com/questions/5564263/iphone-vpn-connect-app)

但是，如果现有 VPN 通道已经存在，您也许可以将您的应用程序指向它。我建议为用户创建有关如何创建 VPN 连接的说明。

# com - CLSID 自动生成的默认规则是什么？

> ID：11758041
> 
> 赞同：2
> 
> 时间：2012-08-01T11:14:43.580
> 
> 标签：com, registry, guid, clsid

我们有一个 COM 组件项目和一个注册 COM 组件的 Windows 安装项目。我检查了安装项目的先前版本，似乎为 COM 项目中的类生成的 CLSID 总是发生变化，即使有时这些类没有变化。这在某种程度上是我们想要的方式，因为我们希望在同一台机器上保留不同版本的实现。但是，当我手动构建此项目并在同一天多次使用 /regfile 选项运行 regasm.exe 时，生成的 reg 文件中的 CLSID 始终相同。它认为在以前的情况下它们发生了变化，这是因为它们是在不同的日子建造的，但我不确定。那么谁能告诉我这个 CLSID 自动生成的（默认）规则是什么？我认为我们正在使用项目中的默认设置。

我不确定程序集版本是否会影响结果。但是我们将程序集版本号指定为 Major.Minor.*，这意味着第三个数字（内部版本号）是自 1.1.2000 以来的天数，第四个数字（修订号）是自午夜以来的秒数除以 2。在 CLSID 发生变化的情况下，即使类代码不变，主次编号也相同。因此，如果版本号确实影响 CLSID，我可以说它不仅考虑了主要和次要数字。

当然，我们没有为这些类分配静态 GUID，否则它不会在我们的安装项目中改变。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:08:36.787

是的，如果您没有明确使用 [Guid] 属性，CLR 会自动为接口和类生成 guid。它做得很好，它包括程序集和类声明的所有部分，这些部分可能会使您的代码二进制文件与以前的版本不兼容。在 COM 中非常重要，这种不兼容性可能非常难以诊断。

该算法使用完全指定的类型名称以及类型中方法和字段的声明。将它们转换为字符串（“将声明字符串化”）并通过散列将结果字符串转换为 guid。“完全指定的类型名称”是您的克星，其中包括 [AssemblyVersion]。这完全有道理，增加程序集版本是一件大事，它使程序集与使用该程序集的*任何*代码都不兼容。这样的代码必须重新编译。COM 客户端也不例外。

如前所述，您可以指定自己的 [Guid] 属性以强制 CLSID 为特定值。当您出错并进行重大更改但不重新编译客户端代码时，可能会调用 DLL Hell。失败模式是讨厌的、非常随机的 AccessViolation 异常，或者只是简单地调用了错误的方法。执行此操作时，您应该回退到 ComInterfaceType.IsIDispatch，以便客户端代码被迫使用后期绑定。或者用铁腕控制您的构建和部署过程。

# dynamics-crm-2011 - crm 2011 - 查找：来自属性名称的关系名称

> ID：11758043
> 
> 赞同：1
> 
> 时间：2012-08-01T11:14:47.213
> 
> 标签：dynamics-crm-2011

我正在尝试使用 SDK/以编程方式检索给定属性名称的查找关系信息。在 CRM 2011 中，这一切都在一个屏幕上提供（见下文）

![](../Images/4069fec48c5e4239ae7e29655581ada4.png)

所以，总而言之，我想要关系名称，给定属性名称。假设我知道该属性是一个查找。如果有人有任何提示或提示，他们将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:37:00.683

您可以通过获取实体的元数据然后查看实体上的关系来获得此信息。这是一个简单的例子。

前任：

```
var entityRequest = new RetrieveEntityRequest();
entityRequest.RetrieveAsIfPublished = false;
entityRequest.LogicalName = "account";
entityRequest.EntityFilters = EntityFilters.Relationships;

var entityResponse = serviceProxy.Execute(entityRequest) as RetrieveEntityResponse;

var relationship =
    entityResponse.EntityMetadata.ManyToOneRelationships.SingleOrDefault(
    r => r.ReferencingAttribute == "transactioncurrencyid");         

return relationship.SchemaName; 
```

这将在关系的 SchemaName 中为您提供 transactioncurrency_account

# php - php 访问包含对象的属性

> ID：11758046
> 
> 赞同：1
> 
> 时间：2012-08-01T11:15:11.167
> 
> 标签：php, oop, object, scope, this

我有一个小问题。在 javascript 中可以转发范围：

```
var aaa = new function () {
    that = this;
    that.bbb  = 'foo';
    this.ccc = new function () {
        this.ddd = 'bar';
        this.eee = function () {
            return that.bbb+this.ddd;
        }
    }
} 
```

aaa.ccc.eee() 将返回“foobar”。我怎样才能在 PHP 中做一些具有相同效果的事情？我有一个代码：

```
class bbb {
    public $ccc = 'bar';
        function __construct () {
            echo($that->aaa.$this->ccc);
        }
}
class aaa {
    public $that;
    public $aaa = 'foo';
    public $bbb;
    function __construct () {
        echo($this->aaa);
        $this->$bbb = new bbb();
        $this->$that = $this;
    }
}
$a = new aaa (); 
```

我有没有使用类似的东西：

```
$this->bbb = new bbb ($this);

class bbb {
    public $that;
    function __contruct ($parent) {
        $that = $parent
        ....
    }
} 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:34:56.047

没有什么能阻止你做与 JS 代码完全相同的事情，尽管这不是你在 PHP 中每天都能看到的：

## PHP 5.3

```
$aaa = (object)array(
    'bbb' => 'foo',
    'ccc' => (object) array(
        'ddd' => 'bar',
        'eee' => function() use(&$aaa){ $self = $aaa->ccc; return $aaa->bbb.$self->ddd; }
    ),
);

echo call_user_func($aaa->ccc->eee); 
```

请注意，在 PHP 5.3 中，无法`$this`在闭包内使用变量，因此您必须从导入的变量之一（在本例中）开始获取必要的上下文`$aaa`。

另外，请注意，您*不能*“直接”调用该函数，`$aaa-ccc->eee()`因为 PHP 很糟糕：`$aaa->ccc`是一个类型的对象，`stdClass`并且该类没有名为 的正式成员`eee`。

通过引用捕获，我在这里也很“可爱” `$aaa`，它可以在一行中定义整个对象图（如果`$aaa`需要在一个语句中定义没有闭包的情况下按值捕获，然后在另一个语句中添加闭包`$aaa->ccc->eee = function() ...`）。

## PHP 5.4

```
$aaa = (object)array(
    'bbb' => 'foo',
    'ccc' => (object) array(
        'ddd' => 'bar',
        'eee' => function() use(&$aaa) { return $aaa->bbb.$this->ddd; }
    ),
);

$aaa->ccc->eee = $aaa->ccc->eee->bindTo($aaa->ccc);
echo call_user_func($aaa->ccc->eee); 
```

在 PHP 5.4 中`$this`，只要您`bindTo`先“重新绑定”它，就可以在闭包内使用它。由于前面提到的相同原因，您不能在定义闭包的同时这样做：PHP 很烂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:30:45.263

您在 javascript 中所做的与您在 PHP 中所做的完全不同。在 javascript 中，您正在执行闭包，而在 PHP 中，您正在执行一些格式错误的类。

在 PHP 中，最接近的等价物是（虽然因为没有 IIFE 等而丑陋）

```
$tmp = function() {
    $that = new stdClass();
    $that->bbb = "foo";

    $tmp = function() use ($that) {
        $this_ = new stdClass();
        $this_->ddd = "bar";
        $this_->eee = function() use ($that, $this_) {
            return $that->bbb . $this_->ddd;
        };
        return $this_;
    };
    $that->ccc = $tmp();
    return $that;
};

$aaa = $tmp();

var_dump( call_user_func( $aaa->ccc->eee ));
//string(6) "foobar" 
```

在 php 5.4.5 中测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:42:13.677

```
class bbb {
    function __construct ($parrent) {
        echo $parrent->ccc;
    }
}

class aaa {
    public $aaa = 'foo';
    public $bbb;
    public $ccc = 'bar';

    function __construct () {
        echo $this->aaa;
        $this->bbb = new bbb($this);
    }
}

$a = new aaa(); 
```

# vba - VBA + 从文件中读取带引号的行

> ID：11758047
> 
> 赞同：3
> 
> 时间：2012-08-01T11:15:23.653
> 
> 标签：vba, vb6

在 file.txt 我有如下引号

D:\file.txt:

```
 """\\server1\pc1\targetG0\source-pc\pkgs.gz""" 
```

我的目标是将 D:\file.txt 中的行读入 pFile 参数

因此，我编写了以下简单的 VBA 代码：

```
 Dim pFile As String
  Open "D:\file.txt" For Input As #1
  Input #1, pFile
  Close #1

  MsgBox pFile 
```

我运行我的 VBA 代码，但由于不清楚的原因 pFile 没有得到文件中行的内容，txt 和 MsgBox 打印空框？

请告知为什么 pFile 得到 null ？以及我需要在代码中修复的内容，以便将 file.txt 中的行放入 pfile 参数中

*   备注如果我从该行中删除引号，则 pfile 将从文件中获取该行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T11:47:04.897

在 的[文档](http://msdn.microsoft.com/en-us/library/office/gg264519.aspx)中`Input #`，它指出：

> 您不应编写包含嵌入引号的字符串，例如“1,2”“X”以用于 Input # 语句： Input # 将此字符串解析为两个完整且单独的字符串。

所以这里发生的是你的字符串被解析成三个单独的字符串，因为你只使用一个变量作为参数，`Input #`所以它只包含第一个（空）字符串。将您的代码稍微更改为以下内容：

```
Dim pFile As String
Dim pFile2 As String
Dim pFile3 As String

Open "D:\file.txt" For Input As #1
Input #1, pFile, pFile2, pFile3
Close #1 
```

结果如下：

```
pfile: (empty)
pfile2: \\server1\pc1\targetG0\source-pc\pkgs.gz
pfile3: (empty) 
```

如果你不能使用它，那么替代方法可能是使用`Line Input #`语句（[链接](http://msdn.microsoft.com/en-us/library/office/gg264130.aspx)），它的工作原理与它类似，`Input #`只是它不像分隔行（即由于逗号/分隔符）`Input #`。下面的代码片段：

```
Dim pFile As String

Open "D:\file.txt" For Input As #1
Line Input #1, pFile
Close #1 
```

结果是：

```
pfile: """\\server1\pc1\targetG0\source-pc\pkgs.gz""" 
```

然后您可以根据自己的要求进行修改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:21:24.060

我总是将 Scripting.FileSystemObject 用于涉及文件系统的所有操作，包括 I/O：

```
Dim fs As Object
Set fs = CreateObject("Scripting.FileSystemObject")
Dim f As Object
Set f = fs.OpenTextFile("D:\file.txt")
Dim s As String
s = f.ReadLine() 
```

有`OpenTextFile`很多可选参数，[请参见此处](http://msdn.microsoft.com/en-us/library/aa265347%28v=vs.60%29.aspx)，您可以在其中指定文件是否打开以进行读/写，是否应在访问时创建，是否为 Unicode (UTF16) 等。

如果我在您提供的字符串上运行您的代码，我会遇到与您相同的问题。不过，带有 OpenTextFile 的代码运行正常。

# iphone - 如何在 iOS 的运行时创建动态标签和按钮？

> ID：11758050
> 
> 赞同：0
> 
> 时间：2012-08-01T11:15:34.187
> 
> 标签：iphone, ios, button, label, selection

我必须创建一个始终居中对齐的标签和按钮，用户将以任何顺序选择不同的项目，并且每当用户选择一个选项时，它应该显示在带有标签和十字按钮的行中。当用户点击十字按钮时，该选项将被取消选择，剩余的标签和按钮将设置它们的位置在中心。

您可能会通过以下图片获得一个好主意![在此处输入图像描述](../Images/76f92f1ebda8fd3f650c497f5ae6e15b.png)

![在此处输入图像描述](../Images/aa304f1c7ef30f740d866d2c09677df9.png) ![在此处输入图像描述](../Images/2e7ae8e7d942f2512f5843e085f8c8bb.png) 用“X”按钮查看“她的”。这里所有选定的选项都会出现

请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:07:56.493

因为我就是一个很酷的人，所以我决定为你花一些时间来解决这个问题:)

从我的 Dropbox 下载一个示例：http: [//dl.dropbox.com/u/6487838/FSButtonLabelTest.zip](http://dl.dropbox.com/u/6487838/FSButtonLabelTest.zip)

今天晚些时候我会在这里稍微解释一下代码。

**编辑：**添加了一些动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:24:39.973

添加标签

```
UILabel *myLabel  =  [[UILabel alloc]init];
myLabel.frame     =  CGRectMake(50,100,100,20);
myLabel.text      =  @"Your_Text";
[self.view addSubview:myLabel]; 
```

添加带有图像的自定义按钮

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
myButton.frame     =  CGRectMake(210, 100, 20, 20);
[myButton setImage:[UIImage imageNamed:@"cross.png"] forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(removeFunction) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:myButton]; 
```

用您的功能替换按钮目标中的 removeFunction .. 如果您不确定按钮或标签的坐标，请先进入 IB 并将按钮放置在您想要的位置，然后在右侧检查坐标显示尺寸检查器中的按钮并在代码中使用这些坐标，这将使您对以编程方式添加按钮后的按钮位置有一个公平的了解......希望这会对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:24:24.890

```
 UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(x, y, width, height)];
    UIButton *btn =[[UIButton alloc]initWithFrame:CGRectMake(50,50,200,200)];
    [self.view addSubview:btn];
    [self.view addSubview:label]; 
```

# iphone - 什么是 NSKeyedUnarchiver？

> ID：11758053
> 
> 赞同：0
> 
> 时间：2012-08-01T11:15:48.840
> 
> 标签：iphone, objective-c, ios, xcode

我有一个表格视图。我想向其中添加数据。我已经上网并找到了一些示例代码。然而，他们中的许多人都在使用 NSKeyedUnarchiver （编码、解码）。为什么我们需要这样做？有什么具体原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:18:48.950

当您对某个类有疑问时，最好查看 Apple 文档。这直接来自文档，我希望它能为您清除一些东西：

> NSKeyedArchiver 是 NSCoder 的一个具体子类，它提供了一种将对象（和标量值）编码为可以存储在文件中的与体系结构无关的格式的方法。当您归档一组对象时，每个对象的类信息和实例变量都会写入归档。NSKeyedArchiver 的伴生类 NSKeyedUnarchiver 解码存档中的数据并创建一组与原始集合等效的对象。
> 
> 键控存档与非键控存档的不同之处在于，编码到存档中的所有对象和值都是给定的名称或键。在解码非键控档案时，必须以与编码相同的顺序对值进行解码。在对键控存档进行解码时，由于值是按名称请求的，因此值可能被解码为乱序或根本不解码。因此，键控档案为向前和向后兼容性提供了更好的支持。
> 
> 赋予编码值的键必须仅在当前正在编码的对象范围内是唯一的。带键存档是分层的，因此对象 A 用于对其实例变量进行编码的键与对象 B 使用的键不冲突，即使 A 和 B 是同一类的实例。然而，在单个对象中，子类使用的键可能与其超类中使用的键发生冲突。
> 
> NSArchiver 对象可以将归档数据写入文件或您提供的可变数据对象（NSMutableData 的一个实例）。

[自己看更多](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:26:40.180

这是一种在应用程序中保存和恢复数据的方法。在 iOS 中有几种存储和检索数据的方法；核心数据、SQLite、plists。`NSKeyedArchiver`是一个易于理解且易于使用的数据持久化类。我想说你看到它的原因是因为它对于初学者来说是一个简单的概念。其他数据持久性方法不太容易理解。

# knockout.js - 我如何让 KO 验证框架从头开始装饰？

> ID：11758054
> 
> 赞同：2
> 
> 时间：2012-08-01T11:15:50.823
> 
> 标签：knockout.js, knockout-validation

请看这个简单的小提琴

[http://jsfiddle.net/75qSD/](http://jsfiddle.net/75qSD/)

我希望它从一开始就将元素装饰为无效，就像现在你首先必须在文本框中写一些东西然后将其删除以显示验证

edti：我知道你可以通过代码来实现，你可以通过配置来实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:20:07.867

看一看：

[http://jsfiddle.net/75qSD/1/](http://jsfiddle.net/75qSD/1/)

我添加了以下行：

```
 this.errors = ko.validation.group(this);
   this.errors.showAllMessages(); 
```

# iphone - HUD 图层未添加到我的场景中

> ID：11758056
> 
> 赞同：0
> 
> 时间：2012-08-01T11:16:06.443
> 
> 标签：iphone, cocos2d-iphone, cclayer

我有一个 CCScene，它已经保存了我的 gameLayer，我正在尝试在其上添加 HUD 层。但是 HUD 层没有添加到我的场景中，我可以这么说，因为我已经在 HUD 层上设置了 CCLabel，当我运行时我的项目，我看不到那个标签。

这就是我正在做的事情：在我的gameLayer中：

```
+(id) scene
{

   CCScene *scene = [CCScene node];

   GameScreen *layer = [GameScreen node];
   [scene addChild: layer];

    HUDclass * otherLayer = [HUDclass node];
    [scene addChild:otherLayer];

    layer.HC = otherLayer;// HC is reference to my HUD layer in @Interface of gameLayer
    return scene;
} 
```

然后在我的 HUD 层中，我刚刚在它的 init 方法中添加了一个 CCLabelTTF，如下所示：

```
-(id)init {

    if ((self = [super init])) {

    CCLabelTTF * label = [CCLabelTTF labelWithString:@"IN WEAPON CLASS" fontName:@"Arial"    fontSize:15];
     label.position = ccp(240,160);
     [self addChild:label];

    }

    return  self;
} 
```

但是现在当我运行我的项目时，我看不到那个标签，我在这里做错了什么......？

有任何想法吗.. ？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:22:48.903

嗯，您没有将 HUD 实例添加到场景中。尝试 ：

```
 HUDclass * otherLayer = [HUDclass node];
    [scene addChild:otherLayer];

    layer.HC = otherLayer; 
```

# java - Android NullPointerException 运行时错误

> ID：11758068
> 
> 赞同：0
> 
> 时间：2012-08-01T11:16:59.980
> 
> 标签：java, android, xml

我正在开发一个基于 android 开发人员教程的简单相机应用程序，但我在运行它时遇到了一些问题。

这是我的 LogCat 打印输出。

![在此处输入图像描述](../Images/829f8b166c62d91ee74481b92f99c795.png)

现在我已经追踪到 NullPointerException 位于 CameraPreview 的第 30 行，正如您可能已经想到的那样，CameraPreview 的代码如下。我可以用 Java 编写代码，并且知道 NullPointer 是指存在尚未创建但据我所知已经创建的东西。

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback{
private SurfaceHolder mHolder;
private Camera mCamera;
private static final String TAG = "Preview";

@SuppressWarnings("deprecation")
public CameraPreview(Context context, Camera camera){
    super(context);
    mCamera = camera;

    //Install callback to get notifications from the app
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); //deprecated but required for Android Version 3.0 and under
}

public void surfaceCreated(SurfaceHolder holder) {
    //Surface been created now need to tell app where to draw PREVIEW
            try{
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
            catch(IOException e){
                Log.d(TAG, "Camera preview error: " + e.getMessage());
            }

} 
```

第 30 行是这里的代码片段 -`mCamera.setPreviewDisplay(holder);`

据我所知，“全局”变量中有一个 mCamera 实例`private Camera mCamera`。

有人有什么想法吗？抱歉，这是一个尽可能格式化的长问题。

谢谢，丹

PS 我知道这个类中还需要其他方法，这只是“问题片段”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:23:39.487

在哪里`CameraPreview`创建？

看起来像`new CameraPreview(context, null)`。

你必须确保`CameraPreview`得到的不是`null`相机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:25:05.417

```
public CameraPreview(Context context, Camera camera){
    super(context);
    mCamera = camera; 
```

看起来像`camera`被传递给`CameraPreview`null。

* * *

确保您的清单中有这些：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />  
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

还有，你的`getCameraInstance()`方法是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:26:25.300

用于`Camera android.hardware.Camera.open()`在您开始活动时初始化相机。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T11:27:42.407

mCamera = 相机。

在这一行，您的“相机”对象可能为空......所以先检查一下......就像

如果（相机==空）{

Log.e("Camera","我的相机是空的...");

}

试试这个......这样你就可以找到 nullPointer 出现的确切位置......

# c# - 队列多线程方法执行

> ID：11758072
> 
> 赞同：3
> 
> 时间：2012-08-01T11:17:07.973
> 
> 标签：c#, winforms, queue, task-parallel-library

所有，我有一个名为的通用方法`TaskSpin`，在这个方法中我启动了`Task`一个关联的`continutation`

```
public TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    asyncTask = Task.Factory.StartNew<bool>(() => 
        asyncMethod(uiScheduler, methodParameters));

    asyncTask.ContinueWith(task =>
    {
        // Finish the processing update UI etc.
    }
    ...
} 
```

现在的问题是我想使用 运行多个方法`TaskSpin`，但我需要限制方法一次运行一个。所以 foreach 行中的一些`DataGridView`我想做类似的事情

```
foreach (DataGridViewRow row in this.DataGridViewUrg.Rows)
    TaskSpin(Run(DrgDataRowInfo(row.Index))); 
```

但是，在上述方法中，该`TaskSpin`方法将立即退出，从而导致`TaskSpin`在另一个线程上分离下一个方法。这不好，因为该`Run`方法写入一组通用文件。将这些作业排队的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:29:40.567

您可以实现自己的任务队列，并在每个任务完成后继续处理队列，直到它为空，例如

```
using TaskPair = KeyValuePair<Func, object[]>;
...

private Queue<TaskPair> taskQueue;
...

// generate the queue of tasks
this.taskQueue = new Queue<TaskPair>(this.DataGridViewUrg.Rows);
foreach (DataGridViewRow row in this.DataGridViewUrg.Rows)
{
    var task = new TaskPair(Run(DrgDataRowInfo(row.Index)), /* params */);
    this.taskQueue.Enqueue(task);
}
// initiate queue processing
ProcessNextTask();

....
private void ProcessNextTask()
{
    try
    {
        var item = this.taskQueue.Dequeue();
        TaskSpin(item.Key, item.Value);
    }
    catch(InvalidOperationException)
    {
        // queue is empty
    }   
}

....
// Execute task and process next in queue (if applicable)
public TaskSpin(Func asyncMethod, object[] methodParameters)           
{            
    ...           
    asyncTask = Task.Factory.StartNew<bool>(() =>            
        asyncMethod(uiScheduler, methodParameters));           

    asyncTask.ContinueWith(task =>           
    {           
        // Finish the processing update UI etc.
        ProcessNextTask();           
    }  
    ...                 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:37:53.660

您可以使用**延续链**来实现任务的“队列” 。这很容易阅读和理解，并且可以按预期工作。此外，“排队”逻辑现在包含在您的 TaskSpin 中。

```
private Task lastTask;

public void TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    if(lastTask == null)
        asyncTask = Task.Factory.StartNew<bool>(() => 
            asyncMethod(uiScheduler, methodParameters));
    else 
        asyncTask = lastTask.ContinueWith(t => 
            asyncMethod(uiScheduler, methodParameters));

    lastTask = asyncTask;

    asyncTask.ContinueWith(task =>
    {
        // Finish the processing update UI etc.
    }
    ...
} 
```

这将确保每个新任务仅在最后一个任务完成后运行。

**编辑：** 如果您希望您的 UI 任务包含在顺序队列中，一个简单的更改：

```
private Task lastTask;

public void TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    if(lastTask == null)
        asyncTask = Task.Factory.StartNew<bool>(() => 
            asyncMethod(uiScheduler, methodParameters));
    else 
        asyncTask = lastTask.ContinueWith(t => 
            asyncMethod(uiScheduler, methodParameters));

    lastTask = asyncTask.ContinueWith(task =>
    {
        // Finish the processing update UI etc.
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:32:25.443

您可能应该考虑通过在继续之前锁定 Run 所需的对象来实现同步。你会像下面这样：

```
// locking object for write synchronization
object syncObj;

...

public TaskSpin(Func asyncMethod, object[] methodParameters)
{
    ...
    asyncTask = Task.Factory.StartNew<bool>(() => 
        asyncMethod(uiScheduler, methodParameters));

    asyncTask.ContinueWith(task =>
    {
        lock(syncObj)
        {
            // Finish the processing update UI etc.
        }
    }
    ...
}

public void Run()
{
    lock(syncObj)
    {
        // write results to common file
    }
} 
```

虽然，我很确定这不能保证任务按顺序完成。这听起来对你来说可能很重要，所以我的建议可能不是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:48:13.203

如果您的目标是对 UI 进行序列化更新，则无论如何都必须这样做，因为 UI 只能从 GUI 线程更新。幸运的是，已经内置了执行此操作的机制。

我注意到您正在使用winforms。鉴于此，我建议使用诸如[SafeInvoke 之](https://stackoverflow.com/questions/714666/is-it-appropriate-to-extend-control-to-provide-consistently-safe-invoke-begininv)类的机制。这将排队代码以在 GUI 线程上执行。

# c++ - 如何专门化模板函数以使其接受将 char 数组作为参数传递？

> ID：11758076
> 
> 赞同：7
> 
> 时间：2012-08-01T11:17:16.740
> 
> 标签：c++, templates

```
// problem.cpp:
#include <string>

template<typename T> void func(const T & v);

int main() {
        int i;
        float f;
        char * cp;
        char ca[4];

        func(i);
        func(f);
        func(cp);
        func(std::string("std::string"));
        func(ca);
        func("string_literal");

        return 0;
}

// problem2.cpp
#include <string>

template<typename T> void func(const T & v);

// undefined reference to `void func<int>(int const&)'
template<> void func<int>(const int & v) { }

// undefined reference to `void func<float>(float const&)'
template<> void func<float>(const float & v) { }

// undefined reference to `void func<char*>(char* const&)'
template<> void func<char *>(char * const & v) { }

// void func<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)
template<> void func<std::string>(std::string const & v) { }

// undefined reference to `void func<char [4]>(char const (&) [4])'
// ???

// undefined reference to `void func<char [15]>(char const (&) [15])'
// ??? 
```

找到了两个解决方案：

a）在问题2.cpp中：

```
template<> void func<char[4]>(const char (&v)[4]) { }
template<> void func<char[15]>(const char (&v)[15]) { } 
```

b）在problem.cpp中：

```
template<typename T, unsigned N> void func(const T (&v)[N]) { func(v+0); }
and then in problem2.cpp, add the newly missing
template<> void func<const char *>(const char * const & v) { } 
```

抱歉，阿卡帕，不得不再次编辑以澄清它们是两个独立的解决方案......

akappa：我向这个问题添加内容的唯一方法是编辑它。我既不能评论也不能添加答案。可能与»Stack Overflow 需要来自另一个域的外部 JavaScript，该域被阻止或无法加载有关。« 我不知道如何解决，因为我不知道 SO 正试图在那里告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:13:26.250

函数特化很棘手，因为它们必须与参数的类型*完全*匹配。在数组的情况下（字符串文字也是数组），编译器将执行类型推导并找出确切的类型是什么，然后它将在程序中查找该特定符号。

特别是`ca`is的类型`char[4]`，所以在调用模板时，推导的类型是`T == char[4]`，它期望找到的函数签名是`void func<>( const char (&)[4] )` 在你的两个解决方案中，它们是完全不同的方法。在第一种情况下，您正在为使用的特定类型专门化模板。这将变得很痛苦，因为对于您使用的每个新字符串文字大小或类型，您都需要手动添加一个特化。顺便说一句，这就是为什么应该（通常）在标题中定义模板的原因，这样您就不需要在显式实例化中*命名*所有可能的模板参数^((*)) ...

第二种解决方案完全不同。在这种情况下，您正在创建第二个*不相关*的（在某种程度上）基本模板。该基本模板正在获取指向数组第一个元素的指针并用它调用原始模板，从而有效地更改类型（并在此过程中丢失信息：大小现在丢失了）。此时，所有使用数组的调用都将匹配第二个模板，并作为对带有指针的原始模板的调用转发，从而减少了对数组大小进行专门化的需要（编译器会解析这些专门化）。

另请注意，如果您只想允许传递 char 数组，则调度程序模板不需要接受所有类型，它可以有一个非类型参数：

```
template <std::size_t N>
void f( const char (&a)[N] ) { f( &a[0] ); } 
```

加起来：

避免函数的模板特化，因为这些处理起来很麻烦。数组的类型包括大小，这反过来意味着您需要*专门*针对每个潜在的数组大小。或者，您可以添加一个辅助模板，该模板将分派到您的原始模板，执行到指针的转换。

* * *

* 请注意，如果每个和所有特化的实现都是相同的，您可以避免特化（和复制代码），同时通过在 .cpp 中提供模板的定义来保持相同的行为，然后*手动实例化*模板：

```
template <typename T> void func( T const & ) {
   // code goes here
}
template void func<int>( int const & );
template void func<double>( double const & );
//... 
```

# javascript - 如何使用 AngularJS 获取 url 参数

> ID：11758079
> 
> 赞同：204
> 
> 时间：2012-08-01T11:17:27.967
> 
> 标签：javascript, angularjs, routeparams

HTML 源代码

```
<div ng-app="">
    <div ng-controller="test">
      <div ng-address-bar browser="html5"></div>
      <br><br>
      $location.url() = {{$location.url()}}<br>
      $location.search() = {{$location.search('keyword')}}<br>
      $location.hash() = {{$location.hash()}}<br>     
      keyword valus is={{loc}} and ={{loc1}}
  </div>
</div> 
```

AngularJS 源代码

```
<script>
function test($scope, $location) {
  $scope.$location = $location;
  $scope.ur = $scope.$location.url('www.html.com/x.html?keyword=test#/x/u');
  $scope.loc1 = $scope.$location.search().keyword ;    
    if($location.url().indexOf('keyword') > -1){    
        $scope.loc= $location.url().split('=')[1];
        $scope.loc = $scope.loc.split("#")[0]        
    }
  }
 </script> 
```

这里的变量`loc`和`loc1`都返回*test*作为上述 URL 的结果。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2013-05-21T14:26:23.350

我知道这是一个老问题，但考虑到稀疏的 Angular 文档，我花了一些时间来解决这个问题。RouteProvider和**routeParams**是要走的路**。**路由将 URL 连接到您的 Controller/View，并且 routeParams 可以传递到控制器中。

 **查看[Angular 种子](https://github.com/angular/angular-seed)项目。在 app.js 中，您会找到路由提供程序的示例。要使用参数，只需像这样附加它们：

```
$routeProvider.when('/view1/:param1/:param2', {
    templateUrl: 'partials/partial1.html',    
    controller: 'MyCtrl1'
}); 
```

然后在你的控制器中注入 $routeParams:

```
.controller('MyCtrl1', ['$scope','$routeParams', function($scope, $routeParams) {
  var param1 = $routeParams.param1;
  var param2 = $routeParams.param2;
  ...
}]); 
```

通过这种方法，您可以使用带有 url 的参数，例如：“ [http://www.example.com/view1/param1/param2](http://www.example.com/view1/param1/param2) ”

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2013-10-20T19:33:02.070

虽然路由确实是应用程序级 URL 解析的一个很好的解决方案，但您可能希望使用更底层的`$location`服务，如注入到您自己的服务或控制器中：

```
var paramValue = $location.search().myParam; 
```

这种简单的语法适用于`http://example.com/path?myParam=paramValue`. 但是，仅当您`$locationProvider`之前在 HTML 5 模式中配置过：

```
$locationProvider.html5Mode(true); 
```

否则，请查看[http://example.com/#!/path?myParam=someValue](http://example.com/#!/path?myParam=someValue) "Hashbang" 语法，它有点复杂，但有利于在旧浏览器（非 HTML 5 兼容）上工作出色地。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-03-24T01:20:39.210

如果你使用 ngRoute，你可以注入`$routeParams`你的控制器

[http://docs.angularjs.org/api/ngRoute/service/$routeParams](http://docs.angularjs.org/api/ngRoute/service/$routeParams)

如果你使用 angular-ui-router，你可以注入`$stateParams`

[https://github.com/angular-ui/ui-router/wiki/URL-Routing](https://github.com/angular-ui/ui-router/wiki/URL-Routing)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-05-30T09:01:54.923

我找到了如何使用 $location.search() 从 URL 获取参数的解决方案

首先在 URL 中，你需要在参数前加上语法“#”，就像这个例子一样

`"http://www.example.com/page#?key=value"`

然后在您的控制器中，您将 $location 放入函数中并使用 $location.search() 获取 URL 参数

```
.controller('yourController', ['$scope', function($scope, $location) {

     var param1 = $location.search().param1; //Get parameter from URL

}]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-17T15:25:01.037

```
function GetURLParameter(parameter) {
        var url;
        var search;
        var parsed;
        var count;
        var loop;
        var searchPhrase;
        url = window.location.href;
        search = url.indexOf("?");
        if (search < 0) {
            return "";
        }
        searchPhrase = parameter + "=";
        parsed = url.substr(search+1).split("&");
        count = parsed.length;
        for(loop=0;loop<count;loop++) {
            if (parsed[loop].substr(0,searchPhrase.length)==searchPhrase) {
                return decodeURI(parsed[loop].substr(searchPhrase.length));
            }
        }
        return "";
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-26T00:11:21.190

如果已经发布的答案没有帮助，可以尝试使用 $location.search().myParam; 使用 URL [http://example.domain#?myParam=paramValue](http://example.domain#?myParam=paramValue)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-17T12:32:06.013

**将 angularjs 与 express 一起使用时**

在我的示例中，我使用 angularjs 和 express 进行路由，因此使用 $routeParams 会弄乱我的路由。我使用以下代码来获得我所期望的：

```
const getParameters = (temp, path) => {
  const parameters = {};
  const tempParts = temp.split('/');
  const pathParts = path.split('/');
  for (let i = 0; i < tempParts.length; i++) {
    const element = tempParts[i];
    if(element.startsWith(':')) {
      const key = element.substring(1,element.length);
      parameters[key] = pathParts[i];
    }
  }
  return parameters;
}; 
```

这将接收一个 URL 模板和给定位置的路径。我只是用它来称呼它：

```
const params = getParameters('/:table/:id/visit/:place_id/on/:interval/something', $location.path()); 
```

把它们放在一起我的控制器是：

```
.controller('TestController', ['$scope', function($scope, $window) {
  const getParameters = (temp, path) => {
    const parameters = {};
    const tempParts = temp.split('/');
    const pathParts = path.split('/');
    for (let i = 0; i < tempParts.length; i++) {
      const element = tempParts[i];
      if(element.startsWith(':')) {
        const key = element.substring(1,element.length);
        parameters[key] = pathParts[i];
      }
    }
    return parameters;
  };

const params = getParameters('/:table/:id/visit/:place_id/on/:interval/something', $window.location.pathname);
}]); 
```

结果将是：

```
{ table: "users", id: "1", place_id: "43", interval: "week" } 
```

希望这可以帮助那里的人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-27T13:52:20.660

**获取url值的简单方法**

```
First add # to url (e:g -  test.html#key=value)

url in browser (https://stackover.....king-angularjs-1-5#?brand=stackoverflow)

var url = window.location.href 

(output: url = "https://stackover.....king-angularjs-1-5#?brand=stackoverflow")

url.split('=').pop()
output "stackoverflow" 
```**

# javascript - 如何使用 qtip 触发弹出窗口

> ID：11758080
> 
> 赞同：1
> 
> 时间：2012-08-01T11:17:32.880
> 
> 标签：javascript, jquery, dhtml, qtip

我有以下 qtip 代码，当单击链接时会产生一个弹出窗口。有没有办法使用 jquery 我可以从代码中提取 id 等于“test2”的链接是否被点击？

非常感谢，詹姆斯

```
<ul>
<li><a id="test1" href="">example 1</a></li>
<li class="PopRequired"><a id="test2" href="">example 2</a></li>
<li><a id="test3" href="">example 3</a></li>
<li><a id="test4" href="">example 4</a></li>
</ul>

$('ul li.PopRequired').each(function () {
    $(this).qtip(
    {
        content: {
            text: '<a href="">example text here',
            title: {
                text: true,
                button: '<img src="/images/close_Icon.gif">'
            }
        },
        position: {
            corner: {
                target: 'rightMiddle',
                tooltip: 'leftMiddle'
            },
            adjust: {
                screen: true
            }
        },
        show: {
            when: 'click',
            solo: true
        },
        hide: 'unfocus',
        style: {
            tip: true,
            border: {
                width: 0,
                radius: 4,
            },
            width: 264,
            height: 195,
            title: { 
                background: '#ffffff'
            },
            lineHeight: '16px'
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:09:36.647

您可以在 a-tags 上放置一个点击处理程序，并使用以下方法轻松获取 ID

```
 jQuery(this).attr('id') 
```

为了检索属性值。

但是，为所有锚标记分配 ID 可能会带来限制，因为它可能只出现一次。

也许更好的是，您还可以使用数据属性（在您的情况下为 ID）与您的元素一起存储您的 id/ref。它将存储为 data-x 属性。

例如：

```
 <a href="#" data-uniqueid="ABC">my link</a> 
```

您可以使用 $(this).data('uniqueid') 检索的 ID ABC；此刻有人点击了链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:43:12.763

我不确定我是否真的得到你想要的。

我为您准备了一个 jsFiddle ( [http://jsfiddle.net/neysor/YCTzb/](http://jsfiddle.net/neysor/YCTzb/) ) 集合，它展示了如何在 qtip 工具提示中选择数据。全部使用[qTip2 库](http://craigsworks.com/projects/qtip2/)

### HTML

```
<a id="id1" href="#">Text 1</a>
<a id="id2" href="#">Text 2</a>
<a id="id3" href="#">Text 3</a>
<button data-info="This is">Text 4</button>
<button data-info="with more">Text 5</button>
<button data-info="Information">Text 6</button> 
```

### Javascript

```
$(document).ready(function() {
    $('a').button().qtip({
        content: {
            text: function() {
                return "Text: " + $(this).text() + "<br>ID: " + $(this).attr("id");
            },
            title: {
                text: 'Modal qTip for Links',
                button: true
            }
        },
        show: {
            event: 'click',
            solo: true,
            modal: true
        },
        position: {
            my: 'center', // ...at the center of the viewport
            at: 'center',
            target: $(window)
        },
        hide: false,
        style: 'ui-tooltip-light ui-tooltip-rounded'
    });
    $('button').button().qtip({
        content: {
            text: function() {
                return $(this).attr("data-info");
            },
            title: {
                text: 'Modal qTip for Buttons',
                button: true
            }
        },
        show: {
            event: 'click',
            solo: true,
            modal: true
        },
        position: {
            my: 'center', // ...at the center of the viewport
            at: 'center',
            target: $(window)
        },
        hide: false,
        style: 'ui-tooltip-light ui-tooltip-rounded'
    }); 
```

});​</p>

# javascript - JQUERY / JAVASCRIPT - 从 .find 命令中获取多个值

> ID：11758081
> 
> 赞同：0
> 
> 时间：2012-08-01T11:17:48.093
> 
> 标签：javascript, jquery, ajax, jquery-ui

我有一个带有表单的 JSP 页面。当我提交表单时，它会构建并生成一个 JSON 字符串，我用它来进行 AJAX 发布。

但是我有一个问题，我需要从表单中获取多个值，并且我正在使用以下方法来执行此操作：

```
 .find('input[name=item1])
 .not('input[type=hidden]') 
```

如何执行此操作以获取名称为 item1、item2 和 item3 的输入？

我试过这个，但它没有工作？

```
 .find('input[name=item1][name=item2][name=item3]') 
```

下面是我的代码：

```
 // Create JSON based data object
    $.fn.serializeObject = function()
    {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });

        return o;
    };

    // Form Submission
    $('#form').submit( function() {

        // Create data array, used for building request message
        var data = {
            request: { 
                requestType: "request",
                fields: [ { 
                    itemX1 : '1',
                    itemX2 : '2',
                    itemX3 : '3'
                } ] 
            }
        };  

        // Create field array based variables for request message
        var fields = {
            fields: [ { 
                itemX1 : null,
                itemX2 : null,
                itemX3 : null
            } ] 
        };              

        // Get reqired data from the form submitted
        fields = $('#form')
        //.find('input')
        .find('input[name=lmBtId][name=my]')  
        .not('input[type=hidden]')    
        .serializeObject();

        // Set the field array variables with data
        fields.itemX1 = '1';
        fields.itemX2 = '2';
        fields.itemX3 = '3';

        // Update data array with newly updated field array
        data.request.fields = [fields];
        var finalData = JSON.stringify(data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:20:43.473

你可以试试这个

```
.find('input[name^=item]'); 
```

它将选择名称以 item 开头的所有输入。

如果包含任何东西，您可以获得一个属性值，然后您可以使用

```
.find('selector[propname*=containingvalue']); 
```

如果要选择以 then 结尾的值

```
.find('selector[propname$=endwith']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:20:56.167

```
$('input[name="test"], input[name="test2"]').each(function() {
    alert(this.value);
});​ 
```

这是一个[**JSFIDDLE**](http://jsfiddle.net/hQq8B/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T11:21:13.470

此页面将提供有关选择器的信息，

[http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/)

请试试这个

```
.find('input[name=item1],[name=item2],[name=item3]') 
```

并为他们每个人添加一些东西，

```
.each(function(){
//code here
}); 
```

# cordova - SENCHA：如何通过单击 SENCHA touch 中的添加/删除按钮动态添加/删除文本字段

> ID：11758082
> 
> 赞同：0
> 
> 时间：2012-08-01T11:17:53.777
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2, sencha-architect

我已经使用 Sencha touch 实现了一个功能。

在那我设计了一个视图，在 VIEW 中的文件中有 2 个按钮**ADD、DELETE 。**

AQnd在 CONTROLLER 文件中为按钮添加相应的**控制器**

控制器适用于**控制台输出**

但是我需要通过动态点击**添加**按钮来**添加任何一种表单**，例如文本字段或字段集的文本区域

 ****动态点击**删除**按钮时**删除一个表单。****

 ****查看文件：**

```
Ext.define('MyApp.view.MainPanel', {
           extend: 'Ext.form.Panel',

           config: {
           items: [
                   {
                   xtype: 'button',
                   id: 'addButton',
                   height: 33,
                   left: '',
                   margin: '500px',
                   padding: '',
                   right: '400px',
                   ui: 'confirm-round',
                   width: 100,
                   text: 'Add'
               },

                   {
                   xtype: 'button',
                   id: 'deleteButton',
                   height: 33,
                   margin: '500px',
                   right: '296px',
                    ui: 'decline-round',
                   width: 100,
                   text: 'Delete'
                   }
                   ]
           }}); 
```

![在此处输入图像描述](../Images/8856fd9b8c4859b052375c8061af8c23.png)

**控制器文件：**

```
Ext.define('MyApp.controller.MainController', {
    extend: 'Ext.app.Controller',
    config: {
        views: [
            'MainPanel'
        ],

    },

    init: function() {
           this.control({

                        '#addButton': {
                        tap: function() {

                         console.log('Add field');

                        }
                        },

                        '#deleteButton': {
                        tap: function() {

                        console.log('Delete field');

                        }
                        },
        });
    }, 
```

输出：![在此处输入图像描述](../Images/3c35342e5969d30e43ecf7c389c5d506.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:35:14.370

这听起来几乎正是您想要做的：[http ://www.swarmonline.com/2011/05/dynamic-sencha-touch-forms-part-3-adding-form-fields-on-the-fly /](http://www.swarmonline.com/2011/05/dynamic-sencha-touch-forms-part-3-adding-form-fields-on-the-fly/)

但是，它是为 Sencha Touch 1.0 编写的，所以对于 2.0 的解决方案略有不同...

首先，将您的按钮放在一个字段集中：

**查看文件**

```
Ext.define('MyApp.view.MainPanel', {
       extend: 'Ext.form.Panel',

       config: {
           items: [
                {
           xtype: 'fieldset',
                   items: [
                       /** your two button configs here **/
                   ]
                }
       }
 }); 
```

现在您可以从按钮点击处理程序访问字段集并添加字段。请记住将您的按钮作为参数添加到处理程序。

```
tap: function(button){
    button.up('fieldset').add({
        xtype: 'textfield',
        name: 'MyField-' + button.up('fieldset').length
    });
} 
```

您还可以添加其他选项，例如添加`placeholder`到您的字段配置中。

编辑：

同样，要删除字段，只需使用 remove 方法（http://docs.sencha.com/touch/2-0/#!/api/Ext.Container-method-remove）：

```
 button.up('fieldset').remove(button.up('fieldset').items.items[0]); // remove 1st item 
```****

# php - 为什么我的脚本不包含查询字符串和参数？

> ID：11758089
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:18:39.503
> 
> 标签：php, include, require-once

简单的说：

```
<? include("open.php"); ?> 
```

VS

```
<? include("open.php?page=about"); ?> 
```

VS

```
<? $x="varToPass"; include("open.php"); ?> 
```

为什么不能这样做，这肯定应该被编程进去。如果不能，我可以编辑原始/核心 PHP C 文件来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:27:47.327

简单的答案。不需要像这样传递参数。

`include 'open.php?page=about&something=true&more=rubbish';`

相对

```
$page = 'about';
$something = true;
$more = 'rubbish';

include 'open.php'; 
```

我认为很容易看出哪个更具可读性，并且它们都完全实现了您想要做的事情。

事实是，该`include`语句在您引用它时**从字面上包含了指定文件中的代码。**

您可以将执行包含的文件视为`open.php`在您编写包含语句的确切位置具有源。

**编辑：**

回答你问题的第二部分。是的，您可以修改源代码并实现这一点，但这将是一个毫无意义的练习。

**编辑2：**

我还想到，也许您认为您想通过 URL 包含文件。

例如`include 'http://127.0.0.1/open.php?page=about'`

在这种情况下，这是完全可能的，因为`http`将调用流包装器，并将变量传递给您请求的文件。

**默认情况下禁用**此行为，因为它会带来巨大的安全风险。

`allow_url_include`您可以通过编辑 中的值来打开它`php.ini`。但我建议你不要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:23:06.273

当您包含文件时，它们将位于同一范围内，因此您可以**重用变量**或**检索参数**：

```
<?php
    // index file
    $x = $_GET["x"];
    include 'file.php'; 
```

在**file.php**中，您可以执行以下操作：

```
<?php
    //include file
    if ($x != '') 
```

或者：

```
<?php
    //include file
    $x = $_GET["x"]; 
```

所以没有必要传递东西-

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T11:22:56.323

包括/要求是针对物理文件，而不是基于传入参数的文件的动态表示。

对于后者，您需要查看[cURL](http://php.net/manual/en/book.curl.php)。

# c# - 如何在伪代码中编写前置条件

> ID：11758090
> 
> 赞同：2
> 
> 时间：2012-08-01T11:18:42.030
> 
> 标签：c#, java, mysql, pseudocode, preconditions

我只是想知道是否有人知道如何在伪代码中表示前提条件，因为我环顾四周找不到任何关于该主题的内容。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:21:17.647

*根据定义*，伪代码不是形式化的代码。使用伪代码为 C# 方法定义前提条件的示例如下：

```
// Precondition: Object must have been initialized by calling init() or by
// manually setting properties X and Y such that X.Foo >= Y.Bar.
public void doUsefulWork() {
    ...
} 
```

显然，由于伪代码没有形式化，编译器无法对其进行验证。

*   *该方法的使用者*有责任确保满足先决条件，并且
*   *方法的开发人员*有责任承认更改前提条件（通常）是一项重大更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:23:36.657

我在这里看到两种可能性：

1.  如果您可以将您的条件表述为真实代码，我会尝试[使用断言编程](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)（或 .NET 等效的[Debug.Assert](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.assert%28v=vs.71%29.aspx)）。这样，您实际上可以在运行时检查您的条件`assert condition`

2.  如果不是这种情况，或者您根本不想这样做，您可以将前置条件和后置条件写入您的 JavaDoc。

    ```
    /**
     * @precondition: the connection has been established.
     * 
     * @postcondition: the schema is created.
     * 
     */ 
    ```

您甚至可以定义这些[JavaDoc 注释](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)，以便它们出现在 JavaDoc 生成的文档中。这样你就可以使用自然语言来定义你想要断言的内容。

您还可以更数学地表达您的前置条件和后置条件，以增加条件的简洁性，这可能会使它们更易于理解：

对于简单的数字比较，您当然可以使用`<`, `<=`, `>`,`>=`等。但是假设您想为 a 定义不变量，`Set`那么您可以将其表示为：

```
/**
  * @invariant: set == filterDuplicates(set)
  *
  */ 
```

从而利用假设/伪函数来表达您的条件。

如果您喜欢函数式语言，则可以进一步开发。我的数据结构和算法教授使用**Haskell**为新引入的数据结构定义前置条件、后置条件和不变量：

```
module TreeSets(TreeSet, 
                contains, add, remove, card, traverse)
where
data Ord t => TreeSet t = E | N (TreeSet t) t (TreeSet t)

inv E = True
inv(N l x r) = all(<x)(abs l) && all(>x)(abs r) &&
   inv l && inv r 
```

这真的取决于你为谁写这篇文章，因此我的建议是使用**自然语言**。每个人都可以理解，尤其是面向对象的程序最容易制定。

# mysql - Hibernate 在持久化对象时编码错误 [UTF-8]

> ID：11758094
> 
> 赞同：13
> 
> 时间：2012-08-01T11:18:54.590
> 
> 标签：mysql, spring, hibernate, spring-mvc, c3p0

在持久化我的模型对象时，我面临着 UTF-8 编码问题。在土耳其语中，“ **ı** ”是一个字母。UTF-8 编码中还包含一些其他土耳其语字符。当我坚持我的模型对象时，所有 ' **'**字符都坚持为 ' **?** ' 到数据库。我**在 Ubuntu Linux 64-bit OS 上使用 MySQL 5.5**。此外，我也已经将休眠和 c3p0 连接编码属性设置为 UTF-8。当我调试时，来自客户端的数据是真实的。

这是我的配置，如果有人可以帮助我，我会很高兴。

提前致谢。

* * *

**春季和休眠配置**

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource"><ref local="dataSource"/></property>
        <property name="packagesToScan" value="com.tk.dms.model" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.use_sql_comments">true</prop>
                <prop key="hibernate.format_sql">false</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.generate_statistics">true</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
                <prop key="hibernate.connection.useUnicode">true</prop>
                <!-- c3p0 properties -->
                <prop key="hibernate.c3p0.min_size">2</prop>
                <prop key="hibernate.c3p0.max_size">50</prop>
                <prop key="hibernate.c3p0.maxPoolSize">50</prop>
                <prop key="hibernate.c3p0.minPoolSize">2</prop>
                <prop key="hibernate.c3p0.initialPoolSize">2</prop>
                <prop key="hibernate.c3p0.timeout">300</prop>
                <prop key="hibernate.c3p0.max_statements">50</prop>                
            </props>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-02T07:16:30.967

尝试在数据源中设置编码

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName">
        <value>com.mysql.jdbc.Driver</value>
    </property>
    <property name="url">
        <value>jdbc:mysql://127.0.0.1:3306/databaseName?characterEncoding=UTF-8</value>
    </property>
    <property name="username">
        <value>?</value>
    </property>
</bean> 
```

您还确定来自表单的输入已正确编码吗？您在 Spring 应用程序中使用过滤器吗？在调试模式下运行应用程序并在持久化之前检查模型对象的字段。

过滤器应放置在您的 web.xml 文件中：

```
<filter>
    <filter-name>SetCharacterEncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SetCharacterEncodingFilter</filter-name>
    <url-pattern>*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T13:37:11.033

如果您已添加

> ?characterEncoding=UTF-8

因此，连接字符串的参数（在创建数据库和表之后），您需要重新创建数据库。实际上，在我的情况下，我重新创建了我的数据库：

> CREATE DATABASE dbname CHARACTER SET utf8 COLLATE utf8_general_ci;

或者

> alter database my_database default charset utf8 collat​​e utf8_general_ci;

请注意，我使用的是西里尔字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:23:05.180

检查 bean 中存储的数据是什么。你的 bean 是如何填充的？，是通过用户输入吗？，如果是，那么你将不得不在该页面中将编码写为 UTF-8，并将你的请求和响应参数更改为 UTF-8

# ssis - SSIS - 写入文本文件的 SQL 语句

> ID：11758096
> 
> 赞同：0
> 
> 时间：2012-08-01T11:18:59.247
> 
> 标签：ssis

我对 SSIS 比较陌生。我创建了一个包含许多控制流的 SSIS 包 (5)。每个控制流都包含一个数据流，该数据流写入平面文件（每个 1 个，因此总共有 5 个）。该过程运行良好，但是我注意到其中一个数据流还编写了 SQL 语句，即平面文件如下所示：

```
 SELECT id,name FROM Names 
    id,name 
    1,Ian 
    2,Craig
    3,Sarah 
```

为什么SQL语句写入文本文件即上面的第1行不应该写入文本文件。有地方设置吗？

# javascript - 欢乐连接：mysql中的javascript插入xml

> ID：11758101
> 
> 赞同：1
> 
> 时间：2012-08-01T11:19:20.180
> 
> 标签：javascript, mysql, xml, mirth

我是新手，java脚本，mysql的东西。我在 mirth 中设置了一个通道来读取文本文件并将其转换为 xml。它工作正常。我还尝试使用另一个通道中的数据库编写器将 xml 发送到 mysql 数据库。

这就是 javascript 代码的样子

```
var dbConn = DatabaseConnectionFactory.createDatabaseConnection('com.mysql.jdbc.Driver','jdbc:mysql://192.168.1.4:3306/mirth','root','');
var result = dbConn.executeUpdate('INSERT INTO jon (xml) values ('1234')');
dbConn.close(); 
```

上面的代码在 jon 表中插入一条值为 '1234' 的记录。但是如何将我通过 source:channel reader 读取的 xml 发送到数据库？我试图用 ('+messageObject.getEncodedData()+) 或 rawdata 或 transformeddata 替换 '1234'。他们都没有工作。我收到以下错误：

```
ERROR (org.mule.impl.DefaultComponentExceptionStrategy:95) .... Wrapped com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '<?xml version="1.0" encoding="UTF-8"?><delimited><row><column1>1234</column1><co' at line 1 (1cf6717f-4818-4b18-acb2-3b93079f2e95#7) ..... 
```

我的意图是在一个字段中编写整个 xml，还不需要解析。谢谢你的病人。詹莫罕默迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:56:14.410

The error you are getting makes it seem like this is a simple syntax issue. Forget Mirth for a second. In general, if you are inserting values into a character field in a db, you need single quotes around the value that you insert

```
INSERT INTO jon (xml) values ('1234') //single quotes around 1234 
```

When you create a query in javascript in Mirth, you are basically replicating the same query that you would use in mysql--but you are building it as a string programatically. You basically build the following string and tell javascript to execute it:

```
"INSERT INTO jon (xml) values ('1234')" //single quotes around 1234 
```

That means that if you have an XML mapped variable, you need to surround it by single quotes in the query string so that your DB knows the value you are trying to insert. Based on your error message, that seems to be the problem. If you post the actual code you are using to do the insert, I can check to see.

```
 var xmlVar = $('XmlVar');  //fill a variable
    var query = "INSERT INTO testMRN (sendingfacility) VALUES ('" + xmlVar + "')";  //notice the quotes around the variable 
    var update= dbConn.executeUpdate(query); 
```

# windows-installer - 如何通过 NSIS 在 MUI_PAGE_COMPONENTS 中实现工具提示效果？

> ID：11758105
> 
> 赞同：0
> 
> 时间：2012-08-01T11:19:36.523
> 
> 标签：windows-installer, nsis, modern-ui, installation-package

目前我正在通过 NSIS 为我们的产品开发安装包，但是，我们的产品经理不喜欢 MUI_PAGE_COMPONENTS 的默认样式，所以我想知道如何在删除描述框和鼠标时通过 NSIS 实现组件页面将鼠标悬停在组件项上，工具提示将给出描述

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:38:14.827

```
!define MUI_COMPONENTSPAGE_NODESC
!include MUI2.nsh
!include LogicLib.nsh

!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE English

Section Foo SID_FOO
SectionEnd
Section Bar SID_BAR
SectionEnd
Section Baz SID_BAZ
SectionEnd

var ttip

!define WS_POPUP 0x80000000
!define TTF_SUBCLASS    0x010
!define /math TTM_ACTIVATE ${WM_USER} + 1
!define /math TTM_ADDTOOL ${WM_USER} + 4
!define /math TTM_SETTOOLINFO ${WM_USER} + 9
!define /math TTM_TRACKACTIVATE ${WM_USER} + 17
!define /math TTM_TRACKPOSITION ${WM_USER} + 18
!define /math TTM_POP ${WM_USER} + 28
!define /math TTM_POPUP ${WM_USER} + 34

Function .onMouseOverSection
${If} $0 = -1
killtip:
    SendMessage $ttip ${TTM_ACTIVATE} 0 0
    Return
${EndIf}
StrCpy $2 ""
${If} $ttip = 0
    System::Call 'USER32::CreateWindowEx(i${WS_EX_TOPMOST},t"tooltips_class32",i,i${WS_POPUP},i,i,i,i,i0,i,i,i)i.r2'
    StrCpy $ttip $2
${EndIf}
StrCpy $1 ""
${Select} $0
${Case} ${SID_FOO}
    StrCpy $1 "Foo?"
${Case} ${SID_BAR}
    StrCpy $1 "BarBarBar"
${Case} ${SID_BAZ}
    StrCpy $1 "Baaaaaaaaaaaaaaaaaz!!!"
${EndSelect}
FindWindow $3 "#32770" "" $HWNDPARENT
System::Call '*(i40,i${TTF_SUBCLASS},i$3,i0x408,i,i,i,i,i0,tr1)i.r1'
SendMessage $2 ${TTM_ADDTOOL} 0 $1
SendMessage $ttip ${TTM_SETTOOLINFO} 0 $1
SendMessage $ttip ${TTM_ACTIVATE} 1 0
SendMessage $ttip ${TTM_TRACKACTIVATE} 1 $1
System::Free $1
${If} $2 <> 0
    ;BUGFIX: Sometimes we get an initial onMouseOverSection call with no place to show a tip
    System::Call 'USER32::IsWindowVisible(ir3)i.r0'
    ${IfThen} $0 = 0 ${|} goto killtip ${|}
${EndIf}
FunctionEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:42:43.917

```
!define MUI_COMPONENTSPAGE_NODESC 
```

将从组件页面中删除描述

# .net - 每个人都说设置非零缓存持续时间以避免缓存 - 这有什么意义？

> ID：11758109
> 
> 赞同：1
> 
> 时间：2012-08-01T11:20:00.743
> 
> 标签：.net, asp.net-mvc, caching, duration

在 ASP.NET MVC 中，如果我没有`[Duration=x, VaryByParam="None"]`在我的局部视图上放置一个属性，或者如果我将其设置为 Duration=0，我有时会收到错误“Duration must be a positive number”。我已经阅读了很多关于这个主题的帖子，他们似乎都说包含非零持续时间的属性是避免该错误的唯一方法。

但是我根本不希望缓存数据（甚至不希望缓存 1 秒），在我看来，设置非零缓存持续时间几乎可以定义为启用缓存（对于我为持续时间指定的任何时间长度） .

我读过的所有帖子似乎都忽略了这一点，并谈论使用 Duration 设置属性作为避免缓存的方式，但这对我来说没有任何意义。如何完全避免缓存在特定的局部视图上？另外，有没有办法在我的整个 ASP.NET MVC 应用程序中禁用缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:47:37.380

`NoCache`如果不想缓存，您应该设置一个属性。看看这个答案：[https ://stackoverflow.com/a/1705113/2385](https://stackoverflow.com/a/1705113/2385)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:55:07.993

感谢大家的意见。关于客户端问题的评论很有帮助。最后，事实证明问题是由于默认情况下在 Internet Explorer 中启用了 ajax 缓存。解决方案是使用 JQuery 调用禁用该缓存，如下所示：

```
$.ajaxSetup({ cache: false }); 
```

# javascript - 如何在不刷新页面或更改 url 的情况下加载不同的 html 页面？

> ID：11758111
> 
> 赞同：6
> 
> 时间：2012-08-01T11:20:02.427
> 
> 标签：javascript, jquery, ajax

我想在不刷新页面或更改其 url 的情况下加载 html 页面。例如，如果我在`http://localhost/sample/home`并且我想导航到联系我们页面，我单击联系链接并加载联系页面内容，而无需刷新页面或更改 url。

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:22:43.050

查看[jQuery.load()](http://api.jquery.com/load/)的使用。

这允许您从 URL 加载 HTML，并将其显示在页面的元素中。

因此，您可以执行以下操作：

```
$("body").load("/sample/contactus"); 
```

* * *

但是，我不建议这样做，因为它不适合 SEO 或可访问性。此外，它不会减少加载时间，因为您仍然需要为整个其他页面发出 HTTP 请求..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:30:25.107

模拟 HTML：

```
<div id="links">
    <a href="/contactus.html">Contact Us </a>
</div>
<div id="content"></div> 
```

JS：

```
$(function() {
    $("#links > a").click(function(e) {
        e.preventDefault(); //so the browser doesn't follow the link

        $("#content").load(this.href, function() {
            //execute here after load completed
        });
    });
}); 
```

[jQuery`.load()`](http://api.jquery.com/load/) - 从服务器加载数据并将返回的 HTML 放入匹配的元素中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:22:36.430

就像是 ：

```
$('#content').load('ajax/contact.html', function() {
  alert('Load was performed.');
}); 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# android - 哪种方式更适合在 OpenGL Android 游戏中获取用户输入？

> ID：11758112
> 
> 赞同：0
> 
> 时间：2012-08-01T11:20:04.003
> 
> 标签：android, opengl-es, touch, user-input

我正在开发一个 OpenGL Android 游戏，我现在正在处理用户输入。

我有两个主要的想法来实现它。我认为他们两个工作得很好，但我不知道哪个“更好”（在性能/速度方面）。

基础是在屏幕周围的某些特定位置上，在 Opengl 中绘制了几个“按钮”（例如四个箭头键、操作按钮……）。这些按钮在游戏过程中不会改变位置。

**第一个想法**

我的第一个实现是创建一个包含对每个按钮的引用的二维矩阵。就像是：

```
InputObject matrix = new InputObject[Width_of_screen][Height_of_screen] 
```

在加载阶段，每个按钮都会在矩阵中插入它们出现的每个像素的引用。

因此，每次用户触摸屏幕时，我都可以直接在矩阵上查看他单击了哪个按钮（使用`e.getX()`和`e.getY()`）。

**优点：** “快速”知道要调用哪个按钮。

**缺点：（**在普通屏幕上）800*480 ~ 300K 引用，其中 80% 是`null`（但内存堆已经占用）

**第二个想法**

我的第二个计划是制作一个`ArrayList`输入对象并询问每个输入对象是否属于他们。就像是：

```
for(InputObject ob : TheArrayList){
    if (ob.for_him(e.getX(),e.getY())){
        ob.do_it();
        break; //They cannot overlap
    }
} 
```

**优点：**占用的堆空间更少（根本没有`null`引用......）

**缺点：**必须检测每个对象是否为自己，因此他们需要对`for_him`方法进行比较。占用更多 CPU 时间。

综上所述，对于 Android 手机（和其他智能手机）来说，哪一个可能是最好的主意，因为没有太多的处理器时间用于用户输入。

如果有第三种也是最好的方法，我很想知道它。

提前致谢。

# objective-c - rootViewController 的 self.view 和 self.view .superview 有什么区别？

> ID：11758116
> 
> 赞同：0
> 
> 时间：2012-08-01T11:20:27.080
> 
> 标签：objective-c, ios

我有一个视图控制器，它被分配为 rootViewController，如下所示：

```
self.viewCntrl = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewCntrl; 
```

在同一个视图控制器中，我有一个按钮，我在按钮单击时执行转换动画，如下所示：

```
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view.superview cache:YES]; 
```

但是当我这样写时它不起作用：

```
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES]; 
```

因为这里 self 是 ViewController 的对象，ViewController 只不过是**分配给 self.window.rootViewController**。那么为什么需要 self.view.superview 而不是 self.view 来制作动画呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:25:41.537

根据您尝试执行的动画类型，答案可能在[这里](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/setAnimationTransition%3aforView%3acache%3a)：

> 如果你想在过渡期间改变视图的外观——例如，从一个视图翻转到另一个——然后使用容器视图，即 UIView 的一个实例，如下所示：
> 
> 1.  开始一个动画块。
>     
>     
> 2.  在容器视图上设置过渡。
>     
>     
> 3.  从容器视图中移除子视图。
>     
>     
> 4.  将新的子视图添加到容器视图。
>     
>     
> 5.  提交动画块。

# java - 在 Objectify 中计算实体的等级

> ID：11758120
> 
> 赞同：0
> 
> 时间：2012-08-01T11:20:51.430
> 
> 标签：java, entity, ranking, objectify

我的目标是根据作为字符串提供的某些属性来计算实体的绝对排名。我使用的基本方法是发出查询，按降序对其结果进行排序，并对所有大于我的特定实体的属性值的结果进行计数。查询看起来像这样

```
int rank = o.query(Entity.class).order(String.format("-%s",attribute)).
           .filter(String.format("%s >", attribute), something).count(); 
```

但是，有些东西是我卡住的部分。据我了解objectify的概念，查询特定的实体成员是不可能的。我的下一步要么是使用（丑陋但在开发时间方面很快）if-construct 来识别特定的实体成员，或者开始使用反射（不那么丑陋，但在开发时间方面很慢）。

无论哪种方式，我都觉得我错过了一些明显和/或优雅的方式来完成这项任务。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:48:50.670

如果我理解正确，您想要第一个实体并且想要剩余实体的数量？有两种方法可以做到这一点：

1.  使用两个查询。`limit(1)`在将返回第一个实体的 >= 上使用。首先启动它，但不要具体化结果，以便它与第二个并行异步运行。
2.  代替`count()`，使用 >= 运行仅键查询。保留第一个键进行提取，并手动计算其余键。仅键查询的成本与 count() 查询相同（每个计数的小操作数），因为 count() 查询本质上是相同的东西。

我可能会选择＃2。无论哪种方式，我都希望您的数量不会很大，否则您将处理*大量*小型数据存储操作，并且您的应用程序会很昂贵！

# c++ - 错误：从 'void*' 到 'void* (*)(void*)' 的无效转换 - pthreads

> ID：11758121
> 
> 赞同：10
> 
> 时间：2012-08-01T11:20:52.000
> 
> 标签：c++, linux, g++, pthreads

```
anisha@linux-y3pi:~> g++ conditionVarTEST.cpp -Wall

conditionVarTEST.cpp: In function ‘int main()’:
conditionVarTEST.cpp:33:53: error: invalid conversion from ‘void*’ to ‘void* (*)(void*)’
conditionVarTEST.cpp:33:53: error:   initializing argument 3 of ‘int pthread_create(pthread_t*, const pthread_attr_t*, void* (*)(void*), void*)’
conditionVarTEST.cpp:34:53: error: invalid conversion from ‘void*’ to ‘void* (*)(void*)’
conditionVarTEST.cpp:34:53: error:   initializing argument 3 of ‘int pthread_create(pthread_t*, const pthread_attr_t*, void* (*)(void*), void*)’ 
```

* * *

第 33 行是这样的：

```
pthread_create (&A, NULL, (void *) &functionA, NULL); 
```

* * *

声明`functionA`是这样的：

`void functionA (void*);`

* * *

它的定义是：

```
void functionA (void* argA)
{
    while (1)
    {
        pthread_mutex_lock (&mutexA);

        if (count < 0)
        {
            pthread_cond_wait (&conditionVariableA, &mutexA);
        }
        else
        {
            // Do something.
            std :: cout << "\nTime to enjoy!";
        }
        pthread_mutex_unlock (&mutexA);
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T11:25:07.897

如果您查看[手册页](http://linux.die.net/man/3/pthread_create)，您会看到函数参数是

```
void *(*start_routine) (void *) 
```

也就是说，指向一个函数的指针，该函数接受一个`void *`参数并返回`void *`。

要摆脱错误，请将函数更改为 return `void *`，并在不进行类型转换的情况下传递它。`return NULL`如果您不关心值，则线程函数的返回可能很简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:23:20.333

`(void *) &functionA`会将您的函数指针`functionA`类型 `void (*)(void*)`转换为简单的`void*`. 后者不能再转换为第一个，所以编译器报错。这是您不应该使用 C 风格强制转换的原因之一。

改为使用`pthread_create (&A, NULL, functionA, NULL);`。

此外，线程函数的返回类型应该是`void*`，而不是`void`。所以`void functionA(void*)`改为`void* functionA(void*)`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T11:27:39.760

采用

```
pthread_create (&A, NULL, functionA, NULL); 
```

而不是铸造。

此外，您用来传递给 pthread_create 的函数应该返回一个`void*`so 以避免以后出现任何问题，请考虑更改函数签名以适应这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-01T11:39:58.030

当您使用 C++ 编译器时，您应该使用带有 C 绑定的函数，因为 pthread_create 需要一个 C 函数：

```
extern "C" void* functionA (void*); 
```

C++ 和 C 在您当前的平台上可能具有相同的调用约定，但不能保证在其他平台上会是这种情况，或者将来会是这样。

# c# - Web 应用向导的最佳实践——会话变量还是内联 SQL？

> ID：11758134
> 
> 赞同：0
> 
> 时间：2012-08-01T11:21:39.410
> 
> 标签：c#, sql, database, session, variables

我正在开发一个 Web 应用程序页面，该页面由一个三页长的表单组成（我被限制为用户保持这种方式，即使它不是最有效的方式）。

我的问题是：从表格的一页到下一页跟踪信息的最佳做法是什么？通常，我们将所有内容都存储在会话变量中，直到我们进行存储过程调用或内联 SQL 以使用表单结果更新数据库的最后一个表单。另一种选择是在从一页转到下一页之前，逐页使用内联 SQL 来存储数据。

TL;DR - 3 页后数据和 SQL 的会话变量存储，还是每页的内联 SQL？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:39:30.573

我建议将每个页面上输入的数据保存在数据库中。数据可以按会话 ID 保存到一个（临时）表中。如果用户单击“完成”或“提交”按钮，则通过处理临时数据来“激活”数据。表转换为规范化表。

但是，此解决方案要求您处理永远不会复制到最终位置的死会话。因此，需要设置清理任务。这可能是一个 MS SQL 作业或对数据库的任何 SQL 查询，检查最后一次清理时间，如果达到之前设置的时间间隔，则执行它。

将所有内容存储在会话中并不是一个好方法。特别是如果他们保留更大的数据集或有很多并发用户。原因是 HTTP 会话存储在服务器的文本文件中并消耗 I/O。与 RDB 相比，这使其速度较慢。

# vb.net - VB.NET：有没有办法让Nothing默认为数字类型的0？

> ID：11758135
> 
> 赞同：5
> 
> 时间：2012-08-01T11:21:40.923
> 
> 标签：vb.net, nothing

VS 2010 IDE 并没有因为试图通过采用用户定义枚举的方法参数传递 Nothing 而对我咆哮，这真的让我很烦恼。相反，它将 0 传递给该方法。c# 永远不会允许这样做。是否有一些我可以添加的模块级修饰符`option strict`会强制 IDE 不允许这些类型的隐式转换？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T11:36:10.157

可悲的是没有。

* * *

但是您可以在跳过时为枚举成员分配值`0`（或使用命名的占位符`None`或类似的东西），并且至少在运行时处理这种情况。

```
Sub Main
    MyMethod(Nothing) ' throws Exception
End Sub

Sub MyMethod(e as MyEnum)
    If e = 0 Then
        Throw New Exception
    End If
End Sub

Enum MyEnum
    a=1
    b=2
    c=3
End Enum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:48:10.497

在 C# 语言中，没有什么可以等同于*默认值。*所以不行。

重新考虑你的编程风格，*任何东西*都应该*非常*谨慎地使用。基本上只在通用代码中，在 C# 中使用*默认值*的地方相同。您在其他任何地方都不需要它，VB.NET 并不像 C# 那样坚持变量初始化。任何引用类型的变量都会自动初始化为 Nothing。可能对 C# 程序员来说是令人畏惧的，但在 VB.NET 代码中完全是惯用的。

# silverlight - WP7 应用程序中的部分本地化识别

> ID：11758137
> 
> 赞同：1
> 
> 时间：2012-08-01T11:21:54.830
> 
> 标签：silverlight, windows-phone-7, localization

我一直致力于 WP7 应用程序的本地化，尽管大多数语言在运行时似乎都按预期运行，但我遇到了一些问题。

例如，俄语、波兰语、瑞典语、挪威语、葡萄牙语和匈牙利语似乎不起作用，但繁体和简体中文、希腊语和丹麦语都可以（还有其他语言也可以使用）。

该应用程序的中性文化设置为“en”，虽然我最初也尝试过“en-GB”。

我确信这与文化代码有关，因为我在任何地方都找不到对部分语言支持的类似问题的任何参考。

我在项目文件本身中启用了以下文化：

```
<SupportedCultures>en;da-DK;de-DE;el-GR;es;es-ES;de-DE;fr;fr-FR;it-IT;zh-TW;zh-CN;hu-HU;no;nb-NO;pt-PT;pl-PL;ru;ru-RU;sv-SE;</SupportedCultures> 
```

在该列表中，匈牙利语的所有内容似乎都很好。我还尝试添加简短的文化代码并相应地复制资源文件（例如俄语和西班牙语），以防我完全错了，但即使是 MSDN 文档似乎也表明 WP7.1 支持上述所有内容。

XAML 中资源的使用示例：

```
<TextBlock Text="{Binding Path=LocalisedResources.res_Name, 
    Source={StaticResource LocalisedStrings}}" /> 
```

很高兴提供有关实施的更多细节以帮助答案，但我确信这只是我错过的一些简单的事情（即 PEBKAC）。我检查了所有资源文件是否具有相同的属性、正确的拼写，例如 Resource\Resources.hu-HU.resx、Public 修饰符并且只包含字符串资源。

使用 VS2010、WP OS 7.1 和标准模拟器进行检查和测试。

有没有人遇到过类似的事情，或者知道任何尝试解决的步骤？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:16:34.133

修复。

不是 100% 确定问题出在哪里，但手动清理/删除 bin 文件夹内容/重建解决方案，它适用于所有语言。

看起来有些东西在构建之间被捕获，并且在模拟器测试期间没有正确部署，但我在构建输出或输出控制台中看不到任何东西来准确指示那是什么。

# iphone - 使用特殊字符验证文本字段时，键盘退格按钮不起作用

> ID：11758138
> 
> 赞同：0
> 
> 时间：2012-08-01T11:21:54.440
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

我尝试使用特殊字符验证文本字段，

但是，按下键盘上的删除按钮。文本字段数据未删除。

我用这段代码来验证文本字段，

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
      NSCharacterSet * invalidNumberSet = [NSCharacterSet characterSetWithCharactersInString:@"_!@#$%^&*()[]{}'\"<>:;|\\/?+=~`"];

     if([[string stringByTrimmingCharactersInSet:invalidNumberSet]isEqualToString:@""])
     {
        return NO;
     }
     else
     {
        return YES;
     }
} 
```

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:48:33.630

像这样创建通用函数来实现您的功能，

```
-(BOOL)isNumeric:(NSString *)pTmpString
{
    BOOL isValid = YES;
    NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:@"_!@#$%^&*()[]{}'\"<>:;|\\/?+=~`"];
    for (int i = 0; i < [pTmpString length]; i++) 
    {
        unichar c = [pTmpString characterAtIndex:i];
        if ([myCharSet characterIsMember:c]) 
            isValid = NO;
    }
    return isValid;
} 
```

并将其用作

```
- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
{
    BOOL isValid = [self isNumeric:string];    
    return isValid;
} 
```

尽管您按键盘上的字母，但这不会接受键盘上的特殊字符到您的文本字段。

如果您有任何疑问，请告诉我..我会帮助您..

希望这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:48:06.740

为了防止那些特殊的词，我建议这可能会有所帮助，并且有很多选项可以防止这种类型的字符串匹配我向您建议的一种方式，如下所示。

```
 if([string isEqualToString:@"_"] || [string isEqualToString:@"@"] || [string isEqualToString:@"#"] || [string isEqualToString:@"$"] || [string isEqualToString:@"%"] ||  [string isEqualToString:@"^"] ||  [string isEqualToString:@"&"] ||  [string isEqualToString:@"*"] ||  [string isEqualToString:@"("] ||  [string isEqualToString:@")"] ||  [string isEqualToString:@"["] ||  [string isEqualToString:@"]"] ||  [string isEqualToString:@"{"] || [string isEqualToString:@"'"] || [string isEqualToString:@"\""] || [string isEqualToString:@"\\"] || [string isEqualToString:@"<"] || [string isEqualToString:@">"]|| [string isEqualToString:@":"]|| [string isEqualToString:@";"]|| [string isEqualToString:@"|"]|| [string isEqualToString:@"/"]|| [string isEqualToString:@"?"]|| [string isEqualToString:@"+"] || [string isEqualToString:@"="]|| [string isEqualToString:@"~"]  ) {
        return NO;
    }else{
        return YES;
    } 
```

另一种选择是正则表达式。希望这可能对你有所帮助。

# mysql - 在 MySql 中将结果行从查询转换为逗号分隔的字符串

> ID：11758140
> 
> 赞同：2
> 
> 时间：2012-08-01T11:22:01.783
> 
> 标签：mysql, sql

我想将选择查询的结果行转换为逗号分隔的字符串。我有一个表，其中有 153 列。选择查询如下

```
SELECT * FROM mytable where id = 3 
```

我想要逗号分隔的字符串中的所有结果 153 列。MySql有什么技巧吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T11:24:22.503

你可以使用`GROUP_CONCAT`函数来做到这一点。

```
SELECT GROUP_CONCAT(col1, col2,..coln) FROM my_table; 
```

编辑：

使用以下查询获取所有列名以及`CONCAT_WS`函数中的替换::

```
SELECT GROUP_CONCAT(COLUMN_NAME) 
FROM information_schema.COLUMNS 
WHERE TABLE_NAME = 'my_table';

SELECT CONCAT_WS(',', col1, col2, ..., coln) 
FROM my_table; 
```

或尝试：

```
SET @query1 = CONCAT('
        SELECT CONCAT_WS(",", ',(SELECT GROUP_CONCAT(COLUMN_NAME)
                                 FROM information_schema.COLUMNS
                                 WHERE TABLE_NAME = 'my_table'),')
        FROM    tablew_name'
        );
PREPARE stmt FROM @query1; EXECUTE stmt; DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:24:38.413

您可以使用该`concat()`功能，但据我所知，您需要为每一列命名。

```
select concat(col1, ',', col2, ',', col3) from myTable where id=3 
```

我知道获取表的所有列的唯一方法是`SHOW COLUMNS FROM table`，我想您可以将结果包含在您的查询中，但这不是我以前做过的事情。

# java - 使用 Apache 的 commons-math-2.2.jar 求解联立线性方程

> ID：11758142
> 
> 赞同：0
> 
> 时间：2012-08-01T11:22:08.233
> 
> 标签：java

我正在尝试使用 Apache 的 commons-math-2.2.jar 求解线性方程。

对于三个小点，我得到了正确的结果。

当我使用以下数据（大数字）时，我没有得到正确的结果，而是我会说结果没有意义；

以下是我正在使用的代码和数据：

```
double [][]matrixPoint= new double[][]{{1,80,6400,512000,4.096*Math.pow(10, 7)},{1,100,10000,1000000,1.0*Math.pow(10, 8)},{1,120,14400,1728000,2.073*Math.pow(10, 8)},{1,160,25600,4096000,6.553*Math.pow(10, 8)},{1,200,40000,8000000,1.6*Math.pow(10, 9)}};
        double [] matrixVector=new double[]{300,350,300,350,250};

RealMatrix coefficients =
                    new Array2DRowRealMatrix(matrixPoint,false);                           
         DecompositionSolver solver = new LUDecompositionImpl(coefficients).getSolver();    
            //  RealVector constants = new ArrayRealVector(new double[] { 1, -2, 1 }, false);
         RealVector constants = new ArrayRealVector(matrixVector, false);
         RealVector solution = solver.solve(constants); 
                System.out.println("The values are:"+Math.round(solution.getEntry(0))+":"+Math.round(solution.getEntry(1))+":"+Math.round(solution.getEntry(2))+":"+Math.round(solution.getEntry(3))+":"+Math.round(solution.getEntry(4))); 
```

API 有什么限制吗？如果您知道任何其他用于求解线性方程的库，请告诉我。

提前致谢

拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:17:50.500

What results do you get?

The vector of closest `double`s to the components of the exact solution is

```
[-7680.952380952381,261.8703703703704,-3.102149470899471,1.5775462962962963e-2,-2.9100529100529102e-5] 
```

rounding the components yields `[-7681,262,-3,0,0]`. Multiplying that with the original matrix yields

```
[-5921,-11481,-19441,-42561,-75281] 
```

which is far off, but that's to be expected, since the rounding errors in the coefficients is far larger than the reciprocals of the corresponding column entries for all but the first coefficient.

Multiplying the matrix with the `double` approximations to the exact solution yields

```
[300.0000000000019,350.00000000000256,300.00000000000335,350.0000000000051,250.0000000000071] 
```

which is pretty close.

Solving the system with `double` arithmetic instead of rational arithmetic will probably produce slightly different results, but should be close. The values I got using Gaussian elimination are

```
[-7680.952380952391,261.8703703703705,-3.1021494708994711.577546296296295e-2,-2.9100529100529095e-5]
[299.9999999999927,349.99999999999227,299.99999999998636,349.99999999996,249.9999999999054]
[-1.000444171950221e-11,1.1368683772161603e-13,0.0,-1.3877787807814457e-17,6.776263578034403e-21] 
```

for the solution, `matrix × solution` and difference between solution and best approximation to the exact solution.

If the results you get are close to those, the library is working well enough. I suspect the nonsensical result you obtained is solely due to the rounding you did for printing. If not, please update with the `double` results you got from the library.

# database - html5 数据库不会从追加显示 div 中的数据

> ID：11758144
> 
> 赞同：0
> 
> 时间：2012-08-01T11:22:12.207
> 
> 标签：database, html, sqlite, jquery-mobile

下面是我想在 div 中显示结果的内部数据库表的代码

```
var sear=$("#search").val();
var db = openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
db.transaction(function (tx) {
    tx.executeSql("SELECT * FROM DEMO", [],
 function (tx, results) {
  var len = results.rows.length, i;
  for (i = 0; i < len; i++) {
      $('#output2').append('<tr>td>'+ results.rows.item(i).D_Indications +'</td></tr>');
    alert(results.rows.item(i).D_Indications);
  }
});

    }); 
```

我可以在警报中查看结果，但无法在 div 中查看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:07:54.273

两个问题：

1.  表标签丢失

2.  调用 append(...) 时的错字。查看开始标签 tr td。

# workflow - Intalio BPM 与 Joget BPM 开源

> ID：11758145
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:22:20.050
> 
> 标签：workflow, business-process-management

有谁知道我可以从哪里获得免费版 Intalio 和 Joget BPM 之间的比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:12:13.663

我不知道 Joget BPM，但开源场景中的主要参与者是 Activity、JBPM 和 Bonita Open Solution。JBPM 和 Activity 共享相同的基础，因为 Activity 基于 JBPM4。JBPM5 与著名的业务规则引擎相结合：drools。据我所知，Activity 仍然遵循最初的想法，并提供了一些与 alfresco 合作的连接器。这两种解决方案似乎非常技术性。关于 Bonita，这个解决方案，因为 Intalio 更加以用户为中心。这两种解决方案都为外部系统提供了一组许多连接器。不幸的是，Intalio 的开源版本非常有限，而 bonita 的开源版本功能齐全。

Bonita 是我最了解的解决方案，所以如果您有任何问题，请随时提问

希望能帮助到你

# python - Apache mod_wsgi中的Web2py与virtualenv

> ID：11758147
> 
> 赞同：2
> 
> 时间：2012-08-01T11:22:25.640
> 
> 标签：python, apache, virtualenv, web2py

我正在部署一个`web2py`应用程序，我将使用`Apache`via为它提供服务`mod_wsgi`。我的虚拟主机配置中有以下 WSGI 指令：

```
 WSGIDaemonProcess web2py user=www-data group=www-data \
                           display-name=%{GROUP}
  WSGIProcessGroup web2py
  WSGIScriptAlias / /var/www/web2py/wsgihandler.py 
```

这是有效的，但它需要系统范围的 python 安装。结果，找不到一些包（因为它们只存在于我的 virtualenv 中）。我想告诉这个特定的虚拟主机（或整个 Apache，如果没有其他方法），在我的虚拟环境（`/home/myuser/.virtualenvs/python2.7.2/bin`）中使用 python 安装。

是否可以为 Apache 配置它？或者更好，只是为了我的虚拟主机？我想对系统的其余部分造成尽可能小的影响（具体来说，我不想修改系统范围内使用的默认 python 版本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:30:02.860

在您`wsgihandler.py`的顶部添加此...

```
activate_this = '/path/to/virtualenv/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this)
import sys
sys.path.insert(0, '/path/to/web2py_dir') 
```

# javascript - XSLT：在元素标签中输出 Javascript

> ID：11758151
> 
> 赞同：2
> 
> 时间：2012-08-01T11:22:40.573
> 
> 标签：javascript, xslt

使用 XSLT，我如何输出以下内容

```
<div onclick="var e = document.getElementById('<xsl:value-of select="div_id"/>');
          if(e.style.display == 'block')
            e.style.display = 'none';
          else
          { 
            e.style.display = 'block';
            e.scrollIntoView();
          }" 
          style="text-decoration: underline; color: blue;"
>Toggle</div> 
```

**注意：**代码应该位于`onclick`属性中，我只能访问文档的正文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:51:56.450

**一种方法是使用 AVT（[属性值模板](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)）**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
    <div style="text-decoration: underline; color: blue;"
     onclick="var e = document.getElementById('{div_id}');
              if(e.style.display == 'block')
                e.style.display = 'none';
              else
              {{
                e.style.display = 'block';
                e.scrollIntoView();
              }}">Toggle</div>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<div_id>3</div_id> 
```

**产生了想要的结果**：

```
<div style="text-decoration: underline; color: blue;" onclick="var e = document.getElementById('3');               if(e.style.display == 'block')                 e.style.display = 'none';               else               {                 e.style.display = 'block';                 e.scrollIntoView();               }">Toggle</div> 
```

**请注意**：指定此类 AVT（属性值模板）时，必须将必须生成的任何字符`{`或字符加倍。`}`

**另一种方法是使用`xsl:attribute`：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
    <div style="text-decoration: underline; color: blue;">
      <xsl:attribute name="onclick">
     var e = document.getElementById('<xsl:value-of select="div_id"/>');
              if(e.style.display == 'block')
                e.style.display = 'none';
              else
              {
                e.style.display = 'block';
                e.scrollIntoView();
              }</xsl:attribute>Toggle</div>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:40:24.993

我认为您想使用[属性值模板](http://www.w3.org/TR/xslt#dt-attribute-value-template)，例如

```
<div onclick="var e = document.getElementById('{div_id}'); ...">Toggle</div> 
```

# c# - 自定义调用 Action 的 ASP Web API Json 序列化

> ID：11758152
> 
> 赞同：8
> 
> 时间：2012-08-01T11:22:41.300
> 
> 标签：c#, asp.net-mvc-3, json.net, asp.net-web-api

我正在考虑将现有的 JSON api 从 hacky MVC3 实现转换为最新的 MVC4 Web Api。MVC3 实现使用 JSON.NET 来完成所有的序列化，这将使升级顺利而顺利。

我坚持自定义某些操作的结果如何序列化。例如，我希望某些操作仅返回输出对象的几个属性，而其他操作可能会进行相当深度的序列化。在我当前的实现中，一个动作可以通过在`HttpContext`. 这些稍后会通过派生自`JsonResult`. 添加自定义的主要用途`JsonConverters`是控制和减少要序列化的键/值的数量，并根据操作改变要序列化的参数（某些操作应该比其他操作返回更多的对象参数）。

**在我当前的 MVC3 实现中，控制器和控制 json 序列化的类的精简示例：**

```
public class TestController : JsonController {
    public JsonResult Persons() {
        ControllerContext.HttpContext.Items[typeof(IEnumerable<JsonConverter>)] = new JsonConverter[] {
            new InterfaceExtractorJsonConverter<IPersonForList>(),
            new StringEnumConverter()
        };

        ControllerContext.HttpContext.Items[typeof(IContractResolver)] = new SpecialCamelCasePropertyNamesContractResolver();
     }
}

public class JsonNetResult : JsonResult {
    public override void ExecuteResult(ControllerContext context) {
        var response = context.HttpContext.Response;

        var additionalConverters = context.HttpContext.Items[typeof(IEnumerable<JsonConverter>)] as IEnumerable<JsonConverter> ?? Enumerable.Empty<JsonConverter>();

        var contractResolver = context.HttpContext.Items[typeof(IContractResolver)] as IContractResolver ?? new JsonContractResolver();

        var typeNameHandling = TypeNameHandling.None;
        if (context.HttpContext.Items.Contains(typeof(TypeNameHandling)))
            typeNameHandling = (TypeNameHandling)context.HttpContext.Items[typeof(TypeNameHandling)];

        response.Write(JsonConvert.SerializeObject(Data, Formatting.Indented, new JsonSerializerSettings {
            ContractResolver = contractResolver,
            ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
            Converters = additionalConverters,
            TypeNameHandling = typeNameHandling
        }));
    }
} 
```

在 Web Api 中，我看到我可以从配置中获取 Json 格式化程序并全局更改序列化。

```
var config = new HttpSelfHostConfiguration("http://localhost:8080");

var jsonFormatter = config.Formatters.OfType<JsonMediaTypeFormatter>().Single();

jsonFormatter.SerializerSettings.ContractResolver = new SpecialCamelCasePropertyNamesContractResolver();
jsonFormatter.SerializerSettings.Converters = new[] { new InterfaceExtractorJsonConverter<ITesting>() }; 
```

`JsonConverter's`但是，我计划通过添加一些属性来指定要使用的属性来控制单个（或每个控制器）操作的序列化。因此，我希望 Json 序列化程序找到赋予被调用动作/控制器的相关属性并相应地更改序列化。我不确定在哪里以及如何做到这一点。我应该以某种方式继承`JsonMediaTypeFormatter`并在那里工作吗？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:50:18.987

我从未见过有人想以这种方式控制序列化。但是为了以最少的返工实现您的目标，我将直接从您的方法中返回所有这些信息：

```
class JsonNetResponse {
    public IContractResolver ContractResolver { get;set; }
    // Other Json.Net bits
    public object Value { get; set; }
} 
```

然后，我将创建一个自定义 Formatter 来处理这些对象：

```
class JsonNetFormatter : MediaTypeFormatter {
    public override bool CanWriteType(Type t) {
        return typeof(JsonNetResponse).IsAssignableFrom(t);
    }
    // TODO WriteToStreamAsync which is basically a copy of your original JsonNetResult
} 
```

# c# - 存储通过 wcf 传输的类

> ID：11758157
> 
> 赞同：3
> 
> 时间：2012-08-01T11:22:55.840
> 
> 标签：c#, wcf, design-patterns, proxy, svcutil.exe

当我使用`svcutil`或其他一些代理生成器时，它会在客户端创建适当的类。我想知道存储此类以避免冲突的最佳方法是什么。

*   在其他一些“通用”项目中并从代理中删除生成的类？
*   或者只是在服务中使用原始类而在代理中重复这些类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:38:03.557

有两种方法可以处理服务和数据协定类 WCF 客户端的代码。

*   使用 svcutil.exe 生成所有内容。不要从您的客户项目中获得任何对服务程序集的引用。只需使用 svcutil 生成的类。
*   直接引用包含这些类型的程序集。我有时为我的 DTO 类使用单独的程序集，即来自客户端和服务器的引用。使用 svcutil 生成客户端代码时，使用该`/reference:<file path>`选项告诉 svcutil 重用现有程序集中的类型，而不是重新生成它们。

如果您引用原始程序集，而不将其传递`/reference`给 svcutil，您最终会遇到一堆冲突。我想这就是发生在你身上的事。

# c++ - 为什么使用模板特化？

> ID：11758158
> 
> 赞同：4
> 
> 时间：2012-08-01T11:22:59.543
> 
> 标签：c++, templates, template-function

我想知道为什么模板专业化有意义？

下面的东西不是等价的吗？

模板专业化：

```
template <typename T>
void f(T t) {
  something(t);
}

template <>
void f<int>(int t) {
  somethingelse(t);
} 
```

非模板函数而不是特化：

```
void f(int t) {
  somethingelse(t);
} 
```

我相信这些是相同的，因为非模板函数将始终是首选。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:22:59.543

这是我想出的答案：

如果模板参数不是正在定义的函数的参数，则不同：

```
template <typename T>
void f() {
  T t;
  something(t);
}

template <>
void f<int>() {
  int t;
  somethingelse(t);
} 
```

在这种情况下定义：

```
void f() {
  int t;
  somethingelse(t);
} 
```

会使所有模板版本无法使用。

也许其他人有更好的想法。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:17:24.407

*如果*您坚持将其称为`f<int>(42)`. 这将找到专业化，但不会找到重载。

如果呼叫总是看起来像`f(42)`，则任何一种替代方法都可以。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T12:47:38.690

问题归结为确定何时使用重载不能使用的专业化。在不同的情况下会出现这种情况，尽管它们并不常见，而且很容易犯错误，因此一般建议是更喜欢重载而不是特化。

*   当调用者明确请求使用模板时。在您提供的代码示例中，如果调用是`f<int>(42)`or even `f<42>()`，则不会使用重载。

*   当您无法提供所需的重载，或无法在呼叫地点解决重载时。例如，如果类型不是函数参数之一（它根本不存在于签名中或仅存在于返回类型中：

    模板 T f();

在这种情况下，您不能提供重载`int f();`，`double f();`但您可以根据需要提供尽可能多的模板特化，并且由用户来强制选择其中一个。请注意，这可以被认为是前一种情况的子情况：因为模板参数不参与函数参数，用户需要提供模板参数，所以调用是显式的模板。

*   当您想对参数组合设置特殊约束并禁止隐式转换时：

    模板无效 f( T, T ); // 两个参数*必须*是相同的类型

因为模板参数推导只执行完美匹配，所以这个模板只能在两个参数的类型完全相同时使用，如果你添加一个重载`void f(int,int)`，那么重载可以与任何可隐式转换为 int 的类型组合一起使用，比如`f( 5, 3.0 )`, 但是专业不会。

一般来说，对于大多数情况，上述情况都不是真正适用的，因此应该首选重载。

* * *

可能还有更多，但那些是我能从脑海中回想起的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T16:49:58.613

函数模板特化已被弃用，取而代之的是函数重载，但有一个例外：您可以将函数模板特化添加到 std 命名空间，但不允许添加新函数。因此，如果您需要为 std 命名空间中的某些内容提供特定版本，则必须使用模板专业化。例如，要支持使用用户定义的类作为键创建 unordered_map，您必须为您的类专门化 std::hash。

# drop-down-menu - 如何获取 DropDownList 选择操作以触发 MVC 4 中的提交按钮？

> ID：11758160
> 
> 赞同：2
> 
> 时间：2012-08-01T11:23:03.623
> 
> 标签：drop-down-menu, web, submit, asp.net-mvc-4

我在用作过滤器的 MVC 4 Web 应用程序中有一个 DropDownList。从下拉列表中选择新值时，用户必须单击提交按钮。当从下拉列表中选择新项目时，有没有办法让 DropDownList 执行相同的提交操作，这样我就可以完全消除提交按钮？没有为提交按钮编写自定义方法，我只是使用 MVC 中的通用方法。

更新：代码如下：

```
@Html.DropDownList("userName",Model.Users) <input type="submit" value="Search" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T15:46:57.813

```
<select name="dropdown" id="dropdown" onchange="this.form.submit()"> 
```

ps Google 搜索结果中的第一个链接

编辑

```
@Html.DropDownList("userName",Model.Users new {onchange="this.form.submit()"}) 
```

# mysql - MySQL 子请求中的 ANY

> ID：11758171
> 
> 赞同：0
> 
> 时间：2012-08-01T11:23:45.060
> 
> 标签：mysql, request, mysql-error-1064, any

我在 MySQL 中有几个表，我向他们提出了请求。在这个请求中，我提出了一个子请求，因为我在表 t1 中有字段 f1，它有时为 NULL，有时为 NOT NULL，如果它不是 NULL，我想从表 t1 中选择字段 f2，并在 f1 为 NULL 时忽略它. 两个表中都存在字段 f1，它在 t2 中是唯一的，在 t1 中可能不是唯一的。

我提出了以下子请求：

```
//[main request here]
IF (t1.f1 IS NOT NULL, (SELECT t2.f1 AND t2.f2 FROM t1, t2 WHERE t1.f1 = t2.f1),'')
//[main request continues here] 
```

MySQL 说：`Invalid query: Subquery returns more than 1 row`

我知道我必须以某种方式在子请求中包含 ANY，我尝试了不同的方法，但仍然遇到相同的错误或拼写错误。可以请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:02:59.103

问题是您的子选择正在连接 t1 和 t2，因此它没有返回唯一的行，因为 t1 有多个匹配的行。尝试：

```
IF (t1.f1 IS NOT NULL, (SELECT t2.f1 AND t2.f2 FROM t2 WHERE t1.f1 = t2.f1),'') 
```

# objective-c - XMPPFramework 和 Openfire 服务器，认证成功，但没有回调

> ID：11758175
> 
> 赞同：1
> 
> 时间：2012-08-01T11:23:55.633
> 
> 标签：objective-c, openfire, xmppframework

连接 opefire 服务器 ok ，然后进行身份验证：

```
- (void)xmppStreamDidConnect:(XMPPStream *)sender{
    NSLog(@"connected --->YES");
    isOpen = YES;
    NSError *error = nil;
    [xmppStream authenticateWithPassword:@"password" error:&error];
} 
```

Openfire 日志显示：

```
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Launching thread for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Launching thread for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Launching thread for /121.0.29.220:60789
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000065 (01/05/00) - Connection #5 tested: OK
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000066 (01/05/00) - Connection #5 tested: OK
2012.08.01 19:13:35 org.jivesoftware.openfire.auth.AuthorizationManager - AuthorizationManager: Trying Default Mapping.map(shitiven)
2012.08.01 19:13:35 org.jivesoftware.openfire.auth.DefaultAuthorizationMapping - DefaultAuthorizationMapping: No realm found
2012.08.01 19:13:35 org.jivesoftware.openfire.auth.AuthorizationManager - AuthorizationManager: Trying Default Policy.authorize(shitiven , shitiven)
2012.08.01 19:13:35 org.jivesoftware.openfire.auth.DefaultAuthorizationPolicy - DefaultAuthorizationPolicy: Checking authenID realm
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000066 (01/05/00) - Connection #2 tested: OK
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000067 (01/05/00) - Connection #2 tested: OK
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000067 (01/05/00) - Connection #1 tested: OK
2012.08.01 19:13:35 org.jivesoftware.util.log.util.CommonsLogFactory - 000068 (01/05/00) - Connection #1 tested: OK
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Launching thread for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Launching thread for /121.0.29.220:60789
2012.08.01 19:13:35 org.apache.mina.filter.executor.ExecutorFilter - Exiting since queue is empty for /121.0.29.220:60789 
```

但是委托方法“xmppStreamDidAuthenticate”没有调用：

```
- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender{
     NSLog(@"login success!!"); 
     [self goOnline];
} 
```

当我输入错误的用户名或密码时，委托方法“didNotAuthenticate”调用：

```
- (void)xmppStream:(XMPPStream *)sender didNotAuthenticate:(NSXMLElement *)error{
    NSLog(@"authenticate fail %@",error); //console to the debug pannel
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:58:35.473

我怀疑你被这里描述的问题所困扰：[https ://github.com/robbiehanson/XMPPFramework/issues/81](https://github.com/robbiehanson/XMPPFramework/issues/81)

您必须更新 xmppframework 才能解决此问题。

# python - 芹菜中的Django定期任务

> ID：11758177
> 
> 赞同：1
> 
> 时间：2012-08-01T11:24:00.287
> 
> 标签：python, django, celery, celerybeat

我遇到了周期性任务未运行的问题。我使用 redis 作为后端，可以手动运行任务，这是 celery 调试日志

```
    [ModelEntry: myproject.myapp.tasks.MyPeriodicTask myproject.myapp.tasks.MyPeriodicTask(*[], **{}) { freq: 10.00 seconds }]
    [2012-08-01 13:45:53,764: DEBUG/MainProcess] 消费者：准备好接受任务了！
    [2012-08-01 13:45:53,801：调试/节拍] Celerybeat：以最大间隔-> 5.00 秒滴答作响
    [2012-08-01 13:45:53,808：调试/节拍] Celerybeat：在 5.00 秒内醒来。
    [2012-08-01 13:45:58,814：调试/节拍] Celerybeat：在 5.00 秒内醒来。
    [2012-08-01 13:46:03,828：调试/节拍] Celerybeat：在 5.00 秒内醒来。

```

当我手动运行任务时，一切正常。时区在 django 和 celery 中是相同的

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-08-25T10:03:07.167

如[Celery 问题 #4184](https://github.com/celery/celery/issues/4184)中所述，您可以通过将 CELERY_TIMEZONE 更改为 UTC 来解决此问题。我遇到了类似的问题，但是使用了数据库调度程序，这为我解决了。

# java - 没有XML头标签的Java中的XML节点到字符串

> ID：11758180
> 
> 赞同：0
> 
> 时间：2012-08-01T11:24:22.127
> 
> 标签：java, xml-parsing

```
StringWriter writer = new StringWriter();
Transformer transformer = TransformerFactory.newInstance().newTransformer();
transformer.transform(new DOMSource(node), new StreamResult(writer));
out.print("<zhape>"+writer.toString()+"</zhape>"); 
```

当我使用上面的代码时，以下行也出现在输出中。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

我怎样才能省略它而只获取 XML 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:43:09.153

使用[OUTPUTKEYS](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/OutputKeys.html)在[TRANSFORMER](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/Transformer.html)中设置属性。要执行您想要的操作，您应该使用[OMIT_XML_DECLARATION](http://docs.oracle.com/javase/1.4.2/docs/api/javax/xml/transform/OutputKeys.html#OMIT_XML_DECLARATION)输出键。

# ruby - Ruby中最好的字符串匹配算法和实现？

> ID：11758187
> 
> 赞同：2
> 
> 时间：2012-08-01T11:24:57.087
> 
> 标签：ruby, performance, algorithm, string-matching

我有这两个字符串`string1`和`string2`. 检查是否`string2`存在于`string1`. 我如何在 Ruby 中实现。目前我正在使用`Regex`匹配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T12:40:12.710

```
1.9.3p194 :016 > Benchmark.measure{ 1_000_000.times{ 'asd'['a'] } }
 =>   0.430000   0.000000   0.430000 (  0.431638)

1.9.3p194 :017 > Benchmark.measure{ 1_000_000.times{ 'asd' =~ /a/ } }
 =>   0.420000   0.000000   0.420000 (  0.415391)

1.9.3p194 :018 > Benchmark.measure{ 1_000_000.times{ 'asd'.include? 'a' } }
 =>   0.340000   0.000000   0.340000 (  0.343843) 
```

令人惊讶的是，`count('a') > 0`给了我很好的结果：

```
1.9.3p194 :031 >   Benchmark.measure{ 10_000_000.times{ 'asd'.count('a') > 0 } }
 =>   3.100000   0.000000   3.100000 (  3.099447)

1.9.3p194 :032 > Benchmark.measure{ 10_000_000.times{ 'asd'.include?('a') } }
 =>   3.220000   0.000000   3.220000 (  3.226521) 
```

但：

```
# count('a') > 0
1.9.3p194 :056 >   Benchmark.measure{ 10_000_000.times{ 'asdrsguoing93hafehbsefu3nr3wrbibaefiafb3uwfniw4ufnsbei'.count('a') > 0 } }
 =>   3.630000   0.000000   3.630000 (  3.633329)
# include?('a')
1.9.3p194 :057 > Benchmark.measure{ 10_000_000.times{ 'asdrsguoing93hafehbsefu3nr3wrbibaefiafb3uwfniw4ufnsbei'.include?('a') } }
 =>   3.220000   0.000000   3.220000 (  3.224986)
# =~ /a/
1.9.3p194 :058 > Benchmark.measure{ 10_000_000.times{ 'asdrsguoing93hafehbsefu3nr3wrbibaefiafb3uwfniw4ufnsbei' =~ /a/ } }
 =>   3.040000   0.000000   3.040000 (  3.043130) 
```

所以：严格谈论性能，您应该考虑字符串的分布（很少是随机的）进行测试。谈到表现力，也许`include?`是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:30:44.047

尝试

```
string1.include? string2 
```

那应该做的工作

# php - yii CGridView 过滤器与关系

> ID：11758189
> 
> 赞同：3
> 
> 时间：2012-08-01T11:25:01.623
> 
> 标签：php, yii, yii-extensions, yii-components

我正在为我的网络应用程序使用 yii。在我的一个观点中，我有 CGridView 和 dataprovider 是邮件模型。在这个模型中，我与其他 3 个模型有关系。在网格中，我显示了三个模型的 cols。如何过滤 CGridView？

更新：

```
<?php $dialog = $this->widget('ext.ecolumns.EColumnsDialog', array(
           'options'=>array(
                'title' => 'Layout settings',
                'autoOpen' => false,
                'show' =>  'fade',
                'hide' =>  'fade',
            ),
           'htmlOptions' => array('style' => 'display: none'), //disable flush of dialog content
           'ecolumns' => array(
                'gridId' => 'mails-grid', //id of related grid
                'storage' => 'session',  //where to store settings: 'db', 'session', 'cookie'
                'fixedLeft' => array('CCheckBoxColumn'), //fix checkbox to the left side 
                'model' => $dataprovider, //model is used to get attribute labels
                'columns'=>array(
                                array(
                                    'name'=>'mailTemplate.name',
                                    'filter'=>CHtml::activeTextField($dataprovider, 'mailTemplate'),
                                ),
                                'sendDate',
                                array(
                                        'name'=>'mailTemplate.subject',
                                        'filter'=>CHtml::activeTextField($dataprovider, 'mailTemplate'),
                            ),
                            array(
                                'name'=>'client.email',
                                'filter'=>CHtml::activeTextField($dataprovider, 'client'),
                            ),
                            array(
                                'name'=>'client.name',
                                'filter'=>CHtml::activeTextField($dataprovider, 'client'),
                            ),
                            array(
                                'name'=>'operator.username',
                                'filter'=>CHtml::activeTextField($dataprovider, 'operator'),
                            ),
                            array(
                                'name'=>'status',
                                'value'=>array('MailHelper', 'getEmailStatus'),
                                'filter'=> CHtml::activeDropDownList($dataprovider, 'status', Mail::getEmailStatuses()),
                            ),
                            array(
                                'class'=>'CButtonColumn',
                                'template'=>'{update}',
                                'buttons'=>array(
                                                'update' => array(
                                                        'url'=>'$this->grid->controller->createUrl("/email/editTemplate", array("templateId"=>$data->id))',
                                                ),
                                            ),
                            )
                        ),
        )
    )); 
```

?>

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'mails-grid',
    'dataProvider'=>$dataprovider->search(),
    'columns' => $dialog->columns(),
    'filter' => $dataprovider,
    'template' => $dialog->link()."{summary}\n{items}\n{pager}",
)); ?> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T11:43:52.473

我有餐厅、城市、国家和用户模型以及它们之间的关系。

模型：

```
public function search() {
  $criteria=new CDbCriteria;
  $criteria->together = true;
  $criteria->with= array('xCountry','xCity','User');
  $criteria->compare('Id',$this->Id,true);
  $criteria->compare('Restaurant.Name',$this->Name,true);
  $criteria->addSearchCondition('xCountry.Name',$this->Country);
  $criteria->addSearchCondition('xCity.Name',$this->City);
  $criteria->compare('Zip',$this->Zip,true);
  $criteria->compare('Address',$this->Address,true);
  $criteria->compare('Description',$this->Description,true);
  $criteria->compare('Restaurant.Active',$this->Active,true);
  $criteria->addSearchCondition('User.Username',$this->Owner);
  $criteria->compare('Lat',$this->Lat);
  $criteria->compare('Lon',$this->Lon);

  return new CActiveDataProvider($this, array(
    'criteria'=>$criteria,
  ));
} 
```

看法：

```
$this->widget('zii.widgets.grid.CGridView', array(
      'id'=>'restaurant-grid',
      'dataProvider'=>$model->search(),
      'filter'=>$model,
      'columns'=>array(
        'Id',
        'Name',
        'Zip',
        'Address',
        'Active',
        array(
          'name' => 'User.Username',
          'header' => 'Username',
          'filter' => CHtml::activeTextField($model, 'Owner'),
          'value' => '$data->User->Username',
            ),
        array(
          'name' => 'xCountry.Name',
          'header' => 'Country',
          'filter' => CHtml::activeTextField($model, 'Country'),
          'value' => '$data->xCountry->Name',
            ),
        array(
          'name' => 'xCity.Name',
          'header' => 'City',
          'filter' => CHtml::activeTextField($model, 'City'),
          'value' => '$data->xCity->Name',
            ),
        array(
        'class'=>'CButtonColumn',
        ),
      ),
    )); 
```

我希望这可以帮助你。

更新：

如果你尝试这样的事情怎么办：

```
...
'columns'=>array(
  'mailTemplate.name',
  'sendDate',
  'mailTemplate.subject',
  'client.email',
  ... 
```

更新#2：

做好准备，这会有点脏。

假设我们有两个类，A 和 B。B 属于 A。B 有一个属性，比如说“颜色”，我们想在列出“A”的网格中显示它。

您要做的第一件事是手动为您的数据提供者类创建一个属性（什么是“A”）。该属性将是“colorOfB”，因此您必须添加“public $colorOfB;” 到你的模型 A。

为此属性添加条件：

```
$criteria->compare('B.color',$this->colorOfB,true); 
```

将列添加到网格中：

```
array(
  'name' => 'B.color',
  'header' => 'Color of B',
  'filter' => CHtml::activeTextField($model, 'colorOfB'),
  'value' => '$data->B->color'), 
```

最后是在 A 的控制器中手动设置这个属性：

```
$modelA = new A('search');
$modelA->colorOfB = $_GET['A']['colorOfB']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T07:46:24.990

这将设置选择列表

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'avto-ugon-grid',
'dataProvider'=>$model_data,
'filter'=>$model,
'columns'=>array(
    'id',
    array(
        'name' => 'time',
        'value' => 'date("d/m/Y", $data->time)',
        'type' => 'html',
    ),
    array(
        'name' => 'nomer',
        'value' => '$data->nomer',
        'type' => 'html',
    ),
    array(
        'name' => 'id_marka',
        'value' => '$data->idMarka->mark',
        'type' => 'html',
        'filter'=> CHtml::listData(AvtoUgon::model()->with('idMarka')->findAll(array('group'=> 'id_marka', 'order'=> 'idMarka.mark')), 'id_marka', 'idMarka.mark'),
    ),
    array(
        'name' => 'id_model',
        'value' => '$data->idModel->model',
        'type' => 'html',
        'filter'=> CHtml::listData(AvtoUgon::model()->with('idModel')->findAll(array('group'=> 'id_model', 'order'=> 'idModel.model')), 'id_model', 'idModel.model'),
    ),
    array(
        'name' => 'color',
        'value' => $data->color,
        'type' => 'raw',
    ),

    array(
        'name' => 'id_street',
        'value' => '$data->idStreet->street',
        'type' => 'html',
    ),
    array(
        'name' => 'publish',
        'value' => 'CHtml::link($data->publish ? "Опубликовано" : "Не опубликовано", Yii::app()->controller->createUrl("publish", array("id" => $data->id)))',
        'type' => 'html',
    ),
    /*'id_street',
    'nomer',
    */
    array(
        'class'=>'CButtonColumn',
    ),
), 
```

));

# android - EditText 上的 setText 因 NullPointerException 而失败

> ID：11758190
> 
> 赞同：0
> 
> 时间：2012-08-01T11:25:05.347
> 
> 标签：android

单击菜单项后，我会调用以下函数。基本上我有一些字符串，我尝试将其设置为位于`AlertDialog`.

```
public void createAboutDialog() {
    View layout = mContext.getSystemService(LAYOUT_INFLATER_SERVICE).inflate(R.layout.about, null);

    TextView tv = (TextView) findViewById(R.id.myTextView);
    tv.setText("My text here");

    AlertDialog.Builder builder = new AlertDialog.Builder(mContext);
    builder.setView(layout);

    AlertDialog alertDialog = builder.create();
    alertDialog.show();
} 
```

该问题似乎与`setText()`通话有关。

**日志猫**

```
08-01 14:19:33.423: D/MainActivity(1793): 1.0
08-01 14:19:33.473: D/AndroidRuntime(1793): Shutting down VM
08-01 14:19:33.473: W/dalvikvm(1793): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
08-01 14:19:33.603: E/AndroidRuntime(1793): FATAL EXCEPTION: main
08-01 14:19:33.603: E/AndroidRuntime(1793): java.lang.NullPointerException
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.example.your.chinese.name.MainActivity.createAboutDialog(MainActivity.java:105)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.example.your.chinese.name.MainActivity.onOptionsItemSelected(MainActivity.java:74)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.app.Activity.onMenuItemSelected(Activity.java:2502)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:969)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:163)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.widget.AbsListView.performItemClick(AbsListView.java:1065)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2522)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:3195)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.View.dispatchTouchEvent(View.java:5564)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2052)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1813)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2058)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1827)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1879)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.View.dispatchPointerEvent(View.java:5766)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.os.Looper.loop(Looper.java:137)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at android.app.ActivityThread.main(ActivityThread.java:4441)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at java.lang.reflect.Method.invoke(Method.java:511)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-01 14:19:33.603: E/AndroidRuntime(1793):     at dalvik.system.NativeStart.main(Native Method)
08-01 14:19:35.583: I/Process(1793): Sending signal. PID: 1793 SIG: 9 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T11:26:43.577

您需要`findViewById()`从正确的上下文中调用：

```
TextView tvVersion = (TextView) layout.findViewById(R.id.tvAboutdialogVersion); 
```

如果未提供，它将从 Activity 上下文中调用，该上下文已加载主 XML 视图，并且无法访问/引用您刚刚膨胀的对话框的 XML（及其 TextViews）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:33:14.313

试试这个：

`TextView tvVersion = (TextView) alertDialog.findViewById(R.id.tvAboutdialogVersion);`

代替：

`TextView tvVersion = (TextView) findViewById(R.id.tvAboutdialogVersion);`

# c++ - 连接到 postgresql 数据库的奇怪错误

> ID：11758195
> 
> 赞同：1
> 
> 时间：2012-08-01T11:25:11.150
> 
> 标签：c++, database, postgresql, postgresql-8.4

我一直在关注[本教程](http://www.askyb.com/cpp/c-postgresql-example/)，但我遇到了一些我不太理解的错误。我几乎只有两个功能，一个用于关闭它，一个用于打开它。我不知道为什么会出现这些错误。

数据库编写器.h：

```
#ifndef FILEPARSER_H
#define FILEPARSER_H

#include "DatabaseWriter.h"

using namespace std;

class DatabaseWriter
{
private:

public:
    void CloseConn(PGconn *conn);
    PGconn DatabaseWriter::*ConnectDB ();

    DatabaseWriter ();

};

#endif 
```

数据库编写器.cpp

```
#include "stdafx.h"
#include <string>
#include <string>
#include "libpq-fe.h"
#include "DatabaseWriter.h"

using namespace std;

const char* CONNECTIONSTRING = "user=postgres password=superman dbname=poker hostaddr=127.0.0.1 port=5432";

void DatabaseWriter::CloseConn (PGconn *conn)
{
    PQfinish(conn);
    getchar();
    exit(1);
}

PGconn DatabaseWriter::*ConnectDB ()
{
    PGconn *conn = NULL;

    // Make a connection to the database
    conn = PQconnectdb(CONNECTIONSTRING);

    // Check to see that the backend connection was successfully made
    if (PQstatus(conn) != CONNECTION_OK)
    {
        printf("Connection to database failed");
        CloseConn(conn);
    }

    printf("Connection to database - OK\n");

    return conn;
} 
```

我自己之前定义了 CloseConn，所以它不应该是未定义的。

![错误 1](../Images/162e35976822369fdc5a43fb6e17ffd8.png)

ConnectDB 的返回类型是 PGconn，conn 是一个 PGconn，所以我不明白为什么它不应该返回它。

![错误 2](../Images/ef46748e1da4f9916e9bda3ae2e921e2.png)

显然有些事情我正在公然查看，所以感谢您的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:33:49.047

您不需要`DatabaseWriter::`内部类声明，只需要定义。我还建议您仔细查看该定义，尤其是其中的定义`*`。

# javascript - 使用 jQuery 捕获点击 Facebook 的“Like”按钮

> ID：11758197
> 
> 赞同：5
> 
> 时间：2012-08-01T11:25:23.823
> 
> 标签：javascript, jquery, facebook, facebook-like

我正在查看[Facebook 开发人员文档](https://developers.facebook.com/docs/reference/plugins/like/)以找到一些示例代码，这些代码允许我捕获“赞”按钮上的点击事件。它指出：

> 如果您使用的是 XFBML 版本的按钮，您可以通过 FB.Event.subscribe 订阅 'edge.create' 事件。

但是，我没有使用 XFBML，这是我的代码：

```
<div class="social_net_button facebook_button">
      <div id="fb-root"></div>
      <script>(function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) {return;}
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
              fjs.parentNode.insertBefore(js, fjs);

              FB.Event.subscribe('edge.create',
                     function(response) {
                          alert('You liked the URL: ' + response);
                     }
              );

            }(document, 'script', 'facebook-jssdk'));</script>
      <div class="fb-like" data-href="http://www.facebook.com/pages/Ayrshire-Minis/160330240663397" data-send="false" data-layout="button_count" data-width="70" data-show-faces="false" data-action="recommend"></div>
    </div> 
```

jQuery可以捕获单击“Like”按钮吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:35:18.880

你可以试试这个。

[http://jsfiddle.net/qkyAe/](http://jsfiddle.net/qkyAe/)

文档：http: [//developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

```
FB.Event.subscribe('edge.create', function(response) {
    console.log('clicked');
});​ 
```

我认为这个只有在用户点击并且它增加了点赞数（仅限登录用户）时才有意义，因为我没有 FB 帐户，所以我无法尝试。请告诉我，如果它有效:)

更新：

FB 对象来自您已经嵌入的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:23:55.267

看起来，解决方案是异步发送请求。下面的代码放在我的`fb-like`div 类之后有效：

```
 <script>
           window.fbAsyncInit = function() {
                   FB.init({
                                           status: true, // check login status
                                           cookie: true, // enable cookies to allow the server to access the session
                                           xfbml: true  // parse XFBML
                                   });
           };
     </script>
     <script type="text/javascript">
           window.fbAsyncInit = function() {
             FB.Event.subscribe('edge.create',
                     function(response) {
                           _gaq.push(['_trackSocial', 'facebook', 'like', document.location.href]);
                     }
             );
           };
     </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-15T18:37:13.763

这段代码真的有效:)

```
<script type='text/javascript'>//<![CDATA[ 
window.addEvent('load', function() {
window.fbAsyncInit = function() {
    FB.init({
        appId: '42424242424242',
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true
    });
    FB.Event.subscribe('edge.create', function(response) {
        alert('You liked the URL: ' + response);
    });
};
(function(d) {
    var js, id = 'facebook-jssdk';
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
}(document));
});//]]>  

</script>

         <div id="fb-root"></div> 
         <div class="box">
             <p>First a Like Box of a facebook page</p>
             <p class="info">edge.create is not called</p>
             <div class="fb-like-box" data-href="http://www.facebook.com/jsfiddle" data-width="292" data-show-faces="true" data-stream="false" data-header="true"></div>
         </div>
         <div class="box">
             <p>Like Button of a website</p>
             <p class="info">here you can see the edge.create fire</p>
             <div class="fb-like" data-href="http://jsfiddle.net" data-send="false" data-width="150" data-show-faces="true"></div>
         </div>
         <div class="box">
             <p>Like Button of a Facebook Page</p>
             <p class="info">here you can see the edge.create fire</p>
             <div class="fb-like" data-href="http://www.facebook.com/jsfiddle" data-send="false" data-width="150" data-show-faces="true"></div>
         </div>
         <div style="clear:both;"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T07:25:00.497

确保`FB.Event.subscribe('edge.create')`调用是在初始化之后（在`window.fbAsyncInit`函数内而不是在函数外）

**例子**

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    /* Additional initialization code here
    ******************************************************/
}; 
```

...然后异步加载 SDK！

# javascript - 单击一行时，如何将“选定”类添加到表格的一行？

> ID：11758202
> 
> 赞同：1
> 
> 时间：2012-08-01T11:25:54.063
> 
> 标签：javascript, jquery

我正在使用以下代码：

```
$("#dataTable tbody").on("click", "tr", function (event) {
    if (!$(this).hasClass('row_selected')) {
        $(oTable.fnSettings().aoData).each(function () {
            $(this.nTr).removeClass('row_selected');
        });
        $(this).addClass('row_selected');
        gridClickHandler($(this));
    }
}); 
```

单击一行时，如果该行已被选中，则不会发生任何事情。如果不是，则所有行都删除了该类，并且当前行添加了 row_selected 类。

但是，这很慢，因为我的表有很多行。目前的延迟看起来不太好。我想到的是将 addClass 移到开头。但如果我这样做，.each 循环会删除它。

有没有办法让这项工作更有效（更快的响应）？

```
<table id-"dataTable">
  <tbody>
    <tr>
      <td>January</td>
      <td>$100</td>
    </tr>
    <tr>
      <td>February</td>
      <td>$80</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:31:22.870

[这是一个示例](http://jsfiddle.net/Y7cWW/)

```
$('table').on('click', 'tr', function() {

    var row = $(this);                 //cache the row

    if(!row.hasClass('selected'){
        row.addClass('selected')       //add class to clicked row
            .siblings()                //get the other rows
            .removeClass('selected');  //remove their classes
        gridClickHandler(row);
    }
});​ 
```

使用的优点是它只将*一个事件处理程序*`.on()`绑定到父级（在本例中为 ），用于子级（）。在每一行上使用意味着每个元素都有*一个处理程序，这是一种开销。**`table``tr``.click()` *`tr`**

 **因此，例如，如果我有一千行，那么当您使用时会有一千个点击处理程序，`.click()`而不是在使用.`table``tr``.on()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:28:25.490

```
$("#dataTable tbody tr").click(function () {
    $('#dataTable tbody tr.selected').removeClass('selected');
    $(this).addClass('selected');
    gridClickHandler($(this));
}); 
```

检查这个[**jsfiddle**](http://jsfiddle.net/vNChe/)，即使是大桌子也能很快工作！

-- 评论后编辑 --

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:31:50.770

试试这个：-

```
 $("#dataTable tbody tr").on("click", "tr", function (event) {        
         $("#dataTable tbody tr").removeClass('row_selected');
         $(this).addClass('row_selected');
     }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:35:53.100

```
$("#dataTable").on("click", "tr", function (e) {
    var $this = $(this);
    // this line removes all selected classes from the rows siblings
    $this.siblings().removeClass("row_selected");
    // this line will toggle the selected class,
    // therefore deselecting the row if it has been selected before
    $this.toggleClass("row_selected");
    gridClickHandler($this);
}); 
```

或者缓存先前选择的行。

```
(function() {
    var $oldSelected = null;

    $("#dataTable").on("click", "tr", function (e) {
        var $this = $(this);
        // this line removes all selected classes from the rows siblings
        $oldSelected.removeClass("row_selected");
        // this line will toggle the selected class,
        // therefore deselecting the row if it has been selected before
        $oldSelected = $this.addClass("row_selected");
        gridClickHandler($this);
    });

})(); 
```

附带说明一下，缓存 jQuery 调用 - 或为此您重复需要的函数调用的结果 - 始终是节省处理时间的好主意。**

# iphone - 如何将 Xcode 3.1.2 升级到 Xcode 4.4.3

> ID：11758206
> 
> 赞同：0
> 
> 时间：2012-08-01T11:26:19.633
> 
> 标签：iphone, ios, xcode4, xcode4.3

iOS 新手，已下载 xcode 4.3.3 即：xcode_4.3.3_for_lion.dmg，Xcode 已经存在于 3.1.2 版的这台机器中[我从聚光灯下]。

问题：如果我想要新的 Xcode 4.3.3，那么我只需要双击 xcode_4.3.3_for_lion.dmg，然后单击 Xcode。

我怎样才能使 Xcode 4.3.3 成为默认版本，并删除旧的 3.1.2 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:30:56.020

安装 Xcode 4 之前打开终端

```
sudo /Developer/Library/uninstall-devtools --mode=all 
```

这将卸载 Xcode 3。然后你可以像往常一样安装 Xcode 4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:37:44.850

忘记手动下载。打开 Mac App Store，从那里安装 Xcode。当您第一次运行它时，它应该会提示您删除旧版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:23:51.273

我设法以某种方式删除并重新安装.. :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:21:04.100

如果您的 Mac 中同时安装了这两个版本。然后做下图中提到的一件简单的事情

![在此处输入图像描述](../Images/1e9b0becaceee44404091d02a10e6a11.png)

享受编码:)

# iphone - iPhone：MPMoviePlayer 最初在几分之一秒内显示黑色背景

> ID：11758209
> 
> 赞同：1
> 
> 时间：2012-08-01T11:26:28.980
> 
> 标签：iphone, ios5, mpmovieplayercontroller

在我的应用程序中，我在包含以下代码的视图之一上播放视频

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"bgVideo" ofType:@"mov"]];
        player = [[MPMoviePlayerController alloc] initWithContentURL:url];

        [player setControlStyle:MPMovieControlStyleNone];
        player.view.frame = CGRectMake(35, 190, 245, 156);
        [self.view addSubview:player.view];
        [player play];
        [player.view setBackgroundColor:[UIColor clearColor]]; 
```

**我在viewWillAppear**方法上写了这段代码

但是当我最初来到这个视图时，我的 MPMoviePlayerController 在开始视频之前显示黑屏几分之一秒。

我不想第二次黑屏。

我该怎么办？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:44:11.387

也许**玩家**有一个强大的属性并合成它。有效。

也应该适用于您的情况。

我的经验，不会再有问题了。如果您不能工作，请回复。

* * *

**`Edit`**

我有点误会了。

开始前显示黑屏，因为视频没有加载。

您无法预测加载视频所需的时间。即使您将播放器分配给 viewWillApper 方法。会出现黑屏。这个黑屏控制不了。YouTube 应用程序或默认视频应用程序也相同。在黑屏期间，应向用户显示 ActivityIndi​​cator 或“正在加载”消息。这是合理的。最后一般来说，视频大小和质量越大，加载所需的时间就越长。如果您想要确切的加载时间，则应通知您。

参考示例代码。

```
- (void)viewWillAppear:(BOOL)animated
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"m4v"]];
    player = [[MPMoviePlayerController alloc] initWithContentURL:url];

    [player setControlStyle:MPMovieControlStyleNone];
    player.view.frame = CGRectMake(35, 190, 245, 156);
    [self.view addSubview:player.view];
    [player.view setBackgroundColor:[UIColor clearColor]];
    player.shouldAutoplay = NO;
    [player prepareToPlay];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(loadMoviePlayerStateChanged:)
                                                 name:MPMoviePlayerLoadStateDidChangeNotification
                                               object:self.player];

    [super viewWillAppear:animated];
}

- (void)loadMoviePlayerStateChanged:(NSNotification *)noti
{
    int loadState = self.player.loadState;
    if(loadState & MPMovieLoadStateUnknown)
    {
        NSLog(@"MPMovieLoadStateUnknown");
        return;
    }
    else if(loadState & MPMovieLoadStatePlayable)
    {
        NSLog(@"MPMovieLoadStatePlayable");
        [player play];
    }
    else if(loadState & MPMovieLoadStatePlaythroughOK)
    {
        NSLog(@"MPMovieLoadStatePlaythroughOK");
    } else if(loadState & MPMovieLoadStateStalled)
    {
        NSLog(@"MPMovieLoadStateStalled");
    }
} 
```

# c++ - 从串口读取而不从缓冲区中删除（linux）

> ID：11758210
> 
> 赞同：0
> 
> 时间：2012-08-01T11:26:28.993
> 
> 标签：c++, c, serial-port

在 C/C++ 中

如何从串行端口读取，而不删除我已经从缓冲区中读取的信息？

我想在 linux 机器上做类似 arduino ( [http://arduino.cc/en/Serial/Peek ) 的 Peek 功能。](http://arduino.cc/en/Serial/Peek)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:42:45.180

串行端口的访问就好像它是使用文件描述符的文件一样，因此[fgetc ungetc](https://stackoverflow.com/a/2082772/918124)方法应该可以工作。

# php - 如何让 metatag 'cp_address' 调用 gmap？

> ID：11758211
> 
> 赞同：0
> 
> 时间：2012-08-01T11:26:31.970
> 
> 标签：php, wordpress, google-maps

以下脚本编译广告客户字段“cp_street”、“cp_city”和“cp_state”，以创建调用我网站上侧边栏地图的地址。我创建了一个名为“cp_address”的新字段，用户可以在其中输入完整地址。如何更改下面的脚本以使两者都起作用？

```
 <?php
// check to see if ad is legacy or not and then assemble the map address
if ( get_post_meta($post->ID, 'location', true) )
    $make_address = get_post_meta($post->ID, 'location', true);
else
    $make_address = get_post_meta($post->ID, 'cp_street', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_city', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_state', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_zipcode', true);

    $coordinates = cp_get_geocode( $post->ID );
?>

<script type="text/javascript">var address = "<?php echo esc_js($make_address); ?>";</script>

    <?php cp_google_maps_js($coordinates); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:45:48.027

```
<?php
// check to see if ad is legacy or not and then assemble the map address
$make_address = get_post_meta($post->ID, 'cp_address', true);
if ( !$make_address || empty($make_address) )
    $make_address = get_post_meta($post->ID, 'cp_street', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_city', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_state', true) . '&nbsp;' . get_post_meta($post->ID, 'cp_zipcode', true);

    $coordinates = cp_get_geocode( $post->ID );
?>

<script type="text/javascript">
var address = "<?php echo esc_js($make_address); ?>";
</script>

<?php cp_google_maps_js($coordinates); ?> 
```

# jquery - 如何在一天的drupal完整日历上获取所有事件？

> ID：11758216
> 
> 赞同：1
> 
> 时间：2012-08-01T11:26:41.550
> 
> 标签：jquery, drupal, fullcalendar

我的问题是关于完整日历模块。我在我的站点中使用它来创建事件。任何人都可以告诉我如何获取和显示（在 drupal 视图中）特定日期的所有事件，当它被点击时。我的意思是我想获取并显示 dayClick 事件中的所有事件。

提前致谢。

塔普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:08:53.083

Use calendar block. It does exact same thing.

# c# - 如何使用 ajax 自动完成扩展器使用 web 服务从数据库中填充数据？

> ID：11758217
> 
> 赞同：1
> 
> 时间：2012-08-01T11:26:41.133
> 
> 标签：c#, asp.net, ajax, web-services, ajaxcontroltoolkit

在过去的 3 个小时里，我一直被困在其中。在互联网上搜索、阅读博客、查看和测试代码和示例，但一无所获。

我正在使用文本框上的 Ajax Control Toolkit 中的 Ajax Auto Complete Extender，并希望根据用户输入的文本从数据库中生成最少的问题。

为此，我创建了一个网络服务。网络服务中的方法是 -

```
 namespace CeteraQMS
    {
        /// <summary>
        /// Summary description for SearchIssues
        /// </summary>
        [WebService(Namespace = "http://tempuri.org/")]
        [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
        [ToolboxItem(false)]
        // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
        [System.Web.Script.Services.ScriptService]
        public class SearchIssues : System.Web.Services.WebService
        {        
            [WebMethod]
            [ScriptMethod]
            public string[] GetCompletionList(string prefixText, int count)
        {
            DataSet ds = null;
            DataTable dt = null;
            OracleConnection conn = null;
            StringBuilder sb = new StringBuilder();
            try
            {
                conn = new OracleConnection("Data Source=advbniit; User ID=usr; Password=abc providerName=System.Data.OracleClient");
                sb.Append("select issueno from cet_sepcet where issueno like '");
                sb.Append(prefixText);
                sb.Append("%'");
                OracleDataAdapter daRes = new OracleDataAdapter(sb.ToString(), conn);
                ds = new DataSet();
                daRes.Fill(ds);
                dt = ds.Tables[0];
            }           
            catch (Exception exc)
            {

            }
            finally
            {
                if (conn.State == ConnectionState.Open)
                {
                    conn.Close();
                }
            }

            List<string> IssueList = new List<string>();
            for (int i = 0; i < dt.DataSet.Tables[0].Rows.Count; i++)
            {
                IssueList.Add(dt.DataSet.Tables[0].Rows[i][0].ToString());
            }           
            return IssueList.ToArray();
        }
     } 
```

我将此网络服务称为 -

```
 <asp:TextBox ID="txtIssueNo" runat="server" Width="130px" Style="margin-left: 5px"
                onkeypress="return allowDigit(this);" MaxLength="7"></asp:TextBox>
            <asp:AutoCompleteExtender ID="AutoCompleteExtender1" EnableCaching="true" BehaviorID="AutoCompleteCities"
                TargetControlID="txtIssueNo" ServiceMethod="GetCompletionList" ServicePath="SearchIssues.asmx"
                MinimumPrefixLength="1" CompletionSetCount="10" runat="server" FirstRowSelected="true">
            </asp:AutoCompleteExtender> 
```

纯粹而简单。但令我惊讶的是，当我在文本框中输入文本时，什么都没有发生。请引导我，好像我哪里出错了。

在此先感谢阿基尔

> **PS** - 没有错误什么都没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:37:58.407

在你的 [WebMethod] 之上你有什么？我也遇到了 ajax 自动完成的问题，但我想通了，我会为您提供我的示例。我用你的替换了我的表格和列，但是你需要在你的 sinc 上添加一些额外的信息，你有一个用户名和密码。我没有看到 GetRecord 表，您是否将其包括在内？您的 ajax 源代码看起来不错，但是如果您愿意，您可以创建一个样式表来添加更多首选项。

```
using System;
using System.Collections.Generic;
using System.Web.Services;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;

[WebService]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class AutoComplete : WebService
{
    public AutoComplete()
    {
    }

[WebMethod]
    public string[] GetCompletionList(string prefixText, int count)
    {
        if (count == 0)
        {
            count = 10;
        }
        DataTable dt = GetRecords(prefixText);
        List<string> items = new List<string>(count);
        for (int i = 0; i < dt.Rows.Count; i++)
        {
            string strName = dt.Rows[i][0].ToString();
            items.Add(strName);
        }
        return items.ToArray();
    }

    public DataTable GetRecords(string strName)
    {
        string strConn = ConfigurationManager.ConnectionStrings["ProjectASPConnectionString"].ConnectionString;
        SqlConnection con = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Parameters.AddWithValue("@issueno", strName); ///What name to place here
        cmd.CommandText = string.Format("Select distinct issueno as issueno from cet_sepcet where issueno like '{0}%'", strName); //what command to write here
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;
        con.Open();
        dAdapter.Fill(objDs);
        con.Close();
        return objDs.Tables[0];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T11:50:26.317

在 web 方法之前添加一个静态，使其工作......

# java - 一种在 Collection 中的对象上具有不同等于（物理等于和逻辑等于）的机制

> ID：11758220
> 
> 赞同：5
> 
> 时间：2012-08-01T11:26:45.747
> 
> 标签：java, list, collections, equals, comparator

有没有像 Comparator 这样的 Equalator 机制，所以我可以有不同的等号来比较列表？

**编辑：**我的目标是区分当前 list1.equals(list2) 检查它是浅拷贝还是深拷贝所有对象 a.equals(b) 和 list1.identical(list2) 检查它是否只是浅拷贝未经修改的清单

所有这些列表都来自同一模型。有些是自身的副本，因此它们持有指向相同对象的指针，而另一些是深层副本，因此层次结构被完全复制，因为它们在内容上进行了更新，而不仅仅是在结构上。

我发现自己经常制作 list1.equals(list2) 但我需要一种机制来判断两者是否是 TOTAL 副本（相同的对象以相同的集合顺序）或者有时它们是否是 LOGICAL 副本（通过我自己实现的逻辑等于），所以列出会调用 equals 并且对象应该实现比 a==b 更多的东西。

我的问题是没有 Equalator 接口，如果我覆盖对象等于我失去了通过 TOTAL EQUAL (a==b) 进行比较的能力

例如，这会很好；

```
Collections.equal(l1,l2,new Equalator(){
    @Override public boolean equals(Obj1,Obj2){
          //Default lists comparison plus commparison of objects based on
          return (obj1.propertyX() == obj2.propertyX());
    }
}); 
```

我仍然可以做 list1.equals(list2) 所以他们使用默认的 equals (obj1==obj2) 并且只有当包含的对象完全相同时才会这样。

第一个操作对于检查列表（可能是从模型中完全重新创建的对象的更新列表）是否仍然等于旧列表很有用。

第二个操作对于检查是否列表很有用（这是旧的当前数据模型版本的浅表副本），它不包含任何超越更改，因为它是更新版本时在代码中移动它。

**编辑：**一个很好的例子是有一个 Point(x,y) 的列表。我们应该能够知道两个列表是否相等，因为它们是完全相同的一组点，或者是相等的，因为它们包含的点在逻辑上是相等的。如果我们可以同时实现 phyEqual 和 logEqual 到对象，并且在任何对象中都有这两种方法，那么 list.phyEqual(list2) 或 list1.logEqual(list2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:58:47.150

一个迟到的答案，但也许它对某人有用......

Guava [Equivalence 等价](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Equivalence.html)类与 Comparator 用于比较的等价类相同。您需要编写自己的方法来比较列表（Guava 对此不支持），但是您可以使用各种等价定义调用此方法。

或者你可以滚动你自己的界面：

```
interface Equalator<T> {
    boolean equals(T o1, T o2);
} 
```

同样，您需要编写您的（琐碎）方法

```
boolean <T> listEquals(List<T> list1, List<T> list2, Equalator<T> equalator) {
    ...  
} 
```

...但是您可以使用不同的 ListEqualator 实现重用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:52:29.840

至少对我来说，您的问题并没有真正清楚地表达出来。如果这不能正确回答，您可以重新措辞一下吗？

在给定的 Collection 具体类型中，大多数 equals 实现已经按照您的提示进行。例如：

```
 public boolean equals(Object o) {
        if (o == this)
            return true; 
```

在这种情况下，这样的事情可能有意义。
您可以轻松地覆盖它：

```
 @Override
    public boolean equals(Object o) {
        if (o.getPrimaryKey() == this.getPrimaryKey()) 
            return true;
        return super().equals(o); 
```

[应添加空值测试] 如果您正在创建标准集合，您甚至可以在构造过程中匿名覆盖 equals 方法。

如果这不符合您的要求，您可以自己扩展 Collections 并覆盖那里的任何方法来做类似的事情。

这有帮助吗？

# objective-c - resignFirstResponder 没有在 iPad 中隐藏 UIkeyboard

> ID：11758223
> 
> 赞同：0
> 
> 时间：2012-08-01T11:26:49.970
> 
> 标签：objective-c, cocoa-touch, ipad, uikeyboard, resignfirstresponder

我有一个 iPad 应用程序，其中 resignFirstResponder 似乎没有工作。我尝试了很多解决方案。我只是从 firstResponder 对象的实例调用 resign first responder，但键盘仍保留在屏幕上。然后我尝试通过迭代所有窗口来获取第一响应者的实例，然后我从该实例调用 resignFirstResponder。

我还尝试通过`UIViewController`为以下方法创建类别。

```
 - (BOOL)disablesAutomaticKeyboardDismissal
    {
         return NO;
    } 
```

但是这个解决方案也不适合我。这个键盘问题存在于应用程序的所有文本字段中，不仅针对某些特定的文本字段。

更新：在应用程序的不同部分，我为此使用了不同的代码。这是代码

```
- (void)textFieldDidEndEditing:(UITextField *)mtextField
 {
 [mtextField resignFirstResponder]; this one is not required but I have just write   it here.
 }

- (BOOL)textField:(UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
if([string hasSuffix:@"\n"])
{
    [theTextField resignFirstResponder];
    return NO;
}
return YES;
} 
```

更新：当我尝试在模拟器中运行应用程序时，有时它`resignFirstResponder`可以工作，但即使在模拟器中也不是每次启动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:52:47.210

隐藏键盘的最简单和最好的方法是使用

```
[self.view endEditing:YES]; 
```

并确保您正在设置适当的文本字段代表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:21:00.263

如果你想让键盘在你按下回车键的时候退出，你需要使用：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField

{
[textField resignFirstResponder];  
return YES;
} 
```

*然后*调用 textFieldDidEndEditing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:32:40.457

首先，您不会在 Objective-C 中调用方法，而是向对象发送消息。

`UIView`不是应该发送消息的人`resignFirstResponder`。拥有你`UITextField`的属性 - 我们称它为 myTextField。你应该使用这个：

```
[self.myTextField resignFirstResponder]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T04:22:46.883

我得到了这个问题的解决方案。实际上，苹果可可 API 似乎有一些变化。在我的应用程序中，我有一个`UIAlertView`，我们用来显示某些操作正在进行，用户应该等待完成它。为此，我在我的应用程序中使用的代码是

```
- (void)displayAlertView
   {
     UIAlertView *alertView = creating the object;
     UIActivityIndicatorView *activityIndicator= creating the object;
     [alertView addSubview:activityIndicator];
     [activityIndicator startAnimating];
     [alertView show];
     [alertView release];
    }

-(void)didPresentAlertView:(UIAlertView *)alertView
 {
      [alertView dismissWithClickedButtonIndex:0 animated:NO];
 } 
```

当我在我的应用程序中使用以下代码时，问题得到解决

```
 -(void)didPresentAlertView:(UIAlertView *)alertView
 {
      [self performSelector:@selector(dismissView:) withObject:alertView afterDelay:0.0];

 }

  -(void)dismissView:(UIAlertView*)alertView
 {
      [alertView dismissWithClickedButtonIndex:0 animated:NO];
 } 
```

我认为这里有些事情出了问题`UIAlertView`，因为当辞去第一响应者的职务时，键盘没有隐藏。

# c# - 如何在datagridview中选择复选框时为动态创建的复选框编写函数

> ID：11758224
> 
> 赞同：1
> 
> 时间：2012-08-01T11:26:51.787
> 
> 标签：c#, c#-4.0, datagridview

如何编写一个函数来获取选中复选框时行的值。我正在使用以下代码动态创建复选框列

```
DataGridViewCheckBoxColumn checkColumn = new DataGridViewCheckBoxColumn();
checkColumn.Name = "X";
checkColumn.HeaderText = "Select";
checkColumn.Width = 50;
checkColumn.ReadOnly = false;
checkColumn.FillWeight = 10; //if the datagridview is resized (on form resize) the checkbox won't take up too much; value is relative to the other columns' fill values
dataGridView5.Columns.Add(checkColumn); 
```

如何编写`check column`函数来获取选定的行值。

# http - HTTP 请求字段中的特殊字符

> ID：11758225
> 
> 赞同：1
> 
> 时间：2012-08-01T11:27:00.843
> 
> 标签：http, webserver

这与编程无关，但我在程序中使用它，所以我认为最好在这里问。本质上这是一个关于处理 HTTP 请求异常的问题。

标准请求可能如下所示：

```
GET / HTTP/1.1
Host: example.com
User-Agent: Firefox 
```

我的问题是，HTTP 应该如何处理通常不会被篡改的 HTTP 请求部分中的“特殊字符”。例如，如果方法是“POST ME”而不是“GET”（即包含空格）怎么办？这会被编码为 %20 吗？

另一个例子，假设我希望我的一个标题是“Class：Test：example”，标题名称中有额外的“：”（标题值为“example”）。这会被编码为 %3A 吗？

注意：这不是关于是否有任何网络服务器会接受这种编码；这是关于它应该如何做的。我的程序是一个模糊测试器，所以它应该是测试这种东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:33:56.500

这两个问题必须回答为“否”和“是的，但是……”

您建议的“百分比编码”是为内容、值定义的，而不是为 http 语言语法定义的。您混合协议和有效负载。

您可能想查看定义 HTTP 的 RFC。它清楚地定义了一种语法。如果您坚持该语法，您可以创建有效的扩展（这是您正在尝试做的）。如果您破坏该语法，则会创建无效的 http 请求。这将是你可以在内部做的事情，但这些请求很可能在开放的互联网上不起作用，例如代理在其中发挥作用。这些必须在 y 语法级别上理解您的请求。

我写道，对于问题 2，答案是“是的，但是”。所以对BUT说几句话：

*如果您按照建议对第二个*“：”进行编码，则可以指定此类标头并且它们是有效的。但是，您应该了解您在那里所做的事情：您没有在标题名称中引入层次结构。相反，您指定标题内容以包含“：”。那很好。由您的服务器组件来理解、解释和响应该内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:45:19.713

HTTP 规范说该方法是一个标记，因此它不能包含任何分隔符。所以“POST ME”不是一个有效的方法。

同样，标题名称也是标记，因此它们不能包含“：”。冒号始终被视为标头名称与其内容之间的分隔符。

正如 arkascha 所说，您应该阅读 RFC 2616，它指定了 HTTP 协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:52:54.070

对于包含空格的方法，这是不可能的，因为请求行定义如下：

```
 Request-Line   = Method SP Request-URI SP HTTP-Version CRLF 
```

`Method`被定义为 HTTP/1.1 动词或扩展方法之一，是 a `token`（不能包含空格）。所以服务器遇到的第一个空格标志着方法的结束。因此，方法不能包含空格。您可以对其进行百分比编码，但服务器不知道如何处理类似`GET%20ME`.

对于您的`Class:Test: example`，http 标头[定义](https://www.rfc-editor.org/rfc/rfc2616#page-32)为：

```
message-header = field-name ":" [ field-value ]
field-name     = token
field-value    = *( field-content | LWS )
field-content  = <the OCTETs making up the field-value
                    and consisting of either *TEXT or combinations
                    of token, separators, and quoted-string> 
```

TEXT 定义为：

```
TEXT           = <any OCTET except CTLs,
                 but including LWS> 
```

CTL定义为：

```
CTL            = <any US-ASCII control character
                 (octets 0 - 31) and DEL (127)> 
```

所以不，您不必转义更多的冒号（58），标题行中的第一个始终被视为分隔符，因为冒号不允许在 a 中使用`token`。

因此，在您的示例中，字段名称是`Class`，而`field-value`is `Test: example`。

# node.js - Derbyjs 模板错误

> ID：11758227
> 
> 赞同：1
> 
> 时间：2012-08-01T11:27:01.653
> 
> 标签：node.js, templates, derbyjs

我刚开始尝试 Derbyjs，我已经遇到了问题。我找不到对这个错误的任何支持，很可能是我犯了一些愚蠢的错误。

我正在尝试按照 www.derbyjs.com 文档中的示例呈现视图。

我的应用程序就是这样简单：

```
var app = require('derby').createApp(module);
app.get('/', function (page, model) {
    page.render('home');
 }); 
```

我的观点由两个文件组成。

“索引.html”

```
<import: src="home">
<Body:>
  Default page content 
```

“主页.html”

```
<Body:>
  Welcome to the home page 
```

每当呈现页面时，我都会收到以下错误：

* * *

模板错误

错误：“home”的模板导入... ...不能包含内容

* * *

如您所见，这是一个非常简单的示例。我错过了什么？即使“home.html”文件为空，我也会收到该错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:11:27.450

好吧，我从一位开发人员那里得到了答案。

模板解析器中似乎有一个可能已经修复的细微错误。

前面有空格或换行符

```
<import: src="home"> 
```

导致解析器引发错误。写作

```
<import: src="home"><Body:> 
```

解决了这个问题。

# jmeter - 如何在 Jmeter 中分配出站流量

> ID：11758231
> 
> 赞同：0
> 
> 时间：2012-08-01T11:27:09.260
> 
> 标签：jmeter, traffic, distribute

jmeter 如何在两个用户组之间分配出站流量。例如，第 1 组获得 30% 的流量，第 2 组获得 70% 的流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:34:20.423

有多种方法可以做到这一点。您可以使用一个非常简单的[吞吐量控制器](http://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller)，或者，如果您只想触发一个请求，您可以创建一个简单的[Random Variable](http://jmeter.apache.org/usermanual/component_reference.html#Random_Variable)，将其设置为 0 到 10 之间的随机数，然后使用[If Controller](http://jmeter.apache.org/usermanual/component_reference.html#If_Controller)来控制执行.

就像是：

```
Thread Group
    - Random Variable 0 - 10
    - If Controller set to ${myVar} <= 3
        HTTP Sampler
    - If Controller set to ${myVar} > 3
        HTTP Sampler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:38:27.020

不确定我是否像 Oliver 那样理解您的要求，对我来说，您只需设置一个线程组，线程总数占总线程的 30%，第二个线程组占 70%。

否则，您可以按照 Oliver 理解的另一种方式阅读本文：

*   [http://www.ubik-ingenierie.com/blog/jmeter_control_percentage_of_sampler/](http://www.ubik-ingenierie.com/blog/jmeter_control_percentage_of_sampler/)

它展示了如何分发，但与吞吐量控制器相反，它确保至少执行一个样本。

# jquery - 谷歌地图没有加载到隐藏的 div 上

> ID：11758237
> 
> 赞同：2
> 
> 时间：2012-08-01T11:27:24.963
> 
> 标签：jquery, css

我需要有两个地图，每个地图都以 css 选项卡格式显示。我遇到的问题是第二个“隐藏”地图似乎没有加载，导致它出现在选项卡区域的左上角。

有没有办法可以修改我的代码，以便在单击选项卡时加载或至少加载两个地图。 [小提琴在这里](http://jsfiddle.net/xzer6/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:48:38.747

谷歌浏览器在控制台中抛出错误。

```
Unsafe JavaScript attempt to access frame with URL http://jsfiddle.net/xzer6/1/ from frame with URL http://maps.google.co.uk/maps? 
```

在stackoverflow上有一些关于这个问题的问题，但是afaik没有解决方案。我也没有找到解决方案。

谷歌地图似乎试图访问不允许的父框架（您的页面）。唯一的解决方法是使用 Google Maps API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:17:04.257

触发`visibility`而不是`display`CSS 属性可确保地图附加到 DOM 并在加载时呈现（而第二个不显示），这会导致预期的行为。

我稍微调整了你的代码：http: [//jsfiddle.net/73hZa/](http://jsfiddle.net/73hZa/)

# iphone - 将值传递给另一个方法

> ID：11758241
> 
> 赞同：0
> 
> 时间：2012-08-01T11:27:33.843
> 
> 标签：iphone, memory-management, nsstring

我在方法中设置字符串的`viewdidload`值，并在应用程序崩溃的按钮操作方法中获取字符串值。我可以知道崩溃的原因以及如何将值传递给方法。

在 .h 文件中

```
NSString *test; 
```

在 .m 文件中

```
-(void)viewDidLoad 
{
    test = [NSString stringWithFormat:@"sample"];
}

-(IBAction) buttonPressed:(id)sender 
{
    NSLog(@"%@", test);
} 
```

当我按下按钮时，应用程序崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:43:14.533

让我尝试更详细地解释它：

`.h`您在文件中有一个字符串变量。在视图中确实加载了您将其分配为：

```
test = [NSString stringWithFormat:@"sample"]; 
```

这段代码中实际发生的是您的测试是一个自动释放的对象。当你使用 this 和 object 时`alloc`，`init`this 是自动释放的对象，将在你占用它的方法后释放内存。

为了避免这种情况，您可以通过创建属性来使用**@Mehul 的解决方案。**这违背了封装概念。有时你有一些你不想在类之外访问的对象，或者不想与对象一起显示。在这些情况下使用以下内容：

```
test = [[NSString stringWithFormat:@"sample"] retain]; // or
test = [[NSString alloc] initWithFormat:@"sample"]; 
```

这将使您的字符串保持活力，直到您释放它。

还有一种方式不好用，但是想告诉大家，让大家更好的理解。使用

```
test = @"sample"; 
```

如果您不想附加字符串或将其与格式一起使用，您可以将简单字符串分配给您的`NSString`对象。

使用它会有无限`retainCount`的测试变量。您可以使用它来避免崩溃，但这不是可取的，因为正如我所说的那样，`retaiCount`您无法释放它并在使用后释放内存。所以早期的方法更正确。

这适用于所有使用类方法创建的自动释放对象，而不是使用`init`.

希望这会让你更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:36:05.790

请尝试使用此解决方案，我认为这会对您有所帮助，

`test`像这样在文件中创建属性`.h`，，

```
@property(nonatomic,retain) NSString *test; 
```

`synthesize`它在这样的`.m`文件中，

```
@synthesize test; 
```

现在`test`像`self.test`这样在.m文件中使用，

```
-(void)viewDidLoad 
{
    self.test = [NSString stringWithFormat:@"sample"];
}

-(IBAction) buttonPressed:(id)sender 
{
    NSLog(@"%@", self.test);
} 
```

另一个解决方案就是`retain`那个`test`字符串`ViewDidLoad`，我认为这也会帮助你..

希望对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:47:42.963

我认为**简单的分配**将解决问题。只需在 viewDidLoad 方法中替换此代码

```
-(void)viewDidLoad {

test=[[NSString alloc]initWithString:@"Sample"]; 
```

}

# sql-server - 如何在 SQL 中使用 group by 更新列

> ID：11758252
> 
> 赞同：1
> 
> 时间：2012-08-01T11:27:49.087
> 
> 标签：sql-server

`GROUP BY`我有两张表，我想从数据中更新一行

这是我的代码：

***第二个代码：***

```
UPDATE [TABLE].[dbo].[Movies]
SET [NumFrames] = 
   (SELECT COUNT(ImageURL) as "Count"
    FROM [TABLE].[dbo].[Frames]
    GROUP BY Movie_Id)
GO 
```

***第一个代码：***

```
(SELECT COUNT(ImageURL) as "Count"
FROM [TABLE].[dbo].[Frames]
GROUP BY Movie_Id 
```

第一个代码给我一行数字

```
Count
 12
  6
 10
 10
 10 
```

我想把它插入`Movies.NumFrames`

第二个代码给我一个错误

> 消息 512，级别 16，状态 1，第 1 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

请帮忙

我确定这很简单

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:32:01.720

您需要使用 -`WHERE`子句（`GROUP BY`不再需要）。
否则，您的子查询会为每个返回一行`Movie_Id`，因此您有不止一行可用作更新的源。

```
UPDATE [TABLE].[dbo].[Movies]
   SET [NumFrames] = 
    ( SELECT COUNT(ImageURL) as "Count"
      FROM [TABLE].[dbo].[Frames]
      WHERE [TABLE].[dbo].[Frames].Movie_Id = [TABLE].[dbo].[Movies].Movie_Id
    ) 
```

# java - 如何在 weblogic 服务器上配置批处理作业

> ID：11758256
> 
> 赞同：0
> 
> 时间：2012-08-01T11:27:52.970
> 
> 标签：java, weblogic, quartz-scheduler, batch-processing

我使用quartz创建了一个独立的java应用程序。我想在weblogic上部署独立程序，以便它可以作为批处理作业运行。你能帮我如何在weblogic上部署java应用程序并运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:04:37.477

我认为这样做的一种方法是创建新线程并在其中执行批处理工作。您可以将您的类添加到 Weblogic 类路径并像 start 或shoutdown 类一样使用它。

[这](http://docs.oracle.com/cd/E13222_01/wls/docs81/ConsoleHelp/startup_shutdown.html)是有关 oracle 文档的链接。

# symfony - 无法解决symfony2中的路由

> ID：11758257
> 
> 赞同：0
> 
> 时间：2012-08-01T11:27:59.867
> 
> 标签：symfony

我正在使用 jobeet 的教程，并且正在关注 sonataAdmin。我已将我的 app/config/routing.yml 配置如下：

```
admin:
    resource: '@SonataAdminBundle/Resources/config/routing/sonata_admin.xml'
    prefix: /admin

_sonata_admin:
    resource: .
    type: sonata_admin
    prefix: /admin 
```

我还配置了我的 config.yml 如下：

```
# app/config/config.yml
sonata_admin:
    title: Jobeet Admin

sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]

        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss: 
```

当我运行网址`http://localhost/admin/dashboard`时，我遇到了问题

> 无法导入资源“C:/wamp/www/Symfony/app/config”。来自“C:/wamp/www/Symfony/app/config\routing.yml”。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:30:52.610

`.`不是有效资源。-directive`resource`用于导入外部配置，但`.`不指向任何地方。有关详细信息，请参阅[包括外部路由资源](http://symfony.com/doc/current/book/routing.html#including-external-routing-resources)。我什至猜想，那`sonata_admin`也不是一种类型。它通常类似于`xml`，或`annotation`取决于`resource`指向的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T16:07:58.470

这个问题也可能是由 MyBundle/Resources/config/admin.yml 中的服务配置拼写错误引起的，这就是我的情况。

# java - 无法发布 wsdl 文件

> ID：11758263
> 
> 赞同：0
> 
> 时间：2012-08-01T11:28:47.077
> 
> 标签：java, eclipse, web-services

谁能告诉我如何公开 wsdl 文件，即 web 服务是使用 eclipse 在 java 中创建的。我也是 java/eclipse 和 web 服务的自学者，所以任何人都可以让我清楚地说明步骤。

谢谢你的时间！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:07:26.663

Apache Axis 有一些我经常使用的很酷的工具——要生成 wsdl，请使用[java2wsdl](http://ws.apache.org/axis/java/user-guide.html#Java2WSDLBuildingWSDLFromJava)。它有一个命令行版本，还有一个 Maven 插件（我强烈推荐），它会在您每次打包 Web 服务时自动为您重新生成 wsdl。

更重要的是，axis 的东西还提供了客户端存根的自动生成，您可以通过这些存根在消费者应用程序或服务中使用您的 Web 服务。或者，也可以为此使用[JAX-WS 工具。](http://jax-ws.java.net/jax-ws-21-ea1/docs/jaxws-tools.html)无论哪种情况，我都建议使用 Maven 自动化该过程。

如果您以这种方式将 wsdl 与您的应用程序打包在一起（而不是让服务器自动为您执行此操作），您可以确定您的合同在任何平台上看起来都是一样的。

# java - 可以从java运行导出命令吗？

> ID：11758267
> 
> 赞同：4
> 
> 时间：2012-08-01T11:29:13.937
> 
> 标签：java

> **可能重复：**
> [从 java 运行 shell 命令](https://stackoverflow.com/questions/2460297/run-shell-command-from-java)

我想导出一些变量，所以我有这个命令。

```
Runtime.getRuntime().exec("export a=b"); 
```

这个命令有什么问题，因为这个抛出异常：

java.io.IOException：无法运行程序“导出”：java.io.IOException：错误=2，没有这样的文件或目录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:30:53.047

export 是一个shell命令，而不是程序。最好的方法是将所有shell逻辑封装到一个shell脚本中，然后执行“/bin/sh /path/to/file.sh”

# php - 将用户注册到我的数据库中

> ID：11758272
> 
> 赞同：0
> 
> 时间：2012-08-01T11:29:41.190
> 
> 标签：php, facebook, api, oauth

我有一个运行良好的应用程序，但启动速度很慢。我注意到所有其他应用程序的主页都是 index.php，因为我的 index.php 是一个页面，用于检查是否在我的数据库中注册，如果没有添加到我的数据库中。

我假设他们在 Auth 部分有一个重定向，以检查是否已注册到他们的数据库中。我不知道该怎么做。

我认为他们使用 OAuth 注册到自己的数据库是否正确？如果这是肯定的，是否有人有一个链接来解释这一点以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:40:38.767

OAuth 与将数据保存到数据库无关。OAuth 是用于通过网站验证用户身份的协议，无需向第三方网站透露用户​​名/密码。

如何将数据保存到数据库取决于您。大多数人将拥有某种数据库后端（例如 MySQL），并使用 Query 保存数据。您首先需要从 Facebook 检索数据（使用 Graph API 并调用 /me），然后将数据插入数据库。

简单地使用 OAuth 将无法实现上述任何一项。您仍然需要获取数据，然后保存数据。OAuth 只会为您提供获取要保存的数据的访问权限。

# crystal-reports - 水晶报告 - 如何从字符串中提取日期

> ID：11758273
> 
> 赞同：0
> 
> 时间：2012-08-01T11:29:42.253
> 
> 标签：crystal-reports

使用 Crystal Reports 2008，我需要从文本字段中提取日期。该日期通常采用 dd/mm/yy 格式，但也可以输入为 d/m/yy、dd/m/yyyy 等。

此日期可以出现在字符串中的任何位置。

目前我依赖于日期放在字符串末尾的事实，没有后面的句号，并使用 LEFT/RIGHT 来提取每个日期部分。然后将这些部分传递给另一个公式以创建完整日期：

Dim AllocationDate() as Date If Not(IsNull({Command.Notes})) then Formula = DateValue ((ToNumber ({@Year})), (ToNumber ({@Month})), (ToNumber ({@Day} )))

但是，如果有人使用不同的格式，请在整个报告结束的日期之后添加句号或更多注释。

有什么方法可以通过寻找模式来提取这个日期？我猜我可以使用 TRIM 来解决格式上的不一致问题。

tyvmia

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:50:01.417

您可能要考虑使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)。

Crystal Reports 没有对正则表达式的本机支持，因此您需要添加一个 UFL：[Crystal Reports：有没有办法在 Crystal Reports 中进行正则表达式？](https://stackoverflow.com/questions/439829/crystal-reports-is-there-a-way-to-regex-in-crystal-reports)

您应该能够根据您的需要调整此问题中的模式：[Javascript date regex DD/MM/YYYY](https://stackoverflow.com/questions/5465375/javascript-date-regex-dd-mm-yyyy)

最后，您可以使用[regexpal.com](http://regexpal.com/)测试文本上的模式。

** 编辑 **

创建 SQL 表达式字段（Oracle 10 语法）以提取日期字符串并将其转换为日期字段：

```
// {%Allocation Date}
(
  -- match date-like string, then convert to date type; is no dates are found, NULL is returned
  TO_DATE( REGEXP_SUBSTR( TABLE.FIELD, '\d{1,2}\/\d{1,2}\/\d{2,4}',1 ,1), 'dd/mm/yyyy')
) 
```

虽然你可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T22:53:52.430

并且，作为最后的手段，您可以尝试通过替换表示 CR、LF 等的特殊字符将多行字符串转换为长字符串。用空格或其他无害字符替换它们，然后将生成的字符串视为它只是一个常规字符串（中间有日期）。

您仍然需要做出一些假设才能使这成为可能：每个字符串一个日期，所有特殊字符都是已知的（或者您必须测试所有可能的特殊字符），日期与格式有一定的一致性，等等。

# php - Zend Autoloader 在使用命令提示符 (CLI) 时不起作用

> ID：11758278
> 
> 赞同：0
> 
> 时间：2012-08-01T11:30:00.797
> 
> 标签：php, zend-framework, autoload

我遇到了 Zend_Loader_Autoloader 的问题，当我通过 Web 浏览器运行应用程序时它工作正常。我用我的几个模块进行了测试。但是我确实有一些 php 脚本可以作为 cron 作业运行。当我试图删除 require_once 行并让 zend 自动加载器工作时，它无法加载类。如果我做错了什么或者我需要改变我的方法，我对这个问题感到非常沮丧。以及为什么这不能简单地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:15:56.513

这段代码对我有用：

```
define('WWW_PATH', dirname(__FILE__) . '/../..');

set_include_path(implode(PATH_SEPARATOR, array(realpath(WWW_PATH . '/library'), get_include_path())));

require_once 'Zend/Loader/Autoloader.php';

$autoloader = Zend_Loader_Autoloader::getInstance();

$autoloader->registerNamespace('Zend_'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:47:57.370

我的猜测是 php.ini 文件在 apache sapi 和 cli 版本之间有所不同。safe_mode、include_path 和/或 open_basedir 的值可能不同。

# opengl-es - 安卓中的OpenGL GLES20.GL_CLAMP_TO_EDGE

> ID：11758281
> 
> 赞同：0
> 
> 时间：2012-08-01T11:30:16.370
> 
> 标签：opengl-es

将纹理渲染为矩形（2 tri）：

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,
                       GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER,
                       GLES20.GL_NEAREST); 
```

没问题。但我不希望纹理被拉伸，所以我试图更改为：

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, 
                       GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, 
                       GLES20.GL_CLAMP_TO_EDGE); 
```

但我得到的一切都是黑屏。

有什么简单的方法可以避免纹理以适应屏幕保持比例？

这是我加载纹理的地方

```
public static int loadTexture(final Context context, Bitmap bitmap)
{
    final int[] textureHandle = new int[1];

    GLES20.glGenTextures(1, textureHandle, 0);

    if (textureHandle[0] != 0)
    {
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inScaled = false;   // No pre-scaling

        // Read in the resource
        //final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);

        // Bind to the texture in OpenGL
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);

        // Set filtering
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);

        // Load the bitmap into the bound texture.
        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);

        // Recycle the bitmap, since its data has been loaded into OpenGL.
        bitmap.recycle();                       
    }

    if (textureHandle[0] == 0)
    {
        throw new RuntimeException("Error loading texture.");
    }

    return textureHandle[0];
} 
```

这是一些渲染器代码：

```
public void onSurfaceCreated(GL10 glUnused, EGLConfig config)
{

    String vShaderStr = RawResourceReader.readTextFileFromRawResource(this.context, R.raw.bulge_vertex_shader);

    String fShaderStr = RawResourceReader.readTextFileFromRawResource(this.context, R.raw.bulge_fragment_shader);

    // Load the shaders and get a linked program object
    mProgramObject = ESShader.loadProgram(vShaderStr, fShaderStr);

    // Get the attribute locations
    mPositionLoc = GLES20.glGetAttribLocation(mProgramObject, "a_position");
    mTexCoordLoc = GLES20.glGetAttribLocation(mProgramObject, "a_texCoord" );

    centerUniformLoc = GLES20.glGetUniformLocation(mProgramObject, "center");

    radiusUniformLoc = GLES20.glGetUniformLocation(mProgramObject, "radius");

    scaleUniformLoc = GLES20.glGetUniformLocation(mProgramObject, "scale");

    Bitmap b  = ((theApplication)context.getApplicationContext()).getBitmap();

    mTextureId = TextureHelper.loadTexture(this.context, b);

    GLES20.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

}

// /
// Draw a triangle using the shader pair created in onSurfaceCreated()
//
public void onDrawFrame(GL10 glUnused)
{
    //distance += 0.01;

    // Set the viewport
    GLES20.glViewport(0, 0, mWidth, mHeight);

    // Clear the color buffer
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Use the program object
    GLES20.glUseProgram(mProgramObject);

    // Load the vertex position
    mVertices.position(0);
    GLES20.glVertexAttribPointer ( mPositionLoc, 3, GLES20.GL_FLOAT, 
                                   false, 
                                   5 * 4, mVertices );

    // Load the texture coordinate
    mVertices.position(3);
    GLES20.glVertexAttribPointer ( mTexCoordLoc, 2, GLES20.GL_FLOAT,
                                   false, 
                                   5 * 4, 
                                   mVertices );

    GLES20.glEnableVertexAttribArray ( mPositionLoc );
    GLES20.glEnableVertexAttribArray ( mTexCoordLoc );

    // Bind the texture
    GLES20.glActiveTexture ( GLES20.GL_TEXTURE0 );
    GLES20.glBindTexture ( GLES20.GL_TEXTURE_2D, mTextureId );

    GLES20.glUniform2f(centerUniformLoc, mCenterData[0], mCenterData[1]);

    GLES20.glUniform1f(radiusUniformLoc, radius);

    GLES20.glUniform1f(scaleUniformLoc, scale);

    // Set the color matrix uniform unit to 1

    GLES20.glDrawElements ( GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, mIndices );
} 
```

以及具有纹理坐标的四边形顶点

```
private final float[] mVerticesData =
{ 
        -1f, 1f, 0.0f, // Position 0
        0.0f, 0.0f, // TexCoord 0
        -1f, -1f, 0.0f, // Position 1
        0.0f, 1.0f, // TexCoord 1
        1f, -1f, 0.0f, // Position 2
        1.0f, 1.0f, // TexCoord 2
        1f, 1f, 0.0f, // Position 3
        1.0f, 0.0f // TexCoord 3
};

private final short[] mIndicesData =
{ 
        0, 1, 2, 0, 2, 3 
}; 
```

我想要的只是看到纹理缩放到屏幕尺寸，但保持纵横比不会被拉伸。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T22:17:04.713

为了避免这种黑屏问题，您需要*将*四行合并，而不是将前两行替换为后两行。在您的代码中，您正在替换

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,
                   GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER,
                   GLES20.GL_NEAREST); 
```

和

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, 
                   GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, 
                   GLES20.GL_CLAMP_TO_EDGE); 
```

最初，我做了同样的事情；但是，更正应该是添加钳位线而不是替换过滤线。工作代码是一个组合：

```
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER,
                   GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER,
                   GLES20.GL_NEAREST);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, 
                   GLES20.GL_CLAMP_TO_EDGE);
GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, 
                   GLES20.GL_CLAMP_TO_EDGE); 
```

# java - 难以理解这种语法

> ID：11758285
> 
> 赞同：3
> 
> 时间：2012-08-01T11:30:26.400
> 
> 标签：java

我在阅读其他一些代码时遇到了这种语法

```
Map<String, String> map = new HashMap<String, String>() {
    { 
         put("a", "b");
    }
}; 
```

我知道如何使用`anonymous inner class`，但这似乎有所不同。有人可以解释一下上面的工作原理以及它有什么不同`Map<String, String> map = new HashMap<String, String>(); map.put("a", "b");`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T11:31:54.990

您基本上是在创建一个匿名类实例并指定一个[实例初始化程序](http://blog.ryanrampersad.com/2009/11/18/static-and-instance-initializers-in-java/)。把它想象成一个普通的类，例如：

```
class Person {

  String age, name;

  List<String> hobbies;

  {
    hobbies = new ArrayList<String>();
  }

  public Person(String name, String age) {
    this.name = name;
    this.age = age;
  } 

} 
```

你认为以上是做什么的？您的匿名班级正在做类似的事情。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:42:53.973

正如 Sanjay T. Sharma 清楚地解释的那样，它正在创建匿名类实例。事实上，它正在扩展`java.util.HashMap`. 考虑以下代码：

```
package com.test;

import java.util.HashMap;
import java.util.Map;

public class Demo {
    public static void main(String[] args) {
        Map<String, String> mapSimple = new HashMap<String, String>();
        System.out.println("Simple java.util.HashMap:");
        System.out.println("\t" + mapSimple.getClass());

        Map<String, String> map = new HashMap<String, String>() {
            {
                put("a", "b");
            }
        };

        System.out.println("Anonymous class based on java.util.HashMap:");
        System.out.println("\t" + map.getClass());
        System.out.println("\t" + map.getClass().getSuperclass());
    }
} 
```

它产生以下输出：

```
Simple java.util.HashMap:
    class java.util.HashMap
Anonymous class based on java.util.HashMap:
    class com.test.Demo$1
    class java.util.HashMap 
```

注意此类匿名类的名称，并且该类扩展了`java.util.HashMap`.

# objective-c - 如何让用户在 iOS 中绘制重叠颜色？

> ID：11758287
> 
> 赞同：0
> 
> 时间：2012-08-01T11:30:41.590
> 
> 标签：objective-c, ios, xcode, drawing

我正在创建这样的[绘图应用程序](http://itunes.apple.com/kz/app/coloring-book.-dino-baby./id493282539?mt=8)，但我有一个问题。问题是，当我用一种颜色画一条线，然后用另一种颜色画一条线时，它会在线条相交处组合两种颜色。

![](../Images/5b06638b0b2bfe95d481b38361a6a542.png)

```
- (void)drawRect:(CGRect)rect
{

    [curImage drawAtPoint:CGPointMake(0, 0)];
    CGPoint mid1 = midPoint(previousPoint1, previousPoint2); 
    CGPoint mid2 = midPoint(currentPoint, previousPoint1);

    CGContextRef context = UIGraphicsGetCurrentContext(); 

    [self.layer renderInContext:context];

    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y); 
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);

    CGContextStrokePath(context);

    [super drawRect:rect];

    [curImage release];

} 
```

该项目的其余部分可[在 GitHub 上找到](http://github.com/levinunnink/Smooth-Line-View)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:42:17.383

也许看看混合模式。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/tdef/CGBlendMode](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/tdef/CGBlendMode)

# android - 解析 XML 并获取 URL 值以下载文件

> ID：11758293
> 
> 赞同：1
> 
> 时间：2012-08-01T11:30:48.880
> 
> 标签：android, xml, xml-parsing, download

我在[这里](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)使用了一个关于列表视图的教程，它获取了一些信息，比如艺术家的名字......以及艺术家图像的 URL 和制作列表视图。

```
 <music>
    <song>
    <id>1</id>
    <title>Someone Like You</title>
    <artist>Adele</artist>
    <duration>4:47</duration>
    <thumb_url>http://api.androidhive.info/music/images/adele.png</thumb_url>
    </song>
    <song>
    <id>2</id>
    <title>Space Bound</title>
    <artist>Eminem</artist>
    <duration>4:38</duration>
    <thumb_url>
    http://api.androidhive.info/music/images/eminem.png
    </thumb_url>
    </song>
    .
    .
    . 
```

我想添加另一个名为 mp3 的节点，并将歌曲的 URL 提供给 XML 中的每个数组，以便通过单击列表的每一行来下载正确的 mp3 文件。如下所示：

```
<music>
<song>
<id>1</id>
<title>Someone Like You</title>
<artist>Adele</artist>
<duration>4:47</duration>
<thumb_url>http://api.androidhive.info/music/images/adele.png</thumb_url>
**<mp3> some URL1 </mp3>**
</song>
<song>
<id>2</id>
<title>Space Bound</title>
<artist>Eminem</artist>
<duration>4:38</duration>
<thumb_url>http://api.androidhive.info/music/images/eminem.png</thumb_url>
**<mp3> some URL2 </mp3>**
</song>
.
.
. 
```

我更改了如下所示的主要 java 代码，但我可以下载定义为之前输入的直接 URL的“file_url”(new DownloadFileFromURL().execute( **file_url );) 字符串。**请帮助我从 xml 获取 mp3 URL 以供下载。

```
 public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://api.androidhive.info/music/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;

  // Progress Dialog
private ProgressDialog pDialog;
  // Progress dialog type (0 - for Horizontal progress bar)
public static final int progress_bar_type = 0;
  // File url to download
private static String file_url = "the URL of the file that I don't want to use this method for downloading the file";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            new DownloadFileFromURL().execute(file_url);

        }
    }); 

}   
/**
 * Showing Dialog
 * */
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type:
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Downloading file. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setMax(100);
        pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pDialog.setCancelable(true);
        pDialog.show();
        return pDialog;
    default:
        return null;
    }
}

/**
 * Background Async Task to download file
 * */
class DownloadFileFromURL extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread
     * Show Progress Bar Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(progress_bar_type);
    }

    /**
     * Downloading file in background thread
     * */
    @Override
    protected String doInBackground(String... f_url) {
        int count;
        try {
            URL url = new URL(f_url[0]);
            URLConnection conection = url.openConnection();
            conection.connect();
            // getting file length
            int lenghtOfFile = conection.getContentLength();

            // input stream to read file - with 8k buffer
            InputStream input = new BufferedInputStream(url.openStream(), 8192);

            // Output stream to write file
            OutputStream output = new  FileOutputStream("/sdcard/Downloadmanager.zip");

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                // After this onProgressUpdate will be called
                publishProgress(""+(int)((total*100)/lenghtOfFile));

                // writing data to file
                output.write(data, 0, count);
            }

            // flushing output
            output.flush();

            // closing streams
            output.close();
            input.close();

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }

        return null;
    }

    /**
     * Updating progress bar
     * */
    protected void onProgressUpdate(String... progress) {
        // setting progress percentage
        pDialog.setProgress(Integer.parseInt(progress[0]));
   }

    /**
     * After completing background task
     * Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after the file was downloaded
        dismissDialog(progress_bar_type);

    }

} 
```

}

# javascript - 从 DOM 中获取元素的 HTML 和样式

> ID：11758299
> 
> 赞同：0
> 
> 时间：2012-08-01T11:31:04.263
> 
> 标签：javascript, html, styles

我有一个简单的问题 - 甚至可以从 DOM 中获取元素的 HTML 样式吗？我不需要任何 jQuery 对象，只需要具有所有样式的纯 HTML。

我会使用它，以防我在行中有不同样式的网格，并且我想获取该 html 和样式并将其发送到服务器，我将在邮件正文中使用它 - 当然以编程方式。

有没有一种优雅的方式来做到这一点？

Tnx 寻求答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:34:53.917

$.html() （不带参数）正是这样做的：http: [//api.jquery.com/html/](http://api.jquery.com/html/)

从页面上的示例：

```
<p>

  <b>Click</b> to change the <span id="tag">html</span>
</p>
<script>
  $("p").click(function () {
    var htmlStr = $(this).html();
    $(this).text(htmlStr);
  });
</script> 
```

调用该函数时，htmlStr 的内容为

```
<b>Click</b> to change the <span id="tag">html</span> 
```

（作为字符串）

# php - Ajax，PHP - 从数据库中获取

> ID：11758303
> 
> 赞同：0
> 
> 时间：2012-08-01T11:31:19.457
> 
> 标签：php, jquery, mysql, ajax

我在收集从数据库中获取的数据时遇到了一些问题。不知道如何继续。

到目前为止我做了什么：

**JQ:**

```
$(document).ready(function(){

  $('#submit').click(function(){

    var white = $('#white').val();

    $.ajax({

    type:"POST",
    url:"page.php",
    data:{white:white}

    });

  });  

}); 
```

**到目前为止的 PHP（请求的 page.php）：**

```
$thing = mysql_real_escape_string($_POST["white"]); 

..database connect stuff..

$query = "SELECT * FROM table1 WHERE parameter='$thing'";

if($row = mysql_query($query)) {

while (mysql_fetch_array($row)) {

    $data[]=$row['data'];

}

} 
```

我不知道的是如何发送数据并使用 ajax 接收数据。

请求不成功时的错误怎么办？

ajax 调用对数据库注入的安全性如何？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T11:42:14.830

拨打电话后，您将需要一个`success`参数`$.ajax()`来获得响应

```
$('#submit').click(function(){

    var white = $('#white').val();
    if(white == '')
    {
        // display validation message
    }
    else
    {
       $.ajax({

       type:"POST",
       url:"page.php",
       data:{"white":white}
       success:function(data){
          $('#someID').html(data);
       } 

    });

  }); 
```

无论您在其中回显什么（HTML 标记或变量）`page.php`都将显示在 ID 为 的元素中`someID`，最好将元素保持为`<div>`

在`page.php`中，您可以通过使用捕获输入元素中输入的值，`$_POST['white']`并使用它来执行您想要执行的任何 DB 操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:25:53.360

```
 To send out data to you can write following line at the end :

    echo json_encode($data);exit;

    To receive response and errors when request is not successful in ajax :

jQuery.ajax({
type:"POST",
    url:"page.php",
    data:{white:white},
    asyn: false,
     success : function(msg){      
          var properties = eval('(' + msg + ')');

          for (i=0; i < properties.length; i++) {
            alert(properties[i]);
          }
    },
     error:function (XMLHttpRequest, textStatus, errorThrown) {
         alert(textStatus);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T04:26:46.650

```
 For Feeling more safety do the following things: 
    1\. Open a Session.
    2\. Detect Referrer.
    3\. Use PDO Object instead mysql_real_escape_string
    4\. Detect Ajax call :

    if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) || 
    strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) !='xmlhttprequest') {
       //Is Not Ajax Call!
   } 
```

# c# - 在 C# 中保存固定数量数据的最佳类

> ID：11758306
> 
> 赞同：2
> 
> 时间：2012-08-01T11:31:27.470
> 
> 标签：c#

假设我有很多需要处理的字符串，我喜欢将最后处理的字符串放在内存中以避免重复处理。我只需要记录最后 100 个字符串，这意味着如果我使用

`List<string> oldString`之后`oldString.Add()`，我必须使用`oldString.TakeFromEnd(100)`As you know, `TakeFromEnd()`not exist，这意味着如果我走这条路，我必须写很多东西来保持 100 的长度`List`，这会导致我可以想象的糟糕的性能。

我想问一下，系统类中是否有任何预先制作的只保存固定数量的数据，并在添加新数据时丢弃最旧的数据。谢谢

**[编辑]**

`Queue<string>`确实很好，用于`.Any()`检查是否已经存在，用于`.Enqueue()`添加*（不是下面回答的Equeue，它拍摄了N）*，用于`.Count`检查长度，并`.Dequeue()`删除第一个添加的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T11:34:07.140

与一个[队列](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)

这个想法是：

```
public void addToQueue(Object obj){
    if (myQueue.Count > 100)
        myQueue.Dequeue();

    myQueue.Equeue(obj);
} 
```

这大致是您需要使用的代码草图，但您会明白的。

然后，您将拥有一个仅包含最新 100 条记录的队列

# mysql - 选择变量的第二低“id”值

> ID：11758309
> 
> 赞同：0
> 
> 时间：2012-08-01T11:31:38.017
> 
> 标签：mysql

如何编辑此代码，以便它选择具有第二低“id”值的 $name：

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC LIMIT 1 
```

我认为它可能是这样的：

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC + 1 LIMIT 1 
```

但这是不对的。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:34:44.090

像这样指定偏移量：

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC LIMIT 1 OFFSET 1 
```

或者像这样：

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC LIMIT 1, 1 
```

在后一种情况下，第一个数字是偏移量，第二个是返回的元素数。

### 也可以看看：

*   [SELECT 语法 - MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:38:09.913

尝试

```
 SELECT * 
    FROM users 
   WHERE name = '$name' 
ORDER BY id ASC 
   LIMIT 1, 1 
```

文件：

> 定义：**限制**用于将您的 MySQL 查询结果限制在指定范围内。您可以使用它来显示前 X 个结果，或显示 X - Y 结果的范围。它被表述为限制 X、Y，并包含在查询的末尾。X 是起点（记住第一条记录是 0），Y 是持续时间（要显示多少条记录）。

例子 ：

```
SELECT * FROM `your_table` LIMIT 0, 10 
```

这将显示数据库中的前 10 个结果。

```
SELECT * FROM `your_table` LIMIT 5, 5 
```

这将显示记录 6、7、8、9 和 10

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:34:53.330

您可以在限制子句中指定偏移量：

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC LIMIT 1, 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:34:45.847

```
SELECT * FROM users WHERE name='$name' ORDER BY id ASC LIMIT 1,1; 
```

# model-view-controller - Symfony 2 在哪里放置视图逻辑

> ID：11758310
> 
> 赞同：0
> 
> 时间：2012-08-01T11:31:42.723
> 
> 标签：model-view-controller, symfony

如果您发现控制器的代码由于繁重的视图逻辑而无法阅读和混乱，那么最好的策略是什么？使用助手、服务还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:16:27.203

最佳实践是将所有逻辑封装在**services**中。代码将更加解耦，易于维护。在小型服务或大型服务之间做出决定是您的责任，但最佳实践是让服务具有一个已定义的功能、中等规模、可维护和可测试

如果逻辑是从表单中获取数据，或者与表单相关，最好的选择是使用**处理程序**来封装表单逻辑。您可以在[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle/tree/master/Form/Handler)中看到处理程序的实时示例。

# java - Wicket 的枚举值国际化

> ID：11758316
> 
> 赞同：1
> 
> 时间：2012-08-01T11:32:06.477
> 
> 标签：java, internationalization, wicket

我在 Clazz 类有一个枚举 FooBar，其中包含 FOO 和 BAR，如下所示：

```
class Clazz {
    enum FooBar{
        FOO,
        BAR
    }
} 
```

我现在想使用 wicket`getString()`方法来本地化值`FOO`和`BAR`. 我能做的最好的就是在 i18n 文件中定义

```
 Clazz.FooBar.FOO=foo
 Clazz.FooBar.BAR=bar 
```

我用这段代码得到值

```
 fooBar = FooBar.FOO;
 getString("Clazz.FooBar." + fooBar.name()); 
```

我听说这可以在不`Clazz.FooBar`添加 i18n 查询字符串的情况下实现，但是要调用的方法会有所不同。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:00:24.823

您可以将此方法放在基本页面/面板中：

```
public String getString(Enum<?> value) {
    Class<?> enclosingClass = value.getClass().getEnclosingClass();
    String key = (enclosingClass == null ? "" : enclosingClass.getSimpleName() + ".")
            + value.getClass().getSimpleName() + "." + value.name();
    return getString(key);
} 
```

然后你可以简单地调用它

```
getString(Clazz.FooBar.FOO); 
```

它将返回您在属性文件中定义的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T18:01:16.743

我不建议您将枚举常量名称直接存储在属性文件中，原因很简单，两个不同的枚举可以拥有相同的名称。

下面是我想出的代码

```
class Clazz {
enum FooBar {
    //StrId are keys from property file e.g. below
    FOO("com.abc.classz.foobar.FOO"), BAR("com.abc.classz.foobar.BAR");

    private final String strId;

    private FooBar(String id) {
        this.strId = id;
    }

    // toString can also be used here I am just keen on having seperate
    // method
    public String getName() {
        //Load Value for strId from properties file
        return null;
    }
}
} 
```

这将使您的枚举和您的 i18n 目的分开且清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:43:42.957

请参见下面的示例 Enum 类。您可能希望根据自己的需要对其进行更多自定义。

```
 public enum FooBar {

    foo("foobar.foo"),
    bar("foobar.bar");

    private String key;

    ErrorCodeEnum(final String key) {
        this.key = key;     
    }

    public String toString() {
        return key;
    }
} 
```

然后您可以使 toString 方法直接返回键，以便您可以使用

```
 getString(ErrorCodeEnum.ERROR1); 
```

或者您可以直接覆盖 toString 方法，如下所示

```
 public enum FooBar {

    foo, bar;

     public String toString(){
        return getClass().getName()+"."+name();
     }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T17:04:57.747

你可以简单地定义

```
FOO=foo
BAR=bar 
```

在您的属性中并通过以下方式访问它

```
getString(fooBar.name()); 
```

还是我错过了一些观点？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T18:45:29.623

我正在寻找一个叫做[`EnumChoiceRenderer`](http://blog.armstrongconsulting.com/?p=163). 主要思想是为例如 DropDownChoise 元素提供 EnumChoiceRenderer，您可以提供我在问题中提出的那种参数。好的，在这个解决方案中，您只能提供

```
 FooBar.BAR=bar
     FooBar.FOO=foo 
```

在您的资源文件中，但这是我在业余时间对此进行更多调查时能找到的最接近的。

*PS。点击本答案开头的 EnumChoiseRenderer 可查看本解决方案的文章。*

# c++ - 关于 ev_default_fork 的 libev 标志

> ID：11758320
> 
> 赞同：0
> 
> 时间：2012-08-01T11:32:29.637
> 
> 标签：c++, c, io, fcntl, libev

我在学习`libev`。但我不`ev_default_fork`明白`ev_loop`. 这是关闭执行的问题吗？喜欢`FD_CLOEXEC fcntl()`国旗吗？什么时候需要设置标志？什么情况下需要这个标志？这是对文档的描述：

> 此函数设置一个标志，导致后续 ev_loop 迭代重新初始化具有内核状态的后端的内核状态。尽管有这个名字，你可以随时调用它，但是在分叉之后，在子进程（或子进程和父进程，但这又没有意义）中最有意义。在使用任何 libev 函数之前，您必须在子进程中调用它，并且它只会在下一次 ev_loop 迭代时生效。
> 
> 另一方面，当且仅当您想在子进程中使用事件库时，您才需要在子进程中调用此函数。如果你只是 fork+exec，你根本不需要调用它。
> 
> 该函数本身非常快，并且在分叉后调用它通常不是问题。为了简单起见，该函数将非常适合调用 pthread_atfork： pthread_atfork (0, 0, ev_default_fork);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:08:25.403

好吧，只需阅读文档，您在之后调用子函数中的函数`fork()`，最好是您做的第一件事。所以你的代码应该是这样的：

```
switch (fork()) {
case -1:
    /* everything's gone pear-shaped */

default:
    /* i am the parent */
    ...
    break;

case 0:
    /* i am the child */
    ev_loop_fork(EV_DEFAULT);
    ...
    break;
} 
```

# html - HTML5：使可编辑的文本区域可拖动而没有副作用？

> ID：11758323
> 
> 赞同：2
> 
> 时间：2012-08-01T11:32:34.027
> 
> 标签：html, drag-and-drop, textarea, draggable

我目前正在开发一个 Web 应用程序，在该应用程序中，我将拥有一个包含可编辑文本区域列表的页面，并且我希望能够更改它们的顺序，只需将每个文本区域拖放到所需位置即可。

基本上，这些文本区域中的每一个都将嵌套在 中，如下所示：

```
<div class="outsideDiv">
    <div>
        <textarea>

        </textarea>            
    </div>       
</div> 
```

当我尝试使用原生 HTML5“可拖动”属性（更准确地说，我把它作为我最外面的属性）实现拖放功能时，我注意到这会使我的文本区域可拖动但也会产生副作用：每当我单击文本区域，键入光标将始终位于位置 0。因此，无法将光标移动到另一个位置，如果您想编辑现有文本，这不是那么方便。

所以我的问题是，我怎样才能使文本区域可拖动，同时保留其所有功能（我的意思是，没有提到的副作用）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:02:20.003

看看jQuery-ui中的可拖动效果（http://jqueryui.com/demos/draggable/）

# android - 在android中以编程方式检查墙纸？

> ID：11758326
> 
> 赞同：1
> 
> 时间：2012-08-01T11:32:43.257
> 
> 标签：android, live-wallpaper, wallpaper

我们的 android 设备主屏幕包含壁纸或动态壁纸。如何以编程方式检查墙纸是否为动态墙纸。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T11:57:27.160

```
WallpaperManager wm=WallpaperManager.getInstance(this);

WallpaperInfo wi=wm.getWallpaperInfo(); 
```

使用这两个类，您可以获得信息。

# sql-server - 在查询中包含函数？

> ID：11758327
> 
> 赞同：4
> 
> 时间：2012-08-01T11:32:51.430
> 
> 标签：sql-server, tsql, sql-server-2000

我有一个依赖于安装在该数据库上的函数的测试数据库的查询。我需要针对另一台没有该功能且无法安装该功能的服务器运行该查询。

对此有什么优雅和/或实用的解决方案吗？该函数非常复杂，带有许多参数，因此我希望有一种语法可以让我将查询的一部分标记为函数，然后从查询的主体调用该代码。

我试过谷歌，但不幸的是，正如你想象的那样，所涉及的词只会导致关于如何创建函数的文章。

编辑：我仅限于此 SQL Server 2000 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:58:58.317

你不能只创建一个内联函数吗？由于您没有权限，创建功能失败？您也许可以替换 CTE。

```
CREATE FUNCTION fn_Test ( @sID nvarchar(30) )
RETURNS table
AS
RETURN (
        SELECT sID, sParID 
        FROM docSVsys 
        WHERE sID = @sID
       )
GO
-- Example of calling the function for a specific region
SELECT *
FROM fn_Test(N'2')
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:40:48.467

我目前最好的答案来自我自己。我将需要处理的数据存储在#temporary 表中，然后使用while 循环，其中包含更新#temporary 表中行所需的逻辑。相当多的返工，但它有效，作为一次运行的操作，我对此很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:12:42.607

我不知道这在 MSSQL 2000 中是否可行，但您也许可以在 tempdb 上创建一个函数并从那里使用它..

在 2008 年，它似乎奏效了。因此，如果您有权在 tempdb 上执行此操作，这可能会起作用。

# zend-framework - 新手的 Zend 会话处理建议:)

> ID：11758329
> 
> 赞同：1
> 
> 时间：2012-08-01T11:32:53.340
> 
> 标签：zend-framework, session

我想问一下 Zend Framework 中的会话处理。我正在使用 Zend_Session_Namespace 进行会话处理。我的问题是我应该如何以有效的方式实现这一点？此刻，我对控制器的每一个操作都进行了会话检查。

我应该如何处理例如布局文件中的会话处理，因为我现在这样做的方式（使用 sessionExists() 检查每个操作并检查是否设置了 userId）似乎非常低效和重复。

谢谢大家的支持！:)

PS如果有任何帮助，这是我用于在我的控制器中进行会话检查的功能：

```
 private function checkSession()
        {
            $session = new Zend_Session_Namespace("userSession");
            if(Zend_Session::sessionExists() && $session->__isset("userId"))
            {
            return true;    
            }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:53:48.713

Joellord 发布的链接应该有所帮助。如果你需要在每个请求上运行一些东西，你应该考虑使用控制器插件——[文档](http://framework.zend.com/manual/en/zend.controller.plugins.html)是一个很好的起点。

如果您实现了身份验证系统，此代码将告诉您用户是否已登录：

> $auth = Zend_Auth::getInstance();
> if($auth->hasIdentity()) { //做点什么...

它还可以扩展为您提供用户对象、他们的角色/权限等。

[Matthew Weier O'Phinney 撰写的这篇文章](http://mwop.net/blog/165-Login-and-Authentication-with-Zend-Framework.html)是学习使用 Zend_Auth 进行基本身份验证的绝佳资源。

# ajax - 存在打开会话时，fastcgi_finish_request 创建挂起的连接

> ID：11758334
> 
> 赞同：7
> 
> 时间：2012-08-01T11:33:08.223
> 
> 标签：ajax, nginx, session-state, php

我有一个客户端发送需要较长处理时间的请求，客户端以 ajax 发送请求。一旦服务器上接受了请求，客户端就会重定向到另一个页面，这由 fastcgi_finish_request 完成（我正在运行 php-fpm）

长工.php：

```
<?php
    fastcgi_finish_request(); 
    sleep(1000); //Simulate long computation time
?> 
```

客户端.js：

```
$.ajax({
    url: "...",
    data: {},
    success: function() {
        top.location.href="next_page.php" 
    }
}); 
```

ajax 被发送并且成功回调导致重定向到 next_page.php 如预期的那样。

但是随后页面停止，直到睡眠结束我才得到任何服务。看起来我的连接正在等待**相同**的php-fpm 进程完成

我正在使用 php-fpm 运行 nginx，知道为什么会发生这种情况吗？

**编辑**：

经过更多调查，我发现这种行为的原因是我有一个活动会话（来自 facebook SDK），当我在 LongWork.php 上销毁会话时：

```
<?php
    session_destroy(); // Session was halting the client from accessing another page
    fastcgi_finish_request(); 
    sleep(1000); //Simulate long computation time
?> 
```

你能反思一下这个解决方案吗？

我应该做一些不同于`session_destroy()`

**编辑：**

在 Lachlan Pease 发表评论之后，我换`session_destroy`了`session_write_close`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:28:39.283

问题在于会话存在，有关更多详细信息，请参阅问题中的编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T15:24:01.877

我也遇到过这个问题，我通过 register_shutdown_function 注册了一个函数来运行，这个函数从 fastcgi_finish_request 开始，而我发现 fastcgi_finish_request() 之后的脚本仍然阻塞用户的页面，而把 session_destroy(); 在 fastcgi_finish_request() 之前；确实有效，并且用户的页面不再阻塞。

# c# - Windows mobile 6.5 C# 应用程序的最佳 EDB

> ID：11758337
> 
> 赞同：1
> 
> 时间：2012-08-01T11:33:24.183
> 
> 标签：c#, windows-mobile

我想在 C# 中为现有的 Windows 移动应用程序创建 EDB。我发现了一些解决方案，例如：

*   DbfDotNet 那里我找到了一个关于这个项目中问题的协调员帖子。(http://dbfdotnet.codeplex.com/discussions/283054)

*   .NET 和 SQL Anywhere 10

*   [来自 MSDN http://msdn.microsoft.com/en-us/library/aa912256](http://msdn.microsoft.com/en-us/library/aa912256)的EDB - 但它在 C++ 中，我不知道如何在 c# 中使用它

*   SQL Server CE - 但“最新版本是支持 .NET Framework 4.0 的 SQL Server Compact 4.0[1]，并在此版本中放弃了对 Windows Mobile 的支持。”

请问您能给我建议并分享您的经验吗？我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:56:46.760

我以前试过沿着这条路走，但我没有找到一个干脆的解决方案。

因此，我开始了一个项目，但放弃了，而是要求我的设备直接与 SQL Server 通信。

如果您无法选择直接与服务器通信，那么您的一个数据库（设备上的本地数据库或主服务器上的中央数据库）将需要一个字段来表示某种形式的日期戳和您的设备将需要跟踪此日期戳。

```
DateTime dateStamp; // on Windows Mobile

private void MockUp() {
  ReadDataFromServer();
  dateStamp = ReadDateFromServer();
  DoStuffInYourProgram();
  UpdateAnythingNewerThan(dateStamp);
}

private void ReadDataFromServer() {
  // read data from your central server
  // and store that data into a DataSet or DataTable
}

private DateTime ReadDateFromServer() {
  // this would be better in the ReadDataFromServer() method,
  // but it is shown here for clarity
}

private void DoStuffInYourProgram() {
  // This isn't a real routine, but rather what you are going
  // to have your device doing
}

private void UpdateAnythingNewerThan(DateTime value) {
  // read records from your server that are newer than the value
  // passed in, then update those values with the new data your
  // device has collected.
} 
```

我希望我可以不那么模糊，但这应该会给你一个大致的想法。

# asp.net-mvc - 查找：DisplayTemplates 速度

> ID：11758338
> 
> 赞同：5
> 
> 时间：2012-08-01T11:33:29.223
> 
> 标签：asp.net-mvc, mvc-mini-profiler

我在一个新的 MVC4 站点上安装了 Mini-Profiler，并注意到`Find: DisplayTemplates`包括 String 和 DateTime 在内的某些等待时间很长。下面是一个例子。在另一个问题中，Sam Saffron 谈到了 find 步骤

> 在随后的运行中，它快如闪电（除非你遇到了非常糟糕的事情）

但是每次页面加载都会发生以下情况：

```
http://localhost:80/SLS.Site/s/hogwarts/lunch...     2.6    +0.0
  Check School Permissions                           2.4    +2.0     1 sql   0.9
  Controller: SchoolAdmin.LunchGroupsController...   4.0    +4.5
  Find: Index                                        0.4    +8.6
  Render : Index                                    70.0    +9.1     2 sql   13.0
   Controller: SchoolAdmin.LunchGroupsController...  2.6    +12.3
   Find: BuildingTree                                0.4    +14.9
   Render partial: BuildingTree                      4.4    +15.4    1 sql   3.2
   Controller: SchoolAdmin.LunchGroupsController...  3.3    +20.2
   Find: Teachers                                    0.6    +23.6
   Render partial: Teachers                          4.3    +24.3    1 sql   2.4
   Find: DisplayTemplates/String                   409.3    +31.9
   Render partial: _UserContext                      0.0    +441.3
   Find: _LoginPartial                               1.2    +441.4
   Render partial: _LoginPartial                     0.2    +442.6
                                                                     3.9 % in sql 
```

有什么想法吗？

**编辑**

我设置了 4 个区域，所以我认为它正在遍历所有目录以寻找匹配项，所以我删除了 2 个区域并具有相同的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:14:38.107

我遇到了完全相同的问题......经过一番搜索后，我发现我正在使用：

`@DisplayFor(x => x.StringProperty);`

经过思考，通过自己制作一些模板了解了所有 DisplayFor/EditorFor 方法的工作原理，这没有任何意义。

*（关于 DisplayFor/EditorFor 如何工作的一点解释）*

当使用 DisplayFor/Editor for 时，MVC 获取`type`of 对象，然后在`Views/ControllerName/DisplayTemplates`目录中搜索与该类型同名的视图，在这种情况下，它正在搜索`Views/ControllerName/DisplayTemplates/String.cshtml`. 由于它不存在，它在`Shared/DisplayTemplates`views 目录中也是如此，同样，它不会存在。

*（接下来的一点是猜测）*

我假设因为它找不到相关的显示/编辑器模板，它然后在对象上执行一个 ToString() 作为故障转移。

`DisplayFor(x => StringProperty)`由于无论如何您只显示一个 String 类型，因此不使用and 只使用是有意义的`@Model.StringProperty`，这不会导致 MVC 搜索 a`DisplayTemplate`并将其呈现为字符串，无论如何它都会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T15:36:43.320

一旦我在包中放置了一个分析块，`<head>`我就可以看到真正花费了时间的地方。最初，迷你分析器误导了我：时间**没有** 花在`DisplayTemplates/String`其他地方！

就我而言，延迟发生在 MVC4 RC 的脚本捆绑中。

我删除了捆绑包，一切都很好。

请参阅下面的相关问题：

[MVC4 RC 脚本捆绑非常慢](https://stackoverflow.com/questions/11000093/mvc4-rc-script-bundling-very-slow)

# mysql - 错误 2003 (HY000): 无法连接到 MySQL 服务器 (111)

> ID：11758339
> 
> 赞同：37
> 
> 时间：2012-08-01T11:33:29.690
> 
> 标签：mysql, linux, remote-access, mysql-error-2003

这个问题与以下问题有关：

*   [无法连接到 MySQL 服务器错误 111](https://stackoverflow.com/questions/1420839/cant-connect-to-mysql-server-error-111)
*   [尝试连接到远程 MySQL 主机（错误 2003）](https://stackoverflow.com/questions/5713808/trying-to-connect-to-remote-mysql-host-error-2003)

我正在本地机器上配置一个新的 MySQL (5.1) 服务器。我需要提供对数据库的远程访问。我做了以下步骤：

1.  `bind-address`在 my.cnf 中评论：

    ```
    # bind-address      = 192.168.1.3 
    ```

2.  授予权限：

    ```
    GRANT ALL PRIVILEGES ON *.* TO 'nickruiz'@'%' IDENTIFIED BY PASSWORD 'xxxx'; 
    ```

3.  在路由器上设置端口转发（TCP 和 UDP，端口 3306、192.168.1.3）
4.  为防火墙配置 iptables

    ```
    sudo iptables -I INPUT -p udp --dport 3306 -j ACCEPT

    sudo iptables -I INPUT -p tcp --dport 3306 --syn -j ACCEPT

    sudo iptables-save 
    ```

5.  重启mysql服务器`sudo /etc/init.d/mysql restart`

测试时，我得到以下信息：

局域网：

```
mysql -h 192.168.1.3 -u nickruiz -p
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 95
Server version: 5.1.63-0ubuntu0.11.04.1 (Ubuntu) 
```

偏僻的：

```
mysql -h 1xx.xx.4.136 -u nickruiz -p
ERROR 2003 (HY000): Can't connect to MySQL server on '1xx.xx.4.136' (111) 
```

显然有什么问题阻止了我使用我的全球 IP 地址。

笔记：

*   我尝试在同一台机器上测试远程连接，也尝试通过远程机器上的 SSH 测试远程连接。
*   我不确定我的 ISP 是否给了我一个静态 IP。

有任何想法吗？

更新： telnet 似乎没有工作。

```
telnet 192.168.1.3 3306
Trying 192.168.1.3...
Connected to 192.168.1.3.
Escape character is '^]'.
E
5.1.63-0ubuntu0.11.04.1,0g8!:@pX;]DyY0#\)SIConnection closed by foreign host. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-27T05:27:37.163

请检查您的监听端口：

```
netstat -nat |grep :3306 
```

如果显示

```
 tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN 
```

这对您的远程连接没问题。

但在这种情况下，我认为你有

```
tcp        0     192.168.1.3:3306            0.0.0.0:*               LISTEN 
```

这对您的远程连接没问题。您还应该检查您的防火墙（如果您使用 centos/redhat，则为 iptables）

```
services iptables stop 
```

用于测试或使用：

```
iptables -A input -p tcp -i eth0 --dport 3306 -m state NEW,ESTABLISHED -j ACCEPT
iptables -A output -p tcp -i eth0 --sport 3306 -m state NEW,ESTABLISHED -j ACCEPT 
```

还有另一件事是检查您对远程连接的授予权限：

```
GRANT ALL ON *.* TO remoteUser@'remoteIpadress' IDENTIFIED BY 'my_password'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T12:00:56.740

errno 111 是 ECONNREFUSED，我想路由器的 DNAT 有问题。

您的 ISP 也可能正在过滤该端口。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T15:53:25.933

检查您的远程主机（即您尝试从其连接的网络托管服务器）是否允许端口 3306 上的 OUTGOING 流量。

在这种情况下，我看到了 (100) 错误。我可以从我的 PC/Mac 连接，但不能从我的网站连接。MySQL 实例可以通过 Internet 访问，但我的托管公司不允许我的网站连接到端口 3306 上的数据库。

一旦我要求我的托管公司在端口 3306 上为传出流量打开我的网络托管帐户，我的网站就可以连接到我的远程数据库。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-12T15:24:22.730

```
/etc/mysql$ sudo nano my.cnf 
```

对我有用的相关部分：

```
#skip-networking
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = MY_IP 
```

`MY_IP`可以使用`ifconfig`或找到`curl -L whatismyip.org |grep blue`。

重新启动 mysql 以确保加载新配置：

```
/etc/mysql$ sudo service mysql restart 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-29T19:50:44.873

我在尝试连接到远程 mysql 数据库时遇到了同样的问题。

我通过打开数据库服务器上的防火墙以允许流量通过来修复它：

```
sudo ufw allow mysql 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-16T07:47:59.890

如果你使用的系统是CentOS/RedHat，而你安装MySQL的方式是rpm，/etc/文件夹下没有my.cnf，你可以使用：#whereis mysql #cd /usr/share/mysql/ cp -f /usr/share/mysql/my-medium.cnf /etc/my.cnf

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-14T17:12:11.140

我有同样的错误，但我不明白，但我意识到我的调制解调器使用与 mysql 相同的端口。好吧，我停止了 apache2.service`sudo systemctl stop apache2.service`并重新启动了 xammp，`sudo /opt/lampp/lampp start`

只是也许，如果您还没有使用 mysql 的密码`1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)`，那么您必须传递一个空字符串作为密码

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-02T15:08:14.180

我如上所述正确设置了我的绑定地址，但忘记重新启动 mysql 服务器（或重新启动）:)*面对手掌*- 所以这对我来说是这个错误的根源！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-04T00:26:54.927

有时，当密码中有特殊字符时，您需要将其包装在`''`字符中，因此要连接到 db，您可以使用：

`mysql -uUSER -p'pa$$w0rd'`

我有同样的错误，这个解决方案解决了它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-24T05:23:03.893

我和你有同样的问题，我使用wireshark来捕获我发送的TCP数据包，我发现当我使用`mysql`bin连接远程主机时，它连接了远程的3307端口，这是我的错误`/etc/mysql/my.cnf`，3307是另一个项目mysql端口，但是我在`my.cnf`[client] 部分更改了该配置，当我使用`-P`选项指定 3306 端口时，没关系。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-08-01T12:17:13.093

不确定在您提到的步骤中看不到它。

请尝试[FLUSH PRIVILEGES](http://dev.mysql.com/doc/refman/5.0/en/flush.html) [从 mysql 数据库中的授权表重新加载权限]：

刷新特权；

您需要在 GRANT 之后执行它

希望这有帮助！

# c# - 如何使标签中的值根据值大小自动更改其位置？

> ID：11758348
> 
> 赞同：1
> 
> 时间：2012-08-01T11:34:03.443
> 
> 标签：c#

我有两个标签，例如第一个是：

现在的温度——

第二个标签：

46c

但如果有时只是为了温度是否会升高到 100 的问题，那么它应该是：

现在温度 - 100℃

但随后 100 的 c 将超过另一个标签的“-”。因此，如果它的两位数没问题，但如果它的三位数字越过另一个标签。

有什么方法可以计算或自动更新带有数字的标签，以便它会根据当前拥有的位数和另一个标签位置更改其位置，这样他们就不会得到一个超过另一个？

我在构造函数中的代码。

```
temperature_label = new Label();
    textMode_label = new Label();
    this.Controls.Add(textMode_label);
    this.Controls.Add(temperature_label);

    temperature_label.Location = new Point(260, 200);
    temperature_label.Height = 250;
    temperature_label.Width = 500;
    temperature_label.ForeColor = Color.Red;
    temperature_label.Font = new Font("Arial", 35, FontStyle.Bold);
    temperature_label.Text = "200c";

    textMode_label.Location = new Point(350, 200);
    textMode_label.Height = 250;
    textMode_label.Width = 500;
    textMode_label.ForeColor = Color.Blue;
    textMode_label.Font = new Font("Arial", 35, FontStyle.Bold);
    textMode_label.Text = "The Temperature Now Is - "; 
```

然后在计时器滴答事件中，我用以下值更新 temperature_label：

```
private void timer_Tick(object sender, EventArgs e)
        {
            Computer computer = new Computer();
            computer.Open();
            computer.GPUEnabled = true;

            foreach (var hardwareItem in computer.Hardware)
            {

                if (hardwareItem.HardwareType == HardwareType.GpuNvidia)
                {
                    foreach (var sensor in hardwareItem.Sensors)
                    {
                        if (sensor.SensorType == SensorType.Temperature)
                        {
                            sensor.Hardware.Update();

                            temperature_label.Text = sensor.Value.ToString()+ "c";
                            timer.Interval = 1000;
                            if (sensor.Value > 90)
                            {
                                Logger.Write("The current temperature is ===> " + sensor.Value);
                                button1.Enabled = true;
                            }
                            this.Select();
                        }
                    }
                }

            }     
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:06:42.360

您可以使用单个标签而不是两个标签并在文本上执行 string.Format 。使用标签的标签属性来保存要格式化的文本，并在格式化后将其指定为标签文本。

所以沿着线的东西：

```
temperature_label = new Label();
this.Controls.Add(temperature_label);

temperature_label.Location = new Point(260, 200);
...
temperature_label.Tag = The Temperature Now Is - {0}C;
temperature_label.Text = "Fetching temperature..."; 
```

然后在你的刻度处理程序的内部循环中：

```
....

temperature_label.Text = string.Format(temperature_label.Tag, sensor.Value);

.... 
```

不过，这仅在不需要正确对齐温度值的情况下才有效。

# objective-c - iPad 3 shouldRasterize = YES 使 UILabel 文本被截断

> ID：11758350
> 
> 赞同：8
> 
> 时间：2012-08-01T11:34:06.910
> 
> 标签：objective-c, ios, uilabel, calayer

设置`shouldRasterize`到`YES`图层时出现问题。在 iPad3 上，label.text 将文本从底部截去大约 1/5 的大小。有谁知道是什么问题？。

```
 cellview.layer.cornerRadius = 12.0;
    cellview.layer.borderColor = [UIColor blackColor].CGColor;
    cellview.layer.borderWidth = 1.0;
    cellview.layer.frame = rect;
    cellview.layer.shouldRasterize =YES;
    cellview.layer.masksToBounds = YES; 
```

在 iPad 2 上，它运行良好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T11:43:40.557

设置光栅化的比例，因为 iPad3 的视网膜显示：

```
[cellview.layer setRasterizationScale:[[UIScreen mainScreen] scale]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T10:22:40.930

斯威夫特版本：

```
cellview.layer.rasterizationScale = UIScreen.main.scale 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-14T18:49:57.357

# 斯威夫特 4 版本

```
cellView.layer.rasterizationScale = UIScreen.main.scale 
```

# ruby-on-rails - 从液体迁移到小胡子

> ID：11758352
> 
> 赞同：1
> 
> 时间：2012-08-01T11:34:19.747
> 
> 标签：ruby-on-rails, ruby, mustache, liquid

我有一个使用液体作为模板引擎的项目，我想迁移到 mustache。有什么帮助可以帮助我轻松迁移

# asp.net - 剃刀视图的更改未显示

> ID：11758353
> 
> 赞同：1
> 
> 时间：2012-08-01T11:34:20.700
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, razor

我在我的 ASP.NET MVC3 应用程序中对视图进行了一些更改，但是当我在浏览器中测试/调试站点时，我所做的更改没有显示出来。我所做的更改是对标记的简单文本修改。

我正在使用 Visual Studio 开发服务器来测试应用程序。

奇怪的是，我已经尝试将这些更改发布到 IIS，并且当我使用 IIS 服务器测试应用程序时，我对视图所做的更改正在发挥作用。

只有在 Visual Studio 环境中进行测试时才会出现这种情况。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:53:27.123

我遇到的一个常见问题是当您不使用 IE 并且您关闭了调试会话，而不是您的浏览器时。

这意味着“IIS/开发服务器”仍在您的系统托盘中运行，但它在旧的编译代码上运行，如果您按 ctrl + shift + b，您将构建整个解决方案并将代码重新发布到您的开发服务器。这允许您在浏览器中点击刷新 (F5)，您对剃刀视图所做的更改现在应该会反映在浏览器中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:29:45.563

解决方案是使用[IIS Express](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview)。出于某种原因，VS 开发服务器无法识别背后代码的更改——这与浏览器上的缓存无关。但是，其他答案中建议的源代码的位置很重要 - 它适用于我使用`c:\windows`文件夹或`c:\users\DefaultAppPool`- 显然它与确保安全性有关。

在 IIS 下仅允许以“DefaultAppPool”身份运行的应用程序。因此，对于使用 VM 并映射主机操作系统代码文件夹的任何人，除非您复制到文件夹中的本地文件夹，否则您将无法纠正此问题`c:\users\DefaultAppPool`。

您现在可能还难以访问为 ASP.NET 下的成员资格提供程序建立的 SQL 服务器数据库。有关如何解决此问题的更多详细信息，我已在我的博客上[发布。](http://www.appsolo.com/index.php/2012/09/14/localhost-not-refreshing-to-reflect-code-changes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:49:41.150

你用的是IE吗？也许删除缓存或使用其他浏览器应该可以工作？我有很多问题：D

# android - 在 Android 中重用位图

> ID：11758354
> 
> 赞同：0
> 
> 时间：2012-08-01T11:34:28.120
> 
> 标签：android, performance, bitmap

我必须在由相同位图制成的游戏屏幕上绘制很多对象。所以，我需要找到一种重用位图的好方法。我有一个类，其中位图是一个字段，屏幕上的每个对象都是这个类（或其子类）的一个实例。在这种情况下如何才能获得最佳性能？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:40:55.220

`BitmapCache`拥有一个负责存储/缓存/检索所有`Bitmap`对象的类怎么样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:41:14.487

如果您将位图字段设为静态，则仅存在一个实例。但在这种情况下，您需要管理对该对象的绘图访问。

# android - 创建方法上的 ORMLite 异常集

> ID：11758355
> 
> 赞同：0
> 
> 时间：2012-08-01T11:34:31.100
> 
> 标签：android, nullpointerexception, ormlite

创建数据库和表成功。我的 DatabaseHandler 类的 onCreate()：

```
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) 
    {
         try
         {  

            TableUtils.createTable(connectionSource, Category.class);
            TableUtils.createTable(connectionSource, Level.class);
            DataParsing a = new DataParsing();
            a.fillCategories();
            Log.i(DatabaseHandler.class.getName(), "created new entries in onCreate: " );
         }
         catch (SQLException e){
             Log.e(TAG, "error creating DB " + DATABASE_NAME);
             throw new RuntimeException(e);
         } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我从 Web 服务获取数据 JSON 并使用 GSON 解析它。数据在 fillcategories() 方法中成功填充类数据。然后我想在 saveContacts() 方法中将所有数据放入 ORMLite 数据库：

```
 public class DataParsing {
    private static String KEY_STATUS = "status";
    private static String KEY_MESSAGE = "message";
    private static String KEY_CATEGORIES = "categories";
    private static String KEY_DATA = "data";
    private DatabaseHandler databaseHandler;
    private Context _context;
    public void fillCategories() throws JSONException, SQLException
    {   UserFunctions userFunction  = new UserFunctions();
        JSONObject json = userFunction.loginUser("shurko@ukr.net", "123456");
        JSONObject data = json.getJSONObject(KEY_DATA);
        // getting categories
        JSONArray categories = new JSONArray();
        categories = data.getJSONArray(KEY_CATEGORIES);
        Gson gson = new Gson();
        JsonParser parser = new JsonParser();
        JsonArray array = parser.parse(categories.toString()).getAsJsonArray();
        Type listType = new TypeToken<List<Category>>() {}.getType();
        List<Category> tasks = new ArrayList<Category>();
        tasks = gson.fromJson(array.toString(), listType);

        saveContacts(tasks);

    }

    public void saveContacts(List<Category> contacts) throws SQLException
        {

            OrmLiteSqliteOpenHelper dbHelper= DatabaseHandler.getInstance(_context);
            Dao<Category, Integer> daoContact=dbHelper.getDao(Category.class);

            QueryBuilder<Category, Integer> queryBuilder = daoContact.queryBuilder();
            Log.i("dao",queryBuilder.selectColumns("title").prepare().toString());

            for (Category contact : contacts) {
                Log.i("dao",contact.toString());
                HelperFactory.GetHelper().getCategoryDao().create(contact);
            }

        }

} 
```

并在 ...create(contact) 行上获取一组异常：

```
 FATAL EXCEPTION: main
 java.lang.NullPointerException
    at com.library.DataParsing.saveContacts(DataParsing.java:61)
at com.library.DataParsing.fillCategories(DataParsing.java:45)
    at com.library.DatabaseHandler.onCreate(DatabaseHandler.java:85)
    at com.j256.ormlite.android.apptools.OrmLiteSqliteOpenHelper.onCreate(OrmLiteSqliteOpenHelper.java:169)
    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
    at com.j256.ormlite.android.AndroidConnectionSource.getReadWriteConnection(AndroidConnectionSource.java:63)
    at com.j256.ormlite.android.AndroidConnectionSource.getReadOnlyConnection(AndroidConnectionSource.java:51)
    at com.j256.ormlite.stmt.StatementExecutor.buildIterator(StatementExecutor.java:202)
    at com.j256.ormlite.stmt.StatementExecutor.query(StatementExecutor.java:155)
    at com.j256.ormlite.stmt.StatementExecutor.queryForAll(StatementExecutor.java:113)
    at com.j256.ormlite.dao.BaseDaoImpl.queryForAll(BaseDaoImpl.java:237)
    at com.assignmentexpert.LoginActivity$1.onClick(LoginActivity.java:97)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:45:23.870

通过将我的活动上下文传递给 OrmLiteSqliteOpenHelper 解决了问题。我使用这些类在应用程序生命周期中维护对数据库的访问：

```
public class ApplicationMemory extends Application{

   @Override
   public void onCreate() {
       super.onCreate();
       HelperFactory.SetHelper(getApplicationContext());
   }
   @Override
   public void onTerminate() {
       HelperFactory.ReleaseHelper();
       super.onTerminate();
   }
} 
```

和

```
 public class HelperFactory {
 private static DatabaseHandler databaseHelper;

   public static DatabaseHandler GetHelper(){
       return databaseHelper;
   }

public static void SetHelper(Context context){
       databaseHelper = OpenHelperManager.getHelper(context,DatabaseHandler.class);
   }

public static void ReleaseHelper(){
       OpenHelperManager.releaseHelper();
       databaseHelper = null;
   }
   } 
```

其中 DatabaseHandler - 类，从 OrmLiteSqliteOpenHelper 扩展并在我的问题中描述。

# perl - 如何使用perl中的哈希处理文件中的数据

> ID：11758367
> 
> 赞同：0
> 
> 时间：2012-08-01T11:35:04.823
> 
> 标签：perl, file-io, hash

```
#input data
11000000,        1637,        -7.8737,      -20.15022
11000001,        1634,       -710.377,      -20.150137
11000002,        1639,       -709.87366,    -20.150133
11000003,        1631,        -7.1737,      -22.650156
11000004,        1639,        709.87366,    -20.150133
11000005,        1630,       -710.6,        -22.650074 
```

我想要这个输出，从第二列打印相等的值，从第三列打印相等但符号相反的值，并从第四列打印相等的值。

# 输出应该是这样的::

```
1639,          709.87366,       -20.150133 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:48:22.510

您可以简单地逐行读取文件，然后

```
@numbers = split /\s+/, $line; 
```

*或者*

```
# includes comma in the split pattern to select just the number
@numbers = split /,\s+/, $line; 
```

并选择

```
$numbers[1], $numbers[2], $numbers[3] 
```

* * *

打印出您请求的内容的简单脚本可能是：

```
#!/usr/bin/perl -w

use strict;

open FILE, '<', 'input.txt';

foreach my $line (<FILE>)
{
  my @numbers = split /,\s+/, $line;
  printf "%d,\t%f,\t%f\n", $numbers[1], -1*$numbers[2], $numbers[3];
}

close FILE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:52:26.257

也许是这样的：

```
while (<DATA>) {
    chomp;
    @datas = split/,\s+/;
    $k = sprintf "%s:%s:%s", $datas[1], abs $datas[2], $datas[3];
    print join(",\t", @datas[1..3]), "\n" if (++$hash{$k} > 1);
}

__DATA__
11000000,        1637,        -7.8737,      -20.15022
11000001,        1634,       -710.377,      -20.150137
11000002,        1639,       -709.87366,    -20.150133
11000003,        1631,        -7.1737,      -22.650156
11000004,        1639,        709.87366,    -20.150133
11000005,        1630,       -710.6,        -22.650074 
```

# linux - shell脚本函数返回一个字符串

> ID：11758368
> 
> 赞同：5
> 
> 时间：2012-08-01T11:35:10.790
> 
> 标签：linux, shell, unix

我是 shell 脚本的新手，我正在尝试创建一个简单的函数，它将返回作为参数传递的串联的两个字符串。我试过下面的代码

```
 function getConcatenatedString() {
       echo "String1 $1"
       echo "String2 $2"
       str=$1/$2
       echo "Concatenated String ${str}"
       echo "${str}"
   } 
```

//我在调用上面的函数

```
 constr=$(getConcatenatedString "hello" "world")
  echo "printing result"
  echo "${constr}"
  echo "exit" 
```

使用上述代码运行脚本时，我看到以下输出，

```
 printing result
   String1 hello
   String2 world
   Concatenated String hello/world
   hello/world
   exit 
```

如果您查看代码，我首先调用该函数，然后我正在回显“打印结果”语句，但结果首先是“打印结果”并回显函数内部的语句。下面的语句是调用函数吗

```
 constr=$(getConcatenatedString "hello" "world") 
```

或者

```
 echo ${constr} 
```

正在调用函数？

因为如果我注释掉#echo ${constr} 那么什么都不会得到回显！请澄清一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T11:39:03.307

第一个是调用函数并将*所有*输出（四个`echo`语句）存储到`$constr`.

然后，在返回后，您回显序言`printing result`（`$constr`由四行组成）和退出消息。

这就是`$()`工作原理，它从封闭的命令中捕获整个标准输出。

听起来您想`echo`在控制台上查看某些语句，而不是使用`$()`. 我认为您应该能够将它们发送到标准错误：

```
echo "String1 $1" >&2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:19:02.177

paxdiablo 的解决方案是正确的。您不能从函数返回字符串，但可以捕获函数的输出或返回一个整数值，调用者可以从`$?`. 但是，由于所有 shell 变量都是全局变量，您可以简单地执行以下操作：

```
getConcatenatedString() { str="$1/$2"; }      
getConcatenatedString hello world
echo "Concatenated String ${str}" 
```

请注意，`function`关键字与 是多余的`()`，但`function`可移植性较差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:56:27.887

一种更灵活但更难理解的方法是传递一个变量名，并使用`eval`它使变量在调用者的上下文中设置（全局或本地函数）。在 bash 中：

```
function mylist()
{
    local _varname=$1 _p _t
    shift

    for _p in "$@"; do
        _t=$_t[$_p]
    done

    eval "$_varname=\$_t"
}

mylist tmpvar a b c
echo "result: $tmpvar" 
```

在我的 Linux 桌面（bash-3.2）上，它比 using 快大约 3-5 倍（10,000 次迭代）````，因为后者有进程创建开销。

如果你有 bash-4.2，它`declare -g`允许一个函数设置一个全局变量，所以你可以将 unpretty 替换为`eval`：

```
declare -g $_varname="$_t" 
```

`eval`方法与[TCL的](http://www.tcl.tk/man/tcl8.4/TclCmd/upvar.htm) 类似`upvar 1`，`declare -g`也类似`upvar #0`。

一些shell内置支持类似的东西，比如`printf`带有“-v”的bash，再次通过直接分配给变量而不是捕获输出来保存进程创建（对我来说快了大约20-25倍）。

# arrays - Flex Mobile Project，在数组中插入多个图像对象

> ID：11758373
> 
> 赞同：0
> 
> 时间：2012-08-01T11:35:28.833
> 
> 标签：arrays, image, apache-flex, flex-mobile

我已经索引了图像，如下所示：

```
<s:Image id="imgListaTaskAnalysis0" left="20" top="110" width="200" height="200"/>
<s:Image id="imgListaTaskAnalysis1" left="20" top="360" width="200" height="200"/>
<s:Image id="imgListaTaskAnalysis2" left="20" top="360" width="200" height="200"/> 
```

等等..

我想把它们放在一个数组中，所以：

```
public var arrayImg:Array = new Array(imgListaTaskAnalysis0,imgListaTaskAnalysis1,imgListaTaskAnalysis2); 
```

但我不能给他们一个来源：

```
for(var i:Number=0;i<=arrayImg.length;i++)
                arrayImg[i].source = cuboImmagini.path; 
```

这种方式行不通，不给他们任何来源..有办法做到这一点吗？

这是我项目中感兴趣的部分：

```
public var arrayImg:Array = new Array(imgListaTaskAnalysis0,imgListaTaskAnalysis1);
/*          DICHIARAZIONE IMMAGINI          */
public var cuboImmagini:Object = {path:"../assets/cuboImmagini.png"};
public var exit:Object = {path:"../assets/exit.png"};
public var home:Object = {path:"../assets/home.png"};
/*          FINE DICHIARAZIONE IMMAGINI     */

/*          FUNZIONI            */

//  cambiaPagina
public function cambiaPagina(prossimaPagina:String):void
{   
currentState = prossimaPagina;
}

// chiudiApplicazione
protected function chiudiApplicazione(event:MouseEvent):void    
{
NativeApplication.nativeApplication.exit();
}
public function carica():void
        {
            arrayImg[0].source = cuboImmagini.path;
            arrayImg[1].source = home.path;
            cambiaPagina("HomePage");
        }
        /*          FINE FUNZIONI       */
    ]]>
</fx:Script>
<s:states>
    <s:State name="PaginaPresentazione"/>
    <s:State name="HomePage"/>
    <s:State name="ListaTaskAnalysis"/>
    <s:State name="ScegliAzioneTaskAnalysis"/>
</s:states>
<fx:Declarations>
</fx:Declarations>

    <!-- =================================== MXML =================================== -->

    <!-- =================================== PaginaPresentazione =================================== -->
<s:Group id="gruppoPaginaPresentazione" includeIn="PaginaPresentazione" left="0" right="0" top="0" bottom="0"
         horizontalCenter="0" verticalCenter="0">
    <s:Button id="btnPresentazione" right="10" bottom="10" label="INIZIA"
              click="carica()"/>
</s:Group>
    <!-- =================================== HomePage =================================== -->
<s:Group id="gruppoHomePage" includeIn="HomePage,PaginaPresentazione" left="0" right="0" top="0"
         bottom="0" horizontalCenter="0" verticalCenter="0">

    <s:Button id="btnVaiTaskAnalysis" includeIn="HomePage" width="600" height="90"
              label="TASK ANALYSIS" click="cambiaPagina('ListaTaskAnalysis')" fontSize="50"
              horizontalCenter="0" verticalCenter="80"/>
    <s:Button id="btnVaiStorieSociali" includeIn="HomePage" width="600" height="90"
              label="STORIE SOCIALI" fontSize="50" horizontalCenter="0" verticalCenter="-80"/>

</s:Group>
    <!-- =================================== /HomePage =================================== -->

<s:Group id="gruppoListaTaskAnalysis" includeIn="ListaTaskAnalysis" left="0" right="0" top="0" bottom="0"
         horizontalCenter="0" verticalCenter="0">
    <s:Group id="gruppoBottoniListaTaskAnalyis" left="0" right="0" top="0" height="90"
             horizontalCenter="0">
        <s:Button id="btnExitListaTaskAnalysis" right="10" top="5" width="80" height="80"
                  icon="assets/exit.png"  click="chiudiApplicazione(event)"/>
        <s:Button id="btnHomeListaTaskAnalysis" right="100" top="5" width="80" height="80"
                  icon="assets/home.png" click = "cambiaPagina('HomePage')"/>
    </s:Group>
    <s:Image id="imgListaTaskAnalysis0" left="20" top="110" width="200" height="200"
             source="assets/cuboImmagini.png"/>
    <s:Image id="imgListaTaskAnalysis1" left="20" top="360" width="200" height="200"/>
    <s:Button id="btnSegreto1" left="10" bottom="10" width="90" height="90" alpha="0.1" click="combinazioneSegreta(1)"/>
    <s:Button id="btnSegreto2" right="10" bottom="10" width="90" height="90" alpha="0.1" click="combinazioneSegreta(2)"/>

</s:Group>
<s:Group id="gruppoListaTaskAnalysis0" includeIn="ScegliAzioneTaskAnalysis" left="0" right="0"
         top="0" bottom="0" horizontalCenter="0" verticalCenter="0">
    <s:Group id="gruppoBottoniListaTaskAnalyis0" left="0" right="0" top="0" height="90"
             horizontalCenter="0">
        <s:Button id="btnExitScegliAzioneTaskAnalysis0" right="10" top="5" width="80" height="80"
                  icon="assets/exit.png"  click="chiudiApplicazione(event)"/>
        <s:Button id="btnHomeScegliAzioneTaskAnalisys" right="100" top="5" width="80" height="80"
                  icon="assets/home.png" click = "cambiaPagina('HomePage')"/>
    </s:Group>

</s:Group>
    <!-- =================================== /HomePage =================================== --> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:21:17.913

我解决了这个问题。我在创建图像时将它们放入数组中：

```
<s:Image id="img" creationComplete = "loadImage(event,this.img,0) />
---------------------------------------------------------------------
public function loadImage(e:FlexEvent,img:Image,num:Number):void
{
  array[num] = img;
} 
```

不管怎么说，还是要谢谢你..

# sql-server - SQL Server 全文搜索匹配关键字的句子

> ID：11758377
> 
> 赞同：1
> 
> 时间：2012-08-01T11:35:50.750
> 
> 标签：sql-server, full-text-search

我正在使用全文搜索使用 iFilter 搜索 PDF 文档。一切正常。现在，我有可能得到一个包含我搜索的关键字的句子吗？例如：

关键词：“狐狸”

查询结果：“敏捷的棕狐跳过懒狗。” “狐狸是一种红色的小动物。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:38:30.013

不，SQL Server 中的全文不返回搜索词/短语的位置信息，因此目前无法提取周围的上下文。

# c# - 在 SOAP 消息中使用嵌套的复杂类型 - WCF XmlSerializer

> ID：11758380
> 
> 赞同：1
> 
> 时间：2012-08-01T11:35:55.103
> 
> 标签：c#, wcf, soap

我最近在 StackOverflow 上发布了一个问题：

[WCF 中的 SOAP 消息反序列化问题 - 字段具有空值](https://stackoverflow.com/questions/11754027/soap-message-deserialization-issue-in-wcf-fields-have-null-values)

这是关于 WCF 序列化引擎之一的东西`XmlSerializer`，用于序列化/反序列化 SOAP 消息。反序列化起初不起作用 - 一些命名空间问题。

回到现在:)

`[XmlElement, MessageBodyMember]`如果它们是**简单类型**，现在可以很好地反序列化带有装饰的字段。

**自定义类型**存在问题：它们已设置，但它们的字段具有空值:(

我应该在 XmlSerializer 上进行配置吗？

```
[MessageContract]
public class Request
{
    [XmlElement(Form = System.Xml.Schema.XmlSchemaForm.Unqualified), MessageBodyMember]
    public XType X { get; set; }
}

[what to write here?]
public class XType
{
    [XmlElement(Form = System.Xml.Schema.XmlSchemaForm.Unqualified), body member?]
    public string AString { get; set; }

    ... maybe another nested complex objects
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:19:13.410

我遇到了这些序列化问题，因为服务客户端的序列化引擎与 WCF 使用的引擎不“兼容”。当然，请求仍然是标准 XML（SOAP 1.2），但是，嘿，WCF 是 Microsoft 产品 :)

一些解决方法：

*   添加一个**MessageFormater** - 在服务器端实现一些反序列化逻辑 - 一篇很好的[文章](http://keyvan.io/use-idispatchmessageformatter-and-iclientmessageformatter-to-customize-messages-in-wcf)；
*   添加一个**MessageInspector** - 读取 SOAP 请求并执行一些 XML 格式设置（以便反序列化工作正常） - 您可以通过[此链接](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/19/wcf-extensibility-message-inspectors.aspx)阅读有关它的信息。

# java - java.sql.SQLException: 找不到适合 jdbc:mysql://localhost:3306/sushi 的驱动程序

> ID：11758385
> 
> 赞同：1
> 
> 时间：2012-08-01T11:36:31.850
> 
> 标签：java, mysql, eclipse, hibernate, maven

我有一个使用 jar 文件（lib）来访问数据库的 Web 应用程序。用作独立应用程序时的 jar 文件可以正确执行，但 webapp 收到错误：

`[01-08-12 13:17:05] - 35266 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 08001`

`java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/myapp`

我已经阅读了类似问题的答案，但没有一个能解决我的问题。

我正在使用 Maven，我在其中添加了我正在使用的 mysql 版本 5.1.21 的依赖项。事实上，我已经为 Lib 和 Webapp 添加了它。

在此之前，我尝试在 Eclipse 中定义绑定到同一文件的连接驱动程序定义，该文件已复制到我的 Webapp 的 eclipse 项目中的 WEB-INF/lib 中，并使用与下面包含的 persistence.xml 相同的参数文件

我没有使用任何java进行配置，因为我在persistence.xml文件中进行了所有配置（我已经复制到两个META-INF文件夹，一个用于app（lib），一个用于webapp。我正在使用通过 JPA 休眠（4.1.2）。

persistence.xml 文件是这样的：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">

<persistence-unit name="myappPersistenceUnit"
    transaction-type="RESOURCE_LOCAL">
    <provider> org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/myapp" />
        <property name="javax.persistence.jdbc.user" value="root" />
        <property name="javax.persistence.jdbc.password" value="" />
    </properties>
</persistence-unit> 

</persistence> 
```

我得到的异常是在运行时，在向应用程序启动 Http 请求时，而不是在 web 应用程序的初始化时，我没有看到任何错误，但出现了这个警告：

> [01-08-12 13:16:39] - 8782 WARN org.hibernate.engine.jdbc.internal.JdbcServicesImpl - HHH000342：无法获得与查询元数据的连接：找不到适合 jdbc:mysql://localhost: 的驱动程序： 3306/myapp

我猜这是因为在初始化时不需要从数据库中查找的信息，并且在这两种情况下都没有抛出异常，但根本原因相同。

编辑：我正在使用 Tomcat 6.0

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-10T06:06:24.633

您的项目中似乎缺少 MySql 驱动程序。要解决这个问题，您需要添加 mysql-connector.jar。在您的项目外部。或者，如果您使用的是 maven 项目，则在您的 pom.xml 文件中使用以下依赖项。

```
 <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>6.0.4</version>
  </dependency> 
```

如果需要，您可以使用合适的版本！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:42:25.110

如果您将应用程序作为 Java 应用程序运行，请在 Eclipse 的 Java 构建路径中添加 JAR 文件。

或者，我不会将 MSQL jar 放在`WEB-INF/lib`您的 Web 项目的文件夹中，而是将它放在您的应用程序文件夹库文件夹中，应用程序服务器将加载您的驱动程序，您可以从应用程序服务器容器访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T13:00:43.543

您应该将 mysql 连接器 jar 与您自己的代码一起放入并在您的项目中添加 jar 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T07:15:22.927

我之前也遇到过同样的问题，但我解决了这个问题。此异常可能有不同的原因。

其中之一可能是`jar`您添加到您的`lib`文件夹可能是旧的。尝试找出**最新的 mysql-connector-jar 版本**并将其添加到您的`classpath`. 它可能会解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-30T22:53:39.620

我在 Tomcat 9 上遇到了同样的问题。通过在 common/lib 和 WEB-INF/lib 中都没有驱动程序 jar 来解决（使用前者）。

# active-directory - 确定用户是否可以登录的最终检查是什么？

> ID：11758386
> 
> 赞同：1
> 
> 时间：2012-08-01T11:36:45.960
> 
> 标签：active-directory

AD 属性 userAccountControl 中定义了几个标志。但是，尚不清楚确定用户是否可以登录的最终检查是什么。例如，ADS_UF_ACCOUNTDISABLE 标志是否意味着帐户被禁用？我想出的清单是：

*   如果 ADS_UF_ACCOUNTDISABLE != 0，则用户无法登录
*   如果 ADS_UF_LOCKOUT != 0，则用户无法登录
*   如果 ADS_UF_DONT_EXPIRE_PASSWORD == 0 和 pwdLastSet == 0，则用户无法登录，除非他们更改密码

这听起来是否正确，还是需要进行更多检查？

对好的网页的引用会大有帮助。我找到的东西似乎没有回答这个问题。

# 3d - Three.js 相机旋转违反数学定律

> ID：11758387
> 
> 赞同：1
> 
> 时间：2012-08-01T11:36:47.720
> 
> 标签：3d, coffeescript, three.js

在我的应用程序中，我显示了一个 3D 图形，并向用户展示了用于旋转对象视图的控件。我的偏好不是实际旋转对象，而是*围绕*对象旋转相机，因此稍后添加诸如放大之类的操作会更简单一些。

使用 Three.js 以一定半径旋转相机似乎是一件容易的事。只需围绕 XZ 平面中具有一定半径的圆的每个点重新定位和重新瞄准相机。我的代码通过以下方式执行此操作：

```
render: ->
    @camera.lookAt @model.position
    @renderer.render @scene, @camera

rotate: (theta)->
    @rotation += theta

    @camera.position.x = @cameraDistance * Math.sin(@rotation)
    @camera.position.z = @cameraDistance * Math.cos(@rotation)

    @.render() 
```

`rotate()`每当用户单击按钮时，都会调用该方法。

这看起来很简单，实际上基本上是在许多 Three.js 示例应用程序中使用的。然而，当我这样做时，这个人物的运动并不是静止的旋转——它确实会旋转，但似乎也以某种椭圆的方式移动（见截图）。

此外，在进行健全性检查时，我发现执行`console.log square(@camera.position.x) + console.log square(@camera.position.z)`不会产生`@cameraDistance`数字，而是会从非常小的值增长到巨大的值。出于某种原因，在这种情况下，单位圆身份似乎不适用于我。

感觉就像我在这里遗漏了一些明显的东西。谁能告诉我它是什么？

![中立位置](../Images/ef8ea804b215f570c914092308b4f49e.png) ![图不是静止的](../Images/4f27bf0efb0472db2fb4db974a93e407.png) ![移出图片](../Images/c35e0267c18cbf480fa7a3bf906baf2e.png) ![在镜头前经过](../Images/dd5a43c69eaaef895aa56fbd31c2a465.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T12:23:49.040

虽然这是一个老问题：

我很确定你只是混淆了 sin 和 cos。

OP的代码：

```
@camera.position.x = @cameraDistance * Math.sin(@rotation)
@camera.position.z = @cameraDistance * Math.cos(@rotation) 
```

正确代码：

```
@camera.position.x = @cameraDistance * Math.cos(@rotation)
@camera.position.z = @cameraDistance * Math.sin(@rotation) 
```

# c# - 模拟 Linq2Sql 数据上下文

> ID：11758391
> 
> 赞同：19
> 
> 时间：2012-08-01T11:36:54.470
> 
> 标签：c#, unit-testing, c#-4.0, linq-to-sql, mocking

我有一个 Lin2Sql DataContext，我用它来从 sql 数据库中获取所有数据，但是我正在努力寻找一种方法来成功模拟它，以便我可以创建相关的单元测试。

在我想要测试的数据访问对象中，我每次都在刷新上下文，我发现很难找到一种简单合适的方法来模拟它。

任何有关此事的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T11:40:54.817

模拟 linq-to-sql 上下文确实是一项艰巨的任务。我通常通过让我的单元测试针对单独的数据库副本运行它来解决这个问题，其中的数据经过专门设计以适合单元测试。（我知道可以说它不再是单元测试，而是集成测试，但只要我对代码进行测试，我不在乎）。

为了使数据库保持在已知状态，我将每个测试包装在`TransactionScope`测试结束时回滚的 a 中。这样数据库的状态就永远不会改变。

示例测试方法如下所示：

```
[TestMethod]
public void TestRetire()
{
    using (TransactionScope transaction = new TransactionScope())
    {
        Assert.IsTrue(Car.Retire("VLV100"));
        Assert.IsFalse(Car.Retire("VLV100"));

        // Deliberately not commiting transaction.
    }
} 
```

代码来自关于我前段时间写的方法的博客文章：http: [//coding.abel.nu/2011/12/using-transactions-for-unit-tests/](http://coding.abel.nu/2011/12/using-transactions-for-unit-tests/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-01T12:29:25.460

由于您要求一种模拟 a 的方法，`DataContext`因此我假设您确实想做一些**单元测试而不是集成测试**。

好吧，我会告诉你如何做到这一点，但首先我想鼓励你阅读以下链接，它们都是关于**编写干净的可测试代码**的。

*   [http://misko.hevery.com/code-reviewers-guide/](http://misko.hevery.com/code-reviewers-guide/)

*   [http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf](http://misko.hevery.com/attachments/Guide-Writing%20Testable%20Code.pdf)

并检查此响应中的链接：

*   [https://stackoverflow.com/a/10359288/1268570](https://stackoverflow.com/a/10359288/1268570)

观看 Misko Hevery 的简洁代码演讲（提供给 Google 人员）

*   [http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded](http://www.youtube.com/watch?v=wEhu57pih5w&feature=player_embedded)

*   [http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded](http://www.youtube.com/watch?v=RlfLCWKxHJ0&feature=player_embedded)

*   [http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded](http://www.youtube.com/watch?v=-FRm3VPhseI&feature=player_embedded)

*   [http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded](http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded)

我曾经对自己和工作中的同事重复的一件事是，**任何人都可以编写单元测试，因为它们很容易编写**。所以一个简单的测试本质上就是进行一些比较，如果结果失败则抛出异常，任何人都可以这样做。当然，有数百个框架可以帮助我们以**优雅的方式**编写这些测试。但是真正的交易和真正的努力应该放在**学习如何编写干净的可测试代码上**

即使您聘请 Misko Hevery 来帮助您编写测试，如果您的代码对测试不友好，他也将很难编写它们。

现在模拟`DataContext`对象的方法是：不要这样做

而是使用自定义接口来包装调用：

```
public interface IMyDataContextCalls
{
    void Save();
    IEnumerable<Product> GetOrders();
}
// this will be your DataContext wrapper
// this wll act as your domain repository
public class MyDataContextCalls : IMyDataContextCalls
{
    public MyDataContextCalls(DataClasses1DataContext context)
    {
        this.Context = context;
    }

    public void Save()
    {
        this.Context.SubmitChanges();
    }

    public IEnumerable<Product> GetOrders()
    {
        // place here your query logic
        return this.Context.Products.AsEnumerable();
    }

    private DataClasses1DataContext Context { get; set; }

}

// this will be your domain object
// this object will call your repository wrapping the DataContext
public class MyCommand
{
    private IMyDataContextCalls myDataContext;
    public MyCommand(IMyDataContextCalls myDataContext)
    {
        this.myDataContext = myDataContext;
    }

    public bool myDomainRule = true;

    // assume this will be the SUT (Subject Under Test)
    public void Save()
    {
        // some business logic
        // this logic will be tested
        if (this.myDomainRule == true)
        {
            this.myDataContext.Save();
        }
        else
        {
            // handle your domain validation  errors
            throw new InvalidOperationException();
        }
    }
}

[TestClass]
public class MyTestClass
{
    [TestMethod]
    public void MyTestMethod()
    {
        // in this test your mission is to test the logic inside the 
        // MyCommand.Save method
        // create the mock, you could use a framework to auto mock it
        // or create one manually
        // manual example:
        var m = new MyCommand(new MyFakeDataContextFake());

        m.Invoking(x => x.Save())
            //add here more asserts, maybe asserting that the internal
            // state of your domain object was changed
            // your focus is to test the logic of the domain object
            .ShouldNotThrow();

        //auto mock example:
        var fix = new Fixture().Customize(new AutoMoqCustomization());
        var sut = fix.CreateAnonymous<MyCommand>();
        sut.myDomainRule = false;

        sut.Invoking(x => x.Save())
            .ShouldThrow<InvalidOperationException>();
    }

    public class MyFakeDataContextFake : IMyDataContextCalls
    {
        public void Save()
        {
            // do nothing, since you do not care in the logic of this method,
            // remember your goal is to test the domain object logic
        }

        public IEnumerable<Product> GetOrders()
        {
            // we do not care on this right now because we are testing only the save method

            throw new NotImplementedException();
        }
    }
} 
```

笔记：

*   当你声明你的`IMyDataContextCalls`接口时，你实际上是在抽象 a 的使用`DataContext`，因此这个接口应该只包含 POCO 对象（大多数时候），如果你遵循这种方法，你的接口将与任何不希望的依赖关系解耦。

*   在具体`MyDataContextCalls`实现中，您显式使用`DataClasses1DataContext`上下文，但您可以随时更改实现，这**不会影响您的外部代码**，这是因为您始终使用`IMyDataContextCalls`接口。因此，您可以随时更改此实现，例如使用美妙的**NHibernate** =) 或可怜的 ef 或模拟的另一个实现

*   最后但并非不重要。请仔细检查我的代码，您会注意到**域对象****中没有`new`**运算符。在编写测试友好的代码时，这是一条愚蠢的规则：*将在域对象之外创建对象的责任解耦*

* * *

我个人在每个项目和我编写的每个测试中都使用三个框架，我真的推荐它们：

*   [自动夹具](https://github.com/AutoFixture)

*   [起订量](https://github.com/Moq/moq4)

*   [流利的断言](http://fluentassertions.com/)

例如，在上面的代码中，我向您展示了如何为您的存储库编写手动*伪造*，但这显然是我们不想在真实项目中做的事情，想象一下您必须编写的对象数量才能写你的测试。

而是使用 AutoFixture 与 Moq 相结合的强大功能：

这一行：`var m = new MyCommand(new MyFakeDataContextFake());`

会变成：

```
 var fixture = new Fixture().Customize(new AutoMoqCustomization());
        var sut = fixture.CreateAnonymous<MyCommand>(); 
```

And that's it, this code will automatically create mocks for all the objects needed in the constructor of `MyCommand`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T11:43:47.543

简而言之，您不要模拟 DataContext。您从中提取接口并使用实体集的一些集合来模拟该接口，然后验证这些集合的内容。

# jquery - jQuery 未定义错误和无方法

> ID：11758393
> 
> 赞同：0
> 
> 时间：2012-08-01T11:37:27.387
> 
> 标签：jquery, asp.net, autocomplete

我正在使用[这个自动完成](http://yasserzaid.wordpress.com/2009/12/05/autocomplete-from-database-using-jquery/)功能。我在新项目中运行它，它真的很好用。我把它移到了我的主要项目，但它没有用。我查看了javascript控制台，我得到了

```
Uncaught ReferenceError: jQuery is not defined jquery.autocomplete.js:2
(anonymous function)

Uncaught TypeError: Object [object Object] has no method 'autocomplete'
(anonymous function)
jQuery.fn.extend.ready jquery.js:2299
jQuery.extend.ready.jQuery.readyList jquery.js:2319
jQuery.extend.each jquery.js:745
jQuery.extend.ready jquery.js:2318 
```

我检查了所有路径。

```
 <script src="jscripts/jquery.js" type="text/javascript"></script>
 <link rel="stylesheet" href="skins/skin_1/jquery.autocomplete.css" type="text/css" />
 <script type="text/javascript" src="jscripts/jquery.autocomplete.js"></script>

<script type="text/javascript">
     $(document).ready(function () {
         $("#Size").autocomplete("AutocompleteData.ashx");
     });
     $(document).ready(function () {
         $("#Color").autocomplete("AutoCompleteData2.ashx");
     });
     $(document).ready(function () {
         $("#Brand").autocomplete("AutoCompleteData3.ashx");
     });    
  </script>

<input type="text" ID="Size" runat="server"/>
<input type="text" ID="Color" runat="server"/>
<input type="text" ID="Brand" runat="server"/> 
```

它适用于普通的 aspx、html 页面。但我必须把它放在 .config 页面中。它是这样开始的。我不知道我该如何解释。

```
<PackageTransform>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:asp="urn:asp" exclude-result-prefixes="asp"> 
```

通常我有另一个 jQuery 并且它可以工作。像这样;

```
function moveScroller() {
            var a = function () {
            var b = $(window).scrollTop();
            var d = $("#scroller-anchor").offset().top;
            var c = $("#scroller");
            if (b > d) {
            c.css({ position: "fixed", top: "0px" })
            } else {
            if (d >= b) {
            c.css({ position: "relative", top: "" })
            }
            }
            };
            $(window).scroll(a); a()
            } 
```

我该如何运行它，或者您是否有任何其他使用数据库、键盘箭头和鼠标的自动完成系统。谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:15:11.763

检查 jscripts/jquery.js 文件。你说你已经移动了你的项目，所以可能是该文件没有完全上传，还检查 jscripts/jquery.autocomplete.js 比较它们的大小并检查它们是否完整上传？

# java - 如何以编程方式从 doc 和 docx 文件中删除用户身份信息？

> ID：11758394
> 
> 赞同：1
> 
> 时间：2012-08-01T11:37:26.973
> 
> 标签：java, tags, ms-word, metadata

是否可以使用 POI 等 Java 工具或任何其他命令行工具以编程方式从 doc 和 docx 文件（文档属性）中删除用户身份信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T08:40:39.763

POI 似乎不支持图像删除。图像删除有很多未解决的问题。而且我个人甚至找不到一个图像支持文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:59:38.820

你试过POI吗？我认为应该能够阅读和编辑这些属性——尽管还没有尝试过。

您可能想查看[DocumentSummaryInformation](http://poi.apache.org/apidocs/org/apache/poi/hpsf/DocumentSummaryInformation.html)类。

您可以添加/更改自定义属性 - 标准或非标准属性。[在此处](http://poi.apache.org/hpsf/how-to.html#sec4)检查“阅读非标准属性部分” 。

# iphone - UINavigationController 工具栏按钮在按下时没有动画

> ID：11758404
> 
> 赞同：0
> 
> 时间：2012-08-01T11:38:08.307
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uitoolbar

我在 NavigationController 中嵌入的 UIViewController 很少，在更改屏幕标题、按钮标题、隐藏/显示导航栏（顶栏）或工具栏（底栏）时，一切都很酷，但是 - 我不能强制工具栏按钮有这个动画阴影按下时，就像导航栏按钮一样。更重要的是，工具栏按钮和工具栏一样黑——按钮的颜色不应该比工具栏略浅吗？我希望它很清楚，因为我找不到它，甚至找不到合理的标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:08:30.247

如果您想要一个黑条（导航或工具栏），请将其设置`barStyle`为`UIBarStyleBlack`除黑色之外或代替将其着色为黑色。这让它知道按钮的颜色应该与条的颜色不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:05:30.047

我无法理解您的整个问题，但对于工具栏问题，您可以为这些按钮赋予不同的颜色，也可以产生改变被点击按钮颜色的效果

```
UIBarButtonItem *toolBtn      =       [[UIBarButtonItem alloc] initWithTitle:@"Share and Upload"
                                                                              style:UIBarButtonItemStyleBordered
                                                                             target:self
                                                                             action:@selector(your_Target)]; 

toolBtn.tintColor               =           [UIColor redColor]; 
```

现在假设 toolBtn 是你在工具栏中的第一个按钮，点击它你想改变它的颜色，然后在你的目标函数中

```
-(void)your_Target{

   UIBarButtonItem *button1        =           [[your_Toolbar items] objectAtIndex:0];
    button1.tintColor               =           [UIColor brownColor];

// or you can simply loop all toolbar buttons and change the color of only clicked one and for rest keep it default
} 
```

希望这会帮助你..对不起我的英语不好:)

# linux - Perl 输出显示在终端的左侧？

> ID：11758407
> 
> 赞同：1
> 
> 时间：2012-08-01T11:38:13.753
> 
> 标签：linux, perl, ubuntu-10.04

奇怪的是，当我在 Perl 中执行代码时，输​​出总是出现在命令行的左侧。例如。

```
admin@admin-machine:~$ perl my_program
1 2 3 4 5 admin@admin-machine:~$ 
```

我如何让它像下面这样在一行上单独显示输出？

```
admin@admin-machine:~$ perl my_program
1 2 3 4 5
admin@admin-machine:~$ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T11:41:40.763

您需要在打印语句的末尾添加一个换行符 (\n)。例如

```
print "1 2 3 4 5 \n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:25:27.153

假设您真的知道自己在做什么，一切皆有可能。

```
if(0 == fork()) {
        sleep(1);
        print "1 2 3 4 5";
}

s0me0ne@ws:/tmp$ perl print.pl 
s0me0ne@ws:/tmp$ 1 2 3 4 5 
```

我怀疑它是否对某人有帮助，但是......只是回答;）

# c# - 在泛型派生类中隐藏基类方法

> ID：11758411
> 
> 赞同：4
> 
> 时间：2012-08-01T11:38:42.160
> 
> 标签：c#, inheritance, method-hiding

我有一个这样的基类：

```
class FooBase
{
    public bool Do(int p) { /* Return stuff. */ }
} 
```

还有一个像这样的子类：

```
class Foo<T> : FooBase
{
    private Dictionary<T, int> Dictionary;

    public bool Do(T p)
    {
        int param;
        if (!Dictionary.TryGetValue(p, out param))
            return false;
        return base.Do(param);
    }
} 
```

如果用户创建了一个`Foo<string>`名为“fooString”的对象，那么他可以同时调用这两个对象`fooString.Do(5)`，`fooString.Do("test")`但是如果他创建了一个`Foo<int>`名为“fooInt”的对象，他只能调用派生类的 Do 方法。我更喜欢第二个，不管是什么`T`。

这两个类中的 Do 方法本质上是做同样的事情。派生类中的一个`Dictionary<T, int>`使用给定参数从 a 中获取一个整数，并使用它调用基类的 Do 方法。

这就是为什么我要隐藏`FooBase`in的 Do 方法`Foo<T>`。我怎样才能做到这一点或类似的东西？任何克服这个问题的设计建议也很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T11:47:39.447

> 但是如果他创建了一个`Foo<int>`名为“fooInt”的对象，他只能调用派生类的Do方法。

不，那不是真的。如果变量的声明类型是`FooBase`，它仍然会调用该`FooBase`方法。你并没有真正阻止访问`FooBase.Do`- 你只是隐藏它。

```
FooBase foo = new Foo<int>();
foo.Do(5); // This will still call FooBase.Do 
```

完整的示例代码表明：

```
using System;

class FooBase
{
    public bool Do(int p) { return false; }
}

class Foo<T> : FooBase
{
    public bool Do(T p) { return true; }
}

class Test
{
    static void Main()
    {
        FooBase foo1 = new Foo<int>();
        Console.WriteLine(foo1.Do(10)); // False

        Foo<int> foo2 = new Foo<int>();
        Console.WriteLine(foo2.Do(10)); // True
    }
} 
```

> 这就是为什么我想在 Foo 中隐藏 FooBase 的 Do 方法。

您需要考虑[Liskov 的可替代性原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

*要么* `Foo<T>`不应该派生自`FooBase`（使用组合而不是继承）*，要么* `FooBase.Do`不应该是可见的（例如使其受保护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:47:33.417

您可以使用方法构建一个抽象的基类`protected Do`，并将当前`FooBase`类重写为继承自`Foo<T>`：

```
public abstract class FooBaseAbstract
{
    protected bool Do(int p)
    {
        return true;
    }
}

// You can use this one just as your current FooBase class
public class FooBase : Foo<int>
{
}

public class Foo<T> : FooBaseAbstract
{
    public bool Do(T p)
    {
        if (true /* some test here */)
        {
            return base.Do(4);
        }

        return false;
    }
} 
```

（当然改变类名）

# jquery - 从服务器端打开对话框

> ID：11758413
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:38:43.210
> 
> 标签：jquery, asp.net

基本上在客户端我有这个jquery函数

```
function OpenDialog()
{
$('.jqmWindow').jqm();

   $('#ConfirmEnquiry').jqmShow();

} 
```

我想在单击 imageButton 时调用此函数，但我想从服务器端从 Vb 文件中调用它。

VB代码

```
 Protected Sub btnimg_Click(ByVal sender As System.Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles btnimg.Click
 'opendialog here 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:35:40.743

你混淆了一些东西。

您不能在服务器上调用对话框。对话框出现在浏览器中，您的服务器不知道浏览器是什么。所以，不，你不能这样做。

在服务器上进行验证，如果它将打印传递到 HTML 中，则使用一行 javascript 来调用对话框。您可以将它打包到一个控件中，但仍然是使用 javascript 从客户端调用对话框，而不是服务器。

可悲的是，对于那些学会做 web 微软风格的人来说，这是一个常见的错误。.NET 隐藏了许多普通的 Web 内容，并在其上添加了一层抽象。您在服务器代码中看到的很多东西并没有真正在服务器上执行。它只是生成在客户端上执行的 javascipt。我猜你想要与你的对话类似的东西。了解网络是如何真正运作的，而不仅仅是如何在 .NET 中破解某些东西

# c++ - C++ 中类成员上的类和 std::async

> ID：11758414
> 
> 赞同：31
> 
> 时间：2012-08-01T11:38:44.103
> 
> 标签：c++, c++11

我正在尝试编写一个类成员，它同时多次调用另一个类成员。

我写了一个简单的问题示例，甚至无法编译它。我在调用 std::async 时做错了什么？我想问题在于我如何传递函数。

```
#include <vector>
#include <future>
using namespace std;
class A
{
    int a,b;
public: 
    A(int i=1, int j=2){ a=i; b=j;} 

    std::pair<int,int> do_rand_stf(int x,int y)
    {
        std::pair<int,int> ret(x+a,y+b);
        return ret;
    }

    void run()
    {
        std::vector<std::future<std::pair<int,int>>> ran;
        for(int i=0;i<2;i++)
        {
            for(int j=0;j<2;j++)
            {
                auto hand=async(launch::async,do_rand_stf,i,j);
                ran.push_back(hand);    
            }
        }
        for(int i=0;i<ran.size();i++)
        {
            pair<int,int> ttt=ran[i].get();
            cout << ttt.first << ttt.second << endl;
        } 
    }
};

int main()
{
    A a;
    a.run();
} 
```

汇编：

```
g++ -std=c++11 -pthread main.cpp 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-01T11:55:48.277

`do_rand_stf`是一个非静态成员函数，因此不能在没有类实例（隐式参数）的情况下调用`this`。幸运的是，`std::async`像您需要做的就是传递给调用并在传递时使用有效的成员函数指针语法：`std::bind``bind``std::mem_fn``this``this``std::async``do_rand_stf`

```
auto hand=async(launch::async,&A::do_rand_stf,this,i,j); 
```

不过，代码中还有其他问题。首先，您使用`std::cout`and`std::endl`不使用`#include`ing `<iostream>`。更严重的是，`std::future`它是不可复制的，只能移动，所以你`push_back`不能不`hand`使用`std::move`. 或者，只需将`async`结果`push_back`直接传递给：

```
ran.push_back(async(launch::async,&A::do_rand_stf,this,i,j)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-12T22:15:05.013

您可以将`this`指针传递给新线程：

```
async([this]()
{
    Function(this);
}); 
```

# javascript - 使用 Javascript 与选择输入交互？

> ID：11758421
> 
> 赞同：0
> 
> 时间：2012-08-01T11:39:19.593
> 
> 标签：javascript, ajax, select, onload

假设我有一个带有 10 个选项和 ID“myselect”的选择输入。我如何才能在页面加载时或基本上尽可能早地使其看起来好像以这种方式加载，检查在“myselect”中选择了哪个选项并将一个css类添加到选择所在的父级、父级div？

这个问题的第二部分是，如果您在页面加载后更改选择，那么相应地更改 css 类的最佳方法是什么？最好只添加第二个使用 onclick 之类的 javascript 位而不是 onload 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:39:37.830

加载后立即挂钩的最佳方法是在 HTML 元素之后立即使用内联 JavaScript 块。它比使用 document.ready 优雅得多，但它肯定会工作。像这样的东西：

```
<select name="s1" id="S1">...<.select>
<script type="text/javascript">
var sel = document.forms[0].S1;
var ind = sel.selectedIndex; <-- this will tell you which is selected
if(ind==3) {
    document.getElementById("S1").parentNode.setAttribute("className", "active")
}
</script> 
```

对于第二部分，您想要连接“onchange”事件。

# android - 需要关于返回的 sqlite 的帮助：错误代码 =1，msg = table has no column name

> ID：11758426
> 
> 赞同：0
> 
> 时间：2012-08-01T11:39:36.833
> 
> 标签：android

我是 android 编程的初学者，我在尝试插入我的 sqlite 数据库时遇到了这个错误。

> sqlite 返回：错误代码 =1，msg = 表 MobileHouseVisit 没有列 Elder_date_time。

对于前 3 列，在我添加更多列之前没有问题。这就是我评论它的原因。我检查了间距，一切看起来都很好。我用谷歌搜索了它，但仍然没有任何帮助。

下面是我的代码

```
private static final String DATABASE_NAME = "silverCareMgt.db";
private static final String DATABASE_TABLE = "MobileHouseVisit";
private static final int DATABASE_VERSION = 1;
private SQLiteDatabase _db;
private final Context context;

public static final String MOBILE_HOUSE_VISIT_ID = "_id";
public static final int COLUMN_KEY_ID = 0;
public static final String ELDERLY_NAME = "elderly_name";
public static final int COLUMN_NAME_ID = 1;
public static final String ELDERLY_NRIC = "elderly_nric";
public static final int COLUMN_TEL_ID = 2;
public static final String ELDERLY_DATE_TIME = "elderly_date_time";
public static final int COLUMN_DT_ID = 3;
//public static final String PHYSICAL_HEALTH_STATUS ="physical_health";
//public static final int COLUMN_PHY_ID = 4;
//public static final String MENTAL_HEALTH_STATUS ="mental_health_status";
//public static final int COLUMN_MENTAL_ID = 5;

protected static final String DATABASE_CREATE = "create table " + DATABASE_TABLE +" ("+ 
                    MOBILE_HOUSE_VISIT_ID + " integer primary key autoincrement, "+
                    ELDERLY_NAME + " TEXT NOT NULL, "+
                    ELDERLY_NRIC + " TEXT NOT NULL, " +
                    ELDERLY_DATE_TIME + " TEXT NOT NULL);"; 
                    //+ PHYSICAL_HEALTH_STATUS + " TEXT, "
                    //+ MENTAL_HEALTH_STATUS + " TEXT);"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:46:29.043

我认为您的问题是当您第一次运行代码时，未在表中创建列。所以下次当您向表中添加更多列时，不会再次创建您的表。卸载您的应用程序，然后再次运行它。将再次创建数据库和表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:49:40.707

首次运行应用程序时会创建数据库。如果您修改数据库，您必须重新安装应用程序从而重新创建您的数据库或实施[`onUpdgrade`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29 "升级")您负责对数据库进行更改的方法

# .htaccess - .htaccess RewriteRule 在没有 R 标志的情况下不起作用

> ID：11758434
> 
> 赞同：0
> 
> 时间：2012-08-01T11:40:10.523
> 
> 标签：.htaccess

我有这个规则：

```
RewriteRule ^questions/([a-z]{2})/(.*)$ $1/$2 [L] 
```

但是这个规则只有在我添加一个 R=301 标志时才有效......问题是 url 在浏览器的地址栏中被重写。如何重定向并保留用户在地址栏中键入的 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:43:23.880

301 被发送回浏览器，浏览器向重定向页面发送新请求。这就是浏览器被重定向的原因。

使用**本地重定向**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:45:36.980

为了保留用户 url，你应该在你的 vhost.conf 中使用“ProxyRequest”。 [mod_proxy](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)。

# java - 在另一个方法中初始化构造函数中的最终变量

> ID：11758440
> 
> 赞同：10
> 
> 时间：2012-08-01T11:40:43.460
> 
> 标签：java, android

我有一个问题并不大，但仍然让我想到了如何使用 Java 构造函数和方法。

我有一个常数，代表我宣布为最终的半径，并将其公开给大家看。当我永远不会改变半径时，我不希望我的代码被 getRadius() 方法弄得乱七八糟。

我想在构造函数中初始化常量，因为我想在分配半径之前应用某些条件，必须满足某些条件。但是，这些条件确实占用了一些空间，我想将它们放在其他方法中，以使构造函数更简洁。

整个事情最初看起来像这样

```
public MyProblematicClass {
   public final int radius;
   public MyProblematicClass(... variables ...) {
      if(... long criteria ...) {
         radius = n;
      }
   }
} 
```

我希望它最终像

```
public MyProblematicClass {
       public final int radius;
       public MyProblematicClass(... variables ...) {
          this.setRadiuswithCriteria(criteria);
}

private void setRadiuswithCriteria(criteria crit) {
   if(... crit ...) {
      radius = n;
   } 
```

我知道我可能会将该方法用于其他目的，这就是给我一个“空白字段 RADIUS 可能尚未初始化”的原因，所以我想知道是否有一种方法可以添加一种方法为了清洁起见，在构造函数中使用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T11:43:41.617

怎么样（使用小型大写字母作为半径，因为它不是一个常数，正如评论中指出的那样）：

```
public MyProblematicClass(... variables ...) {
    radius = getRadiusWithCriteria(criteria);
}

private int getRadiusWithCriteria(criteria crit) {
   if(... crit ...) {
      return n;
   } else {
      return 0;
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T11:48:30.367

您不能分配给构造函数外部的最终变量。如您所说，方法：

```
setRadiuswithCriteria(criteria crit) {
   if(... crit ...) {
      RADIUS = n;
   } 
```

可以在构造函数之外使用。

并且您必须在构造函数中将最终变量设置为某个值，而不仅仅是在检查某些条件之后（总是，而不是有时）。

但是，您可以使用某个函数的返回值将代码移到构造函数之外。例子：

```
class MyClass {
    private final double i;
    public MyClass() {
        i = someCalculation();
    }
    private double someCalculation() {
        return Math.random();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:04:06.803

这样做怎么样？

```
public MyProblematicClass {
    public final int RADIUS;
    public MyProblematicClass(... variables ...) {
       RADIUS = this.setRadiuswithCriteria(criteria);
}

private int setRadiuswithCriteria(criteria crit) {
if(... crit ...) {
    return n;
}
return 0;
} 
```

# java - Spring JavaConfig 是否避免组件扫描并改善启动时间？

> ID：11758447
> 
> 赞同：3
> 
> 时间：2012-08-01T11:41:10.540
> 
> 标签：java, spring

Spring 需要大约 5 到 10 秒来自行配置它，我使用 XML 进行基础设施 bean，并使用注释进行组件扫描以用于其他所有内容。

Spring JavaConfig 是否消除了对组件扫描的需求以及按类型自动连接 bean 的所有反射？有没有人看到 JavaConfig 的启动时间有所改善？

我主要关心的是加快集成测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:51:43.630

如果您继续使用[`@ComponentScan`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html)，显然您不会看到任何改进，因为会发生相同的扫描，您只是使用不同的格式启用它。

另一方面，如果您使用`@Bean`注释定义所有 bean 并通过调用其他方法手动执行连接`@Bean`- 好吧，您将避免组件扫描成本，但这将使您回到 90 年代，除了您将 XML 换成 Java（一种改进）。还要记住，Java 配置也有一些成本。`@Configuration`由于超出此问题范围的原因，每个类都需要 CGLIB 代理。

我通常做的是`@Bean`用于基础设施 bean（我无法控制）和`@ComponentScan`其他所有东西。您确定是组件扫描导致延迟而不是 Hibernate 或其他第三方库启动时间吗？如果它正在扫描，那么您正在为开发人员的舒适度交易启动时间（无需手动声明/手动连接所有内容）。

当然有一些方法可以减少组件扫描时间，主要是仔细过滤包/类名，以便只扫描相关的类。

# java - 如何为使用 JSP 生成的下载文件显示“保存文件”对话框？

> ID：11758452
> 
> 赞同：1
> 
> 时间：2012-08-01T11:41:35.237
> 
> 标签：java, javascript, jsp

```
HSSFWorkbook hwb=new HSSFWorkbook();
HSSFSheet sheet =  hwb.createSheet(seldate+"|"+seldate2);

HSSFRow rowhead=   sheet.createRow((short)0);
rowhead.createCell((short) 0).setCellValue("NUMBER");
rowhead.createCell((short) 1).setCellValue("EMPLOYEE NAME");
rowhead.createCell((short) 2).setCellValue("ITEM QUANTITY");
rowhead.createCell((short) 3).setCellValue("AMOUNT PAID");
//rowhead.createCell((short) 4).setCellValue("");

String sql="something";

ResultSet rs=st.executeQuery(sql);
ResultSetMetaData rsmd=null;
rsmd=rs.getMetaData();
int colcnt=rsmd.getColumnCount();
int i=1;
double grandTotal = 0.0;
while(rs.next())
{
/*----*/
String [] dot=new String[colcnt];

//System.out.println("\n record count for data :"+(++tr));

for (int jk=1;jk<=colcnt;jk++)
    {
    dot[jk-1]=rs.getString( jk);

    }
al.add(dot);
}
String pot []=null;
//HSSFRow row=   sheet.createRow((short)i);
for(int mn=0;mn<al.size();mn++)
{
    pot=(String[])al.get(mn);

    String number=pot[0];
    String empname=pot[1];
    String itemqty=pot[2];
    String emprate=pot[3];

    double Rate=Double.parseDouble(emprate);
    //out.println(Rate);
    int Qty=Integer.parseInt(itemqty);
    //out.println(Rate);
    totAmt=(Rate)*(Qty);
    grandTotal += totAmt;

/*----*/
HSSFRow row=   sheet.createRow((short)i);
//row.createCell((short) 0).setCellValue(Integer.toString(rs.getInt("BID")));
row.createCell((short) 0).setCellValue(number);
row.createCell((short) 1).setCellValue(empname);
row.createCell((short) 2).setCellValue(itemqty);
row.createCell((short) 3).setCellValue(totAmt);
//row.createCell((short) 4).setCellValue(rs.getString(""));

i++;
//row.createCell((short)3).setCellValue("12345");
}
/*--------------------------*/
HSSFRow row1=sheet.createRow((short)i);
row1.createCell((short) 2).setCellValue("Grand Total");
row1.createCell((short) 3).setCellValue(grandTotal);

/*---------------------------*/
FileOutputStream fileOut =  new FileOutputStream(filename);
hwb.write(fileOut);
fileOut.close();
//out.println("<script>win=window.open('ExcelMsg.jsp','popup','toolbar=no,status=no,height=300,width=800');</script>"); 
```

我有上面的代码，它在执行时会生成一个存储在客户端的 Excel 文件，直接存储到名为“report”的目录中的“D”驱动器中。我希望这由用户选择发生意味着它必须打开一个文件对话框（保存对话框）并让用户指定他想要存储 Excel 文件的位置。如何做到这一点？

更新代码

```
<%
ArrayList al=new ArrayList();
int tr=0;
double totAmt=0.0;

try
{
String seldate=request.getParameter("Sdate");
out.println("\n selected date : :"+seldate);
String seldate2=request.getParameter("Sdate2");
out.println("\n selected date 2 : :"+seldate2);

String str_date=seldate2;
SimpleDateFormat formatter ; 
Date date =new Date() ; 
Calendar cal2=Calendar.getInstance();
formatter = new SimpleDateFormat("dd-MMM-yyyy");
//date = (Date)formatter.parse(str_date);
cal2.setTime(formatter.parse(str_date));
cal2.add(Calendar.DATE,1);
str_date=formatter.format(cal2.getTime());
out.println("\n Today is " +str_date );

Calendar cal = new GregorianCalendar();
String name=cal.get(Calendar.DATE) +"-" +(cal.get(Calendar.MONTH)+1) + "-"+cal.get(Calendar.YEAR);

/*-------------------------------------------------------------------------------------------------*/
System.out.println("1");
String fileStoreURL="";
String rootpath="D:";
fileStoreURL =rootpath+"/Report";
System.out.println("2");
try {
    File f = new File(fileStoreURL);
    if (!f.exists())
    {
    f.mkdirs();
    }
    } 
    catch (Exception e)
        {

        }
System.out.println("3");
String filename=fileStoreURL+"/"+name+".xls" ;
//String filename=name+".xls" ;
System.out.println("4");
/*-------------------------------------------------------------------------------------------------*/
System.out.println("5");
        HSSFWorkbook hwb=new HSSFWorkbook();
        HSSFSheet sheet =  hwb.createSheet(seldate+"|"+seldate2);

        HSSFRow rowhead=   sheet.createRow((short)0);
        rowhead.createCell((short) 0).setCellValue("NUMBER");
        rowhead.createCell((short) 1).setCellValue("EMPLOYEE NAME");
        rowhead.createCell((short) 2).setCellValue("ITEM QUANTITY");
        rowhead.createCell((short) 3).setCellValue("AMOUNT PAID");
        //rowhead.createCell((short) 4).setCellValue("");

        String sql="something";

        ResultSet rs=st.executeQuery(sql);
        ResultSetMetaData rsmd=null;
        rsmd=rs.getMetaData();
        int colcnt=rsmd.getColumnCount();
        int i=1;
        double grandTotal = 0.0;
        while(rs.next())
        {
        /*----*/
        String [] dot=new String[colcnt];

        //System.out.println("\n record count for data :"+(++tr));

        for (int jk=1;jk<=colcnt;jk++)
            {
            dot[jk-1]=rs.getString( jk);

            }
        al.add(dot);
        }
        String pot []=null;
        //HSSFRow row=   sheet.createRow((short)i);
        for(int mn=0;mn<al.size();mn++)
        {
            pot=(String[])al.get(mn);

            String number=pot[0];
            String empname=pot[1];
            String itemqty=pot[2];
            String emprate=pot[3];

            double Rate=Double.parseDouble(emprate);
            //out.println(Rate);
            int Qty=Integer.parseInt(itemqty);
            //out.println(Rate);
            totAmt=(Rate)*(Qty);
            grandTotal += totAmt;

        /*----*/
        HSSFRow row=   sheet.createRow((short)i);
        //row.createCell((short) 0).setCellValue(Integer.toString(rs.getInt("BID")));
        row.createCell((short) 0).setCellValue(number);
        row.createCell((short) 1).setCellValue(empname);
        row.createCell((short) 2).setCellValue(itemqty);
        row.createCell((short) 3).setCellValue(totAmt);
        //row.createCell((short) 4).setCellValue(rs.getString(""));

        i++;
        //row.createCell((short)3).setCellValue("12345");
        }
        /*--------------------------*/
        HSSFRow row1=sheet.createRow((short)i);
        row1.createCell((short) 2).setCellValue("Grand Total");
        row1.createCell((short) 3).setCellValue(grandTotal);

        /*---------------------------*/

    response.setHeader("Content-Length", String.valueOf(filename.length())); response.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");  
    InputStream input = new BufferedInputStream(new FileInputStream(filename), 1024 * 10); 
    OutputStream output = new BufferedOutputStream(response.getOutputStream(), 1024 * 10);  
    byte[] buffer = new byte[1024 * 10]; 
    int length; 
    while ((length = input.read(buffer)) > 0) 
        {     
        output.write(buffer, 0, length); 
        }  
        output.flush(); 
        output.close(); 
        input.close(); 
```

错误：

```
java.io.FileNotFoundException: 1-8-2012.xls (The system cannot find the file spe
cified)
java.io.FileNotFoundException: 1-8-2012.xls (The system cannot find the file spe
cified)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(Unknown Source)
        at java.io.FileInputStream.<init>(Unknown Source)
        at org.apache.jsp.sapep.elrservices.processor.ExcelReport2_jsp._jspServi
ce(ExcelReport2_jsp.java:238)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper
.java:377)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:3
13)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java
:857)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce
ss(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:48
9)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:59:30.943

您需要将 的内容写入`File`，`ServletOutputStream`此外还需要设置响应的`content-length`和`content-disposition`，

这是一个简单的例子：

```
response.setHeader("Content-Length", String.valueOf(file.length()));
response.setHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");

InputStream input = new BufferedInputStream(new FileInputStream(file), 1024 * 10);
OutputStream output = new BufferedOutputStream(response.getOutputStream(), 1024 * 10);

byte[] buffer = new byte[1024 * 10];
int length;
while ((length = input.read(buffer)) > 0) {
    output.write(buffer, 0, length);
}

output.flush();
output.close();
input.close(); 
```

显然，您还需要添加适当的异常处理代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T06:41:57.730

您需要将文件的内容写入 ServletOutputStream，此外您还需要设置响应的内容长度和内容处置，如上面的答案所示。

来到“另存为”您需要执行以下操作，

转到您的浏览器设置并将默认下载位置更改为在下载前询问每个文件的保存位置。

对于谷歌浏览器，

转到：- 设置 > 显示高级设置 > 下载。勾选复选框**下载前询问每个文件的保存位置**。

# iphone - 需要使用 iPhone 中的照片库照片创建照片滑块

> ID：11758454
> 
> 赞同：1
> 
> 时间：2012-08-01T11:41:38.090
> 
> 标签：iphone, xcode, photo, alassetslibrary

我想要像 whts 应用程序那样的照片滑块。它应该访问构建照片库中的所有图片或一些图片，并且应该可以使用滚动视图滚动。

我尝试过使用不同的照片查看器，但一切都有内存问题。所以不确定是否有人有它的工作解决方案。非常感谢您的帮助。

谢谢，

安基塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:19:57.540

这几乎可以正常工作，但是后退方向滚动存在一个小问题。试试这个，你可能会找到一些方向，并且可能会找到更好的解决方案。

（已使用 ELCImagePicker 第一次显示所有图像，然后在选择一个呈现时滚动视图以一次显示大图像 10 个图像显示还调整了 ELCImagePickerController 的委托方法以获取所选图像的索引）

首次加载，即从 ELCImagePickerController 中选择图像时

```
- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info selectedIndex:(NSInteger)_index {
    [self dismissModalViewControllerAnimated:NO];

    for (UIView *v in [scrollview subviews]) {
        [v removeFromSuperview];
    }
    infoItems = [[NSArray alloc]initWithArray:info];
    CGRect workingFrame = scrollview.frame;
    workingFrame.origin.x = 0;
    int indexFrame = picker.selectedIndex;
    newIndex = indexFrame;
    for(int i = 0; i < [info count]; i++) 
    {
        NSDictionary *dict = [info objectAtIndex:i];
        UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];
        [imageview setContentMode:UIViewContentModeScaleAspectFit];
        imageview.frame = workingFrame;
        imageview.tag = i;
        if(i >= indexFrame && i <= indexFrame + 9)
        {
            [scrollview addSubview:imageview];
            workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;
        }
    }
    [scrollview setPagingEnabled:YES];
    [scrollview setContentSize:CGSizeMake(workingFrame.origin.x, workingFrame.size.height)];
    [scrollview scrollRectToVisible:CGRectMake(0, 0, workingFrame.size.width, workingFrame.size.height) animated:NO];
    self.scrollview.hidden = NO;
    self.pageControll.hidden = NO;
    self.pageControll.numberOfPages = [[scrollview subviews]count];
    index = 0;
    lastContentOffset = scrollview.contentOffset.x;
    NSLog(@"lastContentOffset %.2f",lastContentOffset);
} 
```

之后在 scrollViews 委托方法上

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSLog(@"ScrollViewDidEndDecelerating is called with subview(s) %d",[[scrollview subviews]count]); 
    if(lastContentOffset < scrollView.contentOffset.x)
    {

        index += (int)(scrollview.contentOffset.x - lastContentOffset)/scrollview.frame.size.width;
        newIndex += (int)(scrollview.contentOffset.x - lastContentOffset)/scrollview.frame.size.width;
        self.pageControll.currentPage = index;
        NSLog(@"Index incremented %d \n newIndex %d",index,newIndex);
        if(index == [[scrollView subviews]count]-1)
        {
            if(newIndex < [infoItems count]-1)
            {
                [self performSelector:@selector(reloadScrollViewWithNewImages)];
            }
        }
        [Appirater userDidSignificantEvent:YES];
    }
    else if(lastContentOffset > scrollView.contentOffset.x)
    {
        index -= (int)(lastContentOffset - scrollview.contentOffset.x)/scrollview.frame.size.width;
        newIndex -= (int)(int)(lastContentOffset - scrollview.contentOffset.x)/scrollview.frame.size.width;
        self.pageControll.currentPage = index;
        NSLog(@"Index decremented %d \n newIndex %d",index,newIndex);
        if(index == 0)
        {
            if(newIndex > 0)
            {
                newIndex -= 9;
                if(newIndex < 0)
                    newIndex = 0;
                [self performSelector:@selector(reloadScrollViewWithNewImages)];
            }
        }
        [Appirater userDidSignificantEvent:YES];
    }
    lastContentOffset = scrollView.contentOffset.x;
    NSLog(@"New lastContentOffset %.2f",lastContentOffset);
} 
```

并且用于重新加载scrollView的方法如下

```
-(void)reloadScrollViewWithNewImages
{
    for (UIView *v in [scrollview subviews]) {
        [v removeFromSuperview];
    }
    CGRect workingFrame = scrollview.frame;
    workingFrame.origin.x = 0;
    NSLog(@"reloadScrollView newIndex %d",newIndex);
    int indexFrame = newIndex;
    for(int i = 0; i < [infoItems count]; i++) 
    {
        NSDictionary *dict = [infoItems objectAtIndex:i];
        UIImageView *imageview = [[UIImageView alloc] initWithImage:[dict objectForKey:UIImagePickerControllerOriginalImage]];
        [imageview setContentMode:UIViewContentModeScaleAspectFit];
        imageview.frame = workingFrame;
        imageview.tag = i;
        if(i >= indexFrame && i <= indexFrame + 9)
        {
            [scrollview addSubview:imageview];
            workingFrame.origin.x = workingFrame.origin.x + workingFrame.size.width;
        }
    }
    [scrollview setPagingEnabled:YES];
    [scrollview setContentSize:CGSizeMake(workingFrame.origin.x, workingFrame.size.height)];
    [scrollview scrollRectToVisible:CGRectMake(0, 0, workingFrame.size.width, workingFrame.size.height) animated:NO];
    self.scrollview.hidden = NO;
    self.pageControll.hidden = NO;
    index = 0;
    self.pageControll.numberOfPages = [[scrollview subviews]count];
    NSLog(@"number %d",[[scrollview subviews]count]);
    lastContentOffset = scrollview.contentOffset.x;
    NSLog(@"reloadScrollView's lastContentOffset %.2f",lastContentOffset);
} 
```

并且此代码所需的 .h 文件的接口部分中声明的所有使用的属性和私有 ivars 都是

私人 ivars

```
NSInteger index;
float lastContentOffset; 
```

特性

```
@property (nonatomic,strong) IBOutlet UIScrollView *scrollview;
@property (strong, nonatomic) NSArray *infoItems;
@property (assign, atomic) int newIndex; 
```

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:22:35.373

您可以使用 CATiledLayer 来绘制图像。CATiledLayer 可用于提高高分辨率图像或大型照片集的分页、平移和缩放性能。

正如我在上面评论的那样，您可以通过可重用视图方法进行操作，这意味着一次只有三个 imagview 或视图会在内存中。假设您正在显示照片编号：2 因此，您应该将照片：1,2 和 3 保存在内存中（即避免闪烁），无需一次加载所有照片。假设您正在滚动到照片编号：3，那么您的逻辑应该丢弃照片编号：1 并加载照片编号：2、3、4。如果您仍然没有得到或不知道如何以编程方式执行此操作，请不要担心。Apple 的优秀示例代码可以满足您的所有需求。

[示例代码](https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080-Intro-DontLinkElementID_2)

在上面的示例代码中，他们显示了两种显示图像的方式。
一种是直接将图像显示/设置为图像视图。
其次是使用此方法使用 TileView 绘制图像：
`- (void)displayTiledImageNamed:(NSString *)imageName size:(CGSize)imageSize`

如果您正在考虑很多关于内存的问题，那么您肯定必须使用第二种方法。

# c# - 单击wpf中的RepeatButton时如何将光标聚焦在文本框中？

> ID：11758455
> 
> 赞同：2
> 
> 时间：2012-08-01T11:41:40.430
> 
> 标签：c#, wpf, textbox, setfocus, repeatbutton

```
 <Grid x:Name="BackSpaceButton">       
    <TextBox x:Name="txt_remove" Height="46" Margin="234,119,225,0" TextWrapping="Wrap" VerticalAlignment="Top" GotFocus="txt_remove_GotFocus" TabIndex="2"/>        
    <RepeatButton x:Name="rbtn_remove" Content="Backspace" Delay="400" Interval="200" Margin="415,124,0,0" RenderTransformOrigin="0.667,0.854" Click="rbtn_remove_Click" LostMouseCapture="rbtn_remove_LostMouseCapture" HorizontalAlignment="Left" Height="41" VerticalAlignment="Top" Width="66" TabIndex="2" />        
</Grid> 
```

这个设计将如下所示

![在此处输入图像描述](../Images/07ce71b7dab3d916858eb5fcf7c3f0cd.png)

```
public partial class Repeate : Window
{
    Control GetTextbox;
    TextBox GetInstance;
    public Repeate()
    {
        this.InitializeComponent();
    }

    private void rbtn_remove_Click(object sender, RoutedEventArgs e)
    {

        GetInstance = GetTextbox as TextBox;
        if (GetTextbox != null)
        {

            string _CurrentValue = GetInstance.Text;
            var _CareIndex = GetInstance.CaretIndex;

            if (_CareIndex > 0)
            {
                string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                GetInstance.Text = _Backspace;                   
                GetInstance.CaretIndex = _CareIndex - 1;
            }
        }
    }

    private void txt_remove_GotFocus(object sender, RoutedEventArgs e)
    {
        GetTextbox = (Control)sender;
    }

    private void rbtn_remove_LostMouseCapture(object sender, MouseEventArgs e)
    {
        GetInstance.Focus();
    }

} 
```

输出将如下所示

![在此处输入图像描述](../Images/8e1265b4e89038fdcb150cccd913c70f.png)

当我单击退格按钮时，文本框将被删除，光标将聚焦在文本框中。问题是，当我单击并按住退格按钮时，文本框值会反复删除，但光标未显示。

例如**：**在文本框中输入值，然后单击并按住系统键盘上的退格键，您将获得差价。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:07:58.187

使用下面的代码它会很好地帮助你。为什么因为前一天我遇到了同样的问题。

```
<Grid x:Name="BackSpaceButton">
    <TextBox x:Name="txt_remove" Height="46" Margin="234,119,225,0" TextWrapping="Wrap" VerticalAlignment="Top" GotFocus="txt_remove_GotFocus" TabIndex="2"/>        
    <RepeatButton x:Name="rbtn_remove" Focusable="False"  Content="Backspace" Delay="400" Interval="100" Margin="415,123,0,0" RenderTransformOrigin="0.667,0.854" Click="rbtn_remove_Click" LostMouseCapture="rbtn_remove_LostMouseCapture" HorizontalAlignment="Left" Height="41" VerticalAlignment="Top" Width="66"/>        
</Grid> 
```

在上面的代码中，我只添加了一个属性**Focusable="False"**

```
 private void rbtn_remove_Click(object sender, RoutedEventArgs e)
    {
        GetInstance = GetTextbox as TextBox;
        if (GetTextbox != null)
        {

            string _CurrentValue = GetInstance.Text;
            var _CareIndex = GetInstance.CaretIndex;

            if (_CareIndex > 0)
            {
                string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                GetInstance.Text = _Backspace;                   
                GetInstance.Focus();
                GetInstance.CaretIndex = _CareIndex - 1;                   

            }
        }
    }
    void txt_remove_GotFocus(object sender, RoutedEventArgs e)
    {
        GetTextbox = (Control)sender;  
    }
    private void rbtn_remove_LostMouseCapture(object sender, MouseEventArgs e)
    {
        GetInstance.Focus();
    } 
```

在上面的代码中，我刚刚添加了单个代码**GetInstance.Focus();**

# php - PHP - 复选框状态保存。动态复选框数

> ID：11758457
> 
> 赞同：0
> 
> 时间：2012-08-01T11:42:06.730
> 
> 标签：php, checkbox

希望有人可以帮助我。我正在尝试编写一个包含要处理的动态数量的脚本。

首先，页面将提交复选框，有些已选中，有些未选中。提交的复选框数量将是动态的，因为它取决于列表中条目的数量。该脚本需要能够解释每个复选框以查看它是否被选中。如果复选框被选中，脚本需要将复选框的选定值的值写入文件。

我从来没有做过任何具有可变数量的 $_POST 变量的事情。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:03:17.603

如果我正确理解了你的问题，

提供一个数组作为`name`复选框

```
<input type="checkbox" name="abc[]" val="1" />
<input type="checkbox" name="abc[]" val="2" />
<input type="checkbox" name="abc[]" val="3" />
<input type="checkbox" name="abc[]" val="4" /> 
```

然后`$array = $_POST['abc']`将返回一个数组，其中仅包含已选中的复选框的值。

```
foreach($array as $key => $val)
{
  // do what you want to do for each checkbox that is checked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:10:26.440

处理复选框的动态数量的方法是使用 foreach。

```
foreach($_POST as $v)
{
    //echo html code
} 
```

我想你可以从这里处理它？

# android - 无法在 Android 源文件中触发断点

> ID：11758460
> 
> 赞同：3
> 
> 时间：2012-08-01T11:42:13.867
> 
> 标签：android, eclipse, debugging, android-source

我无法触发在 Android 源文件（框架源文件，而不是我的应用程序的源文件）中设置的断点。我已经附加了 Android 源文件，所以我可以看到它们并设置断点，但是当我在调试模式下运行时，这些断点不会被触发。我也尝试过添加类加载器断点：这在 Android 源类上运行良好。我正在使用 Eclipse 3.7.2，并且我尝试了几个不同的 Android SDK 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-09T16:12:43.897

强盗，

看起来你想做的是调试 Android 框架，对吧？据我了解，执行此操作的最佳方法是通过运行“make idegen && development/tools/idegen/idegen.sh”将 AOSP 项目导入 Android Studio（仅识别 Java 文件），然后打开 android.ipr它在 Android Studio 中生成的文件。然后，您可以连接您的模拟器并在 Java 代码中设置断点。

还有很多工具可以用来调试内核、C 本机代码等，但是在这个站点上要涵盖的主题太长了。如果您对更多细节感兴趣，我强烈推荐 Karim Yaghmour 的 Android 调试课程 ( [http://www.opersys.com/training/android-debug-and-performance](http://www.opersys.com/training/android-debug-and-performance) )。他还在 AnDevCon 上发表了几次关于 AOSP 和 Android Internals 的演讲，这些演讲应该可以在 Youtube 上免费获得。

最好的祝愿！

# java - SimpleCaptcha 和 wav 播放

> ID：11758462
> 
> 赞同：1
> 
> 时间：2012-08-01T11:42:18.617
> 
> 标签：java, flash, captcha, html5-audio, jplayer

我们的客户正在使用[SimpleCaptcha](http://simplecaptcha.sourceforge.net/ "简单验证码")。我的理解是 SimpleCaptcha 能够生成 WAVE 格式 (.wav) 的音频验证码。稍后这些 CAPTCHA-s 使用 HTML5 音频标签播放，如下所示：

```
<audio controls="controls" autoplay>
    <source src="captcha.wav" />
</audio> 
```

当然，这不是跨浏览器兼容的，原因之一是 WAVE 格式。此[链接](http://www.w3schools.com/html5/html5_audio.asp)表明 IE9 仅支持 MP3，而大多数其他浏览器都支持 OGG 和 WAVE。进一步的 MP3 是专利给...弗劳恩霍夫？

注意：我们的后端是基于 Java 的。

我的问题是，对于根本不支持 WAVE 格式（例如 IE9）或 HTML5 音频标签的客户，我们可能提供的最佳后备方案是什么？由于专利问题，我想在服务器端动态转换为 mp3 不是一种选择。此外，我不知道任何可以执行此操作的 java 库...我见过像[jPlayer](http://www.jplayer.org/)这样的不错的解决方案，但他们说“为了支持跨浏览器，必须提供一种在 HTML5 和 Flash 中都可以使用的格式。”，即 mp3 , mp4。我也没有找到任何可靠的基于 Flash 的 WAVE 播放器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:50:02.127

我认为@drew010 对他们的按钮的帮助很棒！谢谢你。

为了解决 SimpleCaptcha (16000Hz) 和 Flash 播放器支持的音频 (11025Hz) 之间的速率频率支持的相同问题，我使用了另一种解决方案，而不是更改 simplecaptcha 源或尝试在 Flash 编程中解决它。

我的验证码实现有一个自定义音频验证码 servlet（由 simplecaptcha 支持），所以我在[这篇文章](https://stackoverflow.com/questions/2276027/converting-the-sample-rate-on-the-fly-when-reading-a-wav-file-into-a-samples-arr)中使用了@Claude 提供的提示，使用[tritonus](http://www.tritonus.org/) lib 来转换音频采样率。这段代码如下所示：

```
 AudioFormat outDataFormat = new AudioFormat((float) 11025.0, (int) 16, (int) 1, true, false);
    AudioInputStream lowResAIS = AudioSystem.getAudioInputStream(outDataFormat, audioCapthca.getChallenge().getAudioInputStream()); 
```

我的验证码 servlet 代码如下：

```
public class AudioCaptchaServlet extends HttpServlet {

    @Override protected void doGet(HttpServletRequest req,
            HttpServletResponse resp) throws ServletException, IOException {

        Map<Integer, String[]> voicesMap = new HashMap<Integer, String[]>();
        String[] fileLocs0 = {"/captcha/pt_BR/0.wav"};
        String[] fileLocs9 = {"/captcha/pt_BR/1.wav"};
        (...)

        voicesMap.put(0, fileLocs0);
        voicesMap.put(1, fileLocs1);
        (...)

        VoiceProducer voiceProducer = new RandomNumberVoiceProducer(voicesMap);

        AudioCaptcha ac = new AudioCaptcha.Builder()
            .addAnswer()
            .addNoise()
            .addVoice(voiceProducer)
            .build();

        req.getSession().setAttribute(AudioCaptcha.NAME, ac.getAnswer());

        //Converte Sons com bitrate de 16000Hz (simplecaptcha) para 11025Hz (suportada pelo flash player)
        AudioFormat outDataFormat = new AudioFormat((float) 11025.0, (int) 16, (int) 1, true, false);
        AudioInputStream lowResAIS = AudioSystem.getAudioInputStream(outDataFormat, ac.getChallenge().getAudioInputStream());

        CaptchaServletUtil.writeAudio(resp, new Sample(lowResAIS));
    }

    @Override protected void doPost(HttpServletRequest req,
            HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:28:08.957

在社区其他人的帮助下，我创建了一个 Flash 按钮，可以将 WAV 文件从服务器流式传输到客户端。它与 Securimage PHP Captcha 一起分发，用于将音频验证码流式传输到客户端。

您可以简单地点击这个 Flash 按钮，或者下载并修改 Flash[源代码](https://github.com/dapphp/securimage/tree/securimage_flash)，以基于相同的代码创建您自己的自定义源代码。

当 HTML5 音频不可用时，您可以将其用作后备。

示例用法是：

```
<object type="application/x-shockwave-flash"
        data="securimage_play.swf?audio_file=/PATH/TO/AUDIO.wav"
        width="32" height="32">
    <param name="movie" value="securimage_play.swf?audio_file=/PATH/TO/AUDIO.wav" />
</object> 
```

您可以将这些附加选项传递给`securimage_play.swf`：

*   `bgcol`: Flash 按钮的背景颜色
*   `icon_file`: 一个 png 图像的 URL，显示为 Flash 按钮上的图标

在旁注中，我确实发现微软决定在`<audio>`标签中不支持 WAV 音频很奇怪，特别是因为他们与 IBM 一起开创了 WAV 格式。是的，WAV 文件比它们支持的其他压缩音频格式要大，但带宽也在增加，到了无所谓的程度。

希望有帮助。如果您尝试实施它并有任何问题，请告诉我。[您可以在此处](http://phpcaptcha.org/try-securimage)查看音频流的演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T10:16:55.993

如果有人还在寻找它。这是我的代码。它适用于我的所有浏览器。

```
<audio controls id="audioCaptcha">
    <source src="audio.wav" type='audio/wav' height="50px" width="100px"/>
    <embed src="audio.wav" type='audio/wav' autoplay="false" height="50px" width="100px"/>
</audio> 
```

# php - 如何在 preg_split() 的结果中包含拆分分隔符？

> ID：11758465
> 
> 赞同：26
> 
> 时间：2012-08-01T11:42:27.997
> 
> 标签：php, preg-split

我有一个简单的模式，将文本分成句点：

```
$text = preg_split("/[\.:!\?]+/", $text); 
```

但我想在数组项目的末尾包含`. :`或。`!`

也就是说，现在为“good:news.everyone！” 我有：

```
array("good", "news", "everyone", ""); 
```

但我想要：

```
array("good:", "news.", "everyone!", ""); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-01T11:59:58.390

干得好：

```
preg_split('/([^.:!?]+[.:!?]+)/', 'good:news.everyone!', -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY); 
```

工作原理：该模式实际上将所有内容都变成了分隔符。然后，要将这些分隔符包含在数组中，您可以使用`PREG_SPLIT_DELIM_CAPTURE`常量。这将返回一个数组，如：

```
array (
    0 => '',
    1 => 'good:',
    2 => '',
    3 => 'news.',
    4 => '',
    5 => 'everyone!',
    6 => '',
); 
```

要摆脱空值，请使用`PREG_SPLIT_NO_EMPTY`. 要组合两个或多个这些常量，我们使用按位运算`|`符。结果：

```
array (
    0 => 'good:',
    1 => 'news.',
    2 => 'everyone!'
); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-05T17:21:49.663

`PREG_SPLIT_DELIM_CAPTURE`如果您在模式中使用[积极](http://www.regular-expressions.info/lookaround.html#lookbehind)的后视，则没有用。该函数将保留分隔符。

```
$text = preg_split('/(?<=[.:!?])/', 'good:news.everyone!', 0, PREG_SPLIT_NO_EMPTY); 
```

如果您使用`lookbehind`，它将只查找字符而不匹配它。因此，在 的情况下`preg_split()`，该函数不会丢弃该字符。

**没有** `PREG_SPLIT_NO_EMPTY`标志的结果：

```
array (
    0 => 'good:',
    1 => 'news.',
    2 => 'everyone!',
    3 => ''
); 
```

**带有** `PREG_SPLIT_NO_EMPTY`标志的结果：

```
array (
    0 => 'good:',
    1 => 'news.',
    2 => 'everyone!'
); 
```

您可以使用这个[PHP Online Function Tester](http://php.fnlist.com/regexp/preg_split)对其进行测试。

# c# - jQuery DatePicker 未使用 MVC3 C# 显示

> ID：11758466
> 
> 赞同：1
> 
> 时间：2012-08-01T11:42:42.710
> 
> 标签：c#, jquery, datepicker

[编辑：现在工作。刚刚将 EditorFor 更改为 TextBox]

我刚开始使用 C# 中的 MVC3。我偶然发现了这个问题。

我已经按照一些教程将 datepicker 功能添加到 MVC3 项目，但是 datepicker 没有显示在我的 web 项目中。这是我所拥有的：

在我的 _Layout.chtml 文件中，我包含了所需的 jQuery 依赖文件：

```
<link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" 
    rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" 
    rel="stylesheet"  type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" 
    rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery.ui.core.min.js")" 
    type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js")" 
    type="text/javascript"></script> 
```

这就是我的观点：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Student</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.FullName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FullName)
        @Html.ValidationMessageFor(model => model.FullName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.DOB)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DOB, new { @class = "date" })
        @Html.ValidationMessageFor(model => model.DOB)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

在视图内的同一个文件中，我将脚本用于将日期选择器挂接到顶部的编辑器中：

```
<script type="text/javascript">
$(document).ready(function () {
    $('.date').datepicker();
}); 
```

许多教程建议为此使用 EditorTemplate，但我认为没有必要。我错过了什么？感谢所有帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:47:22.457

我不相信您可以使用 EditorFor 并通过课程。相反，请尝试：

```
<div class="editor-field">
    @Html.TextBoxFor(model => model.DOB, new { @class = "date" })
    @Html.ValidationMessageFor(model => model.DOB)
</div> 
```

TextBoxFor 将接受 HTML 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:16:51.873

**@Html.TextBoxFor()**第二个参数是**对象 htmlAttributes**
**@Html.EditorFor()**第二个参数是**对象additionalViewData**

所以**新的 { @class = "date" }**对 @Html.TextBoxFor() 没有预期的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:53:40.150

这是一个简单的工作演示，阅读[此](http://docs.jquery.com/UI/Datepicker#option-dateFormat)

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script>
  $(document).ready(function() {
    $("#datepicker").datepicker();
  });
  </script>
</head>
<body style="font-size:62.5%;">

<div id="datepicker"></div>

</body>
</html> 
```

# php - 我可以通过 php POST 获取对象的属性吗？

> ID：11758467
> 
> 赞同：1
> 
> 时间：2012-08-01T11:42:46.573
> 
> 标签：php, post, properties

我在一个 php 页面中有一个表单，里面有很多文本输入，每个都有一个预设值。当有人通过 POST 提交页面时，我想知道其中哪些已更改，所以我想我可以在有人输入文本输入时设置文本的属性（如背景颜色）。

提交后，如何获取输入的属性以查看它们是否已更改？$_POST['name_of_text_input'] 只返回输入的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:46:32.040

您看不到它们是否已像那样简单地更改。

PHP 在服务器上运行，一旦数据发送给用户，就 PHP 而言，这就是它的结束。`session`除非您明确告诉它记住（通过数据库中的一个或一些数据），否则它不会记住任何其他内容。

您必须执行以下操作之一：

*   有第二个隐藏变量由 javascript 更改，显示“已更改”或您比较的一些类似的东西。
*   在 PHP 代码中加载初始值并与它们进行比较以查看它们是否已更改
*   如果这些值是预设的，您可以在 PHP 代码中手动检查发布的值与预设值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:52:28.953

一个简单的解决方案是为您的条目创建隐藏字段并在之后进行比较：

```
<form>
    <!-- old values -->
    <input type="hidden" name="old_name" value="<?=$name;?>" />
    <input type="hidden" name="old_surname" value="<?=$surname;?>" />
    <!-- current values -->
    <input type="text" name="name" value="<?=$name;?>" />
    <input type="text" name="surname" value="<?=$surname;?>" />
</form> 
```

现在，提交后，您可以进行比较`old_name`，`name`看看它们是否不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:46:33.707

您可以为每个文本输入添加隐藏字段，并使用 javascript 在这些隐藏字段中设置一个值（输入的更改事件）。

如果您使用 html5，您也许可以使用占位符

```
<input type="text" placeholder="default value"> 
```

在 PHP 中，您应该检查是否没有输入任何值，则应采用默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:52:30.620

任何时候你`FORM`在 HTML 中都有 a，a`POST (HTML)`所做的就是将它发送到你的`.php`服务器端`POST`数组，所有变量都带有`name`. 因此，您可以访问它们`$_POST['name_of_the_input']`

例如：

```
 <html>
    <body>

    <form action="welcome.php" method="post">
       Name: <input type="text" name="fname" />
       Age: <input type="text" name="age" />
       <input type="submit" />
    </form>

    </body>

</html> 
```

可以访问`PHP`为：

```
<?php 

echo $_POST["fname"];
echo $_POST["age"]; 

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:47:37.410

无法使用 $_POST 获取输入属性。但是您可以使用 javascript 代码来记住初始输入的状态并仅发送更改的字段。

# python - Django将图像插入内容

> ID：11758471
> 
> 赞同：2
> 
> 时间：2012-08-01T11:43:02.803
> 
> 标签：python, django, tinymce

我正在寻找一种将图像插入到 Django 中的 TextField 内容中的方法，该方法在管理员端和用户端（非管理员）都可以使用。我正在寻找一个简单的“浏览”功能来插入来自用户本地驱动器的图像。

我正在使用 TinyMCE 输入内容，但是我发现通过“浏览”上传图像的所有插件都有某种形式的 PHP 脚本。我正在寻找非 PHP 解决方案，因为我仅限于在 Web 环境中使用 Python 和 Django。

感谢提供的任何指针或参考。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:02:46.240

通过编辑 TinyMce 的配置，您可以像编辑内容一样上传图片

```
tinyMCE.init({
             #add
              theme_advanced_buttons1: "image" 
```

在**函数 initMCE()**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:20:39.367

您可能还想尝试一下[https://github.com/TigorC/django-redactorjs](https://github.com/TigorC/django-redactorjs)：它不是基于 tinymce，但 redactorjs 也不错（在我看来更干净，但我相信有些人更喜欢tinyMCE），它内置了图像上传器。

# c - 从同一编译单元覆盖 C 中的函数调用

> ID：11758475
> 
> 赞同：6
> 
> 时间：2012-08-01T11:43:13.443
> 
> 标签：c, function, gcc, linker, overriding

我正在尝试[覆盖 C 中的函数调用](https://stackoverflow.com/questions/617554/override-a-function-call-in-c)，但是当在同一编译单元中使用该函数时我遇到了问题。在下面的代码中，我试图替换函数 get_resolution()，但只有在 test.c 中完成而不是从 display.c 中才能实现它

```
// display.c -------------------------------------------------------------

#include <stdio.h>

void get_resolution()
{
    printf("Original get_resolution\n");
}

void display()
{
    get_resolution();
}

// test.c ----------------------------------------------------------------

#include <stdio.h>

void __wrap_get_resolution()
{
    printf("Mock get_resolution\n");
    // __real_get_resolution(); // Should be possible to call original
}

int main()
{
    display();         // **ISSUE** Original get_resolution() is called
    get_resolution();  // __wrap_get_resolution() is called
    return 0;
}

// gcc -Wl,--wrap,get_resolution display.c test.c 
```

我的要求是，当我从 main() 调用 display() 时，我希望 __wrap_get_resolution() 被执行，但我总是看到原始的 get_resolution() 正在被调用。对反汇编的一点分析表明，函数 get_resolution 的调用方式不同：

**在 display() -> get_resolution() 的地址已经解析**

```
00000000 <_get_resolution>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 18                sub    $0x18,%esp
   6:   c7 04 24 00 00 00 00    movl   $0x0,(%esp)
   d:   e8 00 00 00 00          call   12 <_get_resolution+0x12>
  12:   c9                      leave  
  13:   c3                      ret    

00000014 <_display>:
  14:   55                      push   %ebp
  15:   89 e5                   mov    %esp,%ebp
  17:   83 ec 08                sub    $0x8,%esp
  1a:   e8 e1 ff ff ff          call   0 <_get_resolution>
  1f:   c9                      leave  
  20:   c3                      ret    
  21:   90                      nop
  22:   90                      nop
  23:   90                      nop 
```

**在 main() -> get_resolution 的地址还没有解析**

```
00000000 <___wrap_get_resolution>:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 18                sub    $0x18,%esp
   6:   c7 04 24 00 00 00 00    movl   $0x0,(%esp)
   d:   e8 00 00 00 00          call   12 <___wrap_get_resolution+0x12>
  12:   c9                      leave  
  13:   c3                      ret    

00000014 <_main>:
  14:   55                      push   %ebp
  15:   89 e5                   mov    %esp,%ebp
  17:   83 e4 f0                and    $0xfffffff0,%esp
  1a:   e8 00 00 00 00          call   1f <_main+0xb>
  1f:   e8 00 00 00 00          call   24 <_main+0x10>
  24:   e8 00 00 00 00          call   29 <_main+0x15>
  29:   b8 00 00 00 00          mov    $0x0,%eax
  2e:   c9                      leave  
  2f:   c3                      ret 
```

现在的问题是，如何防止编译器解析函数 display() 中使用的 get_resolution() 的地址，而是使用重定位表，以便在链接阶段可以覆盖 get_resolution() 函数？

**编辑**：

1.  根据 hroptatyr 的回复，添加`void get_resolution() __attribute__((weak));`解决了使用 mingw-gcc 时的问题，但在我的目标平台 QNX/ARM/gcc(4.4.2) 中没有
2.  如果有人可以指向一个支持 ARM 目标的好库，那么即使是像函数挂钩这样的运行时方法也是可以接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:03:07.387

只需为此使用预处理器：

```
void __wrap_get_resolution()
{
    /* calling the real one here */
    get_resolution();
}

#define get_resolution   __wrap_get_resolution

int main()
{
    /* the __wrap... gets called */
    get_resolution();
    ...
} 
```

这个想法是在您放置所有需要查看原始函数的代码**之后**“重命名”对您的包装函数的函数调用。

更脏的版本可能是在本地隐藏函数地址，如下所示：

```
int main()
{
    void(*get_resolution)() = __wrap_get_resolution;
    get_resolution();
    ...
} 
```

这个可以工作，但会给你一些讨厌的警告。

**编辑**
即使在评论中指出`display.c`不需要更改，这里的`weak`属性解决方案，来自[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

> ELF 目标支持弱符号，使用 GNU 汇编器和链接器时也支持 a.out 目标。

```
/* in display.c */
void __real_get_resolution()
{
    ...
}
void get_resolution() __attribute__((weak, alias("__real_get_resolution")));

/* in test.c */
void get_resolution()
{
    /* this version will take precedence over get_resolution() in display.c */
    ...
    /* lastly call the real thing */
    __real_get_resolution();
} 
```

从现在开始，无论您在哪里调用`get_resolution()`（*并*在其中编译“强”版本），都会调用包装版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:01:40.453

如果你这样做怎么办：

gcc -Wl,--wrap,get_resolution test.c display.c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:20:12.937

如果在汇编文件中定义了符号，汇编器将始终直接调用它们；没有办法用 GNU 来改变这一点`as`（据我所知）。这是假设编译器尚未决定内联函数调用！

解决方案是导致`get_resolution`在`display.c`. 为此，我建议将其拆分为 2 个文件，一个包含`get_resolution`源文件的其余部分，一个包含源文件的其余部分。您可以在不实际拆分文件的情况下执行此操作，方法是放入`#ifdef`块并使用不同的定义对其进行两次编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T13:26:38.983

我认为除了使用shell代码之外很难实现。你可以看到[这个](https://stackoverflow.com/questions/2766022/linking-libraries-with-duplicate-class-names-using-gcc "这个")原因。

作者给了我们一个C++代码的例子，我用类似的方法尝试过你的问题，我没有达到你想要的。所以我认为解决它的唯一方法可能是使用shell代码，但是linux的ASLR做到了hard.这是我所知道的，希望它可以帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:54:51.427

此处可能提供了答案： [Override a function call in C](https://stackoverflow.com/questions/617554/override-a-function-call-in-c)

如果您想覆盖库中的函数，您可以使用 (unser linux) `LD_PRELOAD`。

希望这有帮助。

问候。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T14:04:13.997

gcc 执行的“包装”功能是在链接器阶段完成的，而不是由编译器完成的。编译器知道 get_resolution 在哪里，因为它在同一个编译单元中，所以不需要链接器来解析它（这就是魔法发生的地方）。

我看不到您可以在不以某种方式更改 display.c （或其中一个包含的头文件）的情况下解决此问题。最简单的方法是将 get_resolution 放入它自己的 C 源文件中，与 display.c 分开。

# java - 如何在 Eclipse RCP 应用程序中设置首选项的默认值

> ID：11758480
> 
> 赞同：5
> 
> 时间：2012-08-01T11:43:26.780
> 
> 标签：java, eclipse-plugin, eclipse-rcp

我有一个 RCP 应用程序，当 RCP 作为应用程序运行时，我需要在首选项页面中将一些值设置为默认值。我需要从某个视角隐藏快速视图栏和一些菜单，这就是为什么我需要从首选项页面设置这些设置的原因。

我的应用程序还不是产品，所以我不能使用 plugin_customization.ini 文件来更改它。

谁能告诉我一种通过首选项页面或任何其他方式以编程方式更改默认值的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T15:05:41.613

**为您的偏好页面**定义扩展点，以及该页面的**初始化程序**类：

一个示例首选项页面实现可能如下所示：

```
public class MyPreferencePage extends FieldEditorPreferencePage implements IWorkbenchPreferencePage {
    public static final String PREF_USE_METRIC_UNITS = "PREF_USE_METRIC_UNITS";
    public static final String PREF_AUTO_UPDATE = "PREF_AUTO_UPDATE";
    public static final String PREF_USER_FILES_DIR = "PREF_USER_FILES_DIR";
    public static final String PREF_FAVORITE_ANIMAL = "PREF_FAVORITE_ANIMAL";

    public MyPreferencePage() {
        super(GRID);
    }

    public void createFieldEditors() {
        Composite parent = getFieldEditorParent();
        addField(new BooleanFieldEditor(PREF_USE_METRIC_UNITS, "Use &metric units", parent));
        addField(new BooleanFieldEditor(PREF_AUTO_UPDATE, "&Auto update", parent));

        addField(new DirectoryFieldEditor(PREF_USER_FILES_DIR, "User files &path:", parent));

        addField(new StringFieldEditor(PREF_FAVORITE_ANIMAL, "Favorite &animal:", parent));
    }

    public void init(IWorkbench workbench) {
        setPreferenceStore(Plugin.getPlugin().getPreferenceStore());
    }
} 
```

然后在 AbstractPreferenceInitializer 类中设置实际的默认值：

```
public class MyPreferenceInitializer extends AbstractPreferenceInitializer {
    @Override
    public void initializeDefaultPreferences() {
        IPreferenceStore store = Plugin.getPlugin().getPreferenceStore();

        store.setDefault(MyPreferencePage.PREF_USE_METRIC_UNITS, true);
        store.setDefault(MyPreferencePage.PREF_AUTO_UPDATE, false);

        String userHome = System.getProperty("user.home");
        String defaultPath = userHome + "\\Local Settings\\Temp\\";
        store.setDefault(MyPreferencePage.PREF_USER_FILES_DIR, defaultPath);

        store.setDefault(MyPreferencePage.PREF_FAVORITE_ANIMAL, "platypus");
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T12:42:00.097

您可以使用扩展点`org.eclipse.core.runtime.preferences`

```
 <extension
         point="org.eclipse.core.runtime.preferences">
         <scope name="SamplePreferencePage" class="com.example.SamlePreferencePage"/>
      <initializer
            class="com.example.PreferenceInitializer">
      </initializer>
  </extension> 
```

# c# - 使用 GCM 推送通知的请求超时，前 2 -3 次间歇工作。但是失败了很多次

> ID：11758486
> 
> 赞同：2
> 
> 时间：2012-08-01T11:43:51.273
> 
> 标签：c#, android, asp.net, google-cloud-messaging

我使用 GCM 创建了一个适用于 Android 的推送通知。
该服务面临许多超时，并且间歇性地工作。我有一个 Windows 服务，它在任意时间（在这种情况下为 30 秒）运行并检查 Message Queue ，如果存在任何消息，它会将其发送到相应的设备。
模式是：
它工作前两次三次，如果一次失败，它开始连续失败。

失败的原因可能是什么？

**编辑** 我认为这可能是由于组织的防火墙而发生的，但由于我在开放网络上尝试过，这也可以被推翻。 *任何输入任何思路都会有所帮助。* ***提前致谢***

代码 ：

```
private void SendAndroidMessage(string deviceID,string Message ,DeviceDataModel ddm)
        {

         StringBuilder postMsgBuilder = new StringBuilder();
            postMsgBuilder.Append("registration_id=").Append(deviceID);
            //postMsgBuilder.Append("&").Append("delay_while_idle=").Append("false");
            postMsgBuilder.Append("&").Append("data.message=").Append(Message);

            byte[] messageBytes = Encoding.UTF8.GetBytes(postMsgBuilder.ToString());

            var request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");

            // Hook a callback to verify the remote certificate
            ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(C2dmCertValidationCallback);
            request.Method = WebRequestMethods.Http.Post;
            request.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
            request.ContentLength = messageBytes.Length;
            request.Headers.Add(HttpRequestHeader.Authorization, "key=" + AuthorisationKey);

            bool sent = false;
            int tries = 0;
            HttpWebResponse response;
            while (!sent && tries < this.numOfRetries)
            {
                try
                {
                    using (var requestStream = request.GetRequestStream())
                    {
                        // we are not using retries yet.. or looking for errors here. We should log errors too.
                        requestStream.Write(messageBytes, 0, messageBytes.Length);
                    }

                    // Sends the notification and gets the response.
                    response = (HttpWebResponse)request.GetResponse();
                    if (response.StatusCode == HttpStatusCode.NotFound)
                    {
                        return;
                    }

                    if (response.StatusCode != HttpStatusCode.OK)
                    {
                        tries++;
                        if (tries > this.numOfRetries)
                        {
                            if (this.NotificationFailed != null)
                            {
                                this.NotificationFailed(this, new NotificationEventArgs(new NotificationException(string.Format(CultureInfo.InvariantCulture, "{0} notification failures for {1} for DeviceId:{2} of DeviceType:{3}. Giving up", this.numOfRetries, C2dmUrlStr,ddm.DeviceId,ddm.DeviceType))));
                            }

                            return;
                        }
                    }
                    else
                    {
                        sent = true;
                    }
                }
                catch (WebException e)
                {
                    // check why we got the exception 
                    string responseString = "";
                    if (e.Response != null)
                    {
                        StreamReader reader = new StreamReader(e.Response.GetResponseStream());
                       responseString= reader.ReadToEnd();
                    }
                    if (this.NotificationFailed != null)
                    {
                        this.NotificationFailed(this, new NotificationEventArgs(new NotificationException("Notification failed with exception " + e.Message + "for " + "https://android.googleapis.com/gcm/send"+" DeviceId: "+ddm.DeviceId+" Device Type: "+ddm.DeviceType+"Response String : "+ responseString, e)));
                    }

                    throw;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T06:55:41.217

我曾经也遇到过类似的问题，奇怪的是，这是因为我在读取响应流后没有关闭它。在您`response.Close();`使用`response`. 我希望它也适合你。

# java - 如何在将记录插入数据库表Java之前检查非空字段

> ID：11758488
> 
> 赞同：1
> 
> 时间：2012-08-01T11:44:00.200
> 
> 标签：java, jdbc

我必须仅通过插入主键字段值来在数据库表（MySQL、Oracle、MSSQL）中创建/插入新记录。但是，如果表中有不允许空值的列，这将不起作用。如何检查不允许空值的表列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:52:06.767

您可以对表执行请求，例如在启动时，然后检查表的元数据：

```
ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM myTable");
ResultSetMetaData rsmd = rs.getMetaData();
int nullable = rsmd.isNullable(1);
if(nullable == ResultSetMetadata.columnNullable) {
    System.out.println("Nullable");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:45:55.820

查看[DatabaseMetadata](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html)对象，尤其是[getAttributes()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html#getAttributes%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法。

> NULLABLE int => 是否允许 NULL
> 
> ```
> attributeNoNulls - might not allow NULL values
> attributeNullable - definitely allows NULL values
> attributeNullableUnknown - nullability unknown 
> ```

我确实认为（但是）您的应用程序应该尽可能多地了解。数据约束。数据库通过这些约束来保护自己，但应用程序应该（在可能的情况下）知道并尊重这些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:48:45.253

看起来这应该可以工作： [ResultSetMetaData.isNullable](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html#isNullable%28int%29)

```
public int isNullable(int column)
           throws SQLException

Indicates the nullability of values in the designated column.

Parameters:
    column - the first column is 1, the second is 2, ... 
Returns:
    the nullability status of the given column; one of columnNoNulls, columnNullableor columnNullableUnknown 
Throws:
    SQLException - if a database access error occurs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:51:56.337

*如果我说得对，那么您正在寻找一种方法来测试程序中的表（我假设不是手动）...*
像这样测试每个表：
步骤 1：尝试将具有空值的记录插入到表中。
第 2 步：如果出现异常，则捕获它并对其他表进行这些步骤。

您可以标记这些表或有一个包含表名称的列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:58:34.540

您也可以检查 ResultSetMetaData。[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSetMetaData.html)

```
ResultSetMetaData.columnNullable
ResultSetMetaData.columnNoNulls
ResultSetMetaData.columnNullableUnknown 
```

问候

# javascript - 如何正确实现 Jquery Mobile Router 插件

> ID：11758491
> 
> 赞同：2
> 
> 时间：2012-08-01T11:44:17.870
> 
> 标签：javascript, jquery, jquery-mobile, routes

我已经愉快地使用 JQM 有一段时间了。然而，我最近开始了一个新项目，该项目需要将动态创建的页面推送到历史记录中，其内容由 url 参数确定。我将向您展示我最初是如何使用 JQM 处理控制器的，以及我是如何尝试使用路由器插件的。

这就是我过去为 JQM 编写所有控制器的方式：

```
myApp.foo.controller = (function($){

    "use strict";

    var $page;

    var init = function()
    {
        $page = $("#foo-page");
        applyBindings();
    };

    var applyBindings = function()
    {       
        // Page transition events
        $page.bind("pagebeforeshow", onPageBeforeShow);
    };

    var onPageBeforeShow = function()
    {

    };

     return  {
        init: init
     }

})(jQuery);

$("#foo-page").live("pageinit", function(e)
{
    myApp.foo.controller.init();
}); 
```

所以我现在使用的是[JQM 推荐的路由插件](https://github.com/azicchetti/jquerymobile-router)。我没有使用脊椎或脊椎。我不想把它误认为是应用程序的基础。所以我加载了我所有的控制器，然后加载了我的 router.js 文件。

这给了我我期望的行为：

```
 var router = new $.mobile.Router([
        {"#foo-page": {events:"i", handler: myApp.foo.controller.init}},
        {"#foo-page": {events:"s", handler: myApp.foo.controller.onPageShow}},          

        {"#dynamic-foo(?:[?/](.*))?": {events:"i", handler: myApp.dynamicFoo.controller.init}},
        {"#dynamic-foo(?:[?/](.*))?": {events:"bs", handler: myApp.dynamicFoo.controller.onPageBeforeShow}},
    ]); 
```

但这是使用路由器插件的正确方法吗？因为我阅读了文档，作者似乎使用路由器对象作为实际控制器。

需要明确的是，这对我有用我只是不确定这是否真的是路由的想法，或者这可能是错误的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:01:23.420

不用担心，使用路由器没有“正确的方法”，您的方法是正确的。

做同样事情的另一种方法是：

```
var router = new $.mobile.Router([
    {"#foo-page": {events:"i", handler: "init"}},
    etc
],myApp.foo.controller); 
```

这只是口味问题。

# java - 在设备上运行黑莓应用程序“尝试访问安全 api”

> ID：11758492
> 
> 赞同：0
> 
> 时间：2012-08-01T11:44:27.597
> 
> 标签：java, eclipse, blackberry

我是黑莓开发的新手，需要一些关于将应用程序分发到设备的指导。这些是我已采取的步骤以及我遇到问题的地方：

*   我在 Eclipse 中构建我的应用程序
*   在顶部菜单中，我转到“黑莓”>“签名”>“使用签名工具签名”
*   当签名工具弹出点击'添加'选择构建中的cod文件
*   单击“请求”，然后在我的 cod 文件旁边看到绿色“已签名”，签名为 RBB
*   然后我使用 cmd 使用 C:\Java>JavaLoader.exe -u load myapp.cod 上传我的应用程序
*   该应用程序显示在手机上，但在我点击它后，我收到一个错误“尝试访问安全 API”

我怀疑我应该针对我的 RCR 和 RRT 应用程序“签名”。我必须怎么做才能让这个说签名？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:58:36.927

首先在 Eclipse 上安装三个代码签名密钥。用于 Eclipse 用户的 BlackBerry JDE 插件：

```
Save all 3 .csi files in the same directory (each one will be sent in a separate email message).
Start Eclipse.
Click on the BlackBerry menu and choose Install Signature Keys.
Select one of the 3 .csi files saved in step 1 and click Open.
Click "Yes" to create a new key pair file.
Type a password for your private key of at least 8 characters, and type it again to confirm. This is your private key password, which protects your private key. Please remember this password as you will be prompted for it each time signing is attempted or a signature key is installed.
Move your mouse to generate date for a new private key.
In the Registration PIN" field, type the PIN number that you supplied on the signature key order form.
In the Private Key password field, type the password created in step 6.
Click Register .
Click Exit .
Repeat this process for the other csi files. 
```

然后右键单击您的 Project -> **Blackberry** -> **Sign with Signature Tool**，然后它会提示输入密码。提供密码后，它将签署所有必要的文件。完成签名后，它将在 Eclipse 控制台中显示您签名的 Cod 文件的位置。

# ios - 推送通知不会发送到某些设备

> ID：11758496
> 
> 赞同：4
> 
> 时间：2012-08-01T11:45:04.180
> 
> 标签：ios, apple-push-notifications

我的推送通知服务有一个非常奇怪的行为。我正在 20 台设备上测试一个新应用程序，但我有 3 台设备没有收到任何推送通知。

我在这里有自己的服务器来管理推送订阅，在这项服务中我有这些设备的令牌。但奇怪的是，我使用相同的服务向我构建的其他应用程序发送推送通知，并且它工作得非常好。

而且我还可以向您保证，这些设备已启用此应用程序的推送通知设置。

我不知道问题可能是什么。

我已经为这些应用程序生成了一个新的推送证书，我将调试放在我的服务器中以确保推送通知成功发送到苹果。但是，如果同一个应用程序在其他设备上收到推送通知，为什么它不适用于这些特定设备。

欢迎每一个想法。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T20:11:00.130

由于您具体了解这三种设备，这听起来有点奇怪，而 Bogdan Andresyuk 重置这些设备的想法是有道理的。

我过去曾遇到过一些推送通知未发送的问题。请问您是否按顺序发送通知，即这三个设备是您尝试发送通知的最后三个设备吗？或者您可以构建一个序列或某种模式。假设您有 10 台设备，其中 3 台没有收到通知，通知按顺序发送，设备 3、6 和 9 没有收到消息。

如果有这样的事情，那么很可能是您的推送通知被 Apple 拒绝了。也许是因为您连续多次打开和关闭到 APNS 的套接字。Apple 不喜欢这样，并且更喜欢您保持打开套接字的原因发送通知。

如果没有，那么也许您可以提供有关设备和事件顺序以及如何设置推送服务的更多详细信息。我用城市飞艇为你照顾插座等，你可以免费发送100万。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:42:29.890

与您的评论类似，我们将开发代币与生产代币混合在一起。在将第一个通知发送到开发令牌后，所有后续通知都失败了（并且默默地，除非我错过了明显的东西）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:57:26.090

[您可以在 Apple 的故障排除推送通知](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)中查看几点。

我会从**Registration Succeeded But No Notifications Received**开始阅读，您可能会得到一些线索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:52:52.243

尝试执行设置 -> 常规 -> 重置 -> 重置网络设置
然后为您的应用程序重新启用（打开/关闭）通知服务。
也许尝试重新启动设备

# php - 检测正在处理特定请求的 URL

> ID：11758497
> 
> 赞同：0
> 
> 时间：2012-08-01T11:45:05.893
> 
> 标签：php, wordpress, mod-rewrite, web

我有一个在 URL 上处理的 POST 请求，但`http://<mysite>/login`我没有服务器端脚本“登录”。我的网络服务器使用 wordpress，翻译可能是 mod_rewrite。有没有办法让我知道哪个服务器端脚本处理我发送到登录的参数。

# c++ - 从速度值中滤除噪声和变化

> ID：11758498
> 
> 赞同：4
> 
> 时间：2012-08-01T11:45:11.307
> 
> 标签：c++, algorithm, math

我有一个应用程序连续接收速度值 (m/s)。这些值会产生一些噪音和变化。这个速度一直在变化，但有一些真正的变化值得注意。例如，当速度值显着下降时，可能会出现转弯。

现在我正在使用`average`最后一个 X 值，其中 X 通常是 5-15 之间的数字。我在 excel 中绘制这些值以查看与原始数据的差异。这工作得很好，但`lower`历史价值是，`less`我的曲线变得平滑。历史`higher`值，`smoother`我的曲线得到，但它也会对后期变化做出反应并忽略其中一些。

我还尝试加权平均计算中的最后一个值。结果是一条仍然有很多噪音的曲线，但比原始数据少一点。

我正在寻找的是一种更复杂的方法来过滤掉噪音，它可以给我提供接近原始数据的值，但也忽略了小的变化和噪音。

那可能是什么方法，或者我可以对现有设置做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:52:03.977

为此，[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)正是您所需要的。这是一个实现它的免费库：http: [//kalman.sourceforge.net/](http://kalman.sourceforge.net/)

另一方面，卡尔曼很难理解，需要进行一些研究才能正确使用它（而且实施起来**非常**困难）。根据[这个答案](https://stackoverflow.com/questions/1586658/combine-gyroscope-and-accelerometer-data/1590385#1590385)，您可能会发现互补过滤器更容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-30T14:52:11.600

与许多人所说的相反，在这种情况下，一个简单的卡尔曼滤波器完全不难实现。事实上，卡尔曼滤波器最简单的特殊情况是[指数滤波器](http://en.wikipedia.org/wiki/Exponential_smoothing)，在您的 C++ 代码中将是：

```
filtered_speed+=0.02 * (speed_measurement - filtered_speed); 
```

0.02 是一个调谐常数，其最佳值取决于您的测量噪声有多大以及您期望**实际**速度变化的速度有多快。这也相当于一个简单的[IIR 滤波器](http://en.wikipedia.org/wiki/Infinite_impulse_response)。

但这对你没有多大帮助。卡尔曼滤波器并不神奇，它**不会**产生比移动平均线更好的结果，**除非你给它更多的信息来处理**（这会使上面的公式更复杂）。您可以使用以下信息：

*   **多个传感器**：您也可以从其他来源推断速度吗？然后您可以使用卡尔曼滤波器组合这两个测量值
*   **变化的传感器噪声**：速度测量噪声通常是相同的，还是变化的（例如，测量值在高速和低速时一样嘈杂）。如果它在变化，并且您可以估计每个测量的噪声，那么您可以在卡尔曼滤波器中使用该信息
*   **变化的过程噪音**：您是否从其他来源知道此时速度应该快速变化还是缓慢变化？也可以使用该信息
*   **控制输入**​​：例如，如果您正在测量汽车的速度，并且您还有来自油门踏板或制动器的数据，那么卡尔曼滤波器也可以使用它

正是这些东西使卡尔曼滤波器比简单的移动平均线更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:54:44.870

均值是一个非常简单的低通频率滤波器。也许您可以尝试其他一些，例如[Chebysheb](http://en.wikipedia.org/wiki/Chebyshev_filter)或[Butterworth](http://en.wikipedia.org/wiki/Butterworth_filter)：

但之前要过滤噪声，您必须知道信号的截止频率。然后根据该截止频率和您的滤波器延迟，您可以为您的目的使用更好的滤波器。

如果您有一个干净的信号可以比较，您也可以使用 Wiener 过滤器： [http ://en.wikipedia.org/wiki/Wiener_filter](http://en.wikipedia.org/wiki/Wiener_filter)

# javascript - JavaScript 搜索算法

> ID：11758500
> 
> 赞同：2
> 
> 时间：2012-08-01T11:45:21.630
> 
> 标签：javascript, regex, algorithm, search

我正在为我的一个项目使用 JavaScript 开发客户端搜索系统，并且在让搜索功能按照人们期望的搜索功能运行时遇到了特别的麻烦。

目前，搜索词在数组中排序`q`并循环`for`循环（`q[i]`当前正在处理的词也是如此），选择它们所属的单词，并且彼此之间也没有任何影响。

这些导致两个问题。

1.  对于第一个问题，搜索*intro*会返回一篇*Introduction*文章，如您所料，但类似地搜索*con*会返回一篇关于*Conditions*的文章，这并不是真正有用的功能。

2.  第二个更严重的问题是搜索词不会相互影响，因此搜索 会`introduction is important for comedians to setup their jokes`返回“介绍”和“设置”文章，因为这些词在查询中。

循环遍历每个搜索词（在循环每篇文章的循环内）并确定结果优先级的代码片段如下：

```
rq = new RegExp(q[i], 'gim');
eq = new RegExp("\\b" + escape(q[i]) + "\\b", 'gi');

if (rq.test(title) || rq.test(keywords)) {
    match = true;
    if (title.match(rq) != null) {
        if (title.match(eq) != null) {
            priority += (title.match(eq).length * 5)
        }
        priority += (title.match(rq).length); // Is this wise?
    }
    if (keywords.match(rq) != null) {
        if (keywords.match(eq) != null) {
            priority += (keywords.match(eq).length * 3);
        }
        priority += (keywords.match(rq).length); // Is this wise?
    }
} 
```

这些行为在算法决策中是不可避免的，但是我根本想不出更好的方法来做到这一点（而且显然有更好的方法）。也许我只是想多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:23:56.300

几点观察：

(1) “搜索*intro*会返回一篇*Introduction*文章，正如您所料，但类似地搜索*cond*会返回一篇关于*Conditions*的文章，这可能不是用户正在寻找的内容。” 我不明白这里的区别。看起来像匹配前缀的两种情况。此外，后缀/中缀*离子*将与*Introduction*和*Conditions*匹配，至少与您的`rq`正则表达式匹配。

(2)`.match()`这里返回一个匹配字符串的数组，因为您`g`设置了修饰符。如果`title`是《喧哗与骚动》，给予的价值是给予*狂怒**的*`priority += (title.match(rq).length)`两倍。我不确定我是否理解为什么多个比赛应该得到更多。正如 Florent 所提到的，您可能希望将*and*视为停用词*，*以免这些不重要单词的多个匹配淹没您真正关心的单词的匹配。`priority`**`priority`**

 ***(3) 您可能希望提供诸如“此短语中的所有单词，按此确切顺序”、“所有单词，按任何顺序”和“这些单词中的任何一个”之类的选项。你在正确的轨道上`eq`，匹配单词边界。或者，您可能希望明确支持某种词干或通配符语法，例如*intro* " 匹配*Introduction*但*intro*不匹配。

**更新**

实现“所有单词，以任何顺序”很简单——你可能想多了。如果在或中找到所有的，则此代码段设置`match`为，否则：`true``q``title``keywords``false`

```
var match = true;
for (i = 0; i < q.length; i++) {
    eq = new RegExp("\\b" + escape(q[i]) + "\\b", 'gi');
    if (!eq.test(title)) {
        match = false;
        break;
    }
    if (!eq.test(keywords)) {
        match = false;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:09:15.273

您可以做的第一件事是忽略常用词，例如*the* , *and* , *or* , *a*等。

也许关键字应该比标题更重要。***

# asp.net-mvc - MVC Views 文件夹结构和应用程序启动

> ID：11758504
> 
> 赞同：1
> 
> 时间：2012-08-01T11:45:47.013
> 
> 标签：asp.net-mvc, visual-studio, model-view-controller, views

由于我有很多视图，所以我在 MVC 的 View 文件夹下创建了子文件夹。例如

```
Views - Product
Views - Customer
Views - Orders 
```

等等...然后每个文件夹作为实体的相关视图。一切正常。唯一的问题是，当我调试我的应用程序时 - 我的意思是在调试模式下运行 - URL 不起作用，例如 te URL 将类似于*Localhost:xxxx\Views\Product\Index* .... 但是如果我点击真正的应用程序链接然后一切正常...

我怎样才能使这项工作？...这让我很头疼，因为每次我运行应用程序时，URL 都是错误的。

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:50:36.793

如果您导航到 Projects -> MyApplication Properties，然后单击“Web”选项卡。在那里您可以更改应用程序的运行位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:47:46.783

这与 Visual Studio 及其调试 Web 应用程序的方式有关。您一定已经关注解决方案资源管理器中的视图，只需从视图中移除焦点，将焦点放在 Web 项目上就可以了，它会按预期工作。

# jquery - 如果最后一个 li 包含带有循环插件的类，则向第一个 li 添加一个类

> ID：11758507
> 
> 赞同：2
> 
> 时间：2012-08-01T11:46:01.880
> 
> 标签：jquery, jquery-cycle

[这个小提琴](http://jsfiddle.net/6PfKb/22/)按预期工作，当最后一个 li 有一个类时，第一个 li 得到一个类。

我正在尝试对 jQuery Cycle 插件使用相同的原理。如果你看一下[这个小提琴](http://jsfiddle.net/aaronk85/Y2muS/26/)，你会看到循环插件向活动幻灯片添加了一个 activeSlide 类。我在小提琴中放了一些我认为可以处理的代码，但看起来好像我的逻辑错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T11:54:13.763

在加载文档时，您只检查一次*activeSlide*类。将您的逻辑包装在行上的单击处理程序中，它应该可以工作：

```
$('#nav li').click(function() {
    if( $('.activeSlide').is('li:last-child') ) {
        $('li:first').addClass('first');
    }
    else {
        $('li:first').removeClass('first');
    }
}); 
```

[单击此处查看实时示例](http://jsfiddle.net/Y2muS/38/)

### 如果我想在周期的每个间隔检查活动幻灯片怎么办？

您可以向`after`选项添加回调并在那里运行逻辑。查看[所有可用选项](http://jquery.malsup.com/cycle/options.html)以获取更多信息。

[单击此处查看实时示例](http://jsfiddle.net/Y2muS/40/)

# mysql - Mono 2.10 不喜欢 mysql for linux？

> ID：11758514
> 
> 赞同：1
> 
> 时间：2012-08-01T11:46:44.780
> 
> 标签：mysql, mono

我为 '.NET & Mono' 获取了[mysql-connector-net-6.5.4-noinstall.zip 。](http://cdn.mysql.com/Downloads/Connector-Net/mysql-connector-net-6.5.4-noinstall.zip)我在 MSVS 中使用它并没有问题。尝试使用 mono 2.10 在 linux 上运行二进制文件时，我收到有关 mysql dll 无效的错误。在查看单声道开发时，我实际上可以浏览 DLL。当我尝试构建编译器时，会抛出一个错误，声称名称无效

当运行在 Windows 上构建的二进制文件时，我得到了这个异常

```
Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' or one of its dependencies.
File name: 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' 
```

我怎样才能让它工作？注意：我在 3.5 下构建它，而我计划使用的服务器只有 mono 2.6，所以我无法升级到 .NET 4

-编辑-

我检查了服务器所说的内容，我得到了这个异常。请注意 mysql.data.dll 位于同一目录中。

```
** (MySqlTest.exe:28256): WARNING **: The following assembly referenced from /root/apps/MySqlTest/MySqlTest.exe could not be loaded:
     Assembly:   MySql.Data    (assemblyref_index=2)
     Version:    6.5.4.0
     Public Key: c5687fc88969c44d
The assembly was not found in the Global Assembly Cache, a path listed in the MONO_PATH environment variable, or in the location of the executing assembly (/root/apps/MySqlTest/).

** (MySqlTest.exe:28256): WARNING **: Could not load file or assembly 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' or one of its dependencies.

Unhandled Exception: System.IO.FileNotFoundException: Could not load file or assembly 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' or one of its dependencies.
File name: 'MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:01:17.310

哦^&*()，他们打包错了。他们使用区分大小写的文件名构建 dll，并在压缩之前将 dll 名称小写。重命名`MySql.Data.dll`解决它。

# liferay - 在 Liferay 中使用 slickgrid 的 CSS 问题

> ID：11758515
> 
> 赞同：0
> 
> 时间：2012-08-01T11:46:45.940
> 
> 标签：liferay, slickgrid, liferay-6

我正在尝试`slickgrid`在我的 liferay 6.1 门户中使用，但发生了一些奇怪的事情。

当我做

```
self.grid = new Slick.Grid('#list', self.dataView, columns, options); 
```

网格的宽度扩展为`3906.916748046875`。

我调试了我的代码，发现执行此行时：

```
$topPanelScroller.hide(); 
```

网格扩大了它的宽度。

在 Liferay Portal 之外，它工作正常。

它发生在其他人身上吗？这可能是什么原因造成的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:57:50.720

才发现问题。

在`layout.css`from liferay 主题中，有：

```
.portlet-layout {
    border-collapse: collapse;
    clear: both;
    display: table;
    border-spacing: 0;
    table-layout: auto;
    width: 100%;
} 
```

它需要更改为：

```
.portlet-layout {
    border-collapse: collapse;
    clear: both;
    display: table;
    border-spacing: 0;
    table-layout: fixed; // this is changed from auto to fixed
    width: 100%;
} 
```

可能对有同样问题的人有用...

# html - 如何设置列表样式以在 html 中显示为两个列

> ID：11758516
> 
> 赞同：3
> 
> 时间：2012-08-01T11:46:56.030
> 
> 标签：html, css

我有一个清单如下：

```
<ul>
   <li>1<li>
   <li>2<li>
   <li>3<li>
   <li>4<li>
   <li>5<li>
   <li>6<li>
   <li>7<li>
   <li>8<li>
   <li>9<li>
 </ul> 
```

它们在输出中显示为：

```
1
2
3
4
5
6
7
8
9 
```

我怎样才能将它们设置为显示为：

```
1      2
3      4
5      6
7      8
9 
```

我需要一个适用于 IE 的解决方案，我很乐意使用 JQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:52:32.747

一种方法是给每个列表项一个定义的宽度，然后给整个列表一个定义的宽度，等于两个列表项。然后将所有列表项浮动到左侧。

CSS：

```
li{
    padding: 0; margin: 0;
    width: 4em;
    float: left;
}
ul{
    padding:0; margin: 0;
    width: 8em;
}​ 
```

**演示：[jsFiddle](http://jsfiddle.net/BrtzV/)**

# silverlight - Silverlight 中的字体粗细和样式未正确映射

> ID：11758517
> 
> 赞同：3
> 
> 时间：2012-08-01T11:46:59.657
> 
> 标签：silverlight, fonts, mapping

当我在 WPf 项目中有以下 Xaml 时：

```
 <StackPanel
        VerticalAlignment="Center">
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI"
            FontWeight="Light"
            Text="This is a test (light)" />
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI Light"
            Text="This is a test (font.light)" />
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI"
            Text="This is a test (normal)" />
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI"
            FontWeight="SemiBold"
            Text="This is a test (semibold)" />
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI Semibold"
            Text="This is a test (font.semibold)" />
        <TextBlock
            FontSize="40"
            FontFamily="Segoe UI"
            FontWeight="Bold"
            Text="This is a test (bold)" />
    </StackPanel> 
```

字体按预期呈现。但是，当我在 Silverlight 项目中使用它时，FontWeight 为 Light 或 Semibold 的文本块无法正确呈现；FontWeight="Light" 版本只使用普通字体，FontWeight="Semibold" 使用粗体版本。当明确说明字体名称时，即“Segoe UI Light”和“Segeo UI Semibold”，它按预期工作。似乎 Silverlight 没有像 WPF 那样将某些 FontWeight 值映射到正确的字体。这是一个错误还是我错过了什么？

在此先感谢，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:36:09.527

Silverlight 仅包含开箱即用的某些字体。那些没有正确显示的根本不可用，除非您特别将它们包含在您的项目中并将它们作为 xap 的一部分分发。

格雷格

# c# - 重复调用函数时出现 C# 错误

> ID：11758527
> 
> 赞同：0
> 
> 时间：2012-08-01T11:47:34.427
> 
> 标签：c#

我对以下代码有疑问：

```
 class Program
{
    public static void Progress(ProgressEventArgs e)
    {
        int result = e.getPartialResult;
        int stack_value = e.getValue ;
        double max = System.Convert.ToDouble(numbers[j]);
        System.Convert.ToDouble(stack_value);
        double percent = (stack_value / max) * 100;

        Console.CursorLeft = 18;
        Console.Write(result + " ");
        Console.CursorLeft = 46;
        Console.Write(System.Convert.ToInt32(percent) + "%      ");

    }
    public static void Calculate(int number, int time=0)
    {

        Factorial Fact = new Factorial();
        Fact.Progression += new Factorial.ProgressEventHandler(Progress);
        Console.Write("\n" + "Partial results : ");
        Console.CursorLeft = 35;
        Console.Write("Progress : ");         
        int Result = Fact.CalculateFactorial(number, time);
        Console.WriteLine(" ");
        Console.WriteLine("The factorial of " + number + " is : " + Result);

        Console.ReadLine();
    }

    static int j;
    static int[] numbers;

    public static void Main(string[] args)
    {
        int i=0;
        bool ok = false;
        numbers = new int[10];
        Console.Write("Please insert wait time (0,1 or 2) : ");
        int time = int.Parse(Console.ReadLine()) * 1000;
        Console.Write("Please insert a number : ");
        do
            if (Console.ReadLine() != "")
            {
                i++;
                numbers[i] = int.Parse(Console.ReadLine());

            }
            else
            {
                ok = true;
            }
        while (ok == false);
        for (j = 1; j <= i; j++)
        {

            Calculate(numbers[j],time);
        }

    }
} 
```

所以这里的情况有点奇怪......它似乎来自 if(Console.Readline()!="") 条件。

所以这个程序应该计算几个数字的阶乘。我给它一个延迟时间，以便通过百分比显示堆栈进度。

如果我输入一个随机时间并仅插入两个值，则程序将起作用，但仅适用于第一个数字。如果我输入超过 2 个数字，我将得到未处理的 FormatException。

现在，如果我用 if(numbers[i]!=10) 替换条件，该程序将适用于任意数量的值，但 10！必须计算。

我该如何处理这个问题？我错过了一些明显的东西吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T11:55:59.480

您正在阅读该行两次。像这样更改代码：

```
string line = string.Empty;
do
{
    line = Console.ReadLine();
    if (!string.IsNullOrEmpty(line))
    { 
       numbers[i] = int.Parse(line);
       i++;
    }
    else
    {
      ok = true;
    }

}while (!ok && i<10); 
```

*应该*为你工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T11:58:17.490

While 循环正在等待中断。像下面这样的东西会很好

```
....
string inputString;
while (!string.IsNullOrEmpty(inputString = Console.ReadLine()) && i < numbers.Length)
{
   numbers[i] = int.Parse(inputString);
   i++;
} 
```

# javascript - 复选框过滤结果

> ID：11758531
> 
> 赞同：0
> 
> 时间：2012-08-01T11:47:42.737
> 
> 标签：javascript, jquery

我正在做类似的[事情](http://jsfiddle.net/j08691/YEtgM/5/)。

What I want to add is that when '1 Bedroom' is selected, any items that have 1 Bedroom should display, even if none of the location checkboxes are selected.

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:57:57.713

您需要做的就是在底部的语句中添加一个“或”，以检查数组是否为空。

保持您当前的代码结构，您的最后一点代码将如下所示：

```
$('li').each(function() {
    if (($.inArray($(this).data('location'), loc_array) > -1 || loc_array.length == 0) && ($.inArray($(this).data('bedrooms'), room_array) > -1 || room_array.length == 0)) {
        $(this).show();
    } else {
        $(this).hide();
    }
}); 
```

当然，您的代码可以重构以使其更易于阅读并且（可能）更高效。但这样做的目的是帮助您了解您需要做什么。重构稍后出现！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:55:34.830

在您的输入更改功能中尝试此操作：

```
var bedrooms = $(this).data('bedrooms');
$('ul > li').each(function(){
    if($(this).data('bedrooms') !== bedrooms) $(this).toggle();
}); 
```

# xml - 从 xml 节点中删除奇怪的空间 (xPath/xQuery)

> ID：11758532
> 
> 赞同：0
> 
> 时间：2012-08-01T11:47:42.833
> 
> 标签：xml, xpath, unicode, xquery

我正在使用 Web-Harvest 来废弃网站并使用数据生成 xml 文件。

我有丑陋的节点`<name> </name>`，使用 normalize-space() 没有帮助，所以我在 Hex 视图中打开了文件，我发现它对应于'c2a0'。我四处寻找解决方案，但没有人帮助...

总而言之，我想要的是删除那个奇怪的空间（使用 xquery 或 xpath1/2），这样我就可以得到一个空节点`<name/>`

ps：使用的编码是'iso-8859-1'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:43:49.643

您可以使用`translate`删除某些字符。而utf8 c2a0是字符U+00A0，十六进制0xA0是160，所以可以用空格`codepoints-to-string(160)`来获取字符串。

一起：

```
translate(your node text, codepoints-to-string(160), "") 
```

# actionscript-2 - 当我尝试输入文本时动态文本字段消失

> ID：11758533
> 
> 赞同：1
> 
> 时间：2012-08-01T11:47:45.950
> 
> 标签：actionscript-2

我正在开发一个 Actionscript 2 项目，我想在其中更改影片剪辑中动态文本字段的文本。但是，当我尝试更改 .text 时，文本字段变为空白。

示例代码：

```
myInstanceName.text = "Test!";
trace("Run"); 
```

在一个框架中。我可以确认代码正在执行，并且 myInstanceName（一个动态文本字段）从我放在那里的任何文本变为空白。我曾尝试在“属性”中使用“变量”设置，但这会导致相同的结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T20:07:00.370

您的文本字段可能正在使用嵌入字体（在 Anti-Alias : Anti-alias for Animation 中配置）。

如果是这种情况，您有两种可能性：

*   选择“使用设备字体”：它不那么漂亮但更轻；如果您不使用常用字体，字体将无法正确显示

*   单击“嵌入”按钮并选择要在文本字段中使用的字符范围

# python - BeautifulSoup：在 html 中查找特定 URL 并打印

> ID：11758546
> 
> 赞同：0
> 
> 时间：2012-08-01T11:48:28.057
> 
> 标签：python, screen-scraping, web-scraping, beautifulsoup, mechanize

好的，所以我有这个 html 页面（充满了不同的 url），我想在其中获取一个 url 并打印它。

网页为：[https ://bdkv2.borger.dk/foa/Sider/default.aspx?fk=22&foaid=11523251](https://bdkv2.borger.dk/foa/Sider/default.aspx?fk=22&foaid=11523251)

我想打印网址 www.albertslund.dk

在源代码中看起来像这样：

```
<a href="http://www.albertslund.dk" id="_uscAncHomesite" target="_blank"><strong><span id="ctl00_PlaceHolderMain_FormControlHandler1__uscShowDataAuthorityDetails__uscLblHomesite">http://www.albertslund.dk</span></strong></a> 
```

当我尝试使用它的 ID（使用 BeautifulSoup 和 Mechanize）抓取它并打印它时，它只返回一个空列表。我想使用 ID 获取 URL，因为我正在抓取一堆类似的网站，其中我想要的东西具有相同的 ID。

```
kommuneside = br.open(https://bdkv2.borger.dk/foa/Sider/default.aspx?fk=22&foaid=11523251)
html2 = kommuneside.read()
soup2 = BeautifulSoup(html2)
hjemmesidelink = soup2.findAll('a', attras={'ID':'_uscAncHomesite'})
print hjemmesidelink 
```

这仅返回一个空列表：[]

如果我这样尝试：

```
print hjemmesidelink['href'] 
```

我得到：TypeError：列表索引必须是整数，而不是 str

我会认为这很简单，但我是一个菜鸟，它已经困扰了我好几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:59:15.717

您的代码中有许多拼写错误，所以我不能确定为什么您的搜索不匹配任何内容，但最可能的问题是您正在搜索属性“ID”（大写），但是标记中的属性是“id”（小写）。

由于您只想找到一个标签，我建议您使用[find()](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#find)，它将自行返回标签，而不是包含标签的列表。这就是我编写代码的方式：

```
print soup.find('a', id='_uscAncHomesite')                                      
# <a href="0" id="_uscAncHomesite" target="_blank">...</a> 
```

顺便说一句，您对 findAll 的使用让我觉得您正在使用 Beautiful Soup 3。我推荐[Beautiful Soup 4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)用于所有新项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:10:38.983

我刚刚检查了那个页面的源代码，没有`_uscAnc1Homesite`. 但是，有一个`_uscAncHomesite`. 也许你不小心插入了那个`1`？

试试看：

```
import re

hjemmesidelink = soup2.findAll('a', id='_uscAncHomesite')
regex = r'\[<a href="([^"]+)"'
pair = re.findall(regex, hjemmesidelink) 
```

这应该可以完美地识别您的链接。

# python - Python - 在按键或超时之前做某事

> ID：11758555
> 
> 赞同：10
> 
> 时间：2012-08-01T11:49:01.120
> 
> 标签：python, multithreading, timeout, keypress, wait

我几乎解决了这个问题，但我认为我需要朝着正确的方向轻推。

我想每五秒做一次，直到*经过*一定时间*或*用户中断它（在这种情况下，它在完成之前完成循环的迭代）。

 *```
import time
import threading

def do_something():
    T0 = time.clock()
    while (time.clock() - T0) < 60 and not e.isSet(): #as long as 60s haven't elapsed
                                                      #and the flag is not set
        #here do a bunch of stuff
        time.sleep(5)

thread = threading.Thread(target=do_something, args=())
thread.start()
e = threading.Event()

while thread.isAlive():
    #here I want the main thread to wait for a keypress and, if it receives it,
    #set the event e, which will cause the thread to finish its work. 
```

我不知道如何使最后一行工作。在循环内部使用`raw_input()`将阻塞，直到用户点击输入线程是否完成其工作。是否有另一个模块可以满足我的要求？

编辑：我使用的是 Windows XP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:45:35.307

您可以使用[`thread.interrupt_main()`](http://docs.python.org/library/thread.html#thread.interrupt_main).

* * *

**例子：**

```
import thread
import time
import threading

e = threading.Event()

def main():
    thread.start_new_thread(wait_for_input, tuple())
    thread.start_new_thread(do_something, tuple())

def wait_for_input():
    raw_input()
    e.set()

def do_something():
    T0 = time.clock()
    while (time.clock() - T0) < 60 and not e.isSet(): #as long as 60s haven't elapsed
                                                      #and the flag is not set
        #here do a bunch of stuff
        time.sleep(5)
    thread.interrupt_main() # kill the raw_input thread

try:
    thread.start_new_thread(main, tuple())
    while 1:
        time.sleep(0.1) 
except KeyboardInterrupt:
    pass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:31:44.597

这是我解决问题的方法。我真的不想移动到较低级别的`thread`模块，我决定我很高兴用户使用 CTRL-C 使程序优雅地退出。

由于它重新调整用途的方式，这有点麻烦`KeyboardInterrupt`，这意味着它不能真正嵌入到需要 CTRL-C 作为不优雅退出*的代码中。*但是对于我的目的来说没关系。

```
import time
import threading

def do_something():
    T0 = time.clock()
    while (time.clock() - T0) < 60 and not e.isSet(): #as long as 60s haven't elapsed
                                                      #and the flag is not set
        #here do a bunch of stuff
        time.sleep(5)

thread = threading.Thread(target=do_something, args=())
e = threading.Event()
thread.start()

print 'Press CTRL-C to interrupt'
while thread.isAlive():
    try: time.sleep(1) #wait 1 second, then go back and ask if thread is still alive
    except KeyboardInterrupt: #if ctrl-C is pressed within that second,
                              #catch the KeyboardInterrupt exception
        e.set() #set the flag that will kill the thread when it has finished
        print 'Exiting...'
        thread.join() #wait for the thread to finish 
```

* * *

**更新**：事实证明，使用 GUI 按钮要简单得多。下面的代码不涉及对`KeyboardInterrupt`.

```
import time
import threading
import Tkinter as Tk

def do_something():
    T0 = time.clock()
    while (time.clock() - T0) < 60 and not e.isSet(): #as long as 60s haven't elapsed
                                                      #and the flag is not set
        #here do a bunch of stuff
        time.sleep(5)

def _quit():
    print 'Exiting...'
    e.set()
    thread.join() #wait for the thread to finish
    root.quit()
    root.destroy()

root = Tk.Tk()
QuitButton = Tk.Button(master=root, text='Quit', command=_quit) #the quit button
QuitButton.pack(side=Tk.BOTTOM)

thread = threading.Thread(target=do_something, args=())
e = threading.Event()
thread.start()
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:09:22.290

**注意：**在您提到您使用的是 Windows XP 之前，我已经写了这个答案，因此它对您没有帮助-<a href="http://docs.python.org/library/select.html#module- select" rel="nofollow">`select`仅适用于 Windows 下的套接字。我认为答案对其他人仍然有用，所以我将其留在这里。

* * *

这比我编写示例代码要复杂一些，因为我确信它需要一些调试，但我可能会这样解决问题：

我会[`select`](http://docs.python.org/library/select.html)在一个循环中使用，等待`sys.stdin`5 秒超时。每次它返回时，如果没有输入，我会再次启动线程（也许检查最后一个线程是否真正完成运行），然后继续循环。如果存在输入，我将退出循环。

当`select`指示存在输入时，我可以将其视为完全中断或`read`在输入中，并评估它是否构成有效中断——如果不是，我可以将其缓冲等待进一步的输入以完成中断。如果是中断，我会等待线程完成工作。*

# cakephp - CakePHP：显示会员到期状态

> ID：11758556
> 
> 赞同：0
> 
> 时间：2012-08-01T11:49:01.270
> 
> 标签：cakephp, membership

在我的系统中，我有一个会员详细信息部分。我希望能够显示每个会员的会员到期状态（例如，当前、到期和已过期）。我已经为每个人设置了有效期。我只是需要一种方法让系统检查到期日期并显示会员状态，我不知道该怎么做。

如果有人可以发布有关如何执行此操作的详细说明，那就太好了。

**会员型号：**

```
<?php
App::uses('AppModel', 'Model');
class Member extends AppModel {
    public $displayField = 'id';

    public $belongsTo = array(
        'Contact' => array(
            'className' => 'Contact',
            'foreignKey' => 'contact_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );
} 
```

**会员表有：**
id
member_type
year_joined
date_renewed card_issue_date
续订
_due
contact_id

会员资格按年计算。并且功能与任何俱乐部会员资格一样。我需要索引页面和查看页面通过检查会员到期日期“renewal_due”来显示每个会员的状态。对于仍然有效/未过期的会员资格，会员状态应显示“当前”，对于将在一个月内到期的会员资格显示“即将到期”，对于已过期的会员，应显示“已过期”。

如果您需要任何进一步的信息，请随时询问。我不确定这需要什么样的信息才能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:07:39.500

如果您在数据库中将续订日期保存为 unix 时间戳（以秒为单位），您可以使用将当前时间与续订日期进行比较`time()`

你的控制器：

```
<?php

public function index($memberid) {
    $this->set('member', $this->Member->find('first', array('conditions' => array('Member.id' => $memberid)));
}

?> 
```

在您看来：

```
<?php
    if($member['Member']['renewal_date'] <= time()) {
        $status = 'Expired';
    } elseif (($member['Member']['renewal_date'] - (30 * 24 * 60 * 60)) <=  time()) {
        $status = 'Due To Expire';
    }  else {
        $status = 'Current';
    }
?>

Your membership is: <?php echo $status; ?> 
```

您需要更改您的数据库，使更新日期字段为整数，然后将更新日期保存为 unix 时间戳格式，如下所示：

```
<?php
    //sets a date one year from now
    $one_year_ahead = time() + (365 * 24 * 60 * 60);
    //alternative method
    $one_year_ahead = strtotime('+1 year');
?> 
```

# c++ - 在类主体之外定义的成员函数上的 sfinae

> ID：11758559
> 
> 赞同：4
> 
> 时间：2012-08-01T11:49:22.333
> 
> 标签：c++, templates, c++11, sfinae, decltype

[我之前](https://stackoverflow.com/questions/11694970/c11-style-sfinae-and-function-visibility-on-template-instantiation)的问题的延续。我所拥有的是一堆函数，它们形成了一个像这样的 sfinae 依赖链（让“A -> B”表示法意味着 A 的存在取决于 B 的存在）：

```
S::f_base -> S::f -> ns::f_ -> f -> T::f 
```

其中 T 是模板参数。它是这样实现[的](http://liveworkspace.org/code/9780ef0aa9b85e6464dbf1538ab4ae25)：

```
#include <utility>

struct S;

template <typename T>
auto f(S& s, T const& t) -> decltype(t.f(s), void())
{
    t.f(s);
}

namespace ns
{
    template <typename T>
    auto f_(S& s, T const& t) -> decltype(f(s, t), void())
    {
        f(s, t);
    }
} 

struct S
{
    template <typename T>
    auto f(T const& t) -> decltype(ns::f_(std::declval<S&>(), t), void())
    {
        ns::f_(*this, t);
    }

    template <typename T>
    auto f_base(T const* t_ptr) -> decltype(f(*t_ptr), void())
    {
        f(*t_ptr);
    }
};

struct pass
{
   void f(S&) const
   {
   }
};

struct fail
{

};

int main()
{
    S s;
    s.f(pass()); // compiles
    //s.f(fail()); // doesn't compile
    return 0;
} 
```

并按预期工作。当我尝试将定义移动到类主体之外时，就会出现问题`S::f`，`S::f_base`如下[所示](http://liveworkspace.org/code/f54caec1993057b576c04d0608b22cdf)：

```
#include <utility>

struct S;

template <typename T>
auto f(S& s, T const& t) -> decltype(t.f(s), void())
{
    t.f(s);
}

namespace ns
{
    template <typename T>
    auto f_(S& s, T const& t) -> decltype(f(s, t), void())
    {
        f(s, t);
    }
} 

struct S
{
    template <typename T>
    auto f(T const& t) -> decltype(ns::f_(std::declval<S&>(), t), void());

    template <typename T>
    auto f_base(T const* t_ptr) -> decltype(f(*t_ptr), void());
};

template <typename T>
auto S::f(T const& t) -> decltype(ns::f_(std::declval<S&>(), t), void())
{
    ns::f_(*this, t);
}

template <typename T>
auto S::f_base(T const* t_ptr) -> decltype(f(*t_ptr), void()) // <---- HERE ---
{
    f(*t_ptr);
}

int main()
{

    return 0;
} 
```

在箭头标记的线上`GCC 4.7.1`表示它的不满：

> 错误：'decltype ((((S*)0)->S::f((* t_ptr)), void())) S::f_base(const T*)' 的原型与类中的任何一个都不匹配S'
> 错误：候选是：模板 decltype ((((S*)this)->S::f((* t_ptr)), void())) S::f_base(const T*)

我试图通过在它前面（在声明和定义中）加上来明确指定`f`我正在使用的内容，但错误仍然存​​在。`f_base``std::declval<S&>().`

我知道我可以像这样修改依赖关系图：

```
S::f_base ->
          -> ns::f_ -> f -> T::f
S::f      -> 
```

与一起`S::f_base`依赖，但是有没有办法用第一个依赖图来做到这一点？`ns::f_``S::f`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-29T06:58:01.623

GCC 4.X 不是元编程的最佳选择

我已经设法让它在 4.7.3 ( [live](https://wandbox.org/permlink/6UbfUzOsskrKKgqI) ) 中编译：

```
#include <utility>

struct S;

template <typename T>
auto f(S& s, T const& t) -> decltype(t.f(s), void())
{
    t.f(s);
}

namespace ns
{
    template <typename T>
    auto f_(S& s, T const& t) -> decltype(f(s, t), void())
    {
        f(s, t);
    }
} 

// some std::void_t like but GCC4.x compatible
template<class T>
struct void_t
{
   using type = typename std::enable_if<std::is_same<T,T>::value >::type;
};

struct S
{
    template <typename T>
    auto f(T const& t) -> decltype(ns::f_(std::declval<S&>(), t), void());

    template <typename T>
    auto f_base(T const* t_ptr) ->  typename void_t< decltype (::f(*std::declval<T const*>()))>::type ;
};

template <typename T>
auto S::f(T const& t) -> decltype(ns::f_(std::declval<S&>(), t), void())
{
    ns::f_(*this, t);
}

// ::f is needed, fail if just 'f'
template <typename T>
auto S::f_base(T const* t_ptr) ->  typename void_t< decltype (::f(*std::declval<T const*>()))>::type
{
    f(*t_ptr);
}
int main()
{

    return 0;
} 
```

**笔记：**

在 GCC4.XI 中看到了一些奇怪的东西，比如：

```
template<class T>
struct void_t
{
   using type = void;
}; 
```

即使GCC 替换`void_t<decltype(expr)>::type`为无效。这就是为什么我使用.`void``expr``void_t`

# java - 对 Object 实现“绝对等于”方法（称为 same() 或 same()）。好主意？

> ID：11758562
> 
> 赞同：-1
> 
> 时间：2012-08-01T11:49:29.263
> 
> 标签：java, object, collections, equals, comparable

这是个好主意吗？如果没有，现在如何解决？

我认为添加一个会很有趣

```
final boolean identical(Obj obj){
   return (this==obj);
} 
```

所以我们有一个改进的等于（逻辑等于）

```
boolean equals (Obj obj){
   return identical(obj); // by default, but its overrideable
} 
```

这个问题源于另一个问题（[A Mechanism for have different equals (physical equals andlogical equals) on objects in Collection](https://stackoverflow.com/questions/11758220/a-mechanism-for-having-different-equals-physical-equals-and-logical-equals-on)）需要有一种方法来将相同指针列表与相同对象列表进行比较。有了这个想法，我们可以添加到 Collection 接口：

```
 coll.equals(coll2)
 coll.identical(coll2)
 coll.identicalElem(coll2){
      //current equals implementation of collections but calling identical to compare objects
 } 
```

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:03:12.137

您发布的默认`equals()`实现已经是`java.lang.Object`. 用相同的实现覆盖它没有任何意义。

关于您添加到集合界面的 3 种方法：

`coll.equals(coll2)`: 这个已经在Collection界面了。

`coll.identical(coll2)`: 等同于`coll == coll2`，但可读性较差。我不明白这种方法的意义。

`coll.identicalElem(coll2)`: 这个方法确实不存在，但是我从来没有需要过这样的方法，所以我认为它不应该把Collection的API弄得乱七八糟。你可以使用 Guava 的[Equivalence](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Equivalence.html)来做到这一点：

```
Equivalence.identity().pairWise().equivalent(coll1, coll2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:54:32.260

我不知道您是否知道这一点，但标准 Java API 中已经存在 IdentityHashMap。此外，您可以使用 System.identityHashCode 生成对象的哈希码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:56:08.343

对象上现有的“等于”方法已经这样做了——对吗？

这是代码：

```
 public boolean equals(Object obj) {
        return (this == obj);
    } 
```

因此，如果您为“等于”提供了一个实现，它会执行，如果没有（默认情况下），它使用“==”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:58:48.157

这不是一个好主意，因为这`equals(Object)`是测试一个类的两个实例是否相等，而不是它们是否代表同一个实例（即它们的指针相等）。

如果你实现那个“改进的”equals 方法，你最终会得到类似的结果： `new Rectangle(1, 2).equals(new Rectangle(1, 2))`返回 false，这将是荒谬的。

此外，还有大量代码依赖于`equals`方法的当前定义（例如 HashMaps 使用它来解决不同对象的哈希码冲突）。没有什么特别的原因，事情会到处爆发。

您提出的`identical`方法也不会在现有`==`运算符上增加任何价值。

在我看来，在有意义的地方覆盖`equals`对象的方法（尽管我什至对此提出质疑），但您绝对不想建议在顶层更改它以及所有对象的默认行为。

# apache-flex - 具有不同滑块的 Spark textarea

> ID：11758566
> 
> 赞同：0
> 
> 时间：2012-08-01T11:49:56.840
> 
> 标签：apache-flex, textarea, flex4, scrollbar, flex-spark

我对 Flex 比较陌生，并且对 textarea 的滚动条有疑问。基本上，我希望 textarea 有一个看起来像 VSlider 组件的垂直滚动条，而不是像 VSrollBar。（即带有点跟踪器的线，而不是带有框跟踪器的框）。

现在我想出了如何制作一个没有滚动条的 textarea 并将其链接到单独的 VSlider 组件并通过事件进行更新，但我很确定应该有某种方法只使用 textarea 并将其滚动条组件设置为看起来像VSlider 而不是 VScrollBar。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:59:53.750

我通过使用 spark TextArea 和 Vertical Scroll Bar 的皮肤解决了这个问题。此外，您还必须从该皮肤中对每个按钮进行皮肤处理。

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009" 
             xmlns:s="library://ns.adobe.com/flex/spark"
             xmlns:fb="http://ns.adobe.com/flashbuilder/2009">
    <fx:Metadata>
        <![CDATA[ 
            [HostComponent("spark.components.VScrollBar")]
        ]]>
    </fx:Metadata> 
    <s:states>
        <s:State name="normal" />
        <s:State name="disabled" />
        <s:State name="inactive" />
    </s:states>
    <s:Group top="2" horizontalCenter="0" bottom="2" left="2" right="2">
        <s:Button id="track" top="8" bottom="8" width="10" focusEnabled="false" 
                  skinClass="skins.scroller.VerticalScrollBarTrackSkin"/>
        <s:Button id="thumb" horizontalCenter="0" focusEnabled="false" visible.inactive="false"
                  skinClass="skins.scroller.VerticalScrollBarThumbSkin" buttonMode="true"/>
        <s:Button id="decrementButton" top="0" enabled.inactive="false"
                  focusEnabled="false" horizontalCenter="0" buttonMode="true"
                  skinClass="skins.scroller.VerticalScrollBarDecrementButtonSkin"/>
        <s:Button id="incrementButton" bottom="0" enabled.inactive="false"
                  focusEnabled="false" horizontalCenter="0" buttonMode="true"
                  skinClass="skins.scroller.VerticalScrollBarIncrementButtonSkin"/>
    </s:Group>
</s:SparkSkin> 
```

然后您必须将样式应用于您的应用程序。

```
s|VScrollBar
{
    skinClass:ClassReference("skins.scroller.VerticalScrollBarSkin");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:49:18.267

对于这种情况，我最终使用了一个 VSlider，我通过监听事件“手动”与 textarea 滚动同步。不是最顺利的方式，但在这种情况下最容易实现。

# database - 无法运行 heroku db:push

> ID：11758568
> 
> 赞同：0
> 
> 时间：2012-08-01T11:50:09.310
> 
> 标签：database, ruby-on-rails-3, heroku, sqlite, taps

我正在尝试将我的数据库推送到 heroku runnig 命令并出现错误

```
~ heroku db:push
  Taps Load Error: no such file to load -- sqlite3/sqlite3_native
  !    You may need to install or update the taps gem to use db commands.
  !    On most systems this will be:
  !    
  !    sudo gem install taps 
```

我正在使用 rvm 所以我运行

```
 gem install taps 
```

比什么都没有发生并运行

```
 heroku db:push 
```

导致同样的错误

我使用 ruby​​ 1.9.3 但出于数据库推送的目的，我运行命令

```
 rvm use 1.9.2-p290@mygemset 
```

1.9.2 和 1.9.3 中的 Gemset 是相同的

我能做些什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:55:06.540

Fixed it with reinstalling GCC-10.7 for Mac and reinstalling rvm with 1.9.2 ruby

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:56:31.693

Make sure you do not install the taps gem with sudo as they suggest. use the rvm sets and just install in the wanted rvm using `gem install taps`

that should do the trick

# linux - Linux 守护进程启动

> ID：11758570
> 
> 赞同：5
> 
> 时间：2012-08-01T11:50:22.117
> 
> 标签：linux, linux-kernel, daemon, redhat

*我在 linux(Redhat Server Edition 5.1) 上编写了一项服务。它由 shell 脚本启动，如果我启动我的应用程序我手动启动我的服务，现在我想在启动时启动我的服务，这意味着我将我的服务放在我的守护进程 init.d 文件夹中，而不是在启动时调用，有人知道如何在 linux 上启动守护进程吗？*

这是我的示例，但无法正常工作

```
#!/bin/sh
#
# myservice     This shell script takes care of starting and stopping
#               the <myservice>
#

# Source function library
. /etc/rc.d/init.d/functions

# Do preliminary checks here, if any
#### START of preliminary checks #########

##### END of preliminary checks #######

# Handle manual control parameters like start, stop, status, restart, etc.

case "$1" in
  start)
    # Start daemons.

    echo -n $"Starting <myservice> daemon: "
    echo
    daemon <myservice>
    echo
    ;;

  stop)
    # Stop daemons.
    echo -n $"Shutting down <myservice>: "
    killproc <myservice>
    echo

    # Do clean-up works here like removing pid files from /var/run, etc.
    ;;
  status)
    status <myservice>

    ;;
  restart)
    $0 stop
    $0 start
    ;;

  *)
    echo $"Usage: $0 {start|stop|status|restart}"
    exit 1
esac

exit 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T11:57:57.657

在脚本中添加 2 条评论：

```
# chkconfig: - 90 10
# description: description of your service 
```

以 root 身份运行：

```
chkconfig --add my_service 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:08:23.587

一个基本的 unix 守护进程执行以下操作：

```
fork
close all filedescriptors (stdout,stderr, etc)
chdir /
signal handeling (sighup, sigterm etc)
while
do stuff
sleep(xx)
done 
```

（C 中的示例：daemon.c）

关于如何安装启动脚本的 Red Hat 示例：

要在 redhat 系统启动时启动守护进程，您需要一个 init 脚本。它应该放在 /etc/init.d

初始化脚本示例：

代码：

```
# chkconfig: 3 99 1
# description: my daemon

case "$1" in
'start')
/usr/local/bin/mydaemon
;;

'stop')
pkill mydaemon
;;

'restart')
pkill -HUP mydaemon
;;

esac 
```

第一行将告诉 chkconfig 在运行级别 3 中以优先级 99 启动守护进程，并在服务器关闭时将其作为优先级 1 终止。

要安装启动脚本，请使用以下命令： chkconfig --add ./scriptabove 现在它将在服务器启动时启动。

立即启动它使用：服务启动

如果您想了解更多详细信息，请访问[链接](https://www.linux.com/learn/tutorials/442412-managing-linux-daemons-with-init-scripts)

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:55:31.537

不同的 linux 发行版包括不同的服务管理工具。你应该看看[launchd](http://en.wikipedia.org/wiki/Launchd)、[OpenRC](http://www.gentoo.org/proj/en/base/openrc/)（出现在 Gentoo 上）和[SystemD](http://www.freedesktop.org/wiki/Software/systemd/)（例如在 Arch 上）

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:55:36.857

chkconfig --add your_service_name

# ios - GLKTextureLoader 立方体贴图失败并出现 GLError 1281

> ID：11758572
> 
> 赞同：2
> 
> 时间：2012-08-01T11:50:31.603
> 
> 标签：ios, opengl-es-2.0, glkit

亲爱的程序员和 OpenGL 黑客们，

我有一个立方体贴图，其中包含 GLKTextureLoader 文档中所写的 6 个纹理。

当使用我的文件路径数组调用*[GLKTextureLoader cubeMapWithContentsOfFiles:options:error:]时，* **GLKTextureInfo**返回一个带有关键**OpenGL 错误**和值**1281**的错误。

我试过 npot 和 pot 纹理。我正在使用的纹理上传到我的网络空间[www.stefanpopp.de/cubemap](http://www.stefanpopp.de/cubemap/)

这是我当前的代码片段。我已经尝试像往常一样在立方体贴图之前加载单个纹理，并且效果很好。

**破码**

```
- (BOOL)loadTextures
{
// make sure EAGL context is active
[EAGLContext setCurrentContext:self.context];

/*
 Array of textures sorted as written in apple documentation
 Right(+x), Left(-x), Top(+y), Bottom(-y), Front(+z), Back(-z).
 Ref: http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html#//apple_ref/occ/clm/GLKTextureLoader/cubeMapWithContentsOfFiles:options:error:
*/

NSArray *texturesArray = @[
[[NSBundle mainBundle] pathForResource:@"Right" ofType:@"png"], // +x
[[NSBundle mainBundle] pathForResource:@"Left" ofType:@"png"],  // -x
[[NSBundle mainBundle] pathForResource:@"Up" ofType:@"png"],    // +y
[[NSBundle mainBundle] pathForResource:@"Down" ofType:@"png"],  // -y
[[NSBundle mainBundle] pathForResource:@"Front" ofType:@"png"], // +z
[[NSBundle mainBundle] pathForResource:@"Back" ofType:@"png"],  // -z
];

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES],
                         GLKTextureLoaderOriginBottomLeft,
                         nil];

NSError *error;
// load cubemap texture with given array of file paths
self.cubemapTexture = [GLKTextureLoader cubeMapWithContentsOfFiles:texturesArray
                                                           options:options
                                                             error:&error];
// if cubemapeTexture is null, loading failed
if (nil == self.cubemapTexture) {
    NSLog(@"Failure reason: %@", error.description);
    NSLog(@"Error code: %i", error.code);
    NSLog(@"Textures: %@", texturesArray);
    NSLog(@"Error: %@", [error description]);
    @throw @"Can not load cubemap textures";
} else {
    NSLog(@"Loaded cubemap textures '%@'\n", self.cubemapTexture);
}
return YES;
} 
```

* * *

**错误信息输出**

```
ERROR: The operation couldn’t be completed. (GLKTextureLoaderErrorDomain error 8.)
Failure reason: Error Domain=GLKTextureLoaderErrorDomain Code=8 "The operation couldn’t be completed. 
    (GLKTextureLoaderErrorDomain error 8.)" UserInfo=0x886bee0 {
        GLKTextureLoaderGLErrorKey=1281, 
        GLKTextureLoaderErrorKey=OpenGL error
    }

Error code: 8
Error loading cubemap texture (null)
Textures: (
    "/ShortenPATH/Right.png",
    "/ShortenPATH/Left.png",
    "/ShortenPATH/Up.png",
    "/ShortenPATH/Down.png",
    "/ShortenPATH/Front.png",
    "/ShortenPATH/Back.png"
)
Error: Error Domain=GLKTextureLoaderErrorDomain Code=8 
    "The operation couldn’t be completed. 
    (GLKTextureLoaderErrorDomain error 8.)" UserInfo=0x886bee0 {
        GLKTextureLoaderGLErrorKey=1281, GLKTextureLoaderErrorKey=OpenGL error
    }

*** Terminating app due to uncaught exception of class '__NSCFConstantString'
terminate called throwing an exception 
```

提前致谢！

# java - Java IEEE 64 位 754 双精度值，要避免的值

> ID：11758577
> 
> 赞同：5
> 
> 时间：2012-08-01T11:51:02.537
> 
> 标签：java, performance, floating-point, double

我有一种情况，性能非常重要。在我的算法的核心，有一种方法可以使用两个`double`原语进行一些基本计算。每次运行该算法时，该方法被调用超过一千万次。

代码看起来像这样；

```
public int compare(double xA, double xB, double yA, double yB);

    double x = xA * xB;
    double y = yA * yB;

    double diff = x - y;

    return (diff < 0.0 ? -1 : (diff > 0.0 ? 1 : 0));

} 
```

参数`xA`并`yA`从一组中获取它们的值。这个集合可以在代码中调整。我看到巨大的（大约两倍）性能差异取决于我放入集合中的值。似乎如果集合包含 a`0.1`或 a `0.3`，则性能会受到很大影响。将集合保持为的倍数`0.5`可获得最佳性能。

编译器是否优化`x * 0.5`等`x >> 1`？或者这是因为`0.1`不能用二进制定义？

我想更好地了解这种情况，以便我可以优化它。我想这可能是一个相当困难的问题，除非有人确切知道 javac 和 jvm（在我们的例子中是热点）如何处理双乘法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:10:18.513

只是一个~~夫妻~~几个想法：

*   ~~[如果值是 0.5 的倍数，那么尾数](http://en.wikipedia.org/wiki/Significand)中的有效位将很少，因此乘法需要更少的循环似乎是可行的。~~实际上，乘法的有效位似乎不是问题，因为现代处理器只需要两个周期来实现双精度（如[浮点除法与浮点乘法](https://stackoverflow.com/questions/4125033/floating-point-division-vs-floating-point-multiplication)中所述）。

    例如，我认为对于 0.5 、 1 、 2、 4 等，尾数将全为零（第一个“1”因隐含而被省略）。对于 .75、1.5、3 等，它将是 msb 中的“1”，后跟全零。而 0.1 将使用所有有效数字精度来表示，即使这样也会有一个小误差。

*   [关于返回的结果： Math.signum()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#signum(double))有什么问题吗？我的意思是，也许这会做同样的事情：

    ```
    return Math.signum(x-y); 
    ```

*   如果精度不是最重要的，您可以考虑使用单精度（浮点数）。（虽然如果这意味着你要从 double 来回转换，那么它可能不值得）。

# javascript - 谁更快：PEG 还是 GLR？

> ID：11758578
> 
> 赞同：7
> 
> 时间：2012-08-01T11:51:07.527
> 
> 标签：javascript, performance, parser-generator, peg, glr

[我正在尝试为C/AL 编程语言](http://en.wikipedia.org/wiki/C/AL)创建某种`lint`工具。所以基本上我需要对源代码进行语法和词法分析。我计划从头开始编写解析器，但后来发现有很多工具可以帮助自动生成这些解析器。

我需要性能，因为在一段中检查 20 兆字节的代码是正常情况，我需要该工具可以通过自定义规则进行扩展。所以我决定使用 JavaScript。

到目前为止，我已经找到了两个可以使用[Jison](http://zaach.github.com/jison/)和[PEG.js](http://pegjs.majda.cz/)的生成器。

它们中的哪一个给了我更多的解析性能？也许不是比较库，而是算法？

哪一个更适合我的需求（解析通用编程语言）？

**更新：** 我发现了类似的问答：

*   [Packrat 解析与 LALR 解析](https://stackoverflow.com/q/3661249/1047741)
*   [解析器的性能：PEG vs LALR(1) 或 LL(k)](https://stackoverflow.com/q/11373644/1047741)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T11:55:04.853

一般来说，你会从一个 shift-reduce 解析器中获得非常好的解析性能，比如 Jison 实现的解析器。这可能有点老派，但它可以在非常紧张的内存需求和线性时间中工作。

PEG 产生一种不同类型的解析器，它可能功能更强大，但需要更多内存才能产生相同的结果。即 PEG 将需要与输入成比例的内存量，而 LALR 解析器将在更少的空间（一些表和一个小堆栈）中完成它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T14:23:06.763

“我需要性能（对于 20Mb）......所以我决定使用 Javascript”。这些都是矛盾的。

仔细编码的递归下降解析器可以非常快，但您必须编写大量代码。通常，LALR(1) 解析器（由 Bison 从语法等生成）非常快，并且非常容易编码。（有技术论文展示了如何将 LALR 解析器直接编译为机器代码；这些解析器速度非常快，但您需要实现许多自定义机器来构建一个）。

如果你想以最少的汗水实现高性能解析，你应该考虑[LRStar](http://sourceforge.net/projects/lrstar/)。（我知道并高度尊重作者，但除此之外与此无关）。这会产生非常快的 LALR 解析器。缺点：你必须让你的语法 LALR 兼容。您必须像扩展任何其他 C 程序一样扩展您的“规则”：通过编写 C 代码。恕我直言，这似乎并不比编写 JavaScript 差多少，但规则可能会执行得更快，并且在您考虑的规模上这很重要。

GLR 解析必然比 LALR 慢，因为它需要做更多的簿记工作。但这只是一个不变的因素。与 LRStar 这样的高性能引擎相比，它可能是显着的（例如，100 倍）。这可能是值得的麻烦，因为它更容易塑造你的语法，而且不那么复杂的语法可能会使编写自定义规则更容易。如果你真的有数百万行代码，这些解析器充其量只能是中等速度。

PEG基本上是一种回溯。它必须尝试一些事情，并在它们不起作用时回溯。它们必须比 LALR 解析器慢，至少要慢于它们所做的回溯量。你还有语法塑造问题。

但是，您会发现，如果您想做任何最微不足道的事情，仅仅解析是不够的。在这种情况下，您不想优化解析；您想优化基础设施以进行程序分析。请参阅我关于 [解析后的生活](http://www.semanticdesigns.com/Products/DMS/LifeAfterParsing.html)的文章以获取另一种选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-30T12:05:11.523

> 到目前为止，我已经找到了两个可以使用 Jison 和 PEG.js 的生成器。它们中的哪一个给了我更多的解析性能？

根据我创建的 JavaScript Parser Libraries 基准测试，PEG.js 似乎更快（至少在 Chrome/V8 上）。

你可以在这里在线运行它：http: [//sap.github.io/chevrotain/performance/](http://sap.github.io/chevrotain/performance/)

请注意，此基准测试使用非常简单的 JSON 语法来比较解析库的性能，而不是使用更大更复杂的编程语言语法。

# java - 我可以在 JBoss 应用服务器上部署 java 应用和 php 应用吗？

> ID：11758581
> 
> 赞同：2
> 
> 时间：2012-08-01T11:51:34.550
> 
> 标签：java, php, jboss

我们已经部署了一个 JBoss 6.1 应用服务器，它承载了一个用 Spring 编写的 java 应用程序。现在我们正在使用 HTML+PHP 创建另一个应用程序。是否可以在现有的 JBossAS 部署上部署 PHP 应用程序？我在互联网上读到部署 php 应用程序我需要 Jboss 本机，JbossAS 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:31:10.370

您只需将 JBoss Native 安装到现有的 JBoss AS 实例 + php 支持。这里在这篇文章中简要描述了如何做到这一点的过程：

[https://community.jboss.org/message/426264#426264](https://community.jboss.org/message/426264#426264)

和 JBoss Native 和 PHP 支持页面：

[http://www.jboss.org/jbossweb/native/](http://www.jboss.org/jbossweb/native/)

[http://www.jboss.org/jbossweb/downloads/php/](http://www.jboss.org/jbossweb/downloads/php/)

# android - 查找当前位置是否位于地图上两点之间绘制的直线上。

> ID：11758582
> 
> 赞同：2
> 
> 时间：2012-08-01T11:51:36.317
> 
> 标签：android, google-maps, coordinates

我在两个 之间的地图上画了一条线`GeoPoints`，并检索了当前位置。我想知道用户的当前位置是否沿着画线？

如果我得到绘制线的纬度和经度，我如何检查用户是否在绘图路径中？

我用下面的代码在地理点之间画了一条线

```
import java.util.List;

import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.graphics.Paint.Cap;
import android.graphics.Paint.Style;
import android.graphics.Point;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class RouteSegmentOverlay extends Overlay {
    private GeoPoint locpoint;
    private Paint paint;
    // private GeoPoint routePoints [];
    private List<GeoPoint> routePoints;
    private List<Integer> routeMode;
    private boolean routeIsActive;  
    private Point pold, pnew, pp;
    private int numberRoutePoints;

    // Constructor permitting the route array to be passed as an argument.
    public RouteSegmentOverlay(List<GeoPoint> routePoints, List<Integer> routeMode) 
    {
        this.routePoints = routePoints;
        this.routeMode = routeMode;
        numberRoutePoints  = routePoints.size();
        routeIsActive = true;
        // If first time, set initial location to start of route
        locpoint = routePoints.get(0);
        pold = new Point(0, 0);
        pnew = new Point(0,0);
        pp = new Point(0,0);
        paint = new Paint();
    }

    // Method to turn route display on and off
    public void setRouteView(boolean routeIsActive){
        this.routeIsActive = routeIsActive;
    }

    @Override
    public void draw(Canvas canvas, MapView mapview, boolean shadow) {
        super.draw(canvas, mapview, shadow);
        if(! routeIsActive) return;

        mapview.getProjection().toPixels(locpoint, pp);       // Converts GeoPoint to screen pixels

        int xoff = 0;
        int yoff = 0;
        int oldx = pp.x;
        int oldy = pp.y;
        int newx = oldx + xoff;
        int newy = oldy + yoff;

        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setStrokeCap(Cap.ROUND);
        paint.setStrokeWidth(7);
            paint.setColor(Color.parseColor("#666666"));

        for(int i=0; i<numberRoutePoints-1; i++)
        {
            mapview.getProjection().toPixels(routePoints.get(i), pold);
            oldx = pold.x;
            oldy = pold.y;
            mapview.getProjection().toPixels(routePoints.get(i+1), pnew);
            newx = pnew.x;
            newy = pnew.y;

            canvas.drawLine(oldx, oldy, newx, newy, paint);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:18:03.127

您是否关心用户是否在线？如果是这样，您可以使用斜率并检查用户是否位于两个端点之间。

您可以通过检查用户坐标是否位于两条线端点之间来检查中间值。您可以使用以下公式找到线的斜率：

> 斜率=（y2-y1）/（x2-x1）

首先计算你的线的斜率，然后计算用户当前位置和你的线的两个端点之一之间的斜率。如果两个条件都满足，则用户在线，如果不满足，则用户未在线。

**编辑**：

您可以使用 [Google Maps Android API 实用程序](https://github.com/googlemaps/android-maps-utils)库。利用`PolyUtil.isLocationOnPath(LatLng point, List<LatLng> polyline, boolean geodesic, double tolerance)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:56:27.357

你数学有多好？

基本上，您可以计算路径上每两个点之间的线的方程式，然后计算线与用户位置之间的距离，如果该距离足够小，您可以声称他在该路径上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:16:35.153

```
 import java.util.ArrayList;
import java.util.List;
import android.app.AlertDialog;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Path;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.util.Log;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;
import com.google.android.maps.Projection;
public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;
    public GeoPoint p1, p2 = null;
    int mode;
    Drawable drawable1;
    private Paint paint;
    private List<GeoPoint> points1;
    ArrayList<GeoPoint> middleGeoList1;

    public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    public HelloItemizedOverlay(GeoPoint gp1, GeoPoint gp2, Drawable drawable,
            List<GeoPoint> poly) {
        super(boundCenterBottom(drawable));
        // TODO Auto-generated constructor stub
        this.p1 = gp1;
        this.p2 = gp2;
        this.points1 = poly;
        this.drawable1 = drawable;  
        paint = new Paint();
        paint.setColor(Color.BLUE);
        paint.setAlpha(150);
        paint.setAntiAlias(true);
        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        paint.setStrokeWidth(5);
        populate();
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void removeOverlay(OverlayItem overlay) {

        mOverlays.remove(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {

        if (!shadow) {

            Projection projection = mapView.getProjection();
            if (points1 != null && points1.size() >= 2) {
                Point start = new Point();
                projection.toPixels(points1.get(0), start);
                for (int i = 1; i < points1.size(); i++) {
                    Point end = new Point();
                    projection.toPixels(points1.get(i), end);
                    canvas.drawLine(start.x, start.y, end.x, end.y, paint);
                    start = end;
                }

            } 
        }

        return super.draw(canvas, mapView, shadow, when);
    }
} 
```

它是我的应用程序中的一个工作示例......使用 ItemizedOverlay 类以获得更好的性能......一切顺利

# java - 签名小程序和服务器端控制器之间的通信

> ID：11758583
> 
> 赞同：1
> 
> 时间：2012-08-01T11:51:38.863
> 
> 标签：java, jsp, applet, httpclient, classcastexception

我创建了一个用于将文件上传到服务器的签名小程序。代码运行良好，但我想将该文件从小程序发送到服务器端控制器，代码已放置在该控制器中以将该文件保存到服务器。

**我在签名 Applet 中的 SendFile 代码：**

```
public static void sendFile(String destFileName) throws IOException {       
        String filePrivacy = "Public";
        String fileKeyword = "uploadFileDocumentName";
        String fileComments = "fileComments";
        String fileType = "txt";
        String fileFolder = "/Works";
        String fileDetails = "";
        HttpClient client = new HttpClient();
        PostMethod postMethod = new PostMethod(
                "http://localhost:8080/fileUpload/encryptFileUpload.works?filePrivacy="+filePrivacy+"&fileKeyword="+fileKeyword+"&fileComments="+fileComments+"&fileType="+fileType+"&fileFolder="+fileFolder+"&fileDetails="+fileDetails);

        File f = new File(destFileName);
        Part[] parts = {new FilePart(f.getName(), f)};
        postMethod.setRequestEntity(new MultipartRequestEntity(parts, postMethod.getParams())); 
        postMethod.setRequestHeader("Content-type", "text/xml; charset=ISO-8859-1");
        client.executeMethod(postMethod);
        postMethod.releaseConnection();
    } 
```

**我的 UploadController 的方法看起来像：**

```
@RequestMapping(value = "/encryptFileUpload.works")
    public String uploadEncryptFile(String filePrivacy,
            String fileKeyword,
            String fileComments,
            String fileType,
            String fileFolder,
            HttpServletRequest request, HttpServletResponse response) {
        try {
            Map<String, Object> requestMap = new HashMap<String, Object>();
            requestMap.put(DMSConstants.JCR_FILE_PRIVACY, filePrivacy);
            requestMap.put(DMSConstants.JCR_FILE_KEYWORD, fileKeyword);
            requestMap.put(DMSConstants.JCR_FILE_COMMENTS, fileComments);
            requestMap.put(DMSConstants.JCR_FILE_TYPE, fileType);
            MultipartHttpServletRequest m = (MultipartHttpServletRequest) request;
            MultipartFile file = m.getFile("Filedata");
            Node folderNode = contentPublishService.getFolderNode(fileFolder);
            Node node = contentPublishService.saveFileToRepository(folderNode,
                    file.getInputStream(), file.getOriginalFilename(),
                    requestMap);
        } catch (RepositoryException e) {
            e.printStackTrace();        
        return null;
    } 
```

在这条线上`MultipartHttpServletRequest m = (MultipartHttpServletRequest) request;`，我遇到了异常，例如：

```
java.lang.ClassCastException: org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper cannot be cast to org.springframework.web.multipart.MultipartHttpServletRequest
    at com.nmmc.works.web.controller.FileUploadController.uploadEncryptFile(FileUploadController.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source) 
```

那么哪里出了问题，我应该在我的代码中做些什么改变。第二件事是我可以在控制器处获取文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:49:56.487

我得到了那个问题的解决方案。这是我在现有代码中所做的更改

**我的签名小程序：**

```
MultipartPostMethod mPost =  new MultipartPostMethod(uri);      
mPost.addParameter("Filedata", f.getName(), f);
client.executeMethod(mPost); 
```

现在它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:02:27.000

需要更多细节...

只是一些建议...

*Part*对象是什么？

如果您想按“部分”上传文件，我可能建议您只覆盖*MultipartEntity* writeTo 方法来上传大文件而不是使用数组，或者这不是问题？

关于演员表......我可能猜想那条线可能会导致问题

```
MultipartHttpServletRequest m = (MultipartHttpServletRequest) request; 
```

作为一项规则，HttpClient 与 FileUpload 库配合使用。那么为什么不使用它呢？

还有一件事……您将内容 mime 指向为`text/xml`xml，尤其是当它是 bin 文件部分时？不应该是某种`application/octet-stream`代替吗？

无论如何，在您的问题中提供更多详细信息会更有帮助

# html - 如何为tr分配边框？

> ID：11758585
> 
> 赞同：0
> 
> 时间：2012-08-01T11:51:41.783
> 
> 标签：html

我已经创建了这样的表格。如果其中一个单元格为空白，则单元格消失。我想要该单元格的至少边框，如果值不存在。如果我尝试为 tr 分配边框，则无效。

```
<table border="1">

    <tr>
    <th>Month</th>
    <th>Savings</th>
    </tr>
    <tr>
    <td>January</td>
    <td>$100</td>
    </tr>
    <tr>
    <td>February</td>
    <td>$80</td>
    </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:31:21.410

如果任何单元格为空白，首先它在我的浏览器中工作。
如果它在您的浏览器中不起作用，则为**td**提供**高度**和**边框**。 和 css 它比使用属性更好。 请参阅[此链接](http://www.w3schools.com/css/css_border.asp)以了解 css 的边界。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:18:17.127

您可以为 tr 内的所有 td 元素设置border-top 和border-bottom ，为内部的第一个和最后一个td 设置border-left / border-right 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T11:57:05.250

试试这个css作为单元格的边框：

```
td{
        border: 1px solid black;
        height: 20px;
    } 
```

如果您希望将它放在一行上，请尝试将此 css 用于一行上的边框：

```
tr{
    border: 1px solid black;
    height: 20px;
} 
```

请注意，20px 的高度是您想要的高度，这只是一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:50:31.027

这是因为空表格单元格默认是隐藏的。要使它们出现，您可以使用以下 CSS：

```
table { empty-cells: show; } 
```

更多信息：[http](http://www.cs.tut.fi/~jkorpela/HTML/emptycells.html) ://www.cs.tut.fi/~jkorpela/HTML/emptycells.html 浏览器支持：[http ://www.quirksmode.org/css/tables.html](http://www.quirksmode.org/css/tables.html)

从 IE8 向上的所有东西都支持这个 CSS（据我所知，IE7 无论如何都会显示空单元格）。

（如果你想内联，没有单独的 CSS 文件，试试`<table style="empty-cells: show;">`）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-01T11:56:44.237

如果要获得单元格边框，则必须将其设置在 td 上：

```
<td style〓"border: 1px solid #gfdfgf"> 
```**

# java - 如何使用 Maven 将所有必需的 JAR 文件放在最终 JAR 文件内的库文件夹中？

> ID：11758594
> 
> 赞同：115
> 
> 时间：2012-08-01T11:52:01.973
> 
> 标签：java, maven, jar, build-process, classloader

我在我的独立应用程序中使用 Maven，并且我想将我的 JAR 文件中的所有依赖项打包到一个库文件夹中，如此处的答案之一所述：

*[如何使用 Maven 创建具有依赖关系的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)*

我希望我的最终 JAR 文件有一个库文件夹，其中包含作为 JAR 文件的依赖项，而不是像`maven-shade-plugin`.m2 文件夹中的 Maven 层次结构那样以文件夹形式放置依赖项的那种。

好吧，实际上当前配置可以满足我的需求，但是在运行应用程序时加载 JAR 文件时遇到问题。我无法加载课程。

这是我的配置：

```
<plugins>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
            <execution>
                <id>copy-dependencies</id>
                <phase>prepare-package</phase>
                <goals>
                    <goal>copy-dependencies</goal>
                </goals>
                <configuration>
                    <outputDirectory>${project.build.directory}/classes/lib</outputDirectory>
                    <overWriteReleases>false</overWriteReleases>
                    <overWriteSnapshots>false</overWriteSnapshots>
                    <overWriteIfNewer>true</overWriteIfNewer>
                </configuration>
            </execution>
        </executions>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
            <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <classpathPrefix>lib/</classpathPrefix>
                    <mainClass>com.myapp.MainClass</mainClass>
                </manifest>
            </archive>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
            <execution>
                <id>install</id>
                <phase>install</phase>
                <goals>
                    <goal>sources</goal>
                </goals>
            </execution>
        </executions>
    </plugin>

    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.5</version>
        <configuration>
            <encoding>UTF-8</encoding>
        </configuration>
    </plugin>

</plugins> 
```

该项目在 Eclipse 中运行良好，并且 JAR 文件按照我的需要放在我的最终 JAR 文件内的库文件夹中，但是当从目标文件夹运行最终 JAR 文件时，我总是得到`ClassNotFoundException`：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: com.myapp.MainClass. Program will exit. 
```

我该如何解决这个异常？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2014-08-04T10:35:56.857

以下是我的解决方案。测试它是否适合您：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>copy-dependencies</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>copy-dependencies</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.build.directory}/classes/lib</outputDirectory>
                <overWriteReleases>false</overWriteReleases>
                <overWriteSnapshots>false</overWriteSnapshots>
                <overWriteIfNewer>true</overWriteIfNewer>
            </configuration>
        </execution>
    </executions>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <!-- <classpathPrefix>lib</classpathPrefix> -->
                <!-- <mainClass>test.org.Cliente</mainClass> -->
            </manifest>
            <manifestEntries>
                <Class-Path>lib/</Class-Path>
            </manifestEntries>
        </archive>
    </configuration>
</plugin> 
```

第一个插件将所有依赖项放在 target/classes/lib 文件夹中，第二个插件将 library 文件夹包含在最终的 JAR 文件中，并配置`Manifest.mf`文件。

但是您需要添加自定义类加载代码来加载 JAR 文件。

或者，为了避免自定义类加载，您可以使用“${project.build.directory}/lib，但在这种情况下，最终 JAR 文件中没有依赖项，这违背了目的。

问这个问题已经两年了。尽管如此，嵌套 JAR 文件的问题仍然存在。我希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-01T13:02:08.020

更新：

```
<build> 
  <plugins> 
    <plugin> 
    <artifactId>maven-dependency-plugin</artifactId> 
    <executions> 
      <execution> 
        <phase>install</phase> 
          <goals> 
            <goal>copy-dependencies</goal> 
          </goals> 
          <configuration> 
             <outputDirectory>${project.build.directory}/lib</outputDirectory> 
          </configuration> 
        </execution> 
      </executions> 
    </plugin> 
  </plugins> 
</build> 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-01T11:57:45.490

最简单和最有效的方法是使用这样的 uber 插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <finalName>uber-${project.artifactId}-${project.version}</finalName>
            </configuration>
        </plugin> 
```

您将在一个 JAR 文件中对所有内容进行反规范化。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-05-28T10:16:41.000

[可执行打包器 maven 插件](https://github.com/nthuemmel/executable-packer-maven-plugin)可用于该目的：创建包含所有依赖项的独立 Java 应用程序作为特定文件夹中的 JAR 文件。

只需将以下内容添加到您`pom.xml`的部分内部`<build><plugins>`（请务必`mainClass`相应地替换 的值）：

```
<plugin>
    <groupId>de.ntcomputer</groupId>
    <artifactId>executable-packer-maven-plugin</artifactId>
    <version>1.0.1</version>
    <configuration>
        <mainClass>com.example.MyMainClass</mainClass>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>pack-executable-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

`target/<YourProjectAndVersion>-pkg.jar`运行后生成的 JAR 文件位于`mvn package`. 它的所有编译时和运行时依赖项都将包含在`lib/`JAR 文件内的文件夹中。

免责声明：我是插件的作者。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-01T13:48:24.130

按照这个链接：

[如何：Eclipse Maven 安装带有依赖项的构建 jar](https://stackoverflow.com/questions/10019549/how-to-eclipse-maven-install-build-jar-with-dependencies)

我发现这不是可行的解决方案，因为类加载器不会从 jar 中加载 jar，所以我认为我将解压缩 jar 中的依赖项。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-01T12:36:22.520

这是我的做法：

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <appendAssemblyId>false</appendAssemblyId>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                    <manifest>
                        <mainClass>com.project.MainClass</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

然后我就跑：

```
mvn assembly:assembly 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-21T16:10:27.780

我找到了这个问题的答案：

[http://padcom13.blogspot.co.uk/2011/10/creating-standalone-applications-with.html](http://padcom13.blogspot.co.uk/2011/10/creating-standalone-applications-with.html)

您不仅可以在 lib 文件夹中获得依赖的 lib 文件，还可以获得带有 unix 和 dos 可执行文件的 bin 目录。

可执行文件最终使用 -cp 参数调用 java，该参数也列出了所有依赖库。

全部位于目标文件夹内的 appasembly 文件夹中。史诗。

============= 是的，我知道这是一个旧线程，但它在搜索结果中仍然很高，所以我认为它可能会对像我这样的人有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-01T11:56:54.913

这显然是一个类路径问题。考虑到当您在 IDE 之外运行程序时，类路径必须发生一些变化。这是因为 IDE 会加载相对于项目根文件夹的其他 JAR，而对于最终 JAR，这通常不是真的。

在这些情况下，我喜欢手动构建 JAR。我最多只需要 5 分钟，它总能解决问题。我不建议你这样做。找到一种使用 Maven 的方法，这就是它的目的。

# android - 模仿本地 IP 地址

> ID：11758603
> 
> 赞同：0
> 
> 时间：2012-08-01T11:52:29.363
> 
> 标签：android, tcp, ip, ip-address

每个人。

让我们想象一个情况。

我的 Android 手机上有两个 IP，用于无线电设备（移动网络和 wifi），IP#1 和 IP#2。IP#1 形成从 IP#1 到外部 IP 的 TCP 连接，但由于未知原因断开连接。是否可以让 IP#2 在外国 IP 眼中显示为 IP#1 以避免连接超时？

包会去：IP#2 -> 通过 IP#1 -> 外国 IP

外国 IP -> IP#1 -> IP#2

同时在整个会话期间保持相同的 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:01:16.687

不，因为您将无法收到回复数据包。它们将被发送到您未连接的网络，并且无法联系到您。

# android - Android SQLite 过滤具有日期范围的数据

> ID：11758606
> 
> 赞同：1
> 
> 时间：2012-08-01T11:52:38.287
> 
> 标签：android, sqlite, filter, range

我有一个游标，它用 SQLite 表中的值填充列表。

在表中，我有一列包含日期的文本类型。

我想过滤日期范围内的表中的值。

现在我正在这样做，但它不起作用：

```
cursor = sqliteDatabase.query("Servicios", null,
            "fechaservicioprevista > '01/06/2012' AND fechaservicioprevista < '01/07/2013', null, null,
            null, null); 
```

它不显示任何值，但在此日期范围内有一些值。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:03:49.300

尝试以您要比较的格式强制将数据输入到表格中。我的意思是你必须输入 01/06/2012 而不是 1/6/2012。我遇到了类似的情况，当我强制将数据输入数据库的格式为 01/06/2012 时，比较有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:02:52.170

您应该使用子句“介于”和 strftime() 函数

```
 strftime(%s, date) BETWEEN strftime(%s, start_date) AND strftime(%s, end_date) 
```

# xml - 选择 xml 属性

> ID：11758607
> 
> 赞同：3
> 
> 时间：2012-08-01T11:52:43.037
> 
> 标签：xml, scala

我有一个 xml（存储在变量报告中），如下所示：

```
<wrapper>
    <Sample Id="SomeId1">
        <Tag Id="SomeTag">
          <Lane Id="1">
           [...]
          </Lane>
        </Tag>
    </Sample>
    <Sample Id="SomeId2">
        <Tag Id="SomeTag">
          <Lane Id="1">
           [...]
          </Lane>
        </Tag>
    </Sample>
</wrapper> 
```

我想从“Sample”节点中提取“Id”属性。我阅读了以下文章[http://www.codecommit.com/blog/scala/working-with-scalas-xml-support](http://www.codecommit.com/blog/scala/working-with-scalas-xml-support)然后尝试：

```
(report \\ "Sample" \ "@Id").text 
```

我得到一个空字符串作为返回：

```
scala> (report \\ "Sample" \ "@Id").text
res16: String = "" 
```

但我应该有 "SomeId1SomeId2" 作为 return 。我做错了什么？

我发现了几个与我相似的问题。示例： [Scala：XML 属性解析](https://stackoverflow.com/questions/2851365/scala-xml-attribute-parsing)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:41:46.563

我让它像这样工作：

```
(xml \\ "Sample").map(n => (n \ "@Id").text)

=> scala.collection.immutable.Seq[String] = List(SomeId1, SomeId2) 
```

但*必须*有更好的解决方案……</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T16:22:17.733

如果您使用选择器在具有多个元素`\`的 a 上选择一个属性，您将得到一个空结果，正如您从[源代码](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/xml/NodeSeq.scala#L92)中看到的那样：`NodeSeq`

```
def \(that: String): NodeSeq = {
  ...
  that match {
    case "" => fail
    case "_" => makeSeq(!_.isAtom)
    case _ if (that(0) == '@' && this.length == 1) => atResult
    case _ => makeSeq(_.label == that)
  }
} 
```

我以前对此感到疑惑，如果我没记错的话，我无法确定这是记录在案的行为——我目前肯定找不到文档。

无论如何，当前的实现感觉就像是 hack，并导致一些奇怪的行为：

```
scala> val bar = <bar>{ <baz/>.copy(label = "@baz") }</bar>
bar: scala.xml.Elem = <bar><@baz></@baz></bar>

scala> <foo>{ bar }</foo> \\ "bar" \ "@baz"
res0: scala.xml.NodeSeq = NodeSeq()

scala> <foo>{ bar ++ bar }</foo> \\ "bar" \ "@baz"
res1: scala.xml.NodeSeq = NodeSeq(<@baz></@baz>, <@baz></@baz>) 
```

这是一个反常的例子，但结果仍然非常可怕。

作为一种解决方法，我会亲自编写类似`(report \\ "Sample").flatMap(_ \"@Id")`获取`NodeSeq`属性文本元素的内容，然后`text`在需要时对其进行映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T14:32:01.573

对此进行了更多实验，我找到了@Jean-Philippe Pellet 提供的解决方案的替代解决方案，我认为该解决方案更加清晰（即使我确信有更好的方法来做到这一点。）

```
report.\\("Sample").foreach(s => println(s.attribute("Id").get.text)) 
```

这将返回：

```
scala> report.\\("Sample").foreach(s => println(s.attribute("Id").get.text))
SomeId1
SomeId2 
```

由于 \ 方法返回一个 NodeSeq，因此可以遍历每个 Node 并获取其属性并对其进行处理。在这种情况下，只需获取它们并将它们转换为 String 以打印它们，但我想这也将允许更复杂的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T15:07:11.843

以下：

```
(report \ "Sample").head \ "@Id" 
```

生成包含您的属性的 NodeSeq。输入属性似乎需要一个节点（不幸的是，我没有找到关于该假设的文档 - 欢迎参考链接）

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-01T11:56:43.940

您必须使用 [] 而不是 \

```
\\"Sample"[@Id] 
```

# hibernate - Hibernate 4 的优缺点？

> ID：11758613
> 
> 赞同：0
> 
> 时间：2012-08-01T11:52:56.217
> 
> 标签：hibernate

有人可以列出 Hibernate 3 与 Hibernate 4 之间的主要区别吗？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:56:59.467

许多文章之一：[Hibernate 4 Release](http://www.infoq.com/news/2012/01/hibernate-4-released/)。在 Steve 的博客中也可以找到一个很好的见解：[In Relation To](http://relation.to/Bloggers/Steve) ...。

如果您担心从 Hibernate 3 迁移到 Hibernate 4，您应该阅读 Steve 的这篇文章：[Hibernate Core Migration Guide: 4.0](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)。

# ruby-on-rails - rails - form_tag 连接到自定义函数

> ID：11758614
> 
> 赞同：0
> 
> 时间：2012-08-01T11:52:57.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3

铁轨新手！！！如何让我的“发送”按钮调用发送电子邮件的功能（sendmail）？这就是我到目前为止所拥有的...... events_controller 中的 sendmail 没有调用！我的模型中有一个事件，我正在运行 rails 3.2.3

显示.html.erb：

```
<p><b>Send Results</b></p>
<%= form_tag("/events", :method => "get") do %>
<p><label for="email_recipient">Email recipient</label>:
<%= text_field 'email', 'Email recipient' %></p>
<%= submit_tag "Send" %>
<% end %> 
```

路线.rb：

```
resources :events do
      member do 
          get '/sendmail', :as => :sendmail
      end
  end 
```

events_controller.rb

```
 def sendmail
        puts "sendmail"
        Emailer.deliver_results_email
        return if request.xhr?
        render :text => 'Message sent successfully'
  end 
```

电子邮件程序.rb

```
class Emailer < ActionMailer::Base
  #default from: "from@example.com"
  def results_email
    puts "RESULTS EMAIL"
    #NEVER GETS THIS FAR.....
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:12:57.393

第一件事。在你的`routes.rb`你已经把`sendmail`动作放在一个`member`块内。这将生成这样的路线：

```
/events/:id/sendmail 
```

如果 sendmail 操作有点通用并且不需要应用于单个“事件”，也许你应该把它放在一个`collection`块上，所以你的路线是这样的：

```
/events/sendmail 
```

其次，如果你`rake routes | grep sendmail`在控制台中运行，你会得到类似这样的输出：

```
sendmail_event GET /events/:id/sendmail events#sendmail 
```

这行的意思是您配置了一个路由，并且您有一个名为的辅助路由方法`sendmail_event_path`，您可以使用它来帮助理解您的视图等。所以在您的视图中，它会是这样的：

```
<%= form_tag sendmail_event_path(@event.id) %>
  ...
<% end %> 
```

当您单击提交按钮时，表单将`POSTED`发送到您的`events_controller`.

我建议您将路线更改为 a `collection`，然后更改为`:post`，这样您就可以在没有事件的情况下使用它。

# android - Android上Phonegap中的网络错误？

> ID：11758615
> 
> 赞同：2
> 
> 时间：2012-08-01T11:53:04.097
> 
> 标签：android, eclipse, cordova

**我得到这个错误。我应该怎么办？**

路径是有效的，我已经检查过了。我已经干净并再次重建了应用程序，等等。我真的不知道接下来该怎么办！

在我的活动课程中，我有以下代码：

```
import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class TestPhoneGapActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       // setContentView(R.layout.main);
        String url = "file:///assets/www/index.html"; 
        super.loadUrl(url); 
    }
} 
```

![应用程序错误](../Images/cec0205e574e717cf412141110614ef6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:34:29.140

我有这个问题，我像这样修复它..

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

至

```
super.loadUrl("file:///android_asset/www/index.htm"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T17:08:33.063

您可能需要使用 IceCreamCordovaWebViewClient

```
@Override
    public void init() {
    super.init(webView, new IceCreamCordovaWebViewClient(this, webView), new CordovaChromeClient(this, webView));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T23:43:46.397

我在网上找到了一个非常好的解决方案。

您基本上需要做的是将 index.html 的内容移动到另一个文件，比如 app.html。

然后在您的原始 index.html 中包含以下代码：

```
<!doctype html>
<html>
<head>
   <title>your app name</title>
</head>
<body>
   <script>
       window.location='./app.html';
   </script>
</body>
</html> 
```

与服务器的连接不会再超时，应用程序应该会成功加载。

现在我没有想出这个好主意。所有功劳归功于罗伯特·基欧：

[https://www.robertkehoe.com/2013/01/fix-for-phonegap-connection-to-server-was-unsuccessful/](https://www.robertkehoe.com/2013/01/fix-for-phonegap-connection-to-server-was-unsuccessful/)

这样做帮助我解决了我自己的 Android phonegap 应用程序的类似问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T13:27:33.063

检查您的资产/www/ 文件夹。检查 index.html 文件是否存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T01:49:45.997

检查您的 www 文件夹，我认为那里没有 index.hmtl

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-15T09:31:36.663

Raj Patel 回答有效！应该使用 super.loadUrl("file:///android_asset/www/index.html"); 虽然在 Eclipse 中调用 assets 中的文件夹

# xpath - Xpath 确定 Selenium IDE 中的复选框“已选中”属性

> ID：11758616
> 
> 赞同：7
> 
> 时间：2012-08-01T11:53:07.913
> 
> 标签：xpath, selenium, selenium-ide

如何通过xpath确定复选框是否被选中

目前我正在尝试：

```
//input[@type='checkbox' and @checked='true')] 
```

我有多个具有相同 ID 的复选框，因此我必须选择下一个未选中/选中的复选框。

具体来说，我需要 Selenium IDE

**编辑** 我真正需要的东西是这样的：

```
|storeXpathCount | //input[@name='xyz' and @checked='checked'] | is_checked | 
```

如果选中了复选框“xyz”，则 is_checked 值应为 1，否则为 0

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T11:15:56.217

xpath

```
// Xpath, only works in certain situations
//input[@type='checkbox' and @checked='xyz'] 
```

仅当复选框的 HTML 源代码中有如下属性时才有效

```
checked="xyz" 
```

开发人员可以自由地将“xyz”替换为任何内容：“true”、“checked”、“ischecked”……

所以如果没有这个属性，上面提到的xpath就不起作用了。

在等待更多见解时，您可能会考虑使用不依赖于此类属性的 CSS 选择器：

```
// CSS selector, for all checkboxes which are checked
input:checked[type='checkbox']

// CSS selector, for all checkboxes which are not checked
input:not(:checked)[type='checkbox'] 
```

请注意，没有

```
[type='checkbox'] 
```

您还将获得收音机:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T13:11:00.947

![在此处输入图像描述](../Images/67c81782d8c4cebb066162e23311d9f7.png)

这`stnewrecord`是复选框的类。脚本将存储复选框的数量，并根据该循环将遵循。它将检查复选框是否被选中，如果没有，它将检查否则进入下一步。

```
xpath=(//input[@class='stnewrecord'])[${i}] 
```

这是复选框的 xpath。'i' 是位置，每次迭代都会增加。

让我知道它是否适合你..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T19:37:26.317

但是，有一些解决方案不使用 css 类和选择器。

利用

```
//input[@type='checkbox' and @checked] 
```

或者

```
//input[@type='checkbox' and not(@checked)] 
```

代替

```
//input[@type='checkbox' and @checked='xyz'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T16:49:17.073

你可以试试这些：

```
//*[@type='radio'][@checked='checked']/
//*[@type='radio'][not(@checked='checked')]/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:30:02.300

像这样的东西可能有效：

```
//input[@checked='checked']/following-sibling::*[1][not(@checked='checked')] 
```

# c# - 如何在 C# MVC3 中使用 MPXJ .net 读取 .mpp 文件？

> ID：11758618
> 
> 赞同：2
> 
> 时间：2012-08-01T11:53:11.667
> 
> 标签：c#, asp.net-mvc-3, ms-project, mpxj

我正在尝试使用 C# MVC3 中的 .net 版本的 MPJX 读取 MS 项目文件。我正在使用 jQuery uploadify 将文件上传到我的控制器。

现在，我的问题是如何从我的 HttpPostedFileBase 文件中读取 ProjectFile = Request.Files[0]; 读取文件时出现异常，因为 file.FileName 不包含文件的完整路径作为浏览器安全性的一部分。如果我很好或者至少有 Java 知识，那么我只需将发布的文件转换为 java.io.file，因为它是 ProjectReader.read 支持的有效参数之一。

下面是我现在拥有的代码片段（从[Example of MPXJ library in C# 中](https://stackoverflow.com/questions/4454923/example-of-mpxj-library-in-c-sharp?answertab=votes#tab-top)的线程中获取代码）。

```
 [HttpPost]
 public JsonResult UploadTask(int ProjectType)
    {
        try
        {
            HttpPostedFileBase file = Request.Files[0];
            MpxjReader.ProjectReader mppReader = MpxjReader.ProjectReaderUtility.getProjectReader(file.FileName);
            Mpxj.ProjectFile mpp = mppReader.read(file.FileName);

            List tables = mpp.getTables();
            Iterator iter = tables.iterator();
            while (iter.hasNext())
            {
                MpxjCore.Table table = (MpxjCore.Table)iter.next();
                if (table.getResourceFlag())
                {
                    List resources = mpp.getAllResources();
                    Iterator resourceIter = resources.iterator();
                    while (resourceIter.hasNext())
                    {
                        MpxjCore.Resource resource = (MpxjCore.Resource)iter.next();
                        List columns = table.getColumns();
                        Iterator columnIter = columns.iterator();
                        while (columnIter.hasNext())
                        {
                            MpxjCore.Column column = (MpxjCore.Column)columnIter.next();
                            Object columnValue = resource.getCachedValue(column.getFieldType());
                            Console.Write(columnValue);
                            Console.Write(",");
                        }
                        Console.WriteLine();
                    }
                }
                else
                {
                    List tasks = mpp.getAllTasks();
                    // etc. as above
                }
            }

            return Json(new { data = "success" }, JsonRequestBehavior.AllowGet);
        }
        catch
        {
            return Json(new { data = "error" }, JsonRequestBehavior.AllowGet);
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:24:48.460

更新：我已经通过首先将 .MPP 文件保存到指定目录然后从该目录中读取来解决问题（这是在服务器中部署时的行为方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T10:23:51.073

您可以在不将文件存储到文件系统的情况下执行此操作，因此您不必管理它。您可以使用以下代码直接读取上传的文件：

```
public ActionResult LoadProject(HttpPostedFileBase file)
{
    // Read file content into byte[]
    var buffer = new byte[file.InputStream.Length];
    file.InputStream.Read(buffer, 0, (int) file.InputStream.Length);                                    

    // Read the content using a new 'java' inputStream
    var reader = new MPPReader();                                  
    var project = reader.Read(new java.io.ByteArrayInputStream(buffer));

    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T03:32:59.677

我已经像你一样实现了，但是我们遇到了性能问题。为了提高应用程序的性能，您可以实现如下：

```
public ActionResult Upload(HttpPostedFileBase files)
{
   ProjectReader reader = new MPPReader();
   ProjectFile projectObj = reader.read(new ikvm.io.InputStreamWrapper(files.InputStream));
} 
```

# java - lucene中的加密工具

> ID：11758619
> 
> 赞同：3
> 
> 时间：2012-08-01T11:53:21.413
> 
> 标签：java, encryption, lucene

最近在我的项目中，我使用 lucene 在我们的数据库中进行重复搜索，它运行良好。但是现在需要加密 lucene 索引，我被要求寻找 lucene 本身提供的加密工具，而不是使用外部库。

我刚刚找到了 LUCENE-2228 AES 加密目录并制作了小型 POC。问题是，当我重新索引时，我收到以下错误：

```
java.lang.RuntimeException: File already Exists
    at org.apache.lucene.util.AESWriter.<init>(AESWriter.java:117)
    at org.apache.lucene.store.AESDirectory$AESIndexOutput.<init>
        (AESDirectory.java:187)
    at org.apache.lucene.store.AESDirectory.createOutput(AESDirectory.java:72)
    at org.apache.lucene.index.SegmentInfos.finishCommit(SegmentInfos.java:939)
    at org.apache.lucene.index.IndexWriter.finishCommit(IndexWriter.java:3539)
    at org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:3529)
    at org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1879)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1822)
    at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1786)
    at org.apache.lucene.test.indexing.main(indexing.java:45) 
```

**这是我的代码**：

```
public class indexing 
{
    private static final byte[] KEY = 
        new byte[] { 'T', 'h', 'e', 'B', 'e', 's', 't',
'S', 'e', 'c', 'r','e', 't', 'K', 'e', 'y' };
    public static void main(String[] args) throws Exception
    {

        Directory INDEX_DIR = new AESDirectory(new File("index1"),KEY);

        Connection conn=null;

        SnowballAnalyzer analyzer=new SnowballAnalyzer(Version.LUCENE_30,"English");
        try
        {
           Class.forName("com.mysql.jdbc.Driver").newInstance();
           conn = DriverManager.getConnection("jdbc:mysql:///lucene", "abcd", "abcd");
           IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_34, analyzer);
           IndexWriter writer = new IndexWriter(INDEX_DIR, config);
           writer.deleteAll();
           //writer.flush();
           System.out.println("Indexing to directory '" + INDEX_DIR + "'...");
           long starttime=System.currentTimeMillis();
           indexDocs(writer, conn);
           writer.optimize();
           writer.close();
           long endtime=System.currentTimeMillis();
           long timetaken=TimeUnit.MILLISECONDS.convert(endtime - starttime,TimeUnit.MILLISECONDS);
           System.out.println("Time taken to do indexing is "+timetaken+"ms");
        } 
        catch (Exception e)
        {
           e.printStackTrace();
        }
    }
    static void indexDocs(IndexWriter writer, Connection conn) throws Exception 
    {
        //String sql = "select qid,question from tblquestions";
        String sql = "select qid,question from tblquestions";
        Statement stmt = conn.createStatement();
        stmt.setFetchSize(Integer.MIN_VALUE);
        ResultSet rs = stmt.executeQuery(sql);
        Integer count = 0;
        while (rs.next())
        {
            count ++;
            Document d = new Document();
            d.add(new Field("qid", rs.getString("qid"), Field.Store.YES, Field.Index.NOT_ANALYZED));
            d.add(new Field("question", rs.getString("question"), Field.Store.YES,  Field.Index.ANALYZED));
            writer.addDocument(d);
        }
        System.out.println("count: " + count);
    }
} 
```

谁能帮我解决这个问题。或者给出一些关于 lucene 索引加密的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T07:26:12.033

该补丁适用于 3.1 版，您似乎正在使用其他版本的 Lucene。选择以下选项之一，直到您的版本的补丁发布（或编写您自己的补丁！）

1.  切换到 Lucene 3.1

2.  使用 Windows NTFS 加密。除非未经授权的人知道如何以创建索引的用户身份登录，否则应该是安全的。

3.  继续使用 TrueCrypt 或其他外部加密。这应该是非常安全的，但它需要安装 TrueCrypt 和管理权限才能安装加密驱动器。

# c# - 在字符串中查找字符串可以为空的单词（有时）

> ID：11758627
> 
> 赞同：3
> 
> 时间：2012-08-01T11:53:50.883
> 
> 标签：c#, wcf, entity-framework, linq-to-entities

我必须在 LINQ to EF 搜索中找到一个词。所以我写了下面的代码

```
 var Q = (from k in MyList 
                 where k.Name.Contains(query) || k.Description.Contains(query)   
                   select k).Count();
 if (Q == 0)
      continue; 
```

但是“描述”字段有时可以为空。在这些情况下我会出错。有什么办法可以避免这个错误？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T11:55:46.443

在执行包含之前检查 null：

```
var Q = (from k in MyList 
             where k.Description!=null && (k.Name.Contains(query) || k.Description.Contains(query))   
               select k).Count();
if (Q == 0)
  continue; 
```

或者可能更好：

```
var Q = (from k in MyList 
             k.Name.Contains(query)  || 
              ( string.IsNullOrEmpty(k.Description)? false :   
                k.Description.Contains(query))   
               select k).Count();
if (Q == 0)
  continue; 
```

# android - AsyncTask 和 Thread 之间的真正区别

> ID：11758629
> 
> 赞同：18
> 
> 时间：2012-08-01T11:53:53.560
> 
> 标签：android, multithreading, android-asynctask, difference, asynctaskloader

我一直在阅读有关此问题的 Android 文档（[AsyncTask](https://developer.android.com/reference/android/os/AsyncTask.html)、[Thread](https://developer.android.com/reference/java/lang/Thread.html#)）和[vogella 教程](http://www.vogella.com/articles/AndroidPerformance/article.html#androidbackground)，但我仍有疑问。

例如，我想从 Android 应用程序向服务器发送消息。我希望这个过程能够响应。我应该使用什么？

我已经看到了他们创建一个新`Thread`的不阻塞 UI 的示例，但是这样我们就没有进程的进度，而且您必须在其中处理响应，`Thread`因为该`run()`方法不返回任何内容。

`AsyncTask`似乎比 更好的选择`Thread`，但我不知道使用 a`AsyncTask`而不是 a的后果是什么`Thread`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-05T12:44:31.897

请阅读此博客

[http://crazyaboutandroid.blogspot.in/2011/12/difference-between-android.html](http://crazyaboutandroid.blogspot.in/2011/12/difference-between-android.html)

和细节是：

**Android Service、Thread、IntentService和AsyncTask的区别**

***何时使用？***

*服务*

```
 Task with no UI, but shouldn't be too long. Use threads within service for long tasks. 
```

*线*

```
- Long task in general.

- For tasks in parallel use Multiple threads (traditional mechanisms) 
```

**异步任务**

```
- Small task having to communicate with main thread.

- For tasks in parallel use multiple instances OR Executor 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-08T20:33:29.507

这里所有其他的答案都不完整，AsyncTask和Thread有很大区别，即

线程可以从任何线程、main(UI) 或后台触发；但 AsyncTask 必须从主线程触发。

同样在 Android 的较低 API（不确定，可能 API 级别 < 11）上，一个 AsyncTask 实例只能执行一次。

有关更多信息，请阅读[Android Service、Thread、IntentService 和 AsyncTask 之间的区别](http://www.onsandroid.com/2011/12/difference-between-android.html)

一般来说

**线**

*   任务一般很长。

*   对于并行任务使用多线程（传统机制）

**异步任务**

*   必须与主线程通信的小任务。

*   对于并行任务，使用多个实例或执行器

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T11:59:58.527

> AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

你可以控制它自己的功能

> doInBackground（参数...参数），onCancelled（），onPostExecute（结果结果），onPreExecute（），nProgressUpdate（进度...值），publishProgress（进度...值）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-01T12:00:58.447

*   我更喜欢使用**异步任务**，因为它会让您知道何时 **开始和结束**以及何时可以 响应。`background process`**`parse`**
***   **Async**有类似`onPreExecute`and的方法，`onPostExecute`它允许我们在调用后台任务之前和之后执行任务。**

 *** * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-01T11:58:05.170

一般来说使用 2 这个特性是等价的，但是 AsyncTask 在与 GUI 的集成方面更简单

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-01T12:01:23.203

`AsyncTask enables proper and easy use of the UI thread.`- 来自[开发者](http://developer.android.com/reference/android/os/AsyncTask.html)。

问题是 - AsyncTask 是一种特殊的线程 - 它是一个 GUI 线程，它在后台工作，还可以让你用 GUI 做一些事情 - 它基本上是为你“预编程”的函数`onPreExecute(), do inBackground(), onPostExecute()`。

为了以`Thread`这种方式工作，您必须编写大量代码。**

# android - 数字选择器使应用程序崩溃

> ID：11758630
> 
> 赞同：0
> 
> 时间：2012-08-01T11:53:58.437
> 
> 标签：android, android-layout

Q1：是否可以使用数字选择器来获取数据？

我只是尝试通过下一个代码在数字选择器中设置字符串值，但是当我滚动选择器以查看下一个值时，应用程序崩溃是代码：

```
String[] manga={"death note","runway","blood bro"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        NumberPicker pic=(NumberPicker) findViewById(R.id.numberPicker1);
        pic.setMaxValue(manga.length);
        pic.setMinValue(0);
        pic.setWrapSelectorWheel(false);
        pic.setDisplayedValues(manga);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:15:21.347

pic.setMaxValue(manga.length-1);

# sed - 更改特定列的值

> ID：11758634
> 
> 赞同：0
> 
> 时间：2012-08-01T11:54:20.497
> 
> 标签：sed, awk, grep

以下 sed 命令按预期工作。我需要做的是仅在第二列中将 null (\n) 更改为 0。

```
# cat nulltest.txt 
1   abc
1   \N
\N  xyz

# sed 's/\\N/0/' nulltest.txt 
1   abc
1   0
0   xyz 
```

预期成绩 ：

```
1   abc
1   0
\N  xyz 
```

数据由制表符“\t”分隔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:33:09.707

```
kent$  echo "1   abc
1   \N
\N  xyz"|awk '{gsub(/\\N/,"0",$2)}1'|column -t
1   abc
1   0
\N  xyz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:33:36.993

您可以在表达式中使用下面的正则`sed`表达式，以确保它`\N`位于第二列。

```
^([^\t]+\t)\\N(\t) 
```

所以你的`sed`表达将如下所示

```
sed -r -i 's/^([^\t]+\t)\\N(\t)/\10\2/g' nulltest.txt 
```

**解释：**

`^([^\t]+\t)`: 将匹配正`1`则表达式`\t`及其`()`周围使其成为第一组。

`\\N`: 会匹配`\N`

`(\t)`: 它`tab`是第二组之后的第二列。

在`sed`通知的替代部分中，使用`\1`and`\2`代表正则表达式中的***第一组和第二组***，在您的情况下分别是`1 followed by \t`和`\t`。因此它将保留第一组和第二组，并将其余匹配的字符串替换为`0`.

在我的测试中，我使用了下面的输入文件

```
abcdefgh
3   abc \N  \N  \N
123 \N  \N  \N
\N  \Nxyz 
```

我得到的输出是

```
abcdefgh
3   abc \N  \N  \N
123adsa 0   \N  \N
\N  \Nxyz 
```

请注意，确切地`\N`从`2nd`列被替换。即使有任何数量的列带有`\N`这个 sed 表达式，也`\N`只会从`2nd`列中替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:12:55.730

尝试这个：

```
sed -r 's/^([^\t]+\t)\\N/\10/' nulltest.txt 
```

# cakephp - 错误日志中的 CakePHP 2 MissingControllerException => 显示访问的 url

> ID：11758640
> 
> 赞同：1
> 
> 时间：2012-08-01T11:54:47.773
> 
> 标签：cakephp, exception-handling

是否可以创建/扩展一个 CakePHP 异常处理程序，该处理程序显示用户尝试访问的引发异常的 url？

通常当我查看我的 error.log 文件时，我会看到如下内容：

> 2012-08-01 13:39:20 错误：[MissingControllerException] 找不到控制器类 UserController。#0 /www/htdocs/w0081e0e/app/webroot/index.php(104): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse)) #1 {main}

我有一个正在工作的 UsersController，但我不确定用户尝试访问哪个 url，而哪个 url 会引发此错误。这将帮助我查看 error.log 文件中的 url。那可能吗？我是否必须创建/扩展异常处理文件？

* * *

**更新：** 我没有编写自己的 ExceptionHandler，而是更新了“lib/Cake/Error/ErrorHandler.php”中的“handleException”函数：

```
if (!empty($config['log'])) {
        $message = sprintf("[%s] %s\n%s",
            get_class($exception),
            $exception->getMessage(),
            $exception->getTraceAsString().' - http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']."\n"
        );
        CakeLog::write(LOG_ERR, $message);
    } 
```

我知道一旦我更新了我的 CakePHP 版本，它就会被覆盖，但它是一个快速修复，非常适合我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:55:42.973

您可以编写自己的异常处理程序。[它在http://book.cakephp.org/2.0/en/development/exceptions.html#create-your-own-exception-handler-with-exception-handler](http://book.cakephp.org/2.0/en/development/exceptions.html#create-your-own-exception-handler-with-exception-handler)中有很好的记录

无论如何，URL 似乎是这样的`http://something/user/something`。错误说`UserController`找不到，这是真的，因为你只有一个`UsersController`（复数）。如果您只是想避免此错误，找到创建`/user/`URL 的文件可能就足够了。

# c# - 无法让我的基本树结构正常工作

> ID：11758642
> 
> 赞同：1
> 
> 时间：2012-08-01T11:54:54.783
> 
> 标签：c#, collections, tree

有时，无论您如何将头撞到墙上，您都会遇到这样的日子，即使是最简单的任务也会暗示您（这是那些日子之一！）。

所以我有一个类别列表

```
CategoryID, CategoryName, ParentID, Lineage
1           Root Category,  NULL,   /1/
2           Child Category, 1,      /1/2/
3           Grandchild,     2,      /1/2/3 
4           Second Root,    NULL,   /4/
5           Second Child    2,      /1/2/5/ 
```

我创建了一个类来保存它，它包含上述所有值，加上

```
ICollection<Category> Children; 
```

这应该创建树

```
Root Category 
`-- Child category
|   `-- Grandchild
`-- Second Child
Second Root 
```

因此，我尝试在给定 Lineage 和元素的情况下向树中添加一个新类别，我将 lineage 转换为队列并将其放入此函数中。

```
public void AddToTree(ref Category parentCategory, Category newCategory, Queue<Guid>lineage)
    {

        Guid lastNode = lineage.Dequeue();

        if(lastNode == newCategory.CategoryId)
        {
            parentCategory.Children.Add(newCategory);
            return;
        }

        foreach (var category in parentCategory.Children)
        {
            if(category.CategoryId == lastNode)
            {
                this.AddToTree(ref category, newCategory, lineage);
            }
        }
    } 
```

现在我遇到了两个问题

1.  自引用并不太令人担忧（它被设计为递归），但由于`foreach`循环中的类别是一个本地实例化的变量，我不能通过引用来制作它并将其用作指针。

2.  我相信一定有比这更简单的方法！

任何指针都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:30:16.950

这段代码似乎是您正在寻找的，但没有任何自我引用和递归 - 它沿着给定的沿袭穿过树，并在沿袭的末尾插入给定的类别。几个假设：

*   树存储为其根的列表
*   血统是一个字符串

    ```
    void AddCategory(List<Category> roots, Category categoryToAdd, string lineage)
    {
        List<Guid> categoryIdList = lineage.Split('/').Select(id => new Guid(id)).ToList();

        List<Category> currentNodes = roots;
        Category parentNode = null;

        foreach (Guid categoryId in categoryIdList)
        {
            parentNode = currentNodes.Where(category => category.CategoryId == categoryId).Single();
            currentNodes = parentNode.Children;
        }

        parentNode.Children.Add(categoryToAdd);
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:15:29.007

您似乎根本不需要“参考”。您没有修改对象引用，只是修改它的状态。

编辑：如果您必须使用 ref，则使用临时变量，例如...

```
 foreach (var temp in parentCategory.Children)
        {
            Category category = temp;
            if (category.CategoryId == lastNode)
            {
                this.AddToTree(ref category, newCategory, lineage);
            }
        } 
```

但即使这样，参考也没什么用。AddToTree 不会修改参考值。它修改引用对象的状态。也许您有更多我们需要查看的代码。

如果您的意图是修改父项中的子引用，那么您将遇到 ICollection Children 对象的问题。您不能在 ICollection 中的元素上使用“ref”来实际替换引用。您必须删除子引用并添加一个新引用。

# java - 在 Struts 2 中使用 ModelDriven

> ID：11758643
> 
> 赞同：1
> 
> 时间：2012-08-01T11:54:56.197
> 
> 标签：java, jsp, struts, model-driven, struts-action

我正在使用 Hibernate、Struts 2 和 Spring 开发一个项目，但我的问题在于 Struts。

我创建了 3 个扩展类，`ActionSupport`并`ModelDriven`在所有这些类中为同一个类实现。我已经实现了一些在调用动作时要执行的方法。

类的结构就像

**Class1Action.java：**

```
public class Class1Action extends ActionSupport implements ModelDriven<ModelDrivenClass> {

     private ModelDrivenClass modelDrivenClass;

     // getter and setter for modelDrivenClass

     public String methodName() {

     System.out.println("Entrou!");

        return SUCCESS;

    }

    @Override
    public Sensor getModel() {
        return getSensor();
    }

} 
```

在`struts.xml`我使用下一个结构创建了 3 个动作

**struts.xml：**

```
<action name="actionName1" method="methodName" class="Class1Action">
   <interceptor-ref name="validation">
      <param name="excludeMethods">methodName</param>
   </interceptor-ref>
   <result name="success" >success.jsp</result>
   <result name="input" >input.jsp</result>
</action> 
```

除此之外，我还有一个带有 3 个按钮的 JSP，它们引用了不同的 Struts 动作，还有几个字段表示来自 3 个动作类中使用的模型驱动类的字段，以及`<s:push>`标签内的所有字段。

问题是当我填充字段并且单击任何按钮后，字段中的数据丢失。

我试图删除从验证中排除方法的 3 条 Struts 行，但不是字段为空，而是第二次按下相同的按钮，他返回一个输入并重定向到 input.jsp。

下一个代码来自`success.jsp`，即起始页：

**成功.jsp：**

```
<form method="post" >

    <s:push value="modelDrivenClass">

        <s:textfield label="FieldLabel1" name="modelDrivenClassAttribute1" />
        <s:textfield label="FieldLabel2" name="modelDrivenClassAttribute2" />
        <s:textfield label="FieldLabel3" name="modelDrivenClassAttribute3" />
        <s:textfield label="FieldLabel4" name="modelDrivenClassAttribute4" />
        <s:textfield label="FieldLabel5" name="modelDrivenClassAttribute5" />

    </s:push>

<s:submit action="actionName1" name="Submit1" value="Submit1" />
<s:submit action="actionName2" name="Submit2" value="Submit2" />
<s:submit action="actionName3" name="Submit3" value="Submit3" />
</form> 
```

我不知道这是否是正确的方法，但是当我只使用一个类实现`ModelDriven`并且这个类具有所有 3 种方法时，我让它工作了。

我只是在尝试这种方式，因为我想让我的代码清晰，并且不要只在一个类中包含所有方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T09:18:13.303

如果您将旧的 Struts 代码迁移到新代码，则使用`ModelDriven`动作类的方法非常有用，因此它简化了`FormBean`.

而在较新的 Struts 2 中，如果您可以使用与模型相关联的`ModelDriven`动作 bean，则不必使用它的名称作为前缀。`top``valueStack`

**注意：**在操作配置中覆盖拦截器配置时，`defaultStack`消失。因此，最好创建自己的堆栈或引用，至少`basicStack`确保调用必要的拦截器。在您的情况下是[`modelDriven`拦截器](https://struts.apache.org/core-developers/model-driven-interceptor.html)。

如果您在堆栈上使用此拦截器，它会将模型推送到操作前面，因此您不需要`s:push`在结果中使用它。

模型对象应该初始化为模型类的实例，并由模型的getter返回。在验证模型的字段时，还可以考虑使用访问者验证器。

拥有三个在调用之间共享数据的操作需要准备一个模型，[`Preparable`](https://struts.apache.org/maven/struts2-core/apidocs/com/opensymphony/xwork2/Preparable.html)用于填充字段`session`或使用会话对象引用为字段提供默认值以保存它们。

**注意：**使用`prepare`需要更改拦截器调用的顺序以在填充模型之前推送模型。

# intellij-idea - 如何在 IntelliJ IDEA 中从磁盘中删除文件？

> ID：11758644
> 
> 赞同：7
> 
> 时间：2012-08-01T11:54:56.260
> 
> 标签：intellij-idea

如何在 IntelliJ IDEA 中从磁盘中删除文件（取消链接）？

我指的是当前在编辑器选项卡中打开的文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-01T12:16:56.123

`Navigate`| `Select In...`( `Alt`+ `F1`) | **项目视图**，`Del`或从上下文菜单中**删除。**

或使用`Refactor`| **安全删除**( `Alt`+ `Del`)。

# oracle - 在case语句中分配多行

> ID：11758646
> 
> 赞同：0
> 
> 时间：2012-08-01T11:54:58.600
> 
> 标签：oracle

我有这个查询

```
select devlocview.ENTERPRISENAME
FROM AlarmDeviceView alrmDevView
INNER JOIN devicelocationview devLocView 
    ON devlocview.oid=alrmdevview.deviceoid
LEFT OUTER JOIN DEVICEGROUPVIEW devGrpView 
    ON devlocview.oid=devgrpview.deviceoid
LEFT OUTER JOIN RackCapacityView rackCapView 
    ON devlocview.RACKID=rackCapView.oid
WHERE 
(
    alrmdevview.createddate = ( select max(alview.createddate) 
                                from alarmdeviceview alview 
                                WHERE alview.alarmoid=alrmdevview.alarmoid) 
    or alrmdevview.createddate IS NULL
)
AND devlocview.ENTERPRISENAME='Enterprise1'
AND devlocview.buildingname in (
CASE
WHEN $p{building} IS  not NULL THEN $p{building}
WHEN $p{building} IS  NULL THEN (select buildingname from cdmr.devicelocationview)
END
) 
```

在这里，这部分`"select buildingname from cdmr.devicelocationview"`返回多行，因此我得到

> 异常为 01427\. 00000 - “单行子查询返回多于一行”

根据要求，我想分配多个建筑物时`$p{building} is null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:10:07.303

A`CASE`是一个标量表达式，它必须计算为一个标量值。您不能使用它来返回多行集。

我见过的根据输入值是否为 NULL 来改变条件的最常见习语对于您的示例如下所示：

```
AND (  ( $p{building} IS NOT NULL AND devlocview.buildingname = $p{building} )
       OR
       ( $p{building IS NULL AND devlocview.buildingname IN (SELECT buildingname FROM  cdmr.devicelocationview ) )
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:43:53.447

尝试

```
AND 1 = case 
         when $p{building} IS  not NULL 
         and devlocview.buildingname = $p{building}
         then 1
         when $p{building} IS NULL
         AND  devlocview.buildingname in (select buildingname from cdmr.devicelocationview)
         then 1
         else 0
        end 
```

代替

```
when devlocview.buildingname in (
CASE
WHEN $p{building} IS  not NULL THEN $p{building}
WHEN $p{building} IS  NULL THEN (select buildingname from cdmr.devicelocationview)
END
) 
```

# objective-c - 向标签栏添加额外的标签按钮

> ID：11758648
> 
> 赞同：0
> 
> 时间：2012-08-01T11:55:02.940
> 
> 标签：objective-c, ios, xcode

我在 XCode 中启动了一个新的选项卡式应用程序，我想知道向给定选项卡栏添加额外按钮的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:03:37.707

根据 Xcode 4.3.3，当我们创建选项卡式应用程序时，它会提供两个 ViewController。因此，如果您想添加更多内容，可以进入 AppDelegate，您可以看到

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

您可以看到在 tabBarController 中添加了两个 ViewController，您可以创建新的并添加 init，因为添加了 1 或 2。尝试 .......

# iphone - 是否可以在 iPhone 中调用 ColdFusion Web 服务

> ID：11758650
> 
> 赞同：0
> 
> 时间：2012-08-01T11:55:08.797
> 
> 标签：iphone, xcode, web-services, coldfusion

我在 ColdFusion 中创建了一个 Web 服务。我可以从 C# 使用动态参数成功调用此服务。但是，我无法从 iPhone Xcode 调用此服务。响应显示操作失败错误。那么我怎样才能从 Xcode 使用这个服务呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:59:28.247

我们有不止一个应用程序在 iPhone 上通过 Xcode 使用 Coldfusion 组件。主要消耗财务数据。我相信我们使用如下调用：

```
action.cfc?method=blah&param1=blah&param2=blah 
```

使用 XML 或 json 的返回格式 - 所以在它的 Xcode 端，我们使用其中一种技术的解析器来反序列化对象。

# android - 使用 android 4 浏览器自动启动 html5 视频

> ID：11758651
> 
> 赞同：15
> 
> 时间：2012-08-01T11:55:09.540
> 
> 标签：android, html5-video, android-4.0-ice-cream-sandwich, android-4.4-kitkat, android-browser

我想使用 android 4 冰淇淋三明治浏览器自动启动 android html5 视频。我尝试了许多 java 脚本函数和 html5 视频的自动缓冲自动播放标签。但没有任何效果。我通过 android 应用程序在 webview 中启动 android chrome 客户端，该客户端应该能够自动启动视频。单击播放按钮时，视频播放但不自动播放。

它在android中受到限制吗？需要注意的另一件事是，即使我们单击播放按钮并且视频正在播放和完成，chromeClient 中也不会调用回调方法。

我用谷歌搜索并发现在 Android 4 上这个问题没有积极的结果。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-06T09:51:48.637

似乎 Android 4+ 将`play()`方法的要求更改为需要用户交互。如果您`play()`从用户事件处理程序（例如`touchstart`或`mousedown`）中触发，则只要在同一个事件循环中运行视频，您就可以播放视频。

这意味着您不应该使用异步触发器来调用`play()`，而是在同一个事件处理程序中调用 play 而不使用`setTimeout()`等，所以像延时播放这样的东西是不可能的。

一种方法是在 Android 4 上使用与 iOS 中相同的技巧——使用第一个用户交互事件`play()`和`pause()`视频。这将使视频能够在以后进行操作，因为您是在用户启动的操作期间播放的。成功启动视频后，您可以随时调用播放方法，无论调用是否在事件处理程序循环内进行。

**编辑：**这是适用于 HTC 和三星的示例代码，但不适用于 Galaxy Nexus 4.1（需要用户交互才能播放）：

```
var myVideo = document.getElementById('myvideo');

myVideo.addEventListener('canplay', function() {
  myVideo.play();
});

myVideo.load();
myVideo.play(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T21:03:53.620

Android实际上有一个API！该方法是 setMediaPlaybackRequiresUserGesture()。经过大量研究视频自动播放和大量来自 SO 的黑客攻击后，我发现了它。这是布莱尔范德霍夫的一个例子：

```
package com.example.myProject;

import android.os.Bundle;
import org.apache.cordova.*;
import android.webkit.WebSettings;

public class myProject extends CordovaActivity 
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.init();
        // Set by <content src="index.html" /> in config.xml
        super.loadUrl(Config.getStartUrl());
        //super.loadUrl("file:///android_asset/www/index.html");

        WebSettings ws = super.appView.getSettings();
        ws.setMediaPlaybackRequiresUserGesture(false);
    }
} 
```

适用于 Android 4.4.4

# html - 如何在不提示地理位置共享的情况下在 html5 中跟踪地理位置

> ID：11758652
> 
> 赞同：1
> 
> 时间：2012-08-01T11:55:14.407
> 
> 标签：html

简短：如何在不提示地理位置共享的情况下跟踪 html5 中的地理位置 长：我想开发一个无需用户提示即可跟踪用户位置的网站，可以通过任何方式（比如我可以使用电话间隙作为 gps 坐标）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:04:51.113

在共享位置之前，浏览器会显示地理位置警告。这是一项安全措施，无法绕过。

但是，您可以使用 API 从 IP 地址获取大致（有时非常不准确）的位置。有很多可用的，只需尝试在线搜索。

# excel - 将 Excel 日期导入 Matlab

> ID：11758656
> 
> 赞同：0
> 
> 时间：2012-08-01T11:55:37.747
> 
> 标签：excel, matlab, date

我在与其他一些数字相关联的 Excel 文件中有许多日期，然后我想在 Matlab 中导入这些数据。

例如，我在 Excel 上有 5/17/06，在 Matlab 中，当我尝试导入它时，它显示为 0.0490196078431373。

如何将日期正确导入 matlab？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:29:23.887

这是您需要做的事情的一个想法。

```
[A B C] = xlsread('C:\Users\Admin\Desktop\test.xlsx') %This is just a dummy file I made to test with. 
```

B 将包含来自 excel 文件的数据。非常重要的是要注意，它将与 excel 中的布局完全相同。这就是我在虚拟文件中的内容：

```
5/17/06     asd     12
5/18/06     s       sd
5/19/06     asd     asd
5/20/06     dsd     sd
5/21/06     e2      asd 
```

因此，生成的矩阵`B`将是一个 3 列和 5 行的元胞数组。然后，您可以将日期提取到一个单独的矩阵中，如下所示：

```
date = B(:,1) 
```

现在`date`是包含您之前拥有的日期的单元格向量。然后，您可以根据需要应用其他函数来转换为 char 数组（字符串）等。

# gwt - 无法在 Netbeans 7 上运行 gwt hello world

> ID：11758657
> 
> 赞同：2
> 
> 时间：2012-08-01T11:55:38.377
> 
> 标签：gwt, netbeans-7

再会！我从 gwt 2.5 开始。我已经在 NetBeans_7 上安装了 org-netbeans-modules-gwt4nb-2.10.5.nbm。在我使用 GlassFish 3+ 在 NetBeans_7 中构建并运行了一个简单的 gwt 应用程序（[在此处输入链接描述](http://netbeans.org/kb/docs/web/quickstart-webapps-gwt.html)）后，默认浏览器（firefox_14）启动了一个相应的页面并输出空页面。有什么问题？我还在 firefox_14 上安装了 gwt dev 插件，但我得到了相同的结果。
主要入口点

```
...
public class MainEntryPoint implements EntryPoint {

    /**
     * Creates a new instance of MainEntryPoint
     */
    public MainEntryPoint() {
    }

    /**
     * The entry point method, called automatically by loading a module that
     * declares an implementing class as an entry-point
     */
    @Override
    public void onModuleLoad() {
        final Label label = new Label("Hello, GWT!!!");
        final Button button = new Button("Click me!");

        button.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                label.setVisible(!label.isVisible());
            }
        });

        RootPanel.get().add(button);
        RootPanel.get().add(label);
    }
}
... 
```

HelloGWT.html

```
<!doctype html>
<!--
The DOCTYPE declaration above will set the browser's rendering engine into
"Standards Mode". Replacing this declaration with a "Quirks Mode" doctype may
lead to some differences in layout.
-->
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta name='gwt:module' content='gwt.intro.Main=gwt.intro.Main'>
        <title>Main</title>
    </head>
    <body>
        <script type="text/javascript"  src="gwt.intro.Main/gwt.intro.Main.nocache.js"></script>
    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>
    </body>
</html> 
```

我收到以下警告：

1.  GWT 编译客户端代码。 **警告**：“com.google.gwt.dev.GWTCompiler”已弃用，将在未来版本中删除。请改用“com.google.gwt.dev.Compiler”。（要禁用此警告，请将 -Dgwt.nowarn.legacy.tools 作为 JVM 参数传递。）；
2.  计算“com.google.gwt.useragent.client.UserAgentAsserter”的所有可能的重新绑定结果重新绑定 com.google.gwt.useragent.client.UserAgentAsserter 检查规则 **[WARN]**检测到与“com.google.gwt.editor.client”相关的警告.SimpleBeanEditorDriver'。类路径上是否有validation-api-.jar 和validation-api--sources.jar？指定 -logLevel DEBUG 以查看所有错误。 **[警告]**延迟绑定规则中指定的未知类型“com.google.gwt.editor.client.SimpleBeanEditorDriver”

一旦我运行该应用程序，我就会从服务器收到以下消息：http: [//postimage.org/image/uf6lcczjb/](http://postimage.org/image/uf6lcczjb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:22:50.847

打开 gwt.properties 文件并根据需要更改 gwt.output.dir 条目（/ 后跟条目 gwt.module 的值）。梅齐亚诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:13:58.830

GWT4NB 插件似乎使用旧的 GWT 编译器类，这就是您收到警告的原因。然而，这不应该是一个问题。404 错误表明缺少某些内容，或者您​​将浏览器指向错误的 URL。您的主机页面的名称必须与 URL 中的页面名称相匹配。由于您的主机页面名为*HelloGWT.html*，因此请确保您打开的 URL 如下所示：

```
http://127.0.0.1:8080/HelloGWT.html 
```

对于最终构建，我建议您使用 Ant 或 Maven。查看官方 GWT 文档[Compile and run in production mode](https://developers.google.com/web-toolkit/gettingstarted#compile)和[Deploy a GWT Application](https://developers.google.com/web-toolkit/doc/latest/DevGuideDeploying)。

# ios5 - 在 UISplitview 控制器中隐藏和显示 Masterview 控制器

> ID：11758658
> 
> 赞同：0
> 
> 时间：2012-08-01T11:55:38.937
> 
> 标签：ios5, uisplitviewcontroller

我对 iPad 应用程序开发非常陌生。在我的应用程序中，我需要显示一个拆分视图控制器。在一种情况下，我需要隐藏和显示 MasterView 控制器并 100% 显示 Details 视图控制器。可能吗？请帮我。

在此先感谢，钱德拉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:18:23.637

有可能，您可以在此处找到更多详细信息：

[http://useyourloaf.com/blog/2011/11/16/mail-app-style-split-view-controller-with-a-sliding-master-v.html](http://useyourloaf.com/blog/2011/11/16/mail-app-style-split-view-controller-with-a-sliding-master-v.html)

# javascript - 根据选择的选项值撰写链接

> ID：11758659
> 
> 赞同：1
> 
> 时间：2012-08-01T11:55:41.880
> 
> 标签：javascript, html, forms, html-select

我有 2 个下拉菜单，我需要用它的值组成一个链接。

这是代码：

```
<form id="dropdown1">
    <select id="linha">
        <option value="G12">Option 1</option>
        <option value="G11">Option 2</option>
        <option value="H89">Option 3</option>
    </select>
    <select id="dia">
        <option value="all">Every day</option>
        <option value="work">working days</option>
        <option value="sat">saturday</option>
        <option value="sun">sunday</option>
    </select>
</form> 
```

我需要 JavaScript 中的一些东西来“组合”一个链接`http://somewebsite.com/*selected_linha_value*/*selected_dia_value*`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:09:44.853

```
 <select name="dia" id="dia">
      <option value="all">Every day</option>
      <option value="http://stackoverflow.com">working days</option>
      <option value="http://anotherSite.com">saturday</option>
      <option value="http://anotherSite2.com">sunday</option>
    </select>
    <script>
    $("#dia").change(function () {
              var selctedValue = "";
              $("select option:selected").each(function () {
                    selctedValue += $(this).val();
window.location.href = selctedValue;

    });
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:06:51.573

我想你需要这样的东西。

```
<script type="text/javascript">
params = getParams();
var name1 = unescape(params["linha"]);
switch(name1)
{
case "g12":
window.location = "http://www.google.com"
}

function getParams(){
var idx = document.URL.indexOf('?');

var params = new Array();
if (idx != -1) {
var pairs = document.URL.substring(idx+1, document.URL.length).split('&');
for (var i=0; i<pairs.length; i++){
nameVal = pairs[i].split('=');
params[nameVal[0]] = nameVal[1];
}
}
return params;
} 
```

它不是完整的代码。它会给你一些想法。如果您有任何疑问，请发表评论

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T11:59:55.833

看看：http: [//jsfiddle.net/ERHhA/](http://jsfiddle.net/ERHhA/)

您可以使用[jQuery val()](http://api.jquery.com/val/)来获取选择框的值。然后只需将这些值附加到基本 url。

`var url = "http://somewebsite.com/" + $('#linha').val() + "/" + $('#dia').val();`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T12:10:25.633

这个如何？

```
function make_url(){
    var linha = document.getElementById('linha').value;
    var dia = document.getElementById('dia').value;
    var url=window.location.href;
    var pos=url.indexOf('?');
    if (pos>-1){
        url = url.substr(0,pos);
    }
    //alert(url + '?linha='+linha+'&dia='+dia); return;
    document.location.href = url + '?linha='+linha+'&dia='+dia;
} 
```

[小提琴](http://jsfiddle.net/JbcUF/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-13T04:42:41.590

HTML

```
<div class="container">
    <select class="small-nav">
    <option value="" selected="selected">Go To</option> 
    <option value="http://whiterabbitexpress.com">Services</option>
    <option value="http://shop.whiterabbitjapan.com">Shop</option>
</div><!-- container --> 
```

脚本：

```
$(".small-nav").change(function() {
        window.location = $(this).find("option:selected").val();
    }); 
```

# c# - 如何在 MonoTouch 中检测 iPhone 是否处于静音模式

> ID：11758660
> 
> 赞同：0
> 
> 时间：2012-08-01T11:55:42.940
> 
> 标签：c#, objective-c, ios, xamarin.ios, mute

我找到了objective-c 的答案，但不知道如何将它翻译成c# for monotouch。

此外，我在 Xamarian 教程或参考中找不到任何内容。

有人可以举例说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:16:54.890

我认为这是不可能的（自 iOS 5 起），请参见此处：

[使用 AVAudioPlayer 检测 iPhone 的响铃/静音/静音开关不起作用？](https://stackoverflow.com/questions/6901363/detecting-the-iphones-ring-silent-mute-switch-using-avaudioplayer-not-worki)

一般来说，Apple 不允许访问此类内容。

# c# - 代码优先实体在数据库中不相关

> ID：11758669
> 
> 赞同：1
> 
> 时间：2012-08-01T11:56:08.797
> 
> 标签：c#, ef-code-first, entity-framework-4.3

我是 Code First 的新手，并尝试构建我的数据模型。一切都很好，除了一个问题，我尝试映射接下来的事情：

```
public class Something
{
       ...
       public virtual Layer Layer1 { get; set; }
       public virtual Layer Layer2 { get; set; }
       public virtual Layer Layer3 { get; set; }
       ...
}

public class Layer
{
       ...
       public virtual Something Something { get; set; }
       ...
} 
```

Something 类映射正常，但是从 Layer 到S​​omething 的关系根本不映射，在数据库表中有null，我几乎尝试了所有东西，现在我不知道......为什么Layer 不能引用到某事？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:31:03.463

1.  你有三个FK，所以你需要Something类中的三个Layer类型的属性，以及Layer类中Something类型的三个属性。您不能以某种方式将 Layer 类中所有相关的Something 收集到一个属性中。
2.  由于两个表之间有多个 FK，因此您需要指定 id，并使用数据注释将 id 与导航属性连接起来。
3.  我假设'正常' FK's，所以这意味着层记录可以被多个Something's引用。如果是这种情况，那么 Layer 类中的 Something-properties 将需要是集合。

总之，这会导致：

```
public class Something {
        public int SomethingId { get; set; }
        [ForeignKey("Layer1")]
        public int Layer1Id { get; set; }
        [ForeignKey("Layer2")]
        public int Layer2Id { get; set; }
        [ForeignKey("Layer3")]
        public int Layer3Id { get; set; }
        [ForeignKey("Layer1Id")]
        public Layer Layer1 { get; set; }
        [ForeignKey("Layer2Id")]
        public Layer Layer2 { get; set; }
        [ForeignKey("Layer3Id")]
        public Layer Layer3 { get; set; }
    }

    public class Layer {
        public int LayerId { get; set; }
        [InverseProperty("Layer1")]
        public Something Something1 { get; set; }
        [InverseProperty("Layer2")]
        public Something Something2 { get; set; }
        [InverseProperty("Layer3")]
        public Something Something3 { get; set; }
    } 
```

# php - 从 php 返回 mySQL 错误 - 错误时不返回任何内容

> ID：11758671
> 
> 赞同：0
> 
> 时间：2012-08-01T11:56:12.900
> 
> 标签：php, mysql

我有一个执行一系列插入查询的 php 文件。如果任何查询产生错误，我想返回错误消息和查询字符串并回滚所有查询

到目前为止，我有这个：

```
mysql_query("SET autocommit=0;");
mysql_query("BEGIN;");
$sql ="SOME MALFORMED QUERY";

mysql_query($sql);

if(mysql_error()){
    mysql_query("rollback;");
    $arr = array("returnCode" => 0, "returnMessage" => "Query failed: " .$sql. mysql_error());
    echo json_encode($arr);
    die();
} 
```

但是，在 javascript 中，我在返回消息 JSON 字段中看到的所有返回都是“查询失败：”。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:33:37.933

问题在于您的`ROLLBACK`查询：如手册中所述，[mysql_error](http://fr.php.net/mysql_error)从**最后一个**MySQL 函数返回错误文本。由于您再次使用了 mysql_query，因此之前的错误丢失了。

我建议这段代码：

```
mysql_query("SET autocommit=0;");
mysql_query("BEGIN;");
$sql ="SOME MALFORMED QUERY";

mysql_query($sql);
$error = mysql_error();
if($error){
    mysql_query("rollback;");
    $arr = array("returnCode" => 0, "returnMessage" => "Query failed: $sql, Error: $error");
    echo json_encode($arr);
    die();
} 
```

`ROLLBACK`在发生错误的情况下执行似乎没有用。该[手册](http://dev.mysql.com/doc/refman/5.5/en/commit.html)解释说：回滚可能是一个缓慢的操作，可能会**在用户没有明确要求的情况下隐式发生（例如，发生错误时）**

那么下面的代码就足够了：

```
mysql_query("SET autocommit=0;");
mysql_query("BEGIN;");
$sql ="SOME MALFORMED QUERY";

mysql_query($sql);
if(mysql_error()){
    $arr = array("returnCode" => 0, "returnMessage" => "Query failed: $sql, Error: ".mysql_error());
    echo json_encode($arr);
    die();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:59:54.493

可能表达式`"Query failed: " .$sql. sql_error()`格式不正确。正确的形式是：

```
"Query failed: " . $sql . mysql_error() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:46:15.230

我会使用 PDO 及其内置的事务支持。

```
<?php

// create PDO instance as $db here
// don't forget to set error mode to 'exception'

try {
    $db->beginTransaction();
    // do your queries here, i.e. $db->exec('BOGUS');
    $db->commit();
}
catch (Exception $e) {
    $db->rollBack();
    echo 'Error: ' . $e->getMessage();
} 
```

当它抛出一个异常消息时，它会给你任何遇到的错误作为异常消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T11:58:55.053

不应该

`$arr = array("returnCode" => 0, "returnMessage" => "Query failed: " .$sql. sql_error());`

是

`$arr = array("returnCode" => 0, "returnMessage" => "Query failed: " .$sql. **mysql_error()**);`

# spring-batch - Spring批处理FlatFileItemReader读取多个文件

> ID：11758672
> 
> 赞同：5
> 
> 时间：2012-08-01T11:56:20.127
> 
> 标签：spring-batch

根据[春季批处理文档](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html)，由于重新启动问题，他们不建议使用 MuliResourceItemReader，并建议在每个文件夹中使用一个文件。

> “应该注意的是，与任何 ItemReader 一样，添加额外的输入（在这种情况下是文件）可能会在重新启动时导致潜在的问题。建议批处理作业使用它们自己的单个目录，直到成功完成。”

如果我有一个具有以下结构的文件夹 dest/< `timestamp`>/file1.txt, file2.txt

如何配置 FlatFileItemReader 以读取路径中每个文件夹的模式文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:00:27.333

我更喜欢[Spring Integration](http://www.springsource.org/spring-integration/)项目来从目录中读取文件，因为轮询目录不是 Spring Batch Framework 的业务。

在最基本的场景中，Spring Integration 将轮询目录中的文件，并为每个文件运行一个以文件名作为参数的作业。这将从您的批处理作业中省略文件轮询逻辑。

我应该推荐[Dave Syer的这篇](http://blog.springsource.org/author/dsyer/)[优秀文章](http://blog.springsource.org/2010/02/15/practical-use-of-spring-batch-and-spring-integration/)，了解集成这两种技术的基本概念。仔细查看处理[FileToJobLaunchRequestAdapter的部分](http://static.springsource.org/spring-batch-admin/apidocs/org/springframework/batch/admin/integration/FileToJobLaunchRequestAdapter.html)

[该适配器的源代码](https://github.com/SpringSource/spring-batch-admin/blob/master/spring-batch-admin-manager/src/main/java/org/springframework/batch/admin/integration/FileToJobLaunchRequestAdapter.java)也将有助于理解其内部结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T10:14:43.480

我也有一组类似的要求来读取多个文本/csv 文件，并通过使用 org.springframework.batch.item.file.MultiResourceItemReader 来实现。

下面的链接中提供了详细的实现。

[http://parameshk.blogspot.in/2013/11/spring-batch-flat-file-reader-reads.html](http://parameshk.blogspot.in/2013/11/spring-batch-flat-file-reader-reads.html)

# ruby-on-rails - 需要在完成 resque 作业时进行部分渲染

> ID：11758675
> 
> 赞同：0
> 
> 时间：2012-08-01T11:56:33.220
> 
> 标签：ruby-on-rails, render

我正在使用rails 2和resque。我想在 resque 作业完成执行时呈现部分内容。我知道我们可以在 lib 文件中使用`render`, `redirect`etc 方法。

对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:22:42.893

承认您想要的是从您的 resque 作业中获取部分或 erb 文件的渲染输出，您可以执行以下操作：

```
require 'erb'

weekday = Time.now.strftime('%A')
simple_template = "Today is <%= weekday %>."

# you can also read from a file like so ERB.new(File.read(<file name here>))
renderer = ERB.new(simple_template)
puts output = renderer.result() 
```

你可以在这里阅读更多[http://www.stuartellis.eu/articles/erb/](http://www.stuartellis.eu/articles/erb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T01:43:40.100

在过去的 3 天里，我一直在寻找解决方案。

终于在这里找到了..

[http://www.rigelgroupllc.com/blog/2011/09/22/render-rails3-views-outside-of-your-controllers/](http://www.rigelgroupllc.com/blog/2011/09/22/render-rails3-views-outside-of-your-controllers/)

这也适用于rails 4！

```
av = ActionView::Base.new()
av.view_paths = ActionController::Base.view_paths
av.extend ApplicationHelper #or any other helpers your template may need
body = av.render(:template => "/orders/receipt.html.erb",:locals => {:order => order}) 
```

但问题是询问 Rails 2 解决方案，上面的链接提供了此代码。

```
body = ActionView::Base.new(Rails::Configuration.new.view_path).render(:file => "/orders/receipt.html.erb",:layout => false,:locals=>{:order=>order}) 
```

# java - 解决maven项目中的多个SLF4J绑定

> ID：11758676
> 
> 赞同：19
> 
> 时间：2012-08-01T11:56:32.903
> 
> 标签：java, maven, dependencies, slf4j, logback

这个问题听起来像是 SE 网站上的一堆[类似问题](https://stackexchange.com/search?q=maven%20multiple%20SLF4J)，所以我应该非常详细地说明我的问题。所以，这里是项目的最小`pom.xml`：

```
<dependencies>
     <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.6</version>
    </dependency>

   <dependency>
        <groupId>org.codehaus.gmaven.runtime</groupId>
        <artifactId>gmaven-runtime-1.7</artifactId>
        <version>1.3</version>
   </dependency>

</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <mainClass>org.shabunc.App</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这是maven生成的依赖树。

`mvn dependency:tree -Dverbose -Dincludes=org.slf4j`：

```
[INFO] [dependency:tree {execution: default-cli}]
[INFO] org.shabunc:logdebug:jar:1.0-SNAPSHOT
[INFO] \- ch.qos.logback:logback-classic:jar:1.0.6:compile
[INFO]    \- org.slf4j:slf4j-api:jar:1.6.5:compile 
```

现在，让我们删除排除并再次检查依赖项。我们会得到：

```
 [INFO] org.shabunc:logdebug:jar:1.0-SNAPSHOT
[INFO] +- ch.qos.logback:logback-classic:jar:1.0.6:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.6.5:compile
[INFO] \- org.codehaus.gmaven.runtime:gmaven-runtime-1.7:jar:1.3:compile
[INFO]    +- (org.slf4j:slf4j-api:jar:1.5.10:compile - omitted for conflict with 1.6.5)
[INFO]    +- org.codehaus.gmaven.feature:gmaven-feature-support:jar:1.3:compile
[INFO]    |  \- (org.slf4j:slf4j-api:jar:1.5.10:compile - omitted for conflict with 1.6.5)
[INFO]    \- org.codehaus.gmaven.runtime:gmaven-runtime-support:jar:1.3:compile
[INFO]       +- (org.slf4j:slf4j-api:jar:1.5.10:compile - omitted for conflict with 1.6.5)
[INFO]       \- org.sonatype.gshell:gshell-io:jar:2.0:compile
[INFO]          \- org.sonatype.gossip:gossip:jar:1.0:compile
[INFO]             \- (org.slf4j:slf4j-api:jar:1.5.8:compile - omitted for conflict with 1.6.5) 
```

因此，正如我们所看到的，一切都按预期工作，并且实际上排除了相互冲突的依赖项。但问题是，即使排除**了**依赖项，我在编译和调用时仍然会收到以下消息`mvn exec:java`：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/home/shabunc/.m2/repository/ch/qos/logback/logback-classic/1.0.6/logback-classic-1.0.6.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/home/shabunc/.m2/repository/org/sonatype/gossip/gossip/1.0/gossip-1.0.jar!/org/slf4j/impl/StaticLoggerBinder.class] 
```

问题是：为什么我仍然看到这个警告，以及在执行过程中只有一个版本的 slf4j 应该做些什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T12:33:05.407

您的问题不是获得两个 SLF4J API 副本，而是获得两个不同的 SLF4J 实现。您需要排除 Gossip，而不是 API。这意味着类似：

```
<dependency>
    <groupId>org.codehaus.gmaven.runtime</groupId>
    <artifactId>gmaven-runtime-1.7</artifactId>
    <version>1.3</version>
    <exclusions>
      <exclusion>
        <groupId>org.sonatype.gossip</groupId>
        <artifactId>gossip</artifactId>
      </exclusion>
    </exclusions>
</dependency> 
```

Gossip 依赖项由`gshell-io`; 希望它实际上不需要 Gossip，它只需要一个 SLF4J SLF4J，您以 Logback 的形式提供它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T12:21:33.007

你需要做的就是添加这样的东西

```
compile "org.sonatype.gossip:gossip:1.0" {
    exclude module:'slf4j-jcl'
    exclude module:'slf4j-log4j12'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T12:09:27.193

我想你需要玩依赖范围，请参阅：[http ://www.mojohaus.org/exec-maven-plugin/java-mojo.html](http://www.mojohaus.org/exec-maven-plugin/java-mojo.html)

> `classpathScope`- 定义传递给插件的类路径的范围。根据您的需要设置为编译、测试、运行时或系统。

# file - 在其他命名空间中应用宏

> ID：11758680
> 
> 赞同：1
> 
> 时间：2012-08-01T11:56:44.943
> 
> 标签：file, clojure, macros, namespaces, dsl

我有类似 dsl 的东西数据的文件。在那里，我想删除一些基于 s-expression 的信息。我有一些处理此类文件的跑步者。

跑步者.clj

```
 (require '[data :as d])
 ;processing 
```

数据.clj

```
 (ns  data)
 (defmacro data [s] (println (str s)))

 ;dsl like stuff goes here
 (data "foo") 
```

如何从 defmacro 等数据文件中删除非 dsl？

也欢迎任何具有类似解决方案的源代码链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:17:05.537

```
; dsl.clj
(ns dsl)
(defmacro data ...)

; data.clj
(ns data
  (:require dsl))

(dsl/data ...) 
```

或与`use`：

```
; data.clj
(ns data
  (:use [dsl :only (data)]))

(data ...) 
```

# visual-studio - 没有 Visual Studio 2010 Ultimate 的负载测试？

> ID：11758681
> 
> 赞同：1
> 
> 时间：2012-08-01T11:56:48.053
> 
> 标签：visual-studio, visual-studio-2010, load-testing

不购买终极版是否可以获得VS 2010 Ultimate的负载测试功能？MS 是否按点菜出售功能包？我很难找到一个明确的答案，所以希望这里有人能澄清一下。

除此之外，但仍在我的问题范围内......是否有类似于 VS 2010 Ultimate 提供的第 3 方负载测试工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:02:18.907

有很多可用的负载测试工具 - 搜索“负载测试软件”。我会拉皮条我们的免费版本：[Load Tester LITE](http://www.webperformance.com/load-testing/free-load-tester-lite.html)。

# android - android中的动态textview显示

> ID：11758684
> 
> 赞同：0
> 
> 时间：2012-08-01T11:57:04.100
> 
> 标签：android, textview

在我的应用程序中，我在列表视图中显示来自数据库的数据列表。对于该列表视图，我有 1 个标题和 4 个水平排列的文本视图。但我希望它之间有一些空间，而且它应该适合每个屏幕。请帮助我。在此先感谢。通过以下代码，它在另一个没有空格的情况下排列 1。

我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:background="#ffffffff">

     <TextView android:id="@+id/hdrdate"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="Date"/> 

      <TextView android:id="@+id/hdrdateasc"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"           
        />

     <TextView android:id="@+id/hdrdes"     
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="Item"
        />

     <TextView android:id="@+id/hdritemasc"     
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />

      <TextView android:id="@+id/hdrprice"      
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="Price"
        />      

       <TextView android:id="@+id/hdrpriceasc"      
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        />

      <TextView android:id="@+id/hdrtot"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:text="Total"
        />

       <TextView android:id="@+id/hdrtotasc"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:00:32.357

您可以使用布局边距作为视图之间的间距，例如

```
android:layout_marginLeft="5dp"
android:layout_marginRight="5dp" 
```

为了使它们适合屏幕，您可以使用 layout_weight。给每个视图权重 1，这样所有视图都将相等。您已经使用 fill_parent 作为 LinearLayout 的宽度。

`android:layout_weight="1"`对于每个视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:03:26.293

试试这个 `android:layout_weight="1"`用法`TextView`

```
 <?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" 
android:background="#ffffffff">

 <TextView android:id="@+id/hdrdate"        
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_weight="1"       
      android:textColor="#ff00ff00"     
    android:text="Date"/> 

  <TextView android:id="@+id/hdrdateasc"        
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
     android:text="gffgfg"  
       android:textColor="#ffff0000"     
     android:layout_weight="1"             
    />

 <TextView android:id="@+id/hdrdes"     
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"   
     android:layout_weight="1"   
     android:textColor="#FF4500"       
    android:text="Item"
    />

 <TextView android:id="@+id/hdritemasc"     
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:text="gdgdfgsg"
       android:textColor="#ff0000ff"     
     android:layout_weight="1"     

    />

  <TextView android:id="@+id/hdrprice"   
       android:layout_weight="1"        
    android:layout_width="wrap_content"
      android:textColor="#ff00ff00"     
    android:layout_height="wrap_content"        
    android:text="Price"
    />      
 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:03:35.570

而不是 wrap_content 为 widht 您应该在 textview 上使用 weight 并在线性布局上使用 weightsum ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:background="#ffffffff"
    android:weightSum="100.0">

     <TextView android:id="@+id/hdrdate"        
        android:layout_width="0dp"
        android:layout_weight="100/number of text views"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dp"      
        android:layout_marginRight="2dp"     
        android:text="Date"/> 
        ....
</LinearLayout> 
```

如果您不想为边距使用精确值，则应添加一些空白文本视图并将权重设置为小于您拥有文本的权重之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:22:57.680

这是代码，

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:background="#ffffffff">
    <TextView android:id="@+id/hdrdate" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Date" 
        android:layout_weight="1" 
        android:gravity="center_horizontal"/>
    <TextView android:id="@+id/hdrdateasc" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <TextView android:id="@+id/hdrdes" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Item" 
        android:layout_weight="1" 
        android:gravity="center_horizontal"/>
    <TextView android:id="@+id/hdritemasc" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <TextView android:id="@+id/hdrprice" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Price" 
        android:layout_weight="1" 
        android:gravity="center_horizontal"/>
    <TextView android:id="@+id/hdrpriceasc" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textColor="#000000" />
    <TextView android:id="@+id/hdrtot" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Total" 
        android:layout_weight="1" 
        android:gravity="center_horizontal"/>
    <TextView android:id="@+id/hdrtotasc" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:textColor="#000000" />
</LinearLayout> 
```

# eclipse - 从 Eclipse 调试在 ScriptEngine 中运行的 Groovy 脚本

> ID：11758688
> 
> 赞同：7
> 
> 时间：2012-08-01T11:57:23.570
> 
> 标签：eclipse, scripting, groovy, jsr223

我有一个像这样运行的 Groovy 脚本：

```
File scriptFile = ...;
ScriptEngine engine = ...;
String script = FileUtils.readFileToString(scriptFile);
Object evalResult = engine.eval(script, bindings); 
```

不出所料，脚本文件中设置的断点不会触发。我可以改变什么来使它工作？该脚本需要在较大程序的上下文中运行（没有单独的启动配置），并通过 a `ScriptEngine`，并且该文件仅在运行时才知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-07T07:41:12.263

我正在使用这个 hack：我定义了一个 Java 类`Debugger`，它看起来像这样：

```
public class Debugger {

    private static final Logger log = LoggerFactory.getLogger( Debugger.class );

    /**
     * Invoke this method anywhere to end up in the Java debugger.
     * 
     * <p>Sometimes, you have code that might eventually be executed or you have a place
     * where you want to stop but no code line.
     * 
     * <p>In these case, use this method.
     * 
     * <p>Don't forget to set a breakpoint, first :-)
     * */
    public static void stopInDebugger() {
        log.error( "Please set a breakpoint in Debugger.stopInDebugger() and try again whatever you just did!" );
    }
} 
```

我`log.error`在 Ecipse 的行中有一个断点。

现在，我可以将此行放入需要断点的脚本中：

```
Debugger.stopInDebugger(); 
```

当然，它不允许我轻松地单步执行脚本，但总比没有好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:39:56.667

您的脚本文件是否在类路径的源文件夹中（听起来不是）？如果没有，那就这样吧。您还可以更改您的首选项以确保脚本文件永远不会被编译器编译（并且可选地甚至不复制到输出文件夹）。转到 Preferences -> Groovy -> Compiler 并查看脚本文件夹以实现此目的。

# c++ - 为什么内联模板专业化有帮助，我应该这样做吗？

> ID：11758695
> 
> 赞同：1
> 
> 时间：2012-08-01T11:57:58.873
> 
> 标签：c++, templates, function-templates

模板特化的问题在于它们被视为普通函数，因为在任何地方都不再使用模板参数。

因此，如果将以下代码放在头文件中，它首先会起作用。

```
template <typename foo>
void f(foo p)
{
  std::cout << "f one" << std::endl;
}

template <>
void f<int>(int p)
{
  std::cout << "f two" << std::endl;
} 
```

但是，如果标头包含在两个文件中，这将停止工作。在这种情况下，我得到的错误（使用 VS2010）是：

```
templateordering.obj : error LNK2005: "void __cdecl f<int>(int)" (??$f@H@@YAXH@Z) already defined in othertu.obj 
```

这可以通过使用许多其他问题中提到的*inline关键字来解决。*

```
template <>
inline void f<int>(int p)
{
  std::cout << "f two" << std::endl;
} 
```

现在这对我提出了两个问题：

1.  有没有其他方法可以做到这一点？将专门的功能放在源文件中似乎不起作用。可能是因为我需要在标题中进行某种声明。
2.  内联实际上是做什么的？不应该使用 inline 似乎是整个互联网的普遍经验法则，因为编译器“在任何情况下都可能以他喜欢的方式内联函数”。因此，如果编译器可能不会内联我声明为“内联”的函数，为什么会这样呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:06:35.200

> 有没有其他方法可以做到这一点？将专门的功能放在源文件中似乎不起作用。可能是因为我需要在标题中进行某种声明。

您需要在标头中*声明*特化，就像任何其他函数一样。*是在标题中内联定义*它，还是在（恰好一个）源文件中定义它取决于您；再次，就像任何其他功能一样。`inline`正如您所说，如果您确实在标题中定义它，则必须声明它。

> 内联实际上是做什么的？

通常，*单定义规则*要求函数在程序的一个翻译单元中定义。实际上，这意味着您不能在标题中定义函数，因为标题旨在包含在多个翻译单元中。

但是，有时您希望或需要在头文件中定义函数 - 例如，某些编译器只有在可以看到定义时才能内联函数调用。关键字放宽了规则，因此`inline`您可以在多个翻译单元中定义函数，只要所有定义相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:05:05.773

`inline`*启用对单一定义规则*的一些更改。具体来说，声明的函数（包括函数模板的显式特化）`inline`可以在多个翻译单元中定义（前提是不同翻译单元中的定义相同），并且*必须在**使用*它的任何翻译单元中定义。这是适用于函数模板（未专门化）的相同版本的*odr规则。*

您要么必须在一个翻译单元中定义您的专业化（并在其他翻译单元中使用它之前声明它），或者您可以将定义保留在头文件中，但将其设为`inline`.

您的专业声明如下所示：

```
template<> void f<int>(int p); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:04:30.907

如果您从两个或多个文件中使用相同类型的函数，则函数将在每个文件中定义。这与在包含在多个源文件中的头文件中具有非模板函数定义相同。

将函数标记为`inline`向编译器提示它可以“内联”该函数，即将函数体直接放在调用函数的位置。这意味着该函数实际上并未定义。编译器还可以决定*不*内联函数，在这种情况下，`inline`关键字的行为类似于`static`关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:07:34.777

> 有没有其他方法可以做到这一点？将专门的功能放在源文件中似乎不起作用。可能是因为我需要在标题中进行某种声明。

是的，如果您将 的声明和定义分开`f<int>`，那应该可以解决链接器错误。

.h 文件中声明的语法：

```
template <>
void f<int>(int p); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:18:38.010

> 有没有其他方法可以做到这一点？

```
template <>
static void f<int>(int p)
{
  std::cout << "f two" << std::endl;
} 
```

或拥有它们`inline`，但使用特殊的编译器标志（如果可用）来抑制实际的内联

> 内联实际上是做什么的？

最佳答案已经可用:)

# java - java使用malloc实现目标c

> ID：11758696
> 
> 赞同：1
> 
> 时间：2012-08-01T11:58:02.697
> 
> 标签：java, objective-c, char, byte, porting

如何在 Objective-C 中移植这段代码？任何人请帮忙。

```
return data.length != 0 ? new Byte(data[0]) : null;  // In Java 
```

我正在这样做，但这并没有显示正确的结果

```
return datalen!= 0?malloc(sizeof(char) *data[0]) :NULL; //In Objective C it is write java data is byte 

**In obj C** datalen int datalen = sizeof(data)/sizeof(*data); 
```

我无法返回数据值。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:04:29.983

您应该返回一个 NSData 对象：

```
NSData* dataObj = nil;
if (datalen)
        dataObj = [NSData dataWithBytes:data length:1];

return dataObj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:07:24.683

在 Java 中，您将返回一个新的类型的对象包装器`Byte`；在 Objective-C 中没有这样的对象。您在 Java 中返回的对象表示单个字节，或者`null`如果该字节不存在（即数据数组的长度为零）。

Objective-C 中最接近的东西是`NSNumber`：

```
-(NSNumber*) theMethod {
    // Prepare the data and compute datalen
    return datalen ? [NSNumber numberWithChar:data[0]] : nil;
} 
```

您需要在接收端打开值：

```
if (returnedValue != nil) {
    char ch = returnedValue.charValue;
} 
```

请注意，`datalen`除以`sizeof`元素大小的计算方式仅适用于 C 数组对象。它不适用于传递给您的方法的指针和 C 数组。如果将数组传递到您的方法中，则还需要传递其长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:09:35.603

在 C 中，使用`sizeof`运算符（即不是函数），在这种情况下：

```
int datalen = sizeof data; 
```

但我建议使用提到的 phix23 之类的 NSData，它更像 Objective-C 并且带有很多好东西。

# c# - 将资源文件复制到执行的程序集

> ID：11758698
> 
> 赞同：0
> 
> 时间：2012-08-01T11:58:03.507
> 
> 标签：c#, resources

可能是愚蠢的，在这种情况下，请告诉我更好的方法来管理它。

我有一个控制台应用程序（**ConsoleProject**）。它引用了我的类库（**Library1**）和**Library1**引用了另一个我的类库（**Library2**）

> ConsoleProject => Library1=>Library2

**Library2**有一些文本资源文件要解析。（*构建操作 =**内容***，**复制到输出目录**=**始终**）

* * *

是否有可能将这些文件复制到 ConsoleProject 的执行**路径**？

现在我必须为这些文件添加另一个参考**ConsoleProject** => **Library2 。**我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:01:49.580

1.  将这些文件作为嵌入式资源。
2.  右键单击这些文件并将 CopyToOutputDirectory 设置为始终复制

**更新：** 发布构建命令：

```
if not exist c:\somedir\bin md c:\somedir\bin
xcopy /y c:\yourcodedir\bin\abc.txt c:\somedir\bin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:31:45.657

如果可能的话，我会在您的 Library2.dll 中制作这些文件和嵌入式资源，然后在需要时将它们流式传输到临时位置以在您的控制台程序中使用。这是最干净的方法，以后不太容易出现构建/文件复制问题。

这是我围绕使用单元/集成测试管理文件依赖项所做的一篇文章，其中提供了一些有关如何适当管理文件的示例。

[http://tsells.wordpress.com/2012/03/06/how-to-run-integration-tests-with-file-dependencies/](http://tsells.wordpress.com/2012/03/06/how-to-run-integration-tests-with-file-dependencies/)

# asp.net-mvc-3 - mvc3文件上传

> ID：11758702
> 
> 赞同：0
> 
> 时间：2012-08-01T11:58:27.340
> 
> 标签：asp.net-mvc-3, file-upload

每当我尝试将文件上传到服务器时，当前视图都会从控制器重定向到不同的视图。如何上传文件并保持在同一个视图上。

我尝试了以下代码：

```
public Action Result(HttpPostedFileBase file)
{
  return new EmptyResult();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:01:19.583

```
Return View(); 
```

应该像您期望的那样工作，返回名为*Result*的视图。

如果当前的*Action Method*不是您想要返回的视图，您可以使用：

```
return RedirectToAction("actionmethodname"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:01:21.087

我建议使用[plupload 之](http://www.plupload.com/)类的东西进行异步上传。这样您就可以在没有重定向的情况下上传，甚至可以在上传完成后查看图像/文档。

它允许通过不同的方法多次上传和回退以成功上传文件。

为了实现，您只需创建另一个控制器来处理上传。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:33:40.950

假设您的视图名称是 UploadView.cshtml，并且您正在从那里上传文件。

上传视图.cshtml

```
@using (Html.BeginForm("UploadFile", "MyController", FormMethod.Post, new { enctype = "multipart/form-data", id = "frm", name = "frm" }))
{
<input id="FileAttachments" type="file" name="FileAttachments" />&nbsp;&nbsp; 
<input type="submit" value="upload" />
} 
```

您的控制器将是 MyController.cs

```
[HttpGet]
public ActionResult UploadView()
{
   Return View();
}

[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase FileAttachments)
{
    if (FileAttachments != null)
    {
       string fileName = System.Guid.NewGuid().ToString() + Path.GetFileName(FileAttachments.FileName);
       fileName = Path.Combine(Server.MapPath("~/Content/Files"), fileName);
       FileAttachments.SaveAs(fileName);
    }
    return View("UploadView");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:16:14.857

检查我在 MVC 架构中提交文章的代码。

```
public ActionResult Submit(ArticleViewModel newSubmit, HttpPostedFileBase uploadFile)
{
    if (ModelState.IsValid)
    {
        //Upload File
        if (uploadFile != null)
        {
            string fileName = uploadFile.FileName;
            newSubmit.Article.image = fileName;
            uploadFile.SaveAs("~/Content/Uploads/Images");
            string savedFileName = Path.Combine(Server.MapPath("~/Content/Uploads/Images"), uploadFile.FileName);
        }
    // The HTML comes encoded so we decode it before insert into database
    newSubmit.Article.content = HttpUtility.HtmlDecode(newSubmit.Article.content);
    //Set article flags
    newSubmit.Article.flagged = true;
    newSubmit.Article.finished = false;
    newSubmit.Article.submitStoryFlag = true;
    //Insert article in the database                _repository.AddArticle(newSubmit);
    return View("Submitted");
}
    else
    {
       // Invalid – redisplay with errors
       return View(newSubmit);
    }
} 
```

# iphone - 如何在iphone中制作UIButton垂直silder菜单

> ID：11758704
> 
> 赞同：3
> 
> 时间：2012-08-01T11:58:32.877
> 
> 标签：iphone, uiscrollview

在我的应用程序中，我想制作带有滚动视图的 UIButton 滑块，当我们滚动按钮的 uiscrollview 时，按钮将位于中心，请参阅这些应用程序的第一个屏幕[http://itunes.apple.com/au/app/ id422249255?mt=8](http://itunes.apple.com/au/app/id422249255?mt=8) 我该怎么做以及我可以使用哪些方法目前我正在使用 UIScrollview 的这些委托方法

```
-(void)scrollViewDidScroll:(UIScrollView *)aScrollView
{

}

(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{

}

(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)aScrollView
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:03:13.030

做这个：

将这些添加到 .m 文件的标题中

```
#define viewWidth 40   //button width
#define viewHeight 30  //button height

#define viewOffsetX 5  //button left ie X
#define viewOffsetY 5  //button right ie Y

#define viewXspace 15  //button from top X space
#define ViewYspace 5   //button from bottom 
```

你有按钮的图像将它们添加到数组中，即 arrBtnImages

现在使用这些方法在您的滚动视图中加载按钮，即 viewDidLoad 方法中的 scView

```
- (void)loadBtnInSlider
{ 
 int row = 1;
 int col = [arrBtnImages count] / row;

 if ([mut_arrImages count] % col != 0  ) {
    col++;
 }

 int index = 0;
 for (int i=0; i < row  ;  i++)
 {

    CGRect frame;
    frame.size = CGSizeMake(viewWidth, viewHeight);
    frame.origin.y = (i * viewHeight) + (i * ViewYspace) + viewOffsetY;

    for (int j= 0; j < col  && index < [mut_arrImages count]; j++) {

        CGRect frame;
        frame.size = CGSizeMake(viewWidth, viewHeight);
        frame.origin.x = (j * viewWidth) + (j * viewXspace) + viewOffsetX;
        frame.origin.y = viewOffsetY;

        UIButton *btn = [[UIButton alloc]initWithFrame:frame];
        [btn setTag:j];
        [btn addTarget:self action:@selector(btnSelector:) forControlEvents:UIControlEventTouchUpInside];
        [btn setUserInteractionEnabled:YES];
        [btn setImage:[UIImage imageNamed:[arrBtnImages objectAtIndex:j]] forState:UIControlStateNormal];

        index++;
        [scView addSubview:btn];
        [btn release];
    }
 }
 [scView setContentSize:CGSizeMake(col * (viewWidth+ViewYspace)+viewOffsetY,scView.frame.size.height)];
} 
```

在 vieDidLoad 中使用此方法，如下所示：

```
[self loadBtnInSlider]; 
```

现在在 .h 文件中为按钮添加下面的选择器方法，它会是这样的

```
-(void)btnSelector:(id)sender
{
    UIButton *btnSelected = sender;
   switch(btnSelected.tag) 
   {
      // add case as much u have button
      case 0:
       //first button called
      break;

      case 1:
       //second button called
      break;
      ::
      ::
   }
} 
```

# objective-c - 用于 OS X 的 webView.loading

> ID：11758707
> 
> 赞同：0
> 
> 时间：2012-08-01T11:58:41.503
> 
> 标签：objective-c, macos, webview, load

我写了一个 iOS 应用程序。现在我想为 mac osx 做同样的事情。对于 iPhone，我写道：

```
if (myWebView.loading) {
    //code
}
else {
    // other code
} 
```

但对于 OS X`.loading`不起作用。它不是 UIWebView ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:46:53.133

在继续之前阅读有关 OS X 的 WebView 参考可能是一个好主意 - （[参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)）。

你正在寻找`WebView`'s `-(BOOL)isLoading`，所以：

```
if ([myWebView isLoading]) {
    // do something
} 
```

# php - 将单个数组移动到多维数组

> ID：11758708
> 
> 赞同：1
> 
> 时间：2012-08-01T11:58:45.993
> 
> 标签：php, arrays, multidimensional-array

我的问题.. 我有一个看起来像这样的 PHP 数组：

```
[1013] => [1154]
[1013] => [1322]
[1154] => [1525]
[1525] => [1526] 
```

我怎样才能把它移到这样的地方：

```
[1013] => [1154] => [1525] => [1526]
[1013] => [1322] 
```

所以它有点像创建一个与顶级数组项相关联的树。我无法控制数据是如何到达我的，它是通过第三方 API 生成的，然后就这样提供给我。

**逻辑：**客户端 1013 为主账户。客户端 1154 是 1013 的客户端。客户端 1322 是 1013 的客户端。客户端 1525 是 1154 的客户端。我想将其转换为多维数组，以便以树格式显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:10:39.917

干得好！：

```
<?php
// dataset
$clientset = array(
  array(1013, 1154),
  array(1013, 1322),
  array(1154, 1525),
  array(1525, 1526)
);

$children = array();

// make an array with children to see which nodes have none
foreach($clientset as $set) {
  if(!isset($children[$set[0]])) $children[$set[0]] = array($set[1]);
  else $children[$set[0]][] = $set[1];
}

// array with parents
$parents = array();
foreach($clientset as $set) {
  $parents[$set[1]] = $set[0];
}

// for each node with no children, begin the search!
foreach($clientset as $set) {
  if(!isset($children[$set[1]])) {
  echo getPath($set[1]).'</br>';
  }
}

// recursively search to parents and print them
function getPath($child) {
  global $parents;
  if($parents[$child]) {
    return (getPath($parents[$child]).' => '.$child);   
  } else return $child;
}
?> 
```

这输出：

```
1013 => 1322
1013 => 1154 => 1525 => 1526 
```

这个想法是查看哪些节点没有子节点。然后，遍历他们的父母。您可能不需要像现在这样的输出，但我相信您可以通过这种方式解决它。享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:04:13.543

您可以使用`array_walk`php 函数将回调应用于源数组的每个元素。回调应根据您的要求创建一个新数组。回调函数将采用 2 个参数：当前数组元素的值和它的键。使用它很容易构建您需要的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:30:32.593

克里斯，你应该先给我发电子邮件。:-p

```
$test_array = array('1','2','3','4','5','6');
$output_string = '';
for ($i = 0; $i < sizeof($test_array) -1; $i++)
{
    $output_string .= '{"'.$test_array[$i].'":';
}
$output_string .= $test_array[$i];
for ($i = 0; $i < sizeof($test_array)-1; $i++) { $output_string .= '}'; }
$new_array = json_decode($output_string, true);

var_dump($new_array); 
```

# android - 如何防止用户关闭应用程序 - Android 4.0.3

> ID：11758718
> 
> 赞同：5
> 
> 时间：2012-08-01T11:59:14.960
> 
> 标签：android, action, fullscreen, kiosk

所以我的问题是：如果有可能阻止用户关闭应用程序。

问题是因为我无法隐藏操作栏，并且我仅将平板电脑用于工作时间注册。因此，如果有人按主页按钮或返回按钮是不可接受的。

所以我想知道我是否可以以某种方式处理 onclose 事件？

是否可以全屏打开应用程序（没有操作栏）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T12:03:25.357

如果他按下主页按钮，您无法阻止用户关闭应用程序。这就是它的全部想法。否则，您可能会让用户被困在您的应用程序中，无法退出，只能重新启动其设备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T02:55:31.933

简短的回答是否定的。

长答案是，您可以使用户很难关闭您的应用程序。可以使用的一些技巧是：[关闭后立即重新打开应用程序](https://stackoverflow.com/a/9076796/925202)，[禁用返回和电源](https://stackoverflow.com/a/6530002/925202)等键，最后[禁用主页按钮](https://stackoverflow.com/q/2162182/925202)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T12:05:37.180

用户将始终能够关闭应用程序，否则会有程序滥用它并导致问题，但是您可以采取一些步骤来更好地处理它被关闭的情况。

例如，如果您有一个远程服务正在运行，它可以检查应用程序是否正在运行，并且可以通过多种方式知道，那么它可以触发再次启动应用程序的意图。

了解程序是否处于活动状态的一种方法是让它定期调用服务，基本上是做一次心跳检查，如果它在一段时间内没有被调用，应该是预期检查的 2 或 3 倍-in 期间，然后触发意图。

如果您检测到按下主页按钮，还有其他步骤可能有效，但我需要仔细考虑这些步骤。我认为这取决于您的期望，因为将某人困在您的程序中会非常糟糕。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T13:09:41.000

所以这是我的有效解决方案......

首先您安装 SureLock 应用程序的试用版。然后在该应用程序中禁用操作栏。就是这样。

如果您想再次查看操作栏，您将需要[HideBar 应用程序](https://play.google.com/store/apps/details?id=be.ppareit.hidebar)

所有这些仅适用于有根设备...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-01T12:06:30.173

尝试这个...

```
//Remove title bar

this.requestWindowFeature(Window.FEATURE_NO_TITLE);

//Remove notification bar

this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

Ref->[如何使用现有的自定义主题在 XML 中隐藏 Activity 的标题栏](https://stackoverflow.com/questions/2591036/how-to-hide-the-title-bar-for-an-activity-in-xml-with-existing-custom-theme)

防止用户.......

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode==KeyEvent.KEYCODE_BACK || keyCode==KeyEvent.KEYCODE_HOME){
                    // pass some msg ......
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# mysql - 如何读取 MySQL 时间？

> ID：11758721
> 
> 赞同：2
> 
> 时间：2012-08-01T11:59:23.350
> 
> 标签：mysql, time

MySQL 几点钟了：`1343821692`？

我使用的很少有应用程序以这种格式存储它。

我也有这样的时间存储：`2012-08-01 13:41:1`-**如何将这两种时间类型相互转换？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:02:20.623

这是一个 Unix 时间戳：

```
select FROM_UNIXTIME(1343821692)
SELECT UNIX_TIMESTAMP('2012-08-01 13:41:1'); 
```

参见[from_unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)和[unix_timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

# google-maps - 有没有办法为 primefaces 中的 gmap 标记创建上下文菜单？

> ID：11758726
> 
> 赞同：1
> 
> 时间：2012-08-01T11:59:39.700
> 
> 标签：google-maps, jsf-2, primefaces

有没有办法为 primefaces 中的 gmap 标记创建上下文菜单？

我知道有一个 gmapInfoWindow 对象，但这需要一个 onclick 事件并且没有上下文菜单的外观。

我更愿意为 gmap 标记显示在 onmouseover 事件期间出现的上下文菜单。

请让我知道这是否可能？任何示例代码也将不胜感激。

谢谢

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:12:08.220

看[gmap.js的源码](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/resources/META-INF/resources/primefaces/gmap/gmap.js)

我刚刚删除了点击处理程序并为鼠标悬停添加了一个监听器：

这是javascript代码：

```
jQuery(window).load(function() {
    var _self = gmap;
    for(var i=0; i < gmap.cfg.markers.length; i++) {
        var marker = gmap.cfg.markers[i];
        // remove all marker listener
        google.maps.event.clearInstanceListeners(marker);
        // add mouse over listener
        google.maps.event.addListener(marker, 'mouseover', function(event) {
            _self.fireOverlaySelectEvent(event, this);
        });

       // Since we cleared all listeners adding back drag listener
       //marker drag
        google.maps.event.addListener(marker, 'dragend', function(event) {
            _self.fireMarkerDragEvent(event, this);
        });
    }
}); 
```

其中gmap是widgetVar属性`<p:gmap>`

```
<p:gmap widgetVar="gmap" /> 
```

# javascript - 如何在 Metro 风格应用程序的 eval 代码中调试异常

> ID：11758727
> 
> 赞同：2
> 
> 时间：2012-08-01T11:59:50.380
> 
> 标签：javascript, visual-studio, windows-8, microsoft-metro

我正在 Visual Studio Express 2012 RC 中编写 Metro Style 应用程序，我的应用程序工作了一段时间，比如 2-3 分钟，然后突然说

> eval 代码中第 49 行第 1343 列未处理的异常
> 
> 0x800a138f - JavaScript 运行时错误：预期对象

并停止工作，我不知道为什么。这是导致错误的 eval 代码的一部分：

```
var p=function(a){p.queue[bb]()(a)} 
```

它显示

```
p.queue[bb]()(a) 
```

如突出显示。

我知道通过查看这段代码很难解决这个问题，那么我该如何调试 eval 代码呢？它是动态创建的，无法编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T15:28:41.533

将 Visual Studio 设置为在抛出异常后立即中断，这可能会帮助您调试它。

调试菜单/异常.../选中 JavaScript 两列中的框

# css - 调整浏览器窗口大小时的问题

> ID：11758728
> 
> 赞同：0
> 
> 时间：2012-08-01T11:59:51.677
> 
> 标签：css, resize

所以这是我们的网站[http://www.greeceinsiders.com](http://www.greeceinsiders.com)

如果您调整窗口大小，您会看到右上角的菜单超出了顶栏，而且很难看。我该如何解决？我可以玩列表的位置吗？

奖励：如果有人访问希腊，他将获得帮助我们的免费体验！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:05:00.013

一个简单的解决方法是在您的 CSS 中进行以下更改：

```
#top-bar > .menu {
    color: #FFFFFF;

    /* float: right; */ /*float: right removed */    
    height: 48px;
    margin-right: 40px;
    width: 490px;

    position: absolute; /* these are new additions */
    right: 0;
    top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:05:35.170

导致它变形的是 pageTitle 元素。

它看起来像一个空元素 - 你可以删除它吗？

# mysql - GROUP_CONCAT 表中的多个值

> ID：11758734
> 
> 赞同：1
> 
> 时间：2012-08-01T12:00:14.140
> 
> 标签：mysql

我刚刚添加了一个表格，其中包含每个项目的 url 和描述。下面的查询工作正常......但它只返回 url，我也需要 desc。我不知道如何使这项工作。

```
$query_str = "SELECT      a.userid, a.cat, a.id, a.name, a.image, 
                          a.desc, a.country, b.user_id, c.username, 
                          c.fbook, d.cat_id,
                          (
                               SELECT GROUP_CONCAT(url) 
                               FROM one_add o 
                               WHERE a.id=o.one_id

                          ) AS url,
                          (
                               SELECT COUNT(id) 
                               FROM one_msg m 
                               WHERE m.guest_id = ? AND 
                                     m.one_id=a.id 
                          ) AS count
               FROM place a
                            LEFT OUTER JOIN wait b 
                                 ON a.id=b.post_id AND 
                                    b.user_id= ?
                            JOIN users c
                                 ON a.userid=c.id
                            LEFT JOIN ( 
                                       SELECT userid, user_id, 
                                              GROUP_CONCAT( cat_id ) AS cat_id 
                                       FROM user_cat 
                                       WHERE userid='$user_id' 
                                       GROUP BY user_id 
                                      ) AS d ON d.userid='$user_id' AND 
                                                d.user_id=a.userid
              WHERE a.cat != ? ORDER BY a.date desc"; 
```

这就是我想要完成的： `<a href="url">desc</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:07:10.313

您可以通过使用`CONCAT`内部`GROUP_CONCAT`函数来实现这一点：

```
(SELECT GROUP_CONCAT(CONCAT('<a href=\"',url,'\">',desc,'</a>')) 
 FROM one_add o 
 WHERE a.id=o.one_id) AS url 
```

完整查询：

```
(SELECT COUNT(id) FROM one_msg m WHERE m.guest_id = ? AND m.one_id=a.id ) AS count
FROM place a
LEFT OUTER JOIN wait b ON a.id=b.post_id AND b.user_id= ?
JOIN users c ON a.userid=c.id
LEFT JOIN ( SELECT userid, user_id, GROUP_CONCAT( cat_id ) AS cat_id FROM user_cat WHERE userid='$user_id' GROUP BY user_id ) AS d ON d.userid='$user_id' AND d.user_id=a.userid
WHERE a.cat != ? ORDER BY a.date desc"; 
```

# iphone - Objective-C 中的 JSON

> ID：11758736
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:00:22.270
> 
> 标签：iphone, ios, xcode, json

我对json有问题。我必须做查询：

`{ "method": "authorize", "params": [ "100000202", "TestApp677" ] }`

到端点：http://xzasddfe.com/authorize/?ver=2_01

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:12:16.017

首先看一些 JSON 库。我更喜欢[JSONKit](https://github.com/johnezang/JSONKit/)，因为它真的很容易使用。

接下来选择一种将数据发布到端点的方法（ NSURLConnection 、 ASIHTTPRequest ）。

下面是一个使用 JSONKit 和 NSURLConnection 的例子：

```
-(void) postData {
   NSURL *url=[NSURL URLWithString:@"http://xzasddfe.com/authorize/?ver=2_01"];

    NSMutableDictionary *dic=[NSMutableDictionary dictionary];
    [dic setValue:@"authorize" forKey:@"method"];
    [dic setVObject:[NSArray arrayWithObjects:@"100000202",@"TestApp677",nil] forKey:@"params"];

    NSString *jsonString=[dic JSONString];

    NSMutableURLRequest *request=[[NSMutableURLRequest alloc] initWithURL:url];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];

    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    [request release];

} 
```

# ajax - 基于 Windows 的应用程序中的 LoadTest

> ID：11758737
> 
> 赞同：0
> 
> 时间：2012-08-01T12:00:23.603
> 
> 标签：ajax, vb.net, wcf, web-services

我想在基于 Windows 的应用程序中为 Web 服务进行负载测试。我将从 Windows 应用程序调用 WCF 服务，该服务又调用 web 服务来检索结果。它将接受输入 xml 并输出响应 xml。

如何以异步方式使用 for 循环进行负载测试。我不想使用任何负载测试工具。

客户报告“记录不存在”有时会出现。但对我来说，它工作正常。我想重现结果。

目前我正在按顺序将响应 xml 写入文本文件。我想把它当作异步的。

**更新：** 我想从基于 Windows 的应用程序切换到基于 Web 的应用程序来使用 Ajax 进行负载测试。我想知道如何为输入 xml 编写 Ajax 代码并以文本文件的形式获取响应 xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:51:31.037

1.  确保您的 WCF 服务支持多线程。
2.  使用异步方法生成代理。
3.  在您的代理对象上产生大量 Begin[YourMethodName] 函数调用。

# c# - 来自 xml 的 Sharepoint 格式化日期时间，例如：2011-12-15T00:00:00+01:00

> ID：11758742
> 
> 赞同：1
> 
> 时间：2012-08-01T12:00:33.557
> 
> 标签：c#, xml, sharepoint, powershell, dataset

我使用数据集将共享点列表保存到 xml。DateTime 以这种格式保存在 xml 中：

```
<ExpiryDate>2011-12-15T00:00:00+01:00</ExpiryDate> 
```

我尝试使用 CreateISO8601DateTimeFromSystemDateTime 读取日期时间字符串并将其添加到共享点字段，但它不起作用。

我用来保存支持共享点列表项的数据的代码：

```
 $item["ExpiryDate"] =  [Microsoft.SharePoint.Utilities.SPUtility]::CreateISO8601DateTimeFromSystemDateTime([System.DateTime]$ExpiryDate.InnerText)} 
```

它给了我以下错误：

```
Unable to index into an object of type Microsoft.SharePoint.SPListItem.

    At C:\PowershellFiles\ToList.ps1:122 char:31
    +                         $item[ <<<< "ExpiryDate"] =  [Microsoft.SharePoint.Utilities.SPUtility]::CreateISO8601DateTimeFromSystemDateTime([System.DateTime]$ExpiryDate.InnerText)}
        + CategoryInfo          : InvalidOperation: (MioExcoApprovalDate:String) [], RuntimeException
        + FullyQualifiedErrorId : CannotIndex 
```

任何人都可以帮助我吗？

谢谢你。

# javascript - 如何将此倒计时脚本添加天数使其变为 DD-HH-MM-SS？

> ID：11758744
> 
> 赞同：1
> 
> 时间：2012-08-01T12:00:38.763
> 
> 标签：javascript, jquery, countdown

我在 jQuery 中有这个脚本：

```
// Auction countdown script
$(function () {

var remaining = $("#countdown").text(),
    regex = /\d{2}/g,
    matches = remaining.match(regex),
    hours = matches[0],
    minutes = matches[1],
    seconds = matches[2],
    remainingDate = new Date();

remainingDate.setHours(hours);
remainingDate.setMinutes(minutes);
remainingDate.setSeconds(seconds);

var intvl = setInterval(function () {
    var totalMs = remainingDate.getTime(),
        hours, minutes, seconds;

remainingDate.setTime(totalMs - 1000);

hours = remainingDate.getHours();
minutes = remainingDate.getMinutes();
seconds = remainingDate.getSeconds();

if (hours === 0 && minutes === 0 && seconds === 0) {
    alert('done');
}

$("#countdown").text(
    (hours >= 10 ? hours : "0" + hours) + ":" +
    (minutes >= 10 ? minutes : "0" + minutes)  + ":" +
    (seconds >= 10 ? seconds : "0" + seconds));

}, 1000);

}); 
```

现在，这需要一个字符串并为其进行 HHMMSS 倒计时。我希望它是 DDHHMMSS，但我似乎无法让它工作。谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:07:24.633

如果您想自己创建倒计时功能，请参考以下链接以构建正确的逻辑：

### [http://stuntsnippets.com/javascript-countdown/](http://stuntsnippets.com/javascript-countdown/)

### [http://www.hashemian.com/tools/javascript-countdown.htm](http://www.hashemian.com/tools/javascript-countdown.htm)

或者

最好使用以下**jQuery 插件之一**

### [http://www.littlewebthings.com/projects/countdown/](http://www.littlewebthings.com/projects/countdown/)

### [http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

希望能帮助到你

### 万事如意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:14:28.493

基本问题是 Date 对象用于日期和时间，而不是时间间隔。所以 setDate() 和 getDate() 在月份的日期上运行，而不是天数。

您可以简单地使用整数并除以一分钟的秒数、一小时的分钟数等。或者您可以实现一个 TimeInterval 对象，如下所述：

[http://i-programmer.info/programming/javascript/3088-a-javascript-timeinterval-object.html](http://i-programmer.info/programming/javascript/3088-a-javascript-timeinterval-object.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T12:08:59.097

用于`toString`：

```
var remainingDate = new Date();
remainingDate.toString("dd-MM-yyyy HH:mm:ss"); 
```

例如，这会返回`01-08-2012 14:08:22`

# asp.net-mvc-3 - 如何从 MVC3 中的 LINQ 查询创建 DropDownList？

> ID：11758747
> 
> 赞同：2
> 
> 时间：2012-08-01T12:01:01.763
> 
> 标签：asp.net-mvc-3, linq, selectlist, html.dropdownlistfor

我需要知道如何创建一个下拉列表来表示“类别”表中的所有类别。

我已经使用这个 LINQ 查询提取了我需要的每个类别的名称和值：

```
var dbcontext = new LNQ2SQLDataContext();
        var Q = from P in dbcontext.Categories
                where P.SUB_CAT == null
                select P; 
```

我可以像这样将这个“Q”传递给我的视图：在控制器中：

```
return View(Q); 
```

在视图中：

```
@model IEnumerable<MyAppName.Models.Category> 
```

但我不知道如何`@html.DropDownListFor()`从模型中制作一个非常好的下拉列表。:|

**加：**

我可以`SelectList`像这样从查询“Q”中生成一个：

```
var category_list = new SelectList(Q, "CAT_ID", "CAT_Name"); 
```

**但**我不知道如何从一个简单的创建下拉列表（不使用`ViewBag`传递`category_list`给视图）`SelectList`：|

我搜索了尽可能多的博客和网站。但是他们没有解决我的问题。我只是越来越糊涂了！

那么有人可以帮忙吗？：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:22:06.030

要使用 DropDownListFor，您要么必须有一个具有 SelectList 或数据的模型来制作选择列表，还要有一个属性来存储下拉列表的选定值，或者使用 ViewBag 来传递 category_list。所以你可以和...

```
Public Class MyViewModel
{
    Public Integer SelectedCategory { get; set; }
    Public SelectList Categories { get; set; }
}

Public Class ItemsController : Controller
{
    Public ActionResult Index()
    {
        var dbcontext = new LNQ2SQLDataContext();
        var Q = from P in dbcontext.Categories
                where P.SUB_CAT == null
                select P;
        var vm = new MyViewModel();
        vm.Categories = new SelectList(Q, "CategoryID", "Name");
        return View(vm);
    }

    [HttpPost()]
    Public ActionResult Index(MyViewModel vm)
    {
        var theSelectedCategory = vm.SelectedCategory;
    }
} 
```

该视图将是...

```
@model MyViewModel
@Html.DropDownListFor(model => model.SelectedCategory, Model.Categories, "Select Category") 
```

注意：我通常不使用 C# 编写代码，因此我不能保证语法完全正确。

# objective-c - CAAnimationGroup

> ID：11758755
> 
> 赞同：0
> 
> 时间：2012-08-01T12:01:23.800
> 
> 标签：objective-c, ios

我有一个 uitableview，其中自定义 tableview 单元格在其 contentView 中插入另一个 uiview 子类以显示每个单元格内容，我使用视图 drawRect 方法在每个单元格上写入 20 多个数字。

现在我需要根据每个数字的值是从之前的值增加还是减少，为每个数字的颜色设置动画。

为此，我使用 CATextLayer，以便我可以使用 CAAnimation 为 foregroundColor 属性设置动画。但在这个过程中，iOS 试图同时触发近 400 个 CAAnimation，因为我也有 20 行或更多行。这严重影响了性能。

我发现 CAShapeLayer 对于这项工作来说要重得多。

此外，当我使用 CATextLayer 时，我的字体看起来非常锯齿，而且前卫。

我的问题是做这种事情的最佳方法是什么。

CAAnimationGroup 中的动画集合是否在一个线程下运行，实际上我的观点是，如果我尝试将特定行的 20 个 CAAnimations 分组到 CAAnimationGroup 中，而不是单独触发它们，它会提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:09:46.897

对于我的要求之一，我还需要动画组，这里是参考： [如何在我的 iPad 应用程序中不寻常的曲线路径上为一张图像制作动画？](https://stackoverflow.com/questions/10705587/how-to-animate-one-image-over-the-unusual-curve-path-in-my-ipad-application)

希望这会帮助你。

享受编码:)

# python - 通过唯一标签合并networkx中的两个网络图

> ID：11758774
> 
> 赞同：1
> 
> 时间：2012-08-01T12:02:53.657
> 
> 标签：python, networkx

python networkx 模块有一个方法 nx.union 用于合并两个网络映射：

```
C = nx.union(G,H) 
```

其中 G 和 H 是网络图，C 是组合版本。它按编号查找所有节点并合并具有相同编号的节点。

*以 GEXF 格式存储的节点示例：*

```
 <node id="0" label="walking">
    <ns0:color b="200" g="11" r="11" />
    <attvalues>
      <attvalue for="0" value="2" />
      <attvalue for="1" value="26" />
    </attvalues>
  </node> 
```

这对我来说是个问题，因为我的地图具有任意节点编号，但每个节点属性中的标签都是唯一的。当我分配节点号时，我只是通过一个列表并使用列表索引作为节点号，但是 map1 可能在位置 84 有“行走”，而 map2 可能在位置 157 有“行走” - 所以节点号并不容易与节点标签相关。

有谁知道我应该如何与 networkx 联合到网络地图并通过节点标签名称指定匹配？

我可能必须编写自己的方法，但只是想确保我没有遗漏任何东西。有一个 union_disjoint() 但这似乎在同一个文件中创建了两个单独的未连接的地图，这没有帮助。

还有第二个 networkx 问题：有没有办法以 GEXF 文件格式指定节点标签大小和标签颜色？未在 GEXF v1.2 草案规范中列出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T14:05:13.590

尝试使用 nx.read_gexf(file,relabel=True)。这将使用 GEXF 节点标签作为 NetworkX 节点标识符。然后，您可以通过将一个的节点和边添加到另一个来合并两个图。例如

```
>>> G = nx.read_gexf(file1, relabel=True)
>>> H = nx.read_gexf(file2, relabel=True)
>>> G.add_nodes_from(H.nodes(data=True))
>>> G.add_edges_from(H.edges(data=True)) 
```

# javascript - jquery停止播放功能

> ID：11758781
> 
> 赞同：0
> 
> 时间：2012-08-01T12:03:19.897
> 
> 标签：javascript, jquery, function, playback

**我该怎么做？**

我有这个代码：

```
function Slide(i) 
{
    slide_1(id);

    $("#stop").click(function() 
    {
    event.stopPropagation();
    });

} 
```

**我想停止函数传播，然后才能创建其他函数以在其他时间播放所有过程**

**我也试试这个：**

```
var ac_activate_auto="si";

$("#play").click(function() { 
    /// load vars
    ac_activate_auto="si";
});

$("#stop").click(function() {
    /// load vars
    activate_auto="no";
}); 
```

这行得通，但是如果我去推 div id 停止动画停止但是当我去推过去时，其他时间没有工作

如果您认为还有其他方法可以，完美，向所有人致以问候和感谢

# algorithm - 堆树 - 输出排序列表的复杂性

> ID：11758785
> 
> 赞同：2
> 
> 时间：2012-08-01T12:03:33.813
> 
> 标签：algorithm, data-structures, heapsort

有一个未排序的数字列表，并从中构建了一个堆树。

从已经构建的堆树中输出排序的数字列表的时间复杂度是多少？

（注意：不需要从树中移除节点来获取当前的最小值/最大值，寻找一种有效的方法来遍历堆树并输出排序后的数字列表）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T12:25:14.690

与最初对列表进行排序相同 - O(nlogn)。这是因为堆积列表需要 O(n) 时间，并且不可能比 O(nlogn) 更快地从堆中打印排序序列，因为这意味着可以比 O(nlogn) 更快地对任何序列进行排序（通过heapifying 然后输出），这被证明是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:36:04.777

[这是使用堆属性 (Cormen) 按排序顺序打印树](https://stackoverflow.com/questions/8110844/print-a-tree-in-sorted-order-using-heap-properties-cormen/8111300#8111300)的重复问题。原始问题中提供了一个说明，说明为什么它是一项`nlogn`操作而不是`logn`。

# powershell - 脚本中的 Powershell 调用命令函数

> ID：11758787
> 
> 赞同：0
> 
> 时间：2012-08-01T12:03:36.383
> 
> 标签：powershell

我有一个名为“ExecutBizTalkAppMSI.ps1”的 Powershell 脚本文件，其中包含一个名为“Install-BizTalkApplication”的函数。我需要在远程服务器上执行该功能，所以我使用“Invoke-Command”cmdlet，如下所示：

```
Invoke-Command -Computer $TargetServer -FilePath .\ExecuteBizTalkAppMSI.ps1 -argumentlist $MSI, $InstallFolderOnTargetServer, $Environment 
```

问题是，虽然目标脚本运行（我直接在 Param() 部分之后添加了一个 Write-Host），但没有执行函数“Install-BizTalkApplication”。

任何人都可以让我知道我需要做些什么来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:23:51.393

我怀疑脚本看起来像这样：

```
# start
function Foo {}
# end 
```

那是行不通的。两种选择：

*   去掉函数名 {} 并按*原样运行脚本*
*   首先定义一个函数，然后将其作为脚本的最后一步运行

例子：

```
# script 1
param ($foo, $bar)
# function body...

# script 2
param ($foo, $bar)
function foo {
param ($foo, $bar)
# function body
}

foo -foo $foo -bar $bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:24:40.053

您说它“包含一个名为”的函数...因此，如果您使用这些参数在本地计算机上运行该脚本..即：

```
.\ExecuteBizTalkAppMSI.ps1 $MSI $InstallFolderOnTargetServer $Environment 
```

它不起作用，因为您正在运行一个只加载一个函数然后停止的脚本，对吗？那是你的问题。

如果是这样，您需要在脚本顶部的函数之前添加一个 param 语句：

```
param($MSI, $InstallFolderOnTargerServer, $Environment) 
```

然后在底部，在函数之外，您必须添加：

```
Install-BizTalkApplication $MSI $InstallFolderonTarget $Environment 
```

这将允许脚本接受参数，然后将这些参数传递给调用函数的语句。

# c# - 在 Web 浏览器控件中突出显示错误的拼写

> ID：11758788
> 
> 赞同：5
> 
> 时间：2012-08-01T12:03:36.893
> 
> 标签：c#, winforms

我想要做的是在我的winform应用程序中使用的网络浏览器控件中的每个错误拼写上标记一个红色的虚线下划线。

这是我的代码片段：-

```
 public static string CheckSpelling(string InnerHTML)
    {
        string Val = "";
        try
        {
            StringBuilder strBu = new StringBuilder();
            strBu.Append(InnerHTML);
            RemoveStyleAssigned(ref strBu);                               
            for (int i = 0; i < strBu.Length; i++)
            {
                if (Convert.ToString(strBu[i]).ToLower() == "<")
                {
                    for (int j = i + 1; j < strBu.Length; j++)
                    {                            
                        if (Convert.ToString(strBu[j]).ToLower() == ">")
                        {
                            i = j;
                            for (int k = j + 1; k < strBu.Length; k++)
                            {
                                if (Convert.ToString(strBu[k]).ToLower() != " ")
                                {
                                    i = k;
                                    CheckAndReplace(ref strBu, ref i);
                                    break;
                                }
                            }
                            break;
                        }
                    }
                }
                else if (Convert.ToString(strBu[i]).ToLower() != " ")
                {
                    CheckAndReplace(ref strBu, ref i);                        
                }
            }
            Val = strBu.ToString();
        }
        catch (Exception ex)
        {
        }
        return Val;
    } 
```

这里的 InnerHTML 是为输入数据获取的 Web 浏览器控件的 InnerHTML。下一个方法是 CheckandReplace

```
 private static void CheckAndReplace(ref StringBuilder strBu, ref int i)
    {            
        try
        {
            string Target = string.Empty;
            string NewString = "";                
            for (int j = i; j <= strBu.Length; j++)
            {                   
                if (j == strBu.Length || Convert.ToString(strBu[j]).ToLower() == " " || Convert.ToString(strBu[j]).ToLower() == "<" )
                {
                    string Wordtocheck = ReplaceXmlCharacters(Target);
                    if (!IsSpellingCorrect(Wordtocheck))
                    {
                        NewString = "<u style='text-decoration: none; border-bottom: 1px dotted #FF0000'>" + Target + "</u>";                           
                        strBu = strBu.Replace(Target, NewString, i, Target.Length);                            
                        i += NewString.Length - 1;
                    }
                    else
                    {
                        i = j - 1;
                    }

                    break;
                }
                else
                    Target += strBu[j];
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

**主要问题是上面的代码一切正常，但是每当我在目标值中得到任何特殊字符或任何空格时，上面的代码也会突出显示相同的内容，但我不想像在 MS Word 中那样突出显示。请指导我完成这个或者是他们的任何其他出路。**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:13:10.480

您可能想[查看 Regex](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)。似乎这对您要完成的工作有所帮助。

# python - Python 3.2 回文

> ID：11758791
> 
> 赞同：1
> 
> 时间：2012-08-01T12:03:42.627
> 
> 标签：python, python-3.x, palindrome

我正在做一些 python 在线教程，但我被困在一个练习中：回文是一个单词，它的正向和反向拼写相同。例如，这个词

赛车

是回文：第一个和最后一个字母相同（r），第二个和倒数第二个字母相同（a），等等。编写一个函数 isPalindrome(S)，它以字符串 S 作为输入，并返回 True如果字符串是回文，否则为 False。这是我写的代码：

```
 def isPalindrome(S):
      if S[0] == S[-1]
        return print("True")
      elif S[0] == S[-1] and S[1] == S[-2] :
        return print("True")
      else:
        return print("False") 
```

但是，如果单词是例如 ,,sarcas,, ，则输出不正确。所以我需要对我的代码进行修复，以便它适用于任何单词。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T12:22:28.400

一种单线解决方案，但 O(n) 和内存昂贵是：

```
def isPalindrome(word) : return word == word[::-1] 
```

使用相同内存量的 AO(n/2) 解决方案是：

```
def palindrome(word):
   for i in range(len(word)//2):
         if word[i] != word[-1-i]:
                 return False
   return True 
```

这是@LennartRegebro 提到的技巧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T10:28:02.477

```
def is_palindrome(text):
    text = text.replace(' ', '')
    text = text.casefold()
    if list(text) == list(reversed(text)):
        return True
    else:
        return False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-08T13:33:44.277

在 Python 中检查单词是否是回文的最佳方法如下：

```
var[::] == var[::-1] 
```

但是，了解 Python 会创建一个新的字符串副本非常重要，因为您在`var[::-1]` 内部执行 Python 不知道反向是否会产生相同的字符串。因此，它的编码方式是创建它的新副本。所以，当你尝试时，`var[::1] is var[::-1]`你会得到 FALSE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-24T07:55:24.900

尝试这个

```
word='malayalam'
print(word==word[::-1]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-05T19:55:23.133

这是我的解决方案：

```
def isPalindrome(S):
    l = len(S)-1
    for i in range(0,l):
        if S[i]!=S[l-i]:
            return False
    return True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-16T10:25:38.363

另一种使用递归的方法是：

```
def isPalindrome(word):
  if len(word) <= 1: return True
  return (word[0] == word[-1]) and isPalindrome(word[1:-1]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-24T16:02:20.983

这是我的解决方案。

```
S = input("Input a word: ")

def isPalindrome(S):
    for i in range(0, len(S)):
        if S[0 + i] == S[len(S) - 1]:
            return "True"
    else:
        return "False"
print(isPalindrome(S)) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-08-17T21:48:18.173

这被打死了，但是如果Python是用C实现的，我有一些想法。如果......

1.  代码`word[::-1]`迭代到字符串结尾以制作副本，这会`word == word[::-1]`降低代码速度和内存效率因素
2.  迭代到中间的单词比比较一个完整的单词更好，因为字符已经测试过 - 对于奇数单词，中间字母不被测试
3.  加法和减法需要谨慎使用
4.  递归很酷（也很有趣），但使用了大量堆栈（除非使用`tail recursion`... 进行优化，这可能会成为底层代码中的 for 循环，但不太可能足够灵活以进行代码优化）。
5.  传统上，位移比除法更快

以下是代码：

```
def isPalindrome(S):
    last = len(S)
    middle = last >> 1
    for i in range(middle):
        last -= 1
        if(S[i] != S[last]):
            return False
    return(True)

print("\n".join([str((word, isPalindrome(word))) for word in ["abcdcba", "abcdBba", "abccba", "abcBba", "a", ""]])) 
```

产生：

```
('abcdcba', True)
('abcdBba', False)
('abccba', True)
('abcBba', False)
('a', True)
('', True) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-10-31T16:55:58.473

这是我的解决方案 S = input("输入一个单词：")

```
def isPalindrome(S):
    for i in range(0, len(S)):
        if S[0 + i] == S[len(S) - 1]:
            return "True"
        else:
            return "False"
print(isPalindrome(S)) 
```

# iphone - 无法在 iOS 浏览器中拖动层次结构树 - thejit

> ID：11758794
> 
> 赞同：3
> 
> 时间：2012-08-01T12:03:51.583
> 
> 标签：iphone, cordova, ios-simulator, mobile-safari, thejit

无法在**iPhone 模拟器**上的 safari 浏览器中拖动**空间树**。

 **我在 iPhone Simulator 中的 safari 浏览器上尝试了以下示例。

[http://thejit.org/static/v20/Jit/Examples/Spacetree/example1.html](http://thejit.org/static/v20/Jit/Examples/Spacetree/example1.html)

[http://thejit.org/static/v20/Jit/Examples/Spacetree/example2.html](http://thejit.org/static/v20/Jit/Examples/Spacetree/example2.html)

[http://thejit.org/static/v20/Jit/Examples/Spacetree/example3.html](http://thejit.org/static/v20/Jit/Examples/Spacetree/example3.html)

请帮助在 iPhone 模拟器上的 safari 浏览器内的层次结构树上执行拖动。

**我正在为我的应用程序使用 phonegap 在 iPhone 中实现，**但是这个层次结构树拖动功能本身在 iPhone 模拟器浏览器中不起作用，因为我不能作为移动应用程序运行。

请通过代码明智的帮助我需要更改才能在 Iphone 中运行此代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:11:23.730

没有**拖动**功能，实际上，它只是一个**点击**功能。在 iPhone Safari 浏览器上进行了一些测试后，我可以向您报告它运行良好 - 间距和动画完美呈现。**

# python - 按键过滤字符串列表

> ID：11758799
> 
> 赞同：2
> 
> 时间：2012-08-01T12:04:13.823
> 
> 标签：python, list, filter

我的项目需要这样的次数足够多，我希望这里有人可以给我一种优雅的方式来编写它。

我有一个字符串列表，并且想使用类似键/键的功能过滤掉重复项（就像我可以使用`sorted([foo, key=bar))`.

最近，我正在处理链接。

目前我必须创建一个空列表，如果

注意：`name`也是链接链接的文件的名称 - 只是一个正则表达式匹配

```
parsed_links = ["http://www.host.com/3y979gusval3/name_of_file_1",          
                "http://www.host.com/6oo8wha55crb/name_of_file_2", 
                "http://www.host.com/6gaundjr4cab/name_of_file_3",                
                "http://www.host.com/udzfiap79ld/name_of_file_6", 
                "http://www.host.com/2bibqho4mtox/name_of_file_5", 
                "http://www.host.com/4a31wozeljsp/name_of_file_4"]

links = []
[links.append(link) for link in parsed_links if not name(link) in 
             [name(lnk) for lnk in links]] 
```

我希望最终列表具有完整的链接（所以我不能只删除文件名和使用集之外的所有内容）；但我希望能够做到这一点，而无需每次都创建一个空列表。

此外，我目前的方法似乎效率低下（这很重要，因为它经常处理数百个链接）。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:10:32.967

为什么不直接使用字典？

```
links = dict((name(link), link) for link in parsed_links) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:08:48.113

如果我正确理解您的问题，您的性能问题可能来自在紧密循环中反复评估的列表理解。

尝试通过将列表推导放在循环之外来缓存结果，然后使用另一个推导而不是`append()`空列表：

```
linkNames = [name(lnk) for lnk in links]
links = [link in parsed_links if not name(link) in linkNames] 
```

# php - php目录密码保护

> ID：11758803
> 
> 赞同：0
> 
> 时间：2012-08-01T12:04:36.013
> 
> 标签：php, directory

我有一个php代码：

```
 if (isset($_POST['submit'])) {

    $name = $_POST['gname'];
    $description = $_POST['gdescription'];

    mkdir ("upload/$name", 0777);

} 
```

这工作得很好但是有没有办法在表单创建新目录时密码保护它并且密码本身是由用户通过表单中的一个字段定义的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:07:09.050

PHP 中有一个[chown](http://php.net/manual/en/function.chown.php) () 函数，它将文件夹的所有者设置为特定用户，但该用户需要在运行系统的服务器上定义。

更好的方法是简单地通过页面本身进行所有权，以确保只有正确的所有者才能访问其中的文件。

# symfony - Symfony2 和 FOS 用户包 - 注释

> ID：11758806
> 
> 赞同：0
> 
> 时间：2012-08-01T12:04:56.930
> 
> 标签：symfony, annotations, doctrine-orm, foreign-key-relationship, fosuserbundle

我刚刚开始学习`symfony2`框架。现在我正在构建我的第一个包，一个聊天包。一切正常，但有一件事我无法掌握，即用户表的外键。（我正在使用`FOS User Bundle`和学说）。

FOS 用户表的注释应该是什么样的（一​​对一）？从聊天表中获取数据时，我是否也会获取用户对象，还是需要在读取每一行后获取用户对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:11:36.983

**解决了。**

确保包含用户实体的命名空间：

```
use Acme\UserBundle\Entity; 
```

添加注释：

```
/**
 * @ORM\OneToOne(targetEntity="Acme\UserBundle\Entity\User")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $user; 
```

# mysql - SQL LEFT JOIN 无法正常工作

> ID：11758808
> 
> 赞同：4
> 
> 时间：2012-08-01T12:05:03.417
> 
> 标签：mysql

我无法从查询中获取结果。我想在交易中获取单位销售的总和和总数，其中交易在特定的 zip 中。

这是我的表：

```
TABLE unit_type(
    id (Primary key)
    unit_name (varchar)
    department_id (Foreign key)
)

TABLE transaction(
    id (PK)
    commission_fix_out (int)
    transaction_end_week (int)
    property_id (FK)
    unit_type_id (FK)
    ...
)

TABLE property(
    id (PK)
    property_zip_id (FK)
    ...
 ) 
```

我的**unit_types**表有以下记录：

```
+-----+----------------------+----------------+
| id  | unit_name            | department_id  |
+-----+----------------------+----------------+
| 1   | WV construction      | 1              |
| 2   | WV resale            | 1              |
| 3   | WV rent              | 1              |
| 4   | BV industrial sale   | 2              |
| 5   | BV industrial rent   | 2              |
| ... | ...                  | ...            |
+-----+----------------------+----------------+ 
```

这是我的查询的样子：

```
SELECT SUM(commission_fix_out), COUNT(commission_fix_out), unit_name, ut.id
FROM unit_type as ut
LEFT JOIN transaction as t
ON ut.id = t.unit_type_id
RIGHT JOIN property as p
ON (p.id = t.property_id AND p.property_zip_id = 1459)
WHERE ut.department_id = 1
GROUP BY unit_name
ORDER BY ut.id 
```

这导致：

```
+------------+-------------+-------------+---------+
| SUM(...)   | COUNT(..)   | unit_name   | ut.id   |
+------------+-------------+-------------+---------+
| 40014      | 11          | WV resale   | 2       |
| NULL       | 0           | WV rent     | 3       |
+------------+-------------+-------------+---------+ 
```

我期待另一排**WV 结构**，但它没有出现。有谁知道我在哪里错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:13:54.690

我设法解决了我的问题。我想和你分享我的结果：

```
SELECT SUM(commission_fix_out), COUNT(commission_fix_out), unit_name
FROM unit_type ut
LEFT JOIN transaction t
ON (ut.id = t.unit_type_id AND t.property_id IN (SELECT id FROM property p WHERE
property_zip_id = 1459))   
WHERE department_id = 1
GROUP BY unit_name
ORDER BY ut.id 
```

我没有使用额外的 JOIN，而是尝试在我的 ON 子句中使用子查询，这给出了我的下一个结果：

```
+-----------+-----------+-------------------+------+
| SUM(..)   | COUNT()   | unit_name         | id   |
+-----------+-----------+-------------------+------+
| NULL      | 0         | WV construction   | 1    |
| 40014     | 11        | WV resale         | 2    |
| NULL      | 0         | WV rent           | 3    |
+-----------+-----------+-------------------+------+ 
```

我要感谢所有帮助我解决这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:11:48.207

我认为这是导致问题的正确加入。

试试这个 ：

```
SELECT SUM(commission_fix_out), COUNT(commission_fix_out), unit_name, ut.id
FROM unit_type as ut
LEFT JOIN transaction as t
ON ut.id = t.unit_type_id
WHERE ut.department_id = 1
GROUP BY unit_name
ORDER BY ut.id 
```

结果是什么 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:12:53.920

这可能无法解决问题，但为什么`RIGHT JOIN property`呢？

`LEFT JOIN property`相反会更有意义。

你看，`transaction`表已经被`LEFT JOIN`编辑到`unit_type`我假设是这个查询的基表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T12:15:37.813

右连接将有效地撤消它之前的左连接点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T12:26:24.117

试试这个：

```
SELECT    SUM(commission_fix_out), 
          COUNT(commission_fix_out), 
          unit_name, 
          ut.id
FROM      unit_type as ut
             LEFT JOIN `transaction` as t
                 ON ut.id = t.unit_type_id
             LEFT JOIN `property` p
                 ON p.id = t.property_id
WHERE     ut.department_id = 1 AND
          p.property_zip_id = 1459
GROUP BY  unit_name, p.property_zip_id -- added another column
ORDER BY  ut.id 
```

**更新 1**

```
SELECT *
FROM
    (
        (
            SELECT    SUM(commission_fix_out) total_fix_out, 
                      COUNT(commission_fix_out) count_fix_out, 
                      unit_name, 
                      ut.id
            FROM      unit_type as ut
                         LEFT JOIN `transaction` as t
                             ON ut.id = t.unit_type_id
                         LEFT JOIN `property` p
                             ON p.id = t.property_id
            WHERE     ut.department_id = 1 AND
                      p.property_zip_id = 1459
            GROUP BY  unit_name, p.property_zip_id -- added another column
            ORDER BY  ut.id
        ) tableA
        UNION
        (
            SELECT  0 as total_fix_out,
                    0 as count_fix_out,
                    unit_name,
                    id
            FROM    unit_type
            WHERE   id NOT IN
                    (
                        SELECT  DISTINCT xx.id
                        FROM    unit_type as xx
                                     LEFT JOIN `transaction` as t
                                         ON xx.id = t.unit_type_id
                                     LEFT JOIN `property` p
                                         ON p.id = t.property_id
                        WHERE     xx.department_id = 1 AND
                                  p.property_zip_id = 1459
                    )
        ) tableA
    ) tableC 
```

# c++ - 在一个范围内生成无偏随机整数的最佳算法是什么？

> ID：11758809
> 
> 赞同：16
> 
> 时间：2012-08-01T12:05:04.280
> 
> 标签：c++, c, random, uniform

在这个 StackOverflow 问题中：

[从范围生成随机整数](https://stackoverflow.com/questions/5008804/generating-random-integer-from-a-range)

接受的答案建议使用以下公式在给定`min`和之间生成一个随机整数`max`，其中`min`和`max`包含在范围内：

```
output = min + (rand() % (int)(max - min + 1)) 
```

但它也说

> 这仍然*略微*偏向于较低的数字......也可以扩展它以消除偏差。

但它没有解释为什么它偏向于较低的数字或如何消除这种偏见。所以，问题是：这是在（有符号）范围内生成随机整数的最佳方法，而不依赖于任何花哨的东西，只是`rand()`函数，如果它是最优的，如何消除偏差？

**编辑：**

我刚刚`while`针对浮点外推法测试了@Joey 建议的 -loop 算法：

```
static const double s_invRandMax = 1.0/((double)RAND_MAX + 1.0);
return min + (int)(((double)(max + 1 - min))*rand()*s_invRandMax); 
```

查看有多少均匀的“球”“落入”并分布在多个“桶”中，一个测试用于浮点外推，另一个测试用于`while`循环算法。但是结果会根据“球”（和“桶”）的数量而有所不同，所以我无法轻易选出获胜者。工作代码可以在[这个 Ideone 页面](http://ideone.com/oPhqK)找到。例如，对于 10 个桶和 100 个球，对于浮点外推法，与`while`-loop 算法（分别为 0.04 和 0.05）相比，桶之间与理想概率的最大偏差较小（分别为 0.04 和 0.05），但是对于 1000 个球，`while`-loop 算法较小（0.024 和 0.011），并且对于 10000 个球，浮点外推再次做得更好（0.0034 和 0.0053），依此类推，没有太大的一致性。考虑到没有一种算法始终如一地产生比其他算法更好的均匀分布的可能性，这让我倾向于浮点外推，因为它似乎比`while`-loop 算法执行得更快。那么选择浮点外推算法是否可以，或者我的测试/结论不完全正确？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T12:08:52.553

问题是你正在做一个模运算。`RAND_MAX`如果可以被您的模数整除，这将没有问题，但通常情况并非如此。作为一个非常人为的示例，假设`RAND_MAX`为 11，您的模数为 3。您将获得以下可能的随机数和以下结果余数：

```
0 1 2 3 4 5 6 7 8 9 10
0 1 2 0 1 2 0 1 2 0 1 
```

如您所见，0 和 1 的概率略高于 2。

解决此问题的一种选择是拒绝抽样：通过禁止上面的数字 9 和 10，您可以使结果分布再次均匀。棘手的部分是弄清楚如何有效地做到这一点。在 Java 的方法中可以找到一个非常好的示例（我花了两天时间才理解它*为什么起作用）。*[`java.util.Random.nextInt(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)

Java的算法有点棘手的原因是它们避免了像乘法和除法这样的慢操作来进行检查。如果你不太在乎，你也可以用幼稚的方式来做：

```
int n = (int)(max - min + 1);
int remainder = RAND_MAX % n;
int x, output;
do {
  x = rand();
  output = x % n;
} while (x >= RAND_MAX - remainder);
return min + output; 
```

**编辑：**更正了上述代码中的栅栏错误，现在它可以正常工作了。我还创建了一个小示例程序（C#；为 0 到 15 之间的数字采用统一的 PRNG，并通过各种方式从中构造一个用于 0 到 6 之间的数字的 PRNG）：

```
using System;

class Rand {
    static Random r = new Random();

    static int Rand16() {
        return r.Next(16);
    }

    static int Rand7Naive() {
        return Rand16() % 7;
    }

    static int Rand7Float() {
        return (int)(Rand16() / 16.0 * 7);
    }

    // corrected
    static int Rand7RejectionNaive() {
        int n = 7, remainder = 16 % n, x, output;
        do {
            x = Rand16();
            output = x % n;
        } while (x >= 16 - remainder);
        return output;
    }

    // adapted to fit the constraints of this example
    static int Rand7RejectionJava() {
        int n = 7, x, output;
        do {
            x = Rand16();
            output = x % n;
        } while (x - output + 6 > 15);
        return output;
    }

    static void Test(Func<int> rand, string name) {
        var buckets = new int[7];
        for (int i = 0; i < 10000000; i++) buckets[rand()]++;
        Console.WriteLine(name);
        for (int i = 0; i < 7; i++) Console.WriteLine("{0}\t{1}", i, buckets[i]);
    }

    static void Main() {
        Test(Rand7Naive, "Rand7Naive");
        Test(Rand7Float, "Rand7Float");
        Test(Rand7RejectionNaive, "Rand7RejectionNaive");
    }
} 
```

结果如下（粘贴到 Excel 中，并为单元格添加条件着色，使差异更加明显）：

![在此处输入图像描述](../Images/159b35d5a90d56deb596dce701ffa966.png)

现在我在上面的拒绝抽样中修复了我的错误，它应该可以正常工作（在它偏向 0 之前）。如您所见，float 方法并不完美，它只是以不同的方式分配有偏差的数字。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-01T20:06:48.010

当随机数生成器 (RAND_MAX+1) 的输出数量不能被所需范围 (max-min+1) 整除时，就会出现问题。由于从随机数到输出会有一致的映射，因此某些输出将被映射到比其他输出更多的随机数。这与映射是如何完成的无关——您可以使用模数、除法、转换为浮点数，无论您能想出什么巫术，基本问题仍然存在。

问题的严重性非常小，要求不高的应用程序通常可以忽略它而侥幸成功。范围越小，RAND_MAX 越大，效果越不明显。

我采用了您的示例程序并对其进行了一些调整。首先我创建了一个`rand`只有0-255范围的特殊版本，以更好地展示效果。我对`rangeRandomAlg2`. 最后我将“球”的数量更改为 1000000 以提高一致性。你可以在这里看到结果：http: [//ideone.com/4P4HY](http://ideone.com/4P4HY)

请注意，浮点版本会产生两个紧密组合的概率，接近 0.101 或 0.097，两者之间没有任何关系。这是行动中的偏见。

我认为将此称为“Java 的算法”有点误导——我敢肯定它比 Java 古老得多。

```
int rangeRandomAlg2 (int min, int max)
{
    int n = max - min + 1;
    int remainder = RAND_MAX % n;
    int x;
    do
    {
        x = rand();
    } while (x >= RAND_MAX - remainder);
    return min + x % n;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-01T12:12:37.480

很容易看出为什么这个算法会产生有偏差的样本。假设您的`rand()`函数从 set 返回统一整数`{0, 1, 2, 3, 4}`。如果我想用它来生成一个随机位`0`或`1`，我会说`rand() % 2`。集合`{0, 2, 4}`给了我`0`，集合`{1, 3}`给了我——很明显，我以 60% 和40% 的可能性`1`采样，根本不统一！`0``1`

要解决此问题，您必须确保所需的范围除以随机数生成器的范围，或者在随机数生成器返回的数字大于目标范围的最大可能倍数时*丢弃结果。*

在上面的例子中，目标范围是 2，适合随机生成范围的最大倍数是 4，所以我们丢弃任何不在集合中的样本`{0, 1, 2, 3}`并再次滚动。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T15:05:00.303

到目前为止，最简单的解决方案是`std::uniform_int_distribution<int>(min, max)`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-14T19:20:25.140

您谈到了涉及随机整数算法的两点：它是*最优*的，它是*无偏*的吗？

### 最佳

有很多方法可以定义“最优”算法。在这里，我们根据平均使用的随机位数来查看“最佳”算法。从这个意义上说，`rand`对于随机生成的数字来说，这是一种糟糕的方法，部分原因是它不一定需要生成随机位（因为`RAND_MAX`没有完全指定）*。相反，我们将假设我们有一个“真正的”随机生成器，它可以产生无偏且独立的随​​机位。

1976 年，DE Knuth 和 AC Yao 表明，任何仅使用随机位以给定概率生成随机整数的算法都可以表示为二叉树，其中随机位指示遍历树和每个叶子（端点）的方式对应一个结果。（Knuth 和 Yao，“非均匀随机数生成的复杂性”，在*Algorithms and Complexity*中，1976 年。）他们还给出了给定算法在此任务中平均需要的位数的界限。在这种情况下，均匀生成整数的*最佳*`[0, n)`算法将需要**至少`log2(n)`和最多`log2(n) + 2`平均位**。

在这个意义上，有很多*优化*算法的例子。其中之一是 J. Lumbroso (2013) 的[Fast Dice Roller](https://arxiv.org/abs/1304.1916)（在下面实现），也许另一个例子是2004 年[数学论坛](http://mathforum.org/library/drmath/view/65653.html)中给出的算法。另一方面，所有[由 M. O'Neill 调查](https://www.pcg-random.org/posts/bounded-rands.html)的算法不是最优的，因为它们依赖于一次生成随机位块。另请参阅我关于[整数生成算法](https://peteroupc.github.io/randomfunc.html#RNDINT_Random_Integers_in_0_N)的说明。

下面显示了快速骰子滚子的实现；尽管它是在 JavaScript 中，而不是在 C 或 C++ 中，但它很容易适应任何一种语言，并且其想法是表明以最佳方式从位生成整数并不复杂。在代码中，`(Math.random() < 0.5 ? 0 : 1)`是 JavaScript 生成无偏随机位的方式。

```
function randomInt(minInclusive, maxExclusive) {
  var maxInclusive = (maxExclusive - minInclusive) - 1
  var x = 1
  var y = 0
  while(true) {
    x = x * 2
    var randomBit = (Math.random() < 0.5 ? 0 : 1)
    y = y * 2 + randomBit
    if(x > maxInclusive) {
      if (y <= maxInclusive) { return y + minInclusive }
      // Rejection
      x = x - maxInclusive - 1
      y = y - maxInclusive - 1
    }
  }
} 
```

### 不偏不倚

然而，任何同样*无偏的**最优*整数生成器通常会在最坏的情况下永远运行，正如 Knuth 和 Yao 所展示的那样。回到二叉树，每个结果标签都留在二叉树中，因此 [0, n) 中的每个整数都可以以 1/n 的概率出现。但是如果 1/n 有一个非终止的二元展开式（如果 n 不是 2 的幂就是这种情况），这棵二叉树必然要么——</p> *`n`*

**   具有“无限”深度，或*   在树的末端包括“拒绝”叶子，*

 *在任何一种情况下，算法都不会在恒定时间内运行，并且在最坏的情况下会永远运行。（另一方面，当`n`是 2 的幂时，最佳二叉树将具有有限深度且没有拒绝节点。）快速骰子滚轮是使用“拒绝”事件来确保其无偏性的算法示例；请参阅上面代码中的注释。

一般来说`n`，没有办法在不引入偏差的情况下“修复”这种最坏情况的时间复杂度。例如，模减少（包括`min + (rand() % (int)(max - min + 1))`您的问题中的）相当于一棵二叉树，其中拒绝叶子被标记的结果替换 - 但由于可能的结果比拒绝叶子更多，因此只有一些结果可以代替拒绝离开，引入偏见。如果您在一定次数的迭代后停止拒绝，则会产生相同类型的二叉树 - 以及相同类型的偏差。（但是，根据应用程序，这种偏差可能可以忽略不计。随机整数生成也有安全方面的问题，在这个答案中讨论太复杂了。）

### 笔记

* 还有[其他问题`rand()`](https://stackoverflow.com/questions/52869166/why-is-the-use-of-rand-considered-bad/52881465#52881465)。也许这里最严重的事实是 C 标准没有为`rand()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-26T03:31:15.777

不失一般性，在[a,b]上生成随机整数的问题可以简化为在[0,s)上生成随机整数的问题。从统一的 PRNG 生成有界范围内的随机整数的最新技术由以下最近的出版物表示：

Daniel Lemire，“区间内的快速随机整数生成”。*ACM 翻译。模型。计算。模拟。*29, 1, 第 3 条（2019 年 1 月）（[ArXiv 草案](https://arxiv.org/abs/1805.10941)）

Lemire 表明他的算法提供了无偏的结果，并且受到越来越受欢迎的非常快速的高质量 PRNG（如 Melissa O'Neill 的[PCG 生成器](http://www.pcg-random.org/)）的推动，展示了如何快速计算结果，几乎一直避免缓慢的除法运算.

他的算法的一个示例性 ISO-C 实现`randint()`如下所示。在这里，我结合 George Marsaglia 的旧[KISS64](https://groups.google.com/forum/#!original/comp.lang.c/qFv18ql_WlU/IK8KGZZFJx4J) PRNG 来演示它。出于性能原因，所需的 64×64→128 位无符号乘法通常最好通过机器特定的内在函数或直接映射到适当硬件指令的内联汇编来实现。

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

/* PRNG state */
typedef struct Prng_T *Prng_T;
/* Returns uniformly distributed integers in [0, 2**64-1] */
uint64_t random64 (Prng_T);
/* Multiplies two 64-bit factors into a 128-bit product */
void umul64wide (uint64_t, uint64_t, uint64_t *, uint64_t *);

/* Generate in bias-free manner a random integer in [0, s) with Lemire's fast
   algorithm that uses integer division only rarely. s must be in [0, 2**64-1].

   Daniel Lemire, "Fast Random Integer Generation in an Interval," ACM Trans.
   Model. Comput. Simul. 29, 1, Article 3 (January 2019)
*/
uint64_t randint (Prng_T prng, uint64_t s) 
{
    uint64_t x, h, l, t;
    x = random64 (prng);
    umul64wide (x, s, &h, &l);
    if (l < s) {
        t = (0 - s) % s;
        while (l < t) {
            x = random64 (prng);
            umul64wide (x, s, &h, &l);
        }
    }
    return h;
}

#define X86_INLINE_ASM (0)

/* Multiply two 64-bit unsigned integers into a 128 bit unsined product. Return
   the least significant 64 bist of the product to the location pointed to by
   lo, and the most signfiicant 64 bits of the product to the location pointed
   to by hi.
*/
void umul64wide (uint64_t a, uint64_t b, uint64_t *hi, uint64_t *lo)
{
#if X86_INLINE_ASM
    uint64_t l, h;
    __asm__ (
        "movq  %2, %%rax;\n\t"  // rax = a
        "mulq  %3;\n\t"         // rdx:rax = a * b
        "movq  %%rax, %0;\n\t"  // l = (a * b)<31:0>
        "movq  %%rdx, %1;\n\t"  // h = (a * b)<63:32>
        : "=r"(l), "=r"(h)
        : "r"(a), "r"(b)
        : "%rax", "%rdx");
    *lo = l;
    *hi = h;
#else // X86_INLINE_ASM
    uint64_t a_lo = (uint64_t)(uint32_t)a;
    uint64_t a_hi = a >> 32;
    uint64_t b_lo = (uint64_t)(uint32_t)b;
    uint64_t b_hi = b >> 32;

    uint64_t p0 = a_lo * b_lo;
    uint64_t p1 = a_lo * b_hi;
    uint64_t p2 = a_hi * b_lo;
    uint64_t p3 = a_hi * b_hi;

    uint32_t cy = (uint32_t)(((p0 >> 32) + (uint32_t)p1 + (uint32_t)p2) >> 32);

    *lo = p0 + (p1 << 32) + (p2 << 32);
    *hi = p3 + (p1 >> 32) + (p2 >> 32) + cy;
#endif // X86_INLINE_ASM
}

/* George Marsaglia's KISS64 generator, posted to comp.lang.c on 28 Feb 2009
   https://groups.google.com/forum/#!original/comp.lang.c/qFv18ql_WlU/IK8KGZZFJx4J
*/
struct Prng_T {
    uint64_t x, c, y, z, t;
};

struct Prng_T kiss64 = {1234567890987654321ULL, 123456123456123456ULL,
                        362436362436362436ULL, 1066149217761810ULL, 0ULL};

/* KISS64 state equations */
#define MWC64 (kiss64->t = (kiss64->x << 58) + kiss64->c,            \
               kiss64->c = (kiss64->x >> 6), kiss64->x += kiss64->t, \
               kiss64->c += (kiss64->x < kiss64->t), kiss64->x)
#define XSH64 (kiss64->y ^= (kiss64->y << 13), kiss64->y ^= (kiss64->y >> 17), \
               kiss64->y ^= (kiss64->y << 43))
#define CNG64 (kiss64->z = 6906969069ULL * kiss64->z + 1234567ULL)
#define KISS64 (MWC64 + XSH64 + CNG64)
uint64_t random64 (Prng_T kiss64)
{
    return KISS64;
}

int main (void)
{
    int i;
    Prng_T state = &kiss64;

    for (i = 0; i < 1000; i++) {
        printf ("%llu\n", randint (state, 10));
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-25T14:33:20.707

如果你真的想得到一个完美的生成器，假设你拥有的 rand() 函数是完美的，你需要应用下面解释的方法。

我们将创建一个随机数 r，从 0 到 max-min=b-1，然后很容易移动到您想要的范围，只需 r+min

我们将创建一个 b < RAND_MAX 的随机数，但是可以很容易地采用该过程来为任何基数生成一个随机数

程序：

1.  取一个原始 RAND_MAX 大小的随机数 r，不进行任何截断
2.  以 b 为基数显示此数字
3.  取这个数字的前 m=floor(log_b(RAND_MAX)) 个数字，用于从 0 到 b-1 的 m 个随机数
4.  将每个按 min（即 r+min）移动，以使它们进入您想要的范围（min，max）

由于 log_b(RAND_MAX) 不一定是整数，因此表示中的最后一位数字被浪费了。

仅使用 mod (%) 的原始方法完全被

```
(log_b(RAND_MAX) - floor(log_b(RAND_MAX)))/ceil(log_b(RAND_MAX)) 
```

你可能同意的不是那么多，但如果你坚持要精确，那就是程序。*

# javascript - jQuery UI 自动完成在搜索前显示结果

> ID：11758821
> 
> 赞同：2
> 
> 时间：2012-08-01T12:05:58.943
> 
> 标签：javascript, jquery-ui, autocomplete, jquery-ui-autocomplete

在我关注自动完成输入之前，我希望在我的项目中显示一些初步结果。这些结果应该与自动完成 ajax 请求的结果相同。

我可以通过自动完成的标准选项来做到这一点，还是我应该编写相同的 JavaScript 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:10:34.650

您应该将`minLength`选项设置为`0`. 如果您希望在字段聚焦后立即显示结果，您可以编写一个简单的事件处理程序来完成此操作：

```
$("input").autocomplete({
    source: /* source */,
    minLength: 0
}).on("focus", function () {
    $(this).autocomplete("search", '');
}); 
```

**示例：http:** [//jsfiddle.net/mlSjL/](http://jsfiddle.net/mLSjL/)

**编辑：**如果您想立即显示建议列表，请尝试`create`在自动完成小部件的事件中显示它：

```
$("input").autocomplete({
    source: /* source */,
    minLength: 0,
    create: function () {
        $(this).autocomplete("search", '');
    }
}); 
```

**示例：http:** [//jsfiddle.net/CVUWV/](http://jsfiddle.net/CVUWV/)

# xcode - 检查进程是否从可可应用程序中运行

> ID：11758822
> 
> 赞同：2
> 
> 时间：2012-08-01T12:06:04.433
> 
> 标签：xcode, cocoa, apache, nstask

I am a cocoa beginner and am trying to build an app for personal use, to manage local Apache/MySQL processes. I want to check if httpd (/usr/sbin/httpd) is running. I searched and found some hints pointing to NSTask and isRunning method, but could not get it to run.

How can I check to see if this process is running?

Besides, is this a reliable way to check whether OSX built-in Apache is running?

Thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:28:18.470

是的 NSTask 是检查或启动其他进程的可靠方法。以下代码必须帮助您实现所需。

```
NSTask *task = [[NSTask alloc] init];

[task setLaunchPath:@"/usr/sbin/httpd"];

if([task isRunning])
{
    NSLog(@"Hurray Apache running!!");
}

//If task is not running launch it yourself.

else 
{
    [task launch];

    if([task isRunning])
    {
        NSLog(@"Hurray Apache running!!");
    }
}

[task release]; 
```

# android - 获取 HTML 页面源代码而不是 JSON 响应

> ID：11758825
> 
> 赞同：1
> 
> 时间：2012-08-01T12:06:09.717
> 
> 标签：android, json, https, http-headers

我有一个私有 Web 服务，我需要在其中通过身份验证和 JSONObject 请求。身份验证很完美，响应也很好，但作为响应，我得到了特定 Web 服务实现页面的 HTML 页面源代码。

他们对我发送的 JSONObject 请求有任何问题吗？

请参考以下代码：

公共 JSONObject getJSONFromUrl(String url) { try{ DefaultHttpClient httpClient=new DefaultHttpClient();

```
 HttpPost httppost=new HttpPost(url);
        httppost.setHeader("Authorization", "Basic "+Base64.encodeToString("abc:xyz".getBytes(), Base64.NO_WRAP));

         //Posting request on htt
          httppost.setHeader( "Content-Type", "application/json" );        
          httppost.setHeader("Accept","application/json");
            JSONObject jsonPara = new JSONObject();     
            jsonPara.put("password", "abc");
            jsonPara.put("username", "abc");

            JSONObject jsonobj=new JSONObject();

            jsonobj.put("request", "syncdata/get_country");
            jsonobj.put("para",jsonPara);

            Log.i("jason Object", jsonobj.toString());

            StringEntity se2 = new StringEntity(jsonobj.toString());

            se2.setContentEncoding("UTF-8");
            se2.setContentType("application/json");

            httppost.setEntity(se2);  
        HttpResponse httpResponse=httpClient.execute(httppost);
        HttpEntity httpEntity=httpResponse.getEntity();
        is=httpEntity.getContent();
    }
    catch(UnsupportedEncodingException ae)
    {
    ae.printStackTrace();           
    }
    catch(ClientProtocolException ae)
    {
        ae.printStackTrace();
    }
    catch(IOException ae)
    {
        ae.printStackTrace();
    }
    catch(JSONException e)
    {
        e.printStackTrace();
    }

    try
    {
        BufferedReader reader=new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb=new StringBuilder();
        String line=null;
        while((line= reader.readLine()) != null)
        {
            sb.append(line + "\n");
        }
        is.close();
        json =sb.toString();
    }
    catch(Exception ae)
    {
        ae.printStackTrace();
    }

    try
    {
        jObj=new JSONObject(json);
    }
    catch(JSONException e)
    {
    e.printStackTrace();    
    }

    return jObj;
} 
```

另外，我如何确认我得到的响应是 JSON 或其他格式（除调试之外），我是否得到了我实际应该得到的正确响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:15:41.987

请参阅本守则。

我希望它对你有帮助...

MainActivity.java

```
 public class MainActivity extends Activity {

InputStream is=null;
String result=null;
String line=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

try
{
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://10.0.2.2/text.php");
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent();
Log.e("Pass 1", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 1", e.toString());
Toast.makeText(getApplicationContext(), "Invalid IP Address",Toast.LENGTH_LONG).show();
}    

try
{
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
StringBuilder sb = new StringBuilder();
while ((line = reader.readLine()) != null)
{
sb.append(line + "\n");
}
is.close();
result = sb.toString();
Log.e("Pass 2", "connection success ");
}
catch(Exception e)
{
Log.e("Fail 2", e.toString());
}    

try
{
JSONArray JA=new JSONArray(result);
JSONObject json= null;
final String[] str1 = new String[JA.length()];       
for(int i=0;i<JA.length();i++)
{
json=JA.getJSONObject(i);
str1[i]=json.getString("name");
}

final AutoCompleteTextView text = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextView1);
final List<String> list = new ArrayList<String>();

for(int i=0;i<str1.length;i++)
{
list.add(str1[i]);
}

Collections.sort(list);

ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_spinner_item, list);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
text.setThreshold(1);
text.setAdapter(dataAdapter);

text.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
// TODO Auto-generated method stub
Toast.makeText(getBaseContext(), list.get(arg2).toString(), Toast.LENGTH_SHORT).show();
}
});

}
catch(Exception e)
{
Log.e("Fail 3", e.toString());
}
} 
```

文本.php

```
<?php
$host='127.0.0.1';
$uname='root';
$pwd='password';
$db='android';
$con = mysql_connect($host,$uname,$pwd) or die("connection failed");
mysql_select_db($db,$con) or die("db selection failed");
$r=mysql_query("select * from class",$con);
while($row=mysql_fetch_array($r))
{
$cls[]=$row;
}
print(json_encode($cls));
mysql_close($con);
?> 
```

# database - 推荐应用的逻辑

> ID：11758827
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:06:18.303
> 
> 标签：database, logic

我正在开发一个应用程序——它可能让用户回答 10 个问题——每个问题都有 3-4 个选项。在第 10 个问题的结尾，根据回答，它需要提出一个特定的解决方案。由于有 100 种排列和组合 - 使用和数据库设计所需的逻辑是什么，

谢谢

**编辑**一些更详细的解释

如果我的应用程序用于推荐来自各种移动运营商的数据计划 - 基于用户回答的问题，例如在互联网上花费的时间、正在下载的文件类型等。所以，如果对问题 1 的回答是 a，问题 2 是 c，等等——那么这将是一个特定的计划。如果问题 1 的回答是 b，问题 2 的回答是 c，那么它会推荐一个特定的计划。因此，如果有 10 个问题 - 那么组合可能会非常大。那么是否有某种算法可以处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:26:22.600

只是一个“快速”的评论，考虑让用户在回答每个问题时看到他们可以推荐的公司的变化。

例如，如果我对价格最感兴趣，我会首先回答这个问题，然后立即查看推荐给我的 3 种最便宜的计划/产品。

第二个问题可能是覆盖率，如果我能看到（在我所在地区）覆盖率最好的 3 个计划，那也会很有趣。

当我回答关于智能手机功能的第三个问题并说我想要互联网时，第一个问题应该吐出 3 个最便宜的计划/产品，包括互联网，显然它们可以改变。

等等...

也许让用户“深入研究”每个问题并查看该答案的全部选项也是一个好主意。作为用户，我将不胜感激。

如果为我制作了表格，我将不胜感激，我不想回答 10 个关于我没有真正重视的东西的问题，每个用户都是不同的，并且更愿意在他们的问题。

因此，根据上述情况，它就像一个清单，其中最重要的答案将是具有最合适复选标记的计划/产品。并且要立即做出响应（当用户回答/更改每个问题时），这里 AJAX 可能是您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:01:25.777

**一、逻辑是什么？**

如果我理解正确，您将定义“规则”，例如

```
If the answer to question 5\. is either A or B then the suggested plan would be planB, otherwise execute the rest of the rules. 
```

所以你会使用一个[规则引擎](http://en.wikipedia.org/wiki/Business_rules_engine)，例如：[http ://www.jboss.org/drools/](http://www.jboss.org/drools/)

**二、数据库设计是什么？**

这很简单：

*   用户表，
*   问题表和
*   ANSWERS 表将引用另外两个表

可能还会有一个 QUESTIONNAIRE 表，并且 QUESTIONS 表会引用它。

# jboss - jboss 6集群问题

> ID：11758829
> 
> 赞同：1
> 
> 时间：2012-08-01T12:06:25.207
> 
> 标签：jboss, cluster-computing, jboss6.x

我有一个在 ejb2 和 struts 中开发的旧应用程序，必须部署到 jboss 6.1 实例。如果我将应用程序部署到单个节点，它可以正常工作。但是，如果我尝试在集群环境中部署相同的应用程序，则会收到错误消息：

```
ERROR [org.apache.catalina.connector.CoyoteAdapter] (http-10.101.215.38-8443-4) An exception or error occurred in the container during the request processing: java.lang.RuntimeException: Caught TimeoutException acquiring ownership of Gb6p4nliysUprY2lXQwTrA__
at org.jboss.web.tomcat.service.session.ClusteredSession.acquireSessionOwnership(ClusteredSession.java:603) [:6.1.0.Final]
at org.jboss.web.tomcat.service.session.ClusteredSession.access(ClusteredSession.java:566) [:6.1.0.Final]
at org.apache.catalina.connector.Request.doGetSession(Request.java:2566) [:6.1.0.Final]
at org.apache.catalina.connector.Request.getSession(Request.java:2316) [:6.1.0.Final]
at org.jboss.web.tomcat.service.session.JvmRouteValve.checkJvmRoute(JvmRouteValve.java:95) [:6.1.0.Final]
at org.jboss.web.tomcat.service.session.JvmRouteValve.invoke(JvmRouteValve.java:85) [:6.1.0.Final]
at org.jboss.web.tomcat.service.session.LockingValve.invoke(LockingValve.java:62) [:6.1.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
at java.lang.Thread.run(Thread.java:662) [:1.6.0_24]
Caused by: org.jboss.ha.framework.server.lock.TimeoutException: Cannot acquire lock //localhost/myapp/Gb6p4nliysUprY2lXQwTrA__ from cluster
at     org.jboss.ha.framework.server.lock.SharedLocalYieldingClusterLockManager.lock(SharedLocalYieldingClusterLockManager.java:554) [:2.0.0.Final]
at org.jboss.web.tomcat.service.session.distributedcache.ispn.DistributedCacheManager.acquireSessionOwnership(DistributedCacheManager.java:448) [:1.0.0.Final]
at org.jboss.web.tomcat.service.session.ClusteredSession.acquireSessionOwnership(ClusteredSession.java:595) [:6.1.0.Final]
... 20 more 
```

起初我开始认为这是一个集群配置，但是如果在同一个环境中我部署另一个使用 ejb3 构建的应用程序并且没有 struts 集群可以完美运行。

是否需要对 jboss 集群进行任何特殊配置才能使 ejb2 应用程序工作？

谢谢

凯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:23:51.957

它看起来与此线程中的问题相同。启用粘性会话可能会有所帮助。

[Clustering + Session共享锁获取错误](https://community.jboss.org/thread/162109)

# spring - 尝试将 @PersistenceContext 与 unitName 一起使用时出现异常

> ID：11758830
> 
> 赞同：2
> 
> 时间：2012-08-01T12:06:28.910
> 
> 标签：spring, jpa, java-ee-6, jboss7.x

我正在使用 Spring 3.1、JPA 2 和 Hibernate、JBoss。我想使用多个持久性单元。这是我的persistence.xml

```
 <persistence version="2.0"
       xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
            http://java.sun.com/xml/ns/persistence
            http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
       <persistence-unit name="pu1">
          <jta-data-source>java:jboss/datasources/ds1</jta-data-source>
          <properties>
             <property name="jboss.entity.manager.factory.jndi.name" value="java:jboss/em1" />
             <!-- Properties for Hibernate -->
             <property name="hibernate.hbm2ddl.auto" value="create-drop" />
             <property name="hibernate.show_sql" value="true" />
          </properties>
       </persistence-unit>
<persistence-unit name="pu2">
          <jta-data-source>java:jboss/datasources/ds2</jta-data-source>
          <properties>
             <property name="jboss.entity.manager.factory.jndi.name" value="java:jboss/em2" />
             <!-- Properties for Hibernate -->
             <property name="hibernate.hbm2ddl.auto" value="create-drop" />
             <property name="hibernate.show_sql" value="true" />
          </properties>
       </persistence-unit>
    </persistence> 
```

当我尝试使用这样的 unitName 创建 EntityManager

```
@PersistenceContext(unitName="pu1") 
```

我得到了例外，

```
16:56:35,834 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-1) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'languageDAOImpl': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'pu1' is defined
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:342) [spring-orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517) 
```

我做错了什么？如果我只有一个持久性单元并且如果我`@PersistenceContext`不使用`unitName`它就可以正常工作。

我不知道如何设置和使用多个持久性单元。

# oop - 设计访谈 - 订车系统

> ID：11758832
> 
> 赞同：7
> 
> 时间：2012-08-01T12:06:29.327
> 
> 标签：oop

汽车预订系统是软件开发面试中一个非常流行的问题。当我被问到这个问题时，我设计了以下 ER 结构/OOP 结构：

Car class/table 有 Car Id#、Type（Compact、Standard 等）、Make、Model Customer 有 Customer Id# 等 Reservation 是一个关联表，用于存储 Car Id#、Customer Id# 和预订汽车的日期。为简单起见，我们可以假设汽车只能在几天内预订。

这是我陷入困境的棘手部分 - 当客户 1 在 7 月 27 日预订一辆具有 Id Car 3 的紧凑型汽车时会发生什么。如果 Car 3 在 7 月 24 日总计会发生什么情况。其他紧凑型汽车可用，但在 7 月 24 日至 27 日之间他们都被拿走了。因此，当客户 1 于 7 月 27 日到达时，他最终没有车。

我认为缺陷在于 Car 和 Customer 在 Reservations 表中的耦合方式。有没有更好的方法来模拟这种关系以及常规用例，例如在特定日期找到可用的汽车，为该日期保留它等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:21:42.273

您可以将另一个`boolean`字段添加到`Car`被调用`Working`。如果`Car 3`是总计那么

*   设置`Working`为`false`.
*   中搜索它`Reservation`。
*   如果它在那里，然后在 中搜索该类型的另一辆车`Car`。
*   如果找到然后用另一辆车替换这辆车`Reservation`。
*   否则打电话给客户。

# android - 在 XML 中定义的膨胀 ActionBarSherlock 菜单

> ID：11758835
> 
> 赞同：7
> 
> 时间：2012-08-01T12:06:38.143
> 
> 标签：android, menu, android-actionbar, actionbarsherlock, backwards-compatibility

应该足够简单，但可能不是。

在 Android 3.0+ 中使用操作栏时，您可以选择在 XML 或代码中定义菜单项。我更喜欢在 xml 中对它们进行编码，因为操作栏感觉更多基于 UI 而不是功能。

平均一天，您会使用它来将 xml 扩展为菜单

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    // Menu is defined inside 'res/menu/...xml
    getMenuInflater().inflate(R.menu.activity_home, menu);
    return true;
} 
```

你的 XML 文件看起来像这样

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>
    <item
        android:id="@+id/menu_item_menu"
        android:icon="@drawable/menu_off_128"
        android:showAsAction="ifRoom|withText"
        android:title="@string/inbox_string"/>
    <item
        android:id="@+id/menu_item_gallery"
        android:icon="@drawable/gallery_off_128"
        android:showAsAction="ifRoom|withText"
        android:title="@string/gallery_string"/>
    <item
        android:id="@+id/menu_item_inbox"
        android:icon="@drawable/inbox_off_128"
        android:showAsAction="ifRoom|withText"
        android:title="@string/inbox_string"/>
    <item
        android:id="@+id/menu_item_contact"
        android:icon="@drawable/phone_off_128"
        android:showAsAction="ifRoom|withText"
        android:title="@string/contact_string"/>

</menu> 
```

现在，我面临着使 actionbar 向后兼容的问题，而 actionbarsherlock 似乎是最令人愉快的使用和流行的。所以我用 actionbarsherlock 尝试了上述方法，遗憾的是存在编译时问题。

也就是说，inflater 返回的 Menu 类来自“Android.view.menu”，而不是“com.actionbarsherlock.menu”。我浏览了 github 上的示例，但所有示例都在代码中定义了菜单。

那么有没有人设法获得一个使用基于 XML 文件的布局的 actionbarsherlock 菜单？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-01T12:28:46.210

试试这个

```
 @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        getSupportMenuInflater().inflate(R.menu.your_menu, menu);
        return true;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T00:53:18.283

我自己刚遇到这个问题。

你想要做的是调用*getSupportMenuInflater()*而不是*getMenuInflater()*像这样：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

# wpf - 将 WPF 样式触发器绑定到自定义依赖项属性

> ID：11758836
> 
> 赞同：10
> 
> 时间：2012-08-01T12:06:39.453
> 
> 标签：wpf, triggers, styles, dependencies

我在这里找到了许多类似的线程，但似乎没有一个可以解决我的具体问题。

我需要在某些条件下突出显示文本框的背景。我创建了一个 Highlight 属性并尝试在样式中使用触发器来设置它，但它实际上并没有突出显示文本。

这是我的风格，简化：

```
<Style x:Key="TextBoxStyle" BasedOn="{StaticResource CommonStyles}">
    <Style.Triggers>
        <Trigger Property="Elements:DataElement.Highlight" Value="True">
            <Setter Property="Control.Background"
                    Value="{DynamicResource EntryBoxHighlightBackground}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

元素定义为：

```
xmlns:Elements="clr-namespace:MDTCommon.Controls.Forms.Elements"> 
```

然后我有应用样式的部分：

```
<!-- Applies above style to all TextBoxes -->
<Style TargetType="TextBox" BasedOn="{StaticResource TextBoxContentHolder}" >
    <Setter Property="Validation.ErrorTemplate" Value="{x:Null}" />
    <!-- Overrides the default Error Style -->
</Style> 
```

DataElement 类后面的代码如下：

```
public static readonly DependencyProperty HighlightProperty = 
    DependencyProperty.Register("Highlight", typeof(bool), typeof(DataElement));

public bool Highlight
{
    get { return (bool)base.GetValue(HighlightProperty); }
    set { base.SetValue(HighlightProperty, value); }
} 
```

DataElement 最终派生自 UserControl，它包含对 TextBox 对象以及其他对象的引用。

在包含所有 DataElement 对象的 CustomForm 类中，我有以下设置颜色。

```
Resources["EntryBoxHighlightBackground"] = Brushes.Yellow; 
```

因此，第一个问题是为 DataElement 设置 Highlight 属性不会导致文本框背景以黄色绘制。

另一个问题是我意识到我正在将这种样式应用于所有文本框，并且我可能在其他区域中有文本框，而这些文本框实际上并未包含在 DataElement 中，这可能会导致绑定问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T14:47:16.007

尝试将触发器转换为 DataTrigger，并添加一个直接查看 DataElement 控件的绑定，如下所示：

```
<DataTrigger Binding="{Binding Path=Highlight, RelativeSource={RelativeSource AncestorType={x:Type Elements:DataElement}}}" Value="True">
    <Setter Property="Control.Background" Value="{DynamicResource EntryBoxHighlightBackground}"/>
</DataTrigger> 
```

# qt - 如何在qt中将十进制值写入csv文件

> ID：11758840
> 
> 赞同：0
> 
> 时间：2012-08-01T12:06:55.863
> 
> 标签：qt, csv, save, hex

我写了一段代码，应该将双打保存在 csv 文件中。这里是：

```
QString fileName = QFileDialog::getSaveFileName(this,tr("Save Logger Data"), "",tr("LoggerData(*.csv);;All Files (*)"));
if (fileName.isEmpty())
{
    return;
}
else
{
    QFile file(fileName);
    if (!file.open(QIODevice::WriteOnly))
    {
        QMessageBox::information(this, tr("Unable to open file"), file.errorString());
        return;
    }
    QDataStream out(&file);

    out << data1 << "/t" << data2 << "/n";
} 
```

在这里， data1 和 data2 是双精度数。当我打开保存文件时，我只看到奇怪的字符（我假设它们是十六进制值？？）。如何更改我的代码以保存双精度而不是十六进制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:09:51.307

QDataStream 不是正确的类。对于文本输出，请改用 QTextStream。

# ruby-on-rails - 在 Rails 中使用 AJAX 时，flash[:notice] 不起作用

> ID：11758855
> 
> 赞同：5
> 
> 时间：2012-08-01T12:07:40.443
> 
> 标签：ruby-on-rails, ajax, notice

我已经尝试过不同的 make flash[:notice] 变体无需重新加载即可工作。

Stackoverflow 给了我这个 -[你如何使用 Ajax 请求处理 Rail 的闪存？](https://stackoverflow.com/questions/366311/how-do-you-handle-rails-flash-with-ajax-requests)，但我找不到解决方案，这对我有用。

例如，添加到我的控制器：

```
def create
  @entry = Entry.new(params[:entry])
  respond_to do |format|
  if @entry.save
    format.html { redirect_to @entry, notice: 'Entry was successfully created.' }
    format.js {
  flash.now[:notice] = 'Website was successfully created.'
 render action: 'create'
}
  else
    format.html { render action: "new" }
    format.js { render action: "new" }
  end
  end
end 
```

**创建.js**

```
 $('<%= j render @website %>').appendTo('#websites').hide().fadeIn();
  $(".alert").html("<%= escape_javascript(flash[:notice]) %>"); $(".alert").show(300);
  $("#new_website")[0].reset(); 
```

但它没有用。

有人可以告诉我对他有用的可理解的完整解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:44:08.227

你的 js 模板文件名有错字吗？它应该是 create.js.erb 而不是 create.js
，请严格遵循[https://stackoverflow.com/a/8873592/557863](https://stackoverflow.com/a/8873592/557863)，然后对其进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T03:00:18.733

You're submitting new entries via Ajax, so you shouldn't use the flash -- it's intended for redirect responses, but you're not redirecting. To indicate success or failure, you'd need to write that into your JavaScript response.

# unit-testing - Sismo - PHP 致命错误：找不到类 'Sismo\GrowlNotifier'

> ID：11758859
> 
> 赞同：0
> 
> 时间：2012-08-01T12:08:06.963
> 
> 标签：unit-testing, symfony, continuous-integration

尝试设置 Sismo，运行 php sismo.php 结果：

> PHP 致命错误：找不到类 'Sismo\GrowlNotifier'

我的配置设置在默认`~/.sismo/config.php`位置

这条线是：

```
$notifier = new Sismo\GrowlNotifier('pa$$word'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:10:49.283

正确的 FQCN 是`Sismo\Notifier\GrowlNotifier`.

# android - 使用 ksoap 连接到 Android 上的 CrmDiscoveryService 时，SoapFault-Server 无法处理请求

> ID：11758860
> 
> 赞同：0
> 
> 时间：2012-08-01T12:08:16.393
> 
> 标签：android, ksoap

我正在使用 ksoap 连接到 Android 上的 CrmDiscoveryService，问题来了：

SoapFault - 故障代码：'soap:server' faultstring：'服务器无法处理请求。' faultactor：'null' 详细信息：org.kxml2.kdom.Node@4061bd00

```
//here is namespace,endpoint,soapaction and methodname

public final static String DISCOVERY_NAMESPACE = "http://schemas.microsoft.com/crm/2007/CrmDiscoveryService/";

public final static String DISCOVERY_ENDPOINT_URL = "https://dev.crm5.dynamics.com/MSCRMServices/2007/Passport/CrmDiscoveryService.asmx";

public final static String SOAPACTION = "http://schemas.microsoft.com/crm/2007/CrmDiscoveryService/Execute";

private String MethodName = "Execute";

//below is the code connectting to crmdiscoveryservice

SoapObject rpc = new SoapObject(DISCOVERY_NAMESPACE, MethodName);

RetrievePolicyRequest retrievePolicyRequest = new RetrievePolicyRequest();

PropertyInfo info = new PropertyInfo();

info.name = "parameters";
info.type = retrievePolicyRequest.getClass();
info.setValue(retrievePolicyRequest);
rpc.addProperty(info);

HttpTransportSE ht = new HttpTransportSE(DISCOVERY_ENDPOINT_URL);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

envelope.dotNet = true;
envelope.encodingStyle = "utf-8";
envelope.setOutputSoapObject(rpc);

try {
    ht.call(SOAPACTION, envelope);

    if (envelope.getResponse() != null) {
        SoapPrimitive response = (SoapPrimitive) envelope.bodyIn;
        Log.e(tag, response.toString());
    }

} catch (IOException e) {
         e.printStackTrace();
} catch (XmlPullParserException e) {
    e.printStackTrace();
} 
```

我自己定义了 RetrievePolicyRequest。试了很多次，还是有这个问题，有大神知道怎么解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:59:01.273

以下是我认为您的代码可能出错的以下内容。

1.  您可能使用了错误的 propertyinfo.name。例如查看 htt(REMOVE THIS)ps://dev.crm5.dynamics.com/MSCRMServices/2007/Passport/CrmDiscoveryService.asmx?WSDL ，它确实看起来像你想要`info.name = "Request";`的。如果确实如此，那么您将不得不修改您的复杂类型类以成为请求。

2.  尽管您正在添加一个类作为属性的类型`info.type = retrievePolicyRequest.getClass();`（由于某种原因我仍然不明白）是不够的。您还必须将此类“映射”到您的信封。意思是你应该有

    ```
    envelope.dotNet = "true";
    envelope.encodingStyle = "utf-8";
    envelope.setOutputSoapObject(rpc);
    envelope.addMapping(DISCOVERY_NAMESPACE, "Request", new Request().getClass()); 
    ```

这些是我立即看到的东西，这里有一些东西肯定会帮助你（他们帮了我很多像这样的肥皂电话）。

首先，您必须检查soapUI。您可以开始 14 天试用。有了它，您可以将soapUI 指向一个wsdl url，它可以让您测试方法调用（这样您就可以很容易地看到您的请求应该是什么样子，也可以看到返回的xml 是什么样子）。[http://www.soapui.org/](http://www.soapui.org/)。这个程序将逐字地说明方法是什么，命名空间是什么，url是什么，如果它使用的是soap11还是soap12......等等。使用这个！

其次，对于像这样的复杂类型，你真的应该看看这个教程：[http](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html) ://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html 。我从把头撞在键盘上，到阅读本教程并让我的代码首先尝试工作（这永远不会发生！）。

祝你好运，如果您需要更多帮助，请发布！=)

*   乔伊

# linux - 匿名用户的 Drupal 菜单项和博客条目消失了

> ID：11758864
> 
> 赞同：0
> 
> 时间：2012-08-01T12:08:29.700
> 
> 标签：linux, drupal, drupal-6, blogs, menuitem

我现在已经为一个问题苦苦挣扎了几个小时，但我找不到任何答案或任何有同样问题的人-

我的网站 www.namhost.com (Drupal 6.22) 上缺少一些菜单项，并且在查看博客时显示“未创建博客条目”。当我以管理员身份登录时，一切正常，所以这个问题只发生在匿名/访客用户身上。

我没有更改网站上可能导致此问题的任何内容，而真正奇怪的部分出现了 - 当在本地查看网站的副本时，即使对于匿名/访客用户，一切都可以 100% 工作。

我试过了：

*   刷新缓存
*   重建权限
*   检查数据库中是否存在“匿名”用户
*   在不同的浏览器上查看

这些都没有产生任何结果。

因为问题不会在本地发生，所以我开始相信这可能是站点托管的服务器上的问题（使用 PHP5.2 的 Linux），但管理员看了看，找不到任何东西。

任何帮助/见解将不胜感激。

================已修复<<<<<<<-------------------------- ---

我不允许回答我自己的问题，建议我编辑问题以包含我的答案，所以这里是：

首先，感谢大家的回复。

我禁用了“ACL”模块（http://drupal.org/project/acl），问题就解决了。它以前用于我们的论坛，几个月前也被禁用，因此不再需要它。

我仍然不知道为什么这个模块会导致站点在本地工作而不是在服务器上工作。我将与服务器管理员联系，以了解他们是否更改/更新了服务器上可能导致该模块出现故障的任何内容。

任何见解仍然可能有助于防止这种情况再次发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:30:21.383

## 检查您的 Drupal 配置：

您是否在使用 node_access、content_access 或任何其他与权限相关的插件模块？禁用它们并查看问题是否仍然存在。如果这不起作用，请禁用所有非核心模块并一次重新启用它们，直到找到违规者。

## 比较您的托管配置：

如果与 Drupal 无关，请比较本地和远程服务器配置。两者都使用相同版本的 php、apache、apc、cgi 等吗？两台服务器上的 A`phpinfo();`都应该为您提供最重要的详细信息以供比较。对 MySQL 设置和内容进行类似的比较。最后，检查两个位置之间的 .htaccess 文件（如果有）是否存在差异。

## 测试另一个托管环境：

下载一个像 QuickStart 这样的虚拟设备，它已经配置为托管 Drupal 站点以用于开发和非生产目的，并查看该站点是否可以正常工作。如果是这样，您可以通过移植到提供试用/退款保证的新主机进行额外验证，并查看它是否在那里正常工作。

如果您的网站在其他地方运行良好，请给您当前的主机一个很好的打击，让您通过所有这些来找出问题出在他们的最后。

# c# - 如何以编程方式（C# 或 Java）在 Windows 中启动应用程序并在其窗口中调用 click？

> ID：11758865
> 
> 赞同：1
> 
> 时间：2012-08-01T12:08:30.313
> 
> 标签：c#, java, windows, user-interface, click

有一个可以在 Windows 中运行的简单应用程序。它具有非常简单的界面：带有固定坐标按钮的方形窗口。

我需要编写一个使用此应用程序的程序：启动它并单击其中一个按钮（假设在 (150,200) 处调用单击）。

有没有办法在 Java 或 .NET 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T12:53:51.287

基于 Java 的解决方案是启动应用程序。在 a 中[`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)并使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)与它进行交互。

此线程上的最佳解决方案是 @HFoE，但已被版主删除。作为参考，它基本上归结为..

> 如果您想控制另一个 Windows 应用程序，请使用专门为此构建的工具，例如[AutoIt V3](http://www.autoitscript.com/site/autoit/)。

由于在提供替代方案时“不要这样做”似乎被认为是一个有效的答案（根据 Meta 的一般意见），我不明白为什么删除了答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T12:29:20.643

如果可以的话，作为充满鳗鱼的气垫船 - 使用 autoit - 它会容易得多。如果 AutoIt 不是一个选项，那么您将需要使用 winAPI 函数来执行此操作。

例如在坐标处调用 mouseclick：

```
[DllImport("user32.dll")]
static extern bool SetCursorPos(int x, int y);

[DllImport("user32.dll")]
static extern bool GetCursorPos(ref Point lpPoint);

[DllImport("user32.dll")]
public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);

public void LeftMouseClick(int xpos, int ypos) //Make a click at specified coords and return mouse back
{
    Point retPoint = new Point();
    GetCursorPos(ref retPoint); // set retPoint as mouse current coords
    SetCursorPos(xpos, ypos); //set mouse cursor position
    mouse_event(MOUSEEVENTF_LEFTDOWN, xpos, ypos, 0, 0); 
    mouse_event(MOUSEEVENTF_LEFTUP, xpos, ypos, 0, 0); //click made
    SetCursorPos(retPoint.X, retPoint.Y); //return mouse position to coords
} 
```

但请注意，要在窗口内进行点击，它必须在您的面前 - 例如，您不能点击最小化的应用程序。

[如果您想尝试 - 您可以在PInvoke](http://www.pinvoke.net/)找到所有需要的功能（如何运行程序、通过 hwnd 获取所需的窗口等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:16:57.780

对于 .Net，您几乎可以使用我更喜欢的[AutomationElement 。](http://msdn.microsoft.com/en-us/library/system.windows.automation.automationelement.aspx)有一点学习时间，但应该不会花太多时间。您可以使用[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)启动您的应用程序。

如果你有 VS2010 Pro 或 Ultimate，你可以使用 CodedUITests 来生成几个按钮。

正如@Hovercraft Full Of Eels 所建议的那样——Autoit，Python 也可以这样做

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T12:18:38.490

是的 - 在 C# 中...

1.  使用[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类来开始这个过程（网上有很多关于如何做到这一点的资源。
2.  等到进程开始（或者只是等待一段可能足够长的固定时间，或者你可以尝试做一些花哨的事情，比如 IPC 或监视正在创建的窗口）
3.  要模拟单击，请查看[如何在 C# 中模拟鼠标单击？](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)它使用对[mouse_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260%28v=vs.85%29.aspx)函数的 P/Invoke 调用。

但是请注意，有几件事可能会出错

*   有人可能会移动窗口，或者在启动应用程序时在该窗口顶部放置另一个窗口
*   在较慢的 PC 上，加载应用程序可能需要更长的时间（可以通过监视打开的窗口和等待预期的应用程序窗口出现等操作来减轻这种风险）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T12:19:17.200

在.net中，您可以从 System.Diagnostics [Process.Start启动应用程序，甚至可以传递参数，并模拟鼠标事件，您可以使用 P/Invoke 在](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)[SO here](https://stackoverflow.com/a/5164819/507184)上已经有一个答案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T13:24:28.790

这是我的工作测试应用程序，可以在 Windows 中单击。我们只是启动了一些应用程序并希望在正确的位置单击它）如果有一些以这种方式捕获窗口的解决方案会很好=）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Threading;

namespace ConsoleApplication8
{
    class Program
    {
        static void Main(string[] args)
        {
            var startInfo = new ProcessStartInfo(@"C:\Users\Bodia\Documents\visual studio 2010\Projects\ConsoleApplication8\WindowsFormsApplication1\bin\Debug\WindowsFormsApplication1.exe");
            startInfo.WindowStyle = ProcessWindowStyle.Maximized;

            Console.WriteLine(1);

            var process = Process.Start(startInfo);
            Console.WriteLine(2);

            Thread.Sleep(400);
            Console.WriteLine(3);

            LeftMouseClick(1000, 200);
            Console.WriteLine(4);
        }

        static void CursorFun()
        {
            Point cursorPos = new Point();
            GetCursorPos(ref cursorPos);

            cursorPos.X += 100;
            Thread.Sleep(1000);
            SetCursorPos(cursorPos.X, cursorPos.Y);

            cursorPos.X += 100;
            Thread.Sleep(1000);
            SetCursorPos(cursorPos.X, cursorPos.Y);

            cursorPos.X += 100;
            Thread.Sleep(1000);
            SetCursorPos(cursorPos.X, cursorPos.Y);

            cursorPos.X += 100;
            Thread.Sleep(1000);
            SetCursorPos(cursorPos.X, cursorPos.Y);

        }

        [DllImport("user32.dll")]
        static extern bool SetCursorPos(int x, int y);

        [DllImport("user32.dll")]
        static extern bool GetCursorPos(ref Point lpPoint);

        [DllImport("user32.dll")]
        public static extern void mouse_event(int dwFlags, int dx, int dy, int cButtons, int dwExtraInfo);

        public static void LeftMouseClick(int xpos, int ypos) //Make a click at specified coords and return mouse back
        {
            Point retPoint = new Point();
            GetCursorPos(ref retPoint); // set retPoint as mouse current coords
            SetCursorPos(xpos, ypos); //set mouse cursor position
            mouse_event(MOUSEEVENTF_LEFTDOWN, xpos, ypos, 0, 0);
            mouse_event(MOUSEEVENTF_LEFTUP, xpos, ypos, 0, 0); //click made
            SetCursorPos(retPoint.X, retPoint.Y); //return mouse position to coords
        }
        struct Point
        {
            public int X;
            public int Y;
        }

        private const int MOUSEEVENTF_LEFTDOWN = 0x02;
        private const int MOUSEEVENTF_LEFTUP = 0x04;
        private const int MOUSEEVENTF_RIGHTDOWN = 0x08;
        private const int MOUSEEVENTF_RIGHTUP = 0x10;
    }
} 
```

# django-haystack - 我如何在 django haystack (whoosh) 中使用停用词列表进行过滤

> ID：11758874
> 
> 赞同：0
> 
> 时间：2012-08-01T12:08:55.223
> 
> 标签：django-haystack, whoosh

我正在进行 api 调用，其中用户传递一个字符串，并使用该字符串查询数据库。返回正确的结果，但我想为不同的语言添加停用词以用于额外的过滤。

当我在搜索中使用“和”等词时，它会像应该的那样忽略它，但这仅适用于英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:28:25.833

我创建了一个自定义搜索后端，它扩展了 whoosh_backend.SearchBackend，并在 build_schema 函数中将停用词列表传递给了 StemmingAnalyzer。

# session - Session 中的 ServiceContext 和 OrganizationServiceProxy

> ID：11758876
> 
> 赞同：2
> 
> 时间：2012-08-01T12:09:04.900
> 
> 标签：session, dynamics-crm-2011, disposable

我有一个 ASP.Net 应用程序，它允许用户通过早期绑定实体与 Dynamics CRM 2011 数据进行交互。

我目前将 ServiceContext 和 OrganizationServiceProxy 存储在会话中，原因是我必须获取特定类型的对象，然后在用户需要时获取它们的相关实体。最后在用户点击保存时更新它们。

我知道 ServiceContext 和 OrganizationServiceProxy 实现了 IDisposable ，因此应该被处置。目前，我在 Global.asax 的会话结束时执行此操作。

我正在测试我的想法，但我是否应该在获得实体或完成整个过程时实例化并处理代理和上下文？

所有 MS 指南都显示将整个过程包装在 using 语句中，以便处理对象，但如果该过程需要用户交互怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:34:46.193

除非您在每个页面请求中只使用一次 OrganizationServiceProxy，否则我将创建一个通用函数，该函数在每个请求中仅延迟加载一次 OrganizationServiceProxy，然后在加载时使用 unload 方法处理它（请参阅[“关闭连接”中的“卸载”方法](https://stackoverflow.com/questions/6649141/closing-a-conneciton-in-the-unload-method)，以确保此方法的安全性）

这在大多数情况下都是有意义的。请记住，Using 语句并没有什么特别之处，它实际上保证了 dispose 方法将被调用。为了更简洁的代码，一些边缘情况导致 dispose 不被调用，并且不为单个请求打开 5 个不同的连接，这可能是值得接受的风险。

我认为在会话中存储上下文和代理对你来说是非常危险的，因为人们可以去喝杯咖啡或去洗手间，而你会被许多未使用的打开连接所困。

# sql-server - 我可以在 BIDS 2008 中开发 SSIS 2005 吗？我们在 VS 2010 中选择目标框架的方式

> ID：11758878
> 
> 赞同：3
> 
> 时间：2012-08-01T12:09:08.227
> 
> 标签：sql-server, visual-studio, ssis, business-intelligence, bids

我的机器上有一个 BIDS 2008，我的产品是 SSIS 2005。

目前获得 BIDS 2005 有点困难。

我可以将 BIDS 2008 用作 BIDS 2005 吗？

我在微软技术中见过几个这样的例子。在 Visual Studio 2010 中，我们可以针对较旧的框架。即使是 IE 8，我们也可以让它像 IE 7 一样工作，所以我认为这对于 BIDS 来说是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:11:20.033

不幸的是，答案是否定的:-(

[http://geekswithblogs.net/juang/archive/2007/12/12/visual-studio-2008-will-not-support-sql-server-2005-reporting.aspx](http://geekswithblogs.net/juang/archive/2007/12/12/visual-studio-2008-will-not-support-sql-server-2005-reporting.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T02:47:34.100

kzhen 的答案中的链接指的是 SSRS 而不是 SSIS，但对于 SSIS 也是如此，请参见此处：

[http://technet.microsoft.com/en-us/library/bb522577(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/bb522577(v=sql.100).aspx)

> 商业智能开发工作室中的设计包。您必须使用 SQL Server 2008 版本的 Business Intelligence Development Studio 来开发和维护基于 SQL Server 2008 Integration Services 的包。同样，您必须使用 SQL Server 2005 版本的 Business Intelligence Development Studio 来开发和维护基于 SQL Server 2005 Integration Services 的包。您可以在 SQL Server 2008 版本的 Business Intelligence Development Studio 中加载和运行在 SQL Server 2005 Integration Services 中开发的包。但是，如果您保存所做的更改，则这些包将以 SQL Server 2008 Integration Services 使用的包格式保存。以 SQL Server 2008 Integration Services 使用的格式保存后，

# sql - 一天中缺少时间范围

> ID：11758887
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:09:29.270
> 
> 标签：sql, sql-server, sql-server-2008

我有一张这样的桌子：

```
create table time_sheet
(
      StatusCode char(1),
      start_time datetime,
      end_time datetime
)

insert into time_sheet values
('W','2012-08-01 10:00:00','2012-08-01 12:00:00'),
('D','2012-08-01 12:00:00','2012-08-01 14:00:00'),
('N','2012-08-01 16:00:00','2012-08-01 18:00:00') 
```

输出应该是这样的：

```
StatusCode start_time               end_time
B          2012-08-01 08:00:00.000  2012-08-01 10:00:00.000
W          2012-08-01 10:00:00.000  2012-08-01 12:00:00.000
D          2012-08-01 12:00:00.000  2012-08-01 14:00:00.000
B          2012-08-01 14:00:00.000  2012-08-01 16:00:00.000
N          2012-08-01 16:00:00.000  2012-08-01 18:00:00.000
B          2012-08-01 18:00:00.000  2012-08-01 20:00:00.000 
```

一天的开始和结束声明如下。

```
declare @begingOfDay datetime='2012-08-01 08:00:00.000'
declare @endOfDay    datetime='2012-08-01 20:00:00.000' 
```

基本上，我希望在**begingOfDay** 和**endOfDay**之间的结果集中缺少statusCode **B**的时间范围记录 。请看输出中有 3 条记录添加了 StatusCode B

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:20:33.473

您的示例数据（注意，`T`添加到字符串以强制执行明确的日期转换）：

```
create table time_sheet
(
      StatusCode char(1),
      start_time datetime,
      end_time datetime
)

insert into time_sheet values
('W','2012-08-01T10:00:00','2012-08-01T12:00:00'),
('D','2012-08-01T12:00:00','2012-08-01T14:00:00'),
('N','2012-08-01T16:00:00','2012-08-01T18:00:00')

declare @begingOfDay datetime='2012-08-01T08:00:00.000'
declare @endOfDay    datetime='2012-08-01T20:00:00.000' 
```

和查询：

```
;with AllDTs as (
    select @begingOfDay as TimePoint
    union
    select @endOfDay
    union
    select start_time from time_sheet
    union
    select end_time from time_sheet
), OrderedDTs as (
    select TimePoint,ROW_NUMBER() OVER (ORDER BY TimePoint) as rn
    from AllDTs
), Periods as (
    select o1.TimePoint as start_time,o2.TimePoint as end_time
    from
        OrderedDTs o1
            inner join
        OrderedDTs o2
            on
                o1.rn = o2.rn-1
)
select
    COALESCE(ts.StatusCode,'B') as StatusCode,
    p.start_time,
    p.end_time
from
    Periods p
        left join
    time_sheet ts
        on
            p.start_time = ts.start_time and
            p.end_time = ts.end_time 
```

结果：

```
StatusCode start_time              end_time
---------- ----------------------- -----------------------
B          2012-08-01 08:00:00.000 2012-08-01 10:00:00.000
W          2012-08-01 10:00:00.000 2012-08-01 12:00:00.000
D          2012-08-01 12:00:00.000 2012-08-01 14:00:00.000
B          2012-08-01 14:00:00.000 2012-08-01 16:00:00.000
N          2012-08-01 16:00:00.000 2012-08-01 18:00:00.000
B          2012-08-01 18:00:00.000 2012-08-01 20:00:00.000 
```

请注意，我假设原始表格中没有重叠的时间段。第一个 CTE ( `AllDTs`) 只是找到我们感兴趣的所有唯一日期时间值。`OrderedDTs`而`Periods`不是将所有这些日期时间值排列成连续的时期。然后，最终查询会获取这些句点中的每一个，并尝试将它们匹配回原始表（如果可能）。如果不是，那么它显然是一个`B`时期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:49:29.013

试试这个：

```
declare @begingOfDay datetime='2012-08-01 08:00:00.000'
declare @endOfDay    datetime='2012-08-01 20:00:00.000'

 declare @begingOfDay datetime='2012-08-01 08:00:00.000'
declare @endOfDay    datetime='2012-08-01 20:00:00.000'

;WITH CTEMain as (select ROW_NUMBER() over (order by (select 0)) as id,StatusCode,start_time,end_time from time_sheet)

,CTE2 as (
select * from (

select    CASE WHEN start_time > @begingOfDay then 'B' else StatusCode end as statusCode,
          CASE WHEN start_time > @begingOfDay then @begingOfDay else start_time end as start_time,
          CASE WHEN start_time > @begingOfDay then start_time else end_time end as end_time
          FROM CTEMain where id=1
UNION
select StatusCode,start_time,end_time from CTEMain 
union 

select 'B'
       ,CASE WHEN CAST(((select c.start_time from CTEMain c where c.id=t1.id+1)-t1.end_time) as time) > '00:00:00' then end_time  else null end as start_time
       ,CASE WHEN CAST(((select c.start_time from CTEMain c where c.id=t1.id+1)-t1.end_time) as time) > '00:00:00' then end_time+((select c.start_time from CTEMain c where c.id=t1.id+1)-t1.end_time)  else null end as start_time
     from CTEMain t1

     ) a)

select * from (  
select * from CTE2 where start_time is not null
union all
select 'B',CASE WHEN MAX(end_time) = @endOfDay then null else  MAX(end_time) end as start_time,@endOfDay as end_time from CTE2) a order by start_time 
```

# jakarta-ee - 将新的 jar 文件添加到 Web 应用程序而不重新启动它

> ID：11758889
> 
> 赞同：2
> 
> 时间：2012-08-01T12:09:35.690
> 
> 标签：jakarta-ee, websphere-7

我有一个`Java EE`在 2 节点集群上运行的`WAS 7.0.`Web 应用程序这个 Web 应用程序有多个 jar 文件，其中每个 jar 文件包含一个实用程序列表。将来我可能会向这个 Web 应用程序添加***新的***jar 文件。**当我们向它添加新的 jars 时，我们不希望这个 Web 应用程序停机。**

是否可以在不重新启动 Web 应用程序的情况下将新的 jar 文件添加到 Web 应用程序？更改会立即生效吗？

如何更新已由加载的类加载的现有 jar 文件？是否可以在不重新启动的情况下做到这一点？

我读到了`Hot deployment`WAS 中的一些东西。他们已经提到，`Hot Deployment`不适用于 Solaris 和 HP-UX 操作系统。

您能否建议解决此问题的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:49:06.083

> 是否可以在不重新启动 Web 应用程序的情况下将新的 jar 文件添加到 Web 应用程序？更改会立即生效吗？

不，如果不重新启动应用程序，就不可能将新的 JAR 添加到类加载器。即使您创建一个空的 JAR 并稍后替换它，更改也无法在 0 中断时生效：至少模块仍会重新启动。

> 如何更新已由加载的类加载的现有 jar 文件？是否可以在不重新启动的情况下做到这一点？

你不能，这是不可能的。

> 我读到了关于 WAS 中称为热部署的内容。他们提到，热部署不适用于 Solaris 和 HP-UX 操作系统。

热部署确实允许在停机时间为 0 的情况下替换类（但不是整个 JAR）。

其他选项：

*   使用路由技术（HTTP 代理，WVE），并波纹重启应用程序（即一次在一个集群成员上重新启动应用程序，同时将中间流量路由到另一台服务器）。
*   使用类似 JRebel 的东西。我的理解是它主要针对开发环境，但它也可能支持生产。

# android - Android 4 中的 TabHost 不起作用

> ID：11758898
> 
> 赞同：0
> 
> 时间：2012-08-01T12:10:16.960
> 
> 标签：android, android-tabhost

我有这个设置选项卡布局的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
    android:orientation="vertical"
    android:id="@+id/myLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget 
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
        <FrameLayout
        android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp">      
            <!-- tabs are included dynamically from adapter -->           
        </FrameLayout>      
    </LinearLayout>
</TabHost> 
```

这是我的活动：

```
public class TabBackupRestoreActivity extends SuperActivity {
    @Override View manageActivity() throws Exception {
        return new TabBackupRestoreAdapter(this, this,savedInstanceState);
    }
} 
```

这是管理所有选项卡的适配器：

```
public class TabBackupRestoreAdapter extends TabHost {

    private static int TAB_HEIGHT=40;
    TabHost thisView;

    public TabBackupRestoreAdapter(Context context,ActivityGroup act,Bundle state) {
        super(context);
        thisView = (TabHost)inflate(getContext(), R.layout.tab_backup_restrore, this);

        LocalActivityManager lam = act.getLocalActivityManager();
        lam.dispatchCreate(state);
        thisView.setup(lam);

        addNewTab(R.string.backup,new Intent(getContext(),BackupActivity.class));
        addNewTab(R.string.restore, new Intent(getContext(),RestoreActivity.class));
    }

    private void addNewTab(int stringId, Intent activity){

        TabHost.TabSpec spec = thisView.newTabSpec(getContext().getString(stringId));
        spec = spec.setContent(activity);
        spec = spec.setIndicator(getContext().getString(stringId));
        thisView.addTab(spec);

        //modifico l'altezza del tab
        int totalTabs = thisView.getTabWidget().getChildCount();
        thisView.getTabWidget().getChildAt(totalTabs-1).getLayoutParams().height = TAB_HEIGHT;
    }
} 
```

直到 andorid 2.2 一切正常，但如果这个应用程序在 Android 4 中运行，它会抛出这个异常：

```
android.content.res.Resources$NotFoundException: Resource ID #0x0
android.content.res.Resources.getValue(Resources.java:1018)
android.content.res.Resources.loadXmlResourceParser(Resources.java:2105)
android.content.res.Resources.getLayout(Resources.java:857)
android.view.LayoutInflater.inflate(LayoutInflater.java:394)
android.widget.TabHost$LabelIndicatorStrategy.createIndicatorView(TabHost.java:531)
android.widget.TabHost.addTab(TabHost.java:223)
it.hyde.adapters.TabBackupRestoreAdapter.addNewTab(TabBackupRestoreAdapter.java:41)
it.hyde.adapters.TabBackupRestoreAdapter.<init>(TabBackupRestoreAdapter.java:31)
it.hyde.activities.TabBackupRestoreActivity.manageActivity(TabBackupRestoreActivity.java:9)
it.hyde.activities.SuperActivity.onCreate(SuperActivity.java:41)
android.app.Activity.performCreate(Activity.java:4465)
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
android.app.ActivityThread.access$600(ActivityThread.java:123)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:137)
android.app.ActivityThread.main(ActivityThread.java:4424)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:511)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
dalvik.system.NativeStart.main(Native Method) 
```

我试图用android4库编译，但它是一样的。

我发现这篇文章[Honeycomb and TabHost specs](https://stackoverflow.com/questions/5408452/honeycomb-and-tabhost-specs) which resolve using a costructor，但我不能使用这个解决方案，因为我必须膨胀 xml。

有人可以帮助我吗？

问候

* * *

我找到了这个：

[http://code.google.com/p/android/issues/detail?id=22605](http://code.google.com/p/android/issues/detail?id=22605)

-.-'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:35:25.627

我找到了解决方案，我不知道这是一种解决方法还是正确的方法。我要改变什么？我把`TabHost`作为一个`LinearLayout`而不是根标签的孩子

按照xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabHost 
        android:id="@+id/tabContainer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
            android:orientation="vertical"
            android:id="@+id/myLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <TabWidget 
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"/>
            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:padding="5dp">        
                <!-- tabs are included dynamically from adapter -->           
            </FrameLayout>        
        </LinearLayout>
    </TabHost>        
</LinearLayout> 
```

这是它的适配器：

```
public class TabBackupRestoreAdapter extends LinearLayout {

    private static int TAB_HEIGHT=40;

    TabHost tabView;

    public TabBackupRestoreAdapter(Context context,ActivityGroup act,Bundle state) {
        super(context);
        View view = inflate(getContext(), R.layout.tab_backup_restrore, this);

        tabView = (TabHost)view.findViewById(R.id.tabContainer);    
        LocalActivityManager lam = act.getLocalActivityManager();
        lam.dispatchCreate(state);
        tabView.setup(lam);

        addNewTab(R.string.backup,new Intent(getContext(),BackupActivity.class));
        addNewTab(R.string.restore, new Intent(getContext(),RestoreActivity.class));
    }

    private void addNewTab(int stringId, Intent activity){

        TabHost.TabSpec spec = tabView.newTabSpec(getContext().getString(stringId));
        spec = spec.setIndicator(getContext().getString(stringId));
        spec = spec.setContent(activity);
        tabView.addTab(spec);

        //modifico l'altezza del tab
        int totalTabs = tabView.getTabWidget().getChildCount();
        tabView.getTabWidget().getChildAt(totalTabs-1).getLayoutParams().height = TAB_HEIGHT;
    }
} 
```

# ruby-on-rails - 带有空字符串的 pg_search_scope

> ID：11758905
> 
> 赞同：2
> 
> 时间：2012-08-01T12:10:32.280
> 
> 标签：ruby-on-rails, pg-search

我正在使用 pg_search 进行全文搜索，当我输入搜索词时它工作正常，但是当我给它一个空字符串时，我希望它返回所有模型，而不是我得到任何结果。

如何配置 pg_search_scope 以在空搜索时返回所有模型？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:58:25.020

[这是我来自https://github.com/Casecommons/pg_search/issues/49](https://github.com/Casecommons/pg_search/issues/49)的回答

* * *

我不认为有一个空查询应该总是触发所有记录，原因有几个。

首先，我不认为有一个明确的顺序来返回记录。（通常按搜索排名排序没有查询是没有意义的）

其次，我认为数据库应该定义各种搜索功能如何处理空白字符串，以便所有逻辑都集中在一个地方。

所以，我想提供这个解决方法，我认为它会更适合你的情况。

```
class MyModel < ActiveRecord::Base
  include PgSearch

  pg_search_scope :search_by_name, :against => :name

  def self.search(query)
    if query.present?
      search_by_name(query)
    else
      # No query? Return all records, newest first.
      order("created_at DESC")
    end
  end
end 
```

这个解决方案应该仍然是可链接的，所以你可以在你的控制器中安全地调用这样的东西（假设你正在使用像 kaminari.

```
MyModel.where(:published => true).search(params[:query]).page(params[:page]) 
```

# c++ - 删除“自定义快速访问工具栏”按钮

> ID：11758907
> 
> 赞同：1
> 
> 时间：2012-08-01T12:10:33.963
> 
> 标签：c++, windows, mfc

我正在做一个项目，我们希望有一个不可更改/静态的快速访问栏。我们已经研究过从 CMFCQuickAccessToolbar 继承并删除该按钮，但这些尝试似乎没有结果。完全摆脱按钮就完全摆脱了工具栏。任何人都有这方面的经验，或替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T19:18:22.910

经过一番头疼后，我们发现没有干净的解决方案可以从工具栏中仅删除该按钮。相反，我们选择将我们想要显示的按钮放在选项卡组的快速访问栏中。这些按钮将出现在右侧（在 word 中的帮助图标旁边）。为了复制 QA 按钮的外观，我必须创建一个图像列表并将我们的按钮加载到其中。

```
CImageList theList;
CBitmap bm;
bm.LoadBitmap( IDB_QASMALL );
theList.Create(16,16, ILC_COLOR32 | ILC_MASK, 5, 0);
theList.Add(&bm, RGB(192,192,192)); 
```

然后，我创建了要添加到选项卡组的ribbonButtons，具有正确的命令ID、空文本和图像列表中的正确图标。

```
CMFCRibbonButton* button = new CMFCRibbonButton( ID_SOMECOMMAND, _T("\na"), theList.ExtractIcon(<IconOffset>));
m_wndRibbonBar.AddToTabs(mp); 
```

这不是一个完美的解决方案，但它至少为我们提供了类似的 UI，而无需担心摆脱那个愚蠢的自定义按钮。您还可以自由地在按钮上使用标签。

# ios - 在窗口上显示自定义警报

> ID：11758909
> 
> 赞同：0
> 
> 时间：2012-08-01T12:10:38.003
> 
> 标签：ios, ipad

我的 ios 应用程序中有我的自定义警报。我在视图控制器上添加了它，它工作正常。

但是现在在一种情况下，我的视图隐藏在一个视图之下，所以现在我需要在所有视图或窗口上添加父视图手段。

什么是最好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:27:48.463

您是否尝试过：[parentview bringSubviewToFront:alertview]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:05:43.370

直接添加到应用程序窗口

```
[self.view.window addSubview: myView]; 
```

希望这对你有用。

# c# - 如何在datagridview中动态创建按钮列的button_click函数

> ID：11758912
> 
> 赞同：0
> 
> 时间：2012-08-01T12:10:42.077
> 
> 标签：c#, c#-4.0, datagridview

如何为动态创建的按钮列创建按钮单击功能。

```
DataGridViewButtonColumn select = new DataGridViewButtonColumn();
select.Text = "Details";
select.HeaderText = "Details";
select.Name = "Select";
dataGridView5.Columns.Add(select); 
```

这是我用来在我的 datagridview 中动态创建按钮的代码。

你能举一个例子来说明如何编写`button_click`按钮的 onclick 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:21:09.460

使用 CellContentClick-Event

例子：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.CellContentClick += new DataGridViewCellEventHandler(dataGridView1_CellContentClick);

        DataGridViewButtonColumn select = new DataGridViewButtonColumn();
        select.Text = "Details";
        select.HeaderText = "Details";
        select.Name = "Select";
        dataGridView1.Columns.Add(select);
    }

    private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == dataGridView1.Columns["Select"].Index)
        {
            MessageBox.Show(String.Format("Clicked! Row: {0}", e.RowIndex));
        }
    } 
```

[CellContent点击MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellcontentclick.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:15:39.977

您可以处理其中一个 `DataGridView.CellClick`或`DataGridView.CellContentClick`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:15:18.390

您好，您可以与`CellClick`事件关联

[http://msdn.microsoft.com/fr-fr/libr...0s(VS.80).aspx](http://msdn.microsoft.com/fr-fr/libr...0s(VS.80).aspx)

或者用这个例子非常有趣

[http://www.c-sharpcorner.com/UploadFile/9f4ff8/datagridviewlinkcolumn-datagridviewbuttoncolumn-in-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/9f4ff8/datagridviewlinkcolumn-datagridviewbuttoncolumn-in-C-Sharp/)

# iphone - 如果两个 iphone 都安装了应用程序，有没有办法跟踪另一个 iphone 的 gps？

> ID：11758915
> 
> 赞同：0
> 
> 时间：2012-08-01T12:10:56.547
> 
> 标签：iphone, ios5, gps, xcode4.3

我是 iphone 开发的新手。我想知道如果应用程序安装在两个 iphone 中，是否有框架或方法来获取另一个 iphone 的 gps 位置。如果有什么方法可以请你提前帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:07:48.680

我同意 James 的观点，感谢上帝，它不是开放的，因为任何人都可以通过单一方法查看任何人的位置，但我确实创建了一个解决方案，将其作为测试应用程序来执行，这并不困难。

我使用的框架是获取 GPS 坐标的 Core Location，使用 NSURLConnection 与 Web 服务共享信息的 Foundation Framework，映射坐标的 MapKit，以及开源 SBJson 编码器/解码器。

然后，我创建了一个 PHP Web 服务，使该应用程序的用户能够注册并选择他们将与谁分享他们的位置。

然后每分钟一次，每个处于活动状态的应用程序实例会将其坐标发送到 Web 服务，然后下载允许查看的其他设备的任何坐标。

如果我发布了这个应用程序，我可能会提供一个选项来选择更新频率以延长电池寿命。

由 Apple 创建的两个免费应用程序是 Find Friends 和 Find iPhone 应用程序。

如果您有兴趣创建这样的东西，请查看 developer.apple.com 上的 LocateMe 示例代码。

# mysql - MySQL 查询问题。显示唯一条目的最新日期

> ID：11758917
> 
> 赞同：0
> 
> 时间：2012-08-01T12:11:01.767
> 
> 标签：mysql

这是我的数据库的简化版本

```
ID#
Date (Datetime)
Customer (Varchar)
Item (Varchar) 
```

每个客户可以有多个项目，每一行都有一个唯一的日期时间戳。

我正在尝试编写一个查询以显示属于每个客户的每个附加项目的最新条目

如果这没有意义，这可能会更好：

例如数据。

```
1   1/1/12 00:00:00   Cust1  Item1 
2   2/1/12 00:00:00   Cust1  Item1 
3   3/1/12 00:00:00   Cust1  Item2 
4   2/1/12 00:00:00   Cust2  Item1 
5   3/1/12 00:00:00   Cust2  Item1 
6   4/1/12 00:00:00   Cust2  Item1 
```

应该显示

```
2   2/1/12 00:00:00   Cust1  Item1 
3   3/1/12 00:00:00   Cust1  Item2 
6   4/1/12 00:00:00   Cust2  Item1 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:14:13.780

你可以做：

```
SELECT a.*
FROM   tbl a
JOIN   (
       SELECT MAX(ID) AS ID FROM tbl GROUP BY Customer, Item
       ) b ON a.ID = b.ID 
```

这将获得`ID`每个客户的最高值（假设它是一个自动递增的值，并且最高值也是最新的），并且由于它是唯一的，我们只需在`ID`列上加入同一个表，这将只返回每个客户的最新行。

# css - 浮动元素，跨越多行的文本元素，后跟日期

> ID：11758918
> 
> 赞同：0
> 
> 时间：2012-08-01T12:11:11.420
> 
> 标签：css

我在将示例中的日期放在文本后面时遇到问题

```
<div class="content">
<div class="header">
    <div class="text">asfd asdf sa f dsafas asfd gfds gds g fdsgfds gdsf fds  s gfds fds g fds ggsfd dsfgfds fds fds fds ds  ds dgsd fgfs g a sf faa a DATE right after this --> </div>
    <div class="date">12/12/12</div>
</div>
<div class="tt">asdf asd fdsa fdsa sad fdsas  fa fa f fda fda</div> 
```

​</p>

```
.content {
 display: block
}

.header, .tt {
 float: left;
}

 .header { 
 width: 100%;            
 }

.text {
 background: red;     
}

.date {
   background: blue;            
 } 
```

请看例子：

[http://jsfiddle.net/HpC9p/5/](http://jsfiddle.net/HpC9p/5/)

无论行数如何，我都不想在文本之后紧跟蓝色日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:15:02.167

为什么不将“日期” div 移动到“文本”类中并删除它的浮动并将其设置为“显示：内联”？这容易多了！

这就是你将拥有的：

```
<div class="text">
    asfd asdf sa f dsafas asfd gfds gds g fdsgfds gdsf fds  s gfds fds g fds ggsfd dsfgfds fds fds fds ds  ds dgsd fgfs g a sf faa a DATE right after this -->
    <div class="date">12/12/12</div>
</div> 
```

对于 CSS：

```
.date {
   background: blue;
   display: inline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:20:21.767

您`float: left;`在错误的元素上设置了 ，因为`.date`应该出现在 的右侧`.text`，而不是 . 的右侧`.header`。

所以`.text`需要一个`float: left;`和一个指定的宽度来为日期留出一些空间。

见：http: [//jsfiddle.net/HpC9p/8/](http://jsfiddle.net/HpC9p/8/)

# visual-studio-2010 - Visual Studio 是使用 Visual Studio 制作的吗？

> ID：11758921
> 
> 赞同：0
> 
> 时间：2012-08-01T12:11:20.930
> 
> 标签：visual-studio-2010, visual-studio

只是想知道 Visual Studio 是否是在 Visual Studio 的 IDE 中开发的？也许 VS2010 是使用 VS2008 制作的？

# c - 我看不懂这个程序

> ID：11758922
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:11:28.513
> 
> 标签：c, if-statement, floating-point, operators

> **可能重复：**
> [与浮点文字比较的奇怪输出](https://stackoverflow.com/questions/1839422/strange-output-in-comparision-of-float-with-float-literal)

我无法理解这段代码。如何比较两个相同的数字？

```
#include<stdio.h>

int main()
{
    float a=0.8;
    if(0.8>a)     //how can we compare same numbers?
        printf("c");
    else
        printf("c++");
    return 0;
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:48:25.010

我不明白你为什么问是否可以比较相同的两个数字。`3 > 3`即使 3 与 3 相同，您为什么不期望这样的比较起作用？如果`>`左侧大于右侧，则运算符返回 true，否则返回 false。在这种情况下，`.8`不大于`a`，因此结果为假。

其他人似乎认为您在询问一些浮点舍入问题。但是，即使使用精确的数学，`.8 > .8`也是错误的，这就是您使用显示的代码得到的结果；else 分支被占用。所以这里没有意外的行为可以解释。

你真正的问题是什么？

如果您询问浮点效果，以下是一些信息。

在 C 源代码中，文本“.8”代表可以用双精度表示的最接近 0.8 的数字之一。（一个好的实现使用最接近的数字，但 C 标准允许一些松弛。）在最常见的浮点格式中，最接近 0.8 的双精度值是（作为十六进制浮点数字）0x1.999999999999ap- 1，即（十进制）0.8000000000000000444089209850062616169452667236328125。

这样做的原因是二进制浮点**仅用**代表2 的幂的位来表示数字。（2 的哪个幂取决于浮点值的指数，但无论指数如何，小数部分中的每一位都表示 2 的某个幂，例如 0.5、0.25、0.125、0.0625 和依此类推。）由于 .8 不是任何 2 的幂的精确倍数，因此，当小数部分中的可用位全部使用时，结果值仅接近 0.8；这不准确。

初始化`float a = .8;`将双精度值转换为单精度值，以便可以将其分配给 a。在单精度中，最接近 0.8 的可表示数字是 0x1.99999ap-1（十进制，0.800000011920928955078125）。

因此，当您将“.8”与 a 进行比较时，您会发现这`.8 > a`是错误的。

对于其他一些值，例如 0.7，最接近的可表示数字的计算方式不同，并且关系运算符返回 true。例如，`.7 > .7f`是真的。（源代码中的文本“.7f”代表接近 0.7 的单精度浮点值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T12:14:40.400

0.8 是双倍。当 a 设置为它时，它会转换为浮点数，此时会失去精度。比较采用浮点数并将其提升回双精度，因此值肯定不同。

编辑：我可以证明我的观点。我只是编译并运行了一个程序

```
float a = 0.8;
int b = a == 0.8 ? 1 : 0;
int c = a < 0.8 ? 1 : 0;
int d = a > 0.8 ? 1 : 0;

printf("b=%d, c=%d, d=%d, a=%.12f 0.8=%.12f \n", b, c, d, a, 0.8);
b=0, c=0, d=1, a=0.800000011921 0.8=0.800000000000 
```

请注意，由于晋升为双倍，现在 a 现在有一些非常小的派系部分

# java - 如何更改字符串的颜色

> ID：11758927
> 
> 赞同：0
> 
> 时间：2012-08-01T12:11:36.273
> 
> 标签：java, android

我正在制作一个应用程序，其中我使用字符串在屏幕上显示一些文本。但我想将字符串的颜色更改为红色。我不知道如何将字符串的颜色更改为红色。请告诉我如何去做。这是字符串：

```
strRightAnswer = "Right Answers:" + "  " + String.valueOf(nRightAnswers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:12:51.477

您必须在 TextView 中设置文本的颜色。不是字符串颜色。这是无效的。

```
textView.setTextColor(Color.RED); 
```

或像这样将您的字符串更改为 Html，

```
String s=  "<font color=#00aeef>"+"Right Answers:" + "  " + String.valueOf(nRightAnswers)+"</font>"; 
```

和

```
textView.setText(Html.fromHtml(s)); 
```

并找到红色的颜色代码并将其替换`color=#00aeef`为您想要的颜色，例如红色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T13:05:06.387

**创建文件 res/drawable/text_color.xml：**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="false" android:color="#ffffff" />
    <item android:state_focused="true" android:state_pressed="true" android:color="#ffffff" />
    <item android:state_focused="false" android:state_pressed="true" android:color="#ffffff" />
    <item android:color="#000000" />
</selector> 
```

**然后使用 xml 中的 @drawable/text_color（或代码中的 R.drawable.text_color）作为列表视图项的文本颜色。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T12:15:42.923

如果要更改的颜色不是整个字符串，请阅读[spannablestring](http://developer.android.com/intl/ru/reference/android/text/SpannableString.html)

# magento - Magento - 如何根据产品选择加载下面的一组产品？

> ID：11758933
> 
> 赞同：0
> 
> 时间：2012-08-01T12:11:58.053
> 
> 标签：magento, e-commerce, magento-1.4, magento-1.5

我必须在 Magento 开发一个购物网站，它将有 5 个标签。

**在第一个选项卡**中，我必须显示 10 种不同的产品。根据第一个选项卡中的选择，我必须在第二个选项卡中显示另一组产品。

同样，其他 3 个选项卡将根据前一个选项卡的选择显示相关产品。

> 1.  每个选项卡将有 10 多个产品
> 2.  用户应至少从每个选项卡中选择 1 个产品。

请告诉我，如何实现这一目标？期待 Magento 专家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:00:08.677

在 HTML 中创建 5 个选项卡，编写一个功能以在页面加载时获取第一个选项卡中的所有产品（其他 4 个选项卡为空）。当用户在第一个选项卡中选择产品时，触发一个 ajax 调用，它将带来数据并填充第二个选项卡。同样，当用户从第二个选项卡中选择产品时，触发 ajax，它会带来数据并填充第三个选项卡，第四个和第五个选项卡也是如此。

因此，最后，您必须触发 4 次 ajax 调用才能到达最后一个选项卡。现在，您可以只编写一个函数，只在可以使用一些`product ID`和传递参数的地方编写一个函数`step number`，这样您就可以根据步数标准缩小过滤范围。

# ios - 滚动后带有图像更改的 UITableView

> ID：11758943
> 
> 赞同：0
> 
> 时间：2012-08-01T12:12:36.173
> 
> 标签：ios, uitableview, uiimageview

我正在尝试使用不同的单元格标识符创建自定义 UITableView。在第一个单元格中应显示图像，并在下面显示其余单元格。但是，当滚动后显示的图像消失。我试图通过寻找其他人为类似问题提供的答案来解决，但没有成功。

这是代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    EventoCell *cell;
    static NSMutableString *CellIdentifier;
    if(i==0){
        CellIdentifier = @"imgCell";
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        i++;
    }
    else{
       CellIdentifier = @"CellaEvento";
       cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

       cell.Nome.text=[[AShow objectAtIndex:indexPath.row]GetEvento];
       cell.Localita.text=[[AShow objectAtIndex:indexPath.row]GetLocalita];
       cell.Ora.text=[NSString stringWithFormat:@"%d:%d",[[AShow objectAtIndex:indexPath.row]GetOra],[[AShow objectAtIndex:indexPath.row]GetMinuti]];

       [cell setValue:[[AShow objectAtIndex:indexPath.row]GetEvento] :[[AShow objectAtIndex:indexPath.row]GetGiorno] :[[AShow objectAtIndex:indexPath.row]GetMese] :[[AShow objectAtIndex:indexPath.row]GetAnno] :[[AShow objectAtIndex:indexPath.row]GetOra] :[[AShow objectAtIndex:indexPath.row]GetMinuti]];

    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:32:39.740

你想在第一行显示图像吗？如果是这样，我认为您可以更改该行以判断它是否是第一行

```
if ( i==0 ) 
```

到

```
if (indexPath.row == 0 && indexPath.section == 0) 
```

我认为我必须是班级成员。`UITableView`唯一创建数量有限的`UITableViewCell`. 通常，该数量等于显示的行数。例如，如果屏幕只能显示 10 行，则`UITableView`创建 10 个单元格。滚动后，它通过调用重用创建的单元格`dequeueReusableCellWithIdentifier:forIndexPath`，这使得屏幕外的行释放它们的单元格。向后滚动时，每个“新”输入的项目都需要一个单元格。将`UITableView`要求`tableView:cellForRowAtIndexPath`新的细胞。因此，作为您的场景，只有第一次可以显示图像行，因为在第一次之后，即使向后滚动， i 也非零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:59:03.230

我相信“i”在您的代码中被用作实例变量。`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`相反，您应该依赖作为方法参数传递的 indexPath 变量

表格视图中的第一个项目由以下内容标识：

```
 indexPath.row == 0 and indexPath.section == 0 
```

.row 是给定节中的行索引 .section

确保您已正确实现这两个委托方法，以分别正确识别您在一个部分中的行数和您的部分数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

# c# - 函数调用的问题？

> ID：11758950
> 
> 赞同：-1
> 
> 时间：2012-08-01T12:12:55.620
> 
> 标签：c#, function, arguments

我在按钮 onclick 事件中有一个函数：

```
 protected void show()
    {
        try
        {

            SqlConnection con = new SqlConnection(getconnectionstring());
            con.Open();
            DataTable dt = new DataTable();
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "paging_select";
            cmd.Connection = con;

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@startrowindex", current_page_number);
            cmd.Parameters.AddWithValue("@maximumrows", page_size);
            cmd.Parameters.Add("@totalrows", SqlDbType.Int, 4);
            cmd.Parameters["@totalrows"].Direction =
                          ParameterDirection.Output;
            SqlDataAdapter sda = new SqlDataAdapter(cmd);

            sda.Fill(dt);
            int totalRows = (int)cmd.Parameters["@totalrows"].Value;
            sda.Dispose();
            gridview.DataSource = dt;
            gridview.DataBind();
            con.Close();
           // Response.Write("Total rows=" + totalRows + "<br/>");

            //Response.Write("total pages will be" + totalpages_counter(totalRows).ToString() + "having 3 records per page" + "<br/>");
            label2.Text = current_page_number.ToString();
          //  label2.Visible = false;
            label3.Text = totalpages_counter(totalRows).ToString();
           // label3.Visible = false;
          //  Response.Write("Page" + " " + label2.Text + " " + "of" + " " + label3.Text);

        }
        catch (Exception ee)
        {
            Response.Write(ee.Message);
        }

    } 
```

执行它给出一个错误。

> 错误 1 ​​'show' 没有重载匹配委托 'System.EventHandler'

我希望它是因为函数没有参数。但我的问题是我想在一个可能没有任何参数的函数中执行这段代码，即 **受保护的返回类型函数名（）。**它应该是这样的，因为我必须从其他地方调用这个函数。或者更好的是，您可以告诉我如何调用以下类型的函数：

```
protected void show(Object sender,EventArgs e) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:19:34.673

只需从具有正确签名的单击处理程序中调用您的方法：

```
private void Button1_Click(object sender, EventArgs e)
{
    show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:55:33.653

再添加一个答案，为动态创建的控件（或仅通过代码而不是设计器绑定的事件）提供替代方案。

```
myButton.Click += new EventHandler((sender, e) => show()); 
```

这将设置简单的事件处理程序，然后调用您的`show()`方法。

# continuous-integration - tfs build 找不到 resx 文件

> ID：11758953
> 
> 赞同：0
> 
> 时间：2012-08-01T12:13:10.007
> 
> 标签：continuous-integration, resx, automated-deployment

我正在尝试对我们的测试 IIS Web 服务器使用自动构建和部署，但是，最近，由于某种原因，构建失败，原因如下：

```
Cannot find Errors.resx 
```

Errors.resx 是项目中的一个文件，它已被签入。即使是 VS2010 中的 Publish 选项也可以正常工作。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:25:49.530

我有类似的东西，我想我最终手动修补了notepad ++中资源文件中的值，请参阅[msdn链接](http://connect.microsoft.com/VisualStudio/feedback/details/554759/error-in-control-resx-file-when-adding-imagelist)

# passwords - WSO2 身份服务器用户激活 URL 通过电子邮件

> ID：11758956
> 
> 赞同：3
> 
> 时间：2012-08-01T12:13:19.270
> 
> 标签：passwords, wso2, user-accounts, wso2is, email-verification

我需要在 WSO2 Identity Server 中为新注册的用户帐户实施电子邮件验证，但我还没有找到这样的功能。存储库中是否有任何功能可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T04:54:01.253

WSO2 身份服务器尚不支持此功能，但即将推出的新版本将支持此功能。遗憾的是，还没有这方面的文档可以作为参考。将在创建文档后立即更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T01:16:06.537

您可以按照以下[链接](https://docs.wso2.org/display/IS460/Self+Sign+Up+and+Account+Confirmation)来实现您想要的。

# vb.net - WCF 从存储过程返回结果

> ID：11758959
> 
> 赞同：0
> 
> 时间：2012-08-01T12:13:28.123
> 
> 标签：vb.net, wcf

我的任务是在 VB.NET 中实现 WCF 服务。此 WCF 服务将由我们自己的 .NET Windows Forms 应用程序使用，并提供来自 SQL Server 数据库的数据。数据将显示在第三方网格（Infragistics）中。

最初我打算使用 ADO.NET 并从 WCF 服务中的 SQL 返回数据表或数据集，但我阅读了太多鼓励我远离通过 Internet 返回数据表的文章。我不担心互操作性，但我担心流程的大小/速度。这导致我开始使用 linq to sql 返回可以通过 Internet 传递的实体 (.dbml)

问题：

我们的很多数据来自存储过程，这些存储过程返回的结果集是现有表的混合匹配，因此不匹配任何返回类型。我已经导入了一个返回（自动生成的类型）的存储过程，但是当我尝试通过 WCF 服务返回此类型时，我在跟踪日志中收到此错误：

> 类型 System.Data.Linq.SqlClient.SqlProvider+SingleResult'1[benchmark_prd_colour_findResult] 无法序列化。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

请让我知道当结果与任何特定的现有表不匹配时，我需要做什么才能返回存储过程的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:39:35.277

把它翻译成VB！（抱歉，没有看到标签...假设 C#）

构建您自己的对象 - 并像这样标记它：

```
[DataContract]
public class MyObject{

//here go all your fields which match whats returned in your stored proc
[DataMember]
public String MyField;
[DataMember]
public int MySecondField;

} 
```

然后在获取存储过程的结果时填充它

```
public MyObject GetResult(){
stored_proc_result result = factory.callProc(); //obviously replace this with whatever you use!
MyObject obj = new MyObject{
 MyField = FieldOne,
 MySecondField = FieldTwo
};
return obj;
} 
```

然后，如果您在 WCF 调用中传递 MyObject 实例，它应该可以工作。

# android - 通过谷歌地图校准PNG

> ID：11758960
> 
> 赞同：0
> 
> 时间：2012-08-01T12:13:38.810
> 
> 标签：android, google-maps, png, tiles, layer

我有一个谷歌地图活动，包括小径、地点、接近警报等，我想在当前谷歌地图上的同一位置（按纬度和经度校准）放置一个新的 PNG 地图（新图层）。我怎么能那样做？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:25:41.717

使用 Google Maps [Overlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay)功能。这是需要做的事情的粗略大纲。

```
public class PNGOverlay extends Overlay {
  Bitmap mImage;
  // Allocate once and reuse
  private final Paint mPaint = new Paint();

  PNGOverlay(Bitmap image) {
    mImage=image;

    // Configure paint so image is transparent 
  }

  /**
  * Draw the overlay over the map.
  * 
  * @see com.google.android.maps.Overlay#draw(Canvas, MapView, boolean)
  */
  @Override
  public void draw(Canvas canvas, MapView mapv, boolean shadow) {
    // Use projection to figure out where to draw
    Point center = new Point();
    Projection projection = mapv.getProjection();
    projection.toPixels(new GeoPoint(lat,lon), p);

    // Transform image to fill the correct area
    Matrix matrix = new Matrix;
    // Do stuff

    // Draw the image
    canvas.drawBitmap(mImage, matrix, mPaint);
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:45:18.413

您是否尝试将两个视图都添加到 FrameLayout？但是，我建议您使顶部透明。

[将 Surface View 用于相机和其他用于叠加图像](https://stackoverflow.com/questions/10841235/using-surface-view-for-camera-and-others-for-overlay-image)

# javascript - 从内存中删除 HTML 元素（DOM 节点）

> ID：11758963
> 
> 赞同：8
> 
> 时间：2012-08-01T12:13:53.000
> 
> 标签：javascript, dom

根据[mdn 文档](https://developer.mozilla.org/en/DOM/Node.removeChild)，该方法`removeChild`从 DOM 中删除了一个节点，但它仍然驻留在内存中。我的问题是我也想从内存中删除它。我已经尝试过`delete`操作员，但对象仍然存在......

```
myCanvas.parentElement.removeChild(myCanvas);  // myCanvas actually removed from DOM
delete myCanvas;  // false. does nothing
alert(myCanvas); // shows HTMLCanvasElement instead of undefined 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T12:21:09.730

阅读[http://perfectkills.com/understanding-delete/](http://perfectionkills.com/understanding-delete/)。delete 运算符不适用于变量（这就是它返回的原因`false`）。

如果要删除变量对 DOM 节点的引用，请使用

```
myCanvas = null; 
```

覆盖该值。通常你永远不需要这样做，因为 JS 的垃圾收集器会为你完成所有的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T12:16:49.370

只需为`myCanvas`变量（如`null`）分配另一个值，以便不再有变量引用画布元素。垃圾收集将完成其余的工作。

当然，不能保证。这假设也没有其他变量引用该元素。否则，如果还有*其他*变量、对象等仍然引用该画布元素，那么它根本不会从内存中删除。如果存在包含对元素的引用但无法取消引用的闭包，这将更难删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-25T16:40:30.277

好吧，如果您在没有关键字的情况下初始化`myCanvas`变量，您的代码片段可能会起作用，因为这些变量会自动生成，因此可以使用操作员轻松处理。`var``configurable: true``delete`

否则，您可以使用`getElementsByClassName()`方法之外的对象引用而不是个人`HTMLElement` 本身

-- 我在这里假设这`myCanvas`是`getElementById()`操作等的结果 --

因为 一旦从树中删除，`HTMLCollection`由 生成的将更新自身并删除对有问题的 DOM 对象的任何引用。`getElementsByClassName()`

换句话说，它是**天生**的，因此它不需要任何手动操作来破坏/清除引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T23:46:43.613

基本答案是所有引用画布的变量都需要设置为，`undefined`以便垃圾收集器可以完成其工作。但有时在实践中并不是那么简单。

以下是我在尝试完全删除动态创建的 HTML 画布元素以避免内存泄漏时遇到的几种棘手情况：

(1) 我添加到 canvas 元素的方法拥有自己的引用（创建一个循环）。我通过在删除画布时删除所有自定义属性来解决此问题：

```
function deleteAllProperties(obj) {
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            delete obj[key];
        }
    }
}
deleteAllProperties(myCanvas);
myCanvas = undefined; 
```

(2) 其他对象中的内部变量仍然引用画布。通过将它们全部设置为来修复`undefined`：

```
_myVar = myBuilder = myObserver = undefined; 
```

(3) 引用画布上下文的变量：`var ctx = myCanvas.getContext('2d');`这在某些浏览器中保留在画布上（即使在设置之后`myCanvas = undefined`）。通过清除该变量来修复：

```
ctx = undefined; 
```

# asp.net-mvc-3 - 从 Html 编辑器发布的数据在 Chrome 中不起作用

> ID：11758964
> 
> 赞同：0
> 
> 时间：2012-08-01T12:13:56.993
> 
> 标签：asp.net-mvc-3, html-editor, cleditor

我在 MVC3 视图中使用 Html 编辑器将文章信息存储为：

```
 @using (Html.BeginForm())
     {
      ...
      @Html.TextAreaFor(model => model.OtherInformation, new { @id = "OtherInformation" })
      ...
     }
<link href="@Url.Content("~/Content/jquery.cleditor.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery.cleditor.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.cleditor.xhtml.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $("#OtherInformation").cleditor();
</script> 
```

在控制器中，我编写了将文章保存为的代码：

```
 [ValidateInput(false)]
       [HttpPost]
        public ActionResult Create(Article article)
        {            

            if (ModelState.IsValid)
            {
                article.EntryDate = DateTime.Now;
                new ArticleService().SaveOrUpdateArticle(article);
                return RedirectToAction("ArticleIndex");
            }

            return View(article);
        } 
```

**这一切在 IE 中运行良好，但是当我在 Chrome 中运行相同时，“OtherInformation”总是为 Null。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T14:59:16.430

此问题已在 1.4.0 版中修复。

# playframework-2.0 - Playframework2 中的 Scala 模板

> ID：11758967
> 
> 赞同：0
> 
> 时间：2012-08-01T12:14:21.420
> 
> 标签：playframework-2.0, playframework-1.x

之前已经尝试过`Play1.2.3`..我非常喜欢这个框架。

现在我正在尝试为此启动一个 Web 应用程序，我想尝试一下`Play2.0.2`（最新）。

下载Play2.0.2 Java版..

```
*Play new myFirstApp >>  play run >> Done as expected.* (Selected a simple Java app option 2  ) 
```

仔细查看`html`里面的文件`views`

`index.scala`&`main.scala`为什么？

后来打开了`index.scala`html文件发现了这个：

```
 @(message: String)

 @main("Welcome to Play 2.0") {

   @play20.welcome(message, style = "Java")

 } 
```

看不懂上面的模板代码？

我是否需要具备与未来版本`scala`相处的知识？`Playframework`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:51:19.707

是的，您需要一点 Scala 知识，但在模板所需的范围内，您可以在文档中找到的内容就足够了。

`index.scala.html`是仅用于这一页的模板，`main.scala.html`是类似于的布局

[模板装饰器：#{extends /} 和 #{doLayout /}](http://www.playframework.org/documentation/1.2.4/templates)来自 1.2.x（滚动到该部分）

除此之外，您可以在纯 Java 中创建控制器和模型，请参阅 Play 2 源中包含的示例，您将在短时间内获得它，可以确保您。

# mysql - 我可以使用条件 where 语句从 mysql 获得两个计数吗？

> ID：11758968
> 
> 赞同：1
> 
> 时间：2012-08-01T12:14:20.613
> 
> 标签：mysql, sql

我目前正在根据时间戳获取用户访问次数，但我还想包括总访问次数。这可能与一个 MySQL 语句有关吗？这是我当前的查询，它仅根据时间戳返回一个计数：

```
$sql = "SELECT count(*) as visitors_count FROM profile_visits
        LEFT JOIN users on users.user_id=profile_visits.user_id
        LEFT JOIN profile_info ON profile_info.user_id = users.user_id
        WHERE profile_user_id=5
        AND users.restricted <> 1
        AND profile_visits.visit_time > '2012-07-30 18:53:16'"; 
```

我还可以返回不包括时间戳的访问总数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:23:37.807

您可以使用[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)表达式在 内有条件地聚合`COUNT()`：

```
SELECT    COUNT(*) AS total_count,
          COUNT(CASE WHEN profile_visits.visit_time > '2012-07-30 18:53:16' THEN 1 END) AS visitors_count
FROM      profile_visits
LEFT JOIN users ON users.user_id=profile_visits.user_id
LEFT JOIN profile_info ON profile_info.user_id = users.user_id
WHERE     profile_user_id=5 AND 
          users.restricted <> 1 
```

我只是将`> '2012-07-30 18:53:16'`from`WHERE`子句移到`CASE`表达式中`COUNT()`，如果它满足该条件，则只会在其中计算行。当然，`COUNT(*)`无论时间戳如何，都会计算所有行。

# java - 如何从 Guava 的 List 中获取 max() 元素

> ID：11758982
> 
> 赞同：38
> 
> 时间：2012-08-01T12:15:21.793
> 
> 标签：java, guava

假设我们有一个项目集合：

```
class Item {
    public String title;
    public int price;
}

List<Item> list = getListOfItems(); 
```

我想使用 Guava 库从该列表中获取最高价格的商品（我想是使用[Ordering](https://google.github.io/guava/releases/22.0/api/docs/com/google/common/collect/Ordering.html)）。我的意思类似于这个 Groovy 代码：

```
list.max{it.price} 
```

我怎么做？它的效率如何？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-01T12:18:51.660

```
Ordering<Item> o = new Ordering<Item>() {
    @Override
    public int compare(Item left, Item right) {
        return Ints.compare(left.price, right.price);
    }
};
return o.max(list); 
```

它尽可能高效：它遍历列表中的项目，并返回具有最高价格的项目中的第一个：O(n)。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-10T12:43:20.347

根据 JB 的回答，在处理具有自然顺序的值时，您还可以使用一些速记，例如：

```
Ordering.<Integer> natural().max(listOfIntegers); 
```

有关详细信息，请参阅[Ordering.natural()](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Ordering.html#natural())。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-09-23T15:02:26.683

你可以在没有 Guava 的情况下做到这一点。

Collections 提供了对任何 Collection 进行操作[`min`](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#min-java.util.Collection-)的[`max`](http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#max-java.util.Collection-)方法，包括采用比较器的重载。这里我们使用带有 lambda 的 Java 8 Comparator 静态方法来简洁地指定一个比较器，但在 Java 8 之前您可以使用匿名类：

```
Item max = Collections.max(list, Comparator.comparingInt(i -> i.price)); 
```

如果集合为空，这些方法将抛出 NoSuchElementException。

* * *

Java 8 流提供[`min`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#min-java.util.Comparator-)和[`max`](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#max-java.util.Comparator-)函数采用比较器。这些函数返回`Optional<T>`以优雅地处理为空的流。Comparator 中的静态方法可用于简洁地指定比较器，包括自然排序的常见情况。对于这个问题，你会使用

```
Optional<Item> max = list.stream().max(Comparator.comparingInt(i -> i.price)); 
```

这适用于任何流源，包括所有 Collection 实现以及文件等其他内容，并且可以通过过滤流轻松计算集合子集的最大值。如果你有一个大集合和一个昂贵的比较器（例如，字符串的自然排序），你可以使用并行流。

（旁白：理想情况下，当流类型实现 Comparable 时，Stream 将提供不带参数`min`的`max`重载。不幸的是，Java 不支持基于类型参数有条件地公开方法，因此不值得为此引入一个新的 StreamOfComparable 接口来扩展 Stream案子。）

# android - 触摸主屏幕以提醒 android 中的消息？

> ID：11758984
> 
> 赞同：0
> 
> 时间：2012-08-01T12:15:28.777
> 
> 标签：android, homescreen

当我们触摸/选择主屏幕以提醒 Toast/消息时（消息为“主屏幕”）。

仅用于测试/学习目的。引导我。

是否可以？

您的回答和评论对我来说都是有价值的。

指导我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:36:26.037

只需将此代码段添加到您的代码中：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    keyCode=KeyEvent.KEYCODE_HOME;
    Toast.makeText(this, "Home key pressed.", Toast.LENGTH_LONG).show();
    return super.onKeyDown(keyCode, event);
} 
```

# actionscript-3 - 将 actionscript 对象转换为 XML 时出现问题

> ID：11758987
> 
> 赞同：0
> 
> 时间：2012-08-01T12:15:41.050
> 
> 标签：actionscript-3, apache-flex

我是新来的。我正在尝试将复杂对象转换为 XML。

当我尝试遍历对象时遇到问题。我在这里添加代码片段。

## 创建员工对象

```
 var result:String = new String();
        employeeDept = new EmployeeDept();  
        employee = new Employee();
        employee.employeeId = "56789";
        employee.employeeName = "XYZ";
        //tempString = tempString + "--- Step n ---";

        /*employee.employeeDept.deptId = "2";
        employee.employeeDept.deptName = "APPLE";*/

        employeeDept=new EmployeeDept();            
        employeeDept.deptId = "3";
        employeeDept.deptName = "MS";
        employee.employeeDept.addItem(employeeDept);

        employeeDept=new EmployeeDept();            
        employeeDept.deptId = "2";
        employeeDept.deptName = "APPLE";
        employee.employeeDept.addItem(employeeDept);

        empCollection.addItem(employee); 
```

## 在员工对象上调用转换器方法

```
 recursive(employee, "ShopServiceLifeCycleArtifacts"); 
```

## 转换器方式

```
 public function recursive(obj:Object, str:String):String
             {
           try
            {
        var xml:XML=new XML('<' + str + '></' + str + '>' );
        if(obj is Array && obj.length!=0)
        {   //tempString = tempString + "--- Recursive IF Loop---" + obj.length;
            var ac:ArrayCollection=new ArrayCollection(obj as Array);
            var xml2:XML=new XML(<dept></dept>);
            for (var i:Number=0; i<ac.length; i++)
            {   
                var myObj:Object=ac.getItemAt(i);
                for (var prop:String in myObj)
                {
                    xml2.appendChild(new XML("<" + prop + ">" + myObj[prop]  + "</" + prop + ">"));
                }
            }
            xml.appendChild(xml2);  
        } else {
            if (obj==null)
                tempString = tempString + "--- Obj is null ---";
            else
            {
                tempString = tempString + "--- Obj is not null ---";
            }

            for (var property:String in obj)
            {   
                tempString = tempString + property;
                if(obj[property] is Array)
                {   
                    tempString = tempString + "--- obj[property] is Array---";
                    xml.appendChild(recursive(obj[property] as Array, property));
                } else {
                    tempString = tempString + "--- obj[property] is not Array---";
                    xml.appendChild(XML("<" + property + ">" + obj[property].toString() + "</" + property + ">"));
                }
            }
        }
    }catch(e:Error)
    {
        return tempString+"----------"+e.message; 
    }
    tempString = tempString +xml.toString();
    return xml.toString();
}

} 
```

但现在的问题是，我的员工对象不是一个数组，所以它会进入 else 块。我正在检查对象是否为空。对象不为空。

我要进行下一步，即 for 循环

```
 for (var property:String in obj){ 
```

问题来了。它不会进入这个 for 循环并返回 null。:(

而不是在操作脚本文件中创建员工对象并在此处获取该员工的实例，如果我在此处声明并定义一个employeeName 对象，那么逻辑才起作用。我也会显示该代码。

```
 else {
            //tempString = tempString + "--- Recursive Else Loop---";
            var employeeNew:Object = {employeeId:"123", employeeName:"San Francisco", 
                empDept :[{empDeptId:"12345", empDeptName:"XYZ"},{empDeptId:"54568", empDeptName:"ABC"}]}; 

            for (var prop:String in employeeNew) {      
                //trace("myObject."+prop+" = "+employeeNew[prop]);

                if(employeeNew[prop] is Array)
                {   

                    xml.appendChild(recursive(employeeNew[prop] as Array, prop));
                } else {
                    tempString = tempString + "--- obj[property] is not Array---";
                    xml.appendChild(XML("<" + prop + ">" + employeeNew[prop].toString() + "</" + prop + ">"));

                }

            } 
```

如果我使用此对象，它能够将其转换为 XML。请让我知道我在这里做的错误是什么，因为我无法遍历对象。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:25:09.470

该`for ... in`循环仅适用于对象的动态属性。动态属性是可以在运行时添加到对象/类的属性。

您的第二种方法有效，因为您正在迭代`Object`已添加属性的实际值。

第一个示例不起作用，因为您正在迭代一个`Employee`对象。员工类未标记为`dynamic`，因此您无法向其添加其他属性。即使您做到了`dynamic`（这会影响性能），它也只会遍历您在运行时添加的其他属性，而不是您在类中定义的属性。

此类问题的一种解决方案是使用`describeType()`：

*   [循环遍历动作脚本中的对象属性名称](https://stackoverflow.com/questions/2694850/looping-through-object-property-names-in-actionscript)
*   [http://www.actionscript.org/forums/showthread.php3?t=183820](http://www.actionscript.org/forums/showthread.php3?t=183820)

# php - 使用 curl 的 gmail 未读电子邮件计数

> ID：11758995
> 
> 赞同：5
> 
> 时间：2012-08-01T12:16:00.540
> 
> 标签：php, curl, xml-parsing, gmail, feed

我创建了一个脚本，可以将未读电子邮件列表作为来自 gmail 的提要，这是我的代码

```
<?php
//function to get unread emails taking username and password as parameters
function check_email($username, $password)
{ 
    //url to connect to
    $url = "https://mail.google.com/mail/feed/atom"; 

    // sendRequest 
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($curl, CURLOPT_USERPWD, $username . ":" . $password);
    curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
    curl_setopt($curl, CURLOPT_ENCODING, "");
    $curlData = curl_exec($curl);
    curl_close($curl);
    //returning retrieved feed
    return $curlData;

}

//making page to behave like xml document to show feeds
header('Content-Type:text/xml; charset=UTF-8');
//calling function
$feed = check_email("username", "password");
echo $feed;
?> 
```

输出变成这样

```
<?xml version="1.0" encoding="UTF-8"?>
<feed version="0.3" xmlns="http://purl.org/atom/ns#">
<title>Gmail - Inbox for suneth2@gmail.com</title>
<tagline>New messages in your Gmail Inbox</tagline>
<fullcount>1282</fullcount>
<link rel="alternate" href="http://mail.google.com/mail" type="text/html" />
<modified>2012-08-01T12:33:48Z</modified>
<entry>
<title>eBCS Pro 1 August 2012</title>
<summary>bcs logo eBCS Pro 1 August 2012 Video interview Olympic IT The Met Police&#39;s director of IT, Steve</summary>
<link rel="alternate" href="http://mail.google.com/mail?account_id=test@gmail.com&amp;message_id=138e21a3404cc7b2&amp;view=conv&amp;extsrc=atom" type="text/html" />
<modified>2012-08-01T12:12:44Z</modified>
<issued>2012-08-01T12:12:44Z</issued>
<id>tag:gmail.google.com,2004:1409100718455703474</id>
<author>
<name>eBCS Newsletter</name>
<email>e-bulletin@lists.bcs.org.uk</email>
</author>
</entry>
<entry> 
```

所以想读

```
<fullcount>1282</fullcount> 
```

标签

当您将用户名和密码传递给此功能时，它可以显示电子邮件列表，我只需要获取消息计数，有什么方法可以捕获或计数项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:49:58.790

这就是答案，我使用 php 读取了 xml 标签

```
$xmlobjc = new SimpleXMLElement($feed);

echo $xmlobjc->fullcount[0]; 
```

并将标题替换为

```
header('Content-Type:text/html; charset=UTF-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T21:54:40.773

这也有效：

```
curl -u $(cat username):$(cat password) --silent 'https://mail.google.com/mail/feed/atom' | sed -n 's:.*<fullcount>\(.*\)</fullcount>.*:\1:p' 
```

# ios5 - UIScrollView 忽略/传递 3 次触摸

> ID：11758996
> 
> 赞同：1
> 
> 时间：2012-08-01T12:16:03.560
> 
> 标签：ios5, xcode4, uiscrollview, uigesturerecognizer, uiresponder

因此，我查看了许多可能重复的其他问题。但是上面提到的解决方案似乎都不起作用。此外，答案往往是分散和不完整的。

所以，我在子类 UIScrollView 中有一个 UIView。我需要做的就是让 UIScrollview 忽略所有可能用 3 个手指发生的手势形式，而是将其传递给内部的 UIView。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:21:27.110

您需要对滚动视图进行子类化才能完成此操作。我刚才用 UITableView 测试了这个技术，它工作了。

```
@interface OneTwoTouchScrollView : UIScrollView
@end

@implementation OneTwoTouchScrollView

-(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer*)recognizer
{
    return recognizer.numberOfTouches < 3 && [super gestureRecognizerShouldBegin:recognizer];
}

@end 
```