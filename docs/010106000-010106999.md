# StackOverflow 问答 10106000-10106999

# iphone - 推送任何视图时iphone +隐藏标签栏

> ID：10106017
> 
> 赞同：0
> 
> 时间：2012-04-11T12:35:51.440
> 
> 标签：iphone, ios, uitabbarcontroller

我正在设计一个在标签栏中有超过 4 个选项的应用程序，所以我想做的就是在推送任何视图时隐藏标签栏，并在弹出视图时再次显示它，我尝试了 hidesbottomwhenpushed 但没有工作我，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:51:39.203

使用这个功能

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller 
{
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        for(UIView *view in tabbarcontroller.view.subviews)
        {
            if([view isKindOfClass:[UITabBar class]])
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
            } 
            else 
            {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
            }

        }

        [UIView commitAnimations];

 } 
```

当你调用这个函数时

```
[self hideTabBar:self. tabbarcontroller]; 
```

当你想显示 tabbarcontroller 时使用这个函数

```
 - (void) showTabBar:(UITabBarController *) tabbarcontroller {

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        for(UIView *view in tabbarcontroller.view.subviews)
        {
            NSLog(@"%@", view);

            if([view isKindOfClass:[UITabBar class]])
            {
                [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];

        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
        }

    }

    [UIView commitAnimations]; 
} 
```

# actionscript-3 - 在 as3 中更改 swf 的高度和宽度的问题？

> ID：10106018
> 
> 赞同：1
> 
> 时间：2012-04-11T12:35:53.493
> 
> 标签：actionscript-3, flash

Hai 正在尝试动态添加 swf 的高度和宽度，但我无法更改`stage.stageWidth`，`stage.stageHeight`并且还尝试使用另一种方法。

```
 [SWF( width="900", height="400")] 
```

它工作正常，但在动态添加值时它不能改变。

```
var hei:Number=500;
var wid:Number=300;
[SWF( width=wid, height=hei)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:44:00.927

线

```
[SWF( width="900", height="400")] 
```

就像告诉编译器为 SWF 设置属性一样。

您编写的变量仅在编译器无法发挥作用的运行时发挥作用。所以基本上，你的代码将被忽略。

您可能想在[此处](http://www.kirupa.com/forum/archive/index.php/t-335606.html)查看此讨论。

# tfs - 如何防止门控签到将关键字 ***NO_CI*** 放在评论中

> ID：10106023
> 
> 赞同：15
> 
> 时间：2012-04-11T12:36:01.027
> 
> 标签：tfs, continuous-integration, tfsbuild

这个问题与我 今天早上发布[的在 Team Foundation Server 中结合“门控签入”和“持续集成”构建的问题有关](https://stackoverflow.com/questions/10101144/combining-gated-checkin-and-continuious-integration-builds-in-team-foundatio)

感谢@pantelif，我知道在`Gated Checkin Build`构建后持续集成构建被阻止作为（在大多数情况下）预期行为被触发。Team Foundation Server 将关键字添加到签入注释`***NO_CI***`以执行此操作。

在您在[这里](https://stackoverflow.com/questions/8044776/why-is-no-ci-still-causing-a-continuous-intregration-build)找到的问题中，描述了有人不小心关闭了添加此魔法阶段。

我想要的是触发持续集成构建作为预期行为。所以我想避免将关键字放入我的评论中。

我不知道，是怎么做的。在回答了上述最初的问题后，我在网上搜索了一段时间，但没有找到真正的线索。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T13:24:19.147

您可以通过将SyncWorkspace 工作流活动的[NoCIOption](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.build.workflow.activities.syncworkspace.nocioption.aspx)属性设置为 false来禁用`***NO_CI***`评论。可以在[此处](https://stackoverflow.com/questions/3810427/tfs-2010-build-continuous-integration-and-gated-check-in-together)找到类似的问题和答案。

您可以按照此博客[文章](http://donovanbrown.com/post/How-to-have-CI-builds-run-after-a-Gated-Build)为您的构建定义实现一个参数，或者您可以直接在您的 Gated CheckIn 构建模板中将此属性设置为“false”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-08T18:08:27.320

## vNext 构建 - 防止 ***NO_CI***

对于 vNext 构建，请检查构建的触发器选项卡上的“运行持续集成触发器以进行已提交的更改”选项。

* * *

[![为提交的更改配置运行 CI](../Images/c7f9b3613558a5ca34cc369aa0a4561c.png)](https://i.stack.imgur.com/kNt09.png)

* * *

*请参阅此参考中的“运行 CI 构建的选项”部分：：* [https](https://docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/build/triggers#gated) : //docs.microsoft.com/en-us/vsts/build-release/concepts/definitions/build/triggers#gated

# android - 更改上下文时读取共享首选项

> ID：10106028
> 
> 赞同：4
> 
> 时间：2012-04-11T12:36:15.503
> 
> 标签：android, sharedpreferences

我有一个 DialogView 将设置存储在共享首选项中。它位于 package 中`A`，我有另一个位于 package 的活动`B`，它应该能够读取这些首选项。

所以我创建了一个包装类，它接受上下文和共享首选项名称并检索这些设置。当第一次设置共享首选项时，一切都很好，但是当我更改它时，我得到了相同的结果，这是第一次设置的。

问题是我在一个进程中保存了偏好，并且需要能够在另一个进程中读取它们。

所以它似乎`Context`已经改变了，我无法检索新的上下文。我应该怎么做才能获得最新的共享偏好？

提前谢谢你。

请看一下我的包装类

```
public class PhotoAppWidgetSettingsProxy extends Proxy {

    private final static String PREFERENCES_NAME = PhotoAppWidgetSettingsProxy.class.getName();
    private final static int PREFERENCES_MODE = Context.MODE_PRIVATE;

    private Context mCtx = null;
    private SharedPreferences pref = null;
    private SharedPreferences.Editor editor = null;

    public PhotoAppWidgetSettingsProxy(String name, Context context) {
        super(name, context);       
        mCtx = context;
        pref = context.getSharedPreferences(PREFERENCES_NAME, PREFERENCES_MODE);
        editor = pref.edit();
    }

    private final static String FRAME = "FRAME";

    /**
     * Sets selected frame mode 
     * @param frame id
     */
    public void setFrameMode(int frameId){
        editor.putInt(FRAME, frameId);

        Log.d(PREFERENCES_NAME, "SET MODE="+frameId);
        boolean success = editor.commit();
        Log.d(PREFERENCES_NAME, "SET MODE="+success);
    }
    /**
     * Gets selected frame mode 
     * @return frame id
     */
    public int getFrameMode(){
        Log.d(PREFERENCES_NAME, "GET MODE="+pref.getInt(FRAME, 0));
        return pref.getInt(FRAME, 0);
    } 
```

解决了：

```
private final static int PREFERENCES_MODE = Context.MODE_MULTI_PROCESS; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T11:22:14.800

```
private final static int PREFERENCES_MODE = Context.MODE_MULTI_PROCESS; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:01:11.497

在访问共享首选项/值时，我发现编写一个扩展 Application 的 CustomApplication 类很有用。我可以在其中放置任何必要的字段/方法，并使用以下方法轻松地从任何其他 Android 类中获取它们：

```
CustomApplication app = (CustomApplication) getApplication(); 
int x = app.getX(); 
```

这对你有帮助吗？

# javascript - 使用 page-mod (Firefox Addon) 将 onclick 事件添加到特定按钮

> ID：10106033
> 
> 赞同：4
> 
> 时间：2012-04-11T12:36:25.090
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我正在尝试使用插件生成器开发 Firefox 插件。

我想修改基于 Web 的邮件程序的邮件编辑器。（在下面的代码中，我正在尝试使用 Yahoo! Japan 的邮件服务。）

当用户按下发送按钮时，我想执行特定的代码。

插件代码是：

`main.js`

```
var self = require("self");
var pageMod = require("page-mod");

pageMod.PageMod({
    include: "*.mail.yahoo.co.jp",
    contentScriptWhen: 'end',
    contentScript: "document.getElementById('send_top').setAttribute('onclick', 'alert(\"blabla\")');"
}); 
```

电子邮件编辑器页面中的按钮：

```
<input id="send_top" class="inputbutton" type="submit" title="Submit an email"
       value="Submit" name="action_msg_send" accesskey="9"> 
```

当用户“提交”按钮时，我想显示对话框。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T16:35:50.880

看起来您没有在内容脚本中正确添加 onclick 处理程序。您可以改为使用如下代码：

```
document.querySelector('#send_top').onclick = function() { 
    alert('bla bla'); 
} 
```

这是附加组件构建器中的一个工作示例：

[https://builder.addons.mozilla.org/addon/1048430/latest/](https://builder.addons.mozilla.org/addon/1048430/latest/)

使用 contentScript 属性添加内容脚本代码的一个缺点是难以调试。一些使这更容易的指针：

*   始终使用“contentScriptFile”，并将代码写入位于附加组件数据文件夹中的单独 js 文件中。

*   使用 Firefox 的“Scratchpad”开发人员工具测试您的代码，您可以通过转到工具 -> 开发人员 -> ScratchPad 打开该工具。去做这个：

    *   打开您正在修改的页面
    *   打开便签本
    *   将你的 JS 代码粘贴到 Scratchpad 中
    *   转到执行-> 运行以运行您的代码

# php - 将php性质添加到项目中

> ID：10106037
> 
> 赞同：0
> 
> 时间：2012-04-11T12:36:43.783
> 
> 标签：php, eclipse, eclipse-pdt

我对 Eclipse 中的 PHP 项目有疑问。我在我的 Eclipse 中安装了 Aptana 和 PDT。当我创建 PHP 项目时，我有这样的东西：

![2.png](../Images/ecb7e66963514fc6a43df6dcbe33f37d.png)

但是，如果我将 PHP 特性添加到项目（org.eclipse.php.core.PHPNature）中，那么我会得到以下图片：

![1.png](../Images/afce3971263bea81323efc171f2b2e46.png)

这完全正常吗？这种 PHP 特性有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:35:02.310

这是绝对正常的，也是 PDT 如何在 PHP 项目中提供 Code Assist 的一部分。

基本上 PHP 语言库包含您可以在 PHP 文档中找到的内容。例如，当您调用核心函数`preg_replace()`时，它将提供代码辅助，例如自动完成并向您显示该函数需要哪些参数。它只是一堆核心功能的接口，包含从文档生成的 phpdoc 的 SPL。

PHP 包含路径类似于您`include_path`在 PHP 中的路径，因为您可以引用项目外部的内容，例如 PEAR 或包含共享 PHP 类的公共文件夹，然后由 Ecipe 的代码助手识别。

只是全局命名空间的层次结构视图，类似于如何展开 php 文件并直接从资源管理器中查看其层次结构。

# windows - 远程使用 Windows 应用程序

> ID：10106043
> 
> 赞同：0
> 
> 时间：2012-04-11T12:37:08.250
> 
> 标签：windows, xming

我正在使用一些位于远程 Windows 服务器上的应用程序。在这种情况下，我需要远程登录到这台机器（使用远程桌面）。在一台显示器上拥有两个桌面（本地和远程）很不舒服（我需要一直在它们之间切换）。

有没有类似xming的工具？使用本地应用程序（与我的本地桌面集成）对我来说会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:51:39.110

美好的一天帕维尔。你能具体说明你的情况吗？

1\. 如果您需要远程调用和检索 Windows 对象（程序等）的退出代码，请尝试使用[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)

2\. 如果您需要远程执行代码，请尝试使用某些类型的框架，例如[Pyro](http://irmen.home.xs4all.nl/pyro/)（它是用 Python 编程语言实现的）

3\. 如果在本地使用文件系统，您可以在客户端机器上创建共享并将其挂载到您的主机上

最好的问候，德米特里。

# c# - 服务操作的详细异常

> ID：10106047
> 
> 赞同：1
> 
> 时间：2012-04-11T12:37:15.177
> 
> 标签：c#, wcf, wcf-data-services, odata

我正在使用 C# 构建服务操作。当出现问题时，我想抛出一个可以捕获客户端的异常。

但是，当抛出异常时，客户端只能收到类似“400：错误请求”的一般错误，并且无法访问异常消息。

在我的服务操作中，我启用了详细错误：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
and
config.useVerboseErrors = true; 
```

我还解压缩了 TargetInvocationException，而是使用此函数返回 DataServiceException：

```
 protected override void HandleException(HandleExceptionArgs args)
    {
        // Handle exceptions raised in service operations.
        if (args.Exception.GetType() == typeof(TargetInvocationException)
            && args.Exception.InnerException != null)
        {
            if (args.Exception.InnerException.GetType() == typeof(DataServiceException))
            {
                // Unpack the DataServiceException.
                args.UseVerboseErrors = true;
                args.Exception = args.Exception.InnerException as DataServiceException;
            }
            else
            {
                // Return a new DataServiceException as "400: bad request."
                args.UseVerboseErrors = true;
                args.Exception = new DataServiceException(400, args.Exception.InnerException.Message);
            }
        }
    } 
```

当我使用浏览器时，我可以看到详细的异常消息，但是当我以编程方式尝试时，内部异常为空，我只看到一般错误消息“400：错误请求”。

奇怪的是，如果我返回代码 200 而不是 400，我可以在答案正文中看到异常消息。但显然我不想这样做。

那么，当您从服务操作抛出异常时，有没有办法在客户端获取异常消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:45:44.130

你看过[端到端追踪](http://msdn.microsoft.com/en-us/library/aa738749.aspx)吗？此外，[这个](http://msdn.microsoft.com/en-us/library/ee942778.aspx)MSDN 页面并不像最初看起来那样令人生畏，我认为“发生异常时提供附加信息”部分对您很有用。有一个可爱的阅读。

# php - 用 PHP 替换多个占位符？

> ID：10106052
> 
> 赞同：3
> 
> 时间：2012-04-11T12:37:55.160
> 
> 标签：php, function, str-replace, placeholder

我有一个发送站点电子邮件的功能（使用 phpmailer），我想要做的基本上是让 php 用我提供的内容替换 email.tpl 文件中的所有占位符。对我来说，问题是我不想重复代码，因此我创建了一个函数（如下）。

如果没有 php 函数，我会在脚本中执行以下操作

```
// email template file
$email_template = "email.tpl";

// Get contact form template from file
$message = file_get_contents($email_template);

// Replace place holders in email template
$message = str_replace("[{USERNAME}]", $username, $message);
$message = str_replace("[{EMAIL}]", $email, $message); 
```

现在我知道如何做剩下的了，但我卡在了`str_replace()`，如上所示，我有多个`str_replace()`函数来替换电子邮件模板中的占位符。我想要的是添加`str_replace()`到我的函数（如下）并让它`[\]`在我给它的电子邮件模板中找到所有实例并将其替换为我将给它的占位符值，如下所示：`str_replace("[\]", 'replace_with', $email_body)`

问题是我不知道如何将多个占位符及其替换值传递到我的函数中，并让`str_replace("[{\}]", 'replace_with', $email_body)`处理我给它的所有占位符并用相应的值替换。

因为我想在多个地方使用该函数并避免重复代码，所以在某些脚本上我可能会传递函数 5 个占位符和值，而另一个脚本可能需要将 10 个占位符和值传递给要在电子邮件模板中使用的函数。

我不确定我是否需要在将使用函数的脚本上使用一个数组，并在函数中使用一个`for`循环，也许可以让我的 php 函数从脚本中获取 xx 占位符和 xx 值并遍历占位符并用那里的值替换它们。

这是我上面提到的我的功能。我评论了可能更容易解释的脚本。

```
// WILL NEED TO PASS PERHAPS AN ARRAY OF MY PLACEHOLDERS AND THERE VALUES FROM x SCRIPT
// INTO THE FUNCTION ?
function phpmailer($to_email, $email_subject, $email_body, $email_tpl) {

// include php mailer class
require_once("class.phpmailer.php");

// send to email (receipent)
global $to_email;
// add the body for mail
global $email_subject;
// email message body
global $email_body;
// email template
global $email_tpl;

// get email template
$message = file_get_contents($email_tpl);

// replace email template placeholders with content from x script
// FIND ALL INSTANCES OF [{}] IN EMAIL TEMPLATE THAT I FEED THE FUNCTION 
// WITH AND REPLACE IT WITH THERE CORRESPOING VALUES.
// NOT SURE IF I NEED A FOR LOOP HERE PERHAPS TO LOOP THROUGH ALL 
// PLACEHOLDERS I FEED THE FUNCTION WITH AND REPLACE WITH THERE CORRESPONDING VALUES
$email_body       = str_replace("[{\}]", 'replace', $email_body);

// create object of PHPMailer
$mail = new PHPMailer();

// inform class to use smtp
$mail->IsSMTP();
// enable smtp authentication
$mail->SMTPAuth   = SMTP_AUTH;
// host of the smtp server
$mail->Host       = SMTP_HOST;
// port of the smtp server
$mail->Port       = SMTP_PORT;
// smtp user name
$mail->Username   = SMTP_USER;
// smtp user password
$mail->Password   = SMTP_PASS;
// mail charset
$mail->CharSet    = MAIL_CHARSET;

// set from email address
$mail->SetFrom(FROM_EMAIL);
// to address
$mail->AddAddress($to_email);
// email subject
$mail->Subject = $email_subject;
// html message body
$mail->MsgHTML($email_body);
// plain text message body (no html)
$mail->AltBody(strip_tags($email_body));

// finally send the mail
if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
  } else {
  echo "Message sent Successfully!";
  }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T12:40:43.083

很简单，请参阅[`strtr`^(*文档*)](http://php.net/strtr)：

```
$vars = array(
    "[{USERNAME}]" => $username,
    "[{EMAIL}]" => $email,
);

$message = strtr($message, $vars); 
```

根据需要添加尽可能多（或更少）的替换对。但我建议，你在调用`phpmailer`函数之前处理模板，所以事情是分开的：模板和邮件发送：

```
class MessageTemplateFile
{
    /**
     * @var string
     */
    private $file;
    /**
     * @var string[] varname => string value
     */
    private $vars;

    public function __construct($file, array $vars = array())
    {
        $this->file = (string)$file;
        $this->setVars($vars);
    }

    public function setVars(array $vars)
    {
        $this->vars = $vars;
    }

    public function getTemplateText()
    {
        return file_get_contents($this->file);
    }

    public function __toString()
    {
        return strtr($this->getTemplateText(), $this->getReplacementPairs());
    }

    private function getReplacementPairs()
    {
        $pairs = array();
        foreach ($this->vars as $name => $value)
        {
            $key = sprintf('[{%s}]', strtoupper($name));
            $pairs[$key] = (string)$value;
        }
        return $pairs;
    }
} 
```

然后可以大大简化使用，您可以将整个模板传递给任何需要字符串输入的函数。

```
$vars = compact('username', 'message');
$message = new MessageTemplateFile('email.tpl', $vars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T21:26:22.080

PHP 解决方案可以是：

*   使用简单的`%placeholder%`替换机制：
    *   [`str_replace`](https://www.xeweb.net/2009/12/31/sending-emails-the-right-way-using-phpmailer-and-email-templates/),
    *   [`strtr`](http://php.net/strtr),
    *   [`preg_replace`](https://stackoverflow.com/a/9416351/4354249)
*   使用纯 PHP 模板和条件逻辑（ PHP 中的[短打开标记](http://php.net/manual/en/ini.core.php#ini.short-open-taghttp://php.net/manual/en/ini.core.php#ini.short-open-tag)和[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)）

请[在 Programmers.StackExchange 找到广泛的答案，以了解有关](https://softwareengineering.stackexchange.com/a/318746/228787)**PHP 电子邮件模板**的其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:44:39.537

你为什么不把电子邮件模板也做成一个 php 文件呢？然后您可以执行以下操作：

```
Hello <?=$name?>, my name is <?=$your_name?>, today is <?=$date?> 
```

在电子邮件中生成 HTML，然后将结果作为电子邮件发送。

在我看来，你的做法很艰难？

# javascript - 使用 jquery 在多个字母上为每个循环创建一个循环

> ID：10106056
> 
> 赞同：0
> 
> 时间：2012-04-11T12:38:06.220
> 
> 标签：javascript, jquery

我正在开发一个移动 Web 应用程序，该应用程序使用来自同一目录中的 .jsp 页面的数据。我可以使用 jQuery 的 .val() 获取 formdata 并将其放入变量中。

现在我创建了一个输入数组，并希望使用 $.each 循环它。唯一的问题是当我尝试创建循环时，它分隔每个字母，而不是单词..

这是我写的代码：

```
var entrylist= $('#entrylistForm').val (); 

/* gettin the formvalue. This looks like this:

[{s.ENTRYID=1480565, s.SHEETID=131444777, s.ENTRYDATE=2012-14-04}]

*/

$.each (entrylist, function (key, value) {
alert( key + "=>" + value+"");
    // ...
} 
```

我想得到这样的数组：

```
[0]ENTRYID=1480565,
[1]SHEETID=131444777, etc... 
```

帮助任何人，我无法弄清楚我做错了什么..

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:43:10.057

为什么不使用本机 .split 函数，并按空格分割？假设值是一个字符串。

```
entrylist = entrylist.split(', '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:45:00.780

您应该能够使用拆分功能。

```
var entrylist = $('#entrylistForm').val(); 
var list = str.split(', '); 
```

它将在“，”之后拆分它并将其放入您可以访问的数组中。

见：[http ://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

# java - UML、Java 和 ArrayList

> ID：10106057
> 
> 赞同：1
> 
> 时间：2012-04-11T12:38:06.830
> 
> 标签：java, oop, generics, jakarta-ee, uml

我有一个 UML 图，但我真的不知道应该如何阅读它：

![在此处输入图像描述](../Images/2f8542600cf2e681bc3fce63d43a849b.png)

我不知道我是否应该将数组列表放在 ModeTransport 或 Transports 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:46:46.113

如果从代码生成图表，您 `ArrayList<Transport> liste;`应该`Transport`将列表移至此类（传输）。

如果您从 UML 生成代码，您应该检查关联并更正方向。

# emacs - Emacs 中的反汇编

> ID：10106060
> 
> 赞同：4
> 
> 时间：2012-04-11T12:38:19.903
> 
> 标签：emacs, disassembly, ida

如何在 Emacs 中反汇编`.dll`/ `.so`(C++/C) 或`.pyc`(Python) 文件，就像使用 IDA Pro 等工具一样？

如果可能，请分享一些 Emacs 的反汇编片段/插件。

也许 Emacs 可以比 IDA Pro 更好地处理反汇编。

# node.js - 如何在mongodb中保存对象

> ID：10106061
> 
> 赞同：0
> 
> 时间：2012-04-11T12:38:23.087
> 
> 标签：node.js, mongodb, express, mongoose

我创建了一个表单，其中包含某些字段。我还有一个包含字段数组的字段。该字段的“req.body.lead”输出如下：

```
// output of console.log("req.body.lead",req.body.lead);
     business_address_attributes: 
      { address_type: 'Business',
        street1: 'Street 1...',
        street2: 'Street 2...',
        city: 'City...',
        state: 'State...',
        zipcode: 'Zip Code...',
        country: '' }, 
```

我可以将整个对象存储在另一个对象中：

```
 var address = new Addresses(req.body.lead.business_address_attributes); 
```

在 mongodb 中，我已将一个字段声明为：

```
 business_address_attributes : [Addresses],
   //Note: [Addresses] refers to address class 
```

现在，当我尝试使用以下方法存储内部 monogdb 时，出现错误，无法保存线索

```
var lead = new Leads(req.body.lead);
var address = new Addresses(req.body.lead.business_address_attributes);
lead.business_address_attributes.$push(address);
lead.save();
// console.log(lead.business_address_attributes) now gives following output:
    [ { address_type: 'Business',
  street1: 'Street 1...',
  street2: 'Street 2...',
  city: 'City...',
  state: 'State...',
  zipcode: 'Zip Code...',
  country: '',
  _id: 4f857a2e491383dc64000008 } ] 
```

我不知道如何解决这个问题。有人可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:04:16.933

我对这个问题的解决方案是将包含文档数组的字段声明为参考数组。

`Address`为文档创建架构：

```
 var AddressSchema = new Schema({
     //attributes
  }); 
```

并创建一个模型：

`mongoose.model('address', AddressSchema)`

现在在父文档中你可以说

```
business_address_attributes : [{ type: Schema.ObjectId, ref: 'address' }] 
```

创建新文档时，先创建地址文档，保存，获取已保存文档的 ID 并推送到`lead.business_address_attributes`.

要取回包含地址而不仅仅是 ID 的文档，请使用 mongoose 的`populate('business_address_attributes')`方法。

# ios - 使用 MPMoviePlayerController 从视频应用程序模仿视频章节菜单

> ID：10106062
> 
> 赞同：1
> 
> 时间：2012-04-11T12:38:23.397
> 
> 标签：ios, cocoa-touch, video, mpmovieplayercontroller

我的印象是默认的 iOS 电影播放器​​控制器会自动检测视频文件中*的章节标记，就像*默认的 iOS 视频应用程序一样。我在实验中发现情况似乎并非如此。我尝试使用 SimpleMovieX (v3.11) 和 Subler (v0.15) 为电影添加章节标记，虽然这些章节是由我的计算机上的 Quicktime 拾取的，但我的 iOS 应用程序中的 MPMoviePlayerController （在 5.1 模拟器上）似乎没有显示章节菜单。

我试图以这种方式播放的电影是 *.m4v 文件。

有什么我想念的吗？我的期望可能完全是错误的，但我想知道是否出于某种原因 iOS 对章节标记有更严格的格式要求，或者我是否需要在视频播放器本身上设置一些我缺少的东西。

# gwt - 组合框正确显示文本

> ID：10106063
> 
> 赞同：1
> 
> 时间：2012-04-11T12:38:27.080
> 
> 标签：gwt, combobox, smartgwt

我有一个组合框，当我打开它时应该显示如下文本 ![这](../Images/66317ce2c4589800a67a6729da4d77a7.png)

但是我得到类似的东西 ![这](../Images/9fb5152cd92134f27eb32b4847d6f552.png)

滚动条设置为中间。事物有时是正确显示的相同值，有时是从中间显示（相同值）。

我希望它像第一张图片一样正确显示，我尝试了几件事，但没有成功。

```
itemSection.setHoverAlign(Alignment.LEFT);

itemSection.setTextAlign(Alignment.LEFT);

itemSection.setAlign(Alignment.LEFT); 
```

...和其他相关的东西...

非常感谢任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:10:07.023

任何类型的选择框的问题在于，这些框在浏览器中的显示和行为完全不同。浏览器越老，它处理选择框中的长文本就越差（有些只是截断文本）。我建议使显示的文本尽可能短。这样你就可以避免这个问题。

如果你真的需要长描述，你可以尝试为每个条目添加一个工具提示。或者使用不同的小部件进行选择，例如在单独的对话框中使用一些自定义小部件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:16:50.293

如果我没有弄错，您想将滚动条设置在特定位置。为此，您需要覆盖它的 css 并尝试将滚动条位置设置为 0。这样您的问题就会得到解决。

# excel - VSTO 在代码中启动 EXCEL 未加载

> ID：10106066
> 
> 赞同：1
> 
> 时间：2012-04-11T12:38:34.927
> 
> 标签：excel, vsto, add-in, office-interop

我正在使用以下代码从代码中启动 Excel：

```
var excelApp = new MSExcel.Application { Visible = true };
excelApp.Workbooks.Add();
excelApp = null; 
```

我添加了第二行，因为没有它，启动器关闭时 Excel 会自动关闭。当我添加新工作簿时，它会保持活力。但是，与启动器无关的加载项不会加载。有什么建议么 ？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:35:38.437

理想情况下不能发生，但您可以尝试一种解决方法

```
foreach (COMAddIn addin in application.COMAddIns)
{
      if (addin.Description.ToLower().Equals(addinName.ToLower()) || string.Equals(addin.Description, "[AddInName]", StringComparison.OrdinalIgnoreCase))
       {
            addIn.Connect = true;
            break;
         }
} 
```

# javascript - JS：这有什么问题？尝试单击链接以显示窗口。提示

> ID：10106067
> 
> 赞同：0
> 
> 时间：2012-04-11T12:38:35.550
> 
> 标签：javascript, clipboard, alert, prompt

我知道这是非常基本的，但是由于某种原因，当我单击链接时它根本没有做任何事情，也许我现在工作过度和脑筋急转弯无法发现问题？，大声笑。

我在html页面中声明了这样的外部js文件（像往常一样）：

```
 <script type="text/javascript" src="js/functions.js" defer="defer"></script> 
```

在 js 文件中，我有以下代码：

```
 function copyToClipboard(text) {
      window.prompt ("Copy to Clipboard: Ctrl+C (Windows) or Cmd+C for Mac | Enter", text);
    } 
```

最后，我在我的 PHP 文件中调用函数，就像这样：

```
<a href="javascript:void(0);"  title="Copy ' . $mail . ' to your Clipboard" onClick="copyToClipboard(' . $mail . ');">Copy Address to Clipboard</a>' 
```

查看页面源代码时，调用如下所示（简写）：

```
copyToClipboard(someaddress@domain.com); 
```

当我在 js 文件的最顶部放置一个警报调用时，在任何函数之前，它确实会弹出，所以指向它的链接很好，但是如果我在实际函数中放置一个测试警报，它永远不会弹出。我现在唯一的想法是，在电子邮件地址的每一侧呈现的 html 源代码中是否需要可见引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:40:06.303

JavaScript 中的字符串必须被引用。

```
copyToClipboard("someaddress@domain.com"); 
```

# python - 从用户输入创建一个数字三角形

> ID：10106083
> 
> 赞同：0
> 
> 时间：2012-04-11T12:39:50.907
> 
> 标签：python

我正在尝试使用 Python 从用户输入中创建一个数字三角形。我写了一段代码，但不确定如何在 python 中做一件事。我想将 print("Next row") 相应地更改为相应的行。我怎么做？

代码：

```
numstr= raw_input("please enter the height:")
rows = int( )
def triangle(rows):
    for rownum in range (rows)
        PrintingList = list()
        print("Next row")
        for iteration in range (rownum):
            newValue = raw_input("Please enter the next number:")
            PrintingList.append(int(newValue))
            print() 
```

我的代码有错误吗？或者有什么改进的建议吗？请告诉我..谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:45:50.250

您可以将代码更改为此：

```
numstr= raw_input("please enter the height:")
rows = int(numstr )
def triangle(rows):
  for rownum in range (rows):
      PrintingList = list()
      print "row #%d" % rownum
      for iteration in range (rownum):
          newValue = raw_input("Please enter the number for row #%d:" % rownum)
          PrintingList.append(int(newValue))
          print() 
```

通过使用，`print "%d" % myint`您可以打印一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:55:01.887

我不确定您的程序所需的行为是什么，但这是我的猜测：

```
numstr= raw_input("please enter the height:")

rows = int(numstr) # --> convert user input to an integer
def triangle(rows):
    PrintingList = list()
    for rownum in range (1, rows + 1): # use colon after control structure to denote the beginning of block of code        
        PrintingList.append([]) # append a row
        for iteration in range (rownum):
            newValue = raw_input("Please enter the next number:")
            PrintingList[rownum - 1].append(int(newValue))
            print() 

    for item in PrintingList:
      print item
triangle(rows) 
```

这是输出：

```
please enter the height:3
Please enter the next number:1
()
Please enter the next number:2
()
Please enter the next number:3
()
Please enter the next number:4
()
Please enter the next number:5
()
Please enter the next number:4
()
[1]
[2, 3]
[4, 5, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:53:56.007

如果我理解您的问题，请更改`print("Next row")`为`print("Row no. %i" % rownum)`.

阅读字符串文档，其中解释了`%`格式代码的工作原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T07:34:22.677

```
n = int(input())

for i in range(n):
    out=''
    for j in range(i+1):
        out+=str(n)
    print(out) 
```

这将打印以下内容：

```
>2

2
22

>5

5
55
555
5555
55555 
```

这是你要找的吗？

# iphone - NSCocoaErrorDomain 代码=256

> ID：10106087
> 
> 赞同：21
> 
> 时间：2012-04-11T12:40:02.780
> 
> 标签：iphone, cocoa, nsstring

我已经坚持了一段时间，似乎没有解决这个问题。

我正在尝试将 URL 的内容作为字符串从 URL 中读取，但我感到很奇怪

> 错误 -> 错误域 = NSCocoaErrorDomain 代码 = 256“操作无法完成。（可可错误 256。）”

我的代码：

```
fetchedString = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:@"www.example.com/iphone"] encoding:NSUTF8StringEncoding error:&error];                                     
    NSLog(@"%@",fetchedString);

    // if there is something wrong with the URL 
    if (error) {
        NSLog(@"Error -> %@", error);
        return ;
    } 
```

我究竟做错了什么？我也尝试使用getting as NSData，但我得到了null。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T13:24:22.960

是的，该 URL 缺少方案：“http://”。

“错误 -> 错误域 = NSCocoaErrorDomain 代码 = 256”

有关错误代码，请查看[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)：

Cocoa 错误域中的 NSError 代码。

```
NSFileReadUnknownError = 256, 
```

`NSFileReadUnknownError`
“读取错误，原因未知”

并不是说错误定义很有帮助。:-)

也不要检查 if`error`是`nil`判断是否有错误，检查返回值为`nil`. `error`不保证`nil`成功执行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-09T02:14:26.047

我在访问设备上的文件时遇到了类似的问题。我遵循[NSURL isFileURL 总是返回 NO](https://stackoverflow.com/questions/13557191/nsurl-isfileurl-always-returns-no/13557216#13557216) 并使用 [NSURL fileURLWithPath] 而不是 [NSURL URLWithString] - 这有效！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T11:34:18.427

我们的 ssl 证书一过期，我就收到了这个错误（Error Domain=NSCocoaErrorDomain Code=256）。这可能对您没有帮助，但可以帮助其他人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-10T11:32:53.747

# 沙盒

如果您在应用程序中使用沙盒，您可能需要检查**`com.apple.security.network.client`**是否设置为**`YES`**. 它位于 Xcode 5 中 Target的**General选项卡中**

*网络：传出连接（客户端）*

另请注意，如果您`257`在尝试访问`file:///`url 时看到代码，那也可能是因为沙盒，但这次是*文件访问*部分。因为除了“com.apple.security.files.user-selected.read-write”我不想打开它

*用户选择的文件*

我更喜欢使用[A Dead Simple Fileserver](http://stoneship.org/software/adsf/)并`http://localhost:3000`在调试模式下使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-05T21:54:18.330

可能导致此特定错误的更多原因：

1.  服务器上的 SSL 配置错误
2.  服务器将 http URL 重定向 (301) 到 https (参见 #1)
3.  [应用程序传输安全性](https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http)也将此代码用于阻止的请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-11T23:20:59.850

我得到了同样的错误。上面标记的答案是完美的。但就我而言，我在 url 中有“http://”，但必须在 url 请求中添加端口号，因为在特定端口上运行的服务实际上正在响应您的请求。 `@"http://example.com:8084/yyy.zzz"`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-29T20:32:04.680

我遇到了同样的错误，上述解决方案对我不起作用，在我的情况下，我是从**UNNotificationServiceExtension中调用****dataWithContentsOfURL** ，因此我必须使用应用程序传输安全条目更新**UNNotificationServiceExtension**的 info.plist 文件。

# ruby-on-rails - 使用 RubyGems 安装了 rails，但运行我的第一个 rails new blog 命令时出现错误

> ID：10106090
> 
> 赞同：1
> 
> 时间：2012-04-11T12:40:17.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

rails -v ruby​​ -v gem -v

都得到正确的答案。但是当我运行 rails new blog 时，我收到以下错误消息：

```
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- openssl (LoadError) 
```

以下是完整的跟踪：

```
run  bundle install
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- openssl (LoadError)
        from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/lib/ruby/1.9.1/net/https.rb:92:in `<top (required)>'
        from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:447:in `ssl'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:216:in `connection_for'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/fetcher.rb:135:in `fetch'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/fetcher.rb:163:in `fetch_dependency_remote_specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/fetcher.rb:122:in `fetch_remote_specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/fetcher.rb:70:in `specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/source.rb:234:in `block in remote_specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/source.rb:232:in `each'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/source.rb:232:in `remote_specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/source.rb:165:in `fetch_specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/source.rb:70:in `specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:205:in `block (2 levels) in index'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:202:in `each'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:202:in `block in index'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/index.rb:9:in `build'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:198:in `index'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:192:in `resolve'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:127:in `specs'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/definition.rb:122:in `resolve_remotely!'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/installer.rb:48:in `run'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/installer.rb:12:in `install'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/cli.rb:220:in `install'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb:22:in `run'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/thor.rb:263:in `dispatch'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/lib/bundler/vendor/thor/base.rb:386:in `start'
        from /usr/local/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/bin/bundle:13:in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:52:37.873

你可以尝试安装 libopenssl-ruby 包。

```
sudo apt-get install libopenssl-ruby 
```

在此之后您必须重新安装 ruby​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:23:08.437

尝试`sudo apt-get install openssl libssl-dev`- libssl-dev 添加开发头文件。

# ruby-on-rails - rails 3.1 资产：预编译 rake 中止！没有权限？

> ID：10106093
> 
> 赞同：2
> 
> 时间：2012-04-11T12:40:25.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, chmod, rails-3.1, chown

我在尝试将图片上传到我的应用时遇到问题。它们已上传到 AWS，但在数据库中出现“拒绝访问”错误。

浏览论坛我发现了类似的东西，并通过授予应用程序许可来修复它。愚蠢的我，我没有写下命令，但它就像

```
chown www ... 
```

问题是现在我显然没有权限在我的应用程序中写入。所以当我输入

```
rake assets:precompile 
```

它返回...

```
$ rake assets:precompile
/Users/sergioabendivar/.rvm/rubies/ruby-1.9.2-p290/bin/ruby /Users/sergioabendivar/.rvm/gems/ruby-1.9.2-p290@rails3tutorial/bin/rake assets:precompile:all RAILS_ENV=production     RAILS_GROUPS=assets
rake aborted!
Permission denied 
```

如果我尝试从查找器中手动删除文件，它会要求我输入管理员密码。但是，如果我尝试：

```
sudo rake assets:precompile 
```

返回

```
.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems.rb:316:in `bin_path': can't find gem rake ([">= 0"]) with executable rake (Gem::GemNotFoundException) 
```

我确信它与 chown 或 chmod 有关系。但我不知道该怎么办......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T15:26:25.883

尝试导航到您的应用程序根文件夹并执行

`sudo chown <username> .`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:47:43.860

你可以试试

```
sudo bundle exec rake assets:precompile 
```

# android - 如何从自定义视图更改 TextView

> ID：10106098
> 
> 赞同：1
> 
> 时间：2012-04-11T12:41:02.787
> 
> 标签：android, textview

好的，我决定省略任何代码只是因为我认为大多数人都会理解我正在尝试做的事情。

基本上我有 Layout、一个 TextView 和一个名为 GameGraphics 的自定义视图，它们都以编程方式添加到我的 Activity 的 onCreate 中。GameGraphics 视图是一个自定义视图，所有交互和绘图（基本游戏）都在其中进行。TextView 显示分数或当前玩家回合等信息。

游戏的整个交互发生在我添加了 OnTouchListener 的 GameGraphics 构造函数中，即

```
 this.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN) {
             // ALL GAME LOGIC GOES HERE    
                            }
                           return true;
     }}); 
```

现在，我可以让自定义视图占用整个屏幕并将文本反馈绘制到画布上，但是，出于学习的目的，我想使用 TextView。所以我正在尝试如何弄清楚如何随着游戏的进行更改 TextView 文本，即从 GameGraphics 自定义视图中。所以最终我试图让 TextView “监听”自定义 GameGraphics 视图并使用分数、currentPlayer 等变量重绘自身。

我确实明白我试图去做的事情是行不通的......我猜你不能让一个 View 要求另一个 View 在该 View 仍在绘制时重绘自己......或类似的东西。

我真的没主意了。我假设我可能会弄清楚如果有人可以告诉我一些关于拥有按钮的事情，并且当按下该按钮时，TextView 的文本会更改为其他内容。我猜这最终是我想要做的吗？

在此期间我会继续寻找...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:04:59.477

该解决方案归结为使用 Java 语言元素。我们所做的是创建一个抽象监听器类作为控制游戏视图的同一类的成员。然后在活动中创建该类的实例并实现您创建的抽象方法。

```
class gameGraphics
{
   public abstract class DataListener
   {
      public abstract void updateScore(String data);
   }
   private DataListener listener;
   public gameGraphics(DataListener listener){
      this.listener = listener;
   }
   private TheMethodThatGetsCalledWhenThingsChange(){
       this.listener.updateScore(...DATA....);
   }
}

class mainActivity extends Activity
{
   @Override
   public onCreate(...stuff...){
       ...on create stuff...
       new gameGraphics(new DataListener{
           public void updateScore(String data){
              ...set the listview...
           }
       }); 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:57:08.533

您是否可以在主 Activity 中而不是在 GameGraphics 类中执行游戏逻辑？这样你就可以处理你创建的 TextView 对象，并且可以随时在 TextView 上使用 .setText("your string") 。希望这会有所帮助，如果我误解了，请告诉我。

# php - 直到当前记录的列值的总和

> ID：10106100
> 
> 赞同：0
> 
> 时间：2012-04-11T12:41:15.337
> 
> 标签：php, mysql, sum

如何查询和显示每条记录上的学生钱总和的记录？

```
 Student ID   Student Name   Student Money 
 ---------    -----------     --------------
   1           John            100
   2           Jenny           200
   3           Ben             100
   4           Andy            200
   5           Lynna           100 
```

上面是我的表，我想以这种格式检索记录：

```
 Student ID   Student Name   Student Money     totalCounting 
 ---------    -----------     --------------   ---------
   1           John               100           100
   2           Jenny              200           300
   3           Ben                100           400
   4           Andy               200           600
   5           Lynna              100           700 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:49:18.540

```
Select s.*, (SELECT SUM(s2.`Money`) from students as s2 WHEre s2.`ID` = s.`ID`) as 'totalCounting' from students AS s; 
```

像这样的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T13:13:50.227

在 php 中，我希望在使用 foreach 循环的查询构建的数组中构建一个额外的键。我的 SQL 不够强大，无法将其构建到查询中，所以......

```
$total = 0;
foreach ($queryResults as $key=>$row){
    $total = $total + $row['student_money'];
    $queryResults[$key]['total_money'] = $total;
} 
```

然后使用带有新列的 $queryResults 构建表。

# clojure - 实现调试标志

> ID：10106101
> 
> 赞同：0
> 
> 时间：2012-04-11T12:41:20.697
> 
> 标签：clojure

与其返回我的库并添加“调试”标志参数，我认为一旦在我的应用程序的命令行上读取了调试标志 (0/1)，就可以设置一次 ref，然后由任何函数访问如果设置了调试标志，则需要做一些事情。

这是处理无参数调试的合理方法，还是我的想法太像拥有一个“禁止”的全局变量？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:04:02.577

我建议您避免重复`(when *debug* ...)`所有代码。这是宏的主要目标。编写一个执行该检查的宏，因此您可以使用类似`(debug ...stuff...)`. 好的，它并没有更短，但是它将您的代码与检查调试标志的细节分离。更好的是，它为您提供了编写代码的机会，该代码完全消除了调试标志的运行时检查，并且只在编译时进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:54:26.900

您对该标志的使用符合应用程序配置，这很好。前进！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:58:55.057

这种事情的全局是好的，尽管使用 ref 来存储它并不是很合适，因为那样你就需要在事务中完成所有日志记录（即在 a 中`(dosync)`）。

由于您不太可能真正关心“启用日志记录”的竞争条件，因此不需要特殊保护。你会用*耳罩*标记这个变量以表示它具有特殊含义......

这样的事情会很好：

```
(def ^{:dynamic true} *debug-enabled* false)
(def ^{:dynamic true} *info-enabled* false)

(defn- log [level s]
  (println (apply str (cons (str "[" level "] ") s))))

(defn debug [ & s ]
  (when *debug-enabled*
    (log "DEBUG" s)))

(defn info [ & s ]
  (when *info-enabled*
    (log "INFO" s))) 
```

请注意，通过定义动态标志，您可以仅为*部分*代码`*debug-enabled*`打开调试。在这个例子中，假设所有的函数都使用了上面提到的函数。您已设置为 false，但您只想为. 您可以为该调用重新绑定标志，如下所示：*`(debug)``*debug-enabled*``(my-problematic-func)`*

 *```
(myfunc a b c)
(my-other-func d e f)
(binding [*debug-enabled* true] ; switch on debug for my-problematic-func
   (my-problematic-func g h i)) 
```*

# .net - 每个对话示例的休眠会话

> ID：10106103
> 
> 赞同：1
> 
> 时间：2012-04-11T12:41:42.427
> 
> 标签：.net, visual-studio, nhibernate

您好，nhibernate 的一些专业人士可以给我每个对话或 unhaddins 实现的 Nhibernate 会话的示例实现吗？或解释如何做到这一点。最好的问候恩迪斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:55:14.703

我使用 NHibernate 工作了 4 年。以前我使用[“open-session-per-operation”反模式](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch02.html%20#%20session-per-operation)。对象总是分离的。因此，要坚持下去，我必须重新附加它们或将它们的值复制到附加对象。这会导致许多代码行和许多“延迟初始化异常”。

最近，我研究了[“对话模式” ，并在](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch02.html-long%20conversations)[“Spring.Net](http://www.springframework.net/) ”基础设施上做了一个实现。该实现已在[Issue SPRNET-1431 (Workaround for 'conversation scope' and "session-per-conversation")](https://jira.springsource.org/browse/SPRNET-1431)提交给[“jira.springsource”](https://jira.springsource.org)。

我没有制作“示例应用程序”，但如果您有兴趣，我可以这样做。

海尔顿

## 补充答案：

我准备了示例应用程序并在[SPRNET-1431 Workaround 中发布了“对话范围”和“会话每对话”](https://jira.springsource.org/browse/SPRNET-1431) 作为文件“Spring.Conversation.example.7z”。

下面，我写了解释来澄清（或不）我做了什么。

此“示例应用程序”是“Spring.NET”版本“1.3.0”中包含的“Spring.Data.NHibernate.Northwind”的修改，以使用 Conversation。目前，“Spring.Net”没有“会话范围”，也没有实现“Extended Persistence Context”（“会话每会话策略”）的概念。

在此示例应用程序中，目标是演示：

1.  如何将对象的实例保持在“对话范围”的模仿中。显示在`expression="@(convCustomer)['CustomerEditController']"`.
2.  如何享受“扩展持久性上下文”。“延迟加载错误”不再发生，`ISession.Get`对“同一记录”的重复调用不会导致对数据库的多次访问，更有效地使用 NHibernate 缓存。对“CustomerList.aspx”的修改证明了这一点。要验证对话的有效性，请在“App_Code\ConversationPage.cs”行中添加注释，`this.Conversation.StartResumeConversation();`然后单击“CustomerList.aspx”上的“+”按钮会出现错误“无法延迟初始化角色集合” .

重要提示：切勿对整个应用程序使用单个会话（“HTTP 会话”的持续时间相同）。请记住，NHibernate 保留所有加载对象的缓存，如果会话保持很长时间，此缓存往往会无限增长（限制是数据库记录的数量）。也就是说，每个对话都应该限制在应用程序页面的一个子集内，并且必须在与该子集的交互结束时被丢弃（`IConversationState.EndConversation()`）。建议：保留`<property name="EndPaused" value="true"/>`在“Spring.Conversation.Imple.WebConversationManager”中，以便在开始对话时丢弃其他对话。

附加信息：单元测试（“Spring.Northwind.IntegrationTests.2008”）不起作用。但是没有问题，因为它与为支持对话所做的更改无关，实际上它们甚至在此之前就已经导致错误。

“Spring.Data.NHibernate.Northwind”的变化列表：

*   Spring.Northwind.Web.References.2008
    *   添加到方案的链接以启用自动完成。
*   网络配置

    *   模块，添加：

        ```
        <add 
          name="ConversationModule" 
          type="Spring.Conversation.HttpModule.ConversationModule, Spring.Conversation"/>  
        <add 
          name="ConversationModule" 
          type="Spring.Conversation.HttpModule.ConversationModule, Spring.Conversation"/> 
        ```

    *   模块，已删除：

        ```
        <add 
          name="OpenSessionInView" 
          type="Spring.Data.NHibernate.Support.OpenSessionInViewModule, Spring.Data.NHibernate21"/> 
        ```

*   web.xml

    *   模块配置

        ```
        <!--Configuration for Spring HttpModule interceptor's-->
        <object 
           name="HttpApplicationConfigurer" 
           type="Spring.Context.Support.HttpApplicationConfigurer, Spring.Web">
          <property name="ModuleTemplates">
            <dictionary>
              <entry key="ConversationModule">
                <!-- this name must match the module name -->
                <object>
                  <!-- 
                  select "view source" in your browser on any page to 
                  see the appended html comment
                  -->
                  <property name="ConversationManagerNameList">
                    <list element-type="string">
                      <value>conversationManager</value>
                    </list>
                  </property>
                </object>
              </entry>
            </dictionary>
          </property>
        </object> 
        ```

    *   对话管理器

        ```
        <!--Conversation Manager-->
        <object 
            name="conversationManager" 
            type="Spring.Conversation.Imple.WebConversationManager, Spring.Conversation" 
            scope="session">
          <property name="SessionFactory" ref="NHibernateSessionFactory"/>
          <property name="EndPaused" value="true"/>
        </object> 
        ```

    *   客户对话

        ```
        <!--
         Conversation for 'CustomerEditor.aspx', 'CustomerList.aspx', 
         'CustomerOrders.aspx', 'CustomerView.aspx',  and 'FulfillmentResult.aspx'
        -->
        <!--
         Important: If the application had other parties
         ("management employees" for example), they should use another 
         conversation.
        -->
        <object 
            name="convCustomer" 
            type="Spring.Conversation.Imple.WebConversationSpringState, Spring.Conversation" 
            scope="session">
          <property name="Id" value="convCustomer"></property>
          <property name="TimeOut" value="0"></property>
          <property name="ConversationManager" ref="conversationManager"></property>
          <property name="SessionFactory" ref="NHibernateSessionFactory"/>
          <property name="DbProvider" ref="DbProvider"/>
          <!--
            Using workaround for 'conversation scope' to reference for 
            'CustomerEditController'. It is not as volatile as "request scope" 
            not as durable as the "session scope"
          -->
          <property name="['CustomerEditController']" ref="CustomerEditController"></property>
        </object> 
        ```

    *   更改“CustomerEditController”范围，删除 [scope="session"] 并放入 [singleton="false"]：

        ```
        <object 
            name="CustomerEditController" 
            type="NHibernateCustomerEditController" 
            singleton="false">
          <constructor-arg name="sessionFactory" ref="NHibernateSessionFactory"/>
        </object>
        ... 
        ```

    *   更改`"CustomerEditController"`、删除`ref="CustomerEditController"`和放置的参考`expression="@(convCustomer)['CustomerEditController']"`（模拟“对话范围”）：

        ```
        <!--
          Using workaround for 'conversation scope' to reference for 
          'CustomerEditController'. It is not as volatile as "request scope" 
          not as durable as the "session scope"
        -->
        <object name="CustomerEditPage" abstract="true">
          <property 
            name="CustomerEditController" 
            expression="@(convCustomer)['CustomerEditController']"/>
          <property name="Conversation" ref="convCustomer"/>
        </object> 
        ```

```
 <!--
          Using workaround for 'conversation scope' to reference for 
          'CustomerEditController'. It is not as volatile as "request scope" 
          not as durable as the "session scope"
        -->
        <object type="CustomerView.aspx">
          <property name="CustomerDao" ref="CustomerDao" />
          <property 
            name="CustomerEditController" 
            expression="@(convCustomer)['CustomerEditController']" />
          <property name="Conversation" ref="convCustomer"/>
          <property name="Results">
            <dictionary>
              <entry key="EditCustomer" value="redirect:CustomerEditor.aspx" />
              <entry key="CustomerList" value="redirect:CustomerList.aspx" />
            </dictionary>
          </property>
        </object> 
```

```
 <!--
          Using workaround for 'conversation scope' to reference for 
          'CustomerEditController'. It is not as volatile as "request scope" 
          not as durable as the "session scope"
        -->
        <object type="FulfillmentResult.aspx">
          <property name="FulfillmentService" ref="FulfillmentService" />
          <property 
            name="CustomerEditController" 
            expression="@(convCustomer)['CustomerEditController']" />
          <property name="Conversation" ref="convCustomer"/>
          <property name="Results">
            <dictionary>
              <entry key="Back" value="redirect:CustomerOrders.aspx" />
            </dictionary>
          </property>
        </object> 
```

```
 <object type="Default.aspx">
          <property name="Conversation" ref="convDefault"/>
          <property name="Results">
            <dictionary>
              <entry key="CustomerList" value="redirect:CustomerList.aspx" />
            </dictionary>
          </property>
        </object> 
```

```
 <!--Conversation for 'Default.aspx'-->
        <!--
          "convDefault" will have only one functionality: trigger the release
          of other conversations when started (StartResumeConversation())
        -->
        <object
            name="convDefault" 
            type="Spring.Conversation.Imple.WebConversationSpringState, Spring.Conversation"
            scope="session">
          <property name="Id" value="convDefault"></property>
          <property name="TimeOut" value="0"></property>
          <property name="ConversationManager" ref="conversationManager"></property>
          <property name="SessionFactory" ref="NHibernateSessionFactory"/>
          <property name="DbProvider" ref="DbProvider"/>
        </object> 
```

*   添加了“ConversationPage.cs”。支持对话的基本页面。
*   客户列表.aspx
    *   允许在同一页面上列出“订单”，而不会出现“延迟初始化错误”。所有对象都保持连接到 ISession (NHibernate)。
*   客户列表.aspx.cs：
    *   添加属性`IList<Customer> CustomersLoadedOncePerConvList`。列表仅加载一次，每次对话仅搜索一次数据库。
    *   改变`Page_InitializeControls`考虑`CustomersLoadedOncePerConvList`。
    *   该方法`BtnShowOrders_Click`隐含地在`Customer.Orders`.
*   改为`??? : Spring.Web.UI.Page`开启`??? : Spring.Web.UI.Page`：
    *   CustomerEditor.aspx.cs
    *   客户列表.aspx.cs
    *   CustomerOrders.aspx.cs
    *   CustomerView.aspx.cs
    *   FullfillmentResult.aspx.cs
    *   默认.aspx.cs
*   道.xml

    *   添加`<entry key="connection.release_mode" value="on_close"/>`以避免在每个 IDbCommand 执行之前和之后断开和重新连接。这很重要，因为可能会在事务边界之外发生大量延迟加载。
    *   添加：

        ```
        ...
        <entry key="show_sql" value="true"/>
        <entry key="format_sql" value="true"/>
        ... 
        ```

*   从“Default.aspx.cs”中删除（它们从未使用过）：

    *   `customerDao`;
    *   `fulfillmentService`;
    *   `CustomerDao`;
    *   `Button1_Click(object sender, EventArgs e)`;
    *   `ProcessCustomer()`;
*   配置\Log4Net.xml。

    ```
    ...
    <!--detail's about SQL's. To view sql commands on Logs\log.txt-->
    <logger name="NHibernate.SQL">
      <level value="DEBUG" />
    </logger>
    ...
    <!--detail's about Conversation-->
    <logger name="Spring.Conversation">
      <level value="DEBUG" />
    </logger> 
    ```

# php - MYSQL UNION ORDER BY

> ID：10106109
> 
> 赞同：1
> 
> 时间：2012-04-11T12:41:46.180
> 
> 标签：php, mysql

我目前有这个

```
SELECT  *
FROM    images
WHERE   images.id IN (SELECT image_id FROM image_likes WHERE user_id = '1')
    UNION
SELECT * 
FROM images
WHERE images.user_id = '1' AND upload_type in (4,3) ORDER BY id DESC 
```

这很好用，但现在我希望它显示最近发生的结果。例如，用户 A 上传了一张图片-> 信息`images`带有时间戳。然后用户 A 喜欢其他人的图像 -> 信息`image_likes`带有时间戳。现在我将如何使两个时间戳列合并在一起，以便我可以按 DESC 对它们进行排序。

Breif 超出了查询的作用。`images`从用户喜欢的图像中选择图像信息`image_likes`，然后抓取用户上传的所有上传内容`images`并将它们合并到查询中。我需要的是能够使用`timestamp`两个表中的对它们进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:46:17.753

这样做怎么样？

```
SELECT * FROM (
    SELECT  *
    FROM    images
    WHERE   images.id IN (SELECT image_id FROM image_likes WHERE user_id = '1')
        UNION
    SELECT * 
    FROM images
    WHERE images.user_id = '1' AND upload_type in (4,3) ORDER BY id DESC
) AS a ORDER BY a.timestamp DESC; 
```

或者甚至更好

```
 (SELECT  *
    FROM images
    WHERE images.id IN (SELECT image_id FROM image_likes WHERE user_id = '1'))
        UNION
 (SELECT * 
    FROM images
    WHERE images.user_id = '1' AND upload_type in (4,3) ORDER BY id DESC)
 ORDER BY timestamp DESC 
```

chk 这个[http://dev.mysql.com/doc/refman/5.5/en/union.html](http://dev.mysql.com/doc/refman/5.5/en/union.html)

**更新**

试试这个

```
 (SELECT images.id, images_likes.timestamp as timestamp FROM images JOIN images_likes 
    ON images.id=image_likes.image_id WHERE user_id = '1')
        UNION
 (SELECT images.id, images.timestamp as timestamp
    FROM images
    WHERE images.user_id = '1' AND upload_type in (4,3) ORDER BY id DESC)
 ORDER BY timestamp DESC 
```

**更新**

根据您的要求进行最终查询

```
 (SELECT images.id, images.user_id, images.ext, images.upload_type, images_likes.timestamp as timestamp FROM images JOIN images_likes 
    ON images.id=image_likes.image_id WHERE images_likes.user_id = '1')
        UNION
 (SELECT images.id, images.user_id, images.ext, images.upload_type, images.timestamp as timestamp
    FROM images
    WHERE images.user_id = '1' AND upload_type in (4,3) ORDER BY id DESC)
 ORDER BY timestamp DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:39:08.617

我会采用以下方法......下面的“PreQuery”首先从用户喜欢的所有图像开始，最大时间戳作为新列“MostRecent”。然后，为下一组做一个 UNION ALL。下一组直接来自用户的图像表，但左连接到“喜欢的”图像。然后，WHERE 子句明确排除了使用“iml2.image_id IS NULL”在第一组中返回的那些。我这样做是因为我对工会在第一盘中如何处理 group by 并不积极，但在第二盘中没有 group by。例如：如果图像是使用 3 月 3 日的日期/时间戳创建的，但也发现为 3 月 5 日的“喜欢”，我不希望将一个实例列为每个不同的日期（因为联合已经限定了不同的隐含）。

也就是说，我将获得该人喜欢的任何图像及其最新日期/时间戳的单个预查询结果，以及他们自己的所有个人图像及其各自的日期/时间戳。现在，它简单地连接回图像表以获取详细信息（通过别名“i2”），我们可以按 PreQuery.MostRecent 列排序，然后按图像 ID 值降序排列。

```
SELECT
      i2.*
   from
      ( select iml.image_id as id,
               max( iml.YourTimeStamp ) as MostRecent
           from image_likes iml
           where iml.user_id = '1'
           group by iml.image_id

        UNION ALL

        select i.id,
               i.ImageTimeStamp as MostRecent
           from images i
              left join image_likes iml2
                 on i.id = iml2.image_id
                 and iml2.user_id = '1'
           where i.user_id = '1'
             and i.upload_type in ( 4, 3 )
             and iml2.image_id is null 
      ) PreQuery
         JOIN Images i2
            on PreQuery.id = i2.id
   order by
      PreQuery.MostRecent,
      PreQuery.ID desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:00:21.563

为什么不使用“或”？

那样 ：

```
 SELECT  *
  FROM    images
  WHERE   images.id IN (SELECT image_id FROM image_likes WHERE user_id = '1')
      OR  (images.user_id = '1' AND upload_type in (4,3))
 ORDER BY id DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:47:11.493

```
SELECT *
FROM 
  ( SELECT  im.*
          , li.timestamp AS ts
    FROM    images AS im 
      JOIN  image_likes AS li
        ON  li.image_id = im.image_id
    WHERE   li.user_id = 1
  UNION ALL
    SELECT *
         , timestamp AS ts
    FROM images 
    WHERE user_id = 1 
      AND upload_type in (4,3) 
  ) AS tmp
ORDER BY ts DESC 
```

# c# - 包含在不同程序集中定义的 xsd 架构复杂类型中

> ID：10106118
> 
> 赞同：2
> 
> 时间：2012-04-11T12:42:16.847
> 
> 标签：c#, xml-serialization, xsd

我需要在我的 xsd 架构中使用在不同程序集中定义的复杂类型。我的两个 .xsd 模式都被定义为嵌入式资源，我试图链接我必须在程序集中导入的工作表，谁需要它却没有结果。

基本上，当我需要验证我的 xml 页面之一时，我会调用此函数，但它无法级联添加 Operations 中类型的 xml 模式集。

```
public static XmlSchema GetDocumentSchema(this Document doc)
{
    var actualType = doc.GetType();
    var stream = actualType.Assembly.GetManifestResourceStream(actualType.FullName);

    if (stream == null)
    {
        throw new FileNotFoundException("Unable to load the embedded file [" + actualType.FullName + "]");
    }

    var documentSchema = XmlSchema.Read(stream, null);

    foreach (XmlSchemaExternal xmlInclude in documentSchema.Includes)
    {
        var includeStream = xmlInclude.SchemaLocation != "Operations.xsd" 
            ? actualType.Assembly.GetManifestResourceStream(xmlInclude.Id) 
            : typeof (Operations).Assembly.GetManifestResourceStream(xmlInclude.Id);

        if (includeStream == null)
        {
            throw new FileNotFoundException("Unable to load the embedded include file [" + xmlInclude.Id + "]");
        }

        xmlInclude.Schema = XmlSchema.Read(includeStream, null); 
    }

    return documentSchema;
} 
```

这是主要架构：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ExampleSheet"
       attributeFormDefault="unqualified"
       elementFormDefault="qualified"
       xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:include id="Operations" schemaLocation="Operations.xsd"/>
  <xs:element name="ExampleSheet">
    <xs:complexType>
      <xs:sequence>
      <xs:element name="Operations" type="Operations"/>
    </xs:sequence>
    <xs:attribute name="version" type="xs:string" use="required"/>
  </xs:complexType>
  </xs:element>
</xs:schema> 
```

这是操作的架构：

```
<xs:schema id="Operations"    
  elementFormDefault="qualified"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
>
<xs:element name="Operations" type="Operations"/>
  <xs:complexType name="Operations">
    <xs:choice minOccurs="1" maxOccurs="unbounded">
      <xs:element name="Insert" type="Insert"/>
      <xs:element name="InsertUpdate" type="InsertUpdate"/>
      <xs:element name="Update" type="Update"/>
      <xs:element name="Delete" type="Delete"/>
    </xs:choice>
    <xs:attribute name="version" type="xs:string" use="required"/>
    <xs:attribute name="store" type="xs:string" use="required"/>
    <xs:attribute name="chain" type="xs:string" use="optional"/>
  </xs:complexType>
</xs:schema> 
```

例如，如果我有一个带有插入的 ExampleSheet，它就无法识别它。Operations 和 Insert 是实现 IXmlSerializable 的类，第一个类使用自定义 XmlSchemaProvider 检索内部类型的架构集。

难道我做错了什么？如何帮助我的 ExampleSheet 接受操作成员？ExampleSheet 是否应该实现 IXmlSerializable 以便我可以根据需要构建读取器和写入器，并且该架构是否仍然有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:02:46.863

而不是`XmlSchema`，您是否查看了[`XmlSchemaSet`](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemaset.aspx)班级？

我在 XML 序列化方面做得不多，所以我不知道它是否适合您当前的应用程序，但我之前曾在类似的情况下使用过它，我必须引用在 3 个单独模式中定义的类型。

然后，完整的`XmlSchemaSet`对象将有权访问每个模式中的所有类型。

# nhibernate - NHibernate，当条件具有分组时获取行数

> ID：10106124
> 
> 赞同：7
> 
> 时间：2012-04-11T12:42:41.707
> 
> 标签：nhibernate, criteria

我需要从标准查询中获取行数，并且标准按投影分组。（需要让寻呼工作）

例如

```
projectionList.Add(Projections.GroupProperty("Col1"), "col1")
              .Add(Projections.CountDistinct("Col2"), "Count"); 
```

我需要避免使用 CreateSQL，因为我有很多标准……而且限制等很复杂。

你能做一个子标准（分离）然后`select count(*) from ..`？想不通怎么办？

编辑：我通过从条件中获取 sql 然后对其进行修改以使其现在可以工作来解决它！[GetSql 从标准](https://stackoverflow.com/questions/7957184/catching-the-nhibernate-generated-sql-and-amending-before-running)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:06:37.983

不完全确定你想要什么，但这样的事情应该有效（如果我正确理解你的问题）：

```
var subQuery = DetachedCriteria.For<SomeClass>()
   .Where(... add your conditions here ...);

var count = Session.CreateCriteria<SomeClass>()
   .Where(Property.ForName("Col1").In(
      CriteriaTransformer.Clone(subQuery).SetProjection(Projections.Property("Col1"))
   .SetProjection(Projections.Count())
   .FutureValue<int>();

var results = subQuery.GetExecutableCriteria(Session)
            .SetProjection(Projections.GroupProperty("Col1"), "col1"),
                           Projections.CountDistinct("Col2"), "Count")
            ).List<object[]>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:11:55.107

我已经在 java 版本（Hibernate）上解决了这个问题。问题是 RowProjection 函数有点像：

```
count(*) 
```

这是一个聚合函数：因此，如果您创建一个“分组依据”属性，您的结果是分组行的列表，并且对于每一行，您都有该组的总数。

对我来说，使用 oracle 数据库，为了使其工作，我创建了一个自定义投影，而不是创建函数 count(*)，函数是

```
count(count(*)) 
```

并且 group by 子句中的属性没有写在 select ... from 语句中。要做到这一点并不那么简单，问题是您必须提供所有堆栈来创建正确的 sql，所以，我必须使用 java 版本来子类化 2 类：SimpleProjection ProjectionList

之后我的查询生成为：

```
select count(*), col1, col2 from table1 group by col1, col2 
```

变得

```
select count(count(*)) from table1 group by col1, col2 
```

结果是由给出的总行

```
select col1, col2 from table1 group by col1, col2 
```

（可与分页系统一起使用）

如果对您有用，我在这里发布类的 java 版本：

```
public class CustomProjectionList extends ProjectionList {

    private static final long serialVersionUID = 5762155180392132152L;

    @Override
    public ProjectionList create() {
        return new CustomProjectionList();
    }

    public static ProjectionList getNewCustomProjectionList() {
        return new CustomProjectionList();
    }

    @Override
    public String toSqlString(Criteria criteria, int loc, CriteriaQuery criteriaQuery) throws HibernateException {
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < getLength(); i++) {
            Projection proj = getProjection(i);
            String sqlString = proj.toSqlString(criteria, loc, criteriaQuery);
            buf.append(sqlString);
            loc += getColumnAliases(loc, criteria, criteriaQuery, proj).length;
            if (i < (getLength() - 1) && sqlString != null && sqlString.length() > 0)
                buf.append(", ");
        }
        return buf.toString();
    }

    private static String[] getColumnAliases(int loc, Criteria criteria, CriteriaQuery criteriaQuery, Projection projection) {
        return projection instanceof EnhancedProjection ?
                ( ( EnhancedProjection ) projection ).getColumnAliases( loc, criteria, criteriaQuery ) :
                projection.getColumnAliases( loc );
    }

}

public class CustomPropertyProjection extends SimpleProjection {

    private static final long serialVersionUID = -5206671448535977079L;

    private String propertyName;
    private boolean grouped;

    @Override
    public String[] getColumnAliases(int loc, Criteria criteria, CriteriaQuery criteriaQuery) {
        return new String[0];
    }

    @Override
    public String[] getColumnAliases(int loc) {
        return new String[0];
    }

    @Override
    public int getColumnCount(Criteria criteria, CriteriaQuery criteriaQuery) {
        return 0;
    }

    @Override
    public String[] getAliases() {
        return new String[0];
    }

    public CustomPropertyProjection(String prop, boolean grouped) {
        this.propertyName = prop;
        this.grouped = grouped;
    }

    protected CustomPropertyProjection(String prop) {
        this(prop, false);
    }

    public String getPropertyName() {
        return propertyName;
    }

    public String toString() {
        return propertyName;
    }

    public Type[] getTypes(Criteria criteria, CriteriaQuery criteriaQuery) 
    throws HibernateException {
        return new Type[0];
    }

    public String toSqlString(Criteria criteria, int position, CriteriaQuery criteriaQuery) 
    throws HibernateException {

        return "";
    }

    public boolean isGrouped() {
        return grouped;
    }

    public String toGroupSqlString(Criteria criteria, CriteriaQuery criteriaQuery) 
    throws HibernateException {
        if (!grouped) {
            return super.toGroupSqlString(criteria, criteriaQuery);
        }
        else {
            return StringHelper.join( ", ", criteriaQuery.getColumns( propertyName, criteria ) );
        }
    }

}

public class CustomRowCountProjection extends SimpleProjection {
    /**
     * 
     */
    private static final long serialVersionUID = -7886296860233977609L;

    @SuppressWarnings("rawtypes")
    private static List ARGS = java.util.Collections.singletonList( "*" );

    public CustomRowCountProjection() {
        super();
    }

    public String toString() {
        return "count(count(*))";
    }

    public Type[] getTypes(Criteria criteria, CriteriaQuery criteriaQuery) throws HibernateException {
        return new Type[] {
                getFunction( criteriaQuery ).getReturnType( null, criteriaQuery.getFactory() )
        };
    }

    public String toSqlString(Criteria criteria, int position, CriteriaQuery criteriaQuery) throws HibernateException {
        SQLFunction countSql = getFunction( criteriaQuery );
        String sqlString = countSql.toString() + "(" +  countSql.render( null, ARGS, criteriaQuery.getFactory() ) + ") as y" + position + '_';
        return sqlString;
    }

    protected SQLFunction getFunction(CriteriaQuery criteriaQuery) {
        SQLFunction function = criteriaQuery.getFactory()
                .getSqlFunctionRegistry()
                .findSQLFunction( "count" );
        if ( function == null ) {
            throw new HibernateException( "Unable to locate count function mapping" );
        }
        return function;
    }
} 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T13:43:21.863

只是跳出框框思考一下，并从 NIBerate 中删除查询复杂性。您可以在数据库中为查询创建一个视图，然后为该视图创建一个映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T21:50:22.373

我认为这可以通过使用 NH 多查询来完成。

这里有一些关于它的东西：http: [//ayende.com/blog/3979/nhibernate-futures](http://ayende.com/blog/3979/nhibernate-futures)示例展示了我们如何在到数据库的一次往返中运行查询并获取该查询的结果计数。

这是一个很好的答案，这听起来与您想要实现的目标相似：[nhibernate 2.0 Efficient Data Paging DataList Control 和 ObjectDataSource](https://stackoverflow.com/questions/3582611/nhibernate-2-0-efficient-data-paging-datalist-control-and-objectdatasource)，它们在其中获得结果页面和一次往返数据库的总记录数。

另外，我怀疑是否可以在`@@rowcount`不更改 sql 查询的情况下使用 NH 读取纯值，就像`@@rowcount`数据库特定的东西一样。

我的假设是，对于您的情况，除非您简化查询或方法，否则[无法从标准解决方案中避免 GetSql 。](https://stackoverflow.com/questions/7957184/catching-the-nhibernate-generated-sql-and-amending-before-running)也许也值得一试。

如果您可以发布更大的代码块，那么可能有人能够解决这个问题。

# android - AutoCompleteTextView 不建议仅用于首次搜索

> ID：10106132
> 
> 赞同：1
> 
> 时间：2012-04-11T12:43:12.047
> 
> 标签：android, autocompletetextview, countdowntimer

**目标 ：**

我想从 web 服务中获取一些字符串并用它们填充 AutoCompleteTextView。这很简单，但我真正想要的是在输入完成后开始搜索（调用 web 服务）。

我的意思是，例如，我输入了一些东西，输入完成后 3 秒，AutoCompleteTextView 将被填充并显示建议。

**到目前为止我做了什么：**

正如您在下面的代码中看到的，我使用 CountDownTimer 来实现这一点。我将它设置为 3 秒并在 OnTextChanged 中启动它。当用户键入时，我清除 CountDownTimer 并创建它的新实例并重新启动它。

因此，每当用户键入 - 每次按键时 - 我都会重置计数器。

之后，我在 CountDownTimer 的 OnFinish() 中调用我的方法——调用 web 服务并填充 AutoCompleteTextView。

**问题 ：**

当我完成输入时，一切都按预期工作，正如我在调试模式下看到的那样。但建议不会出现在第一次搜索中。

我的意思是，它也可以工作，但 AutoCompleteTextView 不会仅在第一次填充数据。

**笔记 ：**

我以同步和异步方式调用 web 服务。

```
counter=new MyCount(3000, 1000);
autoComplete.addTextChangedListener(new TextWatcher(){

        public void afterTextChanged(Editable editable) {

            if(isBackPressed){  //catch from KeyListener, if backspace is pressed don't invoke web service

                isBackPressed=false;
                return;
            }

            String newText = editable.toString();

            searchText=newText;
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {

            if(isBackPressed){

                isBackPressed=false;
                return;
            }

            counter.cancel();
            counter=new MyCount(3000, 1000); 
            counter.start();
        }

    }); 
```

这是我的 CountDownTimer 类

```
 public class MyCount extends CountDownTimer{

    public MyCount(long millisInFuture, long countDownInterval) {

    super(millisInFuture, countDownInterval);

    }
    @Override
    public void onFinish() {

        invoke_webservice(searchText);
    }
    @Override
    public void onTick(long millisUntilFinished) {

    }
    } 
```

这是我以同步方式调用 web 服务的方法

```
public void invoke_webservice(String key){

    try{
                    . //code to invoke webservice and populate string [] results
                    .
                    .
    aAdapter = new ArrayAdapter<String>(getApplicationContext(),R.layout.item,results);
    autoComplete.setAdapter(aAdapter);
    aAdapter.notifyDataSetChanged();

} 
```

这是我以异步方式调用 web 服务的方法

```
class getJson extends AsyncTask<String,String,String>{

    @Override
    protected String doInBackground(String... key) {

        String newText = key[0];

                    . //code to invoke webservice and populate string [] results
                    .
                    .

        runOnUiThread(new Runnable(){
            public void run(){

                aAdapter = new ArrayAdapter<String>(getApplicationContext(),R.layout.item,results);
                autoComplete.setAdapter(aAdapter);
                aAdapter.notifyDataSetChanged();
            }
        });

        return null;
    }

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-08T06:52:28.127

这是您可以执行的操作：我已将阈值设置为 3

```
 atvSearchPatient.setThreshold(3); 
```

在自动完成文本视图上应用文本观察侦听器，如下所示：

```
 //here set the text watcher
    atvSearchPatient.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {

        }

        @Override
        public void afterTextChanged(Editable editable) {
            String str = atvSearchPatient.getText().toString().trim();
            if (str.length() >2) {

                    searchPatient(str );

            } 
        }
    }); 
```

在您的第一次调用命中 API 时使用 null 值，对于第二次和连续调用，使用上述自动完成文本视图字段中的字符串。然后作为响应应用如下适配器：

```
this.nameList.clear();
    if (nameList.size() > 0) {
        this.nameList.addAll(dataFromResponseList);
        atvSearchPatient.setAdapter(null);
        ArrayAdapter<String> adapter = new ArrayAdapter<>(
                this, android.support.v7.appcompat.R.layout.select_dialog_item_material, nameList);
        atvSearchPatient.setAdapter(adapter);
        adapter.notifyDataSetChanged();
        atvSearchPatient.showDropDown(); 
```

这是第一次不工作的奇怪问题，但这是在我的情况下工作的唯一方法。希望有帮助 谢谢

# magento - 如何在类别视图上显示产品选项？

> ID：10106133
> 
> 赞同：0
> 
> 时间：2012-04-11T12:43:15.017
> 
> 标签：magento

我有一个产品的网格视图，每个产品都有许多可配置的子产品，它们具有不同的属性，在本例中为“数量”。

我想在产品网格视图中包含该信息。我尝试从产品视图页面复制大量不同的位，显示它的位置，但我无法让它输出任何东西。

这是我第一次尝试 Magento，除了我发现的几部分 Zend 之外，我对它的工作原理一无所知。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:08:02.620

看看这里有一个关于如何完成这个的很好的详细解释：

[http://www.catgento.com/adding-configurable-product-options-to-category-list-in-magento/](http://www.catgento.com/adding-configurable-product-options-to-category-list-in-magento/)

# ruby-on-rails - 如何将 .sqlite3 文件中的数据加载到 Ruby on Rails 应用程序

> ID：10106139
> 
> 赞同：0
> 
> 时间：2012-04-11T12:43:32.840
> 
> 标签：ruby-on-rails, ruby, sqlite

我有一个 production.sqlite3 文件，我想将它的数据导入当前的 rails 项目，数据库模式在文件和我当前的项目之间匹配。我确实将内容复制到了 development.sqlite3 文件，但这不起作用。我知道将数据插入数据库的唯一方法是加载一些 yml 文件或使用种子命令。是否有任何魔术命令或其他方法可以让 rails 从 .sqlite 文件加载数据？因为根据我的发现，rails 的行为是它仅在您执行 rake db:create &migrate 时创建 .sqlite3 文件，但它会忽略该文件中发生的任何手动更改。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:13:24.660

看起来重命名您的 .sqlite3 文件应该可以工作。确保您已重新启动服务器，并且服务器在正确的环境中运行。如果将这两个 .sqlite3 文件移动到完全不同的文件夹中，然后重新启动服务器，则会出现错误。如果没有，您的服务器没有正确重新启动 - 杀死所有 ruby​​ 进程并重试。

在回答您有关迁移数据的问题时，我最近遇到了类似的问题，我不得不从 sqlite3 迁移到 mysql。我找到的最佳解决方案是[yaml_db](https://github.com/ludicast/yaml_db)。它似乎很好地完成了这项工作 - 将其添加到项目中，然后执行

```
rake db:data:dump 
```

交换数据库配置（或者迁移一个新的数据库文件，或者改变你的开发环境，无论你需要做什么来激活一个空的但结构化的数据库），然后：

```
rake db:data:load 
```

# asp.net - 上传文件时回发错误

> ID：10106140
> 
> 赞同：1
> 
> 时间：2012-04-11T12:43:36.683
> 
> 标签：asp.net, postback

我有一个 ASP.NET 4.0 Web 应用程序，用户可以在其中将视频上传到服务器。我有一个`FileUpload`控件和 2`DropDownList`秒。

`FileUpload`用户首先从控件中选择要上传的视频，然后从`DropDownList1`（类别列表）中选择类别。用户选择一个类别后，我用子类别填充第二个`DropDownList`类别。

当我选择要上传的文件并从 中选择一个类别时`DropDownList`，页面在回发后与服务器断开连接。如果我在*不*选择要上传的文件的情况下执行相同的场景，我会成功填充第二个组合。

这是我的代码：

```
 <tr>
        <td style="text-align: left;" class="style9" colspan="2">
            <asp:Label ID="Label1" runat="server" Text="Video" Width="80px"></asp:Label>
            <asp:FileUpload ID="FileUploadVideo" runat="server" ViewStateMode="Enabled" />
        </td>
        <td style="text-align: left;" class="style4">
            <asp:Label ID="Label3" runat="server" Text="Category" Width="80px"></asp:Label>
            <br />
            <asp:DropDownList ID="cmbCategory" runat="server" AutoPostBack="True" OnSelectedIndexChanged="cmbCategory_SelectedIndexChanged">
            </asp:DropDownList>
        </td>
        <td style="text-align: right;">
            <asp:Label ID="Label6" runat="server" Text="Subcategory" Width="80px"></asp:Label>
            <br />
            <asp:DropDownList ID="cmbSubcategory" runat="server">
            </asp:DropDownList>
        </td>
    </tr> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:49:55.630

由于您正在上传视频，我想这是由于文件大小而出错。ASP.NET 应用程序的默认最大文件大小为 4MB。`<system.web>`您可以在 web.config 的部分中添加类似的内容以增加默认值：

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="20480" />
</system.web> 
```

例如，这允许上传一个 20MB 的文件。

有关更多信息，请查看这篇文章：[ASP.NET 中的大文件上传](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

# php - 将 PHP 输出到 HTML 表中

> ID：10106142
> 
> 赞同：0
> 
> 时间：2012-04-11T12:43:39.907
> 
> 标签：php, html

我想把我输出的 PHP 放到一个表中，但它不喜欢它......

我想要的布局是这样的

ROW - 描述 URL ROW2- 元描述

即使我输入多个 URL，它也需要保持相同的布局。

现在发生的情况是，当我输入大量网址时，它会将所有相同的部分放入同一个单元格中。我该如何更改？

抱歉很难解释...

这是代码：

```
<?php
ini_set( "display_errors", 0);
//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 

foreach ($TAarray as $key => &$line) {
        $line = trim($line); 
        // get the meta data for each url
        $tags = get_meta_tags($line);

        echo '<tr>';
        echo (isset($tags['description']))?"<tr><td>Description($line)</td>  </tr>".$tags['description']:"<tr><td>Description($line)</td></tr><tr><td>No Meta    Description</td></tr>.";
        echo '</tr>';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:55:40.143

你有一些尴尬的 HTML 那里..尝试这样做：

```
//start the table
echo "<table>";
foreach ($TAarray as $key => &$line) {
        $line = trim($line); 
        // get the meta data for each url
        $tags = get_meta_tags($line);

        //start a new row in the table
        echo '<tr>';
        if(isset($tags['description'])){
            //add two cells to the table.
            echo "<td>Description($line)</td>";
            echo "<td>{$tags['description']}</td>";
        } else {
            echo "<td>Description($line)</td>"
            echo "<td>No Meta Description</td>";
        }
        echo '</tr>';
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:59:45.453

```
//make the array 
$data='http://stackoverflow.com 
 http://ebay.com/';
$TAarray = explode("\n", strip_tags($data)); 
echo "<table>";
foreach ($TAarray as $key => &$line) {
        $line = trim($line); 
        // get the meta data for each url
        $tags = get_meta_tags($line);

        echo '<tr>';
        if(isset($tags['description'])){

        echo "<tr><td>Description($line):".$tags['description']:" </td> "; else{

            "</tr><tr><td>Description($line)</td></tr><tr><td>No Meta    Description</td></tr>.";
        echo '</tr>';
        }
}
echo "</table>"; 
```

# java - Work-around for a Joda Time bug in PeriodFormat?

> ID：10106143
> 
> 赞同：3
> 
> 时间：2012-04-11T12:43:39.917
> 
> 标签：java, jodatime

Here's my code which reveals a Joda Time bug:

```
import org.joda.time.Period;
import org.joda.time.format.PeriodFormat;
import org.joda.time.format.PeriodFormatter;

import java.util.Locale;

public class ScratchSpace {

    public static void main(String[] args) {
        Locale.setDefault(Locale.GERMAN);
        final PeriodFormatter periodFormatter = 
                 PeriodFormat.wordBased(Locale.ENGLISH);
        final Period period = new Period(6, 5, 4, 3);
        final String s = period.toString(periodFormatter);
        // i'm expecting english to be outputted
        System.out.println("s = " + s); // outputs german: 6 Stunden, 5 Minuten, 4 Sekunden und 3 Millisekunden
    }

} 
```

According to the JavaDocs I should be getting the period formatted in English. But it is using the current default locale instead, which in the example above is German.

I'm using Joda Time 2.0, on Mac OS X 10.7, with the computer set to "Australian English" as the preferred language.

Any simple work-around you can suggest?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:58:01.577

Okay, I've found a work-around:

```
final PeriodFormatter periodFormatter = 
             PeriodFormat.wordBased(new Locale("")); 
```

However there is clearly a bug present in PeriodFormat. For example, the JavaDocs for PeriodFormat.getDefault() says:

```
Gets the default formatter that outputs words in English.
 This calls {@link #wordBased(Locale)} using a locale of {@code ENGLISH}. 
```

whereas the result for me is that the user's current locale is used instead when I execute this:

```
final PeriodFormatter periodFormatter = PeriodFormat.getDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:08:54.197

Another solution is to update to the latest Joda Time source...according to this bug report it is now fixed: [http://sourceforge.net/tracker/?func=detail&aid=3471414&group_id=97367&atid=617889](http://sourceforge.net/tracker/?func=detail&aid=3471414&group_id=97367&atid=617889)

# regex - VS中的正则表达式搜索不起作用

> ID：10106144
> 
> 赞同：1
> 
> 时间：2012-04-11T12:43:40.380
> 
> 标签：regex, visual-studio

我正在使用这个正则表达式来尝试在我的代码中查找具有双注释斜杠后跟任意数量的空格然后是哈希的任何行。所以..

```
//       #endif 
```

例如。

我正在使用`////*[ ]/#`，但它没有找到任何东西。我究竟做错了什么？

据我所知，这 (`////`正在寻找双斜杠并且`*[ ]/#`正在寻找任意数量的空格，然后是斜杠。我确定我弄错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:50:49.357

您不需要将正斜杠加倍（它们不需要转义）。反斜杠是转义序列，它们确实需要转义。

您还在使用任意数量的，而不是任意数量的空格`*`之后使用。`/``/`

尝试以下操作（该和之间的任意数量的*空格*）：`//``#`

```
// *\# 
```

供参考 - [Visual Studio 正则表达式](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)。

Visual Studio 正则表达式引擎确实为 unicode 空格提供了字符转义 -`:Wh`所以它可能更接近您想要的：

```
//:Wh*\# 
```

如果需要，您还可以构建自己的包含额外空白字符的字符类（例如，垂直制表符、换行符等），但这可能是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:58:33.850

尝试`//:b*:Po`查找（快捷键`Ctrl`+ `F`）。它会抓住你想要的。我希望它有所帮助。

# android - Android SQL 数据库 - 未找到 rawQuery() 源

> ID：10106152
> 
> 赞同：1
> 
> 时间：2012-04-11T12:44:16.333
> 
> 标签：android, sql, database, arraylist, cursor

我知道有数十亿个关于 SQL 数据库的线程，但我没有找到任何解决我的问题的方法。我制作了一个名为[Beer Or No Beer](https://play.google.com/store/apps/details?id=com.celticwolf.alex&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5jZWx0aWN3b2xmLmFsZXgiXQ..)的应用程序，它需要一个包含啤酒品牌及其所在国家/地区的 Arraylist。现在我想用 SQLite 管理这个列表。我用 SQLite 数据库浏览器创建了一个数据库，并将数据库复制到资产文件夹（名称：sqbeerlist）中。现在我创建了一个 DatabaseHelper 类来打开文件并将其写入数组列表。但是当我想用

```
Cursor c = myDataBase.rawQuery("SELECT _id, brand FROM " + DATABASE_TABLE, null); 
```

DVM 崩溃并显示 Source Not Found。我究竟做错了什么 ？？

这是整个 HelperClass：

```
package com.celticwolf.alex;

import java.io.FileOutputStream;

import java.io.IOException;

import java.io.InputStream;

import java.io.OutputStream; 

import java.util.ArrayList;

import android.content.Context;

import android.database.Cursor;

import android.database.SQLException;

import android.database.sqlite.SQLiteDatabase;

import android.database.sqlite.SQLiteDatabase.CursorFactory;

import android.database.sqlite.SQLiteException;

import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper {

// The Androids default system path of your application database.

private static String DB_PATH = "/data/data/com.celticwolf.alex/databases/";

private static String DB_NAME = "sqbeerlist";

private static final String DATABASE_TABLE = "beers";

private SQLiteDatabase myDataBase;

public static final String KEY_ROWID = "_id";

public static final String KEY_NAME = "brand";

public static final String KEY_COUNTRY = "country";

private final Context myContext;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);

    this.myContext = context;

}

/**
 * 
 * Creates a empty database on the system and rewrites it with your own
 * 
 * database.
 * 
 * */

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {

        // do nothing - database already exist

    } else {

        // By calling this method and empty database will be created into

        // the default system path

        // of your application so we are gonna be able to overwrite that

        // database with our database.

        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }

    }

}

/**
 * 
 * Check if the database already exist to avoid re-copying the file each
 * 
 * time you open the application.
 * 
 * 
 * 
 * @return true if it exists, false if it doesnt
 */

private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {

        String myPath = DB_PATH + DB_NAME;

        checkDB = SQLiteDatabase.openDatabase(myPath, null,

        SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database doest exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;

}

/**
 * 
 * Copies your database from your local assets-folder to the just created
 * 
 * empty database in the system folder, from where it can be accessed and
 * 
 * handled. This is done by transfering bytestream.
 * 
 * */

private void copyDataBase() throws IOException {

    // Open your local db as the input stream

    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db

    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream

    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile

    byte[] buffer = new byte[1024];

    int length;

    while ((length = myInput.read(buffer)) > 0) {

        myOutput.write(buffer, 0, length);

    }

    // Close the streams

    myOutput.flush();

    myOutput.close();

    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database

    String myPath = DB_PATH + DB_NAME;

    myDataBase = SQLiteDatabase.openDatabase(myPath, null,     SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close() {

    if (myDataBase != null)

        myDataBase.close();

    super.close();

}

public ArrayList<String> gettheArray() {

    ArrayList<String> result = new ArrayList<String>();

    try {

        openDataBase();

    }catch(SQLException sqle){

        throw sqle;

    }

    Cursor c = myDataBase.rawQuery("SELECT _id, brand FROM " + DATABASE_TABLE, null);

    c.moveToFirst();

    // Check if our result was valid.

    if (c != null) {

        // Loop through all Results

        do {

            result.add(c.getString(c.getColumnIndex(KEY_NAME)));

        } while (c.moveToNext());

    }

    close();

    return result;

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

// Add your public helper methods to access and get content from the

// database.

// You could return cursors by doing "return myDataBase.query(....)" so it'd

// be easy

// to you to create adapters for your views.

} 
```

这是我访问课程的方式：

```
DataBaseHelper myDbHelper = new DataBaseHelper(null);
    myDbHelper = new DataBaseHelper(this);

    try {
         myDbHelper.createDataBase();

} catch (IOException ioe) {

    throw new Error("Unable to create database");

}

            ArrayList<String> thelist = myDbHelper.gettheArray(); 
```

谢谢，我希望有人可以提供帮助（：

**问题解决了！** 这是正确的代码！这个标志标志着变化：c==3

```
package com.celticwolf.alex;

import java.io.FileOutputStream;

import java.io.IOException;

import java.io.InputStream;

import java.io.OutputStream;

import java.util.ArrayList;

import android.content.Context;

import android.database.Cursor;

import android.database.SQLException;

import android.database.sqlite.SQLiteDatabase;

import android.database.sqlite.SQLiteDatabase.CursorFactory;

import android.database.sqlite.SQLiteException;

import android.database.sqlite.SQLiteOpenHelper;

public class DataBaseHelper extends SQLiteOpenHelper {

// The Android's default system path of your application database.

private static String DB_PATH = "/data/data/com.celticwolf.alex/databases/";

private static String DB_NAME = "sqbeerlist.sqlite";

private static final String DATABASE_TABLE = "beers";

private SQLiteDatabase myDataBase;

public static final String KEY_ROWID = "_id";

public static final String KEY_NAME = "brand";

public static final String KEY_COUNTRY = "country";

private final Context myContext;

public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);

    this.myContext = context;

}

/**
 * 
 * Creates a empty database on the system and rewrites it with your own
 * 
 * database.
 * 
 * */

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();
    SQLiteDatabase db_Read = null;  // c==3

    if (dbExist) {

        // do nothing - database already exist

    } else {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.

        db_Read = this.getReadableDatabase();  // c==3
        db_Read.close();  // c==3

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }

    }

}

/**
 * 
 * Check if the database already exist to avoid re-copying the file each
 * 
 * time you open the application.
 * 
 * 
 * 
 * @return true if it exists, false if it doesnt
 */

private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {

        String myPath = DB_PATH + DB_NAME;

        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                 (SQLiteDatabase.OPEN_READONLY | SQLiteDatabase.NO_LOCALIZED_COLLATORS));  // c==3

    } catch (SQLiteException e) {

        // database doesnt exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;

}

/**
 * 
 * Copies your database from your local assets-folder to the just created
 * 
 * empty database in the system folder, from where it can be accessed and
 * 
 * handled. This is done by transfering bytestream.
 * 
 * */

private void copyDataBase() throws IOException {

    // Open your local db as the input stream

    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db

    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream

    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile

    byte[] buffer = new byte[1024];

    int length;

    while ((length = myInput.read(buffer)) > 0) {

        myOutput.write(buffer, 0, length);

    }

    // Close the streams

    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database

    String myPath = DB_PATH + DB_NAME;

    myDataBase = SQLiteDatabase.openDatabase(myPath, null, (SQLiteDatabase.OPEN_READONLY | SQLiteDatabase.NO_LOCALIZED_COLLATORS)); // c==3

}

@Override
public synchronized void close() {

    if (myDataBase != null)

        myDataBase.close();

    super.close();

}

public ArrayList<String> gettheArray() {

    ArrayList<String> result = new ArrayList<String>();

    try {

        openDataBase();

    }catch(SQLException sqle){

        throw sqle;

    }

    Cursor c = myDataBase.rawQuery("SELECT _id, brand FROM " + DATABASE_TABLE, null);

    c.moveToFirst();

    // Check if our result was valid.

    if (c != null) {

        // Loop through all Results

        do {

            result.add(c.getString(c.getColumnIndex(KEY_NAME)));

        } while (c.moveToNext());
    }
    close();
    return result;
}

@Override
public void onCreate(SQLiteDatabase db) {
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}
// Add your public helper methods to access and get content from the
// database.
// You could return cursors by doing "return myDataBase.query(....)" so itd
// be easy
// to you to create adapters for your views.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:49:52.390

前段时间我在最初复制数据库时遇到了这个问题。

我最终在应用程序的第一次运行时使用 csv 格式的资源（资产或原始）从头开始创建数据库（显然这可能会占用更多空间）

看看[这个线程](https://stackoverflow.com/questions/2342346/problem-about-sqlite-database-no-such-table)，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T12:55:59.840

您需要打开您的数据库，`SQLiteDatabase.NO_LOCALIZED_COLLATORS`因为当您从 android 外部创建数据库时，它不包含`android_metadata`android 框架所需的表。

所以，打开你的数据库如下：

```
checkDB = SQLiteDatabase.openDatabase(myPath, null,
         (SQLiteDatabase.OPEN_READONLY | SQLiteDatabase.NO_LOCALIZED_COLLATORS)); 
```

希望它可以解决您的问题

# jquery - jQuery 1.6 在 div 之后追加一个新 div

> ID：10106154
> 
> 赞同：1
> 
> 时间：2012-04-11T12:44:18.583
> 
> 标签：jquery, html

当我单击标签“a href”时，我有一个函数可以在另一个 div 的末尾添加一个 div，如下所示：

```
$('<div>bla</div>').fadeIn('slow').appendTo('#inputs'); 
```

但是当函数执行时，它会出现

```
<div style> bla </ div> 
```

我正在使用[http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js)

**编辑：**`<a>`我想在锚标记 的单击事件上的另一个 div 之后附加一个 div 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:48:10.700

[http://jsfiddle.net/zXwSf/](http://jsfiddle.net/zXwSf/)

像这样的东西

```
/* here your "a" id */
$('#lol').click(function ()
                 {
                    $("<div/>").html("bla").css("display", "none").appendTo("#results").fadeIn(); 
                 });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:48:43.517

尝试：

```
$('<div>bla</div>').hide().appendTo('#inputs').fadeIn('slow'); 
```

# javascript - 如何使用下一个和上一个按钮创建一个 jquery 滑块

> ID：10106157
> 
> 赞同：-2
> 
> 时间：2012-04-11T12:44:45.943
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

如何创建一个带有下一个和上一个按钮滑块的 jquery 滑块包含拖放元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:11:54.603

Flow Slider 是您的最佳选择。它可以在事件上滑动，例如后退和前进按钮单击。您还可以启动“拖动”控制器，以便它可以拖动。[Flow Slider 现在是我最喜欢的 jQuery 滑块选择](http://www.flowslider.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:44:04.730

只需使用一些 JQuery 插件，我更喜欢[Jquery Cycle Plugin](http://jquery.malsup.com/cycle/)（它非常棒且简单的工具）。您也可以阅读一些随机教程并自行创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:55:40.027

我真的很喜欢 JQuery flexslider。也许你可以看看那个插件： [http ://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

# apache - 可扩展的 URL 重写规则

> ID：10106159
> 
> 赞同：1
> 
> 时间：2012-04-11T12:45:02.167
> 
> 标签：apache, .htaccess, mod-rewrite

为了便于维护，我将子网站组织到 LAMP 服务器上的不同文件夹中，但不希望最终用户知道它们是通过 URL 组织到这些文件夹中的。

目录结构示例：

```
/category1/website1
/category1/website2
/category2/website3
/category2/website4
/category2/website5
/category3/website6
/category4/website7
etc. 
```

目前它显示为`http://www.example.com/category1/website1`但是我希望它一直显示`http://www.example.com/website1`- 即使他们将类别名称放在那里。

诀窍是我需要从一个`.htaccess`包含 X 个类别的文件中执行此操作，其中包含 X 个子网站。目前我正在使用

```
Redirect 301 /website1 /category1/website1 
```

每个网站都允许用户使用较短的链接，但最终他们最终会看到地址中的类别，并且`.htaccess`文件很长，涉及 200 多个子网站。:(

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:06:35.950

`mod_rewrite`如果您要手动输入它们，使用它非常简单：

```
RewriteEngine on
RewriteRule ^/website1$ /category1/website1 [L,NC]
RewriteRule ^/website2$ /category1/website2 [L,NC] 
```

也可以创建一个`RewriteMap`。[文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)中有很多有用的信息

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-21T21:49:18.810

由于没有可识别的“模式”将网站链接到*类别*子目录，并且您仅限于此，`.htaccess`因此您别无选择，只能手动列出`.htaccess`文件中的所有映射，就像列出重定向一样。

假设您想在内部将表单的 URL*重写*`/website1/<something>`为`/category1/website1/<something>`- 与`Redirect`指令的工作方式相同（即前缀匹配）。

您可以在中执行以下操作`.htaccess`：

```
RewriteEngine On

RewriteRule ^(website1/.*) /category1/$1 [L]
RewriteRule ^(website2/.*) /category1/$1 [L] 
```

`$1`是对`RewriteRule` *模式*中捕获的组的反向引用。例如。如果您请求`/website1/foo`，它将重写为`/category1/website1/foo`.

这确实要求您至少请求`/website1/`，并带有斜杠（因为这是一个*目录*）。

您可以将属于同一类别的网站组合在一起。例如：

```
RewriteRule ^((website3|website4|website5)/.*) /category2/$1 [L] 
```

> 我希望它一直显示`http://www.example.com/website1`-**即使他们将类别名称放在那里**

为此，您需要实现反向...重定向以从 URL中删除*类别。*但是，一个额外的复杂性是您只想重定向直接请求而不是重写请求（如上所述）。

这需要在上面的内部重写*之前进行。*

除非有可辨别的模式来区分类别名称，否则您将需要为每个类别制定规则。例如：

```
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^category1/(.*) /$1 [R=302,L] 
```

...并为每个类别重复。

对`REDIRECT_STATUS`环境变量的检查确保我们只针对直接请求而不是重写请求。

将 302（临时）更改为 301（永久） - 如果这是有意的 - 只有在您确认它可以正常工作以避免缓存问题之后。

`.htaccess`但是，这可能更容易（并且更“可扩展”）在每个类别子目录中使用附加文件来实现。这将是每个类别子目录中的相同指令：

```
RewriteEngine On

RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule (.*) /$1 [R=302,L] 
```

由于`RewriteRule` *模式*匹配的 URL 路径是相对于包含`.htaccess`文件的目录的，因此`$1`反向引用包含减去`/category/`前缀的 URL 路径。

# java - Java中文件名的编码

> ID：10106161
> 
> 赞同：10
> 
> 时间：2012-04-11T12:45:10.467
> 
> 标签：java, encoding, jvm, openjdk

我在嵌入式 Linux 平台上运行一个小型 Java 应用程序。将 Java VM JamVM 替换为 OpenJDK 后，带有特殊字符的文件名无法正确存储。变音符号等特殊字符被问号替换。

这是我的测试代码：

```
import java.io.File;
import java.io.IOException;

public class FilenameEncoding
{

        public static void main (String[] args) {
                String name = "umlaute-äöü";
                System.out.println("\nname = " + name);
                System.out.print("name in Bytes: ");
                for (byte b : name.getBytes()) {
                        System.out.print(Integer.toHexString(b & 255) + " ");
                }
                System.out.println();

                try {
                        File f = new File(name);
                        f.createNewFile();
                } catch (IOException e) {
                        e.printStackTrace();
                }
        }

} 
```

运行它会给出以下输出：

```
name = umlaute-???
name in Bytes: 75 6d 6c 61 75 74 65 2d 3f 3f 3f 
```

和文件名为 umlaute-??? 被建造。

将属性 file.encoding 和 sun.jnu.encoding 设置为 UTF-8 会在终端中提供正确的字符串，但创建的文件仍然是变音符号-???

用strace运行VM，可以看到系统调用

```
open("umlaute-???", O_RDWR|O_CREAT|O_EXCL|O_LARGEFILE, 0666) = 4 
```

这表明，问题不是文件系统问题，而是 VM 问题之一。

如何设置文件名的编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:51:37.817

如果您使用的是 Eclipse，那么您可以转到 Window->Preferences->General->Workspace 并从下拉菜单中选择您想要的“文本文件编码”选项。通过改变我的，我能够重新创建您的问题（并且也改回修复）。

如果你不是，那么你可以添加一个环境变量到windows（系统属性->环境变量和系统变量下你想选择新建...）名称应该是（不带引号）`JAVA_TOOL_OPTIONS`并且值应该设置为`-Dfile.encoding=UTF8`（或任何编码将使您的工作。

我通过这篇文章找到了答案，顺便说一句： [设置默认 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

**Linux 解决方案**

-（永久）`env | grep LANG`在终端中使用会给你一两个关于当前设置 linux 的编码的响应。然后，您可以在 /etc/sysconfig i18n 文件中将 LANG 设置为 UTF8（您的可能设置为 ASCII）（我在 2.6.40 fedora 上对此进行了测试）。基本上，我从 UTF8（我有奇数字符）切换到 ASCII（我有问号）并返回。

-（关于运行 JVM，但可能无法解决问题）您可以使用 java -Dfile.encoding=**** FilenameEncoding 以您想要的编码启动 JVM 以下是两种方式的输出：

```
[youssef@JoeLaptop bin]$ java -Dfile.encoding=UTF8 FilenameEncoding

name = umlaute-הצ�
name in Bytes: 75 6d 6c 61 75 74 65 2d d7 94 d7 a6 ef bf bd 
UTF-8
UTF8

[youssef@JoeLaptop bin]$ java FilenameEncoding

name = umlaute-???????
name in Bytes: 75 6d 6c 61 75 74 65 2d 3f 3f 3f 3f 3f 3f 3f 
US-ASCII
ASCII 
```

以下是 linux 的一些参考资料 [http://www.cyberciti.biz/faq/set-environment-variable-linux/](http://www.cyberciti.biz/faq/set-environment-variable-linux/)

这是一个关于 -Dfile.encoding [设置默认 Java 字符编码的内容？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-17T11:15:57.857

我知道这是一个老问题，但我遇到了同样的问题。所有提到的解决方案都对我不起作用，但以下解决了它：

*   源编码为 UTF8（在 Maven 属性中 project.build.sourceEncoding 为 UTF-8）
*   程序参数：-Dfile.encoding=utf8 和 -Dsun.jnu.encoding=utf8
*   **使用 java.nio.file.Path 而不是 java.io.File**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T15:19:50.197

您的问题是，您的-file`javac`的编码与您保存的编码不同。`.java`编译时没有`javac`警告你吗？

也许你已经用编码`ISO-8859-1`或`windows-1252`, 保存了它，并且`javac`期待`UTF-8`.

`javac`使用标志提供正确的编码`-encoding`，或为您的构建工具提供等价物。

# unix - 如何通过使用固定 LRECL 直接连接来发送可变长度的 pdf

> ID：10106162
> 
> 赞同：0
> 
> 时间：2012-04-11T12:45:13.180
> 
> 标签：unix, scp, mainframe

我正在使用与 scp 直接连接并尝试将一些 pdf 文件从 unix 发送到大型机。

在 unix 端，我有包含 pdf 的存档，我只是将其重命名为 ABC.XYZ.LMN.PQR（大型机文件名），然后发送到大型机。

存档包含可变长度的 pdf 文件。

但是，要求是：

对于任何可变长度文件，大型机需要知道文件中任何记录的最大可能长度。例如说 LRECL 是 1950。

当要发送的存档文件中的 pdf 文件长度可变时，如何包含 LRECL ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:32:19.800

另一种方法是将文件传输到 Unix 系统服务文件 (z/OS Unix) 而不是“传统” z/OS 数据集。然后大型机方面的人可以使用他们的实用程序将文件复制到“传统”大型机数据集，如果这是他们需要的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:09:20.497

仅适用于可变块数据集！如果您的最大记录大小为 1950，您将需要指定 RECFM=VB,LRECL=1954 比最大记录多 4 个字节。这 4 个字节的余量用于记录描述符字 (RDW)。如果您需要指定 BLKSIZE，那么最小值是 LRECL 的大小加上另外 4 个字节。

因此，在您的示例中，您的 JCL 将具有如下所示的 DCB 参数：RECFM=VB,LRECL=1954,BLKSIZE=1958

理想情况下，为了获得最佳存储，应将 BLKSIZE 设置为不超过设备特定建议的最大大小。即 TAPE 设备通常尝试使用 BLKSIZE=32670（RDW 和 BDW 为 32 * 1024K - 8）。磁盘驱动器可能会有所不同，但在我们的商店中 BLKSIZE=23476 被认为是最佳的。

不正确的阻塞因子会浪费大量空间。如有疑问，请应用您的系统默认设置或咨询您当地的系统专家以获得他们的设备特定建议。

# r - 在 data.frames 中查找相等的列

> ID：10106163
> 
> 赞同：2
> 
> 时间：2012-04-11T12:45:13.260
> 
> 标签：r, dataframe

我有两个 data.frame 对象“x”和“ans1”，“x”中有 500 列，“ans1”中有 7 个列如何找到“x”中的列名，它们等于“ans1”中的列?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:15:03.693

可以`identical()`与`digest`包一起使用：

```
library(digest)

x <- data.frame(aa = c("s", "d", "f"), bb = 1:3)
ans1 <- data.frame(bb = c("d", "s", "z"), cc = 1:3)

(myMatches<-lapply(x, function(myX) sapply(ans1,
  function(y) identical(digest(y), digest(myX))))
)

# $aa
#    bb    cc 
# FALSE FALSE 

# $bb
#    bb    cc 
# FALSE  TRUE 
```

这表明`bb`data.frame中列中`x`的数据等于 data.frame 中列`cc`中的数据`ans1`。

仅获取匹配项，

```
unlist(lapply(myMatches, function(x) which(x)))
# bb.cc 
# 2 
```

同样，`bb`from列中的数据与 in 列中`x`的数据相同`cc``ans1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:52:17.797

与`%in%`：

```
names(x) %in% names(ans1) 
```

有关`?match`更多详细信息，请参阅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:16:55.563

这个怎么样：

```
mtcarsSub <- mtcars[c(1,4,7)]
names(mtcarsSub) <- letters[1:3]
matches <- sapply(mtcarsSub,function(x) sapply(mtcars,identical,x))
matches
         a     b     c
mpg   TRUE FALSE FALSE
cyl  FALSE FALSE FALSE
disp FALSE FALSE FALSE
hp   FALSE  TRUE FALSE
drat FALSE FALSE FALSE
wt   FALSE FALSE FALSE
qsec FALSE FALSE  TRUE
vs   FALSE FALSE FALSE
am   FALSE FALSE FALSE
gear FALSE FALSE FALSE
carb FALSE FALSE FALSE

names(mtcars)[apply(matches,2,which)]
[1] "mpg"  "hp"   "qsec" 
```

# java - 我可以生成复杂度 < O(n^2) 的所有子字符串吗

> ID：10106164
> 
> 赞同：6
> 
> 时间：2012-04-11T12:45:22.333
> 
> 标签：java, suffix-tree, substring

目前我正在使用两个嵌套`for`循环来生成字符串的所有子字符串。我听说过，`Suffix Tree`但 AFAIK`Suffix Tree`生成后缀而不是子字符串。以下是我目前正在使用的代码 -

```
 String s = "abacbccca";
        int l = s.length();
        for (short c = 0; c < l; c++) {
            for (short r = 0; r < l - c; r++){
                Sting ss=s.substring(c, c + r + 1);                                        
                if(!t.contains(ss));
                    t.add(ss);
            }
        } 
```

我想要一种可以生成小于的所有子字符串的方法`O(n^2)`。尽管通过查看我的代码，任何人都可以建议我这是不可能的，因为我正在将每个子字符串添加到列表中。但我的目标不是存储所有子字符串，我的目标是找到一个在字典上是最小字符串的字符串。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T12:47:30.470

有*不同的* `O(n^2)`子串，所以没有算法能以比`O(n^2)`!

但是，找到字典上最小的子字符串的问题是完全不同的。它总是空字符串，所以这是一个`O(1)`操作（也是一个非常没有意义的操作）。

# sublimetext - Sublime Text 2 中是否支持 XML 代码提示/完成？

> ID：10106170
> 
> 赞同：20
> 
> 时间：2012-04-11T12:45:49.713
> 
> 标签：sublimetext, sublimetext2

我正在尝试 Sublime Text 2，我正在编辑一个 XML 文件——它有一个`DOCTYPE`声明和一个 DTD——在编辑 XML 文档时似乎没有办法获得代码提示/完成。

我确信它是我忽略的一些简单的东西。我无法想象 Sublime 没有这种功能，即使是通过插件提供的。

有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-11T17:36:00.660

Sublime Text 首先是一个文本编辑器。但是，它受欢迎的原因在很大程度上是由于它的可扩展性。

虽然您可以使用 Sublime 的 api 创建一个特定的插件来执行此操作，但 Sublime 有一些工具已经有助于在裸安装上编辑 xml 文件和其他标记文件。

特别是提示和补全非常容易添加。为您的特定 xml创建一个特定于域的[sublime-completions](http://docs.sublimetext.info/en/latest/reference/completions.html)文件应该不会花费超过几分钟的时间。您可以使用`alt`++创建一个xml 元素，此外+`shift`将关闭任何未关闭的xml 元素。`w``alt``.`

您可能还想尝试通过[Package Control提供的](http://wbond.net/sublime_packages/community)[Sublime Tag 插件](https://github.com/SublimeText/Tag)

最后，您还可以在[Sublime 论坛](http://www.sublimetext.com/forum/)中将其作为插件请求提出。插件社区中有很多乐于助人的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:57:04.283

You can use the 'tag' plugin from Sublime Package Control. It has auto tag closing, linting and other features. The github page for the project is here: [https://github.com/SublimeText/Tag](https://github.com/SublimeText/Tag)

You can install it using Package Control without leaving your Sublime text editor.

# php - 最适合将现有捐赠网站迁移到 php 框架的框架？

> ID：10106175
> 
> 赞同：0
> 
> 时间：2012-04-11T12:46:15.703
> 
> 标签：php, frameworks, migration

哪个框架最适合将现有的捐赠处理 php 网站迁移到 php 框架？请为您的回答提供一些理由..

三个框架在我脑海中：CakePHP、CodeIgniter、Yii

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:49:31.697

Cakephp 和 yii 已经实现了 PDO。我将使用 YII，我喜欢它实现这些东西的方式。使用命令行生成迁移.. crud 使用 Web 界面（非常简单）。您可以在迁移时添加外键。他对数据库的支持比蛋糕 php 大。模型方法和 pdo 很容易使用，它有很多例子。

Cake php 也很甜，但是 Yii 有更多的东西，更高级。yii 上的默认脚手架更好，实现了高级搜索和运行中的 jquery

# java - OpenJDK 的 LinkedBlockingQueue 实现：Node 类和 GC

> ID：10106191
> 
> 赞同：2
> 
> 时间：2012-04-11T12:47:02.000
> 
> 标签：java, concurrency, garbage-collection, queue, java.util.concurrent

我对 OpenJDK 的 LinkedBlockingQueue 实现（在 java.util.concurrent 中）中的 Node 类的结构有点困惑。

我已经复制了以下节点类的描述：

```
static class Node<E> {
    E item;

    /**
     * One of:
     * - the real successor Node
     * - this Node, meaning the successor is head.next
     * - null, meaning there is no successor (this is the last node)
     */
    Node<E> next;

    Node(E x) { item = x; }
} 
```

具体来说，我对 next 的第二个选择感到困惑（“这个节点，意思是后继者是 head.next”）。

这似乎与 dequeue 方法直接相关，如下所示：

```
private E dequeue() {
    // assert takeLock.isHeldByCurrentThread();
    // assert head.item == null;
    Node<E> h = head;
    Node<E> first = h.next;
    h.next = h; // help GC
    head = first;
    E x = first.item;
    first.item = null;
    return x;
} 
```

所以我们移除了当前的 head，我们将它的 next 设置为它自己以“帮助 GC”。

这对 GC 有什么帮助？对 GC 有多大帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T02:15:16.523

我问了代码的作者 Doug Lea 教授，他说它减少了 GC 留下浮动垃圾的机会。

一些关于漂浮垃圾的有用资源：

[http://www.memorymanagement.org/glossary/f.html#floating.garbage](http://www.memorymanagement.org/glossary/f.html#floating.garbage)

[http://java.sun.com/docs/hotspot/gc1.4.2/#4.4.4.%20Floating%20Garbage|outline](http://java.sun.com/docs/hotspot/gc1.4.2/#4.4.4.%20Floating%20Garbage|outline)

[http://blog.johantibell.com/2010/04/generational-garbage-collection-and.html](http://blog.johantibell.com/2010/04/generational-garbage-collection-and.html)

# algorithm - 子集的积和

> ID：10106193
> 
> 赞同：9
> 
> 时间：2012-04-11T12:47:07.040
> 
> 标签：algorithm, combinatorics

这个操作有名字吗？并且：是否存在封闭式表达式？

*   对于给定的 n 个元素集合，以及介于 1 和 n 之间的 k 值，
*   取 k 个项目的所有子集（组合）
*   找到每个子集的乘积
*   求所有这些产品的总和

我可以用 Python 表达这一点，并且很容易进行计算：

```
from operator import mul
from itertools import combinations
from functools import reduce
def sum_of_product_of_subsets(list1, k):
    val = 0
    for subset in combinations(list1, k):
        val += reduce(mul, subset)
    return val 
```

我只是在寻找封闭形式的表达式，以避免在设置大小变大的情况下出现循环。

请注意，这与此问题不同：[所有组合与每个组中的一个元素](https://stackoverflow.com/questions/2097988/sum-of-the-product-over-all-combinations-with-one-element-from-each-group)的乘积之和——该问题是关于笛卡尔积的乘积之和。我正在寻找大小为 k 的组合的乘积之和；我不认为他们是一样的。

需要明确的是，对于 set(a, b, c, d)，则：

```
k = 4 --> a*b*c*d
k = 3 --> b*c*d + a*c*d + a*b*d + a*b*c
k = 2 --> a*b + a*c + a*d + b*c + b*d + c*d
k = 1 --> a + b + c + d 
```

只求表情；无需专门提供 Python 代码。（如果您想提供示例实现，任何语言都可以说明。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T12:56:52.467

这些是[基本的对称多项式](http://en.wikipedia.org/wiki/Elementary_symmetric_polynomial)。您可以使用 Wikipedia 中的求和符号来编写它们。您还可以使用[Vieta 的公式](http://en.wikipedia.org/wiki/Vieta%27s_formulas)一次将所有这些公式作为多项式的系数（最多符号）

```
(x-a_1)(x-a_2)...(x-a_k) =
   x^k -
   (a_1 + ... + a_k) x^(k-1) +
   (a_1 a_2 + a_1 a_3 + ... + a_(k-1) a_k)) x^(k-2) +
   ... +
   (-1)^k a_1 ... a_k 
```

通过展开 (x-a_1)(x-a_2)...(x-a_k) 你得到一个多项式时间算法来计算所有这些数字（你的原始实现以指数时间运行）。

编辑：Python实现：

```
from itertools import izip, chain

l = [2,3,4]

x = [1]    
for i in l:
    x = [a + b*i for a,b in izip(chain([0],x), chain(x,[0]))]
print x 
```

这给了你 [24, 26, 9, 1]，因为 2*3*4=24, 2*3+2*4+3*4=26, 2+3+4=9。最后 1 是空乘积，对应于您的实现中的 k=0。

这应该是 O(N ² )。使用多项式 FFT 你可以做 O(N log ² N)，但我懒得写代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-03T19:59:08.600

我刚刚在其他地方遇到了同样的问题，我可能有一个更简单的解决方案。基本上你正在寻找的封闭形式是这个：

### (1+e_1)*(1+e_2)*(1+e_3)*...*(1+e_n) - 1

考虑集合 S={e_1, e_2, ..., e_n}

原因如下：

令“m”为 S (n=e_1*e_2*...*e_n) 的元素的乘积。
如果您查看子集元素的原始乘积，您会发现所有这些乘积都是“m”的除数。
现在将除数函数应用于“m”（从现在起称为 sigma(m) ），只需进行一项修改：将所有 e_i 元素视为“素数”（因为我们不希望它们被除），所以这给出了 sigma(e_i )=e_i+1 。

然后，如果您将 sigma 应用于 m：

`sigma(m)=sigma(e_1*e_2*...*e_n)=1+[e_1+e_2+...+e_n]+[e_1*e_2+e_1*e_3+...+e_(n-1)*e_n]+[e_1*e_2*e_3+e_1*e_2*e_3+...+e_(n-2)]+...+[e_1*e_2*...*e_n]`

这就是原来的问题。（除了开头的1）。我们的除数函数是乘法的，所以前面的等式可以改写为：

`sigma(m)=(1+e_1)*(1+e_2)*(1+e_3)*...*(1+e_n)`
您需要在这里进行一项更正。这是因为空子集（这里考虑在内，但在原始问题中不存在），它在总和中包含“1”（在第一个方程的开头）。所以封闭的形式，你需要的是：
`(1+e_1)*(1+e_2)*(1+e_3)*...*(1+e_n) - 1`

抱歉，我无法真正编写代码，但我认为计算不应超过 2n-1 个循环。

（您可以在此处阅读有关除数函数的更多信息：[http](http://en.wikipedia.org/wiki/Divisor_function) ://en.wikipedia.org/wiki/Divisor_function ）

# model-view-controller - Symfony 2：控制器的依赖注入（DI）

> ID：10106195
> 
> 赞同：13
> 
> 时间：2012-04-11T12:47:08.407
> 
> 标签：model-view-controller, symfony, dependency-injection, fosuserbundle

有没有机会让控制器依赖于他们的服务，而不是通过使用它们内部的服务容器，而是通过纯粹的构造函数依赖注入？

我想以这种方式编写控制器：

```
<?php

class ArticleController extends \Symfony\Bundle\FrameworkBundle\Controller\Controller
{
    private $articleFacade;
    private $articleRepository;

    public function __construct(ArticleFacade $articleFacade, ArticleRepository $articleRepository)
    {
        $this->articleFacade = $articleFacade;
        $this->articleRepository = $articleRepository;
    }

    public function indexAction()
    {
        ...
    }

} 
```

不幸的是，我可以看到 Symfony ControllerResolver 不是通过 ServiceContainer 而是通过简单的`return new $controller`调用来创建新的 Controller 实例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T12:57:22.480

绝对事实上它是推荐的，如果您查看大多数 3rd 方捆绑包，例如 FOSUser，您会发现这正是他们所做的。

诀窍是将您的控制器定义为服务，然后使用服务 id 而不是类名。

[http://symfony.com/doc/current/cookbook/controller/service.html](http://symfony.com/doc/current/cookbook/controller/service.html)

请记住，您必须注入所有需要的服务，例如实体管理器，并且通常不会扩展 symfony 基类。当然，您可以注入完整的容器，但这往往会令人不悦。

# java - 堆栈泛型类不起作用

> ID：10106198
> 
> 赞同：0
> 
> 时间：2012-04-11T12:47:17.997
> 
> 标签：java, generics

> **可能重复：**
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

```
import java.util.EmptyStackException;
import java.util.Vector;

public class Stack<E> extends Vector<E> {
    private E a[];
    private int top;

    public void Stack() {
        a = new E[100];
        top = -1;
    }

    public void Stack(int n) {
        a = new E[n];
        top = -1;
    }

    public E pop() {
        E obj;
        int len = size();
        if (top == -1)
            throw new EmptyStackException();
        else
            obj = a[top--];
        return obj;
    }

    public void push(E e) {
        if (e == null)
            throw new NullPointerException();
        else if (top == size() - 1)
            System.out.println("Stack full");
        else {
            a[++top] = e;
            System.out.println("pushed :" + e);
        }

    }

    public int size() {
        int i;
        for (i = 0; a[i] != null; i++)
            ;
        return i;
    }

} 
```

这是我在 java 中的堆栈泛型类。我在两个构造函数内的数组声明中遇到错误，即 Stack() 和 Stack(int n)。在这两种情况下，错误都是“通用数组创建”。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:55:43.270

您的类中没有构造函数，这些是方法。对于构造函数，请删除 void 类型。构造函数没有返回类型。此外，您的类名以小写字母 stack 开头，构造函数以 Stack 开头。将您的类重命名为 Stack 并删除 void 类型。

你需要这样做

```
 public  Stack(Class<E> cls) 
 {
      a = (E[]) Array.newInstance( cls);

   top=-1;
 }

public  Stack(Class<E> cls,int n) 
  {
   a = (E[]) Array.newInstance( cls,n);
    top=-1;
  } 
```

见[通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

以下是您在 main 方法中创建对象的工作类。

```
class Stack<E> extends Vector<E> {
    private E a[];
    private int top;

    public   Stack(Class<E> cls) 
    {

      a = (E[]) Array.newInstance( cls);

      top=-1;
    }

    public   Stack(Class<E> cls,int n) 
    {

      a = (E[]) Array.newInstance( cls,n);

      top=-1;
    }

    public E pop() {
        E obj;
        int len = size();
        if (top == -1)
            throw new EmptyStackException();
        else
            obj = a[top--];
        return obj;
    }

    public void push(E e) {
        if (e == null)
            throw new NullPointerException();
        else if (top == size() - 1)
            System.out.println("Stack full");
        else {
            a[++top] = e;
            System.out.println("pushed :" + e);
        }

    }

    public int size() {
        int i;
        for (i = 0; a[i] != null; i++)
            ;
        return i;
    }

  public static void main(String...strings ){
      Stack<Integer> st=new Stack<Integer>(Integer.class,n);
  }  

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:59:50.750

无法创建通用数组。所以使用对象数组。

```
 import java.io.*;
 import java.util.EmptyStackException;
 import java.util.Vector;
 public class Stack extends Vector 
 {
   private Object a[];
   private int top;
   public void Stack() 
  {
    a=new Object[100];
    top=-1;
  }
  public void Stack(int n) 
  {
    a=new Object[n];
    top=-1;
  }
  public E pop() 
  {
    E   obj;
    int len = size();
    if (top == -1)
        throw new EmptyStackException();
    else
       obj=(E) a[top--]; 
    return obj;
  }
  public void push(E e) 
  {
    if(e==null)
        throw new NullPointerException();
    else if(top==size()-1)
        System.out.println("Stack full");
    else
    {
       a[++top]=e;
       System.out.println("pushed :"+e);
    }

}
public int size() 
{
    int i;
    for(i=0;a[i]!=null;i++);
    return i;
}
} 
```

# unit-testing - 如何在单元测试中使用 Cassandra 清理 CommitLog 文件

> ID：10106200
> 
> 赞同：1
> 
> 时间：2012-04-11T12:47:21.683
> 
> 标签：unit-testing, cassandra, hector

我遇到了一个与此处列出的问题非常相似的问题：

[单元测试后如何清理嵌入式 cassandra？](https://stackoverflow.com/questions/7944287/how-to-cleanup-embedded-cassandra-after-unittest)

简而言之，我正在启动 Cassandra 来运行一些集成测试，但是当我的测试类运行时它们会失败，因为它们无法删除 Cassandra 生成的 CommitLog 文件。

我正在遵循那里给出的答案中的建议，即在启动时执行清理，但当时仍然无法删除文件（如果我通过代码进行调试，我当时也无法通过命令行或 GUI）。结果是我的第一个测试类通过了，但所有后续测试类都失败了。

更多详细信息：

*   我的同事在 OSX 上运行，没有这个问题；我在 Windows 7 上。
*   我已经尝试在 DOS 和 Cygwin 下以及通过 Eclipse 运行测试，在所有情况下都以我的本地用户和管理员身份运行。
*   我已经使用 Process Explorer 来确认除了单个 Java 进程之外没有任何东西可以处理相关文件。
*   我已经通过代码调试到 java.io.Win32FileSystem 中的本机调用，它无法删除文件。

我可以做些什么来确保 Cassandra 已关闭和/或删除其 CommitLog 文件？

谢谢！

# ios - 是否可以使用 S3 元数据请求获取 ETag？

> ID：10106206
> 
> 赞同：1
> 
> 时间：2012-04-11T12:47:38.350
> 
> 标签：ios, amazon-s3, metadata

问题是我需要先从亚马逊获取 etag 信息，然后才能真正获取文件本身。

经过研究，我发现正确的方法是使用 S3GetObjectMetadataRequest 和后来的 getObjectMetadata 来获取 S3GetObjectMetadataResponse 对象。

但是当尝试使用以下命令创建 S3GetObjectMetadataRequest 时：

`S3GetObjectMetadataRequest *metadata = [[S3GetObjectMetadataRequest alloc] initWithKey:key withBucket:bucket];`

显示强烈警告：

`incompatible Objective-C types initializing 'struct S3GetObjectRequest *', expected 'struct S3GetObjectMetadataRequest *'`

S3GetObjectMetadataRequest 上的文档不存在，我在任何地方都找不到任何参考。

我忽略了这个吗？有没有更简单的方法来获取 ETag 而无需下载所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:55:22.203

这实际上是从文件中获取元数据的正确方法。由于我的亚马逊权限配置错误，我无法获得它们。

奇怪的是，警告仍然出现，即使 S3GetObjectMetadataResponse 是正确创建的......

# javascript - Javascript - 重复字符

> ID：10106207
> 
> 赞同：1
> 
> 时间：2012-04-11T12:47:38.703
> 
> 标签：javascript

我正在尝试创建一个程序来重复输入的单词，因为它有字符，我已经尝试了几种不同的方法，但这些方法都不起作用，这是迄今为止的工作。

```
<html>
<head>
<title>Repeat Word</title>
<script type="text/javascript">
//Program: Repeat Word
//Purpose: Repeat word for as many times as it has characters
//Date last modified: 4/11/12 
var word = "";

word = prompt("Enter the word you would like repeated?")

</script>
</head>
<body>
</form>
</body>
</html> 
```

我希望它重复打招呼的一个例子是......

```
Enter a word: Hello

Hello

Hello

Hello

Hello

Hello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:51:05.303

只需添加以下内容：

```
for(var i = 0, repeat = word.length; i < repeat; i++) {
    console.log(word);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:51:21.887

```
​var word = "Hello";
var letters = word.length;
for(var i = 0; i < letters; i++){
    document.write(word + '<br />');
}​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:51:39.210

尝试以下代码以重复具有字符数的单词。

```
<html>
<head>
<title>Repeat Word</title>
<script type="text/javascript">
//Program: Repeat Word
//Purpose: Repeat word for as many times as it has characters
//Date last modified: 4/11/12 
var word = "";

word = prompt("Enter the word you would like repeated?")
for(var i=0;i<word.length;i++)
{
 document.write(word+"<br />");
}

</script>
</head>
<body>
</form>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T12:52:31.370

```
<body>
     <script type="text/javascript">
           var repeat = prompt("Enter the word you would like repeated");
           for(var i=0;i<=repeat.length;i=i+1) {
                document.write(repeat + "<br />");
           }
     </script>
</body> 
```

试试：http: [//jsfiddle.net/6skD7/2/](http://jsfiddle.net/6skD7/2/)

# wcf - 关于 wcf 休息返回列表

> ID：10106210
> 
> 赞同：0
> 
> 时间：2012-04-11T12:47:55.653
> 
> 标签：wcf

服务器端接口：

```
[OperationContract]
[WebGet(UriTemplate = "GetCardInfoByCardNumber/?cardNumber={cardNumber}&SerialNumber={SerialNumber}&token={token}", ResponseFormat = WebMessageFormat.Json)]
IList<Cards> GetCardInfoByCardNumber(string cardNumber, string SerialNumber, string token); 
```

服务器端实现：

```
public IList<Cards> GetCardInfoByCardNumber(string cardNumber, string SerialNumber, string token)
{
   if (BaseClass.HasPermission(token))
      return cm.GetCardInfoByCardNumber(cardNumber, SerialNumber);
   else
      return null;
} 
```

客户端：

```
class Program
{
    static void Main(string[] args)
    {
        TestResWCF();
        Console.ReadLine();
    }

    static List<Cards> TestResWCF()
    {
        List<Cards> a = null;
        string ServiceUri = "http://192.168.15.18:8089/GetCardInfoByCardNumber/?cardNumber=HH-120109-017&SerialNumber=&token=123456";

        WebClient proxy = new WebClient();

        proxy.Encoding = Encoding.UTF8;

        proxy.DownloadStringCompleted += new DownloadStringCompletedEventHandler
            (
             (s, e) =>
             {
                 Stream stream = new MemoryStream(Encoding.Unicode.GetBytes(e.Result));
                 DataContractJsonSerializer obj = new DataContractJsonSerializer(typeof(List<Cards>));
                 a = obj.ReadObject(stream) as List<Cards>;
             }
            );

        proxy.DownloadStringAsync(new Uri(ServiceUri));

        return a;
    } 
```

`List<Cards>`总是返回空字符串！如何返回数据？非常感谢！

你有什么例子吗？对不起，我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:01:28.237

你能分享“卡片”和“卡片”类的代码吗？

我很确定它很可能没有正确地用 [DataContract] 和 [DataMember] 装饰。您可能已经使用 [DataContract] 修饰了类型，但忘记使用 [DataMember] 注释您想要的成员。或者，您可能根本没有装饰它们，而幕后正在发生其他事情。在 99% 的场景中，错误修饰或不正确的修饰或序列化程序的错误初始化是发生此错误的原因。

如果你确实装饰得当，可能还有其他一些问题。仅从您提供的详细信息中很难 100% 确定地判断，因此我将启用跟踪以生成跟踪日志（然后您可以使用 SvcTraceViewer 查看/共享）并打开调试异常（通过打开 includeExceptionDetailInFaults 设置）。

# sql-server-2005 - 内部联接中的 SQL 查询问题

> ID：10106215
> 
> 赞同：0
> 
> 时间：2012-04-11T12:48:17.393
> 
> 标签：sql-server-2005

我有桌子`Creditcard`，，`Childcreditcard1``Childcreditcard2`

儿童信用卡1

```
CreditcardID  TranscationDatetime
22222132132   2010-04-11 12:36:10.210
22222132134   2011-04-11 12:36:10.210
12364132122   2019-04-11 12:36:10.210
45677132124   2011-04-11 12:36:10.210
45677132124   2012-04-11 12:36:10.210 
```

儿童信用卡2

```
CreditcardID  TranscationDatetime
22222132132   2010-04-11 12:36:10.210
22222732134   2011-04-11 12:36:10.210
12364132192   2019-04-11 12:36:10.210 
```

万事达信用卡

```
CreditcardID            primaryCreditID
22222132132     22222132132             
22222132134     22222132132             
12364132122     12364132122         
45677132124     45677132124
45677232124     45677232124     
78567723212     78567723212 
23677232124     23677232124 
45678944343     45678944343
22222732134     22222732134
12364132192              12364132192 
```

现在从这三个表中，我需要仅从我们拥有的任何内容中获取`creditcardID`不匹配的表，表将始终存在于表中`MasterCreditcard``CreditcardID``Childcreditcard1``Childcreditcard2``MasterCreditcard`

结果应该是表格应该是这样的

```
 45677232124
 78567723212
 23677232124
 45678944343 
```

我的查询：

```
select 
      distinct(cc.CreditcardID) 
from 
      MasterCreditcard  CC  
inner JOIN 
      Childcreditcard1 c1 ON CC.CreditcardID <> c1.CreditcardID 
inner JOIN 
      Childcreditcard2 c2 ON CC.CreditcardID <> c2.CreditcardID 
```

我试过这样，但这给出`CreditcardID`了`MasterCreditcard`表中所有错误的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:53:08.520

试试这可能对你有用

```
select distinct(cc.CreditcardID) from MasterCreditcard  CC  
left JOIN Childcreditcard1 c1 ON CC.CreditcardID =c1.CreditcardID  
left JOIN Childcreditcard2 c2 ON CC.CreditcardID =c2.CreditcardID   
where c1.CreditcardID  is null or c2.CreditcardID   is null 
```

我的答案是基于这张图片，第二张图片左外连接案例

![替代文字](../Images/586156c0333e66f98351bf8f3807c5d3.png)

# mysql - SQL添加忽略重复的新列

> ID：10106216
> 
> 赞同：4
> 
> 时间：2012-04-11T12:48:21.550
> 
> 标签：mysql, sql, webmin

我们有很多数据库，我们正在尝试在所有数据库上运行升级脚本以使它们保持最新 - 因此，它们都有不同的列和表。

如果它们不存在，我们想添加新的表和列，例如

```
CREATE TABLE IF NOT EXISTS `orders` ( `id` INT (11) NOT NULL , 
    `value` VARCHAR (50) , `designId` INT (11) , PRIMARY KEY ( `id`)); 
```

这行得通，但我们正在为列寻找相同类型的解决方案。我们当前的解决方案抛出错误代码：1060 - 列名重复。

```
ALTER TABLE `orders` ADD COLUMN `customer` INT (1) NULL; 
```

我从[garry passarella](http://www.garrypassarella.co.uk/2011/07/18/check-a-column-exists-and-add-column-if-it-doesnt-in-sql-server/)尝试了以下操作，但我收到一个错误，声称 sql 语法不正确：

```
IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS 
    WHERE TABLE_NAME = 'orders' AND COLUMN_NAME = 'customer') 
    BEGIN  ALTER TABLE orders
    ADD customer BIT DEFAULT NULL
END 
```

如果我们可以使用某些东西来让每一行忽略重复项，或者让整个脚本忽略错误代码 1060，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:54:37.250

是`if ... begin ... end`SQL Server 语法。对于 MySQL，它更像是[`if ... then ... end if`](http://dev.mysql.com/doc/refman/5.0/en/if-statement.html)：

```
if not exists (select * from information_schema.columns
    where column_name = 'customer' and table_name = 'orders') then
    alter table orders add customer int(1) null;
end if 
```

回复您的评论：在 MySQL 中，您不能在命令行中键入[复合语句。](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-compound-statements.html)它们必须在函数或存储过程中。例如：

```
drop procedure if exists sp_addcolumn;

delimiter //
create procedure sp_addcolumn()
begin
  if not exists (select * from INFORMATION_SCHEMA.COLUMNS 
      where table_name = 'orders' and column_name = 'customer') then
    alter table `orders` add column `customer` int(1) null;
  end if;
end//

delimiter ;
call sp_addcolumn; 
```

MySQL 错误跟踪器上有一个[开放请求，](http://bugs.mysql.com/bug.php?id=48777)以允许`if`存储过程之外的语句。它的当前状态是需要分类。

# c# - 如何从 PowerShell 返回一个对象或多个值以执行 C# 代码

> ID：10106217
> 
> 赞同：34
> 
> 时间：2012-04-11T12:48:27.330
> 
> 标签：c#, powershell

一些 C# 代码执行带有参数的 powershell 脚本。我想从 Powershell 获取返回码和字符串，以了解 Powershell 脚本中是否一切正常。

这样做的正确方法是什么 - 在 Powershell 和 C# 中

### 电源外壳

```
# Powershell script
# --- Do stuff here ---
# Return an int and a string - how?
# In c# I would do something like this, if this was a method:

# class ReturnInfo
# {
#    public int ReturnCode;
#    public string ReturnText;
# }

# return new ReturnInfo(){ReturnCode =1, ReturnText = "whatever"}; 
```

### C＃

```
void RunPowershellScript(string scriptFile, List<string> parameters)
    {

        RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create();

        using (Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration))
        {
            runspace.Open();
            RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
            Pipeline pipeline = runspace.CreatePipeline();
            Command scriptCommand = new Command(scriptFile);
            Collection<CommandParameter> commandParameters = new Collection<CommandParameter>();
            foreach (string scriptParameter in parameters)
            {
                CommandParameter commandParm = new CommandParameter(null, scriptParameter);
                commandParameters.Add(commandParm);
                scriptCommand.Parameters.Add(commandParm);
            }
            pipeline.Commands.Add(scriptCommand);
            Collection<PSObject> psObjects;
            psObjects = pipeline.Invoke();

            //What to do here?
            //ReturnInfo returnInfo = pipeline.DoMagic();

        }
    }

  class ReturnInfo
  {
      public int ReturnCode;
      public string ReturnText;
  } 
```

通过使用 Write-Output 并依赖诸如“最后两个 psObjects 是我正在寻找的值”之类的约定，我设法做到了这一点，但它很容易破坏。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-11T15:08:52.457

In your powershell script you can build an Hashtable based on your necessity:

```
[hashtable]$Return = @{} 
$Return.ReturnCode = [int]1 
$Return.ReturnString = [string]"All Done!" 
Return $Return 
```

In C# code handle the Psobject in this way

```
 ReturnInfo ri = new ReturnInfo();
 foreach (PSObject p in psObjects)
 {
   Hashtable ht = p.ImmediateBaseObject as Hashtable;
   ri.ReturnCode = (int)ht["ReturnCode"];
   ri.ReturnText = (string)ht["ReturnString"];
 } 

//Do what you want with ri object. 
```

If you want to use a PsCustomobject as in Keith Hill comment in powershell v2.0:

powershell script:

```
$return = new-object psobject -property @{ReturnCode=1;ReturnString="all done"}
$return 
```

c# code:

```
ReturnInfo ri = new ReturnInfo();
foreach (PSObject p in psObjects)
   {
     ri.ReturnCode = (int)p.Properties["ReturnCode"].Value;
     ri.ReturnText = (string)p.Properties["ReturnString"].Value;
   } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-02T16:58:14.257

[CB. 的回答](https://stackoverflow.com/a/10108756/3850012 "CB. 之前的回答")对我来说非常有用，只需稍作改动。我没有在任何地方看到这个发布（关于 C# 和 PowerShell），所以我想发布它。

在我的 PowerShell 脚本中，我创建了一个 Hashtable，在其中存储了 2 个值（一个 Boolean 和一个 Int），然后将其转换为 PSObject：

```
$Obj = @{}

if($RoundedResults -ilt $Threshold)
{
    $Obj.bool = $true
    $Obj.value = $RoundedResults
}
else
{
    $Obj.bool = $false
    $Obj.value = $RoundedResults
}

$ResultObj = (New-Object PSObject -Property $Obj)

return $ResultObj 
```

然后在我的 C# 代码中，我做了与 CB 相同的事情。做了，但我必须使用`Convert.ToString`才能成功取回值：

```
ReturnInfo ri = new ReturnInfo();
foreach (PSObject p in psObjects)
   {
     ri.ReturnCode = Convert.ToBoolean(p.Properties["ReturnCode"].Value;)
     ri.ReturnText = Convert.ToString(p.Properties["ReturnString"].Value;)
   } 
```

我通过以下 StackOverflow 帖子找到了答案： [https ://stackoverflow.com/a/5577500](https://stackoverflow.com/a/5577500)

Kieren Johnstone 说：

> 使用 Convert.ToDouble(value) 而不是 (double)value。它接受一个对象并支持您要求的所有类型！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:14:55.467

哇，好问题！我会从我的头顶上开一枪...

您可以在 C# 中设计一个类，该类表示您要用于在两者之间传递数据的结构。在 PS 脚本中，您可以使用 XmlWriter 来制作 XML 响应并用于`Write-output`输出 XML 字符串。

在 C# 端，捕获标准输出响应，将 XML 反序列化为新的响应类，然后处理结果。请注意，除了 XML 响应之外，您不能将任何内容写入标准输出，否则您将无法反序列化到类中。

# symfony - 在 Symfony2 中捆绑以从 Yahoo 和 Gmail 导入联系人

> ID：10106220
> 
> 赞同：2
> 
> 时间：2012-04-11T12:48:31.333
> 
> 标签：symfony, import, gmail, yahoo

我想知道 Symfony2 中有一个现有的捆绑包或供应商可以从 Yahoo 和 Gmail 导入联系人。我搜索但一无所获。我也开始自己做，但是遇到了一些问题...

# python - 有没有办法获得 gtk3 和 python 在 aptana 上工作的代码提示？

> ID：10106222
> 
> 赞同：6
> 
> 时间：2012-04-11T12:48:46.747
> 
> 标签：python, aptana, pydev, gtk3

我的情况是安装了 Aptana eclipse 插件并且工作正常。

如果我`from gi.repository import Gtk`习惯的代码完成`import gtk`功能消失了。任何解决方案还是只是一个错误？

我的临时解决方案是`import gtk\ngtk.`在剪贴板管理器中保留一个，并在我需要提示时将其放入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:06:25.597

就在这里！您应该将 gi 添加到强制内置命令中，您将获得代码完成：

Go to the Window->Preferences, PyDev->Interpreter python section and add gi to the "Forced builtin" tab for *each* interpreter you would like to use Gtk3.

More about this: [http://pydev.org/manual_101_interpreter.html](http://pydev.org/manual_101_interpreter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:33:23.117

> `from gi.repository import Gtk`

不一样

> `import gtk`

随着声明“

> `from gi.repository import Gtk`

您正在导入 Gtk 3\. 使用

> `import gtk`

您正在导入 Gtk 2。

我会说你的代码完成不知道 Gtk 3。

也许有用：

Gtk 3 教程[http://readthedocs.org/docs/python-gtk-3-tutorial/en/latest/index.html](http://readthedocs.org/docs/python-gtk-3-tutorial/en/latest/index.html)

[http://live.gnome.org/PyGObject](http://live.gnome.org/PyGObject)

# javascript - JSF：一起使用 onclick + actionListener

> ID：10106223
> 
> 赞同：5
> 
> 时间：2012-04-11T12:49:07.783
> 
> 标签：javascript, ajax, jsf

我正在尝试在单击按钮时执行 JavaScript，同时在后台设置属性。执行 JS 代码有效，但不会调用属性操作侦听器。但是，当我删除 onclick 属性时，单击命令按钮时会在后台设置属性。我也尝试过使用 actionListener。但同样的问题。这是我的 JSF 代码：

```
<rich:dataTable value="#{bean.items}" var="item">
  <rich:column>
    <a4j:commandButton value="Upload" onclick="Richfaces.showModalPanel('p-id');return false;">
       <f:setPropertyActionListener target="#{bean.targetId}" value="#{item.id}" />   
   </a4j:commandButton>
 </rich:column>
 // more columns
</rich:dataTable> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T01:08:09.480

该`<a4j:commandButton>`组件生成一个 HTML`<input type="submit">`元素以及一堆与当前问题无关的 ajax 魔法的 JS 代码。

组件的`onclick`属性生成为`onclick`同一个 HTML 元素的属性。该`onclick`属性通常指的`click`是在特定 HTML 元素上触发 HTML DOM 事件时执行的一些 JavaScript 代码。当最终用户单击 HTML 元素时立即触发此事件，这发生*在*调用 HTML 元素的默认操作（提交父表单）之前。更重要的是，默认操作可以由 JavaScript 代码的布尔结果控制。如果返回`false`，则不会执行默认操作。这就是您的情况。

如果你想同时调用`onclick`属性中的 JavaScript 代码*和*HTML 元素的默认操作`<input type="submit">`，那么你必须 return `true`，或者干脆删除这`return false;`部分。

# iphone - 调用来自远程服务器的 IBAction

> ID：10106224
> 
> 赞同：0
> 
> 时间：2012-04-11T12:49:09.377
> 
> 标签：iphone, xcode, app-store

是否可以从远程服务器调用 IBAction？这会让我的生活更轻松。我有一个适用于 iPhone 的测验应用程序，我有一个由测验问题和答案组成的 IBAction/arc4random。我的小问题是，每次提交新版本时，我只会用更多问题更新应用程序。应用程序的其余部分保持不变。如果我能以某种方式更新服务器上某处的 .m 文件，我就不必每 1000 个问题提交一个新版本。这甚至可能吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:51:18.567

如果您使用 Parse.com 之类的服务，您可以构建一个数据库，然后像 Web 服务一样远程提取问题。这就是我们在 Trivia 应用程序中所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T12:51:52.110

最简洁的答案是不。您不能从远程服务器更改或调用应用程序中的代码。但是，您可以使用您的问题/答案创建一个数据库，并通过应用程序从您的服务器中提取数据库。

# java - 如何在网络服务器上上传图片？

> ID：10106249
> 
> 赞同：0
> 
> 时间：2012-04-11T12:50:48.710
> 
> 标签：java, android, jsp, image-upload

从 Android 应用程序如何在 Web 服务器上上传图像以及如何使用 jsp 在服务器端捕获它？请帮助我？任何示例代码真的很有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:53:47.163

只是谷歌它：P

[http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm](http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm)

[如何在jsp页面上显示上传的图片](https://stackoverflow.com/questions/9751598/how-to-show-an-uploaded-image-on-jsp-page)

然后问一个问题

# android - 从 Android 客户端将参数传递到托管在 Windows Azure 上的 VB.NET WS

> ID：10106252
> 
> 赞同：2
> 
> 时间：2012-04-11T12:50:53.973
> 
> 标签：android, vb.net, web-services, azure, ksoap2

我正在努力将参数发送到托管在 Windows Azure 上的 VB.NET WS（Web 服务）。获得一个简单的 hello world（无参数）可以正常工作，但由于某种原因，我在 Web 服务端的参数为空？

要调用的 Web 服务函数 (IService1.vb)：

```
<OperationContract()>
Function GetAddition(ByVal number1 As Integer, ByVal number2 As Integer) As String 
```

功能实现（Service1.svc.vb）：

```
Function GetAddition(ByVal number1 As Integer, ByVal number2 As Integer) As String  Implements IService1.GetAddition
    Return number1 + number2
End Function 
```

安卓客户端代码：

```
import java.util.ArrayList;

import android.app.*;
import android.os.*;
import android.widget.TextView;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import org.xmlpull.v1.XmlPullParserException;

public class Test2Activity extends Activity {
TextView tv;

private static final String SOAP_ACTION = "http://tempuri.org/IService1/";    
private static final String NAMESPACE = "http://tempuri.org/";    
private static final String URL = "http://a42c90a9e3e74fffa7b0093001f51de8.cloudapp.net/Service1.svc";    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    System.setProperty("http.keepAlive", "false");
    tv=(TextView)findViewById(R.id.textView1);               

    ArrayList<Object> tmpParam = new ArrayList<Object>();
    tmpParam.add(1);
    tmpParam.add(4);

    String result = call("GetAddition", tmpParam, new String[]{"number1","number2"});
    //String result = call("GetHello", new ArrayList<Object>(), new String[]{""}); //works

    tv.setText(result);

    }

public String call(String methodName, ArrayList<Object> arrParameterValues, String arrParameterNames[])
{
    try {

        SoapObject request = new SoapObject(NAMESPACE, methodName);

        for (int k = 0;k < arrParameterValues.size() ; k++){
            PropertyInfo tmp = new PropertyInfo();
            tmp.setName(arrParameterNames[k]);
            tmp.setValue(arrParameterValues.get(k));
            tmp.setType(int.class); //hard coded for now
            request.addProperty(tmp);
        }
        //tried
        /*
        request.addProperty("number1",1);
        request.addProperty("number2",1);
        */

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION.concat(methodName) , envelope);

        //If an XmlPullParserException occurs, retry once in order to workaround an Android emulator bug
        try {
            androidHttpTransport.call(SOAP_ACTION.concat(methodName), envelope);
        } 
        catch(XmlPullParserException ex) {
            ex.printStackTrace();

            androidHttpTransport.call(SOAP_ACTION.concat(methodName), envelope);
        }

        Object result = envelope.getResponse();                 
        return result.toString();
    }
    catch(Exception ex) {
        return ex.toString();
    }
}   
}//end of class 
```

返回值为 0。使用其他字符串参数化函数时，客户端不会收到任何字符串。

我正在使用 ksoap2-android-assembly-2.6.2-jar-with-dependencies、Android 2.1 并在 Eclipse 3.7.2 中进行开发。Web 服务是在 Visual Studios 2010 中构建的

你们中的一些人可能会想：“为什么是 VB 而不是 C#？！” 原因是因为我已经有一些 VB 的经验 :)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:38:47.163

您可以使用以下问题中的方法传递参数：

[如何在 android 上使用 ksoap2 调用 WCF 服务？](https://stackoverflow.com/questions/2589486/how-to-call-a-wcf-service-using-ksoap2-on-android)

像：

```
 try {
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    request.addProperty("Name", "Qing"); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope( 
            SoapEnvelope.VER11); 
    envelope.dotNet = true; 
    envelope.setOutputSoapObject(request); 

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL); 
    androidHttpTransport.call(SOAP_ACTION, envelope); 
    SoapPrimitive result = (SoapPrimitive)envelope.getResponse(); 

    //to get the data 
    String resultData = result.toString(); 
    // 0 is the first object of data  

    sb.append(resultData + "\n"); 
 } catch (Exception e) { 
    sb.append("Error:\n" + e.getMessage() + "\n"); 
 } 
```

# c# - 反序列化soap响应C#

> ID：10106255
> 
> 赞同：1
> 
> 时间：2012-04-11T12:51:02.060
> 
> 标签：c#, soap, deserialization, messages

我收到了来自服务的肥皂响应：

```
<SOAP-ENV:Body>
    <ns1:getCurrencyListResponse>
        <getCurrencyListReturn SOAP-ENC:arrayType="ns2:Map[2]" xsi:type="SOAP-ENC:Array">
            <item xsi:type="ns2:Map">
                <item>
                    <key xsi:type="xsd:string">id</key>
                    <value xsi:type="xsd:string">18</value>
                </item>
                <item>
                    <key xsi:type="xsd:string">name</key>
                    <value xsi:type="xsd:string">USD</value>
                </item>
            </item>
            <item xsi:type="ns2:Map">
                <item>
                    <key xsi:type="xsd:string">id</key>
                    <value xsi:type="xsd:string">19</value>
                </item>
                <item>
                    <key xsi:type="xsd:string">name</key>
                    <value xsi:type="xsd:string">EUR</value>
                </item>
            </item>
        </getCurrencyListReturn>
    </ns1:getCurrencyListResponse>
</SOAP-ENV:Body> 
```

文件 wsdl 未指定返回类型。如何在 C# 中反序列化此消息？“项目”和“地图”的数量不知道。应该类似于这个例子：

```
[SoapType(Namespace = "http://xml.apache.org/xml-soap", TypeName = "Map")]
public class Map
{
    public item[] item;
}

public class item
{
    [SoapElement]
    public string key;

    [SoapElement]
    public string value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:54:00.400

在您的项目中，您应该添加对 webservice 的引用。
通过这种方式，webservice 的包装器被自动创建，让您调用它的方法并使用包装器中的类获取响应。
序列化和反序列化对您来说是透明的。

# groovy - groovy 中的开源项目？

> ID：10106256
> 
> 赞同：0
> 
> 时间：2012-04-11T12:51:04.553
> 
> 标签：groovy, open-source

我是一名 java 程序员，最近对 groovy 产生了兴趣。当我喜欢用 groovy 编程时，我想进一步涉足该语言。所以，我正在寻找开始的项目。我在 C、C++ 和 java 中找到了很多项目，但在 groovy 中却没有很多。

我不知道从哪里开始。如果有的话，你能推荐我一些很好的 groovy 开源项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:57:26.647

这个问题可能会因为过于模糊或离题而结束，但你在寻找什么样的东西？

当然有[Grails](https://github.com/grails/grails-core)作为开源项目的一个例子

或者，当然，您可以查看[GitHub 上所有](https://github.com/languages/Groovy)以 Groovy 为基础语言的存储库……

# c++ - 找C++小网猫

> ID：10106257
> 
> 赞同：-1
> 
> 时间：2012-04-11T12:51:04.833
> 
> 标签：c++, ssh, netcat

我需要一些netcat的独立实现..问题是netcat需要添加1000个库..我需要一个文件中的一个小netcat来更改和实现新事物..

有人知道一个简单的netcat吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:58:25.727

[OpenBSD netcat](http://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/nc/)似乎只需要一个 BSD'ish C 库。

# silverlight - WebRequest 安全异常

> ID：10106264
> 
> 赞同：0
> 
> 时间：2012-04-11T12:51:28.173
> 
> 标签：silverlight, cross-domain-policy

我正在尝试发布跨域 HTTP 请求，但不断收到 SecurityException 而不是响应。

我添加了一个*clientaccesspolicy.xml*：

```
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

以及*crossdomain.xml*：

```
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

到 silverlight 应用程序并将两者都设置为*content + copy always*。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:58:19.430

xml 文件是否存在于站点的**根目录中？**也许您可以在尝试访问该服务时让 Fiddler 或任何其他网络监视器运行，这样您就可以看到 xml 文件的 404 并查看哪里出错了。

编辑：另外，如果您使用 Silverlight，您只需要一个 clientaccesspolicy.xml。crossdomain.xml 是一个基于 Flash 的域策略文件，Silverlight 也可以理解。

# c# - 在 C# 中的其他线程上实现的调用事件

> ID：10106271
> 
> 赞同：1
> 
> 时间：2012-04-11T12:51:47.470
> 
> 标签：c#, multithreading, events, networking, invoke

我有一个带 Socket 的类，监听客户端接收数据。当接收到新数据时，我想调用一个事件（如果已实现），但正如您所知，每个连接都有自己的线程，因此事件将在该线程上运行，而您知道其余的。您不能使用表单控件。我如何调用事件（或调用它）。我对线程和网络编程真的很陌生，所以我很欣赏任何例子。

```
public class HVremotechooser
{
    public delegate void NewOrder(Order order);
    public event NewOrder nOrder;

    //... (code elided)

    public void ReceiveCallback(IAsyncResult AsyncCall)  // new connection of client
    {

         //... (code elided)
         if (nOrder != null)
              nOrder(Order);   // calling the event "nOrder"
         //... (code elided)

    }

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:09:55.050

如果要从非 UI 线程更新表单，则必须调用该操作。我通常做的是以下几点：

```
private void LongRunningBackgroundThread() {
   // lots of work
   ...
   // Update my form
   InvokeIfRequired(() => {
       ...update form...
   }
}

private static void InvokeIfRequired(Action a) {
    if (control.InvokeRequired) {
        control.Invoke(a);
    } else {
        a();
    }
} 
```

看[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)和[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:08:55.790

我在上周开发的 Silverlight 应用程序中遇到了类似的问题，并使用了 Dispatcher.BeginInvoke 方法。使用 Windows 表单，使用 Control.BeginInvoke 可能更容易（尽管我相信两者都应该工作）：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control .begininvoke.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T02:43:34.380

您可以使用典型的编组操作，例如将委托`Invoke`的`BeginInvoke`执行注入到 UI 线程中。`ISynchronizeInvoke`只需将or的实例传递`SynchronizationContext`给您的类以促进编组。

但是，在您的情况下，我不会这样做。因为，大概无论如何，这些回调是由于套接字事件而发生的，因此它们很~~可能~~会变得艰难而沉重。您绝对不想用所有这些活动来抨击您的 UI 线程。相反，将所有相关数据打包并放入一个集合中，然后 UI 线程可以`System.Windows.Forms.Timer`在更合理的时间间隔内轮询使用 a。

我一直在撕毁这些编组操作。它们被高估和过度使用。请记住，有两种通用方法可以在 UI 和工作线程之间共享数据和信号。

*   `Invoke`通过或`BeginInvoke`在工作线程中推送方法
*   `System.Windows.Forms.Timer`通过UI 线程中的拉取方法

pull 方法可以而且通常更优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T04:26:31.947

UI 线程是一个 UI 问题。在我看来，你不应该担心在这段代码中调用 ui 线程。相反，事件的消费者应该做`Invoke`他们碰巧需要做的或任何其他线程的事情。这样，如果 UI 人员需要更改他们的策略（例如通过使用计时器），您的非 UI 相关代码将不需要更改。

# mysql - 唯一获取基于 ID 的对应值对

> ID：10106274
> 
> 赞同：0
> 
> 时间：2012-04-11T12:51:55.060
> 
> 标签：mysql, sql, database

想想这样的桌子，

```
ID     Value    
100    1    
100    2    
101    1    
101    2   
102    1     
103    2   
104    1 
```

现在我想根据其对应的值组合唯一地检索 ID。（即） 100 同时具有 1 和 2 作为值。101 也有 1 和 2。现在我不想要 100 和 101。我只想要其中一个（100 或 101）。同样，我不想要 102 和 104，因为它们的值都为 1。我只想要它们。通常，我的结果应该如下

```
ID
100
102
103 
```

我想要具有相应值对的 ID 唯一。我正在使用 MYSQL。请帮我编写查询以找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:13:45.437

你可以尝试这样的事情：

```
select
  min(id)
from (
  select 
    id, 
    group_concat(value order by value) as values
  from <table>
  group by id
) r
group by values 
```

这是如何工作的：

*   子查询为每个 id 返回一行，并带有一个包含所有值的额外列（按排序顺序，这对于下一步很重要）
*   外部查询为每组值选择最小 id

# javascript - 是否可以在 XmlHttpRequest 中发送 Windows 登录凭据？

> ID：10106276
> 
> 赞同：1
> 
> 时间：2012-04-11T12:51:59.640
> 
> 标签：javascript, ajax, http, xmlhttprequest, windows-authentication

我正在登录到单独域上的应用程序，并且对于我向该域发出的每个后续 XmlHttpRequest，我想发送 Windows 身份验证凭据，因此如果我向单独的服务发出请求，则不会提示我再次登录同一个域。

是否可以在 XmlHttpRequest 标头中发送 Windows 身份验证凭据？

```
var xmlhttp = new window.XMLHttpRequest();
xmlhttp.open("GET", requestUrl, true);
xmlhttp.setRequestHeader("Content-Type", "application/json");
xmlhttp.setRequestHeader("Accept", "application/json");

//Is it possible to send the Windows Authentication creds in the header of this request?
xmlhttp.setRequestHeader("?????", "?????");

xmlhttp.onreadystatechange = function ()
{
    if (xmlhttp.readyState == 4)
    {
        callback(__parseJson(xmlhttp.responseText));
    }
}
xmlhttp.send(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:47:46.607

对于对不同域的每个初始请求，您必须使用登录域登录。因为请求将发送到不同的服务，所以 IIS 将其视为初始请求并提示登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:58:26.803

通常，您会将其作为 URI 的一部分进行：

`http://username:password@webaddress.com`

# android - 在Android v4.0 WebView中显示®注册商标符号？

> ID：10106278
> 
> 赞同：3
> 
> 时间：2012-04-11T12:52:04.570
> 
> 标签：android, android-webview, android-4.0-ice-cream-sandwich

源 HTML 字符串（包括符号）来自 strings.xml 资源文件，并且注定要显示在 WebView 中。我已经在资源中对此进行了测试：

```
<string name="MY_STRING">®</string> 
```

*   使用资源 (®) 中的实际商标符号，项目构建，但在 WebView 中显示时显示为“®”（即“A”抑扬符，后跟注册商标符号） - 即显示两个字符，第一个不正确和不需要的。
*   使用实体引用时，我看到了相同的结果，`&#174;`
*   使用`&reg;`失败，项目无法构建。

这是将字符串资源推送到 WebView 中的代码：

```
String html = getString(R.string.MY_STRING);
((WebView)findViewById(R.id.terms_web_view)).loadData(html, "text/html", "UTF-8"); 
```

我也试过这个，但没有帮助： webView.getSettings().setDefaultTextEncodingName("UTF-8");

我将 HTML 字符串推送到 Logcat，它看起来很好 - 它正确显示了符号。那么如果字符串没问题，并且 WebView 设置为使用 UTF-8，为什么符号显示不正确？

**更新** 我在其他设备上测试过。我只能在 Android v4.04 上的 Galaxy Nexus 上重现此问题。在 Nexus One v2.3.x、Wildfire S 在 v2.3.x 和 Samsung Tab 10.1 在 v3.2 上，它运行良好。我更改了问题标题以澄清这是一个 ICS 问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:34:00.543

字符串资源并非旨在保存任意 HTML，包括任意实体引用。

如果您预先转义它，您*可能*可以获得任意实体引用来工作：

```
<string name="MY_STRING">&amp;reg;</string> 
```

IIRC，应该`&reg;`在您调用`getString()`.

归根结底，您需要`&reg;`到达`WebView`. 如果您无法确定使用字符串资源执行此操作的方法，则需要将此值存储在其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:02:13.193

您正在使用 loadData(html, "text/html", "UTF-8"); 此方法期望变量 html 中有一个 html 字符串。但事实并非如此。尝试

```
String html = "<html><body>My text is ®</body></html>"; 
```

例如。

--updated 有一个完整的 html 文档

如果您将其存储在资源文件中，请使用：

```
<string name="MY_STRING" formatted="false"><html><body>My text is ®</body></html></string> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-10T03:28:09.867

这不是 Android 开发人员的回答，但如果您想给某人发短信并且 Ⓡ 和 ™ 都不能用作符号（例如在我的 LG 手机 Android 7.0 上），这只是一些简单的事情。只需从此消息线程中复制这些符号，然后将它们发送给您自己或将它们放入快速备忘录中即可。然后，您可以随时使用它们以供将来使用。

# php - 没有方法 PHP MVC 传递参数

> ID：10106279
> 
> 赞同：0
> 
> 时间：2012-04-11T12:52:06.760
> 
> 标签：php, model-view-controller

我对 PHP 中的 MVC 设计模式有疑问。

如果您访问 Stack Overflow 上的问题，则 URL 变为“stackoverflow.com/questions/[id]”，如果您转到“提问”，则 URL 变为“stackoverflow.com/questions/ask”。

我想这通常意味着加载了一个名为“questions”的控制器，而“ask”是该控制器中的一个方法，它告诉视图显示一个表单以便用户提出问题。但是当你访问一个问题时，没有方法，对吧？相反，有一个问题的 ID。这是如何运作的？页面是否首先检查它是否是数字，如果是数字，它会加载问题控制器的 index 方法并将 ID 作为参数传递？如果它不是数字，它会将其视为一种方法？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:55:52.517

当您访问一个问题时，您可以将操作作为“查看”，但通常更喜欢使用“索引”操作。任何没有指定操作的“问题”控制器的请求都可以路由到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:01:32.327

他们只是解析 questions_controller 中的 URL，使用条件语句将它们路由到他们的视图，例如，

如果它是“询问”，它会调用询问的 UI。

当它是一个 id 时，它只是加载问题的 UI 及其答案。

# php - URL 相关性和代码点火器

> ID：10106281
> 
> 赞同：1
> 
> 时间：2012-04-11T12:52:07.770
> 
> 标签：php, codeigniter, url

我设置了网址：

```
$this->session->set_userdata('destination', $this->input->server('REQUEST_URI')); 
```

然后重定向（不起作用，因为它预先添加了站点地址）：

```
redirect($this->session->userdata('destination')); 
```

是否可以重定向到绝对地址，考虑到 REQUEST_URI 在不同域上总是正确的，这是否是一个更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:07:55.630

您需要有一个重定向的绝对地址，例如：

`/account/user/1/jason`

或者

`http://domain.com/accounts`

相对链接在这里没有意义：

`somewhere/link`因为它没有指定这个“位置”对于浏览器的位置。

请记住，这`redirect()`是一个 HEADER REDIRECT（默认情况下）在此处阅读：http: [//codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

# c# - 如何使用串口通过双卡手机发送短信

> ID：10106283
> 
> 赞同：-2
> 
> 时间：2012-04-11T12:52:19.647
> 
> 标签：c#, modem, at-command

我正在使用以下代码向收件人发送短信

```
private void button1_Click(object sender, EventArgs e)
    {
        var com5 = new SerialPort("COM5");
        if (!com5.IsOpen) com5.Open();
        com5.WriteLine("AT" + Environment.NewLine);
        com5.WriteLine("AT+CMGF=1" + Environment.NewLine);
        com5.WriteLine("AT+CMGS=\"" + 03132449297 + "\"" + Environment.NewLine);
        com5.WriteLine("Kashif bhai aap mujhsay kiya kehna chah rahay hen?" + (char)26);            
        com5.Close();                                  

    } 
```

我的问题是：如果我使用单个 sim 移动 USB 调制解调器使用上述编码发送短信，它工作正常。但是当我使用双卡移动 USB 调制解调器时，我无法使用上述编码发送短信。我试过诺基亚200和三星gt-c3312

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:41:40.073

你试过 AT+CSIMSEL=1 吗？

参见本文档 11.4 AT+CSIMSEL 在两张 SIM 卡之间切换：

[http://www.scribd.com/doc/63648056/186/AT-CSIMSEL-Switch-between-two-SIM-card](http://www.scribd.com/doc/63648056/186/AT-CSIMSEL-Switch-between-two-SIM-card)

> 该命令用于选择外置或嵌入式 SIM 卡。笔记
> 
> 1.  支持定制的嵌入式 SIM 卡。客户应提供写入 USIM 芯片组的信息。
>     
>     
> 2.  如果嵌入式 SIM 卡不存在，即标准硬件版本，则禁用该命令。
>     
>     
> 
> 定义值
> 
> 1 – 外置 SIM 卡
> 
> 2 – 嵌入式 SIM 卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:01:41.530

如果可行，试试这个 [http://wenku.baidu.com/view/f740bd000740be1e650e9a41.html?from=related](http://wenku.baidu.com/view/f740bd000740be1e650e9a41.html?from=related) 否则没有这样的命令可以使用双卡手机发送短信。

# c++ - PCL：可视化点云

> ID：10106288
> 
> 赞同：11
> 
> 时间：2012-04-11T12:52:51.823
> 
> 标签：c++, point-cloud-library, point-clouds

我正在尝试使用[PCL](http://pointclouds.org/) CloudViewer 可视化点云。问题是我对 C++ 很陌生，我找到了两个教程，[第一个](https://pcl.readthedocs.io/projects/tutorials/en/latest/writing_pcd.html#writing-pcd)演示了 PointCloud 的创建，[第二个](https://pcl.readthedocs.io/projects/tutorials/en/latest/cloud_viewer.html#cloud-viewer)演示了 PointCloud 的可视化。但是，我无法将这两个教程结合起来。

这是我想出的：

```
#include <iostream>

#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>
#include <pcl/visualization/cloud_viewer.h>

int main (int argc, char** argv)
{
  pcl::PointCloud<pcl::PointXYZ> cloud;

  // Fill in the cloud data
  cloud.width    = 5;
  cloud.height   = 1;
  cloud.is_dense = false;
  cloud.points.resize (cloud.width * cloud.height);

  for (size_t i = 0; i < cloud.points.size (); ++i)
  {
    cloud.points[i].x = 1024 * rand () / (RAND_MAX + 1.0f);
    cloud.points[i].y = 1024 * rand () / (RAND_MAX + 1.0f);
    cloud.points[i].z = 1024 * rand () / (RAND_MAX + 1.0f);
  }

  pcl::visualization::CloudViewer viewer ("Simple Cloud Viewer");
  viewer.showCloud (cloud);

  while (!viewer.wasStopped ())
  {
  }

  return (0);
} 
```

但即使不编译：

```
error: no matching function for call to   
‘pcl::visualization::CloudViewer::showCloud(pcl::PointCloud<pcl::PointXYZ>&)’ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T13:27:52.433

您的错误消息告诉您需要做什么：

```
error: no matching function for call to ‘pcl::visualization::CloudViewer::showCloud(pcl::PointCloud<pcl::PointXYZ>&)’ 
```

所以去 CloudViewer 的文档看看这个成员函数需要什么参数：http: [//docs.pointclouds.org/1.5.1/classpcl_1_1visualization_1_1_cloud_viewer.html](http://docs.pointclouds.org/1.5.1/classpcl_1_1visualization_1_1_cloud_viewer.html)

在那里我们看到它`const MonochromeCloud::ConstPtr &cloud`不是你传入的原始引用。这是来自 boost 的智能指针的 typedef：

```
typedef boost::shared_ptr<const PointCloud<PointT> > pcl::PointCloud< PointT >::ConstPtr 
```

因此，当您创建云时，您需要将其包装在这些智能指针之一中，而不是使其成为局部变量。类似（未经测试）：

```
pcl::MonochromeCloud::ConstPtr cloud(new pcl::PointCloud<pcl::PointXYZ>()); 
```

然后，当您传入变量 cloud 时，它将具有正确的类型，并且您不会收到您报告的错误。您还必须将`cloud.foo`s 更改为`cloud->foo`s。

查看您给出的[第二个示例](http://pointclouds.org/documentation/tutorials/cloud_viewer.php#cloud-viewer)，他们也这样做：

```
pcl::PointCloud<pcl::PointXYZRGBA>::Ptr cloud (new pcl::PointCloud<pcl::PointXYZRGBA>); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-01T23:25:42.247

直接给出答案：

```
pcl::PointCloud<pcl::PointXYZRGB>::Ptr ptrCloud(&cloud); 
```

然后在查看器中放入ptrCloud，就是它所期望的：

```
viewer.showCloud (ptrCloud); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-23T19:39:36.960

如果其他人只是在 ROS 中搜索如何执行此操作，则可以简单地使用：

```
#include <ros/ros.h>
#include <pcl_ros/point_cloud.h>
#include <pcl/point_types.h>
#include <pcl/visualization/cloud_viewer.h>
#include <sensor_msgs/PointCloud2.h>
#include <pcl_conversions/pcl_conversions.h>
#include <iostream>
#include <pcl/common/common_headers.h>
#include <pcl/features/normal_3d.h>
#include <pcl/io/pcd_io.h>
#include <pcl/visualization/pcl_visualizer.h>
#include <pcl/console/parse.h>

typedef pcl::PointCloud<pcl::PointXYZ> PointCloud;

class cloudHandler
{
public:
    cloudHandler():viewer("Cloud Viewer")
    {
        pcl_sub = nh.subscribe("/camera/depth_registered/points", 10, &cloudHandler::cloudCB, this);
        viewer_timer = nh.createTimer(ros::Duration(0.1), &cloudHandler::timerCB,this);
    }

    void cloudCB(const sensor_msgs::PointCloud2 &input)
    {
        pcl::PointCloud<pcl::PointXYZRGB> cloud;
        pcl::fromROSMsg (input, cloud);
        viewer.showCloud(cloud.makeShared());
    }

    void timerCB(const ros::TimerEvent&)
    {
        if(viewer.wasStopped())
            {
                ros::shutdown();
            }
    }

protected:
    ros::NodeHandle nh;
    ros::Subscriber pcl_sub;
    pcl::visualization::CloudViewer viewer;
    ros::Timer viewer_timer;    
};

int main(int argc, char** argv)
{
    ros::init(argc, argv, "pcl_visualize");
    cloudHandler handler;
    ros::spin();
    return 0;
} 
```

包括可能会清理更多:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T17:16:31.530

CloudViewer [pcl cloudviewer教程](http://pointclouds.org/documentation/tutorials/cloud_viewer.php#cloud-viewer)[http://pointclouds.org/documentation/tutorials/cloud_viewer.php#cloud-viewer](http://pointclouds.org/documentation/tutorials/cloud_viewer.php#cloud-viewer) 的教程定义点云如下：

```
pcl::PointCloud<pcl::PointXYZRGB>**::Ptr** cloud; 
```

但是你写了：

```
pcl::PointCloud<pcl::PointXYZ> cloud; 
```

所以尝试将云作为 &cloud 而不是 cloud 传递，或者将其声明为指针。

# linux - 如何重置mongodb缓存

> ID：10106290
> 
> 赞同：6
> 
> 时间：2012-04-11T12:53:03.370
> 
> 标签：linux, mongodb

您能否告诉如何重置 mongodb 缓存以确保查询结果不是来自缓存？现在我尝试重新启动服务器：sudo reboot。还有其他方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T09:56:57.380

按照 user366534 的评论，执行以下操作：

*   停止 mongod
*   sh -c "同步；回声 3 > /proc/sys/vm/drop_caches"
*   启动 mongod

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:03:15.380

MongoDB 本身不处理缓存。相反，它由操作系统的虚拟内存管理器负责，因为 MongoDB 使用内存映射文件。参见：[Mongodb.org](http://www.mongodb.org/display/DOCS/Caching)

我不是 Linux 专家，但出于开发目的，当我想确保完全干净的缓存时，我进行了重新启动，因为这似乎是造成差异的原因。

我假设你想这样做是出于开发/性能测试的原因，而不是出于生产目的......

**更新：**
查看此链接：[http ://www.linuxask.com/questions/how-to-clear-cache-from-memory-in-linux](http://www.linuxask.com/questions/how-to-clear-cache-from-memory-in-linux)

# bash - Bash：如何使用 sed 仅替换文件中的最后一次出现？

> ID：10106292
> 
> 赞同：5
> 
> 时间：2012-04-11T12:53:12.663
> 
> 标签：bash, replace, sed, awk, last-occurrence

有一个包含重复注释行的文件，例如：

```
# ScriptAlias /cgi-bin/ "somepath"
# ScriptAlias /cgi-bin/ "otherpath" 
```

我只想在最后一次出现后添加一行导致

```
# ScriptAlias /cgi-bin/ "somepath"
# ScriptAlias /cgi-bin/ "otherpath"
ScriptAlias /cgi-bin/ "mypath" 
```

为此，我使用以下命令：

```
sed -i 's:^\(.*ScriptAlias /cgi-bin/.*\):\1 \nScriptAlias /cgi-bin/ "mypath":' file 
```

但这会导致在每次出现后添加我的行，例如：

```
# ScriptAlias /cgi-bin/ "somepath"
ScriptAlias /cgi-bin/ "mypath"
# ScriptAlias /cgi-bin/ "otherpath"
ScriptAlias /cgi-bin/ "mypath" 
```

我怎样才能告诉 sed 只替换最后一次出现？

**已编辑：**
如果无法使用 sed 解决它（如评论中所述），请提供达到相同结果的替代方案，谢谢。

**已编辑**：
重复的行可以分开，并且可以在它们之间使用其他行，例如

```
# ScriptAlias /cgi-bin/ "somepath"
# ScriptAlias /cgi-bin/ "otherpath"

# ScriptAlias /cgi-bin/ "another-path"
ScriptAlias /foo/ "just-jump"
# ScriptAlias /cgi-bin/ "that's the last" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:29:39.557

使用[tac以便在您](http://man.cx/tac)*第*一次看到该模式时打印新行：

```
tac file | awk '/ScriptAlias/ && ! seen {print "new line"; seen=1} {print}' | tac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:24:37.850

awk 的替代方案：

```
awk '/ScriptAlias \/cgi-bin\//{x=NR} {a[NR]=$0;}END{for(i=1;i<=NR;i++){if(i==x+1)print "$$$here comes new line$$$"; print a[i];}}' file 
```

测试：

```
kent$  echo "# ScriptAlias /cgi-bin/ "somepath"
fooo
# ScriptAlias /cgi-bin/ "otherpath"
bar
"|awk '/ScriptAlias \/cgi-bin\//{x=NR} {a[NR]=$0;}END{for(i=1;i<=NR;i++){if(i==x+1)print "$$$here comes new line$$$"; print a[i];}}' 
```

输出：

```
# ScriptAlias /cgi-bin/ somepath
fooo
# ScriptAlias /cgi-bin/ otherpath
$$$here comes new line$$$
bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:43:21.977

```
tail -r temp | awk '{line="yourline"}{if($0~/ScriptAlias/&&last==0){print line"\n"$0;last=1}else print}' | tail -r 
```

测试如下：

```
krithika.337> cat temp
# ScriptAlias /cgi-bin/ "somepath" 
# ScriptAlias /cgi-bin/ "otherpath" 
# ndmxriptAlias /cgi-bin/ "otherpath" 
# ScriptAlias /cgi-bin/ "otherpath" 
# bdjiptAlias /cgi-bin/ "otherpath" 
krithika.338> tail -r temp | awk '{line="yourline"}{if($0~/ScriptAlias/&&last==0){print line"\n"$0;last=1}else print}' | tail -r
# ScriptAlias /cgi-bin/ "somepath" 
# ScriptAlias /cgi-bin/ "otherpath" 
# ndmxriptAlias /cgi-bin/ "otherpath" 
# ScriptAlias /cgi-bin/ "otherpath" 
yourline
# bdjiptAlias /cgi-bin/ "otherpath" 
krithika.339> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T19:01:20.667

这是编辑的任务。

```
ex input_file << "DONE"
/ScriptAlias \/cgi-bin\/ "otherpath"
a
ScriptAlias /cgi-bin/ "mypath"
.
:1
/ScriptAlias \/cgi-bin\/ "another-path"
a
ScriptAlias /cgi-bin/ "just-jump"
.
:x
DONE 
```

在最后出现模式下。

```
ex input_file << "DONE"
$
?ScriptAlias \/cgi-bin\/ "otherpath"
a
ScriptAlias /cgi-bin/ "mypath"
.
$
?ScriptAlias \/cgi-bin\/ "another-path"
a
ScriptAlias /cgi-bin/ "just-jump"
.
:x
DONE 
```

# sql-server-2008 - 现有数据库可以标准化吗？

> ID：10106293
> 
> 赞同：1
> 
> 时间：2012-04-11T12:53:18.233
> 
> 标签：sql-server-2008, normalization

在我们公司，以.NET 作为前端，SQL Server 2005 作为后端开发了一个产品。

最初，当他们开始项目时，他们没有遵循 DB 规范化技术。现在他们考虑进行 DB 规范化，其中数据库只包含一个包含数千行的表。

是否可以拆分此现有表并实施规范化？

谁能告诉我一步一步怎么走？

谢谢 ，

史蒂夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:17:06.653

嗯，我是 SSIS 包的忠实粉丝。所以，假设你有你的源表结构（巨大的）并且你已经定义了目标表，我想说只是开始构建一个包来迁移数据。如果你告诉你的表结构会更容易，但我假设你有这样的东西：表订单字段：OrderId，CustomerName productName等等

很明显，您需要一个客户表和一个产品表，因此您的第一步是从订单中运行一个 select distinct (CustomerName) 并将其插入到您的新客户表中。对产品和您可能需要的任何其他实体执行相同操作。

要填充新的订单表，您可以直接从大表中获取诸如 ordered 或 orderDate 之类的字段，当涉及到客户端时（旧表上是文本，新表上是 ID），您将需要查找转换将名称转换为 ID 的任务。

# php - 复选框从我之前的页面加载中自动选择

> ID：10106294
> 
> 赞同：0
> 
> 时间：2012-04-11T12:53:21.420
> 
> 标签：php, javascript, html, css

我有在 html 页面上没有“checked”关键字的复选框列表。例如，我有 a1、b1、c1 的复选框。

页面加载后，我在 UI 中选择 a1 和 b1。当我刷新页面时，a1 和 b1 会自动检查，即使它们在我的 html 中未标记为已检查。如何解决这个问题？

我刚刚在firefox浏览器中测试了上面的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:56:11.533

您应该使用 autocomplete = "off" 属性。[您将在https://developer.mozilla.org/en/How_to_Turn_Off_Form_Autocompletion](https://developer.mozilla.org/en/How_to_Turn_Off_Form_Autocompletion)找到更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:35:08.757

具有使用 JS 的表单处理在页面加载时清除所有框的功能

```
 <script type='text/javascript'>
 function clearCheck() {
 var form = document.forms["form"];
for (var i = 0; i < form.elements.length; i++ ) {
    if (form.elements[i].type == 'checkbox') {
        if (form.elements[i].checked == true) {
            form.elements[i].checked = false;
        }
    }
 }

 }
 </script>

<body onload='clearCheck()'> 
 <form name='form'>    
 <input type='checkbox' name='a1' value='a1'><br>
 <input type='checkbox' name='b1' value='b1'><br>
 <input type='checkbox' name='c1' value='c1'>
 </form> 
```

# sql - 选择查询，需要额外的where子句吗？

> ID：10106300
> 
> 赞同：4
> 
> 时间：2012-04-11T12:53:50.610
> 
> 标签：sql

我有一个查询，当他们都知道这首歌并且状态已完成时，它会返回所选人员的歌曲名称列表。

当所有乐器都没有设置为“N/A”时，有没有办法只显示状态已完成的歌曲？

例如，假设表格内容如下。

```
    BandieName SongName 乐器状态
    Holly Wipeout Bells 完成
    Holly Centenial N/A Complete
    夏洛特消灭符号完成
    夏洛特 Centenial N/A 完成

```

如果我从列表中选择*Holly*和*Charlotte*并运行查询，它将列出*Wipeout*和*Centenial*，因为它们都将这些歌曲的状态设为已完成；但是，我不希望它显示*Centenial*，因为该歌曲的所有选定人员的乐器都是*N/A*。

如果内容如下，并且我选择了其中的三首，我希望它显示所有三首歌曲，因为并非为该歌曲列出的所有乐器都是*N/A*。

```
    BandieName SongName 乐器状态
    Holly Wipeout Bells 完成
    Holly Centenial N/A Complete
    夏洛特消灭符号完成
    夏洛特 Centenial N/A 完成
    Ryan Wipeout Drum Complete
    Ryan Centenial Drum Complete

```

到目前为止，我的代码如下。

```
Protected Sub btnGetPlaylist_Click(sender As Object, e As System.EventArgs) Handles btnGetPlaylist.Click

    Dim conn As SqlConnection = Nothing
    Try
        Dim connString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BandDatabase.mdf;Integrated Security=True;User Instance=True"
        conn = New SqlConnection(connString)

        Dim sqlBandies As String

        Dim item As ListItem
        For Each item In ListBoxBandies.Items
            If item.Selected Then

                Dim selectedBandies As String = item.Text
                sqlBandies &= "'" & item.Text & "', "

            End If
        Next

        Dim amountSelected As String = ListBoxBandies.Items.Count.ToString

        Dim query As String = "select SongName from Learning where BandieName in (" + sqlBandies + " '') AND Status = 'Complete' group by SongName having count(distinct BandieName) = " + ListBoxBandies.GetSelectedIndices.Length.ToString

        Dim cmd As SqlCommand = New SqlCommand(query, conn)

        conn.Open()
        Dim dr As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
        Dim dt As DataTable = New DataTable()
        dt.Load(dr)
        GridViewPlaylist.DataSource = dt
        GridViewPlaylist.DataBind()

    Finally
        conn.Close()
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:23:25.810

如果您的意思是找到所有指定名称的歌曲并且状态完整且其中至少一首（但不一定全部）具有非“N/A”值作为乐器的所有歌曲，那么您可以执行以下几种方法之一例如：

```
select s.SongName  
from Learning s  
  left outer join Learning specInstrument on specInstrument.SongName = s.SongName and specInstrument.BandieName = s.BandieName and specInstrument.Instrument <> 'N/A'  
where s.BandieName in ('Holly', 'Charlotte')  
  and s.Status = 'Complete'  
having count (distinct s.BandieName) = 2  
and count(specInstrument.SongName) > 0 
```

或查找所有匹配的歌曲，其中一个匹配名称具有填充乐器并链接到该名称：

```
select s.SongName  
from Learning s   
inner join (select SongName from Learning where status = 'Complete' and BandieName in ('Holly', 'Charlotte') and instrument <> 'N/A') hasInstr on hasInstr.SongName = s.SongName  
where s.BandieName in ('Holly','Charlotte')  
and status = 'Complete'  
group by s.SongName  
having count(distinct s.BandieName) = 2 
```

显然，您在哪里建立了要检查的名称列表以及我替换值的相应名称计数，但这显示了原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:05:27.337

```
SELECT
     BandName
     , SongName
     , Instrument
     , Status
FROM Learning  as l1
INNER JOIN (
              Select
                   BandName
                   , SongName
              FROM Learning
              WHERE Instrument <> 'N/A' AND Status = 'Complete'
            ) AS l2
  ON l1.BandName = l2.BandName AND l1.SongName = l2.SongName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:11:50.467

这可能不是最有效的搜索，但应该可以。稍后我可以尝试想一个更有效的解决方案。

```
SELECT DISTINCT SongName
FROM Learning l1
WHERE 
    EXISTS (
        SELECT *
        FROM Learning l2
        WHERE l1.BandieName = '<First selected BandieName>'
            AND l1.SongName = l2.SongName
            AND l2.Status = 'Complete')
    AND EXISTS (
        SELECT *
        FROM Learning l3
        WHERE l1.BandieName = '<Second selected BandieName>'
            AND l1.SongName = l3.SongName
            AND l3.Status = 'Complete')
    -- Repeat these for however many people are selected.
    AND EXISTS (
        SELECT *
        FROM Learning lInstrument
        WHERE NOT lInstrument = 'N/A'
            AND l1.SongName  = lInstrument.SongName
            AND BandieName IN (<BandieName list>)
            AND lInstrument.Status = 'Complete') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:22:44.623

您的查询将是：

```
WITH LearningCTE AS
(   SELECT  *
    FROM    Learning
    WHERE   BandieName IN ('Holly', 'Charlotte', 'Ryan')
    AND     Status = 'Complete'
)
SELECT  *
FROM    LearningCTE a
WHERE   EXISTS
        (   SELECT  1
            FROM    LearningCTE b
            WHERE   a.SongName = b.SongName
            AND     Instrument != 'N/A'
        ) 
```

如果您使用 SQL Server 2008，我建议您使用表参数，而不是在 VB.NET 中动态构建 SQL，这样可以消除 SQL 注入的任何风险。您需要执行以下操作：

```
CREATE TYPE NameList AS TABLE (Name VARCHAR(50))
GO
CREATE PROCEDURE dbo.GetPlayList (@Names NameList)
AS
BEGIN
    WITH LearningCTE AS
    (   SELECT  l.*
        FROM    Learning l
                INNER JOIN @Names
                    ON BandieName = Name
        WHERE   Status = 'Complete'
    )
    SELECT  *
    FROM    LearningCTE a
    WHERE   EXISTS
            (   SELECT  1
                FROM    LearningCTE b
                WHERE   a.SongName = b.SongName
                AND     Instrument != 'N/A'
            )
END 
```

然后您可以使用类似于此的 VB 代码来传递参数

```
Protected Sub btnGetPlaylist_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnGetPlaylist.Click
        Dim conn As SqlConnection = Nothing
        Try
            Dim connString As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\BandDatabase.mdf;Integrated Security=True;User Instance=True"
            conn = New SqlConnection(connString)

            Dim NameTable As New DataTable()
            NameTable.Columns.Add("Name", GetType(String))

            For Each item As ListItem In ListBoxBandies.Items
                If item.Selected Then
                    Dim newRow As DataRow = NameTable.NewRow()
                    newRow(0) = item.Text
                    NameTable.Rows.Add(newRow)
                End If
            Next

            Using cmd As SqlCommand = New SqlCommand("dbo.GetPlayList", conn)
                cmd.Parameters.Add(New SqlParameter("@Names", NameTable))
                cmd.CommandType = CommandType.StoredProcedure
                conn.Open()
                Using dr As SqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)
                    Dim dt As DataTable = New DataTable()
                    dt.Load(dr)
                    GridViewPlaylist.DataSource = dt
                    GridViewPlaylist.DataBind()
                End Using
            End Using
        Finally
            conn.Close()
        End Try

    End Sub 
```

我在你的一些一次性元素中添加了几个“使用”，但除此之外，我只是试图重用你的代码。

# wcf - 如何更改使用 svcutil.exe 生成的服务代理上的 CollectionType？

> ID：10106303
> 
> 赞同：0
> 
> 时间：2012-04-11T12:53:56.767
> 
> 标签：wcf, svcutil.exe

好的，所以我已经实现了我的服务，创建了一个新的 WCF 服务网站来在 IIS 中托管我的服务，并使用 svcutil 将元数据导出到 .xsd 和 .wsdl 文件。从这些文件中，我生成了服务 proxy.cs 和 .config 文件并将它们添加到客户端。

不过，我的一项服务操作会向客户端返回一个通用列表。我知道如何通过在从 Visual Studio 添加服务引用（添加服务引用）时配置服务引用来更改反序列化数据类型的 CollectionType，但是如何更改（或在使用 svcutil(?) 创建代理期间设置）集合类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:59:01.593

`/collectionType:<type>`您可以添加一个开关来指定类型。有关所有详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa347733.aspx)。

# c++ - 使用 Boost::Test 进行并行代码

> ID：10106304
> 
> 赞同：5
> 
> 时间：2012-04-11T12:53:59.187
> 
> 标签：c++, unit-testing, boost, mpi

我想用 boost::unit_test 为我的并行（基于 mpi）C++ 代码创建一些测试。我有一些使用测试框架的基本经验。对我来说，主要问题是，在处理并行代码时，将 MPI::Init 放在哪里，以便首先调用它。在我创建的测试套件中，没有主要功能。此外，当某些断言在现有等级的子集上失败时，Boost::Test 是否正确存在（相对于 mpi）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:59:01.377

Boost Test 具有[夹具支持](http://www.boost.org/doc/libs/1_49_0/libs/test/doc/html/utf/user-guide/fixture.html)，它允许您按测试用例、测试套件或全局执行设置/清理。听起来你应该把调用`MPI::Init`放在全局夹具中。

```
struct MPIFixture {
    MPIFixture() { MPI::Init(); }
    ~MPIFixture() { /* I bet there's a deinit you should call */ }
};

BOOST_GLOBAL_FIXTURE(MPIFixture); 
```

如果您在使用它时遇到问题，或者如果您在提供自己的`main`功能的框架中工作，那么您可以`#define BOOST_TEST_NO_MAIN`在包含 Boost 标头之前。然后你可以调用`boost::unit_test::unit_test_main`自己来运行你的测试套件。

# java - 如何将 JSP InputStream 转换为 ServletResponse？

> ID：10106309
> 
> 赞同：1
> 
> 时间：2012-04-11T12:54:21.343
> 
> 标签：java, jsp, servlets

我在 Tomcat 中，并且有一个带有 JSP 内容的字符串。我尝试获取 HttpServletResponse 表示 HTML 输出。在正常情况下，您调用 JSP，WebContainer 将其转换为 Servlet 并生成输出。

但是我没有 JSP 作为文件，只有一个带有 JSP 内容的字符串。是否有可以放置 Stream 并对其进行处理的类或工厂？

期待中的感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:56:39.510

**不**，没有现成的解决方案。

**但是，你可以试试这个：**

*   将 JSP 字符串写入 Web 应用程序内容根目录中的文件。比方说`/tmp/jspstring.jsp`。用于`getServletContext().getRealPath("/tmp/jspstring.jsp")`获取新jsp的路径。
*   使用`RequestDispatcher`包含新创建的 JSP，这样服务器将使用

# php - Javascript 数组不会注意到文件夹中的新图像

> ID：10106312
> 
> 赞同：1
> 
> 时间：2012-04-11T12:54:40.950
> 
> 标签：php, javascript, lightbox, slideshow

昨天我有一个关于在stackoverflow上固定灯箱的幻灯片的问题，但现在我遇到了另一个问题。我通过php创建了一个Javascript数组，在JS中我使幻灯片工作+灯箱工作。现在，当我将新图像添加到图像文件夹时，它确实将其包含在 src"" 属性中，但不显示图像，而是在图像不起作用时显示错误图片（无法包含图像，因为我没有如果您想要问题的图像，没有足够的代表，我可以发送它）

这是php代码部分：

```
//This function gets the file names of all images in the current directory
//and ouputs them as a JavaScript array
function returnimages($dirname   ="/Applications/MAMP/htdocs/slidepluslight/slideshows/minpunten/images/") {
$pattern="(\.jpg$)|(\.png$)|(\.jpeg$)|(\.gif$)"; //valid image extensions
$files = array();
$curimage=0;
if($handle = opendir($dirname)) {
while(false !== ($file = readdir($handle))){
if(eregi($pattern, $file)){ //if this file is a valid image
//Output it as a JavaScript array element
print_r ('galleryarray['.$curimage.']="'.$file .'";');
$curimage++;
}
}

closedir($handle);
}
return($files);
}

print 'var galleryarray=new Array();'; //Define array in JavaScript
returnimages() //Output the array elements containing the image file names

?> 
```

这是使幻灯片+灯箱工作的Javascript代码。

```
var curimg=0;

function rotateimages(){
document.getElementById("slideshow").setAttribute("src", "images/"+galleryarray[curimg]);
curimg=(curimg<galleryarray.length-1)? curimg+1 : 0;
}

window.onload = function(){
setInterval("rotateimages()", 500);
}

window.onload = function(){
setInterval("rotateimages()", 2500);
document.getElementById("slideshow").onclick = function () {
var imageSrc = document.getElementById("slideshow").src;
document.getElementById("lightImg").setAttribute("src", imageSrc);
document.getElementById('lightbox').style.display = 'block';
document.getElementById('fade').style.display = 'block';
}
} 
```

一切运行良好，但是当我将新图像添加到图像文件夹时，它不会显示它..

问候科恩。

更新，一切正常，但我们试图动态地做到这一点，但现在 src"" 给了我 undefined .. 有人看到我在哪里编码错了吗？

php部分：

```
 function returnimages($relPath = "/slidepluslight/slideshows/minpunten/images/") {
 $dirname = $_SERVER['DOCUMENT_ROOT'] + $relPath;
 $files = array();
 $curimage = 0;
 if($handle = opendir($dirname)) {
 while(false !== ($file = readdir($handle))){
 if (preg_match('/\.(jpg|jpeg|gif|png)$/', $file)){ //if this file is a valid image
 //Output it as a JavaScript array element
 print_r ('galleryarray['.$curimage.']="'. $relPath + $file .'";');
 $curimage++;
 }
 } 

 closedir($handle);
 }
 return($files);
 }

 print 'var galleryarray=new Array();'; //Define array in JavaScript
 returnimages() //Output the array elements containing the image file names 
```

和 Javascript 部分：

```
var curimg=0;

function rotateimages(){
document.getElementById("slideshow").setAttribute("src", galleryarray[curimg]);
curimg=(curimg<galleryarray.length-1)? curimg+1 : 0;
} 
```

亲切的问候，

科恩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:07:27.987

您遇到问题的原因是您没有正确参考图像的位置。 ~~我会找到一些链接让你在几分钟内查看它。~~

如果你改变

```
document.getElementById("slideshow").setAttribute("src", "images/"+galleryarray[curimg]); 
```

到

```
document.getElementById("slideshow").setAttribute("src", "/slidepluslight/slideshows/minpunten/images/"+galleryarray[curimg]); 
```

浏览器将知道在`/slidepluslight/slideshows/minpunten/images`目录中查找图像。

* * *

此答案的要求适用于动态 URL 问题，因此此解决方案可用于其他应用程序。

就使图像的链接动态化而言，在我看来，它需要在`returnimages`函数中加以解决。

用于`$_SERVER['DOCUMENT_ROOT']`获取网站的根目录。在这里，`/Applications/MAMP/htdocs`然后将其余部分指定为`returnimages`.

```
function returnimages($relPath = "/slidepluslight/slideshows/minpunten/images/") {
    $dirName = $_SERVER['DOCUMENT_ROOT'] . $relPath;
    ...
    /* Where you are outputting the JS array */
    print_r ('galleryarray['.$curimage.']="'. $relPath + $file .'";');
    ....
} 
```

# jquery - 单击自定义图片时上传打开浏览对话框

> ID：10106315
> 
> 赞同：0
> 
> 时间：2012-04-11T12:54:49.613
> 
> 标签：jquery, uploadify

我正在使用 Uploadify 上传图片。

我有一张图片，我想在点击图片后上传打开浏览文件对话框，我该如何实现？

这是我的代码

```
$("#btnAddImg").click(function() {
    Uploading(); 
});

function Uploading() {

    var a = $("input#Id").val();

    alert("uploading" + a);

    $("#fileuploader").uploadify({
        'uploader': '/Scripts/uploadify/uploadify.swf',
        'cancelImg': '/Content/Images/icones/cancel.png',
        //'buttonText': 'Select Image',
        //'buttonImg': '/Content/Images/icones/picture-add-icon.png',
        'script': 'Home/Upload',
        'folder': a,
        'fileDesc': 'Image Files',
        'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
        'multi': true,
        'auto': true
    });
} 
```

Ps：我不想使用'buttonImg'：集成属性，因为我希望仅在单击我的自定义图像后才加载uploadify（在幕后我想获取动态文件夹路径并传递给uploadify）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:07:08.067

更好的解决方案-> [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

请参阅示例-> [http://valums.com/files/2009/ajax-upload/demo-jquery.htm](http://valums.com/files/2009/ajax-upload/demo-jquery.htm)

# c++ - 从 obj 文件中绘制模型

> ID：10106318
> 
> 赞同：0
> 
> 时间：2012-04-11T12:55:06.813
> 
> 标签：c++, opengl

我正在尝试用 openGl 编写一个 obj 查看器。这个程序必须只绘制模型的面线，所以我需要加载：

*   顶点：有时是 3D，有时是 4D；
*   faces：索引列表，长度随机；

现在我只加载 obj 文件，每个面有 3 个元素，所以我可以在 GL_TRIANGLE 模式下绘制元素，但是我在某些模型上遇到了一些问题：

[http://people.sc.fsu.edu/~jburkardt/data/obj/icosahedron.obj](http://people.sc.fsu.edu/~jburkardt/data/obj/icosahedron.obj)

加载阶段似乎运行良好，我认为问题出在 render() 函数中：

```
static void render(void)
{
    glClearColor( 0.0f, 0.0f, 0.0, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindBuffer(GL_ARRAY_BUFFER, g_resources.vertex_buffer);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(
        3,                                /* size */
        GL_FLOAT,                         /* type */
        3*sizeof(GLfloat),                /* stride */
        (void*)0                          /* array buffer offset */
    );

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, g_resources.element_buffer);

    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);

    glDrawElements(
        GL_TRIANGLES,           /* mode */
        theModel->face.size(),  /* count */
        GL_UNSIGNED_INT,        /* type */
        (void*)0                /* element array buffer offset */
    );

    glDisableClientState(GL_VERTEX_ARRAY);

    glutSwapBuffers();
} 
```

我还有一些问题：

*   索引从 1 或 0 开始？
*   indeces 枚举是怎么回事？是顺时针样式吗？
*   用超过 3 个 indeces 对面进行三角测量是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:58:17.647

*   指数以 1 为基础
*   逆时针
*   是的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:23:54.863

如果您只遇到*某些*模型的问题，请尝试禁用 GL_CULL_FACE 以查看可能是顶点顺序的差异。

OBJ 中的索引是从 1 开始的，GL 是从 0 开始的，所以在制作缓冲区时需要 -1。

# mobile - Twitter Bootstrap 与“移动优先”

> ID：10106321
> 
> 赞同：8
> 
> 时间：2012-04-11T12:55:24.430
> 
> 标签：mobile, twitter-bootstrap

我之前曾在“Mobile First”网站上工作过，现在我们正在为我们的网站使用 Twitter Bootstrap。问题是 Twitter Bootstrap 不是“移动优先”，而是“响应式”。

“移动优先”是指首先加载手机的基本样式表，因此不要求手机支持@media 查询。

Twitter Bootstrap 加载整个桌面样式表，使用@media 查询将大小调整为移动设备。

Twitter 采用这种方法有什么原因吗？当然它不兼容，旧设备无法使用？

有没有我可以使用的 Twitter Bootstrap 的“移动优先”模组，或者我必须创建自己的模组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:22:51.063

没有使用 Mobile First，但相当广泛地遵循和使用了 Bootstrap，这只是我得出的观点：

从我所见，“移动优先”作为一个概念就是这样，一种移动优先的开发方法；而 Bootstrap 是作为现代浏览器的简洁工具库开发的，直到最近才发展为广泛支持旧浏览器和移动设备。

从引导站点：

> 最初只考虑现代浏览器构建，Bootstrap 已经发展到包括对所有主要浏览器（甚至 IE7！）的支持，并且使用 Bootstrap 2，平板电脑和智能手机也是如此。

不过，从我所看到的情况来看，Bootstrap 和移动设备有很多前景。只需挖掘 GitHub 里程碑，您就会看到大量项目正在开发中！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T13:46:27.050

Bootstrap 3 是移动优先！耶！

V3 现已发布，见[http://getbootstrap.com/](http://getbootstrap.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-14T00:26:33.470

[Bootstrap 网格布局](https://github.com/G5/mobile-first-bootstrap-grid)的移动优先版本刚刚登陆 GitHub。看起来仍然需要 bootstrap.css 核心，但代码似乎可以工作。

# c# - 基本 MVC3 UnitTest 无法 UpdateModel()

> ID：10106323
> 
> 赞同：0
> 
> 时间：2012-04-11T12:55:32.557
> 
> 标签：c#, asp.net-mvc, unit-testing

自从我做任何 MVC 工作以来已经有一段时间了，所以我希望错过一些东西。我正在尝试编写一个测试和控制器操作来简单地编辑一个名为“业务”的 DTO。

控制器动作：

```
[HttpPost]
public ActionResult Edit(string id, Business business)
{
    try
    {
        var model = _businessRepository.Get(id);

        if (model != null)
        {
            UpdateModel(model);

            if (ModelState.IsValid)
            {
                _businessRepository.Save(model);
            }
            else
            {
                return View(business);
            }
        }

        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

测试：

```
[TestMethod]
public void Edit_Post_Action_Updates_Model_And_Redirects()
{
    // Arrange
    var mockBusinessRepository = new Mock<IBusinessRepository>();
    var model = new Business { Id = "1", Name = "Test" };
    var expected = new Business { Id = "1", Name = "Not Test" };

    // Set up result for business repository
    mockBusinessRepository.Setup(m => m.Get(model.Id)).Returns(model);
    mockBusinessRepository.Setup(m => m.Save(expected)).Returns(expected);
    var businessController = new BusinessController(mockBusinessRepository.Object);

    // Act
    var result = businessController.Edit(model.Id, expected) as RedirectToRouteResult;

    // Assert
    Assert.IsNotNull(result);
    Assert.AreEqual(result.RouteValues["action"], "Index");
    mockBusinessRepository.VerifyAll();
} 
```

它给出异常的行是控制器中的 UpdateModel() 。异常详情如下：

> “值不能为空。参数名称：controllerContext”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:38:11.497

我在 Gist 上有一些代码，通常用于设置 ControllerContext。该代码是最初取自 Hanselman 博客的修改版本。

[https://gist.github.com/1578697 (MvcMockHelpers.cs)](https://gist.github.com/1578697)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:40:17.407

设置控制器上下文

以下是我从事的一个项目的代码片段，所以也许对你来说太多了

```
public class TestBase
    {
        internal Mock<HttpContextBase> Context;
        internal Mock<HttpRequestBase> Request;
        internal Mock<HttpResponseBase> Response;
        internal Mock<HttpSessionStateBase> Session;
        internal Mock<HttpServerUtilityBase> Server;
        internal GenericPrincipal User;

            public void SetContext(Controller controller)
            {
              Context = new Mock<HttpContextBase>();
              Request = new Mock<HttpRequestBase>();
              Response = new Mock<HttpResponseBase>();
              Session = new Mock<HttpSessionStateBase>();
              Server = new Mock<HttpServerUtilityBase>();
       User = new GenericPrincipal(new GenericIdentity("test"), new string[0]);

              Context.Setup(ctx => ctx.Request).Returns(Request.Object);
              Context.Setup(ctx => ctx.Response).Returns(Response.Object);
              Context.Setup(ctx => ctx.Session).Returns(Session.Object);
              Context.Setup(ctx => ctx.Server).Returns(Server.Object);
              Context.Setup(ctx => ctx.User).Returns(User);

              Request.Setup(r => r.Cookies).Returns(new HttpCookieCollection());
              Request.Setup(r => r.Form).Returns(new NameValueCollection());
      Request.Setup(q => q.QueryString).Returns(new NameValueCollection());
              Response.Setup(r => r.Cookies).Returns(new HttpCookieCollection());

              var rctx = new RequestContext(Context.Object, new RouteData());
controller.ControllerContext = new ControllerContext(rctx, controller);
            }
} 
```

然后在您的测试中，您可以安排：

```
//Arrange
SetContext(_controller);
Context.Setup(ctx => ctx.Request).Returns(Request.Object); 
```

如果您想用 ModelState 错误测试您的方法，请添加：

```
_controller.ModelState.AddModelError("Name", "ErrorMessage"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:06:07.103

我已经设法通过使用 Automapper 而不是 UpdateModel 来获得我想要的工作。

我在我的自动映射器初始化中添加了（IPersistable 是我所有 DTO 的接口）：

```
Mapper.CreateMap<IPersistable, IPersistable>().ForMember(dto => dto.Id, opt => opt.Ignore()); 
```

然后我将控制器操作更改为：

```
[HttpPost]
public ActionResult Edit(string id, Business business)
{
    try
    {
        var model = _businessRepository.Get(id);

        if (model != null)
        {
            Mapper.Map(business, model);

            if (ModelState.IsValid)
            {
                _businessRepository.Save(model);
            }
            else
            {
                return View(business);
            }
        }

        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

并将我的测试更改为：

```
[TestMethod]
public void Edit_Post_Action_Updates_Model_And_Redirects()
{
    // Arrange
    var mockBusinessRepository = new Mock<IBusinessRepository>();
    var fromDB = new Business { Id = "1", Name = "Test" };
    var expected = new Business { Id = "1", Name = "Not Test" };

    // Set up result for business repository
    mockBusinessRepository.Setup(m => m.Get(fromDB.Id)).Returns(fromDB);
    mockBusinessRepository.Setup(m => m.Save(It.IsAny<Business>())).Returns(expected);
    var businessController = new BusinessController(mockBusinessRepository.Object) {ControllerContext = new ControllerContext()};

    //Act
    var result = businessController.Edit(fromDB.Id, expected) as RedirectToRouteResult;

    // Assert
    Assert.IsNotNull(result);
    Assert.AreEqual(result.RouteValues["action"], "Index");
    mockBusinessRepository.VerifyAll();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:26:10.090

你需要`ControllerContext`为你的`BusinessController`.

看到[这个问题](https://stackoverflow.com/q/3080814/144496)或[这个](https://stackoverflow.com/q/970198/144496)问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-13T09:57:46.290

我遇到了同样的问题，并使用堆栈跟踪将其锁定到 ValueProvider。基于 Andrew 在上面模拟控制器使用的一些底层对象的答案，我设法通过像这样模拟 ValueProvider 来解决空值异常：

```
var controller = new MyController();

// ... Other code to mock objects used by controller ...

var mockValueProvider = new Mock<IValueProvider>();
controller.ValueProvider = mockValueProvider.Object;

// ... rest of unit test code which relies on UpdateModel(...) 
```

# php - 如何在codeigniter中使用facebook php sdk？

> ID：10106327
> 
> 赞同：0
> 
> 时间：2012-04-11T12:55:44.033
> 
> 标签：php, facebook, codeigniter

我正在尝试使用 facebook PHP SDK 从 facebook 获取用户数据。（我正在使用 codeigniter 开发网站）。但是当我单击登录 url 链接时，它向我显示了一个错误。它显示

> 错误
> 
> 发生错误。请稍后再试。

这是 C:\wamp\www\project\application\models\test\facebook_model.php 的代码

```
<?php
class Facebook_model extends CI_Model {

public function __construct()
{
    parent::__construct();

    $config = array(
                    'appId'  => 'API Key',
                    'secret' => 'Secret Key',
                    'fileUpload' => true,
                    );

    $this->load->library('facebook/Facebook', $config);

    $user = $this->facebook->getUser();

    $profile = null;
    if($user)
    {
        try {
            // Proceed knowing you have a logged in user who's authenticated.
            $profile = $this->facebook->api('/me?fields=id,name,link,email');
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }

    $fb_data = array(
                    'me' => $profile,
                    'uid' => $user,
                    'loginUrl' => $this->facebook->getLoginUrl(
                        array(
                            'scope' => 'email,user_birthday,publish_stream',
                            'redirect_uri' => 'http://herle.in/flutter/index.php/test/userRegistration2'
                        )
                    ),
                    'logoutUrl' => $this->facebook->getLogoutUrl(),
                );

    $this->session->set_userdata('fb_data', $fb_data);
}
} 
```

这是 C:\wamp\www\project\application\contorllers\userRegistration2.php 的代码

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class UserRegistration2 extends CI_Controller { 
function __construct() {
    parent::__construct(); 
    $this->load->model('test/Facebook_model');
}

function index() {
    $fb_data = $this->session->userdata('fb_data'); // This array contains all the user FB information

    if((!$fb_data['uid']) or (!$fb_data['me'])) {
    echo "<a href='" .$fb_data['loginUrl']. "'>Login</a>";
    }
    else {
        $data = array(
                'fb_data' => $fb_data,
                );
        print_r($data);
    }
}
} 
```

在库/facebook 我有 2 个 facebook PHP SDK 文件。即 Facebook.php 和 base_facebook.php

这是链接[http://herle.in/flutter/index.php/test/userRegistration2.html](http://herle.in/flutter/index.php/test/userRegistration2.html)并在单击登录链接后显示错误。

# css - 高度：在 IE7 中为 100%

> ID：10106328
> 
> 赞同：4
> 
> 时间：2012-04-11T12:55:45.447
> 
> 标签：css, html, height

**更新**

html 和 body 的边距需要为 0 才能完全填满页面。

**结束更新** **更新**

我已经使用以下建议将 height 属性添加到 html 和 body 标签中。现在需要稍微向下滚动才能查看整个页面。关于为什么会发生这种情况的想法？

**结束更新**

我正在使用 CSS 使 div 根据需要填充屏幕。我将宽度和高度设置为 100%，但 div 没有填满屏幕的高度。这是 IE7 的一个已知问题还是我可能只是遗漏了什么？代码如下。

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
    <link rel="Stylesheet" href="test.css" />
</head>
<body>
<div id="divy"></div>
</body>
</html> 
```

CSS

```
#divy
{
    width:100%;
    height:100%;
    background-color:Blue;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T12:58:36.783

问题是容器的高度必须为 100%，它的子元素才能假设为 100%...

在这种情况下，容器是`<html>`->`<body>`所以快速修复将是

```
html, body {
    margin: 0;
    padding: 0;
}
html, body, #divy {
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T12:57:53.887

元素填充body元素的高度，可以小于浏览器窗口。

`html`设置和元素的高度`body`，使它们填满窗口：

```
html, body { height: 100%; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T12:57:57.880

每当您定义一个 100% 的高度时，它的祖先或所有子序列的祖先也必须具有 100% 作为它们的高度。

所以，给 100% 高度，`body`以及`html`。

```
html, body { height: 100%; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T12:40:04.743

您可以使用 jQuery 管理此问题：

```
jQuery('.yourDiv').height(jQuery('body').height()); 
```

# z3 - 位向量上的量词消除会产生过于复杂的结果

> ID：10106329
> 
> 赞同：2
> 
> 时间：2012-04-11T12:55:50.560
> 
> 标签：z3, smt

我正在使用 Z3 的 ELIM_QUANTIFIERS 功能从位向量的公式中消除量词。我遇到了以下情况，Z3 产生了正确但过于复杂的结果，我想知道是否存在重写我的问题的方法，或者是否有配置选项会导致我期望的简单结果。

首先，这是一个按预期工作的示例。它指出，对于长度为 4 的位向量，存在一个与其相等的位向量。

```
(set-option ELIM_QUANTIFIERS true)
(declare-fun a () BitVec[4])
(simplify (exists ((x BitVec[4])) 
          (= a x))) 
```

Z3 为本示例生成以下输出。

```
success
success
true 
```

但是，如果我添加一个否定：

```
(set-option ELIM_QUANTIFIERS true)
(declare-fun a () BitVec[4])
(simplify (exists ((x BitVec[4])) 
          (not (= a x)))) 
```

然后 Z3 产生以下输出，其中列出了向量的所有可能值，而不是只返回“true”。

```
success
success
(let (($x54 (= (_ bv0 4) a)))
(let (($x55 (not $x54)))
(let (($x61 (= (_ bv2 4) a)))
(let (($x62 (not $x61)))
(let (($x68 (= (_ bv6 4) a)))
(let (($x69 (not $x68)))
(let (($x75 (= (_ bv4 4) a)))
(let (($x76 (not $x75)))
(let (($x82 (= (_ bv12 4) a)))
(let (($x83 (not $x82)))
(let (($x89 (= (_ bv8 4) a)))
(let (($x90 (not $x89)))
(let (($x95 (= (_ bv1 4) a)))
(let (($x96 (not $x95)))
(let (($x102 (= (_ bv5 4) a)))
(let (($x103 (not $x102)))
(let (($x109 (= (_ bv13 4) a)))
(let (($x110 (not $x109)))
(let (($x116 (= (_ bv9 4) a)))
(let (($x117 (not $x116)))
(let (($x123 (= (_ bv3 4) a)))
(let (($x124 (not $x123)))
(let (($x130 (= (_ bv7 4) a)))
(let (($x131 (not $x130)))
(let (($x137 (= (_ bv14 4) a)))
(let (($x138 (not $x137)))
(let (($x144 (= (_ bv10 4) a)))
(let (($x145 (not $x144)))
(let (($x151 (= (_ bv11 4) a)))
(let (($x152 (not $x151)))
(let (($x158 (= (_ bv15 4) a)))
(let (($x159 (not $x158)))
(or $x159 $x152 $x145 $x138 $x131 $x124 $x117 $x110 $x103 $x96 $x90 $x83 $x76 $x69 $x62 $x55))))))))))))))))))))))))))))))))) 
```

对于较长的位向量，例如大小为 32 或更大，Z3 不会在合理的时间内产生结果，因为它可能会枚举 32 位变量的所有可能值。

请注意，在这种特殊情况下，我可以只使用 check-sat 来检查公式的有效性；但是，在一般情况下，我有兴趣获得与原始公式等效的无量词表达式，而不仅仅是检查其有效性。

我正在为 Linux 使用 Z3 v3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:12:15.610

谢谢，这是一个很好的简单示例，显示了用于位向量的方法的局限性。它实际上只适用于解决方案数量相对较少的公式。以这种方式在消除过程中无法打开/关闭位向量。这是在 Z3 中改进的一个有效点。有几个潜在的解决方法：首先，布尔量词消除，虽然它也是初级的（它只是枚举可满足的实例并消除布尔变量），但它确实产生了更简单的结果“真”。当你从这个例子中对你的位向量进行位爆破时。第二个途径是考虑您的问题是否可以在 UFBV 片段中重新表述，其中可满足性不需要量词消除。

# maven - m2e：将项目转换为 Maven 项目

> ID：10106332
> 
> 赞同：4
> 
> 时间：2012-04-11T12:56:01.833
> 
> 标签：maven, m2eclipse, m2e

我正在尝试从使用`m2e plugin`for **eclipse**的 maven 开始。但是如果我尝试将现有项目更改为 Maven 项目（`Configure/Convert to Maven Project`），结果是：

在此行找到多个注释：

*   *从[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)传输 org.apache.maven.plugins:maven-resources-plugin:pom:2.4.3 失败缓存在本地仓库，直到更新间隔才会重新尝试解析中央已过或强制更新。原始错误：无法从/到中央传输工件 org.apache.maven.plugins:maven-resources-plugin:pom:2.4.3 (http://repo1.maven.org/maven2)：连接超时*
*   *生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile（执行：默认编译，阶段：编译）*
*   *CoreException：无法计算构建计划：插件 org.apache.maven.plugins:maven-compiler-plugin:2.3.2 或其依赖项之一无法解析：无法读取 org.apache.maven.plugins 的工件描述符： maven-compiler-plugin:jar:2.3.2: ArtifactResolutionException: 无法从[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)传输 org.apache.maven.plugins:maven-compiler-plugin:pom:2.3.2被缓存在本地存储库中，直到经过中央的更新间隔或强制更新后才会重新尝试解析。原始错误：无法从/到中央传输工件 org.apache.maven.plugins:maven-compiler-plugin:pom:2.3.2 (http://repo1.maven.org/maven2)：连接超时*
*   *生命周期配置未涵盖插件执行：org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile（执行：default-testCompile，阶段：test-compile）*

我不在防火墙后面（我可以使用 eclipse 安装界面下载和安装 m2e）。

问题可能出在哪里？

**更新**（生成 pom.xml）：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>PRJ</groupId>
  <artifactId>PRJ</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:53:05.090

您实际上应该删除目录中的所有库并在 POM 中`WEB-INF/lib`添加足够的声明。目录本身（和其他网络资源）应保留在. 如果您有一些非 Java 文件，请将它们移动到. 毕竟，Maven 在控制台上构建并判断它是否有效。它应该。然后重新生成 Eclipse 项目文件。`dependency``WEB-INF``src/main/webapp``WEB-INF/classes``src/main/resources``mvn clean package``Maven -> Update Project Configuration...`

我不相信这样的工具可以将自由式（主要是 Ant）项目自动迁移到 Maven。正如我所看到的，它只生成几乎普通的 POM。

# java - 如何获得短代码？

> ID：10106338
> 
> 赞同：0
> 
> 时间：2012-04-11T12:56:38.513
> 
> 标签：java, android

如何从服务提供商处获取短代码？我想创建一个应用程序，可以接收用户发送给短代码的这些短信，并且应用程序应该将响应返回给客户端。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T12:59:24.323

您需要一个合适的短信网关。像这两个德国网站：

*   [smstrade.de](http://www.smstrade.de/index.php?select=empfang)
*   [smskaufen.com](http://www.smskaufen.com/sms/index.php?seite=smsin)

# c# - 在不使用额外数组的情况下从 int 数组中删除重复值的最佳方法？

> ID：10106343
> 
> 赞同：1
> 
> 时间：2012-04-11T12:57:02.653
> 
> 标签：c#

我需要在不使用额外数组的情况下从 int 数组中删除重复值，并且在从数组中删除重复值后如何调整数组的长度？

例如：-

int []arr = new int [] {1,2,1,3,3,5,6,1,3,2,8} //数组长度为11

删除重复值后输出应为 {1,2,3,5,6,8} // 数组长度为 6

那有可能吗？

**我不允许使用预定义的方法，只需要使用正确的逻辑执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:02:10.510

基本上你不能：数组在 .NET 中是固定大小的。您无法调整它们的大小。

您可能会保留一个单独的变量来指示数组的“已使用”部分，最终以（例如）{ 1, 2, 3, 5, 6, 8, 0, 0, 0, 0, 0 } 的数组结束并且“使用长度”为 6。除了避免使用额外的数组之外，不清楚您对性能感兴趣的方面是什么。例如，您可以对数组进行排序，然后向前走，每次遇到连续相等的元素时，将余数上移一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:16:52.223

正如乔恩所提到的，你不能调整数组的大小。最好的方法是使用 Hashset。

如果不允许使用 Hashset，请对它们进行排序。但是在这里你应该创建一个新数组来保存结果。

# java - 如何检查给定间隔包含哪些星期和月份？

> ID：10106344
> 
> 赞同：1
> 
> 时间：2012-04-11T12:57:03.340
> 
> 标签：java, calendar, jodatime

假设我有两个 LocalDate 对象，fromDate 和 toDate。我需要知道间隔内有哪些工作日 - 星期一、星期二等。而且，我还想知道哪些 daysOfMonth - 1 日、2 日，或者例如仅 20 日 - 从 20 日到 23 日。Joda 时间库中是否有任何有用的工具/方法可以帮助我？我不是在询问特定的算法，我可以自己编写它，但我不确定 Joda 的功能——也许它已经有了我可以重用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:06:15.340

这与我想的差不多：

[天数之间](http://joda-time.sourceforge.net/api-release/org/joda/time/Days.html#daysBetween%28org.joda.time.ReadableInstant,%20org.joda.time.ReadableInstant%29)

或者可能是这样的（假设只有两个不同的月份）：

```
public Boolean dayOfMonthExistInPeriod(final int dayOfMonth, final LocalDate from, final LocalDate until){
        final DateMidnight tested = new DateMidnight(from.getYear(), from.getMonthOfYear(), dayOfMonth);
        final DateMidnight tested2 = new DateMidnight(until.getYear(), until.getMonthOfYear(), dayOfMonth);
        final Interval interval = new Interval(from.toDateMidnight(), until.toDateMidnight());
        return interval.contains(tested) && interval.contains(tested2);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:47:30.863

```
public static boolean isDayBetween(int dtc, DateTime from, DateTime to)
   {
      final int dayOfWeekFrom = from.dayOfWeek().get();
      final int daysBetween = Days.daysBetween(from, to).getDays();
      if (dtc >= dayOfWeekFrom && dtc <= (dayOfWeekFrom + daysBetween))
         return true;
      return false;
   } 
```

使用方法

```
DateTimeFormatter dtf = DateTimeFormat.forPattern("yyyy-MM-dd");
final DateTime from = dtf.parseDateTime("2000-07-08");
final DateTime to = dtf.parseDateTime("2000-07-13");
boolean res = isDayBetween(from, to, DateTimeConstants.THURSDAY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T21:32:45.790

# css - 选择器引擎究竟在哪个方向读取？

> ID：10106345
> 
> 赞同：9
> 
> 时间：2012-04-11T12:57:04.283
> 
> 标签：css, css-selectors

我一直相信（尽管我现在怀疑这些信念的有效性）：

```
div.name 
```

比：

```
.name 
```

但是我最近读到大多数 CSS 选择器引擎从右到左读取，在这种情况下，第一个示例实际上不会更慢吗？因为选择器引擎会简单地找到具有类名称的每个元素，然后必须识别其中哪些是`div`s？

CSS 选择器引擎通常以哪种方式读取？从左到右还是从右到左？如果他们通常从右到左阅读，有人可以向我解释为什么（我看不出从选择器引擎的角度从右到左阅读有什么意义）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T15:05:22.723

> 但是我最近读到大多数 CSS 选择器引擎从右到左读取，在这种情况下，第一个示例实际上不会更慢吗？
> 
> CSS 选择器引擎一般以哪种方式读取？从左到右还是从右到左？如果他们通常从右到左阅读，有人可以向我解释为什么（我看不出从选择器引擎的角度从右到左阅读有什么意义）？

坦率地说，几乎不可能在给定的浏览器中判断哪个选择器会更慢，更不用说跨浏览器了。性能往往会波动和不可预测，尤其是在这种微观尺度和不可预测的文档结构下。即使我们谈论理论性能，它最终还是取决于实现。

话虽如此，如[Boris Zbarsky 对 this other question](https://stackoverflow.com/a/5813672/106224)的回答和[Guffa 对 yours 的回答](https://stackoverflow.com/a/10106442/106224)所示，典型的浏览器（目前所有主要布局引擎都是如此）获取一个元素并评估所有候选选择器以查看它匹配的，而不是找到与给定选择器匹配的一组元素。这是一个微妙但非常重要的区别。Boris 提供的技术解释不仅非常详细，而且具有权威性（因为他在 Gecko 上工作，Firefox 使用的引擎），所以我强烈建议阅读它。

但我认为我应该解决您问题中似乎另一个问题：

> 因为选择器引擎会简单地找到具有类名称的每个元素，然后必须识别其中哪些是`div`s？

以及[Patrick McElhaney 的评论](https://stackoverflow.com/posts/comments/12947892)：

> 链接的问题解释了为什么选择器通常是从右到左读取的，所以`#foo ul.round.fancy li.current`是 read `li.current, ul.round.fancy, #foo`，但它真的在每个元素中从右到左读取吗（`.current, li, .fancy, .round, ul, #foo`）？应该是吗？

我从来没有实现过 CSS，也没有看到其他浏览器是如何实现它的。我们从上面链接的答案中确实知道，浏览器使用从右到左的匹配来遍历选择器中的`>`组合器，例如本示例中的组合器：

```
section > div.second > div.third 
```

如果一个元素不是 a `div.third`，那么检查它的父元素是否是 a`div.second`而其父元素是 a 是没有意义的`section`。

但是，我不相信这种从右到左的顺序会一直深入到简单的选择器级别。换句话说，我不相信浏览器在*一系列*复合选择器的从右到左评估中对简单选择器序列（也称为复合选择器）的每个部分使用从右到左评估组合器。

例如，考虑这个人为且高度夸张的选择器：

```
div.name[data-foo="bar"]:nth-child(5):hover::after 
```

现在，不能保证浏览器一定会*按*以下顺序检查元素的这些条件：

1.  指针是否在该元素上？
2.  该元素是其父元素的第 5 个子元素吗？
3.  此元素是否具有`data-foo`值为 的属性`bar`？
4.  这个元素有一个`name`类吗？
5.  这是一个`div`元素吗？

除了简单的选择器杂乱无章之外，这个选择器在**功能**上与上述相同，也*不必*按以下顺序进行评估：

```
div:hover[data-foo="bar"].name:nth-child(5)::after 
```

1.  该元素是其父元素的第 5 个子元素吗？
2.  这个元素有一个`name`类吗？
3.  此元素是否具有`data-foo`值为 的属性`bar`？
4.  指针是否在该元素上？
5.  这是一个`div`元素吗？

根本没有理由出于绩效原因执行这样的命令。事实上，我认为首先选择某些类型的简单选择器可以提高性能，无论它们在序列中的哪个位置。（您还会注意到`::after`没有考虑 ——这是因为伪元素不是简单的选择器，甚至从未进入匹配方程。）

例如，众所周知，ID 选择器是最快的。好吧，鲍里斯在他对链接问题的回答的最后一段中说：

> 另请注意，浏览器已经进行了其他优化，以避免尝试匹配绝对不匹配的规则。例如，如果最右边的选择器有一个 id 并且该 id 与元素的 id 不匹配，那么在 Gecko 中将不会尝试将该选择器与该元素匹配：尝试的“具有 ID 的选择器”集合来自对元素 ID 的哈希表查找。所以这是 70% 的规则，在考虑到最右边选择器的标签/类/id 之后，它们有很大的匹配机会*仍然*不匹配。

换句话说，你是否有一个看起来像这样的选择器：

```
div#foo.bar:first-child 
```

或这个：

```
div.bar:first-child#foo 
```

Gecko 将*始终*首先检查 ID 和类，而不管它在序列中的位置。如果元素没有与选择器匹配的 ID 和类，那么它会立即被丢弃。如果你问我，那就太快了。

这只是 Gecko 的一个例子。这在实现之间也可能有所不同（例如 Gecko 和 WebKit 可能与 Trident 甚至 Presto 不同）。当然，有一些供应商普遍同意的策略和方法（首先检查 ID 可能没有区别），但小细节可能会有所不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T13:02:44.947

选择器引擎不会寻找元素来应用规则，它会寻找适用于特定元素的规则。因此，从右到左阅读选择器是有意义的。

像这样的选择器：

```
div span.text a.demo 
```

将使选择器引擎执行这些检查以查看选择器是否适用于元素：

*   它是类的一个`a`元素`demo`吗？
*   它是否有一个`span`作为类元素的祖先`text`？
*   该元素是否具有作为元素的祖先`div`？

# python - Python读取UDP C#流

> ID：10106346
> 
> 赞同：1
> 
> 时间：2012-04-11T12:57:06.017
> 
> 标签：python, udp

有一个服务器发送 UPD 流 - 每秒 60 个数据包

我用twisted来阅读它：

```
from twisted.internet.protocol import DatagramProtocol
from twisted.internet import reactor
class Echo(DatagramProtocol):
    def datagramReceived(self, data, (host, port)):
        print ('1',data)
class Echo(DatagramProtocol):
reactor.listenUDP(port, Echo())
reactor.run() 
```

在控制台中我喜欢：

```
('1', '\xea\xb6|C\x00\x00\x00\x00gK\xa0E\x00O\x05\xbd\x97\xb7\x04B\xf6\xfdY@\xb9\xa8\x0cD\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x004\x8e8\xbfKkv\xb3\xa6i1\xbf\xa6i1\xbf\x00\x00\x00\x004\x8e8?\xc0\x98\xed\xc1\xbd\x98\xed\xc1=\x1a\x9a\xc1\x96\x19\x9a\xc1\x9d\x88)\xba\x9fB,\xbaA\xb2\xa9;\xc5]\xd86\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x80\xcd\xcc\xcc=\x00\x00\x80?\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd4Q\x81@')
('1', '\x7f\xd5\x82D\x00\x00\x00\x00+8\x89Ed\xf0/\xbe\xbdy\x06D\x8b\xfaM@\xa9-ZD\x9f\x03EB\x89\xeb4\xc2Z+\x87\xbes\xf7\x9bAw\xc7\xca\xbeMv\x83\xbc\xc4\x07k\xbf\xd6\x06k\xbf\x93);\xbc\xd6\xe0\xca>m\xc4\xb5A\x7f\xdc\xd6A\xf7\x8arA!\xbdcAe\r\xb3B\xc4\xf7\xd3B*\\\xdeBWF\xe5B\xa5\xffBB\xddaCB\x8c EBL8EB\x00\x00\x807\x00\x00$\xbc\x00\x00\x807\x00\x00\x00\x00\x00\x00\xa0@F\xc6\xb1=(O\x12\xbf\x00\x00\x00\x00\x885\xa4D') 
```

分析流量的人说：“通过它发出的数据包包含字段（38 个不同的字段）。所有字段都是浮点数据类型（在 C# 中）”

我知道有 38 个数字吗？我可以使用 Python 来阅读它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:03:58.923

您可以使用该[`struct`](http://docs.python.org/library/struct.html)模块：

```
floats = struct.unpack('<38f', data) 
```

（您*可能*需要根据数据的字节顺序更改为。`>`）`<`

# php - 带有特殊字符的 NSURL (åäö)

> ID：10106355
> 
> 赞同：2
> 
> 时间：2012-04-11T12:57:30.670
> 
> 标签：php, iphone, ios, nsurl

我的服务器上有一些图像，以特殊字符 (å,ä,ö) 命名。我不知道如何转换 NSUrl 来获取它们：

```
 NSString *urlString = [NSString stringWithFormat: @".../Images/%@Image.png", playerName]; 

    NSURL *url = [NSURL URLWithString: [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSLog(@"url:%@", url);

    //Get the image and assign it to the player
    NSData *imageData = [NSData dataWithContentsOfURL:url];
    UIImage *image = [UIImage imageWithData:imageData]; 
```

上例中的日志（如果“playerName”=åäö）：

```
.../Images/%C3%A5%C3%A4%C3%B6Image.png 
```

但我需要它是：

```
.../Images/åäöImage.png 
```

我尝试了不同的（stringByAddingPercentEscapesUsingEncoding）和下面的代码但没有成功：

```
- (NSString *)URLEncodingOfString:(NSString *)s
{
return (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes
(kCFAllocatorDefault, (__bridge CFStringRef)s, NULL, NULL,
 kCFStringEncodingISOLatin1);
 } 
```

非常感谢任何建议，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:03:24.707

我认为这完全取决于网络服务器使用的编码。

由于从您的测试来看，ISO-Latin-1 似乎不起作用，您可以尝试`kCFStringEncodingISOLatin1`用`kCFStringEncodingUTF8`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:04:11.130

尝试这个 ：

```
NSString * encodedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
    NULL,
    (CFStringRef)unencodedString,
    NULL,
    (CFStringRef)@"!*'();:@&=+$,/?%#[]",
    kCFStringEncodingISOLatin1 ); 
```

不幸的是，该`stringByAddingPercentEscapesUsingEncoding`方法不能正确编码所有特殊字符。

资料来源：[如何在 Objective-C、iPhone 等中真正对 NSString 进行 URL 编码。](http://simonwoodside.com/weblog/2009/4/22/how_to_really_url_encode/)

**编辑：**

你有没有尝试过

```
NSString *urlString = [NSString stringWithFormat: @".../Images/%@Image.png", playerName]; 

NSURL *url = [NSURL URLWithString: [urlString stringByAddingPercentEscapesUsingEncoding:NSISOLatin1StringEncoding]]; 
```

注意`NSISOLatin1StringEncoding`代替`NSUTF8StringEncoding`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T15:13:21.640

尝试这个

创建 NSURL

```
 NSURL *url = [[NSURL alloc]initWithString:stringURL]; 
```

stringURL 是表示 URL 的字符串。登录时，试试这个

```
 NSLog("%@",[url absoluteString]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T04:08:37.620

我遇到了这个问题，因为“%C3%89%C3%89”在我试图加载的网址中转换为ÉÉ。这似乎将 url 转换为所需的格式，以允许我从 URL 下载文件。

```
NSURL *url = [NSURL URLWithString:[[imageURL stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

# sql - 调用 SQL 的 Web 服务无法在 Visual Studio 之外运行

> ID：10106357
> 
> 赞同：0
> 
> 时间：2012-04-11T12:57:43.700
> 
> 标签：sql, web-services, iis

我有一个调用 SQL 查询并返回结果的 Web 服务。查询正常，Web 服务正常。

当我在 Visual Studio 中的调试中运行它时，它运行良好（IP 是 localhost，而 iis 服务器来自 Visual Studio 中），但是当我将它部署到 IIS（在同一台计算机上）时，它什么也不返回。我的意思是空的xml。

问题是什么？

我如何解决它？

这是网络服务，连接字符串在它之外：

```
[WebMethod]
public string CC()
{
    DataSet s = null;
    String c;
    System.Configuration.Configuration rootWebConfig =
            System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("\\");

    System.Data.SqlClient.SqlConnection sqlConnection1 = new System.Data.SqlClient.SqlConnection();

    sqlConnection1.ConnectionString = connString.ConnectionString;
        string select = "SELECT count (*) from [Customers]";

    // Create an Adapter
    SqlDataAdapter da = new SqlDataAdapter(select, sqlConnection1);

    // Create a New DataSet
    DataSet ds = new DataSet();

    da.Fill(ds, "Customers");

    return ds.Tables[0].Rows[0][0].ToString();
} 
```

这是`web.config`文件：

```
<?xml version="1.0"?>
<configuration>
    <appSettings/>
    <connectionStrings>
        <add name="ExecuTechConnectionString" 
             connectionString="user id=yuuvuv1; password=user;server=202.155.146.289\SQLEXPRESS;Trusted_Connection=no;database=YuYu; connection timeout=30"
             providerName="System.Data.SqlClient" />
    </connectionStrings>
    <system.web>
        <compilation debug="true" />
        <authentication mode="Windows" />
    </system.web>
</configuration>' 
```

我正在从soapUI-4.5.0 软件调用Web 服务进行测试，它使用SOAP 来调用Web 服务。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T20:07:59.063

VS 和 IIS 运行不同的服务器 - 前者专门用于 VS 开发。

在您的应用程序可以在 IIS 中运行之前，您必须检查设置 -

*   应用程序设置 - 是否允许/启用 asp.net？（服务扩展）
*   发布到 IIS 是否实际上将目录标记为 ASP.net 的应用程序/正确版本
*   应用程序池设置？

假设上述情况良好，请检查 SQL Express 是否[允许通过 TCP/IP 进行外部连接](http://blogs.msdn.com/b/bethmassi/archive/2008/09/17/enabling-remote-sql-express-2008-network-connections-on-vista.aspx)

# c# - IEnumerable 是允许过滤的数据的良好返回类型吗？

> ID：10106359
> 
> 赞同：1
> 
> 时间：2012-04-11T12:57:50.190
> 
> 标签：c#, ienumerable, iqueryable

我刚读了这个[问题](https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet)，它让我想到了为什么我需要`IEnumerable`在检索数据时使用。我了解 和 之间的区别`IQueryable`，`IEnumerable`但是`IEnumerable`对于允许过滤的数据，对象会更好吗？例如，一个包含日期的记录表，所以我可以按日期排序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:59:55.047

如果您在内存中有对象——而不是来自其他数据源，例如数据库——使用`IEnumerable<T>`。这样，内置的 LINQ to Objects 将自动工作。

您甚至可以通过编写自定义扩展方法并使用`yield return`and将 LINQ 扩展到对象`yield break`。

如果您使用的是 Entity Framework 或其他正在使用的系统`IQueryable<T>`，我会一直保留它，`IQueryable<T>`直到您需要它作为对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:15:32.707

这取决于。

如果您想首先接收所有数据，然后过滤返回的**对象**集，请使用 IEnumerable。

如果你想在数据库上启用过滤（例如 Linq-to-sql / Entity Framework），最好使用 IQueryable。

# php - simplePie 无法从 RSS 中获取特定的 RDF 字段

> ID：10106363
> 
> 赞同：1
> 
> 时间：2012-04-11T12:58:04.113
> 
> 标签：php, rss, rdf, simplepie

我正在尝试基于 simplePie 解析 RSS，而我要解析的 RSS 基于 RDF。

并有一些特定的领域，如：“创造者”/“标识符”/等等......

我根据如何从 rss 中获取特定字段阅读了 simplePie 文档并编写了以下代码（与 simplePie 示例基本相同）：

simplePie 文档链接：

> [http://simplepie.org/wiki/reference/simplepie_item/get_item_tags](http://simplepie.org/wiki/reference/simplepie_item/get_item_tags)

```
$feed = new SimplePie();
$feed->set_feed_url('http://www.nature.com/nchem/current_issue/rss');
$feed->enable_cache(false);
$success = $feed->init();
//$feed->handle_content_type('text/plain');

if ($success)
{
    if ($item = $feed->get_item(0))
    {
        // This is probably a bad example because we already support <media:content> natively, but it shows you how to parse through the nodes.
        $media_group = $item->get_item_tags('http://www.w3.org/1999/02/22-rdf-syntax-ns#', 'rdf');
        $media_content = $media_group[0]['child']['http://www.w3.org/1999/02/22-rdf-syntax-ns#']['content'];
       // $file = $media_content[0]['attribs']['']['url'];
       // echo $file;
    }
    else
    {
        echo 'Error: Could not get first item';
    }
}
else
{
    echo $feed->error();
} 
```

media_group 和 media_content（当然）总是返回 NULL

如何从 RSS 获取特定字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:46:46.473

非标准的提要会让 SimplePie 和我头疼。您可以从 SimplePie 获取原始 XML，然后使用其他东西来解析/操作它。在某些情况下，我使用 SimpleHTMLDom 做到了这一点......

# c++ - Windows下的Qt Creator构建错误

> ID：10106364
> 
> 赞同：0
> 
> 时间：2012-04-11T12:58:07.163
> 
> 标签：c++, qt, build, qt-creator

我想将多项目 MSVS 解决方案移植到 Qt Creator。我为项目创建了 .pro 文件并将它们添加到 Qt Creator。当我构建项目时，我总是遇到下面显示的相同错误。顺便说一句，我使用的是 Qt 4.6.3 (VS 2008)。什么可能导致这种情况？ ![在此处输入图像描述](../Images/85bc7bf5d18710f18b6008719f95e92e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:20:42.947

很难说问题出在 jom.exe 输出中。

*   可能是它试图在控制台上执行的命令[太长](http://qt-project.org/forums/viewthread/9751)（[MS 参考](http://support.microsoft.com/kb/830473)）。

*   [此处](https://stackoverflow.com/q/9408466/176769)报告了类似的问题，但尚不清楚是否已解决。

我建议您**升级到更新版本的 Qt 并重**试（抱歉）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:50:20.380

您可以将您的制作步骤从 jom 更改为 nmake（在项目窗口中找到），看看它是否会给您带来更详细的错误。

您的项目中似乎也没有任何源代码文件，只有库的头文件。

# orm - 流星：与猫鼬整合？

> ID：10106372
> 
> 赞同：9
> 
> 时间：2012-04-11T12:58:34.917
> 
> 标签：orm, meteor, mongoose

我注意到你们正计划在您的平台中添加更多的 ORM 功能，但与此同时，有没有一种简单的方法可以使用 Mongoose 集合扩展您的集合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:10:39.827

您应该能够添加：

```
npm install mongoose 
```

到“admin/generate-dev-bundle.sh”

然后，您可以创建一个新包并要求 mongoose，在其中您可以将方法分配给： Meteor.mongoose 并连接到 MONGO_URL（这是 Meteors 数据库）以执行此命令。如果您需要帮助，请查看其他软件包。

我在这个分支中做了示例工作： [https ://github.com/jonathanKingston/meteor/tree/mongoose](https://github.com/jonathanKingston/meteor/tree/mongoose)

这是 100% 未经测试的，因为我目前在 Windows 机器上，但它应该打开：Meteor.mongoose 和标准用途的普通猫鼬，如此处所述但已连接： [https ://github.com/LearnBoost/猫鼬#readme](https://github.com/LearnBoost/mongoose#readme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T14:54:58.820

mongoose 的一个问题是它无法在客户端上运行。因此，您将失去使用 Meteor 的大部分好处。

看看[Collections2](https://atmospherejs.com/aldeed/collection2)它提供了验证和结构。

祝你好运！

# c# - 在 rdlc 中调用钻取报告

> ID：10106376
> 
> 赞同：3
> 
> 时间：2012-04-11T12:58:52.640
> 
> 标签：c#, rdlc

我有一个 rdlc 报告名称attendence.rdlc，它采用三个参数employeeId、monthId 和year 来生成员工的每月出勤状态。像 ![在此处输入图像描述](../Images/dfbd937a226c5ffe87f0d0d18bdb9483.png)

当我单击>>按钮时： ![在此处输入图像描述](../Images/0429fea3eafeeb5b0fe3a171120e49c5.png)

我需要调用钻取（在我的情况下是相同的报告）报告增加月份和年份的参数。

![在此处输入图像描述](../Images/923b79afbf30fa44beb8aa138b066648.png)

如何在 rdlc 报告中创建钻取偶数处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:13:12.517

我的问题已经解决了。在 rdlc 中，当有人调用 goto_report/goto_url 时 ..它实际上是由 Drillthrough 报告调用的。所以如果我在回发 url 之外创建了一个甚至处理程序，比如

```
 protected void Page_Load(object sender, EventArgs e)
 { 

 if (!IsPostBack)
    {
       //otherscode u need
       //now call report first time
      string path = HttpContext.Current.Server.MapPath(your report path);
      ReportViewer1.Reset(); //important
      ReportViewer1.ProcessingMode = ProcessingMode.Local;
      ReportViewer1.LocalReport.EnableHyperlinks = true;

      LocalReport objReport = ReportViewer1.LocalReport;
      objReport.DataSources.Clear();
      objReport.ReportPath = path;

      // Add Parameter if you need
      List<ReportParameter> parameters = new List<ReportParameter>();
      parameters.Add(new ReportParameter("parameterName", ParameterValue));
      ReportViewer1.LocalReport.SetParameters(parameters);
      ReportViewer1.ShowParameterPrompts = false;
      ReportViewer1.ShowPromptAreaButton = false;
      ReportViewer1.LocalReport.Refresh();

      //Add Datasourdce
      ReportDataSource reportDataSource = new ReportDataSource();
      reportDataSource.Name = "odsReportData";
      reportDataSource.Value = YourReportDataSourseValue;
      objReport.DataSources.Add(reportDataSource);
      objReport.Refresh();
    }

    ReportViewer1.Drillthrough += new DrillthroughEventHandler(DemoDrillthroughEventHandler);

    }

   public void DemoDrillthroughEventHandler(object sender, DrillthroughEventArgs e)
   {
  /*Collect report parameter from drillthrough report*/
    ReportParameterInfoCollection DrillThroughValues = e.Report.GetParameters();
    Type parameterName = Type.Parse(DrillThroughValues[1].Values[0].ToString());

  /*Bind data source with report*/
    LocalReport localReport = (LocalReport)e.Report;
    localReport.DataSources.Clear();
    localReport.DataSources.Add(new ReportDataSource("odsData", reportData));
    localReport.EnableHyperlinks = true;     

   /*Add parameter to the report if report have paramerter*/
    List<ReportParameter> parameters = new List<ReportParameter>();
    parameters.Add(new ReportParameter("ParameterName", ParameterValue));
    localReport.SetParameters(parameters);
    localReport.Refresh();
} 
```

# opengl - 如何动态编辑 VBO

> ID：10106378
> 
> 赞同：0
> 
> 时间：2012-04-11T12:58:54.500
> 
> 标签：opengl, vbo

我正在寻找一种方法来动态编辑为顶点缓冲区对象显示的数据。我已经尝试过 glBufferSubData、glMapBuffer、glBufferData 和其他一些，但是没有运气。我发现耗时的方法是glBindBuffer。我认为我使用 VBO 是正确的，但我并不完全确定。这是我的问题的一些示例代码：

```
 verticesId = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, verticesId);
    glBufferData(GL_ARRAY_BUFFER, verticesBuffer, GL_STREAM_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    normalsId  = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, normalsId);
    glBufferData(GL_ARRAY_BUFFER, normalsBuffer, GL_STREAM_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    texturesId  = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, texturesId);
    glBufferData(GL_ARRAY_BUFFER, texturesBuffer, GL_STREAM_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

verticesBuffer 和其他变量是其中包含数据的 FloatBuffer。接下来，我以这种方式渲染它们：

```
 glEnableClientState(GL_VERTEX_ARRAY);

    glBindBuffer(GL_ARRAY_BUFFER, verticesId);
    glVertexPointer(vertexSize, GL_FLOAT, 0, 0);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glBindBuffer(GL_ARRAY_BUFFER, texturesId);
    glTexCoordPointer(2, GL_FLOAT, 0, 0);

    glDrawArrays(GL_QUADS, 0, amountOfVertices);

    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY); 
```

这是我编辑 VBO 的方法：

```
 int position = 0;

    ///////////////////////////////////////////////////////////////////

    glBindBuffer(GL_ARRAY_BUFFER, verticesId);

    mapBuffer = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY, null);

    verticesBuffer = mapBuffer.order(ByteOrder.nativeOrder()).asFloatBuffer();

    verticesBuffer.position(position);

    // ... edit some values in the 'vertices' float array ...

    verticesBuffer.put(vertices);

    verticesBuffer.rewind();

    glUnmapBuffer(GL_ARRAY_BUFFER);

    glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

有什么方法可以加快 glBindBuffer 方法，还是我做错了？而且，我应该如何编辑数据以获得最高效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:36:22.667

[您可以使用Vertex Array Objects](http://www.opengl.org/registry/specs/ARB/vertex_array_object.txt)加速绘图部分。

关于上传部分，您的代码很好；你可以做的是“双缓冲”：保留数据的副本，使用另一个线程处理它（现在多处理器系统很常见），然后使用*glBufferSubData*上传。

另一种选择是使用 SIMD 程序集，但这取决于您的应用程序。

# java - 如何在Java中通过drawString将文本输出居中

> ID：10106382
> 
> 赞同：0
> 
> 时间：2012-04-11T12:59:16.680
> 
> 标签：java, minecraft

我试图将 drawString 的文本输出集中在程序中的 X 坐标上。我正在尝试获取窗口的宽度并除以两个以获得中心但无济于事。这是我的代码：

```
package net.minecraft.src;
import java.awt.Color;
import java.awt.FontMetrics;
import org.lwjgl.input.Keyboard;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Random;
import net.minecraft.client.Minecraft;
import org.lwjgl.opengl.GL11;
import org.lwjgl.opengl.GL12;

public class GuiIngame extends Gui
{
//lots of other code here
NumberFormat nf = NumberFormat.getInstance();
nf.setMaximumFractionDigits(0);
String xCords = nf.format(mc.thePlayer.posX);
String yCords = nf.format(mc.thePlayer.posY);
String zCords = nf.format(mc.thePlayer.posZ);
drawString(fontrenderer, (new StringBuilder()).append("X: ").append(xCords).toString(), 20, 2, 0xe0e0e0);
drawString(fontrenderer, (new StringBuilder()).append("Y: ").append(xCords).toString(), 40, 2, 0xe0e0e0);
drawString(fontrenderer, (new StringBuilder()).append("Z: ").append(xCords).toString(), 60, 2, 0xe0e0e0);
} 
```

它只需要以 x 轴为中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:54:46.680

有一个我不知道的整数可以完成这项工作。我显示每一行的最终代码是：

```
drawCenteredString(fontrenderer, (new StringBuilder()).append("X: ").append(xCords).toString(), mc.displayWidth / 4, 2, 0xe0e0e0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T13:07:51.657

这应该做你想要的：

```
String coord_text = new StringBuilder()).append("X: ").append(xCords).toString();
gui.drawString(fontrenderer, coord_text, gui.width/2 - fontrenderer.getStringWidth(coord_text)/2, 2, 0xe0e0e0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T18:17:14.897

有一个特定的功能可以做到这一点，我相信它被称为 drawCenterString

# php - 根据用户输入显示查询数据库的更有效方式

> ID：10106387
> 
> 赞同：0
> 
> 时间：2012-04-11T12:59:27.480
> 
> 标签：php, html, mysql, performance

我有一个带有公共汽车时间表的数据库（mySQL）。我希望能够根据一些用户输入显示时间表：路线、日期和时间。公共汽车每天至少在城市周围运行 13 次。结构设置为：

```
-Select Route(2 diff routes)
-Select Day(2 set of day, Sun-Wed & Thur-Sat)
-Select Time(atLeast 13 runs per day) = Show Schedule

My table structure is:
p_id,   route     day    run#    stop     time
  1     routeA    m-w      1     stop1   12:00PM
  1     routeA    m-w      1     stop2   12:10PM

..and so on 
```

我确实有一个运行良好的演示，但是，它的效率非常低。我查询数据库以获取每一次可能的运行。我想避免这样做。

谁能给我一些提示以提高效率？或者给我看一些例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:39:40.543

如果您在 Google 上搜索“公交时刻表架构设计”，您会发现很多类似的问题和许多不同的解决方案，具体取决于具体的用例。[这是使用 SQL 对 here-bus timetable](https://stackoverflow.com/questions/2503759/i-am-designing-a-bus-timetable-using-sql-each-bus-route-has-multiple-stops-do)提出的一个类似问题。

首先是规范化你的数据结构。有很多不同的方法可以解决这个问题，但起点应该是 -

```
routes(route_id, bus_no, route_name)
stops(stop_id, stop_name, lat/long, etc)
schedule(schedule_id, route_id, stop_id, arrive, depart) 
```

您应该进行一些搜索并查看支持的不同用例以及它们与您的特定场景的关系。上面的例子只是一个粗略的例子。它可以根据所使用的数据进一步细分。您可能只想将停靠点之间的时间存储在一个表中，然后将路线的开始时间存储在另一个表中。

# c# - WPF 的高 CPU 使用率

> ID：10106389
> 
> 赞同：3
> 
> 时间：2012-04-11T12:59:31.500
> 
> 标签：c#, wpf, cpu-usage

在我的 WPF 项目中，如果我打开一个窗口，cpu 使用率大约是 30%-50%，但是当我最小化这个窗口时，cpu 使用率下降到 1%。有人知道原因吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:00:48.993

你的屏幕上有很多绑定（两种方式）吗？这可能会导致高 CPU。还是很多动画？

最终，您可以使用 WPF 性能套件来监控导致这种高 CPU 负载的原因：http: [//msdn.microsoft.com/en-us/library/aa969767.aspx](http://msdn.microsoft.com/en-us/library/aa969767.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T16:12:33.637

罗迪的好帖子，我只是要添加一些东西，使用答案而不是评论，因为评论有最大限制..

我还建议使用 Ants Profiler，它有 2 周的试用期 - 足以弄清楚发生了什么。此外，如果您发布一些代码，这里的人们可以快速指出一些事情。

例如，如果您拥有如 Rudy 指出的大量绑定和动画，以及过于复杂的控件和控件模板。质疑堆栈面板内、边框内的堆栈面板的不必要组合...使用 TextBlocks 而不是 Labels，或者是否需要 TextBoxes，如果它们是只读的，请使用 TextBlocks + Border。您的 ItemControl 的项目是否过于复杂？ETC...

此外，Ants Profiler 可以向您展示您的“僵尸”对象。您是否正确处置，是回收对象还是每次创建新的复杂结构（例如，在选择新的日期范围以显示您的数据时），然后重新启用它们。如果您有数据网格单元格，是否每个单元格都需要昂贵的东西……弹出窗口和额外的边框。它在网格上。名单可以继续。

长话短说 - WPF 是一头猪：所以你可能不得不精简一些东西，或者/或者更有创造力，以减少开销来保持美观。

PS不要忘记发布一些代码...

# cordova - sencha touch 2 将设备方向设置为纵向，横向除外 1 个视图

> ID：10106390
> 
> 赞同：0
> 
> 时间：2012-04-11T12:59:36.967
> 
> 标签：cordova, sencha-touch-2

我有一个应用程序，我尝试在 android 和 iphone 上使用 sencha touch 2 框架开发。我希望应用程序方向仅设置为纵向，除了一个视图。如果设备方向为“纵向”，则此视图将加载纵向视图；如果设备方向为“横向”，则此视图将加载横向视图

目前我在android上使用phonegap，我将方向固定为纵向。

但是在创建将根据方向加载“纵向视图”或“横向视图”的视图时，我非常迷茫。如果我在 phonegap 中将方向固定为纵向，还会检测到方向吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T05:59:47.137

我的问题没有任何答案，我会回答自己。

例如，在 Android (phonegap) 上，在清单中定义方向为：

> 安卓：screenOrientation="传感器"

然后，在 Activity 中启动应用程序之前，如果您希望应用程序使用 Portrait 只需将其设置为 Portrait ： setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); super.loadUrl("file:///android_asset/www/index.html");

在您的 JS 中，当您想要使用横向/纵向时，向主应用程序发送一个命令，其中包含一个调用自定义 setOrientation 代码的操作：

```
onSetOrientationSuccess: function(result) {
    ...
},
onSetOrientationError: function(err) {
    ... 
},

setOrientation: function(orientation) {

    PhoneGap.exec(this.onSetOrientationSuccess, this.onSetOrientationError, "OrientationPlugin", orientation, []);
}, 
```

OrientationPlugin 只是一个简单的 phonegap 插件，您可以在其中检查操作并调用正确的代码：

```
public class OrientationPlugin extends Plugin {

public static final String ACTION="undefined";

@Override
public PluginResult execute(String action, JSONArray data, String callbackId) {
    Log.d("OrientationPlugin", "Plugin called");
    PluginResult result = null;
    YourActivity activity = (YourActivity) this.ctx;
    Log.d("OrientationPlugin", "Plugin Got context");

    if (ACTION.equals(action)) {
        Log.d("OrientationPlugin", "Plugin set SCREEN_ORIENTATION_SENSOR");         
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
    }
    else {
        Log.d("OrientationPlugin", "Plugin set SCREEN_ORIENTATION_PORTRAIT");               
        activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);         
    }
    Log.d("OrientationPlugin", "Plugin set ALL OK");            
    result = new PluginResult(Status.OK, "ok");
    return result;
} 
```

}

然后，您可以随时从 JS 中将其设置回 PORTRAIT。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T02:40:18.510

在您希望标准方向的一个视图上，添加一个自定义值，例如`doLandscape: 1`. 我喜欢在 app.config.Runtime 类中设置运行时“全局”值，否则如果它适用于整个应用程序，我会将其附加到导航栏。

```
Ext.define(‘MyApp.config.Runtime’,{
    singleton : true,
    config : {
        doLandscape: 0   // initialize to 0
    },
    constructor : function(config){
        this.initConfig(config);
    }
}); 
```

在视口上，添加：

```
onOrientationChange: function(viewport, orientation, width, height) {
    // test trigger and values
    console.log('o:' + orientation + ' w:' + width + ' h:' + height);

    if (orientation == 'landscape' && MyApp.config.Runtime.doLandscape === 0) {
        // most often this is all that's needed to prevent change
        return false;

        // alternatively / additionally set it back to portrait manually.
        viewport.orientation = this.PORTRAIT;
    }
} 
```

查看更新的源代码，这是处理和触发方向更改的视口默认代码。

```
onOrientationChange: function() {
    var currentOrientation = this.getOrientation(),
        newOrientation = this.determineOrientation();

    if (newOrientation !== currentOrientation) {
        this.fireOrientationChangeEvent(newOrientation, currentOrientation);
    }
},

fireOrientationChangeEvent: function(newOrientation, oldOrientation) {
    var clsPrefix = Ext.baseCSSPrefix;
    Ext.getBody().replaceCls(clsPrefix + oldOrientation, clsPrefix + newOrientation);

    this.orientation = newOrientation;

    this.updateSize();
    this.fireEvent('orientationchange', this, newOrientation, this.windowWidth, this.windowHeight);
} 
```

当您打包本机时，此选项可作为另一种选择：

```
Ext.device.Orientation.on({
    scope: this,
    orientationchange: function(e) {
        console.log('Alpha: ', e.alpha);
        console.log('Beta: ', e.beta);
        console.log('Gamma: ', e.gamma);
    }
}); 
```

# c - 在 C 中遍历一个数组

> ID：10106399
> 
> 赞同：-2
> 
> 时间：2012-04-11T12:59:55.763
> 
> 标签：c, arrays, loops, for-loop

我想在使用 a[0] 的地方增加。类似的东西`a++`。我能想到的唯一其他解决方案是 switch case 或一堆 if/else if 语句，但这似乎效率低下。这可能吗？

```
#include <stdio.h>
int
main(void)
{
    const char *a[6];    
    a[0]="one";
    a[1]="two";
    a[2]="three";
    a[3]="four";
    a[4]="five";
    a[5]="six";

    for (int i = 0; i < 6; i++)
    {
        printf("This old man, he played %s\nHe played knick-knack on my thumb\nKnick-knack paddywhack, give your dog a bone\nThis old man came rolling home\n\n", a[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:01:28.473

那这个呢？

```
printf(..., a[i]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:02:07.540

使用`a[i]`.

但是这是一个非常基本的问题，我建议您在提问之前先看一下互联网上的一些教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:04:53.297

您可以`a[i]`在循环内部使用来访问第 i^个元素。

```
for (int i=0; i<N; i++)
    printf("%s\n", a[i]); 
```

如果您需要在循环中增加一个指针，您可以这样做：

```
const char **p=a;
for (int i=0; i<N; i++)
    printf("%s\n", *p++); 
```

就个人而言，我会使用`a[i]`.

# c++ - if((int val = getvalue()) == x) 形式是否有效

> ID：10106405
> 
> 赞同：4
> 
> 时间：2012-04-11T13:00:26.947
> 
> 标签：c++

这个表格不能用我的 VS2008 编译器编译。应该可以吗？

```
#include <iostream>
using namespace std;

int getvalue() { return 3; }

int main(int argc, char* argv[])
{
if((int val = getvalue()) == 3)
    cout << "val=" << val << "\n";
return 0;
} 
```

这种形式确实有效。...

```
int val;
if((val = getvalue()) == 3)

... 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T13:08:14.943

这是不合法的，因为您不能将语句用作表达式。

所以，不是在 an`if`中声明一个变量是非法的，而是比较。

就像：

```
(int x = 3) == 3; 
```

是非法的，而

```
int x = 3;
x == 3; 
```

不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:39:36.647

如果您不想在范围内乱扔垃圾，可以使用 а`{}`块：

```
...
{
  int val;
  if((val = getvalue()) == 3) { 
  ... 
  }
}
... 
```

`val`最终将被销毁，`}`之后将不可见。

# php - 如何回显 DOMNodeList 对象和 DOMElement 对象？

> ID：10106407
> 
> 赞同：2
> 
> 时间：2012-04-11T13:00:33.337
> 
> 标签：php, dom

我正在使用一个循环来填充一个名为 $list 的数组。它就像一个魅力..

```
// $content is a DOMNodeList Object  
// $value is a DOMElement Object 

$list = array();

foreach ($content as $value){

    array_push($list, 'title'=>$value->nodeValue);  

} 
```

尽管我的循环正确地填充了我的数组，但我还是想深入研究一下 DOM 以更好地理解事物（这个 DOM 对我来说是新事物……）。所以我想要的是看看`DOMNodeList Object ($content)`和的`DOMElement Object ($value)`样子。

所以我的问题很简单：我怎样才能“回显”那些“元素”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:07:36.410

比“回声”DomElement 更好，请阅读文档：[http](http://php.net/manual/en/class.domelement.php) ://php.net/manual/en/class.domelement.php 。

如果您想查看 XML 表示，请使用[http://www.php.net/manual/en/domnode.c14n.php](http://www.php.net/manual/en/domnode.c14n.php)，即

```
echo $value->c14N(false,true); 
```

# grails - 有没有办法将水银代码与所有捆绑的第三方库分开？

> ID：10106409
> 
> 赞同：4
> 
> 时间：2012-04-11T13:00:43.480
> 
> 标签：grails, grails-plugin, mercury-editor

我想是为了简化安装和分发，将水银与第三方库捆绑在同一个 .js 文件中。

我猜这对小型项目很有用，它不会对第三方库有太多依赖，但是我不喜欢将一堆 jquery UI 插件与它自己的 jquery 版本以及水星代码捆绑在一起。

有没有办法创建一个不包含这些库的发行版，以便开发人员亲自关心交付所需的依赖项？

这一切都是为了创建一个包含水银的 grails 插件，就像在 rails 中做的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:24:51.317

我假设您的意思是询问是否可以将[mercury项目](http://jejacks0n.github.com/mercury/)中的javascript代码和其他客户端资产作为插件的一部分分发，而不是merge在其存储库中包含的依赖项（tsk，tsk） .

最好的办法是简单地将文件复制到一个新项目中（看起来你[有一个](https://github.com/emfanitek/mercury-editor)）并忽略 jQuery（和任何其他）依赖项。您可以通过在 BuildConfig.groovy 中将它们声明为插件来安全地依赖这些资源。这意味着 jQuery 插件将在他们安装您的插件时自动安装（除非他们已经安装了它）。

您可能还想考虑与[资源插件](http://grails-plugins.github.com/grails-resources/)集成，以便以优化的方式提供您的 javascript 和图像，并且易于插件消费者使用。

# android - ListView 选定项可绘制

> ID：10106413
> 
> 赞同：3
> 
> 时间：2012-04-11T13:01:11.277
> 
> 标签：android, listview

我的 ListView 有问题。当我将所选项目选择为我拥有的自定义可绘制对象时，我想将其更改为背景，但它不起作用。

我想在图像中具有这种效果作为选定项

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" 
          android:drawable="@drawable/selected_item"/>
    <item android:drawable="@android:color/transparent" />
</selector> 
```

这是 list_row 的文本

```
<!-- this layout is used to view row of category list and resturant list  -->
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/txt_category_row" 
    android:gravity="center"
    android:layout_width="match_parent" 
    android:textColor="@color/BLACK"
    android:layout_height="55dp" 
    android:padding="10dp"
    android:text="@string/hello" 
    android:layout_marginTop="5dp"

    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

这是 ListView `code.xml`：

```
<ListView android:id="@+id/list_category" 
    android:layout_alignParentLeft="true" 
    android:layout_height="fill_parent" 
    android:layout_width="184dp" 
    android:dividerHeight="2px"
    android:background="@android:color/transparent"
    android:cacheColorHint="@android:color/transparent"
    android:layout_marginTop="5dp"  
    android:listSelector="@drawable/list_selector"
    android:divider="@color/Gray"  > 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T15:03:19.943

在触摸模式下，没有选择或聚焦状态。

但是，您可以有一个选中状态（即使没有复选框）并在“选择”时使用它来更改属性。在您设置显示列表的 java 代码中，在定义列表视图后添加此行：

```
getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

然后在您的状态列表 XML 中更改：

```
android:state_selected="true" 
```

对此：

```
android:state_activated="true" 
```

所以现在你应该有：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
    <item android:state_activated="true"  
        android:drawable="@drawable/selected_item"/> 
    <item android:drawable="@android:color/transparent" /> 
</selector> 
```

最后，将行视图的背景设置为指向选择器文件：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/txt_category_row"  
    android:gravity="center" 
    android:layout_width="match_parent"  
    android:textColor="@color/BLACK" 
    android:layout_height="55dp"  
    android:padding="10dp" 
    android:text="@string/hello"  
    android:layout_marginTop="5dp" 
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:background="@drawable/item_selector" /> 
```

您没有为您的状态列表 XML 命名，所以我只使用了“item_selector”。您应该用该文件的实际名称替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:21:22.827

您应该使用 CheckableFrameLayout 作为列表项视图。你可以在这里找到它 - [CheckableFrameLayout](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/CheckableFrameLayout.html)

您可以在那里看到，当您单击列表项时，它会将背景可绘制对象更改为您想要的任何内容。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-11T13:37:26.113

```
dynamicListView.setOnItemClickListener(new OnItemClickListener() {

   @Override
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
       //arg1 will give you that view   
       arg1.setBackgroundColor(Color.BLUE); 
    }
}); 
```

# python - beautifulSoup 过滤一些数据

> ID：10106414
> 
> 赞同：-2
> 
> 时间：2012-04-11T13:01:11.310
> 
> 标签：python, beautifulsoup

===获取页面源后更改，我们称之为src

我使用 bs4 进行解析：

```
soup = BeautifulSoup(src) 
```

我的想法是我正在获取过滤后的数据。

示例：使用bs4后查看这个url="http://www.imdb.com/name/nm0000905/"的来源：

```
soup = BeautifulSoup(src) 
```

过滤后的数据是“Known For”和“Related News”以及它下面的所有内容。所以打开汤时我看到页面的上部。（见[python，没有得到完整的回应](https://stackoverflow.com/questions/10102696/python-not-getting-full-response)）我仍然想使用bs4（我也有）有什么建议吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:20:23.030

建议？[是的，使用文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)中指定的库。

# iphone - 如何在 APNS 中发布推送通知以及如何在 iPhone 中显示通知？

> ID：10106416
> 
> 赞同：2
> 
> 时间：2012-04-11T13:01:11.793
> 
> 标签：iphone, ios, apple-push-notifications, apns-php

我对 APNS 有几个疑问。我正在努力澄清 APNS，但仍需要一些澄清。我必须知道`how we are posting push notification in APN Server and how we push the notification to Apple APN Server?`而且我如何从 Apple 接收通知并将通知显示给用户？我知道我们收到了来自下方代表的通知，

```
-(void)application:(UIApplication *)app didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

`How we should show the notifications to the user`，请建议任何示例代码？请澄清我愚蠢的怀疑。提前致谢。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:11:15.537

本教程很有用，请参阅 [http://mobiforge.com/developing/story/programming-apple-push-notification-services](http://mobiforge.com/developing/story/programming-apple-push-notification-services)

当您收到推送通知时，请`NSLog userInfo`

```
-(void)application:(UIApplication *)app didReceiveRemoteNotification:(NSDictionary *)userInfo
{
      NsLog("%@",userInfo);
} 
```

推送通知仅出现一次，弹出窗口打开约 10 秒（取决于通知类型）...如果单击然后 didReceiveRemoteNotification delegte 调用，如果您无法单击任何原因看到通知，请转到设置->通知单击...并检查

如果您想存储总推送通知，请使用数据库并存储在您的数据库中

# perl - 写有限数量的字符，然后在 Perl 中返回该行并且不要剪切最后一个单词

> ID：10106418
> 
> 赞同：0
> 
> 时间：2012-04-11T13:01:22.700
> 
> 标签：perl

我在数组中有一个字符串，我想将它写入文件。问题是我需要写一些限制在 100 以内的字符，然后我必须回到行并完成句子的内容。然后，如果我再次遇到 100 个字符，我将返回该行，直到我完成表中的链内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:40:41.383

该[`Text::Wrap`](https://metacpan.org/module/Text%3a%3aWrap)模块可能会做您想做的事，并且是核心 Perl 的一部分，这意味着您不必安装它。

该程序从`DATA`伪句柄中读取文本并重新格式化。

```
use strict;
use warnings;

use Text::Wrap;

my @text = <DATA>;
chomp @text;

$Text::Wrap::columns = 100;
print Text::Wrap::wrap '', '', @text;

__DATA__
"Text::Wrap::wrap()" is a very simple paragraph formatter. It formats a
single paragraph at a time by breaking lines at word boundaries.
Indentation is controlled for the first line ($initial_tab) and all
subsequent lines ($subsequent_tab) independently. Please note:
$initial_tab and $subsequent_tab are the literal strings that will be
used: it is unlikely you would want to pass in a number.

Text::Wrap::fill() is a simple multi-paragraph formatter. It formats
each paragraph separately and then joins them together when it's done.
It will destroy any whitespace in the original text. It breaks text into
paragraphs by looking for whitespace after a newline. In other respects
it acts like wrap().

Both "wrap()" and "fill()" return a single string. 
```

**输出**

```
"Text::Wrap::wrap()" is a very simple paragraph formatter. It formats a single paragraph at a time
by breaking lines at word boundaries. Indentation is controlled for the first line ($initial_tab)
and all subsequent lines ($subsequent_tab) independently. Please note: $initial_tab and
$subsequent_tab are the literal strings that will be used: it is unlikely you would want to pass in
a number.  Text::Wrap::fill() is a simple multi-paragraph formatter. It formats each paragraph
separately and then joins them together when it's done. It will destroy any whitespace in the
original text. It breaks text into paragraphs by looking for whitespace after a newline. In other
respects it acts like wrap().  Both "wrap()" and "fill()" return a single string. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:23:27.003

我认为您正在寻找诸如[Text::Reform](https://metacpan.org/module/Text%3a%3aReform)或[Text::Autoformat 之](https://metacpan.org/module/Text%3a%3aAutoformat)类的东西。

# wcf - 来自网站客户端脚本的 WCF RESTful 服务跨域访问

> ID：10106425
> 
> 赞同：3
> 
> 时间：2012-04-11T13:01:52.450
> 
> 标签：wcf, rest, cross-domain

我正在使用 VS 2010 IDE 开发 WCF RESTful 服务，在研究期间，我们被告知 API 将部署在站点托管的同一域中，例如。

**API 托管：** www.site.com/API/services.svc（其中 API 是一个虚拟文件夹）

**网站托管：** www.site.com

由于我们的网站将使用我们计划在同一域中部署的客户端 ajax 使用相同的 API，因此不会出现跨域/源访问问题。

但是，后来发生了变化，iPad、iPhone 和智能电视应用程序将使用相同的 API，因为我们计划将 API 部署在名为 www.api.com 的单独域中的 API 将会有巨大的流量/services.svc 它对所有设备应用程序的响应都很好，但是我们在网站上遇到了问题，因为它是来自客户端的跨域访问。经过搜索，我发现代码可以在 API 中破坏此跨域策略，如下所示，通过在 Global.asax 文件 Application_BeginRequest() 中实现以下代码，它在 Chrome、Firefox 和 Safari 浏览器中响应良好，但在 IE 中没有

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "x-requested-with");
if (HttpContext.Current.Request.HttpMethod.ToUpper() == "OPTIONS")
{
HttpContext.Current.Response.AddHeader("X-DR-Request-Terminated-By", "CrossDomainXhr-OPTIONS");
HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
HttpContext.Current.Response.End();
} 
```

请帮我解决这个问题...

提前致谢...

萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:23:08.833

据我所知，IE 不允许使用“*”

```
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*"); 
```

尝试指定域。您也可以在这里参考：
[IE 中的 Access-Control-Origin](http://www.webdavsystem.com/ajax/programming/cross_origin_requests)

# python - python中的成员或类变量

> ID：10106430
> 
> 赞同：9
> 
> 时间：2012-04-11T13:02:07.037
> 
> 标签：python, variables

我来自Java，所以我在这里感到困惑。

```
class Sample(object):
    x = 100                     # class var?
    def __init__(self, value):
        self.y = value          # instance var?
        z = 300                 # private var? how do we access this outside Sample? 
```

3个变量声明有什么区别？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-11T13:08:23.430

```
class Sample(object):
    x = 100      
    _a = 1
    __b = 11               
    def __init__(self, value):
        self.y = value      
        self._c = 'private'    
        self.__d = 'more private'
        z = 300 
```

在这个例子中：

*   `x`是类变量，
*   `_a`是私有类变量（通过命名约定），
*   `__b`是私有类变量（被解释器破坏），
*   `y`是实例变量，
*   `_c`是私有实例变量（按照命名约定），
*   `__d`是私有实例变量（被解释器破坏），
*   `z`是方法范围内的局部变量`__init__`。

如果名称中有单下划线，则严格遵守约定。仍然可以访问这些变量。在双下划线名称的情况下，它们会被破坏。仍然可以绕过它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:15:08.827

@vartec 是正确的。但是，由于您来自 Java，因此需要进行一些澄清：

*   Java 有`public`和`private`成员。严格禁止访问`private`成员，这是由语言强制执行的。
*   Python 只有公共成员。没有办法强制执行诸如 java 的关键字**之类的东西。**`private`

    如果你想声明某事只是一个实现细节并且不应该被其他代码依赖，你可以在它前面加上一个下划线 - `_variable`, `_function()`。这是对其他程序员的一个*提示*，他们不应该使用该变量或该函数，但*并未强制执行。*

    看起来 Python 中省略了一个特性，但 Python 的文化是“每个人都是同意的成年人”。如果你告诉其他程序员某些东西是“私有的”，在它前面加上一个下划线，他们通常会接受这个提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:11:22.247

你似乎已经掌握了窍门。唯一完全错误的是`z = 300`. 这是`__init__`方法的本地名称。Python**永远不会**`self`以 C++ 和 Java 假定的相同方式为您插入`this`。

在继续学习 Python 时要记住的一件事是成员函数始终可以作为类成员执行。考虑以下：

```
>>> class Sample(object):
...   def __init__(self, value):
...     self.value = value
...   def get_value(self):
...     return self.value
...
>>> s = Sample(1)
>>> t = Sample(2)
>>> s.get_value()
1
>>> Sample.get_value(s)
1
>>> t.__class__.get_value(s)
1 
```

最后三个例子都调用了对象的*成员函数*`s`。最后两个使用的事实`get_value`只是`Sample`类的一个属性，它期望接收一个实例`Sample`作为参数。

# php - 将值插入网格 - php、sql

> ID：10106432
> 
> 赞同：0
> 
> 时间：2012-04-11T13:02:09.447
> 
> 标签：php, mysql, database

所以我有这段代码组成了一个时间表网格（日期和时间），我连接到数据库并选择表，如你所见......我想做的是例如当英语课在星期一 0900 开始时，我想将此信息插入网格中，我该如何实现？非常感谢

```
<?php
error_reporting(E_ALL);
mysql_connect('db','user','password')
   or die(mysql_error());
mysql_select_db('db')
   or die(mysql_error());
$sql = "select day,start,class,time
  from event where class='english'";
$res = mysql_query($sql)
   or die(mysql_error());

   $days = array('Monday','Tuesday','Wednesday','Thursday','Friday');
$times= array('09','10','11','12','13','14','15','16');
echo "<table id='grid'>\n";
echo "<tr><td></td>";
for($t=0;$t<count($times);$t++)
  echo "<th>$times[$t]:00</th>";
echo "<tr>\n";
for($d=0;$d<count($days);$d++){
  print "<tr><th>$days[$d]</th>";
  for($t=0;$t<count($times);$t++)
    echo "<td id='td_$days[$d]_$times[$t]'></td>";
  echo "</tr>\n";
}
echo "</table>\n";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:28:42.657

首先对你的数组使用 foreach()

```
 foreach($times as $time)
     echo "<th>$time:00</th>"; 
```

其次，尽量不要把 php 和 html 混为一谈。所有这些至少使您的代码更干净。对于 db 结果，您应该使用 mysql_fetch_array();

比这样走：

```
<table id='grid'>
    <tr>
        <td></td>
        <?php 
            foreach ($times as $time)
                echo "<th>$time:00</th>";
        ?>
    <tr>
        <?php 
            foreach ($days as $day){
                echo "<tr><th>$day</th>";
                foreach ($times as $time){
                    $english = ($day == $res['day'] && $time == $res['time']) ? $res['class'] : '';
                    echo "<td id='td_$day_$time'>{$class}</td>";
                }
            }
        ?>
    </tr>
    </table> 
```

# ruby-on-rails - 集成测试导轨不起作用登录

> ID：10106440
> 
> 赞同：0
> 
> 时间：2012-04-11T13:02:38.357
> 
> 标签：ruby-on-rails, testing, login

我有这样的测试：

```
class LockableFlowTest < ActionDispatch::IntegrationTest

      context 'A user' do

        setup do
          @organization = Factory(:organization)
          @user = Factory(:user, :organization => @organization)
        end

        should "login after 4 attempts" do
          4.times do
            post_via_redirect '/users/sign_in', 'user[username]' => @user.username, 'user[password]' => "bad_password"
            assert_equal '/users/sign_in', path
            assert_equal 'Invalid email or password.', flash[:alert]
          end
          post_via_redirect '/users/sign_in', 'user[username]' => @user.username, 'user[password]' => "password"
          assert_equal "/registrations/#{@user.id}/edit", path
          assert_nil flash[:alert]
        end 
```

它不起作用，但应用程序没问题。我想测试登录应用程序的尝试。4 次尝试后应该可以登录。

代码控制器：

```
class SessionsController < Devise::SessionsController
  after_filter :log_failed_login, :only => :new

  private
  def log_failed_login
    if request.filtered_parameters["user"]
      user = User.find_by_username(request.filtered_parameters["user"]["username"])
      if user
        if user.first_failed_attempt.nil?
          user.first_failed_attempt = Time.now
        else
          if user.first_failed_attempt + 15.minutes <= Time.now
            user.failed_attempts = 1
            user.first_failed_attempt = Time.now
          end
        end
        user.save
      end

    end
  end

def failed_login?
  (options = env["warden.options"]) && options[:action] == "unauthenticated"
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:43:43.853

让应用程序知道它已经执行了四次尝试的计数机制是什么？

饼干？[Cookie 不会在 Rails 3.1 上的 Rspec 中保留](https://stackoverflow.com/questions/6821692/cookies-do-not-persist-in-rspec-on-rails-3-1)

# php - ajax 调用 login.php ，响应失败

> ID：10106441
> 
> 赞同：0
> 
> 时间：2012-04-11T13:02:39.377
> 
> 标签：php, javascript, mysql, ajax, jquery

我正在使用 ajax 调用进行 login.php..以下是我的 ajax 位代码和 login.php 代码..同时提供有效的用户名和密码..我收到无效的用户名或密码消息..我完全无法理解这些代码行

```
$is_ajax = $_REQUEST['is_ajax'];
    if(isset($is_ajax) && $is_ajax) // in login.php, Many thanks

$("#login").click(function() {    
    var action = $("#form1").attr('action');
    var form_data = {
        username: $("#username").val(),
        password: $("#password").val(),
        is_ajax: 1
    };

    $.ajax({
        type: "POST",
        url: login.php,
        data: form_data,
        success: function(response)
        {
            if(response == 'success')
                $("#form1").slideUp('slow', function() {
                    $("#message").html("<p class='success'>You have logged in successfully!</p>");
                });
            else
                $("#message").html("<p class='error'>Invalid username and/or password.</p>");    
        }
    });

    return false;
}); 
```

这是 login.php 代码。

```
<?PHP
if(isset($_REQUEST['is_ajax']) && $_REQUEST['is_ajax']) {
    $is_ajax = $_REQUEST['is_ajax'];

    $uname = $_POST['username'];
    $pword = $_POST['password'];
    $uname = htmlspecialchars($uname);
    $pword = htmlspecialchars($pword);

    $user_name = "root";
    $pass_word = "root";
    $database = "test";
    $server = "127.0.0.1";

    $username = $_REQUEST['username'];
    $password = $_REQUEST['password'];

    $db_handle = mysql_connect($server, $user_name, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);
    $uname = quote_smart($uname, $db_handle);
    $pword = quote_smart($pword, $db_handle);
    $SQL = "SELECT * FROM login WHERE L1 =  $uname AND L2 = md5($pword)";
    $result = mysql_query($SQL);
    $num_rows = mysql_num_rows($result);
    if ($num_rows > 0) {
        echo "success"; 
    }

    mysql_close($db_handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:25:07.660

一些东西：

1.  在查询中使用之前，您需要清理用户输入。`htmlspecialchars`不这样做。使用`mysql_real_escape_string`（也许`quote_smart`这样做？）。
2.  您的 URL 没有被引用，因此它被解释为代码。加上`login.php`引号。
3.  确保您了解什么`$_POST`和`$_REQUEST`是什么。看起来您实际上并没有在任何地方使用`$username`或`$password`在任何地方使用，所以现在看起来这不会伤害您，但您应该知道数组的全部内容`$_POST`也可以在数组中找到`$_REQUEST`（以及`$_GET`and `$_COOKIE`）。
4.  对于调试，在您的 PHP 脚本中，您应该回显某种失败消息以查看脚本失败的位置，并且在您的 jQuery 脚本中，您应该将响应添加到您的失败消息中以查看实际响应是什么。

试试这个：

```
$("#login").click(function() {    
    var action = $("#form1").attr('action');
    var form_data = {
        username: $("#username").val(),
        password: $("#password").val(),
        is_ajax: 1
    };

    $.ajax({
        type: "POST",
        url: "login.php",
        data: form_data,
        success: function(response)
        {
            if(response == 'success')
                $("#form1").slideUp('slow', function() {
                    $("#message").html("<p class='success'>You have logged in successfully!</p>");
                });
            else
                $("#message").html("<p class='error'>Invalid username and/or password. (debugging, response = '". response ."'</p>");    
        }
    });

    return false;
}); 
```

登录.php：

```
if(isset($_POST['is_ajax']) && $_POST['is_ajax'])
{
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);

    $dbUsername = "root";
    $dbPassword = "root";
    $database = "test";
    $server = "127.0.0.1";

    $db_handle = mysql_connect($server, $dbUsername, $dbPassword);
    $db_found = mysql_select_db($database, $db_handle);
    $result = mysql_query("SELECT * FROM login WHERE L1 = '{$username}' AND L2 = MD5('{$password}')");
    $num_rows = mysql_num_rows($result);
    if ($num_rows > 0)
        echo "success";
    else
        echo "username '{$username}' and password '{$password}' not found";

    mysql_close($db_handle);
}
else
    echo "is_ajax = {$_POST["is_ajax"]}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:23:46.307

您的 PHP 不是很节省，并且可以与 GET/POST 一起使用，因为您使用的是`$_REQUEST`. 首先调试`login.php`，如果您收到任何 PHP 通知，您必须修复它们，因为它会改变您的 ajax 响应。

尝试在浏览器中运行它`yoursite.com/login.php?is_ajax=1&username=XXXX&password=XXXX`

`console.debug(response)`如果您在浏览器中只获得“成功”字样，那么通过添加到处理程序来查看 JavaScript 正在接收什么`success`。在 firebug 控制台或 chrome 控制台中预览值。

# linux - 将任意数据附加到 ELF 文件是否违反 ELF 规范？

> ID：10106447
> 
> 赞同：6
> 
> 时间：2012-04-11T13:03:15.023
> 
> 标签：linux, gcc, build, linker, elf

我想向 ELF 文件添加一些信息，但理想情况下，它需要以一种程序可以轻松读取此信息的方式完成，而无需了解 ELF 或使用普通标准语言库之外的工具。我正在考虑简单地将这些数据附加到 ELF 文件的末尾（使用某种标记来指示数据的开始，以便读取程序可以向后查找标记），但我想确保这不会首先违反 ELF 规范。我对特定加载器是否可以很好地处理此类附加数据不感兴趣；我想知道 ELF 规范本身是否有任何保证，以便我知道不同的 ELF 兼容加载器会对此感到满意。

我看到以前有人问过这样的问题，但要么假设这个附加是好的，要么没有直接的回应：

*   [访问附加到 ELF 二进制文件的数据](https://stackoverflow.com/questions/5660792/accessing-data-appended-to-an-elf-binary)
*   [添加源代码到elf文件](https://stackoverflow.com/questions/1818846/add-source-code-to-elf-file)

据我所知，ELF 规范在这里：

*   [http://www.muppetlabs.com/~breadbox/software/ELF.txt](http://www.muppetlabs.com/~breadbox/software/ELF.txt)

我无法通过几次搜索来确定我想要的属性是否被该规范明确允许。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T13:36:21.487

规范并没有真正说明它，所以有人可能会争辩说“有尾随数据是未定义的行为”。另一方面，ELF 规范对其期望相当清楚：“<em>节和段没有指定的顺序。只有 ELF 标头在文件中具有固定位置。”，这为以一种或另一种方式嵌入数据提供了足够的空间，使用一个部分，或者不使用一个 [这就是未引用的数据！]。

至少从 1980 年代末开始，这种“数据自由”就被利用了；考虑“自解压档案”，其中通用解包代码存根在尾随数据部分上放开。

事实上，即使在 RIFF 和 PNG 等不可执行的数据格式中，您也可以找到这样的隐含特征。当然，并非所有格式都允许这样做；特别是那些数据被定义为运行直到 EOF 而不是存储在某个标头中的固定长度的那些。（考虑 ZIP：附加数据是不可能的，但*前置*是可能的，这导致 EXE-ZIP 可以被*（*未修改的）解压缩程序*和*操作系统读取。）

像这样使用未引用的数据只有一个缺点：读取和保存文件时，您可能会丢失这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:44:28.273

将额外数据添加到 ELF 文件中可能是可以的（因为您可以向 ELF 添加新段和新部分），但您应该拥有（或改进）工具来处理“改进的”ELF，这可能是一个重要的负担。并且不要忘记很好地记录（如果可能，在可自由访问的文档中）您正在做的事情。

# java - 将 JAXB 注释类用于 JAXWS 服务

> ID：10106449
> 
> 赞同：3
> 
> 时间：2012-04-11T13:03:17.690
> 
> 标签：java, xml, web-services, jaxb, jax-ws

我有一个像这样工作的网络服务：

```
@WebService(serviceName = "TempService")
public class TempService {
  @WebMethod(operationName = "addBarkod")
  public Boolean addBarkod(@WebParam(name = "barkod") Barkod barkod) {
    System.out.println(barkod.getBarkodNo());
  }
} 
```

和 Barkod 类为：

```
public class Barkod {
  private String barkodNo;
// there are constructors and getters, setters etc. nothing fancy //
} 
```

使用这种结构，我的 Web 服务可以用soapUI 调用而不会出现问题。问题是当我想用 JAXB 注释来注释我的模型类时，例如：

```
@XmlType(name="barkod")
@XmlRootElement(name="barkod")
@XmlAccessorType(XmlAccessType.FIELD) 
```

我可以将它部署到 glassfish 3.1，soapUI 会生成具有新结构的新客户端请求，但是当涉及到“barkod.getBarkodNo();”时 在 addBarkod 操作时，它会抛出 NullPointerException。我看起来像我发送到 Web 服务的 XML 没有创建正确的 Barkod 对象。

我与网络服务类或其他东西有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:13:33.390

我认为问题是因为s​​oapUI 从我的WSDL 自动生成请求。当我在没有命名空间子句的情况下使用 @XmlRootElement 注释我的类时，它不会将给定的 XML 映射到可能的对象。我分配 @XmlRootElemen(namespace="") 并且我的问题消失了。

无论如何，感谢您的回复。

# javascript - 在 *iPad 上的 Safari 上按“返回”按钮时未收到“pageshow”

> ID：10106457
> 
> 赞同：13
> 
> 时间：2012-04-11T13:03:37.133
> 
> 标签：javascript, jquery, safari, mobile-safari

我有以下处理程序：

```
 $(window).bind('pageshow', function() { alert("back to page"); }); 
```

当我离开页面（通过按下链接）并返回页面（通过按下*“返回”*按钮）时，不会调用*alert() （iPad 2，iOS 5.1）。*

请问我做错了什么？我需要绑定的任何其他事件？

PS：有趣的是，在离开页面时会正确接收页面*隐藏。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T23:59:48.517

您可以检查事件的`persisted`属性`pageshow`。它在初始页面加载时设置为 false。从缓存加载页面时，它设置为 true。

```
window.onpageshow = function(event) {
    if (event.persisted) {
        alert("back to page");
    }
}; 
```

由于某种原因，jQuery 在事件中没有这个属性。您可以从原始事件中找到它。

```
$(window).bind("pageshow", function(event) {
    if (event.originalEvent.persisted) {
      alert("back to page");
    }
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T13:51:23.387

这可能是一个缓存问题。当您通过“返回”按钮返回页面时，页面将从缓存中拉出（行为取决于浏览器）。因此，您的 JS 不会触发，因为页面已经在缓存中呈现并且重新运行您的 js 可能对布局等有害。

您应该能够通过调整响应中的缓存标头或使用一些浏览器技巧来克服这个问题。

以下是有关该问题的一些链接：

*   [单击后退按钮时是否存在跨浏览器 onload 事件？](https://stackoverflow.com/questions/158319/cross-browser-onload-event-and-the-back-button)
*   [回到 Firefox 历史后，JavaScript 将无法运行](https://stackoverflow.com/questions/2638292/after-travelling-back-in-firefox-history-javascript-wont-run)

**编辑**

这些都是从上面的链接中提取的：

*   `history.navigationMode = 'compatible';`
*   `<body onunload=""><!-- This does the trick -->`
*   “Firefox 1.5+ 和一些下一个版本的 Safari（其中包含对错误 28758 的修复）支持称为`pageshow`and的特殊事件`pagehide`。”
*   使用 jQuery 的`$(document).ready(handler)`
*   `window.onunload = function(){};`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-11T13:15:08.123

你在那里做的是将返回值绑定`alert("back to page")`为回调。那是行不通的。您需要绑定一个函数：

```
$(window).bind('pageshow', function() { alert("back to page"); }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-17T15:11:06.340

我添加了相同的问题，即 iOS 在返回时并不总是发布“pageshow”事件。

如果没有，safari 会继续在页面上执行 JS，所以我认为计时器会继续触发。

所以我提出了这个解决方案：

```
var timer;

function onPageBack() { alert("back to page"); }

window.addEventListener('pageshow', function() {
    if (event.persisted)
        onPageBack();

    // avoid calling onPageBack twice if 'pageshow' event has been fired...
    if (timer)
        clearInterval(timer);
});

// when page is hidden, start timer that will fire when going back to the page...
window.addEventListener('pagehide', function() {
    timer = setInterval(function() {
        clearInterval(timer);
        onPageBack(); 
    }, 100); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-27T12:16:31.250

我就这样解决了这个问题；

```
$(window).bind("pageshow", function () {

    setTimeout(function () {
        back();
    }, 1000);

});

function back() {
   //YOUR CODES
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-29T11:08:28.173

你应该检查你的页面是否有 iFrame 组件？我不知道为什么，但我删除了 iFrame 组件来解决这个问题

# javascript - 仅在具有特定缩放级别的 OpenLayers Vector 上显示功能

> ID：10106462
> 
> 赞同：5
> 
> 时间：2012-04-11T13:04:02.157
> 
> 标签：javascript, openlayers

如何根据缩放级别在矢量图层上显示特征？

例如：我只想在缩放两次时才能看到矢量图层上的特征。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:36:57.543

看看这个[文档](http://trac.osgeo.org/openlayers/wiki/SettingZoomLevels)

通过使用[minScale](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.minScale)和[maxScale](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.maxScale)。

您也可以使用 minResolution 和 maxResolution，但似乎使用比例更好。

```
minScale - float -- the minimum scale value at which the layer should display

maxScale - float -- the maximum scale value at which the layer should display

maxResolution - float -- the maximum resolution value at which the layer should display

minResolution - float -- the minimum resolution value at which the layer should display 
```

# vba - 列名中的 Excel 列号

> ID：10106465
> 
> 赞同：77
> 
> 时间：2012-04-11T13:04:15.347
> 
> 标签：vba, excel

如何使用 Excel 宏从 Excel 中的列名中获取列号？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-04-11T13:48:07.177

我想你想要这个？

**列名到列号**

```
Sub Sample()
    ColName = "C"
    Debug.Print Range(ColName & 1).Column
End Sub 
```

**编辑**：还包括你想要的相反

**列号到列名**

```
Sub Sample()
    ColNo = 3
    Debug.Print Split(Cells(, ColNo).Address, "$")(1)
End Sub 
```

**跟进**

> > > 就像如果我在最顶部有薪水字段现在可以在单元格 C(1,1) 中说如果我更改文件并将薪水列转移到其他地方说 F(1,1) 那么我将不得不修改代码所以我希望代码检查 Salary 并找到列号，然后根据该列号执行其余操作。

在这种情况下，我建议使用`.FIND`下面的示例

```
Option Explicit

Sub Sample()
    Dim strSearch As String
    Dim aCell As Range

    strSearch = "Salary"

    Set aCell = Sheet1.Rows(1).Find(What:=strSearch, LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        MsgBox "Value Found in Cell " & aCell.Address & _
        " and the Cell Column Number is " & aCell.Column
    End If
End Sub 
```

快照

![在此处输入图像描述](../Images/75fd19c2c90093aaa5117d10c1cb43bf.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-07T15:02:30.260

当您在寻找 VBA 解决方案时，这是我在寻找公式解决方案时在谷歌上的最佳结果，所以我会为任何像我一样来到这里的人添加这个：

**Excel 公式从列字母**返回数字（来自@A. Klomp 上面的评论），其中单元格 A1 包含您的列字母：

> =列（间接（A1＆“1”））

由于间接函数是易失的，它会在任何单元格更改时重新计算，因此如果您有很多这样的函数，它可能会减慢您的工作簿。考虑另一种解决方案，例如“code”函数，它为您提供 ASCII 字符的编号，从 65 处的“A”开始。请注意，要执行此操作，您需要检查列名中有多少位数字，并且根据“A”、“BB”或“CCC”改变结果。

Excel 公式从数字返回**列字母**（来自上一个问题[How to convert a column number (eg. 127) into an excel column (eg. AA)](https://stackoverflow.com/questions/181596/how-to-convert-a-column-number-eg-127-into-an-excel-column-eg-aa)，由@Ian 回答），其中 A1 保存您的列号：

> =替代（地址（1，A1，4），“1”，“”）

请注意，无论列名中有多少个字母，这两种方法都有效。

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-09T08:52:05.057

您可以跳过所有这些，只需将您的数据放在一个表中。然后参考表格和标题，它将是完全动态的。我知道这是 3 年前的，但有人可能仍然觉得这很有用。

示例代码：

```
Activesheet.Range("TableName[ColumnName]").Copy 
```

您还可以使用：

```
activesheet.listobjects("TableName[ColumnName]").Copy 
```

您甚至可以在工作表公式中使用此参考系统。它非常有活力。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-21T09:16:57.577

在即时窗口中编写并运行以下代码

```
?cells(,"type the column name here").column 
```

例如`?cells(,"BYL").column`将返回 2014。代码不区分大小写，因此您可以编写`?cells(,"byl").column`并且输出仍然相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-26T08:15:38.233

基于阿纳斯塔西娅的回答。我认为这是最短的 vba 命令：

```
Option Explicit

Sub Sample()
    Dim sColumnLetter as String
    Dim iColumnNumber as Integer

    sColumnLetter = "C"
    iColumnNumber = Columns(sColumnLetter).Column

    MsgBox "The column number is " & iColumnNumber
End Sub 
```

警告：此代码起作用的唯一条件是工作表处于活动状态，因为`Columns`等效于`ActiveSheet.Columns`. ;)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-03T14:48:59.940

这是一个纯 VBA 解决方案，因为 Excel 可以保存连接的单元格：

```
Public Function GetIndexForColumn(Column As String) As Long
    Dim astrColumn()    As String
    Dim Result          As Long
    Dim i               As Integer
    Dim n               As Integer

    Column = UCase(Column)
    ReDim astrColumn(Len(Column) - 1)
    For i = 0 To (Len(Column) - 1)
        astrColumn(i) = Mid(Column, (i + 1), 1)
    Next
    n = 1
    For i = UBound(astrColumn) To 0 Step -1
        Result = (Result + ((Asc(astrColumn(i)) - 64) * n))
        n = (n * 26)
    Next
    GetIndexForColumn = Result
End Function 
```

基本上，此函数与任何 Hex 到 Dec 函数的功能相同，只是它只需要字母字符（A = 1，B = 2，...）。最右边的 char 计为单个，左边的每个 char 是右边 char 的 26 倍（这使得 AA = 27 [1 + 26]，AAA = 703 [1 + 26 + 676]）。UCase() 的使用使该函数不区分大小写。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2017-05-11T10:07:59.200

在我看来，获取列号的最简单方法是：
`Sub Sample() ColName = ActiveCell.Column MsgBox ColName End Sub`

# java - 如何在不使用 Maven 的情况下设置 Selenium WebDriver？

> ID：10106467
> 
> 赞同：0
> 
> 时间：2012-04-11T13:04:23.400
> 
> 标签：java, ant, selenium, webdriver, testng

我目前正在研究一个非常复杂的 Selenium RC 框架。它是在我被其他一些现在无法联系到的人使用之前设置的。我的计划是升级到 WebDriver。为此，我需要能够使用旧的 RC API，所以我将使用 RemoteWebDriver。是否有任何我可以下载的 JAR，其中包含我的计划所需的一切？如果从现在开始我要使用 FireFoxDriver、IExplorerDriver 和 Chrome 驱动程序的新测试呢？我需要下载哪些 JAR，从哪里获取它们以及如何正确设置它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:33:25.517

我总是参考谷歌代码页，因为我觉得它更舒服，而且总是包含最新的更新。

[http://code.google.com/p/selenium/downloads/list](http://code.google.com/p/selenium/downloads/list)

从文档中复制粘贴：

**selenium-java-2.20.0.zip**
Selenium 2 的 Java 绑定，包括 WebDriver API 和 Selenium RC 客户端。如果您打算仅使用 Selenium 的客户端部分，请下载此文件

**selenium-server-2.20.0.zip**
Selenium 服务器的所有变体：独立的、带有依赖项和源的 jar。

**编辑** 关于如何设置它，如果您使用的是 Eclipse，
*请右键单击您的项目 -> 单击属性 -> java 构建路径 -> 添加外部 jar*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T21:18:28.617

更好的方法是使用 WebDriverBackedSelenium 来使用 Selenium 和 webdriver 的优点。这也可能会减少您的升级时间。示例代码：

```
WebDriver driver = new FirefoxDriver();
Selenium selenium = new WebDriverBackedSelenium(driver, "http://www.yoursite.com"); 
```

顺利升级的最佳官方链接：http: [//seleniumhq.org/docs/appendix_migrating_from_rc_to_webdriver.html](http://seleniumhq.org/docs/appendix_migrating_from_rc_to_webdriver.html)

# mysql - 将 MySQL 时间戳字段转换为 SQL Server 2005 日期字段

> ID：10106468
> 
> 赞同：0
> 
> 时间：2012-04-11T13:04:27.083
> 
> 标签：mysql, sql, sql-server

我已经在谷歌上搜索了一个多小时，没有任何运气。

通过 CSV 将 MySQL 数据库导入 MS SQL Server 2005，其中 Tstamp（时间戳）字段一直困扰着我。

如何将 tstamp 字段转换为 SQL 日期字段？

```
Select *,
  DATEADD(SECOND, field8047, 1970/01/01) as datetime_created_calc
  From [Majestic].[dbo].[hdiyouth] 
```

新错误消息：消息 8116，级别 16，状态 1，第 1 行参数数据类型 varchar 对于 dateadd 函数的参数 2 无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:42:02.337

我猜 field8047 是一个`varchar`字段。

试试这个：

```
Select *,
  DATEADD(SECOND, cast(field8047 as int), '19700101') as datetime_created_calc
  From [Majestic].[dbo].[hdiyouth] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:33:46.733

假设您有一个表示数字类型的 VARCHAR()，并且该数字类型表示从固定日期开始的秒数。

将您的 VARCHAR() 转换为数字类型。

然后在 DATEADD() 中使用该数字。

如果数字太大，请将其分成 DAYS 和 SECONDS。

```
SELECT
  DATEADD(
    DAYS,
    CAST([hdiyouth].[Tstamp] AS BIGINT) / (60*60*24),
    DATEADD(
      SECONDS,
      CAST([hdiyouth].[Tstamp] AS BIGINT) % (60*60*24),
      0
    )
  )
FROM
  [Majestic].[dbo].[hdiyouth] 
```

如果它给出了正确的时间，但错误的日期，请将其更改为`0`您的时间戳应该基于的任何日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:36:38.967

将您的字段转换为整数。

```
Select  DATEADD(SECOND, CAST(field8047 AS INTEGER), '1970/01/01')
Select  DATEADD(SECOND, CAST('60' AS INTEGER), '1970/01/01') 
```

# opengl - 你能在 OpenGL 中创建几个投影纹理吗？

> ID：10106470
> 
> 赞同：0
> 
> 时间：2012-04-11T13:04:39.427
> 
> 标签：opengl, 3d

是否可以在 open gl 中创建多个投影纹理？我已经在[http://www.sgi.com/products/software/opengl/examples/glut/advanced/](http://www.sgi.com/products/software/opengl/examples/glut/advanced/) (projtest.c) 尝试了演示，但我不知道它是否可以扩展到多个实例。我见过的所有演示都只使用一种投影纹理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:06:31.403

您可以使用任意数量的投影纹理。

# c++ - clBuild 选项，传递 OpenCL 扩展

> ID：10106475
> 
> 赞同：1
> 
> 时间：2012-04-11T13:05:00.103
> 
> 标签：c++, c, opencl

我环顾四周，找不到解决相对简单的 OpenCL 相关问题的方法。

问题是，我刚开始在我的 OpenCL 内核中使用双精度，因为我当前的项目需要这么高的精度。此外，我正在尝试管理所有内容，以便所有内核都具有它们可以使用的相同#DEFINES。

然后我来到了扩展。通过 OpenCL，我必须包括

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable 
```

如何将其包含在 clBuildProgram 的构建选项中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T17:24:20.453

您可以从使用 CL_DEVICE_EXTENSIONS 调用的主机检查设备支持的扩展`clGetDeviceInfo`（OpenCL 1.1 规范的第 4.2 节）。如果支持扩展，返回的字符串将包含“cl_khr_fp64”。

使用 编译 OpenCL 代码时`clBuildProgram`，如果支持扩展，编译器会定义“cl_khr_fp64”（OpenCL 1.1 规范的第 9.1 节）。

要在 OpenCL 代码中启用扩展，您必须包含 pragma 行。您可以通过将选项传递给`clBuildProgram`, like来控制主机代码中扩展的使用`-D USE_FP64=1`，然后在 OpenCL 代码中对其进行测试：

```
#if USE_FP64
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
#endif 
```

# c++ - 如何在庞大的代码库中找到悬空的命名空间或预处理器指令

> ID：10106478
> 
> 赞同：4
> 
> 时间：2012-04-11T13:05:23.670
> 
> 标签：c++, visual-studio, visual-studio-2010

我们怀疑我们的代码中有这样的东西，

所以也许`#ifdef`没有 the`#endif`或者没有命名空间 foo `{`，`}`有什么策略可以在包含数十万个文件的代码库中定位这样的东西，有没有办法使用正则表达式？

编辑 - 忘了提（这是真正邪恶的部分）在这段代码中生成了我们所说的统一文件，它们将每个 cpp 文件拉到一个大的超级 cpp 文件中。因此编译器可能不会报告丢失的大括号或不匹配的 else/ifs，因为它们很容易运行到接下来的几亿行代码中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:00:27.810

> 如何在庞大的代码库中找到悬空的命名空间或预处理器指令

在 Visual Studio 中按下`Ctrl+]`将导致光标跳转到匹配的大括号或 endif 语句。当你找到一个光标不能跳转的大括号时，它是“悬空的”。另外，您可以折叠部分代码，这可以帮助您找到不匹配的大括号。

我还建议阅读实际的编译器输出而不是错误列表。

> 拥有数十万个文件

在第一个错误处终止编译，调查导致错误的文件，修复错误，再次尝试编译。使用“编译”而不是“构建解决方案”一次编译一个文件。“要求”编译器生成插入包含文件的输出列表（VS2008 cl.exe 中的 /E 或 /P 开关），然后调查生成的文件。

如果这也不起作用，您将不得不花一些时间编写一个用 python/perl 编写的小型解析器 - 用于检查匹配大括号的解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:12:39.160

正则表达式无法真正找到匹配的大括号，特别是如果它们是嵌套的。

我认为最好的方法是确保所有代码都正确缩进，然后很容易看到什么时候丢失了。

除此之外，它是体力劳动匹配的开始和结束。希望它只需要很少做。另请注意，大多数面向编码的现代文本编辑器都非常擅长匹配大括号和括号等内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:12:57.137

编译器和预处理器*会*抱怨不匹配的`#if / #endif`对或不匹配的大括号。找到编译器抱怨的第一个文件并手动“捏造”它，直到它编译为止。

（不，标准正则表达式不能匹配嵌套到任意深度的对。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T15:38:11.360

两步流程：

1.  使用常规构建（不是可怕的统一构建）来定位错误
2.  如果您的编译器没有使用适当的标志捕获错误，请切换到另一个

请注意，使用智能编译器，它甚至可以使用统一构建。

与 Clang 一起使用`-Wscope`时，如果作用域（例如命名空间）从文件（例如标头）开始，但没有结束，您会收到警告。可以在[邮件列表](http://www.mail-archive.com/cfe-commits@cs.uiuc.edu/msg46504.html)中找到引入此补丁的补丁。它将在 3.1 版本中提供。

我认为 Clang 中没有对应的预处理器指令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T15:07:14.950

答案是不要（有效地）将 100000 个文件粘贴到一个文件中，以便在每个文件编译时，编译器会在结束时立即知道存在不匹配的内容。然后使用生成的错误消息和正常的代码检查来查找丢失的指令或大括号应该是微不足道的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T13:39:34.733

这无论如何都不是一个完整的答案，但我确实发现使用这个正则表达式很有帮助：

`// *\#if|\#el|\#en`

它搜索 // 后跟任意数量的空格（包括无），然后是 #if、#el 或 #en（以排除抛出所有 pragma 等的可能性 - 这绝对可以改进。

幸运的是，我只需要在打开的文档中进行搜索，这有数百个，但可能会更糟。希望这对将来的某人有所帮助，这太可怕了！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-14T14:24:27.573

这可能与您的问题无关，但是在 #if/#else/#endif 块中构建一些头文件时出现“意外的 #else”错误。

我发现如果我将问题模块设置为不使用预编译头文件，问题就会消失。与“#pragma hdrstop”有关的内容不应包含在#if/#endif 中。

# c# - 选择年龄最接近数字的最高年龄

> ID：10106480
> 
> 赞同：4
> 
> 时间：2012-04-11T13:05:30.327
> 
> 标签：c#, .net, linq

认为我一直在看我的代码太多。

但我的问题是我有一个无序列表，我需要选择接近或等于输入的最高数字的对象。

我创建了这个小样本来说明我想要做什么。

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}

var persons = new List<Person>
{
    new Person {Age = 10, Name = "Aaron"},
    new Person {Age = 15, Name = "Alice"},
    new Person {Age = 20, Name = "John"},
    new Person {Age = 22, Name = "Bob"},
    new Person {Age = 24, Name = "Malcom"}
};

int i = 17; //should return 'Alice 15'    
int y = 22; //should return 'Bob 22 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T13:07:15.883

```
var person = persons.Where(p => p.Age <= input).OrderByDecending(p => p.Age).First(); 
```

这首先排除大于`input`（您的`i`或`y`）的那些。然后开始对它们进行排序，然后只取第一个结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:11:27.823

比使用 MoreLinq 项目对整个集合进行排序（在大型输入集合上可能很昂贵）更有效[`MaxBy`](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/MaxBy.cs)：

```
var person = persons.Where(p => p.Age <= input)
                    .MaxBy(p => p.Age); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:10:34.593

```
var nearest = persons.OrderBy(p => Math.Abs(p.Age - i)).First(); 
```

这将返回年龄最接近输入值的人，[`Math.Abs`](http://msdn.microsoft.com/en-us/library/system.math.abs%28v=vs.100%29.aspx)以获取绝对差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:08:34.673

您遍历列表并存储 int 减去 Age 的绝对值。将 Person 存储在变量中，直到出现差异较小的人。如果相同，则存储年龄较大的那个。完毕。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:15:43.007

这是我的一个例子，它应该可以帮助你

```
 List<int> list = new List<int> { 10, 15, 20, 22, 24 };
        int number = 17;
        int closest = list.Aggregate((x, y) => Math.Abs(x - number) < Math.Abs(y - number) ? x : y);
        Label2.Text = closest.ToString(); 
```

# ios - 需要左值作为 ios 中赋值的左操作数

> ID：10106481
> 
> 赞同：2
> 
> 时间：2012-04-11T13:05:44.290
> 
> 标签：ios, variable-assignment, lvalue, operand

这是我的代码

```
[[X objectAtIndex:i] doubleValue] = ([[X objectAtIndex:i-1]doubleValue] * [[X objectAtIndex:1]doubleValue]); 
```

其中 X 是双精度数组

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:11:10.777

对于设置值，您必须使用 set 方法，如下所示：

```
double d = [[X objectAtIndex:i-1] doubleValue] * [[X objectAtIndex:1] doubleValue];
[[X objectAtIndex:i] setDoubleValue:d]; 
```

# android - 我可以在单击列表时关闭警报对话框吗？

> ID：10106485
> 
> 赞同：7
> 
> 时间：2012-04-11T13:06:09.547
> 
> 标签：android, android-alertdialog

我有一个警报对话框，上面有一个列表，我想关闭 onlistclick 可能吗？

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);

    final String[] Categories = SQLiteHelper.getAllCategories();//this is where i get the array for my list
    ListView myList = new ListView(this);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.alert_dialog_list_view, Categories);
    myList.setAdapter(adapter);
    myList.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long rowId) {
                     //doing something in here and then close
         }
    });
    builder.setTitle("Please Choose");
    builder.setInverseBackgroundForced(true);
    builder.setView(myList);
    final Dialog dialog = builder.create();
    dialog.show();
    } 
```

警报对话框运行完美，我只是不想在其中放置任何按钮。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T13:12:39.483

如果你在之后定义你`onItemClickListener` *可以*`Dialog`在`dialog.dismiss();`方法中调用`onItemClick()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:13:44.333

检查下面的代码

```
 myList.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long rowId) {

              //doing something in here and then close
              dialog.dismiss();
         }
    }); 
```

# android - Android，实时更新视图重叠旧视图

> ID：10106490
> 
> 赞同：1
> 
> 时间：2012-04-11T13:06:26.893
> 
> 标签：android, view, runtime, updating, overlapping

我在尝试更新进度条时遇到问题。当我更新进度条时，就好像更新后的视图覆盖了当前视图。即使我通过 ID 获取视图。我会假设它正在更新当前视图，因此应该丢弃当前存在的内容。例如，将进度从 80 更改为 30 到 25，结果如下：

[http://i.stack.imgur.com/UnUvA.png](http://i.stack.imgur.com/UnUvA.png)

下面被多次调用。cursor.getInt(4) 将根据用户的操作返回不同的值。

我的手机运行的是 android 2.3.7

```
ProgressBar bar = (ProgressBar) findViewById(R.id.progressbar);
int rating = cursor.getInt(4);
bar.setProgress(rating); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:46:55.360

问题是有一个主题设置为属性@null 作为windowBackground。

这意味着背景没有被重绘，因此更新的项目似乎被绘制在当前项目之上。

```
<item name="android:windowBackground">@null</item> 
```

# jquery - 如何更改日期格式？

> ID：10106492
> 
> 赞同：0
> 
> 时间：2012-04-11T13:06:35.117
> 
> 标签：jquery

我在以下格式的 sting 对象中有日期。

日/月/年

我想在 jquery 的 mm/dd/yyyy 中更改它。

有什么建议么？

将不胜感激帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:09:28.657

关于什么：

```
var mydate = 'dd/mm/yyyy'.split('/'),
    newdate = mydate[1]+'/'+mydate[0]+'/'+mydate[2]; 
```

# php - 如何在 PHP 中使用 return 获得响应并在 jquery 中使用它

> ID：10106493
> 
> 赞同：0
> 
> 时间：2012-04-11T13:06:35.433
> 
> 标签：php, jquery

以下jquery是检查数据库中是否有用户名和电子邮件。当我回显 false 或 ture 时，jquery 可以工作，但它会给出 PHP 错误。所以我只想从 PHP 代码中返回 false 或 true。但是当我这样做时，jquery 不起作用。

我在这里做错了什么？

提前致谢。

jQuery

```
$(document).ready(function(){
$("#name").blur(function()
{
    var nameval = $(this).val();
    if(nameval)
    {
        ...
        ...
        //check the username exists or not from ajax
        $.post("<?php echo site_url('welcome/user_availability'); ?>",{ what:$(this).val(), where:"name" } ,function(data)
        {   
            if(data==false) //if username not avaiable
            {
                $("#msgbox").fadeTo(200,0.1,function() //start fading the messagebox
                {
                //add message and change the class of the box and start fading
                $(this).html('This User name Already exists').addClass('messageboxerror').fadeTo(900,1);
                });
            }
            else
            {
                $("#msgbox").fadeTo(200,0.1,function()  //start fading the messagebox
                {
                    //add message and change the class of the box and start fading
                    $(this).html('Username available to register').addClass('messageboxok').fadeTo(900,1);
                });
            }

        });
    } 
    else
    {
        $("#msgbox").fadeTo(200,0);
    }       
});
 ...
 ... 
```

PHP

```
function user_availability()
{
    $module = "subscribers";
    $where = $this->input->post('where');
    $what = $this->input->post('what');
    $customers = $this->MKaimonokago->getAllSimple($module, $where , $what );
    if (!empty($customers))
    {
     //user name is not available
        return false; // I want to use return here.
       // this works but it gives php error
       // echo "false";
    }
    else
    {
        return true;
    }    
} 
```

PHP 错误

```
ERROR - 2012-04-11 21:43:06 --> Severity: Warning  --> Cannot modify header information - headers already sent by (output started at /Applications/MAMP/htdocs/kaimonokago2.0/application/modules/welcome/controllers/welcome.php:1084) /Applications/MAMP/htdocs/kaimonokago2.0/system/core/Output.php 391 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:20:15.613

您描述的错误与 HTTP 标头有关。当您尝试调用`header()`时`session_start()`或`setcookie()`在第一个 echo 语句之后，通常会出现错误。请注意，`<?php`标记前的空行也会打印换行符。

你不能用 return 语句打印一些东西，在你应该有一个`echo`或`print()`返回值的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:08:37.630

尝试：

```
// in php
echo(json_encode(TRUE)); 
```

# behat - 使用 behat 生成自定义步骤

> ID：10106498
> 
> 赞同：0
> 
> 时间：2012-04-11T13:06:56.353
> 
> 标签：behat

我尝试编写一个生成步骤的自定义步骤

我的代码看起来像：

```
/**
 * @Then /^Check_raoul$/
 */
public function checkRaoul()
{
    // grab the content ...

    // get players ...
    $to_return = array();
    foreach ($players as $player) {
        $player = $player->textContent;
        if (preg_match('/^.*video=([^&]*)&amp;.*$/', $player, $matches))
        {
            array_push($to_return, new Step\Then('I check the video of id "'.$matches[1].'"'));
        }
    }
    return $to_return;
}

/**
 * @Then /^I check the video of id "([^"]*)"$/
 */
public function iCheckTheVideoOfId($id)
{
// ...
} 
```

工作正常，但是当集成到 jenkins 或 un cli 时，如果 iCheckTheVideoOfId 的多次执行失败，我只会看到一个错误。我希望生成的步骤数等于 iCheckTheVideoOfId 调用的数量

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:08:13.733

由于测试反馈的呈现方式和 Jenkins 的能力不同，我们放弃了使用 Jenkins 进行 BDD 检查。我们发现，仅在本地运行我们的套件，然后在将代码推送到 repo 之前进行全面检查会产生更好的结果，并帮助每个人更好地使用该框架。

要直接回答您的问题，我建议将您的 jenkins 作业配置为在测试失败时不会失败。这可以通过根本不输出结果来实现。您可以修改您的命令行选项以完全不输出失败，而只是将结果记录到输出文件中。然后，您可以在最后运行一个脚本来检查故障。

# java - 如何在java中扩展数据类型

> ID：10106500
> 
> 赞同：0
> 
> 时间：2012-04-11T13:07:02.807
> 
> 标签：java

我如何在 java 中创建自己的数据类型来存储一个 16 字节的整数值

java中最长的数据类型是“long”，它是8字节，它可以存储19位整数值，但是，我想找到25的阶乘，25的阶乘是26位（15511210043330985984000000）。现在的问题是我在 java 中没有这样的数据类型可以存储如此巨大的 26 位或更多位的值。

如果有的话

```
public long factorial(int number)
{
    int i=1;
    long factorial=1;

    for(i=1;i<=number;i++)
    {
        factorial = factorial * i; 
    }
    return factorial;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:08:39.197

> 现在的问题是我在 java 中没有这样的数据类型可以存储如此巨大的 26 位或更多位的值。

你看过[`java.math.BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)吗？请注意，这是一个类（引用类型）而不是值类型，但它是不可变的，这意味着您可以认为它有点像值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T13:08:50.277

> 现在的问题是我在java中没有这样的数据类型可以存储如此巨大的价值

这并不完全正确。有[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)。

有关[使用](https://stackoverflow.com/a/8992471/367273)`BigInteger`. _

# php - 为什么我不能从 php 脚本中删除文件？

> ID：10106504
> 
> 赞同：0
> 
> 时间：2012-04-11T13:07:16.317
> 
> 标签：php, linux, filesystems, delete-file

基本上，我正在使用 php 脚本代理文件，然后直接删除它......只是，文件没有被删除，我不知道为什么。

这有点脱离上下文，因此，如果您需要，很乐意解释更多。

```
exec("wget http://xxxx/123_" .$matches[1] . " --no-check-certificate -P /usr/share/nginx/www/" );

$file = "/usr/share/nginx/www/123_" . $matches[1];

if (file_exists($file)) {
    header('Content-Type: text/plain');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exec("rm /usr/share/nginx/www/123_" . $matches[1] );

    exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:28:02.373

试试这段代码，它不会创建需要删除的本地文件：

```
// Define URL
$url = "http://xxxx/123_{$matches[1]}";

// Open pointer to remote resource
if (!$remoteFP = @fopen($url, 'r')) {
  header("{$_SERVER['SERVER_PROTOCOL']} 500 Internal Server Error");
  exit;
}

// Get content length and type from remote server's headers
$length = $type = NULL;
foreach ($http_response_header as $header) { // Loop headers (see http://php.net/manual/en/reserved.variables.httpresponseheader.php)
  list($name, $val) = explode(':', $header, 2); // Split to key/value
  switch (strtolower(trim($name))) { // See if it's a value we want
    case 'content-length':
      $length = (int) trim($val);
      break;
    case 'content-type':
      $type = trim($val);
      break;
  }
  if ($length !== NULL && $type !== NULL) break; // if we have found both we can stop looping
}

// Send headers
if ($type === NULL) $type = 'text/plain';
header("Content-Type: $type");
if ($length) header("Content-Length: $length"); // Only send content-length if the server sent one. You may want to do the same for content-type.

// Open a file pointer for the output buffer
$localFP = fopen('php://output', 'w');

// Send the data to the remote party
stream_copy_to_stream($remoteFP, $localFP);

// Close streams and exit
fclose($remoteFP);
fclose($localFP);
exit; 
```

这使用`fopen()`了 cURL 等方法，因为它允许将实体直接转发到输出缓冲区，以及在完全接收到正文之前访问远程服务器的响应标头。这是使用 PHP 进行代理的最节省资源的方式。

如果您的服务器已`allow_url_fopen`禁用，您可以使用 cURL，它还允许您将数据直接传递到输出缓冲区，但不允许您解析和转发来自远程服务器的标头。

# linux - Linux/CentOS：如何强制 FTP/SSH 使用特定的以太网适配器

> ID：10106505
> 
> 赞同：4
> 
> 时间：2012-04-11T13:07:18.820
> 
> 标签：linux, networking, ethernet

我们有一个带有 2 个以太网适配器的 CentOS 服务器。这两个适配器都可以访问 Internet，并且都可以用于连接到远程站点。

有没有办法知道在连接到 FTP 服务器或通过 SSH 连接到另一台服务器时将使用哪个以太网适配器？如果是这样，有没有办法强制它使用特定的适配器而不禁用任何适配器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:13:14.090

也许您可以为要连接的服务器设置一个特殊的路由？查看 route 命令或“ip route”命令。

编辑：这似乎包含我所说的一个例子：[http ://www.cyberciti.biz/faq/howto-linux-configuring-default-route-with-ipcommand/](http://www.cyberciti.biz/faq/howto-linux-configuring-default-route-with-ipcommand/)

具体来说：

> 键入以下命令将所有数据包发送到本地输入代码herenetwork 192.168.1.0直接通过设备eth0:，输入

```
ip route add 192.168.1.0/24 dev eth0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:18:43.233

对于 ssh，您可以使用`BindAddress`ssh_config 选项。`-o`您可以使用该选项在命令行上指定它。

# rest - 在带有 HTTP 状态代码 405 的 REST API 中返回什么错误消息？

> ID：10106506
> 
> 赞同：1
> 
> 时间：2012-04-11T13:07:23.733
> 
> 标签：rest, http-status-code-405

如果应该返回任何带有状态码 405 的错误消息，它应该说什么？我怀疑我们不应该返回任何东西，但只是为了确保有任何最佳实践吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:42:45.910

鉴于这`405`意味着`Method not allowed`，任何熟悉 HTTP 或其他 RESTful API 的人都非常清楚它的含义。

但是，并非所有使用您的 API 编写软件的客户都可能具有这种先前的经验，因此可能值得在响应中返回一条消息，例如*“此资源不支持 HTTP 方法 PUT”。*

您可能还想在返回的消息中包含一个提示，告诉用户调用`OPTIONS`以找出支持的方法，假设您是这样实现的。

# facebook - facebook graph api 将照片上传到用户的个人资料

> ID：10106509
> 
> 赞同：0
> 
> 时间：2012-04-11T13:07:35.410
> 
> 标签：facebook, facebook-graph-api

我已经购买了这个脚本，它从我的网站上传图片到用户的 facebook 帐户，不幸的是，这个脚本不支持，我的脚本有问题。每次我点击链接上传图片时，图片都会成功上传到用户帐户，但如果上传后刷新页面或点击任何其他链接，图片会再次上传。这是我的 index.php 和 fb_wrapper_class.php 代码

```
<?php

/* =============================================================================

    Example 1: This example covers the basics of uploading a photo to facebook.
        It uses the same code covered in part B, "Usage", of the guide.

    In order to run this example on your own system, be sure to update the 
    App id & secret id in the config.php and the $redirectURL variable, below,
    to your own path.

                                PLEASE NOTE:

    !!!!  This example is basic and offers no feedback of the results.  !!!!
                It's purpose is to show the minimal code required

============================================================================= */

    // *** Use these for development only   
    ini_set('display_errors',1);
    error_reporting(E_ALL | E_STRICT);

    // *** Include these files
    require_once('fb-image-upload/config.php');
    require_once('fb-image-upload/fb_wrapper_class.php');

    /* 
     *  You would normally use redirect URL from the config.php (REDIRECT_URL).
     *  But as I'm using various different example files, each needs there own
     *  redirect URL so I've defined each one in their own file.
     */
    $redirectURL = "http://localhost/playground/fb-class-final/1_example_documentation_basics.php";

    // *** Create object
    $fbObj = new FaceBookWrapper(APP_ID, SECRET_ID, $redirectURL);

    // *** Include a login button
    echo '<a href="' . $fbObj->getLoginURL() . '">Login</a>'; 

    // *** Add photo
    $fbObj->addPhoto('fb-image-upload/assets/test.jpg', 'test image', 'Test album', 'Testing 1, 2, 3');

    // *** Show any errors 
    echo $fbObj->getError();
?> 
```

fb_wrapper_class.php

```
<?php

class FaceBookWrapper
{
    // *** Required settings
    private $_appId;
    private $_secretId;
    private $_redirectURL;
    private $_userId;

    // *** Facebook Object
    private $_facebookObj;

    private $_user;

    private $_errorArray = array();
    private $_debugArray = array();

    private $permissions = 'user_about_me, user_photos, friends_photos, publish_stream, publish_actions';

    /*
        Thanks to DMGV for this one: I put “publish_stream and publish_actions” together in $permissions and now i can post without approve!
    */
## _____________________________________________________________________________    
## ________                _____________________________________________________
## ________ PUBLIC METHODS _____________________________________________________
## _____________________________________________________________________________
##      

    public function __construct($appId, $secretId, $redirectURL, $userId='me', $cookies=true)
    {
        $this->_appId = $appId;
        $this->_secretId = $secretId;
        $this->_redirectURL = $redirectURL;
        $this->_userId = $userId;

        // *** Unset facebook user id
        $user = null; 

        // *** include the facebook api class
        require_once('fb-image-upload/facebook.php');

        // *** Create our Application instance.
        $this->_facebookObj = new Facebook(array(
          'appId'  => $appId,
          'secret' => $secretId,
          'cookie' => $cookies,
        )); 

        // *** This ensures we're logged in.
        $this->_user = $this->_facebookObj->getUser();

        // *** The user to lookup
        if ($userId == 'me') {
            $this->_userId = $this->_user;
        } else {
            $this->_userId = $userId;
        }
    }

    /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-* 
     *  Login / Logout Methods
     *  
     */

    public function getLoginURL()
    # Return the login URL link
    {
        $loginUrl = $this->_facebookObj->getLoginUrl(
                array(
                    'scope'         => $this->permissions,
                    'redirect_uri'  => $this->_redirectURL
                )
        );      

        return $loginUrl;
    }

    ## --------------------------------------------------------

    public function loginRedirect()
    # Automatically redirect you to the facebook login page
    {
        if (!$this->_user) {                
            header("Location:{$this->_facebookObj->getLoginUrl(array('scope' => $this->permissions, 'redirect_uri'  => $this->_redirectURL))}");
            exit;
        }
    }

    ## --------------------------------------------------------

    public function getLogoutURL()
    # Return the logout URL link. Doesn't remove the cookie
    {
        $logoutUrl  = $this->_facebookObj->getLogoutUrl();
        return $logoutUrl;
    }

    ## --------------------------------------------------------

    public function logout()
    {
        // *** Remove the cookie
        if (isset($_SERVER['HTTP_COOKIE'])) {
            $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
            foreach($cookies as $cookie) {
                $parts = explode('=', $cookie);
                $name = trim($parts[0]);
                setcookie($name, '', time()-1000);
                setcookie($name, '', time()-1000, '/');
            }
        }
    }

    ## --------------------------------------------------------

    public function getLogInOutLink()
    # Show link depending on the users login/logout status
    {
        if ($this->_user) {
          return $this->_facebookObj->getLogoutUrl();
        } else {
          return $this->_facebookObj->getLoginUrl();
        }       
    }

    ## --------------------------------------------------------

    public function isLoggedIn()
    # Test if user is logged in and authenticated
    {
        if ($this->_user) {
            return true;
        } else {
            return false;
        }
    }

    /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-* 
     *  Facebook Get Info Methods
     *  
     */

    public function getUserProfile()
    #
    #   Author:     Jarrod Oberto
    #   Date:       Jun 11
    #   Purpose:    Get user profile information
    #   Params in:
    #   Params out:
    #   Notes:  
    #
    {   
        if ($this->_user) {
            $userProfileArray = $this->_facebookObj->api('/' . $this->_userId);
            return $userProfileArray;
        } else {
            $this->_errorArray[] = 'Could not get user profile. User possibly not logged in.';
            $user = null;
            return false;
        }               
    }       

    ## --------------------------------------------------------

    public function getProfileImageURL()
    #
    #   Author:     Jarrod Oberto
    #   Date:       Jun 11
    #   Purpose:    Get the profile image URL
    #   Params in:
    #   Params out:
    #   Notes:  
    #
    {
        if ($this->_user) {
            try {
                return 'http://graph.facebook.com/' . $this->_userId . '/picture';
            } catch (FacebookApiException $e) {
                $this->_errorArray[] = 'Could not get profile image URL.';
                $this->_debugArray[] = $e;
                return false;
            }           
        }   
    }

    ## --------------------------------------------------------

    public function getAlbumNames($includeProfileAlbum = false)
    #
    #   Author:     Jarrod Oberto
    #   Date:       June 11
    #   Purpose:    Get an array of album names
    #   Params in:  (bool) $includeProfileAlbum: if set to true, the users profile pictures album will be returned, too.
    #   Params out: (array) Associate array of album id's / names
    #   Notes:  
    #
    {
        // *** Get album data
        $albumsData = $this->_getAlbumData();

        $albumNamesArray = array();

        if (count($albumsData['data']) > 0) {

            // *** Loop through album data
            foreach ($albumsData['data'] as $album) {

                // *** Test if we want to include the Profile Pictures album
                if (($includeProfileAlbum || strtolower($album['name']) != 'profile pictures')) {

                    $albumNamesArray[$album['id']] = $album['name'];
                }
            }
        }

        return $albumNamesArray;
    }

    ## --------------------------------------------------------

    public function getAlbumId($albumName)
    #
    #   Author:     Jarrod Oberto
    #   Date:       June 11
    #   Purpose:    Get the id of an album
    #   Params in:  (str) $albumName: the name of the album to return the id for.
    #   Params out: Returns an albums id.
    #   Notes:  
    #
    {
        // *** Test if already an id
        if ($this->_testIfId($albumName)) {
            return $albumName;
        }

        $id = 0;

        // *** Get album names
        $albumNamesArray = $this->getAlbumNames();

        if (count($albumNamesArray) > 0) {

            // *** Loop through each album
            foreach ($albumNamesArray as $albumId => $value) {

                // *** If the name already exists...
                if (strtolower($albumName) == strtolower($value)) {

                    // *** ...return the id
                    return $albumId;
                }
            }
        }   
        return $id;
    }

    /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-* 
     *  Facebook Update/Add Methods
     *  
     */

    public function addPhoto($img, $caption='', $album='', $albumDescription='', $createAlbum=true)
    #
    #   Author:     Jarrod Oberto
    #   Date:       Jun 11
    #   Purpose:    Add photos to an album on Facebook
    #   Params in:  (str) $img: the image and path to upload
    #               (str) $caption: a caption for the image
    #               (str) $album: an album name or id. Will be created if
    #                   it doesn't exist
    #               (str) $albumDescription: the description to give the album.
    #               (bool) $createAlbum: if true, create the album if it doesn't 
    #                   already exist. If false, if the album doesn't exist,
    #                   don't upload the photo.
    #   Params out:
    #   Notes:  
    #
    {

        // *** Get absolute path
        $img = realpath($img);
        if (!file_exists($img)) {
            $this->_errorArray[] = 'Image cannot be found.';        
            return false;           
        }

        // *** If setting is to NOT create the album should it not exist...
        if (!$createAlbum) {

            // *** Let's make sure it does exist. If album id=0 then it doesn't
            if ($this->getAlbumId($album) == 0) {
                return false;
            }
        }

        // *** Default ("me")
        $obj = $this->_userId;      

        // *** Has an album been specified?
        if ($album != '') {

            // *** Check if we passed in an album id
            $usingAlbumId = $this->_testIfId($album);

            // *** If we've passed in the album id, no need to get it - we already got it!
            if (!$usingAlbumId) {

                // *** Get album id, or create if it doesn't exist
                $albumId = $this->addAlbum($album, $albumDescription);

                // *** Set as album id
                $obj = $albumId;
            } else {
                $obj = $album;
            }
        }

        // *** Enable upload support
        $this->_facebookObj->setFileUploadSupport(true);

        if ($this->_user) {
            try {               
                $photo = $this->_facebookObj->api('/' . $obj . '/photos', 'POST',
                    array(
                        'picture' => '@' . $img,
                        'message' => $caption
                    )
                );
                return $photo['id'];
            } catch (FacebookApiException $e) {
                $this->_errorArray[] = 'Image could not be added.';
                $this->_debugArray[] = $e;      
                return false;
            }
        }           
    }

    ## --------------------------------------------------------

    public function addAlbum($name, $description='', $allowDuplicates=false)
    #
    #   Author:     Jarrod Oberto
    #   Date:       Jun 11
    #   Purpose:    Create an album if it doesn't exist (or if we don't mind 
    #               duplicates).            
    #               If it does exist, just return the id of the album           
    #   Params in:
    #   Params out: (int) the album of the id (regardless if we created it or 
    #                   if it already existed.
    #   Notes:  
    #
    {
        // *** If we don't want duplicate album names...
        if (!$allowDuplicates) {

            // *** ...we check if the album name exists already
            $id = $this->getAlbumId($name);

            // *** An id of greater than 0 means it does already exist
            if ($id > 0) {

                // *** So let leave and return the existing id
                return $id;
            }
        }

        // *** Else create the album if it doesn't exist
        if ($this->_user) {
            try {       
                $album = $this->_facebookObj->api('/' . $this->_userId . '/albums', 'POST', array(
                        'name' => $name,
                        'message' => $description
                    )
                );  
                return $album['id'];
            } catch (FacebookApiException $e) {
                $this->_errorArray[] = 'Album could not be created.';
                $this->_debugArray[] = $e;      
                return false;
            }
        }   
    }

    ## --------------------------------------------------------

    public function getAlbumSelectOptions($selectedId=0, $addBlank=false, $includeProfileAlbum=false)
    {
        $assocArray = $this->getAlbumNames($includeProfileAlbum);
        return Helper::dropdown($assocArray, $selectedId, $addBlank);
    }   

    /*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-* 
     *  Error Handling Methods
     *  
     */

    ## --------------------------------------------------------

    public function getErrors()
    {
        return $this->_errorArray;
    }

    ## --------------------------------------------------------

    public function getError()
    {
        if (isset($this->_errorArray[0])) {
            return  $this->_errorArray[0];
        } else {
            return '';
        }
    }

    ## --------------------------------------------------------

    public function getDebugErrors()
    {
        return $this->_debugArray;
    }

## _____________________________________________________________________________    
## ________                 ____________________________________________________
## ________ PRIVATE METHODS ____________________________________________________
## _____________________________________________________________________________
##  

    private function _getAlbumData()
    #
    #   Author:     Jarrod Oberto
    #   Date:       Jun 11
    #   Purpose:    Get the RAW data
    #   Params in:
    #   Params out:
    #   Notes:  
    #
    {

        if ($this->_user) {
            try {       
                return $this->_facebookObj->api('/' . $this->_userId . '/albums');
            } catch (FacebookApiException $e) {
                $this->_errorArray[] = 'Could not get album data.';
                $this->_debugArray[] = $e;      
                return false;
            }
        }                   
    }   

    ## --------------------------------------------------------

    private function _testIfId($value)
    # helper
    {
        if ((strlen($value) >= 10 && strlen($value) <= 20) && is_numeric($value)) {
            return true;
        } else {
            return false;
        }
    }
    ## --------------------------------------------------------
}

class Helper {

    ## --------------------------------------------------------

    public static function dropdown($assocArray, $selectedId=0, $addBlank=false)
    #
    #   Author:     Jarrod Oberto
    #   Date:       19 Mar 2011
    #   Purpose:    Generate HTML dropdown code
    #   Params in:  (array) $assocArray: An associate array of value (id)/text.
    #               (mixed) $selectedId: The value to select. Usually an id.
    #               (bool)  $addBlank: First entry empty or not.
    #   Params out: The select HTML code
    #   Notes:
    #
    #   Usage:
    #           PHP:    $resultSet = $dbObj -> selectTable('branch', array('id','name'));
    #                   $branchArray = $dbObj -> recordsToArray($resultSet, false, true);
    #                   $branchHTMLOptions = FormHelper::dropdown($branchArray, $id);
    #
    #           HTML:   <select id="branch" name="branch" class="text">
    #                       <?php echo $branchHTMLOptions ? >
    #                   </select>
    #
    {

        $HTMLOptions = '';
        if ($assocArray) {

            if ($addBlank) {
                $HTMLOptions = '<option></option>';
            }

            foreach ($assocArray as $id => $name) {
                $selected = '';
                if (($selectedId == $id) && ($selectedId != '')){
                    $selected = 'selected="selected"';
                }
                $HTMLOptions .= '<option value="' . $id . '" ' . $selected . '>' . $name . '</option>';
            }
        } else {
            $HTMLOptions = '<option></option>';
        }

        return $HTMLOptions;

    }

    ## -------------------------------------------------------- 

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:10:16.987

在您的 index.php 中，您需要在一切完成后重定向到不同的页面，以便刷新不会导致重新发布所有数据。

查看[此问题](https://stackoverflow.com/questions/2112373/php-page-redirect)以了解如何进行重定向。

# c# - 如何获取动态创建的 DropDownLists 的顺序

> ID：10106513
> 
> 赞同：0
> 
> 时间：2012-04-11T13:07:49.413
> 
> 标签：c#, javascript, asp.net

我已经使用 JavaScript、ASP.NET 创建了一些下拉列表。

用户可以通过单击“+”按钮添加任意数量的下拉列表，并通过单击“-”按钮将其删除。

如果很难理解我的意思，请参阅“[如何在 C# 中实现保管箱列表](https://stackoverflow.com/questions/10101262/how-to-implement-a-list-of-dropboxes-in-c-sharp)”。

现在我想实现后面的代码并想定义下拉列表的顺序，但我不知道哪个是我的第一个下拉列表等。

我们假设所有`<asp:DropDownList>`列表元素都包含以下内容：method1、method2、method3 和 method4。如果用户选择了一个元素，代码隐藏中的一个方法就会被实现。

示例： dropboxlist1：选择列表项方法2，
dropboxlist2：选择列表项方法1，
dropboxlist3：选择列表项方法3，

```
string txt= "";
if (dropboxlistID.Text == "method1"){
  txt = method1Imp();
} else if (dropboxlistID.Text == "method2") {
  txt = method2Imp();
} else if (dropboxlistID.Text == "method3") {
  txt = method3Imp();
} else {
} 
```

但此时我不知道哪个下拉列表先出现，以及应该首先对我的字符串执行哪种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:14:56.093

尝试将每个方法作为委托加入队列，然后在您准备好从单个线程时排空（调用每个委托）队列。这将确保执行顺序与用户选择的顺序相匹配。

抱歉，我最初没有包含代码。这是一个让您入门的基本示例：

```
Queue<Func<string>> actions = new Queue<Func<string>>();
if(dropboxListID.Text =="m1")
{
 actions.Enqueue(method1Imp);
}
if(dropboxListID.Text = "m2")
{
 action.Enqueue(method2Imp);
}

...
Sometime Later when you're ready to process these
...
string txt = "";    
while(actions.Count >0)
{
 var method = actions.Dequeue();
 txt = method();
} 
```

这是一篇深入探讨工作/任务队列概念的博客文章：

[http://yacsharpblog.blogspot.com/2008/09/simple-task-queue.html](http://yacsharpblog.blogspot.com/2008/09/simple-task-queue.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:25:37.687

要获取下拉列表的顺序：

1.  *首先在aspx 页面*中设置硬编码下拉列表的 ID/ClientID 并对它们进行计数（例如存在 2 个下拉列表）
2.  在动态创建下拉列表时，在其 ID/ClientID 的末尾附加一个计数整数，如 ddl3、ddl4（从 3 开始计数）
3.  然后在您的代码中，您可以找到所选元素的下拉列表：

    ```
    if (ddl.ClientID.EndsWith("1")){
      // 1st ddl
    } else if (ddl.ClientID.EndsWith("2")) {
      // 2nd ddl
    } else if (ddl.ClientID.EndsWith("3")) {
      // 3rd ddl
    }
    ... 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:29:10.480

IMO 您的下拉列表将包含在父级中。

让我们说（根据您的链接）您的父母是 DropDownPlaceholder。

```
<div id="DropDownPlaceholder"> 
```

使用 linq 获取它的所有子节点。将它们投射为下拉列表，然后您可以循环它们以查找您的问题。

# php - 非常简单的 Nginx 重写 index.php 需要，找不到解决方案

> ID：10106514
> 
> 赞同：2
> 
> 时间：2012-04-11T13:07:51.530
> 
> 标签：php, nginx, web, rewrite

我使用 .htaccess 到 nginx 重写转换器，但解决方案不起作用。事实上，无论我尝试什么，我都无法让我的任何重写工作。我显然在这里做错了什么。

**我想将除对 PHP 文件的请求之外的所有请求重定向到 index.php 文件并使用 PHP 解析请求（无论文件/文件夹是否存在）。**

这是我的简约 Nginx.conf 文件：

```
worker_processes  1;
events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    server {
        listen       80;
        server_name  localhost;

        location / {
            root   html;
            index  index.html index.htm;
        }

        # Make sure to set this as your actual server WWW root
        root html;
        # Index file
        index index.php;
        # Rewrite that directs everything to index file
        rewrite /!^(.*).php$ /./index.php last;

        location ~ \.php$ {
            root           html;
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            include        fastcgi_params;
        }
    }
} 
```

我什至尝试过像“rewrite index.php”这样的东西，但没有成功。我还尝试将重写放在单独的位置标签中，但这也没有什么区别。

**我想将除对 PHP 文件的请求之外的所有请求重定向到 index.php 文件并使用 PHP 解析请求（无论文件/文件夹是否存在）。**

除了没有足够的 Nginx 经验之外，我做错了什么？

原始 .htaccess 文件：

```
Options +FollowSymLinks 
RewriteEngine on
RewriteRule !^(.*)\.php$ ./index.php [QSA,L] 
```

# mysql - 连接到 MySQL 服务器时，ODBC 驱动程序的用途是什么？

> ID：10106515
> 
> 赞同：1
> 
> 时间：2012-04-11T13:07:53.370
> 
> 标签：mysql, database, odbc

我一直想知道使用 ODBC 驱动程序与 MySQL 服务器交互有什么好处？与通过 TCP 直接连接到服务器并直接触发 SQL 命令相比，这有什么优势？

我正在使用用 LabVIEW 编写的代码库，该代码库引用 UDL 文件，该文件引用数据源及其关联的 ODBC 驱动程序来处理与服务器的连接。我还不相信它是必要的。如果您连接到 Microsoft Access 或 excel，我可以看到使用驱动程序的好处，但是如果您的收件人是某种类型的 SQL 服务器，为什么您需要中间人来处理您的 SQL 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:43:58.753

我已经使用 ODBC 驱动程序 3.51 连接到 MySQL Community Server 5.1 有一段时间了。ODBC 驱动程序允许您（在 Windows 计算机上）将 MySQL 连接添加到 ODBC 数据源列表。现在您可以在许多兼容的应用程序中引用此数据源。我已经能够在 VB.Net 应用程序以及用于打印和其他具有 ODBC 功能的专有应用程序中使用此 ODBC 连接。

我想说的是，在编写 web 或 python 应用程序时，我总是使用内置的 MySQL 包，但如果您需要通过 VB.Net 或其他专有应用程序（如独立的 Windows 应用程序）访问您的数据，您可能需要设置用于访问数据库的系统 ODBC 数据源。对我来说，ODBC 让 Windows 轻松访问 MySQL。如果没有 Windows，我认为您不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:20:49.733

为什么选择 ODBC 而不是 JDBC？在使用 JDBC 时，按照有用的顺序，我想到了一些原因：

1.  用于访问查询结果的标准 api。迭代结果并获取具有适当类型的实际值。
2.  无需知道协议是如何连接到服务器的。只需使用主机、用户、密码、发送 SQL 并遍历结果。
3.  抽象出与数据库的连接。更改数据库应该更简单。
4.  提交和回滚基于事务的更改的标准方法。

根据我的经验，JDBC 非常冗长。你需要写很多行来完成简单的事情。我发现[Spring JDBCTemplate](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)包装器对于简单的东西来说是一个非常容易使用的替代品。

# c# - C# - CsGL 无效枚举

> ID：10106519
> 
> 赞同：-1
> 
> 时间：2012-04-11T13:08:12.133
> 
> 标签：c#, opengl

我试图按照本教程在 C# 上制作一个 OpenGL 应用程序。[http://www.developerfusion.com/article/3823/opengl-in-c/2/](http://www.developerfusion.com/article/3823/opengl-in-c/2/)

后来，我尝试进行以下更改：

```
class DrawObject : OpenGLControl
{
    public override void glDraw()
    {
        GL.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
        GL.glLoadIdentity();
        GL.glBegin(GL.GL_LINE);
        GL.glLineWidth(10.0f);
        GL.glVertex3f(-3.0f, 0.0f, 0.0f);
        GL.glVertex3f(3.0f, 0.0f, 0.0f);
        GL.glEnd();
        GL.glFlush();
    }

    protected override void InitGLContext()
    {
        GL.glShadeModel(GL.GL_SMOOTH);
        GL.glClearColor(1.0f, 1.0f, 1.0f, 0.0f);
        GL.glClearDepth(1.0f);
        GL.glEnable(GL.GL_DEPTH_TEST);
        GL.glDepthFunc(GL.GL_LEQUAL);
        GL.glHint(GL.GL_PERSPECTIVE_CORRECTION_HINT, GL.GL_NICEST);
    }

    protected override void OnSizeChanged(EventArgs e)
    {
        base.OnSizeChanged(e);

        Size s = Size;
        double aspect_ratio = (double)s.Width / (double)s.Height;
        GL.glMatrixMode(GL.GL_PROJECTION);
        GL.glLoadIdentity();

        GL.gluPerspective(45.0f, aspect_ratio, 0.1f, 100.0f);

        GL.glMatrixMode(GL.GL_MODELVIEW);
        GL.glLoadIdentity();
    }
}

public class DrawLine : Form
{
    DrawObject newObject = new DrawObject();

    public DrawLine()
    {
        Text = "Draw a line";
        newObject.Dock = DockStyle.Fill;
        Controls.Add(newObject);
    }

    public static void Main()
    {
        DrawLine drawLine = new DrawLine();
        Application.Run(drawLine);
    }
} 
```

出于某种原因，我将在 Application.Run(drawLine) 处收到“无效枚举数”错误。基本上我想要做的是将它在 3 个指定顶点上渲染一个点的部分替换为它在给定 2 个顶点的情况下渲染一条线的部分。我不知道为什么点版本不会抛出这个异常，但行版本会。我在引用中引用了 csgl.dll，并添加了 csgl.native.dll 并使其在每次编译解决方案时发布（否则整个事情根本不会运行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:57:04.920

不要更改内部的状态`glBegin`and `glEnd`（即不要调用`glLineWidth`）。从[文档](http://www.opengl.org/sdk/docs/man/xhtml/glLineWidth.xml)：

```
GL_INVALID_OPERATION is generated if glLineWidth is executed between 
the execution of glBegin and the corresponding execution of glEnd. 
```

* * *

JulianLee 的回答：`glBegin`必须用 调用`GL_LINES`，而不是`GL_LINE`。看评论。

# grails - 如何在groovy中动态地将属性添加到实例

> ID：10106522
> 
> 赞同：0
> 
> 时间：2012-04-11T13:08:18.597
> 
> 标签：grails, properties, groovy

我有一段代码如下

```
def revisedSections=sections.collect{sectionObj->
  sectionObj.questionCategories=sectionObj.questionCategories.collect{qCat->
    def flag=false
    this.questionSet.questions = this.questionSet.questions.collect{qObj->
      if(qCat.category == qObj.questionCategory.category){
        qCat.questions.add(qObj)
        //this.questionSet.questions.remove(qObj)
        flag=true
      }
      qObj
    }
    if(flag){
      qCat
    }
  }
  sectionObj
}
log.debug('revisedSections'+revisedSections)
this.metaClass.getSectionsData={-> revisedSections }
log.debug 'this.sectionsData '+this.sectionsData 
```

我想将sectionsData 属性添加到实例中，然后将实例转换为json，但是我无法使用此代码访问动态添加的属性，我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:37:41.190

如果我理解您要正确实现的目标，那么元编程很容易实现，并且应该可以工作。

如果没有有关代码上下文的信息，我只能猜测对象的基类等，所以这里有一些在 groovy 控制台中运行的代码，它运行良好

```
class D {
 int someValue

 def init() {
  this.metaClass.getSomeString={->someValue as String}
 }
}
def d=new D()
d.init()
d.someValue=76
println d.someString 
```

结果当然是将字符串“76”打印到控制台。

另一个建议，使用静态编译的 getter：

```
class D {
  private Closure computation
  int someValue

 def init() {
  this.computation={someValue}
 }
 String  getSomeString(){
     computation() as String
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:55:44.460

你可以使用 mixins 来完成你正在寻找的东西。类似以下的内容是本机且可接受的 Groovy：

```
class RevisedSection {
    String sectionData
}

class Section {
    String name
}

Section.mixin RevisedSection

def section = new Section(sectionData: "Data", name: "Section Name")

assert section.sectionData == "Data" 
```

希望这可以帮助！

# c - 服务器-客户端模型问题

> ID：10106523
> 
> 赞同：0
> 
> 时间：2012-04-11T13:08:21.760
> 
> 标签：c, sockets, networking, network-programming, winsock2

我有一个相互通信的 TCP/IP 客户端和服务器。

我的客户端`recv`以 1 秒的间隔从服务器获取数据，即。`sleep(1000)`. 我的服务器没有`sleep`规定。

如果我`recv`使用像 "hi" 这样的简单字符串，它工作正常。

但是如果我不在我的服务器中引入睡眠，我的客户端似乎处于挂起状态或在启动时立即处理大量数据。

我的服务器也应该这样做`sleep`吗？

或者可能是处理`recv`ed 数据的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:43:53.990

如果您的服务器在没有睡眠的情况下写入套接字，那么它将非常快速地填充两侧的 TCP 缓冲区，然后您的客户端将几乎立即将大量数据卡在其本地缓冲区中以供读取。如果您希望服务器因客户端的睡眠而延迟，那么您可以将其作为事务来执行，而不是服务器写入字符串但随后读取一个字节。然后客户端将读取该字符串并写入一个字节以表示它已收到它。这将使服务器与客户端保持同步。

# compact-framework - .net Compact Framework 中的分隔符控件

> ID：10106524
> 
> 赞同：1
> 
> 时间：2012-04-11T13:08:22.440
> 
> 标签：compact-framework

如何在 .net Compact Framework 3.5 中绘制一条水平线，就像`Owner Information`在 Windows Mobile 6.5 中使用的那样，将标题和正文分开？

![在此处输入图像描述](../Images/402750a832c2cb9fdf0ce3814e905275.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:14:00.023

执行此类操作的最简单方法是覆盖`Paint`事件：

```
private const int HORZ_LINE = 10;

private void Form_Paint(object sender, PaintEventArgs e) {
  using (Pen p = new Pen(Color.Black)) {
    e.Graphics.DrawLine(p, 0, HORZ_LINE, Width, HORZ_LINE);
  }
} 
```

# symfony - 在我的捆绑包中分离 Symfony2 中的公共代码？

> ID：10106526
> 
> 赞同：1
> 
> 时间：2012-04-11T13:08:23.437
> 
> 标签：symfony

我创建了 Bundles，它们共享一些通用代码。（文件上传类，Gmailer 类）现在我想在我的 Bundles 或 Anywhere 中创建一个单独的文件，我可以在其中放置这个通用代码，然后我想在我的所有 bundles 中创建其类的对象。

这是我的文件夹结构

```
-src
  -College
     -StudentBundle
        -Controller
        -Entity
        -OtherApplication
           -All3rdPartyClasseshere.php
     -UserBundle
     -TeacherBundle 
```

现在，当我尝试像这样自动加载它时

## 自动加载.php

```
$loader->registerPrefixes(array(
'Twig_Extensions_' => __DIR__.'/../vendor/twig-extensions/lib',
'Twig_'            => __DIR__.'/../vendor/twig/lib',
'Uploader_'        => __DIR__.'/../../src/College/StudentBundle/OtherApplications', 
```

但是当我尝试在我的控制器中创建一个对象时，它给出了一个错误。我没有在我的控制器中使用或包含任何东西。我如何创建在另一个文件中分离的类的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:15:12.003

首先，第三方库，即使它们与您的包特别相关，也不应该在包结构中。

处理非捆绑通用代码的推荐方法是将其视为外部库，并使用[composer.json](http://symfony.com/components)管理它们。

关于 Bundle 结构，也许[这个问题](https://stackoverflow.com/questions/9999433/should-everything-really-be-a-bundle-on-symfony-2)可以帮助您走上正确的道路。

# c# - 以至少 1 个像素宽绘制对象

> ID：10106528
> 
> 赞同：4
> 
> 时间：2012-04-11T13:08:27.650
> 
> 标签：c#, opengl, graphics, 3d, unity3d

我想画一个很薄的物体，它因为锯齿而消失了。当然可以理解。但我想确定这个对象在我的屏幕上。至少 1 像素宽。

细对象不是简单的 OpenGL 线条，它是一个实际的 3D 对象。有没有办法将此对象投影到屏幕上或使其始终可见，而不管混叠问题如何？（见图）

我正在使用 Unity3D，但也可以访问简单的 OpenGL 函数。

![上：我拥有的，下：我想要的](../Images/fef3c37cab366b0fcf7bced73e1bb7d5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:16:33.187

为什么不画一条线然后在上面画对象呢？

# java - 文件阅读器直到最后才读取所有数据

> ID：10106531
> 
> 赞同：0
> 
> 时间：2012-04-11T13:08:36.810
> 
> 标签：java, linked-list, java.util.scanner, filereader

在 person.txt 中，我们存储了此人的详细信息。好像是这样。

```
John
Smith
aösldkjf
5
8645
asdfasf
0441234545
++++++
Adam
Gilchrist
ads
asf
asf
asfd
0441234546
++++++ 
```

然后我们构建了 FileManager 类来从这个文件中读取数据。它标识有两个不同的条目。但它总是读取前 8 行并且不会继续前进。由于第一个人（例如：- John Smith）被两次添加到“LinkedList”中，命名为AddressBook。

//文件管理器类

```
public class FileManager {

    public static void readFile() {

        Scanner x;

        LinkedList<String> tempList = new LinkedList<String>();

        try {
            x = new Scanner(new File("Person.txt"));

            @SuppressWarnings("unused")
            String temp = null;

            while (x.hasNext()) {
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());
                tempList.add(x.next());

                Person person = new Person();

                person.addFilePerson(tempList);

                Main.addressBook.add(person);

            }
        } catch (Exception e) {
            System.out.println("could't find the file");
        }
    }
} 
```

// 类 Person 中的 addFilePerson 方法

```
public void addFilePerson(LinkedList<String> list){

    vorname = list.get(0);
    nachname = list.get(1);
    strasse = list.get(2);
    hausnummer = list.get(3);
    plz = list.get(4);
    telefon = list.get(5);
    wohnort = list.get(6);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:10:49.727

您正在创建*一个* `LinkedList<String>`并反复添加它。移动这一行：

```
LinkedList<String> tempList = new LinkedList<String>(); 
```

进入`while`循环。或者 - 最好是 IMO - 对不同部分使用单独的属性：

```
// TODO: Consider what happens if the file runs out half way through a person...
while (x.hasNext()) {
    Person person = new Person();
    person.setFirstName(x.next());
    person.setLastName(x.next());
    person.setStreet(x.next());
    person.setTown(x.next());
    person.setTelephoneNumber(x.next());
    person.setCity(x.next()); // Or whatever...

    Main.addressBook.add(person);
} 
```

`Person`围绕创建“构建器”类型并使其自身不可变还有其他选择`Person`，您可能想要创建一个单独的`Address`类型......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:11:18.463

您应该在从文件中读取人员之间清除（或重新创建）您的列表。否则，您将继续将同一个人（您阅读的第一个人）添加到通讯录中。因此，要么按照 Jon 的建议每次在循环中重新创建你的临时列表，要么在每一轮之后清除它：

```
 while (x.hasNext()) {
            tempList.add(x.next());
            ...

            Main.addressBook.add(person);

            tempList.clear();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:14:19.667

它实际上继续前进。这一行：

```
person.addFilePerson(tempList); 
```

您将 the`tempList`作为参数发送，但在`addFilePerson`方法中您总是阅读`tempList`的前 7 个条目。您应该在循环的每次迭代中清除`tempList`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:15:38.963

您应该使用 nextLine() 和 hasNextLine() 而不是 next() 和 hasNext()。扫描器是上下文感知的，因此默认的令牌读取行为可能不是基于行的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:18:08.883

你最好做

```
Person person = new Person();
Address address = new Address();
person.setAddress(address);

person.setFirstName(x.next());
person.setLastName(x.next());
address.setStreetName(x.next());
address.setHouseNumber(x.next());
address.setZipCode(x.next());
person.setPhoneNumber(x.next());
address.setCityName(x.next()); 
```

# uml - 用例图的理想示例

> ID：10106535
> 
> 赞同：3
> 
> 时间：2012-04-11T13:08:42.817
> 
> 标签：uml, use-case

我正在寻找一个用例图的理想示例，它可以解释大多数棘手的地方，并成为新用例图的一个很好的模型。

它必须具有以下内容：

*   抽象用例
*   具体用例
*   “扩展”关系
*   “包括”关系
*   连接抽象用例和具体用例的“继承”关系
*   至少有两个具体的参与者
*   抽象的演员

当然应该是

*   语法正确（符合 UML 2.x）
*   语义正确
*   综合的
*   不太复杂

我搜索了自己，没有找到任何包含所有内容的好例子。

可能有人有这样的例子并且可以分享它。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:56:43.770

VISA付款：

*   抽象用例 - “用户可以支付海湾签证”
*   具体用例 - “用户可以从超市终端付款”
*   “扩展”关系 - “银行终端具有**扩展**功能（如结果余额打印）”
*   “包括”关系 - “支付**包括**授权用例”
*   “继承”连接抽象和具体用例的关系——它更复杂。但是想象一下 2 方支付（当 2 个用户应该在交易完成之前存入钱）。
*   至少有两个具体的参与者——让我们回顾一下用例“查看余额历史”。抽象`permitted user`可以看到历史，具体`permitted user`是一个`system-admin`和`card-holder`

**更新**

“扩展” - 实际上有两个 UC：（1）“用户可以通过签证支付”（2）“通过签证支付并打印余额”。

“继承”-让我澄清一下这个UC：继承与扩展非常相似，当“继承”改变系统处理方式时，“扩展”引入一些新活动几乎没有区别。在我的示例中，我们仍然需要通过 VISA 付款，但要确认交易，这笔付款应由 2 个参与者完成。一次付款，她/他的钱被暂时冻结，第二次付款，她/他的钱确认全部付款。但从卖家的角度来看，这个用例可以看作是简单的支付操作。所以我们不会改变服务的价值（与用户角度的“扩展”相比），而是改变交易完成的标准。

> *例如 - 抽象或具体用例是否应该包括“授权”用例*

非常好的问题。摘要可能以两种方式包含“授权”：

1.  如果您确定只有一种可能的授权方式 - 那么抽象应该包括。

2.  如果有不止一种授权方式 - 那么您需要提供具有所有可能继承的抽象用例“授权”。所以抽象的UC会“包含”抽象的“授权”。

> *我没有看到任何*

![在此处输入图像描述](../Images/69a77c0c7212c9845320d64d64f5dc9b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T03:18:15.257

我从我的美味中找出了一些书签。你可能想检查一下。特别是第二篇文章可以帮助您弄清楚继承用例。

1)[来自 Topcoder](http://community.topcoder.com/tc?module=Static&d1=features&d2=061206)

2)[在用例模型中重用](http://www.agilemodeling.com/essays/useCaseReuse.htm#InheritanceUC)

3)[用例模型介绍](http://agilemodeling.com/artifacts/useCaseDiagram.htm)

![学生大学注册用例](../Images/23bba5a18d84dcf27463dce3e747f8d0.png)

# java - 如何使用 GraphicsEnvironment 检测显示镜像？

> ID：10106539
> 
> 赞同：3
> 
> 时间：2012-04-11T13:08:53.983
> 
> 标签：java

我使用下面的代码来检查有多少个屏幕并选择最大的一个来显示我的应用程序。但是，我还没有成功检测到显示器被镜像而不是扩展的情况。有什么办法可以做到吗？

```
if (GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices().length > 1) {
    findBiggestScreen(GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()).setFullScreenWindow(this);
} else {
    GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().setFullScreenWindow(this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T18:42:52.067

我无法对此进行测试，因为我没有可用的第二个显示器，但也许您可以尝试[GraphicsDevice#getDefaultConfiguration()#getBounds()](http://docs.oracle.com/javase/6/docs/api/java/awt/GraphicsConfiguration.html#getBounds%28%29)。

javadoc中没有明确提到，但我猜镜像屏幕的x和y偏移值相等。

# sql - 如何计算select语句的一列中其他表的值的总和

> ID：10106541
> 
> 赞同：0
> 
> 时间：2012-04-11T13:08:59.267
> 
> 标签：sql, database

我有三张桌子：

*   **客户订单**：`id, CreateDate, Status`

*   **面额顺序**：`id, DenID, OrderID`

*   **面额**：`id, amount`

我想根据所有这些表创建一个视图，但应该有一个额外的列，即`Total`应该在那里可以计算每个订单金额的总和。

例如

*   订单 1 总面额 3，总金额 = 250+250+250=750
*   订单2总面额2，总金额=250+250=500

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:14:02.090

我试着猜测你的表格关系（还有数据，你没有提供任何样本）：

```
SELECT co.id, 
       COUNT(do.DenID) AS `Total denominations`, 
       SUM(d.amount) AS `Total amount`
FROM CustOrder co
INNER JOIN DenominationOrder do ON co.id = do.OrderId
INNER JOIN Denomination d ON do.DenId = d.id
GROUP BY co.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:14:48.823

试试这个：

```
SELECT o.CreateDate, COUNT(o.id), SUM(d.amount) AS 'Total Amount' 
FROM  CustOrder o 
INNER JOIN DenominationOrder do ON o.id = do.OrderID
INNER JOIN Denomination      d  ON do.DenId = d.id
GROUP BY o.CreateDate 
```

[**演示**](https://data.stackexchange.com/stackoverflow/query/66429)

另一种方法是使用**CTE**，如下所示：

```
;WITH CustomersTotalOrders
AS
(
    SELECT o.id, SUM(d.amount) AS 'TotalAmount' 
    FROM  CustOrder o 
    INNER JOIN DenominationOrder do ON o.id = do.OrderID
    INNER JOIN Denomination      d  ON do.DenId = d.id
    GROUP BY o.id
)
SELECT o.id, COUNT(ot.id) AS 'Orders Count', ot.TotalAmount
FROM CustOrder o
INNER JOIN CustomersTotalOrders ot on o.id = ot.id
INNER JOIN DenominationOrder do ON ot.id = do.OrderID
INNER JOIN Denomination      d  ON do.DenId = d.id
GROUP BY o.id,  ot.TotalAmount 
```

这会给你：

```
 id   |  Orders Count | Total Amount
-------+---------------+-------------
  1            3             750
  2            2             500 
```

[**使用 CTE 的演示**](https://data.stackexchange.com/stackoverflow/query/66430)

# blackberry - 如何从 ALX 文件中检索 COD 文件？

> ID：10106544
> 
> 赞同：-3
> 
> 时间：2012-04-11T13:09:06.743
> 
> 标签：blackberry

我能够从 jad 文件中检索 cod 文件中的信息，但是如果我想从 alx 文件中检索有关 COD 文件的相同信息，那怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:18:41.833

Alx 文件是一个 xml 文件。解析这个 xml 文件并获取信息。

# ruby - 是否有必要在 ruby 中关闭 StringIO？

> ID：10106546
> 
> 赞同：16
> 
> 时间：2012-04-11T13:09:11.847
> 
> 标签：ruby

我们是否需要在使用 Ruby 后关闭 StringIO 对象以释放资源，就像我们对真正的 IO 对象所做的那样？

```
obj = StringIO.new "some string"
#...
obj.close # <--- Do we need to close it? 
```

**细化我的问题**

关闭文件对象是必要的，因为它会关闭文件描述符。操作系统中打开文件的数量是有限的，这就是为什么需要关闭 File。但是，如果我理解正确的话，StringIO 是内存中的抽象。我们需要关闭它吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T14:14:53.533

*   `StringIO#close`不会释放任何资源或删除其对累积字符串的引用。因此调用它对资源使用没有影响。

*   Only `StringIO#finalize`，在垃圾回收期间调用，释放对累积字符串的引用，以便可以释放它（前提是调用者不保留自己对它的引用）。

*   `StringIO.open`，它短暂地创建了一个 StringIO 实例，在它返回后不保留对该实例的引用；因此可以释放 StringIO 对累积字符串的引用（前提是调用者不保留对它的引用）。

*   实际上，使用 StringIO 时很少需要担心内存泄漏。完成后不要继续对 StringIO 的引用，一切都会好起来的。

* * *

**潜入源头**

StringIO 实例使用的唯一资源是它正在累积的字符串。您可以在 stringio.c (MRI 1.9.3) 中看到这一点；在这里，我们看到了保存 StringIO 状态的结构：

```
static struct StringIO *struct StringIO {
    VALUE string;
    long pos;
    long lineno;
    int flags;
    int count;
}; 
```

当一个 StringIO 实例最终确定（即垃圾回收）时，它对字符串的引用将被丢弃，这样*如果没有其他*对它的引用，该字符串可能会被垃圾回收。这是 finalize 方法，它也被调用`StringIO#open(&block)`以关闭实例。

```
static VALUE
strio_finalize(VALUE self)
{
    struct StringIO *ptr = StringIO(self);
    ptr->string = Qnil;
    ptr->flags &= ~FMODE_READWRITE;
    return self;
} 
```

仅当对象被垃圾回收时才调用 finalize 方法。StringIO 没有其他方法可以释放字符串引用。

`StringIO#close`只是设置一个标志。它不会释放对累积字符串的引用或以任何其他方式影响资源使用：

```
static VALUE
strio_close(VALUE self)
{   
    struct StringIO *ptr = StringIO(self);
    if (CLOSED(ptr)) {
        rb_raise(rb_eIOError, "closed stream");
    }
    ptr->flags &= ~FMODE_READWRITE;
    return Qnil;
} 
```

最后，当您调用 时`StringIO#string`，您将获得对 StringIO 实例一直在累积的完全相同的字符串的引用：

```
static VALUE
strio_get_string(VALUE self)
{   
    return StringIO(self)->string;
} 
```

* * *

**使用StringIO时如何泄漏内存**

所有这一切都意味着 StringIO 实例导致资源泄漏的方式只有一种：您不能关闭 StringIO 对象，并且您必须保留它比保留调用时获得的字符串更长的时间`StringIO#string`。例如，想象一个具有 StringIO 对象作为实例变量的类：

```
class Leaker

  def initialize
    @sio = StringIO.new
    @sio.puts "Here's a large file:"
    @sio.puts
    @sio.write File.read('/path/to/a/very/big/file')
  end

  def result
    @sio.string
  end

end 
```

想象一下，这个类的用户得到了结果，简单地使用它，然后丢弃它，但仍然保留对 Leaker 实例的引用。您可以看到 Leaker 实例通过未关闭的 StringIO 实例保留了对结果的引用。如果文件非常大，或者有很多现存的 Leaker 实例，这可能是一个问题。这个简单的（并且是故意的病态的）示例可以通过简单地不将 StringIO 保留为实例变量来解决。如果可以（并且几乎总是可以），最好直接扔掉 StringIO 对象，而不是费力地显式关闭它：

```
class NotALeaker

  attr_reader :result

  def initialize
    sio = StringIO.new
    sio.puts "Here's a large file:"
    sio.puts
    sio.write File.read('/path/to/a/very/big/file')
    @result = sio.string
  end

end 
```

除此之外，这些泄漏仅在字符串很大或 StringIO 实例众多*且*StringIO 实例长期存在时才有意义，并且您可以看到很少需要显式关闭 StringIO （如果有的话）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:04:13.403

回应这里的其他答案：调用`close` *不会*帮助您节省内存。

```
require "stringio"
sio = StringIO.new
sio.print("A really long string")
sio.close
sio.string # => "A really long string" 
```

“一个非常长的字符串”会一直`sio`存在，`close`或者不会`close`。

那么为什么 StringIO 有`close`方法呢？鸭打字。`close`如果您尝试从中读取或写入，则提供IOError 并抛出一个 IOError ，以确保它的行为就像一个真实的`File`对象。如果您在单元测试时将其用作模拟对象，这将非常有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T13:56:30.283

当您关闭 a`File`时，这很重要，因为系统的描述符数量有限（假设您在 UNIX 上，我不知道 Windows 做了什么）。有了`StringIO`，还有另一个资源处于危险之中：内存。如果`StringIO`对象有很多要存储的东西，就会从堆中占用大量内存。另一方面，垃圾收集器确实总是关闭`IO`它声称的对象，但这假设您有一种优雅的方式将您的对象置于范围之外。此外，在负载较重的系统上，物理 RAM 比文件描述符更有价值。在我的 Linux 机器上，178203 是最大文件描述符。我怀疑你能做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:13:16.537

一般来说，答案是否定的。I/O 流在被垃圾收集器声明时会自动关闭。对文件 I/O 的回答也相同。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-11T13:14:26.583

不，但它有利于内存优化

# cassandra - 使用 Hector 客户端检索 Cassandra 中一行的所有列

> ID：10106547
> 
> 赞同：7
> 
> 时间：2012-04-11T13:09:12.563
> 
> 标签：cassandra, hector

我是卡桑德拉和赫克托的新手。

我想使用赫克托检索 Cassandra 中一行的所有列。在网上进行一些探索后，我得到了一些示例代码，但它需要范围或列名，例如，

```
SliceQuery<String,String,String> query = HFactory.createSliceQuery(keyspace, ss, ss, ss);
    query.setColumnFamily("MyColumnFamily").setKey("S001").setRange(null, null, false, 100);
    QueryResult<ColumnSlice<String,String>> result = query.execute();
    for (HColumn<String, String> column : result.get().getColumns()) {
        System.out.println(column.getName() +"::"+ column.getValue());
    } 
```

在这里，我需要在 setRange() 方法中设置 Range，该方法检索此范围内的列。我们也可以在这个方法中设置开始和结束，但这也会给出特定范围的列。如果我没有设置范围，那么我需要将列名作为数组。

有没有办法获取特定行的所有列？我不想设置范围或列名，我只想要一行的所有列。因为在我的应用程序列中没有预定义。

或者有什么方法可以获取一行的总列数，以便我可以在 setRange() 方法中设置它？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T20:43:39.490

对较小的行执行此操作的方法是使用 setRange() 方法，这与您粘贴的示例中的使用方式完全相同。如果将范围的开始和结束参数设置为 null，则要从中获取的范围是整行。

在这一点上，您唯一需要考虑的是限制。在您粘贴的示例中，限制设置为 100，因此查询不会返回超过 100 列。如果您希望始终检索一行中的所有列，则可以将限制设置为一个非常大的数字（大于您可能拥有的列数），但这通常**不是**一个好主意。

相反，您可能想为范围查询创建一个 hector ColumnSliceIterator，这将为您提供行的迭代器接口，并允许您迭代整个行而无需一次查询太多列。请参阅本页底部“列迭代”下的示例：

[https://github.com/rantav/hector/wiki/Getting-started-%285-minutes%29](https://github.com/rantav/hector/wiki/Getting-started-%285-minutes%29)

# google-earth - 创建交互式 Google 地球游览（多个游览）

> ID：10106549
> 
> 赞同：1
> 
> 时间：2012-04-11T13:09:16.300
> 
> 标签：google-earth, google-earth-plugin

我正在创建一个 Google 地球之旅，我真的很希望能够进行这种互动，以便用户可以选择他们要去的地方。

我在想我可以将每个“场景”创建为一个单独的游览，每个游览都以一个决定结束（很可能是通过一个带有气球的地标，其中包含一个问题和每个可能答案的链接）。

但是，我很难找到像这样加载下一个巡回赛的方法。每个游览都将以 KMZ 格式提供，如果应该从现有游览中或从 Google 地球 API 中的外部 eventListener 加载新游览，我持开放态度。

任何帮助或指点将不胜感激。

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:30:23.873

我想您已经知道如何使用插件进行巡回演出。如果没有，请查看[此链接](http://code.google.com/apis/ajax/playground/#playing_tours)

然后你需要在每次游览结束时打开一个气球，这是两个步骤。确定游览结束的时间，然后打开一个带有一个或多个按钮的气球以选择下一个游览。

要确定游览是否已结束，请使用此功能

```
 function checkTour() {
      // checks to see if it can read the time of the tour
      // if it can it completes rest of function
     try {
            var duration = ge.getTourPlayer().getDuration();
            var cTime = ge.getTourPlayer().getCurrentTime();
     } catch (e) {
            alert('error');
            return false;
     }  

     if (duration == cTime) {
            // tour is over
            tourOverSoOpenBalloonFunction();
     } else {
            // wait 1 second and check again
            setTimeout('checkTour()',1000);
     } 
```

}

然后[使用此示例页面](http://code.google.com/apis/ajax/playground/#javascript_in_balloons)创建一个带有按钮的气球，该按钮执行一些 javascript 以加载下一个游览

基本上你会改变这条线

```
 balloon.setContentString(
    '<a href="#" onclick="alert(\'Running some JavaScript!\');">Alert!</a>'); 
```

至

```
 balloon.setContentString(
    '<a href="#" onclick="loadTour('tour1');">Tour 1</a><br/><a href="#" onclick="loadTour('tour2');">Tour 2</a>'); 
```

我可能错过了一些东西，但这应该会让你朝着正确的方向前进

# asp.net-mvc - 在我的页面上更新 ActionLink

> ID：10106559
> 
> 赞同：1
> 
> 时间：2012-04-11T13:10:08.830
> 
> 标签：asp.net-mvc

我有一个 ASP.NET MVC 解决方案，其页面由一个表组成，其中项目通过 ajax 请求一次加载 20 行。我在此表底部有一个链接，允许用户加载 20 下一行（在表末尾加载的行保留现有行）。

![在此处输入图像描述](../Images/7d10cba04f92206620de122f3fc21a20.png)

所以我有：

Index.cshtml：主页面

```
<table class="zebra-striped">

    <thead>
        <tr>
            <th>@UserResource.CompanyName</th>
            <th>@UserResource.City</th>
            <th>@UserResource.Street</th>
            <th width="70"></th>
        </tr>
    </thead>

    <tbody id="ListCompanies">
        @Html.Action("RowsList")
    </tbody>

</table>

@Ajax.ActionLink("Load more", "RowsList", new { page = 2 }, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "ListCompanies", InsertionMode = InsertionMode.InsertAfter, OnComplete = "AjaxCompleted" }) 
```

RowsList.cshtml：局部视图

```
@model IEnumerable<Domain.Models.Company>

@foreach (var item in Model)
{
    <tr id="@item.CompanyID">
        <td>@item.CompanyName</td>
        <td>@item.City.CityName</td>
        <td>@item.Street</td>

        <td nowrap>                                    
            @Html.ActionLink("Edit", ...) 
            @Html.ActionLink("Delete", "Delete", ...)
        </td>
    </tr>
} 
```

**问题：**用于加载下一页的链接具有这样的静态 href：

[http://localhost/Admin/Company/RowsList?page=2](http://localhost/Admin/Company/RowsList?page=2)

每次点击链接时，我需要：

*   加载 20 个下一个项目（没关系）
*   下次更新此链接加载下一页系列

由于以下原因，应该可以进行下一次加载：

[http://localhost/Admin/Company/RowsList?page=3](http://localhost/Admin/Company/RowsList?page=3)

[http://localhost/Admin/Company/RowsList?page=4](http://localhost/Admin/Company/RowsList?page=4)

[http://localhost/Admin/Company/RowsList?page=5](http://localhost/Admin/Company/RowsList?page=5)

...

此链接位于我的 index.cshtml 页面中，该页面未更新（因为仅重新加载了部分视图 RowsList）。

知道如何继续正确更新此链接吗？也许我不得不重构我的代码以获得更简单的“MVC”解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:21:33.847

为包含 a`PageNumber`和`Company`Properties 的视图创建一个 ViewModel，并将页码与数据一起传递

或者，如果您使用客户端脚本并通过 ajax 加载数据，则可以使用 jQuery

# user-interface - 浏览器/桌面/Android的用户界面语言

> ID：10106560
> 
> 赞同：0
> 
> 时间：2012-04-11T13:10:13.377
> 
> 标签：user-interface

我正在寻找一种用户界面语言来创建一个可以轻松移植以作为跨浏览器 Web 应用程序、桌面应用程序和 Android 应用程序运行的应用程序。有这样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:15:53.457

就个人而言，我会选择 Flash。移植跨浏览器和操作系统真的太容易了，并且被绝大多数 Android 设备支持，尤其是平板电脑。

如果您不打算将其移植到 iOS（iPhone、iPad），您应该可以使用 Flash。

可能会有不同的意见......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:15:58.060

我认为您将*很难*为移动和桌面编写相同的 UI；你最好的镜头可能是[Titanium Desktop](http://www.appcelerator.com/products/titanium-desktop-application-development/)和[Mobile](http://www.appcelerator.com/products/titanium-mobile-application-development/)的组合。

# .htaccess - 部分 URL 的 htaccess 重写规则

> ID：10106561
> 
> 赞同：1
> 
> 时间：2012-04-11T13:10:15.767
> 
> 标签：.htaccess, mod-rewrite

我尝试从

```
http://www.mydomain.com/pictures/generated/product/1/280_280_75/nopic.jpg 
```

至

```
http://www.mydomain.com/pictures/generated/product/1/280_280_75/nopic1.jpg 
```

这是我的规则

```
RewriteCond %{HTTP_HOST} ^mydomain\.com
RewriteRule nopic\.jpg$ nopic1\.jpg 
```

它以某种方式工作；）整个 URL 将被更改为“nopic1.jpg”。

问题是：如何只更改 URL 的最后一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:24:20.590

这应该有效：

```
RewriteRule ^(.*)nopic\.jpg$ $1nopic1\.jpg 
```

# c# - Visual Web Developer 2010 本地主机格式

> ID：10106563
> 
> 赞同：0
> 
> 时间：2012-04-11T13:10:17.780
> 
> 标签：c#, asp.net, visual-studio-2010, debugging

如果我在 Visual Web Developer Express 2010（即：http://localhost:67888）上调试我的网站，则格式全错，就好像它忽略了 CSS。它在网络服务器上很好。如何解决这个小问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:13:10.990

从缺乏信息很难判断。您最有可能通过完整的 URL 引用 CSS（例如[http://mysite.com/styles/mystyles.css](http://mysite.com/styles/mystyles.css)）。

尝试使用相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:17:41.770

在 Chrome 中打开它，然后使用检查元素（右键单击页面）单击资源选项卡，看看它们是否对样式表有错误

# ios - iOS 上的 SQLite + SQLCipher + FMDatabase

> ID：10106565
> 
> 赞同：2
> 
> 时间：2012-04-11T13:10:23.123
> 
> 标签：ios, sqlite, sqlcipher

我目前在我的 iOS 应用程序中使用 FMDatabase，我对此非常满意。我打算用 SQLCipher 加密 sqlite 数据库。

以下是我的问题：

1) FMDatabase 和 SQLCipher 是否兼容？我想我只需要在 FMDatabase 中添加一个名为 openEncrypted 的新方法……然后为 SQLCipher 完成这项工作。我希望所有 FMDatabase 方法都能正常工作。

2）实际上，我的应用程序中有 2 个数据库。然后我在我的应用程序中做一个 ATTACH DATABASE 来加入他们。我只想加密两者之一。它会起作用还是我需要加密 2 个数据库？（一个很关键，另一个不是）

3）如果我加密这些文件，我真的不明白我必须向 Apple 提供什么（文件）。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T01:20:33.190

对于那些正在寻找有关如何完成此操作的简单教程的人，我可以创建一个：[http ://www.guilmo.com/fmdb-with-sqlcipher-tutorial/](http://www.guilmo.com/fmdb-with-sqlcipher-tutorial/)

但最重要的部分是，打开您现有的数据库并附加一个新的加密数据库。然后在您的 FMDB 连接中设置密钥。

**SQLCipher - 加密数据库**

```
// Import sqlite3.h in your AppDelegate
#import <sqlite3.h>

// Set the new encrypted database path to be in the Documents Folder
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDir = [documentPaths objectAtIndex:0];
NSString *ecDB = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"];

// SQL Query. NOTE THAT DATABASE IS THE FULL PATH NOT ONLY THE NAME
const char* sqlQ = [[NSString stringWithFormat:@"ATTACH DATABASE '%@' AS encrypted KEY 'secretKey';",ecDB] UTF8String];

sqlite3 *unencrypted_DB;    
if (sqlite3_open([self.databasePath UTF8String], &unencrypted_DB) == SQLITE_OK) {

    // Attach empty encrypted database to unencrypted database
    sqlite3_exec(unencrypted_DB, sqlQ, NULL, NULL, NULL);

    // export database
    sqlite3_exec(unencrypted_DB, "SELECT sqlcipher_export('encrypted');", NULL, NULL, NULL);

    // Detach encrypted database
    sqlite3_exec(unencrypted_DB, "DETACH DATABASE encrypted;", NULL, NULL, NULL);

    sqlite3_close(unencrypted_DB);
}
else {
    sqlite3_close(unencrypted_DB);
    NSAssert1(NO, @"Failed to open database with message '%s'.", sqlite3_errmsg(unencrypted_DB));
}

self.databasePath = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"]; 
```

请注意，我们在 SQL Query 中设置了 2 个参数，即 DATABASE 和 KEY。DATABASE 应该是您要创建的加密数据库的**完整路径，在本例中为字符串 ecDB，而 KEY 参数是将用于加密您的数据库的密钥，因此请选择一个强大的**

现在在您的 FMDB 函数上，每次打开数据库后调用**[db setKey:@"strongKey"] 。**

```
// FMDatabase Example
FMDatabase *db = [FMDatabase databaseWithPath:[self getDatabasePath]];
[db open];
[db setKey:@"secretKey"];

// FMDatabaseQueue Exmple
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:[self getDatabasePath]];

[queue inDatabase:^(FMDatabase *db) {
    [db setKey:@"secretKey"];
    ...
}]; 
```

如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:18:06.483

1.  是的，您仍然需要在 SQLCipher 中编译，但您可以使用 FMDB。FMDB 还提供了为数据库设置加密密钥的功能
2.  您可以将非加密数据库附加到加密数据库（请参阅[http://sqlcipher.net/sqlcipher-api/#attach](http://sqlcipher.net/sqlcipher-api/#attach)）
3.  您通常需要在 DOC 进行加密注册，然后自我归类为大众市场[http://www.bis.doc.gov/encryption/question4.htm](http://www.bis.doc.gov/encryption/question4.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T10:52:57.867

嗨，我正在使用 swift，以下是我遵循的代码。但是我有一个问题，我可以用 SQLiteBrowser 打开 encrypted.sqlite 文件，我在这里错了。

```
 var db: COpaquePointer = nil;
        let databasePath = FileUtils.getPath("data.db")
        var ecDB = NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory.DocumentDirectory, NSSearchPathDomainMask.UserDomainMask, true)[0].stringByAppendingPathComponent("encrypted.sqlite")
  let result = String.fromCString("ATTACH DATABASE \(ecDB) AS encrypted KEY TaP")
if (sqlite3_open(databasePath, &db) == SQLITE_OK) {
 sqlite3_exec(db, result!, nil, nil, nil);
 sqlite3_exec(db, "SELECT sqlcipher_export('encrypted');", nil, nil, nil);
 sqlite3_exec(db, "DETACH DATABASE encrypted;", nil, nil, nil);
sqlite3_close(db);
        }
        else {
            sqlite3_close(db);
            sqlite3_errmsg(db);
        } 
```

# objective-c - 检查 NSRunLoop 并使用适当的 NSURLConnection 方法

> ID：10106566
> 
> 赞同：4
> 
> 时间：2012-04-11T13:10:28.577
> 
> 标签：objective-c, cocoa, foundation

我正在做一个个人项目，昨晚遇到了 NSURLConnection 的异步性质。我正在构建一个与 restful api 接口的库。我期待在 Foundation 命令行工具和 Cocoa 应用程序中重用这个库。

有没有一种方法可以检查runloop是否可以调用同步方法，如果不是，则发送同步请求（如果在命令行工具中使用）。

或者，有没有办法始终使用异步方法，但强制应用程序在异步请求完成之前不退出？

我注意到了[这一点](https://stackoverflow.com/a/267392/949653)，但我宁愿不必将调用放在库外运行。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T17:41:18.167

> 或者，有没有办法始终使用异步方法，但强制应用程序在异步请求完成之前不退出？

非常简单：

```
int main(int argc, char *argv[])
{   
    // Create request, delegate object, etc.
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
                                                                  delegate:delegate 
                                                          startImmediately:YES];
    CFRunLoopRun();
    // ...
} 
```

我`CFRunLoopRun()`在这里使用它是因为以后可以在委托确定连接完成时停止它：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    // This returns control to wherever you called
    // CFRunLoopRun() from.
    CFRunLoopStop(CFRunLoopGetCurrent());
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Error: %@", error);
    CFRunLoopStop(CFRunLoopGetCurrent());
} 
```

另一个选项是`-[NSRunLoop runUntilDate:]`在 while 循环中使用，并让委托设置一个“停止”标志：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
                                                              delegate:delegate 
                                                      startImmediately:YES];

while( ![delegate connectionHasFinished] ){
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:50:49.530

我想您可以通过查看是否`NSClassFromString(@"NSApplication")`返回非来检查程序是否与 AppKit 链接`Nil`。然后，您可以使用`+[NSThread isMainThread]`.

然而，图书馆试图“强制”应用程序不以任何原因退出是糟糕的设计。只需确定该库需要应用程序的合作，并提供一个清理和完成例程供其调用。可能还有一个正在进行的事情吗？功能。

# c# - T-SQL 到 LINQ 的转换

> ID：10106567
> 
> 赞同：3
> 
> 时间：2012-04-11T13:10:31.203
> 
> 标签：c#, .net, sql, linq, linq-to-sql

我有以下 SQL 语句

```
SELECT 
    c.CorpSystemID, c.SystemName  , 
    case when a.TaskItemID is NULL then 'false' else 'true' end as Assigned
FROM CorpSystems c 
LEFT OUTER JOIN
     (SELECT CorpSystemID, TASKItemID 
      FROM AffectedSystems 
      where TASKItemID = 1) a ON c.CorpSystemID = a.CorpSystemID 
```

谁能帮我将此语句转换为 LINQ？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:20:28.820

好的，假设您在一个名为的变量中有一个`CorpSystem`对象列表，在一个名为 的变量中有一个对象`Corpsystems`列表。尝试以下操作：`AffectedSystem``AffectedSystems`

**编辑：要加入所有受影响的系统，试试这个：**

```
var matches = from c in CorpSystems
              join a in AffectedSystems on c.CorpSystemId equals a.CorpSystemId into ac
              from subSystem in ac.DefaultIfEmpty()
              select new
                     {
                         c.CorpSystemId,
                         c.SystemName,
                         Assigned = subSystem != null && subSystem.TaskItemId != null
                     }; 
```

**或者仅针对 TaskItemId 为 1 的 AffectedSystems：**

```
var matches = from c in CorpSystems
              join a in AffectedSystems.Where(as => as.TaskItemId == 1)
                  on c.CorpSystemId equals a.CorpSystemId into ac
              from subSystem in ac.DefaultIfEmpty()
              select new
                     {
                         c.CorpSystemId,
                         c.SystemName,
                         Assigned = subSystem != null && subSystem.TaskItemId != null
                     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:19:20.513

假设您不想手动完成该过程，请参阅以下 SO 问题[SQL to LINQ Tool的答案。](https://stackoverflow.com/questions/296972/sql-to-linq-tool)

# jquery - jQuery 同位素不适用于我的布局

> ID：10106568
> 
> 赞同：2
> 
> 时间：2012-04-11T13:10:34.423
> 
> 标签：jquery, html, layout, jquery-isotope

我在使用 jquery isotope 插件时遇到了一些问题，由于某种原因，它不适用于我当前的布局，基本上我想要左侧的侧边栏，右侧包含一堆小盒子（同位素元素）的容器，它们重新-与 isotope 一样，根据浏览器的大小进行定向。

由于某种原因，同位素不喜欢我的布局，加载网站时会在右侧简要显示同位素元素，但它们很快就会消失，留下`#container`没有宽度。

这是我第一次使用该插件，我不确定我是否可能遗漏了一些非常基本的东西，但是当我删除所有其他 html 并且只 leave`#container`时，isotope 会按预期运行。

我已经用我的所有代码设置了一个[小提琴](http://jsfiddle.net/Ftg8u/)。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:31:07.213

我不认为同位素与漂浮物配合得很好。相反，您可以使用边距将同位素容器向右移动，然后绝对定位到左侧。

我更新了您的示例：http: [//jsfiddle.net/Ftg8u/7/](http://jsfiddle.net/Ftg8u/7/) 这对您有用吗？

# java - 填写预格式化的文本文件以发送电子邮件 - MessageFormat 替代方案

> ID：10106576
> 
> 赞同：1
> 
> 时间：2012-04-11T13:10:48.660
> 
> 标签：java, spring, messageformat

我使用[MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)用参数格式化文件的内容，并得到一个带有正确参数的格式化字符串。（我用它来格式化电子邮件正文。最后我每个电子邮件正文都有一个文件，应用程序需要发送很多不同的电子邮件，所以我得到了很多预格式化的正文文件）

到目前为止，我有六个参数。

问题：事情正在发生变化，现在我今天有超过 6 个参数....

我意识到 MessageFormat 仅限于 6 个参数！

我能做些什么？MessageFormat 有替代方案吗？或者唯一的解决方案是将每个电子邮件行放在属性中（并希望每行参数不超过 6 个！）谢谢，Christophe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:14:05.487

使用模板库。[以Freemarker](http://freemarker.sourceforge.net/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:29:31.430

由于您已将其标记为“spring”，因此您可以使用 Apache Velocity 模板引擎 (VelocityEngineFactoryBean)，将其作为 VelocityEngine 连接到您的类中。

然后，您可以使用 VelocityEngineUtils.mergeTemplateIntoString() 传递模板文件的名称（存储在您的类路径中）

# csv - 为什么 OpenOffice Calc 在 CSV 文件中将“0411 08:55”解释为“411:08:55”以及如何处理？

> ID：10106579
> 
> 赞同：-1
> 
> 时间：2012-04-11T13:11:08.250
> 
> 标签：csv, spreadsheet, openoffice-calc

我想这个问题说明了一切。我的应用程序输出一个纯文本 CSV 文件，其中显示了月份/日期，没有分隔字符。这在记事本中很明显。为了清楚起见，我什至尝试在它周围加上引号。Calc 不仅在表格中显示此 BS，甚至在编辑单元格文本框中显示该 BS，而不是显示那里清楚地写的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:48:09.027

当您将 CSV 导入 Calc 时，选择此列并将其类型更改为“文本”，这将阻止 Calc 将其解析为数字/日期时间。

然后，在电子表格上，您有足够的工具可以轻松地将其解析为您想要的值。我所说的“工具”是指公式，如`value`, `mid`,`date`等。

# jsf - 数据表 - 属性/列值更改时的总计

> ID：10106587
> 
> 赞同：0
> 
> 时间：2012-04-11T13:11:21.760
> 
> 标签：jsf, primefaces

我正在使用 Primefaces 3.2，并且我有一个场景，我需要在属性/列值更改时在我的数据表中提供一个总行。Primefaces 具有实际使用排序的子表和求和功能，从而改变了我不需要的数据顺序。我不需要排序。我在数据表中的数据已经按特定顺序排列，我希望在属性级别的中断处进行总计。请参阅下面的示例，我希望在更改 F 列时总列（属性 H）。它是否可以使用子表，那么我错过了一些东西。如果我需要手动插入小计，那么我正在寻找一些代码示例。我的数据表列表是在表上运行查询创建的。

由于下面显示的数据不是真正可读的，所以只想解释一下。F 列包含值“C”或“D”，H 列包含金额。我想要 C/D 更改时的总计，而不使用子表或总和行或其他方式指定排序选项。

> B列 C列 D列 E列 F列 G列 H列
> 
> AAAAAA XXXXXXXXXX AAA ABCDEFG C 1111111111 1.00
> 
> AAAAAA XXXXXXXXXX AAA HIJKLMNO C 11111111111 1.00
> 
> AAAAAA XXXXXXXXXX AAA ABCDEFGH C 11111111111 1.00
> 
> AAAAAA XXXXXXXXXX AAA BCDFERHJ C 22222222222 1.00
> 
> 总计 4.00
> 
> AAAAAA XXXXXXXXXX AAA ABCDEFG D 3333333333 1.00
> 
> AAAAAA XXXXXXXXXX AAA HIJKLMNO D 3333333333 1.00
> 
> AAAAAA XXXXXXXXXX AAA ABCDEFGH D 3333333333 2.00
> 
> 总计 4.00
> 
> BBBBBB YYYYYYYYY BBB XXXXXXXXXX C 4444444444 1.00
> 
> 总计 1.00
> 
> BBBBBB YYYYYYYYY BBB XXXXXXXXXX D 4444444444 1.00
> 
> 总计 1.00

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:07:19.223

您可以看到使用摘要行和翻转排序的可能性。

[http://www.primefaces.org/showcase/ui/data/datatable/summaryRow.xhtml](http://www.primefaces.org/showcase/ui/data/datatable/summaryRow.xhtml)

# regex - .htaccess 目录重定向

> ID：10106591
> 
> 赞同：0
> 
> 时间：2012-04-11T13:11:38.620
> 
> 标签：regex, .htaccess, redirect, directory, dns

我们网站的文件位于**domain1.com/directory** - 我刚刚购买了一个新域 ( **domain2.com** )，并希望它看起来好像文件来自新域，但实际上是从**domain1.com中提取内容/目录**

您能否帮我提供 domain1.com 根目录中 .htaccess 文件的必要代码**，**以便**domain2.com**指向**domain1.com/directory**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:17:02.333

采用：

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain2.com [nc]
rewriterule ^(.*)$ http://www.domain2.com/directory/$1 [r=307,nc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:10:29.053

感谢阿德里亚诺的回答。最后，我使用了 CNAME DNS 条目的组合来指向原始域，并使新域成为原始域的 cPanel 中的“附加域”。现在一切正常。

# mysql - 在 Rails 3.1 中将 CSV 数据导入 MySql 数据库的验证？

> ID：10106592
> 
> 赞同：0
> 
> 时间：2012-04-11T13:11:48.483
> 
> 标签：mysql, ruby-on-rails, validation, csv, ruby-on-rails-3.1

我成功实现了将数据从 csv 导入 MySQL 数据库的任务。现在，我的要求是：如果导入时 csv 文件中的数据有任何不匹配，我需要获取带有行号的错误消息。

这是我的控制器代码：** `require 'csv'` #在顶部，然后是...

```
def load_csv
# no code
end

def import_csv
parsed_file = CSV.foreach(params[:csv].tempfile,:headers => true) do |row|
row = row.to_hash.with_indifferent_access
Institute.create!(row.to_hash.symbolize_keys)
redirect_to :action => :index
end 
```

在我看来/ load_csv.html.erb：

```
<%= form_for(:institute, :url => import_csv_institutes_path,  :html => {:multipart => true}) do |f| %>
<div class="field">
<%= file_field_tag :csv %>
<%= f.submit 'Import' %>
</div>
<% end %> 
```

这是我用于导入的仅有的两个步骤。模型验证仅适用于表单和 csv，显示错误页面..请尝试帮助我............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:05:05.307

将错误消息分配给 import_csv 方法中的 flash[:notice] 变量。在重定向之前执行此操作。

[http://guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html)

# html - 在 Redmine 中转义 HTML 字符串

> ID：10106594
> 
> 赞同：0
> 
> 时间：2012-04-11T13:11:51.613
> 
> 标签：html, ruby-on-rails, ruby, redmine, redmine-plugins

我最近将我的 Redmine 从 1.0 升级到了 1.3.2。更新后，它还会在显示数据时返回 HTML 标记。

它正在显示这样的 HTML 数据

```
<p>Please add the following text &nbsp;</p>
<p>&nbsp;</p> 
```

但应该是

```
Please add the following text 
```

我已经尝试过`<%=h %>`方法，但它对我不起作用

我正在使用 Rails 2.3.14 和 Ruby 1.8.7。提前致谢

# eclipse - 在上下文菜单的处理程序中获取画布上的点击位置

> ID：10106596
> 
> 赞同：2
> 
> 时间：2012-04-11T13:12:02.310
> 
> 标签：eclipse, location, coordinates, contextmenu, rcp

我有一个 Eclipse RCP 应用程序，其中注册了一个菜单贡献，因此当用户右键单击定义视图中的特殊画布时，将自动显示上下文菜单。

现在，在某些处理程序中，我希望能够在显示上下文菜单时获取用户在画布上单击的鼠标坐标。这些处理程序将由在此上下文菜单中定义的命令执行。

处理程序的执行方法中的 ExecutionEvent 不提供此信息。

如何获取用户单击的光标位置以打开上下文菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:14:53.687

如果上下文菜单是通过鼠标事件打开的，那么`ExecutionEvent.getTrigger()`将是 SWT`MouseDown`事件，其中包括正确的坐标。

# java - 需要帮助了解 Twitter 的开源 Mysql 更改/更新

> ID：10106599
> 
> 赞同：0
> 
> 时间：2012-04-11T13:12:21.447
> 
> 标签：java, mysql, sql, database-design, twitter

Twitter 已经开源了他们的 Mysql 源代码。

这篇博文[http://engineering.twitter.com/2012/04/mysql-at-twitter.html](http://engineering.twitter.com/2012/04/mysql-at-twitter.html)提到了不同的变化。

我曾使用 Mysql 作为开发人员执行查询，但从未深入挖掘其源代码。我尝试浏览 github [https://github.com/twitter/mysql](https://github.com/twitter/mysql)上的源代码，但不知所措。所以想我会在这里发帖并获得一些帮助。

1.  我想更好地了解 Twitter 的更改如何改进了 Mysql，而不是 Oracle 的版本。

2.  如果我要在 Oracle 的版本和 Twitter 的版本之间做一个苹果对苹果的比较，那么两者之间的具体优势和劣势是什么。

还有更多的问题出现在我的脑海中。

我知道这是一个高级数据库主题，但我很想了解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:57:56.677

他们将这些变化描述为：

> 添加额外的状态变量，特别是来自 InnoDB 的内部。这使我们能够更有效地监控我们的系统，并在处理生产工作负载时更好地了解它们的行为。
> 
> 优化大型 NUMA 系统上的内存分配：在启动时完全分配 InnoDB 的缓冲池，如果内存不可用，则快速失败，即使服务器处于内存压力下，也能确保随着时间的推移性能。
> 
> 通过改进的服务器端语句超时支持减少不必要的工作。这允许服务器主动取消运行时间超过毫秒粒度超时的查询。
> 
> 使用安全轻量级的方法导出和恢复 InnoDB 缓冲池。这使我们能够以最小的痛苦构建工具来支持我们的服务的滚动重启。
> 
> 针对基于 SSD 的机器优化 MySQL，包括页面刷新行为和减少对磁盘的写入以延长使用寿命。

这些对于 Twitter 规模的网站很重要。如果您正在构建必须扩展到该大小的东西 - 是的，这些更改会有所帮助。但是，如果您正在构建的东西更像世界上所有其他温和流行的网站，您可能不需要关心它们的变化。大多数运行 MySQL 的大型网站直接从发行版运行它。

# windows-8 - Windows 8 - 会话在哪里？

> ID：10106603
> 
> 赞同：0
> 
> 时间：2012-04-11T13:12:32.757
> 
> 标签：windows-8, microsoft-metro

我计划使用 HTML/JavaScript 项目类型在 Windows 8 中开发一些小的东西。我有一个非常基本的问题。我将如何管理谁登录的会话以及他们在做什么？这看起来有点荒谬，所以我将尝试详细说明我的想法。

```
User opens the app and gets login page.
User enters username/password.
App calls WCF service or WebAPI and validates the user. 
```

在第三步之后，用户信息必须保存在某个地方，因为我必须每次都知道谁是登录用户，以便我可以检查每个操作，用户拥有什么权限以及他是否有权执行特定操作.

由于这里的所有内容都是 HTML/JS，我不知道我应该将用户登录信息保存在哪里？

有人可以解释一下我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:13:11.367

使用`PasswordVault`API 存储密码或其他秘密

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx)

然后您可以将您的身份验证令牌与后续请求一起发送。

这是你要问的吗？或者，我误解了？

# javascript - 用于删除前导点的 Javascript 函数

> ID：10106610
> 
> 赞同：3
> 
> 时间：2012-04-11T13:12:59.857
> 
> 标签：javascript, regex, replace

我有一个带有前导点的 javascript 字符串。我想使用 javascript 替换功能删除前导点。我尝试了以下代码。

```
var a = '.2.98»';
document.write(a.replace('/^(\.+)(.+)/',"$2")); 
```

但这不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T13:15:50.197

以下内容将字符串开头的点替换为空字符串，而字符串的其余部分保持不变：

```
a.replace(/^\./, "") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T13:16:19.243

如果不需要，请不要执行正则表达式。

一个简单`charAt()`的 and a `substring()`or a `substr()`(only if `charAt(0)`is `.`) 就足够了。

* * *

**资源：**

*   [developer.mozilla.org：`charAt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charAt)
*   [developer.mozilla.org：`substring()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)
*   [developer.mozilla.org：`substr()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substr)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:15:12.810

你的正则表达式是错误的。

```
var a = '.2.98»';
document.write(a.replace('/^\.(.+)/',"$1")); 
```

您尝试匹配`(.+)`前导点，但这不起作用，您想要`\.`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:18:27.270

把事情简单化：

```
if (a.charAt(0)=='.') {
  document.write(a.substr(1));
} else {
  document.write(a);
} 
```

# php - CSS背景不显示

> ID：10106612
> 
> 赞同：2
> 
> 时间：2012-04-11T13:13:08.337
> 
> 标签：php, html, css

经过几年的休息后，我重新开始了网页设计，所以我之前经常使用的许多技巧和窍门似乎都不起作用。我正在为我的魔兽世界公会设计一个公会网站以进行一些练习，但我在让 div 背景图像正确显示在页面上时遇到问题。

该页面由一个容器 DIV、一个标题 DIV、一个菜单 DIV 和一个三列布局组成，当然还有一个页脚 div。在菜单上方，我有一点我正在使用的艺术背景，我设法让那个出现了；但是，我无法让正确的图像正确显示在左栏或右栏上方。我已经在网上搜索了大量内容，但仍然对我做错了什么感到目瞪口呆。这是我希望布局看起来像的屏幕截图：http: [//s19.postimage.org/7svzmuaf7/Layout_V2.jpg](http://s19.postimage.org/7svzmuaf7/Layout_V2.jpg)

目前，当您在任何主流浏览器中访问该网站时，我都会得到以下结果：http: [//cirquedufreak.net78.net/](http://cirquedufreak.net78.net/)

两者显然存在一些差异，因为一个只是 jpg，另一个是 css/html 组合，我知道。感谢您提供任何帮助。

源代码：

索引.php：

```
<?php
session_start();
include("wowarmoryapi/BattlenetArmory.class.php");
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home - Cirque du Freak of Vashj</title>
<link rel="stylesheet" type="text/css" href="layout.css" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
</head>

<body>
<div id="container">
    <div id="header">&nbsp;</div>
    <div id="menu">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Roster</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Books</a></li>
        </ul>
    </div>
    <div id="leftbar">LEFTBAR</div>
    <div id="content">
        <div id="gmod">
            <h1>Important Message</h1>
            <p>This is where any "breaking news" or important information that you want to give to the players will be displayed.</p>
        </div>
    </div>
    <div id="rightbar">
        <p>For an invitation, contact one of the following players in game:</p>
        <?php

        ?>
    </div>
    <div id="footer">&copy;2012 Cirque du Freak Guild of Vashj; All Rights Reserved.<br />World of Warcraft and related images and materials are &copy; Blizzard Entertainment.</div>
</div>
</body>
</html> 
```

布局.css：

```
@charset "utf-8";
/* CSS Document */

/* CSS LAYOUT BEGIN */
body {
    margin: 0;
    padding: 0;
    background-color: #000;
    color: #FC3;
    text-align: center;
}
div#container {
    margin: 0 auto;
    text-align: left;
    width: 1024px;
    height: auto;
}
div#header {
    width: 1024px;
    height: 147px;
    background: url(images/v2_header.png);
}
div#menu {
    width:1024px;
    height: 70px;
    text-align:center;
    background: url(images/v2_menuBG.png);
}
div#leftbar {
    float: left;
    width: 170px;
    height: 525px;
    min-heigh: 150px;
    background-image: url(images/v2_barBG.png) no-repeat;
    display: inline-block;
    background-position: top left;
}
div#content {
    float: left;
    width: 684px;
    min-height: 50px;
    height: 525px;
}
div#rightbar {
    float: right;
    width: 170px;
    height: 525px;
    min-height: 50px;
    background-image: url(images/v2_barBG.png) no-repeat;
}
div#footer {
    width: 1024px;
    height: 50px;
    text-align: center;
    clear: both;
}
/* CSS LAYOUT END */

/* CSS MENU BEGIN */
#menu ul {
    margin: 0;
    padding: 0;
    float: left;
    list-style: none;
    width: 1024px;
}

#menu ul li {
    display: inline;
}

#menu ul li a {
    float: left;
    text-decoration: none;
    padding: 10.5px 11px;
    width: 140px;
    color: #FF0;
    font-weight: bold;
    font-size: 24px;
    background-color: transparent;
    vertical-align: text-bottom;
}
#menu ul li a:visited {
    color: #FF0;
}
#menu ul li a:hover, #menu ul li .current {
    color: #F00;
    text-decoration: underline;
    background-color: transparent;
}
/* CSS MENU END */

/* LEFT BAR CSS BEGIN */

/* LEFT BAR CSS END */

/* CONTENT BOX CSS BEGIN */
#content div#gmod {
    width: 500px;
    height: 150px;
    text-align: center;
    border: #FFF 3px solid;
    background-color: #000;
    margin: 0 auto;
    color: #FFF;
    overflow-style: auto;
    overflow: scroll;
    overflow-x: hidden;
    padding-left: 4px;
    padding-right: 4px;
}
#content div#gmod h1 {
    text-align: center;
    color: #F00;
    font-size: 24px;
    font-weight: bold;
    text-decoration: underline;
    padding: 0px 5px;
/* CONTENT BOX CSS END */

/* RIGHT BAR CSS BEGIN */

/* RIGHT BAR CSS END */

/* FOOTER CSS BEGIN */
#footer {
    color: #999;
    text-align: center;
}
/* FOOTER CSS END */ 
```

非常感谢您花时间帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:17:24.327

不要使用

```
background-image: url(images/v2_barBG.png) no-repeat; 
```

但

```
background: url(images/v2_barBG.png) no-repeat; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:17:11.163

`background-image: url(images/v2_barBG.png) no-repeat;`应该`background-image: url(images/v2_barBG.png); background-repeat: no-repeat;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T13:17:53.283

`background-image: url(images/v2_barBG.png) no-repeat;`<-- no-repeat 应该像这样单独声明：`background-repeat: no-repeat;`

# javascript - javascript使用对象键和值的变量

> ID：10106618
> 
> 赞同：1
> 
> 时间：2012-04-11T13:13:21.437
> 
> 标签：javascript, jquery

我有以下代码：

```
 pub.call_response = function() {
            return {
                units: [
                    {
                        test_attributes: {

                        }

                    }
                ]
            };
        }; 
```

我有一组变量需要用于键/值，`test_attributes`如下所示：

```
var key1 = something;
var key2 = something;
var value1 = something;
var value2 = something;

pub.call_response = function() {
                return {
                    units: [
                        {
                            test_attributes: {
                               key1: value1,
                               key2: value2
                            }

                        }
                    ]
                };
            }; 
```

显然，这是行不通的。有没有人对如何做这样的事情有任何想法？使用 jQuery 是可以接受的。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T13:16:47.433

你应该做

```
var key1 = something;
var key2 = something;
var value1 = something;
var value2 = something;

var attributes = {};

attributes[key1] = value1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:16:39.273

要引用`prop`对象`obj`（即`prop.obj`）上的属性，您还可以使用方括号`[]`

因此，以下是等价的：

```
var x = prop.obj;

var key = "obj";
var t = prop[key]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:17:29.563

```
var key1 = something;
var key2 = something;
var value1 = something;
var value2 = something;

pub.call_response = function() {
    var item = {
        test_attributes: {}
    };
    item.test_attributes[key1] = value1;
    item.test_attributes[key2] = value2;

    var obj = {
        units: [item]
    };

    return obj;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:17:48.440

```
var key1 = something;
var key2 = something;
var value1 = something;
var value2 = something;

pub.call_response = function() {
    var u    = {};
    u[key1]  = value1;
    u[key2]  = value2;

    return {
         units: [{
             test_attributes : u
         }]
    };
}; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-11T13:18:51.070

```
var obj = {};
obj[key1] = value1;
obj[key2] = value2;

return {
    units: [ { test_attributes: obj } ]
}; 
```

# system.reactive - Processing events from Event Log and react on a certain pattern (Rx?)

> ID：10106622
> 
> 赞同：6
> 
> 时间：2012-04-11T13:13:36.487
> 
> 标签：system.reactive, event-log

I need to process events coming from the EventLog. This is easy using the [EventLogWatcher](http://msdn.microsoft.com/en-us/library/bb671202%28v=vs.90%29.aspx) attaching to the EventRecordWritten event. However the query I am interested in (eventid == 299 || eventid == 500) provides more events than what I need. Here is an example of the stream

```
Event ID   Correlation ID
299        1AD...  (this is actually a guid)  X1
500        1AD...                             X2
500        1AD...
500        1AD...
299        43B...                             Y1
299        EDB...                             Z1
500        43B...                             Y2
500        EDB...                             Z2
500        43B...
500        43B... 
```

I am interested in the event 299 and the first event 500 that matches the correlation id of the 299 event. I marked them in the stream above, that's the output collection I am interested in: `[X1, X2, Y1, Y2, Z1, Z2]` which probably is a dictionary using the correlation id as a key and a tuple of `EventRecord` as the value

```
{ 1AD.., <X1, X2> }
{ 43B.., <Y1, Y2> }
{ EDB.., <Z1, Z2> } 
```

In general events might come in order (299 and then 500) but in a high concurrency situation I foresee two 299 events coming together and then the 500 events so I don't want to rely on the order the events come. The correlation id is the key to correlate them (which is the first property of the event `eventRecord.Properties[0]`)

I think this can be solved with a state machine but it would be interesting to see if anyone comes up with a solution with Rx represented by a query to an observable. That would keep the pattern matching logic in a single place.

**UPDATE**: here is the answer to the solution. Thanks Gideon it was exactly the starting point I needed!

```
var pairs = events
            .Where(e299 => e299.EventArgs.EventRecord.Id == 299)
            .SelectMany(e299 => events.Where(e500 => e500.EventArgs.EventRecord.Id == 500 &&
                                                    e299.EventArgs.EventRecord.Properties[0].Value.ToString() ==
                                                    e500.EventArgs.EventRecord.Properties[0].Value.ToString())
                                    .Take(1), 
                        (e299, e500) => new { First = e299, Second = e500 }); 
```

Thanks in advance, Matias

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T17:42:46.997

If the 299 events always come before the 500 events, `SelectMany` and `Where` should be enough.

```
var events; //declared somewhere

var pairs = from e299 in events
            where e299.eventid == 299
            from e500 in events
            where e500.eventid == 500 &&
                  e299.Correlation == e500.Correlation
            select new with {Correlation = e299.Correlation,
                             First = e299,
                             Second = e500} 
```

If your source has multiple 500 events for each correlated 299 event, you may need to switch to lambda syntax and add a `Take(1)` to the second subscription.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T20:16:16.063

You should look at using Observable.When, with Joins. This will allow you to compose complex join patterns like you desire.

For example see, [https://stackoverflow.com/a/3868608/13131](https://stackoverflow.com/a/3868608/13131) and [Guide to System.Reactive.Joins](https://stackoverflow.com/questions/9596140/guide-to-system-reactive-joins).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T17:14:51.777

I don't know what you mean with "a state machine".

But you could write an observer that collects (eventid == 299 || eventid == 500). Using throttle strategy (collect the lastest 1000 events, or the latest minute, I don't know), it raise an event when it detects a pair of events 299, 500 have the same guid, removing then from its internal dictionary/list of events.

Then, that kind observer IS THE observable for the rest of your system.

Maybe a list could be collect the events, and when a new event is detected, something like

events.Where(e => e.eventid == newevent.eventid && ((e.id == 299 && newev.id == 500) || (e.id == 500 && newev.id == 299))

could be enough in performance, instead of having a dictionary by guid.

See you later, Mathew!

# django - 自定义 Django RSS 不起作用

> ID：10106635
> 
> 赞同：0
> 
> 时间：2012-04-11T13:14:20.027
> 
> 标签：django, rss

我是菜鸟，所以如果这是一个愚蠢的要求，请原谅。我正在尝试为网站的每个类别创建自定义 RSS 提要，但不知何故我无法传递参数（类别 slug）以正确构建请求的提要。RSS 应位于如下地址：[http ://www.website.com/category-name/feed](http://www.website.com/category-name/feed)

这是我所拥有的：

在 urls.py 中：

```
from project.feeds import FeedForCategory
urlpatterns = patterns('category.views',
 #...
 url(r'^(?P<category_slug>[a-zA-Z0-9\-]+)/feed/?$', FeedForCategory),
) 
```

在 feeds.py 中：

```
from django.contrib.syndication.feeds import Feed

class FeedForCategory(Feed):

  def get_object(self, request, category_slug):
    return get_object_or_404(Category, slug_name=category_slug)

  def title(self, obj):
    return "website.com - latest stuff"

  def link(self, obj):
    return "/articles/"

  def description(self, obj):
    return "The latest stuff from Website.com"

  def get_absolute_url(self, obj):
    return settings.SITE_ADDRESS + "/articles/%s/" % obj.slug_name

  def items(self, obj):
    return Article.objects.filter(category=category_slug)[:10] 
```

我得到的错误是：“_ *init* _() got an unexpected keyword argument 'category_slug'”，但回溯没有帮助，它只显示了一些基本的 python 内容。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:24:09.797

来自文档：[https ://docs.djangoproject.com/en/dev/ref/contrib/syndication/](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/)

您需要将提要对象的实例传递给您的 url 模式。所以在 urls.py 中这样做：

```
from project.feeds import FeedForCategory
urlpatterns = patterns('category.views',
 #...
url(r'^(?P<category_slug>[a-zA-Z0-9\-]+)/feed/?$', FeedForCategory()),
) 
```

# magento - 需要 Magento 帮助 - 标题标签不起作用

> ID：10106650
> 
> 赞同：0
> 
> 时间：2012-04-11T13:15:09.417
> 
> 标签：magento

我的 magento 网站有问题。我不是唯一一个研究过它的开发人员，并且对这个问题感到非常困惑，因为我不经常使用 Magento。

问题是我所有页面和产品的标题标签完全相同 - 这是我在配置 > 设计 > html 头 > 默认标题中输入的内容。例如 - 'welcome to blabla' 如果我删除默认标题中的内容，则根本不会显示任何标题标签。

我已经给出了我想要使用的所有产品元标题......但它没有选择它们。

我的头文件没有被更改并显示：

```
<title><?php echo $this->getLayout()->getBlock('breadcrumbs')->toHtml(); ?></title>
<meta http-equiv="Content-Type" content="<?php $this->getLayout()->getBlock('breadcrumbs')->toHtml(); ?>" />
<meta name="description" content="<?php echo htmlspecialchars($this->getDescription()) ?>" />
<meta name="keywords" content="<?php echo htmlspecialchars($this->getKeywords()) ?>" />
<meta name="robots" content="<?php echo htmlspecialchars($this->getRobots()) ?>" /> 
```

如果我将标题更改为 test 之类的东西，它确实会接受更改，所以我的头文件正在工作。

真的需要一些帮助。我在版本 1.4.2 上，无法真正升级。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:54:35.927

我认为您在该片段中可能有错误的 echo 语句。现在，它正在尝试以“面包屑”的名称呈现块。如果该块仅包含一个标题，那么它将在所有页面上显示一个标题。

也许尝试替换这个：

```
<title><?php echo $this->getLayout()->getBlock('breadcrumbs')->toHtml(); ?></title> 
```

有了这个：

```
<title><?php echo $this->getTitle() ?></title> 
```

# java - 将long转换为int，保持正/负/0

> ID：10106651
> 
> 赞同：5
> 
> 时间：2012-04-11T13:15:09.527
> 
> 标签：java, integer, long-integer

我想实现一个`java.util.Comparator`with `Long`：

```
new Comparator<Long>() {
    public int compare(Long l1, Long l2) {
        // (*)
    }
} 
```

我有一个运营商的解决方案`?:`：

```
return l1==l2 ? 0 : (l1>l2 ? 1 : -1); 
```

但我想知道是否还有其他方法可以实现它。

（我正在尝试`return (int)(l1-l2)`，但它不正确）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-11T13:16:42.173

这很简单——`Long`它本身提供了一个实现：

```
public int compare(Long l1, Long l2) {
    return l1.compareTo(l2);   
} 
```

另一方面，那时我不确定你为什么有一个自定义比较器......

编辑：如果您*实际上是*在比较`long`值并且使用的是 Java 1.7，则可以使用`Long.compare(long, long)`. 否则，请使用您当前的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:16:25.797

不，这是唯一有效的方法。这个话题已经讨论过很多次了。当然，`java.lang.Long`已经实现了 compareTo 函数，但它与您的实现完全相同。

# linux - 关于 shell 命令的桌面通知已完成

> ID：10106659
> 
> 赞同：4
> 
> 时间：2012-04-11T13:15:36.140
> 
> 标签：linux, shell

是否可以启用有关外壳进程完成的桌面通知？只有当我在不同的桌面上并且处理时间超过 x 秒时，我才会收到通知。更确切地说：

我想为我在终端中运行的每个进程执行此操作，例如运行规范、编译、部署。我用侏儒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:26:30.613

似乎有[几种工具](https://superuser.com/questions/31917/is-there-a-way-to-show-notification-from-bash-script-in-ubuntu)，哪个最好取决于您的桌面环境和正在使用的通知守护程序。甚至还有一个库 (libnotify) 可以用来编写您自己的工具。简短的回答：是的，这是可能的。

```
notify-send "This message will be displayed for 3 seconds" -t 3000

gmessage -center -nofocus -font 'Sans Bold 48' "Laundry Done"

zenity --warning --text="Laundry Done!"

kdialog --passivepopup "Laundry Done!" 
```

# c# - C#，用户控件，事件 - 用户控件的控件事件覆盖？

> ID：10106664
> 
> 赞同：1
> 
> 时间：2012-04-11T13:15:46.373
> 
> 标签：c#, events, button, user-controls, event-handling

在我的 C# 程序中，我有一个带有标签和按钮的自定义控件。如何设置我的控件，以便当用户单击按钮时，它会覆盖自定义控件的 Click 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:19:00.373

只需调用控件的 OnClick() 方法：

```
 private void button1_Click(object sender, EventArgs e) {
        this.OnClick(e);
    } 
```

触发控件的 Click 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:21:49.117

你可以这样写：

```
public new event EventHandler Click {
  add { button1.Click += value; }
  remove { button1.Click -= value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:18:58.807

这是完整的文章，向您解释如何实现它：[**从自定义控件中公开自定义事件**](http://pranayamr.blogspot.ca/2012/01/exposing-custom-event-from-custom.html)

以下是用户控件中使用的下拉菜单和公开事件的步骤，您需要为您的按钮做同样的事情，阅读上面的链接后您会得到更多的想法

**第 1 步：在用户控件 cs 文件中注册事件**

```
public event EventHandler DrpChange; 
```

**第 2 步：处理用户控件 cs 文件中引发事件的虚拟函数**

```
public virtual void OnDropDownChange()
    {
        if (DrpChange != null)
        {
            this.DrpChange(this, EventArgs.Empty);
        }
    } 
```

**第 3 步：注册 ASCX.CS 文件中下拉列表的更改事件**

```
protected void ddlDropDown_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.OnDropDownChange();
    } 
```

**第 4 步：在页面上使用用户控件并利用公开自定义事件 .Aspx 页面**

```
<uc1:commondropdowncontrol autopostback="true" drpchange="usrDrp_DrpChange" id="usrDrp" labletext="Country" runat="server">
    </uc1:commondropdowncontrol></div>
</form> 
```

# javascript - 使用 node.js async forEachSeries 时是否有“继续”的等效语句？

> ID：10106667
> 
> 赞同：6
> 
> 时间：2012-04-11T13:15:57.793
> 
> 标签：javascript, node.js, asynchronous, async.js, node-async

我正在使用 node.js 异步包，特别是 forEachSeries，根据从数组中提取的参数发出一系列 http 请求。在每个请求的回调中，我都有一些 if/else 语句来响应不同类型的响应。

```
// This is the callback of a GET request inside of a forEachSeries
function(error, response) {
    if (response.results) {
        // Do something with results
    }
    else if (!response.results) {
        // Would like to use a continue statement here, but
        // this is not inside of a loop
    }
    else {
        // Do something else
    }
} 
```

如果在上面，我可以在 else 中使用与“继续”等效的方法吗？这在技术上不在循环内部，因此 continue 不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:21:46.417

由于它只是一个功能，您应该能够`return`从中获得相同的效果：

```
else if (!response.results) {
    return;
} 
```

# c# - 将 c# 数据表放入 extjs 网格

> ID：10106675
> 
> 赞同：0
> 
> 时间：2012-04-11T13:16:23.360
> 
> 标签：c#, datatable, grid, extjs3

我使用 Extjs 3.4。在服务器端，我有返回具有随机结构（不同列、行）的数据表的方法。

我想准备一个带有 extjs 网格的 javascript 文件，它可以获取任何数据表并在此网格中显示它。

（当我知道数据表结构时，我将 jsonReader 创建到数据网格，并从数据表发送带有日期的 json。但是在这里，我不知道如何解决它）

有可能做到吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T17:55:37.223

```
public static List<Dictionary<string, object>> ToJsonStructure(this DataTable table)
{
    if (table == null) throw new ArgumentNullException("table");

    List<Dictionary<string, object>> data = new List<Dictionary<string, object>>();
    Dictionary<string, object> obj;

    foreach (DataRow r in table.Rows)
    {
        obj = new Dictionary<string, object>();

        foreach (DataColumn c in table.Columns)
        {
            obj[c.ColumnName] = r[c.ColumnName];
        }

        data.Add(obj);
    }

    return data;
} 
```

在这里演示[http://ext4all.com/post/extjs-3-how-to-put-c-datatable-to-extjs-grid](http://ext4all.com/post/extjs-3-how-to-put-c-datatable-to-extjs-grid)

# javascript - Mongoose 异步默认值

> ID：10106678
> 
> 赞同：5
> 
> 时间：2012-04-11T13:16:36.063
> 
> 标签：javascript, node.js, mongoose

它不在文档中，但我试图弄清楚如何使用 Mongoose 设置异步默认值。我看到了`model.pre("save", function(next){})`设置，但我不知道如何改变当前正在保存的模型上的字段。Mongoose 是否将此绑定到正在保存的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T20:15:50.097

是的，在中间件中`this`，在运行时指代模型实例。

# sql-server - 在存储过程中动态确定要更新的列

> ID：10106681
> 
> 赞同：1
> 
> 时间：2012-04-11T13:16:43.020
> 
> 标签：sql-server, stored-procedures, dynamic

我想在运行时动态确定存储过程中要更新的列

我有一个`BshForecast`具有以下属性的表：

```
projectId, JobTypeId, Year, JanDone, FebDone, MarDone... (for all months) 
```

我有这个不工作的存储过程

```
CREATE PROCEDURE [dbo].[SP_Update_Done_Last_Month2] 
    @Project_ID INT,
    @Job_Type_ID INT
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @LAST_MONTH INT
    SET @LAST_MONTH = DATEPART(MM,DATEADD(MM, -1, GETDATE()))

    UPDATE BshForecast 
    Set (CASE @LAST_MONTH
             WHEN 1     THEN JanDone    
             WHEN 2     THEN FebDone     
             WHEN 3     THEN MarDone
             WHEN 4     THEN AprDone
             WHEN 5     THEN MayDone
             WHEN 6     THEN JunDone
             WHEN 7     THEN JulDone
             WHEN 8     THEN AugDone
             WHEN 9     THEN SepDone
             WHEN 10    THEN OctDone
             WHEN 11    THEN NovDone
             WHEN 12    THEN DecDone
             END) = 0
    WHERE
        (ProjectId = @Project_ID) 
        and (JobTypeId = @Job_Type_ID) 
        and (Year = DATEPART(YY, DATEADD(MM, -1, GETDATE())))
END 
```

你认为似乎是什么问题？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:26:24.160

尝试用`SET`这个替换你的子句：

```
SET
    JanDone = case when @LAST_MONTH = 1 then 0 else JanDone end,
    FebDone = case when @LAST_MONTH = 2 then 0 else FebDone end,
    MarDone = case when @LAST_MONTH = 3 then 0 else MarDone end,
    AprDone = case when @LAST_MONTH = 4 then 0 else AprDone end,
    MayDone = case when @LAST_MONTH = 5 then 0 else MayDone end,
    JunDone = case when @LAST_MONTH = 6 then 0 else JunDone end,
    JulDone = case when @LAST_MONTH = 7 then 0 else JulDone end,
    AugDone = case when @LAST_MONTH = 8 then 0 else AugDone end,
    SepDone = case when @LAST_MONTH = 9 then 0 else SepDone end,
    OctDone = case when @LAST_MONTH = 10 then 0 else OctDone end,
    NovDone = case when @LAST_MONTH = 11 then 0 else NovDone end,
    DecDone = case when @LAST_MONTH = 12 then 0 else DecDone end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:22:10.970

SQL CASE 语句仅对字段值进行操作，而不对表字段名称进行操作。

顺便说一句，如果您可以选择摆脱 JanDone、FebDone 等字段并映射到参考表，我强烈建议您更改数据库架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:28:15.637

您可以扩展当前查询以使其准确：

```
Set JanDone = (CASE WHEN @LAST_MONTH = 1 THEN 0 ELSE JanDone END),
    FebDone = (CASE WHEN @LAST_MONTH = 2 THEN 0 ELSE FebDone END),
    ... 
```

您只需要一个`CASE`需要更新的每个字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:29:20.097

您可以使用**动态 SQL**来实现这一点 - 基本上是“即时”构建 SQL 语句，然后在您的存储过程中执行它。

像这样的东西：

```
CREATE PROCEDURE [dbo].[proc_Update_Done_Last_Month2] 
    @Project_ID INT,
    @Job_Type_ID INT
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @LAST_MONTH INT
    SET @LAST_MONTH = DATEPART(MM,DATEADD(MM, -1, GETDATE()))

    DECLARE @SqlStmt NVARCHAR(MAX)

    SET @SqlStmt = N'UPDATE BshForecast SET ' + 
        CASE @LAST_MONTH
             WHEN 1     THEN N'JanDone'
             WHEN 2     THEN N'FebDone'     
             WHEN 3     THEN N'MarDone'
             WHEN 4     THEN N'AprDone'
             WHEN 5     THEN N'MayDone'
             WHEN 6     THEN N'JunDone'
             WHEN 7     THEN N'JulDone'
             WHEN 8     THEN N'AugDone'
             WHEN 9     THEN N'SepDone'
             WHEN 10    THEN N'OctDone'
             WHEN 11    THEN N'NovDone'
             WHEN 12    THEN N'DecDone'
        END + N' = 0 WHERE ProjectId = @Project_ID AND JobTypeId = @Job_Type_ID AND Year = DATEPART(YY, DATEADD(MM, -1, GETDATE()))'

    PRINT @SqlStmt        

    EXEC sp_executesql @SqlStmt
END 
```

动态 SQL 有它的问题和问题——在开始在你的项目中使用动态 SQL 之前，一定要**阅读并理解**优秀的文章[动态 SQL 的诅咒和祝福！](http://www.sommarskog.se/dynamic_sql.html)

# c# - C#，实体框架，TPH

> ID：10106682
> 
> 赞同：0
> 
> 时间：2012-04-11T13:16:45.347
> 
> 标签：c#, entity-framework, table-per-hierarchy

我对 TPH 映射有疑问。以下是课程：

**抽象服务（基类）**

```
[Table("Services")]
public abstract class AbstractService : IAuditedObject
{
    public int Id { get; set; }

    [DisplayName("Receiver Site")]
    public int? TargetSiteId { get; set; }
    [DisplayName("Receiver Site")]
    public virtual Site TargetSite { get; set; }

    [DisplayName("Start Date")]
    public PartialDate StartDate { get; set; }
    [DisplayName("End Date")]
    public PartialDate EndDate { get; set; }

    [DisplayName("Study")]
    public int? StudyId { get; set; }
    [DisplayName("Study")]
    public virtual Study Study { get; set; }
} 
```

**具体服务**

```
public class AssociatedStaffService : AbstractService
{
    [DisplayName("Person")]
    [Required]
    public int? SourcePersonId { get; set; }
    [DisplayName("Person")]
    public virtual Person SourcePerson { get; set; }

    [DisplayName("Service")]
    [Required]
    public int? RoleId { get; set; }
    [DisplayName("Service")]
    public virtual AssociatedStaffServiceCLI Role { get; set; }

    [DisplayName("Department")]
    public string Department { get; set; }

    public bool IsActive()
    {
        return this.SourcePerson != null && this.TargetSite != null && this.SourcePerson.IsActive() && this.TargetSite.IsActive() && this.Study != null && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
}

public class EthicCommitteeService : AbstractService
{
    [DisplayName("Site")]
    [Required]
    public int? SourceSiteId { get; set; }
    [DisplayName("Site")]
    public virtual Site SourceSite { get; set; }

    [DisplayName("Central")]
    public bool? IsCentral { get; set; }

    public bool IsActive()
    {
        return this.Study != null && this.TargetSite != null && this.SourceSite != null && this.TargetSite.IsActive() && this.SourceSite.IsActive() && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
}

public class ParticipatingService : AbstractService
{
    public const string AUTHORIZATION_DATE = "AuthorizationDate";
    public const string IS_NATIONAL_COORDINATOR = "IsNationalCoordinator";

    [DisplayName("Person")]
    [Required]
    public int? SourcePersonId { get; set; }
    [DisplayName("Person")]
    public virtual Person SourcePerson { get; set; }

    [DisplayName("Service")]
    [Required]
    public int? RoleId { get; set; }
    [DisplayName("Service")]
    public virtual ParticipatingServiceCLI Role { get; set; }

    [DisplayName("Department")]
    public string Department { get; set; }

    public int? RegInvestigatorFormId { get; set; }
    public PartialDate AuthorizationDate { get; set; }
    public bool? IsNationalCoordinator { get; set; }

    public bool IsActive()
    {
        return this.SourcePerson != null && this.TargetSite != null && this.SourcePerson.IsActive() && this.TargetSite.IsActive() && this.Study != null && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
}

public class ExternalService : AbstractService
{
    [DisplayName("Person")]
    [Required]
    public int? SourcePersonId { get; set; }
    [DisplayName("Person")]
    public virtual Person SourcePerson { get; set; }

    [DisplayName("Service")]
    [Required]
    public int RoleId { get; set; }
    [DisplayName("Service")]
    public virtual ExternalServiceCLI Role { get; set; }

    [DisplayName("Department")]
    public string Department { get; set; }

    public bool IsActive()
    {
        return this.SourcePerson != null && this.TargetSite != null && this.SourcePerson.IsActive() && this.TargetSite.IsActive() && this.Study != null && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
}

public class StudyTeamService : AbstractService
{
    [DisplayName("Person")]
    [Required]
    public int? SourcePersonId { get; set; }
    [DisplayName("Person")]
    public virtual Person SourcePerson { get; set; }

    [DisplayName("Service")]
    [Required]
    public int? RoleId { get; set; }
    [DisplayName("Service")]
    public virtual StudyTeamServiceCLI Role { get; set; }

    [DisplayName("Department")]
    public string Department { get; set; }

    public bool IsActive()
    {
        return this.SourcePerson != null && this.TargetSite != null && this.SourcePerson.IsActive() && this.TargetSite.IsActive() && this.Study != null && (this.EndDate == null || this.EndDate.Date == null || this.EndDate.Date > DateTime.Now);
    }
} 
```

我总是收到以下错误：

> --- 错误：在模型生成过程中检测到一个或多个验证错误：
> 
> ```
>  System.Data.Edm.EdmProperty: Name: Each property name in a type must be unique. Property name 'StartDate' is already defined.
>     System.Data.Edm.EdmProperty: Name: Each property name in a type must be unique. Property name 'EndDate' is already defined.  --- 
> ```

这是堆栈跟踪：

> 未处理的异常：System.Data.Entity.ModelConfiguration.ModelValidationException：在模型生成过程中检测到一个或多个验证错误：
> 
> ```
>  System.Data.Edm.EdmProperty: Name: Each property name in a type must be unique. Property name 'StartDate' is already defined.
>     System.Data.Edm.EdmProperty: Name: Each property name in a type must be unique. Property name 'EndDate' is already defined. 
> ```
> 
> 在 C:\Projects_PrismaLoader\Prisma.Load er\PrismaLoader.cs 中的 Prisma.Loader.PrismaLoader.Init()：第 95 行在 C:\Projects_PrismaLoader\Prisma.Loader\ 中的 Prisma.Loader.PrismaLoader.Load(Boolean quick) PrismaLoader.cs:C:\Projects_PrismaLoader\Prisma.Loader\Program.cs 中 Prisma.Loader.Program.Main(String[] args) 的第 32 行：第 113 行

在这种情况下，堆栈跟踪并不是很有用（似乎......）

有谁知道我在哪里犯了错误？我已经找了一天了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:24:41.947

我相信您需要将 StartDate 和 EndDate 设为虚拟？Edm 正在尝试覆盖该功能，但因为它们是密封的，所以它不能覆盖它们，所以它在 IL 中复制它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:31:54.560

**解决**

似乎问题出在 PartialDate 类上。它必须使用 [ComplexType] 注释进行注释。

# php - mysql_connect() 总是拒绝访问

> ID：10106684
> 
> 赞同：0
> 
> 时间：2012-04-11T13:16:48.423
> 
> 标签：php, mysql, phpmyadmin, mamp, mysql-connect

我让 phpMyAdmin 与 MAMP 一起运行，但我发现无法使用 mysql_connect()。

```
$_db_connect = mysql_connect("root", "localhost"); 
```

在 php_error.log 中产生错误： `mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Access denied for user` `'root'@'localhost' (using password: NO) in /....../common.lib.php on line 19`

我检查了特权：

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD '*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B' WITH GRANT OPTION 
```

GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION

我简直被难住了。我创建了带有密码的新用户只是为了获得相同的结果。奇怪的是，它总是显示 ( `using password: NO`)，即使我尝试使用密码以用户身份连接：

```
$_db_connect = mysql_connect(MYSQL_HOST, MYSQL_USERNAME, MYSQL_PASSWORD); 
```

欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:23:03.140

假人的错误消息：

```
Access denied for user 'root'@'localhost' (using password: NO) 
```

它分为三个部分，每个部分都包含重要信息。让我们来看看：

1.  *拒绝访问*- 简而言之，这意味着：迷路！不要试图连接到我。
2.  *对于用户 'root'@'localhost'* - 表示谁被拒绝访问，该用户。名称：**root**和 (@) 以下服务器：**localhost**。
3.  *使用密码：否*- 只是一些很好的附加信息，当尝试访问并提供用户名时，没有使用密码。

因此，现在使用您拥有的特权：

```
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost'
 IDENTIFIED BY PASSWORD '*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B'
 WITH GRANT OPTION
GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION 
```

它基本上说，用户`'root'@'localhost'`需要使用密码才能访问。正如错误消息告诉您的那样，您没有使用密码。所以这很可能是错误的原因，密码丢失。

添加密码并重试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:24:59.583

你忘记输入密码了。如果我猜对了，那就是`81F5E21E35407D884A6CD4A731AEBFB6AF209E1B`密码“root”的哈希值（确认输入此 SQL 语句：`SELECT PASSWORD('root')`.

尝试使用正确的密码登录：

```
$_db_connect = mysql_connect("localhost", "root", "root"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:20:10.693

您缺少函数中的密码。此外，函数调用是错误的。像这样做：

```
$_db_connect = mysql_connect("localhost", "root", "password"); 
```

其中，`password`是您的 root 帐户的密码。可能会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T13:21:10.477

传递密码，作为第三个参数

```
$_db_connect = mysql_connect("localhost", "root", "password"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T13:22:19.357

mysql_connect 函数中的第一个参数是数据库主机，您需要使用 3 个参数 - 使用密码。

所以使用这个语法：

$db = mysql_connect('localhost', 'mysql_user', 'mysql_password');

# stored-procedures - 存储过程映射到实体 ok，但获得额外的列？

> ID：10106688
> 
> 赞同：0
> 
> 时间：2012-04-11T13:16:56.203
> 
> 标签：stored-procedures, entity-framework-4.1, entity-framework-4.3

我在 EDMX 中有一个已映射好的存储过程来检索 ObjectResult<> 实体。

但是，我试图从存储过程中获取一个额外的列，即总行数。

我正在使用这个[http://forums.asp.net/post/3000198.aspx](http://forums.asp.net/post/3000198.aspx)变体来获取总行数，效果很好。所以我不是特别想使用输出参数。

是否有映射实体和获取附加列的方法？

我首先使用的是 EF 4.3.1 数据库，所以我正在查看生成的上下文文件。

我认为问题在于 ObjectContext.ExecuteFunction 是强类型的，所以我不确定如何获取额外的列。有没有办法直接执行存储过程并获取映射？

# orm - Doctrine2 分页器

> ID：10106695
> 
> 赞同：6
> 
> 时间：2012-04-11T13:17:23.050
> 
> 标签：orm, symfony, pagination, doctrine-orm

从 2.2 版 Doctrine 开始有[Paginator](http://readthedocs.org/docs/doctrine-orm/en/latest/tutorials/pagination.html)。文档中只有一个示例：

```
<?php
use Doctrine\ORM\Tools\Pagination\Paginator;

$dql = "SELECT p, c FROM BlogPost p JOIN p.comments c";
$query = $entityManager->createQuery($dql)
                       ->setFirstResult(0)
                       ->setMaxResults(100);

$paginator = new Paginator($query, $fetchJoin = true);

$c = count($paginator);
foreach ($paginator as $post) {
    echo $post->getHeadline() . "\n";
} 
```

这个类没有什么新东西，因为文档中描述的整个过程都可以用`$query->getResult()`.

我知道有一些关于分页的捆绑包，但我不想为这些琐碎的问题安装第三方捆绑包。另一方面，我找不到任何关于教义分页的信息2。该类应该有一些有用的方法。我在哪里可以找到它们？如果没有，那么全班的意义何在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:51:35.967

Doctrine 的分页器不是 Symfony 感知的——它是低级的并且是特定于 Doctrine 的。

另一方面，如果你安装[了一个 3rd party bundle](http://knpbundles.com/search?q=pager)，你将获得 Doctrine ORM & ODM、Propel、普通数组等的分页适配器。你还将获得 Symfony 集成和视图助手。至少我使用的[WhiteOctoberPagerfantaBundle](https://github.com/whiteoctober/WhiteOctoberPagerfantaBundle)完成了所有这些工作。

因此，除非您仅使用 Doctrine，否则我建议您重新考虑您对 3rd 方捆绑包的立场。

# c++ - 当列表框删除项目时收到通知？

> ID：10106698
> 
> 赞同：1
> 
> 时间：2012-04-11T13:17:28.243
> 
> 标签：c++, winapi, mfc, listbox, clistbox

我使用 CListBox::SetItemData 在我的所有者绘制的 CListBox 派生类中存储指向某些数据的指针，并且我希望列表框本身跟踪它并在不再需要时释放内存。

为此，每次删除项目时都需要通知我（包括 LB_RESETCONTENT 以及删除项目的所有其他可能情况）。有没有我可以处理的事件或事件来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:37:21.427

不会。ListBox 只会为用户所做的事情生成通知。用户不能删除或添加或清空列表框，这只能通过您自己的代码来完成。所以这里的理念是控件不必告诉你你已经知道的事情。您可以在修改内容的代码中任意生成自己的消息。但是当然从 CListBox 继承你自己的类并添加你自己的虚拟方法会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:58:54.140

作为它的所有者，`LBS_OWNERDRAW*`您可以留意其中一种风格[`WM_DELETEITEM`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761362%28v=vs.85%29.aspx)；

> 当列表框或组合框被销毁或项目被 、 、 或 消息删除时发送给列表框或组合 `LB_DELETESTRING`框`LB_RESETCONTENT`的`CB_DELETESTRING`所有者`CB_RESETCONTENT` 。系统会为每个已删除的项目发送一条`WM_DELETEITEM`消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:06:39.113

由于您已经对列表框进行了子类化，因此“正确”设计（IMO）将向列表框添加数据管理功能，然后列表框将知道何时删除项目并可以根据需要删除数据。我的意思是，假设您的列表跟踪人员，您将 AddPerson(Person p) 和 RemovePerson(Person p) 方法添加到您的类。RemovePerson 的实现将从列表中删除相应的条目，并删除与其相关的所有数据。所以不要使用 CListBox::DeleteString 删除东西，使用你自己实现的更高级别的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:50:48.613

这很容易 - 只需子类化列表框并为 LB_DELETESTRING 和 LB_RESETCONTENT 添加消息处理程序

有关详细信息，请参见此处：

[http://www.codeguru.com/cpp/controls/listbox/article.php/c4759/CListBox-with-the-Horizo​​ntal-Scroll-Bar-that-Works.htm](http://www.codeguru.com/cpp/controls/listbox/article.php/c4759/CListBox-with-the-Horizontal-Scroll-Bar-that-Works.htm)

# mysql - 如何用另一个字段替换表的一个字段？

> ID：10106701
> 
> 赞同：0
> 
> 时间：2012-04-11T13:17:33.253
> 
> 标签：mysql, replace

我的自制搜索页面有问题。有2张桌子：

```
**name status**
Kevin 111       <-table1
Lucas 222

**id  data**
111 student     <-table2
222 pupil 
```

所以你需要查询，它会给我这样的表：

```
Kevin student
Lucas pupil 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:18:52.713

尝试这个

```
SELECT t1.name, t2.data 
FROM table1 t1 INNER JOIN table2 t2
    ON t1.status = t2.id
ORDER BY t1.name 
```

# javascript - Javascript - 总行数

> ID：10106707
> 
> 赞同：1
> 
> 时间：2012-04-11T13:17:57.870
> 
> 标签：javascript

我正在尝试创建这个程序来提示用户输入两个单词，然后在一行上打印出这两个单词。这些单词将被足够的点分隔，因此总行长为 30。我已经尝试过了，但似乎无法得到它。

```
<html>
<head>
<title>Lenth of 30</title>
<script type="text/javascript">
//Program: Lenth of 30
//Purpose: The words will be separated by enough dots so that the total line length is 30: 
//Date last modified: 4/11/12 
var firstword = ""
var secondword = ""

firstword = prompt("Please enter the first word.")
secondword = prompt("Please enter the second word.")

document.write(firstword + secondword)

</script>
</head>
<body>
</form>
</body>
</html> 
```

一个例子：

输入第一个字：

龟

输入第二个字

153

（程序将打印出以下内容）

乌龟.....................153

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:20:32.567

这是一个通用解决方案，向您展示如何执行此操作：

```
function dotPad(part1, part2, totalLength) {
  // defaults to a total length of 30
  var string = part1 + part2,
      dots = Array((totalLength || 30) + 1).join('.');
  return part1 + dots.slice(string.length) + part2;
} 
```

按如下方式使用它：

```
dotPad('foo', 'bar'); // 'foo........................bar' 
```

在你的情况下：

```
dotPad(firstword, secondword); 
```

这是一个非常简单的解决方案——如果需要，验证输入字符串的连接形式是否比`length`字符短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:20:10.127

你需要计算你需要多少个周期。

```
var enteredLength = firstword.length + secondword.length;
var dotCount = 30 - enteredLength;

var dots = "";
for(var i = 0; i < dotCount; i++) dots += '.'; 
```

你可以从那里拿如果....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:20:03.563

从 30 中减去第一个单词的长度和第二个单词的长度，然后在 for 循环中打印出那么多点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:20:27.320

您可以使用该`length`属性来确定每个字符串的长度，然后计算`.`您需要添加的 s 的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:21:01.317

您可以使用一些简单的数学来获得点的数量。从 30 中减去每个字长。

```
var dotLen = 30 - firstword.length - secondword.length;
document.write( firstword );
while ( dotLen-- ) {
    document.write( "." );
}
document.write( secondword ); 
```

编辑：我实际上更喜欢 Mathias 的解决方案。但是你可以让它更简单：

```
document.write( firstword + Array( 31 - firstword.length - secondword.length ).join( '.' ) + secondword ); 
```

# c# - LINQ to JSON 响应

> ID：10106716
> 
> 赞同：0
> 
> 时间：2012-04-11T13:18:43.863
> 
> 标签：c#, json, linq, c#-4.0, linq-to-objects

我在下面发布了我的课程并附有示例数据。我需要将此类作为 json 响应传递。

```
[Serializable]
public class Student
{
    public string Fname {get;set;}
    public string FirstSemMarkcsv {get;set;}  //This should hold marks as comma separated values.
    public string SecondSemMarkcsv {get;set;}  //This should hold marks as comma separated values.
} 
```

样本数据

```
Fname     FirstSemMark       SecondSemMark
John               95                  90
John               80                  93
John               70                  80
Peter              60                  78
Peter              80                  80
Peter              90                  85 
```

我需要将此作为 json 响应传递。

请有任何想法。

问候，

阿什什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:22:07.470

```
List<Student> students = GetStudentList();
return Json(students)); 
```

# xml - 使用 XQuery 从 XML Schema 类型转换为另一种

> ID：10106719
> 
> 赞同：0
> 
> 时间：2012-04-11T13:18:51.507
> 
> 标签：xml, xsd, xquery

我试图找出如何将扩展（“扩展”）XML Schema 元素转换为原始元素的形式。示例场景如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="http://www.example.com/address"
        xmlns="http://www.w3.org/2001/XMLSchema"
        xmlns:add="http://www.example.com/address"
        elementFormDefault="qualified">

 <complexType name="Address">
   <sequence>
     <element name="name" type="string"/>
     <element name="street" type="string"/>
     <element name="city" type="string"/>
   </sequence>
 </complexType>

 <complexType name="UKAddress">
   <complexContent>
     <extension base="add:Address">
       <sequence>
         <element name="postcode" type="ipo:UKPostcode"/>
       </sequence>
       <attribute name="exportCode" type="positiveInteger" fixed="1"/>
     </extension>
   </complexContent>
 </complexType>

 <simpleType name="UKPostcode">
    <restriction base="string">
        <pattern value="[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][A-Z]{2}"/>
    </restriction>
 </simpleType>

 <element name="UKAddress" type="add:UKAddress" />
 <element name="Address" type="add:Address" />
</schema> 
```

这是架构，我尝试从这个转换：

```
<UKAddress xmlns="http://www.example.com/address" exportCode="1">
    <name>Address1</name>
    <street>Example street</street>
    <city>London</city>
    <postcode>AA00 0AA</postcode>
</UKAddress> 
```

进入这个：

```
<UKAddress xmlns="http://www.example.com/address">
    <name>Address1</name>
    <street>Example street</street>
    <city>London</city>
</UKAddress> 
```

不是一个一个地转换所有的子元素（这很好用），而是使用一些通用的方式，比如演员。要点是以某种方式使用地址元素的类继承结构，并避免映射（Xquery）和叶元素之间的高耦合。我试图找到一些强制转换函数，但那些是用于原语的，我尝试使用 xsi:type 并尝试询问所有子元素并过滤它们。我发现没有工作方法。有没有人遇到过这个？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:09:58.267

昨天我对答案进行了一些回合。起初，我尝试做一个 Xpath 查询，它过滤子元素给我，像这样：

```
declare function xf:testAddress($uKAddress1 as element())
    as element() {
        let $UKAddress := $uKAddress1
        return
            <ns0:Address>
                {$UKAddress/*[local-name()=('name', 'street', 'city')]}
            <ns0:Address>
}; 
```

（local-name 很重要：简单的 name() 将包含命名空间，或者最糟糕的是：一个虚拟命名空间，如果引擎使用这样的东西）问题是，表达式的右侧不是动态的，当然 XQuery没有帮助就看不到架构。解决此问题的一种可能方法是以下脚本：

[http://en.wikibooks.org/wiki/XQuery/XML_Schema_to_Instance](http://en.wikibooks.org/wiki/XQuery/XML_Schema_to_Instance)

有了这个，我可以创建一个地址的虚拟实例，然后我可以使用这个实例来映射孩子。所以这是一种解决方案，但我认为，这不是正确的方法，而且每次请求都会带来很多额外的工作。

# delphi - 不带 SendMessage 和 PostMessage 的发送密钥

> ID：10106725
> 
> 赞同：2
> 
> 时间：2012-04-11T13:19:08.633
> 
> 标签：delphi, winapi, sendmessage, sendkeys, postmessage

是否可以将密钥发送到没有API`SendMessage`的程序？`PostMessage`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-11T13:23:52.913

伪造输入的官方方法不涉及直接发送或发布 Windows 消息。相反，您应该调用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310.aspx).

当您使用`SendInput`它时，它与实际按下真正的键没有区别。当您调用`SendInput`假键盘输入时，系统最终会将消息发布到前台线程的消息队列，该线程创建了具有键盘焦点的窗口。

# android - 顶部带有文本的单选按钮

> ID：10106726
> 
> 赞同：1
> 
> 时间：2012-04-11T13:19:12.300
> 
> 标签：android, radio-button

如何制作一个单选按钮，在其中使用 android:button 更改可绘制对象并在顶部显示文本？使用常规单选按钮，文本在可绘制对象后面分层。

现在，我开始对自己的单选按钮感到沮丧。

我想要这样的东西：

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <RadioButton
        android:text="something that is on top"
        android:id="@+id/toggle_tab_left"
        android:button="@drawable/main_selector"
        style="@style/TabStyle"/>
    <RadioButton 
        android:button="@drawable/info_selector"
        android:text="something that is on top"
        android:id="@+id/toggle_tab_right"
        style="@style/TabStyle"/>
</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:46:19.203

您可以改用`background`图形的属性，并将其设置`button`为@null 或透明颜色。

# python - 使用reportlab创建图表的操作数错误

> ID：10106731
> 
> 赞同：0
> 
> 时间：2012-04-11T13:19:46.030
> 
> 标签：python

我是 python 新手，我的任务是从文本文档制作垂直条形图，我已将 x 轴信息放入列表中，并将数据放入列表中。我遇到的问题是在尝试输出图表时出现错误消息：TypeError: unsupported operand type(s) for -: 'str' and 'int'。我正在努力弄清楚如何解决这个错误。我需要对其中一个列表进行类型转换吗？或者列表是错误的方法吗？

这是我的代码：

```
from reportlab.graphics.shapes import Drawing
from reportlab.graphics.charts.barcharts import VerticalBarChart

ExifOutput = open('ExifOutput.txt', 'r')

ImageMakeContainer = []
Container = []
makeList = []
numberList = []

lineReader = ExifOutput.readlines()

for line in lineReader:
    if 'Image Make: ' in line:
        ImageMakeContainer.append(line[13:-2])

for item in set(ImageMakeContainer):
    Container.append(item + " " + str(ImageMakeContainer.count(item)))

print Container

for data in Container:

    [int(num) for num in data.split() if num.isdigit()]

    make = data[0:-(len(num) + 1)]

    makeList.append(make)
    numberList.append(num)

print numberList
print makeList

ExifOutput.close()

data = numberList
axis = makeList

graph = Drawing(400, 300)

chart = VerticalBarChart()
chart.width = 300
chart.height = 200
chart.x = 30
chart.y = 40
chart.data = data
chart.categoryAxis.categoryNames = axis
chart.valueAxis.valueMin = 0

graph.add(chart)
graph.save(fnRoot='TestGraph', formats=['png', 'pdf']) 
```

希望我对你来说足够清楚。（打印语句只是用来检查列表的内容）

**[编辑]**打印输出如下：

```
['Apple 1', 'FUJIFILM 5', 'Samsung Techwin 1']
['1', '5', '1']
['Apple', 'FUJIFILM', 'Samsung Techwin'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:01:04.533

要将 Python int 放入字符串中，只需将其放在反引号之间`like_this`。例如，

```
print three + `3` 
```

你也可以使用格式来完成同样的事情，比如

```
print "three%d" % 3 
```

# python - 将字符串参数传递给函数 - 为什么它不起作用？

> ID：10106732
> 
> 赞同：-2
> 
> 时间：2012-04-11T13:19:48.600
> 
> 标签：python, string, function

尝试将字符串参数传递给函数，然后将其用作整个函数的变量。出于某种原因，当我尝试这样做时，它不起作用。我究竟做错了什么？

```
import subprocess
def printerSetup(printer):
    subprocess.call(r'Cscript c:/windows/System32/Printing_Admin_Scripts/en-US/Prnport.vbs -a -r "'printer'.print.web.com" -h "' + printer + '.print.web.com" -o raw')
    if printer == 'saturn' or printer == 'jupiter' or printer == 'neptune':
        subprocess.call(r'rundll32 printui.dll, PrintUIEntry /if /b "' + printer + '" /f w:\printers\toshibae3511\eng\est_c2.inf /r "' + printer + '.print.web.com" /m "TOSHIBA e-STUDIO Color PS3"')
    if printer == 'mercury':
        subprocess.call(r'rundll32 printui.dll, PrintUIEntry /if /b "' + printer + '" /f w:\printers\dell1720\drivers\print\dell1720\DKABJ740.inf /r "' + printer + '.print.web.com" /m "Dell Laser Printer 1720dn"')

printerSetup("neptune")
printerSetup("mercury") 
```

编辑了程序。在尝试运行这个新的之后，得到这个错误：

```
C:\Python27\Projects\Printer Setup>c:\python27\python.exe saturn.py
  File "saturn.py", line 3
    subprocess.call(r'Cscript c:/windows/System32/Printing_Admin_Scripts/en-US/P
rnport.vbs -a -r "'printer'.print.web.com" -h "' + printer + '.print.web.c
om" -o raw')

                         ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:22:13.460

您需要`variable == value`为每个`or`语句指定，如下所示：

```
if printer == 'saturn' or printer == 'jupiter' or printer == 'neptune': 
```

您还忘记了每条`if`语句的尾随冒号。

如果您想说“此变量是否与此值列表匹配？”，以下内容可能对您来说更清晰：

```
if printer in ('saturn', 'jupiter', 'neptune'): 
```

您还需要将变量添加到字符串 - 您不能只是将它们相邻放置：

```
'string' + variable + 'string'

 # not

 'string'variable'string' 
```

# performance - 将 JIT 与 R 结合使用的可能缺点？

> ID：10106736
> 
> 赞同：35
> 
> 时间：2012-04-11T13:20:02.733
> 
> 标签：performance, r, compiler-construction, jit

我最近发现可以使用编译器包将 JIT（即时）编译与 R 一起使用（我在[最近的一篇博](http://www.r-statistics.com/2012/04/speed-up-your-r-code-using-a-just-in-time-jit-compiler/)文中总结了我在这个主题上的发现）。

我被问到的问题之一是：

> **有什么陷阱吗？**听起来好得令人难以置信，只需输入一行代码即可。

环顾四周后，我发现一个可能与 JIT 的“启动”时间有关的问题。但是在使用 JIT 时还有其他需要注意的问题吗？

我想R的环境架构会有一些限制，但我想不出一个简单的例子来说明我的头顶上的问题，任何建议或危险信号会有很大帮助吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-12T19:16:24.570

使用 rpart 进行简单测试的输出可能是在所有情况下都不要使用 enableJIT 的建议：

```
library(rpart)
fo <- function() for(i in 1:500){rpart(Kyphosis ~ Age + Number + Start, data=kyphosis)}
system.time(fo())
#User      System verstrichen 
#2.11        0.00        2.11 

require(compiler)
enableJIT(3)
system.time(fo())
#User      System verstrichen 
#35.46        0.00       35.60 
```

有什么解释吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-21T18:34:34.730

上面给出的`rpart`示例似乎不再是问题：

```
library("rpart")
fo = function() {
  for(i in 1:500){
    rpart(Kyphosis ~ Age + Number + Start, data=kyphosis)
  }
}    system.time(fo())
#   user  system elapsed 
#  1.212   0.000   1.206 
compiler::enableJIT(3)
# [1] 3
system.time(fo())
#   user  system elapsed 
#  1.212   0.000   1.210 
```

我还尝试了许多其他示例，例如

*   增长一个向量；
*   一个只是包装器的函数`mean`

虽然我并不总是得到加速，但我从未经历过明显的减速。

* * *

```
R> sessionInfo()
R version 3.3.0 (2016-05-03)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04 LTS 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-06T14:20:20.383

原则上，一旦字节码被编译和加载，它的解释速度应该至少与原始 AST 解释器一样快。一些代码将受益于大幅加速，这通常是具有大量标量操作和循环的代码，其中大部分时间都花在了 R 解释上（我已经看到了 10 倍加速的示例，但任意微基准确实可以根据需要夸大这一点）。一些代码将以相同的速度运行，这通常是很好矢量化的代码，因此几乎不花时间在解释上。现在，编译本身可能很慢。因此，当即时编译器猜测它不会得到回报时，它现在不会编译函数（并且启发式随着时间的推移而变化，这已经在 3.4.x 中了）。启发式方法并不总能猜对，因此可能会出现编译无法获得回报的情况。

包可以在安装时进行字节编译，这样编译成本就不会在运行时（重复）支付，至少对于提前知道的代码是这样。这现在是 R 开发版本中的默认设置。虽然加载已编译代码比编译它要快得多，但在某些情况下，甚至可能加载不会执行的代码，因此实际上可能会有开销，但总体而言预编译是有益的。最近对 GC 的一些参数进行了调整，以减少加载不会执行的代码的成本。

我对包编写者的建议是使用默认值（即时编译现在在发布版本中默认启用，包安装时的字节编译现在在开发版本中启用）。如果您发现字节码编译器性能不佳的示例，请提交错误报告（我也看到过涉及`rpart`早期版本的案例）。我建议不要使用代码生成和代码操作，尤其是在热循环中。这包括在闭包捕获的环境中定义闭包、删除和插入绑定。绝对不应该做`eval(parse(text=`在热循环中（如果没有字节编译，这已经很糟糕了）。使用分支总是比动态生成新的闭包（没有分支）更好。此外，最好用循环编写代码，而不是用巨大的表达式（没有循环）动态生成代码。现在使用字节码编译器，现在通常可以在 R 中编写在标量上运行的循环（性能不会像以前那么差，所以人们可以更频繁地摆脱对性能关键部分切换到 C 的情况） .

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-10-04T19:18:30.907

继上一个答案之后，实验表明问题*不*在于循环的编译，而在于闭包的编译。[enableJIT(0) 或 enableJIT(1) 使代码保持快速，enableJIT(2) 显着减慢它，并且 enableJIT(3) 比前一个选项稍快（但仍然非常慢）]。同样与 Hansi 的评论相反， cmpfun 在类似程度上减慢了执行速度。

# windows-phone-7.1 - 如何在 PivotItem 中找到 MouseClick 或 GotFocus 事件？

> ID：10106751
> 
> 赞同：1
> 
> 时间：2012-04-11T13:20:43.790
> 
> 标签：windows-phone-7.1, pivotitem

您好，我如何在 PivotItem 中找到 GotFocus 事件，我厌倦了 GalaSoft 与 Triger 和 EventName="GotFocus" 的交互，但它没有被触发，谁能帮我找到 PivioItem 事件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:30:43.850

枢轴项目在单击放置在该枢轴项目内的任何控件时获得焦点。

```
<controls:PivotItem Header="item1">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="GotFocus">
                        <i:InvokeCommandAction Command="{Binding ShowMessageCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <Grid>
                    <TextBox Height="100"
                             Width="200"/>
                    <Button Height="100"
                            Width="200" />
                </Grid>
            </controls:PivotItem> 
```

这段代码对我有用。单击按钮或文本框时，枢轴项目获得焦点。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:45:24.093

是的，

在这里你是解决方案：

```
<controls:Pivot Title="My Pivot">
<i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
        <i:InvokeCommandAction Command="{Binding EuropePivotSelectedCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers>

<controls:PivotItem Header="item1">
</controls:PivotItem>

<controls:PivotItem Header="item2">
</controls:PivotItem> 
```

问候 Juanlu, ElGuerre

# widget - VAADIN 客户端组件逻辑

> ID：10106756
> 
> 赞同：3
> 
> 时间：2012-04-11T13:20:58.540
> 
> 标签：widget, client, vaadin

我在我的简单应用程序中使用 VAADIN 框架。我有我的 2 个自定义组件，例如

```
@ClientWidget(value = VComponent1.class)
public class Component1 {
    private Component2 cmp2;

    public void setDataSource(Component2 cmp2) {
        this.cmp2 = cmp2;
    }
} 
```

和

```
@ClientWidget(value = VComponent2.class)
public class Component2 {
} 
```

我想在服务器端绑定它们。

```
...
Component2 cmp2 = new Component2();
Component1 cmp1 = new Component1();
cmp1.setDataSource(cmp2);

mainWindow.addComponent(cmp1);
mainWindow.addComponent(cmp2);
... 
```

问题是我不知道如何将绑定信息发送到 VComponent1。

VComponent1 应该直接链接到 VComponent2

```
public class VComponent2 implements Paintable {

    public String getCurrentData() {
        return "Hello";
    }
}

public class VComponent1 implements Paintable,
ClickHandler {
    VComponent2 dataSource;

    @Override
    public void onClick(ClickEvent event) {
        super.onClick(event);
        String data = dataSource.getCurrentData();
        client.updateVariable(uidlId, "curData", data, true);
    }
} 
```

由于某些特定的时间问题，我需要避免通过 Component2 的服务器部分进行通信。VComponent1 应该可以直接访问 VComponent2。

你能帮我解决我的情况吗？

谢谢， 有友

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T13:20:14.647

您可以像这样传达对另一个 Vaadin 组件的引用：

服务器端：

```
public void paintContent(PaintTarget target) throws PaintException {    
    ..

    target.addAttribute("mycomponent", component);
    ..
} 
```

客户端：

```
public void updateFromUIDL(UIDL uidl, ApplicationConnection client) {
    ..

    Paintable componentPaintable = uidl.getPaintableAttribute("mycomponent", client);
    ..
} 
```

# asp.net - 我的错误代码是否会导致 Paypal 显示误导性的通用“消息 3005”？

> ID：10106758
> 
> 赞同：0
> 
> 时间：2012-04-11T13:21:02.567
> 
> 标签：asp.net, paypal

从我的网站将客户发送到 Paypal 时，我看到了一条我以前从未发现过的新错误消息：

> 检测到错误
> 
> 很抱歉，我们遇到了暂时的困难。请稍后再试。如果在付款时发生此错误，请在重新付款前检查您的帐户概览以避免重复付款。
> 
> 消息 3005

谷歌搜索这条消息表明它只是在 Paypal 超载时向公众显示的消息……但我认为这不适用于我，因为 Paypal 网站通常会响应我网站中使用 HTML 链接的其他部分。当我使用 ASP.NET 时`Response.Redirect`，我看到了错误。

我已检查 URL 是否正确且编码正确。所以我真的很想澄清一下，消息 3005 确实是可以在传入请求错误以及 Paypal 站点负载过重时显示的消息。

是否在这两种情况下都显示此通用消息？`Response.Redirect`可以接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:09:24.963

“谷歌搜索这条消息表明，它只是在 Paypal 超载时向公众显示的消息……”
这就是为什么你不能总是相信谷歌搜索结果的原因。

不，“3005 错误”并不意味着 PayPal“过载”。这是一个通用错误，可以由于各种内部和外部原因而返回。
它相当于 PayPal 中的“出了问题”，但实际上并没有说出出了什么问题 *。*

您能否始终如一地重现此错误？如果是这样，重现它的步骤是什么？
你能包括你的代码吗？

# php - 遇到错误

> ID：10106759
> 
> 赞同：-4
> 
> 时间：2012-04-11T13:21:08.180
> 
> 标签：php

我正在学习一个旧教程并面临下面给出的问题，请帮助我。我认为这很容易，但有一些我无法理解的问题。

使用 codeigniter 发送邮件时遇到错误，错误如下：

```
 220 mx.google.com ESMTP f4sm2807502pbg.56 
    hello: 250-mx.google.com at your service, [119.30.39.69]
    250-SIZE 35882577
    250-8BITMIME
    250-AUTH LOGIN PLAIN XOAUTH
    250-ENHANCEDSTATUSCODES
    250 PIPELINING

    from: 250 2.1.0 OK f4sm2807502pbg.56

    to: 553-5.1.2 We weren't able to find the recipient domain. Please check for any
    553-5.1.2 spelling errors, and make sure you didn't enter any spaces, periods,
    553 5.1.2 or other punctuation after the recipient's email address. f4sm2807502pbg.56

    The following SMTP error was encountered: 553-5.1.2 We weren't able to find the recipient domain. Please check for any 553-5.1.2 spelling errors, and make sure you didn't enter any spaces, periods, 553 5.1.2 or other punctuation after the recipient's email address. f4sm2807502pbg.56

    data: 503 5.5.1 RCPT first. f4sm2807502pbg.56

    The following SMTP error was encountered: 503 5.5.1 RCPT first. f4sm2807502pbg.56
    502 5.5.1 Unrecognized command. f4sm2807502pbg.56
    The following SMTP error was encountered: 502 5.5.1 Unrecognized command. f4sm2807502pbg.56
    Unable to send email using PHP SMTP. Your server might not be configured to send mail using this method.

    User-Agent: CodeIgniter
    Date: Wed, 11 Apr 2012 12:46:40 +0000
    From: "myname" 
    Return-Path: 
    To: $email
    Subject: =?utf-8?Q?This_is_an_email_test?=
    Reply-To: "m.methun@gmail.com" 
    X-Sender: m.methun@gmail.com
    X-Mailer: CodeIgniter
    X-Priority: 3 (Normal)
    Message-ID: <4f857d304b4f7@gmail.com>
    Mime-Version: 1.0

    Content-Type: multipart/mixed; boundary="B_ATC_4f857d304b520"

    This is a multi-part message in MIME format.
    Your email application may not support this format.

    --B_ATC_4f857d304b520
    Content-Type: text/plain; charset=utf-8
    Content-Transfer-Encoding: 8bit

    Its working. Great!

    --B_ATC_4f857d304b520
    Content-type: text/plain; name="yourinfo.txt"
    Content-Disposition: attachment;
    Content-Transfer-Encoding: base64

    ZmZmZmZmZmY=

    --B_ATC_4f857d304b520-- 
```

我的程序如下：

**电子邮件.php**

```
<?php
class Email extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    function index(){

   $this->load->view('newsletter');

}

function send()
{

    $this->load->library('form_validation');

    //field name, error message, validation rules
    $this->form_validation->set_rules('name', 'Name', 'trim|required');
    $this->form_validation->set_rules('email', 'Email Address', 'trim|required|valid_email');

    if($this->form_validation->run() == FALSE)
    {                                            // this is from validation..that works
      $this->load->view('newsletter');
    }  
   else
   {
   // validation has passed. now send email

   $name = $this->input->post('name');
   $email = $this->input->post('email');

    $this->load->library('email');
    $this->email->set_newline("\r\n");

    $this->email->from('m.methun@gmail.com', 'myname');
    $this->email->to('$email');
    $this->email->subject('This is an email test');
    $this->email->message('Its working. Great!');

   // attachment of file...in sending mail
    $path = $this->config->item('server_root');
   $file = $path . '/ci/attachments/yourinfo.txt';
    $this->email->attach($file);
   //end

   if($this->email->send())
   {
     echo ' mail send ';
   }
   else
    {
     show_error($this->email->print_debugger());
     }
   }

  }
 }
 ?> 
```

**时事通讯.php**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<style type = "text/css">
  label{ display: block; };
 </style>

</head>

<body>
    <div id ="newsletter_form">

        <?php echo form_open('email/send'); ?>

        <?php 

        $name_data = array(
        'name'=>'name',
        'id' => 'name',
        'value' => set_value('name')
         );

        ?>

        <?php 
         //three ways of taking input..from form 
         ?>
        <p><label for = "name" > Name:</label>
                  <?php echo form_input($name_data); ?> </p>

        <p><label for = "name" >Email Address:</label>
            <input type ="text" name="email" id="email"          
            value = "<?php echo set_value('email'); ?>">
        </p>                  

       <p> <?php echo form_submit('submit','Submit'); ?> </p>       

       <?php 
       // end of taking inputs...
        ?>  

        <?php echo form_close(); ?>
        <?php echo validation_errors('<p class ="error" >'); ?>
    </div>

</body>
</html> 
```

**配置/电子邮件.php**

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['protocol'] = 'smtp';
$config['smtp_host']='ssl://smtp.googlemail.com';
$config['smtp_port']=465;

$config['smtp_user']='m.methun@gmail.com';
$config['smtp_pass']='methun123';

?> 
```

我认为问题很简单，但我无法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:26:03.730

在你的`send()`函数中，你有这一行：

```
$this->email->to('$email'); 
```

因为 $email 在引号中，所以它返回的是字符串`$email`而不是变量的值，`$email`这是因为您不能在单引号标签内调用变量。

将其更改为：

```
$this->email->to($email); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:27:01.367

您已向“$email”发送了一封邮件，该邮件不是有效的收件人。尝试更换：

```
$this->email->to('$email'); 
```

和：

```
$this->email->to($email); 
```

# nhibernate - NHibernate 合并关联

> ID：10106768
> 
> 赞同：1
> 
> 时间：2012-04-11T13:21:49.367
> 
> 标签：nhibernate, fluent-nhibernate, merge

我在将以下对象合并到另一个会话时遇到问题：

**实体及其关联**

域 -> * 子域 -> * 控件 -> * 措施

域实体上的合并有效，但它的关联没有合并。我怎样才能解决这个问题？

```
using (var session = SessionFactoryContainer.Current.Get(sessionFactoryName).OpenSession())
            {
                using (var transaction = session.BeginTransaction())
                {
                    try
                    {
                        session.Merge(domain);
                        transaction.Commit();
                    }
                    catch (Exception e)
                    {
                        transaction.Rollback();
                        throw;
                    }
                }
            } 
```

**映射**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using FluentNHibernate.Mapping;
using ISMSControl.Domain;

namespace ISMSControl.Infrastructure.Mappings
{
    public class NDomainMapping : ClassMap<NDomain>
    {
        public NDomainMapping()
        {
            Table("domeinen");
            Id(m => m.Id, "id").UnsavedValue(-1);
            Map(m => m.Code, "code_1");
            Map(m => m.Description, "omschrijving");
            Map(m => m.Explanation, "toelichting");
            Map(m => m.DateCreated, "createdat");
            Map(m => m.CreatedBy, "createdby");
            Map(m => m.DateModified, "modifiedat");
            Map(m => m.ModifiedBy, "modifiedby");

            HasMany(m => m.SubDomains)
                .KeyColumn("domein")
                .Inverse()
                .Cascade.All();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:29:38.653

我创建了自己的数据上下文并将属性映射到相关列。我的 ModelTranslator 类将域对象转换为我自己的数据上下文实现所需的类型对象。

我仍然不确定这是否是正确的解决方案，但它现在解决了我的问题。

# java - GUI中的文本分页

> ID：10106770
> 
> 赞同：1
> 
> 时间：2012-04-11T13:21:53.050
> 
> 标签：java, swing, text, pagination, jtextcomponent

我使用 Java Swing 编写图书阅读器。是否可以在面板中对某些文本进行分页？我可以通过什么方式进行**分页**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:33:59.400

[http://java-sl.com/Pagination_In_JEditorPane.html](http://java-sl.com/Pagination_In_JEditorPane.html)

或者您可以使用[http://java-sl.com/JEditorPanePrinter.html](http://java-sl.com/JEditorPanePrinter.html)来预览和打印内容

# linux - 使用 openssl 命令行加密字符串

> ID：10106771
> 
> 赞同：39
> 
> 时间：2012-04-11T13:21:54.563
> 
> 标签：linux, openssl

我有一个 16 字节的字符，我想使用 openssl 将其加密为 16 字节的加密字符串。

然后需要将此加密字符串（以人类可读格式）提供给将要使用它的用户，并且该字符串将被解密为其原始 16 字节形式以进行比较和验证。谁能告诉我如何使用 openssl 命令行实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-11T23:29:23.760

这是在命令行上使用 openssl 加密字符串的一种方法（必须输入两次密码）：

```
echo -n "aaaabbbbccccdddd" | openssl enc -e -aes-256-cbc -a -salt
enter aes-256-cbc encryption password:
Verifying - enter aes-256-cbc encryption password: 
```

这是输出的样子：

```
U2FsdGVkX1/6LATntslD80T2HEIn3A0BqxarNfwbg31D2kI00dYbmBo8Mqt42PIm 
```

编辑：据我所知，您无法控制输出的字节数。您可以对其进行 b64 或十六进制编码，仅此而已。此外，如果您想将该字符串保存到文件而不是标准输出，请使用 -out 选项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-11-27T18:59:13.503

尝试这个：

```
echo 'foo' | openssl aes-256-cbc -a -salt
echo 'U2FsdGVkX1/QGdl4syQE8bLFSr2HzoAlcG299U/T/Xk=' | openssl aes-256-cbc -a -d -salt 
```

跑

```
openssl list-cipher-commands 
```

列出所有可用的密码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-31T18:55:04.780

> 我有一个 16 字节的字符，我想使用 openssl 将其加密为 16 字节的加密字符串 [以人类可读的格式]

我相信您正在寻找 Format Preserving Encryption。我认为需要注意的是你必须从一个 16 字节的人类可读字符串开始。Phillip Rogaway 有一篇关于技术的论文：[格式保留加密概要](http://www.cs.ucdavis.edu/~rogaway/papers/synopsis.pdf)。这篇论文有很多内容，它不能放在 Stack Overflow 上的一个段落中。

如果您可以从较短的字符串开始并使用 OCB、OFB 或 CTR 等流模式，那么您可以对最终字符串进行 Base64 编码，以便结果为 16 字节且人类可读。Base64 以 3 → 4 的速率扩展（3 个未编码扩展为 4 个编码），因此您需要长度为 12 个字符的较短字符串来实现 16 个人类可读字符。

据我所知，没有命令行工具可以本地执行此操作。您可以在命令行上使用 OpenSSL 与 AES/CTR 并通过`base64`命令对其进行管道传输。以下内容很接近，但它以 11 个字符（而不是 12 个字符）开头：

```
$ echo 12345678901 | openssl enc -e -base64 -aes-128-ctr -nopad -nosalt -k secret_password
cSTzU8+UPQQwpRAq 
```

此外，您*确实*需要了解 te`-k`选项（以及`-K`就此而言），以及它如何派生密钥，以便您可以在 OpenSSL 命令之外执行此操作（如果需要）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-26T05:33:24.110

尝试这个

```
$ echo "a_byte_character" | openssl enc -base64 
```

你有 100 多种密码类型

```
-aes-128-cbc               -aes-128-cfb               -aes-128-cfb1             
-aes-128-cfb8              -aes-128-ctr               -aes-128-ecb              
-aes-128-gcm               -aes-128-ofb               -aes-128-xts              
-aes-192-cbc               -aes-192-cfb               -aes-192-cfb1             
-aes-192-cfb8              -aes-192-ctr               -aes-192-ecb              
-aes-192-gcm               -aes-192-ofb               -aes-256-cbc              
-aes-256-cfb               -aes-256-cfb1              -aes-256-cfb8             
-aes-256-ctr               -aes-256-ecb               -aes-256-gcm              
-aes-256-ofb               -aes-256-xts               -aes128                   
-aes192                    -aes256                    -bf                       
-bf-cbc                    -bf-cfb                    -bf-ecb                   
-bf-ofb                    -blowfish                  -camellia-128-cbc         
-camellia-128-cfb          -camellia-128-cfb1         -camellia-128-cfb8        
-camellia-128-ecb          -camellia-128-ofb          -camellia-192-cbc         
-camellia-192-cfb          -camellia-192-cfb1         -camellia-192-cfb8        
-camellia-192-ecb          -camellia-192-ofb          -camellia-256-cbc         
-camellia-256-cfb          -camellia-256-cfb1         -camellia-256-cfb8        
-camellia-256-ecb          -camellia-256-ofb          -camellia128              
-camellia192               -camellia256               -cast                     
-cast-cbc                  -cast5-cbc                 -cast5-cfb                
-cast5-ecb                 -cast5-ofb                 -des                      
-des-cbc                   -des-cfb                   -des-cfb1                 
-des-cfb8                  -des-ecb                   -des-ede                  
-des-ede-cbc               -des-ede-cfb               -des-ede-ofb              
-des-ede3                  -des-ede3-cbc              -des-ede3-cfb             
-des-ede3-cfb1             -des-ede3-cfb8             -des-ede3-ofb             
-des-ofb                   -des3                      -desx                     
-desx-cbc                  -id-aes128-GCM             -id-aes192-GCM            
-id-aes256-GCM             -rc2                       -rc2-40-cbc               
-rc2-64-cbc                -rc2-cbc                   -rc2-cfb                  
-rc2-ecb                   -rc2-ofb                   -rc4                      
-rc4-40                    -rc4-hmac-md5              -seed                     
-seed-cbc                  -seed-cfb                  -seed-ecb                 
-seed-ofb 
```

# python - 在 Python 中绘制 3d 球体并使用 jpg “bumpmap”

> ID：10106772
> 
> 赞同：1
> 
> 时间：2012-04-11T13:21:57.183
> 
> 标签：python, 3d, geometry

我正在尝试使用 matplotlib 和 Mayavi 在 Python 中绘制一个 3d 球体。我正在使用的功能是*mayavi.mlab.mesh*

我可以更改球体的颜色，但我无法使用 jpg 文件作为颜色图。

如何使用图像文件为球体表面着色？

# python - python plot不显示窗口

> ID：10106775
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:08.977
> 
> 标签：python, plot, matplotlib

当我运行这个简单的代码时：

```
from pylab import *
import numpy as np

X = [];
Y = [];
for i in range (0,10):
    X.append(i)
    Y.append(i)

plot(X,Y)
show() 
```

我没有任何窗口。我试图`show`用`draw`相同的结果替换。

我正在使用 python 版本 3.2.2

如何显示窗口/绘图（除了将其打印到文件并打开文件）。

注意，我正在使用这个例子：

[http://matplotlib.sourceforge.net/examples/api/custom_scale_example.html](http://matplotlib.sourceforge.net/examples/api/custom_scale_example.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:28:19.963

我认为 numpy 或 scipy 还没有稳定的 3.2 版本。

除非使用 python 3.2 对您很重要，否则请尝试安装 python 2.7。一切都应该在那里正常工作。

# .net - Datagridview cellcontentclick事件没有时间完成

> ID：10106779
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:14.450
> 
> 标签：.net, vb.net, winforms, datagridview

我有一个，我有一个与每一行关联`DataGridView`的编辑。`Button`

在`CellContentClick`事件中，我正在动态删除和创建我的`textbox`控件`Label`的数量`TableLayoutPanel`

这种动态删除和创建控件需要一些时间也闪烁（这不是一个大问题）。

但问题是，如果有人在一段时间后不断地点击编辑`buttons`各个行，那么整个事情就`TableLayoutPanel`变得一团糟了。

据我所知，这正在发生，因为我的`CellContentClick`活动没有时间完成，在活动完成之前，单击`button`其他行的编辑。我无法处理这种情况

处理程序代码在这里：

```
Private Sub gdXMLDOc1_CellContentClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles gdXMLDOc1.CellContentClick
    Try
        If lockThis = False Then
            lockThis = True

            If e.ColumnIndex = 0 Then

                intPreviousRowIndex = intSelectedRowIndex
                intSelectedRowIndex = e.RowIndex

                gdXMLDOc1.Rows(intSelectedRowIndex).DefaultCellStyle.BackColor = Color.LightSkyBlue

                If intPreviousRowIndex <> -1 And intPreviousRowIndex <> intSelectedRowIndex Then

                    arrQuestion(intPreviousRowIndex).questionText = Replace(txtQText_New.Text, """", "\""")
                    arrQuestion(intPreviousRowIndex).choice = Replace(txtOpt1_New.Text, """", "\""")

                    For i As Integer = 0 To arrQuestion(intPreviousRowIndex).cText_eng.Length - 1

                        arrQuestion(intPreviousRowIndex).cText(i).line = Replace(TableLayoutPanel1.GetControlFromPosition(2, i + 3).Text, """", "\""")

                    Next

                    For i = TableLayoutPanel1.RowCount - 1 To 3 Step -1
                        TableLayoutPanel1.RowCount = TableLayoutPanel1.RowCount - 1
                        TableLayoutPanel1.Controls.Remove(TableLayoutPanel1.GetControlFromPosition(0, i))
                        TableLayoutPanel1.Controls.Remove(TableLayoutPanel1.GetControlFromPosition(1, i))
                        TableLayoutPanel1.Controls.Remove(TableLayoutPanel1.GetControlFromPosition(2, i))
                    Next

                End If

                TableLayoutPanel1.RowCount = 4

                txtQText.Text = arrQuestion(intSelectedRowIndex).questionText_eng
                txtOpt1.Text = arrQuestion(intSelectedRowIndex).choice_eng
                txtQText_New.Text = arrQuestion(intSelectedRowIndex).questionText
                txtOpt1_New.Text = arrQuestion(intSelectedRowIndex).choice
                TableLayoutPanel1.RowCount = TableLayoutPanel1.RowCount - 1
                Dim intRowIndex As Integer = TableLayoutPanel1.RowCount

                For i As Integer = 0 To arrQuestion(intSelectedRowIndex).cText_eng.Length - 1

                    Dim lbl As Label = New Label()
                    lbl.AutoSize = True
                    lbl.Font = New System.Drawing.Font("Arial", 11.0!, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, CType(0, Byte))
                    lbl.Size = New System.Drawing.Size(73, 36)
                    lbl.TabIndex = 5
                    lbl.Text = "Line" + arrQuestion(intSelectedRowIndex).cText_eng(i).lineId.ToString

                    Dim TxtBox1 As dynamicTextBox = New dynamicTextBox()
                    TxtBox1.Text = arrQuestion(intSelectedRowIndex).cText_eng(i).line

                    Dim TxtBox2 As TextBox = New TextBox()
                    TxtBox2.Font = New System.Drawing.Font("Mangal", 13.0!, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, CType(0, Byte))
                    TxtBox2.MaxLength = 50000
                    TxtBox2.Size = New System.Drawing.Size(600, 37)
                    TxtBox2.TabIndex = 16
                    TxtBox2.Text = arrQuestion(intSelectedRowIndex).cText(i).line

                    TableLayoutPanel1.RowCount = TableLayoutPanel1.RowCount + 1

                    TableLayoutPanel1.Controls.Add(lbl, 0, intRowIndex)
                    TableLayoutPanel1.Controls.Add(TxtBox1, 1, intRowIndex)
                    TableLayoutPanel1.Controls.Add(TxtBox2, 2, intRowIndex)

                    intRowIndex = TableLayoutPanel1.RowCount
                Next

            End If
            lockThis = False
        End If
    Catch ex As Exception

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:34:19.743

执行此操作的几种方法

在事件处理程序中的代码运行时禁用按钮

添加一个布尔属性，测试是否为真，将其设置为真，做你的东西将其设置为假。

看看您是否可以将“编辑请求”排队并在后台完成大部分工作。

第二个是我的选择，为了快速获胜。

和 ....

"之后继续点击各行的编辑按钮"

你所有的编辑按钮都有相同的处理程序吗？

鉴于你已经完成

```
if (!_inhibit)
{
  try
  {
    _inhibit = true;
    // mess with template
  }
  finally
  {
    _inhibit = false;
  }
} 
```

只是不明白这怎么会出错。如果你放了一个 debug `_inhibit = true`，除非处理程序代码完成，否则它永远不会到达那里。鉴于这是真的，你认为错的不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T11:13:17.893

像这样使用单元格点击事件

Private Sub DataGridView1_CellClick(sender As Object, e As DataGridViewCellEventArgs) 处理 DataGridView1.CellClick

当用户单击表格中的文本时，单元格内容单击起作用，从而产生令人困惑的用户体验

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:31:20.720

查看 SuspendLayout() 和 ResumeLayout() 函数以帮助解决闪烁问题。另一方面，没有任何代码很难确定。一种可能性是，如果您在任何地方使用 Appliation.DoEvents()。这可能会导致一个线程在前一个实例完成之前调用您的方法的问题，这可能会产生您描述的那种结果。

# java - JPA 2.0 作为 XML 的唯一约束

> ID：10106780
> 
> 赞同：3
> 
> 时间：2012-04-11T13:22:16.237
> 
> 标签：java, jpa, jpa-2.0

我正在使用 JPA 2.0 并希望使用 XML 而不是注释来创建唯一约束。

带注释的类如下所示：

```
@Entity
public class Person {
    @Id
    @GeneratedValue
    private Long id;
    @Column(unique=true)
    private String name;

    // ..
} 
```

像这样的`orm.xml`文件 - 虽然它缺少唯一约束：

```
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
    version="2.0">
    <entity class="kiosk.model.Person">
        <attributes>
            <id name="id">
                <generated-value strategy="AUTO" />
            </id>
            <basic name="name" />

            <!-- .. -->
        </attributes>
    </entity>
</entity-mappings> 
```

**如何使用 XML 向 JPA 2.0 类添加唯一约束？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T13:32:09.733

```
<basic name="name">
    <column unique="true"/>
</basic> 
```

见，[http ://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes](http://en.wikibooks.org/wiki/Java_Persistence/Basic_Attributes)

# razor - VS 11 Beta - 可能的 Razor 错误

> ID：10106784
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:32.587
> 
> 标签：razor

我发现 VS 11 Beta Views 中关于如何在 Views 中解析和处理 Javascript 似乎有些奇怪。我已经把它归结为最小的例子来说明问题。

```
@section tester {
    <script type="text/javascript">
    function Something(direction) {

        if (direction == "-") {

        } else if (direction == "+") {

        } else {    // direction = "" or anything else
            for (var idx = 0; idx < forms.length; idx++) {
            }
        }
    }
    </script>
} 
```

在我看来，这应该是一个有效（尽管毫无意义）的部分定义，但是，VS11Beta 并不认为它对我来说是一个完整的部分。最后的右大括号不是黄色的，它会报告构建错误。

删除任何一个 JS 部分（大括号到大括号）使其工作（右大括号是彩色的，等等）

谁能重复一下，还是只有我一个人？我不需要解决方法，只需确认这实际上是一个错误，而不是我的愚蠢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:37:10.143

这已被 Microsoft 确认为错误，将在下一个版本中修复。

[http://connect.microsoft.com/VisualStudio/feedback/details/736777/vs-11-beta-possible-razor-parser-bug](http://connect.microsoft.com/VisualStudio/feedback/details/736777/vs-11-beta-possible-razor-parser-bug)

# magento - Magento Backendgrid：单击数据条目并显示其数据

> ID：10106785
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:37.373
> 
> 标签：magento, grid

我使用本教程（尤其是第 6 和第 7 课）为 Magento 创建了我自己的后端网格：[http ://www.pierrefay.com/magento-developper-guide-howto-tutorial-5](http://www.pierrefay.com/magento-developper-guide-howto-tutorial-5)

一切正常。我可以为我的网格创建新的数据条目。如果我单击一个条目，则会再次显示 VarienForm，但所有文本字段都是空的。这似乎 Magento 认为我想编辑所有文本字段。但实际上我希望它首先显示条目数据。但它只显示空字段。

有谁可以帮我离开这里吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T01:21:53.963

您的实现可能有很多问题，但是如果没有看到您的代码就不可能说出来。尽管如此，我还是要试试。那个教程对我来说看起来不错，但我没有运行代码，所以我不能确定。我倾向于认为你可能只是错过了一些东西。在最好的情况下，在网格和选项卡中工作可能特别微妙。

在我看来，这确实是两件事之一。这听起来像

A) 您的模型数据未存储在注册表中。这意味着问题出在这部分代码中：

```
<?php
class Pfay_Test_Adminhtml_IndexController extends Mage_Adminhtml_Controller_Action
{
    ...
    public function editAction()
    {
        $testId = $this->getRequest()->getParam('id');
        $testModel = Mage::getModel('test/test')->load($testId);
        if ($testModel->getId() || $testId == 0)
        {
            Mage::register('test_data', $testModel);
        } 
```

这部分代码所做的是在 Magento 的注册表中“注册”选定的模型。稍后在代码中，您会看到它调用：

```
$form->setValues(Mage::registry('test_data')->getData()); 
```

填充您的表单字段。

尝试在上面的代码中放入类似这样的命令：

```
var_dump($testId);
die(); 
```

或者

```
print_r($testModel);
die(); 
```

并再次运行它。是否设置了 $testId？是否正在加载 $testModel？是注册表加载的 if 语句吗？如果没有，请追溯问题。

或者它也可能是

B）您的表单没有预先填充数据，因为列名错误。

看看代码在哪里说：

```
<?php
class Pfay_Test_Block_Adminhtml_Test_Edit_Tab_Form extends Mage_Adminhtml_Block_Widget_Form
{
   protected function _prepareForm()
   {
       $form = new Varien_Data_Form();
       $this->setForm($form);
       $fieldset = $form->addFieldset('test_form', array('legend'=>'ref information'));
       $fieldset->addField('nom', 'text',
           array(
               'label' => 'Nom',
               'class' => 'required-entry',
               'required' => true,
               'name' => 'nom',
           )
       ); 
```

您需要确保“nom”实际上是模型的属性名称之一。您是否在创建测试模型时更改了属性名称而忘记在此处更改？相应地更改这些值。

我希望这可以帮助您解决问题。祝你好运！

# html - 如何使用erlang将href url替换为html文档中的其他url？

> ID：10106787
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:40.550
> 
> 标签：html, url, replace, erlang, href

我有一个 html 文档，我必须使用 Erlang 将所有 href url 替换为另一个 url。我是erlang的初学者。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:36:25.183

您可以使用正则表达式。erlang中有're'模块，您可以使用`replace/3`

例如。

```
re:replace("kuba","b","[&]",[{return,list}]). 
```

给你：

```
"ku[b]a" 
```

[http://schemecookbook.org/Erlang/RegexChapter](http://schemecookbook.org/Erlang/RegexChapter) 文档替换/3 [http://www.erlang.org/doc/man/re.html#replace-3](http://www.erlang.org/doc/man/re.html#replace-3)

我希望这有帮助。

# javascript - window.location 没有工作

> ID：10106788
> 
> 赞同：0
> 
> 时间：2012-04-11T13:22:42.373
> 
> 标签：javascript, jquery, python, django

我在服务器端使用 jQuery 和 Django。我要做的是通过表单从用户那里获取一些文本，同时在画布区域中显示文本，如 about.me 和 flavor.me 所做的。然后用户将画布区域中的文本拖动到所需位置，当他们单击下一步按钮时，数据必须存储在数据库中并重定向到主页。一切正常（数据存储在数据库中），除非我单击我将 window.location 设置为的按钮，`"http://127.0.0.1:8000".`但是当我单击按钮时我没有进入该页面。

我在 Django 服务器中遇到一些错误：

```
error: [Errno 32] Broken pipe
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 51161)
Traceback (most recent call last):
File "/usr/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock 
```

这是我的 html： [https ://gist.github.com/2359541](https://gist.github.com/2359541)

Django 视图.py：

从 cover.models 导入 CoverModel 从 django.http 导入 HttpResponseRedirect

```
def coverview(request):
    if request.is_ajax():
            t = request.POST.get('top')
            l = request.POST.get('left')
            n = request.POST.get('name')
            h = request.POST.get('headline')
            try:
                    g = CoverModel.objects.get(user=request.user)
            except CoverModel.DoesNotExist:
                    co = CoverModel(top=t, left=l, name=n, headline=h)
                    co.user = request.user
                    co.save()
            else:
                    g.top = t
                    g.left = l
                    g.name = n
                    g.headline = h
                    g.save()
            return HttpResponseRedirect("/") 
```

网址.py：

```
url(r'^cover/check/$', 'cover.views.coverview'),
url(r'^cover/$', login_required(direct_to_template), {'template': 'cover.html'}), 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:43:38.950

部分问题是您尝试发布数据，然后使用 window.location 立即离开页面。只应在从 $.post() 获得响应时更改 window.location。

```
$.post("check/", { top: t, left: l, name: n, headline: h}, function(data) {
    window.location.href = "/";
}); 
```

另请注意，我删除了硬编码的 URL。就像克里斯说的那样，在这里使用亲戚。

如果仍然无法正常工作，您需要检查上面几行中的 Javascript 错误。使用 Firebug、Chrome 开发工具、Opera Dragonfly 等。检查以确保您的 POST 确实正在通过，并在此处发布更多有关该内容的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:30:53.980

您的问题中确实没有足够的信息来正确诊断此问题，但您可以尝试以下操作：

在JS 中硬编码域名*总是一个坏主意。*例如，当您将其投入生产时会发生什么？如果您想将用户发送到主页（假定位置设置为`http://127.0.0.1:8000/`），那么只需将位置设置为`/`。这将确保无论 IP 地址、域名或端口如何，它都会始终转到站点根目录。

# c# - 从 Windows 服务打印 EMF

> ID：10106791
> 
> 赞同：2
> 
> 时间：2012-04-11T13:22:50.443
> 
> 标签：c#, .net-3.5, printing, windows-services, system.printing

我有一些使用`System.Drawing.Printing`命名空间打印文档的代码。现在需要将其移动到 Windows 服务中。[该文档](http://msdn.microsoft.com/en-us/library/system.drawing.printing%28v=vs.80%29.aspx#2)指出这是不可能的，这将支持我迄今为止的发现（因为它不起作用）。我正在假设我可以通过使用`System.Printing`命名空间来让它工作。

这是我到目前为止的代码：

```
private Metafile myDoc;

myDoc = GetEmfDoc();

PrintServer ps = new PrintServer("\\server1\printer1");
EnumeratedPrintQueueTypes[] flags = { EnumeratedPrintQueueTypes.Local };
PrintQueueCollection queues = ps.GetPrintQueues(flags);

PrintQueue pq = queues.First<PrintQueue>();                
pq.AddJob("JobName", ?); 
```

所以我想传递`myDoc`给`pq.AddJob()`，但这似乎是不可能的。使用`System.Drawing.Printing`它可以在事件中简单地逐页呈现`PrintDocument.PrintPage`。

我正在尝试做的事情是否可能，如果是这样，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:00:03.933

> 不支持在 Windows 服务或 ASP.NET 应用程序或服务中使用 System.Drawing.Printing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。

在这种情况下，了解“不支持”的含义很重要。它的字面意思是它所说的，如果您尝试从服务打印并发现问题，那么您无法致电 Microsoft 支持并寻求帮助。

这*不是*System.Drawing 引起的问题，而是*打印机驱动程序*的一般问题。由打印机制造商而非 Microsoft 提供的代码块。它们的一个重要问题是它们总是被设计为从桌面程序中使用。Word、Acrobat 等。他们很容易利用这一点，他们经常弹出一个窗口让你知道他们正在努力。至少不要向制造商发送垃圾邮件并提醒您碳粉盒是半空的。这些驱动程序可能在服务中行为不端。注释中提到的“运行时异常”短语。

他们最糟糕的问题是他们使用弹出窗口让您知道有问题。当您使用服务中的打印机驱动程序时，这些窗口不可见。因此，您将不得不处理无缘无故拒绝打印的打印作业。注释中的“服务性能下降”短语。这很难处理，当 IT 人员看不到任何诊断时，他们无能为力解决问题。

你的方法不能解决这个根本问题。如果您真的想这样做，请联系打印机制造商并寻求具体建议。不要抱太大希望，从硬件公司那里得到好的答案是相当困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T07:46:45.570

这是权限问题和 Session 0 隔离的组合...

尽管我不建议这样做，但以下可能会解决您面临的问题：

如果您真的想要/需要完成这项工作，您将需要`server1`从会话 0 内部（不是从“正常”用户会话）登录（事先！）到远程服务器（在您的示例中） - 以交互方式（您可以通过 ) 或通过一些调用切换到会话 0 桌面`rundll32 winsta.dll,WinStationSwitchToServicesSession`（例如，使用[`WNetAddConnection2`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385413%28v=vs.85%29.aspx)远程计算机的正确凭据，不幸的是，这只能通过 p/invoke 或 COM 使用从 .NET 使用`WScript.Network`）。用于此登录的凭据需要具有有关在远程计算机上打印的完全权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:55:08.837

您是否在具有使用打印机的必要权限的帐户中运行您的服务？[Windows 服务常见问题解答](http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService)中的更多详细信息。

# algorithm - 按像素量调整图像大小

> ID：10106792
> 
> 赞同：1
> 
> 时间：2012-04-11T13:22:53.953
> 
> 标签：algorithm

我试图找出答案，但我做不到。

例如，一张图像`241x76`总共有`18,316 pixels (241 * 76)`. 调整大小的规则是，像素数量不能通过`10,000`。那么，我怎样才能获得保持纵横比并小于`10,000`像素的新尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T14:07:07.293

伪代码：

```
pixels = width * height
if (pixels > 10000) then
  ratio = width / height
  scale = sqrt(pixels / 10000)
  height2 = floor(height / scale)
  width2 = floor(ratio * height / scale)
  ASSERT width2 * height2 <= 10000
end if 
```

`ratio`请记住对涉及和实施时的所有计算使用浮点数学`scale`。

* * *

Python

```
import math

def capDimensions(width, height, maxPixels=10000):
  pixels = width * height
  if (pixels <= maxPixels):
    return (width, height)

  ratio = float(width) / height
  scale = math.sqrt(float(pixels) / maxPixels)
  height2 = int(float(height) / scale)
  width2 = int(ratio * height / scale)
  return (width2, height2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:33:41.930

C# 中的一个替代函数，它接受并返回一个`Image`对象：

```
 using System.Drawing.Drawing2D;

    public Image resizeMaxPixels(int maxPixelCount, Image originalImg)
    { 
        Double pixelCount = originalImg.Width * originalImg.Height;
        if (pixelCount < maxPixelCount) //no downsize needed
        {
            return originalImg;
        }
        else
        {
            //EDIT: not actually needed - scaleRatio takes care of this
            //Double aspectRatio = originalImg.Width / originalImg.Height;

            //scale varies as the square root of the ratio (width x height):
            Double scaleRatio = Math.Sqrt(maxPixelCount / pixelCount);

            Int32 newWidth = (Int32)(originalImg.Width * scaleRatio);
            Int32 newHeight = (Int32)(originalImg.Height * scaleRatio);
            Bitmap newImg = new Bitmap(newWidth, newHeight);
            //this keeps the quality as good as possible when resizing
            using (Graphics gr = Graphics.FromImage(newImg))
            {
                gr.SmoothingMode = SmoothingMode.AntiAlias;
                gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
                gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
                gr.DrawImage(originalImg, new Rectangle(0, 0, newWidth, newHeight));
            }
            return newImg;
        }
    } 
```

使用 Resizing an Image 的答案中的图形代码[而不损失任何质量](https://stackoverflow.com/questions/87753/resizing-an-image-without-losing-any-quality)

**编辑：**计算纵横比实际上在这里无关紧要，因为我们已经通过总像素比的（平方根）来缩放宽度和高度。您可以使用它来计算`newWidth`基于`newHeight`（或*反之亦然*），但这不是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T14:49:36.727

Deestan 的代码适用于方形图像，但在纵横比不同于 1 的情况下，平方根将不起作用。您需要将比例缩放到纵横比除以 2 的幂。

观察（Python）：

```
def capDimensions(width, height, maxPixels):
    pixels = width * height
    if (pixels <= maxPixels):
        return (width, height)
    ratio = float(width) / height
    scale = (float(pixels) / maxPixels)**(width/(height*2))
    height2 = round(float(height) / scale) 
    width2 = round(ratio * height2)
    return (width2, height2) 
```

让我们比较一下结果。

初始尺寸：**450x600** 初始像素：**270000**

我正在尝试调整大小以尽可能接近**119850**像素。

使用 Deestan 的算法：capDimensions：300x400 调整大小的像素：**67500**

使用修改后的算法：capDimensions。332x442 调整大小的像素：**82668**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-16T04:15:07.560

# 将图像缩小到最大像素数，同时保持纵横比

这就是我今天下午想出的，同时试图自己解决数学问题，为了好玩。我的代码似乎运行良好，我测试了几种不同形状和大小的图像。确保使用浮点变量，否则数学会中断。

## 伪代码

```
orig_width=1920
orig_height=1080
orig_pixels=(orig_width * orig_height)
max_pixels=180000

if (orig_pixels <= max_pixels) {
   # use original image
}
else {
   # scale image down
   ratio=sqrt(orig_pixels / max_pixels)
   new_width=floor(orig_width / ratio)
   new_height=floor(orig_height / ratio)
} 
```

## 示例结果

```
1920x1080 (1.77778 ratio) becomes 565x318  (1.77673 ratio, 179,670 pixels)
1000x1000 (1.00000 ratio) becomes 424x424  (1.00000 ratio, 179,776 pixels)
 200x1200 (0.16667 ratio) becomes 173x1039 (0.16651 ratio, 179,747 pixels) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-11T15:31:35.043

```
width2 = int(ratio * height / scale) 
```

最好是

```
width2 = int(ratio * height2) 
```

因为这可能会更好地保持纵横比（因为 height2 已被截断）。

在不引入像“sc”这样的另一个变量的情况下，可以写成
new_height = floor(sqrt(m / r))

和

new_width = floor(sqrt(m * r))
给定 m=max_pixels（这里：10.000），r=ratio=w/h（这里：241/76 = 3.171）

两个结果是相互独立的！从每个 new_value，您可以计算另一个维度， (given: new_height) new_width = floor(new_height * r)
(given: new_width) new_height = floor(new_width / r)

由于裁剪了值（地板函数），两对维度的比率与原始比率的接近程度可能有所不同；你会选择更好的一对。

# emacs - Emacs：为什么用 MS-[字母] 键绑定设置标记？

> ID：10106797
> 
> 赞同：1
> 
> 时间：2012-04-11T13:23:03.987
> 
> 标签：emacs

我正在为 Emacs 中的基本运动试验新的绑定。借用[此页面](http://xahlee.org/emacs/emacs_useful_user_keybinding.html)和[ErgoEmacs](http://ergoemacs.org/)，此重新映射按预期工作：

```
(global-set-key (kbd "M-i")   'previous-line)
(global-set-key (kbd "M-k")   'next-line)
(global-set-key (kbd "M-j")   'backward-char)
(global-set-key (kbd "M-l")   'forward-char) 
```

但是定义 Shift-Alt 组合会产生不必要的副作用。

```
(global-set-key (kbd "M-I")   'cua-scroll-down)
(global-set-key (kbd "M-K")   'cua-scroll-up)
(global-set-key (kbd "M-J")   'backward-word)
(global-set-key (kbd "M-L")   'forward-word) 
```

运行`describe-key`( `C-h k`) 表明绑定成功。这些绑定按应有的方式移动点，但由于某种原因，它将标记设置在我的原始位置，并在我移动点时给我一个突出显示的区域。

我该如何纠正？

编辑：这与 cua 模式有关。当我禁用 cua 模式时，问题就消失了。不幸的是，禁用 cua 模式并不是一个理想的解决方案。

编辑：这是 Emacs 中的一个错误。它被跟踪为 bug#11221，标题“cua-mode 激活了移位绑定的标记”。从邮件列表上的讨论来看，听起来 cua-base.el 将得到修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T14:19:52.273

它确实很可能是由 触发的`shift-select-mode`，但它看起来像一个错误：`shift-select-mode`应该注意命令绑定到移位键的事实。尝试在不使用 CUA 的情况下重现问题，然后请使用`M-x report-emacs-bug`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:02:03.343

那是因为[shift selection](https://www.gnu.org/software/emacs/manual/html_node/emacs/Shift-Selection.html)。`shift-select-mode`您可以通过设置来禁用它`nil`。

# java - 加载 CSV 文件并从值创建新类实例

> ID：10106799
> 
> 赞同：1
> 
> 时间：2012-04-11T13:23:14.613
> 
> 标签：java, csv

我有一个像这样定义的类，具有适当的 getter 和 setter 方法......

```
public class Album {
    private int id;
    private String artist;
    private String name;
    private int published;
} 
```

我还有一个 .csv 文件，用于存储许多专辑的内容。在文件中，一行代表一张专辑。

我正在尝试从 .csv 文件中读取信息，然后使用`Album`类的设置器来分配值。这是我的代码...

```
public Map<Integer, Album> load() {

    Scanner scanner = new Scanner(fileName);
    Map<Integer, Album> loadedAlbums = new HashMap<Integer, Album>();

    while(scanner.hasNextLine()) {
        Album album = new Album();

        String[] albumDivided = scanner.nextLine().split(","); 
        //in the .csv file every unit of information is divided by a comma.

        album.setId(Integer.parseInt(albumDivided[0])); //this is line 11.
        album.setArtist(albumDivided[1]);
        album.setName(albumDivided[2]);
        album.setPublished(Integer.parseInt(albumDivided[3]));

        loadedAlbums.put(album.getId(), album);

    }

    return loadedAlbums;
} 
```

但是，尝试使用此代码时，我得到以下异常：

> java.lang.NumberFormatException：对于输入字符串：第 11 行的“albums.csv”。

你能帮我理解这个问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:29:37.207

那么问题是由异常向您描述的......

A`NumberFormatException`将由您的`Integer.parseInt()`一条线路触发。触发异常的代码行是*第 11 行*（根据异常消息）-不确定这是哪一行，但可能是第一`Integer.parseInt()`行。

您的代码正在尝试将值*“albums.csv”*转换为数字，这显然不是。因此，在您的 CSV 文件中的某处，您必须有一行包含值*albums.csv*，它需要一个数字。

希望这有助于查明问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:32:57.357

由于您不想要整个解决方案，因此这里提示解决您的问题：

您应该查看[Scanner 类的 API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.lang.String%29)。仔细查看需要单个 String 参数的构造函数（当您在代码中使用它时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:42:52.927

据我所知，albumDivided[0] 将包含“1”。由于点，它将无法解析为整数。从 csv 文件中删除点，或者在将点解析为整数之前创建一个删除点的新字符串。该方法可能如下所示：

```
String newString;
for(int i=0;i<albumDivided[0].length-1;i++){ //length -1 to remove the dot
   newString = newString + albumDivided[0].charAt(i); //get the string stored in albumDivided[0] and add each char to the new string
} 
```

# java - 从许多列表中获取所有值的组合

> ID：10106801
> 
> 赞同：1
> 
> 时间：2012-04-11T13:23:22.060
> 
> 标签：java, performance, algorithm, combinations

我正在尝试根据给定的字符串解析所有元素组合。

字符串是这样的：

```
String result="1,2,3,###4,5,###6,###7,8,"; 
```

`###`（用 分隔）之间的元素数量`,`未确定，“列表”（用 分隔的部分`###`）的数量也未确定。

*注意：我在这个例子中使用了数字，但也可以`String`。*

在这种情况下，预期结果是一个包含以下内容的字符串：

```
String result = "1467, 1468, 1567, 1568, 2467, 2468, 2567, 2568, 3467, 3468, 3567, 3568" 
```

因此，您可以看到结果中的元素必须以第一个列表的元素开头，然后第二个元素必须是第二个列表的元素，依此类推...

从现在开始，我制作了这个可行的算法，但速度很慢：

```
 String [] parts = result.split("###");
    if(parts.length>1){
        result="";
        String stack="";
        int i;
        String [] elmts2=null;

        String [] elmts = parts[0].split(",");
        for(String elmt : elmts){               //Browse root elements
            if(elmt.trim().isEmpty())continue;

            /**
             * This array is used to store the next index to use for each row.
             */
            int [] elmtIdxInPart= new int[parts.length];

            //Loop until the root element index change.
            while(elmtIdxInPart[0]==0){

                stack=elmt;

                //Add to the stack an element of each row, chosen by index (elmtIdxInPart)
                for(i=1 ; i<parts.length;i++){
                    if(parts[i].trim().isEmpty() || parts[i].trim().equals(","))continue;
                    String part = parts[i];
                    elmts2 = part.split(",");
                    stack+=elmts2[elmtIdxInPart[i]];
                }
                //rollback i to previous used index
                i--;

                if(elmts2 == null){
                    elmtIdxInPart[0]=elmtIdxInPart[0]+1;
                }
                //Check if all elements in the row have been used.
                else if(elmtIdxInPart[i]+1 >=elmts2.length || elmts2[elmtIdxInPart[i]+1].isEmpty()){

                    //Make evolve previous row that still have unused index
                    int j=1;
                    while(elmtIdxInPart[i-j]+1 >=parts[i-j].split(",").length || 
                            parts[i-j].split(",")[elmtIdxInPart[i-j]+1].isEmpty()){
                        if(j+1>i)break;
                        j++;
                    }
                    int next = elmtIdxInPart[i-j]+1;
                    //Init the next row to 0.
                    for(int k = (i-j)+1 ; k <elmtIdxInPart.length ; k++){
                        elmtIdxInPart[k]=0;
                    }
                    elmtIdxInPart[i-j]=next;
                }
                else{
                    //Make evolve index in current row, init the next row to 0.
                    int next = elmtIdxInPart[i]+1;
                    for(int k = (i+1) ; k <elmtIdxInPart.length ; k++){
                        elmtIdxInPart[k]=0;
                    }
                    elmtIdxInPart[i]=next;
                }
                //Store full stack
                result+=stack+",";
            }
        }
    }
    else{
        result=parts[0];
    } 
```

如果可能的话，我正在寻找一种性能更高的算法。我从头开始制作，没有考虑任何数学算法。所以我想我做了一个棘手/缓慢的算法，它可以改进。

感谢您的建议，并感谢您尝试了解我所做的事情:)

***编辑***

使用 Svinja 命题，它将执行时间除以 2：

```
 StringBuilder res = new StringBuilder();
        String input = "1,2,3,###4,5,###6,###7,8,";
        String[] lists = input.split("###");
        int N = lists.length;
        int[] length = new int[N];
        int[] indices = new int[N];
        String[][] element = new String[N][];
        for (int i = 0; i < N; i++){
            element[i] = lists[i].split(",");
            length[i] = element[i].length;
        }

        // solve
        while (true)
        {
            // output current element
            for (int i = 0; i < N; i++){
                res.append(element[i][indices[i]]);
            }
            res.append(",");

            // calculate next element
            int ind = N - 1;
            for (; ind >= 0; ind--)
                if (indices[ind] < length[ind] - 1) break;
            if (ind == -1) break;

            indices[ind]++;
            for (ind++; ind < N; ind++) indices[ind] = 0;
        }
        System.out.println(res); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:42:59.593

这是一种稍微不同的方法：

```
 static void Main(string[] args)
    {
        string input = "1,2,3,###4,5,###6,###7,8,";

        string[] lists = input.Replace("###", "#").Split('#');
        int N = lists.Length;
        int[] length = new int[N];
        string[][] element = new string[N][];
        int outCount = 1;

        // get each string for each position
        for (int i = 0; i < N; i++)
        {
            string list = lists[i];
            // fix the extra comma at the end
            if (list.Substring(list.Length - 1, 1) == ",")
                list = list.Substring(0, list.Length - 1);

            string[] strings = list.Split(',');
            element[i] = strings;
            length[i] = strings.Length;
            outCount *= length[i];
        }
        // prepare the output array
        string[] outstr = new string[outCount];

        // produce all of the individual output strings
        string[] position = new string[N];
        for (int j = 0; j < outCount; j++)
        {
            // working value of j:
            int k = j;

            for (int i = 0; i < N; i++)
            {
                int c = length[i];
                int q = k / c;
                int r = k - (q * c);
                k = q;
                position[i] = element[i][r];
            }
            // combine the chars
            outstr[j] = string.Join("", position);                
        }
        // join all of the strings together
        //(note: joining them all at once is much faster than doing it
        //incrementally, if a mass concatenate facility is available
        string result = string.Join(", ", outstr);            
        Console.Write(result);
    } 
```

我也不是 Java 程序员，所以我将 Svinja 的 c# 答案改编为我的算法，假设您也可以将其转换为 Java。（感谢 Svinja..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:13:10.270

这是我的解决方案。它在 C# 中，但您应该能够理解它（重要的部分是“计算下一个元素”部分）：

```
 static void Main(string[] args)
    {
        // parse the input, this can probably be done more efficiently
        string input = "1,2,3,###4,5,###6,###7,8,";
        string[] lists = input.Replace("###", "#").Split('#');
        int N = lists.Length;
        int[] length = new int[N];
        int[] indices = new int[N];
        for (int i = 0; i < N; i++)
            length[i] = lists[i].Split(',').Length - 1;

        string[][] element = new string[N][];
        for (int i = 0; i < N; i++)
        {
            string[] list = lists[i].Split(',');
            element[i] = new string[length[i]];
            for (int j = 0; j < length[i]; j++)
                element[i][j] = list[j];
        }

        // solve
        while (true)
        {
            // output current element
            for (int i = 0; i < N; i++) Console.Write(element[i][indices[i]]);
            Console.WriteLine(" ");

            // calculate next element
            int ind = N - 1;
            for (; ind >= 0; ind--)
                if (indices[ind] < length[ind] - 1) break;
            if (ind == -1) break;

            indices[ind]++;
            for (ind++; ind < N; ind++) indices[ind] = 0;
        }
    } 
```

似乎有点类似于您的解决方案。这真的有不好的表现吗？在我看来，这显然是最优的，因为复杂度与输出的大小成线性关系，这总是最优的。

编辑：“类似”我的意思是你似乎也用索引来计数。你的代码太复杂了，我下班后无法进入。:D

我的索引调整很简单：从右边开始，找到第一个我们可以增加而不会溢出的索引，将其增加一个，并将其右边的所有索引（如果有）设置为 0。它基本上是在一个数字系统中计数，其中每个数字都有不同的基数。一旦我们甚至不能再增加第一个索引（这意味着我们不能增加任何索引，因为我们从右边开始检查），我们就完成了。

# java - hashCode() 是如何在 Java 中实现的

> ID：10106802
> 
> 赞同：6
> 
> 时间：2012-04-11T13:23:23.513
> 
> 标签：java, hash

[hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)是如何实现的？

我的假设是它使用对象内存位置作为它运行散列函数的初始数字（种子）。然而，这种情况并非如此。

我也看过[Hash ：它是如何在内部工作的？](https://stackoverflow.com/questions/4453476/hash-how-does-it-work-internally)但它没有回答我的问题。

是的，我可以下载 SDK，但在我这样做并查看代码之前，也许其他人已经知道它了。

谢谢 ：）

**编辑：** 我知道它应该被覆盖等等，所以请尽量保持话题:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-17T15:21:26.673

不不不。此线程中的所有答案都是错误的，或者至少只是部分正确。

首先： `Object.hashCode()`是一个native方法，所以它的实现**完全依赖**于JVM。[HotSpot](http://en.wikipedia.org/wiki/HotSpot)和其他 VM 实现（如[JRockit](http://en.wikipedia.org/wiki/JRockit)或[IBM J9](http://en.wikipedia.org/wiki/IBM_J9) ）之间可能会有所不同。

如果您要问：

> `hashCode()`Java中是如何实现的？

**那么答案是**：这取决于您使用的是哪个虚拟机。

假设您使用的是 Oracle 的默认 JVM，即 HotSpot，那么我可以告诉您，HotSpot 有六个`hashCode()`实现。您可以`-XX:hashCode=n`通过命令行使用运行 JVM 的标志来选择它，其中`n`可以是：

```
0 – Park-Miller RNG (default)
1 – f(address, global_statement)
2 – constant 1
3 – Serial counter
4 – Object address
5 – Thread-local Xorshift 
```

[以上是从这个帖子](https://stackoverflow.com/a/16105878/1037316)复制的。

如果您深入研究 HotSpot 源代码，您可能会发现以下代码段：

```
if (hashCode == 0) {
  value = os::random();
} else {
  ... 
```

`os::random()`只是 Park-Miller Pseudo Random Generator 算法的实现。

就这样。**没有任何内存地址的概念。**尽管其他两个实现 `1`和 `4`使用对象的内存地址，但默认的不使用它。基于对象地址
的概念在很大程度上是一个[历史文物](https://stackoverflow.com/a/13860488/1037316)——它不再是正确的。`Object.hashCode()`

* * *

我知道在`Object#hashCode()`JavaDoc 中我们可以阅读：

> (...) 这通常通过将对象的内部地址转换为整数来实现，但 Java™ 编程语言不需要这种实现技术。

但它已经过时且具有误导性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T13:38:55.497

当然它是特定于实现的，但通常对象的哈希码将被延迟计算并存储在对象头中。奇怪的事情是用头来做的，以保持它们很小，同时允许复杂的锁定算法。

在 OpenJDK/Oracle JVM 中，计算初始哈希码的常用方法是基于第一次请求时的内存地址。对象在内存中移动，所以每次都使用地址不是一个好的选择。哈希码不是实际地址——它通常是八的倍数，不适合直接在哈希表中使用，尤其是具有两倍大小的幂。注意身份哈希码不是唯一的。

HotSpot 具有构建时间选项以始终使用零或使用安全随机数生成器 (SRNG) 进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:43:13.090

类 Object 定义的 hashCode 方法为不同的对象返回不同的整数。这可以通过将对象的内部地址转换为整数来实现（但标准不需要这种实现方式）。为了支持哈希表（equal 和 hashCode），覆盖 hashCode 的新类变得有趣： [http ://www.javapractices.com/topic/TopicAction.do?Id=28](http://www.javapractices.com/topic/TopicAction.do?Id=28)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T13:39:57.657

hashcode() 函数的实现因对象而异。如果您想知道特定类如何实现 hashcode()，则必须查找该类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-11T13:26:55.007

我假设您正在谈论 的`Object`实现`hashCode`，因为该方法可以而且应该被覆盖。

它依赖于实现。对于 Sun JDK，它基于对象的内存地址。

# sql - 如何选择 SQL DDL 类型参数？

> ID：10106804
> 
> 赞同：1
> 
> 时间：2012-04-11T13:23:29.140
> 
> 标签：sql, types

我见过的所有 SQL 方言都用于允许或要求在定义表时为它们支持的某些数据类型指定一个整数参数。但是我还没有找到任何关于这些数字究竟意味着什么以及如何充分选择它们的全面信息（至少对于 MySQL 和 SQLite）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:32:42.780

如果您指的是 INT(11)、VARCHAR(255) 之类的符号，那么通常它是从表中存储（或检索）的值的长度。

[http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html) [http://dev.mysql.com/doc/refman/5.5/en/string-type-overview.html](http://dev.mysql.com/doc/refman/5.5/en/string-type-overview.html)

在支持它的每种类型的名称后面都有一个括号中的“M”。

另外，请记住，这些数字可能会影响存储和选择长度。例如，如果您将列定义为 VARCHAR(100)，则为每个值保留的实际空间仍为 255。但您在 SELECT 中检索的值将缩减为 100 个字符。如果你定义了一个 VARCHAR(256)，那么它最多可以保留 65535 个字符，如果我没记错的话。

与 INT(5) 相同。它仍然为存储高达 2147483647（有符号整数的最大值）的值保留空间，但将输入/输出修剪为 5 位。

# c++ - 对引用和指针的困惑

> ID：10106806
> 
> 赞同：4
> 
> 时间：2012-04-11T13:23:31.457
> 
> 标签：c++, pointers, reference, this

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
> [各种符号（*、&等）结合参数有什么区别？](https://stackoverflow.com/questions/9636903/what-are-the-distinctions-between-the-various-symbols-etc-combined-with-p)

我很难理解下面粘贴的这个示例代码。具体来说，函数`Buf& operator=( const Buf & );`。据我了解，此函数需要`Buf`返回类对象的地址。出现两个问题：

1.  将 this 声明为 是否同样适用`Buf* operator=( const Buf* );`，因为`Buf*`它也是类实例的地址`Buf`？如果不是，为什么不呢？如果是这样，它只是编码风格的偏好吗？哪个更可取？

2.  在对应的函数定义中，`*this`返回。据我了解，`this`是一个指针，或对应于 class 对象的地址`Buf`。`*this`指针指向的也是如此，即 class 的对象`Buf`。这和退货有冲突`Buf*`吗？函数应该返回`this`而不是返回`*this`吗？

我想我今天有这样的日子......请有人帮忙！

> ```
> using namespace std;
> 
> class Buf  { public:
>     Buf( char* szBuffer, size_t sizeOfBuffer );
>     Buf& operator=( const Buf & );
>     void Display() { cout << buffer << endl; }
> 
> private:
>     char*   buffer;
>     size_t  sizeOfBuffer; };
> 
> Buf::Buf( char* szBuffer, size_t sizeOfBuffer ) {
>     sizeOfBuffer++; // account for a NULL terminator
> 
>     buffer = new char[ sizeOfBuffer ];
>     if (buffer)
>     {
>         strcpy_s( buffer, sizeOfBuffer, szBuffer );
>         sizeOfBuffer = sizeOfBuffer;
>     } }
> 
> Buf& Buf::operator=( const Buf &otherbuf )  {
>     if( &otherbuf != this ) 
>     {
>         if (buffer)
>             delete [] buffer;
> 
>         sizeOfBuffer =  strlen( otherbuf.buffer ) + 1; 
>         buffer = new char[sizeOfBuffer];
>         strcpy_s( buffer, sizeOfBuffer, otherbuf.buffer );
>     }
>     return *this; }
> 
> int main() {
>     Buf myBuf( "my buffer", 10 );
>     Buf yourBuf( "your buffer", 12 );
> 
>     // Display 'my buffer'
>     myBuf.Display();
> 
>     // assignment opperator
>     myBuf = yourBuf;
> 
>     // Display 'your buffer'
>     myBuf.Display(); } 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:28:57.930

这：

```
Buf& operator=( const Buf & ); 
```

返回对`Buf`对象的引用，而不是对象的地址`Buf`。因此，当方法返回时`*this`，调用者会获得对该对象的引用。

这： Buf* operator=( const Buf * );

返回一个指向 a 的指针`Buf`，因此相应的函数确实会返回`this`。

注意这里：

```
Buf& b = <some code returning Buf&>; 
```

`b`是对 的引用`Buf`，而不是地址。另一方面，

```
Buf c = ...
Buf* pBuf = &c; 
```

`&c`上面代码*中是*的地址，`c`可以用来初始化`pBuf`，这是一个指向 的指针`Buf`。所以`*`and`&`可以根据上下文有不同的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T13:25:53.013

> 据我了解，此函数期望返回类 Buf 对象的地址。

不。

返回的是对 Buf 对象的引用，而不是地址。引用不是地址。它是一个别名——用来指代那个精确对象的东西。引用不同于指针。

我建议你在谷歌上搜索 C++ 引用和指针，或者更好的是，你阅读[一本很好的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)来解释这个概念。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T13:26:04.383

`Buf&`不是“地址”，而是参考。从语法上讲，您只需返回一个对象，调用者就可以访问原始对象。在上述情况下，`return *this;`返回当前对象。

（请注意，通过引用返回自动对象是非法的，因为当调用者稍后尝试访问它们时它们将不再存在。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T13:36:11.103

在幕后，引用被称为指向对象的指针。当您`*this`作为参考返回时，您实际上将确切的对象（没有任何复制）返回给接收它的参考。引用和指针之间的主要区别在于您可以操作指针（例如更改它们指向的地址），但引用不能。

例子 ：

```
int val = 4;
int *p = &val;
int &r = val;

p++ // Will pointer to the next memory located to val (addr(val) + sizeof(int)) 
(*p)++ // Will NOT increment val anymore as p pointer to another location
r++ // will increment value of val (you cannot increment the location r is pointing to). This is same as (*p)++. 
```

两者`p`和`r`都指的是内存中的相同位置（地址`val`），但唯一的区别是您访问 val 值的方式。（`*p`对`r`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T13:44:08.310

`SomeType&`当您熟悉引用概念 ( ) 和地址获取运算符 ( )之间的区别时`&SomeObject`，您可以查看[C++ FAQ](http://www.parashift.com/c++-faq-lite/references.html)，其中对引用是什么以及应该如何使用它进行了很好的解释。

# java - 如何在 Android 中使用 wsclient++

> ID：10106810
> 
> 赞同：0
> 
> 时间：2012-04-11T13:23:41.733
> 
> 标签：java, android, wsdl, ws-client

请帮我！我需要为我的 android 应用程序创建一个 wsdl 客户端。为此，我使用 wsclient++，但我不知道如何使用它。我有一个错误

> InventoryServiceAsync 无法解析为类型

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:06:23.687

确保在项目中包含 wsclient jar。

另外，请查看[这里](http://wsclient.neurospeech.com/blog/)的***附加库***部分。你可能会觉得这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:50:29.053

*Async 类由代码生成器生成——当您使用完整版时。演示版不支持异步操作，因此不生成类。

# visual-c++ - 如何构造WININET的HttpSendRequest方法

> ID：10106816
> 
> 赞同：4
> 
> 时间：2012-04-11T13:23:56.900
> 
> 标签：visual-c++, wininet

我有 URI =http://localhost/IO_100_Service.svc/xml?id={id} 的虚拟 Web 服务，它以 XML 格式返回数据我想在 VC++ 中使用 WINInet APi 调用此服务。谁能帮助我如何使用构造“HttpSendRequest”方法来添加标题和数据来调用这个服务。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T23:46:24.797

这是一个示例代码，您应该可以根据需要进行修改。我使用 VS2005 使用命令行模板项目对其进行了测试。

```
 #include <tchar.h>
    #include <wininet.h>  

    /// ....

    HINTERNET hIntSession = 
      ::InternetOpen(_T("MyApp"), INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, 0);

    HINTERNET hHttpSession = 
      InternetConnect(hIntSession, _T("api.twitter.com"), 80, 0, 0, INTERNET_SERVICE_HTTP, 0, NULL);

    HINTERNET hHttpRequest = HttpOpenRequest(
      hHttpSession, 
      _T("GET"), 
      _T("1/statuses/user_timeline.xml?screen_name=twitterapi"),
      0, 0, 0, INTERNET_FLAG_RELOAD, 0);

    TCHAR* szHeaders = _T("Content-Type: text/html\nMySpecialHeder: whatever");
    CHAR szReq[1024] = "";
    if( !HttpSendRequest(hHttpRequest, szHeaders, _tcslen(szHeaders), szReq, strlen(szReq))) {
      DWORD dwErr = GetLastError();
      /// handle error
    }

    CHAR szBuffer[1025];
    DWORD dwRead=0;
    while(::InternetReadFile(hHttpRequest, szBuffer, sizeof(szBuffer)-1, &dwRead) && dwRead) {
      szBuffer[dwRead] = 0;
      OutputDebugStringA(szBuffer);
      dwRead=0;
    }

    ::InternetCloseHandle(hHttpRequest);
    ::InternetCloseHandle(hHttpSession);
    ::InternetCloseHandle(hIntSession); 
```

# php - 嵌套 While 循环 php

> ID：10106819
> 
> 赞同：3
> 
> 时间：2012-04-11T13:24:03.670
> 
> 标签：php, mysql, nested-loops

我一直在尝试让一系列嵌套循环从一个表中选择数据库名称，然后查询该数据库中选定的表，并将结果相加并显示它们的数量和数据库名称。

我已经让代码工作了，但它一直显示：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in 
```

我已经尝试了我在网上找到的所有可能的方法来提供帮助，但都没有奏效。

```
$resulta = mysql_query("SELECT dbname AF012 FROM Customer");

while($data = mysql_fetch_array($resulta))
  {
    $db = $data[' dbname '];

$result = null;
$result2 = mysql_query("SELECT changemade FROM $db.orders");
//looping through the results
while($row = mysql_fetch_array($result2))
  {
    //checking if any record is 1,2 or 3
  if( ($row[‘changemade’]== 1) || ($row[‘changemade’]== 2) || ($row[‘changemade’]== 3) )          {
      //if any match the if adding 1 to the counter
      $counter ++;
    }
     }
 unset($result2);
echo $db."  ".$counter;
 echo "<br>";
 $counter = 0;
 $result = null;
 $result2 = null;
} 
```

所有数据库连接都已建立并且工作正常，因此与此无关。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:47:39.417

您需要引入错误处理，也可以简化代码。当前的故障点是查询数据库并从中获取，因此您可以将其封装到它自己的函数中，这也将减少您的代码：

```
function mysql_query_array($query)
{
    if (!$result = mysql_query($query)) {
        throw new Exception(sprintf('Invalid query "%s", error: %s.', $query, mysql_error()));
    }
    return function () use ($result) {
        return mysql_fetch_array($result);
    };
} 
```

有了这个小辅助函数，您的代码现在更加紧凑，并且具有实际的错误处理功能：

```
$queryA = mysql_query_array("SELECT dbname AF012 FROM Customer");
while ($data = $queryA())
{
    $counter = 0;
    $queryB = mysql_query_array("SELECT changemade FROM {$data['dbname']}.orders");
    while ($row = $queryB())
    {
        if (in_array($row['changemade'], range(1, 3))) {
            $counter++;
        }
    }
    printf("%s  %s<br>\n", $db, $counter);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:25:57.483

这是因为`mysql_query`如果查询失败则返回 false ，因此您的查询之一失败并`mysql_fetch_array()`获得布尔值。尝试更改 `$db = $data[' dbname '];`为 `$db = $data['dbname'];`

# delphi - Delphi 文本解析为 Crystal XI R2 报告

> ID：10106823
> 
> 赞同：1
> 
> 时间：2012-04-11T13:24:22.320
> 
> 标签：delphi, crystal-reports, vcl

我正在研究将翻译文本实时推送到水晶报告的选项。我遇到的问题是这样的：

我的报告上有一个文本对象，其中包含以下文本：

> `From the date of {?FromDate} until the date of {?UntilDate}`.

现在，当我使用 TCrpe 检索文本时，我得到以下信息“

> `From the date of until the date of`

现在使用 TCrpe 可以使用以下方法获取嵌入对象的列表：

> `TCrpeTextObjectsItem.EmbeddedFields`

问题是我不知道如何识别在提取的文本中插入这些对象的位置。我需要知道这个位置的原因是，当翻译文本被发送回给我时，我知道在将翻译解析为报告时将这些嵌入对象推回哪个位置。

我的问题的第二部分是，一旦我知道将翻译推送到报告时的位置，我如何设置嵌入对象以使用该位置。但是我希望解决第一个问题将帮助我解决第二个问题。

# java - Java日期计算在结果中截断小数位

> ID：10106826
> 
> 赞同：0
> 
> 时间：2012-04-11T13:24:36.080
> 
> 标签：java, decimal

如果我用不同的日期调用此方法，则差异结果的小数位 / 1000L / 60L / 60L / 24L 将始终被截断。我能做些什么来防止这种情况发生？我需要 4.xx 的结果。

```
public boolean checkDelayed(Date date1, Date date2)
{
    long difference = date2.getTime() - date1.getTime();

    if (difference / 1000L / 60L / 60L / 24L <= 4L)
    {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:25:37.087

尝试使用双打而不是多头。

```
public boolean checkDelayed(Date date1, Date date2)
{
    double difference = (double) (date2.getTime() - date1.getTime());

    if (difference / 1000d / 60d / 60d / 24d <= 4d)
    {
        return true;
    }

    return false;
} 
```

最好的方法是应用简单的数学。你的情况是这样的：

```
difference / 1000L / 60L / 60L / 24L <= 4L 
```

像这样锻炼：

```
 difference / 60L / 60L / 24L <= 4000L
              difference / 60L / 24L <= 240000L
                    difference / 24L <= 14400000L
                          difference <= 345600000L 
```

你有它。始终工作的简单条件。

```
public boolean checkDelayed(Date date1, Date date2)
{
    long difference = date2.getTime() - date1.getTime();

    if (difference <= 345600000L)
    {
        return true;
    }

    return false;
} 
```

这一切的原因是 long 数据类型不支持十进制值。通过转换为双精度值，您将能够保留十进制值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:33:55.607

除了 long，您还可以乘以代替除法。

```
if (difference <= 4 * 1000 * 60 * 60 * 24 )
{
    return true;
} 
```

划分速度较慢，并且有可能削减一些数字。甚至除以整数也比乘以浮点数或双精度数要慢（在某些情况下？例如，AMD 最好使用浮点数，Intel 使用整数）。使用 BigDecimal.divide(...) 而不是 double 会阻止修剪，但会更慢。

我能想到的乘法的唯一缺点是一个非常大的数字会溢出（即计算的 int 可能大于 Integer.MAX_VALUE，或者大于 Long.MAX_VALUE）。但在你的情况下，你只有常数，所以它是最好的选择。

# java - Hibernate中如何调用用户定义mysql函数

> ID：10106833
> 
> 赞同：0
> 
> 时间：2012-04-11T13:25:06.677
> 
> 标签：java

我在mysql中创建了函数

`SELECT mpm_autogenerate_code(param1,param2)`

我想用 Hibernate Query Language 调用这个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:27:36.187

您可以使用[本机 SQL 查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)。

另一种可能性是按照此[答案](https://stackoverflow.com/questions/1909315/how-can-you-call-custom-database-functions-with-hibernate)`Dialect`中的描述扩展 a ，但它更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:32:56.410

您可能会发现[本](http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate/)教程很有用，但它不是 HQL

# matlab - 计算一个点周围的圆形箱+ matlab

> ID：10106835
> 
> 赞同：0
> 
> 时间：2012-04-11T13:25:17.577
> 
> 标签：matlab

我的问题与此链接有关[stackoverflow ques](https://stackoverflow.com/questions/5258740/drawing-shape-context-logpolar-bins-in-matlab)

本质上重复在那里绘制的图形.. 我在图像中有一个中心点（ x ， y ），我必须围绕它绘制 4 个 1-4 单位半径的圆，它们之间有 8 个角度。

在此图中，有 12 个角度箱，但我有 8 个。那里有一个代码解决方案，但它用于绘制上图。

![记录极地箱](../Images/f9954b90e0c7e73c9e2f7e11bdad8623.png)

我想计算每个楔形的 4 个区域中的每个区域的最大强度点。matlab 有内置函数吗？我看了看，`rose`但不明白它是否对我有帮助......

如果有人可以帮助我如何在matlab中计算它，我将不胜感激......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:52:50.857

我在下面放了一些代码，这些代码应该是您想要做的基本框架。但是我留下了一个未实现的重要功能，因为我认为您将能够做到，它将帮助您更好地理解这个过程。

```
% I assume that data_points is an M-by-2 array, where each row corresponds 
% to an (x,y) coordinate pair, and M is the number of data points.
data_points = ... ;

% I assume this array stores the intensities at each data point.
intensities = ... ;

% I assume that this stores the total number of gridded polar regions you want
% to find the max intensity in (i.e. 4*(number of cells) in your picture above).
total_num_bins = ... ;

% This will store the max intensities. For places that have no nearby 
% data points, the max intensity will remain zero.
max_intensities = zeros(total_num_bins);

% I assume these store the values of the center point.
x = ... ; y = ... ;

% The number of different data points.
num_data_points = length(intensities); % also equals size(data_points,1)

% Now, loop through the data points, decide which polar bin they fall in, and
% update the max intensity of that area if needed.
for ii = 1:num_data_points

    % Grab the current point coordinates.
    cur_x = data_points[ii,1];
    cur_y = data_points[ii,2];

    % Convert the current data point to polar coordinates,
    % keeping in mind that we are treating (x,y) like the center.
    cur_radius = sqrt( (cur_x - x)^2 + (cur_y - y)^2 );
    cur_angle = atan2(cur_y - y, cur_x - x)

    % You have to write this yourself, but it
    % will return an index for the bin that this
    % data point falls into, i.e. which of the 4 segments
    % of one of the radial cells it falls into.
    cur_bin = get_bin_number(cur_radius, cur_angle);

    % Check if this data point intensity is larger than
    % the current max value for its bin.
    if ( intensities(ii) >= max_intensities(cur_bin))
        max_intensities(cur_bin) = intensities(ii);
    end
end 
```

您现在必须创建将`get_bin_number()`数据点远离中心点的角度和半径作为其输入的函数。`1`它应该只返回和之间的索引`total_num_bins`，因为您会将最大强度保持在线性数组中。因此，例如，索引号 1 可能对应于右上象限中最近的径向单元的前 1/4 块，索引 2 可能对应于同一单元的下一个 1/4，逆时针移动，或其他像这样。您必须设计自己的约定来跟踪垃圾箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T03:05:51.877

一个较晚的答案，但我相信一个更简单的解决方案就是将数据从 (x,y) 坐标转换为 (r,theta)，`(r = sqrt(x.^2 + y.^2), theta = atan(y,x))`然后使用 (r,theta) 数据集上的 hist3 函数来获得径向直方图。

因此解决方案如下：

```
% I assume you have some M-by-2 matrix X that's in the form (x,y)
% Convert (x,y) to (r,theta)
xVect = X(:,1);
yVect = X(:,2);
X = [sqrt(xVect.^2 + yVect.^2), ...%formula for r
    atan(yVect,xVect)]; %formula for theta

% 5 is the number of wedges along 'r', your radial axis
% 12 is the number of wedges along 'theta', your theta 'axis'
dist = hist3(X,5,12); 
```

即使您已经解决了这个问题，我希望这可以帮助任何想要创建径向/角度直方图的人！

# objective-c - 只有 NSSavePanel 的 Cocoa 应用

> ID：10106836
> 
> 赞同：2
> 
> 时间：2012-04-11T13:25:20.550
> 
> 标签：objective-c, cocoa

我正在尝试创建一个显示 SavePanel 的 Cocoa 应用程序，并且在用户选择文件后，它会在标准输出上打印它。我是 Objective-C 和 Cocoo 的初学者。问题是它不需要键盘输入，只能用鼠标选择文件。

这是代码：

```
#import <Cocoa/Cocoa.h>
#include <stdio.h>

int main(int argc, char *argv[])
{
    NSSavePanel *sPanel = [NSSavePanel savePanel];
    int result = [sPanel runModal];
    if (result == NSOKButton) {
        NSString * filename = [sPanel filename];
        char * fileStr = [filename UTF8String];
        printf("%s\n", fileStr);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:11:59.563

AppKit/Cocoa 类需要初始化一个 NSApplication 对象以处理用户输入（除其他外）。将此行添加到 main 函数的顶部应该可以解决问题：

```
int main(int argc, char *argv[])
{
    [NSApplication sharedApplication]; // ** Add this **

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSSavePanel *sPanel = [NSSavePanel savePanel];
    int result = [sPanel runModal];
    if (result == NSOKButton) {
        NSString * filename = [sPanel filename];
        const char * fileStr = [filename UTF8String];
        printf("%s\n", fileStr);
    }
    [pool drain];
    return 0;
} 
```

有关这方面的更多信息，请参阅[NSApplication 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html)，特别是以下几点：

> 每个应用程序必须只有一个 NSApplication 实例（或 NSApplication 的子类）。你的程序的 main() 函数应该通过调用 sharedApplication 类方法来创建这个实例。
> NSApplication 执行从窗口服务器接收事件并将它们分发给适当的 NSResponder 对象的重要任务。NSApp 将事件转换为 NSEvent 对象，然后将 NSEvent 对象转发给受影响的 NSWindow 对象。

按照下面 bbum 和 danielpunkass 的评论，这不是您真正编写 Cocoa 应用程序的方式，虽然它确实使您的直接问题消失了，但它不是一个完整或完全正确的解决方案。要扩展 Daniel 的评论并让您轻松入门，请创建一个新的 Cocoa 应用程序项目。打开应用程序委托类（为您创建），并将您的代码放入`-applicationDidFinishLaunching:`方法中。正如其名称所暗示的那样，该方法在应用程序完成启动后调用，并且一切都已设置好，以便您可以正常使用 AppKit 类。随着您获得更多经验，您将更好地了解典型的 Cocoa 应用程序架构，并可以继续创建用户界面等。

# java - 在 Android 应用程序中使用系统 PIN 对话框

> ID：10106837
> 
> 赞同：24
> 
> 时间：2012-04-11T13:25:21.263
> 
> 标签：java, android

## 背景

我正在尝试编写一个如下所述的应用程序。

*   当用户启动应用程序时，它会检查用户是否在其设备上注册了 PIN。
*   如果用户已注册 PIN，应用程序必须显示“使用 PIN 继续”按钮。
*   当用户按下“继续使用 PIN”按钮时，系统标准 PIN 对话框必须出现。 ![在此处输入图像描述](../Images/304f7030fbb0a4237fa68ca9d088ead3.png)
*   用户输入他的 PIN 并按“继续”按钮。
*   系统必须检查输入的 PIN 是否正确并继续工作。

* * *

## 搜索

我进行了一些搜索，发现一些关于[stackoverflow](https://stackoverflow.com/)和其他互联网资源的文章说“***[没有办法在非 root 手机上开发新的自定义解锁机制。](https://stackoverflow.com/questions/7983143/where-can-i-find-examples-or-tutorials-about-creating-a-custom-android-lockscree)*** ”或“[***如果你能，我会感到惊讶，因为那样你很可能能够窃取 PIN 码，我认为没有人会想要这样。***](https://stackoverflow.com/questions/10086659/use-system-pin-in-android) ”。

我还观看了一些视频教程，例如[***教程：Android 内部 - 构建自定义 ROM，Pt。1 of 2***](http://www.youtube.com/watch?v=1_H4AlQaNa0)和[***教程：Android 内部 - 构建自定义 ROM，Pt。2 的 2***](http://www.youtube.com/watch?v=rFqELLB1Kk8)。

***已编辑***

我今天进行了一些搜索，发现了一个非常有趣的事情，我认为我在解决问题的路上是正确的，我想与你分享我的想法。所以在 android 源代码中我发现了一个有趣的文件***ChooseLockPassword.java*** ( *packages\apps\Settings\src\com\android\settings* ) 和***LockPatternUtils.java*** (*frameworks\base\core\java\com\android\internal\widget* ) 现在我对：

### 问题

**如何`LockPatternUtils`从我的代码中调用类函数**？或者为什么我在 Eclipse 中看不到该功能？

* * *

## 决定

所以我认为访问Android***系统PIN对话框***的唯一方法是root手机对系统文件进行一些更改并使用***系统PIN dialod***

* * *

## 问题

1.  有人可以为我提供有关在有根电话中访问系统 PIN 对话框的有用链接吗？
2.  我走对路了吗？我可以用这种方式解决我的问题吗？
3.  如果有人遇到这样的问题，请帮我解决。

任何解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T12:30:07.200

好的，我已经解决了这个问题，现在我想与您分享我的解决方案。

起初，正如我所说的，我有 android 资源，所以我对 android 资源进行了一些更改，以访问 PIN 和 Pattern 对话框。他们在这里：

在***~\AndroidSources\pakages\apps\Settings\AndroidManifest.xml***我更改了以下代码行

```
<activity android:name="ConfirmLockPattern"
          android:exported="true"> // This line was added by me.
</activity>

<activity android:name="ConfirmLockPassword"
          android:exported="true" // This line was added by me.
          android:them="@android:style/Them.NoTitleBar">
</activity>

<activity android:name="ChooseLockPattern"
          android:exported="true" // This line was added by me.
          android:label="@string/lockpattern_change_lock_pattern_label">
</activity> 
```

这种修改允许我从我自己的应用程序中调用“ ***ConfirmLockPattern*** ”、“ ***ConfirmLockPassword*** ”和“ ***ChooseLockPattern*** ”活动。在我编译 android 源代码并在我的模拟器上启动 system.img 之后。

在我的应用程序中，我编写了以下函数来调用“ ***ConfirmLockPattern*** ”或“ ***ChooseLockPattern*** ”活动：

```
/**
 * Show PIN/Password confirmation dialog.
 */
void ShowConfirmLockPINActivity() {
    CustomLog.i(TAG, "Show Confirm Lock PIN Activity");
    Intent intent = new Intent(Intent.ACTION_RUN);
    intent.setComponent(new ComponentName("com.android.settings",
        "com.android.settings.ConfirmLockPassword"));
    startActivityForResult(intent, mRequestCode);
} /* ShowConfirmLockPINActivity() */

/**
 * Show set PIN/Password dialog.
 */
void ShowSetLockPINActivity() {
    CustomLog.i(TAG, "Show Set Lock PIN Activity");
    Intent intent = new Intent(Intent.ACTION_RUN);
    intent.setComponent(new ComponentName("com.android.settings",
        "com.android.settings.ChooseLockPassword"));
    startActivityForResult(intent, mRequestCode);
} /* ShowSetLockPINActivity() */

/**
 * Show Pattern Confirmation dialog.
 */
void ShowSetLockPatternActivity() {
    CustomLog.i(TAG, "Show Set Lock Pattern Activity");
    Intent intent = new Intent(Intent.ACTION_RUN);
    intent.setComponent(new ComponentName("com.android.settings",
        "com.android.settings.ConfirmLockPattern"));
    startActivityForResult(intent, mRequestCode);
} /* ShowSetLockPatternActivity() */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:49:56.267

以下是关于您的问题的一些注意事项。

1.  在这种特殊情况下，深入研究 Android 的代码并不是一个好主意，因为验证 PIN 码是一个重要的安全点，它的机制必须被隐藏并得到很好的保护，以避免任何恶意意图。

2.  因此，您想要执行的操作（询问 PIN，然后根据真实 PIN 进行检查）被禁止，并且看起来像是入侵。因此，您不应尝试访问用户密码的存储。

3.  尝试通过一些启动标准 PIN 屏幕`Intent`并要求它为您完成所有工作会更正确。然而，一个简短的调查并没有给我这个方向的任何结果。也许，你会发现一些东西。

4.  修改ROM​​显然是死路一条——没有人会刷手机安装一个应用程序。需要 root 手机会更好一些，有些应用程序无法在非 root 手机上运行，​​但它仍然让我们回到第 2 点（入侵）。

5.  用户可以禁用 PIN 检查，并且[有些设备没有 SIM 卡](https://stackoverflow.com/questions/9128627/check-sim-pin-with-sdk-android)。

因此，根据所有提到的，我建议您为您的应用考虑不同的验证方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-19T12:03:44.230

由于 API 级别 21 `KeyguardManager.createConfirmDeviceCredentialIntent`，因此可以使用设备锁定销对当前用户进行身份验证。

请参阅[使用示例](https://github.com/googlesamples/android-ConfirmCredential)。

# maven - 通过 Maven Wagon WebDAV 提供程序将 Javadocs 部署到经过 NTLM 身份验证的服务器

> ID：10106838
> 
> 赞同：3
> 
> 时间：2012-04-11T13:25:22.830
> 
> 标签：maven, javadoc, webdav, ntlm, wagon

我正在尝试使用 Maven 将我的 Javadocs（已成功创建）部署到需要 NTLM 身份验证的 Sharepoint 服务器。我正在使用带有 WebDAV 提供程序的 Maven Wagon 插件来执行此操作。我正在使用 m2eclipse 设置运行配置以在特定配置文件中执行目标。

我基本上已经从我发现的关于这些工具的各种解决方案中拼凑出一个解决方案。听起来好像 Maven 目前可能根本不支持 NTLM，但其他​​页面建议标签可能允许这样做。我还看到了在分发管理中指定部署站点的解决方案，这与 Apache 的使用页面相反。无论如何，我遇到了很多问题。

首先，当我从运行配置菜单（在“发布”配置文件中执行“清理”和“包”）运行时，Wagon 插件，其中包含在“包”中执行“车：上传”目标' 阶段，执行被忽略。它创建项目 jar 和 Javadocs，并附加源，但 Wagon 插件不执行。

一旦单独创建了 Javadocs，我还尝试自行运行“wagon:upload”目标，但我遇到了这个错误（在调试中）：

```
[DEBUG] Configuring mojo org.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:upload
from plugin realm ClassRealm[plugin>org.codehaus.mojo:wagon-maven-plugin:1.0-bet
a-3, parent: sun.misc.Launcher$AppClassLoader@11b86e7]
[DEBUG] Configuring mojo 'org.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:upload
' with basic configurator -->
[DEBUG]   (f) followSymLink = false
[DEBUG]   (f) fromDir = C:\Documents and Settings\c40208\IBM\rationalsdp\CEC\cec
-diagnostics
[DEBUG]   (f) optimize = false
[DEBUG]   (f) project = MavenProject: com.mycompany.cec:cec-diagnostics:0.5.0-SNAPSH
OT @ C:\Documents and Settings\c40208\IBM\rationalsdp\CEC\cec-diagnostics\pom.xm
l
[DEBUG]   (f) serverId = serverId
[DEBUG]   (f) settings = org.apache.maven.execution.SettingsAdapter@11b86c7
[DEBUG]   (f) skip = false
[DEBUG]   (f) useDefaultExcludes = true
[DEBUG] -- end configuration --
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.687s
[INFO] Finished at: Fri Apr 13 08:54:34 EDT 2012
[INFO] Final Memory: 5M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:u
pload (default-cli) on project cec-diagnostics: The parameters 'url' for goal or
g.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:upload are missing or invalid -> [
Help 1]
    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal o
rg.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:upload (default-cli) on project c
ec-diagnostics: The parameters 'url' for goal org.codehaus.mojo:wagon-maven-plug
in:1.0-beta-3:upload are missing or invalid
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:221)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.PluginParameterException: The parameters 'url
' for goal org.codehaus.mojo:wagon-maven-plugin:1.0-beta-3:upload are missing or
 invalid
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.populatePl
uginFields(DefaultMavenPluginManager.java:576)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfigu
redMojo(DefaultMavenPluginManager.java:529)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:92)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginParamete
rException 
```

我知道这是一个很重要的问题，但是有没有人有任何建议或建议可能对我有所帮助？

这是我的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.mycompany.cec</groupId>
<artifactId>cec-diagnostics</artifactId>
<version>0.5.0-SNAPSHOT</version>
<packaging>jar</packaging>
<name>CEC Diagnostics Jar</name>
<description><![CDATA[Assertion capture and analysis library for Java]]]></description>
<inceptionYear>2011</inceptionYear>
<scm>
    <developerConnection>scm:svn:(FQDN)/(path)</developerConnection>
    <url>(FQDN)/(path)</url>
</scm>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <spring.framework.version>3.0.5.RELEASE</spring.framework.version>
    <jar.plugin.version>2.4</jar.plugin.version>
    <bundle.plugin.version>2.3.6</bundle.plugin.version>
    <surefire.plugin.version>2.12</surefire.plugin.version>
    <testng.version>6.3.1</testng.version>
    <javadoc.plugin.version>2.8.1</javadoc.plugin.version>
    <source.plugin.version>2.1.2</source.plugin.version>
    <wagon.plugin.version>1.0-beta-3</wagon.plugin.version>
    <project.info.reports.plugin.version>2.4</project.info.reports.plugin.version>
    <site.plugin.version>3.0</site.plugin.version>
    <pdf.plugin.version>1.2</pdf.plugin.version>
    <confluence.plugin.version>3.1.3</confluence.plugin.version>
    <confluence.root>http://confluence.sys.mycompany.com/confluence</confluence.root>
    <confluence.space>SEI</confluence.space>
</properties>
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.framework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>${testng.version}</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>${jar.plugin.version}</version>
            <configuration>
                <archive>
                    <index>true</index>
                    <manifest>
                        <addClasspath>true</addClasspath>
                    </manifest>
                    <manifestEntries>
                        <Specification-Title>${project.name}</Specification-Title>
                        <Specification-Version>${project.version}</Specification-Version>
                        <Specification-Vendor>${project.organization.name}</Specification-Vendor>
                        <Implementation-Title>${project.name}</Implementation-Title>
                        <Implementation-Version>${project.version}</Implementation-Version>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>${bundle.plugin.version}</version>
            <executions>
                <execution>
                    <id>bundle-manifest</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>manifest</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <extensions>
        <extension>
            <groupId>org.apache.maven.wagon</groupId>
            <artifactId>wagon-webdav-jackrabbit</artifactId>
            <version>2.2</version>
        </extension>
    </extensions>
</build>
<profiles>
    <profile>
        <id>release</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>${javadoc.plugin.version}</version>
                    <executions>
                        <execution>
                            <id>attach-javadocs</id>
                            <goals>
                                <goal>jar</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <additionalJOption>-J-Dhttp.auth.ntlm.domain=dav:https//(domain)</additionalJOption>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-source-plugin</artifactId>
                    <version>${source.plugin.version}</version>
                    <executions>
                        <execution>
                            <id>attach-sources</id>
                            <goals>
                                <goal>jar-no-fork</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>wagon-maven-plugin</artifactId>
                    <version>${wagon.plugin.version}</version>
                    <executions>
                        <execution>
                            <id>upload-javadocs</id>
                            <phase>package</phase>
                            <goals>
                                <goal>upload</goal>
                            </goals>
                            <configuration>
                                <serverId>(serverId)</serverId>
                                <fromDir>${project.build.directory}/apidocs</fromDir>
                                <includes>*</includes>
                                <excludes>pom.xml</excludes>
                                <url>dav:https://(domain)/(path)</url>
                                <toDir>(path)</toDir>
                                <optimize>true</optimize>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-site-plugin</artifactId>
                    <version>${site.plugin.version}</version>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>
<reporting>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-project-info-reports-plugin</artifactId>
            <version>${project.info.reports.plugin.version}</version>
            <reportSets>
                <reportSet>
                    <reports>
                        <report>summary</report>
                        <report>project-team</report>
                        <report>plugins</report>
                        <report>dependencies</report>
                        <report>scm</report>
                        <report>cim</report>
                        <report>issue-tracking</report>
                    </reports>
                </reportSet>
            </reportSets>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>${javadoc.plugin.version}</version>
            <configuration>
                <show>public</show>
            </configuration>
        </plugin>
    </plugins>
</reporting>
<repositories>
    (repositories)
</repositories>
<distributionManagement>
    (repositories)
</distributionManagement>
<developers>
    (developers)
</developers>
</project> 
```

尽管我不得不审查与公司相关的网站，但希望它能够理解发生了什么。此外，我在 settings.xml 中添加了代理和服务器配置，如下所示：

```
<proxy>
    <active>true</active>
    <protocol>https</protocol>
    <host>(host address)</host>
    <port>9090</port>
    <username>(username)</username>
    <password>(password)</password>
    <nonProxyHosts>*.mycompany.com</nonProxyHosts>
</proxy> 
```

服务器：

```
<server>
    <id>(the same serverId from the POM)</id>
    <username>(username)</username>
    <password>(password)</password>
</server> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:12:18.877

您的 URL 应如下所示`<url>dav:http://...</url>`。

首先尝试 beta-4，然后按照 -Dwagon.url= 之类的命令进行设置。如果它仍然不起作用，您必须在 Codehaus 的 JIRA 提交票证。[源代码](http://mojo.codehaus.org/wagon-maven-plugin/xref/org/codehaus/mojo/wagon/AbstractSingleWagonMojo.html)看起来不错。这是一个注入问题。您可以尝试另一个 Maven 版本吗？

# css - Twitter Bootstrap btn-primary 大小 IE8

> ID：10106840
> 
> 赞同：4
> 
> 时间：2012-04-11T13:25:28.397
> 
> 标签：css, twitter-bootstrap

有没有其他人注意到 Twitter Bootstrap 在 IE8 及更低版本中的奇怪行为？我有两个按钮，如下：

```
<input type="submit" class="btn btn-primary btn-large"/>
<input type="reset" class="btn btn-large"/> 
```

`btn-primary`按钮显示得非常小，但`btn btn-large`正如预期的那样，带有 just 的按钮很大。

有任何想法吗？

谢谢，克里斯

编辑：截图： ![在此处输入图像描述](../Images/935f6c8c452b8f55a57db9aeb9933c04.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:08:48.410

**从我的评论**

> 通常，您可能会发现与按钮有关的任何问题都是由其他样式表引起的，您是否包含除了 bootstrap css 之外的任何内容？

您要做的是在元素上使用 CHROME“右键单击” `inspect`，然后查看应用于该元素的样式。

通常情况下，是其他东西被继承或引起冲突。IE 是一头善变的野兽，我认为我们大多数人在涉及 CSS/HTML5 时宁愿没有它；）

# python - 地图（）的问题

> ID：10106842
> 
> 赞同：5
> 
> 时间：2012-04-11T13:25:31.600
> 
> 标签：python

我正在尝试使用该`map`函数转换列表的值，但我得到了一个奇怪的结果。

```
s = input("input some numbers: ")
i = map(int, s.split())
print(i) 
```

给出：

```
input some numbers: 4 58 6
<map object at 0x00000000031AE7B8> 
```

为什么它不返回 ['4','58','6']？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T13:28:25.790

您正在使用返回生成器而不是列表的 python 3。

`list(x)`在将变量分配给地图生成器后调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:28:49.017

您需要像在 python 3 中那样`list(i)`返回一个生成器而不是一个列表。此外，正如 Lattyware 在第一个答案的评论中指出的那样，您最好这样做：`['4','58','6']``map`

```
i = [int(x) for x in s.split()] 
```

# jquery - 删除 li 标签并将其重新绑定到 ul 不起作用

> ID：10106845
> 
> 赞同：0
> 
> 时间：2012-04-11T13:25:37.303
> 
> 标签：jquery

我正在尝试通过删除它并重新绑定它来重新绑定 li 标签。ul 标签是动态生成的。我删除 li 标签的代码是这样的......

```
$("#ulActivity li").remove(); 
```

这条线完美地删除了所有 li 标签，但附加新的 li 集不起作用......

```
$.each(objTaskActivityList, function(i,v){                    
     $("#ulActivity ul").append('<li><a onclick="javascript:openfile(\''+v.DOCName+'\')">'+v.DOCName+'</a></li>');
}); 
```

我在哪里做错了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:28:27.453

我认为你应该这样做

```
 $.each(objTaskActivityList, function(i,v){                    
       $("#ulActivity").append('<li><a onclick="javascript:openfile(\''+v.DOCName+'\')">'+v.DOCName+'</a></li>');
   }); 
```

$("#ulActivity ul") 的目标`<ul>`是一个 id=ulActivity 元素的后代，我认为这是你的`<ul>`

在任何情况下，您都应该尝试使用不同于“删除”和“重新附加”的方法来处理此类情况，但具体如何处理取决于您的需求

# android - android：如何实现硬件加速的图像橡皮擦？

> ID：10106851
> 
> 赞同：2
> 
> 时间：2012-04-11T13:26:01.167
> 
> 标签：android, hardware-acceleration

我在 imageview 背景上方绘制了一个位图白板应用程序。当我在上面画上清漆

```
mo_ink.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

或任何 PorterDuff 方法，绘制时渲染有一个可怕的黑色边框。禁用硬件加速会使应用程序无法使用。

如何在没有硬件渲染错误的情况下实现背景橡皮擦？

编辑：我有一点错误。PorterduffMOde CLEAR 绘制一条黑色路径，完成后呈现清晰。我尝试过的任何其他 Porterduff 方法都会在路径周围呈现黑色边界框。理想情况下，我希望绘制的线立即透明，将背景位图绘制到路径上，但应用合适的着色器会导致黑色边框。有什么解决办法吗？我不知道 Rasterizer 做了什么，或者它是否有帮助！

![在此处输入图像描述](../Images/1a5584a2a8028c1bc9523f82db5000a4.png)

# linux - 使用 Imagick 裁剪两个透明的 png 图像会产生不同的结果

> ID：10106856
> 
> 赞同：1
> 
> 时间：2012-04-11T13:26:09.707
> 
> 标签：linux, command-line, imagick

裁剪两个 png 文件时我得到不同的结果。

想象版本使用`convert -version`：

*   版本：ImageMagick 6.6.5-10 2010-11-26 Q16
*   版权所有：版权所有 (C) 1999-2010 ImageMagick Studio LLC
*   特点：OpenMP

这两个文件使用`identify`：

*   `works.png PNG 1218x610 1218x610+0+0 8-bit DirectClass 755KB 0.000u 0:00.000`
*   `doesntwork.png PNG 70x70 70x70+0+0 8-bit DirectClass 1.64KB 0.000u 0:00.000`

我正在使用这个命令：

```
convert <original>.png -crop 50x50+0+0 <target>.png 
```

问题是它`works.png`是 100% 正确的，`doesntwork.png`而是一个黑色方块。

两个原始图像似乎相同 - 并且在`windows 7`.

图片：

`works.png`：

![在此处输入图像描述](../Images/b1b8b1167a170f0fea77b7733fea0b48.png)

`doesntwork.png`：

![在此处输入图像描述](../Images/fe6228efb2fad8f3bbbc1aab9f5d3401.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:51:57.410

在发布的两张图片的情况下，这似乎是工具执行他们被告知而不是预期的情况。

在上面的鲨鱼图像上使用`-crop 50x50+0+0`会得到一个完全透明的 50 x 50 图像，因为鲨鱼图像左上角 ( `+0+0`) 的 50 x 50 像素块是完全透明的。使用`-crop 50x200+0+0`也捕获了鲨鱼尾巴的尖端。 `-crop 50x50+950+250`吸引眼球。

这一切都符合你的结果吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T02:52:16.213

适用于我使用`convert -version`ImageMagick 6.4.0 04/17/08 Q16（这是 下的“当前”版本`cygwin`），通过 Windows XP SP3 上的 cygwin 运行。

这可能是您特定版本的 ImageMagick 中的错误。鲨鱼`works.png`是带有 alpha 的全彩色图像（4 个 8 位通道）。这`doesntwork.png`是一个具有 8 位 alpha 的 1 位黑白图像，并且通过改变 alpha 来完成着色。在我看来，这似乎是一种相当罕见的格式，所以我可以想象一个错误会溜进转换代码。

您可以先尝试将图像转换为真彩色。

# wpf - TreeView 上的 WPF 样式触发器？

> ID：10106858
> 
> 赞同：1
> 
> 时间：2012-04-11T13:26:13.233
> 
> 标签：wpf, c#-4.0, .net-4.0, treeview, treeviewitem

我在我的 xaml 中定义了以下树视图：

```
 <TreeView Name="PST_TreeView"
              Grid.Row="0"
              Grid.Column="0"
              Width="Auto"
              Height="Auto"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              ItemsSource="{Binding SitesCollection}"
              ItemTemplate="{StaticResource SitesTemplate}"
              Style="{StaticResource TreeViewStyleBasic}" /> 
```

使用针对我的资源文件的资源绑定：

```
 <Style x:Key="TreeViewStyleBasic" TargetType="TreeView">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="{DynamicResource TitleBarButtons_BorderBrush}" />
    <Setter Property="BorderThickness" Value="0 0 2 0" />
</Style>

<Style x:Key="TreeViewItemStyle_CatNodes" TargetType="{x:Type TextBlock}">
    <Setter Property="Foreground" Value="Snow" />
    <Setter Property="FontFamily" Value="Calibri" />
    <Setter Property="FontSize" Value="16" />
    <Setter Property="FontWeight" Value="Normal" />
    <Setter Property="TextAlignment" Value="Left" />
</Style>

<Style x:Key="TreeViewItemStyle_ChildNodes" TargetType="{x:Type TextBlock}">
    <Setter Property="Foreground" Value="Snow" />
    <Setter Property="FontFamily" Value="Calibri" />
    <Setter Property="FontSize" Value="14" />
    <Setter Property="FontWeight" Value="Normal" />
    <Setter Property="FontStyle" Value="Italic" />
    <Setter Property="TextAlignment" Value="Left" />
</Style>

<DataTemplate x:Key="VolumeInfoDataTemplate">
    <StackPanel Orientation="Horizontal">
        <TextBlock Width="{TemplateBinding Width}"
                   Height="{TemplateBinding Height}"
                   Margin="5"
                   Style="{DynamicResource TreeViewItemStyle_ChildNodes}"
                   Text="{Binding VolumeName}" />
    </StackPanel>
</DataTemplate>

<HierarchicalDataTemplate x:Key="SitesTemplate"
                          ItemsSource="{Binding VolumesList}"
                          ItemTemplate="{StaticResource VolumeInfoDataTemplate}">
    <StackPanel Orientation="Horizontal">
        <TextBlock Width="{TemplateBinding Width}"
                   Height="{TemplateBinding Height}"
                   Margin="5"
                   Style="{DynamicResource TreeViewItemStyle_CatNodes}"
                   Text="{Binding SiteName}" />
    </StackPanel>
</HierarchicalDataTemplate> 
```

xaml 和资源查找上面的工作查找和预期的那样。

我如何使用触发器来扩展我的样式定义，例如处理“IsSelected”事件，以便选定的树节点具有石板灰色边框和浅灰色背景？

研究：[我想要的东西。](https://stackoverflow.com/questions/5047576/wpf-treeview-how-to-style-selected-items-with-rounded-corners-like-in-explorer)

***更新：*** TreeView 上没有 IsSelected 属性，但是 TreeViewItem 确实定义了一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:36:25.893

试试这个：

```
 <DataTemplate x:Key="VolumeInfoDataTemplate"> 
        <StackPanel Orientation="Horizontal"> 
            <TextBlock Width="{TemplateBinding Width}" 
                       Height="{TemplateBinding Height}" 
                       Margin="5" 
                       Style="{DynamicResource TreeViewItemStyle_ChildNodes}" 
                       Text="{Binding VolumeName}"
                       Name="Tb" /> 
        </StackPanel> 
        <DataTemplate.Triggers>
             <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource    AncestorType=TreeViewItem}}" Value="True">
                  <Setter TargetName="Tb" Property="Background" Value="LightGray"/>
             </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate> 
```

# themes - Sencha Touch 2 标准主题？

> ID：10106860
> 
> 赞同：5
> 
> 时间：2012-04-11T13:26:15.183
> 
> 标签：themes, sencha-touch-2

我注意到在 ST2 的最终版本中，KitchenSink 中缺少主题代码。产品是否有任何默认主题？另外，有没有可用的开源主题？我想为演示提供一些方便的主题，以便我可以轻松地在它们之间切换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T15:21:01.837

是的，如果你打开 senchatouch2/resources/css，你有默认的 sencha-touch.css，然后你有 apple.css、android.css、bb6.css(blackberry)。

```
 <link rel="stylesheet" href="senchatouch2/resources/css/apple.css" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:25:53.007

我认为以下网址会帮助某人

[http://developerextensions.com/index.php/sencha-touch-2-themes-builder](http://developerextensions.com/index.php/sencha-touch-2-themes-builder)

* * *

---将以下链接添加到您的 sencha-touch-2 应用程序的 html 文件中。

---DEShowThemeBuilder(true); //显示主题生成器的函数

---DEShowThemeBuilder(假); //隐藏主题生成器的功能

* * *

```
<script type="text/javascript" src="http://developerextensions.com/components/com_extensiondemo/views/extensiondemo/tmpl/sencha2/ux/themeBuilder/themeBuilder.js"></script> 
```

# sql-server - 让 sproc 的每次运行处理它的行份额

> ID：10106861
> 
> 赞同：1
> 
> 时间：2012-04-11T13:26:17.583
> 
> 标签：sql-server, tsql, transactions, locking

我正在维护一个存储过程，开发人员已经实现了他自己的锁定机制，但对我来说它似乎有缺陷：

```
CREATE PROCEDURE Sproc 1
AS

Update X
set flag = lockedforprocessing
where flag = unprocessed

-- Some processing occurs here with enough time to 
-- 1\. table X gets inserted new rows with a flag of unprocessed
-- 2\. start another instance of this Sproc 1 that executes the above update

Select from X
where flag = lockedforprocessing

-- Now the above statement reads rows that it hadn't put a lock on to start with. 
```

我知道我可以将它 sproc 包装在一个隔离级别为 SERIALIZABLE 的事务中，但我想避免这种情况。

目标是

1.  该 sproc 的多个实例可以同时运行并处理它们自己的“共享”记录以实现最大并发性。
2.  sproc 的执行不应等待仍在执行的先前运行

我认为 REPEATABLE READ 在这里没有帮助，因为它不会阻止读取值为“未处理”的新记录（如果我错了，请纠正我）。

我刚刚发现了 sp_getlock 存储过程，它可以解决错误，但序列化精确，这不是我的目标。

我看到的一个解决方案是让 proc 的每次运行都生成自己唯一的 GUID 并将其分配给标志，但不知何故我认为我正在模拟 SQL Server 已经可以开箱即用的解决方案。

让 sproc 的每次运行处理它的“共享”行的唯一方法是让它在 SERIALIZABLE 中？

问候，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:51:54.480

假设 X 中有一个 ID 字段，更新 X 的临时表可以提供帮助：

```
CREATE PROCEDURE Sproc 1
AS
-- Temporary table listing all accessed Xs
   declare @flagged table (ID int primary key)
-- Lock and retrieve locked records
   Update X
      set flag = lockedforprocessing
   output Inserted.ID into @flagged
    where flag = unprocessed

-- Processing
   Select from X inner join @flagged f on x.ID = f.ID

-- Clean-up
   update X
      set flag = processed
     from x inner join @flagged f on x.ID = f.ID 
```

# notepad++ - 如何在 Notepad++ 中编译所有打开的文件（或从 Notepad++ Explorer 中选择的文件）

> ID：10106863
> 
> 赞同：1
> 
> 时间：2012-04-11T13:26:26.360
> 
> 标签：notepad++

我已经在 Notepad++ 中设置了编译（主要是 SQL Server），它工作正常。但我希望能够一次编译多个文件。我可能一次编辑 3-10 个文件，然后喜欢点击一个按钮并一次编译它们。

我尝试了一个宏录制 Control-Tab（切换窗口）然后 Control-F6（执行上一个），但切换窗口时宏似乎挂起。

我已经通过 NppExec 中的控制台帮助选项，并认为 $(#n) [第 n 个打开窗口中的文件名] 有承诺，但有两个基本问题：没有 if 命令和没有分支/循环命令在 NppExec 控制台中。

我还尝试使用 Npp Explorer 选择各种文件并在它们上运行 NppExec 脚本的能力。在特制的 exec 脚本中，该行

```
//Explorer: NppExec.dll EXP_FULL_PATH[0] 
```

传递选择的*第一个*文件，而

```
//Explorer: NppExec.dll EXP_FULL_PATH[0] EXP_FULL_PATH[1] 
```

我会想象通过第一个和第二个。但我看不到如何传递在 Npp Explorer 中选择的所有文件。如果可以的话，我可以让 NppExec 脚本调用 DOS 命令或 powershell 脚本来编译所有传递的文件。

我很感激任何建议。

# linux - 关于 Linux Shell 'While' 命令

> ID：10106869
> 
> 赞同：0
> 
> 时间：2012-04-11T13:26:45.540
> 
> 标签：linux, shell

代码：

```
path=$PATH:
while [ -n $path ]
do 
ls -ld ${path%%:*}
path=${path#*:}
done 
```

我想获取路径的每个部分。运行脚本时，它无法退出while进程。请告诉我为什么。'while [ -n $path ]' 有问题吗？</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:30:17.157

最终剪切永远不会产生空字符串。如果你有 a:b:c，你会先去掉 a，然后再去掉 b，但永远不要去掉 c。即，这个：

```
${path#*:} 
```

将始终为路径的最后一段生成非空字符串。由于 -n 检查查找空字符串，因此您的循环将永远运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:32:19.997

如果`$path`里面没有冒号，`${path#*:}`将返回`$path`. 所以你有一个无限循环。

```
p="foo"
$ echo ${p#*:}
foo
$ p="foo:bar"
$ echo ${p#*:}
bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:46:51.043

您的代码中有一些错误。这应该可以解决问题：

```
path=$PATH
while [[ $path != '' ]]; do
    # you can replace echo to whatever you need, like ls -ld
    echo ${path%%:*}
    if echo $path | grep ':' >/dev/null; then 
        path=${path#*:}
    else path=''
    fi
done 
```

您的`path`, after 被初始化，将始终检查`True`测试`[ -n path ]`。这是您永远无法摆脱困境的主要原因`while`。

# session - 安全 SessionFixationProtectionStrategy 干扰会话范围的 bean

> ID：10106870
> 
> 赞同：1
> 
> 时间：2012-04-11T13:26:45.767
> 
> 标签：session, spring-mvc, spring-security, session-fixation

我正在使用 Spring 3.1.1.Release，Security 3.1.0.Release。

我已将登录/注销添加到我的 Web 应用程序，但是会话范围的 bean 无法正常运行。该 bean 用于连接到名为 CMSConnector 的 CMS。

为了对用户进行身份验证，我实现了一个 AuthenticationProvider，在 authenticate() 调用中，我获得了会话范围的 CMSConnector 并调用 CMSConnector.login()。如果 CMS 登录失败，则登录失败。

问题 -

如果登录成功，则在成功登录后立即调用@predestroy logout()。然后我发现它是 SessionFixationProtectionStrategy 正在调用无效的前一个会话并为其分配一个新会话。

```
session.invalidate();
session = request.getSession(true); // we now have a new session 
```

invalidate() 在会话范围的 bean 上调用 @predestroy 方法。

所以我暂时删除了@predestroy 注释，使连接没有关闭。（非常糟糕的做法。）

解决问题的方法是什么？

我试图创建一个 @PostConstruct 并将登录过程放在那里，但是当 request.getSession(true) 被调用时，@PostConstruct 没有被调用。

谢谢！

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:23:36.327

我认为它不是 SessionFixationProtectionStrategy 而是 ConcurrentSessionControlStrategy。

为此代码[段设置 max-sessions="-1"](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-concurrent-sessions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:05:26.657

我没有解决我最初的问题，但我实现了一个解决方法 - 在会话过期对象中过期会话，而不是附加@predestroy。

# c# - WPF 滑动窗口

> ID：10106874
> 
> 赞同：0
> 
> 时间：2012-04-11T13:27:15.533
> 
> 标签：c#, wpf, window, sliding

有谁知道 WPF 中“滑动窗口”的正确定义？我想到的就像 Visual Studio 中的“Pending Changes”或“Call Stack”窗口——单击它并向上滑动，然后将鼠标移开并再次向下滑动。

我很高兴花一些时间研究如何做到这一点，我只是不知道从哪里开始，因为我不确定这个功能到底被称为什么。

任何意见表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:30:25.567

它主要被称为窗口的“自动隐藏”功能。

CodeProject 上有一个很好的例子：[WPF Docking Library](http://www.codeproject.com/Articles/18812/WPF-Docking-Library)
也可以看看[AvalonDock](http://avalondock.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:31:06.423

你说的是这个阿瓦隆码头吗？

如果是查看图片中的圆圈区域，此链接将对您有所帮助 [http://avalondock.codeplex.com](http://avalondock.codeplex.com)

![看圈出来的区域](../Images/be463c400ab203ba3d68387a2deb0954.png)

# android - SD 卡和配置设置

> ID：10106877
> 
> 赞同：3
> 
> 时间：2012-04-11T13:27:32.210
> 
> 标签：android, sd-card, permission-denied

哦，亲爱的，在我头上没有头发之前请帮忙！

首先，这是我的代码：

```
private void copyDatabase() {
    if(!Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){ 
        Toast.makeText(this, "External SD card not mounted", Toast.LENGTH_LONG).show(); 
    } 
    //Toast Message Always appears
    try {
        InputStream in = getAssets().open("Asset_Directory");

        File outFile = new File(Environment.getExternalStorageDirectory() + File.separator + "Asset_Directory");
        outFile.createNewFile();
        OutputStream out = new FileOutputStream(outFile);

        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }

        out.close();
        in.close();
        Log.i("AssetCaptureActivity","Database has been transferred");
    } catch (IOException e) {
        Log.i("AssetCaptureActivity","Could not open the file");
    }
}` 
```

如您所见：我将一个数据库文件复制到我的 Assets 文件夹中。现在我想将它复制到虚拟 sd 卡，以便我可以编辑数据库。我在清单中添加了 WRITE 权限。我读到我需要更改我的 [运行配置] 设置中的某些内容 - 但是什么？

我不断收到 Permission Denied，它说我的 sd 卡没有安装。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:41:45.297

您可以使用以下方法来确定外部存储是否可用

```
/**
 * @return <ul>
 *         <li><b>true: </b>If external storage is available</li>
 *         <li><b>false: </b>If external storage is not available</li>
 *         </ul>
 */
public static boolean isExternalStorageAvailable() {

    boolean isAvailable = false;
    try {
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)
                || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can read the media
            isAvailable = true;
        } else {
            // Something else is wrong. It may be one of many other states,
            // but all we need
            // to know is we can not read
            isAvailable = false;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return isAvailable;
}

/**
 * @return <ul>
 *         <li><b>true: </b>If external storage is writable</li>
 *         <li><b>false: </b>If external storage is not writable</li>
 *         </ul>
 */
public static boolean isExternalStorageWritable() {

    boolean isWriteable = false;
    try {
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can write the media
            isWriteable = true;
        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media but we can't write
            isWriteable = false;
        } else {
            // Something else is wrong. It may be one of many other
            // states, but all we need
            // to know is we can neither read nor write
            isWriteable = false;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return isWriteable;
} 
```

在 Android Manifest 中添加以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

还要检查您是否为模拟器启用了 sd-card：

转到`'Android Virtual Device Manager'(AVD)`并单击您的模拟器，然后按`'Edit'`按钮。在`'Hardware'`部分中，检查您是否添加了`'SD card support = yes'`

# javascript - 为什么everyauth 会因“未定义不是函数”而崩溃？

> ID：10106880
> 
> 赞同：0
> 
> 时间：2012-04-11T13:27:38.513
> 
> 标签：javascript, node.js, twitter, everyauth

我的代码如下

```
var express = require('express'),
    everyauth = require('everyauth'),
  util = require('util'),
  Promise = everyauth.Promise,
  users = require('./users');

everyauth.twitter
  .consumerKey('')
  .consumerSecret('')
  .findOrCreateUser(function(session, accessToken, accessTokenSecret, twitterUserData) {
    console.log('pre promise');
    var promise = new Promise();
   users.findOrCreateByTwitterData(twitterUserData, promise);
    return promise;
  })
  .redirectPath('/'); 
```

它打印'pre promise'然后崩溃如下

```
pre promise

/.../node_modules/everyauth/lib/modules/everymodule.js:348
  throw err;
        ^
TypeError: undefined is not a function
    at Object._findOrCreateUser ( .../test.js:12:19)
    at Object.exec ( .../node_modules/everyauth/lib/step.js:47:21)
    at  .../node_modules/everyauth/lib/stepSequence.js:26:38
    at [object Object].fulfill ( .../node_modules/everyauth/lib/promise.js:42:25)
    at  .../node_modules/everyauth/lib/stepSequence.js:29:23
    at [object Object].fulfill ( .../node_modules/everyauth/lib/promise.js:42:25)
    at  .../node_modules/everyauth/lib/modules/twitter.js:16:15
    at passBackControl ( .../node_modules/everyauth/node_modules/oauth/lib/oauth.js:359:11)
    at IncomingMessage.<anonymous> ( .../node_modules/everyauth/node_modules/oauth/lib/oauth.js:378:9)
    at IncomingMessage.emit (events.js:88:20) 
```

用户看起来像：

```
var cradle = require('cradle');
var c = new cradle.Connection('...', 80, {
    auth:{username:'admin', password:'...'}
});
var users = c.database('users');

module.exports.findOrCreateByTwitterData = function(twitterUserData, promise) {
    console.log('finding');
    users.view('docs/twitterId', {key:twitterUserData.id_str}, function (err, doc) {
        if (err) {
            console.log('twitter error');
            return;
        }
        if (doc) {
            promise.fulfill(doc);
        }
        else {
            var doc = {

            };
        }
        c.database('users').save(doc, function (err, res) {
            if (err) {
                console.log('error with users');
                return;
            }
            promise.fulfill(doc);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:26:48.997

我对everyauth 0.2.32 有同样的问题。看起来everyauth.Promise 没有被导出，当您尝试实例化“未定义”类时应用程序崩溃

您可以检查是否 (Promise == 'undefined')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:00:31.960

在everyauth 的最新版本中，您应该使用以下语法：

```
.findOrCreateUser(function(session, accessToken, accessTokenSecret, twitterUserData) {
    var promise = this.Promise();
    users.findOrCreateByTwitterData(twitterUserData, promise);
    return promise;
}) 
```

# ruby-on-rails - 基本模型，了解类的基础知识（Ruby on Rails）

> ID：10106887
> 
> 赞同：1
> 
> 时间：2012-04-11T13:27:58.357
> 
> 标签：ruby-on-rails, ruby, class, model

我知道将尽可能多的代码重构到模型中是最佳实践，但是我对 Rails 和整个编程都比较陌生。似乎给我带来一点麻烦的概念之一是模型的性质，以及对方法和变量的范围或可用性的理解。

首先，使用模型中编写的典型方法，可以调用您的方法的限制（范围）是什么？.self 方面如何工作？哪些控制器/视图可以访问模型中定义的方法？

我知道这些是相当基本的原则，但我相信我对此的“假设”给我带来了各种各样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T16:50:51.303

在模型-视图-控制器 ( **MVC** ) 中：

*   模型保存您的数据以及**与**您的数据密切相关的任何功能（低级逻辑）
*   **控制器**保存您的业务逻辑（高级应用程序逻辑）
*   **视图**包含您的表示层（用户界面）

视图可以访问任何公共模型方法。（注意：所有 ruby​​ 方法默认都是公共的。）当然，模型对象必须首先在适当的控制器方法中实例化，并且必须是实例变量（ie `@person`）而不是控制器中的局部变量（ie `person`）。

控制器还可以访问任何公共模型方法。

受保护的方法限制对类内部或其任何子级的访问。私有方法仅限制对类内的访问。

在我看来，类方法，即`def Person.some_method ...`，在任何地方都是可见的，无论它们是否定义为公共、受保护或私有，尽管这是违反直觉的。

* * *

关于你关于 self 的问题......你可以使用 self 从该模型内部对模型自己的方法的所有调用，你不会出错。

例如对于具有 first_name 和 last_name 列的 Person 模型：

```
class Person < ActiveRecord::Base
  def full_name
    "#{self.first_name} #{self.last_name}"
  end

  def parse_name full
    self.first_name, self.last_name = full.split
  end
end 
```

然而，这太过分了。您实际上不需要使用 self 来检索 ActiveRecord 中的属性，仅用于设置属性，因此以下是可以的：

```
class Person < ActiveRecord::Base
  def full_name
    "#{first_name} #{last_name}"
  end

  def parse_name full
    self.first_name, self.last_name = full.split
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T14:22:04.410

简而言之，您可以使用什么来访问模型并没有真正的限制。从技术上讲，您可以从视图和控制器中的模型或其他模型中调用方法。

这是我的看法：

模型 = 您的应用程序的逻辑
视图 = 模型的前端，绑定您希望用户（或服务）看到的部分
控制器 = 视图和模型的胶水，调用模型数据并将其传递给视图

你应该避免直接从你的视图中调用你的模型。如果您在控制器中对一个对象执行超过 1 或 2 个操作，您可能应该将其移动到模型方法中。

从这里开始，我建议你拿起一本书来了解类的作用、实例方法、类方法等。我推荐 Pragmatic Programmers 的“Learn to Program”。 [http://pragprog.com/book/ltp2/learn-to-program](http://pragprog.com/book/ltp2/learn-to-program)

从那里了解 MVC 是什么（那里有很多信息），这将有助于您理解模型、视图、控制器以及它们之间的关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T14:22:49.883

根据您的问题，您似乎需要阅读面向对象编程和 MVC 模式。当然，这些并不是 Rails 独有的。

# php - php文件上传失败

> ID：10106891
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:05.630
> 
> 标签：php, file-upload

这个脚本有什么问题，它跳转到`else`语句？

```
if(@move_uploaded_file($_FILES['complaint_file']['temp_name'], "../../stg/comp/".time().".".$exten))
        {
            $filename = time().".".$exten;
            $insertSQL = sprintf("UPDATE complaints SET complaint_status='CLOSED', complaint_solved_date=NOW(), complaint_remark=%s complaint_filename=%s WHERE complaint_number=%s",
                   GetSQLValueString($_POST['complaint_remark'], "text"),
                   GetSQLValueString($_POST['confirm_close_complaint'], "text"),
                   GetSQLValueString($filename, "text"));
            $Result1 = mysql_query($insertSQL, $dacreint) or die(mysql_error());  
            header('Location: complaint-register.php?ComplaintClose=Successful');
            exit();
        }
        else {
            header("Location: complaint-register.php?FileUploadError=1");
            exit();
        } 
```

我的上传文件夹有`777`权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:50:59.193

在您的 if 语句中，您有`$_FILES['complaint_file']['temp_name']`. 这应该是`$_FILES['complaint_file']['tmp_name']`（'tmp_name'，而不是 'temp_name'）。

# facebook-graph-api - Facebook Graph API - 检索属于特定列表的朋友

> ID：10106892
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:07.223
> 
> 标签：facebook-graph-api

我很确定它应该可以工作，但无法正确处理。我正在尝试检索属于特定列表（type=close_friends）的朋友。我可以通过 [https://graph.facebook.com/me/friendlists](https://graph.facebook.com/me/friendlists)检索我的列表， 但我需要与每个列表关联的实际朋友。我希望它是这样的： [https://graph.facebook.com/me/friends?fields=](https://graph.facebook.com/me/friends?fields=) ????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:21:58.150

[FriendList](https://developers.facebook.com/docs/reference/api/FriendList/)是一个支持`members`连接的 Graph API 对象。

# zend-framework - 在 PHP Zend Framework 中传递变量

> ID：10106894
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:10.920
> 
> 标签：zend-framework

我想我只是工作太久而且很累。我有一个使用 Zend 框架的应用程序，我在其中显示来自数据库的俱乐部列表。然后，我希望用户能够单击俱乐部并将俱乐部的 ID 发布到另一个页面以显示更多信息。

这是俱乐部控制器：

```
class ClubsController extends Zend_Controller_Action
{

    public function init()
    {

    }

    public function indexAction()
    {
        $this->view->assign('title', 'Clubs');
        $this->view->headTitle($this->view->title, 'PREPEND');
        $clubs = new Application_Model_DbTable_Clubs();
        $this->view->clubs = $clubs->fetchAll();
    }
} 
```

该模型：

```
class Application_Model_DbTable_Clubs extends Zend_Db_Table_Abstract
{

    protected $_name = 'clubs';

    public function getClub($id) {
        $id = (int) $id;
        $row = $this->fetchRow('id = ' . $id);
        if (!$row) {
            throw new Exception("Count not find row $id");
        }
        return $row->toArray();
    }
} 
```

风景：

```
<table>
    <?php foreach($this->clubs as $clubs) : ?>
    <tr>
        <td><a href=''><?php echo $this->escape($clubs->club_name);?></a></td>
        <td><?php echo $this->escape($clubs->rating);?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

我想我只是对它是如何使用 zend 框架完成的感到困惑..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:25:07.610

在你看来这样做

```
<?php foreach ($this->clubs as $clubs) : ?>
...
<a href="<?php echo $this->url(array(
                    'controller' => 'club-description',
                    'action' => 'index',
                    'club_id' => $clubs->id
                    ));?>">
... 
```

这样你就可以在 ClubDescription 控制器的索引操作中使用 club_id 参数。你这样理解`$this->getRequest()->getParam('club_id')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:56:23.683

一个例子：

```
class ClubsController extends Zend_Controller_Action
{

    public function init()
    {

    }

    public function indexAction()
    {
        $this->view->assign('title', 'Clubs');
        $this->view->headTitle($this->view->title, 'PREPEND');
        $clubs = new Application_Model_DbTable_Clubs();
        $this->view->clubs = $clubs->fetchAll();
    }

   public function displayAction() 
   {
       //get id param from index.phtml (view)
       $id = $this->getRequest()->getParam('id');
       //get model and query by $id
       $clubs = new Application_Model_DbTable_Clubs();
       $club = $clubs->getClub($id);
       //assign data from model to view [EDIT](display.phtml)
       $this->view->club = $club;
       //[EDIT]for debugging and to check what is being returned, will output formatted text to display.phtml
       Zend_debug::dump($club, 'Club Data');

    }
} 
```

[编辑]display.phtml

```
<!-- This is where the variable passed in your action shows up, $this->view->club = $club in your action equates directly to $this->club in your display.phtml -->
<?php echo $this->club->dataColumn ?> 
```

视图 index.phtml

```
<table>
    <?php foreach($this->clubs as $clubs) : ?>
    <tr>
    <!-- need to pass a full url /controller/action/param/, escape() removed for clarity -->
    <!-- this method of passing a url is easy to understand -->
        <td><a href='/index/display/id/<?php echo $clubs->id; ?>'><?php echo $clubs->club_name;?></a></td>
        <td><?php echo $clubs->rating;?></td>
    </tr>
<?php endforeach; ?> 
```

使用 url() 帮助器的示例视图

```
<table>
        <?php foreach($this->clubs as $clubs) : ?>
        <tr>
        <!-- need to pass a full url /controller/action/param/, escape() removed for clarity -->
        <!-- The url helper is more correct and less likely to break as the application changes -->
            <td><a href='<?php echo $this->url(array(
                'controller' => 'index',
                'action' => 'display',
                'id' => $clubs->id
             )); ?>'><?php echo $clubs->club_name;?></a></td>
            <td><?php echo $clubs->rating;?></td>
        </tr>
    <?php endforeach; ?>
</table> 
```

[编辑] 通过构建模型中当前 getClub() 方法的方式，您可能需要使用`$club['data']`. 这可以通过`->toArray()`从返回值中删除来纠正。
如果您还没有这样做，您可以通过将以下行添加到您的 .htaccess 文件来激活屏幕上的错误消息`SetEnv APPLICATION_ENV development`。使用您提供的信息，确保`display.phtml`生活在`application\views\scripts\club-description\display.phtml`（我很确定这是正确的，ZF 以一种有趣的方式处理一些骆驼案例名称）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:35:45.693

您可以将俱乐部 ID 作为视图中的 href 作为链接的 URL 放入 - 例如`/controllername/club/12`，然后使用以下命令在控制器中获取该信息：

```
$clubId = (int) $this->_getParam('club', false); 
```

如果没有给出参数，'false' 将是默认值。(int) 是一个很好的做法，可以确保你得到一个数字（或者 0，如果它是其他一些非数字字符串）。

# ios - Appcelerator：尝试将模块添加到我的项目中

> ID：10106897
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:17.997
> 
> 标签：ios, module, appcelerator

我试图将一个模块添加到我的项目中，但是一旦添加了它并且我将我的代码添加到 tiapp.xml，它就不会为 ios 构建。我得到 SystemExit: 65

在 android 中，它会构建，但在涉及使用模块的部分时会崩溃。

Titanium skd - 1.8.2 Xcode - 4.3 在 Mac osx lion 上运行。

是的，我尝试了干净的重建。我还删除了构建文件夹并尝试以这种方式重建。我几乎肯定我正确地包括了模块和我的代码，因为我阅读了许多关于如何做到这一点的教程和线程。

要安装模块，我将 .zip 放在我的项目根目录中，并在它尝试构建时安装它。它会创建所有正确的文件夹并相应地放置文件。一切似乎都是正确的。

我的 TiApp.xml

```
<modules>
 <module platform="iphone" version="1.0">com.zooz.ti</module>
 <module platform="android" version="1.0">com.zooz.ti</module> 
</modules> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:53:14.977

Adding modules to `titanium` is a bit buggy and many small details needs to be correct, here are a few:

1.  The module version is the right one and written correctly in tiapp.xml

2.  Make sure that also the version that is inside the module manifest file matches the version you point to.

3.  If you upgrade a module version, a clean build need to be executed.

4.  Minimum SDK version - checkout that the module min titanium sdk version parameter has lower value then the SDK you use.

Regarding the specific ZooZ module. There is a new version much more stable and easier steps to integrate for `iOS` and `Android`. For `iOS` use version 1.2 and Android 1.1\. In the new `iOS` version you don't need the extra step of modifying `titanium` default `xcode project`.

# html - HTML - 在填充内容之前获取 div 的宽度和高度

> ID：10106899
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:20.993
> 
> 标签：html, width, offsetwidth

在使用内容填充它之前，我需要获取 shareddiv 的实际宽度和高度，以便我可以根据设备或浏览器分辨率确定有多少面板可以放入 shareddiv

```
<div id="outerdiv">
<div style="width: 100% ;height:100%;" id="sharedDiv" ></div>
</div> 
```

警报在代码中的不同位置返回不同的值。

```
var divow = document.getElementById('sharedDiv').offsetWidth;
        alert("div offsetwidth"+divow); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:41:02.337

只有在加载 DOM 和您的资源（CSS 和图像）后，您才能获得有效的测量结果。直到发生这种情况，页面中的元素可能会四处移动并改变大小（渐进式渲染）。因此，您应该在事件处理程序中进行测量，例如`onload`. 您还应该重新计算调整大小事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:44:51.157

你试过使用jquery吗？

```
var divow = $("#sharedDiv").outerWidth(); 
```

或者更好，为什么不只是

```
var divow = $(window).height(); 
```

# python - 优雅地在列表中查找子列表

> ID：10106901
> 
> 赞同：36
> 
> 时间：2012-04-11T13:28:26.537
> 
> 标签：python, list, design-patterns

给定一个包含被噪声包围的已知模式的列表，是否有一种优雅的方法来获取与该模式相同的所有项目。请参阅下面的粗略代码。

```
list_with_noise = [7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5]
known_pattern = [1,2,3,4]
res = []

for i in list_with_noise:
    for j in known_pattern:
        if i == j:
            res.append(i)
            continue

print res 
```

我们会得到`2, 1, 2, 3, 4, 2, 1, 2, 3, 4, 1, 2, 3, 4, 4, 3`

**奖励**：如果不存在完整模式，则避免附加 i（即，允许 1,2,3,4 但不允许 1,2,3）

例子：

```
find_sublists_in_list([7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5],[1,2,3,4])

[1,2,3,4],[1,2,3,4],[1,2,3,4]

find_sublists_in_list([7,2,1,2,3,2,1,2,3,6,9,9,1,2,3,4,7,4,3,1,2,6],[1,2,3,4])

[1,2,3],[1,2,3],[1,2,3] 
```

列表包含命名元组。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-25T05:37:35.710

我知道这个问题已经 5 个月大并且已经“接受”了，但是谷歌搜索一个非常相似的问题让我想到了这个问题，所有的答案似乎都有一些相当重要的问题，而且我很无聊，想试试我的手在一个如此的答案中，所以我只是要喋喋不休地说出我发现的东西。

据我了解，问题的第一部分非常简单：只需返回原始列表，过滤掉所有不在“模式”中的元素。按照这种想法，我想到的第一个代码使用了 filter() 函数：

```
def subfinder(mylist, pattern):
    return list(filter(lambda x: x in pattern, mylist)) 
```

我会说这个解决方案肯定比原来的解决方案更简洁，但它并没有更快，或者至少没有明显的感觉，如果没有很好的理由使用 lambda 表达式，我会尽量避免使用它们。事实上，我能想出的最佳解决方案涉及一个简单的列表理解：

```
def subfinder(mylist, pattern):
    pattern = set(pattern)
    return [x for x in mylist if x in pattern] 
```

这个解决方案比原始解决方案更优雅，速度也更快：理解比原始解决方案快 120%，而在我的测试中，将模式转换为一组第一个颠簸，速度提高了 320%。

现在是奖金：我将直接进入它，我的解决方案如下：

```
def subfinder(mylist, pattern):
    matches = []
    for i in range(len(mylist)):
        if mylist[i] == pattern[0] and mylist[i:i+len(pattern)] == pattern:
            matches.append(pattern)
    return matches 
```

这是 Steven Rumbalski 的“inefficient one liner”的变体，添加了“mylist[i] == pattern[0]”检查，并且由于 python 的短路评估，它比原始语句快得多和 itertools 版本（据我所知，以及其他所有提供的解决方案）*，*它甚至支持重叠模式。所以你去。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T13:36:17.190

这将获得您问题的“奖励”部分：

```
pattern = [1, 2, 3, 4]
search_list = [7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5]
cursor = 0
found = []
for i in search_list:
    if i == pattern[cursor]:
        cursor += 1
        if cursor == len(pattern):
            found.append(pattern)
            cursor = 0
    else:
        cursor = 0 
```

对于非奖金：

```
pattern = [1, 2, 3, 4]
search_list = [7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5]
cursor = 0
found = []
for i in search_list:
    if i != pattern[cursor]:
        if cursor > 0:
            found.append(pattern[:cursor])
        cursor = 0
    else:
        cursor += 1 
```

最后，这个处理重叠：

```
def find_matches(pattern_list, search_list):
    cursor_list = []
    found = []
    for element in search_list:
        cursors_to_kill = []
        for cursor_index in range(len(cursor_list)):
            if element == pattern_list[cursor_list[cursor_index]]:
                cursor_list[cursor_index] += 1
                if cursor_list[cursor_index] == len(pattern_list):
                    found.append(pattern_list)
                    cursors_to_kill.append(cursor_index)
            else:
                cursors_to_kill.append(cursor_index)
        cursors_to_kill.reverse()
        for cursor_index in cursors_to_kill:
            cursor_list.pop(cursor_index)
        if element == pattern_list[0]:
            cursor_list.append(1)
    return found 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-23T18:26:17.303

一种基于迭代器的方法，仍然基于朴素算法，但尝试尽可能多地使用隐式循环`.index()`：

```
def find_pivot(seq, subseq):
    n = len(seq)
    m = len(subseq)
    stop = n - m + 1
    if n > 0:
        item = subseq[0]
        i = 0
        try:
            while i < stop:
                i = seq.index(item, i)
                if seq[i:i + m] == subseq:
                    yield i
                i += 1
        except ValueError:
            return 
```

与其他几种具有不同程度的显式循环的方法相比：

```
def find_loop(seq, subseq):
    n = len(seq)
    m = len(subseq)
    for i in range(n - m + 1):
        if all(seq[i + j] == subseq[j] for j in (range(m))):
            yield i 
```

```
def find_slice(seq, subseq):
    n = len(seq)
    m = len(subseq)
    for i in range(n - m + 1):
        if seq[i:i + m] == subseq:
            yield i 
```

```
def find_mix(seq, subseq):
    n = len(seq)
    m = len(subseq)
    for i in range(n - m + 1):
        if seq[i] == subseq[0] and seq[i:i + m] == subseq:
            yield i 
```

一个会得到：

```
a = list(range(10))
print(a)
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

b = list(range(5, 10))
print(b)
# [5, 6, 7, 8, 9]

funcs = find_pivot, find_loop, find_slice, find_mix, 
for func in funcs:
    print()
    print(func.__name__)
    print(list(func(a * 10, b)))
    aa = a * 100
    %timeit list(func(aa, b))
    random.shuffle(aa)
    %timeit list(func(aa, b))

# find_pivot
# [5, 15, 25, 35, 45, 55, 65, 75, 85, 95]
# 10000 loops, best of 3: 49.6 µs per loop
# 10000 loops, best of 3: 50.1 µs per loop

# find_loop
# [5, 15, 25, 35, 45, 55, 65, 75, 85, 95]
# 1000 loops, best of 3: 712 µs per loop
# 1000 loops, best of 3: 680 µs per loop

# find_slice
# [5, 15, 25, 35, 45, 55, 65, 75, 85, 95]
# 10000 loops, best of 3: 162 µs per loop
# 10000 loops, best of 3: 162 µs per loop

# find_mix
# [5, 15, 25, 35, 45, 55, 65, 75, 85, 95]
# 10000 loops, best of 3: 82.2 µs per loop
# 10000 loops, best of 3: 83.9 µs per loop 
```

请注意，这比使用测试输入的当前接受的答案快约 30%。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T13:37:16.147

```
list_with_noise = [7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5]
string_withNoise = "".join(str(i) for i in list_with_noise)
known_pattern = [1,2,3,4]
string_pattern = "".join(str(i) for i in known_pattern)
string_withNoise.count(string_pattern) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T14:25:03.570

鉴于：

```
a_list = [7,2,1,2,3,4,2,1,2,3,4,9,9,1,2,3,4,7,4,3,1,2,3,5]
pat = [1,2,3,4] 
```

这是一个效率低下的班轮：

```
res = [pat for i in range(len(a_list)) if a_list[i:i+len(pat)] == pat] 
```

这是一个更高效的 itertools 版本：

```
from itertools import izip_longest, islice

res = []
i = 0  

while True:
    try:
        i = a_list.index(pat[0], i)
    except ValueError:
        break
    if all(a==b for (a,b) in izip_longest(pat, islice(a_list, i, i+len(pat)))):
        res.append(pat)
        i += len(pat)
    i += 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-03T00:26:56.750

一个惯用的、可组合的解决方案。

首先，我们需要借用[一个`itertools`配方](https://docs.python.org/3/library/itertools.html#itertools-recipes)，`consume`（它从迭代器中消耗并丢弃给定数量的元素。然后我们将`itertools`配方用于`pairwise`，并使用以下方法将其扩展为一个`nwise`函数`consume`：

```
import itertools

def nwise(iterable, size=2):
    its = itertools.tee(iterable, size)
    for i, it in enumerate(its):
        consume(it, i)  # Discards i elements from it
    return zip(*its) 
```

现在我们有了这个，解决奖金问题真的很容易：

```
def find_sublists_in_list(biglist, searchlist):
    searchtup = tuple(searchlist)
    return [list(subtup) for subtup in nwise(biglist, len(searchlist)) if subtup == searchtup]

    # Or for more obscure but faster one-liner:
    return map(list, filter(tuple(searchlist).__eq__, nwise(biglist, len(searchlist)))) 
```

类似地，对主要问题的更简洁和更快（如果稍微不那么漂亮）的解决方案取代了：

```
def subfinder(mylist, pattern):
    pattern = set(pattern)
    return [x for x in mylist if x in pattern] 
```

和：

```
def subfinder(mylist, pattern):
    # Wrap filter call in list() if on Python 3 and you need a list, not a generator
    return filter(set(pattern).__contains__, mylist) 
```

这表现相同，但避免需要将临时存储`set`到名称中，并将所有过滤工作推送到 C。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-02T08:52:17.440

```
def sublist_in_list(sub, lis):
    return str(sub).strip('[]') in str(lis).strip('[]') 
```

# jquery - 警报 jquery 功能

> ID：10106904
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:42.590
> 
> 标签：jquery, function, tags

当您单击另一个链接时，我正在 jquery 中创建一个链接。

问题是我想在您单击此新链接时生成警报，但不会触发操作！

```
$('#test').click(function() {
    $("<div/>").html('<a href="#" id="remove">Remove</a>').appendTo("#results");
});

$('#remove').click(function() {
    alert('lol');
});​ 
```

代码链接：http: [//jsfiddle.net/LARef/](http://jsfiddle.net/LARef/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:32:02.240

在您运行时

```
$('#remove').click(function() {
    alert('lol');
}); 
```

该`#remove`元素尚不存在..（*因为它是在您单击第一个链接时添加的*）

使用该`.delegate()`方法（*或者`.on()`如果您将 jquery 升级到 1.7+*）

```
$('#results').delegate('#remove', 'click', function(){
    alert('lol');
}); 
```

演示在[http://jsfiddle.net/LARef/2/](http://jsfiddle.net/LARef/2/)

* * *

v1.7+ 的等价物是

```
$('#results').on('click', '#remove', function(){
    alert('lol');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:32:04.943

创建元素后必须绑定事件。将您的代码更改为此，它将起作用：

```
$('#test').click(function ()
{
    $("<div/>").html('<a href="#" id="remove">Remove</a>').appendTo("#results");
    $('#remove').click(function ()
    {
        alert('lol');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:32:22.260

你应该使用委托

```
$('#test').click(function() {
    $("<div/>").html('<a href="#" id="remove">Remove</a>').appendTo("#results");
});

$(window).delegate('#remove','click',  function() {
    alert('lol');
});​ 
```

[http://jsfiddle.net/LARef/1/](http://jsfiddle.net/LARef/1/)

# android - 使用 App Inventor 的 Google 地图问题

> ID：10106910
> 
> 赞同：0
> 
> 时间：2012-04-11T13:28:58.713
> 
> 标签：android, google-maps, app-inventor

此处有关该问题的信息：我与谷歌应用程序发明者遇到的问题是将文本框中的文本带入谷歌地图并让谷歌地图尝试找到我的位置。

截图： [http ://s1164.photobucket.com/albums/q572/drebin8933/?start=all](http://s1164.photobucket.com/albums/q572/drebin8933/?start=all)

-感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:40:59.637

我认为......你不能做你目前想做的事。

这是意图列表[http://developer.android.com/guide/appendix/g-app-intents.html](http://developer.android.com/guide/appendix/g-app-intents.html)

运行 Google Map 的 Intent 在 DataUri 中使用 geo: URI

在此处查找显示位置的地图[http://appinventor4all.org/docs/learn/reference/other/activitystarter.html](http://appinventor4all.org/docs/learn/reference/other/activitystarter.html)

# nsis - 如何将背景放在安装程序内部页面的顶部

> ID：10106916
> 
> 赞同：0
> 
> 时间：2012-04-11T13:29:20.607
> 
> 标签：nsis

如何将背景图像放在内部安装程序页面的顶部，以便占用所有标题区域。

在下面的解决方案中，背景只占用标题的左侧

```
!define MUI_HEADERIMAGE
!define MUI_HEADERIMAGE_BITMAP "top.bmp"
!include "MUI2.nsh" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:39:00.780

如果不修改 UI 可执行文件，则无法执行此操作。请参阅[MUI 2 文档](http://nsis.sourceforge.net/Docs/Modern%20UI%202/Readme.html)，特别是`MUI_UI`定义。您需要使用默认的可执行文件，并通过资源黑客更改该标题图像的大小。

您也可以通过资源黑客和 MUI_UI_HEADERIMAGE 的值来解决这个问题（请参阅那些文档）。不过，我不确定，因为我从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:49:01.737

我找到了答案！定义 MUI_HEADERIMAGE_BITMAP_NOSTRETCH

# android - 在 ViewStub 中使用 ListView 时出现 NullPointerException

> ID：10106921
> 
> 赞同：2
> 
> 时间：2012-04-11T13:29:45.160
> 
> 标签：android, android-listview, nullpointerexception, viewstub

我正在尝试在 ViewStub 中创建一个 ListView，但我一直在获取`NullPointerException`. 我的按钮在 ViewStub 中按预期工作。失败的代码如下：

```
else if(v.getId() == R.id.comments_button_series_view){
    if(stubUsed == false){

        stub = (ViewStub) findViewById(R.id.stub);
        View inflatedStub = stub.inflate();

        String[] comments = new String[]{"comment1", "comment2"}; 
        commentsAdapter = new ArrayAdapter<String>(this, 
                                  R.layout.patient_list_element,
                                  R.id.comments_list_comments_view, comments);
        commentsList = (ListView)findViewById(R.id.comments_list_comments_view); 
        commentsList.setAdapter(commentsAdapter); 
```

我认为它在commentsList.setAdapter(commentsAdapter) 失败。

这个包含 ListView 的 ViewStub 内容的 XML 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/comment_stub"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/settings_background" >

    <Button
        android:id="@+id/comments_button_comment_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="62dp"
        android:text="Add comment" />

    <ListView
        android:id="@+id/comments_list_comments_view"
        android:layout_width="match_parent"
        android:layout_height="470dp"
        android:layout_alignLeft="@+id/pin_button_comments_view"
        android:layout_below="@+id/comments_button_comment_view" >

    </ListView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignRight="@+id/comments_button_comment_view"
        android:layout_marginRight="119dp"
        android:text="COMMENTS"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/pin_button_comments_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/comments_button_comment_view"
        android:layout_alignBottom="@+id/comments_button_comment_view"
        android:layout_marginRight="30dp"
        android:layout_toLeftOf="@+id/comments_button_comment_view"
        android:text="Add Pin" />

    <Button
        android:id="@+id/hide_button_comments_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/pin_button_comments_view"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="10dp"
        android:text="Hide" />

</RelativeLayout> 
```

我已经在不使用viewstub 的情况下测试了ListView 的代码，而且效果很好。

我想我明白了？任何帮助表示赞赏！:)

编辑：

感谢您的快速回复！

contentView 设置在 ViewStub 膨胀的视图上。但如前所述，它与按钮一起工作得很好，但我不明白为什么我会在 ListView 中得到一个空指针！:(

以下是 LogCat 的结果：

```
04-11 10:37:55.400: W/dalvikvm(971):        threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-11 10:37:55.450: E/AndroidRuntime(971):  FATAL EXCEPTION: main
04-11 10:37:55.450: E/AndroidRuntime(971):  java.lang.NullPointerException
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:396)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:366)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.AbsListView.obtainView(AbsListView.java:1964)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ListView.makeAndAddView(ListView.java:1756)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ListView.fillDown(ListView.java:656)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ListView.fillFromTop(ListView.java:716)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.ListView.layoutChildren(ListView.java:1609)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.AbsListView.onLayout(AbsListView.java:1794)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1542)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1403)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1314)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.widget.FrameLayout.onLayout(FrameLayout.java:400)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.View.layout(View.java:9330)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewGroup.layout(ViewGroup.java:3795)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1201)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1944)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.os.Looper.loop(Looper.java:126)
04-11 10:37:55.450: E/AndroidRuntime(971):  at android.app.ActivityThread.main(ActivityThread.java:3997)
04-11 10:37:55.450: E/AndroidRuntime(971):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 10:37:55.450: E/AndroidRuntime(971):  at java.lang.reflect.Method.invoke(Method.java:491)
04-11 10:37:55.450: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-11 10:37:55.450: E/AndroidRuntime(971):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-11 10:37:55.450: E/AndroidRuntime(971):  at dalvik.system.NativeStart.main(Native Method) 
```

再次感谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:23:25.143

`ArrayAdapter`创建对象时似乎有错误。构造函数 ( `textViewResourceId`) 中的第三个参数应该是 a`TextView`而不是 a `ListView`。

改变它，它应该可以工作。

# iis-7 - 尽管使用 HTTP 很容易找到页面，但 HTTPS 和 SharePoint7 的问题

> ID：10106924
> 
> 赞同：0
> 
> 时间：2012-04-11T13:29:56.210
> 
> 标签：iis-7, https, sharepoint-2007

我在工作中遇到了一个 DEV 站点的奇怪情况。上周，我们的系统管理员正在尝试移动我们的 DEV 服务器，但没有机会完成这项工作，因此回滚了他的更改。

当我输入这个 URL [http://mylocalsharepointsite/anypage.aspx](http://mylocalsharepointsite/anypage.aspx)时，我很容易得到这个页面。但是，当我将协议更改为 https 时，我首先收到一条消息，警告我有关证书的信息，然后当我单击忽略警告时，我收到 404 错误。

我知道站点和页面在那里，因为我去 IIS 并且可以看到站点、它映射到的目录和 SSL 证书，因为它是我们自己生成的 DEV。

我想我的问题应该是这个，我应该首先看什么，有什么明显的我忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:08:34.820

这里的问题在于 IIS 和证书。我重新生成了证书，即使它们似乎没有任何问题。

这个页面对我帮助很大，尤其是两个工具：SelfSSL 和 SSLDiag。

[http://www.iis-aid.com/articles/how_to_guides/creating_self_signed_certificates_iis](http://www.iis-aid.com/articles/how_to_guides/creating_self_signed_certificates_iis)

# jquery - Jquery 插件 - 一周中的选择时间

> ID：10106925
> 
> 赞同：0
> 
> 时间：2012-04-11T13:29:59.683
> 
> 标签：jquery, datetime

想要显示周一 - 周五 24 小时周时间选择器。我基本上需要人们能够选择他们工作的班次。

它是通用的，而不是日历上的实际日期，只是周一至周五以及每天的几小时。

似乎找不到这样的东西 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:33:30.203

将 Timepicker 添加到 jQuery UI Datepicker。看看[这个](http://trentrichardson.com/examples/timepicker/)例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:44:17.303

您可以使用像 Week Calendar 这样的 jquery 插件（[http://www.1stwebdesigner.com/freebies/jquery-calendar-plugins/](http://www.1stwebdesigner.com/freebies/jquery-calendar-plugins/)中的第 30 位）

# opengl-es-2.0 - 使用多个 VAO 时，opengl es 2 只是将屏幕清除为默认颜色值

> ID：10106926
> 
> 赞同：0
> 
> 时间：2012-04-11T13:30:05.203
> 
> 标签：opengl-es-2.0

我对opengl es 2相当陌生，因为我正在编写IOS应用程序，所以我想试试看！所以我在 xcode 4 中使用 GLKit 模板加载了一个默认的 opengl 程序，在摸索提供的代码之后，我开始修改它，以便我可以绘制多种不同类型的顶点数组对象......问题只是对 glClearColor 的调用似乎产生了任何结果-整个屏幕现在只是灰色的:-(我不知道出了什么问题，因为我在代码的关键位置检查了许多 glGetError 调用，它似乎总是返回 0 ......而且我也，据我所知，请按照使用 VAO 绘制所需的步骤，因为当我最初修改默认代码以显示它工作正常的飞机时......所以如果你们能帮助我，我将非常感激新手！:)

这是代码不同相关部分的发布：

```
//init VAOs:
glGenVertexArraysOES(NUM_VAO, _vertexArrayIDS);
glGenBuffers(NUM_VAO, _vertexBufferIDS);
glGenBuffers(NUM_VAO, _indexBufferIDS);

//init gl object for player:
//setupGLObject(VAO_PLAYER, gCubicVertexData, gCubicIndices, GL_STATIC_DRAW);   
glBindVertexArrayOES(_vertexArrayIDS[VAO_PLAYER]);

glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferIDS[VAO_PLAYER]);
glBufferData(GL_ARRAY_BUFFER, sizeof(gCubicVertexData), gCubicVertexData, GL_STATIC_DRAW);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBufferIDS[VAO_PLAYER]);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(gCubicIndices), gCubicIndices, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribColor);
glVertexAttribPointer(GLKVertexAttribColor, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(12));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(24));

//NSLog(@"glError after player init : %d", glGetError());
//init gl object for player wall:
//setupGLObject(VAO_PWALL, gPlayerWallVertexData, gPlayerWallIndices, GL_DYNAMIC_DRAW);
glBindVertexArrayOES(_vertexArrayIDS[VAO_PWALL]);

glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferIDS[VAO_PWALL]);
glBufferData(GL_ARRAY_BUFFER, sizeof(gPlayerWallVertexData), gPlayerWallVertexData, GL_STATIC_DRAW);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBufferIDS[VAO_PLAYER]);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(gPlayerWallIndices), gPlayerWallIndices, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribColor);
glVertexAttribPointer(GLKVertexAttribColor, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(12));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(24));

//init gl object for wall/floor plane:
//setupGLObject(VAO_WALL_FLOOR_PLANE, gPlanePyVertexData, gPlanePyIndices, GL_STATIC_DRAW);
glBindVertexArrayOES(_vertexArrayIDS[VAO_WALL_FLOOR_PLANE]);

glBindBuffer(GL_ARRAY_BUFFER, _vertexBufferIDS[VAO_WALL_FLOOR_PLANE]);
glBufferData(GL_ARRAY_BUFFER, sizeof(gPlanePyVertexData), gPlanePyVertexData, GL_STATIC_DRAW);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBufferIDS[VAO_PLAYER]);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(gPlanePyIndices), gPlanePyIndices, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(0));
glEnableVertexAttribArray(GLKVertexAttribColor);
glVertexAttribPointer(GLKVertexAttribColor, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(12));
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, sizeof(VertexData), BUFFER_OFFSET(24));

glBindVertexArrayOES(0); 
```

绘图功能 - glkView:(GLKView *)view drawInRect:(CGRect)rect

```
for (NSString *currentKey in g_renderables) {
    GameObject *currentRenderable = [g_renderables objectForKey:currentKey];

    if (currentRenderable.go_type == LC_FLOOR) {
        glBindVertexArrayOES(_vertexArrayIDS[VAO_WALL_FLOOR_PLANE]);

        glUseProgram(_program);

        glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, currentRenderable.go_mvm.m);
        glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

        NSLog(@"glError : %d", glGetError());

        glDrawElements(GL_TRIANGLE_STRIP, sizeof(gPlanePyIndices)/sizeof(gPlanePyIndices[0]), GL_UNSIGNED_INT, 0);
    }
    else if (currentRenderable.go_type == LC_WALL) {
        glBindVertexArrayOES(_vertexArrayIDS[VAO_WALL_FLOOR_PLANE]);

        glUseProgram(_program);

        glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, currentRenderable.go_mvm.m);
        glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

        glDrawElements(GL_TRIANGLE_STRIP, sizeof(gPlanePyIndices)/sizeof(gPlanePyIndices[0]), GL_UNSIGNED_INT, 0);
    }
    else if (currentRenderable.go_type == LC_PLAYER) {
        glBindVertexArrayOES(_vertexArrayIDS[VAO_PLAYER]);

        glUseProgram(_program);

        glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, currentRenderable.go_mvm.m);
        glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

        glDrawElements(GL_TRIANGLE_STRIP, sizeof(gCubicIndices)/sizeof(gCubicIndices[0]), GL_UNSIGNED_INT, 0);
    } 
```

矩阵计算：

```
float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 0.1f, 1000.0f);

for (NSString *currentKey in g_renderables) {
    GLKMatrix4 thisMvm = GLKMatrix4Identity;
    GameObject *currentRenderable = [g_renderables objectForKey:currentKey];

    if (currentRenderable.go_hasVisual) {

        thisMvm = GLKMatrix4Translate(thisMvm, currentRenderable.go_origin.x, currentRenderable.go_origin.y, currentRenderable.go_origin.z);
        if (currentRenderable.go_type == LC_WALL || currentRenderable.go_type == LC_PLAYER) {
            if (currentRenderable.go_type == LC_PLAYER) {
                if (currentRenderable.go_orientation == VV_MINUS_X) {
                    thisMvm = GLKMatrix4RotateY(thisMvm, GLKMathDegreesToRadians(90.0f));
                }
                else if (currentRenderable.go_orientation == VV_PLUS_X) {
                    thisMvm = GLKMatrix4RotateY(thisMvm, GLKMathDegreesToRadians(-90.0f));
                }
                else if (currentRenderable.go_orientation == VV_PLUS_Z) {
                    thisMvm = GLKMatrix4RotateY(thisMvm, GLKMathDegreesToRadians(180.0f));
                }
            }
            else {
                if (currentRenderable.go_orientation == VV_MINUS_X) {
                    thisMvm = GLKMatrix4RotateZ(thisMvm, GLKMathDegreesToRadians(90.0f));
                }
                else if (currentRenderable.go_orientation == VV_PLUS_X) {
                    thisMvm = GLKMatrix4RotateZ(thisMvm, GLKMathDegreesToRadians(-90.0f));
                }
                else if (currentRenderable.go_orientation == VV_PLUS_Z) {
                    thisMvm = GLKMatrix4RotateX(thisMvm, GLKMathDegreesToRadians(-90.0f));
                }
                else if (currentRenderable.go_orientation == VV_MINUS_Z) {
                    thisMvm = GLKMatrix4RotateX(thisMvm, GLKMathDegreesToRadians(90.0f));
                }
            }
        }
        if (currentRenderable.go_type != LC_LINKED_WALL) thisMvm = GLKMatrix4Scale(thisMvm, currentRenderable.width, currentRenderable.height, currentRenderable.depth);
        thisMvm = GLKMatrix4Multiply(GLKMatrix4MakeLookAt(g_currentCam.go_origin.x, g_currentCam.go_origin.y, g_currentCam.go_origin.z, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f), thisMvm);
        //NSLog(@"%f", thisMvm.m[10]);
        thisMvm = GLKMatrix4Multiply(projectionMatrix, thisMvm);

        currentRenderable.go_mvm = thisMvm;

    }
} 
```

就是这样。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:28:19.147

我认为您理解 glclearcolor 的方式有些混乱。

主要思想是，对于每一帧，您至少应该通过 glclear 清除颜色位，这就像在您完成绘图后清洁木板一样。

glclearcolor 指示 OpenGL 在清除后应该为整个屏幕使用哪种颜色。

这方面的一个例子如下：

```
glClearColor(1.0f,0.0f,0.0f,1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

这个例子告诉 OpenGL 在需要 color_buffer_bit 的清除颜色时使用红色。

我希望这在某种程度上有所帮助。

# c# - 在 GridView 中添加单元格

> ID：10106928
> 
> 赞同：-2
> 
> 时间：2012-04-11T13:30:14.313
> 
> 标签：c#, asp.net

如何在 gridview 中的每一行的特定列中添加单元格，我想使用 ***RowCreated***事件。

我有 3 列（产品名称，价格，计数）的 gridview 我从数据库中获取（产品名称，价格），我想为（计数）添加值，例如：（Kitkat，2$）我想将数字 5 添加到（计数）列，我想在创建每一行时处理此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:10:25.717

由于您没有显示您的标记，我将假设（根据[您的评论](https://stackoverflow.com/questions/10106928/adding-cells-in-gridview/10107636#comment12949154_10106928)）前两列是`<BoundFields>`. 如果是这种情况，我将添加第三列作为 a `<TemplateField>`，将 a`Label`放入其中，然后使用`RowDataBound`事件将正确的数字添加到`Label`.

以下是标记的样子：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
    onrowdatabound="GridView1_RowDataBound">
    <Columns>
        <asp:BoundField DataField="ProductName" HeaderText="Product Name" />
        <asp:BoundField DataField="Price" HeaderText="Price" />
        <asp:TemplateField HeaderText="Count">
            <ItemTemplate>
                <asp:Label ID="countLbl" runat="server"></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>

</asp:GridView> 
```

和代码隐藏：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    Label countLbl = (Label)e.Row.FindControl("countLbl");
    //Your logic for what number to use should go here, I'm just defaulting to 5.
    countLbl.Text = "5";
} 
```

# android - 如何获取已经在android中打开的相机对象？

> ID：10106930
> 
> 赞同：0
> 
> 时间：2012-04-11T13:30:17.967
> 
> 标签：android, object, camera

我如何获得`android.hardware.Camera`在android中已经处于打开状态的对象实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:12:47.917

> 如何获取已经在android中打开的Camera对象？

如果您在自己的应用程序中打开它，则必须保留该`Camera`对象（例如，在您的活动中）。你无法取回它。

# forms - Magento Varien_Form: addField() 哪些字段是可能的？

> ID：10106931
> 
> 赞同：4
> 
> 时间：2012-04-11T13:30:19.730
> 
> 标签：forms, magento

对于 Magento 后端，我创建了一个 Varien_Form 来显示。

```
class MyNamespace_MyModule_Block_Adminhtml_MyModule_Edit_Tabs_Form
        extends Mage_Adminhtml_Block_Widget_Form {    
    protected function _prepareForm()
    {
        $form = new Varien_Data_Form();
        $this->setForm($form);
        $fieldset = $form->addFieldset('my_form', array('legend'=>'ABC'));

        $fieldset->addField('data', 'text',
            array(
                'label' => 'My Textfield',
                'name' => 'myTextField'
            ));
        return parent::_prepareForm();
    }
} 
```

我现在的问题是，哪些表单字段是可能的？你看到函数 addField() 上面写着“文本”吗？我听说过“复选框”和“隐藏”。但是是否有所有可能字段的列表？像标签或更多行的文本框等。非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T14:42:08.987

您可以使用的不同表单元素都可以在 lib/Varien/Data/Form/Element 中找到，您可以在[http://www.excellencemagentoblog.com/magento-admin-form-field找到使用其中一些的帮助](http://www.excellencemagentoblog.com/magento-admin-form-field)

您可以将 textarea 用于多行文本框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-08T16:36:51.250

以下是可能的字段类型列表：

```
text 
time 
textarea 
submit 
select 
radio 
password 
note 
multiselect
link
label
image
file
date 
checkbox 
```

# .net - 不同的 UI 共享相同的 BLL 和 DAL

> ID：10106935
> 
> 赞同：0
> 
> 时间：2012-04-11T13:30:36.330
> 
> 标签：.net, data-access-layer, bll

我们使用分层 UI、BLL、DAL 架构编写了一个系统。

我们现在需要编写一个使用相同数据库的网站，并将使用多达 50% 的现有系统 BLL 和 DAL。

我不想创建一个单独的解决方案并“复制和粘贴”BLL 和 DAL，因为随着更改的进行，许多必须在两个解决方案中复制。

我考虑为网站提供自己的 BLL 和 DAL，并引用已编译的系统 DLL 以删除重复项，但我担心这可能会被证明是不切实际的，因为这两种解决方案通常都会有更新。

如果可能的话，我想保持这两个项目在逻辑上是分开的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:39:22.557

为什么不向解决方案添加另一个项目，即网站项目，并让它引用 BLL 和 DAL 项目？

没有什么能阻止您在同一个解决方案中拥有一个 Web 应用程序、一个 WPF 应用程序、2 个类库甚至一个 Silverlight 应用程序！

所以你的解决方案最终会像：

```
--Solution  
  |  
  --- Main appp  
  |  
  --- BLL  
  |  
  --- DAL  
  |  
  --- Web App 
```

# c++ - 原子变量是无锁的吗？

> ID：10106936
> 
> 赞同：43
> 
> 时间：2012-04-11T13:30:41.463
> 
> 标签：c++, multithreading, c++11, x86-64, atomic

当我们谈论原子变量时，例如 C++11 的`atomic<>`，它是无锁的吗？或者无锁是什么不同的东西？如果我使用原子变量管理队列，它会比无锁队列慢吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-11T13:43:36.393

该标准没有指定原子对象是否是无锁的。在不为类型 T 提供无锁原子操作的平台上，`atomic<T>`可以使用互斥体来实现对象，该互斥体不是无锁的。在这种情况下，任何在其实现中使用这些对象的容器也不会是无锁的。

该标准确实提供了一种检查`atomic<T>`变量是否无锁的方法：您可以使用`var.is_lock_free()`或`atomic_is_lock_free(&var)`。这些函数保证`T`在给定的程序执行中总是为相同类型返回相同的值。对于基本类型，例如`int`，还提供了宏（例如`ATOMIC_INT_LOCK_FREE`），它们指定对该类型的无锁原子访问是否可用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-11T13:35:53.023

**无锁**通常适用于多线程共享的数据结构，同步机制*不是*互斥的；目的是所有线程都应该继续取得某种进展，而不是睡在互斥体上。

`atomic<T>`变量不使用锁（至少`T`在你的平台上是本地原子的），但在上述意义上它们不是无锁的。您可能会在实现无锁容器时*使用*它们，但仅靠它们是不够的。

例如，`atomic<queue<T>>`不会突然将一个正常`std::queue`的数据结构变成一个无锁的数据结构。但是，您可以实现一个真正的无锁，`atomic_queue<T>`其成员是`atomic`.

请注意，即使`atomic<int>`是本机原子的并且没有在您的平台上使用锁进行模拟，也不会以任何有趣的方式使其成为*无锁的。*从这个意义上说， Plain*已经*`int`是无锁的：包装器使您可以显式控制内存顺序，并访问硬件同步原语。*`atomic<>`*

# objective-c - 多次引用相同对象的 Restkit 对象映射

> ID：10106938
> 
> 赞同：0
> 
> 时间：2012-04-11T13:30:47.887
> 
> 标签：objective-c, ios, json, restkit, object-object-mapping

我正在使用 Restkit 使用 Json 文件为数据库播种。我的问题是当同一个对象被其他两个对象引用时，如何构造文件来表示对象之间的关系。

在我的应用程序中，我有一组位置，每个位置可以有一个或多个人，但是我也有一组组，每个组也可以有一个或多个人。名字无所谓。重要的是有些人既存在于一个组中，也存在于一个位置中。如何使用 Json 文件表示这些关系并使用 Restkit 将这些关系正确映射到对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:47:41.230

I think I can help, but I'll need to see your JSON. You can set relationships like this:

```
[MyMapping mapKeyPath:@"KeyPath" toRelationship:@"Relationship" withMapping:MyMapping]; 
```

# jquery - 使用jquery ui对话框iframe时如何显示加载gif

> ID：10106939
> 
> 赞同：0
> 
> 时间：2012-04-11T13:30:53.410
> 
> 标签：jquery, jquery-ui

我有这段 jquery 代码。我正在尝试找出一种在加载此 iframe 时加载 gif 的方法。感谢您的任何想法。

```
var $dialog = $('<div></div>')
.html('<iframe style="border: 0px; " src="/servlet/trainingServlet?method=editDoc&dir=<%=legDir%>&ID=-1" width="100%" height="580"></iframe>')
.dialog({
     autoOpen: false,
     modal: true,
     height: 575,
     width: 680,
     title: 'edit',
     position: [200, 100],
     buttons: {
         Close: function() {
               $( this ).dialog( "close" );
         }
     }
  });
  $dialog.dialog('open'); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T15:22:51.117

您可以在之后显示一个 CSS div `dialog.open()`，然后在`loadServlet`加载时让 HTML 再次隐藏它。就像是：

```
$dialog.dialog.open();
$("#loading").show() 
```

请参阅[如何使用 jQuery 创建“请稍候，正在加载...”动画？](https://stackoverflow.com/questions/1964839/jquery-please-waiting-loading-animation)

# xcode - EmailComposer 插件不适用于 Xcode 3.2.6 和 Cordova 1.5.0

> ID：10106941
> 
> 赞同：0
> 
> 时间：2012-04-11T13:31:02.680
> 
> 标签：xcode, cordova

我需要你的帮助，让 EmailComposer 插件在 Xcode 3.2.6 上与 Cordova 1.5.0 一起工作。我做了我读到的一切：

1.  将 .m 和 .h 文件添加到插件文件夹（通过将文件拖到 Xcode 中的文件夹以及将现有文件添加到文件夹）。
2.  将 .js 文件添加到 www 文件夹，方法是在 finder 中添加它。
3.  将此引用添加到我的 index.html:`<script type="text/javascript" charset="utf-8" src="EmailComposer.js"></script>`在 Cordova 引用之后。
4.  将插件条目添加到 Cordova.plist 文件。键：EmailComposer，类型：字符串，值：EmailComposer。
5.  更改了插件 .h 和 .m 文件中的代码以使用 Cordova（而不是 Phonegap），如下所述：[https ://github.com/phonegap/phonegap-plugins/pull/381](https://github.com/phonegap/phonegap-plugins/pull/381)
6.  像这样调用 show 方法： `function sendmail() { window.plugins.emailComposer.showEmailComposer("Subject","PlainTextBody", "recipient,recipient", "ccRecipient", "bccRecipient",false); }`

该`sendmail()`函数被调用。

完成所有这些之后，我仍然无法让它工作，调用`sendmail()`函数时，什么也没有发生。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:14:15.493

好的，问题解决了！我发现 .js 文件中还有一点需要更改。看看它： [https](https://github.com/devgeeks/phonegap-plugins/commit/be221a9a839c3bc5374704a311fab4aa9c7fb58f) ://github.com/devgeeks/phonegap-plugins/commit/be221a9a839c3bc5374704a311fab4aa9c7fb58f 现在它的工作。

# php - Yii 客户端验证不起作用

> ID：10106942
> 
> 赞同：0
> 
> 时间：2012-04-11T13:31:04.797
> 
> 标签：php, jquery, yii

“body”标签内有一个带有链接的页面。
插入链接后，fancybox 中会呈现以下视图。

```
<div class="form">
    <?php
                $model = new User;
        $model->scenario='registration';
        $form=$this->beginWidget('CActiveForm', array(
        'id'=>'signup-form',
                'action'=>'/signup/',
        'enableClientValidation'=>true,
        'clientOptions'=>array(
            'validateOnSubmit'=>true,
        ),
    )); ?>

        <p class="note">Fields with <span class="required">*</span> are required.</p>

        <div class="row">
            <?php echo $form->labelEx($model,'username'); ?>
            <?php echo $form->textField($model,'username'); ?>
            <?php echo $form->error($model,'username'); ?>
        </div>

        <div class="row">
            <?php echo $form->labelEx($model,'password'); ?>
            <?php echo $form->passwordField($model,'password'); ?>
            <?php echo $form->error($model,'password'); ?>
        </div>

        <div class="row buttons">
            <?php echo CHtml::submitButton('sign up',array('name'=>'submit')); ?>
        </div>

    <?php $this->endWidget(); ?>
    </div><!-- form --> 
```

当上面的代码在没有fancybox的情况下插入时，客户端验证脚本被正确插入，但是当在fancybox中时，页面中没有插入jQuery验证函数。
可能是什么问题？
（此处特意插入siteController代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:29:57.503

您的问题很可能是您如何将 HTML 发送到 Fancybox。如果您执行 renderPartial（如 user1248203 所暗示），您需要确保您已对发回的视图进行了 renderPartial 后处理（后处理包括您希望与视图本身一起呈现的 javascript/css 文件）。

有关[CController 页面的更多信息](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)

另一件需要注意的事情：当您进行后处理时，您需要确保您的 Fancybox（可能还有 jQuery 等）的 Javascript 不会再次发回。它可能会导致一些非常令人困惑的问题。要防止文件通过 Ajax 重新发送，请使用以下命令：

```
Yii::app()->clientScript->scriptMap['jquery.js'] = false;
Yii::app()->clientScript->scriptMap['jquery.min.js'] = false;
Yii::app()->clientscript->scriptMap['jquery-ui.min.js'] = false;
etc. 
```

另请注意，当您在开发服务器上调试时发送 jquery.js（YII_DEBUG 设置为 true），但在生产服务器上发送 jquery.min.js（其中 YII_DEBUG 设置为 false）。我被咬了 :-) 你可以在[framework/web/js/packages.php中看到它的定义](https://github.com/yiisoft/yii/blob/master/framework/web/js/packages.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:11:32.333

代码是从 Ajax 调用 (renderPartial) 调用还是直接调用？Ajax 调用 (renderPartial)**不**包含 javascript 验证功能，只有整个页面包含。

# c++ - 奇怪的崩溃，在gdb中分析

> ID：10106945
> 
> 赞同：2
> 
> 时间：2012-04-11T13:31:12.983
> 
> 标签：c++, crash, crash-reports, crash-dumps

我有一个应用程序，我正在分析这个软件的内存崩溃转储。

```
struct GPS_CONNECTION
{
    int sockfd;
    std::string sendbuf, recvbuf;
    struct sockaddr_in remoteaddr;
};
vector <GPS_CONNECTION> GPSC;

--------------------------------
(cut)
--------------------------------

fd_set master, gps_master, read_fds, gps_read_fds, write_fds, gps_write_fds;

for (;;)
{
    /* Clear */
    FD_ZERO(&gps_read_fds);
    FD_ZERO(&gps_write_fds);

    /* read_fds */
    gps_read_fds = gps_master;

    /* write_fds */
    for (int i=0; i < GPSC.size(); i++)
    {
        if (GPSC[i].sendbuf.empty())
        {
            continue;
        }
        FD_SET(GPSC[i].sockfd, &gps_write_fds);
    }

    /* Timeout struct */
    tv.tv_sec = 0;
    tv.tv_usec = 0;

    /* selectuj write */
    if (select(gps_fdmax+1, &gps_read_fds, &gps_write_fds, NULL, &tv) == -1)
    {
        perror("select");
        return 7;
    }

    --------------------------------
    (cut)
    --------------------------------
} 
```

GDB 崩溃转储说软件在行中崩溃了：

```
443                 if (GPSC[i].sendbuf.empty()) 
```

当我分析变量时，我看到了这个：

```
(gdb) print i
$1 = -1214807923 
```

我不明白这个值是如何被覆盖的？我在这里没有看到任何堆栈溢出问题，谁能解释这次崩溃的原因？

此问题反复出现 - 两天一次，这是一个 24/7/365 工作的服务器。

* * *

在 g++ 扩展此代码后，结果：

```
 for (int i=0; i < GPSC.size(); i++)
 {
     if (GPSC[i].sendbuf.empty())
     {
         continue;
     }
     __asm__ __volatile__ ("btsl %1,%0" : "=m" (((&gps_write_fds)->fds_bits)[((GPSC[i].sockfd) / (8 * sizeof (__fd_mask)))]) : "r" (((int) (GPSC[i].sockfd)) % (8 * sizeof (__fd_mask))) : "cc","memory");
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:36:48.367

从您分享的小代码片段中，很难说问题到底是什么。

我只能怀疑结果`GPSC.size()`大于 an可以存储的结果，因此在*一些*迭代后`int`导致溢出。`i`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:48:00.907

由于我之前不会考虑的多线程，代码会崩溃，我认为这仅在一个线程中工作，我的错误。*

# iphone - 根据状态修改 UIButtons 层

> ID：10106948
> 
> 赞同：1
> 
> 时间：2012-04-11T13:31:28.657
> 
> 标签：iphone, ios, uibutton, calayer, rounded-corners

我有一个背景 UI 图像，每当我触摸 UIButton 时都会显示：

```
[btn setImage:[UIImage imageNamed:@"background.png"] forState:UIControlStateNormal]; 
```

我还修改了 uibutton 的图层以提供圆角

```
[btn.layer setCornerRadius:10]; 
```

这可行，但角半径没有用于背景图像。我可以在以下位置访问图像

```
[btn backgroundImageForState:UIControlEventTouchDown] 
```

但由于这是一个 UIImage 它不会有一个 CA 层

我想要的是 CALayer 也支持背景图像，或者至少应该支持圆角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:35:10.500

我猜你需要设置`masksToBounds`为YES：

```
btn.layer.masksToBounds = YES; 
```

# mysql - CodeIgniter 增加/计数页面浏览量两次，而不是一次

> ID：10106949
> 
> 赞同：3
> 
> 时间：2012-04-11T13:31:30.200
> 
> 标签：mysql, codeigniter, increment, pageviews

我只是想通过 CodeIgniter 的活动记录来增加每次访问的页面浏览量。出于某种原因，以下代码递增了两次。因此，每次访问会增加 2 次页面浏览量。奇怪的是，这在另一个网站上使用，共享相同的表和相同的方法代码，并且在另一个网站上正常工作。视图字段是一个简单的 int(11)。我只在控制器中调用此方法一次，我想也许我有一个重复但我没有。

```
function increment_video_view($video_pk) {
    $this->db->where('video_pk', $video_pk);
    $this->db->set('views', 'views+1', FALSE);
    $this->db->update('videos');
} 
```

任何想法或帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:01:24.043

尝试在函数中放置一个 echo（或 log）语句，看看它是否真的被调用了两次。让我们知道它是否只回声一次。

```
function increment_video_view($video_pk) {
    echo "We in increment_video_view";
    $this->db->where('video_pk', $video_pk);
    $this->db->set('views', 'views+1', FALSE);
    $this->db->update('videos');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:35:11.467

你确定控制器只执行一次吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T06:00:24.723

当您的 HTML 中有 404 链接 (image/css/favicon) 或缺少 favicon.ico 时，就会发生这种情况

即使您没有将其插入 HTML，Chrome 也会查找 favicon.ico，当它发现它丢失时，我认为它会调用另一个请求。

# c# - 将 xml 文档反序列化为键值对列表

> ID：10106950
> 
> 赞同：1
> 
> 时间：2012-04-11T13:31:32.383
> 
> 标签：c#, xml

我正在尝试反序列化表示高分和首字母列表的键值对列表。当我尝试反序列化 XML 文档时，我不断收到错误消息：`There is an error in XML document (0, 0).`

我正在反序列化我的 XML 文档，如下所示：

```
GameHighScore highScoreHelper = new GameHighScore();

XmlSerializer deserializer = new XmlSerializer(typeof(GameHighScore));
highScoreHelper = (GameHighScore)deserializer.Deserialize(stream);

for (int i = 0; i < highScoreHelper.highScoreList.Count; i++)
{
  highScore[i] = new KeyValuePair<string, int>(highScoreHelper.highScoreList[i].Initials, highScoreHelper.highScoreList[i].Score);
} 
```

我在我的助手类中遗漏了什么吗？

```
 [XmlRootAttribute("GameScore")]
  public class GameHighScore
  {
    [XmlArray("Scores")]
    [XmlArrayItem("HighScore")]
    public List<HighScoreStruct<string, int>> highScoreList;

    private HighScoreStruct<string, int> scoreListHelper;

    [Obfuscation(Exclude = true)]
    public struct HighScoreStruct<K, V>
    {
      [XmlElement("Initials")]
      public K Initials
      { get; set; }

      [XmlElement("Score")]
      public V Score
      { get; set; }

      public HighScoreStruct(K initials, V score) : this() 
      {
        Initials = initials;
        Score = score;
      }
    }

    /// <summary>
    /// The constructor instanstiates the highscore list and 
    /// the high score struct.
    /// </summary>
    public GameHighScore()
    {
      highScoreList = new List<HighScoreStruct<string, int>>();
      scoreListHelper = new HighScoreStruct<string, int>();
    }

    /// <summary>
    /// This method creates the list of scores to be stored to the disk.
    /// </summary>
    /// <param name="scoreList"></param>
    public void CreateGameHighScore(List<KeyValuePair<string, int>> scoreList)
    {

      for (int i = 0; i < scoreList.Count; i++)
      {
        scoreListHelper = new HighScoreStruct<string, int>(scoreList[i].Key, scoreList[i].Value);
        highScoreList.Add(scoreListHelper);
      }
    }
  } 
```

生成的 XML 文档

```
<?xml version="1.0"?>
<GameScore xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Scores>
    <HighScore>
      <Initials>ZZZ</Initials>
      <Score>53125</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>50000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>45000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>40000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>35000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>30000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>25000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>20000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>15000</Score>
    </HighScore>
    <HighScore>
      <Initials>AAA</Initials>
      <Score>10000</Score>
    </HighScore>
  </Scores>
</GameScore> 
```

**编辑**

上面的 XML 文档是通过序列化我的帮助类生成的。

这`stream`是从 Nick Gravelyn 的 EasyStorage 库中获得的：

```
/// <summary>
/// Loads a file.
/// </summary>
/// <param name="containerName">The name of the container from which to load the file.</param>
/// <param name="fileName">The file to load.</param>
/// <param name="loadAction">The load action to perform.</param>
public void Load(string containerName, string fileName, FileAction loadAction)
{
  VerifyIsReady();

  // lock on the storage device so that only one storage operation can occur at a time
  lock (storageDevice)
  {
    // open a container
using (StorageContainer currentContainer = OpenContainer(containerName))
{
      // attempt the load
  using (var stream = currentContainer.OpenFile(fileName, FileMode.Open))
  {
    loadAction(stream);
  }
}
  }
} 
```

我的完整加载方法如下： 注意：保存设备只是我的 EasyStorage 保存设备的一个实例。

```
public static void Load()
{
  if (Global.SaveDevice.IsReady)
  {
    if (Global.SaveDevice.FileExists(Global.containerName, Global.filename_highscores_xml))
    {
      Global.SaveDevice.Load(
        Global.containerName,
        Global.filename_highscores_xml,
        stream =>
        {
          try
          {
            //stream.Position = 0;
            GameHighScore highScoreHelper = new GameHighScore();

            XmlSerializer deserializer = new XmlSerializer(typeof(GameHighScore));
            highScoreHelper = (GameHighScore)deserializer.Deserialize(stream);

            for (int i = 0; i < highScoreHelper.highScoreList.Count; i++)
            {
              highScore[i] = new KeyValuePair<string, int>(highScoreHelper.highScoreList[i].Initials, highScoreHelper.highScoreList[i].Score);
            }
          }
          catch (Exception e)
          {
            //if (!Global.SaveDevice.IsBusy && Global.SaveDevice.IsReady)
            //  Global.SaveDevice.DeleteAsync(Global.containerName, Global.filename_highscores_xml);
            //Save();
            Logger.LogError("Score.Load", e);
          }
        });
    }
    else
    {
      Save();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:52:39.043

我刚刚使用了您发布的代码，它有效

```
GameHighScore highScoreHelper = new GameHighScore();

using (var stream = new FileStream("GameScore.xml", FileMode.Open))
{
    XmlSerializer deserializer = new XmlSerializer(typeof(GameHighScore));
    highScoreHelper = (GameHighScore)deserializer.Deserialize(stream);

    for (int i = 0; i < highScoreHelper.highScoreList.Count; i++)
    {
        Console.WriteLine(new KeyValuePair<string, int>(highScoreHelper.highScoreList[i].Initials, highScoreHelper.highScoreList[i].Score));
    }
} 
```

顺便提一句。文件的编码是 UTF-8，VS 就是这么做的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:02:00.140

尝试使用 LINQ 填充字典：

```
//initialize the dictionary
var dict = new Dictionary<string, string>();

//populate the dictionary with the xml document
doc.Descendants("HighScore")
    .Select(x => dict[x.Element("Initials").Value] = x.Element("Score").Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:41:58.070

[XML 文档中存在错误](http://social.msdn.microsoft.com/Forums/pl-PL/xmlandnetfx/thread/f5a5ff54-3743-400c-b14d-92dae95f3605)...指出

> 写入流后，它位于末尾...如果您尝试从同一流中读取，则找不到根元素...您需要重新定位流...

或者可能是这个 SO question[在反序列化期间出现错误](https://stackoverflow.com/questions/5099476/there-is-an-error-in-xml-document-0-0-during-deserialization)。

> 应该是 FileMode.Open 而不是 FileMode.Create

# .net - 如何将方法 ReturnType 与预定义类型进行比较

> ID：10106952
> 
> 赞同：12
> 
> 时间：2012-04-11T13:31:50.340
> 
> 标签：.net, roslyn

使用 Microsoft Roslyn 我试图确定方法返回类型是否为 void。
我的 MethodDeclarationSyntax 上有句柄，可以看到名为“ReturnType”的属性，这是一个 void 的 PredefinedType。我是否必须实际检查关键字种类？有一个更好的方法吗？

```
((PredefinedTypeSyntax)methodDec.ReturnType).Keyword.Kind  != SyntaxKind.VoidKeyword 
```

有没有推荐的方法来完成我想做的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T16:15:47.870

因为`void`，那是完美的，因为没有其他方式可以说。`System.Void`那里明确禁止说。

对于其他预定义类型`int`，请记住，您可以使用关键字或 .NET 类型编写它`System.Int32`。根据您的情况，您可能实际上需要区分它们，因此语法检查仍然是正确的。如果您不关心差异并且只想知道它是否是整数，那么您应该使用 a 进行一些绑定`SemanticModel`：

```
var methodSymbol = (MethodSymbol)semanticModel.GetDeclaredSymbol(methodDecl);
if (methodSymbol.ReturnType.SpecialType == SpecialType.System_Int32)
{
    /* ...whatever goes here */
} 
```

`MethodSymbol`还有一个`ReturnsVoid`属性，如果你碰巧有它的符号，你可能会发现它很有用。

# c# - Cron 表达式每周下午 3 点执行 cron 触发器，从 2012 年 4 月 25 日开始

> ID：10106956
> 
> 赞同：1
> 
> 时间：2012-04-11T13:32:03.790
> 
> 标签：c#, .net, quartz-scheduler, crontrigger, cronexpression

我需要创建一个 cron 触发器表达式，该表达式应在每周下午 3 点触发，并从 2012 年 4 月 25 日开始。

请注意我正在使用 CronTriggerImpl 并且我想在 C# DotNet 中使用它。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T14:52:15.713

表达式具有格式

```
sec min hour DayOfMonth Month DayOfWeek Year 
```

所以用3个表达式你应该能够得到你想要的。

```
0 0 3 25-30 4   0 2012    
0 0 3 *   5-12  0 2012
0 0 3 *   *   0 2013-2099 
```

第 1 行表示：2012 年 4 月 25 日，每周第一天下午 3 点

第 2 行表示： 每周第一天下午 3 点，每月任何一天的下午 3 点，大于或等于 2012 年的 5 月

第 3 行表示：在大于或等于 2013 年的一年中任何一个月的任何一个月的任何一天的一周的第一天下午 3 点。

否则只需使用简单的表达式

```
0 0 3 * * 0 * 
```

结合

```
newTrigger().startAt(new DateTime("2012-04-25")) 
```

免责声明：我实际上并没有尝试过。:)

编辑：我不确定石英是否喜欢开放范围......所以它们现在关闭了。

# jquery - jQuery时间线

> ID：10106961
> 
> 赞同：0
> 
> 时间：2012-04-11T13:32:08.973
> 
> 标签：jquery, slide, timeline

我需要创建一个类似于以下站点上的时间线模块页面顶部显示带有时间线功能的幻灯片是否有现成的使用 jquery 插件来执行此操作？

这[是链接](http://global.burton.com/on/demandware.store/Sites-Burton_GLOBAL-Site/default/Team-Rider?rid=shaun-white)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:47:38.043

您可以将[jQueryUI Slider](http://jqueryui.com/demos/slider/)与自定义样式一起使用。如果要更改图像，请使用 change 事件

# tfs - 是否可以在 TFS 中恢复状态设置为已删除的任务？

> ID：10106962
> 
> 赞同：5
> 
> 时间：2012-04-11T13:32:09.203
> 
> 标签：tfs

如果有人在 TFS 2010 中不小心将任务的状态设置为“已删除”，有没有办法恢复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T14:50:26.650

~~如果您刚刚将其更改`Status/State`为已**删除**，您应该能够创建一个新查询并搜索已删除的工作项。~~

 ~~> 转到My Queries，右键单击-> New Query，将最后一项调整为State = Removed，然后单击Run~~ 

从查询结果中，您可以打开任务并将状态/状态更改为适当的状态/状态

~~*这假定您的工作项类型定义允许状态返回到已删除以外的状态*~~

**编辑**

如果要更改`Task`默认 scrum 模板中 a 的行为，则必须修改`Task.xml`位于下的

```
C:\Program Files (x86)\Microsoft\Microsoft Visual Studio Scrum 1.0\Process Template\WorkItem Tracking\TypeDefinitions 
```

打开文件并添加位于下的附加`<TRANSITION/>`元素`<TRANSITIONS/>`

```
<TRANSITION from="Removed" to="To Do">
  <REASONS>
    <DEFAULTREASON value="Added back into the backlog" />
  </REASONS>
</TRANSITION> 
```

[保存文件并使用TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)更新修改后的任务工作项类型定义。这将覆盖 Scrum Task 类型并引入从**Removed**到**To Do的新转换**

从那里您只需运行查询即可找到已**删除**的任务并更改状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T10:38:09.743

您还可以复制工作项以在待办事项状态下创建此项目的完整副本。这是一种解决方法，但更简单，更快捷。您可以通过以下方式做到这一点：

*   打开工作项。
*   单击菜单上的工具。
*   选择“创建工作项的副本”

# ms-word - Word Mail-Merge 未正确显示经过的秒数

> ID：10106964
> 
> 赞同：0
> 
> 时间：2012-04-11T13:32:11.577
> 
> 标签：ms-word, mailmerge

我正在 Word 2010 中使用 Excel 2010 文件作为数据源进行邮件合并。除了计算“经过时间”的字段外，一切正常。

在 Excel 中，该字段正确显示：193 秒显示为 00:03:13 - 三分十三秒。

当我在 Word 中插入该字段时，它显示为一天中的时间：12:03:05 AM

是否有在 Word 中正确格式化的 MERGEFIELD 代码？我还没有找到一个。如果有解决方法，我也有兴趣听到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:19:36.327

将日期格式开关添加到您的字段，如下所示：

```
{ MERGEFIELD mydate \@mm:ss } 
```

# android - 如何在 ndk 应用程序中链接任何库

> ID：10106965
> 
> 赞同：7
> 
> 时间：2012-04-11T13:32:14.850
> 
> 标签：android, c, makefile, android-ndk, java-native-interface

从[本教程](http://marakana.com/forums/android/examples/49.html)。

看到我有一个名为 as 的预构建静态库`stackoverflow.a` ，它有`stackoverflow.h`

现在我想使用该静态库的功能

`ndk_demo.c` //那个教程有这个文件

对于里面`ndk_demo.c`我已经添加了

```
#include 'stackoverflow.h' 
```

* * *

**编辑**

```
inside `android-ndk-r7c`
         |
        apps
         |
        ndk_demo
         |
     -----------------
     |               |
   project          Application.mk
     |
--------------------
|                   |
all other           |
folder             jni
                    |  
-------------------------------------------------------------------
  |               |                     |          |              |
ndk_demo.c      stackoverflow.h        lib    com_marakana       Android.mk
                                        |      _NativeLib.h
                                        |
                             --------------------
                             |                   |
                          Android.mk          libstackoverflow.a 
```

现在**应用程序.mk**

```
APP_PROJECT_PATH := $(call my-dir)/project
APP_MODULES      := ndk_demo stackover 
```

现在**jni/Android.mk**

```
include $(call all-subdir-makefiles)
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := ndk_demo
LOCAL_SRC_FILES := ndk_demo.c
LOCAL_STATIC_LIBRARIES := stackover
include $(BUILD_SHARED_LIBRARY) 
```

现在**jni/lib/Android.mk**

```
 LOCAL_PATH := $(call my-dir)
   include $(CLEAR_VARS)
   LOCAL_MODULE := stackover
   LOCAL_SRC_FILES := libstackoverflow.a
   include $(PREBUILT_STATIC_LIBRARY)
   LOCAL_PATH := $(call my-dir) 
```

现在从`android-ndk-r7c`我运行的目录

```
make APP=ndk_demo 
```

它向我显示错误

```
Android NDK: Building for application 'ndk_demo'    
make: *** No rule to make target `build/core/ndk_demo.c', needed by `out/apps/ndk_demo/armeabi/objs/ndk_demo/ndk_demo.o'.  Stop. 
```

为什么发生这种情况我没有得到？

如果我评论

```
#include $(call all-subdir-makefiles) 
```

从那时`jni/Android.mk`起它显示以下错误

```
Android NDK: Building for application 'ndk_demo'    
Compile thumb  : ndk_demo <= ndk_demo.c
SharedLibrary  : libndk_demo.so
./out/apps/ndk_demo/armeabi/objs/ndk_demo/ndk_demo.o: In function `Java_com_marakana_NativeLib_hello':
/home/jeegar/android-ndk-r7c/apps/ndk_demo/project/jni/ndk_demo.c:10: undefined reference to `stackoverflowInit'
collect2: ld returned 1 exit status
make: *** [out/apps/ndk_demo/armeabi/libndk_demo.so] Error 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T02:21:02.640

当你得到“make: *** No rule to make target `something.c'”时，它只是意味着它找不到文件。

我有点困惑你为什么要这样组织你的项目，但如果我要构建你的项目，我会这样做：

```
(doesn't matter which directory)
|
-->(ndk_demo)
-->-->(jni)
-->-->-->Application.mk
-->-->-->Android.mk
-->-->-->com_marakana_NativeLib.h
-->-->-->ndk_demo.c
-->-->(stackoverflow)
-->-->-->stackoverflow.h
-->-->-->libstackoverflow.a 
```

然后我会使用以下makefile：

**安卓.mk：**

```
LOCAL_PATH := $(call my-dir)

### include stackoverflow as a prebuilt lib ###

include $(CLEAR_VARS)

LOCAL_MODULE            := stackoverflow-prebuilt
LOCAL_SRC_FILES         := ../stackoverflow/libstackoverflow.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../stackoverflow

include $(PREBUILT_STATIC_LIBRARY)

### build your ndk lib ###

include $(CLEAR_VARS)

LOCAL_MODULE := ndk_demo
LOCAL_C_INCLUDES := $(LOCAL_PATH) \
                    $(LOCAL_PATH)/../stackoverflow
LOCAL_SRC_FILES := ndk_demo.c

LOCAL_LDLIBS := -llog
LOCAL_STATIC_LIBRARIES := stackoverflow-prebuilt

include $(BUILD_SHARED_LIBRARY) 
```

以及以下内容：

**应用程序.mk：**

```
APP_MODULES := ndk_demo
APP_PLATFORM := android-8 
```

最后，我将导航到目录 (ndk_demo) 并运行 ndk-build。

ndk-build 是 android 的构建工具。你应该使用它。可以在以下位置找到：

```
(AndroidSDK)/(NDK)/ndk-build 
```

如果您使用的是 Windows，则必须在控制台中输入 ndk-build 的完整路径，或者在尝试运行之前将环境变量添加到系统中。

[http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/](http://www.windows7hacker.com/index.php/2010/05/how-to-addedit-environment-variables-in-windows-7/)

# c# - 从窗口获取线程 ID

> ID：10106966
> 
> 赞同：1
> 
> 时间：2012-04-11T13:32:17.970
> 
> 标签：c#, winforms, winforms-interop

我需要使用此代码从运行时创建的窗口中获取线程 ID

```
System.Windows.Window MyWindow = new System.Windows.Window();
MyWindow.Show(); 
```

我正在使用窗口处理程序

```
IntPtr WindowHandle = (new WindowInteropHelper(MyWindow)).Handle; 
```

如何从窗口或其对应的处理程序中获取线程 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T13:35:49.627

看一下[GetWindowThreadProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx)方法

根据 MSDN

> 检索创建指定窗口的线程的标识符，以及（可选）创建窗口的进程的标识符。

# android - 如何将视图/布局膨胀到另一个子布局中？

> ID：10106970
> 
> 赞同：0
> 
> 时间：2012-04-11T13:32:21.100
> 
> 标签：android

我需要在 android 的子布局中添加膨胀布局。

例如

我正在使用布局 a、b、c、d。

我需要在 c 布局中设置膨胀布局。

可以设置子布局的布局吗？

谢谢！！问候， 阿尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:35:18.627

当然！我要在这里记忆，所以实际的代码可能会有所不同。布局应该有一个`addView(View v)`方法。如果你想添加`View b`到`View a`，你应该能够做到`a.addView(b);`

# gwt - 如何使用 LocaleInfo 获取 GWT 中的当前语言环境

> ID：10106973
> 
> 赞同：4
> 
> 时间：2012-04-11T13:32:28.400
> 
> 标签：gwt, locale

我尝试使用 LocaleInfo 类和 getCurrentLocale() 方法获取客户端上的当前语言环境。但是，无论我在客户端计算机上有什么区域和语言环境设置，它总是返回值默认语言环境。

Date 类 toLocaleString() 方法返回特定于区域设置的字符串，但 LocaleInfo 似乎无法获取系统区域设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T16:05:11.560

要让您的 GWT 应用程序自动检测您的语言环境，只需将您的基本 index.html 文件（包含“nocache.js”脚本的文件）重命名为 index.jsp 并将以下行添加到该部分：

```
<meta name="gwt:property" content="locale=<%=request.getLocale()%>"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T16:24:03.817

GWT 的语言环境不会自动从系统/浏览器设置中获取。根据[GET 语言环境文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)，可以通过以下两种方式之一设置运行时使用的语言环境：

1.  `locale`通过在应用程序的 URL 中指定请求参数。IE`http://www.myapplication.com/?locale=es`
2.  通过在主机页面中包含`gwt:property`元标记：

    `<meta name="gwt:property" content="locale=es" />`

    这是生产应用的首选方法。您的主机页面可以通过多种方式确定用户的语言环境，包括但不限于允许用户配置本地或根据[`Accept-Language`请求标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4)检测他们的首选语言环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T07:39:36.393

*在 JavaScript 中准确获取用户的语言环境*几乎是不可能的，因此 GWT 甚至没有尝试 [1]。
`LocaleInfo`返回有关您在应用程序**中编译的语言环境中选择的语言环境的信息；**也就是说，您`<extend-property name="locale" ... />`在`*.gwt.xml`.

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nLocale)

[1] 好吧，在最近的版本中，它确实尝试（使用浏览器的*编译时*语言环境），但只选择其中一个编译的语言环境，因此不会改变`LocaleInfo`.

# java - 在谷歌网络应用程序中从 servlet 发送电子邮件

> ID：10106975
> 
> 赞同：0
> 
> 时间：2012-04-11T13:32:28.763
> 
> 标签：java, google-app-engine, servlets, sendmail

我创建了一个谷歌网络应用程序，我想从中发送电子邮件。我创建了以下发送邮件的方法，效果很好。

```
public void send(String recipient) throws Exception {
    Properties props = new Properties();

    props.put("mail.transport.protocol", "smtps");
    props.put("mail.smtps.host", SMTP_HOST_NAME);
    props.put("mail.smtps.auth", "true");
    props.put("mail.smtps.quitwait", "false");

    Session mailSession = Session.getDefaultInstance(props);
    mailSession.setDebug(true);
    Transport transport = mailSession.getTransport();

    MimeMessage message = new MimeMessage(mailSession);
    message.setSubject(MESSAGE_SUBJECT);
    message.setContent(MESSAGE_BODY, "text/plain");

    message.addRecipient(Message.RecipientType.TO, new InternetAddress(
            recipient));

    transport.connect(SMTP_HOST_NAME, SMTP_AUTH_USER, SMTP_AUTH_PWD);

    transport.sendMessage(message,
            message.getRecipients(Message.RecipientType.TO));
    transport.close();
} 
```

但是当我尝试从 Web 应用程序中的 servlet 调用它时，我得到以下信息：

```
HTTP ERROR 500

Problem accessing /tokenAndSecret. Reason:

    javax.net.ssl.SSLSocketFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.

Caused by:

java.lang.NoClassDefFoundError: javax.net.ssl.SSLSocketFactory is a restricted class. Please see the Google  App Engine developer's guide for more details.
        at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
        at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:279)
        at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
        at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900)
        at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
        at javax.mail.Service.connect(Service.java:248)
        at javax.mail.Service.connect(Service.java:91)
        at com.sirma.itt.saas.api.mail.SSLMailSender.send(SSLMailSender.java:64)
        at com.sirma.itt.saas.app.servlets.TokenAndSecretServlet.doGet(TokenAndSecretServlet.java:71)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:363)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

知道是什么原因造成的，如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:38:14.430

App Engine 不支持打开套接字。相反，请使用[Mail Api](https://developers.google.com/appengine/docs/java/mail/)从 App Engine 发送邮件。

# sql-server - Microsoft Sync Framework - 性能和可扩展性

> ID：10106978
> 
> 赞同：3
> 
> 时间：2012-04-11T13:32:55.670
> 
> 标签：sql-server, performance, sql-server-2008, scalability, microsoft-sync-framework

我正在尝试在 SQL Server 数据库上使用 Microsoft Sync Framework 2.1。将有大量并发最终用户，与中央数据库服务器同步。

进一步的规格是：

*   1500 个并发客户端连接到 1 个中央数据库服务器
    *   客户正在使用 MS SQL Server Express 2008 R2
    *   服务器正在使用 MS SQL Server Enterprise 2008 R2
*   同步间隔短（大约 5 分钟）
*   数据库大小为 5 GB
*   Web 服务将用作服务器端 SyncProvider

有没有人有类似这样的 Sync Framework 环境的经验？

*   是否可以？
*   实施时需要考虑哪些重要事项？
*   我可以预期的物理限制是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T03:06:46.577

一些事情要记住：

1.  范围数 - 您可能希望为客户端与服务器保持 1 比 1 的范围比率，而不是 1500 个客户端范围与一个服务器范围。这将每个客户端的同步知识彼此隔离，您甚至可以删除并重新创建客户端范围而不影响其他范围。同步知识也将非常紧凑。

2.  范围定义 - 不要在一个范围内转储所有表。不同的表具有不同的特性（例如，仅下载、只读、更新频率较低、更新频率高等）。根据表的特征对表进行分组。

3.  批处理 - 如果更改很小，请不要批处理。您会在批处理中产生性能开销，因为批处理必须写入文件，并且稍后，它必须从文件中重构更改数据集。

4.  元数据清理 - 设置元数据保留和元数据清理过程。这应该会减少同步元数据（跟踪表中的行和同步知识）。

5.  WCF 配置 - 注意您的 WCF 配置条目，例如超时、消息大小等...也要注意这个问题：http: [//support.microsoft.com/kb/2567595](http://support.microsoft.com/kb/2567595)

编辑：

此外，请在此处查看其他范围注意事项：[同步框架范围和 SQL Azure 数据同步数据集注意事项](http://jtabadero.wordpress.com/2012/03/01/sync-framework-scope-and-sql-azure-data-sync-dataset-considerations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:05:07.513

此处提供的示例：[http ://www.rajneeshnoonia.com/blog/2012/03/n-tier-sync-framework/](http://www.rajneeshnoonia.com/blog/2012/03/n-tier-sync-framework/)

有什么接近你的要求吗

1:1 范围定义 => 我们定义模板并基于此模板为每个客户端配置范围。在此 senerio 中，T1 在 S1 和 S2 中定义，但是过滤器用于识别每个范围的行级记录。

# svn - 颠覆转储最后的“n”修订

> ID：10106983
> 
> 赞同：5
> 
> 时间：2012-04-11T13:33:18.753
> 
> 标签：svn

我正在尝试使用...从 SVN 存储库中转储最后 500 个修订版（重新导入为新存储库）...

```
svnadmin dump /path/to/repos > dump.dmp -r2000:HEAD 
```

但转储似乎没有停止，转储文件的大小达到 3gb（完整的转储 1:HEAD 只有 600mb）

我在这里做错了什么？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T12:15:54.783

尝试以下操作：

```
svnadmin dump -r2000:HEAD /path/to/repos > dump.dmp 
```

# c# - 通过考虑 NULL 来修剪文本框值

> ID：10106984
> 
> 赞同：-1
> 
> 时间：2012-04-11T13:33:22.090
> 
> 标签：c#, asp.net, .net, visual-studio

你能告诉我 TrimNull() 是否是多余的，我是否应该使用替代方案？

例如：

```
string username = UsernameTextBox.Text.TrimNull(); 
```

我被告知没有定义或扩展方法。也许我缺少一个参考？

**更新**：

如果值为 NULL `readable`，返回的最多方法是什么？`empty string`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T13:36:30.123

没有这样的功能`TrimNull(String)`- 它不会做任何事情。字符串要么为空，要么为非空，不能同时包含两者。如果字符串为空，则静态函数`TrimNull(myString)`将无法从字符串中“删除”任何内容。如果它不为空，则不会`NULL`删除。更糟糕的是，如果 TrimNull 是一个实例方法，如果 myString 是一个实例方法，则`myString.TrimNull()`只会导致异常`NULL`- 因为您不能在空引用上调用任何方法。

*   如果您的目标是修剪字符串周围的空白字符，只需使用`myString.Trim()`.

*   如果您的目标是检测字符串是否为空，请使用`myString == NULL`

*   如果您的目标是检测字符串是空的还是空的，请使用`String.IsNullOrEmpty(myString)`

*   如果您的目标是从数据流中修剪尾随空字符 ( `\0`)，请尝试以下操作：

    `myString.TrimEnd(new char[] { '\0' } )`

但正如 Frédéric Hamidi 所说，如果您指的是后者，用户将很难将空字符放入 TextBox，因此您在处理他们的输入时不必担心这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T13:36:21.293

我通常使用 String.IsNullOrWhiteSpace()，像这样：

```
string username = (String.IsNullOrWhiteSpace(UsernameTextBox.Text) ? 
    null : UsernameTextBox.Text.Trim()); 
```

这样，如果`.Text`属性为 null，则不会导致异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T13:47:44.243

如果您愿意，您可以为此创建自己的扩展方法：

```
public static class StringExtensions
{
    public static string TrimNull(this string value)
    {
        return string.IsNullOrWhiteSpace(value) ? value : value.Trim();
    }
} 
```

将此添加到您的项目中，您的代码将起作用。

这只是一个替代方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:56:36.893

使用否定[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)中的@sixlettervariables 答案中提到[的空合并运算符](https://stackoverflow.com/questions/2852875/negate-the-null-coalescing-operator)

```
string username = (UsernameTextBox.Text ?? String.Empty).Trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T13:36:25.613

为 NULL 的字符串不是它的值。它是一个状态。这意味着它没有被分配内存（因为它是一个引用类型）。如果它是一个值类型的数据类型，它会被自动分配一个默认值，比如 int 它的 0 等等

你应该使用

```
if(!String.IsNullOrEmpty(UsernameTextBox.Text))
    string username = UsernameTextBox.Text.Trim(); 
```

# android - 列表适配器和数据库

> ID：10106989
> 
> 赞同：0
> 
> 时间：2012-04-11T13:33:26.003
> 
> 标签：android, listview

我有一个 zip 文件，我必须从中提取可以获取特定信息的信息。提取信息的过程大约需要 0.7 秒的估计时间。我所做的是在我的 ListAdapter 中添加一个异步类（为了创建多个线程，以便它也可以加载其他类似的线程），现在在我的异步类中它创建了多个线程，这导致数据库将信息添加到其预先存在的信息中。

现在我的问题是“如何在 listadapter 上创建异步线程而不导致数据库重复？”

这是代码：

```
Map<TextView, String> authorViews=Collections.synchronizedMap(new WeakHashMap<TextView, String>());
    Map<TextView, String> dateViews=Collections.synchronizedMap(new WeakHashMap<TextView, String>());
private class PresentInformation extends AsyncTask<Context, Void, Void>{

    private TextView Tauthor;
    private TextView Tlabel;
    String position;

    String date = null;
    String author = null;

    public PresentInformation(TextView author, TextView label, String Position) {
        // TODO Auto-generated constructor stub
        this.Tauthor = author;
        this.Tlabel = label;
        this.position = Position;
    }

    @Override
    protected Void doInBackground(Context... params) {
        // TODO Auto-generated method stub

        Boolean addToDB;

        if(author_exist(Tauthor)){
            author = getAuthorFName(position);
            addToDB = false;
        }else{
            //Declare an action to test if author does exist
            authorViews.put(Tauthor, position);
            author = getAuthor(position);
            addToDB = true;
        }
        dateViews.put(Tlabel, position);
        if(date_exist(Tlabel)){
            date = db.getDate(position);
            addToDB = false;
        }else{
            dateViews.put(Tlabel, position);
            date = date/time();
            addToDB = true;
        }

        if(addToDB){//Adds to database if they don't exist
            db.addDatabase(new Database(position, author, date));
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        if(author == null){
            author = "Author not found!";
        }
        if(date == null){
            date = "Date not found!";
        }
        Tlabel.setText(date);
        Tlabel.setText(author);
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        Tauthor.setText("Loading author please wait...");
        Tlabel.setText("Loading date please wait...");
    }

    public Boolean author_exist(TextView tv){
        String temp = authorViews.get(tv);
        if(temp ==null)
            return true;
        return false;
    }
    public Boolean date_exist(TextView tv){
        String temp = dateViews.get(tv);
        if(temp ==null)
            return true;
        return false;
    }
}

public class IconicAdapter extends ArrayAdapter<String>{

        IconicAdapter() {
            super(main.this, R.layout.bookselection_row, R.id.Book_Title, bookLocation);
            }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            View row = null;
            if(row == null)
                row =  super.getView(position, convertView, parent);

             icon=(ImageView)row.findViewById(R.id.icon);
             author = (TextView)row.findViewById(R.id.book_Author);
             date_label = (TextView)row.findViewById(R.id.label);

             String path = bookLocation.get(position);

//               Collections(path, position, author, date_label);

            new PresentInformation(author, date_label, path).execute(main.this);

            try{
                Log.i("BookString input", bookLocation.get(position));
                loadImage.Uploader(bookLocation.get(position), icon);
            }catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

            return row;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T17:43:59.600

下面是我在当前正在开发的应用程序中使用的 AsyncTask 示例。我希望它能帮助你走上正轨。

```
private class prepCombat extends AsyncTask<String, Void, String>{
        @Override
        protected String doInBackground(String... params) {
            playerBattlePrep();
            findNPC();
            return null;}
        @Override
        protected void onPostExecute(String result) {
            new layoutCombat().execute();
        }
     } 
```

然后当我想调用它时...

```
@Override
protected void onResume() {     
    new pullCombatActions().execute();
    new prepCombat().execute();
    super.onResume();} 
```

为了确保它不会继续添加相同的数据，一些 If() 语句应该可以工作。另一种选择是包含数据库中已有的数据。如果这是应该始终存在的数据，那么在程序首次运行时就已经存在它可以为您节省一些麻烦。

我看到了你的 put 语句，但我没有看到你告诉它在哪一行放置它。

```
public void updateEntry(int rowId, String str, String cha, String wis, String dex, String name, int damId, int HPId, int npcId, int attId, int dodgeId, int dreadId, int critId) throws SQLException {

        ContentValues cvUpdate = new ContentValues();
        cvUpdate.put("Str", str);
        cvUpdate.put("Cha", cha);
        cvUpdate.put("Wis", wis);
        cvUpdate.put("Dex", dex);
        cvUpdate.put("Name", name);
        cvUpdate.put("StatDam", damId);
        cvUpdate.put("StatHP", HPId);
        cvUpdate.put("HP", HPId);
        cvUpdate.put("StatNpc", npcId);
        cvUpdate.put("StatAtt", attId);
        cvUpdate.put("StatDodge", dodgeId);
        cvUpdate.put("StatDread", dreadId);
        cvUpdate.put("StatCrit", critId);
        cvUpdate.put("Rank", "0");
        cvUpdate.put("Lvl", "1");
        ...

        ContentValues csUpdate = new ContentValues();
        csUpdate.put("PlayerHp", HPId);
        csUpdate.put("CombatFlag", "0");    

    dbhelper.myDataBase.update(dbhelper.SAVE_TABLE, cvUpdate, "_id" + "="  + rowId, null);
    dbhelper.myDataBase.update(dbhelper.COMBATSAVE_TABLE, csUpdate, "_id" + "="  + rowId, null);

    } 
```

将是一种设置我将数据放入数据库中的内容和位置的方法。然后我可以通过

```
updateEntry(slot, String.valueOf(strNumber), String.valueOf(chaNumber), String.valueOf(wisNumber), String.valueOf(dexNumber), nameNumber, damId, HPId, npcId, attId, dodgeId, dreadId, critId); 
```

每当您想要执行此保存时，您都可以调用上面的代码。可能在 doInBackground()

# ios - 是否可以通过来自不同 iOS 应用程序的 URL 方案访问 CFBundleURLIconFile 中指定的图像？

> ID：10106996
> 
> 赞同：0
> 
> 时间：2012-04-11T13:33:48.237
> 
> 标签：ios, icons, url-scheme

是否可以从不同的应用程序访问 info.plist 文件中使用 CFBundleURLIconFile 指定的图标？应用程序沙盒会阻止它吗？如果是这样，这个键的目的是什么（当然是在 iOS 应用程序中）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:16:00.253

如[CoreFoundationKeys 文档](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html)中所述：*“CFBundleURLTypes 包含一个字典数组，每个字典都描述了应用程序支持的 URL 方案（http、ftp 等）。此键的用途类似于“CFBundleDocumentTypes”，但它描述的是 URL 方案而不是文档类型。”*

目的是允许应用程序注册某些类型的文档，从而允许应用程序处理从其他已安装应用程序打开文件（您肯定会遇到“打开方式...”按钮，例如当您收到文件时在邮件中） . 更多信息请参阅[iOS 文档交互编程主题。](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Introduction/Introduction.html)

编辑：对不起，我忘了回答你的主要问题：AFAIK 访问该密钥的唯一方法是通过 UIDocumentInteractionController。

# jquery - 鼠标悬停时，smooth-div-scroll 停止

> ID：10106997
> 
> 赞同：0
> 
> 时间：2012-04-11T13:33:50.047
> 
> 标签：jquery, html, smooth, smooth-scrolling

找个简单的滚动条吧，没什么特别的。我的代码：

```
<script type="text/javascript">
    // Initialize the plugin with no custom options
    $(document).ready(function () {
        // None of the options are set
        $("div#makeMeScrollable").smoothDivScroll({
            mousewheelScrolling: false,
            hotSpotScrolling: false,
            autoScrollingMode: "onstart"
        });
    });
</script> 
```

当您将鼠标悬停在 div 的右边缘时，滚动停止。发生在 Chrome 和 IE 中，否则似乎工作正常？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:20:26.000

将代码更改为：

```
<script type="text/javascript">
    // Initialize the plugin with no custom options
    $(document).ready(function () {
        // None of the options are set
        $("div#makeMeScrollable").smoothDivScroll({
            autoScrollDirection: "endlessloopright",
            autoScrollingMode: "always"
        });
    });
</script> 
```

希望这能像你预期的那样工作！

# android - 从android中的RSS提要中获取图像URL

> ID：10106999
> 
> 赞同：1
> 
> 时间：2012-04-11T13:33:54.867
> 
> 标签：android, xml, rss, rss-reader

我一直在开发 Android RSS 阅读器。我想从 RSS 提要中获取图像并将它们与 RSS 标题一起列出。我已经解析并从“标题”和“描述”标签中获取数据。谁能告诉我如何获取来自“描述”的“src”属性下方的图像URL？

```
<item>
    <title>Bollywood now more professional, but impersonal: Anupam Kher</title>
    <link>
        http://www.abcd.com/en/node/599
    </link>
    <description>
        <div class=" field field-type-filefield field-field-story-image">
            <div class="field-label">Image:&amp;nbsp;</div>
            <div class="field-items">
                <div class="field-item odd">
                    <img class="imagefield imagefield-field_story_image" width="630" height="420" alt="" src="http://www.madhyamam.com/en/sites/default/files/anumpamkher2.jpg?1334148050" />
                </div>
            </div>
        </div>
        <p>
            <strong>New Delhi: </strong>He has been part of the film industry for almost three decades.
        </p>
        <a href="http://www.abcd.com/en/node/599" target="_blank">read more</a>
    </description>
</item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T20:15:38.823

首先，在`AsyncTask`. 在此任务中，您可以简单地下载您加载的 HTML/XML 格式的图像。

在后台加载 URL 时，可以调用以下例程：

```
private Bitmap getImageFromURL(URL imgUrl){
        Bitmap bmp = null;

        try {
            HttpURLConnection conn= (HttpURLConnection)imgUrl.openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();

            bmp = BitmapFactory.decodeStream(is);
       } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
       }
       return bmp;  
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T07:43:19.743

我找到了解决方案......

```
 News news=new News();    

                        String img  = news.Description[i];
                        String cleanUp = img.substring(0, img.indexOf(">")+1);
                        img = img.substring(img.indexOf("src=") + 5);
                        int indexOf = img.indexOf("'");
                            if (indexOf==-1){
                            indexOf = img.indexOf("\"");
                           }
                        img = img.substring(0, indexOf);
                        news.image[i]=img; 
```