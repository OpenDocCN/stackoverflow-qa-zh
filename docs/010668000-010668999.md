# StackOverflow 问答 10668000-10668999

# objective-c - createFileAtPath:contents:attributes 存储一个 NSString

> ID：10668001
> 
> 赞同：4
> 
> 时间：2012-05-19T18:50:27.053
> 
> 标签：objective-c, c, nsfilemanager

对于`createFileAtPath:contents:attributes`Objective-C:`contents`需要一个`NSData`类型，但我想创建一个包含`NSString`内容的文件。我该怎么做呢？

我知道这可能是一个非常基本的答案，但我刚刚开始学习如何使用 Objective-C，与我使用的其他语言相比，它有很多不同的数据类型和对象。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:00:49.587

您可以尝试`NSData`使用字符串的内容进行创建，如下所示：

```
NSString *s = @"Hello, world!";
NSData *d = [s dataUsingEncoding:NSUTF8StringEncoding]; 
```

您还可以`NSStrng`直接将一个存储到文件中：

```
[s writeToFile:@"/my/file/path/file.txt" atomically:NO encoding:NSUTF8StringEncoding error:nil]; 
```

**注意**此答案是在 Ken Thomases 的注释之后编辑的。

# sql - 为什么在“KILL SESSION”（Oracle SQL）中需要 sid？

> ID：10668003
> 
> 赞同：7
> 
> 时间：2012-05-19T18:50:40.900
> 
> 标签：sql, oracle, sessionid

我有考试题，找不到答案。为什么`sid`必须强制执行`KILL SESSION`命令？
`KILL SESSION`语法：`ALTER SYSTEM KILL SESSION 'sid,session#[@inst_id]' [IMMEDIATE];`
其中**sid**是“唯一”会话标识符。引号中唯一，因为它在**当前时刻**是唯一的，Oracle 服务器可以有，例如会话某个 sid，但是在这个会话结束后，这个 sid 可以用于其他会话。在操作系统中`Sid`是类比。**Session#**是一个**序列**会话号；它是一个会话计数器。服务器在数据库启动时清除计数器。因此， session# 是会话的真正**唯一标识符**。`pid`

 ******我不明白为什么命令`sid`是强制性的`KILL SESSION`。我认为，可以`session#`只使用。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T19:25:03.000

您需要 SID 和 SERIAL#。甲骨文[参考](http://docs.oracle.com/cd/F49540_01/DOC/server.815/a67790/ch3.htm#9225)有这样的说法：

> **SID** 会话标识符
> 
> **SERIAL#** 会话序列号。用于唯一标识会话的对象。如果会话结束并且另一个会话以相同的会话 ID 开始，则保证会话级命令应用于正确的会话对象

因此，虽然 SID 是唯一的，但它可以重复使用。所以我想添加一个 SERIAL# 将确保您不会终止一个新连接的会话，该会话恰好使用您试图终止的相同 SID（如果它们在您执行命令之前已经断开连接）。

更新以回应陪审团的评论：

我不能说为什么它是这样实现的，只是我根据文档对实现的理解：SID 是可重用的，SID 中的 SERIAL# 不是。所以，举个例子：

*   [1,1] JOE 连接并被分配 SID 1, SERIAL# 1
*   JOE 断开连接
*   [1,2] TOM 连接并分配 SID 1（重用），但 SERIAL# 递增为 2
*   [2,1] SUSAN 连接并被分配 SID 2, SERIAL# 1

为什么要执行此操作？保持数字大小易于管理，也许？尽量减少争吵？重用已分配的资源（由 SID 表示）？我不知道。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T14:21:53.087

我找到了！序列`serial#`是循环的。`int`如果使用了 20 亿次登录，或者如果使用了 32k次，号码将被重新`short`使用。因此，不使用`serial#`其他任何东西并不能提供**真正独特的**枚举。
但`sid`在一瞬间是独一无二的。所以，pair`sid,serial#`真的**很独特**。
您不能使用`serial#`或`sid`管理会话，您应该成对使用它。

感谢您的时间！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-27T15:14:51.183

我知道这是一个老话题，但我想指出 serial# 本身甚至不接近唯一标识符，即使在特定时间点也是如此。

```
SQL> select serial#, count(*) from v$session group by serial#;

   SERIAL#   COUNT(*)
---------- ----------
         1         15
       983          1
         2          1
       505          1
         5          2
      7076          1
         7          2
        58          1
         3          3
         9          1
     22160          1

11 rows selected. 
```

在我目前数据库中的 29 个会话中，只有 11 个不同的序列号。

EDIT: And this is a single instance database. In a RAC environment, you need to include the instance ID to get a truly unique session, from what I understand (I've never personally worked with a RAC database).******

# buddypress - Buddypress 从 bp-members-adminbar.php 获取链接

> ID：10668006
> 
> 赞同：0
> 
> 时间：2012-05-19T18:50:54.500
> 
> 标签：buddypress

我想知道是否可以从 bp-members-adminbar.php 获取链接

我在文件中找到了此代码，它是指向我的帐户的链接 - 我的个人资料页面，但我希望该链接位于网站中，而不是 bp 栏中

// 用户管理 > 编辑此用户的个人资料

```
$wp_admin_bar->add_menu( array(
    'parent' => $bp->user_admin_menu_id,
    'id'     => 'edit-profile',
    'title'  => __( "Edit Profile", 'buddypress' ),
    'href'   => bp_get_members_component_link( 'profile', 'edit' )
) ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:47:35.143

试试这个：

```
<a href="<?php echo bp_loggedin_user_domain() ?>profile/edit">Edit Profile</a> 
```

# android - sqlite数据库中不能插入多条记录

> ID：10668017
> 
> 赞同：-1
> 
> 时间：2012-05-19T18:58:14.490
> 
> 标签：android

我将数据插入到 sqlite 数据库表中，当我插入第一条记录时，它插入成功，但第二条和所有下一条记录都没有插入。这是我的数据库助手类。我在 Firefox 的 sqlite manager 中尝试了相同的查询，它们工作正常。我不知道为什么他们不在我的代码中工作。

```
 private static final String DATABASE_CREATE = "create table " + DATABASE_TABLE + "( " + KEY_ROWID +
        " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_DESCRIPTION + " text, "+ KEY_WHY+" text , "+ KEY_ACCOUNTABILITY+
        " text , "+KEY_ALARM_TYPE+" text , "+KEY_ALARM_VOLUME+" text,  "+KEY_BG_IMAGE+" text, "+KEY_CATEGORY+"  text, "+KEY_DATE_TIME+  " datetime "+" , "+KEY_STATUS+" text );";
    public void addRecord(String description,String why, String accontability, String alarm_type,
            String alarm_vol, String bg_image, String category, Date goalDateTime,String status) {
        String query = "INSERT INTO " + DATABASE_TABLE + " VALUES(null,'"+ description + "', '" + why +  "', '" + accontability +"','" + alarm_type +
                "', '" + alarm_vol +  "', '" + bg_image +"','" +category+ "','" +  goalDateTime +"','"+status+"');";
        Log.v("--->", query);
        try{
        mDB.execSQL(query);

    } catch (Exception ex) {
        Log.v("database error", ex.toString());

    }
    } 
```

在这里我在表中添加数据

```
 try {
        /*
         * dbHelper = new GoalDbAdapter(this); dbHelper.open();
         * Log.v("database ","database opened"); // dbHelper. fillData();
         */
        db = new GoalDbAdapter(this);
        db.open();
        String imagePath = pref.getValue("imagePath", "");
        String goalCateg = pref.getValue("categText", "");
        String vol = pref.getValue("vol", "");
        String alarmType=  pref.getValue("ringTonePath", "");
        db.addRecord(goal_desc, goal_why, accountability, alarmType, vol, imagePath, goalCateg, goalDate,"");
         cursor = db.getTop3Goals();
        Log.v("cursor count in add act",".."+cursor.getCount());
        cursor.close();
        db.close();
    } catch (Exception ex) {
        Log.v("database error", ex.toString());

    } 
```

这是我获取目标的代码，我无法获取所有数据，它只返回第一个目标而不返回其他目标。所有这些方法都只返回第一个目标。

```
 public Cursor getGoals() {
    Cursor c_all = mDB.rawQuery("SELECT * FROM " + DATABASE_TABLE, null);
    int count= c_all.getCount();
    Log.v("cursor count in db all goals", c_all.getCount()+"..");
    c_all.moveToFirst();
    return c_all;
}

//SELECT * FROM table ORDER BY date DESC LIMIT 5

public Cursor getTop3Goals() {
    Cursor c = mDB.rawQuery("SELECT * FROM " + DATABASE_TABLE + " ORDER BY "+ KEY_DATE_TIME + " DESC LIMIT 3", null);
    c.moveToFirst();
    return c;
}

public Cursor getGoalsByDate() {
    Cursor c = mDB.rawQuery("SELECT * FROM " + DATABASE_TABLE + " ORDER BY "+ KEY_DATE_TIME + " DESC ", null);
    c.moveToFirst();
    return c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:09:24.107

尝试像这样更改您的插入方法：

```
 public void addRecord(String description,String why, String accontability, String alarm_type,
                    String alarm_vol, String bg_image, String category, Date goalDateTime,String status){

      ContentValues initialValues = new ContentValues();

      initialValues.put(KEY_DESCRIPTION , description);
      initialValues.put(KEY_WHY, why);
      initialValues.put(KEY_ACCOUNTABILITY, accontability);
      initialValues.put(KEY_ALARM_TYPE, alarm_type);

      initialValues.put(KEY_ALARM_VOLUME, alarm_vol);
      initialValues.put(KEY_BG_IMAGE, bg_image);
      initialValues.put(KEY_CATEGORY, category);
      initialValues.put(KEY_DATE_TIME, goalDateTime);
      initialValues.put(KEY_STATUS, status);

      long rowId = mDB.insert(DATABASE_TABLE , null, initialValues);

} 
```

`rowId`是新记录的行 ID 号。

**编辑：** 尝试下一个代码：

```
public Cursor getGoals() {
    Cursor cursor = mDB.query(DATABASE_TABLE, null, null, null, null, null, null);

        if ((cursor != null) && (cursor.getCount() > 0)) {
            cursor.moveToNext();

            return cursor;
        }

    return null;
} 
```

# python - 如何使用不受支持的语言？

> ID：10668018
> 
> 赞同：0
> 
> 时间：2012-05-19T18:58:19.277
> 
> 标签：python, django, localization

我可以切换到`ru`and `en`，但是当我尝试切换到 时`hy`，什么也没有发生。

*设置.py*

```
...
LANGUAGE_CODE = 'en'

LANGUAGES = [
    ('en',_('English')),
    ('ru', _(u'Russian')),
    ('hy', _(u'Armenian')),
] 
```

*边栏.html*

```
...
<div id="sidebar-item-news">
        <form action="/i18n/setlang/" method="post" id="language-select">
            <input name="next" type="hidden" value="/" />
            {% csrf_token %}
            <select name="language">
                {% for lang in LANGUAGES %}
                    <option value="{{ lang.0 }}">{{ lang.1 }}</option>
                {% endfor %}
            </select>
            <input type="submit" value="Go" />
        </form>
</div> 
```

*网址.py*

```
# Internationalization
    (r'^i18n/', include('django.conf.urls.i18n')), 
```

经过一些调试后，我发现 request.session['django_language'] 仅更改为`ru`and `en`：

```
Current language is ru
[19/May/2012 22:51:55] "GET / HTTP/1.1" 200 13357
[19/May/2012 22:51:56] "POST /i18n/setlang/ HTTP/1.1" 302 0
Current language is ru
[19/May/2012 22:51:56] "GET / HTTP/1.1" 200 13357 
```

我有所有编译过的翻译文件`/locale/hy`和`/locale/ru`

如果我把它放在主视图中`translation.activate('hy')`，它工作得很好，但是如果我尝试用我的 api 来做到这一点

```
def api(request, type):
    if request.method == 'POST':
        if type == 'daytime':
            request.session['daytime'] = request.POST['daytime']
            return HttpResponse(request.session['daytime'])

        if type == 'language':
            request.session['custom_language'] = True
            request.session['django_language'] = request.POST['language']
            translation.activate(request.session['django_language'] )
            return HttpResponse(request.session['django_language'])
        raise Http404
    else:
        raise Http404 
```

`i18n/setlang`它作为形式失败。

如何解决这个问题？

**UPD** 似乎 Django 不**支持**亚美尼亚语。（/django/conf/locale/ 中没有“hy”）我应该如何使用这种语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:17:08.620

请参阅i18n 文档中的[区域设置限制](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#localization-how-to-create-language-files)部分。看起来你需要稍微修改一下 Django。

# playframework - 如何在 playframework 中为 ebean SqlLimiter 使用不同的实现

> ID：10668021
> 
> 赞同：5
> 
> 时间：2012-05-19T18:58:51.580
> 
> 标签：playframework, playframework-2.0, ebean

我在后面使用 ebean 作为 ORM 和 SQL Server。尝试 setMaxRows 时出现 SQL 语法错误异常。生成的 sql 有类似的东西

```
select .... from ... where ... LIMIT 5 
```

虽然这可能适用于 mysql，但 SQLServer 不喜欢它。

经过一番搜索，我发现EBean使用的默认SqlLimiter，LimitOffsetSqlLimiter，创建这样的sql。我想知道我是否可以配置 ebean 以便它可以使用其他实现，例如 RowNumberSqlLimiter，甚至我自己的实现，如此处提到[的](https://groups.google.com/group/ebean/browse_thread/thread/99c1b8d3cb82b7e8)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:00:49.283

目前这是不可能的。如果您查看[此处](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/db/ebean/EbeanPlugin.java)的代码，您会发现 ServerConfig 仅获取可加载的类。但是由于禁用 ebean 非常容易，只需禁用插件，自己滚动并将其添加到 play.plugins。然后，您可以以任何合适的方式转换 ServerConfig。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-18T21:40:55.423

这是一个老问题，请注意 Ebean 有 3 个 SQLServer 平台，分别用于 2017、2016 和 2005。

# jquery-mobile - 在一个页面上包含 jQuery Mobile 会影响所有这些？

> ID：10668023
> 
> 赞同：0
> 
> 时间：2012-05-19T18:59:15.907
> 
> 标签：jquery-mobile

我在 index.html 中包含了标准的 jQuery Mobile CDN 文件，并将 css 应用于我的所有页面。我不明白这是如何/为什么会发生的。有人可以解释吗？有没有办法阻止它？

```
<head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
     <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
      <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

  </head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:13:04.563

我可以解释。

当您使用 jQuery Mobile 链接页面时，它不会直接链接到新页面。为了让 JQM 可以使用它的精美页面转换，它会预加载页面，然后用新内容交换旧内容。因此 JQM 永远不会重新加载`<head>`文档。

如果您想覆盖此行为，请放入`rel="external"`您的锚标记。这告诉 JQM 它正在链接到外部站点，而不是 JQM 页面。

# sockets - 消息队列与套接字

> ID：10668028
> 
> 赞同：38
> 
> 时间：2012-05-19T18:59:41.463
> 
> 标签：sockets, websocket, message-queue, message-driven-bean

我没有太多的套接字编程经验，但我试着读了一点。我对 MDB 和消息队列非常熟悉。有人告诉我，队列（例如 MDB）“只不过是直接套接字连接”。谁能帮我比较一下这两个。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-19T19:16:21.517

两者是*无与伦比*的，因为它们代表不同的*层次*。这就像将关系数据库与磁盘上的文件进行比较或将房屋与砖块进行比较（即，当然您需要文件来构建数据库和砖块来建造房屋，有时您只需要一个文件或一块砖头，但这并不使它们具有可比性）。

消息队列是一种将发送者和接收者粘合在一起的软件，这样他们就可以在不了解彼此的情况下进行通信（当然，他们都需要了解队列）并且不需要实现网络代码、处理故障、路由一个消息发送到许多接收者等。即使发送者和接收者从不同时处于活动状态，系统也能正常工作，因为队列还可以作为未传递消息的临时存储。除此之外，队列还可以提供额外的服务，比如授权、交易等。

套接字连接是一种低级网络抽象，它说：“目前两个程序可以通过网络相互发送数据，至少在连接由于某种原因中断之前”。所以是的，通常消息队列将使用套接字连接在网络上工作。

顺便说一句：您提到的MDB（消息驱动Bean）**不是**消息队列（就像JDBC不是数据库一样）。它是一个用于消费事务性消息的 API。他们可能来自队列，但他们不必这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T18:59:48.827

两者在某种意义上是完全不同的；

1.  套接字允许在同时认识自己的客户端之间建立连接（例如，在客户端和后端服务之间或在后端服务之间）。

2.  消息队列主要充当消息驱动系统中不同后端服务之间的接口。除了消息代理（例如，rabbitMQ、activeMQ、Kafka）之外，服务不需要知道它们正在与谁通信。这确保即使其中一项服务关闭，消息也不会丢失。服务启动后，消息代理立即将消息发送给消费者。

# c# - 无法将类型“字符串”隐式转换为“长”

> ID：10668029
> 
> 赞同：0
> 
> 时间：2012-05-19T18:59:45.973
> 
> 标签：c#

我的 MS Sql 数据库中有两个表，Course 和 StudyCase，FK ID（Course 表）到 Course_ID（在 StudyCase 表中）。我正在尝试从课程 ID 中找到 StudyCase ID。

在存储库中：

```
 public IQueryable<StudyCase> ListStudyCases(long courseId)
        {
            return _dbContext.StudyCases.Where(c => c.Course_ID == courseId);
        } 
```

在研究案例服务中：

```
public IQueryable<StudyCase> ListStudyCases(long courseId)
    {
        return this._StudyCaseRepository.ListStudyCases(courseId);
    } 
```

在 StudyCases IServices 中：

```
 IQueryable<StudyCase> ListStudyCases(long courseId); 
```

从课程控制器发送动作：

```
 return RedirectToAction("Index", "CourseCases", new { courseId = 6 }); 
```

在 StudyCase 控制器中：

```
 public ActionResult Index(long courseId)
        {
            string id = "";
            id = _studyCaseSvc.ListStudyCases(courseId).First().ID.ToString();
            StudyCase cases = _studyCaseSvc.GetStudyCase(id);
... 
```

我收到以下两个错误：

```
Cannot implicitly convert type 'string' to 'long' 
```

和

```
The best overloaded method match for 'IStudyCaseService.GetStudyCase(long)' has some invalid arguments 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:08:01.180

只需使用您的操作参数而不将其转换为字符串。

```
public ActionResult Index(long courseId)
    {
        var id = _studyCaseSvc.ListStudyCases(courseId).First().ID;
        StudyCase cases = _studyCaseSvc.GetStudyCase(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:17:26.347

您声明`id`为字符串，如果您想将其用作 的参数`GetStudyCase`，则它必须是`long`. 如果你想传递一个字符串，那么`GetStudyCase`应该有一个接受字符串的重载。

我是 MVC 的新手，但这似乎更像是一个通用的 C# 问题，而不是专门与 MVC 相关的问题。

# actionscript-3 - 为什么形状之间有间隙？

> ID：10668030
> 
> 赞同：0
> 
> 时间：2012-05-19T19:00:00.377
> 
> 标签：actionscript-3, apache-flex

我正在开发 flex 应用程序，应用程序的一部分是网格。应用程序应该是稍后的游戏编辑器。

下面的截图说明了我的问题：我想在此处放置图像，但似乎我没有足够的声誉。 [这是屏幕截图的链接](http://i.imgur.com/9zm5A.png) 橙色方形和红色三角形无关紧要。

下面这段代码是红色方块的 Sprite (DisplayObjectContainer)。代码很乱，因为我刚开始使用 flex 并希望快速完成该网格。

```
public class Board extends Sprite
{
    var board:Array;

    public function Board(blockLength:Number)
    {
        super();
        x = 0;
        y = 0;
        // Setting up two dim array
        board = new Array(10);
        for (var k:int = 0; k < board.length; k++) 
        {
            board[k] = new Array(10);
        }

        // Orange-like box
        graphics.lineStyle(1, 0xA3A3A3);
        graphics.beginFill(0xCCAA00); 
        graphics.drawRect(x,y,100, 100);
        graphics.endFill(); 

        // red blocks
        for (var i:int = 0; i < 10; ++i) 
        { 
            for(var j:int = 0; j < 10; ++j)
            {
                var block:Block = new Block(i*blockLength, j*blockLength);  
                board[i][j] = block;
                this.addChild(block);
                block.drawBlock(blockLength);                   
            }
        }           
    }
} 
```

红方定义如下：

```
public class Block extends Shape
{

    public function Block(x:Number, y:Number)
    {
        super();
        this.x = x;
        this.y = y;
    }

    public function drawBlock(length:Number)
    {
        graphics.lineStyle(1, 0xB3B3B3);
        graphics.beginFill(0xFF0000); 
        graphics.drawRect(x,y,length, length);
        graphics.endFill();
    }
} 
```

我真的不知道为什么会有差距。代码很少，我觉得我错过了一些非常明显的东西。板对象在其初始化后被添加到阶段。

为什么红块之间有空隙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:24:04.020

您可能怀疑的答案很简单-您正在制造这些差距:)。

尝试改变这一点：

```
graphics.drawRect(x,y,length, length); 
```

对此：

```
graphics.drawRect(0,0,length, length); 
```

为什么？

首先，您设置正方形的注册点位置：

```
 this.x = x;
    this.y = y; 
```

但随后您设置了相对于该注册点的 rect 位置：

```
graphics.drawRect(x,y,length, length); 
```

这造成了差距。

# javascript - 如何使用 jquery 自动完成/组合框事件处理程序？

> ID：10668031
> 
> 赞同：0
> 
> 时间：2012-05-19T19:00:09.697
> 
> 标签：javascript, jquery, autocomplete

试图绑定自动完成/组合框 jquery 插件的焦点事件一些另一个动作（在包装元素上显示工具提示） jquery 代码：

```
$(document).ready(function(){  
   $( "#municipality_cb" ).combobox({
    focus: function(event, ui) {
         //tipTip(); - tooltip script 
         $("#municipality_wrap").tipTip({maxWidth: "auto", edgeOffset: 10});    
      }        
   });
}); 
```

html:

```
<div class="ui-widget">
  <!--combobox wrapper div for tooltip -->
  <div id="municipality_wrap" title="Chose municipality: Karposh" style="float: left;">
      <select id="municipality_cb" tabindex="2" data-placeholder="Choose ..." 
        title="test">
            <option value=""></option>
            other options....  
      </select>
   </div>
</div> 
```

工具提示根本不显示。我做错了什么？请帮忙 ：）

Jquery 自动完成插件（查看事件选项卡） [http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:35:34.703

问题是 .combobox 没有焦点回调，正如您[在此处](http://jquery.sanchezsalvador.com/jquery/page/jquerycomboboxapi.aspx)看到的那样。
所以你必须使用以下代码：

```
$("#combobox").focus(function() {
    $("#wrapper").tipsy('show');
}).blur(function() {
    $("#wrapper").tipsy('hide');
}); 
```

但是 .combobox 会更改您的 dom 元素，如果您检查它们，您会看到它删除了 id 为组合框的元素。
所以下面的代码不起作用。
要解决它，您必须更改`$("combobox")`为新的 dom 元素`$("span.ui-combobox input")`。

你可以看到它在**[这里](http://jsfiddle.net/wNnTQ/141/)**工作。

我在您的代码中看到的其他问题是您没有使用 ui 自动完成功能，请查看[参考](http://jqueryui.com/demos/autocomplete/#event-focus)以了解如何使用。

# google-app-engine - 如何使用 slim3 中的 servlet 和 GWT 上传 BlobStore

> ID：10668032
> 
> 赞同：1
> 
> 时间：2012-05-19T19:00:10.133
> 
> 标签：google-app-engine

我有类似的项目`http://ikaisays.com/2010/09/08/gwt-blobstore-the-new-high-performance-image-serving-api-and-cute-dogs-on-office-chairs/`，它使用 BlobStore 在谷歌应用引擎上存储图像。但我使用 slim3 framwork。

按照教程我创建 Fileupload 表单和 Servlet。当我提交表单时，请注意它不会调用 Servlet。我的事情可能是我不知道配置应用程序。

像我这样做 ：

```
<servlet>
    <servlet-name>uploadServlet</servlet-name>
    <servlet-class>daTotNghiep.server.UploadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>uploadServlet</servlet-name>
    <url-pattern>/upload</url-pattern>
</servlet-mapping> 
```

// 获取要上传的blobStore URL，并将返回值设置为uploadForm.Action(string)

```
public String getBlobstoreUploadUrl() {
    // TODO Auto-generated method stub
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    return blobstoreService.createUploadUrl("/upload");
} 
```

有了 2 个配置，肯定 uploadForm.submit() 会调用 servlet 吗？

完整教程来源：`http://github.com/ikai/gwt-gae-image-gallery`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:38:59.557

> Slim3 Controller 是一个 Servlet 的瘦框架。Slim3 可以自动从路径中找到类似 Servlet 的控制器，无需手动配置。由于 HOT 重新加载，当您更改源代码时，您可以在浏览器上看到结果，而无需重新启动 Web 应用程序。

所以在 Slim3 中即时使用 servlet，我们使用 Controller。它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T06:01:29.557

如果你那样去试试这个

```
 <servlet>
    <servlet-name>Upload</servlet-name>
    <servlet-class>gwtwithslim.server.service.Upload</servlet-class>
  </servlet>

  <servlet>
    <servlet-name>Serve</servlet-name>
    <servlet-class>gwtwithslim.server.service.Serve</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>Upload</servlet-name>
    <url-pattern>/service.s3gwt/upload/*</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>Serve</servlet-name>
    <url-pattern>/service.s3gwt/serve/*</url-pattern>
  </servlet-mapping> 
```

# c - 从文件 c 编码打印下一行

> ID：10668033
> 
> 赞同：0
> 
> 时间：2012-05-19T19:00:10.937
> 
> 标签：c, file

我的代码是这样的。我正在读取一个文件，比较用户从文件中的数据输入的单词，然后想从文件中打印接下来的两个单词。我怎样才能做到这一点？

```
 #include <stdio.h>
        #include <string.h>
        int main()
        {
           //Open the file for reading
                    FILE *in = fopen("data.txt", "r");
           char str[]="file1.txt";
           //fgets buffer
           char buffer[100];

         //Pieces of string tokenized
        char * stringPiece;

         //int for comparing strings
           int compare=2;

        //While loop. Getting lines from file
        while ( fgets(buffer, sizeof(buffer), in) != NULL ){
             fgets(buffer, 100, in);
            // printf("%s\n", buffer);

         stringPiece = strtok (buffer,",");
             while (stringPiece != NULL){

          printf("%s\n",stringPiece);
          compare=strcmp(stringPiece,str);

          if (compare==0){printf("HELP");}

          //printf("%s\n",stringPiece);
          stringPiece = strtok (NULL, " ");
      }
   }
         //Close file
                fclose(in);

                       return 0;
} 
```

我可以在文件中找到与用户输入的相同的单词，但无法从文件中打印接下来的两个单词。文件名为 data.txt。

格式化为清晰易读的代码（主要在函数的左大括号上使用`vim`和）。`=%``main()`

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    //Open the file for reading
    FILE *in = fopen("data.txt", "r");
    char str[]="file1.txt";
    //fgets buffer
    char buffer[100];

    //Pieces of string tokenized
    char * stringPiece;

    //int for comparing strings
    int compare=2;

    //While loop. Getting lines from file
    while ( fgets(buffer, sizeof(buffer), in) != NULL ){
        fgets(buffer, 100, in);
        // printf("%s\n", buffer);

        stringPiece = strtok (buffer,",");
        while (stringPiece != NULL){

            printf("%s\n",stringPiece);
            compare=strcmp(stringPiece,str);

            if (compare==0){printf("HELP");}

            //printf("%s\n",stringPiece);
            stringPiece = strtok (NULL, " ");
        }
    }
    //Close file
    fclose(in);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:18:17.590

找到单词和接下来的两个单词的样本得到

```
#include <stdio.h>
#include <string.h>

int main() {
    char userInputWord[]="file1.txt";
    char readFromFileData[]="c:,file1.txt,date,size";
    char *tokenPtr,*nextFirstWord,*nextSecondWord;

    tokenPtr=strtok(readFromFileData, ",");
    for(;tokenPtr != NULL;tokenPtr=strtok(NULL, ",")){
        if(0!=strcmp(tokenPtr, userInputWord))
            continue;//skip word
        //find it!
        printf("%s\n",tokenPtr);
        nextFirstWord = strtok(NULL, ",");
        nextSecondWord = strtok(NULL, ",");
        if(nextFirstWord)
            printf("first word is \"%s\"\n", nextFirstWord);
        else
            fprintf(stderr,"first word is nothing!\n");
        if(nextSecondWord)
            printf("second word is \"%s\"\n", nextSecondWord);
        else
            fprintf(stderr,"second word is nothing!\n");
    }
    return 0;
} 
```

# asp.net - 如何用选定的值填充 aspxcombobox

> ID：10668041
> 
> 赞同：1
> 
> 时间：2012-05-19T19:01:17.720
> 
> 标签：asp.net, aspxgridview

我需要使用 DevExpress ASPxGridView。我有一个数据源对象，它返回重要的两列，ObjectType 和 ObjectID。ObjectType 可以是 Dogs 或 Cats。ObjectID 是一个 int 值，给出了 Dog 或 Cat 的 ID。希望这是有道理的。ObjectID 由 Dog 表或 Cat 表选择，它们是缩进表，所以我不能以任何方式加入它们。

所以基本上它看起来像这样：

对象表：ObjectType varchar ("Dogs" or "Cats") ObjectID int

Dogs 表 ID int 名称 varchar

Cats 表 ID int 名称 varchar

我已经能够通过组合框编写适当的 objectType，并通过使用由数据源填充的两个控件 cbDogs 和 cbCats 编写 ObjectID。

我想不通的是，当我编辑 ASPxGridView 时，如何在 cbCats 或 cbDogs 中显示对象值。例如，如果 ObjectType 是 Cats 并且 ObjectID 是 1，那么我想在 cbCats 中显示与 ID 为 1 对应的名称。我真正想要做的是这样的事情。显然，这段代码根本不起作用。

```
if (ObjectType = "Cats") 
{
  object objID = grid.GetRowValuesByKeyValue(e.KeyValue, "ObjectID");
  string objIDstr = objID.ToString()
  cbCats.SelectedValue = objIDstr  // or something like this
} 
```

如果这有帮助，这里是 aspx 页面中猫的声明。

```
<dx:GridViewDataComboBoxColumn Caption="Cat Name" FieldName="CatID"  Name="CatName"  Visible="false">
    <PropertiesComboBox DataSourceID="dsCatName" TextField="Name" ValueField="ID" ValueType="System.Int32">
    </PropertiesComboBox>
    <EditItemTemplate>
        <dx:ASPxComboBox ID="cbCat" runat="server" DataSourceID="dsCatName" TextField="Name" ValueField="ID"
        Value='<%# Bind("CatID") %>' AutoPostBack="false" ValueType="System.Int32" > </dx:ASPxComboBox>
    </EditItemTemplate>
</dx:GridViewDataComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:09:10.303

如果我正确理解了您的问题，您所要做的就是：

```
if(ObjectType=="Cats")
{
     Int32 objID = Convert.toInt32(grid.GetRowValuesByKeyValue(e.KeyValue, "ObjectID"));
     cbCats.Items[cbCats.Items.FindByValue(objId)].selected = true;
} 
```

作为预防措施，您可以进行如下检查：

```
if(cbCats.Items.FindByValue(objID) != null)
{
     cbCats.Items[cbCats.Items.FindByValue(objId)].selected = true;
}
else
{
     cbCats.Items[0].selected = true;
} 
```

我希望它会给你你想要的结果。

# newline - 如何在记事本++中的特定字符处换行？

> ID：10668044
> 
> 赞同：118
> 
> 时间：2012-05-19T19:03:09.910
> 
> 标签：newline, notepad++, text-editor, line-breaks

我有一个包含如下文本的文本文件：

```
['22APR2012 23:10', '23APR2012 07:10', 1, 3, 0], ['22APR2012 23:10', '23APR2012 07:20', 1, 3, 0], ['22APR2012 23:15', '23APR2012 06:40', 0, 1, 0], ['22APR2012 
23:15', '23APR2012 06:40', 1, 3, 0], ['22APR2012 23:15', '23APR2012 06:40', 0, 1, 0], ['22APR2012 23:15', '23APR2012 07:00', 1, 3, 0], ['22APR2012 23:15', '23APR2012 
07:00', 0, 1, 0], ['22APR2012 23:20', '23APR2012 09:35', 0, 1, 0], ['22APR2012 23:20', '23APR2012 09:35', 1, 3, 0], ['22APR2012 23:20', '23APR2012 10:10', 1, 3, 0], 
['22APR2012 23:25', '23APR2012 05:35', 1, 3, 0], 
```

我希望在`],`字符处换行：

```
['22APR2012 19:30', '23APR2012 00:25', 0, 1, 0], 
['22APR2012 19:35', '23APR2012 01:45', 1, 3, 0],
['22APR2012 19:50', '23APR2012 05:25', 1, 3, 0],
['22APR2012 19:50', '23APR2012 05:25', 0, 1, 0],
['22APR2012 19:55', '23APR2012 06:25', 1, 3, 0], 
```

有没有办法在 Notepad++ 或任何其他编辑器中做到这一点？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-05-19T19:13:11.573

1.  单击顶部菜单上的 Ctrl + h 或搜索 -> 替换
2.  在搜索模式组下，选择正则表达式
3.  在查找内容文本字段中，键入`],\s*`
4.  在替换为文本字段中，键入`],\n`
5.  点击全部替换

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-12-11T10:01:37.940

> Let's assume `],` is the character where we wanted to break at

1.  Open `notePad++`
2.  Open `Find window` Ctrl+F
3.  Switch to `Replace` Tab
4.  Choose `Search Mode` to `Extended`
5.  **Type `],` in `Find What` field**
6.  **Type `\n`in `Replace with` field**
7.  Hit `Replace All`
8.  Boom

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-03-15T07:07:39.430

Try this way. It got worked for me

1.  Open Notepad++ then copy your content
2.  Press `ctrl + h`
3.  Find what is should be **,(comma)** or any character that you want to replace
4.  Replace with should be **\n**
5.  Select Search Mode -> Extended (\n, \r, \t, \0)
6.  Then Click on Replace All

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-05-02T10:19:45.363

如果文本包含需要转换为新行的**\r\n ，请使用“扩展”或“正则表达式”模式并转义“查找内容”中的反斜杠字符：**

查找内容：**\\r\\n**

Replace with: **\r\n**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-19T19:12:53.113

我不知道它是如何自动工作的，但你可以复制“]，”和换行，然后使用替换功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-07T16:50:59.183

If you are looking to get a comma separated string into a column with CR LF you wont be able to do that in Notepad++, assuming you didn't want to write code, you could manipulate it in Microsoft Excel.

If you copy your string to location B1:

```
A2 =LEFT(B1,FIND(",",B1)-1)
B2 =MID(B1,FIND(",",B1)+1,10000) 
```

Select A2 and B2, copy the code to successive cells (by dragging):

```
A3 =LEFT(B2,FIND(",",B2)-1)
B3 =MID(B2,FIND(",",B2)+1,10000) 
```

When you get #VALUE! in the last cell of column A replace it with the previous rows B value.

In the end your A column will contain the desired text. Copy and past it anywhere you wish.

# c++ - 使用重载运算符时处理临时错误

> ID：10668046
> 
> 赞同：0
> 
> 时间：2012-05-19T19:03:21.387
> 
> 标签：c++, overloading, temporary

我的 C++ 项目中有一个字符串类。我必须使用双链表并制作自己的字符串类。在我的字符串类中，我必须重载`<`,`>`和`==`运算符。其实我是这样做的。但是在我的另一个类中，我有一个列表函数来比较我的字符串类。在这个比较中，我有“临时地址”错误。

这是我的字符串类：

```
#include "String.h"

String::String(int coming)
{
   x=coming;
}

int  String::getX()
{
    return x;
}

String String::operator==(String *taken)
{
    return String (x==taken->x);
} 
```

这是我的上市方法：

```
void myclass::list(String *taken)
{
    otherclass *temp=head;

    while(temp!=NULL)
    {
        if(&temp->get_string()==taken)//where i get error message.
            cout<<temp<<endl;
        temp=temp->get_nextnode();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:06:50.787

编译器准确地告诉您问题：您不能获取临时对象的地址。 `temp->get_string()`是一个临时对象¹，您正在尝试获取它的地址。

我不太确定你的目标是什么，所以我不能建议修复。但我强烈建议将`String::operator==`指针定义为右手边会导致混淆。让它返回另一个`String`也没有意义。通常人们会期望`==`评估为布尔值。

* * *

[1\. 嗯，大概。您还没有显示`get_string()`.]

# php - 填充 DIV 容器

> ID：10668049
> 
> 赞同：0
> 
> 时间：2012-05-19T19:03:34.823
> 
> 标签：php, html

请在下面查看我的代码。目标如下。当用户按下按钮时，该功能`main.php`应该被执行。完成后，DIV的内容`opt_container`应该通过运行函数来填充`ganttchart.php`。确实，我不知道如何：

1.  `ganttchart.php`之后立即执行`main.php`。
2.  `main.php`从`form`. _

由于我是 PHP 新手，任何建议都会对我很有帮助。

```
<div id="fragment-2">
    <table width="100%">
        <tr>
            <td width="100%"> 
                <form name="optform" method="post" action="">
                    <div class="buttons">
                        <a href="" class="regular" onclick="click_function();return false;">
                        <img src="images/opt.png" alt=""/> Run optimizaton 
                        </a>
                    </div>
                </form>
            </td>
        </tr>
     </table>
</div>

<div id="opt_container">

</div>

<script language="javascript">
function click_function() {
     $('#opt_container').load('optim/mainOptim.php');
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:09:11.953

您想做的事情不能仅在 PHP 中完成。PHP 脚本在远程服务器上执行，这意味着需要调用请求才能使 php 返回某些内容。用户在他的本地（客户端）机器上操作。

onclick 是执行 javascript 代码的处理程序，而不是 php。您需要创建 javascript 函数，对要执行的 php 代码执行 ajax 请求，然后将响应放置在 html 文档中。但是响应应该已经由 ganttchart.php 完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:30:53.907

首先，如果你想让 php 运行某些东西，你可以访问它的文件，将它包含在你的文件中，或者通过 XHR 请求它。

在您的情况下，您希望您的 main.php 文件在用户按下按钮时执行。话虽如此，您可以使用ff。代码作为基础：

```
<!-- 
 note: This code is just an example, 
       your code may vary to according 
       to your requirements.
 -->

 <form action="" method="get">

     <input type="hidden" name="run_main_function" value="yes"/>

     <input type="submit" />

 </form>

 <?php

 if( isset( $_GET['run_main_function'] ) ):

    require_once 'path/to/your/main.php';

    /* execute something from your main.php */

    require_once 'path/to/your/ganttchart.php';

    /* execute some functions in your ganttchart.php */

    $result = function_from_ganttchart();

?>

 <div id="opt_container">

        <table width="100%">

            <tr>

                <td width="100%"> 

                    <div class="scrollbar" id="chart">

                        <img src="<?php echo $result; ?>">

                    </div>

                </td>

            </tr>

 </div
</php   
    endif;  
?> 
```

或者，您可以使用 JavaScript 通过 XHR 请求甘特图的内容。

谢谢 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T19:07:45.117

您没有将任何数据从您的`<form>`. 将这些 GWT 参数设置为您的`<img src=""/>`. 现在不需要发布表格。

例如：

```
<div class="scrollbar" id="chart">
    <img src="ganttchart.php?param1=foo&param2=bar">
</div> 
```

否则，您需要以下流程。可以在 Google 上找到每个步骤的大量示例。

1.  加载主机网页。
2.  让用户 XHR 获得 run.php 所需的参数并对服务器进行计算（使用主机页面中的一些 JS）。
3.  将 '' 设置为所需图像所需的 ganttchart.php 请求。您可能需要一个“id”来识别来自 (2) 的交易。即 ganttchart.php?id=123 （使用主机页面中的一些 JS 完成）

# css - 在 CSS 中如何更改 h1 和 h2 的字体大小

> ID：10668056
> 
> 赞同：30
> 
> 时间：2012-05-19T19:04:40.007
> 
> 标签：css

总之按二十一主题。我想更改标题的大小当我将标题包裹在 h1 和 h2 标签周围时，如下所示

```
<h1>My h1 heading </h1> 
<h2> My h2 heading </h2> 
```

我使用的主题中标题的字体大小与内容的字体几乎相同，只是它们是粗体。所以我的标题不是很突出。

我想我需要更改 css 文件中的某些内容。请告知具体需要放入什么。

谢谢，

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-19T19:07:14.323

```
h1 {
  font-weight: bold;
  color: #fff;
  font-size: 32px;
}

h2 {
  font-weight: bold;
  color: #fff;
  font-size: 24px;
} 
```

请注意，在颜色之后您可以使用单词（例如`white`）、十六进制代码（例如`#fff`）或 RGB（例如`rgb(255,255,255)`）或 RGBA（例如`rgba(255,255,255,0.3)`）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-20T10:23:47.883

```
 h1 { font-size: 150%; }
 h2 { font-size: 120%; } 
```

根据需要进行调整。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-19T19:07:18.490

你试过什么？这应该有效。

```
h1 { font-size: 20pt; }
h2 { font-size: 16pt; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-01T21:07:48.660

如果您想专门更改标题，这是一个更简单的解决方案

```
<style>
    h1.increase {
       font-size: 15px;
}
</style>

<h1 class="increase">Header</h1> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-05T08:51:57.423

如果您只更改字体大小，文本可能会在较小的设备类型上相交。

```
<style>
.heading-1{
  font-size: 350%!important;
}
</style>

<h1 class="heading-1">
  Get in Touch
</h1> 
```

[![在此处输入图像描述](../Images/7cb023c95d14a28408400f2ba4bfdecf.png)](https://i.stack.imgur.com/rhWyC.png)

为了使其响应，请考虑调整行高。

```
<style>
.heading-1{
  font-size: 350%!important;
  line-height: 120%!important;
}
</style>

<h1 class="heading-1">
  Get in Touch
</h1> 
```

[![在此处输入图像描述](../Images/dc4e6d7fbc2f7489c69cfd67684dbb4c.png)](https://i.stack.imgur.com/zH0iF.png)

# json - 在 drupal 7 中，需要一个简单的 ajax、json 和 jquery 的 drupal.behavior 模块示例？

> ID：10668059
> 
> 赞同：0
> 
> 时间：2012-05-19T19:05:07.657
> 
> 标签：json, drupal, module, behavior

我一直在寻找一个构建输出 json 的 hook_menu 的模块示例，并且有一个在 drupal.behavior 中工作的 jquery 文件。

有的话可以给我推荐一个例子吗，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:17:04.173

[Developers 的示例](http://drupal.org/project/examples)，请参阅 ahah_example 或 ajax_example 那里。

# android - 在 Android 中开发计步器

> ID：10668060
> 
> 赞同：1
> 
> 时间：2012-05-19T19:05:25.727
> 
> 标签：android, gps, android-sensors

我正在使用安卓系统。

我想开发一种雷达，一群怪物跟着你，你可以在雷达上看到它们。问题是当玩家移动（设备）时我想做，然后它会在雷达中反射（这样你就可以逃离怪物......）。

我想使用 gps 传感器来检查实际位置，但我认为这是一个糟糕的解决方案，因为玩家必须在他们想玩的时候激活它......

那么，还有其他选择吗？我看到计步器检查设备的移动以计算步数。他们是怎么做到的？

谢谢。

编辑：我想你也必须知道玩家要去哪里。也许使用指南针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T19:16:57.850

*   [http://code.google.com/p/pedometer/](http://code.google.com/p/pedometer/)
*   [https://github.com/bagilevi/android-计步器](https://github.com/bagilevi/android-pedometer)
*   等等

有时搜索是你的朋友。

# android - 线性布局嵌入另一个线性布局

> ID：10668067
> 
> 赞同：1
> 
> 时间：2012-05-19T19:07:02.157
> 
> 标签：android, xml, android-layout, android-linearlayout

我正在尝试将线性布局嵌入到另一个线性布局中。我有一个地图视图。如果我在 mapview 之后放置嵌入布局，则它不起作用。如果我把它放在它之前呢？为什么以及我应该怎么做？

下面给出了两个文件：第一个文件失败。第二个有效吗？不过我想要第一个。

```
<!--two files.  

The first file does not work.  The Check Boxes in an embeded linear layout is below the mapview.  It only shows map view.  

The second file works.  The Check Boxes in an embeded linear layout is ABOVE the mapview.-->

<!-- FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE FILE ONE-->

<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#A971E5" >

    <com.google.android.maps.MapView
        android:id="@+id/mapWhenImClose"    
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0MbR34udiEJdnkplC1F7rK4ZxbSFzdRagCruFDA"/>
        <!--  had this line but it said depreciated        
        android:enabled="true" -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="horizontal">

        <CheckBox
            android:id="@+id/chkShowStreetView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowStreetView" />

        <CheckBox
            android:id="@+id/chkShowSatelliteView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowSatelliteView" />

    </LinearLayout>

</LinearLayout>

<!--File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two File Two-->

<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="#A971E5" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="horizontal">

        <CheckBox
            android:id="@+id/chkShowStreetView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowStreetView" />

        <CheckBox
            android:id="@+id/chkShowSatelliteView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowSatelliteView" />

    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/mapWhenImClose"    
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0MbR34udiEJdnkplC1F7rK4ZxbSFzdRagCruFDA"/>
        <!--  had this line but it said depreciated        
        android:enabled="true" -->

</LinearLayout> 
```

[http://pastebin.com/Tfsec1Mh](http://pastebin.com/Tfsec1Mh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:13:55.950

你`MapView`覆盖了整个屏幕`android:layout_height="fill_parent"`：

```
<com.google.android.maps.MapView
        android:id="@+id/mapWhenImClose"    
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:clickable="true"
        android:apiKey="0MbR34udiEJdnkplC1F7rK4ZxbSFzdRagCruFDA"/>
        <!--  had this line but it said depreciated        
        android:enabled="true" --> 
```

**编辑：**

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#A971E5" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="horizontal"
        android:id="@+id/thebar" 
        android:layout_alignParentBottom="true">

        <CheckBox
            android:id="@+id/chkShowStreetView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowStreetView" />

        <CheckBox
            android:id="@+id/chkShowSatelliteView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/strShowSatelliteView" />

    </LinearLayout>

    <com.google.android.maps.MapView
        android:id="@+id/mapWhenImClose"    
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_above="@id/thebar"
        android:clickable="true"
        android:apiKey="0MbR34udiEJdnkplC1F7rK4ZxbSFzdRagCruFDA"/>
        <!--  had this line but it said depreciated        
        android:enabled="true" -->

</RelativeLayout> 
```

# sql-server - BCP 问题 - 我在哪里出错了？

> ID：10668068
> 
> 赞同：0
> 
> 时间：2012-05-19T19:07:08.053
> 
> 标签：sql-server, bcp

有人更改了我正在使用的 BCP 文件中的行和列分隔符。实际上， clumn 曾经是 |~ 并且 row 是默认的 \n 并且不需要规范。我现在似乎无法在没有错误的情况下对文件运行 BCP。

当我现在使用以下命令运行它时，我得到：*“强制转换规范的字符值无效。”*

**这是我的确切命令语法，我只是更改了密码等：**

```
bcp Temp.dbo.Fund in D:\some_ftp_files\Unzipped\filename_58.bcp
-eD:\Error.txt -w -t"|^|" -r"|!|" -Usomename -Psomepass 
```

任何人都看到我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:12:19.897

我正打算关闭它，但 somoene 可能会发现它很有用，因为我自己错过了显而易见的东西。

-r"|!|" 实际上被设置为行分隔符。不幸的是，文件制作者最后还保留了 \n 的存在。

这更加令人困惑，因为即使您没有指定额外的\n，SQL Server Bulk Import 也能解决这个问题。BCP 和其他批量插入方法要求您实际说出：-r"|!|\n"。因此，如果您像我一样注意到差异，您认为 BCP 调用中有语法错误，或者它没有正确解析。

# html - # 链接到非名称元素

> ID：10668075
> 
> 赞同：0
> 
> 时间：2012-05-19T19:07:50.857
> 
> 标签：html, hyperlink

HTML 可以使用“#name”链接将用户定向到命名的锚元素，例如`<a name="name">`. 是否可以链接到任何其他属性，例如 id 或 class？'itemprop' 或 'content' 之类的 HTML5 内容怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:10:24.663

是的，确实最好使用`id`元素的 来在页面内创建内部链接。

示例标记：

```
<a href="#part2">Part 2</a>

<!-- other html -->

<h2 id="part2">This is part 2</h2> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/KgxTd/)。

值得注意的是，一个链接只能连接到*一个*唯一的目标，因此`class`不能使用一个（或其他属性），因为所有非`id`属性都可以在许多元素之间共享/复制。而在文档中`id` ***必须***是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:12:38.000

您可以使用元素的名称和 ID。原因是 url 中的 hash 必须指向页面上的单个元素，并且只有 name 和 id 是必须具有唯一值的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T19:13:51.127

根据[http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid](http://dev.w3.org/html5/spec/single-page.html#scroll-to-fragid)：

> 对于 HTML 文档（和 HTML MIME 类型），必须遵循以下处理模型来确定文档的指示部分是什么。
> 
> 1.  解析 URL，让 fragid 成为 URL 的组成部分。
>     
>     
> 2.  如果 fragid 是空字符串，则文档的指示部分是文档的顶部；在这里停止算法。
>     
>     
> 3.  设解码的 fragid 是将 fragid 中任何有效 UTF-8 序列的百分比编码八位字节序列扩展为 UTF-8 定义的 Unicode 字符的结果。如果该字符串中的任何百分比编码八位位组不是有效的 UTF-8 序列（例如，它们扩展为代理代码点），则跳过此步骤和下一步。
>     
>     
> 4.  如果没有跳过这一步，并且 DOM 中有一个元素的**ID**与解码后的 fragid 完全相同，那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。
>     
>     
> 5.  如果 DOM 中有一个 a 元素的**name 属性**的值正好等于 fragid（未解码的 fragid），那么树顺序中的第一个这样的元素就是文档的指示部分；在这里停止算法。
>     
>     
> 6.  如果 fragid 是字符串 top 的不区分大小写的 ASCII 匹配，则文档的指示部分是文档的开头；在这里停止算法。
>     
>     
> 7.  否则，文档中没有指定的部分。
>     
>     
> 
> 为了 HTML 与 Selectors 的 :target 伪类进行交互，目标元素是文档的指定部分，如果那是一个元素；否则没有目标元素。

# ios - iOS - 右栏按钮存在但不可见

> ID：10668083
> 
> 赞同：0
> 
> 时间：2012-05-19T19:09:11.797
> 
> 标签：ios, uibarbuttonitem, uinavigationitem

我正在尝试将 rightBarButtonItem 添加到导航项。但无论我做什么，我都看不到导航栏上的按钮。如果我对 self.navigationItem.title 进行 NSLog 记录，我会得到正确的标题。而且，如果我对 rightBarButtonItem 进行 NSLog 记录，我会得到 barbutton 项的内存位置，所以不为空。这是我添加栏按钮项的方法：

```
UIBarButtonItem *barButton= [[UIBarButtonItem alloc] initWithTitle:......];
self.navigationItem.rightBarButtonItem=barButton; 
```

我应该怎么做才能使按钮在导航栏上可见。

编辑：这是 ViewCONtroller 层次结构：

MechViewController//这被推送到导航堆栈

PageViewController//这个是在MechViewController viewDidLoad方法中创建的，添加为childViewController

PhotoViewController//这是我添加到 PageViewController 的 viewControllers 数组中的视图控制器。这是我需要添加栏按钮项并指定其操作的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:17:13.163

您应该在 viewDidLoad 中添加按钮。

```
- (void)viewDidLoad {
  [super viewDidLoad];

  IBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithTitle:......];
  self.navigationItem.rightBarButtonItem = barButton;
  [barButton release];
} 
```

# java - 在读取文件之前如何确定文件使用的编码？

> ID：10668087
> 
> 赞同：3
> 
> 时间：2012-05-19T19:09:31.343
> 
> 标签：java, character-encoding

我面临一个问题。

文件可以用某种编码编写，例如`UTF-8`, `UTF-16`,`UTF-32`等。

当我读取`UTF-16`文件时，我使用以下代码：

```
 BufferedReader in = new BufferedReader(
                           new InputStreamReader(
                           new FileInputStream(file), "UTF16")); 
```

在读取文件之前如何确定文件的编码？

当我使用读取`UTF-8`编码文件时，`UTF-16`我无法正确读取字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:22:47.407

没有好的方法可以做到这一点。您要问的问题就像通过查看数字来确定数字的基数。例如， 的基数是`101`多少？

最好的解决方案是将数据读入字节数组。然后你可以使用[String(byte[] bytes, Charset charset)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.nio.charset.Charset%29)用多种编码来测试它，最有可能是最不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:30:17.730

您可以读取前几个字节并尝试猜测编码。

如果所有其他方法都失败了，请尝试使用不同的编码进行读取，直到其中一种可以正常工作（解码时也不例外，并且“看起来”还可以）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:12:50.583

你不能。应用哪种转换格式通常由文件的前四个字节决定（假设是 BOM）。你不能从外面看到那些。

# javascript - jQuery fancybox 在 IE7 中不起作用

> ID：10668088
> 
> 赞同：0
> 
> 时间：2012-05-19T19:09:43.017
> 
> 标签：javascript, jquery, internet-explorer-7, fancybox

我在旧的 IE7 中遇到了问题，因为我的一个客户仍在使用它。

由于某种原因，fancybox 没有打开，只是在 jquery 文件本身中引发 JS 错误。

我试过调试它，但还没有找到解决方案。

你们能帮我吗？

该站点是[http://beta.baeckerei-glasenapp.de/filialen/](http://beta.baeckerei-glasenapp.de/filialen/)，正如您在其他浏览器中看到的那样，一旦您单击 9 个元素之一，fancybox 就会打开。

顺便说一句：HTML 是由我的 CMS 生成的，所以请原谅“dl>a”，它不是有效的 HTML5 AFAIK。

谢谢

托拜厄斯·廷佩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:13:31.833

有一个新版本，它可能会解决您遇到的问题：

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

# css - 当img悬停在h1上时改变h1的宽度

> ID：10668089
> 
> 赞同：1
> 
> 时间：2012-05-19T19:09:53.373
> 
> 标签：css, hover, width, image

当您将鼠标悬停在 img 上时，我正在尝试扩展我的 h1 标签的宽度，但是我似乎无法让它工作。

[http://jsfiddle.net/xJ4dc/](http://jsfiddle.net/xJ4dc/)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:16:52.313

试试这个：

```
img:hover + h1 {
    width:100%;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/xJ4dc/4/)**。

该规则表示，每当您将鼠标悬停在图像上时，将所有相邻兄弟`<h1>`元素的宽度更改为 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:15:23.540

选择器必须选择元素才能应用规则。
在你的小提琴`img:hover`中没有后代，`h1`因此什么也没有发生。
在这种情况下，因为`h1`是你的下一个兄弟，`img:hover`你可以使用[+](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)选择器

```
img:hover + h1 
```

[小提琴](http://jsfiddle.net/mowglisanu/xJ4dc/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T19:18:03.960

你需要明白`img:hover h1`说什么：

> `img`在`:hover`所有子元素上命名的所有标签上`h1`

您需要使用加号`img:hover + h1`才能工作。

但我建议做的是[http://jsfiddle.net/xJ4dc/5/](http://jsfiddle.net/xJ4dc/5/)

```
<ul>
    <li>
        <img src="http://www.real-whitby.co.uk/wp-content/uploads/donkey.jpg" />
        <h1>This is a heading</h1>
    </li>
</ul>
​ 
```

进而：

```
li img {
    width: 100px;
}

li h1 {
    display: none;
}

li img:hover + h1 {
    display: block;
}
​ 
```

请注意，我将使用`display:none;`然后`display:block`隐藏和显示标题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T19:15:15.173

选择器的`img:hover h1`意思是“任何 h1 元素，它是悬停在 img 的后代的任何 h1 元素”。问题是您的`h1`元素不是`img`标签的后代，而是兄弟姐妹。您可以更改为使用[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)来获得所需的效果：

```
img:hover + h1 {
    width:300px;
} 
```

​</p>

# iphone - 计算项目相对于位置的高度

> ID：10668090
> 
> 赞同：-1
> 
> 时间：2012-05-19T19:09:54.233
> 
> 标签：iphone, algorithm, math, discrete-mathematics

我有一个项目需要在 P1 点和 H2 点以及 P2 点的高度为 H1。
在 P1 和 P2 之间的任何点，高度需要相对于其与 P1 和 P2 的距离（在它们之间的直线上）在 H1 和 H2 之间的某个位置。

例如：如果在 P1 处 H1 = 100，在 P2 处 H2 = 150，则在 P1 和 P2 之间的中点，H = 125。

我该如何计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:15:56.987

```
H1 + (distanceOfPointFromP1/distanceOfP1AndP2)*(H2-H1) 
```

# javascript - 自动文本区域光标移动

> ID：10668095
> 
> 赞同：3
> 
> 时间：2012-05-19T19:10:31.263
> 
> 标签：javascript, jquery, css, html

我的问题几乎类似于[textarea 中的自动换行符，](https://stackoverflow.com/questions/3115282/automatic-newline-in-textarea)但我的上下文更复杂。我有多个具有 1 行属性的文本区域，因此给人一种在空中书写的印象（仅表示网站上没有边框的空白区域，因为我在 css 中将文本区域边框设置为**>>> 边框：0;）**。

我想使用JQuery或Javascript计算用户输入的文本何时到达textarea行的末尾，以便自动移动到下面的下一个textarea。解决此问题的一种方法是尝试对字符进行计数，但不同的字符具有不同的宽度。

我正在考虑在 textarea 的边缘插入一个隐藏元素以作为**nexttextarea.focus() 事件**的触发器，但我不知道如何实现这一点。

我尝试过四处游荡并考虑不同的技巧，但似乎只有一个是解决方案...尝试将每个字符存储在一个数组中，并为它们提供以像素为单位的默认空间...例如**'a'=> 0.7px ,'b'=>0.9px**或类似的东西，如果它们是某个地方的列表（尽管看起来它在内存方面需要很多开销，因为我必须同时存储大写字母、小写字母和许多其他字符.) 然后根据浏览器的宽度进行一些计算，如果它已被重新调整大小，或者如果不是完整大小，以确定 textarea 行宽何时在浏览器宽度边缘变满。（目前 textarea 的宽度是 100% 并且没有父级，因此填充了整个浏览器宽度）。

如果有人知道我可以完成此任务的复杂或简单方法，请帮助我。一个大问题是，如果重新调整浏览器窗口的大小，IE 和 Mozilla 会引入滚动条，而滚动条是我**永远不**希望用户看到的（记住打字的印象）。

请原谅我如此冗长……只是想准确和详细。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T00:28:03.090

这比看起来更难。尝试检查 textarea 的 scrollHeight 和 scrollWidth；如果他们改变了，文本就会溢出。此时，您可以将文本从当前文本区域的末尾移动到下一个文本区域的开头，直到滚动高度/宽度消失。

这是一个例子：

```
document.onkeyup = function(evt) {
    var event = evt || window.event;
    var target = event.target;
    var nextArea = target.nextSibling; // assumes no whitespace between textareas.
    var chars;
    if (target.tagName == 'TEXTAREA' && (target.scrollLeft || target.scrollTop)) {
        chars = 0;
        while (target.scrollLeft || target.scrollTop) {
            target.value = target.value.replace(/.$/, function(m0) {
                nextArea.value = m0 + nextArea.value;
                return '';
            })
            ++chars;
            target.selectionStart = target.value.length;
        }
        nextArea.focus();
        nextArea.selectionStart = chars;
    }

}​ 
```

[http://jsfiddle.net/L73RG/3/](http://jsfiddle.net/L73RG/3/)

请注意，一个完整的解决方案需要将它绑定到的不仅仅是`keyup`事件，因为例如，用户可以使用上下文菜单进行粘贴。如果您发现可以在不触发事件的情况下修改框（例如，通过顶级“编辑”菜单），您可能希望将其绑定到一些鼠标事件，甚至偶尔在计时器上运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:46:27.970

*如果您的文本区域的内容溢出*，请检查每个按键，并提供此问题的答案：[确定 HTML 元素的内容是否溢出](https://stackoverflow.com/questions/143815/how-to-determine-using-javascript-if-html-element-has-overflowing-content)

然后，您必须删除多余的字符并将它们放入 next`textarea`中。大概一个一个，在每个字符移动后使用你的检查溢出功能，看看文本区域是否仍然*溢出*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T23:49:37.653

一种可能的解决方案是测量文本的大小。Ext-JS 通过创建一个屏幕外绝对定位的 div 来做到这一点，为您要测量的字体提供样式属性，并测量 div 本身。

您可以使用 Ext-JS 的代码作为灵感[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.TextMetrics](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.TextMetrics)

# .net - 用 Task.Wait() 代码包装 Async/Await IAsyncOperations 有什么风险？

> ID：10668100
> 
> 赞同：7
> 
> 时间：2012-05-19T19:11:51.397
> 
> 标签：.net, windows-runtime, async-await, c#-5.0

我目前正在尝试将大量现有同步代码移植到 WinRT。

作为其中的一部分，我遇到了期望某些操作是同步的现有代码的问题 - 例如对于文件 I/O

为了使现有代码适应 WinRT 中的 IAsyncOperation 样式 API，我使用了一种将 IAsyncOperation 包装为扩展方法的技术，例如：

```
namespace Cirrious.MvvmCross.Plugins.File.WinRT
{
    public static class WinRTExtensionMethods
    {
        public static TResult Await<TResult>(this IAsyncOperation<TResult> operation)
        {
            var task = operation.AsTask();
            task.Wait();
            if (task.Exception != null)
            {
                // TODO - is this correct?
                throw task.Exception.InnerException;
            }

            return task.Result;
        }
    }
} 
```

来自[MvvmCross WinRT ExtensionMethods](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Plugins/File/Cirrious.MvvmCross.Plugins.File.WinRT/WinRTExtensionMethods.cs) - 使用类似的方法`IAsyncAction`

这些包装器似乎工作 - 它们允许我`Async`在同步代码中使用这些方法，例如：

```
 public IEnumerable<string> GetFilesIn(string folderPath)
    {
        var folder = StorageFolder.GetFolderFromPathAsync(ToFullPath(folderPath)).Await();
        var files = folder.GetFilesAsync().Await();
        return files.Select(x => x.Name);
    } 
```

我知道这并不真正符合 WinRT 的精神。但我希望这些方法通常只会首先在后台线程上调用；我写这篇文章的目的是让我的代码跨平台兼容 - 包括尚未支持 await-async 的平台和/或尚未准备好进行跳跃的开发人员。

所以......问题是：使用这种类型的代码有什么风险？

作为第二个问题，有没有更好的方法可以实现文件 I/O 等领域的代码重用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T00:05:01.017

首先，我认为您的方法可以重写为：

```
public static TResult Await<TResult>(this IAsyncOperation<TResult> operation)
{
    return operation.AsTask().Result;
} 
```

`Result`如果任务尚未完成，调用将同步等待。`AgreggateException`如果失败，它会抛出一个。我认为`InnerException`像你这样做是一个坏主意，因为它会覆盖异常的堆栈跟踪。

关于您的实际问题，我认为`Wait()`与异步代码一起使用的最大危险是死锁。如果您在 UI 线程上启动一些内部使用的操作，`await`然后在同一个线程上等待它使用`Wait()`，您将遇到死锁。

如果您不在 UI 线程上，这并不重要`Wait()`，但您仍应尽可能避免它，因为它与整个`async`想法背道而驰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T21:06:08.530

有很多充分的理由不这样做。参见例如[http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)

但是如果你想这样做，使用 GetResults() 方法如下

```
public static TResult Await<TResult>(this IAsyncOperation<TResult> operation)
{
    try
    {
        return operation.GetResults();
    }
    finally
    {
        operation.Close();
    }
} 
```

正如 svick 所提到的，将 IAsyncOperation 包装在任务中也可以，但效率较低。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T15:21:27.320

我终于来回答这个问题了......

答案是你真的做不到。

即使您尝试使用其他答案中建议的一些更简洁的方法，如果您尝试在任何承诺不阻塞的线程上运行代码，您最终仍然会遇到异常 - 例如，如果您尝试在 UI 线程上运行或在线程池线程上。

所以......答案是你只需要重新构建遗留代码，使其在某种程度上是异步的！

# asp.net-mvc - ActionLink 无法在“if”块内呈现

> ID：10668101
> 
> 赞同：4
> 
> 时间：2012-05-19T19:12:18.043
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个应该有条件地呈现 ActionLink 的 ASP.Net MVC 4 视图。但是，ActionLink 不会在最终输出中呈现。为了诊断问题，我在所需的 ActionLink 前后添加了文本，并且还在`if`正文之外复制了 ActionLink 代码。

结果是正文之外的 ActionLink 代码`if`以及之前/之后的文本呈现，但不是我真正想要的 ActionLink。

```
@Html.ActionLink("NEXT", "_NextPage")

@if (true /*!Model.IsFinalPage*/) {
    <text>Pre</text>
    Html.ActionLink("NEXT", "_NextPage");
    <text>Post</text> 
} 
```

输出：

下一篇

（下一个是适当的链接）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T06:55:22.373

动作链接需要 @ 才能在这里工作。

在 razor 中，普通的 Html.ActionLink*返回*html 字符串，但如果没有 @，它不会被写入缓冲区。所以

```
@Html.ActionLink 
```

将与

```
Response.Write(Html.ActionLink); 
```

# java - 有什么方法可以知道Resultset 包含多少行？Java 和 MSSQL

> ID：10668102
> 
> 赞同：2
> 
> 时间：2012-05-19T19:12:20.693
> 
> 标签：java, sql, sql-server, eclipse, jdbc

我想运行一个循环（可能是一段时间）以继续从 MSSQL 获得结果。我已经完成了循环的部分。但是如果没有从 mssql 返回结果（行），可以找到一种方法来停止循环。我的代码是：

```
String query = "SELECT TOP 1 *  FROM tbl_Url WHERE UrlProcessed = 0";
PreparedStatement preparedquery = con.prepareStatement(query);
ResultSet results = preparedquery.executeQuery(); 
```

如果没有返回行，我应该使用什么方法来终止循环。如果从 mssql 返回任何结果或返回行数的方法，Resultset 是否有任何方法返回布尔值。如果没有返回行，则为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:18:15.447

使用**boolean next()**
将光标从当前位置向前移动一行。ResultSet 游标最初位于第一行之前；第一次调用 next 方法使第一行成为当前行；第二次调用使第二行成为当前行，依此类推。 **当调用 next 方法返回 false**时，光标位于最后一行之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T19:23:02.067

首先，您必须知道 ResultSet 对象维护一个指向其当前数据行的游标。最初，光标位于第一行之前。next 方法将光标移动到下一行，并且因为它在 ResultSet 对象中没有更多行时返回 false，所以可以在 while 循环中使用它来遍历结果集。

要获取行数，您可以尝试以下操作：

```
ResultSet results = preparedquery.executeQuery();

if (!results.next() ) {
System.out.println("no data");
}else{
results.last();
int rowCount = results.getRow();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T19:32:14.347

如果您只是想找出 while 循环中的结果中是否包含任何行，如果没有则中断，ResultSet.first(); 会给你这个...

问：您一次只选择一行是否有充分的理由？

```
while(true){
    String query = "Select top 1 * from tbl_Url where UrlProcessed = 0";
    PreparedStatement preparedQuery = con.prepareStatement(query)
    ResultSet results = preparedquery.executeQuery();
    if(!results.first())
        break;
    // process data here...
} 
```

# c# - 路由：当前的操作请求 [...] 在以下操作方法之间不明确

> ID：10668105
> 
> 赞同：105
> 
> 时间：2012-05-19T19:12:50.630
> 
> 标签：c#, asp.net-mvc

我有一个名为 的视图`Browse.chtml`，用户可以在其中输入搜索词，或将搜索词留空。输入搜索词时，我想将页面定向到`http://localhost:62019/Gallery/Browse/{Searchterm}` ，当没有输入任何内容时，我想将浏览器定向到`http://localhost:62019/Gallery/Browse/Start/Here`.

当我尝试这个时，我得到了错误：

> 当前对控制器类型“GalleryController”的操作“浏览”请求在以下操作方法之间不明确： System.Web.Mvc.ActionResult Browse(System.String) on type AutoApp_MVC.Controllers.GalleryController System.Web.Mvc.ActionResult Browse (Int32, System.String) 类型为 AutoApp_MVC.Controllers.GalleryController

我用 MVC 做的一切都是第一次。我不确定此时还可以尝试什么。

```
public ActionResult Browse(string id)
{
    var summaries = /* search using id as search term */
    return View(summaries);
}

public ActionResult Browse(string name1, string name2)
{
    var summaries = /* default list when nothing entered */
    return View(summaries);
} 
```

我在 Global.asax.cs 中也有这个：

```
 routes.MapRoute(
         "StartBrowse",
         "Gallery/Browse/{s1}/{s2}",
         new
         {
             controller = "Gallery",
             action = "Browse",
             s1 = UrlParameter.Optional,
             s2 = UrlParameter.Optional
         });

    routes.MapRoute(
         "ActualBrowse",
         "Gallery/Browse/{searchterm}",
         new
         {
             controller = "Gallery",
             action = "Browse",
             searchterm=UrlParameter.Optional
         }); 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-05-19T20:14:08.990

一个控制器上最多只能有 2 个同名的动作方法，为此，1 个必须是`[HttpPost]`，另一个必须是`[HttpGet]`。

由于您的两个方法都是 GET，因此您应该重命名其中一个操作方法或将其移动到不同的控制器。

尽管您的 2 Browse 方法是有效的 C# 重载，但 MVC 操作方法选择器无法确定调用哪个方法。它将尝试将路由匹配到方法（反之亦然），并且此算法不是强类型的。

您可以使用指向不同操作方法的自定义路由来完成您想要的操作：

...在 Global.asax

```
routes.MapRoute( // this route must be declared first, before the one below it
     "StartBrowse",
     "Gallery/Browse/Start/Here",
     new
     {
         controller = "Gallery",
         action = "StartBrowse",
     });

routes.MapRoute(
     "ActualBrowse",
     "Gallery/Browse/{searchterm}",
     new
     {
         controller = "Gallery",
         action = "Browse",
         searchterm = UrlParameter.Optional
     }); 
```

...在控制器中...

```
public ActionResult Browse(string id)
{
    var summaries = /* search using id as search term */
    return View(summaries);
}

public ActionResult StartBrowse()
{
    var summaries = /* default list when nothing entered */
    return View(summaries);
} 
```

您还可以通过将属性应用于其中一个来区分它，从而[使控制器中的操作方法命名相同。](https://stackoverflow.com/questions/436866/can-you-overload-controller-methods-in-asp-net-mvc)`[ActionName]`使用与上面相同的 Global.asax，您的控制器将如下所示：

```
public ActionResult Browse(string id)
{
    var summaries = /* search using id as search term */
    return View(summaries);
}

[ActionName("StartBrowse")]
public ActionResult Browse()
{
    var summaries = /* default list when nothing entered */
    return View(summaries);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-17T15:34:17.800

我不知道什么时候问这个问题这个解决方案是可用的，但你可以使用：

```
Request.QueryString["key"] 
```

所以这应该可以很好地解决您的问题：

```
[HttpGet]
public ActionResult Browse()
{
    if( Request.QueryString["id"] != null )        
        var summaries = /* search using id as search term */
    else /*assuming you don't have any more option*/
        var summaries = /* default list when nothing entered */

    return View(summaries);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-20T11:35:30.053

*在默认*路由之前的 RouteConfig.cs 中添加以下代码

```
routes.MapMvcAttributeRoutes(); 
```

并在控制器中添加路由属性，例如：

```
 [Route("Cars/deteals/{id:int}")]
    public ContentResult deteals(int id)
    {
        return Content("<b>Cars ID Is " + id + "</b>");
    }

    [Route("Cars/deteals/{name}")]
    public  ContentResult deteals(string name)
    {
        return Content("<b>Car name Is " + name + "</b>");

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-21T18:54:48.423

我认为重点是您不需要使用请求类隐式测试查询字符串参数。

MVC 为您进行映射（除非您对 MVC 路由进行了重大更改）。

因此一个actionlink路径

```
/umbraco/Surface/LoginSurface/Logout?DestinationUrl=/home/ 
```

将自动对您的（表面）控制器可用，并定义参数：

```
public ActionResult Logout(string DestinationUrl) 
```

MVC 完成这项工作。

# itextsharp - iTextSharp 水印多行文本

> ID：10668110
> 
> 赞同：1
> 
> 时间：2012-05-19T19:13:13.287
> 
> 标签：itextsharp

我已经看到了如何使用 iTextSharp 将文本水印添加到现有 PDF 文档的问题的答案。我的问题是我们如何做多行文本。有没有办法在没有定义多个 PdfContentByte 的情况下做到这一点。我试图插入一个换行符但没有运气。

这是来自互联网的代码。我刚刚添加

```
pdfData.ShowTextAligned(Element.ALIGN_CENTER, editDate, (pageRectangle.Width / 2) + 100, (pageRectangle.Height / 2) - 100, 45); 
```

作为获取水印第二行的第二行，它可以工作，但使用与第一行相同的参数（颜色、大小等）。

```
iTextSharp.text.Rectangle pageRectangle = PDFreader.GetPageSizeWithRotation(1);
//pdfcontentbyte object contains graphics and text content of page returned by pdfstamper    
PdfContentByte pdfData = stamper.GetOverContent(1);

//create fontsize for watermark    
pdfData.SetFontAndSize(BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED), 120);

//create new graphics state and assign opacity    
PdfGState graphicsState = new PdfGState();
graphicsState.FillOpacity = 0.2F;
//set graphics state to pdfcontentbyte    
pdfData.SetGState(graphicsState);

//set color of watermark    
pdfData.SetColorFill(iTextSharp.text.Color.BLUE);

//indicates start of writing of text    
pdfData.BeginText();

//show text as per position and rotation    
pdfData.ShowTextAligned(Element.ALIGN_CENTER, "E D I T E D" , (pageRectangle.Width / 2), (pageRectangle.Height / 2), 45);
pdfData.ShowTextAligned(Element.ALIGN_CENTER, editDate, (pageRectangle.Width / 2) + 100, (pageRectangle.Height / 2) - 100, 45);
//call endText to invalid font set    

pdfData.EndText(); 
```

# javascript - jshint 期望函数的新“前缀”

> ID：10668111
> 
> 赞同：35
> 
> 时间：2012-05-19T19:13:14.457
> 
> 标签：javascript, jshint

`CSiginIn`, `CSignUp`, `CTryIt`,`CBlocks`都是这样声明的函数

```
function CSignIn(){//stuff here} 
```

然而 JSHint 说我缺少“新”“前缀”。我能做些什么来解决这个问题？

它们只是模块模式中的函数。此外，它要求我删除放在我已完成的函数末尾的分号。

```
var Control = ( function () 
{

    /**
     *Publik
     */

    var publik = function ( page )
    {
        // page 1 initialization

        if( page == 1 )
        {
            CSignIn();
            CSignUp();
            CTryIt();
            CBlocks();
        } 
```

函数示例...

```
function CTryIt()
{
    // pull elements

    var tryit_button = document.getElementById( 'tryit_button' );

    // initialize access to Model

    tryit_button.addEventListener( "click", function( )
    { 
        new AjaxRequest().invoke( 'ajax_type=ControlTryIt', 
        function( server_response_text ) 
        { 
            new AjaxResponse( server_response_text, 'page_change' ); 
        } ); 

    }, false );
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-19T19:29:29.587

如果`newcap`启用，JSHint 期望以大写字母开头的函数是构造函数，因此使用`new`关键字调用。

**解决方案**：禁用此选项或重命名您的函数。

从[文档](http://www.jshint.com/docs/options/#newcap)中：

> 此选项要求您将构造函数的名称大写。将打算与`new`运算符一起使用的函数大写只是一种约定，它可以帮助程序员在视觉上区分构造函数和其他类型的函数，以帮助在使用`this`.
> 
> 不这样做不会在任何浏览器或环境中破坏您的代码，但是通过阅读代码来弄清楚该函数是否应该与或不一起使用会有点困难`new`。`new`这很重要，因为当没有它使用本来打算使用的函数时，`this`将指向全局对象而不是新对象。
> 
> ```
> function MyConstructor() {
>     console.log(this);
> }
> 
> new MyConstructor(); // -> [MyConstructor]
> MyConstructor();     // -> [DOMWindow] 
> ```

要更深入地了解其`this`工作原理，请阅读[理解 JavaScript 函数调用和](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/)Yehuda Katz 的“this”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-31T12:45:21.583

Felix Kling 已经给了你正确的答案。为了完整起见，我会注意`newcap`默认为`true`（文档没有说明，但您可以在[源代码](https://github.com/jshint/jshint/blob/master/src/options.js)中阅读）。这意味着删除`newcap: true`JSHint 选项中的设置不会禁用警告：相反，您需要显式设置`newcap: false`.

# python - pygame 与 tkinter。

> ID：10668116
> 
> 赞同：12
> 
> 时间：2012-05-19T19:14:24.613
> 
> 标签：python, tkinter, pygame

我一直在网上搜索并阅读有关 Python 中的 GUI 开发的信息，并且读到 Tkinter 是 Python 的最佳 GUI 工具包之一。但我也知道 Pygame 是一个可用于 GUI 的库。由于我对编程还很陌生，有人可以解释一下 Pygame 和 Tkinter 之间的区别，哪些应该在什么场合使用。对于国际象棋引擎 GUI，这将是一个更好的选择。非常感谢您提前。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T20:41:24.023

首先，tkinter 绝对不是 python 的*最佳*GUI 工具包。它是最简单的之一，通常与 python 解释器一起提供。但它不如 Qt、wx 或 Gtk 强大。

pygame 是 - 正如其名称所述 - 一个包，旨在允许非常轻松地在 python 中创建游戏，而不是创建 GUI。[因此，它提供了事件处理、图形声音绑定和其他一些对编写游戏有用的东西，并且它是在SDL](http://www.libsdl.org/)之上编写的。

因此，如果您想编写 GUI 应用程序，请不要使用 pygame。

另一方面，GUI 工具包也可用于编写游戏。一般来说，我会说它们比 pygame 之类的多才多艺，但它们并没有真正的可比性。这完全取决于您要编写的应用程序。选择正确的工具通常非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-12T03:04:14.847

Pygame 通常用于创建游戏，但我建议使用街机库。Pygame 不会帮助您创建 GUI。相反，您应该使用专为 GUI 设计的 tkinter。对于您的项目，我建议使用 tkinter。Tkinter 帮助你创建标签、按钮和东西 pygame 帮助你制作图形和东西

# google-app-engine - Google App Engine - JSF - Facelets - 为什么不将 *.xhtml 作为 url 模式？

> ID：10668117
> 
> 赞同：1
> 
> 时间：2012-05-19T19:14:30.247
> 
> 标签：google-app-engine, jsf-2, facelets

我正在将现有应用程序从 Tomcat 迁移到 GAE。在本地测试时，xhtml 页面作为静态页面加载。所有处理都被绕过，包括我的过滤器。但是，如果我引用一个不存在的页面，我的安全过滤器会将请求转发到 login.xhtml 并且 JSF/facelet 呈现正常。

知道为什么要处理 xhtml 页面吗？

其他集成：eclipse Helios、gae 1.6.5、maven (eclipse/m2)、moharra 2.0.9、richfaces 4.2.0、spring 3.1.1

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <!-- https://community.jboss.org/wiki/HowToUseRichFaces40WithGoogleAppEngine -->
   <context-param>
      <param-name>com.sun.faces.enableThreading</param-name>
      <param-value>false</param-value>
   </context-param>
     <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
 </context-param>

<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
  <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

 <filter>
  <filter-name>SecurityFilter</filter-name>
  <filter-class>com.xyz.web.filter.SecurityFilter</filter-class>
 </filter>
 <filter-mapping>
  <filter-name>SecurityFilter</filter-name>
  <url-pattern>/*</url-pattern>
 </filter-mapping>

 <servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
 </servlet>

 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping>

    <servlet>
        <servlet-name>Resource Servlet</servlet-name>
        <servlet-class>org.richfaces.webapp.ResourceServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Resource Servlet</servlet-name>
        <url-pattern>/org.richfaces.resources/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

更新：如果我添加以下映射并引用扩展名为 .jsf 的页面，它会起作用。直接引用 .xhtml ，仍然会加载源代码。为 .xhtml 引用 .jsf 扩展名是典型配置吗？如果是这样，您如何配置应用程序以使通过 .xhtml 访问时源不可用？

```
 <servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
 </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:26:14.850

如果我正确理解您的需求，您应该添加

```
<static-files>
    <exclude path="/**.xhtml" />
</static-files> 
```

在 appengine-web.xml 中

如果你跳过这个，你的浏览器会得到来自“静态文件服务器”的回复，而不是来自 JSF。

# c++ - 打印出 std::string

> ID：10668128
> 
> 赞同：2
> 
> 时间：2012-05-19T19:15:29.203
> 
> 标签：c++, iostream, fstream, cout

在下面的示例代码中

```
 std::string result = exec( "dir" ) ;
    cout<<result; 
```

我收到以下错误

> 错误 C2679：二进制“<<”：未定义运算符，该运算符采用“类 std::basic_string”类型的右侧操作数

我怀疑有一种特殊的方法可以打印出`std::string`.

请帮我调试一下。

此外，我还包含了**iostream.h**、**fstream.h**和**流**头文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:21:10.833

我怀疑你需要符合`cout`条件`std::`

```
 std::cout << result; 
```

或添加`using namespace::std`到您的 cpp 文件的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T19:19:53.730

你需要包括`<string>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-17T11:29:22.253

cout 定义在`<iostream>`. 使`<<`语法与`std::string`s 一起使用需要`<sstream>`.

```
#include <iostream>
#include <sstream>

std::string result = "something";
std::cout << result << " and something else"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T19:49:36.427

**代表@MrLister**回答我自己的问题，因为他不活跃。

我应该包括`<iostream>`和`<fstream>`不包括`.h`. 也`using namespace std;`应该在那之后输入。

前任：

```
#include <string>
#include <iostream>
#include <fstream>
#include <stdlib>

using namespace std; 
```

**非常感谢@MrLister。**

**感谢@dasblinkenlight**。他的回答增强了一点。

# python - 金字塔：使用“view_config”注册的视图未与路由关联

> ID：10668130
> 
> 赞同：6
> 
> 时间：2012-05-19T19:15:33.837
> 
> 标签：python, pyramid

我正在声明这样的路线：

```
from my_package import views
config.add_route("hello", "/hello")
config.scan(views) 
```

在`my_package.views`我看来：

```
from pyramid.view import view_config
@view_config(name="hello")
def hello(request):
    return Response("Hello, world!") 
```

但是路线没有与视图相关联。

具体来说，在调试工具栏中检查路由显示没有可调用的视图与该`hello`路由关联，并且访问`/hello`返回 404。

将路由定义更改为类似的东西`config.add_route("hello", "/hello", views.hello)`可以正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T01:41:50.640

您正在命名*view*，而不是@view_config 装饰器中的*路由。*你要：

```
@view_config(route_name='hello')
def hello(request):
    return Response("Hello, world!") 
```

# javascript - 将 iFrame 源设置为“view-source: {URL}”不起作用

> ID：10668134
> 
> 赞同：1
> 
> 时间：2012-05-19T19:15:46.223
> 
> 标签：javascript, iframe

我正在尝试使用以下命令将 iframe 的 src 设置为“view-source: {URL}”：

```
var url = document.getElementById('url');
var submit = document.getElementById('submit');
var target = document.getElementById('target');
submit.onclick = function(){
    window.frames['target'].location.href = "view-source:" + url.value; 
}; 
```

但它似乎将 iframe 的 src 设置为相对于 iframe 所在的我的网站。我想是因为“view-source：x”仅在使用“location.href”实现时才有效？

是这样吗？

顺便说一句，我正在使用JS！

html:

```
<input type="text" id="url"></input>
<button id="submit">Submit</button>

<iframe id="target" src=""></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:52:58.447

这很有趣。

*必须对已经存在*的窗口中的“view-source”URL 进行某种限制，因为通过`window.open` [works](http://jsfiddle.net/9F73V/)打开一个新窗口，但使用“view-source”URL 打开一个现有窗口（恰好是 iframe）并[没有'不起作用](http://jsfiddle.net/9F73V/1/)，并且在已经存在的顶级窗口中打开 URL 也[不起作用](http://jsfiddle.net/9F73V/2/)（使用不同的 URL 尝试最后一个示例两次，它只会在第一次起作用）。

`view-source`可能最好将其视为浏览器黑魔法巫术而不是常规 URI 方案。

顺便说一句，所有这些都在 Chrome 中进行了测试。对于支持“view-source”的其他浏览器，规则可能会有所不同。

# python - Django - 未采用表单中的输入值 - 总是错误“此字段是必需的”

> ID：10668138
> 
> 赞同：0
> 
> 时间：2012-05-19T19:16:12.180
> 
> 标签：python, django, rest, django-rest-framework

我正在尝试实现此处给出的 djangorestframework [http://django-rest-framework.org/examples/pygments.html](http://django-rest-framework.org/examples/pygments.html)

但是，当我运行代码表单时，即使我填写了所有值，它也不接受任何值。所有字段都返回错误消息“此字段为必填项”。任何人都知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T03:45:20.540

如果使用文件表单，您可能忘记将 enctype="multipart/form-data" 添加到表单模板。如果是这样，则表单中的 FileField 在 POST 之后永远不会有效。

应该是这样的：

```
<form enctype="multipart/form-data" action="/upload/" method="post">{% csrf_token %}
  {{ form.as_p }}
  <input type="submit" value="Submit" />
</form> 
```

# asp.net - IsNULL 和 Coalesce 正确使用

> ID：10668140
> 
> 赞同：2
> 
> 时间：2012-05-19T19:16:37.163
> 
> 标签：asp.net, sql-server-2008, sql-server-2005

因为我们有两个选项来拦截来自数据库的空值......

> 1.  一片空白
> 2.  合并

以下是为上述两个函数编写查询的方法...

`Select IsNull(Columnname, '') As validColumnValue From TableName`

`Select Coleasce(Columnname, '') As validColumnValue From TableName`

查询 - 在哪种情况下应该首选哪个，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T23:42:39.567

这已被散列并重新散列。除了[我在评论中指出的提示](http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/?utm_source=AaronBertrand)以及上面发布的链接和解释@xQbert 之外，根据请求，这里是使用子查询对 COALESCE 与 ISNULL 的解释。让我们考虑这两个查询，它们的结果是相同的：

```
SELECT COALESCE((SELECT TOP (1) name FROM sys.objects), N'foo');

SELECT ISNULL((SELECT TOP (1) name FROM sys.objects), N'foo'); 
```

（关于使用没有 ORDER BY 的 TOP 到 /dev/null/ 的评论，谢谢。）

在 COALESCE 案例中，逻辑实际上被扩展为如下内容：

```
SELECT CASE WHEN (SELECT TOP (1) ...) IS NULL
    THEN (SELECT TOP (1) ...)
    ELSE N'foo'
END 
```

使用 ISNULL，这不会发生。有一个内部优化似乎可以确保子查询只被评估一次。我不知道微软以外的任何人是否知道这种优化是如何工作的，但如果你比较计划，你就可以做到这一点。这是 COALESCE 版本的计划：

![在此处输入图像描述](../Images/d72483b33eec7c0ee704c46d1ff25e09.png)

这是 ISNULL 版本的计划 - 注意它是多么简单（并且扫描只发生一次）：

![在此处输入图像描述](../Images/42d04121ecf21b90347a5cc5011b4e81.png)

在 COALESCE 情况下，扫描发生两次。这意味着子查询被评估两次，即使它没有产生任何结果。如果您添加 WHERE 子句以使子查询产生 0 行，您将看到类似的差异 - 计划形状可能会更改，但您仍会看到双重查找 + 查找或扫描 COALESCE 案例。这是一个稍微不同的例子：

```
SELECT COALESCE((SELECT TOP (1) name FROM sys.objects 
    WHERE name = N'no way this exists'), N'foo');

SELECT ISNULL((SELECT TOP (1) name FROM sys.objects 
    WHERE name = N'no way this exists'), N'foo'); 
```

这次 COALESCE 版本的计划 - 你可以再次看到代表子查询的整个分支逐字重复：

![在此处输入图像描述](../Images/fcb783f747fb9f96a1f31dd601cf9576.png)

还有一个更简单的计划，使用 ISNULL 完成大约一半的工作：

![在此处输入图像描述](../Images/ed22ade1134ea71ea0b9e2174809452e.png)

您还可以在 dba.se 上查看此问题以进行更多讨论：

*   [COALESCE 与 ISNULL 的性能差异？](https://dba.stackexchange.com/q/4274/1186)

我的建议是这样的（您可以在提示和上述问题中看到我的原因）：信任但验证。我总是使用 COALESCE （因为它是 ANSI 标准，支持两个以上的参数，并且不会像数据类型优先级那样做很奇怪的事情）*，除非*我知道我使用子查询作为表达式之一（我不记得曾经做过这样的理论工作之外的工作），或者我遇到了一个真正的性能问题，只是想比较一下 COALESCE 与 ISNULL 是否有任何实质性的性能差异（在子查询案例之外，我还没有找到）。由于我几乎总是将 COALESCE 与类似数据类型的参数一起使用，因此除了回顾我过去所说的内容外，我很少需要进行任何测试（我也是xQbert 7 年前[指出的 aspfaq 文章）。](http://web.archive.org/web/20080509083352/http://databases.aspfaq.com/database/coalesce-vs-isnull-sql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:19:25.627

***开始幽默***：第一个，第二个永远不会工作它拼写错误：D ***END幽默***

---清理响应---

**isNull(value1,value2) 的特点**

*   仅支持 1 次评估，如果第一个为 null，则使用第二个，因此如果它也为 null，则返回 null！
*   是非ANSI标准。这意味着如果数据库可移植性是一个问题，请不要使用这个
*   isnull(value1,value2) 将返回 Value1 的数据类型
*   将返回所选值的数据类型，并在无法进行隐式转换时失败

**Coalesce 的特点(Value1, Value2, value3, value...)**

*   支持Null的多重估值；基本上会从列表中拉入第一个非空值。如果列表中的所有值都为 null，则返回 null。
*   是 ANSI 标准，这意味着数据库可移植性不应该成为问题。
*   将返回所选值的数据类型，如果选择中的所有字段不返回相同的数据类型，则会失败。

所以直接回答这个问题：是否需要开发SQL取决于情况

*   独立于数据库；合并使用更正确。
*   允许多重评估；coalesce 更正确（当然你可以一遍又一遍地嵌入 isnull ......）但是把它放在性能显微镜下，coalesce 可能会赢。（我没有测试过）
*   您是否使用支持 isNull 的数据库引擎？（如果不使用合并）
*   你想如何处理类型转换？隐含与否。

---ORIGINAL----- 为 null 仅支持 2 次评估

coalesce 支持更多... coalesce (columnName1, ColumnName2, ColumnName3, '')

coalesce 返回类似于案例评估的数据类型，而 isnull 返回列表中第一个的数据类型。（我觉得很有趣！）

至于什么时候用哪个。您必须通过查看 SQL 2008 和 2005 上的执行计划进行调查，不同的版本不同的引擎不同的执行方式。

此外，coalesce 是 ansii 标准，isnull 是特定于引擎的。因此，如果您希望在 dbengine 之间具有更大的可移植性，请使用 coalesce。

更多信息[在这里 aspfaq](http://databases.aspfaq.com/database/coalesce-vs-isnull-sql.html) 或[这里 msdn 博客](http://blogs.msdn.com/b/sqltips/archive/2008/06/26/differences-between-isnull-and-coalesce.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:09:40.933

你可以考虑到这一点。

1.  **ISNULL**函数需要两个参数：要检查的值和空值的替换

    2\. **COALESCE**函数的工作方式略有不同**COALESCE**将采用任意数量的参数并返回第一个非**NULL**值，我更喜欢**COALESCE** 而不是**ISNULL**，因为符合**ANSI**标准，而**ISNULL**不符合。

    我希望你找到了你的问题的答案。

# android - 同时在扬声器和耳机上播放的歌曲

> ID：10668142
> 
> 赞同：2
> 
> 时间：2012-05-19T19:16:47.863
> 
> 标签：android, audio, android-intent, speakerphone

我正在使用此代码来选择一首歌曲：

`Intent intent = new Intent(Intent.ACTION_GET_CONTENT);` `intent.setType("audio/*");` `activity.startActivityForResult(Intent.createChooser(intent, "Select a song"),1);`

但是当我使用耳机时，如果我选择一首歌曲，它会在免提电话和耳机上播放......

那么，在这种情况下，如何正确设置声音输出？

谢谢！！

# php - 使用 PHP Curl 伪造发布请求 - 拒绝

> ID：10668144
> 
> 赞同：0
> 
> 时间：2012-05-19T19:16:51.810
> 
> 标签：php, reverse-engineering

我正在尝试构建一个脚本，将信息发布到[RoyalMail 跟踪系统](http://track2.royalmail.com/portal/rm/track)并提取输出。

我目前从他们的服务器收到错误 - 请参阅链接，它以某种方式检测到我没有正常使用他们的网站并给我一个错误。

我认为我已经考虑到的事情：

*   通过事先解析使用其形式的精确副本（post 参数）
*   在每个请求之间保存 cookie
*   接受重定向标头
*   提供一个实际有效的refer header（之前访问过的页面）

有谁知道我需要检查的其他内容或可以弄清楚我做错了什么？

源的完整副本在编辑：请在下面查看我的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:28:40.370

网站通常使用 2 种方法来检测您是人类还是机器人：HTTP REFERER 和 USER AGENT。我建议您使用 Curl 它指定的用户代理和引用者（将“http://something/”替换为您通常会访问的页面的真实 URL，然后再导航到您要使用 PHP 下载的 URL）：

```
<?php

$url = 'http://track2.royalmail.com/portal/rm/track';
$html = file_get_contents2($url, '');

$post['_dyncharset'] = 'ISO-8859-1';

$post['trackConsigniaPage'] = 'track';

$post['/rmg/track/RMTrackFormHandler.value.searchCompleteUrl'] = '/portal/rm/trackresults?catId=22700601&pageId=trt_rmresultspage';
$post['_D:/rmg/track/RMTrackFormHandler.value.searchCompleteUrl'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.invalidInputUrl'] = '/portal/rm/trackresults?catId=22700601&pageId=trt_rmresultspage&keyname=track_blank';
$post['_D:/rmg/track/RMTrackFormHandler.value.invalidInputUrl'] = '';
$post['/rmg/track/RMTrackFormHandler.value.searchBusyUrl'] = '/portal/rm/trackresults?catId=22700601&pageId=trt_busypage&keyname=3E_track';
$post['_D:/rmg/track/RMTrackFormHandler.value.searchBusyUrl'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.searchWaitUrl'] = '/portal/rm/trackresults?catId=22700601&timeout=true&pageId=trt_timeoutpage&keyname=3E_track';
$post['_D:/rmg/track/RMTrackFormHandler.value.searchWaitUrl'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.keyname'] = '3E_track';
$post['_D:/rmg/track/RMTrackFormHandler.value.keyname'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.previousTrackingNumber'] = '';
$post['_D:/rmg/track/RMTrackFormHandler.value.previousTrackingNumber'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.trackingNumber'] = 'ZW791944749GB';
$post['_D:/rmg/track/RMTrackFormHandler.value.trackingNumber'] = ''; 
$post['/rmg/track/RMTrackFormHandler.track.x'] = '50';
$post['/rmg/track/RMTrackFormHandler.track.y'] = '14';
$post['_D:/rmg/track/RMTrackFormHandler.track'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.day'] = '19';
$post['_D:/rmg/track/RMTrackFormHandler.value.day'] = ''; 
$post['/rmg/track/RMTrackFormHandler.value.month'] = '5';
$post['_D:/rmg/track/RMTrackFormHandler.value.month'] = '';
$post['/rmg/track/RMTrackFormHandler.value.year'] = '2012';
$post['_D:/rmg/track/RMTrackFormHandler.value.year'] = ''; 
$post['_DARGS'] = '/portal/rmgroup/apps/templates/html/rm/rmTrackResultPage.jsp';

$url2 = 'http://track2.royalmail.com/portal/rm?_DARGS=/portal/rmgroup/apps/templates/html/rm/rmTrackAndTraceForm.jsp';
$html2 = file_get_contents2($url2, $url, $post);

echo $html2;

function file_get_contents2($address, $referer, $post = false)
{   
    $useragent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1"; 

    $c = curl_init(); 
    curl_setopt($c, CURLOPT_URL, $address);
    curl_setopt($c, CURLOPT_USERAGENT, $useragent);     
    curl_setopt($c, CURLOPT_HEADER, 0);
    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);

    if ($post)
    {
        $postF = http_build_query($post);
        curl_setopt($c, CURLOPT_POST, true);
        curl_setopt($c, CURLOPT_POSTFIELDS, $postF);    
    }

    curl_setopt($c, CURLOPT_COOKIEJAR, 'cookie.txt');
    //curl_setopt($c, CURLOPT_FRESH_CONNECT, 1);
    curl_setopt($c, CURLOPT_REFERER, $referer);
    curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1);
    if (!$data = curl_exec($c)) 
    {
        return false; 
    } 

    return $data;
} 
```

上面更新的代码返回给我：

```
Item ZW791944749GB was posted at 1 High Street RG17 9TJ on 19/05/12 and is being progressed through our network for delivery. 
```

所以它似乎有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T13:24:20.117

我现在已经修复它，问题在于 PHP curl 和跟随重定向，它似乎并不总是发布请求数据并在跟随时发送 GET 请求。

为了解决这个问题，我禁用了 curl 跟随位置，`curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);`然后自己构建了一个递归工作的跟随位置系统。本质上，它从响应中提取位置标头，检查 301 或 302，然后根据需要再次运行该方法。

这意味着信息肯定会再次发布。

我还改进了用户代理字符串，简单地复制我当前的字符串，因为它不会被阻止很长一段时间，因为它在 2012 年正在使用中！

这是 curl 类的最终副本（以防链接失效 - 在过去被否决），它正在工作：

```
/**
 * Make a curl request respecting redirects
 * Also supports posts
 */
class pegCurlRequest {
  private $url, $postFields = array(), $referer = NULL, $timeout = 3;
  private $debug = false, $postString = "";
  private $curlInfo = array();
  private $content = "";
  private $response_meta_info = array();

  static $cookie;

  function __construct($url, $postFields = array(), $referer = NULL, $timeout = 3) {
    $this->setUrl($url);
    $this->setPost($postFields);
    $this->setReferer($referer);
    $this->setTimeout($timeout);
    if(empty(self::$cookie)) self::$cookie = tempnam("/tmp", "pegCurlRequest"); //one time cookie
  }

  function setUrl($url) {
    $this->url = $url;
  }

  function setTimeout($timeout) {
    $this->timeout = $timeout;
  }

  function setPost($postFields) {
    if(is_array($postFields)) {
      $this->postFields = $postFields;
    }
    $this->updatePostString();
  }

  function updatePostString() {
    //Cope with posting
    $this->postString = "";
    if(!empty($this->postFields)) {
      foreach($this->postFields as $key=>$value) { $this->postString .= $key.'='.$value.'&'; }
      $this->postString= rtrim($this->postString,'&'); //Trim off the waste
    }   
  }

  function setReferer($referer) {
    //Set a referee either specified or based on the url
    $this->referer = $referer;
  }

  function debugInfo() {
    //Debug
    if($this->debug) {
      echo "<table><tr><td colspan='2'><b><u>Pre Curl Request</b><u></td></tr>";
      echo "<tr><td><b>URL: </b></td><td>{$this->url}</td></tr>";
      if(!empty(self::$cookie)) echo "<tr><td><b>Cookie String: </b></td><td>".self::$cookie."</td></tr>";
      if(!empty($this->referer)) echo "<tr><td><b>Referer: </b></td><td>".$this->referer."</td></tr>";
      if(!empty($this->postString)) echo "<tr><td><b>Post String: </b></td><td>".$this->postString."</td></tr>";

      if(!empty($this->postFields)) {
        echo "<tr><td><b>Post Values:</b></td><td><table>";
        foreach($this->postFields as $key=>$value)
          echo "<tr><td>$key</td><td>$value</td></tr>";
        echo "</table>";
      }
      echo "</td></tr></table><br />\n"; 
    } 
  }

  function debugFurtherInfo() {
    //Debug
    if($this->debug) {
      echo "<table><tr><td colspan='2'><b><u>Post Curl Request</b><u></td></tr>";
      echo "<tr><td><b>URL: </b></td><td>{$this->url}</td></tr>";
      if(!empty($this->referer)) echo "<tr><td><b>Referer: </b></td><td>".$this->referer."</td></tr>";
      if(!empty($this->curlInfo)) {
        echo "<tr><td><b>Curl Info:</b></td><td><table>";
        foreach($this->curlInfo as $key=>$value)
          echo "<tr><td>$key</td><td>$value</td></tr>";
        echo "</table>";
      }
      echo "</td></tr></table><br />\n"; 
    } 
  }

  /**
   * Make the actual request
   */
  function makeRequest($url=NULL) {
    //Shorthand request
    if(!is_null($url))
      $this->setUrl($url);

    //Output debug info
    $this->debugInfo();

    //Using a shared cookie
    $cookie = self::$cookie;

    //Setting up the starting information
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 Safari/536.11" );
    curl_setopt($ch, CURLOPT_URL, $this->url);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
    curl_setopt($ch, CURLOPT_ENCODING, "gzip");

     //register a callback function which will process the headers
    //this assumes your code is into a class method, and uses $this->readHeader as the callback //function
    curl_setopt($ch, CURLOPT_HEADERFUNCTION, array(&$this,'readHeader'));

    //Some servers (like Lighttpd) will not process the curl request without this header and will return error code 417 instead. 
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Expect:"));

    //Referer
    if(empty($this->referer)) {
      curl_setopt($ch, CURLOPT_REFERER, dirname($this->url));
    } else {
      curl_setopt($ch, CURLOPT_REFERER, $this->referer);
    }

    //Posts
    if(!empty($this->postFields)) {
      curl_setopt($ch, CURLOPT_POST, true);
      curl_setopt($ch, CURLOPT_POSTFIELDS, $this->postString);
    }

    //Redirects, transfers and timeouts
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_AUTOREFERER, false);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $this->timeout);
    curl_setopt($ch, CURLOPT_TIMEOUT, $this->timeout);
    curl_setopt($ch, CURLOPT_MAXREDIRS, 10);

    //Debug
    if($this->debug) {
      curl_setopt($ch, CURLOPT_VERBOSE, true); // logging stuffs
      curl_setopt($ch, CURLINFO_HEADER_OUT, true); // enable tracking
    }

    //Get the content and the header info
    $content = curl_exec($ch);
    $response = curl_getinfo($ch);

    //get the default response headers
    $headers = curl_getinfo($ch);

    //add the headers from the custom headers callback function
    $this->response_meta_info = array_merge($headers, $this->response_meta_info);

    curl_close($ch); //be nice

    //Curl info
    $this->curlInfo = $response;

    //Output debug info
    $this->debugFurtherInfo();

    //Are we being redirected?
    if ($response['http_code'] == 301 || $response['http_code'] == 302) {
      $location = $this->getHeaderLocation();
      if(!empty($location)) { //the location exists
        $this->setReferer($this->getTrueUrl()); //update referer
        return $this->makeRequest($location); //recurse to location
      }
    } 
    //Is there a javascript redirect on the page?
    elseif (preg_match("/window\.location\.replace\('(.*)'\)/i", $content, $value) ||
      preg_match("/window\.location\=\"(.*)\"/i", $content, $value)) {
      $this->setReferer($this->getTrueUrl()); //update referer
      return $this->makeRequest($value[1]); //recursion
    } else {
      $this->content = $content; //set the content - final page
    }
  }

  /**
   * Get the url after any redirection
   */
  function getTrueUrl() {
    return $this->curlInfo['url'];
  }

  function __toString() {
    return $this->content;
  }

  /**
   * CURL callback function for reading and processing headers
   * Override this for your needs
   * 
   * @param object $ch
   * @param string $header
   * @return integer
   */
  private function readHeader($ch, $header) {
      //This is run for every header, use ifs to grab and add
      $location = $this->extractCustomHeader('Location: ', '\n', $header);
      if ($location) {
          $this->response_meta_info['location'] = trim($location);
      }
      return strlen($header);
  }

  private function extractCustomHeader($start,$end,$header) {
      $pattern = '/'. $start .'(.*?)'. $end .'/';
      if (preg_match($pattern, $header, $result)) {
          return $result[1];
      } else {
          return false;
      }
  }

  function getHeaders() {
      return $this->response_meta_info;
  }

  function getHeaderLocation() {
      return $this->response_meta_info['location'];
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T19:24:16.750

首先，您**说**的是皇家邮政。所以我不确定这个简单的小技巧是否会绊倒他们......

但是您*可以*尝试快速欺骗您的用户代理`ini_set()`-

```
ini_set('user_agent', 'Mozilla/5.0 (X11; CrOS i686 1660.57.0) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.46 Safari/535.19' 
```

那是一个 Ubuntu chrome 用户代理字符串。

`cURL`用户代理字符串看起来完全不同。例如：

```
curl/7.15.5 (i686-redhat-linux-gnu) libcurl/7.15.5 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5 
```

这是一个很长的机会 - 但他们可能会拒绝不是来自已识别浏览器的请求。

# eclipse - 如何在 Eclipse 上将源代码添加到 .class 文件？

> ID：10668146
> 
> 赞同：1
> 
> 时间：2012-05-19T19:16:56.213
> 
> 标签：eclipse, .class-file

我正在尝试将 date.class 文件添加到我的 eclipse 项目中，但它返回**Source Not Found**。如何从类文件创建/添加源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:31:33.377

如果您正在将您正在使用的库添加到您的 java 项目中，您可以通过在包资源管理器视图中展开项目节点来附加源 -> 引用库 -> 找到您的 jar -> 右键单击​​，属性 -> Java 源附件。

# html - 如何在本地计算机上测试虚拟包含

> ID：10668148
> 
> 赞同：0
> 
> 时间：2012-05-19T19:17:07.130
> 
> 标签：html, localhost

我作为程序员的第一份工作和我的托管包似乎不喜欢虚拟包含。

我正在四处寻找，我认为我在本地机器 OSX 10.7.4 上的 apache 中启用了它，但不确定。

我只需要虚拟包括工作，因为我无法在我当前的机器上合理地测试 ASP（我老板选择的编程语言）。

这是我的代码

```
 <title>Content</title>

    <link href="style.css" media="screen" rel="stylesheet" type="text/css" />

    <!--#include virtual="/js/jquery-general.html"-->

    </head>

    <body>

    <div class="body_wrap">

<div class="header">
    <!--#include virtual="/header.html"--> 
```

我创建了一个 .htaccess 并设置了用于链接解析的计算机设置，但是当我在源代码中预览时，我只是在代码中而不是错误链接或错误（IE 我可以使用的东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T23:02:08.823

这归结为确保当您在您的 Mac 上进行测试时，您通过本地机器地址进行测试，并且您拥有适当的文件权限，一直指向您的文档

# vim - 需要将一些文本移动到 Vim 中的行首

> ID：10668153
> 
> 赞同：1
> 
> 时间：2012-05-19T19:17:28.673
> 
> 标签：vim

我有几行文字，像这样

```
text1*textX*,text2 
```

我想将 ** 标记之间的文本移动到行首，所以看起来像这样

```
textX "text1" "text2" 
```

我怎样才能在命令行中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:21:08.977

试试下面的命令：

```
s/^\(.*\)\*\(.*\)\*/\2 \1/ 
```

它将 text1*textX*,text2 修改为 textX text1,text2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:01:36.903

如果有文字 * 你需要把它们放在 [*]

```
:%s,\v^([^ ]*)\s\+([^ ]*).*,\2 \1,g

: ................. command
% ................. whole file
s ................. replace
^ ................. begining of line
, ................. search and replace delimiter (comma exchanging by bar)
\v ................ very magic, see :h very-magic
([^ ]*) ........... group 1 (group here) everything except space
\s\+ .............. one or more spaces
([^ ]*) ........... group 2 (group here) everything except space
\s\+ .............. one or more spaces
.* ................ zero or more characters

\2 ................. back reference to group 2
\1 ................. back reference to group 1
, .................. ending replace
g .................. global 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T00:18:30.653

另一种方法...

在上面的示例中，我会做（在正常模式下）：

```
0dt*f*p

. 0     :    goes to start of line
. d     :    starts delete (waits for movement or text object)
. t*    :    moves the cursor to the first asterisk and yanks the deleted text to the unnamed register
. f*    :    moves the cursor to the second asterisk
. p     :    pastes the contents of the unnamed register immediately after the second asterisk 
```

参考：

```
:h f
:h t 
```

当然，在你能够想象出这两个命令的强大功能并使其成为第二天性之前，确实需要一些练习，因此你可以在现实世界的情况下使用它们。

有时我发现这种方法比在 Vim 的命令行上输入正则表达式更有效。

不止几行：

```
qzq:@=n 
```

其中n是重复因子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T21:39:38.763

虽然 Niraj Nawanit 的回答*可能会*为您提供所需的内容，但这正是您所要求的：

```
%s/\([^*]*\)\*\(.*\)\*,\([^[:space:]]*\)/\2 "\1" "\3"/ 
```

# javascript - javascript 变量 = x 或 y 可能吗？

> ID：10668157
> 
> 赞同：3
> 
> 时间：2012-05-19T19:18:10.097
> 
> 标签：javascript

我正在使用以下 javascript 来获取 URL 参数...

```
function getUrlParams() {
  var params = {};
  window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str,key,value) {
    params[key] = value;
  });
  return params;
}
var params = getUrlParams();
var urlvars = (params.email); 
```

网址有`?email=email@domain.com&fbemail=email@domain.com`

在大多数情况下，其中一个值是空白的，否则它们是相同的。所以我试图让 `urlvars = (params.email) or (params.fbemail)`

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T19:22:59.680

我会继续，让我的评论成为答案。为什么不从字面上写下你所说的？

```
urlvars = params.email || params.fbemail; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T19:21:07.630

```
var urlvars = (params.email == "" ? params.fbemail : params.email); 
```

# c - 网络上是否有任何交互式工具可以理解常见的代码库？

> ID：10668160
> 
> 赞同：3
> 
> 时间：2012-05-19T19:18:29.287
> 
> 标签：c, linux, gcc, x86-64, glibc

我正在修改 glibc 2.5 的代码。现在由于 glibc 庞大而复杂，我需要一个非常好的工具来查看代码不同部分的交互。我为此目的使用了[理解，但理解的有效期仅为 15 天。](http://www.scitools.com/)之后，您必须购买它。

所以我的问题是，在网络上，是否有网站可以交互地理解通用代码库，例如 glibc、gcc、linux 内核等。我的意思是你可以在哪里搜索一些函数，然后单击函数调用以查看其定义以及其他有用的功能。我使用过[Koders.com](http://www.koders.com/)，但它只会显示代码，而不是交互的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:42:52.350

[OpenGrok](http://opengrok.github.io/OpenGrok/)很好。您必须自己托管它，它不在网络上。

# iphone - 数组无法从 plist 中读取数据

> ID：10668166
> 
> 赞同：0
> 
> 时间：2012-05-19T19:19:02.200
> 
> 标签：iphone, objective-c, xcode, plist

我发现了几个类似的主题，但没有一个能解决我的问题。基本上我想从 plist 中的数组中读取 nsstring，然后我想覆盖 nsstring 值。

```
NSArray *directoriespaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); 
NSString *documentsDir = [directoriespaths objectAtIndex:0];
NSString *fullnamefordir = [documentsDir stringByAppendingPathComponent:@"data.plist"];

        NSArray *turns = [NSArray arrayWithContentsOfFile:fullnamefordir];
        NSString *resultofarray = [turns objectAtIndex:0];
        NSLog(@"%@",turns); 
        NSLog(@"%@",resultofarray); 
```

nslog 总是显示 null 并且到目前为止我还没有尝试保存任何内容，因为我什至无法读取该值：/

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>8</string>
</array>
</plist> 
```

我也尝试过使用 nsdictionary 但它也不起作用提前谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:32:09.350

首先检查您的 plist 文件是否存在于文档目录中。

```
NSFileMangaer *objFileManager=[[NSFileManager alloc]init];
BOOL isfileExist=[objFileManager fileExistsAtPath:yourDocumentDirectoryPath]; 
```

如果 Bool 值为 true，则检查 plist 的内容。可能是文件目录中不存在该文件，它在资源中。如果您没有将 plist 从资源文件夹复制到文档目录，则首先将其复制到那里，然后尝试访问它。

# zend-framework - Zend Framework 水平元素和 zend 形式的垂直元素

> ID：10668167
> 
> 赞同：1
> 
> 时间：2012-05-19T19:19:08.843
> 
> 标签：zend-framework, zend-form

当我显示一个表单时，它只是一个垂直的元素行。整个右侧未使用。如何让表单垂直和水平渲染元素，使它们适合整个页面？我在想我可以将元素放入显示组中，而不是使用 css 来渲染显示组左右浮动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:28:04.567

使用 viewScript 装饰器以您想要的方式显示表单。这个[先前的答案会有所帮助](https://stackoverflow.com/q/10349340/1145086)。

# javascript - 如何将 javascript 关联数组转换为 json 并在以后使用 parseJSON？

> ID：10668169
> 
> 赞同：1
> 
> 时间：2012-05-19T19:19:13.887
> 
> 标签：javascript, jquery, html, json, associative-array

看我想这样做：

```
function MyObject()
{
  this.attr1;
  this.attr2;
  this.attr3;
}

var myArray = new Array();
myArray["a"] = new MyObject();
myArray["b"] = new MyObject();
myArray["c"] = new MyObject();

var json_myArray = CONVERT_TO_JSON( myArray ); // Or stringify 
```

最后：

```
var myOriginalArray = $.parseJSON( json_myArray ); 
```

myOriginalArray 和 myArray 将是相同的，包括键 (myOriginalArray["a"])

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:21:06.320

```
JSON.stringify() 
```

和

```
JSON.parse() 
```

# google-chrome - browserConnectionEnabled 功能是什么意思？

> ID：10668174
> 
> 赞同：2
> 
> 时间：2012-05-19T19:20:08.270
> 
> 标签：google-chrome, selenium, selenium-chromedriver

我想知道 browserConnectionEnabled 功能参数是什么意思。在chromedriver [http://code.google.com/p/chromium/source/search?q=browserConnectionEnabled&origq=browserConnectionEnabled&btnG=Search+Trunk](http://code.google.com/p/chromium/source/search?q=browserConnectionEnabled&origq=browserConnectionEnabled&btnG=Search+Trunk)中使用，解释为“会话是否可以查询浏览器的连接并禁用它如果需要的话。”。但我不明白它到底做了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:05:10.717

它用于可以操纵连接状态的移动驱动程序（例如，用于测试离线网络应用程序）。据我所知，他目前仅在 Android 驱动程序中可用。

# java - 如何从 Web 读取 UTF 字符串

> ID：10668176
> 
> 赞同：0
> 
> 时间：2012-05-19T19:20:16.053
> 
> 标签：java, character-encoding, html-parsing, urlconnection

我有一个简单的 Web 服务，它列出了可变数量的外语。

其中一些以本地字符集列出（例如中文）。

我必须从网页中阅读此内容并将它们动态添加到`JComboBox`.

其实我是这样读的：

```
public static Vector getSiteLanguages() {
    System.out.println("Reading Home from " + Constants.HOME);
    URL url;
    URLConnection connection;
    BufferedReader br;
    String inputLine;

    String regEx = "<option.*value=.([A-Z]*).>(.*)</option>";
    Pattern pattern = Pattern.compile(regEx);       
    Matcher m;
    Vector siteLangs = new Vector(); 

    try {
        url = new URL( Constants.HOME);
        connection = url.openConnection();
        br = new BufferedReader(new InputStreamReader(connection.getInputStream()));

        while ((inputLine = br.readLine()) != null) {
            m = pattern.matcher(inputLine);
            while ( m.find()) {
                System.out.println(m.group(1) + "->" + m.group(2) );
                siteLangs.add(m.group(2));
            }
        }
        br.close();
    } catch (IOException e) {
        return siteLangs;
    } 

    return siteLangs;       
} 
```

然后在`JFrame`课堂上我这样做：

```
Vector siteLangs = Language.getSiteLanguages();
JComboBox siteLangCombo = new JComboBox(siteLangs); 
```

但是通过这种方式，所有非拉丁语言都丢失了......

在这种情况下如何保留非拉丁信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:28:41.660

默认情况下[`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream%29)使用平台默认字符编码将字节转换为字符。该网站显然使用不同的字符编码将字符转换为 HTTP 响应中的字节。您需要检查 HTTP`Content-Type`响应标头是哪一个。

```
String contentType = connection.getHeaderField("Content-Type"); 
```

假设它是 UTF-8，它是当今网站中最常用的字符编码，力争统治世界，以下是在构建[`InputStreamReader`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.lang.String%29)代码时应该如何指定它：

```
br = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8")); 
```

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

**与具体问题无关**，the[`Vector`](http://docs.oracle.com/javase/7/docs/api/java/util/Vector.html)是自 1998 年以来已被[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)接口取代的遗留类。您确定在 Java 学习狂潮期间正在阅读最新资源吗？此外，当您只需要解析 HTML 时，正则表达式不应该是您的首选。这是Java，不是PHP。使用普通的 HTML 解析器。您可能会发现[Jsoup 对此](http://jsoup.org/)很有帮助。然后可以将您到目前为止的整个代码恢复为两三行。

# sql - 查询选择一列两次的最佳实践

> ID：10668177
> 
> 赞同：1
> 
> 时间：2012-05-19T19:20:16.583
> 
> 标签：sql, database

我有一个名为`concept-relation`包含 3 列的表

```
(relationID, firstConceptID, secondConceptID) 
```

我有一个名为`concept`包含 2 列的表

```
(ID, name) 
```

我想获得的名称`firstConceptID`和`secondConceptID`时间`relationID = 22`。

这是我提出的查询。

```
select * from (
      select name as source from concept where concept.ID in (
      select firstConceptID from `concept-relation` where relationID = 22
       ) 
) as e,
(
      select name as des from concept where concept.ID in (
      select secondConceptID from `concept-relation` where relationID = 22
     )
)as e 
```

它运作良好，但我想知道执行此类查询的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:29:16.200

需要自连接以使其更清洁***通常***被认为是最佳实践，因为它避免了子选择/“IN”

```
SELECT C1.name, C2.name
FROM Concept C1
INNER JOIN concept_Relation CR 
  ON CR.FirstConceptID = C1.ID
INNER JOIN Concept C2 
  ON CR.SecondConceptID = C2.ID
WHERE CR.RelationID = 22 
```

# jquery - Active Check 删除整个 ul

> ID：10668188
> 
> 赞同：0
> 
> 时间：2012-05-19T19:22:27.807
> 
> 标签：jquery

我在 Jquery 中有一个问题，每当我单击复选框并单击 div 内的删除选项时，它会删除整个 ul 而不是其父 ul。

**HTML 代码**

```
<div class="delete">Delete</div>
<ul class="link" id="link">
  <li>
    <div class="style">
      <input type="checkbox" class="styled">
      <div id="style"></div>
    </div></li>
    <li class="edit">http://carouselinfo.com/canal/</li>
    <li><span class="main edit">123</span>
  </li>
</ul> 
```

**查询**

```
$('.delete').on('click',function(){
    var check = $("input[type='checkbox']");
    if(check.is(':checked')){
        //console.log("Works");
        $(this).closest("ul").empty();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:43:45.957

试试这个：

```
$('.delete').on('click',function(){
    $("input[type='checkbox']:checked").closest('ul').empty();
});​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:59:09.423

这是你的 html 和 jquery

更新：http : [//jsfiddle.net/YNxgy/5/](http://jsfiddle.net/YNxgy/5/)

```
$('.delete').on('click',function(){
var check = $("input[type='checkbox']");
check.each(function(){
if($(this).is(':checked')){
    $(this).closest("ul").remove();
}
}); 
```

}); ​​​

问题是 check 变成了所有复选框的列表，因此您需要遍历它并检查每个复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:50:26.483

看到您的小提琴后，您似乎想要删除单击复选框的父 ul：

看看[工作中的小提琴！](http://jsfiddle.net/zuul/bXM76/2/)

**查询**

```
// clicking the checkbox, remove parent UL
$('.link div').on("click", 'input[type="checkbox"]', function() {
  $(this).closest('ul').remove();
}); 
```

# c# - 是否有与 PHP 的 array_key_exists 等效的 C#？

> ID：10668194
> 
> 赞同：7
> 
> 时间：2012-05-19T19:23:35.367
> 
> 标签：c#, arrays, dynamic-arrays

C# 是否有任何等效于 PHP 的[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)函数？

例如，我有这个 PHP 代码：

```
$array = array();
$array[5] = 4;
$array[7] = 8;
if (array_key_exists($array, 2))
    echo $array[2]; 
```

我如何把它变成 C#？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T19:30:26.717

抱歉，C# 不支持 PHP 等动态数组。你可以做什么创建一个[Dictionary<TKey, TValue>(int, int)](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)并使用[.Add(int, int)添加](http://msdn.microsoft.com/en-us/library/k7z0zy8k.aspx)

```
using System.Collections.Generic;
...
Dictionary<int, int> dict = new Dictionary<int, int>();
dict.Add(5, 4);
dict.Add(7, 8);
if (dict.ContainsKey(5))
{
    // [5, int] exists
    int outval = dict[5];
    // outval now contains 4
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T19:29:31.660

C# 中的数组具有固定大小，因此您将声明一个包含 8 个整数的数组

```
int[] array = new int[8]; 
```

然后你只需要检查长度

```
if(array.Length > 2)
{
    Debug.WriteLine( array[2] );
} 
```

这对于值类型来说很好，但是如果你有一个引用类型数组，例如

```
Person[] array = new Person[8]; 
```

那么您需要检查 null ，如

```
if(array.Length > 2 && array[2] != null)
{
    Debug.WriteLine( array[2].ToString() );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T19:30:58.560

在 C# 中，当您声明一个新数组时，您必须为其提供内存分配大小。如果您正在创建一个 数组`int`，则在实例化时会预先填充值，因此键将始终存在。

```
int[] array = new int[10];
Console.WriteLine(array[0]); //outputs 0. 
```

如果你想要一个动态大小的数组，你可以使用`List`.

```
List<int> array = new List<int>
array.push(0);

if (array.Length > 5)
   Console.WriteLine(array[5]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T19:27:03.237

您可以使用 ContainsKey

```
var dictionary = new Dictionary<string, int>()
{
    {"mac", 1000},
    {"windows", 500}
};

// Use ContainsKey method.
if (dictionary.ContainsKey("mac") == true)
{
    Console.WriteLine(dictionary["mac"]); // <-- Is executed
}

// Use ContainsKey method on another string.
if (dictionary.ContainsKey("acorn"))
{
    Console.WriteLine(false); // <-- Not hit
} 
```

# ruby-on-rails-3 - Ruby on Rails 语法错误

> ID：10668196
> 
> 赞同：0
> 
> 时间：2012-05-19T19:23:52.177
> 
> 标签：ruby-on-rails-3, syntax

我是 Rails 新手，我无法弄清楚语法有什么问题 - 它似乎正在通过第一个块（价格）并且一旦我点击'score' => 等就会给我一个错误......

```
<% dataset = { %>
<%  'price' => [@wines.each do |wine| %>
<%                  wine.price_750 %>, 
<%              end].to_vector(:scale),%> 

<%  'score' => [@wines.each do |wine| %>
<%              if current_user.wine_ratings.scoped_by_wine_id(wine.id).exists? %>
<%              current_user.wine_ratings.find_by_wine_id(wine.id).rating_value %>,
<%              else %>
<%                  wine.rating %>,
<%              end%>
<%              end].to_vector(:scale)%>
<% }.to_dataset %> 
```

这是错误消息：

index.html.erb:13: 语法错误，意外 ';'，期待 tASSOC ');'score' => [@wines.each do |wine|

index.html.erb:13: 语法错误，意外的 tASSOC，期待关键字_end ');'score' => [@wines.each do |wine|

index.html.erb:20：语法错误，意外'}'，期待keyword_end }.to_dataset

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:29:13.473

我认为您通常对 MVC 编程感到困惑。这种代码不属于视图，而是在您的控制器或视图助手中，但是，一般来说，尽量在您的视图中将这样的业务逻辑保持在最低限度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:24:01.080

不确定这篇文章是否与您的错误有关，但是当我第一次搜索我在 RoR 中收到的错误时，这个问题是第一个链接。所以粘贴我的解决方案:)。

[缺少控制器参数错误](http://codereferences.blogspot.com/2012/09/missing-controller-argumenterror-ruby.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:28:05.327

只是一个猜测，但我怀疑`erb`对换行符以及 ERb 标签的所有打开和关闭感到困惑。尝试删除除最外层标签之外的所有标签；或者，尝试杀死空白行，或者用疯子包围它。我建议第一个，因为它还提高了可读性、调试速度和人们的第一印象：p

# asp.net - 将样式应用于asp.net中的菜单

> ID：10668200
> 
> 赞同：0
> 
> 时间：2012-05-19T19:24:21.263
> 
> 标签：asp.net, css, menu, stylesheet, menuitem

我曾尝试在菜单项上应用样式，但是当我将鼠标悬停在容器上时，尽管在容器上应用了悬停样式，但什么也没有发生。仅当鼠标单击链接文本时才会发生操作。样式表：

```
 .staticItem:Hover
    {            
        background-color:#FFFF66;
        color:maroon;
        width:105px;
        width:100%;
        padding-left:5px;
        background-position:right;
        background-repeat:no-repeat;
        background-image:url('Images/Go_hover.png');
        box-shadow:2px 3px 3px rgba(61,00,00,.5) inset;     
        border:1px #610000 solid;
        padding-left:10px;
        padding-right:19px;
    }

    .staticItem
    {
        background-color:maroon;
        color:white;
        font-size:18px;
        font-family: "High Tower Text";
        font-weight:bold;
        padding-top:2px;
        padding-bottom:2px;
        padding-left:19px;
        padding-right:10px;
        width:100%;
        background-position:left;
        background-repeat:no-repeat;
        background-image:url('Images/Go.png');
        border:2px #610000 solid;
        cursor:pointer;
        border-radius:5px;
        box-shadow:3px 3px 10px rgba(61,00,00,.8);
    } 
```

ASP代码：

```
 <asp:Menu ID="Menu1" runat="server" CssClass="mainmenu" OnMenuItemClick="Menu1_MenuItemClick">
                    <StaticMenuItemStyle CssClass="staticItem" />
                    <Items>
                        <asp:MenuItem Text="Inbox" Value="Inbox" 
                            NavigateUrl="~/DataEntryOperator/Inbox.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/DataEntryOperator/Outbox.aspx" Text="Outbox" 
                            Value="Outbox"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/DataEntryOperator/Compose.aspx" Text="Compose" 
                            Value="Compose"></asp:MenuItem>
                        <asp:MenuItem Text="Add Employee" Value="Add Employee"
                            NavigateUrl="~/DataEntryOperator/DEOAdd.aspx">
                        </asp:MenuItem>
                        <asp:MenuItem Text="Attendance" Value="Attendance" 
                            NavigateUrl="~/DataEntryOperator/Employee Attendance.aspx"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/DataEntryOperator/Employee Salary.aspx" 
                            Text="Salary Payment" Value="Salary Payment"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/DataEntryOperator/LeaveManager.aspx" Text="Leave Manager"
                            Value="Leave Manager"></asp:MenuItem>
                        <asp:MenuItem NavigateUrl="~/DataEntryOperator/Settings.aspx" Text="Settings" 
                            Value="Settings"></asp:MenuItem>
                        <asp:MenuItem Text="Logout" Value="Logout"></asp:MenuItem>
                    </Items>
                </asp:Menu> 
```

我希望这张图片能解决这个问题。

![当悬停在容器内但在文本之外时](../Images/4328c89864dfc9f337fd0a2719532b22.png)[当悬停在容器内但在文本之外时]

![当悬停在容器内但在文本之外时](../Images/ed6e4f59958cb947941882487cdd5cd9.png)[当悬停在容器内但在文本之外时]

![悬停在文本内时](../Images/202845f7a562e83876ad6191c9882651.png)[悬停在文本内时]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T01:48:08.273

对于移交样式，您应该设置菜单的 StaticHoverStyle。例如：

```
<StaticMenuItemStyle CssClass="menuitem" HorizontalPadding="10px" ForeColor="Blue" />
<StaticHoverStyle CssClass="menuitemhover" ForeColor="White" BackColor="#4E7DD1" />
<StaticSelectedStyle CssClass="menuitemselect" ForeColor="White" BackColor="#4E7DD1" /> 
```

# c++ - 以下语句是函数重载还是函数偏特化？

> ID：10668201
> 
> 赞同：3
> 
> 时间：2012-05-19T19:24:27.520
> 
> 标签：c++, boost, stl

```
template <typename Function> void for_each_element(
  const boost::tuples::null_type&, Function) {}

template <typename Tuple, typename Function> void     
  for_each_element(Tuple& t, Function func) {
    func(t.get_head());
    for_each_element(t.get_tail(),func);
} 
```

给定上面的代码片段，我们是定义一个重载函数还是一个部分特化的函数？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T19:27:40.090

没有函数偏特化之类的东西。这是一个超载。

例如

```
template <typename T, typename U>
void foo(T t, U u);

template <typename T>
void foo<T, int>(T t, int u); // Illegal: no partial specialisation of functions

template <typename T>
void foo(T t, int u); // OK 
```

[将专业化与重载混合](https://stackoverflow.com/a/7108123/235825)时要小心，因为它并不总是像您想象的那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:26:54.750

超载。您不能部分专门化函数，即使可以，您也会有第二对 -`<>`括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:29:34.673

这是一个超载。函数的部分特化是不可能的。如果您尝试对某个函数进行部分特化，编译器会报错。在这种情况下，当您到达元组的末尾时，编译器会使用重载决议来选择第一个函数。

# php - 未捕获的引用错误 $ 未定义 ajax-jquery

> ID：10668206
> 
> 赞同：0
> 
> 时间：2012-05-19T19:25:32.083
> 
> 标签：php, ajax, jquery

我正在尝试使用 jquery 和 ajax 传递一些变量，但由于某种原因它不起作用。这是代码。

```
<div id=' . $result['game_id'] . ' name="' . $user_id . '"  class="rate_widget" >
            <div class="star_1 ratings_stars"></div>
            <div class="star_2 ratings_stars"></div>
            <div class="star_3 ratings_stars"></div>
            <div class="star_4 ratings_stars"></div>
            <div class="star_5 ratings_stars"></div>
            <div class="total_votes">vote data</div>
        </div> 
```

当我检查 chrome 的开发人员工具时，我可以看到 id 和 name 属性设置正确。

这是javascript（使用jquery），我放置了一个警告框以查看值是否已设置但我未定义。本周刚开始学习 ajax 和 jquery 任何帮助将不胜感激。

```
$('.rate_widget').each(function() {
        var widget = this;
        var out_data = {
            game_id : $(widget).attr('id'),
            user_id : $(widget).attr('name')
        };
        alert(game_id);
        $.post(
            'ratings.php',
            out_data,
            function(INFO) {
                $(widget).data( 'fsr', INFO );
                set_votes(widget);
            },
            'json'
        ); 
```

如果不清楚，我试图将带有相应值的 game_id 和 user_id 发送到 php 脚本，但我得到了错误。另外我知道还有另一个同名的问题，但我检查了它并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:13:31.017

你把你的javascript放在里面了吗？

```
$( document ).ready( function(){
     // .. your code
}) 
```

您的 javascript 必须在您的 php 完成生成 html 之前运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:28:33.377

你不能这样引用`game_id`。 `game_id`是`out_data`对象中的索引。

要提醒您必须使用的正确值：

```
alert(out_data['game_id']); 
```

我还建议用引号括起你的对象索引——只是为了让它更具可读性——

```
var out_data = {
  'game_id' : $(widget).attr('id'),
  'user_id' : $(widget).attr('name')
}; 
```

# java - 存储查询值并在活动之间传递它们的提示？

> ID：10668207
> 
> 赞同：0
> 
> 时间：2012-05-19T19:25:36.030
> 
> 标签：java, android, json

我试图存储从 Android Media Store 查询的歌曲列表，但我不确定如何保存多个列（即歌曲名称、曲目路径、持续时间等）

我目前使用 HashMap 和 ArrayList 在列表视图中显示歌曲名称和持续时间，但我想从我的查询中存储更多信息。关于如何获得某种多维向量/容器的任何提示？我尝试使用 JSON obj/arrays，但每次我在其中存储值时，我只能得到最后一个......

```
while (c.moveToNext()) {

                HashMap<String, String> temp = new HashMap<String, String>();

                temp.put("Title", c.getString(c
                        .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)));
                temp.put("Duration", Tools.stringOfTime(Long.parseLong(c.getString(c
                        .getColumnIndex(MediaStore.Audio.Media.DURATION)))));
                list.add(temp); 
```

JSON 尝试...基本上我将每个查询行添加到 1 个 json 对象中，并不断将这些对象放入 json 数组中，但由于某种原因，我只能从列表中获取最后一个值，因为 hashmap 方法工作正常但只能存储 2领域..

```
// object = new JSONObject();
                // try {
                // object.put(
                // "Title",
                // c.getString(c
                // .getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME)));
                // object.put("Data", c.getString(c
                // .getColumnIndex(MediaStore.Audio.Media.DATA)));
                // object.put("Artist", c.getString(c
                // .getColumnIndex(MediaStore.Audio.Media.ARTIST)));
                // object.put("Album", c.getString(c
                // .getColumnIndex(MediaStore.Audio.Media.ALBUM)));
                // object.put("Duration", c.getString(c
                // .getColumnIndex(MediaStore.Audio.Media.DURATION)));
                // jarray.put(object);
                // } catch (JSONException e) {
                // e.printStackTrace();
                // }
                //
                // jlist.add(object);
                // }
                // try {
                // tv.setText(object.getString("Title"));
                // } catch (JSONException e) {
                // // TODO Auto-generated catch block
                // e.printStackTrace();
                // Log.d("SongsActivity", "Couldn't print json object");
                // } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:41:35.743

将游标对象存储在 Application 类字段变量中。

喜欢：http: [//developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:44:10.480

做了一些快速的研究，我看到的几乎每一个这样的问题的答案都会返回：在下一个活动中再次运行查询。

另一个答案是创建一个应用程序类来充当数据中心。

# javascript - 使用 Javascript 更改输入框的值会导致调用焦点方法失败

> ID：10668208
> 
> 赞同：0
> 
> 时间：2012-05-19T19:25:36.360
> 
> 标签：javascript, jquery, setfocus

我有一个使用 jQuery 的网页，它有几个输入框。输入框设置为在 click() 事件触发时自动选择现有文本（值属性）。在我尝试从文档 ready() 事件中预填充其中一个输入框之前，它一直运行良好。如果我这样做，那么尽管在所需字段上调用了 focus() 方法，但该字段不会获得焦点（光标不在输入框中并且文本不会自动选择）。如果我单击该字段，则文本会自动选择，以便该部分仍然有效，只是没有设置焦点。

我已经包含了整个文档就绪事件的 Javascript 代码，以防页面上的元素之间产生不好的协同作用。请注意，getSearchArguments() 调用只是获取 URL 参数并将它们转换为关联数组。这是我尝试自动聚焦/选择的电子邮件地址字段的 HTML：

```
<!-- E-mail Address -->
<div NAME="divEmailAddress" ID="divEmailAddress">
    <img NAME="imgEvernoteEmailAddress" ID="imgEvernoteEmailAddress" src="/images/evernote-mail-address.png" align="left" />
    <input type="text" NAME="emailAddress" ID="emailAddress" wrap="soft" style="margin-left:5px;width:600px;" title="Enter your Evernote E-mail address here" value="Enter your E-mail address" ></input>
</div> 
```

谁能告诉我如何解决这个问题，以便在预填充输入框后 focus() 方法仍然有效？

**更新**：事实证明，在 focus() 调用解决了问题之后，添加了对 select() 的新显式调用。如果有人能告诉我为什么会这样，我将不胜感激。

```
$(document).ready
(
    function() 
    {
        // Put jQuery related initialization code that must occur after the document is ready here.

        // Have all the edit boxes except the Tags edit box auto-select the current text upon entry.

        $("#editEvernoteTags").autoSuggest
        (
            data.items, 
            {
                selectedItemProp: "name", 
                searchObjProps: "name",
                startText: "Enter Evernote tags here...",
                /* See autoSuggest.css
                open: function(event, ui) 
                {
                    $(this).autoSuggest("widget").css
                    (
                        {
                            "width": 200
                        }
                    );
                }
                */
            } // data. items
        ); // $("input[type=text]").autoSuggest

        $("#emailAddress").onblur = checkEmailAddress;

        // $("#emailAddress").css('width', $("#editEvernoteTags").css('width') * 2);

        // Synchronize the control widths to the autoSuggest "as-selections" class element.
        var tagsWidth = $("ul.as-selections").width();
        $("#emailAddress").width(tagsWidth);
        $("#editComment").width(tagsWidth);

        // If an E-mail address was provided as a URL argument, put it in the E-mail address field.
        var urlEmailAddress = getSearchArguments().emailAddress;

        // >>> COMMENTING OUT THIS IF/ELSE BLOCK ALLOWS THE FOCUS() METHOD TO WORK.
        // value="Enter your E-mail address"
        if (urlEmailAddress)
            $("#emailAddress").val(urlEmailAddress);
        else
            $("#emailAddress").val("Enter your E-mail address");

        // E-mail address
        $('#emailAddress').click(function() 
        {
            $(this).select();
        });

        // Comment
        $('#editComment').click(function() 
        {
            $(this).select();
        });

        // Set focus to the E-mail field.
        $("#emailAddress").focus();
        // >>>> This is needed to initially select the text the first time
        //  if the pre-fill code above is used.
        $("#emailAddress").select();
    } // function() 
); // $(document).ready 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:47:24.173

您没有设置焦点处理程序。您已经设置了一个点击处理程序。要触发事件，请使用`.click()`and not `.focus()`。

```
$("#emailAddress").click(); 
```

# eclipse - OSGi 在 Eclipse 中捆绑依赖管理

> ID：10668209
> 
> 赞同：4
> 
> 时间：2012-05-19T19:25:38.883
> 
> 标签：eclipse, osgi, eclipse-pde

我有一个 OSGi 包，它位于 Eclipse IDE 中，表示为 Eclipse 插件项目。我发现满足此插件/捆绑包依赖项的唯一方法是

*   **1**`File > Import... > Plug-ins and Fragments` ）通过向导导入所有依赖项（.jar 文件）
*   **2）**然后在中声明导入的依赖项`MANIFEST.MF`

是的，这个解决方案有效，但另一方面，在我将更改提交到我们的存储库后，我的所有团队成员还必须手动将依赖项导入 Eclipse 以修复编译错误。

**问题**：有没有不需要这些烦人步骤的解决方案？我只想从存储库中提取更改并继续我的工作，而无需`MANIFEST.MF`一次又一次地修复依赖关系......

PS：要检索依赖项，我们使用 Apache Ivy。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:51:50.233

您需要在 Eclipse 中设置一个目标平台。我发现最简单的方法是将所有依赖项放在一个文件夹中，并将目标平台另存为 .target 文件，我将其签入源代码管理。然后我的同事需要做的唯一步骤是检索依赖项并将 Eclipse 配置为使用共享目标定义。如果我们向定义中添加新的依赖项，Eclipse 将通过重新启动或目标平台刷新自动获取更改。

Eclipse 文档应该可以帮助您入门： [http ://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.pde.doc.user/concepts/target.htm](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.pde.doc.user/concepts/target.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:01:49.217

如果您开发基于服务器的应用程序，那么最好让 maven 或 Ivy 管理依赖项并使用 maven bundle 插件来生成 Manifest。这样就可以避开Eclipse OSGi 模式和目标平台。有关如何使用 maven 开发 OSGi 包并在 Apache Karaf 上部署的教程，请参见[http://www.liquid-reality.de/x/DIBZ 。](http://www.liquid-reality.de/x/DIBZ)对于 Ivy，您可能必须使用稍微不同的构建，但基础应该是相同的。

# c++ - 从 .txt 文件中提取行，然后将单词存储到单独的数组中 | C++

> ID：10668212
> 
> 赞同：1
> 
> 时间：2012-05-19T19:26:13.477
> 
> 标签：c++, file, fstream, sstream

我们的教授给了我们这个作业，我们有一个`.txt`格式如下的文件：

```
John 23
Mary 56
Kyle 99
Gary 100
...etc. etc. 
```

我们要做的是读取文件，并将名称和分数存储在并行数组中。

这对我来说比我预期的更具挑战性。在搜索堆栈时，让我感到困惑的是人们用来执行此操作的所有不同的库。我们的教授只是希望我们使用`string`,`fstream`和`sstream`来做这件事。

以下是我到目前为止提出的，它编译完美，将分数从名称中分离出来，但将它们存储在同一个数组中：

```
#include <string>
#include <sstream>
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
  const int SIZE = 50;
  string names[SIZE];
  int score [SIZE];
  short loop = 0;
  string line;

  ifstream inFile("winners.txt");

  if (inFile.is_open())
  {
    while(!inFile.eof())
    {
       istream& getline(inFile >> line);
       names[loop] = line;
       cout << names[loop] << endl;
       loop++;
    }
    inFile.close();
  }

  else cout << "Can't open the file" << endl;

  return 0;
} 
```

我不是在找人来解决我的硬件问题，我只是想朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:39:52.617

如果您想为每行输入读取**两件事，那么有****两个**“读取”语句似乎是合理的：

```
std::string name;
inFile >> name;

int score;
inFile >> score;

std::cout << "Read score " << score << " for name " << name << '\n'; 
```

...然后您可以重复执行此操作，直到您阅读了整个文件。

* * *

**编辑**：在您完成基本逻辑之后，您可能需要考虑错误处理。例如，如果输入文件不包含 50 对 (name, score)，那么对于您的程序来说，什么是合适的行为？你如何改变你的代码来获得这种行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:37:16.540

文件中的每一行都由一个名称和一个由空格分隔的分数组成。您正在阅读每一行，但没有将其拆分为各个部分（名称和乐谱）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T19:38:27.290

理想情况下，您会为此使用向量，但由于您似乎被要求使用数组，我们将坚持使用数组。在您开始阅读条目之前，您上面的内容看起来不错。一种更惯用的方法是使用 std::getline，即

```
ifstream inFile( "winners.txt" );
std::string line;

while( std::getline( inFile, line )) {
  // Do work here.
} 
```

在循环内部，您需要在空间上分割线。不给你解决问题，建议你看一下string类的find和substr函数：[这里](http://www.sgi.com/tech/stl/basic_string.html)。他们将为您提供解决问题所需的一切。

# php - 更改 Twitter Bootstrap 中提交/保存按钮的按钮标签和操作？当表单未保存时这样做吗？

> ID：10668214
> 
> 赞同：1
> 
> 时间：2012-05-19T19:26:41.367
> 
> 标签：php, forms, webforms, filemaker

我有一个简单的非 Ajax 表单，它提供序列化字段，用于跨多个记录保存一大堆数据，即包含多个行项目的报价，每行上的每个字段都是可编辑的。

表单在提交之前需要保存，如果表单被编辑，我希望表单的提交按钮说“保存更改”（通过我的准控制器的 URL 完成），否则说“提交给客户”，如果未编辑。

我正在研究 AJAX，但我想知道它是否适合这种情况。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T03:28:31.047

如果您只想更改按钮上的措辞，AJAX 就太过分了。如果单击“保存更改”正常提交表单（然后使用默认的“提交给客户”再次加载表单？）那么您将不需要它。

你想要的是纯 JavaScript。将 onchange 事件处理程序绑定到更改按钮文本的每个字段。它还可以更改表单的其他方面（例如隐藏的“data_changed”字段），以便您的控制器知道保存数据而不是提交数据。

如果未发生任何更改，该按钮将保持为“提交给客户”。

我在这个答案的轨道上吗？您是否需要在不提交表单的情况下“保存更改”？或者您想了解更多关于如何实现这一目标的详细信息？

编辑：添加示例代码

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Save vs Submit Example</title>
<script type="text/javascript">

onchange_handler = function ( event ) {
    var form_modified = document.getElementById("form_modified");
    var form_submit = document.getElementById("form_submit");

    form_modified.value = "true";
    form_submit.value = "Save Changes";
}

</script>
</head>
<body>
<form method="post">

<input name="quote_number" type="text" onchange="onchange_handler()" />
<input name="quote_date" type="text" onchange="onchange_handler()" />

<input name="line_number" type="text" onchange="onchange_handler()" />
<input name="line_product" type="text" onchange="onchange_handler()" />
<input name="line_quantity" type="text" onchange="onchange_handler()" />

<input name="form_modified" id="form_modified" type="hidden" value="false" />
<input type="submit" id="form_submit" value="Submit to Client" />

</form>
</body>
</html> 
```

# windows-phone-7 - 如何使用 SketchFlow 在 WP7 模板中检测横向？

> ID：10668215
> 
> 赞同：0
> 
> 时间：2012-05-19T19:26:48.187
> 
> 标签：windows-phone-7, expression-blend, sketchflow

我正在使用基于 Windows Phone SDK的官方[Windows Phone 7 SketchFlow 模板。](http://wp7sketchflow.codeplex.com/)有什么方法可以检测用户何时单击播放器中的横向按钮并采取相应措施？具体来说，我想根据方向显示完全不同的视图。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:16:28.857

看起来纵向和横向功能是通过视觉状态实现的。如果您选择正确的视觉状态并进行更改（例如显示不同的控件），它应该会按照您想要的方式工作。

# cloud-foundry - Cloud Foundry 如何处理进程隔离？

> ID：10668220
> 
> 赞同：2
> 
> 时间：2012-05-19T19:27:14.173
> 
> 标签：cloud-foundry

假设我使用[cloudfoundry.org](http://www.cloudfoundry.org)上提供的开源 Cloud Foundry 实现设置了我自己的云。我部署的每个应用程序都会作为单独的用户运行吗？或者这里是否使用了 VMWare 的任何虚拟化技术？例如，每个应用程序会在单独的虚拟机中运行或类似的东西吗？如何为每个应用配置内存、cpu 和磁盘资源限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T22:20:51.567

[我在邮件列表上问过这个。](https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/vfhYoEYqsqs/discussion) 这是我得到的回复：

如果您的 DEA 配置为在安全模式下运行，则每个应用程序都以自己的用户身份运行，并且进程隔离用于保护它们。我们正在转向使用 linux cgroups [http://en.wikipedia.org/wiki/Cgroups](http://en.wikipedia.org/wiki/Cgroups)在 linux 上的模型，使用已经在我们的源代码树中的warden cgroup 包装器。

单个应用程序基于 VM 的隔离非常重要，但我们有长期计划为需要/渴望它的应用程序提供此功能。（与warden/cgroup 工作相反，这是一个近期项目）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:41:58.387

由于这与云铸造的开源有关，您可以尝试在[https://groups.google.com/a/cloudfoundry.org/group/vcap-dev上提问](https://groups.google.com/a/cloudfoundry.org/group/vcap-dev)

您应该在那里得到快速响应！

# r - 将 lines() 应用于数据框/矩阵的列；每条线都有不同的颜色

> ID：10668221
> 
> 赞同：4
> 
> 时间：2012-05-19T19:27:25.327
> 
> 标签：r, matrix, dataframe, line, apply

我正在尝试提出一个不涉及使用其他软件包（例如 ggplot）的解决方案。虽然绘制多条线非常简单，但我还没有想出一种方法来将参数的不同值（例如，不同的颜色）应用于不同的线。下面的代码（带有结果图）是我的尝试，显然没有做我想做的事情。我也不想使用循环，因为我试图让我的脚本尽可能简单。

```
df = cbind(sort(rnorm(10)), sort(rnorm(10,-2)), sort(rlnorm(10)))
plot(0, xlim = c(1,10), ylim=range(df), type="n")
apply(df, 2, lines, type="b", col = c("red", "blue", "black")) 
```

![使用上面的代码生成的绘图](../Images/ff45cc87449c63ecfcf54ae78275b1de.png) 我真正想要的是如下图：

```
plot(0, xlim = c(1,10), ylim=range(df), type="n")
color = c("red","blue","black")
for(i in 1:3){
    lines(1:10, df[,i], type = "b", col=color[i])
} 
```

![想要的情节](../Images/cd82082b7725a2dcffd606dda6d8584a.png) 先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T19:38:18.163

尝试`matplot()`：

```
df <- cbind(sort(rnorm(10)), sort(rnorm(10,-2)), sort(rlnorm(10)))
matplot(df, type="b", lty=1, pch=1, col=c("blue", "red", "black")) 
```

![在此处输入图像描述](../Images/fddb1ccf6fed2edae95fec6de338f384.png)

# iphone - 在 iOS 上，为什么 UIBezierPath 绘图不需要上下文？

> ID：10668222
> 
> 赞同：14
> 
> 时间：2012-05-19T19:27:30.397
> 
> 标签：iphone, ios, uikit, core-graphics

`drawRect`在 iOS 上，我们可以在使用中画一条线

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextBeginPath (context);
CGContextMoveToPoint(context, 0, 0);
CGContextAddLineToPoint(context, 100, 100);
CGContextStrokePath(context); 
```

但是如果我们删除上面的代码，我们也可以绘制一个矩形，然后使用：

```
UIBezierPath *path = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 100, 100)];
[path stroke]; 
```

两个相关问题：

1) 为什么`UIBezierPath`不需要获取或使用当前上下文？

2）如果我有两个上下文：一个用于屏幕，一个是位图上下文，那么如何判断要绘制到哪个上下文`UIBezierPath`呢？我想它可能是`UIGraphicsSetCurrentContext`，但它不存在。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T19:30:41.067

[`UIBezierPath`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBezierPath_class/)确实使用上下文。它使用当前的 UIKit 图形上下文。这与您已经得到的完全一样[`UIGraphicsGetCurrentContext()`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsGetCurrentContext)。

如果你想`UIBezierPath`使用不同的上下文，你可以使用[`UIGraphicsPushContext()`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsPushContext)，但你必须记住[`UIGraphicsPopContext()`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsPopContext)在完成后使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T15:23:38.483

据我所知，提到 CGContextFillRect 比使用 UIBezierPath 快约 8.5 倍（如果性能是一个因素并且假设您不需要使用 UIBezierPath 进行更复杂的绘图），我认为这可能很有用。

我在 Apple 的 HazardMap 示例（http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html）中添加了一些时间，对于 CGContextFillRect，每个矩形的毫秒时间约为 0.00064 毫秒/矩形方法与 UIBezierPath 方法的 ~0.00543 ms/rect 相比，可能 b/c 后者需要更多的消息传递开销。

即我正在比较使用

```
CGContextFillRect(ctx, boundaryCGRect); 
```

与使用

```
UIBezierPath* path = [UIBezierPath bezierPathWithRect:boundaryCGRect];
[path fill]; 
```

在 HazardMapView 的内部循环中（加上上述更改以推送/弹出传递给 HazardMapView drawMapRect:zoomScale:inContext:) 的上下文。

预计到达时间

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-19T19:35:43.640

> **在 iOS 上，我们可以在`drawRect`**使用中画一条线

我已经强调了这个声明的重要部分。在 内部`drawRect:`，UIKit 已经为您设置了一个上下文，任何基于对象的绘图指令都直接进入该上下文。`UIBezierPath`确实在使用该上下文，它只是不需要显式传递。

在 Cocoa Touch 中，必须始终有一个绘图上下文（在这种情况下，上下文最终会被绘制到屏幕上）。如果你不在里面`drawRect:`，你必须自己创建一个上下文。

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextBeginPath (context);
CGContextMoveToPoint(context, 0, 0); 
```

请注意，第一个函数调用是**Get**`CurrentContext()`。当您使用 CoreGraphics 的函数式绘图界面时，您需要将上下文传递给每个函数，但您不是在这里创建一个，您只是检索已经存在的一个。

[图形上下文](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW5)位于堆栈中。如果您想绘制到您创建的上下文中，您可以使用（正如 Kevin 已经提到的）将其推入堆栈`UIGraphicsPushContext()`，然后弹回前一个。

# nginx - Nginx别名父目录奇怪地重定向并且身份验证不覆盖站点

> ID：10668230
> 
> 赞同：0
> 
> 时间：2012-05-19T19:28:28.963
> 
> 标签：nginx

我有两个关于 Nginx 的问题，希望有人可以帮助我。

我已经在我的站点中设置了一个别名目录，名为 /wordpress/ 并使其指向我的 webroot 之外的一个文件，现在一切正常，花花公子，直到我尝试浏览父目录：/wordpress。它似乎想重定向到 *.x.co.uk（其中 x 代表我的域名）。配置跟随。

我的另一个问题是，我的 Auth 覆盖的范围不超过根目录 / 尽管在 / caluse 中以捕获任何不是 /wordpress/ 的东西，这再次让我感到困惑。因此，如果我去 /，我必须进行身份验证，但如果我去 /video，我可以在没有身份验证的情况下进入我的网站。

我对 Nginx 有点陌生，所以我在阅读 Wiki 时感到困惑，这很愚蠢。

有人有想法么？这是我的配置，供您观赏：

```
server {
        listen          80;
        server_name     _;
       root            /server_ws/the_stage/htdocs;
        access_log      /var/log/nginx/access.log;
        error_log       /var/log/nginx/error.log;

        error_page 404 /error/notfound;

        location /wordpress/ {
                alias /server_ws/wordpress/;
#               try_files $uri $uri/;
        }

   location ~* ^/wordpress/(.+).(jpg|jpeg|gif|css|png|js|ico|xml)$ {
           alias            /server_ws/wordpress/$1.$2;
           access_log      off;
           expires         30d;
   }

        location / {
                auth_basic "Restricted";
                auth_basic_user_file /etc/apache2/passwords;

                index   index.php;

                if ($host = 'x.co.uk') {
                        rewrite ^/(.*)$ http://www.x.co.uk/$1 permanent;
                }

                if (-f $request_filename) {
                        break;
                }

                if (!-e $request_filename) {
                        rewrite . /index.php last;
                }

                try_files $uri $uri/ /index.php;
        }

    location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico|xml)$ {
            root            /server_ws/the_stage/htdocs;
            access_log      off;
            expires         30d;
    }

} 
```

以下是身份验证的一些日志条目。您可以在此看到一个机器人试图访问我的 robots.txt 并由于身份验证而失败：

```
2012/05/20 11:54:10 [error] 12059#0: *2008 no user/password was provided for basic authentication, client: 108.162.215.232, server: _, request: "GET /robots.txt HTTP/1.0", host: "www.x.co.uk" 
```

但是后来我转到我网站上的 /video 并没有收到任何错误，但我得到了以下访问日志：

```
xxx.xxx.xxx.xxx - - [20/May/2012:12:51:35 +0000] "GET /video?cat=gaming&sort=upload_date HTTP/1.1" 301 185 "-" "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)" 
```

这是 /wordpress 访问的最新日志：

```
xxx.xxx.xx.xxx - - [20/May/2012:13:01:08 +0000] "GET /wordpress HTTP/1.1" 301 185 "-" "Opera/9.80 (Windows NT 6.1; WOW64; U; Edition Campaign 21; en) Presto/2.10.229 Version/11.64" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:50:15.973

# php - 当表单字段在php中为空时从数组中获取信息

> ID：10668235
> 
> 赞同：-1
> 
> 时间：2012-05-19T19:29:10.303
> 
> 标签：php, forms

我有一个表单字段 ( `id="rate" name="rate"`)，用户需要为其输入值。但是，如果用户将其留空，则该值将从`costs.php`. 我已经编写了这段代码，但它似乎不起作用；`$total`变量对我很重要。

```
<?php 
   $total = $form->data['rate'];
   if($value){
     echo $form->data['rate'];
   } else if($value === false){
     echo $costs['usd_ia'];
   } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:33:30.863

很可能您应该将其更改`else if`为无条件的`else`，并使用 $total 而不是 $value。

```
<?php

$total = $form->data['rate'];
if ($total) {
   echo $form->data['rate'];
} else {
   echo $costs['usd_ia'];
} 
```

但是，请注意，这可能是有问题的。如果用户输入（比如说）一个值`0`，这将导致`if ($total)`评估为 FALSE，因此如果 0 值对您的表单有效，那么您将不得不使用一些更复杂的逻辑。

# php - PHP：按日期范围过滤数组

> ID：10668243
> 
> 赞同：2
> 
> 时间：2012-05-19T19:29:58.293
> 
> 标签：php, arrays

我有一个对象数组。每个对象都包含一个日期值。

根据特定日期范围过滤数组的最佳方法是什么，其中范围指定为 startDate 和 endDate？

* * *

更新：

感谢您的回复，我最后使用了此代码：

```
 foreach ($myArray as $key => &$value)
 {
      $d = DateTime::createFromFormat(self::DATE_FORMAT, $value["orderDate"]); 
      if ($d->getTimestamp() < $startDateTime->getTimestamp() || $d->getTimestamp() > $endDateTime->getTimestamp())
      {
           unset($myArray[$key]);
      }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:32:55.733

这是基本思想；您必须针对您的特定对象类型和日期类型对其进行调整。

```
foreach ($myarray as $item)
    if ($item->dateitem >= $startDate  &&  
        $item->dateitem <= $endDate)
            $newarray[] = $item; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T19:34:12.477

假设您的对象包含日期的字符串表示形式，我们将使用[strtotime](http://us2.php.net/strtotime) () 将其转换为数字时间戳。

要过滤掉不在给定范围内的所有内容（保持与开始/结束值匹配的值）：

```
 $rangeStart = strtotime('-1 year');
 $rangeEnd = strtotime('yesterday');

 array_filter( $array, function($var) use ($rangeStart, $rangeEnd) {
    $utime = strtotime($var->date);
    return $utime <= $rangeEnd && $utime >= $rangeStart;
 }); 
```

按日期对数组进行排序：

```
 function cmp($a, $b) {
    $aTime = strtotime($a->date);
    $bTime = strtotime($b->date);

    if( $aTime === $bTime ) { return 0; }
    else { return $aTime < $bTime? -1 : 1; }
 }

 usort( $array, 'cmp' ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T19:32:39.383

```
function inRange($thingy) {
  return $thingy->theDate >= $startDate && $thingy->theDate < $endDate;
}

$filtered = array_filter($unfiltered, "inRange"); 
```

# android - 在 ListView 中添加属性

> ID：10668252
> 
> 赞同：0
> 
> 时间：2012-05-19T19:31:02.037
> 
> 标签：android, xml, listview

我的 ListView 有问题。我希望它包含与我的对象不同的值。我的对象 Item 有 4 个属性：

```
String name;
int number;
int price;
boolean check; 
```

这是我的代码：

```
ArrayList<Item> list = new ArrayList<Item>();
list.add(new Item("hej", 1, 1, false));
list.add(new Item("farvel", 2, 2, true));
setListAdapter(new ArrayAdapter<Item>(this, R.layout.list_item, R.id.tv, list));

ListView lv = getListView();
lv.setTextFilterEnabled(true); 
```

现在我希望将真/假链接到此 XML 中的复选框：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<CheckBox
    android:id="@+id/cb"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/tv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView>

</LinearLayout> 
```

我真的很想得到你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:20:10.480

您需要创建自己的适配器来做到这一点。

基本上，您扩展适配器类之一并覆盖（根据需要）以下方法：

```
getCount
getItem
getItemId
getView 
```

有几个指南/教程浮动：

[所以问题](https://stackoverflow.com/a/5561813/1105376)

[适配器教程 1](http://developerlife.com/tutorials/?p=327)

[自定义 ArrayAdapter 示例](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

祝你好运！

# apache - 如何透明地将旧主机 url 重写为新主机 url？

> ID：10668259
> 
> 赞同：0
> 
> 时间：2012-05-19T19:32:17.837
> 
> 标签：apache

我在同一个域中有两个 apache 虚拟主机（并且在同一个物理系统上）：

```
old.example.com
new.example.com 
```

我希望能够透明地重写或将某些旧网址映射到新网址。示例：对[http://old.example.com/foo](http://old.example.com/foo)的请求实际上会导致对[http://new.example.com/foo的请求](http://new.example.com/foo)

我希望 http 客户端（浏览器）不知道重写...换句话说，我不希望重定向。而且，我只想重写特定的 url。

我可以在虚拟主机或 htaccess 文件中添加什么来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:42:15.860

我猜你可以[通过 mod_rewrite 设置你的虚拟主机](http://httpd.apache.org/docs/trunk/rewrite/vhosts.html)，然后简单地将这些重写步骤添加到配置中。

但是，如果您要做的只是重用文件系统中的某些内容，而配置文件中没有任何魔法，那么我将使用符号链接。（不过，我不知道 Windows 服务器是否有任何等价物。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:25:00.493

我在这里找到了答案：[http](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html) ://httpd.apache.org/docs/2.0/misc/rewriteguide.html在标题为*Dynamic Mirror*的部分中。[我在http://old.example.com](http://old.example.com)上将此添加到我的 htaccess 中：

```
RewriteEngine on
RewriteBase /
RewriteRule ^foo http://new.example.com/foo [P] 
```

功能标志**P**告诉规则使用*代理吞吐量*。

# sql - 在 SUBQUERY 上使用 INNER JOIN 更新未按预期工作

> ID：10668260
> 
> 赞同：0
> 
> 时间：2012-05-19T19:32:26.810
> 
> 标签：sql, sql-server

我正在尝试使用此查询（原型）更新 tableA 中的 col1 从 tableD 获取数据：

```
UPDATE tableA
SET TableA.col1 = tableB.col1
FROM tableA 
INNER JOIN
    (SELECT tableC.col1, id 
     FROM
         (SELECT 
              ROW_NUMBER() OVER(PARTITION BY tableD.col1 ORDER BY (tableD.someCol desc) AS "Row Number", 
              col1, id 
          FROM tableD) tableC
     WHERE [Row Number] = 1) tableB ON tableA.id = tableB.id
WHERE 
    some_clause_on_tableA_and_tableB; 
```

但不幸的是，这不能正常工作（更新不正确），但如果我将 tableB 的数据显式存储在 #temp 表中，然后尝试从该 #temp 表更新 tableA 则它工作正常（原型查询）：

```
SELECT * 
INTO #temp 
FROM
    (SELECT 
         ROW_NUMBER() OVER(PARTITION BY tableD.col1 ORDER BY (tableD.someCol desc) AS "Row Number", 
         col1, id 
     FROM tableD) tableC
WHERE
    [Row Number]=1;

UPDATE tableA
SET TableA.col1 = tableB.col1
FROM tableA 
INNER JOIN #temp tableB ON tableA.id = tableB.id
WHERE some_clause_on_tableA_and_tableB; 
```

我不知道为什么后来的作品，但首先没有。似乎在第一次查询中，两个嵌套的子查询（具有行排名）无法获取正确的数据，但我可能错了。任何帮助将不胜感激！！！

谢谢，萨钦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:14:22.387

我感觉您可能缺少使用分区和 order by 关键字对 tableD 中引用的 tableA id 进行分组的 OVER 子句。所以基本上我认为你想要做的是用tableA中每个tableA的id的第一行更新tableA中找到的每个条目。

也许尝试这样的事情作为你的 tableC 子查询

```
SELECT
    ROW_NUMBER() OVER (PARTITION BY tableD.fk_to_tableA order by tableD.something
    ,col1 FROM tableD 
```

编辑以下评论

对于它的价值，这里有一个您正在尝试的查询的简单示例，它工作正常。这个例子与你的问题有什么不同？

```
declare @entity table (id int, latestEventId int)

declare @event table (id int, entityId int)

insert into @entity values (1, null), (2, null), (3, null), (4, null), (5, null)

insert into @event values (1, 1), (2, 2), (3, 3), (4, 4), (5, 5), (6, 1), (7, 2), (8, 3), (9, 4), (10, 5), (11, 1), (12, 2), (13, 3), (14, 4), (15, 5)

update tableA
    set tableA.latestEventId = tableB.id
from 
    @entity tableA
inner join
(
    select
        * 
    from 
    (
        select 
            *,
            rn = ROW_NUMBER() over (partition by e.entityId order by e.id desc)
        from
            @event e
    ) tableC
    where
        rn = 1
) tableB 
on tableB.entityId = tableA.id

-- expect the result of entity id's 1 to 5 with the values 11 to 15
select * from @entity 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:10:17.683

必须有一些示例未涵盖的内容。我的意思是，所提出的两种方法是等价的。但是，如果您的真实查询看起来更复杂，那可能会以某种方式阻止您看到真正的问题。

为了帮助自己更快地发现问题，您可以通过摆脱一层嵌套来简化查询：`[Row Number]=1`条件可以移动到主查询，如下所示：

```
UPDATE tableA
    SET TableA.col1 = tableB.col1
FROM tableA INNER JOIN (
    SELECT
        ROW_NUMBER() OVER(PARTITION BY tableD.col1 ORDER BY (tableD.someCol desc) AS "Row Number",
        col1,
        id
    FROM tableD
) tableB
ON tableA.id = tableB.id
WHERE some_clause_on_tableA_and_tableB
  **AND tableB.[Row Number] = 1**; 
```

此外，由于您并没有真正分配新的别名，您可以从UPDATE 语句`tableA`的子句中省略它，如下所示：`FROM`

```
UPDATE tableA
    SET TableA.col1 = tableB.col1
**FROM (**
    SELECT
        ROW_NUMBER() OVER(PARTITION BY tableD.col1 ORDER BY (tableD.someCol desc) AS "Row Number",
        col1,
        id
    FROM tableD
**) tableB**
ON tableA.id = tableB.id
WHERE some_clause_on_tableA_and_tableB
  AND tableB.[Row Number] = 1; 
```

从子句中省略目标表没有任何意义`FROM`，但是查询本身可能会变得更清晰，因此更容易发现潜在问题。

或者，正如@mouters 所建议的那样，您可以将子选择重写为公用表表达式 (CTE)，或者实际上，如果`tableD`实际上也是子查询，则可以将其重写为一系列。考虑一下：

```
**WITH tableB AS (**
    SELECT
        ROW_NUMBER() OVER(PARTITION BY tableD.col1 ORDER BY (tableD.someCol desc) AS "Row Number",
        col1,
        id
    FROM tableD
**)**
UPDATE tableA
    SET TableA.col1 = tableB.col1
**FROM tableA INNER JOIN tableB  /* or just: FROM tableB */**
ON tableA.id = tableB.id
WHERE some_clause_on_tableA_and_tableB
  AND tableB.[Row Number] = 1; 
```

同样，将子选择重写为 CTE 没有任何影响（在这种特殊情况下，因为您只引用 CTE 一次），但这可能（或可能不会）有助于帮助您找到问题的原因。

# c# - 了解 List<> 类型的属性如何工作

> ID：10668262
> 
> 赞同：0
> 
> 时间：2012-05-19T19:32:37.513
> 
> 标签：c#, list, properties

我不得不认为我不明白它是如何工作的。

我的具体问题是：**当我没有设置器和后备列表变量时，为什么允许我设置列表属性元素的值？**

让我解释。假设我有一个 CustomerTable 类：

```
public List<string> Name
{
    get
    {
        var names = new List<string>();
        foreach (CustomerRow row in Rows)
        {
            name.Add(row.Name);
        }
        return names;
    }
} 
```

这个想法是让一个只读属性显示一列的内容，而不在我的类中复制数据，因为我已经有一个行列表。

无论如何，当 Visual Studio 接受如下代码片段而没有声称任何类型的错误时（它甚至允许我在没有错误的情况下编译），我会感到惊讶：

```
Name[0] = "John"; 
```

**我不明白为什么这是合法的。我的属性没有设置 { }，甚至没有要修改的后备列表。这段代码应该做什么？**

它不应该像一种方法一样工作吗？除了我每次有人“得到”它时生成的列表之外，真的有一个存储列表吗？

（我可以根据需求提供更多细节，也将感谢任何其他评论）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:35:57.530

您没有设置属性，而是获取属性（这是一个列表）然后对其进行操作（在您的示例中，更改其第一个成员）。如果您要尝试：

```
Name = new List<string>(); 
```

你会得到你期望得到的编译错误。请注意，由于您每次都在创建一个新列表，因此您的`Rows`属性仍然是只读的（假设它没有在其他地方公开）。如果您想明确对返回集合的更改是没有意义的，您可以将`Name`属性的类型更改为`IEnumerable<string>`：

```
public IEnumerable<string> Name
{
    get
    {
        return Rows.Select(row => row.name); //LINQ is more elegant here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:44:03.167

在您的示例中，您没有设置`Name`（实际上是只读的），但是您设置了包含在`Name`, 中的第一个列表元素`Name[0]`，并且没有理由不能这样做，因为`List<string>`它是允许设置的对象类型元素。

# php - 格式问题。在php vs div中将值传递给javascript

> ID：10668265
> 
> 赞同：0
> 
> 时间：2012-05-19T19:33:21.533
> 
> 标签：php, javascript, html

我在将 div 转换为 php 变量时遇到问题。这作为一个 div 非常有用，但是如果用户正在查看另一个将显示的使用页面，我需要将其实现到我的 php 脚本中以显示这一点。

```
 //Check to see if you are tracking this member. 

   $sqlFollow = mysql_query("SELECT * FROM follow WHERE follower_id= " .$id. " and myMember = " .$viewerID . " LIMIT 1"); 

   $numTrack = mysql_num_rows($sqlFollow);

   if ($numTrack < 1) {
       $divValue = "Track This Person";
       $onclick = "trackMember";    
                  }
    else          {
       $divValue = "Don't Track Person";
       $onclick = "donttrackMember";
            };

    $display_tracking_option = '<div class="track_btn_div" id="addremoveTrack"><a href="javascript:;" onclick="'. $onclick.'"("'.$id.'","'.$viewerID.'");"><span class="follow_b">'.$divValue.'</span></a></div>'; 
```

将其保存在 PHP 中作为值我在使用“ vs ”时遇到了问题。

```
 $display_tracking_option = '<div class="track_btn_div" id="addremoveTrack"><a href="javascript:;" onclick="'. $onclick ."(\''. $id .'\',\''. $viewerID .'\');"><span class="follow_b">"'.$divValue.'"</span></a></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:38:58.980

你可能想要这个：

```
$display_tracking_option = '<div class="track_btn_div" id="addremoveTrack"><a href="javascript:;" onclick="'. $onclick.'("'.$id.'","'.$viewerID.'");"><span class="follow_b">'.$divValue.'</span></a></div>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:39:39.987

您正在使用 php 将内容添加到变量中，因此您不需要回显任何内容：

```
$display_tracking_option = '<div class="track_btn_div" id="addremoveTrack"><a href="javascript:;" onclick="'. $onclick.'("'.$id.'","'.$viewerID.'");"><span class="follow_b">'.$divValue.'</span></a></div>'; 
```

简单地连接字符串。

或者，您可以使用[`sprintf()`](http://nl.php.net/manual/en/function.sprintf.php)：

```
$theString = '<div class="track_btn_div" id="addremoveTrack"><a href="javascript:;" onclick="%s("%s","%s");"><span class="follow_b">%s</span></a></div>'
$display_tracking_option = sprintf($theString, $onclick, $id, $viewerID, $divValue); 
```

另一件事：为什么你有内联的东西？

# java - 带有自定义内容视图的 AlertDialog 看起来不像 AlertDialog

> ID：10668269
> 
> 赞同：0
> 
> 时间：2012-05-19T19:33:46.713
> 
> 标签：java, android, android-alertdialog, android-dialog

我有一个 AlertDialog 的自定义子类，它应该显示范围内所有可用 Wifi 网络的列表。

我通过创建它的实例并调用 show() 来显示此对话框，并且**我没有使用 AlertDialog.Builder**（因为我希望使用我的自定义类）。

我有自己的布局来显示为内容视图，但我想要常规的 AlertDialog 外观，带有标题标题和框架。

我的自定义布局非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</ListView> 
```

我将它添加到 onCreate() 的对话框中：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTitle(R.string.pick_wifi_network);
    setContentView(R.layout.pick_wifi_dialog);
    // Rest of implementation
} 
```

但结果看起来一点也不像 AlertDialog。没有标题，ListView 占据整个屏幕：

![在此处输入图像描述](../Images/56737a6d3ca38ed845edcb292d04bb52.png)

那么我做错了什么，我应该怎么做呢？

谢谢！

**编辑：** 为什么我不使用 AlertDialog.Builder：我的自定义 Dialog 类负责监听 WifiManager 的 SCAN_RESULTS_AVALIABLE_ACTION，并在结果刷新时更新 ListView。出于这个原因，我不能使用 AlertDialog.Builder。 **结束编辑**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:49:47.570

我认为您的问题出在对话框的主题中（您没有应用该主题）。

我没有尝试过，但如果我理解正确，它应该可以工作：

在对话框的构造函数中，调用接收主题的超级构造函数，传递标准对话框主题。

```
public CustomDialog(Context context) {
    super(context, android.R.style.Theme_Dialog);
} 
```

在 Android 中创建的对话框具有此默认主题。

Theme_Dialog 的文档状态（v2.2）：

> 对话框窗口和活动的默认主题（在 API 级别 10 和更低级别），由 Dialog 类使用。这会将窗口更改为浮动（而不是填满整个屏幕），并在其内容周围放置一个框架。如果您想制作一个看起来像对话框的活动，您可以在活动上设置此主题。

希望这可以帮助！

**编辑：**

要解决问题`setTitle`，最简单的方法似乎是继承`Dialog`而不是`AlertDialog`.

同样这样做，不需要`android.R.style.Theme_Dialog`在构造函数中传递（显然子类化`AlertDialog`没有主题）。

# asp.net-mvc-3 - MVC 最佳实践中的全局变量

> ID：10668271
> 
> 赞同：0
> 
> 时间：2012-05-19T19:33:56.780
> 
> 标签：asp.net-mvc-3

在 ASP.NET MVC 3 中处理全局、请求中的请求、变量的最佳实践是什么。我需要的是从数据库中获取的配置，我想在整个 MVC 应用程序中提供这些配置，但变量可以改变基础在请求上，所以它需要限制在请求独家新闻中。配置变量是全局操作过滤器中的阻碍，所以我现在处理它的方式只是将变量添加为请求数据，但我希望有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:36:40.943

您可以使用它`HttpContext.Items`来存储在整个 HTTP 请求中可用的数据。

# javascript - 如果页面未查看活动页面，则 Javascript 计时器不会运行

> ID：10668275
> 
> 赞同：1
> 
> 时间：2012-05-19T19:34:09.853
> 
> 标签：javascript, javascript-events

我知道问题听起来很奇怪，但问题就在这里，以下代码完美运行。计时器从 30 分钟开始，每秒钟未检测到鼠标移动都会倒计时。当检测到鼠标移动时，计时器重置为 30 分钟，在页面不活动的 25 分钟标记处，一个 CSS 弹出窗口显示倒计时最后 5 分钟，在 30 分钟时，用户自动注销。但是，如果用户打开了页面但正在完全查看另一个网页，则计时器会减慢或完全停止，具体取决于浏览器。这实际上完全否定了脚本。是否可以让脚本继续正常倒计时，并且即使用户没有主动查看页面，仍然强制用户离开页面？或者这些浏览器怪癖是为了减少内存负载？

```
 var Timing = 0;
     var CounterTime = 0;
     var TimePast = 0;
     var Seconds = 1800;
     var Warn = 1500;
     var MinuteLeft = 30;
     var SecondLeft = 60;
     var StopRefresh = 0;

     function ResponseTime()
     {
          Timing = Timing + 100;
          CounterTime = CounterTime + 100;
          if(Timing % 1000 == 0)
          {
                TimePast = TimePast + 1;
                SecondLeft = SecondLeft - 1;
                if(SecondLeft == 59)
                {
                     MinuteLeft = MinuteLeft-1; 
                }
                if(SecondLeft == 0)
                {
                     SecondLeft = 60;
                }
          }
          if(MinuteLeft != 0)
          {
                if(SecondLeft == 60)
                {
                      document.getElementById('CountdownTimer').firstChild.nodeValue = MinuteLeft+":00";
                }else if(SecondLeft < 10)
                {
                      document.getElementById('CountdownTimer').firstChild.nodeValue = MinuteLeft+":0"+SecondLeft;
                }else
                {
                      document.getElementById('CountdownTimer').firstChild.nodeValue = MinuteLeft+":"+SecondLeft;
                }
                if((MinuteLeft == 0) && (SecondLeft <= 10))
                {
                      document.getElementById('CountdownTimer').style.fontWeight = "bolder";
                      document.getElementById('CountdownTimer').style.color = "red";
                }
                      document.getElementById('CountdownTimer').style.fontWeight = "normal";
                      document.getElementById('CountdownTimer').style.color = "black";
                }else
                {
                      document.getElementById('CountdownTimer').firstChild.nodeValue = SecondLeft;
                if((MinuteLeft == 0) && (SecondLeft <= 10))
                {
                      document.getElementById('CountdownTimer').style.fontWeight = "bolder";
                      document.getElementById('CountdownTimer').style.color = "red";
                }else
                {
                      document.getElementById('CountdownTimer').style.fontWeight = "normal";
                      document.getElementById('CountdownTimer').style.color = "black";          
                }
          }
          if(TimePast == 1800)
          {
                 document.getElementById('DoLogoutRequest').submit();   
          }
          if(MinuteLeft <=4)
          {
                 document.getElementById('Overlay').style.visibility="visible";
                 document.getElementById('ForceLogout').style.visibility="visible";
          }else
          {
                 document.getElementById('Overlay').style.visibility="hidden";
                 document.getElementById('ForceLogout').style.visibility="hidden";  
          }
          $(document).ready(function(){
                 $(document).mousemove(function(){
                        Timing = 0;
                        TimePast = 0;
                        SecondLeft = 60;
                        MinuteLeft = 29;
                 });
           });
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:42:30.493

您可以做的是修改脚本，以便在检测到 mousemove 时，首先检查自上次 mousemove 事件以来的当前秒数（使用 Date 对象）。

如果超过 30 分钟，那么您知道该个人应该被注销，然后您可以立即采取该操作。

可以将其想象为设置了一条在 30 秒标记处武装但在有人绊倒它之前不会触发的绊线。

然而，话虽如此，我真的非常担心这种方法的安全性。一般来说，客户端代码是不安全的。像自动注销用户这样的事情真的应该在服务器端使用会话来处理。

尽管如此，这种方法还是很有创意的，因为它不会强迫我访问不同的页面。因此，您可以使用的另一种将服务器端方法与 mouseevent 方法相结合的技术是将鼠标移动和时间存储在一个变量中。然后，在您的 29:30 分钟标记处，如果数组包含在过去 25 分钟内发生的鼠标移动，则向服务器发出安全 AJAX 请求以告知会话用户仍处于活动状态。

这将减少服务器上的负载，因为您只在需要时进行更新，并且它还允许您的用户使用应用程序而无需刷新以防止注销，它还将保留实际的“是用户登录”它所属的逻辑的一部分，在服务器上。如果服务器从未收到客户端的响应，则服务器将注销用户。

总而言之，而不是您的服务器可能永远等待听到可以注销用户：

```
 if(TimePast == 1800)
      {
             document.getElementById('DoLogoutRequest').submit();   
      } 
```

如果服务器没有听到您的客户签入，则服务器正在采取更权威的方法在没有您的情况下继续前进：

```
 if(TimePast <= 1800 && TimePast >= 1700)
      {
             // send keepalive request to the server to prevent auto-logout

      } 
```

# php - mySQL 布尔全文搜索不返回任何结果

> ID：10668277
> 
> 赞同：0
> 
> 时间：2012-05-19T19:34:17.563
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我正在尝试在 mySQL 中编写全文搜索查询，但遇到了一些麻烦。

我的数据库中的一个示例关键字单元格包含一堆字符串（例如：“bags 填充动物玩具苹果”）。我 100% 确定“玩具”是我在数据库中的一个项目的关键字之一。为什么下面的搜索查询没有返回任何结果？

这是我尝试使用的查询：

```
$results = mysql_query("SELECT keywords,name FROM files WHERE 
                         MATCH (keywords) AGAINST ('+toys') IN BOOLEAN MODE"); 
```

我收到以下错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be 
resource, boolean given in C:\xampp\...etc...\ on line 192 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:37:54.433

您的查询失败并返回布尔值 false，您在 fetch 调用中盲目使用该值。这意味着您的查询逻辑中没有错误处理。将您的查询调用更改为

```
$results = mysql_query('SELECT yada yada yada') or die(mysql_error());
                                               ^^^^^^^^^^^^^^^^^^^^^^ 
```

这样您就可以确切地看到查询的问题所在。

永远不要假设数据库操作成功。即使您的 SQL 语法完全有效，也有太多其他原因导致无法检查。

# mysql - 来自结果集中关联表的扁平字段字符串作为逗号分隔的字符串

> ID：10668279
> 
> 赞同：1
> 
> 时间：2012-05-19T19:34:25.283
> 
> 标签：mysql

我有下面的查询（将选择中的所有字段缩短为*）。

```
SELECT u.*, e1.*, e2.*
FROM employee_db e1
JOIN employee_db e2 ON e1.manager_id = e2.id
JOIN users u ON u.id = e1.id 
```

还涉及两个表：

*   团队（需要将用户分配给团队的“team_name”的扁平化版本）

*   team_user_associations (team_id, user_id)

    （用户通过 team_user_associations 拥有多个团队）。

* * *

我需要的是在结果中添加 1 个字段，该字段是用户所属的所有“团队名称”的逗号分隔字符串。我无法弄清楚这里的方法是什么......它会不会类似于子查询的结果，其中子查询记录集中的“team_name”字段被展平为一个逗号分隔的字符串，该字符串成为一个字段主要查询？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:54:02.267

```
SELECT  u.*, e.*, e2.*, GROUP_CONCAT(t.team_name)
FROM    employee_db e
JOIN    employee_db e2
ON      e2.id = e.manager_id
JOIN    users u
ON      u.id = e.id
JOIN    team_user te
ON      te.user_ud = u.id
JOIN    teams t
ON      t.id = te.team_id
GROUP BY
        u.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:56:28.833

您可以尝试以下解决方案：

```
SELECT u.*, e1.*, e2.*, 
       GROUP_CONCAT(t.team_name ORDER BY t.team_name) AS team_names
FROM employee_db e
JOIN employee_db e2 ON l.manager_id = l2.id
JOIN users u ON u.id = l.id
JOIN team_user_associations ta ON ta.user_id = u.id
JOIN teams t ON ta.team_id = t.id
GROUP BY user_id 
```

试一试并告诉我它是否有效，如果不知道其他表的结构和用途，这很困难。无论如何，诀窍是通过加入团队/用户关联来扩展行，并使用 GROUP BY 再次减少它们。现在聚合了关联，您可以使用 GROUP_CONCAT 检索团队名称列。

# python - 单线检查列表中的至少一项是否存在于另一个列表中？

> ID：10668282
> 
> 赞同：62
> 
> 时间：2012-05-19T19:35:07.383
> 
> 标签：python

假设我有一个列表 `a=[1,2,3]` ，我想知道其中的至少一个数字是否存在于另一个列表中，例如这个： `b=[4,5,6,7,8,1]` 换句话说，我想知道 list 中是否存在 1,2 或 3 `b`。我现在可以做类似的事情

```
def func(a, b):
    for i in a:
       if i in b:
          return True
    return False 
```

但是有没有办法把它放在一条线上让事情变得整洁？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-19T19:40:14.707

Python 2.6 及以上版本：

```
def func(a, b):
  return not set(a).isdisjoint(b) 
```

对于 2.4 或 2.5：

```
def func(a, b):
  return len(set(a).intersection(b)) != 0 
```

对于 2.3 及以下版本：

```
sudo apt-get update
sudo apt-get upgrade 
```

;)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-05-19T19:39:30.760

一个简单的单线将是：

```
any(i in b for i in a) 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-05-19T19:39:23.443

有很多方法可以做到这一点。最直接的翻译是：

```
any_in = lambda a, b: any(i in b for i in a) 
```

您还可以使用涉及集合的各种事物，例如：

```
any_in = lambda a, b: bool(set(a).intersection(b)) 
```

（这取决于可散列的元素，但如果这是真的，那么为这些方法中的任何一种制作`a`一组更大的集合可能会更快）。`a``b`

编辑：`isdisjoint`比`intersection`Python 2.6 及更高版本更好，如下面的许多人所述。很高兴了解到这一点。:)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-05-19T19:43:46.540

这是一个*集合*问题，而不是*列表*问题。使用正确的数据类型，答案通常是显而易见的 :-)

```
def func(a, b):
    return not set(a).isdisjoint(b) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-19T19:39:40.360

通过将列表转换为集合，您可以对它们执行集合操作。如果交集大于 0，则至少有一个元素匹配：

```
len(set(a) & set(b)) > 0 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-19T19:40:04.783

这应该有效。

```
def func(a, b):
    return any([i in b for i in a]) 
```

# hadoop - ChainMapper 和 ChainReducer 还有哪些其他可用的替代方法？

> ID：10668284
> 
> 赞同：0
> 
> 时间：2012-05-19T19:35:24.817
> 
> 标签：hadoop, mapreduce, hdfs, cloudera

我正在尝试创建一系列 MapReduce 作业以实现我的要求？我听说 ChainMapper 和 ChainReducer 将是其中一种选择。

但是，我们正在寻找 ChainMapper 和 ChainReducer 所需的替代方法。请把你的光芒照在我身上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:41:55.597

您可能想要查看的一些替代方案：

*   [JobControl](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapred/jobcontrol/JobControl.html)类 - “这个*类封装了一组 MapReduce 作业及其依赖项”*
*   Apache [OOZIE](http://incubator.apache.org/oozie/) - *“Oozie 是一个用于管理 Apache Hadoop(TM) 作业的工作流/协调系统。”*

# asp.net-mvc-3 - ActionMethodSelectorAttribute 无法访问类型？

> ID：10668285
> 
> 赞同：0
> 
> 时间：2012-05-19T19:35:31.773
> 
> 标签：asp.net-mvc-3, entity-framework, class, controller, asp.net-membership

我对 MVC3 比较陌生，并且正在开发一个网站，该网站需要使用 SQL Server、EF4 等处理默认 Microsoft 会员提供程序中的预加载帐户。已经取得了一些进展，并在 SO 上的某人的帮助下，我已经让 ActionMethodSelectorAttribute 正常工作来帮助我。

即，当我们看到某人的 ID 作为他们尝试加载个人资料页面 (www.mysite.com/profile/4) 的一部分时，我们将查看该 ID/帐户是否已被“认领”。（我原来的帖子在这里：[MVC3 using routes or using controller logic?](https://stackoverflow.com/questions/10594013/mvc3-using-routes-or-using-controller-logic)）

不幸的是，在 ActionMethodSelectorAttribute 内部，我有一段时间做一个相对简单的数据库调用来确定该帐户是否已声明/未声明。

这是我当前的代码状态：

```
 public class UserAccountActivatedAttribute : ActionMethodSelectorAttribute
    {
        public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
        {
            if (controllerContext == null)
            {
                throw new ArgumentNullException("controllerContext");
            }
            // get profile id first
            int id = int.Parse((string)controllerContext.RouteData.Values["id"]);
            var profile = db.Profiles.Where(q => q.ProfileId == id).FirstOrDefault();
            bool isActivated = profile;// some code to get this state 
            return isActivated;
        }
    } 
```

线

```
var profile = db.Profiles.Where(q => q.ProfileId == id).FirstOrDefault(); 
```

数据库上的错误。部分，错误消息如下：

> 无法通过嵌套类型“MySite.Controllers.HomeController.UserAccountActivatedAttribute”访问外部类型“MySite.Controllers.HomeController”的非静态成员

...在分贝下突出显示错误。

有谁知道为什么在 ActionMethodSelectorAttribute 中，我似乎无法进行此调用？（注意：在同一个 Home 控制器中，我在 Public ActionResult 和 ViewResult 类中进行了许多类似的调用，没有任何错误。）

**编辑**

我的 HomeController.cs 看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MySite.Models;

namespace MySite.Controllers
{
public class HomeController : Controller
{
    private MySiteEntities db = new MySiteEntities();

    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to MySite.com!";
        return View();
    }
    //several other ActionResults - create, delete, etc.

    public class UserAccountActivatedAttribute : ActionMethodSelectorAttribute
    {
    public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }
        // get profile id first
        int id = int.Parse((string)controllerContext.RouteData.Values["id"]);
        var profile = db.Profiles.Where(q => q.ProfileId == id).FirstOrDefault();
        bool isActivated = profile;// some code to get this state 
        return isActivated;
    }
    } 
```

...绝对属于家庭控制器。

**编辑＃2：**

更接近，但值始终为 TRUE 的一个小问题。

```
public class UserAccountActivatedAttribute : ActionMethodSelectorAttribute
{
    private MySiteEntities db = new MySiteEntities();

    public override bool IsValidForRequest(ControllerContext controllerContext, System.Reflection.MethodInfo methodInfo)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }
        int id = int.Parse((string)controllerContext.RouteData.Values["id"]);
        var data = new MySiteEntities();
        var claimed = db.Claimeds.FirstOrDefault(c => c.ProfileId == id);
        bool isActivated = claimed.Claimed1.Value != null;
        return isActivated;
    }
} 
```

声称的.Claimed1.Value != null; 给我一个警告：表达式的结果总是“真”，因为“布尔”类型的值永远不等于“布尔”类型的“空”？

但是，我必须有一些东西来处理 NULL 值，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:24:35.803

我认为您的代码实际上看起来更像这样，对吗？

```
public class HomeController : Controller
{
    public class UserAccountActivatedAttribute : ActionMethodSelectorAttribute
    {
        ...
    }
} 
```

您需要使属性类成为一级类，而不是嵌套在控制器中。然后你需要给它自己的数据库实例。

```
public class HomeController : Controller
{
    ...
}

public class UserAccountActivatedAttribute : ActionMethodSelectorAttribute
{
    private readonly CustomDbContext db = new CustomDbContext();

    public override bool IsValidForRequest(ControllerContext controllerContext, 
        MethodInfo methodInfo)
    {
        // original code here
    }
} 
```

这样做的原因是因为当属性类嵌套在控制器类中时，它无法访问`db`实例变量，因为它不是静态变量。您的属性实际上不应该是嵌套类，并且应该有自己独立的实例变量。**换句话说，不要试图通过设置控制器的`db`变量来解决这个问题`static`。**

# c# - App.Current.Shutdown 不让 DataSet.WriteXml 完成导致配置文件损坏

> ID：10668288
> 
> 赞同：1
> 
> 时间：2012-05-19T19:35:46.323
> 
> 标签：c#, wpf, dataset, writexml

环境 - C#、.NET 4.0、WPF、VS2010

我有一个应用程序，它使用键盘挂钩来检测何时按下四个键的组合。发生这种情况时，它调用 Configuration.Save()，后者调用 myConfigDataSet.WriteXml(myConfigFile)。然后在下一行调用 App.Current.Shutdown()。

大约有一半的时间可以按预期工作。但很多时候，它会将 XML 内容插入到先前存在的配置文件的中间，从而导致数据损坏。

我能够通过使用...解决上述问题

if(File.Exists(myConfigFile)) { File.Delete(myConfigFile) }

...在调用 myConfigDataSet.WriteXml(myConfigFile) 正上方的那一行

但现在很多时候它只是写入一个 0KB 大小的文件。我很确定我所有的问题都是由 App.Current.Shutdown() 没有等待对 myConfigDataSet.WriteXml(myConfigFile) 的调用完成引起的。

在文件写入磁盘之前，此调用不应该阻止执行吗？...显然不是！！！

作为一种解决方法，我已经尝试在 App.Current.Shutdown 之前插入 Thread.Sleep(1000) 以创建 1 秒的延迟。但现在有时应用程序会因“StackOverFlow”异常而出错......！！！

你们会推荐什么作为解决方案或解决方法？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:20:27.410

您可以尝试将对 myConfigDataSet.WriteXml(myConfigFile) 的调用放在 try/finally 块中。即使线程被中止，finally 块也会完全执行（参见[此处](http://msdn.microsoft.com/en-us/library/ty8d3wta.aspx)）。不确定它是否适用于 App.Current.Shutdown。

所以而不是：

```
myConfigDataSet.WriteXml(myConfigFile) 
```

请执行下列操作：

```
try {
    // Empty...
} finally {
    myConfigDataSet.WriteXml(myConfigFile)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:01:19.203

您无法停止 App.Current.Shutdown

相反，使用 Application.Current.MainWindow.Close()。在这种情况下，您可以在 Close 事件中拦截，处理您需要处理的内容，然后您可以调用 App.Current.Shutdown

# ios - 静态 UITableViewCell 背景视图

> ID：10668290
> 
> 赞同：1
> 
> 时间：2012-05-19T19:36:08.133
> 
> 标签：ios, xcode, uitableview

在我的项目中，我有带有静态单元格的 tableViews 以及带有动态单元格的 tableViews。为了定制，我设法在单元格上获得了渐变背景（分组样式）。

它适用于动态 TableViews，因为我根据行的位置（顶部、底部、中间或单个）在 cellForRowAtIndex... 中设置背景视图。

但是，当我尝试在静态 tableview 单元格上实现它时，它不起作用。我试图实现 cellForRowAtindex... 但它崩溃了。

有人有想法吗？

更新：cellForRow 的代码..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];    

    UACellBackgroundView *bgw=[[UACellBackgroundView alloc]init];

    if (indexPath.row==0) {

        bgw.position = UACellBackgroundViewPositionTop;
        cell.backgroundView=bgw;

    }else if (indexPath.row==2){

        bgw.position = UACellBackgroundViewPositionBottom;
        cell.backgroundView=bgw;

    }else {
        bgw.position = UACellBackgroundViewPositionMiddle;
        cell.backgroundView=bgw;
    }

  //  cell.backgroundView=bgw;

    return cell;
} 
```

顺便说一句，我从这里得到的背景视图： http: [//code.coneybeare.net/how-to-make-custom-drawn-gradient-backgrounds](http://code.coneybeare.net/how-to-make-custom-drawn-gradient-backgrounds) 和这里： http: [//pessoal.org/blog/2009 /02/25/customizing-the-background-border-colors-of-uitableview/](http://pessoal.org/blog/2009/02/25/customizing-the-background-border-colors-of-a-uitableview/)

如果有人感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T10:14:14.603

如果您有一个带有静态表的 UITableViewController 子类，则不应尝试使单元格出列。
相反，您应该要求`super`提供牢房。超类将从情节提要中获取单元格，您可以对其进行配置。

像这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    UIView *selectedBackgroundView = [[UIView alloc] init];
    cell.selectedBackgroundView = selectedBackgroundView;
    cell.selectedBackgroundView.backgroundColor = [UIColor mb_tableViewSelectionColor];
    return cell;
} 
```

也适用于所有其他属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:56:19.567

看起来您不是分配了 UITablViewCell，您需要分配单元格。

例如：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        // alloc the UITableViewCell
        // remeber if you are not using ARC you need to autorelease this cell
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = @"Cell Name";
    cell.detailTextLabel.text = @"Cell Detail";

    return cell;
} 
```

添加此语句：

```
if (cell == nil) {
    // alloc the UITableViewCell
    // remeber if you are not using ARC you need to autorelease this cell
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

# javascript - 谷歌分析是否有设置禁止未经同意的用户使用 cookie

> ID：10668292
> 
> 赞同：191
> 
> 时间：2012-05-19T19:36:19.100
> 
> 标签：javascript, cookies, google-analytics

根据欧盟电子隐私指令第 5(3) 条（又名“Cookie 法”），针对欧盟用户的网站必须在设置 cookie 之前获得用户的选择同意。

请参阅[ICO 指南](http://www.ico.gov.uk/~/media/documents/library/privacy_and_electronic/practical_application/guidance_on_the_new_cookies_regulations.ashx)

我正试图在我的网站上使用**Google Analytics来解决这个问题。**

我想谷歌分析（GA）可以在*不需要*使用 cookie 的情况下进行一定程度的分析数据收集。

但是，我找不到有关如何在页面请求期间将有关“同意状态”的信息转发回 Google 的任何信息（在 Google 网站/设置面板上）。所以，我唯一的选择似乎是，如果用户没有明确表示同意，我*根本不应该嵌入谷歌标签代码。*这似乎有点激烈。

让我的服务器端脚本`hasConsentedToCookies=FALSE`在 JavaScript 标记中设置一个标志将允许我指示 Google 的服务以优雅降级的方式运行。

谷歌分析是否有设置禁止未经同意的用户使用 cookie？

如果是这样，我在哪里可以找到这方面的信息？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-05-23T13:41:49.057

# 编辑（2019 年）：以下答案早于 GDPR，可能需要修订。

谷歌分析有一套新的 API 来帮助遵守 cookie 退出。[这是文档](https://developers.google.com/analytics/devguides/collection/gajs/#disable)，这是他们的[帮助文档](http://www.google.com/analytics/learn/privacy.html?rd=1)。

关于欧盟 Cookie 法规（在成员国实施）是否要求被动网络分析跟踪需要选择加入机制以确保合规性，存在一些歧义。如果您担心某种方式，请咨询律师。谷歌授权您决定如何进行。

他们会将实施细节留给您，但是，想法是，一旦您确定是否在 Google Analytics 中跟踪用户，如果答案是不跟踪，您可以在 Google 之前将以下属性设置为 true分析运行：

```
window['ga-disable-UA-XXXXXX-Y'] = true; 
```

其中 UA-XXXXXX-Y 是您在 Google Analytics 中的帐户 ID

正如其他海报所指出的，谷歌分析依赖于 cookie。因此，如果没有 cookie，您将无法进行任何类型的跟踪。如果您确定某人不会被 cookie 用于跟踪，则需要实现以下内容：

```
if(doNotCookie()){
   window['ga-disable-UA-XXXXXX-Y'] = true;
} 
```

# 选择参加

当您第一次加载 Google Analytics 时，这确实需要一点柔术，因为需要在 Google Analytics 运行*之前*设置此属性以防止跟踪发生，这意味着，对于“选择跟踪”方法，您d 可能需要实施一种机制，在第一次访问时，如果没有选择加入 cookie（明确允许确定 cookie 偏好的 cookie），Google Analytics 会自动禁用，然后，如果发生选择加入，则重新运行谷歌分析。在随后的综合浏览量中，一切都会顺利进行。

可能看起来像（伪代码）：

```
if( hasOptedOut() || hasNotExpressedCookiePreferenceYet() ){ //functions you've defined elsewhere
     window['ga-disable-UA-XXXXXX-Y'] = true;
}
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXX-Y']);
  _gaq.push(['_trackPageview']);

  function onOptIn(){ //have this run when/if they opt-in.
      window['ga-disable-UA-XXXXXX-Y'] = false;
      //...snip...
      //set a cookie to express that the user has opted-in to tracking, for future pageviews
      _gaq.push(['_trackPageview']); // now run the pageview that you 'missed'
   } 
```

# 选择退出

使用这种方法，您将允许用户选择退出跟踪，这意味着您将使用 cookie 来设置`ga-disable-UA-XXXXXX-Y'`属性并在将来使用 cookie 来管理它：

```
if( hasOptedOut() ){ // function you've defined elsewhere 
     window['ga-disable-UA-XXXXXX-Y'] = true;
}

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXX-Y']);
  _gaq.push(['_trackPageview']); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-07-22T08:24:17.373

`{'storage' : 'none'}`您可以通过在创建跟踪器实例时指定选项来禁用谷歌分析的 cookie 。

有关更多详细信息，请参阅[Google 关于该主题的指南。](https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id#disabling_cookies)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-28T10:08:29.317

作为一个简短的说明，BBC（可能是英国最受欢迎的网站）采取了一种有趣的方法来遵守 cookie - 他们向用户展示了一个横幅，告诉他们 cookie 已设置并提供了几个链接。

[这个解释了什么是cookies。](http://www.bbc.co.uk/privacy/cookies/about/?source_url=/privacy/bbc-cookies-policy.shtml)这个可以让[他们管理他们的 cookie](http://www.bbc.co.uk/privacy/cookies/managing/cookie-settings.html)，但最有趣的是，他们提供了一个[指向 Google Analytics 的链接，以允许用户完全退出 GA](https://tools.google.com/dlpage/gaoptout?hl=en)。因此，总而言之，BBC 认为他们可以告诉用户设置了哪些 cookie，然后提供指向 Google 的链接以允许用户选择退出所有 GA cookie。对我来说，这比你告诉 GA 通过 JS 选择退出地址要少得多。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-11-15T07:22:29.513

我经常从不要求用户选择退出谷歌分析，那是因为我从不设置 cookie，也从不保存他们的 IP（和其他个人数据）。

```
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-98765432-1', 'www.example.com', {
  'anonymizeIp': true
  , 'storage': 'none'
  , 'clientId': window.localStorage.getItem('ga_clientId')
});
ga(function(tracker) {
  window.localStorage.setItem('ga_clientId', tracker.get('clientId'));
});
ga('send', 'pageview'); 
```

[还可以在将 Google Analytics cookie 转换为本地/会话存储](https://stackoverflow.com/questions/4502128/convert-google-analytics-cookies-to-local-session-storage/19207035#19207035)中查看此代码

该脚本不会设置任何 cookie，但仍会通过谷歌分析进行跟踪。这实际上对隐私的影响与使用 cookie 相同，因为谷歌仍然记录用户的 IP 地址。

这就是 anonymizeIp 开关的用武之地。这告诉谷歌只保存 IP 地址的匿名版本。匿名 IP 地址不被视为个人数据，因此将尊重用户隐私。

AFAIK cookie 法律完全是关于隐私的，并且确实允许网站跟踪其使用情况。我不是律师或其他任何人，但我认为此脚本符合欧盟 cookie 法。

看看这个 plunk 看看它的实际效果： http: [//plnkr.co/MwH6xwGK00u3CFOTzepK](http://plnkr.co/MwH6xwGK00u3CFOTzepK)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-12-30T17:01:26.480

最新的谷歌分析（gtag.js）有一个“同意模式”，只是为了这个（仍处于测试阶段）：

[https://developers.google.com/gtagjs/devguide/consent](https://developers.google.com/gtagjs/devguide/consent)

它看起来像这样：

```
gtag('consent', 'default', {
  analytics_storage: 'denied',
  ad_storage: 'denied'
}); 
```

然后，在用户同意的情况下，您可以稍后更新这些设置。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-06-21T17:32:59.820

您可以通过在谷歌分析代码顶部添加此代码来禁用谷歌分析cookie（行前：var _gaq = _gaq || [];）：

```
ga('create', 'UA-XXXXXX-XX', {'storage': 'none'});
ga(function(tracker) {
  var clientId = tracker.get('clientId');
}); 
```

然而，谷歌分析的某些功能（例如实时统计）在此修改后无法正常工作。有关谷歌分析 cookie 的更多信息：[https ://developers.google.com/analytics/devguides/collection/analyticsjs/domains?hl=en#disableCookies](https://developers.google.com/analytics/devguides/collection/analyticsjs/domains?hl=en#disableCookies)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-04T20:20:35.890

我面临着同样的问题。

最终，我在[Elmer 的回复](https://stackoverflow.com/a/19995629/5802289)中得到了一个解决方案，但在 IP 方面要安全，即不使用`localStorage`

```
// Create a fake ID instead of storing anything locally
function guidGenerator() {
    var S4 = function() {
       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
    };
    return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());
}

...
ga('create', 'UA-XXXXXX-Y', {
        'storage': 'none',
        'clientId': guidGenerator()
}); 
```

(-) 访问的每个页面都将被视为 Google Analytics 中的新访问者，因此我在那里失去了很多功能。

(+) 但我可以忍受它，我相信我在数据隐私立法方面是安全的。

任何反馈或改进建议都非常受欢迎。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-20T05:29:51.160

**编辑：有*一个*谷歌分析设置与异步 GA 片段。**

~~正如您所建议的那样，没有针对此的 Google Analytics 设置，如果您想使用 Google Analytics Javascript 跟踪脚本，则需要有条件地排除那些未同意的脚本。~~

~~已经有一些解决方案可以提供帮助，而不是自己动手。Javascript：[http ://cookies.dev.wolf-software.com/demo/index.htm](http://cookies.dev.wolf-software.com/demo/index.htm)~~

这是一个允许在没有 cookie 的情况下使用 Google Analytics 基本功能的解决方案，通过跟踪服务器端，这个例子是 PHP：[http ://techpad.co.uk/content.php?sid=205](http://techpad.co.uk/content.php?sid=205)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-29T18:52:49.913

到目前为止，处理这个问题的常用方法是 wolf-software 的 jquery 插件使用的方法，它会阻止脚本运行，直到用户选择加入。然而，ICO 上周更新了他们的指导方针，说依赖 ' 是可以接受的BBC 网站上使用的那种“默示同意”。虽然我真的不认为这在法律精神之内，但这是执法者认为可以接受的。鉴于大多数欧盟国家尚未实施该指令，我认为他们很可能会效仿英国。

这里有一篇关于英国更新的有趣文章：

[http://www.redant.com/articles/eu-cookie-law-update-ico-adopts-softly-softly-approach/](http://www.redant.com/articles/eu-cookie-law-update-ico-adopts-softly-softly-approach/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-03T12:19:15.873

对于侵入性较小的 UX 解决方案，您可以通过放置以下链接来设置对谷歌分析 cookie 的默示同意：cookiestatement.eu（无 javascript、无弹出窗口、无广告）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-04T23:50:55.473

很抱歉回答迟了，但我最近一直在寻找同样的东西，直到我自己找到了办法。这可能不是正确的方法，但它确实有效。（仅在有问题的网站上工作并不能完全退出 GA）。我已经测试了几天以确保。

我设法做到这一点的方式是使用 PHP cookie。首先从添加 analyticstracking.php 开始...

```
<?php include_once('analyticstracking.php'); ?> 
```

并在 analyticstracking.php 中添加以下内容...

```
<?php
if($_COOKIE['consent_cookie']=="Y"){
?>

<script type="text/javascript">
var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-********-*']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript';     ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' :      'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];      s.parentNode.insertBefore(ga, s);
  })();
</script>

<?php   
}
else{
//do nothing
}
?> 
```

在用户同意 cookie 之前，Google Analytics 将无法工作，一旦他们拥有，“consent_cookie”将被保存并允许 GA 工作，但如果“google”cookie 被销毁，它将阻止 GA 工作（显然）。

就像我说的那样，这可能不是正确的方法，但我已经尝试过并且确实如此。希望这可以帮助某人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-29T09:33:25.030

只有在用户接受 cookie 使用后才能使 GA 工作，需要执行几个步骤。

## 禁用 cookie

```
 <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXX-Y"></script>
-- <script>
-- window.dataLayer = window.dataLayer || [];
-- function gtag(){dataLayer.push(arguments);}
-- gtag('js', new Date());
-- gtag('config', 'UA-XXXXXX-Y');
-- </script> 
```

在实施 GA 时，只需导入`gtag.js`脚本并删除 GA 初始化，就需要对其进行更新。

## 当用户接受 cookie 时启用 GTag

GTag Opt In 是一种在用户接受/拒绝 cookie 时启用和禁用 GA 的工具。

```
<script src="https://www.npmcdn.com/gtag-opt-in@2.0.0/dist/index.js"></script>
<script>
  GTagOptIn.register('UA-XXXXXX-Y');

  ...
  // On user opt in
  GTagOptIn.optIn();
  // On user opt out
  GTagOptIn.optOut();
  ...
</script> 
```

库已加载。GA 跟踪 ID 已注册。稍后`optIn`and`optOut`函数可以绑定到用户操作的接受/拒绝。

您可以阅读有关[如何使用 Opt In 实施 Google Analytics](https://medium.com/@delucioux/how-to-implement-google-analytics-with-opt-in-b19674d0bf86)的更多信息。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-23T11:06:40.377

如果用户不同意分析 cookie，您可以使用[Legal Monster 之](https://www.legalmonster.com)类的东西来阻止 cookie。

legal.js 目前支持阻止（和启用）分析和营销 cookie；未来将提供更多类别。

这是[有关阻止 cookie 的更详细指南](https://docs.legalmonster.com/documentation/legaljs-widget/collecting-cookie-consent/blocking-cookies)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-03T14:50:59.540

**2022 年更新：**不再是关于 Cookie。现在，即使从欧盟以外加载谷歌字体，您也需要获得同意。这是因为这样做会将用户 IP（非常私密的信息哈哈）发送到美国。我不是律师，但这也会影响 Adsense 和 Analytics。在这里，您将找到一个解决方案，如何仅在获得同意的情况下加载 Adsense 和 Analytics：仅在获得同意的情况下[加载 Google Adsense、Analytics 和 Youtube](https://stackoverflow.com/questions/70967060/loading-google-adsense-analytics-and-youtube-only-when-consent-is-given)

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2012-05-19T22:34:37.080

GA 在没有 cookie 的情况下无法工作，如果他/她之前访问过您的网站，它需要它来“识别”访问者。所以在 GA 中没有对此进行设置，如果 GA 无法创建 cookie，则不会记录访问者。

如果用户来自欧盟并且没有选择加入，那么您应该排除我认为的 google-analytics 脚本。

# asp.net-dynamic-data - 是否可以更改 EntitySet 字段的显示名称？

> ID：10668294
> 
> 赞同：-1
> 
> 时间：2012-05-19T19:36:32.783
> 
> 标签：asp.net-dynamic-data

每个外键都被定义为动态数据中的一个实体集。是否可以更改这些 EntitySet 字段的显示名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:25:11.190

是的。假设您有一个带有外键 CourseType 的课程。您可以将 DisplayAttribute 应用于课程：

```
[MetadataType(typeof(CourseMetadata))]
[DisplayName("Courses")]
public partial class Course 
{}

public class CourseMetadata
{
    [ScaffoldColumn(false)]
    public object CourseTypeId { get; set; }

    [Display(Name = "Course Type")]
    public object CourseType { get; set; }
} 
```

# html - html元素上的边框或填充问题

> ID：10668298
> 
> 赞同：1
> 
> 时间：2012-05-19T19:36:45.730
> 
> 标签：html, css

嘿伙计们，我目前正试图将一个文本框、一个选择菜单和一个按钮干净地放入一个大小的 div 中，但我遇到了一个问题，即每个元素都有奇怪的边框/边距，这会阻止它正确呈现（按钮出现在文本框下方和选择菜单）

这是我目前使用的 html

```
<div class="content">
    <div class="search-panel">
        <div class="search-panel-logo">
            <img src="img.png" class="search-panel-logo-img" />
        </div>

        <div class="search-panel-searchbar">
            <form class="search-panel-frm" action="" id="fsearchbar">
                <input class="search-panel-frm" type="text" id="tseachtext" name="tsearchtext" value="Search" />
                <select class="search-panel-frm" id="ssearchselect" name="ssearchselect">
                    <option value="Cars">Cars</option> 
                </select>
                <input class="search-panel-frm" type="button" id="bsearchgo" name="bsearchgo" value="Search!" />
            </form>

        </div>
    </div>
</div> 
```

继承人的CSS：

```
.content {
    background:inherit;
    width:950px;
    height:600px;
    margin: 0 auto;
}

.search-panel {
    width:inherit;
    height:500px;
    background:#093;
    margin:0 auto;

}
.search-panel-searchbar {
    width:inherit;
    height:30px;

}

.search-panel-searchbar-frm {
    width:inherit;
    height:inherit;

}

.search-panel-searchbar-frm-text {
    width:60%;
    height:70%;

}

.search-panel-searchbar-frm-select {
    width:20%;
    height:80%;

}

.search-panel-searchbar-frm-go {
    width:20%;
    height:80%;

} 
```

知道我可以添加什么以使所有元素出现在一行而不是两行中，我已经尝试过

```
border:0;
margin:0; 
```

它没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:39:09.663

删除元素之间的空格。

此外，使用`width: inherit`可能不是一个好主意 - 尝试`width: 100%`替代或类似的东西。`height: inherit`可以替换为`height: auto;`（或省略）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:21:36.123

1.  您发布了一些不适用于您发布的 HTML 的 CSS 类（例如`.search-panel-searchbar-frm-go`）
2.  您正在将类 search-panel-frm 应用于表单元素以及表单中的元素。你确定这是你想要的吗？
3.  我没有看到同样的问题：输入、选择和输入：按钮对我来说都出现在同一行。

您可以尝试添加这个简单的修复程序以将所有内容保持在一条线上，这可能会给您一些想法。

```
.search-panel-frm *
{
 white-space:nowrap;
} 
```

如果您的所有元素都已经在同一行，并且您希望它们更好地排列，请尝试不同的垂直对齐值，例如：

```
.search-panel-frm *
{
 vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T01:39:58.223

为了实现您的目标，必须应用一些 CSS 技巧，请参见下面的 CSS：

**CSS**

```
/* wrapper */
.search-panel-searchbar {
    width: 100%;
    height: 30px;
    overflow: hidden;
}

/* form elements must be wrapped and not a direct child of the form tag */
.search-panel-searchbar > form > div {
    background-color: #fff;
    width: 100%;
    height:30px;
}

/* input[type="text"] */
.search-panel-searchbar-frm-text {
    margin: 0;
    padding: 0;
    font-size: 12px;
    line-height: 16px;
    height: 16px;  /* necessary to fix height issue on windows browsers */
    padding: 6px 0;
    display: block;
    border: 1px solid #ccc;
    background-color:#fff;
    width: 60%;
    text-indent: 4px;
    float: left;
}

/* select */
.search-panel-searchbar-frm-select {
    margin: 0;
    padding: 0;
    font-size: 12px;
    height: 30px;
    padding: 6px 4px;
    display: block;
    border: 1px solid #ccc;
    background-color:#fff;
    width: 20%;
    float: left;
    margin-left:-1px; /* pull to prevent border overflow issue with % */
}

/* input[type="button"] */
.search-panel-searchbar-frm-go {
    margin: 0;
    padding: 0;
    font-size: 12px;
    height: 30px;
    padding: 6px 0;
    display: block;
    border: 1px solid #ccc;
    background-color:#fff;
    width: 20%;
    float: left;
    text-align:center;
    margin-left:-1px; /* pull to prevent border overflow issue with % */
    cursor: pointer;
} 
```

**笔记：**

CSS 不包括 Fiddle 示例中为视觉演示提供的样式，例如按钮悬停和正文背景。

* * *

请注意，不幸的是，每个浏览器（和操作系统！）都`select`以不同的方式处理，并且很可能在一两个浏览器上，样式可能会有所不同。

[工作小提琴](http://jsfiddle.net/zuul/KZfjk/)的例子！

![在此处输入图像描述](../Images/56e58ce5aac87162666f2d23de4048d8.png)

# 屏幕截图与以下测试相匹配：

**Linux Ubuntu 12.04**

*   火狐12.0
*   Chromium 18.0.1025.151（开发人员内部版本 130497 Linux）

**Windows XP 专业版 2002 Service Pack 3**

*   互联网浏览器 8.0.6001.18702
*   歌剧 11.62
*   火狐 3.6.16
*   Safari 5.1.2 ^(（仅选择框高失败）)
*   谷歌浏览器 18.0.1025.168 m
*   K-Meleon 1.5.4 ^(（由于字体系列而失败）)

**Windows 7 家庭版服务包 1**

*   Internet Explorer 9.0.8112.164211C
*   歌剧 11.62
*   火狐12.0
*   Safari 5.1.4
*   谷歌浏览器 18.0.1025.168 m

您将`font-family`使用的必须在末尾包含字体系列声明，以防止出现行高和文本大小问题。例如，`font-family: Helvetica, Arial, sans-serif`

# path - 拖放启动后如何进入应用程序的父目录？（C＃）

> ID：10668299
> 
> 赞同：0
> 
> 时间：2012-05-19T19:36:50.163
> 
> 标签：path, drag-and-drop

我正在尝试制作通常通过拖放文件启动的应用程序，以加载其他应用程序共有的配置文件，该文件位于应用程序的父目录中。

问题是每当我通过拖放启动应用程序时，`@"..\config.cfg"`beomes`@"where\the\drag_n_dropped\file\is\..\config.cfg"`而不是应用程序自己的目录。

我如何解决它？

**答案**：

```
string pathToThisApp =
System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) 
```

获取路径后，我们可以使用提取父目录

```
pathToThisApp.Substring(0, pathToThisApp.LastIndexOf(@"\") + 1); 
```

`+ 1`需要保留`\`路径字符串中的最后一个符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:39:30.063

使用 Assembly.GetExecutingAssembly().Location

# actionscript-3 - as3 补间到相等的比例？

> ID：10668301
> 
> 赞同：1
> 
> 时间：2012-05-19T19:37:44.780
> 
> 标签：actionscript-3, flash, scale, tween, flash-cs5.5

这是使 MC 的大小与您的选择保持均匀比例的代码。我在这个例子中选择 777。

```
my_mc.height = 777; // Can be anything you want. 
my_mc.scaleX = my_mc.scaleY; /// This makes it the same proportions. 
```

现在的问题是我该如何补间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:03:42.710

恐怕您必须对 x 和 y 比例值进行补间。

其他情况可能很棘手。

另一种选择是补间动画剪辑的任意属性，并让基于帧的函数（在 ENTER_FRAME 事件上调用）读取此变量并更新两个比例值。

或者，制作一个自定义影片剪辑类并让其内部处理自定义 scaleXY 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:44:14.740

```
function tweenThis(newHeight:uint):void{
    var oldHeight:uint=my_mc.height;
    var difValue:Number=newHeight/oldHeight;
    var newWidth:uint=my_mc.width*difValue;
    new Gtween(my_mc,1,{width:newWidth,height:newHeight});
} 
```

# python - 使用 NLTK 从自己的文本数据中进行情感分类

> ID：10668307
> 
> 赞同：1
> 
> 时间：2012-05-19T19:38:18.787
> 
> 标签：python, nltk, classification

我要问的问题可能听起来与[使用示例数据或 Web 服务的句子的 NLTK python 的情绪分析后非常相似？](https://stackoverflow.com/questions/2832394/sentiment-analysis-with-nltk-python-for-sentences-using-sample-data-or-webservic), 但是我已经完成了对文本句子的解析和标记化。我的问题是

1.  到目前为止，我在 NLTK 电影评论示例中看到的任何示例似乎都与我的问题最相似，但是对于 movie_review，训练文本已经是一种形式，因为它有两个文件夹 pos 和 neg，并且文本存储在那里。我怎样才能对我的大文本进行分类，我是否手动读取数据并将它们存储到两个文件夹中。这是否使语料库。之后我可以像示例中的 movie_review 数据一样使用它们吗？

2.如果上述问题的答案是肯定的，是否有任何方法可以通过任何工具加速该任务。例如，我只想使用内容中包含“Monty Python”的文本。然后我手动对它们进行分类，然后将它们存储在 pos 和 neg 文件夹中。那样有用吗？

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T23:52:55.110

是的，您需要一个训练语料库来训练分类器。或者您需要其他方法来检测情绪。

要创建训练语料库，您可以手动分类，可以让其他人为您分类（机械土耳其人很受欢迎），或者您可以进行[语料库引导](http://www.slideshare.net/japerk/corpus-bootstrapping-with-nltk)。对于情绪，这可能涉及创建 2 个关键字列表，即积极词和消极词。使用这些，您可以创建一个初始训练语料库，手动更正它，然后训练一个分类器。这是一个迭代过程，要记住的关键是“垃圾进，垃圾出”。换句话说，如果你的训练语料库是错误的，你就不能指望你的分类器是正确的。

# java - 如何同时显示启动画面和我的 JFrame？

> ID：10668308
> 
> 赞同：0
> 
> 时间：2012-05-19T19:38:19.427
> 
> 标签：java, sleep, splash-screen, thread-sleep

我正在处理启动画面。我设法上了一堂课。下面是一个显示启动画面的类。我的问题是如果我从 JFrame 调用这个类并运行，JFrame 和启动画面会同时运行，并且在启动画面应该持续的持续时间之后它们都关闭。如何让它们同时显示？

谢谢一堆

```
public class Splash extends JWindow {

AbsoluteLayout abs;
AbsoluteConstraints absImage, absBar;
ImageIcon image;
JLabel label;
JProgressBar bar;

public Splash() {
    abs = new AbsoluteLayout();
    absImage = new AbsoluteConstraints(0, 0);
    absBar = new AbsoluteConstraints(0, 210);
    label = new JLabel();
    image = new ImageIcon(this.getClass().getResource("anime.gif"));
    label.setIcon(image);
    bar = new JProgressBar();
    bar.setPreferredSize(new Dimension(350,10));
    this.getContentPane().setLayout(abs);
    this.getContentPane().add(label, absImage);
    this.getContentPane().add(bar, absBar);

    new Thread() {

        public void run() {
            for (int i = 0; i < 100; i++) {
                bar.setValue(i);
                try {
                    sleep(80);
                } catch (InterruptedException ex) {
                    Logger.getLogger(Splash.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
            System.exit(0);
        }
    }.start();
    this.pack();
    this.setLocationRelativeTo(null);
    this.setVisible(true);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:52:58.970

你觉得有什么影响

```
System.exit(0); 
```

会有关于你的节目吗？这是一种关闭窗口的大锤方式，因为它会导致 JVM 退出，关闭它正在运行的所有东西。

您是否考虑过使用 Java Swing 提供的 SplashScreen 对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:10:47.813

```
window.dipose(); 
```

dipose() 将关闭窗口。

# php - 在 JQuery 中使用 PHP 变量

> ID：10668311
> 
> 赞同：9
> 
> 时间：2012-05-19T19:38:33.450
> 
> 标签：php, jquery

无论如何我可以在 JQuery 脚本中使用 php 变量吗？

例子：

*   PHP变量：`$sr2`
*   JQuery 脚本摘录（带变量）：`$('#a2_bottom_$sr2')`

我怎样才能使变量在该 JQuery 部分中有效？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T19:41:09.157

PHP 运行在服务器上，jquery 运行在客户端。如果您希望 PHP 变量可用于 jquery（以及通过扩展，底层 javascript 引擎），您必须在服务器上输出页面时发送变量的值，例如

```
<script type="text/javascript">
    var my_php_var = <?php echo json_encode($the_php_var) ?>;
</script> 
```

或通过 AJAX 调用检索值，这意味着您基本上是在创建 Web 服务。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-19T19:43:34.853

您可以简单地做的是使用您的 PHP 来回显代码以启动 JavaScript 变量。

```
<script type="text/javascript">
<?php

  $phpVar = "foo";
  echo "var phpVariable = '{$phpVar}';";

?>
</script> 
```

一旦 PHP 代码被解析，并且 HTML 被发送给用户——他们将看到的只是 PHP 回显的结果——

```
<script type="text/javascript">
  var phpVariable = 'foo';
</script> 
```

现在您`phpVariable`的 JavaScript 可以使用了！因此，您可以像在任何其他情况下一样使用它-

```
$("div."+phpVariable); 
```

这将检索我们任何`<div>`具有`foo`类的元素 -

```
<div class="foo"></div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-19T19:41:56.257

假设您的 jQuery 在同一个文件中：

```
... $('#a2_bottom_<?php echo $sr2 ?>') ... 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-19T19:42:23.343

您可以在脚本标签中将其作为页面的一部分输出......即

```
<script type="text/javascript">
<?php
echo "var sr2 = \"" . $sr2 . "\"";
?>
</script> 
```

然后您的 jQuery 行将能够访问它：

```
$('#a2_bottom_' + sr2) 
```

# ruby - 如何枚举正在运行的 ec2 实例并使用 ruby 将它们加载到数据库中？

> ID：10668315
> 
> 赞同：2
> 
> 时间：2012-05-19T19:39:05.027
> 
> 标签：ruby, amazon-ec2, amazon-web-services

我正在使用 aws-sdk gem，我不知道如何列出所有正在运行的 ec2 实例并将它们加载到数据库中。

我需要一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:51:00.577

```
require 'aws-sdk-v1'
ec2 = AWS::EC2.new(
    access_key_id: 'YOUR_ACCESS_KEY_ID',
    secret_access_key: 'YOUR_SECRET_ACCESS_KEY',
    region: 'YOUR_EC2_REGION'
)

ec2.instances 
```

[http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T03:11:54.627

上面的答案将返回所有实例，而不仅仅是正在运行的实例。您可以使用过滤器仅获取正在运行的实例：

```
ec2 = AWS::EC2.new
ec2.instances.filter('instance-state-name', 'running') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T16:59:54.120

安装 AWS CLI 并运行以下命令以获取正在运行的实例 ID 列表：

```
aws ec2 describe-instances --filter "Name=instance-state-name,Values=running" \
| grep InstanceId | awk '{print $2}' | sed 's/^\"//g' | sed 's/\",$//g' 
```

# android - ActivityThread.performLaunchActivity 中的“找不到源”

> ID：10668318
> 
> 赞同：1
> 
> 时间：2012-05-19T19:39:20.853
> 
> 标签：android, eclipse

我将一个项目从旧计算机复制到新计算机，当我尝试在模拟器中运行它时，当它试图在模拟器中打开时，我得到一个 Source Not Found。在 Eclipse 中，我为“ClassNotFoundException”添加了一个 Java 异常断点。我似乎无法弄清楚它找不到什么类以及如何修复它？任何人都可以给我任何指示或地方看吗？

```
// Method descriptor #8 ()V
// Stack: 3, Locals: 1
protected ClassLoader();
   0  aload_0 [this]
   1  invokespecial java.lang.Object() [1]
   4  new java.lang.RuntimeException [2]
   7  dup
   8  ldc <String "Stub!"> [3]
  10  invokespecial java.lang.RuntimeException(java.lang.String) [4]
  13  athrow
    Line numbers:
        [pc: 0, line: 4]
    Local variable table:
        [pc: 0, pc: 14] local: this index: 0 type: java.lang.ClassLoader 
```

# cakephp - CakePHP - 无法使用 Authcomponent::user 在模型中访问登录用户的密码

> ID：10668322
> 
> 赞同：1
> 
> 时间：2012-05-19T19:39:33.473
> 
> 标签：cakephp, authentication, cakephp-2.0, change-password

几个月前我开始尝试 CakePHP，现在我正在尝试为登录用户创建一个“更改密码页面”。我有一个由以下字段组成的表单：当前密码、新密码和新密码确认。对于当前密码，我想验证它是否与登录用户的密码匹配，作为用户模型中的规则。**我知道我可以通过以下方式获取登录用户的信息：`AuthComponent::user()`。但是，它为我提供了模型的每个字段，除了密码。**

我知道它`Auth->login()`负责为登录用户设置会话变量，但我不确定我在这里做错了什么，只有密码字段无法访问：

```
public function login() {

    if ($this->request->is('POST')) {
        if($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Your username/password combination was incorrect.');
        }
    }
} 
```

这是我的登录视图：

```
<h2>Login</h2>
<?php 
echo $this->Form->create('Promoter');
echo $this->Form->input('username');
echo $this->Form->input('password', array('type' => 'password'));
echo $this->Form->end('Login');?> 
```

我使用Promoter模型作为用户，我在AppController中设置：

```
public $components = array(
    'Auth'=>array(
        ...
        'authenticate' => array(
            'Form' => array('userModel' => 'Promoter')
        ),
        'authorize' => array('Controller')
    )
); 
```

我可以求助于验证控制器中的密码，但这将放弃:) 请告诉我是否需要提供更多代码来澄清问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:46:43.980

因为 cake 不会在会话中存储密码：

lib/Cake/Component/Auth/BaseAuthenticate.php 第 94 行

```
unset($user[$fields['password']]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:47:12.507

您可能没有做错任何事情，这很可能是一项安全功能。没有理由在会话中保留密码。

其次，即使它在会话中，它也会被加密（或者至少我希望如此，如果不是你应该立即更改它！）。因此，您仍然无法进行简单的比较。

要比较旧密码，您应该查询您的`Promoter`模型，并从中获取哈希密码，然后从“更改密码”表单中对旧密码进行哈希处理，最后比较哈希结果。

# android - findViewById(R.id.content) 和 getRootView() 之间的区别

> ID：10668330
> 
> 赞同：8
> 
> 时间：2012-05-19T19:40:18.550
> 
> 标签：android, view, root

findViewById(R.id.content) 和 getRootView() 有什么区别？不都返回活动的根视图吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T22:25:32.357

该方法[`findViewById(R.id.content)`](http://developer.android.com/reference/android/view/View.html#findViewById%28int%29)在视图层次结构中搜索具有 id 的视图`content`（它也会检查自身）。

该方法[`getRootView()`](http://developer.android.com/reference/android/view/View.html#getRootView%28%29)遍历视图层次结构，直到它到达根视图（它也会检查自己）。

如果您所在的视图具有 id`content`并且它是根视图，那么这些方法将给出相同的结果，否则它们不会。

# c++ - 为什么 sTimebaseInfo.denom 为 0？

> ID：10668333
> 
> 赞同：1
> 
> 时间：2012-05-19T19:40:45.480
> 
> 标签：c++, ios, timing

我正在使用这个样板来测试 iOS 5.1.1 (4s) 上某些视频设置的性能：

```
static mach_timebase_info_data_t sTimebaseInfo = { 0, 0 };
if ( sTimebaseInfo.denom == 0 ) {
    kern_return_t err = mach_timebase_info(&sTimebaseInfo);
    if (err) {
        NSLog(@"unable to get mach timebase info: %d",err);
    }
}
uint64_t        start = mach_absolute_time();
uint64_t        end;
uint64_t        elapsed;
uint64_t        elapsedNano;

    // stuff

end = mach_absolute_time();
// Calculate the duration.
elapsed = end - start;
elapsedNano = elapsed * sTimebaseInfo.numer;
elapsedNano /= sTimebaseInfo.denom; 
```

但 sTimebaseInfo.denom 始终为 0，即使在 mach_timebase_info 运行之后也是如此。它没有错误。我不知道该怎么办。:) 不必以*纳秒*为单位获取值；显然，我可以在没有的情况下比较结果。但肯定会很好。

帮助？:)

# javascript - 正确使用模块模式语法？

> ID：10668335
> 
> 赞同：2
> 
> 时间：2012-05-19T19:41:13.427
> 
> 标签：javascript

我见过两种方法……第一种对我来说最有意义。

自执行括号直接放在函数括号之后。All 包含在括号之间以使其成为函数表达式。参考[这里](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

```
( function () {
    // ... all vars and functions are in this scope only
    // still maintains access to all globals
} () ); 
```

和这种风格，其中自我执行括号放在括号之后，创建函数表达式。参考[这里](http://www.codeproject.com/Articles/247241/Javascript-Module-Pattern)

```
var Var = ( function ( window, undefined ) 
{

} )(); 
```

我不确定 var 是否会影响语法...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:52:54.270

您的问题的答案在我的第一条评论中有关[即时功能的链接中。](https://stackoverflow.com/questions/939386)本质上，如果您只想要一个立即函数，只要函数声明本身包含在括号中，调用括号是否跟随花括号或跟随括号都无关紧要。但是，如果您不想要包装括号，则分配 to`Var`变得相关，因为这将起作用：

```
var Var = function () {
    // do stuff; return stuff;
}(); 
```

但这不会：

```
function () {
    // do stuff;
}(); 
```

因为它只是一个*函数声明*，后跟一对意外的括号（语法错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T20:14:52.050

两者之间没有区别：

```
(function () {})(); 
```

和

```
(function () {}()); 
```

Douglas Crockford 提倡第二种风格（所以 JSLint 会抱怨第一种风格）。他说第一个“适得其反”，不管这意味着什么……我更喜欢第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:10:21.080

它实际上是2种不同的模式。第二种模式称为[显示模块模式](http://blog.davidlitmark.com/post/6009004931/an-introduction-to-the-revealing-module-pattern)，因为它将一些局部变量显示到全局命名空间中。

# php - 带有属性的php xml解析

> ID：10668337
> 
> 赞同：0
> 
> 时间：2012-05-19T19:41:33.417
> 
> 标签：php, xml

我有一些看起来像这样的 XML

```
$xml_str = '<RESPONSE>
    <FIELDS>
    <FIELD KEY="A">1</FIELD>
    <FIELD KEY="B">2</FIELD>
    <FIELD KEY="C">3</FIELD>
    <FIELD KEY="D">4</FIELD>
    </FIELDS>
    </RESPONSE>'; 
```

响应中只会有 1 个“字段”。有没有一种简单的方法可以将“FIELD”元素放在一个数组中，键是“KEY”，值是元素值？

我可以这样做

```
$xml_data = simplexml_load_string($xml_str);
foreach ($xml_data->FIELDS->FIELD as $field) {
    foreach ($field->attributes() as $a => $b) {
        $array[$b] = $field[0];
    }
} 
```

但我想知道是否有更好的方法？

TIA

# java - 真实的对象而不是在画布上绘图

> ID：10668339
> 
> 赞同：1
> 
> 时间：2012-05-19T19:41:44.353
> 
> 标签：java, swing, graph

这是一个有点笼统的问题，因此我不太确定它是否适合这里。

我现在正在做一个项目，我们会在其中生成图表，然后将其显示在 GUI 中。GUI 将使用 Swing 开发。

现在我不确定最好使用什么来绘制图表。我当然可以使用 Canvas 类，但是再次修改绘制的对象会很困难。更好的方法是将真实对象添加到画布或 GUI 中，而不是绘制它。

你们能推荐任何好的库或Java框架来实现我想要做的事情吗？

澄清一下：对于图，我的意思是图论中的图。顶点和边。因此，将真正的顶点对象添加到 GUI，然后可以再次选择它和一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:18:00.983

我强烈推荐使用这个：[Netbeans Visual Library](http://platform.netbeans.org/graph/)。它是作为 Netbeans RCP 的一部分开发的，但可以在没有它的情况下使用。它是一个用于构建可视化组件的高度抽象的 API，许多已经实现。它提供了一个画布、您可以在画布上构建和显示的对象、简单的地图（概览）以轻松导航大型容器以及一些通用布局算法。

这是[一个教程](http://platform.netbeans.org/tutorials/nbm-visual_library.html)

# python - 使用 Python 创建 3D 数组

> ID：10668341
> 
> 赞同：50
> 
> 时间：2012-05-19T19:41:59.137
> 
> 标签：python, arrays, python-2.7, multidimensional-array

我想在 Python (2.7) 中创建一个 3D 数组，以便像这样使用：

```
distance[i][j][k] 
```

数组的大小应该是我拥有的变量的大小。(n *n* n)

我尝试使用：

```
distance = [[[]*n]*n] 
```

但这似乎不起作用。

我只能使用默认库，并且乘法（即`[[0]*n]*n`）不起作用，因为它们链接到同一个指针，我需要所有值都是单独的

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-19T19:57:10.393

您应该使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> import pprint
>>> n = 3
>>> distance = [[[0 for k in xrange(n)] for j in xrange(n)] for i in xrange(n)]
>>> pprint.pprint(distance)
[[[0, 0, 0], [0, 0, 0], [0, 0, 0]],
 [[0, 0, 0], [0, 0, 0], [0, 0, 0]],
 [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]
>>> distance[0][1]
[0, 0, 0]
>>> distance[0][1][2]
0 
```

您可以使用看起来像您尝试过的语句生成一个数据结构，但是由于内部列表是按引用复制的，因此它会产生副作用：

```
>>> distance=[[[0]*n]*n]*n
>>> pprint.pprint(distance)
[[[0, 0, 0], [0, 0, 0], [0, 0, 0]],
 [[0, 0, 0], [0, 0, 0], [0, 0, 0]],
 [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]
>>> distance[0][0][0] = 1
>>> pprint.pprint(distance)
[[[1, 0, 0], [1, 0, 0], [1, 0, 0]],
 [[1, 0, 0], [1, 0, 0], [1, 0, 0]],
 [[1, 0, 0], [1, 0, 0], [1, 0, 0]]] 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-19T19:47:03.867

`numpy.array`s 专为这种情况而设计：

```
 numpy.zeros((i,j,k)) 
```

会给你一个维度 i *j* k 的数组，用零填充。

根据您的需要，[numpy](http://pypi.python.org/pypi/numpy)可能是满足您需求的正确库。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-19T19:46:05.913

正确的方法是

```
[[[0 for _ in range(n)] for _ in range(n)] for _ in range(n)] 
```

（你想要做的应该写成（对于NxNxN）

```
[[[0]*n]*n]*n 
```

但这不正确，请参阅@Adaman 评论原因）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-09T13:23:04.257

```
d3 = [[[0 for col in range(4)]for row in range(4)] for x in range(6)]

d3[1][2][1]  = 144

d3[4][3][0]  = 3.12

for x in range(len(d3)):
    print d3[x]

[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 144, 0, 0], [0, 0, 0, 0]]
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]]
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3.12, 0, 0, 0]]
[[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-01T11:26:26.720

```
"""
Create 3D array for given dimensions - (x, y, z)

@author: Naimish Agarwal
"""

def three_d_array(value, *dim):
    """
    Create 3D-array
    :param dim: a tuple of dimensions - (x, y, z)
    :param value: value with which 3D-array is to be filled
    :return: 3D-array
    """

    return [[[value for _ in xrange(dim[2])] for _ in xrange(dim[1])] for _ in xrange(dim[0])]

if __name__ == "__main__":
    array = three_d_array(False, *(2, 3, 1))
    x = len(array)
    y = len(array[0])
    z = len(array[0][0])
    print x, y, z

    array[0][0][0] = True
    array[1][1][0] = True

    print array 
```

更喜欢`numpy.ndarray`用于多维数组。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-13T05:46:57.403

您还可以使用`for`如下所示的嵌套循环

```
n = 3
arr = []
for x in range(n):
    arr.append([])
    for y in range(n):
        arr[x].append([])
        for z in range(n):
            arr[x][y].append(0)
print(arr) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-31T16:29:51.603

有很多方法可以解决您的问题。

1.  第一个是@robert 接受的答案。这是它的通用解决方案：

```
def multi_dimensional_list(value, *args):
  #args dimensions as many you like. EG: [*args = 4,3,2 => x=4, y=3, z=2]
  #value can only be of immutable type. So, don't pass a list here. Acceptable value = 0, -1, 'X', etc.
  if len(args) > 1:
    return [ multi_dimensional_list(value, *args[1:]) for col in range(args[0])]
  elif len(args) == 1: #base case of recursion
    return [ value for col in range(args[0])]
  else: #edge case when no values of dimensions is specified.
    return None 
```

例如：

```
>>> multi_dimensional_list(-1, 3, 4)  #2D list
[[-1, -1, -1, -1], [-1, -1, -1, -1], [-1, -1, -1, -1]]
>>> multi_dimensional_list(-1, 4, 3, 2)  #3D list
[[[-1, -1], [-1, -1], [-1, -1]], [[-1, -1], [-1, -1], [-1, -1]], [[-1, -1], [-1, -1], [-1, -1]], [[-1, -1], [-1, -1], [-1, -1]]]
>>> multi_dimensional_list(-1, 2, 3, 2, 2 )  #4D list
[[[[-1, -1], [-1, -1]], [[-1, -1], [-1, -1]], [[-1, -1], [-1, -1]]], [[[-1, -1], [-1, -1]], [[-1, -1], [-1, -1]], [[-1, -1], [-1, -1]]]] 
```

PS 如果您热衷于验证 args 的正确值，即只有自然数，那么您可以在调用此函数之前编写一个包装函数。

2.  其次，任何多维数组都可以写成一维数组。这意味着您不需要多维数组。以下是索引转换的功能：

```
def convert_single_to_multi(value, max_dim):
  dim_count = len(max_dim)
  values = [0]*dim_count
  for i in range(dim_count-1, -1, -1): #reverse iteration
    values[i] = value%max_dim[i]
    value /= max_dim[i]
  return values

def convert_multi_to_single(values, max_dim):
  dim_count = len(max_dim)
  value = 0
  length_of_dimension = 1
  for i in range(dim_count-1, -1, -1): #reverse iteration
    value += values[i]*length_of_dimension
    length_of_dimension *= max_dim[i]
  return value 
```

因为，这些函数是互逆的，所以输出如下：

```
>>> convert_single_to_multi(convert_multi_to_single([1,4,6,7],[23,45,32,14]),[23,45,32,14])
[1, 4, 6, 7]
>>> convert_multi_to_single(convert_single_to_multi(21343,[23,45,32,14]),[23,45,32,14])
21343 
```

3.  如果您担心性能问题，那么您可以使用一些库，如 pandas、numpy 等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-14T07:08:51.347

```
n1=np.arange(90).reshape((3,3,-1))
print(n1)
print(n1.shape) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-20T13:43:49.410

```
def n_arr(n, default=0, size=1):
    if n is 0:
        return default

    return [n_arr(n-1, default, size) for _ in range(size)]

arr = n_arr(3, 42, 3)
assert arr[2][2][2], 42 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-05-19T19:49:25.327

如果您坚持将所有内容初始化为空，则需要在内部使用一组额外的括号（[[]] 而不是 []，因为这是“包含要复制的 1 个空列表的列表”而不是“包含没有什么可复制的”）：

```
distance=[[[[]]*n]*n]*n 
```

# ruby-on-rails-3 - 对于开发/测试/生产模式，您如何在视觉上区分您的 Rails 应用程序？

> ID：10668349
> 
> 赞同：2
> 
> 时间：2012-05-19T19:43:12.213
> 
> 标签：ruby-on-rails-3

我很好奇你们如何在视觉上区分不同的 Rails 模式开发/测试和生产？

恐怕由于在每种模式下应用程序在视觉上看起来都一样，我的客户可能会使用错误的环境并在测试环境中输入生产数据。

现在我更改了我的应用程序 CSS 中的背景，以确保有所不同。但我宁愿有一些智能的东西，它会根据运行的环境自动工作。也许是一个大水印？

这里有什么最佳实践吗？

根据 Artimuz 的回答，我做了以下事情：

将此添加到**application_helper.rb**

```
 def development?
    @is_development ||= (ENV['RAILS_ENV'] != 'production')
  end 
```

然后在**application.html.erb** 我添加：

```
 <head>
 <% if development? %>
    <style type="text/css">
        html {              
         background-image: url(/assets/test.png);
         background-color: silver;
        }
    </style>>   
  <% end %>
 </head> 
```

test.png 只是一个透明的 png，里面有“test”这个词和一条对角线。像魅力一样工作（平铺），确保您不会错过开发/测试环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:03:55.523

从这里： http: [//markmail.org/message/grmor6rppm5jwgnh](http://markmail.org/message/grmor6rppm5jwgnh)

您可以测试 RAILS_ENV 环境变量。

在 application_helper.rb 中，添加这个方法：

```
def production?
  @is_production ||=(ENV['RAILS_ENV']=='production')
end 
```

您的视图/布局中的 d：

```
<% if production? %>
   ...
<% end %> 
```

# windows - Windows 7 批量设置系统日期/时间

> ID：10668352
> 
> 赞同：-1
> 
> 时间：2012-05-19T19:43:43.693
> 
> 标签：windows, date, batch-file

我有一个批处理文件，需要在过去的特定日期运行。我可以通过控制面板（下图）更改系统日期和时间、运行批处理文件并将日期设置回当前日期来手动执行此操作。但是，我想在批处理文件中包含设置时间和日期以简化过程。这可能吗？

![日期和时间控制面板](../Images/d8e1e99ec8234526de96ae45d08b93b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:05:26.087

该`DATE`命令可用于在 Windows 7 中设置日期。

以下，在美国语言环境中，都具有相同的效果；将时钟设置为 2012 年 12 月 3 日：

```
DATE 12/3/2012
DATE 12-03-2012
DATE 12/03/12
DATE 12-3-12 
```

请注意，执行该命令需要管理员权限。

# xml - 格式不正确的 xml JAXB

> ID：10668355
> 
> 赞同：1
> 
> 时间：2012-05-19T19:43:49.293
> 
> 标签：xml, spring, spring-mvc, jaxb

我尝试使用 JAXB 注释发送和 xml 文件，但我看到节点具有以下格式：

```
<:subject xmlns="http://www..." xmlns:atom="http://www.w3.org/2005/atom">
 <:data>maths<:data>
</:subject> 
```

而不是这个：

```
<subject xmlns="http://www..." xmlns:atom="http://www.w3.org/2005/atom">
 <data>maths<data>
</subject> 
```

我不明白为什么会这样。从哪里插入 : 符号，为什么？吨

```
My model has this form:

@XmlRootElement(name="subject")
@XmlAccessorType(XmlAccessType.FIELD)
public class Registration {

   private String data;

    get/set
} 
```

我的包信息.java：

```
 @javax.xml.bind.annotation.XmlSchema (
   namespace="http://www..",
   elementFormDefault=XmlNsForm.QUALIFIED,
xmlns = { 
  @javax.xml.bind.annotation.XmlNs( prefix=" ", namespaceURI="http://www..."),
  @javax.xml.bind.annotation.XmlNs( prefix="atom" ,namespaceURI="http://www.w3.org/2005/atom")
})

 package mypackage.affil;

 import javax.xml.bind.annotation.XmlNsForm; 
```

我的观点：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
 <%@ taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
 <%@ page language="java" contentType="text/html"
pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html">
<title>Insert title here</title>
</head>
<body>

<h1>Create New Person</h1>

<c:url var="takeinto" value="/takedata" />
<form:form modelAttribute="takedataAttribute" method="POST" action="${takeinto}">
<table>
    <tr>
        <td><form:label path="data">Affiliation</form:label></td>
        <td><form:input path="data"/></td>
    </tr> 
```

谁能告诉我为什么符号 : 出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:32:02.890

你在那里触发了一个奇怪的错误！我的猜测是问题出在这里（我已经删除了 Java 命名空间名称，您可以在 package-info.java 中通过在`import`声明后放入正确的语句来完成`package`）：

```
@XmlSchema (
    namespace="http://www..",
    elementFormDefault=XmlNsForm.QUALIFIED,
    xmlns = { 
        @XmlNs( prefix=" ", namespaceURI="http://www..."),
        @XmlNs( prefix="atom" ,namespaceURI="http://www.w3.org/2005/atom")
}) 
```

我猜这是使用单个空字符串 for`prefix`和`QUALIFIED`for的组合`elementFormDefault`。试试这个：

```
@XmlSchema(
    namespace="http://www..",
    elementFormDefault=XmlNsForm.UNQUALIFIED,
    xmlns = { 
        @XmlNs(prefix="atom", namespaceURI="http://www.w3.org/2005/atom")
}) 
```

也就是说，`UNQUALIFIED`只提供`xmlns`您想要合格的零件。您可能需要在`@XmlElement`整个标签上指定命名空间（文档有些不清楚），因此我还建议将其重构为接口中的常量；这也使事情变得更清楚。

# matlab - 如何从 matlab 的文件夹中读取 mat 格式的文件？

> ID：10668362
> 
> 赞同：-6
> 
> 时间：2012-05-19T19:44:33.147
> 
> 标签：matlab

我的问题是我的文件夹包含 mat 格式的图像，我如何使用 for 循环读取这些 mat 文件？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:20:09.160

试试这个。

```
folder = 'C:/foobar/';
files = dir([folder '*.mat');
for i = 1:numel(files)
    load(files(i).name;
end 
```

# c++ - 如何在变量中传递方法名称？

> ID：10668363
> 
> 赞同：0
> 
> 时间：2012-05-19T19:44:34.743
> 
> 标签：c++, reflection

这是我的代码...

```
struct Test {
  string foo() { return "bar"; }
};

#define callFn(obj,method) obj->method();

int main() {
  Test* t = new Test();
  cout << callFn(t,foo); // bar
  return 0;
} 
```

...这是我想要的代码

```
int main() {
  Test* t = new Test();
  string method = "foo";
  cout << callFn(t,method); // bar
  return 0;
} 
```

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:46:28.073

你不能。C++ 没有反射功能。

您必须定义例如`std::map`将字符串映射到函数指针的 a。

```
void foo(int x) { std::cout << "foo " << (x+3) << "\n"; }
void bar(int x) { std::cout << "bar " << (x+5) << "\n"; }

int main() {
    std::map<std::string, void (*)(int)> mapper;
    mapper["foo"] = &foo;
    mapper["bar"] = &bar;

    // ...

    mapper["foo"](42);
    mapper["bar"](42);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T19:50:23.413

您可能想要成员函数指针之类的东西：

```
typedef std::string (Test::*ptmf)();

#define CALL_MF(pobject, p) (((pobject)->*(p))())

int main()
{
    ptmf method = &Test::foo;
    Test * t = new Test;
    std::string result = CALL_MF(t, method);   // or directly: (t->*method)()
} 
```

您可以创建其元素类型`ptmf`为的容器，以在运行时管理不同的成员函数指针：

```
std::map<int, ptmf> function_registry;

std::string call(int key, Test * t)
{
    auto it = function_registry.find(key);
    return (it != function_registry.end()) ? CALL_MF(t, *it) : "[ERROR]";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:00:26.953

你可以做这样的事情，但是因为 C++ 缺乏反射能力，你必须做一些额外的工作才能使它成为可能。

```
struct base {
  virtual void call_method( std::string const & ) = 0;
};

struct derived : public base {
  std::string foo( ) const {
    return "bar";
  }

  // More methods.

  void call_method( std::string const &p_name ) {
    if( p_name == "foo" ) {
      this -> foo( );
    }

    // More checks on method names.

    else {
      // Handle invalid function name.
    }
  }
}; 
```

这称为数据驱动接口，您可以在其中将命令传递给对象，它们会以多态方式响应它们识别的命令。您可以通过创建从命令到函数指针的静态初始化无序映射然后使用它来解析要调用的函数来改进我展示的内容。但是，如果可以的话，最好避免这种类型的函数调度，因为与静态函数调度相比它很慢并且容易出错，因为拼写错误可能导致不正确的调用或错误。它还有一个缺点，即您无法轻松获得返回值，尽管在某些情况下是可能的。

编辑：我想给出一个更完整的例子来说明如何做到这一点，所以这里是：

```
#include <cassert>
#include <iostream>

#include <boost/bind.hpp>
#include <boost/blank.hpp>
#include <boost/variant.hpp>
#include <boost/function.hpp>

#include <boost/unordered_map.hpp>
#include <boost/assign/list_of.hpp>

// A base class that defines an interface to call methods by name
// and to access the list of methods.  We use a map of argument
// names to boost::variants to pass arguments to the functions.
// Right now we support only ints and strings, but we can expand
// this to other types if we want.  In particular, we can use
// boost::any to support arbitrary types, but it will be slow.
// Maybe that's not a big deal since function dispatch through
// named functions is slow anyway.

struct base {
  typedef boost::variant< boost::blank, int, std::string > argument_t;
  typedef boost::variant< boost::blank, int, std::string >   return_t;

  typedef boost::unordered_map< std::string, argument_t > param_map_t;

  typedef boost::function< return_t ( base *, param_map_t const & ) >
  method_t;

  typedef boost::unordered_map< std::string, method_t > method_map_t;

  return_t call_method(
      std::string const &p_method
    , param_map_t const &p_params = param_map_t( )
  )
  {
    method_map_t::const_iterator l_itr =
      get_methods( ).find( p_method );

    if( l_itr == get_methods( ).end( )) {
      // Handle undefined method identifier.
    }

    return l_itr -> second( this, p_params );
  }

  virtual method_map_t const &get_methods( ) const = 0;
};

// A trampoline object to elide the concrete type that
// implements the base interface and to provide appropriate
// casting.  This is necessary to force all functions in our
// method map to have the same type.

template< typename U >
base::return_t trampoline(
    base::return_t (U::*p_fun)( base::param_map_t const & )
  , base *p_obj
  , base::param_map_t const &p_param_map
)
{
  U *l_obj = static_cast< U* >( p_obj );
  return (l_obj ->* p_fun)( p_param_map );
}

// A derived type that implements the base interface and
// provides a couple functions that we can call by name.

struct derived : public base {
  static method_map_t const c_method_map;

  return_t foo( param_map_t const &p_params ) {
    std::cout << "foo" << std::endl;  return 1;
  }

  return_t bar( param_map_t const &p_params ) {
    std::cout << "bar" << std::endl;  return std::string( "bar" );
  }

  method_map_t const &get_methods( ) const {
    return c_method_map;
  }
};

// Construct map of method names to method pointers for derived.

base::method_map_t const derived::c_method_map = boost::assign::map_list_of
  ( "foo", boost::bind( &trampoline< derived >, &derived::foo, _1, _2 ))
  ( "bar", boost::bind( &trampoline< derived >, &derived::bar, _1, _2 ))
;

int main( ) {
  base *blah = new derived( );

  // Call methods by name and extract return values.

  assert( boost::get< int         >( blah -> call_method( "foo" )) == 1     );
  assert( boost::get< std::string >( blah -> call_method( "bar" )) == "bar" );

  // Iterate over available methods

  typedef base::method_map_t::const_iterator iterator;

  iterator l_itr = blah -> get_methods( ).begin( );
  iterator l_end = blah -> get_methods( ).end  ( );

  for( ; l_itr != l_end; ++l_itr ) {
    if( l_itr -> first == "foo" ) l_itr -> second( blah, base::param_map_t( ));
  }
} 
```

输出是：

```
foo
bar
foo 
```

如您所见，设置它需要做很多工作，但是添加实现接口的新类型非常容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T19:53:41.847

这本质上是 Java1.5 后可用的反射机制

这是 C++ 中的反射示例

[http://www.garret.ru/cppreflection/docs/reflect.html](http://www.garret.ru/cppreflection/docs/reflect.html)

# c# - 将项目绑定到列表框

> ID：10668365
> 
> 赞同：2
> 
> 时间：2012-05-19T19:45:13.603
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我有一个应用程序，我在其中向用户显示特定单词的含义。因此，我在前端使用了一个列表框。这是代码..

XAML：

```
<ListBox Background="White" Grid.Row="1" ItemsSource="{Binding}" Height="605" HorizontalAlignment="Stretch" Margin="0,90,0,0" Name="listBox1" VerticalAlignment="Top">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Vertical" Height="50">
        <TextBlock Text="{Binding ActualWord}" Height="5" />
        <TextBlock Text="{Binding Meaning}"  Height="5"/>
        <TextBlock Text="{Binding Type}" Height="5"/>
        <TextBlock Text="{Binding Example}" Height="5" />
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

C# 用于在后端添加单词..

```
listBox1.Items.Add(new WordClass()
{
    ActualWord = "Something",
    Type = "Something111",
    Meaning =  "Something222",
    Example =  "Something333"
}); 
```

问题是代码可以编译，但我看到一个空白屏幕，或者换句话说，列表框中没有任何内容，即使我在页面的构造函数中执行此操作也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T20:13:37.327

`ItemsSource="{Binding}"`从 XAML 中删除该部分。由于您是手动填写列表，因此您不需要它，它可能会导致问题。

另一种选择是保持 XAML 不变，填充集合`WordClass`并将其设置为`DataContext`：

```
var list = new List<WordClass>();
list.Add(new WordClass()
{
    ActualWord = "Something",
    Type = "Something111",
    Meaning =  "Something222",
    Example =  "Something333"
});
...

this.DataContext = list; 
```

# javascript - 带有 2 个按钮的表单需要根据值调用不同的函数

> ID：10668366
> 
> 赞同：0
> 
> 时间：2012-05-19T19:45:14.493
> 
> 标签：javascript, ajax, jquery

我有一个页面，它的 url 中有很多帖子数据。

例如 www.test.com/test.php?userid='tester'&name=test&so on

上面的页面有一个类似这样的表单：

```
<? 
$set=get_value_set;
if($set ==1) {
    $set_value="SET";
} else {
    $set_value="UNSET";
}

?>
<form name="test">
<input type="text" readonly="READONLY" value="<? echo $user_id; ?>">
<input type="submit" value="Email" name="submit_user">
<input type="submit" value="<? echo $set_value; ?>" name="submit_user">

<? 
function setuser()
{
//sets the value

}
function email_user()
{
//sets the value

}
?> 
```

上面有两个按钮，当我单击电子邮件时，我希望将电子邮件按钮的值传递给 email_user 函数并在那里进行一些处理。当我单击设置按钮时类似的事情。

**注意：但在上述两种情况下，我希望表单与 url 中的相同帖子数据保持在同一页面中，但我还希望刷新页面，以便设置按钮可以具有 Set 或 Unset 值，具体取决于关于数据库更新。**

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:50:38.550

我将开始删除`submit`每个按钮的操作并将它们更改为

```
<input type="button" class="btn-Email" value="Email" name="submit_user" />
<input type="button" class="btn-Other" value="<? echo $set_value; ?>" name="submit_user" /> 
```

然后，使用 jQuery，您可以轻松处理每次点击并提交表单

```
$(function() {

  $(".btn-Email").click(function() {
    // append anything you want
    var but_email_value = $(this).val(), // or $(".btn-Email").val()
        btn_other_value = $(".btn-Other").val();

    $("form").submit();
  });

  $(".btn-Other").click(function() {
    // append anything you want
    var but_other_value = $(this).val(), // or $(".btn-Other").val();
        btn_email_value = $(".btn-Email").val();

    $("form").submit();
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:49:58.930

更改您的 HTML

```
<form id="test" name="test">
...
<button onclick="email_user();">Email</button>
<button onclick="setuser();"><? echo $set_value; ?></button>
</form> 
```

您的职能应为您提交表格：

```
document.getElementById("test").submit(); 
```

# jquery - iframe 未使用 Fancybox v2.0.6 和 jQuery 1.7.2 填充

> ID：10668373
> 
> 赞同：1
> 
> 时间：2012-05-19T19:46:33.080
> 
> 标签：jquery, fancybox

好的..我的脚本中包含了Fancebox。

我使用这个 HTML 链接：

```
<p><a class="fancybox fancybox.iframe" href="https://twitter.com/intent/tweet?source=webclient&text=Hello+world!">twitter</a></p>

<p><a class="fancybox fancybox.iframe" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.example.com">facebook</a></p>​​​​​​​​​​​​​​​​​​​​​​ 
```

这个 JS 脚本被添加到页面中：

```
$(function() {

$(".fancybox").fancybox({
maxWidth    : 500,
maxHeight   : 450,
fitToView   : false,
width       : '70%',
height      : '70%',
autoSize    : false,
closeClick  : false,
openEffect  : 'none',
closeEffect : 'none',
type        : 'iframe'
});
});​ 
```

当我单击其中一个链接时，会弹出一个 Fancybox + 目标窗口。

在我看到的源代码中：

```
<div class="fancybox-wrap fancybox-desktop fancybox-type-iframe fancybox-opened" style="width: 830px; height: auto; display: block; position: fixed; top: 85px; left: 417px; opacity: 1;">
    <div class="fancybox-skin" style="padding: 15px;">
        <div class="fancybox-outer">
            <div class="fancybox-inner" style="width: 800px; height: 302px; overflow: auto;">
                <iframe class="fancybox-iframe" scrolling="auto" frameborder="0" hspace="0" name="fancybox-frame1337456160882" src="https://twitter.com/intent/tweet?source=webclient&text=Hello+world!">
                    <html>
                        <head>
                        </head>
                        <body>
                        </body>
                    </html>
                </iframe>
            </div>
        </div>
        <div class="fancybox-item fancybox-close" title="Close"></div>
    </div>
</div> 
```

这意味着 iframe 不会由外部内容填充。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:50:50.730

Twitter 不允许 iframe。尝试使用另一个网址。

你连这个都做不到

```
<html>
<head> 

</head> 
<body> 
    <iframe src='https://twitter.com/intent/tweet?source=webclient&text=Hello+world!'></iframe>
</body>
</html> 
```

# php - PHP 中是否有一些东西可以将秒转换为天、小时、分钟？

> ID：10668374
> 
> 赞同：4
> 
> 时间：2012-05-19T19:46:43.133
> 
> 标签：php

例如，如果我有：

```
$seconds = 3744000; // i want to output: 43 days, 8 hours, 0 minutes 
```

我必须创建一个函数来转换它吗？或者 PHP 是否已经内置了一些东西来做到这一点`date()`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T19:51:46.817

```
function secondsToWords($seconds)
{
    $ret = "";

    /*** get the days ***/
    $days = intval(intval($seconds) / (3600*24));
    if($days> 0)
    {
        $ret .= "$days days ";
    }

    /*** get the hours ***/
    $hours = (intval($seconds) / 3600) % 24;
    if($hours > 0)
    {
        $ret .= "$hours hours ";
    }

    /*** get the minutes ***/
    $minutes = (intval($seconds) / 60) % 60;
    if($minutes > 0)
    {
        $ret .= "$minutes minutes ";
    }

    /*** get the seconds ***/
    $seconds = intval($seconds) % 60;
    if ($seconds > 0) {
        $ret .= "$seconds seconds";
    }

    return $ret;
}

print secondsToWords(3744000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T07:29:59.017

这很简单，很容易在核心 php 中找到天、小时、分钟和秒：

```
$dbDate = strtotime("".$yourdbtime."");
$endDate = time();
$diff = $endDate - $dbDate;
$days = floor($diff/86400);
$hours = floor(($diff-$days*86400)/(60 * 60));
$min = floor(($diff-($days*86400+$hours*3600))/60);
$second = $diff - ($days*86400+$hours*3600+$min*60);

 if($days > 0) echo $days." Days ago";
 elseif($hours > 0) echo $hours." Hours ago";
 elseif($min > 0) echo $min." Minutes ago";
 else echo "Just now"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-20T10:06:45.900

现在实现这一点的一种简单方法是使用[`DateTimeImmutable`](http://php.net/manual/en/class.datetimeimmutable.php),[`DateInterval`](http://php.net/manual/en/dateinterval.format.php)和 PHP 5.5.0 或更高版本：

```
$seconds = 3744000;

$interval = new DateInterval("PT{$seconds}S");
$now = new DateTimeImmutable('now', new DateTimeZone('utc'));

$difference = $now->diff($now->add($interval))->format('%a days, %h hours, %i minutes'); 
```

结果将是：

> 43 天 8 小时 0 分钟

该代码将秒数添加到日期并计算差异。像这样，秒转换为指定的天、小时和分钟。

* * *

**警告 1：在没有 UTC 的情况下工作 - 时钟更改**

您**可能不会**在对象`DateTimeZone`的构造函数中指定.`DateTimeImmutable``UTC`

```
$now = new DateTimeImmutable(); 
```

这个世界上有些地区的时钟在一年中的特定日子发生变化。例如，欧盟的大多数国家/地区在夏季和冬季之间转换。

如果您的日期间隔与发生时钟更改的那一天重叠，并且您的服务器设置为该时钟更改的相关区域，则结果也可能会更改。最好用下面的例子来说明这一点：

```
$twentyFourHours = new DateInterval('PT24H');
$twentyFiveHours = new DateInterval('PT25H');

//Pacific time changed from summer- to winter-time on that day
$summerToWinter = new DateTimeImmutable('2018-11-04'); 
```

如果将`$summerToWinter`日期加上 24 小时，您将得到以下结果：

```
$extra24Hours = $summerToWinter->add($twentyFourHours);
echo $summerToWinter->format('y-m-d H:i');
echo $extra24Hours->format('y-m-d H:i');
echo $summerToWinter->diff($extra24Hours)->format('%a days, %h hours, %i minutes'); 
```

> 18-11-04 00:00
> 
> 18-11-04 23:00
> 
> 0 天 24 小时 0 分钟

如您所见，当天的 00:00 和 23:00 之间是 24 小时，这在技术上是正确的。由于时钟更改，当天 02:00 和 03:00 之间的时间间隔发生了两次。

添加 25 小时将导致：

```
$extra25Hours = $summerToWinter->add($twentyFiveHours);
echo $summerToWinter->format('y-m-d H:i');
echo $extra25Hours->format('y-m-d H:i');
echo $summerToWinter->diff($extra25Hours)->format('%a days, %h hours, %i minutes'); 
```

> 18-11-04 00:00
> 
> 18-11-05 00:00
> 
> 1 天 0 小时 0 分钟

正如我们所见，1 天过去了，25 小时过去了。如果这适用于`3744000`原始问题的秒数，结果将显示：

> 43 天 7 小时 0 分钟

**但是，没有显示过去一天有 25 小时的信息。**

此外，对于将时钟从冬季时间更改为夏季时间的一天，我无法重现相同的效果，这应该只经过 23 小时。

* * *

**警告 2：使用原始 DateInterval 对象**

不使用此代码`DateTimeImmutable`将导致错误的输出：

```
$seconds = 3744000;
$interval = new DateInterval("PT{$seconds}S");
$difference = $interval->format('%a days, %h hours, %i minutes, %s seconds'); 
```

现在，对象中只设置了秒数`DateInterval`。`$difference`将会：

> （未知）天，0 小时，0 分钟，3744000 秒

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-20T09:45:40.437

我最喜欢 Ian Gregory 的回答并对其表示赞同，但我认为我会稍微简化一下：

```
function secondsToWords($seconds)
{
    $days = intval(intval($seconds) / (3600*24));
    $hours = (intval($seconds) / 3600) % 24;
    $minutes = (intval($seconds) / 60) % 60;
    $seconds = intval($seconds) % 60;

    $days = $days ? $days . ' days' : '';
    $hours = $hours ? $hours . ' hours' : '';
    $minutes = $minutes ? $minutes . ' minutes' : '';
    $seconds = $seconds ? $seconds . ' seconds' : '';

    return $days . $hours . $minutes . $seconds;
} 
```

# php - Blogger 中语法高亮的最佳实践

> ID：10668375
> 
> 赞同：0
> 
> 时间：2012-05-19T19:46:50.260
> 
> 标签：php, syntax, highlighting, blogger

第一个问题在这里。我正在[http://mpgengine.blogspot.co.uk/](http://mpgengine.blogspot.co.uk/)上写博客，我想在我的帖子中放入命令行代码、MySQL 和 PHP 片段以及整个 PHP 脚本。

我尝试过使用谷歌的一些 Javascript 高亮脚本，但这些似乎有不可预知的结果。我有几个问题。1\. 是否有显示代码的标准方式（可能在那些点边框框中） 2\. 有人可以告诉我为什么 JS 以不同的方式显示我的代码吗？3\. 是否可以在 Blogger 上显示整个 PHP 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:36:26.277

用这个，

[语法荧光笔](http://alexgorbatchev.com/SyntaxHighlighter/)。

它是最著名和最可靠的语法荧光笔，适用于多种语言（包括 php）。

此外，这是将其集成到博客的链接。

[在博客上集成语法荧光笔](http://www.cyberack.com/2007/07/adding-syntax-highlighter-to-blogger.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:06:46.637

您可以使用

```
<pre class="brush: php"></pre> 
```

这对我来说很有用。我希望它对你有帮助。

# c# - 无法确定条件表达式的类型，因为 'string' 和 'int' 之间没有隐式转换

> ID：10668377
> 
> 赞同：0
> 
> 时间：2012-05-19T19:47:10.783
> 
> 标签：c#, linq-to-sql

首先，我知道这是一个常见问题。但是我不能使用其他解决方案，因为我正在比较不能为可空类型的类型，例如我的三元运算符中的 DataRow 类型。我也无法在我的网格中格式化货币，因为我正在旋转我的数据并且必须将自动生成列设置为 true。我也无法在其他地方格式化货币，因为我想要一个电话来获取原始数据和格式化发生在应该发生的地方。我需要使用 LinqSql，因为这是我在将数据绑定到 Telerik RadGrid 之前准备数据的方式

```
var drResults = from t1 in DatesTable.AsEnumerable()
                join t2 in dtResult.AsEnumerable() on t1["MONTH_YEAR"] equals t2["MONTH_YEAR"] into t1_t2
                from t2 in t1_t2.DefaultIfEmpty()
                select new
                {
                    MONTH_YEAR = t1.Field<string>("MONTH_YEAR"),
                    Appraisal_Fees = t2 != null ? String.Format("{0:C}", t2.Field<decimal>("AppraisalFees")) : 0): 0
                }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:50:54.470

尝试将参数内的三元表达式移动到`String.Format`.

```
String.Format("{0:C}", (t2 != null ? t2.Field<decimal>("AppraisalFees") : 0M)) 
```

您还可以通过将其写成两行来使其更易于阅读：

```
decimal appraisalFees = (t2 != null ? t2.Field<decimal>("AppraisalFees") : 0M);
Appraisal_Fees = String.Format("{0:C}", appraisalFees); 
```

# c++ - C++ 对 MBCS 使用 std::string 函数，对 UTF-16 使用 std::wstring 函数

> ID：10668382
> 
> 赞同：0
> 
> 时间：2012-05-19T19:47:39.437
> 
> 标签：c++, windows, string, utf-16, mbcs

有没有人处理过为 MBCS 使用 std::string 函数？例如在 CI 中可以这样做：

```
p = _mbsrchr(path, '\\'); 
```

但在 C++ 中，我正在这样做：

```
found = path.find_last_of('\\'); 
```

如果尾随字节是斜线，那么 find_last_of 会在尾随字节处停止吗？对于 std::wstring 也是同样的问题。

如果我需要用另一个字符替换所有一个字符，请用反斜杠说所有正斜杠，这样做的正确方法是什么？我是否必须检查每个字符的前导代理字节然后跳过线索？现在我正在为每个 wchar 执行此操作：

```
if( *i == L'/' )
*i = L'\\'; 
```

谢谢

编辑：正如大卫正确指出的那样，在使用多字节代码页时需要处理更多。[微软表示使用 _mbclen](http://msdn.microsoft.com/en-us/library/xkh2z6hz)处理字节索引和 MBCS。在使用 ANSI 代码页时，我似乎无法可靠地使用 find_last_of。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:52:09.687

你不需要对代理对做任何特别的事情。作为代理对的一半的单个 16 位字符单元也不能是非代理字符单元。

所以，

```
if( *i == L'/' )
    *i = L'\\'; 
```

是完全正确的。

同样，您可以使用`find_last_of`with `wstring`。

多字节 ANSI 代码页更复杂。您确实需要处理前导和尾随字节问题。如果您确实必须处理多字节 ANSI 日期，我的建议是规范化为更合理的编码。

# ruby-on-rails - Rails：CSS：需要通过 application.css.scss 与控制器页面视图关联的 css/scss

> ID：10668383
> 
> 赞同：0
> 
> 时间：2012-05-19T19:47:43.060
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3

因此，我从原始 application.css.scss 中删除了 /= requiretree 行，但现在我必须在每个页面中为特定的 .css 添加 stylesheet_link_tag，因为它不需要每个 css 文件（如预期的那样）

我的问题：我如何在每个特定的控制器视图中只需要与该控制器关联的样式表导轨？是我在 application.css.scss 中放入的某行吗？

同样，我不希望在每个页面中都加载每个样式表，这就是我删除 requiretree 的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:08:24.153

stylesheet_link_tag params[:controller] 在布局和生产配置资产管道中分别编译所有文件

# c++ - Qml C++ 查找孩子

> ID：10668385
> 
> 赞同：6
> 
> 时间：2012-05-19T19:48:26.933
> 
> 标签：c++, qt, qml, signals-slots

我有一个带有 MainPage.qml 的 main.qml 通过以下方式插入：

```
initialPage: MainPage {tools: toolBarLayout} 
```

因为我选择为 Symbian 制作它。当我尝试：

```
QObject *mainPage = rootObject->findChild<QObject*>("MainPage");
if (mainPage)
    QDeclarativeProperty(mainPage, "toets").write(3); 
```

消息没有通过，但没有错误，我也尝试使用“if（mainPage）”将信号连接到 MainPage 上的 SLOT，但它也没有响应。我已经设法通过 main 获得信号，但是当我尝试时：

```
function changeNum(num)
{
     MainPage.changeNum(num)
} 
```

该函数永远不会执行，因为我根本没有从 console.log 收到消息，这与我在 main 上的函数运行时所做的不同。我也知道其他方法不起作用，因为它们也没有记录消息或执行其余的功能。

我认为问题可能在于 MainPage 没有被创建为具有 id 的元素。你知道这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T23:09:27.350

`findChild`不寻找`id`但`objectName`您可以简单地添加到`MainPage`对象中的属性（请参阅[文档](http://qt-project.org/doc/qt-4.8/qml-qtobject.html)）：

```
initialPage: MainPage {
    objectName: "MainPage"      
    tools: toolBarLayout
} 
```

您还可以通过 的`initialPage`属性访问该对象，`rootObject`而无需添加`objectName`属性：

```
QObject * mainPage = QDeclarativeProperty(rootObject, "initialPage").object();
if (mainPage)
     QDeclarativeProperty(mainPage, "toets").write(3); 
```

# ios - Xcode 不会让我创建快照，因为我不存在

> ID：10668386
> 
> 赞同：2
> 
> 时间：2012-05-19T19:48:28.193
> 
> 标签：ios, xcode, git, version-control

只是试图创建我的一个项目的快照。它不起作用，Xcode 确实向我抛出了以下错误：“无法创建快照。致命：你不存在。走开！”

源代码管理提交也不起作用。好的，显然我的本地存储库有问题。不过，我不知道那可能是什么。我已经有一段时间没有提交了，但据我所知，除了 Xcode 本身的一些更新之外，项目文件夹没有发生任何重大变化。

那么，我能做些什么呢？是否可以停用该项目的源代码管理，然后使用项目当前状态的源代码管理重新开始？我不再需要以前的版本，所以不需要照顾。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:30:55.033

查看`git`源代码，仅在以下情况下才会生成此错误消息

```
pw = getpwuid(getuid()); 
```

失败。

这表明系统无法找到您的用户帐户`/etc/passwd`或同等帐户的条目。

如果您的帐户在您登录时被删除（通过`deluser`、`userdel`或其他方式），或者您没有读取权限`/etc/passwd`（后者永远不会发生），则可能会发生这种情况。

在终端提示符下尝试以下命令：

```
whoami

id

ls -l /etc/passwd

grep "^${USER}:" /etc/passwd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:31:39.453

我在 git 和运行时遇到了这个问题

```
dscacheutil -flushcache 
```

在终端修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:28:16.563

根据`git`文档，这是您的特定错误的含义：

```
 You don't exist. Go away!
       The passwd(5) gecos field couldn't be read 
```

这通常意味着系统不知道您是谁（如果您在某人仍在登录的情况下删除某人的用户帐户，您将在 Linux 系统上看到此类错误）。其他一切正常吗？也就是说，您可以退出并重新登录而不会出现问题吗？其他终端命令是否正常运行？`id`命令呢？

您可以在命令行上与您的存储库进行交互吗？如果你 cd 进入目录并尝试类似的东西会发生什么`git status`？

WendiKidd 的从头开始的解决方案可能是最简单的事情，假设它有效，但您将丢失与您的项目相关的任何更改历史记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T20:23:30.210

我建议完全创建一个新项目，将您的代码等文件从旧项目中复制出来，然后简单地迁移到一个新项目中（然后您可以将其重新提交到另一个源代码控制目录）。这似乎是最简单的解决方案；这是一个非常奇怪的错误，我过去遇到过一些无法修复的问题，或者比花费 10-15 分钟来建立一个新项目需要更多的努力来修复。

所以这就是我推荐的——希望这能解决你的问题，无论 xcode 生气的是在某个隐藏文件或 .xcodeproj 本身中，而不是在你需要迁移的文件中。

# c# - 从流中压缩图像

> ID：10668388
> 
> 赞同：2
> 
> 时间：2012-05-19T19:48:49.717
> 
> 标签：c#, asp.net-mvc-3, stream, compression

我将图像存储在数据库中，在存储它们之前，我正在调整它们的大小。

但是，调整大小不会压缩图像。流是相同的流。我也希望能够压缩图像。

如何压缩以流形式存储在数据库中并返回到请求的图像，如下所示？

```
 public ActionResult ViewImage(int id, string imageType ="image")
    {
        ContestImage contestImage = GetContestImage(id);

        byte[] fileContent;
        string mimeType;
        string fileName;

        if (imageType == "thumb")
        {
            fileContent = contestImage.ThumbNail.Image;
            mimeType = contestImage.ThumbNail.ImageMimeType;
            fileName = contestImage.ThumbNail.ImageFileName;
        }
        else if (imageType == "image")
        {
            fileContent = contestImage.Image.Image;
            mimeType = contestImage.Image.ImageMimeType;
            fileName = contestImage.Image.ImageFileName;
        }

        return File(fileContent, mimeType, fileName);
    }

public class UserImage
{
    public virtual int Id { set; get; }
    public virtual byte[] Image { set; get; }
    public virtual string ImageMimeType { set; get; }
    public virtual string ImageFileName { set; get; }
} 
```

ContestImage 有 UserImage 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:49:41.497

在从数据库中存储和检索图像时，您是否尝试过使用[GZipStream ？](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:49:54.123

我想到了两种主要方法：

*   将数据加载为图像并以压缩文件格式（例如 png 或 jpeg）将其序列化（到内存流）

*   通过压缩流（例如 DeflateStream）将数据序列化（到内存流）。

Once you have the data in a MemoryStream, you can use MemoryStream.ToArray() to convert it back to a straight byte[] buffer to pass to your database.

# android - 叠加层未显示在 android 地图中

> ID：10668389
> 
> 赞同：1
> 
> 时间：2012-05-19T19:48:59.350
> 
> 标签：android, map, overlay, point, geo

所以我只是想在 android 中创建一个通用的 mapView 并在其中放置一些地理点。我已按照 android 开发者网站上的说明进行操作，但没有成功……有人可以帮忙吗？这是我的代码。

```
public class HelloItemizedOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext;

    public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
        // defines the bounds for the overlayItems
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        // returns the correct ArrayList position from int i
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        // returns number of items in ArrayList
        return mOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }

} 
```

//这是我的主要课程

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maptastic);
        ((TextView)((FrameLayout)((LinearLayout)((ViewGroup) getWindow().getDecorView()).getChildAt(0)).getChildAt(0)).getChildAt(0)).setGravity(Gravity.CENTER);
        setTitle("Field Trip");

        Drawable drawable = this.getResources().getDrawable(R.drawable.supaaaa);
        HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
        //initControls();

        MapView mapview = (MapView) findViewById(R.id.mapView);

        mapview.setBuiltInZoomControls(true);

        mcontroller = mapview.getController();
        // Plot all geo points
        for (Entry<Integer, FieldTripStop> cur : Statics.fieldTripStops.entrySet())
        {
            // get the FieldTripStop object from the current hash table entry
            Statics.currentFTStop = cur.getValue();
            // concatenate numbers before (all) and after (6) the decimal, since
            // geopoints only accept 6 numbers past the decimal.
            theLat = Statics.currentFTStop.latitude;
            theLong = Statics.currentFTStop.longitude;

            /*
             * String manipulation method
             * 
             * theLat = theLat.replace(".","");
             * theLat = theLat.substring(0, 8);
             * theLong = theLong.replace(".","");
             * theLong = theLong.substring(0, 8);
             * point = new GeoPoint((int)(Integer.valueOf(theLat)), (int)(Integer.valueOf(theLong))); 
             */

            theDLat = Double.parseDouble(theLat);
            theDLong = Double.parseDouble(theLong);

            //olay = new OverlayItem(point, "herp", "derp");
            //olayitems.add(olay);
            List<Overlay> mapOverlays = mapview.getOverlays();

            point = new GeoPoint((int)(theDLat*1E6), (int)(theDLong*1E6));
            OverlayItem overlayitem = new OverlayItem(point, "holda, Mundo!", "I'm in Mexico City~!");

            itemizedoverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedoverlay);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:58:20.203

~~您需要 a）只使用一个`HelloItemizedOverlay`（而不是每个点一个）和 b）在添加标记之前将此覆盖添加到地图*（*`populate`在您当前的代码中，覆盖在调用时尚未与地图关联，所以地图不会收到任何通知，也不会自行刷新）。~~

需要检查的一些事项：

*   您是否为 MapView 指定了您的 api 密钥？*

*) 如何指定您的 api 密钥（在您的活动的布局资源中）：

```
<com.google.android.maps.MapView android:id="@+id/map"
    ...
    android:apiKey="your-api-key-here"/>

```

# ios - 在 NSArray 中的 NSDictionary 中对 NSDates 进行排序？

> ID：10668392
> 
> 赞同：1
> 
> 时间：2012-05-19T19:49:44.077
> 
> 标签：ios, sorting, nsdate, nsdictionary

目前在我的应用程序中，我有一个从 NSUserDefaults 加载的 NSArray。NSArray 中的每个对象都是一个 NSDictionary，它有大约 5 个不同的键。我根据其中的 NSDates重新排序**NSDictionarys 。**我不想单独对 NSDates 进行排序。

我试图用这段代码做到这一点：

```
NSComparator sortByDate = ^(id dict1, id dict2) {
        NSDate* n1 = [dict1 objectForKey:@"Date"];
        NSDate* n2 = [dict2 objectForKey:@"Date"];
        return (NSComparisonResult)[n1 compare:n2];
    };
    [self.cellArray sortUsingComparator:sortByDate]; 
```

尽管即使代码被执行，也没有任何反应。我对如何根据其中的内容重新排序 NSDictionarys 感到困惑。

任何人都可以对此提供任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:00:14.480

您可以尝试对其进行内联排序，但我怀疑这会产生任何重大影响。但我可以说我从不抽象出我的积木。我肯定也会尝试 NSLogging 以确保您获得有效的 NSDates。

```
 [cells sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        NSDate *n1 = [obj1 objectForKey:@"Date"];
        NSDate *n2 = [obj2 objectForKey:@"Date"];

        if (n1 > n2) {
            return NSOrderedAscending;
        } else (n1 < n2) {
            return NSOrderedDescending;
        } else {
            return NSOrderedSame;
        }

    }]; 
```

# sql - sql：使用TSQL导出数据库

> ID：10668393
> 
> 赞同：0
> 
> 时间：2012-05-19T19:49:44.350
> 
> 标签：sql, sql-server, sql-server-2008

我有到数据库 DB1 的数据库连接。我唯一能做的 - 执行任何 t-sql 语句，包括使用存储过程。我想将特定表（甚至特定表的特定行）导出到我的本地数据库。如您所见，数据库位于不同的服务器上，这意味着无法直接连接。因此问题：是否可以编写返回另一个查询以在本地服务器上执行并获取数据的查询？另请注意，该表包含 BLOB。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:52:44.007

如果您有 Visual Studio，则可以使用其中的数据库工具在两台服务器之间移动数据，只要您可以从工作站连接到这两台服务器。

需要 Ultimate 或 Premium：http: [//msdn.microsoft.com/en-us/library/dd193261.aspx](http://msdn.microsoft.com/en-us/library/dd193261.aspx)

RedGate 也有一些有用的工具： [http ://www.red-gate.com/products/sql-development/sql-compare/features](http://www.red-gate.com/products/sql-development/sql-compare/features)

也许您应该改为在[https://dba.stackexchange.com/上询问。](https://dba.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:21:34.323

如果您有 SQL Server Management Studio，则可以使用本地数据库上的数据导入功能来获取数据。只要您对尝试复制的表具有读取/选择权限，它就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:39:15.603

如果您可以登录到远程数据库（您只能发出 t-sql），您可以在本地服务器上创建链接服务器到远程，然后在查询中直接使用它，例如：

```
select * from [LinkedServerName].[DatabaseName].[SchemaName].[TableName] 
```

# emacs - ESS 和 EC2 错误“R 进程已死亡”

> ID：10668394
> 
> 赞同：3
> 
> 时间：2012-05-19T19:49:47.563
> 
> 标签：emacs, amazon-ec2, ess

我正在尝试将 ESS 与 EC2 一起使用。我在 EC2 控制台中启动一个实例，然后通过 ssh 进入该实例。

```
M-x shell
cd ~/.ec2
ssh -i zmjones.pem root@ec2-23-22-122-35.compute-1.amazonaws.com 
```

然后我开始 ESS

```
M-x ess-remote 
```

我选择的地方`r`。但是，当我尝试与进程交互时，我收到错误“R 进程已死亡”。但是，我可以通过将脚本中的命令粘贴到 shell 中来手动将命令输入到 shell 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:56:26.100

进程未正确与缓冲区关联。尝试`C-c C-z`或`C-c C-s` 将当前缓冲区与进程关联。

如果您仍然遇到此问题，最好在 github 或 ess-help 上报告 ess 错误跟踪器。

# javascript - 在“结束”时播放数组中的下一个视频

> ID：10668399
> 
> 赞同：0
> 
> 时间：2012-05-19T19:50:25.913
> 
> 标签：javascript, jquery, arrays, ipad, html

我有一系列视频，当一个视频结束时，数组中的下一个应该播放。
我找到了这个脚本：

```
function myNewSrc() {
    var myVideo = document.getElementsByTagName("video")[0];
    myVideo.src =
        "http://cheerioscoupons.info/wp-content/uploads/_Cheerios-Coupons-1-300x283.jpg";
    myVideo.load();
    myVideo.play();
}
function myAddListener(){
    var myVideo = document.getElementsByTagName("video")[0];
    myVideo.addEventListener('ended',myNewSrc,false);
} 
```

但我无法在我当前的脚本中实现它，也就是说，

```
var numb = $(this).index(),
    videos = [
        "images/talking1.m4v",
        "images/talking2.m4v",
        "images/talking1.m4v",
        "images/talking2.m4v",
        "images/talking1.m4v",
        "images/talking2.m4v"
    ],
    myVideo = document.getElementById("myVid");
    myVideo.src = videos[numb];
    myVideo.load();
    setTimeout(function(){
        myVideo.play();
    }, 200); 
```

所以，两个问题：

1.  他们在干涉吗？第一个根本不会改变视频。
2.  如何将这些组合起来，以便下一个调用的视频是数组中的下一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T20:03:29.590

**1.**
`document.getElementsByTagName`将返回一个元素数组，而不是一个。所以

```
var myVideo = document.getElementsByTagName("video");
myVideo.addEventListener('ended',myNewSrc,false);    //wrong

var myVideo = document.getElementsByTagName("video");
myVideo.load();   //wrong
myVideo.play();   //wrong 
```

它应该是：

```
myVideo[0].load()   //if there is only one

for(var i=0;i<myVideo.length;i++){
    myVideo[i].load();    //if there is more
} 
```

**2.**
之后播放另一个视频`ended`，

```
var videos = [
    "images/talking1.m4v",
    "images/talking2.m4v",
];
function playArray(index,ele,array,listener){
    ele.removeEventListener(listener||0);
    ele.src = array[index];
    ele.load();
    ele.play();
    index++;
    if(index>=array.length){
        index=0;
    }
    listener = ele.addEventListener('ended',function(){
        playArray(index,ele,array,listener);
    },false);
}
playArray(0,document.getElementById("myVid"),videos); 
```

**现场演示： http:** [//jsfiddle.net/DerekL/qeLcD/](http://jsfiddle.net/DerekL/qeLcD/)（替换为带有文本的数组而不是视频）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T21:43:32.593

我使用多个文件输入修改了视频输入，以便用户可以选择文件。

[https://jsfiddle.net/geqd31pu/](https://jsfiddle.net/geqd31pu/)

```
<input id="file" type="file" multiple>    
<button onclick="play()">play</button>    
<video id="video" src="" autoplay controls></video>    
<script>
let index = 0
video = document.getElementsByTagName('video')[0]
play = () => {
  const files = document.getElementById('file').files
  const file = files[index++ % files.length]
  const url = window.URL.createObjectURL(file)
  video.src = url
  video.load()
}
video.addEventListener('ended', play, false)
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-03-26T21:25:20.863

play let index = 0 video = document.getElementsByTagName('video')[0] play = () => { const files = document.getElementById('file').files const file = files[index++ % files.length] const url = window.URL.createObjectURL(file) video.src = url video.load() } video.addEventListener('end', play, false)

# algorithm - 移动受限时查找网格中两点之间的距离

> ID：10668405
> 
> 赞同：1
> 
> 时间：2012-05-19T19:50:54.130
> 
> 标签：algorithm, grid, points

网格中有多个点。

假设 (x,y) 可以在一个单位时间内从 (x-1,y+1) 到达。那么找到点（x1，y1）到（x2，y2）之间距离的一般公式是什么。

比如说（0,0）到（-2，-1），即坐标也可以是负数。

我想不出通用公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T22:09:04.507

如果我正确理解了这个问题，并且对角线运动与“曼哈顿”运动的成本相同，那么在大多数情况下它比曼哈顿距离便宜——只有 x 和 y 距离的最大值是相关的：

最大值（绝对值（x1 - x2），绝对值（y1 - y2））

基本上，您以每单位 1 的成本沿对角线移动，直到达到 x2 或 y2，然后沿着网格移动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T19:57:15.320

如果 (x,y) 可以从 (x-1, y+1) 到达。那么从 (x1,y1) 可到达的所有点都是 (x1+k, y1-k)，其中 k 大于 0。

# ios - 独立线程上独立运行的文本行

> ID：10668407
> 
> 赞同：0
> 
> 时间：2012-05-19T19:50:57.840
> 
> 标签：ios, iphone, uiscrollview, line

**更新**
我想制作运行文本行，哪种方式更好？

```
 -(void)viewDidLoad
    {
         CGSize mySize = CGSizeZero;
            mySize = [kGrindFMRunningText sizeWithFont:[UIFont fontWithName:@"Verdana" size:16]  constrainedToSize:CGSizeMake(4000, 30) lineBreakMode:UILineBreakModeWordWrap];

        runningText = [[UIScrollView alloc] initWithFrame:CGRectMake(60, -5, 260, 50)];
            grind_fm_text = [[UILabel alloc] initWithFrame:CGRectMake(0, 15, mySize.width, 30)];
            [grind_fm_text setUserInteractionEnabled:NO];
            [grind_fm_text setBackgroundColor:[UIColor clearColor]];
            [grind_fm_text setTextColor:[UIColor whiteColor]];
            [grind_fm_text setFont:[UIFont fontWithName:@"Verdana" size:16]];
            [grind_fm_text setText:kGrindFMRunningText];
            [runningText addSubview:grind_fm_text];
            [grind_fm_text release];
            [self animate];
    }

       - (void)animate
{
    [UIView animateWithDuration:10.0 delay:0\. options:UIViewAnimationOptionCurveLinear|UIViewAnimationOptionBeginFromCurrentState animations:^{
        grind_fm_text.frame = CGRectMake(-grind_fm_text.frame.size.width, 15, grind_fm_text.frame.size.width, grind_fm_text.frame.size.height);
        // Do your animation in one direction until text is gone
    } completion:^(BOOL finished){
        grind_fm_text.frame = CGRectMake(260, 15, grind_fm_text.frame.size.width, grind_fm_text.frame.size.height); 
        // Move scroll position back to original position
        [self animate]; // Then call animate again to repeat
    }];
}

-(void)songChange
{
    CGSize mySize = CGSizeZero;
    mySize = [result sizeWithFont:[UIFont fontWithName:@"Verdana" size:16]  constrainedToSize:CGSizeMake(4000, 30) lineBreakMode:UILineBreakModeWordWrap];
    grind_fm_text.frame = CGRectMake(grind_fm_text.frame.origin.x, 15, mySize.width, 30);
    grind_fm_text.text = result;;
    [self animate];
}

- (void)startStopStream {
        [streamer stop];
        //[bufferIndicator stopAnimating];
        [CATransaction begin];
        [self.view.layer removeAllAnimations];
        [CATransaction commit];
        grind_fm_text.text = kGrindFMRunningText;
        CGSize mySize = CGSizeZero;
        mySize = [kGrindFMRunningText sizeWithFont:[UIFont fontWithName:@"Verdana" size:16]  constrainedToSize:CGSizeMake(4000, 30) lineBreakMode:UILineBreakModeWordWrap];
        grind_fm_text.frame = CGRectMake(grind_fm_text.frame.origin.x, 15, mySize.width, 30);
        [self animate];
} 
```

`[CATransaction begin]; [myView.layer removeAllAnimations]; [CATransaction commit];`对我不起作用。`UIViewAnimationOptionCurveLinear|UIViewAnimationOptionBeginFromCurrentState`奇怪的工作：首先，它没有像我看到的那样做完成块，或者它可能会做，但是动画不会重新开始。如果我单击按钮没有任何反应，但是当我第二次单击它时，动画从另一个方向开始并减慢直到冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:32:47.610

您应该能够使用嵌套的 UIView 动画块更简单地做到这一点。在动画块中让它向一个方向滚动，在完成块中让它向另一个方向滚动，在该动画的完成块中让它再次调用你的动画函数，这样它就会重复。

像这样的东西：

```
- (void)animate
{
    [UIView animateWithDuration:10.0 delay:0\. options:UIViewAnimationOptionCurveLinear animations:^{
        // Do your animation in one direction
    } completion:^(BOOL finished){
        [UIView animateWithDuration:10.0 delay:0\. options:UIViewAnimationOptionCurveLinear animations:^{
            // Do your animation in the other direction
        } completion:^(BOOL finished){
            [self animate];
        }];
    }];
} 
```

或者，如果您希望它一直滚动，然后再做一次，例如：

```
- (void)animate
{
    [UIView animateWithDuration:10.0 delay:0\. options:UIViewAnimationOptionCurveLinear animations:^{
        // Do your animation in one direction until text is gone
    } completion:^(BOOL finished){
        // Move scroll position back to original position
        [self animate]; // Then call animate again to repeat
    }];
} 
```

* * *

听起来默认情况下，动画使用`UIViewAnimationOptionCurveEaseInOut`动画选项。你想要这个`UIViewAnimationOptionCurveLinear`选项。我已经更新了上面的代码以包含它。

* * *

根据对这个问题的回答：[取消 UIView 动画？](https://stackoverflow.com/questions/554997/cancel-a-uiview-animation)您应该能够通过调用`[myView.layer removeAllAnimations];`myView 是动画滚动视图来取消动画。确保在顶部导入`<QuartzCore/QuartzCore.h>`以访问 CALayer 方法。

编辑：您可能需要这样调用它以确保它立即运行，而不是在下一次 runloop 迭代之后运行：

```
[CATransaction begin];
[myView.layer removeAllAnimations];
[CATransaction commit]; 
```

或者，如果这仍然不起作用，那么可能只需更改 UIView 方法调用中的选项参数即可`UIViewAnimationOptionCurveLinear|UIViewAnimationOptionBeginFromCurrentState`，无需调用 removeAllAnimations。事实上，先尝试一下。

# php - PHP自动增加文件名

> ID：10668408
> 
> 赞同：3
> 
> 时间：2012-05-19T19:51:07.317
> 
> 标签：php, file-upload

我有一个文件上传器，我希望文件名自动递增编号。我觉得不需要使用数据库来执行此操作，并且我想保持代码相对干净，我在 PHP 中的文件上传和管理方面还很陌生，所以我不确定该怎么做。谁能指导我正确的道路？

这是我当前的代码，它只使用了一堆种子的 md5。

```
<?php
if(isset($_FILES['imagedata']['tmp_name']))
{
// Directory related to the location of your gyazo script
    $newName = 'images/' . substr(md5(rand() . time()), 0, 20) . '.png';
    $tf = fopen($newName, 'w');
    fclose($tf);
    move_uploaded_file($_FILES['imagedata']['tmp_name'], $newName);
// Website
    echo 'http://davidknag.com/' . $newName;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:54:35.353

```
<?php
if(isset($_FILES['imagedata']['tmp_name'])) {
    // Directory related to the location of your gyazo script
    $fileCount = count (glob ('images/*.png'));
    $newName = 'images/' . ( $fileCount + 1) . '.png';
    $tf = fopen($newName, 'w');
    fclose($tf);
    move_uploaded_file($_FILES['imagedata']['tmp_name'], $newName);
    // Website
    echo 'http://davidknag.com/' . $newName;
} 
```

它只计算目录中的所有 .png 文件，将该数字加 1 并将其用作文件名。

请注意，如果您要存储大量文件（例如 10.000 秒），则使用 Joseph Lusts 的方法会更快，否则这将正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T19:53:07.057

您可以在给定文件夹中仅包含一个基本文本文件。把号码存在那里。读出它并根据需要增加它。

最简单的方法是创建一个像 getNextNumber() 这样的函数来完成上述操作，然后您可以根据需要使用它。您也可以在 $_SERVER[] 变量中执行此操作，但需要在服务器重新启动时从文件中重新加载。

```
<?PHP
// a basic example
function getNextNumber() {
    $count = (int)file_get_contents('yourFile.txt');
    $count+=1;
    file_put_contents('yourFile.txt',$count);
    return $count;
}

?> 
```

请注意，如果您经常使用它，您将需要一个更高级的序列生成器，因为这将在每次调用时执行 2 个文件 IO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:21:21.247

你可以试试下面的代码。它在 outdir/ 中创建一个具有 .png 扩展名和唯一名称的文件

```
$filename = uniqFile('outdir', '.png');
move_uploaded_file($_FILES['imagedata']['tmp_name'], $filename);

function uniqFile($dir, $ext)
{
    if (substr($dir, -1, 1) != '/')
    {
        $dir .= '/';
    }

    for ($i=1; $i<999999; $i++)
    {
        if (!is_file($dir . $i . $ext))
        {
            return $i . $ext;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T02:19:59.653

游戏有点晚了，但这对函数起到了作用，并遵循熟悉的文件名格式，后跟“（n）”，然后是文件扩展名：

incrementFileName() 返回更新后的文件名，输入文件名和目标目录加 1。splitLast() 是对 explode 的修改，仅在某些子字符串的最后一次出现时拆分。

```
function incrementFileName($name,$path){
    if (!array_search($name,scandir($path))) {
        return $name;
    } else {
        $ext=splitLast($name,".")[1];
        $baseFileName=splitLast(splitLast($name,".")[0],"(")[0];
        $num=intval(splitLast(splitLast($name,"(")[1],")")[0])+1;
        return incrementFileName($baseFileName."(".$num.").".$ext,$path);
    }
}

function splitLast($string,$delim) {
    $parts = explode($delim, $string);
    if (!$parts || count($parts) === 1) {
        $before=$string;
        $after="";
    } else {
        $after = array_pop($parts);
        $before=implode($delim, $parts);
    }
    return array($before,$after);
} 
```

处理上传时，使用它设置您的文件名：

```
$fileName = incrementFileName($_FILES['file']['name'], $path); 
```

这将返回 someFileName(1).jpg 或 someFileName(2).jpg 等。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-30T18:03:15.203

```
function enc($length = "string") {
if(!is_numeric($length) || $length > 255 || $length < 1){
$length = rand("3","6");
}

  //  $randomID = substr(uniqid(sha1(crypt(md5("".time("ysia", true)."".rand())))), 0, $length);
    $randomID = genUnique($length);
    $count = 0;
while(glob("$randomID.*") || fetch("select * from `short` where `short` = '$randomID'") || fetch("select * from `images` where `name` = '$randomID'") || glob("img/$randomID.*") || is_numeric($randomID)){
        if($count > 20){
        $length++;
        }
    $randomID = genUnique($length);
    $count++;
    }
    return $randomID;
} 
```

这段代码很旧（甚至不使用 mysqli），但我想我会先包含它

```
<?php
include_once "functions.php";
if(!isset($_REQUEST['api'])){
notfound("");
}
$con = connect();
$key = $_REQUEST['api'];
$ver = $_REQUEST['version'];
if($ver != "10-26-2016" || $key == "zoidberg")
{
  die("Please upgrade your in4.us.exe by logging in and clicking download.");
}
if($key == "nokey"){
  die("You need to keep the exe with the ini file to pair your api key. Copy ini file to same directory or redownload.");
}
$key = mysql_real_escape_string($key);
$findkey = fetch(" SELECT * from `users` where `key` = '$key' ");
if(!is_array($findkey)){
die("No user with that API Key found. Configure the INI File using your api key on in4.us");
}
$user = $findkey['username'];
    if(isset($_FILES['imagedata']['tmp_name'])){
        $newName =  enc();
    $tf = fopen("img/".$newName.".png", 'w');
    fclose($tf);
    move_uploaded_file($_FILES['imagedata']['tmp_name'], "img/".$newName.".png");
        $domain = $_SERVER['HTTP_HOST'];
    date_default_timezone_set('America/New_York');
    $mysqldate = date("Y-m-d H:i:s");
    $qry = mysql_query("INSERT INTO `images` (`name`, `added`, `dateadded`) VALUES ('$newName', '$user', '$mysqldate');");
    if(!qry){
          die('Invalid query: ' . mysql_error());
    }
    echo "http://$domain/$newName.png";

    disconnect($con);
}else{
notfound("");
}
?> 
```

# android - 尝试将设备连接到 Eclipse 时遇到的问题

> ID：10668411
> 
> 赞同：1
> 
> 时间：2012-05-19T19:51:52.017
> 
> 标签：android, eclipse, android-emulator

我目前在尝试让我的 android 设备连接到 Eclipse 以便将文件推送到文件夹以及将 apk 文件推送到我的设备时遇到问题。我最近刚刚下载了三星凯斯并尝试了直到现在我仍然无法在设备视图下的 ddms 页面中看到我的设备。我现在只能看到我的模拟器。有什么建议么？我使用的设备是三星 Galaxy s2 i1900G。希望你们能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T11:20:19.893

当我尝试使用 USB 调试连接连接新手机时，我面临的主要问题是： * USB 调试未激活。* 除 Nexus 手机外，所有手机的操作系统均为经过修改的 Android。三星和许多其他品牌修改 android 以获取自己的过时软件和自己的系统更新。

我有一个索尼 xperia z1 直到我从 android 4 转到 android 5.1.1 才连接 USB 调试

有一个问题有人遇到类似问题并解决了：[https ://stackoverflow.com/a/38171690/6296561](https://stackoverflow.com/a/38171690/6296561)

# ruby - 如何在 Ruby 中找到字符串中字符的索引？

> ID：10668415
> 
> 赞同：71
> 
> 时间：2012-05-19T19:52:18.053
> 
> 标签：ruby, string, indexing

例如，`str = 'abcdefg'`。`c`如果在这个字符串中使用 Ruby，我如何找到索引？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-19T20:02:37.427

```
index(substring [, offset]) → fixnum or nil
index(regexp [, offset]) → fixnum or nil 
```

返回给定子字符串或模式 (regexp) 在 str 中第一次出现的索引。如果没有找到则返回 nil。如果存在第二个参数，它指定字符串中开始搜索的位置。

```
"hello".index('e')             #=> 1
"hello".index('lo')            #=> 3
"hello".index('a')             #=> nil
"hello".index(?e)              #=> 1
"hello".index(/[aeiou]/, -3)   #=> 4 
```

查看[ruby​​ 文档](http://www.ruby-doc.org/core-1.9.3/String.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-19T19:56:42.887

你可以用这个

```
"abcdefg".index('c')   #=> 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-19T20:50:18.097

```
str="abcdef"

str.index('c') #=> 2 #String matching approach
str=~/c/ #=> 2 #Regexp approach 
$~ #=> #<MatchData "c"> 
```

希望能帮助到你。:)

# facebook-graph-api - Facebook Graph 确定用户是否喜欢对象

> ID：10668416
> 
> 赞同：-1
> 
> 时间：2012-05-19T19:52:20.327
> 
> 标签：facebook-graph-api

通过查询 fbid/likes，我可以获得喜欢某个对象的所有用户的 fbid 和名称。然而，当我自己喜欢该对象时，我代表一个页面，因此我的“喜欢”不是作为我呈现，而是作为页面呈现。我如何确定用户是否喜欢某个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:54:38.287

经过更多研究，我发现我根本做不到。最好的方法是在 Graph 中查询喜欢该对象的用户，然后将其与用户 id 进行比较，看看用户 id 是否存在于结果中

# ruby-on-rails - Travis-CI 与 Debian 的测试速度

> ID：10668418
> 
> 赞同：0
> 
> 时间：2012-05-19T19:52:43.330
> 
> 标签：ruby-on-rails, performance, testing, solr

将acts_as_solr_reload 的测试套件在Travis-CI 上运行时，测试在3.84 秒上运行，但在专用服务器上我在42 秒上运行！

我希望提高 Ruby/Rails 的测试速度。在这种情况下，外部服务器 - Solr - 也参与了测试。

硬件差异可能不是问题，因为服务器有 Xeon X3430。

```
Loaded suite /home/braulio/.rvm/gems/ruby-1.8.7-p358@global/gems/rake-0.8.7/lib/rake/rake_test_loader
Started
................................................................
Finished in 42.251154 seconds.

64 tests, 250 assertions, 0 failures, 0 errors 
```

在 Travis-CI 上

```
Loaded suite /home/vagrant/.rvm/gems/ruby-1.8.7-p358/gems/rake-0.9.2.2/lib/rake/rake_test_loader
Started
................................................................
Finished in 3.846992 seconds.

64 tests, 250 assertions, 0 failures, 0 errors 
```

[http://travis-ci.org/#!/coletivoEITA/acts_as_solr_reloaded/jobs/1376476/L172](http://travis-ci.org/#!/coletivoEITA/acts_as_solr_reloaded/jobs/1376476/L172)

怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:19:38.083

将源代码放在 tmpfs 上就可以了！

在 tmpfs 上仅使用 sqlite 将时间从 42 秒减少到 35 秒。将 solr 和 sqlite 放在 tmpfs 上将时间减少到 2s。

/dev/shm 可用于非根 tmpfs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:39:46.633

我不知道 Travis-CI，这显然是一个“围栏”问题，但是，你确定测试环境有一个 solr 服务器正在运行并且你能成功使用它吗？

此外，请考虑缩小运行时间的测试范围。以更高的详细程度运行应该可以让您更好地了解时间差异。

# jquery - 将 history.js 与动态（ajax）模式框一起使用

> ID：10668427
> 
> 赞同：3
> 
> 时间：2012-05-19T19:53:39.823
> 
> 标签：jquery, twitter-bootstrap, pushstate, history.js

我有一个模式框（Twitter Bootstrap），我试图在各种操作中控制它：

1.  用户单击链接 > 显示模式框，更改（推送状态）URL。
2.  用户隐藏模式框 > 将 URL 更改为上一页。
3.  用户单击返回按钮 > 隐藏模式框，URL 更改为上一页。
4.  用户单击前进按钮 > 显示模式框，更改（推送状态）URL。

我的主要问题是项目#3 和#4。使用后退/前进浏览器按钮时，模式需要切换（URL 更改）

这是我当前的代码，仅适用于操作 #1 和 #2：

```
$(function(){
$(".thumbnail a").live("click", function(){
    msgurl = $(this).attr("href");
    msgid = $(this).attr("data-id");
    history.pushState(null, null, msgurl);

    $.ajax({
        ....
    });
    $("#newmodal").modal({ dynamic: true });
     return false;
});
$('#newmodal').bind('hidden', function () {
    history.back();
})
}); 
```

有没有办法使用历史库（例如history.js）来实现后退/前进按钮控制？我将如何在我的代码中实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T22:15:24.273

我实际上一直在尝试做一些非常相似的事情……</p>

到目前为止，我在您的所有观点 (1-4) 上都取得了成功，但我仍在研究一种让 HTML4 浏览器显示更清晰链接的方法（使用 history.js 会产生丑陋的[http://domain.org/ page/page#-http://domain.org/modalpage](http://domain.org/page/page#-http://domain.org/modalpage)不可链接）。

这里有一些提示可以让你的工作：

请务必绑定到 onpopstate 事件。通过这种方式，您可以捕获浏览器的前进和后退按钮并确定要执行的操作：

```
window.onpopstate = function(e) {
var State = e.state;
if (!State) { //i.e., we've gone to the history context (no active state)
    $('#modal').modal('hide');
}
else {//Re-open state modal
    var modalURL = State.URL.substring(State.URL.indexOf('?show=')+6);
    openModal(appRoot+modalURL, State);
}
} 
```

onpopstate 函数并不完美，因为您无法访问先前的状态对象（或者至少我找不到方法），因此您可能希望将变量附加到您的 URL。在我的示例中，我的 URL 附加了 '?show=relativeModalLink/'，因此我知道模式是在哪个页面上打开的。通过这种方式，您还可以使用服务器端代码来检测是否传递了显示 URL 变量，然后将用户引导至模式页面或将用户带回主页并打开模式（根据偏好）。

而你检查状态是否为空的原因是因为当你加载一个页面时，浏览器实际上会有一个状态，它只是空的。所以 null 可以看作是没有模态。

当您打开模式时，请执行以下操作：

```
function openModal(modalLink, state) {    
if (state === undefined) {
       var shortLink = modalLink.substring(modalLink.indexOf(appRoot)+appRoot.length);
       var stateLink = document.location.href.indexOf('?show=') === -1 ? document.location.href+'?show='+shortLink : document.location.href;
       history.pushState({'type': 'modal','URL':stateLink},'',stateLink);
    }
} 
```

请注意，我将状态传递给了我的打开模式函数，因为我们不想在用户使用前进按钮并移动到预先存在的模式状态的情况下推送另一个状态。

这有点特定于我的实现，因此您的链接系统可能会有所不同。

还有一个问题：确保将 window.history.back() 函数直接绑定到引导程序的关闭按钮（不要将其放在引导程序的“隐藏”模式函数中）。这样，用户按下回不会在我的代码中将页面向后移动两次（因为在 onpopstate 函数中我调用了 .modal('hide')）。我还没有找到一种方法来检测是否按下了后退按钮，或者是否使用引导程序的“隐藏”功能中的关闭按钮关闭了模式（事实上，我认为这不可能……）。

要实现 history.js，只需在您的页面上包含该脚本。它将在 HTML5 浏览器中被忽略，并且在 HTML4 浏览器中似乎可以正常使用上述代码（减去前面提到的丑陋 URL 问题）。history.js 文档中的实现说明有所不同，但“ajaxifying”页面与模态情况有点不同。

希望这可以帮助！

# php - Backbone.js：奇怪的 .save() 错误回调

> ID：10668429
> 
> 赞同：1
> 
> 时间：2012-05-19T19:53:43.913
> 
> 标签：php, javascript, json, backbone.js

`.save()`我从函数中得到错误响应。服务器端 php 向我返回一个文本并成功将 url 保存到数据库中。当我检查**响应**时，我可以看到 PHP 返回的文本，但是我不明白为什么它会出现错误回调。可能是什么原因？

```
urlToAdd.save({}, {
    success: function () {
        console.log("In here");
    },
    error: function (model, response) {
        console.log(model.toJSON());
        console.log(response);
        console.log("Not in here");
    }
}); 
```

服务器响应：

```
HTTP/1.1 200 OK
Date: Sat, 19 May 2012 21:31:27 GMT
Server: Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6
X-Powered-By: PHP/5.3.6
Content-Length: 96
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html
X-Pad: avoid browser bug 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T18:50:17.697

嗯...即使响应是有效的，内容类型说明了整个故事...预期的内容类型应该是 application/json。如果您的响应不是 JSON，则每次都会调用错误。如果您有办法将响应编码为 JSON，您应该会看到调用成功而不是错误。

# jquery - jquery验证引擎ajax字段验证失败

> ID：10668431
> 
> 赞同：1
> 
> 时间：2012-05-19T19:53:55.947
> 
> 标签：jquery, json, perl, validation, jquery-validation-engine

我完全被这个问题所困扰，我很想就我做错了什么或者我可以做些什么来调试问题提出建议。

我有 jquery 验证引擎验证表单。例如，检查屏幕名称是否存在的代码如下；

```
<input value="[% fields.screenname | html %]" placeholder="Screenname" 
                onclick="$('#screenname').validationEngine('showPrompt', 'For example: JohnDoe_68.', 'load')" 
                class="validate[required,custom[onlyLetterNumber],maxSize[41],ajax[ajaxNameCallPerlScreenname]]" 
                name="screenname" id="screenname" type="text" size= "41" maxlength="24" data-prompt-position="centerRight"/> 
```

对验证引擎的调用是

```
jQuery(document).ready(function(){
jQuery("#register").validationEngine('attach', 'autoHidePrompt', {
    promptPosition : "topRight", 
    scroll: "false",
    ajaxFormValidation : "true",
    onBeforeAjaxFormValidation: "beforeCall",
    onAjaxFormComplete: "ajaxValidationCallback"
    });
}); 
```

在这个阶段，beforeCall 和 ajaxValidationCallback 函数直接来自演示，并且永远不会被调用，所以我不会在此处包含它们。

在服务器端，我有一个简单的脚本检查是否使用该用户名并通过用 perl 编写的脚本返回 json（utf8 编码）。相关代码是；

```
use utf8;
my $output;
eval { $output = JSON::XS->new->utf8->encode( $data ); };
if($@)
{
    use Carp;
    confess($@);
}
warn "Form Output is " . $output;
$self->discard_request_body();
$self->req->content_type('application/json; charset=utf-8');
$self->req->headers_out->set( 'Expires' => 'Thu, 1 Jan 1970 00:00:00 GMT' );

$self->req->headers_out->set( 'Content-Length' => length $output );
$self->req->print($output); 
```

这就是麻烦开始的地方。在 chrome 和 firefox 中，我可以看到验证请求到达服务器，我可以看到正确的响应被发送回浏览器，我可以在浏览器中查看正确的响应（我认为），就像这样

```
[["screenname","false","That user name is already taken. Please try again."]] 
```

但是实际的 onAjaxFormComplete 永远不会被调用。如果我在 beforeCall 和 ajaxValidationCallback 函数中设置断点，它们永远不会被调用。

标头如下；

```
Response Headers
Connection  Keep-Alive
Content-Encoding    gzip
Content-Length  89
Content-Type    application/json; charset=utf-8
Date    Sat, 19 May 2012 19:47:28 GMT
Expires Thu, 1 Jan 1970 00:00:00 GMT
Keep-Alive  timeout=15, max=100
Server  Apache/2.2.16 (Debian)
Vary    User-Agent,Accept-Encoding
X-UA-Compatible chrome=1
X-What-Alias    flooting
Request Headers
Accept  application/json, text/javascript, */*; q=0.01
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Cookie  flooting_session=be8aec0e39f12ee031c9103072b19a66
Host    six.flooting.com
Referer http://six.flooting.com/register
User-Agent  Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:12.0) Gecko/20100101      Firefox/12.0
X-Requested-With    XMLHttpRequest 
```

这就是我目前能告诉你的全部内容。我想我在配置回调函数的方式上遗漏了一些非常简单的东西，但是我已经为此苦苦挣扎了一段时间，而且我离答案还没有更近。

注意 beforeCall 不会在 ajax 请求之前被调用，但是我已经在validationEngine 中的代码的适当部分（应该调用 beforeCall 的地方）设置了断点，并且执行永远不会到达它。甚至没有进入父函数。

有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:13:01.153

我找到了答案，在验证引擎的文档中，它说您必须返回一个用于表单验证的数组数组和一个用于字段验证的数组。当我应该返回一个数组时，我正在返回一个数组数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:53:38.613

我不知道validationEngine，只是尝试一下：而不是将函数名作为字符串（“beforeCall”）尝试传递对函数的引用（beforeCall）

# javascript - 如何在预先存在的折线上放置标记？

> ID：10668433
> 
> 赞同：1
> 
> 时间：2012-05-19T19:54:16.113
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

折线已经画好了地图，但是怎么在上面放标记呢？

当前代码：

```
map = new google.maps.Map(document.getElementById("map-canvas-tour"), mapOptions);

loadShowDates();

var polyFutureOptions = {
    path: pathFutureCoordinates,
    strokeColor: '#0000FF',
    strokeOpacity: 0.8,
    strokeWeight: 2.5
};

var polyPastOptions = {
    path: pathPastCoordinates,
    strokeColor: '#FF0000',
    strokeOpacity: 0.6,
    strokeWeight: 2.5
};

pathPast = new google.maps.Polyline(polyPastOptions);
pathFuture = new google.maps.Polyline(polyFutureOptions);
pathPast.setMap(map);
pathFuture.setMap(map);
infowindow = new google.maps.InfoWindow();
map.fitBounds(bounds); 
```

有两组点：pathFutureCoordinates 和 pathPastCoordinates，它们指的是过去的演出和未来的演出，都在旅游路线（折线）上。每组标记可以是不同的颜色。

请问我会用什么来做到这一点？

还有其他提示吗？自定义标记将是理想的。

有问题的网站页面：http: [//goo.gl/H995E](http://goo.gl/H995E)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:10:45.587

这是一个页面，其中放置了标记以扩展单个折线（单击地图），或者当单击折线中的某个点时，将标记添加到折线中。您可以通过拖动新标记并查看线调整段来检查新标记是否正确放置。

[https://files.nyu.edu/hc742/public/googlemaps/distance2.html](https://files.nyu.edu/hc742/public/googlemaps/distance2.html)

我不确定您是否打算通过单击在行上添加新标记。我将在上面的页面中描述如何通过点击添加标记。拥有一个预先构建的 LatLngs 列表会简单得多（您只需要下面的步骤 3 和 4）。

1.  添加侦听器以检测在线上的点击（线条变粗以帮助点击）
2.  找出点击了线条的哪一段
3.  将标记添加到标记数组中，将其放置在正确的位置（顺序，基于新标记围绕它的标记）
4.  使用新的标记 LatLngs 数组重新绘制线条。

*点击监听器被添加到该行。*

```
 google.maps.event.addListener(line, 'click', function(event) {
      for (var i = 0 ; i < markers.length - 1; i++) {
        if(isPointOnSegment(markers[i].getPosition(),
           markers[i+1].getPosition(),event.latLng)) {
          addMarker(event.latLng, i+1);
          break;
        } 
      }
    });
  } 
```

*因为我们需要知道点击了哪个段，所以调用了一个辅助函数（isPointOnSegment）*

```
 function isPointOnSegment(gpsPoint1, gpsPoint2, gpsPoint ){

    //Provided by Engineer
    // http://stackoverflow.com/questions/10018003/which-segment-of-a-polyline-was-clicked
    // 1st version, ignores perfectly horiz and vert. lines
    var p1 = map.getProjection().fromLatLngToPoint( gpsPoint1 );
    var p2 = map.getProjection().fromLatLngToPoint( gpsPoint2 );
    var p = map.getProjection().fromLatLngToPoint( gpsPoint );

    var t_x = (p.x - p1.x)/(p2.x-p1.x);
    var t_y = (p.y - p1.y)/(p2.y-p1.y);
    return ( eq(t_x,t_y) && t_x >= 0 && t_x <= 1 && t_y >= 0 && t_y <= 1);
  } 
```

*添加标记并更新标记位置数组：*

```
 function addMarker(pos, where) {

    var marker = new google.maps.Marker({
      map: map,
      position: pos,
      draggable: true
    });

    markers.splice(where,0,marker); 
    drawPath();
   } 
```

*最后，重新画线*

```
 function drawPath() {
    countMarkers();
    var coords = [];
    for (var i = 0; i < markers.length; i++) {
      coords.push(markers[i].getPosition());
    }
    line.setPath(coords);
  } 
```

**用于在已有坐标的地方添加标记**

[http://jsfiddle.net/WZqgE/1/](http://jsfiddle.net/WZqgE/1/)

```
 var pathFutureCoordinates = [
    new google.maps.LatLng(40, -80),
    new google.maps.LatLng(38, -85),
    new google.maps.LatLng(39, -92),
    new google.maps.LatLng(42, -98),
    new google.maps.LatLng(37, -102)      
  ];
  for (var i = 0; i < pathFutureCoordinates.length; i++) {
    new google.maps.Marker({
      map: map,
      position: pathFutureCoordinates[i],
      icon: "http://maps.google.com/mapfiles/kml/pal4/icon39.png"
    });
  } 
```

# jquery - 在 firebug 中捕获和调整发布的值

> ID：10668434
> 
> 赞同：1
> 
> 时间：2012-05-19T19:54:17.757
> 
> 标签：jquery, ruby-on-rails, firebug

我正在调试一个表单，其中值没有反映在 rails 应用程序中。firebug 有没有办法捕获帖子或提出请求，进行一些调整，然后“重播”请求？我假设有，但谷歌搜索并没有给我这么多好的结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:08:35.520

您可以尝试[篡改数据](https://addons.mozilla.org/pl/firefox/addon/tamper-data/)。

它没有“重播”选项，它只是在任何请求时弹出一个窗口（在您激活它之后），您修改值，然后按一个按钮实际执行 POST/PUT。

如果单击后表单没有立即消失，您可以单击多次并在每次运行时篡改值。

# java - java eclipse indigo执行可执行jar的问题（项目外部文件夹中的属性文件）

> ID：10668437
> 
> 赞同：1
> 
> 时间：2012-05-19T19:54:44.357
> 
> 标签：java, eclipse, jar

我用 eclips indigo 创建了一个可执行 jar，并使用 bat 文件运行它。

当我执行时，我会遇到各种异常。
NoClassDefFoundError，无法初始化类，....

无论我为创建可执行 jar 做出什么选择，我都有问题。

我曾经使用插件 Fatjar 制作可执行 jar，但它似乎不再使用 indigo （插件）。

似乎 jar 不包括我包含在项目的不同文件夹中的文件（日志记录和其他道具文件）？！

有什么建议么 ... 。

我收到以下错误代码：

![在此处输入图像描述](../Images/9f4f7d1fab91ed7fbcc0fc99cb984449.png)

我的结构是：

![在此处输入图像描述](../Images/c2b62584c73d99763883fca63c01e8f9.png)

* * *

我尝试使用 Fatjar 插件，现在我没有 NoClassDefFoundError 了，但在我的程序中，我得到了下一个错误：

![在此处输入图像描述](../Images/d29b60e6912480549c8f7664c38cc1bd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:57:02.703

试试这个，这是在eclipse中创建jar或者runnable jar的方法

文件 -> 导出 -> Java -> Runnbale JAR 文件

启动配置：您的类包含公共静态 void main(String[] args)

出口目的地：目标地点

图书馆处理：

将所需的库打包到生成的 JAR 中

结束

# php - 如何检测页面何时使用 PHP 更新

> ID：10668440
> 
> 赞同：0
> 
> 时间：2012-05-19T19:55:18.177
> 
> 标签：php, scripting

我想知道如何检测页面何时使用 PHP 更新。我在谷歌上研究过东西，但一无所获。

我想要做的是在页面更新时调用一个特定的函数。我将运行一个 cron 作业以运行代码。

我想要这样的东西：

```
if (page updated) {
//functions
}
else
{
//functions
} 
```

如果我不能做这样的事情，那么我至少想知道如何检测页面何时使用 PHP 更新。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T20:09:57.833

使用[file_get_contents()](http://php.net/manual/fr/function.file-get-contents.php)获取页面内容，从中创建一个 MD5 散列，并将其与您已有的散列进行比较。我建议将此哈希存储在一个简单的文件中。

```
$contents = file_get_contents('http://site.com/page');
$hash     = file_get_contents('hash'); // the text file where the hash is stored
if ($hash == ($pageHash = md5($contents))) {
  // the content is the same
} else {
  // the page has been updated, do whatever you need to do
  // and store the new hash in the file
  $fp = fopen('hash', 'w');
  fwrite($fp, $pageHash);
  fclose($fp);
} 
```

不要忘记将[allow_url_fopen](http://fr2.php.net/manual/fr/filesystem.configuration.php#ini.allow-url-fopen)设置为*On*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:23:50.170

正如您所说，您可以每小时或每 15 分钟或其他任何时间运行一次 cron。它必须访问该页面，获取其修改日期，将其与存储的值进行比较，如果不同，则执行某些操作。显然，您需要更新您的信息，并将页面的当前日期设置为 $last_set_date 或其他。（应该在数据库中完成）

这个快速片段获取页面的最后更新时间（这里有关于该主题的更多信息：[get_headers 的 PHP 文档](http://php.net/manual/en/function.get-headers.php)）：

```
<?php
$url = 'http://www.example.com';
$h = get_headers($url, TRUE);
echo "LAST MODIFIED: ", $h["Last-Modified"];
?> 
```

在你得到这个之后，你需要做的就是将它与之前存储的值（文本文件、数据库）进行比较，看看它是否不同。这就是`page updated`你的脚本中的检查！

随时通过评论给我更多的澄清，我会努力改进我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:08:27.400

**您不能简单地检测页面是否已使用 php 更新，请尝试使用 javascript**

在这里，我假设您包含 jquery libray：

```
<script type="text/javascript">
     $( document ).ready( function(){
        $("#someElementInYourPageYouWannaWatch").change( function(){
          $.ajax({
            url:'http://yourwebsite.php/your_controller.php',
            ...
            success: function( response ){
              $("#someNotifyElement).html('updated');
            }
          });

        });
     });
</script> 
```

类似的东西:)

# c++ - jvm如何处理多态性及其优化

> ID：10668441
> 
> 赞同：0
> 
> 时间：2012-05-19T19:55:18.767
> 
> 标签：c++, jvm, polymorphism, virtual

我的情况是有一个带有方法 m 的接口 I，以及行为不同的两个实现类 A 和 B。

A 和 B 的对象仅将内存用于它们的值和引用类型，而不是它们的方法。存储在类型 I 变量中的 A 对象与引用（指针大小开销）加上对象大小一起存储。现在调用方法 m。现在这一位信息存储在哪里，必须从 B 类调用 A 类的方法 m？

这个问题也让我对 C++ 虚拟方法感到厌烦。

```
interface I { void m(); }
class A implements I { void m(){println("a");} }
class B implements I { void m(){println("b");} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T19:58:08.223

在 C++ 中，每个对象通常包含一个指向函数地址表（*vtable ）的隐藏指针（* *vptr*）。每个类有一个 vtable，包含其虚函数实现的地址。请参阅[http://en.wikipedia.org/wiki/Virtual_method_table](http://en.wikipedia.org/wiki/Virtual_method_table)。

 *我想象Java以类似的方式实现事物（尽管我没有研究过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:13:49.413

在实际执行代码 (JIT) 中，至少 Hotspot JVM 有时可以直接调用正确的方法（有效地去虚拟化它）*，如果*它可以确定它是哪一个。由于它还处理类加载，因此类层次结构是已知的，因此如果它周围没有 B 的实例，则可以确定它是例如 A（单态）。如果稍后创建 B 的实例，它可以反优化并仍然进行一些优化（仍然只有两个替代方案，双态）。*

# json - JSON 对象不包含类名

> ID：10668447
> 
> 赞同：0
> 
> 时间：2012-05-19T19:57:01.420
> 
> 标签：json, jax-rs

我使用 Netbeans IDE 7.1.2 从数据库创建 RESTFUL Web 服务。我已经使用 IDE 的**测试 RESTful Web 服务**上下文菜单测试了 GET/SET 方法。问题是，**应用程序/json**格式的输出不包含类的名称。它只是给了我一个对象数组以及它们各自的实例字段值。这是我得到的

```
[{"id":1129,"salary":4212,"numberOfCars":9},{"id":3300,"salary":101,"numberOfCars":6},
{"id":3323,"salary":315,"numberOfCars":5},{"id":8983,"salary":756,"numberOfCars":1},
{"id":23422,"salary":537,"numberOfCars":2}] 
```

这个类的名称是 Customer，我试图在 Android 应用程序中解析这个 JSON 数据，但是没有类的名称进行迭代，我迷路了。有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T23:35:59.800

在我见过的所有解析器中，类名从不*在*JSON 中。在你去解析它之前，你必须知道 JSON 包含什么。例如，GSON（在我的脑海中）：

```
class Dude {
  int id;
  int salary;
  int numberOfCars;
}

Dude[] dudez = gson.fromJson(json, Dude[].class); 
```

# java - 使用 GSON 解析 JSON 文件

> ID：10668452
> 
> 赞同：1
> 
> 时间：2012-05-19T19:57:34.133
> 
> 标签：java, json, parsing, nested, gson

我在将 JSON 文件读入 POJO 时遇到问题。让我给你一个我的 JSON 文件的片段：

```
 {
    "Speidy": {
        "factionId": "2",
        "role": "ADMIN",
        "title": "",
        "power": 9.692296666666667,
        "powerBoost": 0.0,
        "lastPowerUpdateTime": 1337023306922,
        "lastLoginTime": 1337023306922,
        "chatMode": "PUBLIC"
    },
    "ShadowSlayer272": {
        "factionId": "2",
        "role": "NORMAL",
        "title": "",
        "power": 0.8673466666666667,
        "powerBoost": 0.0,
        "lastPowerUpdateTime": 1336945426926,
        "lastLoginTime": 1336945426926,
        "chatMode": "PUBLIC"
    }, 
```

我的问题是第一个“节点”是完全随机的，即如果每次都不同，我该如何为其制作 POJO 文件？

我的子数据 POJO 文件是这样的：

```
public class Node {
    private int factionId = 0;
    private String role = "";
    private String title = "";
    private double power = 0.0;
    private double powerBoost = 0.0;
    private int lastPowerUpdateTime = 0;
    private int lastLoginTime = 0;
    private String chatMode = "";
} 
```

然后我的另一个 POJO 文件是这样的：

```
public class Container {
    private List<Node> nodes; //What should nodes be for GSON to get each random one?

    public List<Node> getNodes() {
        return nodes;
    }
} 
```

我感谢所有帮助，谢谢。

**更新**

我尝试将其更改`List`为 a `Map`：

```
public class Container {
    private Map<String,Node> nodes;

    public Map<String,Node> getNodes() {
        return nodes;
    } 
```

同时保持节点文件相同。该字符串将是属性名称，即`Speidy`或`ShadowSlayer272`。但是，gson 从不对节点做任何事情，当我尝试和 to 时`getNodes()`，它会返回一个`null`对象。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:06:41.790

您正在列出看似名称的名称，您可能打算表示一个值，作为对象的属性名称。相反，将名称包含在 JSON 字符串中，并为其分配一个属性名称，该名称实际上将作为私有变量（带有 getter 和 setter）出现在您的 Java Node 类中。

有了这个，您应该能够将您的 JSON 反序列化回一个对象。此外，由于在服务器端您将节点集合表示为列表，因此我将 JSON 转换为包含两个对象的数组。在 JavaScript 中，您可以使用 和 来访问它们`node[0].name`，`node[1].name`这相当于`nodes.get(0).getName()`在服务器端：

```
[
    {
        "name" : "Speidy",
        "factionId": "2",
        "role": "ADMIN",
        "title": "",
        "power": 9.692296666666667,
        "powerBoost": 0.0,
        "lastPowerUpdateTime": 1337023306922,
        "lastLoginTime": 1337023306922,
        "chatMode": "PUBLIC"
    },
    {
        "name" : "ShadowSlayer272",
        "factionId": "2",
        "role": "NORMAL",
        "title": "",
        "power": 0.8673466666666667,
        "powerBoost": 0.0,
        "lastPowerUpdateTime": 1336945426926,
        "lastLoginTime": 1336945426926,
        "chatMode": "PUBLIC"
    }
]

public class Node {
    private String name = "";

    private int factionId = 0;
    private String role = "";
    private String title = "";
    private double power = 0.0;
    private double powerBoost = 0.0;
    private int lastPowerUpdateTime = 0;
    private int lastLoginTime = 0;
    private String chatMode = "";
} 
```

话虽如此，如果您确实需要将该名称用作属性名称，请考虑将 JSON 反序列化为 HashMap 而不是 List。列表通常映射到 JSON 数组，而 Map 通常更适合表示父对象内的多个 JSON 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T21:36:33.973

如果您**确实可以控制**JSON 的格式，我建议[jmort253 在他的回答中建议的整体列表结构](https://stackoverflow.com/a/10668492/180740)，即`[{"name":"Speidy", ... },{"name":"ShadowSlayer272", ... }]`.

如果您**无法控制**`{"Speidy":{ ... },"ShadowSlayer272":{ ... }}`生成的 JSON，这里有两种方法可以使用 Gson映射 JSON 片段，例如您的问题中的那个：

*   *没有*你的`Container`班级和一点`TypeToken`巫术：

    ```
    // Ask Gson to deserialize the JSON snippet into a Map<String, Node>.
    Type type = new TypeToken<Map<String, Node>>() {}.getType();
    Map<String, Node> nodes = gson.fromJson(json, type); 
    ```

*   *与*您的`Container`班级和自定义`JsonDeserializer`：

    ```
    class ContainerDeserializer implements JsonDeserializer<Container> {
      public Container deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)
          throws JsonParseException {
        List<Node> nodes = new ArrayList<Node>();
        JsonObject players = json.getAsJsonObject();
        for (Entry<String, JsonElement> player : players.entrySet()) {
          String playerName = player.getKey();
          JsonElement playerData = player.getValue();
          // Use Gson to deserialize all fields except
          // for the name into a Node instance ...
          Node node = context.deserialize(playerData, Node.class);
          node.name = playerName; // ... then set the name.
          nodes.add(node);
        }
        return new Container(nodes);
      }
    } 
    ```

    这假设一个构造函数，`Container(List<Node>)`并允许`Container`实例是不可变的，这通常是一件好事。

    像这样注册并使用自定义序列化程序：

    ```
    GsonBuilder builder = new GsonBuilder();
    // Tell Gson to use the custom ContainerDeserializer whenever
    // it's asked for a Container instance.
    builder.registerTypeAdapter(Container.class, new ContainerDeserializer());
    Gson gson = builder.create();

    // Ask Gson to create Container instance from your JSON snippet.
    Container container = gson.fromJson(json, Container.class); 
    ```

# perl - IPC::Shareable 变量，“不能使用字符串...作为 SCALAR ref..”和内存地址

> ID：10668453
> 
> 赞同：1
> 
> 时间：2012-05-19T19:57:47.413
> 
> 标签：perl, ipc

请注意以下最小的工作示例：

```
use warnings;
use strict;
use IPC::Shareable;
use Data::Printer;

IPC::Shareable->clean_up;

my $sharevar1 = "a";
my $sharevar2;

print "A: $sharevar1 $sharevar2\n";
p($sharevar1);
p($sharevar2);

my $glue1 = 'glu1';
my $glue2 = 'glu2';

my %options = (
  create    => 1, #'yes',
  exclusive => 0,
  mode      => 0644, #0644,
  destroy   => 1, # 'yes',
);

my $sharevar_handle1 = tie $sharevar1, 'IPC::Shareable', $glue1 , \%options ; #

print "B1: $sharevar1 $sharevar2 - $sharevar_handle1\n";

my $sharevar_handle2 = tie $sharevar2, 'IPC::Shareable', $glue2 , \%options ; #

print "B2: $sharevar1 $sharevar2 - $sharevar_handle2\n";

p($sharevar1);
p($sharevar2);

$sharevar1 = "b";
#~ $sharevar1 = "AOE" . \$sharevar2;
$sharevar2 = 20;

print "C: ";
print "- $sharevar1 $sharevar2\n";
p($sharevar1);
p($sharevar2); 
```

当我运行它时，我得到如下输出 - 正如预期的那样：

```
Use of uninitialized value $sharevar2 in concatenation (.) or string at tt.pl line 13.
A: a 
"a"
undef
Use of uninitialized value $sharevar1 in concatenation (.) or string at tt.pl line 30.
Use of uninitialized value $sharevar2 in concatenation (.) or string at tt.pl line 30.
B1:   - IPC::Shareable=HASH(0xa1dc1b8)
Use of uninitialized value $sharevar1 in concatenation (.) or string at tt.pl line 34.
Use of uninitialized value $sharevar2 in concatenation (.) or string at tt.pl line 34.
B2:   - IPC::Shareable=HASH(0xa215b10)
undef (tied to IPC::Shareable)
undef (tied to IPC::Shareable)
C: - b 20
"b" (tied to IPC::Shareable)
20 (tied to IPC::Shareable) 
```

但是，如果现在我尝试取消注释“ `$sharevar1 = "AOE" . \$sharevar2;`”行，同时注释掉`$sharevar1 = "b";`上面的“”；那么我得到的输出几乎是相同的，除了最后：

```
...
B2:   - IPC::Shareable=HASH(0x852fb20)
undef (tied to IPC::Shareable)
undef (tied to IPC::Shareable)
Can't use string ("AOESCALAR(0x836bf88)") as a SCALAR ref while "strict refs" in use at /usr/local/share/perl/5.10.1/IPC/Shareable.pm line 741.
C: $ 
```

现在，问题是这个“不能使用字符串......”实际上会导致崩溃......显然，如果一个`tie`d 变量曾经被分配一个引用 via `\`，它会得到一个类似于`SCALAR(0x836bf88)` *string*的值，这显然被解释为Perl 之后表示地址...？！

而且我认为 Perl 在这种情况下会匹配`SCALAR(...`字符串*的起始部分 (对于“带括号的 0x”有点匹配*）：“不能使用字符串 ("AOESCALAR(0x836bf88)") 作为 SCALAR ref" ...

我的问题是 - 我对 Perl 和 IPC::Shareable 如何正确解释地址（否则存储为“字符串”）的推理是正确的（~~不，请参阅下面的编辑~~；是的，请参阅[帖子](https://stackoverflow.com/a/10668741/277826)）；不管是不是，我将如何将地址存储到 IPC::Shareable 中？

非常感谢您的任何答案，
干杯！

编辑：嗯，显然，打印包含字符串地址的字符串变量通常都可以正常工作 - 所以这个问题是 IPC::Shareable 特定的，我猜：

```
 DB<1> $ttt = "aa"
  DB<2> p $ttt
aa
  DB<3> $eee = \$ttt
  DB<4> p $eee
SCALAR(0xa382668)
  DB<5> $eee = "erw".\$ttt
  DB<6> p $eee
erwSCALAR(0xa382668)
  DB<7> q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:40:51.380

如果您升级到最新版本 (0.60) 的`IPC::Shareable`. 我目前无法访问 Unix 机器来尝试这个，但在当前版本的第 741 行没有什么重要的。

您应该知道，当您处理绑定变量时，您只是在与一个看起来像 Perl 变量的标准 API 交互。因此，在写作`$sharevar1 = "AOE" . \$sharevar2`中，您实际上是在调用`IPC::Shareable::STORE($sharevar1, "AOE" . \$sharevar2)`which 几乎可以做它想做的事情。

我在模块中看到的是检查要分配的值（给绑定的标量）是否是参考值的代码，如果是，则将其绑定到`IPC::Shareable`它是否尚未绑定。取消引用值时使用的类型是通过检查字符串化引用`/SCALAR/`等来建立的，尽管我不知道它如何应用于您所看到的行为（我希望字符串`'AOESCALAR(0x836bf88)'`被识别为不是引用，所以不受正则表达式检查）我确信它是有贡献的。也许这是我的版本中已修复的问题？

这种方法有很大的错误空间，尤其是与其他类相关的变量会完全抛弃整个事情。我建议你升级，看看最新版本是否支持你想做的事情。

请记住，尽管这与核心 Perl 无关，并且与模块不完全模拟 Perl 标量的接口有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:44:12.210

好吧，事实证明我错了`:)`

事实证明，这个问题毕竟与字符串解析有关；即`SCALAR`检查大写关键字；这是OP中代码的相应更改部分：

```
p($sharevar1);
p($sharevar2);

#~ $sharevar1 = "b";
#~ $sharevar1 = substr "AOE" . \$sharevar2, 2, 7; # Can't use string ("ESCALAR") as a SCALAR ref
#~ $sharevar1 = substr "AOE" . \$sharevar2, 5, 10; # "ALAR(0x878", passes OK
$sharevar1 = lc \$sharevar2; # lowercase works too
$sharevar2 = 20;

print "C: ";
print "- $sharevar1 $sharevar2\n";
p($sharevar1);
p($sharevar2); 
```

请注意，只要您有`SCALAR`，即使您没有地址数字（如“ESCALAR”），也会引发严格使用错误。

但是，如果关键字`SCALAR`不完整存在——即使它是小写的——那么错误就会消失；现在是终端日志的结尾：

```
...
B2:   - IPC::Shareable=HASH(0x9ca2e58)
undef (tied to IPC::Shareable)
undef (tied to IPC::Shareable)
C: - scalar(0x9adef88) 20
"scalar(0x9adef88)" (tied to IPC::Shareable)
20 (tied to IPC::Shareable) 
```

好吧，希望就是这样 - 但由于我还不太了解这种机制，欢迎任何更好的澄清，
干杯！

* * *

编辑：刚刚发现另一件事；有时你可能会这样做：

```
my $sharevar2;
my $sharevar_handle2 = tie $sharevar2, 'IPC::Shareable', $glue2 , \%options ; #
print($sharevar2); 
```

我只是注意到有时（但并非总是如此，也不能真正说出何时）；`tie`而不是“undef”，将`$sharevar2`变量设置为“SCALAR()”或“ARRAY()”之类的东西——在这种情况下，`print($sharevar2);`语句将失败。

您不能以其他方式调试，但不能使用' `Data::Printer`s （因为尝试打印它无论如何都会失败） - 而是使用 on ：`p()``$sharevar2``$sharevar_handle2`

```
my $sharevar2;
my $sharevar_handle2 = tie $sharevar2, 'IPC::Shareable', $glue2 , \%options ; #
print "2 "; p($sharevar_handle2); 
```

...然后输出可能类似于：

```
...
2 IPC::Shareable  {
    Parents       Exporter
    Linear @ISA   IPC::Shareable, Exporter
    public methods (31) : ....
    private methods (11) : ....
    internals: {
        _data   \ "ARRAY(0xa21e788)",
        _iterating   "",
... 
```

在这种情况下，您确定`$sharevar2`设置为“ARRAY(0xa21e788)”，因此当尝试`print`它时总是会导致失败。请注意，这样的事情可能是由于*在代码中稍后*`$sharevar2`将命令分配给引用（即`= \$somevar;`）而引起的；这种因果关系可能并不总是显而易见的。

 *对于临时修复，只需将“行为不端”变量设置为`undef`after `tie`- 这应该可以更轻松地跟踪分配给引用的位置：

```
my $sharevar2;
my $sharevar_handle2 = tie $sharevar2, 'IPC::Shareable', $glue2 , \%options ; 
# if here $sharevar2 somehow becomes "ARRAY(0x88417c8)" instead of undef; reset
print "1 "; p($sharevar_handle2); # would show "ARRAY(0x88417c8)"
$sharevar2 = undef;
print "2 "; p($refvarstr_handle); # should show undef
p($sharevar2); # should not crash, cause it's now ARRAY anymore, but undef 
```

也相关：[在严格引用时不能使用字符串作为 SCALAR 引用 - perlmonks.org](http://www.perlmonks.org/?node_id=148143)*

# c++ - 如何显示 Windows 资源管理器上下文（右键单击）菜单？

> ID：10668456
> 
> 赞同：5
> 
> 时间：2012-05-19T19:57:52.137
> 
> 标签：c++, windows, windows-explorer

我想显示 Windows 资源管理器上下文菜单。

**我不想将我的应用程序添加到其中，我只想在我的应用程序中显示它。**

我需要的一个很好的实现示例是 Total Commander。

如果您按住鼠标右键，TC 将显示上下文菜单，这与 Windows 资源管理器中的完全相同。

我正在使用 C++/Qt，但语言在这里并不重要。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T23:50:37.760

我找到了几个可以帮助你的样本。你不可能单独使用 Qt 来做到这一点，因为 shell 上下文菜单是高度特定于操作系统的；可能还需要一些 Win32 调用。

*   [在您的应用程序中使用 Shell ContextMenu](http://www.codeproject.com/Articles/4025/Use-Shell-ContextMenu-in-your-applications)
*   [资源管理器外壳上下文菜单](http://www.codeproject.com/Articles/22012/Explorer-Shell-Context-Menu)

[Raymond Chen 的博客系列“如何托管 IContextMenu”](https://devblogs.microsoft.com/oldnewthing/?s=%22How+to+host+an+IContextMenu%22)

还有一些非 C++ 示例：

*   [C# 文件浏览器](http://www.codeproject.com/Articles/15059/C-File-Browser)
*   [C# 中的 Shell 上下文菜单示例](https://web.archive.org/web/20120203062652/http://social.msdn.microsoft.com/Forums/en-US/showandtell/thread/3f553b23-fdb3-4355-8496-28a781b37f72)

以及相关的 SO 问题：

*   [如何访问 Windows shell 上下文菜单项？](https://stackoverflow.com/questions/3777121/how-to-access-windows-shell-context-menu-items)
*   [如何获得右键单击文件夹背景的完整shell上下文菜单](https://stackoverflow.com/questions/7343591/how-to-obtain-full-shell-context-menu-of-right-click-a-folder-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T05:13:47.387

这是我的做法：

```
bool CShellMenu::openShellContextMenuForObject(const std::wstring &path, int xPos, int yPos, void * parentWindow)
{
    assert (parentWindow);
    ITEMIDLIST * id = 0;
    std::wstring windowsPath = path;
    std::replace(windowsPath.begin(), windowsPath.end(), '/', '\\');
    HRESULT result = SHParseDisplayName(windowsPath.c_str(), 0, &id, 0, 0);
    if (!SUCCEEDED(result) || !id)
        return false;
    CItemIdListReleaser idReleaser (id);

    IShellFolder * ifolder = 0;

    LPCITEMIDLIST idChild = 0;
    result = SHBindToParent(id, IID_IShellFolder, (void**)&ifolder, &idChild);
    if (!SUCCEEDED(result) || !ifolder)
        return false;
    CComInterfaceReleaser ifolderReleaser (ifolder);

    IContextMenu * imenu = 0;
    result = ifolder->GetUIObjectOf((HWND)parentWindow, 1, (const ITEMIDLIST **)&idChild, IID_IContextMenu, 0, (void**)&imenu);
    if (!SUCCEEDED(result) || !ifolder)
        return false;
    CComInterfaceReleaser menuReleaser(imenu);

    HMENU hMenu = CreatePopupMenu();
    if (!hMenu)
        return false;
    if (SUCCEEDED(imenu->QueryContextMenu(hMenu, 0, 1, 0x7FFF, CMF_NORMAL)))
    {
        int iCmd = TrackPopupMenuEx(hMenu, TPM_RETURNCMD, xPos, yPos, (HWND)parentWindow, NULL);
        if (iCmd > 0)
        {
            CMINVOKECOMMANDINFOEX info = { 0 };
            info.cbSize = sizeof(info);
            info.fMask = CMIC_MASK_UNICODE;
            info.hwnd = (HWND)parentWindow;
            info.lpVerb  = MAKEINTRESOURCEA(iCmd - 1);
            info.lpVerbW = MAKEINTRESOURCEW(iCmd - 1);
            info.nShow = SW_SHOWNORMAL;
            imenu->InvokeCommand((LPCMINVOKECOMMANDINFO)&info);
        }
    }
    DestroyMenu(hMenu);

    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:49:11.333

你有两个选择：

1) 自己实现每个功能，在自定义上下文菜单上创建相应的操作，或者

2）访问Windows API......这正是Qt**不打算**考虑Qt是跨平台的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T20:04:55.330

[http://www.ffuts.org/blog/right-click-context-menus-with-qt/](http://www.ffuts.org/blog/right-click-context-menus-with-qt/)

> 在 Qt 中，右键单击弹出上下文菜单非常简单。有几件事需要注意……</p>

```
 // myWidget is any QWidget-derived class
 myWidget->setContextMenuPolicy(Qt::CustomContextMenu);
 connect(myWidget, SIGNAL(customContextMenuRequested(const QPoint&)),
     this, SLOT(ShowContextMenu(const QPoint&))); 
```

另一方面，如果您正在寻找“Windows 资源管理器集成”或“Windows Shell 集成”之类的东西，这里有一个很好的（尽管不是 QT 特定的）示例：

[http://www.codeproject.com/Articles/15171/Simple-shell-context-menu](http://www.codeproject.com/Articles/15171/Simple-shell-context-menu)

关键是实现这两个 Windows shell 接口：

*   上下文菜单

*   IShellExtInt

# regex - 正则表达式中的^#如何匹配空行？

> ID：10668462
> 
> 赞同：0
> 
> 时间：2012-05-19T19:59:42.207
> 
> 标签：regex

我一直认为在正则表达式中，^和#之类的'动词'必须跟在某些东西之后，例如^a，行以a开头，或#a，行以a结尾，但是^#对我来说，就像#不是' verb' 在这种情况下，就像 a 是动词 '^' 的宾语

有没有人可以给我一个更好的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:18:34.977

我在这里很紧张，我猜您实际上想问为什么`^$`与空行匹配。

理解这一点的关键是，并非正则表达式匹配的所有内容实际上都必须是一个*字符*（或多个字符），它也可以是字符串中的一个*位置*。匹配位置的正则表达式标记称为“锚”或“断言”。他们实际上并不使用任何文本，他们只是确保正则表达式引擎当前位于字符串中的某个位置。

因此，例如，`^`如果正则表达式引擎当前位于字符串的开头，则匹配。在某些情况下，根据当前设置，它也可能匹配当前*行*的开头。无论如何，它在第一个字符*之前匹配。*

同样，`$`匹配字符串（或行）的末尾；更准确地说，它在终止换行之前匹配，如果有的话。

因此，`^$`仅当字符串/行的开头和字符串/行的结尾之间没有字符时才匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:19:47.367

我正在假设您对此感到`#`困惑`$`

`^`并`$`匹配一行的文字开头和文字结尾。不是最后一个字符或第一个字符。它不需要最后一个字符或第一个字符即可工作。

你为什么要这个？好吧，假设您有几行很长的行，并且您想在每行的末尾添加文本。您可以执行替换搜索`$`并将其替换为“Bork Bork Bork”（例如，如果您正在制作 encheferizer）。或者您可以通过使用找到逗号分隔列表的最后一个成员`[^,]+$`

您也可以使用`^$`您提到的搜索表达式来匹配空行，或者您可以通过搜索或其他方式确保行上没有任何非法字符`^[\w\d]*$`。

# objective-c - BackButton 可伸缩

> ID：10668465
> 
> 赞同：-3
> 
> 时间：2012-05-19T20:00:17.847
> 
> 标签：objective-c, xcode, cocoa, ios5

我想要一个可伸缩的后退按钮我现在正在使用这行编码，这给了我一个后退按钮，但我希​​望它可以伸缩，其中包含自定义标题所以我尝试在代码中添加这一行

```
[button setTitle:@"back" forState:UIControlStateNormal]; 
```

但它没有用

```
 UIImage *buttonImage = [[UIImage imageNamed:@"backButton.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 16, 0, 16)];

    //create the button and assign the image
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage  forState:UIControlStateNormal];

    //buttonImage.size.width
    //set the frame of the button to the size of the image (see note below)
    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    [button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

    //create a UIBarButtonItem with the button as a custom view
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.leftBarButtonItem = customBarItem; 
```

在它显示的 NavigationBar 中，我需要一个标题以便它可以拉伸？

![http://i.imgur.com/Cylbz.png](../Images/f901946fe87a472336b9d2a751bf97bb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:41:45.923

如果您希望图像可拉伸，则必须使用`setBackgroundImage:forState`而不是。`setImage:forState:`

您还应该将按钮的宽度设置为允许您的标题适合的更高值。由于图像是可拉伸的，因此按钮不必与图像具有相同的大小。

# sql-server-2008 - 如何在 SSAS 中访问我的数据库？

> ID：10668469
> 
> 赞同：1
> 
> 时间：2012-05-19T20:01:36.163
> 
> 标签：sql-server-2008, ssas

```
I try this query 
Insert into mining structure [Bike Buyer]
    (
       [Customer Key],
       [Age],
       [Bike Buyer] ,
       [Commute Distance],
       [Education],
       [Gender],
       [House Owner Flag],
       [Marital Status],
       [Number Cars Owned],
       [Number Children At Home],
       [Occupation],
       [Region],
       [Total Children],
       [Yearly Income]
       )
       OPENQUERY ([AdventureWorks2008R2],

        'SELECT [CustomerKey],[Age],[BikeBuyer],

        [CommuteDistance],[EnglishEducation],

        [Gender],[HouseOwnerFlag],

        [MaritalStatus],[NumberCarsOwned],

        [NumberChildrenAtHome],[EnglishOccupation],

        [Region],[TotalChildren],[YearlyIncome]

        FROM [dbo].[vTargetMail]'

    ) 
```

但我有这个错误

> “mta-PC\mta”用户没有访问“AdventureWorks2008R2”对象的权限，或者该对象不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-31T00:31:40.573

每当我遇到这个错误时，都是因为我将 OpenQuery 中引用的对象的名称设置为关系数据库或链接服务器的名称。它必须设置为 SSAS 服务器上数据源对象的名称。例如，如果您有一个名为 AdventureWorks2008R2 的数据库驻留在名为 MyLinkedServer 的链接服务器上，但您的分析服务器通过名为 MyADWorksDataSource 的数据源访问数据，您将使用类似 OPENQUERY ([MyADWorksDataSource] 等的语句。它是违反直觉，但它有效。请参阅 Raymond Li[在 MSDN 上对此线程](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/4db892d9-0c34-4aef-a4f3-2ce18989a3c1/dmx-insert-openquery-permission-problem?forum=sqldatamining)的回复。另请参阅[此 StackOverflow 线程](https://stackoverflow.com/questions/40095246/mdx-permission-error-when-i-call-a-table-in-sql-server-instance)，其中同样的问题是罪魁祸首。

# android - getMaxAmplitude 方法返回幅度的单位是多少？

> ID：10668470
> 
> 赞同：5
> 
> 时间：2012-05-19T20:01:55.243
> 
> 标签：android, audio, noise

有谁知道该方法的返回单位是什么：

```
 MediaRecorder.getMaxAmplitude(); 
```

Android MediaRecorder API 文档仅说明此方法返回自上次调用以来采样点的最大绝对幅度，但未指定单位。它是帕斯卡，毫帕斯卡还是其他？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T19:14:03.823

经过自己和一些高校的详细搜索，得出了这个结论。据我所知，这个问题的答案还不完整，因此，我正在写自己对这个问题的答案。

MediaRecorder.getMaxAmplitude() 函数返回无符号 16 位整数值 (0-32767)。这些值可能是通过在 -32768 … +32767 上使用 abs() 来计算的，类似于正常的 CD 质量样本值。负幅度只是镜像，因此幅度始终为正。

这些值与任何具体的校准物理特性无关。因此，这些值只是 0-100%（该麦克风的最大电压范围）的电气输出的 16 位数字化。

麦克风将声压（帕斯卡）线性转换为电压。因此，api 报告的值与声压相关，但它们在使用的每个设备上都不同，并且在很大程度上取决于品牌、型号和特定设备（电路、放大器等）。这意味着在没有声压的情况下很难判断这些值将电话麦克风校准到可靠的声压计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T10:35:38.950

`MediaRecorder.getMaxAmplitude()`值范围在 0 到 32,767之间

（注：32,767 是有符号整数的最大值）

单位不是标准的。

在我的应用程序中，我通常将任何大于 18000 的值视为“响亮”，约为最大值的 50%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:58:19.540

对于每个不同的设备或麦克风，测量单位会有所不同。如果您想知道，则必须针对校准的源或测量仪器测试每个特定的麦克风型号。

# python - 当其中一个变量可能不存在时，python“或”？

> ID：10668474
> 
> 赞同：4
> 
> 时间：2012-05-19T20:03:17.507
> 
> 标签：python, list, if-statement

假设是这样的：

```
if mylist[0] == 1 or mylist[12] == 2:
   # do something 
```

但我不确定是否`mylist[12]`永远不会超出范围。怎么做才能让事情变得简单并仍然检查索引是否存在？不想做

```
if mylist[0] == 1:
    # do something
elif mylist[12] == 2:
    # do the EXACT same thing 
```

当您获得太多相同的代码行时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T20:04:53.850

您可以检查列表的长度：

```
if mylist[0] == 1 or (len(mylist) > 12 and mylist[12] == 2): 
```

这使用了 的[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)行为`and`来确保`mylist[12]`如果列表包含 12 个或更少的项目，则不会对其进行评估。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T20:16:03.307

切片总是返回一个值（即使它是一个空列表）。你可以这样做：

```
if myList[0] == 1 or myList[12:13] == [2]: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:07:58.817

或者，如果您认为它更具可读性，如下所示：

```
if mylist[0] == 1:
    # do something
elif len(mylist) > 12 and mylist[12] == 2:
    # do same thing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T21:44:23.593

```
def get(arr, ind, default=None):
    try:
        return arr[ind]
    except IndexError:
        return default

if get(myList, 0)==1 or get(myList, 12)==2:
    # do something 
```

# java - 活动之间的共享偏好

> ID：10668476
> 
> 赞同：3
> 
> 时间：2012-05-19T20:03:31.240
> 
> 标签：java, android

对android还是很陌生，想知道是否有人可以帮助...

我有一个有多个活动的应用程序。每个活动都有一个共享首选项文件来保存该活动的字符串。每个首选项都有自己的名称。

但是，我希望任何活动都能够阅读所有偏好....

我是否认为如果我将它们全部重命名为相同的首选项名称，该首选项将可以从我的应用程序中的任何活动中访问？

还是我需要创建一个单独的类来处理所有偏好？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:06:47.430

这是一个很好的教程，可以回答您的问题

[http://saigeethamn.blogspot.de/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.de/2009/10/shared-preferences-android-developer.html)

# command-line - 是否有任何替代 ctl+a 将光标移动到屏幕最左侧

> ID：10668479
> 
> 赞同：0
> 
> 时间：2012-05-19T20:03:46.013
> 
> 标签：command-line

在终端中将光标移动到开头很麻烦，因为使用屏幕，组合键 ctl+a 设置为激活屏幕选择热键。

任何人都知道如何解决这个问题或解决或更好的方法将光标移动到行首？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-19T20:05:13.000

在屏幕中，只需使用 CTRL-A 后跟 A 即可转到行首。需要一点时间来适应，但有点道理。

# c# - 在 C# 中仅列出子文件夹？

> ID：10668481
> 
> 赞同：10
> 
> 时间：2012-05-19T20:04:08.930
> 
> 标签：c#, directory, visual-c#-express-2010

我有一些代码：

```
string pathUser = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
string pathDownload = Path.Combine(pathUser, @"documents\iracing\setups\");
DirectoryInfo dinfo = new DirectoryInfo(pathDownload); // Populates field with all Sub Folders
FileInfo[] Files = dinfo.GetFiles("*.sto");
foreach (FileInfo file in Files)
{
     listBox2.Items.Add(file.Name);
} 
```

我希望显示：`documents\iracing\setups\`的子文件夹，而不是文件...包括 .sto 文件。我需要的只是列出子文件夹....我不知道该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-19T20:11:04.467

你可以试试这个：

```
DirectoryInfo directory = new DirectoryInfo(pathDownload);
DirectoryInfo[] directories = directory.GetDirectories();

foreach(DirectoryInfo folder in directories)
     listBox2.Items.Add(folder.Name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:16:03.823

只需使用此功能

```
string pathUser = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile);
string pathDownload = Path.Combine(pathUser, @"documents\iracing\setups\");
DirectoryInfo dinfo = new DirectoryInfo(pathUser); // Populates field with all Sub Folders
DirectoryInfo[] directorys = dinfo.GetDirectories();
foreach (DirectoryInfo directory in directorys)
{
    listBox2.Items.Add(directory.Name);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:07:42.583

如果您希望获得...目录，请使用[`EnumerateDirectories`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.enumeratedirectories.aspx)or[`GetDirectories`](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.getdirectories.aspx)代替。`GetFiles`

# ruby-on-rails-3 - 如何创建两个需要相同资源表名称但数据不同的 Rails 模型？

> ID：10668482
> 
> 赞同：0
> 
> 时间：2012-05-19T20:04:13.800
> 
> 标签：ruby-on-rails-3, activerecord, naming-conventions

我正在 Rails 3.2 中构建一个物业管理（公寓）应用程序。单位和物业都有便利设施。一个物业可能有“巴士路线”和“投币式洗衣”等设施，而一个单元可能有“空调”和“无障碍设施”等设施。我最初命名了我的物业设施资源表`amenities`和连接表`amenities_properties`。然而，现在我开始为单位建立我的便利设施表，我不确定我应该如何命名这些单位。我可以选择`amenities_properties`and `amenities_units`。但是然后我调用连接表`amenities_properties_properties`和`amenities_units_units`？对我来说似乎很奇怪。

有一个表会更好吗？它`amenities`有一个类型字段来指示它是属于单位还是属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:49:40.500

我会让便利设施多态，所以它看起来像这样：

舒适度.rb

```
#There's not a grammatically good way to turn "amenity" into a polymorphic name so... 
belongs_to :amenitable, :polymorphic => true 
```

property.rb 和 unit.rb

```
has_many :amenities, :as => :amenitable 
```

使便利设施多态会在便利设施表中添加一个`amenitable_type`and`amenitable_id`列。

因此，当您创建新的设施时，将 设置`amenitable_type`为`'unit'`or `'property'`（取决于您的模型名称），并将 设置`amenitable_id`为它所属的单元或属性的 id。

# python - Django 模板和视图

> ID：10668483
> 
> 赞同：0
> 
> 时间：2012-05-19T20:04:24.950
> 
> 标签：python, django, templates, ckeditor, models

我在这里有点麻烦。我正在将一个网站从 html 转换为 Django 驱动的网站，它没有特殊内容，只有 3 个页面（cv/about/projects），有点像网络投资组合。

我想使用 CKEditor 通过管理界面启用页面编辑。我还希望能够使用 Django 模板。

从 CK 编辑界面创建页面并将内容添加到“内容”字段时，我无法将页面作为模板访问。

我认为对我的问题很重要的代码：

模型.py：

```
from django.db import models
from ckeditor.fields import HTMLField

class Page(models.Model):
  title =  models.CharField(max_length=30)
  content = HTMLField(blank=True, verbose_name='HTML version')
  def __unicode__(self):
      return self.title 
```

视图.py：

```
def cv(request):
  cv = Page.objects.filter(id=2)
  content = ([p.content for p in cv])
      return HttpResponse(content) 
```

网址.py：

```
url(r'^cv$', cv), 
```

我阅读了 Context & loader 以使用模板使页面动态化，所以我写了这个视图：

视图.py：

```
from django.template import Context, loader

def about(request):
  about = Page.objects.filter(id=1)
  t = loader.get_template('about.html')
  ct = Context({
  'about': about
  })
  return HttpResponse(t.render(ct)) 
```

但随后我需要通过它们各自的 .html 文件更新页面，并且 CKEdit 接口无法*访问*我的页面。任何人都知道我要重构什么，添加以能够使用 Django 模板来编辑我的页面？（使用 {% block content %}{% endblock %} ）*同时仍然能够使用 CKEditor 来编辑这些页面的内容。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:51:23.923

如果您要扩展一些基本模板，例如“base.html”，那么我会想象：

base.html

```
<html>
    <body>
    {% block header %}
        My header
    {% endblock header %}
    {% block content %}
        My content
    {% endblock content %}
    </body>
</html> 
```

about.html

```
{% extends "base.html" %}

{% block content %}
    {{ about.content }}
{% endblock content %} 
```

您将`about`上下文变量传递给 about.html，因此您需要调用该变量。基本上，您的模板不能完全为空。即使 about.html 仅包含`{{ about.content }}`. 我认为您没有提供足够的信息来确定有关 CKE 的部分，但首先要确保您可以向模板渲染任何东西，然后处理 CKE

# drupal - 发布选项不适用于 drupal 中的一种内容类型

> ID：10668487
> 
> 赞同：0
> 
> 时间：2012-05-19T20:05:37.440
> 
> 标签：drupal

我有 Drupal 6.25。我有一些内容类型，如文章、编辑、幻灯片等。
除了“文章”之外，所有内容类型的发布选项通常都会列出（尽管我向我的编辑授予了“管理节点”权限）。我已经尝试了一些模块，例如[覆盖节点选项](http://drupal.org/project/override_node_options)，但是对于所有用户（当然除了管理员用户，管理员可以正常看到它），我仍然对这种内容类型有同样的问题。
知道什么可能导致这种情况以及如何解决它吗？
谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:30:59.087

它认为您的一个模块具有一些硬代码，用于发布它提供的 contetn 类型的选项。要修复它，您需要锁定模块代码，或逐步禁用已安装的模块并检查结果。如果您知道哪个模块可以影响某些内容类型的权限 - 您可以查看此模块的问题队列。也许它有一个与权限相关的错误，或者错误的形式改变取决于角色。

# android - 为什么在 Android 模拟器上运行的进程没有显示在 DDMS 中

> ID：10668497
> 
> 赞同：0
> 
> 时间：2012-05-19T20:07:43.653
> 
> 标签：android, eclipse, emulation, process, ddms

我正在使用 eclipse 在 android 模拟器中启动一个应用程序。当我打开 DDMS 透视图时，设备选项卡会显示模拟器进程，但它不会显示模拟器上运行的任何其他进程——我希望看到应用程序的条目。该应用程序已在同一个模拟器上成功启动（没有其他模拟器正在运行）。

模拟器是否需要任何特殊配置才能允许 DDMS 看到进程？我在清单中使用 SET_DEBUG_APP 权限运行应用程序，并且属性 debuggable 设置为 true。

谢谢，杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:10:43.093

您应该确保选择了您正在监控的设备或模拟器。如果未选择任何内容，则不会显示任何内容。通常设备列表应该在 DDMS 视图的左上角。我希望这可以快速解决您的问题。

# javascript - JavaScript：发送多个提交

> ID：10668499
> 
> 赞同：0
> 
> 时间：2012-05-19T20:08:05.847
> 
> 标签：javascript, submit

我有这个 html 代码：

```
<form name="input" action="html_form_action.asp" method="post" id="formID">
Username: <input type="text" name="user" />
          <input type="submit" value="Submit" />
</form>

<script>
    for (i=0;i<10;i++) {document.getElementById('formID').submit; }
</script> 
```

我正在尝试多次提交相同的内容。
但是你可以猜到，它总是提交一次，然后刷新页面。

我怎样才能避免这种情况并尽可能多次提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:21:09.967

除了使用 Ajax 之外，您还可以将表单的目标设置为“_blank”，从而使表单提交到新窗口或选项卡。

```
<form target="_blank" name="input" action="html_form_action.asp" method="post" id="formID"> 
```

浏览器可以打开任意数量的窗口，这样您就可以继续使用一段时间。

不过，这对用户来说会*非常*烦人。我希望你知道你在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:11:49.027

使用 AJAX 以静默方式向服务器发送请求（即无需刷新）。

或者与其提交 10 次表单，不如将循环移动到您的 ASP 文件中 - 您的表单提交一次，服务器上会发生 10 次以上的事情。

你想做什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:15:22.980

您必须通过 Ajax 提交表单。使用 JQuery.Ajax

```
$(function(){
  $.ajax({
    url:'html_form_action.asp',
    data: $("form").serialize(),
    // other setting
    success: function(){
      // what you do after post
    }
  });
}); 
```

其他设置请访问：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T01:13:52.880

试试这个：

```
$('form[name="formname"]').submit(function(){
    form = $('form[name="formname"]').serialize();  
    url1 = 'http://...';
    url2 = 'http://...';

    $.ajax({
        url:url1,
        type:'POST',
        data:form,
        success:function(result){
            $.ajax({
                url     :url2,
                type    :'POST',
                data    :form,
                success :function(result){
                }
            });
        }
    });
    return false;
}); 
```

将 formname 替换为表单名称 Peplace url1 和 url2

# algorithm - 页面替换算法 - LRU

> ID：10668501
> 
> 赞同：4
> 
> 时间：2012-05-19T20:08:27.210
> 
> 标签：algorithm

我正在尝试使用此[youtube 视频](http://www.youtube.com/watch?v=3bvzVLRsNKM)自学 LRU 算法。在下面的示例中（[取自此处](http://cs.uttyler.edu/Faculty/Rainwater/COSC3355/Animations/lrupagereplacement.htm)）为什么 0 被 3 替换。不应该将 4 替换为 3，因为 4 是最少使用的吗？

![在此处输入图像描述](../Images/a7ded52845a63648bdfcd660a7e0ed5b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:12:30.427

LRU 代表“*最近*最少使用”。它基于利用参考的“时间局部性”，即认为相同的东西将在一段时间内使用。

在您的情况下，当前访问之前的过去三个访问是 0 - 4 - 2。这意味着在物理内存中的页面中，0 是最近最少使用的，因此它被分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T06:14:32.730

不要混淆 LRU 和最优替换算法的概念。在上面的堆栈中，在使用 4 之前使用了 0，因此当要进行替换时，最近使用的是 0，而堆栈中也使用了 4 和 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-09T11:39:06.397

最近最少使用意味着如果我们有 3 帧内存并且我们有页面 4 9 7 5。所以 4、9 和 7 将被添加到帧中。现在我们要替换第 5 页。因此，我们将检查内存中哪个页面最近最少使用，在我们的案例中，第 4 页是 LRU，因此我们将用 5 替换 4。

在您的情况下**，2 是最近使用的，4 是最近使用的第二个，0 是最近最少使用的**，所以我们将用 3 替换 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T03:55:49.850

**页面替换算法 LRU（最近最少使用） C 语言代码**

```
#include<stdio.h>

int findLRU(int time[], int n);

int main()
{
    int frame_size, no_of_pages, counter = 0, flag1,f, flag2, i, j, m, pos, page_faults = 0;
    int frames[10], pages[30], time[10], pri[20][20];
    char x[20];
        float fault_ratio,hit_ratio;

        printf("Enter Total number of pages: ");
    scanf("%d", &no_of_pages);

        printf("Enter value of page number: ");
        printf("\n");

        for(i = 0; i < no_of_pages; i++)

  {

            scanf("%d", &pages[i]);
      }
    printf("\n");
    printf("Enter number of frames: ");
    scanf("%d", &frame_size);

        for(i=0; i< no_of_pages; i++)
        {
                x[i]='X';
        }
    for(i = 0; i < frame_size; ++i)
        {
                frames[i] = 0;
    }

    for(i = 0; i < no_of_pages; ++i)
    {
                flag1 = flag2 = 0;

                for(j = 0; j < frame_size; ++j)
                {
                    if(frames[j] == pages[i])
                    {
                                counter++;
                                time[j] = counter;
                           flag1 = flag2 = 1;
                           page_faults--;
                           x[i]='*';
                           page_faults++;
                           break;

                        }
                }

                if(flag1 == 0)
                {
                    for(j = 0; j < frame_size; ++j)
                        {

                                if(frames[j] == 0)
                                {
                                    counter++;
                                    page_faults++;
                                    frames[j] = pages[i];
                                    time[j] = counter;
                                    flag2 = 1;
                                    break;
                                }
                        }
                }

                if(flag2 == 0)
                {
                    pos = findLRU(time, frame_size);
                    counter++;
                    page_faults++;

                    frames[pos] = pages[i];
                    time[pos] = counter;
                }

                for(j = 0; j < frame_size; j++)
                {
                    pri[j][i]=frames[j];
                }
    }

        printf("\n");
                for(i = 0 ; i <no_of_pages*5+2*frame_size+1; i ++)
                {
                        printf("-");
                }

                printf("\n|       |");
                for(i=1;i<=(no_of_pages*4)/2;i++)
        {
            printf(" ");
        }
                printf("Pages");
                for(i=(no_of_pages*4)/2;i<=(no_of_pages*4)+13;i++)
        {
            printf(" ");
        }

                printf("|\n");
        printf("|Frames |");

                        for(i = 0 ; i < no_of_pages*5+2*frame_size - 8; i ++)
                {
                        printf("-");
                }
                printf("\n|\t|");

                for(i=0 ; i < no_of_pages ; i++)
                {
                        printf(" %2d |",pages[i]);
                }
                printf("\n");
                for(i = 0 ; i < no_of_pages*5+2*frame_size+1 ; i ++)
                {
                        printf("-");
                }
                printf("\n");

        for(i=0;i<frame_size;i++)
        {

                printf("| %3d",i);
                printf("\t|");

                        for(f=0;f<no_of_pages;f++)
                        {

                                  if(pri[i][f]==0)
                     {
                        printf("  - |");
                      }
                       else
                       {
                        printf(" %2d |",pri[i][f]);
                        }
                }

                        printf("\n");
                }

                for(i = 0 ; i < no_of_pages*5+2*frame_size+1; i ++)
                {
                        printf("-");
                }

        printf("\n|       |");
        for(i = 0; i< no_of_pages; i++)
        {
                if(x[i]=='X')
                {
                        printf("\033[0;31m");
                        printf(" %2c ",x[i]);
                        printf("\033[0m");
                        printf("|");
                }
                else
                {
                        printf("\033[0;32m");
                        printf(" %2c ",x[i]);
                        printf("\033[0m");
                        printf("|");
                }
        }

                printf("\n");
                for(i = 0 ; i < no_of_pages*5+2*frame_size+1; i ++)
                {
                        printf("-");
                }

        printf("\n\n Total Page Faults =  Total No of pages - Total Pages hits  \n");
    printf("                   =        %d      -       %d      \n",no_of_pages,(no_of_pages-page_faults));
    printf("                   =        %d      \n",page_faults);

        printf("\n Total Page Hits = Total No of pages - Total Pages Miss \n ");
        printf("                =       %d      -       %d      \n",no_of_pages,page_faults);
        printf("                 =      %d      \n",(no_of_pages-page_faults));

    printf("\nTotal Page Fault ratio = Total Page faults / Total pages \n");
        printf("                       =        %d      /       %d      \n",page_faults,no_of_pages);
        printf("                       =        %5.2f   \n",((float)page_faults/no_of_pages));

    printf("\nTotal Page Hit ratio = Total Page hits / Total pages \n");
    printf("                     =      %d      /       %d      \n",(no_of_pages-page_faults),no_of_pages);
    printf("                     =      %5.2f   \n",((float)no_of_pages-page_faults)/no_of_pages);

    return 0;
}
int findLRU(int time[], int n)
{
    int i, minimum = time[0], pos = 0;

    for(i = 1; i < n; ++i)
        {
                if(time[i] < minimum)
                {
                minimum = time[i];
                pos = i;

                }
    }

    return pos;
} 
```

# c - 分段错误 - C

> ID：10668504
> 
> 赞同：12
> 
> 时间：2012-05-19T20:09:06.977
> 
> 标签：c, segmentation-fault

为什么以下代码返回分段错误？当我注释掉第 7 行时，段错误消失了。

```
int main(void){
      char *s;
      int ln;
      puts("Enter String");
      // scanf("%s", s);
      gets(s);
      ln = strlen(s); // remove this line to end seg fault
      char *dyn_s = (char*) malloc (strlen(s)+1); //strlen(s) is used here as well but doesn't change outcome
      dyn_s = s;
      dyn_s[strlen(s)] = '\0';
      puts(dyn_s);
      return 0;
    } 
```

干杯!

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-19T20:10:40.010

`s`是一个未初始化的指针；您正在写入内存中的随机位置。这将调用**未定义的行为**。

您需要为`s`. 另外，[永远不要使用`gets`](https://stackoverflow.com/questions/2843073/warninggets-function-is-dangerous); 没有办法防止它溢出您分配的内存。改为使用`fgets`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T20:12:51.597

灾难性的糟糕：

```
int main(void){
      char *s;
      int ln;
      puts("Enter String");
      // scanf("%s", s);
      gets(s);
      ln = strlen(s); // remove this line to end seg fault
      char *dyn_s = (char*) malloc (strlen(s)+1); //strlen(s) is used here as well but doesn't change outcome
      dyn_s = s;
      dyn_s[strlen(s)] = '\0';
      puts(dyn_s);
      return 0;
    } 
```

更好的：

```
#include <stdio.h>
#define BUF_SIZE 80

int 
main(int argc, char *argv[])
{
      char s[BUF_SIZE];
      int ln;
      puts("Enter String");
      // scanf("%s", s);
      gets(s);
      ln = strlen(s); // remove this line to end seg fault
      char *dyn_s = (char*) malloc (strlen(s)+1); //strlen(s) is used here as well but doesn't change outcome
      dyn_s = s;
      dyn_s[strlen(s)] = '\0';
      puts(dyn_s);
      return 0;
    } 
```

最好的：

```
#include <stdio.h>
#define BUF_SIZE 80

int 
main(int argc, char *argv[])
{
      char s[BUF_SIZE];
      int ln;
      puts("Enter String");
      fgets(s, BUF_SIZE, stdin); // Use fgets (our "cin"): NEVER "gets()"

      int ln = strlen(s); 
      char *dyn_s = (char*) malloc (ln+1);
      strcpy (dyn_s, s);
      puts(dyn_s);
      return 0;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:42:14.427

你`scanf("%s", s);`的被注释掉了。这意味着 s 未初始化，因此当此行`ln = strlen(s);`执行时，您会遇到段错误。

它总是有助于将指针初始化为 NULL，然后在使用指针之前测试 null。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T08:49:09.190

甚至更好

```
#include <stdio.h>
int
main(void)
{
  char *line = NULL;
  size_t count;
  char *dup_line;

  getline(&line,&count, stdin);
  dup_line=strdup(line);

  puts(dup_line);

  free(dup_line);
  free(line);

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T18:37:47.363

```
char *s  does not have some memory allocated . You need to allocate it manually in your case . You can do it as follows
s = (char *)malloc(100) ; 
```

这不会导致分段错误错误，因为您将不再引用未知位置

# blackberry-webworks - 通过 HTML5 读取 Playbook 上的本地二进制文件

> ID：10668506
> 
> 赞同：0
> 
> 时间：2012-05-19T20:09:18.390
> 
> 标签：blackberry-webworks, playbook

我正在为 HTML5 中的 Blackberry Playbook 制作 MP3 播放器，我需要知道如何在不使用标签的情况下读取本地二进制文件（如在 XHR 中）。

有什么办法吗？对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T18:43:07.177

它会是这样的：

```
blackberry.io.file.readFile("/path/to/MP3File",
          function(fullPath,blobData){

                doSomethingWithMP3(blobData);

          },
          {async : false}); 
```

您可以在以下位置找到有关 WebWorks API 的信息：[https ://bdsc.webapps.blackberry.com/html5/apis](https://bdsc.webapps.blackberry.com/html5/apis)

有关 readFile 函数的更多信息在这里：[https ://bdsc.webapps.blackberry.com/html5/apis/blackberry.io.file.html#.readFile](https://bdsc.webapps.blackberry.com/html5/apis/blackberry.io.file.html#.readFileahttps://bdsc.webapps.blackberry.com/html5/apis/blackberry.io.file.html#.readFile)

# c++ - send() 可以自动变为非阻塞吗？

> ID：10668508
> 
> 赞同：0
> 
> 时间：2012-05-19T20:09:55.533
> 
> 标签：c++, winsock, send

我是否必须等待带有 select() 的信号才能在非阻塞套接字中发送一些东西？如果我总是有东西要发送，然后我调用 send() 函数怎么办？我的意思是，每次我调用 send() 时，肯定会有一些固定长度的数据要发送。这是否意味着 send 不会阻塞？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:29:22.117

`send`对非阻塞套接字的调用永远不会阻塞。如果无法发送数据（例如发送缓冲区已满），`send`则将立即返回`SOCKET_ERROR`.

任何会阻塞的调用都由`WSAEWOULDBLOCK`（通过调用 `WSAGetLastError`）的错误代码发出信号。

对 的调用也是如此`receive`，如果接收缓冲区中没有数据，调用仍然会立即返回，但会报错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:41:35.167

这取决于协议。使用常规阻塞 TCP 套接字`send()`可能会阻塞，因为内核套接字缓冲区可能已满。另一方面，UDP 会将数据包向下推入堆栈，或者如果它太大则丢弃它，而不会阻塞。

### 编辑0：

好的，感谢@Cicada，我看到我错过了我们正在谈论非阻塞套接字，所以......

它仍然取决于协议 - 使用 UDP，您的数据包要么被发送，要么被丢弃；使用 TCP，您尝试在有数据时发送，如果您使用/`EWOULDBLOCK`注册您的套接字，并在内核告诉您套接字再次可写时重新尝试发送。`select()``poll()`

# http - node.js 套接字如何链接到页面，以便在连接到套接字端口时键入的文本出现在页面上？

> ID：10668519
> 
> 赞同：1
> 
> 时间：2012-05-19T20:10:49.723
> 
> 标签：http, node.js

我正在熟悉 node.js，在看到 Ryan Dahl 构建一个超级简单的聊天服务器的示例之后，我决定尝试创建一个设置，其中一个端口侦听输入的文本并将其发送到正在侦听的网页上另一个港口。我试过在[这里](http://nodejs.org/api/net.html#net_socket_connect_port_host_connectlistener)查看文档，但这让我很困惑。我已经粘贴了到目前为止我编写的代码，但我敢打赌它是偏离基础的。

```
var net = require('net');
var http = require('http');

var sockets = [];

var firstCall = true;

var webpage = http.Server(function(req, res) {
  if (firstCall) {
    res.writeHead(200);
    firstCall = false;
  }
  req.on('data', function(d) {
    res.write(d);
  }
});

var inputs = net.Server(function(socket) {
  sockets.push(socket);

  socket.on('data', function(d) {

  });

  socket.on('cl', function() {
    var i = sockets.indexOf(socket);
    sockets.splice(i,1);
  });
});

inputs.listen(8080);
webpage.listen(8000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:19:03.540

我会使用 socket.io 来做这样的事情；让生活更轻松，这是一个很好的帮助：

[https://github.com/learnboost/socket.io](https://github.com/learnboost/socket.io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:29:59.787

首先，您需要能够监听用户输入的文本。这是用 HTML 完成的。Jquery 是一种使它更容易的方法。也许你已经有了它并且没有粘贴它。

然后，通过 socket.io 发送您的消息，当服务器收到消息时，它会将其路由到所有连接的客户端。

# c++ - C++：为什么这个 sync() 不能在这个组合模式中工作？

> ID：10668522
> 
> 赞同：4
> 
> 时间：2012-05-19T20:11:09.900
> 
> 标签：c++, algorithm, composition

我正在尝试通过使用看起来像组合模式的东西来构建一个可以具有任意数量的子进度条的进度条类。

假设我有这门课`pbar`：

```
class pbar
{
    public:
        pbar(const int w) { width = w; } // already sets the
        ~pbar() {}

         void setwidth(const int w) { width = w; } // set the width to w
         void show() const;
         void sync();

         void add(const pbar bar)
         {
              // add's a subbar
              subbars.pushback(bar);
         }

     private:
         std::vector<pbar> subbars; // the sub-process progressbars
         int width;                 // onscreen width of the pbar
}; 
```

如您所见，它`pbar`有两个成员：宽度和子进度条（它们本身就是`pbars`）。我一直在尝试实现一个`sync`函数，它改变了 in 的所有宽度`pbars`以`subbars`匹配`pbar`它被调用的宽度：

```
void pbar::sync()
{
    for ( pbar bar : subbars )
    {
         bar.setwidth(width);  // first set the width of the subbar
         bar.sync();           // secondly make it sync up it's subbars
    }
} 
```

但这似乎不起作用。我试过使用这个测试程序：

```
int main()
{
    pbar a(1);
    pbar b(2);
    pbar c(3);
    pbar d(4);

    c.add(d);
    b.add(c);
    a.add(b);

    a.show();
    std::cout << "syncing" << std::endl;
    a.sync();
    a.show();
} 
```

`show`函数定义为：

```
void pbar::show() const
{
    std::cout << w << std::endl;
    for ( pbar bar : subbars )
    {
         bar.show();
    }
} 
```

预期的输出将是：

```
1
1
1
1 
```

但它是：

```
1
2
3
4 
```

奇怪的是，该`show()`函数确实正确地迭代到所有子栏，但看起来`sync()`没有（事实上，使用`cout`我已经确认 in 实际上*确实这样做*了，但它似乎没有效果）。

我的代码有什么问题？这不是`c++0x`for 循环类型的使用，因为我尝试过使用较旧的迭代器循环。我找不到我犯的错误。我认为这与我`pbar`在使用`setwidth`in时更改了错误的 s 的事实有关`sync`。

*免责声明：这实际上是一个更大项目的一部分，并且该类比此处显示的要复杂得多，但是我已经设法使用上面的代码重现了不需要的行为（顺便说一下，它不是复制粘贴的，可能包含错字）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T21:02:01.040

您遇到的问题是您在 sync() 方法的循环中使用了局部变量“bar”。那就是制作每个子栏的副本，并操纵副本而不是原始版本（保留在向量中）。这就是为什么当您稍后调用 show() 方法时没有看到更改“坚持”的原因。

您可以通过使用引用而不是常规变量来解决此问题。尝试：

```
for ( pbar &bar : subbars )
{
    ...
} 
```

您可能希望在 addSubBar() 方法中进行类似的更改，因为在将另一个副本保存到向量中之前，您还要复制传入的值。您可以通过将其参数设为引用来跳过一个副本。避免第二个副本需要更加小心处理内存（我将留给另一个问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T20:21:48.273

您应该存储指向 sub的指针`pbars`。在当前情况下，您只是存储 sub 的副本`pbars`。因此，尽管它们（内部副本）已更改，但外部对象并未被修改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T21:02:22.203

> 不是使用c++0x类型的for循环

实际上，取决于您真正想要做什么，它可能只是`for`您正在使用的基于范围的循环。

如问题中所述，`subbars`向量存储添加到其中的对象的副本-这可能是您想要的，也可能不是。让我们假设它是你想要的。您现在拥有的基于范围的 for 循环`pbar::sync()`：

```
for ( pbar bar : subbars )
{
    // ...
} 
```

迭代`subbars`向量，但`bar`在这种情况下，变量本身就是该向量中每个元素的*副本*`subbars`。因此，您对该变量所做的任何更改都会在每次循环迭代后丢失`for`。

但是，如果您`for`像这样更改基于范围的循环：

```
for ( pbar& bar : subbars ) // note the `&`
{
    // ...
} 
```

现在，`bar`是对`subbars`向量中对象的引用，对其所做的更改将“坚持”。

但是请记住，由于`subbars`包含添加到其中的对象的副本，因此这些更改不会传播到添加的原始对象。这是否是你想要的取决于你想要什么。如果您希望更改一直传播到原件，那么您需要将指针（或智能指针）存储到原件而不是副本，如[visier 的回答中所述](https://stackoverflow.com/a/10668582/12711)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T21:06:26.260

您应该存储引用`pbars`而不是实例副本。

# jquery - 如何为颜色设置动画？

> ID：10668525
> 
> 赞同：0
> 
> 时间：2012-05-19T20:12:19.223
> 
> 标签：jquery

我有 li 元素：

```
<ul>
  <li><a href="">test 1</a></li>
  <li><a href="">test 2</a></li>
</ul> 
```

我想在悬停时为颜色设置动画，新颜色来自底部。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:16:37.433

您需要使用这个[jQuery 插件](https://github.com/jquery/jquery-color)来为颜色提供 animate() 功能！

示例用法（从 gi​​thub 页面复制！）

```
<!DOCTYPE html>
<html>
<head>
  <style>
    div {
      background-color:#bada55;
      width:100px;
      border:1px solid green;
    }
  </style>
  <script src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
  <script src="jquery.color.min.js"></script>
</head>
<body>
  <button id="go">Simple</button>
  <button id="sat">Desaturate</button>
  <div id="block">Hello!</div>
  <script>
    $("#go").click(function(){
      $("#block").animate({
        backgroundColor: "#abcdef"
      }, 1500 );
    });

    $("#sat").click(function(){
      $("#block").animate({
        backgroundColor: $.Color({ saturation: 0 })
      }, 1500 );
    });
  </script>
</body>
</html> 
```

# android - 如果为ldpi、mdpi、hdpi、xhdpi提供了drawable资源，这个drawable不需要为nodpi提供吗？

> ID：10668529
> 
> 赞同：7
> 
> 时间：2012-05-19T20:12:59.617
> 
> 标签：android, resources, drawable

我是否正确理解这一点：

所有 android 设备都属于以下 4 个密度桶之一：ldpi、mdpi、hdpi、xhdpi。

因此，如果为这些密度中的每一个提供了可绘制资源（每个文件夹中都存在可绘制或具有相同名称的可绘制资源），则无需在 /res/drawable 或 / 中提供具有相同名称的可绘制资源res/drawable-nodpi。

我的理解正确吗？

那么，为什么在 /res/drawable 中提供相同的资源是有意义的唯一原因是，如果为 Android OS 定义了新的密度桶，则可以使应用程序更加面向未来？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-19T20:21:52.270

> 我的理解正确吗？

通过这一段，你或多或少是正确的。你的下一段有点“脱轨”：

> 那么，为什么在 /res/drawable 中提供相同的资源是有意义的唯一原因是，如果为 Android OS 定义了新的密度桶，则可以使应用程序更加面向未来？

并不真地。

您将资源放入`res/drawable/`本质上可扩展的资源（例如， a `ShapeDrawable`）。您将资源放入`res/drawable-nodpi/`其中，出于某种原因，您不想被缩放以匹配设备密度。

如果 Android 发明了一个新的密度桶（例如，`-uhdpi`对于 400dpi 的超高密度），如果你跳过一个密度桶，Android 可能会做它今天所做的事情：缩放你的其他版本之一。例如，如果您有`-xhdpi`或没有`-hdpi`，Android 将对`-xhdpi`图像进行下采样以在`-hdpi`设备上使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T20:28:37.413

这是正确的，只要您覆盖的所有 4 个密度桶中都有可绘制对象。一种常见的做法是在 /res/drawable 中制作一个自定义可绘制对象，它指的是您的密度跨越可绘制对象。

例如，您可能希望按钮具有不同的按下和未按下状态。首先，您将为按下和未按下的按钮包含每个密度的可绘制对象。然后您可以在 /res/drawables 中创建以下 button_black_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="false"
        android:drawable="@drawable/button_black"/>

    <item android:state_pressed="true"
        android:drawable="@drawable/button_black_selected" />

</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:22:31.410

如果为所有四种密度添加了资源，那么您不必*将*可绘制对象添加到文件夹是正确的`/res/drawable`。但是，您猜对了，如果出现新的限定符，最好在默认文件夹中包含一些内容。因此，我建议不要将 mdpi 资源放置到`/res/drawable-mdpi`文件夹中，而是放置到默认文件夹中 ( `/res/drawable/`)。对于每种资源来说，这都是一个很好的做法。

至于`/res/drawable-nodpi`文件夹，它是一个特殊的文件夹，因为它应该包含不像所有其他限定符那样自动扩展的资源。因此，您通常要么`/res/drawable-nodpi`单独使用该文件夹，要么根本不使用它。

# windows-phone-7 - Windows Phone 7 模拟器或 PC 上的设备远程管理

> ID：10668538
> 
> 赞同：0
> 
> 时间：2012-05-19T20:14:09.677
> 
> 标签：windows-phone-7, emulation

我正在寻找可以在我的 PC 屏幕上获取 Windows Phone 7 设备/模拟器以进行咨询演示的方法。

开发人员可以安装完整的 Visual Studio 2010 并运行模拟器。

但是，有非开发人员的独立版本吗？

或者，市场上是否有软件可以让您将 WP7 设备插入 PC 并在 PC 屏幕上查看屏幕？

基本上，做演示/咨询等的要求。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:27:18.383

第二个答案是正确的。当您在 MS 注册为开发人员时，您可以下载所有开发工具。SDK 附带的 Visual Studio Express 版本中包含一个模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:42:16.217

[http://www.microsoft.com/en-us/download/details.aspx?id=27570](http://www.microsoft.com/en-us/download/details.aspx?id=27570)

安装它将安装 vs express 的 sdk，但模拟器可以自行运行。您可以使用部署工具在其上获取应用程序。像邮件这样的东西不起作用，但你应该能够很好地演示应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:21:34.657

有一种软件可以让您将 WP7 插入 PC 并查看屏幕，但它仅供 Microsoft 员工使用。您可以在 XDA-Developers 上找到替代方案（像[这样](http://forum.xda-developers.com/showthread.php?t=1134698)），但它并不完美。

对于独立模拟器：

> 下载官方 SDK iso，挂载或解压，然后安装 sde_xde2-enu.msi 或 sde_xde2x64-enu.msi - 就是这样。

[http://forum.xda-developers.com/showthread.php?t=666610&page=11](http://forum.xda-developers.com/showthread.php?t=666610&page=11)

# php - 在 DOM 中的 DIV 中获取第三个 DIV

> ID：10668539
> 
> 赞同：1
> 
> 时间：2012-05-19T20:14:09.730
> 
> 标签：php, dom

我有一个爬虫，它爬取一个特定值的站点，这个值不直接位于类 div 内部，但当然有一个由类指定的父 div。这个值位于父 div 的第 3 个 div 中（如果你往下看，你会明白我的意思）。

**代码**

```
if($page->find('div.mbcContainer div div span')){       
   foreach($page->find('div.mbcContainer div div span') as $p){ 
      if(trim($p->plaintext)){                      
         $tp = $p->plaintext;
      }
   }
} 
```

**html页面**

```
<div class="mbcContainer">
   <div>
      <div class="ie1"></div>
      <div class="ie2"></div>
      <div>
         <span>get this value</span>
      </div>
   </div>
</div> 
```

我正在尝试使用值“获取此值”来获取跨度，有什么方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:26:23.460

编辑：这可以解决问题：

```
echo $page->find('div.mbcContainer div', 0)->children(2); 
```

或者，如果您想遍历：

```
foreach ($page->find('div.mbcContainer div') as $p) {
    echo $p->children(2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:42:21.330

```
div.mbcContainer div div:nth-child(3) span 
```

# objective-c - NSDateFormatter stringFromDate 不断返回 nil

> ID：10668543
> 
> 赞同：2
> 
> 时间：2012-05-19T20:15:08.400
> 
> 标签：objective-c, ios, formatting, nsdateformatter, null

我对 NSDateFormatter 有一个奇怪的问题。当然我在这里做错了，但我不知道它是什么，一定是小而愚蠢的东西......

我有一个要格式化的日期。日期是 2012-05-06 16:52:40 并且包含在 NSDate 对象中，它已正确初始化，我在调试器中检查了它。

然而，下面的代码：

```
NSLog(@"%@", [myDate description]);
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"dd-MM-yyyy";
NSString *myDateAsString = [dateFormatter stringFromDate:myDate];
NSLog(@"%@", myDateAsString); 
```

印刷：

```
2012-05-06 16:52:40
(null) 
```

我真的没有在我的代码中看到错误。有什么提示吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-19T20:30:52.303

`myDate`实际上是一个`NSString`而不是一个`NSDate`。否则，描述也将包含时区：`2012-05-06 16:52:40 +0000`.

尝试以下方法来检查：

```
NSLog(@"%@", [myDate class]); 
```

# ios - 在 iOS 上，当前的图形上下文和上下文堆栈是应用程序单例的一部分吗？

> ID：10668550
> 
> 赞同：0
> 
> 时间：2012-05-19T20:16:34.650
> 
> 标签：ios, cocoa-touch

在 iOS 上，有一个当前的图形上下文和上下文堆栈，因此我们可以将上下文推送到堆栈或从中弹出，以更改当前上下文。这是作为应用程序单例对象的一部分实现的吗？也就是说，当一个应用程序开始运行时，会有一个应用程序单例被实例化，而上下文堆栈是应用程序单例的一个属性？（或者它是如何实现的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:39:30.173

我不认为图形上下文是应用程序单例的属性。CGContextRef 是一个代表绘图环境的对象。您可以创建新的上下文，例如离线绘制，您可以在 drawRect 中获取当前上下文：方法 ob UIView 类。

# drupal - 在 drupal 7 中，views_get_view('VIEWNAME') 出现错误？

> ID：10668553
> 
> 赞同：1
> 
> 时间：2012-05-19T20:16:59.900
> 
> 标签：drupal, view

我想在 中嵌入一个视图`tpl.php`，所以我正在使用该`views_get_view('VIEWNAME')`功能。

这是我正在做的事情`tpl.php`：

```
<?php
   $view = views_get_view('MapView');  
   print $view->preview('default');
?> 
```

“ `MapView`”是视图的名称，我不确定其中的参数`views_get_view`是机器名称还是人类可读的名称，实际上在我的示例中使用的是人类可读的名称，因为我在drupal视图配置中找不到机器名称.

无论如何，我收到一条错误消息“ `Fatal error: Call to a member function preview() on a non-object`”，好像我没有正确获取视图？

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T21:02:53.777

您可以从编辑视图 url 轻松获取视图 ID。像任何键一样，它由取消划线和小写字母组成。也可以在需要的地方输出视图试试：

```
$view = views_embed_view('view_id', $display_id = 'block');
print $view; 
```

它适用于节点内容，我在模块中向所需类型的节点添加了视图：

```
function YOUR_MODULE_node_view($node, $view_mode, $langcode) {
  if($node->type=="type"){
  $view = views_embed_view('view_id', $display_id = 'block');
  $node->content['myfield'] = array(
    '#markup' => '<h3>Title</h3>'.$view, 
    '#weight' => 1,
  );

  return $node;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T11:39:01.970

一个老问题，但我遇到了同样的问题，我找不到正确的答案：你必须使用机器名，它区分大小写！您可以在“名称”字段的 views_view 表中的数据库中找到它。

# eclipse - hibernatetool：java.util.zip.ZipException：打开 zip 文件时出错

> ID：10668555
> 
> 赞同：0
> 
> 时间：2012-05-19T20:17:09.173
> 
> 标签：eclipse, spring, hibernate, maven, ant

我正在尝试运行`build-sql`ant 任务，它给了我以下内容`[hibernatetool] java.util.zip.ZipException: error in opening zip file`。正如它显示的那样，这个任务做了很多它实际上做的事情，但它没有填充它应该填充的数据库表。我认为这是因为我得到了这个错误。当我在某处读到它可能是因为`.properties`里面有一个文件`WEB-INF`时，我在项目中没有任何`.properties`文件`WEB-INF`。

```
<target name="build-sql">
    <mkdir dir="target/sql"/>
    <artifact:pom id="myPom" file="pom.xml" />
    <artifact:dependencies filesetId="pomDeps" pomRefId="myPom" useScope="compile" />
    <property name="baseTarget" location="target/${myPom.build.finalName}/WEB-INF"/>
    <fileset id="libDir" dir="${baseTarget}/lib"/>
    <path id="build.runtime.classpath">
        <restrict>
            <difference>
                <fileset refid="pomDeps" />
                <intersect>
                    <fileset refid="pomDeps" />
                    <fileset refid="libDir" />
                </intersect>
            </difference>
            <rsel:not>
                <rsel:name name="**/*.pom" />
            </rsel:not>
        </restrict>
        <fileset refid="libDir"/>
    </path>
    <taskdef name="hibernatetool" classname="org.tbs.common.util.sql.HibernateToolTask" classpathref="build.runtime.classpath" />
    <hibernatetool destDir="target/sql" combinePersistenceUnits="false" refineFileNames="true">
        <classPathApplicationContext path="tbs-open-admin-contentClient-applicationContext.xml"/>
        <classPathApplicationContext path="tbs-cms-contentClient-applicationContext.xml"/>
        <classPathApplicationContext path="headmaster-applicationContext.xml"/>
        <jpaconfiguration persistenceUnit="tbsPU" dialect="org.hibernate.dialect.MySQLDialect" />
        <jpaconfiguration persistenceUnit="tbsSecurePU" dialect="org.hibernate.dialect.MySQLDialect" />
        <jpaconfiguration persistenceUnit="tbsCMSStorage" dialect="org.hibernate.dialect.MySQLDialect" />
        <classpath refid="build.runtime.classpath" />
        <hbm2ddl export="false"/>
    </hibernatetool>
</target> 
```

以下是日志记录的错误部分：

```
[hibernatetool] java.util.zip.ZipException: error in opening zip file
[hibernatetool]     at java.util.zip.ZipFile.open(Native Method)
[hibernatetool]     at java.util.zip.ZipFile.<init>(ZipFile.java:114)
[hibernatetool]     at java.util.zip.ZipFile.<init>(ZipFile.java:131)
[hibernatetool]     at org.apache.tools.ant.AntClassLoader.getResourceURL(AntClassLoader.java:1028)
[hibernatetool]     at org.apache.tools.ant.AntClassLoader$ResourceEnumeration.findNextResource(AntClassLoader.java:147)
[hibernatetool]     at org.apache.tools.ant.AntClassLoader$ResourceEnumeration.<init>(AntClassLoader.java:109)
[hibernatetool]     at org.apache.tools.ant.AntClassLoader.findResources(AntClassLoader.java:975)
[hibernatetool]     at java.lang.ClassLoader.getResources(ClassLoader.java:996)
[hibernatetool]     at org.slf4j.LoggerFactory.singleImplementationSanityCheck(LoggerFactory.java:212)
[hibernatetool]     at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:110)
[hibernatetool]     at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:268)
[hibernatetool]     at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:241)
[hibernatetool]     at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
[hibernatetool]     at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
[hibernatetool]     at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
[hibernatetool]     at org.tbs.common.extensibility.context.StandardConfigLocations.<clinit>(StandardConfigLocations.java:29)
[hibernatetool]     at org.tbs.common.util.sql.HibernateToolTask.execute(HibernateToolTask.java:131)
[hibernatetool]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
[hibernatetool]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[hibernatetool]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[hibernatetool]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[hibernatetool]     at java.lang.reflect.Method.invoke(Method.java:597)
[hibernatetool]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[hibernatetool]     at org.apache.tools.ant.Task.perform(Task.java:348)
[hibernatetool]     at org.apache.tools.ant.Target.execute(Target.java:357)
[hibernatetool]     at org.apache.tools.ant.Target.performTasks(Target.java:385)
[hibernatetool]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
[hibernatetool]     at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
[hibernatetool]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[hibernatetool]     at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
[hibernatetool]     at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
[hibernatetool]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:423)
[hibernatetool]     at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:137) 
```

我只是无法理解这背后的原因。

此外，有时当我尝试调整`mvn install`我的项目时，我也会得到以下信息`pom.xml`。我正在使用 Eclipse Java EE IDE Helios。

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project natura: Compilation failure
[ERROR] error: error reading C:\Users\lawson\.m2\repository\org\apache\xmlgraphics\batik-util\1.7\batik-util-1.7.jar; cannot read zip file entry 
```

我不确定它们是否相关，但它们似乎已经让我发疯了，因为我无法弄清楚为什么会出现这些错误。

有人可以帮助了解我在这里缺少什么来解决这些问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:02:03.280

删除 repo 中的文件夹，maven 将再次下载它。

```
C:\Users\lawson\.m2\repository\org\apache\xmlgraphics\batik-util\ 
```

# android - 使用图形效果禁用 ListView 中的项目

> ID：10668556
> 
> 赞同：0
> 
> 时间：2012-05-19T20:17:25.047
> 
> 标签：android

我想禁用`ListView`.

首先，我尝试使用`isEnabled()`我的`ArrayAdapter`.
但是这种方法用于区分分隔符和普通列表视图项。

所以我尝试通过在my的方法中设置`OnClickListener`and`OnLongClickListener`来禁用我的项目。 这有效，但对禁用的项目没有图形效果。`NULL``getView()``ArrayAdapter`

我必须自己设置图形效果还是有更好的方法来禁用 a 中的项目`ListView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:27:51.373

好的，我找到了我的问题的解决方案：列表项被布局禁用。只需将`android:clickable="true"`（是的，`true`正确的）添加到布局的根节点即可。要为列表项的元素（例如 TextViews）添加图形效果，只需添加`android:enabled="false"`它们即可。最后，您必须在列表视图适配器中扩展此“禁用”布局。就这样 ：-）

# c# - C#中的局部易失变量

> ID：10668565
> 
> 赞同：1
> 
> 时间：2012-05-19T20:19:28.913
> 
> 标签：c#, .net, for-loop, parallel-processing

在我的 C# 程序中，我有方法代码：

```
Object model;
int score;
for()
{
    int tempScore=0;
    Object tempModel=getModel();
    //some interesting stuff modifying value of tempScore
    if(tempScore>score)
    {
        score=tempScore;
        model=tempModel;
    }
} 
```

我想使用 Parallel 进行正常的 insted，但我担心我会遇到一些同步问题。我知道我可以使用 lock(model)，但是对于简单类型分数我能做些什么呢？model 和 score 是方法局部变量，因此它们在线程之间共享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:25:37.187

如果你用`lock (model)`了，并不代表其他线程就不能访问了`model`。这意味着两个线程将无法同时执行受保护的部分`lock (model)`。因此，您也可以使用类似的东西`lock (model)`来保护访问`score`。

**但这**在这种情况下是行不通的。`lock`不锁定变量，它锁定对象，然后您修改`model`循环中引用的对象。因此，我认为最好的选择是创建另一个对象并锁定它：

```
object model;
int score;
object modelLock = new object();

Parallel.For(…, (…) =>
{
    int tempScore=0;
    Object tempModel=getModel();
    //some interesting stuff modifying value of tempScore
    lock (modelLock)
    {
        if(tempScore > score)
        {
            score=tempScore;
            model=tempModel;
        }
    }
}); 
```

如果您发现这对于您的需求来说太慢了（因为 using`lock`确实有一些开销，这对您来说可能很重要），您应该考虑使用类似[`Thread.VolatileRead()`](http://msdn.microsoft.com/en-us/library/system.threading.thread.volatileread)or的东西[`Interlocked.CompareExchange()`](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.compareexchange)。但是要非常小心它们，因为很容易让你的代码出现微妙的错误。

# c - C 中 fork() 和 execvp() 的奇怪行为

> ID：10668571
> 
> 赞同：0
> 
> 时间：2012-05-19T20:20:30.793
> 
> 标签：c, shell, exec, fork

在我之前的帖子中发表了一些评论后，我做了以下修改：

```
int main()
{
char errorStr[BUFF3];
 while (1)
 {

     int i , errorFile;

     char *line = malloc(BUFFER);
     char *origLine = line;
     fgets(line, 128, stdin);   // get a line from stdin

     // get complete diagnostics on the given string
     lineData info = runDiagnostics(line);

     char command[20];
     sscanf(line, "%20s ", command);
     line = strchr(line, ' ');          // here I remove the command from the line , the command is stored in "commmand" above

     printf("The Command is: %s\n", command);

     int currentCount = 0;                  // number of elements in the line
     int *argumentsCount = &currentCount;   // pointer to that

     // get the elements separated
     char** arguments = separateLineGetElements(line,argumentsCount);

     printf("\nOutput after separating the given line from the user\n");
     for (i = 0; i < *argumentsCount; i++) {
         printf("Argument %i is: %s\n", i, arguments[i]);
     }

     // here we call a method that would execute the commands
     pid_t pid ;

     if (-1 == (pid = fork()))
     {
        sprintf(errorStr,"fork: %s\n",strerror(errno));
        write(errorFile,errorStr,strlen(errorStr + 1));
        perror("fork");
        exit(1);
     }
     else if (pid == 0)  // fork was successful
     {
        printf("\nIn son process\n");

        // if (execvp(arguments[0],arguments)  < 0)       // for the moment I ignore this line
        if (execvp(command,arguments)  < 0)       // execute the command
        {
            perror("execvp");
            printf("ERROR: execvp failed\n");
            exit(1);
        }
     }
     else // parent
     {
        int status = 0;
        pid = wait(&status);
        printf("Process %d returned with status %d.", pid, status);
     }

     // print each element of the line
     for (i = 0; i < *argumentsCount; i++) {
         printf("Argument %i is: %s\n", i, arguments[i]);
     }

     // free all the elements from the memory
     for (i = 0; i < *argumentsCount; i++) {
         free(arguments[i]);
     }

     free(arguments);
     free(origLine);
 }

 return 0;
} 
```

当我进入控制台时： ls > out.txt

我得到：

```
The Command is: ls
execvp: No such file or directory
In son process
ERROR: execvp failed
Process 4047 returned with status 256.Argument 0 is: >
Argument 1 is: out.txt 
```

所以我猜这个子进程是活跃的，但由于某种原因`execvp`失败了。

为什么 ？

问候

**评论 ：**

该`ls`命令只是一个示例。我需要使它适用于任何给定的命令。

**编辑 1：**

用户输入：`ls > qq.out` 程序输出：

```
The Command is: ls

Output after separating the given line from the user
Argument 0 is: >
Argument 1 is: qq.out

In son process
>: cannot access qq.out: No such file or directory
Process 4885 returned with status 512.Argument 0 is: >
Argument 1 is: qq.out 
```

# opencv - 在 JavaCV 或 OPENCV 中查找轮廓

> ID：10668573
> 
> 赞同：4
> 
> 时间：2012-05-19T20:20:53.180
> 
> 标签：opencv, find, contour, javacv

我有问题，但我不知道是什么！我有下一个代码，当我调试它时，调试器在

```
IplImage iplGray = cvCreateImage(cvGetSize(iplUltima), 8, 1 );
CvMemStorage g_storage = null;
CvSeq contours = new CvSeq(iplGray);

opencv_imgproc.cvCvtColor(iplUltima, iplGray, opencv_imgproc.CV_BGR2GRAY);
opencv_imgproc.cvThreshold(iplGray, iplGray, 100, 255, opencv_imgproc.CV_THRESH_BINARY);

//HERE, the next line:
opencv_imgproc.cvFindContours(iplGray, g_storage, contours, CV_C, CV_C, CV_C);
cvZero(iplGray);
if(contours != null){
    opencv_core.cvDrawContours(iplGray, contours, CvScalar.ONE, CvScalar.ONE, CV_C, CV_C, CV_C);             
}
cvShowImage( "Contours", iplGray ); 
```

我认为它与 CvSeq contours = new CvSeq(iplGray); 但我不明白为什么。有什么有用的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T08:03:40.610

对于轮廓检测，我使用了这种方法。它执行得很好。

```
public static IplImage detectObjects(IplImage srcImage){

    IplImage resultImage = cvCloneImage(srcImage);

    CvMemStorage mem = CvMemStorage.create();
    CvSeq contours = new CvSeq();
    CvSeq ptr = new CvSeq();

    cvFindContours(srcImage, mem, contours, Loader.sizeof(CvContour.class) , CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));

    CvRect boundbox;

    for (ptr = contours; ptr != null; ptr = ptr.h_next()) {
        boundbox = cvBoundingRect(ptr, 0);

            cvRectangle( resultImage , cvPoint( boundbox.x(), boundbox.y() ), 
                cvPoint( boundbox.x() + boundbox.width(), boundbox.y() + boundbox.height()),
                cvScalar( 0, 255, 0, 0 ), 1, 0, 0 );
    }

    return resultImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T08:24:46.493

这里的默认示例和另一个答案使用类似于旧 OpenCV 1.x C API 的语法（以 cv* 为前缀的函数和类）。

OpenCV 在 OpenCV 2.x 中引入了更新的 C++ API，它更加简单易懂。JavaCV 在其最新版本中也添加了这种语法。

对于想要使用更新语法（类似于 OpenCV C++ API）的人，这里是用于轮廓检测的 JavaCV 片段 - （使用 JavaCV 1.3.2）

```
Mat img = imread("/path/to/image.jpg",CV_LOAD_IMAGE_GRAYSCALE);

MatVector result = new MatVector(); // MatVector is a JavaCV list of Mats

findContours(img, result, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE);

// The contours are now available in "result"

// You can access them using result.get(index), check the docs linked below for more info 
```

[MatVector 文档](http://bytedeco.org/javacpp-presets/opencv/apidocs/index.html?org/bytedeco/javacpp/opencv_core.MatVector.html)

# internationalization - ICU 的整理者假设“a”和“±”是相同的

> ID：10668574
> 
> 赞同：3
> 
> 时间：2012-05-19T20:21:00.623
> 
> 标签：internationalization, collation, icu

我正在使用带有立陶宛语 ( `lt_LT`) 语言的 ICU。该语言的字母表如下：`a ą b c č d e ę ė <...> v z ž`

但是，在排序时，ICU 的整理者假设，例如，`a`和`ą`( `a`with ogonek) 是等价的，因此立陶宛语单词列表被排序如下：

```
a, ą, ab, aba, abadas, <...>, b, ba, <...>` 
```

当预期的结果是：

```
a, ab, aba, abadas, <...>, ą, <...>, b, ba, <...> 
```

其他“重音”字母（`e`- `ę`- `ė`，`z`-`ž`等）也会发生同样的情况

更具体的测试用例：运行`source/samples/coll/coll -locale lt_LT -source ą -target aa`决定`source is less than target`何时不是这种情况（如果需要，请参阅[coll.cpp ）。](https://github.com/ctapmex/icu-c/blob/master/source/samples/coll/coll.cpp)

这种行为是预期的吗？这是错误还是功能？如果是这样，我怎样才能防止 ICU 的校对者将“相似”的字母对齐在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:55:42.687

这些字母被列为 CLDR 剪裁中的次要差异，因此它们将[像这样](http://demo.icu-project.org/icu-bin/locexp?_=lt&d_=en&x=col&str=a%0Daba%0Dba%0D%5Cu0105%0Dabadas%0Db%0Dab)排序。如果这是错误的，请将其提交给[CLDR](http://cldr.unicode.org)，而不是 ICU 问题。 [米默](http://developer.mimer.com/charts/lithuanian.htm)同意。

# c++ - 超时 fwrite 调用以防止其阻塞

> ID：10668575
> 
> 赞同：4
> 
> 时间：2012-05-19T20:21:04.100
> 
> 标签：c++, c, blocking, fwrite

有没有一种方法可以防止 fwrite 阻塞，比如使用超时？

场景是这样的：我需要在网络上进行 fwrite 调用（因为我主要重用代码，所以我需要坚持下去）。但是，如果我拔掉网线，fwrite 会阻塞。有解决方法吗？任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:49:40.800

将底层文件描述符切换到非阻塞模式：

```
int fd = fdnum(stream);
int f = fcntl(fd, F_GETFL, 0);
f |= O_NONBLOCK;
fcntl(fd, F_SETFL, f); 
```

在此之后，如果文件描述符尚未准备好写入，则调用`fwrite()`将立即返回并设置为 EAGAIN。`errno`在循环中调用它并使用 sleeps，您可以轻松实现所需的任何超时行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T21:27:37.033

这应该与@Alexander Bakulin 的建议具有相同的效果，但要短一些。

```
int fd = fdnum(stream);
int ioctl( fd, FIONBIO, 1 ); 
```

参考： http: [//oss.org.cn/ossdocs/gnu/linux/syscalls_17.html](http://oss.org.cn/ossdocs/gnu/linux/syscalls_17.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T20:39:31.347

您可以设置一个信号处理程序并使用`alarm()`系统调用来安排该信号的传递，这将中断`fwrite()`调用。典型用法如下所示：

```
signal(SIGALRM, handle_sigalrm);
received_alarm = 0;
alarm(10);
...some blocking operation...
alarm(0); // cancel the alarm.
if (received_alarm) {
  // command timed out
} else {
  // command completed successfully
} 
```

这假定这是一个在调用时设置全局变量`handle_sigalrm()`的函数。[谷歌](http://encrypted.google.com/search?q=sigalarm+timeout)有一些例子。`received_alarm`

这绝对不是处理此问题的最佳方法，但如果您被迫使用`fwrite()`. 更好的解决方案是使用`select()`or`poll()`循环和非阻塞套接字，但这可能需要对代码进行大量重新设计。

# ruby-on-rails - Ruby On Rails：创建停止工作但更新仍然有效

> ID：10668577
> 
> 赞同：0
> 
> 时间：2012-05-19T20:21:10.950
> 
> 标签：ruby-on-rails, admin

我最近在我的页面中添加了一个管理员用户，现在我的“创建”功能不再有效，但我的“编辑”功能仍然有效。当我尝试创建新项目时，我没有收到任何错误。

**application_controller.rb：**

```
class ApplicationController < ActionController::Base
  protect_from_forgery

before_filter :is_admin, only: [:new,  :create, :edit, :update, :delete, :destroy, :admin]

helper_method :admin?

protected

  def admin?
  session[:password] == 'pass'
  end

def authorize
  unless admin?
    flash[:error] = "unauthorized access"
    redirect_to root_path
    false
  end
 end

def is_admin
      redirect_to root_path, notice: "You are not authorized for that." unless admin?
    end

end 
```

如果我取出 before_filter，它仍然不起作用。

**members_controller.rb**

```
 def new
    @member = Member.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @member }
    end
  end

  def edit
    @member = Member.find(params[:id])
  end

  def create
    @member = Member.new(params[:member])

    respond_to do |format|
      if @member.save
        format.html { redirect_to @member, notice: 'Member was successfully created.' }
        format.json { render json: @member, status: :created, location: @member }
      else
        format.html { render action: "new" }
        format.json { render json: @member.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @member = Member.find(params[:id])

    respond_to do |format|
      if @member.update_attributes(params[:member])
        format.html { redirect_to @member, notice: 'Member was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @member.errors, status: :unprocessable_entity }
      end
    end
  end 
```

在我的**routes.rb** 我有`resources :members`

有什么想法为什么我的创作突然退出了我，但所有其他功能仍在工作？我所有的页面都是这样的，而不仅仅是“会员”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:37:58.187

你能展示你的`is_admin`功能吗？可能是返回`false`或`nil`创建成员等`true`。当您更新成员时。

PS 不要用`is_admin`Ruby 中的名称创建方法。最好叫它`admin?`;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:07:37.893

我通过将我的 routes.rb 文件中的所有资源在其他所有内容之前移动到文件顶部来解决了这个问题。我不完全确定为什么会出现这个问题，但现在一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:05:54.097

啊 - 在 irb 中试试这个：

```
> "123" unless true
=> nil 
```

看，当用户是管理员时，它返回 nil，它被解释为 false，并且过滤器停止进一步执行。你需要它来做这样的事情：

```
def is_admin
  admin? || redirect_to(root_path, notice: "You are not authorized for that.")
end 
```

# cocoa - 通过弹出窗口启用对辅助设备的访问

> ID：10668578
> 
> 赞同：1
> 
> 时间：2012-05-19T20:21:19.200
> 
> 标签：cocoa, accessibility-api

有没有办法通过直接在弹出窗口中的按钮要求在弹出窗口（类似 NSAlert）中启用对辅助设备的访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:30:23.997

不，用户必须打开系统偏好设置才能启用此功能。

您可以提供一个按钮来导航到正确的系统偏好页面：

```
[[NSWorkspace sharedWorkspace] openFile:@"/System/Library/PreferencePanes/UniversalAccessPref.prefPane"]; 
```

# java - 哪些类对象是原始类型数组？

> ID：10668580
> 
> 赞同：3
> 
> 时间：2012-05-19T20:21:22.943
> 
> 标签：java, arrays

> **可能重复：**
> [为什么没有 java.lang.Array 类？如果一个java数组是一个对象，它不应该扩展对象吗？](https://stackoverflow.com/questions/8546500/why-isnt-there-a-java-lang-array-class-if-a-java-array-is-an-object-shouldnt)

我创建了一个数组说：

```
int a[] = new int[50]; 
```

这里，`int`是一种**原始**数据类型，但在**java**中， *数组*是在运行时创建的，这意味着会有某个类的**对象**。
那么，我想知道它们是哪个类**对象以及在制作****数组**对象时会发生什么后台过程？

还有一件事我想知道，如果我想打印该数组的参考 ID：

```
System.out.println(a); 
```

那么输出是某种在`[I@17182c1`
这里我知道**@**之前的字符串是类名，**@**之后是哈希码。但是哪个类`[I`？
如何`[I`创建类以及从哪里获得`length`返回数组长度的变量？我没有`[I`在Java的整个*API*中找到类，那么如果我写为什么编译器不显示错误：

```
System.out.println(a.length); 
```

因为该类`[I`将在运行时创建？

# web-applications - 您如何制作移动网络应用程序？

> ID：10668584
> 
> 赞同：0
> 
> 时间：2012-05-19T20:22:02.993
> 
> 标签：web-applications, mobile-website, mobile-application

我最近一直在使用 phonegap 制作一个网络应用程序。以前从未这样做过，我严格按照说明从 iOS 开始并在 XCode 中进行编码。这为我建立了一个不错的大项目，其中包含一大堆我不知道的东西已经处理好了。我可以随心所欲地写内容，而不必担心引擎盖下的内容。

但现在我很好奇。我知道我正在编写的代码正在由 iOS 的移动浏览器呈现。人们如何在没有 PhoneGap 和 XCode 为他们设置整个项目的情况下制作 web 应用程序？您如何制作可以在任何移动设备上作为下载应用程序打开的标准网络应用程序（无需连接到设备的地理定位传感器等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:10:08.713

您可以让下载的应用程序的行为类似于网络浏览器的启动器，然后在运行时打开您的网络应用程序。您必须使用标准的 Web 开发技术来开发 Web 应用程序本身。

在 Android 上，这个启动器应用程序将用 Java 编码（最常见），而在 iOS 上，我相信它是 Objective-C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T15:41:52.213

when you say "downloaded app" it sounds like you mean "URL Shortcut to my HTML 5 page" which pretty much any smartphone can do.

so by making any website that follows the >> [HTML5 standards](http://www.w3.org/TR/2010/REC-xhtml-basic-20101123/) << you have a mobile web app.

for example, click the link below which points to the Sencha Touch 2 carousel sample

[http://dev.sencha.com/deploy/touch/examples/production/carousel/index.html](http://dev.sencha.com/deploy/touch/examples/production/carousel/index.html)

(Use your mouse like a finger to slide around the images etc.)

There isn't a way to add an "app button" link to your mobile site using a link because that would be too much power for a webpage to mess up people's device home screen simply by clicking a link.

The best you can do is educate your users on how they can add your "app" using the native iOS functionality...

### First click this button on any webpage you navigate to

[![step 1](../Images/e8885a4236c0dbb142a9251c1781286d.png)](https://i.stack.imgur.com/Exuiq.jpg)

### Then click Add to Home Screen button

[![step 2](../Images/1a5b46c7fc9e35a88baba0bb5c689ad7.png)](https://i.stack.imgur.com/ldCTt.jpg)

# python - 如何在 django ORM 中获取最大值

> ID：10668585
> 
> 赞同：11
> 
> 时间：2012-05-19T20:22:31.280
> 
> 标签：python, django, django-models

```
>>> AuthorizedEmail.objects.filter(group=group).values('added')
[{'added': datetime.datetime(2012, 5, 19, 13, 8, 7)}, 
{'added': datetime.datetime(2012, 5, 19, 13, 8, 7)}, 
{'added': datetime.datetime(2012, 5, 19, 13, 7, 23)}, 
{'added': datetime.datetime(2012, 5, 19, 13, 8, 7)}] 
```

在这里获得最大值的最佳方法是什么？在 python 中还是在 ORM 中？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-19T20:23:34.710

从[文档](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)中：

```
>>> from django.db.models import Max
>>> AuthorizedEmail.objects.aggregate(Max('added')) 
```

并获取模板中的值：

```
{{ item.added__max }} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-13T20:51:09.530

`latest`根据`added`日期返回表中最新的对象：

```
AuthorizedEmail.objects.filter(group=group).latest('added') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-19T22:18:51.097

```
AuthorizedEmail.objects.filter(group=group).order_by('-added')[0] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T09:45:51.897

[https://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)

[https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#cheat-sheet)

# sql-server - 从存储过程性能传递多个表

> ID：10668588
> 
> 赞同：0
> 
> 时间：2012-05-19T20:22:57.093
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sql-server-performance

如果我们从存储过程中提取多个表而不是每个表中的过程，它将如何影响 Sql Server 的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:27:02.037

就数据库引擎本身及其负载而言，差别不大。

在网络 IO 方面，通常做一个大查询比做几个小查询要好，因为每个连接都需要一些时间来建立。

一般来说 - 如果数据库和应用程序的性能很重要，则需要一批而不是几批获取您需要的所有数据。

# javascript - 为什么我不应该在循环中创建函数？

> ID：10668589
> 
> 赞同：0
> 
> 时间：2012-05-19T20:22:58.463
> 
> 标签：javascript

Jshint.com 建议以下代码：

```
Line 150: }, false );

Don't make functions within a loop. 
```

但是，它使我不必多次编写 document.getElementById() ，而是可以将 id 保存在一个数组中并循环遍历它们。

我觉得更简洁和可维护的代码。

```
function styleTwitter( pair_array )
{
    var i, input, label;
    for ( i = 0; i < pair_array.length; i+=2 ) 
    {
        input = document.getElementById( pair_array[ i ] );
        label = document.getElementById( pair_array[ i + 1 ] );

        input.addEventListener( "focus", function()
        { 
            if( input.value === '' )
            {
                label.style.opacity = 0; 
                input.style.border = '1px solid #888888'; 
            }
        }, false );

        input.addEventListener( "blur", function()
        {
            if( input.value === '' )
            {
                label.style.opacity = 1;
                new EffectsFont( label ).fade( 'up', 150 );
                input.style.border = '1px solid #dddddd'; 
            }

        }, false );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:26:13.373

您是否尝试过创建一个可以分析事件源并执行相同操作的函数？它既更容易掌握（阅读：更易于维护），也不会占用内存（闭包捕获整个堆栈，因此它永远不会便宜）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:29:41.737

当您执行诸如 getElementById() 查找之类的 DOM 操作时，它们的成本很高并且会降低页面速度。当您以编程方式在循环中应用不透明度等样式更改时，这些更改也很昂贵，因为浏览器每次都必须重新绘制屏幕。

现在，如果您有一个应用这些更改的 CSS 类，您可以在一次操作中应用所有更改，并节省数百次浏览器重绘操作。这就是为什么人们应该避免循环 UI 更新的主要原因。

但是，这取决于您正在执行多少循环。如果它没有减慢速度并且这是您唯一的循环，请不要担心。对于更高性能的应用程序来说，它更受关注。

PS 请记住，当向这样的元素添加事件侦听器时，如果稍后从 DOM 中删除该元素，您也将它们删除，我们将有内存泄漏。

# java - 杰克逊 2.0 和泽西 1.12

> ID：10668597
> 
> 赞同：4
> 
> 时间：2012-05-19T20:23:59.967
> 
> 标签：java, jersey, jackson

有没有人设法将 Jackson 2.0 与 Jersey 1.12 一起使用。知道会很有趣。我们必须到处使用jackson 1.9.x，因为jersey 有jackson 如此强耦合。从我所见，即使是球衣 2.0M3 仍在使用杰克逊 1.9.2。因此，似乎没有必要等待球衣队在不久的将来这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T04:41:49.467

自定义提供程序有效；和“官方”Jackson 2.0 [JSON 提供程序项目](https://github.com/FasterXML/jackson-jaxrs-json-provider)也是如此，具有更多功能（能够`@JsonView`在资源方法上使用注释和其他一些功能）。

这是 JAX-RS 的优点之一：一切都是模块化的，添加新的改进提供程序非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:12:13.017

我的项目中有 Jackson 2.0 和 Jersey 1.12。我对此没有任何问题，但可能的原因是我有自定义 Provider 和一些额外的 ObjectMapper 设置。简化版：

```
import javax.ws.rs.ext.ContextResolver;
import javax.ws.rs.ext.Provider;

import com.fasterxml.jackson.databind.ObjectMapper;

@Provider
public class ObjectMapperProvider implements ContextResolver<ObjectMapper> {

    private final ObjectMapper defaultObjectMapper;

    public ObjectMapperProvider() {
        defaultObjectMapper = new ObjectMapper();
    }

    @Override
    public ObjectMapper getContext(Class<?> type) {
        return defaultObjectMapper;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T20:51:39.623

如果您尝试将 JsonView 与 Jersey 一起使用，如果您在此处使用方法 2.2，则必须使用 org.codehaus.jackson.map.annotate.JsonView：[http ://wiki.fasterxml.com/JacksonFAQJaxRs](http://wiki.fasterxml.com/JacksonFAQJaxRs)

如果要使用com.fasterxml中的JsonView，则必须在该页面上使用通用方法（1）。

# sorting - 快速排序图 Log-Log？

> ID：10668598
> 
> 赞同：0
> 
> 时间：2012-05-19T20:24:29.340
> 
> 标签：sorting, graph, quicksort

我已经实现了一个快速排序算法，并在 Java 中使用 System.nanoTime() 对其进行了测试。我已经绘制了一个带有结果的对数图表。

你认为这个图表是正确的吗？根据维基百科的快速排序算法是 nlogn，我担心的是我的图表有点不同。

[http://imghero.com/USERIMAGES/IMAGE/0cf83192-4733-467a-82c5-06069930250e.png](http://imghero.com/USERIMAGES/IMAGE/0cf83192-4733-467a-82c5-06069930250e.png)

谢谢

# c# - 如何发送月份的日期范围

> ID：10668599
> 
> 赞同：1
> 
> 时间：2012-05-19T20:24:35.270
> 
> 标签：c#, asp.net

我必须将当月的第一天作为开始日期发送，并将当天作为结束日期发送。我知道今天很热，但我不确定开始日期。

```
endDate = DateTime.Today.ToShortDateString(); 
```

但是我如何格式化开始日期以使其返回该月的第一天？

```
startdate = ?? 
```

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T20:28:52.897

`DateTime`从当前日期的年月创建一个新实例：

```
// Get currect date in a variable, to avoid repeated calls (as DateTime.Now changes)
DateTime today = DateTime.Today;

string startDate = new DateTime(today.Year, today.Month, 1).ToShortDateString();
string endDate = today.ToShortDateString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:28:16.137

`DateTime`只需新建一个使用`endDate`年份和月份值的实例，当天使用 1：

```
var startDate = new DateTime(endDate.Year, endDate.Month, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:28:14.260

startdate = endDate.AddDays(endDate.Day * -1 + 1);

# objective-c - 从 iPhone 导出 CoreData 并在 Mac 上查看？

> ID：10668602
> 
> 赞同：0
> 
> 时间：2012-05-19T20:24:50.663
> 
> 标签：objective-c, ios, xcode

我正在创建一个 iPhone 应用程序，它依赖于将用户拍摄的照片存储到 CoreData 中。我想知道 1）有没有办法将 CoreData 从我的 iPhone 导出到我的电脑（所以我可以备份它） 2）有没有办法查看（并可能编辑）包含所有照片的 CoreData在我的 Mac 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:29:26.390

您可以使用以下程序像浏览任何磁盘一样浏览 iPhone 的内容：

[http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:28:31.370

你可以试试这个，也许它是你想要的。 [https://github.com/fpillet/NSLogger](https://github.com/fpillet/NSLogger)

# jquery - jQuery 如何防止显示 HTML 元素标题，即使它的标签中有 title 属性？

> ID：10668603
> 
> 赞同：2
> 
> 时间：2012-05-19T20:25:49.977
> 
> 标签：jquery, attributes, title

我有一个类似下面的链接，我想防止在鼠标悬停事件时显示它的标题属性。但我必须保留它，我不能删除它。

```
<a href="" title="This is a test">Test</a> 
```

我如何使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:39:46.627

很多次之后，无意中找到了一个可以解决问题的链接。所以我决定把它放在这里......
感谢它的作者

[http://jsfiddle.net/vkDcG/](http://jsfiddle.net/vkDcG/)

**HTML**：

```
<a class="fancybox" caption="This is 1st title" href="http://fancyapps.com/fancybox/demo/1_b.jpg"><img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/></a>

<a class="fancybox" caption="This is 2nd title" href="http://fancyapps.com/fancybox/demo/2_b.jpg"><img src="http://fancyapps.com/fancybox/demo/2_s.jpg" alt=""/></a> 
```

**jQuery：**

```
$(".fancybox")
    .attr('rel', 'gallery')
    .fancybox({
        beforeLoad: function() {
            this.title = $(this.element).attr('caption');
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:32:59.633

Stack Overflow 上有一些 hack（禁用工具提示，抑制工具提示）。我认为这是最干净的，它不需要 jQuery：

[https://stackoverflow.com/a/457382/1325290](https://stackoverflow.com/a/457382/1325290)

```
// Suppress tooltip display for links that have the classname 'suppress'
var links = document.getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    if (links[i].className == 'suppress') {
        links[i]._title = links[i].title;
        links[i].onmouseover = function() { 
            this.title = '';
        }
        links[i].onmouseout = function() { 
            this.title = this._title;
        }
    }
} 
```

如果您不想要它，请忽略 if...suppress 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:33:27.880

我唯一的想法是防止鼠标悬停事件表单被触发。可能这个解决方案会起作用：

```
$("a[title='Titlte is a test']").mouseover(function(e) {
    e.preventDefault();
}); 
```

如果这对您没有帮助，那么您可以使用一些不透明元素放置在您的元素上来破解它 - 这实际上会做同样的事情 - mouseover eventet 不会被触发。注意：你应该在链接上触发点击事件，当它被不透明元素捕获时：

```
$("Opacity element id").click(function(e) {
    $("a[title='Titlte is a test']").click()
}); 
```

如果使用了 mousedown/up 事件，它们也类似

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T20:36:42.300

该技术是在 mouseove 上隐藏标题并在 mouseout 时恢复。

```
$("a#test").mouseover( function(e){

    var myLink = $('a#test');

    myLink.hover(
        function() {  
            old_title = $(this).attr('title');      
            $(this).attr('title',''); 
        },
        function() {  
            $(this).attr('title', old_title);  
        }  
    );  
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T16:20:48.560

这是我使用现代 jQuery 的解决方案：

```
jQuery(document.body)
  .on('mouseover', 'a[title]', null, function(event) {
    $(this).attr('data-title', $(this).attr('title')).removeAttr('title');
  })
  .on('mouseout', 'a[data-title]', null, function(event) {
    $(this).attr('title', $(this).attr('data-title')).removeAttr('data-title');
  }); 
```

这会处理页面上所有现有和未来的 a-tags，并导致非常小的内存开销，因为它只为所有元素创建一对事件处理程序 - 在悬停时，它将值从`title`属性移动到`data-title`属性，当鼠标离开元素时，它会再次删除它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-13T10:40:00.300

对我来说，我不在乎标题标签的内容是什么，所以这对我来说更干净。我已经做了：

```
$('a').hover(function() {

    $(this).attr('title', '');

}); 
```

这阻止了标题标签的显示。

# algorithm - 通过改变方块的高度找到从源到目的地的最小路径

> ID：10668605
> 
> 赞同：3
> 
> 时间：2012-05-19T20:26:21.633
> 
> 标签：algorithm, path, shortest-path

我们有 NXM 网格。网格的一个正方形是源，一个是目标。包括源和目标的每个网格正方形都有一些高度（值 0-9 的整数）。**我们必须找到一条**满足以下限制的从源到目的地的最低成本路径：

1.  路径必须是连续的，即仅在相邻方格之间（不是对角邻接）。
2.  一个人只能从高海拔到低海拔。

任何正方形的标高都可以增加或减少。海拔变化量计为成本。如果海拔没有变化，则视为**零**成本。因此，从源到目的地的路径总成本是路径中方格高度的变化。此外**，源的海拔不能改变，但目的地的海拔可以**。

我尝试应用一些算法，如 Djikstra 和 APSP，但无法找到任何解决方案。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:21:47.920

实际上你可能会认为目标方格的标高也不能改变，因为不需要抬高它。

现在，在经典的 Dijkstra(-like) 算法中，您会说网格的每个方格都有一个*价格*，您可以达到这个方格。也就是说，您的源方格的*价格*=0，然后在一个循环中，您选择下一个*最便宜*的方格并尝试从它移动到价格更大的所有相邻方格。

在你的问题中，你有一个额外的自由度：你的广场的海拔高度。也就是说，当你移动到一个正方形时，你可以改变它的高度。

最直接的“蛮力”解决方案如下：

1.  检查所有单元格，建立一组它们的海拔高度（即所有高度的频谱）。假设你有**H**个不同的高度。
2.  将正方形的状态定义为其位置**和**高度。根据 Dijkstra 图定义您的问题。
3.  对于每个正方形，在图形中添加一个表示其实际高程的顶点。然后添加额外的顶点，以更大的高度表示它（除了源和目标方块）。这样每个正方形最多有**H**个顶点。
4.  *将每个顶点的内部价格*定义为高于其实际位置的高度。因此，对于每个正方形，您都有一个*内部价格*=0（实际高程）的顶点，加上代表具有适当*内部价格*的高架位置的顶点数。
5.  **通过有向**边表示相邻正方形的连接顶点。仅当源顶点具有至少目标顶点的高程时才放置边。

然后通过 Dijkstra（或 A*）算法找到最短路径。移动的*成本*被认为是目标顶点的*内部价格*（我们的边不携带价格）。

简单来说，我们构建了一个“分层”图，每一层对应一个可选的高度。在每个位置，您都可以在当前层移动或降低。

不用说，问题的复杂性增加了。顶点数增加（最多）**H**倍，边数也是如此。

基本上，路径搜索具有复杂性，`log(N) * N * M`其中**N**是单元格计数的平方，**M** - 是连接顺序（连接的最近邻居的数量）。在您的通货膨胀之后，复杂性会增加（最多）**H^2**的因子。

因此，该算法的效率取决于不同高度的数量。如果您的高度数量很少 - 该算法应该是有效的。但是，如果您所有的正方形都有不同的高度 - 也许应该使用另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:45:47.977

这是另一个维度的简单最短距离问题的示例，尝试像这样制定问题，cost[n][m][max_height] = {INFINITY};

成本[srcX][srcY][高度[srcX][srcY]] = 0;

现在 q_ht 的 cost[x+1][y][ht] = min(cost[x+1][y][ht], cost[x][y][q_ht] + (q_ht - ht) ) max_height 到 ht。这个想法是从任何允许的高度（即高度> = ht）以最小的成本到达（x + 1，y，ht）。这再次我们需要计算所有 ht(0 到 max_height)。完整的实现在这里： -

```
#define HIGHVAL 100000000
#define XI (x + a[i])
#define YI (y + b[i])

int n,m;

bool isvalid(int x,int y)
{
    return (x>=0 && y>=0 && x<n && y<m);
}

int main()
{

    int pondX, pondY;
    int farmX, farmY;

    cin>>n>>m>>pondX>>pondY>>farmX>>farmY;
    pondX--, pondY--, farmX--, farmY--;

    int height[n][m];
    string s;

    for(int i=0; i<n; i++)
    {
        cin>>s;
        for(int j=0; j<m; j++)
            height[i][j] = (int)(s[j] - '0');
    }

    int ht = height[pondX][pondY];
    int cost[n][m][ht+1];
    bool visited[n][m];

    for(int i=0; i<n; i++)
        for(int j=0; j<m; j++)
            for(int k=0; k<ht+1; k++)
                cost[i][j][k] = HIGHVAL;

    cost[pondX][pondY][ht] = 0;
    int a[4]= {0,0,1,-1};
    int b[4]= {1,-1,0,0};

    int ci = pondX, cj = pondY;
    queue<int> qx;
    queue<int> qy;

    visited[pondX][pondY] = 1;

    memset(visited, 0, sizeof(visited));
    qx.push(pondX);
    qy.push(pondY);

    while(qy.size())
    {
        int x = qx.front();
        int y = qy.front();

        qx.pop();
        qy.pop();

        for(int i=0; i<4; i++)
        {
            int temp = 0;
            if(isvalid(XI, YI))
            {
                if(!visited[XI][YI])
                {
                    qx.push(XI);
                    qy.push(YI);
                    visited[XI][YI] = 1;
                    temp = 1;
                }

                for(int j=ht; j>=0; j--)
                {
                    int q = HIGHVAL;
                    for(int k=ht; k>=j; k--)
                    {
                        q = min(q, cost[x][y][k] + abs(j - height[XI][YI]));
                    }

                    if(cost[XI][YI][j] > q)
                    {
                        cost[XI][YI][j] = q;

                        if(visited[XI][YI] && !temp)
                        {
                            qx.push(XI);
                            qy.push(YI);
                        }
                    }
                }
            }

        }
    }

    int ans=HIGHVAL;
    for(int i=0; i<=ht; i++)
        ans = min(ans, cost[farmX][farmY][i]);

    cout<<ans;
    //cout<<" "<<n<<m;
    return 0;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:46:11.350

“变化的海拔”起初*似乎*使问题复杂化，但如果你仔细考虑一下，它并不是真的。首先，没有理由减少正方形的高度——只有增加。除了当前搜索“分支”的“结束”方块之外，没有任何理由提升任何方块。**和**，在任何遍历中，没有任何理由将正方形的高程增加到超过移动到下一个正方形所需的量。我可能会补充一点，一条最佳路径永远不会自行循环。因此，在搜索的每一步，应该提升的方格，以及提升多少，都是完全确定的。您不需要使用搜索来找到它。所以@valdo 提出的“分层图”实际上并不是必需的。

有了这种洞察力，您可以直接使用几乎任何标准的寻路算法。

# lighttpd - Lighttpd代理IP地址

> ID：10668607
> 
> 赞同：0
> 
> 时间：2012-05-19T20:26:24.890
> 
> 标签：lighttpd

我可以为我的`lighttpd`服务器使用代理，比如在两台不同的计算机上更改 ip 地址或端口转发吗？我有 At&t uverse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:41:03.953

是的，您可以，将以下内容添加到 lighttpd.conf 会将所有对 php 文件的请求重定向到 192.168.0.10 端口 80。

```
proxy.server = (
    ".php" => (
        ( 
            "host" => "192.168.0.10",
            "port" => 80
        )
    )
) 
```

希望有帮助

# php - 如何在没有 curl 的情况下使用 php 将数据发布到 URL

> ID：10668609
> 
> 赞同：0
> 
> 时间：2012-05-19T20:26:51.867
> 
> 标签：php, ajax, json

我必须使用 PHP 发布到 URL。现在它可以工作，但是在发送数据/发布之后，它会给出一个 json 输出（来自我发布到的 Web 服务），我需要输出友好。我不能将 jquery 与 ajax 一起使用，因为它是冲突的。我需要直接与网络服务通信

这是我的表格：

```
<form action="http://somewebservice.com/<?php echo $PrizeID;?>" method="post" name="myform">
<input name="account" id="account" type="hidden" value="<?php echo $account;?>"/>
<input name="dob" id="dob" type="hidden"  value="<?php echo $dob;?>"/>
<input name="site" id="site" type="hidden"  value="<?php echo $site;?>"/>
<input name="submit" type="submit" value="submit"/>
</form> 
```

单击提交后，它会将我带到具有以下 JSON 输出的页面：

```
{"Prize":"XXXXXX","ConfirmationCode":"######","Error":false,"ErrorMsg":null} 
```

发布工作正常，因为我检查了 Web 服务日志并注册了提交。我现在需要做的就是显示 `ConfirmationCode`上面的格式，而不是整个 JSON 输出。任何帮助将不胜感激。

**更新** 我根据你的帮助做了一些更改......它刷新了页面但不更新数据库。我检查了网络服务日志，没有记录任何条目。它给我 bool(false) 作为错误，当 ECHOing $context 时，我得到“资源 id#4”

这是更新的表格：

```
<form name="myform">
<input name="account" id="account" type="hidden" value="<?php echo $account;?>"/>
<input name="dob" id="dob" type="hidden"  value="<?php echo $dob;?>"/>
<input name="site" id="site" type="hidden"  value="<?php echo $site;?>"/>
<input name="submit" type="submit" value="submit"/>
</form> 
```

这是PHP

```
if(isset($_POST['submit'])){
$options = array(
            'http'=>array(
                'method'=>"POST",
                'contentType'=> "application/x-www-form-urlencoded",
                'content'=>http_build_query(array(
                        'account' => $account,
                        'dob' =>   $dob,
                        'site' => $site
                    ))
            ));

        $context = stream_context_create($options);
        $result =  file_get_contents("http://somewebservice.com/{$PrizeID}",NULL,$context);
        var_dump($result);
} 
```

**更新（使用 AJAX）** 我尝试了 ajax，当它写入 Web 服务时，我在客户端站点中收到错误消息。错误说 [object Object] 这是 ajax

这是表格

```
<form name="myform" >
<input name="account" id="account" type="hidden" value="<?php echo $account;?>"/>
<input name="dob" id="dob" type="hidden"  value="<?php echo $dob;?>"/>
<input name="site" id="site" type="hidden"  value="<?php echo $site;?>"/>
<input id="submit" type="submit" value="submit"/>
<div id="result"></div> 
```

这是ajax脚本：

```
<script type="text/javascript">
$("#submit").click(function(e){
    e.preventDefault(); 
    var account = $('#account').val();
    var dob = $('#dob').val();
    var site = $('#site').val();

    $.ajax({
        type: "POST",
        url: "http://somewebservice.com/<?php echo $PrizeID;?>",
        data: "{ 'account': '" + account + "','dob': '" + dob + "', 'site': '" + site + "'}",
        contentType: "application/json; charset=utf-8",
        async: false,
        success: function(data) {
            //$('#result').text(data.d);
            alert(data);
            var obj = $.parseJSON(data);
                $("#result").html("<p><b>Confirmation Code:</b> " + obj.ConfirmationCode + "</p>");
        },
        error: function(data) {
            alert(data);
            $("#result").html("<b>There was an error. Please try again</b><br/>");

        }
    });
});
</script> 
```

**更新（带卷曲） - 已解决 - 它有效！！！！** 这有效 - 它通过 Web 服务发布到数据库，我能够取回 Web 服务返回的 ConfirmationCode。

这是 offer.php 中的表格

```
<form action="process.php" method="post" name="myform">
<input id="submit" type="submit" value="submit"/>
</form> 
```

这是 process.php 文件

```
<?php
$data = array("account" => "{$account}", "dob" => "{$dob}", "site" => "{$site}");                                                                    
$data_string = json_encode($data); 

$ch = curl_init("http://somewebservice.com/{$PrizeID}");                                                                      
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
curl_setopt($ch, CURLOPT_POSTFIELDS, $data_string);                                                                  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
curl_setopt($ch, CURLOPT_HTTPHEADER, array(                                                                          
    'Content-Type: application/json',                                                                                
    'Content-Length: ' . strlen($data_string))                                                                       
);                                                                                                                   
$result = curl_exec($ch);                            
curl_close($ch);
$json_result = json_decode($result, true);
?>
// here's the call for the confirmation number
<p>Your confirmation number is: <strong><?php echo $json_result['ConfirmationCode'];?></strong></p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:31:35.453

如果您想在没有 的情况下执行`POST`请求`curl`，您可以使用`file_get_contents()`和其他文件操作（fopen 等）[创建上下文](http://www.php.net/manual/en/function.stream-context-create.php)并[设置默认上下文选项](http://www.php.net/manual/en/function.stream-context-set-default.php)，

例子 ：

```
 $options = array(
            'http'=>array(
                'method'=>"POST",
                'content'=>http_build_query(array(
                        'account' => $account,
                        'dob' =>   $dob,
                        'site' => $site
                    ))
            ));

        $context = stream_context_create($options);
        $result =  file_get_contents("http://somewebservice.com/{$PrizeID}",NULL,$context);
        var_dump($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:32:00.887

您可以创建一个 PHP 脚本来充当 Web 服务的代理，然后根据需要格式化返回的 JSON。

您的表单标签将更改为：

```
<form action="http://myaddress.com/myproxyscript.php" method="post" name="myform"> 
```

然后`myproxyscript.php`会是这样的：

```
<?php
$postvars=file_get_contents("php://input");

$curl=curl_init("http://somewebservice.com/{$PrizeID}");
curl_setopt($curl,CURLOPT_POSTFIELDS,$postvars);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
$result=curl_exec($curl);
$decodedresult=json_decode($result,true);
// do stuff with result here...
?> 
```

或者您可以`file_get_contents`在 PHP 中使用来获取 Tufan 的答案中给出的结果。

# silverlight - Silverlight“未指定动画目标。”

> ID：10668612
> 
> 赞同：0
> 
> 时间：2012-05-19T20:27:25.877
> 
> 标签：silverlight, animation, storyboard

我有这段代码，但我不能使用它，因为当我调用 sb.Begin() 时会抛出异常：

> 未指定动画目标。

```
 public void TableCardAnimation(UserControl cardControl, double Height, double Width)
    {
        Storyboard sb = new Storyboard();
        DoubleAnimation animHeight = new DoubleAnimation();
        animHeight.Duration = new Duration(new TimeSpan(0, 0, 2));
        animHeight.From = cardControl.Height;
        animHeight.To = Height;
        sb.Children.Add(animHeight);
        Storyboard.SetTarget(animHeight, cardControl);
        Storyboard.SetTargetProperty(animHeight, new PropertyPath("(Height)"));

        DoubleAnimation animWidth = new DoubleAnimation();
        animWidth.Duration = new Duration(new TimeSpan(0, 0, 2));
        animWidth.From = cardControl.Width;
        animWidth.To = Width;
        sb.Children.Add(animWidth);
        Storyboard.SetTarget(animWidth, cardControl);
        Storyboard.SetTargetProperty(animHeight, new PropertyPath("(Width)"));

        sb.Begin();
    } 
```

我哪里错了？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:39:11.650

显然这只是一个打字错误。

在行中：

```
Storyboard.SetTargetProperty(animHeight, new PropertyPath("(Width)")); 
```

您已经为`animHeight`辅助设置了目标属性，但您的 animWidth 目标属性仍未设置。你可能想做：

```
Storyboard.SetTargetProperty(animWidth, new PropertyPath("(Width)")); 
```

为什么你使用`"(Width)"`just `"Width"`？

# java - 如何让 Apache Commons Net 在 Android 中运行？- java.lang.NullPointerException 错误

> ID：10668613
> 
> 赞同：3
> 
> 时间：2012-05-19T20:27:29.543
> 
> 标签：java, android, eclipse, apache-commons-net

我试图让下面的 AutomatedTelnetClient 在使用 Eclipse 的 Android 应用程序中工作。如果我创建一个新的 Java 项目（不是 Android）并添加以下代码，它可以正常工作。

问题是当我将相同的代码添加到 Android 项目时，我收到以下错误消息：

```
05-20 14:07:25.991: E/AndroidRuntime(337): FATAL EXCEPTION: main
05-20 14:07:25.991: E/AndroidRuntime(337): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.jbapp/com.example.jbapp.AutomatedTelnetClient}: java.lang.ClassCastException: com.example.jbapp.AutomatedTelnetClient
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.os.Looper.loop(Looper.java:123)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-20 14:07:25.991: E/AndroidRuntime(337):  at java.lang.reflect.Method.invokeNative(Native Method)
05-20 14:07:25.991: E/AndroidRuntime(337):  at java.lang.reflect.Method.invoke(Method.java:507)
05-20 14:07:25.991: E/AndroidRuntime(337):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-20 14:07:25.991: E/AndroidRuntime(337):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-20 14:07:25.991: E/AndroidRuntime(337):  at dalvik.system.NativeStart.main(Native Method)
05-20 14:07:25.991: E/AndroidRuntime(337): Caused by: java.lang.ClassCastException: com.example.jbapp.AutomatedTelnetClient
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-20 14:07:25.991: E/AndroidRuntime(337):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
05-20 14:07:25.991: E/AndroidRuntime(337):  ... 11 more 
```

**这是 AutomatedTelnetClient.class**

```
package com.example.jbapp;

import java.io.InputStream;
import java.io.PrintStream;
      import org.apache.commons.net.telnet.TelnetClient;

public class AutomatedTelnetClient {    
    private TelnetClient telnet = new TelnetClient(); 
    private InputStream in; 
    private PrintStream out; 
    private String prompt = "$"; 
          private String server = "my.ip.add.ress";
          private String user = "userName";
          private String password = "password";

    public AutomatedTelnetClient() { 
        try { 
                // Connect to the specified server 
                telnet.connect(server, 23); 

                // Get input and output stream references 
                in = telnet.getInputStream(); 
                out = new PrintStream(telnet.getOutputStream()); 

                // Log the user on 
                readUntil("login: "); 
                write(user); 
                readUntil("Password: "); 
                write(password); 

                // Advance to a prompt 
                readUntil(prompt + " "); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
    } 

    public void su(String password) { 
        try { 
                write("su"); 
                readUntil("Password: "); 
                write(password); 
                prompt = "$"; 
                readUntil(prompt + " "); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
    } 

    public String readUntil(String pattern) { 
        try { 
                char lastChar = pattern.charAt(pattern.length() - 1); 
                StringBuffer sb = new StringBuffer(); 
                // boolean found = false; 
                char ch = (char) in.read(); 
                while (true) { 
                        System.out.print(ch); 
                        sb.append(ch); 
                        if (ch == lastChar) { 
                                if (sb.toString().endsWith(pattern)) { 
                                        return sb.toString(); 
                                } 
                        } 
                        ch = (char) in.read(); 
                } 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
        return null; 
    } 

    public void write(String value) { 
        try { 
                out.println(value); 
                out.flush(); 
                System.out.println(value); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
    } 

    public String sendCommand(String command) { 
        try { 
                write(command); 
                return readUntil(prompt + " "); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
        return null; 
    } 

    public void disconnect() { 
        try { 
                telnet.disconnect(); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
    } 

    public static void main(String[] args) { 
        try { 
                AutomatedTelnetClient telnet = new AutomatedTelnetClient(); 
                System.out.println("Got Connection..."); 
                telnet.sendCommand("ps -ef "); 
                System.out.println("run command"); 
                telnet.sendCommand("ls "); 
                System.out.println("run command 2"); 
                telnet.disconnect(); 
                System.out.println("DONE"); 
        } catch (Exception e) { 
                e.printStackTrace(); 
        } 
    } 
} 
```

**这是我的 AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.jbapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" /> 
<uses-library android:name="org.apache.commons.net.telnet.TelnetClient" />
<uses-permission android:name="android.permission.INTERNET"/> 
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".JbAndroidAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.example.jbapp.DisplayMessageActivity" />
    <activity android:name="com.example.jbapp.AutomatedTelnetClient" />
</application>

</manifest> 
```

**我在按下按钮后使用此代码调用它：**

```
 public void sendTelnet(View view) {    
    // Do something in response to button}
    Intent intent = new Intent(this, AutomatedTelnetClient.class);
    startActivity(intent);
    } 
```

我对 Java/Andrtoid/Eclipse 很陌生，但在其他语言方面有丰富的经验。任何帮助表示赞赏！:)

谢谢！

* * *

我现在有了读取 Telnet 并将结果显示到 TextView 的代码！:)

**AutomatedTelnetClient.class**

```
package com.example.jbapp; 

import java.io.InputStream; 
import java.io.PrintStream; 

import org.apache.commons.net.telnet.TelnetClient; 

import android.app.Activity; 
import android.content.Intent;
import android.os.Bundle; 
import android.view.View;
import android.widget.TextView; 

public class AutomatedTelnetClient extends Activity {    
    private TelnetClient telnet = new TelnetClient();  
    private InputStream in;  
    private PrintStream out;  
    private String server = "my.ip.add.ress"; 
    private String prompt = "#";  
    private String user = "user"; 
    private String password = "password";
    String tmpOutput;
    TextView outputView;

    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.main); 
        outputView = (TextView)findViewById(R.id.output);
    } 

    public void sendTelnet(View view) {    
        // Do something in response to button}
        try {  
            // Connect to the specified server  
            telnet.connect(server, 23);  

            // Get input and output stream references  
            in = telnet.getInputStream();  
            out = new PrintStream(telnet.getOutputStream());  

            // Log the user on  
            readUntil("Login: ");  
            write(user);  
            readUntil("Password: ");  
            write(password);  
            readUntil("ATP>");  
            write("shell"); 

            // Advance to a prompt  
            readUntil(prompt + " "); 
            write("ls"); 
            readUntil(prompt + " "); 
            telnet.disconnect();
            outputView.setText(tmpOutput);
            finish();
            }  
        catch (Exception e) {  
            e.printStackTrace();  
        }  
    }   

    public String readUntil(String pattern) {  
 //     outputView.setText("DOESN'T work #2");
        try {  
            char lastChar = pattern.charAt(pattern.length() - 1);  
            StringBuffer sb = new StringBuffer();  
            // boolean found = false;  
            char ch = (char) in.read();  
            while (true) {  
                System.out.print(ch);
                tmpOutput = tmpOutput + ch;
                sb.append(ch);  
                if (ch == lastChar) {  
                    if (sb.toString().endsWith(pattern)) {
                        return sb.toString();  
                    }  
                }  
                ch = (char) in.read();  
            }  
        }  
        catch (Exception e) {  
            e.printStackTrace();  
        }  
        return null;  
    }  

    public void write(String value) {  
        try {  
            outputView.setText(value);
            out.println(value);  
            out.flush();  
            System.out.println(value); 
        }  
        catch (Exception e) {  
            e.printStackTrace();  
        }  
    }  

} 
```

**这是我的 main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >
            <Button
                android:id="@+id/button_telnet"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:onClick="sendTelnet"
                android:text="@string/button_telnet" />
        </TableRow>
        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="match_parent" >
            <TextView android:id="@+id/output"       
                android:layout_weight="1"        
                android:layout_width="fill_parent"        
                android:layout_height="fill_parent"        
                android:hint="@string/output_message" />  
        </TableRow>
</TableLayout> 
```

**这是 AndroidManifext.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.jbapp"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="10" />
    <uses-library android:name="org.apache.commons.net.telnet.TelnetClient" /> 
    <uses-permission android:name="android.permission.INTERNET"/> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".AutomatedTelnetClient"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

**非常感谢所有帮助！:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:43:22.600

假设您使用的是 Eclipse，`res/layout`您应该在文件夹下看到一个`main.xml`. 这包含一个基本布局。你想要做的是添加`android:id="@+id/output"`到`TextView`. 然后，您可以在您的代码中通过`TextView output = (TextView)findViewById(R.id.output);`并使用`output.setText(myText);`.

你当然需要`Activity.onCreate`你`Activity`使用的方法`setContentView(R.layout.main);`

# sql - 这种情况的表结构应该是什么

> ID：10668615
> 
> 赞同：0
> 
> 时间：2012-05-19T20:27:50.590
> 
> 标签：sql, database

我正在像网站这样的社交平台上工作。我不确定这种情况的表结构应该是什么；

我将有用户将创建的旅行。用户可以将用户添加到他们的旅行中。

所以;

> ```
> >One Trip
>   >Many users 
> ```

我应该只用两列创建吗？

> ```
> >tripID
> >userID 
> ```

并为同一行程的每个新用户添加新行？

或者你有其他意见吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:35:05.997

您在这里有几种不同的关系：

*   旅行有创造者
*   一次旅行有很多用户去旅行
*   用户进行了多次旅行

这意味着一对多的行程与用户创建行程（用户可以创建许多行程，行程有一个创建者）。

你也有一个多对多，因为一个用户可以去很多次旅行，旅行可以有很多用户，所以你需要一个连接表。

我将连接表命名为 trip_users，因为这是按字母顺序排列的两个连接实体，这在某些地方是一个标准：

## 旅行

*   ID
*   creator_id（指创建行程的用户）

## 用户

*   ID

## trip_users

*   用户身份
*   trip_id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:32:22.490

这里有三个不同的对象。一个用户可以进行多次旅行 一次旅行可以有很多用户。根据定义，这是一个多对多的关系。对于大多数 RDBMS，它需要通过关联表来解决。（这是第三个对象）

## 表：用户

*   用户身份
*   用户信息...

## 表：旅行

*   行程ID
*   行程信息...

## 表：用户行程

*   用户身份
*   行程ID
*   用户旅行信息...

# c++ - 使用 C++ 模板进行矩阵乘法

> ID：10668616
> 
> 赞同：0
> 
> 时间：2012-05-19T20:27:52.077
> 
> 标签：c++

既然你这么有帮助，我还有一个问题。

我已经使用模板实现了矩阵乘法，但我无法编译我的代码。

这里是。

矩阵.h：

```
#ifndef __MATRIX_H__
#define __MATRIX_H__

template <class T, int rows, int cols> class matrix {
public:
    T mat[rows][cols];
    matrix();
    matrix(T _mat[rows][cols]);
    matrix operator+(const matrix& b);
};

template <class T, int rows, int cols> matrix <T,rows,cols> :: matrix (T _mat[rows][cols]){
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            mat[i][j] = _mat[i][j];
        }
    }
}

template <class T, int rows, int cols> matrix <T,rows,cols> :: matrix (){
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            mat[i][j] = 0;
        }
    }
}

template <class T, int rows, int cols> matrix <T,rows,cols> matrix <T,rows,cols>::operator+(const matrix<T, rows, cols>& b){
    matrix<T, rows, cols> tmp;
    for (int i=0; i<rows; i++){
        for (int j=0; j<cols; j++){
            tmp.mat[i][j] = this->mat[i][j] + b.mat[i][j];
        }
    }
    return tmp;
}

template <class T, int rows, int cols> template <int new_cols> matrix <T,rows,new_cols> matrix <T,rows,cols>::operator*(const matrix<T, cols, new_cols>& b){
    matrix<T,rows,new_cols> tmp;
    int i, j, k;
    T sum;
    for(i=0; i<rows; i++){
        for(j=0; j<new_cols; j++){
           sum = 0;
           for (k=0; k<cols; k++){
               sum += this->mat[i][k] * b.mat[k][j];
           }
           tmp.mat[i][j] = sum;
        }
    }
    return tmp;
}

#endif 
```

矩阵.cpp：

```
#include "tar5_matrix.h"
int main(){

    int mat1[2][2] = {1,2,
                      3,4};
    int mat2[2][2] = {5,6,
                      7,8};
    int res[2][2];
    matrix<int, 2, 2> C;
    matrix<int, 2, 2> D;
    matrix<int, 2, 2> A = mat1;
    matrix<int, 2, 2> B = mat2;
    C = A+B;
    D = A*B;

    return 0;

} 
```

尝试编译时，出现以下错误，

```
1>  tar5_matrix.cpp
1>c:\users\karin\desktop\lior\study\cpp\cpp_project\cpp_project\tar5_matrix.h(68): error C2039: '*' : is not a member of 'matrix<T,rows,cols>'

1>c:\users\karin\desktop\lior\study\cpp\cpp_project\cpp_project\tar5_matrix.cpp(14): error C2676: binary '*' : 'matrix<T,rows,cols>' does not define this operator or a conversion to a type acceptable to the predefined operator 
```

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:31:53.480

您尚未`operator*`在类主体中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T22:17:55.793

正如 Oli 指出的那样，问题在于您尚未声明`operator*`为成员方法，但您正试图将其*定义*为成员方法。您在此处拥有的两种选择是添加声明，或将其更改为自由函数。我特别喜欢自由函数方法，因为乘法在左侧的操作并不比在右侧的操作更多。

```
template <typename T, size_t N, size_t M, size_t O>
matrix<T,M,O> operator*( matrix<T,M,N> const & lhs, 
                         matrix<T,N,O> const & rhs )
{
   // ...
} 
```

# ios - UITableView ARC 问题

> ID：10668617
> 
> 赞同：0
> 
> 时间：2012-05-19T20:27:53.863
> 
> 标签：ios, uitableview, ios5, automatic-ref-counting, nszombie

现在我正在制作一个使用 UITableView 的应用程序，但我已经为这个问题苦苦挣扎了 3 天，但我无法弄清楚。

在 .h 文件中，我订阅了两种 tableview 方法。像这样：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <QuartzCore/QuartzCore.h>
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>

@interface pagetwoViewController : UIViewController <UITableViewDataSource,  UITableViewDelegate>
{

}

@property (strong, nonatomic) IBOutlet MKMapView *mapView;
@property (strong, nonatomic) IBOutlet UIImageView *twitterFrame;
@property (strong, nonatomic) IBOutlet UITableView *twitterTableView;
@property (strong, nonatomic) NSMutableArray *timeLineData; 
```

我的实现可以在这里找到：

[.m 文件](http://pastebin.com/9FsW4Vh1)

每当应用程序加载时，它总是崩溃。所以我启用了 NSZombies 并收到了消息：

```
[pagetwoViewController numberOfSectionsInTableView:]: message sent to deallocated instance 0x27d960 
```

所以我在网上查了一下，发现几乎在所有情况下，都会在 tableview 之前发布时发生这种情况`numberOfSectionsInTableView`。所有的网站都说我应该保留 tableview，但我正在使用 ARC，我不能这样做。这种崩溃只是偶尔发生。然后当它没有时，当我尝试触摸 tableview 或尝试滚动它时，它崩溃了。我到处找，我根本找不到关于这个问题的任何东西，而且我当然无法弄清楚 tableview 是在哪里发布的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:05:42.720

你确定你甚至初始化了tableview吗？您的 .h 没有为 tableview 描述的出口，这表明它没有连接到故事板/xib 中的任何内容，并且您的 .m 没有以编程方式初始化表格。

**Edit: Answer #2** Try moving the pagetwoViewController declaration to the header of the storyboard... Your problem is that your only adding the view of the pageTwoViewController therefore ARC adds the release to the viewController at the end of viewDidLoad because it is declared locally.

# python - Python 正则表达式 ~ 简单问题

> ID：10668618
> 
> 赞同：1
> 
> 时间：2012-05-19T20:28:02.677
> 
> 标签：python, regex, string

这是我现在的代码，

```
import re
matches = re.search(r'^%s\s*\((.*?)\)'%"Hello", "Hello(Hi())")
print matches.group(1) 
```

看到 Hello 后，它将所有内容都放在括号内。例如，

```
Hello(hi) produces hi 
```

我有一个问题，

```
Hello(Hi())   produces Hi( and not Hi() 
```

有谁知道我如何通过更改正则表达式来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:37:07.377

如果您只关心最外面的括号中的内容，请使用`$`锚点：

```
>>> re.match("Hello\((.*)\)$", "Hello(Hi())").group(1)
'Hi()'
>>> re.match("Hello\((.*)\)$", "Hello(Hi(Bye()))").group(1)
'Hi(Bye())' 
```

如果你想匹配嵌套括号，那么 REs 是不可能的，因为你的语言将是[上下文无关的](https://en.wikipedia.org/wiki/Context-free_language)，但不是[常规](https://en.wikipedia.org/wiki/Regular_language)的；相反，您可以迭代地将正则表达式应用于正则表达式匹配的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:32:18.833

如果可以有任意级别的嵌套，则正则表达式是不合适的。

如果您可以确定嵌套层数不会超过两层，则可以解决它，但这并不令人愉快：

```
re.match(r'^%s\s*\(((?:[^()]*|\([^)]*\))*)\)' % re.escape("Hello"), text) 
```

在线查看它：[ideone](http://ideone.com/3NHMa)

# android - 安卓查询错误

> ID：10668622
> 
> 赞同：0
> 
> 时间：2012-05-19T20:28:21.673
> 
> 标签：android, database, sqlite

```
 Cursor cursor = db.rawQuery("SELECT id,lastname,status FROM people WHERE " + "id = "+ IncomingiD +" FROM people WHERE status =100 ); ",null); 
```

我想访问我的人员表的“status=100 和 id=incomingid”。我在上面编写了代码片段，但在下面出现错误......该查询有什么问题？请你帮助我好吗 ？

```
E/Error(996): Error while openining peopleandroid.database.sqlite.SQLiteException: near "FROM": syntax error: , while compiling: SELECT id,lastname,status FROM people WHERE  id = 1 FROM places WHERE status =100 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:30:43.050

`FROM people`您的查询中有两次该部分：

*   首先，在正确的位置，在 select 和 where 子句之间
*   然后，第二次，在 where 子句中的第一个条件之后。

另外，请注意，您`where`的查询中有两次——这两个条件应该用 and 分隔`and`，而不是 second `where`。

哦，您的查询结束时似乎也有一个结束`)`？

基本上，您的查询如下所示：

```
SELECT id,lastname,status 
FROM people 
WHERE id = ....
FROM people 
WHERE status =100 
); 
```

但它应该是这样的：

```
SELECT id,lastname,status 
FROM people 
WHERE id = ....
    and status = 100 
```

最后，我猜你的 Java 代码应该看起来像这样：

```
Cursor cursor = db.rawQuery("SELECT id, lastname, status FROM people WHERE id = " + IncomingiD + " AND status = 100",null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:30:18.130

查询应为

```
 Cursor cursor = db.rawQuery("SELECT id,lastname,status FROM people WHERE " + "id = "+ IncomingiD +"AND status =100 ); ",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:31:00.960

你的查询是错误的。sql语句中只能有一个FROM。

尝试这个：

```
cursor = db.rawQuery("SELECT id,lastname,status FROM people WHERE " + "id = "+ IncomingiD +" AND status =100 ); ",null); 
```

# javascript - jQuery 在 .each 循环中获取输入值

> ID：10668623
> 
> 赞同：18
> 
> 时间：2012-05-19T20:28:36.393
> 
> 标签：javascript, jquery, each

我试图在复选框的每个循环中获取输入值，我无法弄清楚如何让它工作，该值一直作为第一个复选框值输出。

```
$('.custemb, input[name=cb], input[class=multadd]').live("click", function() {

    $('input[class=multadd]:checked').each(function(index) {
        val = index + 2;
        valu = $('input[class=multadd]:checked').val();
        multiz = multiz + '&aid' + val + '=' + valu;
    });
}); 
```

问题是变量的输出`valu`是整个每个循环的第一个复选框，而不是循环的当前复选框，我需要当前值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-19T20:30:41.477

您可以使用`this`来访问循环中的当前元素：

```
valu = $(this).val(); 
```

当前元素也作为参数发送给回调函数，因此您可以将其拾取：

```
.each(function(index, elem) { 
```

然后使用参数：

```
valu = $(elem).val(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T20:30:32.930

```
$('.custemb, input[name=cb], input[class=multadd]').live("click", function() {

    $('input[class=multadd]:checked').each(function(index) {
        var $this = $(this);
        val = index + 2;
        valu = $this.val();
        multiz = multiz + '&aid' + val + '=' + valu;
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T20:32:12.107

用于`this`查找被点击的控件

```
$('input[class=multadd]:checked').each(function(index) {
        val = index + 2;
        valu = $(this).val();
        multiz = multiz + '&aid' + val + '=' + valu;
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-17T08:23:11.643

```
var texts= $(".class_name").map(function() {
    return $(this).val();         
}).get(); 
```

# java - Java - BufferedImage (ImageIO.Read) OutOfMemory 堆空间

> ID：10668626
> 
> 赞同：1
> 
> 时间：2012-05-19T20:28:46.473
> 
> 标签：java, out-of-memory, bufferedimage, heap-memory, javax.imageio

好的，所以我的代码中出现内存不足（堆空间）错误，并且我已经（通过分析）发现错误来自图像的创建。

我所拥有的是一个将图像创建为较小图像的类，然后将绘制该类。

问题是，如果我想将 1000 多个这些图像加载到 JPanel 中，我会在它敲出之前达到 750 左右，而且我真的不想扩展 java 的内存。

继承人的代码：

```
class Foo extends JPanel{
private BufferedImage image;
private Image scaled;   
public Foo(String link){
    try{
        setPreferredSize(new Dimension(50,50));
        image = ImageIO.read(new URL(link)); //Cause for memory leak
        scaled= image.getScaledInstance(100, 140, BufferedImage.SCALE_FAST);
        image.flush();
                    //tried image = null; but did not help memory
    }
    catch(Exception e){}
}

public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawImage(scaled, 5, 5, null);
}
} 
```

所以基本上，有没有更有效的方法将链接读入图像，或者如何删除不必要的内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:33:57.020

我不确定这是否足够，但您可以`scaled`使用以下方法消除使用：

```
drawImage(Image img, int x, int y, int width, int height, ImageObserver observer) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T15:42:33.960

知道问题...

您可能不需要每次都重新阅读完整的图像。

我已经实现了类似的功能。我所做的是以所需大小存储每个图像的快照 + 我在文件名中包含此快照的时间戳，以便我知道快照是否仍然是最新的。

这并不能解决您制作初始快照的问题，但可以很好地解决以后的使用问题。

# ruby-on-rails-3 - 自定义管理模型的登录页面

> ID：10668628
> 
> 赞同：1
> 
> 时间：2012-05-19T20:29:11.443
> 
> 标签：ruby-on-rails-3, activeadmin

我从*ActiveAdmin*开始，我已经有一个用户模型，并且它已经与其他模型挂钩。所以我想用它作为管理员账户的模型。

谁能指导我使用*ActiveAdmin*`--skip-users`的设置？

主要问题是登录页面，因为我想把它作为 *ActiveAdmin*提供的那个。*另外，当我尝试使ActiveAdmin*像本机设计的那样运行并与我的自定义用户模型一起工作时，我还应该寻找什么

# c# - 接口中的自引用

> ID：10668629
> 
> 赞同：6
> 
> 时间：2012-05-19T20:29:21.197
> 
> 标签：c#, generics, interface, containers, self-reference

好的，这就是我想做的。

```
Class Container<T>
{
    T contained;
    public void ContainObject(T obj)
    {
        contained = obj;
        if(/*Magical Code That Detects If T Implemtns IContainableObject*/)
        {
            IContainableObect c = (IContainableObject)obj;
            c.NotifyContained(self);
        }
    }
}

interface IContainableObject
{
    public void NotifyContained(Container<REPLACE_THIS>);//This line is important, see below after reading code.
}

Class ImplementingType : IContaiableObject
{
    public Container<ImplementingType> MyContainer;
    public void NotifyContained(Container<ImplmentingType> c)
    {
        MyContainer = c;
    }
}

Class Main
{
    public static void Main(args)
    {
        ImplementingType iObj = new ImplementingType();
        Container<ImplementingType> container = new Container();
        container.ContainObject(iObj);
        //iObj.MyContainer should now be pointing to container.
    }
} 
```

基本上，总结上面的例子，我有一个 T 类型的通用包装器类型。我希望该包装器类型通知它包含的任何内容它被包含（带有它自身的副本！）如果包含的对象实现了一个具体界面（这点我知道怎么做）

但它变得棘手！为什么？好吧，因为容器泛型需要有一个类型。

还记得那条重要的线吗？

如果 REPLACE_THIS 是 IContainableObject，则接口的所有实现者都必须使用 IContainerObject，而不是其 NotifyContained 方法中实现类的名称。

使用 ImplementingType 作为接口内的容器类型更糟糕，原因很明显！

所以我的问题是，我该怎么做才能让 REPLACE_THIS 代表实现接口的对象的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T20:38:38.873

```
class Container<T>
{
    T contained;
    public void ContainObject(T obj)
    {
        contained = obj;
        var containable = obj as IContainableObject<T>;
        if(containable != null)
        {
            containable.NotifyContained(this);
        }
    }
}

interface IContainableObject<T>
{
    void NotifyContained(Container<T> c);
}

class ImplementingType : IContainableObject<ImplementingType>
{
    public Container<ImplementingType> MyContainer;
    public void NotifyContained(Container<ImplementingType> c)
    {
        MyContainer = c;
    }
} 
```

编辑：添加具有通用约束的版本

```
interface IContainer<T>
{
    void ContainObject(T obj);
}

class Container<T> : IContainer<T> where T : IContainableObject<T>
{
    T contained;

    public void ContainObject(T obj)
    {
        contained = obj;
        contained.NotifyContained(this);
    }
}

interface IContainableObject<T>
{
    void NotifyContained(IContainer<T> c);
}

class ImplementingType : IContainableObject<ImplementingType>
{
    public IContainer<ImplementingType> MyContainer;

    public void NotifyContained(IContainer<ImplementingType> c)
    {
        Debug.WriteLine("notify contained");
        MyContainer = c;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:55:31.963

也许你已经知道了，但如果只`IContainableObjects`允许`T`你可以这样声明你的类

```
class Container<T> 
    where T : IContainableObject
{
    public void ContainObject(T obj)
    {
        // Here you know that obj does always implement IContainableObject.
        obj.NotifyContained(this);   
    }

    ...
} 
```

# iphone - RootViewController 中的 UIToolbar

> ID：10668636
> 
> 赞同：0
> 
> 时间：2012-05-19T20:30:08.147
> 
> 标签：iphone, uitoolbar

`UIToolbar`我的应用程序启动时需要。它将出现在整个应用程序的每个屏幕上。所以为此我将它添加到`RootViewController`.

```
#import "AppDelegate.h"
#import "MainViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize mainViewController = _mainViewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]autorelease];
// Override point for customization after application launch.
self.mainViewController = [[[MainViewController alloc]init]autorelease];
self.window.rootViewController = self.mainViewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

目前我有`UIToolbar in MainViewController`

```
 // create the UIToolbar at the bottom of the MainViewController
toolbar = [UIToolbar new];
toolbar.barStyle = UIBarStyleBlackOpaque;
// size up the toolbar and set its frame
toolbar.frame = CGRectMake(0, 425, 320, 40);
[self.view addSubview:toolbar]; 
```

在我所有的其他`UIViewControllers`即时通讯中添加它是这样的

```
[self.view addSubview:toolbar]; 
```

我不想要。我想`UIToolbar`在`UIViewControllers`附加到`rootviewcontroller`. 这样当我翻转`UIViewController`到另一个时`UIViewController`。只是`UIViewController`应该翻转不`UIToolbar`。现在`UIToolbar`也翻转着`UIViewController`。所以这就是我想将它附加到`rootviewcontroller`.

那么如何添加`UIToolbar in APPDelegate`文件并将其附加到`rootviewcontroller`.

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:52:52.897

除了创建 UIToolbar 时，您的代码中的一切看起来都不错，出于某种原因，此时您需要创建自己的语法。这就是创建 UIToolBar 的方式

例子：

```
UIToolbar *toolBar = [UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44); 
```

说真的，你的代码不会编译，你会确切地知道在哪一行。连接点和 Google 如何创建 UIToolbar。

编辑：

对于在每个视图中显示的工具栏，您有几个选项：

(1) 你确定你不想要 UINavigationController & UINavigationBar 吗？

(2) 将其附加在 UIWindow 上（即在窗口中添加两个子视图）。这必须用代码创建，我不相信界面生成器会起作用。

(3) 只需在每个视图加载时创建它（init 或 viewDidLoad 方法）

好的，所以您必须将工具栏添加到每个视图控制器（即 addSubView）。唯一的另一种方法是将两个子视图添加到 AppDelegate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:29:05.257

我不相信你说

```
toolbar = [UIToolbar new]; 
```

另外，您是否搜索过如何以编程方式制作 UIToolbar？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T23:50:24.847

> 只有 UIViewController 不应该翻转 UIToolbar。现在 UIToolbar 也与 UIViewController 一起翻转。这就是我想将它附加到 rootviewcontroller 的原因。

我可以想到两种方法来做到这一点：

1.  使用导航控制器提供的工具栏。您不应该尝试直接访问该工具栏——使用 UIViewController 的`-setToolbarItems:animated:`方法为每个视图控制器设置您想要的项目。如果您为每个视图控制器提供相同的工具栏项集，您将获得您所追求的外观。在我的快速实验中，我确实注意到了轻微的闪烁，但这是为您的所有视图获取标准工具栏的一种非常快速且简单的方法。

2.  创建您自己的容器控制器。随着 iOS 5 的引入，我们能够编写自己的容器控制器，即可以在自己内部托管其他视图控制器的视图控制器，就像 UINavigationController 和 UITabBarController 一样。因此，您可以轻松编写自己的容器并让它托管您的工具栏。听起来这就是您已经尝试做的事情，但您必须意识到您不会自动获得该功能。

# jquery - jQuery 日期排序 li div 浏览器问题

> ID：10668642
> 
> 赞同：2
> 
> 时间：2012-05-19T20:30:39.437
> 
> 标签：jquery, sorting, date, html, html-lists

编辑：2

```
var elems = $("#D li").toArray();
elems.sort(function(a, b) {
    var adate = new Date($(a).find('div.dateDiv').text());
    var bdate = new Date($(b).find('div.dateDiv').text());
    return adate > bdate ? -1 : 1;
});
$("#D").html(elems);

<div id="D">
    <li>1<div class="dateDiv">2012-04-15 10:25:45</div><div>df</div></li> 
    <li>2 <div class="dateDiv">2012-04-10 19:41:08</div><div>df</div></li> 
    <li> 3 <div class="dateDiv">2012-04-20 07:00:10</div><div>ab</div></li> 
    <li>4 <div class="dateDiv">2012-04-12 16:45:50</div><div>a</div></li>

     <li>1<div class="dateDiv">2012-04-15 10:25:45</div></li>
   <li>2 <div class="dateDiv">2012-04-10 19:41:08</div></li>
  <li> 3 <div class="dateDiv">2012-04-20 07:00:10</div></li>
   <li>4 <div class="dateDiv">2012-04-12 16:45:50</div></li>

      <li>1<div class="dateDiv">2012-04-15 10:25:45</div></li>
   <li>2 <div class="dateDiv">2012-04-10 19:41:08</div></li>
  <li> 3 <div class="dateDiv">2012-04-20 07:00:10</div></li>
   <li>4 <div class="dateDiv">2012-04-12 16:45:50</div></li>

      <li>1<div class="dateDiv">2012-04-15 10:25:45</div></li>
   <li>2 <div class="dateDiv">2012-04-10 19:41:08</div></li>
  <li> 3 <div class="dateDiv">2012-04-20 07:00:10</div></li>
   <li>4 <div class="dateDiv">2012-04-12 16:45:50</div></li>
</div>​ 
```

我尝试了很多次 Firefox 浏览器或 IE 或 safari 的一些问题它只适用于 opera 和 chrome ，有人帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:45:03.377

排序工作正常，只需更改`"#d"`为`"#D"`：

```
$("#D").html(elems); 
```

或者在您的标记中更改`id="D"`为。`id="d"`

```
<div id="d"> 
```

**更新：**`li`用元素排序：

```
var elems = $.makeArray($("#D > li"));
elems.sort(function(a, b) {
    return new Date($('.dateDiv',a).text()) < new Date($('.dateDiv',b).text());
});
$("#D").html(elems);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:40:17.797

**编辑**：对李进行排序：http: [//jsfiddle.net/katylava/dsNCX/13/](http://jsfiddle.net/katylava/dsNCX/13/)

```
var elems = $("#D li").toArray();
elems.sort(function(a, b) {
    var adate = new Date($(a).find('div.dateDiv').text());
    var bdate = new Date($(b).find('div.dateDiv').text());
    return adate > bdate ? -1 : 1;
});
$("#D").html(elems); 
```

*^^^最终解决方案来自@MerlynMorgan-Graham 删除的答案，而不是我*

**编辑**：以前的解决方案在 FF 中不起作用，因为它不喜欢日期格式。所以用“T”替换空格。但是，这在 Safari 中仍然不起作用。[http://jsfiddle.net/dsNCX/17/](http://jsfiddle.net/dsNCX/17/)

```
var elems = $("#D li").toArray();
elems.sort(function(a, b) {
    var adate = new Date($(a).find('div.dateDiv').text().replace(' ', 'T'));
    var bdate = new Date($(b).find('div.dateDiv').text().replace(' ', 'T'));
    return adate > bdate ? -1 : 1;
});
$("#D").html(elems); 
```

# python - Python 使用 ctypes 自定义结构调用 C 共享库

> ID：10668645
> 
> 赞同：6
> 
> 时间：2012-05-19T20:30:48.240
> 
> 标签：python, ctypes

我在 Linux 系统上从 Python 调用 C 共享库。

我遇到的问题是 C 库中的函数将指向结构的指针作为参数。然后它为结构数组分配内存，用数据填充数组并返回。所以我将函数定义为

```
from ctypes import *
class myStruct(Structure):
    _fields_ = [("id", c_uint), "name", c_char*256)]

library.func.argtypes =  [POINTER(myStruct)] 
```

然后我这样称呼它：

```
Myfoo = myStruct
Foo = pointer(Myfoo)
Bar = library.func(Foo)
for i in range(Bar):
    print("id = %u, name = %s" % (Foo[i].id, Foo[i].name)) 
```

Bar 包含由 func 分配的结构的数量。

无论我做什么，我都无法从 Foo 中获取任何数据。几个月来，我已经尝试了多种不同的变体。我可以查看 C 库中的日志，我知道它正在获取数据并返回它，但我似乎找不到从 Python 中提取它的方法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T03:57:25.703

If I got the 'func' prototype right from your comment in the question, then this should do:

### C Code

```
#include <stdlib.h>
#include <stdio.h>

struct Foo
{
    unsigned int id;
    char name[256];
};

__declspec(dllexport) int func(struct Foo **ppFoo)
{
    int i;
    struct Foo *foo = malloc(5 * sizeof(struct Foo));
    for(i=0;i<5;i++)
    {
        foo[i].id = i;
        sprintf_s(foo[i].name,_countof(foo[i].name),"Name#%d",i);
    }
    *ppFoo = foo;
    return 5;
} 
```

### Python Code

```
from ctypes import *
dll = CDLL('x')
class Foo(Structure):
    _fields_ = [
        ('id',c_uint),
        ('name',c_char*256)]

pfoo = POINTER(Foo)()
count = dll.func(byref(pfoo))
for i in xrange(count):
    print pfoo[i].id,pfoo[i].name 
```

### Output

```
0 Name#0
1 Name#1
2 Name#2
3 Name#3
4 Name#4 
```

Note you will still need to `free` the allocated memory somehow...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T03:59:12.590

Ok, this just needs a few small updates, then.

First, your argument declaration is off, but that probably doesn't matter. A pointer is a pointer, as far as the python-c value translation machinery is concerned. Most accurate would be `POINTER(POINTER(myStruct))`, but to make things simpler, let's just use:

```
library.func.argtypes = [c_void_p] 
```

Next, you don't need to bother creating a `myStruct` instance for your argument to point at; you just need a valid pointer, and a pointer to *that*. `func` will allocate the actual `myStruct` instances. So let's start with:

```
Foo = ctypes.POINTER(myStruct)() 
```

Now we can call it. We have a `myStruct*`, but we'll pass a pointer to it so `func` can change it. We don't need to construct a whole other pointer object, so we'll use the lighter `byref`:

```
Bar = library.func(byref(Foo)) 
```

Now you can iterate through `Foo[i]`.

```
for i in range(Bar):
    print("id = %u, name = %s" % (Foo[i].id, Foo[i].name)) 
```

# google-maps-api-3 - 有没有办法将谷歌地图多边形链接到我页面上的其他内容？

> ID：10668646
> 
> 赞同：1
> 
> 时间：2012-05-19T20:30:49.380
> 
> 标签：google-maps-api-3

我在谷歌地图上做了几个多边形。现在我想向`click`多边形添加一个事件，这样当您单击多边形时，您会转到网页的另一部分（包含有关该区域的信息）。

```
var map;
var infoWindow;

function initialize() {
    var myLatLng = new google.maps.LatLng(50.88111111111, 3.889444444444);
    var myOptions = {
        zoom: 12,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var poly;
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var polyCoords = [
        verwissel(3.869506,50.906449),
        verwissel(3.869654,50.905664),
        verwissel(3.869934,50.904131),
        verwissel(3.870310,50.902717),
        verwissel(3.870471,50.901559),
    ];

    poly = new google.maps.Polygon({
        paths: HerzeleCoords,
        strokeColor: "#FF0000",
        strokeOpacity: 0.8,
        strokeWeight: 3,
        fillColor: "#FF0000",
        fillOpacity: 0.35
    });

    google.maps.event.addListener(Poly, "click", href ="www.google.com"); 
```

这就是它的样子，但我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:46:18.753

您必须将命令包装在`function(event) { ... }`. 在这种情况下`event`是可选的。有几种方法可以重定向到新位置，这是一种：

`google.maps.event.addListener(poly, "click", function() { window.location = "http://www.google.com" });`

`window.location.href`似乎也能正常工作。

我更改了一些变量名称和数字，然后转到 Yahoo! 因为谷歌不会在 iframe 中加载。

[http://jsfiddle.net/Njcqd/1/](http://jsfiddle.net/Njcqd/1/)

# python - 使用 Django Restframework 自定义 Rest 的好例子

> ID：10668655
> 
> 赞同：0
> 
> 时间：2012-05-19T20:32:04.813
> 
> 标签：python, django, django-rest-framework

过去两天我一直在尝试编写一个自定义的休息界面——使用 djangorestframework 获取和发布。获得没有任何问题的作品。

但是 POST 不起作用。

以下是我所做的：用以下内容编写了一个 forms.py 文件

```
import logging
from django import forms
class AddUserLocationAndDetailsForm(forms.Form):
    """A simple form with some of the most important pygments settings.
    The code to be highlighted can be specified either in a text field, or by URL.
    We do some additional form validation to ensure clients see helpful error responses."""

    user = forms.CharField(
                           label='User',
                           max_length=200)
    fbemail = forms.CharField(
                           label='Facebook Email',
                           max_length=200) 
```

像这样写了相应的view.py文件：

```
import logging
from djangorestframework.views import View
from djangorestframework.permissions import IsAuthenticated

from django.core.urlresolvers import reverse
from djangorestframework.response import Response
from djangorestframework import status

from forms import AddUserLocationAndDetailsForm

class AddUserLocationAndDetailsView(View):
    """
    This view adds details of a user. 
    This view also performs functionalities to update location of a user if the user already exists.
    """
    form = AddUserLocationAndDetailsForm

    def get(self, request):
       return "you have reached get"

    def post(self, request):
        return Response(status.HTTP_201_CREATED) 
```

在我运行服务器时执行此操作后，我会获得用于输入两个字段的网页。但是每当我提交 POST 时，我都会收到错误“此字段是必需的。”。我不知道发生了什么。也不知道如何调试它，因为它从不点击 AddUserLocationAndDetailsView 类中的“post”函数。我已经按照他们在这里的例子做了：http: [//django-rest-framework.org/examples/views.html](http://django-rest-framework.org/examples/views.html)

但这根本行不通。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:02:13.740

我希望进口：

```
from <yourapp>.forms import AddUserLocationAndDetailsForm 
```

代替：

```
from forms import AddUserLocationAndDetailsForm 
```

不确定这是否有帮助....因为这会在运行服务器上出错或点击页面您的设置文件中是否启用了调试模式？

你也可以给你的urls文件吗？

# node.js - 在 Heroku 上存储二进制文件的好方法是什么？

> ID：10668656
> 
> 赞同：5
> 
> 时间：2012-05-19T20:32:08.217
> 
> 标签：node.js, heroku

我在 Heroku 上使用 Node.js，并使用 MongoHQ 获取数据。

我的应用程序需要能够存储从用户上传或从其他站点下载的图像文件。我不是在寻找附加组件来进行图像处理等，我只需要能够存储它们并为它们提供服务。如果我只是从我的 Node 应用程序中将它们作为数字 id 或类似名称引用，那很好。

由于这是一个单人自筹资金的项目，因此我希望尽可能便宜地进行此操作（我不想为附加组件支付大量费用），并且为了简单起见，我更喜欢将所有内容都保留在 Heroku （尽管后者不是必需的，只是一种偏好）。我知道我可以将它们以二进制形式存储在 Mongo 中，但我正在寻找更高效且希望每兆存储更便宜的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:42:37.010

建议使用 Amazon S3 来执行此操作 - 我一直将它与 heroku 一起使用：

[https://devcenter.heroku.com/articles/s3](https://devcenter.heroku.com/articles/s3)

以下是一些 node.js 特定资源：

[http://toolbox.no.de/search?q=s3](http://toolbox.no.de/search?q=s3)

[Node.js 和 Amazon S3：如何遍历存储桶中的所有文件？](https://stackoverflow.com/questions/9437581/node-js-amazon-s3-how-to-iterate-through-all-files-in-a-bucket)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T20:38:36.683

据我所知，您只有 Heroku 应用文件夹的读取权限。你不能在里面存放任何东西。
您可能需要查看[Amazon S3](https://devcenter.heroku.com/articles/s3)，它与*Heroku 原生*配合使用，您只需支付您使用的费用。

# python - Python：如何使用 poplib 获取电子邮件的 HTML 正文？

> ID：10668658
> 
> 赞同：0
> 
> 时间：2012-05-19T20:32:17.110
> 
> 标签：python

我正在尝试使用 message.get_payload() 获取电子邮件的正文。

但是，这只会检索电子邮件的文本内容，即使原始消息是 HTML 格式（即正确显示在我的邮件客户端中）。如何检索邮件的完整 HTML 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:10:49.730

从文档

```
get_payload([i[, decode]]) 
    Return the current payload, which will be a list of Message objects when 
    is_multipart() is True, or a string when is_multipart() is False.

    With optional argument i, get_payload() will return the i-th element of 
    the payload, counting from zero, if is_multipart() is True. 
```

通常 HTML 电子邮件作为 MIME 消息发送。通常有纯文本副本和 HTML 副本。您是否检查过您的消息有多少部分以及是否尝试检索其他部分？

# c - 表示n的算法！作为素数的乘积

> ID：10668667
> 
> 赞同：3
> 
> 时间：2012-05-19T20:33:48.097
> 
> 标签：c, algorithm

什么是表达 n 的最简单和最省时的逻辑！作为素数的乘积？

我更感兴趣的是找到素数的幂，这样我就可以知道因子的数量。作为n！可以表示为 p1^e1 * p2^e2 * ... * pk^ek，其中每个 p 是一个素数，那么 n 的因子个数是 (e1 + 1) *(e2 + 1)* ... * (ek + 1)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-19T22:32:38.400

`n!`找到我所知道的素数分解的最有效方法是计算每个素数作为一个因子出现的频率`n!`。显然，没有大于`n`出现的素数，所以让`p <= n`成为素数。

在这些数字`1, ..., n`中，有

```
q1 = floor(n/p) 
```

的倍数`p`。其中，有

```
q2 = floor(q1/p) = floor(n/p²) 
```

的倍数`p²`。其中，有

```
q3 = floor(q2/p) = floor(n/p³) 
```

的倍数`p³`。`p`等等。所以在素数分解中的指数`n!`是

```
q1 + q2 + q3 + ... 
```

（一个不可被除的对指数有贡献`a = p^k*b`，并出现在对应于计数的列表中。）我们可以简洁地为此编写一个函数：`b``p``k``k``q1, ..., qk`

```
unsigned long long factorial_exponent(unsigned long long n, unsigned long long p) {
    unsigned long long exponent = 0;
    do {
        n /= p;
        exponent += n;
    }while(n);
    return exponent;
} 
```

这使用`floor(log n/log p) + 1`除法，因此，如果不超过的素数`n`已知，则贡献大约

```
log n * ∑ (1/log p + 1) ≈ 2n/log n
       p≤n 
```

对总工作的划分和补充。（注意：由于大多数素数`≤ n`是`> √n`，而且对于素数`p > √n`显然`q2 = 0`，直接计算它们的指数更快：`n/p`，这将所需的除法次数减少了大约一半。）

找到不超过的素数`n`最好用筛子完成，如果你已经有一个很好的实现，[Atkin 的筛子](http://en.wikipedia.org/wiki/Sieve_of_Atkin)在 O(n) 或 O(n/log log n) 操作中完成（取决于实现，但为了可行范围，`log log n`可以被认为是一个常数），否则使用 E​​ratosthenes 筛，它很容易实现并找到不超过`n`in 的素数 - 再次取决于实现 - O(n*log log n) 或 O(n) 操作。

该算法的总工作主要是找到素数（但对于可行`n`的，确定指数的贡献仍然不可忽略）。

另一方面，找到每个`k ≤ n`课程的素因数分解所需的工作取决于用于此的算法。为此使用试除法将导致总工作量约为`c*n^1.5/log n`- 我没有做任何事情来确定常数`c`，并且根据细节，您可能`log n`在分子或分母中有一个因子，但它基本上是`n^1.5`. 找到因式分解的更好方法是首先在 O(n*log log n) 操作中通过修改 Eratosthenes 筛来找到最小的素因数 [或任何素因数]，然后使用它来找到因式分解. 您可以存储分解，然后在`k`使用已知的主要除数处理时`p`，查找分解`k/p`, 或通过递归查找已知的素因数`q`,`k/p`然后 of`k/(p*q)`等来动态生成因式分解，直到分解完成 - 如果已知的素因数始终是最小的，则处理起来要简单得多。

平均而言，`k`包含`≈ log log k`项的素数分解，因此该方法将导致 O(n*log log n) 整体复杂性。但是这种方法中的常数因子比第一种方法要大得多，所以即使素数查找给出相同的复杂度，第一种方法更快。

# jquery - 内容流和影子框在 Firefox 中不起作用

> ID：10668669
> 
> 赞同：1
> 
> 时间：2012-05-19T20:34:11.697
> 
> 标签：jquery, shadowbox, coverflow

我正在使用 ContentFlow JS 脚本 ( [http://www.jacksasylum.eu/ContentFlow/index.php](http://www.jacksasylum.eu/ContentFlow/index.php) )，并且我还在使用 ShadowBox ( [http://www.shadowbox-js.com/index.html](http://www.shadowbox-js.com/index.html) ) 插件。

[http://salts-studios.com/resources/contentflow/](http://salts-studios.com/resources/contentflow/)

ContentFlow 工作正常，但是当您单击图像时，它不会加载 ShadowBox。

我不经常这么说，但在 IE9 中它工作正常 :)

由于 ShadowBox JS 是经过压缩的，因此我可以真正看到的东西并不多。我必须在萤火虫的“aG未定义”中继续进行。

我尝试过独立下载 ShadowBox，但也尝试使用 jQuery 适配器。两者都发生同样的情况。

任何机构任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:32:19.513

如果您只计划显示来自您自己域的图像，那么您在 Shadowbox 版本中具有正确的选项。**但是，如果您需要更多的东西，您将需要使用Base Adapter**和**CSS Selectors**重新下载 Shadowbox ，我推荐**All Players**，直到您发现不需要的东西。

然后，您需要正确安装 Shadowbox。我注意到您在安装时更改了`shadowbox.js`文件名，请更改为默认名称，因为 Shadowbox 按名称查找该文件。

此外，您使用了 Shadowbox 演示的方法来初始化不需要的 Shadowbox。相反，请查看正确的格式：

```
<!-- Install Shadowbox -->
<link rel="stylesheet" type="text/css" href="shadowbox/shadowbox.css" />
<script type="text/javascript" src="shadowbox/shadowbox.js"></script>

<!-- Initialize Shadowbox -->
<script type="text/javascript">

    Shadowbox.init();

</script> 
```

接下来，如下更新您的 HTML，因为 Shadowbox 使用的是**锚标签**，而不是 img 标签。您的**CSS 样式**可能会影响正常操作，因此请使用**pic0.jpg**直到 Shadowbox 打开并显示图像。理想情况下，使用与其他图像非常不同的图像，以便于发现。

```
 <div class="item">
    <a href="pics/pic0.png" rel="shadowbox" title="Optional Shadowbox Title">
      <img class="content" src="pics/pic0.png"/>
    </a>
    <div class="caption">pic0: some stripes</div>
  </div> 
```

上面的**锚链接**可以包含您的图像的**高清版本**，而 pic0.png 的大小适合流播放器。如果您有任何其他问题或需要帮助，请尽管提出。

# regex - 带有模式的递归 PCRE 搜索

> ID：10668675
> 
> 赞同：0
> 
> 时间：2012-05-19T20:35:25.373
> 
> 标签：regex, pcre, recursive-regex

这个问题与 PCRE 有关。

我已经看到了对与此构造一起使用的嵌套括号的递归搜索：

```
\(((?>[^()]+)|(?R))*\) 
```

这样做的问题是，虽然 ' **[^()]+** ' 可以匹配任何字符，包括换行符，但您只能匹配单字符字符，例如大括号、方括号、标点符号、单个字母等。

我想要做的是用任何类型的模式（例如，'BEGIN' 和'END' 之类的关键字）替换'(' 和')' 字符。

我想出了以下构造：

```
(?xs)  (?# <-- 'xs' ignore whitespace in the search term, and allows '.'
               to match newline )
(?P<pattern1>BEGIN)
(
   (?> (?# <-- "once only" search )
      (
         (?! (?P=pattern1) | (?P<pattern2>END)).
      )+
   )
   | (?R)
)*
END 
```

这实际上适用于如下所示的内容：

```
BEGIN <<date>>
  <<something>
    BEGIN
      <<something>>
    END <<comment>>
    BEGIN <<time>>
      <<more somethings>>
      BEGIN(cause we can)END
      BEGINEND
    END
  <<something else>>
END 
```

这成功匹配任何嵌套的 BEGIN..END 对。

我分别为*BEGIN*和*END*设置了命名模式*pattern1*和*pattern2*。在搜索词中使用**pattern1**效果很好。但是，我不能在搜索结束时使用**pattern2**：我必须写出' **END** '。

 ********知道如何重写这个正则表达式，所以我只需指定一次模式并在代码中“无处不在”使用它们吗？换句话说，所以我不必在搜索的中间和最后都写**END 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-28T17:54:27.403

要进一步扩展@Kobis 的答案，请参阅以下正则表达式：

```
(?xs)
(?(DEFINE)
        (?<pattern1>BEGIN)
        (?<pattern2>END)
)
(?=((?&pattern1)
(?:
   (?> (?# <-- "once only" search )
      (?:
         (?! (?&pattern1) | (?&pattern2)) .
      )+
   )*
   | (?3)
)*
(?&pattern2)
)) 
```

这个正则表达式甚至可以让您获取每个单独数据块的数据！使用第三个反向引用，因为前两个已在定义块中定义。

演示：[http ://regex101.com/r/bX8mB6](http://regex101.com/r/bX8mB6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:53:19.280

`(?(DEFINE))`这看起来像是用于创建此类构造的块的一个很好的用例。Perl 的例子是：

```
(?xs)
(?(DEFINE)
        (?<pattern1>BEGIN)
        (?<pattern2>END)
)
(?&pattern1)
(
   (?> (?# <-- "once only" search )
      (
         (?! (?&pattern1) | (?&pattern2)).
      )+
   )
   | (?R)
)*
(?&pattern2) 
```

示例：http: [//ideone.com/8o9cg](http://ideone.com/8o9cg)

（请注意我真的不知道任何 perl，并且无法让它在任何在线测试人员的 PHP 上工作）

另见：[http](http://www.pcre.org/pcre.txt) ://www.pcre.org/pcre.txt （寻找`(?(DEFINE)`0 它看起来不像他们有页面）

* * *

适用于大多数风格的低技术解决方案是在模式开始时使用前瞻：

```
(?=.*?(?P<pattern1>BEGIN))
(?=.*?(?P<pattern2>END))
...
(?P=pattern1) (?# should work - it was captured ) 
```********

# android - Android 启动系统应用

> ID：10668679
> 
> 赞同：0
> 
> 时间：2012-05-19T20:35:42.743
> 
> 标签：android, android-intent, system, package

嘿，这可能是一个相当新手的问题，但无论如何。如何启动系统上预安装的应用程序。例如：假设我想在手机上启动/启动地图应用程序或默认联系人/通话应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:43:51.830

`Intent`s 是开始其他活动的方式。我建议阅读[此](http://www.vogella.com/articles/AndroidIntent/article.html)操作指南。

# php - PHP：从多个来源填充数组

> ID：10668680
> 
> 赞同：1
> 
> 时间：2012-05-19T20:35:44.727
> 
> 标签：php, database, arrays

我需要创建一个数组，其中前两列从 MySQL DB 填充，而其他 1440 列用零填充。请看我的代码。

前两列正确填充，而 zeros(0,1440) 生成 Array[0]。结果，列数为 3 (Array[3]) 而不是 1442。

它出什么问题了？

```
$query2="SELECT resID, resTitle FROM my_db.resources;";
$result2=DatabaseConnector::ExecuteQueryArray($query2); 

$i=0;
    $resAlloc = array();
    foreach ($result2 as $row):
        $resAlloc[$i] = array($row['resID'],$row['resTitle'],zeros(0,1440));
        $i++;
    endforeach;

// Generate an array of zeros
function zeros($rowCount, $colCount){
    $matrix = array();
    for ($rowIndx=0; $rowIndx<$rowCount; $rowIndx++){
        $matrix[] = array();
        for($colIndx=0; $colIndx<$colCount; $colIndx++){
            $matrix[$rowIndx][$colIndx]=0;
        }
        var_dump(memory_get_usage());
    }
    return $matrix;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:44:20.570

鉴于您上面的评论，

```
 $resAlloc[$i] = array($row['resID'],$row['resTitle'],zeros(0,1440)); 
```

永远不会工作。您正在创建的是一个包含 3 个元素的数组。此代码等效于：

```
 $resAlloc[$i] = array(
      0 => $row['resID'],
      1 => $row['resTitle'],
      2 => array(...)   // array returned from the zeros() function
   ); 
```

它不会是一个 1440 元素的数组，而是一个 3 元素的数组。

要使此代码按您的意愿工作，您必须执行以下操作：

```
$resAlloc[$i] = array(0 => $row['resID'], 1 => $row['resTitle']);
for($j = 2; $j < 1442; $j++) {
   $resAlloc[$i][$j] = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:44:59.767

怎么样：

```
$query2="SELECT resID, resTitle FROM my_db.resources;";
$result2=DatabaseConnector::ExecuteQueryArray($query2); 

$i=0;
$resAlloc = array();
foreach ($result2 as $row):
    $resAlloc[$i][] = $row['resID'];
    $resAlloc[$i][] = $row['resTitle']
    for ($j=0; $j<1440; $j++)
    {
        $resAlloc[$i][] = 0;
    }
    $i++;
endforeach; 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:53:47.957

为什么不创建全为 0 的列，然后将数据放在前两个中？此代码不需要滚动您自己的函数来生成一个零数组，它使用内置函数来完成这项工作。

```
$resAlloc[$i] = array_fill(0,1442,0);
$resAlloc[$i][0] = $row['resID'];
$resAlloc[$i][1] = $row['resTitle']; 
```

# javascript - 为什么匿名函数可以从定义它的函数访问变量？

> ID：10668683
> 
> 赞同：1
> 
> 时间：2012-05-19T20:36:05.827
> 
> 标签：javascript, function, object, this

我试图了解 jQuery 和 JavaScript 对象和函数，并掌握它是如何`this`工作的以及它指向的位置。

请有人可以解释为什么[这](http://www.javascriptkata.com/2007/05/14/how-to-use-the-self-with-object-oriented-javascript-and-closures/)有效。

```
Cat.prototype.meowLater = function() {
    var self = this;
    window.setTimeout(
        function() {
            self.meow();
        }
        , 1000);
} 
```

我感兴趣和困惑的一点是为什么`self`实际上可以在计时器调用的匿名函数中访问该变量。我认为因为`self`在另一个函数中声明了它是本地的并且只能由该函数访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:38:55.847

函数从父作用域继承变量（除非被另一个同名且作用域更窄的变量屏蔽）。

由于匿名函数是在`self`作用域的函数内部定义的，因此它可以访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T20:43:13.420

> 内部函数可以使用外部函数可用的变量。

这里，

```
Cat.prototype.meowLater = function() {
    // I create the variable self that refers to the this (the current object)
    var self = this;

    // I create a timeout that calls the self.meow function within an anonymous function
    /*** NOTE : You don’t always have to create an anonymous function it’s just that in
        this case, it is required ***/
    window.setTimeout(
        function() {
            self.meow();
        }
        , 1000);
} 
```

因为，`setTimeout`是 的内部函数`Cat.prototype.meowLater`，`self`可用于`setTimeout`。

另外，
我们在`this.meow()`这里没有使用，因为`this`指的是当前对象，因此`window`是`setTimeout`函数中的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:43:05.437

Javascript 具有嵌套范围，因此另一个函数内部的函数会继承外部函数的所有变量（它仍在范围内）。当您使用异步函数时（`setTimeout`在这种情况下），变量`self`将引用作用域 self 变量，它是`this`（一个 Cat 实例），但`this`将是 window.self 变量。

希望这会有所帮助，这需要一些时间来适应。

# java - 如何使用 Java 根据其在 App Engine Datastore 中的后代属性查询实体

> ID：10668686
> 
> 赞同：1
> 
> 时间：2012-05-19T20:36:47.713
> 
> 标签：java, google-app-engine, google-cloud-datastore

如何从 MessageIndex 中找到所有符合条件的父键。请注意，Message 是 MessageIndex 的父级。

如果我不指定直接祖先，它会一直返回空。

```
Query query1 = new Query("MessageIndex");
query1.setKeysOnly();
query1.addFilter("receivers", FilterOperator.EQUAL, me);
PreparedQuery pq2 = datastore.prepare(query1);

Iterable<Entity> entities = pq2.asIterable();
HashSet<Key> keys = new HashSet<Key>();
    for (Entity en : entities)
      keys.add(en.getParent());

Map<Key,Entity> messages = datastore.get(keys); 
```

我将不胜感激。

# meteor - 如何将缓存清单添加到 Meteor 应用程序？

> ID：10668687
> 
> 赞同：4
> 
> 时间：2012-05-19T20:37:01.660
> 
> 标签：meteor

好吧，添加它是没有问题的，但是我怎样才能生成缓存清单呢？我需要以某种方式获取 Meteor 生成的组合 CSS 和 JS 的路径。[http://www.whatwg.org/specs/web-apps/current-work/#manifests](http://www.whatwg.org/specs/web-apps/current-work/#manifests)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:00:13.990

**更新：**

正如用户 1506145 所说：

```
meteor add appcache 
```

[https://atmospherejs.com/meteor/appcache](https://atmospherejs.com/meteor/appcache)

**此答案已过时：**

答案就在 bundler 包中，我在那里自动生成了一个清单文件。您可以通过以下方式获取 css 和 js 文件的完整列表：`bundle.css`和`bundle.js.client`

一旦你设法让他们获得一个清单文件，你将需要使用你生成的 manifestcontent var 执行以下操作（不要忘记从缓存所有需要的流星 url 中排除）：

```
buffer.files.client_cacheable['manifest.appcache'] = new Buffer(manifestcontent); 
```

这将使您的应用程序为 appcache 文件提供服务。然后您可以编辑 /app/lib/app.html.in 以添加引用。

当我这样做时，我的问题是我无法经常使缓存过时，因此最终导致应用程序在从服务器重新加载时搞砸了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-26T14:33:12.150

您可以通过添加 appcache 包来自动生成并包含清单。

`meteor add appcache`

[https://atmospherejs.com/meteor/appcache](https://atmospherejs.com/meteor/appcache)

# objective-c - 如何通过 CGRect 过滤 NSArray 中的 CGPoints

> ID：10668694
> 
> 赞同：4
> 
> 时间：2012-05-19T20:37:47.347
> 
> 标签：objective-c, ios, cocoa-touch, nsarray

我有一个`NSArray`with `CGPoints`。我想通过仅包含矩形内的点来过滤此数组。

我怎样才能制定一个`NSPredicate`这样的每个点都满足这个谓词：

> CGRectContainsPoint(windowRect, point);

这是到目前为止的代码：

```
NSArray *points = [NSArray arrayWithObjects: [NSValue valueWithCGPoint:pointAtYZero] ,
                                             [NSValue valueWithCGPoint:pointAtYHeight],
                                             [NSValue valueWithCGPoint:pointAtXZero],
                                             [NSValue valueWithCGPoint:pointAtXWidth],
                                             nil];

NSPredicate *inWindowPredicate = [NSPredicate predicateWithFormat:@"CGRectContainsPoint(windowRect, [point CGPointValue])"];
NSArray *filteredPoints = [points filteredArrayUsingPredicate:inWindowPredicate]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T20:54:00.707

您不能使用谓词格式语法来执行此操作，但可以使用块：

```
NSArray *points = ...;
CGRect windowRect = ...;    
NSPredicate *inWindowPredicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
    CGPoint point = [evaluatedObject CGPointValue];
    return CGRectContainsPoint(windowRect, point);
}];
NSArray *filteredPoints = [points filteredArrayUsingPredicate:inWindowPredicate]; 
```

请注意，Core Data 获取请求不能使用基于块的谓词。

# android - 能 用于检查是否安装了应用程序以及如何安装？与共享库相反？

> ID：10668699
> 
> 赞同：0
> 
> 时间：2012-05-19T20:38:33.347
> 
> 标签：android, installation, package, manifest

我有一个应用程序小部件项目，它依赖于安装了相应的应用程序。

因此，所需应用程序的包名称是

```
com.radlmaier.saintscalendar 
```

在应用程序小部件清单中，我在标签内有以下标签：

```
<uses-library android:name="com.radlmaier.saintscalendar" android:required="true" /> 
```

现在，当未安装应用程序时，小部件安装会失败，这是应该的。但是如果安装了应用程序，小部件安装也会失败，logcat 会说：

```
05-19 22:28:35.359: E/PackageManager(14680): Package com.radlmaier.saintscalendarwidget requires unavailable shared library com.radlmaier.saintscalendar; failing! 
```

我显然在这里遗漏了一些东西。与共享库相比，是否不能使用标签来检查已安装的包？有人可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:48:29.907

> 与共享库相比，是否不能使用标签来检查已安装的包？

那肯定是不可能的。`<uses-library>`用于需要 SDK 插件（例如，谷歌地图）。

> 我有一个应用程序小部件项目，它依赖于安装了相应的应用程序。

Android 没有应用依赖机制，所以如果你想要这个，你将不得不自己滚动它。就个人而言，我建议将这些简单地组合到一个应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:51:17.110

试试这个：

```
Intent myIntent = new Intent(Intent.ACTION_MAIN).setClassName("com.radlmaier.saintscalendar", "com.radlmaier.saintscalendar.yourclassname");
boolean isInstalled = getPackageManager().queryIntentActivities(myIntent, 0).size() > 0; 
```

如果尚未安装，并且您想将它们发送到 Play 商店进行安装，请尝试以下操作：

```
Intent marketIntent = new Intent(Intent.ACTION_VIEW);
marketIntent.setData(Uri.parse("market://search?q=pname:com.radlmaier.saintscalendar"));
startActivity(marketIntent); 
```

# algorithm - DAG 图和拓扑排序混淆基础

> ID：10668702
> 
> 赞同：2
> 
> 时间：2012-05-19T20:38:46.620
> 
> 标签：algorithm, data-structures, graph, directed-acyclic-graphs

我正在阅读有向无*环图*，我无法*通过重新标记来理解拓扑顺序*的概念。
我对*拓扑顺序*的一般理解是，我们找到顶点的顺序，以便我们从没有输入边的那个移动到路径上的下一个，依此类推，直到我们完成 DAG 中的所有顶点。
但我不明白重新标记有什么帮助。我的意思是重新标记顶点有什么意义？我们真的不这样打破图表吗？
任何人都可以用它的应用示例简单地解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:55:31.730

如果没有参考，我无法确定，但在这种情况下重新标记通常意味着改变顶点的顺序。这并不意味着改变图的拓扑结构（边和顶点），它意味着改变排序顺序。

您也可以将其视为为图形生成置换矩阵或向量。这将创建与原始图[同构](https://en.wikipedia.org/wiki/Graph_isomorphism)的图，但其中顶点 1,2,3...,n 对应于排序顺序

# silverlight - 组合表单上的元素

> ID：10668704
> 
> 赞同：0
> 
> 时间：2012-05-19T20:39:23.890
> 
> 标签：silverlight, xaml

我有两个矩形和一个椭圆。如何组合它们并在新的组合元素上使用相同的动画？

```
<Rectangle Height="100" HorizontalAlignment="Left" Margin="220,235,0,0" Name="rectangle2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="38" Fill="LightGreen" />
<Ellipse Height="23" HorizontalAlignment="Left" Margin="227,269,0,0" Name="ellipse1" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="24" Fill="Yellow" />
<Ellipse Height="17" HorizontalAlignment="Left" Margin="12,266,0,0" Name="ellipse2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="17" Fill="#FF58FF00" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:02:42.613

如果您想要固定大小的元素，相对于彼此移动，然后将它们放在画布中并使用画布坐标来定位它们。

画布的渲染开销很低，因为它只显示其子元素（以像素偏移量表示），并且没有复杂的边距或行计算。

相当于你的例子是：

```
 <Canvas HorizontalAlignment="Left" Margin="12,235,0,145" Width="246">
        <Rectangle Height="100" x:Name="rectangle2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="38" Fill="LightGreen" Canvas.Left="208" />
        <Ellipse Height="23" x:Name="ellipse1" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="24" Fill="Yellow" Canvas.Left="215" Canvas.Top="34" />
        <Ellipse Height="17" x:Name="ellipse2" Stroke="Black" StrokeThickness="1" VerticalAlignment="Top" Width="17" Fill="#FF58FF00" Canvas.Top="31" />
    </Canvas> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:42:19.380

分组到 T:Panel。通常我首先在 Canvas 中进行分组，然后在 Viewbox (Fill ot Fit) 中进行分组。

# jpa - 无状态 EJB 中的事务感知对象

> ID：10668708
> 
> 赞同：0
> 
> 时间：2012-05-19T20:40:01.247
> 
> 标签：jpa, transactions, ejb, eclipselink

我对事务在 EJB 中的工作方式有点困惑。我一直认为，当 TransactionAttribute=REQUIRED_NEW 的方法完成时，容器管理的 EJB 中的所有事务感知对象都已提交或回滚，但不幸的是，我的情况并非如此。我面前没有我的代码，所以我不能包含整个示例，但我要求的只是确认它应该如何工作的想法。
仅显示我头脑中代码的关键点：

```
EntityManager em; //injected
[...]
public void someEJBMethod() {
  [...]
  em.persist(someObject);
  [...]
  Session session = JpaHelper.getEntityManager(em).getActiveSession();
  [...]
  session.executeQuery(query, args);
  [...]
  if (someCondition) {
    throw new EJBException();
  }  
  [...]
} 
```

我的问题是，当抛出 EJBException 时，由 em.persist 引起的数据库更改被回滚，但由 session.executeQuery 引起的更改被提交。这是预期的行为吗？
我正在使用 Glassfish 3.1.2、EclipseLink 2.3.2 和 Oracle 数据库

**更新**（添加了测试用例）
我创建了工作测试用例来显示问题

第一个数据库对象：

```
create table txtest
(id number not null primary key,
 name varchar2(50) not null);

create or replace function txtest_create(p_id number, p_name varchar2) return number is
begin
  insert into txtest
  (id, name)
  values
  (p_id, p_name);

  return p_id;
end; 
```

数据库连接的定义（来自 domain.xml）

```
<jdbc-connection-pool driver-classname="" datasource-classname="oracle.jdbc.pool.OracleConnectionPoolDataSource" res-type="javax.sql.ConnectionPoolDataSource" description="" name="TxTest">
  <property name="User" value="rx"></property>
  <property name="Password" value="rx"></property>
  <property name="URL" value="jdbc:oracle:thin:@test:1529:test"></property>
</jdbc-connection-pool>
<jdbc-resource pool-name="TxTest" description="" jndi-name="jdbc/TxTest"></jdbc-resource> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="txTest">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/TxTest</jta-data-source>
        <class>txtest.TxTest</class>
    </persistence-unit>
</persistence> 
```

会话 bean：

```
@Stateless
public class TxTestBean implements TxTestBeanRemote, TxTestBeanLocal {
    private static Logger log = Logger.getLogger(TxTestBean.class.getName());

    @PersistenceContext(unitName="txTest")
    EntityManager em;

    @SuppressWarnings({ "unchecked", "rawtypes" })
    @Override
    public void txTest(boolean throwException) {
        TxTest t = new TxTest();
        t.setId(1L);
        t.setName("em.persist");
        em.persist(t);

        Session session = JpaHelper.getEntityManager(em).getActiveSession();
        log.info("session : " + String.valueOf(System.identityHashCode(session)));
        PLSQLStoredFunctionCall call = new PLSQLStoredFunctionCall();
        call.setProcedureName("txtest_create");
        call.addNamedArgument("p_id", JDBCTypes.NUMERIC_TYPE);
        call.addNamedArgument("p_name", JDBCTypes.VARCHAR_TYPE, 50);
        call.setResult(JDBCTypes.NUMERIC_TYPE);

        ValueReadQuery query = new ValueReadQuery();
        query.setCall(call);
        query.addArgument("p_id");
        query.addArgument("p_name");

        t = new TxTest();
        t.setId(2L);
        t.setName("session.executeQuery");

        List args = new ArrayList();
        args.add(t.getId());
        args.add(t.getName());

        Long result = ((Number)session.executeQuery(query, args)).longValue();

        //added to see the state of txtest table in the database before exception is thrown
        try {
            Thread.sleep(20000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        log.info("result=" + result.toString());

        if (throwException) {
            throw new EJBException("Test error #1");
        }
    }
} 
```

调用 txTest(true) 时来自 server.log 的条目：

```
[#|2012-05-21T12:04:15.361+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.connection|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|client acquired: 21069550|#]
[#|2012-05-21T12:04:15.362+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.transaction|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|TX binding to tx mgr, status=STATUS_ACTIVE|#]
[#|2012-05-21T12:04:15.362+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.transaction|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|acquire unit of work: 16022663|#]
[#|2012-05-21T12:04:15.362+0200|FINEST|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.transaction|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|persist() operation called on: txtest.TxTest@11b9605.|#]
[#|2012-05-21T12:04:15.363+0200|INFO|glassfish3.1.2|txtest.TxTestBean|_ThreadID=167;_ThreadName=Thread-2;|session : 16022663|#]
[#|2012-05-21T12:04:15.364+0200|FINEST|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.query|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|Execute query ValueReadQuery()|#]
[#|2012-05-21T12:04:15.364+0200|FINEST|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.connection|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|Connection acquired from connection pool [read].|#]
[#|2012-05-21T12:04:15.364+0200|FINEST|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.connection|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|reconnecting to external connection pool|#]
[#|2012-05-21T12:04:15.365+0200|FINE|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.sql|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|
DECLARE
  p_id_TARGET NUMERIC := :1;
  p_name_TARGET VARCHAR(50) := :2;
  RESULT_TARGET NUMERIC;
BEGIN
  RESULT_TARGET := txtest_create(p_id=>p_id_TARGET, p_name=>p_name_TARGET);
  :3 := RESULT_TARGET;
END;
  bind => [:1 => 2, :2 => session.executeQuery, RESULT => :3]|#]
[#|2012-05-21T12:04:15.370+0200|FINEST|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.connection|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|Connection released to connection pool [read].|#]
[#|2012-05-21T12:04:35.372+0200|INFO|glassfish3.1.2|txtest.TxTestBean|_ThreadID=167;_ThreadName=Thread-2;|result=2|#]
[#|2012-05-21T12:04:35.372+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.transaction|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|TX afterCompletion callback, status=ROLLEDBACK|#]
[#|2012-05-21T12:04:35.372+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.transaction|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|release unit of work|#]
[#|2012-05-21T12:04:35.372+0200|FINER|glassfish3.1.2|org.eclipse.persistence.session.file://txTest/_txTest.connection|_ThreadID=167;_ThreadName=Thread-2;ClassName=null;MethodName=null;|client released|#]
[#|2012-05-21T12:04:35.373+0200|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=167;_ThreadName=Thread-2;|EJB5184:A system exception occurred during an invocation on EJB TxTestBean, method: public void txtest.TxTestBean.txTest(boolean)|#]
[#|2012-05-21T12:04:35.373+0200|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=167;_ThreadName=Thread-2;|javax.ejb.EJBException: Test error #1 
```

最让我惊讶的是，当我在这 20 秒内检查 txtest 表时。sleep 记录（2，“session.executeQuery”）已经存在。
似乎 session.executeQuery 以某种方式提交了它的工作（但不是整个事务）。

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T21:09:55.820

我不确定`JpaHelper.getEntityManager(em).getActiveSession();`应该做什么，但似乎这不会返回容器管理的实体管理器。根据它的具体实现方式，它可能不参与正在进行的（JTA）事务。

但通常情况下，事务资源都会自动参与正在进行的 JTA 事务。概括地说，他们通过检查是否存在正在进行的交易来做到这一点，如果确实存在，他们就在该交易中注册自己。

在 EJB 中，`REQUIRES_NEW`不是唯一可以启动事务“REQUIRES”（默认）的模式在客户端没有启动事务的情况下也会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:33:14.080

我已经解决了！！！

事实证明，EclipseLink 使用读取连接池来处理读取查询（显然这种池使用自动提交，甚至根本不使用事务）和默认连接池用于数据修改查询。所以我必须做的是改变：

```
ValueReadQuery query = new ValueReadQuery(); 
```

进入

```
DataModifyQuery query = new DataModifyQuery(); 
```

它就像一个魅力。

**更新**
`DataModifyQuery`不允许获取函数的结果。它返回修改的行数。所以我回到了`ValueReadQuery`persistance.xml中但使用了配置参数

```
<property name="eclipselink.jdbc.exclusive-connection.mode" value="Always"/> 
```

此参数告诉 EclipseLink 使用默认连接池进行读取和写入。

# backbone.js - 附加到所有视图的主干视图事件

> ID：10668710
> 
> 赞同：0
> 
> 时间：2012-05-19T20:40:06.540
> 
> 标签：backbone.js, backbone-events, backbone-views

我正在主干中执行我的第一个应用程序，并且尝试附加事件时发生了一件奇怪的事情。

到目前为止我得到了这个代码：

```
//View for @girl, EDIT action
GirlEditView = Backbone.View.extend({
    initialize: function(el, attr) {
        this.variables = attr;
        console.log(attr);
        this.render();
    },
    render: function() {
        var template = _.template( $("#girl_edit").html(), this.variables );
        $(this.el).html( template );
        $("#edit_girl").modal('show');
    }
});

//View for @girl
GirlView = Backbone.View.extend({
    initialize: function(el, attr) {
        this.variables = attr;
        this.render();
    },
    render: function() {
        var template = _.template( $("#girl_template").html(), this.variables );
        $(this.el).html( $(this.el).html() + template );
    },
    events: {
        "click p.modify": "modify"
    },
    modify: function() {
        //calls to modify view
        new GirlEditView({el : $("#edit_girl")}, this.variables);
    }
});

//One girl from the list
Girl = Backbone.Model.extend({
    initialize: function() {
        this.view = new GirlView({el : $("#content")}, this.attributes );
    }
});

//all the girls
Girls = Backbone.Collection.extend({
    model: Girl,
});

//do magic!
$(document).ready(function() {

    //Underscore template modification
    _.templateSettings = {
        escape : /\{\[([\s\S]+?)\]\}/g,
        evaluate : /\{\[([\s\S]+?)\]\}/g,
        interpolate : /\{\{([\s\S]+?)\}\}/g
    }

    //get initial data and fill the index
    var list = [];
    $.getJSON('girls.json', function(data) {
        list = [];
        $.each(data, function(key, val) {
            list.push( new Girl(val) );
        });

        var myGirls = new Girls(list);
        console.log( myGirls.models);
    });
}); 
```

如你看到的。

我正在使用一个集合来存储所有女孩，数据来自 ruby​​ 中的 REST api。

每个女孩创建一个新的模型实例，并在里面附加了一个视图实例。

我不知道这是否是一个好习惯，但我想不出更好的方法来做到这一点。

每个视图都会创建一个具有唯一 ID 的内容。girl-1 girl-2 继续。

现在，模板有一个编辑按钮。我最初的想法是攻击onclick事件并触发编辑视图进行渲染。

这是按预期工作的。

到目前为止的问题是：

当事件触发时，所有集合（女孩）都会触发编辑视图，而不是“拥有”渲染视图的集合。

我的问题是我做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T23:57:10.693

所有的编辑视图都出现了，因为所有的 GirlViews 都使用相同的`el`：

```
this.view = new GirlView({el : $("#content")}, this.attributes ); 
```

然后你渲染附加更多的 HTML：

```
render: function() {
    var template = _.template( $("#girl_template").html(), this.variables );
    $(this.el).html( $(this.el).html() + template );
} 
```

主干事件绑定[`delegate`](http://api.jquery.com/delegate/)在视图的`el`. 因此，如果多个视图共享同一个 DOM 元素`el`，您将有多个`delegate`s 附加到同一个 DOM 元素，您的事件将是一团内斗。

你的情况有点倒退：模型不拥有视图，视图监视模型和集合并响应它们的事件。您将[在文档中](http://documentcloud.github.com/backbone/#View-constructor)看到这一点：

> **构造函数/初始化** `new View([options])`
> 
> [...] 有几个特殊选项，如果通过，将直接附加到视图：`model`, `collection`, [...]

通常，您创建一个集合，`c`然后通过将该集合交给它来创建视图：

```
var v = new View({ collection: c }) 
```

或者您创建一个模型，`m`然后创建一个围绕该模型的视图：

```
var v = new View({ model: m }) 
```

然后视图绑定到集合或模型上的事件，以便它可以在底层数据更改时更新其显示。该视图还充当 Backbone 中的控制器并将用户操作转发到模型或集合。

您的初始化应该看起来更像这样：

```
$.getJSON('girls.json', function(data) {
    $.each(data, function(key, val) {
        list.push(new Girl(val));
    });

    var myGirls = new Girls(list);
    var v       = new GirlsView({ collection: myGirls });
}); 
```

然后`GirlsView`将遍历集合并`GirlView`为每个模型创建单独的 s：

```
var _this = this;
this.collection.each(function(girl) {
    var v = new GirlView({ model: girl });
    _this.$el.append(v.render().el);
}); 
```

然后，`GirlView`将呈现如下：

```
// This could go in initialize() if you're not certain that the
// DOM will be ready when the view is created.
template: _.template($('#girl_template').html()),
render: function() {
    this.$el.html(this.template(this.model.toJSON());
    return this;
} 
```

结果是每个模型视图都有自己的独特`el`之处来本地化事件。这也使得添加和删除 GirlView 变得非常容易，因为所有内容都很好地包含在自己的`el`.

# ios - 当以编程方式调用其处理程序时，为什么 UIButton 不会更改其图像？

> ID：10668715
> 
> 赞同：1
> 
> 时间：2012-05-19T20:41:00.430
> 
> 标签：ios, xamarin.ios, uibutton

出于某种原因，当尝试通过 Stop() 方法以编程方式激活按钮时，按钮图像不会变回与正常状态关联的图像，直到我再次用鼠标单击按钮。有任何想法吗？

```
 public void Stop()
    {
        buttonStartStop.SendActionForControlEvents(UIControlEvent.TouchUpInside);
    }

    partial void actionButtonStartStopPress(MonoTouch.Foundation.NSObject sender)
    {
        Console.WriteLine("StartStop Button State On Entering Handler: " + buttonStartStop.State);
        if(buttonStartStop.State == UIControlState.Highlighted)
        {
            buttonStartStop.Selected = true;
            buttonStartStop.Highlighted = true;
            buttonLiveHome.Enabled = false;
            buttonLiveBack.Enabled = false;
            buttonCalibrate.Enabled = false;
            MainLoop.StreamData(true);
        }
        else
        {
            buttonStartStop.SetTitle("Start", UIControlState.Normal);
            buttonStartStop.Selected = false;
            buttonStartStop.Highlighted = false;
            buttonLiveHome.Enabled = true;
            buttonLiveBack.Enabled = true;
            buttonCalibrate.Enabled = true;
            MainLoop.StreamData(false);
        }

        Console.WriteLine("StartStop Button State On Exiting Handler (0 means Normal): " + buttonStartStop.State);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:49:35.570

您必须从按钮的主线程发送操作。

```
public void Stop()
{
    buttonStartStop.InvokeOnMainThread (new NSAction (()=> {
        buttonStartStop.SendActionForControlEvents(UIControlEvent.TouchUpInside);
    }));
} 
```

# windows-8 - 如何在 Windows 8 中以编程方式捕捉应用程序？

> ID：10668721
> 
> 赞同：1
> 
> 时间：2012-05-19T20:41:52.360
> 
> 标签：windows-8, winjs

如何以编程方式将 Windows 8 应用程序设置为快照视图？此外，如果屏幕分辨率为 1024 且不允许使用快照，会发生什么情况？调用这个函数会不会出现异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:07:51.890

要回答您的问题 - 如何以编程方式将 Windows 8 应用程序设置为快照视图？

似乎这是不可能的。请参考以下链接。

[http://social.msdn.microsoft.com/Forums/en-US/winappsuidesign/thread/263b39dd-89d4-4f39-96dc-596a500fa10a](http://social.msdn.microsoft.com/Forums/en-US/winappsuidesign/thread/263b39dd-89d4-4f39-96dc-596a500fa10a)

# javascript - wxWebView 和 JavaScript

> ID：10668723
> 
> 赞同：0
> 
> 时间：2012-05-19T20:42:01.723
> 
> 标签：javascript, c++, youtube, wxwidgets, youtube-javascript-api

我正在尝试用 C++ 和 wxWidgets 编写一个访问 YouTube 并使用 JavaScript 启动视频的程序。

它使用 YouTube JavaScript API，其文档可在[此处](https://developers.google.com/youtube/js_api_reference)找到。

我编写了以下一段代码来播放“O，Canada”，特别是[这里](http://www.youtube.com/watch?v=zwDvF0NtgdU)的代码。

```
wxWebView *webview = wxWebView::New(this, wxID_ANY, "http://www.youtube.com/watch?v=zwDvF0NtgdU");
webview->RunScript("function onYouTubePlayerReady(playerId) {document.getElementById('watch-player').playVideo();}"); 
```

运行上述代码未能实现其预期目的，给我以下错误和崩溃：

> ....\src\msw\wxwebview_ie.cpp(762): "assert "document" 在 wxWebViewIE::GetDocument() 中失败。

我知道我的代码已成功加载页面，但运行 JavaScript（`RunScript()`函数）似乎会导致错误。

我在 Windows 上使用 wxWidgets 2.9.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:03:50.013

这应该在[修订版 71030](http://trac.wxwidgets.org/changeset/71030/wxWidgets)中得到修复，该修订版比您使用的 2.9.3 版本更新。您可以通过[SVN](http://www.wxwidgets.org/develop/svn.htm)或每日[快照](http://biolpc22.york.ac.uk/pub/Daily_HEAD/)获取更新的代码。如果仍然无法解决，请在 wxWidgets [Trac](http://trac.wxwidgets.org/)上提交错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T19:41:40.020

问题实际上是因为我在页面加载之前调用 JavaScript 太早了。如果我稍后调用它，它会起作用。

# asp.net - 测试 ASP.net MVC 3 业务/数据逻辑

> ID：10668734
> 
> 赞同：0
> 
> 时间：2012-05-19T20:43:19.560
> 
> 标签：asp.net, asp.net-mvc-3, unit-testing, nhibernate

在 mvc 3 解决方案中测试数据访问层和业务逻辑的最佳方法是什么？

我目前有一个项目，我使用存储库类来访问数据库，而数据库又使用休眠。当我尝试在自动生成的单元测试中为它们创建单元测试时，它们总是失败，因为 nhibernate 的配置在 web.config 中并且它不会尝试在那里查看。我究竟做错了什么？此特定方法返回此错误

```
"The Web request 'http://localhost:35601/' completed 
successfully without running the test" 
```

测试方法如下所示

```
 [TestMethod()]
    [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("C:\\Users\\...", "/")]
    [UrlToTest("http://localhost:35601/")]
    public void GetByIdTest()
    {
        string someid= "..";
        SomeObj actual = MyRepository.GetById(someid);
        Assert.AreEqual(some, SomeObj.id);
    } 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:27:17.087

将设置放在 app.config 中应该可以解决您上面提出的问题，但是更正确的答案是您应该使用模拟框架来模拟 nHibernate 会话。

您找到了需要更改以适应测试的区域这一事实很棒！！！这是单元测试的优点之一；您发现代码中的耦合应该被重构。

我发现另一篇文章解决了您尝试直接[使用 Moq 模拟 NHibernate ISession](https://stackoverflow.com/questions/1828878/mocking-an-nhibernate-isession-with-moq)所做的事情。帖子中有两个答案提供了可能有用的方法。

我希望这有帮助。我没有使用 nHibernate，所以我不能权威地谈论它，或者上面的链接会为您提供答案，但每个答案都有十个赞成票，所以看起来它是一个可靠的帖子！

# c++ - Windows C++ 过滤声音输出

> ID：10668740
> 
> 赞同：0
> 
> 时间：2012-05-19T20:43:54.247
> 
> 标签：c++, windows, api, audio, filter

我正在考虑为需要过滤所有应用程序的所有声音输出并更改它的 Windows 编写一个 C++ 应用程序。

我在 C++ 和 windows 编程方面只有中等经验，我意识到这将是一个学习曲线。

建议使用什么声音 api 来完成此操作？如果有人对此有其他建议，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:46:56.110

据我了解，Windows Vista 及更高版本可能有一些方法可以做到这一点，但我不熟悉它，或者它是否可以用于你需要的东西。

通常，这样做的唯一方法是创建一个虚拟声卡驱动程序，您的应用程序会将其音频数据发送到该驱动程序。从那里，您将需要一个用户级应用程序，从不同的声音设备播放该音频。

您可以许可[现有的虚拟声卡驱动程序](http://stereomixplus.com/)，也可以自己编写（非常困难）。

# eclipse - 如何在 Eclipse 中重复运行 Wicket/Maven/Jetty 项目？

> ID：10668742
> 
> 赞同：0
> 
> 时间：2012-05-19T20:44:20.207
> 
> 标签：eclipse, maven, configuration, jetty, wicket

感谢这些信息[http://www.ralfebert.de/blog/wicket/wicket_eclipse_setup/](http://www.ralfebert.de/blog/wicket/wicket_eclipse_setup/)以及[如何开始使用 Wicket？](https://stackoverflow.com/questions/5119708/how-can-i-begin-using-wicket)现在我可以使用 Eclipse 编辑 Java 代码和 html 文件，并运行它来启动 Jetty。

但是仍然有两个问题不允许我重复运行该项目：

1.  我必须停止上一次运行才能再次运行
2.  不像普通的Java项目，我可以简单地选择“运行”，现在我必须进入“运行配置”，选择Maven构建类型，然后在下面选择我要运行的项目，最后点击“运行”

广告1。如何让 Eclipse 在下次运行时停止上一次运行——即我只想运行项目，Eclipse 应该运行它，或者停止前一个运行并再次运行它

广告 2。如何“绑定”运行/运行以运行我的配置（Maven 构建/我的项目）？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:25:44.873

另一个简单的选择是使用 Start 类，该类具有运行的 main 和嵌入的 jetty。然后，您将能够使用 IDE 将您的应用程序作为普通桌面 Java 应用程序运行和调试。

在此处检查 wicket 快速入门附带的示例启动文件：

[https://github.com/jordeu/wicket/blob/master/archetypes/quickstart/src/main/resources/archetype-resources/src/test/java/Start.java](https://github.com/jordeu/wicket/blob/master/archetypes/quickstart/src/main/resources/archetype-resources/src/test/java/Start.java)

# php - 如何使用 PHP 查找两个文本文件之间的差异

> ID：10668743
> 
> 赞同：1
> 
> 时间：2012-05-19T20:44:20.383
> 
> 标签：php, scripting

最近，我一直想知道如何使用 PHP 找到两个文件之间的区别。例如，我有一个文本文件，上面写着：

```
"Line one data = test test" 
```

然后一个文件说：

```
"Line one data = test test Line two data = test test" 
```

我想要做的是输出这两个文件之间的差异：

```
"Line two data = test test" 
```

我怎样才能用 PHP 做到这一点？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:47:03.213

将文本文件转换为字符串，然后使用[str_replace()](http://php.net/manual/en/function.str-replace.php)

```
$one = "Line one data = test test";
$two = "Line one data = test test Line two data = test test";

$difference = str_replace($one, "", $two); 
```

或者使用[str_ireplace](http://www.php.net/manual/en/function.str-ireplace.php)进行区分大小写的替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:49:03.400

```
$str1 = "Line one data = test test";
$str2 = "Line one data = test test Line two data = test test"; 
```

如果 $str2 是较长的字符串并且 $str1 总是在 $str2 的开头，那么您可以使用：

```
echo substr($str2, strlen($str1)); 
```

它比 str_replace 快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T00:28:22.487

您可以从两个文件的 md5 校验和开始。如果输出哈希不同，则文件不同。但我很确定这不是我想的问题。因为我认为你的要求没有简单的答案。您可能想更简洁地阅读“差异”。这是一种算法，它可以读取 2 个文件，不仅可以确定它们是否不同，而且还可以对 2 个文件进行并排比较，向您显示差异所在。现在我确信这在 PHP 中是可行的。只是不确定是否有人有，我也没有广泛搜索它。只有当我在 svn 或 git 上运行我的版本控制代码时才使用 diff。

有一个名为“Notepad++”的好程序，它能够向其中添加插件，其中一个用于比较的插件就像刚才描述的那样可用。

# c - C: scanf 和字符串

> ID：10668745
> 
> 赞同：0
> 
> 时间：2012-05-19T20:44:21.163
> 
> 标签：c, string, scanf

我对 scanf 和两个字符串有问题。

```
char city1[11], city2[11];
for(int i = 0; i < (m + k); i++) {
scanf("%s %s", city1, city2);
} 
```

我应该读 (m + k) thimes 两个字符串 - citites 的名称。问题是，当我写一些字符串时，按 Enter 什么也没发生。指针在屏幕上，但我无能为力。我试图在 scanf 之后用 printf 写一些东西，但它不起作用。：/

更多代码：

```
int n, m, k;
do {
    scanf("%d %d %d", &n, &m, &k);
} while(n < 2 || n > 10001 || -1 < m || m > 100001 || -1 < k || k > 100001);

city* cities = (city*)malloc(n*sizeof(city));
path* paths = (path*)malloc((m + k)*sizeof(path));
int addCities = 0;
char city1[11], city2[11];
for(int i = 0; i < (m + k); i++) {
    scanf("%s %s", city1, city2);
    printf("ok");

    if(addCities < n && !isListed(cities, n, city1)) { // if city1 is not into cities
        // add it
        strcpy(cities[addCities].name, city1);
        cities[addCities].prev = NO_PARENT;
        addCities++;
    }
    paths[i].i = getCityNumber(cities, n, city1); // number of city1

    if(addCities < n && !isListed(cities, n, city2)) { // if city2 is not into cities
        // add it
        strcpy(cities[addCities].name, city2);
        cities[addCities].prev = NO_PARENT;
        addCities++;
    }
    paths[i].j = getCityNumber(cities, n, city1); // number of city2

    if(i >= m)
        scanf("%d", &paths[i].price);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:59:06.583

可能是这种情况不是您所期望的：

```
while(n < 2 || n > 10001 || -1 < m || m > 100001 || -1 < k || k > 100001) 
```

当此条件为真时，这将要求您输入 n、m、k。如果您输入 n=3,m=-1,k=-1 它将通过下一个。

哪些 n、m、k 范围对输入有效？

如果 n >=2 && n <= 10001, m >= -1 && m <= 100001, k >= -1 && k <= 100001，则有效循环为

```
do {
    scanf("%d %d %d", &n, &m, &k);
} while ( n < 2 || n > 10001 || m < -1 || m > 100001 || k < -1 || k > 100001 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:57:38.267

我已将 (m+h) 替换为数字 10，因为您没有在代码中引用 m 或 h。这是一些看起来像您想要做的代码。此代码有效。

```
#include <string>
#include <stdio.h>

int main(void){
  char city1[11], city2[11];

  for (int i=0;i<10;i++){
    scanf("%s %s",city1,city2);
    printf("city1: %s\n",city1);
    printf("city2: %s\n",city2);
  }

} 
```

输出是这样的。我输入了 abc asdf cd

```
a b
city1: a
city2: b
c asdf
city1: c
city2: asdf
c
d
city1: c
city2: d 
```

我希望这有帮助！

# iphone - 如何在 iphone 中获取 Wifi 和蜂窝数据使用情况？

> ID：10668749
> 
> 赞同：1
> 
> 时间：2012-05-19T20:45:00.100
> 
> 标签：iphone, ios

> **可能重复：**
> [跟踪数据使用情况](https://stackoverflow.com/questions/9139138/track-data-usage)

我们如何获得 iphone wifi 和蜂窝数据使用，例如使用 wifi 和 wwan 发送和接收的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:02:40.430

如果您使用 CFNetwork 类进行网络通信，您可以记录应用程序的数据使用情况，就像[http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)用于限制带宽一样。

对于全局数据使用，我不相信 iOS SDK 中提供了这种功能，但有些人似乎已经放弃访问 ifconfig ：

[iPhone 数据使用跟踪/监控](https://stackoverflow.com/questions/7946699/iphone-data-usage-tracking-monitoring)

# php - 了解不同的网站 URL

> ID：10668752
> 
> 赞同：1
> 
> 时间：2012-05-19T20:45:49.877
> 
> 标签：php, url

例如，我对如何加载此页面感到困惑。我正在查看浏览器中的导航栏，它显示：

```
stackoverflow.com/questions/ask 
```

我习惯于在我开发的页面上看到这个：

```
Example.com/ask.php 
```

为什么他们的 URL 不包含页面名称或值？或者是吗？如果是这样，如何。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:48:26.937

URL 不必与服务器上本地文件系统中的实际路径名相对应，这只是惯例。

通常，URL 会被[重写](http://en.wikipedia.org/wiki/URL_rewriting)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:48:26.640

这类工作通常通过 URL 重写来完成。根据您的服务器，有几种方法可以实现它。

最著名的一个是**[Apache 服务器](http://www.apache.org/)**拥有的文件中**[`mod_rewrite`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)**使用的。**[`.htaccess`](http://en.wikipedia.org/wiki/Htaccess)**

# jquery - 有哪些库可以进行以下图像处理？

> ID：10668753
> 
> 赞同：0
> 
> 时间：2012-05-19T20:46:00.267
> 
> 标签：jquery, image-manipulation

我正在寻找一些 jQuery 库或只是 JavaScript 库，它们允许用户移动图像并可能具有不同的图层、裁剪和可拖动的图像大小。我还没有完全找到能做到这一切的图书馆。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:58:17.577

您可以组合多个库，例如[Jcrop](http://deepliquid.com/projects/Jcrop/demos.php)、[jQuery UI Draggable](http://jqueryui.com/demos/draggable/)和[Resizable](http://jqueryui.com/demos/resizable/)。

# python - 无法理解 PyQt 中的一行代码

> ID：10668756
> 
> 赞同：1
> 
> 时间：2012-05-19T20:46:24.430
> 
> 标签：python, pyqt, pyqt4

我正在尝试自己学习`PyQt`，`rapid gui programming with python and qt`并且无法理解`meaning/requirement`书中一个示例中提到的以下代码行。

```
class Form(QDialog):

        def __init__(self,parent=None):
                super(Form,self).__init__(parent) # Trouble understanding here 
```

所以，我的问题是`super(Form,self).__init__(parent)`它试图完整填写[此代码](http://pastie.org/3937058)的需要或目的是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:50:37.557

看看[文档`super()`](http://docs.python.org/library/functions.html#super)：

> 返回一个代理对象，它将方法调用委托给类型的父类或同级类。这对于访问已在类中重写的继承方法很有用。搜索顺序与 getattr() 使用的相同，只是跳过了类型本身。

所以基本上这行代码：

```
super(Form,self).__init__(parent) 
```

`__init__()`在当前类 ( `Form`) 继承的类中找到“最接近”的 set方法，并使用此方法初始化对象并作为第一个参数`self`传递。`parent`

# php - 正则表达式忽略字符串中的某些部分

> ID：10668761
> 
> 赞同：0
> 
> 时间：2012-05-19T20:47:05.747
> 
> 标签：php, regex, string

我需要对字符串使用正则表达式来查找匹配结果。我需要找到 (.+?) 但现在想忽略它说 (*) 的所有内容：

```
$regex='#<span class="(*)"><a href="/venues/(*)">(.+?)</a></span>#'; 
```

它不是忽略 (* )，而是回显 (*) 中的内容。

我怎样才能忽略这些而只得到 (.+?) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T20:48:36.100

括号中的意思是*capture*：它们里面的东西`()`会被*捕捉*，这样你以后可以使用它。

如果您不想*捕获*某些内容，因为您不想/不需要稍后使用它，只需删除括号即可。

[我应该补充一点，使用正则表达式从 HTML 中提取数据通常不是一个好主意……您可能想要使用 DOM 解析器，[**`DOMDocument::loadHTML()`**](http://fr2.php.net/manual/en/domdocument.loadhtml.php)例如 .]

# c++ - 为什么 sizeof(str.substr(0,3).c_str()) 给我 8？

> ID：10668764
> 
> 赞同：1
> 
> 时间：2012-05-19T20:47:57.817
> 
> 标签：c++, string

```
string str = "abcdefgdcb";

cout << sizeof(str.substr(0,3).c_str()); 
```

出于某种原因，上面的字符串给了我 8。我假设 c_str() 返回一个 null 字符串，并且 sizeof 使用 null 来确定字符串的大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T20:49:27.497

因为`sizeof`不给你字符串的长度，它给你类型的大小（`const char *`在这种情况下）。试试`strlen`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T20:49:42.863

`c_str`返回一个`const char *`。在您的系统上`sizeof (const char *) == 8`， 就像任何其他指针一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T20:50:47.020

8 是计算机上指针的大小（64 位），这就是 c_str() 返回的值。

使用 strlen 获取字符串的长度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T20:52:51.433

> 我假设 ... sizeof 使用 null 来确定字符串的大小。

有你的问题。 `sizeof`告诉你变量的大小，它与变量内部的值无关。

# java - 在保持并行列表同步的同时删除重复项

> ID：10668765
> 
> 赞同：1
> 
> 时间：2012-05-19T20:48:07.020
> 
> 标签：java, vector

这个问题让我发疯。我有 vectorA(float),vectorB(string1),vectorC(string2) 是并行的，我想消除 vectorA 中的重复项，同时我设法保持向量之间的并行性。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T20:56:28.437

这是一个单遍的就地算法：

```
Set<Float> seen = new HashSet<Float>();
int uniques = 0;
for (int i = 0; i < n; i++) {
  if (seen.add(vectorA[i])) {
    vectorA[uniques] = vectorA[i];
    vectorB[uniques] = vectorB[i];
    vectorC[uniques] = vectorC[i];
    uniques++;
  }
} 
```

然后在你完成后，忽略位置之后的所有元素`uniques`（或将它们全部复制到新数组中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T20:53:36.723

`set<float>`为您看到的项目创建一个，扫描`vectorA`记录重复索引，然后删除您标记为重复的索引，同时从向量的末尾开始返回。

```
Set<Float> seen = new HashSet<Float>();
List<Integer> del = new List<Integer>();
for (int i = 0 ; i != vectorA.size() ; i++) {
    if (seen.add(vectorA[i])) {
        del.add(i);
    }
}
for (int i = del.size()-1 ; i >= 0 ; i--) {
    vectorA.remove(del[i]);
    vectorB.remove(del[i]);
    vectorC.remove(del[i]);
} 
```

返回很重要，否则您的索引将不同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T20:53:36.833

创建一个组合三个值并覆盖`equals`和的类`hashCode`。将这些实例添加到单个列表而不是三个并行列表中。一旦您准备好删除重复项（假设您需要先保留它们并在以后删除它们），将它们添加到 a`LinkedHashSet`并返回到`ArrayList`. 在删除重复项时`LinkedHashSet`将保持插入顺序（如果这不重要，请使用标准）。`HashSet`

```
class Triple {
    float num;
    String a;
    String b;

    public boolean equals(Object o) {
        if (o == null || !(o instanceof Triple))
            return false;
        return num == ((Triple)o).num;  // strict equality
    }

    public int hashCode() {
        return Float.floatToRawIntBits(num);
    }
}

List<Triple> removeDuplicates(List<Triple> items) {
    return new ArrayList<Triple>(new LinkedHashSet<Triple>(items));
} 
```

# php - PHP文件上传/ move_uploaded_file不起作用，不像其他问题

> ID：10668766
> 
> 赞同：2
> 
> 时间：2012-05-19T20:48:13.213
> 
> 标签：php, file-upload

我在这里查看了其他五个类似的问题，但没有一个能够解决我的问题。我正在上传一个 1657 字节大小的 CSV 文件。

这是我的 php.ini 文件中的一些值

`upload_max_filesize = 2M`

`post_max_size = 8M`

```
$file = $_FILES['csv'];

if (!isset($file)) {
    halt(HTTP_NOT_FOUND, 'This page could not be found on the web server');
}

if (substr(strrchr($file['name'], '.'), 1) != 'csv') {
    halt(500, 'Sorry but please upload a CSV file next time!');
}

if ($file['error'] != '0') {
    die('An error occurred during upload.<br />Error: ' . $file['error']);
}

$file_loc = '/home/x/tmp/up/' . basename($file['tmp_name']) . '.csv';

if (file_exists('/home/x/tmp/up/')) {
    echo 'the directory exists....<br/>';
}

if (file_exists($file['tmp_name'])) {
    echo 'tmp file exists<br/>';
    echo filesize($file['tmp_name']) . 'b<br/>';
}

if (move_uploaded_file($file['tmp_name'], $file_loc)) {
    echo 'Uploaded to: ' . $file_loc;
} else {
    echo 'something went wrong!' . print_r($_FILES['csv'], true);
    echo '<br />Upload Max Size: ' . ini_get('upload_max_filesize');
    echo '<br />POST Max Size: ' . ini_get('post_max_size');

} 
```

这是我上传文件时生成的输出：

```
the directory exists....
tmp file exists
1657b
something went wrong!Array ( [name] => hm.csv [type] => application/vnd.ms-excel [tmp_name] => /tmp/php72p1VP [error] => 0 [size] => 1657 ) 
Upload Max Size: 2M
POST Max Size: 8M 
```

我已经在“常见陷阱”文章下查看了 PHP.net，该文章没有导致任何问题得到修复。任何人都可以看到有什么问题或给我一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:16:12.197

以下提示可能会有所帮助。

```
1\. The folder exists, check for spellings
2\. Check the properties of the folder and make sure the permissions have read+write 0666
3\. Make sure the file is within your public html root, otherwise double check the owner of the file, and make sure PHP Has read / write access to it.
4\. Look for the logs i.e. Unable to move '/tmp/php6wlOg1' to 'upload/110216104651_00134_smooth_1440x900.jpg'
5\. If the size of post data is greater than post_max_size, the $_POST and $_FILES superglobals are empty. So set it according to your need. 
```

也设置这个看看有没有错误

```
error_reporting(E_ALL); // or E_STRICT
ini_set("display_errors",1);
ini_set("memory_limit","1024M"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T00:50:44.377

在与托管服务提供商的技术人员多次交流后，他们设法为该文件夹授予了正确的权限（我之前尝试过 0777，但没有成功）。我相信一些伏都教在幕后进行，但这是`No errors in the error_log; I have set 777 permissions on /home/x/up`脚本开始工作的。

# image - 您可以使用 URL 在 MVCMailer 中嵌入图像吗

> ID：10668770
> 
> 赞同：0
> 
> 时间：2012-05-19T20:48:35.740
> 
> 标签：image, embed, mvcmailer

在逐步查看 MVCMailer 时，我发现您可以使用 cid 在 HTML 中嵌入图像。

[https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)

我看到了关于嵌入的代码：

```
@Html.InlineImage("logo", "Company Logo")

var resources = new Dictionary<string, string>();
resources["logo"] = logoPath;
PopulateBody(mailMessage, "WelcomeMessage", resources); 
```

我的问题是，而不是使用站点内的路径，例如：

```
resources["logo"] = Server.MapPath("~/Content/images/logo.png"); 
```

我能否以某种方式获取我在 Azure 云或 S3 云中有足够空间的图像？

请让我知道是否有办法从其他来源获取图像，而不是运行 MVC 邮件程序的服务器。

谢谢，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:01:37.837

在 Server.MapPath(my_path) 中，my_path 指定映射到物理目录的相对或虚拟路径。Server.MapPath 与本地 FileSystemObject 相关，因此在这种情况下，它将在本地 Web 服务器中的某个位置查找文件（您作为参数传递）。此处描述了更多信息：

[http://msdn.microsoft.com/en-us/library/ms524632(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/ms524632(v=VS.90).aspx)

因此，如果您的图像位于[http://azure_storage_name.blob.core.windows.net/your_public_container/image_name.jpg](http://azure_storage_name.blob.core.windows.net/your_public_container/image_name.jpg)，则将其传递给 Server.MapPath() 将不起作用，因为这不是本地文件系统中的位置。我试过了，发现它不会接受，我也尝试调整一些方法，但没有成功。如果您可以更改后面的代码并且可以从 URL 访问资源，那么它将无法正常工作。

# python - Python file.next() 弄乱了 for 循环

> ID：10668781
> 
> 赞同：2
> 
> 时间：2012-05-19T20:49:44.960
> 
> 标签：python, file-io, next

我尽力寻找答案，但找不到适合我需要的东西。我正在尝试将 XML 文件重新格式化为自定义格式并遇到问题。这是我的要求。

我有以下 XML 文件：

```
<parameters>
  <parameter name="name1" value="value1"/>
  <parameter name="name2" value="value2"/>
  <parameter name="name3" value="value3"/>
  <parameter name="name4" value="value4"/>
</parameters> 
```

我希望将其转换为以下内容。

```
(param().name("name1").value("value1"),
param().name("name2").value("value2"),
param().name("name3").value("value3"),
param().name("name4").value("value4")); 
```

我尝试使用以下代码，它似乎将一些数据从原始文件跳过到输出。

```
with open("myfile","r") as f:
    for each_line in f:
        current_line = each_line
        if current_line.strip().startswith('<'):
            split_line = current_line.strip().split(' ')
            if split_line[0].lstrip('<') == "parameter":
               if f.next().strip() == "</parameters":
                  print 'param().name(' + split_line[1].split('=')[1] + ').value('+ split_line[2].split('=')[1][:-2] + '));\n\n'
               else:
                  print 'param().name(' + split_line[1].split('=')[1] + ').value('+ split_line[2].split('=')[1][:-2] + ')' 
```

我看到使用 f.next() 导致了这个问题......不知道我还能如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T20:52:21.217

您可能应该为此使用 XML 解析器。

要修复您的代码，您可以将结果存储在列表中并将其连接在一起并在最后打印：

```
result = []

with open("myfile","r") as f:
    for each_line in f:
        current_line = each_line.strip()
        if current_line.startswith('<parameter '):
            split_line = current_line.split(' ')     # Breaks if there are spaces in name or value.
            name = split_line[1].split('=')[1]       # Yuck.
            value = split_line[2].split('=')[1][:-2] # Yuck.
            result.append('param().name({0}).value({1})'.format(name, value)

print '(' + ',\n'.join(result) + ');\n\n' 
```

请注意，您在 XML 中查找字符串的方式并不可靠，对文档的微小更改会产生问题。使用 XML 解析器会降低它被破坏的可能性。

**有关的**

*   [Python 中的 XML 解析](https://stackoverflow.com/questions/1373707/xml-parsing-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T20:55:39.403

好吧， f.next() 只是进行了一次迭代，因此更改了当前行迭代器。这似乎不是你想要的。

但是你不只是使用 xml 解析器吗？

# c++ - 组合框中的自动建议

> ID：10668790
> 
> 赞同：0
> 
> 时间：2012-05-19T20:51:12.797
> 
> 标签：c++, c, winapi, combobox, autosuggest

我用`CreateWindowEx`. 一切顺利。但我想做最后一个功能：AutoSuggestion。Combobox 用于在文档中搜索文本，因此在某些时候，它的项目是用户搜索的字符串。AutoSuggestion 应该是：下拉项目列表，找到那些以用户在编辑控件中键入的字符串开头的项目，***但不要选择其中之一***，不要显示所有其他项目，最后不要更改选择发生 keydown 或 keyup 时的项目，仅突出显示该项目并仅在用户按下时选择`Enter`。你知道如何完成这项任务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:11:05.773

听起来您想要[自动完成功能](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776884)。

# c# - 需要 .NET 解决方案来检测 Windows XP 中是否安装了“东亚语言”

> ID：10668792
> 
> 赞同：1
> 
> 时间：2012-05-19T20:51:31.777
> 
> 标签：c#, wpf, localization, windows-xp

环境 - C#、.NET 4.0、WPF、VS2010

我有一个支持多种文化/语言的简单 Windows 应用程序。当用户选择日文、韩文、中文（简体）或中文（繁体）时，Windows XP 将显示有趣的“方形”或“块”字符来代替字形。在 Windows Vista、7 或 8 上不会出现此问题。

作为解决方案，我被建议转到“控制面板|区域和语言选项”，选择“语言”选项卡，然后选中“为东亚语言安装文件”复选框。

这确实解决了问题……对于我的机器。现在我知道选择“日语”的日本用户很可能已经安装了必要的资源，他们很可能不会遇到这个问题。

但是...我需要能够检测东亚语言是否已安装在运行我的应用程序的任何 Windows XP 机器上。在这种情况下，我将能够显示一个消息框，通知他们安装语言……或者我可能决定隐藏日语、韩语、中文（简体）和中文（繁体）文化/语言选择。

那么...如何检测 Windows XP 是否安装了必要的东亚语言文件？我更喜欢 .NET 解决方案，但我愿意在必要时进行 API 调用。

J.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:27:53.720

而不是检查`InputLanguage`，您应该`CultureInfo`使用`GetCultures`函数调用进行检查，

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)

如文档所述，如果`InstalledWin32Cultures`用作参数，则此函数应返回您想要的，

[http://msdn.microsoft.com/en-us/library/system.globalization.culturetypes.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.culturetypes.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:48:19.340

你可以这样迭代：

```
 foreach (System.Windows.Forms.InputLanguage p in System.Windows.Forms.InputLanguage.InstalledInputLanguages)
            Console.WriteLine(p.Culture.EnglishName); 
```

它将显示您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:58:16.787

我还没有尝试过，但我的倾向只是尝试一下——用东亚语言画一些东西并检查结果。你拿到盒子了吗？

编辑：显然有些人没有意识到我的意思是绘制文本然后让代码检查结果。我不是说人类眼球测试！

# javascript - 用ajax调用代码隐藏函数？

> ID：10668794
> 
> 赞同：0
> 
> 时间：2012-05-19T20:51:50.217
> 
> 标签：javascript, asp.net, html, ajax, vb.net

搜索了一下，没有找到明确的答案。

我有一个很大的 HTML 表格，里面有数字。我有一个选择器（单选按钮列表），如果用户想在 $ 或天数内查看表格，则可以单击该选择器。

现在它工作得很好，但是页面会刷新，因为每次用户单击两个单选按钮之一时我都会调用一个代码隐藏函数（RefreshTable），因为它会更改格式并需要由 RefreshTable 函数完成新的计算

. 有什么方法可以在不使用 ajax 或其他东西刷新页面的情况下调用该函数？该函数只有一个参数：ProjectID，它是用 VB.NET 编码的，我们使用的是 ASP.NET

这是 .ASPX 页面中的表格代码，它只是外壳，所有内容都是通过在 RadioButton 更改时调用的 VB.NET 方法添加的（autopostback=true），因此我们检查选择了哪个并执行 VB.NET 方法填充表格。（函数代码如下）

注意：更改了一些列\var 名称，因为它是敏感信息，但你会得到大局。

```
 <td>
    <asp:RadioButtonList  RepeatDirection="Horizontal" id="rdiolist" onclick="alert('hello');" runat="server" RepeatLayout="flow" AutoPostBack="true">
   <asp:ListItem selected="true"> $ </asp:ListItem>
   <asp:ListItem> Days </asp:ListItem>
</asp:RadioButtonList>
</td>
</tr>
</table>

<br />

    <table id="tblBudgetRessourceVP" runat="server" class="ProjetTable ProjetTableHover">
    <thead>
    <tr>
    <th style="width:80px">COLUMN 1</th>
    <th style="width:120px">COLUMN 2/th>
    <th style="width:120px">COLUMN 3</th>
    <th style="width:120px">COLUMN 4</th>
    <th style="width:120px">COLUMN 5</th>
    <th style="width:120px">COLUMN 6</th>
    <th style="width:120px">COLUMN 7</th>
    <th style="width:120px">COLUMN 8</th>
    </tr>
    </thead>

    </table> 
```

方法背后的代码，这就是我想在没有回发的情况下调用的方法，我们想要删除每个页面刷新。我将仅发布该函数的一个示例，因为它非常重复，因为它对每一列都执行此操作。我用随机名称替换了一些变量名称，因为它是非常敏感的数据。

```
Private Sub FillTable(ByVal vProjetID As String)
    Dim sqlquery As String = "SELECT SUM(EFFORT_RESRC.NB_JP_PLANF) as Planifie, SUM(EFFORT_RESRC.NB_JP_DDC) as DDC, SUM(EFFORT_RESRC.NB_JP_REEL) as Reel, SUM(EFFORT_RESRC.NB_JP_RESTN) as RAF, " & _
                "SUM(EFFORT_RESRC.NB_JP_REVS) as Revise, SUM(EFFORT_RESRC.NB_JP_PROJT) as Projete, SUM(EFFORT_RESRC.ECART_REVS_PROJT) as Ecart,RESRC.ID_VP , VICE_PRESD.DE_VP, TA_COMPS.TAUX " & _
                "FROM EFFORT_RESRC INNER JOIN " & _
                "TA_COMPS ON EFFORT_RESRC.COMPOSANTEID = TA_COMPS.COMPOSANTEID INNER JOIN " & _
                "RESRC ON EFFORT_RESRC.NO_EMPLY = RESRC.NO_EMPLY INNER JOIN " & _
                "VICE_PRESD ON RESRC.ID_VP = VICE_PRESD.ID_VP " & _
                "WHERE EFFORT_RESRC.PROJETID = '" & vProjetID & "' AND EFFORT_RESRC.ANNEE = '" & dd_ressourceprojet_annee.SelectedValue & "' AND TA_COMPS.ANNEE = '" & dd_ressourceprojet_annee.SelectedValue & "' " & _
                "GROUP BY RESRC.ID_VP, VICE_PRESD.DE_VP, TA_COMPS.TAUX " & _
                "ORDER BY VICE_PRESD.DE_VP"

    Dim dtRessource As New DataTable
    Master.GetDataTable(dtRessource, sqlquery)

    While (tblBudgetRessourceVP.Rows.Count > 1)
        tblBudgetRessourceVP.Rows.RemoveAt(1)
    End While

    Dim tr As HtmlTableRow
    Dim td As HtmlTableCell

    For Each ressource As DataRow In dtRessource.Rows

        If ressource("DE_VP") <> curStrVP And curStrVP <> String.Empty Then
            tr = New HtmlTableRow

                td = New HtmlTableCell
                td.InnerHtml = curStrVP
                tr.Cells.Add(td)

                td = New HtmlTableCell
            td.Attributes.Add("class", "budget")
            If rdiolist.SelectedIndex = 0 Then // Check the selector, if $ or Days display
                td.InnerHtml = Format(curPlan, "### ### ### ### ### ##0.00$")
            Else
                td.InnerHtml = Format(curPlan, "####")
            End If
            totPlan += curPlan
            tr.Cells.Add(td)  // Add the cell to the table.

            td = New HtmlTableCell
            td.Attributes.Add("class", "budget")

            If rdiolist.SelectedIndex = 0 Then // Check if JP or $ is selected for display format.
                td.InnerHtml = Format(curDDC, "### ### ### ### ### ##0.00$")
            Else
                td.InnerHtml = Format(curDDC, "####")
            End if
            totDDC += curDDC
            tr.Cells.Add(td)

            td = New HtmlTableCell
            td.Attributes.Add("class", "budget")
            If rdiolist.SelectedIndex = 0 Then  // Check if JP or $ is selected for display format.
                td.InnerHtml = Format(curRevise, "### ### ### ### ### ##0.00$")
            Else
                td.InnerHtml = Format(curRevise, "####")
            End If
            totRevise += curRevise
            tr.Cells.Add(td) 
```

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:36:40.963

抱歉，我的回答有点延迟，因为我已经很久没有接触过 VB 了。

现在假设您有一个 div（可以是按钮或任何 html 元素）单击时要从服务器获取数据而不进行完整的回发。以下是 HTML 设置。

```
<div id="click">click</div>
<div id="dvTest"></div>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="Scripts/json2.js" type="text/javascript"></script> 
```

以下是我们将使用的 jquery 代码：

```
<script type="text/javascript">
    $(function () {
        $("#click").click(function () {
            var o = new Object();
            o.ProjectId = 1;
            var x = JSON.stringify(o);
            $.ajax({
                url: 'Default.aspx/GetData',
                type: 'POST',
                dataType: 'JSON',
                contentType: 'application/json;charset=utf-8;',
                data: x,
                success: function (data) {
                    data = JSON.parse(data);
                    var d=data.hasOwnProperty("d") ? data.d : data;
                    //as we are returning fully rendered table
                    //we can directly set html of container div
                    $("#dvTest").html(d);
                },
                error: function (a, b, c) {
                    alert(b);
                }
            });
        });
    });
</script> 
```

这是您需要在代码隐藏文件（aspx.vb 文件）中编写的内容。这种`public shared`用`WebMethod`属性修饰的方法称为`PageMethod`。现在由于`HtmlTable`对象无法自动序列化，我们需要使用 an`HtmlWriter`将其呈现为 as`StringBuilder`并将完整的 HTML 返回到客户端：

```
<WebMethod()>
Public Shared Function GetData(ByVal ProjectId As String) As String

    Dim tbl As New HtmlTable
    Dim tr As HtmlTableRow
    Dim td As HtmlTableCell

    'instead of these loops you will polulate table rows/cells
    'based on the data returned in your data table
    For I As Integer = 1 To 5
        tr = New HtmlTableRow
        For j As Integer = 1 To 5
            td = New HtmlTableCell
            td.InnerHtml = "Cell " & I & j
            tr.Cells.Add(td)
        Next
        tbl.Rows.Add(tr)
    Next

    Dim sb As New StringBuilder
    Dim sr As New StringWriter(sb)
    Dim hr As New HtmlTextWriter(sr)
    tbl.RenderControl(hr)
    Return sb.ToString()
End Function 
```

**编辑：-** ASP.Net 通过序列化 .Net 对象返回 JSON 对象。但是这种方法不适用于`HtmlTable`对象，因为它们没有实现`InnerHTML`并且会在那里引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:20:43.957

使用 AJAX 您可以创建一个通用处理程序（假设您使用的是 VS 2008 或更高版本）。通用处理程序将具有`.ashx`扩展名而不是`.aspx`扩展名。本质上，它允许您控制输出，而 Web 表单`.aspx`具有 UI 组件和代码隐藏。 `.ashx`文件基本上是空白的，并引用了您的代码隐藏。在您的代码隐藏中，您可以编写您需要的代码来输出您的 AJAX 响应所需的内容。

# nhibernate - 如何将 NHibernate 会话设置为渴望获取

> ID：10668802
> 
> 赞同：2
> 
> 时间：2012-05-19T20:53:34.797
> 
> 标签：nhibernate

我的测试基类中有一个方法助手，如下所示：

```
protected TEntity Fetch<TEntity>(Guid id) where TEntity : Entity
{
    using (var session = GetSession())
        return session.Get<TEntity>(id);
} 
```

所以我可以像这样从集成测试中调用它：

```
var persistedFoo = Fetch<Foo>(foo.Id); 
```

如何在我的 Fetch 方法中设置会话以急切获取 TEntity 中的所有属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:47:49.153

根据[此处](http://nhforge.org/wikis/howtonh/lazy-loading-eager-loading.aspx)的 NHibernate 文档，您应该使用 NHibernateUtility 类，因此将您的代码更改为如下内容应该会有所帮助：

```
using(var session = GetSession())
{
    var entity = session.Get<TEntity>(id);
    NHibernateUtil.Initialize(entity);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:27:07.767

或者，您可以使用 nHib 的查询 API 之一（我个人更喜欢 QueryOver）来执行类似
`session.QueryOver<Cat>().Where(cat => cat.Id == id).Fetch(c => c.Kittens).Eager`.
这为您提供了额外的好处，即准确控制将获取哪些属性/集合。

此外，建议您不要抽象出您`ISession`在存储库中的使用。
它会阻止您从批处理等 nHibernate 功能中受益（请参阅 ayende 的[帖子](http://ayende.com/blog/3955/repository-is-the-new-singleton)）

# mongodb - 使用start-stop-daemon时无法多次启动mongodb？

> ID：10668810
> 
> 赞同：3
> 
> 时间：2012-05-19T20:54:40.923
> 
> 标签：mongodb, start-stop-daemon

我一直在通过`mongod`在同一台服务器上启动多个进程来测试副本集（因为使用多个服务更昂贵，我现在只是在测试）。

但是，由于我已将 mongo 更新到 v2.0.5 版本，因此当我尝试再次启动 mongod 时（在另一个端口上，使用另一个数据库文件夹等），我得到以下信息：

`mongod already running`

为什么会这样？是否有标志可以跳过此检查？

更新：由于某种原因，这只发生在我`mongod`这样运行时：

`sudo start-stop-daemon --start -c mainuser --exec /usr/local/bin/mongod -- --journal --nohttpinterface --dbpath /home/mainuser/data/db-secondary --logpath /home/mainuser/data/logs/mongodb-secondary.log --logappend --replSet appname --port 30001`

当我像这样运行它时不会发生：

`sudo /usr/local/bin/mongod --journal --nohttpinterface --dbpath /home/mainuser/data/db-secondary --logpath /home/mainuser/data/logs/mongodb-secondary.log --logappend --replSet appname --port 30001`

不幸的是，我必须`start-stop-daemon`在 Ubuntu 10.04 LTS 上的新贵脚本中使用 for 。为什么会导致这个问题？

阅读手册页后，`start-stop-daemon`很明显它故意不尝试再次启动该过程，因为它认为它是相同的“服务”。但是，我只是`start-stop-daemon`为了让我可以使用 Upstart 以不同的用户身份运行。是否可以绕过检查，或者以不同的方式在暴发户中以非 sudo 用户身份运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-04T15:25:43.653

可能的解决方案：您需要使用 start-stop-daemon 的键 --name 为不同的进程赋予不同的名称。例如对于 node.js：

`start-stop-daemon --name node-charts --start --exec /usr/bin/node -- someapp.js`

和

`start-stop-daemon --name node-web --start --exec /usr/bin/node -- someotherapp.js`

没有名称它不会启动，因为它具有相同的 /usr/bin/node 进程名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:55:12.517

这原来是 的一个功能`start-stop-daemon`，我与 upstart 一起使用它作为另一个用户运行。

通过不使用`start-stop-daemon`，这个问题得到了解决。在我的新贵脚本中，我现在使用以下命令作为主用户运行`sudo`：

```
sudo -u mainuser /usr/local/bin/mongod --journal --nohttpinterface --dbpath /home/mainuser/data/db-secondary --logpath /home/mainuser/data/logs/mongodb-secondary.log --logappend --replSet appname --port 30001 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-22T17:01:26.027

这是因为正在运行的 mongod 已经存在一个 pid 文件。

只需将不同的 pid 与 start-stop-daemon 一起使用。例如，

```
sudo start-stop-daemon --start --pid=/var/run/mongodb2.pid --chuid mongodb --exec  /usr/bin/mongod -- --config /etc/mongodb2.conf 
```

所以它不会抱怨“/usr/bin/mongod 已经在运行”

# wpf - 比较 Richtextbox wpf 中的变化

> ID：10668828
> 
> 赞同：1
> 
> 时间：2012-05-19T20:58:19.440
> 
> 标签：wpf, vb.net, compare, richtextbox

WPF 窗口有一个加载 Xaml 包格式的富文本框，我可以对其进行编程以打开、保存和关闭文档。现在，在关闭时，我可以在关闭时询问用户是否保存，我可以通过一个消息框来做到这一点。

现在的问题是，如果富文本框是空的，或者用户没有对其进行任何修改，即使这样，保存问题也会在关闭时引发火灾。

我试图通过比较richtextbox、flowdocument对象和文本范围对象来比较开始数据和结束时间数据，但我确实对它们有任何运气，请你告诉我如何才能得到一个好的比较/如果发生任何变化。如果使用富文本框的更改事件并使用标志，则可以解决工作，但如果用户还原更改，则问题再次出现。

求指教谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:25:14.953

计算已保存的 Xaml 包和要保存的 Xaml 包的哈希值。如果不相等则保存。[HashAlgorithm.ComputeHash 方法](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.computehash%28v=vs.100%29.aspx)采用 a`Stream`或 a `Byte[]`。

```
byte[] oldHashcode = MD5CryptoServiceProvider.Create().ComputeHash( Stream or byte[] );
byte[] newHashcode = MD5CryptoServiceProvider.Create().ComputeHash( Stream or byte[] );

if (!newHashcode.SequenceEqual(oldHashcode))
{
    ask the user to save
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:49:40.377

当您的窗口打开时将标志设置为 false，表明 rtb 没有更改。

为您的 Richtextbox 处理 TextChanged 事件，在 textchanged 事件子例程中将指示 rtb 是否已更改的标志设置为 true。

在关闭时间检查标志，看看它是真还是假。

值得注意的是，您还需要另一个标志来让 textchange 子例程知道您的表单正在初始化，因为 textchange 事件在 rtb 最初加载时触发。只需将此初始加载标志初始化为表单上的局部变量，值为 true，并在表单加载事件结束时将其设置为 false。

在 textchange 例程中，首先检查初始加载是否正在进行，如果它不翻转 rtb 标志为真。

# javascript - JavaScript 读取 XML 完全错误

> ID：10668829
> 
> 赞同：0
> 
> 时间：2012-05-19T20:58:20.237
> 
> 标签：javascript, xml

我正在开发一个 HTML5/Canvas 游戏引擎，但我被卡住了。引擎通过瓦片集绘制地图，并从 XML 文档中读取地图数据，如下所示：

```
<map>
    <layer id="-1">
        <row>0,0,0</row>
        <row>1,1,1</row>
        <row>0,0,0</row>
    </layer>

    <layer id="1">
        <row>0,0,0</row>
        <row>1,1,1</row>
        <row>0,0,0</row>
    </layer>
</map> 
```

以及将数据加载到二维数组中的 JavaScript：

```
var layers = xml.getElementsByTagName("layer");
for(var i in layers)
{
    var rows = layers[i].childNodes;
    for(var j in rows)
    {
        array[i][j] = rows[j].nodeValue;
    }   
} 
```

问题：返回的数据只是“null”、“”和“undefined”的混杂。此外，数组似乎比必要的要小，因为在我检查所有值之前，我检查了节点的数量（使用长度属性），它总是比实际的节点数量多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:06:19.493

1.  使用`textContent`而不是`nodeValue`. 前者返回正确的值，例如`"0,0,0"`.
2.  由于文本节点也是子节点，因此您应该跳过它们（检查节点的`nodeType`）。这些正在用孔填充您的阵列，并使它们比需要的更大。文本节点基本上是缩进的空白。解决这个问题需要一个额外的计数器。
3.  使用普通`for`循环，而不是`for in`循环。

[http://jsfiddle.net/DhKJr/](http://jsfiddle.net/DhKJr/)

# vi - vi vsplit，需要命令

> ID：10668830
> 
> 赞同：1
> 
> 时间：2012-05-19T20:58:21.930
> 
> 标签：vi

假设我有两个文件：file1 和 file2

是否有一个命令可以在终端上运行以打开一个垂直分割的 vi 屏幕并在任一侧显示 file1 和 file2？

谢谢，程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:16:38.613

@cheng 几周前我在#vim 频道上简短地问过这个问题。到时候可以想出这样的解决方案： 下面的例子，我`file1.txt`先在vi中打开，感觉需要`file2.txt`竖框分割。

```
vi file1.txt
Ctrl+W+v 
:sp file2.txt
Ctrl+W+w
:q 
```

最初，它以全屏方式打开 file1.txt，然后第二个命令将该文件拆分到垂直窗格中。第三条命令以水平拆分模式打开 file2.txt。第四个跳转到第一个垂直拆分模块，最后一个将其关闭。

显然，当您必须在正在进行的 vim 会话中打开文件时，这种方法才可用。正如链接中提到的@ravi，`vim -o file1.txt file2.txt`在开始时会做同样的工作。

我将非常感谢所需任务的更简单方法。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T04:49:03.847

使用 vi 命令:
:h CTRL-W

阅读相关部分：
2.2 窗口命令 *CTRL-W*

# c# - 如何在 c# 中有效地索引和搜索 ipv4 地址范围

> ID：10668831
> 
> 赞同：4
> 
> 时间：2012-05-19T20:58:26.253
> 
> 标签：c#, data-structures, hash

我有大约 90000 个 IPv4 地址范围，其中包含与每个范围相关的数据

例如

```
1.0.0.0 - 1.1.0.0 ->  "foo"
2.0.0.0 - 10.0.0.0 -> "bar" 
```

给定一个 IP 地址，我需要检索相关数据。我怎样才能**有效地**做到这一点？

我想我可以通过将地址转换为单个整数来使事情变得更容易，但是最好使用哪种数据结构来存储它以实现**快速**搜索？

**澄清**- 我正在搜索单个 IP，而不是范围（例如“192.168.0.1”）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T21:11:33.580

对单个数组中的非重叠间隔的末端进行排序。用一个标志标记每个结束，指示它是间隔的开始还是结束，如下所示：

```
1.0.0.0 1.1.0.0 2.0.0.0 10.0.0.0
 start   end     start    end 
```

现在使用目标地址运行二进制搜索，例如`3.2.1.0`. 插入点落在 上`2.0.0.0`，标记为`start`。这意味着这`3.2.1.0`是间隔之一。

现在考虑搜索`1.2.3.4`. 它的插入点落在 上`1.1.0.0`，标记为`end`。由于`1.2.3.4`不等于`1.1.0.0`，我们知道`1.2.3.4`不是区间之一。

搜索的成本是`Log(N)`，其中`N`是区间数。

如果您喜欢冒险，请考虑实施[`interval tree`](http://en.wikipedia.org/wiki/Interval_tree). 但是，对于非重叠间隔，这可能不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:02:00.697

如果您只需要支持 IPv4 地址而不支持 IPv6 地址，则可以将每个地址存储为`UInt32`. 这将使比较它们变得非常容易和有效。

如果 IP 范围不重叠，并且您可以将它们排序在列表中，则可以使用二进制搜索的变体来快速查找范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:50:45.063

查找从 0 到 20 的数字是否包括，具有以下范围：

```
2-5 -> "a"
6-7 -> "b"
9-11 -> "c"
12-12 -> "d"
15-18 -> "e"
19-19 -> "f" 
```

在一个循环中 1,000,000 次，包括 1 次 RangeCollection 的创建和初始化：只有 3 秒！

剩下要做的就是准备一个 IEnumerable 元组，其中第一个 int 是最小 IP int-value，第二个是最大值，TValue 是与该 min~max 范围相关联的数据。

这是我的实现：

```
public class RangeCollection<TValue>
{
    private readonly int[] _mins;
    private readonly int[] _maxs;
    private readonly TValue[] _values;

    public RangeCollection(params Tuple<int, int, TValue>[] input)
        : this((IEnumerable<Tuple<int, int, TValue>>)input)
    {
    }

    public RangeCollection(IEnumerable<Tuple<int, int, TValue>> input)
    {
        var tuples = input.OrderBy(tuple => tuple.Item1).ToArray();

        for (var i = 1; i < tuples.Length; i++)
        {
            if (tuples[i].Item1 <= tuples[i - 1].Item2)
            {
                throw new ArgumentException("Ranges should not overlap.");
            }
        }

        this._mins = new int[tuples.Length];
        this._maxs = new int[tuples.Length];
        this._values = new TValue[tuples.Length];

        for (var i = 0; i < tuples.Length; i++)
        {
            var tuple = tuples[i];

            this._mins[i] = tuple.Item1;
            this._maxs[i] = tuple.Item2;
            this._values[i] = tuple.Item3;
        }
    }

    public bool TryGetValue(int key, out TValue value)
    {
        if (this.Contains(key, out key))
        {
            value = this._values[key];
            return true;
        }

        value = default(TValue);
        return false;
    }

    public bool Contains(int key)
    {
        return this.Contains(key, out key);
    }

    private bool Contains(int key, out int index)
    {
        index = 0;

        if (this._mins.Length == 0 || key < this._mins[0] || key > this._maxs[this._maxs.Length - 1])
        {
            return false;
        }

        var low = 0;
        var high = this._mins.Length - 1;

        while (high >= low)
        {
            index = (low + high) / 2;

            var cmp = this._mins[index].CompareTo(key);

            if (cmp == 0)
            {
                return true;
            }

            if (cmp == 1)
            {
                high = index - 1;
            }
            else
            {
                low = index + 1;
            }
        }

        if (this._mins[index] > key)
        {
            index--;
        }
        else if (this._mins[index + 1] <= key)
        {
            index++;
        }

        return this._maxs[index] >= key;
    }
} 
```

用法：

```
var collection = new RangeCollection<string>(new Tuple<int, int, string>(2, 5, "a"),
                                             new Tuple<int, int, string>(6, 7, "b"),
                                             new Tuple<int, int, string>(9, 11, "c"),
                                             new Tuple<int, int, string>(12, 12, "d"),
                                             new Tuple<int, int, string>(15, 18, "e"),
                                             new Tuple<int, int, string>(19, 19, "f"));

for (var i = 0; i <= 20; i++)
{
    string val;
    if (collection.TryGetValue(i, out val))
    {
        Debug.WriteLine("Contains {0}. Value: {1}", i, val);
    }
    else
    {
        Debug.WriteLine("Doesn't contain " + i);
    }
}

/* Output:

Doesn't contain 0
Doesn't contain 1
Contains 2\. Value: a
Contains 3\. Value: a
Contains 4\. Value: a
Contains 5\. Value: a
Contains 6\. Value: b
Contains 7\. Value: b
Doesn't contain 8
Contains 9\. Value: c
Contains 10\. Value: c
Contains 11\. Value: c
Contains 12\. Value: d
Doesn't contain 13
Doesn't contain 14
Contains 15\. Value: e
Contains 16\. Value: e
Contains 17\. Value: e
Contains 18\. Value: e
Contains 19\. Value: f
Doesn't contain 20

*/ 
```

# php - PHP/HTML：如果 url 是 domain.co.uk/?debug 那么

> ID：10668832
> 
> 赞同：0
> 
> 时间：2012-05-19T20:58:43.427
> 
> 标签：php, javascript, html, debugging, url

我知道这一定是一个小问题，我很抱歉，但我在任何地方都找不到直接的答案！

基本上我想做的是，如果有人访问[http://domain.co.uk/?debug](http://domain.co.uk/?debug)那么我希望它显示其他信息，例如代码版本或我输入的任何其他信息。

再次，我很抱歉这个问题，但我真的很感谢你的帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:01:35.577

```
if (isset($_GET['debug'])) {
    echo "Get the raid! There's bugs!";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:21:51.917

正如[Hope4You](https://stackoverflow.com/users/1119677/hope4you)指出的那样，这是不好的做法。但不知何故，这在部署我们的应用程序时非常有用。一个技巧是设置一个“开发中”标志。

```
<?php
define('DEVELOPMENT_SERVER', TRUE);

if (DEVELOPMENT_SERVER)
  require 'debug_tools.php'; 
```

其中`debug_tools.php`包含来自[MarcB](https://stackoverflow.com/users/118068/marc-b)和其他辅助函数的代码。

# android - ffmpeg for android build - 是否完整

> ID：10668833
> 
> 赞同：2
> 
> 时间：2012-05-19T20:59:06.243
> 
> 标签：android, linux, build, ffmpeg

//EDIT节省时间并参考[SF项目](http://sourceforge.net/projects/ffmpeg4android/)。IMO，它可以节省大量的工作来加快速度.....

在这个问题上做更多工作后：

添加了一个git[项目](https://github.com/rowntreerob/android-ffmpeg)

安装自定义工具链后构建更容易，因此您可以[轻松调用编译器](http://source-android.frandroid.com/ndk/docs/STANDALONE-TOOLCHAIN.html)

[来自ndk-build 的](http://pastebin.com/y04cmXBM)示例标准输出

-- 最初在 windows vista 上的 vmplayer 中使用 ubuntu 12.04。IMO linux 比 cygwin 更适合构建。

我按照这些[说明](http://www.roman10.net/how-to-build-ffmpeg-for-android/comment-page-5)获得不确定的结果，其中存在以下条件。

> build_android.sh 似乎正常退出
> config.log 有错误，从 crosstoolchain 确认 gcc
> 所有静态库都构建正常（./libavfilter，./libavcodec 等）
> ffmpeg.o 在那里并且执行 ok
> no ./android 目录按照配置的前缀设置

看起来我可以将二进制文件推送到我的手机并在 shell 中进行测试。如果没关系，那么我可以查看静态库的 jni 包装器。

但是为什么构建没有向 --prefix=./android/armv7-a 写入任何内容？该路径在构建结束时不存在

细节：

配置日志处理了什么：

```
FFMPEG_CONFIGURATION='--target-os=linux --prefix=./android/armv7-a 
--enable-libvpx --enable-libvorbis --enable-pthreads --logfile=config.log
--enable-cross-compile --extra-libs=-lgcc --arch=arm 
--cc=/home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc 
--cross-prefix=/home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi- 
--nm=/home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-nm 
--sysroot=/home/rob/src/android-ndk-r8/platforms/android-14/arch-arm/ --extra-cflags='"'"' -O3 -fpic 
-DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums 
-fno-strict-aliasing -finline-limit=300 -mfloat-abi=softfp  -marm -march=armv7-a -mtune=cortex-a9 '"'"' 
--disable-shared --enable-static --extra-ldflags='"'"'
-Wl,-rpath-link=/home/rob/src/android-ndk-r8/platforms/android-14/arch-arm//usr/lib -L/home/rob/src/android-ndk-r8/platforms/android-14/arch-arm//usr/lib 
-nostdlib -lc -lm -ldl -llog'"'"' 
--disable-everything --enable-demuxer=mov --enable-demuxer=h264 
--disable-ffplay --enable-protocol=file 
--enable-avformat --enable-avcodec --enable-decoder=rawvideo 
--enable-decoder=mjpeg --enable-decoder=h263 --enable-decoder=mpeg4 
--enable-decoder=h264 --enable-parser=h264 --disable-network --enable-zlib --disable-avfilter --disable-avdevice' 
```

配置日志的尾部包含编译器检查错误

```
zmbv_test='yes'
zmbv_test_deps='zlib'
WARNING: /home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-pkg-config not found, library detection may fail.
mktemp -u XXXXXX
Yd2A0h
WARNING: Unknown C compiler /home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc, unable to select optimal CFLAGS
check_ld cc
check_cc
BEGIN /tmp/ffconf.m9Kg3cqt.c
    1   int main(void){ return 0; }
END /tmp/ffconf.m9Kg3cqt.c
/home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300 -mfloat-abi=softfp -marm -march=armv7-a -mtune=cortex-a9 -c -o /tmp/ffconf.tO2EIBz5.o /tmp/ffconf.m9Kg3cqt.c
./configure: 640: ./configure: /home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc: not found
C compiler test failed. 
```

build_android.sh 标准输出的尾部看起来不错

```
libavutil/opt.c: In function ‘av_find_opt’:
libavutil/opt.c:41:5: warning: ‘av_next_option’ is deprecated (declared at libavutil/opt.h:347) [-Wdeprecated-declarations]
CC  libavutil/pixdesc.o
libavutil/opt.c: In function ‘av_opt_set_defaults’:
libavutil/opt.c:601:5: warning: ‘av_opt_set_defaults2’ is deprecated (declared at libavutil/opt.h:370) [-Wdeprecated-declarations]
CC  libavutil/random_seed.o
CC  libavutil/rational.o
CC  libavutil/rc4.o
CC  libavutil/samplefmt.o
CC  libavutil/sha.o
CC  libavutil/timecode.o
CC  libavutil/tree.o
CC  libavutil/utils.o
CC  libavutil/x86/cpu.o
INSTALL libavdevice/avdevice.h
INSTALL presets/libvpx-1080p50_60.ffpreset
INSTALL presets/libvpx-1080p.ffpreset
INSTALL presets/libvpx-360p.ffpreset
INSTALL presets/libvpx-720p50_60.ffpreset
INSTALL presets/libvpx-720p.ffpreset
INSTALL presets/libx264-ipod320.ffpreset
INSTALL presets/libx264-ipod640.ffpreset
INSTALL doc/ffprobe.xsd
INSTALL libavdevice/libavdevice.pc
INSTALL libavfilter/asrc_abuffer.h
INSTALL libavfilter/avcodec.h
INSTALL libavfilter/avfilter.h
INSTALL libavfilter/avfiltergraph.h
INSTALL libavfilter/buffersink.h
INSTALL libavfilter/version.h
INSTALL libavfilter/vsrc_buffer.h
INSTALL libavfilter/libavfilter.pc
INSTALL libavformat/avformat.h
INSTALL libavformat/avio.h
INSTALL libavformat/version.h
INSTALL libavformat/libavformat.pc
INSTALL libavresample/avresample.h
INSTALL libavresample/version.h
INSTALL libavresample/libavresample.pc
INSTALL libavcodec/avcodec.h
INSTALL libavcodec/avfft.h
INSTALL libavcodec/dxva2.h
INSTALL libavcodec/vaapi.h
INSTALL libavcodec/vda.h
INSTALL libavcodec/vdpau.h
INSTALL libavcodec/version.h
INSTALL libavcodec/xvmc.h
INSTALL libavcodec/libavcodec.pc
INSTALL libswresample/libswresample.pc
INSTALL libswresample/swresample.h
INSTALL libswscale/swscale.h
INSTALL libswscale/libswscale.pc
INSTALL libavutil/adler32.h
INSTALL libavutil/aes.h
INSTALL libavutil/attributes.h
INSTALL libavutil/audio_fifo.h
INSTALL libavutil/audioconvert.h
INSTALL libavutil/avassert.h
INSTALL libavutil/avstring.h
INSTALL libavutil/avutil.h
INSTALL libavutil/base64.h
INSTALL libavutil/bprint.h
INSTALL libavutil/bswap.h
INSTALL libavutil/common.h
INSTALL libavutil/cpu.h
INSTALL libavutil/crc.h
INSTALL libavutil/error.h
INSTALL libavutil/eval.h
INSTALL libavutil/fifo.h
INSTALL libavutil/file.h
INSTALL libavutil/imgutils.h
INSTALL libavutil/intfloat.h
INSTALL libavutil/intfloat_readwrite.h
INSTALL libavutil/intreadwrite.h
INSTALL libavutil/lfg.h
INSTALL libavutil/log.h
INSTALL libavutil/lzo.h
INSTALL libavutil/mathematics.h
INSTALL libavutil/md5.h
INSTALL libavutil/mem.h
INSTALL libavutil/dict.h
INSTALL libavutil/opt.h
INSTALL libavutil/parseutils.h
INSTALL libavutil/pixdesc.h
INSTALL libavutil/pixfmt.h
INSTALL libavutil/random_seed.h
INSTALL libavutil/rational.h
INSTALL libavutil/samplefmt.h
INSTALL libavutil/sha.h
INSTALL libavutil/timecode.h
INSTALL libavutil/timestamp.h
INSTALL libavutil/avconfig.h
INSTALL libavutil/libavutil.pc
AR  libavdevice/libavdevice.a
AR  libavfilter/libavfilter.a
AR  libavformat/libavformat.a
AR  libavresample/libavresample.a
AR  libavcodec/libavcodec.a
AR  libswresample/libswresample.a
AR  libswscale/libswscale.a
AR  libavutil/libavutil.a
INSTALL libavdevice/libavdevice.a
INSTALL libavfilter/libavfilter.a
INSTALL libavresample/libavresample.a
INSTALL libswresample/libswresample.a
INSTALL libswscale/libswscale.a
INSTALL libavutil/libavutil.a
INSTALL libavformat/libavformat.a
LD  ffmpeg_g
INSTALL libavcodec/libavcodec.a
CP  ffmpeg
STRIP   ffmpeg
INSTALL install-progs-yes
INSTALL ffmpeg 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T16:11:23.780

“未找到”错误并不表示未找到 arm-linux-androideabi-gcc，该错误是*从*arm-linux-androideabi-gcc 返回的，很可能是由于错误标志。由于您的 --cross-prefix 设置正确，您可以删除 --cc 和 --nm 行。如果您稍微更改交叉前缀（例如，去掉末尾的 -），您会看到未找到的错误将变为不那么模糊的错误。

尝试在你的额外 cflags 中去掉 "-DANDROID -mfloat-abi=softfp -marm -march=armv7-a" 之外的所有内容，并删除疯狂的额外引号，看看它是否编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:04:30.967

这就是您遵循的指南所说的：

> 脚本执行完成后，在 ffmpeg-0.8 目录下会有一个名为 android 的文件夹，其中包含构建的所有输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T03:08:45.573

更改了标准“build_android.sh”中的 2 个项目，以根据 $PREFIX 至少在目标目录中获得输出...

更改的简短列表

```
NDK=/home/rob/src/android-ndk-r8
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
export PATH=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/:$PATH 
```

...

```
mkdir -p $PREFIX
..
make clean 
```

1.  导出 2\. 创建目标目录

我在原始常见问题解答中抱怨的编译器检查仍然存在......

> /home/rob/src/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc 无法创建可执行文件。C 编译器测试失败。

但是我在正确的文件夹中获得了输出二进制文件，所以我将它们移动到手机并在 shell 中从 CLI 进行测试，看看我是否可以创建将在手机上播放的 WEBM 文件。

# asp.net - 这个 WCF 有什么问题

> ID：10668838
> 
> 赞同：2
> 
> 时间：2012-05-19T20:59:40.417
> 
> 标签：asp.net, wcf, c#-4.0

我在此链接中创建了 Web 服务库[http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec)

为了发布它，我点击了链接[http://naztek.wordpress.com/2009/08/27/host-a-wcf-library-in-iis/](http://naztek.wordpress.com/2009/08/27/host-a-wcf-library-in-iis/)

但我在运行时收到此错误

> “/WCFService1”应用程序中的服务器错误。
> 
> 找不到类型“服务”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：“服务”类型，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。

我`web.config`的是：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="test1.Try">
        <endpoint address="http://localhost:8732/Try" binding="webHttpBinding" contract="test1.Try"/>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> [InvalidOperationException：找不到类型“服务”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:03:18.260

在我看来，您错过了第二个链接（关于发布）的第 3 步。特别是这部分：

> 将 Service 属性值从 Service 更改为 WCF 库中具体类的完全限定名称，例如 RegistrationServiceLib.RegistrationService

要打开 svc 文件，请使用右键单击 -> 打开方式 -> XML（文本）编辑器

您应该看到如下内容：

```
<%@ ServiceHost Language="C#" Debug="true" Service="YourNamespace.Service" CodeBehind="Service.svc.cs" %> 
```

更改它以匹配您的服务（就像您的教程所述）。

# javascript - Backbone.js错误函数是通过什么方式触发的

> ID：10668840
> 
> 赞同：1
> 
> 时间：2012-05-19T20:59:52.983
> 
> 标签：javascript, jquery, backbone.js

在 Backbone.js 中以什么方式触发**错误**状态。我面临挑战，即使收到**200也会触发****错误**。我读过一篇文章，可以通过从 php.ini 发送**204**状态码来强制成功。

 ****什么情况会导致**错误**触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:39:59.707

如果您的响应返回 JSON 以外的任何内容，即使状态为 200，您也会收到错误消息。例如，在我正在构建的应用程序中，我正在调用返回 XML 的旧 REST 端点。响应是有效的，但每次都会调用错误。如果您可以让您的响应以 JSON 格式返回，则错误情况应该会消失。****

# symfony - 从 bin/vendors 切换到 composer.phar ：带有注释的错误

> ID：10668847
> 
> 赞同：1
> 
> 时间：2012-05-19T21:01:25.113
> 
> 标签：symfony, annotations, doctrine-orm

```
AnnotationException: [Semantical Error] The annotation "@Doctrine\ORM\Mapping\generatedValue" in property MyNamespace\UserBundle\Entity\User::$id does not exist, or could not be auto-loaded. 
```

这是我的 composer.json 版本：http: [//pastie.org/private/qredwfyytzl3ifhgqn7a](http://pastie.org/private/qredwfyytzl3ifhgqn7a)

在我使用旧的 php bin/vendors 更新之前，我没有遇到过这个问题。

在我的课堂上：

```
use Doctrine\ORM\Mapping as ORM;
...

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\generatedValue(strategy="AUTO")
 */
protected $id; 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T12:21:34.130

您是否尝试过 @ORM\GeneratedValue ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:03:39.483

教义注释是关键敏感的，所以使用

> @ORM\GeneratedValue

代替

> @ORM\生成值

# android - 为小部件制作一个切换按钮

> ID：10668867
> 
> 赞同：1
> 
> 时间：2012-05-19T21:05:30.833
> 
> 标签：android, android-widget

如何将按钮添加到小部件，而不是用于打开活动或其他内容？

仅用于切换例如 Wi-Fi :) 可以通过 ImageButton 或类似的东西来完成吗？我只是不知道如何添加 onClickListener。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T22:13:43.487

现在我已经更新了我的答案，因为我知道您正在尝试编写 AppWidget。

AppWidgets 仅支持一组有限的视图，而 ToggleButton 不是其中之一。AppWidgets 支持的视图列表可以在这里找到：

[http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)

您必须使用 ImageButton 并自己记住它的切换状态。您可以将其图像源设置为不同的图像，具体取决于它是否被切换。有关更多信息，请参见 ImageButton：

[http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)

# jquery - jQuery Tablesorter - 带有 Zebra 小部件的多个表格 - 每个表格添加不同的颜色

> ID：10668868
> 
> 赞同：2
> 
> 时间：2012-05-19T21:05:44.240
> 
> 标签：jquery, tablesorter, zebra-striping

我在多个表上使用带有 Zebra 小部件的 jQuery Tablesorter。我想要做的是让每张桌子都有不同的颜色来添加。当前使用 blue_style.css 使每个添加行都变成蓝色。

一个是这样的——蓝色的，第二个是黄色的，第三个是粉红色的，第四个是绿色的......像这样的东西。

我尝试使用 ID 代码，但并没有真正起作用..

每张桌子都是这样开始的

. . .

```
<script id="js">$(function() {

    $(".tablesorter")
        .tablesorter({
            // this is the default setting
            cssChildRow: "expand-child",

            // initialize zebra and filter widgets
            widgets: ["zebra", "filter"],

            widgetOptions: {
                // include child row content while filtering, if true
                filter_childRows  : true,
                // class name applied to filter row and each input
                filter_cssFilter  : 'tablesorter-filter',
                // search from beginning
                filter_startsWith : false
            }

        });

    // hide child rows
    $('.expand-child td').show();

    // Toggle child row content (td), not hiding the row since we are using rowspan
    // Using delegate because the pager plugin rebuilds the table after each page change
    // "delegate" works in jQuery 1.4.2+; use "live" back to v1.3; for older jQuery - SOL
    $('.tablesorter').delegate('.toggle', 'click' ,function(){

        // use "nextUntil" to toggle multiple child rows
        // toggle table cells instead of the row
        $(this).closest('tr').nextUntil('tr:not(.expand-child)').find('td').toggle();

        return false;
    });

    // Toggle widgetFilterChildRows option
    $('button.toggle-option').click(function(){
        var c = $('.tablesorter')[0].config.widgetOptions,
        o = !c.filter_childRows;
        c.filter_childRows = o;
        $('.state').html(o.toString());
        // update filter
        $('input.tablesorter-filter').trigger('search');
    });

});</script>
</head>
<body>
   <table class="tablesorter">
    <colgroup>
        <col width="135" />
        <col width="60" />
        <col width="150" />
        <col width="210" />
        <col width="20" />
    </colgroup>
    <thead>
        <tr>
            <th>HORSE</th>
            <th>YEAR FOALED</th>
            <th>RIDER</th>
            <th>OWNER</th>
            <th>TOTAL</th>
        </tr>
    </thead>
    <tbody> 
```

. . .

为了显示子行总是展开，我在 Zebra 上进行了一些更改。

在 style.css 上

```
/* Zebra Widget - row alternating colors */
table.tablesorter tr.odd td {
    background-color: #f0f0ff;
}
table.tablesorter tr.even td {
    background-color: #fff;
} 
```

这使得每个奇数的背景颜色都是蓝色 (#f0f0ff)

这就是我尝试的方式（没有用）

第二张表：

```
<body>
 <div id="5year">
       <table class="tablesorter">
        <colgroup> 
```

. . 第三张表：

```
<body>
 <div id="6year">
       <table class="tablesorter">
        <colgroup> 
```

. . 然后在css上添加这个。

```
/* Zebra Widget - row alternating colors */
    table.tablesorter tr.odd td {
        background-color: #f0f0ff;
    }
    #5year table.tablesorter tr.odd td {
        background-color: #eef2dd;
    }
    #6year table.tablesorter tr.odd td {
        background-color: #eed9de;
    }
    #78year table.tablesorter tr.odd td {
        background-color: #b8e4de;
    }   
    table.tablesorter tr.even td {
        background-color: #fff;
    } 
```

因为我无法真正更改类名（.tablesorter），所以我已经用它包裹了表格 - 如果我这样做了，tablesorter 函数都会中断并且不起作用。但所有的桌子都和普通的一样，都是蓝色的...... :(

这是图片网址，您可以看到我有 Photoshop 易于解释。

[http://tournaments.angelstone.co/yhs/images/zebra_example.jpg](http://tournaments.angelstone.co/yhs/images/zebra_example.jpg)

顺便说一句，我在一页中使用它们。每页一个表，但必须使用一个 style.css 文件来共享到每个页面，因为我在 Wordpress 页面上使用它们，我无法为每个表指定特定的 css 文件。

任何人都知道如何解决这个问题？我会非常感激。（对不起我的英语不好......不是我的母语）谢谢和问候。维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:35:20.650

您真正需要做的就是更改`widgetOptions.zebra`类名设置，如下所示（[演示](http://jsfiddle.net/vCTHw/123/)）：

Javascript

```
$('#5year').tablesorter({
    widgets: ['zebra']
});

$('#6year').tablesorter({
    widgets: ['zebra'],
    widgetOptions: {
        zebra: ["even", "odd6"] // odd rows have a different class name
    }
});

$('#7year').tablesorter({
    widgets: ['zebra'],
    widgetOptions: {
        zebra: ["even", "odd7"] // odd rows have a different class name
    }
});​ 
```

CSS

```
table.tablesorter tr.odd6 td {
    background-color: #fcfef0;
}
table.tablesorter tr.odd7 td {
    background-color: #fcf1ef;
}​ 
```

# ruby-on-rails - 如何在 Rails Engine 中获取 Devise 的 current_user 方法

> ID：10668874
> 
> 赞同：3
> 
> 时间：2012-05-19T21:06:33.547
> 
> 标签：ruby-on-rails, devise, rails-engines

我有一个使用 Devise gem 的 Rails 应用程序，我正在创建一个 Rails 引擎来安装在这个应用程序中。

```
mount Comments::Engine => '/talk', :as => 'comments' 
```

在引擎中，我想`current_user`从主应用程序中获取实例。

在**{main_app}/initializers/comments.rb**

```
Comments.user_class = "User"
Comments.current_user = "current_user" #current_user is Devise method(works fine in app) 
```

在**{engine}/lib/comments.rb**

```
require "comments/engine"

module Comments
  mattr_accessor :user_class, :current_user

  def self.user_class
    @@user_class.constantize
  end

  def self.current_user
    send(@@current_user)
  end
end 
```

当我调用时`Comments.current_user`，我收到错误“错误的常量名称 current_user”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T10:05:15.440

接缝我解决了问题。我会在 Comments 模型中调用 current_user ，但它不起作用。但是`current_user`从控制器获取，工作正常。但这不是优雅的方式（。

# python - 按照系统创建mysql用户

> ID：10668875
> 
> 赞同：1
> 
> 时间：2012-05-19T21:06:43.610
> 
> 标签：python, mysql, django

在我的 django web 应用程序中，用户可以发布图像。我需要创建以下系统。这意味着用户可以关注[tumblr](http://www.tumblr.com)等其他用户的帖子。

用户 2 被用户 1 关注：

```
user_id | following
1       | 2 
```

在用户 2 创建一个帖子后，我将一个帖子 ID 存储到这个表中

tbl_user_stream

```
user_id|   post_id|   time  
1      |   25     |   1337460925   # this post for user 2
1      |   26     |   1337460726 
```

如果我需要显示用户 1 的流，请执行如下查询：

```
SELECT * FROM posts p 
INNER JOIN tbl_user_stream st on st.post_id=p.id 
ORDER BY st.time DESC 
```

这个工作流程工作正常还是我们需要一个新的解决方案？这种方式的表现如何？
有人告诉我最好的解决方案是使用像 mongodb 这样的 nosql。

# perl - 带有条件perl的foreach循环？

> ID：10668878
> 
> 赞同：0
> 
> 时间：2012-05-19T21:07:14.967
> 
> 标签：perl, for-loop

是否可以`foreach`在 Perl 中有一个带有条件的循环？

我必须逐个字符地处理很多字符-`foreach`循环非常方便。请注意，我不能使用某些库，因为这是用于学校的。

如有必要，我可以使用条件编写一个`for`循环`substr`，但我想避免这种情况！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T21:50:21.500

你应该给我们看一些代码，包括你想做的*事情*。

通常，字符串的逐个字符处理将在 Perl 中通过编写

```
for my $ch (split //, $string) { ... } 
```

或者，如果更方便的话

```
my @chars = split //, $string;
for (@chars) { ... } 
```

或者

```
my $i = 0;
while ($i < @chars) { my $char = $chars[$i++]; ... } 
```

后一种形式可以支持`while`条件中的多个表达式。Perl 有很多不同的方法来做类似的事情，如果不了解你的问题，就不可能说哪种方法最适合你。

* * *

**编辑**

需要注意的是，这些方法都不允许修改原始字符串。如果这是您的意图，那么您必须使用[`s///`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators),[`tr///`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators)或[`substr`](http://perldoc.perl.org/functions/substr.html)。

请注意，`substr`有第四个参数将*替换*原始字符串的指定部分。另请注意，它可以充当*左值*，因此可以进行赋值。换句话说

```
substr $string, 0, 1, 'X'; 
```

可以等价地写为

```
substr($string, 0, 1) = 'X'; 
```

如果`split`用于将字符串转换为字符列表（实际上是一个字符的字符串），则可以在此状态下对其进行修改并使用 重新组合为字符串`join`。例如

我的 @chars = 拆分 //, $string; $chars[0] = 'X'; $string = 加入''，@chars;

使用`substr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T21:13:38.983

例如：

```
foreach my $l (@something) {
  last if (condition);
  # ...
} 
```

如果条件为真，将退出循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T21:11:15.403

您可能会调查[`next`](http://p3rl.org/next)and[`last`](http://p3rl.org/last)指令。中的更多信息[`perldoc perlsyn`](http://perldoc.perl.org/perlsyn.html#Loop-Control)。

# c++ - 类 File_pointer - 这是好的 C++ 吗？

> ID：10668879
> 
> 赞同：0
> 
> 时间：2012-05-19T21:07:26.927
> 
> 标签：c++, file-pointer

我的 c++ 程序使用许多文件指针并且有许多返回语句。
为了避免在不关闭所有打开的文件指针的情况下到达返回语句，我编写了这个类，基于我保证在到达返回语句时自动调用所有对象的析构函数的假设。

我的假设是真的吗？
它是好代码吗？

*File_pointer.cpp 中的构造函数和析构函数*

```
File_pointer::File_pointer(string filename)
{
    fptr.open(filename.c_str());
};

File_pointer::~File_pointer()
{
    fptr.close();
}; 
```

*实施示例*

```
int main ()
{
    File_pointer myfile("myfile.txt");
    int x = 2;
    switch(x)
    {
        case 1:     return x;
        case 2:     return x;
        default:
            break;
    };

return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:10:56.863

> 这是真的？

是的; 所有具有[*自动*存储持续时间](http://en.wikipedia.org/wiki/Automatic_variable)的对象在超出范围时都会调用其析构函数。

为了澄清，*自动*对象是非动态分配的非静态本地对象。

> 它是好代码吗？

那是主观的。但我要说的是，依靠作用域自动调用析构函数是一个非常常见的 C++ 习惯用法，以[*资源获取的奇怪名称而闻名，即初始化 (RAII)*](http://en.wikipedia.org/wiki/RAII)。

像`std::ofstream`已经使用 RAII 的类；他们的析构函数会自动关闭文件。因此，例如，如果您`fptr`是 a ，那么您的包装类是完全多余的。`std::ofstream`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:13:12.377

雷伊，当然。

或者，如果可以的话，使用 boost 智能指针来[包装资源](http://www.boost.org/doc/libs/1_41_0/libs/smart_ptr/sp_techniques.html#incomplete)。总是比您自己做的任何事情都经过更好的测试，无论多么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T21:13:58.390

我想那`fptr`是你课堂上的`FILE`指针`File_pointer`

尽管您的方法接近 RAII 范式，但我应该指出您没有正确处理错误。

例如，如果`fopen`失败了怎么办？

# android - ArrayAdapter 处的 BadTokenException 添加

> ID：10668880
> 
> 赞同：2
> 
> 时间：2012-05-19T21:07:29.713
> 
> 标签：android, exception, android-arrayadapter

我做了很多搜索以找到答案，但仍然不知道我做错了什么。我只是尝试将 AutoCompleteTextView 与动态数组适配器一起使用。但这对我不起作用：（

我的 OnCreate 方法如下所示：

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
layout = inflater.inflate(R.layout.travel_dest,(ViewGroup) findViewById(R.layout.statepanel));
pw = new PopupWindow(layout, 350, 500, true);
List<CharSequence> lastTravels = new ArrayList<CharSequence>();
lastTravels.add("ITT");     
adapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_dropdown_item, lastTravels);
textView = (AutoCompleteTextView) layout.findViewById(R.id.autoCompleteTextView1);
textView.setAdapter(adapter);       
textView.addTextChangedListener(this);
textView.setThreshold(1); 
```

我的 afterTextChanged 实现：

适配器。添加（“你好”）；

调用“add”方法时出现异常：

```
> android.view.WindowManager$BadTokenException: Unable to add window -- token android.view.ViewRoot$W@2b074218 is not valid; is your activity running?
at android.view.ViewRoot.setView(ViewRoot.java:546)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
at android.view.Window$LocalWindowManager.addView(Window.java:424)
at android.widget.PopupWindow.invokePopup(PopupWindow.java:911)
at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:823)
at android.widget.AutoCompleteTextView.showDropDown(AutoCompleteTextView.java:1210)
at android.widget.AutoCompleteTextView.updateDropDownForFilter(AutoCompleteTextView.java:1022)
at android.widget.AutoCompleteTextView.access$1700(AutoCompleteTextView.java:92)
at android.widget.AutoCompleteTextView$PopupDataSetObserver$1.run(AutoCompleteTextView.java:1670)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
at dalvik.system.NativeStart.main(Native Method) 
```

刚刚尝试过，如果我在 oncreate 方法中调用 adapter.add 我得到了同样的异常

```
inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
layout = inflater.inflate(R.layout.travel_dest,(ViewGroup) findViewById(R.layout.statepanel));
pw = new PopupWindow(layout, 350, 500, true);
List<String> lastTravels = new ArrayList<String>();
lastTravels.add("ITT");     
adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, lastTravels);
adapter.add("OTT");
textView = (AutoCompleteTextView) layout.findViewById(R.id.autoCompleteTextView1);
textView.setAdapter(adapter);       
textView.addTextChangedListener(this);
textView.setThreshold(1);
textView.showDropDown(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:23:49.433

我认为问题在于您将视图作为上下文传递。尝试更改`new PopupWindow(layout, 350, 500, true)`为`new PopupWindow(this, 350, 500, true)`（如果`this`将是您的活动。

# python - python中的完整类型的对象

> ID：10668885
> 
> 赞同：2
> 
> 时间：2012-05-19T21:09:41.050
> 
> 标签：python, django, types

我想打印一个对象的完整类型

例如：

```
# 1
print full_type(['a','b','c']) # output: "list of str"

# 2
x = book.objects.filter(user=user) # Django Query Set
print full_type(x) # output: "QuerySet of book" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T21:18:37.607

Python 中的容器对象可以包含任何类型的对象，甚至是混合类型。这与静态类型语言不同，在静态类型语言中，容器必须与其包含的对象类型一起声明。在 Python 中询问对象的“完整类型”是什么并没有任何意义。换句话说，包含整数的列表实例和包含字符串的另一个实例之间的*唯一区别是它们的内容。*

但是，如果您*真的*想要一个函数将其打印出来，则可以这样做：

```
def full_type(obj):
    return "%r of " % type(obj) + ','.join('%r' % t for t in set([type(o) for o in obj])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:21:50.977

如果您只打算在每个项目都是相同类型的可迭代对象上使用它，那么这里是一个开始：

```
In [6]: mylist = ['a','b','c']

In [15]: def full_type(thing):
   ....:     if not hasattr(thing, '__contains__'):
   ....:         return type(thing)
   ....:     else:
   ....:         return '{0} of {1}'.format(type(thing), type(thing[0]))
   ....:     

In [16]: full_type(mylist)
Out[16]: "<type 'list'> of <type 'str'>" 
```

# asp.net-mvc - DevExpress MVC 控件

> ID：10668887
> 
> 赞同：1
> 
> 时间：2012-05-19T21:10:14.207
> 
> 标签：asp.net-mvc, razor, devexpress

我似乎无法在 Razor 视图中对齐 DevExpress 控件。无论我使用什么 div 和 span 组合，每当我使用 @Html.DevExpress().TextBox 时，下一个控件总是在下面。我想水平显示几个标签和文本框，一个挨着一个。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:42:16.260

使用[在页面知识库文章中安排 DevExpress 控件的可能方式中的](http://www.devexpress.com/Support/Center/Question/Details/K18357)建议来解决此问题。

# javascript - 向上/向下舍入公式的元素，直到结果为整数

> ID：10668888
> 
> 赞同：0
> 
> 时间：2012-05-19T21:10:48.247
> 
> 标签：javascript, math, formula

我想向上或向下舍入，`a`直到结果为整数。

```
a = 1.2
b = 1.5
a*b*16 = 28.8 
```

不过，我有一个标准：`a`必须固定到小数点后不超过 3 位。所以我需要一个计算，上面的例子会输出到这个：

```
a = 1.25
b = 1.5
a*b*16 = 30 
```

我实际上是在 Sass 中编写一些代码，但如果有人能指出我正确的方向，无论是用 JavaScript 还是其他方式编写的。我只需要帮助制定这个令人困惑的计算！

标准： **`a`**不能超过**3 位小数**。 **`the result`**必须是**整数**。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:13:52.097

如果您限制变量的精度，则无论您使用什么方法，都不能保证结果是整数。

**例子：**

*   如果`b`= 3，则`a`= 30 / (16 × 3) = 30/48 = 5/8 = 0.625
    在这种情况下，0.625 × 3 × 16 = 30 正好。

*   如果`b`= 7，则`a`= 30 / (16 × 7) = 30/112 = 15/56 = 0.267857...
    四舍五入`a`的结果是 0.268，而 0.268 × 7 × 16 = 30.016，这是您可以得出的最接近 30 的结果。换句话说，*没有任何值`a`可以满足条件*，0.268 是你能做的最好的。

但是您*可以*求解*最佳*值，以使结果尽可能接近整数。

求解所需变量的方程，然后四舍五入到适当的小数位数。

```
a = 30\. / (16\. * b); // true value
a = ((int) (1000 * a + 0.5)) / 1000; // round to 3 decimals 
```

大多数现代语言都提供库函数来为您进行舍入；我把它写成“长手”，这样你就可以理解它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:20:14.187

```
i = Math.round(a*b*16);
a = i/b/16;
a = a.toFixed(2);
b = i/16/a; 
```

测试 om i==a*b*16

# facebook - 如何让 Facebook Open graph / social（like box）在我的网站上正常工作？

> ID：10668892
> 
> 赞同：1
> 
> 时间：2012-05-19T21:11:11.130
> 
> 标签：facebook, facebook-graph-api, facebook-like

[我以为我在我的网站](http://noahsdad.com/)上使用我的打开图形/facebook 应用程序设置正确设置了所有内容，但看起来仍然存在问题。我刚刚通过[调试器](https://developers.facebook.com/tools/debug/og/object?q=http://noahsdad.com/)运行了我的网站，这就是我得到的。我无法弄清楚是什么导致了这些错误。

```
/* ------------------------- Actions --------------------------- */

add_action('wp_head', 'wpse_43672_wp_head', 0);
/**
 * Hooks into the `wp_head` action.
 * @link http://codex.wordpress.org/Plugin_API/Action_Reference/wp_head
*/
function wpse_43672_wp_head(){ 
?> 

<script type='text/javascript'> 
(function(){ 
var bsa = document.createElement('script'); 
bsa.type = 'text/javascript'; 
bsa.async = true; 
bsa.src = '//cdn.beaconads.com/ac/beaconads.js'; 
(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa); 
})(); 

</script> 

<div id="fb-root"></div>

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'Y 11111111', // App ID
      channelUrl : '//WWW.url.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<?php 
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:20:47.257

HTML 中有两个`</head>`标签。

# jquery - Jquery验证将验证错误放入输入字段值

> ID：10668893
> 
> 赞同：0
> 
> 时间：2012-05-19T21:11:11.177
> 
> 标签：jquery, validation, input-field, errorplacement

我正在尝试覆盖 jquery 上的验证以将其放入表单输入值中（由于我的表单没有空间将其放在一边）是侧面板表单..因此，我希望它在表单中显示 hte 验证错误，有人知道怎么做吗？虽然我可以把它放在下面，但我仍然希望它在表单值内。非常感谢任何帮助，我确实发现该函数是 setDefaults，但任何其他不同的方法都可以

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:20:34.373

```
$(document).ready(function(){
    var grabMsg =  $('.YOURDIV').html(); // your div, which contains error message
    var inputName = $('input'); // input where you want it to appear

    if(inputName.val() == '') {
        inputName.attr('value', grabMsg);
    }
}); 
```

这只是基本代码，您需要考虑其他事情，例如如何删除消息然后用户单击该输入或提交表单，因为此代码在您的输入中设置了一个值。使用前要小心。

# oop - 对象初始化 - 如何处理错误

> ID：10668896
> 
> 赞同：2
> 
> 时间：2012-05-19T21:11:30.443
> 
> 标签：oop, design-patterns

> **可能重复：**
> [从构造函数中抛出异常](https://stackoverflow.com/questions/810839/throwing-exceptions-from-constructors)

初始化对象时-处理阻止对象以后履行其所有职责的问题的正确方法是什么。

例如，假设构造函数初始化一组用于远程连接的配置变量。并非所有配置变量都已正确设置，因此稍后，当该对象用于该连接时，它将根本无法工作并最终引发异常。

我可以想到几个解决方案

1.  构造函数在那里抛出异常，然后
2.  该对象提供了一种验证配置设置的方法（这意味着该对象的客户端具有在使用前检查有效状态的附加任务）
3.  只需保持原样并抛出任何异常，让客户在它们出现时处理它们。

那么，在所提供的场景中，哪些选项将被认为是最佳方法，或者如果有更好的替代方法来处理这个问题，那将是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:14:44.443

肯定抛出异常。它抽象了你的处理。

它允许您以任何您想要的方式处理它，包括（但不限于）：

*   设置一个变量来确定您的对象中启用了哪些功能，哪些没有。
*   在所述对象上调用方法。
*   向用户显示错误
*   调用某种错误日志记录

如果不处理，异常会杀死脚本，为您提供详细的调试回溯，了解出错的地方。

# mysql - 将 PDO FETCH_CLASS 与多态类一起使用

> ID：10668898
> 
> 赞同：1
> 
> 时间：2012-05-19T21:11:58.273
> 
> 标签：mysql, class, pdo, polymorphism

我有一个 php 类，例如：

```
class bar{
    public $value;
}

class foo extends bar{
    public $value;
    public $name;
} 
```

在数据库中：

```
-bar table:
value
-----
'bar value 1'
'bar value 2'

-foo table:
value        |  name
-------------+--------------
'foo value 1'| 'foo name 1'
'foo value 2'| 'foo name 2' 
```

如何使用 PDO FETCH_CLASS 存储和获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:16:22.537

这似乎不需要特殊处理。只要您知道您是在请求 a`foo`还是 a `bar`，您只需将其作为字符串传递给 fetch 调用。由于 and 有不同的表`foo`，`bar`我假设您在查询需要哪个表时已经确定。

```
// Build a foo
$stmt->setFetchMode(PDO::FETCH_CLASS, 'foo');
$stmt->fetch()

// Or build a bar
$stmt->setFetchMode(PDO::FETCH_CLASS, 'bar');
$stmt->fetch() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:49:11.440

潜在的冷静

```
select 'foo', name, value from footable; 
```

`PDO::FETCH_CLASSTYPE`使用结果中的第一列来确定要为该行实例化的类名。

```
$stmt->setFetchMode(PDO::FETCH_CLASS | PDO::FETCH_CLASSTYPE); 
```

# linux - Tomcat 7.0.27 死的无影无踪

> ID：10668900
> 
> 赞同：1
> 
> 时间：2012-05-19T21:12:18.167
> 
> 标签：linux, amazon-ec2, tomcat7

不久前，我尝试在 512m 内存的 EC2 实例上的 ubuntu 12.04 上安装 artifactory 2.6.1。但是当我启动它时，初始化后它就完全退出了。我将它安装在具有 3g 内存的 ubuntu 10 上，它可以工作。

现在我正在那个小实例上安装另一个 Web 应用程序，它运行良好。但是当我们的数据库加载了更多数据时，tomcat 退出了。虽然它仍然适用于更大的实例。

由于 artifactory 和我的 web 应用程序的行为相同，我倾向于责怪 tomcat。为什么tomcat没有错误输出就死了？它真的与内存有关吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:59:48.350

Tomcat 在没有错误输出的情况下停止的唯一方法是出现 kill -9 。如果你没有这样做，那么 Linux OOME 杀手可能有。检查 /var/log/messages。

Tomcat 停止的其他方式都应该生成某种形式的输出：

*   OOME 将触发日志消息。检查包括 catalina.out 在内的日志文件
*   由于您会看到标准的关闭消息，因此日志中的干净关闭将是显而易见的
*   JVM 崩溃不会显示在 Tomcat 日志中，但您应该在 Tomcat 进程的当前工作目录中看到 JVM 崩溃转储
*   其他致命异常将触发日志消息，如 OOME

# java - 如何使用 Java 代码创建 .xls 或 .xlsx 文件的精确副本？

> ID：10668902
> 
> 赞同：0
> 
> 时间：2012-05-19T21:13:35.137
> 
> 标签：java, cross-platform, xls, xlsx

我需要从 Java 代码创建 .xls 或 .xlsx 文件的精确副本。该文件有很多格式、公式和合并，需要保持完整。该应用程序基本上是一个桌面应用程序，应该独立于平台（没有 .bat 或 .sh pls）。请以编程方式和性能方面建议最好的方法......

```
import java.io.*;

public class CopyFile{
  private static void copyfile(String srFile, String dtFile){
  try{
  File f1 = new File(srFile);
  File f2 = new File(dtFile);
  InputStream in = new FileInputStream(f1);

  //For Append the file.
//  OutputStream out = new FileOutputStream(f2,true);

  //For Overwrite the file.
  OutputStream out = new FileOutputStream(f2);

  byte[] buf = new byte[1024];
  int len;
  while ((len = in.read(buf)) > 0){
  out.write(buf, 0, len);
  }
  in.close();
  out.close();
  System.out.println("File copied.");
  }
  catch(FileNotFoundException ex){
  System.out.println(ex.getMessage() + " in the specified directory.");
  System.exit(0);
  }
  catch(IOException e){
  System.out.println(e.getMessage());  
  }
  }
  public static void main(String[] args){
  switch(args.length){
  case 0: System.out.println("File has not mentioned.");
    System.exit(0);
  case 1: System.out.println("Destination file has not mentioned.");
  System.exit(0);
  case 2: copyfile(args[0],args[1]);
  System.exit(0);
  default : System.out.println("Multiple files are not allow.");
  System.exit(0);
  }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:37:20.263

如果您使用的是 Java 7，有一个非常简单的方法可以做到这一点：[`Files.copy`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy%28java.nio.file.Path,%20java.nio.file.Path,%20java.nio.file.CopyOption...%29).

# php - 要存储哪个 IPN 变量以及如何存储 - Paypal IPN

> ID：10668906
> 
> 赞同：0
> 
> 时间：2012-05-19T21:14:13.750
> 
> 标签：php, sql, paypal-ipn

这更像是一个设计问题。

有许多[paypal IPN 变量](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)可用作交易付款的确认。他们有很多。我的问题是，我如何将它们存储在数据库中？

1.  如果所有这些都插入到表中的一行中，比如说sold_item。
2.  或者将它们存储在多个表中并在它们之间建立关系。
3.  我应该存储IPN 事务中可用的*所有变量还是只存储重要的变量？*

我的计划是，您是我网站的注册用户。你列出一个项目，有人买它。我收到付款通知 (IPN)，然后我向您发送一封电子邮件，您的商品已售出。我想存储从 Paypal 收到的交易信息。

任何帮助见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:09:21.273

1.  如果所有这些都插入到表中的一行中，比如说sold_item。

    *好吧，任何对你有用的东西。请务必保存对您来说非常重要的字段。如果您认为将所有数据存储为一行是一项艰巨的任务，那么您可以将其序列化。*

2.  或者将它们存储在多个表中并在它们之间建立关系。

    *好多了 ：）*

3.  我应该存储 IPN 事务中可用的所有变量还是只存储重要的变量？

    *好吧，如果你有自定义变量，你也可以保存它。如果你觉得你只需要重要的数据，那么没关系不太重要的，你也可以在你的数据库中节省一些空间:)

# c++ - C++ python 扩展数组大小问题 (C2133)

> ID：10668910
> 
> 赞同：5
> 
> 时间：2012-05-19T21:15:07.290
> 
> 标签：c++, python, arrays

我正在创建一个游戏扩展，将游戏 api 暴露给嵌入式 python 解释器，并且在 PyMethodDef 中出现 C2133 数组未知大小错误：

```
static PyMethodDef pyTTPlayerMethods[] = {
{"Get_Player_Name", pyTTGet_Player_Name, METH_VARARGS, "Returns the nickname of a client."},
{"Get_Player_Type", pyTTGet_Player_Type, METH_VARARGS, "TODO: Returns the player type of a client."},
{"Get_Bandwidth", pyTTGet_Bandwidth, METH_VARARGS, "Returns a player's bandwidth."},
{"Get_Ping", pyTTGet_Ping, METH_VARARGS, "Returns the ping of a client."},
{"Get_Kbits", pyTTGet_Kbits, METH_VARARGS, "Return kbits of a client."},
{"Get_Ip", pyTTGet_Ip_Address, METH_VARARGS, "Returns the IP of a client."},
{"Get_Port", pyTTGet_Ip_Port, METH_VARARGS, "Returns the port of a client."},
{"Get_Team", pyTTGet_Team, METH_VARARGS, "Returns the team ID of a client."},
{"Get_Translated_Team", pyTTGet_Translated_Team, METH_VARARGS, "Returns the team name of a client (GDI, NOD)."},
{"Change_Team", pyTTChange_Player_Team, METH_VARARGS, "Changes the team of a client."},
{"Change_Team2", pyTTChange_Player_Team2, METH_VARARGS, "Changes the team of a client without killing respawning the player."},
{"Get_Kills", pyTTGet_Kills, METH_VARARGS, "Returns the kill count of a client."},
{"Get_Deaths", pyTTGet_Deaths, METH_VARARGS, "Returns the death count of a client."},
{"Get_KD", pyTTGet_KillDeath_Ratio, METH_VARARGS, "Returns the KD ratio of a client."},
{"Get_Rank", pyTTGet_Rank, METH_VARARGS, "Returns the rank of a client."},
{"Set_Rung", pyTTSet_Rung, METH_VARARGS, "Sets the rung of a client."},
{"Set_Ladder_Points", pyTTSet_Ladder_Points, METH_VARARGS, "Returns the rank of a client."},
{"Get_Score", pyTTGet_Score, METH_VARARGS, "Returns the score of a client."},
{"Set_Score", pyTTSet_Score, METH_VARARGS, "Sets the score of a client."},
{"Get_Money", pyTTGet_Money, METH_VARARGS, "Returns the amount of money a client has."},
{"Set_Money", pyTTSet_Money, METH_VARARGS, "Sets the amount of money a client has."},
{"Refill", pyTTGrant_Refill, METH_VARARGS, "Replenishes a client's health and ammo."},
{"Change_Character", pyTTChange_Character, METH_VARARGS, "Changes a client's character."},
{"Toggle_Fly_Mode", pyTTToggle_Fly_Mode, METH_VARARGS, "Toggles a client's flying mode."},
{"Is_Stealth", pyTTIs_Stealth, METH_VARARGS, "Returns a client's stealth status."},
{NULL, NULL, 0, NULL}
}; 
```

编译插件时，我得到以下结果：

```
1>------ Build started: Project: PythonTT, Configuration: Release SSGM Win32 ------
1>  pyGame.cpp
1>  pyPlayer.cpp
1>  PythonTT.cpp
1>pyGame.cpp(10): error C2248: 'cGameData::MapName' : cannot access protected member declared in class 'cGameData'
1>          g:\c++\ssgm 4.0\scripts\GameData.h(104) : see declaration of 'cGameData::MapName'
1>          g:\c++\ssgm 4.0\scripts\GameData.h(76) : see declaration of 'cGameData'
1>pyGame.cpp(15): error C2039: 'MapNum' : is not a member of 'cGameData'
1>          g:\c++\ssgm 4.0\scripts\GameData.h(76) : see declaration of 'cGameData'
1>g:\c++\ssgm 4.0\pythontt\pyPlayer.h(46): error C2133: 'pyTTPlayerMethods' : unknown size
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

第一个错误是因为我在 PyObject 中选择了错误的调用，但我不知道如何更正最后一个错误（C2133）；有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:39:00.680

您可以尝试使用选项 /Ze 进行编译，将一个未调整大小的数组声明为成员。 [http://msdn.microsoft.com/en-us/library/0k0w269d%28v=vs.71%29](http://msdn.microsoft.com/en-us/library/0k0w269d%28v=vs.71%29)

# java - 我将如何编写按钮 onclick 事件？

> ID：10668912
> 
> 赞同：0
> 
> 时间：2012-05-19T21:15:45.707
> 
> 标签：java, android, events, onclick, android-event

目的：让 if 语句通过代码执行 onclick 事件。

我目前在 xml 中有这个按钮。

```
<Button 
   android:id="@+id/button1" 
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content" 
   android:text="Set Call" 
   android:onClick="makeCall"/> 
```

我试过了`R.id.button1.performClick();`，但我得到了

> 无法在原始类型 int 上调用 performClick()

如果计数低于 5，我有以下条件重复。

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    int count=0;

    if (count <= 5) {

       //make call                
       R.id.button1.performClick();

       count++;

       Toast toast=Toast.makeText(this, "Count is currently" + count++ + ", 
                                        repeating", Toast.LENGTH_LONG);
       toast.show();
    }
    else {
       // Toast Popup when call set button pressed
       Toast toast=Toast.makeText(this, "Call count complete, ending method" , 
                                                            Toast.LENGTH_LONG); 
       toast.show(); 

       count++;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:24:41.457

您需要获得对该按钮的引用，然后才能使用它。

```
Button button1 = yourview.findViewById(r.id.button1);
button1.performClick(); 
```

# asp.net-mvc-3 - 为什么我的路线只获得空参数？

> ID：10668913
> 
> 赞同：1
> 
> 时间：2012-05-19T21:15:55.967
> 
> 标签：asp.net-mvc-3, null, url-routing, asp.net-mvc-routing

我试图让这条路线在我的 MVC3 应用程序中工作，但操作方法总是获取空参数。

一般的想法是我的路线有一个强制参数“类别”和一个可选参数“城市”。可能的请求 URL 如下所示：

```
 /Map/SelectCategory/Restaurants
   /Map/SelectCategory/Restaurants/Washington 
```

此路由旨在返回 JSON 数据，因为它将用作 Web 服务，这与我在此之后定义的标准 /Map/Category 操作相反，该操作适用于常规网页并且工作正常。

所以，我的路线在 Global.asax 中定义如下：

```
routes.MapRoute(    // Map It! Controller
            "MapSvc",  // route name
            "Map/SelectCategory/{catID}/{city}",   // URL with parameters
            new { controller = "Map", action = "SelectCategory", city= UrlParameter.Optional }
         );    

 .. Here a route for /Map/Category/{id} ..
 .. Here a route for /Map/Placemark/{id} .. 
```

据我所知，我可以在路由定义中省略“catID”，因为它会自动绑定为非可选的，对吧？通过定义它进行尝试，但结果相同。

最后但并非最不重要的一点是，我在 Controller 中的 Action 定义如下：

```
 public ActionResult SelectCategory(string catID, string city)
 {
     IEnumerable<Models.Placemark> list;
     if (!string.IsNullOrEmpty(city)) {
        list = doThis();
     } else {
        list = doThat();
     }
     return Json(list);
 } 
```

现在我在操作的第一个语句上放置了一个断点，但是当我请求路由中所述的 URL (/Map/SelectCategory/Restaurants) 时，我看到类别和城市参数都是 NULL，在这种情况下，我期望类别参数为“餐厅”。

**解决方案** 注意：因为我没有 100 点声望，所以我必须等待 6 个小时才能发布答案，我真的要走了，所以就在这里。

**感谢**@tsegay 让我朝着正确的方向前进。Global.asax 中定义的所有其他路由都具有带参数的显式 URL，但问题是因为默认路由（在空解决方案模板中创建的标准路由）对于这种情况来说过于贪婪：

```
 routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional}
 ); 
```

我将它移到 Global.asax 中路线列表的末尾，现在问题消失了！非常感谢你让我朝着正确的方向前进。

# python - 如何有效地从仅包含零的稀疏矩阵中删除列？

> ID：10668916
> 
> 赞同：11
> 
> 时间：2012-05-19T21:16:44.940
> 
> 标签：python, numpy, scipy, sparse-matrix

从仅包含零的稀疏矩阵中有效删除列的最佳方法是什么。我有一个我创建并填充了数据的矩阵：

```
matrix = sp.sparse.lil_matrix((100, 100)) 
```

我现在希望删除〜仅包含零数据的最后 20 列。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T19:03:25.500

如果这只是一个 numpy 数组，`X`那么您可以说`X!=0`哪个会给您一个与 形状相同的布尔数组`X`，然后您可以`X`使用该布尔数组进行索引，即`non_zero_entries = X[X!=0]`

但这是一个稀疏矩阵，它不支持布尔索引，如果你尝试也不会给你想要的东西`X!=0`——它只返回一个布尔值，如果它们是完全相同的矩阵（在内存中），它似乎只返回 true .

你想要的是`nonzero`来自 numpy.

```
import numpy as np
from scipy import sparse

X = sparse.lil_matrix((100,100)) # some sparse matrix
X[1,17] = 1
X[17,17] = 1
indices = np.nonzero(X) # a tuple of two arrays: 0th is row indices, 1st is cols
X.tocsc()[indices] # this just gives you the array of all non-zero entries 
```

如果您只想要包含非零条目的完整列，那么只需从索引中获取第一个。除非您需要考虑重复索引（如果一列中有多个条目）：

```
columns_non_unique = indices[1]
unique_columns = sorted(set(columns_non_unique))
X.tocsc()[:,unique_columns] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:32:02.220

这看起来像这样，虽然效率不理想：

```
matrix = matrix[0:100,0:80] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T10:39:46.083

还可用于 `scipy.sparse.find()` 获取稀疏矩阵中所有非零元素的位置。

返回值中的第`[1]`th 个条目是列号的 numpy 数组。从此数组中获取唯一值会给出非零列的索引。通过这些列对原始稀疏矩阵进行子集化，我们得到了非零列。

```
x[:,np.unique(sparse.find(x)[1])] 
```

可以扩展它以查找具有**至少 n**个条目的列：

```
idx = np.unique(sparse.find(x)[1], return_counts=True)
x[:, idx[0][idx[1] > n]] 
```

# php - PHP 谷歌 Gdata API

> ID：10668917
> 
> 赞同：1
> 
> 时间：2012-05-19T21:16:47.233
> 
> 标签：php, gdata, google-docs-api, zend-gdata

我正在尝试将 Google Docs 与我由 PHP 编写的 Web 应用程序集成。我知道 Zend Gdata 客户端库可以工作，实际上我确实通过使用它实现了一些功能。但我遇到的问题是 Zend Gdata 客户端库不支持 Google 推荐的 OAuth 2.0。

我不知道我是否可以编写一个脚本来通过 OAuth 2.0 获取访问权限，并在当前版本的 Zend Gdata 中使用返回的访问令牌。或者，如果有任何其他 PHP Google 文档列表 API 客户端库。

谢谢你的帮助。

**更新**
根据我的测试。您可以将 OAuth 2.0 与 Zend Gdata 一起使用。基本思想是：

1.  使用 CURL 获取访问令牌。
2.  保存访问令牌并像使用来自 AuthSub 的代码一样使用它。

希望它可以帮助那些和我有同样问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:53:03.883

根据我的测试。您可以将 OAuth 2.0 与 Zend Gdata 一起使用。基本思想是：

使用 CURL 获取访问令牌。保存访问令牌并像使用来自 AuthSub 的代码一样使用它。希望它可以帮助那些和我有同样问题的人。

# jquery - 输入字段内的标签 - 在 FORM 中不能点击文本，但可以在 LABEL 内

> ID：10668920
> 
> 赞同：0
> 
> 时间：2012-05-19T21:17:43.783
> 
> 标签：jquery, forms, labels

[http://jsfiddle.net/ndreckshage/sPHBd/](http://jsfiddle.net/ndreckshage/sPHBd/)

任何人都可以帮助使用此代码吗？我正在尝试使用此站点[http://attardi.org/labels2/#info中的插件](http://attardi.org/labels2/#info)

如果您在 jsfiddle 中注意到，如果您单击文本（电子邮件/密码），它不会激活文本字段，但如果您单击文本区域（不是文本本身，它工作正常）

在最低的例子中，它可以正常工作

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:38:55.560

问题已经解决了。看看：http: [//jsfiddle.net/sPHBd/1/](http://jsfiddle.net/sPHBd/1/)

# c# - c#如何知道opendialog中有多少选定的文件？

> ID：10668922
> 
> 赞同：2
> 
> 时间：2012-05-19T21:18:01.473
> 
> 标签：c#, file, multi-select, opendialog

如何知道在 c# 的 opendialog 中选择了多少个文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:21:29.977

.FileNames 可能会保存所选项目的数量:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T21:21:40.383

[FileDialog.FileNames 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filenames.aspx)

> 获取对话框中所有选定文件的文件名。

例如

```
foreach (String myfile in openFileDialog1.FileNames) 
{
  // here myfile represent your selected file name 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T21:21:51.273

在 WinForms 中，检查 OpenFileDialogs`FileNames`属性，它将保存所有选定的文件。在 WPF 中，使用该`Files`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-17T11:49:49.963

```
 private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
 {
 openFileDialog1.Multiselect = true;
 }
 private void button1_Click(object sender, EventArgs e)
 {
 DialogResult result = openFileDialog1.ShowDialog();
 if (result == DialogResult.OK)
 {
 List<string> fff = openFileDialog1.FileNames.ToList();
 // Do something with the list
 }  
 } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-19T21:20:39.190

```
Dim files() as String = IO.Directory.GetFiles(od.SelectedPath)
Dim Count as string = files.Length 
```

# arrays - 函数和返回 const char*

> ID：10668923
> 
> 赞同：3
> 
> 时间：2012-05-19T21:18:03.303
> 
> 标签：arrays, c++-cli, char, constants

```
const char* test(bool i)
{
    const char t[] = "aa\n";
    const char* p = "bbb\n";
    if(i)
        return p;
    return t;
}
int main(array<System::String ^> ^args)
{
     printf(test(true));
     printf(test(false));
     return 0;
} 
```

这会返回某种东西：

```
 bbb
 %^&$^$% 
```

很明显**test(false)**返回一个指向局部变量的指针。问题是 p 也是局部变量。为什么函数返回后没有清理“bbb\n”的内存。我认为 const char[] 的解释方式与 const char* 相同，但它看起来并不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T21:20:54.220

虽然`p`是局部变量，但它指向的不是局部变量——它是一个编译时字符串常量；从函数返回该常量的地址是合法的。

`t`不同，因为编译时字符串常量被*复制*到一个自动存储区域，导致在取消引用返回的指针时出现未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:21:24.547

`p`是一个局部变量，您按值返回，但指向一个**字符串字面**量，它驻留在只读内存中，而不是在为该方法分配的自动内存中。

返回`t`并使用它确实会导致未定义的行为。

另外，不要认为指针和数组是等价的。

# css - 尝试创建一个包含文本的输入框

> ID：10668928
> 
> 赞同：-5
> 
> 时间：2012-05-19T21:18:51.967
> 
> 标签：css

我正在尝试创建一个 css，它会给我一个输入框，但上面还有一些文本。我能够创建输入框，但我不确定如何在 CSS 中添加与该输入字段关联的标签显示在顶部。这是我所拥有的示例

[http://jsfiddle.net/McdhR/2/](http://jsfiddle.net/McdhR/2/)

**编辑**

```
<div class="header">

<div class="workspaceDetails">

<input name="t" id="hj" class="input"/> 
<input name="t" id="hj" class="input"/> 
<input name="t" id="hj" class="input"/>     

</div>

 .header {
        background-color:#f5f5f5;
        height:50px;
        overflow:hidden;
    }

.input
    {
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        border-radius: 5px;
    }​ 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T21:20:17.350

我已经更新了你的 jsfiddle [http://jsfiddle.net/trickeedickee/McdhR/3/](http://jsfiddle.net/trickeedickee/McdhR/3/)

该`placeholder`属性是 HTML5 的新属性，可在有限的浏览器中使用。该`value`属性适用于所有浏览器。

# .net - .NET 垃圾收集、C++/CLI internal_ptr 和线程安全

> ID：10668931
> 
> 赞同：3
> 
> 时间：2012-05-19T21:19:22.923
> 
> 标签：.net, pointers, garbage-collection, thread-safety, c++-cli

所以我知道它`interior_ptr<typename>`可以用来操作结构数组，就像在 C♯ 中使用`fixed`语句一样，但它不会修复堆上的数组并让垃圾收集移动它。这很好，因为我不想妨碍垃圾收集器有效工作。但是，垃圾收集器在单独的线程上运行，当它处于活动状态时，所有其他线程都会停止，而堆上的对象会被压缩。

假设我有以下代码：

```
interior_ptr<unsigned char> sourceBufferPtr = reinterpret_cast<interior_ptr<unsigned char>>(&sourceBuffer[0]) + sourceOffset; 
```

代码应该像这样运行，例如：

1.  `&sourceBuffer[0]`返回数组中第一项的地址：32。
2.  `sourceOffset`: 8。
3.  `reinterpret_cast<interior_ptr<unsigned char>>(&sourceBuffer[0])`将地址转换为`interior_ptr<unsigned char>`，然后将其添加到`sourceOffset`.
4.  `sourceBufferPtr`应该等于……
    *   如果垃圾收集器没有移动数组，则为 40。
    *   如果垃圾收集器将数组移动到像 16 这样的位置，则为 24。
    *   如果垃圾收集器在第 3 步和第 4 步之间移动了数组，则为 40，因此在第 3 步之后数组的位置将更新为 16，但分配给的结果`sourceBufferPtr`仍然是 40。

我是否正确假设垃圾收集器可以在步骤 3 和 4 之间停止线程并可能分配错误的值，`sourceBufferPtr`或者公共语言运行时是否*知道*如何确保整个语句是原子的/值是正确的？做什么*是*安全的`interior_ptr<typename>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T21:57:00.640

> 我是否正确假设垃圾收集器可以在步骤 3 和 4 之间停止线程并可能为 sourceBufferPtr 分配错误的值？

是的，因为您的代码不正确。通过*在获得指向数组元素的未管理指针后*使用 reinterpret_cast，您为 GC 引入了使指针无效的机会窗口。您需要像这样不间断地使用interior_ptr：

```
interior_ptr<unsigned char> bufferPtr = &sourceBuffer[0];
interior_ptr<unsigned char> sourceBufferPtr = bufferPtr + sourceOffset; 
```

在这个新代码中，只有interior_ptr's。甚至第二个赋值右侧的临时变量也是一个 internal_ptr。

# jquery - 使用 jquery ajax 未返回 xml 数据

> ID：10668932
> 
> 赞同：1
> 
> 时间：2012-05-19T21:19:30.570
> 
> 标签：jquery, xml, ajax, get, alexa

我正在尝试获取网站的页面受欢迎程度

```
<POPULARITY URL="google.com/" SOURCE="panel" TEXT="1"/> 
```

使用 alexa api。如果我发帖

```
http://data.alexa.com/data?cli=10&dat=snbamz&url=http://www.google.com 
```

进入浏览器我得到一个 xml 响应，但使用 ajax 我什么也没返回

```
$.ajax({    type: "GET",
            url: "http://data.alexa.com/data?cli=10&dat=snbamz&url=http://www.google.com",
            dataType: "xml",
            cache: false,
            success:function(data){

            alert(data); 

            }

        }); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:04:20.753

我想这是因为您正在尝试加载一个不是来自您的域的 xml 文件。大多数浏览器默认会阻止它，因为它违反了跨域 javascript 规则。

如果您在开发人员工具中查看控制台（大多数浏览器中为 F12），您会看到类似以下的错误：

> XMLHttpRequest 无法加载 [http://data.alexa.com/data?cli=10&dat=snbamz&url=http://www.google.com&_=1337464540283](http://data.alexa.com/data?cli=10&dat=snbamz&url=http://www.google.com&_=1337464540283)。Access-Control-Allow-Origin 不允许 Origin null。

解决这个问题的最简单方法（假设您正在运行 PHP）是创建一个小的 php 文件，该文件将 xml 文件包装在您自己的服务器上并从那里加载它。

看这个问题的例子：

[Ajax：从不同的域加载 XML？](https://stackoverflow.com/questions/895045/ajax-load-xml-from-different-domain)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:24:03.137

我会这样构造它：

```
$.get(ajax_url, data, function(response) {
        alert(response);
  }); 
```

另外，我认为您想为数据做一个`get`（而不是稍后`$.post`再指定`get`）。

# facebook - PHP Facebook API JSON 的输出是否可解析？

> ID：10668934
> 
> 赞同：1
> 
> 时间：2012-05-19T21:20:14.543
> 
> 标签：facebook, json, facebook-graph-api

如果我发出`$friends = $facebook->api('/me/friends');`，输出是 JSON 格式吗？

另外，我在哪里可以找到 API 字符串的完整列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:41:19.580

facebook php api 将返回一个关联数组，因此`$friends`将包含当前用户的所有朋友的 assoc 数组。（它使用标准 json_decode 来完成这个 - [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)）

正如 Rafiq + 其他人所提到的，[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)是您将要使用的 api 参考，以及图形 api 浏览器工具（[https://developers.facebook.com/tools /explorer](https://developers.facebook.com/tools/explorer) ) 是查看 api 调用的预期 JSON 输出的绝佳资源。(请记住 php sdk 会将其作为 assoc 数组返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:06:42.853

我想你正在寻找这个[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:05:26.063

Facebook`json`在关联数组中返回但 php sdk 转换。
所以，`$friends`将是一个`array`.

做这个，

```
$friends = $facebook->api('/me/friends');
var_dump($friends); 
```

它将提供与`$friends`具有的字段相关的所有信息。

如果您正在寻找其他 api 方法，

看[这里](https://developers.facebook.com/docs/reference/api/)。

*另外，不要写答案，只需更新您的问题，以防您需要再说些什么*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T03:14:24.497

API“命令”是 GET 和 POST，但我猜你正在寻找字段/表的列表。

您应该使用 Graph Explorer 浏览此列表并查看可用的内容。

[https://developers.facebook.com/tools/explore](https://developers.facebook.com/tools/explore)

通过 FQL 而不是 Graph API 查看哪些表可用也很有用，因为 API 尚未更新以包含所有功能：

[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# ruby-on-rails - rails 3路线路径建设问题

> ID：10668939
> 
> 赞同：0
> 
> 时间：2012-05-19T21:20:51.063
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes, url-routing

我有这样的路线：

```
scope ':property', :constraints => { :property => /inv|um|tm|pp/ } do
      resources :user_templates do
        member do
          get 'download/:idcreated', :action => 'download'
        end
      end
end 
```

在浏览器`http://127.0.0.1:3000/inv/user_templates/6/download/12?locale=uk`中，它可以工作。

但是我怎样才能建立资源路径呢？

我试过了：

```
download_user_template_path(params[:property], @id, @idcreated) 
```

但我收到了这条信息：

```
No route matches {:action=>"download", :controller=>"user_templates", :locale=>:uk, :property=>"inv", :id=>76, :format=>6} 
```

它也不起作用：

`download_user_template_path('property' => params[:property], 'id' => @tmp_id, 'idcreated' => @created_temp_row[:id])`

```
rake routes

                  GET    /:property/user_templates/:id/download/:idcreated(.:format) {:property=>/inv|um|tm|pp/, :action=>"download", :controller=>"user_templates"}
   user_templates GET    /:property/user_templates(.:format){:property=>/inv|um|tm|pp/, :action=>"index", :controller=>"user_templates"}
                  POST   /:property/user_templates(.:format){:property=>/inv|um|tm|pp/, :action=>"create", :controller=>"user_templates"}
new_user_template GET    /:property/user_templates/new(.:format){:property=>/inv|um|tm|pp/, :action=>"new", :controller=>"user_templates"}
edit_user_template GET    /:property/user_templates/:id/edit(.:format){:property=>/inv|um|tm|pp/, :action=>"edit", :controller=>"user_templates"}
     user_template GET    /:property/user_templates/:id(.:format){:property=>/inv|um|tm|pp/, :action=>"show", :controller=>"user_templates"}
                   PUT    /:property/user_templates/:id(.:format){:property=>/inv|um|tm|pp/, :action=>"update", :controller=>"user_templates"}
                   DELETE /:property/user_templates/:id(.:format){:property=>/inv|um|tm|pp/, :action=>"destroy", :controller=>"user_templates"} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:47:13.670

只需添加 :as => :download，然后使用 rake routes CONTROLLER= ...

# c - _Atomic 类型说明符和限定符之间的 C11 语法歧义

> ID：10668941
> 
> 赞同：12
> 
> 时间：2012-05-19T21:21:00.187
> 
> 标签：c, grammar, yacc, c11

我正在尝试基于 N1570 为 C11 编写 lex/yacc 语法。我的大部分语法都是从信息丰富的语法摘要中逐字复制的，但是出现了一些 yacc 冲突。我已经设法解决了所有这些问题，除了一个：在将“_Atomic”用作类型说明符和用作类型限定符之间似乎存在一些歧义。

在说明符形式中，_Atomic 后面紧跟括号，所以我假设它与 C 的很少使用的语法有关，该语法允许声明符放在括号中，从而允许括号紧跟限定符。但是我的语法已经知道如何区分 typedef 名称和其他标识符，所以 yacc 应该知道区别，不是吗？

我一辈子都想不出一个实际上是模棱两可的情况。

我怀疑它是否有帮助，但这是我使用 yacc 的 -v 标志时得到的相关状态输出。“ATOMIC”显然是我对“_Atomic”的标记名称

```
state 23

  152 atomic_type_specifier: ATOMIC . '(' type_name ')'
  156 type_qualifier: ATOMIC .

    '('  shift, and go to state 49

    '('       [reduce using rule 156 (type_qualifier)]
    $default  reduce using rule 156 (type_qualifier) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T13:20:28.037

好吧，我们是否能想出一个语法模棱两可的案例并不重要。N1570 第 6.7.2.4 节第 4 段规定：

> 如果 _Atomic 关键字后紧跟左括号，则将其解释为类型说明符（带有类型名称），而不是类型限定符。

为了强制执行这一点，我只是在我的 lex 规则中将 _Atomic 作为说明符，将 _Atomic 作为限定符单独的标记。

```
"_Atomic"/{WHITESPACE}*"(" {return ATOMIC_SPECIFIER;}
"_Atomic"                  {return ATOMIC_QUALIFIER;} 
```

一般来说，我对 lex/yacc 和解析器生成器比较陌生，但我的直觉说这是一种 hack。同时，lex 中的尾随上下文语法还有什么用途？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-19T22:34:03.987

是的，我认为规范中有歧义。拿

```
_Atomic int (*f)(int); 
```

这里`_Atomic`是一个类型限定符。（作为函数的返回类型，它没有多大意义，但我认为是有效的）。现在采取这种替代形式

```
int _Atomic (*f)(int); 
```

通常类型限定符可以在 the 之后`int`，这应该等同于另一个声明。但是 now`_Atomic`后面是括号，所以它*必须*被解释为一个类型说明符，这是一个语法错误。我认为甚至可以制作一个`*f`可以用有效的`typedef`.

看看 6.7.2.4 p4 的第一句

> 与原子类型相关的属性仅对左值表达式有意义。

这清楚地表明他们不期望函数的返回类型是`_Atomic`合格的。

**编辑：**

同样的歧义会发生在

```
_Atomic int (*A)[3]; 
```

这很有意义（指向三个原子整数数组的指针），我们应该能够将其重写为

```
int _Atomic (*A)[3]; 
```

**编辑 2：**要查看括号中有类型的标准没有消除歧义，请使用以下有效的 C99 代码：

```
typedef int toto;

int main(void) {
  const int toto(void);
  int const toto(void);
  const int (toto)(void);
  int const (toto)(void);
  return toto();
} 
```

`toto`这将inside重新声明`main`为一个函数。并且所有四行都是相同功能的有效原型。现在使用`_Atomic`作为限定符

```
typedef int toto;

int main(void) {
  int _Atomic (toto)(void);
  return toto();
} 
```

这应该作为带有`const`. 现在我们有一个例子，`_Atomic`括号后面是一个类型，但它不是类型说明符。

# android - Android：“对话框”的后台活动中的按钮处于活动状态？

> ID：10668942
> 
> 赞同：0
> 
> 时间：2012-05-19T21:21:14.293
> 
> 标签：android, android-dialog, android-theme

我有一个带有“确定”按钮的活动。我有一个“编辑”按钮，它将打开一个对话框 ( `theme="@android:style/Theme.Holo.Light.Dialog"`)。当我在 EditDialog 中时，我可以在后台 Activity 中看到 OK 按钮，我可以按下它，并且按下它正在注册。

有没有办法在对话框打开时禁用后台活动操作？即我想单独修改对话框中的内容。

编辑：添加显示此行为的示例代码。主要活动：

```
public class DialogTestActivity extends Activity implements OnClickListener {
    private final String TAG = "DialogTest.main";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ((Button) findViewById(R.id.button_open)).setOnClickListener(this);
        ((Button) findViewById(R.id.button_ok)).setOnClickListener(this);
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button_ok:
            Log.w(TAG, "OK Button Pressed!");
            break;
        case R.id.button_open:
            Log.d(TAG, "Opening new Window.");
            Intent intent = new Intent(this, TestDialog.class);
            startActivity(intent);
        default:
            break;
        }
    }
} 
```

TestDialog'对话框'：

```
public class TestDialog extends Activity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_dialog);

        LayoutParams params = getWindow().getAttributes();
        params.height = LayoutParams.WRAP_CONTENT;

        Window window = this.getWindow();
        window.setAttributes((android.view.WindowManager.LayoutParams) params);
        window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    }
} 
```

显现：

```
<activity
    android:name=".DialogTestActivity"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Holo.Light" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name=".TestDialog"
    android:label="@string/dialog_label"
    android:theme="@android:style/Theme.Holo.Light.Dialog" >
</activity> 
```

使用上面的代码，当 TestDialog 打开时，后台 Activity 上的 Button Press 被注册 -`OK Button Pressed!`将被记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:48:58.733

首先，这不是对话。这是一个以对话为主题的活动。对话框继承自`Dialog`.

其次，你使用的`WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL`正是你不想要的行为。删除这行代码，事情应该会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T23:58:00.777

当 a 位于前台时，底层中的任何内容都不`Activity`应是可点击`Dialog`的（这就是`Dialog`s 在 Android 中的工作方式）。如果您能够在打开`Activity`时与底层交互`Dialog`，那么您的实现可能有问题。

编辑：

删除这一行，一切都应该工作：

```
this.setCanceledOnTouchOutside(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T11:26:15.827

如果您的活动是使用下面的设置对话框主题使用代码打开的

`setFinishOnTouchOutside(false);`

# sql-server - 实体框架和 SaveChanges 中的存储过程

> ID：10668946
> 
> 赞同：2
> 
> 时间：2012-05-19T21:21:31.077
> 
> 标签：sql-server, entity-framework

我有一个存储过程，它在 table 中插入一条新记录`Pages`。

```
ALTER PROCEDURE dbo.msp_CreatePage  
(
@NamespaceID int,
@Title varchar(255),
@Redirect bit,
@New bit,
@LatestPageID int
)

AS
INSERT INTO Pages (NamespaceID, Title, Redirect, New, LatestPageID)
VALUES (@NamespaceID, @Title, @Redirect, @New, @LatestPageID);
RETURN 
```

从我的类方法中，我使用以下方法调用它：

```
Entity.msp_CreatePage(namespaceID, title, redirect, new, latestpageid);
Entity.SaveChanges(); 
```

但是，这并没有在数据库中进行任何插入。我使用该`AddObject`方法直接添加一个新对象，但我想知道问题可能是什么？

# asp.net-mvc-4 - System.ComponentModel.DataAnnotations.compare 与 System.Web.Mvc.Compare

> ID：10668948
> 
> 赞同：52
> 
> 时间：2012-05-19T21:21:37.457
> 
> 标签：asp.net-mvc-4

MVC 4 Beta 项目升级到 .Net 4.5 后无法编译。

这是由于和之间的冲突 `System.ComponentModel.DataAnnotations.CompareAttribute` 而发生的`System.Web.Mvc.CompareAttribute`

[`System.ComponentModel.DataAnnotations.CompareAttribute`MSDN 文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.compareattribute%28v=vs.110%29.aspx)说：

> 提供比较两个属性的属性。

虽然[`System.Web.Mvc.CompareAttribute`MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.compareattribute%28v=vs.108%29)说：

> 提供比较模型的两个属性的属性。

两者有什么区别，什么时候使用它们会更“聪明”？

10 倍。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-14T21:55:19.243

因此，查看 MSDN 文档并对这两个类进行字面比较，我注意到这两个类都派生自 System.ComponentModel.DataAnnotations.ValidationAttribute。事实上，这些类几乎完全相同。唯一显着的区别是 MVC 版本还实现了 IClientValidatable，它添加了以下属性：

*   FormatPropertyForClientValidation -（静态成员）通过前置星号和点来格式化属性以供客户端验证。
*   GetClientValidationRules - 使用指定的模型元数据和控制器上下文获取属性的比较值客户端验证规则列表。

至于您应该使用哪个类，如果模型将直接绑定到视图，请使用 MVC 版本，以便您可以利用客户端验证。但是，如果您使用 ViewModels，您可以坚持使用 ComponentModel 类并避免额外属性的不必要开销。你的来电！

*   [System.Web.Mvc.CompareAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.compareattribute%28v=vs.108%29)

*   [System.ComponentModel.DataAnnotations.CompareAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.compareattribute.aspx)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T14:02:51.297

Microsoft Connect 解决方法是：

> GavK 于 2012 年 6 月 17 日上午 5:13 发布
> 
> 我添加了对 [System.Web.Mvc.Compare(...)] 的完整引用，而不仅仅是使用 [Compare(...)]

在VS 2012中为我工作......

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-28T21:29:05.967

除了你应该使用哪一个之外，Vinney 完成了大部分工作......

将目标框架更改为 4.5 后发生冲突的原因是因为在 .NET 4.5 之前[System.ComponentModel.DataAnnotations 命名空间中没有 CompareAttribute 类，](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations%28v=vs.100%29.aspx)而在 System.Web.Mvc 下定义的类填补了空白。因此，例如，如果您在更新目标框架之前在模型类中使用`[Compare]`和`[Required]`属性，则在升级时最终会发生冲突。

假设您没有`System.Web.Mvc`在模型类的命名空间中使用任何其他内容，您应该删除该`using`语句并让它依赖于`System.ComponentModel.DataAnnotations`命名空间。不显眼的客户端验证将继续像以前一样工作，就像它对您使用来自同一名称空间的其他属性（例如`Required`）装饰模型的属性所做的那样。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-08T16:59:29.300

如果您希望明确引用，您可以简单地添加以下行：

使用 CompareAttribute = System.Web.Mvc.CompareAttribute；

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-29T22:14:29.857

使用 Visual Studio 2013（MVC 5 项目，.NET 4.5），IntelliSense 建议`System.Web.Mvc.CompareAttribute`已**弃用**。

我用过`System.ComponentModel.DataAnnotations.CompareAttribute`，效果很好。它还**进行客户端验证**！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-12T14:43:02.390

在[这篇文章](http://connect.microsoft.com/VisualStudio/feedback/details/727650/system-web-mvc-compare-ambiguous-reference-exception)中，他们还提出了另一种解决方案，即将 Compare() 的首选命名空间的引用移动到模型的命名空间内。例如。如果您更喜欢使用 Compare from `System.Web.Mvc`，请使用：

```
using System.ComponentModel.DataAnnotations;

namespace MyProject.MyViewModel
{
    using System.Web.Mvc; 
```

编译器将首先在模型的命名空间内进行搜索。

# c# - 创建自定义密码保护文件程序

> ID：10668954
> 
> 赞同：1
> 
> 时间：2012-05-19T21:22:10.187
> 
> 标签：c#, security, filesystems

我知道这不是一个严格的代码问题，但我正在尝试制作一个可能在我的计算机后台运行的程序，并允许我将文件/文件夹留在它们所在的位置，然后双击一个文件/文件夹出现一个对话框，要求输入密码。市场上的所有这些程序都需要您移动文件，创建新卷；我不想要那样，我想要简单。一个带有密码提示的对话框，然后打开文件/文件夹。我的问题是我需要如何明智地研究编码才能使这成为可能？感谢您的任何建议/提示。:)

```
 FileSecurity() 
```

这也是只能用 NTFS 而不是 FAT 才能完成的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:39:43.760

您无法检测到何时有人单击或双击文件夹，所以不，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T21:43:23.453

您可以使用 FileSystemWatcher 来检测文件何时打开并处理打开事件，但遗憾的是您无法阻止其执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:50:03.067

我只能想到三种安全保护文件的方法：

*   编写文件系统驱动程序（例如防病毒软件使用的类似），但在 C# 中是不可能的
*   当用户锁定文件夹时加密所有文件并在用户解锁文件夹时解密它们。
*   对于非管理员帐户，您可以设置权限（并且在 NTFS 上还内置文件加密），使没有管理员密码的用户无法访问它们

[您提到的文章](http://www.codeproject.com/Articles/20880/Folder-protection-for-Windows-using-Csharp-and-con)中使用的方法根本不安全（任何用户都可以重命名文件夹以访问受保护的文件）。虽然当用户双击受保护的文件夹并解锁文件时，如果用户输入正确的密码，您可以使用相同的技巧自动运行程序。

# wordpress - Wordpress qtranslate，找不到类别存档

> ID：10668957
> 
> 赞同：0
> 
> 时间：2012-05-19T21:23:04.967
> 
> 标签：wordpress, multilingual, categories, permalinks

在安装 qTranslate 之前，链接[http://mantaspra.com/category/blog](http://mantaspra.com/category/blog)工作得很好。现在找不到了。如果我停用插件，它会再次工作。我的永久链接结构是 /%postname%/。我尝试设置默认永久链接，更改 qtranslate 永久链接设置，什么都没有。类别基础不变，为空。页面和单个帖子有效，但类别视图无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:09:20.713

尝试将以下行添加到您的functions.php：

```
add_filter( 'post_type_link', 'qtrans_convertURL' ); 
```

# c++ - 从应用程序打开控制台

> ID：10668958
> 
> 赞同：2
> 
> 时间：2012-05-19T21:23:05.063
> 
> 标签：c++, c, linux, console

我正在开发一个 C 和 C++ 应用程序，它使用一些图形引擎来处理 gtk 窗口（Opencv/highgui）。这个应用程序对 stdout/cout 做了一些次要的输出。

在 Windows 上，从桌面启动此类应用程序会自动打开一个控制台，向用户显示在标准输出上写入的内容，使用“printf()”或“std::cout”。

在 Linux 上，如果我从以前打开的控制台启动它，没有问题。但是如果我通过桌面启动它（双击），那么 linux 不会打开关联的控制台，并且在 stdout/cout 上写入的数据会丢失。似乎这是 Linux 上的正常行为（？）。

在 linux 平台上编译时，我想从我的应用程序中自动打开一个控制台。

这似乎是一个骗局[，](https://stackoverflow.com/questions/8690388/)关键是，它不起作用！我目前有以下代码：

```
#ifndef __WIN32
   filebuf* console = new filebuf();
   console->open( "/dev/tty", ios::out );
   if( !console->is_open() )
       cerr << "Can't open console" << endl;
   else
       cout.ios::rdbuf(console);
#endif 
```

（使用 freopen() 将 cerr 重定向到文件中）

我不断收到“无法打开控制台”。我尝试替换控制台名称：

```
console->open( "/dev/console", ios::out ); 
```

但这并没有改变。

我在正确的方向吗？接下来我可以尝试什么？我应该尝试专门打开终端应用程序（xterm）吗？但是，我怎样才能将该控制台与我的应用程序“连接”呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T02:16:35.120

**解决方案 1**

您可能不喜欢的非常简单的解决方案：有一个脚本可以在终端中使用`gnome-terminal -x <your_program> <your_args>`. 双击脚本将打开终端。

**解决方案 2**

更复杂的解决方案为您的应用程序添加一个“--noconsole”参数。如果参数存在，只需运行您的应用程序。如果“--noconsole”不存在：

```
if( fork() == 0 ) {
    execlp("gnome-terminal", "gnome-terminal", "-x", argv[0], "--noconsole", NULL );
} else {
    exit( 0 );
} 
```

这将创建一个子进程，在该子进程中它`gnome-terminal`使用参数运行应用程序`--noconsole`。说得通？有点hacky，但是嘿，它有效。

**解决方案 3**

这是最棘手的解决方案，但在某些方面更优雅。这个想法是将我们的标准输出重定向到一个文件并创建一个运行`tail -f <file_name> --pid=<parent_pid>`. 这将打印父进程的输出并在父进程死亡时终止。

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>

// Create terminal and redirect output to it, returns 0 on success,
// -1 otherwise.
int make_terminal() {
    char  pidarg[256]; // the '--pid=' argument of tail
    pid_t child;       // the pid of the child proc
    pid_t parent;      // the pid of the parent proc
    FILE* fp;          // file to which output is redirected
    int   fn;          // file no of fp

    // Open file for redirection
    fp = fopen("/tmp/asdf.log","w");
    fn = fileno(fp);

    // Get pid of current process and create string with argument for tail
    parent = getpid();
    sprintf( pidarg, "--pid=%d", parent );

    // Create child process
    child = fork(); 
    if( child == 0 ) {
        // CHILD PROCESS

        // Replace child process with a gnome-terminal running:
        //      tail -f /tmp/asdf.log --pid=<parent_pid>
        // This prints the lines outputed in asdf.log and exits when
        // the parent process dies.
        execlp( "gnome-terminal", "gnome-terminal", "-x", "tail","-f","/tmp/asdf.log", pidarg, NULL );

        // if there's an error, print out the message and exit
        perror("execlp()");
        exit( -1 );
    } else {
        // PARENT PROCESS
        close(1);      // close stdout
        int ok = dup2( fn, 1 ); // replace stdout with the file

        if( ok != 1 ) {
            perror("dup2()");
            return -1;
        }

        // Make stdout flush on newline, doesn't happen by default
        // since stdout is actually a file at this point.
        setvbuf( stdout, NULL, _IONBF, BUFSIZ );
    }

    return 0;
}

int main( int argc, char *argv[]) {
    // Attempt to create terminal.
    if( make_terminal() != 0 ) {
        fprintf( stderr, "Could not create terminal!\n" );
        return -1;
    } 

    // Stuff is now printed to terminal, let's print a message every
    // second for 10 seconds.
    int i = 0;
    while( i < 10 ) {
        printf( "iteration %d\n", ++ i );
        sleep( 1 );
    }

    return 0; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T21:37:21.583

您的示例都“打开”了一个控制台-从打开文件的意义上说。这对 gui 没有任何作用。如果你想这样做，你必须打开一个 gtk 窗口并将输出定向到它。

# android - 如何在 EditText 中调整字体大小

> ID：10668959
> 
> 赞同：5
> 
> 时间：2012-05-19T21:23:12.520
> 
> 标签：android

我发现 EditText 视图中的文本溢出了最后。我真的很想重新调整字体大小（就像它在 iOS 上所做的那样），以便所有文本在视图中可见。文本没有流到第二行，它被限制在一行，但从末端消失了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:11:30.403

我不相信 Android 支持自动调整文本大小以适应 a `TextView`（或 an `EditText`）的范围。很悲伤，但很真实……

话虽如此，您绝对可以自己实现此功能。查看这篇[文章](https://stackoverflow.com/a/5535672/844882)以获取有关如何完成此操作的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:52:48.270

在您的 xml 中尝试以下操作：

android:singleLine="true" android:textSize="18sp"

# objective-c - Objective c - 当线程委托不存在时应用程序崩溃

> ID：10668965
> 
> 赞同：0
> 
> 时间：2012-05-19T21:24:28.170
> 
> 标签：objective-c

我有一个在背景上加载表格图像的应用程序。当我进入屏幕时，它开始加载图像并且一切正常。但是当我在加载图像时返回上一个屏幕时，我的应用程序崩溃了。我认为它发生是因为目标 c 试图在不再存在的类实例中调用委托。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:03:51.650

如果没有代码，我能想到一件事：

为了使您的实例存在，您的委托属性需要输入为 strong ：

`@property (nonatomic, strong) DelegateObjectType *delegate;`.

# android - 应用程序未运行时 Phonegap 中的通知

> ID：10668966
> 
> 赞同：6
> 
> 时间：2012-05-19T21:24:30.780
> 
> 标签：android, cordova, notifications

我正在使用 Android 上的 PhoneGap 开发一个应用程序，用户将不时收到消息，然后将它们带到应用程序上的一个页面。我已经研究了一些可能性，但没有找到任何简单的方法来做到这一点。我可以使用 Phonegap API 上的内置通知来执行此操作吗？

我找到了一些像这样推送通知的好方法： [http](http://www.pushwoosh.com/programming-push-notification/android-push-notification-for-phonegap/) ://www.pushwoosh.com/programming-push-notification/android-push-notification-for-phonegap/但我希望通知来自应用程序本身的时间由内置计时器确定。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:08:35.347

你不能，无论如何都不能在Phonegap中。如果用户使用 Home 按钮离开应用程序，则代码仍在运行（直到内存不足时它被终止）。但是如果用户使用返回键存在，应用程序就会死掉。请参阅此处：[使用 Phonegap 创建 Android 服务？（即使关闭也可以运行phonegap应用程序）](https://stackoverflow.com/questions/10343828/creating-an-android-service-with-phonegap-have-phonegap-app-run-even-when-clos)

# cocoa - 缩放自定义页面后如何避免剪裁？

> ID：10668971
> 
> 赞同：1
> 
> 时间：2012-05-19T21:26:08.857
> 
> 标签：cocoa, printing, pagination, scaling

我刚刚通过覆盖`-(BOOL)knowsPageRange:`and`-(NSRect)rectForPage:`方法实现了自定义分页。

这些正在打印我的正确区域`NSView`，但是，打印输出始终缩放为 100%，而我需要将比例设置为更大的值。我的每个自定义页面都小于 A4 尺寸，但我希望每个自定义页面都可以缩放打印到整个 A4 纸上。

为了进行缩放，我`CGAffineTransformScale`在打印期间应用于当前图形上下文。缩放工作正常，但会发生裁剪到矩形`rectForPage`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T22:16:01.617

将视图的框架设置为缩放生效时的大小。然后`rectForPage:`相应地计算，使比例生效。

# variables - Lua 元表变量声明

> ID：10668972
> 
> 赞同：2
> 
> 时间：2012-05-19T21:26:26.600
> 
> 标签：variables, lua, metatable

我不知道如何命名这个问题，因为我对正在发生的事情了解得不够多。（随意编辑）

考虑下面的代码。

```
函数对象：new()
    o = o 或 {
        x = 0
    }
    setmetatable(o, self)
    self.__index = 自我
    自我.y = 0

返回
结尾

表 = 对象：新（）

```

后面的变量（ox 和 self.y）有什么区别？

如果我[print_r](http://pastebin.com/aUmmscuB) the variable `table`，则只返回 x 。但是，两者`table.x`都`table.y`可以访问。这让我意识到两者之间是有区别的。

有人可以解释有什么区别以及将变量放在不同位置的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T22:45:35.793

> 后面的变量（ox 和 self.y）有什么区别？

您在这里有两张桌子，**`object`**并且**`o`**.

里面的`object:new`，`self`指的是桌子`object`。`self.y`表中的字段也是如此`object`。

**`o`**是您在每次调用时创建的新表`object:new`。`o.x`是表中的一个字段`o`。

该`o`表只有一个条目: `o["x"]`，因此当您迭代表中的条目时（就像`print_r`这样），这就是您将看到的全部内容。

那么为什么`o.y`会给你一个价值呢？因为您将表设置`object`为`o`'*元表*并且该元表设置了它的`__index`字段，所以当索引尝试失败时`o`，Lua 将通过`o`' 元表再次尝试（如果它设置了 __index）。

一点代码可能会使这一点更清楚：

```
o = { x = 33 }

print(o.x, o.y) --> 33 nil

-- let's give o a metatable
mt = { y = 20 }
setmetatable(o, mt)

-- we've given o a metatable, but that metatable doesn't have an __index member set
print(o.y) --> nil

-- metatable `handlers` are normally functions that handle events
-- here we create a handler for indexing a table if the key doesn't exist in the table:
mt.__index = function(t,k)
  print("An attempt was made to index table", t, "with the key", k)
  return 5150
end

-- we've given o's metatable a handler for indexing which always returns 5150
print(o.x) --> 33
print(o.y) --> 5150
print(o.z) --> 5150
print(o.donut) --> 5150

-- note that Lua has a "rawget" function, which bypasses the metatable mechanics
print(rawget(o,'x')) --> 33, we get a value, because o actually contains "x"
print(rawget(o,'y')) --> nil, back to nil, because the metatable is being ignored

-- the __index metatable handler is special. Instead of providing a function
-- to handle missing key events, you can give it a table. If an index attempt fails,
-- it will try again in the __index table
mt.__index = mt -- we could have used a third table here, but mt has the y entry we want

-- we've changed the metatable handler, so now we'll get 777
print(o.y) --> 777

-- changes to the metatable are reflected in any object using it as metatable
mt.__index.y = 999
print(o.y) --> 999

-- now we give `o` it's OWN "y" entry, so the metatable handler will no longer be invoked
o.y = 2112

print(o.y) --> 2112
print(rawget(o, 'y')) --> o really owns this "y" entry
print(mt.__index.y) --> 999, the metatable was untouched by our write to o.y 
```

# ios - Xcode：在视图之间切换

> ID：10668975
> 
> 赞同：0
> 
> 时间：2012-05-19T21:26:49.047
> 
> 标签：ios, view, tableview, switching

我希望能够在视图之间切换。我一直在写一些代码，但它不起作用？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{
    AlleRumViewController *allerum = [[AlleRumViewController alloc] initWithNibName:nil bundle:nil];

    if ([[tableData objectAtIndex:indexPath.row] isEqual:@"Alle rum"]) {    
        [self presentModalViewController:allerum animated:YES];
    }
} 
```

你们有谁知道我可以如何切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T21:39:13.160

```
- (IBAction)goButtonPressed:(UIButton*) source {
YourNewViewController* someNameController = [[YourNewViewController alloc] init];
[self.navigationController pushViewController:someNameController animated:YES];
[someNameController release];
} 
```

# android - 在透明形状上投影？

> ID：10668977
> 
> 赞同：2
> 
> 时间：2012-05-19T21:27:13.213
> 
> 标签：android, android-widget, android-canvas

![在此处输入图像描述](../Images/583fb0fd03c4f8ecec47b6422f93743d.png)

我正在尝试实现这个小部件设计。我正在努力解决的一件事是围绕透明度创建圆形阴影。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:04:02.650

圆的一种解决方案：使用带有一组颜色和变化点的径向渐变。您可以将其设置为从中心到 90% 的径向渐变是透明的，然后从 90% 到 100% 您从透明渐变为黑色。类似于 [透明，透明，黑色，透明] 和 [0, 0.9, 0.9, 1.0]

# sencha-touch-2 - sencha touch 2 优化

> ID：10668979
> 
> 赞同：1
> 
> 时间：2012-05-19T21:27:21.293
> 
> 标签：sencha-touch-2

附件是我的控制器文件..我基本上想切换视图..在带有 2 个按钮的容器中添加和删除面板..在主页和流行按钮的方法中，我一次又一次地使用 Ext.create 不会超载我的应用程序因为 iam 没有破坏我的视图 iam 添加和删除它们.. 我的主要问题是我**如何**为这种情况创建全局 var ，就像我创建 var homepanel = Ext.create 一样，然后我可以在我想要的时候重用该 var从我的 mainContainer 中删除或添加它.. 需要对此进行认真的指导.. 搜索了整个文档，但我对此一无所知

```
Ext.define('app.controller.MainController', {
extend: 'Ext.app.Controller',

config: {
    refs: {
        homeBtn: '#homeBtn',
        popularBtn: '#popularBtn',

        homePanel: '#homePanel',
        mainContainer: '#mainContainer'
    },
    control: {
        homeBtn:{
            tap: 'homeBtnAction'
        },
        popularBtn:{
            tap: 'popularBtnAction'
        }
    }
},

launch: function(app) {
    this.callParent(arguments);

    console.log("main launched");

    var mainCont = this.getMainContainer();
    var homepanel = Ext.create('app.view.Home.HomePanel');

    mainCont.add(homepanel);

    console.log("homePanelAdded");
},

homeBtnAction: function(){
    console.log("home page called");

    var mainCont = this.getMainContainer();
    var homepanel = Ext.create('app.view.Home.HomePanel');
    var popularpanel = Ext.create('app.view.Popular.PopularPanel');

    mainCont.remove(popularpanel);
    mainCont.add(homepanel);
},

popularBtnAction: function(){
    console.log("popular page called");

    var mainCont = this.getMainContainer();
    var homepanel = Ext.create('app.view.Home.HomePanel');
    var popularpanel = Ext.create('app.view.Popular.PopularPanel');

    mainCont.remove(homepanel);
    mainCont.add(popularpanel);
}
}); 
```

**注意：**我使用 Ext.define 创建我的视图并使用 MVC 结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:11:27.300

用这个，

```
var homepanel = this.getHomePanel() || Ext.create('app.view.Home.HomePanel'); 
```

如果 this.getHomePanel() 没有返回任何内容，它将为您创建面板。之后，您将使用已经创建的面板。

其他注意，除非您以某种方式操作按钮，否则无需为它们提供 id 或 ref。

像这样在视图中设置按钮

```
{
xtype : 'button',
text : 'Home Panel',
action : 'goHome'
} 
```

然后在控制器的控制部分使用它

```
'button[action=goHome] : 
 {
  tap: 'homeBtnAction'
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:16:11.523

一种选择是：在“启动”中，您创建两个视图（使用 Ext.Create）并在操作按钮回调中使用[Ext.getCmp来检索先前创建的视图。](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-getCmp)

# c# - 表达式树 - 在外部 lambda 中编译内部 lambda - 范围解析

> ID：10668983
> 
> 赞同：6
> 
> 时间：2012-05-19T21:28:04.790
> 
> 标签：c#, scope, expression-trees, dynamic-language-runtime

我正在创建表达式树，有一种情况我需要在另一个 lambda 中创建一个 lambda，并将内部的一个存储在一个类中，然后将该类添加到表达式树中。这是我正在尝试做的简单示例（此代码无法编译）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;

namespace SimpleTest {
    public class LambdaWrapper {
        private Delegate compiledLambda;
        public LambdaWrapper(Delegate compiledLambda) {
            this.compiledLambda = compiledLambda;
        }
        public dynamic Execute() {
            return compiledLambda.DynamicInvoke();
        }
    }

    public class ForSO {

        public ParameterExpression Param;

        public LambdaExpression GetOuterLambda() {
            IList<Expression> lambdaBody = new List<Expression>();
            Param = Expression.Parameter(typeof(object), "Param");
            lambdaBody.Add(Expression.Assign(
                            Param, 
                            Expression.Constant("Value of 'param' valiable"))
                          );

            lambdaBody.Add(Expression.Call(
                            null, 
                            typeof(ForSO).GetMethod("Write"), 
                            Param)
                          );

            Delegate compiledInnerLambda = GetInnerLambda().Compile();
            LambdaWrapper wrapper = new LambdaWrapper(compiledInnerLambda);
            lambdaBody.Add(Expression.Constant(wrapper));
            //lambdaBody.Add(GetInnerLambda());
            return Expression.Lambda(
                        Expression.Block(
                                new ParameterExpression[] { Param }, 
                                lambdaBody));
        }

        public LambdaExpression GetInnerLambda() {
            return Expression.Lambda(
                    Expression.Block(
                        Expression.Call(null, 
                                typeof(ForSO).GetMethod("Write"), 
                                Expression.Constant("Inner lambda start")),
                        Expression.Call(null, 
                                typeof(ForSO).GetMethod("Write"), 
                                Param),
                        Expression.Call(null, 
                                typeof(ForSO).GetMethod("Write"), 
                                Expression.Constant("Inner lambda end"))
                    )
                );
        }

        public static void Write(object toWrite) {
            Console.WriteLine(toWrite);
        }

        public static void Main(string[] args) {
            ForSO so = new ForSO();
            LambdaWrapper wrapper = so.GetOuterLambda().Compile()
                                      .DynamicInvoke() as LambdaWrapper;
            wrapper.Execute();
            //(so.GetOuterLambda().Compile().DynamicInvoke() as Delegate).DynamicInvoke();
        }
    }
} 
```

问题出`GetInnerLambda().Compile()`在`GetOuterLambda`方法上。我知道一种解决方案 - 它位于代码的注释部分。这样，一切正常，但我需要一个包装器作为返回值，而不是表达式子树（可以将内部 lambda 子树存储在 LambdaWrapper 中，然后再编译它，但会出现同样的问题）。

我得到的错误是`Unhandled Exception: System.InvalidOperationException: variable 'Param' of type 'System.Object' referenced from scope '', but it is not defined`.

如果我`Param`在内部 lambda 中添加块变量，代码会编译，但 Param 没有在外部 lambda 中分配值（这是有道理的）。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:44:20.353

好吧，既然你不能`Param`在你的内部 lambda 表达式中使用常量值，我建议你在你的表达式中添加一个 lambda 参数：

```
public LambdaExpression GetInnerLambda()
{
    var param = Expression.Parameter(typeof(object));
    return Expression.Lambda(
        Expression.Block(
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                Expression.Constant("Inner lambda start")),
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                param),
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                Expression.Constant("Inner lambda end"))
        ),
        param
    );
} 
```

然后将参数的值存储在您的`LambdaWrapper`类中，稍后将其用作`DynamicInvoke`调用中的参数：

```
public class LambdaWrapper
{
    private object param;
    private Delegate compiledLambda;

    public LambdaWrapper(Delegate compiledLambda, object param)
    {
        this.compiledLambda = compiledLambda;
        this.param = param;
    }

    public dynamic Execute()
    {
        return compiledLambda.DynamicInvoke(param);
    }
} 
```

这行得通，但唯一的问题是它会调用`WriteLine`on `Param`，这是一个 ParameterExpression 对象。要解决这个问题，您必须在表达式树中动态创建包装类：

```
//lambdaBody.Add(Expression.Constant(wrapper));
lambdaBody.Add(Expression.New(
    typeof(LambdaWrapper).GetConstructor(new[] { typeof(Delegate), typeof(object) }),
    Expression.Constant(compiledInnerLambda),
    Param)
); 
```

然后它将使用分配的值`Param`。而且由于您不使用`Param`outside `GetOuterLambda`，因此您现在可以将其用作局部变量。

**编辑：**

这是我解决此问题的第二次尝试：

```
public LambdaExpression GetOuterLambda()
{
    ...
    //Delegate compiledInnerLambda = GetInnerLambda().Compile();
    //LambdaWrapper wrapper = new LambdaWrapper(compiledInnerLambda);

    lambdaBody.Add(Expression.New(
        typeof(LambdaWrapper).GetConstructor(new[] { typeof(Delegate) }),
        Expression.Call(
            Expression.Call(
                typeof(ForSO).GetMethod("GetInnerLambda", BindingFlags.Public | BindingFlags.Static),
                Param
            ),
            typeof(LambdaExpression).GetMethod("Compile", Type.EmptyTypes)
        )
    ));
    ...
}

public static LambdaExpression GetInnerLambda(object param)
{
    return Expression.Lambda(
        Expression.Block(
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                Expression.Constant("Inner lambda start")),
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                Expression.Constant(param)),
            Expression.Call(null,
                typeof(ForSO).GetMethod("Write"),
                Expression.Constant("Inner lambda end"))
        )
    );
} 
```

当您运行外部委托时，此方法会编译此内部 lambda。通过这样做，`Param`将在编译内部 lambda 之前分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:56:24.557

在 Balazs Tihanyi 的帮助下，我找到了完全符合我需要的解决方案。这需要做更多的工作，因为我必须创建活页夹，但我的主要项目已经有了它们，所以我为这个示例创建了虚拟活页夹。

这是我的最终解决方案：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;
using System.Reflection;
using System.Dynamic;

namespace SimpleTest {
    public class MyCreateBinder : CreateInstanceBinder {
        public MyCreateBinder(CallInfo info) : base(info) { }

        public override DynamicMetaObject FallbackCreateInstance(
                                        DynamicMetaObject target,
                                        DynamicMetaObject[] args,
                                        DynamicMetaObject errorSuggestion) {
            var param = args[0].Value;

            Type toCreate = target.Value as Type;
            var ctors = toCreate.GetConstructors()
                        .Where(c => c.GetParameters().Length == args.Length)
                        .ToArray();

            if (ctors.Length == 0)
                throw 
                    new Exception(
                      String.Format(
                      "Can not find constructor for '{0}' with {1} parameters",
                      toCreate, args.Length));
            ConstructorInfo ctorToUse = ctors[0];
            return new DynamicMetaObject(
                            Expression.New(
                                ctorToUse,
                                args.Select(a => a.Expression).ToList()),
                       BindingRestrictions.Empty);
        }
    }

    public class MySetMemberBinder : SetMemberBinder {

        public MySetMemberBinder(string name) : base(name, false) { }

        public override DynamicMetaObject FallbackSetMember(
                                DynamicMetaObject target,
                                DynamicMetaObject value,
                                DynamicMetaObject errorSuggestion) {

            throw new NotImplementedException();
        }
    }

    public class MyGetMemberBinder : GetMemberBinder {
        public MyGetMemberBinder(string name) : base(name, false) { }

        public override DynamicMetaObject FallbackGetMember(
                                        DynamicMetaObject target,
                                        DynamicMetaObject errorSuggestion) {
            throw new NotImplementedException();
        }
    }

    public class MyInvokeMemberBinder : InvokeMemberBinder {
        public MyInvokeMemberBinder(string name, CallInfo callInfo) 
            : base(name, false, callInfo) { }

        public override DynamicMetaObject FallbackInvokeMember(
                                    DynamicMetaObject target,
                                    DynamicMetaObject[] args,
                                    DynamicMetaObject errorSuggestion) {
            var a = this;
            throw new NotImplementedException();
        }

        public override DynamicMetaObject FallbackInvoke(
                                    DynamicMetaObject target,
                                    DynamicMetaObject[] args,
                                    DynamicMetaObject errorSuggestion) {
            throw new NotImplementedException();
        }
    }

    public class LambdaWrapper : IDynamicMetaObjectProvider {
        private Delegate compiledLambda;
        private LambdaExpression exp;

        public LambdaWrapper(LambdaExpression exp) {
            this.exp = exp;
            this.compiledLambda = exp.Compile();
        }
        public dynamic Execute(dynamic param) {
            return compiledLambda.DynamicInvoke(param);
        }

        public DynamicMetaObject GetMetaObject(Expression parameter) {
            return new MetaLambdaWrapper(parameter, this);
        }
    }

    public class MetaLambdaWrapper : DynamicMetaObject {
        public MetaLambdaWrapper(Expression parameter, object value) : 
            base(parameter, BindingRestrictions.Empty, value) { }

        public override DynamicMetaObject BindInvokeMember(
                                    InvokeMemberBinder binder,
                                    DynamicMetaObject[] args) {
            MethodInfo method = this.Value.GetType().GetMethod(binder.Name);
            return new DynamicMetaObject(
                        Expression.Call(
                            Expression.Constant(this.Value),
                                method,
                                    args.Select(a => a.Expression)),
                        BindingRestrictions.GetTypeRestriction(
                            this.Expression, 
                            typeof(LambdaWrapper)));
        }
    }

    public class ForSO {
        public ParameterExpression Param;
        public LambdaExpression GetOuterLambda() {
            Expression wrapper;
            IList<Expression> lambdaBody = new List<Expression>();
            Param = Expression.Parameter(typeof(object), "Param");
            lambdaBody.Add(Expression.Assign(
                            Param,
                            Expression.Constant("Value of 'param' variable"))
                          );
            lambdaBody.Add(Expression.Call(
                            null,
                            typeof(ForSO).GetMethod("Write"),
                            Param)
                          );

            wrapper = Expression.Dynamic(
                                new MyCreateBinder(new CallInfo(1)),
                                typeof(object),
                                Expression.Constant(typeof(LambdaWrapper)),
                                Expression.Quote(GetInnerLambda()));

            lambdaBody.Add(
                Expression.Dynamic(
                    new MyInvokeMemberBinder("Execute", new CallInfo(1)),
                    typeof(object),
                    wrapper,
                Expression.Constant("calling inner lambda from outer")));

            lambdaBody.Add(wrapper);

            return Expression.Lambda(
                        Expression.Block(
                                new ParameterExpression[] { Param },
                                lambdaBody));
        }

        public LambdaExpression GetInnerLambda() {
            ParameterExpression innerParam = Expression.Parameter(
                                                typeof(object), 
                                                "innerParam");
            return Expression.Lambda(
                    Expression.Block(
                        Expression.Call(null,
                                typeof(ForSO).GetMethod("Write"),
                                Expression.Constant("Inner lambda start")),
                        Expression.Call(null,
                                typeof(ForSO).GetMethod("Write"),
                                innerParam),
                        Expression.Call(null,
                                typeof(ForSO).GetMethod("Write"),
                                Param),
                        Expression.Call(null,
                                typeof(ForSO).GetMethod("Write"),
                                Expression.Constant("Inner lambda end"))
                    ),
                    innerParam
                );
        }

        public static void Write(object toWrite) {
            Console.WriteLine(toWrite);
        }

        public static void Main(string[] args) {
            Console.WriteLine("-----------------------------------");
            ForSO so = new ForSO();

            LambdaWrapper wrapper = (LambdaWrapper) so.GetOuterLambda()
                                                    .Compile()
                                                    .DynamicInvoke();
            Console.WriteLine("-----------------------------------");
            wrapper.Execute("Calling from main");
        }
    }

} 
```

# php - 无法使用 PHP 更新 MySQL 中的表

> ID：10668984
> 
> 赞同：1
> 
> 时间：2012-05-19T21:28:18.643
> 
> 标签：php, mysql, html

我刚开始做网站。在注册页面的顶部，有一个搜索栏，您可以在其中找到现有用户。找到并选择用户后，它将自动填写注册表中的值。从那里，您可以更新用户信息。或者创建一个新用户。出于某种原因，无论我输入什么值，它都只调用更新函数而不创建新用户。任何帮助将不胜感激。谢谢！

```
//Checks database to see if user exist by first name and last name
$check_exist ="SELECT * FROM staff WHERE firstname= '$firstname' AND     lastname='$lastname'";
$exist_result = mysql_query($check_exist);

echo "TEST exist_result:" .$exist_result ."<br>";

//Updates user if user already exist
if($exist_result)
{
    echo "Update function called... <br>";
    for($i = 0; $exist_row = mysql_fetch_array($exist_result); $i++)
    {
        //get the id number
        $ID = $exist_row['ID'];
    }

    //Updates staff table
    mysql_query("UPDATE staff SET position = '$position', firstname = '$firstname', lastname = '$lastname', 
    address = '$address', city = '$city', state = '$state', zipcode = '$zipcode', phone = '$phone', ss = '$ss'
    WHERE ID = '$ID'");

    //Updates login table
    mysql_query("UPDATE login SET ID = '$ID', position = '$position', username =     '$username', password = '$password', email = '$email' WHERE ID = '$ID'");

}

//Registers user if user doesn't exist in database
 else 
{
    echo "Insert function called...<br>";
    //Insert Staff information
    $insert_staff = "INSERT INTO staff (position, firstname, lastname, 
    address, city, state, zipcode, phone, ss) 
    VALUES ('$position','$firstname','$lastname','$address','$city',
    '$state','$zipcode','$phone','$ss')";
    mysql_query($insert_staff);

    //This gets the newly created unqiue ID number from staff and insert it into login table
    $get_id = mysql_query("SELECT * FROM staff
    WHERE firstname='$firstname' AND lastname ='$lastname'");
    $login_row = mysql_fetch_array($get_id);
    $eID = $login_row['ID'];

    //Insert Login information
    $query2 = "INSERT INTO login (ID, position, username, password, email)
    VALUES ('$eID', '$position','$username','$password','$email')";
    mysql_query($query2);
} 
```

* * *

这是我得到的错误：

```
Notice: Use of undefined constant myusername - assumed 'myusername' in         /Applications/MAMP/htdocs/cms/manager/insertReg.php on line 9

Deprecated: Function session_is_registered() is deprecated in /Applications/MAMP/htdocs/cms/manager/insertReg.php on line 9

Notice: A session had already been started - ignoring session_start() in /Applications/MAMP/htdocs/CMS/connectdb.php on line 8
TEST first name:ksdfjlsdkjf3242
TEST last name:lkjdslfkjdslkj
TEST exist_result:Resource id #5
Update function called... 

Notice: Undefined variable: ID in /Applications/MAMP/htdocs/cms/manager/insertReg.php on line 55

Notice: Undefined variable: ID in /Applications/MAMP/htdocs/cms/manager/insertReg.php on line 58

Notice: Undefined variable: ID in /Applications/MAMP/htdocs/cms/manager/insertReg.php on line 59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:31:36.087

问题是您正在测试并且只要查询有效`$exist_result`，它将始终返回（它返回一个资源并且评估为真）。`true`

您需要计算行数`$exist_result`并检查`0`行。

我建议切换到 PDO /prepared statements，但在您的情况下，您可以使用：

```
mysql_num_rows($exist_result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:34:06.600

作为对@jeroen 的回复，这段代码应该对@ylhtravis 有所帮助：

```
if (mysql_num_rows($exist_result)) {
    //error code here
} else {
    //continue
} 
```

# javascript - 引用对象方法时是否应将其存储在变量中？(JavaScript)

> ID：10668987
> 
> 赞同：3
> 
> 时间：2012-05-19T21:28:30.433
> 
> 标签：javascript, oop, variables, this

我使用多次引用 JavaScript 对象的地方`this`

```
var myObj = {
   method1 : function() {},
   method2 : function() {},
   method3 : function {},
   init : function() {
       this.method1();
       this.method2(); 
       this.method3();  
   }
}; 
```

是否有任何性能提升，我应该存储`this`在变量中吗？像：

```
init : function() {
    var self = this;

    self.method1();
    self.method2(); 
    self.method3();  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T21:34:39.143

无需将`this`引用存储在变量中，除非您需要将该上下文传递到闭包中。

以下是您可能需要将`this`指针传递到闭包中的示例，例如元素上的单击事件需要引用`this`指针在事件的外部父上下文中指向的任何内容：

```
init : function() {

    $('.someElem').click( 
        (function(self) {
            return function() {
                self.method1();
                self.method2(); 
                self.method3();  
            }
        })(this)   // pass "this" into the "self" parameter as an argument
    );

} 
```

在您的情况下，您不必要地创建一个局部变量并在您确实不需要时为其分配一些东西。它是多余的，并且还会创建一个不需要的变量。

# c++ - 调用 SetupDiGetDeviceInterfaceDetail 时程序崩溃

> ID：10668988
> 
> 赞同：0
> 
> 时间：2012-05-19T21:28:41.027
> 
> 标签：c++, device, hid, wdk

我正在尝试使用 SetupDiGetDeviceInterfaceDetail() 函数获取设备的路径，但每次调用它都会崩溃。我已经为此工作了 12 多个小时，但仍然无法找出问题所在......有人可以看看他们是否能找到真正导致这种情况发生的原因吗？继承人的代码：

```
//DeviceManager.h
#include <windows.h>
//#include <hidsdi.h>
#include <setupapi.h>
#include <iostream>
#include <cfgmgr32.h>
#include <tchar.h>
#include <devpkey.h>
#include <string>

extern "C"{
    #include <hidsdi.h>
}

//#pragma comment (lib, "setupapi.lib")

class DeviceManager
{
public:
    DeviceManager();
    ~DeviceManager();

    void ListAllDevices();
    void GetDeviceHandler();

    //HANDLE PSMove;
    //byte reportBuffer[57];
    GUID guid;
//private:
    HDEVINFO deviceInfoSet;             //A list of all the devices
    SP_DEVINFO_DATA deviceInfoData;     //A device from deviceInfoSet

    SP_DEVICE_INTERFACE_DATA deviceInterfaceData;
    SP_DEVICE_INTERFACE_DETAIL_DATA deviceInterfaceDetailedData;
};

//DeviceManager.cpp
#include"DeviceManager.h"

DeviceManager::DeviceManager()
{
    //deviceInterfaceData = new SP_DEVICE_INTERFACE_DATA;
    //deviceInterfaceDetailedData = new SP_DEVICE_INTERFACE_DETAIL_DATA;

    HidD_GetHidGuid(&guid);
    deviceInfoSet = SetupDiGetClassDevs(&guid, NULL, NULL, DIGCF_PRESENT|DIGCF_DEVICEINTERFACE); //Gets all Devices
    GetDeviceHandler();
}

DeviceManager::~DeviceManager()
{
}

void DeviceManager::ListAllDevices()
{
    DWORD deviceIndex = 0;

    deviceInfoData.cbSize = sizeof(deviceInfoData);

    while(SetupDiEnumDeviceInfo(deviceInfoSet, deviceIndex, &deviceInfoData))
    {
        deviceInfoData.cbSize = sizeof(deviceInfoData);

        ULONG tcharSize;
        CM_Get_Device_ID_Size(&tcharSize, deviceInfoData.DevInst, 0);
        TCHAR* deviceIDBuffer = new TCHAR[tcharSize];   //the device ID will be stored in this array, so the tcharSize needs to be big enough to hold all the info.
                                                        //Or we can use MAX_DEVICE_ID_LEN, which is 200
        CM_Get_Device_ID(deviceInfoData.DevInst, deviceIDBuffer, MAX_PATH, 0); //gets the devices ID - a long string that looks like a file path.

        std::cout << deviceIDBuffer << std::endl;

        deviceIndex++;
    }
}

void DeviceManager::GetDeviceHandler()
{
     DWORD deviceIndex = 0;

SP_DEVINFO_DATA deviceInfoData;
SP_DEVICE_INTERFACE_DATA deviceInterfaceData;
SP_DEVICE_INTERFACE_DETAIL_DATA deviceInterfaceDetailedData;

deviceInfoData.cbSize = sizeof(deviceInfoData);

while(SetupDiEnumDeviceInfo(deviceInfoSet, deviceIndex, &deviceInfoData))
{
    TCHAR deviceID[MAX_DEVICE_ID_LEN];

    CM_Get_Device_ID(deviceInfoData.DevInst, deviceID, MAX_DEVICE_ID_LEN, 0);

    //std::cout << deviceID << std::endl;

    deviceInterfaceData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);
    if(SetupDiEnumDeviceInterfaces(deviceInfoSet, &deviceInfoData, &guid, 0, &deviceInterfaceData))
    {
        DWORD bufferLength = 0;
        //deviceInterfaceData.cbSize = sizeof(SP_DEVICE_INTERFACE_DATA);
        deviceInterfaceData.cbSize = 2048;
        //std::cout << "it works not" << std::endl;

        if(SetupDiGetDeviceInterfaceDetail(deviceInfoSet, &deviceInterfaceData, NULL, 0, &bufferLength, NULL))
        {
            //deviceInterfaceData.cbSize = sizeof(bufferLength);
            std::cout << "It works!" << std::endl;
        }
        else
        {
            std::cout << GetLastError() << std::endl;
        }

    }
    else
    {
        //std::cout << GetLastError() << std::endl;
    }

    deviceIndex++;
}

}

//mainapp.cpp
#pragma once

int main()
{
DeviceManager deviceManager;

return 0;
} 
```

在DeviceManager 的GetDeviceHandler() 函数中调用SetupDiGetDeviceInterfaceDetail 函数。

请帮忙。谢谢。

更新：我发现它在第一个 SetupDiGetDeviceInterfaceDetail 上失败并返回 122 错误 (ERROR_INSUFFICIENT_BUFFER)。但我只是想获得所需的缓冲区大小，那怎么可能呢？

更新 2：对，我通过将 deviceInterfaceData.cbsize 设置为 2048（用于测试目的的巨大空间）稍微更改了函数（参见上面的代码），现在我得到了一个 ERROR_INVALID_PARAMETER。这越来越令人困惑了......我给的参数怎么会无效？只是没有意义。唯一的区别是我传入了引用而不是指针，否则我将收到访问冲突错误...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T14:34:23.203

找到这个主题后，我想分享我的问题，即使用完全相同的源，我从调用中得到了 ERROR_INVALID_USER_BUFFER。

原因是这条线：

```
deviceInterfaceDetailedData->cbSize =
        sizeof(SP_INTERFACE_DEVICE_DETAIL_DATA); 
```

在我的四字节对齐编译器上，它设置了值 8 而不是所需的值 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T14:48:49.443

这是根据 MSDN 定义：

获取所需的缓冲区大小。使用 NULLDeviceInterfaceDetailData 指针、零的 DeviceInterfaceDetailDataSize 和有效的 RequiredSize 变量调用 SetupDiGetDeviceInterfaceDetail。**作为对此类调用的响应，此函数在RequiredSize 处返回所需的缓冲区大小，并因GetLastError 返回ERROR_INSUFFICIENT_BUFFER 而失败。**

因此，在 ERROR_INSUFFICIENT_BUFFER 错误之后，只需使用 requiredSize 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T17:02:54.463

您没有为`SP_DEVICE_INTERFACE_DETAIL_DATA`.

删除`SP_DEVICE_INTERFACE_DETAIL_DATA deviceInterfaceDetailedData;`并尝试将其放入您的`if`块中：

```
 // Get the required bufferLength
    SetupDiGetDeviceInterfaceDetail(deviceInfoSet,
                                    &deviceInterfaceData,
                                    nullptr,
                                    0,
                                    &bufferLength,
                                    nullptr);
    if(GetLastError() != ERROR_INSUFFICIENT_BUFFER)
    {
        std::cout << "Failed to get bufferLength.  Error "
                  << GetLastError() << '\n';
        return;
    }

    // Create device interface detailed information struct pointer
    // and allocate memory to it.
    PSP_DEVICE_INTERFACE_DETAIL_DATA deviceInterfaceDetailedData(nullptr);
    deviceInterfaceDetailedData =
        static_cast<PSP_INTERFACE_DEVICE_DETAIL_DATA>(malloc(bufferLength));
    if(deviceInterfaceDetailedData == nullptr)
    {
        std::cout << "Failed to allocate memory.  Error "
                  << GetLastError() << '\n';
        return;
    }
    deviceInterfaceDetailedData->cbSize =
        sizeof(SP_INTERFACE_DEVICE_DETAIL_DATA);

    // Get detailed information
    if(SetupDiGetDeviceInterfaceDetail(deviceInfoSet,
                                       &deviceInterfaceData,
                                       deviceInterfaceDetailedData,
                                       bufferLength,
                                       &bufferLength,
                                       nullptr))
    {
        //deviceInterfaceData.cbSize = sizeof(bufferLength);
        std::cout << "It works!" << std::endl;
    }
    else
    {
        std::cout << GetLastError() << std::endl;
    }

    free(deviceInterfaceDetailedData); 
```

我没有看过其余的代码，它也可能有错误，但这回答了你原来的问题。

# cocos2d-iphone - 子类化 CCSprite 时的奇怪行为

> ID：10668990
> 
> 赞同：0
> 
> 时间：2012-05-19T21:30:14.880
> 
> 标签：cocos2d-iphone, subclass

我有这个：

```
//Node.h

 @interface Node: CCSprite{
 BOOL wasTouched;
 }
 -(BOOL)getTouched;
 // some other methods

 //Node.m

 -(BOOL)getTouched{
 return wasTouched;
 }

-(id)init{
    wasTouched=NO;
    }

//wasTouched changes in the other methods..when they are called (no problem here)

//Game.m

//i make an array of nodes and do some stuff

-(void)someMethod{
    for (Node *node in arrayOfNodes){
    if ([node getTouched]) {  //here it crashes
    //code
    }}} 
```

它与消息一起崩溃`-[CCSprite getTouched]: unrecognized selector sent to instance 0x236dd0`

问题是：为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:01:15.633

您可能在 Nodes 数组中插入了一个普通的 CCSprite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:07:01.107

```
-(id)init{
    wasTouched=NO;
    } 
```

**这很伤人。:(**

您总是必须调用 init 方法的超级实现。您还必须在这里返回自我。编译器没有抱怨缺少返回值吗？忠告：不要忽略编译器警告。

这两者都可能导致非常奇怪的行为，包括我猜的崩溃。这是修复：

```
-(id) init
{
    self = [super init];
    if (self)
    {
        wasTouched = NO;
    }
    return self;
} 
```

# php - 用于确定一个句子是否等同于另一个句子的 NLP 库？

> ID：10668992
> 
> 赞同：4
> 
> 时间：2012-05-19T21:30:21.810
> 
> 标签：php, javascript, python, nlp

我想在 Python、PHP 甚至 JavaScript 中找到一个 NLP 库，用于确定字符串中的句子是否等同于不同结构的句子？

例如，库需要能够确定这两个句子是否等价：

“你要这里的订单还是去的？” “你要这里的订单还是去的？”

有这样的事吗？或者我自己为我需要的特定应用程序构建这样的东西实际上会更容易吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T21:33:29.980

您所描述的是“释义”（或双向“文本蕴涵”）的任务。这是一个非常困难的问题，也是一个开放的研究领域。我怀疑是否有可用的系统可以在此任务上做得足够好，以供现实世界的一般用途使用。

如果您的脑海中只有一组非常狭窄的转换（例如“您愿意”<->“您想要”的交替），您可以尝试构建一组转换规则，将一个句子转换为另一个句子。这些规则可以直接作用于句子或统计分析器生成的分析树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T21:33:38.187

在一般情况下解决这个问题很可能是[AI 完成](http://en.wikipedia.org/wiki/AI-complete)的——仅仅对单个句子进行正确的句法分析是一个非常困难的问题。但是，如果您正在考虑一组有限的句子形式，那么在这个有限的领域内它可能会更容易。

# php - 如何使用 Timthumb.php 强制导出 JPG？

> ID：10668994
> 
> 赞同：0
> 
> 时间：2012-05-19T21:30:30.640
> 
> 标签：php, wordpress

Timthumb，流行的图像调整/裁剪脚本 (http://code.google.com/p/timthumb/) 保持原始图像的相同格式。

如何强制输出为 JPG，与原始格式无关？