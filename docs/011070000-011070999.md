# StackOverflow 问答 11070000-11070999

# ruby-on-rails - 使用循环计数来修改 ruby 中的变量名

> ID：11070000
> 
> 赞同：0
> 
> 时间：2012-06-17T08:39:24.440
> 
> 标签：ruby-on-rails, ruby

我希望通过以下循环输出 review.avg_answer2、review.avg_answer3 等：

```
 <% @count = 1 %>
  <% 10.times do |x| %>
    <td><%= link_to review.avg_answer1.to_i, "#" %></td>
    <% @count += 1 %>
  <% end %> 
```

我知道有一个简单的答案，但它并没有击中我。

我试过`"review.avg_answer#{@count}.to_i"`了，但它当然不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:46:18.760

行得通吗？

```
review.send("avg_answer#{@count}").to_i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:28:39.540

这应该适合你的情况..
`10.times.each {|x| review.send("avg_answer#{x}")} OR`10.times.each {|x| review.send(:"avg_answer#{x}")}`

如果您设想将参数传递给您的方法，那么您可以通过以下方式对其进行更改： `10.times.each {|x| review.send("avg_answer#{x}",params1,params2)}` 或者`10.times.each {|x| review.send(:"avg_answer#{x}",params1,params2)}`

# php - joomla 2.5.4 和模块 JXTC Virtuemart 产品墙

> ID：11070005
> 
> 赞同：1
> 
> 时间：2012-06-17T08:40:22.490
> 
> 标签：php, joomla

我正在使用 joomla 做网站。我安装了模块 JXTC Virtuemart 产品墙。但此模块未显示，它显示错误“警告：在第 174 行的 Z:\home\megapolis.loc\www\modules\mod_jxtc_vmwall\tmpl\default_parse.php 中为 foreach() 提供的参数无效”。请帮助解决此错误。这是一个文件 default_parse.php

```
// Get product params
$product = array('min_order_level' => 0, 'max_order_level' => 0);
$item_params = explode('|', $item->product_params);
foreach($item_params as $aux){
$aux = explode('=',$aux);
if (isset ($aux[1]))
    $aux[1] = str_replace('"', '', $aux[1]);
if ( isset($aux[0]) && isset ($aux[1]) && ((int)$aux[1] > 0) )
    $product[$aux[0]] = $aux[1];
}

// Get Parent data if necessary
if (((!$item->file_url_thumb && !$item->file_url) || (!$item->cid || !$item->product_s_desc || !$item->product_desc || !$item->product_availability)) && $item->parentid) {
$query = 'SELECT vmi.file_url_thumb, vmi.file_url, vmpc.virtuemart_category_id AS cid, vmpb.product_s_desc, vmcb.category_name,'.
        ' vmcb.category_description, vmpb.product_desc, vmp.product_availability FROM #__virtuemart_products AS vmp' .
        ' LEFT JOIN #__virtuemart_products_' . VMLANG . ' AS vmpb ON vmp.virtuemart_product_id = vmpb.virtuemart_product_id' .
        ' LEFT JOIN #__virtuemart_product_categories AS vmpc ON vmp.virtuemart_product_id = vmpc.virtuemart_product_id' .
        ' LEFT JOIN #__virtuemart_categories AS vmc ON (vmpc.virtuemart_category_id = vmc.virtuemart_category_id AND vmc.published = 1)' .
        ' LEFT JOIN #__virtuemart_categories_' . VMLANG . ' AS vmcb ON (vmc.virtuemart_category_id = vmcb.virtuemart_category_id)' .
        ' LEFT JOIN #__virtuemart_product_medias AS vmpi ON (vmp.virtuemart_product_id = vmpi.virtuemart_product_id AND vmpi.ordering < 2)' .
        ' LEFT JOIN #__virtuemart_medias AS vmi ON vmpi.virtuemart_media_id = vmi.virtuemart_media_id WHERE' .
        ' vmp.virtuemart_product_id = ' . $item->parentid . ' AND vmp.published = 1';

$db->setQuery($query);
$aux = $db->loadObject();

if (!$item->product_availability)
    $item->product_availability = $aux->product_availability;

if (!$item->product_desc)
    $item->product_desc = $aux->product_desc;

if (!$item->product_s_desc)
    $item->product_s_desc = $aux->product_s_desc;

if (!$item->file_url_thumb)
    $item->file_url_thumb = $aux->file_url_thumb;

if (!$item->file_url)
    $item->file_url = $aux->file_url;

if (!$item->cid){
    $item->category_description = $aux->category_description;
    $item->category_name = $aux->category_name;
    $item->cid = $aux->cid;
   }
}

// Product url
$producturl = JRoute::_('index.php?option=com_virtuemart&view=productdetails&virtuemart_product_id=' . $item->id . '&virtuemart_category_id=' . $item->cid . $itemID);

// Category url
$categoryurl = JRoute::_('index.php?option=com_virtuemart&view=category&virtuemart_category_id=' . $item->cid . $itemID);

// Manufacturer url
$manufacturerurl = JRoute::_('index.php?option=com_virtuemart&view=category&virtuemart_manufacturer_id=' . $item->virtuemart_manufacturer_id . $itemID);

// Product availability
$product_availability_url = JURI::root() . VmConfig::get('assets_general_path') . 'images/availability/' . $item->product_availability;
$product_availability = JHTML::image($product_availability_url, $item->product_availability, array('class' => 'availability'));
//$product_availability = '<img src="' . $product_availability_url . '" alt="' . $item->product_availability . '" />';

// Category description
$cat_desc = strip_tags($item->category_description);
if (!empty($desclen))
$cat_desc = Jstring::trim(Jstring::substr($cat_desc, 0, $desclen)) . '...';

// Product description
$desc = strip_tags($item->product_desc);
if (!empty($desclen))
$desc = Jstring::trim(Jstring::substr($desc, 0, $desclen)) . '...';

// Product image
$imageurl = isset($item->file_url) ? $item->file_url : 'No picture';
$image = '<img src="' . $imageurl . '" alt="' . $item->product_name . '" />';
$image2 = '<img src="' . $imageurl . '" alt="' . $item->product_name . '"' .     $image_height . $image_width . ' />';

// Product thumbmnail
$thumb_url = isset($item->file_url_thumb) ? $item->file_url_thumb : 'No picture';
$thumb = '<img src="' . $thumb_url . '" alt="' . $item->product_name . '" />';

// Product rating
$maxrating = VmConfig::get('vm_maximum_rating_scale', 5);
$rating = empty($item->rating) ? JText::_('COM_VIRTUEMART_RATING') . ' ' .     JText::_('COM_VIRTUEMART_UNRATED') : JText::_('COM_VIRTUEMART_RATING') .     round($item->rating, 2) . '/' . $maxrating;

$itemhtml = str_replace('{category_name}', $item->category_name, $itemhtml);
$itemhtml = str_replace('{raw_category_description}', $item->category_description,     $itemhtml);
$itemhtml = str_replace('{category_description}', $cat_desc, $itemhtml);
$itemhtml = str_replace('{product_flypage}', $producturl, $itemhtml);
$itemhtml = str_replace('{product_url}', $item->product_url, $itemhtml);
$itemhtml = str_replace('{product_sku}', $item->product_sku, $itemhtml);
$itemhtml = str_replace('{product_name}', $item->product_name, $itemhtml);
$itemhtml = str_replace('{raw_description}', $item->product_desc, $itemhtml);
$itemhtml = str_replace('{description}', $desc, $itemhtml);
$itemhtml = str_replace('{manufacturer_name}', $item->mf_name, $itemhtml);
$itemhtml = str_replace('{manufacturer_url}', $manufacturerurl, $itemhtml);

$itemhtml = str_replace('{product_adate}', date($date_format, $item->available_date),     $itemhtml);
while (($ini = Jstring::strpos($itemhtml, "{product_adate")) !== false) {
$fin = Jstring::strpos($itemhtml, "}", $ini);
$filter = Jstring::substr($itemhtml, $ini, $fin - $ini + 1);
list($null, $fmt) = explode(' ', Jstring::substr($filter, 1, -1));
$val = date(Jstring::trim($fmt), $item->available_date);
$itemhtml = str_replace($filter, $val, $itemhtml);
}

$itemhtml = str_replace('{product_availability}', $product_availability, $itemhtml);
$itemhtml = str_replace('{product_availability_url}', $product_availability_url,     $itemhtml);

$itemhtml = str_replace('{product_cdate}', date($date_format, $item->created_on),     $itemhtml);
while (($ini = Jstring::strpos($itemhtml, "{product_cdate")) !== false) {
$fin = Jstring::strpos($itemhtml, "}", $ini);
$filter = Jstring::substr($itemhtml, $ini, $fin - $ini + 1);
list($null, $fmt) = explode(' ', Jstring::substr($filter, 1, -1));
$val = date(Jstring::trim($fmt), $item->created_on);
$itemhtml = str_replace($filter, $val, $itemhtml);
}

$itemhtml = str_replace('{product_weight}', $item->product_weight, $itemhtml);
$itemhtml = str_replace('{product_length}', $item->product_length, $itemhtml);
$itemhtml = str_replace('{product_width}', $item->product_width, $itemhtml);
$itemhtml = str_replace('{product_height}', $item->product_height, $itemhtml);

$itemhtml = str_replace('{product_mdate}', date($date_format, $item->modified_on), $itemhtml);
while (($ini = Jstring::strpos($itemhtml, "{product_mdate")) !== false) {
$fin = Jstring::strpos($itemhtml, "}", $ini);
$filter = Jstring::substr($itemhtml, $ini, $fin - $ini + 1);
list($null, $fmt) = explode(' ', Jstring::substr($filter, 1, -1));
$val = date(Jstring::trim($fmt), $item->modified_on);
$itemhtml = str_replace($filter, $val, $itemhtml);
}

$prices = $calculator->getProductPrices($item->id);
//echo var_dump($prices);

$priceFormated = array();
foreach ( $prices as $name => $product_price  ){
    $priceFormated[$name] = $currency->createPriceDiv($name,'',$prices,true);
}

$itemhtml = str_replace('{price_symbol}', $item->currency_symbol, $itemhtml);
$itemhtml = str_replace('{country_code}', $item->currency_code_3, $itemhtml);

//$itemhtml = str_replace('{cost_price}', $priceFormated['costPrice'], $itemhtml);
//$itemhtml = str_replace('{price_before_tax}', $priceFormated['priceBeforeTax'], $itemhtml);
//$itemhtml = str_replace('{sales_price_temp}', $priceFormated['salesPriceTemp'], $itemhtml);

$itemhtml = str_replace('{base_price}', $priceFormated['basePrice'], $itemhtml);
$itemhtml = str_replace('{base_price_variant}', $priceFormated['basePriceVariant'], $itemhtml);
$itemhtml = str_replace('{base_price_with_tax}', $priceFormated['basePriceWithTax'], $itemhtml);
$itemhtml = str_replace('{discounted_price_without_tax}',     $priceFormated['discountedPriceWithoutTax'], $itemhtml);
$itemhtml = str_replace('{sales_price}', $priceFormated['salesPrice'], $itemhtml);
$itemhtml = str_replace('{tax_amount}', $priceFormated['taxAmount'], $itemhtml);
$itemhtml = str_replace('{sales_price_with_discount}',     $priceFormated['salesPriceWithDiscount'], $itemhtml);
$itemhtml = str_replace('{discount_amount}', $priceFormated['discountAmount'], $itemhtml);
$itemhtml = str_replace('{price_without_tax}', $priceFormated['priceWithoutTax'],     $itemhtml);

$itemhtml = str_replace('{product_price}', $item->product_price, $itemhtml);
$itemhtml = str_replace('{product_rating}', $rating, $itemhtml);
$itemhtml = str_replace('{product_rating_raw}', $item->rating, $itemhtml);
$itemhtml = str_replace('{product_s_desc}', $item->product_s_desc, $itemhtml);
$itemhtml = str_replace('{product_stock}', $item->product_in_stock, $itemhtml);
$itemhtml = str_replace('{product_full_image}', $image, $itemhtml);
$itemhtml = str_replace('{product_full_image_url}', $imageurl, $itemhtml);
$itemhtml = str_replace('{product_image}', $image2, $itemhtml);
$itemhtml = str_replace('{product_thumb_image_url}', $thumb_url, $itemhtml);
$itemhtml = str_replace('{product_thumb_image}', $thumb, $itemhtml);
//$itemhtml = str_replace('{categorythumbnailurl}', $category_thumb_url, $itemhtml);
*174 LINE** //$itemhtml = str_replace('{categorythumbnail}', $category_thumb,     $itemhtml);***
$itemhtml = str_replace('{category_url}', $categoryurl, $itemhtml);
$itemhtml = str_replace('{index}', $index, $itemhtml);

//Generate add to car form
$cart_bar = '<div class="addtocart-area">
<form method="post" class="product js-recalculate" action="index.php" >
    <div class="addtocart-bar">
        <!-- <label for="quantity' . $item->id . '" class="quantity_box">' . JText::_('COM_VIRTUEMART_CART_QUANTITY') . ': </label> -->';
        $quatity_box = '<span class="quantity-box">
            <input type="text" class="quantity-input" name="quantity[]" value="';
            if (isset($product['min_order_level']) && (int) $product['min_order_level'] > 0) {
                $quatity_box .= $product['min_order_level'];
            } else {
                $quatity_box .= $default_qty ? $default_qty : '1';
            }
        $quatity_box .='" />
        </span>
        <span class="quantity-controls">
            <input type="button" class="quantity-controls quantity-plus" />
            <input type="button" class="quantity-controls quantity-minus" />
        </span>';

        $button_lbl = JText::_('COM_VIRTUEMART_CART_ADD_TO');
        $button_cls = 'addtocart-button';
        $button_name = 'addtocart';
        $stockhandle = VmConfig::get('stockhandle', 'none');
        if (($stockhandle == 'disableit' or $stockhandle == 'disableadd') and     ($item->product_in_stock - $item->product_ordered) < 1) {
            $button_lbl = JText::_('COM_VIRTUEMART_CART_NOTIFY');
            $button_cls = 'notify-button';
            $button_name = 'notifycustomer';
        }
        vmdebug('$stockhandle ' . $stockhandle . ' and stock ' .     $item->product_in_stock . ' ordered ' . $item->product_ordered);

        $cart_button = '<span class="addtocart-button">
            <input type="submit" name="' . $button_name . '"  class="' . $button_cls .     '" value="' . $button_lbl . '" title="' . $button_lbl . '" />
        </span>';

        switch($show_qty_box){
            case 'none':
                $cart_bar .= '<!-- '.$quatity_box.' -->'.$cart_button;
            break;
            case 'left':
                $cart_bar .= $quatity_box.$cart_button;
            break;
            case 'right':
                $cart_bar .= $cart_button.$quatity_box;
            break;
            case 'top':
                $cart_bar .= $quatity_box.'<div class="clear"></div>'.$cart_button;
            break;
            case 'bottom':
                $cart_bar .= $cart_button.'<div class="clear"></div>'.$quatity_box;
            break;
        }
        $cart_bar .= '<div class="clear"></div>
    </div>
    <input type="hidden" class="pname" value="' . $item->product_name . '" />
    <input type="hidden" name="option" value="com_virtuemart" />
    <input type="hidden" name="view" value="cart" />
    <noscript><input type="hidden" name="task" value="add" /></noscript>
    <input type="hidden" name="virtuemart_product_id[]" value="' . $item->id . '" />
    <input type="hidden" name="virtuemart_manufacturer_id" value="' .     $item->virtuemart_manufacturer_id . '" />
    <input type="hidden" name="virtuemart_category_id[]" value="' . $item->cid . '" />
</form>
<div class="clear"></div>
</div>';

$itemhtml = str_replace('{form_addtocart}', $cart_bar, $itemhtml);

? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:58:57.050

如果您尝试对不是数组的变量执行 foreach，则可能会发生为 foreach() 提供的无效参数。也许它“应该”是一个数组，也许你认为它是一个数组，但抱歉——它不是。

检查此链接，

[http://php.syntaxerrors.info/index.php?title=Invalid_argument_supplied_for_foreach](http://php.syntaxerrors.info/index.php?title=Invalid_argument_supplied_for_foreach)

# javascript - 使用 jquery 或 javascript 为每个 div 设置不同的颜色

> ID：11070007
> 
> 赞同：2
> 
> 时间：2012-06-17T08:40:26.033
> 
> 标签：javascript, jquery

我有一个主页，`ul li div`div 是一个方形框，顶部有 3x3。我网站的底部是代码生成标记，我有类似的东西。

我想给每个 div“盒子”一个颜色，目前它们都用 css 设置样式。jquery 有没有办法检查 ul li div，如果 div 存在，则为内联样式添加不同的颜色？我需要将颜色存储在脚本中。

这就是我可以开始的方式？：

```
$("div.box").css({"background-color": "color"}); 
```

这是我的示例减少标记：

```
<ul>
<li data-target="aboutme" data-target-activation="click" style="margin-top:0px" class="tile high me">
          <div>
          <h2>About Me</h2>
        <h3></h3>
         <img width="48" height="48" alt="" class="icon" src="images/icons/x.png">
     </div>
</li>

<li data-target="aboutme" data-target-activation="click" style="margin-top:0px" class="tile high me">
          <div>
          <h2>Pane 2</h2>
        <h3></h3>
         <img width="48" height="48" alt="" class="icon" src="images/icons/x.png">
     </div>
</li>

<li data-target="aboutme" data-target-activation="click" style="margin-top:0px" class="tile high me">
          <div>
          <h2>Pane 3</h2>
        <h3></h3>
         <img width="48" height="48" alt="" class="icon" src="images/icons/x.png">
     </div>
</li>
</ul> 
```

这是CSS：

```
 .tiles {
        height: 95%;
        margin: 0 auto;
        min-height: 950px;
        overflow: visible;
        padding: 10px;
        width: 957px;
    }

    .tile.high {
    float: left;
        height: 200px;
        margin-top: -100px;
        padding-left: 10px;
        width: 23.6%;
    }

    li.tile div {
        background-color: #00ABA9;
    }

    .tile div {
        background-repeat: no-repeat;
        height: 100%;
        margin: 10px 10px 0;
        overflow: hidden;
        width: 100%;

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T08:53:59.053

遍历 div 并在每个上使用不同的颜色：

```
// Declare colors you want to use
var myColors = [
    '#f00', '#abc', '#123'
];
var i = 0;
$('div.box').each(function() {
    $(this).css('background-color', myColors[i]);
    i = (i + 1) % myColors.length;
}); 
```

在线查看：http: [//jsfiddle.net/4NVRQ/](http://jsfiddle.net/4NVRQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:53:39.080

```
var 

color = function(){
    return '#' + Math.floor(Math.random()*16777215).toString(16);
},
$els = $('div.box'),
colorify = function(els){
    els.each(function(){
        $(this).css('backgroundColor', color());
    });
};

colorify($els); 
```

# javascript - Javascript没有更新变量

> ID：11070010
> 
> 赞同：0
> 
> 时间：2012-06-17T08:41:25.940
> 
> 标签：javascript, google-maps

我的javascript代码有问题。我正在使用谷歌地图，我正在从服务器以 json 格式收集数据。当我在某些浏览器的控制台窗口中检查数据时，我可以看到数据实际上正在到来。

我的问题是变量被读取一次，我在文本框中显示它的值。现在，当我不断接收数据时，变量总是相同的，知道为什么吗？而且我 100% 确信我得到了不同的价值观。

这是代码：

```
function updateTrucks() {
    $.ajax({
        url: "get_data.php",
        cache: false,
        dataType: 'json',
        data: {},
        error: function(jqxhr, textStatus, errorThrown) {
            alert("Error: " + textStatus + " " + errorThrown);
        },
        success: function(data) {
        for(var i = 0; i < data.results.length; i++) {
            if(trucks.hasOwnProperty(data.results[i].id)) {
                // update position
                trucks[data.results[i].id].setPosition(new google.maps.LatLng(
                parseFloat(data.results[i].lat),
                parseFloat(data.results[i].lng)));
                trucks[data.results[i].id].speed = data.results[i].speed;
            }
            else {
                // code
            }

            google.maps.event.addListener(trucks[data.results[i].id], 'position_changed', function() {
                if(typeof tracked !== "undefined") {
                    if(this.id == tracked.id) {
                        map.panTo(this.getPosition());
                        $("#speed").val(this.speed);
                    }
                }
            }); 
```

此行无法正常工作`$("#speed").val(this.speed);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:56:12.017

我认为您需要在更新位置时更改命令的顺序，因此当 position_changed 触发时，速度属性将被刷新：

```
if(trucks.hasOwnProperty(data.results[i].id)) {
                trucks[data.results[i].id].speed = data.results[i].speed;
                // update position
                trucks[data.results[i].id].setPosition(new google.maps.LatLng(
                  parseFloat(data.results[i].lat),
                  parseFloat(data.results[i].lng)));
              } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T16:17:24.630

在javascript中你可以做

```
document.getElementById("clicks").innerHTML = stuff; 
```

在javascript中调用var `stuff`，在html中调用var`clicks`

# powershell - PowerShell 中的数组展开

> ID：11070014
> 
> 赞同：3
> 
> 时间：2012-06-17T08:42:05.643
> 
> 标签：powershell

我试图理解 Posh 中的数组展开，以下让我感到困惑。在这个例子中，我返回了包裹在另一个数组中的数组（使用逗号），这基本上给了我在外部数组在返回时展开后的原始数组。为什么当我通过在带有结果的变量上使用数组运算符 (@) 间接包装结果时会得到正确的结果（只是数组），但如果我直接在函数上使用 @ 会得到数组中的数组？@ 运算符对于不同类型的参数的行为是否不同？@ 运算符和数组展开是否有任何 PS 帮助文章？

```
function Unroll
{
    return ,@(1,2,3)
}

Write-Host "No wrapper"
$noWrapper = Unroll #This is array[3]
$noWrapper | % { $_.GetType() }

Write-Host "`nWrapped separately"
$arrayWrapper = @($noWrapper) #No change, still array[3]
$arrayWrapper | % { $_.GetType() }

Write-Host "`nWrapped directly"
$directArrayWrapper = @(Unroll) #Why is this array[1][3] then?
$directArrayWrapper | % { $_.GetType() }
Write-Host "`nThe original array in elem 0"
$directArrayWrapper[0] | % { $_.GetType() } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:14:59.923

如果您从`Unroll`函数中删除逗号运算符，它的行为应该符合您的预期。

```
function Unroll
{
    return @(1,2,3)
} 
```

在这种情况下`$arrayWrapper = @($noWrapper)`与 相同`$directArrayWrapper = @(Unroll)`。

[您可以通过这个 SO question](https://stackoverflow.com/questions/3701831/powershell-pass-system-object-without-unrolling)和[这篇关于数组文字的文章在 PowerShell](http://blogs.msdn.com/b/powershell/archive/2007/01/23/array-literals-in-powershell.aspx)中找到有关数组展开的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:43:27.027

看着[this other question](https://stackoverflow.com/questions/1872146/powershell-how-exactly-does-the-rhs-of-the-f-operator-work)，似乎

> 将结果（一个数组）放在一个分组表达式（或子表达式，例如 $()）中，使它有资格再次展开。

这似乎就是这里发生的事情。

# c++ - 如何将函数存储在类成员中？（使用函数作为回调）

> ID：11070015
> 
> 赞同：2
> 
> 时间：2012-06-17T08:42:52.850
> 
> 标签：c++, function-pointers

我想将一个函数存储为类成员并在类中调用它？很像回调函数。我的班级绘制了一个文档，但每个文档都必须以不同的方式绘制。所以我想将一个函数（在类之外编写）分配给类的一个成员，然后在我想绘制文档时调用它。

该功能主要负责根据每个特定文档转换对象。

这是我的课：

```
class CDocument
{
public:
    CDocument();
    ~CDocument();

    void *TransFunc();
}

void Transform()
{

}

int main()
    CDocument* Doc = new CDocument();
    Doc->TransFunc = Transform();
} 
```

我知道这可能是一个简单的问题，但我无法通过谷歌搜索或搜索找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:02:49.800

我想，这可能是你想要的。如果您有任何问题，请回复我。

```
class CDocument
{
public:
    CDocument():myTransFunc(NULL){}
    ~CDocument();

    typedef void (*TransFunc)();  // Defines a function pointer type pointing to a void function which doesn't take any parameter.

    TransFunc myTransFunc;  //  Actually defines a member variable of this type.

    void drawSomething()
    {
         if(myTransFunc)
            (*myTransFunc)();   // Uses the member variable to call a supplied function.
    }
};

void Transform()
{

}

int main()
{
    CDocument* Doc = new CDocument();
    Doc->myTransFunc = Transform;  // Assigns the member function pointer to an actual function.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T08:44:36.127

您需要使用**[指向成员函数](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)**的指针。

```
typedef void (CDocument::*TransFuncPtr)(); 
```

然后你可以`TransFuncPtr`用作*type*。

* * *

随着您的编辑，您似乎只需要一个**指向 Free 函数的指针。**
这是一个**[小的工作示例](http://ideone.com/DfPxO)。**

```
#include<iostream>
#include<string>

typedef void (*TransFuncPtr)();

class Myclass
{
     public:
     TransFuncPtr m_funcPtr;
};

void doSomething(){std::cout<<"Callback Called";}

int main()
{
    Myclass obj;
    obj.m_funcPtr = &doSomething;
    obj.m_funcPtr();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:30:34.337

由 C++ 继承的 C 声明语法很棘手。

您的声明

```
void *TransFunc(); 
```

实际上是一样的

```
void* TransFunc(); 
```

它声明了一个返回指针的函数，而不是指向函数的指针。

要`*`绑定到声明的名称而不是类型，您必须使用一组额外的括号

```
void (*TransFunc)(); 
```

# php - 在 joinLeft Zend_Db_Table 中使用 < 运算符会给出“无效参数号”错误

> ID：11070017
> 
> 赞同：0
> 
> 时间：2012-06-17T08:43:01.133
> 
> 标签：php, zend-framework, pdo, left-join

我一直在尝试为 Zend_Db_Table 中的特定用户选择发送/接收的最新消息。我的查询在 MySQL 中运行良好，但是当我尝试使用 joinLeft 执行此操作时，它会出错。

Zend_Db_Table 中的查询代码：

```
$select=$this->select()
->setIntegrityCheck(false)
->from(array('m1'=>'messages'))
->joinLeft(array('m2'=>'messages'), 'm1.from_id=m2.from_id AND m1.date_created < m2.date_created')
->where('m2.date_created IS NULL')
->where('m1.from_id=? OR m1.to_id=?', $to)
->order('m1.date_created DESC'); 
```

问题在于 joinLeft() 中的附加条件。如果我将 '<' 替换为 '='，则不会出错，但这不是目的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:40:11.367

将代码“ ... AND m1.date_created < m2.date_created”放在新行中，如下所示

```
$select=$this->select()
->setIntegrityCheck(false)
->from(array('m1'=>'messages'))
->joinLeft(array('m2'=>'messages'), 'm1.from_id=m2.from_id')
->where('m1.date_created < m2.date_created')
->where('m2.date_created IS NULL')
->where('m1.from_id=? OR m1.to_id=?', $to)
->order('m1.date_created DESC'); 
```

# licensing - 在我的网站中，我应该在哪里包含他人作品的版权声明？

> ID：11070021
> 
> 赞同：21
> 
> 时间：2012-06-17T08:43:09.980
> 
> 标签：licensing, fancybox, galleryview

我的网站包含： 1.FancyBox（用于图像叠加） 2.GalleryView（滑块）并且都使用 JQuery。

他们都可以免费使用，但他们坚持在使用作品的地方显示他们的版权信息。我对必须在哪里显示信息感到困惑。GalleryView 的许可信息。（我想 Fancybox 和这个都在 MIT 许可下）

```
Copyright (c) 2009 John Anderson III

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. 
```

我在哪里可以在我的网站上显示它？我应该为我不直接使用的 JQuery 显示单独的消息吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T17:30:14.327

让我们作为开发人员来看看：

> 我的网站包含： 1.FancyBox（用于图像叠加） 2.GalleryView（滑块）并且都使用 JQuery。

可以这么说，如果用户访问您的网站，您会提供一些软件供您下载。当用户决定下载软件（激活脚本）时，您需要提供以下软件的副本：

1.  [JQuery](http://jquery.com/) - 根据[网站](http://jquery.org/license)，它是[`MIT`](http://spdx.org/licenses/MIT)或[`GPL`](http://spdx.org/licenses/GPL-2.0+).
2.  [FancyBox](http://fancybox.net/) - 同指：[`MIT`](http://spdx.org/licenses/MIT)或[`GPL`](http://spdx.org/licenses/GPL-2.0+)。
3.  [GalleryView](http://spaceforaname.com/galleryview/) - 根据它的[*LICENSE.txt*文件](https://github.com/jackwanders/GalleryView/blob/master/LICENSE.txt)，这是[`MIT`](http://spdx.org/licenses/MIT)

* * *

*注意：* 3.包含不同作者和许可的第三方代码，主要[`BSD-3-Clause`](http://spdx.org/licenses/BSD-3-Clause)是据我所知，但我没有进一步看。我想说，如果您对使用该库有专业兴趣，请联系该库的作者，要求更正许可信息。许可许可证等`BSD-3-Clause`具有需要匹配才能获得使用权的要求。只是说，我会说这很常见，所以不用担心，只是要照顾。

* * *

正如从这个列表中看到的那样——暂时忽略 3\. 中的问题——所有软件都可以在自由软件许可下获得，所以正如你所写的，它们可以免费使用。

但正如你所说的那样，他们*“坚持在使用作品的地方显示他们的版权信息”。*. 让我们从`BSD-3-Clause`许可证文本中选择该部分：

> 源代码的再分发必须保留上述版权声明、此条件列表和以下免责声明。

从`MIT`许可证文本中：

> 上述版权声明和本许可声明应包含在本软件的所有副本或大部分内容中。

我认为这很清楚：当您传递软件时，您应该传递作者信用/版权/使用条款/许可证。

根据您交付软件的方式，您可以将这些术语放在源代码中并直接与 javascript 文件一起交付。

如果您创建软件的二进制版本（例如打包/压缩软件），那么这些注释可能会被删除。您仍然可以在文件顶部再次添加这些内容。

顺便说一句，jQuery 在这里非常慷慨，例如对于由 Google Inc. 提供的文件，您会发现：

> [https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)
> 
> ```
> /*! jQuery v1.7.2 jquery.com | jquery.org/license */
> (function(a,b){function cy(a) ... 
> ```

所以谷歌通过说明该文件是什么软件（jQuery v1.7.2），从哪里获得它（jquery.com）并提供许可信息（jquery.org/license）来给出“信用”。从法律上讲，如果您与您的律师交谈，这可能还不够，但是，在这种情况下，我认为这是 jQuery 项目接受的程序。

但这并不意味着这对约翰·安德森三世、乔治·麦金利·史密斯和罗伯特·彭纳（也许还有布莱尔·米切尔莫尔）来说是可以的。后来顺便说一句。使用被视为笑话的*WTFPL 许可证。*它通常不被接受并[提出不必要的问题](http://comments.gmane.org/gmane.comp.apache.legal.discuss/2035)，所以再次打包 3\. 的作者应该[和 cloudstack 的人一样做](http://bugs.cloudstack.org/browse/CS-15057)。

## 一个网管的结论

我们通常在`<script>`标签中链接的软件`<head>`（并且不经常链接`<body>`）最好分发打包以节省我们不必要的流量。这意味着文件的源格式被更改，并且通常缺少包含版权和许可信息的注释。但通常这些许可证要求我们提供该信息。

使用另一个语义 HTML 功能来提供版权信息看起来很有希望： 您可以将版权链接放在脚本标签旁边的头部：

```
<link href="contact.html#credits" rel="copyright" title="Licensing Information"> 
```

或者对于我们这些 HTML 5 阵营的人来说：

```
<link href="contact.html#credits" rel="license" title="Licensing Information"> 
```

这是一个提供另一个超文本标记语言文档的示例，该文档列出了使用的软件并以人类可读的形式提供了其许可信息（[比较](https://developer.mozilla.org/Project:Copyrights)）。请查阅您选择的 HTML 参考以了解有关该`<link>`标记的更多信息。

希望这会有所帮助。我不想阻止您去找律师进一步澄清这一点，但是，您的律师甚至可能不会在此添加更多内容：Credits 页面，提供许可证信息以及从链接的每个页面到该页面的链接以及软件。还想要什么？我敢打赌，如果你这样做，你就是那里的好公民之一。

IANAL 只是一名软件开发人员，所以感谢您寻求反馈，我本来可以成为其他开发人员之一，如果有人提出要求而不是什么都不做，我自然更喜欢它。作为开发人员，我会说：最重要的是我的软件的用户了解他们对所使用软件的权利。感谢您询问如何使这成为可能！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:47:10.940

你在征求法律意见。使用您的最佳判断，请律师或联系版权所有者以获取他们的意见（可能是最安全的选择）。

# python - 收到“.quit”命令时，聊天中不存在 Python IRC bot

> ID：11070022
> 
> 赞同：-1
> 
> 时间：2012-06-17T08:43:15.813
> 
> 标签：python, irc, bots

所以我几天前问了这个问题，我得到的答复是

这个 irc 机器人一点也不复杂。我只是遇到了几行代码的问题。基本上我将它添加到 while 语句的末尾： if ".quit" in readbuffer: print "Found quit command" sys.exit()

基本上，当有人在 irc 中键入 .quit 时，脚本会将机器人从 irc 中注销。

脚本的其余部分（非常短）可以在这里找到：

[http://www.paestebin.org/view/vrsqdnyjpss3rctko2woabuul8](http://www.paestebin.org/view/vrsqdnyjpss3rctko2woabuul8)

有人可以告诉我为什么最后一点不起作用。当我在 irc 中时，我输入“.quit”，但机器人根本没有响应。几天前我在这里寻求帮助，我得到的唯一回应是告诉我 .quit 语句在 ping 语句中。我解决了这个问题，但机器人仍然没有响应。我完全不知道从这里到哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:01:59.557

看起来`readbuffer`是空的，你想看看`temp[0]`：

```
if ".quit" in temp[0]:
    print "Found quit command"
    sys.exit() 
```

*查看您的机器人，您可能还需要更改其他一些内容，例如在读取的每一行输入*后不让它发出`JOIN`命令。响应还需要包括发件人，所以它应该是这样的：而不是你现在正在做的事情：。*`PONG``PONG <your host> <PING body>``PONG <PING body>`*

# python - 对从数据库中选择的值进行类型测试

> ID：11070023
> 
> 赞同：2
> 
> 时间：2012-06-17T08:43:16.590
> 
> 标签：python, types, character-encoding

我正在从具有 latin_1 字符集的 SQL Server 数据库中提取数据到具有 utf-8 字符集的 Greenplum/postgres 数据库中。我试图在插入之前立即转换字符串值，但是当我这样做时：

```
row=[i.decode('latin_1') for i in row]
row=[i.encode('utf-8') for i in row] 
```

我收到一条错误消息，指出 decode 不是 int 类型的成员。这是有道理的，因为有整数值进来。但也有字符串。在我读过的其他此类帖子中，答案总是立即而响亮的'你应该总是知道什么类型会过来'。在很多方面我都会这样做，因为它是一个静态查询，但是为 i 定义一组值似乎非常笨拙，而且老实说难以维护，我想在其中为我编写的每个查询进行转换。在这里，类型测试似乎是干净、可封装和可重用的答案，不是吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:36:57.590

我会使用这样的小功能：

```
def convert(s):
    try:
        return s.decode('latin-1').encode('utf8')
    except AttributeError:
        return s 
```

进而

```
row = map(convert, row) # or a compr if you prefer that 
```

优点是它还可以处理除`int`自动之外的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T08:50:50.463

`row = [i.decode('latin_1') if not isinstance(i,int) else i for i in row]`

# iphone - GCD：如何更改计时器触发间隔

> ID：11070026
> 
> 赞同：6
> 
> 时间：2012-06-17T08:43:51.650
> 
> 标签：iphone, ios, objective-c, ipad, grand-central-dispatch

无论如何，这听起来可能是一个新手问题，我对 GCD 很陌生

我有以下代码：

```
int interval = 2;
int leeway = 0;

dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
if (timer) {
    dispatch_source_set_timer(timer, dispatch_walltime(DISPATCH_TIME_NOW, NSEC_PER_SEC * interval), interval * NSEC_PER_SEC, leeway);
    dispatch_source_set_event_handler(timer, ^{
        [self someMethod];
    });
    dispatch_resume(timer);
} 
```

其中 someMethod 是：

```
- (void)someMethod
{
    NSLog(@"Thread 1");
} 
```

如何更改`timer`someMethod 中的触发间隔属性？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T10:31:04.540

我自己得到了答案，`dispatch_source_set_timer`用新的间隔值调用就足够了

# c++ - Clang 3.1 C++11 用户定义文字不起作用

> ID：11070027
> 
> 赞同：2
> 
> 时间：2012-06-17T08:44:01.010
> 
> 标签：c++, c++11, llvm-clang, clang++

我在使用 XCode 4.5 DP1 安装附带的 Clang 3.1 的 C++11 用户定义文字时遇到问题

编译器看起来支持它们，我可以定义一个新的文字。我可以直接调用文字函数，但是当我在代码中使用文字时，会出现编译器错误。

在 Xcode 上自动完成甚至在字符串后输入下划线时建议我的新文字：D

这是代码：

```
#include <cstring>
#include <string>
#include <iostream>

std::string operator "" _tostr (const char* p, size_t n);

std::string operator"" _tostr (const char* p, size_t n)
{ return std::string(p); }

int main(void)
{
    using namespace std;

    // Reports DOES has string literals

#if __has_feature(cxx_variadic_templates)   
    cout << "Have string literals" << endl;
#else
    cout << "Doesn't have string literals" << endl;
#endif

    // Compiles and works fine
    string x = _tostr("string one",std::strlen("string one"));
    cout << x << endl;

    // Does not compiler
    string y = "Hello"_tostr;
    cout << y << endl;

    return 0;
} 
```

我收到以下错误：

```
[GaziMac] ~/development/scram clang++ --stdlib=libstdc++ --std=c++11 test.cpp 
test.cpp:22:23: error: expected ';' at end of declaration
    string y = "Hello"_tostr;
                      ^
                      ;
1 error generated. 
```

这是 clang 的版本信息

```
[GaziMac] ~/development/scram clang++ -v
Apple clang version 4.0 (tags/Apple/clang-421.10.42) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.0.0
Thread model: posix 
```

感激地收到任何帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T11:28:49.460

我没有 Clang，但 Google 找到了一个页面[列表](http://clang.llvm.org/docs/LanguageExtensions.html#cxx_user_literals) `__has_feature`选择器。

> 使用 __has_feature(cxx_user_literals) 确定是否启用了对用户定义文字的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:05:13.707

> 我在使用 XCode 4.5 DP1 安装附带的 Clang 3.1 的 C++11 用户定义文字时遇到问题

那就是问题所在。XCode 4.5 DP1 不附带 Clang 3.1。`Apple clang version 4.0 (tags/Apple/clang-421.10.42) (based on LLVM 3.1svn)`是 3.0 和 3.1 之间的 Clang 主干的一个切口，在我用一个工作的部分替换损坏的部分实现之前。

正如 Potatoswatter 所观察到的，在 Clang 中测试此功能的正确方法是`__has_feature(cxx_user_literals)`.

以下是 Clang trunk 对您的代码的评价：

```
<stdin>:23:16: error: use of undeclared identifier '_tostr'; did you mean 'strstr'?
    string x = _tostr("string one",std::strlen("string one"));
               ^~~~~~
               strstr
/usr/include/string.h:340:14: note: 'strstr' declared here
extern char *strstr (__const char *__haystack, __const char *__needle)
             ^ 
```

...这表明了不适当的错字更正，但至少它是一个正确的诊断，并且您对用户定义文字的使用被接受。

# c# - 通过 WPF 从串口接收数据

> ID：11070028
> 
> 赞同：0
> 
> 时间：2012-06-17T08:44:03.270
> 
> 标签：c#, wpf, serial-port

我的问题是：如何使用 wpf 应用程序从串口接收数据？我已经尝试了很多次，但仍然无法得到它；这是我的 Arduino 代码：

```
 int switchPin = 7;
int ledPin = 13;
boolean lastButton = LOW;
boolean currentButton = LOW;
boolean flashLight = LOW;

void setup()
{
  pinMode(switchPin, INPUT);
  pinMode(ledPin, OUTPUT);

  Serial.begin(9600);
}

boolean debounce(boolean last)
{
  boolean current = digitalRead(switchPin);
  if (last != current)
  {
    delay(5);
    current = digitalRead(switchPin);
  }
  return current;
}

void loop()
{
  currentButton = debounce(lastButton);
  if (lastButton == LOW && currentButton == HIGH)
  {
    Serial.println("UP");

    digitalWrite(ledPin, HIGH);
  }
  if (lastButton == HIGH && currentButton == LOW)
  {
    Serial.println("DOWN");

    digitalWrite(ledPin, LOW);
  }

  lastButton = currentButton;
} 
```

每次按下按钮时，它都会发送消息“DOWN”和“UP”。但是如何从 C# 应用程序接收它呢？请写一个这样的 wpf 应用程序的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:08:45.223

使用 Backgroundworker 启动一个新线程。

```
public Form1()
{
    InitializeComponent();
    backgroundWorker1.WorkerReportsProgress = true;
    backgroundWorker1.WorkerSupportsCancellation = true;
}

private void startAsyncButton_Click(object sender, EventArgs e)
{
    if (backgroundWorker1.IsBusy != true)
    {
        // Prepare the SerialPort here

        backgroundWorker1.RunWorkerAsync();
    }
}

private void cancelAsyncButton_Click(object sender, EventArgs e)
{
    if (backgroundWorker1.WorkerSupportsCancellation == true)
    {
        // Cancel the asynchronous operation.
        backgroundWorker1.CancelAsync();
    }
}

// This event handler is where the time-consuming work is done.
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;

    while(!worker.CancellationPending)
    {
        string message = _serialPort.ReadLine();
        worker.ReportProgress(someValue, message);
    }
}

// This event handler updates the progress.
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    resultLabel.Text = (e.ProgressPercentage.ToString() + "% " + e.UserState);
}

// This event handler deals with the results of the background operation.
private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Cancelled == true)
    {
        resultLabel.Text = "Canceled!";
    }
    else if (e.Error != null)
    {
        resultLabel.Text = "Error: " + e.Error.Message;
    }
    else
    {
        resultLabel.Text = "Done!";
    }
} 
```

# drupal - Drupal - 如何在“/node/*”页面中将图像显示为幻灯片

> ID：11070030
> 
> 赞同：1
> 
> 时间：2012-06-17T08:44:32.647
> 
> 标签：drupal, drupal-7, drupal-views, slideshow, drupal-theming

我有一个内容类型，其中包含“标题”、“描述”、“位置”和“图像”等字段。

在 URL 中显示完整的节点内容时，例如“www.mysite.com/node/14”，其中“14”只是一个示例节点 ID....如何将图像显示为幻灯片？

如果我尝试使用 Views 模块并使用“幻灯片”功能，我只会得到带有图像的幻灯片。我真正想要的是——让页面显示内容中的所有字段，即“标题”、“描述”、“位置”和最后的“图像”幻灯片。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:12:23.030

Drupal 7 允许您向字段添加字段格式化程序。您可以轻松地使用它来添加幻灯片字段格式化程序，以便在页面呈现您的图像时它们处于幻灯片中。

对此有帮助的两个模块是：

*   [Flexslider](http://drupal.org/project/flexslider)模块，上面写着“与字段集成 (flexslider_fields)”
*   专门为此而设计的[现场幻灯片，但在响应式设计中表现不佳（根据我的经验）](http://drupal.org/project/field_slideshow)

您还*可以*通过在上下文过滤器中获取当前节点 ID 来使用视图，然后使用关系来获取图像，**然后**使用视图幻灯片将生成的图像呈现在放置在每个节点类型上的块中......但是作为你可以说这是一种迂回的方式来实现字段格式化程序可能在 90% 的时间内为你做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:00:30.323

这个如何？

[http://drupal.org/project/views_nivo_slider](http://drupal.org/project/views_nivo_slider)

# php - 在本地服务器上设置 cookie

> ID：11070032
> 
> 赞同：2
> 
> 时间：2012-06-17T08:44:44.223
> 
> 标签：php, dns, local, setcookie

我正在本地服务器上开发一个站点，所以站点的 url 是 http:/goodies/，没有像“.com”这样的域结尾

我怎样才能使这段代码工作？

```
setcookie('user', $user_check, time() + (86400 * 3), '/', 'goodies'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:49:06.530

只是不要通过`$domain`争论。不需要[http://php.net/manual/function.setcookie.php](http://php.net/manual/function.setcookie.php)

# javascript - 什么是 JavaScript 中的哈希？如何将哈希用于数组？

> ID：11070033
> 
> 赞同：4
> 
> 时间：2012-06-17T08:45:30.910
> 
> 标签：javascript, hash

我在我的对象原型中使用了一个数组，它基本上附加了添加、删除、搜索功能。

像这样的东西

```
myobj = function() {
  this.Array_ = [];
}

myobj.prototype.add = function(item) {
  goog.array.insert(this.Array_, item);
}

myobj.prototype.hasItem = function(item) {
  goog.array.contains(this.Array_, item);
} 
```

在我的例子中，一个示例数组将列出整数。[1、2、3、4]

但后来我了解到这是非常昂贵的，如果我使用哈希可以节省成本。有人可以用上面的例子解释哈希的使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T09:17:01.193

“哈希”这个词有很多含义，但在这种情况下，它可能指的是通用 javascript 对象，它们在内部是“哈希表”。对象具有内置的“添加”和“包含”功能：

```
foo = {}

foo['x'] = 1   // "add"
'x' in foo     // "contains" 
```

但是请注意，键总是转换为字符串，因此如果您想要其他类型的键（例如通用对象），则必须使用自定义函数，例如：

```
contains = function(ary, obj) {
    return ary.indexOf(obj) >= 0;
}

add = function(ary, obj) {
    if (!contains(ary, obj))
        ary.push(obj)
} 
```

# objective-c - 在 Objective-C 中使用 NSTimer 时，为什么我的代码在变为 0 时没有停止？

> ID：11070034
> 
> 赞同：1
> 
> 时间：2012-06-17T08:45:44.377
> 
> 标签：objective-c

我在xcode中使用了一个计时器，我设法让它正确倒计时但是当倒计时它变成负数，

我已经尝试使用 if 语句来解决这个问题，但它似乎在这里工作是我正在使用的代码，

```
 IBOutlet UILabel *timelabel;
    int MainInt;
    NSInteger fred;
    NSTimer *timer;

    MainInt -= 1;
    timelabel.text = [NSString stringWithFormat:@"%i",MainInt ];

    MainInt = 20;
    timer  = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countdown) userInfo:nil repeats:YES];

    if (timelabel.text <= @"0")
    {
        [timer invalidate];
        timelabel.text = @"20";
    } 
```

H is ov my H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:48:35.310

与其尝试将标签的文本值与零进行比较，不如使用 compare `MainInt`。您的问题是您正在尝试比较两个字符串...从技术上讲，您可以获取一个字符的 ASCII 值并将其与另一个字符进行比较，因此基本上您尝试执行`@"Dog" >= @"Cat"`运行时将尝试执行的操作，但显然不是不是你想要的。

还有一个`NSString`调用方法`intValue`，您可以使用它来提取字符串的整数表示。你可以做

> if ([timelabel.text intValue] <= 0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T08:51:29.570

虽然我相信它会编译

```
if (timelabel.text <= @"0") 
```

这条线没有多大意义。它可能应该是：

```
if(MainInt <= 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T08:57:36.553

如果你真的想检查 timelabel.text 使用 intValue

```
 if ([timelabel.text intValue] <= 0) 
 {
    timer invalidate];
    timelabel.text = @"20";
 } 
```

注意：更改为 intValue，但请注意您应该将其`int`与

# javascript - 如何使用 requireJs 以正确的顺序定义控制器、路由器和应用程序

> ID：11070038
> 
> 赞同：2
> 
> 时间：2012-06-17T08:46:54.223
> 
> 标签：javascript, backbone.js, requirejs, marionette

我正在编写一个小应用程序（`initApp.js`, `initApp.routinj.js`, `initApp.controller.js`），需要使用 requires 加载模块。
这是我的代码（*）。
在每个模块中使用`console.log`我看到模块的加载顺序如下：

```
1) initController 
2) initRouting 
3) initApp 
```

这是正确的顺序吗？

现在另一个问题。
在`initApp.controller.js`我需要访问`initHeader`和`initSidebar`（在中定义`initApp.js`）之类的函数。
但正如您从我的代码 ( `initApp.controller.js`) 中看到的，`console.log('initController', app);`返回`undefined`.
为了解决这个问题，我`getApp`在`initApp.controller.js`.
但可以肯定的是，有更好的方法来完成这项任务。
任何的想法？
谢谢

(*)

* * *

** main.js **

```
define([
    'js/app',
    'js/init/initApp',
//    'js/tasks/tasksApp'
],
function (App)
{
    "use strict";
    App.initialize();
}); 
```

* * *

** initApp.js **

```
/*global define*/
define([
    'backbone',
    'js/app',
    'js/init/initApp.routing',
    'js/init/views/sidebarView',
    'js/init/views/headerView',
],
function (Backbone, App, Router, SidebarView, HeaderView)
{
    "use strict";
    console.log('initApp', Router)
    var initApp = new Backbone.Marionette.Application({

        initHeader: function ()
        {
            var headerView = new HeaderView();
            App.header.show(headerView);
        },

        initSidebar: function ()
        {
            var sidebarView = new SidebarView();
            App.sidebar.show(sidebarView);
        }

    });

    return initApp;
}); 
```

* * *

** initApp.routine,js **

```
/*global define*/
define([
    'backbone',
    'marionette',
    'js/init/initApp.controller'
],
function(Backbone, Marionette, controller)
{
    "use strict";
    console.log('initRouting', controller)
    var Router = Backbone.Marionette.AppRouter.extend({

        appRoutes: {
            '*defaults': 'index'
        }

    });
    return new Router({
        controller: controller
    });

}); 
```

* * *

** initApp.controller.js **

```
/*global define*/
define([
    'js/init/initApp'
],
function(app)
{
    "use strict";
    console.log('initController', app); // undefined
    var getApp = function () {
        var initApp;
        require(['js/init/initApp'], function (app) {
            initApp = app;
        });
        return initApp;
    };

    var controller = {
        index: function ()
        {
            var app = getApp();
            app.initHeader();
            app.initSidebar();
        }
    }

    return controller;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:35:22.187

不确定这是否是实现事物的正确方法，但在您的情况下，如果您按此顺序加载模块，它将起作用。

```
1) initApp
2) initController
3) initRouting 
```

所以这意味着你`main.js`应该是：

```
define([
    'js/app',
    'js/init/initApp.routing'
],
function (App)
{
    "use strict";
    App.initialize();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T02:40:21.357

您的文件中有一个循环依赖项：`initApp -> initApp.routing -> initApp.controller -> initApp`. 这就是你得到`undefined`.

在声明时，当您定义您的类/对象时，顺序仅在您的代码中存在依赖关系时才重要。在我的例子中，我在 initApp.js 中初始化了路由器和控制器，所以我有：

**initApp.js**

```
define(['backbone', 'js/init/initController', 'js/init/initApp.initRouting', ...],
function(Backbone, controller, Router, ...) {
  return {
    initialize: function() {
      // Store a namespaced global reference to my app.
      window.MyApp = new Backbone.Marionette.Application();
      MyApp.addRegions({...});
      MyApp.addInitializers(function(options) {
        MyApp.router =  new Router({controller: controller});
        // Other init stuff...
      });
      MyApp.start();
    }
  };
}); 
```

由于我在 window.MyApp 中存储了对我的应用程序的引用，因此现在可以在我的 JS 文件中访问它，而无需任何额外的逻辑。例如，我可以直接从控制器或任何视图访问区域：

```
MyApp.myRegion.show(someView); 
```

所以我的 main.js 非常小：

```
require(['app', 'backbone', 'json2'], function(app){
  window.console = window.console || {log: function() {}}; // Needed for IE.
  app.initialize();
}); 
```

我的路由器或控制器 JS 文件都不相互依赖，也不依赖于 App 文件。

**initApp.Routing.js**

```
define([
  'jquery',
  'underscore',
  'backbone'
  ], function($, _, Backbone) {
  var Router = Backbone.Marionette.AppRouter.extend({
    appRoutes: {
      // My routes go here...
    }
  });
  return Router;
}); 
```

也就是我在App中初始化了我的路由，减少了JS文件之间的依赖。

同样，我的控制器仅向下依赖各种视图和集合：

**initApp.Routing.js**

```
define([
  'jquery',
  'underscore',
  'backbone',
  'myview',
  'mycollection'
  ], function($, _, Backbone, View, Collection) {
  var controller = {
    showMyView: function() {
      // ...
    }
  });
  return controller;
}); 
```

我花了一段时间才明白声明和执行之间的区别。只要您只在 JS 文件中声明内容（即包装在对象中，或调用扩展），我就有一个通过您的 main.js' 执行的单一入口点`app.initialize()`，您将是安全的，您可以`MyApp`在任何地方访问对象.

**更新**

有关在其他 JS 文件中访问您的应用程序实例的替代方法，请参阅更新后的 Backbone.Marionette wiki 上[的从其他模块访问您的应用程序实例](https://github.com/derickbailey/backbone.marionette/wiki/Using-marionette-with-requirejs)。

# ios - 当我点击导航栏时，来自栏按钮的 ios 操作表不会关闭

> ID：11070042
> 
> 赞同：1
> 
> 时间：2012-06-17T08:47:58.090
> 
> 标签：ios, uinavigationbar, rightbarbuttonitem

我有一个从 UIBarButtonItem 创建的操作表。

当显示位于导航控制器中的选项卡栏控制器中的视图控制器时，以编程方式添加的栏按钮项

```
- navigation controller
     -tab bar controller
          - view controller (bar button item created in viewdidload and shown in viewwillappear) 
```

动作表加载并正确显示，问题在于它是如何被解雇的。如果我点击视图中的任何位置，但当我点击导航栏时，它会正确关闭，这意味着我可以多次点击 UIBarButtonItem 并创建和覆盖操作表。

我知道我可以做一些逻辑来查看是否正在显示操作表而不重新创建它，我还可以添加一些逻辑到 viewwilldisappear 以手动删除操作表但想知道为什么它不能开箱即用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T05:46:06.703

我遇到了同样的问题，`UIActionSheet`当`UIBarButtonItem`在`UINavigationController`.

我实现了@updog 描述的解决方案

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    if ([actionSheet isVisible]) {
        [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
    }
} 
```

执行时不会调用委托`dismissWithClickedButtonIndex`，因此索引无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:40:13.617

我最终向 viewWillDisappear 函数添加了一些逻辑，以隐藏正在显示的操作表。

我还必须在条形按钮单击操作中添加一些其他代码，这样如果在显示操作表后点击，则不会覆盖另一个操作表。

# javascript - ajax库initializebase中的方括号

> ID：11070047
> 
> 赞同：0
> 
> 时间：2012-06-17T08:48:20.163
> 
> 标签：javascript, ajax

在使用 ajax 库创建 Ajax 客户端控件时，我总是注意到在示例中元素是在方括号中传递给基类的。请问使用方括号的目的是什么？它似乎是 Javascript 中的通用内容，与 Microsoft Ajax 库没有直接关系。但是，我无法理解它的目的是什么。

```
MyComponent = function(element) {
    MyComponent.initializeBase(this, [element]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:51:10.680

这是[创建数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array)的语法。下面的代码将打印`a`和`c`：

```
function fun(normal, array) {
  console.info(array[0]);
  console.info(array[2]);
}

fun(42, ['a', 'b', 'c']); 
```

# c# - 如何判断是否被鼠标或键选中？

> ID：11070055
> 
> 赞同：8
> 
> 时间：2012-06-17T08:48:50.583
> 
> 标签：c#, wpf, mvvm, .net-4.0, treeviewitem

我在窗口左侧有一个带有 WPF TreeView 的 MVVM 应用程序。右侧的详细信息面板会根据所选的树节点更改内容。

如果用户选择一个节点，详细信息面板的内容会立即更改。如果用户单击节点，这是需要的，但是如果用户使用向下/向上键导航树，我想延迟更改内容。（与 Windows 资源管理器的行为相同，至少在 Win XP 下）我假设我必须在我的 ViewModel 中知道节点是否已通过鼠标或键盘选择。

我怎样才能做到这一点？

**更新：**

这是我的第一篇文章，因此我不确定这是否是正确的地方，但我想让社区知道我在此期间做了什么。这是我自己的解决方案。我不是专家，因此我不知道这是否是一个好的解决方案。但它对我有用，如果它帮助别人，我会很高兴。高度赞赏错误修复、改进或更好的解决方案。

我在附加属性*HasMouseFocus*下方创建...
（首先我使用了 MouseEnterEvent，但如果用户使用向上/向下键导航树并且鼠标指针随机位于任何导航的树项目上，这将无法正常工作，因为在这种情况下详细信息立即更新。）

```
public static bool GetHasMouseFocus(TreeViewItem treeViewItem)
{
  return (bool)treeViewItem.GetValue(HasMouseFocusProperty);
}

public static void SetHasMouseFocus(TreeViewItem treeViewItem, bool value)
{
  treeViewItem.SetValue(HasMouseFocusProperty, value);
}

public static readonly DependencyProperty HasMouseFocusProperty =
  DependencyProperty.RegisterAttached(
    "HasMouseFocus",
    typeof(bool),
    typeof(TreeViewItemProperties),
    new UIPropertyMetadata(false, OnHasMouseFocusChanged)
  );

static void OnHasMouseFocusChanged(
  DependencyObject depObj, DependencyPropertyChangedEventArgs e)
{
  TreeViewItem item = depObj as TreeViewItem;
  if (item == null)
    return;

  if (e.NewValue is bool == false)
    return;

  if ((bool)e.NewValue)
  {
    item.MouseDown += OnMouseDown;
    item.MouseLeave += OnMouseLeave;
  }
  else
  {
    item.MouseDown -= OnMouseDown;
    item.MouseLeave -= OnMouseLeave;
  }
}

/// <summary>
/// Set HasMouseFocusProperty on model of associated element.
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
static void OnMouseDown(object sender, MouseEventArgs e)
{
  if (sender != e.OriginalSource)
    return;

  TreeViewItem item = sender as TreeViewItem;
  if ((item != null) & (item.HasHeader))
  {
    // get the underlying model of current tree item
    TreeItemViewModel header = item.Header as TreeItemViewModel;
    if (header != null)
    {
      header.HasMouseFocus = true;
    }
  }
}

/// <summary>
/// Clear HasMouseFocusProperty on model of associated element.
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
static void OnMouseLeave(object sender, MouseEventArgs e)
{
  if (sender != e.OriginalSource)
    return;

  TreeViewItem item = sender as TreeViewItem;
  if ((item != null) & (item.HasHeader))
  {
    // get the underlying model of current tree item
    TreeItemViewModel header = item.Header as TreeItemViewModel;
    if (header != null)
    {
      header.HasMouseFocus = false;
    }
  }
} 
```

...并将其应用于*TreeView.ItemContainerStyle*

```
 <TreeView.ItemContainerStyle>
      <Style TargetType="{x:Type TreeViewItem}" >
        <!-- These Setters binds some properties of a TreeViewItem to the TreeViewItemViewModel. -->
        <Setter Property="IsExpanded" Value="{Binding Path=IsExpanded, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        <Setter Property="ToolTip" Value="{Binding Path=CognosBaseClass.ToolTip}"/>
        <!-- These Setters applies attached behaviors to all TreeViewItems. -->
        <Setter Property="properties:TreeViewItemProperties.PreviewMouseRightButtonDown" Value="True" />
        <Setter Property="properties:TreeViewItemProperties.BringIntoViewWhenSelected" Value="True" />
        <Setter Property="properties:TreeViewItemProperties.HasMouseFocus" Value="True" />
      </Style>
    </TreeView.ItemContainerStyle> 
```

其中*properties*是我的附加属性的路径。

```
 xmlns:properties="clr-namespace:WPF.MVVM.AttachedProperties;assembly=WPF.MVVM" 
```

然后在我的 ViewModel 中，如果*HasMousefocusProperty*为 true，我会立即更新详细信息面板 (GridView)。如果为 false，我只需启动 DispatcherTimer 并将当前选定的项目应用为标记。在 500 毫秒的间隔后，滴答事件应用详细信息，但前提是所选项目仍与标记相同。

```
/// <summary>
/// This property is beeing set when the selected item of the tree has changed.
/// </summary>
public TreeItemViewModel SelectedTreeItem
{
  get { return Property(() => SelectedTreeItem); }
  set
  {
    Property(() => SelectedTreeItem, value);
    if (this.SelectedTreeItem.HasMouseFocus)
    {
      // show details for selected node immediately
      ShowGridItems(value);
    }
    else
    {
      // delay showing details
      this._selctedNodeChangedTimer.Stop();
      this._selctedNodeChangedTimer.Tag = value;
      this._selctedNodeChangedTimer.Start();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:01:41.773

您可以`OnPreviewKeyDown`为您的`TreeView`（或拥有它的用户控件）处理，并以编程方式在您的 ViewModel 中设置一个标志，并在刷新详细信息面板时考虑它 -

```
protected override void OnPreviewKeyDown(System.Windows.Input.KeyEventArgs e)
{
    switch(e.Key)
    {
        case Key.Up:
        case Key.Down:
           MyViewModel.IsUserNavigating = true;
           break;
    }
} 
```

这个SO问题中提到了类似的方法和其他解决方案 -

[如何以编程方式导航（不是选择，而是导航）WPF TreeView？](https://stackoverflow.com/questions/10526829/how-can-i-programmatically-navigate-not-select-but-navigate-a-wpf-treeview)

**更新：** [回应 AalanY 的评论]

我认为在 Views 中有一些代码隐藏没有任何问题，这不会破坏 MVVM。

在文章中，[具有模型-视图-视图模型设计模式的 WPF 应用程序](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，作者 Josh Smith 说：

> 在设计良好的 MVVM 架构中，大多数视图的代码隐藏应该是空的，或者最多只包含操作该视图中包含的控件和资源的代码。有时还需要在 View 的代码隐藏中编写与 ViewModel 对象交互的代码，**例如挂钩事件或调用** 原本很难从 ViewModel 本身调用的方法。

*根据我的经验，如果没有任何代码隐藏，就不可能构建一个企业（相当大的）应用程序，特别是当您必须使用复杂的控件，如 TreeView、DataGrid 或 3'rd 方控件时。*

# mfc - vc mfc windows输入焦点

> ID：11070056
> 
> 赞同：0
> 
> 时间：2012-06-17T08:48:55.370
> 
> 标签：mfc, focus, visual-c++

我有一个对话框，它有4个CEdit控件和9个CButton（数字0~9），我想按下数字按钮，然后CEdit控件中的输入焦点不要移动，在CEdit控件中输入数字，有什么建议吗？ </p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:34:45.097

您可以对编辑控件的 KillFocus 事件做出反应并存储哪个编辑处于活动状态。在按钮的单击事件中，您将焦点设置回控件并将按下的数字附加到编辑文本中。

# c# - Bool 属性设置为 true 而不被调用

> ID：11070060
> 
> 赞同：2
> 
> 时间：2012-06-17T08:49:53.863
> 
> 标签：c#, asp.net, visual-studio-2010, boolean

我正在制作一个用于阅读文章的网络应用程序。

如果单击特定按钮，我将 bool 属性设置为 true `Edit`，还有一个`Save`Button 在填充用户信息`TextBoxes`和其他控件后单击。每当我运行我的应用程序并填写信息时，它运行良好，但在运行 4 或 5 次（重新启动应用程序）后，单击`Save`Button 时会出现异常错误： `Input string was not in a correct format`这是由于填充`TextBoxes`Null（首先，Null 转换为 Int） .

我的问题是 bool 属性 ( `Managment.IsEditing`) 无任何理由设置为 true （`Edit`应按下按钮将 bool 设置为 true）。为什么以及如何自动设置为 true，因为它的代码只在`EditButton_Click`Event 中被调用？

**这是一个代码**

```
protected void EditButton_Click(object sender, EventArgs e)
{
    if(EditorList.SelectedIndex > -1) //Just to ensure that Item is selected from ListBox
    {   
        //editor is the poco  , EditorManager is the editor table manager
        editor = EditorManager.GetEditorInfo(EditorList.SelectedValue);

        NameTextBox.Text = editor.Name;
        EmailTextBox1.Text = editor.Email;
        PasswordTextBox.Text = editor.Password;
        EditorIDTextBox.Text = editor.Editor_ID.ToString();

        for (int index = 0; index < RoleCheckBoxList.Items.Count; index++)
        {
          RoleCheckBoxList.Items[index].Selected = editor.RoleList[index];
        }

        Managment.IsEditing = true; //This flag is responsible for telling "SaveButtton" that editor would be updated. 
        DeleteButton.Enabled = true;
        ResultLabel.Text = "";
    }

    else
        ResultLabel.Text = "Select Editor from list first";

protected void SaveButton_Click(object sender, EventArgs e)
{
    if(Managment.IsEditing == false) //it makes sure that new editor is being saved
    {
        editor.Name = NameTextBox.Text;
        string email = EmailTextBox1.Text;
        editor.Email = email.ToLower();
        editor.Password = PasswordTextBox.Text;

        if(EditorManager.IsEditorValid(editor.Email))
        {
            for (int index = 0; index < RoleCheckBoxList.Items.Count; index++)
            {
              editor.RoleList[index] = RoleCheckBoxList.Items[index].Selected;
            }

            EditorManager.Save(editor);
            ResultLabel.Text = editor.DataUploadMessage;            
        }

        else
            ResultLabel.Text = "Editor with the same Email can't be add!";

        FillEditorList();
    }

    else if(Managment.IsEditing == true) //it determines that existing editor is being updated and problem is that Managment.IsEditing is turned on without being called.
    {
        editor.Name = NameTextBox.Text;
        string email = EmailTextBox1.Text;
        editor.Email = email.ToLower();
        editor.Password = PasswordTextBox.Text;
        editor.Editor_ID = Convert.ToInt32(EditorIDTextBox.Text);// Error occurs at this line

        for (int index = 0; index < RoleCheckBoxList.Items.Count; index++)
        {
          editor.RoleList[index] = RoleCheckBoxList.Items[index].Selected;
        }

        EditorManager.Edit(editor);

        ResultLabel.Text = editor.DataUploadMessage;
        Managment.IsEditing = false;
        FillEditorList();            
    }
    ClearFields(Form.Controls);
} 
```

**该行发生异常：**

```
editor.Editor_ID = Convert.ToInt32(EditorIDTextBox.Text); 
```

亲爱的朋友们，抱歉给您带来不便

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:00:41.273

当指定行发生异常时，将不会运行重置标志的行。该页面可能会处于无效状态。

尝试修复/处理错误并正确清理，问题可能会消失。

# objective-c - NSTask 在函数中使用时崩溃

> ID：11070064
> 
> 赞同：0
> 
> 时间：2012-06-17T08:51:06.513
> 
> 标签：objective-c, xcode, cocoa, nstask

在我的程序中，我目前使用了 NSTask 5 次，一切都运行良好，但我厌倦了在代码如此相似时不得不重复如此多的代码，所以我尝试将它放在一个函数中。不幸的是，它导致在线崩溃：`[task launch]`. 除此之外，我无法弄清楚导致崩溃的原因，就好像我在函数之外使用此代码一样，它可以完美运行。

我使用的方法如下：

```
- (NSString *)performTask: (NSString *)launchPath: (NSString *)argument1: (NSString *)argument2: (NSString *)argument3: (NSString *)argument4: (NSString *)argument5
{
    NSString *resPath = [[NSBundle mainBundle] resourcePath];
    NSTask *task = [[NSTask alloc] init];
    [task setLaunchPath: [NSString stringWithFormat: launchPath, resPath]];
    NSArray *arguments = [NSArray arrayWithObjects: argument1, argument2, argument3, argument4, argument5, nil];
    [task setArguments: arguments];
    NSPipe *pipe = [NSPipe pipe];
    [task setStandardInput:[NSPipe pipe]];
    [task setStandardOutput: pipe];
    NSFileHandle *file = [pipe fileHandleForReading];
    [task launch];
    NSData *data = [file readDataToEndOfFile];
    NSString *status = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding];
    return status;
} 
```

我真的希望可以解决这个问题，我真的不明白为什么会崩溃。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:03:52.257

看看这个，我用它很酷：

[https://gist.github.com/1875386](https://gist.github.com/1875386)

它也比使用 arrayWithObjects 容易得多：对于 NSTask...

rc

# android - ObjectAnimator 不淡入

> ID：11070067
> 
> 赞同：28
> 
> 时间：2012-06-17T08:51:13.417
> 
> 标签：android, android-animation

我正在尝试使用该`Animator`集合顺序播放一组动画。除了 alpha 动画（`set1`）之外，一切都在工作。它从 0.25f 变为 1，但在整个动画中并没有褪色，并且在动画结束时，`set1`它从 0.25 变为 1 并且没有考虑`setDuration`（因此我没有得到淡入效果）。所以我没有淡入效果......当我自己做这个动画时，淡入效果就在那里......有什么想法吗？

我正在使用美妙的[Nineoldandroids](http://nineoldandroids.com/)库来实现这一点。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ImageView image = (ImageView) findViewById(R.id.image);
    final AnimatorSet set = new AnimatorSet();
    set.play(ObjectAnimator.ofFloat(image, "translationX", 0, 100).setDuration(3000));

    final AnimatorSet set1 = new AnimatorSet();
    //THIS IS THE PROBLEMATIC ANIMATION!!
    set1.play(ObjectAnimator.ofFloat(image, "alpha", 0.25f, 1).setDuration(3000));

    final AnimatorSet set2 = new AnimatorSet();
    set2.play(ObjectAnimator.ofFloat(image, "translationX", 100, 200).setDuration(3000));

    final AnimatorSet set3 = new AnimatorSet();
    set3.playSequentially(set,set1,set2);
    set3.start();
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-02-16T12:58:39.090

在 4.0+ 上工作时

```
ObjectAnimator alphaAnimation = ObjectAnimator.ofFloat(image, View.ALPHA, 0,1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T05:46:32.697

尝试这个。

```
ObjectAnimator.ofFloat(image, "alpha", 0.25f, 1, 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T13:04:40.467

您应该在布局完成后启动对象动画器。

```
final View image = findViewById(R.id.image);
final ViewTreeObserver observer = image.getViewTreeObserver();
observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        observer.removeOnGlobalLayoutListener(this);
        // start animators
    }
}); 
```

# html - CSS：百分比宽度和边框

> ID：11070071
> 
> 赞同：42
> 
> 时间：2012-06-17T08:52:17.710
> 
> 标签：html, css, layout

我已经以百分比定义了容器的宽度。我想添加一个边框（宽度右侧 3px），因为容器宽度以 % 为单位，而边框宽度以 px 为单位，我该如何调整容器的宽度？

```
<div class="wrap">
  <div class="left">...</div>
  <div class="right">...</div>
</div>

.wrap{
    width:100%;
}

.left{
    width:30%;
}

.right{
    width:70%;
} 
```

我想在 .left 的右侧添加 3px 边框。例如：

```
.left{
    width:30%;
    border:3px solid #000;
} 
```

由于我在 % 中定义了宽度，因此重新调整 .left 宽度的最佳方法是什么。我可以大致将宽度减小到 29%，但我想精确地做。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-06-17T09:05:46.603

使用该`box-sizing: border-box`物业。它修改了盒子模型的行为，将填充和边框视为元素总宽度的一部分（但不是边距）。这意味着元素的设置宽度或高度*包括*为填充和边框设置的尺寸。在您的情况下，这意味着元素的宽度和边框的宽度将消耗 30% 的可用空间。

![CSS 盒子模型](../Images/4c04ddb7fa125843e959373c20850415.png)

对它的支持并不完美，但是供应商前缀将捕获大多数（如果不是所有）现代浏览器：

```
.left {
    width: 30%;
    border: 3px solid #000;

    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -ms-box-sizing: border-box;
    box-sizing: border-box;
} 
```

更多信息可以在[MDN](https://developer.mozilla.org/En/CSS/Box-sizing)和[Quirksmode](http://www.quirksmode.org/css/box.html)上找到。

[根据 Quirksmode](http://www.quirksmode.org/css/contents.html#t49)的说法，使用上面的 3 个供应商前缀（`-moz-`和`-webkit-`）`-ms-`，您可以获得对所有浏览器的支持，甚至是 IE8。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T10:15:48.453

最简单的跨浏览器方法是不在外部 div 上设置边框，而是在内部的新 div 上设置它`.left`。简单，而且效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T08:59:11.803

这有点棘手，但请查看这篇文章以绕过它：

*   [百分比加像素大小](http://www.cssplay.co.uk/boxes/outside.html)（和[示例](http://www.cssplay.co.uk/boxes/plus.html)）
*   CSS-Tricks （和[示例](http://css-tricks.com/examples/BoxSizing/)）[上的 Box Sizing](http://css-tricks.com/box-sizing/)

您可能也对该[`box-sizing`](https://developer.mozilla.org/En/CSS/Box-sizing)物业感兴趣，请查看：

*   [如何将 1px 边框添加到宽度为百分比的 div？](https://stackoverflow.com/questions/8278523/how-do-i-add-1px-border-to-a-div-whose-width-is-a-percentage/9288403)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T00:06:52.523

在我的情况下，我最终添加了一个外部 div，其填充的大小与我希望原始边距的大小相同，宽度为 100%。这允许我将内部 div 宽度设置为 100%，完全适合填充内（这将作为我之前设置的边距）

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-04-20T10:32:33.643

改成`px`喜欢`vw`就好

```
border-width: 10px; 
```

到

```
border-width: 10vw; 
```

它做什么百分比做什么......

# awk - 使用 gnuplot 缩放值以绘制图形

> ID：11070074
> 
> 赞同：0
> 
> 时间：2012-06-17T08:52:57.087
> 
> 标签：awk, gnuplot

我有一个以下格式的文本文件。第一列表示具有非常高分辨率的时间戳。第二个数字表示序列号。我想在这两个值之间绘制一个图表。即序列号随着时间的推移。为此目的我想缩放序列号和时间戳。时间戳可以通过从剩余时间戳中减去第一个时间戳来缩放。序列号也应该以相同的方式缩放。但是，当缩放时，序列号可以有负值。如何我是否使用 awk 编写一个 bash 脚本来实现这一点。这个文件名是 print_1010171.txt。请不要说我确实有许多相同格式的文件。所以我希望脚本变得通用。

```
5698771509078629376     1133254688
5698771509371165696     1150031904
5698771510035551232     1150031904
5698771510036082688     4170258464
5698771510036715520     2895583264
5698771510037202176     1620908064
5698771510037665280     346232864
5698771510038193664     3366459424
5698771510332259072     2091784224
5698771510332816128     817109024
5698771510333344512     3837335584
5698771510339882240     2562660384
5698771510340411392     1287985184
5698771510340939776     13309984
5698771510348048896     3033536544
5698771510348577280     1758861344
5698771510349228800     484186144
5698771510632804864     3504412704
5698771510633441792     2229737504
5698771510634390272     955062304
5698771510638858496     3975288864
5698771510639347712     2700613664
5698771510642663168     1425938464
5698771510643387136     134486304
5698771510643808768     3154712864
5698771510648858368     1880037664
5698771510649410560     605362464
5698771510655600384     3625589024
5698771510656128768     2350913824
5698771510656657408     1076238624 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:46:12.523

```
awk 'NR == 1 {basets = $1; baseseq = $2} {print $1 - basets, $2 - baseseq}' inputfile 
```

或者，如果您不想输出初始的一对零：

```
awk 'NR == 1 {basets = $1; baseseq = $2; next} {print $1 - basets, $2 - baseseq}' inputfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:23:31.780

这是一个 bash 包装脚本，它应该做你想做的事：

```
#!/bin/bash

gnuplot << EOF
set terminal png truecolor size 800,600
set output 'plot_$1.png'

firstx=0
offsetx=0
funcx(x)=(offsetx=(firstx==0)?x:offsetx,firstx=1,x-offsetx)
firsty=0
offsety=0
funcy(x)=(offsety=(firsty==0)?x:offsety,firsty=1,x-offsety)

plot '$1' u (funcx(\$1)):(funcy(\$2))
EOF 
```

要使用脚本，请将要绘制的文件的名称作为参数提供：

```
$ myscript.sh print_1010171.txt 
```

[我修改了此处](https://stackoverflow.com/questions/10034891/how-do-i-make-a-plot-in-gnuplot-with-the-lowest-value-automatically-subtracted-f)给出的答案以适应两个变量。如果您想从所有数据中减去最小值而不是第一个，请参见该答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T22:03:34.497

与丹尼斯威廉姆森的解决方案非常相似——这应该更有效（但可能你不会注意到）并且它也会默默地忽略空白行（另一种解决方案将为空白行提供非常大的负数）。

```
#script coolscript.gp
if(!exists("DATAFILE")) DATAFILE='test.dat'
EXT_INDEX=strstr(DATAFILE,'.txt')  #assume data has a .txt extension.
set term post enh color
set output DATAFILE[:EXT_INDEX] . '.ps'  #gnuplot string slicing and concatenation
plot "< awk 'BEGIN{getline; header_col1=$1; header_col2=$2 }{if(NF){print $1-header_col1,$2-header_col2}}' ".DATAFILE using 1:2 
```

您绝对可以使用全 gnuplot 解决方案来做到这一点。（请参阅@andyras 的好解决方案和他链接到的我的答案）。这个（替代）解决方案通过读取 awk 中的第一行并分配变量`header_col1`以及`header_col2`第 1 列和第 2 列中的数据来工作。然后，只要该行不为空，它就会从未来的列中减去这些（如预期的那样）。

请注意，可以使用以下命令从命令行调用此解决方案：

```
gnuplot -e "DATAFILE='mydatafile.txt'" coolscript.gp 
```

不幸的是，引号是必需的，因为 gnuplot 需要它们，这意味着如果您在 shell 循环中使用它，您绝对应该在外部使用双引号，如我所示。

```
for FILE in *.dat; do
   gnuplot -e "DATAFILE='${FILE}'" coolscript.gp
done 
```

# c# - 为什么我不能使用 LINQ 在 WinRT 中获取 XML 元素？

> ID：11070075
> 
> 赞同：1
> 
> 时间：2012-06-17T08:53:19.147
> 
> 标签：c#, xml, linq, windows-8, windows-runtime

**1.我想要**
从 xml 文件中获取正确的 xml 元素

**XML**

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<tasks>
  <task>
    <title>Test0001</title>
    <due>06/17/2012</due>
  </task>
  <task>
    <title>Test0002</title>
    <due>06/17/2012</due>
  </task>
  <task>
    <title>Test0003</title>
    <due>06/17/2012</due>
  </task>
<tasks> 
```

**2.我编码的内容**

Linq 块：

```
 StorageFile file1 = await ApplicationData.Current.LocalFolder.GetFileAsync("BetterTask.xml");
        XDocument doc1 = new XDocument();
        using (var ReadStream1 = await file1.OpenStreamForReadAsync() as Stream)
        {
            doc1 = XDocument.Load(ReadStream1);
        }

        var data = from query in doc1.Descendants("task")
                   select new mytask
                   {
                       title = (string)query.Element("title"),
                       due = (string)query.Element("due")
                   };

        List<mytask> myTasks = data.ToList();
        myTodayListBox.ItemsSource = myTasks; 
```

mytask 类

```
public class mytask
{
    public string title { get; set; }
    public string due { get; set; }
} 
```

**3.我得到**
的是我在块的最后设置了一个中断，当应用程序中断时，我在 LinQ 部分发现：
<1>[doc1] 充满了 XML 内容
<2>但是 [myTasks] 是空的(计数 = 0),....

**4\. 为什么以及如何解决**
:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:05:20.607

我认为`doc1`您的情况下的变量实际上是指文档本身。您将不得不执行以下操作：

```
doc1.Root.Descendants("task") 
```

让它工作。

# php - fosuser 仅注册为管理员

> ID：11070084
> 
> 赞同：1
> 
> 时间：2012-06-17T08:54:38.220
> 
> 标签：php, forms, symfony, fosuserbundle, role

我的目标是使注册表单私有（仅适用于管理员）（仅注册人员）

因此，我重写了 Default FOSUserBundle Form register 以添加我创建的更多属性。

问题是我让我的所有网站都不允许匿名。但我仍然注册！如何更改 fosuserbundle 以将注册表设为私有。

奇怪的是，当我登录时，我可以进入我的所有页面并看到我是，但是当我进入注册表时它没有看到我是（这就是问题）所以如果我把我的安全.yml 注册行不起作用，因为它看不到我已登录

```
access_control:
     - { path: furter/admin/, role: ROLE_ADMIN }
     - { path: furter/register/, role: ROLE_ADMIN } 
```

如果我让最后一行我得到这个：

"**访问此资源需要完全身份验证。** "

我想我需要编写一个 addUser 并创建所有内容，但是有办法吗？

我不知道我需要向您展示什么代码，但它似乎没有帮助。

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:53:00.497

您的安全规则不正确，删除路线末尾的“/”，它应该可以工作

```
- { path: ^/register, role: ROLE_ADMIN } 
```

# php - Smarty - foreach 循环 4 次并创建一个新列表

> ID：11070085
> 
> 赞同：2
> 
> 时间：2012-06-17T08:54:38.857
> 
> 标签：php, html, smarty

我想用 smarty 实现这样的列表。

```
<ul>
 <li>
   <a>img1</a>
   <a>img2</a>
   <a>img3</a>
   <a>img4</a>
 </li>
 <li>
   <a>img5</a>
   <a>img6</a>
   <a>img7</a>
   <a>img8</a>
 </li>
<li>
   <a>img9</a>
   <a>img10</a>
   <a>img11</a>
   <a>img12</a>
 </li>
</ul> 
```

使用此示例代码

```
<ul class="bullet">
    {foreach from=$manufacturers item=manufacturer name=manufacturer_list}
        {if $smarty.foreach.manufacturer_list.index < 4}
      <li class="{if $smarty.foreach.manufacturer_list.last}last_item{elseif $smarty.foreach.manufacturer_list.first}first_item{else}item{/if}">   

        <a href="{$link->getmanufacturerLink($manufacturer.id_manufacturer, $manufacturer.link_rewrite)}" title="{l s='More about' mod='blockmanufacturer'}{$manufacturer.name}"> <img src="{$img_manu_dir}{$manufacturer.id_manufacturer}.jpg"><span>{$manufacturer.name}<span></a>
      </li>
    {/if}
{/foreach} 
```

首先使用给定的数组 $manufacturers 它将在`<li>`最多 4 次内循环并创建 4 `<img>`。然后，当它到达第 4 个索引时，它将创建一个新`<li>`标签。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:13:11.507

您想在每个 li 标签中显示 4 张图像吗？

```
<ul>
{foreach from=$manufacturers item=manufacturer name=manufacturer_list}
  {if $smarty.foreach.manufacturer_list.index % 4 == 0}
    <li>
  {/if}

  <a><img></a>

  {if $smarty.foreach.manufacturer_list.index % 4 == 0 || $smarty.foreach.manufacturer_list.last}
    </li>
  {/if}
{/foreach}
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T09:58:54.703

我是 Smarty3 语法，您可以执行以下操作：

```
{$data = [
    "alpha", "bravo", "charlie", "delta", "echo", "foxtrot", "golf", 
    "hotel", "india", "juliet", "kilo", "lima", "mike", "november", 
    "oscar", "papa", "quebec", "romeo", "sierra", "tango", "uniform", 
    "victor", "whiskey", "x-ray", "yankee", "zulu"
]}

{foreach $data as $value}
  {if $value@first}
    <ul>
      <li>
  {elseif ($value@iteration - 1) is div by 4}
      </li><li>
  {/if}

  <span>{$value}</span>

  {if $value@last}
      </li>
    </ul>
  {/if}
{/foreach} 
```

请注意，由于将整体嵌套`<ul>`在 foreach 循环中，因此它不会显示是否没有要循环的数据。

# php - htaccess 抑制 php 错误

> ID：11070087
> 
> 赞同：1
> 
> 时间：2012-06-17T08:54:43.303
> 
> 标签：php, linux

我有这段代码来抑制所有错误。发生错误时出现空白页，如何将这个空白页替换为自定义页？

```
php_flag  log_errors on
php_value error_log  PHPerrors.log

## prevent access to PHP error log ##
<Files PHPerrors.log>
 Order allow,deny
 Deny from all
 Satisfy All
</Files>

## supress php errors ##
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:59:18.293

您应该为 500 错误定义文件：

```
ErrorDocument 500 ./errors/500.html 
```

# java - 从 FFT 结果中获取频率的 Java 代码

> ID：11070088
> 
> 赞同：0
> 
> 时间：2012-06-17T08:54:47.260
> 
> 标签：java, signal-processing, fft

我有一个双精度数组，其中包含直接来自麦克风的音频样本，采样率为 44100。我想获得基频（样本包含幅度）。在自相关页面的维基百科上，我找到了基于 Wiener-Khinchin 定理的解决方案的描述，我在互联网上进行了更多研究，完成了算法，最终我编写了以下代码，但我不确定它是否正确：

```
private double determineFrequency(double[] signal) {
 //Get a FastFourierTransformer instance (Apache library)
 FastFourierTransformer fft = new FastFourierTransformer(DftNormalization.STANDARD);

 //The size of the array used by the fft must be a power of two, wrapping 
 //the original array in a bigger one padded to zero
 //NOTE: Here I assume that the input array is smaller than 8192
 double[] paddedSignal = new double[8192];
 System.arraycopy(signal, 0, paddedSignal, 0, signal.length);

 //First fft (forward) to switch from amplitude domain to the frequency domain
 Complex[] transformed = fft.transform(paddedSignal, TransformType.FORWARD);

 // Calculate the conjugate of the complex array
 for (int i=0; i<transformed.length; i++)
  transformed[i] = transformed[i].conjugate();

 //Second fft (inverse) to complete the autocorrelation
 transformed = fft.transform(transformed, TransformType.INVERSE);

 //Calculate the array of corresponding real values to switch 
 // from the frequency domain to the amplitude domain
 double[] autocorrelationMatrix = new double[transformed.length];
 for (int i=0; i<transformed.length; i++) {
  if (Double.isNaN(transformed[i].abs()) || Double.isInfinite(transformed[i].abs()))
   autocorrelationMatrix[i] = 0;
  else
   autocorrelationMatrix[i] = transformed[i].abs();
 }

 //Get the index of the max amplitude
 Integer indexOfMax = Utils.indexOfMax(autocorrelationMatrix);

 return transformed[indexOfMax].getReal()*audioFormat.getSampleRate()/transformed.length; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:50:13.763

您在自相关域中找到了最大值，然后用它来读取频域。这行不通，就像您可以使用时域中的索引来了解频域一样。

反而，

```
return autocorrelationMatrix[indexOfMax].getReal()*audioFormat.getSampleRate()/autocorrelationMatrix.length; 
```

也就是说，您可能会发现避免额外的 IFFT 更容易。相反，只需从频域中提取最大绝对值。这将适用于采样率/变换长度的分辨率，并且可以在最大 FFT bin 的相位的帮助下进行细化。

# ios - iOS 如何使用私有 API？

> ID：11070089
> 
> 赞同：7
> 
> 时间：2012-06-17T08:54:58.677
> 
> 标签：ios, ios5, iphone-privateapi

我不想将此应用程序提交到 AppStore。我已经尝试了很多次，但遇到了很多问题:(

我使用 class-dump 来获取 UIKit.framework 的所有头文件。在class-dump生成的UIApplication.h中，看到了我要使用的方法----launchApplicationWithIdentifier。

然后我将 UIApplication.h 放在我的项目中并导入它。编译，我得到了很多“重新定义枚举器......”错误，因为在我之前使用的 UIKit.framework 中，还有另一个 UIApplication.h。但是这个文件没有方法launchApplicationWithIdentifier。

如果我删除之前的 UIKit.framework 并导入 class-dump 生成的文件夹。然后它看起来像一个框架，但如果我展开它，它是空的。

然后我想让所有生成的头文件成为一个框架文件ant替换之前的UIKit.framework。但我不知道怎么做。我们可以看到，在系统框架目录下，有一个与框架同名的文件，并且有一个“已执行的shell脚本”图标。我怎样才能制作这个文件？

我真的很困惑。有人可以帮我一把吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T10:10:13.450

只需在要使用它的类实现上方的类别接口中指定私有方法，如下所示：

```
@interface UIApplication (Private)

- (BOOL)launchApplicationWithIdentifier:(id)identifier suspended:(BOOL)suspended;

@end 
```

不要导入整个类转储文件并与原始 UIKit 框架链接。

使用私有 API 时必须非常小心。这些方法可以在未来的 iOS 版本中更改或删除！

在运行时检查该方法是否真的存在，`respondsToSelector:`并为它不存在的情况做好准备。

我在自己的应用程序中使用了一个秘密的 MapKit 功能，我知道私有方法只存在于 iOS 5 中。所以我的应用程序仍然适用于所有 iOS 版本，但此功能仅在 iOS 5 中可用（Apple 在 iOS 6 中删除或更改了它贝塔 1)。

# java - Greenfoot 编程 - Actor 行为

> ID：11070090
> 
> 赞同：2
> 
> 时间：2012-06-17T08:55:50.443
> 
> 标签：java, greenfoot

我在 Greenfoot 教一门课，我被一些看似微不足道的事情困住了。

我需要一个选项，只要有人在我的世界中拖动一个演员，然后放下它，就会触发一个方法。这是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:25:46.100

只需覆盖[`addedToWorld()`](http://www.greenfoot.org/files/javadoc/greenfoot/Actor.html#addedToWorld%28greenfoot.World%29)你的演员的方法。例如，以下示例定义了一个在插入世界时始终将自身定位在 50,50 位置的 actor：

```
public class MyActor extends Actor {

    @Override
    public void addedToWorld(World world) {
        setLocation(50,50);
    }

} 
```

调用当然是任意的`setLocation()`，只要将参与者添加到世界中，您在该方法中提供的任何代码都将被执行（无论是通过拖放交互还是以编程方式。）

附带说明一下，您还可以在 actor 的构造函数中放入一些初始化代码，但由于这发生在 actor 被放入世界之前，任何设置 actor 的位置、旋转等的代码都会抛出异常。

# r - R中的2d颜色渐变图

> ID：11070101
> 
> 赞同：11
> 
> 时间：2012-06-17T08:57:45.987
> 
> 标签：r, colors, plot, linear-gradients

我想制作一个 2d 颜色渐变矩形，如下图右侧所示。我怎样才能在 R 中做到这一点？使用`colorRamp`or`RColorBrewer`或其他功能/包，我可以生成漂亮的 1D dolor 斜坡。但是我如何为 2D 执行此操作，包括角落中的几种颜色，例如右上角的矩形？

![颜色渐变](../Images/2d2e44e6bbe581b17d11bf071e1a6346.png)

我想要得到的是例如以下两种渐变类型：

![在此处输入图像描述](../Images/be3c4516d916fe3d8f1747e2a0d07cc7.png) ![在此处输入图像描述](../Images/f8057263dd656cf7082d5fca2f2b736a.png)

BTY：我完全忘了提到我在[这里](http://grrrraphics.blogspot.de/2012/05/my-own-version-of-bubble-plot-part-1.html)找到了上面的图表（由 Luca Fenu 制作）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T09:28:03.813

试试这个：

```
 m = tcrossprod(sin(seq(0,pi,length=1e2)), cos(seq(0, 3*pi, length=1e2)))
 cols = matrix(hcl(h=scales::rescale(m, c(0, 360))), nrow(m))
 grid::grid.raster(cols) 
```

您需要找到哪个函数描述了您想要的颜色渐变（我使用正弦波进行说明）。

![在此处输入图像描述](../Images/a110d1799b5db25f65bac7a1bffd84bc.png)

编辑：4个角之间的线性插值

```
library(grid)
library(scales)

m = tcrossprod(seq(1,2,length=1e2), seq(2, 3, length=1e2))
pal <- gradient_n_pal(c("red","green","yellow","blue"), values = c(2, 3, 4, 6), space = "Lab")
cols = matrix(pal(m), nrow(m))
grid.raster(cols) 
```

![在此处输入图像描述](../Images/b84f37445c35a4a20e045f7266488531.png)

编辑2：当函数不可分离时，使用外部，

```
fun_xy <- function(x, y){

  abs(y-x) * abs(y+x)

}

z <- outer(seq(-1,1,length=100), seq(-1,1,length=100), FUN = fun_xy)

cols = matrix(hcl(h=scales::rescale(z, c(0, 200))), nrow(z))
grid::grid.raster(cols) 
```

![在此处输入图像描述](../Images/b6f501f30cc973eca15f8161c0e9e914.png)

您也可以直接在函数内部进行颜色混合，而不是事后将值映射到色标，

```
fun_xy <- function(x, y){

  R <- (x+1)/2
  G <- (1-x)/2
  B <- (y+1)/2
  A <- 1- 0.5*exp(-(x^2+y^2)/0.2)

  rgb(R, G, B, A)

}

z <- outer(seq(-1,1,length=100), seq(-1,1,length=100), FUN = fun_xy)

library(grid)
grid.newpage()
grid::grid.raster(z) 
```

![在此处输入图像描述](../Images/1bacaf08833b863ab568fbbc471fa066.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T14:42:39.473

感谢您对我的帖子发表评论 - 我很高兴它引发了一些讨论。这是实现右上角图的最小代码-我相信还有其他更有效的方法可以做到这一点...但这无需其他库即可工作，并且应该很容易遵循...您可以更改通过使用 max_sat 和 alpha_default 变量进行饱和度和 alpha 混合...

```
#define extremes of the color ramps
rampk2r <- colorRampPalette(c(rgb(  0/255,   0/255,   0/255), rgb(218/255,   0/255,   0/255)))
rampk2g <- colorRampPalette(c(rgb(  0/255,   0/255,   0/255), rgb(  0/255, 218/255,   0/255)))

# stupid function to reduce every span of numbers to the 0,1 interval
prop <- function(x, lo=0, hi=100) {
    if (is.na(x)) {NA}
    else{
        min(lo,hi)+x*(max(lo,hi)-min(lo,hi))
    }
}

rangepropCA<-c(0,20)
rangepropCB<-c(0,20)

# define some default variables
if (!exists('alpha_default')) {alpha_default<-1} # opaque colors by default
if (!exists('palette_l')) {palette_l<-50} # how many steps in the palette
if (!exists('max_sat')) {max_sat<-200} # maximum saturation
colorpalette<-0:palette_l*(max_sat/255)/palette_l # her's finally the palette...

# first of all make an empy plot
plot(NULL, xlim=rangepropCA, ylim=rangepropCB, log='', xaxt='n', yaxt='n', xlab='prop A', ylab='prop B', bty='n', main='color field');
# then fill it up with rectangles each colored differently
for (m in 1:palette_l) {
    for (n in 1:palette_l) {
        rgbcol<-rgb(colorpalette[n],colorpalette[m],0, alpha_default);
        rect(xleft= prop(x=(n-1)/(palette_l),rangepropCA[1],rangepropCA[2]) 
            ,xright= prop(x=(n)/(palette_l),rangepropCA[1],rangepropCA[2])
            ,ytop= prop(x=(m-1)/(palette_l),rangepropCB[1],rangepropCB[2]) 
            ,ybottom= prop(x=(m)/(palette_l),rangepropCB[1],rangepropCB[2])
            ,col=rgbcol
            ,border="transparent"
        )
    }
}
# done! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T13:02:24.243

我确信有一种更优雅的方法可以做到这一点。无论如何，给你：最后一行是问题中原始图像的非常接近的再现。

![](../Images/793239ea1ffd9f2c8e7578255a9a12af.png)

```
library(scales)

four.color.matrix <-
    function( mycols ){

        m <- matrix( NA , 100 , 100 )

        m[ 1 , 1 ] <- mycols[ 1 ] 
        m[ 1 , 100 ] <- mycols[ 2 ]
        m[ 100 , 1 ] <- mycols[ 3 ]
        m[ 100 , 100 ] <- mycols[ 4 ]

        m[ 1 , 1:100 ] <- gradient_n_pal( c( mycols[ 1 ] , 'white' , mycols[ 2 ] ) , values = c( 1 , 50 , 100 ) )(1:100)
        m[ 1:100 , 1 ] <- gradient_n_pal( c( mycols[ 1 ] , 'white' , mycols[ 3 ] ) , values = c( 1 , 50 , 100 ) )(1:100)
        m[ 1:100 , 100 ] <- gradient_n_pal( c( mycols[ 2 ] , 'white' , mycols[ 4 ] ) , values = c( 1 , 50 , 100 ) )(1:100)
        m[ 100 , 1:100 ] <- gradient_n_pal( c( mycols[ 3 ] , 'white' , mycols[ 4 ] ) , values = c( 1 , 50 , 100 ) )(1:100)

        a <- gradient_n_pal( c( mycols[ 1 ] , 'white' , mycols[ 4 ] ) , values = c( 1 , 50 , 100 ) )
        diag(m)<-a(1:100)

        b <- gradient_n_pal( c( mycols[ 3 ] , 'white' , mycols[ 2 ] ) , values = c( 1 , 50 , 100 ) )
        for(i in 1:(nrow(m) - 1)){ 
          for (j in 1:nrow(m)) if (i + j == nrow( m )+1){
              m[i,j] <- b(j)
            }
        }

        for ( i in 2:50 ){

            m[ i , i:(101-i) ] <- 
                gradient_n_pal( c( mycols[ 1 ] , 'white' , mycols[ 2 ] ) , values = c( 0 , 50 , 100 ) )(  i:(101-i) )

            m[ i:(101-i) , i ] <- 
                gradient_n_pal( c( mycols[ 3 ] , 'white' , mycols[ 1 ] ) , values = c( 0 , 50 , 100 ) )( (101-i):i )

        }

        for ( i in 51:99 ){

            m[ i , i:(101-i) ] <- 
                gradient_n_pal( c( mycols[ 3 ] , 'white' , mycols[ 4 ] ) , values = c( 0 , 50 , 100 ) )(  i:(101-i) )

            m[ i:(101-i) , i ] <- 
                gradient_n_pal( c( mycols[ 4 ] , 'white' , mycols[ 2 ] ) , values = c( 0 , 50 , 100 ) )( (101-i):i )

        }

        m
    }

z <- four.color.matrix( c( 'red' , 'yellow' , 'green' , 'blue' ) )
library(grid)
grid.raster( z )

# original question asked for something like this
grid.raster( four.color.matrix( c( 'darkgreen' , 'darkgreen' , 'darkred' , 'darkgreen' ) ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T05:25:14.007

你可以试试这个，看看结果图

```
rotate <- function(x) t(apply(x, 2, rev))
n <- 3
library(grid)
mm <- tcrossprod(seq(1,0,length.out = n))
tmp1 <- sapply(col2rgb("orange")/255, function(x) 1-mm*(1-x))
tmp2 <- sapply(col2rgb("cyan")/255, function(x) 1-rotate(mm)*(1-x))
tmp3 <- sapply(col2rgb("purple")/255, function(x) 1-rotate(rotate(mm))*(1-x))
tmp4 <- sapply(col2rgb("grey")/255, function(x) 1-rotate(rotate(rotate(mm)))*(1-x))

tmp <- (tmp1*tmp2*tmp3*tmp4)
grid.raster(matrix(rgb(tmp), nrow = n)) 
```

![结果图](../Images/de7fa3c25c2ab7c2f245f9a987671ad5.png)

# jquery - jQuery验证插件的密码确认问题

> ID：11070105
> 
> 赞同：2
> 
> 时间：2012-06-17T08:58:41.570
> 
> 标签：jquery, jquery-validate

我不明白为什么我的代码不起作用，密码确认不要求 - “密码需要确认”。

我的js代码：

```
 $(document).ready(function(){
$('.new_user').validate({
    debug: true,
    rules: {
        'user[email]':{
            required: true
        },
        'user[password]': {
            required: true,
            'user[password_confirmation]': {
                equalTo: "#user_password"
            }
        }

},

showErrors: function(errorMap, errorList) {
    this.defaultShowErrors();
},
success: "valid"

});
}) 
```

我的html代码：

```
 <div><label for="user_password">Password</label><br>
   <input id="user_password" name="user[password]" size="30" type="password" class="error"><label for="user_password" generated="true" class="error" style="">This field is required.</label></div>

      <div><label for="user_password_confirmation">Password confirmation</label>
<input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:20:13.130

**工作演示** [http://jsfiddle.net/g45fM/1/](http://jsfiddle.net/g45fM/1/)

演示中的这个版本比你正在尝试的更干净，而且你的 HTML 也丢失`form`了。

希望这可以帮助。

**代码**

```
$.validator.setDefaults({
    submitHandler: function() {
        alert("submitted!");
    }
});

// validate signup form on keyup and submit
$("form").validate({
    rules: {
        pass: {
            required: true,
            minlength: 5
        },
        pass2: {
            required: true,
            minlength: 5,
            equalTo: "#pass"
        }
    },
    messages: {
        pass: {
            required: "Please provide a password",
            minlength: "Your password must be at least 5 characters long"
        },
        pass2: {
            required: "Please provide a password",
            minlength: "Your password must be at least 5 characters long",
            equalTo: "Please enter the same password as above"
        }
    }
});​ 
```

# php - 有一个 codigniter 会话替代方式，其行为类似于会话以及如何实现？

> ID：11070107
> 
> 赞同：-1
> 
> 时间：2012-06-17T08:58:58.433
> 
> 标签：php, codeigniter

目前我在codeigniter会话大小方面面临问题。一些数据没有保存在会话变量中，但我需要这个。我在谷歌上找不到任何解决方案。这是我的一些会话代码。首先我为登录创建会话：

```
$this->session->set_userdata('member_loged', TRUE);
$this->session->set_userdata('uid', $uloged->id);
$this->session->set_userdata('user_name', $uloged->user_name);
$this->session->set_userdata('email', $uloged->email); 
```

第二节考试代码：

```
$onlineexam = array();

$ukey = time();
$uid = $this->session->userdata('uid');
$onlineexam['uid'] = $uid;
$onlineexam['examid'] = $eid;
$onlineexam['ukey'] = $ukey;
$onlineexam['onlineexamdate'] = date('Y-m-d H:i:s');

foreach($allque as $que):

$quid = $que['id'];
$qa['queid'] = $quid;  
$onlineexam['allq'][] = $qa;
$this->session->set_userdata('onlineexam', $onlineexam);

endforeach; 
```

第三节通过ajax点击后添加在线考试：

```
$onlineexam = $this->session->userdata('onlineexam');
$ans['queid'] = $queid; 
$ans['ansid'] = $ansid;
$ans['flag'] = $checkans;
$onlineexam['allanswer'][] = $ans;
$this->session->set_userdata('onlineexam', $onlineexam); 
```

在 allanswer 变量中填充一些数据并错过最大数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:02:02.230

您的会话是否存储在 cookie 中？如果是这样，则限制为 4kb。切换到数据库会话，您可以存储无穷无尽的信息

# php - Jquery UI 自动完成 MySQL/PHP

> ID：11070108
> 
> 赞同：2
> 
> 时间：2012-06-17T08:59:02.093
> 
> 标签：php, jquery, mysql, jquery-ui

我得到了这个 PHP 代码：

```
// connect to mysql
require_once('includes/connect.php');
// include config
include('includes/config.php');

$nameser = $_GET['term'];

$search = Array();
$names = '';
$result = mysql_query("SELECT name FROM customers WHERE name LIKE '%".$nameser."%'");
while ($row = mysql_fetch_assoc($result))
    $names = json_encode($row['name']);

echo $names; 
```

但是输出的格式不正确，所以自动完成脚本无法弄清楚它应该做什么。

此外，此示例仅输出 1 个条目，但应该远不止这些。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:07:55.687

这是正确的代码：

```
$names = array();
while ($row = mysql_fetch_assoc($result))
  $names[] = $row['name'];

echo json_encode($names); 
```

并且由于`mysql_*`不推荐使用函数，请考虑使用[`mysqli`](http://php.net/mysqli)or [`PDO`](http://php.net/pdo)。

# cuda - 推力::unique_by_key 吃掉最后一个元素

> ID：11070109
> 
> 赞同：1
> 
> 时间：2012-06-17T08:59:01.833
> 
> 标签：cuda, gpu, thrust

请考虑以下简单代码：

```
thrust::device_vector<int> positions(6);
thrust::sequence(positions.begin(), positions.end());
thrust::pair<thrust::device_vector<int>::iterator, thrust::device_vector<int>::iterator > end;
//copyListOfNgramCounteachdoc contains: 0,1,1,1,1,3
end.first = copyListOfNgramCounteachdoc.begin();
end.second = positions.begin();
for(int i =0 ; i < numDocs; i++){
    end= thrust::unique_by_key(end.first, end.first + 3,end.second);
}

int length = end.first - copyListOfNgramCounteachdoc.begin() ;
cout<<"the value of end -s is: "<<length;
for(int i =0 ; i< length ; i++){
  cout<<copyListOfNgramCounteachdoc[i];
} 
```

我预计输出是这段代码的 0,1,1,3；但是，输出为 0,1,1。谁能让我知道我错过了什么？注意： 的内容`copyListOfNgramCounteachdoc`是 0,1,1,1,1,3 。的类型`copyListOfNgramCounteachdoc`也是`thrust::device_vector<int>`.

编辑：

```
end.first = storeNcCounts.begin();
    end.second = storeCompactedPositions.begin();
    int indexToWriteForIndexesarr = 0;
    for(int i =0 ; i < numDocs; i++){
        iter = end.first;
        end = thrust::unique_by_key_copy(copyListOfNgramCounteachdoc.begin() + (i*numUniqueNgrams), copyListOfNgramCounteachdoc.begin()+(i*numUniqueNgrams)+ numUniqueNgrams,positions.begin() + (i*numUniqueNgrams),end.first,end.second);
        int numElementsCopied = (end.first - iter);
        endIndex = beginIndex + numElementsCopied - 1;
        storeBeginIndexEndIndexSCNCtoRead[indexToWriteForIndexesarr++] = beginIndex;
        storeBeginIndexEndIndexSCNCtoRead[indexToWriteForIndexesarr++] = endIndex;
        beginIndex = endIndex + 1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:21:23.623

我认为在这种情况下您要使用的是`thrust::unique_by_key_copy`，但请继续阅读。

问题是`unique_by_key`除非必须，否则不会更新您的输入数组。在第一次调用的情况下，它可以通过删除重复项来返回一个唯一键序列`1`——通过向前移动返回的迭代器，而不实际压缩输入数组。

如果你用这个替换你的循环，你可以看到发生了什么：

```
end.first = copyListOfNgramCounteachdoc.begin();
end.second = positions.begin();
thrust::device_vector<int>::iterator iter;

for(int i =0 ; i < numDocs; i++){
  cout <<"before ";
  for(iter = end.first; iter != end.first+3; iter++) cout<<*iter;

  end = thrust::unique_by_key(end.first, end.first + 3,end.second);

  cout <<" after ";
  for(iter = copyListOfNgramCounteachdoc.begin(); iter != end.first; iter++) cout<<*iter;
  cout << endl;

  for(int i =0 ; i< 6; i++) cout<<copyListOfNgramCounteachdoc[i];
  cout << endl;
} 
```

对于此代码，我得到以下输出：

```
before 011 after 01
011223
before 122 after 0112
011223 
```

您可以看到其中的值`copyListofNgramCounteachdoc`没有改变。这是有效的行为。如果您使用Thrust`unique_by_key_copy`而不是`unique_by_key`then 将被迫实际压缩值以保证唯一性，但在这种情况下，由于每个序列中只有两个值，因此没有必要。文档说：

> 返回值是一个迭代器 new_last 使得 [first, new_last) 范围内没有两个连续元素相等。[new_last, last) 范围内的迭代器仍然是可解引用的，但它们指向的元素是未指定的。unique 是稳定的，这意味着没有被移除的元素的相对顺序是不变的。

如果您使用`unique_by_key_copy`，则 Thrust 将被迫复制唯一的键和值（具有明显的成本影响），您应该会看到您所期望的行为。

顺便说一句，如果您可以在一次调用中执行此操作，`unique_by_key`而不是在循环中执行，我建议您这样做。

# sharepoint-2010 - 备用访问映射在 SharePoint 2010 工作组中不起作用

> ID：11070115
> 
> 赞同：0
> 
> 时间：2012-06-17T08:59:40.947
> 
> 标签：sharepoint-2010, workgroup, alternate-access-mappings

我尝试在安装在 WorkGroup Windows Server 2008 R2 服务器中的 SharePoint 2010 中配置备用访问映射，但无法使其正常工作。这是我的步骤。

1.  转到管理中心-> 管理 Web 应用程序。
2.  选择一个 Web 应用程序并扩展它。
3.  在主机标头中提供 my12server.com 并保留其他默认值。我将区域更改为外联网。
4.  单击确定。
5.  一段时间后，它会在 SharePoint 中创建 Web 应用程序，并在 IIS 中创建网站。
6.  我通过添加条目 192.168.1.11 my12server.com 更改了我的主机文件
7.  浏览新的扩展。它要求提供凭据。提供了正确的凭证，但没有任何显示。只是一个空白页。

注意：但是，当 SharePoint 2010 在域计算机中时，我已经成功扩展了 Web 应用程序。

请给我建议。

谢谢普拉卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:05:39.313

SharePoint 旨在*仅*在域环境中工作。换句话说，您不能期望在加入*工作组*的底层 Windows Server 上运行它并期望完整的功能。虽然有一些[博客文章](http://sharepoint.microsoft.com/blogs/fromthefield/Lists/Posts/Post.aspx?ID=112)描述了在工作组环境中的安装（或者，更好地说，使用*本地帐户*），但我不建议在这种操作模式上浪费时间。

此外，仅仅为了提供另一个主机名而*扩展*Web 应用程序是没有意义的。当您需要为每个应用程序提供不同的身份验证提供程序时，多次扩展 Web 应用程序最有用。在您的简单情况下，您只需为单个 Web 应用程序配置多个备用访问映射记录。

# java - 如何通知 Glassfish 3.1 集群中的所有（相同）单例豆？

> ID：11070116
> 
> 赞同：20
> 
> 时间：2012-06-17T09:00:00.680
> 
> 标签：java, jakarta-ee, synchronization, glassfish, cluster-computing

我有一个在 Glassfish 3.1.2 集群上运行的 JEE6 应用程序。一个@Singleton Bean 包含某种（readolny）缓存。用户可以按下 GUI 中的按钮以使用来自数据库的（更新的）内容来更新缓存。

这在非集群环境中运行良好，但现在我们需要切换到集群。

所以我面临的问题是，当用户按下更新按钮时，只有来自他的服务器节点的缓存单例被更新。我的问题是，让其他单身人士（在其他节点中）也更新那里的数据的最简单方法是什么？

*我知道[Cluster environment 中的 Singleton](https://stackoverflow.com/questions/1194129/singleton-in-cluster-environment)问题，但我的问题是 Glassfish 特有的（因为我希望有一些内置支持），另一个带有“Websphere”标签。我的问题是关于 JEE6，另一个比 JEE6 更老。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T14:13:40.560

[GlassFish 高可用性管理指南](http://docs.oracle.com/cd/E18930_01/html/821-2426/abdla.html#scrolltoc)明确指出：

> **限制**
> 
> 配置会话持久性和故障转移时，请注意以下限制：
> 
> *   当会话故障转移时，对打开文件或网络连接的任何引用都将丢失。应用程序的编码必须牢记这一限制。
>     
>     
> *   EJB Singleton 是为集群中的每个服务器实例创建的，而不是每个集群一次。

另一个建议是使用*JMS*并按下 GUI 按钮将消息发布到 JMS 主题。所有 Singleton bean 都可以订阅该主题，并且接收消息将导致它们几乎同时从数据库中更新。这种方法的好处是，它利用了 Glassfish 的更多内置功能，而不必引入另一个框架。

无论如何，从单实例迁移到多实例从来都不是真正的无缝更改，而且会带来一些困难。可能需要更改应用程序以确保所有相关状态（会话状态除外）都正确共享给集群中的所有实例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T11:44:35.513

不幸的是，没有实现您想要的内置方法，但是 Glassfish 集群所基于的[shoal](http://shoal.java.net/)框架可以帮助您。您可以通过向集群成员发送通知以更新其缓存或将当前缓存替换为分布式缓存来解决此问题。

下面是一个使用 shoal 发送通知的例子：

```
@Startup
@Singleton
public class Test {

private String groupName = "mygroup";
private String serverName = System.getProperty("HTTP_LISTENER_PORT");
private GroupManagementService gms;

@PostConstruct
public void init() {
    Runnable gmsRunnable = GMSFactory.startGMSModule(serverName, groupName,
            GroupManagementService.MemberType.CORE, null);
    gms = (GroupManagementService) gmsRunnable;
    try {
        gms.join();
        gms.addActionFactory(new MessageActionFactory() {

            @Override
            public Action produceAction() {
                return new MessageAction() {

                    @Override
                    public void consumeSignal(Signal signal)
                            throws ActionException {
                        // Update your cache here
                    }
                };
            }
        }, groupName);
    } catch (GMSException e) {
        Logger.getAnonymousLogger().severe(e.getMessage());
    }
}

@PreDestroy
public void cleanup() {
    gms.shutdown(GMSConstants.shutdownType.INSTANCE_SHUTDOWN);
}

/**
 * Call this from your button click.
 */
public void updateCache() {
    try {
        byte[] message = new byte[] {};
        gms.getGroupHandle().sendMessage(groupName, message);
    } catch (GMSException e) {
        Logger.getAnonymousLogger().severe(e.getMessage());
    }
}
} 
```

如果您想改用分布式缓存：

```
 DistributedStateCache cache = gms.getGroupHandle().getDistributedStateCache(); 
```

放置在缓存中的项目将被复制到其他集群节点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T12:40:16.373

看看[`JGroups`](http://www.jgroups.org/)。它是用于可靠多播通信的框架分叉。JBoss 集群机制目前基于此工具。

您可以查看[此处的](http://javabender.blogspot.com/2012/01/jgroups-lockservice-example.html)[示例用法`JGroups`](http://javabender.blogspot.com/2012/01/jgroups-lockservice-example.html)。

# jquery - jQuery on rails 无法在 heroku 和 cedar 上进行生产

> ID：11070123
> 
> 赞同：2
> 
> 时间：2012-06-17T09:00:29.573
> 
> 标签：jquery, ruby-on-rails, jquery-ui, heroku, jquery-ui-accordion

我有 jQuery 和 jQuery UI 都在本地工作，但他们只是拒绝在我的生产环境中工作（如果有帮助的话，Cedar/Heroku）。

我对此进行了大量研究，但仍然感到困惑，希望有人能帮助我。

我正在尝试使有关 javascripts 的两件事起作用：

*   jQuery 关闭功能 - 和 -
*   jQuery UI 手风琴

在 index.html.erb 文件中调用的脚本：

```
<script>
    $(function() {
$( "#accordion" ).accordion();
});
</script>

<div class="demo">
<h2>JQuery UI Accordion - works in development, but not production</h2><br>
<div id="accordion">
<h3><a href="#">Section 1</a></h3>
   <div>
      <p>
        (text removed).
      </p>
   </div>
<h3><a href="#">Section 2</a></h3>

<div class="alert alert-success">
   <button type="button" class="close" data-dismiss="alert">×</button>
   <strong>Click the X in the right of this box. </strong> It should close in production, but it doesn't. Yet it closes in development - strange!<br>
</div> 
```

在 application.html.erb 中调用 jQuery：

```
<%= javascript_include_tag "application" %>
<%= javascript_include_tag "jquery-ui" %> 
```

这是 application.js：

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require_tree . 
```

在我的 /assets/javascripts 目录中存在以下文件：jquery-1.7.2.min.js、jquery-us-1.8.20.custom.min.js 和 jquery.ui.accordion.js

它们也可以通过手动加载它们的 URL 来找到（所以我已经确认它们是在 git 推送期间上传的）。

application.rb 文件：

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Aqua
  class Application < Rails::Application

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'
    config.assets.initialize_on_precompile = false #added as per rubyguides 4.1 asset pipeline
  end
end 
```

正在调用显示 jQuery 的 Gemfile（已运行捆绑安装）：

```
# Bundle edge Rails instead:
# gem 'rails',     :git => 'git://github.com/rails/rails.git'

#gem 'mysql2' removed for pg required on Heroku
gem 'pg' #added as per Heroku requirements
gem 'omniauth'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'omniauth-openid', :git => 'git://github.com/intridea/omniauth-openid.git'
gem 'thin'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.1.5'
  gem 'coffee-rails', '~> 3.1.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

(removed a bunch of commented out fields)    

group :test do
  # Pretty printed test output
  gem 'turn', '~> 0.8.3', :require => false
end 
```

开发.rb：

```
Aqua::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request.  This slows down response time but is perfect for development
  # since you don't have to restart the web server when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  # Do not compress assets
  config.assets.compress = false

  # Expands the lines which load the assets
  config.assets.debug = true
end 
```

最后是production.rb：

```
Aqua::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to Rails.root.join("public/assets")
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Use a different logger for distributed setups
  # config.logger = SyslogLogger.new

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify
end 
```

感谢下面的反馈，我注意到在我的开发环境中我加载了所有 javascripts 并且没有错误（通过脚本下的 chrome 开发工具查看时）。生产中只显示了 2 个 javascript，并且都有如下错误：

应用程序.js

```
Uncaught TypeError: Cannot read property 'fn' of undefined 
```

jquery-ui.js

```
Uncaught ReferenceError: jQuery is not defined 
```

在 .erb html 文件中，这是脚本尝试运行时的错误（添加***以显示它在 chrome 中以红色显示的位置）：

```
<script>
    $(function() {
******  Uncaught ReferenceError: $ is not defined *********
        $( "#accordion" ).accordion();
    });
    </script> 
```

有任何想法吗？这是 Rails 资产管道问题还是其他问题？运行 heroku 日志并没有给我任何详细的错误消息。

提前感谢 Rails 上的 L-plate :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:03:26.800

我发现这个问题与 Rails 资产管道有关。

我仍然不完全确定它为什么会发生，但是 application.js 错误地编译了 jquery （等）。

我的短期解决方法（实际上并没有那么麻烦）是将每个单独的 javascript 文件手动添加到我的主布局 html.erb 页面中，然后从那里过滤到彼此中。

当然，它涉及更多单独的负载，但我的网站容量不高，性能也没有明显下降。

一旦我对 rails 管道有了更好的了解，我就会回去永久地对其进行整理。

# selenium - 识别 Selenium 自动化的页面元素

> ID：11070125
> 
> 赞同：0
> 
> 时间：2012-06-17T09:00:35.860
> 
> 标签：selenium, webdriver

我有一个被测应用程序，它的表格结构如下：

```
<table width="100%" cellspacing="0" cellpadding="0" border="0" style="background-color: White">
<tbody>
<tr>
<td id="lefthandcol" class="b24-lefthandcol" valign="top" style="width: 130px !important">
<td style="height: 400px; width: 5px">
<td style="height: 400px; width: 5px">
<td valign="top">
<div id="ctl00_ContentPlaceHolder1_MiddlePanel">
<div id="DestinationDiv"></div>
<table>
</td>
<td style="height: 400px; width: 5px">
<td style="height: 400px; width: 5px">
<td width="225" valign="top" align="right" style="background-color: White;">
</tr>
</tbody>
</table> 
```

问题是我如何识别这张桌子，因为它没有`id`？

在这种情况下，人们通常会做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:57:49.377

您应该找到任何独特的父子关系并在 CSS 或 Xpath 的帮助下编写它：

```
IWebElement table = driver.FindElement(By.XPath("//table[descendant::*[@id='ctl00_ContentPlaceHolder1_MiddlePanel']]")); 
```

`id=ctl00_ContentPlaceHolder1_MiddlePanel`因此将找到具有后代元素的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:26:32.490

如果 id 不可用，则使用 xpath 或 css。如果您不能自己编写它们，则可以使用 firebug 和 xpath checker 等工具。

# actionscript-3 - 包含元素的 Actionscript UIScrollbar 和 Click 事件

> ID：11070126
> 
> 赞同：0
> 
> 时间：2012-06-17T09:01:04.633
> 
> 标签：actionscript-3, flash, scrollbar, mouseclick-event

我正在用 Flash CS5.5 创建一个游戏，基本上是“谁想成为百万富翁？”的一个版本。

我有一个 answerDisplay 类，其中包含一个答案文本。答案文本可能会变得相当长，由于屏幕空间有限，我会检查很长的文本，如果文本太大，我会在文本字段之外添加 UIScrollbar。

效果很好，除了一件事 - 当用户拖动滚动选项卡时，文本滚动正常。当用户单击其中一个滚动条箭头时，只要单击按钮，文本字段也可以正常滚动，但是一旦释放鼠标按钮，就会触发包含 answerDisplay 类的单击事件，这会导致我的程序错误认为用户在尝试滚动时选择了答案。

我尝试通过 e.target 和/或 e.currenttarget 捕获它，但这没有用，我从来没有得到滚动条的引用，所以我不确定用户是否点击了其中一个箭头，或者他是否真的点击了答案选择它。

如何确保在使用 UIScrollbar 时不会触发我的 answerDisplay 类的单击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:28:09.127

检查是一个好的开始`e.target`。`e.currentTarget`

您可能还想检查**事件阶段**：

![事件冒泡](../Images/85d79c7e1eae55ac8aa1a93f76074912.png)

有关事件阶段的更多详细信息，请查看[grapefrukt 的答案](https://stackoverflow.com/questions/348476/flash-event-phases)

来自 answerDisplay 类调度事件的点击应该有 AT_TARGET 阶段，而 UIScrollbar 事件应该有`BUBBLING_PHASE`. 这应该可以帮助您区分两者。此外，您可以将事件侦听器添加到 answerDisplay 类中的 UIScrollbar 以捕获事件，然后通过[stopPropagation()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#stopPropagation%28%29)抑制它。

根据 UIScrollbar 如何在内部使用事件气泡，您可以尝试 stopPropagation() 或 stopImmediatePropagation()。目标是阻止事件从 answerDisplay 冒泡，但不破坏 UIScrollbar 功能。

# asp.net-mvc - ASP.NET MVC - 将变量分配给输入隐藏字段

> ID：11070127
> 
> 赞同：1
> 
> 时间：2012-06-17T09:01:08.370
> 
> 标签：asp.net-mvc, variables, input, hidden, assign

我想尝试为我的 MVC 表单中的输入隐藏字段分配一个变量值。我以为我可以这样做，但变量的值没有被放入隐藏字段。任何想法为什么这是错误的方式？

注意：变量声明之间有一些代码......我只是想让事情变得简单易读。困扰我的特定代码行是：@value = @secondNumber

```
@{
    ViewBag.Title = "Jakub Holovsky - Contact";

    Random randomNumber = new Random();
    int firstNumber = randomNumber.Next(0, 11);
    int secondNumber = randomNumber.Next(0, 11);
    int sumNumber = firstNumber + secondNumber;
}

<div class="divLeftSide">
                        <span>How much is @firstNumber + @secondNumber:</span>
                        @Html.TextBoxFor(m => m.FirstNumber, new { @type = "number", @id = "firstNumber", @class = "HiddenField", @value = @firstNumber })
                        @Html.TextBoxFor(m => m.SecondNumber, new { @type = "number", @id = "secondNumber", @class = "HiddenField", @value = @secondNumber })
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:35:09.210

1) 为您的模型创建一个名为 SomeModel 的类。该类应包含名为 FirstNumber 和 SecondNumber 的属性。

2）添加行

```
@model SomeModel 
```

在你看来。

3) 移动

```
Random randomNumber = new Random();
int firstNumber = randomNumber.Next(0, 11);
int secondNumber = randomNumber.Next(0, 11);
int sumNumber = firstNumber + secondNumber; 
```

进入你的控制器的动作。

4) 在您的控制器的操作中，初始化 SomeModel 名为 model 的新实例并将 FirstNumber 设置为 firstNumber 并将 SecondNumber 设置为 secondNumber

5) 通过调用 return View(model) 将模型传递给您的视图；

6) 从您的视图中删除 @value = @firstNumber 和 @value = @secondNumber。

# vb.net - 在 VB 中实现泛型 IComparer

> ID：11070133
> 
> 赞同：2
> 
> 时间：2012-06-17T09:02:52.073
> 
> 标签：vb.net, generics, icomparer

我正在尝试创建一个实现我自己的类“Stellungen”的通用 IComparer 的类（它转换为位置，例如在国际象棋或跳棋板上）。

这就是我得到的：

```
Private Class comparer(Of Stellung)
    Implements System.Collections.Generic.IComparer(Of Stellung)

    Public Function Compare(x As Stellung, y As Stellung) As Integer Implements System.Collections.Generic.IComparer(Of Stellung).Compare

    End Function

End Class 
```

问题是：在函数内部，我无法访问班级的任何字段。如果我从 x 开始。Intellisense 只会给我 .Equals、.GetHashCode - 你在类型上而不是在实例上获得的方法。Visual Studio 10 也强调了这一点，在函数的定义中，位“x as Stellung”和“y as Stellung”用浅蓝色书写，表示它是一种类型，而不是实际对象。

所以……我该怎么办？？我如何访问我想在课堂上比较的东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:08:22.980

这些字段可能是私有的，这就是您无法访问它们的原因。让你的类实现`IComparable<T>`接口。您可以在比较器类中使用它。
下面是一个通用比较器类的示例，该类比较实现了`IComparable<T>`.

```
Public Class GenericComparer(Of T As IComparable(Of T))
    Inherits Comparer(Of T)

    Public Overrides Function [Compare](ByVal x As T, ByVal y As T) As Integer
        If (Not x Is Nothing) Then
            If (Not y Is Nothing) Then
                Return x.CompareTo(y)
            End If
            Return 1
        End If
        If (Not y Is Nothing) Then
            Return -1
        End If
        Return 0
    End Function

    Public Overrides Function Equals(ByVal obj As Object) As Boolean
        Dim comparer As GenericComparer(Of T) = TryCast(obj,GenericComparer(Of T))
        Return (Not comparer Is Nothing)
    End Function

    Public Overrides Function GetHashCode() As Integer
        Return MyBase.GetType.Name.GetHashCode
    End Function

End Class

public class Stellung
   Implements IComparable(Of Stellung)

   Public Function CompareTo(ByVal value As Stellung) As Integer
       'Here you should be able to access all fields. 
   End Function
End class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-20T10:30:56.107

如果您声明`Private Class comparer(Of Stellung)`，则“Stellung”只是要使用的类型的占位符（如教程中的“T”）。

声明`Private Class comparer`，并`Implements System.Collections.Generic.IComparer(Of Stellung)`告诉编译器您要比较“Stellung”类型的对象，顺便说一句，这使得 Stellung 的属性在编辑器中可见。

# android - 如何找到内部sd卡路径？

> ID：11070135
> 
> 赞同：3
> 
> 时间：2012-06-17T09:03:17.340
> 
> 标签：android

我是android的初学者。如何找到内部sd卡的路径，然后如何找到它们的已用空间和可用空间。请回复您的意见和答案对我很有价值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:06:46.170

`Environment.getExternalStorageDirectory().getAbsolutePath()`给你 SD 卡路径。

要获得外部 SD 卡的可用“可用”空间，请使用以下代码段。

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
double sdAvailSize = (double)stat.getAvailableBlocks()
                   * (double)stat.getBlockSize();
//One binary gigabyte equals 1,073,741,824 bytes.
double gigaAvailable = sdAvailSize / 1073741824; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:38:01.343

> 如何查找内部 SD 卡路径和外部 SD 卡路径

你没有。

此时，从 Android SDK 的角度来看，没有“内部 SD 卡路径”或“外部 SD 卡路径”。有到外部存储的路径，它由`Environment`（例如，`getExternalStorageDirectory()`）上的各种方法返回。这将是设备制造商为此目的指定的任何存储。

没有可靠的方法来确定 Android 设备上任何其他潜在的“SD 卡路径”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T09:06:14.783

查看有关访问 sd 卡的 android 文档：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T12:26:56.303

使用下面的代码，它将为您返回具有内部和外部存储设备的内部目录路径和 sdcard 路径的列表。

```
File dir = new File(Environment.getExternalStorageDirectory().getParent());
            File[] f = dir.listFiles();
            for(File file:f)
        {
            if(file.getName().equals("sdacard0"))//check name of sdcard from  file manager.
            {
                if(file.isDirectory())
                {
                    f = file.listFiles();
                }
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-15T19:40:38.733

There's always `System.getenv(ENV_EXTERNAL_STORAGE)` from `android.os`:

Other Examples from source code:

```
public static File getExternalStorageDirectory() {
    throwIfUserRequired();
    return sCurrentUser.getExternalDirs()[0];
}

/** {@hide} */
public static File getLegacyExternalStorageDirectory() {
    return new File(System.getenv(ENV_EXTERNAL_STORAGE));
}

/** {@hide} */
public static File getLegacyExternalStorageObbDirectory() {
    return buildPath(getLegacyExternalStorageDirectory(), DIR_ANDROID, DIR_OBB);
} 
```

* * *

**Environment.java**

```
private static final String ENV_EXTERNAL_STORAGE = "EXTERNAL_STORAGE";
private static final String ENV_ANDROID_ROOT = "ANDROID_ROOT";
private static final String ENV_ANDROID_DATA = "ANDROID_DATA";
private static final String ENV_ANDROID_EXPAND = "ANDROID_EXPAND";
private static final String ENV_ANDROID_STORAGE = "ANDROID_STORAGE";
private static final String ENV_DOWNLOAD_CACHE = "DOWNLOAD_CACHE";
private static final String ENV_OEM_ROOT = "OEM_ROOT";
private static final String ENV_ODM_ROOT = "ODM_ROOT";
private static final String ENV_VENDOR_ROOT = "VENDOR_ROOT";

/** {@hide} */
public static final String DIR_ANDROID = "Android";
private static final String DIR_DATA = "data";
private static final String DIR_MEDIA = "media";
private static final String DIR_OBB = "obb";
private static final String DIR_FILES = "files";
private static final String DIR_CACHE = "cache";

/** {@hide} */
@Deprecated
public static final String DIRECTORY_ANDROID = DIR_ANDROID;

private static final File DIR_ANDROID_ROOT = getDirectory(ENV_ANDROID_ROOT, "/system");
private static final File DIR_ANDROID_DATA = getDirectory(ENV_ANDROID_DATA, "/data");
private static final File DIR_ANDROID_EXPAND = getDirectory(ENV_ANDROID_EXPAND, "/mnt/expand");
private static final File DIR_ANDROID_STORAGE = getDirectory(ENV_ANDROID_STORAGE, "/storage");
private static final File DIR_DOWNLOAD_CACHE = getDirectory(ENV_DOWNLOAD_CACHE, "/cache");
private static final File DIR_OEM_ROOT = getDirectory(ENV_OEM_ROOT, "/oem");
private static final File DIR_ODM_ROOT = getDirectory(ENV_ODM_ROOT, "/odm");
private static final File DIR_VENDOR_ROOT = getDirectory(ENV_VENDOR_ROOT, "/vendor"); 
```

* * *

**Source**

[sources\android-25\android\os\Environment.java](https://chromium.googlesource.com/android_tools/+/refs/heads/master/sdk/sources/android-25/android/os/Environment.java)

# flash - 从浏览器录制视频并将其存储以供以后查看

> ID：11070136
> 
> 赞同：1
> 
> 时间：2012-06-17T09:03:23.463
> 
> 标签：flash, video, video-capture, opentok, tokbox

我正在寻找使用闪存从浏览器录制和存储视频并播放以供以后使用的解决方案。

我检查了以下内容：

**TokBox**（存档不是免费的）

我想要一些建议来完成以下任务。它可以是开源的或商业的（但首选开源或免费服务）。

1.  在一个独特的 url 中，让用户开始使用 Flash 和他们的网络摄像头录制视频
2.  录制完成后，视频必须存储在服务器上（最好是 Amazon S3）
3.  为特定用户再次播放视频（无需下载文件）

有什么建议可以实现目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:26:22.060

我认为[RED5](http://www.red5.org/)服务器可能是你最好的选择。它就像一个免费的开源 Flash 媒体服务器，但需要您拥有一个（支持 JAVA 的）服务器。如果我没记错的话，下载还附带了一个视频录制和流媒体示例，[网上](https://www.google.nl/#hl=nl&sclient=psy-ab&q=red5+recording+video&oq=red5+recording+video&gs_l=hp.3..0i30j0i8i30l3.1097.3862.0.4100.22.16.1.5.5.0.145.1123.14j2.16.0...0.0...1c.jrg9sOj7Qdc&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=9e9d98b0df353a9e&biw=1118&bih=660)有很多东西可以找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:40:57.937

我希望这可以帮助您使用 Flash 从浏览器录制视频。如果您有任何疑问，也可以浏览这些 URL，它可能会对您有所帮助。虽然我没有在 Flash 中处理任何视频项目，但我无法给你一个明确的解决方案。但我和我的朋友一起为你尝试过，我希望它对你找到正确的解决方案有任何帮助。

```
http://www.actionscript.org/resources/articles/615/2/Getting-started-with-red5-server/Page2.html
http://cookbooks.adobe.com/post_How_can_I_record_web_cam_video_via_a_browser_-16540.html

var video:Video;
02  var camera:Camera = Camera.getCamera();
03   
04      camera.addEventListener(ActivityEvent.ACTIVITY, active);
05      video = new Video();
06      video.attachCamera(camera);
07       
08  function active(event:Event):void
09  {
10      addChild(video);
11      camera.removeEventListener(ActivityEvent.ACTIVITY, active);
12  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:56:57.957

不幸的是，就归档而言，TokBox 既不是开源的也不是“免费”的，但好消息是它们的归档功能处于 BETA 阶段，他们目前不收取任何归档费用（在这段时间内免费）。与其他处于测试阶段的产品不同，TokBox 的存档已存在数月之久，并且与任何付费产品一样完善。你应该试试看。

每个记录（存档）都作为存档 ID 记录并存储在 TokBox 的服务器上。根据您的规格，用户开始使用唯一的 url 进行录制。您将需要自己的数据库，将您的唯一网址映射到 TokBox 的存档 ID。

由于您希望将视频存档存储在您自己的服务器上，您可以使用 TokBox 的 API 来检索视频下载 URL 并将视频下载到您自己的服务器。

一年前，我使用归档 API 并写了一篇关于它的教程，希望你觉得它有用： [http ://www.tokbox.com/blog/how-i-built-minute-grams-3-minute-tutorial /](http://www.tokbox.com/blog/how-i-built-minute-grams-3-minute-tutorial/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T00:19:11.240

听起来您想要一个 Flash Media Server 应用程序。有了它，您可以在服务器上记录和存储用户网络摄像头，然后再将其流式传输回来。您可以添加安全性以确保只有登录用户才能流式传输文件。

虽然我不确定 Amazon S3 存储，但我知道您可以使用预配置了最新闪存媒体服务器的 Amazon EC2 服务。费用未知。如果您为自己的服务器购买它，它的范围从免费（对于 10 个以下的同时用户）到 4,000 美元以上的全部功能。

如果您下载免费的开发者版本，它会附带大量预构建的示例应用程序。另外，这里有很多在线教程可以帮助解决代码方面的问题，因为它是一个商业产品。最新版本还可以流式传输到 iOS/HTML5

[http://www.adobe.com/products/amazon-web-services.html](http://www.adobe.com/products/amazon-web-services.html)

# python - 烧瓶如何在某些任务（如电子邮件发送）尚未完成之前呈现页面

> ID：11070137
> 
> 赞同：1
> 
> 时间：2012-06-17T09:03:29.053
> 
> 标签：python, flask, registration, email-validation

在某些任务（如电子邮件发送）尚未完成之前，flask 如何渲染页面？

# 问题

在我们的例子中，当用户向服务器提交注册信息时，服务器会先发送一封认证邮件，然后呈现一个成功页面。但是邮件发送总是需要3~5秒，也就是说他提交注册信息后至少需要3秒才能得到回复。

# 我们所做的

## 1\. 信号

我们尝试发送一个信号并触发一个邮件发送功能来做这件事：

```
if approved:
    # ...

    send_activation_signal.send(email)

    login_user(u)
    return redirect(url_for('register_success')) 
```

### 结果

一切都很好，除了在 r​​egister_success 页面呈现之前至少需要 3 秒。

## 2\. 分叉一个线程

分叉一个线程以完成电子邮件发送

```
t = threading.Thread(target = send_activation, args = (email, username, email_confirm_code, ))
t.start() 
```

### 结果

但看起来请求上下文没有以正确的方式处理。

```
> Exception in thread Thread-2: Traceback (most recent call last):  
> File
> "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py",
> line 552, in __bootstrap_inner
>     self.run()   File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py",
> line 505, in run
>     self.__target(*self.__args, **self.__kwargs)   File "/Users/arthasshih/flask/happyvs/main_app/views/user.py", line 267, in
> send_activation
>     app.logger.debug("sending #############")   File "/Users/arthasshih/virtual_evns/normal/lib/python2.7/site-packages/Werkzeug-0.8.3-py2.7.egg/werkzeug/local.py",
> line 336, in __getattr__
>     return getattr(self._get_current_object(), name)   File "/Users/arthasshih/virtual_evns/normal/lib/python2.7/site-packages/Werkzeug-0.8.3-py2.7.egg/werkzeug/local.py",
> line 295, in _get_current_object
>     return self.__local()   File "/Users/arthasshih/virtual_evns/normal/lib/python2.7/site-packages/Flask-0.8-py2.7.egg/flask/globals.py",
> line 19, in _lookup_object
>     raise RuntimeError('working outside of request context') RuntimeError: working outside of request context 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T17:58:27.890

在烧瓶中设置电子邮件发送时，我也遇到了这个问题，但问题不是烧瓶。如果您希望烧瓶在完成发送邮件任务之前返回，则此过程必须异步运行，但它在这里同步运行，所以这就是等待的原因。

解决方案是使用[Celery: Distributed Task Queue](http://celeryproject.org/)。这段文字来自他们的主页：

> 它是一个基于分布式消息传递的异步任务队列/作业队列。任务可以异步执行（在后台）或同步执行（等待就绪）。

还有一个名为[Flask-Celery](https://github.com/ask/flask-celery/)的 Flask 扩展，它可以轻松地将 celery 与烧瓶集成。

简单地将邮件发送任务添加到 celery 的异步任务队列和渲染页面。如果任务失败，您必须确保 celery 生成一些错误日志，否则无论是否发送邮件，您都不会。

# c - 如何使用缓冲区溢出执行“printf 字符串攻击”？

> ID：11070138
> 
> 赞同：4
> 
> 时间：2012-06-17T09:04:02.187
> 
> 标签：c, buffer-overflow

编码：

```
void doit()
{       
      system("/bin/sh");
      exit(0); 
}       

int main(int argc, char **argv)
{       
    static int the_var;
    char buf[512];

    the_var = 20;

    strncpy (buf, argv[1], sizeof(buf) - 1);

    printf (buf);

    if (the_var != 20)
    {
            doit();
    } else {
            printf ("\nthe_var @ 0x%08x = %d 0x%08x\n", &the_var, the_var, the_var);
    }
} 
```

程序以粘性位（所有者 uid 0）运行，我所要做的就是破解它并`/bin/sh`以 root 身份运行。

我知道如何用`fe`. 缓冲区溢出和`strcpy`（shellcode），但不要在这个上使用“格式字符串攻击”。

如您所见，有一个`var the_var`，如果它不等于 50 则 shell 正在运行（也许尝试以某种方式更改它，一些肮脏的魔法？）。无论如何，有一个`printf (buf)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:06:14.877

你控制`buf`。传递`%x`格式字符串以转储堆栈并`%n`覆盖堆栈中的对象`the_var`。如果对象`the_var`被覆盖，则从您的程序`doit`中调用并`/bin/sh`执行该函数。

# android - 如何为 Amazon IAP 设置 ProGuard？

> ID：11070143
> 
> 赞同：18
> 
> 时间：2012-06-17T09:04:45.977
> 
> 标签：android, amazon, proguard, in-app-purchase

我正在尝试设置一个集成了 Amazon IAP 的基本 ProGuard。但是，当我尝试导出 APK 时，出现以下错误：

```
[2012-06-17 10:59:44 - sc] Proguard returned with error code 1\. See console
[2012-06-17 10:59:44 - sc] Unexpected error while performing partial evaluation:
[2012-06-17 10:59:44 - sc]   Class       = [com/amazon/inapp/purchasing/KiwiResponseHandler$PurchaseResponseHandlerRunnable]
[2012-06-17 10:59:44 - sc]   Method      = [run()V]
[2012-06-17 10:59:44 - sc]   Exception   = [java.lang.IllegalArgumentException] (Can't find common super class of [java/lang/String] (with 4 known super classes) and [com/amazon/inapp/purchasing/KiwiPurchaseResponseCommandTask] (with 1 known super classes))
[2012-06-17 10:59:44 - sc] java.lang.IllegalArgumentException: Can't find common super class of [java/lang/String] (with 4 known super classes) and [com/amazon/inapp/purchasing/KiwiPurchaseResponseCommandTask] (with 1 known super classes)
[2012-06-17 10:59:44 - sc]  at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:344)
[2012-06-17 10:59:44 - sc]  at proguard.evaluation.value.IdentifiedReferenceValue.generalize(IdentifiedReferenceValue.java:65)
[2012-06-17 10:59:44 - sc]  at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:481)
... 
```

我有默认的 ProGuard 配置文件，并且我已经添加了：

```
 -dontwarn com.amazon.**
 -keep class com.amazon.** {*;}
 -keepattributes *Annotation* 
```

行。任何建议出了什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-30T09:17:51.630

亚马逊推荐的配置有一些可疑的东西。

1）`-dontwarn`隐藏了一个更深层次的潜在问题，其中一些亚马逊特定库不存在，但被引用，以便 proguard 将尝试一些可能导致上述堆栈跟踪的有线优化。

2)`-dontoptimize`正在禁用所有优化，这是绝对错误的，因为它很可能只是导致此问题的一个特定优化，并且 proguard 优化正在从您的应用程序及其库中删除大量无效和未使用的代码，因此它缩小了总数dex 大小。

我想修复 1) 是真正的解决方案。这最终可以通过从设备中提取 Amazon 的系统库并在构建
应用程序时使它们存在（作为提供的库）来实现。

对于 2）您可以尝试：

```
-dontwarn com.amazon.**
-keep class com.amazon.** {
    *;
}

-optimizations !code/allocation/variable 
```

这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-09T14:39:21.100

根据[Amazon 的 SDK Docs](https://developer.amazon.com/sdk/in-app-purchasing/sample-code/code-obfuscation.html)，您应该包括以下几行：

**防止混淆应用内购买 API**

将 In-App Purchasing API 合并到您的库中时，您需要指定要“保留”而不是混淆的类。在 proguard.cfg 文件中的任意位置添加以下行。

```
-dontwarn com.amazon.**
-keep class com.amazon.** {*;}
-keepattributes *Annotation* 
```

此外，您还需要跳过 Proguard 的优化步骤。

```
-dontoptimize 
```

注意：确保删除任何其他处理优化的标志，或任何可能与上述设置冲突的标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T05:32:27.757

此外，您还需要将优化传递次数降低到 1，或者跳过 proguard 的优化步骤。

**-优化通过 1**

或者

**-不要优化**

# jquery - 我自己的站点的 Access-Control-Allow-Origin 不允许 ajax Origin url

> ID：11070145
> 
> 赞同：1
> 
> 时间：2012-06-17T09:04:56.003
> 
> 标签：jquery

我有一个包含 ajax 脚本的全局 js 文件。它包含在每个页眉中。

```
<script src="http://www.mydomain.com/js/global.js" type="text/javascript"></script> 
```

然后在 global.js 中，ajax 脚本为：

```
$('#send_ajax').click(function(){
   $.ajax({
      type: 'post',
      url: 'http://www.mydomain.com/ajax-process',
      data: data + '=' + encodeURI(data),
      success: function(data){
          $('#result').html();
      }
   });
}); 
```

但现在我遇到了一些奇怪的问题。如果有人像这样打开我的页面`http://www.mydomain.com/somepage`，脚本可以运行良好，但是有人像这样打开我的页面`http://mydomain.com`，它会显示 `http://www.mydomain.com/ajax-process. Origin http://mydomain.com is not allowed by Access-Control-Allow-Origin.`

为什么这些都是我的网站，有`www`没有`www`都会遇到这个问题？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:17:40.523

单一来源策略说您只能对页面所在的服务器进行 Ajax 调用（脚本的加载位置实际上并不重要）

所有协议（http 或 https）、域名和端口必须完全匹配才能允许请求。www.example.com 与 example.com 相同，没有例外。

在您的情况下，您可以按照适当的粗略顺序做三件事：

*   不要使用绝对网址 - 如果您将 Ajax 请求发送到“/ajax-process”。这将向页面来自的服务器发出请求
*   使用重定向，以便人们只能访问 www.example.com
*   实施跨域访问控制：这涉及发送描述允许哪些域向您的应用发出 http 请求的 http 标头。这对你来说几乎肯定是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:27:58.323

这个怎么样：

```
var url = location.protocol + '://' + location.host + '/ajax-process' 
```

# cocos2d-iphone - 访问 b2Fixture

> ID：11070146
> 
> 赞同：0
> 
> 时间：2012-06-17T09:05:08.230
> 
> 标签：cocos2d-iphone, box2d-iphone

我有两个精灵类，并且想访问 HelloWorldLayer.mm 中精灵的 b2Fixture。访问这些属性的最合适方法是什么？我计划在接触时在它们之间创建一个焊接接头。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:03:01.210

在创建实体时，您需要在实体上创建一个或多个夹具。然后你可以使用

```
 b2Body *body = world->GetBodyList();
 b2Fixture *fixture = body->GetFixtureList(); 
```

您可能还想知道您正在处理的主体类型，您可以使用该`body->GetUserData()`方法。有关详细信息，请参阅手册。[http://www.box2d.org/manual.html#_Toc258082972](http://www.box2d.org/manual.html#_Toc258082972)

# .net - 不能让 IL 工作。“可能会破坏运行时”错误

> ID：11070149
> 
> 赞同：0
> 
> 时间：2012-06-17T09:05:38.413
> 
> 标签：.net, c#-4.0, cil

我正在为我关于 SO 的另一个问题尝试一些测试代码。

应该复制的代码：

```
(a, z) => a * b - Math.Log(z * b); 
```

编码：

```
 static Func<int, int, double> IL_EmbedConst(int b)
    {
        var method = new DynamicMethod("EmbedConstIL", typeof(double), new[] { typeof(int), typeof(int) });

        var log = typeof(Math).GetMethod("Log", new Type[] { typeof(double) });

        var il = method.GetILGenerator();

        il.Emit(OpCodes.Ldarg_0);
        il.Emit(OpCodes.Ldc_I4, b);
        il.Emit(OpCodes.Mul);
        il.Emit(OpCodes.Conv_R8, b);

        il.Emit(OpCodes.Ldarg_1);
        il.Emit(OpCodes.Ldc_I4, b);
        il.Emit(OpCodes.Mul);
        il.Emit(OpCodes.Conv_R8, b);

        il.Emit(OpCodes.Call, log);

        il.Emit(OpCodes.Sub);

        il.Emit(OpCodes.Ret);

        return (Func<int, int, double>)method.CreateDelegate(typeof(Func<int, int, double>));
    } 
```

使用：

```
 var mul1 = IL_EmbedConst(5);
        double res = mul1(4,6); 
```

抛出：

```
Operation could destabilize the runtime. 
```

看不出有什么问题（可能是因为我上次使用类似 asm 的语言是 25 年前）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:31:25.637

问题是您转换到的两个地方`double`：

```
il.Emit(OpCodes.Conv_R8, b); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.conv_r8.aspx)：

> **OpCodes.Conv_R8 字段** 将评估堆栈顶部的值转换为 float64。

该操作码不带任何参数。相反，只需使用：

```
il.Emit(OpCodes.Conv_R8); 
```

代码运行良好并产生 16.5988026183378 作为输出。

# javascript - 从服务器端c#构建html

> ID：11070154
> 
> 赞同：0
> 
> 时间：2012-06-17T09:05:53.843
> 
> 标签：javascript, html, c#-2.0, server-side

我正在服务器端构建 html。代码示例如下。我的意图是发出这样的html

```
<a href="" onclick="doSomething('Test Value');">Test</a> 
```

我的代码示例

```
string html="";
string param="Test Value";
html+="<a href='' onclick='"+"doSomething('"+param+"')'>Test</a>" 
```

我究竟做错了什么？结果 html 很奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:09:13.103

试试这个：

```
string html="";
string param="Test Value";
html+="<a href=\"#\" onclick=\""+"doSomething('"+param+"')\">Test</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:16:29.510

你的最终结果是`<a href='' onclick='doSomething('Test Value')'>Test</a>`

onclick 部分是给您带来问题的部分。如果您尝试调用 js 函数，则不能使用 ' 将值括起来（IE：在您的情况下为 doSomething）

试试这个：

```
 string html=""; 
        string param="Test Value";
        html += "<a href=\"\" onclick=\"" + "doSomething('" + param + "')\">Test</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:19:00.023

你想要这样的东西。

`html+=<a href="javascript:doSomething('"+param+"')">Test</a>;`

你的功能是：

```
function doSomething(param) {
alert("Inside anchor tag.");//For Test
} 
```

注意：但它取决于浏览器。

# sql - SQL Server：列到行

> ID：11070158
> 
> 赞同：1
> 
> 时间：2012-06-17T09:06:38.903
> 
> 标签：sql, sql-server

我有一个`table1`包含 2 列的表 ( )`toypattern`和`additionalcolor`：

**表格1**

```
toypattern  additionalcolor
FL38        orange
FL38        yellow
LF66        grey
LF66        black 
```

现在我需要编写一个查询来显示`toypattern`列、`1st color`列和`2nd color`列。我需要显示多达 5 个附加颜色选项

期望的输出：

```
toypattern  1st color   2nd color     3rd color   4th color   5th color
  FL38        orange      yellow
  LF66        grey        black 
```

如何编写这样的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:17:24.507

好的。不确定这个问题是否与这个问题有关（http://stackoverflow.com/questions/11070509/sql-query-issue-on-left-join）：

但这里有一个可能是您所追求的解决方案 - 采用了 03Usr 的一些代码（特别是 row_number 并添加了旋转）：

```
;with cte as
(select toypattern, additionalcolor,
  rowno =  row_number() over(partition by toypattern order by additionalcolor)
from Table1)
SELECT
  ToyPattern
  --, ToyName
  , 'color 1' = [1]
  , 'color 2' = [2]
  , 'color 3' = [3]
  , 'color 4' = [4]
  , 'color 5' = [5]
FROM (  
  SELECT
  ToyPattern
  --, ToyName
  , rowno
  , additionalcolor
  FROM
    cte
) AS tac PIVOT (
  MAX (additionalcolor) FOR rowno in ([1],[2],[3],[4],[5])
) AS PivotTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:33:22.237

试试这些：

```
;with cte as
(select toypattern, additionalcolor,
  row_number() over(partition by toypattern order by additionalcolor) As rn
from Table1)
select toypattern, 
  max(case when rn = 1 then additionalcolor end) as additionalcolor1,
  max(case when rn = 2 then additionalcolor end) as additionalcolor2
from cte
group by toypattern 
```

这将返回：

```
toypattern  additionalcolor1    additionalcolor2
FL38        Orange              Yellow
LF66        Black               Grey 
```

这样做的缺点是您需要为新的附加颜色添加新的 MAX(...) 行。

////

另一种解决方案是将其他颜色作为 CSV 获取：

```
SELECT DISTINCT T1.toypattern,
STUFF((SELECT TOP 100 PERCENT ',' + s2.additionalcolor FROM Table1 AS s2 WHERE s2.toypattern = T1.toypattern ORDER BY ',' + s2.additionalcolor FOR XML PATH('')), 1, 1, '') AS Colours
FROM Table1 AS T1
ORDER BY T1.toypattern 
```

这将返回：

```
toypattern  Colours
FL38    Orange,Yellow
LF66    Black,Grey 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:51:21.717

您使用什么 Sql Server 版本？（我无法添加评论）像上面发布的那样的 Pivot 将是最好的，但如果您使用的是旧 Sql Server 版本（如 2000），您可以使用 CURSOR 执行此操作：

```
drop table #temp
create table #temp
(
   toypattern varchar(20),
   additionalcolor1 varchar(20),
   additionalcolor2 varchar(20),
   additionalcolor3 varchar(20),
   additionalcolor4 varchar(20),
   additionalcolor5 varchar(20)
)

declare @toypattern as varchar(20)
declare @additionalcolor as varchar(20)     
declare @Counter integer 
declare @StrSql varchar(200)    
declare @LastToyPattern as varchar(20)

set @LastToyPattern = ''

declare MyCursor cursor for  select toypattern, additionalcolor from table1 order by toypattern
open MyCursor
fetch next from MyCursor into @toypattern, @additionalcolor 

   while @@fetch_status = 0     
   begin
      if (@LastToyPattern <> @toypattern)
      begin
         if (@LastToyPattern <> '') 
         begin
            set @StrSql = @StrSql + replicate(',null', 5 - @Counter)    
            exec(@StrSql)
         end
         set @Counter = 0
         set @StrSql = 'insert into #temp select ''' + @toypattern + ''''
      end
      set @StrSql = @StrSql + ', ''' + @additionalcolor + ''''  
      set @Counter = @Counter + 1
      set @LastToyPattern = @toypattern
      fetch next from MyCursor into @toypattern, @additionalcolor
   end
set @StrSql = @StrSql + replicate(',null', 5 - @Counter)
exec(@StrSql)
close MyCursor
deallocate MyCursor
select * from #temp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T09:26:54.140

```
SELECT 
   first.toypattern,
   first.additionalColor,
   second.additionalColor
FROM
   Table1 first
   INNER JOIN Table2 second ON first.toypattern = second.toypattern
WHERE
   first.additionalColor < second.additionalColor 
```

问题是，如果每个图案有两种以上的颜色，你会得到几个匹配。

编辑：当搜索超过 2 种颜色时，这并不能真正得到人们可能希望的结果。但是，鉴于此答案附带的评论，我不会删除它。

# c# - 如何从设计器中自动删除 eventHandler

> ID：11070159
> 
> 赞同：0
> 
> 时间：2012-06-17T09:06:41.833
> 
> 标签：c#, winforms, visual-studio-2010

当我创建一个事件处理程序（例如按钮上的 dblClick）时，VS 在 Form1.Designer 文件中创建相关的代码行。
当我删除该按钮时 - 代码保留在设计器中，在调试期间给我一个错误。
有人可以解释这种行为的原因是什么，以及如何自动删除这些行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:15:59.340

重新打开它，它应该会消失，如果不检查agian，你可能没有删除按钮

# android - WhatsApp - 编写克隆（iphone、android、wp7）

> ID：11070161
> 
> 赞同：2
> 
> 时间：2012-06-17T09:07:23.837
> 
> 标签：android, iphone, windows-phone-7, udp, instant-messaging

我正在尝试创建一个与我想的whatsapp 非常相似的即时消息应用程序。我可以使用的资源是 C# 中的服务器开发（REST 服务、专用服务器应用程序等）

并且目前一个使用eclipse的android开发平台（iphone，wp7以后会跟进）。我以前在 Android 上做过一些开发，但我不知道从哪里开始这样的应用程序。

我的猜测是它会与 UDP/TCP 或类似的一起工作吗？我目前有一个用于 asp.net 网站的共享服务器，但我认为这并不理想，我可以在服务器上设置一个 Web 服务并让客户端在那里发布他的消息，但这意味着接收者会必须每 5 分钟左右轮询一次（拉动） - 所以我想这不是实时的

我需要在这里使用 UDP 吗？

而且我认为像 Iphone、Android 和 WP7 这样的平台通过 UDP 发送消息不会有任何问题——如果它是这样做的。

我期待任何帮助或指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:01:27.800

正如所有其他评论已经建议您应该使用 XMPP - 您可以在[此处](http://xmpp.org/xmpp-software/libraries/)找到大量可用的库。

最好的祝愿，蒂姆

# linux - 在多线程程序中将手表添加到 Inotify

> ID：11070165
> 
> 赞同：6
> 
> 时间：2012-06-17T09:08:00.093
> 
> 标签：linux, multithreading, inotify

我想使用 inotify 来监视我的 C 程序中的一些文件。

我想知道让一个线程从 inotify 描述符（由返回的那个`inotify_init`）读取是否安全，从而阻塞直到某个事件发生，在此等待期间，有可能`inotify_add_watch`在另一个线程等待期间使用添加新文件来观察队列.

我是否需要同步这些操作，或者这样做是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:33:51.337

没有确切的答案，但我从经验中知道，如果不触发您正在使用 inotify 的线程中的 read()，您甚至无法在另一个线程中打开文件。我记得读过你需要使用 inotify_init1() 和 IN_CLOEXEC 标志来允许其他线程中的文件 io。我不确定这是否意味着您实际上可以同时在多个线程中使用 inotify。

# php - 如何在 textarea 中获取格式化数据（通过 wmd 编辑器）

> ID：11070166
> 
> 赞同：1
> 
> 时间：2012-06-17T09:08:13.677
> 
> 标签：php, wmd-editor, wmd-markdown

我想显示数据或关于我们像 stackoverflow 一样编辑所以我使用 wmd 编辑器我还使用 markdown.php 进行降价，它工作正常。但是当我在文本区域中获取数据以显示在 wmd 编辑器中时，我正在做

```
 <textarea id="wmd-input"  class="wmd-panel" name="aboutme" value=""><?php echo $users->aboutme();?></textarea> 
```

现在的问题是我得到的数据表单`$users->aboutme()`是带有html标签的

![在此处输入图像描述](../Images/9e896a3d2224360569a4e70f8733c06d.png)

在这里，我想知道如何删除 html 标记并在我在 textarea 之外显示时显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:29:59.960

试试这个

```
<?php echo htmlentities($users->aboutme());?> 
```

# silverlight - 使用资源字典中定义的控件

> ID：11070167
> 
> 赞同：0
> 
> 时间：2012-06-17T09:08:19.200
> 
> 标签：silverlight, xaml, resourcedictionary

我正在创建一个 Silverlight 项目，其中有一个 silverlight 页面。该页面由一个控件组成，该控件需要在运行时根据一定的逻辑进行显示/隐藏，因此不能将其置于任何容器控件之下。为了解决这个问题，我将控件放在页面的资源字典中并指定了它的 x:key。这有两个原因：
1\. 我之前指定控件在运行时通过逻辑显示/隐藏
2\. 控件不支持 XAML 样式

现在我有另一个需要相同控件的页面。所以我想通过资源字典放置控件，而不是通过控件标记创建

那么任何人都可以告诉我如何放置我在页面资源字典中定义的控件。我可以将此控件移动到应用程序的全局资源字典。这对我来说不是问题。

任何帮助将不胜感激。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:42:52.097

您可以创建一个`DataTemplate`并将控件放入其中，然后将该数据模板加载为您在页面中拥有的内容控件的内容模板。

但是，它不应该那样工作。是什么阻止您将控件放置在布局中并根据您的逻辑控制其可见性？

# c# - MasterPage Page_Load 在 Grid_ItemCommand 之前命中

> ID：11070172
> 
> 赞同：0
> 
> 时间：2012-06-17T09:09:04.037
> 
> 标签：c#, asp.net, .net, master-pages, itemcommand

我正在使用会话对象来存储基于用户操作的成功/错误消息。

在每次回发时，都会在 ItemCommend 上设置消息，并在母版页的 Page_Load 上检索该消息。检索到后，该消息将从会话中删除。

问题是母版页的 Page_Load 在 ItemCommand 被调用之前被调用，因此消息直到下一次刷新或回发时才会显示。

这种情况一般如何处理？还有其他一些我们可以编码的事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:21:31.227

这是 aspx 和母版页的正常行为。首先，在该母版页的页面加载被触发之后，内容页面的页面加载被触发，然后是所有其他点击等。

您可以使用 PageLoad Complete 事件来解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:13:27.407

这是**正常**行为。显示您的信息`itemcommand`或`Page_prerender`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:46:24.820

在母版页的代码后面创建一个公共方法，如下所示：

```
 public void Set_Value(String SessionValue)
   {
      //your code here
   } 
```

在内容页面的 aspx 文件中，使用以下代码行：

```
 <%@ MasterType VirtualPath="~/MasterPage.master" %> 
```

现在在您的内容页面的代码后面，您可以轻松地在您的任何控件的项目事件中调用母版页的方法。在母版页的方法中，您可以编写所需的代码来更新和显示值。

在内容页面上调用母版页的方法如下：

```
 this.Master.Set_Value(Session["abc"].ToString()); 
```

# linux - 标记两个文件中的差异

> ID：11070174
> 
> 赞同：1
> 
> 时间：2012-06-17T09:10:50.417
> 
> 标签：linux, perl, bash, text

我知道比较 2 个文件是一个典型的问题，关于这个问题有很多讨论。但是在处理文本文件时我遇到了一个完全不同的问题：我有两个文本文件，它们的行数可能不同。现在我想比较两个文件并找到不同的行。之后，我想标记两个文件中的所有差异。例如这里是我的文件的内容：

文件 1.txt：

```
This is the first line.
This line is just appeared in File1.txt.
you can see this line in both files.
this line is also appeared in both files.
this line and,
this one are mereged in File2.txt. 
```

文件2.txt：

```
This is the first line.
you can see this line in both files.
this line is also appeared in both files.
this line and, this one are mereged in File2.txt. 
```

处理后我希望这两个文件都是这样的：

文件 1.txt：

```
This is the first line.
<Diff>This line is just appeared in File1.txt.</Diff>
you can see this line in both files.
this line is also appeared in both files.
<Diff>this line and,</Diff>
<Diff>this one are merged in File2.txt.</Diff> 
```

文件2.txt：

```
This is the first line.
<Diff></Diff>
you can see this line in both files.
this line is also appeared in both files.
<Diff>this line and, this one are mereged in File2.txt.</Diff>
<Diff></Diff> 
```

我怎样才能做到这一点？我知道**diff**之类的一些工具可以帮助我，但是我怎样才能将它们的结果转换为这种格式呢？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T20:16:35.827

如果您`diff`从 GNU diffutils 使用，您`--old-line-format`可以`--new-line-format`尝试`diff`.

```
diff --old-line-format "<Diff></Diff>%c'\012'" \
     --new-line-format "<Diff>%l</Diff>%c'\012'" \
     File1.txt File2.txt > NewFile1.txt

diff --old-line-format "<Diff>%l</Diff>%c'\012'" \
     --new-line-format "<Diff></Diff>%c'\012'" \
     File1.txt File2.txt > NewFile2.txt 
```

有关详细信息，请参阅手册页；搜索“LTYPE-line-format”和“GTYPE-group-format”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T12:06:42.677

您可以使用算法::差异。这是一个几乎像您想要的那样产生输出的示例，也许您可​​以对其进行调整以获得您想要的确切输出：

```
use Algorithm::Diff;
my $diff = Algorithm::Diff->new( \@seq1, \@seq2 );

my @out1;
my @out2;

while(  $diff->Next()  ) {
    if ($diff->Same) {
        push @out1, $diff->Items(1);
        push @out2, $diff->Items(2);
    }
    elsif (not $diff->Items(2) ) {
        for ($diff->Items(1)) {
            chomp;
            push @out1, "<Diff>$_</Diff>\n";
        }
        push @out2, "<Diff></Diff>\n";
    }
    elsif (not $diff->Items(1)) {
        for ($diff->Items(2)) {
            chomp;
            push @out2, "<Diff>$_</Diff>\n";
        }
        push @out1, "<Diff></Diff>\n";
    }
    else {
        for ($diff->Items(1)) {
            chomp;
            push @out1, "<Diff>$_</Diff>\n";
        }
        for ($diff->Items(2)) {
            chomp;
            push @out2, "<Diff>$_</Diff>\n";
        }
    }
} 
```

输出：

```
@out1:
This is the first line.
<Diff>This line is just appeared in File1.txt.</Diff>
you can see this line in both files.
this line is also appeared in both files.
<Diff>this line and,</Diff>
<Diff>this one are mereged in File2.txt.</Diff>

@out2:
This is the first line.
<Diff></Diff>
you can see this line in both files.
this line is also appeared in both files.
<Diff>this line and, this one are mereged in File2.txt.</Diff> 
```

# afnetworking - 如何使用 afnetworking 取消网络请求

> ID：11070175
> 
> 赞同：16
> 
> 时间：2012-06-17T09:11:02.757
> 
> 标签：afnetworking

在我使用 AFNetworking 进行网络请求之前，有没有办法取消所有网络请求（由另一种方法启动的请求）我尝试如下但不起作用：

```
- (void)sendRequest:(NSUInteger)page{

NSURL *aUrl = [NSURL URLWithString:@"http://www.abc.com/"];
AFHTTPClient *httpClientToCancel = [[AFHTTPClient alloc] initWithBaseURL:aUrl];
[httpClientToCancel cancelAllHTTPOperationsWithMethod:@"POST" path:@"product/like"];
[httpClientToCancel release];

... start a new request here ..... 
```

但不行。我只想在开始新请求之前取消所有请求（至少是我上面写的请求）。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-18T01:33:14.673

`[[httpClient operationQueue] cancelAllOperations];`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T11:10:51.693

不要创建新`AFHTTPClient`实例。

尝试`"[self cancelAllHTTPOperationsWithMethod:@"POST" path:@"product/like"];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-23T07:23:45.637

其他两个答案都是正确的。不要创建新的 AFHTTPRequestOperationManager 实例

```
 @interface OperateCustomerView () <WYPopoverControllerDelegate>{

        AFHTTPRequestOperationManager *manager;// = [AFHTTPRequestOperationManager manager];
    }
- (void)viewDidLoad {
    [super viewDidLoad];
    manager = [AFHTTPRequestOperationManager manager]; 
```

# java - Java 应用程序的网络许可控制

> ID：11070177
> 
> 赞同：0
> 
> 时间：2012-06-17T09:11:09.547
> 
> 标签：java

我的任务是为 Java 应用程序提供某种形式的网络许可控制。该应用程序将存储在网络驱动器上并从客户端计算机运行。基本思想是，它将能够计算出它同时运行了多少次，并防止第 N+1 个用户运行该软件，其中 N 是客户购买的并发许可证的数量。

这对 Java 应用程序有可能吗？我实现了一个“解决方案”，它依赖于应用程序运行实例之间的多播 UDP 通信，但这不起作用，因为在大多数网络上，这种通信被安全措施阻止了。

有没有更好的办法？我什至不介意它是否需要 JNI/JNA。

注意 该解决方案不必那么复杂或高度安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:18:30.520

我建议您使用现有的商业许可证管理产品，例如 FlexLM。您是否会通过实施自制替代方案来节省任何资金是值得怀疑的。

* * *

> 注意 该解决方案不必那么复杂或高度安全。

如果它不安全，那有什么意义呢？

（您可能已经知道，不可能构建一个无法以某种方式解决或禁用的许可证系统。而且许可证管理对您的客户来说是一个痛苦的背后......实际上是您自己，因为额外的客户你必须提供支持。然后是你需要混淆你的代码的问题，这会给你的客户带来额外的烦恼并给你带来支持痛苦。）

# ios5 - UItextview透明色IOS

> ID：11070181
> 
> 赞同：9
> 
> 时间：2012-06-17T09:11:49.857
> 
> 标签：ios5, uitextview, transparent

我想将我的 UItextview 的颜色设置为透明但不完全透明。我想要一点点灰色或黑色的背景，就像图片一样

![在此处输入图像描述](../Images/fa1cfd6647155d06c99fc897fec1f38b.png)

我现在正在使用此代码

```
 _textView.backgroundColor = [UIColor clearColor]; 
```

我怎样才能使它像上图一样透明？任何示例代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T10:46:04.383

你应该使用这样的东西：

```
_textView.backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.5]; 
```

其中 alpha - 透明参数（例如 50%）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T10:46:48.703

这是做你想做的吗？（您可能需要对这些值进行试验）。

```
_textView.backgroundColor = [UIColor colorWithWhite:0.5 alpha:0.5]; 
```

# r - 如何使用 sprintf 打印带有前导 0 的十六进制数以使其宽度为 2？

> ID：11070183
> 
> 赞同：28
> 
> 时间：2012-06-17T09:12:09.857
> 
> 标签：r, printf

我尝试将 0 到 255 之间的数字转换为十六进制格式。如果我使用`sprintf("%X", 1)`I get `1`，但我需要输出始终具有宽度 2（带前导 0）而不是 1。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-17T09:15:01.883

使用`%02X`：

```
sprintf("%02X",1)    # ->  "01"
sprintf("%02X",10)   # ->  "0A"
sprintf("%02X",16)   # ->  "10"
sprintf("%02X",255)  # ->  "FF" 
```

# php - Echo wordpress 插入 post mysql 查询以及任何分类详细信息

> ID：11070188
> 
> 赞同：0
> 
> 时间：2012-06-17T09:13:13.677
> 
> 标签：php, mysql, wordpress

如果它们与上述查询分开插入，我如何回显最后一个插入新帖子查询，显示与所有帖子详细信息一起使用的 mysql 查询以及这些查询的分类法和类别/ mysql 查询？

我想知道查询的结构，所以我可以批量插入来自 csv 文件的帖子。

# php - 全局登录（许多站点）

> ID：11070192
> 
> 赞同：5
> 
> 时间：2012-06-17T09:13:53.257
> 
> 标签：php, database

我们是一个不断发展的网络，但我们认为我们希望保持用户只需要一个帐户即可访问网络的不同站点。（类似于 Stackoverflow 的登录，如果您登录到另一个“站点”，您将使用您的帐户凭据，然后您的帐户就会被创建）。我们想要我们自己的登录系统（用户名、密码）而不是 OpenId，因为我们将来可能会拥有它，但现在主要关注的是全局登录。

我怎样才能做到这一点？做一个 Curl 请求并发回一个 cookie？有一个仅用于登录过程的“数据库”，并且在首次登录时还在站点指定的数据库中创建一个新的“用户”？

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:16:06.763

这也是在 stackexchange 网站上使用**[OpenID](http://en.wikipedia.org/wiki/OpenID)**完成的，查看这篇文章：

*   [全球网络自动登录](https://blog.stackoverflow.com/2010/09/global-network-auto-login/)

# objective-c - 从按钮将 BOOL 值写入 plist

> ID：11070201
> 
> 赞同：0
> 
> 时间：2012-06-17T09:16:09.820
> 
> 标签：objective-c, uitableview, plist

**背景**

我有 2 个表视图，第一个是主表，第二个是收藏夹表。

一切都用 plist 处理。

从第一个表的 detailView 中，我在右上角设置了一个按钮，将值 YES 写入 plist。

plist 的结构是这样的：

```
Section 1                  Dictionary
      Title                String
      Rows                 Array 
        Item 0             Dictionary
           name            String
           description     String
           image           String
           isFav           Bool (default NO)
      Item 1               Dictionary
           name            String
           description     String
           image           String
           isFav           Bool (default NO)

Section 2
      Title
      Rows
        Item 0             Dictionary
           name            String
           description     String
           image           String
           isFav           Bool (default NO)
        etc.. 
```

添加一个关于它应该如何工作的小计划：

```
firstTable          detailView                          plist
 __________          ________                   
|          |        |     |★ |<- button pressed ---> cellname isFav = YES      
|__________|        |        |               
|cellname  | ------>| detail |    
|__________|        |        |               
|          |        |        |               
|          |        |        | 
```

**问题**

现在我有了那个按钮，我正在尝试编写一个方法来将 isFav 布尔值写入 plist。

`-(void)makeFavorite`

我已经有了读取 plist 的方法，但我不知道如何在上面写一个值。我试图在谷歌上搜索并阅读其他 stackOverflow 帖子，但我无法弄清楚。任何帮助表示赞赏！

**编辑**

这是阅读plist的方法

```
- (NSArray*)readPlist 
{ 
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 

    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if (![fMgr fileExistsAtPath:plistPath]) { 
        plistPath = [[NSBundle mainBundle] pathForResource:@"tipsList" ofType:@"plist"]; 

    } 
    return [NSArray dictionaryWithContentsOfFile:plistPath];
} 
```

在我输入的方法中：

```
- (void) makeFavorite:(id)sender
 {   
     NSArray *test = [self readPlist];
     NSLog (@"test: %@",test);
    //write plist instructions then
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:25:49.493

您是否在寻找：

```
[myDictionary setObject:[NSNumber numberWithBool:NO] forKey:@"isFav"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:08:49.410

一个大纲，没有一个步骤特别涉及：

首先，如果您打算更改它，则需要一个*可变字典。*如果您将其称为（显然） ，则读取一个 plist`ditionaryWithContentsOfFile:`会产生一个不可变的。`NSDictionary`

如果您在`NSMutableDictionary`文档中调用相同的方法，则表明字典本身是可变的，但它包含的对象不是。在您的情况下，您希望更改嵌入在数组中的字典中的单个值，该字典本身嵌入在字典中（至少） - 即您需要可变对象。

还有其他方法可以在 plist 中读取，这些方法可以让您指定需要可变对象，从[读取和写入属性列表数据](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/ReadWritePlistData/ReadWritePlistData.html#//apple_ref/doc/uid/10000048i-CH8-SW1)的第一部分开始。

其次，一旦您更改了可变 plist，只需调用`setObject:forKey:`适当的子字典 - 因此从外部字典中获取数组，从数组中获取内部字典，然后为键设置对象.

最后你需要把它写出来。`readPlist`为此，请使用诸如`writeToFile:atomically:`of 之类的方法来补充您的内容`NSDictionary`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-05T10:19:27.207

**在 iOS 的 NSUserDefault 中写入 Bool 值**

```
write 
 [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"instructionCheck"];

Get
Bool flag=[[NSUserDefaults standardUserDefaults] boolForKey:@"instructionCheck"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T01:08:57.557

你可以`indexPath`从你的传递`tableView`给你的`detailView`。创建一个

```
@property (copy) NSIndexPath *indexPath; 
```

在你的`detailView`并分配给它

```
detailView.indexPath = indexPath; // the one from the current selected cell 
```

然后您可以创建一个喜欢的方法，如下所示：

```
- (IBAction)makeFavorite 
{ 
    NSArray *plist = [self readPlist]; 
    NSDictionary *theItem = [[[plist objectAtIndex:indexPath.section] valueForKey:@"Rows"] objectAtIndex:indexPath.row];
    // get the current state 
    BOOL fav = [[theItem valueForKey:@"isFav"] boolValue]; 
    // set the opposite of the current value 
    [theItem setValue:[NSNumber numberWithBool:!fav] forKey:@"isFav"]; 

    [self writePlist:plist]; 

    // update the UI, set new image or something
    self.navigationItem.rightBarButtonItem.image = [UIImage imageNamed:(!fav ? @"FullStar.png" : @"EmptyStar.png")];
} 
```

# math - 将矩阵转换为组件

> ID：11070204
> 
> 赞同：1
> 
> 时间：2012-06-17T09:16:45.953
> 
> 标签：math, matrix, transform, inverse

给定一个仿射二维变换矩阵，例如：

```
[a  b  tx]
[c  d  ty]
[0  0  1 ] 
```

*   对于绕原点的顺时针旋转，`a`由变换`cos (θ)`并由`b``sin (θ)`

*   对于 scaleFactor sx 的 scaleX，`a`转换为`sx`

*   对于平行于 x 轴的剪切，`x' = x + ky` `b`转换为`k`

* * *

在我的示例`a`中，通过旋转和 scale-x`b`转换了两次，一次通过旋转，一次通过剪切。

旋转不再只是`arcsin(b)`

ScaleX 不再只是`1 / a`

ShearX 不再只是`x - ky`

* * *

如何从该矩阵中获取`rotation`、`shearX`和`scaleX`返回的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T13:42:13.137

所以旋转矩阵（完整）将是（我省略了无聊的部分）

```
R=
a=cos(θ)  c=sin(θ)
b=-sin(θ) d=cos(θ) 
```

而比例和剪切矩阵将是（同样，省略了无聊的部分）

```
S=
a=s  b=k 
c=0  d=1 
```

现在应用第一个旋转（R），然后缩放和剪切（S）将只是将矩阵相乘，从而得到结果矩阵

```
S times R
a=s cos(θ) - k sin(θ)   b=s sin(θ)+k cos(θ)
c=-sin(theta)    d=cos(theta) 
```

如果你想从中得到 θ、s 和 k，你可以确定 θ =arcsin(-c)。你知道 sin(θ) 和 cos(θ)，所以你可以求解两个有两个未知数的线性方程 (a=s cos(θ) - k sin(θ) b=s sin(θ)+k cos(θ))找到 s 和 k。

# android - Android，指定如果没有空间应该缩小什么视图

> ID：11070205
> 
> 赞同：0
> 
> 时间：2012-06-17T09:16:59.523
> 
> 标签：android, android-layout

我有下一个问题。它下面有 ImageView 和按钮面板。我希望 ImageView 尽可能大，但是如果屏幕上没有足够的空间按钮面板，则应该缩小 Imageview。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:23:06.980

看看`android:layout_weight`属性。

[android:layout_weight 是什么意思？](https://stackoverflow.com/questions/3995825/what-does-androidlayout-weight-mean)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:24:11.097

如果一个布局中只有 2 个视图（即 Imageview 和按钮），您可以将两个视图放在线性布局中，并为 imageview 权重布局提供值 1（并且不为按钮提供任何值）

# xml - 使用 Wix 在安装程序中插入版权/注册符号

> ID：11070209
> 
> 赞同：9
> 
> 时间：2012-06-17T09:17:23.957
> 
> 标签：xml, wix, wix3.5

我想知道我是否想在一个特定的对话框中插入版权符号，我将如何在 xml 文件的文本选项中插入该符号，但是在编译 .wxs 文件时会导致错误。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-17T19:22:07.393

您必须确保以 UTF-8 编码保存 WiX XML。最简单的方法是在记事本中打开 XML，单击**文件**，然后单击**另存为**。在**编码**列表中选择**UTF-8 。**并覆盖您当前的 XML 文件。

 **另一种方法是使用字符代码：`&#169;`用于版权和`&#174;`注册符号。

* * *

问题是常规英文字母或 ASCII 是*有效*的 UTF-8 字符，因为它们适合 7 位。版权和注册符号不是有效字符，因为在 UTF-8 中它们必须被编码为两个字节而不是一个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T10:13:17.227

这是一个解决方案：

1.  将记事本++文件文本说“index.html”复制到普通的旧记事本中

2.  关闭记事本++ 文件。

3.  通过按住 Fn+alt 在键盘上键入 0169 重新键入您想要版权符号的文本

4.  将普通记事本文件另存为（所有文件）index.html 到您的 index.html 文件所在的文件夹中，当要求覆盖时单击“是”。

5.  现在使用记事本++打开文件，在任何其他编辑后保存此文件时，不会在版权符号 Â© 旁边产生带重音符号的 A

I do not know why the saved version in notepad++ works after "cleansing" in plain notepad but I have not had any other problems using the method to date.**

# javascript - javascript传递函数作为参数

> ID：11070211
> 
> 赞同：1
> 
> 时间：2012-06-17T09:17:39.010
> 
> 标签：javascript

如果我有这个：

```
$(SomeID).on({
    click: function () { SomeFunction1(); },
    mouseenter: function () { SomeFunction2(); },
    mouseleave:function () { SomeFunction3(); }
}, '.SomeClass'); 
```

我可以将其重写为

```
$(SomeID).on({
    click: SomeFunction1,
    mouseenter: SomeFunction2,
    mouseleave: SomeFunction3
}, '.SomeClass'); 
```

但是如果我需要传递一些这样的参数怎么办：

```
$(SomeID).on({
    click: function () { SomeFunction1($(this)); },
    mouseenter: function () { SomeFunction2($(this).index()); },
    mouseleave: function () { SomeFunction3($(this).index()); }
}, '.SomeClass'); 
```

有替代方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:27:07.557

正如@Jashwant 所说，`this`无论如何都会在函数中使用相同的值，所以这是您不需要担心的一个值（在您的示例中）。

请注意，如果需要，您可以按照您的描述进行操作，静态值很容易，并且称为[currying](http://en.wikipedia.org/wiki/Currying "咖喱")。一个 javascript 示例是：[http ://www.dustindiaz.com/javascript-curry/](http://www.dustindiaz.com/javascript-curry/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:27:03.263

您应该修改`SomeFunction`s 的实现以使它们在没有参数的情况下工作。

例如，如果您有：

```
function SomeFunction2(arg) {
  //do something assuming arg to be $(this).index()
} 
```

你可以这样写：

```
function SomeFunction2() {
  var arg = $(this).index();
  //do exactly the same
} 
```

在对所有三个回调执行此操作后，您可以使用第二个代码示例来绑定它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T09:47:09.793

javascript函数内部的含义`this`不依赖于定义函数的词法范围——例如，以下警报“Hello，World！”，事件if在创建`this.name`时未定义`greet`

```
var x = { name: 'World' };
var greet = function() { alert('Hello, ' + this.name); };
x.greet = greet;
x.greet(); 
```

以下也提醒“你好，世界！”：

```
var x = { name: 'World' };
var y = { name: 'Dude', greet: function() { alert('Hello, ' + this.name); } };
x.greet = y.greet;
x.greet(); 
```

在幕后，发生的事情类似于：

```
var greet = function() { alert('Hello, ' + this.name); };
greet.call({ name: 'World' }); 
```

所以你可以安全地混合你的#2 和#3 片段。

**顺便提一句：**

大多数 jQuery 事件处理程序都是通过引用 jQuery 事件对象作为第一个参数来调用的，所以如果你发现它的`this`工作原理很棘手（或者如果你担心你必须向每个同事解释），你也可以`event.delegateTarget`使用的`this`。

参见例如：

```
$(document).click(function(evt){ alert (evt.delegateTarget === this); }); 
```

# iphone - 未找到包含任何钥匙串签名证书的未过期配置文件

> ID：11070213
> 
> 赞同：1
> 
> 时间：2012-06-17T09:18:16.717
> 
> 标签：iphone, xcode, app-store, submit

我昨天问了一个与分发配置文件相关的问题，因为它在 Xcode Organizer 中无效。该问题已通过删除我的证书并重新下载新证书得到解决。现在，我在将我的应用程序提交到 App Store 时遇到了不同的问题。我正在使用 Xcode4.3.2。

我想我已经看到各种各样的主页或类似的问题，这个“没有找到包含任何钥匙串签名证书的未过期的配置文件”错误，但我仍然无法找到解决这个问题的方法......

我的开发配置文件和分发配置文件状态在 xcode 管理器中都是有效的，所以我在 Xcode 产品 - > 存档中选择，然后我得到上述错误。

我的 Build Setting 的 Code Singning 是这样的；

Code Sining 识别：多个值

调试：不要代码唱歌

任何 SDK：iPhone 开发者 iPhone 开发者（用于应用程序标识符“myAppname”）

发布：iPhone Distribution iPhone Distribution（用于应用程序标识符“myAppname”）

任何 SDK：iPhone Distribution iPhone Distribution（用于应用程序标识符“myAppname”）

任何 iOS SDK：iPhone Distribution iPhone Distribution（用于应用程序标识符“myAppname”）

如果我将 Release Any iOS SDK 部分更改为 iPhone Developer form iPhone distribution，则构建成功，但会发生另一个错误...“No identities are available for signing”[类似于此问题](https://stackoverflow.com/questions/9635939/error-no-identities-are-available-for-signing-xcode-4-3-1)

即使我点击“下载身份”，它也不起作用..

有谁知道如何解决这个问题...？如果您能告诉我该怎么做，我将不胜感激。我为我糟糕的英语和难以辨认的文字感到抱歉..

先感谢您。

# javascript - 错误：无法打开，因为此版本的应用程序不支持其项目类型 (.jsproj) - VS Express RC 2012 for Windows 8

> ID：11070214
> 
> 赞同：0
> 
> 时间：2012-06-17T09:18:19.337
> 
> 标签：javascript, windows-8, projects-and-solutions, visual-studio-2012

刚开始工作`Visual Studio Express RC 2012 for Windows 8`，但是当我尝试创建我的第一个 JavaScript 项目时，它给出了一个错误，上面写着`"ProjectDirectory/ProjectName.jsproj" Cannot open be opened because its project type(.jsproj) is not supported by this version of the application. To open it please use version that support this type of project.`

对此问题进行了很多搜索，但使用 (.jsproj) 解决方案或 VS 2012 未发现此问题。

有关其他信息，我也在`Visual Studio 11 Beta`同一台机器上安装了。

我正在添加错误消息的快照，这将有助于了解问题。

![错误：无法打开，因为此版本的应用程序不支持其项目类型 (.jsproj) - VS Express RC 2012 for Windows 8](../Images/4d0ab8aefea25adb5f3a08e37cc409eb.png)

再次请注意它的一个`JavaScript Project Solution`.

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:33:07.460

如果您同时运行 VS 2012 的测试版和 RC，则可能会出现此问题。

您是否安装了 VS 2012 的测试版，或者这可能是对安装了先前版本的 Windows 8 和 VS 2012 测试版的系统的升级？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:57:47.910

感谢您的所有贡献，经过大量搜索并提供了宝贵的答案，才解决了这个问题。

我在同一台机器上安装了 VS 2011 Beta 和 VS 2012 RC（对于 Metro App 和这个有问题的），似乎他们正在共享一些导致这个问题的资源。

首先，我尝试修复 VS 2012，它没有解决问题，而是引发了另一个问题，现在 VS 2011 Beta 开始出现错误“许可证数据.....需要卸载”。

所以我删除了 VS 2011 Beta，现在 VS 2012 RC 运行良好。

但是现在VS 2012 RC的另一个问题是只针对Metro APP开发。

问：如果有人想继续 .Net 开发怎么办？

答：现在，我正在使用 VS 2010，它与它配合得很好。

它就是这样解决我的问题的。最终结果不是在 Windows 8 Release Preview 上使用 VS 2011 Beta 和 VS 2012 RC，而是您可以使用 VS 2010 和 VS 2012 RC 的组合。

# iphone - if 语句后，警报框在模拟器上冻结

> ID：11070218
> 
> 赞同：0
> 
> 时间：2012-06-17T09:19:02.317
> 
> 标签：iphone, ios, xcode

这是我上一个问题的后续

我有这个代码

基本上它的意思是当计时器到达时，您会收到一个消息框，说做得好，然后屏幕重置，您可以再次播放，所有图像重置并且开始按钮重新出现，但您无法清除它刚刚冻结的警报框sim，我在这里错过了什么吗？

这是代码

```
if (MainInt <= 0)
    {
        [timer invalidate];
        timelabel.text = @"5";

        [startbutton setHidden:NO];

        CGRect frame = [player frame];
        frame.origin.x = 137.0f;
        frame.origin.y = 326.0;
        [player setFrame:frame];

        CGRect frame2 = [enemy frame];
        frame2.origin.x = 90.0f;
        frame2.origin.y = 20.0;
        [enemy setFrame:frame2];

        CGRect frame3 = [enemy2 frame];
        frame3.origin.x = 210.0f;
        frame3.origin.y = 20.0;
        [enemy2 setFrame:frame3];

        UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:@"GRATZ" message:[NSString stringWithFormat: @"Congratulations you made it to Level : %d Now try then next level" ,fred] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];

        [alert1 show];
        [alert1 release];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:23:50.647

听起来您正在创建不止一个并将它们全部放在彼此之上。

尝试重新设置你在上一个问题中的`MainInt = 5;`样子`timeLabel.text`

# algorithm - 排序算法：输出

> ID：11070227
> 
> 赞同：1
> 
> 时间：2012-06-17T09:20:57.917
> 
> 标签：algorithm, mathematical-optimization

我在网站上遇到了这个问题，我完全无法理解输出，请帮助我理解它：-

Bogosort 是一种愚蠢的算法，它随机打乱序列直到它被排序。但是在这里我们对其进行了一些调整，以便在最后一次 shuffle 之后，如果几个第一个元素最终出现在正确的位置，我们将修复它们并且不再对这些元素进行 shuffle。如果它们位于正确的位置，我们将对最后一个元素执行相同的操作。例如，如果初始序列是 (3, 5, 1, 6, 4, 2) 并且经过一次 shuffle 我们得到 (1, 2, 5, 4, 3, 6) 我们将保留 1, 2 和 6 并继续使用相同的算法对 (5, 4, 3) 进行排序。假设最初没有元素位于正确的位置，计算改进算法的预期混洗次数，以对前 n 个自然数的序列进行排序。

输入：

```
2
6
10 
```

输出：

```
2
1826/189
877318/35343 
```

对于每个测试用例输出，改进算法以不可约分数的形式对前 n 个自然数的序列进行排序所需的预期混洗次数。我只是无法理解输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:02:48.900

我假设您在[CodeChef](http://www.codechef.com/FEB11/problems/BOGOSORT)上发现了问题。[这里](http://www.codechef.com/wiki/february-2011-contest-problem-editorials)有对 Bogosort 问题答案的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:01:28.180

好的，我想我找到了答案，这里有一个类似的问题[https://math.stackexchange.com/questions/20658/expected-number-of-shuffles-to-sort-the-cards/21273](https://math.stackexchange.com/questions/20658/expected-number-of-shuffles-to-sort-the-cards/21273)，这个问题可以被认为是它的延伸

# c++ - 在 C++ 中的类中声明私有静态变量

> ID：11070231
> 
> 赞同：1
> 
> 时间：2012-06-17T09:21:37.730
> 
> 标签：c++, static-variables

我可以`private static`在类中声明成员变量，但这是什么意思？

有什么区别`private static`和`public static`成员变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:22:56.340

这意味着除了类本身之外，不能在任何地方访问这些变量。

`public`成员可以从类外部访问。
`protected`成员可以在类中访问，其派生类和
`private`成员只能在类中访问。

请注意，成员是否`static`相同，访问规范规则适用于它。
`static`意味着存储规范，并且某个成员将在类的所有实例之间共享，它不会改变可以访问该成员的位置***。***

**好读：**

[什么是访问说明符？我应该以私有、受保护还是公共继承？](https://stackoverflow.com/questions/5447498/what-are-access-specifiers-should-i-inherit-with-private-protected-or-public/%5d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T09:23:43.513

`private`变量意味着它只能在声明它的类的范围内被访问，也就是说，在类之外声明的任何函数都不能访问（读取或写入）私有变量。

将变量声明为`static`意味着它将在该类的所有实例中保持相同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T09:32:29.580

想象一下，你有一个 A 类，其中有一个名为 a 的静态 int 成员

```
 class A {
        public:
        static int a;
    }; 
```

让我们从您的主要功能中说，您可以像使用一样访问它

```
 int new_variable = A::a; 
```

这很好用，因为您的访问说明符是公开的。

现在将其从公共更改为私有（或受保护），您的代码将无法编译，因为私有成员只能由类本身访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T09:25:44.530

`private`如果您需要隐藏信息 ( ) 并使用类变量而不是对象变量 ( `static`) ，您可能想要这样做

# css - 如何制作非常小的模糊效果？

> ID：11070236
> 
> 赞同：2
> 
> 时间：2012-06-17T09:23:17.087
> 
> 标签：css

如何使用 -webkit-filter（或过滤器）在 1px 和 0 之间制作非常小的模糊效果？

我已经尝试过介于 1em 和 0.01em 之间的东西，但就这个过滤器将其重新计算为像素及以下，如果它低于 1px，那么根本就没有模糊..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:56:03.847

这是一个相当复杂的解决方案，涉及复制一些内容：http: [//jsfiddle.net/BWj28/1/](http://jsfiddle.net/BWj28/1/)

它的工作原理是将内容框复制 4 次，将复制者在每个方向上移动 1 个像素，并为复制者计算适当的不透明度。上面的版本需要不透明的背景。

```
 ---
      -a-
      ---

 ---  con  ---
 -d-  ten  -c-
 ---   t   ---

      ---
      -b-
      --- 
```

HTML 示例布局：

```
<div class="wrap">
    <div class="a t">Hello World!</div>
    <div class="b t">Hello World!</div>
    <div class="c t">Hello World!</div>
    <div class="d t">Hello World!</div>
    <div class="content">Hello World!</div>
</div>​ 
```

CSS：

```
.wrap {
    position: relative;
}
.a,.b,.c,.d {
    position: absolute;
}
.a { top: -1px; left:  0px; z-index:1; opacity:1;     }
.b { top: +1px; left:  0px; z-index:2; opacity:0.5;   }
.c { top:  0px; left: +1px; z-index:3; opacity:0.333; }
.d { top:  0px; left: -1px; z-index:4; opacity:0.25;  }
.wrap > div {
    background: yellow; /* any opaque background */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T11:49:10.920

有人认为我想告诉你这种类型的特性在 CSS3 中没有应用，因为它没有完全支持，但 CSS 的未来可能会提供这种特性......

无论如何`-webkit-filter`只适用于 chrome ......所以，这样的代码对你有用，

```
img {
  -webkit-filter: grayscale(0.5) blur(10px);
} 
```

参考：[**点击...**](http://updates.html5rocks.com/2011/12/CSS-Filter-Effects-Landing-in-WebKit "点击")

# ios - Xcode如何更改代码中的选项卡

> ID：11070244
> 
> 赞同：0
> 
> 时间：2012-06-17T09:24:25.997
> 
> 标签：ios, xcode, indexing, tabbar

我正在尝试通过单击更改标签栏索引：

我正在使用 webViewDidStartLoad 中的代码：

```
-(void)webViewDidStartLoad:(UIWebView *) webView {

    NSRange catalog = [WebView.request.URL.absoluteString rangeOfString: @"catalog"];    
    if(catalog.location != NSNotFound)    {
        [self.tabBarController setSelectedIndex: 1];   
    }
} 
```

但是当我这样做时，我以后无法更改选项卡栏的索引，它一直停留在 1 上。索引 1 上的视图不会加载...提前致谢！

# jquery - jquery 验证器组 - 如何使用它？

> ID：11070245
> 
> 赞同：3
> 
> 时间：2012-06-17T09:24:34.763
> 
> 标签：jquery, jquery-validate

我有 3 个字段和按钮：

```
<input type="text" id="a" />
<input type="text" id="b" />
<input type="text" id="c" />
<input type="button" id="d" />
<label for="all_fields" class="error" style="display:none;">Please fill exactly one field</label> 
```

我想使用 jquery 验证器插件来验证正是一个字段填充了文本。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:49:55.330

**工作演示** `for A / B / C`案例：http: [//jsfiddle.net/hfLwB/](http://jsfiddle.net/hfLwB/)

行为：只要输入字段之一设置为 nu，她的值将允许计算发生，如果所有 3 个字段为空，则会出错。您还会注意到 class`.at_least_one` **和**addMthod: `require_from_group`。

Anyhoo 代码应该说得更好。

好的链接：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

希望能帮助到你 ：）

**HTML**

```
<form action="results.whatever" target="_blank" id="HULK">

    <div style="clear:both">
    <label for="a">A</label>
    <div style="float:right">
            <input name="a" type="text" class="at_least_one idleField"></div>
    </div>
    <div style="clear:both">
        <label for="b">B</label>
        <div style="float:right">
            <input name="b" type="text" class="at_least_one idleField">
        </div>
    </div>
    <div style="clear:both">
        <label for="c">C</label>
        <div style="float:right">
            <input name="c" type="text" class="at_least_one idleField">
        </div>
    </div>
    <div id="button">
        <input name="" type="submit" value="Calculate" class="calc_button" style="cursor:hand">
    </div>
    </form>
<div id="errorContainer">
    <h4>errors</h4>
    <ol>
    </ol>
</div>
​ 
```

**代码**

```
 jQuery.validator.addMethod("require_from_group", function(value, element, options) {
  var numberRequired = options[0];
  var selector = options[1];
  var fields = $(selector, element.form);
  var filled_fields = fields.filter(function() {
    // it's more clear to compare with empty string
    return $(this).val() != ""; 
  });
  var empty_fields = fields.not(filled_fields);
  // we will mark only first empty field as invalid
  if (filled_fields.length < numberRequired && empty_fields[0] == element) {
    return false;
  }
  return true;
// {0} below is the 0th item in the options field
}, jQuery.format("Please fill out at least {0} of these fields."));

$(document).ready(function(){
  var container = $('#errorContainer');
  $("#HULK").validate(  {

    // We must to force validation of entire form because
    // when we remove value from 2-nd field 
    // the 1-st field becomes invalid.
    onfocusout: function() { $("#HULK").valid() },
    onkeyup: function() { $("#HULK").valid() },

    rules: {
      // note: you can use variable to avoid repeating 
      // of the same code
      a: { 
        number: true,
        require_from_group: [1, ".at_least_one"]
      },
      b: {
        number: true,
        require_from_group: [1,".at_least_one"]
      },
      c: {
        number: true,
        require_from_group: [1,".at_least_one"]
      }
    },
    success: function(label) {  
      label.html(" ").addClass("checked"); 
    },
    errorContainer: container,
    errorLabelContainer: $("ol", container),
    wrapper: 'li',
    meta: "validate"
  });
});
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:24:12.727

只是为@Tats_innit 帖子添加更多道具。

`require_from_group`对于 1.10.0 发布版本的github 上有一个未解决的`additional-method-1.10.js`问题`jquery.validation`。

**github 问题： [require_from_group 禁用其他规则](https://github.com/jzaefferer/jquery-validation/issues/412)**

Smileyanp@github 在他的解决方案中引用了这篇文章，他在其中重用了@Tats_innit 的函数并创建了一个[测试](http://jsfiddle.net/hfLwB/4/)，表明它可以正常工作**，并且不会禁用**对之前定义的其他规则的验证`require_from_group`。

这篇文章在这里是为了节省时间，因为这个小细节花了 3 小时的谷歌搜索。

**使固定：**

只需在加载`additional-method-1.10.js`后更新或执行此代码`additional-method-1.10.js`（以覆盖函数）。

```
jQuery.validator.addMethod("require_from_group", function(value, element, options) {
  var numberRequired = options[0];
  var selector = options[1];
  var fields = $(selector, element.form);
  var filled_fields = fields.filter(function() {
    // it's more clear to compare with empty string
    return $(this).val() != ""; 
  });
  var empty_fields = fields.not(filled_fields);
  // we will mark only first empty field as invalid
  if (filled_fields.length < numberRequired && empty_fields[0] == element) {
    return false;
  }
  return true;
// {0} below is the 0th item in the options field
}, jQuery.format("Please fill out at least {0} of these fields.")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-06T13:30:52.457

我试图将 require_from_group 用于 magento 站点，但即使使用此修复程序也无法使其正常工作。在浪费了太多时间之后，我使用其 html 中的 title 属性将其缩小到 magento。然后我遇到了这个[jquery 验证，当输入字段具有标题属性时，而不是错误消息标题作为错误消息给出](https://stackoverflow.com/questions/10292602/jquery-validation-when-input-field-has-a-title-attribute-instead-of-error-me)。

我希望这可以帮助其他人节省时间！

# eclipse - Eclipse：在 jsp 路径的 CTRL+CLICK 上打开 JSP 文件

> ID：11070246
> 
> 赞同：2
> 
> 时间：2012-06-17T09:24:51.660
> 
> 标签：eclipse

我曾经通过在eclipse中通过CTRL+CLICK单击路径来打开另一个jsp文件中包含的jsp文件。但是现在有一段时间这行不通。不明白为什么！！！！例如。<jsp:include page="../someFile.jsp" /> 如果我们只是将鼠标悬停在此路径上并 CTRL+CLICK 它用于在 Eclipse 的新选项卡中打开文件。帮助伙计们！！！

我正在使用 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:10:04.713

我承认在这里抓住了稻草，但听起来默认编辑器（或为此特定文件指定的编辑器）已更改。从 Navigator 或 *Explorer 菜单中选择 JSP 文件和鼠标右键“Open With...”以查看可用的 JSP 编辑器。列表中选中的编辑器就是您现在正在使用的编辑器。尝试其他编辑器，看看它们是否支持 CTRL-CLICK 操作。

# complexity-theory - A* 时间复杂度

> ID：11070248
> 
> 赞同：7
> 
> 时间：2012-06-17T09:25:27.990
> 
> 标签：complexity-theory, a-star

维基百科对 A* 的复杂性有以下说法：

> A* 的时间复杂度取决于启发式。在最坏的情况下，扩展的节点数是解的长度（最短路径）的指数，但是当搜索空间是一棵树时它是多项式的......

我的问题是：“A* 的时间复杂度是指数级的吗？还是不是时间复杂度，而是内存复杂度？” 如果是内存复杂度，A*的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T08:01:36.337

在最坏的情况下，A* 时间复杂度是指数级的。

但是，请考虑`h(n)` 估计的距离和`h*(n)`剩余的确切距离。如果条件`| h(n) - h*(n) | < O(log *h(n) )`成立，也就是说，如果我们的估计函数的误差呈次指数增长，那么 A* 时间复杂度将是多项式的。

可悲的是，大多数时候估计误差线性增长，因此，在实践中，更快的替代方案是首选，付出的代价是不再实现最优性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T09:38:43.220

由于存储每个扩展节点是为了避免多次访问同一节点，因此扩展节点数量的指数增长意味着指数时间和空间复杂度。

请注意，必要的指数空间复杂度意味着指数时间复杂度。反之则不成立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:30:21.173

> A* 时间复杂度是指数的还是它的内存复杂度？

维基百科的摘录表明它指的是时间复杂度

# python - 如何从给定的选项初始化 django-form 数据类型字段？

> ID：11070252
> 
> 赞同：0
> 
> 时间：2012-06-17T09:26:05.110
> 
> 标签：python, django, django-forms

首先：我无法找到这个问题的正确标题。

无论如何，问题是：

我必须在模板中填写表格，并且此表格的字段取决于用户。例如，您将`integer`（整数不是数据类型）作为参数传递给方法，它应该返回如下：

```
fileds = forms.IntegerField() 
```

如果你通过`bool`了，那么它应该是这样的：

```
fields = forms.BooleanField() 
```

这样我就可以使用它们来创建我的表单。我尝试使用此代码，但它以字符串的形式返回。

一些.py 文件：

```
choices = (('bool','BooleanField()'),
            ('integer','IntegerField()'))
def choose_field():
   option = 'bool' # Here it is hardcoded but in my app it comes from database.
   for x in choices:
      if x[0]==option:
         type = x[1]
   a = 'forms'
   field = [a,type]
   field = ".".join(field)
   return field 
```

当我打印它打印的字段时`'forms.BooleanField()'`。我也使用了这个返回值，但是没有用。艾米解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:34:56.567

最简单的方法是创建表单类并包含所有可能选择的字段。然后在这个类中写一个构造函数，[隐藏](https://stackoverflow.com/questions/1255976/how-do-you-dynamically-hide-form-fields-in-django)不想出现的字段。构造函数必须接受一个参数来指示我们需要哪些字段。将此参数存储在表单中并在方法中使用它`clean`来根据此参数更正收集的数据可能很有用。

```
class Your_form(forms.ModelForm):
  field_integer = forms.IntegerField()
  field_boolean = forms.BooleanField()

  def __init__(self, *args, **kwargs):
    option = kwargs["option"]
    if option == "integer":
      field_boolean.widget = field_boolean.hidden_widget()
    else:
      field_integer.widget = field_integer.hidden_widget()
    super(Your_form, self).__init__(*args, **kwargs) 
```

在您的控制器中：

```
option = 'bool'
form = Your_form(option=option) 
```

# html - 使用父宽度的绝对定位元素

> ID：11070262
> 
> 赞同：0
> 
> 时间：2012-06-17T09:28:19.610
> 
> 标签：html, css, css-position

这就是场景。

我有一个带有标题行的简单表格，其中包括几列具有动态变化的宽度。在头排内有一个比头排高度长的高度列表，但是它们应该只在悬停时可见，但是在悬停时它们应该在头排的顶部但仍然具有原始的 100父`<td>`元素的百分比宽度是列的元素。

我所做的是设置`position: absolute`悬停，但一旦发生这种情况，元素显然占据了它可以获得的所有宽度，只能通过特定应用的宽度来修复，但这并没有真正帮助我，因为可以调整列的大小。

我的问题是 CSS（不是 Javascript）中是否有一种方法可以实现元素仍使用父级宽度的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:12:48.833

根据您要完成的工作，您的问题的答案会有很大差异。大多数毯子解决方案需要：

*   添加额外的定位元素（通常使用 Javascript 添加）
*   设置元素（通常会使`display: block;`行为不规律）`TH, TD``TABLE`

原因是向表格单元格添加定位会将其从流程中移除，这会影响表格对齐（请参阅[此错误报告评论](https://bugzilla.mozilla.org/show_bug.cgi?id=35168#c11)）。关于这个问题和可能的解决方案的更长时间的讨论可以在[Firefox 是否支持位置：相对于表格元素？](https://stackoverflow.com/questions/5148041/does-firefox-support-position-relative-on-table-elements)

除此之外……</p>

如果您正在使用`TABLE`for 站点布局，请*立即停止*并重新考虑您在生活中的选择。有更好的选择：

*   最好的选择是[CSS3 Flexible Box Layout](http://dev.w3.org/csswg/css3-flexbox/)模型，如果它被广泛支持的话。在撰写本文时，支持很少、分散，而且并不总是遵循相同的标准 ( [caniuse.com: flexbox](http://www.caniuse.com/#search=flexbox) )
*   在这成为一种选择之前，一个鲜为人知的事实是绝对定位的元素可以定位在绝对定位的元素中。有关使用绝对定位元素实现 100% 宽度/高度布局的示例，请参[见此小提琴。](http://jsfiddle.net/thirdender/q9yL6/)或者，可以在相对定位的父元素内进行相同的布局。

如果您没有使用`TABLE`for 站点布局，则可能还有其他选项可供您使用。这取决于所需的效果。

# python - 在 Gtk3 上使用 PyGObject 的 Webkit 线程

> ID：11070263
> 
> 赞同：7
> 
> 时间：2012-06-17T09:28:25.230
> 
> 标签：python, webkit, pygtk, gtk3, pygobject

我正在尝试在与 gtk 的主线程不同的线程上加载 webkit 视图。

我看到了[PyGTK、Threads 和 WebKit的例子](https://stackoverflow.com/questions/8630606/pygtk-threads-and-webkit)

我稍微修改一下以支持 PyGObject 和 GTK3：

```
from gi.repository import Gtk
from gi.repository import Gdk
from gi.repository import GObject
from gi.repository import GLib
from gi.repository import WebKit
import threading
import time

# Use threads                                       
Gdk.threads_init()

class App(object):
    def __init__(self):
        window = Gtk.Window()
        webView = WebKit.WebView()
        window.add(webView)
        window.show_all()

        #webView.load_uri('http://www.google.com') # Here it works on main thread

        self.window = window
        self.webView = webView

    def run(self):
        Gtk.main()

    def show_html(self):
        print 'show html'

        time.sleep(1)
        print 'after sleep'

        # Update widget in main thread             
        GLib.idle_add(self.webView.load_uri, 'http://www.google.com') # Here it doesn't work

app = App()

thread = threading.Thread(target=app.show_html)
thread.start()

app.run()
Gtk.main() 
```

结果是一个空窗口，并且永远不会执行“睡眠后”打印。idle_add 调用不起作用。唯一的工作部分是在主线程上注释的调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T09:58:39.553

我需要 GLib.threads_init() 在 gdk 之前。

像这样：

```
from gi.repository import Gtk
from gi.repository import Gdk
from gi.repository import GObject
from gi.repository import GLib
from gi.repository import WebKit
import threading
import time

# Use threads                                       
GLib.threads_init()

class App(object):
    def __init__(self):
        window = Gtk.Window()
        webView = WebKit.WebView()
        window.add(webView)
        window.show_all()

        #webView.load_uri('http://www.google.com') # Here it works on main thread

        self.window = window
        self.webView = webView

    def run(self):
        Gtk.main()

    def show_html(self):
        print 'show html'

        time.sleep(1)
        print 'after sleep'

        # Update widget in main thread             
        GLib.idle_add(self.webView.load_uri, 'http://www.google.com') # Here it doesn't work

app = App()

thread = threading.Thread(target=app.show_html)
thread.start()

app.run()
Gtk.main() 
```

# javascript - 如何在不使用 html 表单的情况下通过 ajax 发送文件？

> ID：11070266
> 
> 赞同：2
> 
> 时间：2012-06-17T09:29:12.903
> 
> 标签：javascript, jquery, ajax, upload

我在不使用 html 表单的情况下通过 ajax 上传文件时遇到了困难。我的情况是这样的：

1.  我有一个文本区域
2.  我想压缩该文本区域的内容并通过 AJAX 将其上传到服务器（现在我正在使用[JSZip](http://stuartk.com/jszip/)）
3.  出于测试目的，我尝试创建一个虚拟 zip 文件以像这样发送（不获取 textarea 内容）：

    ```
    var zip = new JSZip();
    zip.file("hello1.txt", "Hello First World\n");<br/>
    zip.file("hello2.txt", "Hello Second World\n");<br/>
    var content = zip.generate(); 
    ```

4.  然后我使用Jquery ajax 方法发送，像这样：

    ```
    $.post("the_url",
        {
            GradeRequest : {
                submitter_id : "foobar",
                evaluationset_id : 9,
                mode : 1,
                source_file : "a.cpp",
                file: content
            }
        }
    ); 
    ```

但是服务器上没有收到文件。我已阅读[如何异步上传文件中的问题？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)，但所有解决方案都使用 html 表单。有没有不涉及任何 html 表单的解决方案？

提前致谢。

在服务器端，我使用的是 Yii PHP 框架：

```
$model = $this->model;
    if ($model !== null && isset($_POST['GradeRequest'])) {
        $model->setAttributes($_POST['GradeRequest']);

        if ($model->validate()) {
            if (isset($_FILES['GradeRequest']['tmp_name']['file']) && $_FILES['GradeRequest']['tmp_name']['file'] !== "") {
                $model->file = file_get_contents($_FILES['GradeRequest']['tmp_name']['file']);
                $model->source_file = $_FILES['GradeRequest']['name']['file'];
            }

            $this->setReply(true, "Ok");
            $model->client_id = $this->clientId;
            $model->request_id = $this->requestRecord->id;
            $model->save();
        } else {
            $this->setReply(false, $model->getErrors());
        }
    } 
```

作为概念证明，我创建了一个这样的表单版本并且它可以工作（文件已上传到服务器）：

```
<form enctype="multipart/form-data" method="post" action="[the_url]>
EvaluationSet id: <input type="text" name="GradeRequest[evaluationset_id]" /><br />
<input type="hidden" name="GradeRequest[mode]" value="0" />
<input type="hidden" name="GradeRequest[submitter_id]" value="Someone" />

Source file : <input type="text" name="GradeRequest[source_file]" /><br />
File : <input type="file" name="GradeRequest[file]" /><br />

<input type="submit" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:42:57.673

那里`FormData`可以帮助您的对象（它是所谓的`xmlHttpRequest`版本 2 的一部分）：这是一个[兼容性图表](http://caniuse.com/#feat=xhr2)，带有一些链接的参考和示例。

这样，您可以将键/值对添加到 POST 表单，包括`File`对象，并`send`通过`xmlHttpRequest`.

`File`可以使用`<input type="file">`元素轻松检索对象，甚至可以使用桌面上的拖放操作。

如果要将某些文件*内容*作为文件上传，则必须创建一个`Blob`. 此功能仍处于试验阶段，但受 Chrome 和 Firefox 支持（至少......我猜还有 Safari？）：

```
var builder = new BlobBuilder();
builder.append(content);
var blob = builder.getBlob("application/zip"); 
```

请记住，此时您必须`MozBlobBuilder`在 Firefox 和`WebKitBlobBuilder`Chrome 中使用。

在一些教程中，我看到字符串实际上被转换为`Uint8Array`第一个。也许那是基于较旧的参考，因为该`append`方法也`BlobBuilder`应该接受纯字符串。虽然从未尝试过。

如果您的内容是 Base64 编码的字符串，则必须使用`atob`(应该支持每个也支持`Blob`and的浏览器`FormData`) 对其进行转换。

**编辑**：`BlobBuilder`由于 Blob 构造函数的新草案，现在已弃用。所以你必须做的一切`Blob`是：

```
var blob = new Blob([content], "application/zip"); 
```

剩下的很简单：

```
var form = new FormData();
form.append("file", blob); 
```

这里的问题是服务器端的文件名是不可预测的，并且依赖于用户代理。我已经看到了一些使用`append`指定文件名的第三个参数的用法，但我想将实际文件名发送到`FormData`对象中的单独键/值对是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T17:59:30.140

我终于熬过去了！！非常感谢[MaxArt](https://stackoverflow.com/users/714240/maxart)。

基本上，这就是[MaxArt](https://stackoverflow.com/users/714240/maxart)所说的 Uint8Array 转换。[我在这里](https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-html5/WOxmqfDAaqo)得到了 Eric Bidelman 的转换参考。

这是我的做法：

```
var zip = new JSZip();
zip.file("hello1.txt", "Hello First World\n");
zip.file("hello2.txt", "Hello Second World\n");
var content = zip.generate(); //Generate dummy zip file (adjust to your need)

var oBlob = new (window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder)(); //Instantiate blob builder

var raw = atob(content);    //decode the base64 string
var rawLength = raw.length;
var uInt8Array = new Uint8Array(rawLength);
for (var i = 0; i < rawLength; ++i) { //convert to uInt8Array
    uInt8Array[i] = raw.charCodeAt(i);
}

oBlob.append(uInt8Array.buffer); //append it to blobbuilder
oMyForm.append("GradeRequest[file]", oBlob.getBlob("application/zip")); //because you create a zip file, so get the zip type

//send it
var oReq = new XMLHttpRequest();
oReq.open("POST", "{{the_url}}");
oReq.send(oMyForm); 
```

# javascript - 用于富 Web 应用程序的 KISS Javascript 框架

> ID：11070267
> 
> 赞同：1
> 
> 时间：2012-06-17T09:29:21.263
> 
> 标签：javascript, gwt, user-interface, layout

*   **是否有一个简单的基于 javascript 的配置应用程序框架的约定，它看起来和感觉就像一个富客户端应用程序，开箱即用？** 例如，有GWT……但它是重量级的（即它需要编译）。

*   更具体地说，鉴于像 JQuery 这样的工具继续流行——**是否有任何香草 CSS + JQuery 应用程序框架（再次，像 GWT），只是“开箱即用”，具有类似于定义的直观和自然的布局管理器GWT/Swing 工具包？** 任何此类框架的这些部分都可能由高级 js 包装器驱动。

*   由于 JQuery 是模块化的，并且模块化有其好处，所以上述可能不是一个公平的期望。Java 是非常模块化的，但是通过选择一个堆栈（例如 hibernate + Spring + JSP）我们可以简化 Java 开发。 **是否有用于全方位服务前端开发的通用 JQuery 堆栈之类的东西？**

到目前为止，我发现最能体现这一点的是：

*   GWT

*   SproutCore（我最近没有做太多的发现）。

*   FLEX 相关技术。

我确信存在其他高级 web / CSS / js / html5 编程方法 - 它们是什么？尽管存在许多 js 工具，但尚不清楚哪些是低级 DIY 工具（对于 DOM 黑客），哪些是（不太灵活）“正常工作”的预打包框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:54:17.953

## **UPD：2014年答案**

很高兴看到该领域的疯狂进展，请务必查看以下框架：

1.  [EmberJS](http://emberjs.com/)
2.  [AngularJS](http://angularjs.org/)
3.  [淘汰赛JS](http://knockoutjs.com/)

几乎不可能在没有固执己见的情况下推荐特定的文章，但是您可以在网络上找到大量比较文章以及在 SO 上的相关问题。

* * *

根据您的描述，我建议的 RIA（富 Internet 应用程序）开发的前 2 个框架是：

1.  **[分机](http://www.sencha.com/products/extjs)**。一个丰富而成熟的框架，拥有庞大的社区和许多互补的工具。为您提供类似 OOP 的类系统、事件系统、非常丰富且灵活的小部件库（带有布局管理器）和许多其他很酷的抽象，只需查看他们的网站即可。非常好的一个广泛的文档。如果您想与 GWT 进行互操作，他们也有一个名为 Sencha GXT（ex ExtGWT）的产品，他们已经做了很长一段时间了。
2.  **[道场工具包](http://dojotoolkit.org/features/desktop)**。另一个强大的框架，与 ExtJS 非常相似，但可能更轻量级（这是框架的优势，他们使用[AMD](http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition)来定义/加载模块）

另外值得注意的是，第二个可以免费用于商业用途，而第二个则不是。我建议您查看这两个框架必须提供哪些开箱即用的功能，然后决定哪一个更适合您的需求。

其他不太受欢迎的（如果我错了，请纠正我）和通常有一些社区的较小框架是：

1.  [芽核](http://sproutcore.com/)。你提到的
2.  [优](http://yuilibrary.com/)。由 Yahoo 维护的 RIA 框架。ExtJS 最初是作为 YUI 的扩展而创建的。
3.  [qooxdoo](http://qooxdoo.org/)。我不熟悉该框架，但我看到人们推荐它。网站上的描述看起来很有希望。

这些是可以帮助您构建“严肃的”单页富 Web 应用程序的框架。我应该注意到，jQuery 通常不适合作为核心项目。如果您想要的更像是构建在 jQuery 之上的小部件库，那么您应该查看[jQuery UI](http://jqueryui.com/)，但还有许多其他类似的工具包。

另外，在 SO 上查看这些类似的线程：

*   [extjs 的免费和开源替代品](https://stackoverflow.com/questions/6193183/free-and-open-source-alternative-to-extjs)
*   [ExtJS 的替代品是什么？](https://stackoverflow.com/questions/200284/what-are-alternatives-to-extjs)

# python - Argparse python，在帮助菜单中删除子解析器列表

> ID：11070268
> 
> 赞同：18
> 
> 时间：2012-06-17T09:29:25.087
> 
> 标签：python, argparse

我正在使用 Argparse 编写一个命令行实用程序，并添加了一堆 sub_parsers（子命令）。在帮助菜单中，它们出现在名为“命令”的组下，我得到了所有可能选项的不错列表。然而，在此列表出现之前，所有相同的命令都出现在大括号中的组标题下，如下所示：

```
Commands:
    {foo, bar}

    foo          - foo does foo
    bar          - bar does bar 
```

我想删除出现在大括号中的多余条目。它只出现在这个充满 sub_parsers 的组中。

我处理这个问题的代码如下所示：（其中 parser 是 ArgumentParser() 实例）

```
subparsers = parser.add_subparsers(title="Commands")

foo = subparsers.add_parser("foo", help="- foo does foo")
bar = subparsers.add_parser("bar", help="- bar does bar") 
```

我查看了我的命令操作组的属性和方法，似乎找不到任何可以为我解决这个问题的东西（至少从我能理解的情况来看）。我不确定是否有其他人处理过这个问题，我意识到这可能有点晦涩难懂。再一次，我要做的就是找到删除出现在大括号中的命令的冗余列表的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-04T15:11:46.500

“{foo,bar}”部分是参数“metavar”。元变量是 argparse 引用用法和帮助字符串中的预期参数值的方式。argparse 将子命令视为具有多个选项的参数，因此如果您不指定元变量，则默认值是花括号中的选项列表（子命令）。它让用户知道子命令的可能选项，但由于它们列在下面，它是多余的，如果你有很多子命令，它就很难看。

您可以轻松地用自己选择的元变量替换：

```
subparsers = parser.add_subparsers(title="Commands", metavar="<command>") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-01T16:15:02.210

在深入研究 argparse 源代码之后，我构建了一个*hack*来删除多余的`{cmd1,...}`选择列表。

hack 实现了一个自定义帮助格式化程序，它`HelpFormatter`在处理子解析器操作时修改了格式化方法。具体来说，它删除了子命令参数组中的子解析器`metavar`和 `help`行，并删除了这些子命令的额外缩进。

*请小心使用*。

python 3版本，用python3.6测试

```
from argparse import ArgumentParser, HelpFormatter, _SubParsersAction

class NoSubparsersMetavarFormatter(HelpFormatter):

    def _format_action(self, action):
        result = super()._format_action(action)
        if isinstance(action, _SubParsersAction):
            # fix indentation on first line
            return "%*s%s" % (self._current_indent, "", result.lstrip())
        return result

    def _format_action_invocation(self, action):
        if isinstance(action, _SubParsersAction):
            # remove metavar and help line
            return ""
        return super()._format_action_invocation(action)

    def _iter_indented_subactions(self, action):
        if isinstance(action, _SubParsersAction):
            try:
                get_subactions = action._get_subactions
            except AttributeError:
                pass
            else:
                # remove indentation
                yield from get_subactions()
        else:
            yield from super()._iter_indented_subactions(action)

parser = ArgumentParser(formatter_class=NoSubparsersMetavarFormatter)
subparsers = parser.add_subparsers(title="Commands")

foo = subparsers.add_parser("foo", help="- foo does foo")
bar = subparsers.add_parser("bar", help="- bar does bar")

parser.parse_args(['-h']) 
```

python 2版本，用python2.7测试

```
from argparse import ArgumentParser, HelpFormatter, _SubParsersAction

class NoSubparsersMetavarFormatter(HelpFormatter):

    def _format_action(self, action):
        result = super(NoSubparsersMetavarFormatter,
                       self)._format_action(action)
        if isinstance(action, _SubParsersAction):
            return "%*s%s" % (self._current_indent, "", result.lstrip())
        return result

    def _format_action_invocation(self, action):
        if isinstance(action, _SubParsersAction):
            return ""
        return super(NoSubparsersMetavarFormatter,
                     self)._format_action_invocation(action)

    def _iter_indented_subactions(self, action):
        if isinstance(action, _SubParsersAction):
            try:
                get_subactions = action._get_subactions
            except AttributeError:
                pass
            else:
                for subaction in get_subactions():
                    yield subaction
        else:
            for subaction in super(NoSubparsersMetavarFormatter,
                                   self)._iter_indented_subactions(action):
                yield subaction

parser = ArgumentParser(formatter_class=NoSubparsersMetavarFormatter)
subparsers = parser.add_subparsers(title="Commands")

foo = subparsers.add_parser("foo", help="- foo does foo")
bar = subparsers.add_parser("bar", help="- bar does bar")

parser.parse_args(['-h']) 
```

样本输出：

```
usage: a.py [-h] {foo,bar} ...

optional arguments:
  -h, --help  show this help message and exit

Commands:
  foo         - foo does foo
  bar         - bar does bar 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T19:43:02.387

您可以通过编写自己的格式化程序类、基于`argparse.HelpFormatter`的接口并使用参数将其传递给解析器的构造函数来自定义帮助消息格式`formatter_class`。

有关更多详细信息，请参阅[http://docs.python.org/dev/library/argparse.html#formatter-class](http://docs.python.org/dev/library/argparse.html#formatter-class)

# wordpress - 另一个Cannot modify header information headers already sent by ... script.php ... pluggable.php问题

> ID：11070269
> 
> 赞同：0
> 
> 时间：2012-06-17T09:29:28.197
> 
> 标签：wordpress

这是我的代码。这是我的 scripts.php 包含文件。这是我在尝试访问 WordPress 网站的管理面板时遇到的错误。

警告：无法修改标头信息 - 标头已由 /home/xar19/public_html/backlinks5/ 中的（输出开始于 /home/xar19/public_html/backlinks5/wp-content/plugins/bounce_rate_buddy3/includes/scripts.php:12）发送wp-includes/pluggable.php 在第 866 行

我已经检查了所有其他公司。文件，他们没有？> 我发现这不是必需的。然而，有一次他们有一个结束？>我仍然得到完全相同的错误。我试图将按钮脚本移动到所有其他脚本 src 文件之上，但我仍然遇到错误。

可能是因为它们是匿名函数吗？该插件有效，我无法再访问我的管理员。

当我使用 localhost 并在那里加载我的插件文件时，我没有收到任何错误。但是我认为这仅仅是因为它具有最新版本的 php。此外，出于调试目的，我还禁用了所有其他插件。

几天来我一直在努力解决这个问题，并且因为我认为可能是一个基本问题的事情而失去了很多睡眠。

非常感谢，

丹妮尔

```
<?php 
/****************************************
*script control
****************************************/

function brb_load_scripts() {
    wp_enqueue_style('brb-styles', plugin_dir_url( __file__ ) . 'css/plugin_styles.css');
}

add_action('wp_enqueue_scripts', 'brb_load_scripts');

<script src="wp-content/plugins/bounce_rate_buddy3/includes/js/jquery-1.7.2.js"></script>
<script src="wp-content/plugins/bounce_rate_buddy3/includes/js/jquery.effects.core.js"></script>
<script src="wp-content/plugins/bounce_rate_buddy3/includes/js/jquery.effects.slide.js"></script>

<script src="wp-content/plugins/bounce_rate_buddy3/includes/js/slider.js"></script>

<script>

 (function() {

 $(document).ready(function(){

    $("button").click(function(){
      $(".wrap").slideToggle("slow");
      $(this).toggleClass("button"); return false;
    });

  });

})(); 
</script> 
```

**更新：**

我能够通过设置一个新的 php 文件并在之后添加所有内容来访问 wp-admin

" `add_action('wp_enqueue_scripts', 'brb_load_scripts');`"

这给我留下了 2 个文件，一个加载 CSS/样式，一个包含我的 JQuery 脚本。

所以现在我只在更改主题或更改我为插件设置的设置时遇到标题错误。这仍然会更改主题和设置，但会出现错误，我需要重新加载主页以查看更改。

我应该提到我在激活时仍然会收到此错误。

" `The plugin generated 596 characters of unexpected output during activation. If you notice “headers already sent” messages, problems with syndication feeds or other issues, try deactivating or removing this plugin.`"

实际上我从“ `<script src="<?php bloginfo( 'wpurl' ); ?>/wp-content/plugins/bounce_rate_buddy3/includes/js/jquery-1.7.2.js"></script>`” 更改了脚本

回到“ `<script src="wp-content/plugins/bounce_rate_buddy3/includes/js/jquery-1.7.2.js"></script>`”

因为要么仍然给我错误，但下面建议的第一个会导致 630 个字符的意外输出，而不仅仅是 596 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:55:21.643

试着把 `<?php bloginfo( 'wpurl' ); ?>`你的脚本链接放在前面。

```
<script src="<?php bloginfo( 'wpurl' ); ?>/wp-content/plugins/bounce_rate_buddy3/includes/js/jquery-1.7.2.js"></script>
<script src="<?php bloginfo( 'wpurl' ); ?>/wp-content/plugins/bounce_rate_buddy3/includes/js/jquery.effects.core.js"></script>
<script src="<?php bloginfo( 'wpurl' ); ?>/wp-content/plugins/bounce_rate_buddy3/includes/js/jquery.effects.slide.js"></script>

<script src="<?php bloginfo( 'wpurl' ); ?>/wp-content/plugins/bounce_rate_buddy3/includes/js/slider.js"></script> 
```

这将正确加载脚本。核实。

# post - WSO2 ESB 中的条带代理服务

> ID：11070275
> 
> 赞同：0
> 
> 时间：2012-06-17T09:30:20.033
> 
> 标签：post, curl, wso2, stripes, wso2esb

我在 wso2 中代理了 Stripe Web 服务，但我无法使用 curl 以及创建 HttpClient 来发布数据。

相关文件内容：wso2中的synapse配置文件---

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://ws.apache.org/ns/synapse">
    <registry provider="org.wso2.carbon.mediation.registry.WSO2Registry">
        <parameter name="cachableDuration">15000</parameter>
    </registry>
    <proxy name="stripe" transports="https http" startOnLoad="true" trace="disable">
        <target>
            <endpoint>
                <address uri="https://api.stripe.com/v1"/>
            </endpoint>
            <inSequence/>
            <outSequence>
                <log level="full"/>
                <send/>
            </outSequence>
        </target>
    </proxy>
    <sequence name="fault">
        <log level="full">
            <property name="MESSAGE" value="Executing default 'fault' sequence"/>
            <property name="ERROR_CODE" expression="get-property('ERROR_CODE')"/>
            <property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')"/>
        </log>
        <drop/>
    </sequence>
    <sequence name="main">
        <in>
            <log level="full"/>
            <filter source="get-property('To')" regex="http://localhost:9000.*">
                <send/>
            </filter>
        </in>
        <out>
            <send/>
        </out>
        <description>The main sequence for the message mediation</description>
    </sequence>
</definitions> 
```

和 cURL POST 请求，如 stripe api 中所述：代理端点：`https://127.0.0.1:8243/services/stripe` Stripe Endpoint：[https ://api.stripe.com/v1](https://api.stripe.com/v1)

```
curl https://127.0.0.1:8243/services/stripe/customers    -u ******************:    -d "description=Customer for example@gmail.com"   -d "card[number]=4242424242424242"   -d "card[exp_month]=6"   -d "card[exp_year]=2013"  --insecure 
```

我也试过

```
curl https://127.0.0.1:8243/services/stripe/customers    -u ******************:    -d "description=Customer for example@gmail.com"   -d "card[number]=4242424242424242"   -d "card[exp_month]=6"   -d "card[exp_year]=2013"  --insecure -H "Content-Type : application/json" 
```

和

```
curl https://127.0.0.1:8243/services/stripe/customers    -u ******************:    -d "description=Customer for example@gmail.com"   -d "card[number]=4242424242424242"   -d "card[exp_month]=6"   -d "card[exp_year]=2013"  --insecure -H "Accept : application/json" 
```

和我在执行上述请求期间遇到的错误：

```
[2012-06-17 14:49:47,130]  WARN - ClientHandler Received an unexpected response - of content type : text/html and status code : 411 with reason : Length Required For : 50.18.195.3:443 For Request : Axis2Request [Message ID : urn:uuid:93391e51-d026-4c6e-9279-9d82101ab4a5] [Status Completed : true] [Status SendingCompleted : true]
[2012-06-17 14:49:47,137]  WARN - ClientWorker Unexpected response received. HTTP response code : 411 HTTP status : Length Required exception : com.ctc.wstx.exc.WstxParsingException: Unexpected close tag </body>; expected </hr>.
 at [row,col {unknown-source}]: [6,6]
[2012-06-17 14:49:47,153] ERROR - NativeWorkerPool Uncaught exception
java.lang.ClassCastException: org.apache.axiom.om.impl.llom.OMTextImpl cannot be cast to org.apache.axiom.om.OMElement
    at org.apache.synapse.util.MessageHelper.cloneSOAPFault(MessageHelper.java:441)
    at org.apache.synapse.util.MessageHelper.cloneSOAPEnvelope(MessageHelper.java:254)
    at org.apache.synapse.core.axis2.SOAPUtils.convertSOAP11toSOAP12(SOAPUtils.java:95)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.handleMessage(SynapseCallbackReceiver.java:323)
    at org.apache.synapse.core.axis2.SynapseCallbackReceiver.receive(SynapseCallbackReceiver.java:160)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
    at org.apache.synapse.transport.nhttp.ClientWorker.run(ClientWorker.java:275)
    at org.apache.axis2.transport.base.threads.NativeWorkerPool$1.run(NativeWorkerPool.java:173)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我的 axi2.xml 有以下格式化程序和构建器：

```
<messageFormatters>
        <messageFormatter contentType="application/x-www-form-urlencoded"
                          class="org.apache.axis2.transport.http.XFormURLEncodedFormatter"/>
        <messageFormatter contentType="multipart/form-data"
                          class="org.apache.axis2.transport.http.MultipartFormDataFormatter"/>
        <messageFormatter contentType="application/xml"
                          class="org.apache.axis2.transport.http.ApplicationXMLFormatter"/>
        <messageFormatter contentType="text/xml"
                         class="org.apache.axis2.transport.http.SOAPMessageFormatter"/>
        <messageFormatter contentType="application/soap+xml"
                         class="org.apache.axis2.transport.http.SOAPMessageFormatter"/>

        <!--JSON Message Formatters-->
        <messageFormatter contentType="application/json"
                          class="org.apache.axis2.json.JSONMessageFormatter"/>
        <messageFormatter contentType="application/json/badgerfish"
                          class="org.apache.axis2.json.JSONBadgerfishMessageFormatter"/>
        <messageFormatter contentType="text/javascript"
                          class="org.apache.axis2.json.JSONMessageFormatter"/>

        <!--messageFormatter contentType="application/x-www-form-urlencoded"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="multipart/form-data"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="application/xml"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="text/html"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="application/soap+xml"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="text/xml"
                        class="org.wso2.carbon.relay.ExpandingMessageFormatter"/-->
        <!--messageFormatter contentType="x-application/hessian"
                         class="org.apache.synapse.format.hessian.HessianMessageFormatter"/-->
        <!--messageFormatter contentType=""
                         class="org.apache.synapse.format.hessian.HessianMessageFormatter"/-->
    </messageFormatters>

    <!-- ================================================= -->
    <!--                Message Builders                   -->
    <!-- ================================================= -->

    <!-- Following content type to builder mapping can be used to implement support for -->
    <!-- different message formats in Axis2\. These message formats are expected to be -->
    <!-- resolved based on the content type. -->
    <messageBuilders>
        <messageBuilder contentType="application/xml"
                        class="org.apache.axis2.builder.ApplicationXMLBuilder"/>
        <messageBuilder contentType="application/x-www-form-urlencoded"
                        class="org.apache.axis2.builder.XFormURLEncodedBuilder"/>
        <messageBuilder contentType="multipart/form-data"
                        class="org.apache.axis2.builder.MultipartFormDataBuilder"/>

        <!--JSON Message Builders-->
        <messageBuilder contentType="application/json"
                        class="org.apache.axis2.json.JSONOMBuilder"/>
        <messageBuilder contentType="application/json/badgerfish"
                        class="org.apache.axis2.json.JSONBadgerfishOMBuilder"/>
        <messageBuilder contentType="text/javascript"
                        class="org.apache.axis2.json.JSONOMBuilder"/>

    <!--messageBuilder contentType="application/xml"
                        class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="application/x-www-form-urlencoded"
                        class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="multipart/form-data"
                        class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="multipart/related"
                       class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="application/soap+xml"
                       class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="text/plain"
                       class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="text/xml"
                       class="org.wso2.carbon.relay.BinaryRelayBuilder"/-->
        <!--messageBuilder contentType="x-application/hessian"
                        class="org.apache.synapse.format.hessian.HessianMessageBuilder"/-->
        <!--messageBuilder contentType=""
                         class="org.apache.synapse.format.hessian.HessianMessageBuilder"/-->
    </messageBuilders> 
```

我无法理解是什么导致了dis问题....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:06:50.637

在您的序列中定义以下属性并检查..

```
<property name="messageType" scope="axis2" value="application/json"/> 
```

# c# - 在 Linq To SQL 和 C# 中求和时间间隔

> ID：11070280
> 
> 赞同：2
> 
> 时间：2012-06-17T09:30:28.097
> 
> 标签：c#, linq-to-sql, datetime, sum

我需要总结工作时间。我有 2 个字段：**startTime**和**endTime**。是“ ***datetime*** ”和“ ***nullable*** ”

我试过了，但它返回错误：

```
var timeWorked = res.AsEnumerable()
                    .Sum(f => f.endTime.HasValue ? f.endTime.Value : 0 - f.startTime .HasValue ? f.startTime .Value : 0); 
```

**错误**：“运算符'-'不能应用于'bool'和'int'类型的操作数”

上面的代码在以下上下文中

```
 try
 {                           
     using (serviciosDBDataContext miDataContext = new serviciosDBDataContext("Data Source='xxxxxxx'"))
      {
          var res = (from p in miDataContext.works
                     select new
                      {
                           p.idWork,
                           p.status,
                           p.amount,
                           p.startTime,
                           p.endTime    
                      }).ToList();                                 
//HOURS WORKED

    var timeWorked = res.AsEnumerable()
                        .Sum(f => f.endTime.HasValue ? f.endTime.Value : 0 - f.startTime .HasValue ? f.startTime .Value : 0);       
      }    
 }
 catch (Exception)
 {
        MessageBox.Show(AppResources.errCargaEstad);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:33:23.970

您可以在此处使用[GetValueOrDefault](http://msdn.microsoft.com/en-us/library/72cec0e0.aspx)和[Aggregate](http://msdn.microsoft.com/en-us/library/bb548651)方法：

```
var timeWorked = res.AsEnumerable().Aggregate(TimeSpan.Zero, (total, f) => total + (f.endTime.GetValueOrDefault() - f.startTime.GetValueOrDefault()); 
```

仅供参考，在您的示例中存在优先级问题，即评估以下内容：

```
f.endTime.HasValue ? f.endTime.Value : (0 - f.startTime.HasValue) 
```

`int`此外，an和 a之间没有隐式转换`DateTime`，因此条件三元运算符不能成功。

**更新**

您可以访问 TimeSpan 的`TotalMilliseconds`, `TotalSeconds`...[属性](http://msdn.microsoft.com/en-us/library/system.timespan_properties%28v=vs.110%29)以在需要数字类型的方法中使用这些值，但是如果您正在处理时间段，则 TimeSpan 结构是专门为此目的而创建的，并且更容易对 IMO 进行代码推理。

**更新 2**

好的，根据您对工作时间的评论，我建议将变量从`timeWorked`to重命名，`hoursWorked`因为表示名称中没有给出单位的时间的 int 可能会被误解。您需要的属性是[TotalHours](http://msdn.microsoft.com/en-us/library/system.timespan.totalhours%28v=vs.110%29)。这将返回 a `double`，您可以显式转换为 a `int`，但是可能会丢失精度：

```
var hoursWorked = (int)res.Sum(f => (f.endTime.GetValueOrDefault() - f.startTime.GetValueOrDefault()).TotalHours); 
```

此外，由于您正在调用`ToList`创建`res`列表，这会将结果强制存储到内存中，因此调用 to`AsEnumerable`是不必要的。

# jquery - 如果调用，jQuery 会等待 Ajax

> ID：11070284
> 
> 赞同：1
> 
> 时间：2012-06-17T09:30:51.253
> 
> 标签：jquery, ajax, variables, wait

我有以下代码：

```
var table = new Array();
function getTableData(year) {
    if (!table.hasOwnProperty(year)) {
        $.ajax({
            ...
            success: function(data) {
                table[year] = data;
            }
        });
    }
} 
```

所以，我希望这个函数做的基本上是检查，如果我之前调用过那个 Ajax 请求，如果我有，不要再次调用它，而是返回之前加载的数据。

这就像一个魅力。什么不起作用是这样的：

```
function showTable(year) {
    $('#loadingAnimation').show();
    $('#tableDiv').ajaxComplete(function() {
        // insert data into table
    }
    $('#loadingAnimation').hide();
} 
```

只要之前没有加载数据（即 table[year] 还不存在），就会执行 ajax-request，当它完成时，数据被插入到表中，一切正常。但是当 table[year] 确实存在时，我的函数没有任何等待，我得到一个空白表和加载动画。

我之前尝试过将 ajax-request 设置为同步并且不要让我的函数调用“ajaxComplete”，然后一切正常，但我根本没有加载动画，屏幕只是在等待期间冻结。

有什么想法可以让我的脚本工作吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:49:17.987

有什么理由`showTable()`是单独的功能吗？如在初始加载后刷新表数据的单独按钮？

否则，您最好将加载动画直接添加到您的工作代码中，如下所示：

```
if (!table.hasOwnProperty(year)) {
    $('#loadingAnimation').show(); //start querying for data, display the icon
    $.ajax({
        ...
        success: function(data) {
            $('#loadingAnimation').hide(); //data found, hide icon
            table[year] = data;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:41:39.253

您可以尝试通过设置一个变量来存储上一个表[年份]。因此，在您随后的所有调用中，您将在执行任何其他操作之前对其进行检查。例如。就像是 -

```
// An example from a dynamic AJAX gallery I had built        
var 
// ...,
prepareMarkup,
loadResults,
resultsCache = {},
// ...
;

loadResults = function(req, category, tracker) {
// I am calling loadResults on every click (navigation in ur case)
// to load galleries
// thus, tracker is different for each link

if (req && req !== "") {
    // I am using a tracker by setting to a link, 
    // which keeps track of those that users have already clicked 
    // at least once
    if (typeof resultsCache[tracker] === "object" 
        && resultsCache[tracker].lookbookResults.length > 0) {
        // Load from cache instead
        buildLookbook(resultsCache[tracker], category);
        return;
    }

    $.ajax({
        type: "GET",
        url: "/bin/content/lookbook",
        data: "lookbook-feed=" + req + "&siteName=" + APP.Site.siteRoot,
        dataType: "json",
        success: function(response) {
            // Set cache
            resultsCache[tracker] = response;

            // Go ahead to build UI
            buildLookbook(response, category);
        },

//... 
```

希望这就是你要找的

# javascript - 来自 Flickr 的 JS 输出的正则表达式

> ID：11070285
> 
> 赞同：0
> 
> 时间：2012-06-17T09:31:22.423
> 
> 标签：javascript, regex, flickr

我在我的网站上使用[Flickr 徽章 Javascript](http://www.flickr.com/badge.gne "Flickr 徽章")，但图像大小选项有限。所以我认为正则表达式可能会有所帮助，因为 Flickr 提供了更多的图像尺寸（只是不是通过徽章脚本），但我不确定这是否有效，因为如果无法查看图像列表（如 html 中）您仅通过 Firebug/Safari 元素信息单击“查看源代码”。

所有图像 url 都以下划线和图像大小的特定字符结尾，所以我想替换`_t.jpg" alt="A Picture from Flickr"`为，`_q.jpg" alt="A Picture from Flickr"`因为**_t**代表 75px 方形缩略图，**_q**代表 150px 方形缩略图（这是我想要的尺寸。

[您可以在我的主页](http://martensen.co/ "主页")上看到正在使用的徽章。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:39:36.847

您可以尝试这样的事情（假设这`images`是您的缩略图的集合）

```
for (var i = 0, il = images.length; i < il; i++)
    images[i].href = images[i].href.replace(/_t\.jpg/g, "_q.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:42:47.433

查看您网站的源代码，指向 flickr 脚本的链接如下所示：

```
src="http://www.flickr.com/badge_code_v2.gne?count=6&amp;display=random&amp;&amp;source=user&amp;user=8066182@N06&amp;size=s" 
```

我对 flickr 不熟悉，但您能否将最后的尺寸参数更改为“m”（中）或“l”（大）？

如果失败并且您不经常更改图片，则可以使用 firebug 复制脚本并手动更改文件名。然后参考您的本地脚本，而不是 flicker 上托管的脚本。

# php - 无法在 PHP 中使用 FTP 上传文件

> ID：11070288
> 
> 赞同：0
> 
> 时间：2012-06-17T09:32:10.730
> 
> 标签：php, ftp

刚才我的 FTP 文件上传部分出错了。我无法使用 PHP 通过 ftp 上传文件。我输入的代码如下：

```
 <?php
$conn_id = ftp_connect(localhost);
$login_result = ftp_login($conn_id, 'newuser', 'wampp') or die("Could Not Connect To FTP Server");
$image = $_FILES['image']['tmp_name'];
$upload = ftp_put($conn_id, 'sri/image.jpg', $image, FTP_ASCII);
?> 
```

它显示的错误如下：

```
Warning: ftp_put() [function.ftp-put]: Filename invalid in D:\xampp\htdocs\mycloud\edit.php on line 7 
```

请帮我摆脱这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:59:42.827

我认为通过FTP上传文件的过程必须是：

1.  连接到 FTP 服务器
2.  登录 FTP 服务器（如果适用）
3.  更改到正确的目录 - （我相信您需要在尝试上传 sri 文件夹中的文件之前执行此操作）。所以你需要去 sri 文件夹。
4.  上传文件（所以在你的情况下它应该是 image.jpg 而不是 sri/image.jp ）
5.  然后关闭与 FTP 服务器的连接。

要将当前目录更改为正确的目录，我认为您需要执行以下操作：

```
if(ftp_chdir($conn_id, "sri"))
{
    echo "Current directory is now: " . ftp_pwd($conn_id) ;
}
else 
{ 
    echo "Error could not change directory";
} 
```

[有关更改目录的更多信息](http://uk3.php.net/manual/en/function.ftp-chdir.php)

# wcf - 使用 WCF 运行 UDP 服务器？

> ID：11070289
> 
> 赞同：1
> 
> 时间：2012-06-17T09:32:12.127
> 
> 标签：wcf, udp, .net-4.5

我一直在研究创建 UDP 服务器，起初我虽然我必须获得一个专用服务器，因为我想在服务器上运行 EXE，但我目前有一个共享服务器，我相信大多数端口都是开放的。

我注意到使用 WCF 4.5（预发行版）您可以创建 UDP 服务，这些服务的工作方式是否与 UDP 服务器相同，因此客户端可以以相同的方式（即 UDPClient 类）向 UDP 服务发送消息。

我认为这仅适用于 4.5 而不是 4 / 3.5？

使用 UDP 绑定运行 UDP 服务器与 WCF 服务的优缺点是什么？

至于托管 UDP WCF 服务，这可以像标准 WCF HTTP 服务一样在 IIS 上完成吗？

还是需要控制台应用程序？当然，如果需要控制台应用程序或类似的东西，那么这对我没有帮助，因为我仍然需要一个专用服务器来托管该项目。这是我有点困惑的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:41:57.707

这是我[在 WCF 4.5 的新增功能中读到的内容？UDP传输支持](http://blogs.microsoft.co.il/blogs/idof/archive/2012/02/15/what-s-new-in-wcf-4-5-udp-transport-support.aspx)：

> IIS/WAS 不支持绑定，因为仍然没有 WAS 的 UDP 共享侦听器

# c# - “Dispose”是否将设置为同一对象的类的每个实例都处理掉？

> ID：11070296
> 
> 赞同：3
> 
> 时间：2012-06-17T09:32:56.273
> 
> 标签：c#, .net, sql, dispose

由于`SqlConnection`和`SqlCommand`implement `IDisposable`，我将它们包装在`using`语句中。

但是，我在方法中创建它们，然后将它们传递给`using`语句，因此想知道右括号是否`using`会处理`SqlCommand`由方法创建的。

所以我尝试了这个：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlCommand command = new SqlCommand();
    command.CommandTimeout = 10;
    command.Disposed += s_Disposed;    
    using (SqlCommand tempCommand = command) { }//This is where even "command" is supposed to get disposed.
    Text = command.CommandTimeout.ToString();
}

void s_Disposed(object sender, EventArgs e)
{
    MessageBox.Show("Disposed");
} 
```

并且惊讶地看到`MessageBox`确实显示暗示它已被处置，但文本是“10”。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:44:54.763

通常，实现`IDisposable`（例如 an `SqlConnection`）的对象这样做是因为宇宙中某处的某物（例如 SQL 服务器）已被要求代表它们做某事（例如打开并保持连接），并且将继续这样做，直到另有指示. 一般来说，如果`IDisposable`对象要接受它期望接收的请求（例如执行 SQL 操作），则需要让那些外部事物代表它进行操作。的目的`Dispose`不是实际销毁调用它的对象，而是让对象知道，由于没有其他人需要它，它应该反过来让任何代表它做任何事情的外部实体知道他们不再需要这样做（例如，因为没有人会问`SqlConnection`要执行更多请求，它不再需要服务器为其保持连接打开）。

如果在`Dispose`调用一个对象之后，它被要求做一些需要外部实体帮助而不再可用的事情，那么对象抛出`ObjectDisposedException`自己*比让动作以某种其他方式失败要好*. 另一方面，如果一个对象被要求做一些可以在不使用外部实体的情况下完美完成的事情，那么它通常是适合的。使用`IDisposable`对象的代码通常应避免使用`Dispose`未明确记录为保持可用的任何成员，并应避免假设在之后仍然有用的成员`Dispose`在一个版本的类上总是会这样做。尽管如此，在许多情况下，一个类指定特定成员可以在之后使用`Dispose`比通过努力确保它们不能使用更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:41:55.357

它确实正确地处理了`SqlCommand`实例，并且您对它有多少引用并不重要。无论如何，它们都指向同一个实例。

但是，`CommandTimeout`即使在已处置的对象上也不会引发异常。

# cuda - 定时 CUDA 内核

> ID：11070298
> 
> 赞同：0
> 
> 时间：2012-06-17T09:33:15.807
> 
> 标签：cuda

大家好，我目前正在为我的一些 CUDA 代码计时。我能够使用事件为他们计时。我的内核运行了 19 毫秒。不知何故，我觉得这很可疑，因为当我运行它的顺序实现时，它大约是 5000 毫秒。我知道代码应该运行得更快，但它应该这么快吗？

我正在使用包装函数在我的 cpp 程序中调用 cuda 内核。我应该在那里或在 .cu 文件中调用它们吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:31:51.527

The obvious way to check if your program is working would be to compare the output to that of your CPU based implementation. If you get the same output, it is working by definition, right? :)

If your program is experimental in such a way that it doesn't really produce any verifiable output then there is a good chance that the compiler has optimized out some (or all) of your code. The compiler will remove code that does not contribute to output data. This can cause, for instance, that the entire contents of a kernel is removed if the final statement that stores the calculated value is commented out.

As to your speedup. 5000ms / 19ms = 263x, which is an unlikely increase, even for algorithms that map perfectly to the GPU architecture.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:08:51.377

好吧，如果你正确地编写了你的​​ CUDA 代码，是的，它可能会快得多。想想看。您将代码从单个处理器上的顺序执行移动到数百个处理器上的并行执行，具体取决于您的 GPU 型号。我 179 美元的中档显卡有 480 个内核。现在一些可用的有 1500 个内核。使用 CUDA 非常有可能获得 100 倍的性能跳跃，特别是如果您的内核比内存限制更多的计算绑定。

也就是说，确保你测量的是你认为你正在测量的东西。如果您在不使用任何显式流的情况下调用 CUDA 内核，则调用与主机线程同步，并且您的时间应该是准确的。如果您使用流调用内核，则需要调用 cudaDeviceSynchronise() 或让主机代码等待内核发出的事件信号。在流上调用的内核调用与主机线程异步执行，因此主机线程中的时间测量将无法正确反映内核时间，除非您让主机线程等待内核调用完成。您还可以使用 CUDA 事件来测量给定流中 GPU 上的经过时间。请参阅 NVidia GPU Computing SDK 4.2 中 CUDA 最佳实践指南的第 5.1.2 节。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-17T10:50:35.427

在我自己的代码中，我使用该`clock()`函数来获取精确的时间。为方便起见，我有宏

```
enum {
    tid_this = 0,
    tid_that,
    tid_count
    };
__device__ float cuda_timers[ tid_count ];
#ifdef USETIMERS
 #define TIMER_TIC clock_t tic; if ( threadIdx.x == 0 ) tic = clock();
 #define TIMER_TOC(tid) clock_t toc = clock(); if ( threadIdx.x == 0 ) atomicAdd( &cuda_timers[tid] , ( toc > tic ) ? (toc - tic) : ( toc + (0xffffffff - tic) ) );
#else
 #define TIMER_TIC
 #define TIMER_TOC(tid)
#endif 
```

然后可以使用这些来检测设备代码，如下所示：

```
__global__ mykernel ( ... ) {

    /* Start the timer. */
    TIMER_TIC

    /* Do stuff. */
    ...

    /* Stop the timer and store the results to the "timer_this" counter. */
    TIMER_TOC( tid_this );

    } 
```

然后您可以阅读`cuda_timers`主机代码中的内容。

几点注意事项：

*   计时器在每个块的基础上工作，即如果您有 100 个块执行同一个内核，则将存储它们所有时间的总和。
*   计时器计算时钟滴答的数量。要获得毫秒数，请将其除以设备上的 GHz 数，然后乘以 1000。
*   计时器会稍微减慢您的代码速度，这就是为什么我将它们包装在其中`#ifdef USETIMERS`以便您可以轻松地关闭它们。
*   虽然`clock()`返回类型为 的整数值`clock_t`，但我将累积值存储为`float`，否则对于耗时超过几秒的内核（在所有块上累积），这些值将环绕。
*   选择`( toc > tic ) ? (toc - tic) : ( toc + (0xffffffff - tic) ) )`是必要的，以防时钟计数器回绕。

# c# - 如何检查 e.result？

> ID：11070299
> 
> 赞同：1
> 
> 时间：2012-06-17T09:33:16.027
> 
> 标签：c#, wcf, windows-phone-7

我想`e.result`在将数据泵入我的列表框之前得到它。我想检查它是否`e.result`为空或有值。我的编码是这样的

```
public Page1(string s)
{
    InitializeComponent();
    Service1Client proxy = new Service1Client();
    proxy.FindEmployeeCompleted += new EventHandler<FindEmployeeCompletedEventArgs>(proxy_FindEmployeeCompleted);
    proxy.FindEmployeeAsync(s);
}
void proxy_FindEmployeeCompleted(object sender, FindEmployeeCompletedEventArgs e)
{
    if(e.Result!=null)
    {
      listBox1.ItemsSource = e.Result;
    }
    else
    {
     MessageBox.Show("Invalid username or password.");
    }
} 
```

但是在我执行编码之后，消息框没有出现......我错过了任何代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:58:07.010

```
static void proxy_FindEmployeeCompleted(object sender, FindEmployeeCompletedEventArgs e)
{
    if (e.Error != null)
    {
        MessageBox.Show(e.Error.Message);
    }
    else if (e.Result != null)
    {
        // you can check results here. 
        if (e.Result.Any())
        {
            listBox1.ItemsSource = e.Result;
        }else
        {
            // empty result, show message or whatever 
        }
    }
    else
    {
        MessageBox.Show("Invalid username or password.");
    }
} 
```

# javascript - 表单还是 jQuery Ajax？

> ID：11070301
> 
> 赞同：1
> 
> 时间：2012-06-17T09:33:27.650
> 
> 标签：javascript, jquery, ajax, forms

当表单使用 GET 方法发送变量时，URL 会发生变化，以这种方式传递您传递的变量

```
url?variable=.... 
```

如何使用 jQuery Ajax 获得相同的结果？可能吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:48:40.057

在包含此代码的 php 布局/视图文件中设置路径

```
<script>
   var path="<?php echo $this->webroot;?>";
</script> 
```

并添加以下 jquery*代码*以通过 ajax 发布数据。

```
$.ajax({
         type: 'POST',
         url: path+'homes/createEvent',
             data: {eventname:eventname,manager:manager},
         async: false,
         success: function(resulthtml)
                 {
        alert(resulthtml);
         },
         error: function(message)
                 {
        alert('error');
         }  
}); 
```

在 home_controller.php 上，您将在 createEvent 函数中获取此 ajax 数据，

```
<?php
    function createEvent()
    {
       $eventName=$_POST['eventname'];
       $manager=$_POST['manager'];
    }
?> 
```

# android - Android 开发：限制用户只能运行和使用我的应用程序

> ID：11070304
> 
> 赞同：6
> 
> 时间：2012-06-17T09:34:19.110
> 
> 标签：android, restriction

我正在开发用于 CAR 的 android 应用程序，我需要在手机或平板电脑中，驱动程序只能运行和使用这个应用程序：不能调用或运行其他应用程序。那可能吗？如果不是，有什么方法可以限制用户，例如卸载其他应用程序，禁用安装系统和禁用呼叫系统？

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T10:08:18.583

我做过一个类似的应用程序，它实际上是一个驾驶室内的娱乐系统。我还写了一篇关于它的博客文章，你可以在这里查看：http: [//arnab.ch/blog/2012/01/android-auto-updating-homescreen-application/](http://arnab.ch/blog/2012/01/android-auto-updating-homescreen-application/)。

这是一个复杂的应用程序，让我为您列出相关项目：

1.  您的应用程序应该是 HomeScreen 应用程序（搜索 google 以了解如何为 Android 创建 HomeScreen 应用程序）
2.  很明显，您可以对设备进行一些控制，因此您可以确保没有安装其他应用程序。
3.  主屏幕可以动态启用/禁用，请查看 KytePhone 应用了解我的意思。简而言之，您需要一些密码才能退出 HomeScreen 应用程序。
4.  如果您想以静默方式卸载/安装任何应用程序，那么您需要 root 访问权限，或者您必须有一个自定义的 Android 版本，您的应用程序将具有系统权限（可能不是您想要的）。

我希望我能给你一些指导，如果有什么不清楚的，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T11:46:35.647

您可以使用 Accessibility 服务来解决此问题，您需要在 onAccessibilityEvent 方法中检查已授予的应用程序包。

```
import android.accessibilityservice.AccessibilityService;

public class MyAccessibilityService extends AccessibilityService {
...
    @Override
    public void onAccessibilityEvent(AccessibilityEvent event) {
    }

    @Override
    public void onInterrupt() {
    }

...
} 
```

请点击链接：[https ://developer.android.com/training/accessibility/service.html](https://developer.android.com/training/accessibility/service.html)

# ruby-on-rails - 在 Rails 3.2 应用程序中使用非英文字符导致意外错误

> ID：11070305
> 
> 赞同：2
> 
> 时间：2012-06-17T09:34:20.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

好吧，这很奇怪，让我描述一下场景

我为我的 rails 应用程序定义了这个邮件程序

```
class DeliveryMail < ActionMailer::Base
  default from: "from@example.com"

  def document_upload_mail(user,document)
     @user = user
     @document = document
     mail(:to => user.email ,:subject =>  "Envió de enlace descarga documentos resultados domain") do |format|
      format.html { render "upload_file" }
     end
  end
end 
```

现在的问题是这个西班牙语文本

```
Envió de enlace descarga documentos resultados domain 
```

每当我将此设置为邮件的主题时

```
:subject => "Envió de enlace descarga documentos resultados domain" 
```

这是我的控制台的错误 Rails 提示

```
syntax error, unexpected $end, expecting ')' 
```

现在，如果我删除文本“ `Envió`” Rails 不会抛出任何错误并且邮件会被传递

只是为了让你知道我在任何地方都没有遗漏任何语法

粘贴邮件代码

```
class DeliveryMail < ActionMailer::Base
  default from: "from@example.com"

  def user_creation_mail(user,password)
    @user = user
    @password = password
    mail(:to => user.email,:subject => "Congratulation you been registered in Domain") do |format|
      format.html { render "user_creation" }
    end
  end

  def document_upload_mail(user,document)
     @user = user
     @document = document
     mail(:to => user.email ,:subject =>  "Envió de enlace descarga documentos resultados domain") do |format|
      format.html { render "upload_file" }
     end
  end
end 
```

不知道这些有什么问题

我创建了一个**虚拟 rails 应用程序**来检查我是否共享相同的行为

**是**的，我在这个应用程序中也发现了同样的错误

我的 Rails 版本是

3.2.1

红宝石版本

1.9.2-p290

肯定有问题，谁能指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:44:19.003

把它放在你`DeliveryMail`班级的最前面。或者出现特殊字符的任何其他地方。

```
# encoding: UTF-8 
```

我在我的应用程序中遇到了类似的中文字符问题，添加这行代码为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:41:08.447

尝试：

```
# coding: utf-8 
```

只需`coding:`输入您的第一行注释，然后在可选空格之后指定文件其余部分的编码。您可以在此处添加额外的解释，例如：

```
# I will use the following encoding: utf-8\. Till the end of the file. 
```

看？`coding:`部分在这里，所以它工作。

# jquery - 使用带有原型的 jQuery Tablesorter

> ID：11070310
> 
> 赞同：5
> 
> 时间：2012-06-17T09:34:50.240
> 
> 标签：jquery, prototypejs, tablesorter

在使用 Prototype.js 的旧应用程序上添加 jQuery tablesorter 功能时遇到问题。我会使用 TableKit，但我想要排序的表是在 AJAX 回调中动态构建 + 清除的，这是 TableKit 无法处理的。工作正常，除非我尝试在 tablesorter 缓存上触发更新：

```
// Clear the list view
$$('#scrollingList tr.dataRow').each(function(e) { 
    e.remove();
});

addMapMarkers(); // This function rebuild the sortable table

// triggering update to clear tablesorter cache
jQuery('#soundTable').trigger('update'); 
```

当“更新”回调抛出错误时 table.tBodies[0] 未定义。

我敲了一个简化的测试用例，如果我不包含prototype.js库，它工作得很好，所以我很确定这是jQuery和Prototype之间的兼容性。我真的不想为了使用tablesorter而在jQuery中重写整个东西，所以任何帮助都会很受欢迎。谢谢。

这是简单示例的代码...

```
<script type="text/javascript" src="../jquery-latest.js"></script>
<script type="text/javascript" src="../jquery.tablesorter.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.2/prototype.js" type="text/javascript"></script>
<script type="text/javascript">

    jQuery(document).ready(function() {
    jQuery("table").tablesorter(); 
    jQuery("#append").click(function() {

    // add some html
    var html = "<tr id='deltest' class='data'><td>Peter</td><td>Parker</td><td>28</td><td>$9.99</td><td>20%</td><td>Jul 6, 2006 8:14 AM</td></tr>";
    html += "<tr class='data'><td>John</td><td>Hood</td><td>33</td><td>$19.99</td><td>25%</td><td>Dec 10, 2002 5:14 AM</td></tr>";
    html += "<tr class='data'><td>Clark</td><td>Kent</td><td>18</td><td>$15.89</td><td>44%</td><td>Jan 12, 2003 11:14 AM</td></tr>";        
    html += "<tr class='data'><td>Bruce</td><td>Almighty</td><td>45</td><td>$153.19</td><td>44%</td><td>Jan 18, 2001 9:12 AM</td></tr>";

    var sorting = [[2,1],[0,0]];

   // append new html to table body 
    jQuery("table tbody").append(html);

    jQuery('tr').click(function(){  
    jQuery(this).remove();
    jQuery('table').trigger('update');
    jQuery("table").trigger("sorton",[sorting]) 

   }) 
  return false;
    });
});
</script> 
```

我有一个动态构建的表，在第一行附加了一个点击处理程序。建表后单击第一行会删除该行并触发更新。正如我所说，没有prototype.js 也可以正常工作，如果包含我认为指向jQuery/Prototype 冲突的错误，则会出现相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:00:20.197

这确实是一个非常有趣的问题。我找到了答案：这是因为 Prototype 添加了一个调用`update`DOM 元素的函数，该函数期望更新它们的内容。

我是如何到达那里的，然后是如何处理它：

## 我是怎么到那里的

首先，我创建了您的代码的实时副本：

*   [没有原型](http://jsbin.com/ohutis)| [资源](http://jsbin.com/ohutis/edit#html)
*   [带原型](http://jsbin.com/ohutis/2)| [资源](http://jsbin.com/ohutis/2/edit#html)

我不是 100% 确定其中的 tablesorter 插件部分有效，而且我没有得到与您相同的错误，但是没有 Prototype 会像您期望的那样删除一行，并且使用 Prototype 整个表身体消失。由于整个表体消失可能会导致类似的错误`table.tbodies[0] is undefined`，我认为这已经足够了。

所以我想：我将从等式中删除 tablesorter。首先，我只删除了`script`标签和对它的调用，但将`jQuery('table').trigger(...)`调用留在原处。包含 Prototype 的完整表格仍然消失了，所以它不是 tablesorter 代码本身。所以我评论`trigger`了这些调用，它开始工作（只是点击的行被删除）。

我看着触发呼叫并想：我敢打赌这是`jQuery('table').trigger('update')`呼叫。果然，这就是罪魁祸首。把它注释掉，一切都很好；把它留在里面，你的桌身就会消失。

那为什么会这样呢？让我们想想它做了什么`trigger`：它创建一个合成事件，然后通过它自己的事件处理程序触发它，然后通过调用它来“触发”DOM 元素上的事件（如果存在）。`to call any old-style DOM0 handlers on the element. Similarly if you trigger an 'update' event, eventually it will call 'domelement.update(event)`例如，如果你触发了一个 'click' 事件，如果 DOM 元素有这样的功能，它最终会调用 'domelement.click(event) 。

这就是 Prototype 的用武之地：Prototype 添加了一个调用`update`所有 DOM 元素的函数。该函数类似于 jQuery 的`html`函数：它接受元素的新内容，清除旧内容并添加新内容。该函数在桌面上被调用，清除了`tbody`. 所以 jQuery 最终会`update`在元素上调用 Prototype，清除表格的内容。

我们可以在完全不使用 Prototype 的情况下证明这一点，如下所示：

```
jQuery(function($) {

  var p = document.createElement('p');
  p.innerHTML = "Hi there";
  p.update = function() {
    display("<code>update</code> called on paragraph");
  };

  document.body.appendChild(p);

  $("#theButton").click(function() {
    $("p").trigger("update");
  });

  function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
  }
}); 
```

[现场复制](http://jsbin.com/ijeviz)| [资源](http://jsbin.com/ijeviz/edit)

果然，如果我们单击按钮，我们会看到`update`在段落中调用的消息。

## 该怎么办

不要打电话`jQuery('table').trigger('update')`。[我在tablesorter 文档](http://tablesorter.com/docs/)中没有看到任何内容说您应该触发一个名为“更新”的事件，因此您可能不需要这样做（尽管文档似乎对细节有点轻）。如果您确实需要这样做，为了使 tablesorter 插件与 Prototype 兼容，您可能必须编辑插件的源代码，以便为该事件使用除“update”之外的其他词（例如，“tableupdate”）。

# android - XML Parser 没有连接错误

> ID：11070312
> 
> 赞同：3
> 
> 时间：2012-06-17T09:35:01.157
> 
> 标签：android, xml-parsing

当我有连接时，我的`XML parser`工作很好，如果它丢失，我的活动将崩溃我想要一个警报对话框弹出，说连接丢失而不是活动崩溃，但我不知道该怎么做。

任何见解都会有所帮助

```
 public class XMLParser {

    // constructor
    public XMLParser() {

    }

    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:21:42.327

上述方法可能并不总是有效。这个万无一失

```
private boolean isOnline() {
        try {
            myurl = new URL("http://m.google.com");
        } catch (MalformedURLException e2) {
            e2.printStackTrace();
        }
        try {
            connection = myurl.openConnection();
        } catch (IOException e) {
            e.printStackTrace();
        }
        connection.setConnectTimeout(3000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        int responseCode = -1;
        try {
            responseCode = httpConnection.getResponseCode();
        } catch (Exception e1) {                    
                e1.printStackTrace();                   
        }
        if (!(responseCode == HttpURLConnection.HTTP_OK)) 
        {
            return false;
        }
        return true; 
```

# internet-explorer - 带有 document.createElementNS 的 Internet Explorer 和 Visual Studio 2008 错误

> ID：11070314
> 
> 赞同：2
> 
> 时间：2012-06-17T09:35:11.640
> 
> 标签：internet-explorer, visual-studio-2008

我在 Visual Studio 2008 中有一个项目，其中包含一些 html 页面和 JavaScript。当我运行项目进行调试时，我的 IE 突然开始出现奇怪的行为。即使在一个简单的 HTML 页面上，如果我放一个这样的 JS 函数：

```
function test() {
    var svgNS = "http://www.w3.org/2000/svg"; 
    var mySvg = document.createElementNS(svgNS, "svg");
    alert("Done!"); 
} 
```

当我在 IE 中运行页面时突然出现此错误：“Microsoft JScript 运行时错误：对象不支持属性或方法'createElementNS'”。如果我尝试在 .getContext2d 的 cal 上使用画布，我会得到同样的错误。如果我调试并检查文档对象，我可以看到例如方法 createElementNS，但调用它会出现上述错误。

当我将 Chrome 设为我的默认浏览器并从 Visual Studio 运行该页面时，我没有收到任何错误。另外，当我将页面放在网络服务器上时，我可以在 IE 中查看它而不会出错！我完全感到困惑。好像我的 IE 和 Visual Studio 组合在某种程度上被破坏了。

我希望有人以前遇到过这样的事情，并会感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:16:40.313

你用的是哪个版本的IE？使用 VS2008 在 IE8 中调试页面的实现非常 hacky。`createElementNS`从 IE9 开始支持。我认为 IE8 仅支持将 SVG 作为纯 SVG 文档。从 IE9 开始，您可以将 HTML 与 SVG 混合使用。

# emacs - 如何在终止缓冲区之前终止与缓冲区关联的进程？

> ID：11070318
> 
> 赞同：1
> 
> 时间：2012-06-17T09:36:26.130
> 
> 标签：emacs, process, elisp

我试图在关闭它运行的缓冲区之前终止 Flymake 进程，尽管没有成功。以下是我尝试过的：

```
(defun haxe-kill-network-process ()
  "Kill connection to Haxe compiler server and Flymake process in this buffer"
  (when (equal major-mode 'haxe-mode)
    (let ((proc (get-process haxe-compiler-process))
      (fly-proc (get-buffer-process (buffer-name))))
      (when proc
    (delete-process proc)
    (haxe-log 3 "Disconnecting from HaXe compiler server")
    (flymake-mode -1)
    (delete-process fly-proc)
    (haxe-log 3 "Flymake process killed")))))

(add-hook 'kill-buffer-hook #'haxe-kill-network-process) 
```

我得到这个输出：

> 从 Haxe 编译器服务器断开连接
> 
> 由于致命状态 CFGERR 已关闭缓冲区 StripArray.hx 的 Flymake 模式，警告运行时发生配置错误（haxe --connect 127.0.0.1:1257 --cwd /home/wvxvw/projects/wafer/src -swf /home/ wvxvw/projects/wafer/bin/wunderwafer.swf -cp /home/wvxvw/projects/wafer/src -swf-header 800:600:31 -swf-version 10 com.wunderwafer.map.StripArray)
> 
> Flymake进程被杀死

但它并没有被杀死`haxe-kill-network-process`——当我试图杀死运行进程的缓冲区时，它仍然提示我终止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:05:24.407

我们需要更多信息来弄清楚到底发生了什么，但这里有一些想法：

*   您可能想尝试`set-process-query-on-exit-flag`避免提示。
*   总是更喜欢缓冲区而不是缓冲区名称（即使用`(current-buffer)`而不是`(buffer-name)`.
*   您说“它没有被杀死”，但您的代码似乎表明涉及各种进程。那么哪个进程没有被杀死？你得到的确切提示是什么？您可能还想使用`M-x list-processes`来设置正在运行的进程。

# wpf - MVVM 和 DBContext - 如何将它们放在一起？

> ID：11070319
> 
> 赞同：0
> 
> 时间：2012-06-17T09:36:51.403
> 
> 标签：wpf, mvvm, ado.net-entity-data-model, dbcontext

我正在尝试遵循 MVVM 模式，但是我在这个问题上花了一些时间，搜索了很多并检查了 stackoverflow ......到目前为止没有找到工作示例。

基本上，我有一个简单的应用程序，想要检索数据并将其写入 SQL 服务器。这是我的代码：

//模型

```
public class Visitor
{
    public string ID { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }
} 
```

//视图模型

```
public class VisitorViewModel : ViewModelBase
{
    public ObservableCollection<Visitor> _visitorDataCollection = new ObservableCollection<Visitor>();

    public ObservableCollection<Visitor> VisitorDataCollection
    {
        get { return _visitorDataCollection; }
        set { _visitorDataCollection = value; }
    }

    private string _firstName = "";
    private string _lastName = "";

    public string FirstName
    {
        get { return _firstName; }
        set
        {
            if (value != _firstName)
            {
                _firstName = value;
                OnPropertyChanged("FirstName");
            }
        }
    }

    public string LastName
    {
        get { return _lastName; }
        set
        {
            if (value != _lastName)
            {
                _lastName = value; 
                OnPropertyChanged("LastName");
            }
        }
    }

    public VisitorViewModel()
    {

    }
} 
```

}

//VisitorContext 类，表示数据库上下文

```
public partial class VisitorContext : DbContext
{
    public VisitorContext()
        : base()
    {
    }

    public DbSet<VISITOR> Visitors { get; set; }

} 
```

}

没什么特别的。但是，我不能把它“放在一起”。如何完成以检索所有访问者并添加新访问者？

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:16:31.933

只是一个简单的例子，如何让它变得栩栩如生。

向虚拟机添加一些命令：

```
public ICommand Add {get; private set;} 
```

在构造函数中：

```
public VisitorViewModel()
{
   using(var context = new VisitorContext()) 
   {
       //fill collection with initial data from DbContext
       context.Visitors.ToList().ForEach(_visitorDataCollection.Add);
   }
   //setup add command, here I'm using MVVM Light like you 
   Add = new RelayCommand(()=> {
          using(var context = new VisitorContext()) 
          {
             _visitorDataCollection.Add(context.Visitors.Add(new Visitor {
                 FirstName = this.FirstName,
                 LastName = this.LastName //read values from model properties
             });
          }
       });
} 
```

就是这样，您需要做的就是将此 ViewModel 绑定到适当的 View。

# asp.net - 请求中的 aspnet auth cookie 两次

> ID：11070321
> 
> 赞同：1
> 
> 时间：2012-06-17T09:36:59.260
> 
> 标签：asp.net, authentication, session-cookies

我正在处理 AspNet Web 应用程序中的自定义身份验证 cookie。

使用`asp:Login`组件，以下是用户的身份验证方式：

```
void L_Authenticate(object sender, AuthenticateEventArgs e)
    {
        if (L.UserName == "john" && L.Password == "cookie")
        {
            FormsAuthenticationTicket ticket = 
              new FormsAuthenticationTicket(1, "john", 
                                            DateTime.Now, 
                                            DateTime.Now.AddSeconds(30),
                                            false, "");

            var cookieConnexion = new HttpCookie("myCookie");
            cookieConnexion.Value = FormsAuthentication.Encrypt(ticket);
            cookieConnexion.Expires = ticket.Expiration;
            this.Response.Cookies.Set(cookieConnexion);

            Z.Text = "<a href='/Prive/Home.aspx'>next</a>";
        }
    } 
```

首先，我不设置`e.Authenticated = true`或者`.ASPXAUTH`cookie会被创建。我不想要那个。第二，我不会`Response.Redirect`。

现在，在 Global.asax 中，用户设置为 current `HttpContext`：

```
protected void Application_AuthenticateRequest(object sender, EventArgs e)
{
   if (Request.IsAuthenticated)
   {

   }
   else
   {
        var cookie = this.Request.Cookies["myCookie"];
        if (cookie != null)
        {
           var ticket = FormsAuthentication.Decrypt(cookie.Value);

           if (ticket != null)
           {
              HttpContext.Current.User = 
                 new ClientRolePrincipal(new GenericIdentity(ticket.Name));

              ticket = new FormsAuthenticationTicket(1, ticket.Name, 
                                 DateTime.Now, 
                                 DateTime.Now.AddSeconds(30), 
                                 false, ticket.UserData);

              cookie.Value = FormsAuthentication.Encrypt(ticket);
              cookie.Expires = ticket.Expiration;
              this.Response.Cookies.Set(cookie);
            }
         }
     }
 } 
```

对应用程序的第一个请求（使用 chrome 开发工具，我在请求/响应标头中跟踪 cookie）：

*   请求中的 0 个 cookie
*   0 cookie 响应：ASP.NET_SessionId

用户登录：

*   请求中的 1 个 cookie：ASP.NET_SessionId
*   1 个 cookie 响应：myCookie

用户浏览到 Home.aspx：

*   请求中的 2 个 cookie：ASP.NET_SessionId、myCookie
*   1 个 cookie 响应：myCookie（已更新）

好的。

现在，如果`PreRender`我显示 this.Request.Cookies 中包含的元素，我会看到两次`myCookie`。为什么？

*   ASP.NET_SessionId，域 ''，路径 '/'，值 = nk1cy255quh32o45hxtg4x55
*   myCookie，域 ''，路径 '/'，值 = BF6246B7E5A5100AA59A7B7237B446...
*   myCookie，域 ''，路径 '/'，值 = BF6246B7E5A5100AA59A7B7237B446...

# c++ - 是否设置数组的某些字段，将其他字段设置为零？

> ID：11070322
> 
> 赞同：3
> 
> 时间：2012-06-17T09:37:47.723
> 
> 标签：c++, arrays, memory

```
int main()
{
    int b[2][3]={{1,2},{3,4,5}};
    cout << b[0][2] << endl;
} 
```

视觉和 g++ 的结果都是`0`！为什么？我想它一定是另一个数字！例如，当我们定义`int a[5]`then 时，我们说`cout << a[3];`没有设置`a[3]`，它将类似于 0123984283，这意味着 RAM 中此单元格的最后一个值。

但是在这里，原因是`0`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:41:00.037

如果是**Partial Initialization**，则保证其余元素为 0。

对于 Standerdese 粉丝和注重细节的人来说，这是一本不错的读物：

[**C 和 C++：自动结构的部分初始化**](https://stackoverflow.com/questions/10828294/c-and-c-partial-initialization-of-automatic-structure/10828333#10828333)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:44:22.977

这个答案对文档的引用有更完整的解释：

[https://stackoverflow.com/a/629063/475523](https://stackoverflow.com/a/629063/475523)

# html - 为什么嵌入视频不是 z-index？

> ID：11070325
> 
> 赞同：3
> 
> 时间：2012-06-17T09:38:11.700
> 
> 标签：html, css, video, youtube

我的顶栏用 z-index: 固定`10000000`。

我的 iframe、嵌入、对象有 z-index: `0`。

我不明白为什么我的视频仍然在顶栏上方...

我该如何解决？

谢谢

![YouTube Z 指数](../Images/dca30e016eb634139fe2289b39ad985e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:43:47.540

使用旧的 youtube 嵌入方法并更改一些参数（设置`wmode`为`opaque`）：

```
<object width="420" height="315">
<param name="movie" value="http://www.youtube.com/v/oHg5SJYRHA0?version=3&amp;hl=ru_RU"></param>
<param name="allowFullScreen" value="true"></param>
<param name="wmode" value="opaque"/>
<param name="allowscriptaccess" value="always"></param>
<embed wmode="opaque" src="http://www.youtube.com/v/oHg5SJYRHA0?version=3&amp;hl=ru_RU" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true"></embed>
</object> 
```

这应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:43:51.130

如果您使用的是 Flash 播放器，您可以使用该[`wmode`](http://www.8bitrocket.com/2011/02/11/quick-guide-to-wmode-and-flash-embedding/)属性来设置`z-index`播放器，例如 set`wmode=opaque`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T09:45:22.087

我认为您的问题与 embed 元素的 wmode 属性有关...您可以[在这里](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Using_Window_Mode__wmode__values_)阅读一些内容，以克服可以添加到 embed 元素 wmode="transparent" 或 wmode="opaque" 的问题。

让我知道 ;）

# css - 将宽度未知的 HTML 元素居中到屏幕中间

> ID：11070327
> 
> 赞同：2
> 
> 时间：2012-06-17T09:39:26.507
> 
> 标签：css, positioning

如果我有一个宽度和高度未知的 HTML 元素，我怎样才能将它居中到屏幕的正中间？

如果不能用纯 CSS 完成，那么 javascript 就可以了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:45:46.893

你可以通过jquery..

```
$(function () {
    var element=$("#elementid")
    element.css("position","absolute");
    element.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                                $(window).scrollTop()) + "px");
    element.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:09:36.100

这个答案可能适合您的情况，也可能不适合您的情况，具体取决于*如何*确定未知的宽度/高度。如果*确切的*尺寸未知，但它们是用*百分比*设置的，那么您可以使用这种技术：

```
#content {
    background-color: khaki; /* demo purposes */  
    position: absolute;   
    height: 20%;
    top: 50%;
    margin-top: -10%; /* half the height */   
    width: 30%;
    left: 50%;
    margin-left: -15%; /* half the width */
} 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/kCP9e/)总结一下：

*   **缺点**：仅在确切尺寸未知的情况下适用，因为它们以百分比指定。
*   **亲**：纯 CSS 解决方案。

# java - 查找点击是否存在于一组坐标中

> ID：11070332
> 
> 赞同：0
> 
> 时间：2012-06-17T09:39:55.357
> 
> 标签：java, android

假设我有一个矩形的坐标。现在我想知道矩形内是否存在触摸事件或单击事件位置，我该怎么做？

```
A      B

    C

D      E 
```

例如，我有这个矩形`ABDE`。我点击了C，现在我有了所有的坐标。我怎样才能知道 c 存在于`ABDE`

我认为这`Martix`是为此目的而创建的，但我在互联网上找不到任何特定的示例。

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:48:33.177

将矩形表示为最小 (X;Y) ( `min(A.X,B.X...);min(A.Y...)`) 和最大 (X;Y)，然后检查`c.X >= min.X && c.X <= max.X && c.Y >= min.Y && c.Y <= max.Y`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:17:15.383

让我们假设您在示例中给出的点具有相应的坐标：

```
A(x1, y1)      B(x2, y1)

    C(x, y)

D(x1, y2)      E(x2, y2) 
```

点 C 仅在矩形内且仅在以下情况下：

```
if(((x >= x1) && (x <= x2)) && ((y >= y1) && (y <= y2)){
   System.println.out("Point C is within the rectangle");
} 
```

# c# - 将 Excel 列导入列表框

> ID：11070333
> 
> 赞同：1
> 
> 时间：2012-06-17T09:39:58.790
> 
> 标签：c#

我需要将 3 列从 Excel 导入到 3 个不同的列表框

*   Col a 到列表框 1
*   列 b 到列表框 2
*   Col c 到列表框 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:52:54.817

总是很高兴展示你的努力。我认为你想要这样的东西。

```
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", YourPath);
    string query = String.Format(SELECT [columnName1],[columnName2],[columnName3] from [{0}$]", "YourSheetNo");
    OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);
    DataSet dataSet = new DataSet();
    dataAdapter.Fill(dataSet);
    DataTable YourTable = dataSet.Tables[0];
    listbox1.DataSource =YourTable.Columns["ColumnName1"]; 
```

# iphone - UITableViewCell 被隐藏。

> ID：11070335
> 
> 赞同：0
> 
> 时间：2012-06-17T09:40:15.647
> 
> 标签：iphone, objective-c, xcode, uitableview

我的控制器中有一个`UITableView`。细胞为`UITableView`有xib。由于某种原因，加载表格时，单元格的视图被隐藏。

我可以选择单元格，我看到单元格不是零，视图也不是零，仍然隐藏了单元格。

这是代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"CategoryCell";
    CategoryCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil){
        NSArray* topObjects = [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:self options:nil];
        for (id obj in topObjects){
            if ([obj isKindOfClass:[CategoryCell class]]){
                cell = (CategoryCell*)obj;
            }
        }
    }

    id object;
    if (indexPath.row < items.count)
        object = [items objectAtIndex:indexPath.row];
    if ([object isKindOfClass:[MenuCategory class]]) {
        // Configure the cell   
        MenuCategory *cellInfo = (MenuCategory *)object;
        [cell setCategory:cellInfo];
        }
    else if([object isKindOfClass:[MenuSubCategory class]]){
        // Configure the cell   
        MenuSubCategory *cellInfo = [self.items objectAtIndex:indexPath.row];
        [cell setSubCategory:cellInfo];
    }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:21:52.603

哦，很抱歉浪费你的时间。

解决方案与代码无关。

桌子比单元格窄。所以文本（写在单元格左侧）在表格边界之外。这就是为什么它从屏幕上消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:35:21.577

第一的：

```
NSArray* topObjects = [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:self options:nil];
        for (id obj in topObjects){
            if ([obj isKindOfClass:[CategoryCell class]]){
                cell = (CategoryCell*)obj;
            }
        } 
```

将此替换为

```
[[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:self options:nil]; 
```

并在您的类中声明一个成为 xib 所有者的 IBOutlet。这个出口可以指向你的细胞。然后，您必须将`Files Owner`Cell XIB 中的（必须属于上述代码所在的类）连接到您的单元。然后，您可以通过以下方式引用您的单元格（例如在声明属性之后）

```
self.myCellOutlet; 
```

并且不必枚举 xib 中的所有对象。

你确定这

```
[cell setSubCategory:cellInfo]; 
```

作品？

如果你真的认为你的手机只是被隐藏了，你有没有试过给它发送一个

```
[cell setHidden:NO]; 
```

只是为了看看是否是这种情况以及错误是否与可见性状态没有不同？

# c# - InputSimulator 不适用于 Windows 中的游戏

> ID：11070337
> 
> 赞同：2
> 
> 时间：2012-06-17T09:40:24.187
> 
> 标签：c#, .net, winforms

InputSimulator 是否适用于游戏？我尝试过以下代码

```
 while (i < 200)
        {
            InputSimulator.SimulateKeyDown(VirtualKeyCode.RETURN);
            Thread.Sleep(1000);
            i++;
        } 
```

这在记事本等某些应用程序中完美运行。但在 NFS 最想要的游戏中失败了。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:44:23.237

这是因为游戏通常使用 DirectX 来处理输入，而不是从窗口管理器中获取输入事件。`InputSimulator`很可能只是将适当的消息插入消息队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:42:03.967

这通常是内置的保护，大多数主要游戏都有。这对于大多数语言来说都是一样的，你必须以某种方式绕过保护，这可能非常困难。

# .net - 如何强制/指示 Outlook 重新读取更改的注册表值

> ID：11070338
> 
> 赞同：3
> 
> 时间：2012-06-17T09:40:32.493
> 
> 标签：.net, outlook, registry, add-in

我尝试为 Outlook 2007 编写一个加载项，该加载项正在改变邮件的回复/转发样式。

基本上我确定了注册表项`HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Outlook\Preferences\ReplyStyle`和`HKEY_CURRENT_USER\Software\Microsoft\Office\12.0\Outlook\Preferences\ForwardStyle`.

每当我在 Outlook 本身中更改这些选项时都会设置这些选项，但是当我在 Outlook 运行时通过代码或注册表更改它们时，这些设置在 Outlook 重新启动之前不会变为活动状态。

所以我的问题是，如何强制/指示 Outlook 重新读取注册表值，或者是否有另一种方法可以通过 COM 互操作更改这些设置？

# c++ - scons - 编译后运行程序

> ID：11070339
> 
> 赞同：7
> 
> 时间：2012-06-17T09:40:34.867
> 
> 标签：c++, python, scons

我想在编译后直接运行构建的程序，这样我就可以用`scons`.

我认为这个 SConstruct-File 会在重建程序时启动程序。

```
main = Program( "main", [ "main.cc" ] )

test = Command( None, None, "./main >testoutput" )
Depends( test, main ) 
```

这会启动它，每次我跑`scons`

```
main = Program( "main", [ "main.cc" ] )

test = Command( None, None, "./main >testoutput" )
Requires( test, main ) 
```

但两者都不起作用，我的程序永远不会执行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T11:15:40.607

只有在构建程序时，这应该更好地运行程序。

```
main = Program( "main", [ "main.cc" ] )

test = Command( target = "testoutput",
                source = "./main",
                action = "./main > $TARGET" )
Depends( test, main ) 
```

并且每次都使用 AlwaysBuild() 来运行它，正如@doublep 提到的那样：

```
main = Program( "main", [ "main.cc" ] )

test = Command( target = "testoutput",
                source = "./main",
                action = "./main > $TARGET" )
AlwaysBuild( test ) 
```

如果你想查看测试输出的内容，你可以这样做：

（假设 Linux。用一些 Python 代码打印文件会更便携）

```
main = Program( "main", [ "main.cc" ] )

test = Command( target = "testoutput",
                source = "./main",
                action = ["./main > $TARGET",
                          "cat $TARGET"] )
AlwaysBuild( test ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T10:01:23.713

`ls`每次运行 SCons 时都会运行：

```
ls = Command ('ls', None, 'ls')
AlwaysBuild ('ls')
Default ('ls') 
```

您从未告诉 SCons 为什么以及何时应该运行您的命令。例如，您应该将其作为依赖项添加到其他目标或使其成为默认目标。

*如果你真的*想一直运行命令，即不管正在构建什么目标，你可能应该使用标准的 Python 工具来运行它来启动外部程序。

# android - Android Packagemanager queryIntentActivitys

> ID：11070340
> 
> 赞同：2
> 
> 时间：2012-06-17T09:40:42.033
> 
> 标签：android, homescreen, packagemaker

我想获得所有有意图监听器的应用程序

> 意图.CATEGORY_HOME

所以基本上是发射器

我有这个代码：

```
final Intent mainIntent = null;
    mainIntent.addCategory(Intent.CATEGORY_HOME);

    final List pkgAppsList = this.getPackageManager().queryIntentActivities( mainIntent, 0); 

    ListView app_list = (ListView) findViewById(R.id.application_list);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, android.R.id.text1,pkgAppsList);
    app_list.setAdapter(adapter); 
```

这应该返回监听 homekey press 的应用程序

但我只得到一个 Nullpointer 异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:43:56.933

利用

```
Intent mainIntent = new Intent(Intent.ACTION_MAIN, null); 
```

代替

```
Intent mainIntent = null; 
```

# objective-c - 如何识别 UIImage 中的矩形？

> ID：11070345
> 
> 赞同：1
> 
> 时间：2012-06-17T09:41:33.033
> 
> 标签：objective-c, ios, image-processing

我需要将图像裁剪为某个矩形。图像是从 iphone 相机拍摄的，矩形非常清晰。我不想使用 OpenCV，因为它太复杂了。

我怎样才能做到这一点？

这是图像的示例：

![图片](../Images/aac2fc0ec4b42d64cff75d8f7e720287.png)

# java - 如何让 MouseMotionListener 检测到拖动的结束？

> ID：11070346
> 
> 赞同：2
> 
> 时间：2012-06-17T09:41:33.050
> 
> 标签：java

我有一个 MouseMotionListener 并且在 mouseDragged 方法中我有一个布尔值变为 true。问题是我不知道一旦拖动结束如何让它变回假。有没有办法做到这一点？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:07:20.800

对于 SWT：您可以`MouseListener`使用该方法添加一个`public void mouseUp(MouseEvent arg0)`并将布尔值设置为 false。请参见此处：[MouseListener 示例](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/MouseListenerExample.htm)

或者，如果您使用 swing，这很有帮助（使用`public void mouseReleased(MouseEvent e)`）： [MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

# .net-4.0 - 如何检查方法是否内联？

> ID：11070350
> 
> 赞同：4
> 
> 时间：2012-06-17T09:42:16.027
> 
> 标签：.net-4.0, .net-4.5

我刚刚读了一篇博客，上面写着*“......以前由于其他标准而无法内联的方法仍然没有内联。我检查了以下内容，这些方法都没有内联......”*

我无法联系到作者，而且我认为它对 SO 用户也可能很有趣。所以我想问：

**你如何检查一个方法是否实际上是内联的（或不是内联的）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:51:06.387

[这篇关于内联状态的博客文章](http://blogs.msdn.com/b/vancem/archive/2008/08/19/to-inline-or-not-to-inline-that-is-the-question.aspx)以及其他有趣的事情：

> Steven 通过抛出异常然后以编程方式检查与异常关联的堆栈跟踪来做到这一点。当您尝试自动化分析时，这是有道理的，但对于简单的一次性情况，只需查看本机指令就更简单、更强大。有关如何使用 Visual Studio 的详细信息，请参阅[此博客。](http://blogs.msdn.com/vancem/archive/2006/02/20/535807.aspx)

即：显然对于休闲研究，只需阅读实际执行的内容就是要走的路。

# php - PHP 代码不运行

> ID：11070352
> 
> 赞同：0
> 
> 时间：2012-06-17T09:43:13.163
> 
> 标签：php, javascript, html

我试图通过单击一个按钮来运行 PHP 代码，但它似乎不起作用。我在 MAPM 服务器上运行它。

```
<html>
    <head>
    </head>
    <div onClick="count();">Click!</div>
    <script>
function count() {
    var xhr;
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhr.open('GET', 'count.php');
    xhr.send();
}​
    </script>

    </body>
</html> 
```

在 PHP 文件 (count.php) 中，我们有以下代码：

```
<?php
Print "Hello, World!";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:49:16.037

您需要您的页面来收听请求；

```
function count() {
    var xhr;
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhr.onreadystatechange =     function (){
    if(xhr.readyState == 4){
        if(xhr.status == 200){
            // WHAT HAPPENS ON SUCCESS
            alert(xhr.responseText);
        }else{
                alert('timeout error or something');
        }
        }
    };
    xhr.open('GET', 'count.php');
    xhr.send();
}​; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:53:13.223

您需要传递`null`给如下`send()`方法（还要确保 URL 正确，我的直觉是它应该是“/count.php”）：

```
xhr.send(null) // it's a GET request 
```

有关详细教程，请查看此 MDN 文档[https://developer.mozilla.org/en/AJAX/Getting_Started](https://developer.mozilla.org/en/AJAX/Getting_Started)

# regex - 正则表达式路由 - 找不到我的规则

> ID：11070354
> 
> 赞同：1
> 
> 时间：2012-06-17T09:43:46.320
> 
> 标签：regex, zend-framework, routing

我是 Zend 框架的初学者，因此非常感谢您帮助我理解为什么找不到我的正则表达式路由规则。这是规则：

```
 // Picture: www.mywebsite.com/gallery/12/pic/45/my-beautiful-picture.html
    $router->addRoute('picture',
            new Zend_Controller_Router_Route_Regex(
                    'gallery/(\d+)/pic/(\d+)/([A-Za-z0-9.]+)',
                    array(
                            'module'=>'frontoffice',
                            'controller'=>'gallery',
                            'action'=>'picture'
                    ),
                    array(
                            1 => 'gallery_id',
                            2 => 'picture_id',
                            3 => 'title'
                    ),
                    'gallery/%d/pic/%d/%s'
            )
    ); 
```

当我访问页面 www.mywebsite.com/gallery/1/pic/9/my-beautiful-picture.html 时，我收到以下错误消息：

```
 An error occurred
 Page not found
 Exception information:

 Message: Action "1" does not exist and was not trapped in __call()
 Stack trace:

 #0 /usr/local/zend/share/ZendFramework/library/Zend/Controller/Action.php(518): Zend_Controller_Action->__call('1Action', Array)
 #1 /usr/local/zend/share/ZendFramework/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('1Action')
 #2 /usr/local/zend/share/ZendFramework/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
 #3 /usr/local/zend/share/ZendFramework/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
 #4 /usr/local/zend/share/ZendFramework/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
 #5 /var/www/misterjules/public/index.php(27): Zend_Application->run()
 #6 {main}  

 Request Parameters:

 array (
    'controller' => 'gallery',
    'action' => '1',
    'pic' => '9',
    'module' => 'frontoffice',
 ) 
```

我的其他正则表达式路由规则（之前写在脚本中）如下：

```
 // *** GALLERY ***
    // Galleries (index): www.mywebsite.com/gallery
    $router->addRoute('galleries',
            new Zend_Controller_Router_Route_Regex(
                    'gallery(/page=(\d+))?',
                    array(
                            'module'=>'frontoffice',
                            'controller'=>'gallery',
                            'action'=>'galleries'
                    ),
                    array(
                            2 => 'page',
                    ),
                    'gallery'
            )
    );

    // a gallery index: www.mywebsite.com/gallery/13/my-travel-in-dublin.html
    //                  OR www.mywebsite.com/gallery/13/my-travel-in-dublin.html/page=4
    $router->addRoute('gallery',
            new Zend_Controller_Router_Route_Regex(
                    'gallery/(\d+)/([A-Za-z0-9.]+)(/page=(\d+))?',
                    array(
                            'module'=>'frontoffice',
                            'controller'=>'gallery',
                            'action'=>'gallery'
                    ),
                    array(
                            1 => 'gallery_id',
                            2 => 'title',
                            4 => 'page'
                    ),
                    'gallery/%d/%s'
            )
    ); 
```

我不明白我的错误在哪里。

谢谢你的帮助。

朱尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:54:59.677

您的正则表达式似乎缺少匹配所需的破折号`gallery/12/pic/45/my-beautiful-picture.html`。

试试这个：

```
$router->addRoute('picture',
        new Zend_Controller_Router_Route_Regex(
                'gallery/(\d+)/pic/(\d+)/([A-Za-z0-9.-]+)', #etc. 
```

# wcf - WCF 数据服务 5.0 版和 Json

> ID：11070358
> 
> 赞同：2
> 
> 时间：2012-06-17T09:43:55.580
> 
> 标签：wcf, wcf-data-services

我希望我的 OData 服务支持 Json 序列化，我读到了一个 WCF 数据服务工具包，它将此行为添加到 V2 版本。在我阅读了 WCF Data Service 发布了新版本的 WCF Data Service 5.0 之后，我需要知道如何去做。

我添加了`$Format=json`并且我一直得到这个属性不受支持。

任何建议。提前致谢 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T20:34:35.347

请求 JSON 的常用方法是使用 Accept 标头（基本上遵循 HTTP，如果客户端想要响应的某种表示，它应该在 Accept 标头中请求它）。因此，如果您发送 Accept: application/json;odata=verbose，您将获得 Verbose JSON 响应。

WCF 数据服务当前不实现 $format 查询选项。但是您可以将其添加到“顶部”。有几种方法可以做到这一点（只需搜索网络）。其中之一是例如这里： http: [//archive.msdn.microsoft.com/DataServicesJSONP](http://archive.msdn.microsoft.com/DataServicesJSONP)

# facebook - 如何使用 Graph api 获取公共 Facebook 页面的提要？

> ID：11070361
> 
> 赞同：-1
> 
> 时间：2012-06-17T09:44:03.903
> 
> 标签：facebook, facebook-graph-api

StackOverflow 上已经有几个问题（[你可以在不要求用户允许的情况下使用 Graph API 获取公共 Facebook 页面的提要吗？](https://stackoverflow.com/questions/9373645/can-you-get-a-public-facebook-pages-feed-using-graph-api-without-asking-a-user) [使用没有访问令牌的 Facebook Graph API 获取公共页面状态](https://stackoverflow.com/questions/7633234/get-public-page-statuses-using-facebook-graph-api-without-access-token)？）关于我的问题：我需要通过图表API 脸书上公共页面的提要。

我按照说明进行操作，但总是得到：

```
{"Error": {"message": "An access token is required to request this resource.", "Type": "OAuthException", "code": 104}} 
```

我怎样才能解决这个问题？我快疯了，因为除了我之外每个人似乎都在工作！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:43:08.297

根据您的描述，错误是您没有在请求中提供有效的访问令牌。

如果应用程序的类型设置为“本机/桌面”，则假定您使用二进制文件分发了应用程序的密钥，因此应用程序访问令牌不受信任（并且 PHP SDK 中的“getAccessToken”仅在真实用户登录时才有效中，它不能回退到应用令牌）

如果您尝试使用应用程序访问令牌来读取页面的提要，这将按照您描述的方式失败。

# ios - 多个模态视图点击以关闭

> ID：11070365
> 
> 赞同：2
> 
> 时间：2012-06-17T09:44:34.950
> 
> 标签：ios, cocoa-touch, ios5, uigesturerecognizer, modalviewcontroller

我建立了一种机制，可以通过点击视图的外部来关闭模态视图控制器。设置如下：

```
- (void)viewDidAppear:(BOOL)animated
{
    UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapBehind:)];
    [recognizer setNumberOfTapsRequired:1];
    recognizer.cancelsTouchesInView = NO; //So the user can still interact with controls in the modal view
    [self.view.window addGestureRecognizer:recognizer];

}

- (void)handleTapBehind:(UITapGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        CGPoint location = [sender locationInView:nil]; //Passing nil gives us coordinates in the window

        //Then we convert the tap's location into the local view's coordinate system, and test to see if it's in or outside. If outside, dismiss the view.

        if (![self.view pointInside:[self.view convertPoint:location fromView:self.view.window] withEvent:nil]) 
        {
            [self dismissModalViewControllerAnimated:YES];
            NSLog(@"There are %d Gesture Recognizers",[self.view.window gestureRecognizers].count);
            [self.view.window removeGestureRecognizer:sender];
        }
    }
} 
```

这对于关闭单个模态视图非常有效。现在假设我有两个模态视图，一个从根视图控制器（视图 A）中调用，然后另一个模态视图从第一个模态（视图 B）中调用

有点像这样：

根视图 -> 视图 A -> 视图 B

当我点击关闭视图 B 时，一切都很好。但是，`EXC_BAD_ACCESS`当我尝试关闭视图 A 时出现错误。打开僵尸后，视图 B 似乎仍在接收`handleTapBehind:`发送给它的消息，即使在视图 B 关闭后它已被关闭并且内存不足。

我的问题是为什么视图 B 仍然收到消息？（`handleTapBehind:`确保手势识别器应该已从关联的窗口中删除。）在视图 B 已经关闭后，如何将其发送到视图 A。

PS。上面的代码出现在 View A 和 View B 的控制器内部，并且是相同的。

编辑

这是我调用模态视图控制器的方式，此代码位于标准视图层次结构内的视图控制器内。

```
LBModalViewController *vc = [[LBModalViewController alloc] initWithNibName:@"LBModalViewController" bundle:nil];
[vc.myTableView setDataSource:vc];
[vc setDataArray:self.object.membersArray];

[vc setModalPresentationStyle:UIModalPresentationFormSheet];
[vc setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

[vc.view setClipsToBounds:NO];

[self presentViewController:vc animated:YES completion:nil];

// This is a hack to modify the size of the presented view controller
CGPoint modalOrigin = vc.view.superview.bounds.origin;
[[vc.view superview] setBounds:CGRectMake(modalOrigin.x, modalOrigin.y, 425, 351)];
[vc.view setBounds:CGRectMake(modalOrigin.x, modalOrigin.y, 425, 351)]; 
```

差不多就是这样，其他的都很标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T07:56:34.627

```
[self dismissModalViewControllerAnimated:YES];

[self.view.window removeGestureRecognizer:sender]; 
```

应该：

```
[self.view.window removeGestureRecognizer:sender];

[self dismissModalViewControllerAnimated:YES]; 
```

否则你会得到不确定的结果。

# javascript - 如何处理睡衣中的异步通知？

> ID：11070366
> 
> 赞同：0
> 
> 时间：2012-06-17T09:44:37.033
> 
> 标签：javascript, python, pyjamas

我正在使用**Pyjamas 编写一个 Web 应用程序。**.

我的应用程序的核心功能是在 HTML 表中显示一些**异步**生成的事件（使用相应的睡衣小部件）。

是否可以将这些**通知**发送到`pyjamas`在浏览器中运行的应用程序？

我一直在寻找一个没有成功的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T08:44:21.940

不知道大家对睡衣阅读器是否熟悉？如果没有，那里有很多关于 ajax 的信息和一些例子。

[http://pyjs.org/book/Bookreader.html#Rest%20of%20the%20World](http://pyjs.org/book/Bookreader.html#Rest%20of%20the%20World)

# bash - 带有空格和标点符号的字符串的 Bash 补全

> ID：11070370
> 
> 赞同：0
> 
> 时间：2012-06-17T09:45:18.867
> 
> 标签：bash, whitespace, punctuation, bash-completion

我正在尝试编写一个 bash 完成函数，该函数适用于包含空格和标点符号的字符串，甚至引号也可能在其中。

我从文件中提取这些字符串，`sed`因此将它们作为多行文本，其中每一行都包含一个用于完成的目标字符串。但是，我尝试将其传递给 的所有方式`compgen -W`，我总是只完成单个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:37:02.963

有一个变量`COMP_WORDBREAKS`定义哪些字符被视为单词的分隔符。调整这个变量你可以尝试达到你想要的。

来自 bash(1)：

COMP_WORDBREAKS — Readline 库在执行单词完成时将其视为单词分隔符的字符集。如果 COMP_WORDBREAKS 未设置，它将失去其特殊属性，即使它随后被重置。

# c# - 从图像文件加载 BitmapPalette 的问题

> ID：11070372
> 
> 赞同：0
> 
> 时间：2012-06-17T09:45:29.090
> 
> 标签：c#

我想从我创建的位图文件中加载调色板。该文件宽 256 像素，高 1 像素。

我用

```
BitmapImage image = new BitmapImage();
image.BeginInit();           
image.UriSource = new Uri("image.bmp", UriKind.RelativeOrAbsolute);
image.EndInit();

myPalette = new BitmapPalette(image, 256); 
```

奇怪的是，它的`Count`属性`myPalette.Colors`只有244！

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:03:49.770

您的代码没有任何问题 - BitmapPalette**最多**返回指定的颜色数。从这里：http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalette.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmappalette.aspx)

> 根据指定的 BitmapSource 初始化 BitmapPalette 类的新实例。新的 BitmapPalette 仅限于指定的最大颜色计数。

我创建了一个具有相同尺寸和单一颜色的测试位图，并`myPalette.Colors.Count`返回 1。

但是请注意，您实际上可能想要使用`Bitmap`from `System.Drawing`，简单得多，这将返回完整的调色板列表 (256)，即使它们都是相同的：

```
var test = new Bitmap("image.bmp");    
Console.WriteLine(test.Palette.Entries.Length); 
```

使用与上述相同的测试，返回 256 个条目

# extjs - 数据到达事件

> ID：11070373
> 
> 赞同：1
> 
> 时间：2012-06-17T09:45:31.927
> 
> 标签：extjs, extjs4.1

我正在使用 Extjs 4.1。当数据呈现并到达时，我需要识别网格上的事件。

我检查了“afterrender”事件。但它火到很早

```
 grid.on('afterrender', function () {
        alert(333);
    }); 
```

请指教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:03:42.083

如果您只需要知道网格何时首次加载数据，请使用`Ext.grid.Panel` [**viewready**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-viewready)事件，它会在数据已加载且网格行已呈现时触发。

**例子：**

```
this.control({

    'mygridpanel': {

        // select the first record
        viewready: function(grid) {
            var store = grid.getStore(),
                view = grid.getView(),
                selModel = grid.getSelectionModel();
            if (store.getAt(0)) {
                view.focus();
                selModel.select(0);
            }
        },
    },
}); 
```

这个例子是在`init`一个使用MVC模式的控制器的功能中配置的，不知道你是不是在使用MVC模式？不过，您评论中的片段应该可以正常工作。

此外，此事件将`Ext.grid.Panel`触发它的对象作为第一个参数传递，正如您从上面的示例中看到的那样，您可以使用它来获取对网格的引用并在处理程序中执行您需要对其执行的任何逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:58:12.997

你是正确的网格渲染事件会在网格渲染后触发，而不是在数据显示后触发。订阅商店`load`活动怎么样？

```
store.on('load', function() {
...
}) 
```

# c# - 如何使用 C# 从 xml 文件中删除所有空元素？

> ID：11070376
> 
> 赞同：1
> 
> 时间：2012-06-17T09:45:47.337
> 
> 标签：c#, xml

如何使用 C# 从 XML 文件中删除所有空元素？

例如：

输入

```
<Person>
  <PersonDetails>
    <Name>Some Name</Name>
    <Address>
      <Street>Some Street</Street>
      <City>Some City</City>
      <Zip/>
    </Address>
 </PersonDetails>
 <PersonDetails>
    <Name>Some Name</Name>
    <Address/>
 </PersonDetails>
 <PersonDetails/>
</Person> 
```

输出

```
<Person>
  <PersonDetails>
    <Name>Some Name</Name>
    <Address>
      <Street>Some Street</Street>
      <City>Some City</City>
    </Address>
 </PersonDetails>
 <PersonDetails>
    <Name>Some Name</Name>
 </PersonDetails>
</Person> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T09:53:14.127

根据您更新的问题，您可以使用 XPath one-liner 来获得您所追求的：

```
var doc = XElement.Parse(source);  // or XElement.Load(filename) if coming from a file   

doc.XPathSelectElements("//*[string-length() = 0]").ToList().Remove();

doc.Save(filename)                 // or doc.ToString() if you want the string output 
```

如果您不想使用 XPath，可以使用`Descendants()`和 LINQ：

```
doc.Descendants().ToList().Where(d => d.Value.Length == 0).Remove(); 
```

在这`ToList()`两种情况下都是必要的，以确保您没有就地修改可枚举。

# google-analytics - 谷歌分析人口统计地图在 asp.net

> ID：11070377
> 
> 赞同：1
> 
> 时间：2012-06-17T09:46:02.313
> 
> 标签：google-analytics, asp.net-mvc-4

是否可以在我的 asp.net mvc 4 网站中集成谷歌分析人口统计地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:34:15.980

最近我有一项任务要添加像谷歌分析这样的地图到自己的网站。我使用 [jVectorMap 做到了](http://jvectormap.com/examples/world-gdp/)。它很容易集成和使用（尽管有一些小问题和过时的示例）。如果您需要显示 GA 的数据，您可以使用 GA API 获取它并显示在此地图上。

# javascript - 修复：为什么我的动态 SELECT 在 IE9 中不起作用？

> ID：11070383
> 
> 赞同：0
> 
> 时间：2012-06-17T09:46:49.603
> 
> 标签：javascript, html, internet-explorer

我在[这里](http://www.mincovlaw.com/services/trademarks_order)有一个在 FF14 和 Chrome20 中运行良好的脚本。

它的一部分在 IE9 中不起作用。

如果您在 IE9 中打开页面并将第一个下拉列表（综合搜索）更改为“Word TM”，那么第二个下拉列表将变为空。

在其他浏览器中，该行为是正确的，它在选择菜单中添加了两行额外的行。

知道为什么 IE9 不喜欢这个以及如何解决它吗？

感谢下面的评论，这个问题现在已经解决了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T10:08:49.860

您有一个 ID 为“report_options”的 SELECT 元素 (z)，您尝试使用 innerHTML 更改其选项。这在 IE9 中不起作用。使用 z.options.remove(zeroBasedPosition) 删除选项和 z.options.add(OPTION) 其中 OPTION 是由以下人员创建和添加的 DOM 元素：

```
var option = document.createElement("OPTION");
option.text = "your text";
option.value = "your value";
z.options.add(option); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T10:02:02.547

问题是你在`<option>`里面创建元素的方式`<select>`：

```
z.innerHTML="<option value='no' SELECTED>Not needed</option>..."; 
```

Internet Explorer 总是有`<select>`元素问题和`innerHTML`（你只能用它来清除所有选项，用`innerHTML = ""`）。向元素正确添加选项选项的唯一跨浏览器方法`<select>`是使用其`add`方法。

# php - 将 SwiftMailer 中的联系表单重定向到成功页面不起作用

> ID：11070387
> 
> 赞同：0
> 
> 时间：2012-06-17T09:47:25.187
> 
> 标签：php, redirect, swiftmailer

我对 php 一无所知，但几乎没有帮助和研究，我设法用 Swift Mailer 建立了工作联系表。它可以发送消息，但我希望它在发送消息后将人们重定向到thank_you.html 页面。我尽我所能，但它不起作用。你可以帮帮我吗？这是代码：

```
<?php

include("Swift/lib/swift_required.php"); 
$host = 'xxxxxx.xxxxxx@gmail.com';
$password = 'xxxxx'; 
$subject = "zapytanie ze strony"; 
$body = "Zglaszajacy: ".$_POST["fullname"]."\r\n";
$body .= "Telefon: ".$_POST["phone"]."\r\n";
$body .= "E-mail: ".$_POST["email"]."\r\n";
$body .= "Tresc: ".$_POST["description"]."\r\n";

$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, 'ssl') 
->setUsername($host)
->setPassword($password);

$mailer = Swift_Mailer::newInstance($transport);

$message = Swift_Message::newInstance($subject)
->setFrom(array($host => 'Klient')) 
->setTo(array('xxxxxxx@xxxx.gmail.com'=> 'xxxxxx'))
->setBody($body);

$result = $mailer->send($message); 
if ($result) 
{ 
    header('Location: http://www.xxxxx.org/thank_you.html'); 
}
echo $result;

?> 
```

我自己添加了那部分：

```
if ($result) 
{ 
    header('Location: http://www.xxxxx.org/thank_you.html'); 
} 
```

它不起作用。邮件已发送，但表单没有任何反应。它只是停留在那里。请把我当作一个外行来对待；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:27:55.940

来自 php 文档[`header()`](http://php.net/manual/en/function.header.php)：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

在您调用`header`.

尝试[`ob_start()`](http://uk.php.net/manual/en/function.ob-start.php)在代码开头使用，然后[`ob_end_flush()`](http://uk.php.net/manual/en/function.ob-end-flush.php)在结尾使用。

# jquery - 在表单上有两个下拉日历

> ID：11070388
> 
> 赞同：0
> 
> 时间：2012-06-17T09:47:27.453
> 
> 标签：jquery

我用这些代码在我的表单中创建了两个 dropdpwn 日历：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Calimg1').click(function () {
            $('#calblock1').slideToggle("slow");
        });
    });

    $(document).ready(function () {
        $('#Img1').click(function () {
            $('#Div2').slideToggle("slow");
        });
    });
</script> 
```

我想做另一件事，但我不知道怎么做？如果此日历之一打开，则用户无法打开另一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:53:19.710

您可以使用`is(':visible')`：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#Calimg1').click(function () {
            if (isAnyVisible()) return false;
            $('#calblock1').slideToggle("slow");
        });

        $('#Img1').click(function () {
            if (isAnyVisible()) return false;
            $('#Div2').slideToggle("slow");
        });
    });

    function isAnyVisible() {
      if ($('#Calimg1').is(':visible') || $('#Img1').is(':visible')) {
         return false;
      }
      return true;
    }
</script> 
```

和被假定为您的日历的 ID，相应地修改（在`#Calimg1`函数中）以防万一它们不同。`#Img1``isAnyVisible`

# c# - 如何在 C# 中创建通用列表/模板列表

> ID：11070396
> 
> 赞同：3
> 
> 时间：2012-06-17T09:48:17.097
> 
> 标签：c#, .net, xna-4.0

我有一个主类，其中有几个继承的成员，它们都重载了父类的相同 Draw 方法，但具有不同的 Initialize 方法。是否有可能对每个继承的类使用相同的列表类型，从而能够遍历 Draw 方法？我很确定您可以使用 C++ 中的模板来执行此操作，但似乎无法找到在 C# 中执行此操作的方法。这是一个例子：

```
class MainMenu : ExpandingWindow{
   Init(A,B)
   Draw(D)
}

class SideMenu : ExpandingWindow{
   Init(A,B,C)
   Draw(D)
} 
```

我希望能够做到：

```
 WindowList List<ExpandingWindow>

 WindowList.Add(new MainMenu)
 WindowList.Add(new SideMenu)

 WindowList[0].Initialize(A,B)
 WindowLIst[1].Initialize(A,B,C) 
```

和：

```
 for each window in WindowList{
   window.Draw(D)
 } 
```

我很确定我在这里遗漏了一些东西。我不必以这种确切的方式来做，我宁愿寻找处理这些情况的一般方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:51:02.253

尝试：

```
IList<ExpandingWindow> windows = new List<ExpandingWindow>();

// initialize them via constructor
windows.Add(new MainMenu(A, B));    
windows.Add(new SideMenu(A, B, C));

foreach(var window in windows) {
    window.Draw();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:04:32.563

如果每个子类都有不同的方法，那么它们就不属于接口，并且不能在没有显式转换的情况下调用（这在 OOP 中是一件坏事）。

您可能想要做的是将参数传递给它们的**构造函数**，然后使用相同的签名调用接口方法：

```
class ExpandingWindow
{
     public virtual void Draw(D obj) { ... }
}

public class MainMenu : ExpandingWindow
{
     public MainMenu(A a, B b)
     { 
         // assign MainMenu-specific parameters
     }

     // inherit Draw from the base class,
     // or override it if necessary
}

public class SideMenu : ExpandingWindow
{
     public SideMenu(A a, B b, C c)
     { 
         // assign SideMenu-specific parameters
     }

     // inherit Draw from the base class,
     // or override it if necessary
     public override Draw(D d)
     {
         // some side-menu specific stuff
         d.DoStuff();

         // call the base method after that
         base.Draw(d);
     }
} 
```

然后，您将在**创建**具体实例时传递特定参数（因为此时您必须知道无论如何要实例化哪个类）：

```
List<ExpandingWindow> windows = new List<ExpandingWindow>();

windows.Add(new MainMenu(a, b));
windows.Add(new SideMenu(a, b, c));

foreach (var w in windows)
   w.Draw(d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:52:38.383

您必须在基类中创建一个**抽象**或**虚拟**方法`ExpandingWindow`，然后在派生类中覆盖该方法。

另一种选择是定义一个具有一个**Draw**方法的 IExpandingWindow 接口，并在您的类中实现它。

# objective-c - 使用 UIImage 作为 @"picture" 共享 facebook 对话框

> ID：11070398
> 
> 赞同：1
> 
> 时间：2012-06-17T09:48:51.770
> 
> 标签：objective-c, ios, facebook, cocos2d-iphone

这是简单的代码

```
UIImage *ScreenShot = [self getScreenshot];

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Name", @"name",
                               @"Caption.", @"caption",
                               @"Description.", @"description",
                               @"www.example.com", @"link",
                               ScreenShot, @"picture",               
                               nil];

[ facebook dialog:@"feed"
                  andParams:params
                andDelegate:self]; 
```

当我编译它得到这个消息

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIImage length]: unrecognized selector sent to instance 0x1288bb90' *** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T10:56:17.567

您不能直接将图像上传到墙上，发布到墙上时您可以将图像链接到它。因此，您需要先将 UIImage 上传到某个地方。您有 2 个选项：

1.  上传到您/某些服务器并发布链接到它的墙帖。
2.  上传到 Facebook 相册。检查有关执行此操作的[图形 API](http://www.facebook.com/login.php?next=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Freference%2Fapi%2Fphoto%2F)，这非常简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:15:00.230

我刚刚查看了 Facebook API，以了解您在这里做什么。在我看来，这

```
http://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=http://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://www.example.com/response 
```

清楚地说明 Facebook 想要你做什么。您是否看到`picture`参数不是图像本身而是图像的链接？您必须先上传图片，然后将图片的**链接**放入此参数。

我不确定这是否是您代码中唯一的错误，但它肯定是一个主要错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T10:07:38.023

将图像导入您的项目并尝试将 UIImage *ScreenShot = [self getScreenshot] 行更改为： `UIImage *ScreenShot = [UIImage imageNamed:@"yourimage.png"];`

如果它有效，您的“getScreenshot”方法可能有问题。

我将它用于我的应用程序：

```
 UIImage *ImageView = [UIImage imageNamed:@"anImage.png"];
        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       ImageView, @"picture",@"Name", @"name",
                                       nil];

         //Let's post it
         [facebook requestWithGraphPath:@"me/photos"
         andParams:params
         andHttpMethod:@"POST"
         andDelegate:self];

-(void)request:(FBRequest *)request didLoad:(id)result{
    if ([result objectForKey:@"id"]) {

        UIAlertView *al = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Your image has been posted on your wall!" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [al show];
        [al release];
    }
} 
```

# javascript - jQuery中的非法字符错误 - 无论函数内容如何

> ID：11070399
> 
> 赞同：4
> 
> 时间：2012-06-17T09:49:01.940
> 
> 标签：javascript, jquery

首先，我做了我的研究，我确实发现了一堆类似的问题。但是，我没有找到适用于我的问题的答案。我发现的所有示例都与未转义字符、单/双引号事故等有关。另一方面，我在以下功能上收到此错误：

```
$('.seq_input').blur(function(){
    //var id = $(this).data('id');
    //var index = parseInt($(this).val()),
    //element = $("#test-list li").eq(id).remove();
    //$("#test-list li").eq(index - 1).before(element); // -1 because users like 1 based indices

    alert('what?');
      })​​​; 
```

如您所见，我注释掉了所有内容并留下了警告，但我仍然收到错误，指向函数的最后一行。它与其他函数没有任何关系，因为我只是在当前 Javascript 的末尾单独添加了这个。

有人可以告诉我这里发生了什么吗？为什么在地球上一个只警告某事（或者即使它不做任何事情）的功能会给出错误？

注意：页面加载后立即显示错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T09:51:45.993

结尾的分号和括号之间有不可见的字符。我连接了您的代码，将其放入字符串中，并调用了一个不存在的函数以触发错误（使用[此方法](https://stackoverflow.com/a/9955265/938089?syntaxerror-invalid-character-u8203)）。

```
'})​​​;'.l()
>>> TypeError: "})\u200B\u200B\u200B;".l is not a function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:56:27.260

`$('.seq_input')`可以用于其他功能，尝试使用新的 id 来完成该功能。

# php - PHP SQL 分页限制子句

> ID：11070403
> 
> 赞同：0
> 
> 时间：2012-06-17T09:49:17.517
> 
> 标签：php, sql, limit

我是整个 php、sql、jquery 的新手。我正在尝试对 sql 库进行分页。使用 sql LIMIT 子句时，我不断收到错误消息。

它要么将所有图像吐出一页，但给出不起作用的页码按钮，要么只显示选定的项目数量，但不会为其余查询结果创建额外页面。

找了个解决办法，发现在LIMIT函数后面使用变量有问题。谁能告诉我一个更好的方法来实现这个或给我一个解决我的问题的方法。

```
 $items = 8; 

if(isset($_GET['page']) and is_numeric($_GET['page']) and $page = $_GET['page'])
             $limit = " LIMIT ".(($page-1)*$items).",$items";
          else
             $limit = " LIMIT $items";

if(empty($clothing) && empty($price) && empty($uploaded)) {    
$query = "SELECT path, description, filename  FROM category $limit";
$result = mysql_query($query) or die(mysql_error()); 
```

我也在下面尝试过这个，它给出了一个错误。

```
 $per_page = 8; 

if(isset($_GET['page']))
{
$page=$_GET['page'];
}
$start = ($page-1)*$per_page; 

if(empty($clothing) && empty($price) && empty($uploaded)) {
$query = "SELECT path, description, filename  FROM category LIMIT $start, $per_page ";
$result = mysql_query($query) or die(mysql_error()); 
```

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '-8, 8' 附近使用正确的语法。**

为了更清楚地说明“如果”是过滤查询结果。这只是许多 sql 查询中的第一个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:51:32.613

的偏移值`LIMIT`不能为负

# silverlight - 如何避免 MVVM 中的代码重复？

> ID：11070404
> 
> 赞同：3
> 
> 时间：2012-06-17T09:49:36.247
> 
> 标签：silverlight, mvvm, mvvm-toolkit

这个问题类似于[商业逻辑在 MVVM 中的位置？](https://stackoverflow.com/questions/10964003/where-does-business-logic-sit-in-mvvm)

但是，我不想在那个上创建评论链

例如，假设我有一张发票表，我想获取这些数据并对其执行一些分配，以便在 2 个完全独立的报告和 3 个屏幕中使用。

在我们当前的 Web 应用程序中，我会将它放在数据服务层中，我的所有报告和屏幕都会调用它

在 MVVM 中，人们似乎建议模型不应该臃肿并且应该将逻辑放在视图模型中。但在这种情况下，我将代码复制 5 次？

在他对我的另一个问题的回答中，Reed 指出“任何特定于域或业务的东西都应该可以被其他应用程序重用，使用其他架构。”

Reed 或其他人可以澄清我的方法应该是什么吗？MVVM 可以和其他架构结合吗？

我正在使用 Silverlight 5 和 Simple MVVM Toolkit

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:13:05.817

ViewModel 不适用于业务逻辑。它用于用户界面逻辑。正如它的名字一样，它代表视图。如果您有五个呈现相似数据的不同报告，请为这些数据命名，并使所有五个 ViewModel 都了解如何使用数据对象。

由于我们正在谈论报告，因此数据被理解为仅显示。ViewModel 可以只是一个具有最少用户界面交互的简单数据源，基本上是一个非常薄的层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:35:44.430

我遇到了同样的问题并决定这样做：

我在 MVC 中创建了控制器等类（使用我的模型执行一些操作），并在所有 ViewModel 中使用它们。

例如：我们的应用程序有一个书籍列表。我们需要添加/编辑/删除它们。

所以我们有一个模型：

```
public class Book {
public int BookId { get; set; }
public string Title { get; set; }
public string Author { get; set; }
} 
```

然后我们有一个控制器类：

```
public class BookController {
string dbPath = ...;

public void AddBook(string title, string author)
{
            var book = new Book() { Title = title, Author = author };
            AddBook(book);
        }
public void DeleteBook(int id)
{
            using (var db = new SQLiteConnection(dbPath))
    {
                db.Delete&lt;Book&gt;(id);
            }
        }
public void DeleteBook(Book book)
{
            using (var db = new SQLiteConnection(dbPath))
    {
                DeleteBook(book.BookId);
            }
        }
public List&lt;Book&gt; GetAllBooks()
{
            using (var db = new SQLiteConnection(dbPath))
    {
                return db.Table&lt;Book&gt;().ToList();
            }
        }
public Book FindBook(string title, string author, int id)
{
            .....
        }
    } 
```

现在我们可以在任何需要的地方使用它，例如：

```
public class BookListViewModel : ViewModelBase {
public BookListViewModel() {
GetData();

}
void GetData()
{
            BookController bc = new BookController(); // here we start using our controller. 
            _books = new List&lt;Book&gt;();
            _books = bc.GetAllBooks();
        }
    } 
```

这种方法可以帮助我们：

1）单独保留所有业务逻辑（在控制器类中）

2) 避免代码重复

# html - TYPO3 集成 HTML

> ID：11070405
> 
> 赞同：0
> 
> 时间：2012-06-17T09:49:43.827
> 
> 标签：html, css, image, templates, typo3

我是 TYPO3 的新手，正在尝试安装我的自定义模板。
我有 HTML/CSS/IMAGES 文件，但找不到如何实现它。

查找文件**/fileadmin/default/templates/typo3-intro-template.html**更改对站点的影响。但我不明白如何使用它来显示动态内容。

当我添加这个：

```
page = PAGE
page.typeNum = 0
#page.10 = USER
page.10 = TEXT
#page.10.userFunc = tx_templavoila_pi1->main_page
page.10.value = Hello world 
```

到**Setup**页面，得到 Hello world，但没有设计。

有没有办法添加类似的东西：

```
page.10.template = /fileadmin/default/templates/tmy-file.html 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T09:53:55.703

Typo3 有大量的手册。模板有 2 种选择。使用 Templavoila 或使用 Autoparser。Autoparser 是完全脚本化的，Templavoila 使用图形界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:17:53.763

以下是使用 TemplaVoila 设置站点的概述： [http ://webdevelopers.thedemo.ca/](http://webdevelopers.thedemo.ca/)

我们将在未来转向流体，但目前这种方法已经过尝试并且是正确的，并且暂时不会去任何地方。

我也不喜欢流体使用内联语法的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T14:29:59.370

```
config {
  baseURL = http://www.bla.com/
  prefixLocalAnchors = all
  meaningfulTempFilePrefix=1
  doctype=xhtml_trans
  htmlTag_langKey=de
  remove_defaultJS=external
  inlineStyle2TempFile=1
  disablePrefixComment = 1
  linkVars=L
  sys_language_uid=0
  language=en
  locale_all = en_EN.UTF-8
  xmlprologue = none
}

page = PAGE
page.typeNum = 0
page.bodyTag=<body>
page.10=TEMPLATE
page.10 {
    template = FILE
    template.file = fileadmin/templates/template.html
    workOnSubpart = DOCUMENT
    subparts  {
            CONTENT=COA
            CONTENT.10<styles.content.get
    }
} 
```

模板文件：

```
<!-- ###DOCUMENT### -->

<!-- ###CONTENT### -->CONTENT<!-- ###CONTENT### -->

<!-- ###DOCUMENT### --> 
```

# python - python导入错误，从另一个文件导入类

> ID：11070407
> 
> 赞同：1
> 
> 时间：2012-06-17T09:49:57.900
> 
> 标签：python, class, import

我正在尝试导入 base.py 中的类 PBase（它在同一个文件夹中）

所以我正在做以下事情

```
from base import PBase 
```

但我收到以下错误

```
Traceback (most recent call last):
  File "test_pricing.py", line 9, in <module>
    from base import PBase
ImportError: cannot import name PBase 
```

这是我的`base.py`

```
import yaml
import unittest, time, re

class PBase(unittest.TestCase):
    def enter_credentials(self, username, password):
        self.driver.find_element_by_id("id_username").clear
        self.driver.find_element_by_id("id_username").send_keys(username)
        self.driver.find_element_by_id("id_password").clear
        self.driver.find_element_by_id("id_password").send_keys(password)
        self.driver.find_element_by_css_selector("input.btn.btn-success").click()

    def get_credentials(self):
        with open('credentials.yml', 'r') as f:
            doc=yaml.load(f)
        return doc        

    def is_user_logged_in(self):
        f= "Account" in self.driver.find_element_by_css_selector(".navbar").text
        return f

    def log_in_user(self):
        self.driver.get(self.login_url)
        user_dict=self.get_credentials()
        username=user_dict["user"]["username"]
        password=user_dict["user"]["password"]
        self.enter_credentials(username, password)
        self.assertEqual(self.expected_logged_in_title, self.driver.title)

    def wait_for_chat_window(self, timeout=5):
        WebDriverWait(self.driver, timeout, poll_frequency=0.1).until(lambda b: b.find_element_by_id('habla_beta_container_do_not_rely_on_div_classes_or_names').is_displayed())
        time.sleep(3)

    def close_modal_window(self):
        driver=self.driver
        driver.find_element_by_xpath('//a[@class="close"]').click()

    def tearDown(self):
        if self.is_final_test==1:
            self.driver.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-04T10:27:49.230

这可能是循环导入导致的问题。例如，尝试从 bar.py 导入需要来自 foo.py 的 Foo 的 Bar 需要在 bar.py 中定义的 Utils：

foo.py：

```
from bar import Utils

class Foo:
    def __init__(self):
        print("hello, from Foo")
        Utils.do_something() 
```

和酒吧：

```
from foo import Foo

class Utils:
    @staticmethod
    def do_something():
        print("done something")

class Bar(Foo):
    def __init__(self):
        print('Hi, from Bar') 
```

这给出了类似的问题，可以在 foo.py 中导入 bar 而没有任何问题，但是一旦尝试对 foo.py 中的类 Utils 进行任何引用，就会出现各种错误，例如前面的代码导致：

```
Traceback (most recent call last):
  File "main.py", line 1, in <module>
    from bar import Bar
  File "bar.py", line 1, in <module>
    from foo import Foo
  File "foo.py", line 1, in <module>
    from bar import Utils
ImportError: cannot import name 'Utils' from 'bar' (bar.py) 
```

这个问题很容易通过将 Utils 放在它自己的文件中来解决。

# backbone.js - 如何使用主干和 requirejs 定义/使用多个路由

> ID：11070408
> 
> 赞同：7
> 
> 时间：2012-06-17T09:50:05.533
> 
> 标签：backbone.js, routing, requirejs, marionette, backbone-routing

我将我的应用程序分成几个应用程序。

```
main.js
app.js
app1/
  |- routing
  |- controller
  |- app
app2/
  |- routing
  |- controller
  |- app 
```

1）当我尝试使用路由器时`app1`，它们可以工作。
2) 当我尝试在 中使用路由器时`app2`，它们不起作用。3）如果我在工作中的路由器中
注释该行。`'js/app1/routing',``main.js``app2`

为什么我会得到这种行为？
在 github 上是否有一些使用多个路由和 requirejs 的应用程序示例？

谢谢。

这是我的代码：

* * *

** main.js **

```
define([
    'js/app',
    'js/app1/routing', // the routers in this app work
    'js/app2/routing'  // the routers in this app do not work but 
                       // if I comment the previous line (js/app1/routing',) 
                       // they works
],
function (App)
{
    "use strict";
    App.initialize();
}); 
```

* * *

** app.js **

```
define([],
function ()
{
    "use strict";
    var app = new Backbone.Marionette.Application();

    return app;
}); 
```

* * *

** app1/路由 **

```
define(['backbone','app1/controller'], function(Backbone, controller)
{
    "use strict";
    var Router = Backbone.Marionette.AppRouter.extend({

        appRoutes: {
            '*defaults': 'index1'
        }

    });
    return new Router({
        controller: controller
    });

}); 
```

* * *

** app2/routing.js **

```
define(['backbone','app2/controller'], function(Backbone, controller)
{
    "use strict";
    var Router = Backbone.Marionette.AppRouter.extend({

        appRoutes: {
            'app2': 'index2'
        }

    });
    return new Router({
        controller: controller
    });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T18:08:03.640

该问题可能是由加载路由器文件和创建路由器的顺序引起的。

Backbone 的`history`对象负责执行路由。当路由器被实例化时，它收集所有路由器上定义的所有路由。然后它会监视浏览器的 url 是否有变化。当它看到更改时，它将采用第一个可用的匹配路由并触发该路由，跳过其他任何内容。

当您`*defaults`定义了路线时，一切都与此匹配。因此，如果先加载此路由，则不会命中其他任何内容。因此，您需要在路由参数中更加明确，以使这条路由不会一直命中，或者您需要确保最后加载此路由器。

# jquery - 尝试为 jQuery .load() 回调“保存”一个变量

> ID：11070409
> 
> 赞同：2
> 
> 时间：2012-06-17T09:50:25.890
> 
> 标签：jquery

有没有办法在 jQuery 中“保存”一个变量？

我有一个 .each() 循环，它改变 sz[1] 的值并为每个值触发一个 .load() 。但是，当我将 sz[1] 放在回调函数中时，它只使用 sz[1] 的最后记录值，而不是我最初调用 .load() 时的值。

```
$("#Big").find("a").each(function() {
  url = $(this).attr("href");
  pattern = new RegExp("sizes/([" + sizes + "])/$");
  otherPattern = new RegExp("sizes/([" + otherSizes + "])/$");
  sz = pattern.exec(url);
  if(sz) {
    normLink(sz[1], srcBase);
  } else {
    sz = otherPattern.exec(url);
    if(sz) {
      NotOkToDeLoad++;
      $("a#" + sz[1]).load(URL + sz[1] + " div#psp", function() { fixLink(sz[1]); });
    }
  }
}); 
```

sz[1] 可以是“k”、“h”或“o”。但是，fixLink() 总是以最后一个可能的值“o”调用 3 次。

我目前的解决方法是为 sz[1] 的每个可能值编写三个单独的 .load()，但应该有更简单的方法。我忽略了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:17:46.253

习惯于使用[*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)**使变量成为本地**变量：[`var`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)

```
var pattern = new RegExp("sizes/([" + sizes + "])/$");
var otherPattern = new RegExp("sizes/([" + otherSizes + "])/$");
var sz = pattern.exec(url); 
```

您的问题是`sz`（隐式）**全局**的，因此循环的每次迭代都会覆盖先前的值。

尽可能避免使用全局变量。[JSHint](http://www.jshint.com/)等工具会在出现隐式全局变量时发出警告。

另请注意，[在循环中创建闭包时还有另一个问题](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。它不适用于您的情况，因为您正在使用`.each()`而不是正常`for`循环，但最好注意它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:18:04.777

可能您正在`sz`尝试使用`var`关键字进行全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:23:18.950

使用闭包来保存值（仅当您不能将 sz 变量设为本地时！）：

```
$("a#" + sz[1]).load(URL+ ...., (function(val) { return function(){ fixLink(val); } })(sz[1])); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-17T09:56:12.113

我不知道它是否有帮助，但也许您可以将所需的变量存储在与元素关联的 $.data() 变量中...您可以[在此处阅读有关此的内容](http://api.jquery.com/jQuery.data/)

# macos - 在 Mac OSX 上部署 Qt 应用程序时缺少文件

> ID：11070410
> 
> 赞同：3
> 
> 时间：2012-06-17T09:50:31.803
> 
> 标签：macos, qt, deployment, macdeployqt

我正在尝试在 Mac OSX 上部署 Qt 应用程序，所以我正在运行以下命令：

```
macdeployqt Example.app 
```

随着可执行文件大小的增加，它似乎主要工作，所以我假设正在添加相关的插件和库。但是，最后`macdeployqt`输出此错误消息：

```
ERROR: no file at "/usr/local/pgsql/lib/libpq.5.dylib" 
```

有人知道这个文件是什么吗？我需要安装一些东西才能让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T12:39:43.820

文档[指出](http://qt-project.org/doc/qt-4.8/deployment-mac.html)：*如果应用程序使用 QtSql 模块，则部署 SQL 驱动程序插件。*macdeployqt 工具不知道您的应用程序使用哪些插件，并尝试部署所有插件。您的应用程序不直接与任何插件链接，因此无法仅通过查看可执行文件来判断它使用什么。macdeployqt 工具需要解析应用程序的代码，或者使用可能会破坏的启发式方法来扫描 sql 驱动程序名称字符串。这是 macdeployqt 工具的一个缺点。

一个临时的解决方法是将未使用的插件移出`plugins/sqldrivers`QtSdk 中的文件夹。

注意：`Example.app`不是可执行文件。它是一个应用程序包——一个包含东西的文件夹，您可以通过通常的方式检查其内容：从 shell 或通过 Finder 右键单击​​应用程序包。

# linux - 如何使用 Shell 脚本解析报告？

> ID：11070413
> 
> 赞同：0
> 
> 时间：2012-06-17T09:50:57.733
> 
> 标签：linux, shell, scripting, sed, awk

我有一个命令行程序，可以打印出报告，例如：

```
I found 0 problems on your database,
0 problems were found on your database 
```

等等。

我想编写一个仅将数字导出到变量的 linux shell 脚本。我找不到这样做的正确方法。我怀疑我没有`grep`正确使用（或者有更好的命令）；IE

```
I found 43 problems on your database,
43 problems were found on your database
$VAR=43 
```

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:56:24.403

```
$ var=$(echo -e "I found 43 problems on your database,
43 problems were found on your database" | grep -om 1 '[0-9]\+')
$ echo $var
43 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:43:08.390

我发现 Lev Levitsky 的解决方案非常完美，但我只想补充一点，如果您的报告包含许多带有数字的此类行并且您想要处理每一行，您将使用如下内容：

```
cat report | grep -o '[0-9]\+' | while read var
do
  # do something with var
done 
```

# java - 当 TCP 服务器不运行时，如何克服 TCP 客户端的挂起？

> ID：11070419
> 
> 赞同：1
> 
> 时间：2012-06-17T09:51:34.920
> 
> 标签：java, android, sockets, tcp, tcpclient

我正在尝试在我的 Android 手机和 PC 之间建立 TCP 套接字连接以进行文件传输。一个 TCP Server 程序将在 PC 中运行，而 TCP 客户端程序在 Android 中运行。当服务器程序运行时，一切正常。但是当服务器程序没有运行并且客户端尝试建立连接时，客户端会挂起（从某种意义上说，它会等待很长时间直到建立连接）。如何克服这个问题？一旦客户端发现没有这样的服务器正在运行，我想终止套接字。有可能这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:05:07.567

我相信您需要使用[Socket API](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout%28int%29)的超时设置。有关更详细的讨论，请参见此处：

[设置套接字超时](https://stackoverflow.com/questions/4969760/set-timeout-for-socket)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T10:48:10.173

`Socket`您可以通过构造 a`new Socket()`并使用该`Socket.connect(SocketAddress, timeout)`方法来控制 a 的连接超时。

请注意，您可以使用它来*减少*默认超时，这是一分钟多一点，但不能*增加*它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T10:21:13.107

问题似乎出在服务器配置中（在您的情况下为 PC）。它可能已禁止传出 ICMP 流量，该流量负责通知客户端有关关闭的端口。

尝试在您的服务端口未运行时远程登录您的服务端口。像

```
telnet <my.pc.address> <my-port> 
```

在“正常”配置中，它应该立即失败（正如您的客户端应用程序应该）

```
telnet: Unable to connect to remote host: Connection refused 
```

在带有防火墙、禁止 ICMP 等的棘手配置上，它会“挂起”很长时间，“认为”服务正在运行并等待它的回答。

# java - 如何避免在 Struts 中生成更多的 HTML 元素

> ID：11070423
> 
> 赞同：0
> 
> 时间：2012-06-17T09:51:50.177
> 
> 标签：java, css, jsp, struts2

当使用 Struts(2) 的 UI 标签时，会自动生成更多的 HTML 元素。例如，定义`<s:form ... >`它时包含`form`在 a 中`table`（即使我们没有声明这样的表）。因此，如果使用了任何`CSS`一个（比如说，仅使用 div 标签并`CSS`根据 即使允许struts生成这样的元素并且我们向它们添加CSS，那么也必须无聊地添加css来设计自动生成的html元素，因为更多的元素会以各种位置和大小生成。我也觉得，更多的 html 代码可能会影响浏览器页面的加载时间。

那么有没有办法避免在使用 struts UI 标签时生成此类元素，
或者
是否有一种方便的方法可以在 Struts UI 标签中使用 CSS？（我在 Stackoverflow 中阅读了一个问题，它回答说，最终添加 struts 生成的 css。但与普通的 jsp html 设计级别相比，这并不是那么容易......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T11:53:32.463

简而言之，Struts2 致力于主题的概念，它提供了一些开箱即用的主题。根据选择的主题，它会在渲染视图时为使用的标签生成一些 HTML 代码。

[主题](http://struts.apache.org/2.3.1/docs/struts-2-themes.html)确实是 Struts2 的一个非常漂亮的概念，它甚至为您提供了根据您的要求创建自定义主题的方法。

默认情况下，Struts2 使用`xhtml`主题来回答您的问题，这意味着它将生成一些 HTML（包括名称建议的表格），同时为使用的标签呈现 HTML。

您可以通过在 struts.properties 文件或 struts.xml 文件中指定简单主题来控制 HTML 生成

## Struts 属性文件

```
struts.ui.theme=simple 
```

## Struts.xml 文件

```
<constant name="struts.ui.theme" value="simple" /> 
```

S2开箱即用提供的其他主题是

*   css_xhtml：生成基于 div 的 HTML
*   ajax：用于ajax标签

请注意，简单的主题不会生成任何额外的 HTML，而只会标记等效的 HTML 代码，并且您可以通过提供自己的 CSS 和任何其他属性来完全控制自定义您的视图。

属性文件以及 struts.xml 中的上述设置将适用于整个应用程序，这意味着每个标签都将为整个应用程序生成相同的 HTML。此外，如果您想控制每个标签的 HTML 生成，则每个 S2 标签作为一个属性`theme`，即为这个属性提供值，如 simple、css_xhtml 等，以控制每个标签的 HTML 生成。

还有另一种方法可以通过使用以下代码来控制每个请求的主题 `<s:set name="theme" value="'simple'" scope="page" /`> 或

```
<s:set name="theme" value="%{myTheme}" scope="page" /> 
```

选择是你想走的路

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:06:29.773

添加`theme="simple"` 到标签。

示例代码：

```
<s:select id="..." list="..." theme="simple"> 
```

# iphone - 如何在 Interface Builder 的 UILabel 中输入 unicode 字符？

> ID：11070428
> 
> 赞同：60
> 
> 时间：2012-06-17T09:53:09.083
> 
> 标签：iphone, ios, unicode, utf-8, interface-builder

我想在标签中显示一个 unicode 字符（扬声器符号 U+1F50A）。是否可以在 Interface Builder 中输入此符号？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-17T10:01:23.810

是的，您可以单击“编辑”>“特殊字符...”——在那里您可以找到所有 unicode 字符（包括表情符号）并将它们复制/粘贴到您在 Interface Builder 中设置标签文本的位置。

**编辑**：在 Xcode 6 中，它是“编辑”>“表情符号和字符”

Xcode 7+：“编辑”>“表情符号和符号”

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-07T05:40:01.900

对于那些尝试以编程方式执行但失败的人，只需使用以下命令：

```
label.text = @"\U0001F50A"; 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-17T10:01:22.607

以编程方式进行。

使用 NSString 类型为标签声明一个 IBOutlet：

```
// UTF-8 Hexadecimal Encoding
NSString *myString = [NSString stringWithUTF8String:"0xF09F948A"];

myLabel.text = myString; 
```

另外，看看[这个](https://stackoverflow.com/questions/8917215/unicode-in-button-title-in-xcode)问题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-08-20T19:34:59.753

在 Xcode 8/Swift 3 中，最简单的方法是使用 unicode 转义：

```
let a = "\u{1F50A}" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-15T14:13:04.853

有趣的是为什么很少有人知道这一点。您可以通过按住“选项”并输入十六进制数字直接输入 Unicode 符号。您只需要：（Sierra 示例）转到“首选项 -> 键盘 -> 输入源”并搜索“Unicode Hex”。它应该出现在“其他”部分下。接下来添加它，然后您只需选择此输入源即可在任何地方输入 Unicode-char。

例如：✓ = (Alt+2713)、€ - (20ac) 等。最有趣的部分从 2100 到 2800。您可以在此处找到完整列表 - [Unicode 表](http://unicode-table.com/en/)

PS：此方法仅适用于四位 Unicode

# c# - 在 C# 中使用准备好的语句和 Mysql

> ID：11070434
> 
> 赞同：4
> 
> 时间：2012-06-17T09:54:37.773
> 
> 标签：c#, mysql, prepared-statement

我在我的程序中尝试了准备好的语句，但没有工作。

注释的部分是 Prepared Statement 部分。当我将其更改为正常语句时，一切正常。

有人能告诉我我错过了什么吗？

非常感谢。

```
private void btnLogin_Click(object sender, EventArgs e)
{
    MySqlCommand cmd = MySqlConn.cmd;
    //cmd = new MySqlCommand("SELECT * FROM admin WHERE admin_username='@val1' AND admin_password=PASSWORD('@val2')", MySqlConn.conn);
    //cmd.Prepare();
    //cmd.Parameters.AddWithValue("@val1", tboxUserName.Text);
    //cmd.Parameters.AddWithValue("@val2", tboxPassword.Text);
    cmd = new MySqlCommand("SELECT * FROM admin WHERE admin_username='"+tboxUserName.Text+"' AND admin_password=PASSWORD('"+tboxPassword.Text+"')", MySqlConn.conn);

    MySqlDataReader res = cmd.ExecuteReader();
    if (!res.HasRows) { MessageBox.Show("Error! "); res.Close(); return; }
    else
    {
        //do something
    }
    res.Close();
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T10:00:43.107

尝试`'`从查询中删除并`Prepare`在添加参数后使用：

```
cmd = new MySqlCommand("SELECT * FROM admin WHERE admin_username=@val1 AND admin_password=PASSWORD(@val2)", MySqlConn.conn);
cmd.Parameters.AddWithValue("@val1", tboxUserName.Text);
cmd.Parameters.AddWithValue("@val2", tboxPassword.Text);
cmd.Prepare(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-07T21:29:40.077

您的解决方案几乎是正确的。但是，由于这是一个登录过程，因此是一项面向安全的任务，因此我也想提出一些建议。

首先，考虑让您的按钮事件处理程序如下所示：

```
private void btnLogin_Click(object sender, EventArgs e)
{
    if (Login(tboxUserName.Text, tboxPassword.Text))
    {
        // Log in was successful, do something...
    }
    else
    {
        // Log in was NOT successful, inform the user...
    }
} 
```

这将使应用程序的维护和可读性更容易。然后声明一个名为的函数`Login()`来执行繁重的工作：

```
private bool Login(string username, string password)
{
    try
    {
        MySqlCommand cmd = MySqlConn.cmd;
        cmd = new MySqlCommand(
            "SELECT count(*) FROM admin " + 
            "WHERE admin_username=@username " + 
            "AND admin_password=PASSWORD(@passwd)",
            MySqlConn.conn);
        cmd.Prepare();
        cmd.Parameters.AddWithValue("@username", username);
        cmd.Parameters.AddWithValue("@passwd", password);
        int result = (int)cmd.ExecuteReader();

        // Returns true when username and password match:
        return (result > 0);
    }
    catch (Exception e)
    {
        // Optional: log exception details

        // Deny log in if an error has occurred:
        return false;
    }
} 
```

你会在这里注意到一些事情。首先，从原始查询字符串中删除了阻止命名参数正常工作的引号。此外，查询返回`count()`函数结果，而不是尝试创建包含管理员用户名和密码的结果集。最后，该方法被封装在一个 try-catch 块中，这样在发生错误时，该方法返回`false`并拒绝登录。为了便于阅读，我还将查询分解为串联的字符串。

# python - 在 Python 中使用 odeint() 进行的摆锤模拟不太像摆锤一样工作

> ID：11070437
> 
> 赞同：1
> 
> 时间：2012-06-17T09:55:09.567
> 
> 标签：python, differential-equations, differentiation

我已经使用四阶龙格-库塔微分建立了一个钟摆模拟，其中一切都是一步一步完成的：

```
from scipy import *
from matplotlib.pyplot import *
##A pendulum simulation using fourth order 
##Runge-Kutta differentiation

ts=.05 #time step size
td=20 #trial duration
te=int(td/ts) #no of timesteps

mu=0.1 #friction factor
m=1 #mass
g=9.81 #grav. acceleration
l=1 #length

th=[((rand()*2)-1)*pi] #initial angle
om=[0] #initial angular velocity
u=0 #torque

for j in range(te):
    #Euler approximation
    th.append(th[j] + ts*om[j])
    f1 = (-mu*om[j] + m*g*l*sin(th[j]) + u)/(m*(l^2))
    om.append(om[j] + ts*f1)

    #approximation 1 at mid-interval
    th2 = th[j+1] + (ts/2)*om[j+1]
    f2 = (-mu*om[j+1] + m*g*l*sin(th[j+1]) + u)/(m*(l^2))
    om2 = om[j+1] + (ts/2)*f2

    #approximation 2 at mid-interval
    th3 = th2 + (ts/2)*om2
    f3 = (-mu*om2 + m*g*l*sin(th2) + u)/( m*(l^2))
    om3 = om2 + (ts/2)*f3

    #approximation at next time step
    th4 = th3 + (ts)*om3
    f4 = (-mu*om3 + m*g*l*sin(th3) + u)/( m*(l^2))
    om4 = om3 + (ts)*f4

    dth=(om[j] + 2*om[j+1] + 2*om2 + om3)/6
    dom=(f1 + 2*f2 + 2*f3 + f4)/6
    th[j+1] = th[j] + ts*dth
    om[j+1] = om[j] + ts*dom

subplot(211),plot(th),xlabel('Angle'),ylabel('')
subplot(212),plot(om,'r'),xlabel('Angular velocity'),ylabel('')
show() 
```

这很好用，但我不觉得优雅，这就是为什么我决定使用 odeint() 函数重写它：

```
from scipy import integrate
from scipy import *
from matplotlib.pyplot import *
##A pendulum simulation

th=((rand()*2)-1)*pi #initial angle
om=0 #initial angular velocity
u=0 #torque

y0 = [om, th] #initial values
t = linspace(0, 20, 400) #

def f(y, t):
    mu=0.1 #friction factor
    m=1 #mass
    g=9.81 #grav. acceleration
    l=1 #length

    return (y[0],
        (-mu*y[0] + m*g*l*sin(y[1]) + u)/(m*(l^2)))

r = integrate.odeint(f, y0, t)

subplot(211),plot(t,r[:,1]),xlabel('Angle'),ylabel('')
subplot(212),plot(t,r[:,0],'r'),xlabel('Angular velocity'),ylabel('')
show() 
```

而这个新版本看起来一点也不像钟摆。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:13:32.887

你在你的钟摆运动的导数函数中有错误。

在 python`^`中是异或运算符，而不是幂运算符，即`**`. 所以你将使用 l**2。此外，AFAICT，状态向量的第一个元素实际上应该是 y[1]。从过去的类似工作来看，这是有效的（假设 m = 1 和 l = 1）。

```
def simple_pendulum_deriv(x, t, g = 9.81, mu = 0.5): 
    nx = np.zeros(2)
    nx[0] = x[1]
    nx[1] = -(g * np.sin(x[0])) - mu*x[1]
    return nx 
```

# eclipse - eclipse 无法安装在 64 位的 windows 7 上

> ID：11070444
> 
> 赞同：-3
> 
> 时间：2012-06-17T09:56:51.130
> 
> 标签：eclipse, windows-7, java

我想使用 Eclipse 的 BIRT 报告工具，为此我下载了以下 zip： [http ://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR2/eclipse -reporting-indigo-SR2-win32-x86_64.zip](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/indigo/SR2/eclipse-reporting-indigo-SR2-win32-x86_64.zip)

我的windoes 7中没有安装eclipse，所以我使用这个链接。现在，我下载了 zip，从中提取了 eclipse 文件夹，但是当我双击该文件夹中的 eclipse-application 以运行 eclipse 时，出现以下错误：

```
 A jre or jdk must be available in order to run Eclipse. No java virtual machine was found after searching th efollowing locations:
[Drive]:/...eclipse\jre\bin\javaw.exe
javaw.exe in your current PATH 
```

可能是什么原因？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:58:08.900

先安装JDK，再安装Eclipse。
默认情况下，Windows 机器中不提供 Java。而且它不是作为 Eclipse 的一部分安装的。
*您*必须[下载它](http://www.oracle.com/technetwork/java/javase/downloads/index.html)并在您的 PC 中安装 Java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:53:32.817

Windows 环境变量

```
PATH = %JAVA_HOME%\bin 
```

会有所帮助。替换`%JAVA_HOME%`为 JDK 的路径或创建第二个变量

```
JAVA_HOME = c:\path\to\jdk 
```

如果 PATH 中有多个路径，您可以用“;”分隔它们

# php - 为什么我的上传脚本在使用 PHP 放置在函数中时不起作用？

> ID：11070452
> 
> 赞同：3
> 
> 时间：2012-06-17T09:58:29.973
> 
> 标签：php, function, upload

我正在使用一个效果很好的上传脚本：

```
 // Create image from file
            switch(strtolower($_FILES['fileField']['type'])) {
                case 'image/jpeg':
                    $image = imagecreatefromjpeg($_FILES['fileField']['tmp_name']);
                    break;
                case 'image/png':
                    $image = imagecreatefrompng($_FILES['fileField']['tmp_name']);
                    break;
                case 'image/gif':
                    $image = imagecreatefromgif($_FILES['fileField']['tmp_name']);
                    break;
                default:
                    exit('Unsupported type: '.$_FILES['fileField']['type']);
            }

            // Get current dimensions
            $old_width  = imagesx($image);
            $old_height = imagesy($image);

            // Target dimensions for large version
            $max_width = '600';

            if($max_width > $old_width) {
                $max_width = $old_width;
            }

            $max_height = ($old_height/$old_width)* $max_width;

            // Get current dimensions
            $old_width  = imagesx($image);
            $old_height = imagesy($image);

            // Calculate the scaling we need to do to fit the image inside our frame
            $scale = min($max_width/$old_width, $max_height/$old_height);

            // Get the new dimensions
            $new_width  = ceil($scale*$old_width);
            $new_height = ceil($scale*$old_height);

            // Create new empty image
            $new = imagecreatetruecolor($new_width, $new_height);

            // Resize old image into new
            imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);

            //Output the image to a file
            imagejpeg($new, $folder.$newFileName,100);

            // Destroy resources
            imagedestroy($image);
            imagedestroy($new); 
```

我想将此脚本放在一个函数中，以便可以多次运行它，每次使用不同的 $max_width 值，从而创建不同大小的同一图像的多个副本，而不必一遍又一遍地复制所有代码。

这是我的尝试：

```
 // Create image from file
        switch(strtolower($_FILES['fileField']['type'])) {
            case 'image/jpeg':
                $image = imagecreatefromjpeg($_FILES['fileField']['tmp_name']);
                break;
            case 'image/png':
                $image = imagecreatefrompng($_FILES['fileField']['tmp_name']);
                break;
            case 'image/gif':
                $image = imagecreatefromgif($_FILES['fileField']['tmp_name']);
                break;
            default:
                exit('Unsupported type: '.$_FILES['fileField']['type']);
        }

        function resizeAndPlaceFile($target_max_width) {

            global $image;

            // Get current dimensions
            $old_width  = imagesx($image);
            $old_height = imagesy($image);

            // Target dimensions for large version
            $max_width = $target_max_width;

            if($max_width > $old_width) {
                $max_width = $old_width;
            }

            $max_height = ($old_height/$old_width)* $max_width;

            // Get current dimensions
            $old_width  = imagesx($image);
            $old_height = imagesy($image);

            // Calculate the scaling we need to do to fit the image inside our frame
            $scale = min($max_width/$old_width, $max_height/$old_height);

            // Get the new dimensions
            $new_width  = ceil($scale*$old_width);
            $new_height = ceil($scale*$old_height);

            // Create new empty image
            $new = imagecreatetruecolor($new_width, $new_height);

            // Resize old image into new
            imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);

            //Output the image to a file
            imagejpeg($new, $folder.$newFileName,100);

            // Destroy resources
            imagedestroy($image);
            imagedestroy($new);
        }

        resizeAndPlaceFile('600'); 
```

如您所见，我所做的只是将代码放入函数中，添加全局 $image 变量，将硬编码的 $max_width 值更改为等于在我调用函数时在底部定义的 $target_max_width必要的参数。

我没有看到成功的上传消息，而是在我的屏幕上看到了这些符号： ![在此处输入图像描述](../Images/13e26e3a858cc89a9af7be3c4dd7477a.png)

为什么我的上传脚本在使用 PHP 放置在函数中时不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:57:11.273

函数`imagejpeg()`接受 3 个参数`$image`和。如果设置或不设置参数，图像流将直接输出到浏览器。`$filename``$quality``$filename``null`

因此，您的问题是要保存您正在使用的图像：

```
imagejpeg($new, $folder.$newFileName, 100); 
```

但是，变量`$folder`和`$newFileName`未定义并传递给函数：

```
imagejpeg($new, null, 100); 
```

# javascript - 如何使用 jQuery 在菜单悬停时创建滑动动画？

> ID：11070453
> 
> 赞同：8
> 
> 时间：2012-06-17T09:58:34.887
> 
> 标签：javascript, jquery, css, navigation, jquery-animate

我在很多网站上都看到过这个，但我不确定我是否能够解释它。

有时导航中有滑动元素，就像菜单项下的箭头在用户悬停在不同的菜单链接上时滑动一样。

这是一个简单的菜单：

```
<ul>
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link number 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link something 4</a></li>
    <li><a href="#">Link 5</a></li>
</ul> 
```

还有一些 jQuery（我知道我可以使用简单的 css 获得相同的效果：hover）：

```
jQuery('ul li a').hover(function() {
    jQuery('a').removeClass('active');
    jQuery(this).addClass('active');
}); 
```

另外，工作jsfiddle：

[http://jsfiddle.net/8EvhK/](http://jsfiddle.net/8EvhK/)

悬停时按钮背景变为红色。我希望这个背景在我悬停时在这些按钮之间滑动和变换（宽度）。

如何做这样的事情？我一直在寻找教程，但没有运气。

非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T10:03:08.537

1.  使用 jquery 的`append`.

    ```
    $('ul').append('<div id="slider"></div>'); 
    ```

2.  在`hover`任何菜单项上，`animate`这个新元素到水平方向`position`和`width`触发事件的菜单项。

    ```
    $('ul li a').hover(function(){

        var left = $(this).parent().position().left;
        var width = $(this).width();

        $('#slider').stop().animate({
            'left' : left,
            'width' : width
        });
    }); 
    ```

3.  将滑块重置为其初始状态。

    ```
    var left = $('ul li:first-child a').parent().position().left;
    var width = $('ul li:first-child a').width();
    $('#slider').css({'left' : left, 'width' : width}); 
    ```

4.  添加一些CSS。

    ```
    #slider {
        position:absolute;
        top: -5px;
        left: 0;
        height: 100%;
        width: 0;
        padding: 5px 15px;
        background-color: #f00;
        z-index:-1;
    } 
    ```

这是一个工作小提琴：http: [//jsfiddle.net/5wPQa/2/](http://jsfiddle.net/5wPQa/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T10:11:56.163

[您可以使用CSS 过渡](https://developer.mozilla.org/en/CSS/CSS_transitions)来实现此效果：

```
ul li {
    display:block;
    padding: 5px 15px;
    background-color: #333;
    color: #fff;
    text-decoration: none;
    width:50%;
    -moz-transition: width 1s; /* Firefox 4 */
    -webkit-transition: width 1s; /* Safari and Chrome */
    -o-transition: width 1s; /* Opera */
}

ul li:hover{
    width:100%;
} 
```

[这是一个例子](http://jsfiddle.net/MaJac89/8EvhK/5/)。

# javascript - 将html内容附加到div标签时出现jquery错误

> ID：11070460
> 
> 赞同：0
> 
> 时间：2012-06-17T09:59:30.507
> 
> 标签：javascript, jquery

这是我的代码：

```
<div id="removequestions"></div>

var html += '<input type=radio name=questions />';
$.('#removequestions').append(html); 
```

我在执行上述代码时遇到的 javascript 错误是：

```
XML filter is applied to non-XML value (function (a, b) {return new c.fn.init(a, b);}) 
```

知道为什么会发生此错误。我想动态添加单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:06:26.790

以这种方式表示：-

```
var html = "";

html += '<input type=radio name=questions />';
$('#removequestions').append(html);​ 
```

## 编辑：

另一种最佳表示方式：-

```
var ques = $('#removequestions');
$('<input>').attr({
    'type': 'radio',
    'name': 'questions'
}).appendTo(ques); 
```

**[现场演示](http://jsfiddle.net/SivaCharan/4VSde/)**

# jquery - jQuery this 在每个循环中

> ID：11070462
> 
> 赞同：3
> 
> 时间：2012-06-17T09:59:57.917
> 
> 标签：jquery

在`initialize()`函数内部有一个 jQuery`each`循环。在该循环内部是一个引用，由于 jQuery 已重新分配给当前循环元素，因此该引用`this.dbcolumns`显然不起作用。`this`那么如何`this.dbcolumns`从循环内部引用呢？它可以在循环之外工作。

```
function datatable() {
    this.url = '';
    this.htmltable = '';
    this.dbtable = '';
    this.dbcolumns = new Array();
    this.idfield = 'id';
    this.pageno = 0;
    this.pagesize = 15;
    this.totalpages = 0;
    this.totalrecords = 0;
    this.searchterm = '';

    this.initialize = function() {
        this.dbtable = $(this.htmltable).attr('data-table');
        this.dbcolumns.push(this.idfield);
        $(this.htmltable + ' th[data-field]').each(function(i, col){
            this.dbcolumns.push( $(col).attr('data-field') ); /* <<<<<<<<<< this line */
        });
        return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T10:02:45.637

引用您想要在循环之外保留的“this”。

```
var self = this; 
```

然后你可以在循环中使用“self”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T10:03:04.543

存储对回调`this`外部的引用`each`，或使用 ES5[`bind`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
$(this.htmltable + ' th[data-field]').each(function(i, col){
     this.dbcolumns.push( $(col).attr('data-field') );
}.bind(this)); 
```

或者，如评论中所述，使用[`$.proxy`](http://api.jquery.com/jQuery.proxy/)：

```
$(this.htmltable + ' th[data-field]').each($.proxy(function(i, col){
     this.dbcolumns.push( $(col).attr('data-field') );
}, this)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T10:04:08.693

要解决的常见 JS 模式是使用闭包：

```
this.initialize = function() {
    var that = this;

    this.dbtable = $(this.htmltable).attr('data-table');
    this.dbcolumns.push(this.idfield);
    $(this.htmltable + ' th[data-field]').each(function(i, col){
        that.dbcolumns.push( $(col).attr('data-field') ); /* <<<<<<<<<< this line */
    });
    return this;
} 
```

# c# - 无法从灰色转换为双色

> ID：11070463
> 
> 赞同：0
> 
> 时间：2012-06-17T10:00:13.047
> 
> 标签：c#, casting, emgucv

我正在尝试实现边缘检测方法。由于无法在此处复制所有行，因此我仅复制了相关代码。当我编译时，我得到这个错误：

> 无法将“Emgu.CV.Structure.Gray”类型的对象转换为“System.IConvertible”类型。

我已经搜索过了，但我找不到有用的东西。有什么方法可以将 MyImage 从 Gray 转换为 Double？

提前致谢

```
Image<Gray,Byte> MyImage = null;
public Gray input_i(int x, int y, int z)
{
    Gray input;
    input = MyImage[x,y];
    return input;
}

result[I] += hueckel_func.HueckelDisk(point_x, point_y, I) * Convert.ToDouble(input_i(point_a, point_b, I)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:08:28.300

只需获取该`Intensity`属性，它已经是`double`：

```
result[I] += hueckel_func.HueckelDisk(point_x, point_y, I) * input_i(point_a, point_b, I).Intensity; 
```

# ruby-on-rails - rails，simple_form，如何在单选按钮中设置默认选定项

> ID：11070464
> 
> 赞同：0
> 
> 时间：2012-06-17T10:00:20.067
> 
> 标签：ruby-on-rails, simple-form

如何在此处将“true”设为默认值？

**selected: true**选项不起作用

```
<%= f.input :smoke, label: "Smoke", :collection => [[true, "You can"], [false, "You can't"]],
         label_method: :last, value_method: :first, as: :radio_buttons, selected: true %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T10:37:49.380

您是否有任何理由避免在模型或控制器中设置默认值？也许可以使用 simple_form 在视图级别将“true”设置为默认值，但之后您必须为新/编辑操作创建两个单独的表单或向视图代码添加额外的逻辑（以正确显示“默认”true 或实际价值）。

否则，向控制器添加单行可能可以解决问题，而且我没有看到任何副作用：

```
def new
  @model = Model.new
  @model.smoke = true # 'true' will be default
  ... 
```

# php - 如何在 Kohana 中实现多关系 ORM？

> ID：11070465
> 
> 赞同：0
> 
> 时间：2012-06-17T10:00:40.207
> 
> 标签：php, orm, kohana, kohana-orm

我对 Kohana ORM 中的关系有疑问。我有三个模型：用户、歌曲和标签。

```
User {
    has many Songs;
    has many Tags; (followed tags)
}

Song {
    belongs to User;
    has many Tags;
}

Tag {
    has many Users;
    has many Songs;
} 
```

例子：

*   用户 'Naimad' 使用以下标签：Deadmau5 和 Inpetto。
*   每个标签有两首歌：
    1.  Deadmau5 标签有：Veldt 和 Strobe，
    2.  Inpetto 标签有：托卡的奇迹和风暴。

我想从用户后面的标签中获取这些歌曲，我不知道该怎么做。我知道这是愚蠢的例子，但我在发布这个问题之前尝试过：

```
$songs = ORM::factory('user', array('name' => 'Naimad'))
    ->tags
    ->songs
    ->find_all(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T00:05:32.520

我认为你需要使用**->with('tag')->with('song')**

```
$songs = ORM::factory('user', array('name' => 'Naimad'))
    ->with('tags')
    ->with('songs')
    ->find_all(); 
```

然后访问该值对对象 **$s->tags->field_name** ... 等进行循环

# c++ - 如何在 libjpeg-turbo 中使用 jpeg_mem_src、jpeg_mem_dest？

> ID：11070473
> 
> 赞同：4
> 
> 时间：2012-06-17T10:02:29.707
> 
> 标签：c++, libjpeg, libjpeg-turbo

libjpeg8 包含这两个功能，但在 libjpeg-turbo 中具有以下功能：

```
 //jconfig.h
 #define JPEG_LIB_VERSION 62 
```

...

```
//jpeglib.h
#if JPEG_LIB_VERSION >= 80
/* Data source and destination managers: memory buffers. */
EXTERN(void) jpeg_mem_dest JPP((j_compress_ptr cinfo,
                   unsigned char ** outbuffer,
                   unsigned long * outsize));
EXTERN(void) jpeg_mem_src JPP((j_decompress_ptr cinfo,
                  unsigned char * inbuffer,
                  unsigned long insize));
#endif 
```

如果我尝试使用“JPEG_LIB_VERSION 80”，我会得到以下信息：

> 错误 LNK2019：函数中引用的未解析的外部符号 _jpeg_mem_src ...

那么，如果可能的话，我该如何使用这些功能？我需要编译一些 libjpeg-turbo 包吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:13:10.537

预编译的 .lib 和 .dll 文件仅支持版本 6 函数。您需要编译自己的库。将标志传递`-DWITH_JPEG8=1`给 CMake 以获取这两个函数。

# javascript - 哪个 JavaScript 框架对新手来说更容易：Ember.js、Canjs、Angular.js？

> ID：11070474
> 
> 赞同：2
> 
> 时间：2012-06-17T10:02:45.340
> 
> 标签：javascript, ember.js, angularjs

我是一名新手网络开发人员，来自嵌入式软件。C 语言就像我的母语。我正在尝试使用 MVC 框架来编写一个在浏览器中运行以用于学习目的的应用程序。

你能给我一个建议，哪个 JS 框架应该更容易上手：emberjs、canjs 或 Angularjs。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:25:30.467

看看一些流行的 javascripts 框架，比如：jquery、MooTools 和 YUI .. 我想会帮助你理解

# c++ - 纹理在opengl中显示为白色

> ID：11070476
> 
> 赞同：4
> 
> 时间：2012-06-17T10:02:46.943
> 
> 标签：c++, opengl, sdl-opengl

我无法加载 a`BMP texture`并将其显示在立方体的面上。
我正在研究。`Windows 7`我的编译器是`Visual Studio 2010 Express`。我`FreeImage`用来加载 bmp。我的图像位深度是 24。我的图像大小是 256 * 256。我`SDL`用来创建窗口和处理事件。
当我编译并运行程序时，我的立方体仍然是白色的，它的表面上什么也没有显示。我正在将纹理加载到一个`GLuint`变量中。当我打印该变量时，它只打印“1”。我的一个朋友告诉我，我的显卡与这个版本的不兼容`OpenGL`。所以我在虚拟机上编译并运行程序，`Ubuntu`它工作正常。立方体纹理成功。请你帮我运行它我的`Windows`正确吗？
如果你需要我的显卡是`NVIDIA GT240 DDR5`.

# 编辑

这是我的 initgl 函数：

```
//OpenGL initialization.
int initGL(void)
{
    glEnable(GL_TEXTURE_2D); //Enable texture mapping.
    if(!loadGLTextures("bmp_24.bmp"))
        return false;

    glShadeModel(GL_SMOOTH);
    glClearColor(0.0f , 0.0f , 0.0f , 0.5f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    //Nice perspective.
    glHint(GL_PERSPECTIVE_CORRECTION_HINT , GL_NICEST);
    return true;
} 
```

这是加载图像的函数。GLuint 纹理[1] 之前已定义：

```
//This function will load a bitmap image.
bool loadGLTextures(const char* file)
{
    FREE_IMAGE_FORMAT fif = FIF_UNKNOWN;

    fif = FreeImage_GetFileType(file , 0);
    if(fif == FIF_UNKNOWN)
        fif = FreeImage_GetFIFFromFilename(file);
    if(fif == FIF_UNKNOWN)
        return false;

    FIBITMAP* dib = FreeImage_Load(fif , file);

    if(!dib)
        return false;

    //Create the texture.
    glGenTextures(1 , &texture[0]);

    //Typical texture generation using data from the bitmap.
    glBindTexture(GL_TEXTURE_2D , texture[0]);

    //Generate the texture.
    glTexImage2D(GL_TEXTURE_2D , 0 , GL_RGB , FreeImage_GetWidth(dib) , 
        FreeImage_GetHeight(dib) , 0 , GL_BGR_EXT , GL_UNSIGNED_BYTE , 
        FreeImage_GetBits(dib));

    //Linear filtering.
    glTexParameteri(GL_TEXTURE_2D , GL_TEXTURE_MIN_FILTER , GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D , GL_TEXTURE_MAG_FILTER , GL_LINEAR);

    printf("%d" , texture[0]);

    FreeImage_Unload(dib);

    return true;

} 
```

这是我的渲染功能：

```
//All of the drawing goes through this.
int drawGLScene(void)
{
    static float xrot = 0 , yrot = 0 , zrot = 0;
    //Clear screen and depth buffer.
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    glTranslatef(0.0f , 0.0f , -5.0f);
    glRotatef(xrot , 1.0f , 0.0f , 0.0f);
    glRotatef(yrot , 0.0f , 1.0f , 0.0f);
    glRotatef(zrot , 0.0f , 0.0f  ,1.0f);

    //Select the texture.
    glBindTexture(GL_TEXTURE_2D , texture[0]);

    glBegin(GL_QUADS);
    //Front:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Bottom right fo the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , 1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , 1.0f);

    //Back:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Top right of the texture and the quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    //Top left of the texture and the quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);

    //Top:
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , 1.0f , 1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);

    //Bottom:
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , -1.0f , 1.0f);

    //Right:
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(1.0f , -1.0f , 1.0f);

    //Left:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(-1.0f , 1.0f , 1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    glEnd();

    SDL_GL_SwapBuffers();

    xrot += 0.1;
    yrot += 0.1;
    zrot += 0.1;

    return true;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T16:32:49.287

您的代码中有许多可能出错的地方。

我的怀疑是，你`initGL()`过早地打电话，即没有可用的上下文。您没有显示有问题的代码，所以我只能对此进行猜测。

启用纹理单元仅对绘图很重要。您可以在禁用纹理单元的情况下上传纹理数据。我强烈建议你把它放在`glEnable(GL_TEXTURE_2D);`你的四边形绘图代码之前而不是其他任何地方（实际上你应该只调用 glEnable 和 glDisable 到绘图代码中，原因有几个）。

加载纹理时您无法执行若干健全性检查。此外，您忘记正确设置像素存储参数，但这会使您的纹理看起来失真。此外，从您的加载函数返回纹理 ID，而不是布尔值并将 ID 放入全局变量中也是有意义的。纹理 ID 0 是保留的，因此您可以使用它来指示错误。

不过，您设置了过滤器模式，因此这不是未定义 mipmap 级别的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:54:46.820

~~`GL_TEXTURES_2D`需要在创建纹理之前启用，所以需要在调用`glEnable(GL_TEXTURE_2D);`之前调用`glGenTextures(1 , &texture[0]);`~~

此外，要启用透明度，您需要调用 `glEnable(GL_BLEND);`

但这并不能解释为什么它可以在 Ubuntu 上运行，但不能在 Windows 上运行......我会说试一试，看看它是否有帮助。

编辑：现在您已经发布了渲染功能，我注意到的一件事是您没有设置渲染颜色。试着打电话

```
glColor4f(r,g,b,a); // r, g, b and a are float between [0,1], specifying your desired color 
```

介于`glLoadIdentity();`你的第一个`glVertex3f`电话之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T10:00:24.327

您的纹理尺寸可能不是 2 的幂，即 1、2、4、8、16、32、64 等等。

这也可能在某些硬件上导致这样的问题，通常是在较旧的硬件上。

干杯；）

# security - 通过对不应该可见的所有内容进行 404 处理来提高 CMS 安全性

> ID：11070480
> 
> 赞同：1
> 
> 时间：2012-06-17T10:03:43.030
> 
> 标签：security, .htaccess, mod-rewrite

我制作了一个简单的 .htaccess 文件，它可以防止用户加载系统核心文件夹中的 url。然而，这并不完全有效。

如果我加载`http://domain.com/systemfolder/`，我得到`404 File not found`，这很酷，但是如果我输入`http://domain.com/systemfolder`（注意 URL 没有尾随），如果从到`/`，mod_dir 会重定向。如果我禁用该特定目录，我会得到而不是，因此攻击者能够识别我的系统。我该如何解决？`http://domain.com/systemfolder``http://domain.com/systemfolder/``mod_dir``401 Permission denied``404 File not found`

附加信息：我正在使用`mod_rewrite`404'ing。

我当前的 .htaccess（即在系统根目录中的所有系统文件夹中）如下所示：

```
<IfModule mod_dir.c> 
    DirectorySlash Off 
</IfModule> 
<IfModule mod_rewrite.c> 
    RewriteEngine on 
    RewriteRule ^(.*)$ - [R=404,L] 
</IfModule> 
<IfModule !mod_rewrite.c> 
    Order allow,deny Deny from all 
</IfModule> 
```

* * *

你可能会问自己：他为什么要那样做？？？

答案很简单：基本上任何像 Joomla!、WordPress 或 Drupal 这样的开源 CMS 都容易受到攻击，因为这些都不是 100% 防弹的。一旦破解者发现漏洞，他基本上会告诉成千上万的破解者，他们就有机会破解该系统。这些系统不是 100% 防弹的原因是 10% 是因为人类只是人类，而 90% 是因为有成千上万的人为系统做出贡献，并不是每个人都能产生安全的代码。数千人可以相对较快地发布修补程序这一事实弥补了这一事实。

破解者的第一步是识别这样的系统。如果他能够`wp-admin`在 url 中添加额外的内容并且它可以工作，那么他基本上可以识别 WordPress 网站。Cracker 的第二步是寻找漏洞。第三步是利用该漏洞。

我的方法是在第 1 步停止破解程序，这样他就无法识别系统。当然，页脚中可能会有系统的签名，但这需要人工交互。通过屏蔽每个 url 并通过基于键的 web 内容加载（如果通过加载在图像末尾附加一次键的页面在 uri 中不提供有效键，用户将基本上无法加载任何图像或视频网址）。管理将在专用服务器上，仅对某些 IP 开放，所以是的，我认为它会非常安全。

# sql - How to prevent SQL Injection for Input Fields?

> ID：11070484
> 
> 赞同：0
> 
> 时间：2012-06-17T10:04:38.767
> 
> 标签：sql, wordpress, sql-injection

I'm looking into wordpress plugin, and it has a form with input field like this:

```
<input type="text" name="user_email" id="email1" value="'.strip_tags($_POST['user_email']).'"  class="short" tabindex="2" /> 
```

So strip_tags in value means that anything submitted through this input will be tag striped? against SQL inject?

Should not this security measure be implemented on target file of this form instead?

I'm having trouble understanding if this would be any help in securing against sql injections

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:20:20.657

First, strip_tags() is NOT defense against SQL injection. Second, as Francois B pointed out, the tags will only be stripped when the HTML form is loaded. It doesn't matter what the user types into the form itself in their web browser; you should be sanitizing strings after the form has been submitted but before the mysql queries are executed.

I repeat: **`strip_tags()` is NOT an anti-SQL injection measure**. If you want nearly fool-proof protection from SQL injections, you need to look into prepared statements. In most cases, sanitizing your input with a character white list, using `mysql_real_escape_string()`, and making sure your variables are enclosed in single-quotes is enough to protect against SQL injection.

It's far too easy for a new developer to shoot his or her self in the foot while using PHP and mysql; please do some research with Google and make sure to read [http://bobby-tables.com/](http://bobby-tables.com/). Please ask for help and have someone experienced review your code before you publish a potentially vulnerable script.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:31:24.577

as noted before, prepared statements is the best defense against sql-injection.

among system measures I'd add mod_security application firewall (on the Apache level if your Wordpress is on Apache and you have control over configuration), it helps against sql-injection and many other exploits.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:07:37.470

It will be tag striped only this time (setting value to HTML input field -- assuming this is done server-side when generating HTML content). You have to do same thing when accessing database with parameters.

# python - Python 中是否有 112 位 Triple DES 示例实现？

> ID：11070485
> 
> 赞同：0
> 
> 时间：2012-06-17T10:04:46.463
> 
> 标签：python, cryptography, des, 3des

Python 中是否有 112 位 Triple DES 示例实现？

我找到了`pydes`，但它仅适用于[Triple DES](http://en.wikipedia.org/wiki/Triple_DES)的 16 或 24 字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:40:26.247

在 DES 密钥中，每个字节的最低有效位用于奇偶校验。因此，在 16 个字节中只有 16 * 7 = 112 个独立位。112 位通常称为 TDEA（三重 DES 的官方 NIST 名称）密钥选项 #2 的*有效密钥大小/长度*。TDEA 的 112 位密钥也称为 DES ABA 密钥，因为该方案中的第一个和第三个密钥是相同的。

# javascript - 评估不起作用 - JavaScript

> ID：11070487
> 
> 赞同：1
> 
> 时间：2012-06-17T10:04:58.737
> 
> 标签：javascript, json, eval

我以前从未使用`eval()`过，所以我认为我只是把语法弄错了。以下有什么问题：

```
var JSONAsString = '{"item1":"one", "item2":"two", "item3":"three"}';
var JSONAsObject = eval(JSONString);
alert(JSONAsObject.item1); 
```

由于它似乎不起作用 - 我加载页面并且没有任何反应。

是的，我知道我不应该使用 eval。我假设 for 的语法`JSON.parse()`与 eval 的语法相同...对吗？如果是，如果（在修复代码之后）我用 JSON.parse 替换 eval，它还会做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T10:06:34.323

使用`eval`时需要将 JSON 包装在`()`：

```
var JSONAsString = '{"item1":"one", "item2":"two", "item3":"three"}';
var JSONAsObject = eval('(' + JSONAsString + ')');
alert(JSONAsObject.item1); 
```

但是，您应该`JSON.parse()` **从头开始**使用，而不是稍后使用。否则，作为有效 JavaScript 的无效 JSON 可能会工作，但在切换到`JSON.parse`.

请注意，您应该[`json2.js`](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)在使用时包括在内，`JSON.*`因为某些较旧的浏览器不支持原生 JSON。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T10:08:24.883

不要使用 eval() 来解析 JSON。使用 Douglas Crockfords json2，它为您提供跨浏览器支持、性能和安全性：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# javascript - 使用 jQuery 从其他 JavaScript 文件设置 var 值

> ID：11070489
> 
> 赞同：4
> 
> 时间：2012-06-17T10:05:07.800
> 
> 标签：javascript, jquery, global-variables, reset, thickbox

我有两个 JavaScript 文件：

1.  主.js
2.  pmt.js

我也在使用[厚框](http://jquery.com/demo/thickbox/)（Ajax 调用）

**在 Main.js 中**

```
$(document).ready(function() {

 var cnt=0;

$("#btnPmt").click(function(){
    cnt=cnt+1;
    tb_show('Void Transaction','pmt.jsp?height=310&width=400', null);
});

}); 
```

Pmt.js文件包含在 pmt.jsp**中**

```
<script src="js/Pmt.js" type="text/javascript"></script> 
```

**在 Pmt.js 中**

```
 $("#btnPmtClose").click(function(){
    cnt=0;
    parent.tb_remove();
}); 
```

我们如何重置在**Main.js**中贴花的**Pmt.js中****var cnt**的值？以上不起作用，当我关闭厚框时，我发现增量值，而不是关闭时设置的零，甚至是 Ajax 调用。

 ***** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T10:06:25.210

在 Main.js通过将其移到任何函数之外使其`cnt`成为**全局变量：**

```
var cnt=0;
$(document).ready(function() {
    ...
}) 
```****

# python - PySide - QSvgWidget 错误地呈现嵌入的 SVG 文件

> ID：11070490
> 
> 赞同：3
> 
> 时间：2012-06-17T10:05:28.657
> 
> 标签：python, svg, pyside, qwidget

我尝试使用 QSvgWidget 呈现嵌入式 svg 文件。我的文件“front.svg”如下所示：

```
<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="500" height="500" id="svgfile">
<rect style="fill:#ff0000;" id="rect1" width="150" height="200"/>

<svg x="100" y="100">
    <rect style="fill:#00ff00;" id="rect2" width="200" height="120"/>
</svg>
</svg> 
```

这个文件在 Chrome 或 Inkscape 中看起来很正常，但在 svgwidget 中看起来很奇怪。只有绿色矩形可见，红色很小，隐藏在绿色矩形后面。这是我的python代码：

```
import sys
from PySide.QtGui import QApplication
from PySide.QtSvg import QSvgWidget

if __name__ == '__main__':
    app = QApplication(sys.argv)

    widget = QSvgWidget('front.svg')
    widget.show()

    sys.exit(app.exec_()) 
```

有谁知道，是我做错了什么，还是 PySide 中的一些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:40:49.223

我找到了一些解决这个问题的方法。现在我使用 QGraphicsWebView 而不是 QSvgWidget。这是我的 Python 代码（svg 文件保持不变）：

```
import sys
from PySide.QtGui import QApplication, QGraphicsScene, QGraphicsView
from PySide.QtWebKit import QGraphicsWebView

if __name__ == '__main__':
    app = QApplication(sys.argv)

    item = QGraphicsWebView()
    item.load('front.svg')
    view = QGraphicsView()
    scene = QGraphicsScene()
    scene.addItem(item)
    view.setScene(scene)
    view.show()
    sys.exit(app.exec_()) 
```

奇怪的是，QT 使用这个小部件正确呈现 svg 文件，而使用专用小部件完全错误（我也遇到了“文本”元素的问题）。但现在一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T22:39:55.520

`<svg>`您可以通过删除额外的内部标记并将 x 和 y 属性移动到`<rect>`元素来使其正确呈现：

```
<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="500" height="500" id="svgfile">
<rect style="fill:#ff0000;" id="rect1" width="150" height="200"/>
<rect style="fill:#00ff00;" id="rect2" x="100" y="100" width="200" height="120"/>
</svg> 
```

我认为这是一个人为的例子来测试这个特定的案例，虽然？你有需要嵌套`<svg>`元素的理由吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T14:29:54.910

对我来说，*Inkscape*按照您的意图渲染了您的 SVG 文件，但是由 PyQt4 中的额外嵌入对象创建的组对象存在问题，我观察到与您相同的情况。所以我相当肯定这是你的 SVG 结构的问题，而不是 PySide。我希望这有帮助。

# android - 检查 Android 设备上的 NFC 功能

> ID：11070492
> 
> 赞同：2
> 
> 时间：2012-06-17T10:06:12.937
> 
> 标签：android, android-emulator, nfc, avd

[这是对问题](https://stackoverflow.com/questions/5805034/detecting-nfc-on-android-devices)的回应

```
Step #1: Put this in your manifest:

<uses-feature android:name="android.hardware.nfc" android:required="false" />
Step #2: Call hasSystemFeature(PackageManager.FEATURE_NFC) on PackageManager to see if NFC is available on the current device 
```

我将 API 级别设置为 8，步骤 1 可以，但是当我写`hasSystemFeature(PackageManager.FEATURE_NFC)`它时说不`Feature_NFC`解析到某个字段，`Feature_WIFI FEATURE_BLUETOOTH FEATURE_CAMERA`那里有选项。我访问过[Android 开发者网站](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_NFC)，但他们没有提到 API 级别。另一个问题是我可以在 AVD 上测试 NFC 应用程序吗？任何可以帮助我的人谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T10:18:51.827

确保您将项目构建目标设置为至少 api 级别 9。

在 manifest.xml 中包含以下内容

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> //If you have icecream sandwich installed. 
```

它将确保您的应用程序也可以在 sdk 8 上运行

还要确保无论何时调用 Gingerbread 特定功能，然后将它们包装到 if 条件中，如下所示。

```
 if (Build.VERSION.SDK_INT < Build.VERSION_CODES.GINGERBREAD) {

    } else {
        if (getPackageManager()
                .hasSystemFeature(PackageManager.FEATURE_NFC)) {
            //do processing
        }
    } 
```

用于测试您可以尝试[打开 NFC Android 模拟器](http://open-nfc.org/wp/editions/android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:08:25.040

FEATURE_NFC 是从 API 级别 9 定义的，但您仍然可以使用常量值“android.hardware.nfc”。

# html - 如何通过浏览器访问包含 URL 编码的文件名？

> ID：11070499
> 
> 赞同：1
> 
> 时间：2012-06-17T10:06:41.107
> 
> 标签：html, apache, browser

我创建了一个名为`"%20%20.txt"`并上传到我的网络空间的文件名。

当我尝试通过键入 URL 来访问上述文件时`"http://mysite/%20%20.txt"`，它会显示找不到文件的错误。我知道这`"%20"`将被解码为空白。

如何通过 URL 访问文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T10:11:52.043

您在 URL 中使用的`%20`将被解码，因此您正在查找文件`" .txt"`，但`%20`您用于创建文件的 未解码，因此文件的实际名称是`"%20%20.txt"`.

您需要使用 URL`http://mysite/%2520%2520.txt`来访问文件`"%20%20.txt"`。是的`%25`编码形式`%`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T10:11:03.433

使用`%2520%2520.txt`,`%25`解码为百分号`%`。您可以使用[http://www.asciitable.com/](http://www.asciitable.com/)上的表格。百分号后面的数字是 ASCII 值的十六进制表示。

如果你有一个长字符串，你也可以使用 Javascript 的`encodeURIComponent`函数：

```
prompt("Encoded:", encodeURIComponent("%20%20.txt")) 
```

这可以在 Javascript 控制台（ Firefox 中的`Ctrl`++ `Shift`）`J`中执行，并显示一个包含转义值的对话框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T10:11:30.667

如果您的文件名确实是`%20%20.txt`，请尝试[http://yoursite.com/%2520%2520.txt](http://yoursite.com/%2520%2520.txt)。

%25 是编码的百分比。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T10:11:39.630

您需要避开这些百分号：

```
http://mysite/%2520%2520.txt 
```

# c - 最便携（在*nix中）允许线程降低自己的好方法

> ID：11070500
> 
> 赞同：0
> 
> 时间：2012-06-17T10:06:42.077
> 
> 标签：c, linux, macos, privileges, thread-priority

授予进程/线程降低其自身良好值的权利的最佳方法是什么，而不以完全特权运行它？解决方案可以在过程本身之外（`ulimit`或`setcap`例如）。

我正在寻找至少在现代 Linux 和 Mac OS X 上可移植的东西（这就是我没有用`ulimit`or回复自己的原因`setcap`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:15:57.903

任何进程都可以使用`setpriority()`or使自己变得更好`sched_setscheduler()`，任何线程都可以使用`pthread_setchedparam()`and `pthread_setschedprio()`。两者都在 POSIX.1-2001 中定义，因此基本上所有非 Windows 系统都应该可用。有关可用的调度程序类型和优先级的详细信息，请参阅 man 2 sched_setscheduler。

请注意，较高的数值优先级值表示更好的进程；较低的逻辑优先级。值越大，获得的 CPU 时间越少。要找出给定调度策略的最小值和最大值，您必须使用`sched_get_priority_min()`和`sched_get_priority_max()`。

通常，进程或线程应该始终能够降低其优先级（使其更好），并使用任何不会使其变得不那么好的调度策略。但是，2.6.12 之前的 Linux 内核不允许普通用户使用，因此您的程序可能应该尝试使其或它的某些线程更好，但如果碰巧在某些稀有架构上不允许这样做，请不要太介意. 最重要的是，你的算法设计不应该依赖于调度；争取比这更健壮的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T08:33:09.840

您需要额外的权限来降低 nice 值（增加逻辑优先级）。在 Linux 中，这意味着要么由 root 运行，要么具有 CAP_SYS_NICE 功能。两者都可以为二进制可执行文件设置（通过 chown 和 chmod 的 setuid root 或 setcap）。前者适用于所有类 Unix 系统（但安装时需要 root 权限），但后者是特定于 Linux 的。

最可接受的可移植方式可能是编写一个可以安装 setuid root 的包装程序。这将非常简单，只需几十行 C。它只需调用 sched_get_priority_min()、sched_get_priority_max()、sched_setscheduler() 和 sched_setparam() 来降低 nice 值（获得更多 CPU 时间），然后调用 seteuid (0); setregid(getgid(), getgid); setreuid(getuid(), getuid()); 删除额外的权限，最后 execv() 实际程序。注意：您绝对希望在安装时硬编码实际程序的路径。这应该在所有 Linux 和类 Unix 系统上无需修改即可工作。

在您的实际程序中，您只需增加不太重要的线程的友好度。换句话说，您不要试图降低程序中任何线程的友好度，而是增加所有其他线程的友好度。setuid 根包装程序是降低最低友好度级别的可移植方式。您显然可以先检查当前的 niceness 和 scheduler 详细信息，看看是否有足够的范围进行调整。也许你的包装程序可以设置命令行参数或环境变量来告诉实际程序使用哪个优先级。

# java - Google App Engine - 在 java 中包含 php 的方法？

> ID：11070508
> 
> 赞同：2
> 
> 时间：2012-06-17T10:07:46.257
> 
> 标签：java, php, google-app-engine, eclipse-plugin

我希望将 php 包含在我的页眉、导航、页脚等中。想知道最好的方法是什么以及如何实现？

我听说过使用兼容的罐子。这样就够了吗？如果是这样，我将如何实施。

我在mac上使用java eclipse。

提前致谢。斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:11:00.330

您[不能](http://code.google.com/p/googleappengine/issues/detail?id=13&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)在 Google App Engine 上使用 PHP，因此您的模板必须依赖 Django 或 Jinja2 或其他框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:34:31.967

您可能想改用[JSP 包含](http://java.sun.com/products/jsp/syntax/1.2/syntaxref1214.html)：

```
<jsp:include page="{relativeURL | <%= expression %>}" flush="true| false" /> 
```

# sql-server - 左连接的 SQL 查询问题

> ID：11070509
> 
> 赞同：1
> 
> 时间：2012-06-17T10:07:48.907
> 
> 标签：sql-server, join

我有两张桌子，我需要展示`additionalcolors`只有 1 个玩具图案的玩具。示例（FW18、FK97、FK38、LX74）。我使用了一个左外连接 from `Toytypes`to`Toyadditionalcolor`并执行了一个子查询来查找只有一个玩具名称的玩具模式。但我仍然无法获得像下面的结果查询这样的结果。

请告诉我我需要修改代码的哪一部分以获得与下面的 query1 表类似的结果？

**玩具类型**

```
ToyPattern   ToyName           mainColor
----------   ---------------   ---------
  F692         Dino             pink       
  F692         Elephant         pink         
  FK38         Elephant         pink         
  FK97         Giraffe          purple     
  FW18         Sonic            pink       
  LX73         Kangaroo         pink       
  LX73         Cow              blush       
  LX73         Dog              pink       
  LX74         Cat              plum 
```

**玩具附加颜色**

```
 ToyPattern  ToyName     firstColor    additionalColor
 ----------  ----------  -----------   ----------------
    FK38     Elephant    pink          orange
    FK38     Elephant    pink          yellow
    LX74     cat         plum          dark pink
    LX74     cat         plum          pale pink 
```

期望的输出：

```
ToyPattern  ToyName     color 1      color 2      color 3      color 4      color 5      
----------- ----------  ------------ ------------ ------------ ------------ ------------
FK38        Elephant    pink         orange       yellow       NULL         NULL    
FK97        Giraffe     purple       NULL         NULL         NULL         NULL
FW18        Sonic       pink         NULL         NULL         NULL         NULL
LX74        cat         plum         dark pink    pale pink    NULL         NULL 
```

下面是我的 SQL 代码。

```
select distinct 
    toytypes.toypattern,
    toyname,
    toytypes.flowerBreed,
    toytypes.firstColor as 'color 1'
from 
    Toytypes 
left join 
    ToyAdditionalColor on ToyAdditionalColor.toypattern = Toytypes.toypattern
where 
    toytypes.toypattern in 
              (select Toypattern
               from Toytypes 
               group by toypattern
               having count(toypattern) < 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:43:54.370

嗯，我更愿意从规范化开始`ToyAdditionalColor` ，变成类似：ToyPattern、ToyName、Color、SortOrder。

示例数据为：'FK38'、'Elephant'、'pink'、1。

第二行：“FK38”、“大象”、“橙色”、2。

之后，您可以使用`PIVOT`- 我目前还没有 Management Studio，但我认为它可能看起来像这样：

```
SELECT
  ToyPattern
  , ToyName
  , 'color 1' = 1
  , 'color 2' = 2
  , 'color 3' = 3
  , 'color 4' = 4
  , 'color 5' = 5
FROM (  
  SELECT
  ToyPattern
  , ToyName
  , SortOrder
  , Color
  FROM
    dbo.ToyAdditionalColor
) AS ToyAdditionalColor PIVOT (
  MAX (Color) FOR SortOrder IN (1,2,3,4,5)
) AS PivotTable 
```

# facebook-graph-api - FB.login 不正确的redirect_uri

> ID：11070523
> 
> 赞同：7
> 
> 时间：2012-06-17T10:10:19.923
> 
> 标签：facebook-graph-api

我正在使用 flash GrahpAPI_web sdk，它是与 Javascript SDK 通信的 as3 flash 扩展。

无论如何，我试图让 oauth 对话框显示为弹出窗口，如弹出窗口。当我运行 FB.init 后跟 FB.login 调用时，生成的 oauth URL 包含一个我没有指定的重定向，我也无法清楚地看到如何指定它。

这是 oauth URL 的朋友视图

```
https://www.facebook.com/dialog/oauth
api_key=<APP_ID>
app_id=<APP_ID>
client_id=<APP_ID>
display=popup
domain=app.local.MYAPP.com
locale=en_US&origin=1
redirect_uri=http://static.ak.facebook.com/connect/xd_arbiter.php?version=8#cb=f35f1a383cdde0a
origin=http%3A%2F%=app.local.MYAPP.com%2Ff38af6b0241d006
domain==app.local.MYAPP.com
relation=opener
frame=fc22754c0e4d
response_type=token,signed_request 
scope=read_stream, publish_stream 
sdk=joey 
```

问题是我没有指定的redirect_uri。如果我替换为 app.local.MYAPP.com，它似乎可以正常工作。

如何让 FB.login 实现正确的 redirect_uri？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:39:36.933

我遇到了类似的麻烦，所以我做了一些不同的事情。也许这样的事情会为你工作。我使用了这个javascript：

```
window.location = encodeURI("https://www.facebook.com/dialog/oauth?
    client_id=<APP_ID>
    &redirect_uri=<REDIRECT_URL>
    &response_type=token
    &scope=publish_stream"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T07:58:50.480

确保在此页面的有效 oauth 重定向 uri 中添加确切的子域！ [https://developers.facebook.com/apps/](https://developers.facebook.com/apps/) {appid}/fb-login/

# codeigniter - 在 Codeigniter 中使用自定义查询时如何使用 where

> ID：11070524
> 
> 赞同：1
> 
> 时间：2012-06-17T10:10:20.577
> 
> 标签：codeigniter

我正在为我的数据库应用程序使用 codeigniter。我不确定是否可以在 codeigniter 数据库类中使用 get_where 进行自定义查询。

这是我的查询

```
 $this->db->query("select model, varient, (select color from mtbl_colors where mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles"); 
```

现在，如果我想使用 where 子句过滤上述内容，我将使用查询作为

```
 function getVehicles($model='',$varient='')
 {
      if($model!='')
          {
            $q=$this->db->query("select model,varient,(select color from mtbl_colors where
            mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles 
            where model='$model'")->result();
            return $q;
           }
       elseif($varient!='')
          {
         $q=$this->db->query("select model,varient,(select color from mtbl_colors where
            mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles 
            where varient='$varient'")->result();
            return $q;
           }
    } 
```

这只是一个示例，我必须为每个 where 条件编写所有条件。所以，我可能在 codeigniter 中遗漏了一些东西，它可以完成比我现在使用的更容易的多个条件。

编辑：：：：

在@Yan 的建议下，我尝试如下

```
 function getVehicles($where_clause='',$where_value='') {
    $sql = "select model,varient,(select color from mtbl_colors where
    mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles";
   $where_clause=array("varient", "model", "colorid");
   $where_value=array("MAGNA 1.4", "SANTRO", "3")

    if (!empty($where_clause) && !empty($where_value)) {
      $sql .= " where $where_clause = ?";
     return $this->db->query($sql, $where_value)->result();
    }
   return false;
  } 
```

我收到一个数据库错误说“无效的列值 Aarray”

因为我的意图是实现多个条件以根据我的过滤器选项生成结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:01:39.220

试试这个：

```
$sql = "select model,varient,(select color from mtbl_colors where
        mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles";

$where_condition = '';
if (!empty($model)) {
    $sql .= " where model = ?";
    $where_condition = $model;   
}
elseif (!empty($varient)) {
    $sql .= " where varient = ?"; 
    $where_condition = $varient; 
}

if (!empty($where_condition)) {
   return $this->db->query($sql, $where_condition)->result();
}
return false; 
```

使用这种方式转义输入。

编辑：一个更好的解决方案，但你需要清理`where_clause`变量：

```
function getVehicles($where_clause='',$where_value='') {
   $sql = "select model,varient,(select color from mtbl_colors where
        mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles";

   if (!empty($where_clause) && !empty($where_value)) {
      $sql .= " where $where_clause = ?";
      return $this->db->query($sql, $where_value)->result();
   }
   return false;
} 
```

编辑 2 - 使用数组：

```
function getVehicles($where_array) {
    $sql = "select model,varient,(select color from mtbl_colors where
        mtbl_colors.colorid=mtbl_vehicles.colorid) as color from mtbl_vehicles";

    $values = array();
    $counter = 0;
    foreach ($where_array as $key => $value) {
        if ($counter > 0) {
           $sql .= " AND ";
        }

        $sql .= " where $key = ?";
        array_push($values, $value);
        $counter ++;
    }
    return $this->db->query($sql, $values)->result();
} 
```

# iphone - 如何在单击 xcode 时使某些内容增加

> ID：11070525
> 
> 赞同：0
> 
> 时间：2012-06-17T10:10:30.563
> 
> 标签：iphone, ios, xcode

我在 didloader 中有 2 组 vaules，并希望它们在每次`IBAction`启动时增加

这是我的例子

```
- (void)viewDidLoad
{
    [super view];
    //X Speed and Y Speed
    pos = CGPointMake(2,1);
    pos2 = CGPointMake(2,1);

}

- (IBAction)start 
{

) 
```

我没有将 int 分配给 2,1 等，但 pos 和 pos2 值会有所不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:14:24.247

`start`只需在调用该方法时增加 x 和 y 值。

```
- (void)viewDidLoad
{
    [super view];
    //X Speed and Y Speed
    pos = CGPointMake(2,1);
    pos2 = CGPointMake(2,1);

}

- (IBAction)start 
{
   //So you just increment their x and y values
   pos.x += 1;
   pos.y += 1;

   pos2.x += 2;
   pos2.y += 1;
} 
```

# python - 如何向 CSV 文件添加新列？

> ID：11070527
> 
> 赞同：77
> 
> 时间：2012-06-17T10:10:50.263
> 
> 标签：python, csv, python-3.x

我有几个看起来像这样的[CSV文件：](http://en.wikipedia.org/wiki/Comma-separated_values)

```
Input
Name        Code
blackberry  1
wineberry   2
rasberry    1
blueberry   1
mulberry    2 
```

我想向所有 CSV 文件添加一个新列，使其如下所示：

```
Output
Name        Code    Berry
blackberry  1   blackberry
wineberry   2   wineberry
rasberry    1   rasberry
blueberry   1   blueberry
mulberry    2   mulberry 
```

我到目前为止的脚本是这样的：

```
import csv
with open(input.csv,'r') as csvinput:
    with open(output.csv, 'w') as csvoutput:
        writer = csv.writer(csvoutput)
        for row in csv.reader(csvinput):
            writer.writerow(row+['Berry']) 
```

(Python 3.2)

但在输出中，脚本跳过每一行，新列中只有 Berry：

```
Output
Name        Code    Berry
blackberry  1   Berry

wineberry   2   Berry

rasberry    1   Berry

blueberry   1   Berry

mulberry    2   Berry 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-06-17T10:32:50.047

这应该让您知道该怎么做：

```
>>> v = open('C:/test/test.csv')
>>> r = csv.reader(v)
>>> row0 = r.next()
>>> row0.append('berry')
>>> print row0
['Name', 'Code', 'berry']
>>> for item in r:
...     item.append(item[0])
...     print item
...     
['blackberry', '1', 'blackberry']
['wineberry', '2', 'wineberry']
['rasberry', '1', 'rasberry']
['blueberry', '1', 'blueberry']
['mulberry', '2', 'mulberry']
>>> 
```

编辑，请注意在 py3k 中您必须使用`next(r)`

感谢您接受答案。在这里你有一个奖金（你的工作脚本）：

```
import csv

with open('C:/test/test.csv','r') as csvinput:
    with open('C:/test/output.csv', 'w') as csvoutput:
        writer = csv.writer(csvoutput, lineterminator='\n')
        reader = csv.reader(csvinput)

        all = []
        row = next(reader)
        row.append('Berry')
        all.append(row)

        for row in reader:
            row.append(row[0])
            all.append(row)

        writer.writerows(all) 
```

请注意

1.  中的`lineterminator`参数`csv.writer`。默认情况下，它设置为`'\r\n'`，这就是为什么你有双倍间距。
2.  使用列表附加所有行并使用`writerows`. 如果您的文件非常非常大，这可能不是一个好主意（RAM），但对于普通文件，我认为它更快，因为 I/O 更少。
3.  正如这篇文章的评论中所指出的，请注意`with`，您可以在同一行中进行嵌套，而不是嵌套这两个语句：

    使用 open('C:/test/test.csv','r') 作为 csvinput，open('C:/test/output.csv', 'w') 作为 csvoutput：

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-12-27T23:26:00.420

我很惊讶没有人推荐熊猫。尽管使用像 Pandas 这样的一组依赖项可能看起来比完成如此简单的任务所必需的更加笨拙，但它会生成一个非常短的脚本，而且 Pandas 是一个很棒的库，用于执行各种 CSV（以及实际上所有数据类型）数据操作. 不能与 4 行代码争论：

```
import pandas as pd
csv_input = pd.read_csv('input.csv')
csv_input['Berries'] = csv_input['Name']
csv_input.to_csv('output.csv', index=False) 
```

查看[熊猫网站](http://pandas.pydata.org/)了解更多信息！

内容`output.csv`：

```
Name,Code,Berries
blackberry,1,blackberry
wineberry,2,wineberry
rasberry,1,rasberry
blueberry,1,blueberry
mulberry,2,mulberry 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-17T10:25:11.727

```
import csv
with open('input.csv','r') as csvinput:
    with open('output.csv', 'w') as csvoutput:
        writer = csv.writer(csvoutput)

        for row in csv.reader(csvinput):
            if row[0] == "Name":
                writer.writerow(row+["Berry"])
            else:
                writer.writerow(row+[row[0]]) 
```

也许这样的事情是你想要的？

此外，csv 代表逗号分隔值。所以，你有点需要逗号来分隔你的价值观，我认为：

```
Name,Code
blackberry,1
wineberry,2
rasberry,1
blueberry,1
mulberry,2 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-12T05:53:52.220

我使用了 pandas，它运行良好......当我使用它时，我必须打开一个文件并向其中添加一些随机列，然后只保存回同一个文件。

此代码添加了多个列条目，您可以根据需要进行编辑。

```
import pandas as pd

csv_input = pd.read_csv('testcase.csv')         #reading my csv file
csv_input['Phone1'] = csv_input['Name']         #this would also copy the cell value 
csv_input['Phone2'] = csv_input['Name']
csv_input['Phone3'] = csv_input['Name']
csv_input['Phone4'] = csv_input['Name']
csv_input['Phone5'] = csv_input['Name']
csv_input['Country'] = csv_input['Name']
csv_input['Website'] = csv_input['Name']
csv_input.to_csv('testcase.csv', index=False)   #this writes back to your file 
```

如果您希望该单元格值不被复制，那么首先在您的 csv 文件中手动创建一个空列，就像您将其命名为***Hours***一样 ，现在您可以在上面的代码中添加这一行，

```
csv_input['New Value'] = csv_input['Hours'] 
```

或者简单地说，我们可以，不添加手动列，我们可以

```
csv_input['New Value'] = ''    #simple and easy 
```

**我希望它有帮助。**

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-02-06T07:50:23.533

是的，这是一个老问题，但它可能对一些人有所帮助

```
import csv
import uuid

# read and write csv files
with open('in_file','r') as r_csvfile:
    with open('out_file','w',newline='') as w_csvfile:

        dict_reader = csv.DictReader(r_csvfile,delimiter='|')
        #add new column with existing
        fieldnames = dict_reader.fieldnames + ['ADDITIONAL_COLUMN']
        writer_csv = csv.DictWriter(w_csvfile,fieldnames,delimiter='|')
        writer_csv.writeheader()

        for row in dict_reader:
            row['ADDITIONAL_COLUMN'] = str(uuid.uuid4().int >> 64) [0:6]
            writer_csv.writerow(row) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-17T10:36:24.570

我看不到你在哪里添加新列，但试试这个：

```
 import csv
    i = 0
    Berry = open("newcolumn.csv","r").readlines()
    with open(input.csv,'r') as csvinput:
        with open(output.csv, 'w') as csvoutput:
            writer = csv.writer(csvoutput)
            for row in csv.reader(csvinput):
                writer.writerow(row+","+Berry[i])
                i++ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-19T04:36:08.693

此代码将满足您的要求，我已经在示例代码上进行了测试。

```
import csv

with open(in_path, 'r') as f_in, open(out_path, 'w') as f_out:
    csv_reader = csv.reader(f_in, delimiter=';')
    writer = csv.writer(f_out)

    for row in csv_reader:
    writer.writerow(row + [row[0]] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-09-02T18:49:09.443

如果文件很大，您可以使用允许读取每个块的数据集`pandas.read_csv`的参数：`chunksize`

```
import pandas as pd

INPUT_CSV = "input.csv"
OUTPUT_CSV = "output.csv"
CHUNKSIZE = 1_000 # Maximum number of rows in memory

header = True
mode = "w"
for chunk_df in pd.read_csv(INPUT_CSV, chunksize=CHUNKSIZE):
    chunk_df["Berry"] = chunk_df["Name"]
    # You apply any other transformation to the chunk
    # ...
    chunk_df.to_csv(OUTPUT_CSV, header=header, mode=mode)
    header = False # Do not save the header for the other chunks
    mode = "a" # 'a' stands for append mode, all the other chunks will be appended 
```

如果要就地更新文件，可以使用临时文件，最后擦除

```
import pandas as pd

INPUT_CSV = "input.csv"
TMP_CSV = "tmp.csv"
CHUNKSIZE = 1_000 # Maximum number of rows in memory

header = True
mode = "w"
for chunk_df in pd.read_csv(INPUT_CSV, chunksize=CHUNKSIZE):
    chunk_df["Berry"] = chunk_df["Name"]
    # You apply any other transformation to the chunk
    # ...
    chunk_df.to_csv(TMP_CSV, header=header, mode=mode)
    header = False # Do not save the header for the other chunks
    mode = "a" # 'a' stands for append mode, all the other chunks will be appended

os.replace(TMP_CSV, INPUT_CSV) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-24T11:31:51.553

**使用没有标题名称的python在现有csv文件中追加新列**

```
 default_text = 'Some Text'
# Open the input_file in read mode and output_file in write mode
    with open('problem-one-answer.csv', 'r') as read_obj, \
    open('output_1.csv', 'w', newline='') as write_obj:
# Create a csv.reader object from the input file object
    csv_reader = reader(read_obj)
# Create a csv.writer object from the output file object
    csv_writer = csv.writer(write_obj)
# Read each row of the input csv file as list
    for row in csv_reader:
# Append the default text in the row / list
        row.append(default_text)
# Add the updated row / list to the output file
        csv_writer.writerow(row) 
```

**谢谢**

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-05T20:59:47.863

对于向现有 CSV 文件（带有标题）添加新列，如果要添加的列具有足够少的值，这里有一个方便的功能（有点类似于 @joaquin 的解决方案）。该函数采用

1.  现有 CSV 文件名
2.  输出 CSV 文件名（将包含更新的内容）和
3.  带有标题名称和列值的列表

```
def add_col_to_csv(csvfile,fileout,new_list):
    with open(csvfile, 'r') as read_f, \
        open(fileout, 'w', newline='') as write_f:
        csv_reader = csv.reader(read_f)
        csv_writer = csv.writer(write_f)
        i = 0
        for row in csv_reader:
            row.append(new_list[i])
            csv_writer.writerow(row)
            i += 1 
```

例子：

```
new_list1 = ['test_hdr',4,4,5,5,9,9,9]
add_col_to_csv('exists.csv','new-output.csv',new_list1) 
```

现有的 CSV 文件： [![在此处输入图像描述](../Images/63f41a04a467a0cb8b094dcb7fc65db5.png)](https://i.stack.imgur.com/tPHd5.png)

输出（更新）CSV 文件： [![在此处输入图像描述](../Images/2368e2a3c1b3367da15044448535c581.png)](https://i.stack.imgur.com/iBxJ8.png)

# asp.net - GridView - 将最后添加的记录显示为首次显示

> ID：11070528
> 
> 赞同：0
> 
> 时间：2012-06-17T10:10:57.127
> 
> 标签：asp.net, database, gridview

就像在标题中一样。我得到了显示数据库中一些数据的 GridView 控件。我要做的就是让 GridView 显示行降序，我的意思是从最后添加到第一次添加。所以我从 GridView 看到的第一行是显示添加到数据库的最后一个项目，而不是首先添加的项目，就像处于默认状态一样。我希望你明白我的意思；）。

我很确定有一个属性，但我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:14:09.937

不知道用于反转 gridview 本身的任何属性，但您始终可以反转数据源；）如果您正在显示来自 db 的数据，请将其包含在您的 sql/linq 查询中。

# graph - 节点搜索的图遍历

> ID：11070536
> 
> 赞同：3
> 
> 时间：2012-06-17T10:11:48.160
> 
> 标签：graph, tree, graph-algorithm, tree-traversal

在下图中，递归遍历子部件。每个孩子都必须报告其直系父母。问题是 child[3] 必须在同一行中同时报告其直接父级（即 child[2] 和 child[4]）。

```
traverse(Node node)
{
    if(node == null)
        return;

    for(Node child : node.getChilds()) {
        traverse(child);
    }
}

Parent 
|---child[1]
|       child[2]
|           child[3]
|---child[4]
        child[3] 
```

现在我一次遍历一个节点，产生的输出是 -

```
Node      Immediate Parent
--------------------------
child[2]  child[1]
child[3]  child[2]
child[3]  child[4] 
```

预期的输出是 -

```
Node      Immediate Parent
--------------------------
child[2]  child[1]
child[3]  child[2], child[4] 
```

搜索节点并为图形生成预期输出的最佳方法是什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:31:14.520

如果您有（或可以添加）**返回到 parents 的链接**，您可以在第一次遇到节点时列出所有 parent，然后在重复访问时跳过它。您有多个选项来跟踪节点是否已被访问：

1.  维护一组访问节点并检查当前节点是否在集合中。如果不是，则对其进行处理并将其添加到集合中；否则跳过。

    *优点*：通用方法

    *缺点*：如果图表很大，可能需要大量内存来维护集合

2.  给节点添加`isVisited`成员值（`false`默认设置为），遇到节点时检查：如果值为`false`，则处理节点并设置`isVisited`为true；否则跳过。

    *优点*：更少的额外内存

    *缺点*：侵入性，特定于任务，即使在不需要时也存在额外变量，对于需要同时进行多个此类“已经处理过”决策的任务不能很好地扩展

如果 parent-link 选项不可用，您可以**在额外的 map 中维护 child-to-parent 关系**：您在处理节点时从 child 映射到 parent 集。完成初始处理（构建地图）后，您将迭代地图并列出每个节点及其父节点。

与直接父链接相比的*优势*在于，在构建/修改图形时无需额外维护（除非您也想保持映射最新）

*缺点*是，在对图的结构进行一系列修改后，每次要处理图时都必须重新构建图（除非 -- 见注释）

*注意*：如果图中存在有向（父到子）圆，则通过遍历所有子图来遍历一般图可能会导致无限循环。我想这不是您的问题的情况，而只是为了涵盖所有基础：您可以在处理图表时维护一组“已访问”节点。可用选项的讨论与第一个（“链接回父级”）部分中的相同

# mysql - ER 建模有哪些更好的实践？

> ID：11070537
> 
> 赞同：-2
> 
> 时间：2012-06-17T10:11:51.763
> 
> 标签：mysql, database-design

我正在开发一个基于 Twitter 的应用程序，为一家公司提供技术支持

所以，工作流程是这样的

1- Twitter 用户提及该公司。

2- 管理员收到通知。

3- 开始与客户一起使用 DM。

所以，我对最好的 ER 模型有点困惑。

为了获得数千条记录，我应该将推文和 DM 存储在同一个表中还是应该将它们分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:35:24.293

您的模型几乎没有实体，user_id 表示撰写推文的用户的 ID：

**基本结构**

```
Message (id, message, user_id, date etc)
User (id, name, employee_id?, etc) 
```

**提到的单个帐户**

然后你有一个事实，可能会发生提及，这是消息的一个属性，因此你可以为此添加一个列：如果你只想拥有一个帐户，则提到 BOOL。会给：

```
Message (id, message, user_id, date, BOOL mentioned, etc)
User (id, name, employee?, etc) 
```

**可以提及多个帐户**

另一种形式可能更灵活，添加一个表格帐户，允许存储您想要提及的帐户：

```
Account (id, name)
Message (id, message, user_id, date, INT account_mentioned, etc)
User (id, name, employee?, etc) 
```

这提供了更大的灵活性，因为您可以添加一个帐户并开始关注提及，例如，您可以通知该帐户的管理员，使您的解决方案更具未来性。

**如何与员工相处**

根据您的工作流程，您可以说：员工是处理一个或多个帐户的用户。您还可以声明一个帐户由多个用户管理，最后是多个用户管理多个帐户的情况。

本质上，我建议制作一个连接表：

```
Accounts_Users (account_id, user_id) 
```

例如，您甚至可以在该表中添加角色或优先级。这使您可以完全控制帐户。因为没有给出这部分的信息，所以我无法完全解释。

**存储 DM 和公共消息**

然后你有 DM 的问题，可以很容易地附加到 Message 实体：

```
Account (id, name)
Message (id, message, user_id, user_to_id (NULLABLE), date, INT account_mentioned_id, etc)
User (id, name, employee?, etc) 
```

因此，默认情况下，对于消息（推文），user_to_id 列为 NULL，但当它是 DM 时，您在此处添加接收者。这样你就可以找到它们。

为什么把它们都放在一张桌子上？它是具有相同属性的同一实体，它只有一个标志（私有）但本质上是相同的数据。

**数据量**

...在这个阶段完全无关紧要。本质上，您只需要正确的结构，因此首先对其进行规范化。如果你真的看到性能问题，那么看看如何去规范化一些步骤，但我不希望，对于单个公司的使用，你会遇到这种规范化结构的问题。

您只需要普通的简单连接即可获得所需的数据，并且由于它已标准化，您还可以轻松创建例如一个页面，显示与一个用户（客户端）的所有通信，因为您已标准化。使用此设置很容易获得该数据。

我们处理了数百万条推文，您可以正常化，真的没问题。数据不是很大，所以很多行并不昂贵。

**建议最终设置**

根据我现在掌握的信息，我会走这条路。

```
Account (id, name)
Accounts_Users (account_id, user_id)
Message (id, message, user_id, user_to_id (NULLABLE), date, account_mentioned_id, etc)
User (id, name, etc) 
```

# java - 在Java中下拉搜索窗口

> ID：11070542
> 
> 赞同：1
> 
> 时间：2012-06-17T10:13:13.027
> 
> 标签：java, database, swing, awt

我必须创建一个搜索窗口，例如谷歌浏览器窗口。它必须有一个包含类似结果的下拉列表，该列表是从数据库中填充的。

我正在尝试调整一个 JCombobox 但这给我带来了很多麻烦。有一个更好的方法吗？（也许Java中已经存在类似的东西。）如果没有，有人可以建议我如何实现我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:24:24.727

使用键盘事件创建 JTextField 以在键释放时显示弹出窗口，示例：

```
jTextField2.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyReleased(java.awt.event.KeyEvent evt) {
            showPopup(evt);
        }
    });
 void showPopup(java.awt.event.KeyEvent evt) {

       JPopupMenu popup = new JPopupMenu();
        popup.setLightWeightPopupEnabled(false);
        popup.setBorder(BorderFactory.createLineBorder(Color.black));
        popup.setLayout(new BorderLayout());
        popup.setSize(this.getPreferredSize());
        popup.setPreferredSize(this.getPreferredSize());
        popup.pack();
        popup.setOpaque(false);
        // create panel that contains the search result 
        popup.add(BorderLayout.CENTER, <YOUR PANEL WITH THE RESULT>);
        popup.setPreferredSize(new Dimension(jTextField2.getWidth(),250));
        <SEARCH PANEL>.setPreferredSize(new Dimension(jTextField2.getWidth(),250));
        popup.show(jTextField2, 0, jTextField2.getHeight());
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:00:35.143

> 我必须像谷歌浏览器窗口一样搜索窗口。它必须具有来自数据库的相似性结果的下拉列表。我试图调整 JCombobox 但这给我带来了很多麻烦。

也许不是真的，我会使用[AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)

# c# - 相机需要时间来完成 Windows phone 中的任务

> ID：11070548
> 
> 赞同：1
> 
> 时间：2012-06-17T10:14:35.987
> 
> 标签：c#, xaml, windows-phone-7.1

实际上，我使用相机加载 VideoBrush 以使用 Windows Phone 7.1 中的 PhotoCamera 选项拍摄对象的快照。

拍摄快照后，我将 e.ImageSteam 从 CaptureImageAvailable 事件设置为 ImageBrush 源。

拍摄快照后，调用 WindowsPhone 中的 CaptureImageAvailable 或 CaptureCompleted 事件需要时间。为什么会出现这种情况？

我需要写一些新的东西来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:47:08.173

对于**拍照和选择照片**，您只需按照此操作，

**MainPage.xaml：**

```
<Button Content="Take Photo" Height="72" HorizontalAlignment="Left" Margin="0,10,0,0" Click="btntakephoto_Click" Name="btntakephoto" VerticalAlignment="Top" Width="456" />
            <Image Height="431" HorizontalAlignment="Left" Margin="10,92,0,0" Name="imgphoto" Stretch="Fill" VerticalAlignment="Top" Width="440" />
            <Button Content="Choose Photo" Height="72" HorizontalAlignment="Left" Margin="0,529,0,0" Click="btnchoosephoto_Click" Name="btnchoosephoto" VerticalAlignment="Top" Width="450" /> 
```

**主页.cs**

```
namespace TakePicture
{
    public partial class MainPage : PhoneApplicationPage
    {
        CameraCaptureTask camera = new CameraCaptureTask();
        PhotoChooserTask choosephoto = new PhotoChooserTask();

        public MainPage()
        {
            InitializeComponent();
            camera.Completed += new EventHandler<PhotoResult>(task_Completed);
            choosephoto.Completed += new EventHandler<PhotoResult>(task_Completed);
        }

        private void btntakephoto_Click(object sender, RoutedEventArgs e)
        {
            camera.Show();
        }

        private void btnchoosephoto_Click(object sender, RoutedEventArgs e)
        {
            choosephoto.Show();
        }

        private string SaveImageToLocalStorage(WriteableBitmap image, string imageFileName)
        {

            if (image == null)
            {
                throw new ArgumentNullException("imageBytes");
            }
            try
            {
                var isoFile = IsolatedStorageFile.GetUserStoreForApplication();

                if (!isoFile.DirectoryExists("MyPhotos"))
                {
                    isoFile.CreateDirectory("MyPhotos");
                }

                string filePath = System.IO.Path.Combine("/" + "MyPhotos" + "/", imageFileName);
                using (var stream = isoFile.CreateFile(filePath))
                {
                     image.SaveJpeg(stream, image.PixelWidth, image.PixelHeight, 0, 80);
                }

                return new Uri(filePath, UriKind.Relative).ToString();
            }
            catch (Exception)
            {
                //TODO: log or do something else
                throw;
            }
        }

        void task_Completed(object sender, PhotoResult e)
        {
            if (e.ChosenPhoto != null)
            {
                if (e.TaskResult == TaskResult.OK)
                {
                    try
                    {
                       string imagePathOrContent = string.Empty;
                       WriteableBitmap image = PictureDecoder.DecodeJpeg(e.ChosenPhoto);
                       imgphoto.Source = image;
                       imagePathOrContent = this.SaveImageToLocalStorage(image, System.IO.Path.GetFileName(e.OriginalFileName));
                    }
                    catch (Exception)
                    {
                    }
                }
            }
        }
    }
} 
```

# objective-c - 如何准确测量时差xcode

> ID：11070549
> 
> 赞同：0
> 
> 时间：2012-06-17T10:14:51.863
> 
> 标签：objective-c, ios, time

我需要超级准确地测量 xcode 中的时间差。我对 Xcode 和 Objective C 还很陌生，但我不确定如何开始。

我需要测量通过扬声器播放声音和通过麦克风录制声音之间的时间差。

我不确定如何准确地测量时间，因为这将是很短的时间。

任何指示或帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:21:01.257

最精确的时钟可能是`mach_absolute_time`——返回设备上次启动后的滴答声。有关如何使用它并将其转换为更好的单元的示例，请参阅Apple 的[此问答。](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)

# algorithm - 使用递归顺序在 bst 中找到第 k 个最小的

> ID：11070553
> 
> 赞同：0
> 
> 时间：2012-06-17T10:15:29.737
> 
> 标签：algorithm, binary-search-tree, inorder

我试图在 BST 中找到第 k 个最小的。

```
public void findKthSmallest(BSTNode<T> node, int k) {
    if(node == null) 
        return;
    findKthSmallest(node.left, k);

    count++;
    if (k == count) {
        System.out.println("Kth smallest: " + node.data);
        return;
    }
    findKthSmallest(node.right, k);
} 
```

这里 count 是一个实例变量。我无法弄清楚如何在函数中使用 count 作为参数（局部变量）来实现它，因为它会在函数返回时重置。

任何想法？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:29:44.713

由于这是 Java 并且您没有通过引用传递，因此我认为最简单的方法是修改`findKthSmallest`以返回以`node`. 像这样的东西：

```
public int findKthSmallest(BSTNode<T> node, int k) {
    if(node == null) 
        return 0;
    int left = findKthSmallest(node.left, k);

    if (k == left + 1) {
        System.out.println("Kth smallest: " + node.data);
        return 1;
    }

    return 1 + left + findKthSmallest(node.right, k);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T22:19:40.437

我想对 IVlad 的方法做一个小的修正。当我们向左搜索时，问题是找到第 k 个最小的。但是，当向右搜索时，我们需要找到 k-left-1（丢弃左子树+当前节点）。在java中，除了创建一个类之外，我们不能返回多个值。所以通过传递一个数组作为参数来解决这个问题。这是代码：

```
public int kthSmallest(TreeNode node, int k, TreeNode kthNode[]) {
    int leftCount = 0;
    int rightCount = 0;
    if(node.left!=null) {
        leftCount = kthSmallest(node.left, k, kthNode);
    }
    if(leftCount==k-1) {
        kthNode[0] = node; // We can also return from here
    }
    if(node.right!=null) {
        rightCount = kthSmallest(node.right, k-leftCount-1, kthNode);
    }
    return leftCount + 1 + rightCount;
}

public TreeNode kthSmallest(TreeNode node, int k) {
    TreeNode kNode[] = new TreeNode[1];
    int nodeCount = kthSmallest(node, k, kNode);
    return kNode[0];
} 
```

# c# - 在图像中查找然后隐藏绘制的形状？

> ID：11070554
> 
> 赞同：1
> 
> 时间：2012-06-17T10:15:37.187
> 
> 标签：c#, image, c#-4.0

这似乎是一个奇怪的问题，但我有一组图片想用作淡入淡出的屏幕保护程序，并且我希望每张图片都有一个随附的报价，但是每个报价相对于图片将位于不同的位置.

与其为每个图像的区域编码 a ，不如`Rectangle`在图像中绘制一个矩形并将其绘制在其中会更容易。

现在，绘制的形状将是一个鲜明的、统一的彩色边框（例如石灰绿色），因为颜色不会出现在图片中，并且它会位于纯色背景上，例如黑色。

我的问题是：如果我在每个图像上绘制一个石灰绿色矩形，那么我怎么能使用 C# 在图像中找到那个矩形，获取它的尺寸，然后用背景颜色替换石灰绿色，所以最后产品，它看起来好像从一开始就没有形状？

我没有尝试任何东西，我没有要显示的代码，因为这是我的一个想法，虽然我确信它一定是可能的，但我什至不知道该开始搜索什么。

我希望这是可能的，如果不是，那么我将为每个人画一个矩形，但这是最后的手段。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:30:36.407

您是否考虑过使用[emgucv](http://www.emgu.com/wiki/index.php/Main_Page)或[aforge](http://www.aforgenet.com/)库？他们能够很容易地检测图像中的形状。尽管它们不能完美地检测边缘，但如果您只想检测一个矩形，那么任何一个都应该可以正常工作。

这里有两个关于[emgu cv](http://www.emgu.com/wiki/index.php/Shape_%28Triangle,_Rectangle,_Circle,_Line%29_Detection_in_CSharp)和[aforge](http://www.aforgenet.com/articles/shape_checker/)形状检测的教程。检测到形状后，您可以轻松地将其剪切为背景。例如，假设您使用了四边形的 aforge 检测（在链接中），那么您可以通过调用轻松获取矩形的位置和大小，`blobs[i].Rectangle;`并创建一个大小和位置与图片背景颜色相同的矩形。

如果您需要更多说明，请随时发表评论。好主意！

# heroku - Heroku 裸域和谷歌索引？

> ID：11070555
> 
> 赞同：0
> 
> 时间：2012-06-17T10:15:47.330
> 
> 标签：heroku, seo

我设置了一个域 (www.wozzoncornwall.co.uk)，并遵循 Heroku 的建议，不要使用裸域。我注意到该站点似乎需要很长时间才能被 google 索引......我不是在谈论关键字，只是搜索站点名称或域。我之前有一个保留页面长达 3-4 个月，并且已编入索引，但是，我注意到当我将应用程序移至 Heroku 时，这是单击没有 www 的 URL，因此找不到返回站点。这甚至不再在索引中，由于“找不到站点”，谷歌显然放弃了它，但我担心这会对被索引的正确站点产生影响。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:15:17.877

我建议您使用 rack-rewrite（假设 Ruby 应用程序）将您的裸域重定向到 www（使用真正的 301 重定向） - 但发布/宣传 www 条目。您需要将裸域添加到您的应用程序域和 IP 地址 - 这对于简单的重定向是可以接受的。

这应该将链接汁从无 www 转移到 www。如果您使用 Google 网站管理员工具，您可以进入设置并更新地址更改。

# sql - SPARQL中的字符串匹配？

> ID：11070558
> 
> 赞同：14
> 
> 时间：2012-06-17T10:16:16.080
> 
> 标签：sql, sparql, semantic-web

在 ANSI SQL 中，您可以编写如下内容：

```
Select * From DBTable Where DBTable.Description LIKE "MEET" 
```

或者

```
Select * From DBTable Where DBTable.Description LIKE "%MEET%" 
```

我需要帮助的是编写与上述等效的 SPARQL。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-17T10:45:19.547

使用*正则表达式过滤器*。[你可以在这里](http://jena.apache.org/tutorials/sparql_filters.html)找到一个简短的教程

这是它的样子：

```
PREFIX ns: <http://example.com/namespace>

SELECT ?x
WHERE
{ ?x ns:SomePredicate ?y .
  FILTER regex(?y, "YOUR_REGEX", "i") } 
```

`YOUR_REGEX`必须是[XQuery 正则表达式语言的表达式](http://www.w3.org/TR/xpath-functions/#regex-syntax)

`i`是一个可选[标志](http://www.w3.org/TR/xpath-functions/#flags)。这意味着匹配不区分大小写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T19:37:43.113

如果您有要匹配的固定字符串，您可以直接在图形模式中使用它，例如

```
PREFIX ns: <http://example.com/namespace>

SELECT ?x
WHERE
{ ?x ns:SomePredicate "YourString" } 
```

请注意，这并不总是有效，因为模式匹配基于 RDF 术语相等，这意味着`"YourString"`不被视为与所说相同的术语，`"YourString"@en`所以如果这可能是一个问题，请使用`REGEX`Tom 建议的方法

一些 SPARQL 引擎还提供全文搜索扩展，允许您将 Lucene 样式查询集成到您的 SPARQL 查询中，这可能更适合您的用例，并且几乎可以肯定对于通用搜索更有效，否则需要`REGEX`

# jquery - 在 grails 从 1.3.4 升级到 2.0.3 后，将数据呈现为 JSON 不起作用

> ID：11070562
> 
> 赞同：0
> 
> 时间：2012-06-17T10:16:42.187
> 
> 标签：jquery, ajax, json, grails, render

我在我的项目中使用 grails 1.3.4，一切正常，直到我决定将我的项目迁移到 grails 2.0.3。

对于我通过 javascript 通过 gsp 页面进行的每个 AJAX 调用，呈现为 JSON 方法对我来说都很好。但现在它不起作用。我用于通话的代码是：

我的 GSP 页面中的 Javascript：

```
var url = "${createLink(controller:'user',action:'someAction')}";
$.get(url,function(data){
   if (data.results != "") {
     alert(data.results);
   }
}); 
```

我的控制器中的代码：

```
import grails.converters.JSON

....
....

def someAction = {
    def data = [results:"Ajax call working"]
    render data as JSON
} 
```

上面的代码在 grails 1.3.4 中非常适合我，但现在我收到以下错误

```
No signature of method: grails.converters.JSON.render() is applicable 
for argument types: (com.xxxx.yyy.UserController$_closure36) 
values: [com.xxxx.yyy.UserController$_closure36@168d2e7]
Possible solutions: render(java.io.Writer), 
render(javax.servlet.http.HttpServletResponse),
every(), find(), find(groovy.lang.Closure), 
every(groovy.lang.Closure). 
```

我真的被困住了，不知道该怎么办。有什么我想念的吗。

我也在使用 Groovy 版本：1.8.6 和 JVM：1.6.0_26

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T12:54:09.687

试试这个模式：

```
def someAction = {
    def data = [results:"Ajax call working"]

    render(contentType:'text/json'){
       data
    }
} 
```

# php - 功能测试问题

> ID：11070563
> 
> 赞同：1
> 
> 时间：2012-06-17T10:16:48.000
> 
> 标签：php, symfony-1.4

我为我的项目编写了如下功能测试。

```
<?php

include(dirname(__FILE__).'/../../bootstrap/functional.php');

    $baseFolder = '/root/nsuhr/apps/backend/modules';
    //$browser = new sfTestFunctional(new sfBrowser());
    $methodArray = SecurityTest::getRoutes();
    $actionVar = new securityReport();
foreach ($methodArray as $module)
{

 $username='012001011';                                                                      $credential = 'financeAdmin';
$password='123';                                                                                  
$f = $baseFolder . DIRECTORY_SEPARATOR . trim($module['module']) . DIRECTORY_SEPARATOR . 'actions';
$actionArray = $actionVar->parseActionFile($f . DIRECTORY_SEPARATOR . 'actions.class.php');
$module = trim($module['module']);

foreach ($actionArray as $action)
{
// if(trim($action) == 'custom' )
//    throw new exception(' custommmmm ') ;
    $browser = new sfTestFunctional(new sfBrowser());

              $browser->
                post('/sfGuardAuth/signin', array('signin' => array('username' =>        $username, 'password' => $password)))->
                with('form')->begin()->
                hasErrors(false)->
                end()->  

              get($module.'/'.$action)->

              with('request')->begin()->
                isParameter('module', $module)->
                isParameter('action', $action)->
              end()->

              with('user')->begin()->                                                                            
                isAuthenticated(true)->                                                                          
                hasCredential(array($credential))->                                                      
              end()->

              with('response')->begin()->
                isStatusCode(200)->
                checkElement('body', '!/This is a temporary page/')->
              end();
}

} 
```

运行测试后，我收到以下错误：

```
# get FacultyPosition/new
ok 100 - request parameter module is FacultyPosition
ok 101 - request parameter action is new
ok 102 - user is authenticated
ok 103 - user has the right credentials
ok 104 - status code is 200
ok 105 - response selector body does not match regex /This is a temporary page/

# post /sfGuardAuth/signin
ok 106 - the submitted form is valid.

# get FacultyPosition/edit

PHP Fatal error:  Call to undefined method sfRoute::getObject() in     /root/nsuhr/apps/backend/modules/FacultyPosition/actions/actions.class.php on line 83

Fatal error: Call to undefined method sfRoute::getObject() in /root/nsuhr/apps/backend/modules/FacultyPosition/actions/actions.class.php on line 83 
```

我发现对于这些`facultyPosition`方法的编辑操作需要输入。出于这个原因，它给了我这个错误。

现在我想找到需要输入的不同方法的所有操作。我怎样才能做到这一点？请帮我。

actions.class.php 的代码是：

```
public function executeEdit(sfWebRequest $request)
  {
    $this->faculty_position = $this->getRoute()->getObject();

    $this->employee_id = $this->faculty_position->getEmployeeId();
    $this->employeeType = Employee::getEmployeeTypeByEmployeeId($this->employee_id) ;

    $this->form = $this->configuration->getForm($this->faculty_position);

    $this->organoNode = $this->faculty_position->getOrganoNode () ; 
    //throw new Exception($this->organoNode->getType()."".$this->organoNode->getId());
    $this->form->setDefault('organo_node_type',$this->organoNode->getType());

    $this->form->setDefault('organo_node_id',$this->organoNode->getId());

    $this->positionNode = $this->faculty_position->getPositionNode() ;
    $this->form->setDefault('organo_position_id',$this->positionNode->getId());

    $this->empId = $this->getUser()->getAttribute('employee_id')

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:41:03.297

功能测试调用需要在请求中传递`$module/edit`一个参数。`$id`

没有`$module/$id/edit`可以获取的路由对象。

您可以通过获取`$id`参数来修复此测试，如下所示：

```
$id = $objectQuery::create()->select('id')->findOne(); 
```

然后从您的编辑操作中获取`$actionArray`并使用包含 的杰出调用来处理它`$id`，如下所示：

```
get("$module/$id/$action")-> 
```

# c# - 为什么我的 ListViewItem 不能在 c# 类 ListView 中编辑

> ID：11070564
> 
> 赞同：0
> 
> 时间：2012-06-17T10:16:52.380
> 
> 标签：c#, listview

我试图在 MSDN 上找到答案，但失败了。

这是我的代码：

```
 ListView listView1 = new ListView();
        listView1.Bounds = new Rectangle(new Point(10, 10), new Size(300, 200));

        listView1.View = View.Details;
        listView1.LabelEdit = true; //set here
        listView1.AllowColumnReorder = true;
        listView1.CheckBoxes = true;
        listView1.FullRowSelect = true;
        listView1.GridLines = true; // show as grid
        listView1.Sorting = SortOrder.Ascending; 
```

这只能让我编辑列表视图的第一列。因为只有第一列是每个列表视图项的标签。

我想做的是编辑每个网格（列表视图项）。有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:40:41.357

试试看：

```
ListView listView1 = new ListView();
listView1.View = View.Details;
listView1.LabelEdit = true;
listView1.Columns.Add("Item Column", -2, HorizontalAlignment.Left);
listView1.Columns.Add("Column 2", -2, HorizontalAlignment.Left);
listView1.Items.AddRange(new ListViewItem[]{"",""});
listView1.Items.AddRange(new ListViewItem[]{"",""});
.
. (how many items you want to edit) 
```

# c - 如何释放另一个结构内的结构

> ID：11070565
> 
> 赞同：0
> 
> 时间：2012-06-17T10:17:11.837
> 
> 标签：c, struct, malloc, free

我有以下两个结构：

```
typedef struct label{

    int id;
    double p,*t,q,c;

    int V[45];
    struct label *next;
    struct label *prev;
    struct path *tail;
    struct path *head;

}label;

typedef struct path{
    int i;

    struct path *Pperv;
    struct path *Pnext;
}path;

void main (){

    int i,j;
    struct label *Current,*Head,*Tail;
    struct path *test1,*path_head,*path_tail;

    Head=(struct label*)malloc(1*sizeof(struct label));
    Tail=(struct label*)malloc(1*sizeof(struct label));

    Head->next=Tail;
    Tail->prev=Head;

    for (i=0;i<250000;i++)
    {
        Current=(struct label*)malloc(1*sizeof(struct label));
        Current->t=(double*)malloc(15*sizeof(double));

        Current->head=(struct path*)malloc(1*sizeof(struct path));
        Current->tail=(struct path*)malloc(1*sizeof(struct path));
        Current->head->Pnext=Current->tail;
        Current->tail->Pperv=Current->head;

        for (j=0;j<15;j++)
        {
            test1=(struct path*)malloc(1*sizeof(struct path));

            test1->Pperv=Current->head;
            test1->Pnext=Current->head->Pnext;

            Current->head->Pnext->Pperv=test1;
            Current->head->Pnext=test1;

            test1->i=1;
            Current->t[j]=23123.4323334;

        }
        Current->next=Tail;
        Current->prev=Tail->prev;
        Tail->prev->next=Current;
        Tail->prev=Current;
        Current->p=54545.323241321;
    }
} 
```

我只是使用了一个示例来填充其中的一些变量，以便我提出问题。我面临的问题是如何释放包含在第一个名为“Label”的结构中的结构“Path”。

如果有人能给我如何正确释放 C 中的两个结构的代码，我会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:04:21.043

通常，您只需要对`malloc`/的调用保持对称即可`calloc`：

```
label *current = malloc(sizeof(*current));
current->head = malloc(sizeof(*current->head));

...

free(current->head);
free(current); 
```

# c# - 如果程序到达块的末尾，将反对 Dispose

> ID：11070571
> 
> 赞同：0
> 
> 时间：2012-06-17T10:18:57.287
> 
> 标签：c#, .net, c#-4.0

请考虑以下代码：

```
1-...
2-{
  3-...
  4-SqlConnection cn=new SqlConnection();
  5-... 
6-} 
```

如果程序达到第 6 条语句会`cn`处理？如果不是`cn`变量发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T10:21:06.247

> 如果程序达到第 6 条语句，cn 会处理吗？

不。

> 如果不是 cn 变量发生了什么？

这取决于你以后是否使用它。如果您不使用它并且它超出范围，这意味着它有资格进行垃圾收集。当这种垃圾收集发生时，您无法控制。但是当它发生时，将调用析构函数，它本身调用该`Dispose`方法。

话虽这么说，正确的方法是始终将`IDisposable`资源包装在`using`语句中。这确保了 Dispose 方法将始终被调用，即使抛出异常：

```
2-{
  3-...
  4-using (SqlConnection cn=new SqlConnection())
    {
        ...
    }
    5-... 
6-} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:21:43.487

不，当 GarbageCollector 决定销毁它时，它将被处置。

如果你想处理它，那么使用`using`语句（as `SqlConnection`implements `IDisposeable`）：

```
using(SqlConnection cn = new SqlConnection())
{
    // code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T10:29:32.783

不，当变量超出范围时，不会释放对象。

当不再使用对象时（在范围内的某个地方，在使用变量的最后一行之后），该对象就可以进行垃圾回收了。

下次垃圾回收器运行的时候，会发现对象已经没有被使用了，但是它也会发现它有`Finalize`方法，并且没有被disdispose，所以会将该对象加入finaliser队列中。此外，由于对象没有被收集，它可能会被移动到下一个堆代，这实际上涉及*将*对象从内存中的一个位置移动到另一个位置。

垃圾收集器有一个特殊的线程来终结终结器队列中的对象，最终终结对象。对象的方法`Finalize`会调用该`Dispose`方法，从而关闭数据库连接。

对象被释放后，最终会被垃圾收集器收集。

请注意，无法保证对象将在任何特定时间内完成，甚至根本无法*完成*。

因此，如果您不处置连接对象，则发生的两件主要事情是：

*   您无法控制连接何时关闭（如果有的话）。
*   完成一个对象比直接调用 Dispose 的过程要昂贵得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T10:22:13.143

您应该使用 Using 语句，但结果将是相同的，它不会被丢弃，它将被标记为一次性，并且 GC 将在下次运行时收集它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T12:15:15.333

没有克雷佐，

```
1-... 
2-{ 
  3-... 
  4-SqlConnection cn=new SqlConnection(); 
  5-...  
6-} 
```

我们编译器到达 Statement cn 对象并没有被破坏。您无法在循环外访问“cn”对象。

如果您使用 Using 块，那么该对象将被自动处理。

# python - 自动导入或其他使用自定义函数的无代码方式

> ID：11070573
> 
> 赞同：0
> 
> 时间：2012-06-17T10:19:43.437
> 
> 标签：python, function, methods

我在做 python 的时候写了一个奇怪的方便的函数。（列表中的一些方法，一些更有用的输入函数等。）

我想要的是能够从 python 文件中访问这些函数，而不必通过`import my_module`.

我认为它会发生的方式是自动导入一个模块，或者将这些函数放在另一个默认的 python 模块中，但我并不介意它是如何完成的。

谁能阐明我应该如何做到这一点？

（我知道`import my_module`不是很多，但你最终可能会得到

```
sys.path.append("c:\fake\path")
from my_module import * 
```

越来越长了……）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T10:46:46.957

[`site`](http://docs.python.org/library/site.html)每当运行 python 解释器时，都会自动导入python 模块。此模块尝试导入另一个名为`sitecustomize`. 你可以把你的函数放在那里，将它们添加到[`__builtins__`映射](http://docs.python.org/library/__builtin__.html)中：

```
for func in [foo, bar, baz]:
    __builtins__[func.__name__] = func 
```

请注意，这仅适用于 cpython，其中`__builtins__`是可变字典。这样做将自动使这些功能可用于此安装的所有 python 代码。

**我*强烈*建议您不要这样做！**隐式永远比不上显式，任何维护您的代码的人都会想知道这些*到底*是从哪里来的。

`from myglobalutils import *`在模块中导入会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:44:51.947

看`import this`（它在几行中说了很多）。您可以`import`导入其他模块，例如：

```
import my.main # where main.py contains `import X, Y, Z`

# X, Y, and Z access:
my.main.X
my.main.Y
my.main.Z 
```

# r - 如何从 R 中的 z 分数数组创建列表？

> ID：11070574
> 
> 赞同：1
> 
> 时间：2012-06-16T21:03:52.887
> 
> 标签：r

我有一个 z 分数数组，其结构类似于 num [1:27, 1:11, 1:467]，因此有 467 个条目，有 27 行和 11 列。有没有办法可以从这个数组中列出一个列表？例如，包含大于 2.0 的 z 分数的条目列表（不仅仅是 z 分数列表，一个标识哪些 1:467 条目的 z > 2 的列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:31:08.380

假设您的数组`z`在您的 R 会话中被调用。您要查找的函数`which`的参数`arr.ind`设置为`TRUE`.

```
m <- which(z > 2, arr.ind=TRUE) 
```

这将为您提供一个选择矩阵，*即*一个包含三列的矩阵，每行对应一个 Z 分数大于 2 的条目。要知道 Z 分数大于 2 的数量，您可以这样做

```
nrow(m)
# Note that 'sum(z > 2)' is easier. 
```

并获取值

```
z[m]
# Note that 'z[z > 2]' is easier 
```

# reporting-services - 更改报告中的 tablix 宽度

> ID：11070577
> 
> 赞同：3
> 
> 时间：2012-06-17T10:19:56.273
> 
> 标签：reporting-services, ssrs-tablix

在 MS Reports 中，我需要隐藏 tablix 中的列，但我需要保持 tablix 宽度不变。默认情况下，如果我隐藏 tablix 中的列，它会自动减小宽度。

当我隐藏列时，我还需要增加一些其他列的宽度。

我将在这里添加一些屏幕截图。

这是原始报告。 ![在此处输入图像描述](../Images/a091ca73656ce1ca850f1ac9152803cd.png)

所以我需要隐藏所有值为零的列。所以我做到了，我得到了结果 ![在此处输入图像描述](../Images/4852589207e6286cf727967ad15fb5ad.png)

所以现在我想通过添加“Design NO”列（2nd Column）的空间（增加宽度）来保持原始报告中的 tablix 宽度。

请帮助我，谢谢..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:19:49.060

保持 tablix 宽度的唯一方法是让某些东西占据空间。我建议使用条件格式来使用白色字体。如果您没有该单元格的数据，请使用一个表达式来检查通常存在的字段是否为空并返回一个常量值，该值可为您提供所需的宽度。如果您需要增加其他列的宽度，您将不得不添加嵌入式空格或其他东西。列的动态大小取决于是否有东西占据了空间，即使它是空格或白色文本。

# php - 如何启用查询缓存 yii 框架

> ID：11070589
> 
> 赞同：2
> 
> 时间：2012-06-17T10:22:15.090
> 
> 标签：php, caching, yii

> **可能重复：**
> [查询缓存 yii 框架](https://stackoverflow.com/questions/11056459/query-caching-yii-framework)

我正在使用查询缓存。

在我刚刚添加的组件下的配置文件中

```
 'cache' => array(
            'class' => 'CDbCache'
        ), 
```

但我认为这还不够，因为我已经检查过每次都从数据库而不是从缓存中获取结果。

所以我想我必须检查我的配置。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:22:44.080

你确定缓存不起作用？即使缓存在后台运行，Yii 仍将继续在日志中显示相同的数据库查询。那次旅行我了。

仔细检查的唯一方法是确保您的缓存持续很长时间，然后更改数据。

# objective-c - KVC——关于数据类型

> ID：11070590
> 
> 赞同：0
> 
> 时间：2012-06-17T10:22:24.437
> 
> 标签：objective-c, ios

这是代码：

```
NSNumber *taskId = [[self.taskList objectAtIndex:indexPath.row] valueForKey:@"identity"];    
NSInteger *intTaskId = [[self.taskList objectAtIndex:indexPath.row] valueForKey:@"identity"]; 
```

`self.taskList`是在 ViewController 的方法`NSArray`中填充核心数据获取请求的一个。is: 1 is: 269303816 实际上，core data中存储的值是 ： 1`viewDidLoad`
`taskId`
`intTaskId`

下面是我的问题：
1、我很困惑为什么`NSInteger`不正确？
2，我是否必须更换`NSInteger`以`NSNumber`避免任何其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:25:43.313

`NSNumber`是一个对象，而`NSInteger`只是`typedef`一个原始（非对象）类型（如`int`）。`NSInteger`不是*的*子类`NSNumber`。Core Data 返回数字作为`NSNumber`. 你得到了奇怪的`NSInteger`值，因为它指向一个类型的对象，`NSNumber`但试图打印它，就好像它只是一个整数一样。

您需要替换`NSInteger`为`NSNumber`以避免任何问题。您还可以使用`intValue`on 方法`NSNumber`取回`NSInteger`：

```
NSNumber *objTaskId = [[self.taskList objectAtIndex:indexPath.row] valueForKey:@"identity"];
NSInteger *intTaskId = [objTaskId intValue]; 
```

如果您想进行比较（大于、等于、小于）或算术（您不能将 an 添加`NSNumber`到另一个`NSNumber`或 an`NSNumber`到原始类型，如`int`or `float`），则需要执行此操作。

# php - 使用 exec 进行高效的 PHP 编程

> ID：11070591
> 
> 赞同：0
> 
> 时间：2012-06-17T10:22:29.283
> 
> 标签：php, linux, design-patterns, shell

我在 Linux 下编写了一个 PHP 脚本程序。在脚本中，我需要使用 exec 调用许多其他系统工具/程序来实现某些目标。我知道每当我在终端中运行 shell 脚本时，都会创建一个新的子进程并与父进程一起运行。如果我在我的 PHP 脚本中使用了太多 exec 并且应该有很多进程来回运行，我认为这将是低效的，因为进程是重量级的。

这是我的问题：在 Linux 中实现编程目标的有效方法和常见模式是什么？PHP 在这种情况下会很理想吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:29:03.583

甚至使用的开销`exec`也不仅仅是一个标准的 PHP 函数调用，我根本不会认为它很昂贵。这是一种非常有效的做事方式，当您牢记安全考虑时，我会说它没有任何问题。

您可能会问，过早的优化是否值得麻烦？那时我会说不。

# c - 在 Perl 程序中嵌入模块

> ID：11070596
> 
> 赞同：2
> 
> 时间：2012-06-17T10:24:03.953
> 
> 标签：c, perl, module

我正在开发一个简单的工具，它将用于各种平台（主要是 Solaris、Linux 和 HP-UX）。该工具依赖于模块[Proc::ProcessTable](http://search.cpan.org/~durist/Proc-ProcessTable-0.45/ProcessTable.pm)但是我想避免必须在将要使用的所有系统上构建/安装该模块。

相反，我想将 Proc::ProcessTable 代码“嵌入”到我的工具中。我正在寻求的结果是拥有一个可以在所有系统中工作的文件，而无需单独安装模块。

这可能吗？嵌入一​​个仅 Perl 的模块将是微不足道的，但这个模块编译一些特定于操作系统的 C 代码。假设我可以在我需要的每个操作系统上编译该代码，我将如何在我的 Perl 脚本中包含该预编译的 C 代码以使嵌入式模块工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:17:23.820

> 我想避免必须在将要使用的所有系统上构建/安装模块

设置本地构建系统/农场，并为目标操作系统[生成软件包（例如 RPM）。](http://act.yapc.eu/ye2012/talk/4065)一个先决条件是您[将您的工具变成 CPAN 就绪的发行版](https://stackoverflow.com/questions/2605545/how-to-check-availability-of-perl-its-version-and-presence-of-a-required-module/2606677#2606677)，并[标记`Proc::ProcessTable`为运行时依赖项](http://p3rl.org/CPAN::Meta::Spec#prereqs1)。

# d - 如何从 char[] 中删除元素？

> ID：11070599
> 
> 赞同：2
> 
> 时间：2012-06-17T10:24:42.650
> 
> 标签：d

我有一个`char[]`字符。我想删除空格。我的做法：

```
import std.algorithm;
import std.ascii;
// ...
digits = remove!"isWhite(digits)"(digits); 
```

但这不起作用：

```
c:\dmd2\windows\bin\..\..\src\phobos\std\functional.d(70): Error: static assert  "Bad unary function: isWhite(digits) for type dchar" 
```

如何从 a 中删除所有空格`char[]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T10:43:57.303

```
import std.algorithm;
import std.stdio;
import std.uni;
import std.array;

void main() {

    char[] s = "12 abc fg ".dup;

    writeln(array(s.filter!(x => !x.isWhite)));
} 
```

[`array`](http://dlang.org/phobos/std_array.html#array)需要摆脱`Result`-returntype 的`filter`. 但是，如果您想使用`Ranges`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T15:35:07.427

更经济的版本（不进行内存分配）是像这样使用 std.algorithm.remove （未经测试）：

```
s = remove!isWhite(s); 
```

您最初使用 remove 的尝试对整个字符串使用了 lambda，但它只需要一个字符对应一个字符。

# java - 使用 PKCS#7 加密

> ID：11070601
> 
> 赞同：0
> 
> 时间：2012-06-17T10:24:57.650
> 
> 标签：java, cryptography, keystore, public-key-encryption, pkcs#7

我正在使用 Bouncy Castle 提供的库来加密、解密、签名和验证签名。我这样做是
1\. 加密数据
2\. 签名数据
3\. 将签名字节写入文件
4\. 从文件中读取签名字节
5\. 验证签名
6\. 解密数据

我参考了*用 Java 开始密码学*

当我验证我得到的数据时，我的问题出在第 5 步

> org.bouncycastle.cms.CMSException：消息摘要属性值与计算值不匹配

我的代码如下

```
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.math.BigInteger;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.KeyStore;
import java.security.PrivateKey;
import java.security.PublicKey;
import java.security.SecureRandom;
import java.security.cert.CertPathBuilder;
import java.security.cert.CertStore;
import java.security.cert.Certificate;
import java.security.cert.CollectionCertStoreParameters;
import java.security.cert.PKIXBuilderParameters;
import java.security.cert.PKIXCertPathBuilderResult;
import java.security.cert.TrustAnchor;
import java.security.cert.X509CertSelector;
import java.security.cert.X509Certificate;
import java.util.Arrays;
import java.util.Collections;
import java.util.Date;
import java.util.Iterator;

import javax.security.auth.x500.X500Principal;
import javax.security.auth.x500.X500PrivateCredential;

import org.bouncycastle.asn1.x509.BasicConstraints;
import org.bouncycastle.asn1.x509.KeyUsage;
import org.bouncycastle.asn1.x509.X509Extensions;
import org.bouncycastle.cms.CMSEnvelopedData;
import org.bouncycastle.cms.CMSEnvelopedDataGenerator;
import org.bouncycastle.cms.CMSEnvelopedDataParser;
import org.bouncycastle.cms.CMSProcessable;
import org.bouncycastle.cms.CMSProcessableByteArray;
import org.bouncycastle.cms.CMSSignedData;
import org.bouncycastle.cms.CMSSignedDataGenerator;
import org.bouncycastle.cms.RecipientId;
import org.bouncycastle.cms.RecipientInformation;
import org.bouncycastle.cms.RecipientInformationStore;
import org.bouncycastle.cms.SignerId;
import org.bouncycastle.cms.SignerInformation;
import org.bouncycastle.cms.SignerInformationStore;
import org.bouncycastle.x509.X509V1CertificateGenerator;
import org.bouncycastle.x509.X509V3CertificateGenerator;
import org.bouncycastle.x509.extension.AuthorityKeyIdentifierStructure;
import org.bouncycastle.x509.extension.SubjectKeyIdentifierStructure;

public class Test {

    private static final char[] KEY_STORE_PASSWORD = "123456".toCharArray();
    private static final long VALIDITY_PERIOD = 365 * 24 * 60 * 60 * 1000;
    private static final char[] KEY_PASSWORD = "keyPassword".toCharArray();
    public static String ROOT_ALIAS = "root";
    public static String INTERMEDIATE_ALIAS = "intermediate";
    public static String END_ENTITY_ALIAS = "end";
    public static String PLAIN_TEXT = "Hello World!123";

    public static void main(String[] args)  {
        try{

        // CREATE KEY STORE
        KeyStore keyStore = createKeyStore();

        // STEP 1\. ENCRYPT AND SIGN
        byte[] step1Data = encryptData(keyStore, PLAIN_TEXT.getBytes());
        CMSSignedData cmsSignedData = signData(keyStore,step1Data);
        new File("D:\\pkcs7\\encrypted-file.p7b");
        FileOutputStream fileOuputStream = new FileOutputStream("D:\\pkcs7\\encrypted-file.p7b"); 
        fileOuputStream.write(cmsSignedData.getEncoded());
        fileOuputStream.flush();
        fileOuputStream.close();

        // STEP 2\. READ ENCRYPTED DATA AND VERIFY SIGN AND DECRYPT IT
        File file =new File("D:\\pkcs7\\encrypted-file.p7b");
        FileInputStream fileInputStream = new FileInputStream(file);
        byte[] encryptedAndSignedByte = new byte[(int)file.length()];
        fileInputStream.read(encryptedAndSignedByte );
        fileInputStream.close();
        cmsSignedData =  new CMSSignedData(encryptedAndSignedByte);
        if( verifyData(keyStore, cmsSignedData) == true ){
            decryptData(keyStore,encryptedAndSignedByte);
        }

        }catch (Exception e) {
            e.printStackTrace();
        }

    }

    /**
     * 
     * This method will encrypt data
     */
    private static byte[] encryptData(KeyStore keyStore, byte[] plainData) throws Exception {
        PrivateKey key = (PrivateKey) keyStore.getKey(END_ENTITY_ALIAS,
                KEY_PASSWORD);
        Certificate[] chain = keyStore.getCertificateChain(END_ENTITY_ALIAS);
        X509Certificate cert = (X509Certificate) chain[0];

        // set up the generator
        CMSEnvelopedDataGenerator gen = new CMSEnvelopedDataGenerator();

        gen.addKeyTransRecipient(cert);

        // create the enveloped-data object
        CMSProcessable data = new CMSProcessableByteArray(plainData);

        CMSEnvelopedData enveloped = gen.generate(data,
                CMSEnvelopedDataGenerator.AES128_CBC, "BC");

        return  enveloped.getEncoded();
        // recreate

    }

    private static byte[] decryptData(KeyStore keyStore,byte[] encryptedData) throws Exception{
        CMSEnvelopedDataParser envelopedDataParser = new CMSEnvelopedDataParser(new ByteArrayInputStream(encryptedData));

        PrivateKey key = (PrivateKey) keyStore.getKey(END_ENTITY_ALIAS,KEY_PASSWORD);
        Certificate[] chain = keyStore.getCertificateChain(END_ENTITY_ALIAS);
        X509Certificate cert = (X509Certificate) chain[0];

        CMSEnvelopedData enveloped = new CMSEnvelopedData(encryptedData);

        // look for our recipient identifier
        RecipientId recId = new RecipientId();

        recId.setSerialNumber(cert.getSerialNumber());
        recId.setIssuer(cert.getIssuerX500Principal().getEncoded());

        RecipientInformationStore recipients = enveloped.getRecipientInfos();
        RecipientInformation recipient = recipients.get(recId);

        if (recipient != null) {
            // decrypt the data
            byte[] recData = recipient.getContent(key, "BC");
            System.out.println("----------------------- RECOVERED DATA -----------------------");
            System.out.println(new String(recData));
            System.out.println("--------------------------------------------------------------");
            return recData;

        } else {
            System.out.println("could not find a matching recipient");
        }
        return null;
    }

    private static CMSSignedData signData(KeyStore keyStore,byte[] encryptedData ) throws Exception {
        // GET THE PRIVATE KEY
        PrivateKey key = (PrivateKey) keyStore.getKey(END_ENTITY_ALIAS,
                KEY_PASSWORD);

        Certificate[] chain = keyStore.getCertificateChain(END_ENTITY_ALIAS);
        CertStore certsAndCRLs = CertStore.getInstance("Collection",
                new CollectionCertStoreParameters(Arrays.asList(chain)), "BC");
        X509Certificate cert = (X509Certificate) chain[0];

        // set up the generator
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();
        gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA224);
        gen.addCertificatesAndCRLs(certsAndCRLs);

        // create the signed-data object
        CMSProcessable data = new CMSProcessableByteArray(encryptedData);
        CMSSignedData signed = gen.generate(data, "BC");

        // recreate
        signed = new CMSSignedData(data, signed.getEncoded());
        // ContentInfo conInf = signed.getContentInfo();
        // CMSProcessable sigContent = signed.getSignedContent();
        return signed;
    }

    private static boolean verifyData(KeyStore keyStore, CMSSignedData signed)
            throws Exception {
        // verification step
        X509Certificate rootCert = (X509Certificate) keyStore.getCertificate(ROOT_ALIAS);

        if (isValidSignature(signed, rootCert)) {
            System.out.println("verification succeeded");
            return true;
        } else {
            System.out.println("verification failed");
        }
        return false;
    }

    /**
     * Take a CMS SignedData message and a trust anchor and determine if the
     * message is signed with a valid signature from a end entity entity
     * certificate recognized by the trust anchor rootCert.
     */
    private static boolean isValidSignature(CMSSignedData signedData,
            X509Certificate rootCert) throws Exception {

        boolean[] bArr = new boolean[2];
        bArr[0] = true;
        CertStore certsAndCRLs = signedData.getCertificatesAndCRLs(
                "Collection", "BC");
        SignerInformationStore signers = signedData.getSignerInfos();
        Iterator it = signers.getSigners().iterator();

        if (it.hasNext()) {
            SignerInformation signer = (SignerInformation) it.next();
            SignerId signerConstraints = signer.getSID();
            signerConstraints.setKeyUsage(bArr);
            PKIXCertPathBuilderResult result = buildPath(rootCert,
                    signer.getSID(), certsAndCRLs);
            return signer.verify(result.getPublicKey(), "BC");
        }

        return false;
    }

    /**
     * Build a path using the given root as the trust anchor, and the passed in
     * end constraints and certificate store.
     * <p>
     * Note: the path is built with revocation checking turned off.
     */
    public static PKIXCertPathBuilderResult buildPath(X509Certificate rootCert,
            X509CertSelector endConstraints, CertStore certsAndCRLs)
            throws Exception {
        CertPathBuilder builder = CertPathBuilder.getInstance("PKIX", "BC");
        PKIXBuilderParameters buildParams = new PKIXBuilderParameters(
                Collections.singleton(new TrustAnchor(rootCert, null)),
                endConstraints);

        buildParams.addCertStore(certsAndCRLs);
        buildParams.setRevocationEnabled(false);

        return (PKIXCertPathBuilderResult) builder.build(buildParams);
    }

    /**
     * Create a KeyStore containing the a private credential with certificate
     * chain and a trust anchor.
     */
    public static KeyStore createKeyStore() throws Exception {
        KeyStore keyStore = KeyStore.getInstance("JKS");
        keyStore.load(null, null);

        keyStore.load(null, null);

        X500PrivateCredential rootCredential = createRootCredential();
        X500PrivateCredential interCredential = createIntermediateCredential(
                rootCredential.getPrivateKey(), rootCredential.getCertificate());
        X500PrivateCredential endCredential = createEndEntityCredential(
                interCredential.getPrivateKey(),
                interCredential.getCertificate());

        keyStore.setCertificateEntry(rootCredential.getAlias(),
                rootCredential.getCertificate());
        keyStore.setKeyEntry(
                endCredential.getAlias(),
                endCredential.getPrivateKey(),
                KEY_PASSWORD,
                new Certificate[] { endCredential.getCertificate(),
                        interCredential.getCertificate(),
                        rootCredential.getCertificate() });

        keyStore.store(new FileOutputStream("d:\\pkcs7\\KeyStore.jks"),
                KEY_STORE_PASSWORD);
        return keyStore;
    }

    /**
     * Create a random 1024 bit RSA key pair
     */
    public static KeyPair generateRSAKeyPair() throws Exception {
        KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "BC");
        kpGen.initialize(1024, new SecureRandom());
        return kpGen.generateKeyPair();
    }

    /**
     * Generate a sample V1 certificate to use as a CA root certificate
     */
    public static X509Certificate generateCertificate(KeyPair pair)
            throws Exception {
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();
        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setPublicKey(pair.getPublic());
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");
        return certGen.generateX509Certificate(pair.getPrivate(), "BC");
    }

    /**
     * Generate a sample V1 certificate to use as a CA root certificate
     */
    public static X509Certificate generateRootCert(KeyPair pair)
            throws Exception {
        X509V1CertificateGenerator certGen = new X509V1CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test CA Certificate"));
        certGen.setPublicKey(pair.getPublic());
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        return certGen.generateX509Certificate(pair.getPrivate(), "BC");
    }

    /**
     * Generate a sample V3 certificate to use as an end entity certificate
     */
    public static X509Certificate generateEndEntityCert(PublicKey entityKey,
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(caCert.getSubjectX500Principal());
        certGen.setNotBefore(new Date(System.currentTimeMillis()
                - VALIDITY_PERIOD));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal("CN=Test End Certificate"));
        certGen.setPublicKey(entityKey);
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false,
                new AuthorityKeyIdentifierStructure(caCert));
        certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false,
                new SubjectKeyIdentifierStructure(entityKey));
        certGen.addExtension(X509Extensions.BasicConstraints, true,
                new BasicConstraints(false));
        certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(
                KeyUsage.digitalSignature | KeyUsage.keyEncipherment));

        return certGen.generateX509Certificate(caKey, "BC");
    }

    /**
     * Generate a X500PrivateCredential for the root entity.
     */
    public static X500PrivateCredential createRootCredential() throws Exception {
        KeyPair rootPair = generateRSAKeyPair();
        X509Certificate rootCert = generateRootCert(rootPair);

        return new X500PrivateCredential(rootCert, rootPair.getPrivate(),
                ROOT_ALIAS);
    }

    /**
     * Generate a X500PrivateCredential for the intermediate entity.
     */
    public static X500PrivateCredential createIntermediateCredential(
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        KeyPair interPair = generateRSAKeyPair();
        X509Certificate interCert = generateIntermediateCert(
                interPair.getPublic(), caKey, caCert);

        return new X500PrivateCredential(interCert, interPair.getPrivate(),
                INTERMEDIATE_ALIAS);
    }

    /**
     * Generate a X500PrivateCredential for the end entity.
     */
    public static X500PrivateCredential createEndEntityCredential(
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        KeyPair endPair = generateRSAKeyPair();
        X509Certificate endCert = generateEndEntityCert(endPair.getPublic(),
                caKey, caCert);

        return new X500PrivateCredential(endCert, endPair.getPrivate(),
                END_ENTITY_ALIAS);
    }

    /**
     * Generate a sample V3 certificate to use as an intermediate CA certificate
     */
    public static X509Certificate generateIntermediateCert(PublicKey intKey,
            PrivateKey caKey, X509Certificate caCert) throws Exception {
        X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();

        certGen.setSerialNumber(BigInteger.valueOf(1));
        certGen.setIssuerDN(caCert.getSubjectX500Principal());
        certGen.setNotBefore(new Date(System.currentTimeMillis()));
        certGen.setNotAfter(new Date(System.currentTimeMillis()
                + VALIDITY_PERIOD));
        certGen.setSubjectDN(new X500Principal(
                "CN=Test Intermediate Certificate"));
        certGen.setPublicKey(intKey);
        certGen.setSignatureAlgorithm("SHA1WithRSAEncryption");

        certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, false,
                new AuthorityKeyIdentifierStructure(caCert));
        certGen.addExtension(X509Extensions.SubjectKeyIdentifier, false,
                new SubjectKeyIdentifierStructure(intKey));
        certGen.addExtension(X509Extensions.BasicConstraints, true,
                new BasicConstraints(0));
        certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(
                KeyUsage.digitalSignature | KeyUsage.keyCertSign
                        | KeyUsage.cRLSign));

        return certGen.generateX509Certificate(caKey, "BC");
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T14:10:29.123

在典型用法中，`.p7b`文件仅包含公钥证书，而从不包含私钥。它通常用于存储整个证书链而不是单个证书。“p7b”名称来自于 PKCS#7 SignedData 结构的退化形式。通常，私钥存储在 PKCS#12（通常是具有 a`.p12`或`.pfx`扩展名的文件）文件中，但其他格式也很常见。

要从 p7b 文件中读取证书，您可以使用[CertificateFactory](http://docs.oracle.com/javase/7/docs/api/java/security/cert/CertificateFactory.html)类。PKCS#12 文件可直接用作密钥库。

您经常提到 PKCS#7。PKCS#7 是一个非常大且开放的旧标准。如今，更普遍实施的标准是 PKCS#7 的扩展子集，称为 CMS。[这是RFC 5652](http://www.rfc-editor.org/rfc/rfc5652.txt)中记录的 IETF 标准。Bouncycastle [PKIX/CMS 库](http://www.bouncycastle.org/docs/pkixdocs1.5on/index.html)对 CMS 规范有广泛的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:17:19.613

```
 try {
    File file = new File("d:\\TESTS\\VG.p7b");
    FileInputStream fis = new FileInputStream(file);
    CertificateFactory cf = CertificateFactory.getInstance("X.509");
    Collection c = cf.generateCertificates(fis);
    Iterator i = c.iterator();
    while (i.hasNext()) {
      X509Certificate cert509 = (X509Certificate) i.next();
      System.out.println(cert509);
    }
  }
  catch (Throwable th) {
    th.printStackTrace();
  } 
```

# python - 如何根据参数提供的时间在 Python 中执行函数

> ID：11070602
> 
> 赞同：1
> 
> 时间：2012-06-17T10:25:02.120
> 
> 标签：python, multithreading, parallel-processing, gil

如何根据 seconds 参数提供的时间在 Python 中执行函数。

```
def timerfn(seconds, fn, *args):
    #start some timer
    #if function first launch is > "seconds", abort
    #if function doing great.. repeat it and stop at "seconds" 
```

正如我正在考虑的那样， time.clock() 在这里真的帮不上忙，因为一个函数可能真的很难，它永远不会到达一个计数器来显示一些结果或中止。

我必须使用线程模块吗？我对线程知之甚少，但从我读到的内容来看——根据 GIL，你只能有一个线程在工作，而这个过程实际上同时需要 2 个线程.. 或者其他一些我不知道的技巧.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:53:02.497

GIL 的意思是，始终只有一个线程在运行，但这并不意味着您仅限于一个线程。

听起来你想要[threading.Timer](http://docs.python.org/library/threading.html#threading.Timer)。

# ruby-on-rails - Rails：用户视图正在寻找用户/资产？资产路由

> ID：11070604
> 
> 赞同：1
> 
> 时间：2012-06-17T10:25:03.347
> 
> 标签：ruby-on-rails, routes, asset-pipeline

我无法正确路由资产。

当我打开 localhost:3000/users/1 我有一个

```
<img src="assets/image.png"/> 
```

但我得到一个“没有路线匹配”，因为它正在寻找用户/资产。

```
ActionController::RoutingError (No route matches [GET] "/users/assets/image.png"): 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:42:03.527

您必须在视图中使用帮助器，而不是`img`直接使用标签：`image_tag`

```
<%= image_tag 'image.png' %> 
```

# php - 使用 Ajax 在 DIV 中重新加载 MySQL 数据

> ID：11070607
> 
> 赞同：1
> 
> 时间：2012-06-17T10:25:39.303
> 
> 标签：php, jquery, mysql, ajax

我需要制作一个类似 fmylife.com 中的温和系统。基本上我遇到的问题是使用 Ajax（不刷新页面）将 MySQL 查询加载到 div 中。MySQL 查询

```
$sql = mysql_query(“SELECT * FROM posts WHERE active =’0’” LIMIT 1) or die (mysql_error());
$row = mysql_fetch_array($sql); 
```

HTML

```
<div class=”post-body”&gt;<?php echo $row[‘sitepost’];?></div> 
```

按“是”或“否”按钮时应重新加载此数据。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T10:30:47.007

在**post.php**中：

```
$sql = mysql_query("SELECT * FROM posts WHERE active ='0' LIMIT 1") or die (mysql_error());
$row = mysql_fetch_array($sql);
echo $row['sitepost']; 
```

**JS**：

```
<script type="text/javascript">
$(document).ready(function(){
   $("#yes").click(function(){
      $(".post-body").eq(0).load("post.php");
   })
})
</script> 
```

**HTML**：

```
<div id="yes">YES</div>
<div class="post-body"></div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T10:36:24.837

@mgraph 已关闭，但如果您想在按钮上执行此操作，请单击

在**post.php**中：

```
//$UserOption will be Yes/No for button clicks or empty string for first load of the page

$UserOption = $_REQUEST['UserClicked'];

//Id will be set if a vote has been clicked or empty string if it's the first load
$Id = $_REQUEST['Id'];

//(Do something with $UserOption)

$sql = mysql_query("SELECT * FROM posts WHERE active ='0' LIMIT 1") or die (mysql_error());
$row = mysql_fetch_array($sql);
echo $row['sitepost']; 
```

**JS**：

```
<script type="text/javascript">
$(document).ready(function(){
   update(null,null);
})

function update(Id, Vote) {
    $(".post-body").eq(0).load("post.php?UserClicked=" + Vote + "&Id=" + Id);
}
</script> 
```

**HTML**：

```
<div class="post-body"></div>

<button type="button" onclick="update(1, 'Yes');">Yes</button>
<button type="button" onclick="update(1, 'No');">No</button>

<button type="button" onclick="update(2, 'Yes');">Yes</button>
<button type="button" onclick="update(2, 'No');">No</button> 
```

**备用 HTML/JS**

```
<script type="text/javascript">
$(document).ready(function(){
    $("#yes").click(function(){
        update('Yes');
    })
    $("#no").click(function(){
        update('No');
    })
    update();
})

function update(Vote) {
    $(".post-body").eq(0).load("post.php?UserClicked=" + Vote);
}
</script>

<div class="post-body"></div>
<button id="yes" type="button">Yes</button>
<button id="no" type="button">No</button> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-18T10:52:29.340

您可以添加`$("html, body").animate({ scrollTop: 0 }, 500);`. 因此，当您单击“是”按钮时，滚动向上移动到顶部。看起来很好。

# mysql - 将记录包装成一个 MySQL中的标签

> ID：11070615
> 
> 赞同：1
> 
> 时间：2012-06-17T10:27:43.867
> 
> 标签：mysql

所以我有一个包含字段`description`和`short_description`. 我从不同的系统导入了这些值。

现在我需要知道如何将这些描述文本包装到`<p>`标签中。

记录总是单段的，因此不需要`<p>`为每两个换行符设置多个 's 的逻辑。

我想要做的是浏览每条记录，并添加到这两列`"<p>"`的开头和结尾。`"</p>"`但是，经过一番谷歌搜索后，我没有找到将原始值包含在 in 的新值`SET`中的方法`UPDATE`。

那将如何运作？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:31:38.743

您需要[`concatenate`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)将字符串放在一起：

```
update my_table
   set my_column = concat('<p>', my_column, '</p>') 
```

`concat`如果任何参数为 null，则返回 null，因此如果`my_column`没有值，您将不会得到`<p></p>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:32:55.883

您可以执行以下操作：

```
UPDATE 
   tableName
SET
   description  = CONCAT('<p>', description , '</p>'),
   short_description  = CONCAT('<p>', short_description , '</p>')
WHERE .......... 
```

# .net - 使用共享远程托管对 .net 网站进行性能分析

> ID：11070617
> 
> 赞同：0
> 
> 时间：2012-06-17T10:28:36.970
> 
> 标签：.net, performance, profiling, shared-hosting

我的网站出现性能问题。我对 .net 比较陌生，尽管在过去的几个月里我学到了很多东西！

我昨晚发布了这个问题

[在 VB 中使用 ASP.NET 处理图像时提高性能](https://stackoverflow.com/questions/11066700/improving-performance-when-working-on-images-with-asp-net-in-vb)

从中发布的评论让我思考，今天早上谷歌搜索。

我不清楚我将如何真正了解我的网站的“性能分析”。

如果我可以在本地复制整个站点，我已经看到 Visual Studio 中内置了一些工具，但我不能这样做。iis中也有工具，这个：

[http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/index-2?utm_expid=53846-2&source=products-a-page&utm_referrer=http%3A%2F%2Fwww.red- gate.com%2F产品%2F](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/index-2?utm_expid=53846-2&source=products-a-page&utm_referrer=http%3A%2F%2Fwww.red-gate.com%2Fproducts%2F)

我喜欢上面链接中的屏幕截图，它看起来直观且易于理解。

我完全不清楚的是，是否需要直接访问实际的服务器机器？或者，它是一个我可以远程使用的 .net 插件。

我需要这个设施，因为该站点托管在我无法直接访问的共享服务器上。

如果不是这种情况，是否有人对如何远程查找我的代码中的瓶颈有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:48:05.733

我知道的最快方法是为 Mozilla Firefox 安装 FireBug，并在页面加载时查看 net 选项卡。这显示了服务器调用和加载时间的清晰时间表。[https://getfirebug.com/](https://getfirebug.com/)

用 Firebug 快速浏览一下你的网站，我发现每张图片都需要将近一秒钟的时间来加载。可能是您的 ISP 速度很慢，您与谁一起托管？

# r - 在 R 中存储和访问模型结果

> ID：11070620
> 
> 赞同：0
> 
> 时间：2012-06-17T10:28:54.057
> 
> 标签：r

我有一些代码可以循环运行模型。循环的每次迭代运行一个略有不同的模型，结果存储在一个变量中。什么是存储这些对象的好方法，以便我可以在循环终止后访问它们？我想过这样的事情：

```
fit.list <- list(n)
for (i in 1:n) {
    fit <- glm(......)
    fit.list[i] <- fit
} 
```

但是然后我想访问每个模型的结果，例如，`summary(fit.list[4])`或者`plot(fit.list[15])`但这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:36:25.527

尝试

```
plot(fit.list[[15]]) 
```

单个`[`函数提取包含所请求组件的列表，即使该列表的长度为 1。

double`[[`函数提取**单个**声明的组件并将其返回但不在列表中；即你得到的组件本身不是包含该组件的列表。

这是一个插图：

```
> mylist <- list(a = 1, b = "A", c = data.frame(X = 1:5, Y = 6:10))
> str(mylist)
List of 3
 $ a: num 1
 $ b: chr "A"
 $ c:'data.frame':  5 obs. of  2 variables:
  ..$ X: int [1:5] 1 2 3 4 5
  ..$ Y: int [1:5] 6 7 8 9 10
> str(mylist["c"])
List of 1
 $ c:'data.frame':  5 obs. of  2 variables:
  ..$ X: int [1:5] 1 2 3 4 5
  ..$ Y: int [1:5] 6 7 8 9 10
> str(mylist[["c"]])
'data.frame':   5 obs. of  2 variables:
 $ X: int  1 2 3 4 5
 $ Y: int  6 7 8 9 10 
```

请注意最后两个命令输出的差异。`str(mylist["c"])`说“ `List of 1`”，同时`str(mylist[["c"]])`说“ `'data.frame':`”。

与您`plot(fit.list[15])`一起，您要求 R 绘制一个列表对象，而不是该列表元素中包含的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:42:58.687

也可以试试

```
fit.list <- list()
for (i in 1:5) {
counts <- c(18,17,15,20,10,20,25,13,12)
outcome <- gl(3,1,9)
treatment <- gl(3,3)
print(d.AD <- data.frame(treatment, outcome, counts))
glm.D93 <- glm(counts ~ outcome + treatment, family=poisson())
fit.list[[i]] <-glm.D93
} 
```

注意`fit.list[[i]]`而不是`fit.list[i]`你有

# email - lua用gmail帐号发送邮件

> ID：11070623
> 
> 赞同：7
> 
> 时间：2012-06-17T10:29:19.993
> 
> 标签：email, lua

我想用我的 gmail 帐户发送电子邮件，我试了一下，但没有成功，有谁能给我一个样本吗？任何建议，将不胜感激。谢谢

我使用了lualogging api，代码是

```
require"logging.email"

logger = logging.email {
  rcpt = "aaa@sina.com",
  from = "bbb@gmail.com",
  user = "bbb@gmail.com",
  password = *****,
  server = "smtp.gmail.com",
  port = 587,
  headers = { 
    rcpt = "aaa@sina.com",
    from = "bbb@gmail.com", 
    subject = "[%level] logging.email test", 
  },
}

logger:error("error!") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T10:38:50.640

你应该看看[LuaSocket](http://w3.impa.br/~diego/software/luasocket/)，特别是它的[SMTP 模块](http://w3.impa.br/~diego/software/luasocket/smtp.html)，它可以用来使用你的 GMail 帐户发送邮件。你还需要一个 SSL 库，我使用[LuaSec](https://github.com/brunoos/luasec)，它被设计为与 LuaSocket 一起使用。这是我成功使用我的 GMail 帐户发送电子邮件的代码：

```
-- Michal Kottman, 2011, public domain
local socket = require 'socket'
local smtp = require 'socket.smtp'
local ssl = require 'ssl'
local https = require 'ssl.https'
local ltn12 = require 'ltn12'

function sslCreate()
    local sock = socket.tcp()
    return setmetatable({
        connect = function(_, host, port)
            local r, e = sock:connect(host, port)
            if not r then return r, e end
            sock = ssl.wrap(sock, {mode='client', protocol='tlsv1'})
            return sock:dohandshake()
        end
    }, {
        __index = function(t,n)
            return function(_, ...)
                return sock[n](sock, ...)
            end
        end
    })
end

function sendMessage(subject, body)
    local msg = {
        headers = {
            to = 'Your Target <target email>',
            subject = subject
        },
        body = body
    }

    local ok, err = smtp.send {
        from = '<your email>',
        rcpt = '<target email>',
        source = smtp.message(msg),
        user = 'username',
        password = 'password',
        server = 'smtp.gmail.com',
        port = 465,
        create = sslCreate
    }
    if not ok then
        print("Mail send failed", err) -- better error handling required
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-17T17:45:14.000

来自 Michal Kottman 的代码可以正常工作，但是当 smpt 服务器在 587 端口上工作时（对我来说）失败了，它使用一种完全不同的方式来接受要发送的邮件（根据我读到的内容）。有没有人遇到过类似的事情？我总是在端口 587 上工作的服务器上获得“错误的版本号”。

# xml - Word 2007 xml 文档的基本部分

> ID：11070624
> 
> 赞同：3
> 
> 时间：2012-06-17T10:29:23.287
> 
> 标签：xml, ms-word, word-2007, wordml

我有一个需要用 Microsoft Word 2007 打开的 xml 文件。我自己编写的。但是当我尝试打开它时，它会告诉“某些部件丢失或无效”。我认为发生这种情况我的文档没有定义所有必需的属性。因此，我需要知道能够使用 Word 2007 打开 xml 文档的必备条件是什么。我定义了以下属性。

```
cp:coreProperties
w:settings
w:body 
```

（正文有一个简单的文本行。）还需要包括什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T01:10:14.797

表示为 Flat OPC XML，它可以很简单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?mso-application progid="Word.Document"?>
<pkg:package xmlns:pkg="http://schemas.microsoft.com/office/2006/xmlPackage">
  <pkg:part pkg:name="/_rels/.rels" pkg:contentType="application/vnd.openxmlformats-package.relationships+xml" pkg:padding="512">
    <pkg:xmlData>
      <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
        <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="word/document.xml"/>
      </Relationships>
    </pkg:xmlData>
  </pkg:part>
  <pkg:part pkg:name="/word/document.xml" pkg:contentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml">
    <pkg:xmlData>
      <w:document mc:Ignorable="w14 wp14" xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape">
        <w:body>
          <w:p >
            <w:r>
              <w:t>Hello world</w:t>
            </w:r>
          </w:p>
        </w:body>
      </w:document>
    </pkg:xmlData>
  </pkg:part>
</pkg:package> 
```

您是否包含了一段关系，但缺少其目标部分？或者在某处包含一个 relId，但完全错过了这种关系？

# php - php邮件功能中的HTML

> ID：11070627
> 
> 赞同：1
> 
> 时间：2012-06-17T10:29:37.993
> 
> 标签：php, html, function, email

我的网站上有一个联系表，因此用户可以向我发送电子邮件，但我遇到了问题。

我想在电子邮件中使用 HTML 链接，并且我还希望用户发送给我的内容按照他们想要的方式进行格式化......让我解释一下。

如果用户发送此：

```
Hello World!

Isnt it a great Day? 
```

不使用标题来启用 html，然后当它到达我时它会说这样的格式。

如果我使用标题 (MIME) 来启用 html，并在电子邮件中包含一个链接（我想这样做），那么它会以如下方式到达我：

```
Hello World!Isnt it a great Day? 
```

如何包含 html，并保持电子邮件格式正确？

谢谢

希望这一切都有意义：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:35:09.813

`nl2br`在您的消息中使用- [http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

它将用 HTML 替换所有换行符`<br>`

```
$message = nl2br($message, false); 
```

如果要发送 HTML 电子邮件而不是 XHTML，则第二个参数 *is_xhtml* 是可选的

# r - R 支持阻力水平作为概率分布

> ID：11070629
> 
> 赞同：4
> 
> 时间：2012-06-17T10:29:54.017
> 
> 标签：r, quantmod

TTR 有一些优秀的 TA 指标。是否有一个包或函数可以计算和绘制不同类型的支撑位和阻力位？最好是可能的支撑位和阻力位的概率分布

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:41:48.377

这是一个跟进我的评论的例子。

使用月度数据计算枢轴。每个月，使用根据上个月数据计算的支撑和阻力。（当然，它不必是带有每日数据的每月枢轴。您可以使用每日枢轴和日内价格序列）

```
library(quantmod)
getSymbols("SPY", from="2010-05-01", to="2012-06-15")
mSPY <- to.monthly(SPY, drop.time=TRUE)
# pivots() is excluded from the TTR build because it uses quantmod functions,
# but you can still get it from GitHub by running:
#source("https://raw.githubusercontent.com/joshuaulrich/TTR/master/R/pivots.R")
piv <- lag(pivots(mSPY, lagts=FALSE))
#merge, and fill forward pivot values so that there is a value for each day
dat <- cbind(SPY, piv)
dat[, 7:11] <- na.locf(dat[, 7:11])
chartSeries(OHLC(SPY), theme='white')
addTA(dat$S1, on=1, col='lightblue')
addTA(dat$S2, on=1, col='blue')
addTA(dat$R1, on=1, col='pink')
addTA(dat$R2, on=1, col='red') 
```

这将产生：

![在此处输入图像描述](../Images/ae4c81895b8a752a2bcbc77316d92021.png)

Donchian Channels 也可以被视为支撑和阻力

```
chartSeries(OHLC(SPY), theme='white')
dc <- lag(DonchianChannel(cbind(Hi(SPY), Lo(SPY))))
addTA(dc$low, on=1, col='blue')
addTA(dc$high, on=1, col='red') 
```

![在此处输入图像描述](../Images/b2177b6201243a2c5e3823cdfe733784.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T14:45:59.307

quantmod 中的大部分技术分析指标都来自我编写的 TTR 包。我没有包括支撑/阻力线等主观指标。也就是说，quantmod 具有`addLines`您可以使用的功能。

```
library(quantmod)
getSymbols("SPY", from="2012-01-01", to="2012-06-15")
chartSeries(SPY, TA="addLines(h=c(134,141))", theme="white") 
```

产生：

![带有支撑/阻力线的图表系列](../Images/c3da42e556d19de7e1c1254b48be603e.png)

# jquery - 将下拉列表的值传递给文本框

> ID：11070637
> 
> 赞同：4
> 
> 时间：2012-06-17T10:32:31.473
> 
> 标签：jquery, asp.net-mvc-3, razor

我的视图中有一个下拉列表、一个提交按钮和一个文本框。当单击提交按钮或下拉列表的 onChange 事件时，我想将下拉列表的选定值传递给文本框。我怎样才能做到这一点？？？？

我解决了如下：

```
<script type="text/javascript">
    $(function() {
        $('#ddlComp').change(function() {
            var selectedValue = $(this).val();
            $('#txtCompName').val(selectedValue);
        });
    });
</script>

<div>
    @Html.DropDownList("ddlcomp", Model.CompanyList)
    <input type="submit" value="Submit" />    
    @Html.TextBox("txtCompName")
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:46:28.053

> **当单击提交按钮或下拉列表的 onChange 事件时，**我想将下拉列表的选定值传递给文本框

 **```
$(function() {
    var selectedValue = ''; // declare variable here

    // on drop down change
    $('#ddlComp').change(function() {
        selectedValue = $(this).val(); // store value in variable
        $('#txtCompName').val(selectedValue); // update on change
    });

    // on submit button click
    $('input[type=submit]').click(function(){
        $('#txtCompName').val(selectedValue); // update on submit button
    });
}); 
```**

# spring - 如果属性不存在，Spring 3.1 @PropertySources 不会抛出异常

> ID：11070642
> 
> 赞同：2
> 
> 时间：2012-06-17T10:33:08.587
> 
> 标签：spring

尽管我的 Configuration 类中的属性名称错误，但 Spring 不会抛出异常。日志显示找不到密钥。

```
2012-06-17 05:26:49,545 DEBUG | main | o.s.core.env.PropertySourcesPropertyResolver          | Could not find key 'pegaso.cfdiRequest' in any property source. Returning [null] 
```

我在我的配置类的环境类中使用该属性

```
@Configuration
@PropertySource("classpath:application.properties")
public class AppConfig {

   @Autowired
  Environment env;

@Bean
public FesaBean fesaBean() {
   FesaBean fesaBean = new FesaBean();  
   fesaBean.setMyProperty(env.getProperty("pegaso.cfdiRequest"));
   return fesaBean;
} 
```

**pegaso.cfdiRequest**在 application.properties 中不存在。不过，我没有得到例外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:58:45.343

```
env.getRequiredProperty("propertyName") 
```

Environment 实现了 PropertyResolver ，它具有这样的方法[Environment.getRequiredProperty()](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/PropertyResolver.html#getRequiredProperty%28java.lang.String%29)解决了这个问题。如果未找到该属性，则抛出 java.lang.IllegalStateException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:43:27.367

[根据Environment](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/Environment.html)的 API ，它为无法解析的值返回 null，因此只需在您的特定情况下进行 null 检查：

```
if (env.getProperty("pegaso.cfdiRequest")==null)... // variable not resolved 
```

# c# - VS2010 可扩展性：如何在按 F5 时执行自定义操作

> ID：11070644
> 
> 赞同：2
> 
> 时间：2012-06-17T10:33:36.600
> 
> 标签：c#, visual-studio-2010, visual-studio, .net-4.0, visual-studio-extensions

我需要为自定义项目模板实现某种可扩展性。

打开 C# 代码文件，如果...：

*   *...当前项目有一些特定的类型 ID。*
*   *...代码文件是一个类，并继承了一些具体的基类。*
*   *...用户按下 F5。*

...我想...：

*   ...*启动任意程序（控制台应用程序）*。
*   ...*将 Visual Studio 附加到任意程序的进程中*。
*   ...*调试*。

实际上我完全迷路了，我不知道该怎么做。我知道我需要 Visual Studio 2010 SDK，但我不知道如何创建一个扩展来完成我需要实现的目标。

先感谢您。

**更新**

*我正在 Stackoverflow 问答中做一些研究，我将添加与我自己的问题相关的问题：*

*   [Visual Studio 2010 可扩展性 - 覆盖构建操作而不影响 cproj 文件](https://stackoverflow.com/questions/6004928/visual-studio-2010-extensibility-override-build-action-without-effecting-cproj)

*   [“附加到进程”作为构建后事件](https://stackoverflow.com/questions/3860860/attach-to-process-as-a-post-build-event) *（这看起来不错，但我不喜欢这种方法。我更喜欢完整的 Visual Studio 集成。无论如何，它给出了一个提示）。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:57:54.323

我想最好的尝试方法是 VS 插件，它将捕获运行 (F5) 命令并根据需要处理它。请参阅这篇文章作为从 VS 插件捕获命令的起点：[如何：添加和处理命令](http://msdn.microsoft.com/en-us/library/90855k9f%28v=vs.100%29.aspx)。这些用于从 VS[附加程序附加到进程 附加到惰性进程](http://weblogs.asp.net/pabloretyk/archive/2009/02/12/attach-to-process-for-lazies.aspx)和[Visual Studio 加载项自动附加到开发服务器](https://stackoverflow.com/questions/7611791/visual-studio-add-in-to-automatically-attach-to-development-server)

希望这有助于找到满足您需求的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:34:46.753

您是否考虑使用第三方扩展，例如免费的[DXCore](http://www.skorkin.com/2010/06/devexpress-dxcore-framework/) Visual Studio 扩展框架？它可以做你需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T10:32:09.730

首先谢谢大家提供的信息，很有用。

基本上，我有办法去做我想要实现的目标。

因为我想帮助处于类似情况的其他人，所以我想分享一下我用来解决所有问题的方法：

*   ***NRefactory***作为 C# 代码解析器。**它就像一个魅力！**您可以从代码文件中获取大量信息。

*   ***VSPackage*** Visual Studio 2010 SDK 项目模板。

*   为了附加到流程中，我将期待 Dmitry Pavlov 的建议。

有趣的链接：

*   VSPackage 操作方法：http: [//msdn.microsoft.com/en-us/library/bb164715.aspx](http://msdn.microsoft.com/en-us/library/bb164715.aspx)

一旦一切正常，我将编辑此答案并提供更详细的信息。

# c# - 如何使用 C# 中的 DirectShowLib 将图像与来自 USB 捕获设备的视频流混合

> ID：11070645
> 
> 赞同：0
> 
> 时间：2012-06-17T10:34:23.403
> 
> 标签：c#, .net, directx, directshow

我能够在窗口中显示视频流。我在 C# 中使用 DirectShow VideoMixingRenderer9。我创建了一个带有一些文本的图像。现在，如何将此图像与视频流混合，以便视频流和文本都显示在捕获窗口中。我尝试使用 ISampleGrabber 过滤器，但它不适用于所有视频设备，并且捕获屏幕仅显示黑色背景的文本但没有视频流。所以我不想使用 ISampleGrabber 过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T11:35:59.063

IVMRMixerBitmap9 接口应该可以帮助你，它是由 VMR 实现的。这是 MSDN 的链接：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd390451(v=vs.85).aspx][1]

位图需要具有 alpha 值，以便它可以与渲染的视频混合。

# iphone - 我想在加载新图像时删除 tableviewcell 中的图像。在ios中

> ID：11070650
> 
> 赞同：0
> 
> 时间：2012-06-17T10:35:34.077
> 
> 标签：iphone, ios, uiimageview, tableviewcell

触摸按钮时，我的 ios 应用程序在 tableview 中加载了 25 个新单元格。

在单元格中，UIImageview 中有下载的图像。

我想在加载 25 个新图像时删除单元格中以前的 25 个下载图像。

像 appstore 中的前 25 个表格视图。

如何？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:42:06.320

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:`在方法中执行此操作

```
cell.yourImageView.image  = yourNewImage. 
```

它将用新图像更改以前的图像

对于下载图像的性能，您可以首先下载图像并存储在文档目录中，然后设置图像或使用延迟加载，因为它在可用时显示图像并且性能会更好

# php - phpMailer SMTP 在一种设置中工作，但不是另一种（SMTP 535 身份验证数据不正确）

> ID：11070651
> 
> 赞同：1
> 
> 时间：2012-06-17T10:35:54.967
> 
> 标签：php, apache, smtp, phpmailer

[来自http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer%20v5.1/](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php5_6/PHPMailer%20v5.1/)的 PHPMailer

在我的“离线”WAMP 设置（本地主机）中，我通过 Gmail 使用 PHPMailer 的 PHP 文件运行良好（在我记得打开 php_openssl 之后）。这表明我的 PHP 代码和 Gmail 设置是正确的。

但是，在我的“在线”托管服务提供商上，我收到“错误：服务器不接受密码：535 身份验证数据不正确”。

535 提示密码错误，但与上传的文件相同。因此，我认为这是服务器配置问题，但不知道从哪里开始。我比较了 phpinfo()，并且两者都启用了 openSSL - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:01:42.147

听起来您的远程主机未配置反向 DNS，或者 IP 地址可能会根据来自[SenderBase](http://www.senderbase.org) /alike 的值进行速率限制。

该问题的间歇性显示将排除诸如路由或您的物理凭据或防火墙之类的问题。它会将问题更多地放在速率限制、服务质量等方面。

检查上面的 SenderBase 是否有不工作的主机，看看它的评级是否很差。我敢打赌正在工作的主机得分很高或根本没有列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:42:17.023

这似乎是您描述的环境问题。可能您的“在线”（或生产）托管比您的本地主机环境更安全。某种防火墙可能会阻止您连接到出站套接字/端口。出站 SMTP 端口非常常见的做法。

要检查这是否是您的问题，请测试哪些端口可用。你有很多方法可以做到这一点。

**网络统计**

```
netstat -l -t -p 
```

**php**

```
$p = fsockopen( '127.0.0.1', <port number>, $errno, $errstr, 5 );
if ( !$p )
    // port is closed or blocked
else
    // port is open and available
    fclose( $p ); 
```

**Python**

```
#!/usr/bin/env python
from socket import * 

if __name__ == '__main__':
    target = raw_input('Enter host to scan: ')
    targetIP = gethostbyname(target)
    print 'Scanning on host ', targetIP

    for i in range(20, 1025):
        s = socket(AF_INET, SOCK_STREAM)

        result = s.connect_ex((targetIP, i))

        if(result == 0) :
            print 'Port %d: OPEN' % (i,)
        s.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:00:15.113

只是一个想法，但也许您的密码中有特殊字符，这就是为什么它不匹配？此外，您可能想尝试使用本地 php.ini 以确保它不是问题，当然只是一秒钟

# c# - 必须在 C# 中声明标量变量

> ID：11070656
> 
> 赞同：3
> 
> 时间：2012-06-17T10:36:28.570
> 
> 标签：c#, sql-server-2008

我正在用 C# 开发一个应用程序，当我与数据库 SQL Server 交互时，它给了我“必须声明标量变量”的例外情况。代码如下

```
public DataTable Search(string clas)
{
    try
    {
        DataTable table = new DataTable();
        string query = "";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            if (clas != "")
            {
                query = "Select * from StudentManagement Where classEnrolled=@cls";
                //dataAdapter
                dataAdapter = new SqlDataAdapter(query, connectionString);
                dataAdapter.SelectCommand.Parameters.Add(new SqlParameter("cls", clas));
            }

            dataAdapter = new SqlDataAdapter(query, connectionString);
            // Create a command builder to generate SQL update, insert, and
            // delete commands based on selectCommand. These are used to
            // update the database.
            SqlCommandBuilder commandBuilder = new SqlCommandBuilder(dataAdapter);

            // Populate a new data table and bind it to the BindingSource.
            table.Locale = System.Globalization.CultureInfo.InvariantCulture;
            dataAdapter.Fill(table);
        }
        return table;
    }
    catch (Exception e)
    {
        return null;
    }    
} 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:12:32.310

我强烈怀疑这`clas`是一个 `null`参考。请注意，这仍然会触发您的`!= ""`分支，因为空引用与空字符串不同。

也许使用：

```
if(!string.IsNullOrEmpty(clas)) {...} 
```

反而？

db-parameters 的一个特点是，如果 .Value 为 ，则不包括它们`null`。检查您发送的值。

它不适用于您的情况（因为在普通 SQL 中没有任何东西等于 NULL）但是：如果您*打算*将 NULL 作为参数发送，则必须将值设置为 DBNull.Value。

# php - 从 mysql 查询缓存 html

> ID：11070658
> 
> 赞同：0
> 
> 时间：2012-06-17T10:36:56.087
> 
> 标签：php, mysql, html, caching

好吧，所以我什至不知道如何开始这样做但基本上我有一个显示在每个页面上的菜单来获取它的文本和来自 mysql 数据库的链接。

这是代码：

```
<table class="LeftMenuTable">
<?php
    // Generates the left menu from the LeftMenu_items table
    $result = MySqlQuery("SELECT * FROM Menu_LeftMenu;");
    while ($row = mysqli_fetch_assoc($result))
    {
        if ((int)$row['header'] == 0)
        {
            // echos value is on or not
            echo "<tr><td class='LeftMenu'><a href='" . $row['url'] . "'>" . $row['text'] . "</a></td></tr>";
        }
        else if ((int)$row['header'] == 1)
        {
            // header
            echo "<tr><td style='border:0px; height:5px;'></td></tr>";  // adds extra empty tabel
            echo "<tr><td class='LeftMenuHeader'><b><strong>" . $row['text'] . "</strong></b></td></tr>";
        }
    }
?>
</table>

function MySqlQuery($Query)
{

    $result = $mysqli->query($Query) or die(ReportMysqlError(mysqli_error($mysqli), $Query));
    return $result;
} 
```

我觉得任何可以被 html 缓存替换的 sql 查询都会以某种方式降低网站的速度。

如果有人有任何信息或建议，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:44:07.737

在调用数据库的方法中（获取菜单项并构建相应的 html）：

1.  `$_SESSION`用你的菜单的 html检查当前是否有一个项目。
2.  如果 (1) 什么都不返回，则执行查询，构建 html 并将结果存储在`$_SESSION`.
3.  返回菜单的 html。

[可以在此处](http://www.tizag.com/phpT/phpsessions.php)找到有关如何使用会话的更多信息。

这样，您的菜单查询只会在`once`每个会话中触发。我怀疑这是一个真正的性能破坏者（如果您的查询或多或少是正常形式）。

请注意，`changes`在使用上述机制的会话到期之前，您的菜单中不会自动获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:44:31.463

当我需要组织一个缓存层时，我通常使用[memcached](http://memcached.org/)（或其他类似的解决方案）。

但在您的情况下，可能会以更简单的方式完成：使用中间“生成器”脚本，每次更新相关表时都会触发该脚本（因为它是从某种形式的管理面板更新的，对吗？）并将生成一个静态文件，然后将此文件包含在您的主视图脚本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:56:13.110

如果你足够热心，我会建议一种稍微不同的方法。

如果您使用称为“Smarty”的模板语言制作页面，请在此处了解更多信息。[http://smarty.net](http://smarty.net)你应该会发现 smarty 会为你管理缓存。

这与您的问题有什么关系。

1.  它将使您的 Web 开发更容易，因为您将停止将内容“回显”到您的 HTML 中。
2.  Smarty 会为你做缓存。当 smarty 模板加载时，smarty 会保留一份副本（或者您可以告诉它缓存文件 x 小时、天等）。
3.  随着您网站的增长，smartys 缓存将有助于保持您的网站快速运行和加载。
4.  您只需很少的工作即可使缓存工作，只需使用 smarty 模板来构建您的站点。
5.  最后，您可能会发现使用 smarty 构建网站要简单得多。

约翰。

# php - 脚本运行后使用 PHP 编写 XML 无效

> ID：11070662
> 
> 赞同：1
> 
> 时间：2012-06-17T10:37:42.547
> 
> 标签：php, xml

我在使用 PHP 编写 XML 文件时遇到问题。以下是我将内容写入 xml 文件的 php 脚本。基本上没有遇到任何错误；但是当我在运行脚本后检查我的 xml 文件时，它是空的。请指教。谢谢你。

```
 $doc= new DOMDocument();
        $doc->load("articles.xml");
        $b = $doc->createElement( "articleDraft" );

          $id = $doc->createElement("id"); 
            $id->appendChild( 
            $doc->createTextNode( $_POST['id'] ) ); 
            $b->appendChild( $id ); 
          $draft=$doc->createElement("draftContent");
          $draft->appendChild($doc->createTextNode($_POST['articleBody']));
          $b->appendChild($draft);
          $time=$doc->createElement("drafTime");
          $draft->appendChild($doc->createTextNode(time()));
          $b->appendChild($time);

        $doc->save("articles.xml"); 
```

我是用 PHP 编写 xml 的新手，如果您发现任何问题，请帮我找出其他问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:51:25.123

你只是忘记了：

```
$doc->appendChild($b); 
```

编辑：如果要格式化输出，请添加：

```
$doc->formatOutput = true; 
```

否则，您的输出对人类不友好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:59:36.233

$doc->appendChild($b); 保存前

# ios - 使用 XCode 4.3.3 为 IOS 5.0 之前的用户构建应用程序

> ID：11070668
> 
> 赞同：0
> 
> 时间：2012-06-17T10:38:25.307
> 
> 标签：ios, xcode

如果以前有人问过这个问题，我深表歉意。我可以看到有很多看起来相似的问题，但似乎他们主要要求做与我在这里提出的相反的事情。

我从开发中休息了几个月，因为我卖掉了我的 MacBook，同时将我的 iPhone 4 升级到了 IOS 5.1（通过 wifi）

在出售 macbook 之前，我复制了我的驱动器，并确保它可以启动并用于维护东西（在借来的 mac 上）。

无论如何，我现在又回到了二手 macbook classic 的线上，它附带了全新的 Lion 安装，虽然我制作的工作站备份驱动器启动良好，但我沮丧地发现 Xcode 4.2 不再让我构建到我的 iPhone ，所以我不得不继续在 Lion 下安装 XCode 4.3.3。6GB 的更新下载并稍后安装，一切都很好，但是我现在有一个令人费解的问题。

如果我制作一个新应用程序，它似乎是一个 IOS 5.1 应用程序，唯一可用的模拟器是 IOS 5.1 iPhone 和 IOS 5.1 iPad。当然还有我的 iPhone 设备。

所以...如果我继续将此应用程序提交到应用程序商店（确保我不使用任何 5.1 特定功能），这是否意味着 IOS 版本低于 5.x 的用户仍然可以下载和部署该应用程序? 我无法测试它，因为没有模拟器，而且我只能访问 5.1 安装的设备。我尝试下载其他模拟器，但默认的新项目似乎将它们排除在菜单系统之外。

制作每个人（包括 5.x 用户）都可以下载的一 (1) 个应用程序的最佳方法是什么？我会一直使用 Xcode 4.2，但这意味着我必须扔掉我的 iPhone 来进行设备测试。

或者，是否有某种方法可以返回到我原来的工作站 (4.2) 并将其配置为允许我在我的 5.1 设备上进行设备测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:20:51.823

在 Xcode 中，在项目导航器中选择项目文件，然后选择目标。在“摘要”选项卡的第一部分中，您有“iOS 应用程序目标”。在那里您可以选择早期的 iO​​S 版本。

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:23:00.200

在 xcode 中转到首选项`command + ","`导航到下载。选择组件选项卡，你会找到 ios 模拟器，从那里下载你想要的

# javascript - 获取完整的 html 而不仅仅是内部 html

> ID：11070672
> 
> 赞同：6
> 
> 时间：2012-06-17T10:38:44.170
> 
> 标签：javascript, jquery

我想获取 html，包括我用来获取 html 的选择器

假设我有

```
<div id="foo">
  <div id="bar">content</div>
</div> 
```

当我这样做`$('#foo').html()`时

```
<div id="bar">content</div> 
```

jquery中有没有办法获取包括父级在内的整个html（选择器div）

我想要整个 html

```
<div id="foo">
  <div id="bar">content</div>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T10:40:50.437

你可以做：

```
$('#foo')[0].outerHTML; 
```

## [演示](http://jsbin.com/ifanap)

**更多信息：**

[https://developer.mozilla.org/en/DOM/element.outerHTML](https://developer.mozilla.org/en/DOM/element.outerHTML)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T10:59:25.873

你也可以这样`.clone()`做`.wrap()`

```
$('#foo').clone().wrap("<div/>").parent().html(); 
```

**演示：http:** [//jsfiddle.net/joycse06/Vy5JW/](http://jsfiddle.net/joycse06/Vy5JW/)

**`outerHTML`Firefox 不支持**注意**`< 11.0`您可以在此处的浏览器兼容性部分中检查[https://developer.mozilla.org/en/DOM/element.outerHTML](https://developer.mozilla.org/en/DOM/element.outerHTML)**

 **因此，对于故障安全，您可以使用以下`outerHTML`内容

```
$foo = $('#foo');
var outerHtml =   ('outerHTML' in $foo[0])? $foo[0].outerHTML 
                                  : $foo.clone().wrap("<div/>").parent().html(); 
```

**更新了演示** [http://jsfiddle.net/joycse06/Vy5JW/1/](http://jsfiddle.net/joycse06/Vy5JW/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T10:41:45.507

您可以使用[该`outerHTML`属性](https://developer.mozilla.org/en/DOM/element.outerHTML)：

```
$('#foo')[0].outerHTML 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T12:12:32.230

除了 Sarfraz 的回答，如果您使用的是 jQuery，您可以将其打包到自己的插件中：

```
(function($) {

    $.fn.outer = function() {

        return $(this)[0].outerHTML;

    };

})(jQuery);
​ 
```

这是一个演示：http: [//jsfiddle.net/WkH4z/](http://jsfiddle.net/WkH4z/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T10:41:13.840

试试这个：

```
 $('#foo').parent().html(); 
```**

# java - 如何从 Java 类文件中删除一些操作码？

> ID：11070680
> 
> 赞同：1
> 
> 时间：2012-06-17T10:40:05.850
> 
> 标签：java, assembly, bytecode-manipulation

以下是一些代码行：

```
//   43: invokevirtual 10   test/main:a (I)test/sub1;
//   46: pop
//   47: goto +4 -> 51
//   50: athrow
//   51: aload_2 
```

这是示例 Java 类文件的字节码。

我想从 java 类文件中删除第 47、50 行的操作码。

如何使用 ASM 做到这一点？

# php - 您如何管理项目中的单元测试文件？你在git中添加它们吗？

> ID：11070682
> 
> 赞同：6
> 
> 时间：2012-06-17T10:40:19.703
> 
> 标签：php, git, unit-testing, phpunit

您如何管理项目中的**PHPUnit**文件？
你将它添加到你的**git**存储库还是忽略它们？
你在你的**PHPdocs代码中使用@assert 标签****吗**？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T10:51:21.037

## 设置

我目前没有使用 php，但我正在使用git 中的[python](http://python.org) [单元测试](http://docs.python.org/library/unittest.html)和[sphinx 文档](http://sphinx.pocoo.org/)。我们将测试添加到 git，甚至对推送到远程`devel`和`master`分支的测试通过有一定的要求（`master`比 更难`devel`）。这保证了一些代码质量（也应该评估测试覆盖率，但那还没有实现:)）。

我们将测试文件放在它们所属目录中[顶级源目录旁边的单独目录](https://github.com/horazont/aioxmpp)`test_`中，前缀为，以便单元测试框架自动找到它们。

对于类似的文档，我们只是将 sphinx docs 文件放入它们自己的子目录（docs）中，在我们的例子中，这是一个独立的 git 子模块，将来可能会更改。

## 基本原理

*   我们希望能够跟踪测试中的变化，因为它们应该很少见。频繁的更改表明代码不成熟。

*   其他团队成员需要访问测试，否则他们将毫无用处。如果他们在某些地方更改代码，他们必须能够验证它不会破坏任何东西。

*   文档属于代码。在 python 的情况下，代码直接包含文档。所以我们必须将它们放在一起，因为文档是从代码生成的。

*   在存储库中拥有测试和文档允许在远程服务器上进行自动化测试和文档构建，这为我们提供了即时更新的文档和测试反馈。同样，基于测试结果的“代码质量”限制的实现也是如此（它实际上更多地提醒人们运行测试，因为如果不查看测试覆盖率就无法通过测试检查代码质量）。如果测试未通过，则 git 服务器会拒绝 Refs。

    例如，我们要求在 上`master`，所有测试都必须通过或被跳过（遗憾的是，我们需要跳过，因为某些测试需要 OpenGL，这在 headless 上不可用），而`devel`如果测试只是“表现得像预期的那样”（即通过、跳过或预期失败，没有意外成功、错误或失败）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T01:41:31.033

是的，将它们保存在 git 中。我通过查看项目获得了其他约定，包括 phpunit 本身。（看一下教义 2 示例表明它似乎遵循相同的约定。）

我将测试保存在顶级`tests`目录中。在此之下，我对子目录进行了有意义的命名，通常遵循主项目目录结构。我有一个`functional`用于测试多个组件的子目录（如果适用）。

我创建`phpunit.xml.dist`告诉它在哪里可以找到测试（并立即告诉任何查看源代码的人我们使用 phpunit，并且通过查看 xml 文件，他们也可以理解约定）。

我不使用`@assert`或骨架生成器。感觉就像一个玩具功能；您在一个地方（您的源文件）进行一些输入以在另一个地方（您的单元测试文件）保存一些输入。但是随后您将扩展单元测试文件中的测试（请参阅我的下一段），甚至可能删除一些原始断言，现在`@assert`原始源文件中的条目已过时并误导任何只看的人那个代码。

您还失去了最终需要对真实世界类进行真实世界测试的大量功能（简单的 BankAccount 示例，我正在看着您）。没有`setUp()`/ `tearDown()`。没有实例变量。不支持所有其他内置断言函数，更不用说自定义函数了。没有`@depends`和`@dataProvider`。

反对`@assert`和维护一个单独的`tests`目录树的另一个原因是：我喜欢不同的人尽可能地编写测试和实际代码。当测试失败时，有时表明您的编码人员或测试人员对原始项目规范存在误解。当代码和测试紧密结合在一起时，很容易同时更改它们。尤其是在周五下午晚些时候，当你有约会的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T14:50:30.607

我们将测试与代码文件一起存储，因此开发人员可以看到要执行的测试，并确保他们根据需要更改测试。我们只需在文件中添加 .test 的扩展名。这样，我们可以简单地将原始文件自动包含在每个测试文件中，然后可以使用模板创建该文件。当我们发布代码时，构建过程会从所有目录中删除 .test 文件。

/application/src/
Foo.php
Foo.php.test

/application/src/CLASS/
FOO_BAR.class
FOO_BAR.class.test

`require_once(substr(__FILE__, 0, -5)); // strip '.test' extension`

# asp.net - 在 ASP.NET MVC 中创建对用户的外键引用

> ID：11070684
> 
> 赞同：3
> 
> 时间：2012-06-17T10:40:26.833
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-membership

我对 ASP.NET MVC 相当陌生，并且正在从事一个小项目，其中我有一个名为的表`Tests`，我想在表中添加一个外键`UserID`引用`aspnet_Users`。

最好的方法是什么？有什么推荐的方法吗？

我的测试模型中是否应该有一个 Guid 属性：

```
public virtual Guid UserID { get; set; } 
```

或者最好有一个导航属性：

```
public virtual ???? User { get; set; } 
```

哪种方法是最好的方法，以及如何实现它的任何提示？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:29:17.203

由于`UserID`in`sapnet_Users`确实是 a `Guid`（`uniqueidentifier`SQL Server 表中的 a），那么可以 - 如果要引用特定用户，则需要`Guid`手头有一个值。

如果您想拥有一个`User`直接引用该类型的导航属性 - 您需要确保`User`在您的应用程序中拥有 as 类型，并且您可能需要指定 FK 约束名称（在您拥有的任何数据模型中）。

我认为，这两种方法都有效。如果您只需要设置而不需要`Guid`其他任何东西 - 方法 #1 就可以了。

如果您需要读出（并可能设置）`User`该类的其他属性 - 那么我认为方法＃2 将是更好的选择，即使它涉及更多/更多的努力。

# android - 如何设置jpg图像的叠加叠加以实现透明度

> ID：11070686
> 
> 赞同：0
> 
> 时间：2012-06-17T10:40:35.070
> 
> 标签：android, image-processing, live-wallpaper

我需要在动态壁纸中叠加两个图像。叠加图像是需要设置为“加法”叠加的 jpg。它添加像素值而不是计算透明度。我怎样才能在android中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:11:54.050

您可以使用与**Canvas混合的 Android 的****Bitmap**和**Drawable**类，并尝试以下代码段中的内容：

 ****```
public static Drawable mergeImage(Drawable orig, Drawable over, int left, int top) {
    Bitmap original = ((BitmapDrawable)orig).getBitmap();
    Bitmap overlay = ((BitmapDrawable)over).getBitmap();
    Bitmap result = Bitmap.createBitmap(original.getWidth(), original.getHeight(), Config.ARGB_8888);
    Canvas canvas = new Canvas(result);
    Paint paint = new Paint();
    paint.setAntiAlias(true);

    canvas.drawBitmap(original, 0, 0, paint);
    canvas.drawBitmap(overlay, left, top, paint);

    return new BitmapDrawable(result);
} 
```*  *我已经使用上面的行编写了一个覆盖有“在线状态”的照片图像网格视图。希望它也对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:10:23.813

一种更通用的方法可能是使用您想要的[PorterDuffMode创建一个](http://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)[PorterDuffXfermode](http://developer.android.com/reference/android/graphics/PorterDuffXfermode.html)，然后将其设置在您与画布一起使用的[Paint对象上，如](http://developer.android.com/reference/android/graphics/Paint.html#setXfermode%28android.graphics.Xfermode%29)[mthama 的答案](https://stackoverflow.com/a/11070860/190711)中所引用但替换一些行。这使您可以根据需要使用其他 Porter-Duff 模式。

```
Paint paint = new Paint();
paint.setAntiAlias(true);
canvas.drawBitmap(original, 0, 0, paint);
paint.setXferMode(new PorterDuffXferMode(PorterDuff.Mode.OVERLAY));
canvas.drawBitmap(overlay, left, top, paint); 
```

请注意，我还没有尝试过，所以请使用 mthama 的回答。:)****

# java - 对象的通配符 在 Java6 中

> ID：11070688
> 
> 赞同：2
> 
> 时间：2012-06-17T10:40:48.677
> 
> 标签：java, swing, generics, wildcard, jcombobox

请如何纠正投射和删除警告

```
[unchecked] unchecked cast
required:   T
found:      java.lang.Object 
```

来自SSCCE

```
import java.awt.*;
import javax.swing.*;

public class JComboBoxWithWildCard {

    private JDialog dlg = new JDialog();
    private final Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");

    public JComboBoxWithWildCard() {
        JComboBox comboWithCustomRenderer = new FlexiComboBox<String>(
                "1 one", "2 two", "3 three", "4 four", "5 five", "6 six",
                "7 seven", "8 eight", "9 nine", "10 ten", "11 eleven") {

            private static final long serialVersionUID = 1L;

            @Override
            public String getCaption(String item) {
                return item;
            }

            @Override
            public Icon getItemIcon(String item) {
                return errorIcon;
            }
        };
        comboWithCustomRenderer.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXX");
        comboWithCustomRenderer.setMaximumRowCount(6);
        dlg.add(comboWithCustomRenderer);
        dlg.pack();
        dlg.setLocationRelativeTo(null);
        dlg.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dlg.setVisible(true);
    }

    public static void main(String[] a_args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JComboBoxWithWildCard pd = new JComboBoxWithWildCard();
            }
        });
    }
}

abstract class FlexiComboBox<T> extends JComboBox {

    private static final long serialVersionUID = 1L;

    public FlexiComboBox(T... items) {
        super(items);
    }

    @Override
    public void updateUI() {
        setRenderer(new DefaultListCellRenderer() {

            private static final long serialVersionUID = 1L;

            @Override
            public Component getListCellRendererComponent(JList list, Object value,
                    int index, boolean isSelected, boolean cellHasFocus) {
                Component result = super.getListCellRendererComponent(list,
                        getCaption((T) value), index, isSelected, cellHasFocus);
                Color color = getItemColor((T) value);
                if (color != null) {
                    result.setBackground(color);
                }
                if (result instanceof JLabel) {
                    ((JLabel) result).setIcon(getItemIcon((T) value));
                }
                return result;
            }
        });
        super.updateUI();
    }

    public abstract String getCaption(T item);

    public Color getItemColor(T item) {
        return null;
    }

    public Icon getItemIcon(T item) {
        return null;
    }
} 
```

编辑：

警告来自代码行

1.（代码行 70.th）

```
Component result = super.getListCellRendererComponent(list,
       getCaption((T) value), index, isSelected, cellHasFocus); 
```

2.（代码行 71.th）

```
Color color = getItemColor((T) value); 
```

3.（代码行 76.th）

```
((JLabel) result).setIcon(getItemIcon((T) value)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:19:08.490

存在警告是因为编译器无法确保`ClassCastException`不会抛出 a 。在这种情况下，以下将导致异常。

```
FlexiComboBox<Integer> box = new FlexiComboBox<Integer>();
box.addItem("BAD ITEM");
//then add the combobox to a panel and display it. 
```

虽然您不太可能编写公然违背您编写的类的意图的代码，但编译器会警告您该代码可能被滥用。

隐藏错误的方法是添加`@SuppressWarnings("unchecked")`到`getListCellRendererComponent`. 这告诉编译器您知道存在风险，但您不希望将它们报告为警告。

# exception - Haskell 中的异常是如何工作的？

> ID：11070690
> 
> 赞同：88
> 
> 时间：2012-06-17T10:40:53.963
> 
> 标签：exception, haskell

在 GHCi 中：

```
Prelude> error (error "")
*** Exception: 
Prelude> (error . error) ""
*** Exception: *** Exception: 
```

为什么第一个不是嵌套异常？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-06-17T16:29:05.047

答案是，这是*不精确异常的（有点令人惊讶的）语义*

当纯代码可以显示为一*组*异常值（即 `error`or的值`undefined`，并且明确*不是*[在 IO 中生成](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Exception.html)的那种异常）时，该语言允许返回该组的任何值。Haskell 中的异常值更像`NaN`是浮点代码，而不是命令式语言中基于控制流的异常。

即使是高级 Haskellers，偶尔也会遇到一个问题，例如：

```
 case x of
   1 -> error "One"
   _ -> error "Not one" 
```

由于代码评估为一组异常，GHC 可以自由选择一个。启用优化后，您可能会发现这总是评估为“不是”。

我们为什么要做这个？因为否则我们会过度限制语言的评估顺序，例如，我们必须为以下情况修复确定性结果：

```
 f (error "a") (error "b") 
```

例如，如果存在错误值，则要求从左到右进行评估。非常不合时宜！

由于我们不想削弱可以对我们的代码进行的优化以支持`error`，因此解决方案是指定结果是一组异常值中的非确定性选择：不精确的异常！在某种程度上，所有的异常都会被返回，并选择一个。

通常，您不关心 - 异常就是异常 - 除非您关心异常中的字符串，在这种情况下使用`error`调试非常混乱。

* * *

参考文献：[不精确异常的语义](http://research.microsoft.com/en-us/um/people/simonpj/papers/imprecise-exn.htm)，Simon Peyton Jones、Alastair Reid、Tony Hoare、Simon Marlow、Fergus Henderson。Proc 编程语言设计和实现 (PLDI'99)，亚特兰大。( [PDF](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.50.1525&rep=rep1&type=pdf) )

# java - 如何从 Java Web 服务返回数据库结果集

> ID：11070693
> 
> 赞同：-1
> 
> 时间：2012-06-17T10:41:29.503
> 
> 标签：java

我是 Java Web 服务的新手。我正在从数据库中获取记录，并且需要从 Web 服务返回我的结果集。根据我的阅读，结果集是一个接口，因此它不能用作返回类型。我知道 dotnet Web 服务有一种`DataSet`用于返回数据库记录的类型。java中有没有类似的东西？如果没有，谁能建议我应该使用什么来代替结果集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:46:49.250

如果您需要使用 Web 服务，则不要**使用**a`ResultSet`或任何其他`Java` *特定*构造，例如`ArrayList`等。
只需向客户端返回一个数组，`Records`其中每个数组条目都是一个自定义 ( `JAXB`) 类`Record`，它代表数据库中的一个条目/行。
只需使用数据库查询的结果填充服务器中的数组，然后将该数组作为结果返回给您的客户端

# windows - 我们可以在静态库中使用 C++/Cx（Metro 风格）吗

> ID：11070697
> 
> 赞同：1
> 
> 时间：2012-06-17T10:41:57.130
> 
> 标签：windows, windows-runtime, c++-cx, microsoft-metro

我正在尝试将本机 sdk 移植到 Windows RT 并帮助我实现缺少的功能来模拟注册表访问，因此我创建了一个静态库（文件->新建->项目...->静态库（ Metro Style 应用程序），我已经声明了这样的功能：

```
// WinRT stuff
#include <windows.storage.h>
#include <wrl/client.h>
#include <wrl/wrappers/corewrappers.h>

using namespace Microsoft::WRL;
using namespace Microsoft::WRL::Wrappers;
using namespace ABI::Windows::Storage;
using namespace ABI::Windows::Foundation;

LSTATUS
APIENTRY
RegOpenKeyExW(
    _In_ HKEY hKey,
    _In_opt_ LPCWSTR lpSubKey,
    _In_opt_ DWORD ulOptions,
    _In_ REGSAM samDesired,
    _Out_ PHKEY phkResult
    )
{
    LSTATUS ret = ERROR_SUCCESS;

    if (hKey == NULL)
        return ERROR_INVALID_HANDLE;
    if (phkResult == NULL)
        return ERROR_INVALID_PARAMETER;

    ABI::Windows::Storage::ApplicationDataContainer^ localSettings =
              ApplicationData::Current->LocalSettings;

...
} 
```

但是，当我尝试编译时，出现此错误：

```
1>c:\users\joe\documents\visual studio 2012\projects\lib1\lib1\oal.cpp(275): 
  error C3699: '^' : cannot use this indirection on type 
  'ABI::Windows::Storage::ApplicationDataContainer' 
```

我已经检查并启用了使用 Windows 运行时扩展 ( `/ZW`)（默认情况下），所以我想知道是否可以在静态库中使用 C++/CX？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:52:40.977

如果您在类型上使用 ABI 前缀，那么您指的是低级 C++ 类型。低级类型旨在与 WRL 一起使用，不能使用像 ^ 运算符这样的 C++/CX 扩展。

请改用 ComPtr localSettings。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:48:46.310

好的，有人告诉我添加 In Librarian->General->Additional Dependecies : %(AdditionalDependencies) 并且我已经删除了 ABI:: 命名空间。现在它起作用了;-)

# html - 如何使用动态宽度为单个字符的一部分设置样式？

> ID：11070700
> 
> 赞同：25
> 
> 时间：2012-06-17T10:42:26.960
> 
> 标签：html, css, overlay

## 问题

我可以只为单个角色的一部分设置样式吗？

## 意义

CSS 属性不能分配给部分字符。但是，如果您只想设置角色的某个部分的样式，则没有标准化的方法可以做到这一点。

## 例子

是否可以设计一个“X”，中间是红色，然后是黑色？

![预期结果](../Images/70f3e3e5b0cb8fcd9334b3d020b0e77e.png)

## 不工作的代码

```
<div class="content"> 
    X
</div> 
```

```
.content {
    position: relative;
    font-size: 50px;
    color: black;
}

.content:after {
    content: 'X';
    color: red;
    width: 50%;
    position: absolute;
    overflow: hidden;
} 
```

[**jsFiddle 上的演示**](http://jsfiddle.net/tYPqb/1/)

## 目的

我的意图是设计 Font Awesome[**`icon-star`**](http://fortawesome.github.com/Font-Awesome/#icon/icon-star)符号。如果我有一个动态宽度的叠加层，难道不能创建一个精确的分数可视化吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T10:42:27.800

在玩演示小提琴时，我自己想通了，想分享我的解决方案。这很简单。

## 首先要做[**的事：演示**](http://jsfiddle.net/v5xzJ/1/)

要部分设置单个字符的样式，您需要为内容添加额外的标记。基本上，您需要复制它：

```
<​div class="content"> 
    <span class="overlay">X</span>
    X
</div> 
```

使用 :after 或 :before 之类的伪元素会更好，但我没有找到办法。

覆盖需要绝对定位到内容元素：

```
​.content {
    display: inline-block;
    position: relative;
    color: black;
}

​.overlay {
    width: 50%;
    position: absolute;
    color: red;
    overflow: hidden;
}​ 
```

不要忘记`overflow: hidden;`为了切断“X”的剩余部分。

您可以使用任何宽度来代替，`50%`这使得这种方法非常灵活。您甚至可以使用自定义高度、其他 CSS 属性或多个属性的组合。

## **[扩展演示](http://jsfiddle.net/v5xzJ/2/)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T07:29:43.583

在您的解决方案上做得很好。我有一个`:after`在 Chrome 19 中使用（而不是复制 HTML 中的内容）的版本。

*   [http://jsfiddle.net/v5xzJ/4/](http://jsfiddle.net/v5xzJ/4/)

基本上：

1.  开启`position:relative`_`.content`
2.  `:after`绝对定位
3.  设置`:after`为`overflow:hidden`
4.  调整宽度、高度、文本缩进和行高`:after`以隐藏它的位。

我不确定它是否能很好地跨浏览器运行——这些`em`值可能会有所不同。（显然它在 IE 7 或更低版本中绝对行不通。）

此外，您最终不得不复制 CSS 文件中的内容而不是 HTML，这可能不是最佳的，具体取决于具体情况。

# javascript - 当我使用javascript单击链接时，如何在contact.html页面中设置表单元素的值？

> ID：11070701
> 
> 赞同：0
> 
> 时间：2012-06-17T10:42:27.067
> 
> 标签：javascript

我有两页：

1.  产品页面，其中包含产品，每个产品都有一个“给我们发送消息”链接；

2.  联系页面，有一个包含四个元素的表单：姓名、电子邮件、主题和消息；

当我单击 products.html 页面中的“向我们发送消息”链接时，我希望 contact.html 中表单的“主题”元素的值成为产品的标题。

所以，如果我有一个标题为“BMW 530xd 2009”的产品，当我点击它下面的“给我们发消息”链接时，我想给我发送 contact.html 页面和表单的“主题”字段用“BMW 530xd 2009”自动完成。

我如何用 javascipt 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:10:59.360

最好的方法是让字段已经设置了值，我不知道你在服务器端使用的技术......

无论如何，要使用 javascript 回答您的问题，您可以使用表单的处理程序**onsubmit**来完成这项工作

```
<form onsubmit="return fillProd(this)" ...
<input name="subject" .... 
```

时不时地让服务器端为我们提供值会很好，但是可以使用 DOM 函数或 jquery（或类似的东西）从文档 DOM 中获取客户端的值

假设你有像这样的产品标题

```
<div class="prod-title" id="prodtitle">BMW 530xd 2009</div> 
```

然后我们可以使用jquery获取值

```
$("#prodtitle").html 
```

或使用 DOM

```
document.getElementById("prodtitle").innerHTML 
```

使用 DOM 的函数示例

```
function fillProd(form) {
   form.subject.value=document.getElementById("prodtitle").innerHTML;
   return true;
} 
```

注意：返回的表单处理程序和函数（returning true）非常重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:15:59.440

当有人单击所述链接时，您可以使用ajax在products.html页面中加载contact.html表单，然后如果您正确处理所有内容，您将能够更改值，因为据我所知，您无法更改表单值使用客户端语言从一页到另一页。

另一种选择是直接在 contact.html 中编写表单，其 css 属性为 display:none; 因此，当有人单击链接时，它会更改为 display:block; 在您的 javascript 中处理值更改。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:25:44.173

像这样制作“发送消息”的链接：contact.html?subject=your_value_here

在contact.html上，您可以像这样检索值

```
if(location.search) {
   subject = location.search;
} 
```

并填充主题（我第一次错过了）

```
document.getElementById("id_of_subject_field").innerHTML = subject; 
```

这不是一个优雅的解决方案，但它应该可以解决问题。

# smalltalk - 当我在服务 http 请求时保存 Pharo 图像时会发生什么？

> ID：11070716
> 
> 赞同：4
> 
> 时间：2012-06-17T10:45:01.997
> 
> 标签：smalltalk, pharo, seaside

海边的书说：“在处理 http 请求时保存 [图像] 是您要避免的风险”。

为什么是这样？它是否只是暂时减慢了 http 请求的服务速度，或者请求会丢失或发生错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:58:35.017

看来这只是一个放慢速度的问题。在 Seaside 列表中有[一个相当详尽](http://forum.world.st/saving-an-image-while-serving-td3454105.html)的帖子，其中最相关的帖子是电子商务网站的[案例研究：](http://forum.world.st/saving-an-image-while-serving-tp3454105p3454200.html)

> 因此，目前会发生这种情况：
> 
> 1.  图像不时保存（通常是每天），并复制到单独的“备份”机器。
> 2.  如果发生任何不好的事情，最后一张图片会被抓取，然后重新输入自上次保存图片后发出的订单和/或礼券。
> 
> 而且，#2 很少做——*可能*一年两到三次，然后事实证明这通常是因为我做了一些愚蠢的事情。

此外，Smalltalk 的一大优点是运行快速实验非常容易。您可以下载 Seaside 并暂停其中一个示例的回调。例如：

```
WACounter>>renderContentOn: html
...
    html anchor
        callback: [ 
            self halt.
            self increase ];
        with: '++'.
... 
```

1.  在 Seaside 服务器上打开浏览器（默认为 8080 端口）
2.  单击“计数器”以转到示例应用程序
3.  点击“++”链接
4.  切换回海边。您将看到停止的预调试窗口
5.  保存图像
6.  单击“继续” 您会看到计数器正确递增，保存时没有明显的不良影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T12:12:45.107

在保存图像之前执行注册的关闭操作。这意味着源文件已关闭，Web 服务器已关闭。保存图像后，它会执行启动操作，这通常会再次启动 Web 服务器。根据服务器实现，打开的连接可能会关闭。

这意味着您在保存图像时无法接受新连接，并且打开的连接可能会被暂时挂起或关闭。对于这两个问题，（至少）有两个简单的解决方法：

1.  在保存之前使用 OSProcess 分叉图像（DabbleDB、CmsBox）。

2.  使用多个图像和负载平衡器，以便您可以在保存之前从活动服务器中一次删除一个图像。

# php - 在 Linux 中杀死 PHP 脚本中的所有相关进程

> ID：11070717
> 
> 赞同：0
> 
> 时间：2012-06-17T10:45:15.990
> 
> 标签：php, linux, bash, shell, process

假设我有一个 PHP 脚本，

```
//main.php -> PID = 1002
<?php 
exec('ProcessOne');
exec('ProcessTwo');
//... many other exec calls
?> 
```

main.php 使用自己的 pid 创建了许多其他进程，脚本可能不会记录/跟踪这些进程，但 main.php 的 pid 是已知的。

我的问题是：我如何通过只知道 main.php 的 pid（在我的示例中为 1002）来杀死所有由 main.php（包括 main.php）创建的进程？

该脚本应在 Linux 中运行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T10:50:37.910

```
pkill -TERM -P 1002 
```

`pkill -P PID`为您提供所有子进程，`-TERM`将`TERM`信号发送给所有子进程。

杀死孩子的孩子：

```
kill `pstree -p 1002 | sed 's/(/\n(/g' | grep '(' | sed 's/(\(.*\)).*/\1/' | tr "\n" " "` 
```

修改后的版本来自[遍历流程树](https://stackoverflow.com/questions/5213973/walking-a-process-tree/5311362#5311362)。

# r - 如何调试他们通过 eval 等调用的函数

> ID：11070718
> 
> 赞同：2
> 
> 时间：2012-06-17T10:45:17.130
> 
> 标签：r

我不知道如何调试结构，例如：

```
fun1 <- function(obj){
   a<-c(obj,4)
   c(a,5)
}

fun <- function(obj){
   a <- match.call()
   a[[1L]] <- fun1
   return(eval.parent(a))
} 
```

我想知道如何指示调试模式跟随调用`eval.parent(a)`并跳转到`fun1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:17:10.603

根据调试帮助页面：“如果您想调试一个不是从一开始就开始的函数，请使用`trace(..., at = *)`or `setBreakpoint`。”

```
> trace(eval.parent)

> fun(4)
trace: eval.parent(a)
[1] 4 4 5 
```

或者您可能想发出警告并使用它来触发浏览器。在这一点上很难说你在期待什么。

# sts-springsourcetoolsuite - 将 SpringSource 与 XAMPP 服务器集成

> ID：11070721
> 
> 赞同：0
> 
> 时间：2012-06-17T10:45:57.380
> 
> 标签：sts-springsourcetoolsuite, tcserver

请问有没有办法将XAMPP Tomcat Server 添加到Server 项目文件夹下的SpringSource Tool Suite 的服务器列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:25:05.510

据我所知，XAMPP 堆栈没有 Tomcat，而是一个 Apache Web 服务器。

对于 Tomcat，是的，您可以在 STS 中配置它，查看此[视频](http://www.youtube.com/watch?v=h-yKgQtpbco)。虽然视频对 Eclipse 进行了解释，但 STS 也将类似！

# c# - 根据选项卡项目模板不同的选项卡样式？

> ID：11070724
> 
> 赞同：2
> 
> 时间：2012-06-17T10:46:22.497
> 
> 标签：c#, .net, wpf

我有一个带有两个不同潜在项目模板的选项卡控件：

```
<TabControl ItemTemplateSelector="{StaticResource tabTemplateSelector}"/> 
```

现在，我也有它的样式：

```
<Style TargetType="{x:Type TabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                ... 
```

问题是，我希望选项卡项样式模板根据`ItemTemplateSelector`. 我怎样才能做到这一点？基本上，我不希望将整个样式规则应用于每个选项卡项，只是那些具有特定选项卡项模板的选项卡项。

**更新：**为了更清楚，样式已`TargetType`设置为`TabItem`. 我只想将该样式应用于那些具有特定项目模板的选项卡项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T13:27:39.360

`ContentPresenter`中的将`ControlTemplate`显示 中的内容`ItemTemplate`。因此，您将无法`Template`从`ControlTemplate`.

相反，您可以使用 a`DataTrigger`来设置`Template`. 将`DataTrigger`检查`ItemTemplate`将生成的是否应该有另一个`Template`。

你可能需要一个转换器，但这里是一个简单的例子。假设如果等于“Tab 2”，则`ItemTemplateSelector`返回另一个。然后你的看起来像这样`DataTemplate``Name``Style``DataTrigger`

```
<Style TargetType="TabItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TabItem">
                <!-- Your first Template -->
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <DataTrigger Binding="{Binding Name}" Value="Tab 2">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <!-- Your other Template -->
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# node.js - Node.js 使用外部 JS 文件？

> ID：11070728
> 
> 赞同：1
> 
> 时间：2012-06-17T10:47:01.403
> 
> 标签：node.js, module, include, require, phpjs

实际上我在 Node.js 下使用节点爬虫。然后我目前需要使用[PHPJS](http://www.phpjs.org) (An External Javascript File) 的方法。如何将该 JS 文件添加或包含到 NODE.JS 环境中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T15:31:14.870

您可以下载其中一个 CommonJS 文件（此处：[http://phpjs.org/packages/index](http://phpjs.org/packages/index)），将其保存在本地，并像标准 NodeJS 模块一样需要它：

var php = require('文件名');

php.md5(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:18:42.787

就像任何其他文件一样，除了它可能会上升几个级别？：

`enter code here`要求（'../../path/to/whatever.js'）;

# javascript - Javascript：脚本标签的有趣字符串连接

> ID：11070729
> 
> 赞同：0
> 
> 时间：2012-06-17T10:47:07.983
> 
> 标签：javascript, chromium

> **可能重复：**
> [为什么用 document.write() 编写 <script> 标签时要拆分它？](https://stackoverflow.com/questions/236073/why-split-the-script-tag-when-writing-it-with-document-write)

浏览一些[Chromium 源](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/LayoutTests/http/tests/security/resources/libwrapjs.js)（见第 45 行），我发现：

```
in_script_tag: function(code) {
  return "<script>" + code + "</scr" + "ipt>";
}, 
```

有谁知道作者为什么选择`"</scr" + "ipt>"`over `"</script>"`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T10:47:39.360

在`<script>`标签内`</script>`结束它，无论它出现在哪里。

**例子：**

```
<script>
alert('</script>');
// anything here will not be executed anymore
</script> 
```

原因很简单，浏览器对 JavaScript 字符串等一无所知，所以当它看到`</script>`它时总是关闭`<script>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:48:16.077

因为每次 HTML 解析器看到`</script`，它都会自动认为 javascript 片段已完成。)

# python-3.x - tkinter 的 askopenfilename 的替代方案

> ID：11070734
> 
> 赞同：1
> 
> 时间：2012-06-17T10:48:20.263
> 
> 标签：python-3.x, ubuntu, tkinter, file-browser

目前我在 Ubuntu 的快速列表编辑器中使用`tkinter`'s来获取文件的名称和位置。`askopenfilename`虽然它工作正常，但外观和感觉不是原生的。

是否有一个简单的替代对话窗口来导航和获取文件的名称和位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:09:57.940

您可以尝试使用 wxPython FileDialog：

```
>>> import wx
>>> d = wx.FileDialog(None)
>>> d.ShowModal()
5101
>>> 
```

它提供了更特定于操作系统的外观

wxPython 即将作为 Phoenix 项目到达 py3k，并且已经有 windows 和 mac 的快照（请参阅下面的我的评论）。如果你想要更稳定的东西，你可以使用 pyQt `QtGui.QFileDialog`。

```
import sys
from PyQt4 import QtGui

class Dialog(QtGui.QMainWindow):
    def __init__(self):
        super(Example, self).__init__()
        filename = QtGui.QFileDialog.getOpenFileName()
        print filename

app = QtGui.QApplication(sys.argv)
dialog = Dialog() 
```

你有一个更完整的例子[here](http://zetcode.com/tutorials/pyqt4/dialogs/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T08:48:22.480

### 禅度

Zenity 的[文件选择对话框](https://help.gnome.org/users/zenity/stable/file-selection.html.en)通过选项提供了一个简单且具有原生外观的解决方案`--file-selection`。该对话框提供了许多选项。

另请参阅[Zenity 的手册页](http://manpages.ubuntu.com/manpages/quantal/man1/zenity.1.html)。

最简单的形式：

[![在此处输入图像描述](../Images/959c4c44b6803b8fcf5a15c1c58102c3.png)](https://i.stack.imgur.com/VmaeL.png)

```
#!/usr/bin/env python3
import subprocess

try:
    file = subprocess.check_output(["zenity", "--file-selection"]).decode("utf-8").strip()
    print(file)
except subprocess.CalledProcessError:
    pass 
```

### Gtk 的 FileChooserDialog

另一种选择是[Gtk 的 FileChooserDialog](http://python-gtk-3-tutorial.readthedocs.org/en/latest/dialogs.html)，正如人们所期望的那样，它会产生完美的本地文件选择器对话框窗口。

# .net - 在 WPF 应用程序中处理数据网格

> ID：11070735
> 
> 赞同：0
> 
> 时间：2012-06-17T10:48:52.527
> 
> 标签：.net, xml, wpf, drop-down-menu, datagrid

我真的需要帮助...

我正在构建一个应用程序，我需要在数据网格中有一些东西。

我想让数据网格有下拉列表，这些列表将根据其他下拉值而改变，也取决于以前的值。我可以应付这个 ...

我想知道如何知道如何创建数据网格，即如何添加列（静态）、行（动态）。

主要是将数据存储在 XML 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:06:11.390

你可以做这样的事情 -

```
//Load XML file and set the DataGrid data context
XElement mymusic = XElement.Load("mymusic.xml");
dg1.DataContext = mymusic.Elements("Album"); 
```

xml:

```
<toolkit:DataGrid Name="dg1" ItemsSource="{Binding}"  >
    <toolkit:DataGrid.Columns>
        <toolkit:DataGridTextColumn Header="Album Title" Binding="{Binding Path=Attribute[Title].Value}" HeaderStyle="{StaticResource MyHeaderStyle}" />
        <toolkit:DataGridTextColumn Header="Artist" Binding="{Binding Path=Attribute[Artist].Value}" HeaderStyle="{StaticResource MyHeaderStyle}"/>
        <toolkit:DataGridTextColumn Header="Release Date" Binding="{Binding Path=Attribute[ReleaseDate].Value}" HeaderStyle="{StaticResource MyHeaderStyle}" />
    </toolkit:DataGrid.Columns>
</toolkit:DataGrid> 
```

查看这篇文章了解更多详情 -

[使用 XML 数据的 DataGrid 示例](http://blogs.msdn.com/b/wpfsdk/archive/2008/11/25/a-datagrid-sample-using-xml-data.aspx)

# javascript - 让 div 元素贴在屏幕顶部

> ID：11070740
> 
> 赞同：2
> 
> 时间：2012-06-17T10:49:12.167
> 
> 标签：javascript, css

我写了一个脚本来检测我何时到达导航栏的 div 元素，然后我将它的 css 更改为位置固定和顶部 0，因此它将固定到顶部，它不这样做的问题，它就像滚动到顶部一样，它跳到屏幕的开头。（闪烁）

Javascript

```
 var currentScrollTop = 0;
        var barMenuOriginalTopPos = $('#navigation').offset().top;
        console.log('original:' + barMenuOriginalTopPos);
        $(window).scroll(function() {

            currentScrollTop = $(window).scrollTop();
            console.log(currentScrollTop);
            if(currentScrollTop >= barMenuOriginalTopPos && $('#navigation').hasClass('fixElementToTop') == false){
                $('#navigation').addClass('fixElementToTop');
            }
            else if(currentScrollTop < barMenuOriginalTopPos && $('#navigation').hasClass('fixElementToTop') ){
                $('#navigation').removeClass('fixElementToTop');
            }
        }); 
```

CSS

```
.fixElementToTop { position: fixed; top:0; z-index:100;} 
```

为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:21:58.820

这是一个通过 jQuery 插件实现的*非闪烁解决方案：*

```
$(document).ready(function() {
    $('#fixedElement').scrollToFixed({ marginTop: 0 });
}); 
```

**实时示例**：[http ://bigspotteddog.github.com/ScrollToFixed/](http://bigspotteddog.github.com/ScrollToFixed/)
**插件网站**：[https ://github.com/bigspotteddog/ScrollToFixed/](https://github.com/bigspotteddog/ScrollToFixed/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:58:34.950

屏幕顶部的 CSS 固定栏

```
<div style="position:fixed;top:10px;left:10px">Nav bar</div> 
```

审查：

对不起，我不明白你最初的问题，在这里，为了避免它轻弹你应该从一个固定的位置开始对象，让我们说：

```
<div style="height:120px">XXX</div>
<div id="navigation" style="position: fixed; top:120; z-index:100;">Navigation</div>
<div class="win" style="border: 1px solid; height: 900px;"></div> 
```

编码：

```
$(window).scroll(function() {
    currentScrollTop = 120-$(window).scrollTop();
    console.log(currentScrollTop);
    if (currentScrollTop<0) currentScrollTop=0
    $("#navigation")[0].style.top=currentScrollTop+"px";
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T10:58:38.417

设置此行

```
var barMenuOriginalTopPos = $('#navigation').offset().top; 
```

作为

```
var barMenuOriginalTopPos = $('#navigation').offset().top + 6; 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/7xwxE/1/)**

# java - 如何使用Java反射设置接口字段

> ID：11070744
> 
> 赞同：2
> 
> 时间：2012-06-17T10:50:01.013
> 
> 标签：java, reflection, jboss, jboss7.x

我正在使用 Jboss 7.1.1.final，并且我有一个大量使用 JMS 的应用程序。在做了一些性能测试之后，我发现每当我收到一定数量的消息时，应用程序就会开始失败，因为没有足够的队列会话。

经过一番研究，我发现这个 JMS 属性只在 jboss 版本 7.1.2 中公开（见[这里](https://community.jboss.org/message/741062#741062)）。

由于出于法律原因，我目前无法使用此版本（或修复它的特定版本），因此更改它的唯一其他方法是使用反射。所以我下载了Jboss源代码并开始使用它，现在我有几个问题：

首先我发现我需要的类`org.jboss.as.messaging.CommonAttributes`实际上是一个接口，它有这一行：

```
 SimpleAttributeDefinition CONNECTION_THREAD_POOL_MAX_SIZE = new SimpleAttributeDefinition("thread-pool-max-size",
        new ModelNode().set(HornetQClient.DEFAULT_THREAD_POOL_MAX_SIZE), ModelType.INT,  true, MeasurementUnit.NONE); 
```

1.  `ClassLoader.getSystemClassLoader()`会给我加载类所需的类加载器吗？
2.  如何使用反射设置接口字段值？（该`Field.set()`方法需要一个对象实例，因为它是一个接口，我无法实例化它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:16:42.430

您正在谈论[这段](http://grepcode.com/file/repo1.maven.org/maven2/org.jboss.as/jboss-as-messaging/7.1.1.Final/org/jboss/as/messaging/CommonAttributes.java#CommonAttributes.0CONNECTION_THREAD_POOL_MAX_SIZE)代码。我必须让你失望：接口根本没有字段。它们只有方法声明，没有实现。

您所看到的实际上`public static final`（所有这些关键字对于接口内部的“字段”都是隐含的）在接口主体中定义的常量。但是接口仅用作它们的命名空间，它们不是*真正的*字段。实现此类接口的类不会继承这些字段并拥有自己的变量副本。它们只是常数。

话虽如此 - 你不能做任何事情，至少在这个界面上是这样。

# java - Clojure：Java 的 CSS / DOM 类 UI

> ID：11070752
> 
> 赞同：6
> 
> 时间：2012-06-17T10:51:43.227
> 
> 标签：java, user-interface, clojure

## 笔记：

答案不是clojurescript。我想用 Clojure 编写代码，而不是 ClojureScript。

## 语境：

我更喜欢用于用户界面的 CSS/DOM 模型，而不是喜欢 Java 的 Graphics2D。

## 问题：

是否有某种方式/某个项目将某种 WebKit 嵌入到 Java 应用程序中？我希望能够用 Java 编写代码，但也能够拥有一个我可以通过 CSS/DOM 控制/操作的 GUI。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T19:29:55.067

[JavaFX 2.0 场景图](http://docs.oracle.com/javafx/2/scenegraph/jfxpub-scenegraph.htm)在概念上与 DOM 有点相似，您可以[使用 CSS 对其进行蒙皮](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)。

有一个 Java API，因此您应该能够从 Clojure 相当轻松地使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T05:48:05.703

它不完全是 CSS/DOM，但[跷跷板](http://github.com/daveray/seesaw)允许使用类似 CSS 的选择器查询 Swing 小部件层次结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T10:04:56.070

[您可以在此处](http://clojure-libraries.appspot.com/cat/GUI)找到或多或少成熟的 GUI 库列表。

上述跷跷板可以安装。GUIFTW 使用类似 CSS 的样式表来描述 UI，也可以满足您的需求，但它已经一年没有更新了。

# android - android：复制到相同文件名的不同图像始终显示第一个图像

> ID：11070757
> 
> 赞同：3
> 
> 时间：2012-06-17T10:53:02.447
> 
> 标签：android, image, caching

我将图像从服务器复制到具有恒定文件名的本地文件。然后我使用

```
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(constantFileName), mime);
startActivity(intent); 
```

到目前为止，这行得通。但随后我将另一个图像复制到同一个本地文件并想要显示它：而不是新图像，而是显示旧图像 - 这看起来像文件名相关缓存。如何防止这种缓存？

# windows - 是否有任何解决方法可以在没有美国 SMS 号码的情况下注册 Windows azure 免费试用版？

> ID：11070759
> 
> 赞同：0
> 
> 时间：2012-06-17T10:53:19.337
> 
> 标签：windows, azure

我想注册windows azure免费试用，但是下拉列表中没有中国选项，我

有信用卡。但是我没有美国短信号码，没有美国短信号码怎么注册

?

看看我的另一个问题：[https ://stackoverflow.com/questions/11070631](https://stackoverflow.com/questions/11070631)

**更新：**

我认为这不是题外话，因为stackoverflow充满了程序员，这个问题是

与windows azure开发相关。

如果这是题外话，我应该在哪里问这个问题？

为此，我的帐户被禁止提问....

请投票支持我的反应式帐户，或告诉我如何反应式....

[https://meta.stackexchange.com/questions/86997](https://meta.stackexchange.com/questions/86997)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:06:37.900

我已经用非美国号码注册了。尝试在电话号码前写下您的拨号国家代码。

# html - 如何在不影响非空图像的情况下调整空图像的大小？

> ID：11070760
> 
> 赞同：0
> 
> 时间：2012-06-17T10:53:27.093
> 
> 标签：html, css

我想将空图像的大小固定为`150px`. 在 Firefox 上，我可以使用`float: left`，但它在 Google Chrome 上不起作用。

HTML：

```
<div>
 <img src='some broken url' alt='no image'>
 <br>
 <img src='http://farm7.staticflickr.com/6063/6046604665_da6933bd10.jpg'>
</div> 
```

CSS：

```
div {
    width: 450px;
    height: 500px;
    background: cyan;
}

img {
    display: block;
    max-width: 100%;
    min-height: 150px;
    min-width: 150px;
    background: grey;
} 
```

是否有针对此的 CSS 解决方案？

我认为有些误解。srcs 应该是我不知道的随机 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:58:33.567

如果要设置空图像标签的样式：

```
img[src=""] { width: 150px; } 
```

应该可以工作，期待 IE6。

如果您想让它跨浏览器兼容，@Tom 的解决方案[将](https://stackoverflow.com/questions/11070760/how-to-size-empty-image-without-affecting-non-empty-image/11070783#11070779)是您的最佳选择。

* * *

或 jQuery 解决方案（因为 CSS 无法检查损坏的 URL）：

```
$('img').error(function(){
    $(this).css('width', '150px');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T10:57:22.380

理想情况下，为此使用空占位符`<div>`：

```
<div>
 <div><!----></div>
 <br>
 <img src='http://farm7.staticflickr.com/6063/6046604665_da6933bd10.jpg'>
</div> 
```

...并给它你需要的尺寸。这将允许您执行诸如在其位置显示背景占位符图像等操作。

# objective-c - 使用 Core Data 迁移将一对多关系更改为一对一

> ID：11070766
> 
> 赞同：2
> 
> 时间：2012-06-17T10:54:58.543
> 
> 标签：objective-c, cocoa-touch, core-data, ios5, migration

当我尝试将我的数据模型从旧迁移​​到新时，我遇到了一些问题。几个星期以来，我一直在网上搜索并试图找到解决此问题的方法，但仍然没有运气。

这是我的数据模型之前的样子：

```
A <<--->> B
  <<--->> C 
```

之后：

```
A <<---> B
  <<---> C 
```

如您所见，实体 A 到 B 和 A 到 C 之间的关系从多对多关系变为多对一。问题是让迁移工作。如果我尝试使用轻量级迁移，我会在控制台中得到它（以及许多其他东西）：

> 不能从一对多映射到一对一关系。

在考虑文档时，这是有道理的。所以我猜测我需要使用映射模型和自定义迁移策略来处理关系更改。如果我使用自动生成的映射模型，我只会收到“未解决的错误”，并且在日志中大约一半时，它说找不到要迁移的映射模型。我假设这就像一个通用的错误描述，因为对模型的微不足道的更改（即更改某些东西的名称）有效（这意味着它确实可以找到映射模型）。所以我的问题是：如何让映射模型正确迁移商店？你能描述一下我需要做什么来完成这个吗？我猜我需要使用这种方法：

```
- (BOOL)createRelationshipsForDestinationInstance:(NSManagedObject *)dInstance entityMapping:(NSEntityMapping *)mapping manager:(NSMigrationManager *)manager error:(NSError *__autoreleasing *)error 
```

在自定义策略中，但是在此方法中我需要什么代码才能使其工作（如果您甚至可以对其进行概括）？

顺便说一句，我使用的是 Xcode 4.3.2，这个应用程序的最低 iOS 要求是 iOS 5。

在此先感谢您的帮助。

# html - 在 CSS 中使用图案覆盖背景

> ID：11070770
> 
> 赞同：0
> 
> 时间：2012-06-17T10:55:48.453
> 
> 标签：html, css

我已使用以下 css文件`bg.jpg`以`repeat-x repeat-y`.`dots.png`

```
*{
    margin: 0;
    padding: 0;
}
body {
    margin: 0px;
    padding: 0px;
    color: #666;
    font-family: comfortaa;
    font-size: 13px;
    line-height:1.5em; 
    background-color: #fff;
    width: 100%;
    height: 100%;
    background: url(../images/bg.jpg) no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
#header {
    width: 100%;
    height: 17%;
    background: url(../images/header.png) no-repeat;
    -webkit-background-size: contain;
    -moz-background-size: contain;
    -o-background-size: contain;
    background-size: contain;
}
#dots{  
    width:100%;
    height:100%;
    position:fixed;
    top:0px;
    left:0px;
    background:transparent url(../images/dots.png) repeat-x repeat-y top left;
    opacity:0.6;
} 
```

然后我像这样编写了 index.php：

```
<html>
<head>
    <title>My test page</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
</head>
<body>
   <div id="header"></div>
   Under Construction
   <div id="dots"></div>
</body>
</html> 
```

但模式没有重叠。我能做些什么来解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:10:43.843

改变：

```
background:transparent url(../images/dots.png) repeat-x repeat-y top left; 
```

到：

```
background:transparent url(../images/dots.png) top left; 
```

默认行为是重复 x 和 y；给它两个参数实际上是不正确的。

这是一个 JSFiddle 可以看到它的实际效果：http: [//jsfiddle.net/XsDjy/](http://jsfiddle.net/XsDjy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:01:45.287

`Height: 100%`就像`0px`你没有在 div 里面填充一些东西......所以我建议你给一个固定的高度，`1px`也足以看到这些点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T11:08:54.460

这只是{背景：重复；}，而不是 -x 和 -y。

[http://jsfiddle.net/XNeDK/](http://jsfiddle.net/XNeDK/)

# php - 移动到新目录后“无法解析请求”

> ID：11070771
> 
> 赞同：0
> 
> 时间：2012-06-17T10:55:48.700
> 
> 标签：php, yii, yii-components

我有一个运行正常的网站，现在为了设置一个测试环境，我将整个结构复制到一个子文件夹中。所以我有 var/www/beta/ 而不是 var/www。

这在我的旧服务器上有效，但在我的新服务器上它向我抛出“无法解决请求”错误。我已经更改了所有权限并检查了文件的链接。主页正确显示，但是当单击更深入站点的链接时，它会给我 404 错误。

当我设置默认控制器时，链接将起作用。当我尝试自己访问该网址时，它不会，我在想我的 urlManager 出了点问题？（所以 www.website.com/xx/yy/2 不会工作，但 defaulController = 'xx/yy/2'; 去 www.website.com 会显示页面）

任何帮助/见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T22:17:48.403

如果您使用的是 apache，则需要更新 RewriteBase，如下所示：

在 var/www/beta/.htaccess 中，添加：

```
RewriteEngine On
RewriteBase /beta/ 
```

这应该这样做。

# java - 为什么数组不能在一对多关联中延迟加载？

> ID：11070774
> 
> 赞同：5
> 
> 时间：2012-06-17T10:56:26.617
> 
> 标签：java, hibernate, jpa

根据[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch21.html#performance-collections-mostefficientupdate)：

> 在观察到**数组不能是惰性**的之后，您可以得出结论，列表、映射和 idbags 是性能最高（非逆）的集合类型

所以我的问题很简单：为什么数组不能在一对多关联中延迟加载？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:11:53.937

延迟加载的工作原理是 Hibernate 使用可以代理的结构来了解您何时尝试访问数据。当你这样做时，这些结构会告诉 hibernate 他们现在需要加载信息，然后 Hibernate 会在你不知道发生了什么的情况下即时执行此操作。

数组不能延迟加载，因为 Hibernate 无法知道您第一次尝试访问它们，因为您无法代理“[]”运算符（`aaload`字节码），Hibernate 永远不会知道什么时候您首先尝试访问它，因此它无法即时加载它。

使用集合时，您总是必须通过它们的方法访问它们，因此当您第一次尝试访问它们然后加载它们时，Hibernate 可以 100% 确定。

因此，真正的原因是无法将您的代码与数组访问运算符挂钩。字段的延迟加载也是如此，Hibernate 不能延迟加载具有仅字段访问权限的非集合属性，因为它不知道您何时尝试访问该字段，它们始终需要具有 get/set 方法访问权限。

作为如何完成此操作的示例，您可以检查`PersistentList`Hibernate 上的集合，在它的[`indexOf`](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/collection/internal/PersistentList.java#L353)方法（以及许多其他`read`方法）上调用该方法：

```
public int indexOf(Object value) {
    read();
    return list.indexOf(value);
} 
```

最后，[`read`](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/collection/internal/AbstractPersistentCollection.java#L112)如果还没有延迟加载，该方法只会初始化集合。

# r - POSIXct 轴上的彩色 vlines 与 ggplot2 中的不同数据集

> ID：11070776
> 
> 赞同：1
> 
> 时间：2012-06-17T10:57:00.003
> 
> 标签：r, ggplot2, time-series

我想用另一个 data.frame 中的发布日期注释我的错误图，但我希望 vline 的颜色与相应的原始跟踪的颜色相匹配

```
# first create some dummy data
set.seed(123)
N <- 100
adf <- data.frame(version=sample(c('A','B','C'), N, replace=TRUE),
              cs=as.POSIXct('2011-06-01 00:00') + rnorm(N, 20, 70)*86400)
# lets just shift things slightly, depending on version
adf$cs <- adf$cs + (as.integer(adf$version) - 1)*5e6
adf <- adf[order(adf$cs),]
library(plyr)
adf <- ddply(adf, .(version), function(bdf) { cbind(bdf, bugno=1:nrow(bdf)) } )

# now lets plot these bug curves by version
library(ggplot2)
q <- qplot(cs, bugno, data=adf, geom='line', colour=version,
  xlab='', ylab='Number of Bugs')
print(q)

# however I'd like to annotate these plots by adding the 
# dates of "release", with the colour matching that of release 
# in the plot q, so no further annotation necessary (hopefully!)
g.res <- data.frame(version=c('A','B','C'),
                releasedate=c(as.Date('2011-06-01'), as.Date('2011-10-01'),
                              as.Date('2012-01-01')))
# works... but only in blue...
q + geom_vline(data=g.res, aes(xintercept=as.POSIXct(releasedate)), col="blue") 
```

我知道[每天中午 ggplot2 图表的轴中断](https://stackoverflow.com/questions/10321926/axis-breaks-at-noon-each-day-of-ggplot2-chart)以及[如何将垂直 geom_vline 获取到上课日期的 x 轴？](https://stackoverflow.com/questions/5388832/how-to-get-a-vertical-geom-vline-to-an-x-axis-of-class-date)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:57:00.983

既然我已经把所有这些工作都放在了这个问题上，我刚刚意识到了答案……颜色必须是 aes 的一部分！我对aes的工作原理还没有正确的理解，我得再看一遍书！:-)

```
q + geom_vline(data=g.res, aes(xintercept=as.POSIXct(releasedate), col=version) ) 
```

# php - 使用 cURL 登录网站

> ID：11070794
> 
> 赞同：2
> 
> 时间：2012-06-17T11:00:01.823
> 
> 标签：php, curl, login

我目前正在尝试编写一个脚本，该脚本将使用 cURL 连接到一个站点。

我寻找了这样做的方法，并尝试了 cookie，但我不知道登录 cookie 是什么 cookie...如果有人可以帮忙谢谢...

但我尝试了另一种方法......使用 CURLOPT_POSTFIELDS 但我发现该网站在登录表单上使用 GET（什么？！）所以我尝试了这个：

```
$username="User"; 
$password="Pass"; 
$url="http://www.site.com/register/?action=login&user=".$username."&password=".$password;
$ch = curl_init(); 
    curl_setopt ($ch, CURLOPT_URL, $url); 
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
    curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec ($ch);
echo $result;  
curl_close($ch); 
```

但它没有用......有没有办法以不同的方式登录网站？该网站有“method=GET”，但它并没有真正使用 get...

```
<form method="get" action="/register/" name="connectform">
            <input type="hidden" name="action" value="login"/><input type="hidden" name="returnpage" value=""/>
            <ul class="login_form">
                <li><label>login :</label> <input type="text" name="login_login" maxlength="24" value="" class="input2"/><span class="error"></span></li>
                <li><label>Password :</label> <input type="password"  name="login_password" maxlength="24" value="" class="input2"/><span class="error"></span></li>
            </ul>
            <div class="login_button" style="display:inline-block">
                <a class="small_button" onclick="javascript:document.connectform.submit()"><span>Connect to my account</span></a>
                <input type="submit" style="display:none" />
            </div>  
            </div>
            </form> 
```

我该怎么办？我不在乎这些方式中的哪一种你会帮助我，但我更喜欢饼干方式……非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:04:05.050

尝试使用以下网址：

```
$url = 'http://www.site.com/register/?action=login&login_login='.$username.'&login_password='.$password; 
```

还要添加这些选项：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);    // return the content (often default)
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);    // follow redirects 
```

如果您想访问需要上述登录的其他页面，请使用以下选项：

```
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookies.txt');    // send saved cookies
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookies.txt');     // save cookies 
```

解决方案：看下面的评论。

# extjs - exrjs4树面板设置节点参数

> ID：11070795
> 
> 赞同：1
> 
> 时间：2012-06-17T11:00:09.057
> 
> 标签：extjs, parameters, extjs4, treenode

我这里有问题，也许任何人都可以帮助我:)

我有一个来自我的 PHP 文件的响应，我将使用的主要字段是“id”和“kode_jabatan”。但我想要的是单击树节点，我想将“kode_jabatan”而不是“id”字段发布到参数。有没有我错过的任何技巧或任何文件？代码如下：

```
var treeStore = Ext.create('Ext.data.TreeStore', {
        proxy: {
            type: 'ajax',
            url: 'func/mainFunction.php?get=menu',
            actionMethods: {
                create: 'POST',
                read: 'POST',
                update: 'POST',
                destroy: 'POST'
            }
        },
        nodeParam:'kode_jabatan',
        folderSort:true,
        root: {
            text: 'Struktur Organisasi',
            id: '(2010-01)',
            expanded: true
        }
});

Ext.create('Ext.tree.Panel', {
           store: treeStore,
           title: 'Menu Utama'
}) 
```

![树面板的屏幕截图](../Images/2cf00c7d347e62a2e7d8f8666eae6ddb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:14:05.127

将 beforeload 事件添加到您的树存储中，您可以从操作参数访问当前请求节点，当我需要多个参数时，我必须在我的代码中执行此操作：

```
var treeStore = Ext.create('Ext.data.TreeStore', {
        proxy: {
            type: 'ajax',
            url: 'func/mainFunction.php?get=menu',
            actionMethods: {
                create: 'POST',
                read: 'POST',
                update: 'POST',
                destroy: 'POST'
            }
        },
        nodeParam:'kode_jabatan',
        folderSort:true,
        root: {
            text: 'Struktur Organisasi',
            id: '(2010-01)',
            expanded: true
        },
        listeners: {
            beforeload: function(store, operation, eOpts){
            var kode_jabatan = operation.node.get("kode_jabatan");
            operation.params.node = kode_jabatan;
    }
}); 
```

基本上，您可以通过在 operation.params.[whatever you want] 对象中设置新属性来将任何参数添加到您想要的请求中。

# c - 使用 strtok 将字符串划分为 C 中的数组

> ID：11070799
> 
> 赞同：1
> 
> 时间：2012-06-17T11:00:57.423
> 
> 标签：c, string, strtok

我正在制作一个小程序，其中用户键入“print 1 2”或“open file1”之类的命令，为了处理用户想要做的事情，我试图在每个空间使用`strtok`. 我的问题是以下代码：

```
void tokenize(char string[100],char tokenized[10][MAX_CHARS]){
    char delims[] = " ";        /*Delimitere is a space so tokenize when a space occurs*/
    char *result = NULL;
    int count = 0;
    result=strtok(string,delims);   /*Tokenize the string*/
    while(result!=NULL && count<10){
        tokenized[count++][MAX_CHARS] = result;  /* This is where I get the error */
        result= strtok(NULL,delims);
    }
} 
```

我收到此错误：

```
stringapi.c: In function ‘tokenize’:
stringapi.c:33:33: warning: assignment makes integer from pointer without a cast [enabled by default] 
```

我一直试图解决这个问题一段时间没有运气。
我试过`tokenized[count++] = result;`了，但这给了我以下错误：

```
stringapi.c:33:22: error: incompatible types when assigning to type ‘char[80]’ from type ‘char *’ 
```

我的最终目标是，如果用户键入“open newfile.txt”，我想要一个 `array[0]`打开的数组，并且`array[1]`是 newfile.txt，然后我可以相应地处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:06:44.340

以下行：

```
tokenized[count++] = result; 
```

尝试分配给一个字符数组。[你不能这样做](http://c-faq.com/aryptr/arrayassign.html)，你必须使用[`strncpy()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strncpy.html)：

```
strncpy(tokenized[count++], result, MAX_CHARS); 
```

最后，我建议您更[`strtok_r()`](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)喜欢`strtok()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:08:16.770

您需要使用`strcpy`（或更好`strncpy`）来复制字符串。否则，您只是将指针分配给数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:09:22.897

你混淆了两种方法。一种方法是将输入字符串中的所有内容复制到解析版本的不同位置。一种方法是解析后的版本只是一堆指向保存原始输入字符串内存的内存的指针。那条`tokenized[...] = result`线试图做第二种方法；您使用的数据结构表示第一种方法。

如果您想使用第一种方法，请执行 strncpy 而不是仅分配给标记化的。如果要使用第二种方法，请将 tokenized 更改为 char* 数组。

我会推荐第一种方法，因为它是值得的。

# php - 如何从 PHP 中的 URL 中获取数据库名和表名？

> ID：11070802
> 
> 赞同：0
> 
> 时间：2012-06-17T11:01:39.837
> 
> 标签：php, mysql, database, url

我是 PHP 新手。我需要有关从给定 URL 名称中提取数据库名称和表名称的方法的帮助。例如，假设我有一个如下所示的 URL：

/test.php?db=...&table=.../

如何使用 PHP 从此 URL 中提取数据库名称和表名称，并将结果用于其他查询目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:03:10.527

如果您的意思是如何解析现有 URL 的参数：

parse_url() 和 parse_str() 将帮助您剥离 url 的组件。您将主要查看以下内容

```
$elements = parse_url($url);
$kvps = $elements->query;
$db = parse_str($kvps['db']);
$table = parse_str($kvps['table']); 
```

但是，如果您的意思是如何在渲染之前从当前页面获取变量：

```
<?php

$dbname = $_GET['db'];
$tablename = $_GET['table'];

?> 
```

是的，以这种方式开放对数据库的“直接”访问涉及重大安全风险。最好在任务中混淆/封装/包装您的函数，`index.php&addUser=tim`而不是`index.php&insert=tim&db=boofar&table=users&dbuser=root&dbpassword=secure`.

如果您只是在学习，那么您所做的一切都很好，只要您意识到为什么是错误的。如果您正在为生产编写代码，那么您确实需要一个替代解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:06:42.797

有两种方法可以将变量或数据传递到另一个页面。

GET（通过 URL）和 POST（通常是表单提交）

你总是可以通过 $_GET [http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

或者

$_POST [http://nl.php.net/manual/en/reserved.variables.post.php](http://nl.php.net/manual/en/reserved.variables.post.php)

# python - 如果我想制作 webapps，我真的需要知道不止一种语言吗？

> ID：11070805
> 
> 赞同：0
> 
> 时间：2012-06-17T11:02:44.220
> 
> 标签：python

我是文科专业的，对一些网络应用程序有一些想法。我已经存了足够的钱雇人为我编写代码，但我想自己掌握至少基本的代码技能。我宁愿不要成为无知的创始人。

我从 Python 开始。到目前为止，一切都很好。尽管我有文科背景，但我一直很喜欢数学，甚至在大学里上过一些高级微积分课。

我的问题是：如果我的目标是制作 Web 应用程序而不是真正找到工作，那么真的有必要学习不止一种编程语言吗？我从 Python 开始，我发现它足够灵活和强大，足以满足我的大部分需求。我是否需要将我的作品扩展到 PHP、Ruby、Java 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:08:18.837

我现在会坚持使用一种服务器端语言 - 而 Python（或您列出的任何其他语言）是一个非常好的选择。

我认为什么 Javascript 很重要，以及 Ajax 类型技术如何以及可以做什么的基本概念。

但是，稍微扩展“语言”的定义，我认为您对 html 和 css 有了合理的理解，因为它们是 Web 开发不可或缺的。

# android - android 4.0 将标题栏布局更改为旧的 2.x 样式？

> ID：11070806
> 
> 赞同：0
> 
> 时间：2012-06-17T11:02:44.563
> 
> 标签：android, android-layout

我必须为 4.0 sdk 编译我的应用程序才能在 4.0 设备上运行。

我想将标题栏布局更改为与 2.x sdks 中使用的先前布局相同...

我在想可能有办法获取 2.x 布局文件，然后用这个布局文件替换 4.0 中的标题栏布局。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:05:46.427

您是否尝试将主题设置为

```
android:theme="@android:style/Theme.Light" 
```

或者 .Black 在清单中的应用程序标记中，而不是选择默认的 Holo 主题？

# xpages - 防止在 XPages 中多次提交的最佳方法是什么？

> ID：11070809
> 
> 赞同：2
> 
> 时间：2012-06-17T11:03:09.093
> 
> 标签：xpages

当我使用 XPage 时，防止多次提交的最佳方法是什么？

对于“经典网络”解决方案如下。如何阻止来自 Web [http://www-304.ibm.com/support/docview.wss?uid=swg21089865的同一文档的多次提交](http://www-304.ibm.com/support/docview.wss?uid=swg21089865)

使用jQuery，解决方案如下。 [http://www.norio.be/blog/2008/09/using-jquery-prevent-multiple-form-submissions](http://www.norio.be/blog/2008/09/using-jquery-prevent-multiple-form-submissions)

但我不知道 Xapges 的方式。如何在 XPages 或 Dojo 中防止它发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T19:30:02.450

最好**不要**应用这种客户端技术，因为结合不可靠的互联网连接，用户可能会发现提交失败但无法重试。

一个更强大的解决方案是在服务器端进行重复数据删除，这可以通过多种方式完成；这些是我想到的一些：

1.  定义表单内容的语义，这样无论您是否收到两个请求（例如，如果它正在更新一条记录，那么第二次更新就不会改变任何内容）。
2.  如果您之前看到过完全相同的提交（比较所有相关字段），请忽略它。
3.  将表单发送给客户端时生成一个序列号。不要接受具有您以前见过的序列号的提交 - 或做一些有用的事情；例如，如果是博客帖子或评论表单，则第二次提交应被视为对第一次提交创建的帖子的*编辑。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:38:03.923

You can prevent a submit by using XSP.addQuerySubmitListener and return false. This is not the easiest function to get working. So I suggest you take a look at the function in the book 'Xpages Portable Command Guide' or try my project multiple file uploader on OpenNTF. Download the project source code [here](http://www.openntf.org/Internal/home.nsf/project.xsp?databaseName=CN=NotesOSS2/O=NotesOSS!!Projects%5Cpmt.nsf&documentId=D5639B5FFB2823F8862578AF00705169&action=openDocument).

# ruby-on-rails - 制作应用程序以在 Rails 中上传 zip 文件

> ID：11070811
> 
> 赞同：-2
> 
> 时间：2012-06-17T11:03:13.140
> 
> 标签：ruby-on-rails

我是新来的轨道。 **我需要创建一个 Rails 应用程序来帮助我将 zip 或 tar 文件上传到它。** 我正在使用 rails 2.3 是否有任何 gem 可以帮助我快速完成此操作或一些教程。 **我是新手，因此将不胜感激分步说明。** 先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:27:27.247

如果你使用 rails 2，你可以使用[Paperclip](http://github.com/thoughtbot/paperclip)

如果您使用 rails 3，则可以使用[Carrierwave](https://github.com/jnicklas/carrierwave)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T04:14:13.793

宝石文件

```
gem "paperclip", "~> 5.0.0" 
```

在初始化程序中创建一个文件：app/config/initializers/paperclip.rb

```
module Paperclip
  class MediaTypeSpoofDetector
    def spoofed?
      false
    end
  end
end 
```

然后使用 papeclip 上传 zip 或任何图像文件。

# linux - 在linux中查找命令

> ID：11070818
> 
> 赞同：0
> 
> 时间：2012-06-17T11:05:22.247
> 
> 标签：linux, ubuntu, find

以下是什么意思？

```
find myDirectory -name myFile -exec ls \-ln {} \; 
```

我看过[这里](http://www.computerhope.com/unix/ufind.htm)但不完全理解

```
-exec command   True if the executed command returns a zero value as exit status. The end of command must be punctuated by an escaped semicolon. A command argument {} is replaced by the current path name. 
```

这部分`-exec ls \-ln {} \;`我不清楚。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:09:51.437

`myFile`这意味着：在当前目录及其所有子目录中查找所有具有名称的文件，并且对于找到的每个文件都`ls -ln`使用该文件的名称运行。

例如：

```
$ mkdir a
$ touch myFile a/myFile
$ find -name myFile -exec ls -ln {} \;
-rw-r--r-- 1 1000 1000 0 Jun 17 13:07 ./myFile
-rw-r--r-- 1 1000 1000 0 Jun 17 13:07 ./a/myFile 
```

在这种情况下`find`将运行`ls`两次：

```
ls -ln ./myFile
ls -ln ./a/myFile 
```

每次它都会扩展`{}`为找到的文件的全名。

另外我必须补充一点，在这种情况下，您需要在 -ln 之前使用反斜杠。是的，你可以使用它，但在这里绝对没用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T11:09:30.753

```
find myDirectory -name myFile -exec ls \-ln {} \; 
```

它说`myFile`在目录中查找`myDirectory`，一旦找到所有文件，然后执行文件列表命令，即在 linix 中`ls`带有命令选项 `-l`和`-n`找到的文件。

所以，最终你会得到所有`myFiles`伴随的`ls`命令结果。

# mysql - obecj mysql查询没有express js的方法

> ID：11070819
> 
> 赞同：0
> 
> 时间：2012-06-17T11:05:43.283
> 
> 标签：mysql, node.js

我在 express.js 中开发了一个非常简单的注册表单，但是当我重定向并提交值时，快递给了我以下错误

`500 TypeError: Object # has no method 'query'`

```
at /home/nodes/Documents/Aptana Studio 3 Workspace/mysql/routes/index.js:79:8
at callbacks (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/lib/router/index.js:272:11)
at param (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/lib/router/index.js:246:11)
at pass (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/lib/router/index.js:253:5)
at Router._dispatch (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/lib/router/index.js:280:4)
at Object.handle (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/lib/router/index.js:45:10)
at next (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/node_modules/connect/lib/http.js:204:15)
at /home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/node_modules/connect/lib/middleware/session.js:322:9
at /home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/node_modules/connect/lib/middleware/session.js:337:9
at Array.0 (/home/nodes/Documents/Aptana Studio 3 Workspace/mysql/node_modules/express/node_modules/connect/lib/middleware/session/memory.js:57:7)</code> 
```

我的代码可以从[这里查看](http://www.pastie.org/4102152)
thanx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:41:03.100

您应该使用 object `client`，**而不是** `mysql`在查询时。

# qt - QGraphicsView 闪烁

> ID：11070822
> 
> 赞同：1
> 
> 时间：2012-06-17T11:06:20.797
> 
> 标签：qt, user-interface, qgraphicsview, double-buffering

我想为我的女朋友的学士论文写一个改变失明的程序。它显示 X 毫秒的图片，显示一个简短的“闪烁图像”（在本例中为灰色），然后显示与第一个图像略有不同的图像。然后又是一个闪烁的图像。

然后一切从头开始。它工作正常，只有图形伪影。我认为画布/ QGraphicsView 刷新它的速度不够快，因此它们在刷新期间是“线条”。

图像显示时间：70 ms，闪烁时间：30 ms。所以它的 100 毫秒 = 10 FPS/秒。我虽然不使用 gpu 也可以做到这一点。但看起来不是。

我可以使用双缓冲或其他东西来避免 GPU 的东西吗？或者我需要使用 QGL 吗？它大约 1 兆字节的图像。

我加载它们一次，然后显示它们我认为。也许我在场景中做错了事。

我会附上我的源代码，也许你有一些想法。

亲切的问候 ：）

```
#ifndef PICTURES_H
#define PICTURES_H

#include <QMainWindow>
#include <QImage>
#include <QPixmap>
#include <QGraphicsPixmapItem>
#include <iostream>
#include <QDir>
#include <QGraphicsScene>
#include <QDebug>
#include <QTimer>

namespace Ui {
class pictures;
}

class pictures : public QMainWindow
{
    Q_OBJECT

public:
    explicit pictures(QWidget *parent = 0);
    ~pictures();

    void loadPics();
    void showPics();

public slots:
    void stopClicked();
    void clearPictures();
    void timePassed();
    void changeImage();
    void changeImageGrey();

private:
    int counter;
    int image_counter;
    int stop_time;
    Ui::pictures *ui;
    QVector<int> times;
    QTimer* timer;
    QTimer* timerImageChange;
    QTimer* timerGrey;

    int imageChangeTime;
    int greyTime;

    QVector<QGraphicsPixmapItem*> images;
    QGraphicsScene* scene;
    QGraphicsScene* scene_grey;
    QGraphicsPixmapItem* item1;
};

#endif // PICTURES_H

#include "pictures.h"
#include "ui_pictures.h"

pictures::pictures(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::pictures), times()
{
    counter = 1;
    stop_time = 0;
    image_counter = 0;
    timer = new QTimer(this);
    timerGrey = new QTimer(this);
    timerImageChange = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(timePassed()));
    connect(timerImageChange, SIGNAL(timeout()), this, SLOT(changeImageGrey()));
    connect(timerGrey, SIGNAL(timeout()), this, SLOT(changeImage()));

    greyTime = 200;
    imageChangeTime = 500;

    qDebug() << "Hello im here in pictures";

    ui->setupUi(this);
    this->loadPics();
    connect(ui->pushButtonStop, SIGNAL(clicked()), this, SLOT(stopClicked()));
    connect(ui->pushButtonNext, SIGNAL(clicked()), this, SLOT(clearPictures()));

    timer->start(10);
    timerImageChange->start(imageChangeTime);
}

pictures::~pictures()
{
    delete ui;
}

void pictures::loadPics()
{
    qDebug() << QDir::toNativeSeparators((QDir::current().absolutePath() + QDir::separator () + "debug" + QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg"));
    //QImage imageOne(QDir::toNativeSeparators(QDir::current().absolutePath() + QDir::separator () + "debug" + QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg"));
    //QImage imageTwo(QString("./pics/")+counter+"/2.png");
    //QImage imageThree(QString("./pics/")+counter+"/3.jpg");
    //QImage imageFour(QString("./pics/")+counter+"/2.png");

    images.append(new QGraphicsPixmapItem(QDir::toNativeSeparators(QDir::current().absolutePath() + QDir::separator () + "debug" +  QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"1.jpg")));
    images.append(new QGraphicsPixmapItem(QDir::toNativeSeparators(QDir::current().absolutePath() + QDir::separator () + "debug" +  QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"2.jpg")));
    images.append(new QGraphicsPixmapItem(QDir::toNativeSeparators(QDir::current().absolutePath() + QDir::separator () + "debug" +  QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"3.jpg")));
    images.append(new QGraphicsPixmapItem(QDir::toNativeSeparators(QDir::current().absolutePath() + QDir::separator () + "debug" +  QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+"4.jpg")));

    //QGraphicsPixmapItem* item1( QPixmap::fromImage(imageOne));
    item1 = images[image_counter];
    //QGraphicsPixmapItem item2( QPixmap::fromImage(imageTwo));
    //QGraphicsPixmapItem item3( QPixmap::fromImage(imageThree));
    //QGraphicsPixmapItem item4( QPixmap::fromImage(imageFour));
    scene = new QGraphicsScene;
    scene_grey = new QGraphicsScene;

    int maximum = item1->boundingRect().width() > item1->boundingRect().height() ? item1->boundingRect().width() : item1->boundingRect().height();
    int dimension_width  = ui->graphicsView->rect().width();
    int dimension_height = ui->graphicsView->rect().height();

    //int biggest_canvas_dimension = (((float)item1->boundingRect().width())/dimension_width) > (((float)item1->boundingRect().height())/dimension_height) ? dimension_width : dimension_height;
    int biggest_canvas_dimension = dimension_width > dimension_height ? dimension_width : dimension_height;

    if(maximum > ui->graphicsView->rect().width() || maximum > ui->graphicsView->rect().height())
    {
        dimension_width = (int) (item1->boundingRect().width() * ((float)(biggest_canvas_dimension )/maximum));
        dimension_height = (int) (item1->boundingRect().height() * ((float)(biggest_canvas_dimension)/maximum));
        item1->setPixmap(item1->pixmap().scaled(dimension_width,dimension_height));

        qDebug() << "Width: " << dimension_width << " Height " << dimension_height << " Pic High" << item1->boundingRect().height();
    }

    //item1->setPixmap(item1->pixmap().scaled(QSize(ui->graphicsView->rect().width(), ui->graphicsView->rect().height())));
    scene->setSceneRect(ui->graphicsView->rect());
    scene->addItem(item1);

    scene_grey->setSceneRect(ui->graphicsView->rect());
    scene_grey->addItem(images[1]);

    ui->graphicsView->setScene(scene);
    ui->graphicsView->adjustSize();

    //ui->graphicsView->show();

}

void pictures::timePassed()
{
    stop_time += 10;
}

void pictures::stopClicked()
{
    timerImageChange->stop();
    timerGrey->stop();
    times.append(stop_time);
    ui->pushButtonStop->setEnabled(false);
    ui->pushButtonNext->setEnabled(true);
    counter++;
    qDebug() << "Time: " << stop_time;

    stop_time = 0;
    timer->stop();
}

void pictures::clearPictures()
{
    scene->deleteLater();
    images.clear();
    loadPics();
    ui->pushButtonStop->setEnabled(true);
    ui->pushButtonNext->setEnabled(false);
    timer->start(10);
    timerImageChange->start(imageChangeTime);
}

void pictures::changeImageGrey()
{
    timerGrey->start(greyTime);
    timerImageChange->stop();
    image_counter = (image_counter+1)%4;

    //scene_grey->removeItem(scene_grey->items().at(0));
    //scene_grey->addItem(images[image_counter]);

    scene->removeItem(scene->items().at(0));
    scene->addItem(images[image_counter]);

    /*int maximum = item1->boundingRect().width() > item1->boundingRect().height() ? item1->boundingRect().width() : item1->boundingRect().height();
    int dimension_width  = ui->graphicsView->rect().width();
    int dimension_height = ui->graphicsView->rect().height();

    int biggest_canvas_dimension = dimension_width > dimension_height ? dimension_width : dimension_height;

    if(maximum > ui->graphicsView->rect().width() || maximum > ui->graphicsView->rect().height())
    {
        dimension_width = (int) (item1->boundingRect().width() * ((float)(biggest_canvas_dimension )/maximum));
        dimension_height = (int) (item1->boundingRect().height() * ((float)(biggest_canvas_dimension)/maximum));
        item1->setPixmap(item1->pixmap().scaled(dimension_width,dimension_height));
    }*/
    //scene->setSceneRect(ui->graphicsView->rect());

    //ui->graphicsView->setScene(scene_grey);

}

void pictures::changeImage()
{
    timerImageChange->start(imageChangeTime);
    timerGrey->stop();
    image_counter = (image_counter+1)%4;

    qDebug() << "    item1 = images[" + QString::number(image_counter) + "]";

    scene->removeItem(scene->items().at(0));

    item1 = images[image_counter];

    //qDebug() << QDir::toNativeSeparators((QDir::current().absolutePath() + QDir::separator () + "debug" + QDir::separator () + "pics" + QDir::separator () + QString::number(counter) + QDir::separator()+ QString::number(image_counter+1) +".jpg"));

    int maximum = item1->boundingRect().width() > item1->boundingRect().height() ? item1->boundingRect().width() : item1->boundingRect().height();
    int dimension_width  = ui->graphicsView->rect().width();
    int dimension_height = ui->graphicsView->rect().height();

    int biggest_canvas_dimension = dimension_width > dimension_height ? dimension_width : dimension_height;

    if(maximum > ui->graphicsView->rect().width() || maximum > ui->graphicsView->rect().height())
    {
        dimension_width = (int) (item1->boundingRect().width() * ((float)(biggest_canvas_dimension )/maximum));
        dimension_height = (int) (item1->boundingRect().height() * ((float)(biggest_canvas_dimension)/maximum));
        item1->setPixmap(item1->pixmap().scaled(dimension_width,dimension_height));
    }

    //item1->setPixmap(item1->pixmap().scaled(QSize(ui->graphicsView->rect().width(), ui->graphicsView->rect().height())));
    //scene->setSceneRect(ui->graphicsView->rect());
    scene->addItem(item1);
    //ui->graphicsView->setScene(scene);

    //ui->graphicsView->setScene(scene);
    //ui->graphicsView->adjustSize();

    //ui->graphicsView->show();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:03:10.477

请记住，如果您的显示器刷新率为 60 Hz，则每张图像在 16 毫秒内重绘一次。您不能以 30 毫秒之类的精确时间进行绘制，只能以 16.666 毫秒的时间间隔进行计时。而且至少在 Windows 中，您无法轻易找出显示器中显示的图像何时会发生变化。如果您的代码显示图像，例如 10 毫秒，那么您要么看到图像，要么看不到。如果您显示图像 25 毫秒，您可以看到图像一次（16.666 毫秒）或两次（33.333 毫秒）。

如果您真的想要精确的时间，我建议您使用 OpenGL，您可以使用监视器的垂直同步信息对绘图进行计时。

您在绘图过程中看到的线条可能正在[撕裂](http://en.wikipedia.org/wiki/Screen_tearing)。您也可以通过使用显示器的垂直同步信息来避免这种情况。

您还使用 Qt 的计时器来计算 10 毫秒的间隔。那是行不通的。超时时间至少为 10 毫秒，但不能保证正好是 10 毫秒。实际上它更多，因此 100 次超时的总时间可能在 1100 毫秒左右。甚至更多，取决于您的操作系统。在 Windows 中，默认计时器分辨率为 16 毫秒。然后 100 次超时加起来约为 1700 毫秒。[您可以使用timeBeginPeriod](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx)更改计时器分辨率。

要获得更准确的计时，请在您要等待的时间段内启动计时器。如果您想在 70 毫秒后执行某些操作，请将计时器间隔更改为 70 毫秒，而不是设置 7 次 10 毫秒超时。

# c++ - 没有 RTTI 的类标识

> ID：11070826
> 
> 赞同：13
> 
> 时间：2012-06-17T11:06:56.783
> 
> 标签：c++, identity, rtti

我在互联网上的某个地方找到了一个简单的解决方案，用于没有内置 C++ [RTTI](http://en.wikipedia.org/wiki/Run-time_type_information)的身份类。

```
template <typename T>
class Identity {
public:
    static int64_t id()
    {
        static int64_t dummy;
        return reinterpret_cast<int64_t>(&dummy);
    }
}; 
```

当我们需要一些类 ID 时，我们只需使用：

```
Identity<OurClass>::id(); 
```

我想知道，有没有碰撞？它可以为不同的类返回相同的 ID，还是为相同的类返回不同的 ID？我已经用具有不同优化值的 g++ 尝试了这段代码，一切似乎都很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T11:23:26.377

首先：有一个专门用于包含指针的整数类型：

*   `intptr_t`
*   在 C++11 中`uintptr_t`

其次，即使实际上在 gcc 上它们是相等的，指向对象的指针的大小和函数指针（或指向成员的指针）的大小也可能不同。因此，最好使用特定对象而不是方法本身（为了符合标准）。

第三，它只给你身份，而 RTTI 更丰富，因为它知道给定对象可以转换为的所有子类，甚至允许跨虚拟继承进行交叉转换或转换。

尽管如此，我猜更正后的版本还是有用的：

```
struct Foo {
    static intptr_t Id() {
        static boost::none_t const Dummy = {};
        return reinterpret_cast<intptr_t>(&Dummy);
    }
}; 
```

在层次结构中，有一个`virtual`返回该 ID 的函数。

为了完整起见，我将提到 Clang 和 LLVM 在没有 RTTI 的情况下有自己的处理对象识别的方式。您可能想了解他们的实施方式`isa`，`cast`以及`dyn_cast` [在这里](http://llvm.org/docs/ProgrammersManual.html#isa)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:11:25.860

此解决方案将函数指针强制转换为`int`. `int`尽管在实践中，不能保证这个指针适合`sizeof(void *) == sizeof(void (*)()) <= sizeof(int)`

编辑：我的坏。在 x86_64 `sizeof(int) = 4`, `sizeof(void (*)()) = 8`, 所以冲突是可能的并且是不可预测的。

您可以转换为适当大小的积分，但理论上它仍然是未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:23:27.393

这个版本避免了未定义的行为（和编译器警告）：

```
template <typename T>
class Identity {
public:
    static const int* id() { static const int id = 0; return &id; }
}; 
```

# java - 合并两个具有不同但重叠模式和不同实例数量的稀疏 weka 数据集

> ID：11070828
> 
> 赞同：2
> 
> 时间：2012-06-17T11:07:02.260
> 
> 标签：java, machine-learning, dataset, weka

我需要使用 SparseInstance 对象迭代地扩展 weka ARFF 文件。每次添加新的 SparseInstance 时，标头可能会更改，因为新实例可能会添加其他属性。我认为 mergeInstances 方法可以解决我的问题，但事实并非如此。它要求两个数据集都没有共享属性。

如果这不是绝对清楚，请查看以下示例：

```
Dataset1
a b c
1 2 3
4 5 6

Dataset2
c d
7 8

Merged result:
a b c d
1 2 3 ?
4 5 6 ?
? ? 7 8 
```

我目前看到的唯一解决方案是手动解析 arff 文件并使用字符串处理将其合并。有谁知道更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T18:01:18.907

行。我自己找到了解决方案。解决方案的核心部分是方法`Instances#insertAttributeAt`，如果第二个参数是 ，则插入一个新属性作为最后一个属性`model.numAttributes()`。这是数字属性的一些示例代码。也很容易适应其他类型的属性：

```
 Map<String,String> currentInstanceFeatures = currentInstance.getFeatures();
    Instances model = null;
    try {
        if (targetFile.exists()) {
            FileReader in = new FileReader(targetFile);
            try {
                BufferedReader reader = new BufferedReader(in);
                ArffReader arff = new ArffReader(reader);
                model = arff.getData();
            } finally {
                IOUtils.closeQuietly(in);
            }
        } else {
            FastVector schema = new FastVector();
            model = new Instances("model", schema, 1);
        }
        Instance newInstance = new SparseInstance(0);
        newInstance.setDataset(model);

        for(Map.Entry<String,String> feature:currentInstanceFeatures.entrySet()) {
            Attribute attribute = model.attribute(feature.getKey());
                if (attribute == null) {
                    attribute = new Attribute(feature.getKey());
                    model.insertAttributeAt(attribute, model.numAttributes());
                    attribute = model.attribute(feature.getKey());
                }
            newInstance.setValue(attribute, feature.getValue());
        }

        model.add(newInstance);
        model.compactify();
        ArffSaver saver = new ArffSaver();
        saver.setInstances(model);
        saver.setFile(targetFile);
        LOGGER.debug("Saving dataset to: " + targetFile.getAbsoluteFile());
        saver.writeBatch();
    } catch (IOException e) {
        throw new IllegalArgumentException(e);
    } 
```

# javascript - 点击时文本区域的表情符号

> ID：11070830
> 
> 赞同：4
> 
> 时间：2012-06-17T11:07:28.147
> 
> 标签：javascript, jquery, html, onclick, textarea

我有一个小问题

我想单击我的笑脸并将文本插入文本区域。当我想稍后添加笑脸时，笑脸应该添加到光标位置，而不是文本区域的末尾。

这是我的**html**代码：

```
<textarea id="description" name="description"></textarea>

<div id="emoticons">
    <a href="#" title=":)"><img alt=":)" border="0" src="/images/emoticon-happy.png" /></a>
    <a href="#" title=":("><img alt=":(" border="0" src="/images/emoticon-unhappy.png" /></a>
    <a href="#" title=":o"><img alt=":o" border="0" src="/images/emoticon-surprised.png" /></a>
</div> 
```

这是我的**JS**代码：

```
$('#emoticons a').click(function(){

    var smiley = $(this).attr('title');
    $('#description').val($('#description').val()+" "+smiley+" ");

}); 
```

在这里你可以看到结果（NO WRAP - BODY） [http://jsfiddle.net/JVDES/8/](http://jsfiddle.net/JVDES/8/)

我为我的 javascript 代码使用 extern JS 文件...
你知道为什么代码没有在 NO WRAP - HEAD 模式下运行吗？ [http://jsfiddle.net/JVDES/9/](http://jsfiddle.net/JVDES/9/)

感谢您的帮助

问候伯恩特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T11:27:07.407

此外，您可以使用此功能：

```
function ins2pos(str, id) {
   var TextArea = document.getElementById(id);
   var val = TextArea.value;
   var before = val.substring(0, TextArea.selectionStart);
   var after = val.substring(TextArea.selectionEnd, val.length);
   TextArea.value = before + str + after;
} 
```

对于您的示例，请看[这里](http://jsfiddle.net/JVDES/13/)。

**更新 1：**

要将光标设置在指定位置，请使用下一个函数：

```
function setCursor(elem, pos) {
   if (elem.setSelectionRange) {
      elem.focus();
      elem.setSelectionRange(pos, pos);
   } else if (elem.createTextRange) {
      var range = elem.createTextRange();
      range.collapse(true);
      range.moveEnd('character', pos);
      range.moveStart('character', pos);
      range.select();
   }
} 
```

我更新了 jsFiddle 上的代码，因此，要查看新示例，请查看[此处](http://jsfiddle.net/JVDES/14/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T11:20:55.690

试试这个 - [http://jsfiddle.net/JVDES/12/](http://jsfiddle.net/JVDES/12/)

插入符号位置功能的功劳归于 - [https://stackoverflow.com/a/1891567/981134](https://stackoverflow.com/a/1891567/981134)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T11:23:18.827

`no wrap (head)`和的区别在于`no wrap (body)`前者会尽快运行代码，后者会在页面加载后运行代码。

在这种情况下，使用`no wrap (head)`，代码在 '#emoticons a' 存在之前运行。因此 $('#emoticons a') 返回 none 并且不附加点击处理程序。稍后，将创建链接。

因此，解决方案是告诉代码在页面加载时运行。

有几种等效的方法可以做到这一点。[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

1.  `$(document).ready(handler)`

2.  `$().ready(handler)`（不建议这样做）

3.  `$(handler)`

所以使用版本 3，我们有：

```
$(function() {
    $('#emoticons a').click(function(){

    var smiley = $(this).attr('title');
    $('#description').val($('#description').val()+" "+smiley+" ");

    });
}); 
```

[http://jsfiddle.net/Nc67C/](http://jsfiddle.net/Nc67C/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T11:26:35.130

也试试这个...

```
$('#emoticons a').click(function() {

    var smiley = $(this).attr('title');

    var cursorIndex = $('#description').attr("selectionStart");
    var lStr =  $('#description').val().substr(0,cursorIndex);
    var rStr = $('#description').val().substr(cursorIndex);

    $('#description').val(lStr+" "+smiley+" "+rStr);

}); 
```

在您发表评论后修复：

​</p>

```
$('#emoticons a').click(
function(){var smiley = $(this).attr('title');

var cursorIndex = $('#description').attr("selectionStart");
var lStr =  $('#description').val().substr(0,cursorIndex) + " " + smiley + " ";
var rStr = $('#description').val().substr(cursorIndex);

$('#description').val(lStr+rStr);
$('#description').attr("selectionStart",lStr.length);                                     
});​ 
```

​</p>

# perl - 如何更改 Log4perl 时间戳的时区

> ID：11070832
> 
> 赞同：0
> 
> 时间：2012-06-17T11:08:18.070
> 
> 标签：perl, log4perl

我的 Web 服务器与我的时区不同，我在 Log4perl 配置中使用这种模式布局：

```
log4perl.appender.LOGFILE.layout=PatternLayout
log4perl.appender.LOGFILE.layout.ConversionPattern=%d | %p | %l | %c | %m%n 
```

%d 在服务器的时区生成日期/时间。我怎样才能让它在我的本地时区记录日期/时间？

我知道以下内容：

```
$Log::Log4perl::DateFormat::GMTIME = 1; 
```

导致日期/时间在 GMT 中记录，但是我在文档中找不到任何支持任意时区的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:37:45.240

如果您通常为 Perl 设置时区，那也将修复日志。对于您的目的而言，工具可能过于生硬：

```
use POSIX qw(tzset);

$ENV{TZ} = 'desired time zone goes here';
tzset; 
```

更直接地说，如果您有访问权限，您可以在 Web 服务器本身的环境中设置 TZ，并将所有内容都放在所需的区域中。

但我认为你最好在 UTC 中记录所有内容。

# php - 检查用户状态

> ID：11070834
> 
> 赞同：1
> 
> 时间：2012-06-17T11:08:35.120
> 
> 标签：php, ajax, status

我想创建一个用户状态系统，我想在我的数据库中有一个名为 datetime 的字段`last_active`，并使用当前时间使用 ajax 自动更新该字段。

然后我检查`last_active`和当前时间之间的分钟数..来判断用户是否在线、不活动和离线..

这是一个很好的技术吗？例如，如果用户打开了网站但正在做其他事情，会发生什么？

只有当用户正在查看页面时，有没有办法触发 ajax 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:16:57.723

你目前的方法是一个很好的技术，也是要走的路，

您可以使用 jquery 检查`focusin`并`focusout`使用 jquery 来检查用户当前是否在文档上处于活动状态，

```
$(document).ready(function(){
    $([window, document]).focusin(function(){
      // start the ajax requests
    }).focusout(function(){
      // stop the ajax requests
    });
}); 
```

您应该采用将设置为函数的变量，并将设置为`true`函数。现在 continue ajax 请求函数只有在变量设置为.`focusin``false``focusout``true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:12:36.287

这是检查活动的好方法。您可以仅在页面处于焦点时触发 Ajax 请求。我会考虑使用 mousemove 事件或类似事件，但模糊/焦点事件也可以证明是有用的。

当 mousemove 事件被触发时，`true`在执行 Ajax 请求之前设置一个变量并检查该变量。不要忘记`false`在每次 Ajax 调用之间将其重置。

# android - 在列表视图中跳过一行

> ID：11070836
> 
> 赞同：10
> 
> 时间：2012-06-17T11:08:42.877
> 
> 标签：android, android-listview, adapter

我想`getView()`为列表的每个项目调用，但我的问题是，如果与该行关联的数据为空，我们能否不显示该行。我只想在里面做这个`getView ()`。

例如：

如果要在列表视图中显示姓名的人的警报为空。我不想在列表视图中显示该人的姓名。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-17T11:12:52.713

在返回视图之前，您可以在最后一行中将该行的[可见性设置为“消失” - 这应该适合您。](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)

编辑：如果内容不为空，请务必将可见性设置为可见 - 否则由于 ListView 重用视图，所有视图都将“消失”。

```
myView.setVisibility((myData == null) ? View.GONE : View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-30T21:43:22.857

嗨伙计们，我尝试将可见性设置为不可见，但我仍然可以在列表视图中看到一个空行，所以我进行了一些更改，它根据我的需要工作，所以如果有人需要像我这样的类似结果，值得分享。

我使用**列表** 作为源我的要求是跳过几个应用程序所以我所做的就是从**列表**中删除该应用程序并**通知数据集更改**

```
public AppListAdapter(Context context, List<ApplicationInfo> appList) {
        this.context = context;
        this.appList = appList;
        inflater = LayoutInflater.from(context);
        localStorage = new LocalStorage(context);
        pm = context.getPackageManager();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null)
              convertView = inflater.inflate(R.layout.applist_item, parent, false);
            // Other lines of code
        if(appName.length()==0 || getItem(position).packageName.equals("package.name.to.skip")) {
              appList.remove(position);
              notifyDataSetChanged();
        }
    return convertView;
} 
```

**关注点**

> appList.remove(位置);
> notifyDataSetChanged();

随时欢迎您的建议和更正。
阿兹马特罕宰

# java - JOpenDocument 从 .ods 文件中读取

> ID：11070837
> 
> 赞同：0
> 
> 时间：2012-06-17T11:08:46.930
> 
> 标签：java

我正在尝试从 jopendocument 读取 .ods 文件。但是当我试图访问/打印特定单元格的值时，会显示一个空白输出。我的代码是：

```
for(int nRowIndex = 0; nRowIndex < r; nRowIndex++)
{
int nColIndex = 0;
for( ;nColIndex < t; nColIndex++)
{
System.out.println(sheet.getCellAt(nColIndex, nRowIndex).toString());
}
} 
```

这会打印在控制台上：

```
<table:table-cell xmlns:table="urn:oasis:names:tc:opendocument:xmlns:table:1.0" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:55:32.260

该方法`getCellAt`返回一个 Object 类型`Cell`，以获取包含的值作为文本使用

```
sheet.getCellAt(nColIndex, nRowIndex).getTextValue() 
```

# .htaccess - 如何使用静态 html 页面提供 HTTP 标头 404？

> ID：11070839
> 
> 赞同：1
> 
> 时间：2012-06-17T11:09:08.573
> 
> 标签：.htaccess, error-handling, seo, http-headers, http-status-code-404

如何返回 HTTP 标头 404 Not found 并仍然显示静态 html 页面？我有 `ErrorDocument 404 mysite.com/searchmysite/index.html` .htaccess。但显然这对 seo 不利。

类似未回答的问题： [我可以在客户端更改页面的 HTML 状态代码吗？](https://stackoverflow.com/questions/4508913/are-i-can-serve-the-html-page-with-404-status-code-using-javascript)和[404 标头 - HTTP 1.0 还是 1.1？](https://stackoverflow.com/questions/2769371/404-header-http-1-0-or-1-1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T00:55:29.717

假设您打算将`404`错误代码作为您自己的不涉及的自定义 HTML 页面的一部分`ErrorDoccument`发送，您可以使用 PHP 等**服务器端代码**`404`发送标头，例如，使用. 您必须**在任何输出之前**发送此内容，并在发送后输出您的自定义网页。**`header("HTTP/1.0 404 Not Found");`**

 ****也没有理由`ErrorDocument`对 SEO 不利，除非您担心`404`响应，在这种情况下，**您一开始就不想发送`404`标头**。****

# python - 在脚本中调用 python web 服务器

> ID：11070842
> 
> 赞同：0
> 
> 时间：2012-06-17T11:09:24.617
> 
> 标签：python, web-services, monitoring, status, cherrypy

我想要一个 Web 服务器来显示我的 2 个 python 脚本的状态。这些脚本侦听特定端口上的传入数据。我想做的是拥有它，这样当脚本运行时，Web 服务器将返回 HTTP200，而当脚本未运行时，返回 500。我看过cherrypy 和其他这样的 python Web 服务器，但我不能让它们先运行，然后在 Web 服务器运行时继续我的其余代码。我希望这样，如果脚本崩溃，Web 服务器也会崩溃。或者，如果脚本正在运行，则 Web 服务器可以显示一个空白网页，HTML 中只有 1，否则为 0。有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:50:39.207

我会进一步分解它：

*   脚本 A，在端口 a
*   脚本 B，在端口 b 上
*   网络脚本 C 检查 A 和 B（通过向它们发出简单请求）并以机器友好格式（即 JSON 或 XML）返回结果
*   网页 D 调用 C 并为人们格式化结果，即 HTML 表格

现有的程序可以做到这一点 - Nagios 浮现在脑海中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T16:18:19.370

实际上，我只是在回答一个与此类似的问题，其想法是运行脚本 A 并让它中断运行您想要的脚本的 2 个线程，然后让网页执行以下操作：

```
import threading, cherrypy
from cherrypy import expose

class thread1(threading.Thread):
    def run(self):
        #code for script 1 goes here

class thread2(threading.Thread):
    def run(self):
        #code for script 2 goes here

t1 = thread1()
t2 = thread2()

t1.start()
t2.start()

@expose
def check(self):
    if t1.isAlive() and t2.isAlive():
        return "1"
    return "0" 
```

我建议您将 nginx 或 apache 放在前面，它们是反向代理。

现在有两种方法可以告诉你其中一种停止了。要么它会告诉你一个 1 两者都运行良好。如果一个或两个都停止但设法保持脚本的其余部分运行，则为零。或者 nginx/apache 会给你一个 500 错误，说后端服务器（即：cherrypy）崩溃了，这意味着整个脚本停止工作。

# xml - 如何使用 XSLT 转换此 XML？

> ID：11070848
> 
> 赞同：2
> 
> 时间：2012-06-17T11:10:14.273
> 
> 标签：xml, xslt

> **可能重复：**
> [如何使这个 XSL 转换只考虑具有相同 id 的兄弟姐妹？](https://stackoverflow.com/questions/11183707/how-to-make-this-xsl-transformation-consider-only-for-siblings-with-the-same-id)

我有这个输入 XML：

```
<map>
    <region>
        <gridA id="1">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="01">                 
                <building1 id="x" method="modify"> 
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (prev node have same id but diff method so it's not considered as successive -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="02">
                <building3 id="y" method="modify">
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/>
            </blockA>      

            <blockA id="01">                
                <building1 id="y" method="build"> <!-- this one will be kept (diff id) -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>

            <blockA id="02">                
                <building3 id="y" method="modify"> <!-- this one will be removed -->
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/> <!-- this one will be removed -->
            </blockA>          
        </gridA>   

        <gridA id="2">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (diff children) -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA>                              
            <blockA id="01">                
                <building1 id="x" method="build"> <!-- this one will be removed -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA> 
        </gridA>
        <gridB id="1">
            ...and so on..
        </gridB>
    </region>    
</map> 
```

预期输出：

```
<map>
    <region>
        <gridA id="1">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="01">                 
                <building1 id="x" method="modify"> 
                    <otherchild>a</otherchild>
                </building1>
                <building1 id="x" method="build"> <!-- this one will be kept (prev node have same id but diff method so it's not considered as successive -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>    

            <blockA id="02">
                <building3 id="y" method="modify">
                    <otherchild>b</otherchild>
                </building3>
                <building2 id="x" method="demolish"/>
            </blockA>      

            <blockA id="01">                
                <building1 id="y" method="build"> <!-- this one will be kept (diff id) -->
                    <otherchild>a</otherchild>
                </building1>
            </blockA>

            <blockA id="02"/>                         
        </gridA>   

        <gridA id="2">
            <blockA id="01" method="build">                 
                <building1 id="x" method="build">
                    <otherchild>a</otherchild>
                </building1>

                <building1 id="x" method="build"> <!-- this one will be kept (diff children) -->
                    <otherchild>b</otherchild>
                </building1>
            </blockA>                              
            <blockA id="01"/>  
        </gridA>
        <gridB id="1">
            ...and so on..
        </gridB>
    </region>    
</map> 
```

到目前为止的 XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/> <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="region/*/*/*
         [deep-equal(.,preceding::*[name()=current()/name()]
                       [@id = current()/@id]
                       [../../@id = current()/../../@id][1])]" />
</xsl:stylesheet> 
```

XSLT 现在的问题是它无法区分兄弟姐妹中发生的重复（即具有相同 id 的 blockA）。

我需要删除一个被认为是*重复*的节点。

**具有相同的两个节点，如果一个接一个出现并且具有相同的`name`and ，`id`将被认为是*重复*的。`method``children`**

**例如：**

```
<elem id="1" method="a" />
<elem id="1" method="a" /> <!-- this is repetitive for id=1-->
<elem id="1" method="b" /> 
<elem id="1" method="a" /> <!-- this is the new boundary for removal id=1-->
<elem id="2" method="a" /> 
<elem id="1" method="a" /> <!-- this is repetitive for id=1 -->
<elem id="2" method="a" /> <!-- this is repetitive for id=2 --> 
```

**将简化为：**

```
<elem id="1" method="a" />
<elem id="1" method="b" />
<elem id="1" method="a" /> <!-- this is the new boundary for removal id=1-->
<elem id="2" method="a" /> 
```

**- 每次具有`same id`has`different method`的连续节点时，都会重置`boundary`下一次删除的。`id`**

*   我们需要考虑在一个父节点或兄弟节点（两个或多个具有相同元素名称和 id 的父节点）下的重复项，即（例如`blockX`：）
*   如果被比较的两个节点不共享同一`gridX`级别，则不应将它们视为要删除的重复节点
*   所有后续的重复项都将被删除，直到它不再重复：请参阅示例的最后一部分并附上注释，`<!-- this is the new boundary for removal id=1-->`尽管它`elem id=1 method=a`没有被删除，因为前一个节点`elem id=1 method=b`使其成为非重复节点。
*   所以关键是先查看具有相同 id 的连续节点，然后检查方法和子节点是否相同。

对不起，我不知道如何用更容易理解的句子来解释这一点。

我希望解释足够清楚，不要混淆。

请让我知道如何使用 XSLT 实现这种转换。非常感谢您的帮助。

约翰

# emacs - 没有鼠标的 Flyspell

> ID：11070849
> 
> 赞同：2
> 
> 时间：2012-06-17T11:10:42.810
> 
> 标签：emacs, flyspell

如何在不使用鼠标的情况下在 flyspell 中将单词添加到字典中？我知道，我可以使用常规 ispell.el 绑定 M-$ 并为此浏览菜单，但是，这需要多次击键。

是否可以将 flyspell 弹出窗口中的“保存单词”功能绑定到单个键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T22:07:08.160

当您选择选项时 - 按下`i`它应该将其添加到您的本地字典中（好吧，无论如何都适合我:)）。

对 ispell.el 进行彻底检查表明没有特殊功能可以执行此操作，但您可以拥有一个：

```
(defun save-ispell-word (word)
  (interactive "sA word you want to add to dictionary ")
  (ispell-send-string (concat "*" word "\n"))
  (setq ispell-pdict-modified-p '(t))) 
```

但它只能在 ispell 次要模式下工作。

# php - 从数据库查询创建多维数组

> ID：11070851
> 
> 赞同：0
> 
> 时间：2012-06-17T11:10:44.747
> 
> 标签：php, arrays, multidimensional-array, hierarchy

我有一个存储帐户和订阅的数据库。一个帐户可以包含帐户和订阅，并具有三个以上的父级别。

数据库查询结果中的一行如下所示：

```
$array = (0 => array("level" => "2", "accountno" => "123124234", "accountname" => "Hansel", "parentaccountno" => "000213123", "subscription" => "5423213213", "username" => "Gretchen"); 
```

（级别 1 表示它是顶级的，它的 PARENTACCOUNTNO = null）。

从这里我试图创建一个看起来像这样的多维数组：

```
accounts:
    000213123
        accounts:
            123124234
                name: Hansel
                subscriptions:
                    5423213213
                        username: Gretchen 
```

这是我到目前为止的代码，它在前两个级别上运行得非常好。当存在三个或更多级别时，事情变得更加复杂，因为每个帐户只知道自己的父级：

```
$hierarchy = array();

foreach ($decode as $row) {
    $accountno = $row["ACCOUNTNO"];
    $msisdn = $row["MSISDN"];
    if ($row["PARENTACCOUNTNO"] == null)
        $base_array_key = $hierarchy["accounts"];

    $base_array_key[$accountno] = array("name" => $row["ACCOUNTNAME"], "accounts" => array(), "subscriptions" => array());

    $hierarchy["accounts"][$accountno]["accounts"]["321323123213"] = "blaha";

    if ($row["MSISDN"] != null)
        $hierarchy["accounts"][$accountno]["subscriptions"][$msisdn] = array("enduser" => $row["ENDUSER"]);
} 
```

我现在想到的解决方案是将基键从每次迭代传递到下一次迭代，然后如果例如上一个级别比这个级别高两个级别，只需使用某种字符串替换来删除最后两个部分钥匙。

有更好的想法吗？我很确定这是一种糟糕的方式来做我想要完成的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:48:27.287

创建一个临时关联数组：

```
$all_records = array(); 
```

使用您在数据库中找到的结果填充它：

```
while($result = get_results_from_db()) {
    $accountno = $result[accountno];
    $all_records[$accountno] = $result;
} 
```

现在您有一个按帐号索引的数组，因此如果您知道它是帐号，则很容易找到任何记录。因此，您遍历数组以将孩子与父母相关联：

```
$top_level_records = array();
foreach($all_records AS $record) {
    $parentaccountno = $record[parentaccountno];
    if(!empty($parentaccountno)) {
        $parent = &$all_records[$record[parentaccountno]];
        if(empty($parent['accounts']))
            $parent['accounts'] = array() 
        $parent['accounts'][] = $record;
    }
    else {
        $top_level_records[] = $record;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:52:24.597

你所有的结果都是这样的吗？那么，父帐户在哪里？还是我错过了什么？我会简单地重写查询以获得更“线性”的结果，例如：

```
parentaccountno | accountno | accountname | bla
-----------------------------------------------
000213123       | 123124234 | Hansel      | abc 
```

When every result row looks like this, you can simple create your final array like that:

```
foreach ($decode as $row) {
    $my_array = [ $row["parentaccountno"] ][ $row["accountno"] ]["accountname"] = $row["accountname"];      
    $my_array = [ $row["parentaccountno"] ][ $row["accountno"] ]["bla"] = $row["bla"];     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:52:29.870

I appreciate the answers, but I think the problem is my database query which should contain records of all the parents of an account and not just the parent, using something like SYS_CONNECT_BY_PATH in Oracle SQL.

# scala - 为什么 AnyVal 不能用于 isInstanceOf 检查？

> ID：11070859
> 
> 赞同：5
> 
> 时间：2012-06-17T11:11:54.013
> 
> 标签：scala

我想知道，为什么 AnyVal 不能在 isInstanceOf 检查中使用？这种行为背后的原因是什么？

```
scala> val c = 't'
c: Char = t

scala> c.isInstanceOf[AnyVal]
<console>:12: error: type AnyVal cannot be used in a type pattern or isInstanceO
f test
             c.isInstanceOf[AnyVal] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T14:37:36.983

`AnyVal`在运行时不再存在。仅在编译时。换句话说，将 JVM 原语视为第一类对象只是一个编译器“技巧”。

但是，该`isInstanceOf`方法是在运行时执行的，所以它不能工作。因此编译器错误。

# java - 活动是否有可能收集垃圾而不是子片段？

> ID：11070861
> 
> 赞同：7
> 
> 时间：2012-06-17T11:11:58.147
> 
> 标签：java, android, garbage-collection, android-fragments, android-ui

此调用发生在 Fragment 中，偶尔会由于 NullPointerException 而崩溃，尤其是当应用程序未在前台运行时：

> getActivity().getApplication());

当反馈从服务器返回或需要重绘片段时，会发生此调用。我不确定为什么该调用会引发 NPE，在 Activity 被 GC 处理时片段能否保留在内存中？

如果它有所作为，我使用 SwipeyTab ViewPager 来显示不同的片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:32:02.097

`Fragment`没有附加的 s 就不能存在`Activity`。如果活动被破坏，那么片段也将被破坏。另请注意，`getActivity()`将返回`null`直到`onAttach()`在片段上调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T12:42:26.230

问题是 Fragment 上有一个长时间运行的线程，在 Fragment 与 Activity 分离后返回结果。片段存在而不附加到 Activity 似乎很奇怪（在它已经附加之后）。

# git - Github 分叉和分支

> ID：11070866
> 
> 赞同：4
> 
> 时间：2012-06-17T11:12:46.323
> 
> 标签：git, github, git-branch

设想：

*   在 github 上存在用户“guru”和他的名为“bigsw”的项目的主要存储库。这个主仓库有几个分支。（“rel1”、“rel2”、“主”）
*   这个项目有 2 个由 user1 和 user2 制作的分叉。
*   每个 abobe 分叉都具有与主存储库相同的分支，以及一个包含其特定工作的不同分支。因此，user1 分叉了 bigsw 并创建了一个名为“utf8”的分支，而 user2 创建了一个分支“mongo”。

*   现在我想加入该项目，对于我的工作，我需要以下分支：

    *   大师/bigsw：大师
    *   user1/bigsw:utf8（读作：USER/REPO:BRANCH）
    *   用户 2/bigsw:mongo

**推荐的工作流程应该是什么？**

我的想法是：

1.  在 github 上 fork guru/bisgw（这样会得到 myname/bigsw）
2.  `git clone git://github.com/myname/bigsw`（获取本地副本）

3.  想要保持 user1/bigsw:utf8 分支的同步*本地副本*，并且同样想要来自 user2 的 fork 的分支“mongo”的副本。所以，我不需要从 user1 和 user2 克隆完整的 repo，每个分支只需要一个分支。有点像：

    *   `git remote add user1 git@github.com:user1/bigsw.git`
    *   `git fetch user1`
    *   `git checkout -b utf8 user1/utf8`
    *   同样对于user2的mongo repo（我不确定前两个命令）

4.  `git checkout -b i18n`（创建我自己的分支 - 我将在其中进行更改）
5.  编辑源代码（我希望在上一个命令之后它们会自动“进入”“i18n”分支）
6.  `git push origin i18n`（将我对 github 的更改推送到 myname/bigsw:i18n 分支）
7.  将来某个时候会为我的 i18n 分支提交拉取请求/不知道如何，但还不需要它；）/

以上是正确的工作流程吗？如果是，问题：

*   如何将 user1 的分支“utf8”和 user2 的“mongo”分支克隆到我的本地机器中 - 3.) 中的命令是否正确？
*   如何保持同步（所以我想在我的本地机器上同步所有分支） - 我的更改将*只*在我的分支“i18n”中。

我是 git/github 的新手——不幸的是需要从这个复杂的模型开始（至少对我来说）。我学到了一些挖掘[https://help.github.com/](https://help.github.com/)的东西，但并不理解所有的“git 哲学”。

我已经读过：

*   [https://stackoverflow.com/a/5458814/869025](https://stackoverflow.com/a/5458814/869025)（这很有帮助）
*   [https://stackoverflow.com/a/9153737/869025](https://stackoverflow.com/a/9153737/869025) - 给出一些想法，但我不确定
*   [如何将来自两个不同存储库的两个分支合并到一个存储库中？](https://stackoverflow.com/questions/244695/how-to-combine-two-branches-from-two-different-repositories-in-a-single-reposito)
*   [GitHub 中的分叉与分支](https://stackoverflow.com/questions/3611256/forking-vs-branching-in-github)
*   [git合并两个不同存储库的相同目录](https://stackoverflow.com/questions/10205383/git-merging-same-directory-of-two-different-repositories)
*   [https://help.github.com/](https://help.github.com/)

但仍然在黑暗中徘徊...... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:27:29.540

总体不错，但我有一些建议。

我会忽略`git checkout -b userX userX/branch`电话。相反，我会确保我在 guru 的原始分支中并创建一个本地分支，您可以在其中将两个遥控器合并在一起，如下所示：

```
git checkout -b utf8-mongo
git merge user1/utf8
git merge user2/mongo 
```

您可能会遇到乍一看可能看起来很可怕的合并冲突，但您最终会找到解决方法（查找有关如何解决合并冲突的指南，如果不确定要优先考虑哪个更改，请与作者进行对话）。

然后，您可以使用以下方法创建自己的分支：

```
git checkout -b i18n 
```

正如你所怀疑的那样。进行更改并遵守规则*[，尽早提交，经常提交](http://www.codinghorror.com/blog/2008/08/check-in-early-check-in-often.html)*。每当您想从所有上游分支中提取更改时，请执行以下操作：

```
git checkout utf8-mongo
git pull guru/master
git pull user1/utf8
git pull user2/mongo 
```

像上面那样解决您那里的任何合并冲突，然后切换回您的分支并获取新的更改：

```
git checkout i18n
git merge utf8-mongo 
```

拆分分支背后的基本原理是合并冲突很难管理，您将来可能会丢弃您的分支并从头开始。在这种情况下，您不想*再次*合并其他分支，因此您将它们保存在单独的分支中。

当使用 githubs Web 界面进行拉取请求时，您只请求从您的分支 i18n 拉取。人们（即大师）可能会不高兴，因为您拉入了许多其他民族的分支，这些分支可能还不够成熟，无法合并到他自己的分支中。您可能需要一些邮件联系来协调该拉动。最好的可能是从一开始就与开发人员进行健康的沟通。

# printing - 如何在 Windows 7 上将 pcl 文件发送到打印机？

> ID：11070867
> 
> 赞同：9
> 
> 时间：2012-06-17T11:12:51.513
> 
> 标签：printing, printer-control-language

我有一个生成“.pcl”文件的应用程序。生成后，它们将保存在我的 Windows 7 上的文件夹中。

如何将这些文件发送到打印机（网络打印机或 USB 连接的打印机）进行打印？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T11:37:01.107

当文件中的 PCL 版本与打印机的功能匹配时，要将 PCL 文件发送到 HP 打印机，您需要将文件作为*原始数据*发送。

**RAWPRN**

在早期版本的 Windows 中，您可以使用 Microsoft`RAWPRN.EXE`实用程序将 PostScript 或 PCL 直接发送到能够解释它的打印机。

此实用程序在 Microsoft [KB138594](http://support.microsoft.com/kb/138594/EN-US/) 文章中进行了描述。

**LPR**

显然 Windows 还提供了一个简单的`LPR`实用程序。

```
LPR -P LaserPrinter1 "-o l" cad_drawing.pcl 
```

这里`LaserPrinter1`是打印机的名称，“-o l”表示原始数据流，`cad_drawing.pcl`是PCL文件的名称。

此实用程序在 Windows Server[命令行参考](http://technet.microsoft.com/en-us/library/cc731926.aspx)中进行了描述。

# php - codeigniter 禁止在单个视图上禁用

> ID：11070869
> 
> 赞同：2
> 
> 时间：2012-06-17T11:13:08.907
> 
> 标签：php, codeigniter

是否可以关闭 codeigniter 中单个视图上的错误。

现在我还在开发中，我的默认登录页面有点像闪屏，所以在我开发的时候，我随机破坏了我的脚本，它会显示在任何视图上。有了这个，我只需要在那个视图上将其关闭，因为站点的其余部分在此之后，并且没有链接或引用以其他方式引导到当前构建的任何地方。

出于明显的原因，我不想关闭所有错误。但我需要他们在那一页上关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:11:45.963

在要禁用错误显示的控制器或视图中，执行

```
ini_set('display_errors', 0); 
```

调用视图后，您可以执行以下操作：

```
ini_restore('display_errors'); 
```

使错误再次出现（假设您的默认设置是显示错误）。

更多细节：

[http://www.php.net/manual/en/configuration.changes.php](http://www.php.net/manual/en/configuration.changes.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:34:37.247

„如果您想动态设置配置项或更改现有配置项，您可以使用“：

```
$this->config->set_item('item_name', 'item_value'); 
```

在你的情况下：

```
$this->config->set_item('log_threshold', 0); 
```

您可以在 Controller 或 View 中使用此功能。

# jquery-mobile - jQuery 移动事件，但没有 UI

> ID：11070870
> 
> 赞同：0
> 
> 时间：2012-06-17T11:13:13.573
> 
> 标签：jquery-mobile, event-handling

有没有一种（简单的）方法可以在没有任何 UI 元素的情况下获得 jQuery mobile 的事件功能？

这是为了升级一组已经编写好的 UI 组件以在移动环境中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:57:40.847

您将不得不使用`data-role=page`这些，因为这些是触发 JQM 事件的原因。

对于页面中的其余元素，您可以阻止 JQM 使用`data-enhance=false`标志对它们进行样式设置。

阅读[增强部分](http://jquerymobile.com/test/docs/api/data-attributes.html)

来自 JQM 源

```
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel" 
```

您应该能够像使用 live/on/delegate 的任何其他事件一样绑定到所有这些

# c# - 如何从 WPF 中的数据网格中获取单元格的值？

> ID：11070873
> 
> 赞同：3
> 
> 时间：2012-06-17T11:13:41.213
> 
> 标签：c#, wpf, datagrid, cell

> **可能重复：**
> [从 DataGrid 中选择 DataGridCell](https://stackoverflow.com/questions/9978119/select-datagridcell-from-datagrid)

我在 WPF 中有一个带有一些列和行的数据网格。当我单击一行时，我想获取所选行的第一列。我该怎么做？我可以为此使用 LINQ 吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:33:06.330

```
var firstSelectedCellContent = this.dataGrid.Columns[0].GetCellContent(this.dataGrid.SelectedItem);
var firstSelectedCell = firstSelectedCellContent != null ? firstSelectedCellContent.Parent as DataGridCell : null; 
```

这样，您可以获得作为 DataGridCell 和 DataGridCell 本身内容的 FrameworkElement。

请注意，如果 DataGrid 有`EnableColumnVirtualization = True`，那么您可能会从上面的代码中获得空值。

对于特定的 DataGridCell，要从数据源获取实际值要复杂一些。没有通用的方法可以做到这一点，因为 DataGridCell 可以由来自支持数据源的多个值（属性）构成，因此您需要为特定的 DataGridColumn 处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:32:01.737

您可以简单地使用此扩展方法-

```
public static DataGridRow GetSelectedRow(this DataGrid grid)
{
    return (DataGridRow)grid.ItemContainerGenerator.ContainerFromItem(grid.SelectedItem);
} 
```

并且您可以通过现有的行和列 id（在您的情况下为 0）获取 DataGrid 的单元格：

```
public static DataGridCell GetCell(this DataGrid grid, DataGridRow row, int column)
{
    if (row != null)
    {
        DataGridCellsPresenter presenter = GetVisualChild<DataGridCellsPresenter>(row);

        if (presenter == null)
        {
            grid.ScrollIntoView(row, grid.Columns[column]);
            presenter = GetVisualChild<DataGridCellsPresenter>(row);
        }

        DataGridCell cell = (DataGridCell)presenter.ItemContainerGenerator.ContainerFromIndex(column);
        return cell;
    }
    return null;
} 
```

检查此链接以获取详细信息 -[获取 WPF DataGrid 行和单元格](http://techiethings.blogspot.in/2010/05/get-wpf-datagrid-row-and-cell.html)

# iphone - 如何区分 UITableViewCell 的哪一部分被点击

> ID：11070874
> 
> 赞同：16
> 
> 时间：2012-06-17T11:13:43.340
> 
> 标签：iphone, ios, uitableview

我创建了一个`UITableView`带有自定义的`UITableViewCell`. 我的单元格包括`UIImageView`左侧和`UITextView`右侧的一个。

在里面`UITableViewController`，我在 tableview 中设置了图像和文本`cellForRowAtIndexPath`。

一切都很好，但现在我需要实现`didSelectRowAtIndex`，我需要区分是否`UIImageView`单击`UITextView`了单元格。

比方说，图像点击代表删除操作和单元格编辑操作的其余部分。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-17T12:16:07.737

无需将手势识别器添加到每个单独的单元格，您可以将手势识别器添加到表格视图并确定从用户触摸点选择了哪个单元格，然后确定用户是否触摸了图像或单元格。

首先确保您的控制器采用 UIGestureRecognizerDelegate 协议。

```
@interface MyTableViewController() <UIGestureRecognizerDelegate>
@end 
```

然后`UIGestureRecognizer`在`UITableView`视图加载时添加 。

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    singleTap.delegate = self;
    singleTap.numberOfTapsRequired = 1;
    singleTap.numberOfTouchesRequired = 1;
    [self.tableView addGestureRecognizer:singleTap];
} 
```

此委托方法确定是否`handleTap:`应执行该方法。如果它可以`indexPath`从用户触摸中找到一个，则返回，`YES`否则返回`NO`。

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    UITableView *tableView = (UITableView *)gestureRecognizer.view;
    CGPoint p = [gestureRecognizer locationInView:gestureRecognizer.view];
    if ([tableView indexPathForRowAtPoint:p]) {
        return YES;
    }
    return NO;
} 
```

一旦我们确定用户是否点击了单元格，就会调用 handleTap: 方法，然后确定用户是否触摸了图像或单元格的任何其他部分。

```
- (void)handleTap:(UITapGestureRecognizer *)tap
{
    if (UIGestureRecognizerStateEnded == tap.state) {
        UITableView *tableView = (UITableView *)tap.view;
        CGPoint p = [tap locationInView:tap.view];
        NSIndexPath* indexPath = [tableView indexPathForRowAtPoint:p];
        [tableView deselectRowAtIndexPath:indexPath animated:NO];
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        CGPoint pointInCell = [tap locationInView:cell];
        if (CGRectContainsPoint(cell.imageView.frame, pointInCell)) {
            // user tapped image
        } else {
            // user tapped cell
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-17T11:31:10.920

您可以继承`UITableViewCell`和覆盖`touchesEnded`.

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesEnded:touches withEvent:event];

    UITouch *touch = [touches  anyObject];
    CGPoint location = [touch locationInView:self];

    UIView *hitView = [self hitTest:location withEvent:event];

    if (hitView == myImageView) ...;
    if (hitView == myTextView) ...;
} 
```

您需要保留对您的`UIImageView`和的一些参考`UITextView`（它们可能应该是您的单元格的属性）。

您当然可以覆盖`touchesBegan`而不是`touchesEnded`，这取决于您要实现的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T12:09:49.767

使图像成为 UIButton。当按钮的动作被触发时，您知道用户点击了图像（不会选择单元格）。如果选择了单元格，则您知道用户点击了行上的其他位置（包括文本视图或标签）。

此外，将按钮的标签属性设置为，例如单元格的行索引，这样您就可以知道点击了哪一行的图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T11:29:42.257

一个非常抽象和一般的答案是执行以下操作对于您添加的每个 UIImage 和 UILabel 将它们的标签设置为`indexPath.row`

```
//When creating the label and image add a recognizer to them
label.tag = indexPath.row;
imageView.tag = indexPath.row; 
```

然后在每个图像和标签上添加一个 UITapGestureRecognizer ，就像这样

```
 UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc] initWithTarget:self 
                                                                                 action:@selector(handleTap:)];
    [label addGestureRecognizer:recognizer];
    [imageView addGestureRecognizer:recognizer];
}

- (void) handleTap:(UITapGestureRecognizer*)recognizer
{
    UIView *view = recognizer.view;
    int row = view.tag;
    if ([view isKindOfClass:[UILabel class]]) {
        //Row is row
        //and the label is pressed
    }

    if ([view isKindOfClass:[UIImageView class]]) {
        //Row is row
        //and the imageview is pressed
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T11:32:10.087

您有两个选择是实现：- 1-在“uitableviewcell”中添加 UITapGestureRecognizer 并使其指向图像视图并将“indexpath”作为参数传递给选择器并使委托将其传递给 tableviewcell

```
UILabel *label = =[UILabel alloc]init];
label.userInteractionEnabled = YES;
UITapGestureRecognizer *tapGesture =
[[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(labelTap)]     autorelease];
[label addGestureRecognizer:tapGesture];

-(void)labelTap{
[delegate performselector@selector(labeltapped:)withobject:indexpath];
} 
```

2- 第二种方法是检查类型 [imageview 或 label] 的 DidSelectRowAtIndexPath 的发件人；但我更喜欢第一种方式

# xcode - 表格视图的 headerView 中的 UITableView

> ID：11070875
> 
> 赞同：0
> 
> 时间：2012-06-17T11:13:49.997
> 
> 标签：xcode, uitableview, uikit

与[UITableView 部分相关以始终保持在视图中](https://stackoverflow.com/q/11053222/526547)，但我有一个我不确定的想法：

有没有人尝试过将 a 嵌套`UITableView`在另一个中`UITableView`，无论是将第二个作为第`tableHeaderView`一个的标题还是作为第一个的节标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:24:49.510

`UITableView`源自`UIScrollView`。在滚动视图中包含滚动视图通常不是一个好主意（例外：当滚动方向彼此垂直时）。

否则，您最终会得到一个不适合大多数用户的用户界面。

# c# - 打印富文本框

> ID：11070876
> 
> 赞同：0
> 
> 时间：2012-06-17T11:13:58.317
> 
> 标签：c#, printing, richtextbox

设置图片

```
Image image = Image.FromFile(@"C:\a.jpg");
Clipboard.SetImage(image);
richTextBox1.Paste(); 
```

文字打印

```
PrintDialog printDialog = new PrintDialog();
PrintDocument documentToPrint = new PrintDocument();
printDialog.Document = documentToPrint;
if (printDialog.ShowDialog() == DialogResult.OK)
{
    StringReader reader = new StringReader(richTextBox1.Text);
    documentToPrint.PrintPage += new PrintPageEventHandler(DocumentToPrint_PrintPage);
    documentToPrint.Print();
}

private void DocumentToPrint_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    StringReader reader = new StringReader(richTextBox1.Text);
    float LinesPerPage = 0;
    float YPosition = 0;
    int Count = 0;
    float LeftMargin = e.MarginBounds.Left;
    float TopMargin = e.MarginBounds.Top;
    string Line = null;
    Font PrintFont = this.richTextBox1.Font;
    SolidBrush PrintBrush = new SolidBrush(Color.Black);

    LinesPerPage = e.MarginBounds.Height / PrintFont.GetHeight(e.Graphics);

    while (Count < LinesPerPage && ((Line = reader.ReadLine()) != null))
    {
        YPosition = TopMargin + (Count * PrintFont.GetHeight(e.Graphics));
        e.Graphics.DrawString(Line, PrintFont, PrintBrush, LeftMargin, YPosition, new StringFormat());
        Count++;
    }

    if (Line != null)
    {
        e.HasMorePages = true;
    }
    else
    {
        e.HasMorePages = false;
    }
    PrintBrush.Dispose();
} 
```

此代码仅在richtextbox 中打印文本，但如何在richtextbox 中打印文本和图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:49:37.753

我认为，你需要重写函数`DocumentToPrint_PrintPage`来渲染 rtf 到`e.Graphics`文本和图像。现在，该函数只渲染来自`RichTextBox.Text.`

您需要读取`RichTextBox.rtf`、解析并绘制它，例如`e.Graphics.DrawString`( [docs](https://msdn.microsoft.com/en-us/library/19sb1bw6(v=vs.110).aspx) ) 用于文本和`e.Graphics.DrawImage`( [docs](https://msdn.microsoft.com/en-us/library/42807xh1(v=vs.110).aspx) ) 用于图像

# android - 应用内结算 - 如何在电子市场 / Google Play 中正确设置我的应用？

> ID：11070879
> 
> 赞同：0
> 
> 时间：2012-06-17T11:14:24.107
> 
> 标签：android, in-app-purchase, google-play

我想让我的应用程序免费，但如果用户愿意检索附加功能，应该可以在应用内付款后“激活”它们。

我是否应该将我的应用程序设置为“免费”（或者以后会因为此设置无法更改而导致麻烦？）以及您建议采用哪种方式 - 我应该从自己的网站检索其他内容，还是支付成功后谷歌提供了一种方式吗？

基本上，该应用程序将（并保持）真正有用（我希望）在其免费状态下，我只是想为少数准备支持并且可能希望从中获得更多收益的人提供额外的好东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:09:20.863

是的，将您的应用设置为免费。

您所描述的是免费增值模式，您可以免费提供应用程序，并为高级功能收费：

[http://en.wikipedia.org/wiki/Freemium](http://en.wikipedia.org/wiki/Freemium)

许多 Android 应用程序都使用免费增值模式成功地获利。一个例子是 Angry Birds Space，这是一款下载量最高的免费应用程序，它使用应用内计费来销售 Mighty Eagles 或删除广告。

# android - 应用内视频托管的最佳解决方案

> ID：11070882
> 
> 赞同：2
> 
> 时间：2012-06-17T11:15:27.143
> 
> 标签：android, ios, video, streaming, hosting

我正在为 iOS 和 Android 开发移动应用程序。主要是iOS。其中一个客户拥有相当大的自创视频库（70 多个），其配套网站目前托管在 Vimeo 上。我调查了一段时间后发现，[Vimeo](http://www.vimeo.com "维密欧")不希望并支持[HTTP 实时流媒体](http://en.wikipedia.org/wiki/HTTP_Live_Streaming "HTTP 实时流式传输")以简化将此类视频嵌入 iOS 应用程序中。但也许我在这里遗漏了一些东西。

我的问题是：托管视频以将其嵌入（iOS）应用程序的最佳方式是什么？我明确不想为此使用 HTML 框架，如 UIWebView。

我已经想到了一些解决方案：

*   自托管，因为 HTTP 实时流媒体不再是火箭科学（想想几年前的[真实网络流媒体服务）](http://www.real.com "真实网络")
*   YouTube
*   Vimeo（他们有自己的 iOS 应用程序，所以他们必须自己做一些流媒体，也许嗅探网络流量可以减轻负担）

恐怕这份清单并不完整。所以也许有人对这个话题有一些很棒的想法。是的，如果价格合理，商业计划就不会成为阻碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:39:30.603

谷歌将在几周后的谷歌 I/O上展示[YouTube API——也许这对你来说可能是完美的。](https://developers.google.com/events/io/sessions/gooio2012/1102/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T07:44:42.170

我刚刚发现 Vimeo 推出了除了已建立的 »Plus« 计划之外的另一个付费计划：适用于公司的 »Pro«（199 美元/年）。它的功能之一是 HTTP 实时流。一位工作人员在[论坛上](https://vimeo.com/forums/topic:67118#comment_7277081 "论坛")说：

> 我们确实支持 http 直播。为了回答您最初的问题，我们的正常嵌入代码将无法识别何时适合 http 直播，也不会自动切换到它。因此，您需要在视频的设置页面中使用带有 Http 直播链接的第三方播放器，以便您的视频可以通过 http 直播进行播放。

但目前有一个警告：您不能通过 Vimeos API 直接访问指向 HTTP 流播放列表的链接。在他们的 API 论坛上有一个帖子，人们可以为某些功能投票：[Vimeo API 论坛：通过 API 的 http 直播链接](https://vimeo.com/forums/api/topic:67825 "Vimeo API 论坛：通过 API 的 http 直播链接")

# python - Python oauth2 - 发出请求

> ID：11070885
> 
> 赞同：1
> 
> 时间：2012-06-17T11:16:22.900
> 
> 标签：python, django, api, oauth, vimeo

我想将用户的 vimeo 视频集成到我的 Web 应用程序中，我在 github [https://gist.github.com/2944212](https://gist.github.com/2944212)中获得了此代码，使用该代码我可以获取**oauth_signature**值。

现在我有这个参数。

```
params = {
    'oauth_consumer_key': 'XXXXXXXXXXXXXXXXXXXX',
    'oauth_callback': callback,
    'oauth_nonce': nonce,
    'oauth_signature_method': 'HMAC-SHA1',
    'oauth_signature': 'XXXXXXXXXXXXXXXXXXXX',
    'oauth_timestamp': timestamp,
    'oauth_version': '1.0'
} 
```

有了它，我如何在 Python 中获取**oauth_token** [https://developer.vimeo.com/apis/advanced#oauth ？](https://developer.vimeo.com/apis/advanced#oauth)

有人可以指导我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:54:38.053

使用您发布的代码。只需阅读最后的结果`r.text`应该会给你一个`oauth_token`and `oauth_token_secret`（以及一个 oauth_callback_confirmed 参数）。

你收到的其实是一个请求令牌，需要用户授权：

打开指向 的 Web 浏览器`https://vimeo.com/oauth/authorize?oauth_token=THE_OAUTH_TOKEN_YOU_JUST_RECEIVED`。在那里登录，您将被重定向到您的回调。在回调 URL 的末尾，您将`oauth_token`再次看到您的 URL，以及一个`oauth_verifier`参数，如下所示：

`http://stage.bahai.us/apps/terrace/vimeo-callback?oauth_token=a9fb93ebef0fb42cbb96c92ff917b7ea&oauth_verifier=c7afdb2b65c1d77e0cf09687ddc5a8d5`

现在您可以继续获取访问令牌，这是对 vimeo 执行完整 API 请求所需的。

将 oauth_token 和 oauth_verifier 添加到与您在链接的脚本中所做的类似的请求中。当您签署您的请求时，您需要同时使用您的消费者和您的令牌对其进行签名：

`req.sign_request(signature_method, consumer, token)`

并将此请求发送到`https://vimeo.com/oauth/access_token`端点。这应该给你一个直接的响应，再次通过阅读包含你的访问令牌和访问令牌秘密的响应文本。

# php - PHP：是否有 3rd 方库 --> 像 CodeIgniter 中的活动记录（相同的语法）

> ID：11070889
> 
> 赞同：0
> 
> 时间：2012-06-17T11:16:52.340
> 
> 标签：php, mysql, codeigniter, activerecord, pdo

我想知道是否有像 CodeIgniter 这样的活动记录的第三部分库？ [http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

我现在有很多网站不能使用 CodeIgniter，因为它们不是建立在框架上的。不过，我真的很喜欢 CodeIgniter 活动记录类。因此，我想知道是否存在与 CodeIgniter 具有相同语法的第 3 方类。我发现了一些像 PHP 标准的 PDO，但我不喜欢工作流程。

有谁知道类似的库，或者知道如何从 CodeIgniter 框架中提取活动记录库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:05:54.370

有两个著名的：

*   [推进](http://www.propelorm.org/)
*   [教义](http://www.doctrine-project.org/)

要比较这两者，请查看：

*   [PHP ORM：Doctrine vs. Propel](https://stackoverflow.com/questions/2062473/php-orms-doctrine-vs-propel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:31:40.123

推进和教义是 ORM，如果你只想使用活动记录，你应该看看这个 SO 线程：[什么是好的 PHP 活动记录库？](https://stackoverflow.com/questions/2438467/whats-a-good-php-active-record-library)

附带说明，CI 是开源的，只是未经 OSI 认证。仅此一项不应成为不使用它的理由。 [http://www.hopstudios.com/blog/is_codeigniter_actually_open_source](http://www.hopstudios.com/blog/is_codeigniter_actually_open_source)进行深入了解。

# android - Android应用调试的瓶颈是什么？

> ID：11070894
> 
> 赞同：2
> 
> 时间：2012-06-17T11:17:39.683
> 
> 标签：android, eclipse, debugging, device

我知道有很多关于模拟器的讨论，它太慢了，基本上无法用于日常调试任务。我说的是使用物理设备进行调试。我的应用程序在调试模式下的运行速度比在非调试模式下慢一个数量级。我的意思是字面意义上的“一个数量级”。我可以想到三个可能的瓶颈候选者：

1.  电脑。
2.  安卓设备。
3.  蚀。

在调试期间检查我的计算机显示其在 Windows 7 Ultimate 64 位上的四核 CPU 和 8 GB 内存还有足够的空间。我使用的设备是运行 Gingerbread 的 Samsung Admire，运行 ICS（通用平板电脑）的 Airpad X。我的 Eclipse 是 Indigo Service Release 2 Build id：20120216-1857。任何专家，尤其是那些成功提升 Android 应用程序调试性能的专家，能否提供一些提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:26:23.240

不是一个解决方案，而是一些可能使问题少一点的技巧，好吧，有问题的：

1.  尝试减少运行时写入的日志数量。

2.  您可以正常运行应用程序，然后在运行时对其进行调试。只需通过 eclipse 选择进程，然后在 ddms 视图中选择错误图标（不是启动图标旁边的那个）。

3.  与 #2 相同，但在代码内部：如果您认为合适，请使用“ [waitForDebugger ”。](http://developer.android.com/reference/android/os/Debug.html#waitForDebugger%28%29)

4.  尝试减少需要在调试模式下评估的表达式数量。

# php - 获取标签之间的文本 PHP

> ID：11070896
> 
> 赞同：1
> 
> 时间：2012-06-17T11:18:00.547
> 
> 标签：php, xml, text, tags

我有这个 html 行：

```
<time itemprop="datePublished" datetime="1923-12">December 1923</time> (USA) 
```

如何使用 PHP 从该代码中仅检索“1923 年 12 月（美国）”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:20:08.423

在 php 中使用 strip_tags()

```
echo strip_tags('<time itemprop="datePublished" datetime="1923-12">December 1923</time> (USA)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T11:24:30.650

我不认为你想剥离标签。你的字符串中不止那一行，对吧？

为此使用正则表达式：

```
$time = preg_replace('/<time.*?>(.*?)<\/time>/s', '$1', $str); 
```

编辑：我刚刚读到您想要获取尾随字符串“（美国）”。好的， strip_tags() 符合您的期望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:20:36.643

看来您不想要标签之间的内容，而是标签中没有的内容：您可以使用 php 的[strip_tags](http://php.net/manual/en/function.strip-tags.php)函数。

# ruby-on-rails - 使用 mongoid 中的 simple_form 过滤选择字段中的属性

> ID：11070898
> 
> 赞同：0
> 
> 时间：2012-06-17T11:18:05.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, simple-form

我有这个带有 simple_form 的选择输入：

```
<%= f.input :board, :collection => Board.where(:user_id => current_user.id)%> 
```

我想在选择字段中显示所有具有外部属性`:user_id`数学的板`current_user.id`

我想在选择字段结果中例外。

**我希望选择字段向我显示以前的结果，除非板的标题等于 current_user 的用户名，例如：**

```
<%= f.input :board, :collection => Board.where(:user_id => current_user.id).except(:title => current_user.title) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:38:51.667

修复是下一个查询：

```
Board.where(user_id: current_user.id, :title.ne => current_user.username) 
```

# java - 如何确定分支覆盖率（来自控制流图）？

> ID：11070899
> 
> 赞同：3
> 
> 时间：2012-06-17T11:18:11.263
> 
> 标签：java, testing, code-coverage

我有以下代码（不管它是否是一个好方法）：

```
public boolean adjacent(Cell otherCell) {

  boolean result;
  boolean xdiffersone = Math.abs(getX() - otherCell.getX()) == 1;
  boolean ydiffersone = Math.abs(getY() - otherCell.getY()) == 1;

  if((xdiffersone && !ydiffersone) || (!xdiffersone && ydiffersone)) {

    result = true;
  }
  else {
    result = false;
  }

  return result;
} 
```

该方法的控制流程图：

![控制流图](../Images/dc7d16b17195d054bc43831f985e8e73.png)

我知道语句覆盖意味着控制流图中的所有节点是否都已执行/访问。但究竟什么是分支覆盖？如何从控制流图（或代码）计算/查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:21:00.780

语句覆盖是关于图节点的。分支覆盖是关于图边的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:22:32.323

尝试使用java 代码覆盖工具[Emma 。](http://emma.sourceforge.net/)有[eclipse插件、maven 插件和名为](http://www.eclemma.org/)[Sonar](http://www.sonarsource.org/)的独立产品，它在内部使用 Emma 并检查代码覆盖率。因此，您可以直接或间接使用 Emma。

# performance - LINQ 查询性能

> ID：11070901
> 
> 赞同：1
> 
> 时间：2012-06-17T11:18:41.370
> 
> 标签：performance, linq-to-entities

我有一些表以主键-外键一对多关系在它们之间连接。例如表格书籍和作者。一本书可以有一个作者，每个作者可以有很多本书。如果我有 book 对象并且我需要使用它的作者属性，那么每次在代码中向下钻取性能更好，还是应该拉出作者对象并使用它的属性？

我希望我的问题很清楚，我认为这很容易，但我没有人要问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:28:55.783

只需使用最清晰、最简洁地表达您想要实现的目标的代码。性能将取决于许多因素，但可能已经令人满意。

稍后，如果出现实际的性能问题，您可以更清楚地推断性能，因为您将知道实际的数字（即书籍数量、作者、每本书的修改和读取率、可用 RAM、CPU 负载、数据库服务器负载、网络负载）涉及。

# c# - 日期差异返回虚假的秒数

> ID：11070902
> 
> 赞同：0
> 
> 时间：2012-06-17T11:18:48.030
> 
> 标签：c#, sql-server

我们在客户站点上遇到问题，我们正在导入一个包含两个日期字段（开始和结束日期/时间，精确到秒）的 CSV 文件。导入代码将两个日期之间的差异计算为`TimeSpan`，然后我们将 保存`TotalSeconds`到数据库中（在`real`字段中）。

在我们的开发环境中完美运行 - 但由于某种原因，在客户站点上，时间差在计算中产生了一些小错误，因此 123 秒的时间差经常在数据库中显示为 123.0001 秒或 122.9999 秒. 我们无法在此处重现该问题。

我记得很多年前 Pentium 处理器存在一些问题，它们会产生奇怪的浮点计算错误（因此它们被称为 5.0001-ium 处理器），但我不记得细节了。客户站点上是否可能存在类似问题，即日期/时间计算被特定类型的处理器搞砸了？你能想到这种奇怪行为的其他可能原因吗？

代码非常简单。我已经编辑了一些无关的东西，但它是这样的：

```
DateTime startDate, endDate; 
// set startdate and enddate by parsing from CSV file
var timeDiff = endDate.Subtract(startDate);
// and we save to the database using timeDiff.TotalSeconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:42:52.247

在将其放入数据库之前，将数字四舍五入为整数。

# h2 - 为什么 ScalaQuery 不为外键创建 ddl？

> ID：11070904
> 
> 赞同：2
> 
> 时间：2012-06-17T11:19:09.250
> 
> 标签：h2, ddl, scalaquery, h2db

我使用 ScalaQuery 0.10.0-M1 有以下表定义：

```
import org.scalaquery.ql.basic.{ BasicTable => Table }

object Nodes extends Table[(String, String)]("node") {
    def id = column[String]("id", O.PrimaryKey)
    def name = column[String]("name", O.NotNull)

    def * = id ~ name
    private def uName = index("uk_name", name, unique = true)
}

object Links extends Table[(String, String, String, String)]("link") {
    def id = column[String]("id", O.PrimaryKey)
    def from = column[String]("from_id", O.NotNull)
    def link = column[String]("name", O.NotNull)
    def to = column[String]("to_id", O.NotNull)

    def * = id ~ from ~ link ~ to
    private def ukFromLinkTo = index("uk_FromLinkTo", from ~ link ~ to, unique = true)
    private def fkFrom = foreignKey("fk_Link_Node_From", from, Nodes)(_.id)
    private def fkTo = foreignKey("fk_Link_Node_To", to, Nodes)(_.id)
} 
```

但是在使用此代码段创建（和打印）ddl 时：

```
val db = Database.forURL("jdbc:h2:mem:test1;DB_CLOSE_DELAY=-1", driver = "org.h2.Driver")

db withSession {
    val ddl = (Nodes.ddl ++ Links.ddl)
    ddl.create
    println(ddl.createStatements.mkString("\n"))
} 
```

不会生成或打印外键。

这是为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:34:24.640

看起来可能是因为您的 index 和 foreignKey 方法是私有的。我发现这个问题是使用 scalaquery 搜索唯一列的一部分。我已经有一个非私有索引方法并复制了您的一个 fk 方法，发现正在创建索引，但不是 fk 约束。当我删除“private”关键字时，创建了 fk 约束。

# python - Django 视图/URLS 页面现在正在加载

> ID：11070906
> 
> 赞同：1
> 
> 时间：2012-06-17T11:19:50.687
> 
> 标签：python, django, django-views

多年来一直坚持这一点。目前正在学习 Django 并在其他网站上做了一些工作。开始构建我自己的网站并被视图/ URL 卡住。

我已经构建了一个名为“博客”的应用程序，我想在其中显示新闻帖子。

到目前为止，我已将所有博客项目加载到工作正常的模板中。但是，当我尝试单击“阅读更多”时，该页面不会进入帖子自己的页面。但是，它显示将要加载的页面的位置会告诉您它将加载正确的 URL。所以它通过我想要的方式拉动蛞蝓，但是当您单击按钮时，它只会停留在同一页面上。

如果我将博客文章加载到主页上，我会设法让它完美运行。但是我希望它们加载到 /blog/ 上，显然我不希望它成为我的主页。

我已阅读所有文档，它与我一直遵循的教程略有不同。无论如何，这是我的一些代码，真的希望有人能帮助我！

```
 from django.http import HttpResponse
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext

from blog.models import Blog, NewsPost

def blog_index(request):
    blogs = Blog.objects.filter(active=True)

    return render_to_response('blog/index.html', {
        'blogs':blogs,
    }, context_instance=RequestContext(request))

def blog(request, slug):
    blog = get_object_or_404(Blog, active=True, slug=slug)

    return render_to_response('blog/blog_post.html', {
        'blogs': blogs
    }, context_instance=RequestContext(request))

url(r'blog/', 'blog.views.blog_index', name="blog_index"),
    url(r'blog/(?P<slug>[-\w]+)/$', 'blog.views.blog', name="blog"), 
```

//模型

```
class Blog(TimeStampedActivate):
    title = models.CharField(max_length=255, help_text="Can be anything up to 255 character")
    slug = models.SlugField()
    description = models.TextField(blank=True, help_text="Give a short description of the news post")
    content = models.TextField(blank=True, help_text="This is the main content for the news post")
    user = models.ForeignKey(User, related_name="blog")

    def __unicode__(self):
        return self.title

    @models.permalink
    def get_absolute_url(self):
        return ('blog', (), {
            'slug': self.slug
        }) 
```

谢谢，

乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:42:22.483

您的网址`r'blog/'`末尾没有 $ ，所以我认为 django 将始终匹配此条目而不是`r'blog/(?P<slug>[-\w]+)/$'`条目。我会尝试颠倒顺序，看看是否有帮助：

```
url(r'blog/(?P<slug>[-\w]+)/$', 'blog.views.blog', name="blog"),
url(r'blog/', 'blog.views.blog_index', name="blog_index"), 
```

我以前遇到过这个问题，并花了很多时间试图解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:42:44.207

您的第一个 urlconf 条目正在捕获所有以“blog”开头的 URL。在末尾加上 $ 以终止比赛。

# android - 我无法通过关键字（WHERE KEY_TYPE = TYPE）获取数据并设置适配器 ListView

> ID：11070908
> 
> 赞同：0
> 
> 时间：2012-06-17T11:20:22.493
> 
> 标签：android, sqlite, android-listview

我的代码有问题：

```
public class DBAdapter {

static final String TAG = "DBAdapter";

static final String KEY_ID = "_id";
static final String KEY_NAME = "name";
static final String KEY_ADDRESS = "formatted_address";
static final String KEY_TYPE = "type";
static final String KEY_LAT = "lat";
static final String KEY_LON = "lon";

static final String DATABASE_NAME = "MyDB";
static final String DATABASE_TABLE = "places";
static final int DATABASE_VERSION = 1;

static final String DATABASE_CREATE = "Create table places (_id integer primary key autoincrement, name text, formatted_address text, type text, lat text, lon text);";

final Context context;

DatabaseHelper DBHelper;
SQLiteDatabase db;

public DBAdapter(Context context){
    this.context = context;
    DBHelper = new DatabaseHelper(context);
}

//open database
public DBAdapter open() throws SQLException{
    db = DBHelper.getWritableDatabase();
    return this;
}

//close database
public void close(){
    DBHelper.close();
}

//get all places in database
public Cursor getAll(){
    return db.query(DATABASE_TABLE, new String[] {KEY_ID, KEY_NAME, KEY_TYPE, KEY_ADDRESS,
            KEY_LAT, KEY_LON}, null, null, null, null, null);
}

//get a place by id
public Cursor getPlaceById(String id) throws SQLException{
    Cursor cursor = db.query(true, DATABASE_TABLE, new String[] {KEY_ID, KEY_NAME, KEY_TYPE, KEY_ADDRESS,
            KEY_LAT, KEY_LON}, KEY_ID + "=" + id, null, null, null, null, null);
    if(cursor != null){
        cursor.moveToFirst();
    }
    return cursor;
}

//get places by type
public Cursor getPlaceByType(String type) throws SQLException{
    Cursor cursor = null;
    try{
        cursor = db.query(true, DATABASE_TABLE, new String[] {KEY_ID, KEY_NAME, KEY_TYPE, KEY_ADDRESS,
                KEY_LAT, KEY_LON}, KEY_TYPE + "=" + type, null, null, null, null, null);
        if(cursor != null){
            cursor.moveToFirst();
        }
        return cursor;
    }catch(Exception e){
        e.printStackTrace();
    }
    return cursor;
}

private static class DatabaseHelper extends SQLiteOpenHelper{
    DatabaseHelper(Context context){
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        try{
            db.execSQL(DATABASE_CREATE);
        }catch(SQLException e){
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        Log.w(TAG, "Upgrade database from version " + oldVersion + "to version " + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS places");
        onCreate(db);
    }

} 
```

}

```
public class Database {

private static DBAdapter da;

public Database(Context context){
    da = new DBAdapter(context);
}

/**
 * Get ArrayList of Places from database
 * 
 * @param Cursor cursor
 * @return ArrayList<Place> arrPlaces 
 */
private ArrayList<Place> getArrayListPlace(Cursor cursor){
    ArrayList<Place> arrPlaces = new ArrayList<Place>();
    try{
        if(cursor.moveToFirst()){
            do{ 
                Place place = getPlace(cursor);
                arrPlaces.add(place);
            }while(cursor.moveToNext());
        }
    }catch(Exception e){
        e.printStackTrace();
    }   
    return arrPlaces;
}

/**
 * Get Place from database
 * 
 * @param Cursor cursor
 * @return Place place
 */
private Place getPlace(Cursor cursor){
    Place place = new Place();
    place.set_id(cursor.getString(0));
    place.set_name(cursor.getString(1));
    place.set_type(cursor.getString(2));
    place.set_address(cursor.getString(3));
    place.set_lat(cursor.getString(4));
    place.set_lon(cursor.getString(5));
    return place;
}

/**
 * Get all list places from database
 * 
 * @return ArrayList<Place>
 */
public ArrayList<Place> getAll(){
    da.open();
    Cursor cursor = da.getAll();
    ArrayList<Place> arrPlaces = getArrayListPlace(cursor); 
    da.close();
    return arrPlaces;
}

/**
 * Get place by id from database
 * 
 * @return Place place
 */
public Place getPlaceById(String id){
    da.open();
    Cursor cursor = da.getPlaceById(id);
    Place place = getPlace(cursor);
    da.close(); 
    return place;
}

/**
 * Get list of places by type from database
 * 
 * @return ArrayList<Place>
 */
public ArrayList<Place> getPlaceByType(String type){
    da.open();
    Cursor cursor = da.getPlaceByType(type);
    ArrayList<Place> arrPlaces = getArrayListPlace(cursor); 
    da.close();
    return arrPlaces;
} 
```

有2个错误，其中：

```
//Get Place to show in ListView
    String type = spType.getSelectedItem().toString();
    Database db = new Database(this);
    try{
        arrPlaces = db.getPlaceByType(type);//Can not get data
    }catch(Exception e){
        e.printStackTrace();
    }

    /*
     *  ERROR CODE
     *  Can not show places in ListView
     */
    int length = arrPlaces.size();
    if(length > 0){
        for(int i=0; i<length; i++){
            Place place = arrPlaces.get(i);
            lstID.add(place.get_id());
            lstName.add(place.get_name() + "\n" + place.get_address());
        }

        ArrayAdapter<String> adapterName = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, lstName);
        adapterName.setNotifyOnChange(true);
        lstLocation.setAdapter(adapterName);    
    } 
```

1.  当我尝试按类型获取数据时出错：

    android.database.sqlite.SQLiteException：在“Places”附近：语法错误：，编译时：SELECT DISTINCT _id，name，type，formatted_address，lat，lon FROM places WHERE type=My Places

2.  我无法在 ListView 中显示数据。我错误。

我非常感谢您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:26:15.217

您在查询中缺少引号。当您使用字符串而不是数字时，您需要将其括在引号中。Youe 查询代码应如下所示（注意添加的 `）：

```
 cursor = db.query(true, DATABASE_TABLE, new String[] {KEY_ID, KEY_NAME, KEY_TYPE, KEY_ADDRESS, 
            KEY_LAT, KEY_LON}, KEY_TYPE + "='" + type + "'", null, null, null, null, null); 
```

至于你的清单，你用`findViewById`设置了`lstlocation`吗？如果你这样做了，你没有在你发布的代码中显示它......

# jquery-ui - Jquery RemoveClass 不适用于引导按钮

> ID：11070910
> 
> 赞同：0
> 
> 时间：2012-06-17T11:20:34.413
> 
> 标签：jquery-ui, twitter-bootstrap, background-image, background-color, removeclass

我在使用 Jquery removeClass 功能禁用某个类时遇到问题。类定义如下

```
.btn-purple
{
    background-color: #F1B2E1;
    background-image: -moz-linear-gradient(top, #F1B2E1, #E986D0);
    background-image: -ms-linear-gradient(top, #F1B2E1, #E986D0);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#F1B2E1), to(#E986D0));
    background-image: -webkit-linear-gradient(top, #F1B2E1, #E986D0);
    background-image: -o-linear-gradient(top, #F1B2E1, #E986D0);
    background-image: linear-gradient(top, #F1B2E1, #E986D0);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#F1B2E1', endColorstr='#E986D0', GradientType=0);
    border-color: #0055cc #0055cc #003580;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    filter: progid:dximagetransform.microsoft.gradient(enabled=false);
}
.btn-purple:hover,
.btn-purple:active,
.btn-purple.active,
.btn-purple.disabled,
.btn-purple[disabled] {
  background-color: #E986D0;
} 
```

在 javascript 文件中，我有以下内容

```
$(function(){
    $("#1").click(function(){
        $("#1").removeClass("btn-purple", 1000);
        return false
    });

}); 
```

这是我希望从中删除类定义的部分的 HTML 标记

```
<div id="1" class="span3 well homeBox opaque btn-purple">
    <span class="siteBoxContent">What do we do?</span>
</div> 
```

这是我在 Webkit 错误控制台中调试时遇到的错误

```
TypeError: 'undefined' is not an object (evaluating 'fx.end[0]')      jquery.effects.core.js:32 
```

如果我尝试删除像“homeBox”这样的类，removeClass 可以正常工作。这是 homeBox 类定义的定义

```
.homeBox
{
    position:relative;
    width:26.666666666667%;
    height:200px;
} 
```

所以我猜测 jQuery 可能会在删除具有背景图像、颜色甚至过滤器属性的类时遇到问题。如果您需要更多信息，请告诉我。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:22:41.620

利用：

```
$("#1").removeClass("btn-purple"); 
```

代替：

```
$("#1").removeClass("btn-purple", 1000); 
```

因为没有第二个参数可用，并且`1000`在那里没有任何意义。

它的两个可能的签名是：

```
.removeClass( [className] )
.removeClass( function(index, class) ) 
```

**更多信息：**

*   [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:26:03.987

您使用不存在的函数签名：

```
removeClass("classname", integer) // WRONG 
```

JQuery AFAIK 中没有这种可能性，您可以这样做：

```
.removeClass( [className] )
.removeClass( function(index, class) ) // from version 1.4 
```

我不明白 1000 代表什么，但我敢打赌，删除它应该可以解决问题。

# java - 使 String 只接受字母（没有数字）。

> ID：11070912
> 
> 赞同：4
> 
> 时间：2012-06-17T11:20:42.493
> 
> 标签：java, string, swing, netbeans-7, jtextfield

是否可以在 java 中的字符串中只允许字母或数字？例如 ：

```
String Text;
Text = jTextField1.getText(); 
```

现在

```
if (Text is a number) {System.out.println("Invalid Input");} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T11:23:06.940

你有两种选择

*   [JFormattedTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)具有适当的`Formatter`或`InputVerifier`

*   使用[文档过滤器](https://stackoverflow.com/a/9430683/714968)

* * *

*   注意不要在[命名约定](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29)`String Text;`中使用（API 名称或其方法的可能保留字）使用`String text;`更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T12:54:29.950

补充：你也可以像下面这样做，虽然我推荐 mKorbel 的回答。

```
try  {
    System.out.println(Integer.parseInt(Text) + "is a valid input.");
} catch (Exception e) {
    System.out.println("The input "+ Text + "is invalid");
} 
```

# java - XMLPull - 在基类和派生类之间拆分节点解析

> ID：11070918
> 
> 赞同：0
> 
> 时间：2012-06-17T11:21:55.113
> 
> 标签：java, xml, xmlpullparser

我正在查看 XML Pull 解析方法来解析以下文档：

```
<layout>
  <button height="20" width="20" text="Hello world" />
  <image height="10" width="10" img="foo.png" />
</layout> 
```

并生成相应的 Java 对象。我有一个抽象基类组件，它的职责是描述一个具有高度和宽度的通用组件，它应该能够通过解析传递的“节点”的相应 XML 属性来获取这些值（更准确地说，解析器指向节点）。

从 Component 派生，我有两个具体的类 Button 和 Image，它们分别添加一个文本和一个图像。他们应该能够从 XML 属性初始化这些值。

这是类实现的草图：

```
public abstract class Component {
    public int width;
    public int height;

    public Component(XmlPullParser parser) {
        //TODO ???
    }
}

public class Button extends Component {
    public String text;

    public Button(XmlPullParser parser) {
        super(parser);
        //TODO ???
    }
}

public class Image extends Component {
    public String img;

    public Image(XmlPullParser parser) {
        super(parser);
        //TODO ???
    }
} 
```

问题是，如何实现解析来获得这种行为？我主要担心的是，当您在解析器上调用 nextTag() 时，解析器本身会被“修改”。那么，如果 Component 超类读取整个节点以获取宽度和高度（调用 super() 构造函数），派生类如何读取同一个节点来初始化自己？

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:27:15.043

我最终放弃了这条路，选择建立一个内存对象树。这里的实现：[http](http://www.bearcave.com/software/java/xml/treebuilder.html) ://www.bearcave.com/software/java/xml/treebuilder.html非常快，因为它在内部使用 XMLPull 解析并且消耗的内存非常少。

# python - 要拆分的正则表达式

> ID：11070920
> 
> 赞同：0
> 
> 时间：2012-06-17T11:22:10.713
> 
> 标签：python, regex

我试图理解python中的正则表达式。如何用正则表达式拆分以下句子？

```
"familyname, Givenname A.15.10" 
```

这就像 python 正则表达式[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)中的电话簿。该人可能有 2 个或多个姓氏和 2 个或多个名字。在姓氏存在 ', ' 和名字之后存在 ''。最后一个是人的办公室。在知道之前我所做的是

```
 import re
 file=open('file.txt','r')
 data=file.readlines()
 for i in range(90):
person=re.split('[,\.]',data[i],maxsplit=2)
print(person) 
```

它给了我这样的结果

```
 ['Wegner', ' Sven Ake G', '15.10\n'] 
```

我想要类似的东西

```
 ['Wegner', ' Sven Ake', 'G', '15', '10']. any idea? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T11:42:55.393

在正则表达式世界中，“匹配”通常比“拆分”更容易。当您“匹配”时，您直接告诉 RE 引擎您正在寻找什么样的子字符串，而不是专注于分隔字符。您问题中的要求有点不清楚，但让我们假设

*   “姓”是第一个逗号之前的所有内容
*   “姓名”是“办公室”之前的一切
*   "office" 由字符串末尾的非空格字符组成

这翻译成这样的正则表达式语言：

```
rr = r"""
    ^         # begin
    ([^,]+)   # match everything but a comma
    (.+?)     # match everything, until next match occurs
    (\S+)     # non-space characters
    $         # end
""" 
```

测试：

```
import re
rr = re.compile(rr, re.VERBOSE)
print rr.findall("de Batz de Castelmore d'Artagnan, Charles Ogier W.12.345")
# [("de Batz de Castelmore d'Artagnan", ', Charles Ogier ', 'W.12.345')] 
```

更新：

```
rr = r"""
    ^         # begin
    ([^,]+)   # match everything but a comma
    [,\s]+    # a comma and spaces
    (.+?)     # match everything until the next match
    \s*       # spaces
    ([A-Z])   # an uppercase letter
    \.        # a dot
    (\d+)     # some digits
    \.        # a dot
    (\d+)     # some digits
    \s*       # maybe some spaces or newlines
    $         # end
"""

import re
rr = re.compile(rr, re.VERBOSE)
s = 'Wegner, Sven Ake G.15.10\n' 
print rr.findall(s)
# [('Wegner', 'Sven Ake', 'G', '15', '10')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T11:34:50.080

您要做的是首先将姓氏除以 ,

`familyname, rest = text.split(',', 1)`

然后你想用右边的第一个空间分割办公室。

`givenname, office = rest.rsplit(' ', 1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:39:21.720

假设姓氏没有逗号，您可以轻松使用它们。给定的名称对点很敏感。例如：

```
Harney, PJ A.15.10
Harvey, P.J. A.15.10 
```

这意味着您可能应该通过最后的掩码（正则表达式“maskpattern $”）修剪记录的其余部分（姓氏已出）。

# c# - 我在将 live ID 与我的 MVC 网站集成时遇到了困难

> ID：11070928
> 
> 赞同：3
> 
> 时间：2012-06-17T11:23:15.440
> 
> 标签：c#, asp.net-mvc, liveid

我在 3 天前开始搜索，通过验证用户并取回包含以下数据的登录会话，我已经达到了一个很好的点：

```
access_token: "xxxx"
authentication_token: "xxxx"
expires: "1339934686"
expires_in: 3600 
```

我想获取用户数据，如果您有先前的知识，您会知道我需要解码 `authentication_token`值以获取包含一些属性（包括 UserID）的 JSON 对象，以获取用户数据。

当我尝试`JsonWebToken.cs`在我的 MVC 站点中包含由 Microsoft 示例提供的类时，它无法解析一些引用，例如：

```
System.Runtime.Serialization.Json;
DataContractJsonSerializer; 
```

当我搜索时，我发现我必须添加对

```
System.Runtime.Serialization.Json,
System.ServiceModel,
System.ServiceModel.Web. 
```

当我这样做时，没有任何新的事情发生。

最后，我为这篇长文道歉，但我的目的是解释问题和我经历的步骤。

我希望任何人都可以给我一个简单的 MVC 示例 URL，或者通过任何原因帮助我进行令牌解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:19:21.400

也许这不会完全涵盖您的问题，但这是一个很好的帖子，其中 ASP.NET MVC 应用程序使用 LiveID 但不使用 ASP.NET Membership 提供程序：

[http://blog.smarx.com/posts/actually-ima-cia-agent](http://blog.smarx.com/posts/actually-i-m-a-cia-agent)

1) 文档参考在这里：[Windows Live ID Web Authentication SDK](http://msdn.microsoft.com/en-us/library/bb676633.aspx)

2) 和[Live Connect 开发者中心](http://msdn.microsoft.com/en-us/live//default.aspx)

# c++ - 擦除 Deque 容器的元素

> ID：11070929
> 
> 赞同：0
> 
> 时间：2012-06-17T11:23:18.390
> 
> 标签：c++, deque

我想删除双端队列的元素。当你有一个包含结构的双端队列并且你想从后到前打印元素，但你不想打印具有相同结构元素的元素，你怎么做？

我有一个这样的结构：

```
struct New_Array {                    
    array<array<int,4>,4> mytable;       
    int h;
}; 
```

双端队列中填充了前一个过程中的元素。 **您想打印双端队列中的所有元素，但您打印的每个表都必须有一个唯一的 "h"**。只有您找到的带有特定“h”的第一个表必须打印，不应打印具有相同“h”的其他表。我认为这也可以通过“查找”功能来实现。

从双端队列的后面开始，我们会发现“h”的值将是 0，并且它会在双端队列的前面增加它的值。

我试过这个：

```
void Find_Solution_Path(deque<New_Array> Mydeque)
{
    while(Mydeque.size()>0)
    {
        New_Array y=Mydeque.back();
        PrintBoard(y);         //this is a function that prints the 4x4 array.
        Mydeque.pop_back();
        for(unsigned int i=0; i<Mydeque.size(); i++)
        {
            New_Array xxx=Mydeque[i];
            if(xxx.h==y.h)
            {
                Mydeque.erase(Mydeque[i]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:35:26.960

我不会使用双端队列而是一组。如果您绝对需要双端队列，请创建一个集合。使用反映唯一性的适当标准 < 定义 < 运算符。您将每个打印的元素插入到集合中。在打印之前检查元素是否已经存在于集合中（查找）。

HTH，马丁

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:37:57.207

一种方法是使用[std::unique_copy](http://en.cppreference.com/w/cpp/algorithm/unique_copy)。

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <deque>

struct New_Array {
    array<array<int,4>,4> mytable;
    int h;
    // unique_copy needs this:
    bool operator==(const New_Array& other) { return h == other.h; }
};

ostream& operator<<(ostream& out, const New_Array& v)
{
    return out << v.h;
}

int main()
{
    std::deque<New_Array> q;
    New_Array temp;

    // {1, 1, 2, 2, 3, 3}
    temp.h = 1;
    q.push_back(temp);
    q.push_back(temp);
    temp.h = 2;
    q.push_back(temp);
    q.push_back(temp);
    temp.h = 3;
    q.push_back(temp);
    q.push_back(temp);

    unique_copy(q.begin(), q.end(), ostream_iterator<New_Array>(cout, "\n"));
} 
```

需要对范围进行**排序**才能`unique_copy`正常工作。在上述情况下不需要排序，因为我们按顺序插入了元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T12:44:58.783

我相信@Martin 的回答可能是最好的解决方案。如果您无法更改返回 a 的函数的签名，则`deque`可以从中构造 a [`set`](http://en.cppreference.com/w/cpp/container/set)，所有重复项将自动消失：

```
// First you need to declare a compare function for NewArray objects
struct NewArrayComp {
    bool operator()(const NewArray& a1, const NewArray& a2) const {
        return a1.h < a2.h;
    }
};

// Then you can construct a set from the deque
deque<NewArray> dq;
// ...
std::set<NewArray, NewArrayComp> s(dq.begin(), dq.end());

// Finally you can just print the arrays (without duplicates)
for (const auto& a : s)
    PrintBoard(a); 
```

此解决方案的复杂度为 O(n log n)，而您的代码为 O(n^2)。

此外，如果您不想支付将元素从复制到的成本，`deque`您`set`可以在 C++11 中使用移动语义：

```
std::set<NewArray, NewArrayComp> s;
std::move(dq.begin(), dq.end(), std::inserter(s, s.begin())); 
```

这只会移动所有元素而不复制它们。

# android - 在android中运行应用程序的标志类型

> ID：11070933
> 
> 赞同：-1
> 
> 时间：2012-06-17T11:23:32.370
> 
> 标签：android

**请帮我。**

*   我想知道在 android 中运行应用程序的标志类型。在采访中问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:27:11.777

也许他们要求[启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)？您可以设置它以确保如果旧活动在历史堆栈中，您永远不会调用新活动。

# javascript - 类上的 Javascript 可拖动事件处理程序 - 设置多次

> ID：11070934
> 
> 赞同：1
> 
> 时间：2012-06-17T11:24:07.973
> 
> 标签：javascript, jquery, class, event-handling, draggable

在大多数情况下，我一直在设置一个事件类处理程序，该处理程序将应用于随后创建的该类的元素，如下所示：

`$('#container').on('click', '.myClass', function (e) {...`

但是，我不知道如何使用`draggable`. 以下不影响随后创建的对象：

`$('.myClass').draggable(...`

因此，在创建每个新的可拖动对象后，我一直在反复使该类可拖动（使用上面的行）。

我想知道的是这是在类上创建多个事件处理程序，还是我只是重新建立同一个处理程序？有没有`.off()`我应该使用的等价物？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:30:09.587

您可以使用`destroy`方法删除可拖动，然后重新初始化它

```
$('.myClass').draggable('destroy').draggable(... 
```

在这里阅读更多[http://jqueryui.com/demos/draggable/#method-destroy](http://jqueryui.com/demos/draggable/#method-destroy)

# php - 是否可以使用 PHP 创建音乐播放器？

> ID：11070938
> 
> 赞同：-1
> 
> 时间：2012-06-17T11:24:59.363
> 
> 标签：php, jquery, ajax

我正在考虑为我的项目创建一个像 zippyshare 这样的波形的音乐播放器

[http://www52.zippyshare.com/v/41958620/file.html](http://www52.zippyshare.com/v/41958620/file.html)

我正在考虑将这首歌放在我的本地服务器中，然后用 javascript 播放。

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:28:48.133

播放音频的网站将使用 Flash 或新的 html5`<audio>`标签。创建者将使用您将生成的 php `src=`，然后将控件链接到按钮。从那里你有一个工作的音频播放器。有关音频标签的更多信息在[这里](http://www.w3schools.com/html5/tag_audio.asp)

在这个项目中，波形生成会很困难。PHP 不会是你选择的工具，所以你最好的选择是找到一个可以生成音频波形的库。虽然显然[这家伙](http://andrewfreiday.com/2010/04/29/generating-mp3-waveforms-with-php/)找到了办法。

# html - IE9多重 标签阻止进一步的 HTTP 请求

> ID：11070941
> 
> 赞同：0
> 
> 时间：2012-06-17T11:25:30.497
> 
> 标签：html, audio, internet-explorer-9

我有一个带有多个标签的网页，例如：

```
<audio controls="controls" preload="metadata">
    <source type="audio/mpeg" src="file1.mp3"></source>
</audio> 
```

每个标签播放不同的文件，每个 mp3 文件都相当长（即它们需要一分钟才能完全下载）。

如果我有超过 4 个标签，IE9 中只会显示前 4 个。其他的将一一显示，每次前 4 个音频播放器中的一个完成加载其音频文件时。

事实上，在其中一个音频播放器停止加载之前，单击页面中的任何超链接都不会加载相应的 HTTP 资源。似乎音频标签对同时 HTTP 连接的数量设置了硬限制。IE9 通常有更高的限制，所以这看起来很奇怪。

其他需要注意的事项：

*   音频文件自行加载和播放

    *   我不需要同时播放文件，我只想有一个页面显示不同文件的多个音频播放器

    *   我尝试对预加载属性使用不同的值（无 | 元数据 | 自动）。'none' 在 IE9 中完全隐藏了音频播放器，元数据和自动显示同样的问题。

    *   [这个答案](https://stackoverflow.com/a/6050771/532562 "这个")提到IE9中最多40个玩家应该没问题，但我不能超过4个？

任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T12:28:42.647

**当音频标签的预加载**属性设置为“**元数据**”时，IE9 确实存在一些故障。

更多响应行为的可能解决方法是：

1.  环境`preload = "none"`

2.  用图像包装`<audio>`标签或用背景图像包装 div

3.  将“click”事件附加到将触发的图像/div：`document.getElementById('audio1').play()`

希望它适合您的需求。

# django - Django 子模型中的空值

> ID：11070942
> 
> 赞同：1
> 
> 时间：2012-06-17T11:25:30.807
> 
> 标签：django, django-models

有人可以解释这个简单但具有欺骗性的异常吗？

有两个模型，其中`B`是 的子模型`A`：

```
# models.py
class A(models.Model):
    a = models.IntegerField(blank=True)

class B(A):
    b = models.IntegerField(blank=True) 
```

很简单，对吧？然而在运行时：

```
>>> A()
<A: A object>
>>> B()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "django/db/models/base.py", line 357, in __init__
    setattr(self, field.attname, val)
  File "django/db/models/fields/related.py", line 271, in __set__
    (instance._meta.object_name, self.related.get_accessor_name()))
ValueError: Cannot assign None: "B.b" does not allow null values. 
```

这里发生了什么事？为什么`A.a`表现得很好，`B.b`却不高兴自己是空白的？

* * *

编辑：我确实注意到设置`blank=True`对上述行为没有影响，但这仍然不能解释这个问题。

现在这个：（？！？！？！）

```
>>> a = A(a=5)
>>> b = B(b=6)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "django/db/models/base.py", line 357, in __init__
    setattr(self, field.attname, val)
  File "django/db/models/fields/related.py", line 275, in __set__
    self.related.get_accessor_name(), self.related.opts.object_name))
ValueError: Cannot assign "6": "B.b" must be a "B" instance. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:09:14.900

好的，我设法解决了这个烂摊子。

这里的问题是模型和字段具有相同的名称（不区分大小写）。我在有问题的模型以及此处的示例（`A.a`和`B.b`）中都有这个。

这是一个 Django 问题，因为该错误与真正的问题无关。

底线 - 没有任何与模型名称同名的字段。

# iphone - GCD：如何从两个线程写入和读取变量

> ID：11070947
> 
> 赞同：1
> 
> 时间：2012-06-17T11:26:28.247
> 
> 标签：iphone, objective-c, multithreading, ipad, grand-central-dispatch

无论如何，这听起来可能是一个新手问题我是 GCD 的新手，

我正在创建并运行以下两个线程。第一个将数据放入 ivar `mMutableArray`，第二个从中读取数据。我如何锁定和解锁线程以避免崩溃并保持代码线程安全？

```
// Thread for writing data into mutable array 
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
if (timer) {
    dispatch_source_set_timer(timer, dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC * interval), interval * NSEC_PER_SEC, leeway);
    dispatch_source_set_event_handler(timer, ^{
        ...
        // Put data into ivar
        [mMutableArray addObject:someObject];
        ...
    });
    dispatch_resume(timer);
}

// Thread for reading from mutable array
dispatch_source_t timer1 = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
if (timer1) {
    dispatch_source_set_timer(timer1, dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC * interval), interval * NSEC_PER_SEC, leeway);
    dispatch_source_set_event_handler(timer1, ^{
        ...
        if (mMutableArray) {
            // Read data from ivar
            SomeObject* someobject = [mMutableArray lastObject];
        }
        ...
    });
    dispatch_resume(timer1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T13:20:00.673

你用错了，通过锁定对变量的访问，你只是失去了 GCD 的任何好处。创建一个与您要修改的变量相关联的串行队列（在本例中为可变数组）。然后使用该队列对其进行写入和读取，这将以保证的串行顺序发生并且具有最小的锁定开销。[您可以在http://www.fieryrobot.com/blog/2010/09/01/synchronization-using-grand-central-dispatch/](http://www.fieryrobot.com/blog/2010/09/01/synchronization-using-grand-central-dispatch/)上的“异步设置器”中阅读有关它的更多信息。只要您通过其关联的调度队列访问共享变量，您就不会遇到并发问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T12:42:37.683

我在我的项目中使用了互斥锁，我对它目前的工作方式非常满意。

创建互斥体并初始化它

```
pthread_mutex_t *mutexLock;
pthread_mutex_init(&_mutex, NULL); 
```

然后将锁放在您的代码周围，一旦第二个线程尝试获取锁，它将等到第一个线程再次释放锁。请注意，您仍然可能想检查第一个线程是否实际上是写入它的线程。

```
pthread_mutex_lock(self_mutex);
{
    ** Code here
}
pthread_mutex_unlock(self_mutex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:31:54.237

您仍然可以在 GCD 的关键部分上使用 @synchronized

# ios - MPMoviePlayerController 停止并继续在 3G 网络上播放

> ID：11070950
> 
> 赞同：0
> 
> 时间：2012-06-17T11:26:48.280
> 
> 标签：ios, url, stream, mpmovieplayercontroller

我正在为本地广播电台构建一个 iPhone 应用程序。他们有一个 URL，其中有一个可用于直播的 MP3。我设置 MPMoviePlayerController 对其进行流式传输，但每 10 秒左右会停止大约 4 秒并继续播放。

我认为这可能是由于缓冲。我想知道是否有任何方法可以改善这一点并让它不会停止。在 WiFi 上它工作正常。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:28:37.427

如果 mp3 很大，那么它会缓冲这是正常的行为，因为它在 wifi 上工作正常，那么你很可能没有任何问题

# python - Python BeautifulSoup 使用 re.compile 查找字符串结尾

> ID：11070955
> 
> 赞同：1
> 
> 时间：2012-06-17T11:27:29.290
> 
> 标签：python, beautifulsoup

使用以下示例，我如何利用 BeautifulSoup 查找（或选择）第二个输入元素。

```
<form>
<input id="a:b:c" ...>
<input id="a:b" ...>

</form> 
```

我尝试使用 .find('input', id=re.compile('b')) 这当然给了我第一个元素。

我正在寻找一种直接进入第二个的方法，而不使用 FindAll 和迭代。

有没有办法改进正则表达式？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:42:35.053

根据[BeautifulSoup 文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#the-keyword-arguments)，如果您确切知道要查找的 ID，则可以将其作为字符串而不是正则表达式传递：

```
soup.findall('input', id='a:b') 
```

否则，如果您总是在寻找`input`与您的正则表达式完全匹配的第二个，则文档建议`soup.findall`为您提供一个列表而不是生成器。这意味着您不需要迭代，因为您可以直接询问第二个结果：

```
soup.findall('input', id=re.compile('b'))[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:30:52.057

在你的正则表达式中在 b 之后添加 $ ，这应该可以解决问题。

# c# - 我怎样才能完成这个随机复杂的工作？C＃

> ID：11070960
> 
> 赞同：1
> 
> 时间：2012-06-17T11:28:16.797
> 
> 标签：c#, .net, random

我必须做一个软件，它真的很复杂，我的意思是，真的不知道如何完成它。有很多细节，但我会在这里写一个我需要的简单示例。

1.  用户输入多个单词。
2.  用户输入文件夹
3.  程序工作：

文件夹总是变的！在那个文件夹中，我有这样的文件：

File1.txt File2.txt File3.txt File4.txt

在文件中（所有相同的结构）。就像 file1.txt：

word1 word2 word.. wordn

也许 File1.txt 有 100 个单词，而 File2.txt 只有 10 个。

如果用户输入的单词是 10 个。软件要遍历尽可能多的文件，从中得到 10 个单词。

忘了说，这10个字，不应该是从每一行的开头。

如果 file1.txt 是：

单词1 单词2 单词3 单词4 单词5

我想把 word3 去掉。或word2，没关系，但它必须是随机的。

想法是尽快使过程随机化。在这种情况下，如果我能从 File1.txt 中得到 1 个单词，从 File4.txt 中得到 1 个单词，从 File2.txt 中得到 2 个单词，从 File3.txt 中得到 1 个单词，那就太棒了

我怎么能随机化这些东西以这种方式进行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:43:50.827

像这样的东西：

阅读所需文件。将每个文件中的单词复制并拆分为一个数组。从该数组中选择 n 个随机单词。

可能有很多方法可以解决这个问题，但上述方法非常简单。研究我列出的每个部分，您应该会发现自己能够完成整个问题。如果问题看起来太大；分而治之！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:40:10.893

以下是一种非常好的方法，可以让一些软件快速启动并运行：

尽快尝试在应用程序中查看您想要的接口（即您的应用程序的边界是什么，进入您的应用程序以及从您的应用程序中输出什么）。

然后，如果抽象了某个接口，则提供该接口的随机实现，这只是您所期望的。（例如，如果你想有一些数据源，你可以有一个 ISomeDataSource，它有一个 ReadAll 方法，你可以非常快速地提供一个 RandomSomeDataSource，它有一个返回一些数据的 ReadAll。

这样一来，您就可以快速解决这个复杂的问题，灵活地进行更改，并且您会看到所得到的结果。一旦您的“简单路径”开始工作，您就可以实现所有这些接口，届时这些接口很有可能是可测试的，并且产品所有者也可以非常快速地检查您的整个应用程序，即他可以在何时说出他想要什么他看到了他得到了什么。（工作真的很好）

**具体的**

有一个 InputWords 的接口，让我们调用它

```
interface IWordInput
{
    void ReadWords(string[] words);
} 
```

和文件夹输入

```
interface IFolderInput
{ 
    void InputFolder(string path);
} 
```

和一个随机词源

```
interface IWordSource
{
    void ReadAllWords(string path, out string[] words);
    string GetRandomWord(string[] words);
} 
```

它来了：

```
 class RandomWordSource : IWordSource
 {
     public ReadAllWords(string path, out string[] words)
     {
         // somewhat like
         words = new[] string;
         words.Add("word1");
         words.Add("word2);

         // and so on
     }

     public string GetRandomWord(string[] words)
     {
          // sic
          return words.FirstOrDefault();
     } 
```

# java - 如何在android中将TCP Sockets从一个Activity发送到另一个Activity？

> ID：11070966
> 
> 赞同：0
> 
> 时间：2012-06-17T11:29:38.093
> 
> 标签：java, android, sockets, android-activity

假设我在活动 A 中创建了一个客户端 TCP 套接字。我想将该套接字发送到活动 B。现在在活动 B 中，基于某些条件我将关闭该套接字。问题是 intent.putExtra() 不支持发送套接字。那么该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:35:06.790

如果您认为有多个活动“拥有”一个套接字，那么它们都不应该“拥有”该套接字。其他东西，比如 a `Service`，应该负责管理套接字。在这种情况下，Activity A 可以启动 a`Service`来做套接字工作，而 Activity B 可以在不再需要套接字时停止服务。

否则，如果这些活动是紧密耦合的，那么它们不应该是单独的活动。活动被设计为松散耦合，类似于 Web 应用程序中的网页。

# javascript - 检测 window.location 的变化

> ID：11070968
> 
> 赞同：2
> 
> 时间：2012-06-17T11:30:02.570
> 
> 标签：javascript, jquery

我正在尝试检测 window.location 中的更改（例如，如果用户尝试重新加载页面，则会收到通知），但我似乎找不到这样做的方法。是否有一些与之相关的事件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T11:31:49.710

`unload`当用户离开页面时触发该事件。在某些浏览器中还有一个`beforeunload`事件，但[在 Opera 中不支持](https://stackoverflow.com/a/4509078/238978)。

# node.js - NodeJS + MongoDB：具有特定条件的 find()

> ID：11070971
> 
> 赞同：0
> 
> 时间：2012-06-17T11:31:10.807
> 
> 标签：node.js, mongodb, database

我不知道如何做到这一点，所以我需要你的建议。我有 4 个复选框的表单：

```
<input type="checkbox" class="checkbox" id="check_stain">
<input type="checkbox" class="checkbox" id="check_black">
<input type="checkbox" class="checkbox" id="check_titan">
<input type="checkbox" class="checkbox" id="check_special"> 
```

我用简单的提交发送数据，所以如果 check_stain 被选中，那么 req.body.check_stain 将是“on”，如果不是 - “undefined”。

在我的数据库中，我收集了“公司”，其中包含几个对象，每个对象都包含这样的模式：

```
{...
    "stain": "false",
    "black": "true",
    "titan": "false",
    "special": "true",
...} 
```

值是简单的字符串。因此，我需要获取指定复选框为真（打开）的每个对象，但不包括那些没有（未定义）的对象。换句话说，我想创建一个简单的搜索算法。让我举个例子：我们检查 check_stain 并且我们应该得到污点为“真”的每个对象。也许其他值将是“真”/“假”（没关系）。如果我们选择 check_stain 和 check_black，我们会得到有污点 & black = "true" 的对象，其他字段不感兴趣。

我总是发现这样的代码：

```
collection.find({ %my-condition% } ,function(err, companies) {
    companies.each(function(err, company){
        //do smth with found
    });
}); 
```

但我不知道如何写条件来查找。我想，我应该在请求中使用 $or 运算符。我阅读了文档，但我仍然无法得到它。谢谢。

**更新：嗯，这似乎是我的问题的解决方案：**

```
if (req.body.sort_query == 'req-steel') {
var condition = {}
if (req.body.check_stain == "on") {condition['stain'] = 'true';}
if (req.body.check_black == "on") {condition['black'] = 'true';}
if (req.body.check_titan == "on") {condition['titan'] = 'true';}
if (req.body.check_other == "on") {condition['special'] = 'true';}
for (var i in condition) {
    if (condition[i] != "true") {
        delete condition[i];
    }
}
var companies_list = new Array();
collection.find(condition, function (err, companies) {
    companies.each(function (err, company) {
        //do smth
    });
});
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:04:23.307

例如黑色和污点是真的：

```
var condition = {
    "stain": "false",
    "black": "true",
    "titan": "false",
    "special": "true",
}

for (var i in condition) {
    if (condition[i] != "true") {
        delete condition[i];
    }
}

collection.find(condition ,function(err, companies) {
    companies.each(function(err, company){
        //do smth with found
    });
}); 
```

[**现场条件DEMO**](http://jsfiddle.net/79ZGH/)

# delphi - 如何在繁重的计算过程中使 C++ Builder 中的接口响应？

> ID：11070979
> 
> 赞同：3
> 
> 时间：2012-06-17T11:32:07.430
> 
> 标签：delphi, user-interface, c++builder

我有一个用 C++ Builder 6 编写的软件（是的，我知道它已经非常过时了，我不会重写它）。它进行繁重的数字运算，需要几分钟才能完成。我希望界面在这些计算期间能够响应。我记得在 Delphi 中有一个非常简单的解决方案来解决这个问题——调用表单/应用程序的特殊方法，但我不记得它是什么了。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T11:33:54.807

`Application.ProcessMessages();`但它有[黑暗的一面](http://delphi.about.com/od/objectpascalide/a/delphi-processmessages-dark-side.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T11:35:17.617

在德尔福中，这是`Application.Processmessages()`. 请注意，调用该方法有一些副作用，就像[这里](http://delphi.about.com/od/objectpascalide/a/delphi-processmessages-dark-side.htm)描述的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T23:54:51.183

你知道你必须这样做，安德鲁。你知道你必须在一个单独的线程中处理数字。现在去实施它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T11:39:18.830

您可以修改程序以在不会锁定您的 GUI 的后台线程中执行所有数字运算。比这里的其他答案更复杂，但它是您可以选择的。

# php - 致命错误：未捕获的 OAuthException：发生意外错误。请稍后重试您的请求

> ID：11070981
> 
> 赞同：0
> 
> 时间：2012-06-17T11:32:50.063
> 
> 标签：php, facebook, facebook-graph-api

我试图在图形 API 的帮助下将内容发布到用户的墙上，但我不断收到一条错误消息：致命错误：未捕获的 OAuthException：发生了意外错误。请稍后重试您的请求。

我的代码如下：

```
$facebook = new Facebook(array(
    'appId' => 'appID',
    'secret' => 'SECRET',
    'cookie' => true
));

$access_token = $facebook->getAccessToken();
$user = $facebook->getUser();

if($user != 0) 
{

    $facebook->api('/me/predict-edit-add:predict', 'post', array(
        'scope' =>  'publish_stream',
        'winning_team' => 'http://samples.ogp.me/413385652011237'
    ));
} 
```

而且，我尝试更改数组中winning_team 的URL，但我不确定什么是可接受的值。我尝试在我的网站上提供指向获胜团队页面的链接，并收到另一条错误消息，指出该值不正确。

谢谢， 兰斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:47:49.440

> 我正在尝试将内容发布到用户的墙上

不，不是。您要做的是发布一个 Open Graph 操作，这与简单的墙*帖*不同。

这立即引出了一个问题，您的行动是否已经获得 Facebook 的批准……？

# deployment - 在 jboss 6 netbeans 7.0.1 上部署失败

> ID：11070984
> 
> 赞同：2
> 
> 时间：2012-06-17T11:33:45.763
> 
> 标签：deployment, netbeans-7, resteasy, jboss6.x

我创建了一个示例 resteasy 应用程序 Web 服务是这样的：

```
package com.mycompany.mavenproject1;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.Response;

@Path("/")
public class HelloService {

@GET
@Path("/Hello/{name}")
public Response printMessage(@PathParam("name") String name) {
return Response.status(200).entity("Hello " + name).build();
}
} 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany</groupId>
    <artifactId>mavenproject1</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>mavenproject1 Java EE 6 Webapp</name>
    <url>http://maven.apache.org</url>
    <repositories>
        <repository>
            <id>java.net2</id>
            <name>Repository hosting the jee6 artifacts</name>
            <url>http://download.java.net/maven/2</url>
        </repository>
    </repositories>
    <dependencies>
        <dependency>
            <groupId>org.jboss.resteasy</groupId>
            <artifactId>resteasy-jaxrs-all</artifactId>
            <version>2.2.1.GA</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.2</version>
            <scope>test</scope>
        </dependency>

    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1-beta-1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
        </plugins>
        <finalName>mavenproject1</finalName>
    </build>
    <profiles>
        <profile>
            <id>endorsed</id>
            <activation>
                <property>
                    <name>sun.boot.class.path</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <version>2.0.2</version>
                        <configuration>
                            <!-- javaee6 contains upgrades of APIs contained within the JDK itself.
                                 As such these need to be placed on the bootclasspath, rather than classpath of the
                                 compiler.
                                 If you don't make use of these new updated API, you can delete the profile.
                                 On non-SUN jdk, you will need to create a similar profile for your jdk, with the similar property as sun.boot.class.path in Sun's JDK.-->
                            <compilerArguments>
                                <bootclasspath>${settings.localRepository}/javax/javaee-endorsed-api/6.0/javaee-endorsed-api-6.0.jar${path.separator}${sun.boot.class.path}</bootclasspath>
                            </compilerArguments>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                            </dependency>
                        </dependencies>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
    <properties>
        <netbeans.hint.deploy.server>JBoss4</netbeans.hint.deploy.server>
    </properties>
</project> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <context-param>
<param-name>resteasy.scan</param-name>
<param-value>true</param-value>
</context-param>
<context-param>
<param-name>resteasy.servlet.mapping.prefix</param-name>
<param-value>/</param-value>
</context-param>
<servlet>
<servlet-name>HelloService</servlet-name>
<servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>
<listener>
<listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
</listener>
<servlet-mapping>
<servlet-name>HelloService</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

resteasy 2.2.1GA，jboss-as-disstribution-6.1.0-final，netbeans 7.0.1

请告诉我是否缺少任何部分？我是新手。请帮我..

netbeans中的输出：

```
cd C:\Users\admin\Desktop\mavenproject1; "JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_23" "\"C:\\Program Files\\NetBeans 7.0.1\\java\\maven\\bin\\mvn.bat\"" -Dnetbeans.deploy=true package
Scanning for projects...

------------------------------------------------------------------------
Building mavenproject1 Java EE 6 Webapp 1.0-SNAPSHOT
------------------------------------------------------------------------

[resources:resources]
Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
Copying 0 resource

[compiler:compile]
Compiling 1 source file to C:\Users\admin\Desktop\mavenproject1\target\classes

[resources:testResources]
Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
skip non existing resourceDirectory C:\Users\admin\Desktop\mavenproject1\src\test\resources

[compiler:testCompile]
Nothing to compile - all classes are up to date

[surefire:test]
No tests to run.
Surefire report directory: C:\Users\admin\Desktop\mavenproject1\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[war:war]
Packaging webapp
Assembling webapp[mavenproject1] in [C:\Users\admin\Desktop\mavenproject1\target\mavenproject1]
Processing war project
Copying webapp resources[C:\Users\admin\Desktop\mavenproject1\src\main\webapp]
Webapp assembled in [90 msecs]
Building war: C:\Users\admin\Desktop\mavenproject1\target\mavenproject1.war
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------
Total time: 2.961s
Finished at: Sun Jun 17 17:09:09 IST 2012
Final Memory: 8M/19M
------------------------------------------------------------------------
NetBeans: Deploying on JBoss Application Server
    profile mode: false
    debug mode: false
    force redeploy: true
Distributing C:\Users\admin\Desktop\mavenproject1\target\mavenproject1.war to [org.jboss.deployment.spi.LocalhostTarget@1e8a877]
Deploying C:\Users\admin\Desktop\mavenproject1\target\mavenproject1.war
Failed
The module has not been deployed.
at org.netbeans.modules.j2ee.deployment.devmodules.api.Deployment.deploy(Deployment.java:210)
at org.netbeans.modules.maven.j2ee.ExecutionChecker.performDeploy(ExecutionChecker.java:173)
at org.netbeans.modules.maven.j2ee.ExecutionChecker.executionResult(ExecutionChecker.java:125)
at org.netbeans.modules.maven.execute.MavenCommandLineExecutor.run(MavenCommandLineExecutor.java:202)
at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153) 
```

# lisp - 如何将字符串转换为符号以用作 Lisp“assoc”函数中的键？

> ID：11070985
> 
> 赞同：4
> 
> 时间：2012-06-17T11:33:51.917
> 
> 标签：lisp, common-lisp, symbols

我在 Common Lisp 中有这个关联列表：

```
(defvar base-list (list (cons 'a 0) (cons 2 'c))) 
```

`assoc`当我的论点是 type 时，我必须打电话`string`。

对于这对`(A . 0)`我必须将“a”转换为一个符号，对于这对`(2 . C)`我必须将“2”转换为一个符号。我怎样才能做到这一点？

这应该像这样工作：

```
CL-USER 28 : 1 > (assoc (convert-string-to-symbol "a") base-list)
(A . 0)
CL-USER 28 : 1 > (assoc (convert-number-to-symbol "2") base-list)
(2 . C) 
```

我尝试使用`intern`但得到`NIL`：

```
CL-USER 29 : 1 > (assoc (intern "a") base-list)
NIL 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-01-31T04:11:31.063

你想要的功能被称为`read-from-string`：

```
CL-USER> (read-from-string "a")
A
1
CL-USER> (read-from-string "2")
2
1
CL-USER> 
```

请注意，在大多数实现中，基于使用`intern`or的解决方案`find-symbol`不适用于表示数字的字符串（例如，“2”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T13:44:27.853

你很亲近[`intern`](http://www.lispworks.com/documentation/HyperSpec/Body/f_intern.htm)；你只是把案子弄错了。尝试这个：

```
> (assoc (intern "A") base-list)
(A . 0) 
```

请注意，这里的 name-as-string 是大写的。

或者，您可以使用[`find-symbol`](http://www.lispworks.com/documentation/HyperSpec/Body/f_find_s.htm#find-symbol)按名称查找现有符号：

```
> (assoc (find-symbol "A") base-list)
(A . 0) 
```

这里的关键是，当您编写原始`defvar`表单时，*读者*会读取字符串“a”，并且——凭借当前[*可读的大小写*](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_r.htm#readtable_case)——将符号名称转换为大写。不同大小写名称的符号不相等。碰巧的是，在阅读时，读者将您所写的内容（小写）投射到其他内容（大写）上。

您可以使用以下函数检查当前阅读器的当前大小写转换策略[`readtable-case`](http://www.lispworks.com/documentation/HyperSpec/Body/f_rdtabl.htm)：

```
> (readtable-case *readtable*)
:UPCASE 
```

要了解有关 readtable case 和 reader 如何交互的更多信息，请参阅[Hyperspec 的第 23.1.2 节中的讨论。](http://www.lispworks.com/documentation/HyperSpec/Body/23_ab.htm)

# ruby - MongoDB返回码含义（ruby驱动）

> ID：11070987
> 
> 赞同：1
> 
> 时间：2012-06-17T11:34:05.483
> 
> 标签：ruby, mongodb

我正在从 ruby​​ 驱动程序调用集合更新到 mongodb 并获得返回码 117。我通常如何解释我得到的错误代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:26:25.620

如果您使用的是安全模式，update 方法会返回一个包含 getLastError 输出的哈希值。但是，当您不使用安全模式时，我们只返回发送到服务器的字节数。

```
# setup connection & get handle to collection
connection = Mongo::Connection.new
collection = connection['test']['test']

# remove existing documents
collection.remove
=> true

# insert test document
collection.insert(:_id => 1, :a => 1)
=> 1
collection.find_one
=> {"_id"=>1, "a"=>1}

# we sent a message with 64 bytes to a mongod
collection.update({_id: 1},{a: 2.0})
=> 64 # number of bytes sent to server

# with safe mode we updated one document -- output of getLastError command
collection.update({_id: 1},{a: 3.0}, :safe => true)
=> {"updatedExisting"=>true, "n"=>1, "connectionId"=>19, "err"=>nil, "ok"=>1.0} 
```

这可以在文档中更清楚地说明。我将为下一个 ruby​​ 驱动程序版本更新它。