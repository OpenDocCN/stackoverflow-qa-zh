# StackOverflow 问答 11230000-11230999

# ruby-on-rails - 未初始化的常量 - 加载类问题？

> ID：11230001
> 
> 赞同：0
> 
> 时间：2012-06-27T15:37:51.713
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

所以，我得到了 mailer`app/mailers/dynamic_mailer.rb`和 model `app/models/email_message/outgoing.rb`。有方法：

```
class EmailMessage::Outgoing < EmailMessage
...
  def deliver_mail
     l = ::DynamicMailer.email_message(self).deliver!
     Rails.logger.info "SEND MAIL: #{l.inspect}"
     update_attribute(:received_at, Time.now)
  end 
```

在本地（开发环境）一切正常。当我将应用程序部署到服务器（暂存环境）并尝试在那里发送电子邮件表单时，就会出现问题。延迟作业打印：

```
[Worker(host:rdev pid:2279)] EmailMessage::Outgoing#send_email! 
  failed with NameError: uninitialized constant 
  EmailMessage::Outgoing::DynamicMailer - 11 failed attempts 
```

在服务器上加载类看起来像一个问题。在类名之前删除双冒号失败。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:51:55.293

尝试使用 DynamicMailer 明显地在您的模型文件中指定文件，如下所示`require 'app/mailers/dynamic_mailer.rb'`。可能它可以帮助找到必要的课程。
另外我注意到错误消息中提到`send_email!`了方法，但您在此处发布了`def deliver_mail`方法。无论是我不明白的东西还是你找错地方了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:54:50.437

我只是忘记重新启动延迟的作业守护程序。

你可以用 capistrano 来做到这一点，将 gem 'daemons' 添加到你的 Gemfile 并像这样更新receipes：[http ://cmar.me/2011/02/21/delayed_job-with-rails-3-and-capistrano/](http://cmar.me/2011/02/21/delayed_job-with-rails-3-and-capistrano/)

# java - 2个tomcat之间的REST请求中的编码

> ID：11230004
> 
> 赞同：0
> 
> 时间：2012-06-27T15:37:57.253
> 
> 标签：java, rest, grails

我有 2 个 tomcat 7.0.26 服务器，并将 REST 请求从第一个（带有休息插件的 grails 应用程序）发送到第二个（休息服务实现）。

我在第二个 tomcat 上遇到了非英文字母的编码问题（它们没有正确显示）。

如何将 UTF-8 编码设置为 REST 请求？如何在 REST 服务中过滤编码？你能给点建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:11:33.120

在您进行其他基于呼叫的方法中，您可以执行

```
request.setCharacterEncoding("UTF-8") that should do it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T21:02:08.860

您可以拦截过滤器中的所有请求对象并设置UTF-8编码

# android - Android 的开源替代框架

> ID：11230006
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:37:58.447
> 
> 标签：android, mobile, frameworks

在为 Android 开发了大约两个月的 Java 之后，我仍然不喜欢这个 API，所以我想切换到另一个框架。

我还希望它是开源的，可以编译为本机包，并且如果可能的话，不依赖于 Eclipse。

我的操作系统是 Debian GNU/Linux。

我已经尝试了几个：PhoneGap（需要 Eclipse）、Appcelerator Titanium（非开源许可证）和 Python4Android（非原生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:45:12.070

请试试 Sencha touch 2。开源，兼容phonegap，支持跨平台开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:56:44.477

你检查过单声道吗？在 c#/.net 中创建 Android 应用程序，但仍然可以访问本机 api！

[monoforandroid](http://xamarin.com/monoforandroid)

# ios - 如何禁用 Tabris iOS 客户端方向？

> ID：11230009
> 
> 赞同：1
> 
> 时间：2012-06-27T15:38:05.660
> 
> 标签：ios, mobile

有没有办法禁用 Tabris iOS 客户端方向？意思是，我想修复应用程序方向，而不是在设备方向改变时改变它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:56:45.570

目前还没有可用的 Tabris/Java API ......但它已在计划中。要修复应用程序方向，请单击您的 Xcode 应用程序目标，然后仅选择“支持的设备方向”（那里可用的选项：纵向、上下颠倒、横向左、横向右）

# javascript - 过滤/排序导致力有向图中的链接不正确

> ID：11230011
> 
> 赞同：0
> 
> 时间：2012-06-27T15:38:09.563
> 
> 标签：javascript, dom, d3.js

我有一个 D3 力有向图，它首先显示有几个节点。每个节点都有一个单击处理程序，它将进一步扩展图形并动态添加更多节点和链接到单击的节点。每个节点也有一个 SVG 矩形。因为新的链接和节点被添加到现有的图表中，链接出现在点击节点的顶部，因为 SVG 是“画家”模型。所以我使用 d3.selectAll().filter().sort() 以正确的顺序放置 DOM 节点。除了节点和链接在有向图上放错位置外，这是可行的。有什么方法可以使用 sort() 并且保持 force.nodes() 和 force.links() 数据同步？

更新：我创建了一个 jsfiddle 来演示这种情况。单击几下创建新节点后，链接变得不稳定。如果注释掉对“reorder_nodes_and_links()”的调用，则图表是稳定的，但由于 DOM 顺序，链接会呈现在节点之上。

[http://jsfiddle.net/bobfaist/MURwA/](http://jsfiddle.net/bobfaist/MURwA/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:21:01.473

selection.insert 接受第二个参数，告诉它在其他东西之前插入东西。

我现在看不到你的小提琴，但这是一个类似项目的东西。

这会在任何归类为节点的内容之前插入新行。

```
lines.enter().insert("svg:line", ".node") 
```

[https://github.com/mbostock/d3/wiki/Selections#wiki-insert](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)

# vb.net - 在控制台应用程序中将访问查询导出到 Excel

> ID：11230015
> 
> 赞同：0
> 
> 时间：2012-06-27T15:38:24.657
> 
> 标签：vb.net, ms-access, oledb, export-to-excel

我有一个使用 OLEDB 从访问权限创建的查询，需要将信息获取到现有的 Excel 电子表格。我正在使用带有 VB.Net 的 VS 2010，MS Access 和 Excel 是 2010。过去两天我一直在兜圈子，不知道如何将数据从 DataReader 获取到 excel 中？

这是一个 VB.Net 控制台应用程序，因此不能使用 Web 表格或网格。

```
Dim conn As New OleDb.OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data    Source=C:\Pureshow\Pureshow.mdb;")
Dim cmd As New OleDb.OleDbCommand("SELECT PWTC08.Lot AS LotID, PWTC08.Reg AS OfficialID FROM ((PWTC08 INNER JOIN SWTC08 ON cint(LEFT(PWTC08.Lot, InStr(PWTC08.Lot, '-') - 1)) = SWTC08.FileId) INNER JOIN BWTC08 ON PWTC08.Buyer = BWTC08.FileId)", conn)

    Try
        conn.Open()
        Dim read As OleDb.OleDbDataReader = cmd.ExecuteReader()
        If read.HasRows Then
            While read.Read()
            End While
        Else
        End If

        read.Close()

    Catch ex As Exception

    Finally
        conn.Close()
    End Try 
```

我几乎到了只是输出到 CSV 并告诉用户每次都导入到 excel 中的地步。如果我将它放在 WebForm 中，我可以导出到 excel，但我不知道如何使用控制台应用程序？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:45:18.993

您可以针对创建 Excel 文件的 MS Access 连接执行查询：

```
SELECT t.ID, t.AText, t.ADate 
INTO [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\New2.xls].[Sheet1]
FROM Table1 As t 
```

# svn - 我可以以某种方式在同一代码库的多个结帐之间共享原始文件夹吗？

> ID：11230016
> 
> 赞同：2
> 
> 时间：2012-06-27T15:38:25.200
> 
> 标签：svn

我喜欢 Subversion 1.7 现在将所有原始文件放在一个地方作为工作副本。但是，我经常对同一个代码库进行多次检查（主要是为了复制尚不存在的 stash 函数）。

为了节省磁盘空间，有没有办法合并所有这些原始文件夹，所以我没有多个干净的副本？尤其是：

1.  那里有“额外”的干净文件是否不安全，这些文件不是任何当前签出文件的基本副本
2.  这可以通过某种方式使用链接来完成，尤其是在 Windows 上吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T09:20:55.380

我认为你不能那样做。SVN 计算每个原始文件的引用数。如果它达到零，“svn cleanup”删除那些文件。

另一方面，您可以为 SVN 1.7.5 尝试一种 hacky 方式（风险自负！我不能保证进一步的 SVN 版本将与这些 hack 兼容；我没有尝试过，但据我所知SVN 有效，这应该适用于 1.7.5）：

1.  将 'refcount' 设置为更高的值，以防止删除所有工作副本的校验和（您应该在每次“svn cleanup”调用之前执行此操作 --- 为新安装的原始文件更新 'refcount'）：

    sqlite3 .svn/wc.db "更新 PRISTINE 设置 refcount=refcount+100;"

2.  Windows 支持链接，尽管它们不是那么受欢迎： [http](http://en.wikipedia.org/wiki/NTFS_symbolic_link) ://en.wikipedia.org/wiki/NTFS_symbolic_link 至少它们对我来说即使在 XP 中也能正常工作。

所以 hacky 方法是创建一个目录，收集其中的所有原始文件（可能使用脚本）。在 .svn/pristine 创建指向该目录的链接。运行上面的那个 SQL 命令并在每次“svn cleanup”之前运行。

而且我还可以提供一种算法，如何从该配置恢复正常（如果出现任何问题）。

1.  删除链接 .svn/pristine，用空目录替换它们，或者（更好更快）用所有原始目录的该目录内容的副本替换它们。
2.  使用 SmartSVN 修复工作副本，如本文所示：http://vcs.atspace.co.uk/2012/06/20/missing-pristines-in-svn-working-copy/ [（](http://vcs.atspace.co.uk/2012/06/20/missing-pristines-in-svn-working-copy/)也解释了如果“refcount”会发生什么变为零）

祝你好运：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:18:34.137

我查看了 Dmitry 的答案，但我认为有一种更简单的方法，即在原始目录中的文件上使用硬链接。然后删除文件的一个版本不会影响其他副本。缺点是许多工具（例如，备份软件）仍会多次备份原始磁盘，但我的主磁盘并没有被占用太多。

另外，我从中了解到，如果你有很大的变化，偶尔运行 svn cleanup 可以节省大量的本地磁盘空间！

总之，我的 svnclone.bat 大致如下：

```
robocopy /E %1 %2 /XD .svn
robocopy /E %1\.svn %2\.svn /XD pristine
ln -r %1\.svn\pristine %2\.svn\pristine 
```

这也比直接复制快得多。

不利的一面是，随着时间的推移，如果这些克隆长期存在，则会出现重复。但我认为对于我的使用来说已经足够了。

ln.exe 来自[http://schinagl.priv.at/nt/ln/ln.html](http://schinagl.priv.at/nt/ln/ln.html)

# ruby - Ruby：从哈希数组生成哈希哈希

> ID：11230022
> 
> 赞同：1
> 
> 时间：2012-06-27T15:38:42.290
> 
> 标签：ruby, arrays, hash

我有以下

```
friends = [{ name: "Jack", attr1:"def", attr2:"def" }, { name: "Jill", attr1:"def", attr2:"def" }] 
```

我想将上面的表示转换成这样的哈希值

```
friends = { "Jack" => { attr1: "def", attr2:"def" }, "Jill" => { attr1: "def", attr2: "def" } } 
```

在 Ruby 中有什么优雅的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:42:16.990

```
Hash[friends.map { |f| _f = f.dup; [_f.delete(:name), _f] }]
# => {"Jack"=>{:attr1=>"def", :attr2=>"def"}, "Jill"=>{:attr1=>"def", :attr2=>"def"}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T15:44:08.650

```
friends.each_with_object({}) do |f, o|
    f = f.dup
    o[f.delete :name] = f
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:45:53.023

```
hash = {}
friends.each{|h| hash[h.delete(:name)] = h }
# => {"Jack"=>{:attr1=>"def", :attr2=>"def"}, "Jill"=>{:attr1=>"def", :attr2=>"def"}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:43:50.050

当您想将一个数组转换为另一个数组时，请使用`collect`：

```
friends = Hash[
  friends.collect do |f|
    _f = f.dup
    name = _f.delete(:name)
    [ name, _f ]
  end
] 
```

您可以轻松地创建一个新的散列`Hash[]`，并为其提供一个包含一系列键/值对的数组。在这种情况下，该`name`字段将从每个中删除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T16:26:28.917

如果我们将“优雅”理解为通过利用可重用抽象来编写简洁代码的方式，我会写：

```
require 'active_support/core_ext/hash'
require 'facets/hash'
friends.mash { |f| [f[:name], f.except(:name)] } 
```

无需为这两个相当大的库添加 gem 依赖项，您始终可以在扩展库中实现各个方法。

# silverlight - 隐藏视图直到视图模型被加载

> ID：11230026
> 
> 赞同：0
> 
> 时间：2012-06-27T15:39:02.173
> 
> 标签：silverlight

Silverlight 中是否有一种方法可以防止在视图模型加载完所有数据之前显示视图，或者在加载数据时显示加载图形？

数据正在异步加载，这使事情变得复杂！

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:29:12.687

您可以简单地在模型上公开一个布尔属性（实现 INotifyPropertyChanged）以指示数据是否已加载，并将其绑定到视图中顶级容器的可见属性。

如果您在多个视图中使用它，则很容易在您的视图模型和要应用的样式的基类中考虑到这一点。我曾经这样做，但显示了一个巨大的淡蓝色半透明正方形，中间有一个“加载”标签和一个旋转的圆形箭头。

# java - 读取资产 Xml 文件

> ID：11230029
> 
> 赞同：0
> 
> 时间：2012-06-27T15:39:07.040
> 
> 标签：java, android

我想读取放置在 assets/ 目录中的 xml 文件。我试过这个解决方案（在网上找到）

```
InputStream istr = context.getAssets().open("stanza.xml");
XmlPullParserFactory factory = XmlPullParserFactory.newInstance(); 
factory.setNamespaceAware(true); 
XmlPullParser xrp = factory.newPullParser(); 
xrp.setInput(istr, "UTF-8"); 
```

但返回我 FileNotFoundException，但文件存在。

请帮我理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:41:10.470

采用

```
InputStream istr = context.getResources().getAssets().open("<FILE_PATH/YOUR_FILE_NAME>"); 
```

代替

```
InputStream istr = context.getAssets().open("stanza.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:43:54.873

如果您的代码属于您的活动，您可以简单地编写：

```
InputStream istr =  getResources().getAssets().open("stanza.xml"); 
```

# c# - 使用 SplitPage 的 LoadState 中的不当行为

> ID：11230032
> 
> 赞同：0
> 
> 时间：2012-06-27T15:39:09.093
> 
> 标签：c#, windows-8, microsoft-metro

我正在开发一个 Windows 8 Metro Newsreader-App（使用 C# 和 XAML）。`Grouped Items Page`我在（模板）上显示提要项目。单击将用户转发到详细信息页面，我将其实现为`Split Page`. 因此，我有一个 Image-Gallery，用户可以从该 DetailPage 导航（并返回）。这工作正常。在 ItemDetailPage 我必须在`LoadState`函数中分配数据。该模板为我提供了以下解决方案：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    // TODO: Assign a bindable group to this.DefaultViewModel["Group"]
    // TODO: Assign a collection of bindable items to this.DefaultViewModel["Items"]

    if (pageState == null)
    {
        // When this is a new page, select the first item automatically unless logical page
        // navigation is being used (see the logical page navigation #region below.)
        if (!this.UsingLogicalPageNavigation() && this.itemsViewSource.View != null)
        {
            this.itemsViewSource.View.MoveCurrentToFirst();
        }
    }
    else
    {
        // Restore the previously saved state associated with this page
        if (pageState.ContainsKey("SelectedItem") && this.itemsViewSource.View != null)
        {
            // TODO: Invoke this.itemsViewSource.View.MoveCurrentTo() with the selected
            //       item as specified by the value of pageState["SelectedItem"]
        }
    }
} 
```

我所做的是以下内容：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    if (pageState == null)
    {
        // When this is a new page, select the first item automatically unless logical page
        // navigation is being used (see the logical page navigation #region below.)
        if (!this.UsingLogicalPageNavigation() && this.itemsViewSource.View != null)
        {
            this.itemsViewSource.View.MoveCurrentToFirst();
        }
    }
    else
    {
        // Restore the previously saved state associated with this page
        if (pageState.ContainsKey("SelectedItem") && this.itemsViewSource.View != null)
        {
        this.itemsViewSource.View.MoveCurrentTo(pageState["SelectedItem"]);
        }
    }

    var item = ArticleDataSource.GetItem((int)navigationParameter);

    if (item != null)
    {
        this.DefaultViewModel["Group"] = item.Group;
        this.DefaultViewModel["Items"] = item.Group.Items;
        if (this.itemsViewSource.View != null) this.itemsViewSource.View.MoveCurrentTo(item); // remove?

        // Register this page as a share source.
        this.dataTransferManager = DataTransferManager.GetForCurrentView();
        this.dataTransferManager.DataRequested += new TypedEventHandler<DataTransferManager, DataRequestedEventArgs>(this.OnDataRequested);
    }
} 
```

1.  如果我从 OverviewPage 导航到 DetailsPage，则会显示所选项目 (A)。
2.  我选择了另一个项目（从列表中），并显示了正确的详细信息 (B)。
3.  如果我从 DetailsPage 导航到 GalleryPage，则会显示正确项目 (B) 的图像。
4.  如果我现在返回（到 DetailsPage）不是最后选择的项目（B），而是显示我选择的项目（A）进入 DetailsPage。

我知道我更改了订单（由模板建议）并且我补充`if (this.itemsViewSource.View != null) this.itemsViewSource.View.MoveCurrentTo(item);`说我可能最好删除。

我认为问题（在步骤 4 中描述）`this.itemsViewSource.View`是空的，因此（逻辑上）`this.itemsViewSource.View.MoveCurrentTo(pageState["SelectedItem"])`没有被执行。不幸的是，我无法找出原因或是否是错误。

非常感谢任何帮助或指向教程的链接（可以解决我的问题）！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:59:29.283

关键是根据前一页面状态的需要覆盖navigationParameter。然后`item`加载并选择。尝试使用

```
// Override the navigationParameter if a page state is set:
if (pageState != null && pageState.ContainsKey("SelectedItem"))
{
    navigationParameter = pageState["SelectedItem"];
}

var item = ArticleDataSource.GetItem((int)navigationParameter);

if (item != null)
{
    DefaultViewModel["Group"] = item.Group;
    DefaultViewModel["Items"] = item.Group.Items;

    if (itemsViewSource.View != null)
    {
        itemsViewSource.View.MoveCurrentTo(item);
    }
    else
    {
        // A serious error happened here..
    }
}
else
{
    // Oooops, an item disappeared..
} 
```

# php - 从文本中获取特殊词

> ID：11230036
> 
> 赞同：2
> 
> 时间：2012-06-27T15:39:13.960
> 
> 标签：php, mysql, search, text, words

我正在尝试创建一个服务，用户将在其中输入一些文本数据，例如博客文章或类似的东西，我的服务将替换其文本中的一些“特殊单词”以获取链接。例如：

### 博文：

> ```
> "...Pink Floyd were an English rock band that achieved international 
> success with their progressive and psychedelic rock music..." 
> ```

### 输出将类似于：

> ```
> "...<a href="http://www.xxx.com?q=pink%20floyd">Pink Floyd</a> 
> were an English <a href="http://www.xxx.com?q=rock%20band">rock band</a>
> that achieved international success with their 
> progressive and psychedelic rock 
> <a href="http://www.xxx.com?q=music">music<a/>..." 
> ```

***像维基百科一样的东西！***

通用算法似乎很简单：

1.  从文本中删除特殊字符。
2.  剥离标签。
3.  将整个文本小写。
4.  删除停用词。
5.  查询数据库中留下的单词。
6.  获取原文并替换数据库中匹配的单词。

但问题是，我正在处理我的数据库中大约 100 万个单词。我为此使用 PHP 和 MySQL，据我所知 PHP 可能不是文本处理的最佳工具。

我担心性能，这取决于流量和请求数量，这个算法可能非常慢......

我试图找到另一种工具或方法来处理这个问题，我发现了很多东西，但我认为这些都不是适合这项工作的工具。我找到了mysql全文搜索，搜索lucene，sphinx，solr。如果我错了，请纠正我，但我认为它们不是这种搜索的正确工具。

有人可以建议我如何正确处理这个问题。

需要考虑的事项：

> 1.  不幸的是，该文本是葡萄牙语“pt-br”，我认为这将是一个问题。
> 2.  它需要得到完整的术语，在上面的例子中，它必须取“摇滚乐队”而不是分成“摇滚”和“乐队”。
> 3.  我对其他编程语言没有更深入的了解，但如果是这种情况，我也对其他技术持开放态度！

### 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:46:54.570

不要担心这个问题的性能。

您可以随时：

*   在数据库中使用索引
*   对停用词数据库或输出文本使用缓存（例如 memcached）
*   使用 sphinx（搜索引擎，与 MySQL 一起使用）
*   将格式化文本保存在数据库中（最好的解决方案，如果不简单地扩展您的停用词数据库）

还有在 db 中搜索停用词的代码示例：

```
...
$words = strip_tags($origin);
$words = strtolower($words);
// strip anything (symbols, numbers, etc), keep only words
...
$words = explode(' ', $words);
$found = DB::query(Database::SELECT, "SELECT url, word FROM `stop_words` WHERE word IN (".implode(',',$words).")")->execute()->as_array(); // Kohana framework Database module
$patterns = array();
$replacement = array();
foreach($found AS $row)
{
  $patterns[] = '/('.$row['word'].')/i';
  $replacement[] = '<a href="'.$row['url'].'">$1</a>';
}
$origin = preg_replace($patterns, $replacement, $origin); 
```

# php - 学说 2 在更新时获得匹配的行数而不是受影响

> ID：11230045
> 
> 赞同：1
> 
> 时间：2012-06-27T15:39:54.543
> 
> 标签：php, mysql, symfony, doctrine-orm

我有这样的代码：

```
 $updateSQL = "UPDATE `Rooms` R SET R.Revenue = {$s['Revenue']}, R.Ave_rent = {$s['Ave_Rent']}
                  WHERE R.Facility_ID={$s['Facility_ID']} AND R.Cur_Year={$s['Year']} AND R.Cur_Month={$s['Month']}";

    $affectedRows = $this->em->getConnection()->executeUpdate($updateSQL);
    if($affectedRows > 0) { ... } 
```

一切正常。我需要知道有多少行符合我的条件的唯一问题`R.Facility_ID={$s['Facility_ID']} AND R.Cur_Year={$s['Year']} AND R.Cur_Month={$s['Month']}`我不关心它们是否受到影响我不想再使用一个选择。

也许mysql有一些设置来计算受影响的行，即使是相同的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:59:16.940

MySQL 本身返回受影响的行数，而不是匹配的行数，请参阅[手册](http://dev.mysql.com/doc/refman/5.0/en/update.html#id765711)。

~~如果 Doctrine 可以在这里做你想做的事，它就必须执行另一个查询。如果你真的需要这个，你必须自己做。~~

编辑：稍后在文档中阅读一句话，我看到[mysql_info](http://dev.mysql.com/doc/refman/5.0/en/mysql-info.html)（ PHP 中的[mysqli_info](http://www.php.net/manual/en/mysqli.info.php)）返回此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:59:01.323

不确定这个：逻辑是通过 SQL 存在的，但是......

```
SELECT COUNT(R.Facility_ID), R.Cur_Year, r.Cur_Month from Rooms R
inner join
ON R.Facility_ID={$s['Facility_ID']} AND R.Cur_Year={$s['Year']} AND R.Cur_Month={$s['Month']}; 
```

甚至对你的 php 也有类似的东西：

```
$aff_rows = 0;

foreach($sql as $current_sql)
{
 $updateResult = mysqli_query($link, $current_sql); 
 $aff_rows = $aff_rows + mysqli_affected_rows($link);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:15:50.320

你可以在数据库中添加另一个字段，比如时间戳，并`NOW()`在你的更新语句中设置它，这样所有匹配的行都会受到影响。

# objective-c - 使用 Cocoa 按钮打开 url 会导致内存泄漏

> ID：11230046
> 
> 赞同：0
> 
> 时间：2012-06-27T15:39:57.597
> 
> 标签：objective-c, cocoa, memory-leaks, nsworkspace

我的 Cocoa 应用程序中有一个按钮，可以在 Web 浏览器中打开一个 url。如果按下按钮时浏览器未打开，则出现内存泄漏。如果浏览器已经打开，那么我不会得到内存泄漏。

按钮的代码是：

```
- (IBAction)goToWebsite:(id)sender {
    [[NSWorkspace sharedWorkspace] openURL: [NSURL URLWithString:@"http://www.website.com/?apiref=123"]];
} 
```

Instruments 中描述的内存泄漏是：

```
Leaked Object = Malloc 2.00 KB
Number = 1
Address = 0x7f8003039600
Size = 2.00 KB
Responsible Library = libsystem_sandbox.dylib
Responsible Frame = sandbox_extension_issue 
```

如何防止这种内存泄漏？

这是我第一次测试应用程序是否存在泄漏，因此将不胜感激任何有关此问题的帮助。我正在使用 Xcode 4.3.3 和 OSX 10.7.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T08:52:36.620

除了将它作为一个错误提交给苹果之外，你真的无能为力

# iphone - 如何使用 SFHFKeyChainUtils？

> ID：11230047
> 
> 赞同：2
> 
> 时间：2012-06-27T15:40:00.617
> 
> 标签：iphone, objective-c, sfhfkeychainutils

我已将凭据存储在 Login.m 类的 KeyChain 中

```
[SFHFKeyChainUtils storeUsername:self.usernameField.text andPassword:self.passwordField.text forServiceName:@"myApp" updateExisting:TRUE error:&error]; 
```

现在，当我从我的 iPhone 中删除我的应用程序并重新启动它时，如果用户之前登录过，我希望跳过登录屏幕并显示下一个屏幕。现在我的问题是，如何在 AppDelegate.m 类中做到这一点。我想访问当前用户的凭据，如果他们充满了数据，登录屏幕将被跳过。

```
[SFHFKeyChainUtils getPasswordForUsername:??? andServiceName:@"myApp" error:&error]; 
```

我知道这是获取给定用户名的密码的方法，但问题是我无权访问 AppDelegate 类中的用户名。

有人能帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:36:31.630

我找到了一个使用 NSUserDefaults 的解决方案，存储用户名和密码供以后使用，但在几篇文章中我读到使用 SFHFKeyChainUtils 比 NSUserDefaults 更安全。

# php - PHP 来自 filemaker 选择按钮的记录列表

> ID：11230048
> 
> 赞同：1
> 
> 时间：2012-06-27T15:40:01.417
> 
> 标签：php, filemaker

首先，感谢您阅读本文。

我刚刚开始使用 php，并且正在尝试使用 FileMaker 创建一个网站来显示和输入信息。

我有 php 连接到我的数据库，然后是使用表单的搜索页面，然后它显示记录列表。我想制作一个“按钮”，它将选择一条记录然后显示相关记录。

这就是我的麻烦所在。我不知道如何制作一个可以保存 record_Id 或 key 字段然后显示下一页的表单。

我正在使用`foreach`循环在表格中显示列表：

```
$records = $result->getRecords();
echo '<table border="1">';
echo '<tr>';
echo '<th>Company</th>';
echo '<th>Id Num</th>';
echo '<th>Choose</th>';
echo '</tr>';
foreach ($records as $record) {
    echo '<tr>';
    echo '<td>'.$record->getField('Company').'</td>';
    echo '<td>'.$record->getField('K_Medical').'</td>';
    echo '<td>
    <form action="welcome.php" method="post">
#This is where I think I need the button, but instead it just breaks :( 
      <input type="hidden" name="med_id[]" value='$record->getField('K_Medical')/>';
    <input type="submit" />
    </form>';
    echo '</form></td>';
    echo '</tr>';
}
echo '</table>'; 
```

如您所见，我尝试使用隐藏的表单字段来获取记录的关键字段，但页面不起作用。当我尝试在浏览器中查看时收到错误 500。

任何帮助将不胜感激！如果我没有提供足够的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:45:23.280

代替 ：

```
echo '<td>
<form action="welcome.php" method="post">
#This is where I think I need the button, but instead it just breaks :( 
  <input type="hidden" name="med_id[]" value='$record->getField('K_Medical')/>';
<input type="submit" />
</form>'; 
```

经过 ：

```
echo '<td>
<form action="welcome.php" method="post">
#This is where I think I need the button, but instead it just breaks :( 
  <input type="hidden" name="med_id[]" value='.$record->getField('K_Medical').'/>
<input type="submit" />
</form>'; 
```

您有引号和连接错误。

# matlab - 如何更改内置 Matlab 箱线图函数的百分位值？

> ID：11230054
> 
> 赞同：3
> 
> 时间：2012-06-27T15:40:21.027
> 
> 标签：matlab

我在使用 Matlab R2010b 和`boxplot`函数时遇到问题。

在以前版本的 Matlab 中，我对 boxplot.m 文件进行了一些修改，以便可以更改使用的百分位数。默认情况下，箱线图的构建考虑了第一个和第三个四分位数（第 25 个和第 75 个百分位数）来定义胡须。我的兴趣是使用第 10 个和第 90 个百分位数。

我尝试了在 Internet 上找到的所有解决方案。

`boxplot`所以我的问题是：有没有人找到一种方法来更改Matlab 函数（R2010b 及更高版本）使用的百分位数的默认值（第 25 和第 75 ）？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T13:17:13.117

您可以`boxplot`通过修改图形对象的属性（而不是修改函数本身）来更改数据/分位数的显示方式。

这是一段代码，它将修改用于蓝色框的分位数（最初，蓝色框对应于 .25 和 .75 的分位数，并将更改为 .1 和 .9）。上/下晶须的基部会相应改变。请注意，晶须的尖端没有改变（它们仍然对应于四分位距的 1.5）。您可以更改胡须的尖端，就像我们更改它们的基础部分一样。

```
%%% load some data  
load carsmall  
MPG  = MPG(ismember(Origin,'USA','rows'));  
Origin = Origin(ismember(Origin,'USA','rows'),:)  
Origin(isnan(MPG),:) = [];  
MPG   (isnan(MPG),:) = [];  

%%% quantile calculation  
q = quantile(MPG,[0.1 0.25 0.75 0.9]);  
q10 = q(1);  
q25 = q(2);  
q75 = q(3);  
q90 = q(4);  

%%% boxplot the data  
figure('Color','w');  

subplot(1,2,1);  
boxplot(MPG,Origin);   
title('original boxplot with quartile', 'FontSize', 14, 'FontWeight', 'b', 'Color', 'r');  
set(gca, 'FontSize', 14);  

subplot(1,2,2);  
h = boxplot(MPG,Origin) %define the handles of boxplot  
title('modified boxplot with [.1 .9] quantiles', 'FontSize', 14, 'FontWeight', 'b', 'Color', 'r');  
set(gca, 'FontSize', 14);  

%%% modify the figure properties (set the YData property)  
%h(5,1) correspond the blue box  
%h(1,1) correspond the upper whisker  
%h(2,1) correspond the lower whisker  
set(h(5,1), 'YData', [q10 q90 q90 q10 q10]);% blue box  

upWhisker = get(h(1,1), 'YData');  
set(h(1,1), 'YData', [q90 upWhisker(2)])  

dwWhisker = get(h(2,1), 'YData');  
set(h(2,1), 'YData', [ dwWhisker(1) q10])  

%%% all of the boxplot properties are here  
for ii = 1:7  
   ii  
   get(h(ii,1))  
end 
```

这是结果。

![在此处输入图像描述](../Images/b32066797e56a0338c825cea304da011.png)

# c# - 日期时间选择器2

> ID：11230060
> 
> 赞同：1
> 
> 时间：2012-06-27T15:40:32.807
> 
> 标签：c#

我是编程初学者。我的问题与使用日期时间选择器有关。我在我的程序中使用文件夹浏览器对话框来访问文件夹中的多个文件，然后对它们进行操作以得出各种输出，例如平均值、最小值和最大值等。然后我包括数据时间选择器和文件夹浏览器对话框按钮，以便对文件执行任务特定时间段。但是，当代码运行时，它要求我指定文件夹的位置。然后程序生成所需的输出，而不要求我需要输出的时间间隔。在选择包含 csv 文件的文件夹后，如何让程序要求我选择时间间隔。代码如下：

```
namespace Filereader_m_15062012
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            DialogResult result = folderBrowserDialog1.ShowDialog(); // Show the dialog.
            // create a list to insert the data into
            //put all the files in the root directory into array
            string[] fileEntries = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.csv");

            // Display all files.
            TextWriter tw1 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/listoffiles.txt");

            List<string> filenames = new List<string>();
            tw1.WriteLine("--- Files: ---");
            foreach (string path in fileEntries)
            {
                tw1.WriteLine(path);
            }

            tw1.Close();

            //int count = 0;
            //float sum = 0;

            string fileID1 =""; 
            List<string> fileID   = new List<string>();
            List<string> means = new List<string>();
            List<string> maximums = new List<string>();
            List<string> minimums = new List<string>();

            TextWriter tw2 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/errorlist.txt");
            foreach (string path in fileEntries)
            {
                if (File.Exists(path))
                {  
                    string text = "";
                    // create a list to insert the data into
                    List<float> noise = new List<float>();
                    List<DateTime> time = new List<DateTime>();

                    TextWriter tw3 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/rawdata.txt");

                    string file = path;

                    FileInfo src = new FileInfo(file);
                    TextReader reader = src.OpenText();
                    text = reader.ReadLine();

                    // while the text being read in from reader.Readline() is not null
                    while (text != null)
                    {
                        text = reader.ReadLine();

                        {
                            while (text != null)
                            {
                                text = reader.ReadLine();
                                if (text != null)
                                {
                                    string[] words = text.Split(',');
                                    noise.Add(Convert.ToSingle(words[3]));
                                    time.Add(Convert.ToDateTime(words[2]));
                                    fileID1 = words[1];

                                    // write text to a file
                                    tw3.WriteLine(text);
                                    //foreach (string word in words)
                                    //{
                                    //    tw.WriteLine(word);
                                    //}
                                }

                            }
                        }

                        tw3.Close();

                        TextWriter tw4 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/noise.txt");

                        //float minValue = noise.Min();
                        float maxValue = Enumerable.Max(noise);
                        float mean = Enumerable.Average(noise); 
                        float minValue = Enumerable.Min(noise);
                        //float maxValue = noise.Max();
                        //float mean = noise.Average(); 

                        //foreach (float ns in noise)
                        {
                            //tw4.WriteLine(Convert.ToString(ns));
                            //count++;
                            //sum += ns;
                            //mean = sum / count; 

                            //float min1 = 0; 
                            //if (ns > max) 
                                //max = ns; 
                            //else if (ns < max) 
                                //min1 = ns; 
                            //if (min1 < min && min1 > 0) 
                            //min = min1; 
                        }

                        tw4.Close();

                        fileID.Add(Convert.ToString(fileID1)); 
                        means.Add(Convert.ToString(mean));
                        maximums.Add(Convert.ToString(maxValue));
                        minimums.Add(Convert.ToString(minValue));
                    }                            
                }

                else
                {
                    tw2.WriteLine("{0}", path);
                }

                tw2.Close();
            }

            TextWriter tw5 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/IDs.txt");
            tw5.WriteLine("FILE IDS");
            tw5.WriteLine("==========");
            foreach (string m in fileID)
            {
                tw5.WriteLine("MOTE {0}", (m));
            }

            tw5.Close();

            TextWriter tw6 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 26062012 -2/Filereader m 22062012/results.txt");
            tw6.WriteLine("File IDs" + "          " + "Means" + "          " + "Maximums" + "        " +  "Minimums");
            tw6.WriteLine("========" + "          " + "=====" + "          " + "========" + "        " +  "========");
            for (int i=0; i < fileID.Count; i++)
                   {
                       int j = i;
                       tw6.WriteLine("Mote" + " " + Convert.ToString(fileID[i]) + "          " + Convert.ToString(means[j]) + "          " + Convert.ToString(maximums[j]) + "              " + Convert.ToString(minimums[j]));         
                    }

            tw6.Close();

        }       

        private void folderBrowserDialog1_HelpRequest(object sender, EventArgs e)
        {

        }

        private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
        {

        }

    } 
```

我将感谢任何人对此的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:40:53.393

尝试使用两个日期时间选择器制作另一个表格

form2 应该是这样的

标签说开始

日期时间选择器开始

标签说结束

日期时间选择器结束

按钮确定

它的代码应该是这样的：

```
 private void btok_Click(object sender, EventArgs e)
    {
        if (dtpickerend.Value == dtpickerstart.Value)
            MessageBox.Show("Please select an interval", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1);
        else
        {
            Program.date_start = dtpickerstart.Value;
            Program.date_end = dtpickerend.Value;
            this.DialogResult = DialogResult.OK
            this.Close();
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.DialogResult = DialogResult.Cancel;
    } 
```

也去 program.cs 并添加这两个变量

```
/// <summary>
    /// The main entry point for the application.
    /// </summary>
    public static DateTime date_start;
    public static DateTime date_end;
    [STAThread]
    static void Main() 
```

最后在您想要调用该表单时在您的主表单中添加以下内容：

```
secondform datepicker_dialog = new secondform();
        DialogResult dr;
        dr = datepicker_dialog.ShowDialog();
        if (dr == DialogResult.OK)
            //means that the user succseful selected an interval
            ;
        else
            //means the user closed the second form
            ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:57:28.073

好吧，您在`Load`事件处理程序中做所有事情，在加载表单时立即调用它，因此您没有时间设置两个 DateTimePickers。

向表单添加一个按钮，然后将所有内容移至其`Click`事件处理程序。当然，您必须更改您的代码，以便它考虑到两个 DateTimePickers 中设置的值，您可以通过它们的`Value`属性访问它们。

目前尚不清楚您需要两个日期来做什么，但如果您只想根据文件的创建/上次修改/上次访问日期来考虑文件，您可以导入`System.IO`命名空间并使用`Directory`,`File`和`FileInfo`类中的相关方法和属性。

# java - 如何根据 html 实体的视觉表示（或至少接近它）获取页面的换行符？

> ID：11230061
> 
> 赞同：0
> 
> 时间：2012-06-27T15:40:34.220
> 
> 标签：java, web-scraping

我有一个网页的一部分我确定为我感兴趣的领域。它可能包含多个 html 标签，但我想将其解释为多行文本，或者至少尽可能接近浏览器的呈现方式。

让我给你举个例子。

```
<div>
<p>Line 1<p>
</div>
<div><p>Line 2<p></div> <div><p>Line 3 <p></div>
<p>Line 4<p></div><br />Line 5 
```

在浏览器中，它是这样呈现的：

```
Line 1

Line 2

Line 3

Line 4

Line 5 
```

我想通过某种 lib 运行原始 html 并获取包含以下内容（或关闭）的文本：

```
Line 1
Line 2
Line 3
Line 4
Line 5 
```

请注意，我不想恢复 Html 中存在的原始换行符（正如[这个问题所指出的那样](https://stackoverflow.com/questions/5640334/how-do-i-preserve-line-breaks-when-using-jsoup-to-convert-html-to-plain-text/6031463#6031463)。我想将 html 实体解释为类似于浏览器呈现方式的换行符。是否有任何库可以吗？我使用了 Jsoup 的[TextNode.getWholeText()](http://jsoup.org/apidocs/org/jsoup/nodes/TextNode.html#getWholeText%28%29)但它不解析 html 标签。

编辑：对于那里的 linux 用户，我想要类似于以下结果的东西：

```
$ lynx -dump file.html > file.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:49:25.333

默认情况下，HTML 中的`<div> tags and <p>`标签周围有填充和边距块。所以很明显这就是浏览器呈现它的原因。

创建一个 CSS 文件并禁用填充和边距。

另外，为什么要标记 Java？如果您在 Java Servlet 页面中执行此操作，请检查您的`System.out.println`语句。

# database-design - 一列作为主键或两个外键作为主键

> ID：11230062
> 
> 赞同：0
> 
> 时间：2012-06-27T15:40:39.660
> 
> 标签：database-design

我有以下数据库设计：

![在此处输入图像描述](../Images/f8552fa2299820dbb92f39c61a1bbbc7.png)

一个`E-Report`有一个`QAP`有一些`Requirement`s。A`QAP`和它`Requirement`的 s 可以用在一个以上`E-Report`。

每个`Requirement`人都会在每个电子报告中确认是/否。我添加`EReportReq`了存储需求确认值（用户将设置这些值）。

而且，`Requirement`每个. 将存储和关系。`Image``E-Report``EReportReqImg``Image``Requirement`

如果您需要有关此数据库模型的更多详细信息，请告诉我。

我的问题是关于`EReportReq`桌子的。我不确定是否需要一列作为主键 ( `EReportReqId`) 或者我可以使用`eReportId`and`requirementId`作为主键。

如果我使用这两列，`eReportId`并且`requirementId`作为主键，我需要将这两列添加到`EReportReqImg`表中，所以我不知道这种方法是否比我的更好。

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:08:03.860

> 我的问题是关于`EReportReq`桌子的。我不确定是否需要一列作为主键 ( `EReportReqId`) 或者我可以使用`eReportId`and`requirementId`作为主键。

您可以使用它们中的任何一个 - 它们都不是绝对“更好”的。请注意，如果您决定使用第一种方法，还要在`{eReportId, requirementId}`.

第一种方法（使用非识别关系和代理键）导致：

*   子表中的“更精简”外键（`EReportReqImg`在这种情况下） - 正如您已经注意到的，
*   级联 ON UPDATE 不会传播给子级（因此，如果您 update `EReport.eReportId`，只有`EReportReq.eReportId`级联更新，但不是`EReportReqImg.eReportId`）
*   并且可以对 ORM 更加友好。

另一方面，第二种方法（识别关系和自然键）：

*   对 JOIN 的需求可能会减少（例如，您不需要`EReportReqImg JOIN EReportReq`仅仅找出`requirementId`- 您直接在 中拥有它`EReportReqImg.requirementId`），
*   更适合[聚簇表](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)（例如`EReportReq`，具有相同的`eReportId`行将在物理上“关闭”存储，这可能对某些查询有很大好处）
*   避免代理键上的附加索引。

由于您有少量子表，因此“胖”FK 并不重要，而且由于我们正在处理 ID，它们不太可能更改并且级联 ON UPDATE 不太可能成为问题。所以，我的直觉是采用第二种方法，但您可能还有其他一些考虑因素可能会使您的决定朝着不同的方向倾斜……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:05:19.293

让我们从这个状态开始：

> 我需要将这两个添加到 EReportReqImg

通常将 2 FK 用作 PK 是不可更改数据的正常做法。因此，如果`EReportReq`不应该以将其拖动到另一个`requirementId`或`eReportId`然后使用复合键的方式进行更改。否则，使用单值主键更加健壮和高效 - 因为它在此期间不会更改，因此您不需要编写触发器或使用棘手的级联来更新子表。

其他要查看的选项是结果 SQL 的简单性，*简单胜于复杂*- 使用 2 个字段编写`INNER JOIN`是复杂的构造，并且可能存在遗漏其中一个键的错误位置。

# javascript - 使用变量访问对象的属性

> ID：11230063
> 
> 赞同：0
> 
> 时间：2012-06-27T15:40:40.890
> 
> 标签：javascript

如果我有一个对象，具有名称、电话号码等属性...我如何使用变量访问 Javascript 中的对象？

我想通过执行以下操作来访问 javascript 中的属性名称：

```
object {name : "bob", phone_number : "911" }
propertiesArray = ["name","phone_number"];

 object.propertiesArray[0]; // instead of  object.name; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:41:56.477

```
object[propertiesArray[0]] 
```

这会成功的。对象属性可以像数组索引一样使用`[]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:42:16.923

你可以只使用`object[propertiesArray[0]]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:42:32.140

尝试

```
object[propertiesArray[0]]; 
```

# concurrency - 大矩阵求逆

> ID：11230067
> 
> 赞同：18
> 
> 时间：2012-06-27T15:40:57.337
> 
> 标签：concurrency, parallel-processing, linear-algebra, eigen, matrix-inverse

我正在寻找一个大矩阵的逆矩阵，常见大小为 1000 x 1000，但有时超过 100000 x 100000（由于时间和内存，目前正在失败）。我知道正常的情绪是“不要采取相反的方式，找到其他方法来做到这一点”，但目前这是不可能的。其原因是由于使用了期望得到矩阵逆的软件。（注意：我正在研究改变这种情况的方法，但这需要很长时间）

目前我们正在使用数值复制的 LU 分解方法，我目前正在测试特征库。eigen 库似乎更稳定且速度更快，但我仍处于准确性测试阶段。我快速浏览了其他库，例如 ATLAS 和 LAPACK，但尚未对这些库进行任何实质性测试。

似乎 eigen 库不使用并发方法来计算逆（尽管对于逆的 LU 分解部分确实如此），据我所知，ATLAS 和 LAPACK 在这个限制方面是相似的。（我目前正在使用 openMP 和不使用 openMP 测试 eigen 的速度差异。）

第一个问题是谁能解释如何通过并行化优化矩阵求逆。[在这里](http://www.bhrc.ac.ir/Portal/LinkClick.aspx?fileticket=oLt3rF1LlTo=&tabid=584)找到了一篇讲矩阵求逆并行算法的文章，但是没看懂。[这篇](http://world-comp.org/p2011/PDP5100.pdf)文章似乎在谈论另一种方法？我也不确定 scaLAPACK 或 PETSc 是否有用？

第二个问题，我阅读[了这篇](http://www.hpca.uji.es/ficheros/remon/pdp11.pdf)关于使用 GPU 提高性能的文章，但我从未为 GPU 编码，因此不知道要传达什么，但底部的图表看起来相当惊人。这怎么可能，如果这是真的，我该如何开始实施这样的事情。

我还发现[了这篇](http://lara.inist.fr/bitstream/handle/2332/784/RR2002-04.pdf?sequence=1)文章，还没有时间通读以了解它，但它似乎很有希望，因为内存是我们软件的当前问题。

有关这些文章或一般问题的任何信息都会有很大帮助。如果这个问题看起来含糊不清，我再次道歉，如有必要，我会尝试扩展更多内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T15:56:48.140

*第一个问题是谁能解释如何通过并行化优化矩阵求逆。*

我大胆猜测，这个以及线性代数中的相关主题是并行计算中研究最多的主题之一。如果你一直在寻找开始阅读的地方，那么好老的[Golub 和 Van Loan](http://www.amazon.co.uk/Computations-Hopkins-Studies-Mathematical-Sciences/dp/0801854148/ref=sr_1_1?s=books&ie=UTF8&qid=1340812109&sr=1-1)有一个关于这个主题的章节。至于 Scalapack 和 Petsc 是否可能有用，肯定是前者，也可能是后者。当然，它们都依赖于 MPI，但这在该领域被认为是理所当然的。

*第二个问题...*

如果你有 GPU 并且你有能力将你的代码转换成你的 GPU 支持的编程模型，就使用它们。如果您从未为 GPU 编写过代码并且可以访问商品类型的 CPU 集群，那么与使用新技术相比，使用集群会更快地掌握速度。

至于你提到的上一篇文章，它在一个变化非常快的领域已经有 10 年的历史了（尝试找到一篇关于使用 GPU 进行矩阵求逆的 10 年历史的研究论文）。我无法评论它的卓越性或其他属性，但在我看来，您提到的问题大小似乎完全在现代集群的核心（使用旧术语）计算能力范围内。如果您的矩阵非常大，它们是否也是稀疏的？

最后，我强烈支持您明显打算使用现有的现成代码而不是尝试开发自己的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T15:55:30.187

100000 x 100000 在双精度下是 80GB。您需要一个支持磁盘上的内存映射矩阵的库。我不能推荐一个特定的图书馆，而且我没有通过快速的谷歌搜索找到任何东西。但是来自 Numerical Recipes 的代码肯定是不够的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T12:33:14.800

关于第一个问题（如何并行计算逆）：

我假设您正在通过对矩阵进行 LU 分解然后使用分解来求解 A*B = I 来计算逆，其中 A 是您的原始矩阵，B 是您求解的矩阵，I 是单位矩阵。那么B是逆。

最后一步很容易并行化。沿列划分您的单位矩阵。如果您有 p 个 CPU 并且您的矩阵是 n×n，那么每个部分都有 n/p 列和 n 行。让我们将这些部分称为 I1、I2 等。在每个 CPU 上，求解一个 A*B1 = I1 形式的系统，这会给出 B1、B2 等部分，您可以将它们组合成 B，即逆.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T05:33:59.210

GPU 上的 LU 解压缩可以比 CPU 上快约 10 倍。尽管现在这种情况正在发生变化，但 GPU 传统上是围绕单精度算术设计的，等等较旧的硬件单精度算术通常比双精度算术快得多。此外，存储要求和性能将受到矩阵结构的极大影响。稀疏的 100,000 x 100,000 矩阵 LU decomp 是一个需要解决的合理问题，并且不需要太多内存。

除非您想成为专家并花*大量*时间调整硬件更新，否则我强烈建议您使用商业库。我建议[使用 CULA 工具](http://www.culatools.com/)。他们既有稀疏的也有密集的 GPU 库，实际上他们的[免费库](http://www.culatools.com/cula_dense_programmers_guide/)提供了 SGETRF——一个单精度（密集）LU decomp 例程。您必须为他们的双精度库付费。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T03:25:21.330

我知道这是旧帖子 - 但实际上 - OpenCL（你根据你的显卡下载相关的）+ OpenMP + 矢量化（不是按那个顺序）是要走的路。

无论如何 - 对我来说，我对矩阵的经验实际上与将双双数组复制进出系统的开销以及在任何计算开始之前用 0 填充或初始化矩阵的开销有关 - 特别是当我正在创建 .xll 时用于 Excel。

如果我要重新排列顶部的优先级 -

1.  尝试对代码进行矢量化（Visual Studio 2012 和 Intel C++ 具有自动矢量化功能 - 我不确定 MinGW 或 GCC，但我认为编译器有一些标志可以分析您的 for 循环以生成正确的汇编代码以使用而不是普通寄存器来保存数据，填充处理器的向量寄存器。我认为 Excel 正在这样做，因为当我在运行它们的 MINVERSE() 时监视 Excel 的线程时，我注意到只使用了 1 个线程。我不太懂汇编语言 -所以我不知道如何手动矢量化......（还没有时间去学习这个，但是很想这样做！）
2.  与 OpenMP (omp pragma) 或 MPI 或 pthreads 库 (parallel_for) 并行化 - 非常简单 - 但是......这里有一个问题 - 我意识到如果你的矩阵类首先是完全单线程的 - 然后并行化操作，如 mat multiply或逆是可报废的 - 因为并行化会由于初始化或复制到或仅访问非并行化矩阵类而降低速度。但是......并行化有帮助的地方是 - 如果您正在设计自己的矩阵类并并行化其构造函数操作（用 0 等填充），那么您的 LU(A^-1) = I 计算也会更快。优化您的 LU 分解，并优化您对身份特殊情况的前向后向替换在数学上也很简单。（即不
3.  一旦它被并行化（在外层上） - 需要逐个元素的矩阵运算可以映射到由 GPU（SSSSSS）计算 - 数百个处理器来计算元素 - 击败它！。现在在 ATI 的网站上提供了示例 Monte Carlo 代码——使用 ATI 的 OpenCL——不用担心将代码移植到使用 GeForce 的东西上——你要做的就是在那里重新编译。

但是对于 2 和 3 - 请记住，除非您处理 F* *K* *G HUGE 矩阵，否则会产生开销，所以没有意义 - 但我看到 100k^2？哇...

基因

# python - 在不计算新偏移量的情况下重新采样 pandas 时间序列

> ID：11230071
> 
> 赞同：3
> 
> 时间：2012-06-27T15:41:10.273
> 
> 标签：python, pandas

我正在读取仅包含可用时间的时间序列数据。这导致一个`Series`没有缺失值，但不等间距的索引。我想将其转换为`Series`具有缺失值的等距索引的 a 。由于我不知道先验的间距是多少，所以我目前正在使用类似的函数

```
min_dt      = np.diff(series.index.values).min()
new_spacing = pandas.DateOffset(days=min_dt.days, seconds=min_dt.seconds,
                                microseconds=min_dt.microseconds)
series      = series.asfreq(new_spacing) 
```

计算间距应该是多少（请注意，这是使用 Pandas 0.7.3 - 0.8 beta 代码看起来略有不同，因为我必须使用 series.index.to_pydatetime() 来获得 Numpy 1.6 的正确行为）。

使用 pandas 库是否有更简单的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:07:34.543

如果你想在没有数据的地方使用 NaN，你可以`Minute()`在 datetools 中使用（从 pandas 0.7.x 开始）

```
from pandas.core.datetools import day, Minute
tseries.asfreq(Minute()) 
```

这应该提供一个间隔均匀的时间序列，其中 NaN 作为没有数据的序列值有 1 分钟的差异。

# c# - NullReferenceExecption 虽然项目已定义

> ID：11230078
> 
> 赞同：2
> 
> 时间：2012-06-27T15:41:19.313
> 
> 标签：c#, task-parallel-library

我目前正在为警报分析工具开发 OPC AE 客户端。不幸的是，我必须解释我的工具是如何解释问题的。可能这个列表对我的问题并不重要，但它解释了可能是根的多线程部分。

异常发生在以下代码示例的 if 子句中。

```
private bool areInSameGroup(ALARM_ITEM alarmItem, ALARM_ITEM groupCandidate)
{            
    // Check if those groups are the same one
    // if the items are part of the same alarmGroup, return true. 
    // The if clause compares the first Item of the alarmlist of a group
    // to check if the items are identically
    if (findAlarmGroup(alarmItem).AlarmList[0].uniqueIdentifier == 
        findAlarmGroup(groupCandidate).AlarmList[0].uniqueIdentifier)
    {
        return true;
    }

    return false;
} 
```

下一个示例包含用于检查是否存在连接的 findAlarmGroup 方法。完整的软件运行了几秒钟，但出现了 MessageBox 并引发了 Exeption。我真的很抱歉所有的代码，但这是解释问题的唯一方法。我现在真的被困住了，因为从我的角度来看，这个消息框永远不会出现，因为在分析类开始时将每个警报分配给一个组。

如果有人愿意麻烦并查看我的代码，我会非常高兴。

```
// Method gets an AlarmItem and searches in every alarm group in 
// the AlarmGroupList
// for the uniqueIdentifier of the received alarmItem.
private ALARM_GROUP findAlarmGroup(ALARM_ITEM alarmItem)
{
    foreach (var alarmgroup in AlarmGroupList)
    {
        foreach (var groupedAlarm in alarmgroup.AlarmList)
        {
            if (groupedAlarm.uniqueIdentifier == alarmItem.uniqueIdentifier)
            {
                //return the found alarmgroup
                return alarmgroup;
            }
        }
    }
    MessageBox.Show("FEHLER");
    ALARM_GROUP noGroupFound = new ALARM_GROUP();
    return noGroupFound;
 } 
```

*   外部服务器信号 (OPC AE) 引发事件（大约每 2 秒）
*   事件调用处理方法并将 OPC AE 数据附加为列表
*   处理方法：访问一个全局列表，将全局列表与新列表合并启动任务以运行带有一些全局变量的分析器和来自上面分析器的全局列表：
*   采用警报和其他几种方法，根据数据库删除一些警报并添加一个全局编号
*   一个全球性的警报计数器。之后增加数量。在主算法中搜索警报之间的相互关系，将它们分组并返回组列表。

细节：

```
// new list for Alarm_Group. Contains the alarm groups
AlarmGroupList = new List<ALARM_GROUP>();

// Every Alarm gets it's own Alarm Group, everytime startAnalysis 
// is called
foreach (var AlarmItem in OnlineAlarmList)
{
    //Create new group of alarms
    ALARM_GROUP newgroup1 = new ALARM_GROUP();

    //Create List of alarms in this alarmgroup
    newgroup1.AlarmList = new List<ALARM_ITEM>();

    //Add the alarm item to the Alarmlist of the new alarm group
    newgroup1.AlarmList.Add(AlarmItem);

    //Add the alarm group to the overall AlarmGroupList
    AlarmGroupList.Add(newgroup1);    
}

// START 
// Run through all ALARM_ITEMs of the alarmevery log
foreach (var alarmItem in OnlineAlarmList)
{
    int counterRunner;

    // Take the Index of the currently analysed alarmItem, 
    // increase it by one and access the 
    // AlarmList with this index
    counterRunner = OnlineAlarmList.IndexOf(alarmItem) + 1;

    //Run through all rules of the RuleBase
    foreach (var rule in rulebase.RuleBaseList)
    {
        // Check if selected rule can be applied on selected 
        // ALARM_ITEM (itemA vs. ALARM_ITEM)
        if (rule.itemA == getAlarmType(alarmItem.AlarmTag))
        {
            //Check against any ALARM_ITEM in timeframe
            bool inTimeframe = true;

            ALARM_ITEM groupCandidate;

            while (inTimeframe)
            {
                // if the current alarm items has been compared to the 
                // last item in the list break the loop
                // and start with a new rule
                int counterRunnerInternal = counterRunner;

                if (counterRunnerInternal >= OnlineAlarmList.Count - 1)
                    break;

                // group candidate is the next alarm in the list, 
                // hence the current alarm of the foreach loop and the 
                // next alarm in the list are checked

                groupCandidate = OnlineAlarmList[counterRunnerInternal];

                // Check if startItem and Candidate are not already 
                // grouped together
                if (!areInSameGroup(alarmItem, groupCandidate))    
                    //
             }
         }
         else
         {
             inTimeframe = false;
         }

         counterRunnerInternal++;
     } 
```

# qt - 基于 QObject 的类与自身有一个排队连接

> ID：11230080
> 
> 赞同：5
> 
> 时间：2012-06-27T15:41:26.977
> 
> 标签：qt, qt4, signals-slots, qt4.7, qobject

我正在研究我正在研究的一些源代码。我发现有人编码的一个特殊语句。源代码是一个带有 QML GUI 并使用 QT 4.7.x 的 GUI 应用程序。

下面的代码片段属于核心应用程序逻辑。

```
// connect signal-slots for decoupling
QObject::connect (this, SIGNAL(setCurrentTaskSignal(int)), this, 
    SLOT(SetCurrentTaskSlot(int)), Qt::QueuedConnection); 
```

奇怪的是对象通过队列连接连接到自身，这本质上意味着对象可能同时“生活”在不同的线程中？

乍一看，这对我没有任何意义。谁能想到为什么这种联系是合理的或需要的？这甚至会起作用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T15:52:33.397

它将毫无问题地工作。在调用 SetCurrentTaskSlot 之前可能需要进行一些事件循环处理？

请注意，QueuedConnection 并不意味着某些东西在不同的线程中。QueuedConnection 仅表示在发出信号时，不会直接调用相应的插槽。它将在事件循环中排队，并在将控制权交还给事件循环时进行处理

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T17:39:01.277

排队的连接并不意味着接收者住在哪里。反之亦然：为了安全地向另一个线程中的对象发送信号，您必须使用排队连接。但是您可以将它们用于生活在任何线程中的对象！

一种是使用排队连接来确保信号将从事件循环内传递，而不是像直接连接那样立即从发射站点传递。直接连接在概念上是一组对列表中函数指针的调用。排队连接在概念上是一个发送给聪明接收者的事件，接收者可以根据事件的内容执行函数调用。

事件是 internal `QMetaCallEvent`，它`QObject::event`作用于这个事件并执行调用。

# javascript - Php，如何打开一个小消息/表单窗口（不是新的浏览器窗口）

> ID：11230085
> 
> 赞同：0
> 
> 时间：2012-06-27T15:41:34.880
> 
> 标签：javascript, window, modal-dialog

所以，我正在使用 php 创建一个论坛，

现在每个帖子都有一个报告按钮，任何成员都可以报告特定的帖子。

当他单击此按钮时，我希望他留在同一页面上，但会打开一个包含表单的小窗口：

举报原因：（文本框）

（按钮）：发送报告、取消

现在，我环顾四周并用谷歌搜索了它，但我似乎没有插入正确的关键字来找到它，所以我认为这是开始一个新问题的最佳方式:(，因为也最建议打开一个新窗口（如新的浏览器窗口），但这不是我要找的

非常感谢您提前提供的帮助:)

注意：我不喜欢使用 javascript，但如果它只能通过 javascript 实现，那么没问题 :)

阴凉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:45:22.247

您可以查看[jQuery 对话框](http://jqueryui.com/demos/dialog/)，了解一种简单的 javascript 方式来执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:46:32.890

我认为你最好的方法是使用 jQuery 弹出函数或使用 JavaScript 函数，这里有一些例子[http://forum.jquery.com/topic/a-very-simple-popup-box- div](http://forum.jquery.com/topic/a-very-simple-popup-box-div)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:47:00.170

很确定你仍然在一个新窗口之后，但是你只需要给它正确的参数，所以它在 J​​avascript 调用中没有状态栏等

```
window.open(theURL,winName,features); 
```

您需要为其提供正确的功能。

# ios - 带角度的 CGRect

> ID：11230090
> 
> 赞同：0
> 
> 时间：2012-06-27T15:41:49.193
> 
> 标签：ios, cocos2d-iphone

我有一条线，这是使用此代码制作的精灵

```
CGPoint diff = ccpSub(startLocation, endLocation);
float rads = atan2f( diff.y, diff.x);
float degs = -CC_RADIANS_TO_DEGREES(rads);
float dist = ccpDistance(endLocation, startLocation);
CCSprite *line = [CCSprite spriteWithFile:@"line.png"];
[line setAnchorPoint:ccp(0.0f, 0.5f)];
[line setPosition:endLocation];
[line setScaleX:dist / line.boundingBox.size.width];
[line setRotation: degs];

line.tag = 1;
[_lines addObject:line];
[self addChild:line]; 
```

现在在我的碰撞检测代码中，我使用以下代码创建一个 CGRect：

```
 CGRect lineRect = CGRectMake(
        line.position.x - (line.contentSize.width/2), 
        line.position.y - (line.contentSize.height/2), 
        line.contentSize.width, 
        line.contentSize.height); 
```

这当然是错误的，因为线是使用角度制作的。

我正在尝试将一个矩形，一个方形精灵与这个矩形进行比较。这个想法是一个角色正在移动，玩家可以画一条线，如果角色撞到这条线，它就会向相反的方向反弹。

我有角度、线条一侧的 x&y 位置和线条的长度。如何获得线另一侧的另一个 x&y 位置？

希望你们能帮帮我。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:36:45.980

很难知道我是否正确理解了您，但是当您说“...线另一侧的另一个 x&y 位置”时，我假设您的意思是线的另一端的坐标是什么.

如果是这样，我相信您可能正在寻找的实际公式是：

1.  {x1, y1} = 您已有的起点
2.  {x2, y2] = 您要查找的点

    *   x2 = x1 + (距离 * cosA)
    *   y2 = y1 + (距离 * sinA)

但正如我之前提到的，我有点不确定这是否会为您提供所需的确切信息。如果您实际上是在寻找 Line.png 边界框另一侧的顶点的点，那么也许您仍然可以使用该公式，但将度数更改 90 以确定与 x&y 的坐标偏移量你已经知道了。

无论如何，我希望至少能帮助你找到一个有用的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:02:15.610

您可能应该查找文档`CGRectApplyAffineTransform`，`CGAffineTransformMakeRotation`并且可能查找`CGAffineTransformMakeTranslation`.

# c# - 为什么我的根证书不受信任？

> ID：11230091
> 
> 赞同：30
> 
> 时间：2012-06-27T15:41:51.097
> 
> 标签：c#, dll, certificate, code-signing, signtool

我已经从证书服务器向自己颁发了代码签名证书。我还为自己颁发了来自同一证书服务器的根证书。**根证书存在于受信任的根证书颁发机构文件夹中的当前用户和本地计算机证书存储中。**我已经使用 signtool.exe 向导**成功**签署了一个 DLL：

```
"C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\signtool.exe" signwizard <MyDLLName>.dll 
```

但是，当我尝试验证我的 DLL 时，验证失败并出现以下错误：

```
"C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\signtool.exe" verify <MyDLLName>.dll
SignTool Error: A certificate chain processed, but terminated in a root certificate which is not trusted by the trust provider.
SignTool Error: File not valid: <MyDLLName>.dll 
```

为什么会这样？我认为在受信任的根证书颁发机构文件夹中拥有根证书可以验证 DLL。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-27T18:12:10.727

在您的验证命令中添加 /pa 选项以告诉它使用默认身份验证验证策略而不是 Windows 驱动程序验证策略，这意味着它将查看您的证书存储而不是 Microsoft 信任驱动程序的有限 CA 集。

在这里查看更多选项： http: [//msdn.microsoft.com/en-us/library/8s9b9yaz (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/8s9b9yaz(v=vs.90).aspx)

# javascript - SetTimeout 执行速度比分配的时间间隔快

> ID：11230097
> 
> 赞同：0
> 
> 时间：2012-06-27T15:42:14.373
> 
> 标签：javascript

我已经为 Settimeout 分配了 5000 毫秒，但它在分配的时间间隔之前执行。任何人都可以解释它为什么会发生。

```
<script type="text/javascript">
        var getcallback = {
            closure: function (callback, functionparam) {
                return callback.call(functionparam);
            }
        }
        var cleartimeout;
        var startSlideShow =  {
            timerid: 5000,
            startAnimation: function () {
                cleartimeout = setTimeout(getcallback.closure(function () {
                    alert("this is a basic example of chaining methods");
                    this.startAnimation();
                },this), this.timerid);
            },
            stopAnimation:function(){
            }
        }
        startSlideShow.startAnimation();

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:47:36.800

因为`getcallback.closure()`正在立即执行函数，所以您不会存储对函数的引用以供以后调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:47:57.353

只要你打电话`startAnimation`，你就在打电话`getcallback.closure`，它立即调用回调函数。要`setTimeout`正确使用，您需要让闭包返回一个函数，或者不使用这种奇怪的东西，而只需使用匿名函数。

类似于以下内容：

```
var getcallback = {
    closure: function (callback, functionparam) {
        return function() {
            callback.call(functionparam);
        };
    }
}

... 
```

或者，为了更清洁，只需：

```
var cleartimeout;
var startSlideShow =  {
    timerid: 5000,
    startAnimation: function () {
        cleartimeout = setTimeout(function () {
            alert("this is a basic example of chaining methods");
            this.startAnimation();
        }, this.timerid);
    },
    stopAnimation:function(){
    }
}
startSlideShow.startAnimation(); 
```

# android - 如何在 android version-10 的 android 应用程序中添加横幅

> ID：11230101
> 
> 赞同：1
> 
> 时间：2012-06-27T15:42:18.807
> 
> 标签：android

我开发了一个简单的 android“横幅”应用程序来显示横幅，但我的“横幅”应用程序有问题。

当我在使用 Android 版本 10 的 android 手机上运行该应用程序时，它运行成功，但在横幅区域（保留用于显示横幅的区域）中有红色文本，即“您必须在 AndroidManifest.xml 中声明 AdActivity配置更改。”

Banner.java

```
 import com.google.ads.*;

import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;

public class MyBannerActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // Look up the AdView as a resource and load a request.
        AdView adView = (AdView)this.findViewById(R.id.adView);
        adView.loadAd(new AdRequest());

    }
} 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

  <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="MY_AD_UNIT_ID"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                         ads:loadAdOnCreate="true"/>

</LinearLayout> 
```

横幅清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ifahja.banner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyBannerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"/>

            <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode"/>

        <!-- android:configChanges="keyboard|keyboardHidden|orientation" -->    

    </application>

    <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

</manifest> 
```

# asp.net - 处理请求后如何更新会话变量

> ID：11230102
> 
> 赞同：0
> 
> 时间：2012-06-27T15:42:20.427
> 
> 标签：asp.net, session-state

我有一个需要存储在会话中的对象。

在每个请求开始时，我将对象复制到 HttpContext.Current.Items 集合，以便在请求期间可以重用它。

在请求期间，对象的状态是可以修改的，所以我需要将它写回会话中，以便它可以用于下一个请求。

我尝试通过 HttpApplication.EndRequest 事件处理程序更新它，但我发现此时 HttpContext.Current.Session 为空。

HttpApplication 中是否有另一个事件处理程序在处理请求后发生，但我仍然可以在其中访问 HttpContext.Current.Session？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:18:22.487

该会话可从**HttpApplication.PostRequestHandlerExecute**事件中获得，根据文档：

*“在 ASP.NET 事件处理程序（例如，页面或 XML Web 服务）完成执行时发生。”*

此页面有助于理解 HttpApplication 事件的顺序：

[http://blog.dotnetclr.com/archive/2007/03/14/HttpApplication-pipeline-demystified.aspx](http://blog.dotnetclr.com/archive/2007/03/14/HttpApplication-pipeline-demystified.aspx)

# android - 创建由其他 XML 文件组成的 XML 布局文件？

> ID：11230108
> 
> 赞同：0
> 
> 时间：2012-06-27T15:42:34.183
> 
> 标签：android, android-layout, android-widget

我知道这似乎是一个奇怪的问题，但对我来说，如果我可以从主 XML 文件指向的一组其他 xml 文件组成布局 XML，那将非常方便。原因是我在这个 xml 中定义了一些列表项视图，并希望在其他地方重用。是否有可能或唯一的方法就是应对和粘贴它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:47:22.567

您可以使用“包含”标签在单个布局中包含不同的布局文件

```
<LinearLayout>
    <include layout="@layout/toinclude1" />
    <include layout="@layout/toinclude1" />
</LinearLayout> 
```

另一种方法是 ViewStub。如果你想异步加载你的布局，你可以有：

```
<ViewStub android:id="@+id/stub"
           android:inflatedId="@+id/subTree"
           android:layout="@layout/mySubTree"
           android:layout_width="120dip"
           android:layout_height="40dip" /> 
```

并且在您的代码中，您可以在需要时编写：

```
 ViewStub stub = (ViewStub) findViewById(R.id.stub);
 View inflated = stub.inflate(); 
```

一些参考：http: [//developer.android.com/reference/android/view/ViewStub.html](http://developer.android.com/reference/android/view/ViewStub.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:48:10.757

假设你有一个这样的 header.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/somestyle" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:clickable="false"
        android:paddingLeft="15dip"
        android:scaleType="center"
        android:src="@drawable/logo" />

</LinearLayout> 
```

您可以使用`<include layout="@layout/header"/>`在许多布局中包含标题布局代码。主要的.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/home_root"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
            <include layout="@layout/header"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:51:20.103

片段是不错的选择。这是一个示例： http: [//mobile.tutsplus.com/tutorials/android/android-sdk_fragments/](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)
和文档：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# mdx - 如何获取使用 NON EMPTY 的集合中维度成员的 MIN 和 MAX 值

> ID：11230110
> 
> 赞同：0
> 
> 时间：2012-06-27T15:42:37.443
> 
> 标签：mdx

我有一个问题，我需要从特定交集（一个客户和时间段）的维度成员（而不是度量）中获取集合的高值和低值。我们需要为下游的报告参数引用这些。我只能找到拉最小和最大措施的例子。我需要实际的尺寸值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:58:27.310

我有类似的要求，看看以下是否对您有帮助。

```
SELECT   TOPCOUNT(NONEMPTY(DESCENDANTS([Hit Time].[Date], 1, LEAVES)),1) ON 0  
FROM  [cube] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T02:57:10.117

假设 KEY0 是一个数值，您可以执行以下操作：

```
select

  topCount( [Rent Range].[Rent Range Floor].members, 1, [Rent Range].[Rent Range Floor].currentMember.properties( 'KEY0', TYPED ) )      
  + bottomCount( [Rent Range].[Rent Range Floor].members, 1, [Rent Range].[Rent Range Floor].currentMember.properties( 'KEY0', TYPED ) ) 

  on 0 

from [Sales] 
```

否则任何其他数值属性都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:15:47.660

对于您的最大情况，请使用[TopCount](http://msdn.microsoft.com/en-us/library/ms144792)（您的集合，1，您的度量）

对于您的情况，请使用[BottomCount](http://msdn.microsoft.com/en-us/library/ms144864)（您的集合，1，您的度量）

# ios - IOS dispatch_async 视图会消失

> ID：11230115
> 
> 赞同：0
> 
> 时间：2012-06-27T15:42:53.010
> 
> 标签：ios, grand-central-dispatch, dispatch-async

我正在使用 dispatch_async 和一个块每 3 秒左右检索一次服务器数据。处理视图消失或用户关闭程序的方法是什么？

它会是一个布尔标志，异步块不时检查吗？如果是这样，如果视图在异步块处于休眠状态时退出怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T15:49:24.530

您不能轻易取消调度呼叫，因此最好的选择是`NSOperation`改为。[WWDC 2012, Session 211 - Building Concurrent User Interfaces on iOS](https://developer.apple.com/videos/wwdc/2012/?id=211)中有一个高度相关的视频，它准确地涵盖了您所描述的问题。我绝对建议你看。

基本方法是创建一个`NSBlockOperation`可以自行检查`-isCancelled`属性以在它被取消时提前返回的方法。然后您可以在 中取消操作`viewDidDisappear`。

另一种方法是使用`NSTimer`它也可以很容易地无效/取消。考虑到您的代码正在做什么，这实际上可能是您最简单的解决方案。

# c# - 更改变量的副本会更改原始变量吗？

> ID：11230119
> 
> 赞同：1
> 
> 时间：2012-06-27T15:43:09.203
> 
> 标签：c#, oop, entity-framework-4.1

我可以在下面的代码中**访问修改后的关闭**错误

```
foreach (var user in Entities.User)
            {
                bool any = Entities.Person.Any(
                    p => p.Name == user.Name);
            } 
```

所以我把它改成了

```
foreach (var user in Entities.User)
            {
User theUser = user;
                bool any = Entities.Person.Any(
                    p => p.Name == theUser.Name);
            } 
```

现在，问题是我希望能够修改用户对象的属性。如果我执行以下任一操作是否重要。`SaveChanges`当我调用DbContext时，它们都会保存到数据库中吗？

```
user.Property = 1; 
```

或者

```
theUser.Property = 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:46:48.480

是的。`User`在这种情况下，很可能是 referencec 类型，因此该类型的变量只是指向实例的引用。赋值只是将另一个变量更改为指向同一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:47:05.127

这些是引用类型。所以这两个变量都指向同一个对象。`Property`在这两种情况下都会改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:48:38.970

User 是一个类，因此您实际上并没有复制用户，您只是将引用（或指针，有时称为）复制到该用户。该引用的两个副本都将“看到”对基础对象的任何更改。

# php - 在 PHP 邮件中附加上传的图像

> ID：11230120
> 
> 赞同：0
> 
> 时间：2012-06-27T15:43:09.673
> 
> 标签：php, email, file-upload, jpeg, attachment

嗨女士们先生们，我希望你们能帮助我解决这个问题。

我创建了一个网络表单，人们可以在其中输入注册信息并将图像上传到我们的服务器以进行摄影比赛。上传器工作得很好，并且会发送一封包含注册信息的电子邮件，但我很难将上传的图片附加到电子邮件中。我希望有人能够帮助我解决这个问题。表单和处理器页面位于同一目录中，并且图像被放置在名为 upload 的子文件夹中。这是我迄今为止所拥有的，不适用于附加图像。它给了我一个错误：

```
 <?php
  if ((($_FILES["file"]["type"] == "image/jpeg")
   || ($_FILES["file"]["type"] == "image/pjpeg"))
   && ($_FILES["file"]["size"] < 2000000))
 {
if ($_FILES["file"]["error"] > 0)
{
echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";

if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
  else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  echo "\nFile submitted.";
  }
}
}
else
{
  echo "Invalid file";
 }

        // DO THE MAILING HERE

        $fields = array('name','address','city','state','zip','phone','photo','location');

        //$to = "cboyd@dacc.edu";
        $to2 = "ampeck@earthlink.net";
        $subject = "Sustainability Photo Contest";
        $headers =  "MIME-Version: 1.0\r\n"
."Content-Type: multipart/mixed; boundary=\"$bound_text\"";

        $headers .='Content-type: image/jpeg; charset=iso-8859-1' . PHP_EOL;
        $headers .= "From: noreply@dacc.edu\r\n" . "X-Mailer: php";
        $bound_text =   "DACCreport";
 $bound =   "--".$bound_text."\r\n";
 $bound_last =  "--".$bound_text."--\r\n";

  $message =    "If you can see this MIME than your client doesn't accept MIME types!\r\n"
.$bound;

  $message .=   "Content-Type: image/jpeg; charset=\"iso-8859-1\"\r\n"
."Content-Transfer-Encoding: 7bit\r\n\r\n"
."Photo Contest entry\r\n"
.$bound;

  $file =   file_get_contents($_FILES["file"]["name"]);

 $message .=    "Content-Type: image/jpeg; name="($_FILES["file"]["name"])"\r\n"
."Content-Transfer-Encoding: base64\r\n"
."Content-disposition: attachment; file="($_FILES["file"]["name"])"\r\n"
."\r\n"
.chunk_split(base64_encode($file))
.$bound_last; 

        $greet = "The following was submitted on " . date("F j, Y, g:i a") . "<p>";

        $body = $greet;
        //$cn = 1;

        foreach($fields as $efield) {
            if(isset($_POST[$efield])) {

                if($efield == "name") {
                    $body.= "<strong>Name: </strong>" . $_POST[$efield] . "<p>";
                } elseif($efield == "address") {
                    $body.= "<strong>Address:</strong> " . $_POST[$efield] . "<p>";
                } elseif($efield == "city") {
                    $body.= "<strong>City:</strong> " . $_POST[$efield] . "<p>";
                } elseif ($efield == "state") {
                    $body.= "<strong>State: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "phone") {
                    $body.= "<strong>Daytime Phone Number: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "photo") {
                    $body.= "<strong>Name of Photo: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "location") {
                    $body.= "<strong>Location where Photo was taken:</strong> " . $_POST[$efield] . "<p>";

                }
            }
        }

        //mail($to, $subject, $body, $headers);
        mail($to2, $subject, $body, $headers);

        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:10:16.850

这是我想出的解决方案。根据上传代码和附加文件信息，它需要一点技巧。另外，我遇​​到了标题问题，但我设法让它工作并且效果很好。

```
 <?php
 if ((($_FILES["file"]["type"] == "image/jpeg")
 || ($_FILES["file"]["type"] == "image/pjpeg"))
 && ($_FILES["file"]["size"] < 2000000))
   {
   if ($_FILES["file"]["error"] > 0)
     {
     echo "Error: " . $_FILES["file"]["error"] . "<br />";
     }
   else
     {
     echo "Upload: " . $_FILES["file"]["name"] . "<br />";
     echo "Type: " . $_FILES["file"]["type"] . "<br />";
     echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";

     if (file_exists("upload/" . $_FILES["file"]["name"]))
       {
       echo $_FILES["file"]["name"] . " already exists. ";
       }
     else
       {
       move_uploaded_file($_FILES["file"]["tmp_name"],
       "upload/" . $_FILES["file"]["name"]);
       echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
       echo "<br> File submitted.";
       }
     }
   }
 else
   {
   echo "Invalid file";
   }

            // DO THE MAILING HERE
     $filename = "upload/" . $_FILES["file"]["name"];
 ;       
 $to3 =     
 $to4 = 
 $subject =     'Sustainability Photo Contest';
 $bound_text =  "dacc1231";
 $bound =   "--".$bound_text."\r\n";
 $bound_last =  "--".$bound_text."--\r\n";

 $headers =     "MIME-Version: 1.0\r\n"
."Content-Type: multipart/mixed; boundary=\"$bound_text\"". PHP_EOL;
 $headers .=    "From: noreply@dacc.edu\r\n";

 $fields = array('name','address','city','state','zip','phone','photo','location');

        $greet = "The following was submitted on " . date("F j, Y, g:i a") . "<p>";

        $body = $greet;
        //$cn = 1;

        foreach($fields as $efield) {
            if(isset($_POST[$efield])) {

                if($efield == "name") {
                    $body.= "<strong>Name: </strong>" . $_POST[$efield] . "<p>";
                } elseif($efield == "address") {
                    $body.= "<strong>Address:</strong> " . $_POST[$efield] . "<p>";
                } elseif($efield == "city") {
                    $body.= "<strong>City:</strong> " . $_POST[$efield] . "<p>";
                } elseif ($efield == "state") {
                    $body.= "<strong>State: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "phone") {
                    $body.= "<strong>Daytime Phone Number: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "photo") {
                    $body.= "<strong>Name of Photo: </strong>" . $_POST[$efield] . "<p>";
                } elseif ($efield == "location") {
                    $body.= "<strong>Location where Photo was taken:</strong> " . $_POST[$efield] . "<p>";

                }
            }
        }

 $message =     "If you can see this MIME than your client doesn't accept MIME types!\r\n"
.$bound;

 $message .=    "Content-Type: text/html; charset=\"iso-8859-1\"\r\n"
."Content-Transfer-Encoding: 7bit\r\n\r\n"
."Here is a Submission for the Photo Contest\r\n" .$body ."\r\n"

.$bound;     
 $file =     file_get_contents($filename); 

 $message .=    "Content-Type: image/jpg; name=\"".$filename."\"\r\n"
."Content-Transfer-Encoding: base64\r\n"
."Content-disposition: attachment; file=\"".$filename."\"\r\n"
."\r\n"
.chunk_split(base64_encode($file))
.$bound_last;

 if(mail($to3, $subject, $message,  $headers)
 &&
 mail($to4, $subject, $message,$headers ))
 {
 echo '<br> MAIL SENT';
 } else {
 echo '<br> MAIL FAILED';
 }

        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T06:04:37.990

```
 $files = $_FILES['filesToUpload']['tmp_name'];
    $filename = $_FILES['filesToUpload']['name'];    
    $fp = fopen($files[$i],"rb");
    $data = fread($fp,filesize($files[$i]));
    fclose($fp);
    $data = chunk_split(base64_encode($data));
    $message .= "Content-Type: application/octet-stream; name=\"".basename($filename[$i])."\"\n" . 
                "Content-Description: ".basename($filename[$i])."\n" .
                "Content-Disposition: attachment;\n" . " filename=\"".basename($filename[$i])."\"; size=".filesize($files[$i]).";\n" . 
                "Content-Transfer-Encoding: base64\n\n" . $data . "\n\n"; 
```

您可以使用此代码附加文件而不将其移动到服务器。

# ios - 如何为 iOS 制作一个像 PS3 一样的流动丝带背景？

> ID：11230121
> 
> 赞同：1
> 
> 时间：2012-06-27T15:43:13.060
> 
> 标签：ios, animation

我已经开始在 iOS 中使用动画背景视图，我真的认为它改善了我的应用程序的呈现。但是，我想创建一个我不知道如何制作的背景。我正在寻找的效果是这样的：

activeden.net/item/green-ribbon-animated-banner-background/49229 [http://i156.photobucket.com/albums/t34/pspelver/wallpaper.jpg](http://i156.photobucket.com/albums/t34/pspelver/wallpaper.jpg)

我不确定如何为这种模式实际设计图形，或者是否有更好的方法来使用核心图形。有人可以请教吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:55:51.020

尝试找到（或自己创建）您想要的动画图像。您可能只需找到或制作您想要的效果的视频，然后逐帧更改为类似 .gif 的内容。然后将其设置为背景。我看到你想要的效果的问题是它可能会占用大量的系统资源。

# visual-studio-2010 - 如何在 VS2010 中运行经典的 asp 站点（不是 asp.net）？

> ID：11230122
> 
> 赞同：1
> 
> 时间：2012-06-27T15:43:20.313
> 
> 标签：visual-studio-2010, visual-studio, asp-classic

我只是在整理一个快速的非 cms 网站。即使它不是 cms，我仍然想使用包含它。有没有一种简单的方法可以让我在 VS2010 中运行经典的 ASP 文件而无需安装/配置 IIS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:28:03.703

我能够创建一个新的网站项目并将其配置为使用 IIS Express。我将 .asp 文件添加到项目中，它正确地为它们服务。

# c# - ListView 根据内容是否存在自动调整大小

> ID：11230123
> 
> 赞同：0
> 
> 时间：2012-06-27T15:43:21.437
> 
> 标签：c#, winforms, listview

我有`ListView`一个视图，`View.Details`我想自动调整列的大小。我知道`ColumnHeader`'s`AutoResize`方法，目前我只是像这样迭代它们：

```
var lMode = ( listView.Items.Count == 0 ) ? ColumnHeaderAutoResizeStyle.HeaderSize : ColumnHeaderAutoResizeStyle.ColumnContent;
foreach ( ColumnHeader lColumnHeader in listView.Columns )
{
    lColumnHeader.AutoResize(lMode);
} 
```

这种技术的问题是，如果我有一列碰巧没有数据，宽度会设置为标题不再可用的点。`ColumnHeaderAutoResizeStyle`有没有一种根据列中是否有内容有条件地设置的好方法？

如果列中有我想使用的`ColumnHeaderAutoResizeStyle.ColumnContent`内容，但如果列中没有任何内容，我想使用`ColumnHeaderAutoResizeStyle.HeaderSize`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:33:28.493

This is a method I've been using for a little while now that does not involve measuring strings.

The bool parameter is because I call the method by itself (and set the parameter to true), and sometimes I call it directly after an Items.AddRange(ListViewItem[]) call, in which I'd wrap both calls in the Begin/End Update calls.

```
 /// <summary>
    /// Set the column widths to the widest of the items
    /// or the column header text.
    /// </summary>
    /// <param name="useUpdate">Whether to use Begin/End Update methods
    /// to pause the drawing of the list view.</param>
    private void SetColumnWidths(bool useUpdate)
    {
        if(useUpdate)
            list.BeginUpdate();

        int width;
        int totalWidth = 0;

        foreach (ColumnHeader col in list.Columns)
        {
            // The last column's width will be the leftover
            //   width of the list view.
            if (list.Columns.Count != col.DisplayIndex)
            {
                col.AutoResize(ColumnHeaderAutoResizeStyle.HeaderSize); 
                width = col.Width;

                col.AutoResize(ColumnHeaderAutoResizeStyle.ColumnContent);
                if (width > col.Width)
                    col.Width = width;

                totalWidth += col.Width;
            }
            else
            {
                col.Width = (list.ClientSize.Width - totalWidth);
            }

        }

        if(useUpdate)
            list.EndUpdate();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:59:46.800

除非找到更好的答案，否则至少让我回答我的问题，以防其他人需要此功能。我能想到的最好方法是手动扫描表格并自己测量琴弦。为此，我创建了一个扩展方法：

```
public static void AutoResizeAllColumns( this ListView listView )
{
    if ( listView.Columns.Count == 0 ) return;

    var lGraphics = Graphics.FromHwnd( listView.Handle );

    foreach ( ColumnHeader lColumnHeader in listView.Columns )
    {
        var lColumnHeaderTextSize = lGraphics.MeasureString( lColumnHeader.Text, listView.Font );

        var lColumnIndex = lColumnHeader.Index;
        var lAnyContents = listView.Items
            .Cast<ListViewItem>()
            .Select( x => lGraphics.MeasureString( x.SubItems[ lColumnIndex ].Text, listView.Font ) )
            .Any( x => x.Width > lColumnHeaderTextSize.Width );

        lColumnHeader.AutoResize( lAnyContents ? ColumnHeaderAutoResizeStyle.ColumnContent : ColumnHeaderAutoResizeStyle.HeaderSize );
    }
} 
```

我没有测量这种方法的速度或任何东西，但它似乎有效。只是希望找到一个更优雅的解决方案。

# django - Django .order_by() 和 .distinct() 使用 postgres

> ID：11230124
> 
> 赞同：3
> 
> 时间：2012-06-27T15:43:25.623
> 
> 标签：django, postgresql

我有一个`Read`与模型相关的`Article`模型。我想做的是创建一个查询集，其中文章是唯一的并且按`date_added`. 由于我使用的是 postgres，因此我更喜欢使用该`.distinct()`方法并指定`article`字段。像这样：

```
articles = Read.objects.order_by('article', 'date_added').distinct('article') 
```

但是，这并没有产生预期的效果，而是按照创建的顺序对查询集进行排序。我知道关于Django 文档`.distinct()`和`.order_by()`在 Django 文档中的注释，但我看不到它在这里适用，因为它提到的副作用是会有重复，我没有看到。

```
# To actually sort by date added I end up doing this
articles = sorted(articles, key=lambda x: x.date_added, reverse=True) 
```

这会在我真正需要它之前执行整个查询，如果有很多记录，它可能会变得非常慢。我已经使用`select_related()`.

是否有更好、更有效的方法来创建具有相关模型和 order_by 日期唯一性的查询？

**UPDATE** 理想情况下，输出将是 Read 实例的查询集，其中它们的相关文章在查询集中是唯一的，并且仅使用 Django orm（即在 python 中排序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:19:34.590

> 是否有更好、更有效的方法来创建具有相关模型和 order_by 日期唯一性的查询？

可能。没有全貌很难说，但我的假设是您正在使用`Read`跟踪哪些文章已阅读和未阅读，并且可能将此与`User`实例联系起来以确定特定用户是否已阅读文章。如果是这种情况，那么您的方法是有缺陷的。相反，您应该执行以下操作：

```
class Article(models.Model):
    ...
    read_by = models.ManyToManyField(User, related_name='read_articles') 
```

然后，要获取特定用户的阅读文章，您可以这样做：

```
user_instance.read_articles.order_by('date_added') 
```

这不需要使用`distinct`等式，因为现在不会有任何重复。

**更新**

获取至少一位用户阅读的所有文章：

```
Article.objects.filter(read_by__isnull=False) 
```

或者，如果要设置流行度阈值，可以使用注释：

```
from django.db.models import Count

Article.objects.annotate(read_count=Count('read_by')).filter(read_count__gte=10) 
```

这只会为您提供至少被 10 位用户阅读过的文章。

# java - 在sqlite数据库android中保存和检索键值对

> ID：11230127
> 
> 赞同：1
> 
> 时间：2012-06-27T15:43:34.057
> 
> 标签：java, android, sqlite

美好的一天，基本上我正在寻找一种方法来检索和保存相对于 sqlite 数据库中的列项的键值对，以便我可以更新列表视图。

示例：如果我有一个名为“group”的列，其中包含一个名为“family”的条目；关于该项目，我希望能够仅为该项目“家庭”保存或检索联系人列表（姓名和号码）。另一个项目条目相同。

最好的方法是什么？我尝试通过json使用Hashmap的ArrayList将联系人详细信息保存在表格的列中。但这样做有麻烦。我试过这个：

保存时：

```
//already have the name and number from using the android contacts api

    final ArrayList<HashMap<String,String>> contacts = new ArrayList<HashMap<String,String>>();     
    HashMap<String, String> map = new HashMap<String,String>();
            map.put(name, number);
            contacts.add(map);

            JSONObject json_contacts = new JSONObject();

                try {
            json_contacts.put("contacts_Arrays", new JSONArray(contacts));
                    arraylist_to_string = json_contacts.toString();

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            ContentValues values = new ContentValues(); 
            values.put(ContactDB.GROUP, groupname);
            values.put(ContactDB.GROUP_CONTACTS, arraylist_to_string);

            Log.d(TAG, "Successfully updating contacts for group");
            dbadapter.updateGroup(rowId, values);
            cursoradapter.notifyDataSetChanged(); 
```

在我的 bindview 方法中检索时：

String contactDetails = cursor.getString(cursor.getColumnIndex(ContactDB.GROUP_CONTACTS));

```
 if(contactDetails != null){
            try {
                JSONObject json = new JSONObject(contactDetails);
                JSONArray json_array = json.optJSONArray("contacts_Arrays");

                for(int i=0; i < json_array.length(); i++){
    LinkedHashMap<String,String> map = new LinkedHashMap<String, String>();
            Iterator<String> myIterator = map.keySet().iterator();
                    while(myIterator.hasNext()){
                       key = (String)myIterator.next();
                       value = (String)map.get(key);

                       holder.contact_name.setText(key);
                       holder.contact_number.setText(value);                           
                       notifyDataSetChanged();

                    }
                }

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            return;
        }
    } 
```

根本没有任何运气，并且不确定它是否首先是正确的方法。构造数据库表的最佳方法是什么。我应该创建一个联系人对象并存储它还是有更好的方法？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:56:10.907

仅通过查看您的代码，`HashMap`a 中的多个实例`List`可能会占用过多的内存，具体取决于存储数据的大小。

由于您要存储键值对，因此关系数据库（如 SQLite 就是其中之一）通常不是正确的决定。Android 具有[“共享首选项”](http://developer.android.com/guide/topics/data/data-storage.html#pref)来存储简单的键值对（具有原始数据类型）。

* * *

如果你想/需要用 SQLite 实现它，你应该采用关系方式。如果我正确理解了您的问题，您将拥有如下表格：

```
Table "Groups"
+----------+------------+
| group_ID | group_name |
+----------+------------+
| 1        | Family     |
| 2        | Work       |
+----------+------------+

Table "Contacts"
+----------+------------+--------+
| name     | number     | group  |
+----------+------------+--------+
| Jon      | 0173401... | 1      |
| James    | 057123...  | 2      |
| Lukas    | 012343...  | 2      |
+----------+------------+--------+ 
```

从这个表中，您可以查询到“James”和“Lukas”是“Work”组的成员。然后，您可以通过简单地搜索`group`-column 设置为 -table 中显示的值的条目`group`（`2`用于“Work”组）来查询“Work”组的所有成员。

使用此系统，您可以添加新组和联系人，并将联系人放入（或多个）组中。

# android - Android 视图在开始时闪烁 TranslateAnimation

> ID：11230128
> 
> 赞同：2
> 
> 时间：2012-06-27T15:43:36.863
> 
> 标签：android, animation, android-animation

我使用 TranslateAnimation 来移动按钮，它工作正常，但在动画开始之前出现奇怪的闪烁。对于短时间动画视图移动到更高的位置。之后视图回到正常位置并开始动画。

我使用 RelativeLayout 并移动 7 个按钮。

```
public void moveView(final int rotationType) {
    AnimationSet animationList[] = new AnimationSet[buttonAmount];
    for (int i = 0; i < buttonAmount; i++) {
        AnimationSet animationsSet = new AnimationSet(false);
        animationsSet.setFillAfter(true);
        boolean visible = true;
        boolean hide = false;
        boolean show = false;
        ImageButton button = buttons.get(i);

        int position = i + movementCount;

        if (position < 0) {
            position = getLastButtonId();
        } else if (position > getLastButtonId()) {
            position = position - buttonAmount;
        }
        int cL = getDP(leftCoord.get(position));
        int cB = getDP(bottomCoord.get(position));

        // TODO left right

        if (rotationType == RIGHTBUTTON) {
            position--;
        } else if (rotationType == LEFTBUTTON) {
            position++;
        }

        if (position < 0) {
            position = getLastButtonId();
        } else if (position > getLastButtonId()) {
            position = position - buttonAmount;
        }
        int nL = getDP(leftCoord.get(position));
        int nB = getDP(bottomCoord.get(position));
        int left = cL - nL;
        int bot = cB - nB;
        long time = 1000;

        if (rotationType == LEFTBUTTON) {
            if (cL == getDP(leftArrowLeft) && cB == getDP(leftArrowBottom)) {
                hide = false;
                visible = true;
                show = true;
            }
            if (nL == getDP(leftArrowLeft) && nB == getDP(leftArrowBottom)) {
                hide = false;
                visible = false;
                time = 0;
            }

            if (nL == getDP(rightArrowLeft)
                    && nB == getDP(rightArrowBottom)) {
                hide = true;
            }
        } else

        if (rotationType == RIGHTBUTTON) {
            if (cL == getDP(rightArrowLeft)
                    && cB == getDP(rightArrowBottom)) {
                hide = false;
                visible = true;
                show = true;
            }
            if (nL == getDP(leftArrowLeft) && nB == getDP(leftArrowBottom)) {
                hide = true;
            }

            if (nL == getDP(rightArrowLeft)
                    && nB == getDP(rightArrowBottom)) {
                hide = false;
                visible = false;
                show = false;
                time = 0;
            }
        }

        TranslateAnimation trans = new TranslateAnimation(left, 0, bot, 0);

        final int l = nL;
        final int b = nB;
        final ImageButton ib = button;
        final boolean isVisible = visible;
        final boolean isHide = hide;
        final boolean isShow = show;
        final int count = i;
        final RelativeLayout layout = main;
        button.clearAnimation();
        trans.setAnimationListener(new AnimationListener() {
            RelativeLayout.LayoutParams params;

            @Override
            public void onAnimationStart(Animation animation) {
                params = new RelativeLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT);
                params.leftMargin = l;
                params.topMargin = b;
                ib.setLayoutParams(params);

                if (isVisible) {
                    int tag = (Integer) ib.getTag();
                    ib.setImageResource(resourcesList[tag]);
                }
            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                if (!isVisible) {
                    ib.setImageDrawable(null);
                }
            }
        });

        trans.setDuration(time);
        animationsSet.addAnimation(trans);
        if (show) {
            Animation animShow = new AlphaAnimation(.0f, 1f);
            animShow.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // ib.setVisibility(View.VISIBLE);
                    // buttons.get(count).setVisibility(View.VISIBLE);
                }
            });
            animShow.setDuration(1000);
            animationsSet.addAnimation(animShow);
        } else if (hide) {
            Animation hideShow = new AlphaAnimation(1.0f, .0f);
            hideShow.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                }
            });
            hideShow.setDuration(1000);
            animationsSet.addAnimation(hideShow);

        }
        button.startAnimation(animationsSet);
    }

    if (rotationType == RIGHTBUTTON) {
        movementCount--;
    } else if (rotationType == LEFTBUTTON) {
        movementCount++;
    }

    if (movementCount < 0) {
        movementCount = getLastButtonId();
    } else if (movementCount > getLastButtonId()) {
        movementCount = 0;
    }
} 
```

# ruby-on-rails - 基于条件的 Rails 路线

> ID：11230130
> 
> 赞同：19
> 
> 时间：2012-06-27T15:43:45.077
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, ruby-on-rails-3.2, rails-routing

我有三个角色：讲师、学生、管理员，每个角色都有带有“主页”视图的控制器。

所以这工作正常，

```
get "instructor/home", :to => "instructor#home"
get "student/home", :to => "student#home"
get "admin/home", :to => "admin#home" 
```

我想写一个像下面这样的虚荣网址，它将根据角色的角色路由`user_id`到正确的主页。

```
get "/:user_id/home", :to => "instructor#home" or "student#home" or "admin#home" 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2015-03-19T03:44:30.290

我提供了一种替代方法，因为在 Rails 中搜索基于角色的路由时，这个 SO 问题出现在顶部附近。

我最近需要实现类似的东西，但想避免在控制器中使用大量条件 - 由于我的每个用户角色都需要加载和呈现完全不同的数据，这使情况更加复杂。我选择使用[Routing Constraint](http://guides.rubyonrails.org/routing.html#advanced-constraints)将决定逻辑移动到路由层。

```
# app/constraints/role_route_constraint.rb

class RoleRouteConstraint
  def initialize(&block)
    @block = block || lambda { |user| true }
  end

  def matches?(request)
    user = current_user(request)
    user.present? && @block.call(user)
  end

  def current_user(request)
    User.find_by_id(request.session[:user_id])
  end
end 
```

上面代码中最重要的部分是`matches?`确定路由是否匹配的方法。该方法传递一个对象，该`request`对象包含有关正在发出的请求的各种信息。就我而言，我正在查找`:user_id`存储在会话 cookie 中的内容，并使用它来查找发出请求的用户。

然后，您可以在定义路线时使用此约束。

```
# config/routes.rb
Rails.application.routes.draw do
  get 'home', to: 'administrators#home', constraints: RoleRouteConstraint.new { |user| user.admin? }
  get 'home', to: 'instructors#home', constraints: RoleRouteConstraint.new { |user| user.instructor? }
  get 'home', to: 'students#home', constraints: RoleRouteConstraint.new { |user| user.student? }  
end 
```

有了上述内容，发出请求的管理员`/home`将被路由到 的*home*操作，`AdministratorsController`发出请求的讲师`/home`将被路由到 的*home*操作，`InstructorsController`发出请求的学生`/home`将被路由到*home*的动作`StudentsController`。

### 更多信息

如果您正在寻找更多信息，我最近在[我的博客](http://bjedrocha.com/rails/2015/03/18/role-based-routing-in-rails/)上写了关于这种方法的文章。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T15:49:00.043

您不能对路由执行此操作，因为路由系统没有做出此决定所需的信息。所有 Rails 都知道此时请求的参数是什么，并且无权访问数据库中的任何内容。

您需要的是一个控制器方法，它可以加载所需的任何数据，大概是用户记录，并使用`redirect_to`.

这是相当标准的做法。

**更新：**

要在单个控制器操作中执行所有这些操作，您需要根据角色拆分逻辑。一个例子是：

```
class HomeController < ApplicationController
  def home
    case
    when @user.student?
      student_home
    when @user.admin?
      admin_home
    when @user.instructor
      instructor_home
    else
      # Unknown user type? Render error or use a default.
    end
  end

protected
  def instructor_home
    # ...
    render(:template => 'instructor_home')
  end

  def student_home
    # ...
    render(:template => 'student_home')
  end

  def admin_home
    # ...
    render(:template => 'admin_home')
  end
end 
```

# database - 在客户表中存储姓氏/公司名称的最佳方式

> ID：11230133
> 
> 赞同：0
> 
> 时间：2012-06-27T15:43:46.283
> 
> 标签：database, field

我有一个客户表，我目前正在存储：

*   姓
*   名
*   中间名字
*   公司名称
*   实体类型（企业或个人）
*   地址、电话等

如果客户是企业，我目前将企业名称存储在单独的字段中。我已经存储了实体类型，那么是否有必要将公司名称存储在单独的字段中？在我的搜索查询中，我使用的是“WHERE last_name LIKE '%$var%' OR business_name LIKE '%$var%'”，这可能是矫枉过正。我应该保持原样，还是应该将公司名称合并到姓氏字段中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:52:15.783

我实际上会创建不同的表

```
1\. for people
1\. for companies
1\. for people - company relation 
```

这在以后提供了最大的灵活性，例如，您可以拥有一个属于企业的用户，并为他购买或为他的企业购买。

米海

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:54:41.813

我建议将公司名称放在姓氏一栏中，因为选择后，如果没有名字，您就可以识别它是否是公司。

此外，您只需要一个逻辑即可将您的姓名放入字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:50:10.900

我的建议：如果您像这样使用 last_name 和 business_name ，则不需要使用两个字段。只创建一个名为 name 的字段（而不是这两个）。您可以在此处输入“姓氏”或“公司名称”值，这样您就有了这样的 SQL：

```
WHERE name like '%$var%' 
```

如果您有真人，您将填写姓名、名字、中间名。如果您有业务，您将只有姓名。

当然 entity_type 会区分它们。

# jquery - 元素完全可见后调用脚本

> ID：11230134
> 
> 赞同：0
> 
> 时间：2012-06-27T15:43:48.833
> 
> 标签：jquery, mcustomscrollbar

我正在使用下面的这个脚本来加载一个隐藏的 div，在另一个里面：

```
$(document).ready(function(){
    $(function() {
        $('#menu a').click(function(e) {
            e.preventDefault();
            $('#menu a').removeClass("selected");
            $(this).addClass("selected");
            var h = $(this).attr('href');
            $("#conteudo").fadeOut("slow", function() {
                $(this).html($(h).html()).fadeIn("slow");
            });
        });
 }); 
```

但是在某些页面中，我使用了一些[mCustomScrollbar](http://manos.malihu.gr/jquery-custom-content-scroller)，它仅在 div 未隐藏时才有效。所以我需要在 div 完全可见后调用脚本。我怎么能用上面的代码做到这一点？

这是滚动条脚本调用：

```
$("#mcs_container").mCustomScrollbar("vertical",400,"easeOutCirc",1.05,"auto","yes","yes",10); 
```

在脚本的页面中，有这个示例代码，但是我的脚本加载对整个菜单都有效……而这个示例是设置他要携带的页面。我说清楚了吗？

```
$("#mcs_container .content").load("new.html", function(){
    $("#mcs_container").mCustomScrollbar("vertical",400,"easeOutCirc",1.05,"auto","yes","yes",10);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:49:52.743

您可以将回调函数传递给`.fadeIn()`动画结束后将执行的函数（使动画`<div>`可见）。它应该看起来像这样：

```
$("#conteudo").fadeOut("slow", function() {
    $(this).html($(h).html()).fadeIn("slow", function() {
        $("#mcs_container").mCustomScrollbar("vertical",400,"easeOutCirc",1.05,"auto","yes","yes",10);
    });
}); 
```

# php - Facebook 帖子显示在用户的墙壁和页面上

> ID：11230136
> 
> 赞同：0
> 
> 时间：2012-06-27T15:43:53.780
> 
> 标签：php, facebook

PHP SDK 是否可以在用户的​​墙上发布一些内容，并在粉丝页面上显示相同的帖子，所以如果有人评论它，它可以在两个地方都可见？

我可以设法用我的应用程序单独发布，但镜像这些帖子会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:48:24.320

您必须将这两个功能添加到一个功能中才能发布。

或者您可以设置选项以在按钮中发布一个或两个位置。

正如您所说，您可以单独发布它们，那么为什么不将两个功能添加在一起。

干杯

# php - 将第二个 jQuery.ajax 函数和 isset() 检查 POST 变量放在哪里？

> ID：11230146
> 
> 赞同：0
> 
> 时间：2012-06-27T15:44:17.397
> 
> 标签：php, ajax, jquery

这是一个使用单个`jQuery.ajax`帖子到同一页面的页面，并且工作正常。

```
<?php 
if (!isset($_POST['varA'])) {
?>
<html>
    <head>
        <script type="text/javascript">
            $(document).ready(bingo);

            function bingo()
            {
                jQuery.ajax({
                    type: "POST",
                    data:  {varA: "123"},
                    success: function(data)
                    {
                        $("#test").html(data);
                    }
                });
            }
        </script>
    </head>
    <body>
        <span id="test"></span>
    </body>
</html>
<?php
}
else 
{
    print_r($_POST['varA']);
}
?> 
```

**情况：**我有另一个变量，我希望使用另一个单独`jQuery.ajax`的 . 但是，当我将它们完全像这样放置时，我的页面内容会自我复制。

**不好的例子**（描述我正在尝试做的事情）

```
<?php 
    if (!isset($_POST['varA'])) {
    ?>
    <html>
        <head>
            <script type="text/javascript">
                $(document).ready(bingo);

                function bingo()
                {
                    jQuery.ajax({
                        type: "POST",
                        data:  {varA: "123"},
                        success: function(data)
                        {
                            $("#test").html(data);
                        }
                    });
                }

                function buttony() //added 2nd independent jQuery.ajax function
                {
                    jQuery.ajax({
                        type: "POST",
                        data: {varB: "456"},
                        success: function(data)
                        {
                            $("#test2").html(data);
                        }
                    });
                }
            </script>
        </head>
        <body>
            <span id="test"></span>
            <span id="test2"</span> //added 2nd span
            <input type="button" value="Clicky" onclick="buttony()"/> //added
        </body>
    </html>
    <?php
    }
    else 
    {
        print_r($_POST['varA']);
    }

    if(isset($_POST['varB'])) //added isset() checking
    {
        print_r($_POST['varB']);
        echo 'varB Okay';
    }
    else
    {
        echo 'varB Not';
    }
?> 
```

**附加信息**`jQuery.ajax`：为两个“Bad Example”发布变量都工作正常。

* * *

**注意：**下面的图片不是来自上面的代码，只是我所说的“内容重复自身”的一个例子。

**前**

![前](../Images/9bda2a674310d2f6aeb5a98d867866f3.png)

**后**

![后](../Images/584201adfb94fee64477a976ca92fb5a.png)

* * *

**问题：**我可以知道我应该把我的第二个`jQuery.ajax`函数放在哪里并`isset()`检查 POST 变量，这样两个`jQuery.ajax`函数都可以正常工作并且不会相互冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:33:31.847

您不必将 bingo 函数传递给文档就绪函数。尝试

```
$(document).ready(function() {

            function bingo()
            {
                jQuery.ajax({
                    type: "POST",
                    data:  {varA: "123"},
                    success: function(data)
                    {
                        $("#test").html(data);
                    }
                });
            }

            bingo();

            function buttony() //added 2nd independent jQuery.ajax function
            {
                jQuery.ajax({
                    type: "POST",
                    data: {varB: "456"},
                    success: function(data)
                    {
                        $("#test2").html(data);
                    }
                });
            }

            buttony();

}); //end document ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:19:52.213

我曾经`window.location`替换使用第二个 jQuery.ajax 以避免复杂化。

**示例示例**

JavaScript 函数内部

```
window.location = "samePage.php?varB=abc"; 
```

检查 POST 变量 varB

```
if(isset($_REQUEST['varB'])
{
    $getValue = $_REQUEST['varB'];
} 
```

我将这个问题留给社区来解决如何`jQuery.ajax`在同一页面中正确嵌套使用 2 个或更多。

# android - Android sqlite 数据库 - 当教程已经用于记事本时，我该从哪里开始？

> ID：11230147
> 
> 赞同：1
> 
> 时间：2012-06-27T15:44:19.060
> 
> 标签：android, sqlite, datepicker, android-edittext

我试图在 android 开发人员上寻找记事本教程，但最近的变化似乎已经离线。

我需要的是一个由用户使用 3-4 个编辑文本框和 2 个日期框创建的数据库，并存储为 1 个文件，我可以回顾一下。

但我不知道从哪里开始使用数据库..

我阅读了有关如何制作的教程，但我无法确定需要根据我的需要更改数据库编码的内容，

我创建了一个随机词，当我单击添加按钮时，我设置了 5 个词，但这并没有告诉我需要做什么才能从我的文本输入框和日期选择器中获取信息并将它们显示在列表视图中..

对此的任何帮助都会很棒。

附言。我不是在找人为我做这件事，我想了解数据库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:50:28.713

这是一个很好的起点：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T15:51:29.270

我讨厌只用一个链接来回答，但这几乎是必需的（我不会发布整个教程作为答案：p）。

一个很好的数据库教程在[这里](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-25T21:04:28.133

在我自己的搜索中遇到了这个。不确定您是否仍然感兴趣，但如果其他人遇到，它可以帮助他们。截至 2013 年 5 月，这仍然有效：http: [//developer.android.com/training/notepad/index.html](http://developer.android.com/training/notepad/index.html)

# git - 使用 git 获取下一次提交的名称

> ID：11230149
> 
> 赞同：0
> 
> 时间：2012-06-27T15:44:24.040
> 
> 标签：git, version-control, repository, branch

我想要做的是根据 commitId 签出一个特定的提交，然后我想签出紧随我所在的那个提交之后的提交。有没有什么办法可以做到这一点，而无需在我使用的那个之后使用提交的 commitId？或者有没有办法找出我所拥有的离当前分支有多远？

基本上，我有一个版本的 commitId，它距离头部 X 远。我需要弄清楚如何让 X-1 版本的 commitId 远离主版本，或者只是找出 X 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:49:25.253

```
$ git name-rev --name-only HEAD 
```

这将为您提供一个有用的名称，例如`master~6`, 或`tags/mytag~2`，您可以使用该名称轻松命名下一次提交（即`master~5`或`tags/mytag~1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:50:00.007

如果您在给定分支后面的 X 次提交的修订中签出（让我们称之为它`master`，您可以这样做：

```
git log --pretty=oneline HEAD..master | wc -l 
```

`master`那应该返回您和分支之间的提交次数

希望这可以帮助。

# macos - CGEventCreateKeyboardEvent 标志？

> ID：11230151
> 
> 赞同：1
> 
> 时间：2012-06-27T15:44:31.507
> 
> 标签：macos, cocoa

在 Cocoa 中，我正在开发一个可以发送键盘事件的应用程序。使用`CGEventCreateKeyboardEvent`似乎是做到这一点的正确方法。我找到了以下代码片段：

```
CGEventRef push = CGEventCreateKeyboardEvent(NULL, 123, true);
CGEventRef release = CGEventCreateKeyboardEvent(NULL, 123, false);
CGEventPost(kCGHIDEventTap, push);
CGEventPost(kCGHIDEventTap, release); 
```

哪个“左箭头”推动，然后释放，仅使用硬编码值 123。虽然我一直在环顾四周，但我无法找到任何类型的可能值查找。有人能指出我正确的方向吗？

# binary - 结果总和为二进制 16

> ID：11230158
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:45:04.840
> 
> 标签：binary

我已经回答了这个问题，但我无法理解它所说的以 16 位二进制获得结果总和的部分，通过将总和转换为十进制来检查你的答案。

1.在二进制中添加'A'和'B'以获得16位二进制的结果和，通过将总和转换为十进制来检查你的答案。

`Decimal number = 58927634 A= 5892 to Binary 1011 1000 0010 0 B= 7634 to Binary 1110 1110 1001 0 a + b = 11010011010110`

多谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:03:23.300

让我解释：

```
A = 00005892 
B = 00007634 
```

在以*10 为基数*的数字系统中，用 8 位**小数**表示。

和...

```
A = 0001 0111 0000 0100
B = 0001 1101 1101 0010 
```

在以*2 为底*的数字系统中，用 16**位**来表示它。

我希望它现在对你有意义。

以及 A 和 B 的和，以 2 为底的数字系统，用 16 位来表示它......

```
0011 0100 1101 0110 
```

虽然，我们只需要 14 位......

你的答案是正确的，但它的宽度是 14 位长。

# iphone - 带有一些框架的 PresentModalViewController

> ID：11230159
> 
> 赞同：1
> 
> 时间：2012-06-27T15:45:11.473
> 
> 标签：iphone, ios, presentmodalviewcontroller, uimodalpresentationstyle

我想在视图的中心展示一个带有小框架的 modalViewController。

那可能吗？

即使我为 viewController 对象设置了一些框架，presentModelViewController 也会以全屏模式显示该视图。

另外，我使用 modalPresentationStyle 作为`UIModalPresentationFormSheet`. 我想要比这更小的框架。

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:50:15.473

您**不能**呈现具有较小帧大小的模态视图控制器。

您可以尝试做的是将模态视图控制器的背景设置为透明，然后在中心（或您希望看到的任何地方）添加较小尺寸的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:56:59.210

呈现模态视图将覆盖整个视图，如果您不想覆盖整个视图，那么您应该自己创建视图，将其作为子视图添加到当前视图，然后自己为其过渡设置动画。它不会是一个单独的 viewController，因为您仍在原始视图的范围内操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:09:45.340

是的。有可能的。请按照以下步骤操作：

```
- (void)viewDidLoad {
     [super viewDidLoad];
     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShown:) name:UIKeyboardWillShowNotification object:nil];
     CGRect rect = CGRectMake(242, 60, 540, 312);
     self.controller.view.superview.frame = [self.view convertRect:rect toView:self.controller.view.superview.superview];
}

- (void)keyboardWillShown:(NSNotification*)aNotification {
     CGRect rect = CGRectMake(242, 60, 540, 312);
     self.controller.view.superview.frame = [self.view convertRect:rect toView:self.controller.view.superview.superview];
} 
```

您必须在控制器设置之后（就在 viewDidLoad 方法结束之前）设置当前控制器的框架。

在这里，我考虑了 iPad 的当前视图控制器框架。

# c# - 在 Linq 中加入 2 个具有匿名类型的空字符串列表

> ID：11230162
> 
> 赞同：2
> 
> 时间：2012-06-27T15:45:15.543
> 
> 标签：c#, .net, linq, join

我有 2 个不同对象的列表，我需要加入 2 个参数。使用 Linq，我可以加入匿名类型的列表。

```
from L1 in List1
join L2 in List2 on new { L1.Field1, L1.Field2 } equals new { L2.Field1, L2.Field2 }
select... 
```

这很好用，除了我想在 Field2 上包含空字符串匹配项。我也从两个列表中删除了任何空格，所以它们都是空字符串。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:56:20.750

啊解决了， List1 中的 Field1 为空，不为空。当 null 解决了问题时，将其设置为空字符串。

# cocoa - 提交一个 OSX 应用程序，在其捆绑包中包含帮助程序应用程序

> ID：11230168
> 
> 赞同：17
> 
> 时间：2012-06-27T15:45:26.723
> 
> 标签：cocoa, provisioning, submission, mac-app-store

我真的要被这个问题抓狂了！我有一个应用程序，其中包含一个简单的 Helper 应用程序，用于管理 Main 应用程序的登录项。

当我尝试提交应用程序时，我收到与配置文件和权利相关的错误。我确定问题与 Helper 应用程序有关，因为在我添加它之前，提交工作没有问题。

目前，帮助应用程序是代码签名的，并且作为主应用程序被沙盒化。

错误是：

*   配置文件无效。捆绑包中包含的配置文件无效

*   无效的代码签名权利。您的应用程序包签名中的权利与配置文件中包含的权利不匹配。该捆绑包包含一个未包含在**“myapp.app/Contents/Library/LoginItems/helper.app”中的配置文件“com.apple.application-identifier”中的密钥**

*   无效的代码签名权利。您的应用程序包签名中的权利与配置文件中包含的权利不匹配。该捆绑包包含一个未包含在“myapp.app/Contents/MacOS/myapp”中的配置文件“com.apple.application-identifier”中的密钥

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-07T04:07:34.460

对于遇到此问题的任何其他人，您不必再次对帮助应用程序进行代码签名，只需从 xarchive 中的帮助应用程序中删除“embedded.provisionprofile”，您就可以毫无问题地提交。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-08T20:13:40.820

似乎可以解决此问题的唯一解决方案是从 Xcode 对帮助应用程序进行协同设计和沙箱化，然后：

**从终端重新设计 Helper 应用程序**

`codesign -f -s "3rd Party mac Developer Application:" -i "com.bundle.YOUR.HELPER" --entitlements path/to/helper/entitlements YEOR-HELPER.app`

**从 Helper 应用程序中删除配置文件，将“运行脚本”添加到“构建阶段”中**

```
rm"${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app/Contents/Library/LoginItems/YOUR-HELPER.app/Contents/embedded.provisionprofile" 
```

有了这个解决方案，我们已经正确提交了我们的 App。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T02:21:36.093

当我不小心在我的目标中包含一些 3rd-party .a 文件时，我遇到了第三个错误。（非 App Store 分发需要它们，但我忘记将它们排除在 App Store 构建中）。该错误对跟踪此错误并没有太大帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T04:01:43.970

通过添加以下运行脚本，我终于能够通过从帮助应用程序中删除 embedded.provisionprofile 文件来解决此问题：

```
if [ -f "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app/Contents/embedded.provisionprofile" ];
then
    rm "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app/Contents/embedded.provisionprofile"
    echo "Removed embedded provisioning profile."
else
    echo "No profile found"
fi 
```

# git - 当我推送到服务器时，Git 正在更改我的文件权限

> ID：11230171
> 
> 赞同：25
> 
> 时间：2012-06-27T15:45:40.630
> 
> 标签：git, permissions, file-permissions

我正在使用 git 来管理服务器上的网站。

我有一个如下所示的本地存储库

```
local@workstation:myapp$ ls -l | awk '{k=0;for(i=0;i<=8;i++)k+=((substr($1,i+2,1)~/[rwx]/)*2^(8-i));if(k)printf("%0o ",k);print}'
total 16
755 drwxr-xr-x@ 18 thomas  staff   612 Jun 13 15:35 application
755 drwxr-xr-x@ 11 thomas  staff   374 Jun 12 16:25 assets
644 -rw-r--r--@  1 thomas  staff  6399 Jun 22 11:45 index.php
755 drwxr-xr-x@ 10 thomas  staff   340 May 14 15:22 system 
```

我在服务器上有一个裸存储库，用于将存储库`post-receive`指向 apache 前面。Apache 的`public`文件夹内容在下面——不是裸存储库。

```
root@server:/srv/public/myapp# ls -l | awk '{k=0;for(i=0;i<=8;i++)k+=((substr($1,i+2,1)~/[rwx]/)*2^(8-i));if(k)printf("%0o ",k);print}'
total 20
700 drwx------ 15 root root 4096 Jun 27 11:31 application
700 drwx------ 10 root root 4096 Jun 27 11:31 assets
600 -rw-------  1 root root 6399 Jun 27 11:31 index.php
700 drwx------  8 root root 4096 Jun 27 11:31 system 
```

这对我在网络服务器上的代码造成了混乱。

我怎样才能解决这个问题？如果这有什么不同，我正在使用 gitolite。

git 服务器配置文件

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = true 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-27T17:16:23.873

[这个帖子](http://git.661346.n2.nabble.com/file-mode-td6467904.html#a6469081)提供了一个很好的解释：

> 这是设计使然。虽然 git 数据结构在技术上可以在其树中存储 unix 模式位，但在 git 的早期历史中发现，除了简单的可执行位之外，尊重任何东西对于 git 的正常用例（即人们存储代码或其他共享存储库中的文件）。
> 
> 我们可以添加一个配置选项来尊重文件模式，但通常被认为不值得。它只解决了一般元数据问题的一部分，因为它省略了所有者和组名称或 ID，以及 ACL 等扩展元数据。
> 
> 如果模式对您很重要，建议的修复是以下之一：
> 
> 1.  使用可以从 git 挂钩调用的“metastore”之类的工具，并将在存储库中跟踪的文件中保存和恢复文件权限。请注意，当使用此类工具时，在保护文件时存在竞争条件（即，git 会将您的文件创建为 644，然后 Metastore 会将其更正为 600；与此同时，有人可以读取您的文件）。
>     
>     
> 2.  根据您要存储的确切内容，将存储库保存在另一个目录中并受权限保护可能有意义，然后使用单独的工具将文件从存储库部署到其最终位置（例如，Makefile 或其他安装工具）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-14T19:18:42.130

为了扩展 @ThomasReggi 的评论，作为通过 git 部署时更改权限问题的解决方案，我留下了我实现的解决方案。您可以在 hooks / post-receive 文件（或您正在使用的任何挂钩）中添加命令

在使用 git 命令的行之前 --work-tree =（执行部署的行）添加一些“echo”和当前 umask 的显示，设置正确执行部署所需的 umask 并再次显示当前 umask 以确认更改。（这样在执行部署时可以看到（调试））

```
echo "Ref $ ref received. Deploying $ {BRANCH} branch to production ..."
# SHOW current uMask
echo "Current uMASK:"
umask
echo "Set uMASK to 0022"
umask 0022
echo "New uMASK seted to ..."
umask
echo "end umask conf"

# deploy
HUB_VERBOSE = 1
git --work-tree = $ TARGET --git-dir = $ GIT_DIR checkout -f 
```

这样 umask 只会针对当前会话进行更改，而不会影响其余的 ssh 连接。并且文件在创建/修改时使用必要的权限进行部署，而不是在部署后使用命令重新设置必要的权限，从而导致您的应用程序在应用适当权限期间失败。

如果您的权限问题影响了您的 php 应用程序，那么这个问题似乎与您运行 php（DSO、suPHP、suEXEC）的方式有关，因为它们中的每一个都需要不同的权限设置才能正确运行。如果您从服务器迁移，或更改了 php 处理程序，那么您将遇到此问题。

# objective-c - 使用 Plist 删除 tableView 中的单元格

> ID：11230172
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:45:43.267
> 
> 标签：objective-c, uitableview, plist

我想删除我的 2 个 tableViews 之一中的一个单元格（1 个是主要的，2 个是收藏夹）。

要删除一个单元格，我应该将特定值设置为“NO”，以便在 plist 中为 NO（收藏夹表仅显示“isFav”值设置为 YES 的单元格）。

检查此问题以获取更多详细信息：[UITableView not shows the right cells](https://stackoverflow.com/questions/11157692/uitableview-not-showing-the-right-cells)

回到我的问题，我试着做

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath { 
    NSArray *plist = [self readPlist];
    NSMutableDictionary *theItem = [[[plist objectAtIndex:indexPath.section] valueForKey:@"Rows"] objectAtIndex:indexPath.row]; 
    NSLog(@"%@",theItem);
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [theItem setValue:[NSNumber numberWithBool:NO] forKey:@"isFav"]; 

        [self.tableView deleteRowsAtIndexPaths:[[[NSArray arrayWithObject:[plist objectAtIndex:indexPath.section]]valueForKey:@"Rows"]objectAtIndex:indexPath.row] withRowAnimation:UITableViewRowAnimationNone];

        [self writePlist:plist];   
        [self.tableView reloadData];

    }
}

- (void)writePlist:(NSArray*)arr 
{ 
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if ([fMgr fileExistsAtPath:plistPath]) 
        [fMgr removeItemAtPath:plistPath error:nil]; 

    [arr writeToFile:plistPath atomically:YES]; 
}

- (NSArray*)readPlist 
{  
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if (![fMgr fileExistsAtPath:plistPath]) { 
        plistPath = [[NSBundle mainBundle] pathForResource:@"tipsList" ofType:@"plist"]; 

    } 

    NSMutableArray *returnArr = [NSMutableArray arrayWithContentsOfFile:plistPath]; 
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isFav == YES"]; 

    for (NSDictionary *sect in returnArr) { 
        NSArray *arr = [sect objectForKey:@"Rows"]; 
        [sect setValue:[arr filteredArrayUsingPredicate:predicate] forKey:@"Rows"]; 
        [self.tableView reloadData];

    } 
    return returnArr;

} 
```

但没有成功。我想做什么：尝试获取表中的当前项目，然后将其“isFav”值设置为 NO，然后从表中删除单元格，但我失败了，得到

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary row]: unrecognized selector sent to instance 0x7fd4ab0' 
```

我试着做，`[NSArray arrayWithObject:indexPath]`但我明白了

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (1) must be equal to the number of rows contained in that section before the update (1), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

任何帮助表示赞赏：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T00:10:32.057

发生此错误是因为`dataSource`计数与实际数据不同。当您删除一个项目时，`tableView`单元格将下降，例如。从 10 到 9。但是你没有从你的数据中删除数据，`dataSource`所以你最终得到了不同的数据`count`，Xcode 戳了你一点。

正如在聊天中（广泛地）讨论的那样，我们用这段代码解决了这个问题：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath { 

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [tableView beginUpdates];

        NSIndexPath *realIndex = [self realIndexPathForIndex:indexPath];
        NSArray *plist = [self readFullPlist];

        NSMutableDictionary *theItem = [[[plist objectAtIndex:realIndex.section] valueForKey:@"Rows"] objectAtIndex:realIndex.row];
        [theItem setValue:[NSNumber numberWithBool:NO] forKey:@"isFav"];
        [self writePlist:plist];

        [self refreshTable];
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

        [tableView endUpdates];
    }
}

- (NSArray*)readFullPlist
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if (![fMgr fileExistsAtPath:plistPath]) { 
        NSString *bundlePlistPath = [[NSBundle mainBundle] pathForResource:@"tipsList" ofType:@"plist"];
        [self writePlist:[NSArray arrayWithContentsOfFile:bundlePlistPath]];
    }

    return [NSArray arrayWithContentsOfFile:plistPath];
}

- (NSIndexPath*)realIndexPathForIndex:(NSIndexPath*)idxPath
{
    NSArray *fullList = [self readFullPlist];
    NSArray *subArr = [[fullList objectAtIndex:idxPath.section] objectForKey:@"Rows"];

    int row = idxPath.row;
    int newRow = 0;

    for (NSDictionary *dic in subArr)
    {
        if ([[dic valueForKey:@"isFav"] boolValue]) {
            if (row == 0) {
                return [NSIndexPath indexPathForRow:newRow inSection:idxPath.section];
            }
            row--;
        }
        newRow++;
    }
    return idxPath;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:52:13.007

在您的 tableView: commitEditingStyle: 方法中，查找要删除 tableView 中行的语句。在这里你应该交出一个带有 NSIndexPaths 的数组。这一行很难在您的代码段中阅读，因为它包含许多嵌套调用......

# javascript - JavaScript拆分正则表达式保留分隔符

> ID：11230178
> 
> 赞同：2
> 
> 时间：2012-06-27T15:46:16.713
> 
> 标签：javascript, regex

使用 JavaScript 我正在尝试使用正则表达式将段落拆分为句子。我的正则表达式不考虑括号内的句子，我想保留分隔符。

[我在这里](http://jsfiddle.net/swaBw/)放了一个 jsFiddle.net 中的代码示例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:14:46.997

我采用了匹配方法而不是拆分方法。它可能更严格（例如，如果一个句子以`...`等结尾怎么办）。

```
text.match(/\(?[A-Z][^\.]+[\.!\?]\)?(\s+|$)/g); 
```

[http://jsfiddle.net/DepKF/1/](http://jsfiddle.net/DepKF/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T06:40:04.733

在正则表达式示例中使用 (?=pattern) 前瞻模式

```
var string = '500x500-11*90~1+1';
string = string.replace(/(?=[$-/:-?{-~!"^_`\[\]])/gi, ",");
string = string.split(","); 
```

这将为您提供以下结果。

```
[ '500x500', '-11', '*90', '~1', '+1' ] 
```

也可以直接拆分

```
string = string.split(/(?=[$-/:-?{-~!"^_`\[\]])/gi); 
```

给出相同的结果

```
[ '500x500', '-11', '*90', '~1', '+1' ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:52:07.843

@Utkanos您的想法很好，但我认为`replace`可能更好：

```
text.replace(/\(?[A-Z][^\.]+[\.!\?]\)?/g, function (sentence) {
    output += '<p>'+ sentence + '</p>';
}); 
```

[http://jsfiddle.net/juGT7/1/](http://jsfiddle.net/juGT7/1/)

您无需再次循环。

# javascript - 清除在 jQuery 插件中启动的非全局超时

> ID：11230179
> 
> 赞同：0
> 
> 时间：2012-06-27T15:46:18.790
> 
> 标签：javascript, jquery, jquery-plugins, settimeout

我尝试在一个元素上设置一个超时，使用 jQuery 插件触发。根据条件在函数中再次设置此超时。但是，我想在设置另一个之前清除这个元素的超时（如果我重新启动插件），或者手动清除它。

`<div id="aaa" style="top: 0; width: 100px; height: 100px; background-color: #ff0000;"></div>`

这是我的代码（现在在[http://jsfiddle.net/Ppvf9/](http://jsfiddle.net/Ppvf9/)上）

```
$(function() {

    $('#aaa').myPlugin(0);

});

(function($) {

$.fn.myPlugin = function(loops) {

    loops = loops === undefined ? 0 : loops;

    this.each(function() {

        var el = $(this),
            loop = loops,
            i = 0;

        if (loops === false) {
            clearTimeout(el.timer);
            return;
        }

        var animate = function() {
            var hPos = 0;
            hPos = (i * 10) + 'px';

            el.css('margin-top', hPos);
            if (i < 25) {
                i++;
            } else {
                if (loops === 0) {
                    i = 0;
                } else {
                    loop--;
                    if (loop === 0) {
                        return;
                    } else {
                        i = 0;
                    }
                }
            }

            el.timer = window.setTimeout(function () {
                animate();
            }, 1000/25);

        };

        clearTimeout(el.timer);

        //$('<img/>').load(function() {
            // there's more here but it's not very important
            animate();
        //});

    });
    return this;

};

})(jQuery); 
```

如果我 make `$('#element').myPlugin();`，它就会启动。如果我再做一次，就会有两次超时（`$('#aaa').myPlugin(0);` 在控制台中查看）。我希望能够用`$('#element').myPlugin(false);`.

我究竟做错了什么？

编辑：通过设置两个 var 来访问解决`this`： http `$(this)`: [//jsfiddle.net/Ppvf9/2/](http://jsfiddle.net/Ppvf9/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:54:04.430

尝试将超时句柄保存为元素的属性。或者维护一个静态查找表，将元素映射到它们的超时句柄。

像这样的东西：

```
 el.timer = window.setTimeout(...); 
```

我假设每个元素需要一个计时器。不是所有元素的单个计时器。

# ios - 如何子视图相机视图？

> ID：11230180
> 
> 赞同：0
> 
> 时间：2012-06-27T15:46:23.877
> 
> 标签：ios, cocoa-touch, camera, overlay, uiimagepickercontroller

我正在制作一个应用程序，让用户在“镜子”（设备上的前置摄像头）中看到自己。我知道制作带有视图叠加层的 UIImageViewController 的多种方法，但我希望我的应用程序采用相反的方式。在我的应用程序中，我希望相机视图成为主视图的子视图，没有快门动画或捕捉照片或拍摄视频的能力，也没有全屏显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T18:03:06.113

最好的方法是不使用内置的 UIImagePickerController，而是使用`AVFoundation`类。

您想要创建`AVCaptureSession`并设置适当的输出和输入。配置完成后，您可以将`AVCapturePreviewLayer`其添加到您在视图控制器中配置的视图中。预览图层具有许多属性，可让您控制预览的显示方式。

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
AVCaptureOutput *output = [[AVCaptureStillImageOutput alloc] init];
[session addOutput:output];

//Setup camera input
NSArray *possibleDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
//You could check for front or back camera here, but for simplicity just grab the first device
AVCaptureDevice *device = [possibleDevices objectAtIndex:0];
NSError *error = nil;
// create an input and add it to the session
AVCaptureDeviceInput* input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error]; //Handle errors

//set the session preset 
session.sessionPreset = AVCaptureSessionPresetMedium; //Or other preset supported by the input device   
[session addInput:input];

AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:session];
//Set the preview layer frame
previewLayer.frame = self.cameraView.bounds;
//Now you can add this layer to a view of your view controller
[self.cameraView.layer addSublayer:previewLayer]
[session startRunning]; 
```

然后，您可以使用`captureStillImageAsynchronouslyFromConnection:completionHandler:`输出设备的 来捕获图像。

有关如何构建 AVFoundation 的更多信息以及如何执行此操作的示例，请查看[Apple Docs](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)。Apple 的[AVCamDemo 也](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112-Intro-DontLinkElementID_2)列出了所有这些

# javascript - 使用 jquery 显示块显示无问题

> ID：11230183
> 
> 赞同：0
> 
> 时间：2012-06-27T15:46:29.693
> 
> 标签：javascript, jquery

当我将鼠标悬停在`div#new-menu-lower ul.menuul li.menuli`下面的代码中时，我想将显示块添加到第一个 ul 和第一个 li。问题是它向所有 ul 和 li 添加了显示块/无。

```
 $(document).ready(function() {
    //on hover of sub menu li then highlight itself
    $('div#new-menu-lower ul.menuul li.menuli').hover(

    function() {
        $('div#new-menu-lower ul li ul:first').css("display","block");
        $('div#new-menu-lower ul li ul li:first').css("display","block");
        $('div#new-menu-lower ul li ul li ul:first').css("display","block");

    }, function() {
        $('div#new-menu-lower ul li ul:first').css("display","none");
        $('div#new-menu-lower ul li ul li:first').css("display","none");
        $('div#new-menu-lower ul li ul li ul:first').css("display","none");
    })
}); 
```

如果我将鼠标悬停在第二个 UL LI 上，那么它只会显示第一个 ul li ul li，这是错误的。

我已经设法解决了部分问题：（它现在添加`display:block`到子菜单中，即 - ul li ul 但我不会将它添加到其他元素中）

```
$(document).ready(function() {
    //on hover of sub menu li then highlight itself
    $('div#new-menu-lower ul.menuul li.menuli').hover(

    function() {
        $(this).children('div#new-menu-lower ul li ul').css("display","block");
        $(this).children('div#new-menu-lower ul li ul li:first').css("display","block");
        $(this).children('div#new-menu-lower ul li ul li ul').css("display","block");

    }, function() {
        $(this).children('div#new-menu-lower ul li ul').css("display","none");
        $(this).children('div#new-menu-lower ul li ul li:first').css("display","none");
        $(this).children('div#new-menu-lower ul li ul li ul').css("display","none");
    })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:49:44.750

只是使用`:first`而不是`:first-child`

或使用`>`选择器

# javascript - 在超链接中使用 href NOT onClick - Javascript

> ID：11230192
> 
> 赞同：0
> 
> 时间：2012-06-27T15:46:53.477
> 
> 标签：javascript, html, dom, onclick

当我单击“Open Sesame”链接时，我有以下 HTML 会弹出一个窗口：

`<a href="/about-us/" title="Find out About Us" onclick="javascript:void window.open('/about-us/','1329304840803','width=1050,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0');return false;">Open Sesame</a></li>`

但是，我想知道**是否有可能我可以删除“onClick”部分，只在 href 中添加 javascript**并仍然获得相同的新窗口效果。**这可能吗？**

非常感谢您的任何指点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:48:36.617

是的你可以：

```
<a href="javascript:void window.open('/about-us/','1329304840803','width=1050,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0');" title="Find out About Us">Open Sesame</a> 
```

[http://jsfiddle.net/Curt/NqfMX/](http://jsfiddle.net/Curt/NqfMX/)

* * *

但是，我会为此推荐一个事件监听器。它使您的 HTML 代码更加整洁，并将功能与 HTML 设计分开：

```
<a class="opensesame" href="/about-us/" title="Find out About Us">Open Sesame</a>​​​​​​​​​​​​​​​​​​​​​​

​$(function(){
    $("a.opensesame").click(function(e){
        e.preventDefault();
        window.open('/about-us/','1329304840803','width=1050,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0');
    });
});​ 
```

[http://jsfiddle.net/Curt/NqfMX/1/](http://jsfiddle.net/Curt/NqfMX/1/)

# drools - 奇怪的流口水语法

> ID：11230198
> 
> 赞同：1
> 
> 时间：2012-06-27T15:47:02.667
> 
> 标签：drools

我很难理解这部分`value : value == 0`？这段代码是如何工作的？

```
rule "My rule"
   when
       m : MyClass( value : value == 0)
    then
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T02:26:12.873

假设您使用的是 Drools 5.4 或更新的快照，您可以将任何布尔表达式编写为`value == 0`约束，“值”是 MyClass 中的字段名称的约束也是如此。

Drools 还允许您使用“：”将属性绑定到变量名，如下所示：

```
<variable_name> : <fieldName> 
```

所以，你可以写：

```
MyClass( $var : value == 0) 
```

最后，由于 Drools 使用“上下文感知”解析器，您可以拥有一个与属性名称同名的变量，因为 Drools 知道 : 之前的内容是变量名称，而不是字段。因此，在您的示例中：变量“value”将绑定到属性“value”，如果 value 属性等于 0，则约束“value == 0”将为真。

希望能帮助到你。

# jsf-2 - ui 重复分隔符

> ID：11230204
> 
> 赞同：1
> 
> 时间：2012-06-27T15:47:22.520
> 
> 标签：jsf-2, uirepeat

使用 jsf2（参见**maven 依赖**项）

```
 <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.10</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.10</version>
    </dependency>
    <dependency>
        <groupId>com.sun.facelets</groupId>
        <artifactId>jsf-facelets</artifactId>
        <version>1.1.14</version>
    </dependency> 
```

我发现 ui:repeat 标签没有使用 jsf 的配置。**如果我在web.xml**中重新定义分隔符

 **```
<context-param>
    <param-name>javax.faces.SEPARATOR_CHAR</param-name>
    <param-value>_</param-value>
</context-param> 
```

a **<ui:repeat>**呈现 a **:**无论如何，这就是为什么我不能使用 jquery 在我的自定义组件中查找 div 的 Id：

```
 <a href="#" onclick="toggleDiv('#{cc.clientId}Div')">
      <h:outputText value="#{cc.attrs.value}" />
    </a>
    <div id="#{cc.clientId}Div" style="display: none">...</div> 
```

该组件的 HTML 结果为：

```
 <a href="#" onclick="toggleDiv('j_idt12:0_j_idt18_0_j_idt24Div')">123456</a>
    <div id="j_idt12:0_j_idt18_0_j_idt24Div" style="display: none">
    ...
    </div> 
```

如您所见，在 j_idt12:0_j... 中有一个 : 使 jquery 函数无效。我能做些什么呢？有没有办法设置一个特殊的 ui 分隔符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:24:39.747

至于jQuery“问题”，只需转义`:`为`\\:`或使用`[id]`选择器即可。另请参阅[如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery/7928290#7928290)顺便说一句，我宁愿使用固定 ID 而不是依赖 JSF 生成的 ID，否则您的 webapp 是高度不可移植的。

至于`<ui:repeat>`问题，对不起，我无法重现。但是 Facelets 1.x 的依赖是非常可疑的。它可能只会与已经捆绑在 JSF 2.x 中的 Facelets 2.x 冲突，这反过来确实可以解释这个问题。完全摆脱对 Facelets 1.x 的依赖，当您已经在使用 JSF 2.x 时就不需要它了。**

# objective-c - 在 NSOperationQueue 中执行具有依赖关系的代码片段，而不是使用 NSInvocationOperation 调用方法

> ID：11230210
> 
> 赞同：1
> 
> 时间：2012-06-27T15:47:40.273
> 
> 标签：objective-c, nsoperationqueue

我想在 NSOperation 中按顺序执行代码。这可以通过实例化 NSInvocationOperation 轻松完成，例如在我的控制器中：

```
NSOperationQueue *queue = [NSOperationQueue new];

NSInvocationOperation *prepare = [[NSInvocationOperation alloc] initWithTarget:self 
                                                                      selector:@selector(prepare) 
                                                                        object:nil];

NSInvocationOperation *load = [[NSInvocationOperation alloc] initWithTarget:self 
                                                                selector:@selector(loadData) 
                                                                        object:nil];

[load addDependency:prepare]; 
```

这完美地工作，最重要的是我可以保持操作之间的依赖关系。但正如您所见，我必须创建封装操作本身的方法。我想将调用实例化为代码片段，并保持依赖关系。因此，对于不再使用的方法，我的视图控制器将是干净的。

我看到有一个 ^block 选项，但似乎没有维护依赖关系。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:58:52.643

您应该能够使用`NSOperation`. 在您的情况下，您可能想要`NSBlockOperation`：

```
NSOperation *prepare = [NSBlockOperation blockOperationWithBlock:^{
    // code here
}];

NSOperation *laod = [NSBlockOperation blockOperationWithBlock:^{
    // code here
}];

[load addDependency:prepare]; 
```

# c# - 将 Windows Live ID 添加到凭据存储

> ID：11230213
> 
> 赞同：3
> 
> 时间：2012-06-27T15:47:57.580
> 
> 标签：c#, .net, credentials, webdav

我编写了一个将用户的 SkyDrive 映射到网络驱动器的应用程序。但是，当直接从网络驱动器打开 word 文档时，Microsoft Office 2010 会尝试使用 WebDav 加载文档并提示用户再次登录。

![](../Images/d0341555879d392861c7e2d2d0c148aa.png)

当您登录时，它工作正常，如果您单击“记住我”，它会将凭据存储在凭据存储中，可通过`rundll32.exe keymgr.dll, KRShowKeyMgr` 此访问仅持续到会话关闭。

我想将用户凭据的自动存储合并到我的程序中，这样用户根本不会收到提示。

我曾尝试使用 CredWrite API，但它只允许我存储通用凭据。我需要存储一个（.Net Passport）凭证。 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx)

我只能使用将标志设置为 CREDUI_FLAGS_SERVER_CREDENTIAL [http://msdn.microsoft.com/en-us/library/windows/desktop/aa375177(v=vs.85).aspx的 CredUIPromptForCredentials API 来实现这一点](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375177(v=vs.85).aspx)

我已经检查了这个词对 credui.dll 的 API 调用，它与我正在调用的 API 调用相同（除了一些标题）。

![](../Images/b4a85c2363445990deb548ed9937411d.png)

![](../Images/602df23517b7bc8d065ac41ed59aaa0d.png)

但它会产生不同的结果。我的代码生成此凭据以保存

![](../Images/cb007179bacc4eb8d3545751956d8324.png)

api 调用/后续代码一词会产生此凭证

![](../Images/2e974c2673da4d8ffc7b4d14d6de66ef.png)

但是我无法弄清楚如何正确保存凭据目标，以便办公室在不提示的情况下加载它。如果没有选项，我什至更喜欢提示加载，因为我可以预先填写用户名和密码，以便用户只需单击“确定”，但我想默默地做。

此外，如果无论如何要禁用 word 的 WebDav 支持/强制它使用网络驱动器作为也可以工作的实际网络驱动器。我一直找不到任何答案。如果有人有任何想法，我将不胜感激。

# ruby-on-rails-3 - 上限部署的维护页面不起作用（未显示）

> ID：11230217
> 
> 赞同：1
> 
> 时间：2012-06-27T15:48:06.543
> 
> 标签：ruby-on-rails-3, deployment, nginx, capistrano, setup-deployment

**上限部署的维护页面不起作用。我尝试调试但没有看到我的错误有人看到我在这里想念的东西为什么它不起作用？谢谢**

当我做 cap:web:disabled 它不显示维护页面，而只是显示应用程序！

*在 deploy.rb 我有：*

```
 namespace :deploy do
  namespace :web do
     task :disable, :roles => :web do
       require 'erb'
       on_rollback { run "rm #{shared_path}/system/maintenance.html" }

       reason = ENV['REASON']
       deadline = ENV['UNTIL']
       template = File.read('app/views/layouts/maintenance.html.erb')
       page = ERB.new(template).result(binding)

       put page, "#{shared_path}/system/maintenance.html", :mode => 0644
     end
   end 
```

*我的应用程序的 Nginx 配置：*

```
 upstream unicorn {
  server unix:/srv/books/shared/tmp/unicorn.sock fail_timeout=0;
}

server {
  listen 80 deferred;
  server_name books.ltd;

  root /srv/books/public;
  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  if (-f $document_root/system/maintenance.html) {
        return 503;
  }

  error_page 503 @maintenance;
  location @maintenance {
      rewrite  ^(.*)$  /system/maintenance.html last;
      break;
  }

  #error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:43:40.683

我只能帮助 Nginx，但我会这样做：

```
 root /srv/books/public;

  location / {
      try_files /system/maintenance.html $uri/index.html $uri @unicorn;
  }

  location @unicorn {
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header Host $http_host;
      proxy_redirect off;
      proxy_pass http://unicorn;
  } 
```

两者之间唯一的功能区别是用户将获得 200 而不是 503，但我假设您使用该代码只是为了利用错误处理来进行重写。

顺便说一句，您的解决方案不起作用的原因是您重写到 /system/maintenance.html，但是您没有可以为该文件提供服务的位置。因此 Nginx 再次搜索新位置，遇到您的 try_files，并将请求传递给 @unicorn，因为没有其他匹配的位置。如果您添加了

```
location = /system/maintenance.html { } 
```

那么您的解决方案可能会起作用，但我仍然建议我的解决方案更简单，更高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:42:31.063

经过一番研究，我找到了这个页面。它可能对有类似问题的人有所帮助。[http://blog.oncompare.com/2011/01/25/setting-up-a-maintenance-page-with-passenger-nginx-and-rails/](http://blog.oncompare.com/2011/01/25/setting-up-a-maintenance-page-with-passenger-nginx-and-rails/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T12:37:39.533

如果您正在使用带有独角兽的 nginx，您可以使用下面的示例，因为它只是替换一些路径 -

```
upstream unicorn {
      server unix:/tmp/unicorn.rrorder.sock fail_timeout=0;
    }

server {
  listen             80;
  server_name       example.com;

  root /home/deployer/apps/test/current/public;

    location ~* ^/assets/ {
        root /home/deployer/apps/test/current/public;
        gzip_static on;
        expires max;
        add_header Cache-Control public;
        add_header Last-Modified "";
        add_header ETag "";
        break;
    }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header  X-Real-IP       $remote_addr;
    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header  Host $http_host;
    proxy_redirect    off;
    proxy_pass        http://unicorn;
  }
  error_page 503 @503;
    if (-f $document_root/system/maintenance.html) {
     return 503;
    }
  error_page 500 502 503 504 /500.html;
    location @503 {
      rewrite ^(.*)$ /system/maintenance.html break;
    }
  client_max_body_size 4G;
  keepalive_timeout 30;
    proxy_connect_timeout 300;
    proxy_send_timeout    300;
    proxy_read_timeout    300;
} 
```

这是我可行的 nginx 配置，您只需添加以下代码即可。

```
 error_page 503 @503;
    if (-f $document_root/system/maintenance.html) {
     return 503;
    }
  error_page 500 502 503 504 /500.html;
    location @503 {
      rewrite ^(.*)$ /system/maintenance.html break;
    } 
```

然后在您的 deploy.rb 或 production.rb capistrano 文件中添加以下代码

```
namespace :deploy do
  namespace :web do
    desc "Enable maintenance mode for apache"
    task :disable, :roles => :web do
      on_rollback { run "rm -f #{shared_path}/system/maintenance.html" }
      page = File.read('public/maintenance.html')
      put page, "#{shared_path}/system/maintenance.html", :mode => 0644
    end

    desc "Disable maintenance mode for apache"
    task :enable, :roles => :web do
      run "rm -f #{shared_path}/system/maintenance.html"
    end
  end 
end 
```

在公用文件夹中添加maintenance.html文件，内容如下

```
<!DOCTYPE html>
<html>
<head>
  <title>The page you were looking for doesn't exist (404)</title>
  <style type="text/css">
    body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
    div.dialog {
      width: 48em;
      padding: 0 4em;
      margin: 4em auto 0 auto;
      border: 1px solid #ccc;
      border-right-color: #999;
      border-bottom-color: #999;
    }
    h1 { font-size: 100%; color: #f00; line-height: 1.5em; }
  </style>
</head>

<body>
  <div class="dialog">
    <h1>Maintenance Mode</h1>
    <p>"We are currently carrying out essential scheduled maintenance.
        Normal service will resume shortly.  Apologies for any inconvenience." </p>

    <p>Sorry for the inconvenience!</p>
  </div>
</body>
</html> 
```

见下文是可以使用的 rake 任务 -

```
cap deploy:web:enable
cap deploy:web:disable

cap production deploy:web:enable
cap production deploy:web:disable

cap staging deploy:web:enable
cap staging deploy:web:disable 
```

这肯定会像魅力一样起作用！

干杯!

# php - 使用 htaccess 重定向两个文件

> ID：11230218
> 
> 赞同：1
> 
> 时间：2012-06-27T15:48:07.883
> 
> 标签：php, .htaccess, redirect

这是我的情况。我的应用程序网址显示如下：

```
example.com/index.php/article/whatever/here 
```

为了从 url 中删除 index.php，我把它放在我的 .htaccess 中并且工作正常：

```
RewriteEngine On   
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

现在，我的问题是我有这样的 include 和 admin.php：

```
example.com/admin.php/manage/whatever/here 
```

而且我不知道如何在不与 index.php 发生冲突的情况下从 url 中删除 admin.php，因为我已经尝试过了，并且显示了 500 Internal Server Error：

```
RewriteRule ^(.*)$ /index.php/$1 [L]
RewriteRule ^(.*)$ /admin.php/$1 [L] 
```

**编辑**

另一个尝试是这个，什么都没有，因为显示了 404 错误：

```
RewriteEngine On   
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^/(.*?)/(.*) /$1/$2 [L] 
```

我所有的网址都应该有几个参数：

```
example.com/this/is/a/large/url/because/is/requiered 
```

编辑2：

我创建了两条规则，每条规则都可以正常工作！！！但两者不能一起工作：

```
RewriteRule ^admin/(.*)$ /admin.php/$1 [L]
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:25:49.253

尝试：

```
RewriteEngine On   
RewriteBase / 

RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteCond ${REQUEST_URI} ^admin/(.*)$ [NC]
RewriteRule ^(.*)$ /admin.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

然后至少使用以下方法进行测试：

```
http://www.example.com/some/url
http://www.example.com/admin/some/url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:56:15.913

您可以稍微修改重写规则以捕获路径的第一部分，并在替换中使用它。试试这个：

```
RewriteRule ^/(.*?)/(.*) /$1/$2 [L] 
```

基本上`()`创建一个捕获组，因此前两个之间的任何内容都`/`将被捕获`$1`，之后的任何内容都将被捕获为`$2`

请注意，如果您只想将此替换应用于`index.php`和`admin.php`

# php - 使用 PHPCASSA 从 Cassandra 获取价值

> ID：11230222
> 
> 赞同：0
> 
> 时间：2012-06-27T15:48:13.243
> 
> 标签：php, cassandra, phpcassa

我最近切换到 PHPCassa 来管理我的 PHP 平台中的数据库连接。

这是我正在使用的代码：

```
$indexExpression = new IndexExpression("Username", $username);
$indexClause = new IndexClause(array($indexExpression));
$cf = new ColumnFamily($this->cassandra, "Users");
$rows = $cf->get_indexed_slices($indexClause); 
```

问题是它实际上`$rows`不是包含我想要获取的数据的数组，而是包含一个`IndexedColumnFamilyIterator`对象。

我做错了什么？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:11:18.327

由于您已经交叉发布到用户邮件列表（tisk，tisk :)，我将链接到答案并将答案复制到此处以供其他人使用：[https ://groups.google.com/forum/?fromgroups#!topic /phpcassa/RrYTQc_jQ7s](https://groups.google.com/forum/?fromgroups#!topic/phpcassa/RrYTQc_jQ7s)

* * *

它返回一个迭代器，以便它可以自动将查询分解为可管理的块（默认情况下为 100 行）。

```
$row_iterator = $cf->get_indexed_slices($indexClause);
foreach ($row_iterator as $key => $columns) {
    // do stuff
} 
```

# java - 如何将选定对象参数从下拉菜单发送到 JSP 中的函数

> ID：11230223
> 
> 赞同：1
> 
> 时间：2012-06-27T15:48:18.953
> 
> 标签：java, javascript, jsp, jstl

我有一个下拉菜单，其中包含一些文档名称。现在，当一个人选择一个文档时，它会调用 onDocumentChange() 方法。

为了填充下拉菜单，我收到一个名为 result 的对象，它是来自服务器的 doc 对象列表。

```
<select id="documentSelect" onChange="onDocumentChange()">
<c:forEach items="${results}" var="result">
    <option id="${result.getDocDisplayURL()}"><c:out value="${result.getDocFn()}"/></option>
</c:forEach>
</select> 
```

到目前为止，它是紧张的。

现在这个 doc 对象有一些其他属性，称为日期和时间。现在，当用户从下拉菜单中单击任何项​​目时，我想将该特定项目的时间和日期属性发送到 onDocumentChange() 方法。我怎样才能做到这一点。

我猜是这样的

```
<select id="documentSelect" onChange="**onDocumentChange(result.date, result.time)**">
<c:forEach items="${results}" var="result">
<option id="${result.getDoc()}"><c:out value="${result.getText()}"/></option>
</c:forEach>
</select> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:59:58.563

您似乎认为 JavaScript 与 Java/JSP 一起运行。这是不真实的。Java/JSP 生成 HTML，而 JavaScript 是该 HTML 的一部分，并且仅适用于 HTML DOM 树。您需要确保您的 Java/JSP 代码生成的 HTML 代码准确包含 JavaScript 需要访问的信息。您可以让 Java/JSP 将这些变量打印为 HTML 元素的属性，就像`<option>`您的情况一样。您可以`data-*`在 HTML 中使用自定义属性来附加自定义属性。

```
<option value="${result.doc}" data-date="${result.date}" data-time="${result.time}"> 
```

可以通过`<option>`如下方式获取 JavaScript 中当前选中的元素

```
var option = select.options[select.selectedIndex];
var doc = option.value;
var date = option.getAttribute("data-date");
var time = option.getAttribute("data-time");
// ... 
```

您只需要更改`onchange`处理程序以传递 HTML`<select>`元素本身

```
onchange="onDocumentChange(this)" 
```

和

```
function onDocumentChange(select) {
    // ...
} 
```

顺便说一句，为什么要为日期和时间使用单独的属性而不是单个`java.util.Date`属性？模型设计有问题。

# sql - 如何在 500,000 多行表中不使用截断表时有效地删除行

> ID：11230225
> 
> 赞同：33
> 
> 时间：2012-06-27T15:48:23.740
> 
> 标签：sql, sql-server-2008, tsql, sql-delete, truncate

假设我们有30 列和 500,000 行的表*Sales 。*我想删除表中的 400,000（那些 where `"toDelete='1'"`）。

但我有一些限制：

*   该表是“经常”读/写的，我不希望长时间的“删除”花费很长时间并将表锁定太久
*   我需要跳过事务日志（例如使用 a `TRUNCATE`），但是在执行 a 时`"DELETE ... WHERE..."`（我需要设置一个条件），但还没有找到任何方法来做到这一点......

欢迎任何建议来改变

```
DELETE FROM Sales WHERE toDelete='1' 
```

到更分区且可能没有事务日志的东西。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-27T15:55:40.627

调用`DELETE FROM TableName`将在一个大事务中完成整个删除。这是昂贵的。

这是另一个将批量删除行的选项：

```
deleteMore:
DELETE TOP(10000) Sales WHERE toDelete='1'
IF @@ROWCOUNT != 0
    goto deleteMore 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2019-03-06T10:39:26.320

我将在这里留下我的答案，因为我能够测试批量删除和更新的不同方法（我必须更新然后删除 125+mio 行，服务器有 16GB 的 RAM，Xeon E5-2680 @2.7GHz，SQL Server 2012）。

**TL;DR**：始终按主键更新/删除，从不按任何其他条件。如果您不能直接使用 PK，请创建一个临时表并用 PK 值填充它，然后使用该表更新/删除您的表。为此使用索引。

我从[上面](https://stackoverflow.com/a/11230363/820604)的解决方案开始（@Kevin Aenmey），但这种方法被证明是不合适的，因为我的数据库是实时的，它每秒处理几百个事务并且涉及一些阻塞（所有的索引都有条件中的字段，使用`WITH(ROWLOCK)`没有改变任何东西）。

因此，我添加了一条[`WAITFOR`](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/waitfor-transact-sql?view=sql-server-2017)语句，允许数据库处理其他事务。

```
deleteMore:
WAITFOR DELAY '00:00:01'
DELETE TOP(1000) FROM MyTable WHERE Column1 = @Criteria1 AND Column2 = @Criteria2 AND Column3 = @Criteria3
IF @@ROWCOUNT != 0
    goto deleteMore 
```

这种方法能够处理约 1.6mio 行/小时的更新和约 0.2mio 行/小时的删除。

转向临时表改变了很多事情。

```
deleteMore:
SELECT TOP 10000 Id /* Id is the PK */
  INTO #Temp 
  FROM MyTable WHERE Column1 = @Criteria1 AND Column2 = @Criteria2 AND Column3 = @Criteria3 

DELETE MT
  FROM MyTable MT
  JOIN #Temp T ON T.Id = MT.Id 

/* you can use IN operator, it doesn't change anything
 DELETE FROM MyTable WHERE Id IN (SELECT Id FROM #Temp)

 */
IF @@ROWCOUNT > 0 BEGIN
    DROP TABLE #Temp
    WAITFOR DELAY '00:00:01'
    goto deleteMore
END ELSE BEGIN
    DROP TABLE #Temp
    PRINT 'This is the end, my friend'
END 
```

此解决方案处理约 25mio 行/小时的更新（快 15 倍）和约 2.2mio 行/小时的删除（快 11 倍）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-27T15:56:04.253

你想要的是批处理。

```
While (select Count(*) from sales where toDelete =1) >0
BEGIN
Delete from sales where SalesID in
(select top 1000 salesId from sales where toDelete = 1)
END 
```

当然，您可以试验哪个是批次的最佳值，我根据表格使用了 500 - 50000。如果您使用级联删除，您可能需要一个较小的数字，因为您需要删除这些子记录。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-27T15:52:32.310

过去我不得不这样做的一种方法是拥有一个删除*n*条记录的存储过程或脚本。重复直到完成。

```
DELETE TOP 1000 FROM Sales WHERE toDelete='1' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-27T15:53:50.153

您应该尝试给它一个`ROWLOCK`提示，这样它就不会锁定整个表。但是，如果删除很多行，就会发生锁升级。

此外，请确保您在列上有一个非聚集**过滤**索引（仅适用于 1 个值）`toDelete`。如果可能的话，让它成为一个位列，而不是 varchar（或现在的）。

```
DELETE FROM Sales WITH(ROWLOCK) WHERE toDelete='1' 
```

最终，您可以尝试遍历表并分块删除。

**更新**

由于 while 循环和块删除是这里的新粉红色，我也会加入我的版本（结合我之前的答案）：

```
SET ROWCOUNT 100
DELETE FROM Sales WITH(ROWLOCK) WHERE toDelete='1'

WHILE @@rowcount > 0
BEGIN
  SET ROWCOUNT 100
  DELETE FROM Sales WITH(ROWLOCK) WHERE toDelete='1'  
END 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-23T14:37:07.133

我自己对此功能的看法如下。这样就没有重复的代码，您可以管理您的块大小。

```
DECLARE @DeleteChunk INT = 10000
DECLARE @rowcount INT = 1

WHILE @rowcount > 0
BEGIN

  DELETE TOP (@DeleteChunk) FROM Sales WITH(ROWLOCK)

  SELECT @rowcount = @@RowCount
END 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-09T05:47:58.850

我已经使用以下内容删除了大约 5000 万条记录 -

```
BEGIN TRANSACTION     
     DeleteOperation:
     DELETE TOP (BatchSize)
     FROM  [database_name].[database_schema].[database_table] 

     IF @@ROWCOUNT > 0
     GOTO DeleteOperation
COMMIT TRANSACTION 
```

请注意，保持*BatchSize* < 5000 在资源上的成本更低。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-10T11:39:03.147

当我知道大约有多少次迭代时，我是这样做的：

```
delete from Activities with(rowlock) where Id in (select top 999 Id from Activities 
(nolock) where description like 'financial data update date%' and len(description) = 87 
and User_Id = 2);
waitfor delay '00:00:02'
GO 20 
```

编辑：这对我来说比选择顶部更好更快：

```
declare @counter int = 1
declare @msg varchar(max)
declare @batch int = 499

while ( @counter <= 37600)

begin
    set @msg = ('Iteration count = ' + convert(varchar,@counter))
    raiserror(@msg,0,1) with nowait
    delete Activities with (rowlock) where Id in (select Id from Activities (nolock) where description like 'financial data update date%' and len(description) = 87 and User_Id = 2 order by Id asc offset 1 ROWS fetch next @batch rows only)
    set @counter = @counter + 1
    waitfor delay '00:00:02'
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-30T08:29:04.577

我认为删除大量记录的最佳方法是将其删除`Primary Key`。（`Primary Key` [这里看到了](https://www.techonthenet.com/sql_server/primary_keys.php)什么）

因此，您必须生成包含要删除的整个行列表的 tsql 脚本，然后执行此脚本。

例如下面的代码将生成该文件

```
GO
SET NOCOUNT ON

SELECT   'DELETE FROM  DATA_ACTION WHERE ID = ' + CAST(ID AS VARCHAR(50)) + ';' + CHAR(13) + CHAR(10) + 'GO'
FROM    DATA_ACTION
WHERE  YEAR(AtTime) = 2014 
```

输出文件会有类似的记录

```
DELETE FROM  DATA_ACTION WHERE ID = 123;
GO
DELETE FROM  DATA_ACTION WHERE ID = 124;
GO
DELETE FROM  DATA_ACTION WHERE ID = 125;
GO 
```

现在您必须使用`SQLCMD`实用程序才能执行此脚本。

```
sqlcmd -S [Instance Name] -E -d [Database] -i [Script] 
```

您可以在这里找到解释的这种方法[https://www.mssqltips.com/sqlservertip/3566/deleting-historical-data-from-a-large-highly-concurrent-sql-server-database-table/](https://www.mssqltips.com/sqlservertip/3566/deleting-historical-data-from-a-large-highly-concurrent-sql-server-database-table/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-09-13T15:26:34.750

```
Declare @counter INT  
Set @counter = 10 -- (you can always obtain the number of rows to be deleted and set the counter to that value)  
While @Counter > 0  
Begin  
Delete TOP (4000) from <Tablename> where ID in (Select ID from <sametablename> with (NOLOCK) where DateField < '2021-01-04') -- or opt for GetDate() -1  
Set @Counter = @Counter -1 -- or set @counter = @counter - 4000 if you know number of rows to be deleted.  
End 
```

# javascript - 有条件地将选项传递给 jquery 函数

> ID：11230229
> 
> 赞同：2
> 
> 时间：2012-06-27T15:48:39.250
> 
> 标签：javascript, jquery

```
$.fn.demo = function(options) {
    var defaults = {
        opacity: 50,
        width: '250px',
        height: '100px',
        color: 'red'
    }
  } 
```

**有没有办法有条件地将选项传递给函数，例如：**

```
$().demo({
opacity: 60,
if (div.length){
    width: '350px'
}
height: '100px'
}); 
```

只是好奇什么是处理您可能希望根据情况传递不同选项的情况的最佳方法。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T15:50:24.723

如果它足够简单，你可以使用[三元运算](http://en.wikipedia.org/wiki/Ternary_operation)

```
$().demo({
    opacity: 60,
    width: div.length ? '350px' : '250px',
    height: '100px'
}); 
```

如果它更复杂，您应该只在函数调用之外编写参数对象。

```
var parameters = {
    opacity: 60,
    height: '100px'
};
if(div.length)
    parameters.width = '350px';
$().demo(parameters); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T15:50:40.130

```
$.fn.demo = function(options) {
    var defaults = {
        opacity: 50,
        width: '250px',
        height: '100px',
        color: 'red'
    };
    options || (options = {});
    defaults = $.extend(defaults, options);
    ... function body...
} 
```

当您使用扩展时，它会覆盖默认值并添加任意数据（如果存在）。

# css - CSS级联示例

> ID：11230237
> 
> 赞同：0
> 
> 时间：2012-06-27T15:49:08.133
> 
> 标签：css, css-cascade

请有人举一个例子来描述 CSS 中的级联，它们什么时候有用？我已经看到描述[级联的答案以及](https://stackoverflow.com/questions/1043001/what-is-the-meaning-of-cascading-in-css?rq=1)[级联和继承](https://stackoverflow.com/questions/2406884/in-css-what-is-the-difference-between-cascading-and-inheritance)之间的区别，但我没有看到任何*通过示例描述 CSS 级联的答案。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:59:29.217

当只考虑“作者”样式表（不是用户或用户代理）时，您可能感到困惑的不是“级联”，而是 CSS 的“特异性”规则。

以下是关于特异性如何工作以及如何弄清楚为什么将某些规则应用于您的元素的一些很好的解释：

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

[http://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

编辑：级联：收集元素的所有适用规则，然后根据其来源排序（数字越大意味着优先级越高）：

1.  用户代理声明
2.  用户正常声明
3.  作者正常声明
4.  编写重要声明
5.  用户重要声明

如果起源相同，则特异性用作决胜局。最后，如果特异性相同，则声明顺序是最后的决胜局。希望没有繁琐的例子就可以理解...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T15:15:05.693

**关于继承与级联：**

“继承是一种与级联分离的机制：继承适用于 DOM（文档对象模型）树，而级联处理样式表规则。但是，通过级联在元素上设置的 CSS 属性可以由该元素的子元素。” - [http://reference.sitepoint.com/css/inheritance](http://reference.sitepoint.com/css/inheritance)

# javascript - jquery按钮在新选项卡和新窗口中关闭

> ID：11230238
> 
> 赞同：-2
> 
> 时间：2012-06-27T15:49:08.193
> 
> 标签：javascript, jquery, hyperlink, external

我怎样才能做到这一点，当一个人点击第一个按钮时，它会在一个新窗口中打开，我怎样才能做到这一点，以便当用户点击第二个按钮时，它会在同一个选项卡或窗口中打开。我想用 jquery 来实现这一点，据说我不想编写任何内联 javascript，否则如果是这种情况，我不会发布问题我知道如何使用内联 javascript 来实现这一点，但我想使用外部js文件和jquery。

在新窗口中打开

```
 <button class="button cf-button preview-bt" role="button" type="button" href="#">
                        <span class="button-content"> Preview </span>
                <span class="button-icon"> </span>
    </button> 
```

在同一窗口中打开

在新窗口中打开

```
 <button class="button cf-button preview-bt" role="button" type="button" href="#">
                        <span class="button-content"> Preview </span>
                <span class="button-icon"> </span>
    </button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:16:15.840

在新窗口或标签中打开：

```
$(".button").click(function(event) {
    event.preventDefault();
    event.stopPropagation();
    window.open(this.href, '_blank');
}); 
```

在新的弹出窗口中打开：

```
$(".button").click(function(event) {
    event.preventDefault();
    event.stopPropagation();
    window.open(this.href, '', 'width=100%', 'height=100%');
}); 
```

在同一窗口中打开：

```
$(".button").click(function(event) {
    event.preventDefault();
    event.stopPropagation();
    window.location=this.href;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:51:06.290

你不需要为此使用 jQuery。相反，您可以在`<head>`标签中使用以下内容：

```
<base target="newWindow" /> 
```

## jQuery 替代

```
$(".button").click(function(event) {
    event.preventDefault();
    event.stopPropagation();
    window.open($(this).attr('href'), 'newWindow');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:53:40.353

```
​$( '#link' ).click( function( event ) {
    window.open( this.href, '_blank' );
    event.preventDefault();
});​​​​​ 
```

[http://jsfiddle.net/mobweb/LPcMp/](http://jsfiddle.net/mobweb/LPcMp/)

# iphone - 转换前视图未完全加载？

> ID：11230239
> 
> 赞同：2
> 
> 时间：2012-06-27T15:49:22.383
> 
> 标签：iphone, objective-c, ios, modalviewcontroller, segue

我有一个模态视图控制器和一个主视图控制器。当我打开模态视图控制器时，一切正常。但是当我按下后退按钮时，主视图控制器没有加载，并在转换完成后立即加载。无论如何我可以解决这个问题吗？我会使用prepareforsegue吗？一个正确方向的点将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:58:01.817

如果您使用的是 presentModalViewController （或等效的情节提要），您所要做的就是调用模态视图控制器`[self dismissModalViewControllerAnimated:YES]`。主视图控制器不会从内存中删除，因此不需要设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:55:30.703

尝试在您的 viewWillApear: 中做所有事情：因为当 modelViewController 被关闭时 viewWillApear: 将只调用并加载加载功能：

# c# - asp.net http 处理程序和 http 模块是否可以在不使用 IIS 的情况下工作？

> ID：11230260
> 
> 赞同：0
> 
> 时间：2012-06-27T15:50:20.040
> 
> 标签：c#, asp.net

如果我将我的 ASP.NET 网站与 IIS 一起使用，我是否只能使用 HTTP 处理程序或 HTTP 模块？

除此之外，http处理程序和http模块之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:55:00.320

这篇文章应该解释区别：http: [//msdn.microsoft.com/en-us/library/bb398986.aspx](http://msdn.microsoft.com/en-us/library/bb398986.aspx)

至于是否在 IIS 中使用它们 - 如果您正在运行内置的 Visual Studio Webserver，您可以运行 Http 处理程序。我相信模块需要一个网络服务器来进行映射，但我需要更正。

# httpclient - Tapestry，来自另一个应用程序的请求处理

> ID：11230261
> 
> 赞同：0
> 
> 时间：2012-06-27T15:50:23.967
> 
> 标签：httpclient, tapestry

我有两个网络应用程序，挂毯应用程序和一个简单的网络应用程序（servelt）。在tapestry appli 中，我有一个表单，当它被发送时，我调用一个httpClient 来使用apache 的httpClient 向作者appli 发送一些信息。像这样

```
 void onSubmitFromForm() {

    try {

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://localhost:8080/appli2/recep");
        post.setHeader("referer", "http://localhost:9090/app1/start");

        List<NameValuePair> param = new ArrayList<NameValuePair>();

        param.add(new BasicNameValuePair("_data", getData());

        post.setEntity(new UrlEncodedFormEntity(param));

        HttpResponse response = client.execute(post);
                    response ?????
            } catch (Exception e) {

        e.printStackTrace();

    }

} 
```

在我的简单网络应用程序（2）的服务器接收中，我做同样的事情，如下所示

```
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    try {
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(request.getHeader("referer"));

        post.setHeader("p",getP());

        client.execute(post);

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

所以，我从我的表单中接收 reviev 数据，但它无法响应它，我希望 Tapersty 应用程序可以从简单的 Web 应用程序接收参数“P”吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:27:45.470

如果我是正确的，您希望您的 Tapestry 应用程序将从 Tapestry 中的表单提交接收到的一些表单数据发布到在另一个应用程序上运行的 servlet。

如果这是您想要的，那么缺少的是请求的处理和在您的 servlet 中构建响应。因为您的挂毯页面和您的 servlet 都在 POST 中，这意味着它们都不会为您的 HttpClient 构建响应来处理。

在您的 servlet 中，您可以：

```
public void doPost(HttpServletRequest request, 
     HttpServletResponse response)
        throws ServletException, IOException
  {
    response.setContentType("text/plain");
    PrintWriter out = response.getWriter();

    out.println(getP());
    out.close();
  } 
```

并在您的挂毯表单处理程序中处理响应。

# python - 如何使用 python webkit 仅显示特定的 div

> ID：11230263
> 
> 赞同：0
> 
> 时间：2012-06-27T15:50:27.443
> 
> 标签：python, webkit, gtk

我有：

```
self.webview = WebKit.WebView()
self.scrolledwindow = self.builder.get_object("scrolledwindow")
self.scrolledwindow.add(self.webview)
self.webview.open(ADVSEARCHURI)
self.webview.show() 
```

它正在显示整个网站，但我只想显示特定 div 的内容并隐藏其余部分。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:48:10.923

使用`execute_script`您可以将 javascript 注入 webview。因此，只需像往常一样显示或隐藏 div：

```
js_code = "document.getElementById('foo').style.display = 'None';"
self.webview.execute_script(js_code) 
```

# mysql - Doctrine2 中的 SQL 查询

> ID：11230266
> 
> 赞同：1
> 
> 时间：2012-06-27T15:50:37.330
> 
> 标签：mysql, sql, doctrine-orm

我真的需要帮助，有人知道如何`SQL`使用 createQueryBuilder 将此查询转换为 Doctrine2 查询吗？

`SELECT a.resposta,
(
SELECT count(r.id)
FROM car_resultado r2
LEFT JOIN car_resultado_inquerito ri2 ON r2.id_resultado_inquerito = ri2.id
WHERE ri2.id_inquerito = 20 AND r2.id_resposta = a.id
GROUP BY r2.id_pergunta, r2.id_resposta
) as total
FROM car_resposta a
LEFT JOIN car_resultado r ON ( r.id_resposta = a.id )
GROUP BY a.id, r.id_resposta` 

我不知道该怎么做，主要是因为嵌套`SELECT`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:32:46.497

通常，您必须创建实体和存储库才能从数据库中获取数据。但在 Doctrine2 中是一种不酷的方式。您可以执行本机 SQL。

[Doctrine2 原生 SQL](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)

如果可能的话，您不应该这样做并使用这些类，但如果您有一个复杂的现有查询，您可以这样做。

# javascript - javascript中的组合框上的鼠标悬停不起作用

> ID：11230267
> 
> 赞同：0
> 
> 时间：2012-06-27T15:50:38.177
> 
> 标签：javascript, combobox, mouseover

我在 html 中有静态组合框，已经选择了一些默认值，我们可以从下拉列表中选择其他值。我想调用 javascript 函数 onMouseOver。但它不起作用。我们可以将事件与组合框相关联吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:56:21.857

这是HTML：

```
<select id="sel">
    <option>foo</option>
<select> 
```

和 JS：

```
document.getElementById('sel').onmouseover = function() {
    alert('bar')
} 
```

工作正常。你可以在这里看到它 - [http://jsfiddle.net/TSzUK/](http://jsfiddle.net/TSzUK/)

# ios - 如何在 iOS MFMailComposeViewController 中预选邮件账户？

> ID：11230273
> 
> 赞同：0
> 
> 时间：2012-06-27T15:50:54.583
> 
> 标签：ios, ipad

我知道 iOS 中没有方法可以在 MFMailComposeViewController [http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/中设置 From: 地址标头occ/cl/MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/occ/cl/MFMailComposeViewController)。

但是，我不敢相信自 iOS 版本 3 以来这是不可能的。

iOS中是否有任何官方方法可以使用特定邮件帐户配置MailComposer？

该应用程序的业务要求是： 根据某些收件人属性，使用发件人（或回复）地址发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:57:31.023

默认邮件帐户是在 iOS 设置中预先确定的。您无法以编程方式选择要从中发送邮件的邮件帐户。

# jquery - 列出 Jquery 访问

> ID：11230274
> 
> 赞同：0
> 
> 时间：2012-06-27T15:51:03.227
> 
> 标签：jquery

我正在创建一个菜单并且在访问元素以隐藏菜单时遇到问题。因此，如果您能帮助我，我将不胜感激。

```
<ul id="secondary-nav">
<li class="expandable expanded">
<p style="display: none;">
<ul style="display: block;">
<li class="expandable expanded">
<p>
<a href="http://www.example.com">Link text 1.1</a>
</p>
<ul style="display: block;">
<li>
<li class="current">
<li>
<li>
<li>
</ul>
</li>
<li class="expandable">
<li class="expandable">
<li class="expandable">
<li class="expandable">
</ul>
</li> 
```

我如何访问具有样式标记的 ul 元素并将样式显示更改为“无”。因为这就像无序列表中的无序列表。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:57:24.640

```
$('ul').filter(function() {
    return $(this).css('display') == 'block'; // or this.style.display == 'block'
}).hide(); 
```

**[演示](http://jsfiddle.net/QStkd/513/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:56:34.263

试试这个：

```
$("*:block").css("display", "none"); 
```

# jquery - JQuery - 使用 JQuery 格式化时出现问题

> ID：11230279
> 
> 赞同：2
> 
> 时间：2012-06-27T15:51:22.140
> 
> 标签：jquery

我正在学习 JQ 并且我创建了一个 div，当悬停在打开时，当光标离开时打开的 div 关闭。

这一切都很完美，但这是我的问题......

当光标快速越过 div 时，div 会非常快速地打开和关闭几次。

任何建议将不胜感激。

安迪

```
script type="text/javascript"
$(document).ready(function(){ 
$(".tagShow").hover(function(){  
    $(".panel").show("fast");  
},function(){
    $(".panel").hide("fast");        
});

});

</script>
<div class="tagShow">
<div class="panel">
<?= $tagCloud ?>
   </div>

<p class="flip">Select Category 
<span class="sCategory"></span></p>
</div> 
```

CSS：

```
 div.panel,p.flip
 {
  margin:0px;
  padding:5px;
  text-align:center;
  background-color: #edf7f9;
  border:1px solid #24b4e0;
  position: absolute;
  z-index: 2;

   }

  div.panel
   {
    padding: 50px;
    height:140px;
    display:none;
    width: 778px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:53:07.290

这个问题有很多重复。解决方案是使用[`stop()`](http://api.jquery.com/stop/).

尝试`stop(1, 1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:54:25.623

您还可以使用选择器在显示和隐藏之前检查元素是否没有动画`:animated`。

还可以查看[hoverIntent](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFgQFjAA&url=http://cherne.net/brian/resources/jquery.hoverIntent.html&ei=oSzrT_ygL9GZiAeaqNXhBQ&usg=AFQjCNEID3O1NTtGoOWSwek7fDjVfcP1FQ) jQuery 插件。

# php - 如何将文件的内容分配给PHP中的变量

> ID：11230280
> 
> 赞同：13
> 
> 时间：2012-06-27T15:51:23.393
> 
> 标签：php, include

我有一个包含 HTML 标记的文档文件。我想将整个文件的内容分配给 PHP 变量。

我有这行代码：

`$body = include('email_template.php');`

当我做一个`var_dump()`我得到`string(1) "'"`

是否可以将文件的内容分配给变量？

[注意：这样做的原因是我想将邮件消息的正文部分与邮件脚本分开——有点像模板，因此用户只需修改 HTML 标记而无需关心我的邮件脚本。所以我将文件作为整个身体段包括在内`mail($to, $subject, $body, $headers, $return_path);`

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T15:58:14.347

如果有需要执行的 PHP 代码，你确实需要使用`include`. 但是，`include`不会返回文件的输出；它将被发送到浏览器。您需要使用称为输出缓冲的 PHP 功能：它捕获脚本发送的所有输出。然后，您可以访问和使用这些数据：

```
ob_start();                      // start capturing output
include('email_template.php');   // execute the file
$content = ob_get_contents();    // get the contents from the buffer
ob_end_clean();                  // stop buffering and discard contents 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-27T15:52:54.283

你应该使用[`file_get_contents()`](http://php.net/file_get_contents)：

```
$body1 = file_get_contents('email_template.php'); 
```

[`include`](http://php.net/include)包含并在您的当前文件中执行，并存储to`email_template.php`的返回值。`include()``$body1`

如果需要在 of 文件中执行 PHP 代码，可以使用[输出控制](http://php.net/manual/en/intro.outcontrol.php)：

```
ob_start();
include 'email_template.php';
$body1 = ob_get_clean(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T15:53:13.363

[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)

```
$file = file_get_contents('email_template.php'); 
```

或者，如果你*疯*了：

```
ob_start();
include('email_template.php');
$file = ob_end_flush(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T15:57:25.550

正如其他人发布的那样，`file_get_contents`如果不需要以任何方式执行该文件，请使用。

或者，您可以让您的 include 使用 return 语句返回输出。

如果您的 include 使用 echo [ed: 或离开 PHP 解析模式] 语句进行处理和输出，您还可以缓冲输出。

```
ob_start();
include('email_template.php');
$body1 = ob_get_clean(); 
```

TimCooper 打败了我。:P

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:53:08.207

尝试使用 PHP 的`file_get_contents()`函数。

在此处查看更多信息：http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-03T18:00:52.573

是的，你可以很容易。

在要使用变量的文件中放置这个

```
require_once ‘/myfile.php';
if(isset($responseBody)) {
    echo $responseBody;
    unset($responseBody);
} 
```

在您正在调用的文件中 /myfile.php 放置这个

```
$responseBody = 'Hello world, I am a genius'; 
```

谢谢丹尼尔

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T21:30:32.297

你有两个可选的选择

[选项1]

1.  创建一个名为`'email_template.php'`
2.  在文件中添加一个像这样的变量

    `$body = '<html>email content here</html>';`

3.  在另一个文件中`require_once 'email_template.php'`

4.  然后`echo $body;`

[选项 2]

```
$body = require_once 'email_template.php'; 
```

# objective-c - 子类化 NSFontManager 不起作用

> ID：11230292
> 
> 赞同：2
> 
> 时间：2012-06-27T15:52:10.250
> 
> 标签：objective-c, subclass, nsfontmanager

我继承了 NSFontManager 并覆盖了“modifyFont:(id)sender) 然后我将我的 xib 文件中的 NSFontManager 类更改为新类。我可以看到，该类已初始化，但从未调用过覆盖的方法。虽然 NSFontManager 方法工作正常。

我错了什么？

```
#import "GFFontManager.h"

@implementation GFFontManager

-(id)init{
    if (self = [super init]) {
        //this is called
        NSLog(@"GFFontManager init");
    }
    return self;
}

-(void)modifyFont:(id)sender{
    //this is never called
    NSLog(@"Do something");
    [super modifyFont:sender];
} 
```

@结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:06:19.737

好的 - 这是它的工作原理：

我在 main.c 中添加了以下内容，它就像一个魅力！

```
#import <Cocoa/Cocoa.h>
#import "GFFontManager.h"

int main(int argc, char *argv[])
{
    [NSFontManager setFontManagerFactory: [GFFontManager class]];
    return NSApplicationMain(argc,  (const char **) argv);
} 
```

最好的问候 - 杰拉德

# css - jquery mobile 阵容控制在一行

> ID：11230293
> 
> 赞同：6
> 
> 时间：2012-06-27T15:52:12.610
> 
> 标签：css, jquery-mobile

如何在 jquery 的一行中排列表单控件，如选择框和其他控件，而不是让它们垂直显示？

```
<label for="select-choice-0" class="select">Shipping method:</label>
<select name="select-choice-0" id="select-choice-1">
   <option value="standard">Standard: 7 day</option>
   <option value="rush">Rush: 3 days</option>
   <option value="express">Express: next day</option>
   <option value="overnight">Overnight</option>
</select>
<label for="select-choice-2" class="select">Shipping method:</label>
<select name="select-choice-2" id="select-choice-2">
   <option value="standard">Standard: 7 day</option>
   <option value="rush">Rush: 3 days</option>
   <option value="express">Express: next day</option>
   <option value="overnight">Overnight</option>
</select> 
```

我不希望它们与 data-type="horizo​​ntal" 在同一个字段集中。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:16:27.143

网格布局对您有用吗？这是一个例子：

*   [http://jsfiddle.net/RM5eq/](http://jsfiddle.net/RM5eq/)

HTML

```
<div data-role="page" class="type-home">
    <div data-role="content">

        <div class="ui-grid-a">
            <div class="ui-block-a">
                <select name="select-choice-0" id="select-choice-1">
                   <option>Shipping method</option>
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>
            <div class="ui-block-b">
                <select name="select-choice-2" id="select-choice-2">
                   <option>Shipping method</option>
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>       
        </div>

    </div>
</div>​ 
```

网格布局选项的文档

*   [http://jquerymobile.com/demos/1.1.0/docs/content/content-grids.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-grids.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T20:20:58.917

我喜欢[jquery-mobile-960](http://jeromeetienne.github.com/jquery-mobile-960/)。

*jquery-mobile-960 是 960 网格到 jquery mobile 的端口。它融合了 960.gs 的灵活性和 jquery mobile 的易用性。它旨在为 jquery-mobile 布局带来更大的灵活性，从而使其更易于在平板电脑上使用。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T13:36:46.517

使用 CSS 和 data-inline="true" 标记的替代示例

*   [http://jsfiddle.net/CFXxt/](http://jsfiddle.net/CFXxt/)

CSS

```
#inline-select-container {
    overflow:auto;
}
#inline-select-left {
    float:left;
}

#inline-select-right {
     float:right;
}
​ 
```

HTML

```
<div data-role="page" class="type-home">
    <div data-role="content">

        <div id="inline-select-container">

            <div id="inline-select-left">    
                <select name="select-choice-0" id="select-choice-1" data-inline="true">
                   <option >Shipping method</option>
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>

            <div id="inline-select-right">
                <select name="select-choice-2" id="select-choice-2" data-inline="true">
                   <option >Shipping method</option>
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>       

        </div>  

        <br />
        <br />

        <div id="inline-select-container">

            <div id="inline-select-left">    
                <label for="select-choice-0" class="select">Shipping method:</label>
                <select name="select-choice-0" id="select-choice-1" data-inline="true">
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>

            <div id="inline-select-right">
                <label for="select-choice-2" class="select">Shipping method:</label>
                <select name="select-choice-2" id="select-choice-2" data-inline="true">
                   <option value="standard">Standard: 7 day</option>
                   <option value="rush">Rush: 3 days</option>
                   <option value="express">Express: next day</option>
                   <option value="overnight">Overnight</option>
                </select>
            </div>       

        </div>          
    </div>
</div>​ 
```

# python - 导入一个导入主模块的模块

> ID：11230300
> 
> 赞同：0
> 
> 时间：2012-06-27T15:52:51.627
> 
> 标签：python, import, module, circular-dependency

我正在做一个文本冒险，将关卡存储为一个名为“地点”的大型字典。与其将它放在主文件中，我想我会创建一个名为“levels.py”的单独文件来包含它，从而使我的代码更清晰，并且无需通过 450 多行其他代码来添加它.

所以，主要的游戏文件：

```
from levels import places

class Thing:
    #Some stuff 
```

水平.py：

```
from game import *
places = {
    "bleh" : Thing("bleh"),
} 
```

然而，似乎游戏中没有定义“地点”。

我认为正在发生的事情是有一个导入“循环”。但是，如果levels.py 需要从game.py 导入类，我怎么能防止这样的事情呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:58:52.583

总是可以通过*重构*来消除循环依赖。移动`Thing`到`thing.py`，然后`game.py`在`levels.py`使用中`from thing import Thing`。冲洗并重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:57:54.173

您可以更改`levels`为具有一个初始化程序或工厂方法，该方法采用由`game`.

例如：

```
# levels.py
# no import needed here; we'll just take an instance when required
def get_places(thing):
    return {"bleh": thing("bleh")} 
```

```
# game.py

import levels

class Thing:
    def __init__(self):
        self.places = levels.get_places(self) 
```

**编辑：**

更好的方法是将两个类需要的数据移动到另一个类中，这样它们都可以轻松访问或导入。例如，就像一个游戏状态对象，它在具有功能的类之间传递。

# ruby-on-rails - Rails 部分不使用 JavaScript 渲染

> ID：11230301
> 
> 赞同：0
> 
> 时间：2012-06-27T15:52:53.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3, highcharts, activeadmin, partial

我正在尝试在我的应用程序中渲染部分内容，但由于某种原因它不会渲染。我认为这与我的资产管道以及我没有正确实现我想要在我的部分中使用的 JavaScript 的事实有关。带有简单句子的测试部分工作得很好。有人可以指导我在我的应用程序中正确使用 JavaScript 吗？

这是我想要展示的 jsFiddle：http: [//jsfiddle.net/yZQg4/](http://jsfiddle.net/yZQg4/)

有问题的部分：

```
<%= javascript_include_tag "highcharts", "exporting", "jquery-1.4.2.min", "rails" %>

<script type="text/javascript" charset="utf-8">
  $(function() {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'panel_contents',
                type: 'column'
            },

            xAxis: {
                categories: ['Automotive', 'Agency', 'Contractor', 'Country Club', 'Other']
            },
            yAxis: {
                min: 0,

                title: {
                    text: 'Business Summary'
                },
                stackLabels: {
                    enabled: true,
                    style: {
                        fontWeight: 'bold',
                        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                    }
                }
            },
            legend: {
                align: 'right',
                x: 100,
                verticalAlign: 'top',
                y: 0,
                floating: true,
                backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
                borderColor: '#CCC',
                borderWidth: 1,
                shadow: false
            },
            tooltip: {
                formatter: function() {
                    return '<b>' + this.x + '</b><br/>' + this.series.name + ': ' + this.y + '<br/>' + 'Total: ' + this.point.stackTotal;
                }
            },
            plotOptions: {
                column: {
                    stacking: 'normal',
                    dataLabels: {
                        enabled: true,
                        color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                    }
                }
            },
            series: [{
                name: 'Mobile',
                data: [5, 3, 4, 27, 2]},
            {
                name: 'Foursquare',
                data: [2, 2, 3, 2, 1]},
            {
                name: 'Facebook',
                data: [3, 4, 4, 2, 5]},
            {
                name: 'Yelp',
                data: [3, 4, 4, 2, 5]},
            {
                name: 'Google',
                data: [3, 4, 4, 2, 5]}]
        });
    });

});​​
</script> 
```

工作测试部分：

```
<h1> hello world </h1> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:46:02.620

我刚刚在 TextEdit 中重新创建了该文件，它工作正常。出于某种原因，TextMate 偷偷地将它添加到文件中：`&#8203;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:09:02.383

在javascript代码之前添加：

```
<div id="panel_contents"></div> 
```

PS 此外，最好将 javascript 包含移出部分或使用[content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

# windows - 事件循环中的模式是什么？

> ID：11230305
> 
> 赞同：0
> 
> 时间：2012-06-27T15:52:59.300
> 
> 标签：windows, winapi

在下面的代码中

```
 Draw();

    while (WM_QUIT != msg.message)
    {
              msg = PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE);
              if (msg)
              {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
              }
          Draw();
    } 
```

为什么在事件循环内部和外部调用draw？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:12:12.460

看起来它在启动消息泵之前被调用来进行初始绘制。如果没有消息，它将绘制一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:40:39.893

这是一个典型的*游戏循环*。它不断地绘制帧，PeekMessage() 调用确保 Windows 消息正常发送，通常是鼠标和键盘输入以使游戏具有交互性。

# algorithm - 是否可以向 BST 中插入复杂度低于 O(n) 最坏情况的元素？

> ID：11230309
> 
> 赞同：0
> 
> 时间：2012-06-27T15:53:03.320
> 
> 标签：algorithm, tree, binary-tree, binary-search-tree

给定以下用于将元素插入 BST 的算法：

```
 void InsertNode(Node* &treeNode, Node *newNode)
 {
     if (treeNode == NULL)
       treeNode = newNode;
     else if (newNode->key < treeNode->key)
       InsertNode(treeNode->left, newNode);
     else
       InsertNode(treeNode->right, newNode);
 } 
```

该算法在`O(n)`最坏的情况下运行。

`O(n)`在最坏的情况下，是否可以使用复杂度较低的算法将元素插入 BST ？

**备注 1**：这不是作业（准备即将到来的考试）

**备注2**：不使用`AVL`树

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T15:55:49.977

插入相当于一个搜索操作。显然，如果您的树不平衡，最坏的情况将始终是链表形式的树。所以没有办法避免O(n)。

# regex - 正则表达式电子邮件验证不允许域中的逗号

> ID：11230312
> 
> 赞同：0
> 
> 时间：2012-06-27T15:53:07.890
> 
> 标签：regex, email-validation

我正在使用以下表达式来验证电子邮件：

```
^[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+(?:[a-zA-Z]{2}|com|COM|CoM|cOM|coM|COm|edu|org|net|gov|biz|info|name|aero|biz|info|jobs|museum)\b 
```

但是，它仍然允许我输入无效的电子邮件，如下所示...

```
mynameis@domain.co,uk 
```

我不想在 co 和 uk 之间使用逗号。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:02:54.817

如果您不想在任何地方使用逗号，则可以尝试向前看。 `^(.(?!,))*$` 这样，如果您在任何地方都有逗号，它将不再匹配。当然，你需要把它放在你现有的表达式中，没有开始和结束锚点。我推荐[Regexpal](http://Regexpal.com)来测试这样的正则表达式。

此外，您可能希望从您的电子邮件地址中排除双句点。我用：

`^(?!.*\.{2})[ ]*[\w]+[\w\.]*[\w]*@[\w]+\.[a-zA-Z]+[ ]*`满足我的需要。

现在`\w`允许`[A-Za-z0-9_]`由于下划线而奇怪，但我很确定电子邮件地址*中允许使用下划线。*这也可以防止您的电子邮件地址中出现双句点，并且不允许第一个或最后一个字符是句点，这是非法的。

# css - 这种将我的标题内容向右推的幻象是什么？

> ID：11230315
> 
> 赞同：0
> 
> 时间：2012-06-27T15:53:10.800
> 
> 标签：css, html, twitter-bootstrap

[http://jsfiddle.net/nWqYL/2/embedded/result/](http://jsfiddle.net/nWqYL/2/embedded/result/)

我一直在努力解决这个原型网站的一些问题。我和我们的网页设计师花了无数个小时试图弄清楚为什么标题中的内容被推到了右边（在这种情况下，它的标志，但也发生在文本中）

我认为这可能与 Twitter Bootstrap 的专栏有关。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:11:17.453

会是定位吗？

您是否尝试过：

```
#headerright {
    float: right;
    position: relative;
    right: -22px;
} 
```

[jsfiddle](http://jsfiddle.net/Sherbrow/nWqYL/4/)（[全尺寸](http://fiddle.jshell.net/Sherbrow/nWqYL/4/show/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:18:55.003

:`<div class="headerleft">`最终成为罪魁祸首。我不得不更多地弄乱它的定位。

# ruby-on-rails - Heroku 模板错误 - 在错误的目录中寻找部分

> ID：11230323
> 
> 赞同：5
> 
> 时间：2012-06-27T15:53:29.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

所以我正在学习 Rails 并阅读 Michael Hartl 的教程。

当我部署到 Heroku 时，我收到了臭名昭著的“我们很抱歉，但出了点问题”。

该应用程序在本地开发服务器上运行良好。

Heroku 日志说：

```
2012-06-27T15:31:47+00:00 app[web.1]: Completed 500 Internal Server Error in 112ms
2012-06-27T15:31:47+00:00 app[web.1]: 
2012-06-27T15:31:47+00:00 app[web.1]:   * "/app/app/views"
2012-06-27T15:31:47+00:00 app[web.1]: ActionView::Template::Error (Missing partial layouts/header with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder]}. Searched in:
2012-06-27T15:31:47+00:00 app[web.1]: ):
2012-06-27T15:31:47+00:00 app[web.1]:     11: </head>
2012-06-27T15:31:47+00:00 app[web.1]:     12: <body>
2012-06-27T15:31:47+00:00 app[web.1]:     13: 
2012-06-27T15:31:47+00:00 app[web.1]:     14: <%= render 'layouts/header' %>
2012-06-27T15:31:47+00:00 app[web.1]:     15: 
2012-06-27T15:31:47+00:00 app[web.1]:     16:     <div class="container">
2012-06-27T15:31:47+00:00 app[web.1]:   app/views/layouts/application.html.erb:14:in `_app_views_layouts_application_html_erb__112987114114249875_31386580'
2012-06-27T15:31:47+00:00 app[web.1]:     17:       <% flash.each do |key, value| %> 
```

如果我没看错，它正在寻找`/app/app/views`部分标题。这是错误的 - 它应该在`/app/views`.

在我的开发机器上，一个文件`_header.html.erb`位于`app/views/layouts`.

那么 Heroku 为什么要添加额外的`app`目录呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T03:47:11.297

当我意识到我的错误时，我遇到了同样的问题：我做了`git commit -am "commit_message"`，在它之前省略`git add .`了导致新文件被排除在提交之外。

根据`git help commit`：

> -a，--全部
> 
> 告诉命令自动暂存已修改和删除的文件，但您未告知`git`的新文件不受影响。

添加未跟踪的文件后，新的提交和`git push heroku master`它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:28:01.083

我刚刚遇到这个错误，这是因为部分文件是`haml`，但我的 Gemfile仅`haml`在`development`组中。

我转换为 Slim，我将其用于应用程序的所有其余部分，仅此而已。

所以基本上，服务器找不到该文件，因为它有一个不受支持的扩展名（在开发环境中以某种方式可用）。

# c# - Linq：将数据选择到多个列表中

> ID：11230324
> 
> 赞同：2
> 
> 时间：2012-06-27T15:53:30.197
> 
> 标签：c#, linq, entity-framework, linq-to-sql

如何将查询结果选择到多个列表中？例如，

```
class Person 
{
   public string FirstName {get;set;}
   public string LastName {get;set;}
}

void test()
{
   var query =
     from i in Persons
     select i;

   // now i want to select two lists - list of first names, and list of last names

   // approach 1 - run query twice?
   List<string> f = query.Select( i=>i.FirstName).ToList();
   List<string> l = query.Select( i=>i.LastName).ToList();

   // approach 2 - turn it into a list first, and break it up
   List<Person> p = query.ToList();
   List<string> f = p.Select( i=>i.FirstName).ToList();
   List<string> l = p.Select( i=>i.LastName).ToList();
} 
```

方法 1 的问题是我需要运行两次查询。方法 2 的问题是我使用了两倍的内存。当数据集很大时，它可能会成为一个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:56:46.557

> 方法 1 的问题是我需要运行两次查询。方法 2 的问题是我使用了两倍的内存。当数据集很大时，它可能会成为一个问题。

这些权衡中的任何一个都可能足够，但这取决于结果数据集和用例。

但是，如果您想完全避免这种权衡，您可以。解决这个问题的方法是不使用 Linq：

```
var firstNames = new List<string>();
var lastNames = new List<string>(); 
foreach(var person in query)
{
   firstNames.Add(person.FirstName);
   lastNames.Add(person.LastName);
} 
```

这避免了两次查询以及项目的“副本”，因为您只枚举查询结果一次，并且不存储任何额外信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:30:14.463

> 方法 2 的问题是我使用了两倍的内存。

错误的。测量它。字符串实例被重用。

# asp.net-mvc-3 - razor：创建 pinterest 字符串

> ID：11230327
> 
> 赞同：3
> 
> 时间：2012-06-27T15:53:40.267
> 
> 标签：asp.net-mvc-3, razor

我正在尝试创建一个 pinterest pin it 按钮。下面是代码：

```
<a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.domain.name%2Fproduct%2F@Model.ProductDetails.URLName&media=http%3A%2F%2Fwww.domain.name%2Fproduct%2F@Model.ProductDetails.Image&description=@Model.ProductDetails.ProductDescription" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>
       <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

如您所见，存在三个变量：

```
url : http%3A%2F%2Fwww.domain.name%2Fproduct%2F@Model.ProductDetails.URLName

media: http%3A%2F%2Fwww.domain.name%2Fproduct%2F@Model.ProductDetails.Image

description: @Model.ProductDetails.ProductDescription 
```

在所有三个变量中，一些数据来自使用 @Model 的 ViewModel

但只有`@Model.ProductDetails.ProductDescription`在工作而其他两个没有工作可能是因为它们是更大字符串的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:58:23.613

razor 解析器认为前两个值是电子邮件地址或类似地址，因此将它们保留为纯文本。为了通知解析器应该评估它们，您需要使用显式表达式，例如`@(Model.Property)`，因此您的变量将是：

```
url : http%3A%2F%2Fwww.domain.name%2Fproduct%2F@(Model.ProductDetails.URLName)
media: http%3A%2F%2Fwww.domain.name%2Fproduct%2F@(Model.ProductDetails.Image)
description: @(Model.ProductDetails.ProductDescription) 
```

你的片段将是：

```
<a href="http://pinterest.com/pin/create/button/?url=http%3A%2F%2Fwww.domain.name%2Fproduct%2F@(Model.ProductDetails.URLName)&media=http%3A%2F%2Fwww.domain.name%2Fproduct%2F@(Model.ProductDetails.Image)&description=@(Model.ProductDetails.ProductDescription)" class="pin-it-button" count-layout="horizontal"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

我通常将[Phil Haack 的 Razor 快速参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)指南添加为书签！

# c# - 如何禁用 Alt + 箭头关键帧导航？

> ID：11230333
> 
> 赞同：2
> 
> 时间：2012-06-27T15:54:03.150
> 
> 标签：c#, wpf, .net-4.0

我以 mvvm 方式启动了一个 WPF 应用程序。主窗口包含一个框架控件，用于浏览不同的页面。为此，我现在使用一个简单的 NavigationService：

```
public class NavigationService : INavigationService
{

   private Frame _mainFrame;

    #region INavigationService Member

    public event NavigatingCancelEventHandler Navigating;

    public void NavigateTo(Uri uri)
    {
        if(EnsureMainFrame())
        {
            _mainFrame.Navigate(uri);
        }
    }

    public void GoBack()
    {
        if(EnsureMainFrame() && _mainFrame.CanGoBack)
        {
            _mainFrame.GoBack();
        }
    }

    #endregion

    private bool EnsureMainFrame()
    {
        if(_mainFrame != null)
        {
            return true;
        }

        var mainWindow = (System.Windows.Application.Current.MainWindow as MainWindow);
        if(mainWindow != null)
        {
            _mainFrame = mainWindow.NavigationFrame;
            if(_mainFrame != null)
            {
                // Could be null if the app runs inside a design tool
                _mainFrame.Navigating += (s, e) =>
                                             {
                                                 if (Navigating != null)
                                                 {
                                                     Navigating(s, e);
                                                 }
                                             };
                return true;
            }
        }
        return false;
    }

} 
```

在 Page1 上，按下按钮会使用 NavigationService 强制导航到 Page2。在 Page2 上有一个文本框。如果 TextBox 聚焦，我可以使用 ALT + 左箭头键导航回 Page1。如何禁用此行为？

我尝试在框架控件和 TextBox-Control 中设置 KeyboardNavigation.DirectionalNavigation="None" ，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:30:11.573

将以下事件处理程序添加到文本框以禁用 alt + 左导航：

```
private void textBox1_PreviewKeyDown(object sender, KeyEventArgs e)
{
    if ((Keyboard.IsKeyDown(Key.LeftAlt) || Keyboard.IsKeyDown(Key.RightAlt)) 
        && (Keyboard.IsKeyDown(Key.Left)))
    {
         e.Handled = true;
    }
} 
```

XAML

```
<TextBox ... KeyDown="textBox1_PreviewKeyDown" /> 
```

**编辑：**更改为 PreviewKeyDown 以捕获箭头键事件

# fonts - @font-face 在 IE、Firefox 中不起作用

> ID：11230335
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:54:05.083
> 
> 标签：fonts, font-face, windows-server

我在 .NET 应用程序中使用从 Font Squirrel 生成的 @font-face。字体在本地渲染得很好。但是在发布应用程序时，它只能在服务器上的 Chrome 中运行，而不是 IE/Firefox。我正在使用所有最新版本。

我试过弄乱 .htaccess 文件并在服务器的 Mime 类型中添加 .otf 但仍然有问题。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:56:18.853

如果这有帮助，这是我用于 Font-Face 的格式：

```
@font-face {
    font-family: 'headings';
    src: url('../fonts/headings.eot');
    src: url('../fonts/headings.eot?#iefix') format('embedded-opentype'),
         url('../fonts/headings.woff') format('woff'),
         url('../fonts/headings.ttf') format('truetype'),
         url('../fonts/headings.svg#headings') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:18:56.733

这是我的代码：

```
@font-face {
font-family: 'AsapRegular';
src: url('fonts/Asap-Regular-webfont.eot');
src: url('fonts/Asap-Regular-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/Asap-Regular-webfont.woff') format('woff'),
     url('fonts/Asap-Regular-webfont.ttf') format('truetype'),
     url('fonts/Asap-Regular-webfont.svg#AsapItalic') format('svg');
font-weight: normal;
font-style: normal; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:01:44.997

我弄清楚了这个问题。当我通过 Visual Studio 发布应用程序时，它没有通过字体生成器创建的字体文件的 12/16。所以我将文件物理地放在 Windows 服务器上。

现在一切都像雨一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T15:20:06.140

我发现当通过 Visual Studio 发布 .NET 应用程序时，它并没有将 12/16 的字体文件移动到服务器。在我手动添加它们之后，一切正常。

# c# - ajax.actionlink 调用控制器动作

> ID：11230339
> 
> 赞同：1
> 
> 时间：2012-06-27T15:54:23.270
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-ajax

如果我正在使用 Ajax.ActionLink 帮助程序，并且我需要将几个参数传递给控制器​​操作，我如何获取未绑定到模型的 TextArea 的值？

例如，我希望用户填写一个 textarea，然后单击 Save，将 textarea 值发送到控制器操作以进行进一步处理。

我使用 ViewBag 吗？如果是这样，我如何将 DOM 元素的值分配给 ViewBag？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:29:29.687

I've toyed with this problem before, and you can get around it by using `Ajax.BeginForm`.

Take this follow example:

I have a model `Person` that one string property for Name.

**View**

```
@model Application.Models.Person

<fieldset>
    <legend>Form</legend>
    @using (Ajax.BeginForm("SendUp", "Home", new AjaxOptions
    {
        HttpMethod = "POST",
        OnComplete = "window.location.href = 'Index'"
    }))
    {  
        <p>
            @Html.LabelFor(model => model.Name)
            @Html.EditorFor(model => model.Name)
        </p>
        <p>
            @Html.TextArea("ta")
        </p>
        <p>
            <input type="submit" value="Submit" />
        </p>
    }
</fieldset> 
```

**Controller**

```
 [HttpPost]
    public ActionResult SendUp(string Name, string ta)
    {
        string s = ta;
        // Process stuff here
        // Go to another action or whatever
        return RedirectToAction("Index");
    } 
```

Using `Ajax.BeginForm()` allows you to send data up to the controller *even if it not bound to a model on the page*. You need to make sure that the `name` property of your Html element is the same name as the parameter that the controller needs.

So if you have the controller method of

```
public ActionResult SendUp(string Name, string ta) 
```

You will need to have an Html element of with the name `Name` and `ta` inside of the `Ajax.BeginForm()`.

To do this you can either write out the entire element:

```
<input type="text" id="Name" name="Name" /> 
```

Or you can use the `@Html` helpers.

```
@Html.Editor("Name") 
```

When you provide the name for the @Html helper it will set that value to as the `id` property and to the `name` property as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:34:25.083

ViewBag 是一个服务器端的概念。一旦页面被渲染，它就不存在了。我不知道以声明方式将页面上的字段与操作参数链接。

要做你想做的事，你有两个选择： - 摆脱 Ajax.ActionLink 帮助程序，并编写一些 Javascript（抱歉，我不能真正帮助你） - 改用 Ajax.BeginForm 并将相关字段放在表单中，以便单击提交按钮将通过 ajax 将表单提交回您的操作。

# excel - 使用标题作为列

> ID：11230340
> 
> 赞同：2
> 
> 时间：2012-06-27T15:54:23.970
> 
> 标签：excel, ssis

我有一个类似于下面的电子表格：

```
Weekly Report | 25/06/2012

-------------------------------
Name          | Course        |
-------------------------------
Peter         | Maths         |
-------------------------------
John          | English       |
-------------------------------
James         | History       |
------------------------------- 
```

每周都会发送一份新报告，有时不同，有时相同的人在不同的课程上。我想使用 SSIS 创建一个额外的列来显示通常在电子表格的单元格 b3 中的日期。

所以最后的事情看起来像

```
Weekly Report | 25/06/2012

--------------------------------------------
Name          | Course        |   Date     |
--------------------------------------------
Peter         | Maths         | 25/06/2012 |
--------------------------------------------
John          | English       | 25/06/2012 |
-------------------------------------------- 
James         | History       | 25/06/2012 |
------------------------------------------- 
```

希望在那里解释自己。我对SSIS相当陌生，所以不知道它是否真的很明显或更困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:06:51.773

感谢您澄清您的问题。您有两个步骤：提取日期并将其转换为列。我可能会使用执行 SQL 任务来[查询 Excel 工作表](http://sqlserversolutions.blogspot.com/2009/02/selecting-excel-range-in-ssis.html)并将日期映射到包变量。[然后，您可以在派生列转换](http://msdn.microsoft.com/en-us/library/ms141069.aspx)中使用该变量将其添加到正在处理的数据集中。

最后，您可能要考虑根本不使用 SSIS。如果您的源是 Excel，而您的目标是 MySQL，那么使用 SSIS 意味着您还需要 SQL Server。因此，根据您的环境编写自己的脚本或程序可能会更简单。

# jquery - Valums ajax fileupload asp.net - 获取成功上传的数量

> ID：11230345
> 
> 赞同：0
> 
> 时间：2012-06-27T15:54:42.550
> 
> 标签：jquery, asp.net, ajax, file-upload

我已经成功实现了用于异步上传多个文件的 Valums 脚本。但我有两个问题：

首先是；我需要上传文件的数量（而不是失败的文件）。但我不知道如何获取这些信息，因为我是 jquery 的新手。比方说，如果成功上传的次数大于 1，那么我想启用一个按钮。

其次，我从服务器发送的错误消息没有显示在网页中。这些是我发送给客户的消息：

```
context.Response.Write("{error: There has been an error on the server side. Please try again. }"); 
```

或者

```
context.Response.Write("{success:true}"); 
```

其中 {success:true} 消息被脚本识别（如预期的那样），但另一个没有。如何显示服务器生成的错误消息？

我在服务器端使用 ASP.NET/C#。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:34:36.373

好吧，也许我应该更仔细地搜索一下！

这是答案：

[https://stackoverflow.com/a/6055637/142600](https://stackoverflow.com/a/6055637/142600)

# google-apps - 使用 Google Drive SDK 捕获文件更改

> ID：11230346
> 
> 赞同：3
> 
> 时间：2012-06-27T15:54:58.560
> 
> 标签：google-apps, google-drive-api

老实说，到目前为止，我还无法深入了解 Google Drive API，但我想知道该 API 是否支持我需要的东西。我想捕获特定文件夹下的更改并通知有权访问该文件夹的用户。

例如，我有一个名为**Foo**的文件夹，并且有三个人可以访问该文件夹。当**Person 1**在该文件夹下进行显着更改（上传文件、更改文件、删除文件等）时，我想通知**Person 2**和**Person 3**。

> 请注意，这些更改可以在任何地方进行，而不仅仅是我的客户。该人可以通过 Google Drive Web 界面执行操作，或者用户可能正在将他/她的计算机与 Google Drive 同步。

我无法想象的唯一部分是如何捕获特定文件夹下的更改。

作为记录，我将为我的客户使用 .NET。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:53:03.733

您正在寻找的是我们刚刚推出的 Drive SDK v2 中的[更改源。](https://developers.google.com/drive/v2/reference/changes/list)但是，更改提要尚不支持仅检索特定文件夹的更改。相反，它会为用户的整个云端硬盘提供所有更改。这是我们正在考虑实施的功能请求，但我还没有关于何时实施的时间表。

# css - 可以设置仅影响某个 div 的子元素的 z-index 规则吗？

> ID：11230347
> 
> 赞同：0
> 
> 时间：2012-06-27T15:54:59.457
> 
> 标签：css

是否可以设置仅适用于某个“范围”的 z-index，例如仅影响某个元素的子元素。

我有一个 z-index 为 0 的 containerDiv。它包含一堆圆圈，它们应该以不同的深度相互叠加，但我不希望它们影响页面上的任何其他元素。

我在页面上有一堆其他元素（弹出窗口、下拉菜单等），它们的 z-index 为 1，我希望它们被放置在 containerDiv 及其所有子元素的顶部。由于我很懒，我最好避免必须根据具有最高 z-index 的圆圈来调整这些元素的 z-index 值......如果有某种方式可以让所有其他元素查看 containerDiv，那就太棒了并且所有它的孩子都具有相同的 z-index。

这可以用css实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:43:48.293

The answer depends on whether or not your other elements are descendants of the containerDiv or not. To answer the question: Yes, it's almost certainly possible, given a bit of shuffling of the markup.

But what you need to understand is the concept of *stacking context*:

[http://www.w3.org/TR/CSS2/visuren.html#layers](http://www.w3.org/TR/CSS2/visuren.html#layers)

Stacking context is not inherited the way other properties are: "A stacking context is atomic from the point of view of its parent stacking context; boxes in other stacking contexts may not come between any of its boxes." It's not like every element on the page with `z-index:2` will be behind everything on the page with `z-index:4`. Z-index (combined with a position declaration) is typically (though not exclusively) used to resolve the stacking order when two elements share a containing element.

# c - TCP 套接字到多个 IP/端口

> ID：11230351
> 
> 赞同：0
> 
> 时间：2012-06-27T15:55:10.430
> 
> 标签：c, multithreading, network-programming, fork

我正在尝试编写一个连接到多个 IP/端口的应用程序，我遇到的问题是我不知道 IP 的数量，所以一个部门可以使用它连接到 2 个 ip，其他部门可以连接到 8 ，所以它必须在运行时可配置，我正在考虑在循环中使用线程或fork，但不确定哪个更适合这项工作，希望有人可以在这里指导我，我在Linux下使用C。

例如，一个可以这样运行它 a.out ip1 port1 ip2 port2 ip3 port3 而另一个可以这样运行它 a.out a.out ip1 port1

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:07:04.640

我在这里看到四种设计选择，每种都有优点和缺点。您的选择在很大程度上取决于您的应用程序究竟做了什么。

1.  1 进程/套接字（fork）：这样做的好处是一个进程中的致命错误（例如，SEGFAULT）不会影响其他进程。缺点包括该方法更耗费资源并且进程更难以协调（例如，如果您想进行动态负载平衡）。

2.  1个线程/套接字（pthreads）：它的优点是它很轻，线程很容易协调，因为它们共享一个公共的内存空间。缺点包括一个线程中的错误可能会使您的整个应用程序崩溃。

3.  有限状态机：您可以在单个进程中使用单个线程，`poll`在所有套接字上执行大量操作，然后采取正确的（非阻塞）操作，即`read`，`write`或`close`。我听说这在单处理器上非常快，但是，它没有利用多核架构，而且编程起来有点困难。

4.  混合：选择以上三个中的任何一个并将它们组合起来。参见例如[Apache 服务器](http://httpd.apache.org/docs/2.0/mod/worker.html)。

# sql - SQL删除一些常见字段值的重复记录？

> ID：11230353
> 
> 赞同：1
> 
> 时间：2012-06-27T15:55:14.130
> 
> 标签：sql, duplicates, sql-delete, mysql4

考虑具有以下架构的表：

```
id, location, starred 
```

有许多具有相同位置的记录：

```
id | location | starred
-----------------------
1     rome      yes
2     rome      no
3     rome      no
4     milan     yes
5     milan     no
6     bozen     no 
```

我希望每个位置最多有一个记录。考虑到加星记录和未加星记录之间的选择，我想要加星。那么什么sql会产生这个表：

```
id | location | starred
-----------------------
1     rome      yes
4     milan     yes
6     bozen     no 
```

我怀疑这可以通过一些虚拟表或“视图”来完成。

```
DELETE FROM table
GROUP BY location, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:18:09.147

使用分析函数删除重复项。以下代码生成基于 row_number 的位置，并按星号 desc 排序（所以先是）

```
 delete from mytable2 where id in ( 
select id from
( select  id, location,starred,row_number() over ( partition by location order by location, starred desc) row_num 
  from mytable2
) where row_num >1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:18:31.957

如果 [started] 只能是是或否，那么这应该有效：

```
create table data
(
id int identity(1,1),
location varchar(50),
[started] varchar(3)
)

insert into data select 'Rome', 'Yes'
insert into data select 'Rome', 'No'
insert into data select 'Rome', 'No'
insert into data select 'Milan', 'Yes'
insert into data select 'Milan', 'No'
insert into data select 'Bozen', 'No'

WITH locationsRanked (id, location, [started], rank)
AS
(
    select min(Id), location, [started],
    RANK() OVER (PARTITION BY location  ORDER BY location, [started] DESC) AS Rank
    from data
    group by location, [started]
)
select * from locationsRanked where Rank = 1
order by id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:06:04.863

如果你只是想提取数据，这样的东西应该可以工作：

```
select
    [table].*
from
    [table]
    inner join (select 
                    MIN(id) as id, 
                    location 
                from 
                    [table] 
                group by location) as data
        on [table].id = data.id 
```

显然，您也可以使用此（或类似查询）的结果来确定要删除的 id 列表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T15:57:40.483

我认为这可以帮助你：

[http://www.w3schools.com/sql/sql_distinct.asp](http://www.w3schools.com/sql/sql_distinct.asp)

# php - 留下没有任何函数/类的php代码有缺点吗？

> ID：11230355
> 
> 赞同：-1
> 
> 时间：2012-06-27T15:55:21.873
> 
> 标签：php

一开始我有直接写`php`代码的习惯

```
<?php

?> 
```

地区。那些是为了更简单的网站和更少的流量。

现在我正在开发一个涉及大量社交网络的更大网站。那么是否倾向于像那样留下代码，或者我应该封装它。

如果代码不在任何函数/类中，是否有任何缺点或网站崩溃的可能性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:01:43.367

为了创建类和函数而创建类和函数？不。

创建函数来支持代码重用？是的。创建对象以采用几种可能的代码模式之一？是的。

我建议大量阅读以了解过程和 OOP 编程之间的根本区别。

从这个问题开始，它在技术上不是重复的，但非常接近：[简单解释 PHP OOP vs Procedural？](https://stackoverflow.com/questions/1530868/simple-explanation-php-oop-vs-procedural)

阅读答案，尤其是详细的答案和包含所有链接的答案——访问链接。

查看类似[这个](http://www.debugmagazine.com/freelancing-tips-tricks/procedural-vs-object-oriented-php-programming)或[这个](http://devzone.zend.com/256/the-best-tool-for-the-job-oo-versus-procedural-programming-in-php/)的教程。您不仅必须了解编程风格之间的区别，还必须了解何时以及为何使用它们。简单地将函数和类添加到您的代码中，以便您可以“执行 OOP”，这实际上根本不是在使用 OOP，它只是将您的代码变成了意大利面条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:01:53.550

关于以下方面的巨大缺点：

*   代码可读性：现在和未来，对您以及任何可能从事该项目的未来开发人员；
*   维护：在 10 个不同的文件中更改相同的代码可能意味着您忘记在第 11 个文件中更改它；
*   冗长：编写相同的东西几十次只是因为代码没有集中/组织成可重用的部分（有人可以争辩说可重用的部分可以通过构建文件并包含它们来实现）；

# html - 什么是使现有网站具有响应性而又不冒失去良好搜索引擎排名的良好设计策略

> ID：11230360
> 
> 赞同：1
> 
> 时间：2012-06-27T15:55:32.057
> 
> 标签：html, seo, responsive-design

我一直在为客户重新设计一个网站，我正在努力找出使我的客户的新网站尽可能响应的最佳方法，同时又不损害他良好的搜索引擎排名。客户想要向网站添加一堆新内容以及一些新页面。当前网站使用过渡性 html，新网站将需要一些 html5。我很想为新设计使用像 bootstrap 这样的响应式框架，但我担心的是，当我启动新网站时，他的良好排名会完全搞砸。我要考虑的另一件事是现有网站是旧的 Dreamweaver 模板。由于缺乏更好的术语，很多标记和代码都很糟糕。对我来说，维护全新的文件会容易得多。但同样，我不 不想弄乱他的排名。那么，当我发布时，最好重新开始并希望最好，还是删除他不想要的内容，添加新内容，也许添加几个媒体查询会更好？还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T15:58:28.560

1.  正是这些内容让他在排名中名列前茅，所以只要它仍然存在，您就不必担心太多
2.  如果旧的 HTML 写得不好，使用更多语义的 HTML*应该*有助于他们的排名，因为这将使搜索引擎更好地理解他们的内容的权重和含义。使用[微格式](http://schema.org/)也是一件好事。
3.  如果您更改 URL，请确保执行[301 重定向](http://www.tamingthebeast.net/articles3/spiders-301-redirect.htm)，以便他们获得的所有链接都将“传递”到他们的新 URL。还要提交一个[XML 站点地图](http://www.sitemaps.org/)，以便搜索引擎知道新的 URL。
4.  无论您在进行更改时做什么，他们的排名都会出现波动。这很正常。如果他们的排名没有恢复，请耐心等待至少两周，然后再惊慌失措。
5.  进行更改后，请务必监控[Google 网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)，以查看切换后是否报告任何错误（如果您更改 URL 会出现 404 错误，没关系）
6.  阅读这篇文章：[如何将任何网站变成响应式网站](http://vandelaydesign.com/blog/web-development/turn-any-site-into-a-responsive-site/)。它可能会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:59:35.017

如果内容的核心标记是语义化的并且结构正确，那么您几乎可以做任何您想做的事情，并且您的排名不应该降低。如果有的话，它很可能会有所改善。此外，如果内容本身几乎没有变化，那么您是安全的。

# sql-server-2008 - 使用 Windows 身份验证从网络共享批量插入 SQL Server 需要哪些权限？

> ID：11230361
> 
> 赞同：7
> 
> 时间：2012-06-27T15:55:33.103
> 
> 标签：sql-server-2008, windows-7, bulkinsert

我正在开发一个将数据批量加载到 SQL Server 2008 数据库中的应用程序。它将 CSV 文件写入网络共享，然后调用包含 BULK INSERT 命令的存储过程。

我正在将应用程序迁移到一个全新的网络。在这个新世界中，批量插入失败并出现以下错误：

```
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "\\myserver\share\subfolder\filename" could not be opened. Operating system error code 5(failed to retrieve text for this error. Reason: 15105). 
```

我使用编写文件的同一帐户使用 Windows 身份验证连接到数据库。该文件及其所在的文件夹授予我的用户帐户和数据库服务器的域服务帐户的读取和修改权限。该服务帐户显然已允许受约束的委派，这在[MSDN](http://msdn.microsoft.com/en-us/library/ms188365.aspx)中有所提及。还是不行。如果我使用 SQL Server 帐户进行连接，则批量插入成功，但我们正试图仅使用 Windows 身份验证。

有没有人知道需要做什么才能完成这项工作？SQL Server 究竟如何访问网络共享上的数据，在其服务帐户和连接用户的服务帐户之间跳转？我知道我可以在我们当前的基础架构中在类似的情况下批量插入，但是随着年龄的增长，它变得如此笨拙，以至于很难追踪过去为实现这一点所做的工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-05T09:42:11.430

最近，我们的一些开发人员遇到了这个问题。我想出了许多方法来测试批量插入。

我们的首选是使用 SQL 服务帐户。我们将 SQL 服务器和 SQL 代理设置为作为服务帐户运行，然后允许开发人员触发代理作业。服务帐户被授予对 UNC 共享的权限，并且这一切都正常运行。请注意，服务帐户将始终可以正常运行这些代理作业（假设已设置 UNC 权限）。尝试测试的开发人员会遇到这些问题。

另一种方法是在 SQL 服务器本身上创建一个共享并将批量插入路径指向本地目录。这些错误似乎只在访问 UNC 路径时发生。无论 UNC 路径是否具有允许您访问的正确权限。例如，我们`C:\test\`在 SQL 服务器本身上创建一个文件夹，并允许它允许开发人员将测试文件放在那里。然后通过批量插入命令调用这些。

可能需要对 master 运行命令以允许 SQL 登录组权限批量插入。这是如下。

```
GRANT ADMINISTER BULK OPERATIONS TO "domain\usergroup" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-11T22:17:49.473

应阅读 Adam Saxton 的博客（关于 Kerberos 和共享中的批量插入）：http: [//blogs.msdn.com/b/psssql/archive/2012/09/07/bulk-insert-and-kerberos.aspx](http://blogs.msdn.com/b/psssql/archive/2012/09/07/bulk-insert-and-kerberos.aspx)。Adam 提供了两种方法：为机器（相对于 sqlservr.exe 启动）帐户启用约束委派，或者使用 SQL Server 登录。Adam 提到了另外两种方法（他不推荐）。

顺便说一句，OP 消息的后半部分“（无法检索此错误的文本。原因：15105）”可能与 SQL Server 启动帐户缺乏 SQL Server 的“配置 Windows 服务帐户和权限”主题中记录的权限有关，例如 SeAssignPrimaryTokenPrivilege。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T08:47:51.880

你有没有解决过这个问题？我最近遇到了类似的问题，发现解决它的最好方法是使用 SQL 登录。

最初，在阅读了[此处](http://msdn.microsoft.com/en-us/library/ms175915.aspx)的注释后，我想如果我只是授予我连接到 SQL Server 的 Windows 帐户的读取权限，那就没问题了，但即使我授予对 的读取权限`Everyone`，我仍然无法读取文件。

我认为原因与 SQL Server 模拟 Windows 用户并尝试访问 UNC 共享有关，这是委派，除非明确启用，否则不允许这样做。[这里](http://msdn.microsoft.com/en-us/library/ms998355.aspx)有一些注释可能会有所帮助。这是您所说的受限代表团，*我也无法让它发挥作用！*

**底线：**我刚刚使用了 SQL 登录并确保 SQL Server 进程帐户对共享具有读取权限（`Everyone`在我的情况下通过授予读取权限）并且它有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-03T18:51:17.830

为了使用 AD 用户批量插入，它自己的 SQL 服务必须作为域用户运行，并且必须具有 AD 权限才能委托身份验证。如果您想与广告用户一起运行链接服务器，则相同。这是AD和链接服务器的链接，但权限相同。

[链接服务器和 Active Directory](https://technet.microsoft.com/en-US/library/ms189580%28v=SQL.105%29.aspx)

*   服务器必须具有域管理员注册的 SPN。
*   必须信任运行 SQL Server 的帐户才能进行委派。
*   服务器必须使用 TCP/IP 或命名管道网络连接。

# ms-access - 将下拉菜单链接到 MS Access 中的新表单

> ID：11230362
> 
> 赞同：0
> 
> 时间：2012-06-27T15:55:36.077
> 
> 标签：ms-access

我创建了一个包含 3 个选项的下拉菜单。我需要链接每个选择以打开一个新表单，以便用户可以选择每个选择。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:46:42.247

如果您的组合框中的选择包含您要打开的实际表单名称，您可以使用组合框的“更改时”或“更新后”事件中的单个语句来执行此操作：

```
DoCmd.OpenForm Combo1.Value 
```

如果您的组合框中的值与您要打开的表单名称不同，您可以编写一个 select 语句：

```
Select Case Combo1.Value
    Case "Option1"
        DoCmd.OpenForm "Form 1 Name"
    Case "Option2"
        DoCmd.OpenForm "Form 2 Name"
    Case "Option3"
        DoCmd.OpenForm "Form 3 Name"
End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:51:11.083

你有一个很短的模糊问题，在这个答案中，我假设“下拉菜单”是指组合框。

在组合框的“更改”事件中，有一个选择案例语句，其中包含与组合框可以采用的每个值相对应的案例语句。对于每个 case 语句，您要打开的每个表单都有一个 DoCmd.OpenForm("FormName".....) 语句。

如果您想要更具体的答案，请发布更具体/详细的问题（使用您尝试过的代码）。

# awk - 基于文件区域的 AWK 组合

> ID：11230364
> 
> 赞同：0
> 
> 时间：2012-06-27T15:55:41.427
> 
> 标签：awk, text-files

我有一个像

```
Sever Name aad98722RHEL  20120630 075022

CPU
1 sec 10 sec 15 sec 1 min 1 hour
5     8      0      1     19

TX kbits/sec:

 interface  10 sec      1 min       10 min      1 hour      1 day 
 ---------  ------      -----       ------      ------      ----- 
 eth0       32          33          39          40          33 
 eth1       6           186         321         199         18 
 eth2       0           0           0           0           0 
 mgt0       0           0           0           0           0 

RX kbits/sec: 

 interface  10 sec      1 min       10 min      1 hour      1 day 
 ---------  ------      -----       ------      ------      ----- 
 eth0       19          19          25          26          23 
 eth1       9           26          40          28          10 
 eth2       0           0           0           0           0 
 mgt0       0           0           0           0           0 

Total memory usage:  1412916 kB 
Resident set size :  1256360 kB
Heap usage        :  1368212 kB 
Stack usage       :  84 kB 
Library size      :  16316 kB 
```

我想生产的是

```
aad98722RHE  20120630 075022  CPU  5     8      0      1     19 
aad98722RHE  20120630 075022  TX kbits/sec:  32          33          39          40          33       6           186         321         199      18        0           0           0           0           0        0           0           0           0           0 
aad98722RHE  20120630 075022  RX kbits/sec:  19          19          25          26          23       9           26          40          28       10        0           0           0           0           0        0           0           0           0           0 
aad98722RHE  20120630 075022 Total memory usage:  1412916 kB   Resident set size :  1256360 kB   Heap usage        :  1368212 kB   Stack usage       :  84 kB    Library size      :  16316 kB 
```

这可以在 Awk/Sed 中完成吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:41:24.527

也许它不是更好的解决方案，但它有效。

> 文件：a.awk：

```
function print_cpu( server_name, cpu )  
{
    while ( $0 !~ cpu )                 
    {
        getline
    }    

    getline
    getline

    printf "%s %s ", server_name, cpu

    for ( i = 1; i < NF + 1; i++ )
    {
        printf "%s ", $i
    }

    printf "\n"
}

function print_rx_or_tx( server_name, rx_or_tx )
{
    while ( $0 !~ rx_or_tx )
    {
        getline    
    }

    getline 
    getline 
    getline 

    printf "%s %s ", server_name, rx_or_tx

    while ( $0 != "" )
    {
        getline

        for ( i = 2; i < NF; i++ )
        {
            printf "%s ", $i
        }    
    }

    printf "\n"
}

function print_stuff( server_name )
{
    while ( $0 == "" )
    {
        getline    
    }

    printf "%s ", server_name

    while ( $0 != "" )
    {
        printf "%s ", $0   

        if ( getline <= 0 )
        {
            break    
        }
    }

    printf "\n"
}

BEGIN { server = "Server Name"; cpu = "CPU"; tx = "TX kbits/sec:"; rx = "RX kbits/sec:" }

server { server_name = $3 " " $4 " " $5 }

! server  
{    
    print_cpu( server_name, cpu )
    print_rx_or_tx( server_name, tx  )
    print_rx_or_tx( server_name, rx  )
    print_stuff( server_name )
} 
```

> 运行：awk -f a.awk your_input_file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:05:10.213

一种使用方式`perl`：

假设`infile`您的问题内容和下一个内容位于`script.pl`：

```
use warnings;
use strict;

my ($header, $newlines, $trans, @nums);

## Read input in paragraph mode.
local $/ = qq||;

while ( my $par = <> ) { 
    chomp $par;

    ## Save data of the header.
    if ( $. == 1 ) { 
        my @header = $par =~ m/\ASer?ver\s+Name\s+(\S+)\s+(\S+)\s+(\S+)\s*\Z/s;
        last unless @header;
        $header = join qq| |, @header;
        next;
    }   

    ## Number of '\n' in each paragraph (number of lines minus one).
    $newlines = $par =~ tr/\n/\n/;

    ## Three lines, the CPU info. Extract what I need and print.
    if ( $newlines == 2 ) { 
        printf qq|%s %s %s\n|, $header, $par =~ m/\A([^\n]+).*\n([^\n]+)\Z/s;
        next;
    }   

    ## Transmission string.
    if ( $newlines == 0 ) { 
        $trans = $par;
        next;
    }   

    ## Transmission info. Extract numbers and print.
    if ( $newlines == 5 ) { 
        my @lines = split /\n/, $par;
        for my $i ( 0 .. $#lines ) { 
            my @f = split /\s+/, $lines[ $i ];
            if ( grep { m/\D/ } @f[ 1 .. $#f ] ) { 
                next;
            }   
            else {
                push @nums, @f[ 1 .. $#f ];
            }   
        }   
        printf qq|%s %s\n|, $header, join qq| |, @nums;
        @nums = (); 
    }   

    ## Resume info. Extract and print.
    if ( $newlines == 4 ) { 
        $par =~ s/\n/\t/gs;
        printf qq|%s %s\n|, $header, $par;
    }   
} 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
aad98722RHEL 20120630 075022 CPU 5 8 0 1 19
aad98722RHEL 20120630 075022 32 33 39 40 33 6 186 321 199 18 0 0 0 0 0 0 0 0 0 0
aad98722RHEL 20120630 075022 19 19 25 26 23 9 26 40 28 10 0 0 0 0 0 0 0 0 0 0
aad98722RHEL 20120630 075022 Total memory usage: 1412916 kB     Resident set size : 1256360 kB  Heap usage : 1368212 kB Stack usage : 84 kB     Library size : 16316 kB 
```

# grails - Grails mappedBy

> ID：11230369
> 
> 赞同：0
> 
> 时间：2012-06-27T15:55:56.527
> 
> 标签：grails

我在 Grails 中做一个简单的程序，并且遇到了多对多关系的问题。我有一个机场课程：

```
class Airport 
{
   static hasMany = [outgoingFlights:Flight, incomingFlights:Flight]
   static mappedBy = [outgoingFlights:'departureAirport', 
                      incomingFlights:'arrivalAirport']
} 
```

和一个飞行类：

```
class Flight
{
   Airport departureAirport
   Airport arrivalAirport
} 
```

出于某种原因，它给了我一个非常长且奇怪的 mappedBy 错误消息。mappedBy 代码有问题还是我还需要做其他事情？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-23T09:34:23.077

请试试这个：

```
class Flight
{
   static belongsTo = [departureAirport: Airport, arrivalAirport: Airport ]
   Airport departureAirport
   Airport arrivalAirport
} 
```

重新创建您的数据库。

# sql-server - MiniProfiler - SqlParameter

> ID：11230381
> 
> 赞同：5
> 
> 时间：2012-06-27T15:56:27.793
> 
> 标签：sql-server, asp.net-mvc-3, mvc-mini-profiler

我正在使用最新版本的 MiniProfiler，一切都按我的预期设置和工作。我唯一的问题是没有显示 SqlParameters。

例如，我正在运行一个存储过程：-

```
var cmd = dbcon.CreateCommand();
cmd.CommandText = "USP_Admin_Subscription_List";
cmd.CommandType = CommandType.StoredProcedure;

// parameters
cmd.Parameters.Add(new SqlParameter("@UserRef", SqlDbType.NVarChar) { Value = customerRef }); 
```

执行此操作时，我在 MiniProfiler 显示中看到 SQL，但看不到参数 @UserRef 也看不到它的值。

这可能吗？很高兴看到这个值，这样我就可以确保传递了正确的值。

我正在使用 MVC 3

任何建议都会受到欢迎。

干杯，

Ĵ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T09:04:43.033

老问题，但以防万一其他人正在寻找答案：

示例代码有：

```
 // different RDBMS have different ways of declaring sql parameters - SQLite can understand inline sql parameters just fine
    // by default, sql parameters won't be displayed
    MiniProfiler.Settings.SqlFormatter = new StackExchange.Profiling.SqlFormatters.InlineFormatter(); 
```

您需要将其更改为：

```
MiniProfiler.Settings.SqlFormatter = new StackExchange.Profiling.SqlFormatters.SqlServerFormatter(); 
```

你的参数就会出现。

# ios - iOS5 上的 CSS3 无限旋转动画

> ID：11230384
> 
> 赞同：1
> 
> 时间：2012-06-27T15:56:38.483
> 
> 标签：ios, animation, css, safari, mobile-safari

所以我试图在我的iOS webapp上无限旋转一个png，但很难让它在模拟器中工作。这是我的CSS：

```
 #spinner { -webkit-animation: spinner 1s infinite linear; }

@-webkit-keyframes spinner {
    0% { -webkit-transform: rotate3d(0,0,1,0deg); }
    100% { -webkit-transform: rotate3d(0,0,1,360deg); }
} 
```

它在最新的 Chrome 上完美运行。但是，移动 safari 似乎不喜欢 0-360。我尝试了 0 到 180 度，但出于某种奇怪的原因，我怎么能去 360 度？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T06:50:07.700

正如 YuriAlbuquerque 所说，你可以这样做

```
@-webkit-keyframes spinner {
    0% { -webkit-transform: rotate3d(0,0,1,0deg); }
    25% { -webkit-transform: rotate3d(0,0,1,90deg); }
    50% { -webkit-transform: rotate3d(0,0,1,180deg); }
    75% { -webkit-transform: rotate3d(0,0,1,270deg); }
    100% { -webkit-transform: rotate3d(0,0,1,360deg); }
} 
```

删除关键帧中的 25% 和 75% 也有效，但仅在低于 ios6 的情况下有效。在 ios6 中，如果不添加 25% 和 75%，则它将顺时针旋转 180 度，而不是从 180 度逆时针旋转到 360 度。

# python - Python + Celery 手动路由

> ID：11230386
> 
> 赞同：4
> 
> 时间：2012-06-27T15:56:41.420
> 
> 标签：python, celery

我一直在努力使用 Celery 设置手动路由，但似乎无法将特定任务放入特定队列。到目前为止，这就是我所做的事情：

```
 CELERY_QUEUES = {
    "default": {
        "binding_key": "default"},
    "medium": {
        "binding_key": "medium"},
     "heavy": {
         "binding_key": "heavy"},
      } 
```

定义如下的路线

```
 CELERY_ROUTES = ({ "tasks.some_heavy_task": {
                   "queue": "heavy",
                   "routing_key": "tasks.heavy"
                  }}, ) 
```

守护进程开始像

```
 celeryd -l INFO -c 3 -Q heavy 
```

但是，“some_heavy_task”永远不会运行。当我删除路由并且只有一个默认队列时，我可以让它们运行。我在这里做错了什么，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T10:09:53.390

我为每个任务创建了特殊的 celeryconfig 文件，所有任务都存储在特殊队列中。这是示例：

```
CELERY_IMPORTS = ('cleaner_on_celery.tasks',)
CELERYBEAT_SCHEDULE = {
    'cleaner': {
        "task": "cleaner_on_celery.tasks.cleaner",
        "schedule": timedelta(seconds=CLEANER_TIMEOUT),
    },
}
CELERY_QUEUES = {
    "cleaner": {"exchange": "cleaner", "binding_key": "cleaner"}
}
CELERY_DEFAULT_QUEUE = "cleaner"

from celeryconfig import * 
```

你可以在底部看到：我导入了常见的 celeryconfig 模块。在这种情况下，您可以启动几个 celeryd 实例。我还建议将它与 supervisord 一起使用，在为每个任务创建 supervisord.conf 文件后，您可以轻松地管理它们：

```
supervisorctl start cleaner
supervisorctl stop cleaner 
```

# php - Ajax Jquery - 简单的请求不回答

> ID：11230387
> 
> 赞同：1
> 
> 时间：2012-06-27T15:56:42.960
> 
> 标签：php, jquery, ajax

我一直在寻找答案，但就今天而言，没有人找到：

我正在尝试实现一些 ajax 方法来在网页上发布一些评论。我使用这样的ajax方法：

```
<button id="my-btn">Make an Ajax request!</button>

<script >
  $('#my-btn').click(function() {
    var comment = $('#id1').val();   
    var m = {$id2};
     var data = new Array();
     data[0]= comment;
    data[1]= m;

    $.post('{$postURL}', data, function(callback_data){

    alert('hello');

    });

  });
</script> 
```

其中 m = {$id2}; 是由于一个聪明的变量。

有效，`alert('hello')`但未处理 php 代码：`{$postURL}`需要一个方法`comment(){$comment = $_POST[$data[0]]; $m = $_POST[$data[1]];...}`。

所以，`postURL`就像 : `"index.php?post=comment"`，方法是`comment()`。

当然，当我替换`{$postURL}`为时`"index.php?post=comment"`，没有任何事情发生，因为我仍然有`alert('hello')`消息但该方法`comment()`不处理任何内容。

这个方法是否被调用？或者是否存在错误的语法，`$_POST[$data[0]]`并且`$_POST[$data[1]]`无法通过 comment() 方法识别。

index.php 的工作方式是将 : 重定向到另一个 php 页面，将其命名为 mypage.php，我们可以在其中找到该`comment()`方法。

而且，很奇怪的事情：当我腐败`$.post("{$postURL}"`的时候`$.post("{$whatever}"`，我还有一个`alert('hello')`消息！更奇怪的是，当我发出警报时（callback_data）；在回调函数中，我收到一条巨大的警报消息，其中包含我的整个 php 代码......

在一个先例问题中，我被告知要放置一些分隔符，因为 Smarty 就像这样：

```
$('#my-btn').click(function() {ldelim}
    var comment = $('#id1').val();   
    var m = {$id2};
    var data = {ldelim}
      comment: $('#id1').val(),
      m: {$id2}
    {rdelim};
    $.post("{$postURL}", data, function(callback_data){ldelim}
      alert('hello');
    {rdelim});
  {rdelim}); 
```

但是，什么都没有改变，

有人有想法吗？

最好的，纽本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:22:45.250

问题可能是您将数据作为 javascript 数组传递，但它应该是[此处](http://api.jquery.com/jQuery.post/)提到的映射或字符串。尝试这个 ：

```
<script >
  $('#my-btn').click(function() {
    var comment = $('#id1').val();   
    var m = {$id2};
       $.post('<?php echo $postURL ?>', {0 : comment,1 : m}, function(callback_data){
            alert('hello');
       });
  });
</script> 
```

# android - Android：应用程序在启动时崩溃 - 附加线程“Binder Thread #3”失败

> ID：11230388
> 
> 赞同：0
> 
> 时间：2012-06-27T15:56:43.467
> 
> 标签：android, crash

我复制了一个现有的应用程序，该应用程序删除了我不需要创建某些功能的最小版本的所有东西。该应用程序编译但运行时崩溃。我尝试使用 LogCat，但我得到的是：

附加线程“Binder Thread #3”失败

不是很有用。过去，当我复制一个项目并剥离一些东西但能够找出问题时，我遇到了这个问题。但那是很久以前的事了，不记得问题是什么了。检查了我的清单，但什么也没看到。有什么线索吗？非常感谢！

跟进：原来是清单中的名称属性导致了问题：

```
<application
    android:name=".MyApp"
    android:icon="@drawable/ic_launcher_icon"
    android:label="@string/app_name"
    android:debuggable="false"> 
```

删除它可以解决问题。不知道为什么这应该是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:15:32.080

你有没有试过

*   清洁项目（菜单项目 -> 清洁）和
*   修复 android 属性（右键单击左侧边栏中的项目名称 -> Android 工具 -> 修复项目属性）？

有时它可以解决所有问题！

# java - JMS 有害消息删除

> ID：11230394
> 
> 赞同：0
> 
> 时间：2012-06-27T15:56:50.263
> 
> 标签：java, jms, weblogic, message-queue, ibm-mq

我正在尝试在 weblogic 10r3 服务器上调试 web 应用程序 hostde。`com.ibm.mq.jms.MQQueue`该应用程序正在通过 Java 消息驱动 Bean接收来自外部 IBM JMS 队列（类名：）的输入。

我编写了一个小型测试应用程序来连接到该队列并发送测试消息。问题是现在测试消息会产生异常，并且它会以某种方式被放回队列并一次又一次地循环。这会产生许多异常，导致日志不可读。

首先，我尝试通过在我的测试应用程序上构建消费者来删除毒消息，但代码无限期地阻塞在`consumer.receive()`.

然后我尝试设置`JMSexpiration`为某个数字而不是默认的 0，但最终消息仍然使用 0 作为过期。

欢迎所有想法，非常感谢

代码概述了 JMS 生产者：

```
 static String rawTradeUpload = "some long chunk of data"

        Hashtable ht = new Hashtable();

        ht.put(Context.INITIAL_CONTEXT_FACTORY,
                weblogic.jndi.WLInitialContextFactory.class.getName());

        //ht.put(Context.PROVIDER_URL, "t3://gprimeap1d.eur.nsroot.net:12016");
        ht.put(Context.PROVIDER_URL, "t3://gprimeap1d.eur.nsroot.net:12001");

        ht.put(Context.SECURITY_PRINCIPAL, "weblogic");

        ht.put(Context.SECURITY_CREDENTIALS, "welcome5");

        Connection con = null;
        Session s = null;

        try {
            if(ctx == null)

                    ctx = new InitialContext(ht);

            ConnectionFactory myConnFactory = null;

            Queue myQueue = null;

                myConnFactory = (ConnectionFactory) ctx
                        .lookup("SwiftConnectionFactory");

                con = myConnFactory.createConnection();

                s = con.createSession(false, Session.AUTO_ACKNOWLEDGE);

                myQueue = (Queue) ctx
                        .lookup("IncomingSwiftFxQueue");

                MessageProducer producer = s.createProducer(myQueue);
                Message msg = s.createTextMessage(rawTradeUpload);

                producer.send(msg); 
                    s.close();

            con.close();

        } catch (NamingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JMSException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:28:12.270

您是否尝试过设置重新传递限制并定义错误队列目标，以便在 x 次尝试后，容器负责将消息移动到错误队列？这使您可以保持主队列没有有害消息，并使用专用的错误队列来浏览/调试问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:23:35.790

在 IBM WebSphere MQ 队列管理器上配置回退队列和重新传递设置非常简单。设置 BOThreshold 和 BO 队列名称以及本地队列。毕竟，也许您可​​以说服他们进行此设置-您都可以从该解决方案中受益，以尽可能好地工作，对吗？

否则，为什么不尝试捕获所有异常，如果它们发生 - 将失败的消息重新排队到 WebLogic 上的错误队列中。似乎是一个不错的选择。

如果您需要接收，请改为使用超时调用它。

```
Message msg = consumer.receive(1000L);  // wait for a message for 1 sec, then continue. 
```

# solr - Solr 同义词无法正常工作

> ID：11230396
> 
> 赞同：2
> 
> 时间：2012-06-27T15:56:54.003
> 
> 标签：solr, synonym

我们有一个大型餐厅菜单数据库，用户可以在其中搜索菜单项。有很多项目，当这些词并排时，它是一道独特的菜，但这些词很常见，到处都是。

示例：用户想要在数据库中搜索“cheese steak”...可以是“cheesesteak”或“cheese steak”

在我的同义词文件中，我有：

```
cheesesteak     => cheesesteak, cheese steak
cheese steak    => cheesesteak, cheese steak 
```

当我搜索“cheesesteak”时，我得到了有效的结果。我得到带有“cheesesteak”和“cheese steak”的菜单项（并排的单词）

但是当我搜索“cheese steak”时，我会得到各种不相关的结果，比如“steak salad with blue cheese”，它会找到任何带有奶酪和牛排的东西

有没有办法配置这个同义词文件以便它工作？我不想强迫用户输入引号等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:04:49.070

您正在寻找的是邻近搜索，得分是否随着单词的正确排序和距离而提高。来自[Solr 常见问题解答](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_search_for_one_term_near_another_term_.28say.2C_.22batman.22_and_.22movie.22.29)

> 可以使用草率的短语查询来完成邻近搜索。这两个词在文档中出现的越近，得分就越高。一个草率的短语查询指定了一个最大的“slop”，或者需要移动标记的位置数才能获得匹配。
> 
> 这个标准请求处理程序的示例将查找在“电影”的 100 个单词内出现“蝙蝠侠”的所有文档：
> 
> q=text:"蝙蝠侠电影"~100

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:10:44.903

你应该做的是使用 edismax 并让 boosting 显示最相关的文档。如果您添加提升查询或带有所有术语的可选短语，您也可以使用标准处理程序来执行此操作，例如`+cheese +steak ("cheesesteak"^100 "steak cheese"^50)`

# android - 用户对集成 Flurry 的反应

> ID：11230399
> 
> 赞同：0
> 
> 时间：2012-06-27T15:57:09.197
> 
> 标签：android, flurry

我正在考虑将 Flurry 集成到我的 Android 应用程序中。我已经涵盖了技术部分，并且使用 SDK 非常容易。我的问题更多是关于用户对将此类工具集成到您的应用程序中的反应。我想有些用户不会喜欢应用程序中有某种跟踪\分析机制的事实。除了提供停止在我的应用程序内跟踪/记录数据的选项之外，您还有什么其他措施可以推荐吗？你会如何在你的应用描述中引用它（如果有的话？）？是否有一些标准的隐私政策可以用来推荐我的用户？

# xcode - PhoneGap jQuery Mobile

> ID：11230400
> 
> 赞同：2
> 
> 时间：2012-06-27T15:57:09.920
> 
> 标签：xcode, jquery-mobile, cordova

我正在尝试使用 jquerymobile 制作一个 PhoneGap 应用程序，但它似乎不起作用......

在我的 index.html 中，我写了以下代码；

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<meta charset="utf-8">
<link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css"/>

<script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js"></script>
<script type="text/javascript" charset="utf-8" src="javascripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="javascripts/jquery.mobile-1.1.0.min.js"></script>
     <script type="text/javascript">
</script> 
```

我将 jquery 移动文件放入我的 www 文件中。

有人可以教我如何使用 PhoneGap 读取 jquery 文件吗？

对不起我的英语不好...

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:03:36.860

我在 github 存储库中有一些示例应用程序，您可以用作参考。

[科尔多瓦示例](https://github.com/dhavaln/cordova-examples)

[phonegap 与 jquery 手机](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-video)

# java - 并不总是存在的 Java 逻辑错误

> ID：11230401
> 
> 赞同：0
> 
> 时间：2012-06-27T15:57:23.147
> 
> 标签：java, logic

我对 Java 还是很陌生，但我很确定这不应该发生。我的paintComponent 方法中存在某种奇怪的逻辑错误，导致无法正确绘制图像。通常这不会是一个问题，我可以找到解决它的方法。但是，问题并不总是存在。一次注释和取消注释一行有时会绕过它，关闭和重新打开 IDE 也是如此。（Eclipse。）什么可能导致这种情况，以及可以做些什么来避免它？

这是我的方法：

```
public void paintComponent(Graphics g){
    g.drawImage(titlebg, 0, 0, null);
    g.setColor(Color.LIGHT_GRAY);
    g.fillRect(300, 250, 300, 50);
    //g.fillRect(400, 400, 300, 50);
    g.drawImage(ccground, 0, 0, null);
} 
```

编辑：当 setColor 和 fillRect 方法未注释时，drawImage 方法不起作用。有时他们不工作，即使只有他们两个。有时他们会这样做。

编辑 2：对图像的唯一其他调用是在下面的代码中，它初始化它们。

```
Toolkit tk = Toolkit.getDefaultToolkit();

public Image retrieveImage(String x){
    URL y = this.getClass().getResource(x);
    Image img = tk.getImage(y);
    return img;
} 
```

这被引用：

```
public void loadImages(){
    ccground = rl.retrieveImage("\\Chrysaline Caverns ground tile.png");
    titlebg = rl.retrieveImage("\\Title Screen.png");
} 
```

在与paintComponent 方法相同的类中。

编辑 3：堆栈跟踪。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at java.awt.Container.addImpl(Unknown Source)
at java.awt.Container.add(Unknown Source)
at javax.swing.JFrame.addImpl(Unknown Source)
at java.awt.Container.add(Unknown Source)
at gui.Main.createGui(Main.java:32)
at gui.Main$1.run(Main.java:21)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

主类

```
public class Main extends JFrame{
static Window w;
JFrame f;
Image ccground;
Main(){
    SwingUtilities.invokeLater(new Runnable(){
        public void run() {
            createGui();
        }
    });

}
public static void main(String[] args){
    w = new Window();
}
public void createGui(){
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.add(w);
    f.pack();
    f.setVisible(true);
    f.setBackground(Color.BLACK);
}
} 
```

编辑 4：Window.java

```
public class Window extends JPanel{
Main m;
ResourceLoader rl;
Image ccground;
Image titlebg;
public Window(){
    rl = new ResourceLoader();
    m = new Main();
    loadImages();
}
public Dimension getPreferredSize(){
    return new Dimension(800, 592);
}
public void loadImages(){
    ccground = rl.retrieveImage("\\Chrysaline Caverns ground tile.png");
    titlebg = rl.retrieveImage("\\Title Screen.png");
}
public void paintComponent(Graphics g){
    g.drawImage(titlebg, 0, 0, null);
    g.setColor(Color.LIGHT_GRAY);
    g.fillRect(300, 250, 300, 50);
    //g.fillRect(400, 400, 300, 50);
    g.drawImage(ccground, 0, 0, null);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:20:47.687

Toolkit.getDefaultToolkit().getImage(url) 是罪魁祸首。该方法*为*您提供了一个尚未加载的图像（在某种程度上是一个空的虚拟对象）。由于您没有做任何事情来确保图像已加载，因此有时会，有时不会。

*确保图像在使用之前完全加载的众多方法之一*是（我所知道的最短的）在使用之前对从 Toolkit 获得的每个图像执行此操作：

新的 ImageIcon(image).getImage();

* * *

编辑：

像这样更改您的retrieveImage，它应该可以工作或清楚地表明未找到该图像：

```
public Image retrieveImage(String x){
    URL y = this.getClass().getResource(x);
    Image img = tk.getImage(y);
    if (img == null)
        throw new IllegalArgumentException("image " + x + " not found");
    return new ImageIcon(img).getImage();
} 
```

# c# - C# - 像 Java 的 Swing 一样布局表单

> ID：11230410
> 
> 赞同：3
> 
> 时间：2012-06-27T15:57:44.103
> 
> 标签：c#, java, winforms, layout-manager

我想开始用 C# 编程（我过去研究过它，我知道它与 Java 有很多相似之处）。

但我在 Java 中喜欢的是用代码布局组件的能力。我非常不喜欢表单设计器，据我所知，Visual Studio 并没有给你这个条件。

我想知道 C# 是否有布局管理器或类似的东西，因为这更适合我的喜好。

TIA，安德烈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:01:03.957

这取决于您使用的用户界面技术。

WPF/Xaml 和 Windows 窗体都可以完全在代码中完成，尽管使用 WPF 有点棘手，因为它确实面向与 Xaml 一起使用。

使用 Windows 窗体，设计人员实际上构建了所​​需的代码（请参阅 form.designer.cs），因此您可以准确地看到“手动”编写此代码需要什么。

对于 WPF，它有点棘手，但仍然可能。 [Charles Petzold 的 WPF 书籍](http://www.charlespetzold.com/wpf/)实际上采用了这种方法，并从构建 WPF 用户界面的代码优先方法开始，然后展示了如何使用标记 (xaml)。话虽如此，Xaml 方法在许多方面都比在代码中做所有事情要好得多，也更灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:09:13.880

有一些方法可以让它的行为类似于在 winforms 中的 Java

*   [DevExpress](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraLayoutLayoutControltopic)有一个布局管理器
*   [CodeProject](http://www.codeproject.com/Articles/14635/Drop-dead-easy-layout-management)有一篇你可以使用的文章
*   还有关于.Net处理布局的不同方式的[文档](http://msdn.microsoft.com/en-us/library/ty26a068.aspx)
*   这是关于布局的[教程](http://zetcode.com/gui/csharpqyoto/layoutmanagement/)
*   还有不同的[面板布局](http://msdn.microsoft.com/en-us/library/ms754152.aspx)

WPF 有几种不同的布局管理器，请参阅[Docs](http://msdn.microsoft.com/en-us/library/bb514628%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:01:15.953

没有人强迫您使用设计器，您可以从头开始对所有内容进行硬编码。不知道谁告诉你你不能用 Visual Studio 做到这一点，但我不会再听那个人的了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T16:15:20.540

在后台为您生成布局代码。您可以检查 myfile.designer.cs 文件中的代码

下图显示了 Visual Studio 中的一些布局：

*   左：布局控件
*   右：像你在 Java 中的 FlowLayout 的例子

![在此处输入图像描述](../Images/21969b6ea42cc54321aa9ac28d30761e.png)

查看为流程布局生成的代码。所以你可以做其他类似的控制，并了解它是如何生成的

```
 this.flowLayoutPanel1 = new System.Windows.Forms.FlowLayoutPanel();
        this.button1 = new System.Windows.Forms.Button();
        this.button2 = new System.Windows.Forms.Button();
        this.button3 = new System.Windows.Forms.Button();
        this.button4 = new System.Windows.Forms.Button();
        this.flowLayoutPanel1.SuspendLayout();
        this.SuspendLayout();
        // 
        // flowLayoutPanel1
        // 
        this.flowLayoutPanel1.Controls.Add(this.button1);
        this.flowLayoutPanel1.Controls.Add(this.button2);
        this.flowLayoutPanel1.Controls.Add(this.button3);
        this.flowLayoutPanel1.Controls.Add(this.button4);
        this.flowLayoutPanel1.FlowDirection = System.Windows.Forms.FlowDirection.LeftToRight;
        //Other directions: BottomUp, RightToLeft, TopDown

        this.flowLayoutPanel1.Location = new System.Drawing.Point(12, 42);
        this.flowLayoutPanel1.Name = "flowLayoutPanel1";
        this.flowLayoutPanel1.Size = new System.Drawing.Size(200, 71);
        this.flowLayoutPanel1.TabIndex = 0; 
```

但设计师会节省你的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T16:10:44.770

查看 System.Windows.Forms 以获取非 Web 内容

System.drawing 和 system.text 也可能很有趣，但大多数 UI 内容都在 system.windows.forms 中。

# php - PHP 在解压缩 GZipped 文件时挂起？

> ID：11230424
> 
> 赞同：2
> 
> 时间：2012-06-27T15:58:40.210
> 
> 标签：php, gzip, pipe, tar, freeze

我正在解压缩一个 .gz 文件并将输出放入`tar`php 中。我的代码看起来像

```
$tar = proc_open('tar -xvf -', array(0 => array('pipe', 'r'), 1 => array('pipe', 'w'), 2 => array('pipe', 'a')), &$pipes);
$datalen = filesize('archive.tar.gz');
$datapos = 0;
$data = gzopen('archive.tar.gz', 'rb');
while (!gzeof($data))
{
    $step = 512;
    fwrite($pipes[0], gzread($data, $step));
    $datapos += $step;
}
gzclose($data);
proc_close($tar); 
```

它工作得很好（tar 提取了几个目录和文件），直到（根据我`$datapos`的）压缩文件的一半多一点，然后脚本将永远卡在这`fwrite($pipes...)`条线上（我等了几分钟让它前进）。

压缩存档为 8425648 字节 (8.1M) 大，未压缩存档为 36720640 字节 (36M) 大。

我在这里可能做错了什么，因为我没有找到任何考虑类似问题的资源？

我在 2.6.32-5-amd64 linux 机器上运行 php5-cli 版本 5.3.3-7+squeeze3（使用 Suhosin 0.9.32.1）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:36:39.193

`1 => array('pipe', 'w')`

您有 tar 在标准输出上为您提供数据（文件名）。您应该清空该缓冲区。（我通常只是阅读它。）

您也可以将其发送到文件中，这样您就不必处理它了。

`1 => array('file', '[file for filelist output]', 'a')`

如果你在 Linux 上，我喜欢这样做

`1 => array('file', '/dev/null', 'a')`

[编辑：一旦输出足够多，它会等你从标准输出读取，这是你挂的地方。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:44:00.723

您的问题是缓冲区之一，就像[@EPB](https://stackoverflow.com/a/11231062/492901)说的那样。清空流缓冲区（例如：在非阻塞模式下使用`fread`on ；或简单地移除开关）。`$pipes[1]``v`

但是我想指出的是，`$datalen`它将包含数据的压缩长度，而`$datapos`将包含未压缩的数据，因为`$step`传递给`gzread`的是*未压缩的长度，以字节为单位读取*。如果要填充`$datalen`实际的未压缩存档大小，请使用以下内容：

```
$info = shell_exec('gzip -l archive.tar.gz');
$temp = preg_split('/\s+/', $info);
$datalen = $temp[6]; // the actual uncompressed filesize 
```

否则，您最终会`$datapos`始终大于`$datalen`.

# jquery - 如何随机化 twitter 引导轮播中的图像？

> ID：11230426
> 
> 赞同：2
> 
> 时间：2012-06-27T15:58:45.173
> 
> 标签：jquery, twitter-bootstrap

我有一系列为轮播加载的图像，效果很好。问题是每次加载页面时，轮播都会从同一张图片开始。

随机化起点的最佳方法是什么，为了获得额外的荣誉，我如何随机化图像序列？

[这是jsFiddle](http://jsfiddle.net/UfVTL/)上的示例设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:29:09.603

这是我想出的。@codemonkey 对随机开始有相同的想法：

```
$('.item').eq(Math.floor((Math.random() * $('.item').length))).addClass("active"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:31:37.903

生成一个随机数（在您的范围内）并动态设置 div 项的“活动”属性，而不是始终将其设置为第一项。

要随机化显示的下一张图像，请再次生成一个随机数并调用`.carousel(number)`以跳转到该图像。

# php - 如何有效地解析两个字符串的字符串？

> ID：11230430
> 
> 赞同：3
> 
> 时间：2012-06-27T15:59:00.040
> 
> 标签：php, string, comparison

如何有效地确定给定字符串是否包含两个字符串？

例如，假设我得到了字符串：`abc-def-jk-l`。该字符串要么包含由 a 分割的两个字符串`-`，要么不匹配。匹配的可能性是：

```
Possible Matches for "abc-def-jk-l" :
abc           def-jk-l
abc-def       jk-l
abc-def-jk    l 
```

现在，这是我要匹配的字符串列：

```
Column I       Column II
-------        -------
1\. abc-def     A. qwe-rt
2\. ghijkl      B. yui-op
3\. mn-op-qr    C. as-df-gh
4\. stuvw       D. jk-l 
```

如何有效地检查给定字符串是否与上列中的两个字符串匹配？（上面是匹配 - 匹配`abc-def`和`jk-l`）

以下是更多示例：

```
abc-def-yui-op   [MATCH - Matches 1-B]
abc-def-zxc-v    [NO MATCH - Matches 1, but not any in column II.]
stuvw-jk-l       [MATCH - Matches 4-D]
mn-op-qr-jk-l    [Is this a match?] 
```

现在，给定上面的字符串，我怎样才能有效地确定匹配？（效率将是关键，因为列 i 和 ii 将在其受尊重的表中的索引列上各有数百万行！）

`UPDATE:`顺序将始终是第 i 列，然后是第 ii 列。（或“不匹配”，这可能意味着它只匹配一列或不匹配）

这里有一些 php 来帮助：

```
<?php

$arrStrings = array('abc-def-yui-op','abc-def-zxc-v','stuvw-jk-l','stuvw-jk-l');

foreach($arrStrings as $string) {
    print_r(stringMatchCheck($string));
}

function stringMatchCheck($string) {

   $arrI = array('abc-def','ghijkl','mn-op-qr','stuvw');
   $arrII = array('qwe-rt','yui-op','as-df-gh','jk-l');

   // magic stackoverflow help goes here!

    if ()
        return array($match[0],$match[1]);
    else
        return false;

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:06:28.357

只需使用 PHP 的`strpos()`. `$arrI`循环直到你在`$string`using中找到一个条目`strpos()`，然后对 . 执行相同的操作`$arrII`。

更多信息`strpos()`： http: [//php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

编辑：

为了帮助您了解我在说什么，这是您的功能：

```
function stringMatchCheck($string) {

    $arrI = array('abc-def','ghijkl','mn-op-qr','stuvw');
    $arrII = array('qwe-rt','yui-op','as-df-gh','jk-l');

    $match = array(NULL, NULL);

    // get match, if any, from first group    
    for ($i=0; $i<count($arrI) && !is_null($match[0]); $i++) {
        if (strpos($string,$arrI[$i]) !== false) {
            $match[0]=$arrI[$i];
        }
    }

    if (!is_null($match[0])) {
        // get match, if any, from second group group    
        for ($i=0; $i<count($arrII) && !is_null($match[1]); $i++) {
            if (strpos($string,$arrII[$i]) !== false) {
                $match[1]=$arrII[$i];
            }
        }
    }

    if (!is_null($match[0]) && !is_null($match[1])) {
        return $match;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:22:31.220

出于效率考虑，与其遍历每列中的每个条目，不如将字符串拆分为尽可能多的不同单词并搜索每个单词组合。基本上你提到的可能匹配。

```
$words = explode("-", $string);
$end = count($words) - 1;

for ( $i = 1; $i < $end; $i++ ) {
    $partOne = array_slice($words, 0, $i);
    $parttwo = array_slice($words, $i);
    $wordOne = implode("-" , $partOne);
    $wordTwo = implode("-" , $partTwo);

    /* SQL to select $wordOne and $wordTwo from the tables */
} 
```

# objective-c - 为什么我不能复制 AVCapture 会话？

> ID：11230432
> 
> 赞同：4
> 
> 时间：2012-06-27T15:59:07.563
> 
> 标签：objective-c, ios, uiview, avcapturesession

我有一个 iOS 应用程序，它使用、 和`AVCaptureSession`捕获`AVCaptureVideoPreviewLayer`设备的相机输入。`CALayer``UIImageView`

问题是，我需要在**两个不同的视图中显示****一个**AVCapture 会话* 。

 **现在，第一个 AVCapture “视图”可以正常工作并显示视频，但第二个显示几毫秒然后冻结（甚至没有渲染完整帧）。

我不确定这是否可行，因为一次只有一个 AVCaptureSession 可以捕获设备的相机输入（据我所知 - 如果不是这种情况，那么它一定是内存问题）。

如何使用相同的 AVCapture Session 在两个不同的视图中显示？

这是我正在使用的代码：

```
//CameraControl.h

#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreGraphics/CoreGraphics.h>
#import <CoreVideo/CoreVideo.h>
#import <CoreMedia/CoreMedia.h>

@interface CameraControl : UIViewController <AVCaptureVideoDataOutputSampleBufferDelegate>
{
    AVCaptureSession *_captureSession;
    UIImageView *_imageView;
    CALayer *_customLayer;
    AVCaptureVideoPreviewLayer *_prevLayer;
}

// The capture session takes the input from the camera and capture it
@property (nonatomic, retain) AVCaptureSession *captureSession;

// The UIImageView we use to display the image generated from the imageBuffer
@property (nonatomic, retain) UIImageView *imageView;
// The CALayer we use to display the CGImageRef generated from the imageBuffer
@property (nonatomic, retain) CALayer *customLayer;
//The CALAyer customized by apple to display the video corresponding to a capture session
@property (nonatomic, retain) AVCaptureVideoPreviewLayer *prevLayer;

// This method initializes the capture session
- (void)initCapture;
@end 
```

现在这里是实现：

```
//CameraControl.m

#import "CameraControl.h"
#import <MobileCoreServices/MobileCoreServices.h>

@interface CameraControl ()

@end

@implementation CameraControl
@synthesize captureSession = _captureSession;
@synthesize imageView = _imageView;
@synthesize customLayer = _customLayer;
@synthesize prevLayer = _prevLayer;

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation = UIInterfaceOrientationPortrait);
    } else {
        return YES;
    }
}
- (id)init {
    self = [super init];
    if (self) {
        /*We initialize some variables (they might be not initialized depending on what is commented or not)*/
        self.imageView = nil;
        self.prevLayer = nil;
        self.customLayer = nil;
    }
    return self;
}

- (void)viewDidLoad {
    /*We intialize the capture*/
    [self initCapture];
}

- (void)initCapture {
    /*We setup the input*/
    AVCaptureDeviceInput *captureInput = [AVCaptureDeviceInput 
                                    deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] 
                                      error:nil];
   /*We setupt the output*/
   AVCaptureVideoDataOutput *captureOutput = [[AVCaptureVideoDataOutput alloc] init];
   /*While a frame is processes in -captureOutput:didOutputSampleBuffer:fromConnection: delegate methods no other frames are added in the queue. If you don't want this behaviour set the property to NO */
   captureOutput.alwaysDiscardsLateVideoFrames = YES; 
   /*We specify a minimum duration for each frame (play with this settings to avoid having too many frames waiting in the queue because it can cause memory issues). It is similar to the inverse of the maximum framerate. In this example we set a min frame duration of 1/10 seconds so a maximum framerate of 10fps. We say that we are not able to process more than 10 frames per second.*/
   //captureOutput.minFrameDuration = CMTimeMake(1, 10);

    /*We create a serial queue to handle the processing of our frames*/
    dispatch_queue_t queue;
    queue = dispatch_queue_create("cameraQueue", NULL);
    [captureOutput setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);
    // Set the video output to store frame in BGRA (It is supposed to be faster)
    NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey; 
    NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA]; 
    NSDictionary* videoSettings = [NSDictionary dictionaryWithObject:value forKey:key]; 
    [captureOutput setVideoSettings:videoSettings]; 
    /*And we create a capture session*/
    self.captureSession = [[AVCaptureSession alloc] init];
    /*We add input and output*/
    [self.captureSession addInput:captureInput];
    [self.captureSession addOutput:captureOutput];
        /*We use medium quality, ont the iPhone 4 this demo would be laging too much, the conversion in UIImage and CGImage demands too much ressources for a 720p resolution.*/
        [self.captureSession setSessionPreset:AVCaptureSessionPresetMedium];
    /*We add the Custom Layer (We need to change the orientation of the layer so that the video is displayed correctly)*/
    self.customLayer = [CALayer layer];
    self.customLayer.frame = self.view.bounds;
    //self.customLayer.transform = CATransform3DRotate(CATransform3DIdentity, M_PI/2.0f, 0, 0, 1);
    self.customLayer.contentsGravity = kCAGravityResizeAspectFill;
    [self.view.layer addSublayer:self.customLayer];
    /*We add the imageView*/
        [self.view addSubview:self.imageView];
    /*We add the preview layer*/
    self.prevLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
    [self.view.layer addSublayer: self.prevLayer];
    /*We start the capture*/
    [self.captureSession startRunning];

}

#pragma mark -
#pragma mark AVCaptureSession delegate
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
{ 
/*We create an autorelease pool because as we are not in the main_queue our code is
 not executed in the main thread. So we have to create an autorelease pool for the thread we are in*/

NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
/*Lock the image buffer*/
CVPixelBufferLockBaseAddress(imageBuffer,0); 
/*Get information about the image*/
uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
size_t width = CVPixelBufferGetWidth(imageBuffer); 
size_t height = CVPixelBufferGetHeight(imageBuffer);  

/*Create a CGImageRef from the CVImageBufferRef*/
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 
CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
CGImageRef newImage = CGBitmapContextCreateImage(newContext); 

/*We release some components*/
CGContextRelease(newContext); 
CGColorSpaceRelease(colorSpace);

/*We display the result on the custom layer. All the display stuff must be done in the main thread because
 UIKit is no thread safe, and as we are not in the main thread (remember we didn't use the main_queue)
 we use performSelectorOnMainThread to call our CALayer and tell it to display the CGImage.*/
[self.customLayer performSelectorOnMainThread:@selector(setContents:) withObject: (id) newImage waitUntilDone:YES];

/*We display the result on the image view (We need to change the orientation of the image so that the video is displayed correctly).
    Same thing as for the CALayer we are not in the main thread so ...*/
    UIImage *image= [UIImage imageWithCGImage:newImage scale:1.0 orientation:UIImageOrientationRight];

    /*We relase the CGImageRef*/
    CGImageRelease(newImage);

    [self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES];

    /*We unlock the  image buffer*/
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    [pool drain];
} 

#pragma mark -
#pragma mark Memory management

- (void)viewDidUnload {
    self.imageView = nil;
    self.customLayer = nil;
    self.prevLayer = nil;
}

- (void)dealloc {
    [self.captureSession release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:51:44.713

为此，您需要将多个**输出**附加到会话，而不是多个会话。引用[AV Foundation 编程指南](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)：

> 要从捕获会话中获取输出，请添加一个或多个输出。
> ...
> 您使用 addOutput: 将输出添加到捕获会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:46:54.560

为什么需要两个会话？如果您说出您要达到的目标，则更容易提出建议。

由于您只有一个摄像头（您不能同时使用背面和正面）和一个麦克风，因此您通常只需要一个会话。拥有两个会话意味着从相机发送两个图像缓冲区，这会给设备带来不必要的压力。

如果您想更改会话中的任何参数，您可以在会话运行时动态地执行此操作：

```
- (IBAction)switchHD:(id)sender {
  [AVsession beginConfiguration];
  if(sender.selectedSegmentIndex){
    session.sessionPreset = AVCaptureSessionPreset1280x720;
    self.prevLayer.videoGravity = AVLayerVideoGravityResizeAspect;
  }else{
    session.sessionPreset = AVCaptureSessionPreset640x480;
    self.prevLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
  }
  [AVsession commitConfiguration]; 
} 
```**

# java - Jikes rvm 运行时错误“找不到类 java.util.Scanner”

> ID：11230433
> 
> 赞同：1
> 
> 时间：2012-06-27T15:59:10.170
> 
> 标签：java, compiler-errors, jikes

当我使用 Jikes rvm 运行我的程序“GenRegex.class”时，

```
jikesrvm-3.1.2/dist/production_x86_64-linux/rvm GenRegex 语法/cfg_nse.g

```

我得到了运行时错误：

```
线程“MainThread”中的异常 java.lang.NoClassDefFoundError：找不到类 java.util.Scanner：
        java.util.Scanner
   在 java.lang.Error.(Error.java:81)
   在 java.lang.LinkageError.(LinkageError.java:72)
   在 java.lang.NoClassDefFoundError.(NoClassDefFoundError.java:74)
   在 org.jikesrvm.classloader.TypeReference.resolveInternal(TypeReference.java:813)
   在 org.jikesrvm.classloader.TypeReference.resolve(TypeReference.java:799)
   在 org.jikesrvm.runtime.RuntimeEntrypoints.unresolvedNewScalar（RuntimeEntrypoints.java:264）
   在 GenRegex.genRule(GenRegex.java:12)
   在 GenRegex.main(GenRegex.java:1133)

```

下面是我的代码

```
   1 导入 java.util.*；
   2 导入java.io.*；
   3
   4 公共类 GenRegex{
   5
   6 Rule[] genRule(String fileName) 抛出 IOException
   7 {
   8 字符串行 = "";
   9 字符串 str = "";
  10 ArrayList ruleList = new ArrayList();
  11 规​​则[] 规则数组；
  12 扫描仪扫描仪=新扫描仪（新文件输入流（文件名））；

```

即使我添加了一行“import java.util.Scanner;” 我仍然犯了这个错误。有什么线索吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:41:46.760

最后，我在 Jikes RVM 中发现了一些令人失望的信息**“java.util.Scanner is unimplemented”**，至少在 3.0.1 版本中。

见此链接： http: [//lwn.net/Articles/303938/](http://lwn.net/Articles/303938/)

```
Jikes RVM 3.0.1 发布
...
** 漏洞
* [RVM-172] - PPC 32 OS X 上的 DaCapo 基准测试失败
* [RVM-288] - 内联 oracle 中的断言失败
* [RVM-318] - java.util.Scanner 未实现  
...

```

对于当前版本 3.1.2，我不确定。

# c++ - 如何判断在 Windows Mobile 6.5 (c++) 中何时按下某个键

> ID：11230440
> 
> 赞同：0
> 
> 时间：2012-06-27T15:59:39.727
> 
> 标签：c++, windows, mobile, keypress

我正在编写一个 Windows 移动应用程序，并希望能够响应用户的按键操作。应用程序中有一些地方我想等待按键继续。前任。

“按任意键继续...”

我怎么能在 C++ 中实现这一点？我在想类似的事情：

```
MessageBox("Press any key to continue...");

while(isntPressed){
    if(a key is pressed){
        isntPressed=false;
    }
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:38:49.853

你看过这个链接吗：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(v=vs.80).aspx)

您可以使用`KeyPress`or`KeyDown`事件。

# php - 在 php 中，如何从另一个类中的另一个类调用函数？

> ID：11230441
> 
> 赞同：5
> 
> 时间：2012-06-27T15:59:43.070
> 
> 标签：php, oop

如何从另一个类中的另一个类调用函数？

这是我当前的代码：

```
 <?php

    class database
    {
        private $host = "localhost";
        private $user = "root";
        private $password = "";
        private $db = "9dot";

        //connect to database
        public function connect()
        {
            $connect =  mysql_connect($this->host,$this->user,$this->password);
            $database = mysql_select_db($this->db,$connect);

        }

        //Get exam headers
        public function GetExam()
        {
            $this->connect();
            $select = "SELECT e.ExamHeaderID, CONCAT(e.Firstname,' ',e.Lastname) AS Fullname e.Age, e.Position, e.Date FROM examheader e";
            $result = mysql_query($select);
            $table = "";
            $table .= "<th>ExamID</th>";
            $table .= "<th>Name</th>";
            $table .= "<th>Age</th>";
            $table .= "<th>Position</th>";
            $table .= "<th>Date</th>";

            $exam_id = "";
            $fullname = "";
            $age = "";
            $position = "";
            $date = "";
            while($row = mysql_fetch_array($select))
            {
                $exam_id = mysql_real_escape_string($row['ExamHeaderID']);
                $fullname = mysql_real_escape_string($row['Fullname']);
                $age = mysql_real_escape_string($row['Age']);
                $position = mysql_real_escape_string($row['Position']);
                $date = mysql_real_escape_string($row['Date']);
            }

        }

        public function GetExamDetails($ExamID)
        {
            $this->connect();
            //$select = "SELECT ed.ExamDetailsID, ed.";
        }

        //Save Exam header
        public function SaveExam($firstname,$lastname, $age, $position)
        {
            $this->connect();
            $date = date("m/d/Y");
            mysql_real_escape_string($firstname);
            mysql_real_escape_string($lastname);
            mysql_real_escape_string($age);
            mysql_real_escape_string($position);
            $insert = "INSERT INTO examheader (Firstname,Lastname, Age, Position, Date) VALUES ('$firstname','$lastname','$age','$position')";
            $result = mysql_query($insert);
            $exam_id = mysql_insert_id();
            //return exam id for insertion of exam details
            return $exam_id;

        }

        public function SaveExamAnswer()
        {

        }

    }

?>

<?php

include 'database.php';
$database = new $database();

class department
{
    $database->//property or function
}

?> 
```

如何从数据库类调用函数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T16:07:37.890

您可以在部门类中声明数据库实例，如下所示：

```
class department
{
    public function __construct() 
    {
        $database = new database();
        $database->someFunction();
    }
} 
```

如果您不想直接在您的部门类中使用它，您可以使用`global`系统声明它，假设包含所需的文件，如下所示：

```
include 'database.php'

$database = new database();

class department
{
    public function __construct() 
    {
        global $database;
        $database->someFunction();
    }
} 
```

请参阅[PHP：变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:03:38.987

您可以扩展它们。

```
class department extends database {
    function test() {
        $this->getdbfunction();
    }
} 
```

或者你把它们交给构造函数：

```
class department {
    private $db;

    public function __construct(Database db) {
        $this->db = $db
    }
}

$department = new department($database); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T16:05:35.577

您可以定义一个属性，它是第一个类的实例，然后将方法应用于第二个类示例中定义的属性：

```
class A {
function a () {
}
...
}

class B {
$attClassA;
function __construct(A objA) {
$this->attClassA = objA;
}
// you can use the attClassA in any class you want and then apply the chosen method
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T16:01:53.317

尝试这样的事情（粗略的例子）：

```
<?php

include 'database.php';

class department
{

    public function doSomething() {
       $database = new $database();
       $val = $database->GetExam();
       //do something
    }
}

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T16:03:47.060

创建一个“数据库”类型的对象，然后使用它调用该方法：

```
$database = new database();
$connection = $database->connect(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-28T12:56:45.550

**你可以这样做：**

如果您不想手动包含 PHP 文件，请使用 spl_autoload_register() 函数，否则您需要包含具有要从中导入方法的类的 PHP 文件。

file-A.php - 包含 A 类的 PHP 文件

```
<?php

class A{

   function DoSquare($x){
      return $x*$x;
    }

}

?> 
```

* * *

file-B.php - 包含 B 类的 PHP 文件

假设您正在使用 spl_autoload_register()：

```
<?php

class B{

   private $ObjectA = NULL;

   public function __construct(){
        $this->ObjectA = new A();
    }

   public function PrintSquare($x){
       echo $this->ObjectA->DoSquare($x);      
   }

}
?> 
```

如果手动包含 PHP 文件：

```
<?php

require("file-A.php");

class B{

   private $ObjectA = NULL;

   public function __construct(){
        $this->ObjectA = new A();
    }

   public function PrintSquare($x){
       echo $this->ObjectA->DoSquare($x);      
   }

}
?> 
```

# mysql - 使用 str_to_date 转换日期格式

> ID：11230444
> 
> 赞同：0
> 
> 时间：2012-06-27T15:59:58.330
> 
> 标签：mysql, date-format

在我的 Mysql 数据库表之一中，日期以 31-Jan-05 格式存储。在将它们插入其他表之前，我正在尝试将此格式转换为 2005-01-31。我已经尝试过这种方式`str_to_date(exam_date, '%d%M%Y')`，但遇到以下错误

```
Incorrect datetime value: '31-Jan-05' for function str_to_time 
```

我不能使用 str_to_date 将日期格式从 31-Jan-05 更改为 2005-01-31 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:02:41.367

是的。但是你有两个问题。

1.  第二个参数是*当前*日期格式。（即字符串）
2.  您需要具有正确的格式（即`%b`，而不是`%M`）。

阅读[文档 for`str_to_date()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)。

```
str_to_date(exam_date, '%d-%b-%y') 
```

**注意：**如果您没有零填充日，那么您需要使用`%e`而不是`%d`.

# iphone - iOS：有效的邮政编码检查

> ID：11230446
> 
> 赞同：2
> 
> 时间：2012-06-27T16:00:05.713
> 
> 标签：iphone, ios, regex, ipad, zipcode

**问题：**如何编写一个函数来检查并返回字符串（NSString）是否包含全球有效的邮政编码。

**附加信息：**我知道 iOS 中的 RegEx。但是我不是很流利。请记住，这应该接受在任何国家/地区有效的任何内容。

**例子**

美国 - “10200”

美国 - “33701-4313”

加拿大 - “K8N 5W6”

英国 - “3252-322”

等等

**编辑：**那些投票否决或关闭问题的人，请务必说明原因。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:07:45.067

`^[ABCEGHJKLMNPRSTVXY]\d[A-Z][- ]*\d[A-Z]\d$`

匹配带或不带空格的加拿大邮政编码格式（例如，“T2X 1V4”或“T2X1V4”）

* * *

`^\d{5}(-\d{4})?$`

匹配所有美国格式的邮政编码格式（例如，“94105-0011”或“94105”）

* * *

`(^\d{5}(-\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]\d[A-Z][- ]*\d[A-Z]\d$)`

匹配上述格式的美国或加拿大代码。

* * *

英国代码比您想象的要复杂：[http ://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom](http://en.wikipedia.org/wiki/Postcodes_in_the_United_Kingdom)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:22:27.080

我建议你不要这样做。我见过许多网站试图强制执行邮政编码，但我从未见过一个做得对的。甚至名称**邮政编码**也是美国特有的。

换句话说：

```
- (BOOL)isValidZipCode: (NSString *)zip {
    return YES;
} 
```

我本来打算写`[zip length] > 0`的，但当然即使这样也不能保证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T16:16:23.177

每个使用邮政编码/邮政编码的国家通常都有自己的格式。您将很难找到匹配**任何**全球代码的正则表达式！

您最好添加一个国家/地区选择器来确定用于验证邮政编码的正则表达式（如果有）。

顺便说一句，您作为英国示例提供的邮政编码不正确。一个体面的英国正则表达式是：

```
^(^gir\\s0aa$)|(^[a-pr-uwyz]((\\d{1,2})|([a-hk-y]\\d{1,2})|(\\d[a-hjks-uw])|([a-hk-y]\\d[abehmnprv-y]))\\s\\d[abd-hjlnp-uw-z]{2}$)$ 
```

# typo3 - 打字稿将 page:id 分配给插件属性

> ID：11230447
> 
> 赞同：0
> 
> 时间：2012-06-27T16:00:07.233
> 
> 标签：typo3, typoscript

所以我真正想做的就是

```
plugin.tx_felogin_pi1.redirectPageLogin = page:id 
```

其中 page:id 是当前页面的 PID。用数字替换 'page:id' 可以按预期工作，但我确实需要 PID 而不是固定数字。欢迎任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:25:27.643

redirectPageLogin 必须是单个 int 值：

```
$redirect_url[] = $this->pi_getPageLink(intval($this->conf['redirectPageLogin'])); 
```

替代方案：用作 $redirMethod: getpost 或 referer 我认为这适合四个你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:30:21.327

尝试

```
plugin.tx_felogin_pi1.redirectPageLogin = TSFE:id 
```

或者

```
plugin.tx_felogin_pi1.redirectPageLogin = {TSFE:id} 
```

或者

```
plugin.tx_felogin_pi1.redirectPageLogin.cObject = TEXT
plugin.tx_felogin_pi1.redirectPageLogin.cObject.insertData = 1
plugin.tx_felogin_pi1.redirectPageLogin.cObject.value = {TSFE:id} 
```

# xml - 如何订购 XML 查询？

> ID：11230450
> 
> 赞同：0
> 
> 时间：2012-06-27T16:00:14.067
> 
> 标签：xml, stored-procedures, ssms

我在 SSMS 2008 R2 中有一个基于存储过程的 XML 查询。我刚刚了解了这种在 SSMS 中运行 XML 代码的酷方法，如下所示。没想到这么简单！但是，是否有一种简单的方法可以修改此 XML 查询，以便它根据我选择的任何列重新排序结果？我尝试用不同的列替换第 12 行，但这并没有改变顺序。

```
rpt_vacancy '<parameter_set>
<parameter name="AGENCYID" type_code="FK" value="{B233233B-6CB1-4C45-99E8-B99CB4FF8C74}" scrnval_id="" show="false">
</parameter>
<parameter name="AGENCYNAME" type_code="FK" value="Youth Villages" scrnval_id="" show="false">
</parameter>
<parameter name="ISMULTIAGENCY" type_code="L" value="0" scrnval_id="" show="false">
</parameter>
<parameter name="WORKERID" type_code="FK" value="A10EF9F9-DCF6-4B84-87F3-9988C66F2423" scrnval_id="" show="false">
</parameter>
<parameter name="REPORT_CODE" type_code="FK" value="VACANCY" scrnval_id="" show="false">
</parameter>
<parameter scrnval_id="" name="SUB_TITLE" type_code="S" show="false" value="Order by: Managing Office"/>
<parameter scrnval_id="" name="agency" type_code="FK" value="{B233233B-6CB1-4C45-99E8-B99CB4FF8C74}" descript="Youth Villages" show="true"/>
<parameter scrnval_id="" name="min_age" descript="Min Age ( Greater than or Equal to )" type_code="N" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="max_age" descript="Max Age ( Less than or Equal to )" type_code="N" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_suppr_units" descript="Suppress Units Totals" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_suppr_members" descript="Suppress Printing of Members" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_suppr_clients" descript="Suppress Printing of Clients Placed" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_beds_avail" descript="Homes with Available Beds" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_male_accept" descript="Accepts Male - Entry on Unit" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_female_accept" descript="Accepts Female - Entry on Unit" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter scrnval_id="" name="is_accept" descript="Currently Accepting Placements" type_code="L" report_parameter="1" is_not_in="" value="" show="false"/>
<parameter type_code="FK" show="true" name="Managing Office" scrnval_id="89457190-16A6-428C-9A77-682886169FEF" is_not_in="" value="4053DB39-0777-4BA2-B3D3-5A4170E343C4" descript="Jackson, MS">
</parameter>
<parameter type_code="FK" show="true" name="" scrnval_id="" is_not_in="" value="" descript="">
</parameter>
</parameter_set>
' 
```

请注意，rpt_Vacancy 是一个存储过程

# jquery - 附加 li 带有自定义点击事件的链接

> ID：11230451
> 
> 赞同：2
> 
> 时间：2012-06-27T16:00:14.350
> 
> 标签：jquery

我正在尝试将 li 元素附加到具有自定义单击事件的链接的列表中......我正在尝试类似的东西：

```
<div id="myid"><ul></ul></div>

$('#myid ul').append("<li><a href=''>Link</a></li>").click(function(){alert('hi')}) 
```

但是点击事件是在**li**而不是**a href**上。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T16:03:55.660

实际上，click 事件处理程序绑定到`ul`元素。

> 我该如何解决？

将其绑定到`a`元素：

```
$("<li><a href=''>Link</a></li>").find('a').click(function(event) {
    event.preventDefault(); // <-- if you don't want the browser follow the link
    alert('hi');
}).end().appendTo('#myid ul'); 
```

[**演示**](http://jsfiddle.net/fkling/X6KSG/)

不过，单独创建链接可能会更干净：

```
$('<a />', {
    text: "Link",
    href: "",
    click: function() {/*...*/}
}).wrap('<li />').parent().appendTo('#myid ul'); 
```

有关所用方法的信息可以在[jQuery API 文档](http://api.jquery.com/)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:03:46.727

您可以使用`.on`，因为您的 li 是即时附加的

```
 $('#myid ul').append('<li id="li1"><a href=''>Link</a></li>');

    $('body').on('click','#li1',function(){
         alert('hi');
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:04:00.813

```
$('#myid ul').append("<li><a href=''>Link</a></li>");

$("a").live("click", function() { // or use on(...)
    alert('hi');
}); 
```

在附加后将点击实时绑定到 a 元素。Jsfiddle在这里：http: [//jsfiddle.net/reygonzales/Z5pSC/](http://jsfiddle.net/reygonzales/Z5pSC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:05:09.077

```
$('#myid ul').append("<li><a href=''>Link</a></li>")
     .find("a:last").click(function(){
         alert('hi')
})​​​​; 
```

# jquery - IE8 jQuery 正在缩短下拉列表宽度大小

> ID：11230460
> 
> 赞同：0
> 
> 时间：2012-06-27T16:00:36.640
> 
> 标签：jquery, css, internet-explorer

所有，我有以下网址： [http ://tinyurl.com/7fsbuhz](http://tinyurl.com/7fsbuhz)

如果单击事件类型，您将看不到所有选项，因为 IE8 正在缩短下拉列表的宽度。我为此使用了一个自定义主题，它应用了一些来自 jQuery 的 CSS，我不确定它为什么会缩短宽度。任何人都可以帮助为什么它会缩短字段的宽度？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:05:06.107

我知道 IE8 有一个有据可查的错误，并且选择不使选项比初始列表更宽。

[http://css-tricks.com/select-cuts-off-options-in-ie-fix/](http://css-tricks.com/select-cuts-off-options-in-ie-fix/)

这应该可以帮助你

另外，我什至无法让您的下拉菜单在 Firefox 13 中运行

# sql - 在单个命令中有条件地更新表的多个列

> ID：11230465
> 
> 赞同：12
> 
> 时间：2012-06-27T16:00:44.397
> 
> 标签：sql, postgresql, sql-update

我有一个包含列`name`和`client_name`的表`requester_name`。我需要将这些列的值从“Mic”更新为“Michael”。

以下是一些需要更新的记录：

```
name  | client_name |  requester_name
------+-------------+----------------
Mic   | Jerry       | Jack
Jack  | Mic         | Mic
Jerry | Jack        | Mic 
```

我尝试了以下查询：

```
UPDATE names
SET name='Michael', client_name='Michael', requester_name='Michael'
WHERE name='Mic' OR client_name='Mic' OR requester_name='Mic'; 
```

此查询使所有列的所有名称都更改为“Michael”。
查询应该是什么样子才能仅在适用的情况下应用更改？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-27T17:50:56.087

添加一个`WHERE`子句是明智的。

```
UPDATE names
SET    name = CASE WHEN name = 'Mic' THEN 'Michael' ELSE name END
      ,client_name = CASE WHEN client_name = 'Mic' THEN 'Michael'
                     ELSE client_name END
      ,requester_name = CASE WHEN requester_name = 'Mic' THEN 'Michael'
                        ELSE requester_name END
WHERE 'Mic' IN (name, client_name, requester_name); 
```

否则，整个表将无条件更新。将值更改为相同值的更新仍然是创建死行、触发触发器等的更新。虽然生成的行不会出错，但它仍然会使表膨胀到两倍大小，这`VACUUM`是必要的，而且通常非常慢。

顺便说一句，这两种形式的`CASE`陈述都很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T16:21:40.080

不是很优雅，不是很高效，但在一个查询中：

```
UPDATE names SET 
name =  CASE  name 
    WHEN 'Mic' THEN 'Micheal' ELSE name END,
client_name = CASE  client_name 
    WHEN 'Mic' THEN 'Micheal' ELSE client_name END,
requester_name= CASE  requester_name 
    WHEN 'Mic' THEN 'Micheal' ELSE requester_name END ; 
```

[这使用CASE](http://www.postgresql.org/docs/9.0/static/functions-conditional.html)的缩写~~（Postgresql 特定）~~语法。

（顺便说一句：我猜你的意思是“迈克尔”而不是“迈克尔”？）

# html - IE中固定元素和液体元素之间的额外空间

> ID：11230466
> 
> 赞同：0
> 
> 时间：2012-06-27T16:00:45.550
> 
> 标签：html, css, internet-explorer, fixed, liquid-layout

我正在设置一个非常简单的固定液体布局。header 设置为 100%，sidebar 设置为固定宽度并浮动到左侧，内容区域的宽度未定义（使其填满剩余空间）。

它适用于除 IE 之外的所有浏览器，其中在侧边栏和内容区域之间添加了大约 3 像素的空白。

我无法在 JSFiddle 中重现该问题（即使我复制并粘贴了我的确切代码），所以我附上了图像。第一个图像在 Chrome 中渲染，第二个在 IE9 中渲染。

![铬合金](../Images/1c965b10707ef526bfdb814d8c27b56c.png) ![IE9](../Images/5bec8c28c654c68e36c55688d980bcd1.png)

**CSS** (样式.css)

```
body {
    margin: 0px;
}
#header {
    width: 100%;
    height: 150px;
    background: #F00;
}

#sidebar {
    float: left;
    width: 280px;
    height: 1000px;
    background: #0F0;
}

#content {
    height: 1000px;
    background: #00F;
} 
```

**HTML**

```
<html>
<head>
    <link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div id="header"></div>
    <div id="sidebar"></div>
    <div id="content"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:14:53.193

您是否尝试过添加 doctype 声明？

```
<!DOCTYPE html>
  <html lang="en">
    <head>
      <link href="styles.css" rel="stylesheet" type="text/css">
    </head>
    <body>
      <div id="header"></div>
      <div id="sidebar"></div>
      <div id="content"></div>
    </body>
   </html> 
```

# jquery - jQuery定时重复幻灯片

> ID：11230468
> 
> 赞同：1
> 
> 时间：2012-06-27T16:00:54.750
> 
> 标签：jquery, timer, slideshow

下面的代码正确地将第一张图片交换到第二张图片，但不会继续到 3 和 4 并重新开始。

```
= function () {

    var $active = $('#challengeTwoImageJq .carouselImagejQueryActive');
    var $next = ($('#challengeTwoImageJq .carouselImagejQueryActive').next().length > 0) ? $('#challengeTwoImageJq .carouselImagejQueryActive').next() : $('#challengeTwoImageJq img:first');
    timer = setInterval(function () {

        $active.removeClass('carouselImagejQueryActive');
        $next.fadeIn().addClass('carouselImagejQueryActive');

    }, 3000);

    timer = setInterval('challengeTwoJquery()', 3000);

} 
```

HTML

```
<div id='challengeTwoImageJq' class='sectionChallengeCarouselImage'>
    <img id='imgq1' imgn='1' class='carouselImage carouselImagejQueryActive' src='img/image1.jpg'/>
    <img id='imgq2' imgn='2' class='carouselImage' src='img/image2.jpg'/>
    <img id='imgq3' imgn='3' class='carouselImage' src='img/image3.jpg'/>
    <img id='imgq4' imgn='4' class='carouselImage' src='img/image4.jpg'/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:38:52.510

如果您只是想让它们显示/循环，您可以这样做：

```
function runem() {
    var allofEm = $('#challengeTwoImageJq img');
    var $active = allofEm.eq(0);
    $active.show();
    var $next = $active.next();
    var timer = setInterval(function() {
        $next.fadeIn();
        $active.hide();
        $active = $next;
        $next = (allofEm.last().index() == allofEm.index($active)) ?
            $next = allofEm.eq(0):$active.next();

    }, 3000);
}
runem(); 
```

不过，您也许可以将其简化一些。除非你真的想要它，否则你不需要这个功能。

编辑：为了清楚起见，我在一开始就假设这个 CSS：

```
#challengeTwoImageJq img {display:none;} 
```

在这里看到它的实际效果：http: [//jsfiddle.net/8Mp7T/](http://jsfiddle.net/8Mp7T/)

# ruby-on-rails-3 - 多个 Rails ORM

> ID：11230473
> 
> 赞同：5
> 
> 时间：2012-06-27T16:01:17.950
> 
> 标签：ruby-on-rails-3, mongodb, activerecord, orm, neo4j

我们有一个 Rails 3 应用程序，其**PostgreSQL**数据库（大约 10 个表）映射为`activerecord`. 一切正常。

但是，我们也可以使用：

*   一个**MongoDB**数据库，用于存储图像（可能使用`mongoid`gem）。
*   **Neo4j**数据库（可能带有gem `neo4j-rails`）而不是某些表的 PostgreSQL。

使用带有一个 Rails ORM 的数据库很简单，感谢`database.yml`. 但是当有多个 ORM 时，我们如何处理呢？有什么好的方法吗？例如，ActiveHash（和 ActiveYaml）可以很好地与 ActiveRecord 配合使用。我认为有可能让不同的 ORM 一起工作。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T01:36:46.903

这实际上取决于 ORM 的类型。一个很好的方法是使用继承。例如，您可以在 database.yml 文件中定义多个数据库和适配器。您可以使用 ActiveRecord 建立连接方法轻松地与这些对话。

```
# A typical Active record class
class Account < ActiveRecord::Base
  ...
end

# A new database connection
class NewConnection < ActiveRecord::Base
  self.abstract_class = true
  establish_connection "users_database"
end

# A new Active record class using the new connection
class User < NewConnection
  ...
end 
```

*这里唯一的缺点是，当您连接到多个活动记录数据库时，迁移可能会有点冒险。*

**混合ORM**

混合 ORMS 很容易。例如 mongodb（使用 mongoid），简单地不要从活动记录继承，并在要使用 mongo 的模型中包含以下内容：

```
class Vehicle
  include Mongoid::Document

  field :type
  field :name

  has_many :drivers
  belongs_to :account

end 
```

*建立在活动模型之上的 ORM 可以很好地协同工作。例如，使用 mongoid，您应该能够定义与 ActiveRecord 模型的关系，这意味着您不仅可以拥有多个数据库，而且它们可以通过活动模型轻松通信。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T22:22:41.723

首先，我强烈建议您*不要*尝试在同一个应用程序中拥有多个 ORM。不可避免地，您会希望您的 Mongoid 对象以某种方式与您的 ActiveRecord 对象“关联”。还有一些方法（见下文）......但所有这些最终都会导致痛苦。

如果您认为您“需要”这样做，您可能做错了什么。为什么需要 MongoDB 来存储图像？如果您只是将它用作图像存储，为什么需要 Mongoid 或其他一些 ORM（或更准确地说，ODM）？如果你真的，真的需要添加第二个数据存储和第二个 ORM/ODM，你能把它作为一个单独的应用程序分离出来，并从你的第一个应用程序中调用它作为服务吗？好好想想这个。

也就是说，如果您真的想使用“多语言持久性”（不是我的术语），那么有一个不错的宝石：[https](https://github.com/jwood/tenacity) ://github.com/jwood/tenacity 。它不再积极开发，但维护者确实修复了错误并快速响应查询和拉取请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T21:12:00.810

好吧，我今天使用 neo4j gem 遇到了同样的问题。我在 application.rb 中添加了 require 'active_graph/railtie'。

因此，当我想使用 ActiveGraph 生成模型时，我使用：rails generate model Mymodel --orm active_graph，使用 --orm 选项可以指定要使用的 orm。

如果没有 --orm 选项，默认情况下它将使用 AR。

# ios - XCode 无法识别 IOS 分发证书

> ID：11230475
> 
> 赞同：1
> 
> 时间：2012-06-27T16:01:22.260
> 
> 标签：ios, xcode, cocoa-touch, certificate

我是开发团队的成员，团队管理员向我发送分发证书以签署应用程序并发送给他，我将其安装到钥匙串中但 XCode 无法识别证书，在管理器中有未找到有效签名身份的信息，什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:03:18.107

您需要团队管理员的私钥。生成证书的人将在其钥匙串中拥有私钥。他们需要将其导出并将其与证书一起发送给您。

# database - 忽略数据库 Spring Roo 中的字段

> ID：11230478
> 
> 赞同：3
> 
> 时间：2012-06-27T16:01:28.123
> 
> 标签：database, json, spring, entity, spring-roo

我有一个我目前正在构建的 spring roo Web 服务，但我有一个包含不应包含在数据库中的字段的实体。

我希望该字段位于实体中并使用 JSON 将其打印到字符串方法，但我不需要保存该值。是否有任何注释或技巧可以实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:11:19.567

Spring Roo 使用 JPA 进行持久化。您想将该字段标记为[@Transient](http://docs.oracle.com/javaee/5/api/javax/persistence/Transient.html)：

```
@RooJavaBean
@RooEntity
class MyEntity {

    private String column1;

    @Transient
    private String ignoreMe; // Ignore this field in JPA

} 
```

您还可以对原本会被映射的 bean*方法使用相同的注解：*

```
@RooJavaBean
@RooEntity
class MyEntity {

    private String column1;

    @Transient
    private String getAsJSON() {
        return JSONHelper.toJSON(column1);
    }

} 
```

# c# - 是否可以在客户端使用 silverlight c# 或 javascript 运行 exe 文件？

> ID：11230480
> 
> 赞同：0
> 
> 时间：2012-06-27T16:01:43.617
> 
> 标签：c#, javascript, silverlight, exe

是否可以使用 Silverlight 在客户端运行 .exe 文件。

或使用 javascript 或其他东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:05:43.990

假设您的意思是从远程域的上下文中，绝对不是。想一想通过这种机制传播病毒的难易程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:11:53.847

一般不会 - 这将是一个巨大的安全漏洞。

使用插件或 ActiveX 组件（在 Internet Explorer 中）的特定浏览器可能会添加这样的功能 - 但是这会使浏览器非常暴露。

另请参阅[-](https://stackoverflow.com/questions/1791511/run-exe-from-client-side)如果您想从浏览器启动您可以控制的应用程序，其中一个答案建议一个聪明的技巧：让应用程序安装程序将文件扩展名与其 EXE 相关联，然后从浏览器下载一个虚拟具有该扩展名的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:52:00.037

是的，但不是无缝的，也不是跨浏览器浏览器是专门为防止这种事情而设计的，但是......

您可以通过 activex javascript 在 Internet Explorer 中执行此操作

```
function runApp() 
{ 
    var shell = new ActiveXObject("WScript.shell"); 
    shell.run("notepad.exe", 1, True); 
} 
```

您也许可以通过带有 firefox 和 chrome 的插件来做到这一点，但我不知道，如果您做不到，我也不会感到惊讶

# c++ - c++ 高效的数据结构，用于附加数据并覆盖？

> ID：11230481
> 
> 赞同：0
> 
> 时间：2012-06-27T16:01:46.330
> 
> 标签：c++, algorithm

我想要一些容器，我可以非常有效地附加可变数量的元素，但能够触发一些东西，这样我就可以从头开始覆盖。使用 a`std::list`它看起来像这样：

```
while(whatever)
{
    for(int i = 0; i < randNumber; ++i)
        list.push_back( foo() );
    //now want to reset
    list.clear();
} 
```

问题是`list.clear()`线性时间，而我真的很想回到开始并从那里开始覆盖......我尝试使用矢量`vector[index++] = foo()`并将清除替换为`index = 0`但你无法预测`randNumber`所以这不起作用......什么可以我用它来实现这个？

顺便说一句，即使我有一个微不足道的析构函数，向量 clear 似乎也不是恒定的时间：

```
struct rat
{
    rat(int* a, int* b) : a_(a), b_(b) {}

    int *a_;
    int *b_;
};

int main(int argc, char **argv)
{
    uint64_t start, end;

    int k = 0;
    vector<rat> v;
    for (int i = 0; i < 9000; ++i)
        v.push_back(rat(&k, &k));

    start = timer();
    v.clear();
    end = timer();

    cout << end - start << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:21:50.950

只需在您的代码中替换`std::list`for即可。将根据需要增加大小，并从容器中删除所有元素。注意：容器的大小需要线性时间，但操作是销毁存储的元素（如果它们具有非平凡的析构函数），无论如何您都需要这样做。对于具有琐碎析构函数的类型，表现为恒定时间操作。`std::vector``push_back``clear``std::vector<>::clear()``std::vector<>::clear()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:09:54.433

你有上限`randNumber`吗？如果是这样，您可以使用它`std::vector::reserve()`来加快速度。这样，您将在 O(1) 中追加并在 O(1) 中删除。

笔记！如果向量包含具有非平凡析构函数的数据类型，`clear`则采用 O(n)。但是，如果析构函数很简单，`clear`则需要 O(1)。

来自 stl_constructor.h 的评论：

```
/**
 * Destroy a range of objects.  If the value_type of the object has
 * a trivial destructor, the compiler should optimize all of this
 * away, otherwise the objects' destructors must be invoked.
 */ 
```

# reporting-services - Reporting Services Cscading 参数刷新

> ID：11230484
> 
> 赞同：6
> 
> 时间：2012-06-27T16:01:48.780
> 
> 标签：reporting-services, reportingservices-2005

我用谷歌搜索了很多，发现通常无法完成。我在这里遇到了其中一个黑客：

[http://www.bp-msbi.com/2011/04/ssrs-cascading-parameters-refresh-solved/](http://www.bp-msbi.com/2011/04/ssrs-cascading-parameters-refresh-solved/)

但它在 ssrs 2005 中对我不起作用。只是想知道是否有人在 2005 年尝试过它。或者是否有任何其他可以尝试的黑客。

根据本文，依赖参数仅在其值被第一个参数中的选择无效时才会刷新。如果我们可以在每次参数更改时使相关参数无效，我们将强制执行完全刷新。一种简单的方法是附加一个值，例如使用 NEWID() T-SQL 函数获得的 GUID。

所以基本上我们想在两个真实参数之间引入一个假参数。这个假参数应该每次都返回新值，因为它后面的存储过程会在每次调用 proc 时向结果集添加一个 guid。所以它强制完全刷新其他参数。

现在我面临的主要问题是：

设置此假参数的默认值。对于可用值，伪参数后面的存储过程会运行，并以以下格式返回数据：result1,result2_GUIDFROMSQL

现在看起来如果我要求它从查询中获取默认值，则再次调用相同的存储过程来设置默认值。但是随着存储过程再次运行，新的 guid 来了，因此无法找到旧值，因此它没有按需要设置。

我只需要找出一种机制来将这个 guid 从引入的参数传递到下一个参数。

那就是我失败的地方。

我的问题可以通过创建一个数据源是这个查询字符串的参数来简单地复制。

```
select getdate() id, @name nid 
```

所以在这种情况下如何为这个参数设置一个默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-27T21:06:37.157

下面我将介绍一个详细的场景，然后我将展示基于 Visser 和 Abbi 的答案的示例实现。

想象一下，我有一份报告，其中每一行都是一个项目。一个项目有一个状态列，其值为“进行中”或“完成”，还有一个项目经理列，其值为一个人的姓名。以下是表中的行：

*   项目 A（状态 = 进行中，项目经理 = Bob）
*   项目 B（状态 = 进行中，项目经理 = Tom）
*   项目 C（状态 = 完成，项目经理 = Jack）
*   项目 D（状态 = 完成，项目经理 = Tom）
*   项目 E（状态 = 完成，项目经理 = Jill）

我想在我的报告中有 2 个参数

1.  **显示已完成的项目？**- 这是一个布尔参数
    *   何时`false`仅显示“进行中”项目 A 和 B
    *   `true`除了“完成”项目 C、D 和 E 之外，何时将显示“进行中”项目 A 和 B。
2.  **项目经理**- 这是一个多值文本参数，其选项和默认值需要根据“**显示已完成项目？”进行更改？**它所依赖的参数。
    *   如果**显示已完成的项目？**设置为`false`只有“Bob”和“Tom”选项才会显示，因为它们分别是正在进行的项目 A 和 B 的项目经理。
    *   如果**显示已完成的项目？**设置为`true`then 除了“Bob”和“Tom”之外，您还将有“Jack”和“Jill”作为选项显示，因为它们分别是非活动项目 Project C 和 Project E 的项目经理。

现在进行实施：

1.  **显示已完成的项目？**范围

    [![显示已完成项目参数](../Images/1452ef86d2d7a5176948566708ef50d8.png)](https://i.stack.imgur.com/sfHfE.png)

2.  **项目经理**数据集查询（有关如何生成密钥的详细信息，请参阅 Visser 和 Abbi 的答案，该密钥将根据独立参数进行更改并强制 SSRS 重新加载默认值）

    ```
    SELECT 
        [ProjectManager_Key] = 
            pOuterAlias.[ProjectManager_Key] + '_' + 
            CAST(ROW_NUMBER() OVER(ORDER BY pOuterAlias.[ProjectManager_Key] DESC) AS NVARCHAR(MAX)),
        [ProjectManager] =  pOuterAlias.[ProjectManager]
    FROM 
        (
            SELECT 
                [ProjectManager_Key] = 
                    pInnerAlias.ProjectManager + '_' + 
                    CAST(ROW_NUMBER() OVER(ORDER BY pInnerAlias.ProjectManager ASC) AS NVARCHAR(MAX)),
                [ProjectManager] = pInnerAlias.ProjectManager
            FROM 
            (
                SELECT 
                    [ProjectManager] 
                FROM 
                    [dbo].[Project]
                WHERE
                    Status = 'In Progress' OR
                    @ShowCompletedProjects = 1
            ) pInnerAlias
        ) pOuterAlias
    ORDER BY 
        pOuterAlias.[ProjectManager] 
    ```

3.  **项目经理**参数

    *   一般的

        [![项目经理总经理](../Images/caa14145a94f77a857bf72b897e67a0e.png)](https://i.stack.imgur.com/s4EcJ.png)

    *   可用值

        [![项目经理可用值](../Images/a6a064848eecbeb022326364678050c4.png)](https://i.stack.imgur.com/Szg3F.png)

    *   默认值

        [![项目经理默认值](../Images/8d5653c9287f7e14a44a8462fe217588.png)](https://i.stack.imgur.com/jaT4w.png)

4.  **项目**数据集

    *   询问

        ```
        SELECT 
            *
        FROM 
            [dbo].[Project]
        WHERE
        (
            Status = 'In Progress' OR
            @ShowCompletedProjects = 1
        ) AND
        Project Manager IN (@ProjectManager) 
        ```

    *   参数（请务必注意`[@ProjectManager.Label]`使其与数据库中实际项目经理值的项目匹配的部分，而不是我们生成的键。

        [![项目参数](../Images/62ca9ca4a7e0eb8679b89704b886b601.png)](https://i.stack.imgur.com/KpDAa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:13:35.070

最后我能够解决这个问题。这个链接是一个有用的开始。 [http://www.optimusbi.com/2012/07/16/multilevel-cascading-select/](http://www.optimusbi.com/2012/07/16/multilevel-cascading-select/)

基本上它的作用是：以某种方式编写参数查询，以便每次更改其父参数时依赖参数都会更改其值。

该查询添加行号，前面带有“_”。因此，每次用户选择其他值时，行号都会发生变化，因此查询结果集也会发生变化。

然后在使用结果集时删除下划线后的文本以获取真实代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T21:32:22.510

有一种解决方法可以在所有情况下解决此问题。

请注意，先前提供的答案是以某种方式编写查询参数，以便每次更改其父参数时依赖参数都会更改其值，这适用于某些情况，但并非所有情况。如果从属参数的“可用”值由于另一个参数而改变并且从属参数是可见的，则它可以工作，如果从属参数是隐藏的或内部的，或者如果“可用”值没有因为另一个参数而改变参数，它将不起作用。

万无一失的解决方法是在报表中定义一个自定义函数，并在依赖参数的表达式中调用它。自定义函数将参数（依赖参数所依赖的参数）的值作为参数，并简单地返回其值。即使函数只是获取值并返回它，SSRS 也不会检查代码并假设代码可以做任何事情（生成随机数，从磁盘中提取文件等）。因此，SSRS 每次值更改时都会调用该函数，无论从属参数的“可用”值是否更改，也无论从属参数是可见的、隐藏的还是内部的。

像这样的东西：

```
public function returnArg(ByVal TheArg As String) As String
  return TheArg
end function 
```

假设您有两个参数：

参数1 参数2

并且 Parameter2 取决于 Parameter1。

将 Parameter2 的值设置为一个表达式，其中包括使用函数调用 Parameter1，例如：

```
=CODE.returnArg(Parameters!Parameter1.Value) 
```

现在在这种情况下 Parameter2 只是显示 Parameter1 中的值，但是这个逻辑可以扩展到更复杂的表达式和多个参数。只要表达式中的每个参数都有 CODE.returnArg(...) 函数调用，SSRS 就会始终刷新该值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T04:52:26.597

@Abbi 的第二个链接不再有效。现在可以在以下位置找到该文章： [http ://www.optimusinfo.com/multilevel-cascading-select/](http://www.optimusinfo.com/multilevel-cascading-select/)

不幸的是，图像被破坏了，没有它们，文章有点不完整。我能够在其移动位置找到一张图像（即使尝试适当的变化我也找不到其他图像）：[http ://www.optimusinfo.com/wp-content/uploads/2012/07/Multilevel-Cascading -with-Select-All-18.jpeg](http://www.optimusinfo.com/wp-content/uploads/2012/07/Multilevel-Cascading-with-Select-All-18.jpeg)

这给了我使该技术发挥作用所需的最后一条线索：当您设置数据集参数属性时，您需要手动将参数值指定为例如 [@City.Label] 而不是通常的普通旧 [@City ]（对应于 [@City.Value]。

这是因为该技术将“值”更改为无法再在数据库中查找的自定义值！因此，您需要使用用户友好、数据库现有的“标签”作为参数。（可能应该很明显，但是......）如果您了解报表生成器，其余的都是非常标准的。

另请注意，此链接目前不适用于多值级联参数。然而，它可以很容易地修改为：只需更改参数存储的过程以加入值拆分函数。我从[SQL Server 给出的 udf_splitvarible 函数改编了我的 - In 子句与声明的变量](https://stackoverflow.com/questions/2944511/sql-server-in-clause-with-a-declared-variable)

修改相当简单，但我会举一个例子。这是来自文章（修复了糟糕的格式）。

```
SELECT 
    l11.CompanyName1+'_'+ CAST(row_number() over( order by  l11.CompanyName1 desc) AS VARCHAR(50) )as CompanyName11
    ,l11.CompanyName
FROM 
(
    SELECT 
        l1.CompanyName+'_'+ CAST(row_number() over( order by  l1.CompanyName asc) AS VARCHAR(50) )as CompanyName1
        ,l1.CompanyName
    FROM 
    (
        SELECT DISTINCT CompanyName
        FROM Customers
        WHERE City IN(@City)
    )l1
)l11
ORDER BY l11.CompanyName ASC 
```

改变：

```
SELECT DISTINCT CompanyName
FROM Customers
WHERE City IN(@City) 
```

到：

```
SELECT DISTINCT CompanyName
FROM Customers
INNER JOIN udf_SplitVariable(@City,',') v ON City = v.Value 
```

这也适用于 SQL Server 2008/Report Builder 3。

我无法理解/应用@borkmark 的答案。这些限制似乎不适用于我的情况。

# java - 如何使用Java在网络打印机上打印？

> ID：11230502
> 
> 赞同：10
> 
> 时间：2012-06-27T16:02:42.633
> 
> 标签：java, printing

使用 Java，我需要在本地未安装的网络打印机上打印。我只知道打印机名称。我见过的所有教程都是从以下内容开始的：

`PrintService []services = PrinterJob.lookupPrintServices();`

问题是无法安装打印机，因此在这种情况下服务将为空。我需要直接设置打印机名称，而不仅仅是通过可见的打印机进行枚举。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T18:43:59.420

如果打印机未注册到运行打印应用程序的 Windows / Active Directory 用户，Java AWT 打印将无法通过路径找到打印机。您必须通过 Windows 的“设备和打印机”将打印机路径注册为该用户的打印机才能使其可见。然后，作为该用户，您必须运行以查看可用打印机列表并通过列出的确切名称`lookupPrintServices`检索正确的打印机。`PrintService``String`

```
/**
 * Retrieve the specified Print Service; will return null if not found.
 * @return
 */
public static PrintService findPrintService(String printerName) {

    PrintService service = null;

    // Get array of all print services - sort order NOT GUARANTEED!
    PrintService[] services = PrinterJob.lookupPrintServices();

    // Retrieve specified print service from the array
    for (int index = 0; service == null && index < services.length; index++) {

        if (services[index].getName().equalsIgnoreCase(printerName)) {

            service = services[index];
        }
    }

    // Return the print service
    return service;
}

/**
 * Retrieve a PrinterJob instance set with the PrinterService using the printerName.
 * 
 * @return
 * @throws Exception IllegalStateException if expected printer is not found.
 */
public static PrinterJob findPrinterJob(String printerName) throws Exception {

    // Retrieve the Printer Service
    PrintService printService = PrintUtility.findPrintService(printerName);

    // Validate the Printer Service
    if (printService == null) {

        throw new IllegalStateException("Unrecognized Printer Service \"" + printerName + '"');
    }

    // Obtain a Printer Job instance.
    PrinterJob printerJob = PrinterJob.getPrinterJob();

    // Set the Print Service.
    printerJob.setPrintService(printService);

    // Return Print Job
    return printerJob;
}

/**
 * Printer list does not necessarily refresh if you change the list of 
 * printers within the O/S; you can run this to refresh if necessary.
 */
public static void refreshSystemPrinterList() {

    Class[] classes = PrintServiceLookup.class.getDeclaredClasses();

    for (int i = 0; i < classes.length; i++) {

        if ("javax.print.PrintServiceLookup$Services".equals(classes[i].getName())) {

            sun.awt.AppContext.getAppContext().remove(classes[i]);
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-11T10:19:19.790

在我的情况下，出现身份验证错误，我找不到共享打印机，因为我使用 LocalUser 帐户搜索它们，使用另一个帐户或更改打印机授权我可以找到它。

# apache - 配置tomcat apache以执行子目录作为第一页

> ID：11230503
> 
> 赞同：0
> 
> 时间：2012-06-27T16:02:45.443
> 
> 标签：apache, tomcat, web.xml

目前假设 xyz.com 执行 webapp ROOT。如何配置我的 tomcat；因此默认情况下 xyz.com 将我带到 xyz.com/abc [abc 是 ROOT 内的目录]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:48:31.767

如果你设置了 JSTL，你可以从 ROOT/index.jsp 重定向：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<c:redirect url='abc' /> 
```

或者使用 ROOT/index.jsp 中的 scriptlet：

```
<% response.sendRedirect("http://xyz.com/abc"); %> 
```

# alloy - 在 Alloy 中使用我自己的 API

> ID：11230506
> 
> 赞同：0
> 
> 时间：2012-06-27T16:02:54.400
> 
> 标签：alloy

只是想知道如何在合金中使用我自己的 API？

我已经开发了合金 API，但我不知道如何使用它？

问候

穆迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:17:10.100

使用“您自己的 API”是什么意思？

我假设您已经在 Alloy 中开发了一些希望从 Java API 调用的模块和谓词。在那种情况下，我认为你不能直接使用 API 来做到这一点。最好的办法是在Java 中将Alloy 表达式编写为纯字符串，然后解析它们（例如，使用`CompUtil.parseOneExpression_fromString`），然后评估它们（例如，使用`A4Solution.eval`，前提是您已经获得了A4Solution 的实例）。

# android - 错误消息：“检测为 localLooping 应用程序。”

> ID：11230508
> 
> 赞同：2
> 
> 时间：2012-06-27T16:02:55.513
> 
> 标签：android, admob

我已经开始看到我正在开发的应用程序的 logcat 中偶尔出现以下错误消息：

> E/MbmAppStatsInternal(568)：App appName=theAppName，被检测为 localLooping 应用。

进一步挖掘突出显示它来自 Google AdMob 代码。

有任何想法吗 ？

对应用程序或广告的功能没有明显影响。

谢谢。

# php - IIS 6 重定向目录到 index.php？

> ID：11230510
> 
> 赞同：2
> 
> 时间：2012-06-27T16:03:16.143
> 
> 标签：php, apache, iis, redirect, iis-6

我在 Apache 下开发了一个 PHP Web 应用程序，目前正在将其移动到运行 IIS 6 的服务器上。每当我在 Apache 服务器上使用此应用程序时，输入以下内容：

```
http://mysite.com/subpage/ 
```

将在内部重定向到：

```
http://mysite.com/subpage/index.php 
```

IIS 6 中有没有办法复制这种相同的行为？只需键入一个链接而不`index.php`给我一个导演列表被拒绝的错误。我不是服务器管理员，因此无法安装扩展（如果需要）。

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:14:56.420

在 IIS 6 上（我使用它已经有一段时间了）我相信您可以在应用程序池设置或应用程序本身中设置默认文档。

在默认文档属性框中，有一个文件名和扩展名列表，您可以将其设置为自动加载。它们按优先级降序排列。您需要将 index.php 添加到列表中并将其移至顶部。

这将使您在任何时候进入“裸”目录，例如[http://www.example.com](http://www.example.com)或[http://www.example.com/subpage/](http://www.example.com/subpage/)时都会加载 index.php。

如果您尝试在没有管理权限的情况下执行此操作，则可以将默认文档部分添加到您的 web.config 文件中，然后使用该部分。 [http://www.iis.net/ConfigReference/system.webServer/defaultDocument](http://www.iis.net/ConfigReference/system.webServer/defaultDocument)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:01:51.170

正如其他人回答的那样，如果您可以直接访问 IIS，则可以设置默认文档。

如果没有管理员访问权限，您可能只需利用 IIS 的默认设置。创建一个名为“Default.htm”（或“index.htm”）的页面，该页面重定向到 index.php。由于这些已经设置为默认文档，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:11:11.583

您需要将服务器的默认文档设置为 index.php [http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true)

# ruby - 在进行树遍历时排除嵌套元素

> ID：11230511
> 
> 赞同：0
> 
> 时间：2012-06-27T16:03:17.327
> 
> 标签：ruby, xml, tree, nokogiri

我正在使用 Nokogiri 解析具有（大致）以下结构的 XML 文件：

```
<diag>
  <name>A00</name>
  <desc>Cholera</desc>
  <diag>
    <name>A00.0</name>
    <desc>Cholera due to Vibrio cholerae 01, biovar cholerae</desc>
  </diag>
  <diag>
    ...
  </diag>
  ...
</diag> 
```

正如你所看到的，这棵树有`diag`可以任意嵌套深度的节点，但是每个嵌套都是对父节点的更具体的描述。

我想“展平”这棵树，这样我就可以拥有一个类似的列表，而不是`A00.0`嵌套在其中`A00`

```
A00
A00.0
A00.1
...
A00.34
...
A01
... 
```

我到目前为止看起来像这样：

```
require 'nokogiri'
icd10 = File.new("icd10.xml", "r")
doc = Nokogiri::XML(icd10.read) do |config|
  config.strict.noblanks
end
icd10.close

@diags = {}
@diag_count = 0

def get_diags(node)
  node.children.each do |n|
    if n.name == "diag"
      @diags[@diag_count] = n
      @diag_count += 1
      get_diags(n)
    end
  end
end

# The xml file has sections but what I really want are the contents of the sections
doc.xpath('.//section').each do |n|
  get_diags(n)
end 
```

到目前为止，这有效，因为我确实获得`diag`了文件中的所有元素，但问题是父节点仍然包含在以后节点中找到的所有内容（例如，`@diags[0]`包含`A00`、`A00.0`、`A00.1`等节点，而`@diags[1]`仅包含`A00.0`内容）。

如何在遍历 xml 内容时从父元素中排除嵌套元素`get_diags`？提前致谢！

== 编辑 ==

所以我将此添加到我的`get_diags`方法中

```
def get_diags(node)
  node.children.each do |n|
    if n.name == "diag"
      f = Nokogiri::XML.fragment(n.to_s)
      f.search('.//diag').children.each do |d|
        if d.name == "diag"
          d.remove
        end
      end
      @diags[@diag_count] = f
      @diag_count += 1
      get_diags(n)
    end
  end
end 
```

现在`@diags`拥有一个 xml 片段，其中所有嵌套`<diag>...</diag>`都被删除，从某种意义上说，这是我想要的，但总的来说这非常难看，我想知道是否有人可以分享一个更好的方法来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:29:13.263

xpath '//diag' 将`<diag>`依次为您提供每个节点，无论嵌套多深。然后您可以提取每个节点*名称*和*desc*子节点的文本值：

```
diags = doc.xpath('//diag').map do |diag|
  Hash[
    %w(name desc).map do |key|
      [key, diag.xpath(key).text]
    end
  ]
end
pp diags
# => [{"desc"=>"Cholera", "name"=>"A00"},
# =>  {"desc"=>"Cholera due to Vibrio cholerae 01, biovar cholerae",
# =>   "name"=>"A00.0"}] 
```

如果您希望创建具有不同结构的新 XML 树，我不会费心尝试转换原始树。只需提取提取的数据并使用它来创建新树：

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.diagnoses do
  diags.each do |diag|
    xml.diag {
      xml.name = diag['name']
      xml.desc = diag['desc']
    }
  end
  end
end
puts builder.to_xml
# => <?xml version="1.0"?>
# => <diagnoses>
# =>   <diag>
# =>     <name=>A00</name=>
# =>     <desc=>Cholera</desc=>
# =>   </diag>
# =>   <diag>
# =>     <name=>A00.0</name=>
# =>     <desc=>Cholera due to Vibrio cholerae 01, biovar cholerae</desc=>
# =>   </diag>
# => </diagnoses> 
```

# javascript - 我该怎么办：“按下录制按钮时，按钮会闪烁”

> ID：11230515
> 
> 赞同：0
> 
> 时间：2012-06-27T16:03:24.573
> 
> 标签：javascript, android, jquery, jquery-ui, cordova

我正在Android系统上使用PhoneGap开发语音记录器功能。我正在对 Transformer Prime 进行测试。我在 PhoneGap 的 JavaScript 之上使用 jQuery 和 jQuery UI。

我的问题是：当用户按下录制按钮时，如何使该按钮闪烁以指示应用程序正在录制？

当然，我要创建的效果是让用户知道它仍在录制。也许我可以设置一个计时器来给出当前的录音持续时间，或者类似的东西。

不幸的是，我不知道其中一种效果。谁能给我一个关于源代码的建议，以便我可以作为参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:21:30.513

您可以为此使用 CSS：http: [//jsfiddle.net/fszhJ/](http://jsfiddle.net/fszhJ/)。有一个关键帧，将元素设置为前半部分不可见，而另一半部分可见。（您可能需要添加其他前缀，而不仅仅是`-webkit-`.）

```
@-webkit-keyframes keyframe {
    from {
        visibility: hidden;
    }
    50% {
        visibility: hidden;
    }
    to {
        visibility: visible;
    }
}

div {
    width: 200px;
    height: 200px;
    background-color: black;
    -webkit-animation: keyframe 1s infinite;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:09:03.300

如果您使用 jQuery，您可以在录制按钮上方放置一个发光 png（最初不透明度为 0），在间隔动画中您可以这样做：

```
 isVisible = false;

 var interval = setInterval(function(){

     opacityValue = isVisible ? 0 : 1;
     glow.css( 'opacity',  opacityValue );
     isVisible = !isVisible;

 }, 500); 
```

然后，当你想停止它时：

```
 clearInterval( interval ); 
```

如果你想让你的光晕看起来很流畅，你可以使用 css 过渡。

# javascript - 按值访问 XML 节点

> ID：11230516
> 
> 赞同：0
> 
> 时间：2012-06-27T16:03:26.347
> 
> 标签：javascript, xml

是否可以使用 JavaScript 使用属性值（例如）访问 XML 部分/节点`id`？

例如：

```
<people>
    <person id='1'>
        <name>Tom</name>
        <age>30</age>
    </person>
    <person id='2'>
        <name>Ian</name>
        <age>22</age>
    </person>
    <person id='3'>
        <name>Ben</name>
        <age>45</age>
    </person>
</people> 
```

我希望能够选择一个具有给定 ID 的人。例如，查找 ID 2 将返回 Ian。

这在 ActionScript 中是可能的，如下所示：

```
xml.people.person.(@id == 2).name 
```

JS中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:11:07.253

假设您有一个`XMLDocument`，唯一的跨浏览器方法是遍历节点：

```
var people = doc.getElementsByTagName('person');

for(var i = 0; i < people.length; i++) {
    if(people[i].getAttribute('id') === '2') {
        // Found it!
    }
} 
```

但是，如果您需要执行非常复杂的表达式，那么使用 XPath 可能是值得的，即使它需要一些跨浏览器检查。

这是标准方法：

```
document.evaluate('//person[@id='2']/text()[0]', doc.documentElement, null, XPathResult.STRING_TYPE, null).stringValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:11:11.553

```
var xml_text="<people><person id='1'><name>Tom</name><age>30</age></person><person id='2'><name>Ian</name><age>22</age></person><person id='3'><name>Ben</name><age>45</age></person></people>";

var xmlParser = new DOMParser().parseFromString(xml_text, "text/xml").documentElement;

var person2Name = xmlParser.querySelector("people person[id='2'] name").textContent ​​; 
```

[querySelector](https://developer.mozilla.org/En/DOM/Document.querySelector)将字符串作为输入，该字符串充当节点上的 css 选择器。

[textContent](http://www.w3schools.com/dom/prop_element_textcontent.asp)获取节点的文本。

IE8 不支持 DOMParser：但您可以使用以下解决方法

```
 xmlParser =new ActiveXObject("Microsoft.XMLDOM");
  xmlParser.async=false;
  xmlParser.loadXML(xml_text); 
```

# sql-server-2008 - 我可以处理异常，然后让它继续运行而不导致代码中断吗？

> ID：11230517
> 
> 赞同：1
> 
> 时间：2012-06-27T16:03:28.340
> 
> 标签：sql-server-2008, tsql, exception-handling

我有一个使用 openquery 填充临时表的存储过程（我没有编写）。问题是我们有一个预期的错误（它为不再存在的用户命中活动目录）正在停止整个过程。我希望做的是捕捉错误，填写一些默认值并允许光标继续。目前，我正在捕捉错误，但 proc 正在停止。有没有办法强制它继续？这是proc的一部分：

```
 BEGIN
        SET @SQL=N'INSERT INTO #AD_Display_Names (GUID, Display_Name) 
        SELECT objectGUID, displayName 
        FROM OPENQUERY(ADSI,''SELECT objectGUID, displayName 
        FROM ''''LDAP://<GUID=' + CONVERT (VARCHAR (MAX), @GUID) + '>'''' 
        WHERE objectCategory = ''''Person'''' AND objectClass = ''''user'''''')'

        BEGIN TRY
            EXEC SP_EXECUTESQL @SQL
        END TRY
        BEGIN CATCH
            SET @SQL=N'INSERT INTO #AD_Display_Names (GUID, Display_Name) 
            VALUES(''00000000-0000-0000-0000-000000000000'', ''Unknown'')'
            EXEC SP_EXECUTESQL @SQL
        END CATCH

        FETCH NEXT FROM [User_Names_Cursor]
        INTO @GUID
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:30:14.640

为什么不做这样的事情？

-- 光标在这里

```
BEGIN
    DECLARE @objectGUID UNIQUEIDENTIFIER
    DECLARE @displayName VARCHAR(100)
    SELECT @objectGUID = objectGUID, @displayName = displayName
    FROM OPENQUERY(ADSI, N'SELECT objectGUID, displayName 
                           FROM ''LDAP://<GUID=' + CONVERT (VARCHAR (MAX), @GUID) + '>''
                           WHERE objectCategory = ''Person'' AND objectClass = ''user'''

    IF(@objectGUID IS NULL)
    BEGIN
        SET @objectGUID = '00000000-0000-0000-0000-000000000000'
        SET @displayName = 'Unknown'
    END

    INSERT INTO #AD_Display_Names (GUID, Display_Name)
    VALUES(@objectGUID, @displayName)

    FETCH NEXT FROM [User_Names_Cursor]                           
    INTO @GUID  
END 
```

# java - GWT 警告：找不到文件：/com.mycompany.project.ImageViewer/GreetingService

> ID：11230518
> 
> 赞同：7
> 
> 时间：2012-06-27T16:03:30.413
> 
> 标签：java, gwt

不要连接到服务器...这是上次gwt eclipse中的一个项目

单击 gwt 中的按钮：

```
greetServer(textToServer,
                        new AsyncCallback<String>() {
                            public void onFailure(Throwable caught) {
                                // Show the RPC error message to the user
                                dialogBox
                                        .setText("Remote Procedure Call - Failure");
                                serverResponseLabel
                                        .addStyleName("serverResponseLabelError");
                                serverResponseLabel.setHTML(SERVER_ERROR);
                                dialogBox.center();
                                closeButton.setFocus(true);
                            }

                            public void onSuccess(String result) {
                                dialogBox.setText("Remote Procedure Call");
                                serverResponseLabel
                                        .removeStyleName("serverResponseLabelError");
                                serverResponseLabel.setHTML(result);
                                dialogBox.center();
                                closeButton.setFocus(true);
                            }
                        }); 
```

我的 gwt 服务器：

```
 public String greetServer(String input) throws IllegalArgumentException {
        // Verify that the input is valid. 
        if (!FieldVerifier.isValidName(input)) {
            // If the input is not valid, throw an IllegalArgumentException back to
            // the client.
            throw new IllegalArgumentException(
                    "Name must be at least 4 characters long");
        }

        String serverInfo = getServletContext().getServerInfo();
        String userAgent = getThreadLocalRequest().getHeader("User-Agent");

        // Escape data from the client to avoid cross-site script vulnerabilities.
        input = escapeHtml(input);
        userAgent = escapeHtml(userAgent);

        return "Hello, " + input + "!<br><br>I am running " + serverInfo
                + ".<br><br>It looks like you are using:<br>" + userAgent;
    } 
```

这是我的 gwt 服务：

```
@RemoteServiceRelativePath("greet")
public interface GreetingService extends RemoteService {
    String greetServer(String name) throws IllegalArgumentException;
} 
```

gwt serviseAsyn 文件：

```
public interface GreetingServiceAsync {
    void greetServer(String input, AsyncCallback<String> callback)
            throws IllegalArgumentException;
}

web xml

  <!-- Servlets -->
  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>kill.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/hello123/greet</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>Hello123.html</welcome-file>
  </welcome-file-list> 
```

点击按钮 - 服务器不返回值，因为找不到文件 - 为什么？

```
Jun 27, 2012 11:12:13 AM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /com.mycompany.project.ImageViewer/GreetingService 
```

该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T21:39:32.447

在您的`web.xml`文件中，您将服务映射为`/hello123/greet`：

```
<servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/hello123/greet</url-pattern>
</servlet-mapping> 
```

虽然错误显示它正在尝试加载默认值`/modulename/serviceinterfacename`, 或 / `com.mycompany.project.ImageViewer/GreetingService`。有两种选择：

1.  更改`web.xml`条目以使用 RPC 接口期望的默认 url
2.  配置远程服务以从您的自定义路径加载

[这两个都在https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)以及其他 RPC 设置详细信息进行了简要讨论。

对于第二个选项，这通常如下所示：

```
MyServiceAsync service = GWT.create(MyService.class);
((ServiceDefTarget)service).setServiceEntryPoint("/hello123/greet");
service.methodName(... 
```

# html - 填充向左移动

> ID：11230525
> 
> 赞同：1
> 
> 时间：2012-06-27T16:03:44.553
> 
> 标签：html, html-table

我有一个表格里面有一些 Javascript 验证。表标签是

```
<table style="padding-left:70px" align="left" cellpadding="10"> 
```

给定的行如下所示：

```
<tr id="email_row">
 <td align="right" valign="top">
  <label for="email">Email: *</label>
 </td>
 <td class="field_cell" valign="top">
  <input type="text" name="email" maxlength="80" size="30"><span class="error_field"></span>
 </td>
</tr> 
```

如果用户在未填写此字段或其他字段（或未正确填写）的情况下点击提交，则跨度将填充错误消息，例如“无效”或“必需”。不幸的是，这样做会使整个 tbody 向左移动（即使它是左对齐的）。有什么建议么？

仅供参考，我只能在 Chrome 中重现此问题。Firefox 和 IE 运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:14:24.800

固定的！
问题是我在表格中有一行文本，`colspan=2`这使得表格的宽度大于任何其他行的宽度。向`<span>`元素添加文本增加了第二列的宽度，这反过来又导致第一列变小（因为它的单元格向右对齐）。

# iphone - 为什么 UILabel 不显示？

> ID：11230530
> 
> 赞同：1
> 
> 时间：2012-06-27T16:03:55.863
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview, uilabel

在我的`appDelegate.m`我有这段代码，但`UILabel`没有显示，而只有`UIImageView`.

为什么？

```
notificationView = [[UIImageView alloc] initWithFrame: CGRectMake(154, 320, 140, 47)];
notificationView.image = [UIImage imageNamed:@"notification.png"];

NSString *message = [NSString stringWithString:@"New Videos"];

notificationLabel = [[UILabel alloc] initWithFrame: CGRectMake(165, 313, 140, 47)]; 
notificationLabel.font = [UIFont boldSystemFontOfSize:12];
notificationLabel.textAlignment = UITextAlignmentLeft;
notificationLabel.text = [NSString stringWithFormat:@"%d %@", numberOfVideos, message];
notificationLabel.textColor = [UIColor whiteColor];
notificationLabel.backgroundColor = [UIColor clearColor];

notificationView.alpha = 0.0;
notificationLabel.alpha = 0.0;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
notificationView.alpha = 1.0;
notificationLabel.alpha = 1.0;
[UIView commitAnimations];

[self.window addSubview: notificationView];
[self.notificationView addSubview: notificationLabel];

[UIView commitAnimations];  

[notificationView release];
[notificationLabel release]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:20:21.890

notificationLabel 是 notificationView 的子视图。它被放置在其超级视图的范围之外。

尝试

```
notificationLabel = [[UILabel alloc] initWithFrame: CGRectMake(0, 0, 140, 47)]; 
```

然后从那里去。对于所有子视图，超级视图的左上角为 (0, 0)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T16:06:37.140

通知视图的宽度是`140`。您的标签被放置在`165`通知视图内的 X 位置，该位置超出了通知视图的范围。所以它是不可见的。

# utf-8 - GLIBs UTF16BE 和 UTF-16BE 的区别以及如何支持 UTF16BE

> ID：11230531
> 
> 赞同：2
> 
> 时间：2012-06-27T16:04:00.433
> 
> 标签：utf-8, glib, utf-16, utf, obex

我正在将 OBEX 推送传输到我们从 Android 手机构建的嵌入式系统。传输在我的 debian 桌面上工作，但在嵌入式系统上失败，出现错误“obexd [741]：断开连接：Unicode 转换失败：无法打开从 'UTF16BE' 到 'UTF8' 的转换器”

现在，当我键入“i​​conv -l”时，我可以看到我在我的 debian 桌面上设置了 UTF16BE，但在我的嵌入式系统上却没有。在这两个系统上，我都有 UTF-8 和 UTF-16BE，但在嵌入式系统上没有 UTF8 和 UTF16BE。我被构建系统中某些软件包的旧版本所困扰，所以我想我只需要构建一个更新版本的 glib。我设法构建了 2.27.93，我认为它比 debian stable 更新。在构建之后，它会列出与以前相同的字符集。我还下载了 debian 源代码并寻找缺少破折号的参考资料，但还没有找到任何东西。

如何获得对 UTF16BE 字符集和 UTF-16BE 的支持？他们真的不一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:02:01.680

UTF16BE 和 UTF-16BE 肯定没有区别。存在各种不同大小写和标点符号的字符编码名称变体，通常是因为名称适用于对名称语法有不同限制的各种上下文。

您可能有一个文件`/usr/lib/gconv/gconv-modules`可以包含这样的别名：

```
#       from                    to                      module          cost
alias   UTF16BE//               UTF-16BE// 
```

我建议在您的嵌入式系统上手动编辑该文件以添加 UTF16BE 别名。

# windows - 如何在运行安装程序时解决“已验证发布者：未知”消息

> ID：11230533
> 
> 赞同：0
> 
> 时间：2012-06-27T16:04:05.067
> 
> 标签：windows, security, installation, code-signing

当我尝试在某些计算机上安装我的软件时，我曾经收到一条消息“已验证发布者：未知”。我从一些文档中了解到必须对安装程序进行签名。

问题 1：我可以使用自签名证书对安装程序进行签名吗？自签名证书显示“此证书无法通过受信任的证书颁发机构进行验证”

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:32:35.460

不，正如您所发现的，自签名证书不起作用。您需要购买“代码签名证书”（引用它是一个供您搜索的术语）并对您的 EXE（很可能包括设置和应用程序文件）进行签名和时间戳。

# neural-network - 比较自制和专业人工神经网络/前馈神经网络之间准确性的最佳可用数据集和软件

> ID：11230536
> 
> 赞同：2
> 
> 时间：2012-06-27T16:04:24.597
> 
> 标签：neural-network

我有几个稍微修改/非传统的前馈神经网络设置，我想将它们的准确性与今天专业使用的设置进行比较。是否有特定的数据集或数据集类型可以用作基准？即“通常用于某某任务的 ANN 样式对于该数据集的准确率为 98%。” 拥有各种各样的这些会很棒，一对用于统计分析，一对用于图像和语音识别等。

基本上，有没有办法将我汇总的 ANN 与在各种任务中专业使用的 ANN 进行比较？我可以为数据或软件付费，但当然更喜欢免费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:02:51.883

CMU 有一些神经网络的基准：[Neural Networks Benchmarks](http://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/areas/neural/bench/0.html)

快速人工神经网络库 (FANN) 有一些被广泛使用的基准：[FANN](http://sourceforge.net/projects/fann/)。下载源码（2.2.0版本），看目录datasets，格式很简单。总是有一个训练集（x.train）和一个测试集（x.test）。文件的开头是实例数、输入数和输出数。接下来的行是第一个实例的输入和第一个实例的输出，依此类推。您可以在目录中找到带有 FANN 的示例程序`examples`。我认为他们甚至与以前版本中的其他库进行了详细的比较。

我认为 FANN 的大多数基准测试（如果不是全部的话）都来自 Proben1。谷歌，有一篇来自 Lutz Prechelt 的论文，里面有详细的描述和比较。

# jquery - 如何将 li 标签与其子标签绑定？

> ID：11230537
> 
> 赞同：0
> 
> 时间：2012-06-27T16:04:30.113
> 
> 标签：jquery

我希望 DOM 考虑即使用户单击锚标记所在的父 li 元素也单击了锚标记。

```
 <ul>
  <li><a href="#">test1</a></li>
  <li><a href="#">test2</a></li>
  </ul> 
```

此处链接“test1”仅在我单击文本时有效，但当我单击 li 标签时，我希望链接转到目标页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:08:15.530

### 笔记

您可以先尝试使用 CSS`display:block`进行`a`标记。我认为`a`标签没有占用所有可用空间`li`。所以你有这个问题。

* * *

### 如果 CSS 失败，那么

```
$("ul li").click(function(){
   window.location = $(this).find("a").attr('href');
}); 
```

您正在尝试单击以链接，标记，但通常不可能，因为单击不是带有锚标记的默认事件。

如果您之前将`click`处理程序绑定到`a`标记并稍后触发，则可以这样做，如下所示：

```
$('ul li a').on('click', function() {
  window.location = this.href;
});

$("ul li").click(function(){
   $(this).find("a").click(); // fire previous click event binded to anchor
}); 
```

# windows - 如何在不事先知道其本地化名称的情况下使用 Windows 安全组？

> ID：11230539
> 
> 赞同：6
> 
> 时间：2012-06-27T16:04:40.387
> 
> 标签：windows, delphi, winapi, delphi-7

我在网上搜索过，但找不到我想要的东西。基本上，在安装过程中，我们会启动一个单独的可执行文件，该可执行文件基本上会强制为用户组“EVERYONE”启用一些文件夹的读/写功能。

现在，写这篇文章的人从来没有考虑过系统语言。我与法国的一位客户打过电话，安装失败，因为“每个人”都不是我们所期望的。

我正在对 Windows 进行 API 调用，该调用将返回一个安全组名称，该名称在本地化环境中使用是“安全的”。本质上，我希望安全地编辑此代码，因此我们不是在“每个人”中硬编码，而是调用一个函数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T16:20:43.303

这里的根本错误与其说是使用`EVERYONE`，不如说是代码完全使用了名称。您应该使用[众所周知的 SID](http://support.microsoft.com/kb/243330)而不是使用名称。在您的情况下，您需要`S-1-1-0`.

# android - 为什么无效无效？

> ID：11230540
> 
> 赞同：0
> 
> 时间：2012-06-27T16:04:45.003
> 
> 标签：android, android-custom-view

我正在尝试单击一个按钮并添加一个电阻器。所以我需要的是在单击按钮时使视图无效。但是`MyView`方法内部的无效无效`update()`。我一直在尝试寻找这个问题，但我没有发现与我正在尝试做的事情相似的东西，或者这可能不是解决问题的方法。

*DefaultActivity.java*

```
public class DefaulActivity extends Activity {       

  MyView myView;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);         

    setContentView(R.layout.main);
    myView = new MyView(this, null); 

    final Button bAddResistor = (Button) findViewById(R.id.bAdd);
    bAddResistor.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // Perform action on click              
            myView.update();                            
            Log.d("ButtonADD", "Button Add has been clicked");
        }
    });          
  } 
} 
```

*我的视图.java*

```
public class MyView extends SurfaceView implements SurfaceHolder.Callback{      

  Resistor myResistor;
  private ArrayList<Resistor> mElements = new ArrayList<Resistor>();

  public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);  
    getHolder().addCallback(this);  

  } 

  @Override
  protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);

    synchronized (mElements) {
        for (Resistor element : mElements) {
            element.doDraw(canvas);                
        }
    }   

  }

  public void update() {

       mElements.add(new Resistor(getContext(), (int) 10, (int) 10));
       invalidate(); //Does not work!
  }

  @Override
  public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

  }

  @Override
  public void surfaceCreated(SurfaceHolder holder) {

    Canvas c = holder.lockCanvas();
    onDraw(c);      
    holder.unlockCanvasAndPost(c);      
  }

  @Override
  public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub  

  } 

} 
```

*电阻器.java*

```
public class Resistor extends View{

  private Path mSymbol;
  private Paint mPaint;

  private int mX;
  private int mY;

  //...Override Constructors...    
  public Resistor(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
  }

  public Resistor(Context context, int x, int y){
    super(context);
    mX = x;
    mY = y;
    init();
  }

  private void init() {
    mSymbol = new Path();
    mPaint = new Paint();

    mPaint.setAntiAlias(true);      
    mPaint.setStrokeWidth(2);
    mPaint.setColor(-7829368);
    mPaint.setStyle(Paint.Style.STROKE);

    //...Your code here to set up the path,
    //...allocate objects here, never in the drawing code.

    mSymbol.moveTo(0.0F, 0.0F);
    mSymbol.lineTo(0.0F, 50.0F);
    mSymbol.lineTo(16.666666F, 58.333332F);
    mSymbol.lineTo(-16.666666F, 75.0F);
    mSymbol.lineTo(16.666666F, 91.666664F);
    mSymbol.lineTo(-16.666666F, 108.33333F);
    mSymbol.lineTo(16.666666F, 124.99999F);
    mSymbol.lineTo(-16.666666F, 141.66666F);
    mSymbol.lineTo(0.0F, 150.0F);
    mSymbol.lineTo(0.0F, 200.0F);
    mSymbol.offset(mX, mY);

  }

  public void doDraw(Canvas canvas) {
    canvas.drawPath(mSymbol, mPaint);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:22:15.120

我以前没有使用过 Surfaceviews，但是如果你在[API](http://developer.android.com/reference/android/view/SurfaceView.html)中可以看到，SurfaceView 类没有名为“invalidate()”的函数。

也许你可以设法以某种方式重用这条线：

```
holder.unlockCanvasAndPost(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:15:53.000

您应该使用 a`ViewGroup`而不是 a `SurfaceView`。将`Resistor`-Views 作为子项添加到`MyView`，[适当地测量和布局它们](http://developer.android.com/guide/topics/ui/custom-components.html)，然后`ViewGroup`会自动处理它们的绘制。

`SurfaceView`要求您在单独的线程中进行绘图。您必须启动该线程`surfaceCreated`并根据需要继续重绘视图。对于像您发布的那样简单的视图，仅在 UI 线程中进行绘图是完全可以接受的。不需要`SurfaceView`。

# php - 无法在 OSX 上使用 PHP 连接到 memcached

> ID：11230547
> 
> 赞同：1
> 
> 时间：2012-06-27T16:05:06.827
> 
> 标签：php, macos, caching, memcached

我还安装了 memcache 和 php 扩展，它在 phpinfo() 中正确显示。

但是，当我尝试使用 PHP 对其进行测试时，它无法连接。

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("Could not connect"); 
```

第二行失败，但它甚至不返回“无法连接”，但浏览器只返回 No data recieved 错误。无论我是否设置错误报告，它都不会给我任何东西。

可能是什么问题呢？

编辑：

`netstat -na | grep 11211`显示：

```
tcp6       0      0  *.11211                *.*                    LISTEN     
tcp4       0      0  *.11211                *.*                    LISTEN     
udp6       0      0  *.11211                *.*                               
udp4       0      0  *.11211                *.* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:43:27.097

在确保 memcache 与 python 完美配合后，我知道我的 memcache.so 文件有问题。我浏览了论坛，发现在为扩展运行 /.configure 时我必须输入几个参数。我正确地重建了它，现在它工作正常。

# ruby - 运行从 incrontab 触发的 Ruby XML Parse

> ID：11230549
> 
> 赞同：1
> 
> 时间：2012-06-27T16:05:16.053
> 
> 标签：ruby, xml, json, bash, crontab

我在 incrontab 中有一个如下所示的条目：

```
/var/www/html/tmp_files/xml IN_CLOSE_WRITE sh /var/www/html/tmp_files/notify.sh $# $@ 
```

在 notify.sh 我们有：

```
#!/bin/sh
filename="$1" 
csvname="fightcard.cmd.csv" 

if   [ "${filename:0:1}" == "$action" ]; then
                csvname="action.cmd.csv"
elif [ "${filename:0:1}" == "$stats" ]; then
                csvname="stats.cmd.csv"
else
        sleep 0.1
fi

#execute the ruby statement............
ruby /var/www/html/processXML.rb -f /var/www/html/tmp_files/xml/${filename} -c /var/www/html/${csvname} -l /var/www/html/tmp_files/logs/${filename}.log > /var/www/html/tmp_files/json/${filename%.xml}.json 
```

我已将 notify.sh 修改为可执行文件。

所以我们ftp一个文件进去`/var/www/html/tmp_files/xml/`

当我从命令运行脚本时，一切正常，如下所示：

```
sh /var/www/html/tmp_files/notify2.sh Stats.xml 
```

但是每当它从 incrontab 事件中触发时，我都会得到一个空白的 json 文件。

有人知道什么给了吗？

# php - div 中的 PHP if 语句。无重复

> ID：11230550
> 
> 赞同：0
> 
> 时间：2012-06-27T16:05:18.857
> 
> 标签：php, database, html, if-statement

我有一个由 gigpress Wordpress 插件运行的数据库。

这链接到相关的 wordpress 帖子，然后将显示相关的日期（无限数量）和场所（5 个场所）。

我已经成功地按场地过滤了数据并将输出包装在一个 div 中......

```
<div class="gigpress-related-park"> 
<?php if ( $showdata['venue'] == "VENUENAME" ) 
{echo "<div class=\"gigpress-related-item\">"; 
echo $showdata['date_long']; echo $showdata['venue']; 
echo "</div>"; } ?>
</div> 
```

我需要做的是为每个场地创建一个 div（垂直列），然后在该 div 中显示日期。但是，当我尝试将上述 php 包装在一个 div 中时，该 div 只是与输出一起重复。

对不起，我含糊其辞，我没有其他办法来表达我的问题。

活生生的例子。 [http://www.gocompletely.com/toni-warne/](http://www.gocompletely.com/toni-warne/) <- 此活动有一个场地，应该出现在一个列中。 [http://www.gocompletely.com/best-of-british-wrestling/](http://www.gocompletely.com/best-of-british-wrestling/) <-本次活动在多个场地举行，不适合柱子，只剩下浮动。

谢谢！如果我需要提供更多详细信息，请告诉我，我会尽力提供。

***编辑更多信息*** 我需要上面的代码才能得到以下结果：

```
<div class="gigpress-related-park">
<div class="gigpress-related-item">
1st July, 2012Southport
2nd July, 2012Southport
3rd July, 2012Southport
</div>
</div>
<div class="gigpress-related-park">
<div class="gigpress-related-item">
1st July, 2012Brean Sands
2nd July, 2012Brean Sands
3rd July, 2012Brean Sands
</div>
</div> 
```

我希望这更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:17:07.937

有一个有效的浮动：`.gigpress-related-park` 我想删除它应该可以解决问题。

还要确保清除所有浮动，因为这是最常见的错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T16:20:06.043

只需添加css类`clear:left;`，`.gigpress-related-park`这应该会有所帮助。

# ios - 自 iOS 5.1 以来自定义 MPVolumeView 拇指图像未垂直居中

> ID：11230552
> 
> 赞同：7
> 
> 时间：2012-06-27T16:05:20.960
> 
> 标签：ios, uislider, ios5.1, mpvolumeview

我正在构建一个需要 MPVolumeView 来控制音量的应用程序。它在 iOS 5.1 之前完美运行，但自从 5.1 更新以来，拇指图像不再垂直居中。我尝试了一些方法，例如更改想象尺寸、调整视图（和滑块）的大小，但似乎没有任何效果，拇指不再垂直居中。我获得居中拇指的唯一方法是使用默认的 iOS 拇指。

我尝试将 UISlider 添加到具有精确的最小、最大和拇指图像的另一个视图中，并且该视图居中很好。

这是 MPVolumeView 的代码：

```
MPVolumeView *volumeView;
volumeView = [[[MPVolumeView alloc] initWithFrame:volumeViewHolder.bounds] autorelease];
[volumeViewHolder addSubview:volumeView];

UIView  *volumeViewSlider;
for (UIView *view in [volumeView subviews])
{
    if ([[[view class] description] isEqualToString:@"MPVolumeSlider"])
    {
        volumeViewSlider = view;
    }
}

[(UISlider *)volumeViewSlider setThumbImage:sliderHandleIcon forState:UIControlStateNormal];
    [(UISlider *)volumeViewSlider setMinimumTrackImage:leftTrackImage forState:UIControlStateNormal];
    [(UISlider *)volumeViewSlider setMaximumTrackImage:rightTrackImage forState:UIControlStateNormal]; 
```

volumeViewHolder 只是一个 153x33 的 UIView。我在屏幕截图中将拇指放在绿色中。 ![在此处输入图像描述](../Images/844bdbc82d0453fdf61c14857f7f2e57.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T16:16:21.493

也许更好的解决方案：

使用底部透明边框的更大图像。Retina Displays 应该在 10 像素左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T22:37:14.753

我在一个项目中解决了同样的问题。必须使用 alpha = 0 设置左右部分的颜色 - 这意味着没有拇指的所有滑块都是透明的（没有它的可移动部分）。在我们必须为滑块线创建自定义视图之后，没有拇指。在这个视图中，任何颜色的部分都可以根据需要移动，上或下，左或右。它使用为您的场合定义的 y 获得：

```
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(x,y,width, height)]; 
```

并将滑块添加到这一行作为子视图。结果视图将是滑块。例如：

```
UISlider *ourSlider  = ...; 
//initialise UISlider

ourSlider.minimumTrackTintColor = [UIColor colorWithRed:0 green:122.0f/255.0f blue:1 alpha:0];

ourSlider.minimumTrackTintColor = [UIColor colorWithRed:0 green:122.0f/255.0f blue:1 alpha:0];

UIView *lineOfSliderWithoutThumb = ... ;
// creation it

[lineOfSliderWithoutThumb addSubview:ourSlider]; 
```

//这行OfSliderWithoutThumb之后是我们自定义的uislider。注意：这里的颜色用作 UISlider 左右两侧的默认滑块颜色。

# asp.net-mvc - 收到消息“存储更新、插入或删除语句影响了意外的行数 (0)”？

> ID：11230553
> 
> 赞同：0
> 
> 时间：2012-06-27T16:05:23.303
> 
> 标签：asp.net-mvc, entity-framework, razor, primary-key

另一个大问题，在这里。

我有模型：

```
public class Lead
    {
        [System.ComponentModel.DataAnnotations.Column("le_codlead")]
        public int LeadID {get; set; }

        [System.ComponentModel.DataAnnotations.Column("le_descr1")]
        [Required(ErrorMessage="Inserire Nome del Lead")]
        [Display(Name="Nominativo Lead")]
        public string Name1 {get; set;}

        [System.ComponentModel.DataAnnotations.Column("le_descr2")]
        [Display(Name = "Nominativo secondario")]
        public string Name2 { get; set; }
        ...
        ...
        ...
    } 
```

控制器（用于创建方法）：

```
[HttpPost]
        public ActionResult Create(Lead lead)
        {
            if (ModelState.IsValid)
            {
                db.Leads.Add(lead);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }
            return View(lead);
        } 
```

这是视图：

```
@model CRMArcadia.Models.Lead

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true, "ATTENZIONE! Compilare tutti i campi obbligatori")
    <fieldset>
        <legend>Lead</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name1)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name1)
            @Html.ValidationMessageFor(model => model.Name1)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Name2)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name2)
            @Html.ValidationMessageFor(model => model.Name2)
        </div>
        ...
        ...
        ...
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset> } 
```

但是，当我尝试插入新的潜在客户时，它会引发异常，如帖子标题：实体框架：“存储更新、插入或删除语句影响了意外数量的行 (0)。” 我在网上读到它是由 ID 键（在本例中为 LeadID）未更新引起的：他们建议在视图中为 ID 键插入一个 hiddenfor 属性，所以我这样做了：

```
 @Html.HiddenFor(model => model.LeadID) 
```

但是，在“创建”按钮的压力下，没有任何反应。

请问有人对此问题有解决方案（或解决方法；））吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:46:54.893

你有一些额外的层来与 EF 通信吗？你的实体上下文是什么？

**对于更新场景：**

如果您对创建/编辑使用相同的操作，则只需将 `@Html.HiddenFor(model => model.LeadID)` -hidden 字段放在块之间`@using (Html.BeginForm()) { .... </fieldset> }`。

如果没有帮助，请查看这篇文章[MSDN - Working with Objects](http://msdn.microsoft.com/en-us/library/bb738470)

# sql - 选择具有“坏”数据的不同行时聚合行

> ID：11230560
> 
> 赞同：0
> 
> 时间：2012-06-27T16:06:12.177
> 
> 标签：sql, sql-server, tsql

标题有点含糊，但让我告诉你我想做什么，并告诉你我的数据有什么问题。

我需要总结表中所有唯一行的单元格值（大小）。但是我的数据有点“坏”。我正在使用 MAPI 并且 MAPI 返回的消息大小对于相同的消息内容可能会不确定地不同。

我有两个类似的表/任务：消息和附件。处理附件更容易，因为 SHA1 哈希总是与附件大小相关。附件数据如下所示（制表符分隔，Excel 就绪）：

```
Hash Size
0x0015A93FFFB1726E6647F94F47F4998AC699A455 97
0x0015A93FFFB1726E6647F94F47F4998AC699A455 97
0x0020CE1810B56CC17F6CFD0A0B6121592825F7E5 85
0x0086077DD1E4AF6A38014AB505105B05F8F5311E 62
0x0086077DD1E4AF6A38014AB505105B05F8F5311E 62
0x00A6510EEDB20A27B00B23416CF755715647A351 85
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777
0x011C9258A0E16E25662E8F3BEE8A1462C175C117 87777 
```

这是我用来获取表上所有重复附件的总大小的查询：

```
select
    sum(at.sz) as Size
from
(
    select distinct
        Hash,
        sz = Size * ((sum(1) over (partition by Hash)) - 1)
    from
        Attachment
) as at 
```

（我从附件计数中减去 1 以获得真正的重复计数：总附件 - 1 = 此附件的重复次数）

现在，真正的问题在于消息，因为 MAPI 报告的消息大小包含所有隐藏的废话，并且相同内容 + 附件的消息大小可能不同（请注意，对于具有相同哈希值的某些消息，大小不同）：

```
Hash Size
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3248
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3248
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3260
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3260
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3264
0x001B05F4D041EB0E61ADDEA45A1F7AFAD5C088AB 3266
0x00510D4B3A9D42C8D8E236950B7FBBD5FB716698 12040
0x00D92C8EB7E718EF418BC9D843D760FD1F4B208B 3657
0x00D92C8EB7E718EF418BC9D843D760FD1F4B208B 3659
0x00D92C8EB7E718EF418BC9D843D760FD1F4B208B 3671
0x011683250CC8D779EC3F33C23209C26E27E25E73 5143
0x016D424B6B4B7DDB4856D1660ECBFEBDD3ECACCA 3531
0x016D424B6B4B7DDB4856D1660ECBFEBDD3ECACCA 3543
0x016D424B6B4B7DDB4856D1660ECBFEBDD3ECACCA 3549
0x016D424B6B4B7DDB4856D1660ECBFEBDD3ECACCA 3559 
```

对于这样的数据，上面的查询无法返回任何合理的结果，因为不同对的计数并不总是 = 1。

我可以为相同的哈希选择任何一种大小并在求和中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:27:19.283

```
with HashDups as (
  select Hash,
         (count(*)-1)*max(size) as size
    from Messages
   group by Hash
)
select sum(size) as size from HashDups 
```

当然，同样的构造也适用于附件。

我不完全理解不同大小的问题。也许以下会更准确。它假设每个“重复”的报告大小是真实的（重复如何具有不同的大小？）。您可以通过从总和中减去最小和最大大小来计算每个哈希值的最小和最大重复大小。然后您可以计算最小和最大总复制大小。你最终的真实价值应该在这两个极端之间。

```
with HashDups as (
  select Hash,
         sum(size)-max(size) as minDupSize,
         sum(size)-min(size) as maxDupSize
    from MAPI
   group by Hash
)
select sum(minSupSize) as minDupSize,
       sum(maxDupSize) as maxDupSize
  from HashDups 
```

# ruby-on-rails-3 - Rails：使用设计退出后如何重定向到特定页面

> ID：11230562
> 
> 赞同：0
> 
> 时间：2012-06-27T16:06:17.387
> 
> 标签：ruby-on-rails-3

我有一个关于在 Rails 中使用 Devise 的问题。注销（破坏用户会话）后如何重定向到特定页面？

我在应用程序控制器中尝试了以下操作，但似乎不起作用：

```
 def after_sign_out_path_for(resource_or_scope)
    root_path 
  end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:33:42.497

这应该根据[wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Change-the-redirect-path-after-destroying-a-session-i.e.-signing-out)工作。

也许你错过了最后一行：

> 您还应该覆盖`Devise::Controllers::Helpers#stored_location_for`应用程序控制器中的方法，以返回`nil`. 这也适用于`after_sign_in_path_for`。YMMV。

# design-patterns - 辛格尔顿的后果问题

> ID：11230563
> 
> 赞同：2
> 
> 时间：2012-06-27T16:06:26.590
> 
> 标签：design-patterns, singleton

我正在使用 GoF 的书学习单例模式。当我阅读它的后果时，我遇到了一个问题：

*   **比类操作更灵活**：*封装单例功能的另一种方法是使用类操作（即 C++ 中的静态成员函数或 Smalltalk 中的类方法）。但是这两种语言技术都很难改变设计以允许一个类的多个实例。此外，C++ 中的静态成员函数永远不是虚拟的，因此子类不能多态地覆盖它们。*

我真的不明白这个解释。我认为类操作（静态方法）也可以允许一个类的多个实例，如果我使用实例的静态列表，但我当然知道我错了。

那么，任何人都可以给我一些例子来帮助我理解这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:44:17.867

最初的想法是你在类中只使用静态成员，以及只对这些静态成员进行操作的静态方法，然后*将类本身*用作单例。不需要或不允许运行时实例化 - 如果你实例化任何东西，它是另一种类型（实例，而不是类。在 smalltalk 中，它是类的实例，而不是元类的实例）。

因此，如果您管理此类实例的列表，则不会创建此类型的多个实例；您已经创建了一个单例（类），其中*包含*非单例类型实例的列表。

从某种意义上说，每个类都是一个单例。只是由于文中提到的原因，在程序中使用一个作为单例对象通常不是一个好主意。

# c# - xUnit 和 Moq 不支持 async - await 关键字

> ID：11230567
> 
> 赞同：21
> 
> 时间：2012-06-27T16:06:34.503
> 
> 标签：c#, moq, async-await, xunit.net

我正在尝试发现如何将 async 和 await 关键字应用于我的 xUnit 测试。我正在使用 xUnit 1.9 和 Async CTP 1.3。这是我的测试用例

我有一个接口，它指定一个异步方法调用

```
public interface IDoStuffAsync
{
    Task AnAsyncMethod(string value);
} 
```

我有一个使用接口并调用异步方法的类

```
public class UseAnAsyncThing
{
    private readonly IDoStuffAsync _doStuffAsync;

    public UseAnAsyncThing(IDoStuffAsync doStuffAsync)
    {
        _doStuffAsync = doStuffAsync;
    }

    public async Task DoThatAsyncOperation(string theValue)
    {
        await _doStuffAsync.AnAsyncMethod(theValue);
    }
} 
```

在我的测试中，我希望检查该方法`DoThatAsyncOperation`是否使用正确的值调用该方法，因此我模拟接口并使用 Moq 来验证调用

```
 [Fact]
    public async void The_test_will_pass_even_though_it_should_fail()
    {
        var mock = new Mock<IDoStuffAsync>();
        var sut = new UseAnAsyncThing(mock.Object);

        mock.Setup(x => x.AnAsyncMethod(It.IsAny<string>()));

        await sut.DoThatAsyncOperation("test");

        // This won't throw a Moq.MockExcpetion so the test appears to pass
        // However it does not run
        mock.Verify(x => x.AnAsyncMethod("fail"));
    } 
```

此测试使用`async`and`await`关键字。当它运行时，它会错误地通过，因为 Moq 应该断言验证失败。调用后的任何代码`sut.DoThatAsyncOperation("test");`都不会运行

```
 [Fact]
    public void This_will_work_and_assert_the_reslt()
    {
        var mock = new Mock<IDoStuffAsync>();
        var sut = new UseAnAsyncThing(mock.Object);

        mock.Setup(x => x.AnAsyncMethod(It.IsAny<string>()));

        sut.DoThatAsyncOperation("test").ContinueWith(y => { });

        // This won't throw a Moq.MockExcpetion so the test appears to pass
        // However it does not run
        mock.Verify(x => x.AnAsyncMethod("fail"));
    } 
```

这个测试是在没有 await 和 async 关键字的情况下设置的，并且可以通过。

这是 xUnit 和 Moq 的预期行为吗？

* * *

**更新**

感谢斯蒂芬的评论，我设法通过进行两项更改来修复第一个测试。测试现在返回一个 Task 而不是 void，Mock 也返回一个 Task。

```
 [Fact]
    public async Task The_test_will_pass_even_though_it_should_fail()
    {
        var mock = new Mock<IDoStuffAsync>();
        var sut = new UseAnAsyncThing(mock.Object);

        mock.Setup(x => x.AnAsyncMethod(It.IsAny<string>())).ReturnAsync(true);

        await sut.DoThatAsyncOperation("test");

        // This now fails as it should
        mock.Verify(x => x.AnAsyncMethod("fail"));
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T17:59:59.813

将您的单元测试方法更改为 return`Task`而不是`void`，它应该可以工作。[正在考虑在未来的版本中](http://xunit.codeplex.com/workitem/9752)支持`async void`单元测试。

我在我的博客上详细描述了[为什么异步单元测试默认不起作用。](http://nitoprograms.blogspot.com/2012/02/async-unit-tests-part-1-wrong-way.html)（我的博客示例使用 MSTest，但所有其他测试运行程序都存在相同的问题，包括 xUnit pre-1.9）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T00:37:03.883

我尝试使用您的“更新”中的代码，但它在我正在模拟的异步方法处停止。

```
 var tcs = new TaskCompletionSource<T>();
    tcs.SetResult(default(T));

    mock.Setup(x => x.AnAsyncMethod(It.IsAny<T>())).Returns(tcs.Task); 
```

所以要解决这个问题，我必须更改“返回”方法：

```
 mock.Setup(x => x.AnAsyncMethod(It.IsAny<T>())).Returns(()=> { return tcs.Task; } ); 
```

# iphone - iOS - 如何通过 Objective-C 定位我的 iPad/iPhone 上的所有文件

> ID：11230570
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:06:42.143
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我正在编写一个应用程序，允许用户在我的 iPhone/iPad 上浏览具有特定扩展名（比如 PDF、XLS）的所有文件。然后应用程序会将文件上传到服务器。

该应用程序应该能够找到不在其沙箱目录中的文件。

如何在 Objective-C 中做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:09:23.163

这是不可能的。您的应用程序无法访问其沙盒之外的文件或目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:35:33.660

您可以让用户将其他应用程序中的文档打开到您的应用程序中，然后将它们发送到服务器。在应用程序中，您必须指定要打开的文档类型 (UTI)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:11:37.170

你不能这样做。除非设备越狱，否则您的应用只能访问其沙箱目录中的文件。如果您的应用程序甚至尝试读取沙盒之外的文件，它将被 App Store 拒绝。

# list - 协方差和 Scala 集合

> ID：11230571
> 
> 赞同：1
> 
> 时间：2012-06-27T16:06:45.940
> 
> 标签：list, scala, set, covariance

我试图了解 Scala 集合的协方差。我有以下内容：

```
abstract class MediaFormat{
    def name:String
    def status:String
}

case class H264_high(status:String="on") extends MediaFormat {
    def name = "h264_high"
}
case class H264_med(status:String="on") extends MediaFormat {
    def name = "h264_med"
}
case class H264_low(status:String="on") extends MediaFormat {
    def name = "h264_low"
}
case class H264_syndication(status:String="off") extends MediaFormat {
    def name = "h264_syndication"
} 
```

我想做的是拥有一组所有这些格式，因为我需要一个集合，其中每种格式只出现一次，所以我尝试了：

```
object MediaFormat {
    val allFormats:Set[MediaFormat] = Set(H264_high,H264_low)
} 
```

这给了我一个编译时异常，因为据我所知，Set 是不变的。

所以我想，我想我只需要使用一个 List 并自己管理重复的值

但后来我试试这个：

```
object MediaFormat {
    val allFormats:List[MediaFormat] = List(H264_high,H264_low)
} 
```

因为据我了解， List*是*协变的，但仍然无法编译。

有人可以帮助我了解我应该做些什么来收集我的格式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:11:32.300

它无法编译，因为您引用的是*伴随对象*（模块），而不是案例类！编译错误（您应该已经发布）与方差无关。如果您这样做*，它将*起作用：`Set`

```
val allFormats: Set[MediaFormat] = Set(H264_high(), H264_low())
                                                ^^          ^^ 
```

或者，

```
val allFormats = Set[MediaFormat](H264_high(), H264_low()) 
```

但是，鉴于您对问题的描述，将这些作为案例类是没有意义的；我只会让它们成为模块，即

```
case object H264_syndication extends MediaFormat {
  def status = "off"
  def name = "h264_syndication"
} 
```

然后你的原始代码就可以正常工作了。或者我会让它们如下所示：

```
case class MediaFormat(status: String, name: String)
val H264_syndication = MediaFormat(status ="off", name = "h264_syndication") 
```

我认为这是我的偏好；老实说，我很少再使用抽象类了（通常，我是不诚实的）。

* * *

*解释*：协方差的含义如下：

> `G[S] <: G[T]`当且当`S <: T`

不变的事实`Set`意味着 a`Set[S]`不是`Set[T]`(for `S <: T`) 的子类型，但这**并不意味着**这样的 a`Set[T]`可能不包含type的*元素*`S`。

# jquery - 设置选定的索引不起作用，jquery .Val()

> ID：11230578
> 
> 赞同：1
> 
> 时间：2012-06-27T16:07:14.513
> 
> 标签：jquery, internet-explorer, firefox, jquery-selectors

我已经尝试了所有这些不同的方法来设置选择的值。我只知道 id/index 值而不知道文本描述。这些都不能在 IE 中工作，除了在 FireFox 中的最后一个工作。

我已设置警报以确保 contactList.PerType_ID 有一个值，这是一个数字

谁能告诉我我做错了什么。

```
var perId = parseInt(contactList.PerType_ID);

$('#ddContactType').val(perId);

$('#ddContactType').val(3);

$('#ddContactType option[value=3]').attr('selected', 'selected');

$('#ddContactType option[value='+perId+']').attr('selected', 'selected'); //does not work in ff 
```

**原来我试图设置的控件在 IE 中还不存在。我在服务调用之前移动了对该方法的调用，并且使用上面列出的所有方法以及下面得到的唯一响应，控件加载正常。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:08:40.010

尝试[道具](http://api.jquery.com/prop/)：

```
$('#ddContactType option[value=' + perId + ']').prop('selected', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:03:38.690

尝试将参数作为字符串传递：

```
$('#ddContactType').val("3"); 
```

# iphone - Windows Azure 工具包

> ID：11230579
> 
> 赞同：0
> 
> 时间：2012-06-27T16:07:18.030
> 
> 标签：iphone, objective-c, ios, ipad, azure

我正在尝试在[此处](https://github.com/WindowsAzure-Toolkits/wa-toolkit-ios)构建和运行 Windows Azure 工具包中包含的一些示例应用程序，但它似乎无法找到`libwatoolkitios.a`构建所需的文件。我没有以任何方式修改项目，我认为应该自动包含这个文件，那么我如何得到它呢？你们是如何成功编译应用程序的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:32:21.380

库 libwatoolkitios.a 不作为下载提供，而是您需要先构建它，[在文档中描述](https://github.com/WindowsAzure-Toolkits/wa-toolkit-ios/blob/master/README.md)如下：

1.  打开 watoolkit-lib Xcode 项目。
2.  编译项目以进行发布。
3.  将 .a 文件和头文件放在您可以从项目中引用的某个位置（对于此示例，假设为 lib）。

# itext - iText HTML Worker 问题

> ID：11230580
> 
> 赞同：2
> 
> 时间：2012-06-27T16:07:25.590
> 
> 标签：itext

我正在使用 iText Java API 使用`HTMLWorker`该类将 HTML 转换为 PDF。我需要在表格单元格中添加一个 html 链接，但这会出现以下错误。

> java.lang.ClassCastException：com.itextpdf.text.html.simpleparser.CellWrapper 与 com.itextpdf.text.Paragraph 不兼容

```
<tr>
    <td width="45%">Name:Test123</td>
    <td width="25%">Date: July 2012</td>
    <td width="30%"><a href="google.com">Link</a></td>
</tr> 
```

知道如何解决这个问题或任何替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:31:27.823

如果可以的话，我建议你转储 HTMLWorker，因为它已经停止支持 XML Worker：

*   项目：http: [//sourceforge.net/projects/xmlworker/](http://sourceforge.net/projects/xmlworker/)

*   演示：[http ://demo.itextsupport.com/xmlworker/](http://demo.itextsupport.com/xmlworker/)

*   文档：[http ://demo.itextsupport.com/xmlworker/itextdoc/index.html](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)

# domain-driven-design - 不禁将域实体视为浪费。为什么？

> ID：11230583
> 
> 赞同：3
> 
> 时间：2012-06-27T16:07:36.123
> 
> 标签：domain-driven-design, repository-pattern

当我阅读了有关 DDD、模式和许多其他应用程序架构主题的内容时，我的脑海中有一个问题一直困扰着我数月之久。我将根据 MVC Web 应用程序来构建它，但我敢肯定，问题是更广泛的。就是这样：遵守领域实体是否会在应用程序中造成僵化和低效？ 

DDD 方法对于管理应用程序的业务逻辑以及作为与利益相关者合作的一种方式非常有意义。但对我来说，它在多层应用程序的上下文中分崩离析。也就是说，很少有场景需要一个实体的所有数据，或者甚至两个存储库都拥有这一切。就其本身而言，这还不错，但这意味着我进行了多个查询，返回了一堆我不需要得到的一些属性。一旦完成，无关信息要么被传递到视图，要么存在丢弃、合并和映射数据到 DTO 或视图模型的开销。我需要生成大量报告，并且问题似乎在那里被放大了。每个都需要对信息进行独特的切片或聚合，SQL 可以做得很好，但存储库不能，因为它们 预计将返回完整的实体。老实说，这似乎很浪费，原则上我不想破坏数据库并产生不需要的网络流量。从这样的问题 [存储库层是否应该返回数据传输对象 (DTO)？](https://stackoverflow.com/questions/5068984/should-the-repository-layer-return-data-transfer-objects-dto)似乎我不是唯一一个为这个问题而苦苦挣扎的人。那么它似乎强加的限制的答案是什么？ 

感谢一个新的和困惑的 DDD-er。  

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T20:04:27.930

这里真正的问题是什么？处理业务规则和查询数据是两个截然不同的问题。这种认识将我们引向了 CQRS——命令-查询职责分离。那是什么？您只是不要对这两个任务使用相同的模型：领域模型是关于行为、执行业务流程、处理命令的。并且有一个单独的报告模型用于显示。通常，每个视图可以包含一个表。这些表仅包含相关信息，因此您可以摆脱 DTO、AutoMapper 等。

这两个模型如何同步？它可以通过多种方式完成：

*   报告模型可以建立在数据库视图之上
*   数据库复制
*   领域模型可以发出包含有关每个更改的信息的事件，并且它们可以由非规范化器处理，更新报告模型中的适当表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T10:48:04.377

> 正如我所阅读的有关 DDD、模式和许多其他应用程序架构主题的内容

领域驱动设计不是关于模式和架构，而是关于根据业务领域设计代码。与其考虑存储库和层，不如考虑您要解决的问题。“开始康复”的最简单方法是将重命名`ProductRepository`为 just `Products`。

> 遵守领域实体是否会在应用程序中造成僵化和低效？

效率低下来自糟糕的建模。[需要引用]

> DDD 方法对于管理应用程序的业务逻辑以及作为与利益相关者合作的一种方式非常有意义。但对我来说，它在多层应用程序的上下文中分崩离析。

[层不是层](http://gojko.net/2010/06/11/udi-dahan-the-biggest-mistakes-teams-make-when-applying-ddd/)

> 也就是说，很少有场景需要一个实体的所有数据，或者甚至两个存储库都拥有这一切。就其本身而言，这还不错，但这意味着我进行了多个查询，返回了一堆我不需要得到的一些属性。

根据需要查询该数据。不要试图将你的问题打包成一些“现成的解决方案”。相反 - 向他们学习并只应用解决问题所必需的东西。

> 每个都需要对信息进行独特的切片或聚合，SQL 可以做得很好，但存储库不能，因为它们预计会返回完整的实体。

[http://ayende.com/blog/3955/repository-is-the-new-singleton](http://ayende.com/blog/3955/repository-is-the-new-singleton)

> 那么它似乎强加的限制的答案是什么？

“似乎”

* * *

[顺便说一句，互联网上到处都是这样](http://ayende.com/blog/19457/review-microsoft-n-layer-app-sample-part-i)的东西（我的意思是那个示例应用程序）。
要了解 DDD 是什么，请仔细阅读[蓝皮书。](https://rads.stackoverflow.com/amzn/click/com/0321125215)两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:34:43.150

如果你认为完全成熟的 DDD 对你的场景来说太过分了，那么也许你需要退一步，看看更接近 Active Record 的东西。

我使用 DDD，但在我的场景中我必须支持多个前端；几个网站和一个 WinForms 应用程序，以及一组允许与其他自动化流程交互的服务。在这种情况下，额外的复杂性是值得的。我使用 DTO 将我的数据表示传输到各个表示层。将域实体映射到 DTO 的 CPU 开销很小 - 与网络调用和数据库调用相比，这是一个舍入误差。管理这种复杂性也有开销。[我通过使用AutoMapper](http://automapper.org/)在一定程度上缓解了这种情况。我的存储库返回完全填充的域对象。我的服务层将映射到/来自 DTO。在这里，我们可以展平域对象、组合域对象等，以生成更加表格化的数据表示。

[Dino Esposito 在这里](http://msdn.microsoft.com/en-us/magazine/ee236638.aspx)写了一篇关于此主题的 MSDN 杂志文章- 您可能会觉得这很有趣。

所以，我想回答你的“为什么”问题——像往常一样，这取决于你的上下文。DDD可能太费劲了。在这种情况下，做一些更简单的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T11:45:15.117

> 每个都需要对信息进行独特的切片或聚合，SQL 可以做得很好，但存储库不能，因为它们预计会返回完整的实体。

将方法添加到您的存储库以仅返回您想要的内容，例如 IOrderRepository.GetByCustomer 在 DDD 中完全可以。您还可以使用[查询对象模式](http://martinfowler.com/eaaCatalog/queryObject.html)或[规范](http://martinfowler.com/apsupp/spec.pdf)来使您的存储库更通用；只记得不要在存储库的接口中使用任何特定于 ORM 的东西（例如 NHibernate 的 ICriteria）

# regex - URI 路由中的多个通配符不起作用

> ID：11230600
> 
> 赞同：0
> 
> 时间：2012-06-27T16:08:26.063
> 
> 标签：regex, codeigniter, url

我对 codeigniter 的 URI Routes 功能有一个奇怪的问题......特别是围绕通配符的使用。

我正在尝试将以下 URL 路由到我的“位置”控制器，调用我的“编辑”方法：

```
http://foo.bar/stores/4fdbc15b8e08233c6d9f7d91/locations/4fdbc2ed8e08233c6d9f7d93/edit 
```

我的路线配置文件中有以下设置：

```
$route['stores/(:any)/locations/(:any)/edit'] = 'locations/edit'; 
```

但是...当我尝试指向上述 URL 的路径时，该站点就死了。

我曾尝试使用正则表达式，但不幸的是正则表达式不是我的强项，因此它也不起作用。

我查看了其他 stackoverflow 示例和其他站点，但没有什么能真正说明我拥有的奇怪 URL 结构。任何建议/决议将不胜感激。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:51:53.243

这是一个简单的技术来做你想做的事

```
$route['stores/(:any)'] = 'locations/edit'; 
```

然后，使用**uri_segment(n)**在编辑控制器函数中获取值。

简单的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:25:16.557

假设您的请求 uri 中的字符串是可变长度的，您可以尝试这样的事情：

```
$route['stores/([a-z0-9]*)/locations/([a-z0-9]*)/edit'] = 'locations/edit'; 
```

但是，您没有阐明要对正则表达式匹配的字符串执行什么操作。如果您只是将它们附加到末尾，您的路线将如下所示：

```
$route['stores/([a-z0-9]*)/locations/([a-z0-9]*)/edit'] = 'locations/edit/$1/$2'; 
```

在这种情况下，在您的控制器方法中，您可以使用[$this->uri_segment()](http://codeigniter.com/user_guide/libraries/uri.html)函数来解析字符串。

```
$firstHash = $this->uri_segment(3);
$secondHash = $this->uri_segment(4); 
```

# visual-studio - 使用不同的引用编译 Win32 和 x64 csproj

> ID：11230601
> 
> 赞同：0
> 
> 时间：2012-06-27T16:08:28.967
> 
> 标签：visual-studio, 64-bit, csproj

我想保留我的`.csproj`项目并编译两个版本的 dll，一个用于`Win32`平台，另一个用于`x64`平台。

我遇到了一个问题，因为我需要为每个平台使用不同的引用

例如，对于 ExternalReference.dll

```
 <Reference Include="ExternalReference">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>c:\win32_repository\ExternalReference.dll</HintPath>
 </Reference> 
```

和`x64`：

```
 <Reference Include="ExternalReference">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>c:\x64_repository\ExternalReference.dll</HintPath>
 </Reference> 
```

我读到了这个`$(ReferencePath)`变量，但它似乎只在`.csproj.user`文件中工作，而且这些文件不在我们的版本控制中，所以这不是一个解决方案。

你们有什么想法吗？我可以`.csproj`像这样定义一个自定义变量吗：

```
<PropertyGroup Condition=" '$(Platform)' == 'Win32' >
   <CustomReferencePath>c:\win32_repository</CustomReferencePath>
</PropertyGroup>
<PropertyGroup Condition=" '$(Platform)' == 'x64' >
   <CustomReferencePath>c:\x64_repository</CustomReferencePath>
</PropertyGroup> 
```

然后像这样添加参考：

```
<Reference Include="ExternalReference">
   <SpecificVersion>False</SpecificVersion>
   <HintPath>$(CustomReferencePath)\ExternalReference.dll</HintPath>
</Reference> 
```

但它似乎不起作用，我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:22:19.053

为什么不简单：

```
<Reference Include="ExternalReference" Condition=" '$(Platform)' == 'Win32'>
  <SpecificVersion>False</SpecificVersion>
  <HintPath>c:\win32_repository\ExternalReference.dll</HintPath>
</Reference>
<Reference Include="ExternalReference" Condition=" '$(Platform)' == 'x64'>
  <SpecificVersion>False</SpecificVersion>
  <HintPath>c:\x64_repository\ExternalReference.dll</HintPath>
</Reference> 
```

# django - 如何在 django-tastypie 中组合多种资源？

> ID：11230607
> 
> 赞同：3
> 
> 时间：2012-06-27T16:09:02.267
> 
> 标签：django, tastypie

假设我有三个模型 Submission、Contact 和 SubmissionContact。

```
class Submission(models.Model):
  title = models.CharField(max_length=255, verbose_name='Title')
  ...

class Contact(models.Model):
  name = models.CharField(max_length=200, verbose_name='Contact Name')
  email = models.CharField(max_length=80, verbose_name='Contact Email')
  ...

class SubmissionContact(models.Model):
  submission = models.ForeignKey(Submission)
  contact = models.Foreign(Contact, verbose_name='Contact(s)') 
```

我可以使用一个 ModelResource 读取/写入所有这三个表吗？（基本上是在美味派的列表和细节上获取和放置动作）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:52:23.940

您可以将一个模型嵌套到另一个模型中，或者使用脱水循环为您的输出添加额外资源，例如考虑 Foo 和 Bar 模型

```
class FooResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()
        resource_name = 'foo'
        serializer = Serializer(formats=['xml', 'json'])
        excludes = ['date_created']

class BarResource(ModelResource):
    foo = fields.ForeignKey(FooResource, attribute='foo', full=True, null=True)

    class Meta:
        queryset = Bar.objects.all()
        resource_name = 'bar'
        serializer = Serializer(formats=['xml', 'json']) 
```

如果没有关系，您还可以执行以下操作（对于大型数据集，这会导致大量数据库开销，您可能需要重新考虑模型定义）：

```
class FooResource(ModelResource):
    class Meta:
        queryset = Foo.objects.all()
        resource_name = 'foo'
        serializer = Serializer(formats=['xml', 'json'])
        excludes = ['date_created']

    def dehydrate(self, bundle):
        obj = self.obj_get(id=bundle.data['id'])
        bundle.data['bar'] = Bar.objects.get(id=1).name
        return bundle 
```

# validation - 验证测试：如何验证 UI？

> ID：11230617
> 
> 赞同：1
> 
> 时间：2012-06-27T16:09:45.970
> 
> 标签：validation, testing, selenium, webdriver

我被要求在我们网站的 javascript 部分实施验证测试。我一直在考虑使用 selenium WebDriver。我们要测试的一件事是 UI：检查它是否“看起来”不错（必须对齐的东西是对齐的，框在正确的位置）。

目前，我发现的唯一选择是使用 Selenium 拍摄快照，然后将其与预先手动拍摄的测试快照进行比较，或者手动检查快照。快照比较不是很可维护，因为布局的任何更改都需要重新拍摄所有测试快照，并且手动检查非常耗时。

有谁知道实现这一目标的任何方式（在 Selenium 或其他方式中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:45:11.400

这不是很好，但在某种程度上可以做到。

对于**定位**，您可以使用 WebElement 的[`getLocation()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html#getLocation%28%29)（Java 文档，但相同的方法存在于所有 Selenium 绑定中）。请注意，大多数浏览器的呈现方式略有不同，因此在使用旧版 IE 时不要期望像素完美。此外，当没有找到 CSS 中定义的第一个字体并使用了替代字体时，位置可能会略有不同。不要严重依赖这种方法。但是，如果您能够使您的测试健全并且您的环境稳定，它就会起作用。

对于**对齐**，我编写了一个简单的 Java 方法来`WebDriver`断言一个元素在*视觉上位于*另一个元素的内部。

不应该有误报，但是在内部元素在视觉上位于内部但其（不可见）实际边框“向外窥视”的情况下可能会出现一些误报。但是，根据我的实际经验，我没有遇到过这个问题，因为好的网站表现良好并且不需要这样的黑客:)。尽管如此，它还是有点骇人听闻，而且 Selenium 并不是为这种类型的工作而设计的，因此实施更复杂的检查可能会更加困难。

```
public static void assertContains(WebElement outerElem, WebElement innerElem) {
    // get borders of outer element
    Point outerLoc = outerElem.getLocation();
    Dimension outerDim = outerElem.getSize();
    int outerLeftX = outerLoc.getX();
    int outerRightX = outerLeftX + outerDim.getWidth();
    int outerTopY = outerLoc.getY();
    int outerBottomY = outerTopY + outerDim.getHeight();

    // get borders of inner element
    Point innerLoc = innerElem.getLocation();
    Dimension innerDim = innerElem.getSize();
    int innerLeftX = innerLoc.getX();
    int innerRightX = innerLeftX + innerDim.getWidth();
    int innerTopY = innerLoc.getY();
    int innerBottomY = innerTopY + innerDim.getHeight();

    // assures the inner borders don't cross the outer borders
    final String errorMsg = "ughh, some error message";
    final boolean contains = (outerLeftX <= innerLeftX)
            && (innerRightX <= outerRightX)
            && (outerTopY <= innerTopY)
            && (innerBottomY <= outerBottomY);
    assertTrue(errorMsg, contains);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:32:09.917

如果您使用术语验证的含义：“测试我们已经构建了正确的东西”，我会说自动化几乎是不可能的。如果不是让一些人真正使用它，您将如何判断它是否看起来令人愉悦或易于使用？

这种视觉检查也是人类擅长的。如果您在开发网站时使用该网站，您会很容易注意到布局等是否有问题。

对于功能自动化测试是个好主意。

# wso2 - WSO2 银行示例 JMS 问题

> ID：11230618
> 
> 赞同：0
> 
> 时间：2012-06-27T16:09:49.450
> 
> 标签：wso2, wso2esb

我尝试了 WSO2 提供的银行示例，当我执行所有步骤时，我看到了这个错误：

```
[2012-06-27 21:32:21,404]  INFO - LogMediator To: http://shivaji:8283/services/AccountServiceProxy,WSAction: urn:createAccount,SOAPAction: urn:createAccount,ReplyTo: http://www.w3.org/2005/08/addressing/anonymous,MessageID: urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846,Direction: request,debug = accountProxy,Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:To>http://shivaji:8283/services/AccountServiceProxy</wsa:To><wsa:MessageID>urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846</wsa:MessageID><wsa:Action>urn:createAccount</wsa:Action></soapenv:Header><soapenv:Body><createAccount xmlns="http://hcc.wso2">
   <hcc:customerId xmlns:hcc="http://hcc.wso2">9_Duggi</hcc:customerId>
   <hcc:isNewCustomer xmlns:hcc="http://hcc.wso2">0</hcc:isNewCustomer>
   <hcc:accountType xmlns:hcc="http://hcc.wso2">CURRENT</hcc:accountType>
</createAccount></soapenv:Body></soapenv:Envelope>
[2012-06-27 21:32:21,428]  INFO - TimeoutHandler This engine will expire all callbacks after : 86400 seconds, irrespective of the timeout action, after the specified or optional timeout
[2012-06-27 21:32:51,669]  WARN - JMSSender Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:shivaji-51236-1340812606914-5:1:1 with JMS correlation ID : ID:shivaji-51236-1340812606914-5:1:1:1:1
[2012-06-27 21:33:21,309]  INFO - LogMediator To: http://shivaji:8283/services/AccountServiceProxy,WSAction: urn:createAccount,SOAPAction: urn:createAccount,ReplyTo: http://www.w3.org/2005/08/addressing/anonymous,MessageID: urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846,Direction: request,debug = accountProxy,Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:To>http://shivaji:8283/services/AccountServiceProxy</wsa:To><wsa:MessageID>urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846</wsa:MessageID><wsa:Action>urn:createAccount</wsa:Action></soapenv:Header><soapenv:Body><createAccount xmlns="http://hcc.wso2">
   <hcc:customerId xmlns:hcc="http://hcc.wso2">9_Duggi</hcc:customerId>
   <hcc:isNewCustomer xmlns:hcc="http://hcc.wso2">0</hcc:isNewCustomer>
   <hcc:accountType xmlns:hcc="http://hcc.wso2">CURRENT</hcc:accountType>
</createAccount></soapenv:Body></soapenv:Envelope>
[2012-06-27 21:33:51,364]  WARN - JMSSender Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:shivaji-51236-1340812606914-7:1:1 with JMS correlation ID : ID:shivaji-51236-1340812606914-7:1:1:1:1
[2012-06-27 21:34:21,319]  INFO - LogMediator To: http://shivaji:8283/services/AccountServiceProxy,WSAction: urn:createAccount,SOAPAction: urn:createAccount,ReplyTo: http://www.w3.org/2005/08/addressing/anonymous,MessageID: urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846,Direction: request,debug = accountProxy,Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:To>http://shivaji:8283/services/AccountServiceProxy</wsa:To><wsa:MessageID>urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846</wsa:MessageID><wsa:Action>urn:createAccount</wsa:Action></soapenv:Header><soapenv:Body><createAccount xmlns="http://hcc.wso2">
   <hcc:customerId xmlns:hcc="http://hcc.wso2">9_Duggi</hcc:customerId>
   <hcc:isNewCustomer xmlns:hcc="http://hcc.wso2">0</hcc:isNewCustomer>
   <hcc:accountType xmlns:hcc="http://hcc.wso2">CURRENT</hcc:accountType>
</createAccount></soapenv:Body></soapenv:Envelope>
[2012-06-27 21:34:51,392]  WARN - JMSSender Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:shivaji-51236-1340812606914-9:1:1 with JMS correlation ID : ID:shivaji-51236-1340812606914-9:1:1:1:1
[2012-06-27 21:35:21,324]  INFO - LogMediator To: http://shivaji:8283/services/AccountServiceProxy,WSAction: urn:createAccount,SOAPAction: urn:createAccount,ReplyTo: http://www.w3.org/2005/08/addressing/anonymous,MessageID: urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846,Direction: request,debug = accountProxy,Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:To>http://shivaji:8283/services/AccountServiceProxy</wsa:To><wsa:MessageID>urn:uuid:b909e8e6-70f3-426a-8ba8-637120762846</wsa:MessageID><wsa:Action>urn:createAccount</wsa:Action></soapenv:Header><soapenv:Body><createAccount xmlns="http://hcc.wso2">
   <hcc:customerId xmlns:hcc="http://hcc.wso2">9_Duggi</hcc:customerId>
   <hcc:isNewCustomer xmlns:hcc="http://hcc.wso2">0</hcc:isNewCustomer>
   <hcc:accountType xmlns:hcc="http://hcc.wso2">CURRENT</hcc:accountType>
</createAccount></soapenv:Body></soapenv:Envelope>
[2012-06-27 21:35:51,405]  WARN - JMSSender Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:shivaji-51236-1340812606914-11:1:1 with JMS correlation ID : ID:shivaji-51236-1340812606914-11:1:1:1:1
[2012-06-27 21:36:58,781]  INFO - LogMediator To: /services/AccountServiceProxy,MessageID: urn:uuid:22be82b6-b160-4221-a421-34366240b8ac,Direction: request,debug = accountProxy,Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body /></soapenv:Envelope>
[2012-06-27 21:37:28,825]  WARN - JMSSender Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:shivaji-51236-1340812606914-13:1:1 with JMS correlation ID : ID:shivaji-51236-1340812606914-13:1:1:1:1 
```

可以请帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:57:38.470

这似乎是端点或 WSDL 端口中的问题。

您需要执行以下操作才能解决此问题。

1.  在应用服务器中启用 JMS 传输部署 MainFrameMojoService 后，从管理控制台获取 JMS 端点并将该服务 URL 设置为 MainFrameEP 端点。

2.  重新检查示例的所有 WSDL 文件并检查每个 WSDL 的端口部分，并确保更正那里的服务 URL。

如果您想了解更多信息，请查看[Developer Studio 网络研讨会](http://wso2.org/library/webinars/2012/05/enterprise-use-case-application-development-using-wso2-developer-studio)。

[您可以从这里](https://svn.wso2.org/repos/wso2/trunk/tools/ide/eclipse/docs/src/main/resources/samples/banking-sample/Webinar/)找到网络研讨会源代码。

希望这可以帮助！

谢谢并恭祝安康，

哈沙娜

# .net - .NET：我可以使用反射将 XML 文档作为资源导出到磁盘吗？

> ID：11230620
> 
> 赞同：0
> 
> 时间：2012-06-27T16:09:52.070
> 
> 标签：.net, reflection

男士 -

我玩这个东西已经有一段时间了，所以我不知道下面的想法是否现实和/或可能。有人可以让我知道这是否是一种可行的方法以及它在笨拙方面的排名吗？

设想：

*   我有一个 XML 文档，它代表报告的设计/元数据
*   该文档将临时发布到执行它的服务器。
*   通过启动第 3 方控制台应用程序并将其指向所述 XML 文档来进行发布。
*   服务器会将报告的输出返回给用户，然后删除服务器本身上发布的 XML 文档。
*   我不希望将 XML 文档永久地留在文件系统中，在那里好奇的用户可能会发现它并随意使用它。

问题：

我假设我可以将 XML 文档作为资源嵌入到程序集中。然后我可以**使用反射来获取资源并将其写入磁盘**，以便我可以将我的第 3 方控制台应用程序指向它吗？计划是在“发布”到服务器完成后立即将其从磁盘上删除。

只是寻找关于这个想法的一般反馈，如果有更聪明的方法来处理这种情况——通常有！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:42:34.917

你肯定能做到。看看[这篇文章](https://stackoverflow.com/questions/2820384/reading-embedded-xml-file-c-sharp)，了解如何实现你的合理（至少对我来说）想法的一些细节。我喜欢“代码在控制中”而不是“有希望的配置管理”概念。

# java - 由不同类的线程更新的值未反映在java中的另一个类中

> ID：11230624
> 
> 赞同：0
> 
> 时间：2012-06-27T16:10:07.547
> 
> 标签：java, multithreading

我已经编辑了我的问题并使其非常简单。首先在同一个文件中有两个类 HashMapClass：创建 ConccurentHashMap 和 NewThread 的实例：更新 hashMap

```
public class HashMapClass {

public static volatile ConcurrentHashMap serverMap = new ConcurrentHashMap();

public static void main(String args[]) {

    NewThread nt = new NewThread();
    nt.start();
}
}

class NewThread extends Thread {

@Override
public void run() {
    HashMapClass.serverMap.put("Ishan", new Integer(3));

System.out.println("Hash map is empty or not " + HashMapClass.serverMap.isEmpty());
  try {
        Thread.sleep(10000);
    } catch (InterruptedException ex) {
        Logger.getLogger(NewThread.class.getName()).log(Level.SEVERE, null, ex);
    }
    }
} 
```

现在这里显示 hashMap 不为空，但如果我尝试从其他类 New Class 访问它，它显示为空

```
public class NewClass {

public static void main(String s[]) {
    System.out.println("Hash map is empty or not " + HashMapClass.serverMap.isEmpty());
    Set setMap = HashMapClass.serverMap.entrySet();
    Iterator i = setMap.iterator();
    for (int f = 0; i.hasNext(); ++f) {
        Map.Entry me = (Map.Entry) i.next();
        System.out.println("key is" + me.getKey() + "value is :" + me.getValue());
    }
} 
```

}

这个类永远不会用数据更新。我希望现在这很容易理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:12:56.480

HashMap 不是线程安全的，因此如果您需要跨线程共享 HashMap，则需要引入某种形式的同步。

或者，更简单地说，使用[线程安全的 ConcurrentHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

另一方面，您可能会从阅读[有关并发的 Java 教程中](http://docs.oracle.com/javase/tutorial/essential/concurrency/)受益，尤其是有关[内存一致性错误](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)的部分。

**编辑**

根据您的评论，请看一个简单的示例，我认为该示例可以隔离您的问题-我机器上的输出是：

> 主要的哈希映射为空（第一次尝试）？真正的
> 哈希图在运行中为空？主要的虚假
> 哈希映射为空（第二次尝试）？错误的

```
public class Test {

    public static ConcurrentMap serverMap = new ConcurrentHashMap();

    public static void main(String[] args) throws InterruptedException {
        NewThread nt = new NewThread();
        nt.start();
        System.out.println("Hash map empty in main (1st attempt)? " + serverMap.isEmpty());
        Thread.sleep(200);
        System.out.println("Hash map empty in main (2nd attempt)? " + serverMap.isEmpty());
    }

    static class NewThread extends Thread {

        @Override
        public void run() {
            serverMap.put("Ishan", new Integer(3));

            System.out.println("Hash map empty in run? " + serverMap.isEmpty());
        }
    }
} 
```

**第二次编辑**

您可以从另一个类应用相同的逻辑 - 只需确保调用 NewThread.start 并等待足够长的时间（或者直接调用 NewThread.run 以便它在同一个线程中运行而您不必等待）：

```
public class NewClass {

    public static void main(String s[]) throws InterruptedException {
        new Test.NewThread().start();
        System.out.println("Hash map is empty or not (1): " + Test.serverMap.isEmpty());
        Thread.sleep(100);
        System.out.println("Hash map is empty or not (2): " + Test.serverMap.isEmpty());
        Set setMap = Test.serverMap.entrySet();
        Iterator i = setMap.iterator();
        for (int f = 0; i.hasNext(); ++f) {
            Map.Entry me = (Map.Entry) i.next();
            System.out.println("key is" + me.getKey() + "value is :" + me.getValue());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:37:09.630

HashMap 需要在其同步部分进行处理，因为它缺乏线程安全性

**ConcurrentHashMap**更擅长并发，ConcurrentHashMap 在读取时不会锁定 Map，写入时也不会锁定整个 Map。它将锁定当前正在编写的 Map 部分。

但重要的是要注意，如果 ConcurrentHashMap 在迭代期间发生更改，ConcurrentHashMap 不会抛出 ConcurrentModificationException。

**编辑代码：**

问题是 HashMapClass 和 NewClass 的执行，当 JVM 关闭时，HashMapClass 执行完成后，我们如何运行 NewClass 类并尝试检索存储在 ConcurrentHashMap 中的值，ConcurrentHashMap 存储在 Heap 上，这就是全部jvm 终止后立即丢失。是的，因为 ConcurrentHashMap 被标记为静态，所以值存储在堆的内存区域中

```
public class HashMapClass {

public static  ConcurrentHashMap<String,Integer> serverMap = new ConcurrentHashMap<String,Integer>();

public static void main(String args[]) {

    NewThread nt = new NewThread();
    nt.start();
    try {
        nt.join();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    new NewClass().go();

  }
}

class NewThread extends Thread {

@Override
public void run() {

    HashMapClass.serverMap.put("Ishan", 3);

    System.out.println("Hash map is empty or not " + HashMapClass.serverMap.isEmpty());

    }
}

 class NewClass {

public void go() {
    System.out.println("Hash map is empty or not " + HashMapClass.serverMap.isEmpty());
    for(Map.Entry<String,Integer> m : HashMapClass.serverMap.entrySet()){

       System.out.println(m.getKey()+" "+m.getValue());
  }

}
} 
```

# ios - IOS：旋转 uiimageview

> ID：11230625
> 
> 赞同：8
> 
> 时间：2012-06-27T16:10:12.350
> 
> 标签：ios, xcode, uiimageview, rotation

在我的应用程序中，我有一个图像视图，它的名称是箭头，我以这种方式将其旋转 180 度：

```
arrow.transform = CGAffineTransformMakeRotation(M_PI); 
```

它工作正常，但现在我希望这个图像视图返回到原始位置；我应该设置什么值才能获得它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T16:13:59.960

要让它回到原来的位置，只需这样做：

```
arrow.transform = CGAffineTransformMakeRotation(0); 
```

以度为单位，0 弧度就是 0 度，所以它应该回到原来的位置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T16:14:48.213

尝试将`transform`属性设置回单位矩阵。IE`CGAffineTransformIdentity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T16:05:58.110

斯威夫特3：

```
arrow.transform = CGAffineTransform(rotationAngle: rotation); 
```

其中*旋转*是以弧度为单位旋转的角度。

# ios - 在全屏时防止 MPMoviePlayerController 旋转和缩放为纵向

> ID：11230628
> 
> 赞同：4
> 
> 时间：2012-06-27T16:10:24.573
> 
> 标签：ios, ios5, rotation, orientation, mpmovieplayercontroller

在 iPhone 4/4s 的 iOS5 应用程序中，我有一个 UIViewController，其中添加了一个 MPMoviePlayerController 视图：

```
[self.view insertSubview:self.fullscreenMoviePlayerController.view atIndex:2]; 
```

UIViewController 只支持横向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation 
{
  // Return YES for supported orientations.
  return  interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
          interfaceOrientation == UIInterfaceOrientationLandscapeRight;

} 
```

这正确地将旋转锁定为仅横向。但是，当我将 MPVideoPlayerController 设置为全屏显示时，这将被忽略，并且视频不再被限制为横向并旋转到手机所在的任何方向。

如何防止 MPMoviePlayerController 的视频全屏旋转到纵向？当手机旋转到纵向时，视频不旋转是至关重要的。

我尝试子类化 MPVideoPlayerController 并覆盖 `shouldAutorotateToInterfaceOrientation:`，但这没有效果。

MPMoviePlayerController 只是视图的一部分，因此绝对不能使用 MPMoviePlayerViewCotroller。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T16:30:10.140

如果您真的想避免使用 MPMoviePlayerViewController，这似乎相当困难。一个选项，即使你在全屏模式下似乎也有效，是手动设置 MPMoviePlayerController 视图的框架。（请注意，在其他 iOS 问题中，有时使用背景视图会产生不同的结果，但值得一试）。

```
MyMPMoviePlayerController.view.frame = CGRectMake(0, 0, your numbers, here); 
```

但是，Apple 在他们的文档中说，控制器的框架应该设置为其父视图的框架。

```
[MyMPMoviePlayerController.view setFrame: parentView.bounds]; 
```

不太优雅的解决方案，但即使不是这样也可能有效的解决方案是：

侦听 UIDeviceOrientationDidChangeNotification 并查看电影播放器​​的视图。在其上应用变换、边界和中心（或框架等），使其仍适合横向视图。基本上每次它试图旋转时都将其转换回来。（这一切都假设你真的不能用 shouldAutorotateToInterfaceOrientation 阻止它旋转:)。

这里唯一的问题是它可能会使电影保持纵向，但会扭曲视图，这不是预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:44:12.973

是的，我看到你说使用 MPMoviePlayerViewController 不是一个选项：

仍然......为什么不尝试制作您拥有的 ViewController 的 MPMoviePlayerViewController ，否则它包含 MPMoviePlayerController 和您的视图控制器中的其他项目。关于这一点的好处是 MPMoviePlayerViewController 已经内置了 MPMoviePlayerController。您只需引用它而不是您自己的 viewController 中的 MPMoviePlayerController。具有您可以覆盖的 shouldAutorotateToInterfaceOrientation 并且应该为您做正确的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T08:29:39.830

您可以准备两个视频。如果没有其他选择。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-10T09:46:21.303

请访问链接，默认情况下仅在横向模式下显示视频，它这样做[http://mobiledevelopertips.com/video/getting-mpmovieplayercontroller-to-cooperate-with-ios4-3-2-ipad-and-earlier- iphone-sdk.html 的版本](http://mobiledevelopertips.com/video/getting-mpmovieplayercontroller-to-cooperate-with-ios4-3-2-ipad-and-earlier-versions-of-iphone-sdk.html)。我希望它能解决你的问题。

# javascript - 如何刷新谷歌地图v3中的所有标记？

> ID：11230636
> 
> 赞同：1
> 
> 时间：2012-06-27T16:10:57.057
> 
> 标签：javascript, maps

我希望能够每分钟刷新所有标记。这意味着应该删除现有标记再次解析 xml 文件中的数据并在地图上再次绘制它们。它似乎不适`map.clearOverlays();`用于 v3，我应该在标记之间进行交互以删除它们。

在给定的时间间隔内删除现有标记并加载新标记的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:29:37.623

```
for (i = 0; i < markerArray.length; i++) {
     markerArray[i].setMap(null);
} 
```

这将从地图中删除每个标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:17:44.440

基本上你需要使用**marker.setMap(null);** 请参阅[Google Maps API v3：如何删除所有标记？](https://stackoverflow.com/questions/1544739/google-maps-api-v3-how-to-remove-all-markers)

您需要结合 setTimeout() 以及另一个添加标记的例程来执行此操作（我假设如果您已经到了这一步，您已经知道如何添加标记）。

# java - CGRectIntersectsRect for cocos2d Android

> ID：11230637
> 
> 赞同：0
> 
> 时间：2012-06-27T16:10:58.107
> 
> 标签：java, android, cocos2d-iphone

我目前正在尝试测试两个 CGRect 之间的冲突。通常在 Objective C 中我会使用 CGRectIntersectsRect 方法，但在 Coso2d Android 中，唯一可用的方法似乎是 CGRect.containsRect ，它不能按预期工作。是否有另一种方法必须为 Android 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:37:52.740

我[在 github repo 的 CGRect 中发现](https://github.com/ZhouWeikuan/cocos2d/blob/master/cocos2d-android/src/org/cocos2d/types/CGRect.java)**intersects**方法使用该函数来检查两个矩形的相交。

我还发现了一个[记录相同的问题，](http://code.google.com/p/cocos2d-android-1/issues/detail?id=99)并且还提到了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:35:54.097

下载了包含 CGRect.intersects 方法的 .jar 文件的更新版本

# java - 使用 QT Jambi 的应用程序设置文件

> ID：11230641
> 
> 赞同：1
> 
> 时间：2012-06-27T16:11:12.037
> 
> 标签：java, installation, qt-jambi

我想将 QT Jambi 用于 GUI（Java 项目）。GUI 需要有动画（类似于 Iphone 应用程序）。这就是为什么，我不想使用 Java Swing。

我的问题是，在我开发应用程序之后，是否有任何**自动机制**可以创建一个**设置文件**，该文件可用于在任何计算机上安装我的应用程序（可能是单独操作系统的单独“设置”文件）。换句话说，我希望我的用户只下载一个文件：**setup.exe**。这应该在他们的计算机中安装该应用程序。

我知道有一个这样的 .jar 文件应用程序（我忘记了名字）。但是 QT 是一个 C++ 库，我不喜欢打扰用户，要求他们下载 QT 只是为了使用我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:15:55.060

我想你只是在桌面上标记 win32 并寻找免费/开放的工具。到目前为止，我没有对这个问题做出任何回应，我想我会提供一些关于这一点的信息，即使这不是你真正想要的答案。

在过去的几年里，我一直在研究 QtJambi 生态圈，但我不知道有这样一个工具可以为您提供一个流程来遵循导致 EXE 的过程。有各种各样的警告。

任务：

1.  确保 JRE5+ 安装在目标系统上。
2.  确保 QtJambi 文件并执行诸如提取本机 JAR 之类的操作。
3.  确保 QtJambi pre-reqs 安装在目标系统上（例如 MSVCxxxx 运行时）。
4.  最后安装您的应用程序并修复启动配置以利用上述信息。
5.  设置桌面以方便访问（程序组、桌面图标、菜单项、快捷方式）

您会发现 NSIS [http://nsis.sourceforge.net/](http://nsis.sourceforge.net/)可以成为获取该过程某些部分的工具，并且可能提供一个框架来为 NSIS 编写模块以完成其他部分的工作。但是，当您跳出简单的数据解压缩和桌面安装过程设置之外时，我发现 NSIS 有点缺乏。

您的另一种解决方案是简单地提供在一个 ZIP 文件中工作的所有内容，这将包括嵌入的 Java JRE 的副本、嵌入的 QtJambi 的副本、JAR 的其余部分，然后编写一个顶级 *.BAT 文件来设置%PATH% 和其他参数来针对您的应用程序运行您提供的 java.exe。显然，现在 JRE 不太可能得到更新，因此在某些时候会被认为是不安全的。

NSIS 并不是唯一存在的此类 Windows 安装程序。

也许有一个带有自定义部件的全自动一键安装包装器来帮助设置 QtJambi，但我现在对此表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T13:16:53.487

好问题，一个很好的答案尝试。

我走了一条稍微不同的路线：嵌入 Qt Jambi 库，但不是 JRE。我有一些基本的 sh/bat 启动脚本来配置所需的资源，并且正在使用 IzPack 作为安装程序（尽管 NSIS 可能是一个不错的选择）。

**问题：如何找到JRE**

*   解决方案：IzPack 安装程序需要一个 JRE 才能运行，因此保证了一个 JRE 的可用性。它可以在安装期间[更新](http://izpack.org/documentation/installation-files.html#parsable-parse-a-file-after-installation)脚本中的[变量](http://izpack.org/documentation/installation-files.html#the-built-in-variables)。
*   解决方案（Windows）：[使用注册表](http://www.rgagnon.com/javadetails/java-0642.html)
*   最后的手段：使用路径

理想的做法是将所有三个集成到一个批处理文件中。有人做过吗？

**问题：Qt & Qt Jambi 库**

*   解决方案：随您的应用程序和外壳/批处理文件中的链接一起分发。

问题是如何确保在系统上已经安装了二进制不兼容的 Qt 库时使用您的库。在 Linux 上，提取库并导出`LD_LIBRARY_PATH`似乎可行。在 Windows 上我还没有解决这个问题，在 Mac 上我还没有尝试过。

**问题：最合适的 Qt 库**

32 位 Qt 库可能不适用于 64 位 JRE；这是一个我还没有处理的问题。可能最好的解决方案是同时包含 32 位和 64 位 Qt 库，并在运行时（或可能在安装时）从脚本中选择它们。

另一个问题与主题有关：Qt 支持使用本机主题，但仅限于编译它的平台。因此，在旧的 Windows 版本上编译 Qt 并在现代版本的 Windows 上使用库似乎可以工作，但会导致丑陋的 Windows-98 式小部件。最简单的解决方案似乎是使用`-style Plastique`（或`cleanlooks`）启动以获得更好看的小部件。

# jquery-ui - jQuery UI 对话框定位：将位置顶部调整 20px -

> ID：11230645
> 
> 赞同：30
> 
> 时间：2012-06-27T16:11:22.887
> 
> 标签：jquery-ui, dialog, position

我有一个由 ajax 调用填充的**对话框。**我想限制**对话框的****最大高度**，如果超过这个**最大高度**，也允许它可以**滚动**。下面的代码正是我想要的。

 ******问题是我无法从**顶部位置**移动对话框的**顶部**。我可以左右移动。我也不能使用**中心**，因为**对话框**显示在一个大的可滚动窗口中。如果我使用 firebug，我可以调整 top 属性，但找不到将其设置为零的位置。

 ******```
$("#your-dialog-id").dialog({
    open: function(event, ui) {
        $(this).css({'max-height': 500, 'overflow-y': 'auto'});
    },
    autoOpen:false,
    modal: true,
    resizable: false,
    draggable: false,
    width: '690',
    closeOnEscape: true,
    position: 'top'
}); 
```

我想调整对话框的 y 位置，使其距离窗口顶部 20px。知道我能做什么吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-09T19:56:47.280

更改最后一个值解决了问题：

```
position: ['center',20] 
```

[http://jsfiddle.net/chrisloughnane/wApSQ/3](http://jsfiddle.net/chrisloughnane/wApSQ/3)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-24T17:21:06.647

最简单的方法是：

```
$("#dialog").dialog({ position: { my: "center", at: "top" } }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-07T14:46:36.857

使用 Jquery UI 1.11.4

```
 var Y = window.pageYOffset;

        $( "#dialogJQ" ).dialog({
            modal: true,
            closeOnEscape: false,                
            width:'auto',
            dialogClass: 'surveyDialog',
            open: function(event, ui) {
                $(this).parent().css({'top': Y+20});
            },
        }); 
```************

# php - PHP 表单循环变量

> ID：11230651
> 
> 赞同：1
> 
> 时间：2012-06-27T16:11:46.440
> 
> 标签：php, email, variables, loops

我正在开发一个 PHP 表单，该表单允许用户向表中添加行，然后使用表单通过电子邮件提交信息。我需要将变量传递到电子邮件中。我试过用这个：

```
$n = count($type);
$i = 0;
for ($i = 0; $i < $n; $i++){
    $e_classes = "______________________________________________ \r\n\n";
    $e_classes .=  "Class Type: {$type[$i]} \r\n";
    $e_classes .= "Number of Classes: {$nc[$i]} \r\n";
    $e_classes .= "Number of Students: {$sc[$i]} \r\n";
    $e_classes .= "______________________________________________ \r\n\n";
} 
```

但是当我收到电子邮件时，只显示表格中的最后一个。如何让所有添加的表格行显示？如果我使用“echo”，我可以让一切正常工作，但我需要将所有内容传递到一个可用于电子邮件的变量中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T16:14:04.063

像这样 ：

```
$e_classes = '';
$n = count($type);
$i = 0;
for ($i = 0; $i < $n; $i++){
    $e_classes .= "______________________________________________ \r\n\n";
    $e_classes .=  "Class Type: {$type[$i]} \r\n";
    $e_classes .= "Number of Classes: {$nc[$i]} \r\n";
    $e_classes .= "Number of Students: {$sc[$i]} \r\n";
    $e_classes .= "______________________________________________ \r\n\n";
} 
```

您在变量循环中的第一个条目`$e_classes`是删除她之前拥有的内容，因为您使用`$e_classes =`而不是`$e_classes .=`.

这意味着在每个循环之前，您的变量都被重置为第一行的值。

你正在这样做：

```
$Var = '';
for($i = 0, $i < n; $i++){
    $Var = 'a';
}

// Loop 1
$Var = 'a';

// Loop 2
$Var = 'a';

// Loop 3
$Var = 'a'; 
```

你想要这个：

```
$Var = '';
for($i = 0, $i < n; $i++){
    $Var .= 'a';
}

// Loop 1
$Var = 'a';

// Loop 2
$Var = 'aa';

// Loop 3
$Var = 'aaa'; 
```

该符号`=`将用新的值覆盖变量的值。

该符号`.=`将在变量末尾附加值。

# c# - C#/Sharepoint 中的表单

> ID：11230655
> 
> 赞同：0
> 
> 时间：2012-06-27T16:12:02.640
> 
> 标签：c#, forms, sharepoint

我正在尝试使用 C# 在 Sharepoint 中创建一个表单。我不太了解 C#，这就是我的错误发生的地方。我希望将信息通过电子邮件发送到提交时的地址。这是我的 tizagEmailForm.html 的代码...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 2</title>
</head>

<body>

<form method="POST" action="tizagEmail.aspx">
To <input type="text" name="To"/> <br />
From <input type="text" name="From"/> <br />
Subject <input type="text" name="Subject"/> <br />
Body <textarea name="Body" rows="5" cols="20" wrap="physical" > 
</textarea>
<input type="submit" />
</form>

</body>
</html> 
```

这是我的 tizagEmail.aspx 的代码...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@ Page Language="C#" 

'Sends an email
Dim mail
Set mail = Server.CreateObject("CDO.Message")
mail.To = Request.Form("To")
mail.From = Request.Form("From")
mail.Subject = Request.Form("Subject")
mail.TextBody = Request.Form("Body")
mail.Send()
Response.Write("Mail Sent!")
'Destroy the mail object!
Set mail = nothing

%>
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
<meta name="WebPartPageExpansion" content="full" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled 2</title>
</head>

<body>

<form id="form1" runat="server">
</form>

</body>
</html> 
```

如果有人可以帮助我，我将不胜感激。

健康长寿·繁荣昌盛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:16:40.997

看起来您已经告诉页面使用 C#，但 Dim 是 VB 关键字。所以看起来你混淆了你的语言。

您似乎也混淆了 Classic ASP 和 ASP.NET。

经典 ASP 使用 VB，ASP.NET 使用 C# 和 VB.NET。Classis 和 .NET 非常不同。

通过 ASP.NET [http://forums.asp.net/t/971802.aspx发送](http://forums.asp.net/t/971802.aspx)

通过经典asp发送：[http ://forums.iis.net/t/1144383.aspx](http://forums.iis.net/t/1144383.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:09:35.977

我认为实现您想要做的最好的方法是使用 WebPart。
您应该查看[本教程，了解如何为 SharePoint 创建联系人表单 Web 部件](http://www.codeproject.com/Articles/31594/Creating-a-Contact-Form-Web-Part-for-SharePoint)。

# asp-classic - 如何使用纯 asp 创建一个真正的二进制 excel 文件

> ID：11230656
> 
> 赞同：0
> 
> 时间：2012-06-27T16:12:04.113
> 
> 标签：asp-classic

是否可以在 asp classic 中创建二进制 excel 文件？

常用的方法是使用这个

```
Response.ContentType = "application/octet-stream"

Response.AddHeader "Content-Disposition", "attachment; filename=test.txt" 
```

这不是一个“真正的”excel文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:24:14.393

在 .net 中，您可以使用 Microsoft.Office.Interop.Excel 命名空间 - 非常易于使用，如果您可以访问 .net，我肯定会这样做。

你说“纯 asp”——如果这意味着没有 com 对象等——我认为这是不可能的。

但是，如果您希望坚持使用经典 asp 并选择使用 com 对象，您可以使用 Interop com 对象创建完整的二进制电子表格 - 为此，您需要在网络服务器上安装 Excel。

例如，要打开磁盘上的空白 excel 文件（即模板），更改值并保存完成的文件：

```
'#### Ready Excel
Set ExcelApp = CreateObject("Excel.Application")
ExcelApp.Application.Visible = True

'#### Open a blank Excel File
Set ExcelBook = ExcelApp.workbooks.Open("d:\wwwroot2\blankTemplate.xls")

'#### Select a sheet and change the value of a cell
ExcelBook.Worksheets("SheetName").Cells(1, 1).Value = "Lorem Ipsum"

'#### Switch between sheets
ExcelBook.Worksheets("AnotherSheetName").Select

'#### Save the finished file with a different name (to leave the template ready for easy re-use)
ExcelBook.SaveAs "d:\wwwroot2\FinishedFile.xls"

'#### Tidy up
ExcelBook.Close
ExcelApp.Application.Quit
Set ExcelApp = Nothing 
Set ExcelBook = Nothing 
```

这个方法的好处是 interop com 对象非常接近地模仿 VBA 方法等，所以如果你不确定如何做某事，在 excel 中记录一个宏，查看原始 vba，它产生的代码，特别是方法和参数在大多数情况下，与您用于 com 对象的代码非常相似。

# javascript - 通过 javascript/jquery 加载文件而不使用 Web 服务

> ID：11230657
> 
> 赞同：0
> 
> 时间：2012-06-27T16:12:09.713
> 
> 标签：javascript, jquery, html

我正在尝试做这样的事情来制作一个简单的日志阅读器，左侧有导航，并且可以在右侧一一显示txt文件：

```
$('.menuItem a').click(function(e) {
    e.preventDefault();
    var log = $(this).attr('id');
    $.get(log, function(data) {
        console.log(data)
        $('.log').text(data);
    });
}); 
```

由于我正在尝试使用 file:// 指令而不是 http:// 与本地 Web 服务，因此目前这不起作用。有没有办法在本地副本上进行这项工作？

谢谢

# php - 更新数据库值时在下拉框中获取值

> ID：11230659
> 
> 赞同：1
> 
> 时间：2012-06-27T16:12:15.330
> 
> 标签：php, sql

我在更新数据库中的某些值时遇到问题。当我想使用下拉框更改值时，它会自动将第一个值放入下拉菜单中。我想要的是获取已经在数据库中设置的值。

这是我的代码：

```
<select name="vrijwilligerID">
<?php           
    $vrijwilligerID = $_POST["vrijwilligerID"];
    $query = "SELECT voornaam, achternaam, vrijwilligerID FROM vrijwilliger;";
    $result = mysql_query($query);
    while($row=mysql_fetch_array($result)){
        echo "<option value=".$row['vrijwilligerID'].">".$row["voornaam"]." ".$row["achternaam"]."</option>";
    }
?>              
</select> 
```

有谁知道如何做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:18:19.523

根据所选项目，您必须将 selected 属性添加到选项。

尝试这个

```
<select name="vrijwilligerID">
                <?php           
                    $vrijwilligerID = $_POST["vrijwilligerID"];

                    $query ="   SELECT voornaam, achternaam, vrijwilligerID
                                FROM vrijwilliger;";

                    $result = mysql_query($query);

                    while($row=mysql_fetch_array($result)){
                      if($row["vrijwilligerID"]==$vrijwilligerID)
                           echo "<option value=".$row['vrijwilligerID']." selected>".$row["voornaam"]." ".$row["achternaam"]."</option>";

                     else
                          echo "<option   value=".$row['vrijwilligerID'].">".$row["voornaam"]." ".$row["achternaam"]."</option>";
                    }
                    ?>              
        </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:36:44.877

使用 php 很容易解决这个问题，但是使用 mysqls IF() 函数可以直接选择选项。使用 mysqls concat() 你也可以获得你想要的结果。

（当然，我们没有在我们的脚本中使用任何未清理的帖子变量；））

```
$iVrijwilligerid = filter_input(INPUT_POST, 'vrijwilligerID', FILTER_VALIDATE_INT, array("options"=> array("min_range"=>0, "max_range"=>999))) ;

if($iVrijwilligerid)
{
  $sQry = <<<QRY
      SELECT
        CONCAT('<option value="', vrijwilligerID, '"',IF((SELECT vrijwilligerID FROM vrijwilliger WHERE vrijwilligerID=$iVrijwilligerid), ' selected="selected"', '' ),'>',voornaam, ,achternaam,'</option>') AS optItem
      FROM
        vrijwilliger
      WHERE
        your clause here
QRY;
  $oResult = mysql_query( $sQry );
  while($aRow=mysql_fetch_assoc( $oResult ))
  {
    echo $aRow['optItem'];
  }
}
else
{
  // nada
} 
```

# django - Django 信号 - 等待函数中的信号

> ID：11230662
> 
> 赞同：2
> 
> 时间：2012-06-27T16:12:29.913
> 
> 标签：django, asynchronous, signals, messaging, django-signals

我正在使用 django，我想从一个函数发送一个信号，并在另一个函数的中间为该信号创建一个“等待点”。

更详细地说，我使用的是第 3 方 api。所以，

```
def foo():
   id = thirdPartyFunction(action='/bar')
   id.save()
   # send signal!
   return render_to_response('pleaseWait.html')

def bar():
   # initialize this and that
   # ...
   # WAIT FOR SIGNAL
   return HttpResponseRedirect('success.html') 
```

如何在函数中间创建侦听器。目前，我的理解是信号调度程序调用另一个函数。我不知道该怎么做。

感谢您的时间和帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-18T03:26:05.900

如果两个函数将在同一个进程中调用，那么这是可能的，但 Django 并不容易做到这一点是有原因的。原因是有更好的方法来做到这一点，例如使用真正的异步工作者。

如果您确实需要这样做，（我经常使用它来测试信号），您可以利用 Django 运行信号的方式（尽管这在未来版本中可能会发生变化。Django 信号都在同一个大循环中运行处理它们被触发，在较早订阅的接收器之后调用后来订阅的接收器。因此，您可以在以下位置执行以下操作`bar()`：

```
def bar():   
    def callback(*args, **kwargs):
        status['triggered'] = True

    signal.connect(callback)

    # wait until signal triggered
    loops = 0
    while loops < 100 and not status['triggered']:
        pass
    if status['triggered']:
        # timeout logic to prevent hangs
    # do whatever you want after the signal triggered 
```

如果您愿意，您甚至可以从回调中的信号中检索数据并将其保存到状态字典中，但不要告诉任何人您从我这里听到的。

# php - 面向对象的 PHP 函数

> ID：11230664
> 
> 赞同：1
> 
> 时间：2012-06-27T16:12:47.607
> 
> 标签：php, oop, class

我对 PHP OOP 还很陌生，我遇到的问题是我无法理解我的脚本的以下布局：

*   设置主类，它设置页面并扩展 mysql 类并通过 __construct 创建数据库连接
*   在主类中，我运行一个公共函数，该函数包含（）一个文件并访问该包含文件中的一个函数
*   在包含文件中的函数中，我似乎无法通过实际的全局变量或使用 $this->blah 访问主类

有没有人有任何指示或方向。我试着用谷歌搜索它，但找不到任何与我试图做的事情相近的东西。

它开始于： - 作品

```
$gw = new GWCMS(); 
```

然后在 GWCMS() 的 _construct 内部，GWCMS 扩展了 mySQL - 工作

```
parent::__construct(DB_HOST,DB_USER,DB_PASSWORD,DB_NAME);
$this->build(); 
```

然后它调用 build() - 工作

```
public function build(){
   ...
   $page['content'] = $this->plugins($page['content']);
   ...
   $output = $this->output($theme,$page);
   echo eval('?>' . $output);
} 
```

调用 plugins() - 我们开始遇到问题

```
public function plugins($content){
   $x = 0;
   if ($handle = opendir(STOCKPLUGINPATH)) {
      while (false !== ($entry = readdir($handle))) {
         if(is_dir(STOCKPLUGINPATH . $entry . '/') && $entry != '.' && $entry != '..'){ 
            if(file_exists(STOCKPLUGINPATH . $entry . '/inc.php')){
               include(STOCKPLUGINPATH . $entry . '/inc.php');
               $content = do_shortcode($content);
            }
         }
      }
      closedir($handle);
   }
   return $content;
} 
```

前面的代码包括 inc.php ，其中列出了要包含的文件：

```
include(STOCKPLUGINPATH . 'Test/test.php'); 
```

test.php 包含函数列表。上面的 do_shortcode 可以毫无问题地访问函数并完成工作，但是我需要 test.php 中的以下函数来访问 $gw->fetchAssoc(); 哪个 fetchAssoc 在 gwcms 的父级中

```
function justtesting2($attr){
   $config = $gw->fetchAssoc("Select * from gw_config");
   foreach($config as $c){
      echo $c['value'];
   }
} 
```

当我运行脚本时，我得到

```
Fatal error: Call to a member function fetchAssoc() on a non-object in /home/globalwe/public_html/inhouse/GWCMS/gw-includes/plugins/Test/test.php on line 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:18:35.453

当文件包含在函数中时，它们只能从该函数的范围内访问：

[http://php.net/manual/en/function.include.php#example-136](http://php.net/manual/en/function.include.php#example-136)

您需要将对您创建的对象的引用提供给包含该文件的函数，或者将其拉入该函数的范围以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:20:00.223

编写 OOP 代码意味着进行重组，以避免将文件和函数的混乱放入任何文件中，而天知道什么不是。

尝试依靠编写一个模拟您想要实现的行为的类。该类应包含为您携带数据的属性值和帮助该类*表现*得像您正在对其建模的事物的方法。

要回答您的问题：

```
class MyClass {
    public $my_property = 4;
    public function MyMethod() {
        include('file.php');
    }
    public function MyOtherMethod() {
        $this; // is accessible because MyOtherMethod
               // is a method of class MyClass
    }
}

// contents of file.php

$variable = 3;

function MyFunction($parameter) {
    global $variable; // is accessible
    $parameter; // is accessible
    $this // is not accessible because it was
          // not passed to MyFunction as a parameter
          // nor was it declared as a global variable

    // MyFunction is not a method of class MyClass,
    // there is no reason why $this would be accessible to MyFunction
    // they are not "related" in any OOP way
    // this is called variable scoping and/or object scoping
} 
```

# liferay - liferay 6.0.6：无法上传大于约 6 MB 的 .xlsx 文件（但 .xls 文件有效）

> ID：11230667
> 
> 赞同：0
> 
> 时间：2012-06-27T16:13:03.923
> 
> 标签：liferay, xlsx

我有一个大约 6 MB 文件大小的 Excel 2007 文件 (.xlsx)。

在我们公司的网络中，我无法将这个 6 MB 的文件上传到 Liferay 的文档库中。基于 GUI 的上传表单和基于 webdav 的上传都不起作用。如果我将文件重命名为（.xls），那么我可以在几秒钟内上传它，没有任何问题。

但是，在 liferay doclib 后端，我也无法将文件从 .xls 重命名为 .xlsx *。*如果我尝试这样做，则服务器会挂起一段时间。错误日志中没有条目。当我尝试在开发服务器/我的本地机器上进行重命名时，liferay 服务器会消耗所有可用内存，我必须从无响应的终端运行“killall java”命令。

但是，我可以上传 2 MB 大小的 .xlsx 文件。允许上传所有文件扩展名。只有“更大”的 .xlsx 文件有问题。

生命射线 6.0.6

```
Used memory:    176.528.048 Bytes
Total memory:   283.590.656 Bytes
maximum memory:     1.069.416.448 Bytes 

env.CATALINA_HOME   /opt/liferay-portal-6.0.6/tomcat-6.0.29
env.CATALINA_OPTS   -Dorg.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true 

JAVA_OPTS="-Xms128m -Xmx1024m  -XX:PermSize=42m -XX:MaxPermSize=256m -Dfile.encoding=UTF8 -Duser.timezone=GMT+2 -Djava.security.auth.login.config=$CATALINA_HOME/conf/jaas.config -Dorg.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES=false -Dexternal-properties=portal-developer.properties -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:+UseCompressedOops 
```

是什么让 .xlsx 文件如此特别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:35:46.520

Tricky question - did you try changing the maximum file size settings in Control Panel->Server Administration->File Uploads-> Document Library - Maximum file and allowed extension.

Also try to see if adding a temporary storage directory helps.

# magento - 有人可以解释 Magento 中的单身人士吗？

> ID：11230671
> 
> 赞同：1
> 
> 时间：2012-06-27T16:13:11.160
> 
> 标签：magento, singleton

我在这里和谷歌上阅读了大量的线程，出于某种原因，我仍然不太了解单例与 Magento 的关系。例如，我创建了一个观察者来监听订单保存事件并执行一些自定义逻辑。根据我在另一个线程中收到的建议，我的班级是单身人士。我怎么知道这是正确的？它可能是单例以外的东西吗？

```
 <frontend>
    <events>
        <checkout_type_onepage_save_order_after>
            <observers>
                <reducesetinventory_save_order_observer>
                    <class>MyModule_ReduceSetInventory_Model_Observer</class>
                    <method>checkout_type_onepage_save_order_after</method>
                    <type>singleton</type>
                </reducesetinventory_save_order_observer>
            </observers>
        </checkout_type_onepage_save_order_after>
    </events>
</frontend>
<global>
    <models>
        <myname_reducesetinventory>
            <class>MyName_ReduceSetInventory_Model_Observer</class>
        </myname_reducesetinventory>
    </models>
</global> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:46:15.163

如果模型已经实例化，单例将返回实例，否则将创建一个新实例。非常方便，因为在某些情况下您不想创建另一个要创建的实例（例如配置、订单、报价等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T17:58:25.070

来自[http://codemagento.com/2011/04/observers-and-dispatching-events/](http://codemagento.com/2011/04/observers-and-dispatching-events/)：

> `<type>`- 我一直使用单例，但其他选项可以是“模型”或“对象”。"singleton" 将创建对象为 Mage::getSingleton() 而 "object" 和 "model" 在创建观察者对象时将使用 Mage::getModel()。

因此，如果在脚本执行期间多次调用您的观察者，您可以在第一次调用观察者时将一些数据保存（“缓存”）在私有/受保护变量中，并在下一次调用时使用它。例如，您可以缓存一些大查询的结果、外部 web 服务调用响应等。

# reporting-services - 报告管理器 - 拒绝访问临时目录

> ID：11230673
> 
> 赞同：2
> 
> 时间：2012-06-27T16:13:28.820
> 
> 标签：reporting-services, reportingservices-2005

我正在尝试在 Windows Server 2003 服务器上本地访问 Reporting Services 2005 报表管理器，但出现以下错误：

> 访问临时目录被拒绝。运行 XmlSerializer 的身份“DOMAIN\login”没有足够的权限来访问临时目录。CodeDom 将使用进程正在使用的用户帐户进行编译，因此如果用户无权访问系统临时目录，您将无法编译。使用 Path.GetTempPath() API 找出临时目录位置。

错误消息中给出的 DOMAIN\login 是我的用户登录帐户。`Reports`默认网站中的虚拟目录配置为使用配置为作为`Network Service`身份运行的 DefaultAppPool。SQL Server Reporting Services windows 服务配置为使用单独的域服务帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:13:29.617

授予`NETWORK SERVICE`帐户对目录的读/写/修改权限`C:\WINDOWS\Temp`。

# php - 如何将收到的电子邮件重新发送为全新的电子邮件？所以没有转发或重定向

> ID：11230675
> 
> 赞同：1
> 
> 时间：2012-06-27T16:13:31.223
> 
> 标签：php, email, outlook, sendmail

这是一个巨大的头痛。我们使用 Ning 作为艺术活动项目的平台。我们希望我们的观众通过电子邮件地址将照片上传到我们的网站。唯一的问题是，Ning 只会为此目的给我们提供可笑的电子邮件地址……例如 photos34628234896@ourwebsite.com 这很难记住！

所以我想，让我们将电子邮件从一个容易记住的电子邮件地址转发到 Ning 的疯狂地址......但是 Ning 不允许任何电子邮件上传照片，如果它们被检测为被转发或重定向。我想检测是通过电子邮件标题完成的。

这就是为什么我需要一种方法将电子邮件重定向到另一个地址，而不会反映在电子邮件的标题信息中。我想也许 Outlook 从容易记住的电子邮件地址接收电子邮件，然后以某种方式重新发送它们并带有一个新的干净的标题可能是答案？如果可以提供更好的答案，我可以用 PHP 编写代码，并在国内互联网连接上运行家庭无头 ubuntu 服务器吗？

有什么想法可以实现这个目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:30:00.067

如果您使用的是 Exchange 服务器，则可以使用传输规则来重定向邮件，这将通过大多数转发检查。如果它确实更改了标题或其他内容，您可以使用相同的规则集来删除或修改它们。大多数 MTA（邮件传输）将允许相同类型的功能，但这实际上取决于您使用哪一个。Postfix 非常灵活。

将在 Exchange 管理控制台组织配置集线器传输传输规则中进行更改

此外，也许更容易，您可以简单地尝试在邮件流设置中为您分配以接收电子邮件的虚构用户添加辅助递送地址。这将在用户属性中完成。服务器级转发艾米不会触发您遇到的转发块，因为客户端转发不能以完全相同的方式工作。许多客户端再次发送电子邮件，但服务器将其重定向。

Exchange 管理控制台收件人配置邮箱属性、邮件流设置。

您将在交付选项中启用转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:35:31.220

抱歉，刚刚注意到您使用的是 ubuntu，您可以简单地让 postfix 为您重定向电子邮件，您将使用 Postfix Virtual Alias Maps...

这是一个完美描述它的链接......

[http://www.cyberciti.biz/faq/linux-unix-bsd-postfix-forward-email-to-another-account/](http://www.cyberciti.biz/faq/linux-unix-bsd-postfix-forward-email-to-another-account/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:16:07.087

如果您可以将电子邮件转发到您的服务器，则可以将其通过管道传输到 PHP，然后 PHP 可以使用您希望显示的任何电子邮件地址为您重新发送电子邮件。只要确保您为该服务器设置了[DomainKeys](http://en.wikipedia.org/wiki/DKIM)和[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework)记录之类的东西，否则您的邮件被视为垃圾邮件的机会就会增加。

# perl - 与其他约束一起循环时减去 perl

> ID：11230678
> 
> 赞同：1
> 
> 时间：2012-06-27T16:13:52.997
> 
> 标签：perl

我想从一段时间内获取的数组中获取值 .. 如果这有意义的话。这是我的代码和输出来帮助解释

```
while (@data = $STH2->fetchrow_array()) {

                           print "<tr>";
                           print "<td>$_</td>" for @data[0,1];

                           print "</tr>"; 
```

这输出

```
$data[0]   |  $data[1]
   1       |    1000
   1       |    400
   12      |    500
   12      |    150 
```

（每个`$data[0]`只会输出 2 个值）

我想要做的是`$data[1]`为每个不同的`$data[0]`值减去 2 个值（即 1000-400），然后打印出来。我无法弄清楚如何做到这一点，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:18:22.273

只需在数组引用的哈希中捕获值，然后稍后再进行减法（**警告：**未经测试）：

```
my %data_hash=(); #keys: $data[0], values: array ref of $data[1] corresponding to $data[0]

while(@data=$STH2->fetchrow_array)
{
  push @{$data_hash{$data[0]}},$data[1];
}

foreach(sort{$a<=>$b}(keys %data_hash))
{
  print "<tr>";
  print "<td>$_</td>";
  my $diff=$data_hash{$_}->[0] - $data_hash{$_}->[1];
  print "<td>$diff</td>";
  print "</tr>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:20:57.533

似乎哈希可以满足您的目的。$data[0] 是键，$data[1] 是值。

就像是

```
my %data;
while (@data = $STH2->fetchrow_array()) {
  if (undefined $data{$data[0]}) {
    $data[$data[0]} = $data[1];
  } else {
    $data[$data[0] -= $data[1];
} 
```

# jquery - 在可变窗口大小的屏幕上居中固定高度/宽度对话框

> ID：11230683
> 
> 赞同：0
> 
> 时间：2012-06-27T16:14:39.680
> 
> 标签：jquery, ipad, jquery-mobile, mobile-safari, vertical-alignment

我正在尝试使用 jquery mobile 和 CSS3（没有 javascript 计算）在屏幕上将具有固定高度和宽度（750x360）的对话框居中。这将在 iPad 移动 safari 上运行，到目前为止，我还没有找到适用于该浏览器的 calc() 版本。

我目前通过使用javascript计算margin-top来居中。参数是窗口的可变高度和对话框的固定高度。但是，我需要从我的实现中删除它以符合标准，并且尽可能只使用 CSS/jquery 方法。

有没有办法做到这一点？

我正在导入 jquery UI 和 jquery 移动库，因此我可以访问它们的所有方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:25:01.917

# android - Phonegap + Android 状态=0 从 web 服务返回

> ID：11230685
> 
> 赞同：3
> 
> 时间：2012-06-27T16:14:45.483
> 
> 标签：android, web-services, cordova

电话间隙船员，

我在使用 android 访问 web 服务时遇到问题。我使用iOS访问它没有问题。随附的代码使用公共网络服务，因此如果您愿意，可以尝试该代码。

在 iOS 上，我们得到一个 xmlhttp.status == 200 并返回数据。在 Android 上，我们得到一个 xmlhttp.status == 0。

我们正在使用cordova-1.8.1.jar

我们在 res/xml/cordova.xml 中设置了白名单，如下所示：

```
<access origin=".*"/> 
```

我提出这个问题是因为我怀疑我们的白名单不起作用。

这是代码：

```
function testweather(){
   var xhr= new XMLHttpRequest();
   xhr.onreadystatechange = function(){

      alert(xhr.readyState);
      if(xhr.readyState == 4){
         if(xhr.status == 200){
            $( "#result" ).append( xhr.responseText );
         }
         else{
            alert("can't get response. a.status:"+xhr.status);
         }
      }
   }

var url = "http://graphical.weather.gov/xml/SOAP_server/ndfdXMLserver.php";
xhr.open("POST", url,true);
xhr.setRequestHeader("SOAPAction",   "http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl#NDFDgenByDayLatLonList");
xhr.setRequestHeader("Content-Type", "text/xml;charset=UTF-8");
xhr.setRequestHeader("Content-Length", 1536);
xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
xhr.setRequestHeader("Accept", "application/soap+xml, application/dime, multipart/related, text/*");
xhr.setRequestHeader("User-Agent", "IBM Web Services Explorer");
xhr.setRequestHeader("Cache-Control", "no-cache");
xhr.setRequestHeader("Pragma", "no-cache");
xhr.setRequestHeader("Connection", "close");
var soapEnv = '' +
    '<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ndf="http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl">' +
    '   <soapenv:Header/>' +
    '   <soapenv:Body>' +
    '      <ndf:NDFDgenByDayLatLonList soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">' +
    '         <listLatLon xsi:type="dwml:listLatLonType" xmlns:dwml="http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd">35.4,-97.6</listLatLon>' +
    '         <startDate xsi:type="xsd:date">2012-06-27</startDate>' +
    '         <numDays xsi:type="xsd:integer">3</numDays>' +
    '         <Unit xsi:type="dwml:unitType" xmlns:dwml="http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd">e</Unit>' +
    '         <format xsi:type="dwml:formatType" xmlns:dwml="http://graphical.weather.gov/xml/DWMLgen/schema/DWML.xsd">24 hourly</format>' +
    '      </ndf:NDFDgenByDayLatLonList>' +
    '   </soapenv:Body>' +
    '</soapenv:Envelope>';

xhr.send( soapEnv );

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:50:27.777

有时，当您从文件协议执行 AJAX 请求时，您将获得状态 0，但实际上是 200。只需更改您是否为：

```
if(xhr.status == 200 || xhr.status == 0) 
```

你应该很高兴。

这是我写的一篇关于使用 PhoneGap 的 AJAX 的博客文章。

[http://simonmacdonald.blogspot.com/2011/12/on-third-day-of-phonegapping-getting.html](http://simonmacdonald.blogspot.com/2011/12/on-third-day-of-phonegapping-getting.html)

更新：显然在 Android 2.x 中存在一个错误，其中设置“Content-length”标头会导致您描述的问题。看起来该错误已在 Android 4.0.3 中修复。因此，在 4.0.3 模拟器中尝试未修改的代码，它应该可以工作，然后回到 2.x 并删除 Content-length 标头以查看它是否也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T15:40:25.917

我们放弃了尝试在 Javascript 中运行 web 服务，并编写了一个 Java 插件来运行 web 服务。我们需要它在各种各样的设备上工作，而不是依赖用户更新他们的设备。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-09T07:37:04.800

尝试在 super.onCreate(savedInstanceState); 之后的 src > com.domain.appname > appname.java 中添加以下代码；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);
} 
```

# java - 在 Suse Enterprise Linux 服务器上为 Itanium64 构建 openjdk7

> ID：11230692
> 
> 赞同：1
> 
> 时间：2012-06-27T16:15:00.037
> 
> 标签：java, compilation, openjdk, itanium

我在运行 Suse Linux Enterprise Server 11 SP2 的安腾服务器上构建 openjdk7 时遇到了一些棘手的问题。

我已经成功安装了 Sun JDK 1.6 update 33 作为安装的引导程序。而且，我已经下载了源文件并将 openJDK7 安装源解压缩到一个目录中。我的构建通过了所有`make sanity`检查，看起来已经准备就绪。

我已取消设置 JAVA_HOME，声明 LANG=C，并将构建指向引导 JDK。

然后我调用`make ALLOW_DOWNLOADS=false ALT_BOOTDIR=/usr/java/jdk1.6.0_33 ALT_DROPS_DIR=~/openjdk_src/sourcedrop`

构建运行正常大约 5-10 分钟，然后我收到一串关于找不到 SSL 库的错误。

这发生在 jaxws 源代码树中构建的以下部分中，并且似乎与 SSL 有关：

```
[javac] Compiling 2735 source files to /root/openjdk_src/openjdk/build/linux-ia64/jaxws/build/classes
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/DOMForest.java:54: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HttpsURLConnection;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/DOMForest.java:55: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HostnameVerifier;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/DOMForest.java:56: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.SSLSession;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:54: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HostnameVerifier;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:55: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HttpsURLConnection;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:56: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.SSLSession;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:218: error: cannot find symbol
[javac]     private static class HttpClientVerifier implements HostnameVerifier {
[javac]                                                        ^
[javac]   symbol:   class HostnameVerifier
[javac]   location: class MetadataFinder
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:219: error: cannot find symbol
[javac]         public boolean verify(String s, SSLSession sslSession) {
[javac]                                         ^
[javac]   symbol:   class SSLSession
[javac]   location: class HttpClientVerifier
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/developer/JAXWSProperties.java:32: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HostnameVerifier;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/developer/JAXWSProperties.java:33: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HttpsURLConnection;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/developer/JAXWSProperties.java:34: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.SSLSocketFactory;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:39: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.SSLSocketFactory;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:40: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HttpsURLConnection;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:41: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.HostnameVerifier;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:42: error: package javax.net.ssl does not exist
[javac] import javax.net.ssl.SSLSession;
[javac]                     ^
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:302: error: cannot find symbol
[javac]     private static class HttpClientVerifier implements HostnameVerifier {
[javac]                                                        ^
[javac]   symbol:   class HostnameVerifier
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:303: error: cannot find symbol
[javac]         public boolean verify(String s, SSLSession sslSession) {
[javac]                                         ^
[javac]   symbol:   class SSLSession
[javac]   location: class HttpClientVerifier
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:154: error: cannot find symbol
[javac]                     if (conn instanceof HttpsURLConnection) {
[javac]                                         ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class WSEntityResolver
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/tools/internal/ws/wsdl/parser/MetadataFinder.java:156: error: cannot find symbol
[javac]                             ((HttpsURLConnection) conn).setHostnameVerifier(new HttpClientVerifier());
[javac]                               ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class WSEntityResolver
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:207: error: cannot find symbol
[javac]         if (httpConnection instanceof HttpsURLConnection) {
[javac]                                       ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:223: error: cannot find symbol
[javac]                 ((HttpsURLConnection) httpConnection).setHostnameVerifier(new HttpClientVerifier());
[javac]                   ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:227: error: cannot find symbol
[javac]             HostnameVerifier verifier =
[javac]             ^
[javac]   symbol:   class HostnameVerifier
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:228: error: cannot find symbol
[javac]                 (HostnameVerifier) context.invocationProperties.get(JAXWSProperties.HOSTNAME_VERIFIER);
[javac]                  ^
[javac]   symbol:   class HostnameVerifier
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:230: error: cannot find symbol
[javac]                 ((HttpsURLConnection) httpConnection).setHostnameVerifier(verifier);
[javac]                   ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:234: error: cannot find symbol
[javac]             SSLSocketFactory sslSocketFactory =
[javac]             ^
[javac]   symbol:   class SSLSocketFactory
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:235: error: cannot find symbol
[javac]                 (SSLSocketFactory) context.invocationProperties.get(JAXWSProperties.SSL_SOCKET_FACTORY);
[javac]                  ^
[javac]   symbol:   class SSLSocketFactory
[javac]   location: class HttpClientTransport
[javac] /root/openjdk_src/openjdk/build/linux-ia64/jaxws/drop/jaxws_src/src/com/sun/xml/internal/ws/transport/http/client/HttpClientTransport.java:237: error: cannot find symbol
[javac]                 ((HttpsURLConnection) httpConnection).setSSLSocketFactory(sslSocketFactory);
[javac]                   ^
[javac]   symbol:   class HttpsURLConnection
[javac]   location: class HttpClientTransport
[javac] Note: Some input files use or override a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 27 errors 
```

为了解决这个问题，我`jsse.pack`将`jsse.jar`.`jdk/jre/bin`

然后，如果我记得要`make ALLOW_DOWNLOADS=false ALT_BOOTDIR=/usr/java/jdk1.6.0_33 ALT_DROPS_DIR=~/openjdk_src/sourcedrop DISABLE_HOTSPOT_OS_VERSION_CHECK=ok`很好地忽略架构。

然后，当它在 VM 中生成 adlc 时，构建会失败：

```
Making adlc
g++  -Wl,-relax -Xlinker -O1   -Xlinker -export-dynamic -o ../generated/adfiles/adlc            
../generated/adfiles/adlparse.o ../generated/adfiles/arch       Desc.o    
../generated/adfiles/arena.o ../generated/adfiles/dfa.o ../generated/adfiles/dict2.o   
../generated/adfiles/filebuff.o ../generated/adfil       es/forms.o 
../generated/adfiles/formsopt.o ../generated/adfiles/formssel.o 
../generated/adfiles/main.o 
../generated/adfiles/adlc-opcodes.o ../       generated/adfiles/output_c.o 
../generated/adfiles/output_h.o
make[6]: *** No rule to make target 
`/root/openjdk_src/openjdk/hotspot/src/cpu/ia64/vm/.ad', needed by    
`../generated/adfiles/linux_.ad'.  Stop       . 
```

怎么办？什么是 adlc，为什么不构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-14T13:57:13.213

我最近才偶然发现这个（仍然悬而未决的）问题，最近几个月尝试过类似的事情；并且也遇到（并解决了）同样的问题。

'adlc' 是HotSpot 的架构描述语言编译器，*即*ADLC。它用于生成 HotSpot 构建的 Java 执行引擎（解释器和 JIT 编译器）的源代码；基于处理 ' `.ad`' 文件。如果并且当您构建 ADLC 工具时，它的“用法”如下所示：

```
$> ./adlc
Architecture Description Language Compiler

Usage: adlc [-doqwTs] [-#]* [-D<FLAG>[=<DEF>]] [-U<FLAG>] [-c<CPP_FILE_NAME>] [-h<HPP_FILE_NAME>] [-a<DFA_FILE_NAME>] [-v<GLOBALS_FILE_NAME>] <ADL_FILE_NAME>
 d  produce DFA debugging info
 o  no output produced, syntax and semantic checking only
 q  quiet mode, supresses all non-essential messages
 w  suppress warning messages
 T  make DFA as many subroutine calls
 s  output which instructions are cisc-spillable
 D  define preprocessor symbol
 U  undefine preprocessor symbol
 c  specify CPP file name (default: (null))
 h  specify HPP file name (default: (null))
 a  specify DFA output file name
 v  specify adGlobals output file name
 #  increment ADL debug level 
```

您的构建问题是您无法避免“架构”检测！（实际上，您使用“DISABLE_HOTSPOT_OS_VERSION_CHECK=ok”，甚至可能是可疑的。）但是，它比（只是）更糟糕的是：IA64（除了 Windows，直到 Windows Server 2008 R2（扩展）支持结束...到 2020 年？）正在从 Java 7 OpenJDK 源代码树中删除，并且位已被删除/正在被积极删除（和/或没有被维护？）。具体来说，这就是 -support 系统的一些 HotSpot/OpenJDK 构建配置组件的问题，`Makefile`这是指定所有架构资格以定位/处理“`.ad`' Linux Itanium/IA64 架构上必需的文件。具体来说，您缺少正确文件名扩展所需的某些关键定义： `[...]/cpu/ia64/vm/.ad`并且`../generated/adfiles/linux_.ad`显然不正确，文件/目标的完全架构限定名称（因此未找到）。

上面所涉及的文件/目标的正确名称实际上是`../generated/adfiles/linux_ia64.ad`，它是通过目标名称中的环境变量替换来实现的，但是缺少定义`${arch_model}`（类似的情况出现在另一个 envvar，`${os_arch_model}`）。这些在' ' 目录`platform_ia64`下的 ' ' 中不存在（疏忽？） 。简单回顾一下linux下的其他平台文件，你应该看到' '应该取''的值，*即*，同样，' '与' '取相同的值，*即*。`linux``[JDK_distribution]/hotspot/make``arch_model``arch` *`ia64``os_arch_model``os_arch` *`linux_ia64`**

 **```
[Java7 JDK distribution]/hotspot/make $ cat platform_ia64
os_family = linux
arch = ia64
arch_model = ia64                      # Added
os_arch = linux_ia64
os_arch_model = linux_ia64             # Added
lib_arch = ia64
compiler = gcc
gnu_dis_arch = ia64
sysdefs = -DLINUX -D_GNU_SOURCE -DIA64 -DCC_INTERP
mark_style = alignment 
```

仅通过修改/更正，您应该能够成功完成 OpenJDK 构建的这些初始步骤。（我可以通过 ADLC 构建，但后来由于从后来的 IA64 源中删除的另一个源区域的构建过程失败了......）祝你好运！**

# sql-server - 如何从 SQL 表中检索分层数据？

> ID：11230693
> 
> 赞同：5
> 
> 时间：2012-06-27T16:15:10.333
> 
> 标签：sql-server, tsql, while-loop, hierarchy

我有以下存储过程来返回工作正常的 Id、parentId 和 absoluteUrls 列表：

```
ALTER PROCEDURE [dbo].[SearchDataManager.HierarchyById] 
    @currentId AS int   
AS
BEGIN
 DECLARE @id INT 
 DECLARE @parentId INT
 DECLARE @absoluteUrl NVARCHAR(1000)

 DECLARE @Hierarchy TABLE (Id int, ParentId int, AbsoluteUrl nvarchar(1000))

 WHILE @currentId != 0
 BEGIN

     SELECT @id = Id, @parentId = ParentId, @absoluteUrl = AbsoluteUrl
     FROM dbo.[SearchDataManager.NiceUrls]
     WHERE id = @currentId

     INSERT INTO @Hierarchy  VALUES (@id, @parentId, @absoluteUrl)

    SET @currentId = @parentId
 END

    SELECT * FROM @Hierarchy  
END 
```

“NiceUrls”表具有 Id 和 ParentId。parentId 指的是同一张表中的一条记录。

它返回如下：

```
 ----------------------------------
    Id  | ParentId | AbsoluteUrl
    ----------------------------------
    294 | 5        | url1
    5   | 2        | url2
    2   | 0        | url3 
```

上面的代码使用 WHILE 循环并定义了一个 Table 变量可以正常工作，但我只是想知道有没有更好的方法从表中检索层次结构数据？

上面代码的问题是可维护性。如果我需要返回 NiceUrls 表的 1 列，那么我必须定义一个新变量，将该列添加到内联表等。

有没有更好的方法来重写sp？

谢谢，

是什么

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T14:07:39.347

```
with Hierarchy (Id, ParentId, AbsoluteUrl, Level)
 AS
 (
    -- anchor member
     SELECT Id,
        ParentId,
        AbsoluteUrl,
        0 AS Level   
     FROM dbo.[NiceUrls]
     WHERE id = @currentId
     UNION ALL
     -- recursive members
     SELECT su.Id,
        su.ParentId,
        su.AbsoluteUrl,
        Level + 1 AS Level   
     FROM dbo.[NiceUrls] AS su
     INNER JOIN Hierarchy ON Hierarchy.ParentId = su.Id  
 )
 SELECT * FROM Hierarchy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:31:06.547

看起来您想要源表中与原始 id 相关的所有记录。

1）创建一个 CTE，为您提供所有 id（请参阅链接 Triple 注意）

2) 将此 CTE 加入原始表

# cakephp - 选择字段之间的验证

> ID：11230694
> 
> 赞同：1
> 
> 时间：2012-06-27T16:15:10.900
> 
> 标签：cakephp, cakephp-2.1

***我想做什么？***
我有三个字段（1 个隐藏，一个 id），用户必须完成另外两个字段之一才能通过验证。
因此，如果两个字段都为空，则用户应该无法通过验证，但如果一个已完成，则通过。

*1 2 3*
A 0 B 真
AB 0 真
A 0 0 假

我正在使用 CakePHP **v2.1.3**，因此可以访问新的验证规则增强功能。

***问题***
我似乎找不到同时检查两个字段的可靠方法。到目前为止，我已经尝试`$this->data`从 中`model`并发现验证一次只传递一个数据实例。所以似乎没有办法比较这些领域。

***到目前为止我所拥有的***

```
/**
 * Custom validation to see if either of the two fields are set, if neither are, then we fail, if at least one is, we pass
 * @param array $check
 * @return boolean 
 */
public function checkAttributes($check){
    var_dump($check);
    var_dump($this->data);
    echo "<hr>";

    // Check for an id value picked from a list
    if(@is_numeric($check['attribute_value_id']) && isset($this->data['AdvertAttributeValue']['attribute_value_id'])){
        return true;
    }

    // Check for a date value selected
    if(@is_array($check['attribute_value_text']) && isset($this->data['AdvertAttributeValue']['attribute_value_text'])){
        return true;
    }

    // Check for a text value
    if(@is_string($check['attribute_value_text']) && isset($this->data['AdvertAttributeValue']['attribute_value_text'])){
        return true;
    }

    return false;
} 
```

这似乎不起作用，因为我认为它无法检查`$this->data`，因为它的实例不包含所有相关字段。

***我还应该提到的数据***
是我传递了一个大型数字数组。因此这些字段在页面上出现多次，目前为 12 维。所以直接通过它们访问它们`$this->data`会很困难，因为它们不是命名维度，而是`$this->data['Model'][<num>]['field'] = value`

* * *

***验证***

```
public $validate = array(
    'attribute_value_id'=>array(
        'notempty'=>array(
            'rule'=>'checkAttributes',
            'message'=>'Please select a value for your attribute',
            'required'=>true,
        ),
    ),
    'attribute_value_text'=>array(
        'notempty'=>array(
            'rule'=>'checkAttributes',
            'message'=>'You must enter text for this attribute',
            'required'=>true,
        ),
    )
); 
```

***数据转储***
这里我将显示`var_dump()`上面的输出。我的模型中有两个验证规则，一个用于`attribute_value_id`，一个用于`attribute_value_text`

```
// An id field selected from a list
array // $check
  'attribute_value_id' => string '1' (length=1)
array // $this->data
  'AdvertAttributeValue' => 
    array
      'attribute_value_id' => string '1' (length=1)
      'id' => string '' (length=0)

// A text field
// Validating first time around on the id field
array // $check
  'attribute_value_id' => string '' (length=0)
array // $this->data
  'AdvertAttributeValue' => 
    array
      'attribute_value_id' => string '' (length=0)
      'id' => string '' (length=0)
      'attribute_value_text' => string '50' (length=2)
// Validating second time around on the text field
array // $check
  'attribute_value_text' => string '50' (length=2)
array // $this->data
  'AdvertAttributeValue' => 
    array
      'attribute_value_id' => string '' (length=0)
      'id' => string '' (length=0)
      'attribute_value_text' => string '50' (length=2)  
// A date field
array // $check
  'attribute_value_id' => string '' (length=0)
array // $this->data
  'AdvertAttributeValue' => 
    array
      'attribute_value_id' => string '' (length=0)
      'id' => string '' (length=0)
      'attribute_value_text' => 
        array
          'month' => string '06' (length=2)
          'day' => string '28' (length=2)
          'year' => string '2012' (length=4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:43:15.270

您可以使用 Model::$data 或 Model::beforeValidate()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:32:26.290

该`saveAll()`方法只是调用`saveMany()`或`saveAssociated()`视情况而定。默认情况下，这些方法会在保存任何数据之前尝试验证所有数据（通过调用`validateMany()`）。但是，正如您在[源代码](http://api20.cakephp.org/view_source/model#line-2130)中看到的那样，该函数单独验证每个项目，因此验证代码将无法访问其他记录。

据我了解，您需要在保存多条记录之前对其进行交叉验证。尽管我从未这样做过，但这听起来像是在控制器中进行验证的案例。您可以调用`Model::validate()`或`Model::validateAll()`确保记录的内部一致性。然后，您的控制器还可以实现交叉记录验证所需的任何逻辑。完成后，您可以在禁用验证的情况下进行保存调用：

```
$this->myModel->saveAll($this->request->data, array('validate'=>false)); 
```

请注意，在执行任何此操作之前，您必须将数据设置为模型：

```
$this->myModel->set($this->request->data); 
```

我意识到这在控制器中放置了很多额外的代码，理想情况下应该在模型中。我想它有可能通过模型​​回调之一来完成，但我不确定如何。

# windows-phone-7 - VS2010 Express + Silverlight - 最奇怪的事情

> ID：11230696
> 
> 赞同：1
> 
> 时间：2012-06-27T16:15:20.837
> 
> 标签：windows-phone-7, silverlight-4.0, visual-studio-express

这里有点随机，我已经用尽了我的知识来尝试解决这个问题。

基本上我刚刚把我的硬盘换成了 SSD（我做过的最好的举动），除此之外，我不得不从头开始重新安装所有东西。当我这样做时，Windows Phone 的 VS2010 Express 不断给我现有项目的这个错误（Silverlight 4 SDK 未安装 + 一堆警告）。

![Silverlight 4 SDK 未安装 + 一堆警告](../Images/c79a11a907cce9d49be3f8aee0371961.png)

但我已经确定它已安装

![在此处输入图像描述](../Images/6945d1bc675ce4abc7a9261f6e024111.png)

我已经重新安装了 Silverlight 4 SDK，卸载了所有 Silverlight + VS（以及控制面板中的许多组件）并通过 Windows 更新执行更新，重新启动等。似乎没有任何效果。

奇怪的是，如果我创建一个新项目，它工作得很好，没有警告，没有错误，什么都没有。我完全被难住了。

有什么想法吗？

我通常的安装过程是：

Silverlight SDK > VS2010 Express for WP7 > 开始开发

我已经删除了 .suo/.user 文件，还有 obj 和 Bin 目录。徒劳无功 ：（

自从我上次安装以来，唯一真正改变的是我从中加载实际项目的目录（但我不明白这会如何影响它？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T00:54:32.513

如果不执行完全重新安装，我无法解决这个问题。我确实发现 Win32 应用程序的其他一些元素也有问题，似乎我的 Windows 安装被破坏了。

# .htaccess - 从 url 隐藏管理文件夹

> ID：11230698
> 
> 赞同：0
> 
> 时间：2012-06-27T16:15:29.867
> 
> 标签：.htaccess, mod-rewrite, admin, administrator

**当前网址**

```
http://www.example.com/admin/data/img/gallery/myimages.jpg
http://www.example.com/admin/data/content/mycontents.html 
```

所以

**当前网页的脚本/HTMLS/文件包含并显示在浏览器源代码中**

```
<img src="/admin/data/img/gallery/myimage.jpg">
<?php include("/admin/data/content/mycontents.html"); ?> 
```

这是名为“admin”的文件夹中的“CMS 系统”

我想要做的是从每个脚本/php/html 输出到浏览器中隐藏管理文件夹。所以没有人可以看到或搜索引擎无法捕获这个区域（安全问题）所以当浏览器输出内容或脚本时，它会将上面的 url 重写为这个

**删除管理员**

```
 http://www.example.com/data/img/gallery/myimages.jpg
    http://www.example.com/data/content/mycontents.html 
```

浏览器内源代码

```
<img src="/data/img/gallery/myimage.jpg"> 
```

或 **删除数据**

```
http://www.example.com/img/gallery/myimages.jpg
http://www.example.com/content/mycontents.html 
```

请帮助它也必须适用于 www.example.com 以及 example.com

通过 htaccess 和 mod_rewrite 解决我无法访问 httpd.conf 我也不想移动文件夹 文件夹中有很多脚本，所以必须写很多。还告诉我应该把它放在根目录还是管理文件夹中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:05:49.443

您可以尝试将其添加到文档根目录中的 .htaccess 文件中（“admin”文件夹所在的位置）：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}/admin/data/%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/admin/data/%{REQUEST_URI} -d
RewriteRule ^(.*)$ /admin/data/$1 [L] 
```

条件检查请求 URI 是否以“/admin/data/”开头，是否指向现有文件或目录。如果是，则重写 URI，以便在请求前面有一个“/admin/data/”。如果您不想将目录映射到 /admin/data，则删除第二个条件（带有 的条件`-d`）并`[OR]`从第一个条件中删除标志。

# jvm - 无法创建启用了 -XX:+UseLargePages 的 JVM

> ID：11230701
> 
> 赞同：9
> 
> 时间：2012-06-27T16:15:37.497
> 
> 标签：jvm, debian, jvm-arguments, large-object-heap, huge-pages

我有一个当前使用 14GB 堆运行的 Java 服务。我很想试试[-XX:+UseLargePages](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#PerformanceTuning)选项，看看这会如何影响系统的性能。我已经按照[Oracle](http://www.oracle.com/technetwork/java/javase/tech/largememory-jsp-137182.html)的描述使用适当的共享内存和页面值配置了操作系统（这些也可以使用[在线工具](http://www.peuss.de/node/67)计算）。

配置操作系统后，我可以看到它将预期的内存量分配为大页面。但是，使用选项集启动 VM`-XX:+UseLargePages`始终会导致以下错误之一：

当`-Xms`/`-Xmx`几乎等于巨页分配时：

```
 Failed to reserve shared memory (errno = 28). // 'No space left on device' 
```

当`-Xms`/`-Xmx`小于大页分配时：

```
 Failed to reserve shared memory (errno = 12). // 'Out of memory' 
```

我确实尝试过引入一些余地——所以在一个 32GB 的系统上，我分配了 24GB 的共享内存和大页面来与配置有 20GB 堆的 JVM 一起使用，其中当前只有 14GB 被使用。我还验证了执行 JVM 的用户确实具有与`/proc/sys/vm/hugetlb_shm_group`.

谁能给我一些关于我可能会出错的地方以及接下来我可以尝试什么的指示？

### 分配/使用：

*   `-Xms`/ `-Xmx`- 20GB
*   已用堆 - 14GB
*   `/proc/sys/kernel/shmmax`- 25769803776 (24GB)
*   `/proc/sys/vm/nr_hugepages`- 12288

### 环境：

*   系统内存 - 32GB
*   系统页面大小 - 2048KB
*   Debian 2.6.26-2-amd64
*   Sun JVM 1.6.0_20-b02

# 解决方案

感谢[@jfgagne](https://stackoverflow.com/users/851677/jfgagne)提供了导致解决方案的答案。除了 `/proc/sys/kernel/shmall`设置（指定为 4KB 页面）之外，我还必须按照[Thomas 的博客](http://www.peuss.de/node/67)`/etc/security/limits.conf`中的描述添加条目。但是，当我的应用程序开始使用时，我还必须复制 root 用户的设置（请注意，限制以 KB 为单位指定）：`jsvc`

```
 root       soft memlock 25165824
    root       hard memlock 25165824
    pellegrino soft memlock 25165824
    pellegrino hard memlock 25165824 
```

还值得一提的是，可以通过使用`-version`参数启动 JVM 来快速测试设置：

```
 java -XX:+UseLargePages -Xmx20g -version 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T09:22:12.890

当你在 Java 中使用大页面时，不仅有使用大页面的堆，还有 PermGen：不要忘记为它分配空间。似乎这就是为什么当您设置`Xmx`接近大页面数量时您会收到不同的 errno 消息。

还有`shmall`一个你没有提到的需要设置的内核参数，也许是它阻碍了你。在您的情况下，您应该将其设置为 6291456。

最后要说的是：使用huge page时，`Xms`不再使用该参数：Java`Xmx`使用huge page将所有的保留在共享内存中。

# sql - 根据 3 个匹配的列条目返回重复行的计数

> ID：11230703
> 
> 赞同：0
> 
> 时间：2012-06-27T16:15:49.053
> 
> 标签：sql

在一个表中，我想根据三列和找到的重复项的计数返回重复的行。

例如，在一行中，假设 a 列的条目为 1，b 列的条目为 1，c 列的条目为 1。如果其他行对于 3 列（1、1 和 1）具有完全相同的条目，我只想返回/计算这一行。

提前致谢！-N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:22:20.067

```
-- You need to specify the columns you need, and the count
SELECT   col1, col2, col3, COUNT(*)
FROM     myTable
-- Then you have to group the tuples based on the columns you are doing the count on
GROUP BY col1, col2, col3
-- Here you specify the condition for COUNT(*)
HAVING   COUNT(*) > 1; 
```

[您可以在此处](http://database-programmer.blogspot.ca/2008/04/group-by-having-sum-avg-and-count.html)找到有关此的更多信息（以及其他一些有用的内容）。

# spotify - 艺术家的views.player小部件

> ID：11230717
> 
> 赞同：0
> 
> 时间：2012-06-27T16:16:43.130
> 
> 标签：spotify

我正在尝试让玩家视图为艺术家工作，但是在酒吧周围/手动重新实现是否有更好的方法来做到这一点。下面是我到目前为止尝试过的代码，取自关于专辑相同内容的堆栈溢出。这有两个问题，一个图像没有显示/回退到专辑，两个，当你尝试时玩你会得到“Uncaught TypeError: Object Tin Hat Trio has no method 'get'”

```
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="sp://import/css/eve.css">
  <link rel="stylesheet" href="sp://import/css/api.css">
</head>

<div id="artist-element"></div>
<script>
  var sp = getSpotifyApi(1);
  var views = sp.require('sp://import/scripts/api/views');
  var models = sp.require('sp://import/scripts/api/models');
  models.Artist.fromURI('spotify:artist:5spC5WtEkxDbaIH7bGGX4m', function(artist) { 
    var p = new views.Player(); 
     p.context = artist; 
    document.getElementById('artist-element').appendChild(p.node); 
  });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:41:26.680

播放器对象只能具有类型`Album`或的上下文`Playlist`。文档[在这里](https://developer.spotify.com/technologies/apps/docs/beta/ca28d10757.html)。

# sql - 随机对象多次返回相同的结果

> ID：11230720
> 
> 赞同：0
> 
> 时间：2012-06-27T16:16:46.730
> 
> 标签：sql, vb.net, random

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim s As New Staff
    Dim strConn As String

    strConn = ConfigurationManager.ConnectionStrings("ConnectionString").ToString
    Dim conn As New SqlConnection(strConn)

    Dim strSql As String
    strSql = "SELECT StaffID FROM Staff"
    Dim cmd As New SqlCommand(strSql, conn)

    Dim daMember As New SqlDataAdapter(cmd)
    Dim ds As New DataSet

    conn.Open()
    daMember.Fill(ds, "Staff")
    Dim i As Integer = ds.Tables("Staff").Rows.Count - 1
    For Each dr As DataRow In ds.Tables("Staff").Rows
        strSql = "Update CIOPassword SET CIPassword=@CI, COPassword = @CO WHERE StaffID=@id"
        Dim cmd2 As New SqlCommand(strSql, conn)
        Dim output1 As String = ""
        Dim output2 As String = ""
        Dim random As New Random()

        Dim val, val2 As Integer
        For j As Integer = 0 To 9
            val = random.[Next](1, 36)
            val2 = random.[Next](1, 36)
            output1 += ChrW(IIf(val <= 26, 64 + val, (val - 27) + 48))
            output2 += ChrW(IIf(val2 <= 26, 64 + val2, (val2 - 27) + 48))
        Next
        cmd2.Parameters.AddWithValue("@CI", output1)
        cmd2.Parameters.AddWithValue("@CO", output2)
        cmd2.Parameters.AddWithValue("@id", dr(0))
        cmd2.ExecuteNonQuery()
    Next
    GridView1.DataBind()
    conn.Close()
End Sub 
```

基本上我每次单击按钮时都尝试用 2 个随机数更新每条记录，我现在的问题是，系统会更新记录但数据错误。例如，所有数据都应该是不同的（随机字符串），但是对于某些行，它使用相同的数据进行了更新，但是随机地，row1 row2 row3 的第 1 列和第 2 列具有完全相同的数据，然后第 3 行具有不同的数据，第二次， row1 row2 相同数据 row3 ro4 不同数据。它是随机顺序的。当我添加一个 MsgBox 在 For 循环中进行测试时，数据已正确更新为所有不同的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:29:42.240

每次创建`Random`对象时，它都会使用当前时间作为种子创建一个新的随机序列。如果您同时创建一堆`Random`对象，它们都将具有相同的种子，因此将生成相同的序列。因此，您应该只创建一个`Random`对象并重复使用同一个对象，直到完成为止。不要在循环中不断创建新的，因为如果循环运行得太快，它们最终将不是“随机的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:30:03.577

看看这个网站。

[http://www.brettb.com/RandomNumbersInDotNet.asp](http://www.brettb.com/RandomNumbersInDotNet.asp)

你的`random.[Next]`可能不正确。

# batch-file - For循环批处理中的多个条件？

> ID：11230722
> 
> 赞同：3
> 
> 时间：2012-06-27T16:16:53.297
> 
> 标签：batch-file, for-loop, line, cmd

我想在批处理文件中使用 for 循环交替打印 2 个单独的 txt 文件的每一行，我尝试使用 AND，但在运行批处理时在 cmd.exe 中给出：“此时 AND 是意外的”。有任何想法吗？

```
 FOR /F "tokens=*" %%F in (!logPath!) AND for /f "tokens=*" %%H in (%%refLogPath) DO ( 

  REM print each line of log file and refLog file sequentially 
  echo %%F
  echo %%H
  REM set logLine=%%F
  REM check 'each line' of log file against ENG-REF.log

 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:01:29.647

没有关键字 like `AND`，通常你不能用两个 FOR 循环来解决这个问题。
但是还有另一种方法可以使用`set /p`.

```
setlocal EnableDelayedExpansion
<file2.txt (
  FOR /F "delims=" %%A in (file1.txt) DO (
    set /p lineFromFile2=
    echo file1=%%A, file2=!lineFromFile2!
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:42:40.230

我相信这与批处理解决方案一样强大。

*   它处理两个文件中的空行
*   每行最多可以读取大约 8k 字节
*   文件中的行数不必匹配
*   一行可以以任何字符开头（避免 FOR /F EOL 问题）
*   一行可以包含`!`而不会损坏（避免在启用延迟扩展时扩展 FOR 变量的问题）
*   行可以是 Unix 或 Windows 样式。
*   控制字符不会从行尾剥离

但是这个解决方案在读取一个大文件时会变得越来越慢，因为它必须从头开始重新扫描第二个文件的每一行。

```
@echo off
setlocal disableDelayedExpansion
set "file1=file1.txt"
set "file2=file2.txt"
for /f %%N in ('find /c /v "" ^<"%file2%"') do set file2Cnt=%%N
findstr /n "^" "%file1%" >"%file1%.tmp"
findstr /n "^" "%file2%" >"%file2%.tmp"
set "skip=0"
set "skipStr="
for /f "usebackq delims=" %%A in ("%file1%.tmp") do (
  set "ln1=%%A"
  call :readFile2
  set /a "skip+=1"
)
if %file2Cnt% gtr %skip% (
  for /f "usebackq skip=%skip% delims=" %%B in ("%file2%.tmp") do (
    set "ln2=%%B"
    setlocal enableDelayedExpansion
    set "ln2=!ln2:*:=!"
    (echo()
    (echo(!ln2!)
  )
)
del "%file1%.tmp" 2>nul
del "%file2%.tmp" 2>nul
exit /b

:readFile2
if %skip% gtr 0 set "skipStr=skip=%skip% "
if %file2Cnt% gtr %skip% (
  for /f "usebackq %skipStr%delims=" %%B in ("%file2%.tmp") do (
    set "ln2=%%B"
    goto :break
  )
) else set "ln2="
:break
setlocal enableDelayedExpansion
set "ln1=!ln1:*:=!"
if defined ln2 set "ln2=!ln2:*:=!"
(echo(!ln1!)
(echo(!ln2!)
exit /b 
```

如果该解决方案的限制与您的文件无关，那么使用[jeb 的方法会更好。](https://stackoverflow.com/a/11231447/1012053)它目前具有以下限制，可以通过相当小的修改来消除：

*   文件必须具有相同的行数
*   文件不能有空行
*   File1 不能包含`!`字符
*   File1 中的任何行都不能以`;`

此外，它在读取 File2 时具有以下限制，这些限制是 SET /P 限制所固有的

*   行必须是 Windows 样式，以回车符结尾 lineFeed
*   行不能超过 1021 个字符（字节），不包括行终止符
*   控制字符将从每行的末尾剥离

一个更好的解决方案是使用批处理以外的东西。有很多可能性：VBS、JScript、PowerShell、perl……不胜枚举。

# iphone - 泄漏对象 NSDate：ResumeTimer 和 PauseTimer

> ID：11230723
> 
> 赞同：0
> 
> 时间：2012-06-27T16:16:58.180
> 
> 标签：iphone

在 Instrumens 中测试了内存泄漏的应用程序，使用多次 pauseTimer 和 resumeTimer 时出现多次泄漏。

在 m 文件中定义

```
NSDate *pauseStart, *previousFireDate;

-(void)pauseTimer{
pauseStart = [[NSDate dateWithTimeIntervalSinceNow:0] retain];
previousFireDate = [[timer fireDate] retain];
[timer setFireDate:[NSDate distantFuture]];
}

  -(void)resumeTimer{
float pauseTime = -1*[pauseStart timeIntervalSinceNow];
//[timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
[timer setFireDate:[NSDate dateWithTimeInterval:pauseTime sinceDate:previousFireDate]];
} 
```

如何修复 pauseTimer 和 resumeTimer 的内存泄漏。用户可以多次使用 PauseTimer 和 resumeTimer。

感谢帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:27:17.890

每次触发该方法时`pauseStart`，您都将保留这些值。您需要在保留新值之前释放以前的值，以避免内存泄漏。`previousFireDate``pauseTimer`

最简单的解决方案是为这些值创建两个保留属性（可能在类扩展中），因此当您设置新值时，将为您处理释放。（只是不要忘记释放你的 dealloc 方法中的值以避免泄漏。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:31:03.240

您可以使用 NSTimer 的`isValid`属性和`invalidate`方法。

```
-(void)pauseTimer
{
    if ( !timer.isValid )
        return;

    // remember your fire date

    [timer invalidate];
}

-(void)resumeTimer
{
    if ( timer.isValid )
        return;

    // schedule your timer to new date
    // release old date
} 
```

# sql - 将两行数据合二为一

> ID：11230725
> 
> 赞同：1
> 
> 时间：2012-06-27T16:17:10.413
> 
> 标签：sql, sql-server, sql-server-2008, tsql

> **可能重复：**
> [连接行值 T-SQL](https://stackoverflow.com/questions/1874966/concatenate-row-values-t-sql)

我是 SQL Server 的新手，并且尝试了一些从互联网上建议的技术，例如使用临时变量、XML 路径`COALESCE`等，但都无法满足我的要求。

我正在使用 Toad for SQL Server 5.5 版来创建 SQL 脚本，而我用来查询数据库服务器的帐户只有读取权限。因此不能使用`CREATE VIEW`我相信的声明。

表名：`Customer`

```
ServerName  Country  contact
----------  -------  -------------
srv1        SG       srv1_contact1
srv1        SG       srv1_contact2
srv1        SG       srv1_contact3
srv2        HK       srv2_contact1
srv2        HK       srv2_contact2
srv3        JP       srv3_contact1
srv3        JP       srv3_contact2
srv3        JP       srv3_contact3
srv4        KR       srv4_contact1 
```

预期输出：

```
ServerName  Country  contact
----------  -------  -------------------------------------------
srv1        SG       srv1_contact1; srv1_contact2; srv1_contact3
srv2        HK       srv2_contact1; srv2_contact2
srv3        JP       srv3_contact1; srv3_contact2; srv3_contact3
srv4        KR       srv4_contact1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:18:50.820

```
SELECT ServerName, Country, contact = STUFF((SELECT '; ' 
    + ic.contact FROM dbo.Customer AS ic
  WHERE ic.ServerName = c.ServerName AND ic.Country = c.Country
  FOR XML PATH(''), TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 2, '')
FROM dbo.Customer AS c
GROUP BY ServerName, Country
ORDER BY ServerName; 
```

# c - 在写入缓冲区之前计算 C 字符串的大小

> ID：11230728
> 
> 赞同：1
> 
> 时间：2012-06-27T16:17:15.123
> 
> 标签：c, string, nginx, buffer

我是 C 新手，想知道我处理某事的方式是否正确。我正在为[http://nginx.com/](http://nginx.com/)创建一个模块，并且正在为我的模块创建一个状态页面。

现在状态页面将包含一些基本的 HTML 和表格。这是我创建它的一些代码。

```
// Get size
size =
    sizeof("<table>") +
    sizeof("<tr><td align=\"right\">enabled:</td><td>YES</td></tr>") +
    sizeof("<tr><td align=\"right\">activated:</td><td>YES</td></tr>") +
    sizeof("<tr><td align=\"right\">connections/lt:</td><td>") + NGX_ATOMIC_T_LEN + sizeof(" / ") + NGX_ATOMIC_T_LEN + sizeof("</td></tr>") +
    sizeof("<tr><td align=\"right\">remain on: xxxx-xx-xx xx:xx:xx GMT</td><td></td></tr>") +
    sizeof("</table>");

// Start buffer
b = ngx_create_temp_buf(r->pool, size);
if (b == NULL) {
    return NGX_HTTP_INTERNAL_SERVER_ERROR;
}

// Start chain
out.buf = b;
out.next = NULL;

// Finish buffer
b->last = ngx_sprintf(b->last, "<table>");
b->last = ngx_sprintf(b->last, "<tr><td align=\"right\">enabled:</td><td>%s</td></tr>", alcf->enabled ? "YES" : "NO");
b->last = ngx_sprintf(b->last, "<tr><td align=\"right\">activated:</td><td>%s</td></tr>", alcf->activated ? "YES" : "NO");
b->last = ngx_sprintf(b->last, "<tr><td align=\"right\">connections/lt:</td><td>%uA / %uA</td></tr>", ac, alcf->connections_activate);
b->last = ngx_sprintf(b->last, "<tr><td align=\"right\">remain on:</td><td>");
b->last = !alcf->activatedEndTime ? ngx_sprintf(b->last,"") : ngx_http_cookie_time(b->last, alcf->activatedEndTime);
b->last = ngx_sprintf(b->last, "</td></tr>");
b->last = ngx_sprintf(b->last, "<table>"); 
```

这是这样做的唯一有效方法吗，我觉得必须编写两次 HTML 代码是错误的，一次是为了获取大小以使缓冲区膨胀，一次是实际存储在缓冲区中。是否有任何其他解决方案。我试图让它尽可能地保持内存效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:21:10.587

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:10:31.837

我认为您有一个错误-您忘记为 terminating 保留空间`\0`。

您对`sizeof`作品的使用，但迫使您重复 HTML 的每个部分。有一天，您将更新`sprintf`行中的 HTML，而忘记更新行中的副本`sizeof`，这将导致内存溢出。

更好的方法是将字符串保留一次，并用于`strlen`获取大小。
这是这个想法的一个例子。它远非完美，但它节省了大部分重复。

```
struct html_part {
   const char *text;
   size_t extra_len;
};
struct html_part html_parts[] = {
    { "<table>", 0 }
    { "<tr><td align=\"right\">enabled:</td><td>%s</td></tr>", 3-2 } // YES=3, %s=2
    ...
};
// Calculate the space needed
len = 0;
for (i=0;i<sizeof(html_parts)/sizeof(html_parts[0]);i++) {
    len += strlen(html_parts[i].text) + html_parts[i].extra_len;
}
len++;  // For the terminating null
...
// Print the data
b->last = ngx_sprintf(b->last, html_parts[0]);
b->last = ngx_sprintf(b->last, html_parts[1], alcf->enabled ? "YES" : "NO"); 
```

# handlebars.js - 是否可以为单个车把模板注册助手？

> ID：11230730
> 
> 赞同：9
> 
> 时间：2012-06-27T16:17:23.507
> 
> 标签：handlebars.js

我想创建一个车把模板并为该单个模板使用本地助手。我知道如何使用 Handlebars.registerHelper 为所有模板注册助手，但我只需要本地模板。（类似于 ExtJS 支持 XTemplates 的东西）

例如，基于 handlebars.js 文档的类似内容：

```
var context = { posts: [{url: "/hello-world", body: "Hello World!"}] };
var source = "<ul>{{#posts}}<li>{{{link_to this}}}</li>{{/posts}}</ul>"

var template = Handlebars.compile(source, {
   link_to: function(context) {
       return "<a href='" + context.url + "'>" + context.body + "</a>";
   }
);
template(context); 
```

这是可能的还是所有助手都必须在全球范围内注册？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T15:36:21.923

使用此语法：

```
template(context, {helpers: helpers}) 
```

本地助手重新定义了全局。因此，如果您愿意`each`，`if`或者其他已注册的全局助手只需扩展对象：

```
helpers = $.extend({}, Handlebars.helpers, helpers);
template(context, {helpers: helpers}) 
```

# iphone - UIViewController 在模态显示时显示在当前视图后面

> ID：11230731
> 
> 赞同：0
> 
> 时间：2012-06-27T16:17:30.680
> 
> 标签：iphone, ios5, ios4

在 iOS 5 上，当我尝试从另一个视图控制器呈现任何视图控制器时，使用`presentModalViewController`，模态视图呈现在当前视图后面。

由于它在 iOS 4 上运行良好并且知道它`presentModalViewController`在 iOS 5 中已被弃用，所以我尝试使用`presentViewController`但没有运气。

这是我第一次遇到这个问题，有什么想法会导致这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:12:09.847

我终于找到了问题所在。由于一些尴尬的原因，`rootViewController`根窗口的设置不正确，导致模态视图出现奇怪的行为。

更令人费解的是，到目前为止它在 iOS 4 上运行良好，而在 iOS 5 上却失败了。我相信我仍然错过了导致这种麻烦的真正原因，但正确设置`rootViewController`in`AppDelegate`解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:44:30.083

我认为问题在于您没有设置正确的模态演示样式。 [http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIModalPresentationStyle](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIModalPresentationStyle)

此示例应在现有视图控制器之上触发全屏模式。

```
 [self setModalPresentationStyle:UIModalPresentationFullScreen];
 ViewController2 *vc = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil];
 [self presentViewController:vc animated:YES completion:NULL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:58:35.710

不确定您是否使用按钮来呈现视图控制器，但如果您是，这应该可以工作。在您的视图控制器中创建一个新函数，如下所示。这会在您的视图中实例化您的视图和导航控制器，以便之后可以将其关闭。

```
- (void)buttonPressed {
    UIViewController *yourViewController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    UINavigationController *navigationController = [[UINavigationController] alloc] initWithRootViewController:yourViewController];
    [self presentModalViewController:navigationController animated:YES];
   } 
```

然后在 viewDidLoad 你会有这样的东西（如果你从一个按钮呈现它）。下面的代码用于 UIBarButtonItem，但其他按钮应该以类似的方式工作。只需确保将操作参数设置为@selector(buttonPressed)，或者在按下按钮时要调用的任何函数名称。

```
 self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] init]                                                                                  
target:self                                                                         
action:@selector(buttonPressed)]; 
```

# c++ - C++ 中的顺序统计树

> ID：11230734
> 
> 赞同：21
> 
> 时间：2012-06-27T16:17:45.487
> 
> 标签：c++, algorithm, data-structures, stl

我需要标准 GCC STL 地图容器的订单统计树。

我查了一下，有一种叫做 PBDS 的东西。基于策略的数据结构。我也不清楚这种用法。

谁能告诉我如何将 STL 地图容器用于订单统计树？即使它只在 GNU G++ 上就足够了吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-27T17:10:19.277

这是作为订单统计树实现的基于 GNU 策略的 STL MAP 的示例（在 Linux gcc 4.6.1 上测试）：

```
#include <iostream>
#include <ext/pb_ds/assoc_container.hpp>
#include <ext/pb_ds/tree_policy.hpp>

using namespace std;
using namespace __gnu_pbds;

typedef
tree<
  int,
  int,
  less<int>,
  rb_tree_tag,
  tree_order_statistics_node_update>
map_t;

int main()
{
  map_t s;
  s.insert(make_pair(12, 1012));
  s.insert(make_pair(505, 1505));
  s.insert(make_pair(30, 1030));
  cout << s.find_by_order(1)->second << '\n';
  return 0;
} 
```

这是[GNU Policy-Based Data Structures 概述的链接](http://gcc.gnu.org/onlinedocs/libstdc++/manual/policy_data_structures_design.html#container.tree.interface)。这是其他[tree_order_statistics 示例](http://www.opensource.apple.com/source/llvmgcc42/llvmgcc42-2336.9/libstdc++-v3/testsuite/ext/pb_ds/example/tree_order_statistics.cc)。我找不到关于基于策略的数据结构的良好参考，但您可以使用这些链接以及 PBDS 源。

# ruby-on-rails - 当我在 Windows 上启动 rails 服务器时出错

> ID：11230735
> 
> 赞同：2
> 
> 时间：2012-06-27T16:17:47.920
> 
> 标签：ruby-on-rails, ruby, rubygems, ruby-1.9.1

当我尝试启动 Rails 服务器时，会出现此错误

```
C:\Arthur\Ruby\Aplicações em ruby\blog>rails server
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/Arthur/Ruby/Aplicações em ruby/blog/config.ru:4:in `require': cannot load such file --
C:/Arthur/Ruby/AplicaÃ§Ãµes em ruby/blog/config/environment (LoadError)
    from C:/Arthur/Ruby/Aplicações em ruby/blog/config.ru:4:in `block in <main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `ins
tance_eval'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `ini
tialize'
    from C:/Arthur/Ruby/Aplicações em ruby/blog/config.ru:1:in `new'
    from C:/Arthur/Ruby/Aplicações em ruby/blog/config.ru:1:in `<main>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eva
l'
.
.
. 
```

我需要做什么才能在 Rails 上使用 ruby​​ ？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:28:50.583

我想建议您在目录中创建您的应用程序，其中路径只有英文符号。Ruby 可能无法理解像“Aplicações em ruby​​”这样的符号

# c++ - 错误：未在此范围内声明枚举

> ID：11230737
> 
> 赞同：1
> 
> 时间：2012-06-27T16:17:56.643
> 
> 标签：c++

我在 ksql.h 的枚举中添加了一个新值 (NULL_IS_NOT_NIL)

```
enum
{
    PKEY                  = 0x000001,
    NONCOLUMN             = 0x000010,
    EXPRESSION            = 0x000010,
    INSERTONLY            = 0x000100,
    NUMERIC               = 0x001000,
    NULL_IS_NOT_NIL       = 0x010000,

    MAXLEN_TABLENAME      = 50
}; 
```

不幸的是，这：

```
Row.SetExtras ("COMMENT2", KROW::NULL_IS_NOT_NIL); 
```

引发错误。

```
db.cpp:7727: error: âNULL_IS_NOT_NILâ was not declared in this scope 
```

另一方面

```
Row.SetExtras ("COMMENT2", 0x010000); 
```

和

```
Row.SetExtras (vendor_id,  KROW::NUMERIC); 
```

两者都可以正常工作并且不会引发错误。现在我可以通过用 0x010000 替换 NULL_IS_NOT_NIL 来解决问题，但这是个坏主意。我收到此错误是否有原因？我错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:38:54.050

您已在头文件中进行了更改，但它们并未反映在您的项目中。如评论中所述，原因是由于未将其推送到正确的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:36:28.477

您忘记给出`enum`名称：`KROW`代码片段中缺少。

另一方面，如果你调用它`KROW`，你会得到一个重定义错误。所以你需要想出一个不同的解决方案。（除非您直接编辑系统头文件——但肯定不是……）

# javascript - 如何在 Python 中解析 Javascript 正则表达式？

> ID：11230743
> 
> 赞同：0
> 
> 时间：2012-06-27T16:18:11.910
> 
> 标签：javascript, python, regex

首先，我不是编写正则表达式的人，所以我不能只是重写它们。我正在引入几个 Javascript 正则表达式，并尝试解析它们，但它们之间似乎存在一些差异。在 W3Schools 上测试示例正则表达式，Javascript 显示：

```
var str="Visit W3Schools";
var patt1=/w3schools/i;
alert(str.match(patt1)) 
```

这会提醒“W3Schools”。但是，在 Python 中，我得到：

```
import re
str="Visit W3Schools"
patt1=re.compile(r"/w3schools/i")
print patt1.match(str) 
```

打印`None`。是否有一些库可以用来将 Javascript 正则表达式转换为 Python 正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:22:34.560

在 python中，[`.match`](http://docs.python.org/library/re.html#re.match)只匹配*字符串的开头*。

您要使用的是[`.search`](http://docs.python.org/library/re.html#re.search).

此外，您不需要包含 '/' 字符，并且需要使用单独的参数来 re.compile 以使搜索不区分大小写：

```
>>> import re
>>> str = "Visit W3Schools"
>>> patt1 = re.compile('w3schools', re.I)
>>> print patt1.search(str)
<_sre.SRE_Match object at 0x10088e1d0> 
```

在 JavaScript 中，斜杠相当于调用`re.compile`.

我可以推荐阅读[python 正则表达式模块](http://docs.python.org/library/re.html)，甚至还有一个很棒的[HOWTO](http://docs.python.org/howto/regex.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:24:08.307

您不想`/`在正则表达式中包含字符和标志，您应该使用`.search`而不是`.match`子字符串匹配。

尝试：

```
patt1 = re.compile(r"w3schools", flags=re.IGNORECASE)
srch = patt1.search(str)
print srch.group() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:00:57.777

可以编写一个小的辅助函数，这样 /ig 也可以工作：

```
def js_to_py_re(rx):
    query, params = rx[1:].rsplit('/', 1)
    if 'g' in params:
        obj = re.findall
    else:
        obj = re.search

    # May need to make flags= smarter, but just an example...    
    return lambda L: obj(query, L, flags=re.I if 'i' in params else 0)

print js_to_py_re('/o/i')('school')
# <_sre.SRE_Match object at 0x2d8fe68>

print js_to_py_re('/O/ig')('school')
# ['o', 'o']

print js_to_py_re('/O/g')('school')
# [] 
```

# php - access_token 中的 Facebook PHP SDK 3 问题

> ID：11230747
> 
> 赞同：0
> 
> 时间：2012-06-27T16:18:23.000
> 
> 标签：php, facebook, facebook-php-sdk

我正在使用 Facebook PHP SDK。用户允许我的应用程序后，facebook 会重定向到可能的网页。以下是网址

```
http://Mydowmain.com/facebook.htm?state=d96afbb9ea550fg81c287b7822cee0af1&code=AQDtl7Rd7qgCp6S_dXwOCxxfXo1dEh75ZJqrCINMawCUzxOYs9JnpmWKMoYTgjuNhQx2nk8pleCdvGqSt39F2pHKMHt3aNxwqoIah2oshPKKC0MnWycPSU0yLAKMYVQV2g3jRQdEMf2dWTVUrk_ammSpGaYbfFQ3GeccZ1vGqfVazsaQ_1Lxz7GjITlqgCxrOlc#_=_ 
```

我需要获取 access_token 以下是代码

```
if($_GET['code'] != '')
        {

$access_token = $facebook->getAccessToken(); 
```

当我尝试使用此**$access_token**获取用户详细信息时。

```
$user_profile   =   'https://graph.facebook.com/me/?access_token='.$access_token; 
```

它给出了以下错误

```
{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}}

} 
```

我不知道我做错了什么，它与 SDK 2 一起使用，但不适用于 SDK3

```
$access_token = $facebook->getAccessToken(); 
```

此调用返回以下内容，其中“|”之前的第一个部分 是 App ID 和“|”之后 是应用程序秘密..

**`187997367916887|9d87d7a2d26485fd926a000b0c3b2f87`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:37:13.317

检查此链接，向下滚动到以下粗体字的答案：“使用 Facebook 应用程序的令牌时”，希望对您有所帮助。

[Facebook access_token 无效？](https://stackoverflow.com/questions/2705756/facebook-access-token-invalid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:21:36.433

将图形调用的 api ('/me') 更改为 ('/[number or name id]')

# javascript - 如何在 JS 中遍历嵌套对象

> ID：11230748
> 
> 赞同：5
> 
> 时间：2012-06-27T16:18:27.970
> 
> 标签：javascript, jquery, object, nested

好吧，我被这个难住了。我需要遍历这些，所以我可以按类别列出这样的东西

> 商业书籍
> 
> 第一册
> 
> 书 2
> 
> 书 3
> 
> 烹饪书籍

ETC..

但无法弄清楚如何遍历嵌套对象。有或没有 jquery 都很好

```
window.books = {
    "Business Books": [
       {
           Title: "Finance 101",
           Description: "Info for Finance 101 book goes here."
       },
       {
           Title: "Economics 123",
           Description: "Info for Economics 123 book goes here."
       },
       {
           Title: "Statistics for Beginners",
           Description: "Learn about Statistics."
       }
    ],
    "Cooking Books": [
       {
           Title: "Lowfat Treats",
           Description: "Eat a lowfat Diet"
       },
       {
           Title: "Chocolate Lovers",
           Description: "Eat a lot of chocolate"
       },
       {
           Title: "Book of Brownies",
           Description: "Stuff about Brownies"
       }
    ],
    "IT Books": [
       {
           Title: "Windows XP",
           Description: "Please go away"
       },
       {
           Title: "Linux",
           Description: "A how to guide."
       },
       {
           Title: "Unix",
           Description: "All about Unix."
       },
       {
           Title: "Mac",
           Description: "Costs too much."
       }
    ],
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T16:27:06.697

好主意是先学习如何在没有 jQuery 的情况下做到这一点。

```
for(var category in window.books) {
  if(window.books.hasOwnProperty(category)) {
    console.log(category); // will log "Business Books" etc.
    for (var i = 0, j = window.books[category].length; i < j; i++) {
      console.log("Title: %s, Description: %s", window.books[category][i].Title, window.books[category][i].Description);
    }
  }
} 
```

然后你可以使用`$.each()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:34:46.800

```
$.each(window.books,function(k,v){   // k ==== key, v === value
        // Prints category
        console.log(k); 

        //Loops through category
        for(i=0,len=v.length;i<len;i++){
            console.log(v[i].Title);
            console.log(v[i].Description);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:25:32.877

```
jQuery.each(window.books, function(category, items) {
    alert(category);

    jQuery.each(items, function(idx, book) {
        alert(category + ': ' + book.Title)
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:32:51.107

使用 .each() 循环非常简单：

```
$.each(window.books, function(category, books) {                                    
    $("#books").append("<p>" + category + "</p><ul>");                              
    $.each(books, function(i, book) {                                               
        $("#books").append("<li>" + book.Title + ": " + book.Description + "</li>");
    });                                                                             
    $("#books").append("</ul>");                                                    
}); 
```

这是我的[jsFiddle](http://jsfiddle.net/styson/fRSsR/)

# sql - SQL Server 中的 SELECT - SUBQUERY 的替代方案

> ID：11230749
> 
> 赞同：1
> 
> 时间：2012-06-27T16:18:30.177
> 
> 标签：sql, sql-server, select, subquery

我有这样的 SELECT 语句：

```
SELECT 
T1.COD,
T1.NAME, 
(SELECT MAX(T2.DATA)
  FROM dbo.TAB2 T2
  WHERE T2.COD = T1.COD) AS ENDDATA
FROM dbo.TAB1 AS T1 WITH (NOLOCK) 
```

有没有使用 SUBQUERY 的替代方法？可以使用JOIN吗？

我必须找到一个更有效的解决方案来运行这个查询。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:45:26.150

要返回与原始查询相同的结果，您需要以下内容：

```
SELECT T1.COD, T1.NAME, s.ENDDATA
FROM dbo.TAB1 T1 WITH (NOLOCK)  left outer join
     (SELECT t2.cod, MAX(T2.DATA) as EndData
      FROM dbo.TAB2 T2
      group by T2.COD
     ) s
     on t1.cod = s.cod 
```

在连接之外进行分组会改变查询的语义。特别是，您将只返回每个 COD/NAME 的一行，即使 T1 中可能存在重复。这可能是可取的。但是，您的原始查询会有重复项。

另外，为什么您在 TAB1 上有 NOLOCK 而在 TAB2 上没有？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:20:53.053

是的，您可以使用 JOIN：

```
SELECT 
   T1.COD,
   T1.NAME, 
   MAX(T2.DATA) AS ENDDATA
FROM dbo.TAB1 AS T1 WITH (NOLOCK) 
JOIN dbo.TAB2 T2 WITH (NOLOCK) -- Assumed
  ON T2.COD = T1.COD
GROUP BY
   T1.COD,
   T1.NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:21:14.123

```
SELECT   T1.COD,
         T1.NAME, 
         MAX(T2.DATA)
FROM     TAB1 AS T1
JOIN     TAB2 AS T2
ON       T2.COD = T1.COD
GROUP BY T1.COD,
         T1.NAME; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T17:04:48.957

Why you don't want to use subselect? You can replace it with *outer apply* statement (which looks better from my point of view) but in the most cases you will get the same execution plan. Yes, actually it depends on your indexes (I assume that you have index on COD in TAB2 table) and data (I assume that row count in both table is more or less big and row count in TAB2 is definitely bigger than row count in TAB1).

Solution with grouping by COD and NAME is the worst solution. Solution with subquery is identical to outer apply. Solution with outer apply is more or less good solution (even better to use cross apply but in such case you should be sure that you don't have rows in TAB1 without associated rows in TAB1).

# html - HTML 在其父元素的兄弟元素之上堆叠一个子元素，该元素在父元素之上是 z-index'd

> ID：11230754
> 
> 赞同：3
> 
> 时间：2012-06-27T16:18:44.047
> 
> 标签：html, css, z-index

我想让橙色 div 呈现在其他 div 之上，

无需更改 HTML 标记（即静态地，或通过 DOM 树操作动态地），也无需更改同级或父级的 z-index。

我可以使用任何可行的解决方案，JS、CSS 或 otehrwise（即适用于所有主流浏览器）

[http://jsfiddle.net/jaSe7/](http://jsfiddle.net/jaSe7/)

鉴于限制，实际上可能无法做我想做的事。

更新：查看这个小提琴的外观：http: [//jsfiddle.net/chippper/jaSe7/1/](http://jsfiddle.net/chippper/jaSe7/1/)但是小提琴对我不起作用，因为它操纵 DOM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:36:03.430

如果您不能直接更改 HTML，则必须使用 JavaScript。您需要将子级移出其父级，以使其在兄弟 div 上方建立索引。在 jQuery 中是这样的：

```
var childHtml = $('#parent').html();
$('#child').remove();
$('#parent').after(childHtml); 
```

[请参阅我更新的小提琴。](http://jsfiddle.net/chippper/jaSe7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-30T17:15:18.010

不确定这是否仍然是一个问题，但我发现了这个问题：

[Z-Index 相对还是绝对？](https://stackoverflow.com/questions/7490146/z-index-relative-or-absolute)

埋在讨论中的是这条评论：

“如果您在示例中删除 X 上的 z-index，则不会创建新的堆叠上下文，并且 3 将与 2 重叠” – fionbio 20 年 9 月 23 日 18:02

因此，对于上述情况，如果您运行 fiddle，删除父元素的 z-index，那么 z-indexes 将按预期运行。现在，如果您需要对父元素进行 z 索引，那么我不确定选项是什么。

# sql - 如何创建数据透视查询

> ID：11230759
> 
> 赞同：3
> 
> 时间：2012-06-27T16:18:57.043
> 
> 标签：sql, sql-server-2008, pivot, pivot-without-aggregate

想象一下我有这张桌子：

```
Column A | Column B | Column C
------------------------------
   111         X        10
   111         Y        12 
```

如何查询此表以显示如下结果：

```
Column A |     X     |      Y
-----------------------------------
   111         10           12 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:57:09.893

您可以通过[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)执行此操作。您可以使用知道要旋转的列数的静态 PIVOT，也可以使用动态 PIVOT

静态数据透视（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8ccae/1)）

```
SELECT *
FROM 
(
  select *
  from t1
) x
pivot
(
  min(columnc)
  for columnb in ([X], [Y])
) p 
```

Dynamic Pivot（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8ccae/2)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(columnb) 
                    from t1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT columna, ' + @cols + ' from 
             (
                select *
                from t1
            ) x
            pivot 
            (
                min(ColumnC)
                for ColumnB in (' + @cols + ')
            ) p '

execute(@query) 
```

两个版本都会给出相同的结果。当您有未知数量的要转换的列时，第二个有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:48:37.107

尝试：

```
DECLARE @tbl TABLE (ColumnA INT, ColumnB CHAR(1), ColumnC INT)
INSERT @tbl VALUES (111, 'X', 10), (111, 'Y', 12)

SELECT  *
FROM    @tbl
PIVOT   
(
    MAX(ColumnC) FOR ColumnB IN ([X], [Y])
) pvt 
```

# android - 使用 SDK 对 SurfaceView 进行 Android z-order 管理

> ID：11230762
> 
> 赞同：0
> 
> 时间：2012-06-27T16:19:04.373
> 
> 标签：android, surfaceview

我的应用程序中有两个 SurfaceView，它们相互堆叠。我想交换它们以交换它们的 z 顺序，以便背景 SurfaceView 可以成为前面，而前面的 SurfaceView 可以进入背景。它们都用于视频播放。

我正在为 ICS 使用 Android API 15 版本。

Android SDK中是否有任何方法可以让我实现这一目标？

预先感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:38:38.063

实现这一点的一个非常简单的方法是将两个表面视图放入同一个 ViewGroup 中。当您希望后面的那个到前面时，将其从 ViewGroup 中删除，然后将其重新添加到 ViewGroup。这应该会导致订单交换。

# c# - 不要回发文本框

> ID：11230765
> 
> 赞同：1
> 
> 时间：2012-06-27T16:19:18.950
> 
> 标签：c#, asp.net

我有一个相当复杂的表单（实际上是用户控件），上面有一个不需要回发的文本框控件。有没有办法从帖子中删除控件？是的，这个文本框是可编辑的。

更多信息：这是用于信用卡处理表格的，因此“最终”提交将发布到另一个站点的页面。但是，在此之前有大量的服务器端处理正在进行。我知道我可以将信用卡号文本框移到另一个页面——但是这个要求来得太晚了，我会尽量不用重新做很多事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:23:24.580

最简单的方法是使用 html 输入而不是 ASP 文本框。如果未对它们进行设置，则无法从代码中访问`runat="server"`它们。

或使用 viewstate 属性 ( [http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.enableviewstate.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:02:28.813

所以情况是，您有一个在用户浏览器中呈现的表单，其中包含指向不同站点的操作，您需要确保在提交表单时不会发送其中一个表单字段。

在我看来，在这种情况下，您不能绝对确保没有发布该值。有许多不同的方法可以使用 javascript 来解决这个问题（在提交之前禁用输入、清除值等），但是如果脚本被关闭，我认为你不走运。

但是由于您可以准备将​​表单发送到其他服务器（更改表单上的操作或使用 PostBackUrl 启用按钮），我想您也可以将文本框上的 Enabled 属性设置为 false。这意味着它不能再在发布到其他服务器之前在最终页面上进行编辑。或者您可以隐藏文本框 a （因此它根本不会被重新渲染）并将该字段显示为标签或文字。

但即便如此，您仍然必须以某种方式确保秘密值不包含在表单的视图状态中。如果您使用标签或文字，它将是什么。也适用于在上次回发时禁用或隐藏的文本框。通常，视图状态只是一个 base64 编码的字符串，因此从那里找到信用卡号是微不足道的。在将表单设置为发布到其他服务器之前，您可以通过关闭最后一个帖子中的相关控件（甚至整个页面）的视图状态来解决此问题。

如果您无法确定哪一个将是最后一次回发到您的服务器，那么我认为如果没有更重大的更改，您将不走运。很抱歉成为一个沮丧的人。一些看似微不足道的事情对于 Asp.Net 网络表单来说却很难。

也许您可以添加一个单独的页面，仅使用您需要发送到其他服务器的数据填充该页面，并拥有一种“确认页面”。在该页面中，您可以关闭视图状态，显示所有汇总数据（使用标签和文字等），并且要发布的实际数据可以作为隐藏字段包含在表单中。然后，当用户“确认”时，该表单将发布到另一台服务器。

# java - 在 Java 中解析二进制数据 - 大容量、单线程

> ID：11230768
> 
> 赞同：3
> 
> 时间：2012-06-27T16:19:45.623
> 
> 标签：java, parsing, binary

我需要在 Java 中解析（并转换和写入）一个大型二进制文件（大于内存）。我还需要在单个线程中尽可能高效地执行此操作。最后，被读取的格式非常结构化，所以最好有某种解析器库（这样代码接近复杂的规范）。

如果重要的话，解析所需的前瞻量应该很小。

所以我的问题是：

*   nio v io 对于单线程、大容量应用程序有多重要？

*   有没有好的二进制数据解析器库？

*   解析器对流式转换的支持程度如何（我希望能够在解析期间将正在解析的数据流式传输到某些输出 - 我不想在写出之前在内存中构建整个解析树）？

在 nio 方面，我怀疑 nio 不会有太大帮助，因为我的磁盘可能有限（而且由于它是单线程，因此简单阻塞不会有任何损失）。另外，我怀疑基于 io 的解析器更常见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:28:38.280

在 NIO 与 IO 上，你是对的，使用 IO 应该是正确的选择——复杂性更低、面向流等。

对于二进制解析库 - 签出[Preon](http://preon.codehaus.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T06:20:26.450

让我试着解释一下 Preon 是否以及如何解决您提到的所有问题：

> 我需要在 Java 中解析（并转换和写入）一个大型二进制文件（大于内存）。

这*正是*创建 Preon 的原因。您希望能够处理整个文件，*而不会将其完全加载到内存中。*尽管如此，程序模型还是为您提供了一个指向*似乎*完全在内存中的数据结构的指针。但是，Preon 会尽量延迟加载数据。

为了解释这意味着什么，想象一下在你的数据结构的某个地方，你有一个以二进制表示形式编码的具有恒定大小的东西的集合；假设每个元素都将被编码为 20 个字节。然后 Preon 首先根本*不会*将该集合加载到内存中，如果您要获取该集合之外的数据，它根本不会触及您编码表示的那个区域。但是，如果您选择该集合的第 300 个元素，它将（而不是解码所有元素直到第 300 个元素），计算该元素的偏移量，并立即跳转到那里。

从外部看，就好像您引用了一个完全填充的列表。从内部，如果您要求，它只会抓取列表中的一个元素。（然后立即忘记它，除非您指示 Preon 以不同的方式做事。）

> 我还需要在单个线程中尽可能高效地执行此操作。

我不确定你所说的*效率*是什么意思。它可能意味着在内存消耗方面有效，或者在磁盘 IO 方面有效，或者您的意思是它应该*非常快*。我认为可以公平地说 Preon 旨在在简单的编程模型、内存使用和许多其他问题之间取得平衡。如果您真的需要以顺序方式遍历所有数据，那么也许有一些方法在计算资源方面更有效，但我认为这将以“易于编程”为代价。

> 最后，被读取的格式非常结构化，所以最好有某种解析器库（这样代码接近复杂的规范）。

我实现对 Java 字节码的支持的方式是阅读字节码规范，然后将他们在其中提到的所有结构直接映射到带有注释的 Java 类。我认为 Preon 非常接近您正在寻找的东西。

您可能还想查看 preon-emitter，因为它允许您生成数据的带注释的 hexdump（例如在[这个 Java 类文件的 hexdump 示例中](http://wilfred.home.xs4all.nl/preon/hello.html)），这是我在任何其他库中都没有看到的功能. （提示：确保将鼠标悬停在十六进制数字上。）

它生成的文档也是如此。目标一直是确保它创建可以发布到维基百科的文档，就像那样。它可能还不完美，但我对它目前的能力并不不满。（例如：[这是为 Java 的类文件规范生成的文档](http://preon.sourceforge.net/classfile.html)。）

> > 如果重要的话，解析所需的前瞻量应该很小。

嗯，很好。事实上，这对 Preon 来说甚至是至关重要的。Preon 不支持前瞻。它*确实*支持回顾。（也就是说，有时编码机制的一部分是由之前读取的数据驱动的。Preon 允许您声明指向之前读取的数据的依赖关系。）

> > 有没有好的二进制数据解析器库？

前锋！;-)

> 解析器对流式转换的支持程度如何（我希望能够在解析期间将正在解析的数据流式传输到某些输出 - 我不想在写出之前在内存中构建整个解析树）？

正如我上面所概述的，Preon 不会*在*您开始处理之前在内存中构建整个数据结构。所以，从这个意义上说，你很好。但是，Preon 中没有任何内容支持作为一等公民的转换，并且它对*编码*的支持是有限的。

> 在 nio 方面，我怀疑 nio 不会有太大帮助，因为我的磁盘可能有限（而且由于它是单线程，因此简单阻塞不会有任何损失）。另外，我怀疑基于 io 的解析器更常见。

Preon 使用 NIO，但仅支持内存映射文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T16:30:01.233

使用内存映射文件，您可以阅读它而无需担心您的内存，而且速度很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:31:32.887

我认为你是正确的 NIO vs IO 除非你有小端数据，因为 NIO 可以本地读取小端。

我不知道任何快速的二进制解析器，通常你想直接调用 NIO 或 IO。内存映射文件有助于从单个线程写入，因为您不必在写入时刷新它。（但使用起来会比较麻烦）

您可以按照自己的喜好流式传输数据，我不认为有任何问题。

# xcode - 如何获得对 Xcode 的 root 访问权限以禁用代码签名

> ID：11230770
> 
> 赞同：2
> 
> 时间：2012-06-27T16:19:53.990
> 
> 标签：xcode, code-signing

我正在尝试将应用程序推送到越狱的 iPhone 以进行开发测试。我想按照本文第二个答案[中](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak)的步骤进行操作，其中涉及编辑 Xcode 的 SDKSettings plist：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/SDKSettings.plist

当我尝试编辑此文件时，我收到一个错误，指出我不是所有者并且无法解锁它。如何获得此文件的 root 权限？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T16:32:43.097

在终端中运行以下命令：

```
sudo chmod 777 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/SDKSettings.plist 
```

# ios - NKAssetDownload 完成后，NKIssue 状态未更新

> ID：11230771
> 
> 赞同：2
> 
> 时间：2012-06-27T16:19:55.957
> 
> 标签：ios, iphone, ipad, newsstand-kit

我目前正在创建一个 iOS 报亭应用程序。在我的示例中，我可以下载杂志内容。但下载后我会检查 NKIssue 状态以确保问题内容可供阅读。但是命运它会触发默认状态，这意味着没有设置任何值。

下载完成后，我尝试设置该值，但状态为只读。

1.  如何管理问题状态？

2.  我在模拟器中试过是这个问题吗？

3.  开发和测试报亭应用程序需要哪些沙盒环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:04:29.543

是的，状态是只读属性，由报亭框架维护。我的应用程序使用它们没有任何问题。仔细检查所有使用 addAssetWithRequest: 添加的资产是否已下载并移动到由 NKIssue 的 contentURL 属性指定的位置。

您还可以在模拟器中的应用程序沙箱位置检查下载的内容（~/Library/Application Support/iPhone Simulator/4.3/Applications/[app GUID]）它应该在“缓存”目录中。

除了测试 NS 后台推送通知，我认为你不需要什么特别的东西。

```
// For debugging - allow multiple pushes per day
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"NKDontThrottleNewsstandContentNotifications"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

# c# - 日期选择器的必填字段验证器

> ID：11230774
> 
> 赞同：0
> 
> 时间：2012-06-27T16:20:01.910
> 
> 标签：c#, asp.net, .net, datepicker

我有一个文本框，其中填充了来自日期选择器的日期（日历由链接按钮访问）和一个提交按钮。我为文本框创建了一个必填字段验证器，以便填充它。我面临的问题是必填字段验证器不允许我单击链接按钮（这使我用日期填充文本框）而是它始终专注于文本框。我卡在这里请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:47:45.307

您可以使用“验证组”。在控件属性上，将 ValidationGroup 设置为类似这样。

```
TextBox.ValidationGroup = 1
Submit.ValidationGroup = 1
requiredFieldValidator.ValidationGroup = 1
LinkButton.ValidationGroup = 2 
```

您需要不同 ValidationGroup 上的 LinkBut​​ton。这一切都可以在设计中完成。

这样，验证只会影响 ValidationGroup 1 上的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:34:56.583

其实你的解决方案不好。
RequiredFieldValidator 有一些错误（就像你提到的那样）。
最好的方案是自己用javascript实现验证，简单、灵活、实用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:43:37.527

我不清楚您的链接按钮如何显示日历 - 客户端或服务器端？- 但你可以尝试：

*   设置`RequiredFieldValidator.EnableClientScript`为`false`. 这将禁用RequiredFieldValidator 的客户端验证。如果您使用客户端脚本显示日历，这就足够了。

*   设置`LinkButton.CausesValidation`为`false`.

# asp.net - Visual Studio 2010 在保存时删除 Value=""

> ID：11230777
> 
> 赞同：1
> 
> 时间：2012-06-27T16:20:15.770
> 
> 标签：asp.net, visual-studio-2010

这是一个非常奇怪的情况，它以前从未发生在我身上，我用谷歌搜索但没有结果。

基本上在我的解决方案中的页面上，我有多个下拉框，每个下拉框的第一个是

```
 <asp:ListItem Value="" Text="Please select..."></asp:ListItem> 
```

当我按 Ctrl S 或单击软盘图标 VS 自动删除 Value="" 所以结果是

```
 <asp:ListItem Text="Please select..."></asp:ListItem> 
```

我只是想知道世界上是否还有其他人经历过这种情况？如果是这样，您是如何解决的！因为它真的开始激怒我:(

# nhibernate - 具有公式属性的二级缓存

> ID：11230781
> 
> 赞同：2
> 
> 时间：2012-06-27T16:20:47.557
> 
> 标签：nhibernate, nhibernate-mapping

使用 nHib 3.2，我有兴趣缓存我的所有实体属性，除了我想用每个`Get`.
这可能吗？

这是我的映射：

```
 public TransactionNHibernateMapping()
            {
                Table("TransactionInfo");
                Id(transaction => transaction.TransactionId, m => m.Generator(Generators.GuidComb));
                Cache(c =>
            {
                c.Include(CacheInclude.All);
                c.Usage(CacheUsage.ReadWrite);
            });

                Property(transaction => transaction.HighestSeverity, m => m.Formula("(Select max(LogEntryInfo.Severity) from LogEntryInfo where LogEntryInfo.TransactionId = TransactionId)"));
            } 
```

现在，虽然启用了二级缓存，但该实体总是从数据库中重新加载。
如果我删除`HighestSeverity`属性映射，缓存会按预期工作。

我尝试过使用`Generated`公式字段的选项，但这似乎没有帮助。
还有其他想法吗？

# javascript - 如何从 JSON 响应中获取数据？

> ID：11230784
> 
> 赞同：3
> 
> 时间：2012-06-27T16:20:52.133
> 
> 标签：javascript, ajax, json, response

我在我的项目中使用纯 JavaScript。如何使用类别获取以下示例的值？我需要检测它是真还是假。

```
{
    "category": "true"
} 
```

我可以得到整个对象，但我只想拉出类别的值。

* * *

*从评论...*

> JSON 数据基于表单提交从服务器返回。它一直说 myObject 未定义。我怎样才能通过它以便我的 JavaScript 可以读取响应？

*从评论...*

> 我可以使用 this: 获取 myObject `if (form.XHR.status === 200) {var data = form.XHR.response;}`，但如果我尝试这样做`data.myObject`，它会说它是未定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:38:09.060

您需要先解析 JSON，然后才能将其作为对象访问...

```
if (form.XHR.status === 200) {
    var data = form.XHR.response;

    var parsed = JSON.parse(data);

    alert(parsed.category);
} 
```

为什么需要这个？这是因为***JSON 不是 JavaScript***。这两个术语不是同义词。

JSON 是一种文本数据交换格式。它需要被解析*成*任何语言的数据结构。在您的情况下，语言是 JavaScript，因此您需要将其解析为 JavaScript 数据。

当从 xhr 响应中接收到它时，它是以所有文本数据都在 JavaScript 中处理的形式接收的。那是作为一个`string`. 作为字符串，您不能直接访问所表示的值。

JavaScript 有一个内置的解析器，叫做`JSON.parse`. 这在上面的示例中用于进行必要的转换。

一些较旧的浏览器不支持`JSON.parse`. 如果您支持这些浏览器，您可以在[http://json.org](http://json.org)找到 JavaScript 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:23:19.293

首先，您需要一个变量来引用它：

```
var obj = {
    "category": "true"
}; 
```

然后你能说例如：

```
alert(obj.category); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T16:24:08.420

```
var myObject = { "category": "true"};

alert (myObject.category); 
```

但你可能想要：

```
var myObject = { "category": true}; 
```

...如果您要测试真/假：

```
if (myObject.category) {
    // category is true, so do your stuff here.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:29:28.660

您可以使用“。”访问 json 对象数据。或 [key] 像这样：

```
var obj = {
    "category": "true"
};
console.log(obj.category);   
// Or
console.log(obj["category"]); 
```

这是[演示](http://jsfiddle.net/ynWFR/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T17:05:03.477

对于任何撞到墙上的人，请确保查看您是否需要访问包含所有交付数据的父对象：

`console.log(response['id'])`

可能不起作用，因为必须首先访问父实体：

`console.log(response.session['id'])`

如果您控制台记录您的响应并且它包含在`{}`您可能需要执行此操作。

# sql - DQS SSIS 包在 VS2010 中挂起

> ID：11230791
> 
> 赞同：1
> 
> 时间：2012-06-27T16:21:10.933
> 
> 标签：sql, visual-studio-2010, ssis, data-quality-services

我有一个用于 DQS 清洁的包。我有近 650,000 多条记录要清理，但是在处理了大约 350,000 条记录后，我得到了一个症状，使我的项目挂起。例如，我将关闭我的 Visual Studio 项目/解决方案，但一旦我尝试返回打开我的项目，我会在右下角收到消息“Visual Studio 正在等待内部操作”。一旦发生这种情况，我将无法单击或滚动项目中的任何位置。我正在使用 SQL 2012 将数据从一个表移动到另一个表，但移动到 SQL 2012 服务器/实例中的另一个数据库。此外，我正在使用 DQS 客户端来清理和验证姓氏、州和国家/地区的数据。我的视觉工作室是 2010 版。我在具有 8g 内存和 4 个内核的虚拟机上运行这一切。我确实为 SQL 2012 安装了累积服务包。此时，我必须在任务管理器中杀死我的 VS2010，但似乎无法再运行我的 SSIS 项目。我必须删除目标表中的所有记录，然后才能再次进入我的项目。感谢您的帮助或想法，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:49:07.623

DQS 清理是一项**非常**耗费资源的任务。根据[数据质量服务性能最佳实践指南](http://www.microsoft.com/en-us/download/details.aspx?id=29075)，即使遵循硬件建议和最佳实践，100 万行的 DQS 清理也可能需要 2-3.5 小时。

![在此处输入图像描述](../Images/cc10b570fb03cfef81c00cba1fa63628.png)

另外，我同意 Pondlife 关于在 BIDS 与 DTEXEC 中运行的评论。BIDS/SSDT 是 32 位（将内存限制为 2-3GB），而 DTEXEC 有一个 64 位版本，可以使用更多内存。

# java - 使用 java 数组

> ID：11230798
> 
> 赞同：0
> 
> 时间：2012-06-27T16:21:42.720
> 
> 标签：java

我在一个文本文件中有 7 行数据（如下所示）。

```
name: abcd
temp: 623.2
vel: 8

name: xyz
temp: 432
vel: 7.6 
```

使用正则表达式，我能够读取这些数据并且能够将其打印出来。现在我需要将这些数据存储在某个变量中。我倾向于将这些数据存储在数组/矩阵中。所以在物理上，它看起来像这样：

```
 data = [abcd, 623.2, 8 
          xyz, 432, 7.6] 
```

所以实际上，第一行包含前 3 行，第二行包含从 5 到 7 的行。我选择这种类型的变量进行存储的原因是，从长远来看，调用数据会更简单——如：

```
 data[0][0] = abcd
   data[1][1] = 432 
```

我不能使用 math.nist.gov 中的 java 矩阵文件，因为我不是 root 用户，让 IT 部门在我的机器上安装东西被证明是浪费时间。所以我想使用我拥有的资源——Eclipse 和一个 java 安装版本 1.6。

我想获取这些数据并将其存储到 java 数组变量中。我想知道的是：选择数组变量是正确的方法吗？或者我应该使用向量变量（尽管如此，在我看来，使用向量变量会使事情复杂化）？还是有一些其他变量可以**让我轻松存储数据并轻松调用它**？

顺便说一句，关于我的 java 安装的更多细节 - 以防它在某种程度上有所帮助：

OpenJDK Runtime Environment (build 1.6.0-b09) OpenJDK 64-bit Server VM (build 1.6.0-b09, 混合模式)

谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T16:24:32.643

It seems to me that

```
name: abcd
temp: 623.2
vel: 8 
```

is some sort of object, and you'd do well to store a [list](http://docs.oracle.com/javase/tutorial/collections/interfaces/list.html) of these e.g. you would define an object

```
public class MyObject {
   private String name;
   private double temp;
   private double vel;

   // etc...
} 
```

(perhaps - there may be more appropriate types), and store these in a list:

```
List<MyObject> 
```

If you need to index them via their name attribute, then perhaps store a [map](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html) (e.g.`Map<String, MyObject>`) where the key is the name of the object.

I'm suggesting creating an object for these since it's trivially easy to ask for `obj.getName()` etc. rather than remember or calculate array index offsets. Going forwards, you'll be able to add behaviour to these objects (e.g. you have a `temp` field - with an object you can retrieve that in centigrade/kelvin/fahrenheit etc.). Storing the raw data in arrays doesn't really allow you to leverage the functionality of a OO language.

(note re your installation woes - these classes are native to the Java JRE/JDK and don't require installations. They're fundamental to many programs in Java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:25:32.890

您可以使用数组，但不要使用二维数组，而是创建一个包含元素的数据类，然后拥有这些元素的数组。

例如：

```
public class MyData {
  String name;
  float temp;
  int vel;
} 
```

那么你可以定义

```
 MyData arr[]; 
```

您也可以使用 List() 而不是 Array，具体取决于您是否有排序/搜索类型标准。如果您添加了一个元素，或者如果您想查找重复项或搜索，这种方法为您提供了更多的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:30:00.197

我认为你可以依赖**java Collection 框架**。

1.  如果数据中有*特定的序列，*您可以使用*ArrayList 代替 Arrays*。
**   此外，如果您想将数据存储在*键值对*中，请使用*Map*。*

 *注意：如果您需要排序值，则将**ArrayList 与 Comparator 或 Comparable Interface 一起**使用。如果您正在使用**Map 并且需要唯一且已排序的值，请使用 TreeMap**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:36:45.190

假设您正在读取的键值对中的所有键都是唯一的，为什么不将项目存储在`java.util.Map`?

```
Pattern pattern = Pattern.compile("(\\w+): (\\w+)");
try(BufferedReader reader = new BufferedReader(new FileReader("data.txt"))){

    Map<String, String> items = new LinkedHashMap<>();

    String line = null;
    while( (line = reader.readLine()) != null) {
        Matcher matcher = pattern.matcher(line);
        while(matcher.find()){
            items.put(matcher.group(1), matcher.group(2));
        }
    }

    System.out.println(items);

}catch(IOException e) {
    System.out.println(e.getMessage());
} 
```

然后地图将包含：`{name=xyz, temp=432, vel=7}`

您可以轻松阅读特定元素，例如：`items.get("name")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T16:25:42.253

包装此信息

```
name: xyz
temp: 432
vel: 7.6 
```

在它自己的一类中。

并使用`List<T>`您喜欢的任何实现。*

# c# - 使用 C#/Java/Visual Basic 填充 Word 2007 模板

> ID：11230802
> 
> 赞同：0
> 
> 时间：2012-06-27T16:21:53.137
> 
> 标签：c#, java, ms-word, populate, rhapsody

我最近接到了一项任务，即使用 Rhapsody API 从 Rhapsody 检索到的信息填充 Word 2007 文件。我对狂想曲不是很熟悉，但我会学习的。我很难找到一种编写可以写入格式化（读取：表格）word文档的程序的好方法。我最擅长 java，但我能够使用 C#、C++ 或 VB。问题似乎是 java 的所有选项都需要使用 3rd 方库，我不确定我是否习惯使用它们。Microsoft Visual Studio 中可用的所有语言似乎都有写入 Word 文档的选项，但我似乎无法弄清楚它们。在尝试解决此任务时，我最简单的选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:23:08.593

Aspose words 在将 C# 与 MS word 集成方面做得非常好。

[http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:41:44.730

我不确定您是否已经尝试过 Rhapsody Reporter Plus（内置）和 Rational Publishing Engine（可能需要额外的许可证）的所有功能。有了它们，您可以制作 html、pdf、word 文档...

如果这不是您的用例，并且您需要自己的 Java 插件，我们在[Apache POI](http://poi.apache.org/)方面有很好的经验，我可以推荐。

我不明白为什么您在使用 3rd 方库时可能会遇到问题，当您自己编写所有内容时，您可能会结束做这样一个类似的库，当然会花费“一些”时间和“一些”头痛，直到准备好......

# php - PHP Wordpress 循环 2 个帖子回显类，第三个回显 class2

> ID：11230805
> 
> 赞同：1
> 
> 时间：2012-06-27T16:22:09.517
> 
> 标签：php, html, wordpress, loops, if-statement

问题。我想要做的是调用一个特定于类别的循环，但是，我希望返回的内容从最近的第一个显示，以数字编号，以便对于显示的每 2 个，将回显一个向他们确定的 css 类和第三个结果是显示一个完全不同的类，因为这就是我编写 html 的方式。这是我试图让 HTML 显示的内容：

```
<div id="content">
    <div class="block1"></div>
    <div class="block1"></div>
    <div class="block2"></div>
    <div class="block1"></div>
    <div class="block1"></div>
    <div class="block2"></div>
</div> 
```

如果有更多结果，那么前两个将在第一个 div 中命名，所有结果中的第三个将分配给它的类名。帮助将不胜感激。

备注：

```
<?php query_posts( 'cat=featured&showposts=4' ); ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php foreach($recent as $index => $postObj) {
  $class = $index + 1 % 3 === 0 ? 'block2' : 'block1'; 
}
?>
<h1><?php the_title(); ?></h1>
<?php endwhile; else: ?>
<p>Sorry, no posts matched your criteria.</p>
<?php endif; ?>

<?php get_footer(); ?> 
```

但是它返回了帖子的数量，但在帖子下它返回了警告：foreach() 提供的参数无效 但是尝试过反复试验，我认为我的语法很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:36:37.290

您正在寻找的是[模运算符](http://us3.php.net/manual/en/language.operators.arithmetic.php)。取模的作用是求除法运算的余数。实际上，结果在 0..N-1 的范围内，其中 N % N = 0。

```
foreach($posts as $index => $postObj) {
  $class = $index + 1 % 3 === 0 ? 'block2' : 'block1'; 
```

这完成了您想要的，因为循环逻辑如下所示：

```
1 % 3 = 1 -> block1
2 % 3 = 2 -> block1
3 % 3 = 0 -> block2 
```

您的代码必须是：

```
<?php
  query_posts( 'cat=featured&showposts=4' );
  $index = 1;

  if ( have_posts() ) :
    while ( have_posts() ) : the_post();

    $class = $index++ % 3 === 0 ? 'block2' : 'block1'; 
?>
<div class="<?php echo $class ?>">
  <h1><?php the_title(); ?></h1>
</div>
<?php endwhile; else: ?>
<p>Sorry, no posts matched your criteria.</p>
<?php endif; ?>

<?php get_footer(); ?> 
```

运算符的`$index++`意思是“在使用它之后增加 $index”。因此，请注意循环是如何设置的。在循环之前，我们设置`$index`为 1。在循环内部，我们`$class`使用模技术设置，然后递增`$index`。然后我们必须创建一个容器 DIV，就像您提到的那样，并在那里回显该类。

# approximation - 最小二乘法通过给定数量的水平线近似一维数据

> ID：11230806
> 
> 赞同：0
> 
> 时间：2012-06-27T16:22:11.163
> 
> 标签：approximation

问题如下。我有一维数据数组，我需要以最佳方式近似给定数量的水平线（例如，3 条线）（因此，汇总误差变得最小）。近似方法应该尽可能快（所以，我不能取每条水平线，近似数据集，从数据集中提取它的值，然后用剩余的线集近似其余部分）。现在，我不知道该怎么做，只是稍微感觉这个问题的解决方案与最大子阵列问题的解决方案有关。拜托，你能给我一些建议如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:39:24.643

一维数据集的最小二乘近似值定义为它的算术平均值，所以有一条线。我不确定您要对其他两个使用什么标准。

# c++ - 如何在 C++ 中同时使用自动引用计数和虚函数？

> ID：11230819
> 
> 赞同：0
> 
> 时间：2012-06-27T16:22:59.233
> 
> 标签：c++, garbage-collection, shared-ptr, virtual-functions

我一直在寻找这个问题的答案很长时间。

我想在可能和必要的地方使用共享数据（shared_ptr 或类似的东西）。但我也想使用虚函数。正如您在下面看到的，将它们一起使用是矛盾的。

我以这种方式保护类的数据：

```
class MyObject {
public:
    void method() {
        // no memory leak here, because this contains
        // count of references of Data inside shared_ptr
        OtherObject::otherMethod(this);
    }
private:
    class Data {};
    shared_ptr<Data> data;
}; 
```

因为如果我只是将 MyObject 类嵌套在 shared_ptr 中，我将无法在某些方法中将“this”原始指针安全地传递到 MyObject 类之外。原始指针不受引用计数的保护。

例子：

```
class MyObject {
public:
    void method() {
        // memory leak here, because this does not contain
        // count of references of Data or of self (MyObject) 
        OtherObject::otherMethod(this);
    }
private:
    class Data {};
    Data data;
};

...

shared_ptr<MyObject> crazyLeakingObject; 
```

crazyLeakingObject 泄漏，因为它内部有 MyObject 及其所有数据和方法，但它只是 MyObject 没有任何关于引用计数的信息。在 MyObject 的方法中，我们没有这样的信息。

当我不需要虚函数时，我使用的第一种方法。但第二个是针对虚拟功能的。如您所知，您只能通过现有对象的指针（原始指针）访问 vtable。但是原始指针和受保护的共享指针是相反的。这两种方法一起使用会使我的项目架构变得混乱。第二种方法存在漏洞。

有没有办法使用虚函数和自动引用计数？我在哪里可以找到示例？你遇到过问题吗？

我不是以英语为母语的人，所以您可以要求澄清。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:21:27.197

您想使用 std::enable_shared_from_this 来传递共享对象的 this 指针...

[http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/enable_shared_from_this](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/enable_shared_from_this)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:33:36.713

你*可以*使用虚函数`shared_ptr`：

```
struct Base {
    virtual ~Base() {}
    void foo() { std::cout << "base\n"; }
};

struct Derived : Base {
    void foo() { std::cout << "derived\n"; }
};

int main() {
    shared_ptr<Base> ptr(new Derived());
    ptr->foo(); // prints "derived"
} // object is deleted at function return 
```

如果您`OtherObject::otherMethod`将其参数存储在某个地方，以便它可以比调用者的引用持续更长时间，那么您可能会遇到问题。您可以传递`shared_ptr`to`otherMethod`而不是原始指针，并使用 Boost`enable_shared_from_this`以便代码中的代码`method`可以获取指向对象本身的共享指针，以传递 to `otherMethod`。但是没有看到任何相关代码，我不知道它是否有必要或一个好主意。

# c# - 检查有效的 ADO.NET / OLEDB 连接

> ID：11230820
> 
> 赞同：1
> 
> 时间：2012-06-27T16:23:00.037
> 
> 标签：c#, ado.net, ssis, oledb, custom-component

在大家的大力帮助下，我管理了以下仅适用于 ADO.NET 连接的代码。但是，当我更改与 OLEDB 的连接时，这似乎失败了。我不确定它为什么会发生，但想在您的帮助下解决这个问题。

此代码的目的是检查 ADO.NET 或 OLEDB 连接是否存在。如果它们都不存在，则会引发错误。如果其中任何一个存在，则使用该连接类型将变量值插入到表中。

欢迎任何建议，改进！

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using Microsoft.SqlServer.Dts.Runtime;
using System.Data.OleDb;
using System.Data.Common;

namespace AOC.SqlServer.Dts.Tasks

{

[DtsTask(
    DisplayName = "Custom Logging Task",
    Description = "Writes logging info into a table")]
public class CustomLoggingTask : Task
{

    private string _packageName;
    private string _taskName;
    private string _errorCode;
    private string _errorDescription;
    private string _machineName;
    private double _packageDuration;

    private string _connectionName;
    private string _eventType;
    private string _executionid;
    private DateTime _handlerdatetime;
    public string ConnectionName
    {
        set
        {
            _connectionName = value;
        }
        get
        {
            return _connectionName;
        }
    }

    public string Event
    {
        set
        {
            _eventType = value;
        }
        get
        {
            return _eventType;
        }
    }

    public override DTSExecResult Validate(Connections connections, VariableDispenser variableDispenser, IDTSComponentEvents componentEvents, IDTSLogging log)
    {
        const string METHOD_NAME = "CustomLoggingTask-Validate";

        try
        {

            if (string.IsNullOrEmpty(_eventType))
            {
                componentEvents.FireError(0, METHOD_NAME, "The event property must be specified", "", -1);
                return DTSExecResult.Failure;
            }

            if (string.IsNullOrEmpty(_connectionName))
            {
                componentEvents.FireError(0, METHOD_NAME, "No connection has been specified", "", -1);
                return DTSExecResult.Failure;
            }

            DbConnection connection = connections[_connectionName].AcquireConnection(null) as DbConnection;
            if (connection == null)
            {
                componentEvents.FireError(0, METHOD_NAME, "The connection is not a valid ADO.NET connection", "", -1);
                return DTSExecResult.Failure;
            }

            if (!variableDispenser.Contains("System::SourceID"))
            {
                componentEvents.FireError(0, METHOD_NAME, "No System::SourceID variable available. This task can only be used in an Event Handler", "", -1);
                return DTSExecResult.Failure;
            }

            return DTSExecResult.Success;
        }
        catch (Exception exc)
        {
            componentEvents.FireError(0, METHOD_NAME, "Validation Failed: " + exc.ToString(), "", -1);
            return DTSExecResult.Failure;
        }
    }

    public override DTSExecResult Execute(Connections connections, VariableDispenser variableDispenser, IDTSComponentEvents componentEvents, IDTSLogging log, object transaction)
    {
        try
        {
            string commandText =
@"INSERT INTO SSISLog (EventType, PackageName, TaskName, EventCode, EventDescription, PackageDuration, Host, ExecutionID, EventHandlerDateTime)
VALUES (@EventType, @PackageName, @TaskName, @EventCode, @EventDescription, @PackageDuration, @Host, @Executionid, @handlerdatetime)";

            ReadVariables(variableDispenser);
            DbConnection connection = connections[_connectionName].AcquireConnection(transaction) as DbConnection;
            //SqlConnection connection = (SqlConnection)connections[_connectionName].AcquireConnection(transaction);
            DbCommand command = null;
            //using (SqlCommand command = new SqlCommand())
            if (connection is SqlConnection)
                command = new SqlCommand();
            else if (connection is OleDbConnection)
                command = new OleDbCommand();

            {
                command.CommandText = commandText;
                command.CommandType = CommandType.Text;
                command.Connection = connection;

                command.Parameters.Add(new SqlParameter("@EventType", _eventType));
                command.Parameters.Add(new SqlParameter("@PackageName", _packageName));
                command.Parameters.Add(new SqlParameter("@TaskName", _taskName));
                command.Parameters.Add(new SqlParameter("@EventCode", _errorCode ?? string.Empty));
                command.Parameters.Add(new SqlParameter("@EventDescription", _errorDescription ?? string.Empty));
                command.Parameters.Add(new SqlParameter("@PackageDuration", _packageDuration));
                command.Parameters.Add(new SqlParameter("@Host", _machineName));
                command.Parameters.Add(new SqlParameter("@ExecutionID", _executionid));
                command.Parameters.Add(new SqlParameter("@handlerdatetime", _handlerdatetime));
                command.ExecuteNonQuery();
            }

            return DTSExecResult.Success;
        }
        catch (Exception exc)
        {
            componentEvents.FireError(0, "CustomLoggingTask-Execute", "Task Errored: " + exc.ToString(), "", -1);
            return DTSExecResult.Failure;
        }
    }

    private void ReadVariables(VariableDispenser variableDispenser)
    {
        variableDispenser.LockForRead("System::StartTime");
        variableDispenser.LockForRead("System::PackageName");
        variableDispenser.LockForRead("System::SourceName");
        variableDispenser.LockForRead("System::MachineName");
        variableDispenser.LockForRead("System::ExecutionInstanceGUID");
        variableDispenser.LockForRead("System::EventHandlerStartTime");
        bool includesError = variableDispenser.Contains("System::ErrorCode");
        if (includesError)
        {
            variableDispenser.LockForRead("System::ErrorCode");
            variableDispenser.LockForRead("System::ErrorDescription");
        }

        Variables vars = null;
        variableDispenser.GetVariables(ref vars);

        DateTime startTime = (DateTime)vars["System::StartTime"].Value;
        _packageDuration = DateTime.Now.Subtract(startTime).TotalSeconds;
        _packageName = vars["System::PackageName"].Value.ToString();
        _taskName = vars["System::SourceName"].Value.ToString();
        _machineName = vars["System::MachineName"].Value.ToString();
        _executionid = vars["System::ExecutionInstanceGUID"].Value.ToString();
        _handlerdatetime = (DateTime)vars["System::EventHandlerStartTime"].Value;
        if (includesError)
        {
            _errorCode = vars["System::ErrorCode"].Value.ToString();
            _errorDescription = vars["System::ErrorDescription"].Value.ToString();
        }

        // release the variable locks.
        vars.Unlock();

        // reset the dispenser
        variableDispenser.Reset();
    }
} 
```

# emacs - 使用 GNU Emacs 24.1 在自动填充模式下合并行

> ID：11230825
> 
> 赞同：1
> 
> 时间：2012-06-27T16:23:16.323
> 
> 标签：emacs, autofill, emacs24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:58:42.600

如果`refill-mode`不允许您在段落末尾添加文本，请通过`M-x report-emacs-bug`.

# python - Google App Engine Django BooleanProperty not binding to table

> ID：11230828
> 
> 赞同：0
> 
> 时间：2012-06-27T16:23:20.093
> 
> 标签：python, django, google-app-engine

I have the following,

```
class Company(db.Model):
    companyvalid = db.BooleanProperty(required=True)

class AddCompanyForm(djangoforms.ModelForm):
    class Meta:
            model = Company
        exclude = ['companyentrytime']
        exclude = ['companylatlong'] 
```

however I cannot get the o/p from the Django stored in the database. I can also only add a record when the checkbox is checked, but this is not reflected in the underlying table when saving the record. What is the smartest way to do this? Thanks

```
class AddCompanyCategoriesHandler(webapp.RequestHandler):
    def get(self):
        memcache.flush_all()
        form_requirements = AddCompanyCategoriesForm()
        path = os.path.join(os.path.dirname(__file__), 'addcompanycat.html')
        self.response.out.write(template.render(path, {'form': form_requirements}))

def post(self):
        form_requirements = AddCompanyCategoriesForm(data=self.request.POST)
        if form_requirements.is_valid():
                myname = form_requirements.clean_data['categoryname']
                entity = form_requirements.save(commit=False)   
                entity.put() 
```

=========================================================================================

I'm trying to use the BooleanField, but this fails to work, with the server giving out a 504 error. Here is my model. I've been experimenting with this BooleanFields format, but I'm not sure how this relates to my model. My model is

```
class Company(db.Model):
    companyurl = db.StringProperty(required=True)
    companyname = db.StringProperty(required=True)
    companydesc = db.TextProperty(required=True)
    companyaddress = db.PostalAddressProperty(required=True)
    companypostcode = db.StringProperty(required=True)
    companyemail = db.EmailProperty(required=True)
    companycountry = db.StringProperty(required=True)
    companyvalid = db.BooleanProperty()
    #companyvalid = db.BooleanField(required=True, label="Check this")
    companyentrytime = db.DateTimeProperty(auto_now_add=True)
    companylatlong = db.GeoPtProperty()
    @property
    def catname(self):
        return self.companycategory.name
    companycategory = db.ReferenceProperty(CompanyCategory, collection_name='compcategory') 
```

and the following

```
class AddCompanyForm(djangoforms.ModelForm):
    class Meta:
        model = Company
        #companyvalid = model.BooleanField(default=False)
        exclude = ['companyentrytime']
        exclude = ['companylatlong'] 
```

So my question is that if I have to use this BooleanField, how should I put it in the AddCompanyForm and should there be an entry in the model?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:59:27.063

尝试在模型中使用 BooleanField (https://docs.djangoproject.com/en/dev/ref/models/fields/#booleanfield) 而不是布尔属性？

# c# - ASP.NET Application isn't reaching WCF Service

> ID：11230835
> 
> 赞同：0
> 
> 时间：2012-06-27T16:23:44.160
> 
> 标签：c#, asp.net, .net, wcf

The set up I have on my local machine works fine, but when I push it to the server I encounter an issue. All my calls work on the server until I call this certain method in the Reference.cs file.

```
public DataResults GetData(DataRequest request) {
        return base.Channel.GetData(request);
    } 
```

Then nothing happens after this is called, it just sits there. No exception is being thrown or anything.

I had my logger code log points on each method, it gets to this method, but never gets to the WCF method. But all the other WCF method except for 2 of them. And the two works when I run it on my local machine.

The WCF method is set up like this:

The interface has:

```
 [OperationContract]
    [FaultContract(typeof(Domain.Fault.SystemFault))]
    [FaultContract(typeof(Domain.Fault.BusinessFault))]
    DataResults GetData(DataRequest request); 
```

and the actual method:

```
public DataResults GetData(DataRequest request)
    {
        try
        {
            Logger.LogInformation("Got to service");
            DataResults dr=CallDB(request);
            return dr;
        }
        catch (Exception ex)
        {
            throw this.getFaultExceptionComplete("GetData failed");
        }
    } 
```

# regex - 重新排序正则表达式匹配组

> ID：11230839
> 
> 赞同：2
> 
> 时间：2012-06-27T16:24:02.740
> 
> 标签：regex, perl, sublimetext, sublimetext2

我正在为 grails 编写一个 Sublime Text 2 构建配置，其中包括一个正则表达式（perl 样式），用于将错误消息解析为文件、行、列和消息部分。错误来自 grails CLI，格式如下：

```
{Project_Directory}/SourceFile.groovy: 19: errror_message @ line 19, column 5. 
```

我当前的正则表达式匹配所有四个部分，但 Sublime 似乎要求匹配按顺序发生，即匹配组 1 = 文件名，2 = 行号，3 = 列号，4 = 错误消息。Grails 以相反的顺序报告项目 3 和 4，因此我需要编写一个正则表达式，将列号放入匹配组 3 并将错误消息放入组 ​​4。我当前的正则表达式（匹配，但不反转组 3 4) 如下：

```
^(.+?): (\d+): (.+?) \@ line \d+, column (\d+)\.$ 
```

有任何想法吗？这甚至可能吗？有谁知道 sublime 是否会接受命名组而不是编号组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:25:51.620

```
^(.+?): (\d+): (?=.+? \@ line \d+, column (\d+)\.$)(.+?) \@ 
```

更好（更少的失败回溯）：

```
^([^:]+): (\d+): (?=[^@]+ \@ line \d+, column (\d+)\.$)([^@]+) \@ 
```

# java - boolean is set to false by default when passed in SOAP request

> ID：11230846
> 
> 赞同：0
> 
> 时间：2012-06-27T16:24:12.370
> 
> 标签：java, soap, null, boolean

**Situation** : I am coding a web service in which soap client sends the request to web service which will update the database.

Suppose, there is a table project_team_members and service will be updating info of individual team member.
There is a column in table IS_TEAM_LEADER which can have '0' or '1' as value.

**Problem**: When updating TL info, if I am not sending IS_TL field from SOUP UI (A SOAP Client), it is automatically received as 'false' by default in java code.

How can i know if user is sending it or not, i mean i am not able to send null in case of boolean data-type from SOAP client

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-09T08:55:55.573

这么多年后重新审视我自己的问题。
在 2012 年对自己做出回应 :)

一种选择是，将数据库中的任何内容按原样发送回服务器。但是对于这个事先读取调用是必要的。

杰西的（有问题的评论）给出了另一种选择作为答案/解决方案

> 如果有任何字段，例如 Foo，则通常有一个关联的 IsFooSpecified 属性来确定该值是否已设置。如果您可以访问 IsIsTeamLeadSpecified 属性？

PS：杰西没有建议任何领域，但这可以帮助其他人。

# c# - JavaScript setTimeout 在 Window.Open 后未触发

> ID：11230848
> 
> 赞同：6
> 
> 时间：2012-06-27T16:24:18.543
> 
> 标签：c#, asp.net, ios5, ios4

我有一个 ASP.Net 网页，目前可以在 iOS4 上运行，但不能在 iOS5 上运行。

在父网页上，我有一个打开子窗口的按钮。我在打开窗口调用后立即在父窗口中执行 setTimeout 刷新操作。

我在 iPhone iOS5 上注意到，当它打开子窗口时，父页面中的 setTimeout 函数不会被调用，直到我返回父窗口然后返回子窗口查看更新。

这是我在父页面中的代码片段，我认为问题出在哪里

```
WindowManager.OpenWindow('...')
t = setTimeout(function() { handles[0].testfx(); }, 1000); 
```

这可以在 iOS4 上运行，但不能在 iOS5 上运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:37:45.623

当窗口不是活动窗口时，iOS5 确实会暂停 JavaScript。对此您无能为力，因此您能做的最好的事情就是尝试更改您的设置，以便当您的窗口在后台时不需要运行 JavaScript。

你说你在做一个`setTimeout refresh thing in the parent window`. 你为什么做这个？坦率地说，这听起来有点奇怪——当用户甚至看不到您的页面时，您为什么要刷新任何内容？这条线到底`handles[0].testfx();`能为你做什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:53:54.633

这只是一个建议，因为我无权对此进行测试，但您可以使用`window.postMessage`. 这方面的一个例子可以在[这里](http://dbaron.org/log/20100309-faster-timeouts)找到。

在您的情况下，您可能想要检查是否已经过了所需的时间，如果没有，请`window.postMessage`再次调用，否则，请调用您的处理程序。

我不确定`window.postMessage`当不在活动窗口中时，呼叫的处理速度有多快（如果有的话）。

# razor - Razor, MVC4, @html.dropdownlistfor 问题

> ID：11230850
> 
> 赞同：5
> 
> 时间：2012-06-27T16:24:27.213
> 
> 标签：razor, asp.net-mvc-4

我正在尝试创建一个从数据库填充的下拉列表。我有：

```
public class Employee
    {
        [Key]
        public int Id { get; set; }
        [Required]
        public String FirstName { get; set; }
        [Required]
        public String LastName { get; set; }
        [Required]
        public String JobTitle { get; set; }
    }

    public class Project
    {
        [Key]
        public int Id { get; set; }
        [Required]
        public String ProjectName { get; set; }
        [Required]
        public String CompanyName { get; set; }
    }

    public class ProjectHour
    {
        [Key]
        public int Id { get; set; }
        [Required]
        public decimal Hours { get; set; }
        [Required]
        public DateTime Date { get; set; }
        public virtual ICollection<Employee> employeeId { get; set; }
        public virtual ICollection<Project> projectId { get; set; }
    } 
```

我想要的是创建一个表单，该表单将创建与项目和员工相关联的新项目时间。我正在尝试使用下拉列表在创建表单上显示员工和项目。显然，我对此完全陌生，但到目前为止我所拥有的是：

```
[HttpPost]
     public ActionResult CreateProjectHour(ProjectHour newProjectHour)
     {
             using (var db = new TimesheetContext())
             {
                 IEnumerable<SelectListItem> emp = db.Employees
                  .Select(c => new SelectListItem
                  {
                      Value = c.Id.ToString(),
                      Text = c.LastName
                  });
                 ViewBag.EmployeeId = emp;

                 db.ProjectHours.Add(newProjectHour);
                 db.SaveChanges();
             }

             return RedirectToAction("ProjectHourList");
         }
     } 
```

在表格上：

```
@model TimesheetMVC.Models.ProjectHour
...
@Html.DropDownListFor(model => model.employeeId, (SelectList)ViewBag.EmployeeId) 
```

这显然是非常错误的。任何帮助将非常感激...！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T16:45:22.020

不要使用相同的名称 EmployeeId。在 ASP.NET MVC 中创建下拉列表需要两件事：一个保存选定值的标量属性和一个包含可能值的集合属性。但是由于您使用的是 ViewBag（我完全不推荐），您可以执行以下操作：

```
ViewBag.Employees = emp; 
```

在您看来：

```
@Html.DropDownListFor(
    model => model.employeeId, 
    (IEnumerable<SelectListItem>)ViewBag.Employees
) 
```

但正如我所说，这根本不是我推荐的方法。我建议使用视图模型。`IEnumerable<SelectListItem>`所以在你的视图模型上定义一个属性：

```
public IEnumerable<SelectListItem> Employees { get; set; } 
```

并在您的控制器中填充此视图模型属性，然后将您的视图强类型化为视图模型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T17:55:26.327

或者你可以在控制器中做一个

```
SelectList selectList = new SelectList(db.Employees, "Id", "LastName");
ViewBag.EmployeeList = selectList; 
```

并在视图中

```
@Html.DropDownBoxFor(model => model.id_Employee, ViewBag.EmployeeList as SelectList) 
```

我发现这种方法更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:26:25.433

`EmployeeId`是一个`IEnumerable<SelectListItem>`，不是一个`SelectList`。
因此，您的演员表无法工作。

您需要显式创建一个`SelectList`.

# mysql - 带有ajax的可变单选按钮

> ID：11230859
> 
> 赞同：0
> 
> 时间：2012-06-27T16:24:49.700
> 
> 标签：mysql, ajax, button, radio

我在 php 文件中有多个单选按钮的循环-

```
for($j=1;$j<4;$j++)
    {
                    $var[$j]=$randnum[$j];
            $queryques="SELECT * FROM quesans WHERE q_id='$var[$j]'";
            $resultques=mysql_query($queryques);

            while($rowques=mysql_fetch_array($resultques))
            {   
                echo "<br/>".$rowques['ques'];
                echo "<br/>".'<input type="radio" value="hello" name="radio'.$j.'" />'.$rowques['ans_1'];
                echo "<br/>".'<input type="radio" value="hello" name="radio'.$j.'" />'.$rowques['ans_2'];
                echo "<br/>".'<input type="radio" value="hello" name="radio'.$j.'" />'.$rowques['ans_3'];
                echo "<br/>".'<input type="radio" value="hello" name="radio'.$j.'" />'.$rowques['ans_4'];
                echo "<br/>".'<input type="submit" name="button_'.$rowques['q_id'].'"value="submit" onclick="evaluation()" ';
                echo "<br/><br/>";
            }
        } 
```

并且评估（）是对服务器的ajax请求。如何发出 ajax 请求，以便它单独检测是否已按下任何单选按钮的提交按钮并获取该 $rowques['q_id'] 的值，然后执行 mysql 查询以找到相应的答案并打印那。我们可以通过普通的 post php 方法来做到这一点，但我希望它异步发生。谢谢你的帮助。

# php - 使用 Inner Join 和 mysql_num_rows() 总是返回少 1 行

> ID：11230860
> 
> 赞同：1
> 
> 时间：2012-06-27T16:25:00.370
> 
> 标签：php, left-join, mysql-num-rows

我检查了现有的主题。我有一个解决我的问题的方法，但我知道它不是正确的解决方法，我更感兴趣的是让这项工作正确，而不是创建一个解决方法。

我有一个项目，其中有 3 张桌子、诊断、访问和治疗。人们来拜访，他们接受治疗，治疗是为了诊断。

为了在页面上显示此信息，我想显示患者的诊断，然后显示他们来访的时间，然后可以单击该访问信息以显示治疗信息。

为此，请在 php 中创建此函数：

```
<?
function returnTandV($dxid){
    include("db.info.php"); 
    $query = sprintf("SELECT treatments.*,visits.* FROM treatments LEFT JOIN visits ON
    treatments.tid = visits.tid WHERE treatments.dxid = '%s' ORDER BY visits.dos DESC",
    mysql_real_escape_string($dxid));

    $result = mysql_query($query) or die("Failed because: ".mysql_error()); 
    $num = mysql_num_rows($result);
    for($i = 0; $i <= $num; ++$i) {
        $v[$i] = mysql_fetch_array($result MYSQL_ASSOC);
        ++$i;
    }

    return $v;
}
?> 
```

该功能有效，并将显示我想要的内容，即治疗和访问的所有行作为 1 个大关联。array 问题是它总是返回比数据库中实际少 1 行，我不知道为什么。总共有 3 行，但 msql_num_rows() 只会将其显示为 2。我的解决方法是只添加 1 `($num = mysql_num_rows($result)+1;)`，但我宁愿让它正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:32:34.517

这部分对我来说看起来很可疑：

```
for($i = 0; $i <= $num; ++$i) {
    $v[$i] = mysql_fetch_array($result MYSQL_ASSOC);
    ++$i;
} 
```

1.  你增加`i`了两次
2.  你会`$i <= $num`在你最想去的时候去`$i < $num`

这种组合可能是您获得意外结果的原因。基本上，您有三行，但您只要求第 0 行和第 2 行（跳过第 1 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:28:01.297

程序员总是从 0 开始计数。因此，您从 0 开始循环。如果以 2 结束，则您已达到 3 行。

第 0 行、第 1 行、第 2 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:34:44.320

如果 $i = 0，并且在向数组添加内容**之前**将其递增，则跳过第一行。循环运行后增加 $i 以从 0（第一个键）开始。

For 循环对此不好：宁可这样做：

```
$query=mysql_query('  --mysql ---  ');

while ($row=mysql_fetch_array($query)){

$v[]=$row["dbcolumn"];

} 
```

为您的函数返回 $v then.compact 和整洁。您可以创建一个关联数组，只要键名是唯一的（如主 ID）.. $v["$priid"]=$row[1];

# css - 是否有 CSS3 重置？

> ID：11230862
> 
> 赞同：2
> 
> 时间：2012-06-27T16:25:02.480
> 
> 标签：css, css-reset

我只是想知道是否存在针对 CSS3 的全局 CSS 重置。[与Eric Meyer](http://meyerweb.com/eric/tools/css/reset/)或[YUI](http://yuilibrary.com/yui/docs/cssreset/)创建的常用版本类似，但专门针对 CSS3。我在 SO 上查询过 Google、Github 和 here 等渠道，但没有找到全面的解决方案。

**编辑**：“重置”一词可能具有误导性，因为它主要涉及重置浏览器默认设置。“重新校准”可能更适合。

我应该澄清并提出一个用例。

这将与正常的 CSS 重置一起工作，但也可以处理由旋转、框阴影、动画、边框半径等引起的任何样式。例如，如前文[所述](https://stackoverflow.com/questions/7790617/resetting-css3-transform-translate)：

```
-webkit-transform:none; /* Safari and Chrome */
-moz-transform:none; /* Firefox */
-ms-transform:none; /* IE 9 */
-o-transform:none; /* Opera */
transform:none; 
```

上面的片段和其他类似的片段将与可能受它们影响的任何 HTML 标记相关联，就像当前的 CSS 重置一样。

如果您可以控制您的属性，那么对此的实现需求可能不会太常见。但是，例如，如果您正在创建一个将在不同域中使用的应用程序或插件，其中调用插件脚本的页面样式会影响插件本身的样式，那么类似这将非常有用。

我意识到还有其他方法可以驯服 CSS 继承和处理跨域问题，但这个问题是关于 CSS3 重置直接提出的。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T06:58:28.283

解决问题的真正方法是使用`scoped`属性，或者使用 Shadow DOM 创建小部件。

这样，您可以将自己与外部 CSS 隔离开来。不幸的是，两者都没有真正准备好使用，所以是的，你必须手动保护自己。

另一种方法是使用 设置代码中的所有内容（转换、字体大小、填充等）`!important`，而不是将其重置为 0/none，然后重新设置。

# asp.net - asp.net RegularExpressionValidator 在多行文本框中不起作用

> ID：11230863
> 
> 赞同：1
> 
> 时间：2012-06-27T16:25:07.963
> 
> 标签：asp.net, textbox, multiline

我正在使用 RegularExpressionValidator 来阻止用户使用撇号（符号'）。这在单行文本框中工作正常。但是当用户使用回车键换行时，它总是显示错误消息。我正在使用的 ValidationExpression 是：ValidationExpression="^(?:(?!['].))*$"

这是代码： ErrorMessage="You are not allowed to use aposorphene" ControlToValidate="tbDrivingLicenseOther"
ValidationExpression="^(?:(?!['].))*$">

在网络上的任何地方都找不到解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:54:29.040

我不清楚，你实际上想用你当前的正则表达式来防止什么以及撇号......但是下面的表达式：

```
ValidationExpression="^[^']*$" 
```

防止仅在 TextBox 和多行 TextBox 中输入撇号。

# javascript - 如何闪烁 jquery 对话框

> ID：11230867
> 
> 赞同：0
> 
> 时间：2012-06-27T16:25:27.740
> 
> 标签：javascript, jquery, dialog

有没有办法在浏览器上闪烁 jquery 对话框，让用户知道如果他在其他窗口上需要做一些重要的事情。让我们以用户需要扩展会话的超时弹出窗口为例，所以如果我们可以闪烁对话框，那么当用户在其他页面上时会收到通知。

实际上它是我希望用户注意的超时 jquery 弹出窗口，以便他可以采取适当的措施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:36:21.673

这不完全是您在说的，但我认为您实际需要的 UI 效果是动态的图标更改，如下所述：[当用户更改主题时，是否可以在网站上更改图标？](https://stackoverflow.com/questions/4875689/is-it-possible-change-favicon-on-site-when-users-change-themes)

使用它，您可以每隔一秒左右用某种警报图标来回交换图标，直到用户返回窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:44:17.183

这是我评论的扩展版本。

假设你有这个 JS cookie 对象：

```
var Cookie = {
  set: function(name,value,seconds) {
    var date = new Date;
    date.setTime(date.getTime() + (typeof seconds != "undefined" ? seconds : 1) * 1000);
    document.cookie = name + "=" + value + "; expires=" + date.toGMTString() + "; path=/; domain=." + vitalPage.getDomain();
  },
  get: function(name){
    var re = new RegExp("(?:^| )" + name + "=([^;]*)", "i");
    var matches = document.cookie.match(re);
    return matches && matches.length == 2 ? matches[1] : null;
  },
  read: function(name){
    var re = new RegExp("(?:^| )" + name + "=([^;]*)", "i");
    var matches = document.cookie.match(re);
    return matches && matches.length == 2 ? matches[1] : null;
  },
  unset: function(name){
    this.set(name,'',-1);
  }
} 
```

在初始页面加载时，执行以下操作：

```
var sess_expires = Cookie.get('sess_expires'),
    sess_remaining,
    show_dialog = function() {
      $('#your_dialog_id').show();
    }

if (sess_expires !== null) {
  sess_remaining = sess_expires - new Date();
  if (sess_remaining > 0) {
    window.setTimeout(show_dialog, sess_remaining); // show dialog when session expires
  }
  else show_dialog(); // show dialog now - session expired
}
else {
  Cookie.set('sess_expires', new Date() + 1800000);
  window.setTimeout(show_dialog, 1800000); // show dialog when session expires
} 
```

# mysql - MySQL DECIMAL 数据类型是否强制整数使用小数点？

> ID：11230869
> 
> 赞同：3
> 
> 时间：2012-06-27T16:25:31.617
> 
> 标签：mysql

有点不寻常的问题，但我在 MySQL 表中设置了一个数据类型为“DECIMAL(5,2)”的字段。据我了解，我所做的是只允许从 -999.99 到 999.99 的数字插入该字段。

但是，当我将一个整数插入 26 的值（这是有效的）时，我在数据库中显示为 26 而不是 26.00 - 这是正常的 MySQL 行为吗？我（也许天真地）认为，因为我已将比例设置为 2，所以我的数字将始终显示为 2 位小数？

我的问题是 - MySQL“DECIMAL”数据类型中的整数是否总是显示没有任何小数位？或者这是我的数据库管理器工具为我格式化 26.00 到 26 吗？

这似乎是一个奇怪的问题，但我仍在努力了解 MySQL DECIMALs。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:44:28.480

我找到了答案，似乎我的 MySQL 数据库管理器对我隐藏了小数点很有帮助（或没有那么有帮助）。对于任何觉得这有点用处的人，我在 Windows 7 上使用 EMS SQL Manager 2010。感谢 Cylindric 提示我检查我的工具！

回答我最初的问题 - 是的，即使是“DECIMAL”数据类型中的整数也会显示小数位。例如：

```
DECIMAL(3,1)

42 = 42.0
531.2 = 99.9
5 = 5.0 
```

希望这可以帮助某个地方的人！

# svn - 颠覆：基本校验和不匹配

> ID：11230872
> 
> 赞同：37
> 
> 时间：2012-06-27T16:25:34.607
> 
> 标签：svn

我正在尝试将颠覆中的更改提交到文件。该文件属于通过外部链接到我的项目的目录，并与某个版本挂钩。

当我进行提交时，我收到错误：

```
Commit failed
Base checksum mismatch on.... 
```

我尝试再次检查目录以确保它是干净的并再次执行提交，但我仍然收到相同的错误。

它可能与提交挂钩文件有关吗？我认为应该可以提交到一个挂钩的文件，并且基本上分支了这个代码？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-02-28T13:47:12.240

方法对我有用：

1.  复制有问题的文件。
2.  恢复。
3.  取消版本并添加以忽略项目。
4.  犯罪。
5.  从副本中改写忽略的文件。
6.  将文件添加回 SVN。
7.  犯罪。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-03T21:55:25.073

将项目中的所有文件复制到临时备份文件夹。单击原始项目文件夹上的“还原”。将更改的文件与备份文件夹进行比较，将更改的文件复制到原始项目文件夹中。提交，您的原始文件夹恢复正常。

刚刚在两个项目中遇到了同样的问题，并且该方法有效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-29T15:56:14.890

最适合我的方式是：

1.  导出不会提交的整个文件夹（例如使用 Tortoise）
2.  删除当前在 SVN 中的文件夹（也使用您的 SVN 客户端）
3.  将您导出所有内容的文件夹放在与先前删除的文件夹相同的位置，最好使用相同的名称
4.  添加并提交文件夹
5.  您回到了原来的位置，没有丢失更改，也没有错误的校验和！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-08T14:33:43.067

我这样做了。

1.  删除了工作区中的 .svn 文件夹。
2.  将项目签出到新的临时文件夹
3.  从新的临时文件夹复制 .svn 文件夹
4.  将 .svn 文件夹粘贴到工作区中。
5.  毫无问题地承诺。
6.  删除临时文件夹。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-04T09:30:09.817

我遇到了这个问题，但删除文件夹似乎没有任何作用。

我设法通过将相同的源文件检出到另一个地方并复制有这些问题的文件来解决这个问题。

Clean / Revert / Update（删除文件后）什么也没做。

我正在运行带有 tortoisesvn 1.7.11 64 位版本的 Windows 7。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-23T12:18:32.657

对我来说，一个新的结帐将非常耗时（几个演出数千个文件）。我做了什么：

*   删除元数据损坏的文件（保留本地文件，或备份）
*   它没有抱怨元数据不匹配
*   犯罪
*   将文件添加回工作副本
*   犯罪 ！
*   利润！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-19T09:30:39.977

刚刚遇到同样的问题，我使用控制台客户端来处理它：

1.  备份文件
2.  从 repo 中删除文件`svn rm filename`
3.  提交它
4.  从备份使用复制文件`svn add filename`
5.  提交它

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-05-19T13:39:08.840

刚刚遇到同样的问题，我使用控制台客户端来处理它：

1.  备份文件
2.  通过 svn rm 文件名从 repo 中删除文件
3.  提交它
4.  从备份中复制文件使用 svn add filename
5.  提交它

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-03-29T08:12:24.913

对我有用的是：

```
svn up --set-depth=empty 
```

然后

```
svn up --set-depth=infinity 
```

错误消失了！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-28T08:50:10.883

您的工作副本可能已损坏。您可以尝试使用 SmartSVN 修复它（选择 Modify | Validate Admin Area）。如果这没有帮助，只有新的结帐会有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-20T10:03:31.177

什么对我有用：

1.  复制当前版本的文件。
2.  svn rm '文件名'
3.  svn ci
4.  将文件名改回原来的
5.  svn 添加“文件名”
6.  svn ci

在此之后，提交和更新似乎正常工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-16T11:58:33.057

**检查您服务器的 SVN 版本，它可能与您本地的 svn**版本不匹配。

1.通过以下命令检查SVN版本并升级它，如果它与您的服务器版本不匹配。

```
svn --version 
```

2\. 使用最新版本的 SVN（即您的服务器 svn 版本）签出项目。

3\. 提交文件。

注意：它仅适用于 SVN 版本不匹配的情况。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-28T15:21:13.130

恕我直言，最简单的方法是：
1\. 将存储库中的最后一个副本签出到某个目录（fe TTTT）。
2\. 将 TTTT/.svn 内容复制到您的正常源目录（覆盖现有内容）。
你完成了 - 原始目录可能已提交。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-11T08:25:20.810

我解决了如下问题
首先，备份问题为
2ns的文件夹，删除原始文件夹并提交。
第三，从备份文件夹中复制文件夹
第四，我可以毫无问题地提交这个文件夹

这可能不是一个好的解决方案，因为我删除了文件夹并提交，所以我认为如果我想在解决这个问题后我无法恢复它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-23T21:46:24.740

我只是从工作目录中删除了文件，然后做了 svn up。例子：

```
rm dir/bad-file.txt
svn up dir/bad-file.txt 
```

那行得通。

# algorithm - 稳定拓扑排序

> ID：11230881
> 
> 赞同：27
> 
> 时间：2012-06-27T16:26:02.910
> 
> 标签：algorithm, graph-algorithm

假设我有一个图表，其中节点存储在排序列表中。我现在想对该图进行拓扑排序，同时保持未定义拓扑顺序的原始顺序。有什么好的算法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T23:09:34.187

一种可能性是计算字典序上的最小拓扑顺序。该算法是维护一个优先级队列，其中包含有效入度（在尚未处理的节点上）为零的节点。反复将标签最少的节点出列，将其附加到订单中，递减其后继节点的有效入度，将现在入度为零的节点入队。这会在 btilly 的示例中生成 1234567890，但通常不会最小化反转。

我喜欢这个算法的属性是输出有一个清晰的定义，显然只满足一个顺序，并且每当有反转时（节点 x 出现在节点 y 之后，即使 x < y），x 的最大依赖关系大于 y 的最大依赖关系依赖关系，这是反转 x 和 y 的“借口”。一个推论是，在没有约束的情况下，lex 最小顺序是排序顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-09T17:11:55.197

问题有两个方面：

*   拓扑排序
*   稳定排序

经过多次错误和试验，我想出了一个类似于冒泡排序但具有拓扑顺序标准的简单算法。

我在具有完整边组合的完整图上彻底测试了该算法，因此它可以被认为是经过验证的。

根据元素的原始顺序，可以容忍和解决循环依赖关系。生成的顺序是完美的，代表最接近的匹配。

以下是 C# 中的源代码：

```
static class TopologicalSort
{
    /// <summary>
    /// Delegate definition for dependency function.
    /// </summary>
    /// <typeparam name="T">The type.</typeparam>
    /// <param name="a">The A.</param>
    /// <param name="b">The B.</param>
    /// <returns>
    /// Returns <c>true</c> when A depends on B. Otherwise, <c>false</c>.
    /// </returns>
    public delegate bool TopologicalDependencyFunction<in T>(T a, T b);

    /// <summary>
    /// Sorts the elements of a sequence in dependency order according to comparison function with Gapotchenko algorithm.
    /// The sort is stable. Cyclic dependencies are tolerated and resolved according to original order of elements in sequence.
    /// </summary>
    /// <typeparam name="T">The type of the elements of source.</typeparam>
    /// <param name="source">A sequence of values to order.</param>
    /// <param name="dependencyFunction">The dependency function.</param>
    /// <param name="equalityComparer">The equality comparer.</param>
    /// <returns>The ordered sequence.</returns>
    public static IEnumerable<T> StableOrder<T>(
        IEnumerable<T> source,
        TopologicalDependencyFunction<T> dependencyFunction,
        IEqualityComparer<T> equalityComparer)
    {
        if (source == null)
            throw new ArgumentNullException("source");
        if (dependencyFunction == null)
            throw new ArgumentNullException("dependencyFunction");
        if (equalityComparer == null)
            throw new ArgumentNullException("equalityComparer");

        var graph = DependencyGraph<T>.TryCreate(source, dependencyFunction, equalityComparer);
        if (graph == null)
            return source;

        var list = source.ToList();
        int n = list.Count;

    Restart:
        for (int i = 0; i < n; ++i)
        {
            for (int j = 0; j < i; ++j)
            {
                if (graph.DoesXHaveDirectDependencyOnY(list[j], list[i]))
                {
                    bool jOnI = graph.DoesXHaveTransientDependencyOnY(list[j], list[i]);
                    bool iOnJ = graph.DoesXHaveTransientDependencyOnY(list[i], list[j]);

                    bool circularDependency = jOnI && iOnJ;

                    if (!circularDependency)
                    {
                        var t = list[i];
                        list.RemoveAt(i);

                        list.Insert(j, t);
                        goto Restart;
                    }
                }
            }
        }

        return list;
    }

    /// <summary>
    /// Sorts the elements of a sequence in dependency order according to comparison function with Gapotchenko algorithm.
    /// The sort is stable. Cyclic dependencies are tolerated and resolved according to original order of elements in sequence.
    /// </summary>
    /// <typeparam name="T">The type of the elements of source.</typeparam>
    /// <param name="source">A sequence of values to order.</param>
    /// <param name="dependencyFunction">The dependency function.</param>
    /// <returns>The ordered sequence.</returns>
    public static IEnumerable<T> StableOrder<T>(
        IEnumerable<T> source,
        TopologicalDependencyFunction<T> dependencyFunction)
    {
        return StableOrder(source, dependencyFunction, EqualityComparer<T>.Default);
    }

    sealed class DependencyGraph<T>
    {
        private DependencyGraph()
        {
        }

        public IEqualityComparer<T> EqualityComparer
        {
            get;
            private set;
        }

        public sealed class Node
        {
            public int Position
            {
                get;
                set;
            }

            List<T> _Children = new List<T>();

            public IList<T> Children
            {
                get
                {
                    return _Children;
                }
            }
        }

        public IDictionary<T, Node> Nodes
        {
            get;
            private set;
        }

        public static DependencyGraph<T> TryCreate(
            IEnumerable<T> source,
            TopologicalDependencyFunction<T> dependencyFunction,
            IEqualityComparer<T> equalityComparer)
        {
            var list = source as IList<T>;
            if (list == null)
                list = source.ToArray();

            int n = list.Count;
            if (n < 2)
                return null;

            var graph = new DependencyGraph<T>();
            graph.EqualityComparer = equalityComparer;
            graph.Nodes = new Dictionary<T, Node>(n, equalityComparer);

            bool hasDependencies = false;

            for (int position = 0; position < n; ++position)
            {
                var element = list[position];

                Node node;
                if (!graph.Nodes.TryGetValue(element, out node))
                {
                    node = new Node();
                    node.Position = position;
                    graph.Nodes.Add(element, node);
                }

                foreach (var anotherElement in list)
                {
                    if (equalityComparer.Equals(element, anotherElement))
                        continue;

                    if (dependencyFunction(element, anotherElement))
                    {
                        node.Children.Add(anotherElement);
                        hasDependencies = true;
                    }
                }
            }

            if (!hasDependencies)
                return null;

            return graph;
        }

        public bool DoesXHaveDirectDependencyOnY(T x, T y)
        {
            Node node;
            if (Nodes.TryGetValue(x, out node))
            {
                if (node.Children.Contains(y, EqualityComparer))
                    return true;
            }
            return false;
        }

        sealed class DependencyTraverser
        {
            public DependencyTraverser(DependencyGraph<T> graph)
            {
                _Graph = graph;
                _VisitedNodes = new HashSet<T>(graph.EqualityComparer);
            }

            DependencyGraph<T> _Graph;
            HashSet<T> _VisitedNodes;

            public bool DoesXHaveTransientDependencyOnY(T x, T y)
            {
                if (!_VisitedNodes.Add(x))
                    return false;

                Node node;
                if (_Graph.Nodes.TryGetValue(x, out node))
                {
                    if (node.Children.Contains(y, _Graph.EqualityComparer))
                        return true;

                    foreach (var i in node.Children)
                    {
                        if (DoesXHaveTransientDependencyOnY(i, y))
                            return true;
                    }
                }

                return false;
            }
        }

        public bool DoesXHaveTransientDependencyOnY(T x, T y)
        {
            var traverser = new DependencyTraverser(this);
            return traverser.DoesXHaveTransientDependencyOnY(x, y);
        }
    }
} 
```

还有一个小示例应用程序：

```
class Program
{
    static bool DependencyFunction(char a, char b)
    {
        switch (a + " depends on " + b)
        {
            case "A depends on B":
                return true;

            case "B depends on D":
                return true;

            default:
                return false;
        }

    }

    static void Main(string[] args)
    {
        var source = "ABCDEF";
        var result = TopologicalSort.StableOrder(source.ToCharArray(), DependencyFunction);
        Console.WriteLine(string.Concat(result));
    }
} 
```

给定输入元素 {A, B, C, D, E, F}，其中 A 依赖于 B，B 依赖于 D，输出为 {D, B, A, C, E, F}。

**更新：** 我写[了一篇](http://blog.gapotchenko.com/stable-topological-sort)关于稳定拓扑排序目标、算法及其证明的小文章。希望这能提供更多解释，并对开发人员和研究人员有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T18:20:39.983

您没有足够的标准来指定您要查找的内容。例如，考虑一个具有两个有向分量的图。

```
1 -> 2 -> 3 -> 4 -> 5
6 -> 7 -> 8 -> 9 -> 0 
```

您更喜欢以下哪一种？

```
6, 7, 8, 9, 0, 1, 2, 3, 4, 5
1, 2, 3, 4, 5, 6, 7, 8, 9, 0 
```

第一个结果是通过将最低节点尽可能靠近列表的头部来打破所有关系。因此0胜。第二个结果是试图最小化 A < B 和 B 在拓扑排序中出现在 A 之前的次数。两者都是合理的答案。第二个可能更令人愉快。

我可以很容易地为第一个生成算法。首先，取最低节点，并进行广度优先搜索以定位到最短根节点的距离。如果存在平局，请确定可能出现在这种最短路径上的节点集。取该集合中的最低节点，并放置从它到根的最佳可能路径，然后放置从我们开始的最低节点到它的最佳可能路径。搜索尚未在拓扑排序中的下一个最低节点，然后继续。

为更令人愉悦的版本生成算法似乎要困难得多。请参阅[http://en.wikipedia.org/wiki/Feedback_arc_set](http://en.wikipedia.org/wiki/Feedback_arc_set)以了解相关问题，该问题强烈表明它实际上是 NP 完全的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-09T17:14:47.980

这是一种简单的拓扑排序迭代方法：不断删除度数为 0 的节点及其边。

要获得稳定的版本，只需修改为：不断删除最小索引节点的度数为 0 及其边缘。

在伪python中：

```
# N is the number of nodes, labeled 0..N-1
# edges[i] is a list of nodes j, corresponding to edges (i, j)

inDegree = [0] * N
for i in range(N):
   for j in edges[i]:
      inDegree[j] += 1

# Now we maintain a "frontier" of in-degree 0 nodes.
# We take the smallest one until the frontier is exhausted.
# Note: You could use a priority queue / heap instead of a list,
#       giving O(NlogN) runtime. This naive implementation is
#       O(N^2) worst-case (when the order is very ambiguous).

frontier = []
for i in range(N):
    if inDegree[i] == 0:
        frontier.append(i)

order = []
while frontier:
    i = min(frontier)
    frontier.remove(i)
    for j in edges[i]:
       inDegree[j] -= 1
       if inDegree[j] == 0:
           frontier.append(j)

 # Done - order is now a list of the nodes in topological order,
 # with ties broken by original order in the list. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-03T00:22:35.413

维基百科上的[深度优先搜索算法对](https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search)我有用：

```
const assert = chai.assert;

const stableTopologicalSort = ({
  edges,
  nodes
}) => {
  // https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search
  const result = [];
  const marks = new Map();

  const visit = node => {
    if (marks.get(node) !== `permanent`) {
      assert.notEqual(marks.get(node), `temporary`, `not a DAG`);
      marks.set(node, `temporary`);
      edges.filter(([, to]) => to === node).forEach(([from]) => visit(from));
      marks.set(node, `permanent`);
      result.push(node);
    }
  };

  nodes.forEach(visit);
  return result;
};

const graph = {
  edges: [
    [5, 11],
    [7, 11],
    [3, 8],
    [11, 2],
    [11, 9],
    [11, 10],
    [8, 9],
    [3, 10]
  ],
  nodes: [2, 3, 5, 7, 8, 9, 10, 11]
};

assert.deepEqual(stableTopologicalSort(graph), [5, 7, 11, 2, 3, 8, 9, 10]);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.2.0/chai.min.js"></script>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-18T13:09:09.787

将“稳定拓扑排序”解释为 DAG 的线性化，使得拓扑顺序无关紧要的线性化范围按字典顺序排序。这可以通过线性化的[DFS](https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search)方法解决，修改为按字典顺序访问节点。

我有一个带有线性化方法的 Python Digraph 类，如下所示：

```
def linearize_as_needed(self):
    if self.islinearized:
        return

    # Algorithm: DFS Topological sort
    # https://en.wikipedia.org/wiki/Topological_sorting#Depth-first_search

    temporary = set()
    permanent = set()

    L = [ ]

    def visit(vertices):
        for vertex in sorted(vertices, reverse=True):
            if vertex in permanent:
                pass
            elif vertex in temporary:
                raise NotADAG
            else:
                temporary.add(vertex)

                if vertex in self.arrows:
                    visit(self.arrows[vertex])

                L.append(vertex)

                temporary.remove(vertex)
                permanent.add(vertex)

        # print('visit: {} => {}'.format(vertices, L))

    visit(self.vertices)
    self._linear = list(reversed(L))
    self._iter = iter(self._linear)
    self.islinearized = True 
```

这里

```
self.vertices 
```

是所有顶点的集合，并且

```
self.arrows 
```

将邻接关系作为左节点到右节点集的字典。

# ios - 用 viewWithTag 隐藏 UIImageView

> ID：11230883
> 
> 赞同：0
> 
> 时间：2012-06-27T16:26:15.253
> 
> 标签：ios, ipad, uiview, tags

我有 5 个`UIImageView`标签，标签为 100、101、102、103、104。

我想让它们在用户验证练习时出现。因此，如果验证了 1 个练习`UIImageView`，将出现带有标签 100 的练习。如果验证了 2 个练习，那么`UIImageView`标签 100 和 101 都会出现，依此类推。我尝试了下面的代码，但只出现了一张图像。为什么？我怎样才能解决这个问题？

```
for (int j = 0; j < 5; j++) {

    UIImageView *coin = (UIImageView *)[self.view viewWithTag:100+j];

    NSLog(@"coin.x: %f, coin.y: %f", coin.frame.origin.x, coin.frame.origin.y);
    NSLog(@"cointag = %d", coin.tag);
    if (j < library.themesCompleted)
    {
        NSLog(@"HIDDEN = NO");
        coin.hidden = NO;        
    }
    else
    {
        NSLog(@"HIDDEN = YES");
        coin.hidden = YES;
    }
} 
```

这出现在日志中：

```
2012-06-27 18:24:06.463 test[4499:1da07] coin.x: 77.000000, coin.y: 1.000000
2012-06-27 18:24:06.463 test[4499:1da07] cointag = 100
2012-06-27 18:24:06.463 test[4499:1da07] HIDDEN = NO
2012-06-27 18:24:06.464 test[4499:1da07] coin.x: 92.000000, coin.y: 1.000000
2012-06-27 18:24:06.464 test[4499:1da07] cointag = 101
2012-06-27 18:24:06.464 test[4499:1da07] HIDDEN = NO
2012-06-27 18:24:06.464 test[4499:1da07] coin.x: 107.000000, coin.y: 2.000000
2012-06-27 18:24:06.465 test[4499:1da07] cointag = 102
2012-06-27 18:24:06.465 test[4499:1da07] HIDDEN = YES
2012-06-27 18:24:06.465 test[4499:1da07] coin.x: 122.000000, coin.y: 1.000000
2012-06-27 18:24:06.465 test[4499:1da07] cointag = 103
2012-06-27 18:24:06.466 test[4499:1da07] HIDDEN = YES
2012-06-27 18:24:06.466 test[4499:1da07] coin.x: 136.000000, coin.y: 1.000000
2012-06-27 18:24:06.466 test[4499:1da07] cointag = 104
2012-06-27 18:24:06.466 test[4499:1da07] HIDDEN = YES 
```

# javascript - 您如何随机化 CrowdFlower 上的答案选择？

> ID：11230884
> 
> 赞同：2
> 
> 时间：2012-06-27T16:26:20.560
> 
> 标签：javascript, mechanicalturk, crowdsourcing, crowdflower

我们将 CrowdFlower 与 Amazon Mechanical Turk 结合使用。我们的问题有相同的答案可供选择，因此我们希望随机化它们出现的顺序，以使用户保持警惕并希望阻止他们作弊。

我们希望能够将脚本插入到 CML（CrowdFlower 标记语言）文档中，以应用于所有问题。我们认为插入一些 JavaScript 是正确的方法。欢迎任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:42:48.840

您可以使用一小段 javascript 来实现这一点。您需要做的就是向要随机化的`cml:radios`or`cml:checkboxes`标记添加一个 class="rando" 属性，然后将以下代码放在高级编辑器的 javascript 部分*（假设您的选择少于 10 个）`cml:radios`或`cml:checkboxes`标签）*：

```
$$('.cml_field.rando input').sort(function(a,b) {
   return Math.round(Math.random()*10) - 1 
}).each(function(o) { 
   o.getParent('.cml_row').inject(o.getParent('.cml_field')) 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:28:18.007

您还可以使用随机液体过滤器：

```
{% capture my_value %}{{ 3 | random }}{% endcapture %}
{% case my_value %}
{% when "1" %}
  One
{% when "2" %}
  Two
{% when "0" %}
  Zero
{% endcase %} 
```

# jpa - 不太了解延迟加载

> ID：11230890
> 
> 赞同：0
> 
> 时间：2012-06-27T16:26:39.273
> 
> 标签：jpa

我有一种情况，当我希望它以一对多的方式进行时，延迟加载没有发生。显然，我对此并不陌生。当我调用 s.getSongComposers() 时，为什么无法获取 SongComposers？

这是我的 DAO 课程：

```
public class SongDAOImpl implements SongDAO {

    @PersistenceContext
    private EntityManager em;

    @Override
    @SuppressWarnings(value = { "unchecked" })
    public List<Song> getAllSongsOnAlbum(int albumID) {
        Query q = em.createQuery("SELECT s FROM Song s WHERE s.album.albumID  = :albumid ORDER BY s.songName");
        q.setParameter("albumid", albumID);
        List<Song> list = (List<Song>) q.getResultList();
        for (Song s: list) {
            s.getSongComposers();
        }
        return list;
    }

} 
```

这是我的 Song 实体：

```
@Entity
@Table(name="songs")
public class Song {

    @Id
    @GeneratedValue
    @Column(name="SongID")
    private int songID;

    @Column(name="SongName")
    private String songName;

    @Column(name="Length")
    private int length;

    @ManyToOne
    @JoinColumn(name="AlbumID", referencedColumnName="AlbumID")
    private Album album;

    @OneToMany(mappedBy="song")
    private List<SongComposer> songComposers;

      .... all getters/setters ......
      } 
```

这是我的 SongComposer 实体：

```
@Entity
@Table(name="song_composer")
public class SongComposer {

    @Id
    @GeneratedValue
    @Column(name="SongComposerID")
    private int songComposerID;

    @ManyToOne
    @JoinColumn(name="SongID", referencedColumnName="SongID")
    private Song song;

    @ManyToOne
    @JoinColumn(name="ComposerID", referencedColumnName="ComposerID")
    private Composer composer;

         ..... getters/setters .......

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:30:46.830

你必须明确地做到这一点。试试这个查询：

```
SELECT DISTINCT s FROM Song s JOIN FETCH s.songComposers WHERE s.album.albumID  = :albumid ORDER BY s.songName" 
```

# facebook - 将网站帐户永久关联到 Facebook 帐户

> ID：11230891
> 
> 赞同：0
> 
> 时间：2012-06-27T16:26:52.237
> 
> 标签：facebook, web, external, credentials

我的任务是将一些商业共享的东西整合到一个网站中。这个想法是用户 a) 在网站上登录/注册，b) 用户通过添加和接受网站应用程序将他的用户帐户与他的 facebook 帐户连接起来。有趣的部分来了 - 有没有一种方法可以将 facebook 帐户与我的网站帐户链接起来，以便我可以以编程方式将更新和促销直接发送到他们的墙上？

在应用程序对话框中，明确指出用户允许应用程序写入用户墙，以便他们接受并同意这一点。然后，例如，如果我想使用 fb 应用程序 api 直接在他们的墙上向他们发送促销或更新，我该如何实现呢？我读过的所有教程都考虑了使用 Facebook 登录的用户

具体的想法类似于每周促销提要，我的客户希望允许客户允许直接在他们的墙上发布。由于我没有任何 facebook 开发经验，如果可能的话，我很高兴知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:32:06.547

您建议的大部分内容都是违反政策的，并且在技术上也不可行，因为用户需要每 60 天返回应用程序一次，您才能为他们获得有效的 access_token。

[身份验证](https://developers.facebook.com/docs/authentication/)文档解释了如何在获得用户许可的情况下访问用户的信息，而[权限](https://developers.facebook.com/docs/authentication/permissions/)文档解释了哪些权限授予对哪些功能或字段的访问权限。

# php - 允许使用 jquery 从移动站点切换到完整站点

> ID：11230892
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:26:52.700
> 
> 标签：php, redirect, jquery-mobile

我在这里做了一些挖掘工作，但仍然有点不确定如何做到这一点。这是场景：

我有一个完整的 HTML 站点，它调用以下 PHP 代码：

```
<?php
    require_once('inc/mobile_device_detect.php');
    mobile_device_detect(true,true,true,true,true,true,true,'mobile/',false);
?>
<!DOCTYPE html>
<html lang="en">
<head>blah blah</head>
etc... 
```

mobile_device_detect.php 是一个来自[http://detectmobilebrowsers.mobi/的小型库](http://detectmobilebrowsers.mobi/)

因此，当我从手机访问完整站点时，重定向会完美发生。接下来，在 mobile/index.html 上，我为那些想要查看完整站点的用户提供了以下重定向代码（我还应该提到这个移动站点使用 jquery-mobile）：

```
<a href="../index.html" data-ajax="false" rel="external"><img src="images/icons/world.png" width="32" height="32" alt="Full Site" class="ui-li-icon">Full Site</a> 
```

当我单击此链接时，我被重新发送回移动页面。我知道这是因为重定向脚本再次被触发。我已经通过使用桌面客户​​端访问移动站点对此进行了测试，并且重定向完美。

对于想要查看“完整站点”的移动用户，我有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:33:02.147

您可以在您的 href 上附加一个查询参数，就像`href="../index.html?full=true"`在您的主页中检查完整的参数不存在一样。

```
<?php
    if (!isset($_GET['full'])) {
      require_once('inc/mobile_device_detect.php');
      mobile_device_detect(true,true,true,true,true,true,true,'mobile/',false);
    }
?> 
```

# .net - 多次初始化单例

> ID：11230894
> 
> 赞同：2
> 
> 时间：2012-06-27T16:27:00.980
> 
> 标签：.net, vb.net, multithreading, singleton

我以前没有使用过单例，所以也许我有完全错误的想法，但我认为关键是它只能初始化一次，任何调用它的人都会引用同一个实例..？

所以我从一个例子中得到了这个。GetInstance() 在我的程序中从数百个不同的地方被调用，当我调试时，“Prog = New Program”这一行不断受到每个调用的影响。我认为这正是不应该发生的事情。或者我有一些基本的误解？

```
 ' ********************** THREAD SAFE SINGLETON **************************
 Public Class Program 

    Private Shared Prog As Program = Nothing
    Private Shared ReadOnly singletonLock As New Object()
    Public Shared Function GetInstance() As Program
        SyncLock singletonLock
            If Prog Is Nothing Then
                Prog = New Program
            End If
            Return Prog
        End SyncLock
    End Function 
```

编辑：

在第一个完成之前，“New”子似乎触发了对 Program.GetInstance 的多次调用。这是因为我之前在这个类中有很多共享的公共对象，因为这个类是单例的，所以它们不再共享。这些对象在初始化时会调用 Program 类以引用它的其他对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:22:17.510

猜猜答案会是这样的：

在第一个完成之前，“New”子似乎触发了对 Program.GetInstance 的多次调用。这是因为我之前在这个类中有很多共享的公共对象，因为这个类是单例的，所以它们不再共享。这些对象在初始化时会调用 Program 类以引用它的其他对象。所以; 循环引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T17:24:15.877

这是从 c# 抄来的，但可能会更好一些（尽管后代码应该可以工作。）

```
Public NotInheritable Class Singleton
    Private Shared ReadOnly Singleton instance = new Singleton();

    ' Explicit static constructor to tell compiler
    ' not to mark type as beforefieldinit
    Shared Sub New()
    End Sub

    Private Sub New()
    End Sub

    Public Shared ReadOnly Property Instance As Singleton
        Get
            return Me.instance;
        End Get
    End Property
End Class 
```

应该在没有任何锁定的情况下很好地工作，但正如[Skeet](http://csharpindepth.com/Articles/General/Singleton.aspx)所说，可能会更懒惰。

# arrays - Repa 数组上的并行 mapM

> ID：11230895
> 
> 赞同：91
> 
> 时间：2012-06-27T16:27:02.257
> 
> 标签：arrays, haskell, parallel-processing, repa

在我最近的[工作](https://github.com/bgamari/mixture-model)中`Gibbs sampling`，我一直在充分利用[`RVar`](http://hackage.haskell.org/packages/archive/rvar/0.2.0.1/doc/html/Data-RVar.html)它，在我看来，它为随机数生成提供了一个近乎理想的接口。遗憾的是，由于无法在地图中使用单子动作，我一直无法使用 Repa。

虽然很明显 monad 映射通常不能并行化，但在我看来，这`RVar`可能是至少一个可以安全并行化效果的 monad 示例（至少在原则上；我不太熟悉 的内部工作原理`RVar`） . 即，我想写如下内容，

```
drawClass :: Sample -> RVar Class
drawClass = ...

drawClasses :: Array U DIM1 Sample -> RVar (Array U DIM1 Class)
drawClasses samples = A.mapM drawClass samples 
```

`A.mapM`看起来像哪里，

```
mapM :: ParallelMonad m => (a -> m b) -> Array r sh a -> m (Array r sh b) 
```

虽然显然这将如何工作在很大程度上取决于 的实现`RVar`及其底层`RandomSource`，但原则上人们会认为这将涉及为每个产生的线程绘制一个新的随机种子并照常进行。

直觉上，似乎同样的想法可能会推广到其他一些单子。

所以，我的问题是：是否可以构建一类`ParallelMonad`单子，其效果可以安全地并行化（可能至少由`RVar`.

它可能是什么样子？还有哪些其他单子可能居住在这个类中？其他人是否考虑过这在 Repa 中如何发挥作用的可能性？

最后，如果这种并行单子动作的概念不能被推广，有没有人看到任何好的方法可以在特定情况下`RVar`（这将非常有用）使这项工作？放弃`RVar`并行性是一个非常困难的权衡。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-06-04T17:50:56.527

自从提出这个问题以来已经 7 年了，似乎仍然没有人想出一个好的解决方案来解决这个问题。Repa 没有`mapM`/ `traverse`like 功能，即使是可以在没有并行化的情况下运行的功能。此外，考虑到过去几年取得的进展，它似乎也不太可能发生。

由于 Haskell 中许多数组库的陈旧状态以及我对它们的功能集的总体不满，我在数组库中投入了几年的工作[`massiv`](https://github.com/lehins/massiv)，它借鉴了 Repa 的一些概念，但将其提升到了完全不同的水平。介绍就够了。

在今天之前，有三个类似单子映射的函数`massiv`（不包括类似函数的同义词：`imapM`，`forM`等）：

*   [`mapM`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Array.html#v:mapM)- 任意映射中的常用映射`Monad`。由于明显的原因不能并行化，而且速度也有点慢（按照通常的方式`mapM`，在列表中很慢）
*   [`traversePrim`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Array.html#v:traversePrim)- 这里我们被限制为`PrimMonad`，它明显快于`mapM`，但其原因对于本次讨论并不重要。
*   [`mapIO`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Array.html#v:mapIO)- 顾名思义，这个仅限于`IO`（或者更确切地说`MonadUnliftIO`，但这无关紧要）。因为我们在其中，所以`IO`我们可以自动将数组拆分为与内核一样多的块，并使用单独的工作线程将`IO`操作映射到这些块中的每个元素。与也是可并行化的 pure 不同`fmap`，我们必须在`IO`这里，因为调度的不确定性以及映射操作的副作用。

所以，一旦我读到这个问题，我就想这个问题实际上已经解决了`massiv`，但没有那么快。随机数生成器，例如 in[`mwc-random`](https://www.stackage.org/package/mwc-random)和其他 in[`random-fu`](https://www.stackage.org/package/random-source)不能跨多个线程使用相同的生成器。这意味着，我缺少的唯一难题是：“为每个产生的线程绘制一个新的随机种子并照常进行”。换句话说，我需要两件事：

*   一个函数，它将初始化与工作线程一样多的生成器
*   以及一个抽象，它将根据操作在哪个线程中运行，无缝地为映射函数提供正确的生成器。

所以这正是我所做的。

首先，我将使用特制的[`randomArrayWS`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Array.html#v:randomArrayWS)和[`initWorkerStates`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Core.html#v:initWorkerStates)函数给出示例，因为它们与问题更相关，然后转到更一般的一元映射。以下是它们的类型签名：

```
randomArrayWS ::
     (Mutable r ix e, MonadUnliftIO m, PrimMonad m)
  => WorkerStates g -- ^ Use `initWorkerStates` to initialize you per thread generators
  -> Sz ix -- ^ Resulting size of the array
  -> (g -> m e) -- ^ Generate the value using the per thread generator.
  -> m (Array r ix e) 
```

```
initWorkerStates :: MonadIO m => Comp -> (WorkerId -> m s) -> m (WorkerStates s) 
```

对于那些不熟悉 的人`massiv`，这个[`Comp`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Core.html#t:Comp)参数是一种计算策略，值得注意的构造函数是：

*   `Seq`- 按顺序运行计算，无需分叉任何线程
*   `Par`- 启动尽可能多的线程并使用它们来完成工作。

我[`mwc-random`](https://www.stackage.org/package/mwc-random)最初将使用包作为示例，然后移至`RVarT`：

```
λ> import Data.Massiv.Array
λ> import System.Random.MWC (createSystemRandom, uniformR)
λ> import System.Random.MWC.Distributions (standard)
λ> gens <- initWorkerStates Par (\_ -> createSystemRandom) 
```

上面我们使用系统随机性为每个线程初始化了一个单独的生成器，但是我们也可以通过从[`WorkerId`](https://hackage.haskell.org/package/scheduler-1.4.0/docs/Control-Scheduler.html#t:WorkerId)参数中派生一个唯一的每个线程种子来使用它，这只是`Int`工作人员的索引。现在我们可以使用这些生成器创建一个具有随机值的数组：

```
λ> randomArrayWS gens (Sz2 2 3) standard :: IO (Array P Ix2 Double)
Array P Par (Sz (2 :. 3))
  [ [ -0.9066144845415213, 0.5264323240310042, -1.320943607597422 ]
  , [ -0.6837929005619592, -0.3041255565826211, 6.53353089112833e-2 ]
  ] 
```

通过使用`Par`策略，[`scheduler`](https://github.com/lehins/haskell-scheduler)库将平均分配可用工作人员之间的生成工作，每个工作人员将使用它自己的生成器，从而使其线程安全。没有什么能阻止我们重复使用相同的`WorkerStates`任意次数，只要它不是同时完成的，否则会导致异常：

```
λ> randomArrayWS gens (Sz1 10) (uniformR (0, 9)) :: IO (Array P Ix1 Int)
Array P Par (Sz1 10)
  [ 3, 6, 1, 2, 1, 7, 6, 0, 8, 8 ] 
```

现在放在`mwc-random`一边，我们可以通过使用以下函数将相同的概念重用于其他可能的用例`generateArrayWS`：

```
generateArrayWS ::
     (Mutable r ix e, MonadUnliftIO m, PrimMonad m)
  => WorkerStates s
  -> Sz ix --  ^ size of new array
  -> (ix -> s -> m e) -- ^ element generating action
  -> m (Array r ix e) 
```

和`mapWS`：

```
mapWS ::
     (Source r' ix a, Mutable r ix b, MonadUnliftIO m, PrimMonad m)
  => WorkerStates s
  -> (a -> s -> m b) -- ^ Mapping action
  -> Array r' ix a -- ^ Source array
  -> m (Array r ix b) 
```

这是关于如何将此功能与[`rvar`](https://www.stackage.org/package/rvar),[`random-fu`](https://www.stackage.org/package/random-fu)和[`mersenne-random-pure64`](https://www.stackage.org/package/mersenne-random-pure64)库一起使用的承诺示例。我们也可以在`randomArrayWS`这里使用，但是为了举例，假设我们已经有一个具有不同`RVarT`s 的数组，在这种情况下我们需要一个`mapWS`：

```
λ> import Data.Massiv.Array
λ> import Control.Scheduler (WorkerId(..), initWorkerStates)
λ> import Data.IORef
λ> import System.Random.Mersenne.Pure64 as MT
λ> import Data.RVar as RVar
λ> import Data.Random as Fu
λ> rvarArray = makeArrayR D Par (Sz2 3 9) (\ (i :. j) -> Fu.uniformT i j)
λ> mtState <- initWorkerStates Par (newIORef . MT.pureMT . fromIntegral . getWorkerId)
λ> mapWS mtState RVar.runRVarT rvarArray :: IO (Array P Ix2 Int)
Array P Par (Sz (3 :. 9))
  [ [ 0, 1, 2, 2, 2, 4, 5, 0, 3 ]
  , [ 1, 1, 1, 2, 3, 2, 6, 6, 2 ]
  , [ 0, 1, 2, 3, 4, 4, 6, 7, 7 ]
  ] 
```

需要注意的是，尽管在上面的示例中使用了 Mersenne Twister 的纯实现，但我们无法逃避 IO。这是因为非确定性调度，这意味着我们永远不知道哪个工作人员将处理数组的哪个块，因此哪个生成器将用于数组的哪个部分。从好的方面来说，如果生成器是纯且可拆分的，例如[`splitmix`](https://www.stackage.org/package/splitmix)，那么我们可以使用纯的、确定性和可并行化的生成函数：[`randomArray`](https://hackage.haskell.org/package/massiv-0.3.4.0/docs/Data-Massiv-Array.html#v:randomArray)，但这已经是另一回事了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-15T17:39:14.707

由于 PRNG 固有的顺序性质，这样做可能不是一个好主意。相反，您可能希望按如下方式转换代码：

1.  声明一个 IO 函数（`main`或者你有什么）。
2.  根据需要读取尽可能多的随机数。
3.  将（现在是纯的）数字传递给您的 repa 函数。

# asp.net - 在 IE 9 中启用 cookie

> ID：11230897
> 
> 赞同：1
> 
> 时间：2012-06-27T16:27:13.173
> 
> 标签：asp.net, session-state

页面：

```
<asp:Label ID="Label1" runat="server"></asp:Label>
<asp:Button ID="btbStart" runat="server"  Text="Click" onclick = "btnClick"/> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie mycook = Request.Cookies["mycookie"];
    if (mycook != null)
      Label1.Text = mycook.Values["test"].ToString();

}

protected void btnClick(object sender, EventArgs e)
{
  HttpCookie mycookie = new HttpCookie("test");
  mycookie.Value = "Hellworld";
  mycookie.Expires = DateTime.Now.AddDays(4);
  Response.Cookies.Add(mycookie);            
} 
```

我的问题是我使用的是 IE 9 并且未启用 cookie。如果我使用 F12（开发人员工具）查看 cookie 会话，它是空白的。

我使用 Fiddler，我看到“Set-Cookie”具有价值。但是，如果我在另一个浏览器中打开该页面，则不会检索到 cookie 值。它是空白的

我无法理解问题出在哪里。

谢谢

# java - 使用java从网页中提取HTML内容

> ID：11230900
> 
> 赞同：2
> 
> 时间：2012-06-27T16:27:30.083
> 
> 标签：java, html

我正在尝试使用 JAVA 提取网页的 HTML 内容。但问题是我试图加载的页面，如果用户向下滚动，它会继续扩展。所以我的代码只能提取页面第一次加载的任何内容。我如何提取通常在用户向下滚动时生成的 HTML 代码的剩余部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:29:35.063

打开 firebug 或 chrome 开发者工具。查看网络选项卡。当您向下滚动时，将进行 ajax 调用。请注意此网址和参数。您必须手动调用适当的 url（ajax url）并解析可能是也可能不是 html 的响应。

# linux - 如何获取 linux 文件修改历史记录，包括 who:group

> ID：11230905
> 
> 赞同：0
> 
> 时间：2012-06-27T16:27:56.573
> 
> 标签：linux

我想跟踪特定文件的修改历史。linux 是否有命令允许我获取一些详细信息，例如谁、何时、做了什么（访问、写入、执行）。

例如。

```
bob:adm read $timestamp 
alice:user write $timestamp 
```

我知道 stat 可以做一些，但它也可以告诉我谁/组修改了文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:33:59.713

大多数文件系统根本不跟踪这些数据。

[日志文件系统](http://en.wikipedia.org/wiki/Journaling_file_system)跟踪它们（至少是写操作），但通常只是最后一个。

如果没有非常特定的文件系统，您将不会拥有这些数据。

# java - 将 Apache Velocity 与自己的解释脚本语言一起使用

> ID：11230906
> 
> 赞同：0
> 
> 时间：2012-06-27T16:27:56.483
> 
> 标签：java, velocity, interpreted-language

在我的 Java 应用程序中，我使用了一种面向对象的解释脚本语言（使用 ANTLR 指定），并希望将其与 Velocity 一起使用。

我的语言中的对象由 DataObject 的实例表示，如下所示（简化）：

```
public class DataObject {
    protected Map<String, Object> properties;

    public Map<String, DataEntity> getProperties() {
        return properties;
    }

    public Object getProperty(String name) {
        return properties.get(name);
    }
} 
```

并且对象实例 $foo 的属性可以作为 $foo.bar 访问

现在假设我已将 $foo 放入 VelocityContext：

```
DataObject foo = new DataObject();
velocityContext.put("foo", foo); 
```

据我所知，我可以通过以下任何方式快速访问属性（位于 DataObject.properties 中）：

```
<span>$foo.getProperties().get('bar')</span>
<span>$foo.getProperties()['bar']</span>
<span>$foo.getProperties().bar</span>
<span>$foo.properties.bar</span> 
```

现在我的主要问题是：有没有办法改变行为，使得 $foo.bar 不会处理 Java 属性 dataObject.bar，而是直接处理 dataObject.properties.get("bar")，这样我就可以使用 $ Velociy 中的 foo.bar 就像我在自己的脚本语言中一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:24:07.317

你不能教 Velocity 这个技巧。但是你可以教 DataObject 诀窍：

```
public class DataObject {
    protected Map<String, Object> properties;

    public Map<String, DataEntity> getProperties() {
        return properties;
    }

    public Object get(String name) {
        return properties.get(name);
    }
} 
```

如果 Velocity 找不到 getBar() 或 getbar() 方法，它会自动在 $foo 中查找 get('bar')。

# c# - 优化此 LINQ 查询

> ID：11230909
> 
> 赞同：1
> 
> 时间：2012-06-27T16:28:14.770
> 
> 标签：c#, performance, linq

我遇到了这个 LINQ 查询的性能问题。数据已加载到 this.students 中。现在，当我调用 GetStudentData 函数说 1000 次时，它会产生巨大的开销。有没有办法在不将 LINQ 更改为循环的情况下改进这一点

```
 public Student GetStudentData()
   {         
          IEnumerable<Students> studentTypes = this.students.Where(x => (x.studentsId  == studentId && x.StduentType.Equals(studentType)));
          if(studentTypes.Count==0) return new Student() { studentid=studentID};
          return (Student)studentTypes.First();
   } 
```

所以这是使用我的原始版本循环 10000 次时的结果

原始版本：平均 5.6 秒新版本 @des 的代码`FirstOrDefault`：3.6 秒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T16:31:56.210

当您使用时，`Where`您遍历**所有**满足给定条件的记录，当您使用时，`First`您只需搜索满足条件的**第一**条记录，因此使用`First`应该加快速度。

```
public Student GetStudentData()
{         
    // get first student by id and type, return null if there is no such student
    var student = students.FirstOrDefault(i => i.studentsId == studentId && i.StudentType.Equals(studentType));

    // if student is null then return new student
    return student ?? new Student();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:35:45.120

好吧，问题恰恰在于您在循环中调用此方法，据说是 1000 次！

为什么不改变接收学生ID列表并一次性返回1000名学生的方法呢？就像是

```
var studentTypes = from c in this.students 
                   where studentIDs.Contains(c.StudentID)
                   select c; 
```

其中 studentIDs 可以是`int[]`包含您想要的学生 ID 的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:08:13.620

重构您的代码，使其`this.students`成为`Dictionary<int, Student>`(key is `StudentId`)，然后类似地重新实现您的方法：

```
public Student GetStudentData(int studentId, StudentType studentType) {
    Student result;
    if (this.students.TryGetValue(studentId, out result))
        if (result.StudentType.Equals(studentType)))
            return result;
    return new Student { StudentId = studentId };
} 
```

如果你绝对不能重构`this.students`，你总是可以*并行*维护字典。

`this.students.ToDictionary(student => student.StudentId)`或者，您可以在 1000 次迭代循环之前简单地创建一个临时字典 ( )。

# asp.net - 当集合提交回控制器时，获取未设置为对象实例的对象引用。错误

> ID：11230911
> 
> 赞同：2
> 
> 时间：2012-06-27T16:28:23.370
> 
> 标签：asp.net, asp.net-mvc-3

我正在更新多条记录，单击提交按钮后出现错误，这表明控制器收到 NULL 并在第 36 行报告以下错误 下面是我的控制器、视图和模型的代码。

> 你调用的对象是空的。描述：
> 
> 当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

```
 Source Error: 

    Line 34:         public ActionResult UpdateAll(ICollection<Test0> test0s)
    Line 35:         {
    Line 36:             foreach (var tst in test0s)
    Line 37:             {
    Line 38:                 if (ModelState.IsValid)

    Source File: c:\users\rsc_vok\documents\visual studio 2010\Projects\MvcTest0\MvcTest0\Controllers\Test0Controller.cs    Line: 36 
```

这是模型：

```
namespace MvcTest0.Models
{
    public class Test0
    {
        public int id { get; set; }
        public int SectnID { get; set; }
        public string Section { get; set; }
        public string Comment { get; set; }
    }

    public class Test0DBContext : DbContext
    {
        public DbSet<Test0> Test0s { get; set; }
    }
} 
```

这是我的控制器代码：

```
 public ActionResult UpdateAll(int id=0)
    {
        int sectnid = id;
        List<Test0> records = db.Test0s.ToList();
        var Sectnrecord = from r in records
                        where r.SectnID == sectnid
                        select r;

        return View(Sectnrecord.ToList());
    }

    [HttpPost]
    public ActionResult UpdateAll(ICollection<Test0> test0s)
    {
        foreach (var tst in test0s)
        {
            if (ModelState.IsValid)
            {
                db.Entry(tst).State = EntityState.Modified;
            }
        }
        db.SaveChanges();

        return View(test0s);
    } 
```

这是我的看法

```
 @model IEnumerable<MvcTest0.Models.Test0>

      @{
      ViewBag.Title = "UpdateAll";
     }

    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

   @using (Html.BeginForm())
   {
       @Html.ValidationSummary(true)

       var sectnHeader = new String[10];
       sectnHeader[0] = "A. QUALITY";
       sectnHeader[1] = "B. VR REFERRAL";
       var items = Model.ToArray();
       var sections = 1;
       for (var sectnLoop = 0; sectnLoop < sections; sectnLoop++)
       {
            <table>
                <tr>
                    <td>
                        <b>@(sectnHeader[sectnLoop])</b>
                    </td>
                </tr>  
            </table>
            <table>
                <tr>
                    <th>SectnID</th>
                    <th>Section</th>
                    <th>Comment</th>
                </tr>

            </table>
           for (var i = sectnLoop * 2; i < sectnLoop * 2 + 2; i++)
           {
               var sctnid = "sectnname" + i;
               @Html.HiddenFor(m => items[i].id)
               @Html.HiddenFor(m => items[i].SectnID)

               <table>
                  <tr>
                    <td>
                        @Html.DisplayFor(m => items[i].SectnID)
                    </td>
                    <td>
                        @Html.EditorFor(m => items[i].Section)
                        @Html.ValidationMessageFor(m => items[i].Section)
                    </td>
                    <td>
                        @Html.EditorFor(m => items[i].Comment)
                        @Html.ValidationMessageFor(m => items[i].Comment)
                    </td>
                 </tr>
                </table> 
           } 
       } 
        <p>
            <input type="submit" value="Save" />
        </p>
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:59:14.323

解决方案：

1.  您必须将视图模型更改为支持`.Add()`方法的集合类型：

    `@model List<MvcTest0.Models.Test0>`

2.  更改所有`@Html.___For()`助手，例如：

    ```
    @Html.HiddenFor(m => m[i].id)
    @Html.HiddenFor(m => m[i].SectnID)
    @Html.DisplayFor(m => m[i].SectnID)
    @Html.EditorFor(m => m[i].Section)
    @Html.ValidationMessageFor(m => m[i].Section)
    @Html.EditorFor(m => m[i].Comment)
    @Html.ValidationMessageFor(m => m[i].Comment) 
    ```

请注意，模型必须在回发中重新创建，并且 IEnumerable 没有向自身添加项目的方法，这与通用列表不同。

# wpf - WPF 应用程序创建 MsSql 数据库

> ID：11230914
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:28:31.067
> 
> 标签：wpf, database, sql-server-2008

我想知道如何创建 WPF 应用程序，创建 MsSql 数据库，查看现有数据库和表，创建数据库备份并恢复备份。如果有人知道这一点，请帮助我。我被我的项目困住了，这对我来说非常重要。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:36:55.220

我建议您查看 Microsoft 的[SQL Server Management Objects](http://msdn.microsoft.com/en-us/library/ms162169%28v=sql.105%29.aspx)以获取类似的内容。它提供了您在方便的 .NET 程序集中列出的所有功能。

# wordpress - Wordpress - 不显示页面内容 包装

> ID：11230919
> 
> 赞同：1
> 
> 时间：2012-06-27T16:28:51.347
> 
> 标签：wordpress, wordpress-theming

如何在没有包装器的情况下显示给定页面 ID 的内容`<p></p>`？

我目前使用的方法是：

```
<?php 
$id=21; 
$post = get_page($id); 
$content = apply_filters('the_content', $post->post_content); 
echo $content;  
?> 
```

例如`page ID = 21`有以下内容：`Some content`

wordpress 回声是什么`<p>Some content</p>`

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T18:04:00.483

如果您不希望周围的段落标签回显，只需通过添加 `<?php remove_filter ('the_content', 'wpautop'); ?>`到模板页面来删除过滤器。

# jquery - Jquery Jscrollpane 未正确重新初始化 - 底部被 slideToggle 截断

> ID：11230926
> 
> 赞同：2
> 
> 时间：2012-06-27T16:29:19.373
> 
> 标签：jquery, jscrollpane, slidetoggle, jquery-jscrollpane

我创建了一个错误模型：

[例子](http://www.differentum.com/test.html)

请忽略此页面的美丽！如果您向下滚动到底部结果：“28\. Diamond House”并单击“更多详细信息”，则会出现隐藏的选项卡结构，提供有关场地的更多详细信息。

您会注意到此选项卡的底部被切掉了。

如果您然后尝试单击“更多详细信息”，然后单击“隐藏详细信息”到有关它的地点（“27\. Old Rectory”），您会注意到此滚动窗格底部有一个巨大的空白。

我会认为 api.reinitialise() 会成功。花了整整 2 天的时间来尝试解决这个问题，但一直在碰砖墙。

如果有人可以看看告诉我我做错了什么，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:05:58.483

首先，您需要等待页面加载，因为那里有图像。如果您不这样做，jscrollpane 将无法访问 div 的真实原始高度。

然后使用 jScrollPane 中的 auto-reinit 选项。手动使用api的问题。重新初始化，是您必须在动画发生后调用它，这可能不太可靠并且可能表现为奇怪的行为。

[http://jsfiddle.net/zqEph/](http://jsfiddle.net/zqEph/)

**更新**

这里是 api.reinitalise() [http://jsfiddle.net/zqEph/1/](http://jsfiddle.net/zqEph/1/)

# css - 仅 CSS 文本子菜单（在精灵菜单下）仅在 chrome/safari 中未对齐

> ID：11230934
> 
> 赞同：3
> 
> 时间：2012-06-27T16:29:52.007
> 
> 标签：css, google-chrome, safari, webkit, submenu

我有一个工作精灵菜单，并想在其中一个项目下添加一个垂直子菜单。我让它在 ie 和 firefox 中完美运行，但是在 webkit 浏览器（chrome 和 safari）中，子菜单呈现在包含 li 的右边距的左侧，使菜单无法使用。我已经尝试了所有我能找到的 css 技巧来完成这项工作，包括覆盖 webkit -40padding，但我尝试过的一切对这些浏览器中的对齐没有任何影响。

[测试页面](http://www.comedyinhighdefinition.com/droptest.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:22:19.800

找到你的`#navigation > li { position:relative }`并删除`position:relative`

# jquery - 基于 HTML5/JavaScript 和 jQuery 的图表库之间的区别

> ID：11230941
> 
> 赞同：1
> 
> 时间：2012-06-27T16:30:08.270
> 
> 标签：jquery, html, canvas, highcharts

我对客户端 Web 开发还很陌生，所以请随意编辑我的问题，如果有什么没有多大意义的话。

关于基于 HTML5/JavaScript 和 jQuery 的图表库，让我以*RGraph*（命名为 HTML5/JavaScript 图表）和*HighCharts*（命名为 jQuery 框架下的 JavaScript 图表）为例。

*RGraph*使用标签来显示生成的图表，`<canvas>`如其文档中所示。然而*HighCharts*使用`<div>`标签作为他们图表的占位符。

我正在尝试像*RGraph那样将**HighCharts*放入`<canvas>`标签中（这对您来说可能听起来很奇怪......我不知道），图表将无法显示。反过来，如果我将*RGraph*图表作为*HighCharts*放入占位符，也会出现同样的问题。**`<div>`**

 ***我所看到的只是占位符，所有花哨的交互操作都被 JavaScript 关闭了。那么**为什么**会出现上述问题呢？我相信 RGraph 和 HighCharts 之间的一些配置差异可能是有原因的，但不知道那些是什么......

`<canvas>`在和`<div>`标签中渲染图表有什么区别？

~~~~~~~~~~~~~~~~~

以下是我的演示脚本：

将*RGraph*放入`<canvas>`，效果很好：

```
<!DOCTYPE html>
<html>
    <head>

        <script>
                Scripts go here 
        </script>

    </head>
    <body>

        <div>
            <h1>Basic RGraph Example</h1>
            <h2>Line Chart</h2>
            <canvas id="line" width="400" height="300"></canvas>
            <h2>Pie Chart</h2>
            <canvas id="pie" width="400" height="300"></canvas>
            <h2>Bar Chart</h2>
            <canvas id="bar" width="400" height="300"></canvas>

        </div>

    </body>
</html> 
```

`<div>`如果我将图表放入标签中则不起作用：

```
<!DOCTYPE html>
<html>
    <head>

        <script>
                Scripts go here 
        </script>

    </head>
    <body>

        <div>
            <h1>Basic RGraph Examples</h1>
            <h2>Pie Chart</h2>
            <div id="line" width="400" height="300"></div>
            <h2>Line Chart</h2>
            <div id="pie" width="400" height="300"></div>
            <h2>Bar Chart</h2>
            <div id="bar" width="400" height="300"></div>

        </div>

    </body>
</html> 
```

任何意见表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:48:29.180

`<div>`标签和标签并不是真正的`<canvas>`javascript 图表上的分界线。它真的是画布 vs SVG。RCharts 使用画布绘制图表。Highcharts 使用 SVG。Highcharts 只是使用 div 作为图表的容器。这允许用户指定图表将在 DOM 中绘制的位置。类似地，flot 和 jqplot（它们都使用画布来渲染它们的图）以相同的方式使用 div 标签。

所以现在你的问题变成了画布与 SVG 的绘图？[在此处](https://stackoverflow.com/questions/4996374/what-is-the-difference-between-svg-and-html5-canvas)和[此处](https://stackoverflow.com/questions/5882716/html5-canvas-vs-svg-vs-div)阅读有关内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:47:48.193

首先：`<canvas>`是对 HTML 标准的一个相对较新的补充，并不是所有浏览器或版本都普遍支持。但是，它可能是有效且可靠地显示此类信息的最佳选择。

至于使用其他标签时您的内容不显示的原因：

* * *

该`<canvas>`标签允许您指定后备内容。例如，以下代码段：

```
<canvas>Your browser does not support the canvas tag!</canvas> 
```

`Your browser does not support the canvas tag!`在**不**支持标签的浏览器上将显示为`<canvas>`，但在支持标签的浏览器上，将插入一个 300x150 的画布，并显示为透明框。

* * *

在相反的情况下，尝试使用传统的标签 like`<div>`和使用`canvas`-specific 操作 like`getContext()`不会做任何事情，甚至在未处理的情况下会引发错误。

这两个库都不太可能处理这些使用场景，并且要么静默失败，要么将大量调试信息注入您的控制台。

* * *

这两种方法的主要区别在于，渲染直接将像素/线条/文本绘制到“渲染上下文”中，并且出于多种原因，它是渲染此类数据`<canvas>`的更好替代方案。`<div>`然而，由于缺乏跨浏览器支持，人们通常会避免这种技术。

`<div>`另一方面，渲染会创建模拟数据可视化表示所需的所有形状和元素的 DOM 元素，这取决于数据的分辨率和图表的大小，这可能意味着对性能的影响可以忽略不计或显着浏览器兼容性的成本。

一种中间立场是使用像[excanvas](http://excanvas.sourceforge.net/)这样的 polyfill在大多数浏览器中提供画布支持，甚至是最新的 IE 版本。

但是，请参阅您的库的文档。如果您使用库进行渲染，它们可能已经实现了 polyfill，甚至在`<canvas>`元素中为不受支持的浏览器实现了回退内容。***

# android - 使用不同字符集编码的 Android http post 发送

> ID：11230942
> 
> 赞同：1
> 
> 时间：2012-06-27T16:30:08.107
> 
> 标签：android, rest, restlet, restlet-2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:35:34.933

您是否尝试在您的 上调用[setCharacterSet(...)](http://www.restlet.org/documentation/2.0/jse/api/org/restlet/representation/StringRepresentation.html#setCharacterSet%28org.restlet.data.CharacterSet%29)`StringRepresentation`？例如，

```
StringRepresentation sr = new StringRepresentation(form.toString());
sr.setCharacterSet(CharacterSet.UTF_8); 
```

# mysql - MySQL 中最近的行至少相隔 1 小时

> ID：11230947
> 
> 赞同：1
> 
> 时间：2012-06-27T16:30:24.750
> 
> 标签：mysql

我每五分钟收集一次数据并将其输入 MySQL 数据库。我想提取超过 2 小时的最近行，然后是超过 1 小时，然后是最近的行。

我正在考虑以下内容，但我认为这会让我每个小时的最后一行。这意味着如果我在 8:05 运行查询，我可能会从 6:57、7:57 和 8:02 返回行，其中最后两个相隔不到一个小时。

```
SELECT * 
FROM (
    SELECT * 
    FROM mytable 
    ORDER BY Date DESC 
    GROUP BY HOUR(Date) LIMIT 3
) x 
ORDER BY Date ASC 
```

感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:45:53.413

```
SELECT * FROM (
  SELECT * FROM mytable 
  WHERE `Date`<DATE_SUB(NOW(), INTERVAL 2 HOUR) 
  ORDER BY DATE DESC LIMIT 1
)
UNION
SELECT * FROM (
  SELECT * FROM mytable 
  WHERE `Date`<DATE_SUB(NOW(), INTERVAL 1 HOUR) 
  ORDER BY DATE DESC LIMIT 1
)
UNION
SELECT * FROM (
  SELECT * FROM mytable 
  ORDER BY DATE DESC LIMIT 1
)
ORDER BY `Date`ASC 
```

# jquery - element.style的jQuery高度

> ID：11230950
> 
> 赞同：5
> 
> 时间：2012-06-27T16:30:35.767
> 
> 标签：jquery, css

如何获得由 jQuery 设置的 DIV 的高度？
`$('.bar2').animate({'height':'58' + "%"},1500);`

当我检查 chrome 中的元素时，我看到我的 DIV 高度设置为 58%

`<div class="bar2" style="height: 58%; background-image: ......>`

我试过这个：

`var bar2 = $(".bar2").height(),`或者`var bar2 = $(".bar2").css('height'),`

但我总是得到我的“最小高度”，即 70px，而不是由 jQuery 设置的高度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T16:33:51.117

我想你会使用：

```
$(".bar2").outerHeight(); 
```

哪个是计算的高度或

```
$(".bar2").innerHeight(); 
```

如果您不需要考虑帐户保证金和填充等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T16:37:41.930

HTML：

```
<div style="width: 200px; height: 200px; background-color: blue;">
    <div class="bar2" style="min-height: 70px; width: 100px; background-color: red;">foo</div>
</div> 
```

JS：

```
jQuery('.bar2').animate({'height':'58' + "%"}, 1500, function() {
    alert($(".bar2").css('height'))
}); 
```

现场示例 - [http://jsfiddle.net/ANbrq/1/](http://jsfiddle.net/ANbrq/1/)

只有在实际更改时，您才能获得不同的高度。如果您在要求它调整大小后尝试使其正确，您将获得初始高度。

# ios - 可以用 UIAppearance 来设置 UINavigationItem 的 titleview 吗？

> ID：11230952
> 
> 赞同：10
> 
> 时间：2012-06-27T16:30:48.680
> 
> 标签：ios, uinavigationitem, uiappearance, titleview

我目前使用此代码来设置我的导航项的 titleView：

```
- (void)viewDidLoad 
{ ...
   UIImage *navbarTitle = [UIImage imageNamed:@"navbartitleview1"];
   UIImageView *imageView = [[UIImageView alloc]initWithImage:navbarTitle];
   self.navigationItem.titleView =imageView;
} 
```

有没有办法可以使用 UIAppearance 放置此代码？

```
[UINavigationItem appearance] 
```

无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:40:16.757

No you wan't be able to do that with `UIAppearence`, what you can is to have a `UIViewController` from where all the others UIViewController will inherit. Think way you avoid having to put that code in all your `UIViewControllers`.

# r - R：partimat 函数无法识别我的课程

> ID：11230953
> 
> 赞同：2
> 
> 时间：2012-06-27T16:30:49.917
> 
> 标签：r

我是一个相对新手的 r 用户，正在尝试使用 klaR 包中的 partimat() 函数来绘制决策边界以进行线性判别分析，但我一直遇到同样的错误。我已经尝试根据手册以多种不同的方式输入参数，但不断收到以下错误：

partimat.default(x, grouping, ...) 中的错误：至少需要两个类

这是我给出的输入示例：

> partimat(sources1[,c(3:19)],grouping=sources1[,2],method="lda",prec=100)

其中我的数据表以名称“sources1”加载，第 3 到 19 列包含解释变量，第 2 列包含类。我也试过通过输入公式来做到这一点：

> partimat(sources1$group~sources1$tio2+sources1$v+sources1$cr+sources1$co+sources1$ni+sources1$rb+sources1$sr+sources1$y+sources1$zr+sources1$nb+sources1$la+ sources1$gd+sources1$yb+sources1$hf+sources1$ta+sources1$th+sources1$u,data=sources1)

这些是列标题。

我已经成功地在同一个数据集上运行了 LDA，没有问题，所以我不太确定出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:07:56.530

从 partimat.default 函数的源代码中可以`getAnywhere(partimat.default)`看出

```
if (nlevels(grouping) < 2) 
    stop("at least two classes required") 
```

因此，您可能尚未将分组列定义为因子变量。如果你尝试`summary(sources1[,2])`你会得到什么？如果这不是一个因素，请尝试

```
sources1[,2] <- as.factor(sources1[,2]) 
```

`"sources1$"`或者在方法 2中，当您指定要在参数中查找这些变量名称的数据框时，尝试在公式中删除每个变量名称上的`data`。我认为您有效地指定了数据框两次，例如，它可能正在寻找

```
"sources1$sources1$groups" 
```

而不是

```
"sources1$groups" 
```

如果没有进一步的错误消息或可重现的示例（即在您的帖子中包含一些数据），真的很难说。

高温高压

# java - JAX-RS Jackson Json 提供者日期格式问题

> ID：11230954
> 
> 赞同：6
> 
> 时间：2012-06-27T16:30:53.660
> 
> 标签：java, json, jax-rs, jackson, resteasy

WRT到以下问题：

[Jersey + Jackson JSON 日期格式序列化 - 如何更改格式或使用自定义 JacksonJsonProvider](https://stackoverflow.com/questions/4428109/jersey-jackson-json-date-serialization-format-problem-how-to-change-the-form)。

我想知道

*   Jackson 是否指定 json 日期格式应标准化为 unix 时间整数？

后续问题...

*   最近的任何时候，它的立场是否发生了变化？
*   不应该将日期格式标准化为 jaxb xml 输出提供的相同格式吗？
*   为什么/为什么不？
*   为解决这个问题付出了多少努力？
*   RestEasy 是否提供了一个 json 提供程序缓解措施，以通常可识别的日期格式输出 json 日期？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T19:28:42.617

对不起人们大声喊叫 - 我在这里找到了答案

[http://wiki.fasterxml.com/JacksonFAQDateHandling](http://wiki.fasterxml.com/JacksonFAQDateHandling) ,

这里

[http://wiki.fasterxml.com/JacksonFAQ#Serializing_Dates](http://wiki.fasterxml.com/JacksonFAQ#Serializing_Dates)，

这里

[http://wiki.fasterxml.com/JacksonHowToCustomSerializers](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)

这里

[http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/map/util/StdDateFormat.html](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/map/util/StdDateFormat.html)

使用 @JsonSerialize(using= ... ) 方式：

```
public class JsonStdDateSerializer
extends JsonSerializer<Date> {
  private static final DateFormat iso8601Format =
    StdDateFormat.getBlueprintISO8601Format();

  @Override
  public void serialize(
    Date date, JsonGenerator jgen, SerializerProvider provider)
  throws IOException, JsonProcessingException {

    // clone because DateFormat is not thread-safe
    DateFormat myformat = (DateFormat) iso8601Format.clone();
    String formattedDate = myformat.format(date);
    jgen.writeString(formattedDate);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T18:45:19.777

这也由 ObjectMapper 上的一个功能控制（至少在 1.9.11 中，可能更早）：

```
ObjectMapper om = new ObjectMapper();
om.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS, false);
om.writer().writeValue(System.out, objectWithDateProperty); 
```

我看不到如何以声明方式对对象定义本身进行等效操作。

# python - Scikit-Learn的SVM类中的nu参数是什么意思？

> ID：11230955
> 
> 赞同：29
> 
> 时间：2012-06-27T16:30:55.160
> 
> 标签：python, machine-learning, scikit-learn

我遵循[http://scikit-learn.org/stable/auto_examples/svm/plot_oneclass.html#example-svm-plot-oneclass-py](http://scikit-learn.org/stable/auto_examples/svm/plot_oneclass.html#example-svm-plot-oneclass-py)中显示的示例，其中一类 SVM 用于异常检测。现在，这可能是 scikit-learn 独有的符号，但我找不到如何使用赋予 OneClassSVM 构造函数的参数 nu 的解释。

在[http://scikit-learn.org/stable/modules/svm.html#nusvc](http://scikit-learn.org/stable/modules/svm.html#nusvc)中，声明参数 nu 是参数 C 的重新参数化（这是我熟悉的正则化参数） - 但没有't 说明如何执行重新参数化。

公式和直觉都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-24T13:27:51.130

## C的问题和nu的引入

参数 C 的问题是：

1.  它可以取任何正值
2.  它没有直接的解释。

因此很难正确选择，必须求助于交叉验证或直接实验来找到合适的值。

作为回应 Schölkopf 等人。重新构造 SVM 以采用新的正则化参数 nu。这个参数是：

1.  介于 0 和 1 之间
2.  有直接的解释

## nu的解释

参数 nu 是边际误差分数的上限，也是支持向量相对于训练样本总数的分数的下限。例如，如果您将其设置为 0.05，则可以保证最多 5% 的训练示例被错误分类（尽管代价很小），并且至少 5% 的训练示例是支持向量。

## C和nu的关系

C 和 nu 之间的关系由以下公式控制：

`nu = A+B/C`

A 和 B 是常数，不幸的是，它们并不那么容易计算。

## 结论

外卖信息是 C 和 nu SVM 在分类能力方面是等价的。与 C 相比，nu 方面的正则化更容易解释，但 nu SVM 通常更难优化，并且运行时不会像具有输入样本数量的 C 变体那样扩展。

更多细节（包括 A 和 B 的公式）可以在这里找到：[Chang CC, Lin CJ - “训练 nu-support vector classifiers: theory and algorithms”](http://ntur.lib.ntu.edu.tw/bitstream/246246/155217/1/09.pdf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-03T20:37:07.580

支持向量中的 nu 是一个**超参数**。

在 c-SVM 中，如果我们想查询一个点 x [q]那么

**∑α<sub>iy [i] .x [i] ^T .x [q] +b for i=1 to n**

**正如我们所知，对于大于零的支持向量和非支持向量 α [i] [=] 0。**

所以**只有支持向量对计算 f(x [q] )**很重要，但是在**常规 C-SVM 中，我们无法控制支持向量的数量**，所以这里出现了 nu-SVM

怒：

1.  **错误数量的上限**

2.  **支持向量数量的下限**

    nu 始终**介于 0<= nu <= 1 之间。**

假设nu **=0.1 和 n=10,000**

1.**我们最多需要 10% 的错误**=> 1000 个错误点
2.**我们得到支持向量 >= 1%** => 我们得到超过 1000 个支持向量。

# php - 如何在 php 中接受 XML 发布请求？

> ID：11230956
> 
> 赞同：0
> 
> 时间：2012-06-27T16:30:56.370
> 
> 标签：php, xml, request

对于 android 应用程序，需要将数据作为 xml 请求发布到 php 文件。php端如何读取XML请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:32:04.377

使用[php://input](http://php.net/wrappers.php)并[`file_get_contents()`](http://us2.php.net/manual/en/function.file-get-contents.php)获取原始输入。

```
$content = file_get_contents('php://input'); 
```

# r - 替代打印和猫

> ID：11230957
> 
> 赞同：5
> 
> 时间：2012-06-27T16:30:58.090
> 
> 标签：r

有一点心理障碍。我确信我找到了一个在`for`not`print`和 not循环中打印迭代数的函数`cat`，但给出的输出与下面的 cat 相同。

```
> for(i in 10^(1:5))  print(i)
[1] 10
[1] 100
[1] 1000
[1] 10000
[1] 1e+05
> for(i in 10^(1:5))  cat(i, "\n")
10 
100 
1000 
10000 
1e+05 
```

我在 print 和 cat 的 R 帮助文件中看不到对它的任何引用。尝试用谷歌搜索它，但没有得到任何地方。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T16:44:37.883

定义一个包装函数很容易`cat`：

```
catn <- function(x, append="\n"){cat(x); cat(append)} 
```

用它：

```
for(i in 10^(1:5))  catn(i)
10
100
1000
10000
1e+05 
```

或者您可以使用`message`（在某些代码编辑器（例如 Eclipse）中，消息以不同颜色显示的额外好处是）：

```
for(i in 10^(1:5))  message(i)
10
100
1000
10000
1e+05 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:45:35.730

原来`write`也可以写入标准输出，如果`file == ""`：

```
> for (i in 10^(1:5)) write(i, "")
10
100
1000
10000
1e+05 
```

虽然的默认值`file`是`"data"`。

（我也在寻找这个失踪的运营商很长一段时间：D）

# objective-c - 在 Objective C 中使用 CouchDB 设置 post/get 请求的简单语法

> ID：11230960
> 
> 赞同：-1
> 
> 时间：2012-06-27T16:31:03.520
> 
> 标签：objective-c, ios, post, couchdb

我无法在 Objective C 中为 CouchDB 设置发布/获取请求。有人会这么好心地引导我完成这些步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:53:40.980

[此入门指南](http://wiki.apache.org/couchdb/Getting_started_with_Objective-C)位于 CouchDB 的 wiki 文档中。我无法评价这个特定指南的质量，但我使用的语言指南是很好的起点。

# c# - Web 服务中的数据持久性？

> ID：11230961
> 
> 赞同：2
> 
> 时间：2012-06-27T16:31:04.010
> 
> 标签：c#, .net, web-services

.NET Web 服务中数据持久性的解决方案是什么？

我有一个网络服务。我给我的网络服务一个 id 并且这个返回正确的对象。

```
 [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetMyObject?id={id}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        MyObject GetMyObject(string id); 
```

我不想使用数据库。我想将我的对象集合保存在“内存”中。所以我决定像这样在我的网络服务中创建一个简单的对象

```
 public class Service : IService
    {
        List<MyObject> list = new List<MyObjec>();

        public Service()
        {
            list.Add(new MyObject() { Id = 1, Data = ...} );
            list.Add(new MyObject() { Id = 2, Data = ...} );
            list.Add(new MyObject() { Id = 3, Data = ...} );
            list.Add(new MyObject() { Id = 4, Data = ...} )
            ...
        }

        public MyObject GetMyObject(string id)
        {
            // code to get my object from the list
            return myObject;
        }
} 
```

它可以工作，但每次我调用我的 web 服务时都会调用构造函数，我想初始化这个列表一次并稍后对其进行修改。我应该如何初始化我的列表并保留它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T16:33:40.733

您可以使用静态集合：

```
private static List<MyObject> list = new List<MyObjec>(); 
```

当然，由于这是一个多线程应用程序，您可能可以同时访问此集合，因此您必须确保同步对它的访问。或者，如果您使用的是 .NET 4.0，只需使用线程安全`ConcurrentBag<T>`：

```
private static ConcurrentBag<MyObject> list = new ConcurrentBag<MyObjec>(); 
```

当然，您应该非常清楚，通过使用内存结构来存储数据，您的数据生命基本上与 Web 应用程序的生命相关。而且由于 IIS 可以随时回收应用程序域（一段时间的不活动，达到特定的 CPU/内存阈值），您存储到内存中的所有内容都将变为无效。

顺便说一句，如果你走这条路，请准备好经常发生这种情况，每次重新编译 Web 服务时，因为通过重新编译，你基本上是在修改 bin 文件夹中的程序集，而 Web 服务器将简单地回收应用程序。

所以是的，所有这些文字墙都告诉您将数据保存在内存中以外的其他地方:-) 您有很多可能性，从不同格式的文件、数据库、嵌入式数据库......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T16:36:18.327

或者，您可以将您的服务设为单例

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single,
                 ConcurrencyMode = ConcurrencyMode.Single)]
class Service
... 
```

然而，这种方法在未来会导致巨大的问题。不要在内存中存储任何内容。如果这样做，则将状态嵌入到应用程序中。这导致实现高可靠性和可扩展性所需的大量工作。没有状态，没有痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:36:24.723

WCF 已内置[实例管理](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)。

# c# - 跨线程编组事件

> ID：11230965
> 
> 赞同：1
> 
> 时间：2012-06-27T16:31:23.947
> 
> 标签：c#, .net, multithreading, marshalling

我想这可能会被标记为重复和封闭，但我一生都找不到这个问题的清晰、简洁的答案。所有的回复和资源几乎都专门处理 Windows 窗体并利用预构建的实用程序类，例如 BackgroundWorker。我非常想了解这个概念的核心，这样我就可以将基础知识应用到其他线程实现中。

我想要实现的一个简单示例：

```
//timer running on a seperate thread and raising events at set intervals
//incomplete, but functional, except for the cross-thread event raising
class Timer
{
    //how often the Alarm event is raised
    float _alarmInterval;
    //stopwatch to keep time
    Stopwatch _stopwatch;
    //this Thread used to repeatedly check for events to raise
    Thread _timerThread;
    //used to pause the timer
    bool _paused;
    //used to determine Alarm event raises
    float _timeOfLastAlarm = 0;

    //this is the event I want to raise on the Main Thread
    public event EventHandler Alarm;

    //Constructor
    public Timer(float alarmInterval)
    {
        _alarmInterval = alarmInterval;
        _stopwatch = new Stopwatch();
        _timerThread = new Thread(new ThreadStart(Initiate));
    }

    //toggles the Timer
    //do I need to marshall this data back and forth as well? or is the
    //_paused boolean in a shared data pool that both threads can access?
    public void Pause()
    {
        _paused = (!_paused);            
    }

    //little Helper to start the Stopwatch and loop over the Main method
    void Initiate()
    {
        _stopwatch.Start();
        while (true) Main();    
    }

    //checks for Alarm events
    void Main()
    {
        if (_paused && _stopwatch.IsRunning) _stopwatch.Stop();
        if (!_paused && !_stopwatch.IsRunning) _stopwatch.Start();
        if (_stopwatch.Elapsed.TotalSeconds > _timeOfLastAlarm)
        {
            _timeOfLastAlarm = _stopwatch.Elapsed.Seconds;
            RaiseAlarm();
        }
    }
} 
```

这里有两个问题；主要是，我如何将事件发送到主线程以提醒有关方警报事件。

其次，关于 Pause() 方法，该方法将由运行在主线程上的对象调用；我可以通过调用 _stopwatch.start()/_stopwatch.stop() 直接操作在后台线程上创建的秒表吗？如果没有，主线程是否可以如上所示调整 _paused 布尔值，以便后台线程可以看到 _paused 的新值并使用它？

我发誓，我已经完成了我的研究，但是这些（基本的和关键的）细节还没有让我清楚。

免责声明：我知道有可用的类将提供我在 Timer 类中描述的确切特定功能。（事实上​​，我相信这个类就是这样命名的，Threading.Timer）但是，我的问题不是试图帮助我实现 Timer 类本身，而是理解如何执行驱动它的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:35:03.267

您不能在现有线程上神奇地执行代码。
相反，您需要现有线程显式执行您的代码，使用线程安全的数据结构来告诉它要做什么。

这就是`Control.Invoke`工作方式（这反过来又是`BackgroundWorker`工作方式）。
WiinForms 运行一个消息循环，`Application.Run()`其中大致如下所示：

```
while(true) {
    var message = GetMessage();  //Windows API call
    ProcessMessage(message);
} 
```

`Control.Invoke()`发送一条 Windows 消息（使用 Windows 中的线程安全消息传递代码）告诉它运行您的委托。 `ProcessMessage`（在 UI 线程上执行）将捕获该消息并执行委托。

如果您想自己执行此操作，则需要编写自己的循环。为此，您可以使用 .Net 4.0 中新的线程安全生产者-消费者集合，或者您可以使用委托字段（带有`Interlocked.CompareExchange`）和 an`AutoResetEvent`并自己做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T17:47:21.017

注意：我在这里写这个是因为评论没有足够的空间，这当然不是一个完整的答案，也不是一个完整的答案：

> 我一直使用事件来表示不相关的代码来做某事，所以这就是我描述我的意图的方式。不过请原谅我，我不确定我是否看到了编组和事件与编组另一种类型的数据（信号）之间的区别。

从概念上讲，两者都可以视为事件。使用提供的同步/信号对象和尝试自己实现类似的东西之间的区别在于谁以及如何完成工作。

.net 中的事件只是一个委托，一个指向在事件提供者触发它时应该执行的方法的指针列表。如果我理解正确的话，您所说的（编组事件）是在发生某些事情*时*共享事件对象，而 signalig 的概念通常谈论一个*开始*共享的对象，并且两个线程都“知道”发生了一些事情通过手动或自动检查其状态（依赖于 .net 和 windows 提供的工具）。

在最基本的场景中，你可以通过一个`boolean`变量来实现这样一个信令概念，一个线程不断循环检查`boolean`是真实的，而另一种设置是这样的，作为一种信号发生的方式。.NET 提供的不同信号工具以更少资源浪费的方式做到这一点，只要没有信号（布尔值等于 false），也不执行等待线程，但从概念上讲，这是相同的想法。

# ms-access - VBA 详细快捷菜单

> ID：11230966
> 
> 赞同：2
> 
> 时间：2012-06-27T16:31:24.207
> 
> 标签：ms-access, vba, menu, ms-access-2010

我正在更新一些旧的 VBA 代码以使用 Access 2010。我们遇到的一个问题是右键单击时没有出现快捷菜单，因此我们创建了一个快捷菜单并将其绑定到 Application 对象，如下所示...

```
Application.ShortcutMenuBar = "GeneralClipboardMenu" 
```

一般来说，如果您右键单击“详细信息”窗格中的列“我们将其用作 excel 网格”，则不会出现菜单。这方面对我们的应用程序的使用至关重要，因此我们不能忽略它。

代码中的任何地方都没有禁用快捷菜单。此外，我意识到快捷菜单正在被 2010 Office 套装中的功能区所取代，但右键单击是我们理想情况下希望保留的基本功能。

任何帮助将不胜感激。这是创建快捷菜单的代码，以防万一。

```
Sub CreateSimpleShortcutMenu()
  On Error Resume Next 'If menu with same name exists delete
  CommandBars("GeneralClipboardMenu").Delete
  Dim cmb As CommandBar
  Set cmb = CommandBars.Add("GeneralClipboardMenu", msoBarPopup, False, False)
      With cmb
          .Controls.Add msoControlButton, 21, , , True   ' Cut
          .Controls.Add msoControlButton, 19, , , True   ' Copy
          .Controls.Add msoControlButton, 22, , , True   ' Paste
          .Controls.Add msoControlButton, 4016, , , True 'Sort Ascending
          .Controls.Add msoControlButton, 4017, , , True 'Sort Decending
      End With
  Set cmb = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:10:14.743

实际上，我发现了一个令人满意的解决方法。我们需要能够右键单击列的唯一原因是为了排序。当您右键单击一个单元格时，使用我最初拥有的代码，排序选项显示为灰色。然而，排序命令似乎有几个 id，它们都有不同的功能。

[http://support.microsoft.com/kb/159466](http://support.microsoft.com/kb/159466)

上面的链接有一个可用 id 的快捷菜单列表。

我相当肯定没有办法在 2010 详细信息窗格中为整个列添加右键单击功能。我没有在任何地方禁用菜单，我通过搜索任何能够执行此操作的命令以及三重检查我的属性来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:17:12.983

我相信应用程序范围的快捷菜单栏是 DAO 数据库属性。您可以在 GUI 中的 Access Options > Current Database > Ribbon and Toolbar Options 下更改它。

您也可以使用以下代码更改它：

```
UpdateCustomProperty("StartupShortcutMenuBar", "NameOfMyCustomShortcutMenuBar")

Private Function CreateCustomProperty(ByVal sPropertyName As String, _
                                        ByVal sPropertyValue As String)
    On Error Resume Next

    If sPropertyName <> "" And sPropertyValue <> "" Then
        Dim p1 As DAO.Property
        Set p1 = CurrentDb.CreateProperty(sPropertyName, DB_TEXT, sPropertyValue)
        CurrentDb.Properties.Append p1
        Set p1 = Nothing
    End If

End Function

Public Function UpdateCustomProperty(ByVal sPropertyName As String, _
                                    ByVal sPropertyValue As String)
    On Error Resume Next

    If sPropertyName <> "" And sPropertyValue <> "" Then
        CurrentDb.Properties(sPropertyName) = sPropertyValue
        If Err.Number = 3270 Then
            Err.Clear
            Call CreateCustomProperty(sPropertyName, sPropertyValue)
        End If
    End If
    Err.Clear
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T18:02:42.997

一种可能性是快捷菜单在表单属性中设置为“否”。您可以通过在设计视图中查看表单，然后查看表单属性并检查“快捷菜单”设置来访问这些内容。它应该设置为“是”。

# c++ - 哪些算法可以用作印度语脚本的拼写检查器

> ID：11230968
> 
> 赞同：4
> 
> 时间：2012-06-27T16:31:25.050
> 
> 标签：c++, algorithm, ocr

我已经为僧伽罗语（斯里兰卡语言）建立了光学字符识别。我在某种程度上取得了成功。现在我需要做的是使用字典数据进行后处理。

将拼写错误的单词变成正确单词的最佳方法是什么？任何人都可以提供建议吗？

我有 unicode 格式的字典数据文件，我的 OCR 输出也是一个 unicode 文件。我正在使用 C++ 执行此操作。到目前为止，我已经尝试过字符串匹配算法，但没有成功。我想开始解决这个问题的最相关的方法。任何人都可以帮助我吗？

提前致谢。

# android - 如何从 andengine 项目中获取 libgdx 视图

> ID：11230973
> 
> 赞同：1
> 
> 时间：2012-06-27T16:31:34.677
> 
> 标签：android, libgdx, andengine

我想从 andengine 项目初始化 libgdx 视图并将此视图添加到包含 andengine 视图的布局中。

如何从 andengine 项目初始化 libgdx 视图？

AndengineMainActivity 扩展 BaseGameActivity 和 LibgdxMainActivity 扩展 AndroidApplication。

# android - 使用 opencv 进行图像分类

> ID：11230974
> 
> 赞同：1
> 
> 时间：2012-06-27T16:31:37.060
> 
> 标签：android, opencv, classification

我们目前正在使用 opencv 开发一个 android ocr 应用程序。预处理、分割、特征提取步骤已完成。分类是剩下的步骤，我们被卡住了..我们正在使用一个填充了每个字母特征的 DB 表..首先我们每个字母只有一个特征，我们使用了欧几里德距离，但结果不准确等等需要获得特征，所以我们做到了。现在的问题是我们每个字母有 7 个特征，并且完全不知道如何根据它们对 i/p 进行分类。有些人建议使用 knn，但我们不知道如何并且该部分中的opencv文档不清楚..所以如果有人可以帮助它，那就太好了。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:38:08.240

简单地说，不讨论细节。向量空间在这里派上用场。您需要为 `<feature1, feature2, feature3.. featureN>`训练集中的每个实例构建一个特征向量。您可以从这些图像中的每一个中提取您认为或在研究文章中阅读的特征，这些特征对于图像分类很重要。例如，你可以做质心、高斯模糊、直方图等。一旦你有了这些值，线性代数就会与一些分类算法一起发挥作用：你在训练集上运行的 knn、svm、朴素贝叶斯等，那就是你建立你的模型. 如果模型准备好，您可以在测试集上运行它。使用交叉验证以获得更全面的结果。有关更多详细信息，请查看课程说明： http: [//www.inf.ed.ac.uk/teaching/courses/iaml/slides/knn-2x2.pdf](http://www.inf.ed.ac.uk/teaching/courses/iaml/slides/knn-2x2.pdf) 或 [http://www.inf.ed.ac.uk/teaching/courses/inf2b/lectureSchedule.html](http://www.inf.ed.ac.uk/teaching/courses/inf2b/lectureSchedule.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:28:19.073

想补充一点，OpenCV 可能没有您可能喜欢的分类器。

那里有几个库，尽管您可能必须看看在移动平台上哪个库效果最好。您能否详细说明您正在使用的功能？

最简单的 KNN（k-最近邻）度量是在输入样本的特征和 DB 表中的每个向量之间找到 n 维的欧几里得距离（对于 n 维特征向量）。如果您有多个类并且输入图像将被归类为这样的图像“类型”或“类”，还可以探索马氏距离（用于测量点和数据集/类之间的距离）。

正如@matcheek 所提到的，使用机器学习技术（例如 SVM、神经网络等）可以实现更复杂的操作。但是首先您可能会考虑像 kNN 这样更简单的东西，因为它是一个可能限制计算复杂性的移动平台。

# ruby-on-rails - 在 bundle exec 上下文中以非 root 身份开始精简

> ID：11230976
> 
> 赞同：1
> 
> 时间：2012-06-27T16:31:38.993
> 
> 标签：ruby-on-rails, bundler, thin

我需要启动瘦 aus 用户 - 而不是 root 用户。所以我改变了整个环境以在用户模式下运行服务器。问题是，我想为不同的应用程序启动不同的薄。但我喜欢使用 bundle exec 而不是 gemsets - 因为我不想在更新应用程序时一直更新 gemsets。

那么如何更改 init.d - 脚本以在 bundler 环境中开始精简？

我试过这个：

```
su - rubyuser -c "bundle exec /var/www/myapp/deploy/shared/bundle/ruby/1.9.1/bin/thin start -C /etc/thin/myapp.yml" 
```

但它最终出现“无法找到 Gemfile”

# objective-c - 枚举时发生突变的数组

> ID：11230977
> 
> 赞同：0
> 
> 时间：2012-06-27T16:31:39.817
> 
> 标签：objective-c, nsmutablearray

我得到的错误是

```
Terminating app due to uncaught exception 'NSGenericException', reason: '*** Collection <CALayerArray: 0x7c85080> was mutated while being enumerated.' 
```

我从中了解到的`NSGenericException`是，我在枚举时从数组中删除了一些东西。仍然知道这一点并环顾四周，我似乎无法解决我的问题。这是下面的代码。

```
-(void)tableView(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
     //Checks if message has been read. If message has not it updates the unreadMessages array
     if ([unreadMessage containsObject:[NSString stringWithFormat:@"m%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]] == TRUE && [[[storage_array objectAtIndex:indexPath.row] objectForKey:@"itemtype"] isEqualToString:@"message"]  == TRUE){

     //Unread
     [unreadMessage removeObject:[NSString stringWithFormat:@"m%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]];
     [unreadMessage writeToFile:[self saveUnreadMessages] atomically:YES];
     //Read
     [readMessage addObject:[NSString stringWithFormat:@"m%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]];
     [readMessage writeToFile:[self saveReadMessages] atomically:YES];
     [tableView reloadData];
 }
 else if ([unreadNewsletter containsObject:[NSString stringWithFormat:@"n%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]] == TRUE && [[[storage_array objectAtIndex:indexPath.row] objectForKey:@"itemtype"] isEqualToString:@"newsletter"]  == TRUE){

     //Unread
     [unreadNewsletter removeObject:[NSString stringWithFormat:@"n%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]];
     [unreadNewsletter writeToFile:[self saveUnreadNewsletters] atomically:YES];
     //Read
     [readNewsletter addObject:[NSString stringWithFormat:@"n%@",[[storage_array objectAtIndex:indexPath.row] objectForKey:@"id"]]];
     [readNewsletter writeToFile:[self saveReadNewsletters] atomically:YES];
     [tableView reloadData];
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T16:46:47.620

您不应该修改您正在迭代的数组。如果您打算这样做，您应该遍历它的副本：

```
for (id item in [array copy])
{
    …
} 
```

（有 ARC。`[[array copy] autorelease]`没有 ARC。）

如果需要，您可以在对其进行任何操作之前检查该项目是否仍在可变数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:58:50.803

或者，您可以在迭代原始可变数组时构建需要删除的对象的新 NSMutableArray ，然后在循环完成后调用

```
[originalMutableArray removeObjects:newArrayContainingObjectsNeedingToBeRemoved]; 
```

# python - 如何在 Pycharm 中运行使用 django 模型（大代码块）的文件

> ID：11230979
> 
> 赞同：1
> 
> 时间：2012-06-27T16:31:42.417
> 
> 标签：python, django, pycharm

所以我有一段代码声明一些类，创建数据，使用 django 将它们实际保存到数据库中。我的问题是我如何实际执行它？

我正在使用 PyCharm 并打开文件。但我不知道如何实际执行它。我可以在 Django 控制台中逐行执行，但如果它不止于此，它就无法处理缩进。

项目本身运行良好（127.0.0.1 加载我的页面）。我怎样才能做到这一点？

如果这是一个完全明显的答案，我很抱歉，我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T16:35:56.487

如果您的站点加载，您应该将模型导入到您的 Django 视图之一中。在视图中，您可以对模型做任何您喜欢的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T16:47:05.283

这个名为的[片段](http://djangosnippets.org/snippets/877/)`Command Line Script Launcher`可能会对您有所帮助，

> 此代码段允许您从命令行使用给定项目的上下文执行任意 Python 脚本：
> 
> python manage.py execfile /path/to/some/script.py

Django 的文档告诉你如何[扩展 manage.py 命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T17:44:47.780

您可以右键单击 pycharm 中的任何 python 文件并运行它，虽然执行的是自包含的脚本文件，但您可能需要添加主要技巧：

```
if __name__ == "__main__":
   do_stuff() 
```

# android - Phonegap 的启动画面和图标的综合列表

> ID：11230986
> 
> 赞同：1
> 
> 时间：2012-06-27T16:32:06.957
> 
> 标签：android, ios, cordova, splash-screen

我正在构建一个 Phonegap 应用程序，我想在尽可能多的平台上发布它。

我在 phonegap 网站上找到了一些关于图标和闪屏的文档。

[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

[http://wiki.phonegap.com/w/page/36905973/Icons%20and%20Splash%20Screens](http://wiki.phonegap.com/w/page/36905973/Icons%20and%20Splash%20Screens)

但是找不到想要为 IOS（包括 iPad3）、Android、黑莓和 Windows 手机上的所有设备发布的人的完整列表。

有人可以在所有支持 Phonegap 的操作系统上发布所有设备的图标大小和启动屏幕尺寸的完整列表吗？

*编辑：*

*还包括必须在 config.xml 中附加的任何数据或特定名称。*

*例如差距：平台=“ios”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:17:33.177

[https://github.com/phonegap/phonegap/wiki/App-Icon-Sizes](https://github.com/phonegap/phonegap/wiki/App-Icon-Sizes)

我发现这个链接有一些尺寸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-09T07:28:55.513

嗨，请在 Iphone6 或以上找到尺寸

```
 <icon src="res/icons/ios/Icon-83.5@2x.png" width="167" height="167" />
  iPad and iPad mini
  <icon src="res/icons/ios/Icon-76@2x.png" width="152" height="152" />
  iPhone 6s, iPhone 6, iPhone 5, iPhone 4s
  <icon src="res/icons/ios/Icon-60@2x.png" width="120" height="120" />
  iOS 6
  <icon src="res/icons/ios/icon@2x.png" width="114" height="114" />
  iPad 2 and iPad mini
  <icon src="res/icons/ios/Icon-76.png" width="76" height="76" />
   Spotlight search 
  <icon src="res/icons/ios/Icon-60.png" width="60" height="60" />
  iOS6 
  <icon src="res/icons/ios/icon.png" width="57" height="57" /> 
```

# jquery - 为什么谷歌地图似乎对他们的“你好，世界！”过敏 地图被放入 HTML Boilerplate 3 及其 jQuery 中？

> ID：11230997
> 
> 赞同：0
> 
> 时间：2012-06-27T16:32:53.540
> 
> 标签：jquery, google-maps, google-maps-api-3, boilerplate

我对使用其 HTML 导入到 Boilerplate 3 的 Google 地图进行了相当简单的改编。我需要激活密钥吗？（如果我这样做了，我希望得到某种形式的信息更丰富的错误消息。）我的代码出现空白屏幕；代码是：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/style.css">

  <script src="js/libs/modernizr-2.5.3.min.js"></script>
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map_canvas { height: 100%, width: 100% }
  </style>
</head>
<body>
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <header>

  </header>
  <div role="main">

    <div id="map_canvas">
    </div>

  </div>
  <footer>

  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

<script>

function initialize()
    {
    var myoptions = {
        zoom: 4,
        center: new google.maps.LatLng(42.881944, -87.627778),
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var map = new google.maps.Map(jQuery('#map_canvas')[0],
    myoptions);

    }

function load_script()
    {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.google.com/maps/api/js?key=AIzaSyAi288X8h9Y4fXM21Q0-my6O6kiLaDeC7M&sensor=false&callback=initialize";
    document.body.appendChild(script);
    }

jQuery(function()
    {
    initialize();
    load_script();
    });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:56:09.243

我不知道 Boilerplate 做了什么，所以我对发布的源代码做了尽可能少的更改：

(1) 在#map_canvas 样式中，后面的逗号改为分号`height: 100%`

（2）div`role="main"`也需要`height: 100%`，所以我给了它一个id`wrapper`并添加了一个合适的样式

(3) jQuery include 应该`http:`在 URL 前面有

(4)`initialize`最终`jQuery`函数调用内部的调用是不必要的，因为脚本包含在`load_script`has 中`callback=initialize`。无论如何，在包含地图 JS 之前调用地图代码是行不通的。

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/style.css">

  <script src="js/libs/modernizr-2.5.3.min.js"></script>
  <style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #wrapper { height: 100%; width: 100% }
    #map_canvas { height: 100%; width: 100% }
  </style>
</head>
<body>
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <header>

  </header>
  <div role="main" id="wrapper">

    <div id="map_canvas">
    </div>

  </div>
  <footer>

  </footer>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>

  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

<script>

function initialize()
    {
    var myoptions = {
        zoom: 4,
        center: new google.maps.LatLng(42.881944, -87.627778),
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var map = new google.maps.Map(jQuery('#map_canvas')[0],
    myoptions);

    }

function load_script()
    {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.google.com/maps/api/js?key=AIzaSyAi288X8h9Y4fXM21Q0-my6O6kiLaDeC7M&sensor=false&callback=initialize";
    document.body.appendChild(script);
    }

jQuery(function()
    {
    load_script();
    });
</script>
</body>
</html> 
```

# typo3 - 保持 TYPO3 sys_log 干净整洁的最佳方法？

> ID：11230998
> 
> 赞同：11
> 
> 时间：2012-06-27T16:32:56.647
> 
> 标签：typo3

我有这个 MySQL

```
DELETE FROM sys_log 
WHERE sys_log.tstamp < UNIX_TIMESTAMP(ADDDATE(NOW(), INTERVAL -2 MONTH)) 
ORDER BY sys_log.tstamp ASC 
LIMIT 10000 
```

如果我 cronjob，这对保持 sys_log 很小有好处吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T10:12:20.590

是和否

**如果你关心你的记录历史，那*不是***。您可以使用 sys_history 表恢复对记录（内容、页面等）的更改。sys_history 表和 sys_log 表是相关的。当您截断 sys_log 时，您也失去了回滚对系统的任何更改的能力。您的客户可能不喜欢这样。

**如果您只关心 sys_log 大小，那就是*这样***。通过 cron 截断表格很好。

在 TYPO3 4.6 及更高版本中，您可以使用表垃圾收集调度程序任务 als pcampe 说。对于 4.5 以下的 TYPO3 版本，您可以使用[tablecleaner](http://typo3.org/extensions/repository/view/tablecleaner)扩展。如果您从 sys_log 中删除早于 [N] 天的所有记录，您还将保留您的记录历史记录 [N] 天。这对我来说似乎是最好的解决方案。

请首先尝试修复填充您的 sys_log 的内容 ;-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T17:00:49.037

是的。

另请参阅[Jochen Weiland](http://www.slideshare.net/jweiland/spark-plugs-oil-change-filter-how-to-keep-your-typo3-site-running-with-regular-maintenance)关于保持 TYPO3 安装干净和小巧的其他建议

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-29T09:32:36.293

为此有一个调度程序任务。

它被称为`Table garbage collection (scheduler)`。

在 TYPO3 4.7 中，它只能清理`sys_log`表。从 TYPO3 6.0 开始，它还可以清理`sys_history`桌子。您可以配置天数和要清理的表。

扩展可以注册更多的表来清理。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-17T19:43:46.677

```
Since TYPO3 9, the history is no longer stored using sys_log.
You can safely delete records from sys_log. 
```

请参阅[重大更改 #55298](https://docs.typo3.org/typo3cms/extensions/core/stable/Changelog/9.0/Breaking-55298-DecoupledHistoryFunctionality.html)。

**简短的回答：**

不，这绝对不是一个好主意（除非您使用的是 TYPO3 9 或更高版本，请参阅本文底部的注释）。如果您真的想从 sys_log 中删除内容，请记住 sys_history 仍在引用它。你也应该对 sys_history 做同样的事情。

或者，只需执行以下操作：

```
DELETE FROM sys_log WHERE NOT EXISTS 
(SELECT * FROM sys_history WHERE sys_history.sys_log_uid=sys_log.uid) 
AND recuid=0 AND tstamp < $timestamp LIMIT $limit 
```

随意根据您的要求对其进行优化。

您还可以安全地（不影响 sys_history）删除带有 sys_log.error != 0 的记录。

**还有一些建议：**

*   在开发中将调试级别设置为详细（警告），但在生产中仅出错
*   定期查看系统日志并排除问题。解决问题后，您可以从 sys_log 中删除特定错误（请参阅 sys_log.error != 0, sys_log.details）。您可以使用数据库命令或在较新的 TYPO3 版本上使用后端中的“SYSTEM: log”并使用“删除类似错误”按钮来执行此操作：

[![在此处输入图像描述](../Images/67c06c6c6d501b41192fd325a199446b.png)](https://i.stack.imgur.com/Pa8i2.png)

*   您还可以考虑在主要版本升级时使用低级清理器和删除记录并删除已删除=1 的记录`truncate sys_log`。`truncate sys_history`不过，请务必先与编辑附近的人交谈，因为这将删除整个历史记录。确保您愿意这样做。

对于调度程序任务“表垃圾收集”，请参阅文档：[https ://docs.typo3.org/c/typo3/cms-scheduler/master/en-us/Installation/BaseTasks/Index.html](https://docs.typo3.org/c/typo3/cms-scheduler/master/en-us/Installation/BaseTasks/Index.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-28T12:43:17.223

大表的另一个常见原因`sys_log`是 TYPO3 安装中使用的扩展之一中的问题/错误。

使用旧版本的常见示例`tx_solr`：

```
Core: Error handler (FE): PHP Warning: Invalid argument supplied for foreach() in typo3conf/ext/solr/classes/class.tx_solr_util.php
Core: Error handler (FE): PHP Warning: array_reverse() expects parameter 1 to be array, null given in typo3conf/ext/solr/classes/class.tx_solr_util.php line 280 
```

这组记录每隔一分钟左右就会弹出`sys_log`一次，从而在短时间内产生数百万条记录。

幸运的是，这些记录对记录历史和相关的回滚功能没有任何影响`sys_history`，因此删除它们是安全的。

如果你有一个大的`sys_log`，这可能会导致`LOCK`超时问题，所以你必须限制删除查询：

`delete from sys_log where details LIKE 'Core:%' LIMIT 200000;`