# StackOverflow 问答 11435000-11435999

# python - 这是将一个类型的所有实体导出到 csv 文件的好方法吗？

> ID：11435000
> 
> 赞同：1
> 
> 时间：2012-07-11T14:34:07.307
> 
> 标签：python, google-app-engine

我有数百万个特定类型的实体，我想导出到 csv 文件。以下代码将实体以 1000 个为单位批量写入 blob，同时保持 blob 打开并将下一批实体推迟到任务队列。当没有更多实体要获取时，blob 就完成了。这似乎适用于我的大部分本地测试，但我想知道：

如果我在我的生产数据上运行它之前错过了任何陷阱或极端情况，并为数据存储读取产生了 $s。

如果超过最后期限或在批处理写入 blob 时内存耗尽，则此代码默认为当前批处理的开始以再次运行任务，这可能会导致大量重复。有什么建议可以解决这个问题吗？

```
def entities_to_csv(entity_type,blob_file_name='',cursor='',batch_size=1000):
  more = True
  next_curs = None
  q = entity_type.query()
  results,next_curs,more = q.fetch_page(batch_size,start_cursor=Cursor.from_websafe_string(cursor))
  if results:
    try:
      if not blob_file_name:
        blob_file_name = files.blobstore.create(mime_type='text/csv',_blob_uploaded_filename='%s.csv' % entity_type.__name__)

      rows = [e.to_dict() for e in results]
      with files.open(blob_file_name, 'a') as f:
        writer = csv.DictWriter(f,restval='',extrasaction='ignore',fieldnames=results[0].keys())
        writer.writerows(rows)

      if more:
        deferred.defer(entity_type,blob_file_name,next_curs.to_websafe_string())
      else:
        files.finalize(blob_file_name)
    except DeadlineExceededError:
      deferred.defer(entity_type,blob_file_name,cursor) 
```

稍后在代码中，类似于：

```
deferred.defer(entities_to_csv,Song) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:44:09.657

当前解决方案的问题在于，每次写入到 blobstore 时，您的内存都会增加。blobstore 是不可变的，可以一次从内存中写入所有数据。

您需要在可以将所有记录保存在内存中的后端上运行该作业，您需要在应用程序中定义一个后端并使用 defer 调用`_target='<backend name>'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:14:16.860

看看这个 Google I/O 视频，几乎描述了你想用 MapReduce 做什么，从视频中的 23:15 开始。你要的代码是27:19

[https://developers.google.com/events/io/sessions/gooio2012/307/](https://developers.google.com/events/io/sessions/gooio2012/307/)

# android - Android：使用 Switch 所需的 API？

> ID：11435001
> 
> 赞同：15
> 
> 时间：2012-07-11T14:34:10.423
> 
> 标签：android, api, android-switch

由于以下错误，我无法在我的项目中插入 Switch：

> 查看需要 API 级别 14（当前最低为 8）：

但是在我的项目属性中，我使用的是 Platform 4.1 和 API Level 16。那么有什么问题吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-15T18:50:12.307

Google IO 2012 上有一个很好的讲座[（从幻灯片 32 开始）](https://docs.google.com/presentation/d/1mKmwM-HNXukKT_FgAMmyCuwMdL4nQI4aZ6SXIr5wixc/pub?start=false&loop=false&delayms=3000#slide=id.g4c9853a_0_113)

下面是一个详细的例子：

通过将其放置在 /res/layout-v14 中，为 ICS+ 版本创建一个单独的布局 XML 文件。生成的文件结构将如下所示：

```
res/layout
- mainlayout.xml
- compound_button.xml
res/layout-v14
- compound_button.xml 
```

然后，当您的应用在 v14 或更高版本上运行时，Android 将在 layout-v14 目录中查找资源。

在 mainlayout.xml 中放置一个包含，它将在应用程序运行时拉入相关的 Compound_button.xml：

```
<include layout="@layout/compound_button" /> 
```

对于 4.0 之前的布局，我们需要一个复选框，因此创建 /layout/compound_button.xml 作为合并，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" >

    <CheckBox
        android:id="@+id/enabled"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enable" />

</merge> 
```

然后对于 4.0+ 布局，我们需要一个开关，因此创建 /layout-v14/compound_button.xml 作为合并，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" >

    <Switch
        android:id="@+id/enabled"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Enable"
        tools:ignore="NewApi" />

</merge> 
```

当然，一定要适当地设置你的最小值和目标：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T14:36:39.347

在您的 AndroidManifest.xml 文件中查找此内容：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/> 
```

将 minSdkVersion 更改为 14。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-23T08:53:37.800

Switch 需要 API 14，旧版本请使用 SwithCompat：

```
<android.support.v7.widget.SwitchCompat
android:id="@+id/switch_compat"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:checked="true"
android:textOff="OFF"
android:textOn="ON"
app:showText="false"
android:focusable="false"
android:focusableInTouchMode="false"/> 
```

在 setOnCheckedChangeListener 上：

```
witchCompat switchCompat = (SwitchCompat)convertView.findViewById(R.id.switch_compat);
    switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (isChecked) {
                textView.setText("check");
            } else {
                textView.setText("unCheck");
            }
        }
    }); 
```

我希望能帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T14:37:30.607

您`android:minSdkVersion`设置为 8。这意味着您的应用程序将在 API-8 (2.2.1) 及更高版本上运行，但由于 Switch 不可用，它会崩溃

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-19T07:03:34.183

更好的解决方案是在 layouts 文件夹和 layouts-v14 文件夹中有两个不同的 xml 布局，名称和代码相同。在 layouts 中它的 toggleButton/checkboxes 和在 layouts-v14 中它的 switch 和动态检查 api 版本并膨胀相应的布局。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-23T17:38:02.243

看看有两种方法可以首先解决您的问题，要么将 minSdkVersion `<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16"/>`从 8 更改为 14，要么在 layout-v14 中定义另一个包含 Switch 的布局，您可以在 res 目录中手动创建此文件夹

# javascript - 如何删除jwplayer中的全屏按钮？

> ID：11435002
> 
> 赞同：1
> 
> 时间：2012-07-11T14:34:12.893
> 
> 标签：javascript, fullscreen, jwplayer

我需要删除`fullscreen`jwplayer 中的按钮。我需要做什么？

**代码**

```
<object type="application/x-shockwave-flash" data="js/jwplayer/player.swf" width="100%" height="300" id="Player" name="Player">
<param name="allowfullscreen" value="true">
<param name="allowscriptaccess" value="always">
<param name="wmode" value="transaparent">
<param name="flashvars" value="file=http://www.youtube.com/watch?v='+id+'&autostart=true&playlist=over&dock=true&repeat=list">
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T10:17:15.520

我找到了一个简单的解决方案。从 GitHub 存储库下载 Jwplayer 的源代码（当然使用与您正在使用的版本相同的版本）：

[https://github.com/jwplayer/jwplayer/releases](https://github.com/jwplayer/jwplayer/releases)

其中`assets/`必须有一个名为`six.xml`（默认皮肤）的文件。删除以下行：

```
<element name="fullscreenButton" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAAbElEQVR42u2R0QnAIAxEu1lWc5/+ZYKs4TTWjwS0qIFrP+/BkYMLOdCLELKn1tpG5TleYF2yyMUzvCAOZDtwgU85PJGE/+NPyuTJG1Uts/9+sI0+y6GCrtunLHKJHbjAZYcd8x28IJTmhJAtD4gEt9ueDIktAAAAAElFTkSuQmCC"/>
<element name="fullscreenButtonOver" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAACFUlEQVR42t2W324SURCHhS67VCoFbYhRkbQsaCwVSwgUaZP2yia9Mb6MN41vYfpIfYIm5QIegJfA3yTfSU52c1i98KabfGGYmd+cPX+Gw7On+2w2m5JPUfxfC5dhB8pQKooXvjGCiohFFRJ8EVTwVSHGtxOckSuOsCb2xUsDe0/swl42jiZxg2wr/kK0REf0DOzX4hXIzsVbaPODsH4VUSOxL8biwsD+SCEhOx/vo61Rq5zd1JipdhBkn6k4hmk2iKZDjdhtuj9Awnqm4twTPopf4lKM4BLfo0tCk1IjCQ3QFF0xR+QK/BBXYgxX+PycOdpmaAC3RG1xiui7uMWeic8ww3dLzgZNO7tEoU1OxYhpX7Dmd+KDgT0ldk5umt/k/DGtioZ4y/E7EUMx4JQcQR/fkJwemgY1OKbhAd6wnscU+ESRQ+jhOyGniyY4QFlE4rk4sCKIJyzFaLVa/XaNhT0iNiH30LTUiEJ9UGeqg8ViYRv3TVxjj80PY3zXloM9QFvf1gcN3mRiIr3pvX2u1+ufHMMvMDefn2MatI2iPjgSZyYylsvlg77fiK/umGLfWMzlmQbt3/UBQoc7530IxLf3QeT3AYIZbzbE9w5SfGfknGb6IAr1Qez9XL8XXabdxtc0sNvEuuS20MZFd0LsXThNqOOrQg0fcS6cXPHiKzOB2L8yg3GKG4WXfoBSUfz//W15ss8fvEcYMYnLr+AAAAAASUVORK5CYII="/> 
```

然后，当您调用 JwPlayer 时，在皮肤选项中插入修改后皮肤的路径：

```
jwplayer("myElement").setup({
  file: "/upload/myVideo.mp4",
  skin: "your-modified-six.xml"
}); 
```

请注意，双击播放器仍会启用全屏。您也应该在代码上禁用它（不仅仅是前端），方法是编辑 jwplayer.js 的源代码。搜索`allowfullscreen`，并将其设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:37:39.447

使用以下皮肤：

[简单的皮肤](http://www.longtailvideo.com/addons/skins/51/Simple)

# c++ - 删除 Wm6.5 中的系统托盘图标

> ID：11435006
> 
> 赞同：0
> 
> 时间：2012-07-11T14:34:17.127
> 
> 标签：c++, windows-mobile-6.5

我想从命令栏的顶部栏中删除音量系统图标。我一直在寻找解决方案，但到目前为止一无所获。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:57:45.647

您不能从 wm65 任务栏中删除音量图标，也不能删除任何其他图标。这些图标由 OEM 在 OS 映像构建中定义。您可以更改用户在功能区栏弹出窗口中点击扬声器时调用的应用程序。请参阅我关于信息亭模式的文章第 2 部分。问候，约瑟夫（www.hjgode.de/wp

# sql - DB2 在连接时设置默认值/在 FETCH 后打开表时设置默认值

> ID：11435011
> 
> 赞同：1
> 
> 时间：2012-07-11T14:34:42.007
> 
> 标签：sql, db2

这是一个双重问题，只是想办法解决我的问题。另外，我对 DB2 和存储过程还很陌生，所以请耐心等待。

我正在创建一个使用 Left Join 语句从两个表中获取值的存储过程。这将导致第二个表中的某些值返回空值（因为它们在 tableB 中不存在）。

```
DECLARE CURSOR C1 WITH RETURN FOR 
select a.name, a.title, b.order from tableA a
left outer join tableB b on a.name = b.name; 
```

现在，我需要一些方法将这些空值设置为默认值 0。

我正在使用的程序可以做到这一点（`CAST-IRON`），但如果结果集太大，它会减慢编排速度并截断作业日志。所以我正在尝试使用存储过程来解决这个问题。

我的第一个想法是使用`FETCH INTO`语句和`WHILE`循环。

```
WHILE AT_END = 0 DO
FETCH C1 INTO CHNAME, CHTITLE, CHORDER; 
IF CHORDER IS NULL 
THEN SET CHORDER = 0;
END IF;
IF SQLCODE = 100 
THEN SET AT_END = 1;
END IF;
END WHILE; 
```

但这似乎需要创建一个临时表，并在“FETCH INTO”之后使用插入命令使用该表声明另一个游标。所以我想知道是否有另一种方法可以做到这一点，或者在 select 语句中自动设置默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:42:49.790

使用 . 在 select 语句中设置默认值`COALESCE`。

```
DECLARE CURSOR C1 WITH RETURN FOR  
select a.name, a.title, COALESCE(b.order,0) as order
from tableA a 
left outer join tableB b on a.name = b.name; 
```

# c# - Linq 中的 FirstOrDefault

> ID：11435013
> 
> 赞同：3
> 
> 时间：2012-07-11T14:34:52.133
> 
> 标签：c#, linq

我正在尝试将此 foreach 循环移动到 linq：

```
compData = componentData[0];
foreach (var componentTraceData in componentData)
{
     if (!string.IsNullOrEmpty(componentTraceData.CompName))
     {
          compData = componentTraceData;
          break;
     }
} 
```

这就是我尝试过的：

```
var tt = (from n in componentData 
          where !string.IsNullOrEmpty(n.CompName) 
          select n).FirstOrDefault(); 
```

`componentData[0]`如果 linq 没有找到任何结果，我该如何处理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T14:36:21.633

取您当前拥有的行并`?? componentData[0]`在最后添加。

`??`是空合并运算符。它只是简写，“如果我左边的为空，返回我右边的。如果它不为空，返回那个。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T14:41:45.913

您可以使用[`Enumerable.DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)并指定自定义默认值：

```
var result = componentData.Where(n => !string.IsNullOrEmpty(n.CompName))
                          .DefaultIfEmpty(componentData.ElementAtOrDefault(0))
                          .First(); 
```

请注意，您现在可以[`First`](http://msdn.microsoft.com/en-us/library/bb291976)安全地使用，因为序列不能再为空。如果源序列为空，[`ElementAtOrDefault`](http://msdn.microsoft.com/en-us/library/bb494386%28v=vs.100%29.aspx)将返回（引用类型为 null）。`default(T)`当您直接使用 an 的索引器时，这将防止异常`IList<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T14:39:28.060

```
var tt = componentData.FirstOrDefault(n=!string.IsNullOrEmpty(n.CompName)) ?? componentData[0]; 
```

尽管您也想首先检查它`componentData`是否不为空并且`count`/`length`是否大于零。

# javascript - 如何在 Ember 应用程序中包含 CLDR.js 库？

> ID：11435019
> 
> 赞同：3
> 
> 时间：2012-07-11T14:35:06.157
> 
> 标签：javascript, ember.js, internationalization, cldr

我正在构建一个开始使用[ember-skeleton](https://github.com/interline/ember-skeleton)的 Ember 应用程序（这意味着我正在使用 Rake Pipeline 作为我的构建工具链）。我正在使用[ember-i18n](https://github.com/zendesk/ember-i18n)，并且不断发出关于没有 CLDR.pluralForm 函数的警告。

我已将ember-i18n 使用的[CLDR 复数函数](https://github.com/jamesarosen/CLDR.js)`app/vendor/`添加到目录中，并将该文件添加到我的`Assetfile`. 我已经验证该代码包含在我`app.js`之前的 ember-i18n 代码中。我还在`require`main.js 中添加了适当的行：

```
require('plurals');
require('ember-i18n'); 
```

尽管如此，ember-i18n 仍在发出警告。这是发生的代码：

```
if (typeof CLDR !== "undefined" && CLDR !== null) {
  pluralForm = CLDR.pluralForm;
}

if (pluralForm == null) {
  Ember.Logger.warn("CLDR.pluralForm not found. Em.I18n will not support count-based inflection.");
} 
```

如何确保在我的应用程序中定义了 CLDR？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:13:50.063

因为没有其他人有，所以如果我自己调试问题，我会建议一些我可能会看的东西。

如果您在站点中看到的消息与在提琴手中看到的消息相同，那是由于文件只是乱序加载。几乎“复数”**必须**在“i18n”插件之前加载。如果您翻转[链接文件](http://jsfiddle.net/scispear/LAKTu/)的顺序，它将起作用（我分叉了错误示例）。

`debugger;`我会尝试通过将一些语句放入每个文件中来验证我错了，以查看哪些语句实际上首先加载到浏览器上。

由于您的`require('plurals')`原因，我将假设您正在使用 requirejs （[github 因维护而关闭，](https://status.github.com/)因此我目前实际上无法检查 ember-skeleton ...因此将来可能会对其进行编辑）。如果此断言为真，则需要声明“复数”是“i18n”的依赖项。

> “如果你不表达依赖关系，你可能会遇到加载错误，因为 RequireJS 异步加载脚本并且速度不正常。” - [RequireJS API](http://requirejs.org/docs/api.html#jsfiles)

这意味着您最终可能会将两个调用合并为一个，添加一个`define`或制作一个“shim”；这些（以及更多）示例可以在[RequireJS](http://requirejs.org/)站点上找到。

抱歉，如果这对您没有帮助但没有看到它实际上已损坏；我很难调试这个问题。

**编辑：**查看 ember-skeleton，我没有看到 requireJS。我从来没有使用过 rake（我们最终在 nodeJS 中编写了我们的管道）所以我不太确定你是否真的试图`require "blaw"`在 rake 中连接文件或者你是否真的试图同时使用这两者......所以现在我假设这个答案可能不是很有帮助。

# asp.net - Cookie 包含多个值？

> ID：11435022
> 
> 赞同：0
> 
> 时间：2012-07-11T14:35:16.450
> 
> 标签：asp.net, cookies

我在添加持久性 cookie 时遇到问题，`Response.Cookies.Add(cookie)`但如果用户已经有一个具有该名称的 cookie，这似乎是在添加值。我认为最终在 cookie 中有多个值，这不是我想要的。我应该`.Set`改用吗？

请注意，cookie 可能包含以前访问的值，我希望用新值覆盖它，而不是保留多个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:41:50.100

Cookies 是一个关联数组，这意味着它们是键值对的集合，并且与表单一样，如果给定键具有多个值，则其值将是一个数组。

密钥按域隔离，因此 google.com 可以有一个与您的名称相同的 cookie，并且不会导致任何冲突。有人与您尝试设置的 cookie 名称相同，这是怎么回事？他们以前去过你的网站吗？

也许您应该尝试获取 cookie，然后按照您的建议对其进行 SET 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:47:40.367

我发现这样做的原因是，如果您有一个 cookie`x`和 .mydomain.com 并尝试在 .subdomain.mydomain.com 设置另一个 cookie ，那么当您从 .subdomain.mydomain.com`x`读取 cookie 时，您最终会得到这两个值。vs`x`的选择与我的问题无关，只是我误解了 cookie 和子域的交互方式。`Add``Set`

# php - Codeigniter 变长参数列表

> ID：11435025
> 
> 赞同：4
> 
> 时间：2012-07-11T14:35:26.970
> 
> 标签：php, codeigniter

我正在用 Codeigniter 制作一个教程系统，但我有点坚持在我的教程中使用子类别。

URL 结构是这样的：/tutorials/test/123/this-is-a-tutorial

*   教程是控制器
*   test 是该类别的简码
*   123 是教程 ID（用于 SQL 查询）
*   this-is-a-tutorial 只是美化 URL 的一个蛞蝓

我所做的是将类别作为第一个参数和 ID 作为第二个参数传递给我的控制器函数：

```
public function tutorial($category = NULL, $tutorial_id = NULL); 
```

现在，如果我想要子类别（无限深度），例如：/tutorials/test/test2/123/another-tutorial。我将如何实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T14:55:56.770

要阅读无限参数，您至少有两个有用的工具：

*   [`func_get_args()`](http://php.net/manual/en/function.func-get-args.php)
*   [URI](http://codeigniter.com/user_guide/libraries/uri.html)类

所以在你的控制器中：

*   弹出最后一段/参数（这是你的 slug，不需要）
*   假设最后一个参数是教程 ID
*   假设其余是类别

像这样的东西：

```
public function tutorial()
{
    $args = func_get_args();
    // ...or use $this->uri->segment_array()

    $slug = array_pop($args);
    $tutorial_id = array_pop($args); // Might want to make sure this is a digit

    // $args are your categories in order
    // Your code here
} 
```

其余代码和验证取决于您想对参数做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:50:18.833

您可能要考虑的另一个选项是 CodeIgniter 的控制器函数重映射功能，您可以使用它来覆盖默认行为。您将能够在控制器内定义一个函数，该函数将处理对该控制器的所有调用，并将剩余的 URI 参数作为数组传入。然后，您可以对它们做任何您想做的事情。

有关此事的文档参考，请参见[此处](http://codeigniter.com/user_guide/general/controllers.html#remapping)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:44:50.423

如果您需要变量类别，您可以使用[URI](http://codeigniter.com/user_guide/libraries/uri.html)类：`$this->uri->uri_to_assoc(n)`

# sql-server - 如何在sql server中的动态sql查询中传递日期函数

> ID：11435030
> 
> 赞同：0
> 
> 时间：2012-07-11T14:35:35.283
> 
> 标签：sql-server

```
SELECT @sql='

select 
    *
from (
    select ''Ongoing'' AS Ongoing,
    Coalesce(COUNT(project),0) AS project, Coalesce(COUNT(year(u.PlannedStartDate)),0) as [y]
    from Projects u  WHERE 
    u.actualstartdate IS  NULL 
    AND u.Startdate < ''+GETDATE()+''
    AND ID ='''+@ID+'''  

  ) Data
PIVOT (
  COUNT(project)
  FOR [y]
  IN (
    ' + @Years + '
  )
) PivotTable
' 
```

在这里我想传递当前日期但它不起作用..这是因为 GETDATE() 的值没有出现在字符串中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:37:54.273

更改`AND u.Startdate < ''+GETDATE()+''`为 AND`u.Startdate < GETDATE()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:39:28.130

只需删除它周围的引号我会认为

```
SELECT @sql='

select * from ( select ''Ongoing'' AS Ongoing, Coalesce(COUNT(project),0) AS project,
Coalesce(COUNT(year(u.PlannedStartDate)),0) as [y] from Projects u 
WHERE u.actualstartdate IS   NULL AND u.Startdate < GETDATE() AND ID ='''+@ID+'''

) Data PIVOT ( COUNT(project) FOR [y] IN ( ' + @Years + ' ) ) PivotTable ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:37:50.460

尝试将 GETDATE() 转换为这样的 varchar：CAST(GETDATE() AS varchar)

# r - 如何使用 xtable 打印矩阵？

> ID：11435040
> 
> 赞同：2
> 
> 时间：2012-07-11T14:35:48.370
> 
> 标签：r, tabular, xtable

我有一个包含 255 个变量的数据集。

我使用加载我的数据集

```
>agep=read.csv("ncsucurrent.csv")
>attach(agep) 
```

从数据集中，我只想将 4 个变量的子集制成表格。所以我选择使用的子集

```
>enroll=agep[,16:19]

id  Q1_Item1  Q1_Item2  Q1_Item3  Q1_Item4
 1         4         4         4         2
 2         1         2         3         4
 3         3         4         4         4
 4         3         3         3         3
 5         2         1         1         1 
```

子集中的变量是数字形式。我希望它们作为因素，所以我使用：

```
enroll<- lapply(enroll, factor, levels=1:4, labels=c("Not at all", "To a small extent", "To some extent", "To a great extent") ) t( sapply(enroll, table) ) 
```

这会产生一个矩阵，显示每个类别下每个变量的响应数（即“根本没有”......“在很大程度上”）

```
Not at all  To a small extent  To some extent  To a great extent 
Item1          1                  1               2                  1
Item2          1                  1               1                  2
Item3          1                  0               2                  2
Item4          1                  1               1                  2 
```

现在我想使用 xtable 创建一个漂亮的表。我用

```
>require(xtable)
>library(xtable)
>enroll=as.data.frame(enroll)
>enroll=xtable(enroll)
>print(enroll) 
```

但是，它返回带有标签的原始子集

```
% latex table generated in R 2.15.0 by xtable 1.7-0 package
% Wed Jul 11 00:27:10 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rlll}
  \hline
 & Q1_item1 & Q1_item2 & Q1_item3 & Q1_item4  \\ 
  \hline
1 & To a great extent & To a great extent& To a great extent & To a small extent \\ 
2 & Not at all & To a small extent  & To some extent & To a great extent\\ 
3 & To some extent & To a great extent & To a great extent & To a great extent\\ 
4 & To some extent & To some extent & To some extent & To some extent \\ 
5 & To a small extent& Not at all& Not at all& Not at all\\
   \hline
\end{tabular}
\end{center}
\end{table} 
```

使用 xtable 对数据进行子集化并打印矩阵（从上数第二个）的正确方法是什么？

# ios - 如何在 iOS 中使用 Facebook Graph API 获取用户是否喜欢帖子

> ID：11435042
> 
> 赞同：3
> 
> 时间：2012-07-11T14:35:53.423
> 
> 标签：ios, facebook-graph-api, facebook-like

Facebook Graph API 让我们使用它来获得所有喜欢的“帖子”

```
[facebook requestWithGraphPath:@"post_id/likes" andDelegate:self]; 
```

（帖子 ID 类型可能是状态、照片或链接等）

帖子编号，例如：183039808383895_363838080355846

我们也可以使用它来获得所有喜欢的“评论”

```
[facebook requestWithGraphPath:@"comment_id/likes" andDelegate:self]; 
```

评论 ID 例如：183039808383895_363838080355846_3047357

如果我们使用它，我们可以得到用户是否喜欢这个“评论”

```
[facebook requestWithGraphPath:@"comment_id?fields=user_likes" andDelegate:self]; 
```

结果是

```
{
"user_likes": false,
"id": "183039808383895_363838080355846_3047357",
"created_time": "2012-07-11T14:01:42+0000"
} 
```

但是如果我使用它，我如何获得用户是否喜欢“帖子”

```
[facebook requestWithGraphPath:@"post_id?fields=user_likes" andDelegate:self]; 
```

但它不起作用，我得到了一个错误。

# javascript - Google Maps API V3 — 元素不会在点击事件切换时隐藏

> ID：11435049
> 
> 赞同：1
> 
> 时间：2012-07-11T14:36:20.877
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经坚持了很长一段时间，所以我真的很感激一些见解。

我试图在单击事件上显示（两个）圆圈和标记的信息窗口，然后在您再次单击它时隐藏它们。**第二次点击事件不起作用。**它会在点击时向我显示内容，但不是在第二次隐藏它，而是再次加载 Circles 和 InfoWindow。

这是我的代码：

```
// Toggle Radii and InfoWindow — You can run, but you can't hide?
google.maps.event.addListener(marker, 'click', function() {
    if ( ccArray[i].setMap() == null || iwcArray[i].setMap() == null ) {
        // First Click
        infowindow.open(map,marker);
        ccArray[i].setMap(map);
        iwcArray[i].setMap(map);
    } else {
        // Second Click
        alert('You can hide, so just do it.');
        infowindow.open(null,marker);
        ccArray[i].setMap(null);
        iwcArray[i].setMap(null);
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:39:56.083

" `if ( ccArray[i].setMap() == null || iwcArray[i].setMap() == null ) {`"

**ccArray**和**iwcArray**包含 google.maps.Circle 对象。

google.maps.Circle.setMap() 是一个什么都不返回的函数，setMap 只是用来设置圆的地图属性，而不是获取它。因此，我怀疑您的代码将始终通过测试，并且永远不会落入 else 子句。

你确定你不想使用 ccArray[i]. **getMap()**和 iwcArray[i].getMap() ？

（见[https://developers.google.com/maps/documentation/javascript/reference#Circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)

# c# - 返回 XML 文件中第一个可能的节点的内部文本

> ID：11435053
> 
> 赞同：0
> 
> 时间：2012-07-11T14:36:25.877
> 
> 标签：c#, xml, linq, xpath

我编写了一个专门搜索给定完整`xpath`内容并返回内部文本的方法。但是由于我正在处理的文件都有唯一的节点名称，我想以某种方式做到这一点，只有传递节点名称才能完成这项工作。

我的代码目前的样子：

```
public string FileInfo(string info)
{
    switch (info)
    {
        //FileInfo
        case "fileCreator":
            fileCreator = ztr.SelectSingleNode("//Document/FileInfo/Creator").InnerText;
            return fileCreator;
        case "fileName":
            fileName = ztr.SelectSingleNode("//Document/FileInfo/Name").InnerText;
            return fileName;
      //And so on with lots of other cases!!! 
```

我怎样才能让它以某种方式搜索第一次出现的`info`作为 xml 节点的字符串，这样我就不必愚蠢并编写所有这些 switch 语句......

**更新**

请注意，**并非**我想要的所有东西都位于`FileInfo`节点中......我想要搜索我传递给它的节点的方法！或者更好地说我想将节点本身的名称传递给这个方法并获取它的值。抱歉，如果我在此编辑之前感到困惑！

xml 文件中的更多示例：

```
/Document/RuntimeInfo/Operator 
```

所以我想将“运算符”传递到我的方法中，我得到了它的价值！应该由方法来发现正确的路径。拍子是独一无二的，所以实施这种方法不是一个坏主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:39:17.613

这不能完成工作吗？

`var value = ztr.SelectSingleNode(string.Format("//{0}", info).InnerText;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:41:23.673

```
return ztr.SelectSingleNode(string.Format("//Document/FileInfo/{0}", 
                            info.Replace("file", "").InnerText; 
```

**编辑**

如果搜索到的节点始终处于相同的嵌套级别，您可能会使用通配符

```
return ztr.SelectSingleNode(string.Format("//Document/*/{0}", 
                                info).InnerText; 
```

顺便说一句，在您的示例中，您通过`fileCreator`查找`Creator`节点。错字？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:09:31.200

尝试，

```
return ztr.SelectSingleNode(string.Format("//{0}[contains(name(..),'Info')]", info)); 
```

如果`info`是`Operator`，它将返回第一个名称`Operator`中包含父节点的节点`Info`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T17:56:10.527

使用这个 XPath：

```
//Document/FileInfo/[0] 
```

你的代码可以是这样的：

```
public string FileInfo(string info)
{
    return ztr.SelectSingleNode("//Document/FileInfo/[0]").InnerText;
} 
```

[在此处](http://msdn.microsoft.com/en-us/library/ms256086.aspx)查看有关 xpath的更多信息。

# node.js - node-curl (node.js) 中的数据块

> ID：11435054
> 
> 赞同：2
> 
> 时间：2012-07-11T14:36:27.720
> 
> 标签：node.js

我使用 node-curl 作为 HTTPS 客户端来向网络上的资源发出请求，并且代码在面向 Internet 的代理后面的机器上运行。

我用来合作的代码：

```
var curl = require('node-curl');
//Call the curl function. Make a curl call to the url in the first argument.
//Make a mental note that the callback to be invoked when the call is complete 
//the 2nd argument. Then go ahead.
curl('https://encrypted.google.com/', {}, function(err) {
    //I have no idea about the difference between console.info and console.log.
    console.info(this.body);
});
//This will get printed immediately.
console.log('Got here'); 
```

node-curl 从环境中检测代理设置并返回预期结果。

挑战是：在整个 https-response 下载完成后回调会被触发，据我所知，来自 http(s) 模块的['data' 和 'end' 事件](http://nodejs.org/api/http.html#http_event_data_1)没有相似之处。

再看源码，发现node-curl库确实是分块接收数据的：参考[https://github.com/jiangmiao/node-curl/blob/master/lib/CurlBuilder中的第58行。 js](https://github.com/jiangmiao/node-curl/blob/master/lib/CurlBuilder.js)。在这种情况下，目前似乎没有发出任何事件。

我需要将可能相当大的响应转发回我 LAN 上的另一台计算机进行处理，所以这对我来说是一个明显的问题。

是否建议在节点中为此目的使用 node-curl？

如果是，我该如何处理？

如果不是，那么什么是合适的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:44:56.817

我会选择美妙的[请求](https://github.com/mikeal/request)模块，至少如果代理设置不比它支持的更高级。只需自己从环境中读取代理设置：

```
var request = require('request'),
    proxy = request.defaults({proxy: process.env.HTTP_PROXY});

proxy.get('https://encrypted.google.com/').pipe(somewhere); 
```

或者，如果您不想这样做`pipe`：

```
var req = proxy.get({uri: 'https://encrypted.google.com/', encoding: 'utf8'});

req.on('data', console.log);
req.on('end', function() { console.log('end') }); 
```

上面，我也通过了`encoding`我期望的响应。您还可以在默认值中指定它（`request.defaults()`上面的调用），或者您可以保留它，在这种情况下您将在事件处理程序中获得`Buffer`s 。`data`

如果您只想将其发送到另一个 URL，那么 request 非常适合：

```
proxy.get('https://encrypted.google.com/').pipe(request.put(SOME_URL)); 
```

或者，如果您愿意`POST`：

```
proxy.get('https://encrypted.google.com/').pipe(request.post(SOME_URL)); 
```

或者，如果您还想将请求代理到目标服务器：

```
proxy.get('https://encrypted.google.com/').pipe(proxy.post(SOME_URL)); 
```

# java - 如何将方法参数声明为任何枚举

> ID：11435067
> 
> 赞同：31
> 
> 时间：2012-07-11T14:36:52.527
> 
> 标签：java, generics, enums

我有一个方法，我需要将枚举作为参数传递。

```
public <T> T doSomething(SomeEnum operation, Class<T> something); 
```

我有几个枚举，**该方法是一种常见的方法，应该适用于任何枚举**。编写此方法签名以接受任何通用枚举类型的正确方法是什么？我知道我可以为此目的使用标记接口，但我想用通用枚举签名来编写它。请就此给我建议。

以下是什么坏主意：（它有效，但我从 IDE 收到警告说它是原始类型。我不清楚原因）。

```
 public void doSomething(Enum operation); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-11T14:38:56.677

```
public <E extends Enum<E>> void doSomething(E operation); 
```

**编辑**：根据您的修改的示例：

```
public class Main {

    public enum Day {
        SUNDAY, MONDAY, TUESDAY, WEDNESDAY,
        THURSDAY, FRIDAY, SATURDAY 
    }

    public <E extends Enum<E>> E doSomething(E operation, Class<E> klazz) {

        return operation;
    }

    public static void main(String[] args) {

        new Main().doSomething(Day.FRIDAY, Day.class);
    }

} 
```

编辑2：

如果您需要 T 和 Enum 作为单独的类型，那么您将需要：

```
public <T, E extends Enum<E>> T doSomething(E operation, Class<T> klazz) { 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-11T14:38:26.983

你可以这样做：

```
public void doSomething(final Enum<?> operation); 
```

它说它需要是一个枚举，但不是任何特定的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-22T14:55:27.940

这个更清楚：

```
 public class EnumTest {

    protected static <E extends Enum<E>> void enumValues(Class<E> enumData) {
        for (Enum<E> enumVal: enumData.getEnumConstants()) {  
            System.out.println(enumVal.toString());
        }  
    }

    public static enum TestEnum {
        ONE, TWO, THREE;
    }

    public static void main(String param [] ) {
        EnumTest.enumValues(EnumTest.TestEnum.class);
    }
} 
```

# c# - EnumWindows 无法正常工作

> ID：11435069
> 
> 赞同：0
> 
> 时间：2012-07-11T14:37:01.780
> 
> 标签：c#, winapi

我试图在 for 循环中将进程名称作为一个字符串从 listBox 中获取，并搜索这些应用程序的所有窗口。当我手动将项目添加到列表框时，它工作正常；但是当我使用嵌入的文本文件来存储进程名称并将其加载到列表框时，它会搜索所有项目，但只找到最后一个。对于其他的， Process.GetProcessesByName() 抛出异常：序列不包含任何元素。

```
[DllImport("user32.dll")]
static extern bool EnumThreadWindows(int dwThreadId, EnumThreadDelegate lpfn, IntPtr lParam);

static IEnumerable<IntPtr> EnumerateProcessWindowHandles(int processId)
{
    var handles = new List<IntPtr>();
    foreach (ProcessThread thread in Process.GetProcessById(processId).Threads)
        EnumThreadWindows(thread.Id, (hWnd, lParam) => { handles.Add(hWnd); return true; }, IntPtr.Zero);

    return handles;
} 
```

搜索算法：

```
public void searchForApplications()
{
  for (int i = 0; i < listBox1.Items.Count; i++)
  {
    try
    {
     foreach (var handle in EnumerateProcessWindowHandles
        (Process.GetProcessesByName(listBox1.Items[i].ToString()).First().Id))
        {
          StringBuilder message = new StringBuilder(1000);
          SendMessage(handle, WM_GETTEXT, message.Capacity, message);

          if (message.ToString().Length > 0)
          {
            addNewApplication(new Applications(message.ToString(), message.ToString(),
                   int.Parse(handle.ToString())));
          }
        }
    }
    catch (Exception ex)
    {
       MessageBox.Show(ex.Message);
    }
  } 
```

} 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:12:58.567

如果`GetProcessesByName`没有找到与您传入的名称匹配的任何进程（检查您的列表），那么它将返回一个空数组并`First()`抛出一个`InvalidOperationException`. 您可能应该在获取 ID 之前使用`FirstOrDefault()`并检查：`null`

```
// ...
var process = Process.GetProcessesByName(listBox1.Items[i].ToString()).FirstOrDefault();

if (process != null)
{
    foreach (var handle in EnumerateProcessWindowHandles(process.Id))
    {
        // ...
    }
}
// ... 
```

# xquery - 如何获取文件的作者姓名和最后更新日期？

> ID：11435072
> 
> 赞同：2
> 
> 时间：2012-07-11T14:37:04.140
> 
> 标签：xquery, marklogic

如何获取上传到 Marklogic Server 的文档的作者姓名和最后更新日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:14:49.307

除非您关闭了最后修改属性的维护，否则您可以在文档的属性片段中找到它（您可以通过查询控制台中的浏览模式浏览这些）。

将来，最后修改的维护可能会默认关闭，仅供参考。

我不知道与维护的最后一次修改相关的用户帐户的任何概念。您需要通过触发器或 CPF 或其他机制自己添加和维护该元数据。

# c# - 全部创建后设置DataGridView行停止刷新

> ID：11435073
> 
> 赞同：0
> 
> 时间：2012-07-11T14:37:04.767
> 
> 标签：c#, .net, .net-3.5, datagridview

我正在向数据网格视图添加大量行，并且该过程非常缓慢，因为它似乎在每次添加后都尝试重绘。

我无法在网上找到一个示例，说明如何创建行列表（或数组，无论哪个有效），并在创建列表后一次将它们全部添加。我需要这样做以阻止它在每次添加后重新绘制。

谁能提供一个简短的例子或给我一个好的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:24:18.053

这里有几个想法：

1) 将列表绑定到 DataGridView。当您设置 时`DataGridView.DataSource = MyList`，它会立即更新整个网格，而无需进行所有逐行操作。您可以将项目添加到 MyList，然后重新绑定到 DataGridView。（我更喜欢使用 BindingList 动态更新 DataGridView 网格。）

2）如果数据绑定不是一个选项，我过去所做的是`AutoSizeMode = NotSet`在更新之前为每一列设置，然后将其设置回之前的状态。这是`AutoSizeMode`真正减慢绘图速度的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T23:24:26.893

您可能正在寻找 DataGridView.DataSource 属性。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource(v=vs.90).aspx)

例如：

```
//Set up the DataGridView either via code behind or the designer
DataGridView dgView = new DataGridView();

//You should turn off auto generation of columns unless you want all columns of
//your bound objects to generate columns in the grid
dgView.AutoGenerateColumns = false; 

//Either in the code behind or via the designer you will need to set up the data
//binding for the columns using the DataGridViewColumn.DataPropertyName property.
DataGridViewColumn column = new DataGridViewColumn();
column.DataPropertyName = "PropertyName"; //Where you are binding Foo.PropertyName
dgView.Columns.Add(column);

//You can bind a List<Foo> as well, but if you later add new Foos to the list 
//reference they won't be updated in the grid.  If you use a binding list, they 
//will be.
BindingList<Foo> listOfFoos = Repository.GetFoos();

dgView.DataSource = listOfFoos; 
```

此时要绑定的一个方便的事件是 DataGridView.DataBindingComplete，它在数据源绑定后触发。

# asp.net - 在服务器上提交之前隐藏 asp 标签文本

> ID：11435075
> 
> 赞同：0
> 
> 时间：2012-07-11T14:37:06.887
> 
> 标签：asp.net, label, validation

这个问题看起来很简单，但它让我很痛苦，我正在手动创建一个登录页面，用于检查来自 linq 的用户电子邮件和密码。在登录页面上有一个 asp 标签，它根据查询结果显示错误消息，如“用户不存在”或“用户处于非活动状态”等。两个文本框中都有 asp 必填字段验证器。问题是如果用户第一次尝试失败并且消息显示在标签上，除非用户成功登录，否则它不会消失。我希望文本在提交按钮上返回为 lable1.text="" 但它不能作为它是一个服务器端控件，如果为空，文本框验证器不会让它离开。我必须使用java脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:26:11.140

如您所想，这里最简单的做法是清除 javascript 中的消息。

```
<asp:Button ID="SubmitButton" OnClientClick="ClearLableText" runat="server" /> 
```

并根据您的评论更新了 javascript：

```
function ClearLableText() { var element = document.getElementById("<% this.lblMessage.ClientID %>"); element.innerHTML = ""; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:30:38.467

你可以试试这个

```
protected void page_load(object sender, EventArgs e)
{
    MyMessageLabel.Text = ""; //or .Visible = false;
}

protected void Button_Click(object sender, EventArgs e)
{
   //By this time, page_load had already executed and the Message Label cleared 
   MyMessageLabel.Text = "new result from server";

   if(validResult)
     //RedirectToWhere();
   else
     //StayOnPage();
} 
```

希望对你有效。

# android - 我们在哪里可以下载 Android 支持库的先前版本？

> ID：11435076
> 
> 赞同：3
> 
> 时间：2012-07-11T14:37:07.123
> 
> 标签：android

我需要获取 Android Support Lib 的先前版本，因为在最后两个版本 8、9 中引入了一些奇怪的问题。我想比较源代码以找出可能发生的情况，并自己修补它.

本质上，问题在于 ViewPager 在自定义 ViewGroup 使用时无法正确测量其宽度。稍微离开显示下一页的边缘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:57:36.307

[Maven Central Repository](http://search.maven.org/#browse%7C-1026250933)中有一些（带有源代码和 javadoc 的 jar）。

Android 支持库是开源的，可以直接在 GitHub 项目[android/platform_frameworks_support](https://github.com/android/platform_frameworks_support)中查看源码。例如，[android.support.v4.view.ViewPager](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/view/ViewPager.java)并单击`History`java 代码的右上角以查看[完整的更改历史记录](https://github.com/android/platform_frameworks_support/commits/master/v4/java/android/support/v4/view/ViewPager.java)。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:25:47.800

你可以在[这里](http://qdevarena.blogspot.com/2010/05/download-android-sdk-standalone-for.html)找到它。如果没有，我认为他们不会发布旧版本的链接。

但是，您仍然可以看到[此处](http://developer.android.com/tools/extras/support-library.html#Notes)进行了哪些更改。如果这还不够，请询问有关 ViewGroup 问题的新问题，我们会尽力提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-21T16:26:08.820

您可以在 Google 下载站点找到这些支持库：

```
https://dl-ssl.google.com/android 
```

*   [修订版 8](https://dl-ssl.google.com/android/repository/support_r08.zip)
*   [修订版 9](https://dl-ssl.google.com/android/repository/support_r09.zip)

# xcode - Xcode - 自定义导航栏高度

> ID：11435080
> 
> 赞同：0
> 
> 时间：2012-07-11T14:37:17.790
> 
> 标签：xcode, cocoa-touch, uinavigationcontroller

无论如何，要定制默认导航栏标题位置、高度和按钮位置？

谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:39:36.433

您必须正确实现自定义导航栏。

# asp.net - 为什么向服务器发送 OPTIONS 请求？

> ID：11435081
> 
> 赞同：2
> 
> 时间：2012-07-11T14:37:19.720
> 
> 标签：asp.net, ajax, web-services, jquery

我使用一个简单的 jQuery.ajax 方法：

```
 $.ajax({
        type: "GET",
        url: serviceUrl + '/GetAgentsGroupNameById',
        contentType: "application/json; charset=utf-8",
        data: { id: agentsGroupId },
        async: false,
        success: function (data) {
            agentsGroupName = data["d"];
        },
        error: function (request, message) {
            agentsGroupName = '';
        }
    }); 
```

发送“获取”请求，我从服务器获得格式正确的 json 响应。问题是我在开发人员工具中看到另一个请求生成到同一个 URL，请求方法为：OPTIONS，响应为空，我看到一个错误：

```
OPTIONS http://localhost:1004/MobileService.asmx/GetSubscribedAgentsByUserId?userId=27 500 (Internal Server Error) 
```

这个 OPTIONS 请求是什么？为什么会这样？

PS 我提到如果我删除 contentType: "application/json; charset=utf-8" （并添加 dataType: json 或 jsonp），则不会生成 OPTIONS 请求，但我没有得到格式正确的 json 作为响应（我得到了一个 xml 文件）

顺便说一句：该服务是 asp.net c#：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public string GetAgentsGroupNameById(int id) 
```

**如果您需要有关请求或响应的更多详细信息，请告诉我**

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:40:23.720

OPTIONS 请求是因为[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。它基本上是网络浏览器询问目标服务器是否允许跨域资源共享。

简而言之，您不能向与提供页面的域不同的域发出 json 请求。

如果您只执行 GET 请求，您可能需要查看解决此问题的[JSONP 。](http://en.wikipedia.org/wiki/JSONP)但是，它仅适用于 GET 请求。

这方面有很多问题，这里有一个详细的[答案](https://stackoverflow.com/questions/6396623/jquery-getjson-access-control-allow-origin-issue)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T14:40:36.040

尝试切换您的 $.ajax 'Type' 以使用 POST 动词而不是 GET。

# java - 以编程方式更改更新插入属性

> ID：11435091
> 
> 赞同：0
> 
> 时间：2012-07-11T14:37:46.770
> 
> 标签：java, hibernate, hibernate-mapping

我想知道是否可以更改类映射中定义的属性的插入和更新属性。这是因为在一种情况下我需要更新一个（或多个）属性，但在另一种情况下不需要更新，这可能吗？

提前致谢

编辑：假设我有类用户（带有姓名、姓氏和 loginDate），当用户登录应用程序时，我只需要更新 loginDate。但系统管理员必须能够编辑用户的姓名和姓氏。对我来说唯一的其他解决方案是使用 HQL 进行更新（或者在最坏的情况下使用 SQL），但我希望可以修改该属性。

编辑2：在阅读Java持久性与hibernate和一些论坛线程后，我发现一旦创建了sessionFactory，映射就是不可变的，虽然您可以通过编程方式更改属性，但您需要创建一个新的sessionFactory

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:11:05.973

```
// this is what the login screen calls
void updateLoginDate(Date date)
{
    User user = session.get(User.class);
    user.setDate(date);
    session.Flush();
} 
```

并且在映射中，您可以`dynamicUpdate = true`在类上指定，以便生成的 sql 仅更新已更改的列

# vb.net - 打开连接到 USB 端口的钱箱

> ID：11435094
> 
> 赞同：2
> 
> 时间：2012-07-11T14:37:51.110
> 
> 标签：vb.net

我正在使用以下代码使用 lpt 和 com 端口打开现金抽屉。

```
 Dim intFileNo As Integer = FreeFile()

    FileOpen(1, "c:\escapes.txt", OpenMode.Output)
    PrintLine(1, Chr(27) & "p" & Chr(0) & Chr(25) & Chr(250))
    FileClose(1)

    Shell("print /d:com1 c:\escapes.txt", vbNormalFocus) 
```

上面的代码效果很好。但是，我的一位客户正在使用 USB。

有人知道使用USB端口打开现金抽屉的任何代码吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:15:18.493

据我所知，需要通过将内存位置设置为特定值来打开一些 USB 现金抽屉。这完全取决于现金抽屉所需的驱动程序，因此您必须获取制造商的规格。

告诉我们哪个品牌的现金抽屉将是重要的第一步。

附录：经过一番搜索，我找到了以下有用的链接。

一个正确的答案真的太大而且太耗时，不适合在这里，需要一些实验才能让它工作，但基本上你可以从 Prolific 安装一个 USB 到 COM 驱动程序，然后编写软件或重新编写你链接的 VB6 答案使用通常的技术进入 VB.NET。

[http://www.jack-frost.co.uk/vb6_usb_cash_drawer.html](http://www.jack-frost.co.uk/vb6_usb_cash_drawer.html)

[http://www.prolific.com.tw/US/index.aspx](http://www.prolific.com.tw/US/index.aspx)

[http://support.epostraders.co.uk/support-files/documents/27/ldi-C4141_USB_InstallationGuide.pdf](http://support.epostraders.co.uk/support-files/documents/27/ldi-C4141_USB_InstallationGuide.pdf)

[http://answers.microsoft.com/en-us/windows/forum/windows_vista-hardware/prolific-pl2303-usb-to-serial-port-adapter-driver/1902e9e0-4af0-4f36-84bc-f487d4022f1f](http://answers.microsoft.com/en-us/windows/forum/windows_vista-hardware/prolific-pl2303-usb-to-serial-port-adapter-driver/1902e9e0-4af0-4f36-84bc-f487d4022f1f)

[http://edvoncken.net/2010/08/pl-2303-usb-to-serial-driver/](http://edvoncken.net/2010/08/pl-2303-usb-to-serial-driver/)

# python - 有没有一种为 swig 接口生成文档的好方法？

> ID：11435102
> 
> 赞同：10
> 
> 时间：2012-07-11T14:38:19.560
> 
> 标签：python, documentation, swig

我想知道是否有任何好的技术可以在界面上构建/维护文档。

我正在使用 swig 构建从 c++ 代码到 python 的接口；大多数情况下，我只是 %包括 c++ 头文件。我要处理至少几十个类和上百个函数，所以首选自动化工具。

理想情况下，我想在 c++ 标头中使用 doxygen 格式的注释来填充 python 类/方法中的文档字符串。

或者，生成单独的文档（在 ascii、html...中）也很有用。swig 的早期版本（1.3 和更早版本）似乎支持这种功能，但我看不到用 2.0 实现它的方法。

是否有任何有用的（自动化）技术来记录界面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-25T09:43:24.837

要将您的 doxygen 注释添加到 python 文件中，在网络上有一个名为 doxy2swig.py 的 python 工具，如此处[所述](http://www.enricozini.org/2007/tips/swig-doxygen-docstring/)。

从您的代码创建 xml 文档。然后使用工具：

> doxy2swig.py index.xml 文档.i

并通过在您的 swig 界面文件中导入 documentation.i

> %import "文档.i"

它完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:31:15.453

SWIG 2.0有一些[`%feature("autodoc")`](http://www.swig.org/Doc2.0/Python.html#Python_nn67)进展，我认为目前为止。

例如：

```
%module test

%feature("autodoc", "3");

void foo (int *a, void *bar, double epsilon); 
```

导致插入一些模糊不清的文档。

如果这还不够，我认为下一个最简单的步骤是使用[`%pythonprepend`](http://www.swig.org/Doc2.0/Python.html#Python_nn42)制作一个足够独特或类似的标记，以便`sed`在 SWIG 自动运行后将文档插入界面：

```
%pythonprepend foo "MARKER" 
```

进而：

```
sed -ei 's/MARKER/some documentation' test.py 
```

`%pythonprepend`通过使用（Python？）脚本查看 Doxygen 输出来生成标记并在运行 SWIG 后替换它们，您可以在哪里找到函数。

# opengl - OpenGL ES 和 OpenGL 兼容着色器

> ID：11435105
> 
> 赞同：6
> 
> 时间：2012-07-11T14:38:27.390
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我想为 OpenGL ES 和 OpenGL (Windows) 提供相同的着色器源。为此，我想定义自定义数据类型并仅使用 OpenGL ES 函数。

一种方法是定义：

```
#define highp
#define mediump
#define lowp 
```

用于 Windows 着色器并像 OpenGL ES 一样编写着色器。

其他方法是为 OpenGL ES 定义像这样的自定义数据类型：

```
#define hvec2 highp vec2 
```

对于 Windows 来说就像这样

```
#define hvec2 vec2 
```

你认为什么更好？你有其他解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T07:39:49.837

您可以使用[http://www.opengl.org/registry/specs/ARB/ES2_compatibility.txt](http://www.opengl.org/registry/specs/ARB/ES2_compatibility.txt)

> 此扩展添加了对 OpenGL 3.x 中缺少的 OpenGL ES 2.0 功能的支持。启用这些功能将简化将应用程序从 OpenGL ES 2.0 移植到 OpenGL 的过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T12:00:37.727

我的解决方案是编写与这两种 API 兼容的着色器代码，然后在将片段着色器源代码上传到 OpenGL ES 时，只需添加以下行：

```
precision mediump float; 
```

这会将默认浮点精度设置为中等。在 OpenGL ES 片段着色器中，浮点值没有默认精度级别，这意味着您需要在每个浮点声明上指定精度，或者显式设置默认精度。如果这对您的应用程序更有意义，您可以使用`lowp`or代替。`highp`

有关更多详细信息，请参阅 OpenGL ES 着色语言规范的第 4.5.3 节：[http ://www.khronos.org/files/opengles_shading_language.pdf](http://www.khronos.org/files/opengles_shading_language.pdf)

`#define`如果您需要更好地控制着色器的精度，您也可以将此方法与您的方法混合使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T08:38:47.157

当着色器在 Windows 上运行时，我通过在每个着色器的开头定义以下内容来管理它：

```
#define lowp
#define mediump
#define highp 
```

另外，我给着色器提供了使用哪个平台的信息（WINDOWS、MOBILE、IOS），可以这样使用：

```
#ifdef WINDOWS
precision mediump float;
#endif 
```

# java - 如何将流数据直接加载到 BufferedImage

> ID：11435106
> 
> 赞同：0
> 
> 时间：2012-07-11T14:38:31.127
> 
> 标签：java, sockets, inputstream, bufferedimage, outputstream

我正在使用[这个接受的答案](https://stackoverflow.com/questions/11420250/how-to-send-a-list-of-files-over-a-socket-in-java/11420784#comment15064533_11420784)提供的代码通过Java 中的套接字发送文件列表。我的目标是接收图像列表。我想做的是将这些图像直接读入内存，就像`BufferedImages`在将它们写入磁盘之前一样。然而，我的第一次尝试，即使用`ImageIO.read(bis)`（再次，请参阅附加的问题）失败了，因为它试图继续读取超出第一个图像文件的末尾。

我目前的想法是将数据从套接字写入新的输出流，然后从传递给`ImageIO.read()`. 这样，我可以像程序当前正在执行的那样逐字节编写它，但将其发送到`BufferedImage`文件而不是文件。但是我不确定如何将输出流链接到输入流。

任何人都可以推荐对上面的代码进行简单的编辑，或者提供另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:54:14.173

为了在将图像写入磁盘之前读取图像，您需要使用 ByteArrayInputStream。[http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html)

基本上，它创建一个从指定字节数组读取的输入流。因此，您将读取图像长度，然后是名称，然后是字节长度，创建 ByteArrayInputStream，并将其传递给 ImageIO.read

示例片段：

```
long fileLength = dis.readLong();
String fileName = dis.readUTF();
byte[] bytes = new byte[fileLength];
dis.readFully(bytes);
BufferedImage bimage = ImageIO.read(new ByteArrayInputStream(bytes)); 
```

或使用您引用的其他答案中的代码：

```
String dirPath = ...;

ServerSocket serverSocket = ...;
Socket socket = serverSocket.accept();

BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
DataInputStream dis = new DataInputStream(bis);

int filesCount = dis.readInt();
File[] files = new File[filesCount];

for(int i = 0; i < filesCount; i++)
{
    long fileLength = dis.readLong();
    String fileName = dis.readUTF();
    byte[] bytes = new byte[fileLength];
    dis.readFully(bytes);
    BufferedImage bimage = ImageIO.read(new ByteArrayInputStream(bytes));

    //do some shit with your bufferedimage or whatever

    files[i] = new File(dirPath + "/" + fileName);

    FileOutputStream fos = new FileOutputStream(files[i]);
    BufferedOutputStream bos = new BufferedOutputStream(fos);

    bos.write(bytes, 0, fileLength);

    bos.close();
}

dis.close(); 
```

# asp.net - 在 asp.net 中包含 web 服务后的步骤

> ID：11435108
> 
> 赞同：0
> 
> 时间：2012-07-11T14:38:32.413
> 
> 标签：asp.net, soap, webservice-client

我成功地为我的 asp.net vb web 项目添加了一个 webreference。

但我不知道如何进行第一次搜索，因为没有文档。

有人可以给我一些关于以下网络服务的提示吗？

[http://xml.lowcostgroup.com/soap/book.asmx](http://xml.lowcostgroup.com/soap/book.asmx)

相应的请求

```
<?xml version="1.0" encoding="utf-8"?>
<SearchRequest>
  <LoginDetails>
    <Login>login</Login>
    <Password>pass</Password>
    <AgentReference>IRELAND</AgentReference>
  </LoginDetails>
  <SearchDetails>
    <ArrivalDate>2012-08-11</ArrivalDate>
    <Duration>7</Duration>
    <RegionID>64</RegionID>
    <AirportCode>PMI</AirportCode>
    <PropertyID>0</PropertyID>
    <Resorts>
      <Resort>
        <ResortID>324</ResortID>
      </Resort>
      <Resort>
        <ResortID>343</ResortID>
      </Resort>
      <Resort>
        <ResortID>347</ResortID>
      </Resort>
    </Resorts>
    <MealBasisID>0</MealBasisID>
    <MinStarRating>0</MinStarRating>
    <RoomRequests>
      <RoomRequest>
        <Adults>2</Adults>
        <Children>1</Children>
        <Infants>0</Infants>
        <ChildAges>
            <ChildAge>
                <Age>5</Age>
            </ChildAge>
        </ChildAges>
      </RoomRequest>
    </RoomRequests>
  </SearchDetails>
</SearchRequest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:15:23.377

添加 Web 服务时，您必须在窗口底部的文本框中输入名称空间。在该命名空间内将是您需要调用服务的服务客户端。

例如，如果您使用“BookService”作为命名空间，您的代码将如下所示：

```
BookService.SearchRequest searchRequest = new BookService.SearchRequest();
// Fill out the search request

BookService.wbBookSoapClient client = new BookService.wbBookSoapClient();
BookService.SearchResponse response = client.Search(searchRequest); 
```

根据您在下面的评论中发布的代码，您应该将其更新为如下所示：

```
 ServiceReference1.PropertyDetailsRequest searchRequest = new ServiceReference1.PropertyDetailsRequest();
        ServiceReference1.LoginDetails loginDetails = new ServiceReference1.LoginDetails();

        loginDetails.Login = "";
        loginDetails.Password = "";
        loginDetails.AgentReference = "german";

        searchRequest.LoginDetails = loginDetails;
        searchRequest.PropertyID = 20; 

        ServiceReference1.wbBookSoapClient client = new ServiceReference1.wbBookSoapClient();
        ServiceReference1.PropertyDetailsResponse response = client.PropertyDetails(searchRequest); 
```

# c# - 连接 Select 按钮以执行 Javascript 和 HTML

> ID：11435110
> 
> 赞同：0
> 
> 时间：2012-07-11T14:38:34.167
> 
> 标签：c#, javascript, asp.net, html

我有一个简单的视频播放器，可以流式传输 .webm 视频文件，下面有一个 Gridview，它包含我的所有文件和选择按钮。

在我的 aspx 页面中，我有一个 javascript 函数`vidSwap(vidURL)`，它应该更改流视频的来源。当我使用普通表格时，它在 HTML 中完美运行，但这些 gridview 表格仍然让我感到困惑。

是否有一种巧妙的方法可以连接 gridview 中的选择按钮以在播放器上执行视频交换而不重新加载页面？

我的 XML 文件（数据）：

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <video name="2.webm" location="http://10.0.8.168/media/" />
  <video name="redcliff450.webm" location="http://10.0.8.168/media/" />
  <video name="sunflower.webm" location="http://10.0.8.168/media/" />
  <video name="Elephants_Dream.webm" location="http://10.0.8.168/media/" />
</root> 
```

我的 ASP 文件：

```
%@ Page Language="C#" AutoEventWireup="true" CodeBehind="index.aspx.cs" Inherits="VideoStreaming.index" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Streaming Video</title>
    <script type="text/javascript">
        function vidSwap(vidURL) {
            var myVideo = document.getElementsByTagName('video')[0];
            myVideo.src = vidURL;
            myVideo.load();
            myVideo.play();
        }
    </script>

    <script src="/build/jquery.js" type="text/javascript"></script> 
    <script src="/build/mediaelement-and-player.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/build/mediaelementplayer.min.css" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <table style="width:100%;">
            <tr>
                <td>
                    <video width="640" height="360" id="Video1" src="http://10.0.8.168/media/2.webm" 
                    controls="controls" preload="none">
                    </video>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:XmlDataSource ID="XmlDataSource1" runat="server" DataFile="~/App_Data/data.xml" />
                    <asp:GridView ID="GridView1" runat="server" DataSourceID="XmlDataSource1" 
                        AutoGenerateColumns="False" AllowPaging="True" CellPadding="4" 
                        ForeColor="#333333" GridLines="None" 
                        onselectedindexchanged="GridView1_SelectedIndexChanged">
                        <AlternatingRowStyle BackColor="White" />
                        <Columns>
                            <asp:CommandField SelectText="Play" ShowSelectButton="True" />
                            <asp:BoundField DataField="name" HeaderText="name" 
                                SortExpression="name" />
                        </Columns>
                        <EditRowStyle BackColor="#2461BF" />
                        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
                        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
                        <RowStyle BackColor="#EFF3FB" />
                        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
                        <SortedAscendingCellStyle BackColor="#F5F7FB" />
                        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
                        <SortedDescendingCellStyle BackColor="#E9EBEF" />
                        <SortedDescendingHeaderStyle BackColor="#4870BE" />
                    </asp:GridView>
                </td>
            </tr>
        </table>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:16:26.833

如果你仍然想使用你的 JavaScript 函数，你可以试试这个

```
<Columns>
  <asp:TemplateField>
    <ItemTemplate>
       <a href="#" onclick='vidSwap("<%# Eval("videoURL") %>")'>Play</a>
    </ItemTemplate>
  </asp:TemplateField>
....
</Columns> 
```

这是假设`videoURL`您的数据源中有相关的东西。您可以将其更改为从 XML 提供视频 URL 的任何变量名称/属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:47:40.047

你可以用一些 jQuery 很容易地做到这一点。就像是：

```
$('a.select-button-class').click(function() {
vidSwap($(this).attr('href'));
return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:07:39.833

我不知道如何评论你的问题，所以这是我能解决这个问题的唯一方法......你熟悉 iFrame 吗？如果您从代码中删除了视频并将其替换为 iframe，而不是更改交换以加载 iFrame，则不会重新加载页面。

[iFrame 上的 w3Schools](http://www.w3schools.com/tags/tag_iframe.asp)

# powerbuilder - 从 PowerBuilder Classic 12.5 中的 SQL 表填充下拉列表框项

> ID：11435117
> 
> 赞同：0
> 
> 时间：2012-07-11T14:38:58.460
> 
> 标签：powerbuilder

我一直在 Vb.net 上工作，但我切换到 PowerBuilder 12.5 Classic，我正在寻找解决方法。我需要知道等效的 PowerBuilder 脚本；

1.  清除控件“textbox1.clear()”
2.  聚焦“textbox1.focus()”
3.  将 SQL 数据库项插入下拉列表框

```
 While dr.Read
       ComboBox1.Items.Add(dr("itemname"))
    end while 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T17:14:44.053

在完全无视您的问题的情况下回答...

请记住，PowerBuilder 的强大之处在于 DataWindow。从数据库加载下拉列表就像在 DataWindow 列上设置一些属性一样简单，方法是将列设置为 DropDownDataWindow 编辑样式。根据您的需要，在设置 DDDW 属性后，将在检索主 DataWindow 时加载 DDDW 值，无需代码（除此之外，与主 DataWindow 建立数据库连接并检索主 DataWindow）。事实上，DDDW 为组合框提供了额外的功能，因为它的下拉列表是另一个 DataWindow，因此它可以有多个列、标题、图形、基于行的表达式、条件着色、多条文本行高的项目“行”，等等......通过使用 DataWindow，您可以为更多机会敞开大门。（我知道。我退出了我的 PB 简介课程，认为 DW 被夸大了，并试图在没有它们的情况下进行编程。学会欣赏他们所做的一切**很快**。在下一个项目中放弃了我的非 DW 方法。）

祝你好运，

特里

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:20:23.953

1.  `textbox1.Reset()`
2.  `textbox1.SetFocus()`
3.  示例（未经测试，但它显示了这个想法）：

```
 string ls_sql, ls_syntax, ls_errors

    ls_sql = "select name from users"
    ls_syntax = sqlca.SyntaxFromSql(ls_sql, "", ls_errors)
    if len(ls_errors) > 0 then return

    datastore ds
    ds = create datastore
    ds.create(ls_syntax, ls_errors)
    if len(ls_errors) = 0 then
        ds.SetTransObject(sqlca)
        ds.Retrieve()

        long ll_row,ll_rows
        string ls_val
        ll_rows = ds.RowCount()
        for ll_row = 1 to ll_rows
            ls_val = ds.GetItemString(ll_row, "name")
            Combobox1.AddItem(ls_val)
        next

    end if

    destroy ds 
```

***编辑***一些评论：正如 Terry 在其回答中所说，Datawindow 和 DataStore 是 Powerbuilder 的关键控件。将 DataStore 视为 VB 记录集，而 DW 是一种可视化记录集（可以以表格、网格等方式显示数据）。

我通过使用 DS 检索数据并轻松地对其进行迭代来回答您的问题（它比光标更容易操作）并且我翻译了组合框的填充。但正如 Terry 所说，您应该研究如何使用更强大和更进化的 DropDownDataWindow。

# java - ANDROID 如何获得 nwe Acitivity 的可视化编辑器

> ID：11435118
> 
> 赞同：0
> 
> 时间：2012-07-11T14:38:58.877
> 
> 标签：java, android, xml

我已经通过 androidManifest.xml 创建了一个新的 Activity，如下所述：[Best way to add Activity to an Android project in Eclipse?](https://stackoverflow.com/questions/2337874/best-way-to-add-activity-to-an-android-project-in-eclipse)

我有一个类 DrugieOkno，我从 MainActivity 运行它

```
Intent intent = new Intent(this,DrugieOkno.class);
    startActivity(intent); 
```

**但我希望能够按照我设计 MainActivity 窗口的方式来设计它。我想做什么才能访问我在 Eclipse 中工作的 DrugieOkno 的图形布局（这个额外的活动）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:56:47.533

您需要为您创建的布局创建一个布局`Activity`。

*   选择资源/布局
*   右键单击，新建 > 其他
*   选择 Android XML 布局文件，下一步
*   该对话框将让您填写一些基础知识。
*   去你做的课`Activity`并投入`setContentView(R.layout.LAYOUT_FILE_NAME);`。`onCreate()`

# jquery - JQuery匿名函数没有触发

> ID：11435126
> 
> 赞同：2
> 
> 时间：2012-07-11T14:39:19.777
> 
> 标签：jquery

jQuery新手。

使用此代码，“2”的警报有效，但警报“1”却没有。我可以切换顺序并获得相同的结果，并且必须加载 JQuery，否则两者都不起作用。那么匿名函数的声明有什么问题呢？

```
 <script type="text/javascript">
        $(document).ready(function () {
            alert('1');
        });

        $(document).ready(
            alert('2')
        );
     </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:43:52.143

您没有在第二次调用中传递函数，而是传递(ie )`ready()`返回的值。`alert()``undefined`

这意味着`alert()`立即调用（无需等待文档准备好），然后`undefined`传递给`ready()`，这会导致无操作（或可能出现错误，具体取决于您使用的 jQuery 版本）。

您的第一个电话是正确的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:43:23.643

要么是

```
$(document).ready(function() {
 ...
}); 
```

或者

```
$(function() {
 ...
}); 
```

这些是等价的。在你的第二个例子中没有调用`function(){}`是错误的。

拥有几个文档就绪功能是没有意义的。只需将代码放在一个函数中即可。

# python - Ubuntu - Django Haystack 和 Solr 集成错误

> ID：11435127
> 
> 赞同：2
> 
> 时间：2012-07-11T14:39:21.903
> 
> 标签：python, django, solr, django-haystack

我已经阅读了这两个构建搜索应用程序的教程。

1.  [在这里](http://yuji.wordpress.com/2011/08/18/installing-solr-and-django-haystack-on-ubuntu-with-openjdk/)使用 OpenJDK 在 Ubuntu 上安装 Solr 和 django-haystack
2.  Django – Haystack – Solr – 安装指南，[在这里](http://yuji.wordpress.com/2011/08/15/django-haystack-solr-setup-guide/)

但是当我谈到：

> 配置django-haystack，根据文档设置搜索索引类
> 
> [http://docs.haystacksearch.org/dev/tutorial.html#configuration](http://docs.haystacksearch.org/dev/tutorial.html#configuration)
> 
> 将所需的 solr 字段添加到 settings.py（solr 服务器位置）

我收到此错误（尝试导入 haystack 时）：

```
raise ImproperlyConfigured("You must define the HAYSTACK_SITECONF setting before using
         the search framework.")
django.core.exceptions.ImproperlyConfigured: You must define the HAYSTACK_SITECONF 
          setting before using the search framework. 
```

在python中导入haystack，错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/django_haystack-1.2.7-py2.6.egg/haystack
     /__init__.py", line 26, in <module>
    raise ImproperlyConfigured("You must define the HAYSTACK_SITECONF setting before 
       using the search framework.")
django.core.exceptions.ImproperlyConfigured: You must define the HAYSTACK_SITECONF 
           setting before using the search framework. 
```

我已经用`sudo easy_install https://github.com/toastdriven/django-haystack/zipball/v1.2.7`.

我的 Django 版本：1.4

**更新：**

如果你在导入 haystack 的时候遇到这样的错误：

```
ImportError: Settings cannot be imported, because environment variable
      DJANGO_SETTINGS_MODULE is undefined. 
```

尝试在您的项目中导入`./manage.py shell`而不是`import haystack`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:14:31.233

Haystack 1.2.7 不使用`HAYSTACK_CONNECTIONS`; 只有 Haystack 2.0+ 使用该设置。Haystack 文档默认为开发版本（当前为 2.0.0-beta），而不是当前的 PyPi 版本（1.2.7），因此您需要注意您正在查看的文档版本。

但是，如果您想走这条路，Haystack 2.0.0-beta 是完全可用的。我自己用它。你只需要从 Github 克隆它。最简单的方法是使用 pip：

```
pip install git+https://github.com/toastdriven/django-haystack.git#egg=django-haystack 
```

否则，只需下载“master”分支压缩包并使用`python setup.py install`.

# php - 文件不通过 PHP 上传到本地主机

> ID：11435132
> 
> 赞同：2
> 
> 时间：2012-07-11T14:39:35.117
> 
> 标签：php, html

我无法使用 PHP 将文件上传到本地主机。我创建了简单的 html 表单和 php 脚本。但是我收到这些错误消息。

'import.html'

```
<html>
    <body>
        <form action="import.php" method="POST" enctype="multipart/form-data">
            <p>
                <label for="file">Choose import.xml</label><br/>
                <input type="file" name="import" id="import" /></p>
            <p><input type="submit" name="submit" value="Submit" /></p>
        </form>
    <body>
</html> 
```

'import.php'

```
<?php
    if ($_FILES["import"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["import"]["error"] . "<br />";
    }
    else
    {
        echo "Upload: " . $_FILES["import"]["name"] . "<br />";
        echo "Type: " . $_FILES["import"]["type"] . "<br />";
        echo "Size: " . ($_FILES["import"]["size"] / 1024) . " Kb<br />";
        echo "Temp file: " . $_FILES["import"]["tmp_name"] . "<br />";

        if (file_exists("upload/" . $_FILES["import"]["name"]))
        {
            echo $_FILES["import"]["name"] . " already exists. ";
        }
        else
        {
            move_uploaded_file($_FILES["import"]["tmp_name"],
            "upload/" . $_FILES["import"]["name"]);
            echo "Stored in: " . "upload/" . $_FILES["import"]["name"];
        }
    }

?> 
```

错误信息：

> 警告：move_uploaded_file(upload/import.xml) [function.move-uploaded-file]: failed to open stream: No such file or directory in C:\xampp\htdocs\teecom\admin\import.php on line 20
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将 'C:\Windows\Temp\phpD02C.tmp' 移动到 C:\xampp\htdocs\teecom\admin\ 中的 'upload/import.xml'第 20 行的 import.php 存储在：upload/import.xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:24:11.143

看起来您正在使用 Windows。

如果可能，我会将目标路径从相对路径更改为绝对路径。例如：

```
move_uploaded_file($_FILES["import"]["tmp_name"],
            "C:/upload/" . $_FILES["import"]["name"]); 
```

或尝试路径：

```
$_SERVER['DOCUMENT_ROOT'] . '/upload/' . $_FILES['import']['name'] 
```

在尝试上传之前，也可以先尝试创建 C:\upload\ 或 C:\xampp\htdocs\upload\ 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:42:29.647

好吧，根据您的本地主机目录，您可以尝试以下操作：

```
if (!file_exists("teecom/upload"))
{
    mkdir("teecom/upload", 0777, true);
}
if (file_exists("teecom/upload/" . $_FILES["import"]["name"]))
{
    echo $_FILES["import"]["name"] . " already exists. ";
}
else
{
    move_uploaded_file($_FILES["import"]["tmp_name"],
    "teecom/upload/" . $_FILES["import"]["name"]);
    echo "Stored in: " . "upload/" . $_FILES["import"]["name"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:46:46.230

您的文件显然没有上传到`move_uploaded_file`函数应该从中移动它的临时文件夹。发生这种情况的原因有很多，最常见的原因是您没有对 PHP 正在使用的临时文件夹的写入权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T04:17:11.517

这是旧的，但对于将来遇到此问题的人，我为我的 localhost (wamp) 所做的只是单击服务器图标，转到 PHP，PHP 设置，然后选择文件上传。

这对我有用。

# msbuild - 复制构建输出文件，保留目录结构，给出“路径中的非法字符”

> ID：11435136
> 
> 赞同：10
> 
> 时间：2012-07-11T14:39:49.390
> 
> 标签：msbuild

我正在尝试让 MSBuild 脚本用于构建和提取以部署相当大的 Web 应用程序。（我们在这里谈论的是几十个目录中的几千个文件。它几乎是一个继承的遗留代码库，所以我无能为力。）构建本身运行良好，但我似乎无法复制文件到放置位置正常工作。

这是一个片段，显示了我在构建脚本中的内容：

```
<PropertyGroup Condition=" '$(UseBuildNumber)' == 'true' ">
  <ReleaseDirectory>$(ReleaseBaseDirectory)$(ReleaseName)\$(BuildNumber)</ReleaseDirectory>
</PropertyGroup>

<ItemGroup>
  <OutputFiles Include="
               $(SourceRoot)**\*.aspx;
               $(SourceRoot)**\*.dll;
               $(SourceRoot)**\*.gif;
               $(SourceRoot)**\*.ascx;
               " />
</ItemGroup>

<Message Text="Output files ==> @(OutputFiles)" />

<Copy
    SourceFiles="@(OutputFiles)"
    DestinationFolder="$(ReleaseDirectory)"
    SkipUnchangedFiles="false"
    /> 
```

我在那里放了一些额外`<Message/>`的东西来验证各个路径是否正确扩展，并且两者`$(SourceRoot)`确实`$(ReleaseDirectory)`都有正确的路径。但是，在输出中，我得到（为简洁起见省略了完整路径）：

```
Task "Message"
  Output files ==> ...\Requirement1866**\*.aspx;...\Requirement1866**\*.dll;...\Requirement1866**\*.gif;...\Requirement1866**\*.ascx
Done executing task "Message". 
```

显然，没有执行通配符扩展，`Copy`然后（可以预见）以下失败。我只包括一个；实际上，每个文件名通配符模式都会重复此操作（这又比我在上面的构建脚本片段中包含的要多得多）。

```
Using "Copy" task from assembly "Microsoft.Build.Tasks.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "Copy"
  Copying file from "*basedir*\Requirement1866**\*.aspx" to "*targetdir*\Requirement1866\*buildnumber*\*.aspx".
  Command:
  copy /y "*basedir*\Requirement1866**\*.aspx" "*targetdir*\Requirement1866\*buildnumber*\*.aspx"
d:\Builds\215\BuildType\TFSBuild.proj(120,5): error MSB3021: Unable to copy file "*basedir*\Requirement1866**\*.aspx" to "*targetdir*\Requirement1866\*buildnumber*\*.aspx". Illegal characters in path. 
```

其次是：

```
 d:\Builds\215\BuildType\TFSBuild.proj(120,5): error MSB3021: Unable to copy file "*basedir*\Requirement1866**\*.aspx" to "*targetdir*\Requirement1866\*buildnumber*\*.aspx". Illegal characters in path. 
```

我在谷歌搜索过程中遇到的唯一合理相关的打击是[复制任务 - 路径中的非法字符](http://social.msdn.microsoft.com/Forums/sa/msbuild/thread/a611cbb0-ad5d-4c8f-849c-4cbd6bc6db18)，但我已经在使用`<ItemGroup>`，并且`<CreateItem>`示例（改编）根本不起作用，提前中止并出现错误说这`TaskParameter`是未知的（对不起，我面前没有确切的错误信息）。

作为权宜之计，我可以进入并手动将相关文件从构建输出目录复制到我想要的位置，但我希望该过程能够自动化。

**那么，如何使用 MSBuild 将构建过程中创建的文件复制到输出目录中，同时保留相对目录结构，而不是一一列出？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T09:58:56.780

**基本上，`**`是单个路径元素**，因此必须在`Include`指令中相应地用反斜杠分隔：

```
<ItemGroup>
  <OutputFiles Include="
               $(SourceRoot)\**\*.aspx;
               $(SourceRoot)\**\*.dll;
               $(SourceRoot)\**\*.gif;
               $(SourceRoot)\**\*.ascx;
               " />
</ItemGroup> 
```

`$(SourceRoot)\**\*.aspx`请注意指定 eg与指定 broken之间的区别`$(SourceRoot)**\*.aspx`。如果`$(SourceRoot)`以`\`, 通配符扩展结束，一开始可能也会起作用。

其次，在 中`<Copy/>`，使用`%(RecursiveDir)`：

```
<Copy
    SourceFiles="@(OutputFiles)"
    DestinationFolder="$(ReleaseDirectory)\%(RecursiveDir)"
    SkipUnchangedFiles="false"
    /> 
```

通过这些更改，它看起来就像我想要的那样工作：文件被复制到预期的目标目录，并且源目录结构保留在目标位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:58:04.827

另一个建议，不是为每个文件类型添加包含，而是很容易添加排除。

```
<ItemGroup>
  <OutputFiles Include="$(SourceRoot)**\*.*" Exclude="$(SourceRoot)**\*.cs;$(SourceRoot)**\*.resx" " />
</ItemGroup> 
```

这样，输出将包括任何所需的 JS、HTML、DHTML 和其他文件类型。

# .net - 让我的 .net 网站在主机上保持活力的最佳方式？

> ID：11435137
> 
> 赞同：2
> 
> 时间：2012-07-11T14:39:53.923
> 
> 标签：.net, hosting

我有一个没有很多访问者的 .net 网站，这意味着当它访问时，它必须启动该站点，这需要一些时间。

使网站保持活力和准备就绪的最佳方式是什么？我在 Internet 上找到了几个 ping 服务，但我不确定这是否是要走的路。但如果是，我应该使用哪一个？

主机服务确实拥有许多其他客户的 Web 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:04:44.137

如果您有权访问 IIS 配置，则可以执行以下操作。

在 IIS7 中。

*   转到 IIS 树中您的服务器名称下的“应用程序池”项。
*   然后右键单击包含您的应用程序的池并转到“高级设置”
*   在进程模型下的高级设置中找到“空闲超时（分钟）”设置。
*   将其设置为非常高的值，这将使您的应用程序保持运行。

在 IIS6 中。

*   转到 IIS 树中您的服务器名称下的“应用程序池”项。
*   然后右键单击包含您的应用程序的池并打开属性
*   在属性对话框中转到性能选项卡并增加空闲超时 - 该选项卡上的第一个设置。

更改应用程序池的设置将更改该池中运行的所有应用程序的设置，因此请小心。您可能希望为您的 Web 应用程序创建一个单独的池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T16:46:10.990

我知道这个线程很旧，但设置`Idle Time-out`只会导致应用程序池工作进程保持活动状态。当你有一个回收政策（我认为你需要一个）时，无论如何它都会终止这个过程。=< .net 4 的唯一解决方案是调用页面。调用页面并不意味着您的应用程序已完全加载。例如，每个页面都可以有自己的程序集。

.net 4.5 及更高版本与 IIS 7.5 或更高版本相结合，具有执行此操作的内置功能：[http ://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-应用程序初始化](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T06:17:17.563

对于解决方法，我总是使用计划作业/命令脚本来打开浏览器并在给定周期内访问该站点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T14:45:28.113

这与您使用的 .Net 和 IIS 的版本无关，但对于 4.0 和 IIS 7，您可以添加一个 Web 配置键来指示 IIS 在请求不频繁时保留该站点。

将这些添加到您的 web.config；

```
<add key="UseAppKeepAlive" value="false" />
<add key="AppKeepAliveUrl" value="" /> 
```

如果使用带有集成管道模式的 IIS 7，则必须在 AppKeepAliveUrl 中指定指向站点根目录的 URL，例如[http://yourdomain.com/Default.aspx](http://yourdomain.com/Default.aspx)

请参阅以下文章以获取指导；

[http://www.mojoportal.com/using-the-appkeepalive-task-to-speed-up-a-low-traffic-site.aspx](http://www.mojoportal.com/using-the-appkeepalive-task-to-speed-up-a-low-traffic-site.aspx)

# java - 在不影响外观的情况下更改 JComboBox 弹出窗口大小？

> ID：11435138
> 
> 赞同：1
> 
> 时间：2012-07-11T14:40:03.853
> 
> 标签：java, swing, jcombobox

我正在寻找一种方法来改变 JComboBox 弹出窗口的宽度。基本上，弹出窗口应该与最宽的组合框条目一样宽，而不是当前组合框的宽度。

我知道如何实现这一点的唯一方法是创建 ComboBoxUI 的自定义实例并将其设置在 JComboBox 上（示例代码演示了目标：顶部组合框显示宽弹出窗口，底部是默认行为）。然而，由于它替换了 ComboBox 的 UI，它在某些 L&F 上可能看起来很奇怪（例如，对于 WinXP Luna 主题，ComboBox 看起来像 Classic 主题）。

有没有办法以与 L&F 无关的方式实现这种行为？

```
public class CustomCombo extends JComboBox {

    final static class CustomComboUI extends BasicComboBoxUI {
        protected ComboPopup createPopup() {
            BasicComboPopup popup = new BasicComboPopup(comboBox) {
                @Override
                protected Rectangle computePopupBounds(int px, int py, int pw, int ph) {
                    return super.computePopupBounds(px, py, Math.max(
                            comboBox.getPreferredSize().width, pw), ph);
                }
            };
            popup.getAccessibleContext().setAccessibleParent(comboBox);
            return popup;
        }
    }

    {
        setUI(new CustomComboUI());
    }

    public static void main(String[] argv) {
        try {
            final String className = UIManager.getSystemLookAndFeelClassName();
            UIManager.setLookAndFeel(className);
        } catch (final Exception e) {
            // ignore
        }
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createGUI();    
            }
        });
    }

    public static void createGUI() {
        JComboBox combo1 = new CustomCombo();
        JComboBox combo2 = new JComboBox();
        JPanel panel = new JPanel();
        JFrame frame = new JFrame("Testframe");
        combo1.addItem("1 Short item");
        combo1.addItem("2 A very long Item name that should display completely in the popup");
        combo1.addItem("3 Another short one");
        combo2.addItem("1 Short item");
        combo2.addItem("2 A very long Item name that should display completely in the popup");
        combo2.addItem("3 Another short one");
        panel.setPreferredSize(new Dimension(30, 50));
        panel.setLayout(new GridBagLayout());
        GridBagConstraints gc;
        gc = new GridBagConstraints(0, 0, 1, 1, 1D, 0D, GridBagConstraints.WEST,
                GridBagConstraints.HORIZONTAL, new Insets(0, 0, 0, 0), 0, 0);
        panel.add(combo1, gc);
        gc = new GridBagConstraints(0, 1, 1, 1, 1D, 0D, GridBagConstraints.WEST,
                GridBagConstraints.HORIZONTAL, new Insets(0, 0, 0, 0), 0, 0);
        panel.add(combo2, gc);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(panel, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:15:46.727

1.  通过使用 GBC，您可以在容器中设置适当的高度和重量

2.  正如@trashgod 提到的，下一个方法是`PreferredSize`使用`JComboBox.setPrototypeDisplayValue()`

3.  使用@camickr 的[组合框弹出窗口](http://tips4java.wordpress.com/2010/11/28/combo-box-popup/)

4.  对于派生`JPopup`必须使用`pack()`，否则太难改变它的`Dimension`容易

.

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.plaf.basic.*;

public class ComboBoxExample extends JPanel implements ActionListener {
//http://stackoverflow.com/a/5058210/714968

    private static final long serialVersionUID = 1L;
    private JComboBox comboBox;

    public ComboBoxExample() {
        String[] petStrings = {"Select Pet", "Bird", "Cat", "Dog", "Rabbit", "Pig", "Other"};
        comboBox = new JComboBox(petStrings);
        comboBox.setPrototypeDisplayValue("XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX");
        add(comboBox, BorderLayout.PAGE_START);
        JFrame frame = new JFrame("ComboBoxExample");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(comboBox);
        frame.setName("ComboBoxExample");
        frame.setLocation(150, 150);
        frame.pack();
        frame.setVisible(true);
        Timer timer = new javax.swing.Timer(2000, this);
        timer.start();
    }

    public void actionPerformed(ActionEvent e) {
        comboBox.showPopup();
        Object child = comboBox.getAccessibleContext().getAccessibleChild(0);
        BasicComboPopup popup = (BasicComboPopup) child;
        popup.setName("BasicComboPopup");
        JList list = popup.getList();
        Container c = SwingUtilities.getAncestorOfClass(JScrollPane.class, list);
        JScrollPane scrollPane = (JScrollPane) c;
        Dimension size = scrollPane.getSize();
        if (size.width > 30) {
            size.width -= 5;
        }
        scrollPane.setPreferredSize(size);
        scrollPane.setMaximumSize(size);
        Dimension popupSize = popup.getSize();
        popupSize.width = size.width;
        Component parent = popup.getParent();
        parent.setSize(popupSize);
        parent.validate();
        parent.repaint();
        Window mainFrame = SwingUtilities.windowForComponent(comboBox);
        //Returns the first Window ancestor of c, or null if c is not contained inside a Window.
        System.out.println(mainFrame.getName());
        Window popupWindow = SwingUtilities.windowForComponent(popup);
        System.out.println(popupWindow.getName());
        Window popupWindowa = SwingUtilities.windowForComponent(c);
        System.out.println(popupWindowa.getName());

        Window mainFrame1 = SwingUtilities.getWindowAncestor(comboBox);
        //Returns the first Window ancestor of c, or null if c is not contained inside a Window.
        System.out.println(mainFrame1.getName());
        Window popupWindow1 = SwingUtilities.getWindowAncestor(popup);
        System.out.println(popupWindow1.getName());

        Component mainFrame2 = SwingUtilities.getRoot(comboBox);
        //Returns the root component for the current component tree.
        System.out.println(mainFrame2.getName());
        Component popupWindow2 = SwingUtilities.getRoot(popup);
        System.out.println(popupWindow2.getName());
        //  For heavy weight popups you need always to pack() for the window
        if (popupWindow != mainFrame) {
            popupWindow.pack();
        }
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                ComboBoxExample comboBoxExample = new ComboBoxExample();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:48:26.327

这个 hack 似乎适用于 Java6/7。它基本上覆盖 getSize() 以检测是否从弹出 UI 中调用该方法。如果它检测到它，则它与组合框的当前大小有关。然后弹出窗口根据伪造的大小值确定其大小。

检测代码是残酷的（它查看调用堆栈）并且是围绕调用类的名称包含 ComboPopup 的假设构建的。它可能无法检测某些 UI 实现的条件，在这种情况下，它只会保留默认行为。

```
public class PopupHackComboBox extends JComboBox {

    // --------------------------------------------------------------
    // ---
    // --- Hack to get control of combobox popup size
    // ---
    // --------------------------------------------------------------
    /**
     * Gets the width the combo's popup should use.
     * 
     * Can be overwritten to return any width desired.
     */
    public int getPopupWidth() {
        final Dimension preferred = getPreferredSize();
        return Math.max(getWidth(), preferred.width);
    }

    @SuppressWarnings("deprecation")
    @Override
    public Dimension size() {
        return getSize((Dimension) null);
    }

    @Override
    public Dimension getSize() {
        return getSize((Dimension) null);
    }

    @Override
    public Dimension getSize(final Dimension dimension) {
        // If the method was called from the ComboPopup,
        // simply lie about the current size of the combo box.
        final int width = isCalledFromComboPopup() ? getPopupWidth() : getWidth();
        if (dimension == null) {
            return new Dimension(width, getHeight());
        }
        dimension.width = width;
        dimension.height = getHeight();
        return dimension;
    }

    /**
     * Hack method to determine if called from within the combo popup UI.
     */
    public boolean isCalledFromComboPopup() {
        try {
            final Throwable t = new Throwable();
            t.fillInStackTrace();
            StackTraceElement[] st = t.getStackTrace();
            // look only at top 5 elements of call stack
            int max = Math.min(st.length, 5);
            for (int i=0; i<max; ++i) {
                final String name = st[i].getClassName();
                if (name != null && name.contains("ComboPopup")) {
                    return true;
                }
            }
        } catch (final Exception e) {
            // if there was a problem, assume not called from combo popup
        }
        return false;
    }

} 
```

# iphone - 为什么 libdispatch.dylib 调用 corehandwriting？

> ID：11435140
> 
> 赞同：0
> 
> 时间：2012-07-11T14:40:11.453
> 
> 标签：iphone, ios, instruments, handwriting

我这里有一个奇怪的问题。

我使用仪器来查看我的应用程序的泄漏。

而且发现corehandwriting函数会被libdispatch.dylib调用，占用很大

内存空间的大小。

但是，如果将此应用程序放在 ipad 上并运行，libdispatch.dylib 将不会调用 corehandwriting。

我不想使用 corehandwriting 功能。我不希望它占用内存空间。

谁能告诉我为什么会调用corehandwriting？

以及如何使libdispatch.dylib 不调用corehandwriting？

多谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:43:54.603

我从来没有听说过任何叫做 CoreHandwriting 的东西。引起了我的兴趣。

我无法在我的设备上复制它。但这并不奇怪：看看图书馆里的符号，这看起来像是用于中文/汉字字符识别的，我没有在我的手机上打开它。

我想知道您是否在一台设备上启用了手写功能而不在另一台设备上启用了手写功能？

请参阅[http://thisfinger.com/support/enable_handwriting](http://thisfinger.com/support/enable_handwriting)

# c# - 带图像的 XamlReader

> ID：11435145
> 
> 赞同：4
> 
> 时间：2012-07-11T14:40:28.870
> 
> 标签：c#, wpf, xaml, xamlreader

我正在 WPF (.Net 3.5) 中创建一个应用程序，我希望能够基于每个客户端进行自定义。我将资源抽象为外部 xaml（主题）文件。使用构建为 a 的 xaml 文件`Page`，这很完美。

现在我想使用`XamlReader`动态加载主题的 xaml 文件。这样我可以编译应用程序，其他人可以自定义应用程序（每个客户端），而无需处理重新编译或访问源代码。这是我正在做的事情的快照：

```
Directory.GetFiles(pathToThemeDirectory).Each((file) =>
{
     using (Stream stream = new FileStream(file, FileMode.Open))
     {
          var dir = Directory.GetCurrentDirectory();
          var dict = XamlReader.Load(stream) as ResourceDictionary;
          Application.Current.Resources.MergedDictionaries.Add(dict);
     }
}); 
```

现在这似乎可以正确解析 Xaml。但是，我现在收到如下错误：

```
Cannot convert string '/Path/To/Image/File.ico' in attribute 'Icon' to object of 
type 'System.Windows.Media.ImageSource'. Cannot locate resource
'/Path/To/Image/File.ico'.  Error at object 'System.Windows.Setter' 
```

我希望能够为每个客户端更改这些资源（徽标图像等），因此我将构建操作从`Resource`to更改`None`为始终复制到输出目录。

关于如何在运行时解析 Xaml 并更改我的配置以获取不需要在程序集中编译的图像资源是否有任何建议？还是我完全不在基地，有更好的方法来实现这个主题定制？

* * *

## 更新：

这是给出错误的确切行：

```
<Style x:Key="MainWindow">
    <Setter Property="Window.Icon" Value="/Assets/icon.ico" />
</Style> 
```

但那是因为这是第一个加载的资产。这是另一个例子：

```
<ImageBrush x:Key="NavigationBackgroundImage" ImageSource="Assets/bg.png" TileMode="Tile" Stretch="UniformToFill"/> 
```

这些仅用于通过以下方式访问的样式：

```
{StaticResource MainWindow} 
```

或者

```
{StaticResource NavigationBackgroundImage} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:58:39.920

看来您需要根据此[博客](http://blogs.interknowlogy.com/2011/09/02/xamlreader-looseresourcedictionaryfiles-parsercontext/)创建一个 ParserContext 。

在那个例子中，他正在做：

```
var resourceDictionary = XamlReader.Load(fileStream) as ResourceDictionary;
if(resourceDictionary != null)
{
    Resources.MergedDictionaries.Add(resourceDictionary)
} 
```

但后来代码改为：

```
var applicationDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
if(!String.IsNullOrEmpty(applicationDirectory ))
{

    var runtimeResourcesDirectory = Path.Combine(applicationDirectory , "RuntimeResources");
    var pc = new ParserContext
    {
        BaseUri = new Uri(runtimeResourcesDirectory , UriKind.Absolute)
    };
    if(Directory.Exists(runtimeResourcesDirectory ))
    {
        foreach (string resourceDictionaryFile in Directory.GetFiles(runtimeResourcesDirectory , "*.xaml"))
        {
            using (Stream s = File.Open(resourceDictionaryFile, FileMode.Open, FileAccess.Read))
            {
                try
                {
                    var resourceDictionary = XamlReader.Load(s, pc) as ResourceDictionary;
                    if (resourceDictionary != null)
                    {
                        Resources.MergedDictionaries.Add(resourceDictionary);
                    }
                }
                catch
                {
                    MessageBox.Show("Invalid xaml: " + resourceDictionaryFile);
                }
            }
        }
    }
} 
```

希望这可以帮助！

# google-apps-script - 当值从变量传递给它时，UI createHTML（）不起作用

> ID：11435146
> 
> 赞同：0
> 
> 时间：2012-07-11T14:40:30.827
> 
> 标签：google-apps-script

我正在创建一个脚本，该脚本使用 createHTML 将数据写入小工具，但由于某种原因，当我使用变量时，没有任何内容写入小工具，直接插入文本效果很好，即 createHTML('Hi')。

这是我的代码：

```
function doGet() {
var app = UiApp.createApplication();
var spreadsheet = SpreadsheetApp.openById('');
var sheet = spreadsheet.getSheetByName('Users');
var user = Session.getActiveUser();
var site = SitesApp.getActivePage();
var url = site.getUrl();
var data = sheet.getDataRange().getValues();

Logger.log(url);
Logger.log(user);

for (var i = 0; i < data.length; i++) {
  var row = data[i];
  var urlI = row[13];
  if (urlI == url){
    var about = row[12]
    Logger.log(about);
    if (about = "")
    {
    Logger.log('0');
    }
    else
    {
      var aboutTxt = app.createHTML('<p>' + about + '</p>');
      app.add(aboutTxt);
      break;
    }
  }
}
 return app;
} 
```

我认为当将电子表格中的值读入变量时，数据类型不是字符串而是对象或其他东西，但我不确定。如果是这种情况，是否有人知道如何将数据类型转换为字符串或其他解决方法？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:22:04.173

你的代码看起来不错。您确定执行正在进入 else{} 部分吗？您提到数据类型可能不是字符串。要将某些内容转换为字符串，您可以使用 toString() 方法。

例如：

```
about.toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:58:53.410

你能试试这个简单的测试吗，只需在一行单元格上填充几个单元格，并带有一些 html 内容，按下按钮时 UI 会更新。

```
var sh = SpreadsheetApp.getActiveSheet();
var ss = SpreadsheetApp.getActiveSpreadsheet();
//
function move() {
   var app = UiApp.createApplication().setTitle("move test")
       .setHeight(100).setWidth(400).setStyleAttribute("background-color","beige");
   var panel = app.createVerticalPanel();
   var next = app.createButton('next').setWidth('180');
   var chkmode = app.createCheckBox("moving mode (checked = up/dwn, unchecked=L/R)").setValue(false).setName('chkmode');
   var cellvaluestring = sh.getActiveRange().getValue().toString();
   var label = app.createHTML('<p>' + cellvaluestring + '</p>').setId('label');
   panel.add(next).add(chkmode).add(label);
   var handler = app.createServerHandler('click').addCallbackElement(panel);
   next.addClickHandler(handler);
   app.add(panel);
   ss.show(app);
 }
//
function click(e) {
  var app = UiApp.getActiveApplication();
  var activeline = sh.getActiveRange().getRow();// get the row number of the selected cell/range
  var activecol = sh.getActiveRange().getColumn();// get the row number of the selected cell/range
  var cellvaluestring = sh.getActiveRange().getValue().toString();
  var label = app.getElementById('label');
  label.setHTML('</p>'+cellvaluestring+'</p>');
  var chkmode=e.parameter.chkmode;
  if(chkmode=="true"){
    activeline++
    }else{
      activecol++}
  var sel=sh.getRange(activeline,activecol);
  sh.setActiveSelection(sel);// make the next row active
  return app;
 } 
```

# asp.net - Asp - 按日期显示数据

> ID：11435147
> 
> 赞同：0
> 
> 时间：2012-07-11T14:40:31.767
> 
> 标签：asp.net

是否可以按 LastActivityDate 的顺序显示此数据

```
<asp:AccessDataSource ID="usage_info_DS" runat="server" DataFile="~/App_Data/ASPNetDB.mdb" SelectCommand="SELECT aspnet_Users.UserName, aspnet_Users.LastActivityDate, aspnet_Membership.LastLoginDate FROM (aspnet_Membership INNER JOIN aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId) WHERE (aspnet_Membership.UserId <> 100) AND (aspnet_Membership.UserId IN (SELECT UserId FROM aspnet_UsersInRoles WHERE (RoleId = (SELECT RoleId FROM aspnet_Roles WHERE (RoleName = ?)))))">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" Name="?" PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:AccessDataSource> 
```

干杯罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:01:14.587

在 sql 语句中使用[order by 子句。](http://msdn.microsoft.com/en-us/library/ms188385.aspx)所以你的查询应该是：

```
SELECT 
aspnet_Users.UserName, 
aspnet_Users.LastActivityDate, 
aspnet_Membership.LastLoginDate 
FROM 
        (aspnet_Membership INNER JOIN aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId) 
WHERE   
        (aspnet_Membership.UserId <> 100) 
        AND (aspnet_Membership.UserId IN (SELECT UserId FROM aspnet_UsersInRoles 
                                          WHERE (RoleId = (SELECT RoleId FROM aspnet_Roles WHERE (RoleName = ?)))))
order by 2; 
```

2 指定应用排序依据的列，也可以使用列名`aspnet_Users.LastActivityDate`

**编辑：**

如果要在结果集顶部获取最新日期，请使用：

```
order by 2 desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:54:19.473

尝试

```
<asp:AccessDataSource ID="usage_info_DS" runat="server" DataFile="~/App_Data/ASPNetDB.mdb" SelectCommand="SELECT aspnet_Users.UserName, aspnet_Users.LastActivityDate, aspnet_Membership.LastLoginDate FROM (aspnet_Membership INNER JOIN aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId) WHERE (aspnet_Membership.UserId <> 100) AND (aspnet_Membership.UserId IN (SELECT UserId FROM aspnet_UsersInRoles WHERE (RoleId = (SELECT RoleId FROM aspnet_Roles WHERE (RoleName = ?))))) order by aspnet_Users.LastActivityDate">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" Name="?" PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:AccessDataSource> 
```

# opengl - OpenGL 3程序黑屏

> ID：11435153
> 
> 赞同：2
> 
> 时间：2012-07-11T14:40:49.533
> 
> 标签：opengl, opengl-3

我一直在将我的一些旧代码转换为 OpenGL 3，并且我已经得到了大部分工作。所有的 VAO、VBO 等都工作正常，正如 OpenGL 调试程序所验证的那样，我的着色器编译得很好，但屏幕上除了我的清晰颜色之外什么都没有出现。我认为我所有的矩阵都应该没问题，尽管我不确定投影矩阵是否应该将负 Z 坐标转换为正坐标；我尝试过的每个代码示例都会产生这样的矩阵。这是我的着色器：

顶点着色器：

```
#version 330

uniform mat4 modelview;
uniform mat4 projection;

in vec4 position;
in vec4 normal;
in vec4 texCoord;

void main() {
    gl_Position = projection * modelview * position;
} 
```

片段着色器：

```
#version 330

out vec4 fragColor;

void main() {
    fragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

我的代码很复杂，所以我将发布一个经过修改的注释版本的 glIntercept 调用日志，它应该包含所有相关调用：

```
 //Create shaders
glCreateShader(GL_VERTEX_SHADER)=1 
glShaderSource(1,1,vertShaderText,vertShaderTextLen)
glCompileShader(1)
glGetShaderiv(1,GL_COMPILE_STATUS,buf)
glCreateShader(GL_FRAGMENT_SHADER)=2 
glShaderSource(2,1,fragShaderText,fragShaderTextLen)
glCompileShader(2)
glGetShaderiv(2,GL_COMPILE_STATUS,buf)
glCreateProgram()=3 
glAttachShader(3,1)
glAttachShader(3,2)
glLinkProgram(3)
glGetProgramiv(3,GL_LINK_STATUS,buf)
//Find uniform/attribute locations
//Extra glUseProgram() calls are for safety.
glGetUniformLocation(3,"modelview")=0 
glUseProgram(3)
glGetUniformLocation(3,"projection")=1 
glUseProgram(3)
glGetAttribLocation(3,"position")=0 
glUseProgram(3)
glGetAttribLocation(3,"normal")=-1 
glUseProgram(3)
glGetAttribLocation(3,"texCoord")=-1
//Create a texture; probably irrelevant to this code
glGenTextures(1,texId)
glBindTexture(GL_TEXTURE_2D,1)
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR)
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR)
glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA,256,256,0,GL_RGBA,GL_UNSIGNED_BYTE,texData)
glGenTextures(1,01DD275C)
//Create VAO, VBO
glGenVertexArrays(1,vaoId)
glBindVertexArray(1)
glGenBuffers(1,bufId)
glBindBuffer(GL_ARRAY_BUFFER,1)
//Redundant call; actual data set later
glBufferData(GL_ARRAY_BUFFER,0,00000000,GL_STATIC_DRAW)

glGenBuffers(1,indexBufId)
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,4)
glBufferData(GL_ELEMENT_ARRAY_BUFFER,0,00000000,GL_STATIC_DRAW)

//Set up buffer data
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,4)
glBufferData(GL_ELEMENT_ARRAY_BUFFER,96,indexData,GL_STATIC_DRAW)
glBindBuffer(GL_ARRAY_BUFFER,1)
glBufferData(GL_ARRAY_BUFFER, 48,01DC3D00,GL_STATIC_DRAW)

//Start drawing
glClear(GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT)
glUseProgram(3)
glUseProgram(3)
//Modelview
glUniformMatrix4fv(modelviewLocation,1,false,[1.000000,0.000000,0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,-6.000000,1.000000])
glUseProgram(3)
//Projection
glUniformMatrix4fv(projectionLocation,1,false,[0.200000,0.000000,0.000000,0.000000,0.000000,0.150000,0.000000,0.000000,0.000000,0.000000,-1.000200,-1.000000,0.000000,0.000000,-0.200020,0.000000])
//Bind VAO, VBOs, and attribute positions
glBindVertexArray(1)
glBindBuffer(GL_ARRAY_BUFFER,1)
glVertexAttribPointer(positionAttributeLocation,3,GL_FLOAT,false,12,00000000)
glEnableVertexAttribArray(positionAttributeLocation)
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,4)
glDrawElements(GL_TRIANGLES,24,GL_UNSIGNED_INT,00000000) GLSL=3  Textures[ (0,2) ]
glDisableVertexAttribArray(0) 
```

我有一架飞机直接面向相机，但它根本没有出现。我所看到的只是清晰的颜色。剔除和深度测试已关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:48:00.763

将制服传递给着色器时，我以下列方式使用了 glGetUniformLocation()：

```
myUniformLocation = glGetUniformLocation(program, "myUniform")
glUniform1f(myUniformLocation, variable_value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:58:54.920

您的日志没有显示任何`glEnableVertexAttribArray`呼叫。你忘了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-06T23:43:54.643

事实证明，我的问题出在我的初始化代码中。我有未初始化的变量被传递给 glViewport，给了我一个 0x0 的视口。

# javascript - JQuery摆动延迟

> ID：11435154
> 
> 赞同：1
> 
> 时间：2012-07-11T14:40:51.440
> 
> 标签：javascript, jquery, delay

使用 JQuery wiggle 插件：[http](http://www.class.pm/files/jquery/jquery.wiggle/demo/) ://www.class.pm/files/jquery/jquery.wiggle/demo/ 我该怎么做这样的事情？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js" type="text/javascript"></script>
<script src="http://static.manpoints.uk.to/js/wiggle.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
  $(".large_image").click(function() {
    $(this).wiggle('start').delay(800).wiggle('stop');
  });
}); 
```

目前我得到一个响应“未捕获的类型错误：对象#没有方法'延迟'”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:45:25.630

该方法不能与 链接`delay()`，试试这个：

```
$(".large_image").click(function() {
    $(this).wiggle('start');
}).delay(800).queue(function(){
   $(this).waggle('stop')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:45:05.350

从他们的文档（尽管有限）来看，`delay`这*不是*一个功能。这是一个选择。我不能肯定地说，但我认为语法可能看起来像：

```
$(".large_image").click(function() {
    $(this).wiggle('start',{delay:800}).wiggle('stop');
}); 
```

# android - 不同颜色过滤器的 ListView 缓存不起作用

> ID：11435155
> 
> 赞同：3
> 
> 时间：2012-07-11T14:40:52.383
> 
> 标签：android, android-listview, android-view

我正在使用一个使用 ViewHolder 模式并利用缓存机制的列表视图。这是我尝试设置列表项背景之一的代码片段

```
if(drawable!=null)
    {
        if(this.backgroundBurnColor!=null && this.backgroundBurnColor.getValue()!=0)
        {
            Log.d("burncolor", this.backgroundBurnColor.getValue()+"");
            drawable.setColorFilter(this.backgroundBurnColor.getValue(), Mode.MULTIPLY);

        }else if(this.burnColorKey!=null)
        {
            Log.d("burncolor", this.Owner.getOwner().getColors().get(this.burnColorKey).getValue()+"");
            drawable.setColorFilter(this.Owner.getOwner().getColors().get(this.burnColorKey).getValue(), Mode.MULTIPLY);
        }else{
            drawable.setColorFilter(null);
        }
        v.setBackgroundDrawable(drawable);
    } 
```

在此代码中，drawable 用于相同的项目类型，但即使当我更改可绘制图像时相同的项目类型，它也会根据需要更改。但是更改可绘制的颜色过滤器会更改出现在屏幕上的列表部分中的每个可绘制过滤器。例如，当我向下滚动列表并且屏幕上出现不同的颜色过滤器时，然后所有可绘制对象的颜色过滤器都变成相同的过滤器，我需要为我的每一行获取单独的颜色过滤器。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T13:51:05.070

对于那些想知道答案的人，Romain Guy 有一篇关于 android 中可绘制突变的博客文章： [http ://www.curious-creature.org/2009/05/02/drawable-mutations/](http://www.curious-creature.org/2009/05/02/drawable-mutations/)

当从资源中引用drawable时，只有一个Drawable实例被初始化，所以所有引用都指向同一个对象。为此，有 `mutate()`一种可绘制的方法

而不是写

```
 drawable.setColorFilter(null); 
```

写作

```
 drawable.mutate().setColorFilter(null); 
```

会解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:46:17.343

彩色滤光片设置在`Drawable`. 因此，如果您不希望两个项目具有相同的滤色器，则应该`Drawable`为这两个项目设置两个单独的对象。

# facebook - 如何查看已删除好友的消息和墙贴

> ID：11435156
> 
> 赞同：-1
> 
> 时间：2012-07-11T14:40:55.773
> 
> 标签：facebook, find

如何查看已删除朋友的消息和墙贴？一个朋友参与了犯罪，犯罪分子删除了友谊。通过消息和墙上的帖子，有很多与这次盗窃有关的信件。他正试图找到这些信件以向当局展示...请帮助。

谢谢你。克里斯赫尔默森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:49:52.920

Facebook 允许用户下载包含个人信息的存档（包括墙贴和消息）。要下载它，您应该转到帐户设置，在页面底部您将看到“下载您的 Facebook 数据的副本”。

[Facebook 帮助中心](http://www.facebook.com/help/?page=116481065103985)的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:42:49.987

您将需要为此联系 Facebook。这不是我们可以在这里为您提供帮助的事情，因为这是来自 Facebook 的限制。

# jquery - 没有 ASP.NET 更新面板或脚本管理器的 ASP.NET Web 窗体 jQuery 更新进度

> ID：11435161
> 
> 赞同：0
> 
> 时间：2012-07-11T14:41:17.803
> 
> 标签：jquery, asp.net, ajax, forms, web

在我的联系页面上，我在提交点击下进行了一些验证。单击提交按钮时，我想在我的联系表单上显示更新进度。我可以在不使用 Asp.net 更新面板或脚本管理器的情况下做到这一点吗？

更新面板和脚本管理器再加载 300KB。它使页面变慢。

我应该怎么办？

我使用了 jQuery 验证，验证后我使用了以下代码：

```
$.ajax({ 
    type: "POST", 
    url: "", 
    data: "{}", 
    contentType: "application/json; charset=utf-8", 
    dataType: "json", 
    async: true, 
    success: function (msg) { 
        $("#progressbar").html(""); 
        $("#result").text(msg.d); 
        clearInterval(intervalID); 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:02:18.890

您的情况听起来相当标准，我同意 jeschafe 的观点，即 300k 不应导致任何明显的减速。我相信在这种情况下使用更新面板是正确的选择，但是您可以编写自己的解决方案，执行如下操作：

创建一个页面方法，您将在其中执行验证并使用 jQuery 序列化您的表单并对页面方法进行 ajax 调用（[此处示例](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)）。如果验证过程需要一段时间，您可以使用来自[此类](http://ajaxload.info/)站点的加载 gif并在等待响应时显示它。

# java - 控制台输出流的类型

> ID：11435162
> 
> 赞同：1
> 
> 时间：2012-07-11T14:41:18.973
> 
> 标签：java, console, log4j, outputstream

除了`Standard output`and之外`standard error`，Java 中还有其他类型的控制台输出流吗？我正在使用 Jenkins（可能不相关）并且我想在我的控制台中添加一个新的输出部分，除了`Standard output`and `standard error`; 类似的东西`Special Values`。我正在使用`log4j`，但我也可以使用`System.out`等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T04:57:02.760

You could do it using your `logger`.

For instance:

```
import org.apache.log4j.Logger;

public class MyClass {
    private static Logger logger = Logger.getLogger("name"); // declare this as field
    ...
    public void someMethod() {
        logger.info("someMethod was invoked");
    }
} 
```

additionally your `log4j.properties` file will look like:

```
log4j.rootLogger=debug, file
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=/path/to/logs/application.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%t %-5p %c{2} - %m%n 
```

# c++ - 如何使用 cc 在 Solaris 中编译 c++？

> ID：11435165
> 
> 赞同：4
> 
> 时间：2012-07-11T14:41:35.977
> 
> 标签：c++, solaris

我写了一个程序，需要在**Linux**、**Windows**和**Solaris**中测试。前两个很容易，但 Solaris 一直很麻烦。我在运行这些测试的 Solaris 机器上没有 g++，所以我坚持使用`cc`. 所以，我首先尝试：

```
cc -g -o transfer transfer.cpp -lcurl 
```

输出是：

```
ld: fatal: file transfer.cpp : unknown file type
ld: fatal: no output written to transfer 
```

如果有人知道任何其他本机`C++`编译器`Solaris`，请告诉我，我会试一试。我去了 Oracle Solaris 网站，他们说他们`.cpp`支持`cc`. 有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T14:48:24.620

是`CC`为了`C++`，不是`cc`。所以，如果你想`C++`在 solaris中编译

```
CC -g -o [output] [filename] [libraries] 
```

做`C`：

```
cc -g -o [output] [filename] [libraries] 
```

请注意大写字母！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T14:49:28.333

Solaris (Sun) C++ 编译器是`CC`（注意大写）。另请注意，它往往不太符合其他一些编译器的标准，因此您的代码可能会也可能不会编译。您可以提高标准库的一致性`-library=stlport4`。

# operator-overloading - VB.NET 对象默认属性值的赋值

> ID：11435166
> 
> 赞同：0
> 
> 时间：2012-07-11T14:41:37.573
> 
> 标签：operator-overloading, variable-assignment, default-value, assignment-operator

这是一个非常奇怪的问题，你可能会发现它是。我正在做一个巨大的 VB6 到 VB.NET 2010 的迁移项目。作为 VB6 的一部分，我们有一个常量定义为 NullString = "" 在 .NET 中，它也在类似的行上迁移并使用。我们遇到的问题是，当将 RecordSet 中的值（它只是 DataTable 的包装器）与这个 NullString 进行比较时，我们会得到比较错误。由于该项目正在积极开发中，我们必须依赖迁移工具（VB MIgration Partner），它了解很少的 Pragma 但不太先进。我创建了一个类（NullStringClass）并重载了“=”和“<>”运算符，它对我的​​比较问题进行了排序。但是在某些地方，我们有 someVar = NullString，其中 someVar 是一个字符串变量。现在，我收到无法从 NullStringClass 转换为字符串的错误。

```
<System.Reflection.DefaultMember("Value")> _
Public Class NullStringClass 
```

属性定义为：

```
Public Property Value() As String
    Get
        Return ""
    End Get
    Set(ByVal value As String)

    End Set
End Property 
```

但它仍然抛出异常。据我所知，这应该解决了我的问题，但没有运气。我仍然得到同样的错误。所以，我的问题是一样的。有什么方法可以将该 NullString 变量转换为一个类并使用运算符重载进行不同的比较（包括 Null 和 Nothing），还可以用作对字符串变量的正常赋值？例如意味着

```
Dim s as String
s = NullString 
```

应该工作以及以下应该工作：

```
If rsData("MyField").Value <> NullString Then
'Note: rsData("MyField").Value is DbNull 
```

这是运算符重载的示例（如果有人感兴趣）

```
Public Shared Operator <>(ByVal mmyVal As Object, ByVal objVal As NullStringClass) As Boolean
    If TypeOf mmyVal Is String Then
        Return (Not String.IsNullOrEmpty(mmyVal))
    Else 'If TypeOf mmyVal Is Object Then
        Return (Not IsDBNull(mmyVal))
    End If
End Operator 
```

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:17:47.423

I had put this question after struggling for 2 days and scratching my head for making that "=" work. (Operator Overloading was working fine within 1 hr). The solution to get "s = NullString" right was to put implicit operator for my NullStringClass.

```
Public Shared Widening Operator CType(ByVal obj As String) As NullStringClass
    Return New NullStringClass()
End Operator

Public Shared Narrowing Operator CType(ByVal obj As NullStringClass) As String
    Return String.Empty
End Operator 
```

Although only Narrowing Operator was enough, I had put Widening as well (will be removed in production code as its not required). Hope this is helpful for someone like me :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:28:31.353

在 vb.net 中，`string`保存`null`或未初始化值的类型的存储位置在语义上与空字符串不同。如果您希望将这样的存储位置与另一个已知不为空的字符串进行比较，并且如果存储位置为空（而不是抛出异常），则此类比较仅返回 false，您可以将表达式编写为`"Whatever".Equals(storageLocation)`. 如果您希望比较两个字符串，其中一个或两个可能为空，并且空字符串比较彼此相等但不与其他任何字符串（包括空字符串）比较，您可以使用`String.Equals(string1, string2)`. 如果你想确定一个字符串是空还是空，你可以使用`String.IsNullorEmpty(theString)`. 如果您希望以将空字符串视为空的方式执行比较，您可以编写自己的静态比较，以这种方式执行比较，或者您可以编写一个函数，给定 a `string`，返回传递的-in 字符串，如果非空，否则返回`String.Empty`。

希望以上之一是您所追求的。请注意，它们与 VB6 所谓的“默认属性”无关，但您的问题似乎并不是在询问 VB6 属性（`Let`以及`Set`.

**附录**

如果您想要一个大多数情况下可以像普通字符串一样使用的字符串类型，但默认为空字符串而不是`Nothing`，您可以使用这样的东西（不完整，但应该是一个好的开始）

```
Public Structure SafeString
    Implements IComparable(Of SafeString), IEquatable(Of SafeString)

    Dim _St As String

    Sub New(St As String)
        _St = St
    End Sub

    Public Overrides Function ToString() As String
        Return If(_St, "")
    End Function

    Public Overrides Function GetHashCode() As Integer
        Return If(_St, "").GetHashCode()
    End Function

    Public Overrides Function Equals(obj As Object) As Boolean
        If obj Is Nothing OrElse Not (TypeOf (obj) Is SafeString) Then Return False
        Return If(_St, "") = If(CType(obj, SafeString)._St, "")
    End Function

    Public Function CompareTo(other As SafeString) As Integer Implements System.IComparable(Of SafeString).CompareTo
        Return If(_St, "").CompareTo(If(other._St, ""))
    End Function

    Public Overloads Function Equals(other As SafeString) As Boolean Implements System.IEquatable(Of SafeString).Equals
        Return If(_St, "") = If(other._St, "")
    End Function

    Public Shared Widening Operator CType(st As String) As SafeString
        Dim ret As New SafeString
        ret._St = st
        Return ret
    End Operator

    Public Shared Widening Operator CType(safeSt As SafeString) As String
        Return If(safeSt._St, "")
    End Operator

    Function Length() As Integer
        Return If(_St, "").Length()
    End Function
    Function SubString(startIndex As Integer) As String
        Return If(_St, "").Substring(startIndex, Length)
    End Function
    Function SubString(startIndex As Integer, length As Integer) As String
        Return If(_St, "").Substring(startIndex, length)
    End Function 
```

您会注意到一个非常常见的模式`If(_St, "")`。该函数将使用 _St 如果它不为空，或者如果它是空字符串。它不支持所有方法`String`，但是如果您需要任何尚不工作的方法，您应该能够遵循 等显示的模式。 和 之间的分配和`Length`比较应该按预期工作，但不会将任何视为等于任何（无法更改覆盖的行为以使字符串与任何其他类型的对象进行比较；如果要比较为假，则必须这样做。`String``SafeString``Object.Equals``String``SafeString``String``"Test".Equals(New SafeString("Test"))``(New SafeString("Test")).Equals("Test")`

# flickr - flickr api 搜索不适用于图片子集

> ID：11435168
> 
> 赞同：1
> 
> 时间：2012-07-11T14:41:42.137
> 
> 标签：flickr, phpflickr

我正在构建一个从 flickr 获取数据并将其显示在自定义前端的网站。使用 flickr.photos.search 的搜索不适用于某些查询，但它适用于其他查询：

它不适用于“开花”

*   试试[http://www.flickr.com/services/api/explore/flickr.photos.search](http://www.flickr.com/services/api/explore/flickr.photos.search)
*   user_id: 78425109@N03
*   标签： 开花

不产生结果结果。但是， [http:](http://www.flickr.com/photos/elizabeth_malara/tags/blossom/) //www.flickr.com/photos/elizabeth_malara/tags/blossom/ 显示正确的结果（并证明图像对公众可见）

但它适用于“农场”

*   试试[http://www.flickr.com/services/api/explore/flickr.photos.search](http://www.flickr.com/services/api/explore/flickr.photos.search)
*   user_id: 78425109@N03
*   标签： 农场

[产生与http://www.flickr.com/photos/elizabeth_malara/tags/farm](http://www.flickr.com/photos/elizabeth_malara/tags/farm)相同的结果

**我们可以看到搜索 API 调用的选择性行为。为什么会这样？** 此外，无论我通过“标签”还是“文本”搜索，API 搜索都不起作用

所有图片都是公开的，没有标记。标签“开花”是在标签“农场”之后一周添加的，但那是一个多月前的事了

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:16:03.710

该问题已在 Flickr Api 论坛中得到解答：http: [//www.flickr.com/groups/api/discuss/72157630529029048/#comment72157630529571842](http://www.flickr.com/groups/api/discuss/72157630529029048/#comment72157630529571842)

它归结为 content_type。默认情况下，flickr.photos.search 只返回照片。在查询中设置“content_type”=>“7”可确保 API 将返回所有条目，而不仅仅是照片。

# android - android垂直textview，旁边有图像

> ID：11435170
> 
> 赞同：0
> 
> 时间：2012-07-11T14:41:45.533
> 
> 标签：android, android-imageview, textview

我发现了很多关于如何子类化 textview 和垂直显示文本的信息。

我正在尝试在文本旁边显示一颗星，但我遇到了问题。也许你对此有一些想法。

子类：

```
public class VerticalTextView extends TextView
  {
final boolean topDown;

public VerticalTextView( Context context, AttributeSet attrs )
{
    super( context, attrs );
    final int gravity = getGravity();
    if ( Gravity.isVertical( gravity )
            && ( gravity & Gravity.VERTICAL_GRAVITY_MASK ) == Gravity.BOTTOM )
    {
        setGravity( ( gravity & Gravity.HORIZONTAL_GRAVITY_MASK )
                | Gravity.TOP );
        topDown = false;
    }
    else
    {
        topDown = true;
    }
}

@Override
protected void onMeasure( int widthMeasureSpec, int heightMeasureSpec )
{
    super.onMeasure( heightMeasureSpec, widthMeasureSpec );
    setMeasuredDimension( getMeasuredHeight(), getMeasuredWidth() );
}

@Override
protected void onDraw( Canvas canvas )
{
    TextPaint textPaint = getPaint();
    textPaint.setColor( getCurrentTextColor() );
    textPaint.drawableState = getDrawableState();

    canvas.save();

    if ( topDown )
    {
        canvas.translate( getWidth(), 0 );
        canvas.rotate( 90 );
    }
    else
    {
        canvas.translate( 0, getHeight() );
        canvas.rotate( -90 );
    }

    canvas.translate( getCompoundPaddingLeft(), getExtendedPaddingTop() );

    getLayout().draw( canvas );
    canvas.restore();
} 
```

}

我正在用我的片段中的这段代码设置星星：

```
ItemTextView.setCompoundDrawablesWithIntrinsicBounds(0, 0, android.R.drawable.btn_star_big_on, 0); 
```

不显示星号。只有空格。和想法？？？

**子类在列表视图中使用。在特定条件下，列表视图的一项我想在它旁边放一个星，所以**我认为我必须通过代码来完成。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:45:52.903

您可以`android:drawableLeft`在 xml 布局中使用属性。

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableLeft](http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableLeft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:50:59.940

尝试在布局 xml 中使用 TableLayout，然后使用它的行，这比通过代码更容易。

# ruby-on-rails - 为什么我的红宝石中仍然存在空白

> ID：11435172
> 
> 赞同：0
> 
> 时间：2012-07-11T14:41:46.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, string

好的，所以我在我的 rails 应用程序中有一个用户模型，它有一个 name 方法

```
def name
  "#{self.first_name} #{self.last_name}"
end 
```

问题是名字可能是这样的

```
"Joshua               " 
```

所以

```
1.9.3-p125 :057 > u.name
 => "Joshua               Jones" 
```

所以我尝试了以下所有方法

```
"#{self.first_name} #{self.last_name}".squish
"#{self.first_name} #{self.last_name}".gsub(/\s+/, " ").strip
"#{self.first_name} #{self.last_name}".strip
"#{self.first_name.strip} #{self.last_name.strip}" 
```

仍然得到这个

```
1.9.3-p125 :057 > u.name
 => "Joshua               Jones" 
```

我错过了什么吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:45:42.020

尝试：

```
"#{self.first_name.strip} #{self.last_name.strip}" 
```

不知道为什么那个`.gsub`不适合你。它适用于我，也适用于[repl.it。](http://repl.it/C6L)

# java - 如何测试我的 FIX 客户端？那里有我可以使用的假 FIX 交易所吗？

> ID：11435174
> 
> 赞同：27
> 
> 时间：2012-07-11T14:41:51.473
> 
> 标签：java, c++, quickfix, fix-protocol, algorithmic-trading

我已经实现了自己的 FIX 客户端，例如 QuickFIX。现在我需要测试它。我可以在某处使用假的 FIX 交易所吗？有没有人实现过我可以用来验证我的客户端的 FIX 服务器？是否有一个真正的交换，我可以使用他们的测试连接来测试和验证我的修复客户端？

在这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T14:46:50.317

你试过FIXimulator吗？[http://code.google.com/p/fiximulator/](http://code.google.com/p/fiximulator/)它不能完全用作交换，但您可以建立会话、接收订单并执行（也可以自动执行）它们。一探究竟。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T06:14:04.067

[Mini-FIX](https://elato.se/minifix/download.html)可用于基于 GUI

QuickFix 示例应用程序“executor”和“ordermatch”应该会有所帮助。代码很简单，您甚至可以对其进行增强以满足您对交换功能的需求。这些解决方案的好处是支持不同版本的 FIX，认为 FIX 4.2 是最广泛接受的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-09T14:06:13.620

几年前，我找不到一个不用签合同的测试平台，而且需要支付大量的许可费用，所以我创建了一个。很抱歉这里的无耻插件，但我最终把它变成了一个免费试用的产品/服务产品，托管在[www.fixsim.com上。](http://www.fixsim.com)QuickFIX 附带的 Banzai 是一个很好的免费开始，但如果您需要不同的资产类别、取消/更正、分配或其他消息类型，您必须构建或购买。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-10T22:55:37.917

[CoralFIX](http://www.coralblocks.com/index.php/category/coralfix/)带有一个现成的服务器实现，您可以启动并开始接受来自您的 FIX 客户端的连接。它将处理所有 FIX 会话级别的详细信息，例如登录、心跳、序列重置、重新发送请求等。要为您的测试实现一个简单的服务器，您所要做的就是：

```
import com.coralblocks.coralfix.FixMessage;
import com.coralblocks.coralreactor.client.Client;
import com.coralblocks.coralreactor.nio.NioReactor;
import com.coralblocks.coralreactor.util.Configuration;
import com.coralblocks.coralreactor.util.MapConfiguration;

public class SimpleFixApplicationServer extends FixApplicationServer {

    public SimpleFixApplicationServer(NioReactor nio, int port, Configuration config) {
        super(nio, port, config);
    }

    @Override
    protected void handleFixApplicationMessage(Client client, FixMessage fixMsg, boolean possDupe) {
        // do whatever you want to do with the application message received from this client...
    }

    public static void main(String[] args) {

        NioReactor nio = NioReactor.create();

        MapConfiguration config = new MapConfiguration();

        // print all messages received and sent to STDOUT for debugging purposes
        // (default is false)
        config.add("debugMessages", "true");

        // accept as the client inbound sequence whatever 
        // sequence I receive in the first message coming from the client
        // (default is false)
        config.add("acceptInboundSeqFromClient", "false");

        Server server = new SimpleFixApplicationServer(nio, 45451, config);

        server.open();
        nio.start();
    }
} 
```

上面代码的完整解释可以在[这里](http://www.coralblocks.com/index.php/2014/07/fix-clients-and-servers-with-coralfix/)找到。

**免责声明：**我是 CoralFIX 的开发者之一。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T16:15:08.933

检查 quickFIX 发行版。在这里：[http](http://www.quickfixengine.org/quickfix/doc/html/examples.html) ://www.quickfixengine.org/quickfix/doc/html/examples.html你可以找到“**执行者**”。

是一个示例服务器，它简单地填写它收到的每个限价单。

您还可以找到“ **ordermatch** ”，这是一个将匹配和执行限价订单的 C++ 服务器。

# css - CSS 浮动问题 - 自定义帖子存档页面

> ID：11435179
> 
> 赞同：0
> 
> 时间：2012-07-11T14:42:13.183
> 
> 标签：css, wordpress

我有包含成员信息的 div 框。我有浮动问题。一些盒子向右浮动，在左侧留下空白空间。

这是模板代码。

```
<?php echo apply_atomic_shortcode( 'entry_title', '[entry-title]' ); ?>
            <?php $loop = new WP_Query( array( 'post_type' => 'members', 'posts_per_page' => 100, 'order' => 'ASC' ) ); ?>
                <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>
                    <?php do_atomic( 'before_entry' ); // origin_before_entry ?>
                    <div class="members">
                        <div class="members-avatar">
                            <?php echo(types_render_field("members-profile-picture", array("alt"=>"Members","width"=>"105","height"=>"135","proportional"=>"true"))); ?>
                        </div>
                        <div class="members-profile">
                            <div class="members-title">
                                <?php echo(types_render_field("members-first-name", array('raw' => 'true'))); ?> <?php echo(types_render_field("members-last-name", array('raw' => 'true'))); ?>
                            </div>                          
                            <div class="members-jobs">
                                <p><?php echo(types_render_field("members-jobs", array('raw' => 'true'))); ?></p>
                            </div>
                            <div class="members-location">
                                <?php echo(types_render_field("members-location", array('raw' => 'true'))); ?>
                            </div>  
                        </div>
                        <div style="clear:both"></div>
                    </div>                  
                    <?php do_atomic( 'after_entry' ); // origin_after_entry ?>

                    <?php do_atomic( 'after_singular' ); // origin_after_singular ?>

                    <?php comments_template( '/comments.php', true ); // Loads the comments.php template. ?>

                <?php endwhile; ?>
                <div style="clear:left"></div> 
```

CSS 代码：

```
.members {width: 330px; height: 100%; float:left; margin-right: 10px; margin-top: 20px; margin-bottom: 50px;}
.members-avatar {float: left; width: 115px;}
.members-profile {float: right; width: 210px;}
.members-title {color:#008250; font-weight: bold;}
.members-jobs {margin-top: 10px;}
.members-jobs p {text-align: left; font-size: 11px;}
.members-location {margin-top: 10px; font-style: italic;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:12:10.223

感谢大家的投入。`height: 100%;`我通过更改为`height: 250px;`in class来修复它`.members`。这不是浮动的问题。

# c# - 将自定义控件属性与 ListBox.Items 绑定

> ID：11435181
> 
> 赞同：0
> 
> 时间：2012-07-11T14:42:25.570
> 
> 标签：c#, wpf, xaml, binding, user-controls

我的自定义控件具有以下基本结构：

```
public class NewTextBox : TextBox
{
    public ItemCollection Items { get; set; }
} 
```

在 XAML 中我有：

```
<ListBox Name="listBox1" />
<my:NewTextBox Items="{Binding Path=listBox1.Items}" /> 
```

在这种情况下，绑定不起作用。属性`Items`不对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:47:56.270

您的绑定不正确。使用`ElementName`绑定中的属性告诉 WPF 在哪里查找数据，然后绑定到该`Items`属性

```
<my:NewTextBox Items="{Binding ElementName=listBox1, Path=Items}" /> 
```

# c# - 从 SQL 表中删除行（日期和时间值错误）

> ID：11435188
> 
> 赞同：0
> 
> 时间：2012-07-11T14:42:51.280
> 
> 标签：c#, sql, delete-row

我尝试编写然后从 SQL 表中删除。我的 WRITE 代码没问题，但是我的 DELETE 代码不能按我的意愿工作。

```
//SQL_ConnectionString defined above
SqlConnection SQL_Connection = new SqlConnection(SQL_ConnectionString)

string   INSERT =  "INSERT INTO " + tbTable_DAQ.Text + " (Date, Time, Comment)";
string   VALUES =  "VALUES " + " (@Date,    @Time,   @Comment)";
string   SQL_WriteString =  INSERT + VALUES;

DateTime DateTimeNow = DateTime.Now;

try
{
   //get time
   DateTimeNow = DateTime.Now;

   //create SQL command object
   SqlCommand SQL_Write = new SqlCommand(SQL_WriteString, SQL_Connection);

   //attach values
   SQL_Write.Parameters.AddWithValue("@Date", DateTimeNow);
   SQL_Write.Parameters.AddWithValue("@Time", DateTimeNow);
   SQL_Write.Parameters.AddWithValue("@Comment", "Table Access Test. ");

   SQL_Write.ExecuteNonQuery();

   //dispose & nullify SQL_Write
   SQL_Write.Dispose();
   SQL_Write = null;
}

catch (Exception eWrite) 
{ 
   MessageBox.Show(eWrite.ToString(), "SQL WRITE ERROR", MessageBoxButtons.OK, 
                                       MessageBoxIcon.Exclamation); 
}

//now delete inserted row from SQL table            
string DELETE = "DELETE FROM " + tbTable_DAQ.Text + " ";
string FROM =  "WHERE " + "Date = " + DateTimeNow  + "AND " + "Time = " + DateTimeNow 
               + "AND " + "Comment='Table Access Test.'"; //not working
string   SQL_DeleteString  = DELETE + FROM;

try 
{ 
   //create SQL command object
   SqlCommand SQL_Delete = new SqlCommand(SQL_DeleteString, SQL_Connection);
   SQL_Delete.ExecuteNonQuery();
   //dispose & nullify SQL_Delete
   SQL_Delete.Dispose();
   SQL_Delete = null;
}

catch (Exception eDelete)     
{ 
     MessageBox.Show(eDelete.ToString(), "SQL DELETE ERROR", MessageBoxButtons.OK, 
                       MessageBoxIcon.Exclamation); 
} 
```

它给了我一个错误。我相信错误是由于日期和时间列的值造成的。在 WRITE 代码上，我认为 SQL 表会在（日期类型）和（time7 类型）`DateTimeNow`接收到它时转换为。但是，要删除该特定行，值必须匹配（未完成转换），我不知道如何正确获取值。`Date``Time`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:46:29.047

您正在检查非常具体的日期时间值。除非您有完全相同的日期和时间的表记录，否则这将永远不会起作用。

此外，您正在检查我假设的日期字段和时间字段与日期时间。为什么不只比较一个日期时间字段？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:47:27.087

您的插入有效，因为您使用 SQL 参数将值传递给 SQL，这很棒。您的 DELETE 可能会因语法错误而失败（如果您包含错误的文本会很好），因为您正在构建一个字符串并尝试执行它。

您可能可以通过在日期周围加上单引号来修复删除字符串，但我什至不想向您展示正确的语法。出于两个重要原因，我宁愿您再次使用 SQL 参数：

1.  SQL 将为您进行正确的转换——不用担心得到正确的文本。
2.  您正在保护自己免受 SQL 注入 - 由构建 SQL 字符串并执行它们引起的主要安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:47:28.727

请尝试将格式化为 Sql proc 的 DateTime.Now 作为字符串发送

比如像这样

```
string formatted = dateNow.ToString("yyyyMMdd"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:56:40.987

如果你的自动提交不是你应该输入connection.transaction.commit。我认为如果您捕获状态并最终像这样进行测试会更好：

```
finally
{
  if (status)
  {
    connection.transaction.commit;
  }
  else
  {
    connection.transaction.rollback;
  }
} 
```

也许您的代码尝试删除由于没有提交而未插入的行。但通常应该是日期时间问题;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T17:46:49.377

好的，所以根据 n8wrl 的建议，我不将字符串用于我的 SQL DELETE 代码。我将其更改为：

```
 //now delete inserted row from SQL table            
        string DELETE = "DELETE FROM " + tbTable_DAQ.Text + " ";
        string FROM = "WHERE " + "Date = @Date" + " AND " + "Time = @Time" + " AND " + "Comment = @Comment";
        string SQL_DeleteString = DELETE + FROM;

        try
        {
           //create SQL command object
           SqlCommand SQL_Delete = new SqlCommand(SQL_DeleteString, SQL_Connection);

           //attach values
           SQL_Delete.Parameters.AddWithValue("@Date",               DateTimeNow.Date);
           SQL_Delete.Parameters.AddWithValue("@Time",               DateTimeNow.TimeOfDay);
           SQL_Delete.Parameters.AddWithValue("@Comment",            "Table Access Test.");

           SQL_Delete.ExecuteNonQuery();

           //dispose & nullify SQL_Delete
           SQL_Delete.Dispose();
           SQL_Delete = null;
        }

        catch (Exception eDelete) { MessageBox.Show(eDelete.ToString(), "SQL DELETE ERROR", MessageBoxButtons.OK, MessageBoxIcon.Exclamation); } 
```

一切正常。感谢 Hatsoft 的帮助。我认为最好避免使用凌乱的字符串方法。我不想要任何注入攻击。如果发生这种情况，我将成为任何主要问题。我的意思是，真的很重要。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-11T17:54:12.540

有**两个不同** `DateTimeNow`的变量可能包含**两个稍微不同**的值，这会使“完全匹配”失败。

删除`try/catch`UPDATE 中*隐藏*外部变量的嵌套一个；我怀疑它可能会“工作”。

但是，寻找这样一个“确切”时间通常是错误的。也许您的意思是寻找“同一分钟”或类似的东西？

此外，DATE 和 TIME 列都在哪里输入 DateTime？它们代表什么数据库类型？

并且请**修复**DELETE 以使用像 UPDATE 那样的参数.. 当 .NET 框架很好地处理它们时，不使用参数是没有意义的。

# ios - 有没有更好的方法在 iOS 开发中一步一步构建？

> ID：11435192
> 
> 赞同：4
> 
> 时间：2012-07-11T14:42:57.490
> 
> 标签：ios, build-automation

在 Joel 测试中，我看到了一个名为“你能一步完成构建吗？”的部分。我通常构建起诉 Xcode 的代码并将其存档。在 iOS 开发的情况下，有没有比这更好的方法？

编辑：

有什么方法可以使用构建脚本进行构建吗？我目前遵循的方法是使用 Product -> Archive 来生成构建。这里有没有更好的方法来减少时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:07:51.337

如果您选择`Product -> Archive`在 Xcode 中，它将为您构建应用程序并将其存档。那是一步。目前尚不清楚您要寻找的是否符合“更好”的条件。

编辑：在 Xcode 的最新版本（5.0+，可能更早）中，您可以`xcodebuild archive`在命令行上使用来构建和归档您的应用程序，就像 Xcode 那样。

# c# - 为什么我的 C# gzip 生成的文件比 Fiddler 或 PHP 大？

> ID：11435200
> 
> 赞同：33
> 
> 时间：2012-07-11T14:43:26.567
> 
> 标签：c#, gzip, fiddler, gzipstream

如果我 GZip 这个文本：

> 你好世界

通过 C# 使用此代码：

```
Stream stream = new MemoryStream(Encoding.Default.GetBytes("Hello World"));
var compressedMemoryStream = new MemoryStream();
using (var gzipStream = new GZipStream(compressedMemoryStream, CompressionMode.Compress))
{
    stream.CopyTo(gzipStream);  
    gzipStream.Close(); 
} 
```

结果流为 133 字节长

通过 Fiddler`Utilities.GzipCompress`或[这个 PHP 页面](http://i-tools.org/gzip)运行相同的字符串，结果只有 31 个字节长。

在这两种情况下，输入都是 11 个字节，所以我认为 PHP 结果是正确的，但显然这意味着我无法从 .NET 中解压缩 PHP zip，反之亦然。为什么 .NET 输出要大得多？

* * *

实际上事实证明，虽然 PHP 和 Fiddler 的结果长度相同，但它们并不相同。我可以在 .NET 中解压 PHP 版本，但不能解压 Fiddler 版本。PHP 页面解压缩了所有三个，因此看起来 Fiddler 和 .NET 的 gzip 实现之间可能存在不兼容。

* * *

根据要求，我已将三个输出上传到[此处](http://db.tt/ebksfYWQ)的保管箱。

这些是这些文件的原始十六进制转储（不确定它们是否真的有这样的用途，但我认为这表明提琴手和 PHP 版本之间的区别在于标头，而不是压缩数据本身）：

提琴手：

```
0000-0010:  1f 8b 08 00-c2 e6 ff 4f-00 ff f3 48-cd c9 c9 57  .......O ...H...W
0000-001f:  08 cf 2f ca-49 01 00 56-b1 17 4a 0b-00 00 00     ../.I..V ..J.... 
```

PHP：

```
0000-0010:  1f 8b 08 00-00 00 00 00-00 03 f3 48-cd c9 c9 57  ........ ...H...W
0000-001f:  08 cf 2f ca-49 01 00 56-b1 17 4a 0b-00 00 00     ../.I..V ..J.... 
```

C＃：

```
0000-0010:  1f 8b 08 00-00 00 00 00-04 00 ec bd-07 60 1c 49  ........ .....`.I
0000-0020:  96 25 26 2f-6d ca 7b 7f-4a f5 4a d7-e0 74 a1 08  .%&/m.{. J.J..t..
0000-0030:  80 60 13 24-d8 90 40 10-ec c1 88 cd-e6 92 ec 1d  .`.$..@. ........
0000-0040:  69 47 23 29-ab 2a 81 ca-65 56 65 5d-66 16 40 cc  iG#).*.. eVe]f.@.
0000-0050:  ed 9d bc f7-de 7b ef bd-f7 de 7b ef-bd f7 ba 3b  .....{.. ..{....;
0000-0060:  9d 4e 27 f7-df ff 3f 5c-66 64 01 6c-f6 ce 4a da  .N'...?\ fd.l..J.
0000-0070:  c9 9e 21 80-aa c8 1f 3f-7e 7c 1f 3f-22 be 9d 97  ..!....? ~|.?"...
0000-0080:  65 95 7e b7-aa cb d9 ff-13 00 00 ff-ff 56 b1 17  e.~..... .....V..
0000-0085:  4a 0b 00 00-00 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-11T15:18:04.240

***前言：* .NET 用户在任何情况下都不应使用 Microsoft 提供的 GZipStream 或 DeflateStream 类，除非 Microsoft 将它们完全替换为可用的东西。** 请改用[DotNetZip 库](http://dotnetzip.codeplex.com/)。

***前言更新：* .NET Framework 4.5 及更高版本修复了压缩问题，GZipStream 和 DeflateStream 在这些版本中使用 zlib。我不知道下面提到的 CRC 问题是否已修复。**

***另一个更新：* CRC问题不仅没有修复，而且微软已经决定他们[不会修复](http://connect.microsoft.com/VisualStudio/feedback/details/726860/gzipstream-does-not-seem-to-detect-corrupt-data)它！**

这是 GZipStream 中的几个错误之一。任何自尊的 gzip 压缩器都不应该从 11*个*字节的输入中产生 133 个字节的输出。请参阅我在[为什么 BCL GZipStream（带有 StreamReader）不能可靠地检测 CRC32 的数据错误？](https://stackoverflow.com/questions/9471826/why-does-bcl-gzipstream-with-streamreader-not-reliably-detect-data-errors-with/9472049#9472049).

内部发生的情况是 GZipStream 没有使用静态或存储方法，这两种方法都会产生与输入数据大小相同的压缩数据（在其之上将添加 18 个字节的 gzip 标头和尾标）。相反，它使用的是动态方法，该方法为极少数代码创建了一个非常大的代码描述符头。这只是一个错误/非常糟糕的实现。

*更新：*

通过十六进制转储，我可以提供一些分析。首先，Fiddler 和 php 的输出都是正确和正确的。它们之间的唯一区别在于 gzip 标头，特别是在 Fiddler 中设置但在 php 中没有设置的时间戳，以及在 php 中设置但不在 Fiddler 中设置的原始操作系统。对于这两个 13 字节的压缩数据是相同的，并且可以表示为（使用我的[infgen 程序](http://zlib.net/infgen.c.gz)来反汇编 deflate 流）：

```
last
static
literal 'Hello World
end 
```

这正是它应该的样子。单个静态块，不需要代码描述符，只需将所有字节编码为文字。（没有与长度和距离匹配的先前字符串。）

另一方面，GZipStream 的输出在几个方面都是一团糟。压缩后的数据是：

```
dynamic
code 3 5
code 4 5
code 5 4
code 6 4
code 7 4
code 8 3
code 9 3
code 10 4
code 11 4
code 12 4
code 13 4
code 14 3
code 16 3
litlen 0 14
litlen 1 14
litlen 2 14
litlen 3 14
litlen 4 14
litlen 5 14
litlen 6 14
litlen 7 14
litlen 8 14
litlen 9 12
litlen 10 6
litlen 11 14
litlen 12 14
litlen 13 14
litlen 14 14
litlen 15 14
litlen 16 14
litlen 17 14
litlen 18 14
litlen 19 14
litlen 20 14
litlen 21 14
litlen 22 14
litlen 23 14
litlen 24 14
litlen 25 14
litlen 26 14
litlen 27 14
litlen 28 14
litlen 29 14
litlen 30 13
litlen 31 14
litlen 32 6
litlen 33 14
litlen 34 10
litlen 35 12
litlen 36 14
litlen 37 14
litlen 38 13
litlen 39 10
litlen 40 8
litlen 41 9
litlen 42 11
litlen 43 10
litlen 44 7
litlen 45 8
litlen 46 7
litlen 47 9
litlen 48 8
litlen 49 8
litlen 50 8
litlen 51 9
litlen 52 8
litlen 53 9
litlen 54 10
litlen 55 9
litlen 56 8
litlen 57 9
litlen 58 9
litlen 59 8
litlen 60 9
litlen 61 10
litlen 62 8
litlen 63 14
litlen 64 14
litlen 65 8
litlen 66 9
litlen 67 8
litlen 68 9
litlen 69 8
litlen 70 9
litlen 71 10
litlen 72 11
litlen 73 8
litlen 74 11
litlen 75 14
litlen 76 9
litlen 77 10
litlen 78 9
litlen 79 10
litlen 80 9
litlen 81 12
litlen 82 9
litlen 83 9
litlen 84 9
litlen 85 10
litlen 86 12
litlen 87 11
litlen 88 14
litlen 89 14
litlen 90 12
litlen 91 11
litlen 92 14
litlen 93 11
litlen 94 14
litlen 95 14
litlen 96 14
litlen 97 6
litlen 98 7
litlen 99 7
litlen 100 7
litlen 101 6
litlen 102 8
litlen 103 8
litlen 104 7
litlen 105 6
litlen 106 12
litlen 107 9
litlen 108 6
litlen 109 7
litlen 110 7
litlen 111 6
litlen 112 7
litlen 113 13
litlen 114 6
litlen 115 6
litlen 116 6
litlen 117 7
litlen 118 8
litlen 119 8
litlen 120 9
litlen 121 8
litlen 122 11
litlen 123 13
litlen 124 12
litlen 125 13
litlen 126 13
litlen 127 14
litlen 128 14
litlen 129 14
litlen 130 14
litlen 131 14
litlen 132 14
litlen 133 14
litlen 134 14
litlen 135 14
litlen 136 14
litlen 137 14
litlen 138 14
litlen 139 14
litlen 140 14
litlen 141 14
litlen 142 14
litlen 143 14
litlen 144 14
litlen 145 14
litlen 146 14
litlen 147 14
litlen 148 14
litlen 149 14
litlen 150 14
litlen 151 14
litlen 152 14
litlen 153 14
litlen 154 14
litlen 155 14
litlen 156 14
litlen 157 14
litlen 158 14
litlen 159 14
litlen 160 14
litlen 161 14
litlen 162 14
litlen 163 14
litlen 164 14
litlen 165 14
litlen 166 14
litlen 167 14
litlen 168 14
litlen 169 14
litlen 170 14
litlen 171 14
litlen 172 14
litlen 173 14
litlen 174 14
litlen 175 14
litlen 176 14
litlen 177 14
litlen 178 14
litlen 179 14
litlen 180 14
litlen 181 14
litlen 182 14
litlen 183 14
litlen 184 14
litlen 185 14
litlen 186 14
litlen 187 14
litlen 188 14
litlen 189 14
litlen 190 14
litlen 191 14
litlen 192 14
litlen 193 14
litlen 194 14
litlen 195 14
litlen 196 14
litlen 197 14
litlen 198 14
litlen 199 14
litlen 200 14
litlen 201 14
litlen 202 14
litlen 203 14
litlen 204 14
litlen 205 14
litlen 206 14
litlen 207 14
litlen 208 14
litlen 209 14
litlen 210 14
litlen 211 14
litlen 212 14
litlen 213 14
litlen 214 14
litlen 215 14
litlen 216 14
litlen 217 14
litlen 218 14
litlen 219 14
litlen 220 14
litlen 221 14
litlen 222 14
litlen 223 14
litlen 224 14
litlen 225 14
litlen 226 14
litlen 227 14
litlen 228 14
litlen 229 14
litlen 230 14
litlen 231 14
litlen 232 14
litlen 233 14
litlen 234 14
litlen 235 14
litlen 236 14
litlen 237 14
litlen 238 14
litlen 239 14
litlen 240 14
litlen 241 14
litlen 242 14
litlen 243 13
litlen 244 13
litlen 245 13
litlen 246 14
litlen 247 13
litlen 248 14
litlen 249 13
litlen 250 14
litlen 251 13
litlen 252 14
litlen 253 14
litlen 254 14
litlen 255 14
litlen 256 14
litlen 257 4
litlen 258 3
litlen 259 4
litlen 260 4
litlen 261 4
litlen 262 5
litlen 263 5
litlen 264 5
litlen 265 5
litlen 266 5
litlen 267 6
litlen 268 6
litlen 269 5
litlen 270 6
litlen 271 7
litlen 272 8
litlen 273 8
litlen 274 9
litlen 275 10
litlen 276 9
litlen 277 10
litlen 278 12
litlen 279 11
litlen 280 12
litlen 281 14
litlen 282 14
litlen 283 14
litlen 284 12
litlen 285 11
dist 0 6
dist 1 10
dist 2 11
dist 3 11
dist 4 9
dist 5 8
dist 6 8
dist 7 8
dist 8 7
dist 9 7
dist 10 5
dist 11 6
dist 12 4
dist 13 5
dist 14 4
dist 15 5
dist 16 4
dist 17 5
dist 18 4
dist 19 4
dist 20 4
dist 21 4
dist 22 4
dist 23 4
dist 24 4
dist 25 5
dist 26 4
dist 27 5
dist 28 5
dist 29 5
literal 'Hello World
end
!
last
stored
end 
```

那是什么？实际数据只是靠近“literal 'Hello World”结尾的那一行，它只是对输入的每个字节进行编码。前面是对一组用于文字、长度和距离的霍夫曼代码的描述。以下是它的问题：

*   首先，它根本不应该使用动态。描述这组代码大约需要 100 个字节。这正是为什么 deflate 格式提供了一组用于静态块的预定义代码的原因。在这种情况下，压缩器应该选择一个静态块（这是 php 和 Fiddler 正在做的）。
*   其次，定义了每一个可能的代码，即使绝大多数从未使用过！使用动态块时，适当的压缩器只会定义该块中实际使用的文字、长度和距离的代码。在这种情况下，没有使用长度或距离，只使用了八种不同的文字（H、e、l、o、空格、w、r 和 d）。相反，它继续定义 256 个文字代码、29 个长度代码和 30 个距离代码。我猜一些实验会表明 GZipStream 的动态标头总是相同的，在这种情况下它甚至不是动态的，这就是重点！
*   第三，它最后会抛出一个不必要的空存储块。第一个块应该被标记为最后一个块。

所有这些都指向一个简单的事实，即编写此 GZipStream 代码的人，尽可能礼貌地说，对 deflate 格式或一般压缩缺乏任何了解。他们选择只生成动态块（最后一个空的静态块除外），每次只生成相同的动态标题（我认为），违背了动态块的目的，并且不费心去弄清楚当前是否块是最后一个，需要放一个空块来标记结束。

如其他地方所述，这些并不是 GZipStream 的唯一问题。它甚至无法正确使用 CRC-32 来检测损坏的流。

真正令人困惑的不是微软为什么指派一个不称职的人来编写 gzip 压缩器和解压器，而是为什么他们指派任何人来编写它！有一个免费可用的代码[zlib](http://zlib.net/)，它具有极其自由的许可证，允许商业使用而无需署名。这段代码已经被广泛部署了近二十年，并且完成了它应该正确有效地完成的所有事情。大多数其他东西都使用zlib，包括php，我也怀疑Fiddler。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:11:04.053

`GZipStream`[如RFC 1952 规范](http://www.faqs.org/rfcs/rfc1952.html)中所述，将 10 字节的标头和 8 字节的页脚添加到压缩数据中。这给出了 133 字节长的结果。

如果要求 ( `GZIP-compatible encoding?`)，您链接到的 PHP 页面也会添加相同的 18 字节页眉/页脚。如果你使用它，它会给出一个 31 字节长的结果。

如果没有页眉/页脚，它们之间的差异是 125 字节与 13 字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:29:16.170

无论您向 GZipStream 提供什么内容，您都会获得相同的开销。GZipStream 的前 108 个字节看起来相同

```
1f 8b 08 00 00 00 00 00 04 00 ec bd 07 60 1c 49
96 25 26 2f 6d ca 7b 7f 4a f5 4a d7 e0 74 a1 08
80 60 13 24 d8 90 40 10 ec c1 88 cd e6 92 ec 1d
69 47 23 29 ab 2a 81 ca 65 56 65 5d 66 16 40 cc
ed 9d bc f7 de 7b ef bd f7 de 7b ef bd f7 ba 3b
9d 4e 27 f7 df ff 3f 5c 66 64 01 6c f6 ce 4a da 
c9 9e 21 80 aa c8 1f 3f 7e 7c 1f 3f 22 >>> 
```

符合标准定义（ ttp `1f 8b 08 00 00 00 00 00 04 00`://www.faqs.org/rfcs/rfc1952.html ）。[@mark-adler 在为什么 BCL GZipStream (with StreamReader) 不能可靠地检测 CRC32 的数据错误中](https://stackoverflow.com/questions/9471826/why-does-bcl-gzipstream-with-streamreader-not-reliably-detect-data-errors-with)解释了固定部分的其余部分？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T20:47:29.900

部分专利：

> 压缩级别不如其他一些应用程序的原因是市场上最有效的压缩算法都受专利保护。另一方面，.net 使用非专利技术。

和

> 好吧，当我问同样的问题时（从 MS 的某个人那里）得到的解释是，这与微软无法在不修改 GZip 算法的情况下使用它有关；由于专利/许可问题。

[http://social.msdn.microsoft.com/Forums/fr-FR/c5f0b53c-a2d5-4407-b43b-9da8d39c01df/why-do-gzipstream-compression-ratio-so-bad?forum=netfxbcl](http://social.msdn.microsoft.com/Forums/fr-FR/c5f0b53c-a2d5-4407-b43b-9da8d39c01df/why-do-gzipstream-compression-ratio-so-bad?forum=netfxbcl)

> 最初我怀疑微软的 gzip 实现；我知道他们实施了 Deflate 算法，该算法不是最有效但没有专利。

[http://challenge-me.ws/post/2010/11/05/Do-Not-Take-Microsofts-Code-for-Granted.aspx](http://challenge-me.ws/post/2010/11/05/Do-Not-Take-Microsofts-Code-for-Granted.aspx)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-07-11T15:12:27.427

现代压缩工具通常会使用一种以上的压缩策略。使用 Winzip 和 WinRAR 等，您通常会获得以下选项：

*   最大压缩
*   最快的
*   普通的

如果您也这样做，您可能可以进一步压缩文件。

# arrays - 需要包示例中的 Oracle 存储过程接受数组（表）参数

> ID：11435201
> 
> 赞同：0
> 
> 时间：2012-07-11T14:43:27.067
> 
> 标签：arrays, oracle, stored-procedures, open-array-parameters

这个问题是我的问题的一部分，[如何通过 ado 参数对象将 javascript 数组传递给 oracle 存储过程](https://stackoverflow.com/questions/11419308/how-to-pass-javascript-array-to-oracle-store-procedure-by-ado-parameter-object)

我认为将它分成 3 个小部分会更快地得到答案。

对于这个问题。

我知道我们可以声明一个表类型并使用

```
select last_name 
from employees in (select * from table(cast(my_table_type_var as my_table_type)); 
```

但我总是从创建包含一个过程的新包中得到错误。我读到一些线程说我需要清除 sql(in schema) 类型，因为 sql 和 pl/slq 没有使用相同的引擎。我尝试通过 spl*plus 在模式中创建类型，但仍然出现相同的错误，所以我首先需要一个工作包示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:53:41.423

您需要一个 SQL 对象来`TABLE`从`SELECT`. 这是一个小例子（9iR2）：

```
SQL> CREATE TYPE table_number is TABLE OF NUMBER;
  2  /

Type created.

SQL> SELECT * FROM TABLE(table_number(1,2,3));

COLUMN_VALUE
------------
           1
           2
           3 
```

您可以在此处改用函数（请注意，我的 TYPE 仍然在包外定义）：

```
SQL> CREATE OR REPLACE PACKAGE pkg AS
  2     FUNCTION f RETURN table_number;
  3  END;
  4  /

Package created.

SQL> CREATE OR REPLACE PACKAGE BODY pkg AS
  2     FUNCTION f RETURN table_number IS
  3     BEGIN
  4        RETURN table_number(4,5,6);
  5     END;
  6  END;
  7  /

Package body created.

SQL> SELECT * FROM table(pkg.f);

COLUMN_VALUE
------------
           4
           5
           6 
```

# mysql - mysql中是否有对特定的、不连续的日期更有效的查询？

> ID：11435202
> 
> 赞同：2
> 
> 时间：2012-07-11T14:43:36.413
> 
> 标签：mysql, date

我正在尝试查询与几个特定日期匹配的所有行的表。日期不是连续的，并且不希望返回整个日期范围的数据。具体日期的数量可能很大，几百个。该`Date`字段已编入索引，因此我想利用它。

将`Date`字段转换为字符串并查询字符串比较感觉有点懒惰/性能不佳，并且会丢弃任何索引。像这样（下）的东西可以正常工作，但我担心性能和扫描表：

```
SELECT Date,Time,Open,High,Low,Close,Volume FROM minuteBarTable 
WHERE DATE(Date) IN ('2004-07-13','2011-09-01','2007-12-12'); 
```

使用一块 ' **OR** 's 具有正确的效果和正确的结果，但我想找到一种更优雅/可扩展的方法。数百个日期可能会变得有点笨拙：

```
SELECT Date,Time,Open,High,Low,Close,Volume FROM minuteBarTable 
WHERE Date='2004-07-13' OR Date='2011-09-01' OR Date='2007-12-12'; 
```

**' OR**的块在这里是更有效的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:03:43.790

结合上面的两个 SQL：

```
SELECT Date,Time,Open,High,Low,Close,Volume FROM minuteBarTable 
WHERE Date IN ('2004-07-13','2011-09-01','2007-12-12'); 
```

这样 MySQL 就可以使用`Date`. 并且（根据 O'Reilly 的*High Performance MySQL*）`IN`通常比 multiple 好`OR`，因为查询优化器对`IN`列表中的参数进行排序，因此在索引中找到结果会更快（也排序）。

# python - python 运算符，“not in”没有运算符

> ID：11435206
> 
> 赞同：19
> 
> 时间：2012-07-11T14:43:49.143
> 
> 标签：python, performance, indexing

这可能是一个愚蠢的问题，但是在查看[运算符到函数的映射时，](http://docs.python.org/library/operator.html#mapping-operators-to-functions)我注意到没有函数可以表达`not in`运算符。起初我认为这可能是因为解释器只是将它重新排序为`not x in y`，但是有一个函数`is not`似乎应该与`not in`. 我错过了什么，还是那个运营商真的不存在？

这是一个非常愚蠢的例子，你可能想要这个：

```
def compare_iter(a,b,func):
    return [func(aa,bb) for aa,bb in zip(a,b)]

my_compare=compare_iter(xx,yy,lambda x,y:x not in y)  #lambda -- yuck
my_compare=map(operator.not_,compare_iter(xx,yy,operator.contains)  #extra map?  grr...
#it would be nice to do: my_compare=compare_iter(xx,yy,operator.not_contains) 
```

当然，我可以为此编写自己的函数，但是您会为效率付出代价，而操作员模块可以将此代码从 python 中推出，因此执行得更快。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T14:48:53.983

此处不需要其他功能。`not in`是 的倒数`in`，因此您有以下映射：

```
obj in seq => contains(seq, obj)

obj not in seq => not contains(seq, obj) 
```

`is`你是对的，这与/不一致`is not`，因为身份测试应该是对称的。这可能是一个设计工件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T15:34:58.637

您可能会发现以下函数和反汇编有助于理解运算符：

```
>>> def test():
        if 0 in (): pass
        if 0 not in (): pass
        if 0 is (): pass
        if 0 is not (): pass
        return None

>>> dis.dis(test)
  2           0 LOAD_CONST               1 (0) 
              3 LOAD_CONST               2 (()) 
              6 COMPARE_OP               6 (in) 
              9 POP_JUMP_IF_FALSE       15 
             12 JUMP_FORWARD             0 (to 15) 

  3     >>   15 LOAD_CONST               1 (0) 
             18 LOAD_CONST               3 (()) 
             21 COMPARE_OP               7 (not in) 
             24 POP_JUMP_IF_FALSE       30 
             27 JUMP_FORWARD             0 (to 30) 

  4     >>   30 LOAD_CONST               1 (0) 
             33 LOAD_CONST               4 (()) 
             36 COMPARE_OP               8 (is) 
             39 POP_JUMP_IF_FALSE       45 
             42 JUMP_FORWARD             0 (to 45) 

  5     >>   45 LOAD_CONST               1 (0) 
             48 LOAD_CONST               5 (()) 
             51 COMPARE_OP               9 (is not) 
             54 POP_JUMP_IF_FALSE       60 
             57 JUMP_FORWARD             0 (to 60) 

  6     >>   60 LOAD_CONST               0 (None) 
             63 RETURN_VALUE         
>>> 
```

如您所见，每个运算符都有所不同；它们的代码（按顺序）是 6、7、8 和 9。

# python - 绘制烛台（matploblit）

> ID：11435209
> 
> 赞同：1
> 
> 时间：2012-07-11T14:44:02.920
> 
> 标签：python, python-3.x, matplotlib

```
#!/usr/bin/env python

from pylab import *
from matplotlib.finance import candlestick
from datetime import datetime

data2 = [(datetime(2012, 2, 1), 3103, 3102.01, 3103.62, 3101.90),
      (datetime(2012, 2, 1), 3102, 3102.90, 3103.16, 3102.09),
      (datetime(2012, 2, 2), 3100.89, 3102.59, 3102.86, 3100.51),
      (datetime(2012, 2, 3), 3103.62, 3102.01, 3103.62, 3101.90),
      (datetime(2012, 2, 5), 3102.24, 3102.90, 3103.16, 3102.09),
      (datetime(2012, 2, 6), 3100.89, 3102.59, 3102.86, 3100.51)]

quotes = [(date2num(item[0]),) + item[1:] for item in data2]

fig = figure()
fig.subplots_adjust(bottom=0.2)
ax = fig.add_subplot(111)
ax.xaxis.set_major_locator(mondays)
ax.xaxis.set_minor_locator(alldays)
ax.xaxis.set_major_formatter(weekFormatter)

candlestick(ax, quotes, width=0.6)

ax.xaxis_date()
ax.autoscale_view()
setp( gca().get_xticklabels(), rotation=45, horizontalalignment='right')

show() 
```

这很好用并绘制了烛台图。这似乎与`read_command_line(prog_args_array)`：

```
def read_command_line(prog_args_array):
    prog = prog_args_array.pop(0)
    parser = argparse.ArgumentParser(description=__doc__, prog=prog)
    parser.add_argument('--version', action='version', version=VERSION)  
    return parser.parse_args(prog_args_array)

def main(prog_args_array):
    args = read_command_line(prog_args_array)
    ...

if __name__ == '__main__':
    sys.exit(main(sys.argv)) 
```

这给了我这个：

```
Traceback (most recent call last):
  File "./tdseq4.py", line 124, in <module>
    sys.exit(main(sys.argv))
  File "./tdseq4.py", line 89, in main
    fig = figure()
  File "/usr/lib/pymodules/python2.7/matplotlib/pyplot.py", line 343, in figure
    **kwargs)
  File "/usr/lib/pymodules/python2.7/matplotlib/backends/backend_tkagg.py", line 80, in new_figure_manager
    window = Tk.Tk()
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1683, in __init__
    baseName = os.path.basename(sys.argv[0])
IndexError: list index out of range
make: *** [all] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:53:14.980

它不在您的数据中，而是在加载后端。如果你打电话

```
import matplotlib.pyplot as plt
print plt.get_backend() 
```

它会告诉我你正在使用 Tkinter

您需要查看如何调用`.py`文件并从交互式 shell 中尝试。

因为 tkinter 只是在寻找 sys.argv[0] 你可以`import sys;print sys.argv`看看你的论点看起来如何

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:54:13.907

My guess is that you modify sys.argv, which causes problems. This can be solved with:

```
def read_command_line(prog_args_array):
    prog = prog_args_array[0]
    (…) 
```

(instead of using `pop(0)`, which in effect modifies `sys.argv`).

# iphone - iPad 3 renderInContext 慢 - 渲染性能差

> ID：11435210
> 
> 赞同：6
> 
> 时间：2012-07-11T14:44:02.777
> 
> 标签：iphone, ios, ipad, ipad-3

我正在尝试从用户可以绘制的视图中获取图像，或者添加一些其他视图。到目前为止，使用 iPad1 和 2 一切正常。但在 iPad3 上它像狗一样奔跑。我只是使用图层 renderInContext 方法。

```
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.viewDrawableViewContainer.frame.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.viewDrawableViewContainer.frame.size);
[self.viewDrawableViewContainer.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我知道这可能是由等于 ipad2 的 cpu 引起的，但大约需要 1 秒。用户绘制或添加的越多，渲染所需的时间就越长。有时长达 5 秒，这实在令人无法接受。那么有没有什么办法可以提高性能呢？任何可能设置较小渲染质量的机会 - 我不需要以最高视网膜分辨率进行渲染......

我将不胜感激任何帮助！提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-09T02:39:36.923

您还可以通过在上下文中调用渲染之前修改上下文中的插值质量来提高渲染速度。通过这种更改，我能够获得比更改比例因子更快的截图速度。

当然，您可以同时使用两者，并且不必将质量设置为无，低对我来说仍然是一个改进。

```
CGContextSetInterpolationQuality(ctx, kCGInterpolationNone); 
```

此外，对于上一个答案中提到的比例因子，请确保您的新比例因子是原始比例因子的倍数，即如果屏幕比例为 1.0，您应该执行类似 0.5 而不是 0.8 的操作。使用 .8 将导致渲染计算更多信息（因为它不是一个均匀的比例），因此它比使用 1.0 慢，因为。

当然，这对每个人来说都不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-18T22:58:00.630

您可以通过以较低的分辨率进行渲染来提高速度。使用小于 1.0 的 UIGraphicsBeginImageContextWithOptions 比例因子，例如 0.5。

此外，如果您不需要 alpha，则可以通过为 opaque 标志传递 YES 来获得小的速度提升。我自己没有计时差异。

# ios - 为什么设置我的 CALayer 的不透明度似乎也会影响子图层的不透明度？

> ID：11435211
> 
> 赞同：4
> 
> 时间：2012-07-11T14:44:03.217
> 
> 标签：ios, core-animation, core-graphics

我没有明确设置我的子层的不透明度——只有超级层的通过`opacity`属性。虽然超层的不透明度确实按预期发生了变化，但我的子层的不透明度似乎也发生了变化，导致超层中这些子层下方的元素*被*暴露。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T14:51:14.043

为什么这让你感到惊讶？你期望会发生什么？如果你不想要这个，不要把那些子层放在那个超级层里面。只需将它们放在它上面（也许在一个单独的超级层中）。

* * *

编辑：我现在明白你的问题了。您正在运行核心动画优化。Core Animation 试图通过在合成之前将不透明度应用于所有子层来节省时间。这样它就可以只合成一次（这让它忽略容器超级层）。大多数情况下，这可以解决并提高性能。

你想要它做的是在超级层中进行所有合成，然后应用不透明度，然后将结果与其他所有内容重新合成。这称为光栅化；这基本上意味着“请先把我变成一个位图，然后再将我与其他任何东西合成。” `shouldRasterize`您可以通过在您的 superlayer 上设置来请求这个。

# c# - 对图像进行打开操作时，图像会下移

> ID：11435212
> 
> 赞同：0
> 
> 时间：2012-07-11T14:44:03.730
> 
> 标签：c#, image-processing, aforge, morphological-analysis, mathematical-morphology

我正在做一个自动车牌识别应用程序。我正在做的是在给定的车辆图像上定位矩形对象以提取车牌位置。我正在对图像进行打开操作，图像似乎向下移动。因此，当我在原始图像上找到车牌时，我只能找到车牌的一半，因为最终图像由于形态处理而向下移动。

我还注意到当我使用大小为 4x13 的结构元素时会发生这种情况

让我在这里附上图片。您会在图像顶部看到差异，并且图像向下移动了一点。有谁知道解决这个问题的方法？我真的被这件事困住了

![在此处输入图像描述](../Images/b4b5b895d9cefa5543206d4311f9a3e2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:55:20.743

你并没有被这个问题困住，你只需要正确地实现这些形态学操作或使用一些正确的实现。将您的结果与我获得的结果进行比较，使用相同的结构元素，无需任何努力（即，我只是分别应用了打开和关闭，仅此而已）：

![在此处输入图像描述](../Images/0e98f580de54bdadf8181d73c70bec40.png)   ![在此处输入图像描述](../Images/a0dfbe34547a5a7327bededcf9a5a783.png)

你会得到严重的伪影，当正确考虑侵蚀和扩张的二元性时，它不应该出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:35:12.623

如果您使用的结构元素相对于原​​点不对称，这是可能的。可以尝试使用 5x13，而不是确保在任一对称轴上都有对称数量的像素。我希望这有帮助！

# javascript - 是否有用于在 JavaScript 中生成概率分布的科学库？

> ID：11435217
> 
> 赞同：4
> 
> 时间：2012-07-11T14:44:14.487
> 
> 标签：javascript, ruby, statistics, sciruby

JavaScript 中是否有一个科学库可以像 Ruby 中的这个库一样生成概率分布？

[http://rb-gsl.rubyforge.org/](http://rb-gsl.rubyforge.org/)

有关用例的更多详细信息，请参阅此相关问题：[Generate Array of Numbers that fit to a Probability Distribution in Ruby？](https://stackoverflow.com/questions/4550758/generate-array-of-numbers-that-fit-to-a-probability-distribution-in-ruby)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-18T21:59:11.697

要在 JavaScript 中生成分发版，请参阅[stdlib](https://github.com/stdlib-js/stdlib/tree/88c1a0ca14e19162600ecf0ec6530f2b3902f0e0/lib/node_modules/%40stdlib/math/base/random)，其中包括许多分发版的可播种 PRNG。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T22:39:20.943

从我读到的内容来看，一些 R 背叛者正在转向一个名为[Julia](http://julialang.org/)的库。**[它已经由 Julia的](https://github.com/JuliaLang/julia/blob/master/test/perf/perf.js)**制造者自己移植到 Javascript ，看起来很有希望。

**[朱莉娅语言](http://julialang.org/)**

# excel - Excel混合模式错误

> ID：11435221
> 
> 赞同：1
> 
> 时间：2012-07-11T14:44:49.237
> 
> 标签：excel, vba

我正在尝试在 excel 中使用 VBA 来访问现有的应用程序。当我运行我的 VBA 脚本时，我在应用程序日志中收到混合模式错误消息：

> “错误：混合模式程序集是针对运行时版本‘v2.0.50727’构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。”

但是，我正在调用的应用程序已经有一个配置文件，其中包含以下语句：

```
<!-- VS 2010 needs this legacyV2 stuff -->
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:24:58.477

更改配置文件以包含以下更改

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  <supportedRuntime version="v2.0.50727"></supportedRuntime>   
</startup> 
```

# android - 读取从 .net webservice 检索到的数据

> ID：11435222
> 
> 赞同：0
> 
> 时间：2012-07-11T14:44:48.993
> 
> 标签：android, eclipse

我有一个返回数据表的 Web 服务函数。如果我执行该网络服务，我会得到这样的结果。

```
<DataTable xmlns="http://tempuri.org/">
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
<xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="FTP" msdata:UseCurrentLocale="true">
<xs:complexType>
<xs:choice minOccurs="0" maxOccurs="unbounded">
<xs:element name="FTP">
<xs:complexType>
<xs:sequence>
<xs:element name="Host" type="xs:string" minOccurs="0"/>
<xs:element name="UserName" type="xs:string" minOccurs="0"/>
<xs:element name="password" type="xs:string" minOccurs="0"/>
<xs:element name="port" type="xs:short" minOccurs="0"/>
<xs:element name="FolderPath" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
</xs:element>
</xs:choice>
</xs:complexType>
</xs:element>
</xs:schema>
<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
<DocumentElement xmlns="">
<FTP diffgr:id="FTP1" msdata:rowOrder="0">
<Host>192.168.1.10</Host>
<UserName>hiren</UserName>
<password>soni</password>
<port>21</port>
<FolderPath>Images/</FolderPath>
</FTP>
<FTP diffgr:id="FTP2" msdata:rowOrder="1">
<Host>192.168.10.10</Host>
<UserName>hiren1</UserName>
<password>soni1</password>
<port>9021</port>
<FolderPath>Images/</FolderPath>
</FTP>
</DocumentElement>
</diffgr:diffgram>
</DataTable> 
```

我已经使用 SOAP 在我的 android 应用程序中执行这个 web 服务。下面是我的eclipse代码。

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE HttpTransport = new HttpTransportSE(SOAP_ADDRESS);
        Object response = null;

        try {
            HttpTransport.call(SOAP_ACTION, envelope);
            response = envelope.getResponse();
        } catch (IOException e) {
            response = e.toString();
        } catch (XmlPullParserException e) {
            response = e.toString();
        }

        return response.toString();
    } 
```

现在我不知道如何读取我收到的这些数据。

顺便说一句，当我返回 response.toString() 时，它给了我这样的结果：

```
anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; }; }; }; }; }; }; }; diffgram=anyType{DocumentElement=anyType{FTP=anyType{Host=192.168.1.10; UserName=hiren; password=soni; port=21; FolderPath=Images/; }; FTP=anyType{Host=192.168.10.10; UserName=hiren1; password=soni1; port=9021; FolderPath=Images/; }; }; }; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:12:51.147

我有同样的问题，以下几行解决了这个问题。试试以下几行，希望这会给你带有 XML 标签的数据，

```
httpTransport.debug=true; 
httpTransport.call(SOAP_ACTION, envelope);
String ss=httpTransport.responseDump; 
Log.d("Result --- ", ss); 
```

这将打印 Web 服务返回的完整 xml 文件。

# python - 在 Tkinter 中使用多个帧并没有给出预期的结果

> ID：11435225
> 
> 赞同：1
> 
> 时间：2012-07-11T14:44:52.793
> 
> 标签：python, tkinter, frames

我一直在学习 Tkinter，我写了一个小代码，我希望三个帧成为一个帧的一部分。现在，当我逐行执行此代码时，它会按预期工作。然而，在将它作为一个整体程序运行时，第一帧和第二帧之间有很多空白。

```
from Tkinter import *
tk = Tk()
tk.geometry("")
main_frame = Frame(tk)
main_frame.grid(row=0)
frame1 = Frame(main_frame, bg="blue", width=200, height=400, borderwidth =1)
frame1.grid(row=0, column=0)
frame2 = Frame(main_frame, bg="green", width=800, height=400)
frame2.grid(row=0, column=1)
frame3 = Frame(main_frame, bg="orange", width=1000, height=100)
frame3.grid(row =1)
tk.mainloop() 
```

另一个问题是如果我最大化窗口并将其更改回原始大小，或者我拉​​伸这个主窗口。我看到帧重叠和一些鬼影。有人可以解释这种奇怪的行为。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:50:51.123

问题在于您对其进行网格化的方式。默认情况下，每个对象都被网格化为一个块。所以，你的网格看起来像这样：

```
 -------------------------------
 |    frame 1     |  frame 2   |
 -------------------------------
 |    frame 3     |  nothing   |
 ------------------------------- 
```

在这种情况下，由于要大得多，因此`frame1`所坐的区域会扩大以容纳。此处的解决方法是指定关键字以允许跨越网格上的多于 1 列。`frame3``frame3``columnspan``frame3`

```
frame3.grid(row=1,column=0,columnspan=2) 
```

# html - 不使用 iframe 的原因？

> ID：11435227
> 
> 赞同：3
> 
> 时间：2012-07-11T14:44:58.783
> 
> 标签：html, iframe

我多次听说使用 iframe 是个坏主意。但我一直不知道为什么。这真的是个坏主意吗？有人可以列出一些不使用它们的原因吗？

假设我想使用 iframe 异步加载一些内容以更快地加载我的网站，如果这些内容不打算被搜索引擎索引的话。使用 iframe 仍然是个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:47:55.013

[“它们的创建成本比任何其他类型的 DOM 元素（包括脚本和样式）高 1-2 个数量级”](http://www.stevesouders.com/blog/2009/06/03/using-iframes-sparingly/)

![在此处输入图像描述](../Images/0cc1d06fd42c0166df179989b4a90d62.png)

# php - 如何判断列是否是使用 mysqli 的主键？

> ID：11435228
> 
> 赞同：10
> 
> 时间：2012-07-11T14:44:59.097
> 
> 标签：php, mysql, mysqli, primary-key

我正在将我的一些代码从旧的 mysql 扩展转换为 PHP 中的 mysqli 扩展。以前，通过 mysql 扩展，我使用了一些类似这样的代码来查找表中的主键：

```
while ($i < mysql_num_fields($result)) {
    $meta = mysql_fetch_field($result, $i);
    if ($meta->primary_key == 1){ 
        $primary_key = $meta->name; 
    }
    $i++;
} 
```

`$meta->primary_key == 1`很方便。

到目前为止，我已经转换为使用 mysqli 的代码：

```
while ($i < $result->field_count) {
    $meta = $result->fetch_field;
    if ($meta->primary_key == 1){ 
        $primary_key = $meta->name; 
    }
    $i++;
} 
```

当然，通过查看[这里](http://php.net/manual/en/function.mysql-fetch-field.php)的文档，我们可以看到`$meta->primary_key`mysqli 中不存在。我看到有一个`$meta->flags`. 这是我最好的猜测，虽然我不确定`flags`当我有主键时应该是什么值。

有谁知道我如何判断哪一列是使用 mysqli 的表的主键？

谢谢！

**编辑** 这是一些工作代码：

```
//get primary key
$primary_key = '';
while ($meta = $result->fetch_field()) {
    if ($meta->flags & MYSQLI_PRI_KEY_FLAG) { 
        $primary_key = $meta->name; 
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T14:47:56.447

你非常接近，你将需要该`flags`属性。

您正在寻找的标志是[`MYSQLI_PRI_KEY_FLAG`](http://php.net/manual/en/mysqli.constants.php#constantmysqli-pri-key-flag)，这意味着：

> 字段是主索引的一部分

您可以使用以下内容测试此标志：

```
if ($meta->flags & MYSQLI_PRI_KEY_FLAG) { 
  //it is a primary key!
} 
```

您在`&`此处用作[按位 AND 运算符](http://www.php.net/manual/en/language.operators.bitwise.php)。

# sql - SQL查询（分组）按列的条件

> ID：11435231
> 
> 赞同：2
> 
> 时间：2012-07-11T14:45:15.390
> 
> 标签：sql

如果我想进行查询以获取分组年龄的用户计数

每年单独计算：

```
select count(*) 
from tbl_user 
group by age 
```

如何创建自定义组，以便我可以获取范围内的年龄，例如......就像这个例子：

```
group by ages as 0-18 , 19-25 , 26-... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T14:52:58.617

在子查询中使用`CASE`表达式并在外部查询中按该表达式分组：

```
select age_group, count(*) 
from (
  select case when age between  0 and 18 then '0-18'
              when age between 19 and 26 then '19-25'
              ...
              end as age_group
  from tbl_user
) t
group by age_group 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:50:28.920

SUM 1 和 CASE WHEN 在 MS SQL Server 中工作时，您使用的是哪个版本的 SQL？

```
SELECT
    SUM(CASE WHEN Age >= 0 AND Age <= 18 THEN 1 ELSE 0 END) AS [0-18],
    SUM(CASE WHEN Age >= 19 AND Age <= 25 THEN 1 ELSE 0 END) AS [19-25]
FROM
    YourTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:53:47.687

您可以使用以下`CASE`语句：

```
SELECT Sum(CASE WHEN age BETWEEN 0 AND 18 THEN 1 ELSE 0 END) as [0-18],
Sum(CASE WHEN age BETWEEN 19 AND 25 THEN 1 ELSE 0 END) as [19-25],
Sum(CASE WHEN age BETWEEN 26 AND 34 THEN 1 ELSE 0 END) as [26-34]
FROM tbl_user 
```

这会将数据“展平”为一行 - 要为每个分组获取一行，请将此作为视图的基础，然后从中进行选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T15:05:20.370

数据属于表格，而不是代码。年龄类别是数据，恕我直言。

```
CREATE TABLE one
        ( val SERIAL NOT NULL PRIMARY KEY
        , age INTEGER NOT NULL
        );
INSERT INTO one (age) SELECT generate_series(0,31, 1);

CREATE TABLE age_category
        ( low INTEGER NOT NULL PRIMARY KEY
        , high INTEGER NOT NULL
        , description varchar
        );
INSERT INTO age_category (low,high,description) VALUES
   ( 0,19, '0-18')
 , ( 19,26, '19-25')
 , ( 26,1111, '26-...')
        ;

SELECT ac.description, COUNT(*)
FROM one o
JOIN age_category ac ON o.age >= ac.low AND o.age < ac.high
GROUP BY ac.description
        ; 
```

# sql - 使用 SQL Server CASE 语句消除除以零

> ID：11435232
> 
> 赞同：2
> 
> 时间：2012-07-11T14:45:20.470
> 
> 标签：sql, case

我试图`CASE`在我的[T-SQL](http://en.wikipedia.org/wiki/Transact-SQL) `SELECT`语句中使用零错误来消除这种除法。出于某种原因，我不断收到错误消息。这是我的逻辑。

```
SELECT 
    CASE 
       WHEN tb1.wpf = 0.000 THEN '0.000' 
       ELSE SUM(tb2.weight/tb1.wpf) 
    END AS Average 
FROM Table1 tb1, table2 tb2 
GROUP BY tb1.wpf 
```

我没有包括连接和我所有的逻辑来保持我的问题特定于这个案例。我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:50:13.930

将`CASE`应用于聚合，而不是单个位。试试这个：

```
SELECT SUM(Average) FROM (
    SELECT 
            CASE 
               WHEN tb1.wpf = 0 THEN 0
               ELSE tb2.weight / tb1.wpf
            END AS Average 
        FROM Table1 tb1, table2 tb2 
) a 
```

# java - LazyInitializationException 与太多表 - 更好的模型？

> ID：11435233
> 
> 赞同：2
> 
> 时间：2012-07-11T14:45:21.123
> 
> 标签：java, hibernate, jsf, primefaces, jboss7.x

两天来，我试图让我的 JSF+Primefaces/JBoss AS 7.1/Hibernate 应用程序工作，我在`LazyInitializationException`s 和`Too many tables; MySQL can only use 61 tables in a join`错误之间来回跳动。

我将尝试尽可能正确地描述我当前的实体模型。

我有一台由几个模块组成的机器。每个模块基本上都是我的 Web 应用程序中的一个选项卡，在这个选项卡上，一个表单中有几个字段。问题在于下拉字段。对于那些，我从构建选项的drools系统外部获取可用选项，具体取决于其他模块中的其他字段。例如，可用的颜色取决于所选的表面材料，并相应地创建下拉菜单。

现在，由于 JSF/Primefaces 的限制，我需要将选定的下拉值保存为我的模块实体中的对象。请参阅[Primefaces selectOneMenu 中的 CustomContent without persisting object](https://stackoverflow.com/questions/11396172/customcontent-in-primefaces-selectonemenu-without-persisting-object)和[Disabling items with PrimeFaces SelectOneMenu with custom content / p:column](https://stackoverflow.com/questions/10817760/disabling-items-with-primefaces-selectonemenu-with-custom-content-pcolumn)了解我有/有的问题。

因此，对于每个 DropDown 字段，我`@OneToOne`在模块实体类中都有一个关系：

```
@Entity
public class PressureModule {

    @OneToOne(cascade = CascadeType.ALL)
    private Machine                machine;

    @OneToOne(cascade = CascadeType.ALL)
    private DropDownSelectItem     type         = DropDownSelectItem.getSelectOneItem();

    @OneToOne(cascade = CascadeType.ALL)
    private DropDownSelectItem     pressureTop  = DropDownSelectItem.getSelectOneItem();

    @OneToOne(cascade = CascadeType.ALL)
    private DropDownSelectItem     color        = DropDownSelectItem.getSelectOneItem();

    // getters, setters
} 
```

还有一个 DopDownSelectItem：

```
@Entity
public class DropDownSelectItem implements Serializable, Comparable<DropDownSelectItem> {

    @Id
    @GeneratedValue
    private Long              id;
    @Column
    private String            label;
    @Column
    private String            value;
    @Column
    private boolean           disabled;
    @Column
    private String            disabledReason;
} 
```

Hibernate 自动创建以下表：

```
CREATE TABLE `dropdownselectitem` (
  `id` bigint(20) NOT NULL,
  `disabled` tinyint(1) default NULL,
  `disabledReason` varchar(255) default NULL,
  `label` varchar(255) default NULL,
  `value` varchar(255) default NULL,
  PRIMARY KEY  (`id`),
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ;

CREATE TABLE `pressuremodule` (
  `id` bigint(20) NOT NULL,
  `machine_id` bigint(20) default NULL,
  `pressuretop_id` bigint(20) default NULL,
  `color_id` bigint(20) default NULL,
  `type_id` bigint(20) default NULL,
  PRIMARY KEY  (`id`),
  CONSTRAINT `FK8E3D129AE7CE7BEF` FOREIGN KEY (`type_id`) REFERENCES `dropdownselectitem` (`id`),
  CONSTRAINT `FK8E3D129ABD1E6ED1` FOREIGN KEY (`pressuretop_id`) REFERENCES `dropdownselectitem` (`id`),
  CONSTRAINT `FK8E3D129ABD1EE330` FOREIGN KEY (`color_id`) REFERENCES `dropdownselectitem` (`id`),
  CONSTRAINT `FK8E3D129AC56471E2` FOREIGN KEY (`machine_id`) REFERENCES `machine` (`id`),
) ENGINE=InnoDB DEFAULT CHARSET=latin1 ; 
```

下拉列表中填充了以下逻辑：

在 .xhtml 中：

```
<p:selectOneMenu value="#{bean.field}" var="x">
    <f:selectItems
        value="#{dropDownValuesBean.getSelectItems()}" var="dd"
        itemLabel="#{dd.label}" itemValue="#{dd}" />
    <p:column>
        <h:outputText value="#{x.label}" />
        <h:outputText value=" {#{x.value}}" />
    </p:column>
    <p:ajax event="change" update="@form" />
</p:selectOneMenu> 
```

和 DropDownValuesBean（缩短）：

```
public List<PstSelectItem> getSelectItems(final String module, final String field) {

    knowledgeBase = KnowledgeBaseFactory.newKnowledgeBase();
    List<PstSelectItem> returnList;

    StatefulKnowledgeSession statefulKnowledgeSession = knowledgeBase.newStatefulKnowledgeSession();
    statefulKnowledgeSession.insert(sessionBean.getActiveMachine());
    statefulKnowledgeSession.fireAllRules();
    Collection<FactHandle> handles = statefulKnowledgeSession.getFactHandles(new ClassObjectFilter(DropDownSelectItem.class));
    for (FactHandle handle : handles) {
        DropDownSelectItem selectItem = (DropDownSelectItem) statefulKnowledgeSession.getObject(handle);
        returnList.add(selectItem);
    }
    Collections.sort(returnList);
    return returnList;
} 
```

现在的问题是，如果我有很多下拉字段（我们谈论最多 150 个），则会发生以下异常：

```
javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: Too many tables; MySQL can only use 61 tables in a join 
```

原因很清楚，我能理解这个问题。现在，如果我更改要使用的实体`@OneToOne( fetch = FetchType.LAZY)`，我会遇到著名的`LazyInitializationException`. 这并不奇怪。

当我为此搜索解决方案时，我主要参考`OpenSessionInView`Spring 框架附带的过滤器。由于我不使用 Spring，并且由于我不打算引入该依赖项，所以我有点迷茫。

我已经尝试过以下事情：

*   `@PersistenceContext(type = PersistenceContextType.EXTENDED)`在我的 DAO 中使用： [https ://community.jboss.org/thread/177735](https://community.jboss.org/thread/177735)
*   仅在数据库中存储对选定的下拉值（仅选定的字符串而不是整个对象）的引用-失败是因为我无法从实体中的该字符串重新计算选定的值`DropDownSelectItem`，因为我无法将相应的 Drools 逻辑注入实体（ s`@Inject`中不支持 ing `@Entity`）
*   将序列化的 DropDownSelectItem 直接保存在数据库中，但这会导致巨大的数据库表（因为每个 DropDown-item 都保存在一个 blob 中）并且我无法使用简单的 SQL 获取所选值（需要用于报告目的）

环境：

*   JBoss AS 7.1.0
*   Primefaces 3.2
*   MySQL 5.5
*   JDK 6

有任何想法吗？如果需要有关配置或任何内容的更多信息，我很乐意提供这些信息！

# facebook - 列出喜欢页面或网址的用户

> ID：11435238
> 
> 赞同：0
> 
> 时间：2012-07-11T14:45:29.453
> 
> 标签：facebook, facebook-graph-api, facebook-like

我需要列出喜欢特定网址或至少喜欢 Facebook 页面的用户

我尝试同时使用 PHP 和[https://api.facebook.com/method/fql.query](https://api.facebook.com/method/fql.query)

我可以看到该 URL 的点赞数

```
$arr[1]['url'] = 'http://example.com/test/test3.php?ref=gametest&amp;fb_ref=gametest&amp;fb_source=gametest';
$arr[1]['object_id'] = '10150930574980642';

require_once("facebook.php");
$facebook = new Facebook(array(
    'appId'  => '325617367526193',
    'secret' => '6c40e01dd717431c9b7ec6ce68bf0c94',
)); 
```

我使用[http://developers.facebook.com/docs/reference/fql/like/](http://developers.facebook.com/docs/reference/fql/like/)示例来形成类似的查询

```
$query = <<<FQL
    SELECT user_id FROM like WHERE object_id="10150930574980642"
FQL;
$fql_query_url = 'https://graph.facebook.com/fql?q=' . rawurlencode ( $query );
$fql_query_url .= '&access_token=' . rawurlencode ( $facebook->getAccessToken() ); 
```

但生成的链接根本没有提供任何数据

```
{
   "data": [

   ]
} 
```

通过带有或不带有 access_token 的链接获得相同的结果

```
api.facebook.com/method/fql.query?query=SELECT%20user_id%20FROM%20like%20WHERE%20object_id%3D%2210150930574980642%22 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:19:14.290

“like”表只会返回喜欢以下对象（视频、笔记、链接、照片或相册）的用户的 ID。

您无法找到喜欢特定页面的人的用户 ID，只能找到该页面中的对象。

例如 Facebook 页面上专辑的点赞数（SELECT user_id FROM like WHERE object_id="10150146071791729"&access_token=[access_token]）

如果您想获取喜欢特定链接的用户，您需要先获取该链接的 object_id：

[https://api.facebook.com/method/fql.query?query=SELECT url,site,id FROM object_url WHERE url IN ('http://developers.facebook.com')](https://api.facebook.com/method/fql.query?query=SELECT%20url,site,id%20FROM%20object_url%20WHERE%20url%20IN%20%28%27http://developers.facebook.com%27%29)

这将返回链接[http://developers.facebook.com](http://developers.facebook.com)的 object_id 。

# parameters - 仅在 Windows Batch 脚本中选定的菜单选项上运行/执行语句

> ID：11435240
> 
> 赞同：1
> 
> 时间：2012-07-11T14:45:31.013
> 
> 标签：parameters, batch-file

我在批处理脚本中有这个菜单：

```
ECHO *1* - A
ECHO *2* - B
ECHO *3* - C
ECHO *4* - D
ECHO *5* - runAll
ECHO *6* - Quit 
```

现在，我用它做的是如果用户输入 1，然后它运行第一个并循环回到菜单，第二个是 2，依此类推。
如果用户输入 5，那么我的脚本将运行 1 到 4 步循序渐进。

我的问题是：“是否可以运行/执行您选择执行的某些任务？”
假设我想执行 1 & 4 并循环回到主菜单。我输入“1（空格）4”，脚本获取这些参数/参数并找到相应的选项并执行它。是否有意义？是否可以？

我确实可以选择单独运行这些选项中的每一个，但是我正在谈论的这个想法使它更有效和更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:01:59.243

```
:begin
ECHO *1* - A
ECHO *2* - B
ECHO *3* - C
ECHO *4* - D
ECHO *5* - runAll
ECHO *6* - Quit

set /p CH=choose
for /f  "tokens=* delims= " %%A in ("%CH%") DO (
    if *%%A* EQU *1* call A
    ....
    if *%%A* EQU *4* call D
    if *%%A* EQU *5* call :callAll
    if *%%A* EQU *6* exit
)
goto :begin

:callAll
    call A
    ...
    call D
goto :eof 
```

编辑：

```
:begin
ECHO *1* - A
ECHO *2* - B
ECHO *3* - C
ECHO *4* - D
ECHO *5* - runAll
ECHO *6* - Quit

set /p CH=choose
echo nul >temp.bat
set line=title "temp script"
for /f  "tokens=* delims=;, " %%A in ("%CH%") DO (
    if *%%A* EQU *1* set line=%line% &call A 
    ....
    if *%%A* EQU *4* set line=%line% &call D 
    if *%%A* EQU *5* call :callAll
    if *%%A* EQU *6* exit
)
echo %line% >>temp.bat
call temp.bat
del /s /q /f temp.bat
goto :begin

:callAll
    line=%line% &call A 
    ...
    line=%line% &call D 
goto :eof 
```

这将创建（并在执行后删除）一个临时脚本，该脚本将在输入选项后执行。您也可以创建自己编辑的脚本，但代码将更难以维护。for 循环处理“客户”输入的数据并执行所有以空格分隔的数字。在“delims =”中，您可以添加逗号、分号和您想要的内容。

# c# - 如何使用 WcfClientBase 辅助类进行 WCF 连接？

> ID：11435245
> 
> 赞同：1
> 
> 时间：2012-07-11T14:45:42.293
> 
> 标签：c#, wcf, .net-4.0, wcf-client

[Ufuk Hacıoğulları编写了一个名为](https://stackoverflow.com/users/205859/ufuk-haciogullari)[WcfClientBase](https://github.com/ufukh/WcfClientBase)的不错的 WCF 帮助程序类。但是，我在实施它时遇到了一些困难。

我将我的班级定义如下：

```
public class ModelsBaseClass : ServiceClientBase<MemberServiceClient>
{... 
```

并尝试在以下通过实体框架返回复杂对象的方法中使用帮助程序类：

```
 public static MyProject.DAL.Primary.Models.sq_newsfeed_GetProfileByID_Result GetAllProfileDetails(int profileID)
    {
        try
        {
            using (memberServiceClient = new MemberServiceClient())                                // connect to the data service
            {
                return memberServiceClient.GetAllProfileDetailsByID(profileID);
            }
        }
        catch (Exception ex)
        {
            ErrorLogging.Instance.Fatal(ex);
            return null;
        }
    } 
```

按照[此处](https://gist.github.com/3086253)的示例，即使这是派生类，我也无法访问该类的方法，并且`protected`访问修饰符应该允许访问-对吗？

基本上我无法访问模型基类中的`PerformServiceOperation`or`TryPerformServiceOperation`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:48:08.940

你注意到你的方法了`static`吗？这就是您无法访问父类的实例成员的原因。

# cuda - CUDA：仅使用一个内核和线程栅栏移动体积纹理的内容

> ID：11435252
> 
> 赞同：0
> 
> 时间：2012-07-11T14:46:05.083
> 
> 标签：cuda

我想沿着向量 vecShift 移动体积纹理的内容。我想到了这样的内核：

```
__global__ void
moveVolume(int* vecShift)
{
  // Determine position of current voxel as ptDest

  // Determine position of voxel we copy the content from as ptSrc

  // Read value at ptSrc and store it to voxelColor

  // __threadfence()

  // Write voxelColor to voxel at position ptDest
} 
```

threadfence 将确保所有体素都已读取其“伙伴”的内容，并且在每个体素完成读取操作之前不会写入 ptDest，是吗？

如果这是真的，为什么我（有时）会得到一种模糊的伪影？还是我对 threadfence 的功能有错误的看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T23:47:32.340

正如 talonmies 在评论中解释的那样，在`__threadfence()`这里使用既不是必要的，也不是充分的。`__threadfence()`不提供全局屏障同步，它只是确保在*调用的线程继续之前，`__threadfence()`**该线程*在围栏之前的所有写入对内核启动中的所有其他活动线程都是可见的。

您真正想要的是双缓冲您的卷数据（即写入与您读取不同的数组）。您不能覆盖数组的其他部分，除非您可以保证它们只能被*同一线程块中的*其他线程读取。否则你有一个竞争条件，你的程序是不正确的。

注意：即使在顺序（CPU）实现中，您也需要为这种类型的计算双缓冲数据！

您正在实施的与平流内核非常相似，将用于流体动力学模拟，我敢肯定在网络上有多个您想要的示例（并行或顺序）。

标记

# python - django templateTag 中的上下文 KeyError

> ID：11435253
> 
> 赞同：1
> 
> 时间：2012-07-11T14:46:06.583
> 
> 标签：python, django, django-templates

`page`我的应用程序的模板标签代码为上下文变量中缺少的键 ( ) 引发 KeyError 。在我的模板中，我不使用 context.variableKeyName 来引用上下文变量，我只是引用 variableKeyName（例如`{% if is_paginated %}`）。在我的模板中，我可以`page`毫无例外地引用密钥。

我应该如何将上下文与它需要的键一起放入我的模板标签中？

* * *

以下是详细信息：

我正在使用 django-profiles 返回一些配置文件的列表：

```
url(r'^profiles/$', 'profiles.views.profile_list', 
kwargs={ 'paginate_by':10 }, 
name='profiles_profile_detail'), 
```

在这里调用这段代码： [https://bitbucket.org/ubernostrum/django-profiles..](https://bitbucket.org/ubernostrum/django-profiles/src/c21962558420/profiles/views.py#cl-332)

在我的模板中，我`{% if is_paginated %}`在调用模板标签之前进行了测试：

```
{% if is_paginated %}{% load paginator %}{% paginator 3 %}{% endif %} 
```

（我使用的模板标签灵感来自[http://www.tummy.com/.../django-pagination/](http://www.tummy.com/Community/Articles/django-pagination/)为 django 1.3 [http://djangosnippets.org/snippets/2680/](http://djangosnippets.org/snippets/2680/)更新）

但这会导致“分页”的 KeyError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:05:09.843

[http://djangosnippets.org/snippets/2680/](http://djangosnippets.org/snippets/2680/)的文档（课堂评论）说：

> 必需的上下文变量： paged：Paginator.page() 实例。

它也用于模板标签：

```
paged = context['paged'] 
```

您需要提供此上下文变量才能使此模板标签起作用。我认为您最好的选择是复制 `profiles.views.profile_list`视图代码并添加此上下文变量。不幸的是，它仍然是一个基于函数的视图——否则扩展它会更干净、更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:15:07.437

正确的编码方式是：

```
{% paginator v 3 %} 
```

`v`- 包含数据库项目的变量

# ruby-on-rails - 从 Rails 2.3.5 升级到 2.3.11 后出现 NoMethodError (undefined method `name' for {"name"=>"Data Set 1", "values"=>["", ""]}:Hash) 错误

> ID：11435260
> 
> 赞同：0
> 
> 时间：2012-07-11T14:46:32.107
> 
> 标签：ruby-on-rails, json, hash, upgrade, slickgrid

升级到 Rails 2.3.11 后，我不能再使用 SlickGrid 创建我们所谓的数据集。如果单击切换图标来创建数据集，我会得到以下堆栈跟踪：

```
NoMethodError (undefined method `name' for {"name"=>"Data Set 1", "values"=>["", ""]}:Hash):
  lib/slick_data.rb:99:in `to_data_json'
  lib/slick_data.rb:97:in `map'
  lib/slick_data.rb:97:in `to_data_json'
  app/controllers/data_sets_controller.rb:11:in `index'
  haml (3.0.22) lib/sass/plugin/rack.rb:41:in `call'
  airbrake (3.0.4) lib/airbrake/rack.rb:27:in `call'
  airbrake (3.0.4) lib/airbrake/user_informer.rb:12:in `call'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /Users/jasonbodak/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start' 
```

这是 slick_data.rb 中的“to_data_json”代码：

```
def to_data_json
  new_data = sanitized_data.map do |d|
    h = {}
    h['data_set_name'] = d.name
    j = 1
    d['values'].each do |v|
      h["var_#{j}"] = v
      j += 1
    end
    h
  end
  ActiveSupport::JSON.encode(new_data)
end 
```

这是 data_sets_controller.rb 中“索引”的代码：

```
def index # Ajax
  @scenario = Scenario.find(params[:scenario_id])
  sd = SlickData.new(@scenario.data_sets)
  render :json => {
    :html    => render_to_string(:layout => false, 
                                 :template => 'data_sets/index.html.erb', 
                                 :object => @scenario),
    :id      => @scenario.id,
    :data    => sd.to_data_json,
    :columns => sd.to_col_json,
  }
end 
```

我可能需要升级我的 json gem 吗？我正在使用 1.4.6。或者也许我需要升级我的 SlickGrid 版本？我使用的是 1.4.3 版。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:03:10.023

没关系，我只需要更改`d.name`为`d['name']`lib/slick_data.rb 即可修复错误。我想知道为什么这在 Rails 2.3.5 之前也有效？

# c# - C#：异步NamedPipeServerStream理解

> ID：11435262
> 
> 赞同：4
> 
> 时间：2012-07-11T14:46:33.530
> 
> 标签：c#, asynchronous, named-pipes

我试图找到任何好的和清晰的异步 NamedPipeServerStream 示例，但找不到适合我的示例。

我想要一个异步接受来自客户端的消息的 NamedPipe 服务器。客户很简单，对我来说很好。但是我找不到服务器的例子，或者无法理解它是如何工作的。

现在据我了解，我需要创建 NamedPipeServerStream 对象。我们开工吧：

```
namedPipeServerStream = new NamedPipeServerStream(PIPENAME, PipeDirection.In, 1, PipeTransmissionMode.Byte, PipeOptions.Asynchronous, BUFFERSIZE, BUFFERSIZE); 
```

似乎工作。**但我不知道，我是否必须使用 PipeSecurity 或 PipeAccessRule？我吗？**我的服务器将在本地系统中作为 Windows 服务运行。

接下来是什么？我想我需要使用 BeginWaitForConnection 进行异步连接。让我们来看看：

```
namedPipeServerStream.BeginWaitForConnection(WaitForConnectionAsyncCallback, <some strange thing>); 
```

**问题1**：这是什么“奇怪的东西”？如何使用它？

**问题2**：我应该这样做

```
while(true)
{
namedPipeServerStream.BeginWaitForConnection(WaitForConnectionAsyncCallback, <some strange thing>);
} 
```

让我的服务器总是等待连接？或者我需要以其他方式做到这一点？

然后...让我们看一下 WaitForConnectionAsyncCallback 函数：

```
private void WaitForConnectionAsyncCallback(IAsyncResult result)
        {
            Console.WriteLine("Client connected.");
            byte[] buff = new byte[BUFFERSIZE];
            namedPipeServerStream.Read(buff, 0, namedPipeServerStream.InBufferSize);
            string recStr = General.Iso88591Encoding.GetString(buff, 0, namedPipeServerStream.InBufferSize);
            Console.WriteLine("   " + recStr);
            namedPipeServerStream.EndWaitForConnection(result);
        } 
```

..这当然行不通。因为**我不知道如何从流中接收字符串。如何？**现在它引发了一个 InvalidOperationException：

> 管道尚未连接。

那么如何使用 NamedPipeServerStream 组织异步工作呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T15:28:46.410

*   您修改 PipeSecurity 以限制对管道的访问，只允许受祝福的程序连接到您的服务。把它放在次要位置，直到你完成这项工作并进行了安全分析，表明这种限制是合理的。

*   “一些奇怪的事情”只是您可以传递给回调方法的任意对象。您并不经常需要它，但如果您编写回调以便它服务于多个连接，它会很有帮助。在这种情况下，您需要了解有关已连接的特定管道的更多信息，*state*参数允许您传递该信息。在您的回调方法中，result.AsyncState 属性为您提供对该对象的引用。以后只需要担心它，您会在需要时找到它的用途。就这样过去`null`吧。

*   那是一个错误。在对管道执行任何其他操作之前，您必须先调用 EndWaitForConnection()。只需将其移动到方法的顶部即可。您通常希望将它写在 try/catch 中，以便捕获 ObjectDisposedException，即在退出程序之前关闭管道时将引发的异常。

# mysql - 在没有远程连接的情况下连接到数据库

> ID：11435263
> 
> 赞同：0
> 
> 时间：2012-07-11T14:46:37.523
> 
> 标签：mysql, database, security, phpmyadmin

由于我的提供商的安全考虑，我无法通过 MySQL Workbench 连接到我的数据库。访问我的数据库的唯一方法是使用 phpmyadmin。因为我习惯使用 MySQL Workbench 和他们的工具，所以维护我的数据库对我来说要容易得多。使用 phpmyadmin 很烦人，所以我正在搜索一个解决方案以使用 MySQL Workbench。有没有办法打破这种安全考虑或通过 phpmyadmin 连接 MySQL Workbench 以获得对数据库的访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:50:13.323

我想不是。只有在 MySQL 中更改表用户才能从其他 IP 和主机访问。其他用户无法访问此表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:32:24.557

如果您提供的主机最近这样做了，那么我很确定这一定是对上个月在 mysql 中发现的这个可怕的[安全漏洞的回应。](https://community.rapid7.com/community/metasploit/blog/2012/06/11/cve-2012-2122-a-tragically-comedic-security-flaw-in-mysql)攻击就像运行一行 shell 命令一样简单。

并非所有 OS/MySQL 组合都容易受到攻击。如果您的托管公司是，那么一会儿 - 所有客户登录都处于危险之中（包括 root 登录）。

要回答您的问题，不幸的是，在这种情况下您无能为力。即使您有 shell(ssh) 访问权限，您**也无法执行任何端口转发技巧，因为在共享托管环境中****通常**不允许端口转发。如果您想尝试，可以在 unix 机器上运行此命令

```
$ ssh -L 3306:localhost:3306 username@yoursite.com 
```

如果您可以登录并且没有看到与端口转发相关的任何错误，也许您可​​以将您的工作台定向到端口**3306上的****localhost**，理论上它应该可以工作。

 **如果您使用的是 windows，您可以使用 putty 进行端口转发[，如此处所述](http://www.cs.uu.nl/technical/services/ssh/putty/puttyfw.html)。**

# perforce - Perforce 批处理脚本

> ID：11435267
> 
> 赞同：0
> 
> 时间：2012-07-11T14:46:44.583
> 
> 标签：perforce, perforce-client-spec, perforce-integrate, perforce-branch-spec

您好我正在尝试编写一个批处理脚本，该脚本将同一组配置文件从仓库中的一个应用程序复制到另一个应用程序（一旦签入第一个应用程序，就会触发复制这些文件）。我心中的想法是：

1.  使用 p4 add 将文件从第一个应用程序添加到客户端
2.  使用 p4 复制
3.  p4 提交

这是正确的方法吗？请帮忙。请提供任何可用的示例脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:41:14.587

经过一段时间的尝试，我能够弄清楚。我使用的方法是

1.  创建一个新的工作区
2.  将文件同步到工作区
3.  使用 p4 copy 复制文件和
4.  提交更改。

# php - Dropbox 使用什么来记录修订历史记录？如何添加自己的？

> ID：11435270
> 
> 赞同：3
> 
> 时间：2012-07-11T14:46:49.800
> 
> 标签：php

Dropbox 最简洁的功能之一是它保留了您上传的文件的早期版本。

我们网站的一部分是一个类似的文件存储库（客户上传他们的文件以将它们存储在异地），我们希望实现一个类似的功能。

Dropbox 如何管理修订？他们是否使用一些自动提交每个文件的现成修订软件？还是他们只是推出了自己的解决方案？

我希望有一个我可以使用的第 3 方库，因为这不是我们自己有时间从头开始做的事情。

感谢你们提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:50:06.930

他们很可能使用了定制解决方案。您可以查看的可能方法是在文件系统上为每个版本存储一个单独的文件，在数据库中为每个版本存储一个单独的文件，或者计算修订文件的差异并存储它。

第三种选择是最好的，因为它使用的空间最少。

看一下[`xdiff_file_bdiff()`](http://www.php.net/manual/en/function.xdiff-file-bdiff.php)，它计算两个文件（旧版本和新版本）的二进制差异。xdiff 库应该为您提供执行此操作所需的工具。您还可以考虑使用 git 之类的东西进行版本控制，只需使用 PHP 自动化该过程。您可能想要运行一些基准测试以查看哪种解决方案运行速度最快。

# android - 如何在xml中设置android表格布局列填充

> ID：11435276
> 
> 赞同：6
> 
> 时间：2012-07-11T14:47:05.273
> 
> 标签：android, android-tablelayout

![我的布局的线框](../Images/57e828f3d7ce3a1b5406c3dd026f2680.png)

我设法使用`TableLayout`. `android:layout_span`帮助我。

问题是我需要 Column1 和 Column2 之间的一些差距。无论哪种方式`Padding / Margin`

我不喜欢这个任务的程序。必须有一个简单的方法来做到这一点。

可以使用xml设置吗？

更新：我试图设置列子的填充它没有均匀地对齐列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:25:58.677

尝试将`android:layout_marginRight="8dp"`视图添加到您希望布局 XML 中每一行的间隙位置左侧的列中。它对我有用。

更好的是，您可以将填充尺寸放在 values/dimens.xml 文件中并从那里引用边距。

例如：

值/尺寸.xml

```
<resources>
    <dimen name="column_1_right_margin">8dp</dimen>
</resources> 
```

布局/table.xml

```
<TableLayout
    ... layout params>
    <TableRow>
        <TextView
            ... layout params
            android:layout_marginRight="@dimen/column_1_right_margin" />
        <TextView
            ... layout params />
    </TableRow>
    <TableRow>
        <TextView
            ... layout params
            android:layout_marginRight="@dimen/column_1_right_margin" />
        <TextView
            ... layout params />
    </TableRow>
</TableLayout> 
```

要进一步清除它并停止代码重复，您可以为第 1 列创建一个样式，然后您所要做的就是`View`在第一列中为每个列应用样式。[请参阅此处了解更多信息](http://developer.android.com/guide/topics/ui/themes.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:00:51.973

尝试在 xml 布局中使用 TableLayout，然后对于 Table Layout 的每个 TableRow，您可以使用 android:layout_marginRight 和 android:layout_marginLeft 指定左边距或右边距。当然，您的 TableLayout 将托管在一个线性布局中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:28:25.763

你可以做空列，也许用一些不可见的内容填充它。

这个解决方案不是最好的，我仍在寻找更好的解决方案..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T06:32:18.760

尝试在 android 中使用 android:background 属性和 android:margin 并在 dip 中提及该值。这将根据您的规范以不同的颜色显示每个子视图，边距将帮助您在视图之间留出空间。希望这会有所帮助

# java - Android - 从磁盘上传图像

> ID：11435278
> 
> 赞同：2
> 
> 时间：2012-07-11T14:47:14.530
> 
> 标签：java, android, file-upload, bitmap, out-of-memory

我在 Android 上上传文件时遇到了一些问题。我已经将应用程序的这一部分拼凑在一起，现在需要进行一些修改。

我正在尝试从 Uri 引用的磁盘映像将文件上传到服务器。

在上传之前，我正在尝试根据纵横比将图像缩小到 1280 的最大尺寸。

这是一个示例类，其中包含我正在使用的实际代码。我敢肯定它的效率非常低：

```
/**
 * This is a fake class, this is actually spread across 2 or 3 files
 */
public class Temp
{
  /**
   * This is used to return an Input stream of known size
   */
  public static class KnownSizeInputStream extends InputStreamBody
  {
    private int mLength;

    public KnownSizeInputStream( final InputStream in, final int length, final String mimeType, final String filename )
    {
      super( in, mimeType, filename );
      mLength = length;
    }

    public long getContentLength()
    {
      return mLength;
    }
  }

  private static final int MAX_WIDTH  = 1280;
  private static final int MAX_HEIGHT = 1280;

  /**
   * Open up a file on disk and convert it into a stream of known size
   */
  public KnownSizeInputStream toStreamAio( Context c, Uri path )
  {
    /**
     * Scale down bitmap
     */
    Bitmap bitmapData = null;

    try
    {
      bitmapData = BitmapFactory.decodeStream( c.getContentResolver().openInputStream( path ) );
    }
    catch( Exception e )
    {
      e.printStackTrace();
    }

    int imgWidth = bitmapData.getWidth();
    int imgHeight = bitmapData.getHeight();

    // Constrain to given size but keep aspect ratio
    float scaleFactor = Math.min( ( ( float )MAX_WIDTH ) / imgWidth, ( ( float )MAX_HEIGHT ) / imgHeight );

    Matrix scale = new Matrix();
    scale.postScale( scaleFactor, scaleFactor );
    final Bitmap scaledImage = Bitmap.createBitmap( bitmapData, 0, 0, imgWidth, imgHeight, scale, false );

    try
    {
      bitmapData = scaledImage.copy( scaledImage.getConfig(), true );

      scaledImage.recycle();
    }
    catch( Exception e )
    {
      e.printStackTrace();
    }

    /**
     * To byte[]
     */
    byte[] byteData = null;

    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    bitmapData.compress( Bitmap.CompressFormat.JPEG, 100, baos );

    byteData = baos.toByteArray();

    /**
     * To stream
     */
    return new KnownSizeInputStream( new ByteArrayInputStream( byteData ), byteData.length, "image/jpg", "Some image" );
  }

  /** 
   * Some pieces are removed, the main part is the addPart line
   */
  public void doUpload()
  {
    // create a new HttpPost, to our specified URI
    HttpPost post = new HttpPost( postUri );

    // org.apache.http.entity.mime
    MultipartEntity entity = new MultipartEntity( HttpMultipartMode.STRICT );

    // This line starts all of the issues
    entity.addPart( "file", toStreamAio( mContext, Uri.parse( "/some/file.jpg" ) ) );

    post.setEntity( entity );

    // send it
    HttpResponse response = client.execute( post );

  }
} 
```

这是我得到的例外情况，我从尝试分配图像的完整大小的调整大小中猜测：

```
Caused by: java.lang.OutOfMemoryError
 at android.graphics.Bitmap.nativeCopy(Native Method)
 at android.graphics.Bitmap.copy(Bitmap.java:403)
 at com.app.helper.UploadableImage.toScaledBitmap(UploadableImage.java:170)
 at com.app.helper.UploadableImage.toByteArray(UploadableImage.java:53)
 at com.app.helper.UploadableImage.toStream(UploadableImage.java:242)
 at com.app.rest.task.UploadContentTask.doInBackground(UploadContentTask.java:80)
 at com.app.rest.task.UploadContentTask.doInBackground(UploadContentTask.java:1)
 at android.os.AsyncTask$2.call(AsyncTask.java:264)
 at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 ... 5 more 
```

它是由这条线触发的：

```
data = scaledImage.copy( scaledImage.getConfig(), true ); 
```

我想我要问的主要问题是，如何从磁盘上的路径获取图像，到缩放的图像，再到可以放入的流：

```
org.apache.http.entity.mime.MultipartEntity 
```

通过：

```
.addPart("file", streamData); 
```

最有效的是，假设图像可以很大（~6000px 是我迄今为止达到的最大尺寸）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:24:41.700

首先，为什么要复制缩放的位图？你不能像这样直接压缩缩放的位图：

```
final Bitmap scaledImage = Bitmap.createBitmap(bitmapData, 0, 0,
        imgWidth, imgHeight, scale, false);
scaledImage.compress(Bitmap.CompressFormat.JPEG, 100, baos); 
```

如果您可以避免复制，则可以避免获得`OutOfMemoryError`.

此外，即使您使用 JPEG 压缩选择 95% 的质量（处理自然物体的照片时），您也可以实现良好的压缩，质量损失几乎无法察觉。您应该尝试质量设置并自行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:52:47.590

这是现在为我工作的完整课程。您使用 Context 和 Uri 加载它，并调用三个公共方法中的任何一个：

```
public class UploadableImage
{
  private static final int MAX_WIDTH  = 1280;
  private static final int MAX_HEIGHT = 1280;

  private Uri              mUri;

  private String           mImageName;

  private Context          mContext;

  public UploadableImage( Context context )
  {
    mContext = context;

    generateFilename();
  }

  public UploadableImage( Context context, Uri uri )
  {
    mContext = context;
    mUri = uri;

    generateFilename();
  }

  // TODO Generate...
  private void generateFilename()
  {
    mImageName = UUID.randomUUID().toString() + ".jpg";
  }

  public void setUri( Uri uri )
  {
    mUri = uri;
  }

  public Bitmap toBitmap()
  {
    try
    {
      InputStream input = mContext.getContentResolver().openInputStream( mUri );

      BitmapFactory.Options readOptions = new BitmapFactory.Options();
      readOptions.inJustDecodeBounds = true;

      BitmapFactory.decodeStream( input, null, readOptions );

      input.close();

      // Raw height and width of image
      final int height = readOptions.outHeight;
      final int width = readOptions.outWidth;

      int inSampleSize = 1;

      if( height > MAX_HEIGHT || width > MAX_WIDTH )
      {
        if( width > height )
        {
          float result = ( float )height / ( float )MAX_HEIGHT;

          inSampleSize = ( int )FloatMath.ceil( result );
        }
        else
        {
          float result = ( float )width / ( float )MAX_WIDTH;

          inSampleSize = ( int )FloatMath.ceil( result );
        }
      }

      return toBitmap( inSampleSize );
    }
    catch( Exception e )
    {
      e.printStackTrace();
    }

    return null;
  }

  public Bitmap toBitmap( int sampleSize )
  {
    try
    {
      InputStream input = mContext.getContentResolver().openInputStream( mUri );

      input = mContext.getContentResolver().openInputStream( mUri );

      // Decode bitmap with inSampleSize set
      BitmapFactory.Options scaleOptions = new BitmapFactory.Options();

      scaleOptions.inJustDecodeBounds = false;
      scaleOptions.inSampleSize = sampleSize;

      Bitmap scaledBitmap = BitmapFactory.decodeStream( input, null, scaleOptions );

      input.close();

      return scaledBitmap;
    }
    catch( Exception e )
    {
      e.printStackTrace();
    }

    return null;
  }

  public KnownSizeInputStream toMimeStream()
  {
    Bitmap scaledBitmap = toBitmap();

    ByteArrayOutputStream stream = new ByteArrayOutputStream();

    scaledBitmap.compress( Bitmap.CompressFormat.JPEG, 95, stream );

    byte[] byteArray = stream.toByteArray();

    return new KnownSizeInputStream( new ByteArrayInputStream( byteArray ), byteArray.length, "image/jpg", mImageName );
  }

  public String toString()
  {
    return "UploadableImage, Uri: " + mUri;
  }
} 
```

# qt - QOauth::twitter API 接口

> ID：11435280
> 
> 赞同：1
> 
> 时间：2012-07-11T14:47:20.920
> 
> 标签：qt, oauth, twitter, twitter-oauth

我正在尝试使用 QOAuth 对 twitter 的 API 进行身份验证。

我目前的代码是：

```
oauthInterface->setConsumerKey(CONSUMER_KEY);
oauthInterface->setConsumerSecret(CONSUMER_SECRET_KEY);
oauthInterface->setRequestTimeout(10000);

QOAuth::ParamMap reply = oauthInterface->requestToken("https://api.twitter.com/oauth/request_token", QOAuth::GET, QOAuth::HMAC_SHA1);

if(oauthInterface->error() == QOAuth::NoError)
{
    token = reply.value(QOAuth::tokenParameterName());
    tokenSecret = reply.value(QOAuth::tokenSecretParameterName());

    qDebug() << "temporary token" << token << tokenSecret;
}

reply = oauthInterface->accessToken("https://api.twitter.com/oauth/access_token",QOAuth::GET, token, tokenSecret, QOAuth::HMAC_SHA1);

if(oauthInterface->error() == QOAuth::NoError)
{
    qDebug() << "final token" << reply.value("screen_name") << reply.value(QOAuth::tokenParameterName()) << reply.value(QOAuth::tokenSecretParameterName());
}
else
{
    qDebug() << "ERROR" << oauthInterface->error();
}` 
```

并给我

```
temporary token "cBhxmmdkYgmghyy02kmfc0VSIuykRCNoQRh2h1r3Yg" "oYF8b2lzPSgDTRku8X4BjjnoVw5dAXXZBXc2R9P8Jk" 
ERROR 401 
```

使用 QOAuth::POST 而不是 QOAuth::GET 我有相同的结果

如何使用 QOAuth 获取访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:50:13.557

当我设法解决自己的问题时，我在这里发布了解决方案：

事实是，为了获得对[https://api.twitter.com/oauth/access_token的访问权限，您需要一个密码，用户可以在](https://api.twitter.com/oauth/access_token)[https://api.twitter.com/oauth/authenticate](https://api.twitter.com/oauth/authenticate)获得该密码

[Hewever 如果您在https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)请求临时令牌时设置 oauth_callback=oob，则只能获得此 pin

我最终得到了以下代码：

```
 oauthInterface->setConsumerKey(CONSUMER_KEY);
    oauthInterface->setConsumerSecret(CONSUMER_SECRET_KEY);
    oauthInterface->setRequestTimeout(10000);

    QOAuth::ParamMap args;
        args.insert("oauth_callback", "oob");
    QOAuth::ParamMap reply = oauthInterface->requestToken("https://api.twitter.com/oauth/request_token", QOAuth::POST, QOAuth::HMAC_SHA1, args);

    if(oauthInterface->error() == QOAuth::NoError)
    {
        token = reply.value(QOAuth::tokenParameterName());
        tokenSecret = reply.value(QOAuth::tokenSecretParameterName());

        qDebug() << "temporary token" << token << tokenSecret;
    }

    QString url = "https://api.twitter.com/oauth/authenticate";
    url.append("?");
    url.append(QOAuth::tokenParameterName() + "=" + token);
    QDesktopServices::openUrl(QUrl(url));

    QOAuth::ParamMap args2;
    QString pin = QInputDialog::getText(this, "Pin", "Enter pin");
    args2.insert("oauth_verifier", pin.toAscii()); //pin.toAscii());
    reply = oauthInterface->accessToken("https://api.twitter.com/oauth/access_token", QOAuth::GET, token, tokenSecret, QOAuth::HMAC_SHA1, args2);

    if(oauthInterface->error() == QOAuth::NoError)
    {
        qDebug() << "final token" << reply.value("screen_name") << reply.value(QOAuth::tokenParameterName()) << reply.value(QOAuth::tokenSecretParameterName());
    }
    else
    {
        qDebug() << "ERROR" << oauthInterface->error();
    } 
```

# hook - Gitolite 许多用户都有特定的工作目录并且都在使用一个存储库

> ID：11435281
> 
> 赞同：1
> 
> 时间：2012-07-11T14:47:26.457
> 
> 标签：hook, gitolite

我正在使用[Gitolite](http://sitaramc.github.com/gitolite/master-toc.html)。
这是我的文件夹结构：

```
/var/www/demo.com/user1   
/var/www/demo.com/user2  
/var/www/demo.com/user3 
```

我创建了一个名为`demo.git`.
我创建了三个 gitolite 用户 `user1`，`user2`和`user3`.

现在，我的问题是，当`user1`clone 或 commit 或 push 或 pull 更改时，**它只应该更改`user1`'s working directory**`user2` ，并且与and相同`user3`。
你会如何用 Gitolite 来执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:11:25.780

拉取时`user1`，它总是只会改变他/她自己的工作目录。

但是当`user1`推送时，他/她推送到*一个*gitolite-manage 存储库。
如果您需要为每个用户提供个人分支，您可以查看**[gitolite 个人分支](http://sitaramc.github.com/gitolite/special.html#pers)**，以强制*仅*在特定分支`user1`中推送。

 *> 用户“ `alice`”（如果她在用户列表中）然后可以将任何分支推入`personal/alice/`.
> 这意味着她可以推动`personal/alice/foo`and `personal/alice/bar`，但不能`personal/alice`。
> 
> （背景：在运行时，“ `USER`”组件将被调用用户的名称替换。访问权限由右手边决定，像往常一样）。
> 
> 与在同一服务器上使用任意分支名称相比，这：
> 
> *   通过将所有这些临时分支聚集到“个人/”命名空间中来减少命名空间污染。
> *   通过在其中为每个开发人员提供自己的子层次结构来减少分支名称冲突。
> *   无需考虑访问控制，因为用户只能推送到他自己的子层次结构。*

# c# - 如何创建随机值的枚举？

> ID：11435285
> 
> 赞同：1
> 
> 时间：2012-07-11T14:47:31.577
> 
> 标签：c#, .net, random, ienumerable

我怎样才能得到一个`IEnumerable`随机值？我很失望[Random](http://msdn.microsoft.com/en-us/library/ts6se2ek)类没有实现`IEnumerable<int>`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T14:49:34.980

编写一个将新值的**扩展方法。**`yield return`

```
public static IEnumerable<int> GetRandomValues(this Random instance)
{
    while(true)
    {
        yield return instance.Next();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:50:43.593

例如，您可以很容易地自己实现这一点

```
public IEnumerable<int> RandomInts(int below)
{
    Random r = new Random();
    while (true) yield return r.Next(below);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:26:39.157

`IEnumerable<int>`有一个Random 类的实例的一些问题点是

*   随机生成器有无限多的元素，因此在元素上使用`foreach`构造或循环将永远不会终止。
*   from应该返回的`IEnumerator<int>`实例具有将枚举数重置为集合开头的函数。假设行为正确，这应该返回第一个生成的随机数，因为它是在过去生成的。`getEnumerator``IEnumerable<int>``Reset`

最后一个问题至少可以通过两种方式解决，

*   保留已生成值的列表，这可能不是非常有效的内存，但至少可以确保它在重置后始终返回相同的值。
*   保持起始种子和何时`Reset`调用一个新的生成器可以用前一个种子实例化。应隐藏 Random 的所有其他随机生成方法，以防止 , 被访问。

由于记账方法不是很好，我会选择第二个版本。这是一个相当大的类，如下所示。

```
public class RandomInt : IEnumerable<int>
{
    int seed;

    public RandomInt ()
    {
        seed = new Random ().Next();
    }

    public IEnumerator<int> GetEnumerator ()
    {
        return new InternalEnumerator (seed);
    }

    protected class InternalEnumerator : IEnumerator<int>
    {
        Random randomGen;
        int current;
        int seed;

        protected InternalEnumerator (int seed)
        {
            this.seed = seed;
        }

        #region IEnumerator implementation
        public bool MoveNext ()
        {
            if (randomGen == null)
                randomGen = new Random (seed);
            current = randomGen.Next();
            return true;
        }

        public void Reset ()
        {
            randomGen = null;
        }

        public int Current {
            get {
                if (randomGen == null)
                    throw new InvalidOperationException ("Enumerator in reset state");
                return current;
            }
        }
        #endregion
    }
} 
```

# java - 使用 DTDparser 时出错

> ID：11435286
> 
> 赞同：0
> 
> 时间：2012-07-11T14:47:32.890
> 
> 标签：java, dtd-parsing

我编写了一个代码来使用 DTDParser jar 解析 DTD 文件。代码是

```
public static void main(String[] arg)
{
BufferedReader buff=new BufferedReader(new FileReader("abc.dtd"));
DTDParser dtd=new DTDParser(bff);
DTD dt=dtd.Parse();
System.out.println(dt.elements);
} 
```

我得到的输出是

message=com.wutka.DTDElement@c20e24...etc 对于所有带有 diff @no 更改的元素都与此相同。但我只需要元素名称...还可以帮助我将这些值放入数组中，这样我就可以将其用于进一步验证...谢谢您..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:54:14.960

如果您想要数组中的元素，或者最好是列表中的元素，那么您需要迭代，`dt.elements`例如：

```
List<String> elementNames = new ArrayList<String>();
for (DTDElement element : dt.elements)
{
    elementNames.add(element.getName());
} 
```

我不知道这个库的细节（即 getName() 方法可能不存在），但这是一个一般概念。

# javascript - Javascript SetTimeOut 函数不工作

> ID：11435288
> 
> 赞同：0
> 
> 时间：2012-07-11T14:47:39.470
> 
> 标签：javascript, settimeout

我的系统每 500 毫秒获取一次数据，并且我的屏幕上充满了彼此分开的 html 表格。每个单元格都有唯一的关键属性。无论如何，我都在缓存它们。

我有一个全局 JavaScript 对象（_cellColorTimeouts），其中包含我上面提到的 tableRows 的 cellElements 的 settimeout 函数。缓存单元格后，系统会创建超时函数，用于清除特定单元格的 css（在 3000 毫秒内）。

在下面的代码块中， uiElementKey_X 和 uiElementKey_Y 完全相同，但缓存却不同。将唯一的后缀添加到表 id 中会使它们不同。此过程也适用于行和单元格项目。

_cellColorTimeouts 数据的示例是

```
//array object keys are names of unique cell items.
_cellColorTimeouts = [uiElementKey_X_1, uiElementKey_X_2, uiElementKey_X_3,
                      uiElementKey_Y_1, uiElementKey_X_2, uiElementKey_Y_3];

. 
. //does somethings to change cell colour
.

    //after 3 seconds i need to clear css of this cell without looping the dom so i do it via cached dom.
    if (_cellColorTimeouts.hasOwnProperty(uiElementKey) && _cellColorTimeouts[uiElementKey] != null) {
         clearTimeout(_cellColorTimeouts[uiElementKey]);
         _cellColorTimeouts[uiElementKey] = null;
       }
       _cellColorTimeouts[uiElementKey] = setTimeout(function () {
               clearColourOfCell(cell);
       }, 3000);
}

function clearColourOfCell(cell) {
    cell.style.backgroundColor = cell.rowBGColour;
    cell.style.color = "black";
    _cellColorTimeouts[cell.uiElementKey] == null;
    clearTimeout(_cellColorTimeouts[cell.uiElementKey]);
} 
```

所以问题是 settimeout 函数不适用于第一个表，但第二个完全没问题。我检查了是否有任何 settimeout 函数从全局返回 id，是的。对于第一张桌子不知何故它不起作用。我知道这个问题对我的情况来说太独特了，但有什么想法会受到重视吗？

---- 编辑 ---- 全功能未删减版 -----

```
function setWidgetData(widgetId, rowId, colId, value, colIndex) {
"use strict";

// check colIndex
if (colIndex === undefined || colIndex === null) {
    colIndex = 0;
}

// loop on ui tables
var uiTables = _widgetUIElements[widgetId];
//var timeout;
for (var tableId in uiTables) {
    var uiTable = uiTables[tableId];
    var uiElementKey = tableId + "#" + rowId + "#" + colId + "#" + colIndex;
    var cellCachedObject = uiTable[uiElementKey];

    // check cell
    if (cellCachedObject == undefined) {
        //console.log("cell is undefined : " + "widgetId : " + widgetId + " - " + "rowId : " + rowId + " - " + "colId : " + colId + " - " + "colIndex : " + colIndex);
    }
    else {
        // get cell
        var cell = cellCachedObject["domElement"];
        // set sell value
        var cellValue = value;

        // is value numeric? it means we will make some conversions on value
        if (isNumeric(cellValue)) {
            var canPaint = false;
            // check cell entity
            switch (cellCachedObject["entity"]) {
                // date-time?           
                case "DATETIME":
                    // convert unix date time to readable date time
                    cellValue = new Date(fixDecimalSeparator(cellValue) * 1000);
                    cellValue = fixDateTimeDigits((cellValue.getDate())) + "/" + fixDateTimeDigits((cellValue.getMonth() + 1)) + " " + fixDateTimeDigits(cellValue.getHours()) + ":" + fixDateTimeDigits(cellValue.getMinutes());
                    break;
                // date?           
                case "DATE":
                    // convert unix date time to readable date time
                    cellValue = new Date(fixDecimalSeparator(cellValue) * 1000);
                    cellValue = fixDateTimeDigits((cellValue.getDate())) + "/" + fixDateTimeDigits((cellValue.getMonth() + 1));
                    break;
                // numeric?          
                case "NR":
                    // fix "," character in value
                    cellValue = fixDecimalSeparator(cellValue);
                    //just format the presicion
                    cellValue = number_format(cellValue, cellCachedObject["precision"], '.', ',');
                    canPaint = true;
                    break;
                // other?           
                default:
                    // fix "," character in value
                    cellValue = fixDecimalSeparator(cellValue);
                    // if cell is number, no entity conversion
                    // entity convertion
                    cellValue = entityConverter(cellCachedObject["entity"], cellCachedObject["entityTo"], cellValue);
                    cellValue = new Number(cellValue).toFixed(cellCachedObject["precision"]);

                    // if widget currency is not USD. it means user selected currency from currency list or default user currency
                    if (cellCachedObject["isConvertable"]) {
                        // this scoop is not active with the new xml. if FOREX1 widget entity is RECIPCUR but never should not be
                        if (cellCachedObject["widgetIsFOREX1"]) {
                            cellValue = _currencyConverter.convertTrend(cellValue, cellCachedObject.currencyValueType, cellCachedObject["currencyTo"], cellCachedObject["rowId"], cellValue);
                        }
                        else {
                            cellValue = _currencyConverter.convert(cellValue, cellCachedObject["currency"], null, cellCachedObject["precision"]);
                        }
                    }
                    canPaint = true;
            }

            // if it is not date time
            if (canPaint) {
                // get current value of cell
                var currentValue = cell.getAttribute("currentValue");
                // check current value of cell make them coloured.
                if (currentValue !== undefined) {
                    // new value is bigger than old value
                    var newVal = parseFloat(value);
                    var oldVal = parseFloat(currentValue);
                    var rowBGColour = cellCachedObject["rowBGColor"];
                    cell.rowBGColour = rowBGColour;
                    cell.uiElementKey = uiElementKey;
                    if (newVal > oldVal) {
                        //cell.css({ "background-color": "Green", "color": "White" });
                        cell.style.backgroundColor = "green";
                        cell.style.color = "white";
                    }
                    // new value is smaller than old value
                    if (newVal < oldVal) {
                        //cell.css({ "background-color": "Red", "color": "White" });
                        cell.style.backgroundColor = "red";
                        cell.style.color = "white";
                    }
                    if (_cellColorTimeouts.hasOwnProperty(uiElementKey) && _cellColorTimeouts[uiElementKey] != null) {
                        clearTimeout(_cellColorTimeouts[uiElementKey]);
                        _cellColorTimeouts[uiElementKey] = null;
                    }
                    _cellColorTimeouts[uiElementKey] = setTimeout(function () {
                        return function () {
                            clearColourOfCell(cell);
                        };
                    } (cell), 3000);
                    newVal = oldVal = rowBGColour = null;
                }
                currentValue = null;
            }
            canPaint = null;

            // set new value as a current value
            cell.setAttribute("currentValue", value);
        }

        cell.innerHTML = '';
        cell.innerHTML = cellValue;

        cellValue = null;
    }

    uiTable = uiElementKey = cellCachedObject = null;
}

uiTables = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:07:26.190

您没有发布足够的代码让我确定这是问题所在，但这是一个不错的选择：

```
 _cellColorTimeouts[uiElementKey] = setTimeout(function () {
      return function() {
           clearColourOfCell(cell);
      };
   }(cell), 3000); 
```

通过像这样设置超时处理程序，您可以确保处理程序拥有该“单元”变量的自己的私有**副本**，因此无论在最终调用处理程序之前如何更改“单元”，该副本都将保留正确的值.

# java - 对非阻塞方法进行单元测试（异步测试）

> ID：11435290
> 
> 赞同：5
> 
> 时间：2012-07-11T14:47:42.087
> 
> 标签：java, multithreading, unit-testing

我有一个非常简单的`Check`类，它有一个阻塞`waitForCondition()`方法。这个方法是阻塞的。我想为此方法创建一些单元测试。首先，该方法应在满足条件时返回。其次，方法应该在被中断时返回。

在内部，`Check`该类有一个`ArrayBlockingQueue`并调用它的`take()`方法，所以我的测试实际上是关于正确编码条件的逻辑（应该如此）。在应用程序中，`Check`类的数据由另一个线程通过`InputData`方法提供。该`InputData`方法对传入数据执行逻辑，并在满足条件时在 ArrayBlockingQueue 中放置一个虚拟对象。这应该会导致`waitForCondition()`返回。

所以我的第一个想法是我可以`InputData`通过模拟测试并检查在满足条件时是否将虚拟对象添加到队列中。这将需要更改类的设计，因为队列是私有数据成员（除非可以模拟私有数据）。当满足条件时，它不会直接添加到队列中，而是`InputData`必须调用可以模拟的东西。

但是，如果方法正常运行，则存在检查`waitForCondition()`方法本身的问题。`InputData`这真的很简单的代码：

```
try {
        myArrayBlockingQueue.take();
        return true;
    } catch (InterruptedException ex) {
        return false;
    } 
```

所以我想知道它是否值得想象中的麻烦：一个使用 a 创建另一个线程的测试`Check`，调用它`waitForCondition()`，然后在完成后返回一些东西。也许，使用 Executor 服务。模糊部分是如何同步`assertTrue(...)`. 我发现[这篇关于异步测试](http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.15+Testing+Asynchronous+Methods/)的文章看起来可以解决问题。

问题总结：

1.  我是否应该更改设计以测试其中的逻辑`InputData()`，如果是，如何？
2.  我应该忽略`waitForCondition()`只要`InputData()`被测试的测试吗？
3.  还是只做需要做的事情（有点复杂的单元测试）并`waitForCondition()`直接测试更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:15:40.370

如果您在 Check 类的构造函数中注入 ArrayBlockingQueue 的实例，那么您的测试可以在测试中间注入适当的值。

然后你可以在超时的情况下运行单元测试，如果它在 100 毫秒左右没有返回则失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:06:56.610

谢谢你的好链接！我遇到了一些类似的问题，也许这个链接比我做的更好。（我也很想看看这个问题的其他答案 - 这是一个好问题）

如果您不介意更改（至少*暂时*）您的实际代码（是的，这不是通常的单元测试实践！）您可以做一些我称之为[“错误注入”](http://flyingspaniel.blogspot.com/2011/12/testing-error-handling-in-complex-code.html)的事情。

在我的实现中，您创建了一个从属性（或地图）读取的类，以在特定的独特点“做一些有趣的事情”。例如，您的财产可能会说

```
myClass.myMethod.blockingQueueTake = interrupt:
myClass.myLongCalculation = throw: java.lang.ArithmeticException(Failed to converge) 
```

在您的代码中，您添加测试行，例如在您的之前`queue.take()`添加

```
TestSimulator.doCommand("myClass.myMethod.blockingQueueTake"); 
```

优点是一切都在真实的代码中发生，而不是一些 Mock，它会变得非常毛茸茸。（在我的情况下，SW 较旧，不是为单元测试编写/设计的，因此制作 Mock 非常困难）缺点是您可能想在之后删除或注释掉代码。所以它真的不是一个持续集成类型的单元测试，它更像是一次非常严肃的现实调试。所以，我承认，它远非理想，但是，它确实为我找到了一堆错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T03:02:55.103

您还可以使用“测试运行器”类在循环中运行断言。该循环将在 try/catch 中运行断言。异常处理程序将简单地尝试再次运行断言，直到超时到期。我最近写了一篇关于这种技术的博客文章。该示例是用 groovy 编写的，但这个概念应该很容易适应 Java。

[http://www.greenmoonsoftware.com/2013/08/asynchronous-functional-testing/](http://www.greenmoonsoftware.com/2013/08/asynchronous-functional-testing/)

# javascript - 如何让我的脚本从 30 中生成 12 个随机 div - Jquery

> ID：11435291
> 
> 赞同：2
> 
> 时间：2012-07-11T14:47:42.090
> 
> 标签：javascript, jquery, jquery-ui

目前所有单词都出现了，但我希望脚本随机生成 30 个单词中的 12 个

```
var randomdivs = $("wordstyle").get().sort(function(){
    return Math.round(Math.random())-0.5;
}).slice(0,12)
$(randomdivs).show(); 
```

这是我希望脚本从中随机选择 12 个单词的 30 个单词的列表，然后我会将它们显示在一个网格中以进行文字游戏

```
<body>
<div class="wordcontainer">
<div id="randomdiv1" value="mat">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">t</div>
</div>
<div id="randomdiv2" value="man">
    <div id="1" class="wordcontainer ui-widget-content wordstyle ">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv3" value="mum">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">u</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">m</div>
</div>
<div id="randomdiv4" value="mug">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">u</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">g</div>
</div>
<div id="randomdiv5" value="cup">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">c</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">u</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv6" value="sin">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">s</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv7" value="sun">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">s</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">u</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv8" value="pen">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">p</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">e</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv9" value="can">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">c</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv10" value="pot">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">p</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">o</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">t</div>
</div>
<div id="randomdiv11" value="cat">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">c</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">t</div>
</div>
<div id="randomdiv12" value="gas">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">g</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">s</div>
</div>
<div id="randomdiv13" value="nip">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">n</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv14" value="pin">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">p</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv15" value="pit">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">p</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">t</div>
</div>
<div id="randomdiv16" value="tip">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">t</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv17" value="tin">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">t</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv18" value="dad">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">d</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">d</div>
</div>
<div id="randomdiv19" value="sad">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">s</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">d</div>
</div>
<div id="randomdiv20" value="dim">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">d</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">m</div>
</div>
<div id="randomdiv21" value="dip">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">d</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv22" value="bin">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">b</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv23" value="did">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">d</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">d</div>
</div>
<div id="randomdiv24" value="mam">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">m</div>
</div>
<div id="randomdiv25" value="map">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">m</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv26" value="tan">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">t</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">n</div>
</div>
<div id="randomdiv27" value="nap">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">n</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv28" value="sip">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">s</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv29" value="pip">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">p</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">i</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">p</div>
</div>
<div id="randomdiv30" value="sat">
    <div id="1" class="wordcontainer ui-widget-content wordstyle">s</div>
    <div id="2" class="wordcontainer ui-widget-content wordstyle">a</div>
    <div id="3" class="wordcontainer ui-widget-content wordstyle">t</div>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:56:18.990

我认为您缺少“。” 在您的 wordstyle 类选择器前面。$("wordstyle") 应该是 $(".wordstyle")，对吧？

通过该更改，它似乎可以工作（假设样式正确，例如 display: none/block）。这是我的 jsFiddle 玩它：http: [//jsfiddle.net/quant/dhXbG/](http://jsfiddle.net/quant/dhXbG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:56:56.690

```
var randomdivs = $(".wordstyle").get().sort(function(){  // $("wordstyle") should 
                                                         // be $(".wordstyle")
    return Math.round(Math.random())-0.5;
}).slice(0,12);
$(".wordstyle").hide(); // first hide all
$(randomdivs).show()    // then show selected 
```

**[演示](http://jsfiddle.net/QStkd/598/)**

或者

```
var randomdivs = $(".wordstyle").hide().get().sort(function(){
    return Math.round(Math.random())-0.5;
}).slice(0,12);
$(randomdivs).show(); 
```

**[演示](http://jsfiddle.net/QStkd/599/)**

# java - 增加与 mySQL DB 的 Java 连接的客户端数据包大小

> ID：11435292
> 
> 赞同：2
> 
> 时间：2012-07-11T14:47:50.187
> 
> 标签：java, mysql, client, size, packet

我正在尝试通过 Java 程序连接到外部 mySQL DB。当我尝试连接时，我得到以下异常：

```
Exception in thread "main" com.mysql.jdbc.PacketTooBigException: Packet for query is too large (4739923 > 1048576). You can change this value on the server by setting the max_allowed_packet' variable.
at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:605)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1078)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at Main.main(Main.java:48) 
```

这仅适用于此外部服务器。我能够连接到我设置的本地服务器，根本没有这个问题。

我对此进行了一些研究，它谈到了通过 /etc/my.cnf 文件增加我的客户端 max_allowed_pa​​cket 大小。我试图做到这一点没有任何成功。因为我什至找不到 .cnf 文件，所以有人可以指导我。这甚至是基于 Java 的连接的正确方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:22:39.567

在服务器上，您必须更改您的 mysql 配置文件。您将需要根据您的操作系统找到它。见[https://dev.mysql.com/doc/refman/5.6/en/option-files.html](https://dev.mysql.com/doc/refman/5.6/en/option-files.html)

您不需要在客户端做任何事情来设置它。只需发送大量数据。

# objective-c - Apples ZoomingPDFViewer 示例 - 对象创建

> ID：11435294
> 
> 赞同：0
> 
> 时间：2012-07-11T14:47:54.047
> 
> 标签：objective-c, ios

我目前正在开发一个应该显示并允许用户缩放 PDF 页面的应用程序。因此，我正在查看 Apple 示例 ZoomingPDFViewer。基本上我理解示例代码。但是有几行对我来说并不明显。

示例代码链接：http: [//developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html)

在 PDFView.m 中：

```
//Set the layer's class to be CATiledLayer.
+ (Class)layerClass {
    return [CATiledLayer class];
} 
```

上面的代码有什么作用？

第二个我在 PDFView.m 中看不懂的代码片段：

```
self = [super initWithFrame:frame];
    if (self) {        
        CATiledLayer *tiledLayer = (CATiledLayer *)[self layer];
        ... 
```

我知道它创建了一个 CATiledLayer 对象。但是我不清楚它是如何创建的。

我希望有人能给我一个简短的回答，因为我不想使用我不理解的代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:53:20.370

TiledPDFView.h 类是 UIView 的子类，因此您可以查看 UIView 对该方法的文档。根据[我看到的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)，它看起来像：

> layerClass - 仅当您希望视图使用不同的核心动画层作为其后备存储时才实施此方法。例如，如果您使用 OpenGL ES 进行绘图，您可能希望覆盖此方法并返回 CAEAGLLayer 类。

所以它似乎要求核心动画系统使用平铺层。更多文档来自`CATiledLayer`：

> CATiledLayer 是 CALayer 的子类，提供了一种异步提供图层内容切片的方法，可能缓存在多个细节级别。由于渲染器需要更多数据，因此在一个或多个后台线程上调用图层的 drawLayer:inContext: 方法以提供绘图操作以填充一个数据块。绘图上下文的剪辑边界和 CTM 可用于确定所请求的图块的边界和分辨率。使用 setNeedsDisplayInRect: 方法可以使图层的区域无效，但是更新将是异步的。虽然下一次显示更新很可能不包含更新的内容，但未来的更新会。

# django-models - Django - 在动态模型上指定列顺序

> ID：11435296
> 
> 赞同：1
> 
> 时间：2012-07-11T14:47:55.397
> 
> 标签：django-models

假设我们创建一个这样的模型：

```
def model_factory(*args, **kwargs):
    attrs = {}
    attrs['Meta'] = type('Meta', (object,), {
        'verbose_name': 'My Dynamic model',
        'db_table': 'dynamic_model_table'
    })    

    # Ex. add an arbitrary fields
    attrs['username'] = models.CharField(
        max_length = 128,
        db_column = 'username'
    )
    attrs['email'] = models.CharField(
        max_length = 128,
        db_column = 'email'
    )

    return type('DynamicModel', (models.Model,), attrs) 
```

如何指定数据库中的列顺序？即 CREATE 语句必须是

```
CREATE TABLE "dynamic_model_table" (
    "username" varchar(128) NOT NULL,
    "email" varchar(128) NOT NULL
) 
```

但是，使用代码示例，列顺序将是随机的。

# mysql - 如果帐户 ID 不存在，则删除

> ID：11435304
> 
> 赞同：0
> 
> 时间：2012-07-11T14:48:10.987
> 
> 标签：mysql, database

基本上我有一个帐户 ID 列表，这些帐户 ID 链接到存储在 mysql 中的游戏中的角色，我想做的是进行查询，如果帐户 ID 不在此列表中，则将其删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:56:58.673

如果要删除不再有用户的字符，可以使用：

```
DELETE characters 
FROM characters 
LEFT JOIN users USING (user_id) 
WHERE users.user_id IS NULL 
```

# biztalk - 从 BizTalk 2006 r2 迁移到 BizTalk 2010 后出现 Web 参考问题

> ID：11435305
> 
> 赞同：1
> 
> 时间：2012-07-11T14:48:12.717
> 
> 标签：biztalk, biztalk-2010

我正在从 BizTalk 2006 r2 迁移到 BizTalk 2010。到目前为止，升级解决方案是成功的，但是当我尝试构建包含 Web 引用的项目时，它失败并出现错误 -**自定义工具错误：System.Exception：无法生成BizTalk 文件。无法导入 Web 服务/架构。初始化失败。...**

当我尝试更新网络参考时，我收到消息**"The custom tool ''BtsDiscoCodeGenerator failed"**。

有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:09:52.803

您收到此错误的原因...

1.  命名空间中可能存在不匹配。
2.  Web 服务的 WSDL 可能有多个名称空间。并且 biztalk 不接受具有多个命名空间的 WSDL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T13:13:37.507

您可以重命名 Web 参考吗？尝试重命名它然后更新，然后，如果需要，您可以重命名回原始名称。我知道它有点连线，但这个技巧对我有用。

# visual-studio - 使用 PowerShell 将现有项目添加到解决方案文件夹

> ID：11435309
> 
> 赞同：9
> 
> 时间：2012-07-11T14:48:23.360
> 
> 标签：visual-studio, powershell, envdte

我正在使用 PowerShell 脚本来动态创建 Visual Studio 项目及其文件夹和资产并将其添加到解决方案中。我正在使用 Visual Studio DTE。

我在文件系统上的目录结构如下：

```
C:\Dir1\Dir2\Stuff
|
+--Stuff                  <-- folder
|  |
|  `Stuff.csproj          <-- existing project, included in sln
|
+--Subfolder              <-- Subfolder in which I want to include my new csproj
|  +--Project1            <-- folder
|  |  |
|  |  `Project1.csproj    <-- existing project, included in sln
|  |
|  +--Project2            <-- folder
|  |  |
|  |  `Project2.csproj    <-- existing project, included in sln
|  |
|  `--Project3            <-- this, subs below and csproj are created from my script
|     |
|     `Project3.csproj
|
 `Stuff.sln 
```

我的脚本正确创建了 Subfolder\Project3\Project3.csproj，我可以使用 DTE 将其添加到解决方案中而不会出现任何问题。

但是，我想在**解决方案文件夹 'Subfolder'**中添加 Project3 ，所以它看起来像这样（虚拟图像，红色箭头显示我想要 Project3 的位置）：

![图片](../Images/26a667560d775fad9b45d5af03fb2b0b.png)

如何使用 Powershell（以及可选的 EnvDTE）完成此任务？任何示例代码将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T19:30:14.093

SolutionFolder 接口有一个“从文件添加”方法：

[http://msdn.microsoft.com/en-us/library/envdte80.solutionfolder.addfromfile](http://msdn.microsoft.com/en-us/library/envdte80.solutionfolder.addfromfile)

```
Project AddFromFile(
    string FileName
) 
```

因此，您只需要获取解决方案文件夹的句柄即可。我不知道您是通过 DTE 添加解决方案文件夹还是它已经存在。

如果您使用 Solution2.AddSolutionFolder 添加它

[http://msdn.microsoft.com/en-us/library/envdte80.solution2.addsolutionfolder%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/envdte80.solution2.addsolutionfolder%28v=vs.110%29.aspx)

```
Project AddSolutionFolder(
    string Name
) 
```

它返回对解决方案文件夹的引用，您只需调用上述方法即可。如果它已经存在，我认为您将不得不使用 Solution2.FindProjectItem。

[http://msdn.microsoft.com/en-us/library/2zszfd26%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/2zszfd26%28v=vs.110%29.aspx)

像下面这样的东西应该可以工作。我目前没有办法尝试，因此可能需要进行调整。

```
Solution solution = System.Activator.CreateInstance(Type.GetTypeFromProgID("VisualStudio.Solution")) as EnvDTE.Solution;
Solution2 sol2 = solution as Solution2;
sol2.Create(solutionPath, solutionName);

Project folder = sol2.AddSolutionFolder("Subfolder");

folder.AddFromFile(pathToProject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:24:46.963

首先使用所需的相对路径创建一个“解决方案文件夹”。请注意，Visual Studio 2012 不会创建具有相同相对路径的系统文件夹。

现在在“解决方案文件夹”中添加一个新项目，但在定义它时必须小心，系统中的相对路径与新“解决方案文件夹”的相对路径匹配。如果您想要的文件夹不存在，VS 2012 现在将为新项目创建它。

如果要添加具有匹配相对路径的现有文件，则必须首先从 VS 外部在匹配的系统相对路径中创建文件。然后您可以在 Visual Studio 中“添加现有文件”。

# java - android.os.Bundle 无法在 libgdx Android 项目中解析

> ID：11435315
> 
> 赞同：33
> 
> 时间：2012-07-11T14:48:43.490
> 
> 标签：java, android, eclipse, libgdx

我刚刚开始使用[Libgdx](http://libgdx.badlogicgames.com/)来练习制作游戏，并使用网站上提供的项目创建 .jar 来创建初始项目。然而，Android 项目中出现了一个错误，上面写着：

> android.os.Bundle 无法解析。

我正在为 Java IDE 使用 Eclipse。如果我将光标放在`AndroidApplication`红色下划线的地方，则表明我配置了构建路径。我相信我已经安装了 Android SDK，因为它在一个简单的示例项目的不同工作区上工作了一段时间。有谁知道我在这个新工作区可能做错了什么？如何配置`AndroidApplication`类的构建路径？

顺便说一句，我相信我使用的是 Java 1.6，因为这就是 JAVA_HOME 所指的，尽管我也安装了 Java 1.7。虽然这可能不相关......

```
package com.example.drop;

import android.os.Bundle;
import com.badlogic.gdx.backends.android.AndroidApplication;
import com.badlogic.gdx.backends.android.AndroidApplicationConfiguration;

public class MainActivity extends AndroidApplication {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.useGL20 = false;
        cfg.useAccelerometer = false;
        cfg.useCompass = false;

        initialize(new Drop(), cfg);
    }
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-12T05:23:57.480

您看到的错误与 Android SDK 配置有关，并非特定于 libGDX。编译器不知道要针对哪些 Android 库进行编译。

使用 LibGDX 教程正确设置您的项目。（请参阅 [https://github.com/libgdx/libgdx/wiki/Manual-project-setup#android-project-setup](https://github.com/libgdx/libgdx/wiki/Manual-project-setup#android-project-setup)。其中的第一步是针对 Android 的设置。）

如果您不想创建新项目但要修复现有项目，则应按照以下步骤配置项目以针对 Android 构建：

1.  右键单击 Eclipse Package Explorer 中的项目
2.  选择`Properties`并选择`Android`部分
3.  确保选择了“项目构建目标”之一。

作为副作用，这应该将所需的 Android 库添加到构建路径中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-05T02:42:17.230

请同时检查是否在 Eclipse 上安装了 ADT。

# ios - IOS 5静态tableview单元格没有背景颜色

> ID：11435316
> 
> 赞同：1
> 
> 时间：2012-07-11T14:48:44.183
> 
> 标签：ios, uitableview

我正在尝试使表格单元格完全透明。我在 iOS 5 中使用静态表格单元格并尝试更改以清除颜色，但确实如此

我什至尝试过（在 viewDidLoad 中）

```
self.tableView.backgroundColor = [UIColor clearColor]; 
```

但是整个表格是黑色的，单元格是白色的。（见照片）![在此处输入图像描述](../Images/29e358b8d84830c3800b71879bed65bf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:34:53.070

试试这个

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell           
forRowAtIndexPath:(NSIndexPath *)indexPath {
cell.backgroundColor = [UIColor clearColor];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:59:17.000

`self.tableView.backgroundColor = [UIColor clearColor]`- 将改变表格视图的背景颜色而不是单元格。

尝试在 Interface Builder 中选择单个单元格并使用检查器将单元格背景更改为颜色或不更改透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:02:03.150

尝试`[cell setOpaque:FALSE]`在 cellForRowAtIndexPath 中使用 [cell setBackgroundColor:[UIColor clearColor]]：

# php - 以非管理员身份安装 XAMPP

> ID：11435317
> 
> 赞同：2
> 
> 时间：2012-07-11T14:48:46.993
> 
> 标签：php, linux, xampp

我需要以普通用户身份安装 xampp 并使用非默认端口运行 PHP 服务器。

我已将 ~/lampp/etc/httpd.conf 中的“Listen 80”更改为另一个端口。

但是当我使用 ~/lampp/lampp start 启动它时，它会抱怨

> 您需要以 root 身份启动 XAMPP！

有没有办法在没有root登录的情况下运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:19:20.870

您需要以 root 身份安装 xampp，但您可以以普通用户身份运行。

这是相同的分步指南。

[http://forums.bizhat.com/linux-freebsd-opensource/41058-how-install-xampp-ubuntu-linux-running-normal-user.html](http://forums.bizhat.com/linux-freebsd-opensource/41058-how-install-xampp-ubuntu-linux-running-normal-user.html)

# oop - 使用策略模式重构代码

> ID：11435320
> 
> 赞同：0
> 
> 时间：2012-07-11T14:48:54.977
> 
> 标签：oop, design-patterns, domain-driven-design, cqrs

我有一个 GiftCouponPayment 课程。它有一个可以经常改变的商业策略逻辑——GetCouponValue()。目前的逻辑是“当Coupon Number小于2000时，coupon value应该被认为是0”。在未来的商业策略中，它可能会更改为“当优惠券发行日期小于 1/1/2000 时，优惠券价值应视为零”。它可以根据公司的管理部门更改为任何此类策略。

我们如何使用策略模式重构 GiftCouponPayment 类，以便在 GetCouponValue 方法的策略时不需要更改该类？

**更新**：分析职责后，我觉得“GiftCoupon”将是“GiftCouponPayment”类的更好名称。

![在此处输入图像描述](../Images/8a774eb69b96d26c64a12d3978a81852.png)

C# 代码

```
 public int GetCouponValue()
    {
        int effectiveValue = -1;
        if (CouponNumber < 2000)
        {
            effectiveValue = 0;
        }
        else
        {
            effectiveValue = CouponValue;
        }

        return effectiveValue;
    } 
```

阅读

1.  [策略模式 - 多种返回类型/值](https://stackoverflow.com/questions/1734791/strategy-pattern-multiple-return-types-values/1735106#1735106)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:02:37.147

GiftCouponPayment 类应该将 GiftCoupon 传递给不同的策略类。所以你的策略接口（*CouponValueStrategy*）应该包含一个方法：

`int getCouponValue(GiftCoupon giftCoupon)`

由于每个实现*CouponValueStrategy*的具体策略都可以访问 GiftCoupon，因此每个都可以实现基于 Coupon number 或 Coupon date 等的算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:07:58.350

您可以将“优惠券价值策略”注入优惠券对象本身并调用它来计算优惠券价值。在这种情况下，可以传入`this`保单，以便保单可以向优惠券询问其所需的属性（例如优惠券编号）：

```
public interface ICouponValuePolicy
{
  int ComputeCouponValue(GiftCouponPayment couponPayment);
}

public class GiftCouponPayment
{
  public ICouponValuePolicy CouponValuePolicy {
    get;
    set;
  }

  public int GetCouponValue()
  {
    return CouponValuePolicy.ComputeCouponValue(this);
  }
} 
```

此外，您似乎`GiftCouponPayment`真正负责两件事（付款和礼券）。提取一个`GiftCoupon`包含`CouponNumber`和的类`CouponValue`并`GetCouponValue()`从`GiftCouponPayment`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:07:28.290

当您的业务逻辑发生变化时，您的代码也必须随之更改，这很自然。

您也许可以选择将过期检测逻辑移动到规范类中：

```
 public class CouponIsExpiredBasedOnNumber : ICouponIsExpiredSpecification
    {

        public bool IsExpired( Coupon c )
        {
             if( c.CouponNumber < 2000 )
                 return true;
             else
                  return false;
        }
    }

    public class CouponIsExpiredBasedOnDate : ICouponIsExpiredSpecification
    {
       public readonly DateTime expirationDate = new DateTime (2000, 1, 1);

       public bool IsExpired( Coupon c )
        {
             if( c.Date < expirationDate )
                 return true;
             else
                  return false;
        }
    }

public class Coupon
{
     public int GetCouponValue()
     {
        ICouponIsExpiredSpecification expirationRule = GetExpirationRule();

        if( expirationRule.IsExpired(this) ) 
           return 0;
        else
           return this.Value;

     }
} 
```

你应该问自己的问题：现在有必要让它变得如此复杂吗？你不能让它尽可能简单以满足当前的需求，然后在过期规则确实发生变化时重构它吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T15:34:34.110

您希望动态的行为是优惠券计算 - 它可以取决于任何数量的东西：优惠券日期，优惠券号码等。我认为提供者模式更合适，注入一个计算优惠券的服务类价值。

其本质是将业务逻辑移到 GiftCouponPayment 类之外，并使用我将称为“CouponCalculator”的类来封装业务逻辑。这个类使用一个接口。

```
interface ICouponCalculator
{
    int Calculate (GiftCouponPayment payment);
}

public class CouponCalculator : ICouponCalculator
{
   public int Calculate (GiftCouponPayment payment)
   {
      if (payment.CouponNumber < 2000)
      {
         return 0;
      }
      else
      {
         return payment.CouponValue;
      }
   }
} 
```

现在你有了这个接口和类，给 GiftCouponPayment 类添加一个属性，然后修改你原来的 GetCouponValue() 方法：

```
public class GiftCouponPayment
{
   public int CouponNumber;
   public int CouponValue;

   public ICouponCalculator Calculator { get; set; }

   public int GetCouponValue()
   {
      return Calculator.Calculate(this);
   }
} 
```

当您构造 GiftCouponPayment 类时，您将分配 Calculator 属性：

```
var payment = new GiftCouponPayment() { Calculator = new CouponCalculator(); }
var val = payment.GetCouponValue(); // uses CouponCalculator class to get value 
```

如果这似乎只是将计算逻辑移到 GiftCouponPayment 类之外的大量工作，那么，就是这样！但如果这是您的要求，它确实提供了几件事：

1\. 您不需要更改 GiftCouponPayment 类来调整计算逻辑。

2\. 您可以创建额外的实现 ICalculator 的类，以及一个工厂模式来决定在构造 GiftCouponPayment 时将哪个类注入。这更能说明您最初对“策略”模式的渴望——因为如果逻辑变得非常复杂，这将很有用。

# javascript - Flexslider 添加幻灯片（Ajax 内容）

> ID：11435321
> 
> 赞同：5
> 
> 时间：2012-07-11T14:48:56.137
> 
> 标签：javascript, jquery, ajax, slider, flexslider

我正在写一个页面，其中有 4 张幻灯片，其中包含大量图像内容。为了提高加载速度，我们只想加载第一张幻灯片。然后在加载后，我们将通过 ajax 调用获得其余部分并将它们添加为幻灯片。

Flexslider V2 对此有一个 .addSlide 函数，但是我不断收到`slider.addSlide is not a function`错误消息。

任何帮助将非常感激。谢谢

[**弹性滑块**](https://github.com/woothemes/FlexSlider/)

这是我的代码。

```
<!DOCTYPE html>
<html lang="en">
<head>

<link rel="stylesheet" href="_slider/flexslider.css" type="text/css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script src="_slider/jquery.flexslider-v2-min.js"></script>

<script type="text/javascript">
$(window).load(function() {
     $('.flexslider').flexslider({

        animation: "slide", 
        slideshow: false, 
        controlNav: false, 
        controlsContainer: ".flex_wrap", 
        start: function(slider){

            //Load another slide and append it to the html
            $.get('landing_page_step1.html', function(data) {
              $('.slides').append(data);
            });

            //Tell flexslider to add this as a slide
            slider.addSlide(".step1", 1);     
        }

      });
 });    
</script>

</head>

<body class="landing_page">

<div class="flex_wrap">
  <div class="flexslider grid_12">
    <ul class="slides">
      <li>
              Slide One
      </li>
    </ul>
 </div>
</div>

</body>
</html> 
```

**[更新]**

看来，如果您只有一张幻灯片，那么 flexsider 不接受这些额外的功能。从两张幻灯片开始，这个想法很有效。这很可能是 flexslider 的错误或预期功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T06:11:05.160

我最近遇到了同样的问题，最后我查看了源代码，发现开发人员检查了幻灯片的数量是否等于 1（[第 882 行](https://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js#L882)）。

我刚刚结束了整个 if 语句的注释，当我只有一张幻灯片时它就开始工作了。

# php - 从一个表中解析内容，然后将解析结果插入到另一个表中

> ID：11435322
> 
> 赞同：0
> 
> 时间：2012-07-11T14:49:14.857
> 
> 标签：php, mysql

我有 2 张桌子：

```
Table document
============================================================================
| id_document | document_address |              document_content           |
============================================================================
|      1      |        C         |Example sentences A. Example sentences B.|
|      2      |        D         |Example sentences C. Example sentences D.|
============================================================================ 
```

我想基于点分隔 document_content 并将它们插入到带有 doc_id 的句子表中，因此句子表将包含：

```
Table sentence :
 ======================================================================
 |  id_row  |  id_document |   id_sentence   |       sentence         | 
 ======================================================================
 |     1    |       1      |       0         | Example sentences A    |
 |     2    |       1      |       1         | Example sentences B    |
 |     3    |       2      |       0         | Example sentences C    |
 |     4    |       2      |       1         | Example sentences D    |
 ====================================================================== 
```

这是代码：

```
<?php

require_once 'conf.php';

$doc_id = array();
// get the doc_id
$result = mysql_query("SELECT id_document FROM document");
while($row = mysql_fetch_array($result)) {
   $doc_id[] = $row['id_document'];
}

//get the content
$sql = mysql_query('SELECT document_content FROM document WHERE id_document IN (' . implode(",", $doc_id) . ')') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
   $sentence[] = $row['document_content'];
}

$i = 0;
foreach ($sentence as $sentences){
  // Separate based on dot
  $saveSentence = preg_split('/\\.\\s*/', $sentences);
   $q = mysql_query("INSERT INTO sentence VALUES('','$doc_id','$i','$saveSentence','') ");
$i++;
}

?> 
```

但无法读取 doc_id 并且无法将内容数组插入到表中。请帮帮我。非常感谢您 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:53:47.597

你没有获取 doc_id
替换

```
$sql = mysql_query('SELECT document_content FROM document WHERE id_document IN (' . implode(",", $doc_id) . ')') or die(mysql_error());
while ($row = mysql_fetch_array($sql)) {
   $sentence[] = $row['document_content'];
}

$i = 0;
foreach ($sentence as $sentences){
// Separate based on dot
  $saveSentence = preg_split('/\\.\\s*/', $sentences);
   $q = mysql_query("INSERT INTO sentence VALUES('','$doc_id','$i','$saveSentence','') ");
$i++;
} 
```

和

```
$sql = mysql_query('SELECT id_document, document_content FROM document WHERE id_document IN (' . implode(",", $doc_id) . ')') or die(mysql_error());
while ($row = mysql_fetch_array($sql))
{
   $sentence[$row['id_document']] = $row['document_content'];
}

foreach ($sentence as $doc_id => $sentences)
{
  $i = 0;
  foreach(preg_split('/\\.\\s*/', $sentences) as $current_sentence)
  {
    $q = mysql_query("INSERT INTO sentence SET id_document = {$doc_id}, id_sentence = {$i}, sentence = '{$current_sentence}'");
    $i++;
  }
} 
```

# android - 为什么 Android 许可检查会失败并且在重新安装应用程序后会起作用？

> ID：11435327
> 
> 赞同：0
> 
> 时间：2012-07-11T14:49:30.923
> 
> 标签：android

我希望得到一些反馈，以了解我的应用程序在许可检查中可能出现的问题。

最近，我收到用户抱怨我的应用程序未通过许可检查。他们重新启动了手机并重新请求了许可检查，但仍然会失败。不幸的是，我不知道返回的许可检查中的错误代码是什么...... :(

用户能够成功获得许可检查的唯一方法是重新安装应用程序。

任何见解为什么会发生这种情况，特别是突然间......我觉得自从新的 Google Play 出现以来，这个问题就开始发生了。

# c# - 如何在 Excel 中仅读取值在特定范围内的单元格 - 使用 VSTO C#

> ID：11435328
> 
> 赞同：0
> 
> 时间：2012-07-11T14:49:32.853
> 
> 标签：c#, visual-studio-2010, range, excel-addins

我在 VisualStudio 2010 中为 Excel 2007 做一个 ExcelAddin。在我的 Excel 工作簿中，我有一个名为 MyRange 的命名范围。它从单元格 C10 到 M25。如何在 MyRange 中仅读取具有价值的单元格。注意我不想从其他单元格中读取任何内容，只在 MyRange 中？我想将其中具有值的单元格读入 Word 文档。我想我已经弄清楚了。

我曾尝试使用 UsedRange，但它选择了 A1-M25 中的所有内容（我只想选择具有 C10-M25 值的单元格）。这是我到目前为止得到的。

```
string FileName = @"C:\MyFile.xlsx";
Excel.Application xlApp = xlApp = new Excel.Application();
Excel.Workbook xlWorkBook = null;
Excel.Worksheet xlWorkSheet = null;

xlWorkBook = xlApp.Workbooks.Open(FileName);
xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

object cell1 = "C10", cell2 ="M25";
//Here are some different versions that I tried. I also tried to use the SpecialCell    //method but it didn´t seem to work.
Excel.Range namedRange = (Excel.Range)xlWorkSheet.get_Range("C10", "M25");
Excel.Range last = (Excel.Range)xlWorkSheet.UsedRange;
Excel.Range usedRange = (Excel.Range)xlWorkSheet.get_Range("C10", last); 
```

非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:47:10.863

要从“namedRange”中读取每个单元格值，您可以像这样遍历范围：

```
foreach (Excel.Range cell in namedRange.Cells)
            {
                if (String.IsNullOrEmpty(cell.Value.ToString()))
                {
                    string thisCellHasContent = cell.Value.ToString();
                    string thisCellAddress = cell.Address.ToString();
                }
            } 
```

# python - Python 请求和 Unicode

> ID：11435331
> 
> 赞同：27
> 
> 时间：2012-07-11T14:49:50.957
> 
> 标签：python, unicode, python-requests

我正在使用 requests 库来查询 Diffbot API 以从网页 url 获取文章的内容。当我访问我在浏览器中创建的请求 URL 时，它会返回一个 JSON 对象，其中包含 Unicode 中的文本（对吗？）例如（我稍微缩短了文本）：

> {"icon":"http://mexico.cnn.com/images/ico_mobile.jpg","text":"CIUDAD DE MÉXICO (CNNMéxico) \u2014 Kassandra Guazo Cano tiene 32 años, pero este domingo participó por primea vez en una elección.\n\"No había sacado mi (credencial del) IFE (Instituto Federal Electoral) porque al hacer el trámite hay Mucha mofa cuando ven que tu nombre no contrast con tu y otros documentos de acuerdo con su nueva identidad。\ nSánchez dice que los solicitantes no son discriminados, pero la experiencia de Kassanda es diferente: \"hay que pagar un licenciado, dos peritos (entre ellos un endocrinólogo). Además, el juez dicta sentencia para el cambio de nombre y si no es 有利tienes que esperar otros cuatro años para volver a demandar al registro Civil\".\nAnte estaituación,el Consejo para Prevenir y Eliminar la sculina, los transgénero votan - México: Voto 2012 - Nacional","url":"http://mexico.cnn.com/nacional/2012/07/02/con-apariencia-de- mujer-e-identidad-masculina-los-transexuales-votan","xpath":"/HTML[1]/BODY[1]/SECTION[5]/DIV[1]/ARTICLE[1]/DIV[1] /DIV[6]"}

当我使用python请求库如下：

```
def get_article(self, params={}):
  api_endpoint = 'http://www.diffbot.com/api/article'
  params.update({
    'token': self.dev_token,
    'format': self.output_format,
  })
  req = requests.get(api_endpoint, params=params)
  return json.loads(req.content) 
```

它返回这个（再次注意我稍微缩短了文本）：

> {u'url': u'http://mexico.cnn.com/nacional/2012/07/02/con-apariencia-de-mujer-e-identidad-masculina-los-transexuales-votan', u'text ': u'CIUDAD DE M\xc9XICO (CNNM\xe9xico) \u2014 Kassandra Guazo Cano tiene 32 a\xf1os, pero este domingo particip\xf3 por primea vez en una elecci\xf3n.\n"No hab\xeda sacado mi ( credencial del) IFE (Instituto Federal Electoral) porque al hacOyuky Mart\xednez Col\xedn, tambi\xe9n transg\xe9nero, y que estaba acompa\xf1ada de sus dos hijos y su mam\xe1.\nAmbas trabajan comoitarianas en el Centro de Apoyo a las Identidades Trans, AC, donde participan en una campa\xf1a de prevenci\xf3n de enfermedadessexuales.\n"Quisi\xe9ramos que no solo nos vean como trabajadorassexuales o estilistas, sino que luchamos por nuestros derechos",dice Kassandra mientras sonr\xede, sostiene su credencial de lector y levanta su pulgar entintado.', u'title': u'Con apariencia de mujer e identidad masculina, los transg\xe9nero votan - M\xe9xico: Voto 2012 - Nacional' , u'xpath': u'/HTML[1]/BODY[1]/SECTION[5]/DIV[1]/ARTICLE[1]/DIV[1]/DIV[6]', u'icon': u'http://mexico.cnn.com/images/ico_mobile.jpg'}

我不太了解Unicode。如何确保我得到的请求仍然是 Unicode？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-11T15:39:45.800

您可以使用`req.text`而不是`req.content`确保您获得 Unicode。方法描述在：

[http://docs.python-requests.org/en/latest/api/#main-interface](http://docs.python-requests.org/en/latest/api/#main-interface)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-11T15:04:39.653

关于“我不太了解 unicode”，Joel Spolsky 和官方[Python Unicode HowTo有一本](http://docs.python.org/howto/unicode.html)[有趣的 Unicode 入门](http://www.joelonsoftware.com/articles/Unicode.html)书，阅读时间为 10 分钟，涵盖了 Python 特定的所有内容。

[requests 文档](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)说请求将始终返回 unicode，而您发布的示例内容实际上是 unicode（注意字符串`u''`语法？这是 Python 的 unicode 字符串语法。），所以没有问题。请注意，如果您在 Web 浏览器中查看 JSON 响应，`u''`则不会出现 ，因为它是 Python 如何存储字符串的属性。

如果 unicode 对您的应用程序很重要，请不要在没有真正了解 unicode 的情况下尝试应对。您正处于一个痛苦的世界，如果您不知道自己在做什么，那么调试字符集问题会非常令人沮丧。阅读上述两篇文章可能需要半个小时。

# asp.net - Telerik RadChart 在 ASP Ajax 控件上交替背景 StripLines

> ID：11435334
> 
> 赞同：0
> 
> 时间：2012-07-11T14:49:56.830
> 
> 标签：asp.net, c#-4.0, telerik, radchart

我想在 ASP.Net Ajax RadChart 控件的折线图上显示 X 轴的交替背景颜色。

我发现[这篇文章](http://www.telerik.com/help/wpf/radchart-styling-and-appearance-styling-strip-lines.html)显示了 Silverlight 和 WPF 图表控件的 StripLine 属性，但我在 Ajax 控件上找不到该属性。也许我只是没有看到它 - 如何将背景颜色设置为与 X 轴列垂直条纹？

在文章中提到的“AlternateStripLineStyle”位于此处： `RadChart1.DefaultView.ChartArea.AxisY.AxisStyles.AlternateStripLineStyle`

但是，Ajax 控件没有 AxisStyles 属性。

谢谢。

**更新：**我认为这可能使用 PlotArea 的*MarkedZones*属性，但如果它确实有效，这不是一个非常优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:01:01.590

Telerik 自己[提供了以下解决方案](http://www.telerik.com/community/forums/aspnet-ajax/chart/radchart-alternating-background-striplines-on-asp-ajax-control.aspx)，我怀疑它使用了 MarkedZones：

```
public void GenerateStripLines(RadChart chart, int minValue, int maxValue, int step)
{
   for (int i = minValue; i <= maxValue + step; i+=step)
   {
      Color zoneColor;

      if (i % 2 == 0)
         zoneColor = Color.White;
      else
         zoneColor = Color.WhiteSmoke;

      var item = new ChartMarkedZone() { ValueStartY = i, ValueEndY = i + step };
      item.Appearance.FillStyle.MainColor = zoneColor;
      chart.PlotArea.MarkedZones.Add(item);
   }           
} 
```

# jquery - Phonegap/cordova IOS横向视频

> ID：11435337
> 
> 赞同：5
> 
> 时间：2012-07-11T14:50:09.513
> 
> 标签：jquery, ios5, cordova

**问题：**

我创建了启用纵向的应用程序，但是当我全屏启动视频时，我需要支持横向。

**我尝试过的事情：**

*   [Webview 景观](https://stackoverflow.com/questions/9982518/webview-landscape)
*   [Phonegap - 在仍然启用自动定向的同时防止旋转？](https://stackoverflow.com/questions/6444031/phonegap-prevent-rotation-while-still-having-auto-orientation-enabled)
*   [https://github.com/acti0nm4n/Phonegap-Orientation-iOS](https://github.com/acti0nm4n/Phonegap-Orientation-iOS)

**要求：**

*   适用于 Cordova 1.8
*   适用于 IOS 5.1
*   jQuery 友好
*   将通过苹果检查
*   最好是适用于 android 和 ios 的修复程序，尽管 IOS 是优先级

有很多人在寻找相同的解决方案。请在您的回答中具体而彻底，以便我们能够准确地测试解决方案。我在应用程序中一次又一次地看到这种情况，但由于某种原因我没有找到答案。

我一直在寻找解决这个问题的方法，但每次都失败了。这似乎是一个如此简单的问题，应该很容易解决。我知道那里有几篇关于如何做到这一点的帖子，但我对这些帖子的答案没有任何运气。如果您有适合我的解决方案，请告诉我。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T16:56:10.870

我们在 phonegap/cordova 应用程序中使用 video.js，从来没有遇到过问题。我们选择在我们的移动客户端中使用 video.js，因为我们在整个服务中都使用它。

附加背景：
*我们正在玩网络，而不是本地存储。
* 我们提供 webm、mp4 和 ogg 文件（我不确定 iOS 上使用的是哪个文件，但我们会出于各种目的生成这三个文件。）

# css - 制作具有不同开始，结束和休息的CSS菜单

> ID：11435339
> 
> 赞同：0
> 
> 时间：2012-07-11T14:50:09.927
> 
> 标签：css, menu, css-shapes

嘿伙计们希望你能帮助我。

在这里待了一个多小时，这让我发疯了。

基本上我在 CSS 方面是个大新手，但我正在学习。目前我正在尝试复制一个如下所示的菜单：

![实际菜单](../Images/f2a7a658179ae547e70c3e2006f86812.png)

我到目前为止看起来像这样（我知道字体不同但不是问题）： ![在此处输入图像描述](../Images/9d52def098dc9e3722fdff53da200ebc.png)

正如你所看到的，我得到了背景，但我只是不知道如何在每个选项卡之间制作开始、结束和中断（黑线部分）。

另外，基本上我的开始、休息和结束都是 .jpg 图像。不寻找 html5 或 css3 曲线等来执行此操作。只是想保持简单:)。

这就是我到目前为止所得到的。如果你能给我一些关于如何让剩下的东西的提示，那就太好了，如果我使用了一种不太好的方法，建议一种更好的方法。

的HTML：

```
 <div id="header">

            <ul id="header-list">
                <li class="header-list-item">
                    <span class= "header-list-item-span" >Home</span>

                </li>

                <li class="header-list-item">
                  <span class= "header-list-item-span" >About Us</span>

                </li>
                <li class="header-list-item">
                   <span class= "header-list-item-span" >Services</span>

                </li>
            </ul>

    </div><!--END OF HEADER --> 
```

的CSS：

```
#header-list{
  display: table;

 position: relative;
 left: -3em;

  table-layout: fixed;
  margin-bottom: 0PX;
  margin-top: 0;
  margin-left: auto;

}

.header-list-item-span{
    background-image: url("img/menubody.jpg");
    color: white;
    display: inline-block;
    width: 5em;
    font-size: large;
    text-align: center;
    padding: .2em;
}

.header-list-item{
     display: table-cell;

 height: 4.2em;
  vertical-align:  bottom;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:56:11.043

这是一个想法：

包裹`ul`在一个`div`. 将第一个 jpg 设置为该 div 的背景图像，并添加一些`padding-left`以使图像可见。将最后一个 jpg 设置为 ul 的背景图像并添加一些`padding-right`，以便图像也可以看到。

另外，在我看来，您应该通过更多地利用 CSS 选择器来简化您的 HTML。

标题列表可以选择为`div#header > ul`。`header-list-item`可以使用 选择您在班级中选择的项目`div#header > ul > li`。我认为跨度实际上不是必需的，您可以将样式直接应用于`li`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:54:39.717

将 ul 包裹在另一个 div 中并在内部左侧添加填充，您可以将起始图像作为背景。然后把右边的图片作为ul的背景，在右边加上padding。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title></title>
    <style>
        div,li,ul,span { margin: 0;padding: 0;}

        body  { width: 700px; margin: 0 auto; }

        #header 
        {
            background: url(http://www.lucascobb.com/wp-content/uploads/2012/02/1-plastic-navigation-bar-565x182.jpg) top center repeat;
            padding-top: 50px;
            position: relative;
        }

        #header .nav 
        {
            background: url(http://www.ultracomwireless.com/images/button_left.png) top left no-repeat;
            float: right;
            width: 413px;
            padding-left: 26px;
            margin-right: 20px;
        }

        #header .nav .nav-wrapper 
        {
            background: url(http://www.ultracomwireless.com/images/button_right.png) top right no-repeat red;
            padding-right: 26px;
        }

        #header ul 
        {
            position: relative;
            list-style: none;
        }
        #header ul li   
        {
            background: red;
            width: 120px;
            float: left;
            text-align: center; 
        }
        #header ul li span 
        {
             color: white; 
             padding: 8px 0px;
        }
        .clear { clear: both;}
    </style>
</head>
<body>

    <div id="header">
        <div class="nav">
            <div class="nav-wrapper">
                <ul>
                    <li><span>Home</span></li>
                    <li><span>About Us</span></li>
                    <li><span>Services</span></li>
                </ul>   
                <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
    </div>

</body> 
```

# javascript - GAE - 区分具有相同 IP 的多个客户端

> ID：11435348
> 
> 赞同：1
> 
> 时间：2012-07-11T14:50:25.867
> 
> 标签：javascript, python, google-app-engine, ip, mac-address

atm 我正在构建自己的身份验证系统。但是今天我偶然发现了一个小问题。

如何区分具有相同 ip 的客户端？

我首先想到的是“嘿没问题，只要看看他们的 macip”。但是 HTTP 不包含 mac ip 地址，我无法在客户端上运行 python 程序。

所以我将不得不使用某种javascript。

但这感觉就像一个黑客。

所以我做了一些调查 [区分同一 Intranet 上的两台计算机](https://stackoverflow.com/questions/2254334/differentiating-between-two-computers-on-the-same-intranet)

但是我怎样才能访问“clientport”呢？这是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:00:22.713

在客户第一次访问时给他一个令牌，他必须在每次请求时将其发送回服务器以识别自己。在网络浏览器中，这是一个带有会话 ID 或类似唯一标识符的 cookie。在非 Web 浏览器系统上，您可以执行类似的操作。在协议级别上没有办法做到这一点，因为底层协议（TCP/IP、HTTP）被设计为将数据包路由到它们的目的地，唯一标识不是该过程的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:04:02.580

根据您的问题，我推断您正在编写基于 HTTP 的身份验证系统，而不仅仅是裸 TCP。在这种情况下，您可以使用 cookie，它提供了您需要的那种跟踪机制，并且是 HTTP 登录机制的首选。

一般来说，使用 HTTP，您不必担心和处理 IP 地址，您在堆栈中的级别更高。

# jquery - Jquery：如何限制最大项目数？

> ID：11435351
> 
> 赞同：0
> 
> 时间：2012-07-11T14:50:41.423
> 
> 标签：jquery

我设置了一个 Jquery 表单，可以在其中添加和删除字段：http: [//jsfiddle.net/beehive/TLJGb/](http://jsfiddle.net/beehive/TLJGb/)

我不想在这个表单上添加超过 10 个字段。我怎样才能做到这一点？

```
$(function() {
    var scntDiv = $('#p_scents');
    var i = $('#p_scents p').size() + 1;
    $('#addScnt').live('click', function() {
        $('<p id="yum">beets ' + i + ' <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
        i++;
        return false;
    });
    $('#remScnt').live('click', function() {
        if (i > 2) {
            $(this).parents('p').remove();
            i--;
        }
        return false;
    });
}); 
```

​ html:

```
<h2><a href="#" id="addScnt">Add Another</a></h2>

<div id="p_scents">
    <p id="yum">
        beets
    </p>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T14:54:31.203

将以下 if 语句添加到您的代码中...

```
$('#addScnt').live('click', function() {

    if ($(".item", addScnt).length < 9) {
        $('<p class="item" id="yum">beets ' + i +' <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
        i++;
    }
        return false;
}); 
```

首先，我为项目添加了一个类，以便我可以检测到它们。然后我可以数如果少于 9 个（+ 你已经拥有的那个是 10 个）

这是[小提琴](http://jsfiddle.net/TLJGb/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:57:02.277

只需将在#addScnt 的单击处理程序中添加新字段的代码包装在一个 if 语句中，该语句检查 i 是否小于或等于 10。

或者，换句话说：

```
$('#addScnt').live('click', function() {
    if (i <= 10) {
        $('<p id="yum">beets ' + i + ' <a href="#" id="remScnt">Remove</a></p>').appendTo(scntDiv);
        i++;
    }
    return false;
}); 
```

# iphone - 释放不是用 init 创建的图像

> ID：11435352
> 
> 赞同：0
> 
> 时间：2012-07-11T14:50:42.017
> 
> 标签：iphone, objective-c, ios, xcode, ipad

大家好，我有下一个问题，我正在创建这样的各种图像

```
UIImage *image = [UIImage imageNamed:_imageName]; 
```

我分配给一个 UIImageView

```
[self.imgvImage setImage:image]; 
```

用户点击一个按钮时会创建一个 UIImageView 并分配一个 UIImage，我在创建新的时创建了 4 个 UIImageView，最后一个被删除，像这样向 UIImageView 发送版本

```
[_imgvImage release]; 
```

但是发生了大约 100 次创建和释放内存冲突，但应用程序不会崩溃，我认为这是因为创建的 UIImages 没有释放，因为所有代码都是干净的，创建和释放都很好。

如何从内存中完全删除所有带有 UIImage 的 UIIMageView。

请帮忙，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:57:11.320

使用以下语句创建的图像由 iOS 处理。该图像存储在缓存中，因此下次调用它时，它只是从缓存中返回。

```
UIImage *image = [UIImage imageNamed:_imageName]; 
```

我认为只要您释放分配的内容（在这种情况下为 UIImageView），您就不必担心内存警告。iOS 应在内存紧缩的情况下清除此缓存。

如果你不想要这种缓存（例如，当你只加载一个图像时）你可以使用 imageWithContentsOfFile: UIImage 的方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T15:32:23.230

嗨，我找到了解决方案，该解决方案称为

```
NSAutoreleasePool 
```

在我删除视图对象时的方法中，如下所示：

```
for(ProductVW *pVW in [_vwProductsContainer subviews]){

            NSAutoreleasePool * autoreleasePool = [[NSAutoreleasePool alloc] init];

            [pVW removeFromSuperview];

            [autoreleasePool release];

} 
```

# java - 在 Android 应用上接收短信

> ID：11435354
> 
> 赞同：13
> 
> 时间：2012-07-11T14:50:50.050
> 
> 标签：java, android, sms

我按照教程在我的应用程序上接收 SMS 并阅读它以将 SMSbody 传递给 Toast。那是接收器类。

```
public class SmsReciever extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent){
        Bundle bundle= intent.getExtras();
        SmsMessage[] msgs= null;
        String str="";
        if(bundle != null ){
            Object [] pdus=(Object[]) bundle.get("pdus");
            msgs=new SmsMessage[pdus.length];
            for(int i=0; i< msgs.length;i++){
                msgs[i]= SmsMessage.createFromPdu((byte[])pdus[i]);
                str+= msgs[i].getMessageBody();

            }
             Toast.makeText(context, str, Toast.LENGTH_LONG).show();
        }
        }

    } 
```

清单文件

```
 <receiver android:name="com.msoft.masrooq.SmsReciever">
    <intent-filter>
    <action android:name="android.provider.telephony.SMS_RECIEVED"></action>
    </intent-filter>
    </receiver>
        <uses-permission android:name="android.permission.RECEIVE_SMS"/>
            <uses-permission android:name="android.permission.READ_SMS" /> 
```

该应用程序启动正常，但它不响应接收短信它不做任何事情。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T15:48:06.633

这是我接收短信的实现。短信可能会分成很多条，注意它是如何处理的。还要检查`android:priority`属性。

```
public class SmsReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(SMS_RECEIVED)) {
            Bundle bundle = intent.getExtras();
            if (bundle != null) {
                // get sms objects
                Object[] pdus = (Object[]) bundle.get("pdus");
                if (pdus.length == 0) {
                    return;
                }
                // large message might be broken into many
                SmsMessage[] messages = new SmsMessage[pdus.length];
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < pdus.length; i++) {
                    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    sb.append(messages[i].getMessageBody());
                }
                String sender = messages[0].getOriginatingAddress();
                String message = sb.toString();
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
                // prevent any other broadcast receivers from receiving broadcast
                // abortBroadcast();
            }
        }
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.smsreceiver"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="4" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity
            android:name=".SmsLoggerActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="com.example.smsreceiver.SmsReceiver" android:enabled="true">
            <intent-filter android:priority="2147483647">
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

几点注意事项：如果您在 xml 中声明您的接收器，那么无论您的应用程序是否启动过，系统都可以使用您的接收器。由于 Android 1.6 收到的短信通知是作为有序广播发送的，因此您可以使用`android:priority`属性 of`<intent-filter>`告诉系统首先将短信发送到您的应用程序（您也可以调用 abortBroadcast() 以便其他应用程序不会收到短信，例如本机短信应用程序）。不要忘记广播接收器有大约 10 秒的时间来执行它的操作，否则它可能在完成工作之前被提前终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:39:29.983

广播区分大小写。`android.provider.Telephony.SMS_RECEIVED`不使用`android.provider.telephony.SMS_RECEIVED`。

另外，我也有一个类别集，但我不确定它是否是强制性的：

```
<intent-filter>
   <action android:name="android.provider.Telephony.SMS_RECEIVED" />
   <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-30T04:32:39.937

**注意：**在某些设备上，如果没有意图过滤器中的[android:priority="100"](https://developer.android.com/guide/topics/manifest/intent-filter-element) ，您的代码将无法工作：

```
 <application
 <uses-permission android:name="android.permission.RECEIVE_SMS" />
 <uses-permission android:name="android.permission.READ_SMS" />
 ...
  <receiver
        android:name=".SMSReceiver">
        <intent-filter android:priority="100">
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
  </receiver>
 ...
</application> 
```

这里是 Java 代码：

```
public class SMSReceiver extends BroadcastReceiver {
public static final String ACTION ="android.provider.Telephony.SMS_RECEIVED";
private static final String SMS_SENDER="123456789";

@Override
public void onReceive(Context context, Intent intent) {
        if (intent != null && intent.getAction() != null &&
                ACTION.compareToIgnoreCase(intent.getAction()) == 0) {
            Object[] pduArray = (Object[]) intent.getExtras().get("pdus");
            SmsMessage[] messages = new SmsMessage[pduArray.length];
            for (int i = 0; i < pduArray.length; i++) {
                messages[i] = SmsMessage.createFromPdu((byte[]) pduArray[i]);
            }
            // SMS Sender, example: 123456789
            String sms_from = messages[0].getDisplayOriginatingAddress(); 

            //Lets check if SMS sender is 123456789
            if (sms_from.equalsIgnoreCase(SMS_SENDER)) {
                StringBuilder bodyText = new StringBuilder();

                // If SMS has several parts, lets combine it :)
                for (int i = 0; i < messages.length; i++) {
                    bodyText.append(messages[i].getMessageBody());
                }
                //SMS Body
                String body = bodyText.toString();
                // Lets get SMS Code
                String code  = body.replaceAll("[^0-9]", ""); 
            }
      }
 } 
```

# database - 商品信息爬取

> ID：11435360
> 
> 赞同：0
> 
> 时间：2012-07-11T14:51:07.873
> 
> 标签：database, web-crawler, web-scraping

假设我有一大组产品名称。我怎样才能获得关于这些产品的尽可能多的信息？例如他们的价格、他们的类别（例如电子产品、家居、玩具）？你知道任何全面的产品数据集吗？

PS 我不允许刮亚马逊、易趣和沃尔玛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:55:20.363

目前，还没有针对此类数据的金弹Web 服务。

大多数 Web 服务都提供“最佳匹配”结果。例如，“iPhone 5”返回“iPhone 5 black 32G”和“iPhone 5 32g（黑色）”。你可以看看亚马逊的结果：[http ://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=iPhone%205](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=iPhone%205)

最好的方法是结合来自多个来源的结果。您可以在以下位置找到很多 API：[http ://www.programmableweb.com/apis/directory/1?apicat=Shopping](http://www.programmableweb.com/apis/directory/1?apicat=Shopping)

我是[http://aerse.com](http://aerse.com)的代表。我们正在构建服务，解决上述问题。主要目标是使用产品名称和产品供应商获取产品信息。

# java - 作为 Java 程序从 C++ 导出到 Eclipse

> ID：11435366
> 
> 赞同：0
> 
> 时间：2012-07-11T14:51:32.883
> 
> 标签：java, c++, eclipse, visual-studio-2010

所以我有一个我用 C++ 编写的程序（它是一个生成器），当你输入一些选项时，它会在控制台中生成一个 java 代码，但它不能被复制/粘贴并且很难阅读（这只是Windows 控制台的方式）。有没有办法将生成的 java 代码导出到 eclipse 中以便人们可以编辑它？更好的是，该代码可以导出到 .jar 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:00:40.157

您始终可以使用 > 管道将控制台输出重定向到文本文件：

```
C:\> myapp.exe > output.java 
```

或者，这里是关于如何在 C++ 中写入文件的教程[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/)

更新：关于如何输出 .java 文件的简短示例。

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  ofstream myfile;
  myfile.open ("Hello.java");
  myfile 
  << "public class Hello {" << endl
  << "  public static void main(String[] args) {" << endl
  << "    System.out.println(\"Hello World\");" << endl
  << "  }" << endl
  << "}";
  myfile.close();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:01:06.143

将生成的代码保存到 *.java 文件而不是打印到 cosnole 怎么样？？？要生成 jar 文件，您可以在控制台上使用命令“jar”或使用 eclipse 或其他东西来生成 jar

您必须阅读一些有关 c++ 的内容。以下是如何处理文件 io [http://www.functionx.com/cpp/articles/filestreaming.htm](http://www.functionx.com/cpp/articles/filestreaming.htm)

干杯

# c++ - 从二进制文件中逐个读取字节

> ID：11435367
> 
> 赞同：1
> 
> 时间：2012-07-11T14:51:41.873
> 
> 标签：c++, file-io, binary, byte

这是我的问题，我想打开一个 .jpg 文件并将每个字节作为用逗号分隔的十进制数 (0-255) 写入另一个 .txt 文件。现在它应该能够使用该 txt 文件再次构建 .jpf 文件。这就是我试图做到的方式。

```
#include<iostream>
#include<fstream>
using namespace std;
int main()
{
long x;
char *s;

ifstream ifs("image.jpg",ios::binary);
ifs.seekg(0,ios::end);
x=ifs.tellg();
ifs.seekg(0,ios::beg);

s=new char[x];
ifs.read(s,x);
ifs.close();

ofstream is("image.txt");

for(int i=0;i<x;i++){
is<<(unsigned int)s[i]<<",";
} 
```

现在这个程序用十进制数字创建image.txt，如下所示，4294967295,4294967256,4294967295,4294967264,0,16,74,70,73,70,0,1,......这里有些数字似乎是4字节long, s[i] 只指一个字节，所以 (int)s[i] 如何返回一个大于 255 的数字。请有人帮我解决这个问题....谢谢..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T14:56:53.920

看来您的机器上`char`已*签名*。因此，当您将负数转换为 时`unsigned int`，您会得到一个很大的值。使用 表示输出中的大值时，它们是负值`char`。请注意，当`char`被*签名*时，它的值可以是`-128`to`127`但一个*字节*可以在`0`to之间`255`。所以任何大于`127`range 的值都会变成负数`-128 to -1`。

用作`unsigned char`：

```
unsigned char *s; 
```

或者这样做：

```
is<< static_cast<unsigned int> (static_cast<unsigned char>(s[i]) )<<",";
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                                casting to unsigned char first
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
               then casting to unsigned int 
```

也就是说，先`char`转换为`unsigned char`，然后转换为`unsigned int`。

* * *

好吧，这就是您所面临的问题。现在有一些关于风格和习语的注释。在 C++ 中，您应该尽可能避免使用`new`。在您的情况下，您可以`std::vector`用作：

```
//define file stream object, and open the file
std::ifstream file("image.jpg",ios::binary);

//prepare iterator pairs to iterate the file content!
std::istream_iterator<unsigned char> begin(file), end;

//reading the file content using the iterator!
std::vector<unsigned char> buffer(begin,end); 
```

最后一行将文件中的所有数据读入`buffer`. 现在您可以将它们打印为：

```
std::copy(buffer.begin(), 
          buffer.end(), 
          std::ostream_iterator<unsigned int>(std::cout, ",")); 
```

为了使所有这些工作，除了您已经在代码中添加的内容之外，您还需要包含以下标头：

```
#include <vector>     //for vector
#include <iterator>   //for std::istream_iterator and std::ostream_iterator
#include <algorithm>  //for std::copy 
```

如您所见，这个惯用的解决方案不使用*指针*and `new`，也不使用*cast*！

# android - 从计划服务更新 UI

> ID：11435370
> 
> 赞同：0
> 
> 时间：2012-07-11T14:52:00.143
> 
> 标签：android, android-intent

我正在使用 AlarmManager 定期启动服务以从服务器检索数据：

```
 alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, Service.class);
    PendingIntent pendingIntent = PendingIntent.getService(this, 1, intent, 0);
    alarmManager.setRepeating(
            AlarmManager.ELAPSED_REALTIME_WAKEUP,
            SystemClock.elapsedRealtime(),
            AlarmManager.INTERVAL_FIFTEEN_MINUTES,
            pendingIntent); 
```

所以它启动了，一切顺利......

唯一的问题是我不知道如何从中更新主 UI……我见过的所有示例都没有使用 AlarmManager……所以它们不符合我的需求。

请你帮助我好吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:09:50.453

您的服务将无法访问 UI 线程。但是可以使用您在代码中引用的上下文对象来调用

```
runOnUiThread(Runnable Action); 
```

如果您熟悉 Runnable 和其他多线程功能，那么您将了解我的目标。

否则，

让您的服务触发 Intent 广播并创建一个扩展 BroadcastReceiver 的嵌套类

```
private class updateUIReceiver extends BroadcastReceiver{ 
```

在当前持有你的 UI 线程的 Activity 中。然后创造性地使用

```
Intent.putExtra(); 
```

告诉您的活动如何更新 UI。比如字符串就是整数。常量很好用。

# javascript - 如何仅使用 Javascript 裁剪图像？

> ID：11435374
> 
> 赞同：4
> 
> 时间：2012-07-11T14:52:04.310
> 
> 标签：javascript, image, html, browser, crop

无论如何我可以使用原始javascript裁剪图像吗？我希望能够有一个函数来获取具有特定宽度、高度、offsetX 和 offsetY 的图像（html 标签或源或其他），并创建指定部分的图像。

我对 HTML5 画布等不太熟悉，但我需要支持较旧的浏览器，所以这甚至不是一个选择（我知道这很糟糕）。

我希望这很清楚。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:01:04.273

如果您只需要显示图像的一部分，请使用 css 剪辑：[https](https://developer.mozilla.org/en/CSS/clip) ://developer.mozilla.org/en/CSS/clip 。即使禁用了 JavaScript，也可以在 IE6+ 中工作。

如果您**需要**物理裁剪图像，并且需要 IE6 支持，那么您的选项是 Flash 或将数据和裁剪值发送到返回裁剪图像的服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T14:57:15.080

通常，通过使用 CSS 样式来设置渲染限制以使图像看起来被裁剪就足够了。

而不是一个`img`，使用一个`div`。将所需大小分配给`div`. 将属性设置`background`为`-x -y url('...url-of-your-image...') no-repeat`

将`x`和替换`y`为您要显示的顶部/左侧偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:58:42.837

试试这个：

```
function crop(img_id, crop_id, x, y, width, height) {
  $(crop_id).update('<img id="' + crop_id + '_img" src="' +
      $(img_id).getAttribute('src') + '" style="display:none" />');

  var scale_x = $(crop_id).getWidth() / width;
  var scale_y = $(crop_id).getHeight() / height;

  $(crop_id).setStyle({
    position: 'relative',
    overflow: 'hidden' 
  });

  $(crop_id + '_img').setStyle({
    position: 'absolute',
    display: 'block',
    left: (-x * scale_x) + 'px',
    top: (-y * scale_y) + 'px',
    width: ($(img_id).getWidth() * scale_x) + 'px',
    height: ($(img_id).getHeight() * scale_y) + 'px'
  });
} 
```

问题：需要 Jquery，并且该解决方案可能适用于 IE8+.... 你需要 IE6+ 吗？

# android - (x) 大显示屏上的布局错误

> ID：11435376
> 
> 赞同：0
> 
> 时间：2012-07-11T14:52:10.290
> 
> 标签：android, android-layout

我最近开始为 android 创建应用程序，并想测试不同屏幕尺寸的布局。由于我没有使用 AVD 为虚拟设备创建的 android 设备：

1.  240 dpi，无宽度或高度规格（适用于手机）
2.  160 dpi，800 x 1280（用于平板电脑）

因为我刚刚完成了一个教程，所以我刚刚编辑了我的应用程序，因此目录如下所示：

```
res/
    layout/
        activity_main.xml

    layout-large/
        activity_main.xml 
```

布局/activity_main.xml：

```
<?xml ...>
<LinearLayout ...>
    <Button
        android:text="@string/button_send"
        ... />
</LinearLayout> 
```

布局大/activity_main.xml：

```
<?xml ...>
<LinearLayout ...>
    <Button
        android:text="@string/button_send_large"
        ... />
</LinearLayout> 
```

两个不同的字符串资源包含不同的字符串，所以我期望它在大型显示器上显示一个，而在其他所有内容上显示另一个。它所做的只是使用任何设备上“布局”文件夹中的 .xml 文件。

所以我做了一些研究并尝试将“layout-large”重命名为“layout-xlarge”，最后重命名为“layout-sw600dp”。也没有用。
两款设备均运行 Android 4.1。
是的，我确实确保 eclipse 在正确的设备上启动了该应用程序。

问题：我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:56:42.540

放下面

```
<?xml ...>
<LinearLayout ...>
    <Button
        android:text="@string/button_send"
        ... />
</LinearLayout> 
```

在**res/layout/activity_main.xml**

并创建 **res/layout-hdpi/activity_main.xml**

```
 ^^^^ 
```

放下面

```
<?xml ...>
<LinearLayout ...>
    <Button
        android:text="@string/button_send_large"
        ... />
</LinearLayout> 
```

在**res/layout-hdpi/activity_main.xml**

```
 ^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:03:59.773

您可以使用相同的文件夹层次结构为不同的屏幕尺寸定义不同的字符串值

```
res/
 |-values/
 |-values-large/ 
```

因此，对于单个布局中的相同字符串 id，该值将随屏幕大小而变化

我不确定问题是否来自这一点，但它可能是......

希望能帮助到你

# google-sheets - 将两个表格的结果放在一个电子表格的两张表中

> ID：11435377
> 
> 赞同：0
> 
> 时间：2012-07-11T14:52:12.510
> 
> 标签：google-sheets, google-forms

我有一个接受和审查拨款申请的系统。有两种形式：

1.  申请人提交的带有拨款请求的表格
2.  我发送给三位评审员的表格，用于评估拨款申请

我想在一个电子表格中获得两种形式的结果：

表 1 列出了申请表中的数据（带有自动生成的序列号）。

表 2 列出了所有申请的所有审查数据（有一栏是审查的申请的序列号）。

我遇到了以下问题：

1 - 指定两个表单的结果进入同一个电子表格，在不同的工作表上。

2 - 为申请添加序列号，然后将相同的序列号添加到三个审核者的结果中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:44:38.617

在不涉及另外两个电子表格的情况下，不可能使用 GAS 将两个 Google 表单的数据直接插入到一个电子表格中，因为现在表单只能将数据部署到自己的电子表格中，而 GAS 没有任何服务可以访问这些表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:11:23.653

当您提出一个相当广泛的问题时，我会有点笼统，但我会尽力而为。我会考虑使用 UiApp 从头开始​​构建表单。它将使您在功能上更加灵活，并且信息流更加顺畅，但是由于您的问题是关于表格的，所以我会坚持下去。

问题 1：您希望`OnSubmit`在与表格 1 和 2 关联的每个电子表格中创建一个函数，将您想要的数据复制到另一个电子表格。

```
function onFormSubmit() { // add an onsubmit trigger 
var emailAddress = e.values[1];
var fullName     = e.values[2];
var newSS = SpreadsheetApp.openById("Add New SS ID").getSheetByName('Sheet1');//one form should be 'Sheet2'
  var range = sheet.getRange(sheet.getLastRow()+1,1,1,2);
range.setValues([[emailAddress, fullName]]); 
```

问题2：分配一个序列号。在我看来，您只想为申请分配一个编号，然后将该编号提供给审阅者以便他们输入表格。要分配此号码，您可以按照[教程：自动化服务台工作流程](https://developers.google.com/apps-script/articles/helpdesk_tutorial)。相反，我只是使用获取最后一行，因为我从不删除活动应用程序中的行，因此行号是唯一的。

```
var serialNum = newSS.getLastRow()+1; 
```

然后，您可以像其他操作一样简单地添加该变量。我没有测试过这段代码，所以你可能需要为你的目的清理它。

# perl - 如何从 Unix 命令行查看谁在使用我的 Perl 子例程？

> ID：11435383
> 
> 赞同：0
> 
> 时间：2012-07-11T14:52:23.723
> 
> 标签：perl, unix

我进行了搜索，但找不到任何命令可以让我查看哪些 Perl 文件需要另一个 Perl 文件。我只是想在我的工作数据库中已经存在的 Perl 文件中查看一个使用特定子例程的示例程序，但我不确定如何执行此操作，甚至是否可能。例如，一个文件可能会说：

```
require $file_a or die;
&subroutine_a_from_file_a(); 
```

另一个文件将具有子例程：

```
sub subroutine_a_from_file_a{
    # do stuff necessary for another file
} 
```

如果我还不知道它的存在，有什么方法可以从 Unix 命令行查看第一个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:57:33.757

可以 grep 查找任何提及相关子的文件：

```
find / -type f -exec grep -l 'subroutine_a_from_file_a' "{}" \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:59:55.447

这里有一些可能的解决方案：-

[http://www.perlmonks.org/?node_id=118441](http://www.perlmonks.org/?node_id=118441)

'grep' 在某种程度上很好，但在您的示例中不起作用，因为文件是从变量命名的。

# javascript - 如何在鼠标悬停在另一个图像上时更改图像

> ID：11435388
> 
> 赞同：0
> 
> 时间：2012-07-11T14:52:44.497
> 
> 标签：javascript, switch-statement, onmouseover

我正在为朋友/客户的比萨店建立一个网站。它是本地的，他希望拥有基本功能，而不是太多维护。因此，我在静态 html 和 css 中构建它。

我遇到的问题是，当我尝试通过让 onmouseover 事件更改图像的 src 标签来使他的菜单一次出现一个部分时，它实际上从未改变。

我设置它的方式是一个 3 x 3 网格的菜单标题，每个 200 x 67 像素。在他们每个人上，我都有 do onmouseover="displaymenu(~)" ，其中 ~ 是数字 1 到 9，具体取决于按钮。该函数简单地调用一个开关，并在每种情况下将图像的 src 更改为显示菜单相应部分的其他图像下方。

我的功能设置如下：

```
function displaymenu(x) {
    switch (x) {
    case 1:
        document.getElementById("menuimage").src = "images/AppetizersMenu.jpg";
        break;
    case 2:
        //same as 1 except a different src, same for 3-9. 
```

我试图更改的图像具有 id menuimage。此代码位于`<head>`我的文档部分。我似乎无法让事情正常工作，并且已经寻找解决方案。如果 javascript 不是要走的路，请告诉我，我会按照您的想法去做。

编辑：我尝试了 3 个最古老的解决方案，但没有成功。有人可以告诉我是否只是我的计算机有这些问题而不是代码问题？

非常感谢，-Elliot S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:55:12.563

尝试

```
document.getElementById("menuimage").setAttribute('src','images/AppetizersMenu.jpg;'); 
```

或者

```
document.getElementById("menuimage").src='images/AppetizersMenu.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:56:24.070

您需要引用分配给 .src 属性的值，以便将其解释为文字字符串：

```
document.getElementById("menuimage").src = "images/AppetizersMenu.jpg"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:50:42.893

我想这也会让你微笑

你的交换机不工作！

```
function displaymenu(x) {
var x = parseInt(x); // MAGIC LINE
switch (x) {
case 1:
   $('#holder').hide();
    break;
case 2:
    //same as 1 except a different src, same for 3-9. 
```

# actionscript-3 - 尝试捕捉拼图时出现错误 1010

> ID：11435390
> 
> 赞同：0
> 
> 时间：2012-07-11T14:53:05.723
> 
> 标签：actionscript-3, flash

我正在尝试创建一个益智游戏，到目前为止，移动棋子没有任何问题，但是当我尝试在 stopDrag 之后检查棋子位置时，我收到一条错误消息：错误 #1010：术语未定义且没有属性。

这是相关代码：full1 是一个影片剪辑，其中包含具有低 alpha 的拼图图片和拼图，每个拼图都有自己的实例名称。在此示例中，tr 是其中一个片段的实例名称。

```
 public function Move(even:MouseEvent)
{
    even.target.startDrag();

}
    public function stopMove(even:MouseEvent)
{
    this.stopDrag();
    checkPos(even.target.name);

}
    public function checkPos(nameStr:String)
{

    if(nameStr=="tr1")
    {
        if(this.full1.tr1.x>=460&&this.full1.tr1.x<=465.5&&this.full1.tr.y>=99&&this.full1.tr.y<=103)
        {
            this.full1.tr.x=460.2;
            this.full1.tr.y=101.95;
        }
    }

} 
```

如果有人看到我写的内容有任何问题，或者对如何解决这个问题有更好的了解，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:59:50.187

有一次，您使用“even.target.startDrag();” 开始拖动。

但在另一个函数中，您使用“this.stopDrag();” 停止拖动。

您应该始终使用“this”或始终使用“even.target”。这可能是您的错误的原因。

最好知道崩溃发生在哪一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:06:26.883

看起来它应该`even.target.stopDrag()`代替`this.stopDrag()`（因为你开始拖动`even.target`）。除非错误发生在 stopDrag() 之后，在这种情况下，它看起来没有足够的信息来回答。

旁注，最好在 checkPos() 函数之外进行名称检查。例如：

```
this.stopDrag();
if(even.target.name == "tr1")
{
    checkPos();
} 
```

并从 checkPos() 中删除名称检查。

# asp.net-mvc-3 - 未能获得不显眼的客户端验证

> ID：11435391
> 
> 赞同：0
> 
> 时间：2012-07-11T14:53:07.207
> 
> 标签：asp.net-mvc-3, linq, razor, unobtrusive

我发现我想要验证的属性必须在 C# 中具有 [Required] 属性（我对吗？）如果是这样-我的模型是 linq 生成的类-如何添加此属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:06:05.827

您可以通过以下几种方式做到这一点：

*   如果可能，使该字段在数据库中不可为空。这将使数据层需要该字段。

*   创建一个向模型类添加属性的分部类。使用此属性而不是数据库生成的属性。

例如：

```
public partial class YourEntity
{
   [Required]
   public string YourNewProperty
   {
      get { return this.TheRealProperty; }
      set { this.TheRealProperty = value; }
   }
} 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:57:15.963

好吧，您总是可以创建一个新类，作为数据访问层的一部分，具有相同的属性，只需将 [required] 放在您想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:04:35.343

我相信你的 LINQ 类是部分的。使用 MVC，您可以使用“ [MetatDataTypeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx) ”

像这样

```
[MetadataType(typeof(UserMetadataSource))]
public partial class User {

}

class UserMetadataSource {
    [HiddenInput(DisplayValue = false)]
    public int UserId { get; set; }

} 
```

# iphone - 我可以更改游戏中心成就的图像吗？

> ID：11435397
> 
> 赞同：2
> 
> 时间：2012-07-11T14:53:32.500
> 
> 标签：iphone, ios, app-store, game-center

嗨，我想知道以后是否可以随时更改图像？我急于提交我的游戏，不能等到图像完成，所以我现在使用游戏的图标来获取所有成就，我可以在应用程序在应用商店上线后或在应用程序等待时更改它们审查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:54:29.330

好吧，我发现这个问题的简短答案是肯定的，我们可以随时更改图像。我已经在以前批准的应用程序上尝试过，效果很好。

# objective-c - CoreData 防止 NSNull

> ID：11435399
> 
> 赞同：0
> 
> 时间：2012-07-11T14:53:42.173
> 
> 标签：objective-c, json

我有一个核心数据字段，它是一个可选的字符串。有时在我的 json 响应中，我会返回 null。如果我不执行下面的代码检查，程序就会崩溃。有一个更好的方法吗？

```
story.author = [newsStory valueForKeyPath:@"author_title"] != [NSNull null] ? [newsStory valueForKeyPath:@"author_title"] : @"Staff Writer"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:35:04.630

你的方式看起来不错。如果你最终经常使用这个习语，你可以在 Xcode 的数据模型中将此属性的默认值设置为“Staff Writer”。

请注意，从 Mac OS X 10.5 开始，您可以替换`[newsStory valueForKeyPath:@"author_title"]`为更易于阅读的点语法`newsStory.author_title`。[这两个语句使用与Core Data Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-SW4)中描述的完全相同的代码路径。

# facebook - 是否仍支持 proxymail.facebook.com 电子邮件地址？

> ID：11435400
> 
> 赞同：12
> 
> 时间：2012-07-11T14:53:45.760
> 
> 标签：facebook, email, facebook-authentication

它们现在似乎都在显式地弹跳或静默地没有通过（0 打开/点击率），并且自从首次引入该功能以来，它们一直在工作。我知道他们不再为用户提供在较新的身份验证框中选择 proxymail.facebook.com 地址的选项。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T12:46:13.640

答案是**否定**的。Facebook 不再发布代理邮件地址。

虽然没有官方参考资料，但我可以附上这个答案。但找到了这个供**[参考](http://www.sourcecoast.com/forums/jfbconnect/jfbconnect-joomla-25-support/5956-proxymailfacebookcom)**。

> 可以肯定的是，它仍然可供用户使用，但 Facebook 会缓慢地对其对话框进行更新，因此更新的（甚至更旧的）可能没有该选项。

这是您拥有的一个链接：-

![在此处输入图像描述](../Images/6fe6f420f81c15f16cddc9085429e5c5.png)

![在此处输入图像描述](../Images/ec74a550bea248574638b623d7372d31.png)

现在，在最近的更新之后，**更改**按钮已被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T13:41:21.390

我可以回答我很久以前提出的具体问题。我认为 Facebook 一定有一段时间出现了一个错误，它破坏了 *@proxymail.facebook.com 电子邮件集成，正是在此期间，我提出了我最初的问题。但是，查看我们的电子邮件日志，我可以看到我们在 10 月底有人点击了发送到这些 Facebook 代理电子邮件的电子邮件中的链接，所以无论问题是什么，我相信如果您有Facebook 代理电子邮件，您可以安全地发送给它。

话虽如此，当然个人用户可能已经撤销了电子邮件许可（在这种情况下，他们的代理电子邮件将无处可去），我的印象与 sfussenegger 一样，Facebook 不再允许用户使用代理电子邮件地址。我很久没有在 FB 权限对话框中看到匿名电子邮件的选项了……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T18:32:04.433

这回答了你的问题了吗？

[通过电子邮件直接与您的用户交流](https://developers.facebook.com/blog/post/355/ "Facebook 开发者博客文章")

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-28T17:24:45.043

您没有获得点击率的原因是因为在通过 facebook 代理邮件服务器的所有传出电子邮件中，remailer 正在重写链接。所以形式的东西：

```
<a href="http://www.domain.com/"> 
```

被重写为：

```
<a href="l.php/?u=http://www.domain.com/"> 
```

这是一个损坏的链接，因此您的打开检测或点击检测可能根本不起作用。毫无疑问，用户感到困惑（正如我遇到的用户所证明的那样）。

# c# - Web 服务 .asmx 未正确编译

> ID：11435408
> 
> 赞同：1
> 
> 时间：2012-07-11T14:54:20.907
> 
> 标签：c#, asp.net, asmx

我正在尝试在 c# 中创建一个可以从 jquery 调用的 web 服务。

我在 Visual Studio 中创建了 Web 服务，当我按 F5 时它可以工作，但是当我尝试上传它时，我得到了不同的结果。我什至将 VS 直接发布到 FTP，但在查看页面时我得到了这个

```
<%@ WebService Language="C#" CodeBehind="Service1.asmx.cs" Class="WebService1.Service1" %> 
```

这与我在请求获取时返回给我的 jquery 的消息相同。任何想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:10:07.307

确保 IIS 中的虚拟路径被定义为应用程序。在这里查看更多信息：

[http://technet.microsoft.com/en-us/library/cc772042(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc772042%28WS.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T11:24:47.063

我收到此错误（在我认为是由于重新绑定 - 通过添加服务引用 - 到新版本 Visual Studio 中的 Web 服务之后）。我注意到我最终得到了重复的 .asmx 文件。尝试删除 .asmx 文件并通过 Visual Studio 解决方案资源管理器中的添加服务引用从头开始重新绑定到 Web 服务

# coffeescript - Backbone.Marionette 重写方法

> ID：11435411
> 
> 赞同：0
> 
> 时间：2012-07-11T14:54:28.003
> 
> 标签：coffeescript, marionette

在 0.9.3 中，区域管理器已更改，更改日志中包含以下条目：

> *   **BREAKING**更改了实现`Region`以允许更轻松地覆盖新视图如何添加到 DOM

覆盖 open 方法的最佳方法是什么？

目前我正在做以下工作，但我很想知道推荐的方法是什么：

```
_.extend(Backbone.Marionette.Region.prototype, {
  open: (view) ->
    @$el.after(view.el)
}) 
```

这种变化也破坏了我的一些代码，因为在某些情况下我是这样调用 show 的：

```
region.show(documentsView, 'after') 
```

在其他人中，我这样称呼它：

```
region.show unitsView 
```

我如何覆盖 open 以考虑这两个实例，或者我是否需要覆盖 show？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:09:59.560

这有效：

```
_.extend(Backbone.Marionette.Region.prototype, {
        show: (view, appendMethod) ->
            @ensureEl()
            @close()

            view.render()

            @open(view, appendMethod)
            @currentView = view

        open: (view, appendMethod) ->
            appendMethod = appendMethod || "html"
            @$el[appendMethod](view.el)
    }) 
```

# asp-classic - 在 Windows 共享主机上使用 Isapi_Rewrite 2 重写 URL 部分失败

> ID：11435412
> 
> 赞同：0
> 
> 时间：2012-07-11T14:54:31.363
> 
> 标签：asp-classic, iis-6, isapi-rewrite, helicontech

由于从 VPS 迁移到共享托管环境，我被迫从 IIRF 切换到 Isapi_Rewrite。我在 IIRF 下使用的 URL 重写应该只需最少的修改即可工作，但由于某些未知原因，只有一种重写工作。

这是我的 ISAPI_REWRITE V2 的 httpd.ini：

```
[ISAPI_Rewrite]

RewriteEngine On

RewriteRule /buy-sell-assets$ /search/Assets.asp

ReWriteRule .*trucks-tractor\.html$ /search/NewSearch.asp?cat_id=157

RewriteRule .*trucks-rigid\.html$ /search/NewSearch.asp?cat_id=10

ReWriteRule .*trailers\.html$ /search/NewSearch.asp?cat_id=4

ReWriteRule .*helicopters\.html$ /search/NewSearch.asp?cat_id=481

ReWriteRule .*aircraft-fixedwing\.html$ /search/NewSearch.asp?cat_id=467

ReWriteRule .*aircraft-fixed-wing\.html$ /search/NewSearch.asp?cat_id=467

ReWriteRule .*buses\.html$ /search/NewSearch.asp?cat_id=3

ReWriteRule .*boats\.html$ /search/NewSearch.asp?cat_id=559

ReWriteRule .*cars\.html$ /search/NewSearch.asp?cat_id=8

ReWriteRule .*crushers\.html$ /search/NewSearch.asp?cat_id=635

ReWriteRule .*screens\.html$ /search/NewSearch.asp?cat_id=637

ReWriteRule .*cranes\.html$ /search/NewSearch.asp?cat_id=430

ReWriteRule .*equipment\.html$ /search/NewSearch.asp?cat_id=12 
```

*真正*奇怪的是重写规则

```
RewriteRule .*trucks-rigid\.html$ /search/NewSearch.asp?cat_id=10 
```

有效，但其他人都没有。他们都指向完全相同的脚本，所以我完全不知道为什么其他人不工作。

```
Here's the working URL: 
http://www.atn.co.za/buy-sell-assets/trucks-rigid.html

Here's one of the non-working URLs: 
http://www.atn.co.za/buy-sell-assets/trailers.html 
```

为什么一个工作而不是其他工作？这是一个令人难以置信的令人沮丧的问题，我已经尝试了大约四个小时的各种排列，我即将做一些激烈的事情:(

如果有人可以对此提供任何见解或帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:59:32.890

尝试使用以下格式：

```
RewriteRule /buy-sell-assets/trucks-tractor\.html$ /search/NewSearch.asp?cat_id=157 [I,L] 
```

确保每条规则都以 [NC,L] 结尾，否则您的所有页面都将指向一个脚本。

# iphone - 保存 textView 的图像

> ID：11435414
> 
> 赞同：2
> 
> 时间：2012-07-11T14:54:34.613
> 
> 标签：iphone, ios

```
UIGraphicsBeginImageContext(theView.contentSize);
CGContextRef context = UIGraphicsGetCurrentContext();

[theView setNeedsLayout];
[theView.layer renderInContext:context];
UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
NSLog(@"theImage %@",theImage);
return theImage; 
```

我想保存 textView 的图像，但我无法捕捉到完整的 textView。图像仅显示屏幕上显示的文本。我不是美国人，所以我的英语很差，我无法从我们的 TC 网站获得答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T00:14:12.710

该代码所做的基本上是截取屏幕截图，因此没有真正的方法可以让它显示完整的 UITextView。即使尝试以编程方式滚动 UITextView 并截取该区域的几张屏幕截图以将它们拼接到最终图像上将是一场噩梦，因为输入长度不同，如果不切断文本，就无法知道滚动多远。

我建议使用[这个很好的答案](https://stackoverflow.com/a/2487402/465893)将 UITextView 调整为您的内容大小，抓取图像，然后如果需要，将其恢复到原始高度。

# synchronization - 架构更改后，在重新配置之前不要同步记录

> ID：11435418
> 
> 赞同：0
> 
> 时间：2012-07-11T14:54:44.113
> 
> 标签：synchronization, sync, microsoft-sync-framework

注意：用户仅在 Staging DB 中工作；生产数据库仅供查看。

当我们开始时，这两个数据库完全相同，因此配置数据库和同步工作正常。

![在此处输入图像描述](../Images/e5706c073aeb9ff3c65f2196a6c5470b.png)

然后当我更改架构时问题就开始了（而用户仍在使用暂存数据库）。这是我的步骤。

1.  ***在暂存中添加/更新/删除行（由用户）***
2.  取消配置数据库
3.  向表中添加/更新列
4.  再次重新配置数据库

取消配置和重新配置后，我的数据库变得不一致。

![在此处输入图像描述](../Images/6c8c3dff9db56813f8ffc26d3f74a650.png)

现在***重新配置之前的***更改不会同步到生产数据库。SF 仅在提供后跟踪（在跟踪表中）行。

***我的工作***- 我强制更新每个表中的每一行（以便同步框架认为行已更新）。但是，重新配置后第一次同步需要几个小时。

**问题 - 这是 Sync 框架应该/设计的工作吗？**

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:40:49.380

它应该工作的方式：

如果您要完全取消配置并重新配置一个数据库，则 Sync Framework 期望您也重新初始化其他数据库。这意味着在（重新）配置后备份您的“主要”数据库并将其复制并还原到您的辅助数据库，然后在其上运行 PostRestoreFixup (http://msdn.microsoft.com/en-us/library/microsoft .synchronization.data.sqlserver.sqlsyncstorerestore.performpostrestorefixup.aspx）。

替代方法：

有一种解决方法可以就地修改范围，而不是取消配置和重新配置。JuneT 在一系列博客文章中创建了如何开始使用它的大纲：http: [//jtabadero.wordpress.com/2011/03/21/modifying-sync-framework-scope-definition-part-1-简介/](http://jtabadero.wordpress.com/2011/03/21/modifying-sync-framework-scope-definition-part-1-introduction/)。

具体解决您的情况：

听起来您遇到的问题的症结可能是当您的登台数据库中存在未同步的本地更改时，架构更改和取消配置/重新配置正在发生。您可以通过确保在进行架构更改和取消配置/重新配置之前运行同步来解决您遇到的大多数问题。如果这是可行的，它可能比其他选项更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:01:10.127

在取消配置之后和重新配置之前所做的更改不会被检索，因为触发器和跟踪表无法跟踪更改。

这需要更长的时间，因为您可能会遇到冲突。

在取消配置和重新配置之前，就其包含的行而言，您可能拥有相同的表。

因此，假设您在源和目标上有 1M 行。

现在您取消了配置，因此 Sync Fx 消除了有关已同步内容的信息。您重新配置和同步 Fx 使用新元数据（1M 行加上或减去新插入或删除的行）重新填充跟踪表。

现在 Sync Fx 不知道源中的数据或多或少与目标中已有的数据相同。

因此它将 1M+ 行发送到目的地，当它们被应用时，您会因为行已经存在而违反 PK。

我可以看到您修改了源上的架构，但您仍在同步同一组列？如果您新/删除的列不属于范围，则不必取消配置。如果您想影响范围定义中的架构更改，您只需取消配置或重新配置。

# sql - 选择最近的行，优化 (Oracle SQL)

> ID：11435422
> 
> 赞同：3
> 
> 时间：2012-07-11T14:54:57.107
> 
> 标签：sql, oracle, optimization, select, filter

对于以下查询，我将不胜感激。我们有一个实验列表及其当前进度状态（为简单起见，我将状态减少到 4 种，但我们的数据中有 10 种不同的状态）。我最终需要返回所有未完成实验的当前状态列表。

给定一个表 exp_status，

```
Experiment | ID     | Status
----------------------------
     A     |   1    | Starting 
     A     |   2    | Working On It
     B     |   3    | Starting
     B     |   4    | Working On It
     B     |   5    | Finished Type I
     C     |   6    | Starting
     D     |   7    | Starting
     D     |   8    | Working On It
     D     |   9    | Finished Type II
     E     |   10   | Starting
     E     |   11   | Working On It
     F     |   12   | Starting 
     G     |   13   | Starting
     H     |   14   | Starting
     H     |   15   | Working On It
     H     |   16   | Finished Type II 
```

期望的结果集：

```
 Experiment | ID   | Status
----------------------------
     A     |   2    | Working On It
     C     |   6    | Starting
     E     |   11   | Working On It
     F     |   12   | Starting 
     G     |   13   | Starting 
```

最近的 ID 号将对应于最近的状态。

现在，我在 150 秒内执行的当前代码。

```
 SELECT *
    FROM 
          (SELECT Experiment, ID, Status, 
          row_number () over (partition by Experiment
          order by ID desc) as rn
          FROM exp_status)
    WHERE rn = 1
    AND status NOT LIKE ('Finished%') 
```

问题是，这段代码浪费了时间。结果集是从 390 万个表中提取的 45000 行。这是因为大多数实验都处于完成状态。代码通过并对所有这些进行排序，然后仅在最后过滤掉完成的内容。表中大约 95% 的实验处于完成阶段。我无法弄清楚如何让查询首先挑选出所有没有“完成”的实验和状态。我尝试了以下但性能非常慢。

```
SELECT *
FROM exp_status
WHERE experiment NOT IN 
(
  SELECT experiment
  FROM exp_status
  WHERE status LIKE ('Finished%')
) 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:27:08.843

鉴于您的要求，我认为您当前使用 with 的查询`row_number()`是最有效的查询之一。这个查询需要时间，不是因为它必须对数据进行排序，而是因为首先要读取的数据太多（与获取时间相比，额外的 cpu 时间可以忽略不计）。此外，第一个查询进行全扫描，这确实是读取大量数据的最佳方式。

如果你想提高性能，你需要找到一种方法来读取更少的行。第二个查询没有朝着正确的方向发展：

1.  内部查询可能是完整的扫描，因为“完成”的行将分布在整个表中，并且可能代表所有行的很大一部分。
2.  外部查询也可能是一个完整的扫描和一个不错的 ANTI-HASH JOIN，它应该比 45k *（每个实验的状态更改数）非唯一索引扫描快。

所以第二个查询似乎至少有两倍的读取次数（加上一个连接）。

如果你想真正提高性能，我认为你需要改变设计。

例如，您可以构建一个活动实验表并加入该表。您可以将此表作为物化视图或对插入实验状态的代码进行修改来维护。您可以更进一步并将最后的状态存储在此表中。保持这种“最后状态”可能是一个额外的负担，但这可以通过改进的性能来证明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:33:22.477

考虑按以下方式对表进行分区`status`

[www.orafaq.com/wiki/Partitioning_FAQ](http://www.orafaq.com/wiki/Partitioning_FAQ)

如果这些类型的查询很频繁，您还可以创建**物化视图**以避免重新计算聚合。

您能否提供查询的*执行计划*。没有这些，很难知道花费这么长时间的确切原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:50:55.867

您可以使用此变体稍微改进您的第一个查询：

```
select experiment
     , max(id) id
     , max(status) keep (dense_rank last order by id) status
  from exp_status
 group by experiment
having max(status) keep (dense_rank last order by id) not like 'Finished%' 
```

如果你比较计划，你会发现少了一步

问候，
罗布。

# sql - 如何使用 SQL Server 添加到不包括周末的日期？

> ID：11435423
> 
> 赞同：1
> 
> 时间：2012-07-11T14:54:59.720
> 
> 标签：sql, date

例如：

```
@dtBegin = '2012-06-29' 

@input = 20 
```

我希望输出为`'2012-07-27'`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:23:26.013

我不得不在我的项目中解决同样的问题。Gordon Lionoff 的解决方案让我走上了正确的道路，但**并不总是产生正确的结果**。我还必须考虑从周末开始的日期。即在星期六或星期日增加 1 个工作日应该是星期一。这是处理[工作日计算](http://www.calculatorsoup.com/calculators/time/date-day.php)的最常用方法。

我基于 Gordon Linoff 的函数和[Patrick McDonald 的优秀 C# 等价物创建了自己的解决方案](https://stackoverflow.com/questions/1044688/add-business-days-and-getbusinessdays)

**注意：我的解决方案仅在 DATEFIRST 设置为默认值 7 时才有效**。如果您使用不同的 DATEFIRST 值，则必须更改`1`,`7`和`(1,7,8,9,10)`位。

我的解决方案包含两个功能。处理边缘情况的“外部”函数和执行实际计算的“内部”函数。这两个函数都是表值函数，因此它们实际上将扩展为实现查询并通过查询优化器提供。

```
CREATE FUNCTION [dbo].[UTL_DateAddWorkingDays]
(   
    @date datetime,
    @days int
)
RETURNS TABLE AS RETURN 
(
    SELECT 
        CASE 
            WHEN @days = 0 THEN @date
            WHEN DATEPART(dw, @date) = 1 THEN (SELECT Date FROM [dbo].[UTL_DateAddWorkingDays_Inner](DATEADD(d, 1, @date), @days - 1))
            WHEN DATEPART(dw, @date) = 7 THEN (SELECT Date FROM [dbo].[UTL_DateAddWorkingDays_Inner](DATEADD(d, 2, @date), @days - 1))
            ELSE (SELECT Date FROM [dbo].[UTL_DateAddWorkingDays_Inner](@date, @days))
        END AS Date
) 
```

如您所见，“外部”函数处理：

*   不添加天数时，返回原始日期。这将保持周六和周日的日期不变。
*   在星期天加上天数时，从星期一开始计数。这需要 1 天。
*   在星期六加上天数时，从星期一开始数。这需要 1 天。
*   在所有其他情况下，执行通常的计算

_

```
CREATE FUNCTION [dbo].[UTL_DateAddWorkingDays_Inner]
(   
    @date datetime,
    @days int
)
RETURNS TABLE AS RETURN 
(
    SELECT 
        DATEADD(d
        , (@days / 5) * 7 
          + (@days % 5) 
          + (CASE WHEN ((@days%5) + DATEPART(dw, @date)) IN (1,7,8,9,10) THEN 2 ELSE 0 END)
        , @date) AS Date
) 
```

“内部”函数类似于 Gordon Linoff 的解决方案，不同之处在于它考虑了跨越周末边界但不跨越整周边界的日期。

最后，我创建了一个[测试脚本](http://pastebin.com/NfMuFtdQ)来测试我的功能。预期值是使用[Patrick McDonald 出色的 C# 等价物生成的，我用](https://stackoverflow.com/questions/1044688/add-business-days-and-getbusinessdays)[这个流行的计算器](http://www.calculatorsoup.com/calculators/time/date-day.php)随机交叉引用了这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:28:29.643

您可以在不借助日历表或用户定义函数的情况下执行此操作：

```
dateadd(d,
        (@input / 5) * 7 + -- get complete weeks out of the way
        mod(@input, 5) + -- extra days
        (case when ((@input%5) + datepart(dw, @dtbegin)%7) in (7, 1, 8) or
                   ((@input%5) + datepart(dw, @dtbegin)%7) < (@input%5)
              then 2
              else 0
         end),
        @dtbegin
       ) 
```

我不是说这很漂亮。但有时算术比连接或循环更可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-28T02:51:01.123

这是我尝试过的：

```
CREATE function [dbo].[DateAddWorkDay]
(@days int,@FromDate Date)
returns Date
as
begin
declare @result date
set @result = (
select b
from
(
    SELECT
    b,
       (DATEDIFF(dd, a, b))
      -(DATEDIFF(wk, a, b) * 2)
      -(CASE WHEN DATENAME(dw, a) = 'Sunday' THEN 1 ELSE 0 END)
      -(CASE WHEN DATENAME(dw, b) = 'Saturday' THEN 1 ELSE 0 END)
      -COUNT(o.Holiday_Date) 
      as workday
    from
    (
    select 
    @FromDate as a,
    dateadd(DAY,num +@days,@FromDate) as b
    from (select row_number() over (order by (select NULL)) as num
          from Information_Schema.columns
         ) t
    where num <= 100 
    ) dt
    left join Holiday o on o.Holiday_Date between a and b and DATENAME(dw, o.Holiday_Date) not in('Saturday','Sunday') 
    where DATENAME(dw, b) not in('Saturday','Sunday')
          and b not in (select Holiday_Date from OP_Holiday where Holiday_Date between a and b) 

    group by a,b
) du
where workday =@days 

)
return @result 
end 
```

哪里`Holiday`有一张桌子可以`holiday_date`作为假期的参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T12:05:57.933

您可以使用下面提到的代码排除周末

```
go
if object_id('UTL_DateAddWorkingDays') is not null
drop function UTL_DateAddWorkingDays
go
create FUNCTION [dbo].[UTL_DateAddWorkingDays]
(   
    @date datetime,
    @daysToAdd int
)
RETURNS date
as
begin
declare @daysToAddCnt int=0,
@Dt datetime
declare @OutTable table
(
    id int identity(1,1),
    WeekDate date,
    DayId int
)
while @daysToAdd>0
begin
set @Dt=dateadd(day,@daysToAddCnt,@date)
--select @daysToAddCnt cnt,@Dt date,DATEPART(weekday,@Dt) dayId,@daysToAdd daystoAdd
    if(DATEPART(weekday,@Dt) <>7 and DATEPART(weekday,@Dt)<>1)
    begin
    insert into @outTable (WeekDate,DayId)
    select @Dt,DATEPART(weekday,DATEADD(day,@daysToAddCnt,@Dt))
    set @daysToAdd=@daysToAdd-1
    end
    set @daysToAddCnt=@daysToAddCnt+1

end
select @Dt=max(WeekDate) from @outTable
return @Dt
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-24T16:43:08.923

我意识到我参加这个派对大约晚了 8 年......但我接受了[马丁的回答](https://stackoverflow.com/a/12515831/1565706)并将其更新为：

**1\. 单个标量函数而不是 2 个嵌套的表值函数**

我使用他的原始测试脚本进行了测试，我的功能也通过了。此外，似乎重建为标量函数对性能有轻微的*积极*影响。两个版本似乎都从“缓冲区缓存”中受益，标量版本的非缓存性能提高了 25%，缓存提高了 40%。*免责声明：我只是运行了两个版本并记录了时间，我没有进行任何体面的性能测试。*

**2\. 包括对 DATEFIRST 的支持是星期一、星期六或星期日**

我觉得 UDF 应该与`datefirst`设置无关。我在欧洲，星期一是这里的默认设置。如果不进行调整，原始功能将无法工作。

根据[维基百科](https://en.wikipedia.org/wiki/Week)的说法，周一、周六和周日是一周中唯一真实的第一天。可以很容易地添加对其他的支持，但会使代码更加庞大，而且我很难想象一个真实的用例。

```
CREATE FUNCTION dbo.fn_addWorkDays
(   
    @date datetime,
    @days int
)
RETURNS DATETIME 
AS
BEGIN

    IF NOT @@DATEFIRST IN (1,6,7) BEGIN --UNSUPPORTED DATE FIRST
        RETURN NULL
    /* MONDAY = FRIST DAY */
    END ELSE IF @days = 0 BEGIN 
        RETURN @date
    END ELSE IF @@DATEFIRST = 1 AND DATEPART(dw, @date) = 7 BEGIN --SUNDAY
        SET @date = DATEADD(d, 1, @date)
        SET @days = @days - 1
    END ELSE IF @@DATEFIRST = 1 AND DATEPART(dw, @date) = 6 BEGIN --SATURDAY
        SET @date = DATEADD(d, 2, @date)
        SET @days = @days - 1

    /* SATURDAY = FRIST DAY */
    END ELSE IF @@DATEFIRST = 7 AND DATEPART(dw, @date) = 2 BEGIN --SUNDAY
        SET @date = DATEADD(d, 1, @date)
        SET @days = @days - 1
    END ELSE IF @@DATEFIRST = 7 AND DATEPART(dw, @date) = 1 BEGIN --SATURDAY
        SET @date = DATEADD(d, 2, @date)
        SET @days = @days - 1

    /* SUNDAY = FRIST DAY */
    END ELSE IF @@DATEFIRST = 7 AND DATEPART(dw, @date) = 1 BEGIN --SUNDAY
        SET @date = DATEADD(d, 1, @date)
        SET @days = @days - 1
    END ELSE IF @@DATEFIRST = 7 AND DATEPART(dw, @date) = 7 BEGIN --SATURDAY
        SET @date = DATEADD(d, 2, @date)
        SET @days = @days - 1

    END 

    DECLARE @return AS dateTime

    SELECT @return  =
        DATEADD(d
        , (@days / 5) * 7
          + (@days % 5)
          + (CASE 
                /* MONDAY = FRIST DAY */
                WHEN @@DATEFIRST = 1 AND ((@days%5) + DATEPART(dw, @date)) IN (6,7,8,9) THEN 2 
                /* SATURDAY = FRIST DAY */
                WHEN @@DATEFIRST = 7 AND ((@days%5) + DATEPART(dw, @date)) IN (1,2,8,9,10) THEN 2 
                /* SUNDAY = FRIST DAY */
                WHEN @@DATEFIRST = 7 AND ((@days%5) + DATEPART(dw, @date)) IN (1,7,8,9,10,11) THEN 2 
                ELSE 0 
            END)
        , @date) 

    RETURN @return 
END 
```

我希望这可能会使某人受益！

# c# - Roslyn 语句创建的字符串转义问题

> ID：11435424
> 
> 赞同：1
> 
> 时间：2012-07-11T14:55:01.903
> 
> 标签：c#, roslyn

我有以下代码，它构建了一个调用 Roslyn 代码的 Roslyn 语句，但我遇到了字符串转义的问题。

这是代码：

```
 var parseStatementArgument = "var statement = Syntax.ParseStatement(\\\"Console.WriteLine (\\\"Hello {0}\\\", parameter1);\\\");";

        var st = Syntax.InvocationExpression(
                                    Syntax.MemberAccessExpression(SyntaxKind.MemberAccessExpression, Syntax.IdentifierName("Syntax"), Syntax.IdentifierName("ParseStatement")))
                                        .AddArgumentListArguments(
                                            Syntax.Argument(Syntax.LiteralExpression(
                                                SyntaxKind.StringLiteralExpression,
                                                Syntax.Literal(
                                                    text: "\"" + parseStatementArgument + "\"",
                                                    value: parseStatementArgument)
                                    )));

        var variableDeclarator = Syntax.VariableDeclarator(Syntax.Identifier("statement"))
            .WithInitializer(Syntax.EqualsValueClause(st));

        var varStatement = Syntax.VariableDeclaration(Syntax.IdentifierName("var"), Syntax.SeparatedList(variableDeclarator));

        var varStatementText = varStatement.Format().GetFormattedRoot().GetFullText() + ";";

        var scriptEngine = new ScriptEngine(
            new [] {
                MetadataReference.Create("Roslyn.Compilers"),
                MetadataReference.Create("Roslyn.Compilers.CSharp"),
                MetadataReference.Create("Roslyn.Services"),
                MetadataReference.Create("Roslyn.Services.CSharp")
            },
            new [] {
                "System",
                "Roslyn.Compilers.CSharp",
                "Roslyn.Scripting",
                "Roslyn.Scripting.CSharp",
                "Roslyn.Services"
            });

        var session = Session.Create();

        scriptEngine.Execute(varStatementText, session);

        scriptEngine.Execute("Console.WriteLine (statement.Format().GetFormattedRoot().GetFullText());", session); 
```

问题是通过脚本引擎执行打印到控制台窗口的“语句”将错过“Hello {0}”字符串周围的反斜杠。如果我在参数中添加双重转义（附加 \ ，Roslyn 将引发有关缺少逗号的编译错误。

如何更新此代码以获取我想要的语句变量的语法正确版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:49:32.457

如何切换到使用逐字字符串级别，并在添加节点时添加另一个级别的转义。

就像是：

```
 var parseStatementArgument = @"var statement = Syntax.ParseStatement(@""Console.WriteLine (""""Hello {0}"""", parameter1);"");";
    var st = Syntax.InvocationExpression(
                                Syntax.MemberAccessExpression(SyntaxKind.MemberAccessExpression, Syntax.IdentifierName("Syntax"), Syntax.IdentifierName("ParseStatement")))
                                    .AddArgumentListArguments(
                                        Syntax.Argument(Syntax.LiteralExpression(
                                            SyntaxKind.StringLiteralExpression,
                                            Syntax.Literal(
                                                text: "@\"" + parseStatementArgument.Replace("\"", "\"\"") + "\"",
                                                value: parseStatementArgument)
                                ))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:15:29.147

基于凯文关于如何替换字符串的提示，我玩过并发现这是一个可行的解决方案，但它引发了另一个问题。

解决方案：

```
 var parseStatementArgument = "var statement = Syntax.ParseStatement(\\\"Console.WriteLine (\\\\\\\"Hello {0}\\\\\\\", parameter1);\\\");";

        var st = Syntax.InvocationExpression(
                                    Syntax.MemberAccessExpression(SyntaxKind.MemberAccessExpression, Syntax.IdentifierName("Syntax"), Syntax.IdentifierName("ParseStatement")))
                                        .AddArgumentListArguments(
                                            Syntax.Argument(Syntax.LiteralExpression(
                                                SyntaxKind.StringLiteralExpression,
                                                Syntax.Literal(
                                                    text: "\"" + parseStatementArgument + "\"",
                                                    value: parseStatementArgument.Replace ("\\\\\\", "\\"))
                                    ))); 
```

现在它正确地输出了一个语法正确且编译良好的代码片段。

它提出的问题是我必须修改源字符串而不是派生字符串才能获得正确的结果。使用 Roslyn 重写代码或生成代码时，不需要双倍或三倍转义字符串文字以使 Roslyn 能够正确处理，也许这是 Roslyn 问题，我希望有人能阐明一个优雅的解决方案适用于所有类型的字符串。

# javascript - 使用变量传递参数？

> ID：11435425
> 
> 赞同：1
> 
> 时间：2012-07-11T14:55:02.210
> 
> 标签：javascript, jquery

这是一个简单的语法问题。

我声明一个变量：

```
<script type="text/javascript">
            var id_1= '<?php echo $id; ?>';
    </script> 
```

然后在外部加载的 js 文件中，我尝试使用变量调用函数（外部 js 文件在 ^^ 变量声明之后加载：

```
 loadComments(id_1); 
```

id_1 按字面意思作为“id_1”传递，不承认它应该是一个变量。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:59:34.597

```
var id_1 = '<?php echo $id; ?>'; 
```

会回显这样的内容：

```
var id_1 = '10'; 
```

在 JavaScript 中被视为字符串。您想改为这样做，以便为 分配一个数字`id_1`：

```
var id_1 = <?php echo $id; ?>; 
```

这将打印出如下内容：

```
var id_1 = 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:56:49.813

php 代码只能由 .php 文件识别。

将您的代码放入 .php 文件并在本地服务器上运行

# paypal - 通过“立即购买”按钮传递地址详细信息

> ID：11435426
> 
> 赞同：1
> 
> 时间：2012-07-11T14:55:03.843
> 
> 标签：paypal

我正在尝试使用适当的 html 变量将我的用户详细信息传递到 Paypal 屏幕，但只有一些变量通过了！？！？！？这让我发疯！订单细节很好。

我的代码是：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
 <input type="hidden" name="cmd" value="_xclick" />
@*Order Details*@
<input type="hidden" name="business" value="sales@xxxxxx.co.uk">
<input type="hidden" name="item_name" value="Order Number 123">
<input type="hidden" name="amount" value="200.00">
<input type="hidden" name="currency_code" value="GBP">
@*Address Stuff *@
<input type="hidden" name="first_name" value="Barry">
<input type="hidden" name="last_name" value="White">
<input type="hidden" name="address1" value="1 Big Street">
<input type="hidden" name="address2" value="Big Mountain">
<input type="hidden" name="city" value="Big City">
<input type="hidden" name="country" value="GB">
<input type="hidden" name="email" value="Bob@bob.com">
<input type="hidden" name="lc" value="UK">
<input type="image" src="https://www.paypalobjects.com/en_US/GB/i/btn/btn_buynowCC_LG.gif" 
border="0" name="submit" alt="PayPal — The safer, easier way to pay online." />
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1" />
</form> 
```

贝宝屏幕显示一些字段（姓名、电子邮件国家！）但不是全部

为什么有些字段填充而有些字段不填充！！！！！！！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:58:22.733

似乎如果您不提供所有地址详细信息，那么它将不会显示任何内容！

如果我添加 zip 字段，那么它会显示地址。

Paypal 集成应该如此简单，但他们的文档是如此糟糕 - 显示了垄断为您做了什么。

根据文档 ffs，所有地址字段都是可选的

# javascript - 选中/取消选中复选框时切换文本

> ID：11435427
> 
> 赞同：0
> 
> 时间：2012-07-11T14:55:04.530
> 
> 标签：javascript

我正在玩的代码是......

```
<!DOCTYPE html>

<html>
<body>

<script>
function changeCell(td)
{
var node = td;
while ( (node = node.parentNode) != null )
{
if ( node.tagName == "TD" )
{
node.style.backgroundColor = td.checked ? "red" : "white";
return;
}
}
// not found...give up?
}
</script>

<style>
td { background-color: white; }
</style>

<form name="gradebook">
<table>
    <tr>
        <td><span id="add_remove">Remove from Calculation:</span></td> <td><input id="pts_earned_1" onclick="changeCell(this);clickCh(this);clickCh_total_pts(this.form.total_pts_1);this.form.total_pts_1.checked = this.checked;" type="checkbox" value="10"> 10  / <span style="display: none"><input id="total_pts_1" type="checkbox" onclick="clickCh_total_pts(this);" value="12"></span> 12<br> </td>
    </tr>
    <tr>
        <td><span id="add_remove">Remove from Calculation:</span></td> <td><input id="pts_earned_2" onclick="changeCell(this);clickCh(this);clickCh_total_pts(this.form.total_pts_2);this.form.total_pts_2.checked = this.checked;" type="checkbox" value="12.5"> 12.5  / <span style="display: none"><input id="total_pts_2" type="checkbox" onclick="clickCh_total_pts(this);" value="14"></span> 14<br></td>
    </tr>
</table>
<br>
<input id="pts_earned_total" type="hidden" value="22.5">
<input id="total_pts" type="hidden" value="26">
<div id="pts_earned_display">Pts. Earned: echo the initial pts. earned</div>
<div id="total_pts_display">Total Pts.: echo the initial total pts.</div>
<div id="percentage">Overall Percentage.: echo the initial percent</div>
</form>

<script type="text/javascript">
function clickCh(caller) {

  var pts_earned = document.getElementById("pts_earned_total").value*1;
  if(caller.checked){ pts_earned -= caller.value*1; }
               else { pts_earned += caller.value*1; }
  document.getElementById('pts_earned_total').value = pts_earned;
  document.getElementById('pts_earned_display').innerHTML = 'Pts. Earned: '+pts_earned.toFixed(2);
}

function clickCh_total_pts(caller) {

  var pts_earned = document.getElementById("pts_earned_total").value*1;
  var total_pts = document.getElementById("total_pts").value*1;
  if(caller.checked){ total_pts += caller.value*1; 
                      document.getElementById('add_remove').innerHTML = 'Remove from Calculation:';
                    }
               else { total_pts -= caller.value*1; 
                      document.getElementById('add_remove').innerHTML = 'Add to Calculation:';
                    }
  document.getElementById('total_pts').value = total_pts;
  document.getElementById('total_pts_display').innerHTML = 'Total Pts.: '+total_pts.toFixed(2);
  document.getElementById('percentage').innerHTML = 'Overall Percentage: '+Math.round((pts_earned/total_pts)*100*10)/10+'%';
}

</script>
</body>
</html> 
```

选中复选框后，我希望文本在刚刚单击的行中的复选框的“从计算中删除：”和“添加到计算：”之间切换。

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:59:03.957

在复选框上尝试使用 onchange 而不是 onclick。

看看下面，问题是两次使用相同的 id。它会抓住它的第一次使用。所以我将id add_remove 更改为add_remove_1 和add_remove_2。然后修改 js 以使用调用方 id 来确定要引用哪一个。

```
<!DOCTYPE html>

<html>
<body>

<script>
    function changeCell(td) {
        var node = td;
        while ((node = node.parentNode) != null) {
            if (node.tagName == "TD") {
                node.style.backgroundColor = td.checked ? "red" : "white";
                return;
            }
        }
        // not found...give up?
    }
</script>

<style>
td { background-color: white; }
</style>

<form name="gradebook">
<table>
    <tr>
        <td><span id="add_remove_1">Remove from Calculation:</span></td> <td><input id="pts_earned_1" onclick="changeCell(this);clickCh(this);clickCh_total_pts(this.form.total_pts_1);this.form.total_pts_1.checked = this.checked;" type="checkbox" value="10"> 10  / <span style="display: none"><input id="total_pts_1" type="checkbox" onchange="clickCh_total_pts(this);" value="12"></span> 12<br> </td>
    </tr>
    <tr>
        <td><span id="add_remove_2">Remove from Calculation:</span></td> <td><input id="pts_earned_2" onclick="changeCell(this);clickCh(this);clickCh_total_pts(this.form.total_pts_2);this.form.total_pts_2.checked = this.checked;" type="checkbox" value="12.5"> 12.5  / <span style="display: none"><input id="total_pts_2" type="checkbox" onchange="clickCh_total_pts(this);" value="14"></span> 14<br></td>
    </tr>
</table>
<br>
<input id="pts_earned_total" type="hidden" value="22.5">
<input id="total_pts" type="hidden" value="26">
<div id="pts_earned_display">Pts. Earned: echo the initial pts. earned</div>
<div id="total_pts_display">Total Pts.: echo the initial total pts.</div>
<div id="percentage">Overall Percentage.: echo the initial percent</div>
</form>

<script type="text/javascript">
    function clickCh(caller) {

        var pts_earned = document.getElementById("pts_earned_total").value * 1;
        if (caller.checked) { pts_earned -= caller.value * 1; }
        else { pts_earned += caller.value * 1; }
        document.getElementById('pts_earned_total').value = pts_earned;
        document.getElementById('pts_earned_display').innerHTML = 'Pts. Earned: ' + pts_earned.toFixed(2);
    }

    function clickCh_total_pts(caller) {
        var addRemoveId = caller.id.replace("total_pts", "add_remove");

        var pts_earned = document.getElementById("pts_earned_total").value * 1;
        var total_pts = document.getElementById("total_pts").value * 1;
        if (caller.checked) {
            total_pts += caller.value * 1;
            document.getElementById(addRemoveId).innerHTML = 'Remove from Calculation:';
        } else {
            total_pts -= caller.value * 1;
            document.getElementById(addRemoveId).innerHTML = 'Add to Calculation:';
        }
        document.getElementById('total_pts').value = total_pts;
        document.getElementById('total_pts_display').innerHTML = 'Total Pts.: ' + total_pts.toFixed(2);
        document.getElementById('percentage').innerHTML = 'Overall Percentage: ' + Math.round((pts_earned / total_pts) * 100 * 10) / 10 + '%';
    }

</script>
</body> 
```

# ruby-on-rails - Rails shopify 应用程序中的 Webhooks 和延迟作业

> ID：11435428
> 
> 赞同：2
> 
> 时间：2012-07-11T14:55:10.073
> 
> 标签：ruby-on-rails, shopify

您好我正在尝试将 webhook 添加到使用 shopify gem 创建的 shopify 应用程序中。

直到现在一切正常。在我的 webhook_controller 中，我有一个连接到商店的前置过滤器： before_filter :connect_to_store

```
 def product_new
      data = ActiveSupport::JSON.decode(request.body.read)
      shopify_id = data["id"]

      Product.new_from_shopify(@s, shopify_id)

      head :ok
    end

    private

    def connect_to_store

      shop_url = request.headers['HTTP_X_SHOPIFY_SHOP_DOMAIN']
      shop_url = ("http://" + shop_url)

      @s = Shop.find_by_url(shop_url)

      session = ShopifyAPI::Session.new(@s.url, @s.access_token)
      session.valid?
      ShopifyAPI::Base.activate_session(session)

    end 
```

通过这种方式，我可以轻松访问我的 Product 模型中的 Shopify API：

```
 def self.new_from_shopify(shop, shopify_id)

      shopify_p = ShopifyAPI::Product.find(shopify_id)

      # creates the local product
      local_p = Product.new
      local_p.shopify_id = shopify_p.id
      local_p.name = shopify_p.title
      local_p.shop = shop
      local_p.save

  end 
```

到现在为止还挺好。

问题是当我尝试将 delay_job 添加到组合中时。如果我尝试改变

```
Product.new_from_shopify(@s, shopify_id) 
```

到

```
Product.delay.new_from_shopify(@s, shopify_id) 
```

然后延迟的作业无法再访问 Shopify API 连接并给我一个错误。

在这种情况下，最佳做法是什么？

**更新**

一种可能的解决方案是在我的 Shop 模型中创建一个新方法：

```
 def connect_to_store
      session = ShopifyAPI::Session.new(self.url, self.access_token)
      session.valid?
      ShopifyAPI::Base.activate_session(session)
    end 
```

然后在我的产品模型操作中调用此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:20:35.160

由于这是一个将在控制器范围之外执行的作业，因此它必须知道如何在没有此方法的情况下连接到 shopify API。

最好的解决方案是将设置 Shopify api 连接的代码提取到控制器和延迟作业都可以访问的单独模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T05:57:07.810

我在这里建议的相同方法也适用于工作人员：[https ://stackoverflow.com/a/11445727/1440757](https://stackoverflow.com/a/11445727/1440757)

# jquery - 使用 JSON 的 jQuery UI 自动完成

> ID：11435433
> 
> 赞同：40
> 
> 时间：2012-07-11T14:55:19.480
> 
> 标签：jquery, json, jquery-ui, autocomplete, jquery-ui-autocomplete

好吧，我一直在为此绞尽脑汁（我对此很糟糕），但是我尝试了所有我能读的东西，但仍然无法让它工作。

尝试使用 jquery ui 进行自动完成

我的 json 看起来像这样

```
{"dealers":
     {
         "1156":"dealer 1",
         "1122":"dealer 2",
         "1176":"dealer 3",
         "1491":"dealer 4",
         "1463":"dealer 5",
         "269":"dealer 6"
    }
} 
```

我正在尝试将此信息用作自动完成的来源。我得到响应对象就好了我只是无法以正确的格式获取它，以便我可以将“###”放置在与“值”相关的隐藏字段中，该字段需要显示为落下。

一直在尝试一百万种不同的方式，但最近的尝试如下

```
function ajaxCall() {
    $.getJSON("/example/location/example.json?term=" + $('#dealerName').val(),
        function(data) {
        $.each(data.dealers, function(k, v) {                
                alert(k + ' : ' + v);
        });
    });        
}

$('#dealerName').autocomplete({
    source: ajaxCall,
    minLength: 2,
    delay: 100
}); 
```

请非常感谢！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-11T15:01:38.347

您需要将要返回的对象转换为 jQueryUI 期望格式的数组。

您可以使用[`$.map`](http://api.jquery.com/jquery.map)将`dealers`对象转换为该数组。

```
$('#dealerName').autocomplete({
    source: function (request, response) {
        $.getJSON("/example/location/example.json?term=" + request.term, function (data) {
            response($.map(data.dealers, function (value, key) {
                return {
                    label: value,
                    value: key
                };
            }));
        });
    },
    minLength: 2,
    delay: 100
}); 
```

请注意，当您选择一个项目时，“键”将被放置在文本框中。您可以通过调整回调函数返回的`label`和`value`属性来改变这一点。`$.map`

或者，如果您有权访问生成 JSON 的服务器端代码，则可以更改返回数据的方式。只要数据：

*   是具有`label`属性、`value`属性或两者兼有的对象数组，或
*   是一个简单的字符串数组

换句话说，如果您可以像这样格式化数据：

```
[{ value: "1463", label: "dealer 5"}, { value: "269", label: "dealer 6" }] 
```

或这个：

```
["dealer 5", "dealer 6"] 
```

然后你的 JavaScript 就变得简单多了：

```
$('#dealerName').autocomplete({
    source: "/example/location/example.json"
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-09T16:40:08.347

我知道它已经被回答了。但我希望这对将来的人有所帮助，并节省很多时间和痛苦。

完整代码如下：这是我为文本框所做的，以使其在 CiviCRM 中自动完成。希望它可以帮助某人

```
CRM.$( 'input[id^=custom_78]' ).autocomplete({
            autoFill: true,
            select: function (event, ui) {
                    var label = ui.item.label;
                    var value = ui.item.value;
                    // Update subject field to add book year and book product
                    var book_year_value = CRM.$('select[id^=custom_77]  option:selected').text().replace('Book Year ','');
                    //book_year_value.replace('Book Year ','');
                    var subject_value = book_year_value + '/' + ui.item.label;
                    CRM.$('#subject').val(subject_value);
                    CRM.$( 'input[name=product_select_id]' ).val(ui.item.value);
                    CRM.$('input[id^=custom_78]').val(ui.item.label);
                    return false;
            },
            source: function(request, response) {
                CRM.$.ajax({
                    url: productUrl,
                        data: {
                                        'subCategory' : cj('select[id^=custom_77]').val(),
                                        's': request.term,
                                    },
                    beforeSend: function( xhr ) {
                        xhr.overrideMimeType( "text/plain; charset=x-user-defined" );
                    },

                    success: function(result){
                                result = jQuery.parseJSON( result);
                                //console.log(result);
                                response(CRM.$.map(result, function (val,key) {
                                                         //console.log(key);
                                                         //console.log(val);
                                                         return {
                                                                 label: val,
                                                                 value: key
                                                         };
                                                 }));
                    }
                })
                .done(function( data ) {
                    if ( console && console.log ) {
                     // console.log( "Sample of dataas:", data.slice( 0, 100 ) );
                    }
                });
            }
  }); 
```

关于我如何在自动完成中将数据返回到这个 jquery ajax 调用的 PHP 代码：

```
/**
 * This class contains all product related functions that are called using AJAX (jQuery)
 */
class CRM_Civicrmactivitiesproductlink_Page_AJAX {
  static function getProductList() {
        $name   = CRM_Utils_Array::value( 's', $_GET );
    $name   = CRM_Utils_Type::escape( $name, 'String' );
    $limit  = '10';

        $strSearch = "description LIKE '%$name%'";

        $subCategory   = CRM_Utils_Array::value( 'subCategory', $_GET );
    $subCategory   = CRM_Utils_Type::escape( $subCategory, 'String' );

        if (!empty($subCategory))
        {
                $strSearch .= " AND sub_category = ".$subCategory;
        }

        $query = "SELECT id , description as data FROM abc_books WHERE $strSearch";
        $resultArray = array();
        $dao = CRM_Core_DAO::executeQuery( $query );
        while ( $dao->fetch( ) ) {
            $resultArray[$dao->id] = $dao->data;//creating the array to send id as key and data as value
        }
        echo json_encode($resultArray);
    CRM_Utils_System::civiExit();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-27T06:08:02.247

我使用此脚本进行自动完成...

```
$('#custmoers_name').autocomplete({
    source: function (request, response) {

        // $.getJSON("<?php echo base_url('index.php/Json_cr_operation/autosearch_custmoers');?>", function (data) {
          $.getJSON("Json_cr_operation/autosearch_custmoers?term=" + request.term, function (data) {
          console.log(data);
            response($.map(data, function (value, key) {
                console.log(value);
                return {
                    label: value.label,
                    value: value.value
                };
            }));
        });
    },
    minLength: 1,
    delay: 100
}); 
```

我的 json 返回：-`[{"label":"Mahesh Arun Wani","value":"1"}]`搜索后`m`

但它显示在下拉列表中`[object object]`...

# ruby-on-rails - RoR 入门指南：Rake db:migrate undefined method 'reference'

> ID：11435434
> 
> 赞同：6
> 
> 时间：2012-07-11T14:55:25.180
> 
> 标签：ruby-on-rails, rake, dbmigrate

我正在关注[RoR 入门教程](http://guides.rubyonrails.org/getting_started.html#adding-a-second-model)。创建帖子后，我现在添加第二个模型来创建评论。但是，当我尝试 rake 时，`db:migrate`我得到了这个：

```
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
==  CreateComments: migrating =================================================
-- create_table(:comments)
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `reference' for #<ActiveRecord::ConnectionAdapters::TableDefinition:0x1084a24d8>
/Users/Fryed/rails/blog/db/migrate/20120710225337_create_comments.rb:6:in `change'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/schema_statements.rb:160:in `create_table'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:466:in `send'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:466:in `method_missing'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:438:in `say_with_time'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:293:in `measure'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:438:in `say_with_time'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:458:in `method_missing'
/Users/Fryed/rails/blog/db/migrate/20120710225337_create_comments.rb:3:in `change'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:407:in `migrate'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/benchmark.rb:293:in `measure'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:407:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:123:in `with_connection'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:389:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:528:in `__send__'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:528:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:720:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `call'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `ddl_transaction'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/transactions.rb:208:in `transaction'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:775:in `ddl_transaction'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:719:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:700:in `each'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:700:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:570:in `up'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/migration.rb:551:in `migrate'
/Library/Ruby/Gems/1.8/gems/activerecord-3.2.6/lib/active_record/railties/databases.rake:153
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23
Tasks: TOP => db:migrate 
```

我在跑：

耙 0.9.2.2。红宝石 1.8.7 轨道 3.2.6

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T15:12:31.367

带有引用的迁移使用`references`帮助器，您可能只是忘记将 the`s`放在最后。

找到有问题的迁移`db/migrate/20120710225337_create_comments.rb`并从 更改`reference`为`references`

# regex - 正则表达式中的前瞻总是不会捕获还是取决于它？

> ID：11435436
> 
> 赞同：6
> 
> 时间：2012-07-11T14:55:28.820
> 
> 标签：regex

我一直在阅读本网站和网络上关于非捕获组的一些文章（例如[http://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)和[http://www.asiteaboutnothing.net/regexp/ regex-disambiguation.html](http://www.asiteaboutnothing.net/regexp/regex-disambiguation.html) , ["?:^" 正则表达式是什么意思？](https://stackoverflow.com/questions/603069/what-does-the-regular-expression-mean) ,[什么是非捕获组？问号后跟冒号 (?:) 是什么意思？](https://stackoverflow.com/questions/3512471/non-capturing-group)）

我很清楚 (?:foo) 的含义。我不清楚的是（？= foo）。(?=foo) 是否也始终是非捕获组，还是取决于？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T15:06:55.427

不，`(?=foo)`不会捕获`"foo"`。任何环视断言（正面和正面的前后观察）都不会捕获，而只会检查文本的存在（或不存在）。

例如，正则表达式：

```
(X(?=\d+)) 
```

`"X"`仅当其后有一位或多位数字时才匹配。但是，这些数字不是匹配组 1 的一部分。

您*可以**在*前瞻中定义捕获以捕获它。例如，正则表达式：

```
(X(?=(\d+))) 
```

`"X"`仅当其后有一位或多位数字时才匹配。这些数字被捕获在匹配组 2 中。

一个 PHP 演示：

```
<?php
$s = 'X123';
preg_match_all('/(X(?=(\d+)))/', $s, $matches);
print_r($matches);
?> 
```

将打印：

```
大批
(
    [0] => 数组
        (
            [0] => X
        )

    [1] => 数组
        (
            [0] => X
        )

    [2] => 数组
        (
            [0] => 123
        )

)
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T15:00:57.297

环视总是非捕获和零宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T15:01:19.313

开始的每个组`?`都不会被捕获，尽管只能`(?:foo)`作为常规组工作。

# plone - PloneFormGen 拒绝在一个站点上发送邮件

> ID：11435437
> 
> 赞同：1
> 
> 时间：2012-07-11T14:55:39.593
> 
> 标签：plone, mailer, ploneformgen

我们有一台运行 Plone 4 的服务器，它托管了我们的许多站点，我们刚刚注意到它没有从 PloneFormGen 发送任何邮件。

我试过了：

*   重新创建表单
*   在表单中删除和重新创建邮件
*   从地址更改站点（避免任何垃圾邮件问题，例如发送到同一地址和从同一地址发送）

此服务器上的所有其他站点都可以从 PFG 发送邮件，我不太确定要检查哪些日志文件，但下面是我的 events.log 文件的最后几行，其中提到了一些关于缺少适配器的事情告诉，有人可以翻译这个表格吗？：

```
 ------
2012-07-11T15:13:38 WARNING PloneFormGen Designated action adapter 'formsavedataadapter.2012-07-03.5018819612' is missing; ignored.
------
2012-07-11T15:13:38 WARNING PloneFormGen Designated action adapter 'formmaileradapter.2012-07-11.9678428439' is missing; ignored.
------
2012-07-11T15:13:38 WARNING PloneFormGen Designated action adapter 'formmaileradapter.2012-07-11.9935785303' is missing; ignored.
------
2012-07-11T15:13:38 ERROR MailDataManager [Errno -2] Name or service not known
Traceback (most recent call last):
  File "/usr/local/Plone/buildout-cache/eggs/Plone-4.0.4-py2.6.egg/Products/CMFPlone/patches/sendmail.py", line 9, in _catch
    return func(*args, **kwargs)
  File "/usr/local/Plone/buildout-cache/eggs/zope.sendmail-3.5.2-py2.6.egg/zope/sendmail/mailer.py", line 46, in send
    connection = self.smtp(self.hostname, str(self.port))
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 273, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/socket.py", line 547, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno -2] Name or service not known
------
2012-07-11T15:13:38 ERROR MailDataManager [Errno -2] Name or service not known
Traceback (most recent call last):
  File "/usr/local/Plone/buildout-cache/eggs/Plone-4.0.4-py2.6.egg/Products/CMFPlone/patches/sendmail.py", line 9, in _catch
    return func(*args, **kwargs)
  File "/usr/local/Plone/buildout-cache/eggs/zope.sendmail-3.5.2-py2.6.egg/zope/sendmail/mailer.py", line 46, in send
    connection = self.smtp(self.hostname, str(self.port))
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 273, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/socket.py", line 547, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno -2] Name or service not known
------
2012-07-11T15:30:18 INFO CMFFormController /usr/local/Plone/buildout-cache/eggs/Products.PloneFormGen-1.7a2-py2.6.egg/Products/PloneFormGen/skins/PloneFormGen/fg_base_view_p3.cpt: No default action specified for status success, content type ANY.  Users of IE can submit pages using the return key, resulting in no button in the REQUEST.  Please specify a default action for this case. 

------
2012-07-11T15:30:18 INFO CMFFormController /usr/local/Plone/buildout-cache/eggs/Products.PloneFormGen-1.7a2-py2.6.egg/Products/PloneFormGen/skins/PloneFormGen/fg_embedded_view_p3.cpt: No default action specified for status success, content type ANY.  Users of IE can submit pages using the return key, resulting in no button in the REQUEST.  Please specify a default action for this case. 

------
2012-07-11T15:30:32 INFO CMFFormController /usr/local/Plone/buildout-cache/eggs/Products.PloneFormGen-1.7a2-py2.6.egg/Products/PloneFormGen/skins/PloneFormGen/fg_base_view_p3.cpt: No default action specified for status success, content type ANY.  Users of IE can submit pages using the return key, resulting in no button in the REQUEST.  Please specify a default action for this case. 

------
2012-07-11T15:30:32 INFO CMFFormController /usr/local/Plone/buildout-cache/eggs/Products.PloneFormGen-1.7a2-py2.6.egg/Products/PloneFormGen/skins/PloneFormGen/fg_embedded_view_p3.cpt: No default action specified for status success, content type ANY.  Users of IE can submit pages using the return key, resulting in no button in the REQUEST.  Please specify a default action for this case. 

------
2012-07-11T15:39:18 WARNING PloneFormGen Designated action adapter 'formsavedataadapter.2012-07-03.5018819612' is missing; ignored.
------
2012-07-11T15:39:18 WARNING PloneFormGen Designated action adapter 'formmaileradapter.2012-07-11.9678428439' is missing; ignored.
------
2012-07-11T15:39:18 WARNING PloneFormGen Designated action adapter 'formmaileradapter.2012-07-11.9935785303' is missing; ignored.
------
2012-07-11T15:39:18 ERROR MailDataManager [Errno -2] Name or service not known
Traceback (most recent call last):
  File "/usr/local/Plone/buildout-cache/eggs/Plone-4.0.4-py2.6.egg/Products/CMFPlone/patches/sendmail.py", line 9, in _catch
    return func(*args, **kwargs)
  File "/usr/local/Plone/buildout-cache/eggs/zope.sendmail-3.5.2-py2.6.egg/zope/sendmail/mailer.py", line 46, in send
    connection = self.smtp(self.hostname, str(self.port))
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 273, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/socket.py", line 547, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno -2] Name or service not known
------
2012-07-11T15:39:18 ERROR MailDataManager [Errno -2] Name or service not known
Traceback (most recent call last):
  File "/usr/local/Plone/buildout-cache/eggs/Plone-4.0.4-py2.6.egg/Products/CMFPlone/patches/sendmail.py", line 9, in _catch
    return func(*args, **kwargs)
  File "/usr/local/Plone/buildout-cache/eggs/zope.sendmail-3.5.2-py2.6.egg/zope/sendmail/mailer.py", line 46, in send
    connection = self.smtp(self.hostname, str(self.port))
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/smtplib.py", line 273, in _get_socket
    return socket.create_connection((port, host), timeout)
  File "/usr/local/Plone/Python-2.6/lib/python2.6/socket.py", line 547, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
gaierror: [Errno -2] Name or service not known 
```

我可以提供其他信息，如果可能的话，请告诉我在哪里看。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:41:45.897

此回溯意味着您的服务器无法连接邮件服务器：

```
 gaierror: [Errno -2] Name or service not known 
```

这是操作系统级别的故障。邮件服务器名称的 DNS 解析失败。原因可能是

*   防火墙服务器

*   配置错误的 DNS

*   或如上所述的错误输入的邮件服务器名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T20:43:05.317

也许该站点在站点设置>邮件中配置了不正确的邮件服务器？

# file - Maven 插件工作目录不恒定

> ID：11435438
> 
> 赞同：0
> 
> 时间：2012-07-11T14:55:41.437
> 
> 标签：file, maven, plugins, maven-2, classpath

我编写了一个 Maven 插件，它在我的项目的类路径上创建了一些 XML 文件。Maven 项目相当复杂，有一个主项目和许多子项目（想想更大应用程序的服务）。

该插件在 pom.xml 中接受一个目录参数，它与类路径相关，如下所示：

```
<docDestination>src/main/webapp/static/</docDestination> 
```

但是，当我尝试通过 访问此文件夹时，生成的目录取决于我从中运行触发插件`new File(docDestination)`的命令的项目（或子项目） 。`mvn install`

该插件仅在`pom.xml`其中一个子项目中指定，但如果我从父项目运行 mvn-install，它会在`src/main/...`父应用程序的文件夹中创建 XML 文件。如何让插件使用声明它的项目的文件系统而不是父项目的文件系统？

我应该注意，如果我导航到终端中的子项目并`mvn install`在该目录中运行，文件将在正确的位置创建，这解释了我的帖子的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:09:36.323

使用 ${basedir} 变量：

```
<docDestination>${basedir}/src/main/webapp/static</docDestination> 
```

这应该使用各个模块当前使用的 basedir（无论这是顶级模块还是子模块）。

# javascript - 使用 HTML5 的跨平台移动应用程序

> ID：11435444
> 
> 赞同：3
> 
> 时间：2012-07-11T14:55:59.143
> 
> 标签：javascript, css, html, cross-platform, mosync

我被要求提供一个不依赖任何平台的带有 HTML5/JS/CSS 的平板电脑应用程序。要求：

*   跨平台手机/平板应用
*   离线功能和存储（它应该在缺乏互联网连接的情况下工作，并且能够在连接后同步）
*   实时数据（它应该能够显示传感器值的任何微小变化）
*   我应该能够连接到 CAN 接口并获取传感器值和 ECU 数据。因为这部分我还没有想出任何解决方案，所以我正在考虑蓝牙。但是，HTML5 不支持蓝牙。

如果 HTML5/JS/CSS 可以处理这个要求（尤其是蓝牙），我很乐意给我一些远见

另一个问题是，是否可以不使用任何框架，如 PhoneGap、RHoMobile ......而只使用原始 HTML5/CSS/JS 开发跨平台应用程序并满足所有要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:14:20.153

你看过PhoneGap / Cordova了吗？

您可以使用 HTML5、JS 和 CSS 轻松创建跨平台移动应用程序。

[http://phonegap.com](http://phonegap.com)

内置 API 提供对大多数设备原生特性和功能的访问。您可以使用 localStorage 或 SQLite 数据库管理离线存储，并可以检测网络连接状态以确定您是否离线/在线以及您的连接级别（Edge、3G、4G、WiFi）。结合这些，您可以管理数据同步。

至于蓝牙，PhoneGap API 不支持开箱即用，但它具有高度可扩展性，因此开发人员可以创建自己的插件来处理缺失或需要的功能。

社区很棒，许多插件已编译到 GitHub 上的中央存储库中：[https ://github.com/phonegap/phonegap-plugins](https://github.com/phonegap/phonegap-plugins)

我知道该存储库中有一个适用于 Android 的蓝牙插件。

您还可以很容易地编写自己的插件来添加您需要的任何额外功能：

[http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

[http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html)

** 编辑 **

在我写了这个提到PhoneGap的答案之后，您发布了对问题的修正。诚实的答案是否定的，如果没有与本机设备功能交互的框架，原始 HTML5、CSS 和 JS 将无法处理蓝牙等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:46:28.787

你不能。纯 Web 应用程序不能，也可能永远不能使用蓝牙。

[HTML5 蓝牙和音频](https://stackoverflow.com/questions/3063277/html5-bluetooth-and-audio)

之前开发过Web App，我可以告诉你，任何涉及离线的事情都必须简单，并且使用设备硬件已经过时了。

查看框架，您可能会得到一些工作。但从一开始就开发原生应用程序可能是一个更好/更现实的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:35:07.990

经过大量搜索，我想到了[MoSync](http://www.mosync.com/)，它是一个跨平台的 SDK，旨在开发不同的移动应用程序。我相信 MoSync 可以成为这个问题的最佳答案，因为它确实是一个丰富的 SDK（C、C++、HTML、JavaScript），并且拥有出色的工具和社区，它们会尽力帮助您。

有关更多信息，我鼓励开发人员查看[此处](https://stackoverflow.com/questions/12750459/whats-idea-about-mosync/14234182#14234182)或访问他们的网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T06:39:15.443

大多数未来的移动应用程序将使用 HTML5 开发。HTML5 标准被迅速采用，这些标准支持 GPS、加速度计、相机、存储等电话功能。

如果您想使用任何设备功能，我会建议您使用 PhoneGap。

# php - 关闭窗口时更改 MySQL 数据库

> ID：11435445
> 
> 赞同：1
> 
> 时间：2012-07-11T14:56:03.680
> 
> 标签：php, mysql

我使用 php 和 mysql 制作了这个小聊天应用程序，我想知道用户是否可以在关闭窗口后立即注销。我尝试使用时间戳，但我无法让它工作。如果有人有一点代码，我不介意得到它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:17:55.447

Codeigniters [Session 类](http://codeigniter.com/user_guide/libraries/sessions.html)被称为`sess_expire_on_close`所以它是可能的。你可以在这里看看这个类：[https ://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session.php](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:30:02.820

正如评论中所建议的 - 彗星是正确的技术。它基本上是源源不断的 AJAX 调用，您需要严重依赖短超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:35:32.073

我认为，如果您有聊天应用程序，最好将其视为服务。然后您的服务可以负责会话管理。然后客户端可以定期调用以传达它仍然存在。如果服务在单位时间内没有收到“仍然在这里”令牌`n`，那么服务可以将用户的状态更新为已注销。

# sql - 寻找可能的查询以显示类似于 sql server 2005 中的数据透视表的输出

> ID：11435449
> 
> 赞同：2
> 
> 时间：2012-07-11T14:56:15.850
> 
> 标签：sql, sql-server, sql-server-2005, pivot

我有一张如下表

```
column_date | color | qty | supplier | location
1 June 2012 | red   | 2   | XY       | A wing
1 June 2012 | red   | 1   | AB       | A wing
1 June 2012 | blue  | 4   | CD       | A wing
1 June 2012 | blue  | 1   | XY       | B wing
2 June 2012 | yellow| 13  | CD       | B wing
2 June 2012 | green | 45  | CD       | A wing
2 June 2012 | blue  | 32  | AB       | A wing
2 June 2012 | red   | 37  | XY       | A wing
2 June 2012 | red   | 2   | XY       | B wing
2 June 2012 | red   | 1   | AB       | A wing
2 June 2012 | blue  | 4   | CD       | A wing
3 June 2012 | red   | 1   | AB       | B wing
3 June 2012 | blue  | 4   | CD       | A wing
3 June 2012 | blue  | 1   | XY       | B wing
3 June 2012 | yellow| 13  | CD       | B wing
3 June 2012 | green | 45  | CD       | A wing
3 June 2012 | blue  | 32  | AB       | A wing 
```

我想有一个像下面这样的输出。我不确定在查询中是否可能，如果可能的话，我不知道如何开始。我正在寻找您的建议或可能的查询来显示这样的输出。谢谢你。

```
 Supplier
Date           |        XY         |        CD          |       AB
               | A wing  | B wing  | A wing  | B wing   | A wing  | B wing
1 June 2012    |  2      |  1      |  4      | 0        | 1       | 0
2 June 2012    | 37      |  2      |  49     | 13       | 33      | 0
3 June 2012    | 0       |  1      |  49     | 13       | 32      | 1
Total          | 39      |  4      | 102     | 26       | 66      | 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:20:15.477

```
SELECT column_date,
    MAX(CASE WHEN supplier = 'XY' AND location = 'A wing' THEN qty END) AS 'XY A wing',
    MAX(CASE WHEN supplier = 'XY' AND location = 'B wing' THEN qty END) AS 'XY B wing',
    MAX(CASE WHEN supplier = 'CD' AND location = 'A wing' THEN qty END) AS 'CD A wing',
    MAX(CASE WHEN supplier = 'CD' AND location = 'B wing' THEN qty END) AS 'CD B wing',
    MAX(CASE WHEN supplier = 'AB' AND location = 'A wing' THEN qty END) AS 'AB A wing',
    MAX(CASE WHEN supplier = 'AB' AND location = 'B wing' THEN qty END) AS 'AB B wing'
FROM @t
GROUP BY column_date 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/75130)

**更新：**您在这里寻找的是如何[*旋转*](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)您的列，但您的查询的问题是没有聚合列可以聚合其他列`GROUP BY column_date`。既然您需要`GROUP BY column_date`，那么其他列需要在聚合函数中`GROUP BY clause`或包含在聚合函数中。因此，我使用聚合函数`MAX`作为解决方法。如果您知道要正手旋转的值，这很好。但是，如果您想旋转未知或更改数量的值，那么您需要动态地执行此操作。尝试在 SQL Server 中搜索*Dynamic Pivoting*，您会发现很多使用动态 SQL 的解决方法。例如看这两篇文章：

*   [SQL Server 中的动态透视。](http://www.codeproject.com/Articles/27776/Dynamic-Pivoting-in-SQL-Server)
*   [动态交叉表/数据透视表。](http://www.sqlteam.com/article/dynamic-cross-tabs-pivot-tables)

# c++ - 如何在 Linux (Ubuntu) 上将 SDL 静态链接到我的 a.out

> ID：11435451
> 
> 赞同：2
> 
> 时间：2012-07-11T14:56:20.613
> 
> 标签：c++, sdl, executable, end-user

让我们看一下这个片段：

```
#include "SDL/SDL.h" 
int main( int argc, char* args[] ) 
{ 
    SDL_Init( SDL_INIT_EVERYTHING ); 
    SDL_Quit();
    return 0; 
} 
```

编译命令将是：

```
g++ -o myprogram mysource.cpp -lSDL 
```

如何在我的可执行文件中“包含”SDL，以便另一个最终用户可以立即执行它（无需安装 SDL 甚至重新编译我的源代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:05:26.380

尝试：

```
g++ -o myprogram mysource.cpp -Wl,-Bstatic \
    $(sdl-config --static-libs) -Wl,-Bdynamic 
```

# events - liferay 事件监听器

> ID：11435452
> 
> 赞同：0
> 
> 时间：2012-07-11T14:56:21.613
> 
> 标签：events, liferay, listener

我有一些艰巨的任务，我需要将使用 jboss 门户 2.7.2 的项目的某些部分更改为 liferay。Ofc 少改好，但所有 jboss 门户必须消失。我需要以下 2 个替换类。所以我的问题是如何使用liferay门户实现（或不实现（如果已经存在））监听器，它将知道某人何时尝试2登录。无需重新加载等即可登录。如果liferay中有一些专业的事件监听器，那就太好了不仅可以识别其他事件，而且我会很高兴获得所有帮助。4 如果有人知道在 liferay 中替换 4 个，这门课的其余部分会很好。

```
import org.jboss.portal.api.event.PortalEvent;
import org.jboss.portal.api.event.PortalEventContext;
import org.jboss.portal.api.event.PortalEventListener;
import org.jboss.portal.api.session.PortalSession;
import org.jboss.portal.api.user.event.UserAuthenticationEvent;
import org.jboss.portal.identity.IdentityException;
import org.jboss.portal.identity.NoSuchUserException;
import org.jboss.portal.identity.User;
import org.jboss.portal.identity.UserModule;
import org.jboss.portal.identity.UserProfileModule; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:18:48.160

Liferay 也有类似的方法。创建一个 Hook 并添加类似[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties%3C-e-1的属性](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties%3C-e-1)

使用属性，您可以指定门户事件应调用的类：

```
login.events.post=my.package.AfterLoginHandler 
```

使用相同的方法，您可以收听实体的创建/更改/删除：

```
value.object.listener.com.liferay.portal.model.User=my.package.UserListener    
value.object.listener.com.liferay.portal.model.Layout=my.package.LayoutListener
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T05:35:48.940

Liferay 确实允许向登录事件添加处理程序。更多信息可以查看@http [://www.learnercorner.in/topics? showTopic=16001](http://www.learnercorner.in/topics?showTopic=16001)

# hibernate - 使用级联删除时如何处理 Hibernate 中的可选关系？

> ID：11435456
> 
> 赞同：2
> 
> 时间：2012-07-11T14:56:28.247
> 
> 标签：hibernate, foreign-key-relationship, nhibernate-cascade

很抱歉，如果这很明显，但我们已经为此绞尽脑汁好几天了。

考虑三个实体，Parent、Child 和 X：

Parent 与 Child 具有 @OneToMany 关系，设置为级联删除和孤儿删除 = true。

Child 与 Parent 有一个 @ManyToOne 关系，可选 = false，进一步的关系是 @NotNull 和 @JoinColumn 有 nullable = false。

X 与 Child 具有 @ManyToOne 关系，可选 = true。

这是我们在删除父对象时最理想的情况。我们希望删除级联并删除与已删除父级相对应的所有子行。到目前为止没有问题。但我们也希望任何引用任何已删除 Child 的 X 都将 Child 关系取消。我们不想删除任何 X，我们只想取消关系。这与它是一种“可选”关系是一致的。

我们如何在 Hibernate 中做到这一点？理想情况下，我们希望它是声明性的，这样我们的业务逻辑就不必“记住”来消除这些关系。事实上，如果我们要使用级联，它确实必须是声明性的，因为在我们遇到要取消的可选关系之前可能存在许多级别的级联。

有什么提示吗？我们被难住了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:05:07.677

使用 .将集合映射到 Child 类中的`inverse = false`X。

# c# - 从属性名访问类名

> ID：11435457
> 
> 赞同：1
> 
> 时间：2012-07-11T14:56:30.863
> 
> 标签：c#, .net, reflection, types, system.reflection

考虑这个结构：

```
Name
{
    public string FirstName { get; set; }
}

Person
{
    public Name PersonName { get; set; }
} 
```

我将`FirstName`属性名称作为字符串。现在我想使用这个字符串“FirstName”`Person`在运行时获取类的名称。我不确定这是否可能。有谁知道实现这一目标的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:21:18.157

这是一个非常奇怪的要求。也就是说，您可以这样做：

```
// 1\. Define your universe of types. 
//    If you don't know where to start, you could try all the  
//    types that have been loaded into the application domain.
var allTypes = from assembly in AppDomain.CurrentDomain.GetAssemblies()
               from type in assembly.GetTypes()
               select type;

// 2\. Search through each type and find ones that have a public  
//    property named "FirstName" (In your case: the `Name` type).    
var typesWithFirstNameProp = new HashSet<Type>
(
        from type in allTypes
        where type.GetProperty("FirstName") != null
        select type
);

// 3\. Search through each type and find ones that have at least one 
//    public property whose type matches one of the types found 
//    in Step 2 (In your case: the `Person` type).
var result = from type in allTypes
             let propertyTypes = type.GetProperties().Select(p => p.PropertyType)
             where typesWithFirstNameProp.Overlaps(propertyTypes)
             select type; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:05:12.207

如果所有类型都在一个已知的一个或多个程序集中，您可以在程序集中搜索：

```
var types = Assembly.GetExecutingAssembly().GetTypes();
var NameType = types.First(t => t.GetProperty("FirstName") != null);
var PersonType = types.First(t => t.GetProperties.Any(pi => pi.MemberType = NameType)); 
```

# java - 从 Intent 返回后执行代码

> ID：11435461
> 
> 赞同：0
> 
> 时间：2012-07-11T14:56:43.267
> 
> 标签：java, android

我的主要活动中有一个 TextView。

按下一个按钮我打开另一个活动并进入我可以重命名我的 TextView 的选项

```
 btnSet.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent intent = new Intent(MainActivity.this, Options.class);
            startActivity(intent);

        }
    }); 
```

在我的选项活动中，我像这样重命名我的 TextView

```
public class Options extends MainActivity{

public static  Boolean isRenamed;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.options);

    String lblName = ("Counter 1");
    Button btnOk = (Button) findViewById(R.id.btn_ok);
    btnOk.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent backToMain = new Intent(Options.this, MainActivity.class);      
            EditText labelName = (EditText) findViewById(R.id.set_name);
            String lblName = labelName.getText().toString();
            backToMain.putExtra(LABEL_NAME, lblName);
            isRenamed = true;
            startActivity(backToMain);
            finish();

        }
    });
} 
```

}

我正在使用布尔 isRenamed 并在单击确定后将其设置为 true

在我的主要活动中，我设置了这个

```
if (Options.isRenamed == true) {

     // Get the message from the intent
        Intent backToMain = getIntent();
        String lblName = backToMain.getStringExtra(Options.LABEL_NAME);

        // Edit the text view
        TextView label = (TextView) findViewById(R.id.label1);
        label.setText(lblName);

    } 
```

现在它是强制关闭，但是有没有更优雅的方法来查看我是否重命名了文件然后执行那段代码来设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:59:36.500

```
Context.startActivityForResult(); 
```

在那里做所有的重命名和其他事情。返回一个简单的整数以了解发生了什么。这样，当您在第二个活动中调用 finish() 时，它将返回到您的第一个活动，而无需创建新实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:01:26.577

使用`startActivityForResult()`而不是`startActivity()`. 在选项活动中：

```
public static final int RENAMED = 100;

btnOk.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent backToMain = new Intent(Options.this, MainActivity.class);      
            EditText labelName = (EditText) findViewById(R.id.set_name);
            String lblName = labelName.getText().toString();
            backToMain.putExtra(LABEL_NAME, lblName);
            isRenamed = true;
            setResult(RENAMED);
            finish();

        }
    }); 
```

在 MainActiviy 中，覆盖`onActivityResult()`并在触发时检查`resultCode`参数是否等于 RENAMED 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:02:00.553

对于这个场景，你需要使用

```
startActivityForResult(intent, requestCode) 
```

代替`startActivity(intent)`

在您的`Options`活动中，您可以`setResult(resultCode, data)`调用完成。

在`MainActivity`你可以使用数据

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:02:44.650

您可以使用

```
startActivityForResult(intent, intentsData.REQUEST_CODE); 
```

然后更改您的`TextView`活动何时恢复

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

          /**
           * change your TextView
           */
          super.onActivityResult(requestCode, resultCode, data);
    } 
```

# logging - 基于日期的日志文件，无需跨运行重用

> ID：11435463
> 
> 赞同：0
> 
> 时间：2012-07-11T14:56:47.503
> 
> 标签：logging, log4net, log4net-configuration

我有一个要记录到 MyProcess.YYYYMMDD.log 的批处理过程。通常它每天运行，但有时由于故障或测试，它每天运行多次。基于查看其他 log4net 问题，我正在使用 RollingLogFileAppender 创建基于日期的文件。但是，如果同一天发生多次运行，我最终会将这些多次运行记录到同一个文件中。

理想情况下，我希望批处理的第一次运行记录到 MyProcess.YYYYMMDD.log，但在同一天第二次运行记录到 MyProcess.YYYYMMDD.2.log 等。

使用 log4net 完成此任务的最简单方法是什么？

如果它很重要，我当前的 appender 配置如下所示：

```
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="MyProcess.log" />
  <appendToFile value="true" />
  <rollingStyle value="Date" />
  <datePattern value=".yyyyMMdd" />
  <staticLogFileName value="false"/>
  <PreserveLogFileNameExtension value="true"/>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:39:10.173

不确定是否可以将递增变量添加到日志的日期戳中。也许更好的方法是将时间戳附加到您的文件名，以便您可以通过这种方式区分它。

这里的这个[链接](http://geekswithblogs.net/rgupta/archive/2009/03/03/tips-on-using-log4net-rollingfileappender.aspx)很好地解释了如何添加必要的属性来实现时间戳。如果您不想记录到分钟，您可以选择只使用当前小时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T19:27:50.210

如果您确定两个进程不能同时**启动**，那么您可以通过编程方式设置您的日志文件。

例如，在记录任何内容之前启动时设置日志文件的名称，例如

```
var logfileName = String.Format("{0}{1:yyyyMMdd}.log" , 
                 ".\logs\MyProcess" , DateTime.Now ); 
```

然后检查日志文件是否已经存在，如果存在，则更改 logfileName 直到获得唯一名称。

然后将这些信息传递给 log4net，如下所示。

```
log4net.GlobalContext.Properties["LogName"] = logfileName; 
```

这需要在记录第一条消息之前完成。

您还需要更改配置文件以使用此属性。

```
<file type="log4net.Util.PatternString" value="%property{LogName}" /> 
```

# java - 为什么枚举构造函数不能具有受保护或公共访问修饰符

> ID：11435464
> 
> 赞同：5
> 
> 时间：2012-07-11T14:56:48.273
> 
> 标签：java, enums

枚举构造函数必须是私有或包默认值，并且不允许使用受保护或公共访问修饰符。为什么这样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T14:59:55.293

因为根据定义，枚举具有一组固定的实例，这些实例在枚举本身中声明和构造。因此，从枚举类本身外部使用构造函数是没有意义的。

而且 AFAIK，枚举构造函数始终是显式或隐式私有的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T14:58:37.940

来自[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)：

> 枚举类型的构造函数必须是包私有或私有访问。它会自动创建在枚举体开头定义的常量。您不能自己调用​​枚举构造函数。

能够创建枚举的新实例是没有意义的，因此语言会阻止您这样做！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:58:24.023

枚举并不意味着（由您）实例化。

[http://docs.oracle.com/javase/tutorial/reflect/special/enumTrouble.html](http://docs.oracle.com/javase/tutorial/reflect/special/enumTrouble.html)：

> 提示：尝试显式实例化枚举是编译时错误，因为这会阻止定义的枚举常量是唯一的。此限制也在反射代码中强制执行。尝试使用其默认构造函数实例化类的代码应首先调用 Class.isEnum() 以确定该类是否为枚举。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:58:04.590

您不能动态扩展枚举的原因是实例化的值被编译为 Class 对象的字节码：

```
public T[] getEnumConstants()
    Returns the elements of this enum class or null if this Class object does not
    represent an enum type. 
```

因此，任何构造新实例的尝试都无法传递给实际的 Class，因为 Class 对象无法更改。如果你想要这种行为，你必须自己模拟它，并给它某种唯一的值来表示每个值，然后有一个序数计数器，最后是一个静态映射（或其他结构）来保存所有值.

```
public class MyEnum {
  private static AtomicInteger nextOrdinal = new AtomicInteger(0);
  private static Map<Integer, MyEnum> instances =
      new HashMap<Integer, MyEnum>();

  private int ordinal;
  private String name;

  public MyEnum(String name) {
     super();
     this.ordinal = nextOrdinal.incrementAndGet();
     this.name = name;
     instances.put(Integer.valueOf(this.ordinal), this);
  }

  public String name() {
     return name;
  }

  public int ordinal() {
     return ordinal;
  }

  public static Set<MyEnum> getEnumConstants() {
     return Collections.unmodifiableSet(instances.values());
  }

  public static MyEnum fromInt(int ordinal) {
     return instances.get(Integer.valueOf(ordinal));
  }

  public static MyEnum fromString(String name) {
     for (MyEnum val : instances.values()) {
         if (val.name().equals(name)) {
             return val;
         }
     }
     return null;
  }

} 
```

您可能还需要一个 .equals 和 .hashcode 方法，以及防止多次使用相同的名称（如果您有重复的名称，您可以在构造函数中执行此操作并抛出 IllegalStateException 或其他东西）。

# visual-studio-2010 - 如何在 Visual Studio 中提供自定义 Intellisense 描述

> ID：11435469
> 
> 赞同：1
> 
> 时间：2012-07-11T14:56:59.513
> 
> 标签：visual-studio-2010, intellisense

好的，假设我在 C# 中有以下类：

```
class Foo
{
    public void Bar() { Console.WriteLine("FooBar"); }
} 
```

在 Visual Studio 中，每当我实例化我的类并实现我的方法 intellisense 时，看起来像这样：

![富吧](../Images/08d938efb6b929fb3f3e20f26273cb80.png)

所有这些显示的是我的方法的名称、返回类型和输入参数。使用智能感知查看任何 .Net 基类中的任何方法时，都会提供描述。

如何将我自己的方法的描述添加到智能感知中，以便将来使用我编写的 *.dll 的任何人都可以理解我的方法的作用，而无需参考外部文档？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:59:26.583

[添加 xml 文档](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)：

```
/// <summary>
/// Foos something
/// </summary>
public void Foo()
{
} 
```

# c# - 处理此字符串更有效的是什么

> ID：11435477
> 
> 赞同：1
> 
> 时间：2012-07-11T14:57:08.300
> 
> 标签：c#, string, performance

我创建了一个读取文本文件并基于该文本文件创建输出的小程序。

文本文件的一个示例可能是：

```
f
a b c
d e 
```

然后我的程序将做的是创建一个新的文本文件，该文件显示该行，然后是每行中单词的所有组合/排列，如下所示：

```
f
a b c 
a c b
b a c
b c a
c b a
c a b
a b
a c
b a
b c
c a
c b
a
b
c
d e
e d
e
d 
```

我目前使此功能正常工作，但是，我决定创建一个辅助文本文件，该文件输出相同的内容，但每个条目的组合/排列前面带有“〜”以增加可读性。

目前，我有这两个输出字符串，所以可以说：

```
string outputStringNormal = "";
string outputStringReadable = ""; 
```

然后在我的代码中，我基本上将文本添加到每个输出字符串：

```
outputStringNormal += someText;
outputStringReadable += " ~ " + someText; 
```

我想知道如果我只有一个输出字符串并且我将 [randomMarker] 附加到每个组合/排列的开头，并且在我输出新文本文件之前，在普通文件中是否会更有效，我会字符串用“”替换我的标记，然后在我的 Readable 中用“~”替换它。

所以像这样：

```
outputString += "[randomMarker]" + someText; 
```

然后在输出之前：

```
CreateSomeFile(outputString.Replace("[randomMarker]", "");
CreateSomeFile(outputString.Replace("[randomMarker]", " ~ "); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:09:07.030

您不应该将整个文本文件存储在内存中；您应该在生成该行时将每一行写入文件。在处理这样的组合时，很容易获得非常大的值，因此应该避免在内存中存储大量不需要的信息。

您应该为一行生成字符串，将该行写入非人类文件，然后将您的附加`~`到人类可读文件并附加同一行。这样做你甚至不会做任何字符串连接、替换或任何事情。您将只是不断地写入输出流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:24:09.093

从评论移植：

您可以`StringBuilder`在这种情况下使用：而不是：

`+=`操作员;

`String.Concat()`方法;

`String.Format()`方法。

其实`String.Format()`方法内部使用的是`StringBuilder`类，`.AppendFormat()`方法，不过如果不需要格式化的话，可以`.Append()`比`AppendFormat()`.

另外，为什么将它存储在变量而不是新文本文件（`streamwriter.Write()`）中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:01:01.140

`outputStringNormal = string.Format({0} SomeText, outputStringNormal)` 使用C# 中的 string.Format 可以提高性能，这是连接字符串的最有效方法。你不应该使用字符串 += 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:08:09.217

写入文件很可能是您的瓶颈。因此，请确保您执行缓冲输出并尽可能少地刷新输出。

# javascript - 如何制作仅显示最新日期数据的 Google Fusion Tables 地图？

> ID：11435479
> 
> 赞同：0
> 
> 时间：2012-07-11T14:57:14.780
> 
> 标签：javascript, google-fusion-tables

这是我的 Fusion Table的[链接。](https://www.google.com/fusiontables/DataSource?docid=1BNdNj9u3x0dzNVhq_Y0qPG8vtQxPuF6N_IQX9XM)

如果您查看标有“日期”的列，您可以看到两个日期：2012 年 7 月 4 日和 2012 年 7 月 5 日。左侧是“价格”列，它会根据日期而变化。

我正在制作的地图是根据四个美国人口普查区域进行地理编码的：东北部、中西部、南部和西部。

我想制作一张显示最新日期价格的地图。

因此，在这种情况下，单击任何东北部州都会显示“价格”为“0”。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T21:33:49.580

一种方法是使用[google 可视化库](https://developers.google.com/chart/interactive/docs/reference)。单击查询该区域的表格，按日期排序，限制 1 提取价格并显示它。

[这](http://www.geocodezip.com/v3_FusionTables_GViz_infowindows.html)是一个使用 gviz 查询将数据放入 infowindows 的示例。

[这个例子](http://www.geocodezip.com/v3_FusionTables_GViz_infowindows3.html)可能更有用，它将所有返回的行放在一个信息窗口中并允许动态选择行，这部分似乎在 IE8 中不起作用，但您不需要动态更改数据，因为您只想要最新的值。

[这是一个示例](http://www.geocodezip.com/v3_FusionTables_GViz_infowindows_latestDate.html)，它可以使用您的数据执行我认为您想要的操作。

# vertica - 将 Vertica 数据库用于 OLTP 数据？

> ID：11435486
> 
> 赞同：4
> 
> 时间：2012-07-11T14:57:25.153
> 
> 标签：vertica

Vertica 数据库可以用于 OLTP 数据吗？
如果是这样，这样做的利弊是什么？
正在寻找 Vertica 与 Oracle 的较量 :)
既然 Oracle 许可证如此昂贵，那么 Vertica 会以更好的价格完成这项工作吗？谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T03:22:58.153

将 Vertica 用作事务数据库是个坏主意。它被设计成一个数据仓库工具。本质上，它以优化的方式读取和写入数据。交易量大？这不是它的设计目的。

我建议您查看 VoltDB。Vertica 背后的力量 Michael Stonebreaker 也创立了这家公司。他的基本理念是 Oracle、SQL Server 等在高性能方面表现不佳，因为它们旨在完成所有工作。未来将拥有专为特定任务设计的数据库。

因此，他对后来成为 Vertica 的数据仓库有了一些概念。对于事务数据库，有 VoltDB。记录在案，不归惠普所有。

作为记录，我没有使用过 VoltDB。据我所知，它不像 Vertica 作为解决方案那样成熟，但它看起来很有希望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T10:58:40.797

HP Vertica 是一个列存储数据库。在列存储中组织数据的方式的性质不适合快速写入。

HP Vertica 通过 WOS（写入优化存储）和 ROS（基于文件的读取优化存储）解决了这个问题。

数据从 WOS 快速移出到 ROS 中，并且 ROS 本身有一个“合并”过程，该过程获取小的 ROS 文件并将它们合并在一起以形成更大的文件，因此更容易扫描。

如果您尝试将 Vertica 用于 OLTP，那么您将获得大量 ROS 容器，并可能很快达到 1024 个 ROS 容器的默认限制。

如果您在商店前面使用某种形式的排队机制来批量传递记录，那么这将导致 ROS 文件越来越少。它会起作用，但是如果您想让您的 OLTP 系统读取非常接近其写入活动，则它不适合用例。

WOS/ROS 机制很好地解决了列存储数据库中写入的基本性能损失，但从根本上说，Vertica 不是 OLTP 数据库，而是一种可以近乎实时地摄取数据的数据集市技术

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-22T01:58:11.987

我认为有不同的方式来解读这个问题。

1.  可以将 Vertica 用作 OLTP 数据库吗？

首先，我将稍微定义一下这个问题。OLTP 数据库意味着数据库本身负责事务处理，而不是简单地接收一些规范化的数据。

我的回答绝对不是，除非它可能是一个单用户数据库。实际上没有 RI，没有 RI 锁定，DELETE/UPDATE 上的表锁定，并且您可能会在正常的 OLTP 类型使用中累积一个删除向量。

您可以通过一些广泛的中间件编程（分布式锁、大量避免删除/更新等）来解决其中的一些问题。但为什么？有很多不是 Oracle 的选项，价格不高，但可以为您提供 OLTP 所需的一切。

2.  您可以使用 Vertica 摄取和查询 OLTP 数据吗？

当然是。不过，最好使用 Vertica 来发挥其优势。Vertica 中的查询往往具有相当大的开销，您可以轻松地处理大量数据，甚至是标准化的。我不会使用 Vertica 来进行主要的运行点查询，在这里和那里抓取几行。并不是说您不能，而是您不能使用与其他为此目的的数据库相同的并发性。

TL;DR 为正确的工作使用正确的工具。我真的很喜欢使用 Vertica，但仅仅因为我喜欢挥动锤子并不意味着每个问题都是钉子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-22T22:23:39.087

这个问题现在有点老了，但我会分享我的经验。

除非您非常仔细地考虑您的工作量，否则我不会建议将 vertica 作为 OLTP。

如其他答案所述，Vertica 有两种存储类型。ROS是读优化存储，WOS是写优化存储。WOS 纯粹在内存中，因此它在插入时性能更好，但查询速度较慢，因为所有小的更新都需要查询和联合。Vertica 理论上可以处理小负载，但在实践中它对我们的性能表现并不好。WOS 也有缺点，即当数据库发生故障时，WOS 在回滚到上一个好时代时不一定会保留。（ROS 也不是，但实际上你从 ROS 中损失的更少）。

ROS 更可靠并且提供更好的读取性能，但如果没有精心设计，您将永远无法处理超过一定数量的查询。尽管 vertica 是水平可扩展的，但实际上大型表会跨所有节点进行分段，因此查询必须在所有节点上运行。因此，添加更多节点并不意味着处理更多并发查询，它只是意味着每个查询的工作量更少。如果您的表足够小，可以不分段，那么这对您来说可能不是问题。

另外值得注意的是 OLTP 通常意味着大量并发事务，因此您需要非常仔细地规划资源池。默认情况下，vertica 为每个服务器或 RAM/2GB 的最小内核数的通用资源池计划并发。本质上，该值的作用是确定分段查询的每个节点的默认内存分配。因此，默认情况下，vertica 不会让您运行比核心更多的查询。您可以调整此值，但是一旦达到内存上限，您就无能为力了，因为内存是按节点分配的，因此添加更多节点甚至没有帮助。如果您在资源池内存分配方面遇到任何错误，这是您应该查看的第一个配置。

此外，Vertica 在删除和更新方面很糟糕（在后台解析为删除和插入），因此如果这些是您工作负载的常规部分，那么 Vertica 可能是一个糟糕的选择。就个人而言，我们将 MySQL 用于需要删除/更新的维度表，然后定期将该数据同步到 vertica 以用于连接。

我个人使用 Vertica 作为 OLTP 式实时数据库。我们将负载分批成 5 分钟的间隔，这让 vertica 对插入的数量/大小感到满意。这些批次是使用 COPY DIRECT 插入的，这样它们就可以完全避免 WOS（只有在它们是大批次时才这样做，因为这会强制创建 ROS 容器，如果你经常这样做可能会很糟糕）。我们可以拥有的尽可能多的预测都是未分段的，以允许更好的横向扩展，因为这使得查询仅命中 1 个节点并仅在 1 个节点上分配内存。到目前为止，它对我们来说效果很好，我们每天通过 UI 的实时查询加载大约 50 亿行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T16:06:54.120

Up_one - considering the telecom use-case - are you doing CDR or something else?

To answer your original question yes Vertica may be a great fit but it depends on how you are loading the data, how you are doing updates, what your data size is and what your SLA is. I am really familiar in this space because I implemented Vertica at a telecom that I worked for at the time.

# math - 如何找到具有相同二进制子串的下一个整数？

> ID：11435492
> 
> 赞同：0
> 
> 时间：2012-07-11T14:57:35.560
> 
> 标签：math, binary, substring

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:01:45.350

Not sure exactly what you are trying to accomplish here, but *bit shift left* is the same as saying *multiply by two*. So if you want to get the "next" integer with the same "substring" you just multiply by two.

```
3: 11 
*2=
6: 110

18: 10010
*2=
36: 100100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:16:55.233

Making a bit of jump on your methodology :P but you could convert the number to a string and use some sort of find method. It doesn't do it via math? but it gets the job done

```
public static void main(String[] args){

    Integer myNum = 1010;
    String myNumString = Integer.toString(myNum);
    System.out.println(myNumString.matches(".*10.*"));
} 
```

# html - 如何创建 HTML5 100% 离线应用程序？

> ID：11435493
> 
> 赞同：1
> 
> 时间：2012-07-11T14:57:36.833
> 
> 标签：html

有时我需要编写一个小程序来表示图表中的一些数据或类似的东西。我一直想通过浏览器用 HTML5 做这种事情。我认为使用它的画布为简单的应用程序创建一个漂亮的 UI 会很好。

我已经阅读了一些与 HTML5 离线应用程序相关的文章，但它们专注于下载您需要的所有数据并将其保存到缓存中以供以后离线使用。您甚至需要设置 Apache 服务器（或类似服务器）来创建您的应用程序。

我不需要我的应用程序在线，只需在我的计算机中即可。我只想创建一个简单的应用程序，与互联网完全无关。

我怎样才能做到这一点？它甚至可能或值得吗？有没有“你好世界！” 那里有关于这个的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:04:57.080

像[Mozilla Prism](http://en.wikipedia.org/wiki/Mozilla_Prism)这样的东西可以很好地将内容显示[为应用程序](http://www.rumproarious.com/2010/06/06/building-local-html5-apps-with-prism/)。

不需要像 Apache 这样的 Web 服务器来在浏览器中显示 HTML5/Javascript。您可以将其全部放在桌面上的文件夹中，然后使用`file://`协议将其加载到浏览器中。

例如，将在用户桌面上`file://C:/Documents and Settings/YourUser/Desktop/YourApp/index.html`调用的文件夹中打开一个 HTML 文件。`YourApp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T15:00:43.260

如果您发现需要在本地读取静态 HTML+Javascript 文件，那么我建议您在控制台中使用此 python 命令：

```
python -m SimpleHTTPServer 
```

它启动了一个简单的 HTTP 服务器（谁会猜到），它为当前工作目录中的文件提供服务。实际上，这与启动 apache 网络服务器、放入一些静态资产`/var/www/...`等相同。

您也可以浏览到资产`file:///some/folder`；但是，大多数浏览器会在以这种方式加载文件时阻止 javascript 使用 AJAX，当您加载它时，这将表现为一堆错误。

# lucene - 弹性搜索词干

> ID：11435494
> 
> 赞同：6
> 
> 时间：2012-07-11T14:57:40.453
> 
> 标签：lucene, tokenize, elasticsearch, analyzer, stemming

我正在使用 ElasticSerach，我想为英语设置基本词干。所以基本上，战斗机返回战斗或任何包含战斗词根的词。

我有点困惑如何实现这一点。我正在阅读分析器、标记器和过滤器，并且有多种词干算法可以在 ElasticSearch 中使用。我只是不确定要使用哪个组合 - 雪球、词干分析器、搬运工词干或同义词过滤器。

此外，映射的示例将非常有帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T15:24:17.300

请注意[词干提取和词形还原之间的区别](http://en.wikipedia.org/wiki/Lemmatisation)。词干算法应用一系列规则（和/或字典查找，例如 KStem 的情况）并且不保证结果将是正确的语言“根”（即引理）。

例如，“marinate”和“marines”这两个词都会被 Porter 词干分析器转换为“marin”，这被认为是非常“激进”的词干——它往往会为大量词产生相同的词干。还有更保守的，例如 S-Stemmer，它只将复数形式转换为单数形式 ( `org.apache.lucene.analysis.en.EnglishMinimalStemFilter`)。

研究论文中发现的词干提取方法的比较似乎倾向于将 KStem 作为对英语文本最有效的方法，但词干分析器的选择在很大程度上取决于文档的词汇量。您的目标不是优化词干分析器的性能，而是搜索引擎的性能，因此将其与系统的其他元素（尤其是查询扩展）分开测量在实践中并不是一个好主意。

最好的解决方案是尝试在 elasticsearch 中可用的许多不同的词干分析器（可以在[此处查看](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-stemmer-tokenfilter.html)示例映射）并观察结果的精度和召回率。如果您没有查询测试套件，那么您最好的选择是执行“典型”查询并注意“奇怪”结果（词干分析器过于激进）或“好”结果被忽略（过于保守）词干分析器）。

# java - HttpURLConnection 的 I/O 异常。获取响应代码（）；关于 503 响应码

> ID：11435495
> 
> 赞同：1
> 
> 时间：2012-07-11T14:57:45.223
> 
> 标签：java, httpurlconnection

我有一个 Web 服务器，它可以返回一个 http 响应代码 503，其中包含数据。

当我使用以下代码时：

```
URL appURL = new URL("http://sample.com");   
HttpURLConnection httpConn = (HttpURLConnection)appURL.openConnection();
int responseCode = httpConn.getResponseCode(); 
```

当收到 http 503 响应代码时，它会引发 I/O 异常，因此我无法对响应正文进行短语处理。

请指教。

谢谢，奥利

# shell - BASH：如何开始与第一个项目以外的另一个项目的对话

> ID：11435500
> 
> 赞同：3
> 
> 时间：2012-07-11T14:58:08.680
> 
> 标签：shell

建议某人如何开始自动标有第 2 项的对话？谢谢

```
对话框--菜单“菜单”50 160 50\
      "1" "项目-1" \
      "2" "Item-2" \ #标记开始
      “3” “第 3 项”

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:01:26.317

```
dialog --default-item "2" --menu "MENU" 50 160 50\
      "1" "Item-1" \
      "2" "Item-2" \
      "3" "Item-2" 
```

# wpf - 如何制作具有交替行颜色和固定颜色部分的 WPF DataGrid（忽略交替）

> ID：11435501
> 
> 赞同：8
> 
> 时间：2012-07-11T14:58:14.873
> 
> 标签：wpf, xaml, user-interface

我有一个数据网格，我试图使其类似于： ![在此处输入图像描述](../Images/af011e1c47dc24a67fd3dd31523740f9.png)

我正在使用该`AlternatingRowBackground`属性来执行交替颜色。对于固定颜色部分，我的 XAML 类似于：

```
 <DataGrid.Resources>
                <Style TargetType="{x:Type DataGridRow}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding Path=ShouldBeFixedColor}" Value="True">
                            <DataTrigger.Setters>
                                <Setter Property="Background" Value="Blue" />
                            </DataTrigger.Setters>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.Resources> 
```

这种方法的问题是“交替颜色”优先于固定颜色样式触发器。所以，在底部而不是蓝-蓝-蓝它是蓝-灰-蓝。

关于如何存档所需颜色的任何想法？如果可能的话，我宁愿在 XAML 级别做这一切。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-11T16:39:49.973

根据其他 SO 答案进行了一些更改。希望这对将来的某人有所帮助。

1.  `AlternatingRowBackground=...`从网格中拉出。添加`AlternationCount="2"`
2.  添加下面的块来做样式（手动做交替行）

    ```
     <DataGrid.RowStyle>
                <Style TargetType="{x:Type DataGridRow}">
                    <Style.Triggers>
                        <Trigger Property="AlternationIndex" Value="0">
                            <Setter Property="Background" Value="White" />
                        </Trigger>
                        <Trigger Property="AlternationIndex" Value="1">
                            <Setter Property="Background" Value="WhiteSmoke" />
                        </Trigger>
                        <DataTrigger Binding="{Binding Path=Selectable}" Value="False">
                            <DataTrigger.Setters>
                                <Setter Property="Background" Value="LightGray" />
                            </DataTrigger.Setters>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T16:05:54.337

如果其他人也在寻找在代码中完成的相同事情：

```
Style rowStyle = new Style(typeof(DataGridRow));

Trigger rowTrigger = new Trigger();
rowTrigger.Property = DataGridRow.AlternationIndexProperty;
rowTrigger.Value = 0;

Setter rowSetter = new Setter(DataGridRow.BackgroundProperty, Brushes.Yellow);
rowTrigger.Setters.Add(rowSetter);

Trigger alternateRowTrigger = new Trigger();
alternateRowTrigger.Property = DataGridRow.AlternationIndexProperty;
alternateRowTrigger.Value = 1;

Setter alternateRowSetter = new Setter(DataGridRow.BackgroundProperty, Brushes.Pink);
alternateRowTrigger.Setters.Add(alternateRowSetter);

DataTrigger rowDataTrigger = new DataTrigger();
rowDataTrigger.Value = true;
rowDataTrigger.Binding = new Binding() { Path = new PropertyPath(nameof(MyObject.IsSomethingTrue))};

Setter backgroundSetter = new Setter(DataGridRow.BackgroundProperty, Brushes.Blue);
Setter foregroundSetter = new Setter(DataGridRow.ForegroundProperty, Brushes.White);
rowDataTrigger.Setters.Add(backgroundSetter);
rowDataTrigger.Setters.Add(foregroundSetter);

// the order of the triggers may not be changed as explained by CptCoathanger
rowStyle.Triggers.Add(rowTrigger);
rowStyle.Triggers.Add(alternateRowTrigger);
rowStyle.Triggers.Add(rowDataTrigger);            

RootDataGridOrders.RowStyle = rowStyle; 
```

# c# - 为什么将许多小字节数组写入文件比写入一个大数组要快？

> ID：11435502
> 
> 赞同：5
> 
> 时间：2012-07-11T14:58:15.117
> 
> 标签：c#, arrays, performance, io

我做了一个测试，看看在磁盘上从单字节数组写入 1GB 文件和从 1024 个数组（每个 1MB）写入另一个 1GB 文件所需的时间是否存在差异。

> 测试写入多个数组
> 331.6902 ms
> 测试写入大数组
> 14756.7559 ms

对于这个测试，“许多数组”实际上是一个单独的`byte[1024 * 1024]`数组，我使用 for 循环写了 1024 次。“大数组”只是一个填充了随机值的 1GB 字节数组。

这是代码的样子：

```
Console.WriteLine("Test Writing many arrays");

byte[] data = new byte[1048576];

for (int i = 0; i < 1048576; i++)
    data[i] = (byte)(i % 255);

FileStream file = new FileStream("test.txt", FileMode.Create);

sw1.Restart();

for (int i = 0; i < 1024; i++ )
     file.Write(data, 0, 1048576);

file.Close();
sw1.Stop();
s1 = sw1.Elapsed;
Console.WriteLine(s1.TotalMilliseconds);

Console.WriteLine("Test Writing big array");

 byte[] data2 = new byte[1073741824];

 for (int i = 0; i < 1073741824; i++)
      data2[i] = (byte)(i % 255);

 FileStream file2 = new FileStream("test2.txt", FileMode.Create);

 sw1.Restart();

 file2.Write(data2, 0, 1073741824);

 file2.Close();
 sw1.Stop();

 s1 = sw1.Elapsed;
 Console.WriteLine(s1.TotalMilliseconds); 
```

我包括了`file.Close()`定时部分，因为它调用`Flush()`方法并将流写入磁盘。

生成的文件大小完全相同。

我认为也许 C# 可以*看到*我总是使用相同的数组，它可能会优化迭代/写入过程，但结果不是快 2-3 倍，而是快了大约 45 倍......为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:17:22.797

我认为造成巨大差异的主要原因是操作系统设法缓存了您在小块中执行的几乎整个 1GB 写入。

您需要更改设置基准的方式：代码应该写入相同的数据，第一次写入 1024 个块，第二次写入一个块。您还需要通过指定来关闭操作系统中的数据缓存`FileOptions.WriteThrough`，如下所示：

```
var sw1 = new Stopwatch();
Console.WriteLine("Test Writing many arrays");
var data = new byte[1073741824];
for (var i = 0; i < 1073741824; i++)
    data[i] = (byte)(i % 255);
var file = new FileStream("c:\\temp\\__test1.txt", FileMode.Create, FileSystemRights.WriteData, FileShare.None, 8, FileOptions.WriteThrough);
sw1.Restart();
for (int i = 0; i < 1024; i++)
    file.Write(data, i*1024, 1048576);
file.Close();
sw1.Stop();
var s1 = sw1.Elapsed;
Console.WriteLine(s1.TotalMilliseconds);
Console.WriteLine("Test Writing big array");
var file2 = new FileStream("c:\\temp\\__test2.txt", FileMode.Create, FileSystemRights.WriteData, FileShare.None, 8, FileOptions.WriteThrough);
sw1.Restart();
file2.Write(data, 0, 1073741824);
file2.Close();
sw1.Stop();
s1 = sw1.Elapsed;
Console.WriteLine(s1.TotalMilliseconds); 
```

运行此代码时，结果如下所示：

```
Test Writing many arrays
5234.5885
Test Writing big array
5032.3626 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:43:20.087

原因可能是单个 1MB 阵列被保存在主内存中，但 1GB 阵列被换出到磁盘。

因此，当写入单个数组 1024 次时，您是从内存写入磁盘。如果目标文件是连续的，则 HDD 磁头在此过程中不必移动太远。

写入 1GB 数组一次，您是从磁盘读取到内存然后写入磁盘，很可能导致每次写入至少两次 HDD 磁头移动 - 首先从交换文件中读取块，然后返回目标文件写入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:54:33.830

它可能与操作系统如何处理文件写入有关。当使用单个`write`调用写入 1GB 时，操作系统将不得不多次暂停写入以允许其他进程使用磁盘 I/O。而且您也没有缓冲写入。您可以通过指定更大的 bufferSize 来优化速度。

```
public FileStream(
    SafeFileHandle handle,
    FileAccess access,
    int bufferSize
) 
```

# mysql - MySQL - 为每条博客文章记录抓取 3 条照片记录

> ID：11435504
> 
> 赞同：2
> 
> 时间：2012-07-11T14:58:20.593
> 
> 标签：mysql, sql

如标题所示，我想列出我所有的博客文章，每篇文章显示 3 张照片。不是每篇文章都有照片。

**示例结果**

![在此处输入图像描述](../Images/505c0b55bac66b120b7aa5dcb1c97ca2.png)

**我的尝试**

```
SELECT a.article_id, a.title, a.content, a.published, t.topic_title, au.firstname, au.lastname,
GROUP_CONCAT(CONVERT(p.photo_id,CHAR(8)) ORDER BY p.photo_id ASC SEPARATOR ';') AS photos
FROM blog_articles a
LEFT JOIN photos p USING (article_id)
LEFT JOIN blog_topics t ON a.topic_id = t.topic_id
LEFT JOIN admins au ON a.author_id = au.admin_id
GROUP BY a.article_id 
```

这会产生一个冒号分隔的照片 ID 列表，就像我想要的那样，但我真的只需要 3 个，而不是全部。显然我可以在我的应用程序代码中获取 3 个 ID，但我想停止在 MySQL 中收集所有这些数据。这是它产生的：

```
14   This is a blog title   2012-07-09    12;13;14;15;16;17;18;19;20;21;22;23;24;25 
```

但我想要的是：

```
14   This is a blog title   2012-07-09    12;13;14 
```

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:31:30.183

[您可以使用substring_index](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)扩展您的 group_concat

```
SUBSTRING_INDEX(
    GROUP_CONCAT(
        CONVERT(p.photo_id,CHAR(8)) 
        ORDER BY p.photo_id ASC 
        SEPARATOR ';'
    ),
    ';',
    3
) AS photos 
```

# svn - 建议为 TAG 配置 svn

> ID：11435508
> 
> 赞同：0
> 
> 时间：2012-07-11T14:58:24.753
> 
> 标签：svn

我有个疑问。我想在SVN中做一个配置，但我不知道是否可以。我有我的项目，每周发布一个新标签，并且必须部署它。

我记得前段时间我看到一个 SVN 存储库，在标签文件夹中有一个名为 LAST_UPDATED 的标签。

我想，是否可以创建一个符号链接，为我创建的每个标签更新。

示例： 当我创建标签*/application-1.0.2*
时，我的 最后一个标签是*/application-1.0.1* 。标签*LAST_UPDATED*将指向这个新版本。

 **可能吗？会不会引起一些问题？
或者是否有另一种方法可以在 SVN 中创建一个始终是我们所做的最新版本的文件夹？
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:30:24.077

让我先提醒你`tags`，`branches`和`trunk`都是概念，在 SVN 中，它们都是简单的副本。

话虽如此，SVN 标签是分支的快照副本，SVN 不会阻止您修改标签的内容。如果需要，您可以使用预提交挂钩来处理此问题。经典使用标签背后的想法是，当您发布软件的第 1 版时，您可以将代码库复制到标签中，并且在发布第 2 版、第 3 版等时您也可以这样做。然后，当您需要它时，您可以检索您的代码在版本 X 中的样子。

因此，要回到您的需求，您应该：

*   像您已经做的那样为每个版本创建标签，并跟踪另一个系统中的当前版本。如果您的标签命名习惯足够简单，脚本可以轻松浏览所有标签以检索最后一个。

*   或使用`stable`您始终拥有当前版本代码的分支。然后，您每天提交到另一个分支（例如，可以是`trunk`每个新功能的特定分支或特殊分支）并将您已验证的更改合并到该`stable`分支。发布版本时，可以从此分支创建标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:36:59.060

您可以这样做，例如：

```
svn cp trunk tags/application-1.0.2
svn delete tags/LAST_UPDATED
svn cp tags/application-1.0.2 tags/LAST_UPDATED
svn ci -m"New production tag" 
```

当然，第一次你不需要删除`tags/LAST_UPDATED`。**

# android - 每次启动服务时，BroadcastReceiver 接收

> ID：11435509
> 
> 赞同：3
> 
> 时间：2012-07-11T14:58:27.203
> 
> 标签：android, broadcastreceiver, android-service, android-audiomanager

我有一个动态注册`BroadcastReceiver`的`Service`. 它`AudioManager.RINGER_MODE_CHANGED_ACTION`变成`IntentFilter`. 每次我启动服务时，我都会在`onReceive()`方法中收到日志消息。之后就可以正常工作了。我不希望它在每次启动服务时接收一次。你能告诉我我在这里缺少什么吗？

```
 receiver=new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent) {
             Log.d("zil", "degisti");

        }
    };
    IntentFilter filter=new IntentFilter(
                    AudioManager.RINGER_MODE_CHANGED_ACTION);
    registerReceiver(receiver,filter); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:38:09.173

您感兴趣的意图`AudioManager.RINGER_MODE_CHANGED_ACTION`是“粘性的”。这意味着系统始终保持最后发送的广播，并且只要`BroadcastReceiver`注册了对该 Intent 感兴趣的 a，它就会立即接收到它。这是一个非常有用的功能，但有时它不是您想要的 ;-)

我假设您只对实际的“更改”事件感兴趣。在这种情况下，您需要忽略“当前”事件并仅侦听将来发生的任何事件。幸运的是，有一个解决方案：

在“onReceive()”中执行以下操作：

```
if (isInitialStickyBroadcast()) {
    // Ignore this one as we aren't interested in the current state
} else {
    Log.d("zil", "degisti");
    // Do whatever you want to do with the event here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:03:45.827

```
unregisterReceiver(receiver); 
```

这可能不起作用，因为您创建了 BroadcastReciever 的匿名内部类实现。而是创建一个嵌套/私有类，该类在您希望启动服务的活动中扩展 BroacastReceiver。然后在 Activity 生命周期回调中动态注册和注销您的接收器

# android - 如果我的 GLSurfaceView 应用永远不需要读取 Android 设备的语言环境，我可以安全地忽略语言环境配置更改吗？

> ID：11435510
> 
> 赞同：0
> 
> 时间：2012-07-11T14:58:28.647
> 
> 标签：android, glsurfaceview, android-configchanges

默认情况下，如果用户在我的应用程序运行时更改其设备的显示语言，Android 将销毁然后重新创建 Activity。这样做是为了确保我的应用程序正确使用最新设置。

`locale`我可以通过添加到`configChanges`清单中的属性来覆盖此行为。然后当用户更改语言时，我只会得到回调`onConfigChanged()`而不是完全重启。但是[文档](http://developer.android.com/guide/topics/manifest/activity-element.html)说我应该再次“检索所有资源”：

> 所有这些配置更改都会影响应用程序看到的资源值。因此，当调用 onConfigurationChanged() 时，通常需要再次检索所有资源（包括视图布局、可绘制对象等）以正确处理更改。

我的问题是，对于语言环境更改真的是这样吗？如果我有一个从不使用用户语言设置的假设应用程序，并且只使用 GLSurfaceView 呈现图形，那么忽略此事件是否安全？如果是这样，你能用文档备份吗？

忽略该事件*似乎*可以正常运行，并且当我不使用任何语言环境时重新创建视图没有多大意义，但我想确保我没有引入一些微妙的错误。

非常感谢任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:06:15.547

正如您所说，您的 GLSurfaceView 完全独立于语言环境，可以添加`locale`，`configChanges`因为可以添加`keyboard`，或者`screenSize`如果您的布局永远不会根据这些配置而改变。

编辑：文档：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

> **但是，您可能会遇到这样一种情况，即重新启动应用程序和恢复大量数据的成本可能会很高，并且会造成糟糕的用户体验。**在这种情况下，您还有另外两个选择：
> 
> [...]
> 
> 湾。自己处理配置更改
> 
> *防止系统在某些配置更改期间重新启动您的活动，但在配置发生更改时接收回调，以便您可以根据需要手动更新活动。*

另外：http: [//developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

> 如果您的应用程序在特定配置更改期间不需要更新资源，并且您有性能限制要求您避免重新启动活动，那么您可以声明您的活动自己处理配置更改，这会阻止系统重新启动您的活动。

# objective-c - TestFlightApp 的问题

> ID：11435515
> 
> 赞同：1
> 
> 时间：2012-07-11T14:58:46.993
> 
> 标签：objective-c, ios, testflight

我正在开发 iOS 应用程序，我想与 TestFlight 测试人员分享我的应用程序。这不是问题并且工作正常（通过电子邮件）。但是，当我上传新版本时，我希望有应用内更新。

SDK 将其描述为可能，但我在我的应用程序中没有看到任何更新。我从“多任务处理”中关闭了该应用程序。

我将 SDK 添加到我的项目中，并且在 AppDelegate 中我的 TeamToken、检查点等工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:28:59.867

在测试飞行中，您是否启用了强制升级？（您的应用程序 -> 构建 -> 构建信息 -> 强制升级）

另外，请确保在您启动应用程序时活动报告显示您的会话。

# ruby-on-rails - Rails 资产管道：编译为多个样式表

> ID：11435520
> 
> 赞同：9
> 
> 时间：2012-07-11T14:59:04.320
> 
> 标签：ruby-on-rails, asset-pipeline

由于特定的设置，我想将编译的样式表拆分为两个文件。这是因为可以解析 CSS 的 Java 应用程序需要 CSS 的（一部分），但它有点错误并且无法处理某些 css-(hack)-syntax。因为我无法修改这个 Java 应用程序，所以我只想向它提供它需要的 CSS，并且我可以确保它是正确的。

因此，通常资产管道只会生成一个“/assets/application-[..].css”文件。它还可以根据我所做的文件选择生成“/assets/custom-[..].css”。这仍然可以预编译。

有没有办法做到这一点？虽然我知道这不是理想的设置..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T15:05:26.747

要告诉 rails 您希望预编译的其他文件，您可以将它们添加到`config.assets.precompile`设置中。

```
config.assets.precompile += ["other_application.css"] 
```

您只能`application.css`在 HTML 中看到，因为这是您包含的唯一文件

```
<%= stylesheet_link_tag "application" %> 
```

如果您`custom.css.scss`的`apps/assets/stylesheets`目录中有一些，它将像`application.css`.

例如，我可能有

```
- _common.css.scss
- application.css.erb.scss
- other_application.css.erb.scss 
```

在`app/assets/stylesheets`. 在非部分文件的顶部，我将放置

```
@import "common"; 
```

包括`_common.css.scss`. 我现在可以在布局中相互独立地引用任一样式表。

```
<%= stylesheet_link_tag "application" %>
# or
<%= stylesheet_link_tag "other_application" %> 
```

# visual-studio-2010 - MvvmLight 工具包安装程序 4.0.23.1.msi，未安装 VS2010 模板

> ID：11435522
> 
> 赞同：1
> 
> 时间：2012-07-11T14:59:12.590
> 
> 标签：visual-studio-2010, mvvm, mvvm-light

我正在运行 GalaSoft MvvmLight Toolkit MSI 安装程序 (GalaSoft.MvvmLight.4.0.23.1.msi)，但我没有安装任何模板或片段。

需要这个尽快，非常感谢任何快速帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:38:42.347

尝试最新版本 (4.0.23.2)。此外，如果这似乎不起作用，您可以从最新的 mvvm 光源代码手动安装片段和模板（在 Snippets 和 Templates 文件夹下查看左侧）：[http ://mvvmlight.codeplex.com/SourceControl/变更集/视图/b9bb3f49bb0e](http://mvvmlight.codeplex.com/SourceControl/changeset/view/b9bb3f49bb0e)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:09:12.263

我已经安装了最新版本 4.1 并且没有模板。安装后它说我必须安装 vsix 扩展文件，但我不确定它在哪里，它不作为扩展库中的扩展存在。我可以通过在空白的 win 8 商店应用程序上添加 nuget 包来添加它，但是观看所有教程有点奇怪，他们只是通过添加模板来创建东西。不要认为它有很大的不同，但是......

# javascript - 如何在 JQueryMobile 中将 autoInitializePage 与客户端生成的内容一起使用？

> ID：11435527
> 
> 赞同：2
> 
> 时间：2012-07-11T14:59:32.750
> 
> 标签：javascript, jquery-mobile, initialization, generated-code

我试图阻止 Jquery Mobile 初始化，直到页面内容被加载，但我没有得到想要的结果。该项目是一个简单的问题/答案测验。在我的 HTML 文档中，我有 3 个容器 div[data-role=page]：

```
div[data-role=page]#pg_title
div[data-role=page]#q0
div[data-role=page]#result 
```

我的 document.ready() 解析一个外部 JSON 文件以将内容加载到这些页面，将 #q0 复制到测验中的问题数。最终结果是这样的：

```
div[data-role=page]#pg_title
div[data-role=page]#q0
div[data-role=page]#q1
div[data-role=page]#q2
div[data-role=page]#q3
div[data-role=page]#q4
div[data-role=page]#result 
```

在我的文件头中，我有：

```
<script>
    $(document).bind("mobileinit", function () {
        $.mobile.autoInitializePage = false;
    });
</script>
<script src="js/quiz.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

[http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)说要在加载 Jquery Mobile 之前配置设置，我已经这样做了。在 quiz.js 结束时，我调用了初始化页面：

```
$(document).ready(function(){

    // ... all the code to load JSON quiz content is here

    $.mobile.initializePage();
}); 
```

我的问题是，当我从标题页进入第一个问题页时，我看到所有问题同时出现。呈现的 HTML 如下所示：

```
<div data-role="page" id="q0" class="pg_type_question ui-page ui-body-c ui-page-active" data-title="Quiz Title" data-url="q0" tabindex="0" style="min-height: 826px; ">...</div>
<div data-role="page" id="q1" class="pg_type_question ui-page ui-body-c ui-page-active" data-title="Quiz Title" data-url="q0" tabindex="0" style="min-height: 826px; ">...</div>
<div data-role="page" id="q2" class="pg_type_question ui-page ui-body-c ui-page-active" data-title="Quiz Title" data-url="q0" tabindex="0" style="min-height: 826px; ">...</div>
<div data-role="page" id="q3" class="pg_type_question ui-page ui-body-c ui-page-active" data-title="Quiz Title" data-url="q0" tabindex="0" style="min-height: 826px; ">...</div>
<div data-role="page" id="q4" class="pg_type_question ui-page ui-body-c ui-page-active" data-title="Quiz Title" data-url="q0" tabindex="0" style="min-height: 826px; ">...</div> 
```

在 document.ready() 之后但在 mobile.initializePage 被调用之前，HTML 呈现为：

```
<div data-role="page" id="q1" class="pg_type_question" data-title="Quiz Title">...</div>
<div data-role="page" id="q2" class="pg_type_question" data-title="Quiz Title">...</div>
<div data-role="page" id="q3" class="pg_type_question" data-title="Quiz Title">...</div>
<div data-role="page" id="q4" class="pg_type_question" data-title="Quiz Title">...</div>
<div data-role="page" id="q5" class="pg_type_question" data-title="Quiz Title">...</div> 
```

我不明白为什么每个问题页面都使用“q0”的数据 URL 变得活跃。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:23:43.743

不看完整版就有点难说了。这是我将您所描述的内容放在一起的示例。`autoInitializePage`设置为 false （*在*jQuery Mobile 加载之前），一些元素会在页面加载后添加到 DOM 中，然后`$.mobile.initializePage();`在我们完成页面操作后调用。jQuery Mobile 然后按预期对其进行初始化，并且导航链接似乎可以正常工作。

```
<html> 
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript">
        $(document).bind("mobileinit", function () {
            $.mobile.autoInitializePage = false;
        });
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('body').append(
                '<div data-role="page" id="q1" class="pg_type_question" data-title="Quiz Title">' +
                    '<div data-role="header">' +
                        '<h1>Page 1</h1>' +
                    '</div>' +
                    '<div data-role="content">' +
                        '<h2>Content</h2>' +
                        '<p><a href="#q2" data-role="button">To Page 2</a></p>' +
                    '</div>' +
                '</div>' +
                '<div data-role="page" id="q2" class="pg_type_question" data-title="Quiz Title">' +
                    '<div data-role="header">' +
                        '<h1>Page 2</h1>' +
                    '</div>' +
                    '<div data-role="content">  ' +
                        '<h2>Content</h2>' +
                        '<p><a href="#q3" data-role="button">To Page 3</a></p>  ' +
                    '</div> ' +
                '</div>' +
                '<div data-role="page" id="q3" class="pg_type_question" data-title="Quiz Title">' +
                    '<div data-role="header">' +
                        '<h1>Page 3</h1>' +
                    '</div>' +
                    '<div data-role="content">' +
                        '<h2>The End</h2>' +
                    '</div>' +
                '</div>'
            );

            $.mobile.initializePage();
        });
    </script>
  </head> 
  <body>
    <div data-role="page" id="title" data-title="Quiz Title">
        <div data-role="header">
            <h1>Title Page</h1>
        </div>
        <div data-role="content">
            <h2>Welcome</h2>
            <p><a href="#q1" data-role="button">To Page 1</a></p>
        </div>
    </div>
  </body>
</html> 
```

在玩的过程中，我确实注意到`[div data-role="page"]`元素确实需要是彼此的兄弟姐妹；检查以确保您不会不小心将它们全部附加到标题页或正文以外的父元素。

如果您正在调用外部 JSON 源，您需要确保`$.mobile.initializePage();`在完成回调中处理调用；否则，您最终可能会遇到在`$.mobile.initializePage();`对 JSON 源的 AJAX 调用完成之前调用的竞争条件。

希望这可以帮助！

# dojo - 需要使用 Dojo 的文本框旁边的日历图标

> ID：11435531
> 
> 赞同：2
> 
> 时间：2012-07-11T14:59:45.407
> 
> 标签：dojo, calendar

我需要 DateText 框的 Dojo 代码和旁边的日历图标，当我单击该图标时，我应该得到日历，并且我应该能够从日历中选择日期。我试过 dijit.form.DateTextBox ，但它没有给出日历 Icon 。你能帮我么 。

谢谢你，阿玛纳斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:12:44.863

您可以将其`dijit.form.DateTextBox`与以下 css 一起使用。

```
.dijitDateTextBox .dijitArrowButtonInner {
  background: transparent url(PATH_TO_IMAGE) center center no-repeat;
  width: 16px;
  margin: 0;
} 
```

互联网上有您可以使用的图标。确保许可证适用于您正在处理的应用程序。

我过去使用过这些：

[http://www.freeiconsweb.com/Free-Downloads.asp?id=66](http://www.freeiconsweb.com/Free-Downloads.asp?id=66)

# spring - jqGrid多选未提交所选行

> ID：11435532
> 
> 赞同：1
> 
> 时间：2012-07-11T14:59:47.193
> 
> 标签：spring, spring-mvc, jqgrid, form-submit, multi-select

我能够让 jqGrid 显示我的数据。当我进行多选并提交表单（jqGrid 显然在表单内）时，我无法在 Spring mvc 控制器中获取选定的行。这是我的 onClick 事件

```
$("#GetDataDetailsLink").click( function() {        
    var selectedRows;
    selectedRows = jQuery("#DataList").jqGrid('getGridParam','selarrrow');
    var dataToSend = JSON.stringify(selectedRows);
    alert("dataToSend is =" + dataToSend);
    alert("selectedRows is =" + selectedRows);
    //non-ajax submit
    var url = "/underwriting-ui-web/taskDetail" + "?selectedTasks="+selectedRows;
    $("#DataGridForm").attr("action", url);
    $("#DataGridForm").attr("method", "get");       
    alert("action url is = " + $("#taskGridForm").attr("action"));
    $('#DataGridForm').submit(); 
    //ajax way of submiting
    /*
    $.ajax({
        url:'/dataDetail',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: dataToSend,
        dataType: 'json',
        success: function (result) {
            alert('success: ' + result.result);
        }
    });     
    return true; 
    */
}); 
```

一些 jqGrid 如何覆盖我的 url 并编写它自己的 url 是这样的

```
http://localhost:8080/myProject-ui-web/DataDetail?jqg_taskList_8=on&jqg_taskList_9=on 
```

代替

```
http://localhost:8080/myProject-ui-web/DataDetail?selectedTasks=8,9 
```

在 ajax 提交中它正在工作。但我希望它在非 ajax 提交中。知道为什么这在非 ajax 提交中不起作用吗？

# java - CTRL-C 如何与 Java 程序一起工作

> ID：11435533
> 
> 赞同：14
> 
> 时间：2012-07-11T14:59:47.633
> 
> 标签：java, console, shutdown-hook

当我按`ctrl`-`c`在控制台中按什么顺序停止应用程序线程并调用关闭挂钩时？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T16:03:02.163

根据javadocs，注册的关闭钩子在JVM开始关闭时以*未指定的顺序被调用；*例如响应 CTRL-C。

应用程序线程不会以任何明确定义的方式“停止”。事实上，它们可以继续运行直到进程退出。

如果您希望您的线程以有序的方式关闭，您需要在关闭挂钩中执行一些操作以导致这种情况发生。例如，一个关闭钩子可以调用`Thread.interrupt()`来告诉工作线程停止他们正在做的事情......并调用`join()`以确保它已经发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T15:01:10.000

我知道您可以通过添加关闭挂钩来指定当 Ctrl-C 被击中时应该发生什么。但我不确定按什么顺序。

```
private static void createShutDownHook()
{
    Runtime.getRuntime().addShutdownHook(new Thread(new Runnable()
    {

        @Override
        public void run()
        {
            System.out.println();
            System.out.println("Thanks for using the application");
            System.out.println("Exiting...");

        }
    }));
} 
```

# sql-server-2008-express - 如何使用代码行在 SqlServer2008 Express 中创建数据库

> ID：11435536
> 
> 赞同：0
> 
> 时间：2012-07-11T14:59:53.460
> 
> 标签：sql-server-2008-express

我从事 C# 项目 (WinForm)

我在客户端 PC 上安装 Sql Server 2008 Express。

在我的程序开始必须创建一个数据库。所以我使用此代码创建数据库：

```
string sqlCreateDBQuery;

            SqlConnection tmpConn = new SqlConnection(@"SERVER =.\SQLEXPRESS; Trusted_Connection = yes;DATABASE = master;");

            sqlCreateDBQuery = " CREATE DATABASE "
                               + DatabaseName
                               + " ON PRIMARY "
                               + " (NAME = " + DatabaseName + ", "
                               + " FILENAME = '" + @"C:" + @"\" + DatabaseName + ".mdf" + "', "
                               + " SIZE = 3MB,"
                               + " FILEGROWTH = " + "10%" + ") "
                               + " LOG ON (NAME =" + "MyDatabase_Log" + ", "
                               + " FILENAME = '" + @"C:" + @"\" + DatabaseName + "_log.ldf" + "', "
                               + " SIZE = 1MB, "
                               + " FILEGROWTH = " + "10%" + ") ";
            sqlCreateDBQuery = Coomand;

            SqlCommand myCommand = new SqlCommand(sqlCreateDBQuery, tmpConn);
            try
            {
                tmpConn.Open();
                MessageBox.Show(sqlCreateDBQuery);
                myCommand.ExecuteNonQuery();
            }
            catch (System.Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
            finally
            {
                tmpConn.Close();
            }
            return; 
```

但是当我的程序运行时，我看到以下错误

![在此处输入图像描述](../Images/0d1e3101d5064833ecb052c427bfe18c.png)

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:22:02.173

从错误消息中可以看出，您没有在根目录上创建 mdf 文件的权限。说实话，无论如何你都不应该把它放在那里，因为那太暴露了。将它放在应用程序的文件夹中，或者放在不会被意外删除的地方。

我还认为您应该将其作为初始设置的安装脚本运行，而不是在您的代码中运行。我非常支持将 sql 尽可能地排除在代码之外，但对每个人来说都是他自己的。您说您设置了 SQL Server 数据库，您应该使用您可以使用的工具来简化此操作。我有一本来自 Wrox 的书对我很有帮助，这里是链接：[http ://www.wrox.com/WileyCDA/WroxTitle/Wrox-s-SQL-Server-2005-Express-Edition-Starter-Kit.productCd- 0764589237.html](http://www.wrox.com/WileyCDA/WroxTitle/Wrox-s-SQL-Server-2005-Express-Edition-Starter-Kit.productCd-0764589237.html) -亚马逊只需 2 美元 - [http://www.amazon.com/Server-Express-Edition-Starter-Programmer/dp/B006TQYC8U/ref=sr_1_1?ie=UTF8&qid=1342019983&sr=8-1&keywords=Wrox% 27s+SQL+Server+2005+Express+Edition+Starter+Kit](https://rads.stackoverflow.com/amzn/click/com/B006TQYC8U)

还：

[http://msdn.microsoft.com/en-us/library/bb264562(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/bb264562(v=sql.90).aspx)

# r - 如何使用 R 识别推文中的 url

> ID：11435539
> 
> 赞同：1
> 
> 时间：2012-07-11T15:00:00.523
> 
> 标签：r, url, twitter, tweets

我想在我的推特数据集中识别那些包含 URL 的推文。例如，使用“http://”的符号。

如何在R中进行？例如推文文本是

```
 "@RainxDog @twitpic Please HELP #OccupyWallStreet and RT this video: http://t.co/vjwNR7TC"

  "@degamuna Please HELP #OccupyWallStreet and RT this video: http://t.co/vjwNR7TC" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:06:54.970

你可以使用 grep

```
if(length(grep("http://",data))>0){
 data[grep("http://",data)]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:39:56.307

您相对简单的问题，隐藏了一些实际上非常棘手的问题。在您的两个示例中，网址：

1.  形式如下：`http://t.cp/`-`bit.ly`链接呢？怎么样`https`？
2.  网址出现在推文的末尾。推文中间或开头的网址怎么样？

构建一组示例推文并确保您的正则表达式有效。

基本上，您需要一个正则表达式。要查看的 Stackoverflow 问题是：

1.  [如何使用 JavaScript RegEx 从推文中提取 URL？](https://stackoverflow.com/questions/6240973/how-to-extract-a-url-from-a-tweet-with-a-javascript-regex)
2.  [使用 Python 从字符串中提取 URL 的最简洁方法是什么？](https://stackoverflow.com/questions/520031/whats-the-cleanest-way-to-extract-urls-from-a-string-using-python)

这些问题还包含链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:46:02.693

您可以使用[Twitter Entity](https://dev.twitter.com/docs/tweet-entities)获取推文的所有 URL 。进行 REST 调用时，请确保包括

```
&include_entities=true 
```

这将为您提供 JSON 或 XML 中称为实体的部分。将有一个名为 urls 的子节点。

这是将返回的示例。

```
"text": "Twitter for Mac is now easier and faster, and you can open multiple windows at once http://t.co/0JG5Mcq",

    "entities": {

      "media": [

      ],

      "urls": [

        {

          "url": "http://t.co/0JG5Mcq",

          "display_url": "blog.twitter.com/2011/05/twitte…",

          "expanded_url": "http://blog.twitter.com/2011/05/twitter-for-mac-update.html",

          "indices": [

            84,

            103

          ]

        }

      ],

      "user_mentions": [

      ],

      "hashtags": [

      ]

    } 
```

因此，查找实体 -> urls 以查看推文是否包含指向外部站点的链接。

# linux - 如何在每个 Bash 命令的开头添加一些内容？

> ID：11435543
> 
> 赞同：2
> 
> 时间：2012-07-11T15:00:11.107
> 
> 标签：linux, bash

我想改变我的 Bash 配置，所以当我`foo bar`在命令提示符下输入一些东西（例如）时，它真的会执行`h foo bar`.

我想这样做是因为我经常使用[hilite](http://sourceforge.net/projects/hilite/)（别名为`h`）将 stderr 着色为红色，并且我想让这种行为永久化。

我看到的其他用途是与 Git 交互，因为我编写了很多命令，例如：

```
git status
git add ...
git commit ... 
```

我想我可以`preexec_invoke_exec`在命令运行之前执行某些操作，但我不知道如何更改命令或阻止它执行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:01:44.097

您可以通过绑定`return`键`h`为您插入来实现这一点。您可以通过将其添加到您的`.input.rc`：

```
Return: "\C-ah\ \n" 
```

或者把它`bind`放在你的`.bashrc`：

```
bind 'RETURN: "\C-ah \n"' 
```

（向[这些人致敬](https://superuser.com/questions/117227/a-command-before-every-bash-command)）。

有一些问题：显然，它只是 bash，这可能会在某些地方产生一些非常奇怪的行为（我现在想不出一个像样的例子），所以我不会说这是“好”的抨击反正。

我个人会跳过`hilite`并保持纯洁`bash`。因此，相反，尝试寻找一种方法来为每个命令*附加*一些东西，以便将`stderr`流重定向到彩色`echo`/ `printf`...但我猜这是一个偏好问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:27:03.900

要运行与您指定的命令不同的命令，最好的办法可能是为要捕获的命令创建一个 bash 函数。

我对“hilite”一无所知，但如果它安装了一个二进制文件，比如说`/usr/bin/hilite`，你可以使用：

```
git () {
  /usr/bin/hilite /usr/bin/git "$@"
} 
```

所以......当您`git`在 bash 提示符下运行时，bash 将实际运行`hilite`，使用`/usr/bin/git`和其余命令行参数作为`h`.

请注意，这应该适用于传统的 Bourne shell 和 bash。

# php - PHP 所需的信息很少

> ID：11435549
> 
> 赞同：-2
> 
> 时间：2012-07-11T15:00:35.330
> 
> 标签：php, javascript

我正在做一个航空票务项目。

我能够向用户显示最终票，但是当他/她单击打印按钮时，我如何让用户能够打印它。

请帮忙..

```
 <title>Untitled Document</title>
    <style type="text/css">
    #main {
position:absolute;

top:100px;
width:100%;
height:250px;
z-index:1;
}
#submit {
position:absolute;

top:300px;
width:100%;
height:42px;
z-index:2;
}
</style>
</head>

<body>
<div id="main" align="center">
<?PHP
mysql_connect("127.0.0.1","root","");
mysql_select_db("cmc");
$id=$_REQUEST['id'];
$r=mysql_query("select * from manifest where transid=".$id);
$d=mysql_fetch_assoc($r);
?>

<table width="800" border="1">
<tr>
<td colspan="6" align="center">HORIZON AIRWAYS PASSENGER TICKET</td>

</tr>
<tr >
<td colspan="3" align="center">PNR NUMBER: </td>
<td colspan="3" align="center"><?php echo $d["pnrno."]; ?></td>

</tr>
<tr >
<td colspan="3" align="center"> PASSENGER'S NAME:</td>
<td colspan="3" align="center"><?php echo $d["name"]; ?></td>

</tr>
<tr >
<td colspan="3" align="center">DATE OF ISSUE:</td>
<td colspan="3" align="center"><?PHP 
ini_set('date.timezone','asia/calcutta');
echo date("d/m/y"); ?></td>

</tr>
<tr >
<td colspan="3" align="center">TIME OF ISSUE:</td>
<td colspan="3" align="center"><?PHP  
echo date("h/i/s"); ?></td>

</tr>
<tr >
<td colspan="3" align="center">DATE OF JOURNEY:</td>
<td colspan="3" align="center"><?php echo $d["day"]."-".$d["month"]."-".$d["year"]; ?>         </td>

</tr>
<tr>
<td colspan="6" align="center">NOT TRANSFERRABLE</td>

</tr>
<tr>
<td colspan="3" align="center">PASSENGER NAME:</td>
<td colspan="3" align="center"><?php echo $d["name"]; ?></td>
</tr>
<tr>
<td colspan="3" align="center">SECTOR:</td>
<td colspan="3" align="center"><?php echo $d["sector"]; ?></td>
</tr>
<tr>
<td width="134" align="center">FLIGHT #</td>
<td width="132" align="center">CLASS</td>
<td width="112" align="center">DATE</td>
<td width="130" align="center">DEP. TIME</td>
<td width="132" align="center">ARR. TIME</td>
<td width="120" align="center">STATUS</td>
</tr>
<tr>
<td><?php echo $d["flight_no."]; ?></td>
<td><?php echo $d["class"]; ?></td>
<td><?php echo $d["name"]; ?></td>
<td><?php echo $d["departure"]; ?></td>
<td><?php echo $d["arrival"]; ?></td>
<td><?php echo "confirm"; ?></td>
</tr>

</table>
<div id="submit" align="center">
<form name="form1" method="POST">
<input type="submit" value="Print" name="submit"/>
</form>
</div>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:02:58.827

打印必须在客户端完成，而不是服务器端。这不应该是一种形式（我实际上会将其设为链接）。最简单的方法：

```
<input type="submit" value="Print" onclick="print(); return false;"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:03:12.870

您可以使用 javascript 函数触发打印事件 bij `window.print()`：.

例子：

```
<a href="javascript:window.print()">print page</a> 
```

## 小费！

使用打印 CSS 告诉浏览器要打印什么！这样用户就不会浪费纸张；）

包含打印 CSS 样式表的示例：`<style type="text/css" media="print" href="print.css" />`

有关 CSS 打印样式表的更多信息：[http ://www.alistapart.com/articles/goingtoprint/](http://www.alistapart.com/articles/goingtoprint/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:03:00.687

[您可以使用print](http://www.w3schools.com/jsref/met_win_print.asp)方法通过 javascript 调用打印

```
<A HREF="javascript:window.print()">Click to Print This Page</A> 
```

您可能希望在打印页面时隐藏页面中的某些元素。为此，您可以像这样使用 css：

```
@media print {
   .non-printable { display: none; }
  } 
```

然后给那些你不想打印的元素提供不可打印的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:07:30.817

其他人是正确的，这将完成

`<a href="javascript:window.print()">print ticket</a>`

您可能还想为打印版本创建一个单独的 CSS 样式，以去除不必要的图形。如果有单独的登机牌或其他东西，您还可以添加手动分页符。

```
<link rel="stylesheet" href="css/print.css" type="text/css" media="print" /> 
```

# r - 合并数据表，如 R 中的数据框

> ID：11435551
> 
> 赞同：12
> 
> 时间：2012-07-11T15:00:43.673
> 
> 标签：r, data.table

由于时间限制，我决定在我的代码中使用数据表而不是数据帧，因为它们要快得多。但是，我仍然想要数据框的功能。我需要合并两个数据表，保留所有值（例如在合并中设置 all=TRUE）。

一些示例代码：

```
> x1 = data.frame(index = 1:10)
> y1 = data.frame(index = c(2,4,6), weight = c(.2, .5, .3))
> x1
   index
1      1
2      2
3      3
4      4
5      5
6      6
7      7
8      8
9      9
10    10
> y1
  index weight
1     2    0.2
2     4    0.5
3     6    0.3

> merge(x,y, all=TRUE)
      index weight
 [1,]     1     NA
 [2,]     2      1
 [3,]     3     NA
 [4,]     4      2
 [5,]     5     NA
 [6,]     6      3
 [7,]     7     NA
 [8,]     8     NA
 [9,]     9     NA
[10,]    10     NA 
```

现在我可以对数据表做类似的事情吗？（NA不一定要留下来，反正我把它们改成0）。

```
> x2 = data.table(index = 1:10, key ="index")
> y2 = data.table(index = c(2,4,6), weight= c(.3,.5,.2)) 
```

我知道你可以合并，但我也知道有更快的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:37:27.083

因此，从[将外键上的 SQL 连接翻译为 R data.table 语法](https://stackoverflow.com/questions/9914734/translating-sql-joins-on-foreign-keys-to-r-data-table-syntax)

```
x2 = data.table(index = 1:10, key ="index")
y2 = data.table(index = c(2,4,6), weight= c(.3,.5,.2),key="index")
y2[J(x2$index)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T16:20:18.113

我使用如下函数：

```
mergefast<-function(x,y,by.x,by.y,all) {
  x_dt<-data.table(x)
  y2<-y
  for (i in 1:length(by.y)) names(y2)[grep(by.y[i],names(y2))]<-by.x[i]
  y_dt<-data.table(y2)
  setkeyv(x_dt,by.x)
  setkeyv(y_dt,by.x)
  as.data.frame(merge(x_dt,y_dt,by=by.x,all=all))
} 
```

可以在您的示例中用作：

```
mergefast(x1,y1,by.x="index",by.y="index",all=T) 
```

它有点缺乏`merge`具有例如`by`,的功能`all.x`，`all.y`但这些可以很容易地合并。

# sql - 选择查询并在大表中加入超过 7 小时

> ID：11435552
> 
> 赞同：1
> 
> 时间：2012-07-11T15:00:47.253
> 
> 标签：sql, performance, oracle

我们的系统面临从 3800 万行表中选择行的性能问题。

这个包含 3800 万行的表存储来自客户/供应商等的信息。这些信息出现在许多其他表中，例如 Invoices。

主要问题是我们的数据库远未标准化。Clients_Suppliers 表有一个由 3 列组成的复合键，即 Code - varchar2(16)、Category - char(2)，最后一个是 up_date，一个日期。一个客户地址的每一次更改都存储在同一个表中，并带有一个新的日期。所以我们可以有这样的记录：

```
code             ca   up_date
---------------- --   --------
1234567890123456 CL   01/01/09
1234567890123456 CL   01/01/10
1234567890123456 CL   01/01/11
1234567890123456 CL   01/01/12
6543210987654321 SU   01/01/10
6543210987654321 SU   08/03/11 
```

最糟糕的是，在每个使用客户信息的表中，而不是完整的复合键，只存储代码和类别。例如，发票有自己的密钥，包括发行日期。所以我们可以有这样的东西：

```
invoice_no serial_no emission code             ca
---------- --------- -------- ---------------- --
1234567890 12345     05/02/12 1234567890123456 CL 
```

我的具体问题是我必须生成在给定期间为其创建发票的客户列表。由于我必须从客户那里获取最新信息，因此我必须使用 max(up_date)。

所以这是我的查询（在 Oracle 中）：

```
SELECT
  CL.CODE,
  CL.CATEGORY,
  -- other address fields
FROM
  CLIENTS_SUPPLIERS CL
  INVOICES I
WHERE
  CL.CODE = I.CODE AND
  CL.CATEGORY = I.CATEGORY AND
  CL.UP_DATE = 
    (SELECT
       MAX(CL2.UP_DATE)
     FROM
       CLIENTS_SUPPLIERS CL2
     WHERE
       CL2.CODE = I.CODE AND
       CL2.CATEGORY = I.CATEGORY AND
       CL2.UP_DATE <= I.EMISSION
    ) AND
  I.EMISSION BETWEEN DATE1 AND DATE2 
```

选择 178,000 行最多需要 7 个小时。Invoices 在 DATE1 和 DATE2 之间有 300,000 行。

这是一个（非常、非常、非常）糟糕的设计，我提出了我们应该通过规范化表格来改进它的事实。这将涉及为客户端创建一个表，其中每对代码/类别有一个新的 int 主键，另一个用于 Adresses（客户端主键作为外键），然后在每个相关的表中使用 Adresses 的主键给客户。

但这意味着要改变整个系统，所以我的建议被回避了。我需要找到一种不同的方法来提高性能（显然只使用 SQL）。

我尝试过索引、视图、临时表，但没有一个对性能有任何显着改善。我没有想法，有人有解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:22:42.080

DBA 有什么要说的？

他/她是否尝试过：

*   合并表空间
*   增加并行查询从属
*   将索引移动到单独物理磁盘上的单独表空间
*   收集相关表/索引的统计信息
*   运行解释计划
*   通过索引优化器运行查询

我并不是说 SQL 是完美的，但如果性能随着时间的推移而下降，DBA 真的需要看看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:10:27.997

```
SELECT   
  CL2.CODE,
  CL2.CATEGORY,
  ... other fields
FROM 
  CLIENTS_SUPPLIERS CL2 INNER JOIN (
    SELECT DISTINCT
      CL.CODE,
      CL.CATEGORY,
      I.EMISSION
    FROM
      CLIENTS_SUPPLIERS CL INNER JOIN INVOICES I ON CL.CODE = I.CODE AND CL.CATEGORY = I.CATEGORY
    WHERE
      I.EMISSION BETWEEN DATE1 AND DATE2) CL3 ON CL2.CODE = CL3.CODE AND CL2.CATEGORY = CL3.CATEGORY
WHERE
  CL2.UP_DATE <= CL3.EMISSION
GROUP BY
  CL2.CODE,
  CL2.CATEGORY
HAVING
  CL2.UP_DATE = MAX(CL2.UP_DATE) 
```

我们的想法是分离流程：首先我们告诉 oracle 向我们提供您想要的期间的发票的客户列表，然后我们获得它们的最新版本。在您的版本中，有一个针对 MAX 38000000 次的检查，我真的认为这是在查询中花费的大部分时间。

但是，我不要求索引，假设它们设置正确......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:56:44.563

相关子查询可能会导致问题，但对我来说，真正的问题在于似乎是您的主客户端表，如果不做 max(up_date) 混乱，您将无法轻松获取最新数据。它实际上是历史数据和当前数据的混合体，正如您所描述的设计不佳。

无论如何，它将帮助您在此连接和其他长期运行的连接中拥有一个仅包含客户端最新数据的表/视图。因此，首先为此构建一个垫子视图（未经测试）：

```
create or replace materialized view recent_clients_view
tablespace my_tablespace
nologging
build deferred
refresh complete on demand
as
select * from 
(
  select c.*, rownumber() over (partition by code, category order by up_date desc, rowid desc) rnum
  from clients c
)
where rnum = 1; 
```

在代码、类别上添加唯一索引。假设这将在一些非工作时间定期刷新，并且您使用它的查询将可以显示上次刷新日期的数据。在 DW 环境或报告中，这通常是常态。

此视图的快照表应该比包含所有历史记录的完整客户端表小得多。

现在，您正在对这个较小的视图进行合并发票，并对代码、类别（日期 1 和日期 2 之间的排放）进行等值连接。就像是：

```
select cv.*
from 
recent_clients_view cv,
invoices i
where cv.code = i.code
and cv.category = i.category
and i.emission between :date1 and :date2; 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:10:44.510

您可以尝试重写查询以使用分析函数而不是相关子查询：

```
select *
from (SELECT CL.CODE, CL.CATEGORY,   -- other address fields
             max(up_date) over (partition by cl.code, cl.category) as max_up_date
      FROM CLIENTS_SUPPLIERS CL join
           INVOICES I
           on CL.CODE = I.CODE AND
              CL.CATEGORY = I.CATEGORY and
              I.EMISSION BETWEEN DATE1 AND DATE2 and
              up_date <= i.emission
     ) t
where t.up_date = max_up_date 
```

您可能想要删除外部选择中的 max_up_date 列。

正如一些人所注意到的，此查询与原始查询略有不同，因为它在所有日期中取了 up_date 的最大值。原始查询具有以下条件：

```
CL2.UP_DATE <= I.EMISSION 
```

但是，通过传递性，这意味着：

```
CL2.UP_DATE <= DATE2 
```

所以唯一的区别是当更新日期的最大值小于原始查询中的 DATE1 时。但是，这些行将通过与 UP_DATE 的比较而被过滤掉。

虽然这个查询的措辞略有不同，但我认为它做同样的事情。我必须承认我不是 100% 肯定的，因为这是我不熟悉的数据的微妙情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:08:41.197

假设 (code,ca) 的行数很少，我会尝试使用内联视图强制对每个发票进行索引扫描，例如：

```
SELECT invoice_id, 
       (SELECT MAX(rowid) KEEP (DENSE_RANK FIRST ORDER BY up_date DESC
          FROM clients_suppliers c
         WHERE c.code = i.code
           AND c.category = i.category
           AND c.up_date < i.invoice_date)
  FROM invoices i
 WHERE i.invoice_date BETWEEN :p1 AND :p2 
```

然后，您将加入此查询以`CLIENTS_SUPPLIERS`希望通过 rowid 触发加入（300k rowid 读取可以忽略不计）。

您可以使用 SQL 对象改进上述查询：

```
CREATE TYPE client_obj AS OBJECT (
   name     VARCHAR2(50),
   add1     VARCHAR2(50),
   /*address2, city...*/
);

SELECT i.o.name, i.o.add1 /*...*/
  FROM (SELECT DISTINCT
               (SELECT client_obj(
                         max(name) KEEP (DENSE_RANK FIRST ORDER BY up_date DESC),
                         max(add1) KEEP (DENSE_RANK FIRST ORDER BY up_date DESC)
                         /*city...*/
                       ) o
                  FROM clients_suppliers c
                 WHERE c.code = i.code
                   AND c.category = i.category
                   AND c.up_date < i.invoice_date)
          FROM invoices i
         WHERE i.invoice_date BETWEEN :p1 AND :p2) i 
```

# arrays - MongoDB - 是否在数组中搜索_id

> ID：11435554
> 
> 赞同：0
> 
> 时间：2012-07-11T15:00:52.020
> 
> 标签：arrays, mongodb

我想实现一个用户关注系统。一个用户可以关注其他用户。我正在考虑两种方法。一种是模式中存在`followers`and `followees`，`User`它们都是 user 的数组`_id`。另一个是只存在`followers`于模式中。每当我想找到一个用户的关注者时，我都必须搜索所有用户的`followers`数组，即`db.user.find( { followers: "_id" } );`. 两种方法的优缺点是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:35:58.173

您在这里考虑的是经典的“多对多”关系。与 RDBMS 不同，在 RDBMS 中，此模式只有一个“正确”范式，在 MongoDB 中，正确的模式设计取决于您使用数据的方式，以及您在此处未提及的其他几个因素.

请注意，对于本次讨论，我假设“跟随”关系不是对称的——也就是说，A 可以跟随 B 而 B 不必跟随 A。

1）在 MongoDB 中有两种基本的方法来建模这种关系。

*   您可以在用户文档中嵌入索引的“以下”数组。
*   您可以拥有一个单独的“以下”文档集合，如下所示：

    {用户：ObjectID（“x”），以下：ObjectID（“y”）}

对于以下每个关系，您将在此集合中拥有一个文档。您需要在此集合上有两个索引，一个用于“用户”，一个用于“关注”。

请注意，您问题中的第二个建议（在用户文档中包含“关注”和“关注”的数组）只是第一个的变体。

2) 正确的设计取决于您在这里没有提到的几个因素。

*   一个人可以有多少粉丝，一个人可以关注多少人？
*   您最常见的查询是什么？是展示关注者列表，还是展示被关注用户列表？
*   您多久更新一次关注者/关注列表？

3) 取舍如下：

嵌入式数组方法的优点是代码更简单，您可以在单个文档中获取整个关注用户数组。如果您索引“关注”数组，那么查找所有用户关注者的查询将相对较快，只要该索引完全适合 RAM。（这与关系数据库没有什么不同。）

如果您经常更新关注者，或者如果您允许无限数量的关注者/关注者，则会出现嵌入式数组方法的缺点。

如果您允许无限数量的追随者/追随者，那么您可能会溢出 MongoDB 文档的最大大小。对于某些人来说，拥有 10 万或更多的追随者并非闻所未闻。如果是这种情况，那么您需要采用单独收集方法。

如果您知道关注者会经常更新，那么您可能也希望使用单独收集方法。原因是每次添加关注者时，都会增加“关注者”数组的大小。当它达到一定的大小时，它将超过为它在磁盘上保留的空间量，MongoDB 将不得不移动文档。这将产生额外的写入开销，因为该文档的所有索引也必须更新。

4) 如果你想使用嵌入式数组方法，你可以做一些事情来使它更可行。

首先，您可以限制一个人可以拥有的关注者总数。其次，当你创建一个新用户时，你可以创建一个预先创建大量虚拟关注者的文档。（例如，您使用大量您知道不涉及任何实际用户的条目填充 'followers' 数组 - 可能是 ID 0。）这样，当您添加新的关注者时，您会替换其中一个 ID 0 条目与真实条目，并且文档大小不会增长。

其次，您可以限制某人可以拥有的关注者数量，并在应用程序中检查。

请注意，如果您在文档中使用双数组方法，您将减少一个人可以拥有的最大关注者数量（因为文档的一部分将被他们关注的用户数组占用）。

5）作为一种优化，您可以更改要分桶的“关注”文档。因此，您可以按用户对它们进行分桶，而不是为每个关注关系一个文档：

```
 { user: "X", following: [ "A", "B", "C" ... ] }
   { user: "X", following: [ "H", "I", "J" ... ] } 
   { user: "Y", following: [ "A", "X", "K" ... ] } 
```

6) 有关多对多建模方法的更多信息，请参阅此演示文稿：

*   [http://www.10gen.com/presentations/mongosf2011/schemabasics](http://www.10gen.com/presentations/mongosf2011/schemabasics)

有关“分桶”设计模式的更多信息，请参阅 MongoDB 文档中的此条目：

*   [http://docs.mongodb.org/manual/use-cases/storing-comments/#hybrid-schema-design](http://docs.mongodb.org/manual/use-cases/storing-comments/#hybrid-schema-design)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:22:49.983

如果您同时提供两者`followers`，`followees`那么您可能可以有效地为大多数查询提供服务，而无需在这些字段中的任何一个上使用二级索引。例如，您可以检索当前用户，然后使用 _id 上的默认索引来检索他们所有连接的列表。

```
db.users.find({_id: {$in: user_A.followers}}) 
```

如果不包含`followees`，则需要创建二级索引`followers`以便在不进行集合扫描的情况下为某些查询提供服务。例如，要确定用户 A 的所有关注者，您可以使用如下查询：

```
db.users.find({followers: user_A._id}) 
```

二级索引会花费您一些内存和磁盘空间，但可以避免潜在的数据不一致（关注者和关注者列表不匹配）。

# android - Android 从 sdcard 读取图像。尺寸错误

> ID：11435565
> 
> 赞同：0
> 
> 时间：2012-07-11T15:01:20.460
> 
> 标签：android, image, sd-card, filesize

我正在创建一个 android 应用程序，并想从 sdcard 读取文件并将其发送到休息网络服务。一切正常，但是当我从 sdcard 读取文件时，它的文件大小比它的原始大小大得多。一个 10 KB 的文件将获得 260 KB。

我正在做以下...

```
File f = new File(uri);
Log.d("ORIGINAL FILESIZE:"+f.length()); 
```

**SDCARD 上的文件大小为 10752 字节。**

这与手机上的图像尺寸完全相同。

```
Bitmap bmp = BitmapFactory.decodeFile(uri);
ByteArrayOutputStream bao = new ByteArrayOutputStream();

bmp.compress(Bitmap.CompressFormat.JPEG, 100, bao);
Log.d("FILESIZE AFTER:"+bao.size()); 
```

**解码/压缩后文件大小为 260904 字节。**

这是服务器接收并写入磁盘的文件大小。它的图像和质量相同，但大约大 20 倍。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:20:20.553

这没有错。或者至少它可能是。位图在内存中的字节表示需要（32 位图像）`height * widht * 4`字节。当然，由于压缩，它与文件大小不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:11:03.540

如果你的原始文件是高压缩率的jpeg，解码后的位图大很多是正常的，特别是如果你在`compress()`方法中使用100的质量（这意味着高质量）。

您是否尝试使用`compress()`较低质量值（参见[文档](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)）？

# c++ - 关于修改虚拟表绕行的问题

> ID：11435570
> 
> 赞同：2
> 
> 时间：2012-07-11T15:01:26.640
> 
> 标签：c++, gcc, vtable, detours, abi

我一直在使用与 Microsoft Detours 相同的方法练习 detours（将前五个字节替换为 jmp 和地址）。最近，我一直在阅读有关通过修改虚拟表来绕行的信息。如果有人能通过提及与前面提到的方法相比的一些优点和缺点来阐明这个主题，我将不胜感激！

我还想询问有关堆栈上已修补的 vtable 和对象的信息。考虑以下情况：

```
// Class definition
struct Foo
{
 virtual void Call(void) { std::cout << "FooCall\n"; }
};

// If it's GCC, 'this' is passed as the first parameter
void MyCall(Foo * object)
{
 std::cout << "MyCall\n";
}

// In some function
Foo * foo = new Foo; // Allocated on the heap
Foo foo2; // Created on the stack

// Arguments: void ** vtable, uint offset, void * replacement
PatchVTable(*reinterpret_cast<void***>(foo), 0, MyCall);

// Call the methods
foo->Call(); // Outputs: 'MyCall'
foo2.Call(); // Outputs: 'FooCall' 
```

在这种情况下`foo->Call()`，最终会在调用原始函数（即方法）`MyCall(Foo * object)`时调用。这是因为如果可能，编译器将尝试在编译期间决定任何虚拟调用（如果我错了，请纠正我）。这是否意味着您是否修补虚拟表并不重要，只要您使用堆栈上的对象（不是堆分配的）？`foo2.Call()``Foo::Call(void)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:38:35.180

堆栈与堆无关紧要 - 重要的是编译器在编译时知道对象的类型。除非优化器非常聪明，否则以下可能会产生相同的结果：

```
Foo foo2; // Created on the stack
Foo * foo = &foo2; // Also on the stack, in fact the same object 
```

由于类型`foo2`是已知的，编译器可以直接调用函数而无需查看任何 vtable。它不能做同样的事情，`foo`因为指针也可以指向派生对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:13:49.943

当您使用 foo2.call() 编译器时，不应使用 vtable 来确定要调用哪个函数，它会在类中调用函数而不调用 vtable。

# c++ - 包括 windows.h

> ID：11435576
> 
> 赞同：-3
> 
> 时间：2012-07-11T15:01:40.420
> 
> 标签：c++, windows, winapi, include

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

有没有区别：

```
#include "windows.h" 
```

和

```
#include <windows.h> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:03:46.880

是的。

```
#include "something" 
```

尝试首先在当前目录中包含文件，并且

```
#include <something> 
```

始终包含系统目录中的文件。

# c# - 获取 Outlook 2010 规则说明

> ID：11435578
> 
> 赞同：6
> 
> 时间：2012-07-11T15:01:43.167
> 
> 标签：c#, outlook, outlook-addin, outlook-2010

我正在为 Outlook 2010 开发插件。我必须为它们获取所有规则和描述。我可以访问规则，但我不明白如何获得图片上的描述。![在此处输入图像描述](../Images/0bf717919d57447084963091df846665.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:11:46.407

**VSTO API**中不直接提供规则描述- 但您可以通过枚举和翻译[规则条件](http://msdn.microsoft.com/en-us/library/ff867147.aspx)( *[`Rule.Conditions`](http://msdn.microsoft.com/en-us/library/ff869579)*/ *[`Rule.Exceptions`](http://msdn.microsoft.com/en-us/library/ff867239)*) 和[规则操作](http://msdn.microsoft.com/en-us/library/ff868996.aspx)( *[`Rule.Actions`](http://msdn.microsoft.com/en-us/library/ff862765)*) 自己解释它。

# javascript - 玉模板系统自动隐藏div元素？

> ID：11435582
> 
> 赞同：0
> 
> 时间：2012-07-11T15:01:57.423
> 
> 标签：javascript, node.js, pug

我有这个玉脚本，我试图隐藏“菜单”，但它也一直隐藏复制 div。

```
 #copy
        h1 <span style="color:yellow">Hello</span>
        #menu.hidden
              p.we_are We are
              p.approach Our Approach
              p.we_love We Love
              p.our_team Our Team
              p.learn_more To Learn More 
```

当它编译为 html 时，它也隐藏了复制 div - 我不确定它是否有缩进。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:08:14.643

你看源码了吗？#copy 中没有任何内容，除非您缩进下一行。

```
#copy
    h1
        span(style='color:yellow') Hello 
```

# php - PHP：来自 youtube url 的嵌入式代码 - 工作但 Iframe 问题

> ID：11435585
> 
> 赞同：2
> 
> 时间：2012-07-11T15:02:01.430
> 
> 标签：php, iframe

我试图通过从 Youtube 视频 URL 中提取变量来获取嵌入代码。到目前为止，我有嵌入工作的旧方式，但没有 Iframe 方式。如果 url 在“watch?v=”之后只有 11 个字符，则 Iframe 可以正常工作，但是当 url 包含“&feature=g”这 11 个字符时问题就来了。有没有办法去掉“&feature=g”或者更好的方法？第二个也是次要的，每次我点击自动播放时，我都没有获得视频的自动播放结果？这是我的[示例](http://webprolearner2346.zxq.net/youtube_video/)

**用于获取嵌入代码的 PHP**

```
<?php
$vari ='';

if($_POST)
{
    $vari       = $_POST['yurl'];
    $hth        = 300; //$_POST['yheight'];
    $wdth       = 500; //$_POST['ywidth'];
    $is_auto    =   0;

    $step1 =explode ('v=', $vari);
    $step2 =explode ('&amp;',$step1[1]);

    if(isset($_POST['yautop'] ))
    {
        if($_POST['yautop'] == 1)
            $is_auto    =   1;
    }
    $auto1  = '?autoplay='.$is_auto;
    $auto2  = '&autoplay='.$is_auto;

//Iframe code

echo  ('<iframe src="http://www.youtube.com/embed/'.$step2[0].'" frameborder="0" width="'.$wdth.'" height="'.$hth.'"></iframe>');

//Old way to embed code
echo  ('<embed width="'.$wdth.'" height="'.$hth.'" type="application/x-shockwave-flash" src="http://www.youtube.com/v/'.$step2[0].'" wmode="transparent" embed="" /></embed>');
}
?> 
```

**html**

```
<html>

<form method="post" action="">
URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="text" value="<?php $vari ?>" name="yurl"> <!--$vari-->
<br>
<br>
Autoplay:&nbsp;
<input type="checkbox" value="<?php $auto1; $auto2; ?>" name="yautop">  <!--$auto1 $auto2-->
<br>
<input type="submit" value="Generate Embed Code" name="ysubmit">
<br>
</form>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:08:31.927

`explode()`您可以通过 REGEX 提取 vid ID，而不是多次调用。

```
$vid_url = "http://www.youtube.com/watch?v=2RgTmJ5oCCA&feature=g-vrec";
preg_match('/(?<=v=)[^&]+/', $vid_url, $vid_id);
//the vid's ID is now in $vid[0] 
```

# loops - Shell 编程 - 完成后在 while 循环中获取值

> ID：11435594
> 
> 赞同：0
> 
> 时间：2012-07-11T15:02:24.040
> 
> 标签：loops, while-loop, sh

我有这段代码：

```
var1=0

while loop
do
var1="1";
done

echo "$var1"; 
```

结果是 0，而不是 1。但是，如果我在 while 循环内回显，则输出为 1。我知道 .sh 不能将子进程（子进程）传递给父进程。`var1`循环结束后如何更改代码以反映循环中的更改？

我将导出视为一种选择，但我不确定如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:38:14.467

我正在尝试为您的问题提供示例循环条件“*如何更改代码以反映循环结束后循环中的 var1 更改？* ”

```
 var1="0"
 loop="1"

 while [ $var1 -ne $loop ]
 do
      var1="1"
 done
 echo $var1 
```

希望您提供更多详细信息后，我们能够更好地为您提供帮助。

# php - MySQL远程访问麻烦？

> ID：11435598
> 
> 赞同：1
> 
> 时间：2012-07-11T15:02:49.967
> 
> 标签：php, mysql

我在 Godaddy 服务器上设置了一个数据库。它被配置为允许远程访问，并且我正在运行的几个网站需要访问这些数据。当从另一个 Godaddy 站点访问时，它可以工作，并且我可以在工作和家庭中从我的开发环境进行连接。我们最近使用 mydomain.com 设置托管。

这是触发它的代码块：

```
function connect(){
    $servername = "XX.XX.XXX.XX";
    $dbusername = "databaseusername";
    $dbpassword = "mahpassword";
    $dbname = "databasename";
    try{
      $newMysql = new PDO("mysql:host=".$servername.";dbname=".$dbname, $dbusername, $dbpassword);
    }
        catch(PDOException $e){
        echo 'connection Failed: '. $e->getMessage();
        die;
    }
} 
```

现在我在新网站上收到此错误消息：

```
connection Failed: SQLSTATE[HY000] [2003] Can't connect to MySQL server on 'XX.XX.XXX.XX' (111) 
```

我能想到的唯一问题是，由于某种原因，MySQL 数据库默认连接的 IP 地址数量有限（这似乎很奇怪），我被 MySQL 服务器上的防火墙阻止了（再次。 . 对我来说没有意义），或者 mydomain 托管服务器上有一些设置不允许远程请求（？）

我是这种事情的新手，所以我愿意接受任何建议。我可能只是在新站点上设置另一个数据库，但如果我不需要，我不想让它们保持同步的麻烦。可能有什么问题？有什么解决方法吗？

[edit] 通过控制台连接远程数据库`(mysql -h XX.XX.XXX.XX ...)`，权限在information_schema 数据库下找到，快速`select * from SCHEMA_PRIVILEGES`显示`select * from USER_PRIVILEGES`有`'databaseusername'@'%'`足够权限。并不是说它对我有任何帮助，但也许它会帮助别人。[/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T21:51:08.837

由于我问这个问题已经一年多了，我想我需要回答它才能关闭它。

事实证明，godaddy 通过防火墙阻止了 mydomain.com 服务器（“远程访问”受到限制）。所以为了完成我想做的事情，我不得不在两个站点上复制和存储数据库。

# actionscript-3 - 如何创建时间选择器

> ID：11435601
> 
> 赞同：0
> 
> 时间：2012-07-11T15:02:52.473
> 
> 标签：actionscript-3, apache-flex, flash-builder

我需要使用时间选择器。我找到了很多解决方案，比如字段或数字步进器，但对我来说都更糟。更好的似乎是字段，但如何限制用户在“：”之前和之后只输入数字。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:44:29.583

Flex 4.6 有一个[DateSpinner](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb702fbebf5a1312e95e4e3-8000.html)组件，它提供日期、时间和日期/时间输入功能。问题是该组件是移动组件的一部分。要为常规 flex 项目启用该组件，只需在 Flex SDK 中搜索 mobile.swc、mobiletheme.swc，并将它们添加为 Flex 项目的一部分。

这是一个快速但可能不是最优雅的解决方案，但至少您可以在几分钟内启动并运行它。

更新：或者，您可以考虑 Yahoo 的[Astra TimeInput 组件](http://developer.yahoo.com/flash/astra-flex/timeinput/)，它被编写为 mx 组件，但在 spark 应用程序中应该仍然可以正常工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T15:26:27.187

我在最近的项目中使用[了这个](http://trentrichardson.com/examples/timepicker/)timepicker jquery 插件，它很棒。

# javascript - 骨干视图自定义事件

> ID：11435608
> 
> 赞同：3
> 
> 时间：2012-07-11T15:03:10.857
> 
> 标签：javascript, jquery, backbone.js, backbone-events, backbone-views

我想通过 keydown 验证用户输入。为此，我需要一个 keydown 事件。不幸的是，我只找到了自定义模型事件：

```
initalize: function(){
    this.model = new ModelClass();
    this.model.bind("keydown", this.validate, this);
} 
```

这种方法肯定适用于模型事件，但我不认为这是查看与 ui 相关的东西的正确方法......

为了给您更好的解释，这就是我想使用我的事件的方式：

```
var SomeView;

SomeView = Backbone.View.extend({
    events: {
        "keydown input#some-field": "validate" // custom event
        , "change input#some-field": "doSomethingElse" // predefined backbone event
    },
    validate: function(attr){
        // validation
    }
}); 
```

那么创建可在视图中调用的自定义主干事件的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:22:35.233

**创建可在视图中调用的自定义主干事件的方法是什么？** 我感觉好像你的问题不是问题，因为backbone.view默认已经支持事件了。你可以编写你想要的代码：

```
//This is the right thing to do
SomeView = Backbone.View.extend({
    events: {
        "keydown input#some-field": "validate" // custom event
        , "change input#some-field": "doSomethingElse" // predefined backbone event
    },
    validate: function(attr){
        // validation
    }
}); 
```

参考这里： [http ://backbonejs.org/docs/todos.html#section-22](http://backbonejs.org/docs/todos.html#section-22)

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~

编辑：你可以在这里看到：http: [//backbonejs.org/docs/backbone.html#section-156](http://backbonejs.org/docs/backbone.html#section-156)

最关键的一句话是：</p>

```
this.$el.delegate(selector, eventName, method); 
```

因为backbone的事件是jquery的delegate(http://api.jquery.com/delegate/)，所以jQuery的delegate支持事件，backbone是可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:28:06.233

我不确定我是否理解问题所在。您的第二个示例绝对是我将如何在主干视图中设置事件处理程序的方式。Backbone 的 validate 方法只存在于模型中，在模型 set 和 save 被调用之前自动调用。默认情况下未定义。如果您在视图中进行验证，尽管您的方式应该可行。但我相信事件处理函数只传递事件。所以应该是

```
validate: function (event) {
   // do Something here
} 
```

您还应该记住，主干事件委托发生在 el.xml 中。所以您需要手动设置它或渲染它，以便事件委托工作

# bash - if 语句中的语法错误

> ID：11435612
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:03:26.897
> 
> 标签：bash, if-statement, syntax-error

句法：

```
while read l
do
    export filename=$l
    if [[ `echo $filename | sed -n 's:TEST.*/TEST:&:p'` -ne 0 ]];
    then
        echo "both are same : $filename"
    else
        echo "diff: $filename"
    fi
done < scripts2.txt* 
```

问题：通常它工作正常。但是对于以下数据，它会引发语法错误......

```
<TEST><![BIGDATA[$EXECUTE SCRIPT ON ALL SERVER $WELCOME#]]></TEST> 
```

请让我知道确切的问题是什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:02:16.283

作为一般规则，不要尝试使用正则表达式解析 XML/HTML。XML 不是一种[常规语言](http://en.wikipedia.org/wiki/Regular_language)，您会遇到层出不穷的问题。你最终想要做什么？可能有一种更简单的方法来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:17:15.330

很难理解你想要表演什么。上面代码中的一个明显错误是您试图`-ne`与不是数字的东西进行算术比较 ( )。

`echo ... | sed ...`上面输入的表达式应该产生字符串“ ”，并且您`<&>`正在测试它是否不等于零。

同样，澄清您的意图将使其他人能够帮助您。

# java - StackOverflowError 和 OutOfMemoryError 有什么区别

> ID：11435613
> 
> 赞同：46
> 
> 时间：2012-07-11T15:03:40.553
> 
> 标签：java

StackOverflowError 和 OutOfMemoryError 有什么区别以及如何在应用程序中避免它们？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-11T15:04:47.767

**简短的回答：**

*   `OutOfMemoryError`与堆有关。
*   `StackOverflowError`与堆栈有关

**长答案：**

开始时，`JVM`您可以定义它可以用于处理的 RAM 量。`JVM`出于处理目的将其划分为某些内存位置，其中两个是**`Stack`&`Heap`**

如果您在内存中有大对象（或）引用的对象，那么您将看到`OutofMemoryError`. 如果您对对象有强引用，则 GC 无法清理为该对象分配的内存空间。当 JVM 尝试为新对象分配内存并且没有足够的可用空间时，它会抛出`OutofMemoryError`，因为它无法分配所需的内存量。

**如何避免**：确保不需要的对象可用于 GC

您所有的局部变量和方法调用相关数据都将在堆栈上。对于每个方法调用，将创建一个堆栈框架，并将本地以及与方法调用相关的数据放置在堆栈框架内。一旦方法执行完成，堆栈帧将被删除。重现此问题的一种方法是，对方法调用进行无限循环，您将看到`stackoverflow`错误，因为每次调用的堆栈帧都将填充方法数据，但不会被释放（删除）。

**如何避免**：确保方法调用结束（不是无限循环）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T15:12:00.170

Imagine you have a function like the following

```
public void f(int x) {
    return f(x + 1);
} 
```

When you'll call it the call will call `f` again and again and again. At each call a bit of information is stored on the stack. Since the stack is limited in size you will get a `StackOverflowError`.

Now imagine the following code:

```
for (int i = 1; i > 0; i++)
    vector.add(new BigObject()); 
```

where `BigObject` is a normal Java object. As you see, the loop never terminates. Each allocation is done on the heap thus it will be filled with `BigObject`s and you will get an `OutOfMemoryError`.

To recap:

*   `OutOfMemoryError` is thrown when you are creating objects
*   `StackOverflowError` is thrown when you are calling functions

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T15:07:01.353

`StackOverflowError`当您在另一个内部执行太多方法（例如使用无限递归）时会发生这种情况，这受*堆栈*大小的限制。

`OutOfMemoryError` happens when the JVM runs out of space to allocate new objects, which are allocated on the *heap*.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-12T10:09:20.380

In Java Virtual Machine there are several memory area defined :

1.  Java Virtual Machine stacks
2.  Heap area
3.  Method area
4.  Run time constant pool
5.  Native method stacks

In all above, you can choose your precision that memory allocated to those memory area will be fixed or will be changed dynamically at runtime.

Now about the question, [`OutOfMemoryError`](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5) is applicable for all of the above listed. `OutOfMemoryError` will be thrown if memory expansion of any of the memory area will be attempted but enough memory is not available to allocate.

and [`StackOverFlowError`](http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html) is applicable for *Native Method Stack* and *Java Virtual Machine Stack*. `StackOverFlowError` will be thrown If the computation in a thread requires a larger stack than is permitted.

For Detailed reference you can read [THE STRUCTURE OF THE JAVA VIRTUAL MACHINE](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-06T11:34:53.413

There are two(2) areas in memory the heap and stack.

1.  **stack memory** is used to store local variables and function call.
2.  **heap memory** is used to store objects in Java

If there is no memory left in stack for storing function call or local variable, JVM will throw **java.lang.StackOverFlowError**,

while if there is no more heap space for creating object, JVM will throw **java.lang.OutOfMemoryError**:

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-21T11:35:55.967

> **The following exceptional conditions are associated with Java Virtual Machine stacks:**
> 
> If the computation in a thread requires a larger Java Virtual Machine stack than is permitted, the Java Virtual Machine throws a ***StackOverflowError***.
> 
> If Java Virtual Machine stacks can be dynamically expanded, and expansion is attempted but insufficient memory can be made available to effect the expansion, or if insufficient memory can be made available to create the initial Java Virtual Machine stack for a new thread, the Java Virtual Machine throws an ***OutOfMemoryError***.
> 
> **The following exceptional condition is associated with the heap:**
> 
> If a computation requires more heap than can be made available by the automatic storage management system, the Java Virtual Machine throws an ***OutOfMemoryError***.
> 
> **The following exceptional condition is associated with the method area:**
> 
> If memory in the method area cannot be made available to satisfy an allocation request, the Java Virtual Machine throws an ***OutOfMemoryError***.
> 
> **The following exceptional condition is associated with the construction of the run-time constant pool for a class or interface:**
> 
> When creating a class or interface, if the construction of the run-time constant pool requires more memory than can be made available in the method area of the Java Virtual Machine, the Java Virtual Machine throws an ***OutOfMemoryError***.
> 
> The following exceptional conditions are associated with native method stacks:
> 
> **If the computation in a thread requires a larger native method stack than is permitted, the Java Virtual Machine throws a StackOverflowError.**
> 
> If native method stacks can be dynamically expanded and native method stack expansion is attempted but insufficient memory can be made available, or if insufficient memory can be made available to create the initial native method stack for a new thread, the Java Virtual Machine throws an ***OutOfMemoryError***.

[https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-2.html](https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-2.html)

2.5.2\. Java Virtual Machine Stacks

2.5.3\. Heap

2.5.4\. Method Area

2.5.5\. Run-Time Constant Pool

2.5.6\. Native Method Stacks

2.6\. Frames

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-17T08:22:59.630

**StackOverflowError**

*   It is related to Stack memory.
*   It occurs when Stack is full.
*   It is thrown when you call a method and there is no space left in the stack.
*   It occurs when you are calling a method recursively without proper terminating condition.
*   How to avoid? Make sure that methods are finishing their execution and leaving the stack memory.

**OutOfMemoryError**

*   It is related to heap memory.
*   It occurs when heap is full.
*   It is thrown when you create a new object and there is no space left in the heap.
*   It occurs when you are creating lots of objects in the heap memory.
*   How to avoid? Try to remove references to objects which you don’t need anymore.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-11T15:13:44.170

StackOverflowError : Thrown when a stack overflow occurs because an application recurses too deeply.

OutOfMemoryError : Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-10T14:14:15.053

From [Javadocs](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.5): **Exceptional conditions associated with JVM Stacks:**

1) if insufficient memory can be made available to create the initial JVM stack for a new thread, the JVM throws an OutOfMemoryError.

2) If the computation in a thread requires a larger JVM stack than is permitted, the JVM throws a StackOverflowError.

3) If JVM stack can be dynamically expanded, and expansion is attempted but insufficient memory can be made available to effect the expansion, the JVM throws an OutOfMemoryError.

**Exceptional conditions associated with Heap:**

1) If a computation requires more heap than can be made available by the automatic storage management system, the JVM throws an OutOfMemoryError.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-11T04:44:01.200

**java.lang.StackOverFlowError:**
1) **Thrown when stack memory is full**
2) The data related to method like parameters, local variables or references to objects are stored in this block. When the method finishes its execution, this block is removed from the stack along with data stored in it.
Whenever you call a method, it must finish its execution and leave the stack memory. If your methods are staying in the stack then stack will be full and JVM will throw java.lang.StackOverflowError. E.g:

```
public class FactorialExample
{
    private static void factorial(int i)
    {
        factorial((i+1) * i);   //calling itself with no terminating condition
    }

    public static void main(String[] args) 
    {
        factorial(1);
    }
} 
```

**java.lang.OutOfMemoryError:**
1) **Thrown when heap memory is full.**
2) JVM is unable to allocate the memory to new objects.
The objects you create in java are stored in the heap memory. When the objects are no more required, they must be removed from the memory. Garbage collector removes the unwanted objects from the heap memory. If your objects have live references, garbage collector doesn’t remove them. It removes only those objects which don’t have live references.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-06T15:13:27.657

Through the JVM specification, there are 5 data areas.

For JVM Stacks data areas, the spec said the memory size of JVM Stacks can be fixed or dynamically adjustable like the heap area.

When runs out of JVM Stacks memory, there are two cases:
1\. If JVM Stacks is implemented as a fixed size, JVM will throw a **StackOverflowError**.
2\. Otherwise, just like the heap area, JVM will throw **OutOfMemoryError** when failed to allocate more memory.

Any not only for the JVM Stacks area, memory allocations for other data areas will also case OutOfMemoryError due to insufficient memory resources.

For more information, see the [JVM specification - Run-Time Data Areas](https://docs.oracle.com/javase/specs/jvms/se13/html/jvms-2.html#jvms-2.5)

# entity-framework - 如何定义类似复选框列表的数据库字段

> ID：11435621
> 
> 赞同：0
> 
> 时间：2012-07-11T15:04:00.107
> 
> 标签：entity-framework, database-design, database-relations

我试过在互联网上寻找答案，但因为我不太了解数据库，所以我无法将我的问题表述为谷歌搜索。

如果这已在某处得到回答，我深表歉意，但我似乎无法找到它。一个可以回答这个问题的链接将不胜感激。

我正在尝试在我的数据库中设置表。我有一个包含许多字段的软件表，其中包括一个名为“兼容”的字段。

“兼容”用于存储本软件兼容的操作系统（即Windows XP、Windows 7等）。很简单。

对于具有一定数量响应的其他字段（如下拉列表），我使用单独的表和外键对数据库进行了规范化。我的猜测是，对“兼容”字段也这样做是“好习惯”，但我不确定应该如何设置规范化表。

我在这里找到了一些东西[http://forums.asp.net/t/1675666.aspx/1](http://forums.asp.net/t/1675666.aspx/1)可能是正确的方向，所以我想把我的桌子做成这样：

```
列名          数据类型
CompatibleWithId int
Windows XP 位
视窗 7 位

...希望以后能够添加更多...

```

我遇到的问题是，将来我需要添加到“兼容”字段中的选项列表中。有没有办法在 C# 代码中（我相信我正在使用 MVC 2 和 Entity Framework 4.3.1）将一列添加到上面的表中？还是我应该以完全不同的方式进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:33:38.200

根据我对您的软件要求的理解（如果我错了，请纠正我），这是我将如何拥有数据库模式

```
table1: software (id, name, blah, blah)
table2: operating_sys (id, os_name, version)
table3: compatibility (software_id, os_id) 
```

关系：

```
Software to compatibility --> one to Many 
```

所以兼容性表对于每个软件都会有多行。现在，如果您有更多的操作系统或版本，您可以将它们添加到 operating_sys 表中，并在兼容性表中添加相应的条目。

那是你要找的吗？

# html - CSS 表单/输入操作

> ID：11435625
> 
> 赞同：0
> 
> 时间：2012-07-11T15:04:13.360
> 
> 标签：html, css, forms, input, focus

```
input:required{
    background-color:#f00;
}

input:required label{
   color: #FF3434;
} 
```

我的表单目前有上面的 CSS 代码，

我希望能够在需要该字段时将标签设为红色。我的输入字段是：

```
<label for="frmComTelephone">Telephone</label>  
<input type="number" name="Telephone" id="frmComTelephone"/>

<label for="frmIn1IncinTime">Time</label>   
<input type="text" name="Incident Time" id="frmIn1IncinTime" required="required"/><br> 
```

但是那个 CSS 不起作用我该如何解决这个问题？

第二个问题是我有以下 CSS：

```
input:focus 
{ 
    background-color:yellow;
}

input[type="text"], input[type="date"],input[type="time"],input[type="number"],textarea,select
{
border-radius:5px;
border-width: 1px;
border-style: solid;
border-color: #C6C6C6; 
height:41px;
background-color: #FF3434;
width: 100%;

} 
```

但是当项目被聚焦时它不会变成黄色，如果我删除“背景颜色：#FF3434;” 对焦变黄了？

我正在做的事不能做吗？还是我要解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:09:19.677

您需要将规则放在`input:focus`规则后面`input[type="number"]`或使用`input[type="number"]:focus`.

否则它会被覆盖，`input[type="number"]`因为它更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:13:26.277

**问题一：**

```
input:required label{
   color: #FF3434;
} 
```

这行不通，因为`label`不是 的孩子`input`。他们是兄弟姐妹。要解决这个问题，您必须创建一个类并将其附加到您的标签上：

```
label.required { color: #FF3434; }
<label for="frmComTelephone" class="required">Telephone</label> 
```

**问题 2：**

试试这个：

```
input:focus,
textarea:focus,
select:focus
{ background-color: yellow !important; } 
```

...

**更新**

如果你不使用更舒服，`!important`那么试试这个：

```
input[type="text"]:focus, 
input[type="date"]:focus,
input[type="time"]:focus,
input[type="number"]:focus,
textarea:focus,
select:focus
{ background-color: yellow } 
```

***或者***

如果您`id`的表格上有一个，这也可以

```
#formID input:focus,
#formID textarea:focus,
#formID select:focus
{ background-color: yellow } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:27:25.057

### 问题2：

按属性、like`input[type="number"]`和伪元素 like 的CSS 选择器`:focus`具有相同的特异性。这意味着您的`input:focus`规则会被以下`input[type="number"]`背景覆盖。

有两种方法可以解决此问题：

第一个选择器中更高的特异性：

```
form input:focus 
{ 
    background-color:yellow;
}

input[type="text"]
{
    background-color: #FF3434;
} 
```

更好：正确的规则顺序，更重要的是其次

```
input[type="text"]
{
    background-color: #FF3434;
}

form input:focus 
{ 
    background-color:yellow;
} 
```

CSS 的特殊性似乎很难，但正确理解它是值得的。有很多关于它的资源，试试这个介绍：[http ://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

# zend-framework - 调用未定义的方法 Application_Model_DbTable_Projects::lastInsertId()

> ID：11435632
> 
> 赞同：1
> 
> 时间：2012-07-11T15:04:35.257
> 
> 标签：zend-framework

我想检索最后插入的行的 id。这是我在映射器中使用的代码：

```
public function save(Application_Model_Projects $project)
{
    $data = array(
        'id_user' => $project->getIdUser(),
        'project_name' => $project->getProjectName(),
        'project_description' => $project->getProjectDescription(),
        'due_date' => $project->getDueDate(),
        'id_customer' => $project->getIdCustomer()
        );
    if(($id = $project->getId()) === null) {
        unset($data['id']);
        $this->getDbTable()->insert($data);
        return $this->getDbTable()->lastInsertId();
    }else {
        $this->getDbTable()->update($data, array('id = ?', (int) $id));
        return $id;
    }
} 
```

根据上面的代码，它应该返回`id`对象的。它是`id`插入后或当前`id`。

我使用此功能的代码：

```
$currentUser = new Application_Model_UserAuth();
$project = new Application_Model_Projects();
$project->setProjectName($formValues['projectName'])
        ->setProjectDescription($formValues['projectDescription'])
        ->setDueDate(date("Y-m-d",strtotime($formValues['dueDate'])))
        ->setIdCustomer($formValues['assignCustomer'])
        ->setIdUser($currentUser->id);
$projectMapper = new Application_Model_ProjectsMapper();
$idProject = $projectMapper->save($project); 
```

我得到的错误是：
`Fatal error: Call to undefined method Application_Model_DbTable_Projects::lastInsertId()`

这有什么问题？那不应该返回最后一个ID吗？因为它是在插入时触发的。在另一个代码序列中，我称之为`lastInsertId`: `$Zend_Db_Table::getDefaultAdapter()->lastInsertId()`。唯一的区别是现在我调用`lastInsertIt`了一个扩展的 dbTable `Zend_Db_Table_Abstract`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:24:34.240

我上面的问题的答案是我应该打电话`getAdapter()`之前`lastInsertId()`。

更新代码：

```
if(($id = $project->getId()) === null) {
    unset($data['id']);
    $this->getDbTable()->insert($data);
    return $this->getDbTable()->getAdapter()->lastInsertId();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T08:46:17.573

如果是单列主键，默认返回值为 lastInsertId，所以你也可以这样使用：

```
return $this->getDbTable()->insert($data); 
```

# xml - 如何在 Oracle 存储过程中返回 xmltypes 的结果

> ID：11435634
> 
> 赞同：0
> 
> 时间：2012-07-11T15:04:41.853
> 
> 标签：xml, oracle, plsql, oracle11g

我有存储过程：

```
CREATE OR REPLACE udp_get_employeeaddress ( result_set out sys_refcursor )
AS
BEGIN
   open result_set for
   select xmlcolumn from employees where rownum < 3;

END udp_get_employees; 
```

当我执行这个 sp 时，在 SQL Developer 的输出变量中返回以下内容

XML_COLUMN

* * *

oracle.jdbc.driver.OracleSQLXML@49e57334

只取出 SELECT 语句

```
select xmlcolumn from employees where rownum < 3; 
```

返回xml结果

XML_COLUMN

* * *

该表定义如下：

```
CREATE TABLE "EMP"."Employees"
  (
    "ID"              NUMBER,
    "XML_COLUMN" "XMLTYPE"
  )
  xmltype column "XML_COLUMN" STORE AS BINARY XML
  xmlschema "http://www.web.com/emp.xsd"
  element "root" 
```

我希望我的存储过程返回与独立查询相同的（结果集）。

这是我第一次尝试 Oracle / xml db，因为我主要是 SQL Server DB 开发人员。任何帮助是极大的赞赏。

谢谢

**更新**：表定义/查询结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:15:04.270

这对您的过程来说不是问题，但对于 SQL Developer 如何获取输出变量似乎有点奇怪——我看不到在该选项卡中显示实际内容的方法。

作为替代方案，您可以通过从 SQL 工作表调用该过程来查看该过程正在运行（作为脚本运行 (F5)）：

```
var rc refcursor;
exec udp_get_employeeaddress(:rc);
print :rc; 
```

# java - Lucene 3.6 索引编写器

> ID：11435638
> 
> 赞同：1
> 
> 时间：2012-07-11T15:04:47.463
> 
> 标签：java, lucene

目前我正在使用 Lucene 3.6，并且很难让 IndexWriters 工作。

API 文档建议：

```
IndexWriter writer = new IndexWriter(Directory, Analyzer); 
```

（以及其他一些类似的构造函数）已被贬值，我应该使用类似的东西：

```
IndexWriter writer = new IndexWriter(Directory, Configuration); 
```

但是 Eclipse 不会识别这个较新的构造函数（lucene-core3.6.jar 已添加到我的项目的构建路径中），如果我使用较旧的构造函数，我必须抑制警告（我不是特别想这样做- 当我使用这些旧方法在内存中建立索引时会引发异常）。

我已经清理了项目，但问题仍然存在。

编辑：我正在使用的代码：

```
 Directory index = new RAMDirectory();
    StandardAnalyzer analyzer = new StandardAnalyzer();
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);
    IndexDeletionPolicy IndexDeletionPolicy = new KeepOnlyLastCommitDeletionPolicy();
    MaxFieldLength fieldLength = new MaxFieldLength(256);
    IndexWriter writer = new IndexWriter(index, analyzer, false, IndexDeletionPolicy, fieldLength);
    //IndexWriter writer = new IndexWriter(index, config); 
    writer.setUseCompoundFile(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:35:03.723

一个好的开始总是阅读 javadoc：

[http://lucene.apache.org/core/3_6_0/api/all/index.html](http://lucene.apache.org/core/3_6_0/api/all/index.html)

构造函数

构造函数和描述

*   IndexWriter(Directory d, Analyzer a, boolean create, IndexDeletionPolicy deletePolicy, IndexWriter.MaxFieldLength mfl) 已弃用。改用 IndexWriter(Directory, IndexWriterConfig)

*   IndexWriter(Directory d, Analyzer a, boolean create, IndexWriter.MaxFieldLength mfl) 已弃用。改用 IndexWriter(Directory, IndexWriterConfig)

*   IndexWriter(Directory d, Analyzer a, IndexDeletionPolicy deletePolicy, IndexWriter.MaxFieldLength mfl) 已弃用。改用 IndexWriter(Directory, IndexWriterConfig)

*   IndexWriter(Directory d, Analyzer a, IndexDeletionPolicy deletePolicy, IndexWriter.MaxFieldLength mfl, IndexCommit commit) 已弃用。改用 IndexWriter(Directory, IndexWriterConfig)

*   IndexWriter(Directory d, Analyzer a, IndexWriter.MaxFieldLength mfl) 已弃用。改用 IndexWriter(Directory, IndexWriterConfig)

*   **IndexWriter(Directory d, IndexWriterConfig conf) Constructs a new IndexWriter per the settings given in conf.**

Not suprisingly, you are using a deprecated constructor and Eclipse correctly emit a warning. If you use the last constructor, I am sure Eclipse won't emit a warning.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:28:26.367

You might want to change:

```
StandardAnalyzer analyzer = new StandardAnalyzer(); 
```

to:

```
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36); 
```

The constructor of StandardAnalyzer takes a Version object. Perhaps Eclipse does not recognize the IndexWriter constructor because there is a compile-time error at an earlier line (i.e. when you try to create a new StandardAnalyzer).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:08:14.133

I solved the problem:

There was a .jar file interfering with lucene (thirdparty-all.jar) which I found through looking at the stack trace. Removing the .jar removed problem.

# compilation - CodeBlocks 每次重新编译 ofxUI 标头

> ID：11435642
> 
> 赞同：0
> 
> 时间：2012-07-11T15:05:04.093
> 
> 标签：compilation, codeblocks, openframeworks

我正在 Ubuntu 中开发一个相对简单的 C++ 项目，基于[OpenFrameworks](http://www.openframeworks.cc/)工具包，包括插件[ofxUI](https://github.com/rezaali/ofxUI)。我使用 CodeBlocks 作为 IDE。

每次我构建项目时，似乎 CodeBlocks 和 gcc 都会重新编译所有 ofxUI 文件，尽管这些文件没有被更改。

有“构建日志”：

```
-------------- Build: Debug in libopenFrameworks ---------------

Target is up to date.

-------------- Build: Debug in RoombotsInterface ---------------

Using makefile: Makefile
compiling x86_64 object for:  src/ApplicationGUI.cpp
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:170:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘void ofxUIRadio::init(float, float, std::string, std::vector<std::basic_string<char> >, int)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:62:33: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘virtual void ofxUIRadio::setDrawPadding(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:75:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘virtual void ofxUIRadio::setDrawPaddingOutline(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:86:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘virtual void ofxUIRadio::setVisible(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:102:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘void ofxUIRadio::activateToggle(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:110:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIRadio.h: In member function ‘virtual void ofxUIRadio::setParent(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUIRadio.h:134:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:176:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘virtual void ofxUIToggleMatrix::setDrawPadding(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:81:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘virtual void ofxUIToggleMatrix::setDrawPaddingOutline(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:92:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘virtual void ofxUIToggleMatrix::setVisible(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:108:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘void ofxUIToggleMatrix::activateToggle(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:118:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘virtual void ofxUIToggleMatrix::setParent(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:140:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘void ofxUIToggleMatrix::setAllToggles(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:162:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘void ofxUIToggleMatrix::setAllTogglesAndTrigger(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:171:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:177:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h: In member function ‘void ofxUIToggleMatrix::setToggle(int, int, bool)’:
/home/user/of/addons/ofxUI/src/ofxUIToggleMatrix.h:185:31: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:181:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘void ofxUIDropDownList::addToggle(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:94:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:181:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘void ofxUIDropDownList::removeToggle(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:123:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:138:45: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘void ofxUIDropDownList::initToggles(std::vector<std::basic_string<char> >&, int)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:182:33: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘virtual void ofxUIDropDownList::setParent(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:234:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘virtual void ofxUIDropDownList::setVisible(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:292:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘void ofxUIDropDownList::setToggleVisibility(bool)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:301:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘virtual void ofxUIDropDownList::triggerEvent(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:335:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h: In member function ‘void ofxUIDropDownList::activateToggle(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUIDropDownList.h:354:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:184:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIMovingGraph.h: In member function ‘void ofxUIMovingGraph::addPoint(float)’:
/home/user/of/addons/ofxUI/src/ofxUIMovingGraph.h:101:30: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:187:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In destructor ‘virtual ofxUICanvas::~ofxUICanvas()’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:44:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::saveSettings(std::string)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:146:50: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:187:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::update()’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:652:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::mouseMoved(int, int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:800:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::mouseDragged(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:809:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::mousePressed(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:819:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::mouseReleased(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:828:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::windowResized(int, int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:841:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::keyPressed(int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:861:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::keyReleased(int)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:869:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘ofxUIWidget* ofxUICanvas::getWidgetHit(float, float)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:891:45: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::autoSizeToFitWidgets()’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:952:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::centerWidgetsOnCanvas(bool, bool)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:989:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1020:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::removeWidget(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1063:50: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:187:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘virtual void ofxUICanvas::addWidget(ofxUIWidget*)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1191:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1238:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1258:36: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘ofxUIWidget* ofxUICanvas::addWidgetDown(ofxUIWidget*, ofxWidgetAlignment, bool)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1297:15: warning: enumeration value ‘OFX_UI_ALIGN_TOP’ not handled in switch [-Wswitch]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1297:15: warning: enumeration value ‘OFX_UI_ALIGN_BOTTOM’ not handled in switch [-Wswitch]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘ofxUIWidget* ofxUICanvas::addWidgetUp(ofxUIWidget*, ofxWidgetAlignment, bool)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1327:15: warning: enumeration value ‘OFX_UI_ALIGN_TOP’ not handled in switch [-Wswitch]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1327:15: warning: enumeration value ‘OFX_UI_ALIGN_BOTTOM’ not handled in switch [-Wswitch]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::setWidgetColor(int, ofColor)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1549:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1556:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1563:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1570:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1577:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1584:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1591:37: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::setDrawWidgetPadding(bool)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1619:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘void ofxUICanvas::setDrawWidgetPaddingOutline(bool)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1632:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUICanvas.h: In member function ‘std::vector<ofxUIWidget*> ofxUICanvas::getWidgetsOfType(ofxWidgetType)’:
/home/user/of/addons/ofxUI/src/ofxUICanvas.h:1647:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
In file included from /home/user/of/addons/ofxUI/src/ofxUI.h:188:0,
                 from src/main.h:58,
                 from src/Robot.h:10,
                 from src/ApplicationGUI.cpp:4:
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h: In member function ‘virtual void ofxUIScrollableCanvas::update()’:
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h:213:35: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h: In member function ‘virtual void ofxUIScrollableCanvas::mouseDragged(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h:267:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h: In member function ‘virtual void ofxUIScrollableCanvas::mousePressed(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h:299:45: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h: In member function ‘virtual void ofxUIScrollableCanvas::mouseReleased(int, int, int)’:
/home/user/of/addons/ofxUI/src/ofxUIScrollableCanvas.h:321:41: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
src/ApplicationGUI.cpp: In function ‘PSOExperimentsParametersProxyAndDescription PSOExperimentsParametersProxy_06June2012_1(const Experiment&)’:
src/ApplicationGUI.cpp:13:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:14:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:15:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:16:98: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:17:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:18:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:19:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:20:98: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:21:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:22:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:23:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:24:98: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:25:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:26:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:27:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:28:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:29:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:30:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:31:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:32:91: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:33:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:34:88: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:35:52: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:36:88: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:37:53: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.cpp:38:67: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
src/ApplicationGUI.h: In constructor ‘ApplicationGUI::ApplicationGUI()’:
src/ApplicationGUI.h:145:11: warning: ‘ApplicationGUI::robot’ will be initialized after [-Wreorder]
src/ApplicationGUI.h:48:10: warning:   ‘PSO* ApplicationGUI::d_pso’ [-Wreorder]
src/ApplicationGUI.cpp:41:1: warning:   when initialized here [-Wreorder]
src/ApplicationGUI.cpp: In member function ‘void ApplicationGUI::setGUI()’:
src/ApplicationGUI.cpp:98:11: warning: unused variable ‘dim’ [-Wunused-variable]
src/ApplicationGUI.cpp: In member function ‘void ApplicationGUI::drawSerial()’:
src/ApplicationGUI.cpp:166:9: warning: unused variable ‘xOffset’ [-Wunused-variable]
src/ApplicationGUI.cpp:166:24: warning: unused variable ‘yOffset’ [-Wunused-variable]
src/ApplicationGUI.cpp: In member function ‘void ApplicationGUI::guiEvent(ofxUIEventArgs&)’:
src/ApplicationGUI.cpp:222:9: warning: unused variable ‘kind’ [-Wunused-variable]
find: `/home/user/of/addons/ofxUI/libs/*/lib/linux64': No such file or directory
find: `/home/user/of/addons/ofxXmlSettings/libs/*/lib/linux64': No such file or directory
find: `/home/user/of/addons/ofxKinect/libs/*/lib/linux64': No such file or directory
Package zlib was not found in the pkg-config search path.
Perhaps you should add the directory containing `zlib.pc'
to the PKG_CONFIG_PATH environment variable
No package 'zlib' found
linking x86_64 bin/RoombotsInterface_debug linux64
/home/user/of/addons/ofxOpenCv/libs/opencv/lib/linux64/libopencv_core.a(system.o): In function `cv::tempfile(char const*)':
system.cpp:(.text._ZN2cv8tempfileEPKc+0x2f): warning: the use of `tmpnam' is dangerous, better use `mkstemp'
     compiling done
     to launch the application
     cd bin
     ./RoombotsInterface_debug
Process terminated with status 0 (0 minutes, 24 seconds)
0 errors, 95 warnings 
```

我试图将 ofxUI 文件包含到 CodeBlocks 中，但无论如何它都没有好处。我相信这个问题的解决方案应该很简单，编译过程中似乎有什么不明白的地方。

提前感谢您的任何建议，即使很小！

我正在Ubuntu中开发一个相对简单的C++项目，基于OpenFrameworks工具包，包括xUI的插件。我使用 CodeBlocks 作为 IDE。

每次我构建项目时，似乎 CodeBlocks 和 gcc 都会重新编译所有 ofxUI 文件，尽管这些文件没有被更改。在这种情况下，即使经过非常微小的编辑，每次都需要花费大量时间来构建项目。

有“构建日志”： http: [//pastebin.com/AMrRMAAY](http://pastebin.com/AMrRMAAY)

我试图将 ofxUI 文件包含到 CodeBlocks 中，但无论如何它都没有好处。我相信这个问题的解决方案应该很简单，编译过程中似乎有什么不明白的地方。

提前感谢您的任何建议，即使很小！

（我也在[http://forum.openframeworks.cc/](http://forum.openframeworks.cc/)上问过这个问题。如果我会在那里收到答案，我会立即把链接放在这里，反之亦然。）

# .net - 图表控制两个数据集条重叠

> ID：11435653
> 
> 赞同：1
> 
> 时间：2012-07-11T15:05:30.320
> 
> 标签：.net, vb.net, charts, microsoft-chart-controls

我正在处理一个 ASP.NET 项目，我有一个条形图，其中包含两个数据集并排。我如何让他们超过一圈。

一项数据是罐大小，另一项是当前水平。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:52:16.730

```
<asp:Series ChartArea="ChartArea1" Font="MS Mincho, 8pt, style=Bold" 
            Legend="Legend1" Name="Tank Size" XValueMember="Serial" 
            YValueMembers="DeviceSize" ChartType="StackedColumn">
        </asp:Series>
        <asp:Series Legend="Legend1" Name="Current Level" XValueMember="Serial" 
            YValueMembers="DeviceLevel" YValuesPerPoint="2" 
            Font="Mangal, 8pt, style=Bold" ChartType="Column"> 
```

我将其中一个栏上的 ChartType 更改为列，另一个更改为堆叠 - 这可能是一种肮脏的方式，但我可以工作。这就是我所关心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T17:32:29.037

以上述 StackedColumn 解决方案为基础。如果您不希望列完全重叠，而只想部分重叠。您可以生成第三个系列，其中两个系列是 ChartType="Column"，一个是“StackedColumn”。

第二个系列的 ChartType Column 至少需要一个点，但是将该点设置为 Y 值 0，因此它不会显示；这个系列将具有将其他系列推到一边的效果。

```
 Chart chrt = new Chart();
    chrt.ChartAreas.Add("ChartArea");

    // The series in back
    Series chrtS = new Series();
    chrtS.Points.Add(new DataPoint(2, 3));
    chrtS.Points.Add(new DataPoint(3, 4));
    chrtS.Points.Add(new DataPoint(4, 5));
    chrtS.ChartType = SeriesChartType.Column;
    chrtS.Color = System.Drawing.Color.Blue;
    chrtS["PointWidth"] = ".5";
    chrt.Series.Add(chrtS);

    // The series invisibly pushing the one above over
    Series chrtS1 = new Series();
    chrtS1.Points.Add(new DataPoint(2, 0));
    chrtS1.ChartType = SeriesChartType.Column;
    chrtS1.Color = System.Drawing.Color.Green;
    chrtS1["PointWidth"] = ".5";
    chrt.Series.Add(chrtS1);

    // The series stacked on top
    Series chrtS2 = new Series();
    chrtS2.Points.Add(new DataPoint(2, 4));
    chrtS2.Points.Add(new DataPoint(3, 3));
    chrtS2.Points.Add(new DataPoint(4, 2));
    chrtS2.ChartType = SeriesChartType.StackedColumn;
    chrtS2.Color = System.Drawing.Color.Red;
    chrtS2["PointWidth"] = ".25";
    chrt.Series.Add(chrtS2); 
```

自从发布代码以来，我已经更改了图片的值，但是它会给你一个类似这样的最终结果：

![enter image description here](../Images/c087753c1c1b6dacebf3cd0ab515512a.png)

* * *

如果您需要对标签进行更详细的控制，或者条形之间的滑动距离，那么您可以使用图表区域来实现。

```
 Chart chrt = new Chart();
    chrt.ChartAreas.Add("ChartAreaRed");
    chrt.ChartAreas["ChartAreaRed"].BackColor = System.Drawing.Color.Transparent;
    chrt.ChartAreas["ChartAreaRed"].Position.Height = 100;
    chrt.ChartAreas["ChartAreaRed"].Position.Width = 100;
    chrt.ChartAreas["ChartAreaRed"].InnerPlotPosition.Height = 90;
    chrt.ChartAreas["ChartAreaRed"].InnerPlotPosition.Width = 80;
    chrt.ChartAreas["ChartAreaRed"].InnerPlotPosition.X = 10;
    chrt.ChartAreas["ChartAreaRed"].AxisY.Maximum = 6;
    chrt.ChartAreas["ChartAreaRed"].AxisX.Maximum = 5;
    chrt.ChartAreas["ChartAreaRed"].AxisX.Interval = 1;
    chrt.ChartAreas["ChartAreaRed"].Position.X = 0;
    chrt.ChartAreas.Add("ChartAreaGreen");
    chrt.ChartAreas["ChartAreaGreen"].BackColor = System.Drawing.Color.Transparent;
    chrt.ChartAreas["ChartAreaGreen"].Position.Height = 100;
    chrt.ChartAreas["ChartAreaGreen"].Position.Width = 100;
    chrt.ChartAreas["ChartAreaGreen"].InnerPlotPosition.Height = 90;
    chrt.ChartAreas["ChartAreaGreen"].InnerPlotPosition.Width = 80;
    chrt.ChartAreas["ChartAreaGreen"].InnerPlotPosition.X = 10;
    chrt.ChartAreas["ChartAreaGreen"].AxisY.Maximum = 6;
    chrt.ChartAreas["ChartAreaGreen"].AxisX.Maximum = 5;
    chrt.ChartAreas["ChartAreaGreen"].AxisX.Interval = 1;
    chrt.ChartAreas["ChartAreaGreen"].Position.X = 0;
    chrt.ChartAreas["ChartAreaGreen"].Axes[0].Enabled = AxisEnabled.False;
    chrt.ChartAreas["ChartAreaGreen"].Axes[1].Enabled = AxisEnabled.False;
    chrt.ChartAreas.Add("ChartAreaBlue");
    chrt.ChartAreas["ChartAreaBlue"].BackColor = System.Drawing.Color.Transparent;
    chrt.ChartAreas["ChartAreaBlue"].Position.Height = 100;
    chrt.ChartAreas["ChartAreaBlue"].Position.Width = 100;
    chrt.ChartAreas["ChartAreaBlue"].InnerPlotPosition.Height = 90;
    chrt.ChartAreas["ChartAreaBlue"].InnerPlotPosition.Width = 80;
    chrt.ChartAreas["ChartAreaBlue"].InnerPlotPosition.X = 15;
    chrt.ChartAreas["ChartAreaBlue"].AxisY.Maximum = 6;
    chrt.ChartAreas["ChartAreaBlue"].AxisX.Maximum = 5;
    chrt.ChartAreas["ChartAreaBlue"].AxisX.Interval = 1;
    chrt.ChartAreas["ChartAreaBlue"].Axes[0].Enabled = AxisEnabled.False;
    chrt.ChartAreas["ChartAreaBlue"].Axes[1].Enabled = AxisEnabled.False;

    chrt.ChartAreas["ChartAreaBlue"].AxisX.MajorGrid.Enabled = false;

    Series chrtS_Red = new Series();
    chrtS_Red.Points.Add(new DataPoint(2, 1));
    chrtS_Red.Points.Add(new DataPoint(3, 0));
    chrtS_Red.Points.Add(new DataPoint(4, 2));
    chrtS_Red.ChartType = SeriesChartType.Column;
    chrtS_Red.Color = System.Drawing.ColorTranslator.FromHtml("#aa220d"); // massini red
    chrtS_Red.IsValueShownAsLabel = true;
    chrtS_Red.EmptyPointStyle.IsValueShownAsLabel = false;
    chrtS_Red["PointWidth"] = ".5";
    chrtS_Red["LabelStyle"] = "TopLeft"; // Auto, Top, Bottom, Right, Left, TopLeft, TopRight, BottomLeft, BottomRight, Center
    chrtS_Red.ChartArea = "ChartAreaRed";
    chrt.Series.Add(chrtS_Red);

    Series chrtS_Green = new Series();
    chrtS_Green.Points.Add(new DataPoint(2, 0));
    chrtS_Green.Points[0].IsEmpty = true;
    chrtS_Green.Points.Add(new DataPoint(3, 5));
    chrtS_Green.Points.Add(new DataPoint(4, 0));
    chrtS_Green.Points[2].IsEmpty = true;
    chrtS_Green.ChartType = SeriesChartType.Column;
    chrtS_Green.Color = System.Drawing.ColorTranslator.FromHtml("#94952d"); // massini green
    chrtS_Green.IsValueShownAsLabel = true;
    chrtS_Green.EmptyPointStyle.IsValueShownAsLabel = false;
    chrtS_Green["LabelStyle"] = "TopLeft"; // Auto, Top, Bottom, Right, Left, TopLeft, TopRight, BottomLeft, BottomRight, Center
    chrtS_Green["PointWidth"] = ".5";
    chrtS_Green.ChartArea = "ChartAreaGreen";
    chrt.Series.Add(chrtS_Green);

    Series chrtS_Blue = new Series();
    chrtS_Blue.Points.Add(new DataPoint(2, 3));
    chrtS_Blue.Points.Add(new DataPoint(3, 4));
    chrtS_Blue.Points.Add(new DataPoint(4, 5));
    chrtS_Blue.ChartType = SeriesChartType.Column;
    chrtS_Blue.Color = System.Drawing.ColorTranslator.FromHtml("#3e8bc3"); // massini blue
    chrtS_Blue.IsValueShownAsLabel = true;
    chrtS_Blue["LabelStyle"] = "TopRight"; // Auto, Top, Bottom, Right, Left, TopLeft, TopRight, BottomLeft, BottomRight, Center
    chrtS_Blue["PointWidth"] = ".5";
    chrtS_Blue.ChartArea = "ChartAreaBlue";
    chrt.Series.Add(chrtS_Blue); 
```

这将产生如下所示的内容：

![Overlap with Chart Areas](../Images/637e8e5d2cd5820542551faf1d547b66.png)

这种方法肯定更复杂，更难理解。但是一旦你理解了它，它就可以进行更大的控制。关键是将所有图表区域的宽度和高度设置为相同的值，然后对 InnerPlotPosition 属性执行相同的操作。

The InnerPlotPosition allows you to control the area inside the plot area that is dedicated to plotting the values rather than having the grid lines and values included in the width and height calculations.

You have to set a value for both the width and the height for InnerPlotPosition or else a default of 0 will be used and you will see nothing.

Also, if you intend to have grid lines or X and Y axis values then you will need the width and height values for InnerPlotPosition to be less than 100 to allow for room inside the Chart Area for those items, or else they will be hidden.

Finally, when using layers, make sure you set all the backgrounds to transparent or you will only see the last layer added. If you want a background then apply it to the first layer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:51:04.047

您可以使用 PointWidth 自定义属性

```
chartObj.Series[0]["PointWidth"] = "1.3"; 
```

# java - 在调试测试时使用 DatabaseManager 连接到内存中的 Hsql（超音速）数据库

> ID：11435654
> 
> 赞同：4
> 
> 时间：2012-07-11T15:05:33.990
> 
> 标签：java, debugging, intellij-idea, hsqldb

我想在我的IDE（Intellij IDEA 11.1.2）中调试测试时使用hsql DatabaseManager（或swing版本，没关系）连接到内存中的HSQL数据库实例。

我已经按照[这个答案](https://stackoverflow.com/a/3076005/3045)的建议进行了尝试，但是每次我这样做时，DatabaseManager 进程/线程（我不知道是哪个）都会在调试断点被命中时启动并冻结。如果 kill/force 退出它，调试会话也会终止。

在不冻结 DatabaseManager 的情况下如何执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:26:53.617

您的 Spring/JUnit 正在以[进程内](http://www.hsqldb.org/doc/1.8/guide/ch01.html#N101A8)模式启动数据库。

您的选择是：

1.  在服务器模式下启动 hsqldb
2.  或从您的应用程序启动 DBmanager
3.  或者让你的断点只停止当前线程，那么你的数据库管理器就不会冻结

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:14:20.853

还请检查您的断点是否停止了所有线程。大多数调试器都有这个设置。您可以将此断点更改为仅暂停 JUnit 测试线程而不暂停其他线程。另请参阅此处：

[断点会停止所有线程吗？](https://stackoverflow.com/questions/8174408/does-a-breakpoint-halt-all-threads)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T16:24:43.697

我认为这个问题有两个答案。

1.  如果您想在与测试不同的进程/线程中启动 DatabaseManager，Eugenio Cuevas 在他的评论中给出了答案。
2.  如果您在进程内模式下运行，请在其中一个测试中添加对 DatabaseManager.main() 的调用。确保暂停执行（即提示用户输入，或`Thread.sleep(Long.MAX_VALUE);`在调用 DatabaseManager.main() 的行之后立即运行，这样测试就不会继续执行。有关启动 DatabaseManager 的代码，请参见[此处](https://stackoverflow.com/a/3076005/3045)。

# f# - 比“经典”更不稳定的序列

> ID：11435655
> 
> 赞同：2
> 
> 时间：2012-07-11T15:05:37.637
> 
> 标签：f#

对于笛卡尔生产，有一个足够好的功能 -定义如下的*序列：*

```
let rec sequence = function 
  | []      -> Seq.singleton [] 
  | (l::ls) -> seq { for x in l do for xs in sequence ls do yield (x::xs) } 
```

但看看它的结果：

> > 序列 [[1..2];[1..10000]] |> Seq.skip 1000 ;; 验证它：seq = seq [[1; 1001]；[1; 1002]；[1; 1003]；[1; 1004]；...]

我们可以看到产品的第一个“坐标”变化非常缓慢，当第二个列表结束时它会改变值。

我编写了自己的序列如下（评论如下）：

```
/// Sum of all producted indeces = n
let rec hyper'plane'indices indexsum maxlengths =
    match maxlengths with 
    | [x]        -> if indexsum < x then [[indexsum]] else []
    | (i::is)   -> [for x in [0 .. min indexsum (i-1)] do for xs in hyper'plane'indices (indexsum-x) is do yield (x::xs)]
    | []        -> [[]]

let finite'sequence = function
    | [] -> Seq.singleton []
    | ns -> 
        let ars = [ for n in ns -> Seq.toArray n ]
        let length'list = List.map Array.length ars
        let nmax = List.max length'list
        seq { 
            for n in [0 .. nmax] do 
            for ixs in hyper'plane'indices n length'list do 
                yield (List.map2 (fun (a:'a[]) i -> a.[i]) ars ixs) 
        } 
```

关键思想是将（两个）列表视为（两个）正交维度，其中每个元素都由列表中的索引标记。因此，我们可以通过超平面枚举笛卡尔积的每个部分中的每个元素来枚举所有元素（在二维情况下，这是一条线）。换句话说，想象一下 excel 的工作表，其中第一列包含从 [1;1] 到 [1;10000] 的值，第二列包含从 [2;1] 到 [2;10000] 的值。编号为 1 的“超平面”是连接单元格 A2 和单元格 B1 的线。对于我们的例子

> > 超'平面'索引 0 [2;10000];; 验证它：int list list = [[0; 0]]
> > 超'平面'索引 1 [2;10000];; 验证它：int list list = [[0; 1]; [1; 0]]
> > 超'平面'索引 2 [2;10000];; 验证它：int list list = [[0; 2]; [1; 1]]
> > 超'平面'索引 3 [2;10000];; 验证它：int list list = [[0; 3]; [1; 2]]
> > 超'平面'索引 4 [2;10000];; 验证它：int list list = [[0; 4]; [1; 3]]

好吧，如果我们有从给定列表生成的索引和数组，那么我们现在可以将序列定义为{平面 0 中的所有元素；比平面 1 中的所有元素 ... 等等 } 并获得比原始*序列*更多的 volatile 函数。

但是*finite'sequence*却变成了非常贪吃的函数。现在的问题。我怎样才能改进它？

带着最良好的祝愿，亚历山大。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:50:14.967

你能解释一下究竟是什么问题 - 时间或空间复杂性或性能？你有一个特定的基准吗？我不确定如何改善这里的时间复杂度，但我稍微编辑了您的代码以删除中间列表，这可能对内存分配行为有所帮助。

不要这样做：

```
for n in [0 .. nmax] do 
```

改为这样做：

```
for n in 0 .. nmax do 
```

这是代码：

```
let rec hyper'plane'indices indexsum maxlengths =
    match maxlengths with
    | [] -> Seq.singleton []
    | [x] -> if indexsum < x then Seq.singleton [indexsum] else Seq.empty
    | i :: is ->
        seq {
            for x in 0 .. min indexsum (i - 1) do
                for xs in hyper'plane'indices (indexsum - x) is do
                    yield x :: xs
        }

let finite'sequence xs =
    match xs with
    | [] -> Seq.singleton []
    | ns -> 
        let ars = [ for n in ns -> Seq.toArray n ]
        let length'list = List.map Array.length ars
        let nmax = List.max length'list
        seq {
            for n in 0 .. nmax do
                for ixs in hyper'plane'indices n length'list do
                    yield List.map2 Array.get ars ixs
        } 
```

这票价好些了吗？顺便说一句，美丽的问题。

**更新：**也许您更感兴趣的是公平地混合序列，而不是维护算法中的确切公式。这是一个 Haskell 代码，它公平地混合了有限数量的可能无限序列，其中公平意味着对于每个输入元素，都有一个包含它的输出序列的有限前缀。您在评论中提到您有一个难以推广到 N 维的 2D 增量解决方案，而 Haskell 代码正是这样做的：

```
merge :: [a] -> [a] -> [a]
merge [] y          = y
merge x []          = x
merge (x:xs) (y:ys) = x : y : merge xs ys

prod :: (a -> b -> c) -> [a] -> [b] -> [c]
prod _ [] _ = []
prod _ _ [] = []
prod f (x:xs) (y:ys) = f x y : a `merge` b `merge` prod f xs ys where
  a = [f x y | x <- xs] 
  b = [f x y | y <- ys]

prodN :: [[a]] -> [[a]]
prodN []     = [[]]
prodN (x:xs) = prod (:) x (prodN xs) 
```

我还没有将它移植到 F# - 它需要一些思考，因为序列不能很好地匹配头/尾。

**更新 2：**

接下来是对 F# 的相当机械的翻译。

```
type Node<'T> =
    | Nil
    | Cons of 'T * Stream<'T>

and Stream<'T> = Lazy<Node<'T>>

let ( !! ) (x: Lazy<'T>) = x.Value
let ( !^ ) x = Lazy.CreateFromValue(x)

let rec merge (xs: Stream<'T>) (ys: Stream<'T>) : Stream<'T> =
    lazy
    match !!xs, !!ys with
    | Nil, r | r, Nil -> r
    | Cons (x, xs), Cons (y, ys) -> Cons (x, !^ (Cons (y, merge xs ys)))

let rec map (f: 'T1 -> 'T2) (xs: Stream<'T1>) : Stream<'T2> =
    lazy
    match !!xs with
    | Nil -> Nil
    | Cons (x, xs) -> Cons (f x, map f xs)

let ( ++ ) = merge

let rec prod f xs ys =
    lazy
    match !!xs, !!ys with
    | Nil, _ | _, Nil -> Nil
    | Cons (x, xs), Cons (y, ys) ->
        let a = map (fun x -> f x y) xs
        let b = map (fun y -> f x y) ys
        Cons (f x y, a ++ b ++ prod f xs ys)

let ofSeq (s: seq<'T>) =
    lazy
    let e = s.GetEnumerator()
    let rec loop () =
        lazy
        if e.MoveNext()
            then Cons (e.Current, loop ())
            else e.Dispose(); Nil
    !! (loop ())

let toSeq stream =
    stream
    |> Seq.unfold (fun stream ->
        match !!stream with
        | Nil -> None
        | Cons (x, xs) -> Some (x, xs))

let empty<'T> : Stream<'T> = !^ Nil
let cons x xs = !^ (Cons (x, xs))
let singleton x = cons x empty

let rec prodN (xs: Stream<Stream<'T>>) : Stream<Stream<'T>> =
    match !!xs with
    | Nil -> singleton empty
    | Cons (x, xs) -> prod cons x (prodN xs)

let test () =
    ofSeq [
        ofSeq [1; 2; 3]
        ofSeq [4; 5; 6]
        ofSeq [7; 8; 9]
    ]
    |> prodN
    |> toSeq
    |> Seq.iter (fun xs ->
        toSeq xs
        |> Seq.map string
        |> String.concat ", "
        |> stdout.WriteLine) 
```

# iphone - 在另一个视图中将 NSNumber 发送到 UILabel

> ID：11435658
> 
> 赞同：0
> 
> 时间：2012-07-11T15:05:46.940
> 
> 标签：iphone, xcode, nsstring, uilabel, nsnumber

> **可能重复：**
> [如何将 NSNumber 转换为 NSString](https://stackoverflow.com/questions/3969972/how-to-convert-nsnumber-to-nsstring)

Segue 将字符串从 MainViewController 传递到 DetailViewController：

主视图控制器.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"DetailSegue"]) {

        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
        DetailViewController *detailViewController = [segue destinationViewController];

//Name:
detailViewController.detailName = [[sortedObjects objectAtIndex:selectedRowIndex.row] valueForKey:@"Name"];

//Attempt with number:
detailViewController.detailPopularity = [[sortedObjects objectAtIndex:selectedRowIndex.row] valueForKey:@"Popularity"];
    }
} 
```

DetailViewController.h

```
//Name:
@property (nonatomic, strong) IBOutlet UILabel *nameLabel;
@property (nonatomic, strong) NSString *detailName;

//Attempt with number:
@property (nonatomic, strong) IBOutlet UILabel *popularityLabel;
@property (nonatomic, strong) NSString *detailPopularity; 
```

细节视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

//Name:    
nameLabel.text = detailName;

//Attempt with number:
popularityLabel.text = detailPopularity;
} 
```

在此示例中，应用程序崩溃是因为它无法在 UILabel 中显示 NSNumber。我需要看一个关于如何将 NSNumber 转换为 NSString 的示例，以便我可以在标签中显示它，我尝试了不同的方式，但我找不到正确的组合来修复错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:19:53.243

除了现有的答案，您可以在没有任何其他课程的情况下使用

```
Label.text = [theNumber stringValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:09:01.603

使用`NSStringWithFormat`.

```
popularityLabel.text = [NSString stringWithFormat:"%@", theNumber]; 
```

如果你想要一个特定的格式，你可以使用：

```
popularityLabel.text = [NSString stringWithFormat:"%.2f", [theNumber doubleValue]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:11:08.323

我没有看到您的 NSNumber 部分，但这应该可以：

```
Label.text = [NSString stringWithFormat:@"%f",[YourNSNumber doubleValue]]; 
```

您可以将 doubleValue 更改为您需要的任何内容，可以是 intValue 等等。而且你需要做一些研究，看看当你将浮点数转换为字符串时你想要什么样的字符串格式。

希望这可以帮助

# css - CSS 过渡 [背景图像属性] 仅适用于 chrome

> ID：11435660
> 
> 赞同：0
> 
> 时间：2012-07-11T15:05:57.260
> 
> 标签：css, css-transitions

我发布了一个网站：[http ://semep.com.br](http://semep.com.br)

此页面上每个横幅的背景照片都已修改。我想在照片中放置一个过渡效果作为背景淡入淡出：

## CSS 规则

```
#fullbackground{

    /* Set rules to fill background */
    min-height: 100%;
    min-width: 1024px;

    /* Set up proportionate scaling */
    width: 100%;
    height: auto;

    /* Set up positioning */
    position: fixed;
    top: 0;
    left: 0;

    transition: background-image 800ms ease-in-out;
     -moz-transition: background-image 800ms ease-in-out;
     -ms-transition: background-image 800ms ease-in-out;
     -o-transition: background-image 800ms ease-in-out;
    -webkit-transition: background-image 800ms ease-in-out; 
} 
```

## 更改背景图像的脚本

```
 window.modificarBackground = function(bgArquivo) {
    if (screen.width > 1280) {
      bgArquivo = "url('/Images/Fundo/1600/" + bgArquivo + "')";
    }
    if (screen.width <= 1024) {
      bgArquivo = "url('/Images/Fundo/1024/" + bgArquivo + "')";
    }
    if (screen.width > 1024 && screen.width <= 1280) {
      bgArquivo = "url('/Images/Fundo/1280/" + bgArquivo + "')";
    }
    return $("#fullbackground").css("background-image", bgArquivo);
  }; 
```

在 chrome 中完美运行！

**在其他浏览器中这个效果只是一个空白屏幕！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:24:51.887

我知道您正在尝试使用 CSS，但是使用 jQuery 呢？我最近想做一些类似的事情。我使用了fadeIn 和fadeOut 函数。这些可能对你有一些帮助。

这些链接可能会有所帮助：

[http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/ "淡入")

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/ "消退")

# c# - 如何检索站点根 URL？

> ID：11435663
> 
> 赞同：1
> 
> 时间：2012-07-11T15:06:10.053
> 
> 标签：c#, asp.net, url

我需要获取站点的 url，以便仅在主页上呈现用户控件。我需要检查[http://foo.com](http://foo.com)、[http://www.foo.com](http://www.foo.com)和 foo.com。我对如何检查所有 3 项感到有些困惑。我尝试了以下方法，但它不起作用。

```
string domainName = Request.Url.Host.ToString();
    if (domainName == "http://nomorecocktails.com" | Request.Url.Host.Contains("default.aspx"))

    { //code to push user control to page 
```

也试过

```
var url = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) + "/"; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:09:54.247

您需要检查该`Request.Path`属性是否等于`/`或`/Default.aspx`您的“主页”是什么。域名完全无关紧要。如果我通过 访问您的网站`http://192.56.17.205/`会怎样，同样，如果您的服务器切换 IP 地址会怎样？您的域检查将失败。

如果您使用 QueryString 来显示不同的内容，您还需要检查`Request.QueryString`.

文档`Request.Path`：

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.path.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.path.aspx)

文档`Request.QueryString`：

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:10:41.610

如果您需要用户控件仅出现在主页上（我假设您的意思是主页），那么将调用用户控件的代码添加到该文件后面的代码中。

如果此代码存储在母版页中，那么您可以像这样引用它：

```
Master.FindControl("UserControlID"); 
```

* * *

如果您只使用一个 Web 表单（即 just `Default.aspx`），那么您可以检查 URL 中是否包含相关查询字符串，并且仅在这种情况下才显示：

```
if (Request.QueryString["q"] == null){
  //user control code
} 
```

但是，如果您正在使用这种技术，那么我建议您在将来使用多个使用母版页的 Web 表单来更好地构建您的应用程序。

ASP.NET 网站上有一些关于如何做到这一点的很好的教程：

[http://www.asp.net/web-forms/tutorials/master-pages](http://www.asp.net/web-forms/tutorials/master-pages)

# c# - 填充 datgrid 后如何停止 SelectionChanged 事件？

> ID：11435666
> 
> 赞同：0
> 
> 时间：2012-07-11T15:06:16.483
> 
> 标签：c#, silverlight

我有一个 Silverlight 数据网格，它将在运行时动态更改其数据源，并且该数据网格有一个 SelectionChanged 事件处理程序。但我不希望每次更改数据源时都触发 SelectionChanged 事件处理程序。有没有一种简单的方法可以防止这种情况发生？

谢谢，

魏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:32:34.177

您当然可以卸载 (-=) 事件处理程序，然后在更改数据源后将其加载回来 (+=)。那应该可以正常工作。不过，我想提出一个建议。Silverlight DataGrid 是否有一个可以绑定到的 SelectedItem 属性，而不是连接 SelectionChanged？如果是这样，那么您可以将其绑定到类中的属性并在该属性上侦听 PropertyChanged。然后你可以完全失去事件处理程序。这会让你更好地进行单元测试，并且更符合 MVVM 理念。

# python - DataFrame的所有可能的列组合 - pandas / python

> ID：11435668
> 
> 赞同：3
> 
> 时间：2012-07-11T15:06:33.007
> 
> 标签：python, dataframe, combinations, pandas

给定一个包含多列（可能的回归量）的 DataFrame，我如何生成所有可能的列组合以将它们测试为不同的回归？我正在尝试从所有可能的回归器组合中选择最佳回归模型。

例如，我有这个`DataFrame`：

```
 A   B
1/1/2011    1   4
1/2/2011    2   5
1/3/2011    3   6 
```

我想生成以下内容：

```
 A   B
1/1/2011    1   4
1/2/2011    2   5
1/3/2011    3   6

            A
1/1/2011    1
1/2/2011    2
1/3/2011    3

            B
1/1/2011    4
1/2/2011    5
1/3/2011    6 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T08:27:39.570

如果您正在寻找列组合以相互回归

```
df = DataFrame(numpy.random.randn(3,6), columns=['a','b','c','d','e','g'])
df2 =[df[list(pair)] for pair in list(iter.combinations(df.columns, 2))] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T16:08:26.623

尝试使用[itertools](http://docs.python.org/library/itertools.html#recipes)生成列名的 powerset：

```
In [23]: import itertools as iter

In [24]: def pset(lst):
   ....:     comb = (iter.combinations(lst, l) for l in range(len(lst) + 1))
   ....:     return list(iter.chain.from_iterable(comb))
   ....: 

In [25]: pset(lst)
Out[25]: 
[(),
 ('A',),
 ('B',),
 ('C',),
 ('D',),
 ('A', 'B'),
 ('A', 'C'),
 ('A', 'D'),
 ('B', 'C'),
 ('B', 'D'),
 ('C', 'D'),
 ('A', 'B', 'C'),
 ('A', 'B', 'D'),
 ('A', 'C', 'D'),
 ('B', 'C', 'D'),
 ('A', 'B', 'C', 'D')] 
```

# java - How to get a BufferedImage from a SVG?

> ID：11435671
> 
> 赞同：24
> 
> 时间：2012-07-11T15:06:51.510
> 
> 标签：java, svg, batik

I am using Batik to handle SVG images. Is there any way to get a java.awt.image.BufferedImage from a SVG-file?

I know there are transcoders, with which I could transcode the SVG into, for example, a PNG and then load that PNG with ImageIO.read()· But I don't want to have the temporary file.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T15:57:44.017

Using [Batik](http://xmlgraphics.apache.org/batik/), something like this:

```
public static BufferedImage rasterize(File svgFile) throws IOException {

    final BufferedImage[] imagePointer = new BufferedImage[1];

    // Rendering hints can't be set programatically, so
    // we override defaults with a temporary stylesheet.
    // These defaults emphasize quality and precision, and
    // are more similar to the defaults of other SVG viewers.
    // SVG documents can still override these defaults.
    String css = "svg {" +
            "shape-rendering: geometricPrecision;" +
            "text-rendering:  geometricPrecision;" +
            "color-rendering: optimizeQuality;" +
            "image-rendering: optimizeQuality;" +
            "}";
    File cssFile = File.createTempFile("batik-default-override-", ".css");
    FileUtils.writeStringToFile(cssFile, css);

    TranscodingHints transcoderHints = new TranscodingHints();
    transcoderHints.put(ImageTranscoder.KEY_XML_PARSER_VALIDATING, Boolean.FALSE);
    transcoderHints.put(ImageTranscoder.KEY_DOM_IMPLEMENTATION,
            SVGDOMImplementation.getDOMImplementation());
    transcoderHints.put(ImageTranscoder.KEY_DOCUMENT_ELEMENT_NAMESPACE_URI,
            SVGConstants.SVG_NAMESPACE_URI);
    transcoderHints.put(ImageTranscoder.KEY_DOCUMENT_ELEMENT, "svg");
    transcoderHints.put(ImageTranscoder.KEY_USER_STYLESHEET_URI, cssFile.toURI().toString());

    try {

        TranscoderInput input = new TranscoderInput(new FileInputStream(svgFile));

        ImageTranscoder t = new ImageTranscoder() {

            @Override
            public BufferedImage createImage(int w, int h) {
                return new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
            }

            @Override
            public void writeImage(BufferedImage image, TranscoderOutput out)
                    throws TranscoderException {
                imagePointer[0] = image;
            }
        };
        t.setTranscodingHints(transcoderHints);
        t.transcode(input, null);
    }
    catch (TranscoderException ex) {
        // Requires Java 6
        ex.printStackTrace();
        throw new IOException("Couldn't convert " + svgFile);
    }
    finally {
        cssFile.delete();
    }

    return imagePointer[0];
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-03-05T10:16:17.900

A very easy way is to use the [TwelveMonkeys lib](https://github.com/haraldk/TwelveMonkeys) which adds additional image type support to java's `ImageIO`

So for example you just add these to your maven (or copy the needed jars):

```
 <dependency>
        <groupId>com.twelvemonkeys.imageio</groupId>
        <artifactId>imageio-batik</artifactId> <!-- svg -->
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>batik</groupId>
        <artifactId>batik-transcoder</artifactId>
        <version>1.6-1</version>
    </dependency> 
```

And then you just read it with

```
BufferedImage image = ImageIO.read(svg-file); 
```

To check if the svg reader is registered correctly you could print out the image readers:

```
Iterator<ImageReader> readers = ImageIO.getImageReadersByFormatName("SVG");
while (readers.hasNext()) {
    System.out.println("reader: " + readers.next());
} 
```

The lib also supports additional params, see [readme on github](https://github.com/haraldk/TwelveMonkeys).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-14T05:42:27.503

This is what I use. It's an extension of BufferedImage with its own static factory that can be used wherever a BufferedImage is used. I wrote it so that any call to getScaledInstance(w, h, hint) will render from the SVG, not the rasterized image. ~~A side-effect of this is that the scaling hint parameter has no meaning; you can just pass 0 or DEFAULT to that.~~ ~~It renders lazily - only when graphics data is requested - so the load / scale cycle shouldn't give you too much overhead.~~

Edit: I added support using the above CSS config for scaling quality hints. Edit 2: Lazy rendering wasn't working consistently; I put the render() call into the constructor.

It has the following dependencies:

*   org.apache.xmlgraphics:batik-anim
*   org.apache.xmlgraphics:batik-bridge
*   org.apache.xmlgraphics:batik-gvt
*   org.apache.xmlgraphics:batik-transcoder
*   org.apache.xmlgraphics:batik-util
*   xml-apis:xml-apis-ext
*   commons-logging:commons-logging

When I made this, I used batik 1.8; YMMV.

```
import java.awt.AlphaComposite;
import java.awt.Composite;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.awt.image.WritableRaster;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.HashMap;
import java.util.Map;

import org.apache.batik.anim.dom.SAXSVGDocumentFactory;
import org.apache.batik.bridge.BridgeContext;
import org.apache.batik.bridge.DocumentLoader;
import org.apache.batik.bridge.GVTBuilder;
import org.apache.batik.bridge.UserAgent;
import org.apache.batik.bridge.UserAgentAdapter;
import org.apache.batik.gvt.GraphicsNode;
import org.apache.batik.transcoder.TranscoderException;
import org.apache.batik.transcoder.TranscoderInput;
import org.apache.batik.transcoder.TranscoderOutput;
import org.apache.batik.transcoder.TranscodingHints;
import org.apache.batik.transcoder.image.ImageTranscoder;
import org.apache.batik.util.SVGConstants;
import org.apache.batik.util.XMLResourceDescriptor;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.w3c.dom.svg.SVGDocument;

public class SVGImage extends BufferedImage {
    private static class BufferedImageTranscoder extends ImageTranscoder {
        private BufferedImage image = null;
        @Override
        public BufferedImage createImage(int arg0, int arg1) {

            return image;
        }
        private void setImage(BufferedImage image) {
            this.image = image;
        }
        @Override
        public void writeImage(BufferedImage arg0, TranscoderOutput arg1) throws TranscoderException {
        }
    }

    final static GVTBuilder builder = new GVTBuilder();
    final static SAXSVGDocumentFactory factory = new SAXSVGDocumentFactory(XMLResourceDescriptor.getXMLParserClassName());
    final static UserAgent userAgent = new UserAgentAdapter();
    final static DocumentLoader loader = new DocumentLoader(userAgent);
    final static BridgeContext bridgeContext = new BridgeContext(userAgent, loader);
    static {
        bridgeContext.setDynamicState(BridgeContext.STATIC);
    }
    final static private Log log = LogFactory.getLog(SVGImage.class);
    private static final Map<Integer, String> scaleQuality = new HashMap<Integer, String>();
    static {
        String css = "svg {" +
                "shape-rendering: %s;" +
                "text-rendering:  %s;" +
                "color-rendering: %s;" +
                "image-rendering: %s;" +
        "}";
        String precise = "geometricPrecision";
        String quality = "optimizeQuality";
        String speed = "optimizeSpeed";
        String crisp = "crispEdges";
        String legible = "optimizeLegibility";
        String auto = "auto";

        scaleQuality.put(SCALE_DEFAULT, String.format(css, auto, auto, auto, auto));
        scaleQuality.put(SCALE_SMOOTH, String.format(css, precise, precise, quality, quality));
        scaleQuality.put(SCALE_REPLICATE, String.format(css, speed, speed, speed, speed));
        scaleQuality.put(SCALE_AREA_AVERAGING, String.format(css, crisp, legible, auto, auto));
        scaleQuality.put(SCALE_FAST, String.format(css, speed, speed, speed, speed));
    }
    final static BufferedImageTranscoder transcoder = new BufferedImageTranscoder();

    public static SVGImage fromSvg(URL resource) throws IOException {
        InputStream rs = null;
        try {
            rs = resource.openStream();
            SVGDocument svg = factory.createSVGDocument(resource.toString(), rs);
            return fromSvgDocument(resource, svg);
        } finally {
            if (rs != null) {
                try { rs.close(); } catch (IOException ioe) {}
            }
        }
    }
    public static SVGImage fromSvgDocument(URL resource, SVGDocument doc) {
        GraphicsNode graphicsNode = builder.build(bridgeContext, doc);
        Double width = graphicsNode.getBounds().getWidth();
        Double height = graphicsNode.getBounds().getHeight();
        return new SVGImage(resource, doc, width.intValue(), height.intValue(), SCALE_DEFAULT);
    }
    boolean hasRendered = false;
    private int scalingHint = SCALE_DEFAULT;
    final SVGDocument svg;
    final URL svgUrl;
    private SVGImage(URL resource, SVGDocument doc, int width, int height, int hints) {
        super(width, height, TYPE_INT_ARGB);
        scalingHint = hints;
        svgUrl = resource;
        svg = doc;
        render();
    }
    @Override
    public void coerceData(boolean isAlphaPremultiplied) {
        if (!hasRendered) { render(); }
        super.coerceData(isAlphaPremultiplied);
    }
    @Override
    public WritableRaster copyData(WritableRaster outRaster) {
        if (!hasRendered) { render(); }
        return super.copyData(outRaster);
    }
    private File createCSS(String css) {
        FileWriter cssWriter = null;
        File cssFile = null;
        try {
            cssFile = File.createTempFile("batik-default-override-", ".css");
            cssFile.deleteOnExit();
            cssWriter = new FileWriter(cssFile);
            cssWriter.write(css);
        } catch(IOException ioe) {
            log.warn("Couldn't write stylesheet; SVG rendered with Batik defaults");
        } finally {

            if (cssWriter != null) {
                try { 
                    cssWriter.flush();
                    cssWriter.close(); 
                } catch (IOException ioe) {}
            }
        }
        return cssFile;
    }
    @Override
    public WritableRaster getAlphaRaster() {
        if (!hasRendered) { render(); }
        return super.getAlphaRaster();
    }
    @Override
    public Raster getData() {
        if (!hasRendered) { render(); }
        return super.getData();
    }

    @Override
    public Graphics getGraphics() {
        if (!hasRendered) { render(); }
        return super.getGraphics();
    }
    public Image getScaledInstance(int width, int height, int hints) {
        SVGImage newImage = new SVGImage(svgUrl, svg, width, height, hints);
        return newImage;
    }
    private void render() {
        TranscodingHints hints = new TranscodingHints();
        hints.put(ImageTranscoder.KEY_WIDTH, new Float(getWidth()));
        hints.put(ImageTranscoder.KEY_HEIGHT, new Float(getHeight()));
        hints.put(ImageTranscoder.KEY_XML_PARSER_VALIDATING, Boolean.FALSE);
        hints.put(ImageTranscoder.KEY_DOM_IMPLEMENTATION, svg.getImplementation());
        hints.put(ImageTranscoder.KEY_DOCUMENT_ELEMENT_NAMESPACE_URI, SVGConstants.SVG_NAMESPACE_URI);
        hints.put(ImageTranscoder.KEY_DOCUMENT_ELEMENT, "svg");
        String css = scaleQuality.get(scalingHint);
        File cssFile = null;
        if (css != null) {
            cssFile = createCSS(css);
            if (cssFile != null) {
                hints.put(ImageTranscoder.KEY_USER_STYLESHEET_URI, cssFile.toURI().toString());
            }
        }
        transcoder.setTranscodingHints(hints);
        transcoder.setImage(this);
        // This may be a re-render, if the scaling quality hint has changed.
        // As such, we force the image into overwrite mode, and kick it back when we're done / fail
        Graphics2D gfx = (Graphics2D) super.getGraphics();
        Composite savedComposite = gfx.getComposite();
        gfx.setComposite(AlphaComposite.Clear);
        try {
            transcoder.transcode(new TranscoderInput(svg), null);
            hasRendered = true;
        } catch (TranscoderException te) {
            log.warn("Could not transcode " + svgUrl.getPath() + " to raster image; you're going to get a blank BufferedImage of the correct size.");
        } finally {
            gfx.setComposite(savedComposite);
            if (cssFile != null) {
                cssFile.delete();
            }
        }
    }
    public void setScalingHint(int hint) {
        this.scalingHint = hint;
        // Forces a re-render
        this.hasRendered = false;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-15T10:30:03.337

9 years later here is an other solution with Batik :

> implementation 'org.apache.xmlgraphics:batik-all:1.14'
> 
> implementation 'org.apache.xmlgraphics:batik-swing:1.14'

```
import lombok.extern.slf4j.Slf4j;
import org.apache.batik.transcoder.Transcoder;
import org.apache.batik.transcoder.TranscoderException;
import org.apache.batik.transcoder.TranscoderInput;
import org.apache.batik.transcoder.TranscoderOutput;
import org.apache.batik.transcoder.image.PNGTranscoder;
import org.springframework.stereotype.Component;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

@Slf4j
@Component
public class SvgToRasterizeImageConverter {

    public BufferedImage transcodeSVGToBufferedImage(File file, int width, int height) {
        // Create a PNG transcoder.
        Transcoder t = new PNGTranscoder();

        // Set the transcoding hints.
        t.addTranscodingHint(PNGTranscoder.KEY_WIDTH, (float) width);
        t.addTranscodingHint(PNGTranscoder.KEY_HEIGHT, (float) height);
        try (FileInputStream inputStream = new FileInputStream(file)) {
            // Create the transcoder input.
            TranscoderInput input = new TranscoderInput(inputStream);

            // Create the transcoder output.
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            TranscoderOutput output = new TranscoderOutput(outputStream);

            // Save the image.
            t.transcode(input, output);

            // Flush and close the stream.
            outputStream.flush();
            outputStream.close();

            // Convert the byte stream into an image.
            byte[] imgData = outputStream.toByteArray();
            return ImageIO.read(new ByteArrayInputStream(imgData));

        } catch (IOException | TranscoderException e) {
            log.error("Conversion error", e);
        }
        return null;
    }

} 
```

# c# - 如何在对产品性能影响最小的情况下从生产环境到开发环境获取测试数据？

> ID：11435685
> 
> 赞同：0
> 
> 时间：2012-07-11T15:07:33.647
> 
> 标签：c#, sql-server, ssis, linked-server, bcp

我们经常需要从我们的生产 sql server 2008（非 r2 企业版）获取一些测试数据到我们的开发 sql server 2008 r2。显然，当我们进行数据提取时，我们希望对生产盒的性能影响最小。

哪种方法最好？

```
1) bcp out , bcp in
2) ssis package etl
3) linked server insert into dev.table select from prod.table
4) C# app 
```

也许还有其他方法，但我只使用了以上4种。请指教。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:09:39.790

如果您的 SQL 服务器有夜间备份，您可以将备份复制到 DEV 服务器并使用备份恢复 dev。这将对生产 SQL 服务器的影响最小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:15:27.400

如果您有兴趣只进行备份而不修改任何数据，那么 BCP 是您的最佳选择。这是一个非常快速的选项，需要对文本文件输入进行最少的解析。您可以创建一个批处理文件，在其中编写`BCP OUT`和`IN`执行命令并执行每当您需要复制数据时。

有关不同加载策略的更多信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/dd425070.aspx)

# wpf - 高非托管内存 - WPF 应用程序

> ID：11435689
> 
> 赞同：0
> 
> 时间：2012-07-11T15:07:43.207
> 
> 标签：wpf, memory-management, unmanaged-memory

我即将部署我的新 WPF 应用程序，我刚刚在任务管理器中注意到它消耗了大量内存。因此，我下载了 RedGate Antz 的试用版，试图找出导致此问题的原因，我震惊地看到大约 90 MB 的非托管内存使用情况。因为 Antz 不支持未损坏的内存，所以我尝试使用 Windbg，它本身并没有指向高使用率。这让我相信它一定是我正在加载的 DLL 之一。我在我的应用程序中使用 DevExpress 控件。

一个有趣的功能是当我最小化我的应用程序时，内存从 110 MB 下降到大约 6-10 MB。

我应该担心/担心吗？

这是我的第一个 WPF 应用程序，我不完全确定在内存使用方面会发生什么。最小化此内存的事实是否会重新获得/放弃表明一切正常？

关于可能导致此问题的任何想法或想法将是最有帮助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:23:22.587

如果您想具体了解导致它的原因，我对 SciTech 的 .Net Memory Profiler (memprofiler.com) 非常满意。

由于 .Net 运行时的性质，如果您在一台有大量可用内存的机器上运行，那么它通常会尝试使用它。如果您开始看到与它相关的性能问题，那么您应该担心，并且通常最好知道什么在使用资源，不管怎样。内存下降的一个可能原因是其中一个 DLL 可能会挂接到主窗口的事件并在最小化时调用垃圾收集。

如果您担心高内存使用的感觉，您可以使用一些技巧来按摩 TaskManager 中显示的数字（例如 p/invoking SetProcessWorkingSetSize），但这似乎并不是您真正要问的.

# c# - 算法建议独特的价值和编辑

> ID：11435691
> 
> 赞同：0
> 
> 时间：2012-07-11T15:07:44.740
> 
> 标签：c#, linq, algorithm

我有一个接受字符串值的空列表。

添加元素时，我需要检查列表中是否已存在具有相同值的字符串，如果是，则应发生异常（ROLE 1 仅数组中的唯一值）。

现在我想一个用户让编辑列表中的元素，如果新编辑的值是唯一的，否则应该发生异常。

我的问题是：让我们假设用户选择了编辑元素，但在发送到服务器时实际上并没有改变值。系统应该检测到元素没有被更改并接受该值（即使列表中已经存在）。

PS 我简化了问题，我实际上使用的是 MVC 和 EF & linq。我的问题是我无法在我的应用程序界面中检查插入的值是否已被编辑。

你能帮我找到一个有效的算法来解决这个问题吗？谢谢

让我知道问题是否足够清楚或您需要更多信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:21:11.977

这是我的解决方案：

1.  让客户端检查文本是否被修改。如果没有，告诉服务器没有修改。如果这是不可能的，让客户端同时发送原始文本和修改后的文本，然后服务器将能够检查它是否被修改。（如果不是，则无需触摸您存储的数据）。这适用于桌面和 Web 环境。

2.  最好不要使用列表，使用集合（可能是哈希集）。该套装只允许拥有每个项目一次。如果你不能，我猜你可以继续使用该列表。如果我理解正确，您使用的是数据库，那么如果您可以直接与数据库引擎交互而不是同步列表（或集合），您的应用程序将获得性能提升。

3.  将列表/集的版本转换为添加-删除对（而不是设置项目）。在进行任何修改之前，让它检查列表/集是否包含新值。如果新值已经存在，那么您可以抛出异常或向客户端发送消息（或者更适合您的环境的任何内容）。

4.  You may want to sync the access to your list/set, keep it simple: use a lock (Monitor). I would consider a read-write lock, but that is complicating things while you are learning. [If you interface directly with the database engine, you can let it handle that instead]. Note: there is no need for this if you will only have one single client... ever (unless that single client can send multiple concurrent requests... :P).

# .net - 如何确保 IE 信任所有内部服务器？

> ID：11435698
> 
> 赞同：0
> 
> 时间：2012-07-11T15:08:04.723
> 
> 标签：.net, iis, iframe, windows-authentication

我想确保所有域计算机上的 Internet Explorer 都信任所有域服务器。

我遇到的具体问题是我们在本地安装 Dynamics CRM 2011。我需要在 iframe 中显示一个页面，该页面使用 Windows 身份验证来验证用户和审核操作。

当我使用 iframe 加载视图时，开箱即用，IE 似乎会将站点置于其受限区域中，最终我收到 401 错误。

我已经创建了一个具有相同 Windows 更新配置的测试站点以加载到 iframe 中，并将其显式添加到受信任的站点区域，但这在每台机器上都很难做到，并且是一种解决方法。就我而言，每个客户端都应该信任我们的内部服务器，并且应该属于 Intranet Zone。

我怎样才能强制我要求的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:29:44.620

您可以通过组策略配置这些设置。计算机配置>>管理模板>>Windows 组件>>Internet Explorer>>Internet 控制面板>>安全页面，然后查看站点到区域分配列表策略。

# expressionengine - 仅显示文本变量的一部分

> ID：11435699
> 
> 赞同：1
> 
> 时间：2012-07-11T15:08:06.187
> 
> 标签：expressionengine

我只想在表达式引擎中显示文本变量的一部分。是否可以仅使用表达式引擎标签或使用一点 php 来实现它？

我有一个 textArea 自定义字段，它是博客 {blog_text_content} 的文本内容，我只想显示前 25 个字符。

Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eius... 阅读更多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T16:08:18.293

您可以使用“TrucHTML”插件来做到这一点。它还“干净”地剪切 HTML，这样您的摘录中就不会出现损坏的 HTML。

该插件可以在这里找到：http: [//utilitees.de/ee.php/trunchtml/](http://utilitees.de/ee.php/trunchtml/)

在您的情况下，您可以在安装后使用类似的东西：

{exp:trunchtml chars="25"}{blog_text_content}{/exp:trunchtml}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:25:43.240

你的意思是这样的吗？

```
$rest = substr("abcdef", 0, -1);  // returns "abcde"
$rest = substr("abcdef", 2, -1);  // returns "cde"
$rest = substr("abcdef", 4, -4);  // returns false
$rest = substr("abcdef", -3, -1); // returns "de" 
```

$string = substr('Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eius',0, -43);

回声 $string 。'...阅读更多';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T07:26:25.303

这可以通过 php 来实现，如下所示：

```
<?php
$str = '{blog_text_content}';
if(strlen($str) > 50) {
    echo substr('{blog_text_content}', 0, 25) .'...';
}
else {
    echo $str;
}
?> 
```

只需确保您的模板允许 php 并在输出阶段对其进行解析。

# asp.net-mvc - MVC c# - 只需在提交时执行一次 POST

> ID：11435700
> 
> 赞同：0
> 
> 时间：2012-07-11T15:08:06.533
> 
> 标签：asp.net-mvc, jquery, razor

我在 IE9 上使用 MVC 3、c# 在我的控制器中，我有以下 2 个重要的 ActionResul：

```
 public ActionResult EditTrain(String trainid)
    {
       ....
       return PartialView(edittrain);
    }

    [HttpPost]
    public ActionResult EditTrain(Train editrain)
    {
       ....
       DataContext.SubmitChanges();      
       return RedirectToAction("Edit", new { id = trainid });                  
    } 
```

在局部视图中，我有以下代码：

```
 @model Models.EditTrain
    @{
       ViewBag.Title = "Training";
    }

    <h2>Train</h2>
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "theForm" }))
    {
      @Html.ValidationSummary(false)

      @Html.HiddenFor(model => model.ID)

      <div class="display-label" style="font-weight: normal">
       @Html.Label("ID:")
      </div>
      <div class="display-field">
       @Html.DisplayFor(model => model.ID)
      </div>   

      <div class="display-label" style="font-weight: normal">
        @Html.Label("KitID:")
      </div>
      <div class="display-field">
       @Html.DisplayFor(model => model.KitID)
      </div> 

      <div class="editor-label">
         @Html.Label("Inactive:")
      </div>
      <div class="editor-field">
         @Html.EditorFor(model => model.Inactive)
      </div>    

      <div class="editor-label">
       @Html.Label("Inactive Date:")
     </div>   

     <div id='datepicker' class="editor-field">
       @Html.EditorFor(model => model.InactiveDate)
     </div> 
      ......
      <div style="clear:left;"> 
       <br />         
       <p>
        <input type="submit" id="submit" value="Submit" />
       </p>
      </div> 
    }  

   <script type="text/javascript">

   $.ajaxSetup({ cache: false }); 

   $(document).ready(function () {

     $("#submit").click(function () {

       $.ajax({
               type: "POST",
               url: url,
               data: $('#theForm').serialize()
             });

       $("#stlist").load('@Url.Action("KitsEdit","Spr")' + '?id=' +  '@Model.sprid');

     });
   }); 
```

在上面的代码中，我喜欢上面发生的事情是，一旦用户点击提交，我喜欢它转到以下操作：

```
 [HttpPost]
    public ActionResult EditTrain(Train editrain) 
```

然后返回视图并运行以下代码

```
 $("#stlist").load('@Url.Action("KitsEdit","Spr")' + '?id=' +  '@Model.sprid'); 
```

发生的事情是它执行上述操作但在运行之后

```
 $("#stlist").load('@Url.Action("KitsEdit","Spr")' + '?id=' +  '@Model.sprid'); 
```

它运行

```
 [HttpPost]
    public ActionResult EditTrain(Train editrain) 
```

第二次。

我怎样才能防止它去

```
 [HttpPost]
    public ActionResult EditTrain(Train editrain) 
```

在.load() 之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:42:43.443

您应该`false`从您的`.click()`处理程序返回。但是看看你的代码，它在概念上有些问题。您在触发 AJAX 请求后立即调用该`.load`方法，甚至无需等待此 AJAX 请求完成。此外，调用使用 AJAX 重定向到另一个操作的控制器操作也没有什么意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:44:44.170

你可以使用**request.Abort()**

```
$(document).ready(function () {

     $("#submit").click(function () {

       var request = $.ajax({
               type: "POST",
               url: url,
               data: $('#theForm').serialize()
             });

       $("#stlist").load('@Url.Action("KitsEdit","Spr")' + '?id=' +  '@Model.sprid');
request.Abort()
     });
   }); 
```

# javascript - Javascript 如果选择框被禁用没有错误

> ID：11435706
> 
> 赞同：1
> 
> 时间：2012-07-11T15:08:26.313
> 
> 标签：javascript, jquery, forms

目前我正在使用提交时使用 javascript 验证所有表单输入字段并在字段不完整时引发错误的表单。但是，我有一个选择，当检查时，将禁用一些输入，即将到来`stop the errors from being thrown if the textbox is disabled.`

相关代码包括：

html:

```
 <select name="os" id="os">
                    <option>-Select-</option> 
                    <option value="A">Android</option> 
                    <option value="I">iOS</option>
                     <option value="W">Windows Mobile</option> 
                 </select> <font color="#CC0000">*</font> 
```

js

```
if (document.FrontPage_Form1.Action[0].checked==true) 
    {
        var dropvalue = document.getElementById("os");
        var dropText = dropvalue.options[dropvalue.selectedIndex].text;

            if (dropText=="-Select-") && (dropvalue.disabled=false)
            {
                document.getElementById("OS_Msg").style.display='';
                document.getElementById("OS_Err").style.display='';

                valid==false;
            }

    } 
```

jQuery 禁用

```
<p><input type="checkbox" name="noPhone" id="noPhone">: My Device does not have a phone number.</p>

<script type="text/javascript">

            $("#noPhone").click(onCheckChange).change(onCheckChange);

                        function onCheckChange() {
                          if ($("#noPhone").is(':checked'))
                          {
                            $("select.focusDrop").attr('disabled', 'disabled');
                            $(":text").attr('disabled', 'disabled');
                          }
                          else
                          {
                            $("select.focusDrop").removeAttr('disabled');
                            $(":text").removeAttr('disabled');
                          } 
                        }

            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:17:38.420

除了缺少一组环绕 的括号外`(dropText=="-Select-") && (dropvalue.disabled=false)`，您正在设置一个值而不是将其与

```
dropvalue.disabled=false 
```

它应该是

```
dropvalue.disabled==false 
```

正如 Guffa 所指出的，`valid==false;`应该是`valid=false;`

# application-start - & Application_Start 事件

> ID：11435707
> 
> 赞同：0
> 
> 时间：2012-07-11T15:08:27.247
> 
> 标签：application-start, impersonation

所以 - 经过大量研究，似乎 < identity impersonate=true > 仅在 Application_Start 事件触发后才有效。

有谁知道这个问题的任何解决方法？我有一个应用程序需要在应用程序首次启动时创建数据库。运行 IIS 网站的用户具有适当的权限，可以以 APP_POOL 用户特别没有的方式进行操作。

我目前的 HACK 解决方案是放（伪代码）

```
static bool AppInitialized = false;
void Session_Start() {
   if (!AppInitialized) {
     AppInitialized=true;
     InitializeApp();
   }
} 
```

impersonate=true 将在特定会话开始时“生效” - 所以这很有效，但看起来很愚蠢，因为我基本上是在重新创建 Application_Start 事件的行为。似乎必须有一个更优雅的解决方案来解决这个问题——不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:14:38.837

这很奇怪——我的 web.config 文件中有这个条目：

```
<identity impersonate="true" password="blarhg" userName="thisuser"/> 
```

当我检查 Application_Start() 事件的身份时，它给了我“thisuser”。

这不正确吗？

# ruby - ruby 中不推荐使用 error_messages_for - 我如何找到替代品？

> ID：11435710
> 
> 赞同：2
> 
> 时间：2012-07-11T15:08:38.013
> 
> 标签：ruby, ruby-on-rails-3

我正在阅读一本旧书（2008 年）来学习 ruby​​，它适用于 rails 2.0.2。

我决定使用 Rails 3 来找出当时的 ruby​​ 与现在的区别。到目前为止，大部分都很好，我很容易找到并纠正这些差异。

我现在遇到的问题是代码正在使用已弃用的函数`error_messages_for`，并且在查看[http://apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_messages_for](http://apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_messages_for)我找不到替代品或任何方式来告诉我什么新的方式是。有人可以帮助我找到新的使用方式`error_messages_for`以及我应该如何寻找新的做事方式以及发现新的最佳实践的方式等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:23:28.803

*   [Rails 3.0 中的 f.error_messages](https://stackoverflow.com/questions/3873190/f-error-messages-in-rails-3-0)
*   [Rails error_messages 助手](https://stackoverflow.com/questions/3025057/rails-error-messages-helper)
*   [http://www.emersonlackey.com/article/rails3-error-messages-for-replacement](http://www.emersonlackey.com/article/rails3-error-messages-for-replacement)
*   [http://ariejan.net/2010/12/15/why-did-errormessagesfor-disappear-from-rails-3/](http://ariejan.net/2010/12/15/why-did-errormessagesfor-disappear-from-rails-3/)
*   [https://gist.github.com/1113828](https://gist.github.com/1113828)

仅在 Google 搜索“rails error_messages_for rails 3”时找到的前 5 个链接。

也就是说，您确实应该使用最新的书。甚至最新的免费 Rails 教程也涵盖了 Rails 3。

# asp.net - 如何阻止 Microsoft.Sharepoint.Sandbox.dll 被复制到我的 bin 文件夹中？

> ID：11435715
> 
> 赞同：4
> 
> 时间：2012-07-11T15:08:58.290
> 
> 标签：asp.net, sharepoint, build, project, post-build-event

我有一个 utils 类库项目，其中包含一些 Sharepoint 功能。项目引用`Microsoft.Sharepoint.dll`（复制本地设置为 false）。我们有许多其他项目引用了我们的 utils dll，每当我们构建它们时，它们`Microsoft.Sharepoint.Sandbox.dll`都会被复制到这些应用程序的 bin 文件夹中。然后在运行任何应用程序时出现以下错误：

```
Could not load file or assembly 'Microsoft.Sharepoint.Sandbox' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

删除 dll 解决了问题。有没有办法阻止这个 Microsoft.Sharepoint.Sandbox.dll 被复制到 bin 文件夹中？**我不想使用构建后脚本**，因为有很多项目引用了 utils 项目，而且我们仍然需要在部署时手动删除 dll。

我可以复制如下：

1）创建一个新的解决方案

2）添加一个名为utils的类库项目

3) 参考 Microsoft.Sharepoint.dll

4）Class1.cs：

```
namespace Utils
{
    public class Class1
    {

        public void testMeth()
        {
            Microsoft.SharePoint.DefaultItemOpen c; 
        }
    }
} 
```

5) 在解决方案中添加一个新的 Web 项目 (WebApplication1)

6）引用Utils项目并尝试运行WebApplication1

**编辑：** Microsoft.Sharepoint.Sandbox 是一个 64 位 dll，但我需要针对任何 CPU。

***有没有办法告诉 VS 停止跨越隐式引用？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:22:45.053

将 Microsoft.Sharepoint.Sandbox.dll 程序集添加到 GAC 怎么样？根据[MSDN](http://msdn.microsoft.com/en-us/library/t1zz5y8c%28VS.80%29.aspx)：

> 如果您部署/复制包含对在 GAC 中注册的自定义组件的引用的应用程序，则无论“复制本地”设置如何，该组件都不会随应用程序一起部署/复制。有关详细信息，请参阅[项目参考](http://msdn.microsoft.com/en-us/library/ez524kew%28v=vs.80%29.aspx)。

**更新。** 如果您以任何 CPU 为目标，则可以编写一个 powershell 或 bat 脚本来枚举所有 bin 文件夹并删除所有 Microsoft.Sharepoint.Sandbox.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:56:24.873

尝试进入项目属性屏幕。构建选项卡。将“平台目标”更改为 x64

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T02:43:54.253

根据[Louis Liang](http://louisliang.wordpress.com/2012/05/07/could-not-load-the-sandbox-dll-from-the-asp-net-project/)的这篇博文，解决方法是添加构建后事件并删除 DLL：

```
cd $(TargetDir)
del Microsoft.SharePoint.SandBox.dll 
```

# msbuild - MSBuild 任务 SVNCommit 所需的参数

> ID：11435719
> 
> 赞同：0
> 
> 时间：2012-07-11T15:09:10.403
> 
> 标签：msbuild, msbuild-task

我们目前使用 MSBuild 任务来调用颠覆命令。例如。`<SvnCommit Message="Automated build server checkin" ToolPath="$(SvnPath)" Targets="$(MSBuildProjectDirectory)"/>`

问题是它强制颠覆命令“svn ci”为我们的构建使用开关 --non-interactive --no-auth-cache。

有谁知道我可以在 MSBuild 任务中使用的任何参数`<SVNCommit ... >`来摆脱开关 --non-interactive --no-auth-cache 的使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:29:43.740

根据最完整和自我描述的[文档](https://github.com/loresoft/msbuildtasks/blob/master/Source/MSBuild.Community.Tasks/Subversion/SvnClient.cs)，您可以轻松更改任何命令行参数。在您的特定情况下，您应该在调用中添加两个参数

```
<SvnCommit Message="Automated build server checkin" 
           ToolPath="$(SvnPath)" 
           Targets="$(MSBuildProjectDirectory)"
           NonInteractive="false"
           NoAuthCache="false"/> 
```

PS：[他们的测试](https://github.com/loresoft/msbuildtasks/blob/master/Source/MSBuild.Community.Tasks.Tests/Subversion/SvnCommitTest.cs)表明这两个参数是默认使用的。

# python - 如何将字典键与函数关联？

> ID：11435720
> 
> 赞同：3
> 
> 时间：2012-07-11T15:09:10.493
> 
> 标签：python, dictionary

我的应用程序有一个类，其中包含执行各种操作的功能。这些操作与 1 个且仅 1 个字典键相关。如何将字典键与其各自的功能相关联？该工具的目标是在给定一组键时使用适当的一组功能。

这就是我目前的工作方式：

```
class MyClass:

    def FuncA(self):
        # Some code -----------------------------

    def FuncB(self):
        # Some code -----------------------------

myDict["Objective A"] = MyClass.FuncA()
myDict["Objective B"] = MyClass.FuncB() 
```

由于我的程序的性质，将使用的密钥集可能会不时更改。因此，像我这样对它进行硬编码是没有意义的。我希望能够遍历我的一组键并运行相应的功能。请记住，ObjectiveA 与 FuncA 相关联。因此，如果 ObjectiveA 出现在我的键列表中，则需要调用 FuncA 以处理某些操作并填充相应的值对。

设想这个：

```
for k in myDict.keys():
    myDict[k] = MyClass.TheAssociatedFunction() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T15:10:18.747

```
myDict["Objective A"] = MyClass.FuncA() 
```

关联 的返回值`MyClass.FuncA`。如果要关联函数本身：

```
myDict["Objective A"] = MyClass.FuncA
myDict["Objective B"] = MyClass.FuncB 
```

然后就可以直接调用了：

```
myDict["Objective A"]() 
```

# javascript - 将 var 从 div 传递给 jquery

> ID：11435725
> 
> 赞同：1
> 
> 时间：2012-07-11T15:09:30.383
> 
> 标签：javascript, jquery, html

我正在使用 jquery 函数打开一个对话框，我需要能够更改框的高度和宽度。我想从 DIV 中传递一个参数。我研究了许多不同的可能性，但无济于事。任何想法将不胜感激。

```
$.fx.speeds._default = 1000;
$(function() {
    $("#dialog").dialog({
        autoOpen: false,
        height: 300,
        width: 500,
        show: "drop",
        hide: "drop"
    });
    $("#opener").click(function() {
        $("#dialog").dialog("open");
        return false;
    });
}); 
```

这是我的分区。

```
<div id="dialog">
   Some text here
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:54:57.947

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:17:11.830

根据[文档](http://jqueryui.com/demos/dialog/#option-width)，您可以调整窗口大小，设置最小/最大高度和宽度，并在调用`.dialog()`方法时将高度和宽度设置为选项。

**从文档中：**

```
$( ".selector" ).dialog({ width: 460 }); 
```

在 init 之后获取或设置宽度选项。

```
//getter
var width = $( ".selector" ).dialog( "option", "width" );
//setter
$( ".selector" ).dialog( "option", "width", 460 ); 
```

获取存储在 div 中的任何数据或参数并将其作为选项传递给方法应该非常简单`.dialog()`。

**更新：**

从您的评论中，您想要这样的东西：

**[小提琴](http://jsfiddle.net/ehzdB/)**

```
<div id="dialog" data-height="400" data-width="400" style="background-color: red;">
   Some text here
</div>
<a id="opener" href="#">Open dialog</a>​

$(document).ready(function() {
    $("#opener").click(function(e) {
        e.preventDefault();
        var dialogHeight = $("#dialog").data("height"),
            dialogWidth = $("#dialog").data("width");
        $("#dialog").dialog({
            height: dialogHeight,
            width: dialogWidth            
        });
        return false;
    });
});​ 
```

# jquery - 使用时间间隔 zend 框架的 Ajax 调用

> ID：11435730
> 
> 赞同：1
> 
> 时间：2012-07-11T15:09:47.993
> 
> 标签：jquery, ajax, zend-framework, request, nstimeinterval

我想要做的基本上是每 3 秒检索一次 div 和 sub div 内容。我正在使用 ajax 将数据发送到控制器。但我得到

```
$.ajax is not a function
http://localhost/index/editor
Line 25 
```

这是我正在使用的代码。

```
<script type="text/javascript">
    window.setInterval(getAjax, 3000);

    function getAjax() {
        $.ajax({
            type: "POST",
            url: 'localhost/index',
            data: "some-data"     
        });
    }

</script> 
```

1）我做错了什么

2）如何在zend控制器中接收数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:38:14.103

一旦 jQuery 包含在您的页面中，您将能够使用 $.ajax() 函数。之后，在您的控制器中，您可以访问 $_POST 变量中的数据。为了方便起见，我通常使用 JSON 对象向控制器发送数据：

```
 <script type="text/javascript">
        window.setInterval(getAjax, 3000);

        var data = {};
        data['field1'] = 'value1';
        data['field2'] = 'value2';
        function getAjax() {
            $.ajax({
                type: "POST",
                url: 'localhost/index',
                data: data    
            });
        }

    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"> 
```

在您的控制器中，您可以使用 _getParam 查找值：

```
public function ajaxAction() {
    //Disable the view (if this is an AJAX call)
    if($this->getRequest()->isXmlHttpRequest()) {
        $this->_helper->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender();
    }

    //Get posted data
    $field1 = $this->_getParam('field1');
    $field2 = $this->_getParam('field2');

    if($field1=='value1') {
        $jsonResp['isValid'] = 1;
        $jsonResp['gotValue'] = $field2;
    }
    header('Content-type: application/json');
    echo Zend_Json::encode($json);
} 
```

编辑：哦，我忘了，你可能想检查你的控制器从你的 jQuery 代码发送的响应。您可以通过以下方式实现

```
$.ajax({
//...
success: function(jsonResp) {
    if(jsonResp['isValid']) alert(jsonResp['gotValue']);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:17:26.283

`$.ajax`由 jQuery 定义。您必须在调用此函数之前包含它。

# c# - 如何有效且安全地将文件图标加载到工作线程中的 ListView 中？

> ID：11435733
> 
> 赞同：0
> 
> 时间：2012-07-11T15:09:53.783
> 
> 标签：c#, multithreading, thread-safety

我正在努力找出将图标加载到`View.LargeIcon`已使用文件列表初始化的 ListView (in) 中的最佳方法。

我想我将不得不使用一个 ImageList，所以我创建了一个并将其分配给 ListView。我创建了一个 BackgroundWorker 来处理从每个图像加载图标的繁琐工作。

1.  在`DoWork`我使用`InvokeRequired`和的组合`Invoke`将项目添加到 ListView。这行得通，但它导致 UI 闪烁了一下，看起来并不是特别好。无法`ListView.Items`从工作线程内循环意味着必须将 a`List<ListViewItem>`作为参数传递。即使我在循环中调用`CancelAsync`并检查`CancellationPending`并退出如果它是真的，我也很难让 BackgroundWorker 取消。（此时为什么会发生这种情况并不重要。）

2.  我尝试使用该`ProgressChanged`事件来处理所有 UI 工作。我调用`ReportProgress(0, obj)`where`obj`是一个自定义类，其中包含我希望 UI 线程用来更新 UI（即 ListView）的信息片段。这种方法似乎更有希望。

然而，这两种解决方案对我来说都不是特别优雅，也没有带来特别好的用户体验。我觉得我错过了这个问题的（明显的）解决方案。毕竟，Windows 资源管理器处理图像缩略图的加载比我的应用程序要好得多。不过，我相信 Windows 资源管理器会在 Thumbs.db 中缓存缩略图。

也许上述两种方法中的一种*是*正确的方法，如果是这种情况，请告诉我，以便我可以更详细地调查该特定解决方案，以找出我做错了什么。

## 编辑

我忘了提到文件和图标列表是从网络路径加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:18:01.400

我建议将您的业务逻辑与您的 UI 逻辑分离。加载文件列表并为其获取图标的代码不应与与`ListView`表单上的控件一起使用的代码混合。

例如，我建议创建一个简单地包含每个文件所需的所有数据属性的类：

```
class MyFileInfo
{
    public string FileName { get; set; }
    public Image Icon { get; set; }
} 
```

然后，编写一个返回已填充对象列表的方法：

```
public List<MyFileInfo> LoadFileList(string folderPath) { } 
```

然后，UI 可以在另一个线程上调用该方法，当它返回结果时，它可以`ListView`从返回的数据中填充控件。要在添加或修改项目时停止列表闪烁，请在进行任何更改之前调用控件`SuspentLayout`上的方法`ListView`，然后`ResumeLayout`在完成所有更改后调用。

# scala - 如何在 Scala 中编写此配置逻辑？

> ID：11435735
> 
> 赞同：3
> 
> 时间：2012-07-11T15:09:56.667
> 
> 标签：scala, applicative

[这是我之前的问题](https://stackoverflow.com/questions/11178141/how-to-code-this-validation-logic-in-scalae)的后续

假设我使用以下逻辑（在准 Java 中）来获取配置参数`MyParam`：

```
字符串 myParam = null

if ((myParam = getFromArgs("MyParam")) != null)
   返回我的参数

if ((myParam = getFromSystemProperties("MyParam")) != null)
   返回我的参数

if ((myParam = getFromUserConfigFile("MyParam")) != null)
   返回我的参数

... // 等等

如果（myParam == null）
   错误（“没有我的参数”）
```

如何在 Scala 中编写此逻辑？在这里适用吗`Applicative`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T15:26:39.847

```
List(getFromArgs _, getFromSystemProperties _, getFromUserConfigFile _).map{func=>
  Option(func("MyParam"))
}.reduce(_ orElse _).getOrElse(sys.error("No MyParam")) 
```

结帐[scala 选项备忘单](http://blog.tmorris.net/scalaoption-cheat-sheet/)。选项很强大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T15:44:45.043

如果您的问题只是语法问题，xiefei 的答案是准确的。

相反，如果您真的在寻找灵活的配置，我建议您热情地查看 Typesafe 配置项目：[https ://github.com/typesafehub/config/](https://github.com/typesafehub/config/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T21:48:16.673

```
(
  Option(getFromArgs("MyParam")) orElse
  Option(getFromSystemProperties("MyParam")) orElse
  Option(getFromUserConfigFile("MyParam")) getOrElse
  error("No MyParam")
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T16:25:27.503

正如我在上面的评论中所指出的，您可以使用“第一个”幺半群实例`Option`（实际上您只需要一个半群）来执行此操作——例如，使用[Scalaz](http://code.google.com/p/scalaz/)：

```
import scalaz._, Scalaz._

def fo[A](a: A) = Option(a).fst

val param = (
  fo(myParam) |+|
  fo(getFromArgs("MyParam")) |+|
  fo(getFromSystemProperties("MyParam")) |+|
  fo(getFromUserConfigFile("MyParam"))
) getOrElse sys.error("No Param") 
```

它不一定比`orElse`使用标准库的版本更可取，但它突出了相关的抽象（还要注意这个版本是惰性的——`getX`如果不需要它们就不会发生调用）。

# android - 一个链接来统治他们：iphone/Android 单个 url 重定向到应用程序，如果可用 else web

> ID：11435736
> 
> 赞同：0
> 
> 时间：2012-07-11T15:09:56.767
> 
> 标签：android, iphone, email, url, schema

我想向我的用户发送电子邮件，理想情况下，我们在电子邮件中有 1 个链接用于执行操作。例如：（查看项目）。

因此，如果用户单击此链接并且他们在 iphone 上的位置应该打开应用程序并转到某个位置。

但是，如果那是正在使用的设备，那么相同的 url 应该能够打开 android。如果没有使用任何设备，那么它应该将您带到网络。

我知道我可以有一个 URL，当单击该 URL 时会根据客户端类型进行重定向，但是当重定向发生时，这仍会触发需要通过移动设备触发以打开应用程序的内容，而不仅仅是重定向到用户访问一些不存在的网页（作为移动 url 架构）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:12:39.087

HTTP 浏览器可能会发送包含`User-Agent`有关浏览器、操作系统等信息的标头。请注意，某些浏览器可能会伪造这些值。

# c# - 有没有办法在 Visual Studio 中更改实体图中的视图？

> ID：11435745
> 
> 赞同：0
> 
> 时间：2012-07-11T15:10:31.277
> 
> 标签：c#, visual-studio-2010, entity-framework

显示了如此多的表格，有时很难找到我正在寻找的表格图。

Shirley 有一种更好的方法可以在“.edmx”图表中找到特定表格。（比如切换到列表视图之类的）

谢谢

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:39:29.363

您可以使用[模型浏览器窗口](http://msdn.microsoft.com/en-us/library/bb738483.aspx)。

# c# - 用于隔离 html 标记的正则表达式

> ID：11435750
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:10:44.103
> 
> 标签：c#, javascript, .net, html, regex

我正在寻找一个正则表达式来隔离一个 html 标记。这包括TAG、ATTRIBUTES 和里面的CONTNET。

假设我有这个：

```
<html> 
<body>
aajsdfkjaskd 
<TAGNAME name="bla" context="non">hfdfhdj </TAGNAME>
</body>
 </html> 
```

我需要一个会返回的正则表达式：

```
<TAGNAME name="bla" context="non">hfdfhdj </TAGNAME> 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:15:21.803

不要使用正则表达式，而是使用 HTML 解析器。更可靠，更容易使用。

如果您是 PHP 开发人员，我建议您使用这个 (http://simplehtmldom.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:16:32.033

看看[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，它会让事情变得容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:13:14.750

使用这个正则表达式`<TAGNAME.+?</TAGNAME>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:16:04.293

如果这是您想要做的主要事情，那么 XLS​​T 是一个很好的工具。您可以轻松地仅选择 TAGNAME 并复制属性和文本。有关介绍，请参见[http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T15:41:48.867

首先：不要这样做。使用正则表达式解析 HTML 是维护的噩梦，并且很可能在任何真实世界的 HTML 示例中都失败。有更好的选择（比如使用[HTML Agility pack](http://htmlagilitypack.codeplex.com/)之类的 HTML 解析器）。

**但是，要回答您的问题，如果**HTML 代码，以下正则表达式将执行您想要的操作

*   格式正确（没有缺少结束标签等）
*   不包含带有“TAGNAME”的评论
*   不包含带有“TAGNAME”的脚本块
*   也许更多

它可以扩展以涵盖其中一些情况，但您真的不想 =)

```
 <TAGNAME(<TAGNAME (?<tagcounter>)|</TAGNAME>(?<-tagcounter>)|.)*</TAGNAME>(?(tagcounter)(?!)) 
```

你`RegexOptions.SingleLine`也需要。在[Ideone.com上查看它的实际应用](http://ideone.com/Z6SFQ)

# ios - iOS UITableView 单元格选择

> ID：11435753
> 
> 赞同：3
> 
> 时间：2012-07-11T15:10:50.667
> 
> 标签：ios, uitableview

我有一个 UITableView 和一个名为 NewCell 的自定义单元格，我试图在点击事件时在 NewCell 中显示一个名为“selectedView”的 UIView。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NewCell *cell = (NewCell*)[tableView cellForRowAtIndexPath:indexPath];
    [cell.selectedView setHidden:NO];
} 
```

编辑 - 添加单元创建代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"NewCell";
    NewCell *productCell = (NewCell *)[self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (productCell == nil) 
    {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"NewCell" owner:nil options:nil];

        for (id currentObject in topLevelObjects)
        {
            if([currentObject isKindOfClass:[UITableViewCell class]])
            {
                productCell = (NewCell *) currentObject;
                break;
            }
        }
    }

    Product *mainProduct = [self.productsArray objectAtIndex:indexPath.row];

    float floatPrice = [mainProduct.price floatValue];
    NSString *priceFormat;
    if ((int)floatPrice == floatPrice) priceFormat = @"$%.0f"; else priceFormat = @"$%.2f";

    produtCell.productPrice.text = [NSString stringWithFormat:priceFormat, floatPrice];

    return productCell;
} 
```

一切正常并且表格填充，但是当我选择一个单元格时，它不会在表格中选择的单元格上显示 selectedView，而是在相反的单元格中显示 selectedView。我的意思是，如果屏幕上显示第 0 行和第 1 行并且我选择第 1 行，它将在第 0 行显示 selectedView，如果我选择第 0 行，它将在第 1 行显示 selectedView。

很奇怪，我似乎无法说出它为什么这样做。

我一定做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:11:43.360

这样做的原因是因为您需要将选择样式设置为无，如下所示：

```
productCell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

# ios - Monotouch UISwitch.valueChanged 委托目标错误

> ID：11435759
> 
> 赞同：1
> 
> 时间：2012-07-11T15:11:20.793
> 
> 标签：ios, uitableview, event-handling, xamarin.ios, uiswitch

我目前正在使用 Monotouch 框架为 IOS 制作一个应用程序，该框架具有一个 UITableView 和一个包含 UISwitches 的自定义 UITableViewCell（用 XCode 设计）。

我通过 UITableViewSource 管理单元格，但在管理分配给单元格开关的事件**UISwitch.ValueChanged**的​​委托方法的回调时，我显然遇到了问题。

这是我正在处理的 UITableViewSource 代码，它可能更明确：

```
 // This class manages the TableView content and its rows
    class MyTableViewDelegate : UITableViewSource
    {
        SatellitesViewController        satController;

        List<long>                      allocatedCells;

        public MyTableViewDelegate (SatellitesViewController controller)
        {
            satController = controller;
            allocatedCells = new List<long>();
        }

        public override int     RowsInSection (UITableView tableview, int section)
        {
            return satController.sats.Count;
        }

        // Called when the switch to show the satellite's display state is touched
        public void             showButtonHandler(object sender, EventArgs e)
        {
            System.Console.WriteLine("SHOW BUTTONHANDLER");
            if (sender != null)
            {
                CustomSwitch    switchButton = (CustomSwitch) sender;
                TLEForRedis     satToShow = this.satController.getSatTLEs(switchButton.idSat, false);

                if (satToShow != null)
                {
                    if (switchButton.On == true)
                        this.satController.glView.showSatellite(satToShow);
                    else
                        this.satController.glView.hideSatellite(satToShow.Id);
                }
            }
        }

        // Called when the switch to show the satellite's display state is touched
        public void             orbitButtonHandler(object sender, EventArgs e)
        {
            System.Console.WriteLine("ORBIT BUTTONHANDLER");
            if (sender != null)
            {
                CustomSwitch    orbitButton = (CustomSwitch) sender;
                TLEForRedis     satToShow = this.satController.getSatTLEs(orbitButton.idSat, false);

                if (satToShow != null)
                    this.satController.glView.setSatelliteOrbitDisplayState(satToShow.Id, orbitButton.On);
            }
        }

        //  Create the cell at indexPath
        public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
        {
            string          cellName;
            string          nibName;
                cellName = "PROTO_CELL";
                nibName = "CellView";   
            // Get the table cell which is described in the CellView.xib interface
            var cell = tableView.DequeueReusableCell(cellName) as CellView;

            if (cell == null)
            {
                cell = new CellView();
                var views = NSBundle.MainBundle.LoadNib(nibName, cell, null);
                cell = Runtime.GetNSObject( views.ValueAt(0) ) as CellView;
            }

            // Modify the cell with its own data
            SatsList sat = (SatsList) satController.sats [indexPath.Row];

            CustomSwitch    showButton = (CustomSwitch)cell.ViewWithTag(1);
            UILabel         satName = (UILabel)cell.ViewWithTag(2);
            UILabel         catalogNumber = (UILabel)cell.ViewWithTag(3);
            CustomSwitch    favoriteButton = (CustomSwitch)cell.ViewWithTag(4);
            CustomSwitch    orbitButton = (CustomSwitch)cell.ViewWithTag(5);

            UIColor         lightgrey = new UIColor(0.85f, 0.85f, 0.85f, 1.0f);
            tableView.BackgroundColor = lightgrey;

            if (sat != null)
            {
                satName.Text = sat.satName;
                catalogNumber.Text = string.Format("{0}", sat.catalogNumber);
            }
            else
                System.Console.WriteLine("[ERROR] Satellite was not found for row " + indexPath.Row);

            // Set switch state to on when the satellite is already being displayed
            if (this.satController.glView.checkForSatelliteExistency(sat.Id))
            {
                System.Console.WriteLine(sat.satName + "found");
                showButton.SetState(true, false);
                Satellite   sat3D = this.satController.glView.checkForSatelliteOrbit(sat.Id);
                if (sat3D.displayOrbit())
                    orbitButton.SetState(true, false);
            }
            else // force switch state to off when satellite is not displayed yet
            {   
                showButton.SetState(false, false);
                orbitButton.SetState(false, false);
            }
            favoriteButton.SetState(false, false);

            // Bind changing state switches' events in order to display or hide the corresponding satellite
            showButton.setData(sat.Id);
            favoriteButton.setData(sat.Id);
            orbitButton.setData(sat.Id);
            if (!this.allocatedCells.Contains(indexPath.Row))
            {
                showButton.ValueChanged += this.showButtonHandler;
                orbitButton.ValueChanged += this.orbitButtonHandler;
            }
            this.allocatedCells.Add(indexPath.Row);
            return cell;
        } 
```

}

实际上，上面代码的结果是，我可以毫无问题地在 tableView 中向上/向下滚动，我什至可以打印“ **SHOW BUTTONHANDLER** ”行，直到我没有点击已经离开屏幕的开关滚动。但是，当我单击一个开关，该开关是之前在列表顶部绘制的单元格的一部分，并且在我滚动回顶部后重新出现，然后我收到以下错误：

```
[7864:1507] -[UIControlTargetAction BridgeSelector]: unrecognized selector sent to instance 0x14462a70 
```

或以下堆栈跟踪：

```
Stacktrace:

  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at App.Application.Main (string[]) [0x0001b] in App/Main.cs:24
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff>

Native stacktrace:

0   App                      0x0009094c mono_handle_native_sigsegv + 284
1   App                      0x00005cd8 mono_sigsegv_signal_handler + 248
2   libSystem.B.dylib                   0x90d9c05b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x0222e55a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
5   UIKit                               0x022d3b76 -[UIControl sendAction:to:forEvent:] + 66
6   UIKit                               0x022d403f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
7   UIKit                               0x02425a6c -[_UISwitchInternalView _sendActions] + 121
8   Foundation                          0x0173786d __NSFireDelayedPerform + 389
9   CoreFoundation                      0x01195966 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
10  CoreFoundation                      0x01195407 __CFRunLoopDoTimer + 551
11  CoreFoundation                      0x010f87c0 __CFRunLoopRun + 1888
12  CoreFoundation                      0x010f7db4 CFRunLoopRunSpecific + 212
13  CoreFoundation                      0x010f7ccb CFRunLoopRunInMode + 123
14  GraphicsServices                    0x04789879 GSEventRunModal + 207
15  GraphicsServices                    0x0478993e GSEventRun + 114
16  UIKit                               0x0222ba9b UIApplicationMain + 1175
17  ???                                 0x0ebdde65 0x0 + 247324261
18  ???                                 0x0ebdc550 0x0 + 247317840
19  ???                                 0x0b7f7bac 0x0 + 192904108
20  ???                                 0x0b7f7d86 0x0 + 192904582
21  App                      0x0000a042 mono_jit_runtime_invoke + 722
22  App                      0x00169f4e mono_runtime_invoke + 126
23  App                      0x0016e034 mono_runtime_exec_main + 420
24  App                      0x00173455 mono_runtime_run_main + 725
25  App                      0x00067245 mono_jit_exec + 149
26  App                      0x002116a5 main + 2837
27  App                      0x00003095 start + 53
28  ???                                 0x00000004 0x0 + 4

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

那么，您有解决方案的想法吗？开关的委托方法似乎注册不正确，但我不知道出了什么问题。因为我也试过这个没有

```
if (!this.allocatedCells.Contains(indexPath.Row)) 
```

行，为了只注册一次代表，但结果是一样的。如果单元格离开屏幕时，我是否需要删除它并尝试“取消注册”代表？

我希望你有一个想法，不要犹豫发表你对这一切的意见/建议/评论。

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:00:25.327

好的，我发现我的代码有问题，这是由于绑定到开关的代表。实际上，我忘了注销从屏幕上消失的单元格的代表。将 ReuseableCell 出队的事实不会删除链接到单元格内容的委托 => 这会导致调用我的 showButtonHandler(sender, args) 方法，其中发送者的引用已更改。

因此，我的代码的解决方案是将最后一部分更改为：

```
// Bind changing state switches' events in order to display or hide the corresponding satellite
            showButton.setData(sat.Id);
            favoriteButton.setData(sat.Id);
            orbitButton.setData(sat.Id);

            showButton.ValueChanged -= this.showButtonHandler;
            orbitButton.ValueChanged -= this.orbitButtonHandler;
            showButton.ValueChanged += this.showButtonHandler;
            orbitButton.ValueChanged += this.orbitButtonHandler;
            return cell;
        } 
```

在我的情况下，甚至没有必要在我旧的allocatedCells 列表中注册单元格。一旦单元被重用，旧的代表将从开关中删除 (-=)，并用新的新引用替换 (+=)。

谢谢大家，随便。

# c++ - 来自 SWIG PyObject_Call Segfault 的 Python 回调

> ID：11435760
> 
> 赞同：10
> 
> 时间：2012-07-11T15:11:25.853
> 
> 标签：c++, python, wxpython, swig, python-c-api

我有一个 wx.py.Shell.shell 小部件，它允许用户执行与我的程序交互的 python 代码。我希望能够将用户在此空间中定义的函数传递给我的 C++ 代码（通过 wxswig 生成的围绕我的自定义小部件的包装器）并执行它。

在我的 C++ 代码中，我使用 std::function <> 类来调用绑定函数（C++ 或 Python）

所以我创建了一个简单的类来用函数调用运算符包装 PyObject。但是，当我尝试调用 PyObject *.

```
class PyMenuCallback
{
    PyObject *Func;
public:
    PyMenuCallback(const PyMenuCallback &op2);
    PyMenuCallback(PyObject *func);
    ~PyMenuCallback ();

    void operator() (int id);
};
/////////////////////////////////////////////////////////
PyMenuCallback::PyMenuCallback(PyObject *func)
    : Func(func)
{
    Py_XINCREF (Func);
    if(!PyCallable_Check(Func))
        cout << "Not a Callable Callback." << endl; //Throw an exception or something
}

PyMenuCallback::PyMenuCallback(const PyMenuCallback &op2)
    : Func (op2.Func)
{
    Py_XINCREF (Func);
    if(!PyCallable_Check(Func))
        cout << "Not a Callable Callback." << endl;
}

PyMenuCallback::~PyMenuCallback()
{
    Py_XDECREF (Func);
}

void PyMenuCallback::operator() (int id)
{
    cout << "Calling Callback" << endl;
    if (Func == 0 || Func == Py_None || !PyCallable_Check(Func))
        return;
    cout << "Building Args" << endl;   
    PyObject *arglist = Py_BuildValue ("(i)",id);
    cout << "Func: " << Func->ob_type->tp_name << " " << Func->ob_refcnt << endl;
    PyObject *result = PyObject_Call(Func,arglist,0); //<<<<<---SEGFAULTS HERE
    cout << "Executed" << endl;
    Py_DECREF(arglist);
    Py_XDECREF(result);
} 
```

在我试图找出发生了什么的过程中，我放了一堆打印语句。其中之一在段错误之前打印类型名称和引用计数。这导致“函数 3”，所以我必须假设该函数尚未被破坏。

I'm passing the following to swig:

```
void AddOption (std::string name, PyObject *pycallback); 
```

In which I construct a PyMenuCallback

I'm at a loss for what's causing the segfault, any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-18T16:03:41.503

Since the C++ calling the python callback is within a wxWidget, and the swig wrapper is generated by the special wxPython swig (wxswig?) There is some thread protection required around the function call...

The fixed operator should look like this

```
void PyMenuCallback::operator() (int id)
{
    cout << "Calling Callback" << endl;
    if (Func == 0 || Func == Py_None || !PyCallable_Check(Func))
        return;
    cout << "Building Args" << endl;   
    PyObject *arglist = Py_BuildValue ("(i)",id);
    cout << "Built: " << arglist << endl;
    cout << "Func: " << Func->ob_type->tp_name << " " << Func->ob_refcnt << endl;

    wxPyBlock_t blocked = wxPyBeginBlockThreads(); //Anti-WxSwig 

    PyObject *result = PyObject_Call(Func,arglist,0);

    wxPyEndBlockThreads(blocked);

    cout << "Executed" << endl;
    Py_XDECREF(arglist);
    Py_XDECREF(result);
} 
```

Make sure to include

```
#include "wx/wxPython/wxPython.h"
#include "wx/wxPython/wxPython_int.h" 
```

# ruby-on-rails - 无法访问 attr_accessor 定义的变量

> ID：11435768
> 
> 赞同：6
> 
> 时间：2012-07-11T15:12:00.813
> 
> 标签：ruby-on-rails, activerecord, attr-accessor

我正在使用 Thinking Sphinx 运行搜索，并且我得到了适当的 ActiveRecord 模型。问题是，我想在每个模型上创建一个适当的链接路径和文本，然后通过 AJAX 以 JSON 的形式将信息发送到浏览器。我正在使用以下内容来构建这些链接属性：

在控制器中：

```
class FindController < ApplicationController
  def tag_results
    @results = ThinkingSphinx.search(params[:terms])
    @results.each do |result|
      result.build_ajax_response
    end
    respond_to do |format|
      format.html
      format.json { render :json => @results }
    end
  end
end 
```

在模型中： 生成的 json 对象没有列出任何 search_* 属性，更不用说它们的值了。我试过在方法中使用 @search_link 以及 search_link 。 ````
class TaggedItem < ActiveRecord::Base
  attr_accessible :name
  attr_accessor :search_link, :search_textdef build_ajax_response
    self.search_link = Rails.application.routes.url_helpers.tagged_item_path(self.id)
    self.search_text = self.name
  end
end

```` `build_ajax_response`

我做错了吗？会不会有其他干扰？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T15:37:12.437

Rails 的默认设置`to_json`不知道您添加的那些额外的非活动记录属性。最简单的可能是将它们指定为包含的额外方法：

```
format.json { render :json => @results.to_json(:methods => [:search_link, :search_text]) } 
```

# ruby-on-rails - Rails 不从供应商/宝石加载宝石

> ID：11435769
> 
> 赞同：1
> 
> 时间：2012-07-11T15:12:05.753
> 
> 标签：ruby-on-rails, gem

我在 Rails 2 上有一个奇怪的旧错误项目。
它在 config/environment.rb 中有 gem 的依赖项，比如

```
config.gem "andand"
config.gem "json"
config.gem "chronic"
config.gem "mini_fb" 
```

所有这些宝石都位于 vendor/gems/

```
andand-1.3.3/
chronic-0.6.7/
json-1.7.3/
mini_fb-1.1.7/
rbet-1.0.3/
redis-3.0.1/
responsys_client-0.0.1/ 
```

但是当我用这个应用程序启动独角兽服务器时，它总是抱怨它找不到这个宝石。为什么？

**更新**

从供应商/宝石导轨构建和安装宝石后，仍然抱怨它。

我已将 mini_fb gem 调整为自定义 mini_fb_custom gem。将 gemspec 和其他文件中的所有引用从 mini_fb 更改为 mini_fb_my，安装它，它显示`gem list`为 mini_fb_my。但它无法从 config/environment.rb 加载并抱怨

```
Missing these required gems:
  mini_fb_my  >= 0 
```

也许我应该将 lib/mini_fb.rb 重命名为 lib/mini_fb_my.rb 我会检查它。

**更新 2**
是的，重命名文件很糟糕！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:15:09.120

您仍然需要从这些文件夹中安装它们，否则独角兽将不知道在哪里寻找它们。

只需从该目录安装 gems，unicorn 就会将它们拾取。

**更新**

您可以使用此命令在本地安装您的 gem

```
gem install --local vendor/gems/gem/gem-name.gem 
```

在更新版本的 rails 上，您只需在 Gemfile 上指定路径

```
gem "gem-name", path: "path/to/gem" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:52:56.400

[我的建议：用bundler](http://gembundler.com/)替换过时的`gem`配置（它适用于 rails 2，他们的网站上应该有 rails 2 的教程）。

通过`gem`命令、冻结 gem 等进行配置只是 a** 的痛苦，当我使用它时（很久以前）它对我来说似乎有点错误。

# mysql - mysql查询从3个表中连接信息 - 得到不正确的结果计数

> ID：11435771
> 
> 赞同：0
> 
> 时间：2012-07-11T15:12:08.370
> 
> 标签：mysql, join

我的数据库中有 3 个表。

> *   ab_contacts
>     *   ID
>     *   名
>     *   姓
>     *   地址簿_id
>     *   等（更多，但这些是相关的）
> *   ab_addressbooks
>     *   姓名
>     *   ID
> *   共同评论
>     *   ID
>     *   链接ID
>     *   评论

我想创建一个查询，让我在给定的通讯录中选择与他们相关的所有联系人和评论。

要选择给定地址簿中的所有人，我可以使用：

`select count(*) from ab_contacts where addressbook_id = '50';`

这将返回 8152 人。

但是，当我运行查询时：

```
select
  ab_addressbooks.name,
  ab_contacts.first_name,
  ab_contacts.last_name,
  ab_contacts.email,
  ab_contacts.email2,
  ab_contacts.email3,
  ab_contacts.function,
  ab_contacts.address,
  ab_contacts.address_no,
  ab_contacts.city,
  ab_contacts.state,
  ab_contacts.zip,
  ab_contacts.home_phone,
  ab_contacts.work_phone,
  ab_contacts.cellular,
  REPLACE(REPLACE(REPLACE(ab_contacts.comment, '\r', ', '), '\n', ', '), '\\', '') AS comment,
  REPLACE(REPLACE(REPLACE(group_concat(co_comments.comments separator ', '), '\r', ', '), '\n', ', '), '\\', '') AS comment2
from ab_contacts
LEFT JOIN ab_addressbooks ON (ab_contacts.addressbook_id = ab_addressbooks.id)
LEFT JOIN co_comments ON (ab_contacts.id = co_comments.link_id)
WHERE ab_contacts.addressbook_id = '344';` 
```

格式有效，但我只得到 1045 个结果。我确定我缺少一些东西，但我无法弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:21:00.593

如果您将[`JOIN`](http://dev.mysql.com/doc/refman/5.1/en/join.html)其他表添加到表地址簿中，MySQL 会将其解释为[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.1/en/join.html). 这意味着只有在其他表中具有相应数据的行才会被返回，如果它们没有相应的数据，它们就不会出现在您的结果中。

如果这不是您想要的，您必须使用不同的[`JOIN`](http://dev.mysql.com/doc/refman/5.1/en/join.html)类型（很可能是 a [`LEFT JOIN`](http://dev.mysql.com/doc/refman/5.1/en/join.html)），请记住，您的结果将`NULL`在其他表中没有相关数据的字段中具有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:16:09.293

尝试将你`JOIN`的替换为`LEFT JOIN`, 让人们没有评论，也许还添加一个`GROUP BY ab_contacts.id`if 会导致多行

# javascript - 将 Hash 从 URL 传递到具有延迟的函数

> ID：11435773
> 
> 赞同：1
> 
> 时间：2012-07-11T15:12:16.920
> 
> 标签：javascript

我正在尝试通过 JS 将诸如[http://mysite.com/#32132之类的内容传递给自定义函数。](http://mysite.com/#32132)

这是功能：

```
var downloadVideo = function(passed){
  console.log(passed);
} 
```

以下是我从 URL 获取和传递哈希的方式：

```
if(window.location.hash){
    var hash = window.location.hash;
    hash = hash.substring(1, hash.length); // Remove the # from the hash
    setTimeout('downloadVideo('+hash+')', 3000)
} 
```

3 秒后，我在控制台中得到一个错误：

> 未捕获的 ReferenceError: 32132 未定义

我尝试了不同的方式来调用 downloadVideo。带引号，不带引号，不带加号。似乎没有任何效果。如果我在 setTimeout 之前 console.log 立即显示哈希变量，它会正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:15:28.463

如果不仅仅是数字字符，则需要将其表示为字符串...

```
 // ------------------v--------v
setTimeout('downloadVideo("'+hash+'")', 3000); 
```

* * *

但最好传递一个关闭的函数`hash`......

```
setTimeout(function() { downloadVideo(hash) }, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:18:51.977

假设 的`hash`值为`test`：

```
'downloadVideo('+hash+')' 
```

...评估为：

```
downloadVideo(test) 
```

请注意，字符串周围没有引号，`test`因此它被视为引用变量（不存在）。这是不将字符串传递给`setTimeout`. 这是一种不好的做法，如此处所述：

*   [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don%27t_use_eval](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don%27t_use_eval)！

将函数传递给`setTimeout`. **它更安全、更易于阅读，并且不会遇到您在此处看到的问题。**当不需要参数时，只需按名称引用函数：

```
setTimeout(downloadVideo, 3000) 
```

如果需要参数，就像您的情况一样，那么您需要将引用传递给匿名函数并让该函数调用您要调用的函数：

```
setTimeout(function() {
    downloadVideo(hash);
}, 3000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:16:39.497

1) 你不需要在你的 has 子字符串中的第二个参数 - 如果省略，子字符串匹配到字符串的末尾

2）超时最好使用匿名函数；评估的字符串，嗯，评估。一般是个坏主意。

3）错误来了，因为你传递了一个不带引号的字符串。将第 2 点固定为使用匿名函数将使这个错误更明显且更难首先提交

4）你总是可以在函数中应用超时，而不是在调用它

反正：

```
setTimeout(function() { downloadVideo(hash); }, 3000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T15:15:18.670

您可以使用闭包来做到这一点：

```
setTimeout(function() {
  downloadVideo(hash);
}, 3000); 
```

# javascript - 骨干保存模型列表到集合

> ID：11435775
> 
> 赞同：0
> 
> 时间：2012-07-11T15:12:25.530
> 
> 标签：javascript, backbone.js

我正在尝试将模型列表添加到要在本地存储的集合中。我还不完全理解骨干，这才是这个问题的真正原因。

我基本上拉入一个 RSS 提要，将提要中的每个项目分配给一个模型，然后尝试将模型列表放入一个集合中，以便以后可以对其进行迭代。

我收到一条错误消息，提示我需要为集合指定一个 Url。

如果有人可以向我解释实现目标所需遵循的正确流程，那就太好了。

目前我有：

```
var DetailIndividual = Backbone.Model.extend();     
var DetailsIndividual = Backbone.Collection.extend({
    model: DetailIndividual
});

var Search = Backbone.View.extend({
    events: {
        'click a.individualCast' : 'pullIndividual'
    },
    initialize: function() {
        this.detailsIndividual = new DetailsIndividual();
        _this = this;
        this.detailsIndividual.bind('reset', function(collection) {
            collection.each(function(item) {
                //code to handle update
            });
        });
    },
    pullIndividual: function(e){
        e.preventDefault(); 
        //Logic to pull in RSS feed
        for (var i = 0; i < result.feed.entries.length; i++) {
            entry[i] = new DetailIndividual({ title: result.feed.entries[i].title, link: result.feed.entries[i].link, });
        }
        this.detailsIndividual.add(entry);

    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:54:51.803

从这里报告错误，因为模型必须具有 url 属性： [http ://backbonejs.org/docs/backbone.html#section-167](http://backbonejs.org/docs/backbone.html#section-167)

你的模型有 url 属性吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T01:09:37.627

您收到错误的原因是因为您正在绑定“重置”事件。'reset' 仅在collection.fetch 或对collection.reset 的显式调用上触发，在您的情况下，您永远不会使用您的集合从服务器获取 - 我假设您的代码中已经有内存中的提要- 因此，除非您明确重置，否则无需监听重置。

在您的代码中，您并没有真正扩展 Collection 和 Model，因此实际上没有必要制作扩展对象 - 只需使用 Backbone.Collection。您甚至不需要创建模型扩展，因为默认情况下，当您添加 JSON 时，会自动创建 Backbone.Model。如果您正在创建一个真正的自定义模型（具有方法覆盖和添加），则只需要分配 collection.model 。

这是您可以加载收藏的一种方式：

```
var search = Backbone.View.extend({
    events: {
        'click a.individualCast' : 'pullIndividual'
    },
    initialize: function() {
        this.detailsIndividual = new Backbone.Collection();
    },
    pullIndividual: function(e) {
        e.preventDefault(); 
        //Logic to pull in RSS feed
        for (var i = 0; i < result.feed.entries.length; i++) {
            this.detailsIndividual.add({
                title: result.feed.entries[i].title, 
                link: result.feed.entries[i].link
            });
        }
    } 
}); 
```

您没有提供任何有关如何解析集合的代码（“重置”除外），但实际上您将从提要中加载集合，如图所示。

# javascript - 我无法让 Javascript Intellisense XML Comments 在 Visual Studio 2008 中完全工作

> ID：11435777
> 
> 赞同：1
> 
> 时间：2012-07-11T15:12:27.730
> 
> 标签：javascript, visual-studio-2008, intellisense

首先，我不是 Javascript 程序员，但我确实有 JS 程序员向我报告。

我正在尝试通过让添加到 VS2008 的 Javascript Intellisense 功能工作来改进我们的工作方式。

具体来说，现在我正试图弄清楚如何将强类型添加到复杂的数据结构中。

到目前为止，我想出了这个：

```
GetDateTimeResponse = function GetDateTimeResponse() {
/// <summary>The return value from GetDateTime</summary>
/// <field name="CurrentDateTime" type="String" mayBeNull="false">The current date time, ISO8601 format UTC</field>
/// <field name="ListOfStrings" type="Array" arrayType="String" mayBeNull="true">An array of strings</field>
/// <field name="SubTypeList" type="Array">An array of complex types</field>
/// <field name="AnInteger" type="Number" integer="true">An integer</field>
/// <field name="AFloat" type="Number">A float</field>
};

GetDateTimeResponse.prototype = {
    CurrentDateTime: "",
    ListOfStrings: new Array(),
    SubTypeList: new Array(),
    AnInteger: 0,
    AFloat: 0.0
}; 
```

这是一个实验性的“类”，用于处理来自测试 SOAP/JSON 服务的响应。

WSDL 引用了一个模式，该模式包含（应该是）匹配类型：

```
<xs:element name="GetDateTimeResponse">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="CurrentDateTime" type="xs:dateTime"/>
            <xs:element name="ListOfStrings" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
            <xs:element name="SubTypeList" minOccurs="0" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="IDFIeld" type="xs:int"/>
                        <xs:element name="DisplayName" type="xs:string"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="AnInteger" type="xs:int"/>
            <xs:element name="AFloat" type="xs:float"/>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

我们使用 jQuery 与服务进行通信，我想编写辅助方法来获取和返回该“类型”的对象。

它有点工作。如果我创建 js 文件，`/// <reference/>`则包含该定义的文件然后此代码在一定程度上起作用：

```
var bob = new GetDateTimeResponse();

bob.CurrentDateTime = ""; 
```

现在，我得到类名`GetDateTimeResponse`（`CurrentDateTime`但我没有得到任何类型、mayBeNull、arrayType 和整数属性。如果我向构造函数添加一个参数，并使用`<param>`注释、名称、类型和描述工作。但是整数、mayBeNull 等仍然什么都不做。

有任何想法吗？

这甚至在VS2008中有效吗？

无论如何命名对象，数字或字符串以外的“类型”（我想让智能感知做类型数组）

最终，这一切都是为了我们可以为具有工作智能感知的 Web 服务生成一个 javascript 客户端。

我对此的参考是：

[http://weblogs.asp.net/bleroy/archive/2007/04/23/the-format-for-javascript-doc-comments.aspx](http://weblogs.asp.net/bleroy/archive/2007/04/23/the-format-for-javascript-doc-comments.aspx)

# c# - 只能在 DependencyObject 的 DependencyProperty 上设置“绑定”

> ID：11435781
> 
> 赞同：59
> 
> 时间：2012-07-11T15:12:33.943
> 
> 标签：c#, wpf, binding, user-controls, dependency-properties

从基于 的自定义控件中，我以这种方式`TextBox`创建了一个名为 的属性：`Items`

```
public class NewTextBox : TextBox
{
    public ItemCollection Items { get; set; }
} 
```

在 XAML 中使用自定义控件时，我无法绑定该属性，因为它会引发异常“只能在 DependencyObject 的 DependencyProperty 上设置‘绑定’。”。

我该如何解决这个异常？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-11-21T11:03:41.440

作为旁注，还值得注意的是，如果您在对象之间复制和粘贴而忘记更改第二`typeof(Object)`条语句，您将收到这些绑定错误。

我一小时都想不通为什么我会收到这个错误，因为一切似乎都已定义和正确。当我想从一个集合变成一个列表时，我将我的属性移动到了一个用户控件中。因此：

```
public static readonly DependencyProperty FoldersProperty = DependencyProperty
    .Register("Folders", typeof(OutlookFolders), typeof(MainWindow),
    new FrameworkPropertyMetadata(new OutlookFolders()));

public OutlookFolders Folders
{
    get { return GetValue(FoldersProperty) as OutlookFolders; }
    set { SetValue(FoldersProperty, value); }
} 
```

应该变成：

```
public static readonly DependencyProperty FoldersProperty = DependencyProperty
    .Register("Folders", typeof(OutlookFolders), typeof(SavedFolderControl), 
    new FrameworkPropertyMetadata(new OutlookFolders()));

public OutlookFolders Folders
{
    get { return GetValue(FoldersProperty) as OutlookFolders; }
    set { SetValue(FoldersProperty, value); }
} 
```

在我进行此更改之前，我一直收到错误消息： `A 'Binding' cannot be set on the property 'Folders' of type 'SavedFolderControl'. A 'Binding' can only be set on a DependencyProperty of a DependencyObject.`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-11T15:12:34.710

要解决此异常，您需要更改属性`Items`并添加一个`DependencyProperty`将在 XAML 中用作“链接”的。课程将是：

```
public class AutocompleteTextBox : TextBox
{
    public ItemCollection Items
    {
        get {
            return (ItemCollection)GetValue(ItemsProperty); }
        set {
            SetValue(ItemsProperty, value); }
    }

    public static readonly DependencyProperty ItemsProperty =
        DependencyProperty.Register(
            "Items",
            typeof(ItemCollection),
            typeof(AutocompleteTextBox),
            new PropertyMetadata(default(ItemCollection), OnItemsPropertyChanged));

    private static void OnItemsPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        // AutocompleteTextBox source = d as AutocompleteTextBox;
        // Do something...
    } 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-09-12T10:27:42.477

这是另一个问题：确保第一个参数中的字符串`DependencyProperty.Register()`与相关属性的名称匹配。

```
public static readonly DependencyProperty ItemsProperty =
    DependencyProperty.Register(
        "TheItems", // This is wrong
        typeof(ItemCollection),
        typeof(AutocompleteTextBox),
        new PropertyMetadata(default(ItemCollection), OnItemsPropertyChanged)); 
```

当我在不更改字符串的情况下重命名我的属性时遇到了这个问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-01-03T19:57:30.000

我注意到的一件事，我不确定它是否在任何地方被提及，是您的 DependencyProperty 的名称**必须与**您的属性名称匹配

如果您的属性名称是***Items***，那么您**DependencyProperty** *必须*是***ItemsProperty***

就我而言，一旦我匹配它们，错误就消失了

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-07-14T00:19:11.163

另一个可能的原因是您为元数据中的默认值提供了错误的类型。
例如：

```
new PropertyMetadata(default(ItemCollection), OnItemsPropertyChanged) 
```

如果您改为编写以下代码，则会引发此错误：

```
new PropertyMetadata(false, OnItemsPropertyChanged) 
```

如果您从代码源复制和粘贴，也会发生这种情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-01T14:25:14.157

由于我缺乏监督，我遇到了这个问题。我写

```
<Button.Visibility>
   <MultiBinding Converter="{StaticResource mvbConverter}">
     <Binding Path="{Binding isActive}" />
     <Binding Path="{Binding isCashTransaction}" />
   </MultiBinding>
</Button.Visibility> 
```

相反，我应该写

```
<Button.Visibility>
   <MultiBinding Converter="{StaticResource mvbConverter}">
     <Binding Path="isActive" />
     <Binding Path="isCashTransaction" />
   </MultiBinding>
</Button.Visibility> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-28T09:10:48.430

我收到了（运行时 + 设计时）消息：

> PresentationFramework.dll 中出现“System.Windows.Markup.XamlParseException”类型的未处理异常
> 
> 附加信息：不能在“触发器”类型的“属性”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

我足够聪明地在 VM 属性上定义触发器的地方..

```
// incorrect.. cannot have Trigger for VM property
<Trigger Property="{Binding IsExpanded}" Value="True">
  <Setter Property="Visibility" Value="Visible"/>
</Trigger> 
```

这当然应该是一个数据触发器（它使用绑定而不是属性）

```
<DataTrigger Binding="{Binding IsExpanded}" Value="True">
  <Setter Property="Visibility" Value="Visible"/>
</DataTrigger> 
```

触发器通常用于控件（按钮、文本框、框架元素等）属性。

# java - 我怎样才能在java中获得我最后点击的Jtable行

> ID：11435784
> 
> 赞同：-5
> 
> 时间：2012-07-11T15:12:44.673
> 
> 标签：java

我有一个问题，我无法在 java 中获得我最后点击的 Jtable 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:15:29.733

[Java API：JTable.getSelectedRow()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#getSelectedRow())

> 公共 int getSelectedRow()
> 
> 返回第一个选定行的索引，如果没有选择行，则返回 -1。

# facebook-like - “赞”按钮未填充

> ID：11435786
> 
> 赞同：-2
> 
> 时间：2012-07-11T15:12:46.500
> 
> 标签：facebook-like

我网站上的“赞”按钮未正确填充主页上的描述。为什么？

```
<title> Get Your FREE Samples & Health Offers!  </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<meta name="google-site-verification" content="jrQQnK64_8oK14HSeSP071dzignAPnHEreVOhhU_7LY" />

<meta name="Description" content="Get Your FREE Samples &amp; Health Offers! " />
<meta name="Keywords" content="Get Your FREE Samples &amp; Health Offers! " />
<meta property="og:title" content="Skin Care Sample Test111"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="www.qualityhealth.com/mediaLanding?path=65629"/>
<meta property="og:image" content="www.qualityhealth.com/resources/images/advil_campaign.jpg"/>
<meta property="og:site_name" content="QualityHealth"/>
<meta property="og:description" content="This is where the body copy will go for this skin care sample test."/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:17:16.990

首先，您的`og:url`和`og:image`标签无效，因为它们缺少协议标识符（即应该是`http://www.qualityhealth.com`）

[通过Facebook 的调试工具](https://developers.facebook.com/tools/debug)运行您的页面，看看您还需要修复什么

# eclipse - 在 Eclipse (Windows) 中通过 testng.xml 运行 TestNG 类

> ID：11435787
> 
> 赞同：0
> 
> 时间：2012-07-11T15:12:46.893
> 
> 标签：eclipse, testng

我有一个名为“ATestClass”的类，它有一些方法，如“launchSite”、“loginToSite”等。

现在，我想控制这些方法的执行顺序。因此，我创建了一个 xml 文件“testng.xml”，如下所示：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
  <suite name="Classes" verbose="10">
   <test name="ATestClass" preserve-order="true">
    <classes>
     <class name="ATestClass" >
      <methods>
        <include name="launchSite" />
        <include name="searchAndExport" />
        <include name="loginToSite" />
      </methods>
     </class>
   </classes>
 </test>
</suite> 
```

现在，我的班级不关心这个 xml 文件并按字母顺序执行方法。我在同一个包中创建了类和 xml 文件。

不知何故，该类无法识别其相应的 xml 配置文件。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:59:54.270

您使用的是最新版本的 TestNG 吗？确保你是。

# sql-server - 如何获取所有子 ID

> ID：11435788
> 
> 赞同：1
> 
> 时间：2012-07-11T15:12:47.373
> 
> 标签：sql-server

我有一个包含以下列的表格 -

1.  ID（设备的 ID）
2.  DeviceName（设备名称）
3.  ParentID（父设备的ID）

根据表格，我的数据存储在树结构中，即一个设备包含多个其他设备，这些设备又包含多个设备。

我需要的是获取给定设备 ID 下所有设备的 ID。我需要适当的 SQL 查询来获取父节点下的所有子节点（包括它自己的子节点）。

例如。假设 A 是具有子 B1、B2 的顶部节点。

B1 包含 C1、C2 孩子，而 B2 包含 C3、C4。

同样，C1 包含 D1、D2 .... 等等。

我需要的是获得所有 B1,B2,C1,C2,C3,C4,D1,D2,.... 如果提供了 A。

感谢您分享您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T15:18:20.250

为此，您需要使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms175972.aspx)。

```
;WITH r as (
     SELECT ID
     FROM DevicesTable
     WHERE ParentID = @someID

     UNION ALL

     SELECT d.ID 
     FROM DevicesTable d
        INNER JOIN r 
           ON d.ParentID = r.ID
)
SELECT ID
FROM r 
```

# asp.net-mvc - 在VS2012中打开一个MVC3项目

> ID：11435790
> 
> 赞同：8
> 
> 时间：2012-07-11T15:12:48.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3, visual-studio-2012

我正在尝试在新安装的 Visual Studio Express 2012 RC 中打开 MVC3 解决方案。到目前为止，我遇到了一些问题，由于某种原因 VS2012 不知道这些项目是 MVC 项目，所以它不会添加视图/控制器。通过将以下 GUID 添加到解决方案中每个项目`ProjectTypeGuids`的文件节点来解决此问题：`.csproj`

```
{E53F8FEA-EAE0-44A6-8774-FFD645390401} 
```

**但是，当我打开剃刀视图时，它会显示以下错误（以及其他相关错误）：**

```
Error    20    The name 'model' does not exist in the current context    c:\Users\willem\Documents\Visual Studio 2010\Projects\000-Orchard Development\src\Orchard.Web\Modules\EventManagement\Views\EditorTemplates\Parts\Event.cshtml    2    2    EventManagement

Error    21    The name 'T' does not exist in the current context    c:\Users\willem\Documents\Visual Studio 2010\Projects\000-Orchard Development\src\Orchard.Web\Modules\EventManagement\Views\EditorTemplates\Parts\Event.cshtml    5    14    EventManagement

Error    22    'System.Web.WebPages.Html.HtmlHelper' does not contain a definition for 'LabelFor' and no extension method 'LabelFor' accepting a first argument of type 'System.Web.WebPages.Html.HtmlHelper' could be found (are you missing a using directive or an assembly reference?)    c:\Users\willem\Documents\Visual Studio 2010\Projects\000-Orchard Development\src\Orchard.Web\Modules\EventManagement\Views\EditorTemplates\Parts\Event.cshtml    6    11    EventManagement 
```

Intellisense 正在剃刀视图中工作，但它只为 Html 辅助方法提供有限数量的字段。例如，没有任何特定于模型的方法，如 LabelFor 和 TextboxFor。

我安装了 MVC 3 和 4。该解决方案在 VS2010 中运行良好。

**更新：**

在 VS2012 中添加**新**的MVC3 项目时，它工作正常。所以这意味着它肯定与项目有关，而不是与安装有关。

**更新2：** 我认为问题在于视图无权访问根配置中的引用库：

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
 <pages pageBaseType="Orchard.Mvc.ViewEngines.Razor.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="System.Web.WebPages" />
      <add namespace="System.Linq"/>
      <add namespace="System.Collections.Generic"/>
      <add namespace="Orchard.Mvc.Html"/>
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

它在运行时执行，但智能感知和错误控制台不接受它

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T19:30:42.137

对我来说，这个问题是通过添加解决的：

```
<add key="webpages:Version" value="1.0.0.0"/> 
```

在我的根 web.config 的 appSettings 部分

例如

```
 <appSettings>
     <add key="webpages:Version" value="1.0.0.0"/>
     <add key="ClientValidationEnabled" value="true"/>
     <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
  </appSettings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:51:45.173

检查此链接：

[http://msdn.microsoft.com/en-us/library/hh266747(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/hh266747(v=vs.110).aspx)

确保您知道该项目是 MVC3。确保该项目是使用带有 SP1 的 VS2010 创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:33:14.527

我通过卸载 MVC4 RC 解决了这个问题。似乎与我的系统（或我测试的其他 3 个系统）不兼容。只需要等待 MVC4 的发布版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T06:03:29.210

您可以在同一台计算机上同时安装 MVC3 和 MVC4，请配置`web.config`如下

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="1.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="1.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T16:08:59.967

从 MVC 4[发行说明](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)：

**所需更新**

1.  在根 Web.config 文件中，使用键 webPages:Version 和值 1.0.0.0 添加一个新条目。

2.  在解决方案资源管理器中，右键单击项目名称，然后选择卸载项目。然后再次右键单击该名称并选择 Edit ProjectName.csproj。

3.  找到以下程序集引用：< Reference Include="System.Web.WebPages"/> < Reference Include="System.Web.Helpers" />

将它们替换为以下内容：

```
<Reference Include="System.Web.WebPages, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL "/> 
<Reference Include="System.Web.Helpers, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

4.列表项

保存更改，关闭您正在编辑的项目 (.csproj) 文件，然后右键单击该项目并选择重新加载。

# zend-framework - 停止在 URL 中显示 Zend 路由默认参数“键”

> ID：11435795
> 
> 赞同：0
> 
> 时间：2012-07-11T15:13:08.277
> 
> 标签：zend-framework, zend-route

我有如下定义的路线。

```
$route['manage-vehicles'] = new Zend_Controller_Router_Route(
  'vehicles/manage/page/:page',
  array(
    'controller' => 'vehicles',
    'action'     => 'manage',
    'page'       => '1'
  )
); 
```

当 'page' 参数没有特别定义时（例如在使用导航组件构建的菜单中），结果 URL 是

/车辆/管理/页面

在这种情况下，我更希望 URL 不显示默认参数键

即/车辆/管理

任何想法如何实现这一点将不胜感激？

谢谢。

编辑：为清楚起见，我**希望**在定义“页面”参数时显示车辆/管理/页面/1 等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:26:34.213

您的路线中的“页面”字符串不是页面参数工作所必需的，因此您需要做的就是将您的路线更改为：

```
$route['manage-vehicles'] = new Zend_Controller_Router_Route(
  'vehicles/manage/:page',
  array(
    'controller' => 'vehicles',
    'action'     => 'manage',
    'page'       => '1'
  )
); 
```

您已经告诉它 URL 中的哪个内容是“页面”，因此您不需要那里的前缀。这只是未预定义参数的默认路由的一部分。

# php - 将 HTML 页面转换为图像？

> ID：11435805
> 
> 赞同：1
> 
> 时间：2012-07-11T15:13:51.230
> 
> 标签：php, html, image, screenshot

> **可能重复：**
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

我有一个非常简单的 HTML 网页，带有一些 CSS 和一些 Javascript 样式。每次加载它都会创建一个独特的“明信片”，我希望能够将其保存为图像以供下载。是否有捷径可寻？

我知道 PHP 不进行渲染，这是主要问题。也许使用一些 Javascript 来获取“屏幕截图”是页面加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:14:30.663

你可以使用这个：

[http://www.rabuser.info/painty.php#english](http://www.rabuser.info/painty.php#english)

# c++ - 如何在VS2012中向openframeworks项目添加类

> ID：11435808
> 
> 赞同：0
> 
> 时间：2012-07-11T15:13:58.263
> 
> 标签：c++, visual-studio-2010, openframeworks

我通常是一个 C# 人，但试图进入 C++。

我通过复制和粘贴其中一个示例项目，然后将所有内容重命名为我的项目名称，为自己创建了一个新的 openframeworks 项目。（如果有更简单的方法，我很想听听）

该项目在名为“src”的子文件夹中有 .cpp 和 .h 文件，这些文件又在 Visual Studio 中组织成虚拟文件夹（过滤器？？？）。

如何从 Visual Studio 中向该项目添加一个类？

如果我在解决方案资源管理器中右键单击 src 过滤器并点击添加类。它在项目的根目录中创建类文件，而不是在 src 文件夹中。我的意思是它在解决方案资源管理器和它物理放置文件的地方都这样做。这是一个问题，因为我不能在我的应用程序的其余部分中包含我的类文件，大概是因为它们不在同一个文件夹中

添加类文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T02:14:26.513

当您右键单击过滤器（可能是“src”或新过滤器）并点击“添加类”，在第一个屏幕中点击“添加”后，在下一个屏幕中您将找到一个 [...] 按钮除了 .h .cpp 文件的每个文本输入字段：使用该按钮，您可以选择要保存文件的文件夹（“src”或任何其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:31:16.770

这不是一个好的解决方案，但我发现这样做的唯一方法是在 Visual Studio 中添加类，将其放在根目录中。从项目中排除文件。使用 Windows 资源管理器将文件移动到 src 文件夹。通过显示所有文件将它们包含在项目中，然后右键单击以包含在项目中。此时，我希望文件会在项目中列出，但在我重新加载项目之前不会出现。重新加载项目后，我将文件拖放到 src 文件夹/过滤器中

# python - 使用python计算向量场的散度

> ID：11435809
> 
> 赞同：12
> 
> 时间：2012-07-11T15:14:02.037
> 
> 标签：python, numpy, scipy

是否有可用于计算矢量场散度的函数？（在[matlab](http://www.mathworks.ch/help/techdoc/ref/divergence.html)中）我希望它存在于 numpy/scipy 中，但我无法使用 Google 找到它。

我需要计算`div[A * grad(F)]`，在哪里

```
F = np.array([[1,2,3,4],[5,6,7,8]]) # (2D numpy ndarray)

A = np.array([[1,2,3,4],[1,2,3,4]]) # (2D numpy ndarray) 
```

2D的`grad(F)`列表也是如此`ndarray`

我知道我可以像[这样](http://en.wikipedia.org/wiki/Divergence#Application_in_Cartesian_coordinates)计算散度，但不想重新发明轮子。（我也希望得到更优化的东西）有人有建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-12-09T10:12:22.570

只是对每个阅读该内容的人的提示：

上面的函数不计算向量场的散度。它们对标量域 A 的导数求和：

**结果 = dA/dx + dA/dy**

与向量场相比（具有三维示例）：

**结果 = 总和 dAi/dxi = dAx/dx + dAy/dy + dAz/dz**

为所有人投票！这在数学上是完全错误的。

干杯!

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-03T12:16:05.057

基于 Juh_ 的回答，但针对向量场公式的正确发散进行了修改

```
def divergence(f):
    """
    Computes the divergence of the vector field f, corresponding to dFx/dx + dFy/dy + ...
    :param f: List of ndarrays, where every item of the list is one dimension of the vector field
    :return: Single ndarray of the same shape as each of the items in f, which corresponds to a scalar field
    """
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[i], axis=i) for i in range(num_dims)]) 
```

[Matlab 的文档](https://www.mathworks.com/help/symbolic/divergence.html)使用这个精确的公式（向下滚动到向量场的发散）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-26T10:00:22.407

```
import numpy as np

def divergence(field):
    "return the divergence of a n-D field"
    return np.sum(np.gradient(field),axis=0) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-01-15T10:01:59.573

@user2818943 的回答不错，不过可以稍微优化一下：

```
def divergence(F):
    """ compute the divergence of n-D scalar field `F` """
    return reduce(np.add,np.gradient(F)) 
```

* * *

时间：

```
F = np.random.rand(100,100)
timeit reduce(np.add,np.gradient(F))
# 1000 loops, best of 3: 318 us per loop

timeit np.sum(np.gradient(F),axis=0)
# 100 loops, best of 3: 2.27 ms per loop 
```

大约快 7 倍： `sum`从`np.gradient`. 这是避免使用`reduce`

* * *

现在，在您的问题中，您的意思是 `div[A * grad(F)]`什么？

1.  about `A * grad(F)`:`A`是一个二维数组，是一个二维数组`grad(f)`的列表。所以我认为这意味着将每个梯度场乘以`A`.
2.  关于将散度应用于（按比例缩放`A`）梯度场尚不清楚。根据定义，`div(F) = d(F)/dx + d(F)/dy + ...`. 我想这只是一个表述错误。

对于`1`，将求和的元素乘以`Bi`相同的因子`A`可以分解：

```
Sum(A*Bi) = A*Sum(Bi) 
```

因此，您可以简单地通过以下方式获得此加权梯度：`A*divergence(F)`

如果`A`̀ 是一个因子列表，每个维度一个，那么解决方案将是：

```
def weighted_divergence(W,F):
    """
    Return the divergence of n-D array `F` with gradient weighted by `W`

    ̀`W` is a list of factors for each dimension of F: the gradient of `F` over
    the `i`th dimension is multiplied by `W[i]`. Each `W[i]` can be a scalar
    or an array with same (or broadcastable) shape as `F`.
    """
    wGrad = return map(np.multiply, W, np.gradient(F))
    return reduce(np.add,wGrad)

result = weighted_divergence(A,F) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-20T11:28:59.967

丹尼尔修改的是正确答案，让我更详细地解释自定义函数分歧：

函数`np.gradient()`定义为：`np.gradient(f)`= df/dx, df/dy, df/dz +...

但我们需要将 func 散度定义为： 散度 ( f) = dfx/dx + dfy/dy + dfz/dz +... = `np.gradient( fx)` + `np.gradient(fy)`+ `np.gradient(fz)`+ ...

让我们测试一下，与[matlab中的发散示例进行比较](http://www2.math.umd.edu/%7Epetersd/241/html/ex27b.html#1)

```
import numpy as np
import matplotlib.pyplot as plt

NY = 50
ymin = -2.
ymax = 2.
dy = (ymax -ymin )/(NY-1.)

NX = NY
xmin = -2.
xmax = 2.
dx = (xmax -xmin)/(NX-1.)

def divergence(f):
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[i], axis=i) for i in range(num_dims)])

y = np.array([ ymin + float(i)*dy for i in range(NY)])
x = np.array([ xmin + float(i)*dx for i in range(NX)])

x, y = np.meshgrid( x, y, indexing = 'ij', sparse = False)

Fx  = np.cos(x + 2*y)
Fy  = np.sin(x - 2*y)

F = [Fx, Fy]
g = divergence(F)

plt.pcolormesh(x, y, g)
plt.colorbar()
plt.savefig( 'Div' + str(NY) +'.png', format = 'png')
plt.show() 
```

[![在此处输入图像描述](../Images/a7eaef410ed350a62edddc85b7e1c565.png)](https://i.stack.imgur.com/NwoKp.png)

**---------- 更新版本：包括差异步骤----------------**

感谢@henry 的评论，`np.gradient`默认步长为1，所以结果可能有些不匹配。我们可以提供自己的微分步骤。

```
#https://stackoverflow.com/a/47905007/5845212
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import make_axes_locatable

NY = 50
ymin = -2.
ymax = 2.
dy = (ymax -ymin )/(NY-1.)

NX = NY
xmin = -2.
xmax = 2.
dx = (xmax -xmin)/(NX-1.)

def divergence(f,h):
    """
    div(F) = dFx/dx + dFy/dy + ...
    g = np.gradient(Fx,dx, axis=1)+ np.gradient(Fy,dy, axis=0) #2D
    g = np.gradient(Fx,dx, axis=2)+ np.gradient(Fy,dy, axis=1) +np.gradient(Fz,dz,axis=0) #3D
    """
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[i], h[i], axis=i) for i in range(num_dims)])

y = np.array([ ymin + float(i)*dy for i in range(NY)])
x = np.array([ xmin + float(i)*dx for i in range(NX)])

x, y = np.meshgrid( x, y, indexing = 'ij', sparse = False)

Fx  = np.cos(x + 2*y)
Fy  = np.sin(x - 2*y)

F = [Fx, Fy]
h = [dx, dy]

print('plotting')
rows = 1
cols = 2
#plt.clf()
plt.figure(figsize=(cols*3.5,rows*3.5))
plt.minorticks_on()

#g = np.gradient(Fx,dx, axis=1)+np.gradient(Fy,dy, axis=0) # equivalent to our func
g = divergence(F,h)
ax = plt.subplot(rows,cols,1,aspect='equal',title='div numerical')
#im=plt.pcolormesh(x, y, g)
im = plt.pcolormesh(x, y, g, shading='nearest', cmap=plt.cm.get_cmap('coolwarm'))
plt.quiver(x,y,Fx,Fy)
divider = make_axes_locatable(ax)
cax = divider.append_axes("right", size="5%", pad=0.05)
cbar = plt.colorbar(im, cax = cax,format='%.1f')

g = -np.sin(x+2*y) -2*np.cos(x-2*y)
ax = plt.subplot(rows,cols,2,aspect='equal',title='div analytical')
im=plt.pcolormesh(x, y, g)
im = plt.pcolormesh(x, y, g, shading='nearest', cmap=plt.cm.get_cmap('coolwarm'))
plt.quiver(x,y,Fx,Fy)
divider = make_axes_locatable(ax)
cax = divider.append_axes("right", size="5%", pad=0.05)
cbar = plt.colorbar(im, cax = cax,format='%.1f')

plt.tight_layout()
plt.savefig( 'divergence.png', format = 'png')
plt.show() 
```

[![数值比较分析结果](../Images/34ad282bbb4d57b70d245b3031378f25.png)](https://i.stack.imgur.com/RWGQd.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-09-10T08:13:17.650

基于@paul_chen 的回答，并为 Matplotlib 3.3.0 添加了一些内容（需要传递一个着色参数，我猜默认颜色图已经改变）

```
import numpy as np
import matplotlib.pyplot as plt

NY = 20; ymin = -2.; ymax = 2.
dy = (ymax -ymin )/(NY-1.)
NX = NY
xmin = -2.; xmax = 2.
dx = (xmax -xmin)/(NX-1.)

def divergence(f):
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[i], axis=i) for i in range(num_dims)])

y = np.array([ ymin + float(i)*dy for i in range(NY)])
x = np.array([ xmin + float(i)*dx for i in range(NX)])

x, y = np.meshgrid( x, y, indexing = 'ij', sparse = False)

Fx  = np.cos(x + 2*y)
Fy  = np.sin(x - 2*y)

F = [Fx, Fy]
g = divergence(F)

plt.pcolormesh(x, y, g, shading='nearest', cmap=plt.cm.get_cmap('coolwarm'))
plt.colorbar()
plt.quiver(x,y,Fx,Fy)
plt.savefig( 'Div.png', format = 'png') 
```

[![在此处输入图像描述](../Images/914516a12fb943f3b3a81773df92e804.png)](https://i.stack.imgur.com/fb4hS.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-14T21:15:32.190

散度作为内置函数包含在 matlab 中，但不包含在 numpy 中。这可能是值得为 pylab 做出贡献的事情，努力创建一个可行的开源替代 matlab。

[http://wiki.scipy.org/PyLab](http://wiki.scipy.org/PyLab)

编辑：现在称为[http://www.scipy.org/stackspec.html](http://www.scipy.org/stackspec.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-14T20:35:15.927

据我所知，答案是 numpy 中没有原生散度函数。因此，计算散度的*最佳*方法是对梯度向量的分量求和，即*计算*散度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-05T05:49:20.870

我不认为@Daniel 的答案是正确的，尤其是当输入是有序的时候`[Fx, Fy, Fz, ...]`。

## 一个简单的测试用例

请参阅 MATLAB 代码：

```
a = [1 2 3;1 2 3; 1 2 3];
b = [[7 8 9] ;[1 5 8] ;[2 4 7]];
divergence(a,b) 
```

结果是：

```
ans =

   -5.0000   -2.0000         0
   -1.5000   -1.0000         0
    2.0000         0         0 
```

和丹尼尔的解决方案：

```
def divergence(f):
    """
    Daniel's solution
    Computes the divergence of the vector field f, corresponding to dFx/dx + dFy/dy + ...
    :param f: List of ndarrays, where every item of the list is one dimension of the vector field
    :return: Single ndarray of the same shape as each of the items in f, which corresponds to a scalar field
    """
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[i], axis=i) for i in range(num_dims)])

if __name__ == '__main__':
    a = np.array([[1, 2, 3]] * 3)
    b = np.array([[7, 8, 9], [1, 5, 8], [2, 4, 7]])
    div = divergence([a, b])
    print(div)
    pass 
```

这使：

```
[[1\.  1\.  1\. ]
 [4\.  3.5 3\. ]
 [2\.  2.5 3\. ]] 
```

## 解释

丹尼尔解决方案的错误是，在 Numpy 中，**x 轴是最后一个轴而不是第一个轴**。使用 时`np.gradient(x, axis=0)`，Numpy 实际上给出了*y 方向*的梯度（当 x 是二维数组时）。

## 我的解决方案

我的解决方案基于丹尼尔的回答。

```
def divergence(f):
    """
    Computes the divergence of the vector field f, corresponding to dFx/dx + dFy/dy + ...
    :param f: List of ndarrays, where every item of the list is one dimension of the vector field
    :return: Single ndarray of the same shape as each of the items in f, which corresponds to a scalar field
    """
    num_dims = len(f)
    return np.ufunc.reduce(np.add, [np.gradient(f[num_dims - i - 1], axis=i) for i in range(num_dims)]) 
```

`divergence`在我的测试用例中，它给出了与 MATLAB 相同的结果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-14T12:12:15.933

不知何故，以前计算散度的尝试是错误的！我来给你展示：

我们有以下向量场 F：

```
F(x) = cos(x+2y)
F(y) = sin(x-2y) 
```

如果我们计算散度（使用 Mathematica）：

```
Div[{Cos[x + 2*y], Sin[x - 2*y]}, {x, y}] 
```

我们得到：

```
-2 Cos[x - 2 y] - Sin[x + 2 y] 
```

最大值在 y [-1,2] 和 x [-2,2] 范围内：

```
N[Max[Table[-2 Cos[x - 2 y] - Sin[x + 2 y], {x, -2, 2 }, {y, -2, 2}]]] = 2.938 
```

使用此处给出的散度方程：

```
def divergence(f):
        num_dims = len(f)
        return np.ufunc.reduce(np.add, [np.gradient(f[i], axis=i) for i in range(num_dims)]) 
```

我们得到的最大值约为`0.625`

# 正确的散度函数：[用python计算散度](https://stackoverflow.com/questions/67970477/compute-divergence-with-python/67971515#67971515)

# c# - IList 必须是有限的吗？

> ID：11435818
> 
> 赞同：15
> 
> 时间：2012-07-11T15:14:25.973
> 
> 标签：c#, .net, ilist, icollection

.NET 的[IList](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)必须是有限的吗？假设我写了一个类 FibonacciList 实现`IList<BigInteger>`

*   属性 Item[n] 返回第 n 个斐波那契数。
*   属性 IsReadOnly 返回 true。
*   我们可以很容易地实现 IndexOf 和 Contains 方法，因为斐波那契数列在增加——要测试数字 m 是否是斐波那契数，我们只需要计算斐波那契数的*有限*序列直到 m。
*   GetEnumerator() 方法做正确的事

我们现在已经实现了只读 IList 所期望的所有方法，除了 Count()。

这很酷，还是滥用 IList？

* * *

斐波那契数很快变得不切实际地大（因此见`IList<BigInteger>`上文）。有界无限序列可能更明智，它可以实现`IList<long>`or `IList<double>`。

附录二：斐波那契数列可能是一个不好的例子，因为计算遥远的值是昂贵的——要找到第 n 个值，必须计算所有较早的值。因此，正如 Mošmondor 所说，不妨将其设为 IEnumerable 并使用`.ElementAt`. 但是**，还有其他序列可以快速计算远距离值，而无需计算较早的值**。（令人惊讶的[是 pi 的数字就是这样一个序列](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)）。这些序列更“listy”，它们真正支持随机访问。

编辑：没有人反对无限的 IEnumerables。他们如何处理 Count()？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T15:16:09.830

对于大多数开发人员，`IList`并`ICollection`暗示您有一个预先评估的内存中的集合可以使用。`IList`具体而言，存在恒定时间`Add`^*和索引操作的隐式合同。这就是为什么[`LinkedList<T>`不实施`IList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。我认为 FibonacciList 违反了这个隐含的合同。

[请注意最近 MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/jj133817.aspx)中的以下段落，该文章讨论了将只读集合接口添加到 .NET 4.5 的原因：

> `IEnumerable<T>`对于大多数处理类型集合的场景来说已经足够了，但有时你需要比它提供的更多的功能：
> 
> *   物化：`IEnumerable<T>`不允许您表达集合是否已经可用（“物化”）或是否在每次迭代时都计算（例如，如果它表示 LINQ 查询）。当一个算法需要对集合进行多次迭代时，如果计算序列的成本很高，这可能会导致性能下降；当在后续传递中再次生成对象时，它还可能由于身份不匹配而导致细微的错误。

正如其他人所指出的，还有一个问题是你会返回什么`.Count`。

对于这样的数据集合使用`IEnumerable`或输入是完全可以`IQueryable`的，因为人们期望这些类型可以被懒惰地评估。

关于编辑1：`.Count()`不是由`IEnumerable<T>`接口实现的：它是一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb338038.aspx)。因此，开发人员需要预计它可能会花费任何时间，并且他们需要避免在他们实际上不需要知道项目数量的情况下调用它。例如，如果您只想知道 an 是否`IEnumerable<T>`有*任何*项目，最好使用`.Any()`. 如果您知道要处理的项目数量上限，则可以使用`.Take()`. 如果一个集合中有多个`int.MaxValue`项目，`.Count()`会遇到操作溢出。因此，有一些解决方法可以帮助减少与无限序列相关的危险。显然，如果程序员没有考虑到这些可能性，它仍然会导致问题。

关于编辑 2：如果您计划以索引是恒定时间的方式实现您的序列，那么这很容易解决我的主要观点。不过，Sixlettervariables 的答案仍然成立。

^(*显然还有更多：只有在返回`Add`时才有望工作。只有在返回 false 等情况下才可能进行修改，等等。这是一个经过深思熟虑的接口：这个事实最终可以通过在 .NET 4.5 中引入只读集合接口来纠正。`IList.IsFixedSize``false``IsReadOnly``IList`)

### 更新

考虑到这一点，我个人认为`IEnumerable<>`s 也不应该是无限的。除了物化方法，如`.ToList()`，LINQ 有几个非流式操作，如在返回第一个结果之前`.OrderBy()`必须消耗整个操作。`IEnumerable<>`由于这么多方法都假设`IEnumerable<>`s 可以安全地遍历它们，因此产生一个`IEnumerable<>`本质上不安全的无限期遍历将违反 Liskov 替换原则。

如果您发现您的应用程序经常需要斐波那契数列的片段作为 IEnumerables，我建议创建一个具有类似于 签名的方法`Enumerable.Range(int, int)`，它允许用户定义开始和结束索引。

如果您想开始一个 Gee-Whiz 项目，您可以想象开发一个基于 Fibonacci 的`IQueryable<>`提供程序，用户可以在其中使用有限的 LINQ 查询语法子集，如下所示：

```
// LINQ to Fibonacci!
var fibQuery = from n in Fibonacci.Numbers // (returns an IQueryable<>)
               where n.Index > 5 && n.Value < 20000
               select n.Value;
var fibCount = fibQuery.Count();
var fibList = fibQuery.ToList(); 
```

由于您的查询提供者有权将`where`子句评估为 lambda 表达式，因此您可以有足够的控制权来实现`Count`方法，并`.GetEnumerator()`确保查询的限制性足以产生真正的答案，或者尽快抛出异常该方法被调用。

但这听起来很聪明，对于任何现实生活中的软件来说都可能是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T15:16:26.823

我想一个符合要求的实现必须是有限的，否则你会返回`ICollection<T>.Count`什么？

```
/// <summary>
/// Gets the number of elements contained in the <see cref="ICollection{T}" />.
/// </summary>
int Count { get; } 
```

另一个考虑因素是`CopyTo`，在其正常过载下，它永远不会在斐波那契情况下停止。

这意味着斐波那契数列的适当实现将是简单`IEnumerable<int>`的（使用生成器模式）。（Ab）使用 an`IList<T>`只会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:19:27.383

在您的情况下，我宁愿“违反”`IEnumerable`并随心所欲地处理`yield return`.

:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T15:23:41.557

无限集合可能最好实现为`IEnumerable<T>`，而不是`IList<T>`。您还可以`yield return`在实现时使用语法，如下所示（忽略溢出问题等）：

```
public IEnumerable<long> Fib()
{
    yield return 1;
    yield return 1;
    long l1 = 1;
    long l2 = 1;
    while (true)
    {
        long t = l1;
        l1 = l2;
        l2 = t + l1;
        yield return l2;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T17:09:02.013

**编辑**

根据@StriplingWarrior 的评论，花了一天时间来思考我的回答。我担心我必须做出逆转。我昨晚开始尝试这个，现在我想知道放弃我会真正失去`IList`什么？

我认为只实现`IEnumerable`并声明一个本地`Count()`方法会更明智，该方法会抛出一个`NotSupportedException`方法以防止枚举器运行直到`OutOfMemoryException`发生。我仍然会添加一个`IndexOf`and`Contains`方法和`Item`indexer 属性来公开更高性能的替代方案，例如 Binet 的公式，但是，我可以自由更改这些成员的签名以潜在地使用扩展数据类型，甚至`System.Numerics.BigInteger`.

如果我要实现多个系列，我将为`ISeries`这些成员声明一个接口。谁知道呢，也许这样的东西最终会成为框架的一部分。

* * *

我不同意似乎是共识的观点。虽然`IList`有许多成员无法为无限系列实现，但它确实有一个`IsReadOnly`成员。似乎可以接受，当然在 的情况下`ReadOnlyCollection<>`，用`NotSupportedException`. 按照这个先例，我不明白为什么这是不可接受的，如果它是一些其他功能增益的副作用。

在这个特定的斐波那契数列案例中，有已建立的算法，请参见[此处](http://en.wikipedia.org/wiki/Fibonacci_number#Relation_to_the_golden_ratio)和[此处](https://en.wikibooks.org/wiki/Algorithm_Implementation/Mathematics/Fibonacci_Number_Program)，用于缩短我认为会产生显着性能优势的正常累积枚举方法。暴露这些好处`IList`对我来说似乎是有道理的。

理想情况下，.Net 将支持其他一些更合适的超类接口，有点接近，`IEnumerable<>`但是，在将来的某个版本出现之前，这必须是一种明智的方法。

* * *

我正在研究一个实现`IList<BigInteger>`来说明

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T20:39:11.807

正如@CodeInChaos 在评论中指出的那样， IList 的 Item 属性具有签名

```
T this[ int index ] { get; set; } 
```

我们看到 IList 由整数索引，因此它们的长度受 Int32.MaxValue 的限制。更大索引的元素将无法访问。我在写这个问题时想到了这个问题，但我把它留了下来，因为这个问题换个方式思考很有趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T15:25:26.070

总结一下我目前看到的：

你可以满足 5 出 6，扔`NotSupportedException`上`Count()`

我会说这可能已经足够好了，但是正如`servy`已经指出的那样，索引器对于任何非计算和缓存的数字都非常低效。

在这种情况下，我会说唯一适合您持续计算流的合同是 IEnumerable。

您拥有的另一个选择是创建一些看起来很像`IList`但实际上并非如此的东西。

# javascript - 使用字符串选择器设置 javascript 属性

> ID：11435821
> 
> 赞同：2
> 
> 时间：2012-07-11T15:14:32.900
> 
> 标签：javascript, object

我想使用字符串选择器设置对象属性。我有一个字符串`model.name`，我有一个对象来存储值。`object[model.name]`我不想将值存储在其中，而是将其存储在`object[model][name]`.

怎么能用 javascript/jQuery 或 javascript/jQuery 插件来完成呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:31:31.523

```
function setObjectPathValue(source, path, value) {
    var parts = path.split('.'), len = parts.length, target = source;

    for (var i = 0, part; i < len - 1; i++) {
        part = parts[i];
        target = target[part] == undefined ? (target[part] = {}) : target[part];
    }
    target[parts[len - 1]] = value;
    return target;
}

var obj = {};
setObjectPathValue(obj, "level1.level2.level3.name", "test");
alert(obj.level1.level2.level3.name); 
```

# facebook-opengraph - 为什么我应该使用自定义 Open Graph 赞助故事

> ID：11435822
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:14:33.913
> 
> 标签：facebook-opengraph, facebook-ads-api

Facebook 允许我创建一个以开放图形操作为目标的广告素材，例如：“用户在 Spotify 上听了一首歌”。

为什么我的广告要定位到不属于我的对象？有人可以举一个有用的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:58:24.813

假设您可能想要定位一个乐队。

您不必拥有该应用程序即可宣传乐队。

例如：“John 在 Spotify 上听过 'The black Keys'”。这样，即使您不拥有应用程序或对象，您也可以定位和推广乐队。

# liferay - 将菜单栏添加到门户页面

> ID：11435833
> 
> 赞同：0
> 
> 时间：2012-07-11T15:15:14.220
> 
> 标签：liferay, liferay-6

我需要在 Liferay 门户页面上显示一个菜单栏（一个菜单栏，该页面中的所有 portlet 都是通用的）

为此，我创建了一个自定义主题，并修改`navigation.vm`了模板文件夹下的文件。

我在`navigation.vm`文件中的 MenuBar 代码下方添加了这个并将其部署到服务器

```
<html>
<head>

<title>Menu Bar Using CSS</title>

<style>
.menu ul
{
list-style: none;
}

.menu ul li
{
display: inline;
}

.menu ul li a
{
/*Increase Clickable Area*/
padding: 8px;
padding-left: 15px;
padding-right: 15px;

/*Remove the Underline for the Link*/
text-decoration: none;

color: #000;
background: #ccc;
}

/*On Mouse Over the Link*/
.menu ul li a:hover
{
color: #fff;
background: #000;
}
</style>

</head>

<body>
<div class="menu">

<ul>

<li><a href="#">Item 1</a></li>
<li><a href="#">Item 2</a></li>
<li><a href="#">Item 3</a></li>
<li><a href="#">Item 4</a></li>

</ul>
</div>
</body>
</html> 
```

我已将所有这些代码放在`navigation.vm`我应用的自定义主题下的文件下，但它不起作用（我的意思是菜单栏未显示在门户页面上）

如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:47:48.493

1.  `navigation.vm`不包含`<html>`,`<head>`和`<body>`标签，这些放在里面`portal_normal.vm`或者如果页面是一个弹出窗口那么`portal_pop_up.vm`。此文件 ( `navigation.vm`) 仅有助于显示页面并包含在`portal_normal.vm`文件中。
2.  因此，请尝试将您的代码移动`portal_normal.vm`到菜单栏内。

希望这可以帮助。

# iphone - iPhone：从根据索引排序的核心数据中获取数据

> ID：11435835
> 
> 赞同：1
> 
> 时间：2012-07-11T15:15:19.503
> 
> 标签：iphone, ios, core-data

从根据索引排序的核心数据中获取数据

在核心数据实体中，我有一个具有索引 (1,2,3,4,5,6,7,......) 的字段索引

我想根据该索引从核心数据中获取数据，但我无法做到这一点

我无法正确设置 sortdescriptor

任何人请帮助一些代码片段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:56:18.933

告诉获取请求对您的数据进行排序...

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"myEntity"];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"index" ascending:YES];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:sortDescriptor]; 
```

现在，当您获取时，数据将根据索引字段进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:17:56.103

```
/*!
@param <NSManagedObject> array 
@return <NSManagedObject> sortedarray
*/
+ (NSArray *) sortManagedObjectArrayByObjectID:(NSArray *) array {

    NSArray *compareResult = [array sortedArrayUsingComparator:^NSComparisonResult(NSManagedObject *obj1, NSManagedObject *obj2) {

        NSString *s = [obj1.objectID.URIRepresentation lastPathComponent];
        NSString *r = [obj2.objectID.URIRepresentation lastPathComponent];
        return [s compare:r];

    }];

    return compareResult;

} 
```

# erlang - 如何在 erlang 中使用 Web 界面扩展应用程序

> ID：11435836
> 
> 赞同：1
> 
> 时间：2012-07-11T15:15:21.503
> 
> 标签：erlang

最近我看到了许多在 erlang 中具有 web 界面和后端的项目（例如 fb 上的 flash 游戏或类似的）。

我想知道可以实现类似的东西（也许更简单）。

我相信他们有一个 erlang 应用程序来提供身份验证，另一个提供到实际游戏的路由。但是，他们如何为每个不同的用户启动一个新的游戏应用程序实例？也许他们创建一个新节点并在那里启动应用程序？你能给我一些见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:19:19.407

使用[Actor 模型](http://ruben.savanne.be/articles/concurrency-in-erlang-scala)，您可以为每个连接的播放器创建一个进程，该进程对来自 Flash 客户端的消息做出反应，将消息直接发送到其他播放器进程或处理全局状态的中央进程。这个播放器进程也会对来自其他播放器的消息做出反应，并将更新发送回客户端。

然后，您可以根据这个想法构建您的系统架构。也许你有多个处理游戏不同部分的中央进程。也许你让玩家被分成不同的“房间”，每个房间都有自己的流程。也许你有一个玩家进程，即使玩家断开连接，它仍然处于活动状态，或者你只是排队消息并在玩家返回时对它们做出反应。当然，架构很大程度上取决于您正在构建的游戏类型。

# java - 使用 OSGi 进行依赖管理

> ID：11435840
> 
> 赞同：3
> 
> 时间：2012-07-11T15:15:27.517
> 
> 标签：java, maven, osgi

我想根据`OSGi`规范开发一个多模块应用程序。假设我的一个模块使用`Apache Commons Logging 1.1.1`. Spring 在他们的存储库中提供了一个捆绑版本`Apache Commons Logging 1.1.1`，所以我可以在我的 POM 中添加相应的依赖项。

例如，如果我安装我的捆绑包，那么在我安装捆绑包之前不会解决`Apache Felix`依赖关系是否正确？我的包将尝试导入尚未导出的包。`Apache Commons Logging 1.1.1``Apache Commons Logging 1.1.1`

我真的不明白依赖管理在`OSGi`世界上是如何工作的。我应该安装我的应用程序需要的每个包吗？另外，我不明白它是如何与 Maven 集成的？

提前感谢您的解释

* * *

**编辑**：我看到有一个名为 OBR 的 Apache Felix 子项目，它似乎有助于包管理（例如部署）。但是，我们已经有了一个包含本地存储库、私有存储库的 Maven 架构...... OBR 如何与 Maven 集成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T20:20:40.990

如果您想将 OSGi 与 maven 一起使用，那么我推荐 Apache Karaf 作为可以使用 Felix OSGi 框架的服务器。优点是您可以使用 mvn: urls 直接从 maven 存储库安装包。

如果您只是将 Apache Karaf 与 maven 存储库一起使用，那么您在运行时没有传递分辨率。您必须安装所需的所有捆绑软件。有很大帮助的是 karaf 有特征的概念。因此，您可以将这些功能用作粗粒度的构建块。您还可以在引用其他功能和捆绑包的地方创建自己的功能。这允许使用一个命令安装您的整个应用程序。

Felix 和 Karaf 也支持 OBR，但您必须创建自己的 OBR Repo。目前没有公开的 OBR 存储库。OBR 的优点是可以解决大部分的传递依赖。Karaf 功能甚至可以与 OBR 一起使用，因此您只需在功能中列出一些顶级捆绑包，然后让 OBR 解决其余的问题。

在实践中，我对没有 OBR 的简单 Karaf 功能有很好的体验。这是一些手动工作，但比您预期的要少，而且效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:58:03.723

OSGi 依赖项基于 Java 包：当一个包声明它需要导入给定包（指示可接受的版本范围）时，框架将尝试将该导入“连接”到该包的合适版本，即必须由另一个捆绑包导出。

如果找不到包，则该包将无法解析并且无法启动 - 所以是的，您需要安装应用程序所需的所有包，正如 Christian 指出的那样，有各种工具可以帮助您。

获取所需捆绑包的一种简单方法是使用 maven-dependencies-plugin 从 Maven 的依赖项列表中获取捆绑包，并将它们复制到您的应用程序在启动时可以找到它们的地方以安装它们，如 [2] 中所做的（在launcher/pom.xml），我写的一个小示例应用程序。

您还可以使用 Sling 的 maven-launchpad-plugin [3] 生成一个可运行的 jar 文件，该文件嵌入 OSGi 框架和您需要的所有包，并在启动时设置所有内容。

关于导入和导出 - 无需详细说明，假设您使用 maven-bundle-plugin [1] 构建您的包，您将指定您希望您的包导出哪些包（其他包对其他包不可见），并且 maven-bundle-plugin 将生成（在大多数情况下是自动生成，但您可以根据需要覆盖）要导入的包列表，因此如果您自己的代码在要导出的包之间被干净地拆分，通常不会有太多工作和内部实现包。

[1] [http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)

[2] [https://github.com/bdelacretaz/OSGi-for-mere-mortals](https://github.com/bdelacretaz/OSGi-for-mere-mortals)

[3] [http://sling.apache.org/site/maven-launchpad-plugin.html](http://sling.apache.org/site/maven-launchpad-plugin.html)

# ruby-on-rails - 如何在不向域类添加新方法的情况下创建自定义 object_label？

> ID：11435845
> 
> 赞同：2
> 
> 时间：2012-07-11T15:15:35.433
> 
> 标签：ruby-on-rails, rails-admin

我注意到 RailsAdmin 有一个 object_label 方法，但不清楚如何使用它：

```
config.model Entity do
  object_label do
    # ???
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:25:20.420

```
RailsAdmin.config do |config|
  config.model Team do
    object_label_method do
      :custom_label_method
    end
  end

  def custom_label_method
    "Team #{self.name}"
  end
end 
```

[从文档](https://github.com/sferik/rails_admin/wiki/Railsadmin-DSL)中提取

如果您只想使用模型中的属性，则可以将其作为要调用的方法传递...就像`:name`返回`object.name`标签一样。

# php - CodeIgniter / Pyrocms - 如何使我的自定义模块子导航改变以适应该部分？

> ID：11435846
> 
> 赞同：1
> 
> 时间：2012-07-11T15:15:38.617
> 
> 标签：php, mysql, codeigniter, pyrocms

我正在为 PyroCMS 制作一个自定义模块，我想让部分菜单与应用当前类有关。我不想更改的 CMS php 如下所示：

```
<li class="<?php if ($name === $active_section) echo 'current' ?>"> 
```

当我查看 /admin/courses/ 这是正确的，并且第一个导航元素具有类，当前。

![在此处输入图像描述](../Images/3b7ac242200b5729db29f468f6568c08.png)

$name 取自语言文件，在 details.php 中设置。$active_section 取自视图，等于

> $this->_ci_cached_vars['active_section']

但是，当我查看 /admin/courses/chapters/ 时，系统仍将“课程”确定为当前部分，因此导航混乱。

我需要的是一种根据正在使用的控制器（索引、章节或页面）的功能来更改视图中 $active_session 值的方法。

我尝试在每个控制器函数中更改 $this->_ci_cached_vars['active_section'] 的值，但这不起作用。有任何想法吗？

我确定我完全缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:01:33.770

知道了。我在一个控制器中使用多种方法，并且 'protected $section = 'courses'; 发生在 index 方法之前的行正在为所有内容设置部分。它不能在另一个方法中再次设置，但是有一种方法可以在方法中定义一个部分。

$this->template->active_section = 'section'; 如下开始我的方法给了我想要的东西。

```
public function chapters(){

        //Set active section
        $this->template->active_section = 'chapters';
 ...

} 
```

# android - 是否可以从手机上安装的其他应用程序中提取 Android 菜单设置？

> ID：11435847
> 
> 赞同：0
> 
> 时间：2012-07-11T15:15:39.707
> 
> 标签：android, menu, settings

我正在开发一个错误报告应用程序，我需要能够访问其他应用程序的设置值。我需要知道用户是否更改了其他应用程序的设置以及他们将其更改为什么。有没有办法确定其他已安装应用程序的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:33:44.940

不可以。除非它们被设置为由其他应用程序读取，否则读取其他应用程序设置将构成安全漏洞（它们可以保存密码......）

# ruby - 如何打开本地图像文件、对其进行编码并通过 URI 发布？（通过 Tumblr API 发布）

> ID：11435851
> 
> 赞同：1
> 
> 时间：2012-07-11T15:15:48.300
> 
> 标签：ruby, image, url, encoding, tumblr

我正在尝试读取本地图像文件，对其进行正确编码并发布到 Tumbrl。根据 [Tumblr API](http://www.tumblr.com/docs/en/api/v2#posting)，我可以传递一个`data`参数`Array (URL-encoded binary contents) Limit: 5 MB`

我已经用`http://api.tumblr.com/v2/blog/#{BLOG}/info`请求测试了我的代码。这是工作。但是我不能发照片。这是我的代码：

```
require 'oauth'
require 'oauth/consumer'
require 'open-uri'
require 'active_support'

CONSUMER = 'foo'
SECRET = 'foo'
TOKEN = 'foo'
TOKEN_SECRET = 'foo'
BLOG = 'foo'

consumer=OAuth::Consumer.new(CONSUMER, SECRET, {:site=>"http://tumblr.com"})
access_token = OAuth::AccessToken.new(consumer, TOKEN, TOKEN_SECRET)

# Here I tried one of two lines:
# data = Base64.encode64(IO.binread('./resized')) #first try
data = URI::encode(IO.binread('./resized')) #second try

# response = access_token.get "http://api.tumblr.com/v2/blog/#{BLOG}/info?api_key=#{CONSUMER}"
# puts response
response=access_token.post "http://api.tumblr.com/v2/blog/#{BLOG}/post?api_key=#{CONSUMER}&type=photo&data=#{data}&link=http://ya.ru&"
puts response 
```

第一次尝试：

```
% ruby ./w_oauth.rb 
/usr/lib/ruby/1.9.1/uri/common.rb:176:in `split': bad URI(is not URI?): http://api.tumblr.com/v2/blog/foo/post?api_key=foo&type=photo&data=/9j/4AAQSkZJRgABAQEASABIAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4w (URI::InvalidURIError)
ICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gODAK/9sAQwAGBAUG
BQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxobIxwWFiAsICMm
(!!!long piece of image data skipped!!!)
FI/16HfTbyHPWurqdE+TGH4wx2js5SKQb+6b4bIj3aurqCrEtcXrf/4yf/dS
DLet/wCzEB6sa6uoomxJN2eaQj5mkYuerQj611dQM7Fx/wDLF/8AbXV1dTA/
/9k=
&link=http://ya.ru&
    from /usr/lib/ruby/1.9.1/uri/common.rb:211:in `parse'
    from /usr/lib/ruby/1.9.1/uri/common.rb:747:in `parse'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/tokens/access_token.rb:7:in `request'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/tokens/access_token.rb:47:in `post'
    from ./w_oauth.rb:23:in `<main>' 
```

第二次尝试：

```
% ruby ./w_oauth.rb
/var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:14:in `force_encoding': can't modify frozen String (RuntimeError)
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:14:in `rescue in escape'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:12:in `escape'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:43:in `block (2 levels) in normalize'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:42:in `collect'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:42:in `block in normalize'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:37:in `map'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/helper.rb:37:in `normalize'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/request_proxy/base.rb:98:in `normalized_parameters'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/request_proxy/base.rb:113:in `signature_base_string'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/signature/base.rb:77:in `signature_base_string'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/signature/hmac/base.rb:12:in `digest'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/signature/base.rb:65:in `signature'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/signature.rb:23:in `sign'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/client/helper.rb:45:in `signature'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/client/helper.rb:75:in `header'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/client/net_http.rb:91:in `set_oauth_header'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/client/net_http.rb:30:in `oauth!'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/consumer.rb:224:in `sign!'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/consumer.rb:188:in `create_signed_request'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/consumer.rb:159:in `request'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/tokens/consumer_token.rb:25:in `request'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/tokens/access_token.rb:12:in `request'
    from /var/lib/gems/1.9.1/gems/oauth-0.4.6/lib/oauth/tokens/access_token.rb:47:in `post'
    from ./w_oauth.rb:23:in `<main>' 
```

UPD：`./resized`是一个正确的 JPEG 文件：

```
% file ./resized
./resized: JPEG image data, JFIF standard 1.01, comment: "CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 80" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:40:38.760

URI 编码是不够的。您还需要编码：`, / ? : @ & = + $ #`.

尝试：

```
URI.escape(IO.binread('./resized'), Regexp.new("[^#{URI::PATTERN::UNRESERVED}]")) 
```

# c# - C#：如何创建和使用方程数据库？

> ID：11435852
> 
> 赞同：0
> 
> 时间：2012-07-11T15:15:56.813
> 
> 标签：c#, database, equations

我一直在尝试创建一个方程式数据库，我的 Windows 窗体应用程序将向其提供变量，然后计算解决方案。我试图将我的方程存储在一个文本文件中并将它们加载到一个列表中，但我一直无法想到如何将我的方程从一个字符串转换为一个实际的方程。

那么，有谁知道我如何存储和调用一组使用我的 Windows 窗体应用程序中的变量的方程。

PS请保持简单或充分解释事情。我很容易混淆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:23:47.400

您最好的选择是使用数学库来评估您的数学表达式。

以下是一些帮助您入门的链接： [https ://stackoverflow.com/questions/1387430/recommended-math-library-for-c-net](https://stackoverflow.com/questions/1387430/recommended-math-library-for-c-net)

您还可以查看[http://ncalc.codeplex.com/](http://ncalc.codeplex.com/)，这可能正是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:53:02.420

您可以使用动态 SQL 执行此操作。这是 SQL Server 中的方法。

您可以将方程连同它需要的变量一起存储在一个表中（或者如果您有一组固定的变量，那很好）。

将方程提取到 C# 字符串中。

然后构造以下语句：

```
select <equation>
from (select <val1> as variable1, <val2> as variable2) t 
```

你把方程放在哪里，变量的值放在哪里。

在数据库中执行这条语句。瞧！结果将是等式的结果。

这种方法有一些缺点。它需要两次往返数据库（一次获取方程，另一次运行方程）。您还受限于数据库的功能。此外，如果您不使用 SQL Server，则语法可能会有所不同（例如，在 Oracle 中，内部子查询将包含“from dual”）。

# c++ - libpoppler-qt4：如何保存表单更改

> ID：11435853
> 
> 赞同：3
> 
> 时间：2012-07-11T15:15:58.220
> 
> 标签：c++, qt, pdf, poppler

我正在使用带有 qt 绑定的 libpoppler 来编辑 PDF 文件中的表单。

```
// sample code
Poppler::Document* doc = Poppler::Document::load(filename);
Poppler::Page* page = doc->page(0);
QList<Poppler::FormField *> forms = page->formFields();
for(int j = 0; j < forms.length(); j++) {
    Poppler::FormField * form = forms.at(j);
    // fill it out or whatever...
    ... 
```

但是如何保存对文件所做的更改？我知道 poppler 提供了这种可能性，例如对于 Glib 绑定​​：[poppler_document_save()](http://people.freedesktop.org/~ajohnson/docs/poppler-glib/PopplerDocument.html#poppler-document-save)。如何使用 QT 绑定执行此操作？没有`Poppler::Document::save()`方法或任何东西，我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:39:41.430

[在对Okular 源代码](http://www.kde.org/applications/graphics/okular/development)进行了一些挖掘之后，我自己发现了它：必须使用`Poppler::PDFConverter`该类。下面提供了一个示例方法：

```
bool saveToFile(const QString &filename, const Poppler::Document* doc) {
    Poppler::PDFConverter *pdfConv = doc->pdfConverter();
    pdfConv->setOutputFileName(filename);
    pdfConv->setPDFOptions(pdfConv->pdfOptions()|Poppler::PDFConverter::WithChanges);
    bool success = pdfConv->convert();
    delete pdfConv;

    return success;
} 
```

# java - 我可以在打包代码中显示 Maven 2 构建配置文件吗？

> ID：11435859
> 
> 赞同：0
> 
> 时间：2012-07-11T15:16:19.423
> 
> 标签：java, maven-2

我的任务是将 Maven 项目版本（快照、1.1 等）和用于构建/打包应用程序的 Maven 配置文件添加到我们的 Java webapp 页面的页脚。第一部分很容易使用资源过滤来实现：我`project.version=${project.version}`在资源文件中创建一行并使用资源插件用版本覆盖占位符。这很好用，我可以`project.version`在任何需要的地方参考。我可以做类似的事情来显示构建/打包应用程序的 Maven 配置文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:35:43.653

有一个属性`${project.activeProfiles[0].id}`可能符合您的预期。还有这个[插件](http://maven.apache.org/plugins/maven-help-plugin/active-profiles-mojo.html)可以在文件中输出有关配置文件的一些信息。

M。

# jquery - 交换 在一个连续的 JQuery 循环中

> ID：11435861
> 
> 赞同：0
> 
> 时间：2012-07-11T15:16:25.170
> 
> 标签：jquery

我正在努力让一个 div 从右到左通过标题进行动画处理。一旦 div 离开屏幕并完成动画，我想循环动画，但将 div 换成另一个包含新图像的 div。代码如下，但无法正常运行。任何帮助将不胜感激。

```
 $(document).ready(function() {
       var clouds = $('#bg_header .cloud');
       var lng = clouds.length;
    $('.cloud').eq(0).animate({
        right: '+=1400'
        }, 50000, 'linear', anim(1));
          function anim(i) {
          if (i >= lng) {
          i = 0;
     }
    $('.cloud').eq(i).animate({
        right: '+=1400'
        }, 50000, 'linear', anim(i+1));
  }
}); 
```

HTML

```
<div id="bg_header">
<div id="clouds" class="cloud" style="right:-400px;"><img border="0" alt="animated clouds" src="/images/clouds.png" /></div>
<div id="clouds2" class="cloud" style="right:-400px;"><img border="0" alt="animated clouds" src="/images/clouds2.png" /></div> 
```

CSS

```
#bg_header{
min-width:990px;
padding-left:105px;
padding-right:105px;
right:0;
left:0;
height:330px;
position:fixed;
background:url("/images/bg_header.png") repeat-x top center;
z-index:1000;
clear:both;
margin-left:auto;
margin-right:auto;
}

#clouds{
position:absolute;
z-index:500;
right:0px;
top:10px;
}

#clouds2{
position:absolute;
z-index:500;
right:0px;
top:10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:21:52.180

您没有准确说出问题所在（只是它没有“正常运行”），但一个明显的问题是您的回调引用会`animate()`立即执行，而不是作为函数引用传递。

改变

```
$('.cloud').eq(0).animate({
    right: '+=1400'
}, 50000, 'linear', anim(1)); 
```

至

```
$('.cloud').eq(0).animate({
    right: '+=1400'
}, 50000, 'linear', function() { anim(1); }); 
```

# elasticsearch - 在 UI 上搜索任何关键字时，Logstash 给出异常

> ID：11435867
> 
> 赞同：0
> 
> 时间：2012-07-11T15:16:31.307
> 
> 标签：elasticsearch, logstash

为 elasticsearch 启动了配置设置为**embedded=true**的 logstash。得到以下异常：

```
NativeException: org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [initial], No indices / shards to search on, requested indices are [] 
```

每当尝试在 UI 上搜索任何关键字时。

目前我们正在尝试使用静态日志文件（从某些服务器复制）进行测试，而不是不断增长的日志文件。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:15:15.790

我遇到了同样的问题，原因是我使用 grok 过滤器两次使用相同的捕获名称用于不同的模式，例如

```
filter{
  grok {
    type => "foo"
    keep_empty_captures => true
    pattern => [
      "(?<bar>/file/path/a)",
      "(?<bar>/file/path/b)"
    ]
  }
} 
```

我`<bar>`用 a替换了第二个`<qux>`，错误消失了。

# jquery - jQuery 流沙

> ID：11435870
> 
> 赞同：0
> 
> 时间：2012-07-11T15:16:34.823
> 
> 标签：jquery, quicksand

我在我的网站上使用 jQuery 流沙插件，但目前它下面的页脚会跳起来，并且在更改过滤器选项时不会随着流沙图像平滑地向上缓和。

我该如何解决这个问题？

代码：

```
<div class="filterContainer">

            <span class="filter">Designer Filter:</span>

            <ul id="filterOptions">
                <li class="active"><a href="#" class="all">All</a></li>
                <li><a href="#" class="bisque">Bisque</a></li>
                <li><a href="#" class="radart">RadArt</a></li>
                <li><a href="#" class="vogue">Vogue</a></li>
                <li><a href="#" class="zehnder">Zehnder</a></li>
            </ul>

        </div>

        <!-- Radiator Showcase Image -->
        <ul class="imageHolder">
            <li class="item" data-id="id-1" data-type="radart">
                <img src="<?php echo base_url(); ?>images/radart/city-lights.jpg" alt="Radart Tripple City Lights Radiator" />
            </li>
            <li class="item" data-id="id-2" data-type="bisque">
                <img src="<?php echo base_url(); ?>images/bisque/seta.jpg" alt="Bisque Seta Radiator"/>
            </li>
            <li class="item" data-id="id-3" data-type="zehnder">
                <img src="<?php echo base_url(); ?>images/zehnder/zehnder-bay-2.png" alt="Zehnder Bay Radiator" />
            </li>
            <li class="item" data-id="id-4" data-type="zehnder">
                <img src="<?php echo base_url(); ?>images/zehnder/fassane-mirror.jpg" alt="Zehnder Fassane Mirror Radiator"/>
            </li>
            <li class="item" data-id="id-5" data-type="vogue">
                <img src="<?php echo base_url(); ?>images/vogue/1.jpg" alt="Vogue Radiator"/>
            </li>
            <li class="item" data-id="id-6" data-type="bisque">
                <img src="<?php echo base_url(); ?>images/bisque/b2.jpg" alt="Bisque b2 Radiator" />
            </li>
            <li class="item" data-id="id-7" data-type="bisque">
                <img src="<?php echo base_url(); ?>images/bisque/chime.jpg" alt="Bisque Chime Radiator" />
            </li>
            <li class="item" data-id="id-8" data-type="bisque">
                <img src="<?php echo base_url(); ?>images/bisque/orbit.jpg" alt="Bisque Orbit Radiator" />
            </li>
            <li class="item" data-id="id-9" data-type="zehnder">
                <img src="<?php echo base_url(); ?>images/zehnder/fassane.jpg" alt="Zehnder Fassane Radiator"/>
            </li>
            <li class="item" data-id="id-10" data-type="bisque">
                <img src="<?php echo base_url(); ?>images/bisque/svelte.jpg" alt="Bisque Svelte Radiator"/>
            </li>
        </ul>   

    </div>

    <div class="clear"></div>

    <!-- Footer -->
    <div class="footer">

        <div class="brands">
            <img src="<?php echo base_url(); ?>images/logos/full.png" />
        </div>
     </div> 
```

jQuery

```
$(document).ready(function() {
    // get the action filter option item on page load
    var $filterType = $('#filterOptions li.active a').attr('class');

    // get and assign the ourHolder element to the
    // $holder varible for use later
    var $holder = $('ul.imageHolder');

    // clone all items within the pre-assigned $holder element
    var $data = $holder.clone();

    // attempt to call Quicksand when a filter option
    // item is clicked
    $('#filterOptions li a').click(function(e) {
        // reset the active class on all the buttons
        $('#filterOptions li').removeClass('active');

        // assign the class of the clicked filter option
        // element to our $filterType variable
        var $filterType = $(this).attr('class');
        $(this).parent().addClass('active');
        if ($filterType == 'all') 
        {
            // assign all li items to the $filteredData var when
            // the 'All' filter option is clicked
            var $filteredData = $data.find('li');
        }
        else 
        {
            // find all li elements that have our required $filterType
            // values for the data-type element
            var $filteredData = $data.find('li[data-type=' + $filterType + ']');
        }

        // call quicksand and assign transition parameters
        $holder.quicksand($filteredData, {
            duration: 800,
            easing: 'easeInOutQuad'
        });

        $

        $('.ul.imageHolder').slideDown('slow', function() {

        });

        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:24:07.000

参数“adjustHeight”默认为“auto”。如果您将“adjustHeight”指定为“动态”，事情应该会更顺畅。

而不是这个：

```

$holder.quicksand($filteredData, {
            持续时间：800，
            缓动：'easeInOutQuad'
        });

```

它会是这样的：

```
$holder.quicksand($filteredData, {
            adjustHeight: 'dynamic', // 这是您要查找的行。
            持续时间：800，
            缓动：'easeInOutQuad'
        });

```

最好的。

# php - PHP类：构造函数后数组取消初始化？

> ID：11435877
> 
> 赞同：2
> 
> 时间：2012-07-11T15:16:58.873
> 
> 标签：php, arrays, class, constructor, initialization

我在 php 中创建了一个类，但我对其中一个类变量有一些问题。我声明了一个私有变量，然后在构造函数中设置它。但是，稍后在课程中我有一个使用该变量的方法。在这种情况下，变量是一个数组。但是，该方法说数组是空白的，但是当我在构造函数中检查它时，一切正常。所以真正的问题是，为什么我的数组在构造函数之后清除或似乎清除了？

```
<?php
class Module extends RestModule {
    private $game;
    private $gamearray;

    public function __construct() {
        require_once (LIB_DIR."arrays/gamearray.php");
        $this->gamearray = $gamesarray;
        $this->game = new Game();
        $this->logger = Logger::getLogger(__CLASS__);
        $this->registerMethod('add', array(Rest::AUTH_PUBLIC, Rest::AUTH_USER, Rest::AUTH_ADMIN), true);
        $this->registerMethod('formSelect', array(Rest::AUTH_PUBLIC, Rest::AUTH_USER, Rest::AUTH_ADMIN), false);
    }

    public function add(){
        $game = Utility::post('game');        
    }

    public function formSelect(){
        $gamename = Utility::get('game');
        $this->$gamearray[$gamename];
    }
} 
```

该数组是从另一个文件中提取的，因为该数组包含大量文本。不想用构造函数中声明的巨大数组来混搭这个文件。滚动将是巨大的。任何解释都会很好，我想了解我的问题，而不仅仅是解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:21:13.023

你有一个错字：

```
public function formSelect(){
    $gamename = Utility::get('game');
    $this->gamearray[$gamename]; // Remove the $ before gamearray
} 
```

此外，在您的情况下，`include`优于`require_once`.

如果你想更深入，你可以`$gamearray`像这样重写赋值：

```
// Module.php 
$this->gamearray = include LIB_DIR.'arrays/gamearray.php';

// gamearray.php
return array(
    // Your data here
); 
```

# jquery - 使用 jQuery.on 的 SVG 元素未触发 mouseenter/mouseleave 事件

> ID：11435883
> 
> 赞同：8
> 
> 时间：2012-07-11T15:17:17.360
> 
> 标签：jquery, svg, internet-explorer-9, raphael, mouseevent

看看这个[jsFiddle](http://jsfiddle.net/CYhgZ/72/)

将jQuery 与 SVG (Raphael 2.0) 结合使用时， `mouseenter`/`mouseleave`似乎没有正确触发。我知道开箱即用的 SVG jQuery 不是 100% 兼容 SVG，但是，据我所知，它似乎只影响 IE9。

奇怪的是，如果您快速将鼠标移开/移出 svg 元素（确保您在这样做时立即离开 HTML 窗格）并返回到它，事件确实会触发（但不是每次都触发）。只是为了确保这不是一个普遍的问题，`on`我`click`每次都连接了可以正常工作的事件。

只是想知道是否有人知道这是一个错误还是一个已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:45:49.613

这是 1.7.2 中的一个错误。见[票](http://bugs.jquery.com/ticket/12067)。

如果我使用 jQuery (edge)，问题就会消失，因此应该在下一个预定版本 (1.8) 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T04:03:39.760

我认为重要的是要注意 jQuery 1.8.2 和 android via phonegap 没有使用 jq-mobile。我看到触摸和鼠标事件随机选择并且不同步......这意味着细微的差异触发 mouseEnter 和 click 与不同的触摸触发 touchStart 相比（有时如果没有输入甚至当前已发送 mouseEnter 发生）然后 2 touchEnds。如果您有一个 touchEvent 触发 mouseEnter，则第二个触摸模式（开始、结束、结束）发送一个 mouseLeave（假设您不会通过细微的点击差异随机触发点击组合）。

我的期望是它们应该在两种情况下一起触发，除了一个（触摸事件）更多地用于多点触控需求，或者认识到在通过触摸界面模拟点击事件之后不会有 mouseLeave 事件（不知何故？.. .)。我的另一个期望是，如果我没有为鼠标事件处理或注册监听器，但我为触摸事件做，反之亦然，根据监听或拦截的内容将发送或不发送不同的事件（返回 false？或通过 preventDefault 等停止冒泡）。

无论如何，在我看来，目前您需要以随机未连接的不可预测方式处理这两种类型的事件，这对我来说意味着丢弃鼠标世界中最好描述为触控设备上的“结束”事件。

基本上我认为触摸不应该发送结束/进入事件，而点击也应该相当于触摸，如果我正在监听触摸，preventDefault 应该取消所述鼠标事件。

无论如何，将两者都发送并让我解决是最有意义的。我怀疑的困惑在于您只收听了它发送的事件的一半（缺少接触）。……祝你好运！这些想法可能会帮助某人在更高级别或更低级别的开发团队中处理混乱。（这应该归咎于浏览器级别吗？我想是的。）

# javascript - 获取元素后面的文本

> ID：11435888
> 
> 赞同：1
> 
> 时间：2012-07-11T15:17:29.253
> 
> 标签：javascript, jquery, html, css

我正在开发一个放大镜，我希望我能得到一些帮助，弄清楚我将如何做一个步骤。

我正在做的是我有一个 z-index 比内容更高的 div。它是可移动和可拖动的。它还具有透明背景，因此人们可以看到它后面/下面的内容（图像和文本）具有较小的 z-index。

现在我需要帮助的部分是：

我想弄清楚 div 背后的确切内容（让我们给它一个 ID `#glass`）。

然后我的计划是在`<span>`之前和之后添加一个关闭，并使用 CSS3 缩放变换设置样式以增加大小，使其看起来像被放大了一样。如果您对如何“放大”内容有更好的想法，请分享。

所以我希望在伪代码中做的是：

1.  获取 的位置`#glass`。
2.  获取内容落后`#glass`。
3.  将其存储在变量中或给它一个类或其他东西来引用它。
4.  在前后附加一个跨度。
5.  使用比例变换对其进行样式设置。
6.  当#glass 移动时撤消并重置上述内容。

对于这些步骤中的任何一个，我真的很感激任何和所有的帮助，尤其是第 2 和第 3 步，因为我不知道如何做这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:25:24.200

您可以在页面中的每个元素上侦听 mousemove 事件。每次事件触发时，您都会更新一个变量，其中最新的节点悬停在上面。

因此，当您在玻璃周围拖动时，应该在玻璃后面的元素上触发 mousemove 事件（因为您将鼠标悬停在它们上方）。然后您可以使用最新的节点变量来获取它背后的元素。

这里是 Jsfiddle 演示如何做到这一点：http: [//jsfiddle.net/wWVuy/](http://jsfiddle.net/wWVuy/)

# ios - ios分析崩溃日志？

> ID：11435896
> 
> 赞同：0
> 
> 时间：2012-07-11T15:18:00.693
> 
> 标签：ios, crash-reports

我有以下符号化的崩溃日志。或者也许我错过了什么？请帮助理解这是什么意思：

操作系统版本：iPhone OS 5.1.1 (9B206) 报告版本：104

异常类型：EXC_CRASH (SIGKILL) 异常代码：0x00000000、0x00000000 线程崩溃：0

线程 0 名称：调度队列：com.apple.main-thread

线程 0 崩溃：

0 libsystem_kernel.dylib 0x3591f628 0x3590e000 + 71208

1 libsystem_c.dylib 0x34accb1a nanosleep + 138

2 libsystem_c.dylib 0x34ad7608 睡眠 + 40

3 报告崩溃 0x001046f2 0xfc000 + 34546

4 报告崩溃 0x000fd474 0xfc000 + 5236

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:16:29.443

它是您的应用程序在崩溃时刻的状态，可以告诉您崩溃的位置。在您的情况下，应用程序在线程 0 中因异常类型：EXC_CRASH (SIGKILL) 而崩溃，您可以看到所有活动线程的函数堆栈。如果你想将它转换为人类可读的视图，你应该使用特殊的程序，如 symbolicate、atos 或 dwarfdump。

更多的：

[http://kevincupp.com/2011/05/12/symbolicating-ios-crash-logs.html](http://kevincupp.com/2011/05/12/symbolicating-ios-crash-logs.html)

[http://aplus.rs/ios-dev/guide-to-symbolicating-iphone-app-crash-logs-with-xcode-4-2/](http://aplus.rs/ios-dev/guide-to-symbolicating-iphone-app-crash-logs-with-xcode-4-2/)

（关于atos，我只有俄语链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-05T19:37:57.070

如果您在 Xcode -> Widow ->Organizer 中有存档文件和相应的崩溃日志文件，则非常简单。

将您的设备连接到 mac

转到 Xcode-> 窗口-> 设备

在左侧面板上单击您的设备

点击查看设备日志

选择要符号化的日志。（或）如果您的系统上有崩溃日志文件，则单击左侧面板上的所有日志选项并将日志文件拖到左侧面板部分。

右键单击选定的日志，然后单击重新符号化

完毕！！！,

# android - 应用程序为 Galaxy Nexus 选择了不正确的资源文件夹

> ID：11435900
> 
> 赞同：-1
> 
> 时间：2012-07-11T15:18:12.523
> 
> 标签：android, android-layout, galaxy

我有用于 、 和其他中的图像的资源文件`-hdpi`夹`-xhdpi`。我在布局中使用 DP 单位。但在我的 Galaxy Nexus（分辨率为 1280x720）上，它使用`-hdpi`文件夹中的资源。此外，布局的大小是错误的（例如，我有 45dp——在 HTC Desire（分辨率为 800x480）上是 67px，但在 Galaxy Nexus（分辨率为 1280x720）上我也得到了 67px。

我的错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:33:51.467

有关 Galaxy Nexus 和布局的更多信息，请参阅此[答案](https://stackoverflow.com/questions/9212623/samsung-galaxy-nexus-layout-drawable-structure)。

Galaxy Nexus 是一个 -xhdpi 并且应该相应地使用该文件夹。您可能需要仔细检查是否确实在 xhdpi 文件夹中放置了正确大小的图标。

根据我的经验，有时图标不会刷新，除非您进行完全全新安装，即手动卸载应用程序，然后从 Eclipse 重新安装。这样，它将强制图标刷新。

此外，我必须先执行一个 project->clean 才能使用新值更新 R 文件，但与卸载/重新安装方法相比，这是一种不太常见的修复方法。

# php - MongoDB 代码点火器

> ID：11435902
> 
> 赞同：4
> 
> 时间：2012-07-11T15:18:14.503
> 
> 标签：php, codeigniter, mongodb

我设法使用 Alex Bilbie 库在 Codeigniter 上运行 MongoDB。操作进展顺利（连接、查询等），但有时我会收到这些 PHP 通知：

```
Message: Mongo::__construct() [mongo.--construct]: localhost:27017: pool get (0x4bfab20)

Filename: libraries/Mongo_db.php

Line Number: 1274
A PHP Error was encountered

Severity: Notice

Message: Mongo::__construct() [mongo.--construct]: localhost:27017: found in pool (0x4bfab20)

Filename: libraries/Mongo_db.php 
```

有没有办法摆脱这些？或者可能隐藏它们......因为它们似乎并没有以另一种方式弄乱我的页面，而不是飞溅到用户的屏幕上。

编辑

不过，在几页上，我使用了 JQgrid，当错误出现时，它们会弄乱我的 HTTP 响应并呈现一些混乱的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T21:02:53.133

此处的特定通知消息已在 MongoDB PHP 驱动程序 1.2.11 或更高版本中删除（请参阅[PHP-431](https://jira.mongodb.org/browse/PHP-431)）。将您的 MongoDB 驱动程序升级到最新版本应该会删除过多的通知日志记录。

在生产环境中正确设置 Code Igniter 日志的一般说明仍然适用...

`E_NOTICE`错误报告级别旨在警告您可能存在的错误或拼写错误。它通常仅用作开发设置而不是用于生产消息。

PHP4 和 PHP5 中默认的[error_reporting 设置](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)实际上设置为忽略这些：

```
E_ALL & ~E_NOTICE 
```

Code Igniter`index.php`有一个*应用程序环境*设置，该设置通常显示 和 的所有错误并`development`抑制错误报告。您应该适当地设置它：`testing``production`

```
define('ENVIRONMENT', 'production'); 
```

如果您真的想为生产环境捕获这些消息，您应该更新`production`index.php 中的设置，这样`error_reporting(0)`您就可以：

*   [error_reporting](http://php.net/manual/en/function.error-reporting.php) () 设置为适当的详细程度
*   [显示错误](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors) `off`
*   [日志错误](http://www.php.net/manual/en/errorfunc.configuration.php#ini.log_errors) `on`
*   [error_log](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-log)路径集

例如，在`index.php`你可能有：

```
case 'production':
    error_reporting(E_ALL);
    ini_set('display_errors','Off');
    ini_set('log_errors','On');
    ini_set('error_log','/var/log/php5.log');
break; 
```

这样，如果您想查看它们，消息/通知仍将保存到`error_log`，但它们不会显示给最终用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:41:18.823

在我的脑海中，你可以做一些事情。这不是关于修复您收到的 MongoDB 错误的答案，而是关于您可以隐藏错误的某些方法的答案。

a) 使用“@”运算符忽略来自被调用方法的任何错误输出，在该方法中输出您收到的错误。这将导致您将方法调用重命名为以下`@method_outputting_mongodb_error($foo,$bar);`.

b) 在 CodeIgniter 中关闭错误报告。这不是最好的方法，因为不会输出所有其他错误。

这里有一个很好的链接：如何关闭错误报告： http: [//phpdog.blogspot.fr/2012/02/codeigniter-error-reporting-handling.html](http://phpdog.blogspot.fr/2012/02/codeigniter-error-reporting-handling.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T21:40:16.817

正如@Stennie 提到的，这已在更高版本的驱动程序中得到修复：[https ://jira.mongodb.org/browse/PHP-431](https://jira.mongodb.org/browse/PHP-431)

尝试升级。

此外，这仅存在于 Windows 驱动程序中，并且仅在 v1.2.1 之后才开始发生。我知道，因为制作 JIRA 的人也根据我的建议尝试了 1.2.1，但他没有得到那些`E_NOTICE`s。我记得现在实际上触发了 JIRA 的对话:)。

与其他人不同，我认为您不应该用`E_ALL & ~E_NOTICE`. 没有人完全决定隐藏 E_NOTICE，但普遍的共识是这不是最好的事情。当然，您不希望您的日志中充满关于 MongoDB 扩展的所有这些调试信息，相反，MongoDB 扩展应该是静默的（正如您认为的那样）。

我不会隐藏 E_NOTICE 的另一个原因是因为更高版本的 PHP 的 php.ini：

```
; error_reporting
;   Default Value: E_ALL & ~E_NOTICE
;   Development Value: E_ALL | E_STRICT
;   Production Value: E_ALL & ~E_DEPRECATED 
```

默认情况下，PHP 将实际安装 Production Value（就像它为我做的那样），因此 PHP 错误报告的默认设置是：

```
E_ALL & ~E_DEPRECATED 
```

这是我的 AWS 和本地 Ubuntu 服务器 12.04 上的 error_reporting 的值，自从安装以来我没有更改这些值，因此我从 repo 和源安装 PHP 获得的默认值是：

```
error_reporting = E_ALL & ~E_DEPRECATED 
```

因此，为以后的 PHP 版本（可能还有未来的版本）推荐的生产默认设置实际上显示了`E_NOTICE`，这很有用，但如果日志中填充了来自 Mongo 扩展的内容，则不会。

编辑：downvoter 关心解释？我基本上给出了与@Stennie 相同的答案，为什么要投反对票？

我已经编辑了我的答案，以实际考虑对此答案的评论和@Stennie 的答案中的对话，因此现在答案更有意义。

# jquery - 如何将标签内容传递给函数

> ID：11435903
> 
> 赞同：0
> 
> 时间：2012-07-11T15:18:15.347
> 
> 标签：jquery, asp.net, jquery-ui, jquery-plugins

我有一个使用以下代码调用的 jQuery 函数。该函数搜索“QAList”中“words:”区域中显示的单词，然后将这些单词加粗。这段代码可以正常工作，并且“Demo”和“or”这两个词都加粗了。

```
 $("[id$=QAList]").wrapInTag({
      words: ['Demo User', 'or'],
      tag: '<selected>'
    }); 
```

我现在正试图从标签或文本框中传递“单词：”列表，但由于某种原因，我无法让它传递正确的信息，而且我不能 100% 确定它实际传递的是什么。

这就是我更改代码以从 lblSelectedQA 标签中提取的方式：

```
 $("[id$=QAList]").wrapInTag({
      words: [$("[id$=lblSelectedQA]").html()],
      tag: '<selected>'
    }); 
```

我什至从文本框中尝试过，以防标签由于某种原因无法正常工作：

```
 $("[id$=QAList]").wrapInTag({
      words: [$("[id$=lblSelectedQA]").val()],
      tag: '<selected>'
    }); 
```

如果我将它们放在警报中，我会从标签和文本框中得到我需要的东西，它们会返回：

'演示用户'，'或'

既然我试图从其他地方传递值，那么“单词：”之后的语法是否不正确？

谢谢！

**根据以下 iurisilvio 的回答进行编辑

作为对您的回答的回应，我在填充`'Demo User', 'or'`文本的内容中对代码进行了一些更改，以摆脱单引号和多余的空格。它现在看起来像这样：`Demo User,or`并且适用于单一结果。

然后我尝试添加 .split(",") 如果我添加索引 [0] 或 [1]，它适用于数组中的一个值，但不会独立用于所有数组项。

Utkanos 显示的内容基本相同，只是添加了一种方法来消除我不再需要的空格和单引号。

这是我现在的代码，它适用于单个结果：

```
 $("[id$=QAList]").wrapInTag({
      words: [$("[id$=lblSelectedQA]").html().split(",")],
      tag: '<selected>'
    }); 
```

但是，当它返回多个结果时，除非我添加索引，否则它将不起作用，但只会对我硬编码的索引起作用......不是一个选项，因为我不知道这个数组中有多少。

```
 $("[id$=QAList]").wrapInTag({
      words: [$("[id$=lblSelectedQA]").html().split(",")[0]],
      tag: '<selected>'
    }); 
```

或者

```
 $("[id$=QAList]").wrapInTag({
      words: [$("[id$=lblSelectedQA]").html().split(",")[1]],
      tag: '<selected>'
    }); 
```

有没有办法让它获取所有数组项而不必遍历它们？

谢谢！

**编辑解决方案：

我需要把刚刚添加的括号去掉。我想通了，然后回来了，Utkanos 刚刚发布了同样的东西 :)

工作代码：

```
 $("[id$=QAList]").wrapInTag({
      words: $("[id$=lblSelectedQA]").html().split(","),
      tag: '<selected>'
    }); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:26:03.053

这样，你的话 var 是相等的`["'Demo User', 'or'"]`（一个元素）。如果你拆分你的字符串，你会得到你想要的：

```
// suposing your_text is right
words: your_text.split(",") 
```

当然，这是一个简化的解决方案。如果你想得到类似的东西`'word, 1', 'word 2'`，你需要一个更好的解析器来解决你的问题，但它就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:27:26.707

`words`参数应该是一个数组。该字符串`'Demo User', 'or'`看起来像是包含这些值的数组的打印输出，但最终是字符串，而不是数组。

换句话说，您传递的字符串看起来有点像数组，而不是实际的数组。

假设您从元素中检索的字符串是，如您所说，`'Demo User', 'or'`您需要通过分隔符将其拆分为数组 - 在您的情况下，逗号和空格。您还需要删除`'`各种令牌周围的。

```
$("[id$=QAList]").wrapInTag({
    words: $("[id$=lblSelectedQA]").val().replace(/'/g, '').split(, ?/),
    tag: '<selected>'
}); 
```

# java - 获取 SQL 查询的 TableCell 内容

> ID：11435904
> 
> 赞同：0
> 
> 时间：2012-07-11T15:18:18.160
> 
> 标签：java, javafx

我正在编写一个 SQL CRUD 应用程序并停留在删除按钮问题上。我有一个有 4 列的表，第五列有一个删除按钮。要进行 SQL 查询，我需要从这 4 列中获取信息。我可以获取行号和列名，如何获取行/列交叉点的单元格内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:46:45.547

假设第五列有一个自定义单元格工厂，它将删除按钮放在其自定义 TableCell 中，这个删除按钮可以拥有如下操作：

```
btnDelete.setOnAction(new EventHandler<ActionEvent>() {

    @Override
    public void handle(ActionEvent event) {
        param.getTableView().getSelectionModel().select(getIndex());
        Person item = personTable.getSelectionModel().getSelectedItem();
        if (item != null) {
            // Logic of deleting current record here
            System.out.println(item.getName());
        }
    }
}); 
```

完整的sscce，[将按钮更优雅地放入表格列](https://stackoverflow.com/q/10044779/682495)。

# c# - WCF 单例托管在 Windows 服务中。如何在不先与客户端“接触”服务的情况下自动启动 WCF

> ID：11435907
> 
> 赞同：3
> 
> 时间：2012-07-11T15:18:21.420
> 
> 标签：c#, wcf

我有一个托管在 Windows 服务中的 WCF 服务。

目前，当 Windows 服务启动时，我必须用客户端“触摸”WCF 服务才能在 WCF 服务中运行一些长时间运行的代码。

是否可以在不使用客户端调用服务的情况下自动启动 WCF 服务中长时间运行的代码？

IIS 7.5 不是一个选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:23:01.503

是的，[`OnStart`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx)为此使用方法。一旦 Windows 服务从操作系统获得 START 命令，它将被触发。

把你的“触摸”代码（逻辑）放在那里。

# reflection - WCF 数据服务反射提供程序指定关联类型

> ID：11435916
> 
> 赞同：2
> 
> 时间：2012-07-11T15:18:50.130
> 
> 标签：reflection, wcf-data-services, odata, visual-studio-lightswitch

我一直在努力尝试让数据服务与新的 LightSwitch 2.0 OData 数据源一起工作。注意到 OData 3.0 仍然不受支持，我不得不退回到 2.0 版本。

碰巧我的数据上下文只不过是一些 xml 序列化对象的包装器以启用 OData 访问。这种“魔力”是使用[反射提供程序](http://msdn.microsoft.com/en-us/library/dd723653.aspx)发生的，并且对于所有 CRUD 操作都可以正常工作。

当我尝试在 LightSwitch 中使用此服务时，问题就开始了，并意识到我所有的实体关联都是错误的。

[我的情况和你看微软的示例代码](http://msdn.microsoft.com/en-us/library/dd728281.aspx)一模一样。

所以，使用这个数据模型：

```
[DataServiceKeyAttribute("OrderId")]
public class Order
{
    public int OrderId { get; set; }
    public string Customer { get; set; }
    public IList<Item> Items { get; set; }
}
[DataServiceKeyAttribute("Product")]
public class Item
{
    public string Product { get; set; }
    public int Quantity { get; set; }
} 
```

很明显 Order [1 - *] Items 之间的“一对多”关系。但是查看该服务的 xml 元数据，该关联被声明为“多对多”：

```
<Association Name="Order_Items">
    <End Type="WEBfactory.StreamInsight.Adapters.Carel.DataServices.Order" Multiplicity="*" Role="Order"/>
    <End Type="WEBfactory.StreamInsight.Adapters.Carel.DataServices.Item" Multiplicity="*" Role="Items"/>
</Association> 
```

现在，在使用“服务引用”客户端时，这并没有太大的麻烦，但由于 LightSwitch 不支持“多对多”关系，我在尝试使用此服务时总是会收到警告，并且关系既不导入，也不可能手动定义。

有没有人知道如何使用反射提供程序强制执行关系类型？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:30:14.627

在这种情况下，Order 和 Item 之间的关系实际上是 many:many - 如果按照您的建议是 1:many，则 Item 只能在一个 Order 中。

也就是说，您可以通过向 Item 类添加相应的属性来创建 1:* 关系：

```
[DataServiceKeyAttribute("Product")]
public class Item
{
    public string Product { get; set; }
    public int Quantity { get; set; }
    public Order Order { get; set; }
} 
```

这会产生以下 $metadata，它可能会也可能不会导致相同的问题：

```
<Association Name="Order_Items">
  <End Type="Scratch.Web.Order" Multiplicity="*" Role="Order"/>
  <End Type="Scratch.Web.Item" Multiplicity="*" Role="Items"/>
</Association>
<Association Name="Item_Order">
  <End Type="Scratch.Web.Order" Multiplicity="0..1" Role="Order"/>
  <End Type="Scratch.Web.Item" Multiplicity="*" Role="Item"/>
</Association> 
```

这可能是反射提供程序的限制（如果事实证明不是，我将编辑此答案），因此今天唯一的解决方法是使用 EF 提供程序或自定义提供程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:16:18.480

我会让我的 WCF RIA 服务按此处所述工作：如何创建多对多关系 [http://blogs.msdn.com/b/lightswitch/archive/2010/12/16/how-to-create-多对多关系andy-kung.aspx](http://blogs.msdn.com/b/lightswitch/archive/2010/12/16/how-to-create-a-many-to-many-relationship-andy-kung.aspx)

# android-camera - 从Android上的相机胶卷中提取图像数据？

> ID：11435918
> 
> 赞同：1
> 
> 时间：2012-07-11T15:18:52.560
> 
> 标签：android-camera, titanium-mobile, titanium-modules

谁能帮我找出是否/如何使用（Appcelorator）Titanium 从 Android 设备中的“相机胶卷”中获取图像数据？我找到了一个 IOS 的第 3 方模块，但我迫切希望找到一个适用于 Android 的模块。否则我将不得不报废钛并成为真正的本地人。

我需要的是一个函数，它返回有关设备上图像的数据数组。虽然我很想获得“地理位置”数据（如果存在的话），但我真正需要的只是一个“创建日期”和图像的路径，或者实际的 TiBlob。
看起来很简单，但我在 Appcelerator 论坛上没有得到任何回复，这让我很担心。至少必须有一个Android“模块”来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:39:42.123

```
Ti.Media.openPhotoGallery({
     allowEditing : true,
     success : function(event) {
     var image = require('/modules/parts/squarecropper').crop(event.media);
         setImage(image);
         Ti.Media.hideCamera();
     },
     cancel : function() {
     },
     saveToPhotoGallery : false,
     mediaTypes : [Ti.Media.MEDIA_TYPE_PHOTO],
}); 
```

上述方法可以完成您的工作。现在，要么直接访问它，要么进入文件系统并对数据进行编码和解码。

```
 var f = Titanium.Filesystem.getFile(currIamge);
    var temp = f.read();
    var encodeData = Ti.Utils.base64encode(temp);
    alert("encodeData = "+encodeData); 
```

# c# - 在 asp 按钮控件上运行 C# 和 Javascript 函数？

> ID：11435919
> 
> 赞同：3
> 
> 时间：2012-07-11T15:18:54.217
> 
> 标签：c#, javascript, asp.net

我可以让 Javascript 和 C# 函数正常工作。

但是，我的 Javascript 函数在 C# 之前运行。

如何让它在 C# 函数之后运行？

这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">
<asp:View ID="View1" runat="server">
<div id="div2" style="height:70px; width:auto; text-align:center;">
<p><b>This is A View!!!</b></p>
  <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>

<div id="div1">
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" 
        OnClientClick="javascript:Highlit()" />
</div>
</asp:View>
</asp:MultiView>

<script type="text/javascript">

function Highlit() 
{
 $("#div2").effect("highlight", {}, 10000);
}
</script>

 </ContentTemplate>
 </asp:UpdatePanel> 
```

**后面的代码：**

```
namespace jQuery_Highlight.jQuery_Highlight
{
public partial class jQuery_HighlightUserControl : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "Changed";
    }
   }
} 
```

这是反映答案变化的代码：

**背后的代码**

```
namespace jQuery_Highlight.jQuery_Highlight
{
public partial class jQuery_HighlightUserControl : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = "Changed";
        ScriptManager.RegisterStartupScript(this, this.GetType(), "TEST", "Highlit();", true);
    }
   }
   }

 <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

 <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
 <ContentTemplate>
 <asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0">
 <asp:View ID="View1" runat="server">
 <div id="div2" style="height:70px; width:auto; text-align:center;">
 <p><b>This is A View!!!</b></p>
 <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
 </div>

 <div id="div1">
  <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
 </div>
 </asp:View>
 </asp:MultiView>

 </ContentTemplate>
 </asp:UpdatePanel>

<script type="text/javascript">

function Highlit() {
    $("#div2").effect("highlight", { color: "#9499FC" }, 10000);
}
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T15:22:16.213

让 javascript 运行的唯一方法是在 Button1_Click 事件中添加脚本引用。

标准回发的示例代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "Changed";
    Page.ClientScript.RegisterStartupScript(this.GetType(), "PostButton1_ClickScript", "Highlit();", true);
} 
```

正如其他人所指出的，请务必删除您的 OnClientClick 事件。另外，考虑将“Highlit”脚本移到更新面板之外。

此外，由于您在更新面板中，因此您需要使用以下示例代码进行部分回发：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = "Changed";
    ScriptManager.RegisterStartupScript(this, this.GetType(), "PostButton1_ClickScript", "Highlit();", true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:30:46.000

您必须在 Button1_Click 事件结束时注册一个 ClientScript
并删除 OnClientClick="javascript:Highlit()"

```
protected void Button1_Click(object sender, EventArgs e)
{
    //Do stuff
    ScriptManager.RegisterStartupScript(this, this.GetType(), "ANYNAME", "javascript:Highlit();", true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:25:52.960

删除该`OnClientClick`属性，并将调用添加为启动脚本，以便它在页面加载后运行：

```
protected void Button1_Click(object sender, EventArgs e) {
  Label1.Text = "Changed";
  Page.ClientScript.RegisterStartupScript(this.GetType(), "start", "Highlit();", true);
} 
```

旁注：使用`OnClientClick`属性时，代码不应以`javascript:`. 仅当您将脚本放入`href`链接的属性中时才会使用。

# facebook - 浏览器阻止弹出 Facebook 权限

> ID：11435923
> 
> 赞同：0
> 
> 时间：2012-07-11T15:19:24.130
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

一段时间以来，我一直在创建 Facebook 应用程序。我使用 javascript SDK 触发一个弹出窗口来询问用户的权限。当用户单击按钮时，弹出窗口会被激活，因此不会在页面加载时或通过单击以外的事件来激活。现在，最近浏览器一直在阻止权限弹出窗口，这在过去从来没有成为问题。有任何想法吗？

谢谢

泰隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:43:56.530

对于 Facebook 应用程序，有几种不同的显示模式选项。`popup`只是其中之一。

您可能有兴趣使用以下任何一种：`page`、`popup`、`touch`（移动设备）和`iframe`。`page`可能对您最方便，因为`iframe`某些对话框功能不允许使用。

**参考**：http: [//developers.facebook.com/docs/reference/dialogs/](http://developers.facebook.com/docs/reference/dialogs/)

享受和好运！

# ios - 如何将字符串从一个视图控制器传递到另一个？

> ID：11435926
> 
> 赞同：0
> 
> 时间：2012-07-11T15:19:35.457
> 
> 标签：ios

我有一个 Iphone 应用程序，我在其中将字符串从一个视图控制器传递到另一个视图控制器。我的字符串被添加为类中的属性。但是当我试图传递字符串时，它会因释放实例的消息而崩溃。（-[CFString retain]：发送到已释放实例的消息）。我的代码看起来像这样

```
RewardsViewController *rewards=[[ RewardsViewController alloc] initWithNibName:@" RewardsViewController" bundle:nil];    
rewards.rewardsshopinfoname=stringshopname;
rewards.rewardsshopinfoaddress1=address1 ;
rewards.rewardsshopinfoaddress2=address2;
rewards.rewardsshopinfopoints=total;
rewards.rewardsarray=self.shoprewardsArray;
[self.navigationController pushViewController:rewards animated:YES]; 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:56:07.713

三件事：

1.  您的笔尖名称中有一个空格，这可能会导致您的问题。

2.  您应该强烈考虑使用 ARC 进行开发。ARC 解决了您所有的内存管理问题，并且在许多情况下得到了改进。

3.  你赋予你的属性什么属性？即（非原子，保留）？

# objective-c - 以编程方式加载时的 Root ViewController 视图的框架

> ID：11435928
> 
> 赞同：0
> 
> 时间：2012-07-11T15:19:41.607
> 
> 标签：objective-c, ios5, uiviewcontroller

我在启动时以横向模式加载根视图控制器（不使用界面构建器）。在 viewDidLoad 中，我将子视图添加到根视图控制器视图中，如下所示

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        // self.view.

    UIView *toolBar=[[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 50)]; 
    toolBar.backgroundColor=[UIColor darkGrayColor];

    [self.view addSubview:toolBar];
//code contiues...
} 
```

但 self.view.frame.size.width 返回纵向模式的宽度而不是横向。

提前致谢

**编辑：** ![图片供参考](../Images/6fd0119a2582961fc7924a7414b5080a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T21:57:09.520

当您不使用 Interface Builder/xib 文件并且也没有在 中手动创建视图`loadview`时，系统会创建一个具有最大尺寸的视图。这在`loadview`方法文档中有所说明：

> 如果视图控制器没有关联的 nib 文件，则此方法将创建一个普通的 UIView 对象。

此系统生成的 UIView 对象具有不是身份转换的转换属性，因此您不能依赖 frame 属性中的值，如下所述：

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/transform](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/c_ref/UIView)

> 警告：如果此属性不是恒等变换，则 frame 属性的值未定义，因此应被忽略。

那么，你应该怎么做呢？我想最好的解决方案是使用`bounds`你 UIView 的属性。这包含已经旋转的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:35:38.150

可能是，纵向是您的项目文件中的第一个（单击以在 xcode 中进行项目，目标中的信息选项卡，单元支持的界面方向）？如果是这样，您的应用程序可以纵向启动，然后仅在此之后发送 viewDidLoad 并旋转到横向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:43:40.230

实现`-loadView`方法：

```
- (void)loadView
{
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
} 
```

同样通常父视图控制器负责设置其子视图控制器视图的帧大小。在根视图控制器的情况下，我相信它会占用它所附加的 UIWindow 的大小（因此，如果您在应用程序委托中设置窗口大小，则可以使用`[[UIView alloc] init]`然后在`-loadView`方法中设置自动调整大小掩码）。您可能需要在上述代码中考虑状态栏，具体取决于您自己的代码。

# matlab - 在 Matlab 数组上应用累积和运算符

> ID：11435933
> 
> 赞同：0
> 
> 时间：2012-07-11T15:20:00.403
> 
> 标签：matlab, logic, and-operator

如何以“求和”方式将逻辑运算符应用于 Matlab 数组？

例如：and([1 0 0]) = 0, and([1 1 1]) = 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:27:55.330

如果你有：

```
a = [1,0,0] 
```

那么你可以说：

```
any(a) %% which is equivalent to 'or'

all(a) %% which is equivalent to 'and' 
```

# eclipse - 使用 EGit 克隆存储库导入，但不允许我导入项目

> ID：11435935
> 
> 赞同：8
> 
> 时间：2012-07-11T15:20:05.697
> 
> 标签：eclipse, git, github, clone, egit

我刚刚在 Github 上启动了我的第三个存储库。我使用 README 文件初始化了网站上的存储库，并尝试使用 Egit 将其导入 Eclipse。就像我在 Github 上的其他项目一样，导入对话框运行良好，并且存储库被克隆。在我的文件资源管理器中，我可以看到创建的文件夹 Egit，以及来自存储库的 .git 文件夹和自述文件。

然而，当我到达 Eclipse 想要我选择一个项目导入向导的地步时，一切都停止了工作。我无法导入现有项目，因为尚不存在。如果我尝试将其作为一般项目导入，它不会让我走得更远，因为它声称：

> /path/to/my/folder 与另一个项目的位置重叠：'gnu_magic'

这确实是我要导入的项目的名称，但是因为我只是第一次导入它，所以这应该不是问题。

如果我使用新项目向导，它不允许我使用与项目相同的文件夹名称，声称该文件夹不为空（这是真的，但是当我使用向导创建一个全新的项目时很奇怪）。如果我给文件夹取另一个名字，它会创建一个项目，但该项目没有连接到存储库——我无法将我的更改提交回 Github。

删除 gnu_magic 文件夹并重新开始会带来相同的结果。

有没有办法从 Eclipse 的配置中删除该特定项目的元数据？我不想失去我的其他项目，但我想在那个项目上与 Egit 合作。

另一个有趣的事实：如果我手动克隆存储库，然后尝试将其作为文件系统中的项目导入 Eclipse，它不会让我因为源位于目标的层次结构中。

还是我完全错过了这里的重点？我很惊讶我能够毫无问题地克隆其他存储库。在过去的几天里，与他们合作非常容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T09:25:09.397

解决方案有点奇怪。以下是解决它的步骤：

1.  使用 EGit 克隆存储库
2.  Eclipse 拒绝导入项目，声称它已经存在。退出导入对话框。
3.  使用现有代码，使用克隆存储库创建新项目
4.  与旧存储库共享项目

现在该项目再次连接到存储库。小心这种方法，因为如果出现问题，您可能会提交旧代码。此解决方案适用于 Indigo 和 Juno。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T12:50:04.797

我正在使用 Eclipse 4.2 Indigo，我一直在为同样的问题苦苦挣扎一段时间。

如果您已经使用 EGit 或其他方式在您的机器上克隆了一个存储库，您可以：

1) 创建一个新的 Eclipse 项目。

2) *File -> Import -> General -> File System*选择克隆的存储库位置。这会将所有内容（包括存储库中的 .git 文件夹）导入工作区中的 Eclipse 项目中。为此，导入文件中的任何位置是否有 .project 文件都没有关系。

3)*团队 -> 共享项目 -> Git* EGit 插件应该检测项目中的 .git 文件夹并相应地建议设置。您将在 EGit 的存储库中添加一个新的本地存储库位置，该位置将指向项目目录下的 .git 文件夹。

# java - 如何使用 IMAP 唯一标识 Java 邮件消息？

> ID：11435947
> 
> 赞同：7
> 
> 时间：2012-07-11T15:20:28.657
> 
> 标签：java, email, jakarta-mail

Java Mail 中的 IMAP 消息由它的相对位置编号标识，该编号从 1 开始。

参考， [http](http://docs.oracle.com/javaee/1.4/api/javax/mail/Message.html#getMessageNumber) ://docs.oracle.com/javaee/1.4/api/javax/mail/Message.html#getMessageNumber ()

消息编号是一个临时的详细信息。

有没有办法永久唯一地标识通过 IMAP 访问邮箱的邮件/消息，使用 Java 邮件 API 在会话中成立？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T17:38:26.153

查看 UIDFolder 接口，它公开了 IMAP UID 功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-04T12:56:22.400

您可以使用以下代码作为示例获取消息的唯一标识符

```
Folder folder = imapStore.getFolder("INBOX"); // get reference for inbox folder
UIDFolder uf = (UIDFolder)folder; // cast folder to UIDFolder interface
folder.open(Folder.READ_ONLY); // open folder
Message messages[] = folder.getMessages(); // get all messages
Long messageId = uf.getUID(messages[0]); // get message Id of first message in the inbox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-28T19:37:02.077

添加这个是因为我认为这会有所帮助

如果您想遍历消息并获取 uid，则上面的代码不会获得性能，因为您必须循环并获取 uid，使用消息获取它的简单方法如下

```
Folder emailFolder = store.getFolder("INBOX");
emailFolder.open(Folder.READ_ONLY);
UIDFolder uf = (UIDFolder)emailFolder;
Message messages[] = emailFolder.getMessages();

FetchProfile profile = new FetchProfile();
//profile.add(FetchProfile.Item.ENVELOPE);
profile.add(FetchProfile.Item.FLAGS);
//profile.add(FetchProfile.Item.CONTENT_INFO);
profile.add(UIDFolder.FetchProfileItem.UID);
emailFolder.fetch(messages, profile); 
```

这将获取带有 uid 的消息

在此之后，如果您循环并执行 uf.getUID(messages[i]); 您将获得 uid，但这次会更快。

# hibernate - 休眠和数据库触发器

> ID：11435951
> 
> 赞同：0
> 
> 时间：2012-07-11T15:20:55.123
> 
> 标签：hibernate, triggers

我在数据库中创建一个更新触发器。当表A被更新时，它会将新值插入到表B中。当我的程序更新表A使用hibernate session.update()时，触发器已经触发了两次。我不知道会发生什么？请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:36:57.407

很难说，因为你们没有分享太多信息。也许你应该看看执行的 SQL。生成的 SQL 可以通过设置以下属性来显示：

```
<property name="hibernate.show.sql" value="true"></property> 
```

一个可能的原因是版本列的更新，当行中的其他数据未更改但拥有关系发生更改时，也会发生这种情况。

在 Hibernate 文档中没有严格规定当实体发生变化时执行多少更新语句，因此可能存在许多其他情况。

# wordpress - 阻止 wordpress 发送审核电子邮件

> ID：11435952
> 
> 赞同：1
> 
> 时间：2012-07-11T15:20:56.767
> 
> 标签：wordpress

*每次*评论需要审核时，我的 wordpress 安装都会向网站管理员发送电子邮件时遇到问题 。
这也适用于垃圾邮件评论，导致网站管理员在他的收件箱中收到大量垃圾邮件。

每次我用谷歌搜索这个问题时，我都会得到答案“只需转到设置-> 讨论并取消单击“保留评论以供审核””，但不幸的是，这对我没有帮助。

所以，这是我的设置（其中一些可能无关紧要）：

1.  我正在使用 wordpress 内置的评论系统。没有 disqus 或 facebook 评论。
2.  我已经安装了 Akismet 插件。我确实尝试禁用该插件，但我仍然收到电子邮件。
3.  在网站上的“设置”->“讨论”->“随时给我发电子邮件”下，未选中“任何人发表评论”和“保留评论以供审核”。
4.  您无需登录即可发表评论
5.  WP 安装最初是 Wordpress MU 安装，但我已升级到 3.x，因此它现在已构建到常规 wordpress 安装中。安装运行许多具有不同域名的博客，并且所有博客 AFAIK 都会出现问题。
6.  大多数博客都使用“Yashfa BRANDED！” 主题

审核电子邮件如下所示：

* * *

主题：[SITENAME] 请适度：“测试垃圾评论”

* * *

身体：

```
A new comment on the post 78 "Test spam comments" is waiting for your approval

http://url/test-spam-comments/

Author : djqw21208ryfg23 (IP: XXX.XXX.XXX.XXX , XXX.XXX.XXX.XXX)  
E-mail :     fweuh3298f9wefg923g329@jkg23ru89g9werhj239r8h238t923.asdfhio  
URL    : http://feg239r239f9fg7329rfg322379fg23f3  
Whois  : http://ws.arin.net/cgi-bin/whois.pl?queryinput=XXX.XXX.XXX.XXX

Comment:  
ugly spam comment goes here...

Approve it: http://url/wp-admin/comment.php?action=mac&c=XXXXX  
Delete it: http://url/wp-admin/comment.php?action=cdc&c=XXXXX  
Spam it: http://url/wp-admin/comment.php?action=cdc&dt=spam&c=XXXXX  
Currently 0 comments are waiting for approval.   

Please visit the moderation panel:
http://url/wp-admin/moderation.php 
```

* * *

是否有我忘记检查的设置？
为什么即使我在“设置”->“讨论”下关闭了电子邮件设置，我仍然会收到这些电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T23:52:25.607

我有同样的问题：wordpresses 发送邮件。我为其他人主持了一些 wordpress 博客，他们有时会离开地球，不再照顾他们。我确实可以完全访问数据库，所以这是我关闭 wordpress 以获取评论并禁用邮件的方法：

（这假定 wp_* 的默认表前缀）

有两个选项会影响邮件的发送：comments_notify 和 moderation_notify。我将两者都设置为false：

```
 UPDATE wp_options SET option_value=0 WHERE option_name LIKE "%notify"; 
```

我还删除了所有未批准的评论：

```
 DELETE FROM `wp_comments` WHERE `comment_approved` = 0; 
```

并关闭所有帖子和页面以获取更多评论：

```
 UPDATE  `wp_posts` SET comment_status='closed'; 
```

然后还有要清理的邮件队列.... :-(

# symfony - 如何使用 routing.yml 中的参数进行重定向？

> ID：11435956
> 
> 赞同：14
> 
> 时间：2012-07-11T15:21:17.003
> 
> 标签：symfony

在 routing.yml 中，您可以执行以下操作：

```
redirect_old_url_to_new:
    pattern:   /old-pattern
    defaults:  
        _controller: FrameworkBundle:Redirect:urlRedirect
        path: /new-pattern
        permanent: true 
```

这会将 url 重定向`/old-pattern`到`/new-pattern`. 但是，如果我有一个参数，如何在新路径中翻译参数，例如：

```
redirect_old_url_to_new:
    pattern:   /old-pattern/{page}
    defaults:  
        _controller: FrameworkBundle:Redirect:urlRedirect
        path: /new-pattern/{page}
        permanent: true 
```

这是行不通的，将重定向到`/new-pattern/{page}`字面意思，因此将重定向到`/old-pattern/23`to `/new-pattern/{page}`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T16:02:27.153

如果参数名称相同，则参数将自动传递：

```
FirstRoute:
  pattern: /firstroute/{page}
  defaults:
      _controller: Bundle:Controller:action

# SecondRoute will redirect to FirstRoute. 
# ex: /secondroute/1 redirects to /firstroute/1            
SecondRoute:
  pattern: /secondroute/{page}
  defaults:
      _controller: FrameworkBundle:Redirect:redirect
      route: FirstRoute
      permanent: true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-17T13:43:36.987

似乎 Symfony 的书中有一个错误

```
root:
    pattern: /
    defaults:
        _controller: FrameworkBundle:Redirect:urlRedirect
        path: /app
        permanent: true 
```

正如 Arms 所说，它是“FrameworkBundle:Redirect:redirect”而不是“FrameworkBundle:Redirect:urlRedirect”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T12:13:09.360

我之前错了，这对我有用：

```
redirection:
    path: /exercices.html
    defaults:
      _controller: FrameworkBundle:Redirect:redirect
      route: blog
      slug: url-of-the-post
      permanent: true 
```

直接放在`parameter_name: parameter_value`下面`route`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-17T15:15:35.307

您可以像这样在 .yml 中重定向根：

```
root:
    path: redirected_path
    defaults:
        _controller: FrameworkBundle:Redirect:urlRedirect
        path: destination_path
        permanent: true|false 
```

或者

```
root:
    path: redirected_path
    defaults:
        _controller: FrameworkBundle:Redirect:redirect
        route: destination_route_name
        permanent: true|false 
```

# c# - Windows 8 中的 Password Vault 和 Credential Manager 有什么区别？

> ID：11435958
> 
> 赞同：7
> 
> 时间：2012-07-11T15:21:17.520
> 
> 标签：c#, windows-8, microsoft-metro, credentials, passwordvault

我正在使用 CredentialPicker 类来呈现[熟悉的 UI](https://i.imgur.com/lwPS6.png)。正如预期的那样，这会将凭据存储在 Windows 的凭据管理器中。编辑：示例代码[在这里](http://code.msdn.microsoft.com/windowsapps/Credential-picker-sample-30fcba2e)

但是，存储用户名/密码的推荐方法似乎是 PasswordVault API——[在 Windows 8 中保存敏感数据的最佳实践](https://stackoverflow.com/questions/9052482/best-practice-for-saving-sensitive-data-in-windows-8)——它看起来完全像一个不同的系统？

1\. 呈现熟悉的 UI 和 2\. 在 Metro 风格应用程序中添加、访问和删除用户名/密码的正确方法是什么？

我正在使用 C#，但 C++ 和 JS 的答案会很好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:01:50.910

1.  使用设置窗格将您的登录字段放入。
2.  使用 PasswordVault 存储您的应用程序的凭据。
3.  看看这个示例：[http ://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a](http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a)

# c++ - SOCI（SQL C++ 包装器）- PostgreSQL 不执行命令（？）

> ID：11435972
> 
> 赞同：0
> 
> 时间：2012-07-11T15:22:18.680
> 
> 标签：c++, sql, postgresql, soci

当我弄清楚如何编译一个简单的程序时，现在我遇到了其他问题......我安装了 PostgreSQL 并创建了数据库和表：

> 1) createdb testDB 2) 创建表ities (city varchar(80), location varchar(80));

我仍然非常简单的程序：

```
#include <iostream>
#include <soci.h>
#include <postgresql/soci-postgresql.h>
#include <string>
using namespace std;

int main(int argc, char **argv)
{
   try
   { 
      soci::session sql(soci::postgresql, "dbname=testDB");

    string row = "";
    sql << "select * from cities;", soci::into(row);

    sql << "insert into cities values('London', 'UK')";

    sql << "select * from cities;", soci::into(row);
    cout << row << "\n"; 
   }
   catch (soci::postgresql_soci_error const & e)
   {
      std::cerr << "PostgreSQL error: " << e.sqlstate() << " " << e.what() << std::endl;
   }
   catch (std::exception const & e)
   {
      std::cerr << "Some other error: " << e.what() << std::endl;
   }
   return 0;

} 
```

这段代码只显示了我在 testDB 中已有的行，没有显示我刚刚插入的行。例如：在我的 testDB 表中，我有：

> 华沙 波兰 柏林 德国 巴黎 法国

上面的代码向我展示了：

> 波兰华沙

但不显示：

> 柏林 德国 巴黎 法国 伦敦 英国

请帮忙：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:04:25.657

`sql << "insert into cities values ('London', 'UK')";` 因此，在解决此问题后添加提交。

# powershell - Powershell中Compare-object SideIndicator为==时获取左右对象

> ID：11435973
> 
> 赞同：1
> 
> 时间：2012-07-11T15:22:18.377
> 
> 标签：powershell, comparison

我正在为属性*Name*与 compare-object 进行比较。当 SideIndicator 为“==”时，我可以访问这两个对象吗？我想访问不是“名称”的其他属性。

```
 Compare-Object $env1 $env2 -IncludeEqual -Property "Name" | ForEach-Object {         
            $_.LeftObject.Size
            $_.RightObject.Size

        } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:47:26.243

我看不到访问这两个对象的方法。如果删除名称比较，则可以通过 InputObject 属性访问对象本身。也就是说，没有左或右对象，因为它是同一个对象（相等）。

# c++ - 分水岭分割opencv xcode

> ID：11435974
> 
> 赞同：4
> 
> 时间：2012-07-11T15:22:27.710
> 
> 标签：c++, xcode, opencv, image-processing, watershed

我现在正在从 opencv 代码书（*OpenCV 2 Computer Vision Application Programming Cookbook*）中学习代码：第 5 章，使用分水岭分割图像，第 131 页。

这是我的主要代码：

```
#include "opencv2/opencv.hpp"
#include <string>

using namespace cv;
using namespace std;

class WatershedSegmenter {
    private:
    cv::Mat markers;
    public:
    void setMarkers(const cv::Mat& markerImage){
        markerImage.convertTo(markers, CV_32S);
    }

    cv::Mat process(const cv::Mat &image){
        cv::watershed(image,markers);
        return markers;
    }
};

int main ()
{
    cv::Mat image = cv::imread("/Users/yaozhongsong/Pictures/IMG_1648.JPG");

    // Eliminate noise and smaller objects
    cv::Mat fg;
    cv::erode(binary,fg,cv::Mat(),cv::Point(-1,-1),6);

    // Identify image pixels without objects
    cv::Mat bg;
    cv::dilate(binary,bg,cv::Mat(),cv::Point(-1,-1),6);
    cv::threshold(bg,bg,1,128,cv::THRESH_BINARY_INV);

    // Create markers image
    cv::Mat markers(binary.size(),CV_8U,cv::Scalar(0));
    markers= fg+bg;

    // Create watershed segmentation object
    WatershedSegmenter segmenter;
    // Set markers and process
    segmenter.setMarkers(markers);
    segmenter.process(image);

    imshow("a",image);
    std::cout<<".";
    cv::waitKey(0);
} 
```

但是，它不起作用。如何初始化二进制图像？我怎样才能使这个分段代码工作？

我对这本书的这一部分不是很清楚。提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T21:21:01.320

关于您的代码，有几件事需要提及：

*   Watershed 期望输入和输出图像具有相同的大小；
*   您可能想摆脱`const`方法中的参数；
*   请注意，分水岭的结果实际上`markers`并不`image`像您的代码所暗示的那样；关于这一点，你需要抢回`process()`！

这是您的代码，具有上述修复：

```
// Usage: ./app input.jpg
#include "opencv2/opencv.hpp"
#include <string>

using namespace cv;
using namespace std;

class WatershedSegmenter{
private:
    cv::Mat markers;
public:
    void setMarkers(cv::Mat& markerImage)
    {
        markerImage.convertTo(markers, CV_32S);
    }

    cv::Mat process(cv::Mat &image)
    {
        cv::watershed(image, markers);
        markers.convertTo(markers,CV_8U);
        return markers;
    }
};

int main(int argc, char* argv[])
{
    cv::Mat image = cv::imread(argv[1]);
    cv::Mat binary;// = cv::imread(argv[2], 0);
    cv::cvtColor(image, binary, CV_BGR2GRAY);
    cv::threshold(binary, binary, 100, 255, THRESH_BINARY);

    imshow("originalimage", image);
    imshow("originalbinary", binary);

    // Eliminate noise and smaller objects
    cv::Mat fg;
    cv::erode(binary,fg,cv::Mat(),cv::Point(-1,-1),2);
    imshow("fg", fg);

    // Identify image pixels without objects
    cv::Mat bg;
    cv::dilate(binary,bg,cv::Mat(),cv::Point(-1,-1),3);
    cv::threshold(bg,bg,1, 128,cv::THRESH_BINARY_INV);
    imshow("bg", bg);

    // Create markers image
    cv::Mat markers(binary.size(),CV_8U,cv::Scalar(0));
    markers= fg+bg;
    imshow("markers", markers);

    // Create watershed segmentation object
    WatershedSegmenter segmenter;
    segmenter.setMarkers(markers);

    cv::Mat result = segmenter.process(image);
    result.convertTo(result,CV_8U);
    imshow("final_result", result);

    cv::waitKey(0);

    return 0;
} 
```

我冒昧地使用 Abid 的输入图像进行测试，这就是我得到的：

![在此处输入图像描述](../Images/3e88eaa376469eba965ecaf151615177.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T17:58:33.700

以下是您的代码的简化版本，对我来说效果很好。看看这个 ：

```
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

using namespace cv;
using namespace std;

int main ()
{
    Mat image = imread("sofwatershed.jpg");
    Mat binary = imread("sofwsthresh.png",0);

    // Eliminate noise and smaller objects
    Mat fg;
    erode(binary,fg,Mat(),Point(-1,-1),2);

    // Identify image pixels without objects
    Mat bg;
    dilate(binary,bg,Mat(),Point(-1,-1),3);
    threshold(bg,bg,1,128,THRESH_BINARY_INV);

// Create markers image
    Mat markers(binary.size(),CV_8U,Scalar(0));
    markers= fg+bg;

markers.convertTo(markers, CV_32S);
watershed(image,markers);

markers.convertTo(markers,CV_8U);
imshow("a",markers);
waitKey(0);
} 
```

下面是我的输入图像：

![在此处输入图像描述](../Images/7b1054c56dec2cd41add1c909a4d40e8.png)

下面是我的输出图像：

![在此处输入图像描述](../Images/61ec07cfcc7d3d879a4316d6421910e9.png)

请参阅此处的代码说明：[OpenCV 中的简单分水岭示例](https://stackoverflow.com/questions/11294859/how-to-define-the-markers-for-watershed-in-opencv/11438165#11438165)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T13:24:31.453

我和你有同样的问题，遵循食谱的完全相同的代码示例（顺便说一句很棒的书）。

只是为了将我在 Visual Studio 2013 和 OpenCV 2.4.8 下编码的问题。经过大量搜索并且没有解决方案，我决定更改 IDE。

它仍然是 Visual Studio，但它是 2010 年！！！！繁荣它的工作原理！

注意如何使用 OpenCV 配置 Visual Studio。这是一个很棒的安装教程[here](http://opencv-srf.blogspot.fr/2013/05/installing-configuring-opencv-with-vs.html)

祝大家好日子

# mysql - MYSQL SELECT 2 计数相同的字段

> ID：11435981
> 
> 赞同：1
> 
> 时间：2012-07-11T15:22:45.567
> 
> 标签：mysql

想象一下这个数据库结构：

```
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`correct` tinyint(1) NOT NULL DEFAULT '0' 
```

我想在*一个*查询中获取所有条目的计数`correct = 1`，*以及*所有条目的计数。`correct = 0`

 *我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:25:05.980

使用 GROUP BY 应该可以解决问题：

```
SELECT correct, COUNT(*) FROM table GROUP BY correct; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:24:45.993

```
select count(case when correct = 0 then 1 end) as ZeroCount,
    count(case when correct = 1 then 1 end) as OneCount
from MyTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:30:47.543

如果您想要一行中的计数：

```
SELECT SUM(correct=0) as number_of_zeros,SUM(correct=1) as number_of_ones
FROM table; 
```

如果您希望它们在多行中：

```
SELECT correct,COUNT(*)
FROM table
GROUP BY correct; 
```*

# testing - 网络上是否有可以测试 apache conf 文件的 Web 应用程序？像 Apache 的 JSFiddle 这样的东西？

> ID：11435982
> 
> 赞同：1
> 
> 时间：2012-07-11T15:22:50.357
> 
> 标签：testing, web-applications, apache

我们中的许多人使用 jsfiddle.com 与其他人共享 DHTML 情况。您可以在测试时包含 JQuery 等插件。这非常方便，尤其是在发布到 stackoverflow.com 时。

我对 Apache httpd 的类似内容很感兴趣。它存在吗？

这是我正在考虑的图表。你可以想象你可以用它做的所有事情。

![Apache Conf 测试器应用程序](../Images/8bcce83cfca17d2dca0ce0b6e876c7fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:18:45.757

这在任何地方都不存在。我从两周前开始着手这个项目。

# php - 某些文件类型不使用 Zend.to 上传

> ID：11435983
> 
> 赞同：0
> 
> 时间：2012-07-11T15:22:57.907
> 
> 标签：php, mysql, zend-framework, file-upload, mime-types

我一直在大量编辑 Zend.to 以满足我的需要，并意识到当我上传某些文件格式（.docx、.xlsx、.pptx）时，文件不会写入数据库。我已经搜索了几个小时的代码来寻找这个问题的根源，并且相当确定这是由于这些文件的 mimeType，但我无法弄清楚是什么设置/文件导致了这个问题。我想我会在这里问是否有一些我可能遗漏的简单的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:40:57.047

问题是由于使用 fileinfo 扩展名的代码不喜欢该 xml 文档。我们创建了一个解决方法，其中所有上传的文件都是应用程序/八位字节流，而不是它们的相应文件。

在 .\lib\nssdropoff.php 的 4.08 版第 1537-1542 行中，我们强制所有文件类型为 application/octet-stream：

```
 if ( ! $this->_dropbox->database->DBAddFile1($dropoffID, $tmpname,
                         stripslashes($_FILES[$key]['name']),
                         $bytes,
                        "application/octet-stream",
                         stripslashes($_POST["desc_".$i])) ) { 
```

我们现在正在将我们的修复与 4.10 合并，并将在两周内将我们所有的修复（以及符合我们需求的定制样式）上传到 Zend.to 项目以供 Jules 审查。我们最大的问题是让整个设置在带有 php 的 IIS 和工作进度条上完美运行。

# ruby-on-rails - 不一致的 Timeout::timeout 和救援 Timeout::Error 行为

> ID：11435985
> 
> 赞同：0
> 
> 时间：2012-07-11T15:23:00.160
> 
> 标签：ruby-on-rails, timeout, rescue

我正在使用`Timeout::timeout(1)`一个需要超过 1 秒的过程，尽管它只是偶尔触发超时。当它发生时，`rescue`每次都以不同的方式捕获它。这是我的代码示例：

```
require 'timeout'
...
begin
  status = Timeout::timeout(1) {
    open(file_url) do |foo|
      feed = RSS::Parser.parse(foo)
      some_method_call(arg1, arg2)
      #other stuff
    end
  }
rescue Timeout::Error
  Rails.logger.debug "Timeout"
  return nil
rescue Exception => ex
  Rails.logger.debug "EXCEPTION - #{ex.message}"
  return nil
end 
```

以下是我在相同输入下遇到的三种情况：

*   流程运行完成，耗时超过 60 秒
*   `execution expired`进程超时并挂起，仅打印`development.log`
*   进程超时，被正确抢救，打印`"Timeout"`并`development.log`返回`nil`

为什么这如此不一致？

**更新**

将超时时间减少到 0.0001 秒后，该过程会始终如预期地超时。似乎该`open(file_url)`块的打开速度超过 1 秒，尽管该块内的所有内容都花费了超过 1 秒，但`Timeout`只有在打开本身花费的时间超过 1 秒时才会触发。

然而，这并没有解释`execution expired`异常。为了测试这一点，我将 移至块`Timeout::timeout(0.0001)`内。`open`代码如下所示：

```
require 'timeout'
...
begin
  open(file_url) do |foo|
    status = Timeout::timeout(0.0001) do
      begin
        feed = RSS::Parser.parse(foo)
        some_method_call(arg1, arg2)
        #other stuff
      rescue Timeout::Error
        Rails.logger.debug "Timeout 2"
      rescue Exception => ex
        Rails.logger.debug "EXCEPTION 2 - #{ex.message}"
      end
    end
  end
rescue Timeout::Error
  Rails.logger.debug "Timeout"
  return nil
rescue Exception => ex
  Rails.logger.debug "EXCEPTION - #{ex.message}"
  return nil
end 
```

现在，我一直在收到输出`EXCEPTION 2 - execution expired`。为什么`Timeout::Error`这里没有被触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:43:36.733

你的内心

```
rescue Exception => ex
  Rails.logger.debug "EXCEPTION 2 - #{ex.message}"
end 
```

防止外`timeout`块升起`Timeout::Error`。

删除该`rescue`语句应该可以解决问题。

如果您确实需要捕获任何异常，请将其替换为：

```
rescue StandardError => ex
  Rails.logger.debug "EXCEPTION 2 - #{ex.message}"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T04:31:43.640

在内部（在 Timeout 块内）Timeout 不使用 Timeout::Error。如果是这样，那么每个普通的救援都会抓住它，而你不希望这样。所以它创建了一个新的异常并使用它，这样它就有希望通过所有正常的错误处理并实际上使代码停止运行。

查看 ruby​​200/lib/ruby/2.0.0 中的 timeout.rb 代码。它很短，而且信息量很大。

特别是，您可以将自己的异常作为 Timeout::timeout 的第二个参数传入，Timeout 将使用它。因此，如果需要，您可以在代码中捕获它。

请注意，Logger 当前捕获写入时发生的所有异常，并且不会重新引发，因此它会中断 Timeout。我已经提交了错误报告。

# php - 有没有办法告诉 PHPStorm 隐藏方法/函数/变量/等

> ID：11435987
> 
> 赞同：6
> 
> 时间：2012-07-11T15:23:01.543
> 
> 标签：php, code-completion, phpstorm

我正在寻找一种使 PHPStorm 隐藏代码完成的一些方法的方法。我试图用注释来注释 DocBlocks，`@access private`但这并没有将它们隐藏起来。

有没有办法隐藏私有 API，没有编写/生成具有有限接口的存根文件并在我的项目中引用它？

例如：

可以说图书馆里面有这个：

```
<?php

interface IDoABunchOfStuff
{
    /**
     * My library users use this
     */
    public function doFoo();

    /**
     * My Library needs this but requires that my users don't see it.
     *
     * @access private
     * @visibility none
     * @package mylib
     * @internal
     */
    public function doBar();

}

class Foo extends Something implements IDoABunchOfStuff
{
    /**
     * does foo
     */
    public function doFoo()
    {
        // ...
    }

    /**
     * does bar. for internal use only
     *
     * @access private
     * @visibility none
     * @package mylib
     * @internal
     */
    public function _doBar()
    {
        // ...
    }
} 
```

我的图书馆用户正在输入：

```
<?php

myAwesomeFunction(IDoABunchOfStuff $aFoo)
{
    if($->$oFoo->[CTRL+SPACE] // invoking code completion... 
```

是否有可能（如果是我怎么做）让我的用户永远看不到`_doBar`？

我尝试过的不同注释似乎都没有达到预期的效果。

PS我正在使用PHPStorm 4.0.3

额外的：

在这种情况下，我正在实现 ArrayAccess，我不希望 offsetGet、offsetSet、offsetExists 和 offsetUnset 弄乱我的代码完成窗口，但我在其他地方也遇到过类似的问题，足以保证提出一个更笼统的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:26:15.583

不——你不能在当前版本的 PhpStorm 中做这样的事情。

问题跟踪器上有一张票建议`@access`为此目的使用标签，但目前没有计划为任何特定版本实施：http: [//youtrack.jetbrains.com/issue/WI-5788](http://youtrack.jetbrains.com/issue/WI-5788)

随意投票/评论/等，也许它会尽快实施。

# macos - 在 Quicklook 预览中显示地图

> ID：11435988
> 
> 赞同：1
> 
> 时间：2012-07-11T15:23:05.420
> 
> 标签：macos, google-maps, quicklook

我正在为 GPS 记录文件格式（`.fit`文件）编写 Quicklook 生成器插件。我把一些东西放在一起，加载文件并使用`NSGraphics`/`NSBezier`东西绘制路径：

![路径图](../Images/eeddfe7e1b1efa0bdc91255a28ba9627.png)

（上面的可怕代码[可以在这里找到](https://github.com/dbr/QLfit/blob/57f493b3c4fa2f5ab88a760570e507f3fab42941/QLFit/GeneratePreviewForURL.m)）

这很好，但是在谷歌地图数据或类似数据上显示它会更好（记录的轨道覆盖相当小的距离 - 例如，上面覆盖了大约 20 公里乘 10 公里 - 太小而无法显示在单一的地球地图上，所以地图需要以某种方式动态加载）

到目前为止我尝试过的事情：

1.  返回显示 Javascript GMap 实例的 HTML。不起作用，因为 Quicklook HTML 渲染不允许使用 Javascript（或 Flash、Java 等）
2.  返回包含静态 Google 地图图像的 HTML。Quicklook 不会加载远程图像。
3.  获取一个 NSGraphicsContext 并在其中显示一个标准的 WebKitView，[从一些缩略图代码](https://github.com/fousa/thong/blob/e9bf8c028980d4ef9dee7fa33ae05c2299b5a8f5/thong/GenerateThumbnailForURL.m#L17)修改- 这个错误是因为您无法从辅助线程初始化 WebKit（这似乎适用于缩略图，但不适用于预览？）

我可以在`2.`ObjC 中下载静态谷歌地图图像，然后用 HTML 显示，但静态地图并不理想（固定大小，因此没有缩放，并且最初加载可能很慢）

我遇到了我还没有尝试过的[MacMapKit](https://github.com/Oomph/MacMapKit)，但由于它是基于 WebKit 的，我怀疑它会遇到与`3.`

是否有某种方法可以在我忽略的 Quicklook 中显示地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T22:03:32.607

*   尝试直接在您的生成器中获取 Google 数据（无论您尝试以何种方式）是不可能的，因为您的插件主机已被沙盒化并拒绝与网络的任何连接

*   尝试返回 HTML 数据和一些聪明的 javascript 也不起作用，因为快速查看面板也出于安全原因防止网络访问，并且没有公开的方法来解决这个问题

恐怕您找不到真正解决问题的方法，除非使用您自己的地图数据。

不过，您的用例很有趣，您应该向[Apple 的错误报告网站提交错误](http://bugreport.apple.com/)。

# magento - magento 将所见即所得块添加到 cms 页面

> ID：11435999
> 
> 赞同：0
> 
> 时间：2012-07-11T15:23:43.757
> 
> 标签：magento, content-management-system, wysiwyg, adminhtml, static-block

使用 Magento，我需要在我的网站上向我的客户提供公开使用的所见即所得编辑器，以简单地生成 html 代码供他们复制和粘贴。我的想法是将静态块添加到 cms 页面......该块是所见即所得的编辑器。任何人都知道是否可以在 Magento 中为所见即所得编辑器设置静态块？如果是这样，请详细说明这是如何完成的。如果您想了解我为什么需要这个的更多信息，请问我会详细介绍，但我希望讨论如何实现这一点，而不是讨论我为什么需要这样做。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:04:07.463

通过跳出框框思考来解决这个问题。

刚刚在 CMS 页面上使用了[NicEdit](http://nicedit.com/)，效果很好……完全符合我的需要。