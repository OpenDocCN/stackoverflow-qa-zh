# StackOverflow 问答 000823000-000823999

# ruby-on-rails - 有时您可能需要重新启动 Webrick 才能看到您的更改，这是否正确？

> ID：823001
> 
> 赞同：3
> 
> 时间：2009-05-05T02:12:30.400
> 
> 标签：ruby-on-rails, development-environment, restart, webrick

我听 Kevin Skoglund (lynda.com) 说，在开发过程中养成经常重启 Webrick 的习惯是一种很好的做法。尽管通常您不需要重新启动 Webrick 即可查看您的更改，但他暗示在某些特定时间可能需要这样做？有谁知道这些情况可能是什么？这让人怀疑 Webrick 是否有点不稳定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T02:21:42.390

如果您正在学习 Lynda.com 教程，那么您正在使用的 Rails 版本比最新版本 (2.3.2) 更早。

简短的回答是，在开发环境中工作时不再需要大量重启。我认为 Kevin 每次更改 Model 对象时都会让您重新启动服务器，但现在情况不再如此。

一般的经验法则是：每次更改 config 或 lib 文件夹中的内容时重新启动。. . 任何其他代码更改都不需要重新启动。当您更改您的 routes.rb 文件时重新启动也是一个好主意，尽管今天使用它时我注意到这不是一个硬性规定。

所有服务器重新启动的原因不一定是因为您的网络服务器（webrick、mongrel、phusion 乘客）不稳定，而是因为当您的 Rails 应用程序启动时，某些内容会加载到内存、加载路径、初始化程序、环境中数据。当您对这些文件之一进行更改时，您希望重新启动应用程序以便进行更改（与仍在内存中运行的旧东西相反）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:19:28.807

如果您更改数据库架构或添加/更改常量，则需要重新启动。

我认为 Rails 现在默认使用 Mongrel 进行开发，但这些仍然适用。

# c++ - 让 C++ 类像自定义 ostream、sstream

> ID：823003
> 
> 赞同：7
> 
> 时间：2009-05-05T02:12:58.277
> 
> 标签：c++, operator-overloading, ostream, sstream

我有一个 C++ 类`MyObject`，我希望能够像向 osstream 一样提供这些数据（但与直接 sstream 不同，传入数据以特殊方式格式化）。我似乎无法弄清楚如何为 MyObject 重载运算符以吃给它的输入。

```
class MyObject {
public:
    ostringstream s;
    FEEDME
};

int main() {
     MyObject obj;
     obj.FEEDME << "Hello" << 12345;

     // I want obj.s == ":Hello::12345:"

} 
```

我想要它，这样每一个送入的物品都被: : 包围

所以在给定的例子中，s = ":Hello::12345" 应该是最终结果。我的问题是，我怎样才能告诉对象，当有 a 时`<<something`，将 :: 放在某物周围。

这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T02:16:51.280

试试这个：

```
class MyObject {
public:
    template <class T>
    MyObject &operator<<(const T &x) {
        s << ':' << x << ':';
        return *this;
    }

    std::string to_string() const { return s.str(); }

private:
    std::ostringstream s;
};

MyObject obj;
obj << "Hello" << 12345;
std::cout << obj.to_string() << std::endl; 
```

有些东西你不能推到流中，但它应该适用于所有基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T02:15:37.227

您可能会找到[如何创建自己的 ostream/streambuf 的答案？](https://stackoverflow.com/questions/524641/how-do-i-create-an-ostream-streambuf)有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T04:38:17.290

我会采取稍微不同的方法并创建一个格式化程序对象。
然后，当将格式字符应用于流时，格式化程序对象将处理格式字符的插入。

```
#include <iostream>

template<typename T>
class Format
{
    public:
        Format(T const& d):m_data(d)    {}
    private:
        template<typename Y>
        friend std::ostream& operator<<(std::ostream& str,Format<Y> const& data);
        T const&    m_data;
};
template<typename T>
Format<T> make_Format(T const& data)    {return Format<T>(data);}

template<typename T>
std::ostream& operator<<(std::ostream& str,Format<T> const& data)
{
    str << ":" << data.m_data << ":";
}

int main()
{
    std::cout << make_Format("Hello") << make_Format(123);
} 
```

# c# - 在 Where 子句中的 Linq Intersect(...).Any() 抛出 NotSupportedException

> ID：823007
> 
> 赞同：2
> 
> 时间：2009-05-05T02:13:52.143
> 
> 标签：c#, linq-to-sql, asp.net-ajax

每当*tags*参数不为空时，我都会收到 NotSupportedException: Local sequence cannot be used in LINQ to SQL implementation of query operators，但 Contains() 运算符除外。

```
[WebMethod]
public static object GetAnswersForSurvey(string surveyName, int? surveyYear, IEnumerable<string> tags, IEnumerable<string> benchmarks)
{
    IQueryable<DAL.Answer> results = new DataClassesDataContext().Answers
                                            .OrderBy(a => a.Question.Variable);

    if (!String.IsNullOrEmpty(surveyName)) results = results.Where(a => a.Survey.Name == surveyName);
    if (surveyYear.HasValue) results = results.Where(a => a.Survey.Year == surveyYear.Value);
    if (tags.Any()) results = results.Where(answer => answer.Question.Tags.Select(t => t.Label).Intersect(tags).Any());
    if (benchmarks.Any()) results = results.Where(answer => benchmarks.Contains(answer.Question.BenchmarkCode));

    return results.Select(a => new {
        a.Question.Wording,
        a.Demographic,
        Benchmark = a.Question.BenchmarkCode,
        a.Question.Scale,
        a.Mean,
        a.MEPMean,
        a.NSSEMean
    });
} 
```

我知道按照我尝试的方式可能无法做到这一点。如果不可能，任何人都可以提供任何替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T02:26:50.430

Linq to SQL 不支持许多通用的 Linq to Object 方法。

[http://msdn.microsoft.com/en-us/library/bb399342.aspx](http://msdn.microsoft.com/en-us/library/bb399342.aspx)

另一种方法可能是针对 sql 完成几个子查询，然后将交集操作作为 Linq to Objects 执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:29:05.853

I think the reason is that the implementation of System.Data.Linq.Table.Intersect returns an IEnumerable, which in turn does not implement a parameterless version of Any().

# c# - 您如何确定修改文件的最后一个过程？

> ID：823012
> 
> 赞同：3
> 
> 时间：2009-05-05T02:16:12.450
> 
> 标签：c#, .net, windows, winapi

我知道如何获取最后修改文件的用户，但 Windows 是否也跟踪进行修改的过程？如果是这样，是否有用于查找的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T02:21:34.450

不，没有记录。

您可以在特定文件夹上启用对象访问审核（我不建议在通用文件系统上使用）。看到这篇[文章](http://blogs.msdn.com/ericfitz/archive/2006/03/07/545726.aspx)并谨慎使用！

您也许可以使用 .NET 的[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:21:53.200

Windows 不会跟踪修改文件的进程。您最好的希望是积极观看您感兴趣的文件，并在应用程序打开它们时记录下来。我见过执行此操作的应用程序（例如 Sysinternals FileMon），但不知道如何完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T02:24:04.960

如果您想确定在程序运行期间修改文件的进程，您可以使用 Windows API 或微过滤器驱动程序来跟踪系统上的每个进程在做什么（类似于使用带有自定义过滤器的 Sysinternals FileMon，如Boo 指出），但这仅适用于“捕获”程序的运行时。然而，一旦文件被修改，所有的痕迹都消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T02:30:37.360

您可以使用 Windows[安全审核](http://blogs.msdn.com/ericfitz/archive/2006/10/26/how-are-object-access-events-generated.aspx)来记录对文件的访问吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-21T05:05:58.033

您可以使用[https://live.sysinternals.com/procmon.exe](https://live.sysinternals.com/procmon.exe)中的 procmon.exe 这是一个实时监视器，因此回顾性使用不多。

1.  取消选择（取消选中）“文件|捕获事件”菜单项。
2.  通过选择“编辑|清除显示”菜单项清除当前显示的事件。
3.  通过以下方式配置过滤器：

    一种。选择过程监视器“过滤器|过滤器...”菜单项。这将显示“Process Monitor Filter”对话框。

    湾。通过设置“显示符合这些条件的条目”字段来设置新过滤器：

    C。(pick)Path (pick) 包含`whatever.txt`然后 (pick)Include

    d。单击“添加”按钮以添加新过滤器。

源自此处的说明：http: [//answers.perforce.com/articles/KB/3035](http://answers.perforce.com/articles/KB/3035)

# c++ - 64 位错误？

> ID：823015
> 
> 赞同：2
> 
> 时间：2009-05-05T02:17:24.430
> 
> 标签：c++, linux, time.h

重定位被截断以适应：R_X86_64_PC32 针对 `.bss'

编译时我在 g++ 中收到此链接器错误：

其余的代码并不重要，因为这个定义破坏了我的编译。时间函数在 sys/time.h 中。在 64 位 RHEL 上编译。

```
 long ntime() {

     struct timeval tp;

     gettimeofday(&tp, (struct timezone *)0);
     return (tp.tv_sec*1000 + tp.tv_usec / 1000);
 } 
```

告诉我为什么这是错误的？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T02:20:43.797

不知道为什么会发生链接器错误，但是是否有任何特殊原因使 struct timeval 静态？使其本地化同样快，并使您的函数线程安全，同时节省堆（嗯，bss）空间。

编辑：这是问题所在。您的静态堆空间已超过 2GB。进行一些动态分配，或更改内存模型。在 gcc 中，这可以通过传递 -mcmodel=medium 来完成，并且必须用于所有目标文件。然而，这可能会增加一些开销。

# c# - 我可以将 System.Core.dll (.net 3.5) 的引用添加到 .net 2.0 应用程序并使用它吗

> ID：823024
> 
> 赞同：8
> 
> 时间：2009-05-05T02:22:44.433
> 
> 标签：c#, time, timezone

我可以将 System.Core.dll (.net 3.5) 的引用添加到 .net 2.0 应用程序并使用它吗

我正在尝试通过引用 System.Core.dll 来使用仅在 .net 3.5 中可用的 TimeZoneInfo 类

或者，它们是 .net 2.0 中 TimeZoneInfo 的替代品（或自定义类）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-05T02:27:14.110

不，你*真的不应该*。您**必须**在目标机器上安装 3.5，否则您将在正在运行的程序中遇到不可预知的行为。包括 System.Core.dll 的 3.5 框架依赖于添加到 CLR 2.0 SP1（这是 3.5 框架的一部分）的几个错误修复/功能。如果您针对未打补丁的 CLR 运行，您实际上将运行未经测试的代码，并且可能会遇到几个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T02:34:24.840

Scott Hanselman[写了一篇博客文章，描述](http://www.hanselman.com/blog/DeployingASPNETMVCOnASPNET20.aspx)了如何在 2.0 框架上运行早期版本的 MVC。他指出，只要您非常小心不要调用任何依赖于 3.0+ 特定的 CLR 功能的例程（例如，LINQtoSQL），对 System.Core 的依赖关系*可能是可以的。*

他**正确地**在博客文章上贴上了**不**支持的免责声明，它很可能对你不起作用，但他让它起作用了，如果你可以，那就为你好了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T02:30:44.023

我不确定您是否可以使用 System.Core.dll 执行此操作，但我们之前已经使用用于 .net 2.0 应用程序的 Linq2Sql dll 执行此操作。.net 3.5 使用相同版本的 CLR 以及基于 .net 2.0 运行时构建的新程序集。如果您可以获得所有依赖项，它**可能会**起作用。正如我所说，这对我们使用 Linq2Sql dll 有效，但不能保证适用于所有场景。（例如，您可能无法让 WPF 在 Windows 2000 上运行，但您可能可以让 Linq to Objects 工作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-18T10:19:02.597

您可以这样做，目前为工作工具做同样的事情 - 也可以利用 TimeZoneInfo 的东西。只要这就是你所使用的一切，你就不应该遇到任何问题（至少我没有）。

但是，我并不完全确定将 System.Core 与您的应用程序捆绑在一起的合法性。据我所知，你是不允许的。

我最终将 Mono 中的那个用于使用它的工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T02:48:50.750

.net 3.5 在 .net 2.0 运行时上运行。所以你应该可以使用它......但是引用单个 dll 会导致意外行为，因为你不知道 system.core.dll 的所有依赖项......我建议不要这样做......

# python - 优雅的 Pythonic 解决方案，用于在 Unicode 字符串的嵌套字典中强制所有键和值小写？

> ID：823030
> 
> 赞同：4
> 
> 时间：2009-05-05T02:25:32.960
> 
> 标签：python

我很好奇这里的 Python Ninjas 将如何优雅地和 Python 地执行以下操作：

我有一个数据结构，它是一个从 unicode 字符串到从 unicode 字符串到 unicode 字符串列表的字典。所以：

```
>>> type(myDict)
<type 'dict'>
>>> type(myDict[u'myKey'])
<type 'dict'>
>>> type(myDict[u'myKey'][u'myKey2'])
<type 'list'>
>>> type(myDict[u'myKey'][u'myKey2'][0])
<type 'unicode'> 
```

我想通过并将其中的每个字符串设为小写，即每个列表中的每个键和每个字符串。

你会怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-05T02:39:37.997

非常简单的方法，虽然我不确定你会称之为 Pythonic：

```
newDict = eval(repr(myDict).lower()) 
```

更理智的方式：

```
newDict = dict((k1.lower(),
                dict((k2.lower(),
                      [s.lower() for s in v2]) for k2, v2 in v1.iteritems()))
               for k1, v1 in myDict.iteritems()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T02:37:34.660

递归变体：

```
def make_lowercase(obj):
    if hasattr(obj,'iteritems'):
        # dictionary
        ret = {}
        for k,v in obj.iteritems():
            ret[make_lowercase(k)] = make_lowercase(v)
        return ret
    elif isinstance(obj,basestring):
        # string
        return obj.lower()
    elif hasattr(obj,'__iter__'):
        # list (or the like)
        ret = []
        for item in obj:
            ret.append(make_lowercase(item))
        return ret
    else:
        # anything else
        return obj 
```

例子：

```
>>> make_lowercase({'Foo': [{1: 'Baz', 'Bar': 2}]})
{'foo': [{1: 'baz', 'bar': 2}]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T02:31:44.567

以下适用于您的示例输入：

```
>>> myDict = {'myKey': {'myKey2': [u'Abc']}}
>>> newDict = dict([
        (k1.lower(), dict([
            (k2.lower(), [x.lower() for x in myDict[k1][k2]])
                for k2 in myDict[k1].keys()
        ])) for k1 in myDict.keys()
    ])
>>> newDict
{'mykey': {'mykey2': [u'abc']}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T02:40:48.163

如果您不介意修改输入：

```
def make_lower(x):
    try:
        return x.lower()    # x is a string
    except AttributeError:
        # assume x is a dict of the appropriate form
        for key in x.keys():
            x[key.lower()] = make_lower(x[key])
            if key != key.lower():
                del x[key]

    return x

make_lower(myDict) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T14:49:47.047

我很晚才回答这个问题 - 因为这个问题被标记了`Python`。因此，回答 和 的解决方案`Python 2.x`，`Python 3.x`并处理非字符串键的情况，即在数字键的情况下，已接受答案中的解决方案将失败。

**Python 2.x** - 使用字典理解

```
{k.lower() if isinstance(k, basestring) else k: v.lower() if isinstance(v, basestring) else v for k,v in yourDict.iteritems()} 
```

**演示**：

```
>>> yourDict = {"Domain":"WORKGROUP", "Name": "CA-LTP-JOHN", 111: 'OK', "Is_ADServer": 0, "Is_ConnectionBroker": 0, "Domain_Pingable": 0}
>>> {k.lower() if isinstance(k, basestring) else k: v.lower() if isinstance(v, basestring) else v for k,v in yourDict.iteritems()}
{'domain': 'workgroup', 'name': 'ca-ltp-john', 'is_adserver': 0, 'is_connectionbroker': 0, 111: 'ok', 'domain_pingable': 0} 
```

* * *

**Python 3.x**

```
{k.lower() if isinstance(k, str) else k: v.lower() if isinstance(v, str) else v for k,v in yourDict.items()} 
```

**演示**：

```
>>> dict((k.lower() if isinstance(k, basestring) else k, v.lower() if isinstance(v, basestring) else v) for k,v in yourDict.iteritems())
Traceback (most recent call last):
  File "python", line 1, in <module>
AttributeError: 'dict' object has no attribute 'iteritems'
>>> {k.lower() if isinstance(k, str) else k: v.lower() if isinstance(v, str) else v for k,v in yourDict.items()}
>>> {'domain': 'workgroup', 'name': 'ca-ltp-john', 111: 'ok', 'is_adserver': 0, 'is_connectionbroker': 0, 'domain_pingable': 0} 
```

# linux - 如何删除文件“--remove-files”？

> ID：823045
> 
> 赞同：2
> 
> 时间：2009-05-05T02:29:16.477
> 
> 标签：linux

我测试过：

> rm \-\-删除文件

但我无法删除它。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T02:31:42.243

`rm ./--remove-files`.

请注意，`--`shell 不会解释它，并且通过扩展，将其转义`\`将无效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T02:30:17.440

rm -- -- 删除文件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T02:31:24.397

```
$ ls -lah -- --remove-files 
-rw-r--r--  1 xistence  xistence     0B May  4 19:29 --remove-files
$ rm -- --remove-files 
$ ls -lah -- --remove-files 
ls: --remove-files: No such file or directory 
```

所以你想要的是使用 -- 作为 rm 的参数之一，这意味着它停止处理 getopt 的，之后任何东西都按字面意思理解：

```
rm -- --remove-files 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T02:32:10.570

解决方案是：

> rm -- -- 删除文件

**资料来源：** [http ://www.cyberciti.biz/faq/unix-linux-remove-strange-names-files/](http://www.cyberciti.biz/faq/unix-linux-remove-strange-names-files/)

# mysql - mysql查询浏览器编辑按钮被禁用

> ID：823059
> 
> 赞同：0
> 
> 时间：2009-05-05T02:31:57.997
> 
> 标签：mysql, sql

有人遇到过这个问题吗？我在表编辑器中删除了一列，然后返回 MySql 查询浏览器，但编辑按钮被禁用。似乎无法弄清楚，我讨厌 MySql 的论坛格式，所以我决定在这里问。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T02:33:40.647

啊，我想我知道为什么了……

我删除了主键..

[http://forums.mysql.com/read.php?108,15476,82111](http://forums.mysql.com/read.php?108,15476,82111)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:29:58.510

我遇到了这个问题，尽管我在表中有一个主键。我花了很长时间才弄清楚问题出在表的名称上！它是“joinclub_requests”。显然，如果名称以“join”开头，则查询浏览器会认为它是一个连接表并禁用编辑按钮。

# windows - Active Directory - 用于查找不在一组组中的所有用户的脚本？

> ID：823069
> 
> 赞同：1
> 
> 时间：2009-05-05T02:35:14.200
> 
> 标签：windows, scripting, active-directory

我有一组 10 个 AD 组。我想要以编程方式找出 AD 域中的哪些用户不是这 10 个组的成员。只有一个域。我知道可以在 vbscript 中执行 ADO SQL 查询，但我想知道（希望，祈祷）是否有人有固定脚本？

我想一个hacky方式可能是：

1.  转储 10 个组中的所有用户
2.  转储域中的所有用户
3.  在 2 个转储上运行一个风的

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T05:39:02.860

对于任何感兴趣的人，这都有效：

```
(&(objectCategory=Person)
    (&
        (!memberOf=CN=group1,dc=company,dc=local)
        (!memberOf=CN=group2,dc=company,dc=local)
        (!memberOf=CN=group3,dc=company,dc=local)
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:22:06.490

System.DirectoryServices 提供了编写 LDAP 查询的能力。像这样： (&(objectclass=User)(!memberof=cn=group1,...)(!memberof=cn=group2,...)(!memberof=cn=group3,...))

我相信每个条件成员都必须明确说明。

我只是快速回答，所以我没有 100% 的代码给你看。

# php - 如何在 PHP 中将此 MPTT 数组转换为树结构？

> ID：823071
> 
> 赞同：4
> 
> 时间：2009-05-05T02:36:50.623
> 
> 标签：php, arrays, tree, mptt

我在数据库中有分层数据，以[修改的预序树遍历](http://www.sitepoint.com/article/hierarchical-data-database/)格式存储。我在一个看起来像“SELECT ID, `Left`, `Right`, Name, etc FROM Table ORDER BY `Left`;”的查询中提取数据。我正在尝试将此数据从 DB 提供给我的平面数组转换为树结构，然后我将使用 PHP 的 json_encode 函数将其输出为 JSON。

不过，我无法让我的树结构代码在第一级之外工作。这是一个最小的测试用例：

```
<pre><?php

function projectListToTree($projects) {
    $stack = Array();
    for($x =0; $x < count($projects); $x++) {
        $project = $projects[$x];
        $project['Children'] = Array();

        while(count($stack) > 0 && $stack[count($stack) - 1]['Right'] < $project['Right']) {
            array_pop($stack);
        }

        if(count($stack) > 0) {
            $stack[count($stack) - 1]['Children'][] = $project; 
            echo "Adding " . $project['Name'] . " to " . $stack[count($stack) - 1]['Name'] . " for a total of "
                . count($stack[count($stack) - 1]['Children']) . " kids\n";
        } else {
            echo "No parent\n"; 
        }

        echo "stack count: " . count($stack) . "\n";

        array_push($stack, $project);
    }

    echo "Left in stack: " . count($stack) . "\n";

    return $stack[0];
}

/*
This is basically what comes from the DB.
Should be:
  Parent
    First Child
    Second Child
      Grand Child
*/
$projects = Array(
    Array(
        "ID" => "2",
        "Left" => "2",
        "Right" => "9",
        "ParentID" => "1",
        "Name" => "Parent"
    ),
    Array(
        "ID" => "3",
        "Left" => "3",
        "Right" => "4",
        "ParentID" => "2",
        "Name" => "First Child"
    ),
    Array(
        "ID" => "4",
        "Left" => "5",
        "Right" => "8",
        "ParentID" => "2",
        "Name" => "Second Child"
    ),
    Array(
        "ID" => "5",
        "Left" => "6",
        "Right" => "7",
        "ParentID" => "4",
        "Name" => "Grand Child"
    )
);

$tree = projectListToTree($projects);
echo "-----\n\n\n\n";
var_dump($tree);

?></pre> 
```

这就是我得到的输出：

```
No parent
stack count: 0
Adding First Child to Parent for a total of 1 kids
stack count: 1
Adding Second Child to Parent for a total of 2 kids
stack count: 1
Adding Grand Child to Second Child for a total of 1 kids
stack count: 2
Left in stack: 3
-----

array(6) {
  ["ID"]=>
  string(1) "2"
  ["Left"]=>
  string(1) "2"
  ["Right"]=>
  string(1) "9"
  ["ParentID"]=>
  string(1) "1"
  ["Name"]=>
  string(6) "Parent"
  ["Children"]=>
  array(2) {
    [0]=>
    array(6) {
      ["ID"]=>
      string(1) "3"
      ["Left"]=>
      string(1) "3"
      ["Right"]=>
      string(1) "4"
      ["ParentID"]=>
      string(1) "2"
      ["Name"]=>
      string(11) "First Child"
      ["Children"]=>
      array(0) {
      }
    }
    [1]=>
    array(6) {
      ["ID"]=>
      string(1) "4"
      ["Left"]=>
      string(1) "5"
      ["Right"]=>
      string(1) "8"
      ["ParentID"]=>
      string(1) "2"
      ["Name"]=>
      string(12) "Second Child"
      ["Children"]=>
      array(0) {
      }
    }
  }
} 
```

如您所见，“Grandchild”在某个地方迷路了，尽管 projectListToTree 函数中的输出似乎表明它应该在那里。似乎我扔给它的任何树结构都会将任何东西都放在第二层以下。对可能发生的事情有任何见解吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T03:19:31.270

问题是分配数组不会复制引用，而是复制数组。这意味着，您在“父”节点的“子”中拥有的“第二个子”数组与您将“孙子”添加到的数组不同，而是它的副本。

要解决此问题，您必须显式使用引用分配而不是复制：

```
function projectListToTree($projects) {
    $stack = Array();
    for($x =0; $x < count($projects); $x++) {
        $project = &$projects[$x];
        $project['Children'] = array();

        while(count($stack) > 0 && $stack[count($stack) - 1]['Right'] < $project['Right']) {
                array_pop($stack);
        }

        if(count($stack) > 0) {
                $stack[count($stack) - 1]['Children'][] = &$project; 

                echo "Adding " . $project['Name'] . " to " . $stack[count($stack) - 1]['Name'] . " for a total of "
                        . count($stack[count($stack) - 1]['Children']) . " kids\n";

                echo "\n";
        } else {
                echo "No parent\n"; 
        }

        echo "stack count: " . count($stack) . "\n";

        $stack[] = &$project;
    }

    echo "Left in stack: " . count($stack) . "\n";

    return $stack[0];
} 
```

请注意，在三个位置添加了一个 & 符号。

由于这个问题，在 php.ini 中使用嵌套数组和赋值运算符时必须非常小心。

这也意味着在嵌套数组中使用大量数据时，处理器的使用和内存占用会很密集。例如，在上面的例子中，当 projectListToTree() 返回时，完整的数组树被复制到局部变量 $tree 并且（因为 php 垃圾收集器很烂）在内存中两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T03:19:40.520

您是否在调用 array_pop() 时添加了 echo 语句？从未经测试的情况下阅读本文，我认为您正在将记录从堆栈中弹出并扔掉。

# java - java 可以使用 ASP.NET Web 服务返回的 .NET 对象吗？

> ID：823073
> 
> 赞同：2
> 
> 时间：2009-05-05T02:37:44.223
> 
> 标签：java, asp.net, web-services

我有一个返回自定义实体对象（员工）的 ASP.NET Web 服务：

```
[WebMethod]
public Staff GetStaffByLoginID(string loginID){} 
```

我将如何在 Java 中使用它？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T02:45:35.873

ASP.NET 自动生成一个 WSDL，其中包含 Web 方法的接口定义以及它们使用/返回的类型。

Apache Axis 提供了一个名为[WSDL2Java](http://ws.apache.org/axis/java/user-guide.html#WSDL2JavaBuildingStubsSkeletonsAndDataTypesFromWSDL)的工具，它将生成使用 Web 服务所需的所有代码。只需将其指向：

[http://yoursite.com/YourWebService.asmx?WSDL](http://yoursite.com/YourWebService.asmx?WSDL)

如果您直接浏览到 .ASMX 文件，您将获得一个很好的测试工具，您可以使用它来探索可以调用的各种方法。

一旦 Axis 读取了您的 WSDL，它将生成一些代理类，其中之一将基于 Staff 的接口。

但是，我不会将此类用作您的实际业务对象，而是通过服务层包装对 Web 服务的访问。该服务层将使用代理 Staff 类来填充您的真实业务对象。

这可以保护您的使用代码免受将来 Web 服务可能发生的任何接口更改的影响，从而使要修改的实际代码区域尽可能小。

我这样做是为了谋生，在许多使用 SOAP 的平台上在 Java 和 .NET 之间进行互操作。

编辑：为什么这被否决了？这是这里唯一正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:42:19.457

如果您使用传统的 asmx Web 服务，只需使用 flyswat 提到的标准 WSDL。

如果不使用标准 ASP.NET Web 服务，其他解决方案：

使用 REST

[http://www.infoq.com/articles/REST-INTEROP](http://www.infoq.com/articles/REST-INTEROP)

[http://www.codeproject.com/KB/XML/WSfromJava.aspx](http://www.codeproject.com/KB/XML/WSfromJava.aspx)

确保对象是可序列化的，并且只要您可以将其转换为 Java 端的类似类，就可以了。否则，您可能必须用 Java 编写一些自定义类映射器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-05T02:43:13.523

您可以通过在[IKVM](http://www.ikvm.net/)上运行 Java 来做到这一点。

# iphone - 使用 iPhone SDK 创建“正在加载...”视图

> ID：823080
> 
> 赞同：13
> 
> 时间：2009-05-05T02:41:07.447
> 
> 标签：iphone, cocoa-touch

当一些长时间挂起的操作正在进行时，如何创建许多应用程序使用的黑色/灰色模式弹出视图？

就像使用基于位置的服务、加载网页时一样，屏幕变暗并且有一个模式视图显示一个旋转图标“请稍候...”

以下屏幕截图中的示例：

![截屏](https://farm4.staticflickr.com/3379/3503268688_0064567134_m.jpg)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-05T03:30:21.603

这实际上是未记录的（无论如何在 2.2.1 中）UIProgressHUD。像这样创建一个：

在您的 .h 中：

```
@interface UIProgressHUD : NSObject 
- (UIProgressHUD *) initWithWindow: (UIView*)aWindow; 
- (void) show: (BOOL)aShow; 
- (void) setText: (NSString*)aText; 
@end 
```

在您的 .m 中：

```
- (void) killHUD: (id)aHUD 
{ 
[aHUD show:NO]; 
[aHUD release]; 
} 

- (void) presentSheet 
{ 
id HUD = [[UIProgressHUD alloc] initWithWindow:[contentView superview]]; 
[HUD setText:@"Doing something slow. Please wait."]; 
[HUD show:YES]; 
[self performSelector:@selector(killHUD:) withObject:HUD afterDelay:5.0]; 
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-08-12T13:22:33.973

如果您想避免未记录的 api，您还可以查看[MBProgressHUD](http://github.com/matej/MBProgressHUD)。它类似于 UIProgressHUD，甚至还有一些附加功能。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-19T09:04:26.830

我认为最简单（几行代码）、完整记录和最漂亮的方法是将 UIAlertView 与 UIActivityIndi​​catorView 一起使用：

[http://iosdevelopertips.com/user-interface/uialertview-without-buttons-please-wait-dialog.html](http://iosdevelopertips.com/user-interface/uialertview-without-buttons-please-wait-dialog.html)

[![UIAlertView 与 UIActivityIndi​​catorView](https://i.stack.imgur.com/cqnPi.png)](https://i.stack.imgur.com/cqnPi.png)
[（来源：[iosdevelopertips.com](http://iosdevelopertips.com/wp-content/uploads/2010/02/alert3-204x300.png)）]

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-05T08:07:15.227

如果您将 UIView 添加为主窗口的子视图，它将覆盖整个 UI。使其部分透明和部分半透明，它看起来像一个弹出窗口。

这个例子展示了如何[淡化 Default.png 初始屏幕](http://michael.burford.net/2008/11/fading-defaultpng-when-iphone-app.html)，首先向应用程序委托（具有指向主窗口的指针）添加几个方法来呈现和关闭进度视图非常简单。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-05T17:29:07.687

查看 Wordpress iPhone 应用程序 ( [http://iphone.wordpress.org/](http://iphone.wordpress.org/) )，了解如何在不使用任何未记录 API 的情况下执行此操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-11-28T12:15:10.747

我为此目的使用**LoadingHUDView**，它始终有效。

获取[LoadingHUDView.m](http://yonseiwonjuapp.googlecode.com/svn/trunk/YonseiWonjuApp/Classes/LoadingHUDView.m)和[LoadingHUDView.h](http://yonseiwonjuapp.googlecode.com/svn/trunk/YonseiWonjuApp/Classes/LoadingHUDView.h)并在您的基类（或其他）中执行以下操作

```
#pragma mark ActivityIndicator Methods

-(void) showModalActivityIndicator:(NSString *)message 
{
        loadingView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]retain];//  origional
        //loadingView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]; //testing
        loadingView.backgroundColor = [UIColor grayColor]; //[UIColor colorWithRed:1 green:1 blue:1 alpha:0.3];
        LoadingHUDView *loadHud = [[LoadingHUDView alloc] initWithTitle:message];
        loadHud.center = CGPointMake(160, 290);
        [loadingView addSubview:loadHud];
        [loadHud startAnimating];
        [loadHud release];
        [loadingView setAlpha:0.0];
          [self.tableView addSubview:loadingView];
        [UIView beginAnimations:@"fadeOutSync" context:NULL];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationDuration:0.5];
        [loadingView setAlpha:0.5];
        [UIView commitAnimations];
}

-(void) hideModalActivityIndicator {
    if (loadingView) {
    [UIView beginAnimations:@"fadeOutSync" context:NULL];
    [UIView setAnimationDidStopSelector:@selector (removeTranparentView) ];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.5];
    [loadingView setAlpha:0];
    [UIView commitAnimations];
        }
}

-(void)removeTranparentView
{
    [loadingView removeFromSuperview];
    [loadingView release];
    loadingView = nil;
} 
```

希望这可以帮助。谢谢你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T13:41:02.020

在 XIB 文件中，放置 UIView 和 UIActivityIndi​​catorView。将 ActivityIndi​​catorView 属性 SetAnimated 设置为 Yes。

@property (retain, nonatomic) IBOutlet UIView* m_LoadingView;

在开始长时间操作时，将 LoadingView 添加到视图中

```
m_LoadingView.layer.cornerRadius = 10;
m_LoadingView.center = self.view.center;
[self.view addSubview:m_LoadingView]; 
```

完成该过程后，从超级视图中删除 LoadingView。[m_LoadingView removeFromSuperView];

# cocoa - 从 awakeFromNib 隐藏可可窗口

> ID：823093
> 
> 赞同：3
> 
> 时间：2009-05-05T02:47:45.730
> 
> 标签：cocoa

我有一个带有两个 NSWindow 对象的 NIB。控制器类有两个 IBOutlets，一个用于每个 NSWindow（windowLogin 和 windowMain）。

我只想要一个在启动时可见的窗口。我正在使用 Insdide awakeFromNib：

```
[windowMain orderOut:self]; 
```

这是没有效果的。但是，如果我尝试：

```
[windowMain setTitle:@"Renamed Title"]; 
```

它按预期工作。想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T03:06:23.110

在 Interface Builder 窗口的属性检查器中查找“Visible At Launch”属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-27T13:28:17.010

或者，在 ApplicationDidFinishLoading 中，您可以调用 [window setIsVisible:NO]

# automation - 具有交互性的演示文稿的自动化开发

> ID：823098
> 
> 赞同：0
> 
> 时间：2009-05-05T02:49:14.273
> 
> 标签：automation, powerpoint, interactive

我正在尝试为演示文稿的自动化开发确定正确的工具、语言、软件包或其他工具，其中演示文稿是用户交互的。

演示文稿将由带有标题的图像和一些描述性文字组成。大多数时候会有 35-70 张图像。我想在单独的页面、幻灯片、选项卡等上显示每个图像。（我想正确的术语取决于解决方案。）

图片会改变，但标题保持不变，每张图片的描述都会有一点点变化。

将演示文稿放在一起后，我希望用户能够以蜡笔的感觉在电子图像上画圈和“书写”（我之前在照相馆工作，我们一直在底片上使用蜡笔并希望具有类似的灵活性）。此外，我希望用户也能够添加注释，就像 Adob​​e PDF Professional 允许的那样，例如插入气泡注释等。

最重要的是，我希望能够以自动化的方式做到这一点。现在我们正在使用 PowerPoint，但是在 PowerPoint 中将图像放在幻灯片上、调整其大小、然后设置文本所花费的时间让我们感到厌烦。另外，随着图像的变化，需要花费大量时间返回并更新它们。因此，我们希望能够更快地更新图像并从少数用户那里获得反馈。不一定必须是网络托管解决方案，但可以通过浏览器运行。

抱歉这么久，感谢您的任何想法和反馈，特别是如果有现有的软件包解决方案、可以使用的语言或其他方法来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-24T01:54:44.547

如今，最受欢迎的两个是[Adob​​e Captivate](http://www.adobe.com/products/captivate/)和[Articulate Presenter](http://www.articulate.com/products/presenter.php)。对于服务，而不是产品，您可以查看[http://voicethread.com](http://voicethread.com)之类的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-18T15:01:37.610

我不知道有什么产品可以完全满足您的要求。

但是，对于类似的结果，我使用两种不同的工具来开发演示文稿，另一种用于在演示文稿时绘图。

如果我只想制作一个由图片和文本组成的演示文稿，并且我想自动创建它，我会使用**irfanview** [http://www.irfanview.com/](http://www.irfanview.com/)及其用于自动幻灯片的精彩功能。我将所有图像放在一起，对它们进行注释（我使用它们的文件名，或者如果不够用，则使用 E​​XIF 和注释字段）并创建一个幻灯片，它可以编译成一个 .exe 文件。

如果我想要更详细的演示文稿。具有完整的注释功能，我使用**Wink** [http://www.debugmode.com/wink/](http://www.debugmode.com/wink/)

为了在演示过程中在屏幕上绘图，我使用了一个非常古老的位图绘图程序，称为 PC-Draw，它允许使用热键将屏幕捕获为位图并开始在其上绘图，并使用另一个热键返回到原来的屏幕，根本不改变正在运行的程序。我在网上的任何地方都没有找到它。然而，我发现类似的程序只是一个快速的谷歌。

这三个工具都免费且易于使用（甚至很有趣）。

# javascript - Javascript OnMouseOver 和 Out 禁用/重新启用项目问题

> ID：823099
> 
> 赞同：0
> 
> 时间：2009-05-05T02:50:29.793
> 
> 标签：javascript, events

我希望有一些单选按钮在鼠标移过时禁用并在它熄灭时再次启用（只是为了好玩）。

```
<form>
<input type="radio" name="rigged" onMouseOver="this.disabled=true" onMouseOut="this.disabled=false">
</form> 
```

当鼠标放在它上面时，它会做它应该做的事情，当它离开按钮时不会重新启用。另外，我如何使其默认启用，以便在刷新页面时它不会保持禁用状态。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T03:09:47.890

您可以通过将单选按钮包装在 div 标签中并设置 onmouseover 和 onmouseout 事件来实现相同的效果。

```
<div id="container" onmouseout="this.disabled=false" onmouseover="this.disabled=true">
    <input name="rigged" type="radio">
</div> 
```

上述解决方案仅适用于 IE，对于适用于 FireFox 的解决方案，请执行以下操作。

```
<script type="text/javascript">
    function toggleDisabled(el) {
        try {
            el.disabled = el.disabled ? false : true;
        }
        catch(E){
        }
        if (el.childNodes && el.childNodes.length > 0) {
            for (var x = 0; x < el.childNodes.length; x++) {
                toggleDisabled(el.childNodes[x]);
            }
        }
     }
</script> 
```

*这个javaScript函数是从这里借来的：[Enable or disable DIV tag and its internal controls using Javascript](http://hspinfo.wordpress.com/2008/09/03/enable-or-disable-div-tag-and-its-inner-controls-using-javascript/)

```
<div id="container" onmouseover="toggleDisabled(this)" onmouseout="toggleDisabled(this)">
    <input name="rigged" type="radio">          
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T02:57:10.183

我想要一个图像曝光，然后在鼠标离开图像时正常运行，我遇到了类似的问题。我使用 jQuery 并最终连接到 mouseenter 和 mouseout，而不是您正在使用的事件。你可能想试试这些。

```
$('#rigged').mouseenter(function() {
    $(this).disabled = true;
  }).mouseout(function() {
    $(this).disabled = false;
  }); 
```

类似的东西。

同样，这是使用 jQuery。

（您必须为输入单选按钮提供 id 'rigged'）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T03:11:11.070

我认为当它被禁用时，它不会触发任何事件。你可以尝试一些东西。

*   在鼠标悬停时，使一个不可见的 div 覆盖单选框。这将使它无法使用。然后在这个不可见 div 的 mouseout 上，删除该 div。

*   您可以使用鼠标 x 和 y 坐标，看看它们是否覆盖了您的无线电元素。虽然这不是最佳解决方案。

第一个标记，在 jQuery 中，会是这样的

```
$('#rigged').after('<div id="overlay" style="display: none;"></div>'); // make this the size of the radio button and/or associated label (if present). also, maybe with absolute and relative positioning, make sure it will overlap the radio element

$('#rigged').bind('mouseover', function() {

    $('#overlay').show();

});

$('#overlay').live('mouseout', function() {
    $(this).hide();
}); 
```

您需要对其进行调整以使用多个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T03:50:30.850

输入不会触发 mouseout 事件，因为它们被禁用。

所以你必须将它包装在一个 div 中并捕获 div 的事件。

如果您想要纯 JavaScript，请使用 Phaedrus 的示例“toggleDisabled”脚本。

如果你想要 jQuery 并且对新手不太友好：

```
<html>
<head>
   <title>Page</title>  
   <script src="jquery-1.3.2.min.js"></script>
   <script>
       $(function() {
           function toggleDisabled(d) {
               var disable = d;
               this.disableChildren = function() { $(this).children().each(function() { this.disabled = d; }); }
           }
           $("form .radios").hover(new toggleDisabled(true).disableChildren, new toggleDisabled(false).disableChildren);
       });
   </script>
</head>
   <body>
        <form>
           <div class="radios">
               <input type="radio" name="rigged" value="1"/> Item One<br />
               <input type="radio" name="rigged" value="2"/> Item Two<br />
               <input type="radio" name="rigged" value="3"/> Item Three<br />
               <input type="radio" name="rigged" value="4"/> Item Four
            </div>
        </form>      
   </body>
</html> 
```

# python - 在 Python 程序中记录每个变量赋值的类型的最佳方法是什么？

> ID：823103
> 
> 赞同：3
> 
> 时间：2009-05-05T02:52:08.900
> 
> 标签：python, profiling

Python 是如此动态，以至于在大型程序中发生的事情并不总是很清楚，而且查看一小部分源代码并不总是有帮助。更糟糕的是，编辑器对导航到 Python 文件中的标记定义或导入语句的支持往往很差。

一种补偿方法可能是编写一个特殊的分析器，而不是为程序计时，它会记录程序对象的运行时类型和路径，并将这些数据公开给编辑器。

这可以用 sys.settrace() 来实现，它为每一行代码设置一个回调，pdb 是如何实现的，或者通过使用 ast 模块和导入钩子来检测代码，或者有更好的策略吗？你如何写这样的东西而不让它变得非常慢，并且不会与极端的活力发生冲突，例如对财产访问的副作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T02:56:25.583

我不认为你可以让它变慢，但是当你遇到 STORE_FAST STORE_NAME STORE_* 操作码时应该可以检测到每个变量的地址。

以前有没有这样做过，我不知道。

如果您需要调试，请查看[PDB](http://docs.python.org/library/pdb.html)，这将允许您逐步执行代码并访问任何变量。

```
import pdb
def test():
    print 1
    pdb.set_trace() # you will enter an interpreter here
    print 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T02:57:22.913

如果你给猴子打补丁`object`的类或其他原型对象怎么办？

如果您不使用新式类，这可能不是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T03:23:50.587

您可能想查看[PyChecker](http://pychecker.sourceforge.net/)的代码 - 它确实（我认为）您想要做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-15T17:30:32.223

[Pythoscope](http://pythoscope.org)所做的事情与您所描述的非常相似，它使用 AST 形式的静态信息和通过`sys.settrace`.

顺便说一句，如果您在重构项目时遇到问题，请尝试使用 Pythoscope。

# c++ - 这个设置有什么问题？

> ID：823107
> 
> 赞同：0
> 
> 时间：2009-05-05T02:54:32.000
> 
> 标签：c++, parameters

我创建了一个名为 test 的程序：

```
#include<stdlib.h>
#include<iostream>
int main()
{
    std::cout<<system("..\\add\\debug\\add.exe 4 8");
    while(true);
    return 0;
} 
```

add.exe 包括

```
#include<stdlib.h>
int main(int argc,char **argv[])
{
    int n=((unsigned)argv[1]);
    int m=((unsigned)argv[2]);
    return(n+m);
} 
```

所以当我运行测试时，我得到

6841420

尝试是使用参数 4 和 8 进行测试运行 add，并且 add 返回这些值的总和 (12)，然后 test 会将其显示到屏幕上。我是如何获得 6841420 的，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T02:59:46.807

问题是您正在将指针值转换为整数。参数将作为 C 风格的字符串 ( `const char*`) 传递给您的程序。您需要首先使用 atoi 之类的 API 将它们转换为字符串。

```
#include<stdlib.h>
int main(int argc,char *argv[])
{
    int n= atoi(argv[1]);
    int m= atoi(argv[2]);
    return(n+m);
} 
```

**编辑**

正如其他人指出的那样，您还应该进行一些错误检查以确保实际上有 2 个参数传递给程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T03:00:28.147

您的 add.exe 将指向字符串的指针转换为无符号整数，因此它将它们在内存中的位置而不是数字相加。

使用 sscanf （或者，如另一个答案中所建议的那样， atoi - 它可能更容易）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T03:13:41.690

这作为一个玩具可能没问题，但作为一个仅供参考，你不能指望能够从 main() 返回整个整数范围。首先，system() 使用各种值作为标记（例如，-1 和 127），因此您将无法区分执行失败和其中一个值的合法结果之间的区别。其次，shell 可以将返回值的范围限制为仅 8 位（使用剩余的位来获取额外的状态信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T03:14:04.853

关于使用 atoi() 或 sscanf() 将 argv[] 元素从字符串转换为实际整数的答案是正确的。

但是，您的测试用例还有另一个问题。的返回值`system()`是运行的进程的退出状态，它与平台无关。然而，在大多数平台上，事情的安排使得该值`0`意味着该命令运行正常，并最终调用了`exit(0)`它自己。Windows 符合这一点。

该行`cout<<system(...)`正在打印该状态值。在许多平台（尤其是 POSIX 兼容的平台）中，如果进程在没有异常终止的情况下运行，则状态代码的低字节将为 0，而高字节将是传递给`exit()`假设值为 255 或更少的值。

实际上，使用退出状态向父进程传达比成功/失败更多的信息是高度依赖于平台的，并且有更好的方法来做到这一点。

# php - 在数组中搜索 MYSQL 输出的值

> ID：823108
> 
> 赞同：0
> 
> 时间：2009-05-05T02:54:32.123
> 
> 标签：php, mysql, arrays, string

下面的代码似乎不起作用或在数组上找不到任何东西。我正在使用“in_array”来搜索堆栈中的针。我还尝试用逗号分隔的内容爆炸并且不起作用。有什么建议么？我也试过“array_search”。

```
$q4 = "SELECT domain_name,slots_config.bid FROM slots_pid,slots_config,slots_sites 
WHERE slots_config.bid=slots_pid.bid && slots_sites.aid=slots_pid.aid";
$result4 = mysql_query($q4);

while($row = mysql_fetch_array($result4))
{
    $resultarray[] = $row;
}

if (in_array("test",$resultarray))
  {
  echo "Match found";
  }
else
  {
  echo "Match not found";
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T02:59:46.793

看起来您在这里拥有的是“数组数组”。也就是说，在您的 while() 循环中， $row 是一个数组，它对应于您的 mysql 查询中的数据。所以 $resultarray 的每个元素实际上都包含一个数组，而不是一个字符串。

尝试这样做：`print_r($resultarray)`。这将显示 $resultarray 的整个结构，并且您可以看到如何创建一个数组数组。

要使用 in_array，您需要执行类似于`in_array("test", $resultarray[0])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T02:58:45.843

`in_array()`不适用于那种数组，因为它是多维的。

您的数组如下所示：

```
$resultarray[0]['domain_name'] = 'first row domain name';
$resultarray[0]['bid'] = 'first row bid';
$resultarray[1]['domain_name'] = 'second row domain name';
... 
```

你不能`in_array()`用来搜索，所以你必须用另一种方法来做，比如循环数组，或者以`$resultarray`不同的方式构建。

同样，`array_search()`不适用于多维数组，因此您可以执行类似循环第一个维度和`array_search()`-ing 每个第二个维度的操作。

如果您想要更多详细信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T03:01:18.723

```
$q4 = "SELECT domain_name,slots_config.bid FROM slots_pid,slots_config,slots_sites 
WHERE slots_config.bid=slots_pid.bid && slots_sites.aid=slots_pid.aid";
$result4 = mysql_query($q4);

while($row = mysql_fetch_array($result4))
{
  if (in_array("test",$row))
  {
     echo "Match found";
  }
  else
  {
     echo "Match not found";
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T03:01:40.097

我相信您遇到的问题是它 in_array 仅搜索二维数组的第一个维度。我也不明白为什么在搜索之前将整个结果加载到数组中（但也许这在程序的其他地方很有用）。

尝试：

```
 $found = false;
 while($row = mysql_fetch_array($result4))
 {
    if (in_array($needle, $row){
      print "here it is";
      $found = true;
      break;
 }

 if (!$found) {
      print "not found";
 } 
```

# c# - 如何创建一个获取除特定值之外的所有内容的 linq 查询

> ID：823109
> 
> 赞同：2
> 
> 时间：2009-05-05T02:54:40.440
> 
> 标签：c#, .net, linq

假设我在 db.Roles 中有一个 linq 查询 select r，其中 r.RoleName DOES NOT contains ("Administrator") select r;

让我困惑的是不包含的部分。我意识到我可以做到这一点。包含电话但你如何做相反的事情？

谢谢！

**更新：** 我找到了 Exclude 方法，这是我使用它的方法：

```
var role = (from r in db.Roles
            orderby r.RoleName
            select r)
           .Except(from r in db.Roles 
                   where r.RoleName == "Administrator" & r.RoleName == "DataEntry" 
                   select r
            ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-05T02:56:48.000

尝试以下

```
var query = db.Roles.Where(x => !x.RoleName.Contains("Administrator")); 
```

您可以只使用 C# not 运算符！（感叹号）。扩展的 LINQ 语法版本

```
var query = 
  from it in db.Roles
  where !it.RoleName.Contains("Administrator")
  select it; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T03:02:36.613

如果您有多个角色要排除，您可能会查看该[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)功能。

# c++ - 如何在我的 iPhone 应用程序中使用 C++ STL 容器？

> ID：823116
> 
> 赞同：8
> 
> 时间：2009-05-05T02:57:22.430
> 
> 标签：c++, objective-c, standard-library

我想在我的 iPhone 应用程序中使用 STL 集（在 XCode 中用 Objective-C 编写）。如何包含设置和/或使用标准命名空间？

在 C++ 中，我会这样做：

```
#include<set>
using namespace std;

// use the set<T> somewhere down here... 
```

我如何在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T03:04:25.703

只需重命名源文件，使其以 .mm 结尾，它应该会触发 Objective-C++ 前端；然后，您可以在其中混合使用 Objective-C 和 C++。更多信息[在这里](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:05:20.960

Objective-C 不直接支持 STL。似乎有几个项目试图将 STL 移植到 Objective-C。Objectivelib 就是其中之一，可在 sourceforge 上获得

*   [http://objectivelib.sourceforge.net/YesOpenStep/index.html](http://objectivelib.sourceforge.net/YesOpenStep/index.html)

# .htaccess - htaccess 将旧站点重定向到 2 个不同的域

> ID：823131
> 
> 赞同：1
> 
> 时间：2009-05-05T03:04:11.103
> 
> 标签：.htaccess, redirect, dns

好的，这就是场景：

我在主机的根目录上有一个博客，然后我在一个名为 fsGallery 的子文件夹中托管了一些应用程序。现在，我为我的博客购买了一个新域名，并为我的应用购买了另一个域名。ii 想知道正确的 htaccess 301 重定向，以便我将旧目录重定向到它们各自的新域

这是一个示例目录结构：

```
root/
  /app
  [blog] 
```

尝试：将 /app 重定向到 newdomainforapp.com 将 [blog] 重定向到 newdomainforblog.com

另外，最初，我的应用程序曾经接受这样的 url 参数：app/user/1234567

所以我还想：将 /app/user/{dynamic int parameter} 重新分配到 newdomainforapp.com/profile/{dynamic int parameter}

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T03:43:14.987

可能与编程无关，但无论如何：正确的方法是在虚拟主机配置文件中（即在`<VirtualHost *:80>`...`</VirtualHost>`部分），而不是在`.htaccess`文件中。要使用的指令是

```
 RedirectMatch permanent /app/user/([0-9+]) http://newdomainforapp.com/profile/$1
 Redirect permanent /app http://newdomainforapp.com
 Redirect permanent / http://newdomainforblog.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T03:39:34.043

看来[RewriteRule](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html#RewriteRule)应该可以正常工作。

```
RewriteEngine on
RewriteRule ^/?app/user/([0-9]+) http://newdomainforapp.com/profile/$1 [R=301,L]
RewriteRule ^/?app(/(.*))?$ http://newdomainforapp.com/$2 [R=301,L]
RewriteRule ^/?(.*) http://newdomainforblog.com/$1 [R=301,L] 
```

您可能需要使用这些组来正确重定向文章。

# objective-c - 如何子类化 CALayer 以返回预样式层？

> ID：823135
> 
> 赞同：1
> 
> 时间：2009-05-05T03:06:07.307
> 
> 标签：objective-c, cocoa, core-animation, quartz-graphics, calayer

您如何子类化 CALayer 以便返回已设置样式属性的图层？

以便：

```
MyCustomLayer *layer = [MyCustomLayer layer]; 
```

将创建具有这些属性的层；

```
layer.backgroundColor = sweetBackgroundColor.CGColor;
layer.borderColor = sweetBorderColor.CGColor;

layer.borderWidth = 2.0;
layer.cornerRadius = 8.0; 
```

这样我就可以设置它的框架并将其添加到树中。

但我想我的问题真的可能只是，你如何子类化一个对象，以便它具有在创建时已经设置的属性。可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T04:30:10.740

只需在您的子类中覆盖 -init（CALayer 的指定初始化程序），并在您的覆盖中设置这些属性。任何创建方法，包括 -layer，最终都应该通过指定的初始化程序进行路由，这意味着即使对于方便的构造函数，您的额外设置也会发生。

# grails - 带有hasMany的Grails动态脚手架：是错误还是我配置错误？

> ID：823137
> 
> 赞同：7
> 
> 时间：2009-05-05T03:06:27.667
> 
> 标签：grails, has-many

我是一个 Grails 菜鸟，遇到了一些似乎是错误的东西，但我完全有可能没有正确配置所有内容。

我有两个简单的域类：

```
 class Player {

        String firstName
        String lastName

        static constraints = {
            firstName(blank:false)
            lastName(blank:false)
        }
        String toString() { lastName + ", " + firstName }
    } 
```

和

```
class Team {

    String mascot;
    static hasMany = [players:Player]

    static constraints = {
        mascot(blank:false)
    }
} 
```

除了这两个域类的动态脚手架之外，我有两个控制器。

但即使我的数据库中有玩家列表，在创建新团队时我也没有为他们获得多选框。

但是，当我去编辑团队时会出现多选

这是新项目的动态脚手架中的错误，我是否误解了它应该如何工作，还是我需要在这里声明其他内容？

非常感谢任何帮助！我有一些截图，StackOverflow 不允许我添加，因为我很新鲜，但如果有帮助的话，我很乐意向他们展示另一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T22:30:45.317

我终于弄清楚了这一点，并想把我所做的事情传递下去，以防其他人遇到它。

当我为 Team 生成视图时，edit.gsp 中的表单块如下所示：

```
 <input type="hidden" name="id" value="${teamInstance?.id}" />
                <input type="hidden" name="version" value="${teamInstance?.version}" />
                <div class="dialog">
                    <table>
                        <tbody>

                            <tr class="prop">
                                <td valign="top" class="name">
                                    <label for="mascot">Mascot:</label>
                                </td>
                                <td valign="top" class="value ${hasErrors(bean:teamInstance,field:'mascot','errors')}">
                                    <input type="text" id="mascot" name="mascot" value="${fieldValue(bean:teamInstance,field:'mascot')}"/>
                                </td>
                            </tr> 

                            <tr class="prop">
                                <td valign="top" class="name">
                                    <label for="players">Players:</label>
                                </td>
                                <td valign="top" class="value ${hasErrors(bean:teamInstance,field:'players','errors')}">
                                    <g:select name="players"
from="${Player.list()}"
size="5" multiple="yes" optionKey="id"
value="${teamInstance?.players}" />

                                </td>
                            </tr> 

                        </tbody>
                    </table>
                </div>
                <div class="buttons">
                    <span class="button"><g:actionSubmit class="save" value="Update" /></span>
                    <span class="button"><g:actionSubmit class="delete" onclick="return confirm('Are you sure?');" value="Delete" /></span>
                </div>
            </g:form> 
```

但 create.gsp 中的表单块如下所示：

```
<g:form action="save" method="post" >
                <div class="dialog">
                    <table>
                        <tbody>

                            <tr class="prop">
                                <td valign="top" class="name">
                                    <label for="mascot">Mascot:</label>
                                </td>
                                <td valign="top" class="value ${hasErrors(bean:teamInstance,field:'mascot','errors')}">
                                    <input type="text" id="mascot" name="mascot" value="${fieldValue(bean:teamInstance,field:'mascot')}"/>
                                </td>
                            </tr> 

                        </tbody>
                    </table>
                </div>
                <div class="buttons">
                    <span class="button"><input class="save" type="submit" value="Create" /></span>
                </div>
        </g:form> 
```

换句话说，对于这种极端情况，默认的 Create 视图省略了小部件以正确显示多选列表。当我复制和粘贴丢失的代码时，动态脚手架控制器将其拾取并按预期持久化。所以，这绝对是视图生成代码中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:10:08.583

是的，默认脚手架将父选择器放在子类的创建/编辑页面中。

我猜这样对他们来说更容易。它不应该是多选，只是下拉单选，因为它是一对多。

正如您所解释的，您想要更多的多对多关系，您可以尝试添加：

```
static hasMany = [teams:Team] 
```

到你的 Player 类。我发现 Grails 在双向关系方面做得更好。在构建搜索查询时拥有它也很有用，并且不应该只需要一个您已经需要的关系表。

如果您使用的是 Grails pre-v1.1，则不直接支持多对多关系，因此即使添加上面的静态 hasMany 也不是完整的解决方案，因为您需要管理添加到另一个添加到一个方向时列出。我还没有使用v1.1，所以我不能谈论在其中指定Many-to-Many需要什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-28T02:13:29.427

我在使用 Grails 的当前版本（v1.3.4）时遇到了同样的问题。不得不手动修改create.gsp

# c - 了解空 main() 转换为程序集

> ID：823138
> 
> 赞同：14
> 
> 时间：2009-05-05T03:07:27.507
> 
> 标签：c, gcc, compiler-construction, assembly

有人可以解释一下 GCC 对这段代码做了什么吗？它在初始化什么？原始代码是：

```
#include <stdio.h>
int main()
{

} 
```

它被翻译成：

```
 .file   "test1.c"
    .def    ___main;    .scl    2;  .type   32; .endef
    .text
.globl _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $8, %esp
    andl    $-16, %esp
    movl    $0, %eax
    addl    $15, %eax
    addl    $15, %eax
    shrl    $4, %eax
    sall    $4, %eax
    movl    %eax, -4(%ebp)
    movl    -4(%ebp), %eax
    call    __alloca
    call    ___main
    leave
    ret 
```

如果编译器/汇编专家让我开始解释堆栈、寄存器和部分初始化，我将不胜感激。我无法从代码中脱颖而出。

编辑：我正在使用 gcc 3.4.5。命令行参数是 gcc -S test1.c

谢谢你，昆扬。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-05T05:16:25.467

我应该在所有评论的开头说，我还在学习汇编。

我将忽略部分初始化。部分初始化的解释以及我所涵盖的基本上所有其他内容都可以在这里找到： [http ://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)

ebp[寄存器](http://en.wikipedia.org/wiki/X86#Purpose)是[堆栈帧](http://en.wikipedia.org/wiki/Stack_frame#Structure)基指针，因此是 BP。它存储一个指向当前堆栈开头的指针。

esp 寄存器是堆栈指针。它保存堆栈顶部的内存位置。每次我们将某些东西压入堆栈时，esp 都会更新，以便它始终指向堆栈顶部的地址。

所以 ebp 指向底部， esp 指向顶部。所以堆栈看起来像：

```
esp -----> 000a3   fa
           000a4   21
           000a5   66
           000a6   23
ebp -----> 000a7   54 
```

如果您将 e4 压入堆栈，则会发生以下情况：

```
esp -----> 000a2   e4
           000a3   fa
           000a4   21
           000a5   66
           000a6   23
ebp -----> 000a7   54 
```

请注意，堆栈向低地址增长，这一事实在下面很重要。

前两个步骤称为过程 prolog 或更常见的[函数 prolog](http://en.wikipedia.org/wiki/Function_prologue)。他们准备堆栈以供局部变量使用（请参阅底部的过程序言引用）。

在步骤 1 中，我们通过调用将指向旧堆栈帧的指针保存在堆栈中 `pushl %ebp`。由于 main 是第一个调用的函数，我也不知道 %ebp 的先前值是什么。

第 2 步，我们正在输入一个新的堆栈帧，因为我们正在输入一个新函数（main）。因此，我们必须设置一个新的堆栈帧基指针。我们使用 esp 中的值作为堆栈帧的开始。

步骤 3\. 在堆栈上分配 8 个字节的空间。正如我们上面提到的，堆栈向低地址增长，因此减去 8，将堆栈顶部移动 8 个字节。

第4步; 对齐堆栈，我对此有不同的看法。我不太确定这是做什么的。我怀疑这样做是为了允许在堆栈上分配大指令（SIMD），

[http://gcc.gnu.org/ml/gcc/2008-01/msg00282.html](http://gcc.gnu.org/ml/gcc/2008-01/msg00282.html)

> 此代码将 ESP 与 0xFFFF0000 “和”，将堆栈与下一个最低 16 字节边界对齐。对 Mingw 源代码的检查表明，这可能是针对出现在“_main”例程中的 SIMD 指令，它只对对齐的地址进行操作。由于我们的例程不包含 SIMD 指令，因此这一行是不必要的。

[http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)

步骤 5 到 11 对我来说似乎没有任何意义。我在谷歌上找不到任何解释。真正了解这些东西的人能否提供更深入的理解。我听说有传言说这些东西用于 C 的异常处理。

步骤5，将main 0的返回值存储在eax中。

第 6 步和第 7 步我们将十六进制的 15 添加到 eax 中，原因不明。eax = 01111 + 01111 = 11110

第 8 步我们将 eax 的位向右移动 4 位。eax = 00001 因为最后一位从末尾移出 00001 | 111.

第 9 步我们将 eax 的位向左移动 4 位，eax = 10000。

步骤 10 和 11 将堆栈上分配的前 4 个字节中的值移入 eax，然后将其从 eax 移回。

步骤 12 和 13 设置 c 库。

我们已经达到了[功能结语](http://en.wikipedia.org/wiki/Function_prologue#Epilogu)。也就是说，将堆栈指针 esp 和 ebp 返回到调用此函数之前的状态的函数部分。

第 14 步，leave 将 esp 设置为 ebp 的值，将栈顶移动到调用 main 之前的地址。然后它将 ebp 设置为指向我们在步骤 1 中保存在堆栈顶部的地址。

可以用以下说明替换请假：

```
mov  %ebp, %esp
pop  %ebp 
```

步骤15，返回并退出函数。

```
1\.    pushl       %ebp
2\.    movl        %esp, %ebp
3\.    subl        $8, %esp
4\.    andl        $-16, %esp
5\.    movl        $0, %eax
6\.    addl        $15, %eax
7\.    addl        $15, %eax
8\.    shrl        $4, %eax
9\.    sall        $4, %eax
10\.   movl        %eax, -4(%ebp)
11\.   movl        -4(%ebp), %eax
12\.   call        __alloca
13\.   call        ___main
14\.   leave
15\.   ret 
```

程序序言：

> 函数必须做的第一件事称为过程序言。它首先使用指令 pushl %ebp 保存当前的基指针 (ebp)（记住 ebp 是用于访问函数参数和局部变量的寄存器）。现在它使用指令 movl %esp, %ebp 将堆栈指针 (esp) 复制到基指针 (ebp)。这允许您从基指针访问函数参数作为索引。局部变量总是ebp的减法，比如第一个局部变量是-4(%ebp)或者(%ebp)-4，返回值总是4(%ebp)或者(%ebp)+4，每个参数或参数位于 N*4+4(%ebp)，例如第一个参数为 8(%ebp)，而旧的 ebp 位于 (%ebp)。

[http://www.milw0rm.com/papers/52](http://www.milw0rm.com/papers/52)

存在一个非常棒的堆栈溢出线程，它回答了这个问题的大部分。 [为什么我的 gcc 输出中有额外的指令？](https://stackoverflow.com/questions/499842/why-are-there-extra-instructions-in-my-gcc-output)

可以在此处找到有关 x86 机器代码指令的良好参考：http: [//programminggroundup.blogspot.com/2007/01/appendix-b-common-x86-instructions.html](http://programminggroundup.blogspot.com/2007/01/appendix-b-common-x86-instructions.html)

这是一个包含以下使用的一些想法的讲座：http: [//csc.colstate.edu/bosworth/cpsc5155/Y2006_TheFall/MySlides/CPSC5155_L23.htm](http://csc.colstate.edu/bosworth/cpsc5155/Y2006_TheFall/MySlides/CPSC5155_L23.htm)

这是回答您问题的另一种方法： [http ://www.phiral.net/linuxasmone.htm](http://www.phiral.net/linuxasmone.htm)

这些资料都不能解释一切。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-05T03:42:04.430

这是由 GCC 编译的一个简单函数的逐步分解`main()`，其中包含许多详细信息：[GAS 语法（维基百科）](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)

对于您粘贴的代码，说明分解如下：

*   前四条指令（通过 andl 推送）：建立一个新的栈帧
*   接下来的五个指令（movl 到 sall）：为 eax 生成一个奇怪的值，它将成为返回值（我不知道它是如何决定这样做的）
*   接下来的两条指令（都是 movl）：将计算的返回值存储在堆栈上的临时变量中
*   接下来的两条指令（均调用）：调用 C 库的 init 函数
*   `leave`指令：拆除堆栈帧
*   `ret`指令：返回给调用者（外部运行时函数，或者可能是调用程序的内核函数）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T03:18:32.630

好吧，对 GAS 不太了解，而且我对 Intel 组件有点生疏，但它看起来像是它正在初始化 main 的堆栈框架。

如果您看一下， __main 是某种宏，必须执行初始化。然后，由于 main 的主体为空，它调用 leave 指令，返回调用 main 的函数。

来自[http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax#.22hello.s.22_line-by-line](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax#.22hello.s.22_line-by-line)：

这一行声明了“_main”标签，标记了从启动代码中调用的位置。

```
 pushl   %ebp
    movl    %esp, %ebp
    subl    $8, %esp 
```

这些行将 EBP 的值保存在堆栈中，然后将 ESP 的值移动到 EBP，然后从 ESP 中减去 8。每个操作码末尾的“l”表示我们要使用与“long”（32 位）操作数一起使用的操作码版本；

```
 andl    $-16, %esp 
```

此代码将 ESP 与 0xFFFF0000 “和”，将堆栈与下一个最低 16 字节边界对齐。（使用 simd 指令时需要，此处无用）

```
 movl    $0, %eax
    movl    %eax, -4(%ebp)
    movl    -4(%ebp), %eax 
```

此代码将零移入 EAX，然后将 EAX 移入内存位置 EBP-4，该位置位于我们在过程开始时在堆栈中保留的临时空间中。然后它将内存位置 EBP-4 移回 EAX；显然，这不是优化的代码。

```
 call    __alloca
    call    ___main 
```

这些函数是 C 库设置的一部分。由于我们在 C 库中调用函数，因此我们可能需要这些函数。它们执行的具体操作取决于平台和安装的 GNU 工具的版本。

这是一个有用的链接。

[http://unixwiz.net/techtips/win32-callconv-asm.html](http://unixwiz.net/techtips/win32-callconv-asm.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-05T03:59:15.917

了解您使用的是什么 gcc 版本以及什么 libc 真的很有帮助。看起来你有一个非常旧的 gcc 版本或一个奇怪的平台或两者兼而有之。发生的事情是调用约定有些奇怪。我可以告诉你几件事：

按照约定将帧指针保存在栈上：

```
pushl       %ebp
movl        %esp, %ebp 
```

在框架的旧端为东西腾出空间，并将堆栈指针向下舍入为 4 的倍数（我不知道为什么需要这样做）：

```
subl        $8, %esp
andl        $-16, %esp 
```

通过疯狂的歌舞，准备从 1 返回`main`：

```
movl        $0, %eax
addl        $15, %eax
addl        $15, %eax
shrl        $4, %eax
sall        $4, %eax
movl        %eax, -4(%ebp)
movl        -4(%ebp), %eax 
```

`alloca`恢复使用(GNU-ism)分配的任何内存：

```
call        __alloca 
```

向正在退出的 libc 宣布`main`（更多 GNU 主义）：

```
call        ___main 
```

恢复帧和堆栈指针：

```
leave 
```

返回：

```
ret 
```

当我在 Debian Linux 上使用 gcc 4.3 编译完全相同的源代码时，会发生以下情况：

```
 .file   "main.c"
        .text
        .p2align 4,,15
.globl main
        .type   main, @function
main:
        leal    4(%esp), %ecx
        andl    $-16, %esp
        pushl   -4(%ecx)
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %ecx
        popl    %ecx
        popl    %ebp
        leal    -4(%ecx), %esp
        ret
        .size   main, .-main
        .ident  "GCC: (Debian 4.3.2-1.1) 4.3.2"
        .section        .note.GNU-stack,"",@progbits 
```

我这样分解：

告诉调试器和其他工具源文件：

```
 .file   "main.c" 
```

代码在文本部分：

```
 .text 
```

打败我：

```
 .p2align 4,,15 
```

`main`是一个导出函数：

```
.globl main
        .type   main, @function 
```

`main`的入口点：

```
main: 
```

抓取返回地址，将栈对齐到一个4字节的地址，再次保存返回地址（为什么我不能说）：

```
 leal    4(%esp), %ecx
        andl    $-16, %esp
        pushl   -4(%ecx) 
```

使用标准约定保存帧指针：

```
 pushl   %ebp
        movl    %esp, %ebp 
```

莫名其妙的疯狂：

```
 pushl   %ecx
        popl    %ecx 
```

恢复帧指针和栈指针：

```
 popl    %ebp
        leal    -4(%ecx), %esp 
```

返回：

```
 ret 
```

调试器的更多信息？：

```
 .size   main, .-main
        .ident  "GCC: (Debian 4.3.2-1.1) 4.3.2"
        .section        .note.GNU-stack,"",@progbits 
```

顺便说一句，`main`是特别而神奇的；当我编译

```
int f(void) {
  return 17;
} 
```

我得到一些更理智的东西：

```
 .file   "f.c"
        .text
        .p2align 4,,15
.globl f
        .type   f, @function
f:
        pushl   %ebp
        movl    $17, %eax
        movl    %esp, %ebp
        popl    %ebp
        ret
        .size   f, .-f
        .ident  "GCC: (Debian 4.3.2-1.1) 4.3.2"
        .section        .note.GNU-stack,"",@progbits 
```

仍然有大量的装饰，我们仍然在保存帧指针，移动它，恢复它，这完全没有意义，但其余的代码是有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T03:54:14.710

看起来 GCC 的行为就像是可以编辑`main()`以包含 CRT 初始化代码。我刚刚确认我在这里从 MinGW GCC 3.4.5 获得了完全相同的程序集列表，以及您的源文本。

我使用的命令行是：

```
gcc -S emptymain.c

```

有趣的是，如果我将函数的名称更改为，`qqq()`而不是`main()`，我会得到以下程序集：

```
        .file “emptymain.c”
        。文本
.globl_qqq
        .def _qqq; .scl 2; . 类型 32; .endef
_qqq:
        推%ebp
        movl %esp, %ebp
        流行 %ebp
        ret

```

这对于没有开启优化的空函数更有意义。

# python - 为什么这个递归语句是错误的？

> ID：823141
> 
> 赞同：0
> 
> 时间：2009-05-05T03:08:00.267
> 
> 标签：python, recursion, simpy

这是一个银行模拟，考虑到 20 条不同的服务线路和一个队列，客户以指数速率到达，并且他们在遵循平均 40 和标准偏差 20 的正态概率分布的时间内得到服务。

在我决定使用这种方法排除正态分布给出的负值之前，一切都很好：

```
def getNormal(self):

    normal = normalvariate(40,20)

    if (normal>=1):
        return normal
    else:
        getNormal(self) 
```

我搞砸了递归调用吗？我不明白为什么它不起作用。我已将 getNormal() 方法更改为：

```
def getNormal(self):

    normal = normalvariate(40,20)

    while (normal <=1):
        normal = normalvariate (40,20)

    return normal 
```

但我很好奇为什么前面的递归语句被破坏了。

这是完整的源代码，如果您有兴趣。

```
""" bank21: One counter with impatient customers """
from SimPy.SimulationTrace import *
from random import *

## Model components ------------------------

class Source(Process):
    """ Source generates customers randomly """

    def generate(self,number):       
        for i in range(number):

            c = Customer(name = "Customer%02d"%(i,))

            activate(c,c.visit(tiempoDeUso=15.0))

            validateTime=now()
            if validateTime<=600:
                interval = getLambda(self)
                t = expovariate(interval)

                yield hold,self,t #esta es la rata de generación
            else:
                detenerGeneracion=999
                yield hold,self,detenerGeneracion

class Customer(Process):
    """ Customer arrives, is served and  leaves """

    def visit(self,tiempoDeUso=0):       
        arrive = now()       # arrival time                     
        print "%8.3f %s: Here I am     "%(now(),self.name)

        yield (request,self,counter),(hold,self,maxWaitTime)    
        wait = now()-arrive  # waiting time                     
        if self.acquired(counter):                              
            print "%8.3f %s: Waited %6.3f"%(now(),self.name,wait)

            tiempoDeUso=getNormal(self)
            yield hold,self,tiempoDeUso
            yield release,self,counter                          
            print "%8.3f %s: Completed"%(now(),self.name)
        else:
            print "%8.3f %s: Waited %6.3f. I am off"%(now(),self.name,wait)

## Experiment data -------------------------

maxTime = 60*10.5  # minutes                                 
maxWaitTime = 12.0 # minutes. maximum time to wait              

## Model  ----------------------------------

def model():                                                    
    global counter                                              
    #seed(98989)
    counter = Resource(name="Las maquinas",capacity=20)                            
    initialize()
    source = Source('Source')
    firstArrival= expovariate(20.0/60.0) #chequear el expovariate
    activate(source,
             source.generate(number=99999),at=firstArrival)   
    simulate(until=maxTime)                                     

def getNormal(self):

    normal = normalvariate(40,20)

    if (normal>=1):
        return normal
    else:
        getNormal(self)

def getLambda (self):

        actualTime=now()
        if (actualTime <=60):
            return 20.0/60.0
        if (actualTime>60)and (actualTime<=120):
            return 25.0/60.0
        if (actualTime>120)and (actualTime<=180):
            return 40.0/60.0
        if (actualTime>180)and (actualTime<=240):
            return 30.0/60.0
        if (actualTime>240)and (actualTime<=300):
            return 35.0/60.0
        if (actualTime>300)and (actualTime<=360):
            return 42.0/60.0
        if (actualTime>360)and (actualTime<=420):
            return 50.0/60.0
        if (actualTime>420)and (actualTime<=480):
            return 55.0/60.0
        if (actualTime>480)and (actualTime<=540):
            return 45.0/60.0
        if (actualTime>540)and (actualTime<=600):
            return 10.0/60.0
## Experiment  ----------------------------------
model() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T03:12:39.460

我想你想要

```
return getnormal(self) 
```

代替

```
getnormal(self) 
```

如果函数在没有遇到 return 语句的情况下退出，那么它会返回特殊值 None，它是一个 NoneType 对象——这就是 Python 抱怨“NoneType”的原因。abs() 函数需要一个数字，但它不知道如何处理 None。

此外，您可以通过使用避免递归（以及创建新堆栈帧的成本）

```
def getNormal(self):
    normal = 0
    while normal < 1:
        normal = normalvariate(40,20)
    return normal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:13:04.263

你需要有：

```
return getNormal(self) 
```

代替

```
getNormal(self) 
```

但实际上，不需要递归：

```
def getNormal(self):
    normal = 0
    while normal < 1:
        normal = normalvariate(40,20)

    return normal 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T03:17:38.403

我不完全确定，但我认为您需要将方法更改为以下内容：

```
def getNormal(self):

normal = normalvariate(40,20)

if (normal>=1):
    return normal
else:
    return getNormal(self) 
```

# c# - 记录 WCF 接口的最佳方式？

> ID：823148
> 
> 赞同：22
> 
> 时间：2009-05-05T03:11:42.630
> 
> 标签：c#, .net, xml, wcf, documentation

所以我正在使用 WCF，并希望记录我的界面和服务，以提供给另一家公司的内部应用程序。记录这些接口的最佳方式是什么？我更喜欢将文档与代码内联，然后有一些美化来输出 HTML，但不确定是否有推荐的方法来做到这一点。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-07T15:45:05.407

为此，我们使用 WCFExtras ( [http://www.codeplex.com/WCFExtras](http://www.codeplex.com/WCFExtras) )。

除其他功能外，它还允许将您的代码 xml 注释实时导出到生成的 WSDL 中，例如检查这些 xml 注释的方式：

```
 /// <summary>
    /// Retrieve the tickets information for the specified order
    /// </summary>
    /// <param name="orderId">Order ID</param>
    /// <returns>Tickets data</returns>
    [OperationContract]
    TicketsDto GetTickets(int orderId); 
```

反映在该接口的 WSDL 中：

```
 <wsdl:operation name="GetTickets">
    <wsdl:documentation>
    <summary> Retrieve the tickets information for the specified order </summary> <param name="orderId">Order ID</param> <returns>Tickets data</returns>
    </wsdl:documentation>
    <wsdl:input wsaw:Action="xxxx" message="tns:PartnerAPI_GetTickets_InputMessage"/>
    <wsdl:output wsaw:Action="xxxx" message="tns:PartnerAPI_GetTickets_OutputMessage"/>
    </wsdl:operation> 
```

他们的文档摘录：

从源代码 XML 注释添加 WSDL 文档 此扩展允许您直接从源文件中的 XML 注释添加 WSDL 文档（注释）。这些注释将作为 WSDL 的一部分发布，并且可供知道如何利用它们的 WSDL 工具（例如 Apache Axis wsdl2java 等）使用。2.0 版还包括一个客户端 WSDL 导入器，它将这些 WSDL 注释转换为生成的代理代码中的 XML 注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-05T09:19:21.980

为此请使用 XML 文档。有很多智能元标记可以让您在其中放置代码示例、操作之间的引用、抛出的异常等。

然后你可以使用 Sandcastle（+一些你可以在 Codeplex 上找到的 GUI）来生成 chm 或 html 文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T04:56:27.840

我使用两个 XSL 文件 - 一个记录操作的 WSDL，一个记录传递数据的 XSD。

不幸的是，到目前为止，我还没有找到一个统一的解决方案，所以我使用了两个 XSLT 文件，它们分别将 WSDL 和 XSD 转换为 HTML 文档。

[WSDL Viewer](http://code.google.com/p/wsdl-viewer/)为 WSDL 完成这项工作并生成第一个 HTML 文档，而[xs3p](http://xml.fiforms.org/xs3p/)对 XSD 文件中包含的数据执行相同的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T03:26:40.130

使用编译器的 XML 输出很好……但根据我的经验，很难在单独的注释中表达服务的完整复杂性以及预期的不变量、依赖关系等。您最好维护一个单独的真实文档（Word、HTML、Wiki）来涵盖所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-07T14:08:08.387

我会将我的接口契约放入一个通用 dll 中并分发出去。它为他们提供合同上的 xml 注释，而不提供服务的详细信息，并允许他们以离线模式实现服务以进行测试，直到他们准备好使用它。最重要的是，他们可以绕过 wsdl 并使用 ChannelFactory 创建通道。

# c# - 如何在 ASP.NET MVC 中选择数据访问方式？

> ID：823152
> 
> 赞同：1
> 
> 时间：2009-05-05T03:13:28.727
> 
> 标签：c#, asp.net-mvc, linq-to-sql, entity-framework

我已经用 C# 2.0 WinForms 编程了一段时间了。我开始接触 ASP.NET 和新的 MVC 框架以及 C# 3.5 的新特性。我只阅读了一些关于 LINQ to SQL 的内容，但已经制作了一些测试应用程序来试用它。在我的 WinForms 应用程序中，我通常有某种数据访问层，并且我自己编写了所有 SQL。当然，如果有什么东西可以为我做那个 CRUD，我完全赞成。

我按照 www.asp.net/mvc 网站上的教程做了实体框架示例和 LINQ to SQL 示例。到目前为止，它们看起来都非常相似。LINQ 感觉更像 SQL，但 Entity Framework 感觉更像 C#。

我的问题是：

1.  一种方法比另一种更好吗？
2.  一个比另一个有什么好处？
3.  是否可以看到使用任何一种方法时生成的 SQL？
4.  由于我是 ASP 世界的新手，Web 开发人员是否偏向一侧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T04:21:56.750

2：LINQ-to-SQL 具有简单的优点（但仍然设计良好） - 但也有简单的缺点；-p

*   LINQ-to-SQL 仅适用于 SQL Server（实体框架是可插入的；LINQ-to-SQL 的第 3 方变体，如 DBLinq 涵盖了其他一些提供程序）
*   实体框架支持数据（存储）模型和对象模型之间的更多抽象——LINQ-to-SQL 是文字表/列 => 类/属性[|字段]
*   LINQ-to-SQL 实际上在它*所做*的事情上更“完整” ：
    *   EF 不支持 UDF
    *   EF 不支持子表达式调用（用于自定义表达式树）
    *   EF 不支持一些“显而易见”的方法，例如`Single()`
    *   EF 没有 LINQ-to-SQL 使用的一些 TSQL 优化

目前基本上 EF 更像是一个“v1”（甚至是“v0.9”）产品。**但是**（而且重要的是）- EF 很可能在 .NET 4.0 等中**具有**适当的下一个版本，而 LINQ-to-SQL 的变化将会少得多。它[仍在维护](http://marcgravell.blogspot.com/2009/02/linq-to-sql-not-quite-dead-yet.html)中，但众所周知，Microsoft[选择](http://codebetter.com/blogs/ian_cooper/archive/2008/11/03/linq-to-sql-ef-and-the-thunderdome-solution.aspx)了 Entity Framework 作为旗舰产品（而不是从本质上将这两种产品共同进化为彼此）。你应该考虑长期计划。

目前，[我很高兴使用 LINQ-to-SQL](https://stackoverflow.com/questions/276433/do-you-think-its-advantageous-to-switch-to-entity-framework)，但 EF 是长期的......所以我使用存储库等来隐藏一些血腥的实现细节 - 有点泄漏的存储库，[但务实](http://marcgravell.blogspot.com/2009/02/pragmatic-linq.html)。

3：使用 LINQ-to-SQL，分配`TextReader`给`dataContext.Log`; `Console.Out`效果很好 - 或者我有一个写入 trace.asax。使用 EF，[ToTraceString](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/02/06/totracestring-method-in-entity-framework.aspx)。

4：我怀疑它被复杂性分解了很多。使用带有简单模型的 SQL Server 的人，或者很高兴拥有一个可以融入对象模型的存储模型的人目前倾向于使用 LINQ-to-SQL（据我所见）。具有更复杂和其他数据库的人倾向于使用 NHibernate ;-p 然后是一些 EF。我想知道当 EF 下一次在 .NET 4.0 中发布时这会发生多大的变化......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:27:45.067

使用最适合您、您的团队和您的项目的一种。只要您访问数据，您如何访问数据并不重要。

如果需要，您可以使用普通的旧 ADO.NET。

# css - CSS 分层怪癖

> ID：823156
> 
> 赞同：0
> 
> 时间：2009-05-05T03:15:30.030
> 
> 标签：css, z-index

好的，所以我有几个 div 包装在一个容器中。两个内部 div 重叠 15px；问题是我无法像我想要的那样对它们进行分层。

```
 <div class="headerButtons">
    <div id="WorkTableButton" class="WorkTableButtonActive">
        Work Table
    </div>
    <div id="additionalCostsButton" class="additionalCostsButtonInactive">
        Additional Costs
    </div>
</div> 
```

CSS看起来像这样，

```
.headerButtons{
    margin:auto;
    text-align:center;
}
.headerButtons div{
    text-align:center;
    height:27px;
    text-indent:-9999%;
    display:inline-block;
    cursor:pointer;
}

#WorkTableButton{
    width: 195px;
}

.WorkTableButtonActive{
    background: url(ui_images/WorkTableActiveButton.png) no-repeat;
    z-index:99999;
}

#additionalCostsButton{
    width: 192px;
    position:relative;
    left: -15px;

}
.additionalCostsButtonInactive{
    background: url(ui_images/AdditionalCostsInnactiveButton.png) no-repeat;
    z-index:0;
} 
```

问题是，#WorkTableButton div 仍然显示在 #additionalCostsButton 后面，即使 WorkTableButtonActive 类应用于它的哪一层是 div 的上一层...对吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T03:42:51.040

该`z-index`属性仅适用于已明确定位的元素。

您需要在 中添加一个位置`#WorkTableButton`，如下所示：

```
#WorkTableButton{
    width: 195px;
    position: relative;
} 
```

`#additionalCostsButton`之后会出现在后面`#WorkTableButton`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:26:49.443

改变

```
#additionalCostsButton {
     left: -15px;
} 
```

到

```
#additionalCostsButton {
     margin-left: -15px;
} 
```

# .net - 在 VB 和 C# 中使用 Action / Func / Delegates / Lambda 编写扩展方法

> ID：823157
> 
> 赞同：3
> 
> 时间：2009-05-05T03:15:42.683
> 
> 标签：.net, functional-programming, delegates, lambda, extension-methods

首先，我无法理解 .NET 3.5 的功能/Lambda 方面。我每天在 LINQ 中使用这些功能，但我的问题是理解实现，以及它们的真正含义（Lambda？System.Func？等）

考虑到这一点，如何实现以下目标：

例如，我想要一个 List(Of T) 的 Extension 方法，它将 List 中所有对象的属性设置为某个值，并返回更新后的 List(Of T)。它会被这样调用：

VB：

```
 Dim someList As List(Of TextBox) =  (New List(Of TextBox)).UpdateExtension(Function(txtb) txtb.Text = "something") 
```

C＃：

```
List<TextBox> someList = (new List<TextBox>()).UpdateExtension(txtb => txtb.Text = "something"); 
```

**Extension 方法在 VB 和 C# 中会是什么样子？**

IE：

```
 <Extension()> _
 Public Function UpdateExtension(Of T)(ByVal source As List(Of T), ByVal predicate As ??) As List(Of T)
        '??
 End Function 
```

干杯！

**编辑**

正如许多人指出的那样，以上可以或多或少地使用.ForEach() 来实现。但我的兴趣是了解如何实现 .ForEach() 之类的东西，即我对上述问题的解决方案的实现感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T03:20:32.920

除了您将修改列表而不是返回一个新列表之外，这只是一个`.ForEach()`调用。

要真正理解这是如何工作的，请更多地考虑`IEnumerable`s 而不是 Lists。想想为什么下面的两个表达式有相同的结果*，*为什么后者通常更可取：

```
MyEnumerable.Count() > 2
MyEnumerable.Skip(2).Any() 
```

`yield`为了帮助实现这一点，请使用 C# 的关键字重新实现一些标准的 IEnumerable 扩展。一旦你真正明白为什么第二个表现更好，你应该处于良好状态。

至于不同的基本委托类型，你只需要学习它们。将`Func`其视为您的基本公共委托，您可以在其中指定泛型类型参数的参数类型和返回类型。然后将其`Action`视为`Func`返回类型为 void`Predicate`的特殊情况以及返回类型为 bool 的特殊情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T03:27:15.650

真的，您在这里是在模仿和匹配扩展方法。它几乎是 Select 和 ForEach 的组合。看来您需要一种方法，该方法允许您修改列表的元素并返回原始枚举。以下应该为您解决问题。

VB.Net

```
<Extension()> _
Public Function UpdateExtension(Of T)(ByVal source As IEnumerable(Of T), ByVal del As Action(Of T)) As IEnumerable(Of T)
  For Each cur in source
    del(cur)
  Next
  Return source
End Function 
```

C＃

```
public static IEnumerable<T> UpdateExtension<T>(this IEnumerable<T> source, Action<T> del) {
  foreach ( var cur in source ) {
    del(cur);
  }
  return source;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T03:36:02.617

扩展是通过静态方法在静态类中实现的，这些静态方法将扩展的目标作为第一个参数，前面有 this 关键字。为了实现你的例子，我会这样做：

```
public static class ListBoxExtensions
{
  public static List<TextBox> SetToValue(this List<TextBox> txtBoxes, string sValue)
  {
    txtBoxes.ForEach(txtBox => txtBox.Text = sValue);
    return txtBoxes;
  }
} 
```

并在带有 3 个文本框的 Windows 窗体上使用它：

```
private void Form1_Load(object sender, EventArgs e)
{
  List<TextBox> boxes = new List<TextBox>
                        {
                          textBox1,
                          textBox2,
                          textBox3
                        }.SetToValue("Hello");
} 
```

对不起 - 不要说 VB。

希望这可以帮助。

# configuration - Postfix / Spamassassin：未送达的邮件退回给发件人

> ID：823158
> 
> 赞同：-2
> 
> 时间：2009-05-05T03:16:27.423
> 
> 标签：configuration, email, postfix-mta, spamassassin

我在新配置的邮件服务器上遇到问题，其中欺骗来自本地域的垃圾邮件实际上被邮件服务器接受，邮件没有按原样发送，spamassassin 将其标记为垃圾邮件，然后发送电子邮件“未投递的邮件退回给发件人”给欺骗的本地用户。

我知道有一种方法可以在配置中解决这个问题，但我不知道在哪里，我希望有人能指出我正确的方向。

需要明确的是，邮件服务器没有中继，这只是本地用户问题。我希望 postfix 拒绝任何来自本地用户的非内部发送的电子邮件。它会停止这个问题。

这是一封电子邮件，向您展示正在发生的事情。我已将域更改为 example.com.au。

> ##############################################
> 
> 这是主机 example.com.au 上的邮件系统。
> 
> 很遗憾不得不通知您，您的邮件无法
> 发送给一个或多个收件人。它附在下面。
> 
> 如需更多帮助，请发送邮件到邮政。
> 
> 如果您这样做，请附上此问题报告。您可以
> 从附加的返回消息中删除您自己的文本。
> 
> 邮件系统
> 
> ：主机 127.0.0.1[127.0.0.1] 说：554 5.7.0 拒绝，id=11887-07 - 垃圾邮件（回复 DATA 命令的结尾）
> ？
> 报告-MTA:dns；example.com.au
> X-Postfix-Queue-ID：661DC5D1DE
> X-Postfix-Sender：rfc822；dan@example.com.au
> 到达日期：2009 年 5 月 5 日星期二 06:21:38 +1000 (EST)
> 
> 最终收件人：rfc822;dan@example.com.au
> 原始收件人：rfc822;dan@example.com.au
> 操作：失败状态：5.7.0
> 远程 MTA：dns；127.0.0.1
> 诊断代码：smtp；554 5.7.0 拒绝，id=11887-07 - 垃圾邮件？
> 
> **发件人：Berenice Penez**
> 日期：
> 2009 年 5 月 4 日星期一 22:21:41 +0200
> **收件人：**主题：是你吗，在论坛上？
> 
> 质量可靠，
> 交货不延误！
> 治病超级网店
> [http://www.xopfekec.cn/](http://www.xopfekec.cn/)
> 
> ##############################################

Postfix main.cf（重要部分，不完整）

> readme_directory = /usr/share/doc/postfix
> mydomain_fallback = localhost
> message_size_limit = 0
> mail_size_limit = 0
> myhostname = example.com.au mail_transport
> = cyrus
> mydomain = example.com.au
> inet_interfaces = all
> enable_server_options = yes
> mydestination = $myhostname,localhost.$ mydomain,localhost,example.com.au
> smtpd_sasl_auth_enable = 是
> smtpd_use_pw_server = 是
> smtpd_recipient_restrictions = permit_sasl_authenticated,permit_mynetworks,reject_unauth_destination,reject_unknown_recipient_domain,reject_unknown_sender_domain,reject_invalid_hostname
> smtpd_pw_server_security_options =
> content_filter = smtp-amavis:[127.0.0.1]:10024
> mynetworks = 127.0.0.0/8,
> 10.0.1.0/24 smtpd_client_restrictions = permit_sasl_authenticated,reject_rbl_client dnsbl.sorbs.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T05:55:52.767

几个不同的点：

*   这应该在 serverfault.com 上，但由于我不在测试版上，所以我会在这里回答。

*   *postconf -n*的输出比在 main.cf 中包含您认为的相关行要好。如果您有参数覆盖或其他自定义，还包括 master.cf 中的相关行。

*   不要接受然后像这样退回邮件。如果您使用 SpamAssassin 作为 Postfix 中的队列后过滤器（通常的运行方式），您需要标记并发送（并使用客户端规则过滤）或隔离邮件而不通知发件人。从您的问题的外观来看，您可能是反向散射源。停下来。参见例如[http://www.postfix.org/BACKSCATTER_README.html](http://www.postfix.org/BACKSCATTER_README.html)。请考虑使用 amavisd-new 将 SpamAssassin 集成到具有各种有用功能的 Postfix 中。

*   考虑将所有限制合并到 smtpd_recipient_restrictions。管理这样的限制的线性流通常比处理 smtpd_{client,helo,sender,recipient}_restrictions 之间的交互更容易。

*   要防止 Postfix 接受来自外部的邮件，请添加一个 sender_access 映射来拒绝声称来自您的域的邮件：

```
smtpd_recipient_restrictions =
  permit_sasl_authenticated,
  permit_mynetworks,
  拒绝_unauth_destination，
  check_sender_access 哈希：$config_directory/reject_mydomains
  reject_unknown_recipient_domain,
  拒绝未知发件人域，
  拒绝无效主机名

```

在reject_mydomains

```
example.com.au 拒绝你不是我

```

对于来自具有合法（？）理由使用您的域作为信封发件人的发件人的邮件（电子贺卡、邀请函，可能是一些外包服务，如调查或诸如此类），这可能容易出现误报。您可以在返回 OK 或适当限制类的 sender_access 映射之前使用 client_access 映射将您的 you-are-not-me 规则列入白名单（请参阅[http://www.postfix.org/RESTRICTION_CLASS_README.html](http://www.postfix.org/RESTRICTION_CLASS_README.html)）。

您可以使用类似的 HELO 检查来清除使用您自己的主机名/IP 或已知的错误 HELO 字符串的客户端 HELO

```
smtpd_recipient_restrictions =
  permit_sasl_authenticated,
  permit_mynetworks,
  拒绝_unauth_destination，
  check_helo_access 哈希：$config_directory/helo_checks
  check_sender_access 哈希：$config_directory/reject_mydomains
  reject_unknown_recipient_domain,
  拒绝未知发件人域，
  拒绝无效主机名

```

在 helo_checks 中：

```
example.com.au 拒绝 BAD-HELO 你不是 example.com.au
mailserver.example.com.au REJECT BAD-HELO 你不是我
localhost REJECT BAD-HELO 你不是我
localhost.localdomain REJECT BAD-HELO 你不是我
# 其中 1.2.3.4 是你服务器的 IP
1.2.3.4 拒绝 BAD-HELO 你不是我
127.0.0.1 REJECT BAD-HELO 你不是我

```

最后，订阅信誉良好的服务（例如 RBL）是一个非常好的主意。大多数用途的最佳 RBL 是[zen.spamhaus.org](http://www.spamhaus.org/ZEN/)。它可以免费用于轻载到中等负载，如果您的使用量足够高以超过其免费/付费阈值，那么成本非常值得。要在 Postfix 中配置，请添加

```
reject_rbl_client zen.spamhaus.org

```

到您的 smtpd_recipient_restrictions。在进行廉价的本地检查以节省 DNS 查询负载和延迟之后，但在诸如 reject_unverified_recipient 之类的昂贵的本地检查之前执行此操作（您没有使用该检查，并且可能从您的问题描述中不需要它）。

# php - Smarty/views/templates 中的数据库调用

> ID：823164
> 
> 赞同：1
> 
> 时间：2009-05-05T03:18:53.190
> 
> 标签：php, model-view-controller, smarty, templating

今天在工作中有人试图说服我：

```
{$obj->getTableInfo()} 
```

对于 smarty/mvc/template 来说很好，因为它使用对象方法。我争辩说，因为它调用了数据库，所以它没有地方存在，它应该在控制器中（我们实际上并不使用 MVC）。我对 MVC 和模板中使用的逻辑分离的理解是否正确？或者有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T03:21:06.430

你是对的。他错了。

如果您想正确执行 MVC，则无论以何种形式的数据库调用都应该存在于控制器中。

显然，人们会为它*应该*是什么而小便并做这样的事情，但这不是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:20:48.410

好吧，没有“官方”规则或任何东西，但我认为类似的东西属于控制器。除了显示变量之外，我在视图代码中不做任何事情，没有比允许使用`if`或`foreach`-type 循环更复杂的了。当然不会调用访问数据库的函数。这一切都应该由控制器加载，视图应该只决定是否需要显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T03:23:47.233

真的取决于它的上下文和范围。

$obj 是控制器还是模型层？这应该回答我认为它是否有效。

作为对阅读其他答案的回应。

函数名称本身就是一个简单的 getter 方法。它可以通过控制器层调用数据库。我会说没关系。特别是如果它在内存中使用某种形式的缓存。（即 getter 是 setter，因为您只想在使用一次时缓存它。）

# javascript - 为什么我无法在原型中的 mousedown 之后添加 mousemove 事件？

> ID：823174
> 
> 赞同：0
> 
> 时间：2009-05-05T03:21:40.297
> 
> 标签：javascript, object, events, mousemove

我会将我以前的 js 代码移动到更多的 OOP 风格。这是代码。

```
function addEvent( obj, type, fn ) {
  if ( obj.attachEvent ) {
    obj['e'+type+fn] = fn;
    obj[type+fn] = function(){obj['e'+type+fn]( window.event );}
    obj.attachEvent( 'on'+type, obj[type+fn] );
  } else
    obj.addEventListener( type, fn, false );
}

function test() {

}

test.prototype = {
    init: function () {

        addEvent(document, 'mousedown', this.displaydown);

    },

    displaydown : function(e){
        document.getElementById('mydiv').innerHTML = "down";
        addEvent(document, 'mousemove', this.displaymove);
    },

    displaymove : function(e){
        document.getElementById('mydiv').innerHTML = "move";
    }
}

var test0 = new test();

test0.init() 
```

mousedown 后我无法添加 mousemove 事件

```
addEvent(document, 'mousemove', this.displaymove); 
```

但是如果我写像这样的内联样式

```
addEvent(document, 'mousemove', function(e){
   document.getElementById('mydiv').innerHTML = "move";
}); 
```

没关系。看起来这两个代码做同样的事情。为什么有区别？谢谢！

* * *

编辑，

经过2个晚上的努力，我终于解决了这个问题。感谢约翰维的启发。

**此**关键字出现错误。如果是对象，this 指的是窗口而不是对象本身。解决方案是我在开始时定义了全局参数**me (me = this)**。现在好啦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T05:14:45.300

这是一个经典的 Javascript 绊脚石，与“this”键在闭包中的作用域有关。为了显示：

```
redPrinter = function() {
    this.X = 'red';
    return function() {
        return this.X;
    }
}

main = function() {
    this.X = 'blue';
    var myRedPrinter = new redPrinter();
    alert("Red printer returned: " + myRedPrinter());
}

main(); 
```

此代码将打印出来：

```
Red printer returned: blue 
```

因为“this”在该行中的范围：

```
return this.X 
```

实际上在调用时与 main() 对象相关联。

**通常有两种方法可以解决这个问题：**

**1)** 避免在函数闭包中使用 'this' 关键字。要以这种方式修复您的代码，我只需将所有事件绑定收集在一个地方而不是级联它们，从而从“displaydown()”和“displaymove()”中删除“this”引用：

```
test.prototype = {
    init: function () {
        addEvent(document, 'mousedown', this.displaydown);
        addEvent(document, 'mousemove', this.displaymove);
    },

    displaydown : function(e){
        document.getElementById('mydiv').innerHTML = "down";
    },

    displaymove : function(e){
        document.getElementById('mydiv').innerHTML = "move";
    }
} 
```

或者

**2）** 使用函数currying在定义时绑定范围。我从 Prototype 库中提取了 bind() 方法来说明：

```
// declare the global bind() method for all functions
Function.prototype.bind = function(obj) {
    var method = this,
    temp = function() {
        return method.apply(obj, arguments);
    };
    return temp;
} 

test.prototype = {
    init: function () {
        addEvent(document, 'mousedown', this.displaydown);
    },

    displaydown : function(e){
        document.getElementById('mydiv').innerHTML = "down";

        // note that we bind the method object here
        addEvent(document, 'mousemove', this.displaymove.bind(this));
    },

    displaymove : function(e){
        document.getElementById('mydiv').innerHTML = "move";
    }
} 
```

这里的重要变化是：

```
this.displaymove.bind(this) 
```

它基本上说，“当您调用 displaymove() 时，将关键字 'this' 重新范围为原始范围上下文而不是当前的 Event 对象。

# perl - 如果我有 t 统计量和 df（在 Perl 中），我如何计算 p 值？

> ID：823177
> 
> 赞同：4
> 
> 时间：2009-05-05T03:22:59.263
> 
> 标签：perl, statistics

我编写了一个执行许多单样本 t 检验的 Perl 脚本。我得到了数千个带有自由度 (df) 的 t 统计量。我需要升级脚本以返回它们的 p 值（有太多无法在表中手动查找它们）。是否有某种公式可以使用 t-statistic 和 df 作为输入？我希望有人可以帮助我解决这个问题，非常感谢！

AA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T07:42:04.663

使用[Statistics::Distributions](https://metacpan.org/pod/Statistics::Distributions)看起来很简单：

```
print Statistics::Distributions::tprob($dof,$tstat); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T07:32:55.967

对 MetaCPAN 的搜索显示以下内容：

[https://metacpan.org/pod/Statistics::Distributions](https://metacpan.org/pod/Statistics::Distributions)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T04:34:10.623

如果您正在进行双尾检验，那么您的 p 值 = 2*P(T > t)，其中 t 是您计算的检验统计量。因此，本质上，您需要一种方法来对 T-dist 进行建模以进行积分（从 t 到 INFINITY 的 T-dist）。这是一个演示： http: [//www.stat.tamu.edu/~west/applets/tdemo.html](http://www.stat.tamu.edu/~west/applets/tdemo.html)

我不熟悉 Perl 及其库，但希望这能让你入门。您可以编写一个基本的积分器并检查一些值以确保它足够准确。

# ios - 如何在 iPhone 上获取 IMEI？

> ID：823181
> 
> 赞同：22
> 
> 时间：2009-05-05T03:24:39.977
> 
> 标签：ios, objective-c, iphone, imei

我想在 iPhone 上获取 IMEI。我尝试使用以下代码：

```
#import "Message/NetworkController.h"
NetworkController *ntc=[[NetworkController sharedInstance] autorelease];
NSString *imeistring = [ntc IMEI]; 
```

但是找不到 NetworkController。

我还发现我可以使用以下方法获得 uniqueIdentifier：

```
UIDevice *myDevice = [UIDevice currentDevice];
NSString *identifier = myDevice.uniqueIdentifier; 
```

但这不能帮助我获得 IMEI。

如何在 iPhone 上获取 IMEI？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-01-15T07:53:17.103

您无法再在 iPhone 上获取 IMEI。您可能必须改用 UDID。查看其他答案。

* * *

过去，您可以使用发布在 ericasadun.com 上的头文件“Message/NetworkController.h”。 [http://ericasadun.com/iPhoneDocs300/_network_controller_8h-source.html](http://ericasadun.com/iPhoneDocs300/_network_controller_8h-source.html)（现已删除）

您可以将 NetworkController.h 文件和私有框架“Message.framework”添加到您的项目中，然后导入该头文件以使用我找到的原始方法来获取 imei 编号：

```
NetworkController *ntc = [NetworkController sharedInstance];
NSString *imeistring = [ntc IMEI]; 
```

那个黑客不再起作用了。应用程序将被 Apple 拒绝。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-05T04:17:36.917

您无法在 iPhone 上以编程方式找到 IMEI。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T09:46:39.140

没有官方获取方法，但是在 Apple 的私有框架`CoreTelephony.framework`中，有一种方法`CTGetIMEI`可能对您有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-05T04:20:36.223

我敢肯定，你不能轻易做到这一点是有原因的。自动解锁应用程序？我不这么认为。我敢肯定 Apple 和 AT&T 也不会太喜欢它。

*#06# 是手动获取的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-01T10:47:38.583

我只在 stackoverflow 中进行了搜索，结论是 Apple 在 iOS 6 之后不再允许查找手机 EMEI。

您可以使用 UDID 识别设备。我在这里找到了答案[https://stackoverflow.com/a/19927376/2283308](https://stackoverflow.com/a/19927376/2283308)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T09:52:35.070

将头文件“CoreTelephony.h”添加到您的项目中

核心电话.h

```
struct CTServerConnection
{
    int a;
    int b;
    CFMachPortRef myport;
    int c;
    int d;
    int e;
    int f;
    int g;
    int h;
    int i;
};

struct CTResult
{
    int flag;
    int a;
};

struct CTServerConnection * _CTServerConnectionCreate(CFAllocatorRef, void *, int *);

void _CTServerConnectionCopyMobileIdentity(struct CTResult *, struct CTServerConnection *, NSString **); 
```

将以下代码添加到您的课程中

```
#import "CoreTelephony.h"

struct CTServerConnection *sc=NULL;
struct CTResult result;
void callback() { } 
```

现在，您可以轻松获得imei

```
 NSString *imei;
_CTServerConnectionCopyMobileIdentity(&result, sc, &imei); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-23T17:11:13.393

[https://www.telesign.com/products/phone-id](https://www.telesign.com/products/phone-id)

一家名为 TeleSign 的公司提供了一个 SDK，它可以获取设备的 IMEI 号码（除了运营商、设备所有者的家庭地址等其他内容的列表之外）。商店中一些最大的应用程序使用此提供程序（如 Tinder 和 Evernote）。我不为公司工作，也不曾有过，也没有过想，而且我从未使用过他们的任何产品。我也不知道苹果是否会拒绝这种 API 的使用。但如果你想要一个 Swift/Objecive-C 接口来获取 IMEI 号码，这就是其中之一。

# c# - 如何找出在 IE 中显示的“类型”文档

> ID：823182
> 
> 赞同：1
> 
> 时间：2009-05-05T03:24:52.270
> 
> 标签：c#, internet-explorer, bho

我正在使用 c# 为 IE 创建一个按钮，该按钮执行某些操作，这些操作都依赖于作为 PDF 文档的文档。如果文档类型不是 PDF，但不确定 IE 如何将文档移交给 adobe 和阅读器负责，我正在尝试设置保护以防止发生任何操作。我同时使用 SHDocWv 已经查看了 WebBrowserClass 对象，但不确定如何解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T11:24:22.600

做这个AFAIK有点问题。

*IWebBrowser2::Type*属性的值取决于您安装的处理 PDF 的插件，因为某些插件为 PDF 文件（如 Adob​​e）创建 HTML 包装器，因此您将“HTML 文档”作为类型，而某些插件不不要这样做（比如 Foxit），所以你不能只转发这个。

因此，如果您获得了带有 HTML 包装器的 PDF，您可以使用*IHTMLDocument2::mimeType*来找出文档的确切类型（JPEG/GIF/PNG/等文件都被浏览器包装在 HTML 中）。但据我所知，它也不可靠，例如在我的机器上，它为 HTML 文档返回“Firefox 文档”，因为 .html 文件与 Firefox 相关联：s 但我没有测试是否是 PDF 的情况。

另一种选择是使用*GetUrlCacheEntryInfoEx* API 调用来获取存储文档的本地浏览器缓存中的文件，然后读取它（仅文件的开头，我认为只有前 256 个字节很重要）并使用您刚刚读取的数据调用*FindMimeFromData*和它将返回 mime 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T03:29:19.890

检查文档的 mime 类型或查看 webbrowser 的 window.location.href... 如果正在显示 pdf，您将能够找到它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-12T05:41:55.560

另一个好方法是执行以下操作..

1] 将 Document 对象转换为 IPersist，然后使用 .GetClassID(..) 提取 CLSID。2] pInvoke ProgIDFromCLSID 以提取 progId 3] 将 progID 与已知的 COM 对象/应用程序进行匹配。

# security - 在 Active Directory 中执行 LDAP 查询的最低安全权限

> ID：823184
> 
> 赞同：5
> 
> 时间：2009-05-05T03:25:40.787
> 
> 标签：security, active-directory, ldap, single-sign-on, user-accounts

我们公司正在尝试使用 Active Directory (Windows Server 2003) 和 LDAP 实现一些单点登录应用程序。我想尽可能多地锁定用于进行这些 LDAP 查询的帐户。配置此类帐户的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T14:46:45.283

您可以通过轻松使用委派向导来限制/允许用户在 AD 中可以看到/查询的内容。您可以通过右键单击 OU 并选择委派控制轻松访问委派向导。您可能还想看看这些文章：

[Active Directory 委派中的默认安全问题](http://support.microsoft.com/kb/235531)

[委派 Active Directory 管理的最佳实践：委派在 Active Directory 中的工作方式](http://technet.microsoft.com/en-us/library/cc773317.aspx)

[委派 Active Directory 管理的最佳实践：案例研究：委派方案](http://technet.microsoft.com/en-us/library/cc773358.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T03:28:11.217

请参阅[如何配置 Active Directory 以允许匿名查询](http://support.microsoft.com/kb/320528)以实现最低安全性。

默认情况下，Microsoft LDAP 实施不支持安全 LDAP。要使用 SSL 设置安全 LDAP，必须在 LDAP 服务器和 LDAP 客户端上都安装证书。在许多情况下，LDAP 服务器是运行 Active Directory 的域控制器。

可以通过多种方式配置使用 SSL 运行安全 LDAP 所需的证书。这个概念总是一样的：

*   Active Directory 域控制器使用由受信任的证书颁发机构颁发的特殊证书。
*   客户端计算机信任将证书颁发给 Active Directory 域控制器的证书颁发机构。

# eclipse - 在 Eclipse 中共享多模块项目时使用 Subversive 的最佳方式是什么？

> ID：823186
> 
> 赞同：1
> 
> 时间：2009-05-05T03:26:43.250
> 
> 标签：eclipse, svn, maven-2, m2eclipse, subversive

我正在尝试将 SpringSource Tool Suite 2.0.0 中的多模块 Maven 项目（使用 m2eclipse 插件）共享到 Subversion 服务器（Eclipse 的 Subversive 插件）。我发现 svn:ignore 属性没有传播到父项目的子模块：我需要右键单击该属性并运行“递归应用...”。此外，如果子模块的根文件夹还没有在 SVN 存储库中，它将不起作用：首先，我需要签入根文件夹，然后右键单击该属性并运行“递归应用...”。

我错过了什么吗？请描述您解决问题的方法。

PS该项目具有嵌套结构：

```
PARENT
+ component A
  - module AA
  - module AB
+ component B
  - module BA
+ component C
  - module CA
  - module CB
  - module CC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:52:22.977

如果 Eclipse 插件“颠覆性”GUI 不够先进，无法支持您想要的那种属性设置，那么命令行可能会更有效。

```
cd PARENT
ls -s | xargs svn propset -R -F ignore.txt svn:ignore 
```

这样，您`svn:ignore`只适用于已经提交的目录（和子目录），而无需先提交`PARENT`。

如果你在 Windows 上，像[GnuWin32](http://gnuwin32.sourceforge.net/)这样的包可以提供帮助（或者有多种选择，比如 PowerShell）

# vim - Vim 可以对子例程参数进行 Fortran 补全吗

> ID：823193
> 
> 赞同：6
> 
> 时间：2009-05-05T03:30:48.903
> 
> 标签：vim, autocomplete, intellisense, fortran

我不知道这是否可能，但仍然......问没有坏处。

我正在使用 Vim 编辑新旧的 fortran 文件（.for 和 .f90）。我正在尝试完成，类似于 Visual Studio，因此当我在文件中定义了多个子例程时：

```
subroutine init ( ibc, nquad, ul, ur, xl, xr )
subroutine output ( f, ibc, indx, nsub, nu, ul, ur, xn )
subroutine phi ( il, x, phii, phiix, xleft, xrite ) 
```

我在某个地方给他们打电话：

```
call init(<cursor is here> 
```

我得到了参数列表，所以我不必记住它们。如果我理解正确，VS 将其称为“智能感知”。

Vim（GVim72）中是否有类似的东西，如果有，如何让它工作？任何提示表示赞赏。

* * *

***ldigas 编辑：***如果我能得到声明行，我也会很满意，也就是说，当我输入：

```
call init(<cursor is here> 
```

并按完成键，Vim 会在整行中打孔，例如

```
call init( ibc, nquad, ul, ur, xl, xr ) 
```

* * *

***ldigas edit2：***到目前为止撤回了 2 个答案......很有趣。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T03:38:54.623

最接近的应该是[vim intellisense](http://insenvim.sourceforge.net/)。不幸的是，它还不支持 Fortran...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T06:05:28.373

***部分答案：***

好的，我得到了第一部分：

Vim 的整行补全被调用

```
<Ctrl-X, Ctrl-L> 
```

（如果它在同一个文件中，顺便说一句，通常不是）

不幸的是，如果子程序声明看起来像

```
call assemble ( adiag, aleft, arite, f, h, indx, nl, node, nu, nquad, &
nsub, ul, ur, xn, xquad ) 
```

（其中“&”是续号）这种方式行不通。有没有人（来吧，脚本 vimers）知道避免这种行为的方法吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-07T01:28:34.343

快速和肮脏：[旺盛的 CTAGS](http://ctags.sourceforge.net/)

VIM 非常了解标签。不幸的是，这并不是你想要的那种巧妙的行为：你最终会在窗口之间弹跳，但我认为这很好，因为我没有别的东西。

可能有用的是[Photran](http://www.eclipse.org/photran/)，但我从未使用过它。但是，由于它是开源且可配置的，您可能会发现有人已经走上了您的道路，例如，似乎有一个[VIM 插件](http://www.eclipse-plugins.info/eclipse/plugin_details.jsp?id=1714)。YMMV。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T04:07:07.457

我认为您可能获得的最接近的是 vim 功能，它的工作原理类似于 intellisense，但让我们使用语法高亮文件作为基础。以我的 .vimrc 文件为例。基本上它为每个列出的类型设置自动完成：如果文件类型被omnisense支持，它使用它，否则它使用语法高亮文件。

```
syntax on
colorscheme elflord
set tabstop=4
set shiftwidth=4
set nu!
set et!
filetype on
filetype plugin on
autocmd FileType python set omnifunc=pythoncomplete#Complete
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
autocmd FileType css set omnifunc=csscomplete#CompleteCSS
autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags
autocmd FileType php set omnifunc=phpcomplete#CompletePHP
autocmd FileType sql set omnifunc=sqlcomplete#Complete
autocmd FileType c set omnifunc=ccomplete#Complete
if has("autocmd") && exists("+omnifunc")
    autocmd Filetype *
        \   if &omnifunc == "" |
        \       setlocal omnifunc=syntaxcomplete#Complete |
        \   endif
endif 
```

另一种可能性是查看 vim.org 网站。例如，我在那里找到了以下内容（即使它不完全是您要查找的内容，也只是一个示例）

[fortran_codecomplete.vim ：完整的 fortran 构造](http://www.vim.org/scripts/script.php?script_id=2487)

希望这可以帮助

# python - Python中的Yaml合并

> ID：823196
> 
> 赞同：13
> 
> 时间：2009-05-05T03:31:41.850
> 
> 标签：python, configuration, yaml

所以我正在玩弄让自己（当然还有任何喜欢使用它的人）在 Python 中为 Pygame 制作一个小样板库的想法。我想要一个系统，其中应用程序的设置随 yaml 文件一起提供。

因此，我认为如果库提供默认的 yaml 树并将其与用户提供的树合并，将会很有用。为了可用性起见，我想知道是否有任何人可以预测一个例程，其中：

在树中用户提供的 yaml 与默认值重叠的任何情况下，用户提供的分支都会替换库提供的分支。

在用户提供的 yaml 不与默认树重叠的任何情况下，默认树仍然存在。

附加用户提供的 yaml 提供的树中的任何多余分支。

我知道这个解释很冗长，因为我的要求可能很清楚。我想知道免费获得是否有点多。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-05T03:46:17.600

您可以使用[PyYAML](http://pyyaml.org/)解析文件，然后使用以下函数合并两棵树：

```
def merge(user, default):
    if isinstance(user,dict) and isinstance(default,dict):
        for k,v in default.iteritems():
            if k not in user:
                user[k] = v
            else:
                user[k] = merge(user[k],v)
    return user 
```

或者，您可以在调用此函数之前对用户树进行[深度复制](http://docs.python.org/library/copy.html)。

# c# - 测试 nHibernate 映射

> ID：823200
> 
> 赞同：4
> 
> 时间：2009-05-05T03:35:46.050
> 
> 标签：c#, unit-testing, nhibernate, fluent-nhibernate

我刚刚开始了一个使用 nHibernate 和 Fluent 进行映射的新项目。架构师给我发了一个数据库，我从中生成了数百个实体类和相应的 Fluent 映射文件。我知道这不是理想的 DDD 做事方式，但生活很少是理想的。

我想要做的是测试所有映射是否正确，列映射正确，OneToMany，ManyToMany 等。是否有一些自动化或简单的方法可以做到这一点？我考虑过编写一个简单的存储库，它从每个实体加载记录并确保没有引发异常，但大多数表中还没有数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T09:07:47.157

查看 Fluent NHibernate 中的[PersistenceSpecification](https://github.com/jagregory/fluent-nhibernate/wiki/Persistence-specification-testing)。它几乎不是完美的，但它可以很好地处理很多简单的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:58:14.527

为了测试 ORM 映射，我使用的一种节省了工作时间的策略涉及在单元测试中使用行测试方法，例如 MBUnit 或 NUnit 中的 RowTest 属性。这将使您不必为不同的行值编写单独的单元测试。观看[此](http://www.dimecasts.net/Content/WatchEpisode/103)网络广播以快速入门。

关于数据库，您可以遵循 2 种策略：如果您需要在特定的数据库实例或引擎中进行测试，您可以使用事务并确保在断言之后回滚对数据库的所有写入。如果您可以使用自己的实例和引擎，则可以使用 SQLLite 或 SQL CE 作为仅用于单元测试的数据库。由于此数据库仅用于单元测试，因此您每次运行单元测试时始终可以创建一个全新的数据库。

# c# - MEF 创建策略

> ID：823204
> 
> 赞同：2
> 
> 时间：2009-05-05T03:36:13.647
> 
> 标签：c#, mef

我正在尝试将共享部件创建策略用于 MEF 导出。然而，它似乎不像我想的那样工作。我在我的应用程序中做了两次合成，每次都得到一个新的对象副本。我已经通过向对象实例化添加实例计数器来证明这一点

```
 static int instCount = 0;

    public FakeAutocompleteRepository()
    {
        instCount++;
        ...
    } 
```

并在调试中运行它。事实上，我第二次进行组合时，我得到了一个新的 FakeAutocompleteRepository 副本，其中 instCount = 2。导出部分包含

```
[PartCreationPolicy(CreationPolicy.Shared)]
[Export(typeof(IAutocompleteRepository))]
[ExportMetadata("IsTesting", "True")]
class FakeAutocompleteRepository : IAutocompleteRepository
{ ... } 
```

是否有一些技巧可以为后续请求获取相同的实例？如果这是我在作曲期间正在做的事情，我就是这样做的

```
var catalog = new AggregateCatalog();
                catalog.Catalogs.Add(new AssemblyCatalog(System.Reflection.Assembly.GetExecutingAssembly()));
                catalog.Catalogs.Add(new DirectoryCatalog("."));
                var container = new CompositionContainer(catalog);
                var batch = new CompositionBatch();
                batch.AddPart(this);
                container.Compose(batch);

                if (null != ConfigurationSettings.AppSettings["IsTesting"] && bool.Parse(ConfigurationSettings.AppSettings["IsTesting"]))
                    repository = container.GetExports<IAutocompleteRepository>().Where(expDef => expDef.Metadata.Keys.Contains("IsTesting")).Single().GetExportedObject(); 
```

基本上我试图在测试期间强制使用特定的组合。如果您对这些作品的单元测试有更好的想法，那么我会全力以赴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T05:39:31.307

我没有在您的代码中看到任何会导致您创建多个部分的具体内容。您是否为每个组合创建不同的容器？如果你是，这就是你得到单独实例的原因。

至于如何结合组合测试和单元测试，这里有一些[讨论](http://mef.codeplex.com/Thread/View.aspx?ThreadId=55271 "如何使用模拟单元测试我的可组合部分")。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T01:22:21.033

我为单元测试所做的是避免组合。例如（我在这里使用 WPF 和 MVVM），假设你想测试这个 ViewModel：

```
[Export("/MyViewModel")]
public class MyViewModel
{
    [ImportingConstructor]
    public MyViewModel(
        [Import("/Services/LoggingService")] ILoggingService l)
    {
        logger = l;
    }

    private ILoggingService logger { get; set; }

    /* ... */
} 
```

我不想在每次进行单元测试时都实例化完整的日志记录服务，所以我有一个实现 ILoggingService 的 MockLoggingService 类，它只会吞下所有日志消息，（或检查是否正在生成正确的消息，如果你在意）。然后我可以在我的单元测试中这样做：

```
MyViewModel target = new MyViewModel(new MockLoggingService()); 
```

# text - 有没有办法在 C++ 中将字符串转换为纯代码？

> ID：823207
> 
> 赞同：11
> 
> 时间：2009-05-05T03:37:09.183
> 
> 标签：text

我知道它可以从 .txt 文件中读取，然后将其中的各个部分转换为字符串、char 和 int 值，但是是否可以获取一个字符串并将其用作程序中的真实代码？

* * *

### 代码：

```
string codeblock1="cout<<This is a test;";
string codeblock2="int array[5]={0,6,6,3,5};}";
int i;
cin>>i;
if(i)
{
execute(codeblock1);
}
else
{
execute(codeblock2);
} 
```

哪里`execute`是从文本转换为实际代码的函数（我不知道是否真的有一个名为 execute 的函数，我将它用于我的示例）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-05T03:46:58.690

In C++ there's no simple way to do this. This feature is available in higher-level languages like Python, Lisp, Ruby and Perl (usually with some variation of an `eval` function). However, even in these languages this practice is frowned upon, because it can result in very unreadable code.

It's important you ask yourself (and perhaps tell us) why you want to do it?

Or do you only want to know if it's possible? If so, it is, though in a hairy way. You can write a C++ source file (generate whatever you want into it, as long as it's valid C++), then compile it and link to your code. All of this can be done automatically, of course, as long as a compiler is available to you in runtime (and you just execute it with `system`). I know someone who did this for some heavy optimization once. It's not pretty, but can be made to work.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T03:41:00.890

您可以创建一个函数并解析您喜欢的任何字符串，并从中创建一个数据结构。这被称为解析树。随后，您可以检查您的解析树并生成必要的动态结构来执行其中的逻辑。解析树随后被转换为执行的运行时表示。

所有的编译器都是这样做的。他们获取您的代码并基于此生成机器代码。在您的特定情况下，您希望一种语言为自己编写代码。通常这是在代码生成器的上下文中完成的，它是更大的构建过程的一部分。如果你编写一个程序来解析你的语言（考虑这个操作的 flex 和 bison）来生成代码，你可以获得你想要的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T03:50:37.030

Many scripting languages offer this sort of feature, going all the way back to `eval` in LISP - but C and C++ don't expose the compiler at runtime.

There's nothing in the spec that stops you from creating and executing some arbitrary machine language, like so:

```
char code[] = { 0x2f, 0x3c, 0x17, 0x43 }; // some machine code of some sort
typedef void (FuncType*)();               // define a function pointer type
FuncType func = (FuncType)code;           // take the address of the code
func();                                   // and jump to it! 
```

but most environments will crash if you try this, for security reasons. (Many viruses work by convincing ordinary programs to do something like this.)

In a normal environment, one thing you could do is create a complete program as text, then invoke the compiler to compile it and invoke the resulting executable.

If you want to run code in your own memory space, you could invoke the compiler to build you a DLL (or .so, depending on your platform) and then link in the DLL and jump into it.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T04:04:25.937

First, I wanted to say, that I never implemented something like that myself and I may be way off, however, did you try `CodeDomProvider` class in `System.CodeDom.Compiler` namespace? I have a feeling the classes in `System.CodeDom` can provide you with the functionality you are looking for.

Of course, it will all be .NET code, not any other platform

Go [here for sample](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T03:43:10.917

是的，您只需要构建一个编译器（可能还有一个链接器）就可以了。

可以将 Python 等多种语言嵌入到 C/C++ 中，因此这可能是一种选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T03:44:11.490

这有点可能，但不仅仅是直接的 C/C++。您将需要下面的一些层，例如 LLVM。

查看[c-repl](http://neugierig.org/software/c-repl/)和[ccons](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2009-April/004960.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T03:44:57.073

One way that you could do this is with [Boost Python](http://www.boost.org/doc/libs/release/libs/python/doc/). You wouldn't be using C++ at that point, but it's a good way of allowing the user to use a scripting language to interact with the existing program. I know it's not exactly what you want, but perhaps it might help.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T03:49:59.450

Sounds like you're trying to create "C++Script", which doesn't exist as far as I know. C++ is a *compiled language*. This means it always must be compiled to native bytecode before being executed. You could wrap the code as a function, run it through a compiler, then execute the resulting DLL dynamically, but you're not going to get access to anything a compiled DLL wouldn't normally get.

You'd be better off trying to do this in Java, JavaScript, VBScript, or .NET, which are at one stage or another *interpreted languages*. Most of these languages either have an `eval` or `execute` function for just that, or can just be `include`d as text.

Of course executing blocks of code isn't the safest idea - it will leave you vulnerable to all kinds of data execution attacks.

My recommendation would be to create a scripting language that serves the purposes of your application. This would give the user a limited set of instructions for security reasons, and allow you to interact with the existing program much more dynamically than a compiled external block.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-01T17:10:24.627

Not easily, because C++ is a compiled language. Several people have pointed round-about ways to make it work - either execute the compiler, or incorporate a compiler or interpreter into your program. If you want to go the interpreter route, you can save yourself a lot of work by using an existing open source project, such as [Lua](http://lua.org)

# c# - 防止窗口焦点改变

> ID：823209
> 
> 赞同：15
> 
> 时间：2009-05-05T03:38:11.490
> 
> 标签：c#, wpf, focus, mouseevent

我正在尝试用一点代码来帮助残疾人，以帮助他更轻松地玩游戏。他仅限于一个轨迹球和一个按钮。

目前，他使用屏幕键盘并设法使用它玩其他游戏。我创建了一小段代码来尝试让他的生活更轻松。它使用悬停按钮作为键。当鼠标指针进入按钮时，它向下发送键，当它离开按钮时，它向上发送键。

我有这个工作，我认为（或希望）他会喜欢它。当我测试它时，它工作得很好。

我想向它添加一项功能。如果他在我的控制下单击，我想发送不同的击键。没问题，我能做到。但是，当我这样做时，窗口焦点从游戏转移到我的控制。

我在 MSDN 上找到了这个：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/48737c2b-7e6f-4ade-ac1c-7dd2f5cc2b88/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/48737c2b-7e6f-4ade-ac1c-7dd2f5cc2b88/)

这可以防止我的窗口激活，但它仍然会导致游戏失去焦点。我可以将焦点重新回到游戏上，但我希望它永远不会失去焦点。

我正在用 C# 和 WPF 进行编码。

有人对您如何做到这一点有任何想法吗？

约翰芬顿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-11T20:31:52.630

挂钩一些低级的鼠标和键盘挂钩，您的应用程序不需要窃取焦点并将其返回。

看看[这个简单的 WPF 应用程序](http://pastie.org/1553970)，它很大程度上基于[Stephen Toub 的一篇文章](http://blogs.msdn.com/b/toub/archive/2006/05/03/589468.aspx)。

每当您在任何地方左键单击时，都会发送第二次左键单击，因此您可以有效地双击。您可以通过在用户点击时隐藏您的应用来实现您的目标，这样您的应用就不会窃取焦点。然后检测点击的位置，并确定您的某个按钮是否会被按下，并采取相应的行动。

我意识到我正在从过去中挖掘出来，但希望有人会发现这个答案有帮助。干杯，对你有好处，因为你把你的程序变成了帮助人类的同胞！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-14T03:06:49.817

您可以尝试取消此博客中提到的事件 PreviewLostKeyboardFocus：

[http://immortalratblog.blogspot.com/2008/03/canceling-keyboard-focus-change-in-wpf.html](http://immortalratblog.blogspot.com/2008/03/canceling-keyboard-focus-change-in-wpf.html)

我猜模拟按键会失去焦点？

# php - PHP 上传文件

> ID：823211
> 
> 赞同：6
> 
> 时间：2009-05-05T03:38:17.463
> 
> 标签：php, html, file, upload, file-upload

我在用 PHP 上传文件时遇到问题。当我提交时， $_FILES[] 为空。我觉得这是一个非常n00b的问题：/

我的表格：

```
<form method="post" action="uploadfile.php">
<input type="hidden" name="MAX_FILE_SIZE" value="300000" />
Image: <input name="ImageFile" type="file" /><br />
<input type="submit" value="Add Image" /><br />
</form> 
```

相关php.ini：

```
;;;;;;;;;;;;;;;;
; 文件上传；
;;;;;;;;;;;;;;;;

; 是否允许 HTTP 文件上传。
文件上传 = 开

; HTTP 上传文件的临时目录（如果没有，将使用系统默认值）
; 指定的）。
upload_tmp_dir = "c:\php5\upload\"

; 上传文件的最大允许大小。
upload_max_filesize = 300M

```

c:\php5\upload\ 可由 IUSR_HOSTNAME 写入

关于我还应该检查什么的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-05T03:39:59.160

确保您的表单标签具有此属性：`enctype="multipart/form-data"`

没有它，文件将无法上传。

# java - 从 JFrame 中删除 JPanel

> ID：823217
> 
> 赞同：0
> 
> 时间：2009-05-05T03:39:34.683
> 
> 标签：java, swing, graphics, jogl

我目前正在为使用 JOGL 设计的游戏制作介绍屏幕。我希望介绍是一个 JPanel，有几个按钮可以在开始游戏之前更改选项。

所以，我有 JFrame，我添加了一个 GLCanvas。GLCanvas 还包含一个 GLEventListener。最后，我添加了 JPanel。

我已经重写了 JPanel paintComponent 方法来设置背景图像。我在面板中有几个按钮。每当您单击“播放”按钮时，它都会调用一个函数，该函数执行以下操作：

frame.remove(JPanel); frame.repaint(); 动画师.start();

发生的情况是我的 JPanel 正确消失了，但是当调用 repaint 时，我的框架只是充满了灰色。我知道动画师正在正确启动，因为我的 GLEventListener 中的显示方法被调用。

有谁知道那里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T03:50:34.143

你的 LayoutManager 是什么？如果您没有指定一个，那么通过添加 JPanel 来替换 GLCanvas。

我会让你的代码这样做：
frame.remove(JPanel); **frame.add(glcanvas);** 动画师.start();
您可能需要输入 frame.revalidate()。我现在不知道这一切是如何运作的。

# javascript - 如何使用 Css 或 javascript 创建圆角

> ID：823218
> 
> 赞同：0
> 
> 时间：2009-05-05T03:39:39.270
> 
> 标签：javascript, css

### 复制：

> [使用 CSS 创建圆角的最佳方法是什么？](https://stackoverflow.com/questions/7089/what-is-the-best-way-to-create-rounded-corners-using-css/7099)

我想创建一个包含一些列的表格，其中每列都有一个圆角。

我不是 CSS 专家。我认为js解决方案也应该没问题。

如果有人做到了。如果他们能提供帮助，我将不胜感激。

我没有使用 Jquery。

谢谢，本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T03:45:26.590

这里有 25 种使用 CSS 的不同方法的链接：

[http://www.cssjuice.com/25-rounded-corners-techniques-with-css/](http://www.cssjuice.com/25-rounded-corners-techniques-with-css/)

这是一个漂亮的角落的链接，可以用 javascript 做到这一点：

[http://www.html.it/articoli/nifty/index.html](http://www.html.it/articoli/nifty/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T03:49:36.143

在 safari、chrome（我想）、firefox 2+ 和 konquerer（可能还有其他）中，您可以使用“border-radius”在 CSS 中完成。由于它还不是规范的正式部分，请使用供应商特定的前缀

例子

```
#round-my-corners-please {
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;

} 
```

JS 解决方案通常会添加一堆小 div 以使其看起来圆润，或者它们使用边框和负边距来制作 1px 的凹角。

IMO，CSS 方式更好，因为它看起来很酷，很容易，并且会在 IE 中优雅地降级。当然，这只是客户端不在 IE 中强制执行它们的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T14:47:22.427

这是我在几个项目中所做的：

对于基于 Firefox 和 WebKit 的浏览器（尽管要注意 Chrome 在这方面存在错误），请使用其基于 CSS 边框半径的样式来处理原生圆角：

```
-webkit-border-radius: 20px;
-moz-border-radius: 20px; 
```

这些还允许您为每个角指定值，只需注意语法略有不同：

```
-moz-border-radius-bottomleft: 10px;
-moz-border-radius-bottomright: 10px;
-webkit-border-bottom-left-radius: 10px;
-webkit-border-bottom-right-radius: 10px; 
```

这些基于 CSS3`border-radius`样式，更多关于不同定义的信息在这里：[CSS：border-radius 和 -moz-border-radiuss](http://www.the-art-of-web.com/css/border-radius/)（注意这篇文章有点过时但仍然相关）。我没有对此进行研究，但我不知道有任何浏览器实现了原生 CSS3 边框半径（如果我错了，请纠正我）。

然后对于 IE，我使用[DD_roundies](http://www.dillerdesign.com/experiment/DD_roundies/)，这是我见过的最优雅的 JavaScript 解决方案，并使用原生 IE VML 来绘制角落。

如果用户有没有 JavaScript 的 IE 或使用 Opera，那么运气不好，他们不会得到圆角，但本着渐进增强的精神，这不应该成为问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T14:58:20.887

如果您想坚持使用 CSS，最好的方法已经说明：

```
-webkit-border-radius: 20px;
-moz-border-radius: 20px; 
```

但是，您正在疏远 Internet Explorer 的市场份额。

要解决这个问题，将为您的 div 创建圆形图像。[http://www.roundedcornr.com/](http://www.roundedcornr.com/)有一个图像生成器和示例代码。

一个 javascript 替代方案是一个 jQuery 插件，如 DD_Roundies。到目前为止，使用 DD_Roundies 插件是最简单的方法。[http://www.dillerdesign.com/experiment/DD_roundies/](http://www.dillerdesign.com/experiment/DD_roundies/) 您只需告诉 div 您想要半径有多大以及在哪些角落，它会自行完成所有魔法（颜色、渐变）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T03:47:59.797

大多数时候，我看到它涉及使用 css 进行巧妙的图像处理。表格和其他此类小部件由浏览器定义，因此您不能只使用它们并保证每个人都能看到相同的东西。

[http://designworkx.co.nz/](http://designworkx.co.nz/)

有一个简单的即将推出的页面，这是一个很好的简单示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T04:16:14.800

HTML 化妆标签、CSS 和 javascript 是一种更灵活的方式。

这个链接告诉算法生成任何半径的圆角的css。 [http://www.pagecolumn.com/webparts/rounded_corners.htm](http://www.pagecolumn.com/webparts/rounded_corners.htm)

# wpf - 如何更改 Vista 任务栏上的预览图像？

> ID：823219
> 
> 赞同：1
> 
> 时间：2009-05-05T03:39:56.197
> 
> 标签：wpf, windows-vista, taskbar

我们有一个这样的窗口：

```
WPF main window (with glass border)
  -> Child window - frame control 
    -> Page 
```

当用户最小化主窗口并在 Vista 任务栏上查看预览图像时，预览图像将仅显示主窗口，缺少子窗口（带有该页面）。

所以，我的问题是**如何解决这个问题？**

我应该更改预览图像吗？

如果是，如何？

# c# - ac# dll 向调用应用程序返回错误的好方法是什么？

> ID：823224
> 
> 赞同：2
> 
> 时间：2009-05-05T03:42:33.413
> 
> 标签：c#, exception, exception-handling, error-handling

我正在编写一个 dll，它是访问数据库的包装器。我对 c# 很陌生，因为我的背景是使用 perl 进行 Web 开发 LAMP，我不确定什么是向调用应用程序返回错误的好方法，以防它们将错误的参数传递给我的函数或什么不是.

我现在不知道除了可能做一些 msgbox 或抛出一些异常，但我不知道从哪里开始寻找。任何帮助或资源都会非常有用:)

谢谢~

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-05T03:47:12.093

您可能不想从您的 dll 中显示消息对话框，这是客户端应用程序的工作，作为表示层的一部分。

.Net 库程序集通常会向宿主应用程序冒泡异常，所以这就是我要研究的方法。

```
public static class LibraryClass
{
    public static void DoSomething(int positiveInteger)
    {
        if (positiveInteger < 0)
        {
            throw new ArgumentException("Expected a positive number", "positiveInteger");
        }
    }
} 
```

然后由您的主机应用程序来处理这些异常，并根据需要记录和显示它们。

```
try
{
    LibraryClass.DoSomething(-3);
}
catch(ArgumentException argExc)
{
    MessageBox.Show("An Error occurred: " + argExc.ToString());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T03:45:21.190

错误的参数通常通过抛出 ArgumentException 或其子类之一来处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T03:46:20.627

你想抛出一个异常。

看

[http://msdn.microsoft.com/en-us/library/ms229007.aspx](http://msdn.microsoft.com/en-us/library/ms229007.aspx)

对于最常见的框架异常，例如 ArgumentException 和 InvalidOperationException。也可以看看

[http://msdn.microsoft.com/en-us/library/ms229030.aspx](http://msdn.microsoft.com/en-us/library/ms229030.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T03:48:26.987

查看面向类库开发人员的设计指南：[错误引发和处理指南](http://msdn.microsoft.com/en-us/library/8ey5ey87(VS.71).aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T03:49:37.953

Dll 通常不应该创建任何类型的 UI 元素来报告错误。您可以抛出（与引发相同的含义）许多不同类型的异常，或者创建自己的异常，调用代码（客户端）可以捕获并向用户报告。

```
public void MyDLLFunction()
{
    try
    {
        //some interesting code that may
        //cause an error here
    }
    catch (Exception ex)
    {
        // do some logging, handle the error etc.
        // if you can't handle the error then throw to
        // the calling code
        throw;
        //not throw ex; - that resets the call stack
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T03:45:58.007

抛出新异常？

# iphone - 如何在iphone模拟器中让键盘消失

> ID：823229
> 
> 赞同：22
> 
> 时间：2009-05-05T03:43:50.960
> 
> 标签：iphone, keyboard, simulator

我的 iphone 应用程序中有一个文本输入框，当您在模拟器中触摸它时，键盘会弹出。但是没有办法摆脱它。其他网页给出了解决方案，但没有解释为什么它们应该起作用，而且它们对我不起作用。有人说让文本框的委托你的 uiview 然后在对象上调用 resignfirstresponder ，但它永远不会被调用。有什么建议么？任何人都可以解释实际发生的事情吗？如果我知道设计范式是什么，我可以自己弄清楚......

也许我应该放一个“开始”按钮，这样我就可以将焦点从文本字段中移开？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-05T03:54:01.170

一种方法是将对象设置为文本字段的委托并实现

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField 
```

你打电话的地方`[textField resignFirstResponder]`

这将导致键盘在他们按下返回/执行/完成按钮时消失（无论您将右下键盘键设置为什么）。

有关更多信息，请参阅[UITextFieldDelegate](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)参考。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-12-25T20:57:27.017

要关闭键盘，您可以使用 TextField Delegate。

要使用它，请按照以下步骤操作...
1\. 在您的 viewController 中。**h**添加委托声明，如下所示：

```
@interface ViewController : UIViewController **`<UITextFieldDelegate>`** {
    }
```

2\. 在您的视图控制器中。**我**调用这个方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
```

3.然后编写如下代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
    }
```

4\. 最后一步是设置 textField 的委托：

```
- (void)viewDidLoad {
        [super viewDidLoad];
        self.textField.delegate = self;
    }
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-05T03:53:09.677

`- (BOOL)textFieldShouldReturn:(UITextField *)textField`在按下返回按钮时调用您的委托。

你想打电话`[textField resignFirstResponder]`然后返回`YES`。这应该够了吧。还要确保设置了委托。如果有疑问，请添加断点或`NSLog`进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-05T17:51:06.550

您可以简单地键入以下内容：

```
textfield.endEditing(true) 
```

`textfield`你的名字在哪里`UITextField`。

# php - 使用 php 脚本更改包含路径

> ID：823260
> 
> 赞同：3
> 
> 时间：2009-05-05T03:53:38.440
> 
> 标签：php

我希望在我的 PHP 包含路径中包含其他文件夹。我看过这个问题：

[为每个站点设置 PHP 包含路径？](https://stackoverflow.com/questions/24622/setting-php-include-path-on-a-per-site-basis)

**但是**我不想复制系统路径（我想我可以但是如果系统路径更新了它就不会更新）。我宁愿简单地有一条看起来像这样的线：

ini_set('include_path', ini_get('include_path').$otherpaths);

这行得通吗，是否有一些基本的阅读，这是不好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T03:56:00.153

我想你正在寻找这个：[`set_include_path`](http://www.php.net/set_include_path)

有了它，您可以：

```
set_include_path(get_include_path() . PATH_SEPARATOR . $otherpath); 
```

# tfs - 您如何安排 TFS 2008 构建每小时运行一次？

> ID：823275
> 
> 赞同：2
> 
> 时间：2009-05-05T03:59:17.883
> 
> 标签：tfs, msbuild, build, schedule

团队资源管理器中的“新构建定义”不允许您强制构建运行频率高于每 24 小时一次。这可能吗？

无论是否已签入任何更改，我都希望测试每小时运行一次。

我认为这可以通过创建计划任务来实现，但如果可能的话，我宁愿将解决方案保留在 TFS 中。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T04:44:43.857

感谢您的建议。

通过在计划任务中运行以下命令，我实现了我所追求的目标：

```
TFSBuild start <<TeamFoundationServer>> <<TeamProject>>
 <<BuildTypeName>> 
```

参考：http: [//msdn.microsoft.com/en-us/library/bb668975.aspx](http://msdn.microsoft.com/en-us/library/bb668975.aspx)

干杯，克里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T04:02:29.373

“我希望测试每小时运行一次，无论是否已签入任何更改。” - 为什么？这将实现什么？如果什么都没有改变，那么重建是毫无意义的。

建议您设置在签入时排队构建。

# wcf - 如何对使用 WCF Rest Starter Kit 构建的 WCF 客户端进行单元测试

> ID：823276
> 
> 赞同：2
> 
> 时间：2009-05-05T03:59:28.787
> 
> 标签：wcf, unit-testing, httpclient

我使用 REST Starter 工具包创建了一些 POX 服务。起初，为服务层创建单元测试有点复杂，但最终，它设计得很好，我成功地模拟了上下文并设定了期望。

但是，我现在从客户端开始，并且在弄清楚如何模拟事物时遇到了一些问题。这不是那么直截了当。

所以，我有这个示例方法，它使用数据合同和 XML 作为传输通过 HTTP 发布一些数据。

```
public class ServiceClient: IService

{
    private const string uri_template = "http://{0}:{1}/SomeService.svc/";
    private readonly HttpClient http = new HttpClient();

    public ServiceClient(string host, int port)
    {
        http.BaseAddress = new Uri(string.Format(uri_template , host, port));
    }

    public void Create(MyDataContract my_data_contract)
    {
        var content = HttpContentExtensions
                        .CreateDataContract(
                          my_data_contract, 
                          Encoding.Default, 
                          "text/xml", 
                          null);
        var response = http.Post("Create", content);
        if (response.StatusCode != HttpStatusCode.Created) {
            throw new Exception("something is not right");
        }
    }
} 
```

此方法有效，并且确实可以正确发布数据和序列化。

我想做的是对它进行单元测试。

我的问题是：

1.  我如何为 HttpContextExtensions 制作存根/模拟，知道它没有实现任何接口？

2.  而对于 HttpClient？这是最糟糕的，因为它充满了其他地方定义的扩展方法（Post 和类似的方法是扩展）。

在 2\. 我想我可以坚持 'Send' 并且它是超载的，但是与 1 中的问题相同

我想做的是为 HttpContextExtensions 和 HttpClient 提取接口，为每个子创建一个子并实现委托给父的接口，然后在我的代码中使用这些接口。

但恕我直言，这是很多工作。

我使用 RhinoMocks 作为我的模拟框架，所以我不能模拟/存根具体类，我想坚持下去，因为我真的认为模拟具体类不是很优雅。

那么，是否有一种更清洁/更快/更智能的方式来对上述代码进行单元测试？

PD：这是用于 WCF Starter Kit 预览版 2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T15:15:21.393

如果您真的想模拟该代码，一种适用于这种情况的方法是在 ServiceClient 类中接收一个 HttpClient 实例。HttpClient 类包含一个处理管道，您可以使用自定义处理程序对其进行自定义。对于您的测试，您基本上可以在该 httpclient 实例中注入一个处理程序，以在最后一个处理程序（传输阶段）中调用真实服务之前向测试返回一个模拟响应。看看这篇文章，了解如何实现这一点，

[http://weblogs.asp.net/cibrax/archive/2009/03/18/negotiating-a-saml-token-for-rest-clients-with-httpclient.aspx](http://weblogs.asp.net/cibrax/archive/2009/03/18/negotiating-a-saml-token-for-rest-clients-with-httpclient.aspx)

问候，巴勃罗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-04T07:48:16.163

我编写了大部分 HttpClient 代码。Pablo 的建议是我在单元测试中所做的——请参阅源 zip 中的 FixedTransport.cs。

# javascript - 如何使用 javascript 和 CSS 创建模式弹出窗口

> ID：823281
> 
> 赞同：9
> 
> 时间：2009-05-05T04:02:21.587
> 
> 标签：javascript, html, css, dhtml

其实有两个问题：

*   如何创建背景颜色为灰色的模式弹出窗口？
*   我还需要为表本身创建封面背景颜色。不是整个页面。

如何使用 javascript 和 css 执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T04:38:18.850

这是 HTML，可能应该用 JS 插入，样式应该在外部样式表中。

```
<div style="background: gray; width: 200px; height: 200px; position: absolute; left: 50%; top: 50%; margin-left: -100px; margin-top: -100px" id="modal">I'm a modal</div> 
```

然后，您可以利用 jQuery 来显示它。

```
$('a.modal').bind('click', function(event) { 
    event.preventDefault();
    $('#modal').fadeIn(800);
}); 
```

这只是一个开始，您需要从中学习并以此为基础。例如，脚本应该检查`is(':hidden')`并显示，如果没有，则`fadeOut(800)`或类似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-07T18:23:02.813

我将它用于位于屏幕顶部的面具

```
.Mask {
   display: none;
   width: 100%;
   height: 100%;
   z-index: 9000;
   padding: 0px;
   margin: 0px;
   background: transparent url(http://i.imgur.com/0KbiL.png);
   position: fixed;
   top: 0px;
   overflow: hidden;
} 
```

# c++ - 是否有一个函数可以在 .txt 中的某个点返回字符/字符串？

> ID：823283
> 
> 赞同：0
> 
> 时间：2009-05-05T04:02:37.127
> 
> 标签：c++, text, int, constants, global

我知道它可以获取 .txt 的一部分，然后将其转换为整数，然后将其存储在变量中，但是否可以在单个声明中实现。（变量需要是全局的）。

IE：

```
[data.txt]
1020
[convert_data.cpp]
#include<fstream>
fstream convert("data.txt");
//way to declare something equal to A PARTICULAR POINT in data.txt

int main()
{
    //how would I take this block of code and simplify it to two DECLARATIONS (not
    //function calls), or, if that's not possible or not practical, how would I make
    //n and m (or var1 and var2) global AND CONSTANT?
    char var1[5];
    convert.getline(var1,2);
    char var2[5];
    convert.getline(var2,2);
    const int n=atoi(var1);
    const int m=atoi(var2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T04:09:29.557

从编译器的角度来看，*常量*是在编译时具有固定值的东西。由于您正在从文本文件中读取数据（可以在程序编译后更改），因此您从文本文件中读取的数字在程序中不能是常量。

话虽如此，您*可以*执行以下操作：

```
class ConstInteger {
public:
    ConstInteger(fstream &f) {
        char s[5];
        f.getline(s,2);
        value = atoi(s);
    }
    public operator int() const { return value; }
private:
    int value;
};

fstream convert("data.txt");
ConstInteger n(convert); 
```

以上依赖于 C++ 编译器对全局类所做的初始化。因此，在类初始化顺序方面，您在很大程度上受 C++ 编译器的支配。此外，这种安排中的错误处理可能很麻烦。（例如，如果`data.txt`不存在会发生什么？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:12:47.803

不，你不能在一个声明中做到这一点。您可以编写一个函数来执行此操作，然后您可以使用该函数初始化局部变量，但您不能使用它初始化全局变量。如果要初始化全局变量，则需要在程序的初始化例程中显式执行此操作，或者您可以在全局对象的构造函数中执行此操作（不推荐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T04:18:39.257

如果我理解正确，您想读取文本文件的一部分并将值存储为常量？那么你不能有一个未初始化的常量 - 所以你在运行时分配一个全局声明。

也许这样做的方法是将您拥有的功能封装在一个名为 getConstant 的全局函数中，这可能包含一个静态变量，并且对 getConstant 的调用将检查该 var 是否已从文件中读取，如果它已返回常量，如果没有从文件中读入。懒惰的评价。当然，这并不能解决它需要 (?) 保持不变的问题。

# c++ - 在 Objective-C 中使用 .mm 文件有哪些怪癖/惊喜？

> ID：823285
> 
> 赞同：5
> 
> 时间：2009-05-05T04:03:31.007
> 
> 标签：c++, objective-c, objective-c++

我想在我的 Objective-C iPhone 应用程序中使用一些 C++ STL 集合。显然，这可以通过为文件提供扩展名 ".mm" 来实现。与此相关的一些怪癖/惊喜是什么？

我想使用我熟悉的基本容器（向量、队列、集合……）

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T04:16:56.840

有关可以做什么和不能做什么的详细列表，请参阅[将 C++ 与 Objective-C一起使用。](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html)你可以做你所期望的大部分事情。你不能做一些事情，比如让 C++ 类从 Objective-C 类继承，反之亦然，你不能将 C++ 异常与 Objective-C 异常混合，C++ 引入了一些在 Objective-C 中不存在的新关键字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-06T06:38:06.510

Objective-C++ 的主要怪癖是，如果你不将 -fobjc-call-cxx-cdtors 传递给 g++，它就不会调用 ObjC 对象中 C++ 实例变量的构造函数和析构函数。所以记得打开那个选项，你应该很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T04:12:47.133

这些文件将使用 Objective-C++ 编译器进行编译，因此与 gcc 相比，它的行为更像 g++，但既然这是你想要的，它可能不会让人感到意外。在 Objective-C 方面，我不知道有任何问题，而且我参与了几个大型项目，这些项目大量使用了 Objective-C++。请记住，Objective-C 保留字在 Objective-C++ 中也是保留的，因此您偶尔会遇到第三方 C++ 库的问题（例如，如果它们在公共接口中使用“id”作为参数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T04:14:37.300

你会惊讶于它的效果如何。我还没有真正遇到在 .mm 文件中混合 Obj-C 和 C++ 的任何问题。

# asp.net-mvc - ASP.NET - 后端的别名下拉列表名称

> ID：823291
> 
> 赞同：0
> 
> 时间：2009-05-05T04:07:23.433
> 
> 标签：asp.net-mvc, selectlist

我正在使用 .NET 3.5，MVC。

我想使用一组字符串别名来表示数据库值。即，当用户从下拉列表中选择一个选项时，它实际上在表中将值设置为 0、1、2 等，而不是下拉列表中显示的文本。

例如我在做：

```
IdName[] Thing = new[] {   
new IdName { Id = 0, Name = "No Selection" }, 
new IdName { Id = 1, Name = "Thing A9" }, 
new IdName { Id = 2, Name = "Thing C12" }, 
new IdName { Id = 3, Name = "Thing F4" } 
};

MyDropDownList = new SelectList(Things, "Id", "Name",0); 
```

在视图中：

```
<%= Html.DropDownList("MyDropDownList")%> 
```

现在，这工作得很好。我无法开始工作的是在“详细信息”视图中显示该字段的值，并将“Thing C12”显示为文本而不是“2”。

另外，这是解决此问题的最佳方法吗？我不想使用数据库中的实际字符串，以防我修改条目上的文本（例如，将“Thing F4”的名称更改为“Thing F5”。）我完全愿意接受其他一些想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T04:54:50.120

因此，您希望您的操作方法（将存储用户选择）存储值而不是下拉列表中显示的别名。

我认为你在这里有两个选择。

1- 在服务器端，通过从数据源获取值（id），例如：示例中的 Things[] 数组。

```
public ActionResult StoreValueFromDropDown(string MyDropDownList) {
        var id = Things.Single(thing => thing.Name == MyDropDownList).Id;
        // here goes the code to sotre the id
} 
```

2- 在客户端通过添加一个隐藏字段来存储下拉列表的值。这是一个使用 jQuery 的示例（我没有测试它）：

```
<input type="hidden" id="ThingId" /> 
```

,

```
$('#MyDropDownList').change(function(e){
     $('#ThingId').value($('#MyDropDownList option:selected').attr('value'));
}); 
```

那么您需要修改您的操作方法以接受该隐藏字段的值

```
public ActionResult StoreValueFromDropDown(int ThingId) {

        // here goes the code to sotre the id
} 
```

# php - 计算我的mysql表中一行的更新次数

> ID：823292
> 
> 赞同：0
> 
> 时间：2009-05-05T04:07:30.373
> 
> 标签：php, mysql

我有一个简单的 mysql 数据库并使用这个 PHP 代码来更新它。

```
mysql_query("REPLACE INTO `$db_table` (username, live, datetime, ip) 
VALUES ('$username', '1', '$timeofentry', '$ip')"); 
```

我使用 REPLACE INTO 以及“用户名”上的主键来让用户将自己撞到最新列表的顶部......

我想添加一个碰撞计数。条目已更新（或“替换为”）的次数。

我该怎么做呢？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T04:11:16.683

首先，您需要在表中添加另一列以保持计数。

其次，您可能应该使用 UPDATE 语句而不是 REPLACE。

REPLACE 实际上会删除该行，然后插入一个效率不高的新行。

```
UPDATE `$db_table` SET datetime = NOW(), ip = '$IP', 
        bumpCount = bumpCount + 1 WHERE username = '$username' LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T07:54:36.117

您可以使用[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)执行现有行的实际更新。

```
$mysql = mysql_connect(..
...
$username = mysql_real_escape_string(...
$ip = mysql_real_escape_string(...
...
$query = "
  INSERT INTO
    `$db_table`
    (username, live, datetime, ip) 
  VALUES
    (
      '$username',
      '1',
      '$timeofentry',
      '$ip'
    )
  ON DUPLICATE KEY UPDATE
    ip = '$ip',
    bumpCount = bumpCount + 1
";

$result = mysql_query($query, $mysql);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T04:30:49.280

@点

您可以将 bumpCount 字段定义为表中的另一列。我建议也将其设置为默认值。

那么你的表定义有时会像：

```
CREATE TABLE my_table
 (username varchar(255) not null primary key,
  live int,
  datetime datetime not null,
  ip varchar(15) not null,
  bumpCount int unsigned not null default 1); 
```

您的插入/更新将类似于：

```
INSERT INTO my_table (username,live,datetime,ip) 
  VALUES
    ('$username',1,now(),'$ip')
  ON DUPLICATE KEY UPDATE datetime=now() ip='$ip', bumpCount=bumpCount + 1; 
```

# c# - 两个 C# 命名约定：你怎么看？

> ID：823294
> 
> 赞同：2
> 
> 时间：2009-05-05T04:08:34.507
> 
> 标签：c#, naming-conventions

我有两个*特定的*C# 编码约定，我一直在练习，感觉很复杂。我很想听听人们的想法。他们是：

**#1。在它是一个实例的类之后命名实例，camelCased**

**#2：“匹配属性名称”**

理由如下：

**#1。在它是一个实例的类之后命名实例，camelCased**

我将其用作命名约定的默认设置。当然，也有例外。但始终如一地使用它可以*显着*提高代码的清晰度和可维护性。代码如下所示：

```
var dataConnection = new DataConnection();
//not: var dataConn, dbConn, sqlConn, myDbPickOfTheDay etc.

FileInfo fileInfo = new FileInfo();

Timer timer = new Timer(); 

//etc. 
```

我正处于这样的代码给我带来身体痛苦的地步：

```
DataConnection dbConn = new DataConnection(); 
```

我怎么强调这个约定如何消除了变量名称游戏的痛苦和愤怒。

这种约定与试图以试图指示实例正在做什么的方式命名事物形成鲜明对比，这相当于试图创造性地将业务案例嵌入代码中。代码有一种方法可以重构到那些原始名称充其量是误导的程度。

对我来说，这个约定是金子。它还可以防止为同一事物稍微调整变量名称的可怕做法。

该约定在实践中的一个示例是：

```
class Person { ...
   public string FirstName { get; set; }

//and then
var person = new Person();
person.FirstName = firstName; //where firstName comes from somewhere else. 
```

非常容易阅读。很无聊。在维护代码方面，无聊是件好事。

*但是*，这个约定将我引向#2：

**#2 “匹配属性名称”**（因为没有更好的标题）

这是一个例子：

```
public class ShoppingCart { ..
  private Item item;
  public Item Item {  //<---- ?
  get { return this.item; } ... 
```

编译器对此非常满意。而且，事实上，它公开了一个非常好的接口：

```
//notice how tempting it is to just say "ShoppingCart cart ... "
ShoppingCart shoppingCart = new ShoppingCart();  
shoppingCart.Item = item; 
```

现在，另一种选择是要有创意——实际上您需要为 Item 鼓起两个好的变量名称：公共属性名称和私有成员变量名称。

你见过多少次，只想立即退休？

```
 public class ShoppingCart { ..
      private Item cartItem;
      public Item ShoppingCartItem { 
      get { return this.cartItem; } ..
  ///....
  ShoppingCart userShoppingCart = new ShoppingCart();
  userShoppingCart.ShoppingCartItem = userSelection; 
```

我对公约 #1 有足够的感觉，我认为我可以接受 #2。

你怎么看 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-05T04:19:07.023

如果您不知道并且如果您关心，C# 已经有一个命名标准

[http://msdn.microsoft.com/en-us/library/xzf533w0(VS.71).aspx](http://msdn.microsoft.com/en-us/library/xzf533w0(VS.71).aspx)

另外，再次查看您的约定......这里还有一些建议。

*   fileInfo 在 FileInfo 旁边看起来很漂亮，但除了它的类型之外它没有任何意义，我可以通过将鼠标悬停在类型上或 intellisense 中快速获得它。我建议用含义和一些上下文来命名你的变量（如果有的话）。如果您喜欢名称中的类型，remoteWebServerLog、localWebServerLog 甚至 localWebServerLogFileInfo。

    如果我能提供任何建议，不要再回到你写了 6 个月以上的代码。你会摸不着头脑，试图弄清楚并追踪你所有的 dbConn 和 fileInfo 到底是什么。什么文件？什么分贝？很多应用程序都有多个数据库，这是 OrdersDB 还是 ShoppingCartDB 的 dbConn？

*   类命名应该更具描述性。会更喜欢 ShoppingCartItem 而不是 Item。如果每个 ListBox、DropDown 等都将它们的集合项命名为“Item”，那么您将与许多命名空间发生冲突，并被迫在代码中乱扔 MyNameSpace.ShoppingCart.Item。

说了这么多……即使经过多年的编码，我仍然搞砸了，并且没有 100% 的时间遵守规则。我什至可能使用过 FileInfo fi = ... 但这就是为什么我喜欢我的 Resharper "Refactor->Rename" 命令并且我经常使用它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T04:14:56.957

显然，您不能命名项目*string* 中的每个 System.String，*但对于您不经常使用的东西，尤其是。您只需要其中一个，并且从其名称中可以明显看出其*代码中的功能，这些命名约定是完全可以接受的。*

无论如何，他们就是我所做的。

我会为 Timer 对象使用更具体的名称。计时器有什么用？但我肯定会命名为 DataConnection 数据连接。

*即使“字符串”不是关键字...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T04:19:30.737

约定#1 可能会变得混乱。如果你`FileInfo`在同一个方法中有两个对象——比如一个 Source 和一个 Target——你需要偏离约定来命名这两个对象。

变量名应该是助记符——向不经意的观察者表明它的使用意图。

也许您对这两种约定的组合感到最满意...例如 sourceFileInfo 和 targetFileInfo，根据这个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T04:18:28.773

我一直在做 1，发现它非常可读。我对 2 持怀疑态度。在某些情况下，我觉得它很混乱，主要是因为标识符相同，很难区分类型和属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T05:00:16.847

我一直遵循约定 1。虽然，如果有两个并排的对象，我会添加一个额外的限定符。

但话虽如此，强制执行此约定可能会有问题：

1.  在特定的上下文`cart`中，一个对象可能是一个足够好的名称`ShoppingCart`（例如，如果同一函数中没有其他“购物车”可以混淆）。
2.  有时，约定可能会完全掩盖声明对象的目的。例如`Window scoreBoard = new Window()`说我们有一个对象，它确实是一个窗口，但被用作记分板。很有表现力。但是遵循约定 1，您必须编写`Window window = new Window()`完全隐藏此窗口后面的意图。

所以我会说在任何地方都使用这个命名理念，除非它妨碍意义或显得不合理的要求。

关于约定 2，我完全同意。保持属性名称简洁并让对象名称完成其调用的全部含义是一件优雅的事情。它与命名良好的对象完美配合。所以几乎没有理由羞于使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T05:01:34.783

我通常会遵循约定#1，尽管对于长类名我倾向于只使用类的首字母。如果我指的是多个相同类型的对象，那么我会在类型名称前面加上一个名称，表明它是哪一个或它的用途。

如果有意义的话，我经常使用约定 #2。没有什么比您列出的 cart.ShoppingCartItem 示例更糟糕的了，它是 ShoppingCart 的属性这一事实使得属性名称的这一部分完全多余。但是，我很可能会命名类 ShoppingCartItem 和属性 Item。Item 的名称有点过于笼统，而 ShoppingCartItem 会告诉您正在使用哪种商品。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-04T16:28:18.350

我非常不喜欢在范围内拥有多个标识符的概念，这些标识符仅在大写/小写的用法上有所不同；如果我有我的 druthers，则使用标识符的代码将需要使用与其声明相同的大写/小写字母组合，但既不允许代码在同一范围内声明两个仅大小写不同的标识符，也不允许访问任何与内部范围内的标识符匹配的标识符（大小写除外）。尽管我所知道的语言（当然不是 VB 和 C#）都没有强制执行此类规则，但按照此类规则编写的代码可以在区分大小写和不区分大小写的语言之间自由移植，而无需重命名标识符。

因此，我不喜欢模式#2。CLS 合规性要求将该样式的任何标识符限制在`private`或`internal`范围内。由于 vb.net 和 C# 都允许名称以下划线开头，因此如果属性名为`Trait`，我认为没有理由`trait`支持`_trait`. 使用后一个名称可以清楚地区分程序员想要写入支持变量的情况和他的手指在 shift 键上滑动的情况。

至于模式#1，如果一个类型或方法的全部目的围绕某个特定类型的单个封装对象进行解析，我更喜欢在字段`my`或参数前加上`the`. 即使在编译器允许对实例成员和参数使用相同名称的情况下，使用不同的前缀也可以避免在需要另一个时意外使用一个前缀的可能性。

# c# - 代码量是否会使数据结构变大？

> ID：823295
> 
> 赞同：4
> 
> 时间：2009-05-05T04:09:14.613
> 
> 标签：c#, data-structures, size

我有一个项目数组列表，其中可能只有十个变量。但是这些项目有很多代码，我想添加更多。我很好奇这将如何影响我的结构的大小。我的直觉告诉我每个人都有一个堆栈，但是随着争论的传递以及我可能不认为我不确定的东西。那么，我的数据结构中添加了多少代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T04:13:12.653

代码不会增加结构的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T04:13:46.817

与类关联的代码通常不会在每个实例中重复，因此添加代码不应影响数组列表的大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T04:15:29.247

即使您将代码与数据放在同一组花括号中，编译器也会将其分开并放在不同的内存部分中。

这样，您只需要一份代码副本 - 无需为使用它的每个项目制作新副本。

只有在非常大的项目中，编译代码的实际大小才会成为问题；通常，它不会比源文本大多少。在小程序上，通常最多几百 K 或一兆或两个。在现代机器上不值得担心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T05:21:51.100

对象实例的大小（大部分）是其数据成员的总和。函数成员不是按实例存储的，对实例大小没有影响。

您的程序每个线程有一个堆栈。调用函数时，堆栈内存会为该函数的每个参数和变量保留，并在返回时释放。

如果您的对象在没有 new 的函数中实例化，则它会存储在堆栈中。如果使用new，栈上只存储一个引用，而实例本身存储在堆上。

:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T04:18:06.417

代码不存储在堆上。

无论您创建了多少对象，您都只会将代码放在一个地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-05T04:19:18.787

对象工作的类成员函数的存储方式不同，它对对象的大小没有影响。类中的数据成员将成为对象的一部分，并且如果更改变量的类型，对象的大小将发生变化。

前任：

```
class Test
{
    1\. member functions

    //it does not matter how many functions you have, this section does not contribute
    // to object size

    2\. member variables
    //this contributes to the object size, define an int or  double etc will change the object size
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T04:19:44.340

每个对象没有自己的堆栈。堆栈是每个线程/进程，而不是每个对象。

# c# - Linq to SQL DateTime 值是本地的（Kind=Unspecified）-如何使它成为 UTC？

> ID：823313
> 
> 赞同：62
> 
> 时间：2009-05-05T04:16:28.917
> 
> 标签：c#, sql-server, linq-to-sql, datetime

是否有一种（简单的）方法来告诉 Linq To SQL 类特定的 DateTime 属性应被视为 UTC（即默认情况下 DateTime 类型的 Kind 属性为 Utc），或者是否有“干净”的解决方法?

我的应用服务器上的时区与 SQL 2005 服务器不同（不能更改任何），并且没有一个是 UTC。当我将 DateTime 类型的属性持久保存到 dB 时，我使用 UTC 值（因此 db 列中的值是 UTC），但是当我读回这些值（使用 Linq To SQL）时，我得到了 DateTime 的 .Kind 属性值为“未指定”。

问题是，当我将其“转换”为 UTC 时，它会休息 4 小时。这也意味着当它被序列化时，它最终会在客户端出现 4 小时的错误偏移（因为它是使用 UTC 序列化的）。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2010-03-26T13:51:57.180

生成的 LinqToSql 代码提供了扩展点，因此您可以在加载对象时设置值。

关键是创建一个扩展生成类的分部类，然后实现`OnLoaded`分部方法。

例如，假设你的类是`Person`，所以你有一个生成的部分`Person`类在`Blah.designer.cs`.

通过创建一个新类（必须在不同的文件中）来扩展部分类，如下所示：

```
public partial class Person {

  partial void OnLoaded() {
    this._BirthDate = DateTime.SpecifyKind(this._BirthDate, DateTimeKind.Utc);
  }
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-26T06:25:26.763

SQL Server DateTime 不包括任何时区或 DateTimeKind 信息，因此从数据库中正确检索的 DateTime 值具有 Kind = DateTimeKind.Unspecified。

如果您想将这些时间设为 UTC，则应按如下方式“转换”它们：

```
DateTime utcDateTime = new DateTime(databaseDateTime.Ticks, DateTimeKind.Utc); 
```

或等价物：

```
DateTime utcDateTime = DateTime.SpecifyKind(databaseDateTime, DateTimeKind.Utc); 
```

我假设您的问题是您正在尝试将它们转换如下：

```
DateTime utcDateTime = databaseDateTime.ToUniversalTime(); 
```

乍一看这似乎是合理的，但根据[DateTime.ToUniversalTime 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)，在转换 Kind 未指定的 DateTime 时：

> 当前的 DateTime 对象被假定为本地时间，并且转换的执行就像 Kind 是 Local 一样。

此行为对于向后兼容没有 DateTime.Kind 属性的 .NET 1.x 是必需的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-05T04:27:42.870

我能想到的唯一方法是在进行翻译的部分类中添加一个 shim 属性......

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-06-16T20:31:54.753

对于我们的案例，总是指定 DateTimeKind 是不切实际的，如前所述：

```
DateTime utcDateTime = DateTime.SpecifyKind(databaseDateTime, DateTimeKind.Utc); 
```

我们正在使用实体框架，但这应该类似于 Linq-to-SQL

如果要强制将数据库中的所有 DateTime 对象指定为 UTC，则需要添加 T4 转换文件并为所有 DateTime 和可为空的 DateTime 对象添加附加逻辑，以便将它们初始化为 DateTimeKind.Utc

我有一篇博客文章逐步解释了这一点：[http ://www.aaroncoleman.net/post/2011/06/16/Forcing-Entity-Framework-to-mark-DateTime-fields-at-UTC.aspx](http://www.aaroncoleman.net/post/2011/06/16/Forcing-Entity-Framework-to-mark-DateTime-fields-at-UTC.aspx)

简而言之：

1) 为您的 .edmx 模型创建 .tt 文件（或为 Linq-to-SQL 创建 .dbml）

2）打开.tt文件，找到“WritePrimitiveTypeProperty”方法。

3）替换现有的setter代码。这是`ReportPropertyChanging` 和`ReportPropertyChanged`方法回调之间的所有内容，具有以下内容：

```
<#+ if( ((PrimitiveType)primitiveProperty.TypeUsage.EdmType).PrimitiveTypeKind == PrimitiveTypeKind.DateTime)
            {
#>
        if(<#=code.FieldName(primitiveProperty)#> == new DateTime())
        {
            <#=code.FieldName(primitiveProperty)#> = StructuralObject.SetValidValue(value<#=OptionalNullableParameterForSetValidValue(primitiveProperty, code)#>);
<#+ 
            if(ef.IsNullable(primitiveProperty))
            {  
#>              
            if(value != null)
                <#=code.FieldName(primitiveProperty)#> = DateTime.SpecifyKind(<#=code.FieldName(primitiveProperty)#>.Value, DateTimeKind.Utc);
<#+             } 
            else
            {#>
            <#=code.FieldName(primitiveProperty)#> = DateTime.SpecifyKind(<#=code.FieldName(primitiveProperty)#>, DateTimeKind.Utc);                
<#+ 
            } 
#>
        }
        else
        {
            <#=code.FieldName(primitiveProperty)#> = StructuralObject.SetValidValue(value<#=OptionalNullableParameterForSetValidValue(primitiveProperty, code)#>);
        }
<#+ 
        }
        else
        {
#>
    <#=code.FieldName(primitiveProperty)#> = StructuralObject.SetValidValue(value<#=OptionalNullableParameterForSetValidValue(primitiveProperty, code)#>);
<#+ 
        }
#> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-03-11T11:19:59.780

@rob263 提供了一个很好的方法。

如果您使用的是实体框架而不是 Linq To Sql，这只是我希望提供的额外帮助。

实体框架不支持 OnLoaded 事件。

相反，您可以执行以下操作：

```
 public partial class Person
    {
        protected override void OnPropertyChanged(string property)
        {
            if (property == "BirthDate")
            {
                this._BirthDate= DateTime.SpecifyKind(this._BirthDate, DateTimeKind.Utc);
            }

            base.OnPropertyChanged(property);
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-26T15:50:40.887

我使用这种方式动态指定*DateTimeKind*：

```
DateTime myDateTime = new DateTime(((DateTime)myUtcValueFromDb).Ticks, DateTimeKind.Utc); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-26T06:00:56.343

此代码片段将允许您将从 LINQ 返回的 DateTimes (Kind=Unspecified) 转换为 UTC 时间，而不会影响时间。

```
TimeZoneInfo UTCTimeZone = TimeZoneInfo.FindSystemTimeZoneById("UTC");
DateTime utcTime = TimeZoneInfo.ConvertTimeToUtc(myLinq2SQLTime, UTCTimeZone); 
```

可能有更清洁的方法可以做到这一点，但我手头有这个并且可以快速测试它！

我不确定是否有办法让它透明地与 LINQ to SQL 类一起工作 - 您可能想查看部分类，看看是否可以挂钩读取/写入值的位置。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2009-05-26T06:05:46.723

如果您想要 UTC，TimeZone 类可以为您完成，如果您想在不同时区之间进行转换，那么 TimeZoneInfo 适合您。以我的 TimeZoneInfo 代码为例：

```
TimeZoneInfo cet = TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time");
ac.add_datetime = TimeZoneInfo.ConvertTime(DateTime.Now, cet); 
```

# windows - 使用 Windows Media Encoder 设置默认音频设备失败

> ID：823316
> 
> 赞同：-1
> 
> 时间：2009-05-05T04:17:05.110
> 
> 标签：windows, com, audio, media, encoder

我正在参考以下文档部分“用于捕获屏幕的 Windows Media API”来捕获屏幕并且原始代码可以正常工作。当我添加附加功能时（我只是添加了几行以使其从默认音频设备录制），它在下一行失败（我调试并且看起来它在 COM 层失败？），有什么提示吗？我发布了原始源代码和修改后的源代码。

“如果（失败（hr=pSrcGrp->put_Profile（variant_t（pProfile））））”

[http://www.geocities.com/krishnapg/screencap.html](http://www.geocities.com/krishnapg/screencap.html)

原始源代码：

[http://www.geocities.com/krishnapg/WMEncScrnCap.zip](http://www.geocities.com/krishnapg/WMEncScrnCap.zip)

我修改的源代码（我只修改了函数InitEncoder）

```
HRESULT InitEncoder(LPCTSTR szOutputFileName)
{
    HRESULT hr = E_FAIL;
    CComVariant varValue;
    IWMEncSourceGroupCollection*    pSrcGrpCollection=NULL;
    IWMEncSourceGroup*  pSrcGrp=NULL;
    IWMEncSource*   pSrc=NULL;
    IWMEncSource*   paSrc=NULL;
    IPropertyBag*   pPropertyBag=NULL;
    IWMEncVideoSource2* pSrcVid=NULL;
    IWMEncAudioSource*  pSrcAud=NULL;
    IWMEncFile* pOutFile=NULL;
    IWMEncProfile*  pProfile=NULL;

    if(FAILED(CoCreateInstance(CLSID_WMEncoder,NULL,CLSCTX_INPROC_SERVER,IID_IWMEncoder2,(void**)&g_pEncoder)))
    {
        ErrorMessage("Unable to Create Encoder Object");
        return E_FAIL;
    }
    if(FAILED(g_pEncoder->get_SourceGroupCollection(&pSrcGrpCollection)))       //Retrieve the Source Group Collection  - One Application can Have many Source Groups - We need to add as many as we want
    {
        ErrorMessage("Unable to Get Source Group Collection");
        return E_FAIL;
    }

    do
    {
        if(FAILED(hr=pSrcGrpCollection->Add(CComBSTR("SourceGroup1"),&pSrcGrp)))//Add a Source Group to the Collection - Each Source can have one video one audio source input
        {
            ErrorMessage("Unable to Add A Source Group to the Collection");
            break;
        }
        if(FAILED(hr=pSrcGrp->AddSource(WMENC_VIDEO,&pSrc)))                    //Add a Video Source to the Group
        {
            ErrorMessage("Unable to Add A Source to the Source Group");
            break;
        }
        if(FAILED(hr=pSrcGrp->AddSource(WMENC_AUDIO,&paSrc)))                   //Add an Audio Source to the Group
        {
            ErrorMessage("Unable to Add A Source to the Source Group");
            break;
        }
        if(FAILED(hr=pSrc->QueryInterface(IID_IWMEncVideoSource2,(void**)&pSrcVid)))
        {
            ErrorMessage("Unable to Query interface for Video Source");
            break;
        }
        if(FAILED(hr=paSrc->QueryInterface(IID_IWMEncAudioSource,(void**)&pSrcAud)))
        {
            ErrorMessage("Unable to Query interface for Audio Source");
            break;
        }
        if(FAILED(hr=pSrcVid->SetInput(CComBSTR("ScreenCap://ScreenCapture1"))))//The Video Input Source Device - Should be "ScreenCap" Device
        {
            ErrorMessage("Unable to Set Video Input Source");
            break;
        }
        if(FAILED(hr=pSrcAud->SetInput(CComBSTR("Device://Default_Audio_Device"))))//The Video Input Source Device - Should be "Default_Audio_Device" Device
        {
            ErrorMessage("Unable to Set Audio Input Source");
            break;
        }
        if(FAILED(hr=pSrcVid->QueryInterface(IID_IPropertyBag,(void**)&pPropertyBag)))
        {
            ErrorMessage("Unable to Query Interface for Propery bag");
            break;
        }

        varValue = CAPTURE_FULLSCREEN;
        if(FAILED(hr=pPropertyBag->Write(WMSCRNCAP_ENTIRESCREEN,&varValue)))    //Set Full Screen Property true/false
        {
            ErrorMessage("Unable to Set Capture Screen Property");
            break;
        }
        //int nLeft, nRight, nTop, nBottom;                                 //Set Capture Area - when not in full screen mode
        //                                                                  // Initialize the capture area. The size must be even.
        //  varValue = false;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_ENTIRESCREEN, &varValue );
        //  }
        //  varValue = nLeft;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_WINDOWLEFT, &varValue );
        //  }
        //  varValue = nRight;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_WINDOWRIGHT, &varValue );
        //  }
        //  varValue = nTop;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_WINDOWTOP, &varValue );
        //  }
        //  varValue = nBottom;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_WINDOWBOTTOM, &varValue );
        //  }
        //  varValue = true;
        //  if ( SUCCEEDED( hr ) )
        //  {
        //      hr = pPropertyBag->Write( WMSCRNCAP_FLASHRECT, &varValue );
        //  }

        if(FAILED(hr=SetupScreenCaptureProfile()))                                  //Setup the Custom Profile
        {
            break;
        }
        if(FAILED(hr=g_pProfile->QueryInterface(IID_IWMEncProfile,(void**)&pProfile)))
        {
            ErrorMessage("Unable to Query Interface For Profile");
            break;
        }
        if(FAILED(hr=pSrcGrp->put_Profile(variant_t(pProfile))))                    //Select the Custom Profile into the Encoder    
        {
            ErrorMessage("Unable to Set Profile For Source Group");
            break;
        }
        if(FAILED(hr=g_pEncoder->get_File(&pOutFile)))
        {
            ErrorMessage("Unable to Get Encoder Output File Object");
            break;
        }
        if(FAILED(hr=pOutFile->put_LocalFileName(CComBSTR(szOutputFileName))))      //Set the Target Output Filename
        {
            ErrorMessage("Unable to Set Output File Name");
            break;
        }
        if(FAILED(hr=g_pEncoder->PrepareToEncode(VARIANT_TRUE)))                    //Using Prepare optimizes startig latency
        {
            ErrorMessage("Unable to Prepare for Encoding");
            break;
        }
    }while(false);

    if(pProfile)
    {
        pProfile->Release();
        pProfile=NULL;
    }
    if(pOutFile)
    {
        pOutFile->Release();
        pOutFile = NULL;
    }
    if(pPropertyBag)
    {
        pPropertyBag->Release();
        pPropertyBag = NULL;
    }
    if(pSrcVid)
    {
        pSrcVid->Release();
        pSrcVid = NULL;
    }
    if(pSrc)
    {
        pSrc->Release();
        pSrc = NULL;
    }
    if(pSrcGrp)
    {
        pSrcGrp->Release();
        pSrcGrp = NULL;
    }
    if(pSrcGrpCollection)
    {
        pSrcGrpCollection->Release();
        pSrcGrpCollection = NULL;
    }
    return hr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-31T12:21:08.153

您可能需要重置音频：

打开*控制面板*->打开*声音*

在*Playback*中，您会看到您的扬声器作为默认播放。

右键单击它->转到*属性*->转到*高级*选项卡->单击*恢复默认值*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T04:43:08.357

您的代码可能没有任何问题。Windows Vista 因无法以编程方式设置输出/输入而臭名昭著。

# sql-server - SQL 连接字符串

> ID：823324
> 
> 赞同：0
> 
> 时间：2009-05-05T04:19:32.670
> 
> 标签：sql-server

网站需要上线，我已经放置在客户端服务器上。我拥有 IIS.in web.config 文件的所有权限，我还给出了 SQL 连接字符串：

```
<appSettings>
<add key="ConnectionString" value="Data Source=USER\SQLEXPRESS;Initial Catalog=people_metrix;User ID=MyUser;Password=abc123"/>  </appSettings> 
```

在 sql server 2005 中允许远程连接（TCP/IP 和命名管道）。
但无法登录网站。用户名和密码存在于数据库中。

在服务器中，防火墙已打开，并且没有 IP 地址（自动获取 IP 地址）。是否由于这些原因无法登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T04:23:26.590

请不要在连接字符串中使用“sa”。曾经！

首先尝试使用带有连接字符串凭据的 SQL Server Management Studio 进行连接（而不是 sa！）。

SQl sServer 机器上的防火墙是否允许端口 1433 上的流量？

要允许通过 TCP 端口连接到 SQL Server，请执行以下步骤。

1.  点击开始 | 控制面板 | 网络连接
2.  右键单击为 SQL Server 的入站连接提供服务的网络适配器，然后选择属性
3.  选择高级 | Windows 防火墙 | 设置
4.  选择例外 | 添加端口
5.  在名称下输入“SQL Server”并在端口号下选择 1433。使用 TCP 作为协议。
6.  单击确定关闭所有对话框。

如果您使用标准 TCP/IP 以外的任何方式访问 SQL Server，则需要启用不同的端口。要允许通过命名管道而不是 TCP 进行 RPC，请以我上面描述的相同方式打开端口 445。

请参阅此 MS 支持文章以配置远程连接：[如何配置 SQL Server 2005 以允许远程连接](http://support.microsoft.com/kb/914277)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:30:42.080

您可以查看[connectionstrings.com](http://www.connectionstrings.com/sql-server-2005)

它有几个连接字符串示例。

# .net - 如何在 PropertyGrid 上自定义类别排序？

> ID：823327
> 
> 赞同：23
> 
> 时间：2009-05-05T04:21:07.673
> 
> 标签：.net, winforms, propertygrid

如何自定义 a 中的类别排序`PropertyGrid`？

如果我设置以下任一...

```
propertyGrid.PropertySort = PropertySort.Categorized;
propertyGrid.PropertySort = PropertySort.CategorizedAlphabetical; 
```

...然后类别将按字母顺序排列。（“按字母顺序”似乎适用于每个类别中的属性。）如果我使用`PropertySort.NoSort`，我会失去分类。

我用 填充我`PropertyGrid`的`SelectObject`，这很容易：

```
this.propertyGrid1.SelectedObject = options; 
```

`options`是具有适当修饰属性的类的实例：

```
 [CategoryAttribute("Category Title"),
    DisplayName("Property Name"),
    Browsable(true),
    ReadOnly(false),
    BindableAttribute(true),
    DesignOnly(false),
    DescriptionAttribute("...")]
    public bool PropertyName {
        get {
            // ...
        }

        set {
            // ...
            this.OnPropertyChanged("PropertyName");
        }
    } 
```

我在六个类别中有几十个属性。

有什么方法可以调整类别排序顺序，同时保持我的易用性`SelectedObject`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-06-15T10:43:33.883

我认为这个链接很有用 [http://bytes.com/groups/net-c/21​​4456-q-ordering-sorting-category-text-propertygrid](http://bytes.com/groups/net-c/214456-q-ordering-sorting-category-text-propertygrid)

> 我不相信有办法做到这一点。我能找到的唯一表明您可能能够做到这一点的是 PropertySort 属性。如果将其设置为 none，则表示属性按照从类型描述符接收到的顺序显示。您可能能够在您的对象和 propertygrid 之间创建一个代理类型描述符，然后它不仅会以正确的顺序返回属性，而且还会以您希望它们的顺序返回具有类别的属性......

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-29T20:26:17.357

就像@Marc Gravel 在[他的回答](https://stackoverflow.com/a/823703/316857)中所说的那样，框架中没有任何东西允许这种行为。任何解决方案都将是一个黑客。话虽如此，您可以使用@Shahab 在[他的回答](https://stackoverflow.com/a/995454/316857)中建议的解决方案作为解决方法，但这并不能真正表明您对维护代码的任何人的意图。所以我认为你能做的最好的事情就是创建一个`Attribute`继承自的自定义`CategoryAttribute`来为你处理这个过程：

```
public class CustomSortedCategoryAttribute : CategoryAttribute
{
    private const char NonPrintableChar = '\t';

    public CustomSortedCategoryAttribute(   string category,
                                            ushort categoryPos,
                                            ushort totalCategories)
        : base(category.PadLeft(category.Length + (totalCategories - categoryPos),
                    CustomSortedCategoryAttribute.NonPrintableChar))
    {
    }
} 
```

然后你可以这样使用它

```
[CustomSortedCategory("Z Category",1,2)]
public string ZProperty {set;get;}
[CustomSortedCategory("A Category",2,2)]
public string AProperty {set;get;} 
```

只需确保将`PropertyGrid`'`UseCompatibletextRendering`属性设置`true`为为您去除不可打印的字符并将`PropertySort`设置为`Categorized`or `CategorizedAlphabetical`，您应该很高兴。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T07:10:40.510

如果您的意思是您希望以特定（非字母）方式对类别进行排序，那么不 - 我认为您不能这样做。你可能想试试[VisualHint](http://www.visualhint.com/index.php/propertygrid/) - 我希望它确实有这个（因为你可以抓住更多的控制权）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-04T15:02:16.497

上面描述的 '\t' 技巧的一个小变化，我只是用回车符（'\r'）代替它。它似乎工作并避免了由选项卡引入的额外空间引起的工具提示问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-15T14:34:13.850

所有其他答案都解决了如何自定义排序顺序，但没有解决用户单击“**分类**”或“**按字母顺序**”按钮时出现的问题。

单击这些按钮会将`CategorizedAlphabetical`or`Alphabetical`值分配给`PropertySort`属性，而通常（至少对我而言）所需的行为是让他们分配`Categorized`or`Alphabetical`值。

通过添加事件`PropertySortChanged`，可以获得正确的行为：

```
private void propertyGrid1_PropertySortChanged(object sender, EventArgs e)
{
    if (propertyGrid1.PropertySort == PropertySort.CategorizedAlphabetical)
        propertyGrid1.PropertySort = PropertySort.Categorized;
} 
```

By using this event I don't see the problem with the tooltip, because I put the `\t` only in front of the category names, not in front of the property names.

# memory-leaks - 最大值是多少。内存可用于应用程序？（不再处理句柄错误）

> ID：823334
> 
> 赞同：0
> 
> 时间：2009-05-05T04:24:27.103
> 
> 标签：memory-leaks, swt, eclipse-rcp, memory-management

在 Eclipse RCP 应用程序中，我试图打开许多编辑器。它基本上是一棵树，有很多节点，每个节点都会打开一个编辑器。当我打开 150 到 200 个编辑器的访问权限并尝试为下一个树节点打开一个编辑器时，它不会打开。Eclipse 控制台显示“org.eclipse.swt.SWTError：没有更多句柄”。但是，如果我关闭一些已经打开的编辑器，我可以打开尽可能多的新树节点编辑器。

我监控了 javaw.exe 的内存使用情况；打开每个编辑器时内存会增加，但句柄数在某个 MAX 之后保持不变。发生错误时，javaw.exe 消耗大约 120,000K。错误期间所有应用程序消耗的总内存为 700,000K。如果我尝试打开更多的应用程序，例如 IE，由于系统内存不足，它要么无法打开，要么以较少的 UI 功能打开。尽管有 2GB RAM，但所有这一切！

我还尝试在 eclipse 内存设置中增加 vmargs，但这也没有太大帮助。

a) 我的代码中是否存在内存泄漏？我不认为它在某个 MAX 之后手柄保持不变。据我了解，当编辑器处于打开状态时，其上的 SWT 控件在关闭之前不会被释放。

b) 最大值是多少。可以被应用程序用完的内存？由于我的 RAM 是 2GB，我发现我对所有进程的总体内存应该比我认为大约 680MB 的 700,000K 好得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-06T19:41:28.390

a）尝试[偷偷摸摸](http://www.eclipse.org/swt/tools.php)。它可以在您的 SWT 应用程序中找到 GDI 泄漏

b) 您可以尝试更改注册表中的最大 GDI 句柄或用户对象。请参阅[此处](http://msdn.microsoft.com/en-us/library/ms724291(VS.85).aspx)和[此处](http://msdn.microsoft.com/en-us/library/ms725486(VS.85).aspx)了解更多信息。

您可能还想尝试创建一个[虚拟树](http://www.eclipse.org/articles/Article-SWT-Virtual/Virtual-in-SWT.html)，以便只创建显示的树节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T04:30:05.467

我无法具体回答您的问题，但在我看来，您正在遇到进程可以随时拥有的打开文件的最大限制（从“句柄”术语判断，该术语通常指打开的文件，很像文件描述符Unix）。这将是操作系统级用户权限/能力的问题。允许打开的文件数与内存大小无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T04:53:47.143

句柄是指文件句柄（打开的文件引用），由操作系统控制。它通常不是用户更改的设置，因为保持大量文件句柄无限期地打开会占用操作系统资源。

这个问题属于[如果你不得不问，你可能做错了什么](http://blogs.msdn.com/oldnewthing/archive/2007/03/01/1775759.aspx)类别。;-)

你最好的选择是打开文件，阅读它然后关闭它。然后在需要写出更改时重新打开文件。如果您担心并发编辑，您可能还需要使用锁定机制。

如果您不想更改太多逻辑，则在将每个文件放入树中时打开+读取+关闭每个文件可能会有所帮助，然后重新打开（以写入）当前位于用户活动视图中的文件，当用户离开时关闭它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-02T11:29:30.237

Windows 处理几种句柄，例如执行句柄（文件、线程）、GDI 句柄（字体、画笔、设备上下文）、用户句柄（窗口、菜单、大多数本机控件、图像）。对于这些句柄中的大多数，有一个每个进程和一个整体系统限制，这与系统中可用的 RAM 量无关。例如，由于历史原因，每个进程限制为 10000 个用户句柄，每个桌面会话限制为 32000 个用户句柄。有关句柄的深入解释，请参阅[http://msdn.microsoft.com/en-us/library/ms810501.aspx 。](http://msdn.microsoft.com/en-us/library/ms810501.aspx)

所以首先你需要确保你没有泄漏任何句柄，例如使用 Sleak。然后您需要注意，SWT 至少为每个小部件使用一个用户句柄（即使对于普通的 Composite 对象也是如此）。如果您有一个包含大量小部件的大型应用程序，您将达到 10000 个用户对象的限制。我写了一篇简短的博客文章，介绍了我们在产品中为解决此限制所做的工作：[http](http://www.subshell.com/en/subshell/blog/investigating-user-handles-with-the-swt-detective100.html) ://www.subshel​​l.com/en/subshel​​l/blog/investigating-user-handles-with-the-swt-detective100.html . 我还将 SWT Spy 破解为一个工具，它允许我调查我们应用程序的小部件树，找到减少小部件数量的地方。此工具的下载链接在博客条目中。

# regex - 用于解析 xaml 绑定式语法的正则表达式

> ID：823337
> 
> 赞同：0
> 
> 时间：2009-05-05T04:26:48.440
> 
> 标签：regex

像往常一样，正则表达式让我头疼。

我有以下要解析的字符串（作为示例）：

```
Client: {Path=ClientName}, Balance: {Path=Balance, StringFormat='{0:0.00}'}
Client: {Path=ClientName}, Balance: {Path=Balance, StringFormat='Your balance is {0:0.00}.'} 
```

我正在寻找一个正则表达式（或任何其他方法），它可以按如下方式拆分字符串，然后获取每个的单独键/值值。（想法是将这些中的每一个解析为 XAML 绑定）

```
String 1: {Path=ClientName}

    Path = ClientName

String 2: {Path=Balance, StringFormat='{0:0.00}'}

    Path = Balance
    StringFormat = {0:0.00} 
```

目前，我有以下正则表达式来拆分字符串，但是由于值中的“}”，这被 StringFormat 的值弄糊涂了。

```
(?<!'){(.+?)}(?!') 
```

知道如何实现这一目标吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T04:36:19.073

一遍又一遍地解决同样的问题真的很累，但是在这里：

从技术上讲，你做错了，你应该使用解析器，正则表达式不是用来处理嵌套匹配括号的，等等等等。不过，我们可以一起破解这个，为什么不呢？

```
/(?<!'){([^'}]|'[^']+')+}(?!')/ 
```

它的核心`{([^'}]+|'[^']+')}`- 寻找两件事：a) 任何不是 a`}`或`'`字符 ( `[^'}]`) 的东西，以及 b) 任何看起来像字符串 ( `'[^']+'`) 的东西。它假设一个字符串是一个引号、一堆非引号文本和另一个引号。鉴于您的示例，这应该可行。

但是，它将无法匹配`'This is a string with \'quotes\' in it'`，因为它不是为转义引号而设计的。添加它很简单，并且涉及应用我们刚刚应用的原则，所以我将把它留给你来弄清楚你是否可以。你似乎很擅长正则表达式，而且你至少在你问它之前就开始了，所以我想你可以弄清楚如何让它`\'`在字符串中匹配。

编辑：您使用的是`'`s 而不是`"`s。对于那个很抱歉。

# c++ - 我怎样才能使这个声明工作？

> ID：823345
> 
> 赞同：0
> 
> 时间：2009-05-05T04:29:02.710
> 
> 标签：c++, arrays, text-files, constants

编辑：我也得到了使扇区成为向量向量的答案：

```
vector<vector<char>>sector; 
```

这消除了我其余的错误。

编辑：我按照某人的建议将扇区设为指针数组，但仍然出现三个错误：

编辑：我已经编辑了程序，但它并没有修复所有错误：

我有一个程序的这一部分：

```
char* load_data(int begin_point,int num_characters);
ifstream mapdata("map_data.txt");
const int maxx=atoi(load_data(0,2));
const int maxy=atoi(load_data(2,2));
char** sector=new char[maxx][maxy];

char* load_data(int begin_point,int num_characters)
{
    seekg(begin_point);
    char* return_val=new char[num_characters+1];
    mapdata.getline(return_val,num_characters);
    return return_val;
} 
```

我得到这些错误：

第 5 行 > 错误 C2540：非常量表达式作为数组绑定

第 5 行>错误 C2440：“正在初始化”：无法从“char (*)[1]”转换为“char **”

第 14 行> 错误 C3861：'seekg'：找不到标识符

per seekg：是的，我知道我必须包含 fstream，我将其包含在 main.cpp 中，这是一个单独的 .h 文件，也包含在 main.cpp 中。

如何修复错误？具体来说，如何在保持所有变量全局的同时修复错误？

此外，如果有帮助，这是 map_data.txt：

```
10
10
00O
99!

1
55X
19
What is a question?
18
This is an answer
1
1
2
1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T04:32:46.290

您不能返回指向堆栈变量的指针。并且数组需要作为指针类型返回。

尝试：

```
char* load_data(int begin_point,int num_characters)
{
    seekg(begin_point);
    char* return_val = new char[num_characters+1];
    mapdata.getline(return_val, num_characters);
    return return_val;
}

char* foo = load_data(...);
...
delete [] foo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:34:10.233

好，

函数 load_data(int,int) 返回一个字符。您正在将该 char 传递给 atoi 函数，该函数需要一个 char*。除此之外，您可能不包括 stdlib.h 头文件！

```
#include <cstdlib>
int atoi(const char*); 
```

如果您不想包含 stdlib.h，那么您可以将 atoi 声明为 extern，但在编译此模块时要注意。

```
extern int atoi(const char*) 
```

考虑到 atoi 函数的参数必须是一个以空字符结尾的字符串。

为了让您的代码正常工作，您应该让函数加载数据返回一个 char*，而不是一个 char。

```
char* load_data(int,int); 
```

所以，现在你可以做

```
//notice these aren't const, they rely on non-compile time available data.
int maxx = atoi (load_data(....));
int maxy = atoi (load_data(....)); 
```

如果您使用 C++，load_data 函数可能会返回一个 std::string。

```
std::string load_data(int,int) 
```

然后使用 c_str() 方法，该方法从 C++ 字符串返回 C 字符串。

```
 const char* std::string:c_str()

    int maxx = atoi(load_data(....).c_str());
    int maxy = atoi(load_data(....).c_str()); 
```

除此之外，你不应该

（关于

```
line 5>error C2540: non-constant expression as array bound

line 5>error C2440: 'initializing' : cannot convert from 'char (*)[1]' to 'char **' 
```

)

```
char sector[maxx][maxy]; 
```

你应该

```
 char** sector = new char[maxx][maxy](); 
```

别忘了释放这段记忆

```
delete[](sector); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T07:56:09.093

我不太确定你锻炼的目标是什么。但是，如果您想从文件中读取“东西”并以您期望的格式获取它（例如 int、strings ...），您可以像这样使用 operator>> 和 getline：

```
#include <fstream>
#include <string>

using namespace std;

int main()
{
    ifstream ifs("data.txt");
    if (!ifs.is_open()) return 0;

    int maxx;
    int maxy;

    ifs >> maxx >> maxy;
    cout << maxx << " " << maxy << endl;

    // ----

    char OO_0[4];       // can use char[] or string, see next
    ifs >> OO_0;
    OO_0[sizeof(OO_0)] = 0;

    cout << OO_0 << endl;

    // ----
    string _99;
    ifs >> _99;

    cout << _99 << endl;

    int one;
    string _55_X;
    int _19;
    string what_is;

    ifs >> one >> _55_X >> _19 >> ws;
    // ws gets rid of white space at the end of the line ...
    // this is because getline would only read that ws up to eol

    getline(ifs,what_is);

    cout << one << " " << _55_X << " " << _19 << " " << what_is << endl;

    ifs.close();
} 
```

你得到这样的输出：

```
10 12
00O
99!
1 55X 19 What is a question? 
```

那是你所追求的吗？注意：我使用的是 c++，因为我注意到您提到了“main.cpp”

# iphone - 最佳应用程序代表实践

> ID：823346
> 
> 赞同：2
> 
> 时间：2009-05-05T04:29:09.090
> 
> 标签：iphone

我一直在这里和那里制作一些应用程序，并且我知道自己的方式。一直让我感到困惑的是访问全局属性，以及设置它们的最佳位置在哪里。我有一些关于访问事物以及如何访问它们的问题。

您是否必须将您的应用程序委托头文件包含到您想要访问它的任何其他文件中？假设我有一个我想使用的视图控制器，我需要在我的视图控制器的 .h 中包含 .h 吗？或者我可以设置：

```
@class AppDelegate; 
```

您是否只能通过键入以下内容来访问委托：

```
[UIApplication sharedApplication].delegate 
```

每次和每次？这是我必须习惯的吗？或者我可以在每个 .h 的实现中设置以下内容：

```
AppDelegate *delegate; 
```

在`init`函数内部，将单例实例放入该变量？

抱歉，如果这不符合结构，但我认为这是人们遇到和解决问题的合乎逻辑的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T05:38:37.613

也许您需要重新考虑如何使用 App Delegate？在我看来，您可能没有做出非常好的班级设计。

无论如何，这里有一种方法可以让它变得简单。不要把它放在 init 中，只在需要时使用它。

```
MyAppDelegate *delegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

自然地，将 MyAppDelegate 替换为您的应用程序委托的实际类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T07:09:39.617

另一种可能性是添加代码以在应用程序委托头文件中使用正确转换的应用程序委托引用`#define`，因此在包含它之后，您可以执行以下操作：

```
MYAPPDELEGATE.customProperty = blah; 
```

但是，我倾向于只写出 John 提出的行，因为使用 #defines 会混淆代码完成，我发现这比仅仅输入行更烦人。

如前所述，如果您有大量对应用程序委托的引用，您可能需要重组以使其中一些引用更接近于家。

# perl - 如何使用 Perl 从 PDF 文件中提取字体？

> ID：823348
> 
> 赞同：1
> 
> 时间：2009-05-05T04:29:40.023
> 
> 标签：perl, pdf, fonts

是否有从 PDF 文件中提取嵌入字体的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T04:51:43.623

我是[CAM::PDF](http://search.cpan.org/dist/CAM-PDF)的作者，它是几个流行的 Perl PDF 库之一。我的包中包含一个[列出文档中嵌入字体的工具](http://search.cpan.org/perldoc?listfonts.pl)，但我没有构建任何对提取字体的支持。这可能主要用于**侵犯版权**，所以我对支持这样的功能不感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T04:38:11.097

我只是用谷歌搜索并找到了那里的资源。我想它可能对你有用。

[PDF PERL](http://www.misc-perl-info.com/pdf-perl.html)

# php - my_config.ini 与 my_config.php

> ID：823352
> 
> 赞同：16
> 
> 时间：2009-05-05T04:31:02.610
> 
> 标签：php, configuration-files, ini

在工作中，我们使用 .ini 文件在调用框架的其余部分之前设置变量（我认为它可以

```
function getConfigVars(){
    //read my_config.ini file
    ....
    //call framework
} 
```

我一直想知道这样做是否有好处。

在我看来，您必须编写访问规则以阻止人们从网络上查看它，而 php 必须解析并理解它。

那么，为什么要使用 my_config.ini 而不是 my_config.php？它不像任何人都应该在设置后触摸它，而且只要调用变量并能够让你的 IDE 自动完成文本，无论你在哪里使用 ini 变量/解析它是否有错误，它似乎更方便。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-17T07:11:31.290

对于那些因为想知道使用必须解析的 INI 文件和简单包含的 PHP 文件（并且可以由 PHP 缓存）之间是否存在任何性能差异的人来说：是的，存在差异，但是它们太小了，这并不重要。

我的基准测试场景是一个`config.ini`包含 20 个键/值对的`config.php`文件和一个包含与定义相同的 20 个键/值对的文件。Ubuntu Linux 13.04 上的 PHP 版本为 5.4.9。

```
key1 = value1
...
key20 = value20 
```

对比

```
<?php
define("key1", "value1");
...
define("key2", "value20"); 
```

两个测试脚本，包括配置：

```
<?php
$CONF = parse_ini_file("config.ini"); 
```

对比

```
<?php
require_once "config.php"; 
```

我用`ab -c 25 -n 10000`.

没有 PHP 缓存的结果：

```
ini: Requests per second:    2660.89 [#/sec] (mean)
php: Requests per second:    2642.28 [#/sec] (mean) 
```

APC PHP 缓存的结果：

```
ini: Requests per second:    3294.47 [#/sec] (mean)
php: Requests per second:    3307.89 [#/sec] (mean) 
```

我多次运行测试，自然每次数字都会不同，但共识是：`config.ini`不使用 PHP 缓存时`config.php`快一点，使用 PHP 缓存时快一点。但是差异是如此之小，以至于决定不应该基于性能。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-05T04:35:14.940

可以肯定的是，您的问题提出了一个公平的观点。

支持文件的几点`.ini`：

*   **使用另一种语言的文件**。如果您曾经想要让 Perl、Python、Ruby 等脚本使用该语言做一些特别容易的事情，并且需要访问项目设置，如果您将设置存储在 PHP 文件中，那么您将不走运。

*   **人工编辑数据**。尽管您在问题中忽略了它，但无论是否有意，很可能有人最终会戳进去，而且可能不是技术人员。INI 格式远没有 PHP 代码那么可怕，即使只是一堆变量声明

*   **更新设置**。我认为创建一个新的 INI 文件比编写一个 PHP 文件要容易得多。然而，这是非常主观的，但值得一提。

*   **设定变量之间的关系**。使用 INI 文件为您的设置提供层次结构是相当容易/直观的。虽然使用 PHP 也可以做到这一点，但如果您尝试使用深度嵌套的关联数组来存储信息，那么它就不那么整洁并且可能会变得难看。

除此之外，在大多数情况下，“必须保护其免受 Web 访问”的敲击 INI 并不相关，因为大多数 PHP 项目（至少是我参与的项目）都有相当多的代码远离根目录文件夹，设置通常放在那里。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-05T04:40:34.583

[Zend 框架](http://framework.zend.com/)包含一个配置解析，它解析以 ini 格式 ( [Zend_Config_Ini](http://framework.zend.com/manual/en/zend.config.adapters.ini.html) ) 编写的文件，听起来这就是您正在使用的。

配置文件不应该位于您的文档根目录中，如果它不在您的文档根目录中，则不需要重写规则，因为无论如何都没有人可以访问它。

> INI 格式专门用于提供具有配置数据键层次结构和配置数据部分之间的继承的能力。通过使用点或句点字符 (.) 分隔键来支持配置数据层次结构。一个节可以通过在节名后面加上一个冒号字符 (:) 和要从中继承数据的节的名称来扩展或继承另一个节。

来自[Zend_Config_Ini](http://framework.zend.com/manual/en/zend.config.adapters.ini.html)页面。

Zend 框架使用它来允许您拥有多个配置参数，一个用于暂存，一个用于开发，一个用于生产。这也允许为生产和开发轻松设置数据库设置，并具有两个非常不同的设置。在 ini 文件中设置了包含所在位置的不同路径。这使得将代码从开发转移到生产变得更加容易，因为知道所有正在开发的东西都会立即关闭。

当然，这可以通过 PHP 脚本实现，但它需要更多地解析各种配置变量以及执行 if/then 检查，而使用 parse_ini_file() 会自动为您完成所有这些。

其他答案也已经指出，非程序员可能需要更改网站上设置为配置变量的变量和/或某些内容（例如，网站布局中使用的网站标题）。即使对于以前从未编程过的人来说，INI 文件也很容易理解和阅读。

来自我目前正在开发的网站的示例：

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts"
resources.db.adapter       = "PDO_SQLITE"
resources.db.params.dbname = APPLICATION_PATH "/../data/db/users.db"

resources.view[] =

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.db.params.dbname = APPLICATION_PATH "/../data/db/users-testing.db"

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.db.params.dbname = APPLICATION_PATH "/../data/db/users-dev.db 
```

它使得为可以运行代码的各种环境拥有多个数据集变得非常容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T04:34:00.093

好吧，对于非程序员来说，修改配置变量可能会更容易......如果你的工作场所有必要这样做的话。

我发现仔细放置`<?php`并`?>`可以阻止它被显示，而 parse_ini_file() 仍然会从文件中获取相关数据。

不过，保护它的最佳方法是将其放在 docroot 之上，并在您的服务器设置中拒绝对 *.ini 的访问。

# asp.net - 在不需要开源的 3-4 个开发人员之间共享源代码的好方法是什么？

> ID：823357
> 
> 赞同：5
> 
> 时间：2009-05-05T04:33:35.787
> 
> 标签：asp.net, version-control

我是一名新手开发人员，并与其他 3 名远程开发人员一起构建了一个应用程序。到目前为止，我只是一个人工作，现在我需要一种方法来与项目中的其他开发人员共享我的源代码。那里的所有项目站点（SourceForge、Codeplex、Google 等）似乎都是针对开源开发的我们四个人当中。最知名的方法是什么……或者这通常是如何完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T04:36:59.790

设置一个[Subversion](http://subversion.tigris.org/)存储库（可以通过 http 访问）。

有一本出色的[在线免费书籍](http://svnbook.red-bean.com/)，详细介绍了您需要了解的有关使用 Subversion 进行版本控制的所有信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T04:49:00.400

是的，您需要一个可远程访问的版本控制存储库。 [Subversion](http://subversion.tigris.org/)非常出色，使用非常广泛；[Git](http://git-scm.com/)是另一个不错的选择。

您可以设置自己的存储库 - 您需要一个所有开发人员都可以通过 ssh 或 Apache/WebDAV 访问的服务器 - 或使用托管服务，如[Beanstalk](http://beanstalkapp.com/)、[Project Locker](http://www.projectlocker.com/)、[Unfuddle](http://unfuddle.com/)、[SVNsite](http://www.svnsite.com/start)等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T04:36:20.570

[http://beanstalkapp.com/](http://beanstalkapp.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-05T04:37:53.890

设置 Subvserion 存储库 ( [http://subversion.tigris.org/](http://subversion.tigris.org/) )。您可以控制谁可以通过帐户查看您的数据，此外它还为您提供文档版本控制。与 Http 服务器配对时，您甚至可以直接在浏览器中查看源代码。

我相信 Subversion 有各种适用于 Eclipse 甚至 Visual Studio 的插件。Tortise SVN 是一个你可能喜欢的独立 SVN 客户端，虽然我推荐一个集成 IDE 的插件。

Subversion 也很适合持续集成服务器，例如 Continuum。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-05T04:39:28.317

托管：[http](http://wush.net) ://wush.net是另一个 Subversion 托管平台。

或者，如果您可以托管自己的服务器，请查看非常易于使用且非常免费的 VisualSVN 服务器： http: [//www.visualsvn.com/server/](http://www.visualsvn.com/server/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-05T04:37:11.783

你没有说你有什么可用的计算资源，但简单的选择是使用一个中央服务器，比如[SVN](http://subversion.tigris.org)，你都可以使用公钥进行 ssh 访问。您可能可以以每月 10 美元左右的价格租用这样的服务。

如果你不喜欢中央服务器，你可以试试[Mercurial](http://www.selenic.com/mercurial/wiki/)或者`git`和 ssh 在你的个人开发机器之间来回切换。

如果 ssh 有问题，git 实际上使您能够通过电子邮件相互发送补丁（可能 Mercurial 也可以）。Ben Lynn 的[Git Magic](http://www-cs-students.stanford.edu/~blynn/gitmagic/)教程解释了这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T04:37:18.557

您可以使用在线源代码控制（如 SVN 或 Git），并仅与您的团队成员共享。你应该看看[Unfuddle](http://unfuddle.com/)，它是一个免费的源代码控制/项目托管，带有错误跟踪系统。我将它用于我的个人项目，它很棒。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-05T04:45:47.287

我认为最好的解决方案是[Subversion](http://subversion.tigris.org/)。Subversion 是一个免费的源代码控制系统，非常适合您的要求。

您可以使用许多其他支持工具，例如[Tortoise SVN](http://tortoisesvn.tigris.org/)，使事情变得更容易。

这是描述 SVN 命令的[备忘单之一。](http://www.abbeyworkshop.com/howto/misc/svn01/)

大多数网络托管服务提供商都支持在其服务器上轻松一键安装 SVN。例如：[Dreamhost](http://www.dreamhost.com)所以你可以很容易地完成设置。

[CVS](http://www.nongnu.org/cvs/)是另一个广泛使用的源代码控制系统，但我还没有看到任何支持 CVS 轻松安装的提供商，但应该有。您也可以拥有 CVS 的支持工具，例如[Tortoise CVS](http://www.tortoisecvs.org/)。

我认为您对视觉源安全（Microsoft Proprietary 而不是通过 Web）不感兴趣，因此我不打算在此处添加有关它的信息。:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-05T04:36:13.237

您需要设置源代码控制存储库。这是一个相当大的话题，我真的不确定从哪里开始阅读它的最佳位置。我相信[关于修订控制的维基百科文章](http://en.wikipedia.org/wiki/Revision_control)至少会给你一些概述。

这似乎也是一个不错的入门系列：[Source Control HOWTO](http://www.ericsink.com/scm/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-05T04:38:02.080

Subversion 在 http/https 上工作得很好。这是一个开源项目，但您可以将其用于任何您想要的目的。

[http://subversion.tigris.org/](http://subversion.tigris.org/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-05T04:38:53.823

大多数现代源代码控制系统运行良好。颠覆是一种常见的。开发人员将运行哪个操作系统？

如果您只想快速启动并运行某些东西，请查看托管颠覆系统，例如 www.beanstalk.com 或 www.unfuddle.com。

Subversion 是开源的，我知道你不需要它，但这里有很多选择。如果在 Windows 上，请查看 Tortoise SVN。如果在 Mac 上并且您不想要命令行客户端，请查看版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-05T04:46:52.963

您实际上可以设置谷歌代码，只允许注册会员查看/编辑。而且我认为他们也不强制任何许可证。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-05T04:48:50.633

我们目前使用 VSS，但正在将所有内容迁移到[Source Gear Vault](http://www.sourcegear.com/vault/)，因为 VSS 使跳出我们的第三层窗口成为一种常见的想法......

这是一个提供高级选项的免费解决方案...... [https://freepository.com](https://freepository.com)我没有尝试过这个。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-05T05:09:20.537

试试 github。不过，这将花费您 12 美元/月。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-06-02T17:47:37.557

只需使用 devunity.com。通过 zip 上传您的代码或从 svn 导入它，仅此而已。让您立即围绕代码进行协作。

# domain-driven-design - 使用对象的setter触发数据更新，最佳实践

> ID：823376
> 
> 赞同：0
> 
> 时间：2009-05-05T04:38:53.887
> 
> 标签：domain-driven-design, setter

我有一个在 linq to sql 方法中实例化的对象。分配对象字段时，我想检查日期字段，如果它是旧日期，请从另一个表中检索数据并执行计算，然后再继续分配此对象。
通过属性设置器触发此类事件有什么问题吗？或者我是否应该通过某些服务独立检查日期并在之后的某个时候进行必要的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:50:08.737

在你的 setter 中执行一些逻辑并没有错，但是你应该小心你在 setter 中放置了多少逻辑。setter 的基本问题之一是，由于它们的行为类似于属性，但具有支持代码，因此很容易忘记幕后可能存在一些重要的操作。

如果您有使用访问器的访问器使用访问器的访问器，则此类事情可能会导致问题；您可能会很快导致意外的性能问题。通常，将 setter（或 getter，就此而言）的操作保留在相对较小的一组操作中是一个好主意。例如，验证可以在 setter 中正常工作，但我通常建议不要对外部资源进行验证，因为有两件事：首先，资源延迟会导致预期访问速度出现问题，其次，外部资源的数量访问会破坏你的表现。

一般来说，规则是这样的：保持简单。在二传手中做复杂的事情并不是不合理的，但是如果你这样做了，了解你将导致的所有操作的后果非常重要，并且记录它做得非常好是非常重要的，所以下一个人（或女孩）使用代码不只是尝试天真地使用访问器并最终意外地导致大量资源争用问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T04:42:24.143

使用设置器而不是公共字段的一半目的是能够触发与设置某些数据相关的事件。

关键词：关联。如果您只是将 setter 用作“方便”的时间来做一些其他事情，因为它恰好可以工作，那么您做错了。如果设置此值需要完成其他工作，那么请务必使用 setter 来完成。

# javascript - jQuery：“body”元素激活滚动事件两次

> ID：823377
> 
> 赞同：3
> 
> 时间：2009-05-05T04:39:06.680
> 
> 标签：javascript, jquery

我已经为我的照片博客实现了动画。我仍然有很大的问题，因为“body”元素正在激活动画两次。

我认为问题源于 $('body').animate。因为我认为当身体动画时，滚动事件会再次被激活，从而触发事件两次。

我的代码的问题是向上滚动页面。当我向上滚动页面时。scrollAnimatePrev 将触发，然后 $('body') 元素将为自己设置动画。动画结束后，动画变量设置为 false。但是 $('body') 元素会触发滚动事件，因为我猜当我设置 scrollTop 时会触发滚动事件。所以再一次将 currentPos 设置为 $(window).scrollTop() 然后 currentPos > previousPos 返回 true 并且 !animating 返回 true 所以它会触发 scrollAnimate。

现在我想解决这个问题。如何？

```
 $(function() {
        var record = 0;
        var imgHeight = $(".images").height();
        var offset = $(".images").eq(0).offset();
        var offsetHeight = offset.top;
        var previousPos = $(window).scrollTop();
        var animating = false;
        var state = 0;
        $(window).scroll(function() {
            var currentPos = $(window).scrollTop();
            console.log(currentPos);
            if(currentPos > previousPos && !animating) {
                record++;
                scrollAnimate(record, imgHeight, offsetHeight);
                animating = true;
            } else if (currentPos < previousPos && !animating) {
                record--
                scrollAnimatePrev(record, imgHeight, offsetHeight);
                animating = true;
            }
            previousPos = currentPos;
            console.log(previousPos)
        })

        function scrollAnimate(record, imgHeight, offsetHeight) {
            $('body').animate(
                {scrollTop: (parseInt(offsetHeight) * (record+1)) + (parseInt(imgHeight) * record)},
                1000,
                "easeInOutQuart"                    
            )
            .animate(
                {scrollTop: (parseInt(offsetHeight) * (record)) + (parseInt(imgHeight) * (record))},
                1000,
                "easeOutBounce",
                function() {
                    animating = false;
                }
            )
        }

        function scrollAnimatePrev(record, imgHeight, offsetHeight) {
            $('body').animate(
                {scrollTop: ((parseInt(imgHeight) * record) + (parseInt(offsetHeight) * record)) - offsetHeight},
                1000,
                "easeInOutQuart"
            )
            .animate(
                {scrollTop: ((parseInt(imgHeight) * record) + (parseInt(offsetHeight) * record))},
                1000,
                "easeOutBounce",
                function() {
                    animating = false;
                }
            )
        }
    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T04:46:33.870

我认为它可能会触发两次回调。我最近遇到了类似的问题。

我有类似的东西

```
$('#id, #id2').animate({width: '200px'}, 100, function() { doSomethingOnceOnly(); }) 
```

它调用了我`doSomethingOnceOnly()`两次，我认为它一定是 $ 参数中的双重选择器。我只是把它做成了 2 个不同的选择器，它工作得很好。所以像这样

```
$('#id').animate({width: '200px'}, 100);
$('#id2').animate({width: '200px'}, 100, function() { doSomethingOnceOnly(); ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-30T15:30:27.180

使用标志来控制触发器对我有用。

```
var targetOffset = 0;
var allow_trigger = true;
$('html,body').animate({scrollTop: targetOffset}, 'slow', function() {
    if (allow_trigger) {
        allow_trigger = false;
        doSomethingOnlyOnce();
    }
}); 
```

# visual-studio - Sys.Debug 消息未出现在 VS 调试器输出窗口中

> ID：823379
> 
> 赞同：0
> 
> 时间：2009-05-05T04:39:58.377
> 
> 标签：visual-studio, debugging

这太奇怪了。我似乎无法从 Sys.Debug 方法获取任何输出消息以打印到 Visual Studio 2008 的输出窗口中。

我说的是简单的事情，比如**Sys.Debug.trace("show this message")**或**Sys.Debug.traceDump(Sys.UI.DomEvent)**。

它们很好地显示在 Firebug 跟踪控制台中。它们在 IE textarea id="TraceConsole" 中也显示得很好。

为什么我没有在 VS 调试器控制台中显示这些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T02:14:32.510

如果您使用 C#，则可以使用 System.Diagnostics.Debug.WriteLine 写入调试器输出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-06T02:35:59.393

我发现您必须在 IE 中进行调试才能使其正常工作。如果您在非 IE 浏览器中进行调试，则 Sys.Debug 消息不会令人高兴。

我因为没有记住这一点而感到很愚蠢！〜：/

# css - CSS 下拉菜单帮助

> ID：823384
> 
> 赞同：0
> 
> 时间：2009-05-05T04:42:28.777
> 
> 标签：css, xhtml, drop-down-menu

谁能告诉我为什么 CSS 下拉菜单（翻转“软件解决方案”）在这里工作：

[http://deltaassocc.web704.discountasp.net/temp/page-works.html](http://deltaassocc.web704.discountasp.net/temp/page-works.html)

但不是在这里：

[http://deltaassocc.web704.discountasp.net/temp/page.html](http://deltaassocc.web704.discountasp.net/temp/page.html)

这一直让我发疯！我正在使用 Firefox 3.0.10。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:04:38.943

CSS 菜单中内置了大量知识，以涵盖不同的浏览器版本等。我的建议是不要自己这样做。获得一个像吸盘鱼（或许多变体之一）这样的预建鱼。

或者，您可以使用基于 Javascript 的解决方案，如这里建议的 superfish。

**注意：**如果您需要支持 IE6，那么无论如何您都将为该浏览器使用 Javascript，因为它不支持锚点以外的任何东西上的 :hover 伪元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T05:05:20.033

因为您正在失去对父元素的关注。在第二个中，下面有更多元素，当下拉菜单扩展时，它会在内容容器下方 - 您向下移动鼠标，它会在文本内容容器上方，而不是在菜单容器上方。

安装[Web 开发人员工具栏](https://addons.mozilla.org/en-US/firefox/addon/60)和大纲框元素，您会看到。

Google for jquery 下拉菜单或其他基于 javascript 框架的解决方案，它们可以正常工作并跨浏览器，除非您只是为了自学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T04:47:11.947

这些页面在 IE8 和 Firefox 中看起来相同。菜单下降但看起来不是那么好。如果您使用 JQUERY SuperFish 是一个非常好的 cs 菜单。

# design-patterns - 依赖注入只是策略模式的另一个名称吗？

> ID：823387
> 
> 赞同：32
> 
> 时间：2009-05-05T04:43:36.917
> 
> 标签：design-patterns, dependency-injection, strategy-pattern

这些术语是否相等，或者依赖注入和策略模式之间有什么重要区别？在我看来，马丁福勒似乎只是用一个更吸引人的名字重命名了策略模式，我错过了什么吗？

# sql - 结合 SQL 插入和删除

> ID：823398
> 
> 赞同：2
> 
> 时间：2009-05-05T04:49:46.373
> 
> 标签：sql, mysql

好的，这是问题

我有三张桌子

```
events
- id
- name

questions
- id
- event_id
- name

answers
- id
- question_id
- description 
```

在生成添加表单时，我可以简单地搜索属于特定事件的所有问题，并以单个 HTML 表单显示问题。

但考虑编辑场景。事件管理员可以在适当的时候从事件中添加或删除一些问题。因此，在这种情况下，当用户尝试编辑已发布的答案时，我会生成 HTML 表单，其中包含新问题作为空白字段，现有答案是预填充的输入框。我该如何处理此表格的提交？

当用户提交时，我应该删除所有过去的答案并在答案表上为所有答案值做一个 INSERT 吗？还是先更新现有答案并仅插入新值是一种好习惯？

前者显然更容易使用 DELETE，然后是 INSERT。虽然后者有些乏味。以前的解决方案的问题是答案表的 id 每次都会增加..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T04:57:21.893

有些人喜欢删除/插入方法，因为就像你说的那样，它更简单。

我个人认为更新/插入/删除方法虽然工作更多，但更正确。

如果您进行更新，则可以对特定项目的更改进行审计跟踪。只需插入/删除，就很难或根本不可能拥有这种联系和历史。

至于如何处理表单的提交，对于可以更新的字段（即它们是现有记录），您需要能够以某种方式识别该字段。就我个人而言，我只是对字段名称中的主键进行编码。

如果您这样做，您当然必须通过验证提供的 ID 是有效的并且允许编辑来确保您没有安全漏洞，即永远不要信任客户端。

这可以采取以下形式：

```
<input type="text" name="name_117" value="Some value">
<input type="text" name="name_118" value="Some other value">
<input type="text" name="name_1243" value="Yet another value"> 
```

您必须处理所有输入参数，解码标识符并采取相应措施。

最后，插入/删除的另一个问题是，如果您要删除/插入的项目与数据库中的其他表相关，您将无法执行此操作（或者它变得非常困难）。如果您有一个问题表并存储人们给出的答案，通常您会将问题作为外键引用。如果您删除/插入而不是更新，您将失去该关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T05:02:36.840

首先，ID 无论如何都不应该被用于任何事情，所以忽略增量是一个很好的提醒。

我更愿意处理主要问题，但是，从概念上讲，其他一切都是平等的。用户实际上是否通过他们的编辑建立了一组不同的问题？然后将它们保存为新集。还是原始集合旨在保留其概念身份？然后更新/删除/插入。情况似乎更是如此。

在确保问题/答案集的完整性方面，我认为会话具有这种责任。您应该考虑根据与会话相关的问题集来验证问题集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T13:45:04.293

在线测验应用程序通常会在测验上线后锁定测验。处理完整的答案集与不断变化的问题定义相比，这是一个混乱的问题。如果您的应用程序可以处理它，我倾向于在事件首次发布后不允许更改问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T16:56:23.880

同意 Cletus 的帖子，出于一个额外的原因和一个想法单独写作：

当您的网站访问量很大时，删除/插入方法存在并发问题。其他人可以在您删除后进行插入，然后您最终将得到每个用户的多个答案列表。

MySQL 支持[ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.1/en/insert.html)语法。如果您有适当的主键，这可能是组合插入和更新的简单方法。

# validation - struts2中单个操作的多个validation.xml中的问题

> ID：823399
> 
> 赞同：0
> 
> 时间：2009-05-05T04:50:06.480
> 
> 标签：validation, struts2

我正在研究 struts2 应用程序。我有一个包含 3 个文本字段的 jsp 页面。我正在通过 action-validation.xml 文件验证每个字段。现在我想如果验证在第一个字段失败，它不应该检查其他两个字段，结果直接转到 jsp 页面（比如 a.jsp），仅显示该单个字段的错误消息。如果第一个字段的验证没有失败，那么它应该检查其余的文件，即第二个和第三个文件，现在如果验证在这里失败，那么结果也直接转到 jsp 页面，但不同的页面（比如 b.jsp）显示错误消息。可能吗？如果是，那么请让我知道这一点。

我已经尝试过了，但是 action-validation.xml 正在单次验证所有字段，并且所有字段的错误消息都显示在我在 a.jsp 下编写的 jsp 页面中

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-06T00:22:00.923

您可以在字段验证器中添加短路

例如

```
<!-- Field Validators for email field -->
  <field name="email">
      <field-validator type="required" short-circuit="true">
          <message>You must enter a value for email.</message>
      </field-validator>
      <field-validator type="email" short-circuit="true">
          <message>Not a valid e-mail.</message>
      </field-validator>
  </field>
  <!-- Field Validators for email2 field -->
  <field name="email2">
     <field-validator type="required">
          <message>You must enter a value for email2.</message>
      </field-validator>
     <field-validator type="email">
          <message>Not a valid e-mail2.</message>
      </field-validator>
  </field> 
```

如果 email 为空或无效，则 email2 将不会被验证

[http://struts.apache.org/2.x/docs/validation.html](http://struts.apache.org/2.x/docs/validation.html)

“标记为短路的特定验证器的失败将阻止对后续验证器的评估”

# c# - 接口问题（多态性）C#

> ID：823400
> 
> 赞同：0
> 
> 时间：2009-05-05T04:50:57.913
> 
> 标签：c#, interface, polymorphism

我有两个类，它们有一些常用方法，如 funcA()、funcB()

有些方法只与它的类有关......

我做的是TestInterface的接口

```
public interface TestInterface
{
   void funcA()
   void funcB()
}

public class ClassA : TestInterface
{
  public  void funcA()
   {
     Console.WriteLine("This is ClassA FuncA()");
   }
  public  void funcB()
   {
     Console.WriteLine("This is ClassA FuncB()");
   }
  public void myFuncA()
   {
      Console.WriteLine("This is My Own Function A");
    }

}

public class ClassB : TestInterface
    {
      public  void funcA()
       {
         Console.WriteLine("This is ClassB FuncA()");
       }
      public  void funcB()
       {
         Console.WriteLine("This is ClassB FuncB()");
       }
      public void myFuncB()
       {
          Console.WriteLine("This is My Own Function B");
       }

    }

public static void main()
{
 TestInterface test = new ClassA();
 test.funcA();
} 
```

正如你在上面的两个类中看到的。我有两个函数 myFuncA() 和 myFuncB() 不是接口的一部分。他们只属于他们自己的阶级。

我如何从主要方法中调用它们。我在哪里创建 TestInterface 的对象并用一些子类初始化它。？？？

* * *

实际上我在 DAL 中有单独的课程。

他们有一些常用的方法。以及一些与自己的类相关的方法。

我想在此实现工厂模式。

我现在该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T04:55:12.740

如果您问是否可以执行以下操作：

```
public static void Main(string[] a)
{
 TestInterface test = new ClassA();
 test.myFuncA();
} 
```

答案是不。您必须先将其转换为 ClassA。您认为需要这样做的事实表明您的设计可能有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T13:31:33.510

```
TestInterface test = new ClassA();
 test.myFuncA();
(test as ClassB).myFuncB(); 
```

希望这就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T04:55:34.347

为 ClassA 和 ClassB 创建一个新接口，您只需将类转换为正确的接口即可查看新功能。

```
public class ClassA : TestInterface, TestInterfaceA {
} 
```

因此，当您获得具体实例时，只需将其转换为 TestInterfaceA 即可查看特定于此类的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T04:57:25.170

您可以强制转换 TestInterface 对象，但它违背了多态性的目的......

```
public static void main()
{
 TestInterface test = new ClassA();
 test.funcA();
((ClassA) test).myFuncA();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T04:59:15.290

尝试铸造。我从问题中假设您的意思是这样的：

```
public void simpleMethod(TestInterface variableName) {
   if (variableName is ClassA) {
       ((ClassA)variableName).myFuncA();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-07T06:43:29.767

Mohsen 我真的对你的问题感到困惑

如果你只想调用 MyFuncA() 或 MyFuncB() 只是你应该创建一个他们自己的类的实例，比如

```
ClassA a = new ClassA();
a.FuncA(); //interface member
a.FuncB(); // interface member
a.MyFuncA(); //class A Member 
```

我无法理解您为什么要尝试创建接口的实例然后调用子类方法！！！！我对吗 ？还是误解了您的问题？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-05T05:03:32.110

```
is it good to add methods of ClassA and ClassB into interface and provide null implementation in other class?
like 

public interface TestInterface
{
void funcA();
void funcB();
void myFuncA();
void myFuncB();
}

public class ClassA:TestInterface
{
public void funcA()
{
 // some code here
}

public void funcB()
{
 // some code here
}
public void myFuncA()
{
 // my own code here
}
public void funcB()
{
 // null implementation
}
} 
```

在 B 类中反之亦然

# .net - 谁应该为 GAC 安装共享的 .NET 库？提供库的框架？每个使用它的应用程序？两个都？

> ID：823405
> 
> 赞同：2
> 
> 时间：2009-05-05T04:53:03.370
> 
> 标签：.net, frameworks, windows-installer, gac

这或许更像是一个哲学问题。

假设我有一个框架，我决定提供一个 .NET 库，使框架的某些方面的使用更容易。我不希望每个使用该框架的应用程序都在本地携带库的副本，因此我希望它在 GAC 中（即使存在可能暗示的所有维护问题。）

我可以让框架很容易地将库安装到 GAC 中，因此每个应用程序都不必这样做。但是当我创建新版本的库时，我的框架安装程序必须同时携带旧库和新库，以确保升级不会删除某些应用程序可能正在使用的旧库。

但是，如果每个应用程序也将库安装到 GAC，Windows Installer 引用计数就会启动，并且我的框架不再需要担心在升级场景中携带旧库。仅当最后一个 Windows Installer 引用消失时，才会卸载正在使用的库。

显然，每个应用程序在构建应用程序时都可以访问该库，并且可以轻松地将其包含在其安装程序中。

有人对一个与另一个有意见/观点/经验吗？我意识到这不是严格要求的问题类型（因为它会引起讨论），但我认为简短的讨论会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:41:09.837

我们也有对多种产品的确切需求，对于我们的框架，我们只使用一个 MSI[合并模块](http://wix.sourceforge.net/manual-wix2/authoring_merge_modules.htm)，每个产品都引用了该模块。

```
<Feature ...>
  ...
  <MergeRef Id="FrameworkMergeModule" />
</Feature>
...
<Directory ...>
  <Merge Id="FrameworkMergeModule" SourceFile="..\Tools\Framework.msm" ... />
</Directory> 
```

正如您所说，这种方法没有发现任何问题，引用计数可以完成它的工作。

要让程序集进入 GAC 需要额外的障碍（强大的命名，wix 中的更多工作），但没什么大不了的。如果您使用 GAC 或只是将普通 xcopy 部署到安装目录（通过 wix-fu），则此方法有效

我们（在强烈命名程序集之后）使用的主要痛苦是在深入研究之前没有完全理解 AssemblyVersion 和 AssemblyFileVersion 属性......您真的只想在真正需要时更改 AssemblyVersion，并查看通配符引用构建和/或修订版本以使事情变得更容易（假设您有严格的版本控制策略）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T02:53:07.660

您的框架的每个新版本都向后兼容吗？您是否曾经弃用组件或更改接口？

假设上述问题为“否”，您可以增加版本，让新库卸载旧版本并安装新版本。然后使用 GAC 策略文件将旧版本映射到新版本。这样，引用旧库的应用程序就不必更改，并将映射到新版本。

[这是关于创建策略文件的 SO 问题](https://stackoverflow.com/questions/185187/how-to-make-publisher-policy-file-redirect-assembly-request)

[发布者政策文件的 MS 文档](http://msdn.microsoft.com/en-us/library/dz32563a.aspx)

以下将强制任何引用 1.0.0.0 的应用程序使用较新的 2.0.0.0。我相信你也可以使用通配符。

```
<configuration>
    <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="myAssembly"
                       publicKeyToken="32ab4ba45e0a69a1"
                       culture="en-us" />
                <!-- Redirecting to version 2.0.0.0 of the assembly. -->
                <bindingRedirect oldVersion="1.0.0.0"
                      newVersion="2.0.0.0"/>
            </dependentAssembly>
        </assemblyBinding>
    </runtime>
</configuration> 
```

# javascript - 如何在文件上传时显示状态消息？

> ID：823416
> 
> 赞同：0
> 
> 时间：2009-05-05T04:59:07.707
> 
> 标签：javascript, jsp

任何人都可以提供一种使用 JavaScript 在文件上传时显示状态消息并在文件上传时消失的简单方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:13:16.817

> 使用 Jquery 插件，您可以在上传时和上传后应用许多效果。

查看此演示链接：http:
[//valums.com/wp-content/uploads/ajax-upload/demo-prototype.htm](http://valums.com/wp-content/uploads/ajax-upload/demo-prototype.htm)
[http://www.uploadify.com/demo/](http://www.uploadify.com/demo/)

jQuery 示例：http:
[//valums.com/ajax-upload/](http://valums.com/ajax-upload/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:28:32.687

```
 <style type="text/css">
     #loadingMessage {
        position: absolute;
        top: WHEREVER;
        left: WHEREEVER;
        z-Index: 100;
     }
  </style> 

   <div id="loadingMessage" style="visibility:hidden;">This page be uploading!</div>

    <form id="yourForm"> ... </form>

    <script>
       document.getElementById("yourform").onsubmit = function() {
          document.getElementById("loadingMessage").visibilty = "visible";
          return true;
       };
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T05:00:24.850

这取决于您的服务器端语言。如果你使用 PHP，你需要这样的东西：[Martin Jansen](https://martinjansen.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T05:12:17.287

前段时间我也遇到过[类似](https://stackoverflow.com/questions/700347/display-message-after-form-validation-before-result-page)的情况，最终使用了出色的[BlockUI](http://www.malsup.com/jquery/block/) [jQuery](http://jquery.com/)插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T06:26:38.840

```
 <style type="text/css">
     #loadingMessage {
        position: absolute;
        top: WHEREVER;
        left: WHEREEVER;
        z-Index: 100;
     }
  </style>

    <div id="loadingMessage" style="visibility:hidden;">This page be uploading!</div>

    <form id="yourForm"> ... </form>

    <script>
       document.getElementById("yourform").onsubmit = function() {
          document.getElementById("loadingMessage").visibilty = "visible";
          return true;
       };
    </script> 
```

# c++ - 在 C++ 中传递对指针的引用

> ID：823426
> 
> 赞同：136
> 
> 时间：2009-05-05T05:05:05.867
> 
> 标签：c++, pointers, reference

据我所知，没有理由不允许我在 C++ 中传递对指针的引用。但是，我这样做的尝试失败了，我不知道为什么。

这就是我正在做的事情：

```
void myfunc(string*& val)
{
    // Do stuff to the string pointer
}

// sometime later 
{
    // ...
    string s;
    myfunc(&s);
    // ...
} 
```

我收到了这个错误：

> 无法将参数 1 从 'std::string *' 转换为 'std::string *&'

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2009-05-05T05:19:12.027

您的函数需要对调用范围内的实际字符串指针的引用，而不是匿名字符串指针。因此：

```
string s;
string* _s = &s;
myfunc(_s); 
```

应该编译得很好。

但是，这仅在您打算修改传递给函数的指针时才有用。如果您打算修改字符串本身，则应按照 Sake 的建议使用对字符串的引用。考虑到这一点，编译器抱怨您的原始代码的原因应该更加明显。在您的代码中，指针是“即时”创建的，修改该指针不会产生任何后果，这不是预期的。引用（相对于指针）的想法是引用始终指向实际对象。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2009-05-05T05:21:39.290

问题是您试图将临时绑定到引用，除非引用是`const`.

因此，您可以执行以下任一操作：

```
void myfunc(string*& val)
{
    // Do stuff to the string pointer
}

void myfunc2(string* const& val)
{
    // Do stuff to the string pointer
}

int main()
// sometime later 
{
    // ...
    string s;
    string* ps = &s;

    myfunc( ps);   // OK because ps is not a temporary
    myfunc2( &s);  // OK because the parameter is a const&
    // ...

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-05T05:13:01.293

将其更改为：

```
 std::string s;
  std::string* pS = &s;
  myfunc(pS); 
```

编辑：

这被调用`ref-to-pointer`，您不能将临时地址作为对函数的引用传递。（除非是`const reference`）。

虽然，我已经展示`std::string* pS = &s;`了（指向局部变量的指针），但它的典型用法是：当您希望被调用者更改指针本身，而不是它指向的对象时。例如，分配内存并将其分配给其参数的内存块的地址分配给其参数的函数必须采用对指针的引用，或指向指针的指针：

```
void myfunc(string*& val)
{
//val is valid even after function call
   val = new std::string("Test");

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-05T05:18:50.657

`&s`生成指向字符串的临时指针，您不能引用临时对象。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-05T05:09:39.100

尝试：

```
void myfunc(string& val)
{
    // Do stuff to the string pointer
}

// sometime later 
{
    // ...
    string s;
    myfunc(s);
    // ...
} 
```

或者

```
void myfunc(string* val)
{
    // Do stuff to the string pointer
}

// sometime later 
{
    // ...
    string s;
    myfunc(&s);
    // ...
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-05T05:26:51.963

编辑：我做了一些实验，发现事情比我想象的要微妙一些。这是我现在认为是准确的答案。

`&s`不是左值，因此您无法创建对它的引用，除非引用的类型是对`const`. 例如，你不能做

```
string * &r = &s; 
```

但你可以

```
string * const &r = &s; 
```

如果您在函数头中放置类似的声明，它将起作用。

```
void myfunc(string * const &a) { ... } 
```

还有一个问题，就是临时工。规则是，只有当它是 时，您才能获得对临时的引用`const`。所以在这种情况下，有人可能会争辩说 &s 是一个临时的，因此必须`const`在函数原型中声明。从实际的角度来看，在这种情况下没有区别。（它要么是右值，要么是临时的。无论哪种方式，都适用相同的规则。）但是，严格来说，我认为它不是临时的，而是右值。我想知道有没有办法区分这两者。（也许它被简单地定义为所有临时值都是右值，所有非左值都是临时值。我不是标准专家。）

话虽如此，您的问题可能处于更高的水平。为什么要引用 的地址`s`？如果要引用指向 的指针`s`，则需要定义一个指针，如

```
string *p = &s;
myfunc(p); 
```

如果您想要对 的引用`s`或指向 的指针`s`，请执行简单的操作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-01T13:51:40.673

欢迎使用 C++11 和右值引用：

```
#include <cassert>
#include <string>

using std::string;

void myfunc(string*&& val)
{
    assert(&val);
    assert(val);
    assert(val->c_str());
    // Do stuff to the string pointer
}

// sometime later 
int main () {
    // ...
    string s;
    myfunc(&s);
    // ...
} 
```

现在您可以访问指针的值（由 引用`val`），它是字符串的地址。

你可以修改指针，没有人会在意。这首先是右值的一个方面。

注意：指针的值只在`myfunc()`返回之前有效。最后，它是一个临时的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-20T09:45:15.500

我刚刚使用了对指针的引用来使除根安全之外的已删除二叉树中的所有指针都变得安全。为了使指针安全，我们只需将其设置为 0。我无法使删除树（仅保留根）的函数接受对指针的引用，因为我使用根（this 指针）作为第一个输入左右遍历。

```
void BinTree::safe_tree(BinTree * &vertex ) {
    if ( vertex!=0 ) {  // base case
        safe_tree(vertex->left);    // left subtree.
            safe_tree(vertex->right);   //  right subtree.
          // delete vertex;  // using this delete causes an error, since they were deleted on the fly using inorder_LVR. If inorder_LVR does not perform delete to the nodes, then, use delete vertex;
        vertex=0;  // making a safe pointer
    }
} // end in 
```

最重要的是，当形参是 (this) 指针时，对指针的引用是无效的。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-05-05T05:15:56.217

我知道传递指针的引用是可能的，我上周做了，但我不记得语法是什么，因为你的代码现在看起来对我的大脑来说是正确的。然而，另一种选择是使用指针的指针：

```
Myfunc(String** s) 
```

* * *

## 回答 #10

> 赞同：-9
> 
> 时间：2009-05-05T08:23:56.590

myfunc("string*& val") 这本身没有任何意义。"string*& val" 意味着 "string val",* 和 & 相互抵消。最后，不能将字符串变量传递给函数（“string val”）。只有基本数据类型可以传递给函数，其他数据类型需要作为指针或引用传递。您可以将 string& val 或 string* val 用于函数。

# drupal - Drupal 会成为移动 Web 应用程序的可行 CMS 吗？

> ID：823428
> 
> 赞同：1
> 
> 时间：2009-05-05T05:05:48.347
> 
> 标签：drupal, mobile, content-management-system

我正在评估开源 CMS 系统，以了解哪些系统是为移动手持设备提供基于移动 Web 的丰富应用程序的最佳选择。

到目前为止，我倾向于 Drupal，因为它似乎是最可扩展、最灵活、最好的性能（缓存和压缩等）并且具有良好的用户管理系统。

CMS 必须能够提供适合大多数智能手持电话的 HTML 内容。我必须假设大多数（如果不是全部）都会这样做，因为您只需控制前端（标题、CSS、HTML 和 javascript）以确保它正确呈现......正确吗？

那么，Drupal 是一个不错的选择吗？而且，在选择 CMS 来提供移动网页时，我还有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:27:28.717

我认为这取决于您所谈论的“基于丰富移动网络的应用程序”的类型。至于为移动设备渲染前端（例如基于屏幕大小的 UI 等），只要 CMS 允许您灵活地控制样式表和 JS，这就是最重要的。

CMS 本身的选择也取决于您自己的舒适程度。看看[Joomla！](http://www.joomla.org/)也

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T19:09:58.973

使用 Drupal 需要注意的一件事是主题引擎往往非常冗长。如果您查看几乎所有 Drupal 站点，例如 Firebug，您会很快注意到它充满了嵌套嵌套嵌套的 div。

这使它非常适合主题化，因为几乎总是有一个具有唯一 ID 的元素可以应用您的 CSS 样式。缺点是它呈现出繁重、复杂的页面，可能会导致移动浏览器出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T05:10:52.017

我认为 Drupal 适合您的应用程序，但它没有对移动设备的内置支持。我曾使用过 drupal，但没有使用过 Drupal 的移动 Web 应用程序。但检查[这个](http://drupal.org/project/mobile)。看来我们可以如你所愿地控制事情。

更新：也检查[一下](http://drupal.org/project/mobit)

# c# - 如何订购 IEnumerable 匿名类型？

> ID：823430
> 
> 赞同：5
> 
> 时间：2009-05-05T05:06:35.287
> 
> 标签：c#, .net-3.5, anonymous-types

请参阅下面的代码，我不知道为什么我的订购不起作用，有什么想法吗？

```
var orderSample = new { ProductName = "", Qty = 0, UserFullName = "" };
var ordersList = (new[] { orderSample }).ToList();

//loop thru another collection and fill ordersList by adding an order at a time
ordersList.Add(new { ProductName = "Product1", Qty = 5, UserFullName = "Mr. Smith" });

//sort the orders by name - DOESN'T WORK
ordersList.OrderBy(p => p.ProductName);

gvReport3.DataSource = ordersList;
gvReport3.DataBind(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-05T05:16:22.113

```
var sortedList = ordersList.OrderBy(p => p.ProductName).ToList(); 
```

[OrderBy()](http://msdn.microsoft.com/en-us/library/bb534966.aspx)返回一个排序的集合，它不修改 ordersList。

如果您需要修改 ordersList，请改用 Sort。

# c# - 需要为 C# 代码构造 XML 表示

> ID：823433
> 
> 赞同：3
> 
> 时间：2009-05-05T05:08:15.283
> 
> 标签：c#, parsing, tokenize

我需要将 C# 代码转换为等效的 XML 表示。
我计划将 C# 代码（C# 2.0 代码片段，无泛型或可空类型）转换为 AST，然后将 AST 转换为 XML。为 C# 寻找一个输出 AST 的简单词法分析器/解析器。
任何关于将 C# 代码转换为 XML 表示（可以转换回 C#）的指针也将非常有帮助。

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T05:25:52.213

[MinosseCC：C# 的词法分析器/解析器生成器](http://www.codeproject.com/KB/recipes/minossecc.aspx)

还有问题：

[在给定 BNF 语法的情况下输出 C# 的解析器生成器？](https://stackoverflow.com/questions/153572/parser-generator-that-outputs-c-given-a-bnf-grammar)建议使用[ANTLR](http://www.antlr.org/)

[将 C# 代码翻译成 AST？](https://stackoverflow.com/questions/213427/translate-c-code-into-ast)

[C# 字符串到表达式树](https://stackoverflow.com/questions/821365/c-string-to-expression-tree)

[开发一个简单的解析器](https://stackoverflow.com/questions/391432/developing-a-simple-parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T05:33:30.277

正如 Mitch 所说，Antlr 可以成为您的解决方案。您可以根据需要转换 Antlr 的 AST 输出，然后使用 xstream 对其进行序列化。这就是我在我的 bs 项目中使用的方法，如果有人知道更好的方法，那对我也很好。

您可以找到 csharp 语法示例，例如[http://www.antlr.org/grammar/1127720913326/tkCSharp.g](http://www.antlr.org/grammar/1127720913326/tkCSharp.g)或[http://www.antlr.org/grammar/1151612545460/CSharpParser.g](http://www.antlr.org/grammar/1151612545460/CSharpParser.g)但您可能需要适应它到 ANTLRV3 或您自己的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-27T03:38:06.127

我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)是一个用于构建代码分析器和转换器的生态系统。DMS 由语言定义参数化，并具有 C#、Java、C++、C、PL/SQL、PHP、JavaScript、COBOL 和各种其他语言的语言定义。当 DMS 根据语言定义进行解析时，它会自动构建一个 AST。DMS 提供的 AST 库可以以类似 Lisp 的括号形式或 XML 格式打印树。DMS 可以直接从 AST 重新生成源代码，而不是将 XML 转换回源代码。DMS 还提供源到源的转换以允许对 AST 进行操作。

# include - “未找到搜索标识符”

> ID：823436
> 
> 赞同：0
> 
> 时间：2009-05-05T05:09:05.657
> 
> 标签：include, identifier, seekg

我有一个名为 main 的程序：

```
#include<iostream>
#include<fstream>
using namespace std;
#include"other.h"
int main()
{
//do stuff
} 
```

然后是其他.h：

```
char* load_data(int begin_point,int num_characters)
{
    seekg(begin_point);
    char* return_val=new char[num_characters+1];
    mapdata.getline(return_val,num_characters);
    return return_val;
} 
```

我得到了错误：

> 'seekg': 未找到标识符

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:15:55.827

seekg 是来自 fstream（在 istream 中声明）类的方法。

你还没有实例化任何东西。

以此为例

```
 ifstream is;
  is.open ("test.txt", ios::binary );

  // get length of file:
  is.seekg (0, ios::end); 
```

来源：[http ://www.cplusplus.com/reference/iostream/istream/seekg/](http://www.cplusplus.com/reference/iostream/istream/seekg/)

所以，你应该

```
char* load_data(int begin_point,int num_characters)
{
    ifstream is;
    is("yourfile.txt") //file is now open for reading. 

    seekg(begin_point);
    char* return_val=new char[num_characters+1];
    mapdata.getline(return_val,num_characters);
    return return_val;
} 
```

考虑 ParoXon 在您的问题中的评论。

您应该创建一个包含函数的 load_data 实现的文件 other.cpp。文件 other.h 应包含函数的 load_data 声明。在该文件（other.h）中，您应该包含所有文件，以便在该文件中声明的函数正常工作。并且不要忘记保护自己免受多重包含！

文件其他.h

```
#ifndef __OTHER_H__
#define  __OTHER_H__

#include <iostream>
#include <fstream>

char* load_data(int,int);//no implementation
#endif 
```

文件其他.cpp

```
#include "other.h" //assumes other.h and other.cpp in same directory

char* load_data(int begin,int amount){
      //load_data implementation
} 
```

# visual-studio - 如何在 viemu 的插入模式下移动光标（不使用箭头键）？

> ID：823447
> 
> 赞同：1
> 
> 时间：2009-05-05T05:14:50.290
> 
> 标签：visual-studio, viemu

有时我只想向左或向右移动几个字符（或转到行尾），但不想离开插入模式只是为了移动几个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T07:05:18.433

我不知道 viemu 和 Visual Studio，但是在 vim 中，您可以`<Ctrl-o>`在插入模式下使用输入单个命令，因此`<ctrl-o>2l`会将您向左移动 2 个字符，`<ctrl-o>$`并将您移动到行尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-04T05:02:45.770

没有比使用箭头键更容易移动光标的方法，这就是它们的用途。插入模式用于插入文本，而不是导航文件。如果您想对不使用箭头键如此迂腐，那么有一个适合您的解决方案：

1.  按
2.  使用“HJKL”键直到到达目的地
3.  按“我”

# javascript - CSS中的垂直对齐？

> ID：823448
> 
> 赞同：2
> 
> 时间：2009-05-05T05:15:52.673
> 
> 标签：javascript, css, vertical-alignment

所以我知道`vertical-align: middle;`人们在 CSS 中垂直对齐元素的问题和不同的方法。但我还没有找到一个适合我需要它工作的东西。

基本上我的页面上只有一个`<div>`，我希望将其放置在页面的中心，水平和垂直。显然水平部分很容易，但我被垂直部分挂断了。我的问题是高度`<div>`未知；内容发生了变化，所以我无法为其指定高度。

有人对我有什么建议吗？如有必要，我愿意使用 JavaScript。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T05:23:36.213

长话短说，你[需要两个 div](https://stackoverflow.com/questions/396145/whats-the-best-way-of-centering-a-div-vertically-with-css)来获得纯 CSS 的垂直居中。

但是，使用 Javascript，您可以[使用单个 div](http://www.alistapart.com/d/footers/footer_variation1.html)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T05:26:00.810

正如你所说你不介意使用 JS，这里是......（我通常从不回退到 JS 解决方案，但如果你对它很酷，那么我也是）

如果你的 CSS 是

```
#element {
    position: absolute;
    top: 50%;
} 
```

然后你可以使用我的朋友 jQuery

```
$(document).ready(function() {
    var height = $('#element').height();
    $('#element').css({marginTop: '-' + (height / 2) + 'px'})

{); 
```

请注意，这是未经测试的，但应该是一个开始。希望 height / 2 能按预期工作，如果没有，请尝试使用`parseInt()`;

# php - 如何使用正则表达式返回带有 MySQL 查询的记录？

> ID：823462
> 
> 赞同：4
> 
> 时间：2009-05-05T05:22:39.040
> 
> 标签：php, mysql, regex

我的数据库中有使用用户输入搜索的记录，最初，这足以找到正确的记录。

```
"SELECT id FROM plants WHERE Flower LIKE '%" . $sanitizedUserInput . "%'" 
```

这一切都很好，但随后事情开始发生，例如，搜索“红色”是在他们的`Flower`领域中按顺序找到带有字符“红色”的植物，而不仅仅是整个单词“红色”。

有人建议我在用户输入的两侧简单地放置一个空格，但我知道如果单词是字段中的第一个单词或最后一个单词，这将失败。我心想，我应该使用正则表达式！搜索两边都有单词边界的单词。

不幸的是，我以前从未在数据库中使用过正则表达式。您如何构建查询以使用正则表达式搜索数据库？希望它像这样简单：

```
"SELECT id FROM plants WHERE Flower REGEX `/\b" . $sanitizedUserInput . " \b/`" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T05:30:11.407

是的，就这么简单。

[MySQL 参考手册 - 正则表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

MySQL 正则表达式中的单词边界序列是`[[:<:]]`，`[[:>:]]`所以你最终会得到类似的结果：

```
$query = "SELECT id ".
            "FROM plants ".
            "WHERE Flower REGEXP '[[:<:]]".$sanitizedUserInput."[[:>:]]'"; 
```

# indexing - 我可以在视图上使用全文索引吗？

> ID：823466
> 
> 赞同：2
> 
> 时间：2009-05-05T05:25:31.747
> 
> 标签：indexing, sql-server-2000, full-text-search

我正在使用 SQL Server 2000，并且正在表上使用全文索引。我可以在此表的视图上使用全文索引吗？如果是，那我该如何使用？如果没有，那我该怎么办？

实际上，我正在对从表中获得的结果进行细化，对于这种细化，我正在使用该表的视图......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T05:30:24.730

不，您不能在表视图上使用全文索引。

[不过，您显然可以在索引视图](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=121108)上创建一个。

另请参阅：[创建索引视图](http://msdn.microsoft.com/en-us/library/aa933148.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:03:46.583

我认为您可以在视图中创建全文索引。这是创建视图的想法。

[https://stackoverflow.com/questions/263071?sort=votes](https://stackoverflow.com/questions/263071?sort=votes)

# iphone - 在 iPhone 上将模式 UIView 的方向更改为横向模式

> ID：823473
> 
> 赞同：0
> 
> 时间：2009-05-05T05:29:00.553
> 
> 标签：iphone, view, modal-dialog, orientation

我在标签栏控制器顶部显示了一个模态视图，标签栏控制器的方向和我的模态视图当前处于纵向模式，我只需要将我的模态视图方向更改为横向模式，我尝试使用 UIDevice Orientation 但没有成功仅当 .plist 具有 UIDeviceOrientationKey 时才有效，并且我不希望我的整个应用程序处于横向模式。其次，我什至尝试使用 UIApplication setStatusBarOrientation 但我的视图没有响应，即只有我的设备（模拟器）旋转但视图仍保持纵向模式，在 UIView 上使用仿射变换创建一个空视图我的视图是通过 XIB 创建的。

请帮忙

谢谢拉克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-21T11:05:18.223

我已经使用[了它](http://aralbalkan.com/2334#comments)，并且可以通过一些调整来很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-08T11:19:27.193

直到今天，我使用了以下解决方案：

```
-(void)setOrientation:(UIInterfaceOrientation)orientation
{
 SEL rotation = @selector(_setRotatableViewOrientation:duration:);
 NSMethodSignature * methodSignature = [window methodSignatureForSelector:rotation];
 if (methodSignature)
 {
  NSInvocation * ivc = [NSInvocation invocationWithMethodSignature:methodSignature];
  [ivc setTarget:window];
  [ivc setSelector:rotation];
  // arg0 will be self, 1 will be cmd_ (current method selector)
  [ivc setArgument:&orientation atIndex:2];
  double duration = 0.4;
  [ivc setArgument:&duration atIndex:3];
  [ivc invoke];
 }
}

-(void)normalizeOrientation
{
 UIDeviceOrientation dOrientation = [UIDevice currentDevice].orientation;

 int orientation = -1;

    switch(dOrientation)
    {
        case UIDeviceOrientationPortrait:
            orientation = UIInterfaceOrientationPortrait;
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            orientation = UIInterfaceOrientationPortraitUpsideDown;
            break;
        case UIDeviceOrientationLandscapeRight:
            orientation = UIInterfaceOrientationLandscapeLeft;
            break;
        case UIDeviceOrientationLandscapeLeft:
            orientation = UIInterfaceOrientationLandscapeRight;
            break;
    }

    if (orientation != -1 && orientation != tabBarController.interfaceOrientation)
        [self setOrientation:orientation];
} 
```

但由于 _setRotatableViewOrientation:duration:transition:toView: 没有记录 API，官方 AppStore 不会接受我的应用程序的新版本。

所以请注意在您的商业项目中使用它！Apple 新的自动化 API 检查器将拒绝您的应用程序！

# iphone - 在每个单元格中加载图像时，如何提高表格视图中的滚动速度？

> ID：823475
> 
> 赞同：4
> 
> 时间：2009-05-05T05:29:59.800
> 
> 标签：iphone, tableview

检查 [return cell] 之前的最后几行 ..加载图像后，滚动速度正在降低..似乎滚动卡住了

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
    }

    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    NSString *itemDescription=[[stories objectAtIndex: storyIndex]
                                                 objectForKey:@"title"];

    CGRect aframe = CGRectMake(80, 30, 250, 40); 
    textLabel = [[UILabel alloc] initWithFrame:aframe];
        textLabel.font = [UIFont boldSystemFontOfSize:14];
    textLabel.numberOfLines=0;
    textLabel.textColor = [UIColor darkTextColor];
    textLabel.backgroundColor = [UIColor whiteColor];
    [cell.contentView addSubview:textLabel];
    textLabel.text=itemDescription;

    CGRect frame = CGRectMake(0, 0, 70,80);
    UIImageView *TopImageView = [[UIImageView alloc] init];
    [cell.contentView addSubview:TopImageView];
    TopImageView.frame=frame;

    m_strImage = [m_imglinkArray objectAtIndex:storyIndex]; 

    TopImage = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:m_strImage]]];
    TopImageView.image=TopImage;

    return cell;
} 
```

你们能帮我提高卷轴的速度吗？

问候

阿伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T12:15:49.623

我相信你在这里可能有两个问题。首先是图像加载不是多线程的问题，其次是您如何使用 UITableViewCell。

每当屏幕上出现单元格时，iPhone 都会调用 cellForRowAtIndexPath - 如果您向下滚动，则当您再次向上滚动时，上面的所有内容都会被卸载并重新加载。如前所述，这可以通过多线程模式来解决 - 发布到 markj.net 的链接和/或使用 NSThread。NSThread 的优点是您可以更灵活地处理问题或加载更多图像数据。（我会同时使用）

为了有效地做到这一点，你需要有一个自定义的 UITableViewCell。无论如何，这很好，因为您可以让表格单元格负责它的内容，而不是您的视图控制器，并且您可以有效地操纵单元格格式和内容。这是一个关于 UITableCellView 的**精彩**帖子的链接：http: [//blog.atrexis.com/index.cfm/2009/1/6/iPhone--Customize-the-UITableCellView](http://blog.atrexis.com/index.cfm/2009/1/6/iPhone--Customize-the-UITableCellView)

当你实现 UITableViewCell 时，尽量将所有 addSubView 和格式化调用放在“if(cell==nil)”块中，**除非**你不能把它们放在你的自定义 initWithFrame 中。您会发现 iPhone 正在堆叠您添加的每个子视图——它并没有清除旧视图。您可以通过将所有背景颜色设置为“UIColor clearColor”然后在点击之间更改文本来看到这一点——您会看到一堆文本相互叠加。这通常不可见，因为实心填充的背景会覆盖所有“旧”子视图。

在你结合这两种方法之前，考虑实现一个“模型”。你有一个视图和一个控制器，但你的所有数据都应该在一个模型中。所有图像 URL、内容等都应该在 NSMutableArray 之类的东西中，你自己的自定义对象，或者可能通过 SQLite。一旦你有了一个模型，你就可以实现图像的缓存。通过缓存，所有图像都将在应用程序加载之间保留，这将节省电池、带宽和时间。

我会： 1\. 将所有数据放入某种模型中（NSMutableArray、SQLLite 等） 2\. 实现您自己的自定义 UITableViewCell 3\. 确保在 cellForRowAtIndexPath 的活动块中有 0 个 addSubView、init 或 alloc 调用. 使用delegation example或NSThread在后台加载所有图片 5\. 添加本地图片缓存

在 about 和 Apple 论坛上有一些关于缓存图像的好例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T14:06:39.747

nessence有很多很好的信息。还有一些想法：

你在这里像疯了一样漏水。您创建的每个单元格都会泄漏 2 个 UILabel、一个 UIImageView 和一个 UIImage。

如前所述，您不仅泄漏了这些，它们还在您的视图中累积，因为您使用 addSubview: 将一个放在另一个之上。

在单元格绘制期间访问网络非常慢，并且会阻塞您的 UI。如果这些URL是本地的，那么你可以使用UIImage的+imageWithContentsOfFile，如果不是，你需要在后台加载这个。

我不认为你需要一个线程在这里。NSURLConnection 是一种在后台加载数据而不会产生线程开销的绝佳方式。

本质是完全正确的，您需要 Story 的模型类。

您对可重用单元配置的基本方法不正确。您不会获取可重复使用的单元格，然后向其添加子视图。应将所有子视图添加到 if() 块中以创建单元格。然后，在每次传递中，您只需更改事物的值。我在下面重写了您的一些代码以进行演示。这仍然不是正确的代码，因为它在单元格绘制期间接触到网络，这可能是子视图单元格（而不是自定义单元格）中的元素太多，但它更接近正确的想法。我什至不知道这是否编译；我只是在这里输入的。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        // Here we do all our cell creation
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];

        // Make the label
        CGRect aframe = CGRectMake(80, 30, 250, 40);
        UILabel *textLabel = [[[UILabel alloc] initWithFrame:aframe] autorelease]; // Note the -autorelease so we don't leak

        textLabel.font = [UIFont boldSystemFontOfSize:14];
        textLabel.numberOfLines=0;
        textLabel.textColor = [UIColor darkTextColor];
        textLabel.backgroundColor = [UIColor whiteColor];
        textLabel.tag = DescriptionTag; // A tag so we can find it later (you'll need a constant for this)
        [cell.contentView addSubview:textLabel];

        // And the second label
        aframe = CGRectMake(80, 30, 250, 40);
        textLabel = [[[UILabel alloc] initWithFrame:aframe] autorelease];
        textLabel.font = [UIFont boldSystemFontOfSize:14];
        textLabel.numberOfLines=0;
        textLabel.textColor = [UIColor darkTextColor];
        textLabel.backgroundColor = [UIColor whiteColor];
        textLabel.tag = TitleTag;
        [cell.contentView addSubview:textLabel];

        // The image view
        CGRect frame = CGRectMake(0, 0, 70,80);
        UIImageView *topImageView = [[[UIImageView alloc] init] autorelease];
        topImageView.frame = frame;
        topImageView.tag = TopImageTag;
        [cell.contentView addSubview:topImageView];
    }

    // all the above was cell creation; we do that as seldom as possible.
    // Now we do cell configuration. We want this to be fast.

    UILabel *descriptionLabel = (UILabel*)[cell.contentView viewWithTag:DescriptionTag];
    descriptionLabel.text = itemDescription;

    UILabel *titleLabel = (UILabel*)[cell.contentView viewWithTag:TitleTag];
    titleLabel.text =[[stories objectAtIndex:indexPath.row] objectForKey:@"title"];

    NSString *imageURLString = [m_imglinkArray objectAtIndex:storyIndex]; // You should have a model class called Story, not two arrays.
    UIImage *image = [[[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageURLString]]] autorelease]; // This is still way too slow if it's a remote URL 
    UIImageView *imageView = (UIImageView*)[cell.contentView viewWithTag:TopImageTag];
    imageView.image = image;    

    return cell;
} 
```

我建议您花一些时间学习[TableViewSuite](http://developer.apple.com/iphone/library/samplecode/TableViewSuite/)、[实用内存管理](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)和[Cocoa 编码指南](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)。花些时间学习 Cocoa 的基础知识也会很有用，因为这里的编码风格表明你可能没有扎实的基础。虽然这是一本 Mac 书，但我仍然推荐[Cocoa Programming for Mac OS X](https://rads.stackoverflow.com/amzn/click/com/0321503619)。如果您有兴趣使用它来学习 iPhone，我整理了一个可能会有所帮助的[教学大纲。](http://robnapier.net/blog/iphone-course-syllabus-158)我还没有复习，但斯坦福的在线[CS193P 课程](http://www.stanford.edu/class/cs193p/cgi-bin/index.php)看起来很有希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-17T13:08:27.753

这已经在这里问了好几次了，你需要做的是**异步**加载每个单元格的图像，以防止滚动变慢。

这称为“延迟图像加载”，我在这里引用苹果教程： [在 UITableView 中延迟加载图像](https://stackoverflow.com/questions/1130089/lazy-load-images-in-uitableview/1829035#1829035)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T07:05:40.837

每次表格视图要求获取一行的单元格时，您似乎都是从 url 加载的。这发生在主应用程序线程（用户界面线程）中，它阻塞了用户界面，使其没有响应。

特别是如果此 url 是您从 Internet 加载的资源，则此暂停很大。

我建议您应该在后台线程中加载图像并显示占位符图像，直到它们从网络中获取。

您可以尝试以下网址中提供的解决方案...

[http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

# c++ - 多个线程从同一个文件中读取

> ID：823479
> 
> 赞同：15
> 
> 时间：2009-05-05T05:30:46.523
> 
> 标签：c++, c, file-io

我的平台是 windows vista 32，带有 visual c++ express 2008 。

例如：

如果我有一个包含 4000 字节的文件，我可以同时从文件中读取 4 个线程吗？每个线程访问文件的不同部分。

线程 1 读取 0-999，线程 2 读取 1000 - 2999，等等。

请用C语言举例。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-05T05:54:02.507

如果您不写信给他们，则无需处理同步/竞争条件。

只需使用共享阅读打开文件作为不同的句柄，一切都会正常工作。（即，您必须在线程的上下文中打开文件，而不是共享相同的文件句柄）。

```
#include <stdio.h>
#include <windows.h>

DWORD WINAPI mythread(LPVOID param)
{
    int i = (int) param;
    BYTE buf[1000];
    DWORD numread;

    HANDLE h = CreateFile("c:\\test.txt", GENERIC_READ, FILE_SHARE_READ,
        NULL, OPEN_EXISTING, 0, NULL);

    SetFilePointer(h, i * 1000, NULL, FILE_BEGIN);
    ReadFile(h, buf, sizeof(buf), &numread, NULL); 
    printf("buf[%d]: %02X %02X %02X\n", i+1, buf[0], buf[1], buf[2]);

    return 0;
}

int main()
{
    int i;
    HANDLE h[4];

    for (i = 0; i < 4; i++)
        h[i] = CreateThread(NULL, 0, mythread, (LPVOID)i, 0, NULL);

    // for (i = 0; i < 4; i++) WaitForSingleObject(h[i], INFINITE);
    WaitForMultipleObjects(4, h, TRUE, INFINITE);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T09:44:00.860

*老实说，写入*同一个文件甚至没有什么大问题。

到目前为止，最简单的方法是仅对文件进行内存映射。然后操作系统会给你一个 void* 文件映射到内存的位置。将其转换为 char[]，并确保每个线程都使用不重叠的子数组。

```
void foo(char* begin, char*end) { /* .... */ }
void* base_address = myOS_memory_map("example.binary");
myOS_start_thread(&foo, (char*)base_address, (char*)base_address + 1000);
myOS_start_thread(&foo, (char*)base_address+1000, (char*)base_address + 2000);
myOS_start_thread(&foo, (char*)base_address+2000, (char*)base_address + 3000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T05:35:00.803

您当然可以有多个线程从数据结构中读取，如果发生任何*写入*，则可能会出现竞争条件。

为了避免这种竞争条件，您需要定义线程可以读取的边界，如果您有明确数量的数据段和明确数量的线程来匹配这些，那么这很容易。

至于 C 中的示例，您需要提供更多信息，例如您正在使用的线程库。先尝试一下，然后我们可以帮助您解决任何问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T14:24:31.483

Windows 支持重叠 I/O，它允许单个线程异步排队多个 I/O 请求以获得更好的性能。只要您正在访问的文件支持查找（即这不是管道），这可以被多个线程同时使用。

传递`FILE_FLAG_OVERLAPPED`给`CreateFile()`允许在同一个文件句柄上同时读取和写入；否则，Windows 会序列化它们。`Offset`使用结构的和`OffsetHigh`成员指定文件偏移量[`OVERLAPPED`](http://msdn.microsoft.com/en-us/library/ms684342(VS.85).aspx)。

有关详细信息，请参阅[同步和重叠输入和输出](http://msdn.microsoft.com/en-us/library/ms686358(VS.85).aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T07:03:25.897

我看不出这样做有什么真正的好处。
您可能有多个线程从设备读取，但您的瓶颈不是 CPU，而是磁盘 IO 速度。

如果您不小心，您甚至可能会减慢进程（但您需要对其进行测量才能确定）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-05T08:10:59.073

正如其他人已经指出的那样，从同一个文件中读取多个线程没有固有的问题，只要它们有自己的文件描述符/句柄。不过，我有点好奇你的**动机**。为什么要并行读取文件？如果您只是将文件读入内存，那么您的瓶颈很可能是磁盘本身，在这种情况下，多线程根本不会帮助您（它只会使您的代码混乱）。

与往常一样，在优化时，您不应该尝试它，直到您 (1) 有一个易于理解、工作的解决方案，并且 (2) 您已经测量了您的代码以知道应该在哪里优化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-03-17T20:27:50.980

最简单的方法是在每个并行实例中打开文件，但只需以只读方式打开它。

说可能存在 IO 瓶颈的人可能是错误的。任何现代操作系统都会缓存文件读取。这意味着您第一次读取文件将是最慢的，而任何后续读取都将是闪电般的快。一个 4000 字节的文件甚至可以存放在处理器的缓存中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T06:06:49.103

如果他们所做的只是阅读，那么您不需要做任何特别聪明的事情。显然，只要您不专门锁定它，您就可以随意多次并行阅读它。写作显然是另一回事......

我确实想知道您为什么要这样做-它可能会表现不佳，因为您的 HDD 会浪费大量时间来回寻找，而不是一次（相对）不间断地扫描全部读取。对于可能不是问题的小文件（例如您的 4000 行示例），这似乎不值得麻烦。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-05T07:59:10.207

虽然我不确定这是否值得努力，但这是可能的。您是否考虑过在单个线程中将整个文件读入内存，然后允许多个线程访问该数据？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-05T08:03:24.893

阅读：无需锁定文件。只需以只读或共享读取方式打开文件

写入：使用互斥锁确保文件仅由一个人写入。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-02T17:36:11.287

```
std::mutex mtx;

void worker(int n)
{
    mtx.lock();

    char * memblock;

    ifstream file ("D:\\test.txt", ios::in);

    if (file.is_open())
    {
        memblock = new char [1000];
        file.seekg (n * 999, ios::beg);
        file.read (memblock, 999);
        memblock[999] = '\0';

        cout << memblock << endl;

        file.close();
        delete[] memblock;
    }
    else 
        cout << "Unable to open file";
    mtx.unlock();
}

int main()
{
    vector<std::thread> vec;
    for(int i=0; i < 3; i++)
    {
        vec.push_back(std::thread(&worker,i));
    }

    std::for_each(vec.begin(), vec.end(), [](std::thread& th)
    {
        th.join();
    });
    return 0;
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-05-05T05:37:23.590

您需要一种方法来同步这些线程。互斥锁有不同的解决方案[http://en.wikipedia.org/wiki/Mutual_exclusion](http://en.wikipedia.org/wiki/Mutual_exclusion)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-05-05T05:45:12.167

他想在不同的线程中读取*文件。*我想如果文件被每个线程以只读方式打开，那应该没问题。

我希望您不想为了性能而这样做，因为您必须扫描文件的大部分以查找每个线程中的换行符。

# null - sql server 2005：如何根据其他列中的值对列进行非空约束？

> ID：823481
> 
> 赞同：0
> 
> 时间：2009-05-05T05:32:17.190
> 
> 标签：null, conditional

在表中，两列是可计费（位），可计费日期（日期时间）。如果可计费不为空，我希望可计费日期不为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T05:49:27.633

添加检查约束：

CHECK（billable 不为 null 且 billabledate 不为 null）或（billable 为 null）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T05:51:04.057

你需要一个检查约束

ALTER TABLE dbo.Table WITH NOCHECK
ADD CONSTRAINT CK_Table_BusinessRule CHECK（Billable 不为空且 BillableDate 不为空）

[http://msdn.microsoft.com/en-us/library/ms179491(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms179491(SQL.90).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T05:48:57.510

我会尝试在插入后和更新后向表中添加触发器，以强制执行该约束。检查 billable 值，如果它不为 null 并且 billabledate 为 null，则阻止插入/更新。

# c# - 按最深目录对带有路径的列表进行排序

> ID：823482
> 
> 赞同：3
> 
> 时间：2009-05-05T05:33:27.110
> 
> 标签：c#, .net, list, sorting, directory

我需要对包含路径（相对或绝对）的列表进行排序，以便最深的路径首先出现，例如：

> \New Folder\Item1\tools\1
> \New Folder\Item1\tools
> \New Folder\Item1
> \New Folder
> 等...

我可以使用类中的 API`Path`来执行此操作吗？

谢谢！J。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T05:40:50.290

这有点开箱即用，但你总是可以这样做：

```
var sortedList = list.OrderByDescending(
    p => p.Count(c => c == Path.DirectorySeparatorChar
        || c == Path.AltDirectorySeparatorChar)); 
```

也就是说，只需按路径分隔符出现的频率排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T08:10:37.013

我假设这些路径是字符串，那么为什么不按降序对它们进行排序呢？

```
var paths = new List<string>
{
  "\\New Folder",
  "\\New Folder\\tools",
  "\\Windows",
  "\\Windows\\System32",
  "\\New Folder\\tools\\1",
};

var result = paths.OrderByDescending(s => s); 
```

或者，如果它们在`string[]`您可以使用：

```
Array.Sort(paths);
Array.Reverse(paths); 
```

结果是：

> \Windows\System32
> \Windows
> \新文件夹\工具\1
> \新文件夹\工具
> \新文件夹

# regex - 使用VI如何搜索和替换以下语句？

> ID：823484
> 
> 赞同：0
> 
> 时间：2009-05-05T05:34:16.000
> 
> 标签：regex, vi

我需要替换以下内容：

```
CREATE TABLE /*!32312 IF NOT EXISTS*/ `access` 
```

到

```
CREATE TABLE IF NOT EXISTS `access` 
```

我试过了

```
:%s/\/\*\!\d+(.*)\*\//\1/g 
```

但这似乎并没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T05:37:52.153

vim 需要反斜杠 + （或使用 * 代替）。此外，您需要在 vim 中使用反斜杠分组括号。因此：

```
:%s/\/\*\!\d\+\(.*\)\*\//\1/g 
```

是的，vim 的老式 posix 正则表达式很糟糕：/

编辑：正如下面评论中提到的，如果转义为 \+，+ 确实有效。并且 \d 实际上是受支持的，哎呀。编辑了示例正则表达式以纠正此问题。另请参阅 Brian Carper 的示例以获得更简洁易读的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T05:48:12.097

使用“非常神奇”，并使用默认分隔符以外的分隔符使其更易于阅读（和记住）。

```
:%s@\v/\*!\d+(.*)\*/@\1@g 
```

如果没有“非常神奇”，您必须在 and 前面加上反斜杠`+`（`()`但不能在前面`*`或其他一些东西前面）。这不是很一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T06:11:19.233

使用 [^*]+ 略有不同且效率更高 :-)

```
1,$s/\v\/\*\!\d+\s*([^*]+)\*\//\1 
```

# .net - 类型缓存

> ID：823485
> 
> 赞同：0
> 
> 时间：2009-05-05T05:34:43.863
> 
> 标签：.net, caching, assemblies

我有这种情况：

我有一个包含我的业务对象类型的程序集，并且该程序集在 WCF 中使用 KnownTypesProvider 在运行时加载了反射（Assembly.LoadFile），但该程序集可能会更改（某些开发人员添加新方法或新属性，甚至更改某些功能可能是错误修复) 但使用 Assembly.LoadFile 程序集文件被锁定，我无法替换此程序集。

是否存在用于类型缓存的框架？使用汇编版本。或组装模型日期？甚至存在一种无需锁组件即可加载的方法？

谢谢！！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T06:36:56.957

您不能在应用程序运行时交换程序集。即使您使用 ReflectionOnlyLoad，它也会被锁定。我认为您既不能卸载程序集。您需要重新启动您的应用程序。

如果自动重新加载程序集对您很重要，您可以尝试将依赖此程序集的所有内容放入 AppDomain，然后重新启动应用程序域。

如果您使用的是 GAC，您可以安装另一个版本的程序集，重定向它并重新启动应用程序。

# php - 如何将 stdin 的内容（直到 EOF）读入 PHP 中的字符串？

> ID：823494
> 
> 赞同：42
> 
> 时间：2009-05-05T05:40:54.660
> 
> 标签：php, stream

如何将 stdin 的内容（直到 EOF）读入 PHP 中的字符串？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-05-05T05:58:08.360

最后我自己弄清楚了：

```
$input_data = file_get_contents("php://stdin"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-05-24T12:40:37.150

这是另一种选择：您可以使用`stream_get_contents`从打开的流（AKA 文件句柄）中获取所有内容。`STDIN`是一个已经打开的句柄，相当于你调用时得到的句柄`fopen('php://stdin')`（参见参考：[输入/输出流](http://php.net/manual/en/features.commandline.io-streams.php)

所以：你可以使用

```
$input_data = stream_get_contents(STDIN); 
```

这相当于[接受的答案](/a/823533/19966)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-05T05:46:05.910

使用一些文件读取函数（例如`fgets()`、`fgetc()`、`fscanf()`）并`STDIN`作为文件路径传入（或`php://stdin`，取决于您的 PHP 版本的新程度）。

您可以使用[`feof()`](http://us2.php.net/manual/en/function.feof.php).

有关更多信息，请参阅PHP.net 上[的 PHP 命令行编程参考。](http://us2.php.net/manual/en/features.commandline.php)

# html - 将 flv 文件嵌入为横幅

> ID：823497
> 
> 赞同：3
> 
> 时间：2009-05-05T05:41:26.513
> 
> 标签：html, flash, flv, banner

我的客户为我提供了一个 .flv 文件作为横幅放置在他们的主页上。我已经在互联网上搜索了一段时间，但没有找到正确的方法。首先，它是做这种横幅的“方式”吗？还是他们应该为我提供 .swf 文件？如果 .flv 没问题，那么我如何将它（没有播放控件或任何东西......）嵌入到我的 html 页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T02:35:12.057

如果您有 Flash，您可以通过多种方式将 FLV 导入到 Flash 文件中。一种是你可以只拥有一个链接，Flash 可以吐出一个 swf 来播放 FLV，它仍然是服务器上的一个单独文件，或者你可以选择将视频直接嵌入到 Flash 文件中，这样 swf 将包含所有的视频内容。如果您没有 Flash，这些其他答案之一可能对您有用，但浏览器不会直接播放 flv。如果您正在创建网页，dreamweaver 还可以生成一个 swf 来为您播放 flv，因此在这种情况下您甚至不需要 Flash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:02:53.967

我会使用[http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)这是一个高度可配置的 flash flv 播放器。如果您不想要任何控件并将其设置为自动播放，则可以通过将 flashvars 传递给它来轻松完成，例如 controlbar=none, autoplay=true, repeat=true 给它。只是阅读它。这是非常有据可查的。您可以像使用任何常规 swf 一样将其嵌入到您的页面中，因为它是使用 flash 构建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T06:04:48.237

您将需要一个 flv 播放器（用 flash 编写），您可以尝试[JW Player](http://www.longtailvideo.com/)，它是开源的，被许多网站使用。

顺便说一句：我建议不要在自动播放中使用该控件，因为某些浏览该网站的人可能来自移动连接并且播放电影可能会花费。

# c# - 生成特定文本文件的类的重构策略

> ID：823498
> 
> 赞同：1
> 
> 时间：2009-05-05T05:44:33.260
> 
> 标签：c#, unit-testing, refactoring, tdd

我是 TDD 菜鸟，我不知道如何解决以下问题。我有相当大的类，它生成特定格式的文本文件，用于导入外部系统。我将重构这个类，并且我想在此之前编写单元测试。

这些测试应该是什么样子？实际上主要目标 - 不要破坏文件的结构。但这不是说我应该比较文件前后的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:05:59.887

在这种情况下，我使用以下策略：

*   为每个方法编写一个测试（仅覆盖其默认行为，没有任何错误处理等）

*   运行代码覆盖工具并找到测试未覆盖的块。编写涵盖这些块的测试。

*   这样做直到代码覆盖率超过 80%

*   开始重构类（主要是按照关注点分离原则生成更小的类）。

*   使用测试驱动开发来编写新类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:09:58.847

实际上，这是一个很好的起点（将众所周知的输出与当前类生成的输出进行比较）。如果单个生成器类可以产生不同的结果，则为每种情况创建一个。这将确保您不会破坏当前的生成器类。

可能对您有所帮助的一件事是，如果您有当前课程的规范文档。您可以将其用作重构工作的基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T06:21:56.340

如果您还没有，请阅读 Michael Feathers 的书“[有效地使用旧代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)”。这完全是关于如何向现有代码添加测试，这正是您正在寻找的。

但是在你读完这本书之前，我建议从回归测试开始：创建类，让它将文件写入磁盘，然后将该文件与你存储在源中的“已知良好”文件进行比较某处的存储库。如果它们不匹配，则测试失败。

然后开始看看你的班级做出的有趣决定。看看如何让它们接受测试。也许您将一些复杂的 if 条件提取到返回 bool 的公共函数中，然后编写一系列测试来证明在给定正确输入的情况下，该函数返回正确的值。也许特定字符串的生成有一些有趣的逻辑；开始测试它。

一路上，你可能会发现想要出去的物体。例如，如果有一个单独的类生成单行输出，您可能会发现代码（或测试！）会更简单。随它去吧。如果你搞砸了，你的回归测试就会抓住你。

坚持不懈地消除依赖关系（但要确保你有一个更高级别的测试，比如回归测试，如果你犯了错误，就会发现你）。如果您的类创建自己的 FileStream 并写入文件系统，请将其更改为在其构造函数中使用 TextWriter，这样您就可以编写传递 StringWriter 的测试，并且永远不会触及文件系统。完成后，您可以摆脱将文件写入磁盘的旧测试（但前提是您在尝试编写新测试时没有破坏它！）如果您的类需要数据库连接，请重构直到您可以编写通过虚假数据的测试。等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T15:47:19.757

我认为你会从一个我不愿称之为“单元测试”的测试中受益——尽管可以说它测试了当前的文本文件生成“单元”。这将简单地运行当前代码并在其输出和“黄金主”文件之间进行比较（您可以通过运行一次测试并复制到其指定位置来生成该文件）。如果代码中有很多条件行为，您可能希望使用几个示例运行它，每个示例都有不同的测试用例。使用现有代码，根据定义，所有测试都应该通过。

现在开始重构。提取一个方法——或者更好，为一个你可以设想提取的方法编写一个测试，一个真正的单元测试——提取该方法，并确保所有测试，对于新的小方法和更大的系统，仍然通过。起泡，冲洗，重复。系统测试给你一个安全网，让你在重构中充满信心；单元测试驱动新代码的设计。

有一些库可以使这种测试更容易（尽管即使没有它们也很容易）。请参阅[http://approvaltests.sourceforge.net/](http://approvaltests.sourceforge.net/)。

# c# - 在 C# 中读取带有特殊字符的 Excel 工作表的问题

> ID：823511
> 
> 赞同：4
> 
> 时间：2009-05-05T05:48:17.900
> 
> 标签：c#, excel

我正在使用 OLEDB 用 C# 读取 Excel 表。在该列标题中，名称为“Sr.No.” 在我的“Sheet1”中。当我将 Excel 工作表数据提取到我的数据表中时，我将“Sr#No#”作为列标题名称而不是原始名称。你能告诉我为什么会这样吗？什么是相同的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-04-19T07:27:22.423

经过一些测试，我发现 OleDB 转换了以下字符：

. 变成#

！变成_

` 变成 _

[变成（

] 变为 )

所有其他字符都被正确读取。希望这可以帮助某人。

此致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-06T09:55:46.130

谷歌搜索表明这是 OLEDB 的固有特性，而不是与 Excel 有任何关系 - 它似乎根本不喜欢列名中的句点 (.)。

我的建议是要么应对它——它似乎是用#s 替换 .s——或者如果可能的话，使用从 C# 读取 Excel 数据的替代方法（在此站点中搜索替代方法）。

# javascript - 在jsp中读取一个json对象

> ID：823518
> 
> 赞同：1
> 
> 时间：2009-05-05T05:51:59.123
> 
> 标签：javascript, json, jsp, object, parsing

我有一个 JSON 对象传递给 jsp 页面。它作为字符串传递。现在我必须解析这个字符串并检索通过 JSON 对象传递的值。这样我就可以在同一个jsp中打印值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:53:36.220

有很多资源，包括[json.org](http://www.json.org/)上各种技术/框架的库和插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:37:08.627

拥有大量 JSON 解析器，这取决于您希望如何处理 JSON 中的数据。我个人最喜欢的是[Jackson](http://jackson.codehaus.org/Tutorial)，但许多其他的也适用于简单的情况，包括“参考实现”（又名[JSON.org 解析器](http://json.org/java)）。

（我假设你想要一个 Java 解析器，参考 jsp）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T21:41:34.773

我对这个问题的首选解决方案是使用 JSON 解析器，该解析器提供实现 java.util.Map 和 java.util.List 接口的输出。这允许在 JSP 表达式语言中简单解析 JSON 结构。

这是一个使用 Apache Wink 提供的 JSON4J 的示例。该示例从 URL 导入 JSON 数据，在 java scriptlet 中对其进行解析并浏览生成的结构。

```
<c:import var="dataJson" url="http://localhost/request.json"/>
<% 
String json = (String)pageContext.getAttribute("dataJson");
pageContext.setAttribute("parsedJSON", org.apache.commons.json.JSON.parse(json));
%>
Fetch the name of the node at index 1 : ${parsedJSON.node[1].name} 
```

为了使这个干净，最好创建一个 JSTL 标记来进行解析并避免使用 java scriplet。

```
<c:import var="dataJson" url="http://localhost/request.json"/>
<json:parse json="${dataJson}" var="parsedJSON" />
Fetch the name of the node at index 1 : ${parsedJSON.node[1].name} 
```

# com - DISPhelper 库

> ID：823520
> 
> 赞同：2
> 
> 时间：2009-05-05T05:52:37.780
> 
> 标签：com

有人用过 DISPhelper 库吗？如果您对 COM 技术很陌生，我想知道它是否真的是使用这个库的更好方法。非常感谢您的反馈。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T06:31:30.027

对于初学者来说确实更好。它易于使用，并附有大量示例。但是如果你是认真的 COM 编程，最好用传统的方式来学习它。

# c# - C# - 我知道我可以在 LINQ 中做到这一点，但我无法让它工作

> ID：823521
> 
> 赞同：0
> 
> 时间：2009-05-05T05:53:28.810
> 
> 标签：c#, linq

我得到了一个包含两个属性的 RegionGroup 对象列表：一个 int“数字”和一个“区域”列表<>。

我需要输出每个数字组合的 Region 对象数量的分布。例如，给定：

[区域 1] - number: 1 - list<> 有 5 个成员

[Region 2] - number: 3 - list<> 有 2 个成员

[Region 3] - number: 4 - list<> 有 9 个成员

[区域 4] - 编号：1 - 列表<> 有 5 个成员

[区域 5] - number: 3 - list<> 有 4 个成员

我需要得到类似的东西：

number:1 - 总共 10 个成员

人数：3 - 总共 6 名成员

人数：4 - 总共 9 名成员

我一直在搞各种教程，我认为我需要使用组，但我无法完全得到任何工作。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T05:55:17.493

这个类似问题的答案可能会有所帮助：

[使用 SUM 和 ORDER BY 进行 Linq 查询](https://stackoverflow.com/questions/820552/linq-query-with-sum-and-order-by)

或者这个

[C# List<> GroupBy 2 个值](https://stackoverflow.com/questions/363655/c-list-groupby-2-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:04:34.697

您需要按地区编号分组，然后获取列表中的成员总数。

像这样的东西怎么样（未经测试）：

```
var regionCounts = from region in RegionGroups
                   group region by region.number into g
                   select new {number = g.Key, 
                               regions = g.Sum(r=>r.Regions.Count)}; 
```

# ios - 突出显示时不为自定义 UIButton 子类调用 drawRect

> ID：823524
> 
> 赞同：3
> 
> 时间：2009-05-05T05:53:54.847
> 
> 标签：ios, uibutton, subclass

将 drawRect 用于自定义 UIButton 子类时，它似乎永远不会在突出显示时被调用来绘制按钮。我需要在我的触摸事件中为我的按钮调用 setNeedsDisplay 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T09:20:28.837

我找到了一个简单的解决方案。

只需将以下方法添加到您的 UIButton 子类：

```
-(void)setHighlighted:(BOOL)highlighted
{
    [super setHighlighted:highlighted];
    [self setNeedsDisplay];
} 
```

就是这样！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-07-06T13:24:20.690

据我所知，没有直接的方法来继承 UIButton。

UIButton 不是初始化程序返回的实际类类型。UIButton 是一系列私有类的前端。

假设你有：

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
NSLog(@"myButton type: %@", [myButton description]); 
```

您会发现日志中返回的类型是“UIRoundedRectButton”。问题是您需要扩展“UIRoundedRectButton”。这是不可能的，因为它是一个只返回给 UIButton 的私有类。

除此之外，“UIRoundedRectButton”并不是唯一可能返回的类，所有这些都是私有的。

换句话说，UIButton 是以不适合扩展的方式构建的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-14T21:57:39.133

我遇到了同样的问题，并且在我的`UIButton`子类中添加了以下内容并取得了令人满意的成功

```
- (void)awakeFromNib {
    [self addTarget:self action:@selector(redraw) forControlEvents:UIControlEventAllEvents];
}

- (void)redraw {
    [self setNeedsDisplay];
    [self performSelector:@selector(setNeedsDisplay) withObject:self afterDelay:0.15];
} 
```

# asp.net-mvc - 如何在 ASP.NET MVC 视图中设置页面标题？

> ID：823528
> 
> 赞同：3
> 
> 时间：2009-05-05T05:56:16.523
> 
> 标签：asp.net-mvc, view

在 ASP.NET MVC 视图中，我有以下代码：

```
<% Page.Title = ViewData.Model.MyPageTitle; %> 
```

当我逐步浏览它时，我看到 Page.Title 值更改为我想要的标题，但是当您查看浏览器中显示的页面标题时，它没有被修改。看来这个值后来被某些东西覆盖了。

如果您想动态设置页面标题，您有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T14:50:03.917

我会推荐2个选项。

首先会在您的母版页中设置一些类似的东西。

```
<% Page.Title = ViewData["Title"] ?? "Default title"; %> 
```

或者在 head/title 部分设置一个内容占位符，您可以在视图中实现该占位符以使用 HTML 设置标题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-06T22:48:51.950

为什么不在master中制作头部区域的内容占位符然后你可以在继承该master的每个页面中定义标题......

干杯

# javascript - 尝试访问页面内的 javascript 元素

> ID：823529
> 
> 赞同：0
> 
> 时间：2009-05-05T05:56:16.977
> 
> 标签：javascript

我希望有一个人可以帮助我。我正在尝试访问网页内的文本框，以便我可以编写一些脚本，例如在字段中放置文本、选中一个框并单击提交，以自动化我的员工的工作流程。这真是令人困惑，因为我找不到允许我操纵表单的名称/ID/任何东西。我可以看到我试图使用 Firebug 获取的字段的名称（“history [comment]”）和 id，如果有帮助（“history_comment”），但无论我做什么，表单都不会被操纵. 基于我完成的其他脚本，这个 Applescript：

```
do JavaScript "document.forms[1].history_comment.value='Testing';" in document 1 
```

应该完成这项工作，告诉浏览器将“测试”放在适当的字段中。我已经替换了我认为可能是它想要的其他名称，并尝试引用任何其他形式（forms[2]、forms[3]），但都是徒劳的。我实际上有点困惑，因为 HTML 中没有语句，所以可能是我搞砸了。

[我已经在http://images.jlist.com/testform.html](http://images.jlist.com/testform.html)上发布了表单的 HTML 转储（当然带有虚拟信息），以防任何善良的灵魂可以看一看并给我一些方向。我的目标是能够将信息放入评论字段。是否有可以运行的脚本告诉我表单中每个元素的完整名称（就浏览器而言）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:13:26.657

如果您可以使用 jquery，那么您可以使用以下命令轻松完成

```
$("history_comment").val("HELLO"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:22:45.183

JavaScript 应该是：

```
document.getElementById("history_comment").value='Testing'; 
```

document.forms 是非标准的，并且与示例代码中的情况一样，如果元素不在表单内，则会失败。这在 AJAX 应用程序中相当常见，也是避免使用 document.forms 的另一个好理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T06:37:22.883

@Kikuchyo 写的内容，尽管实际上不将表单元素括在标签中是完全**不**正确`textarea`的`form`。`form`如果（如您所建议的）您想以编程方式提交表单，您还需要该标签。由于您已经在访问该文本框，因此您可以在 javascript 函数中从该文本框获取表单：

```
var thetext=document.getElementById('history_comment');
thetext.value='whatever you want to put in there';
thetext.form.submit(); // all form elements have a 'form' property 
```

您可以将复选框状态设置为`document.getElementById('history_notify').checked`；它是一个布尔值，因此将其设置为`true`or `false`，并直接在条件句中使用它。

当然，如果（查看表单，您可能想要）您想要一个 AJAX 提交，您需要查看您正在使用的任何包装库的文档。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-05T06:09:44.200

由于您的元素是文本区域，因此应该这样做：

document.getElementById('history_comment').innerHTML = 'HELLO';

使用 innerHTML 而不是 value

# c# - 通过 LINQ 将函数应用于集合的所有元素

> ID：823532
> 
> 赞同：150
> 
> 时间：2009-05-05T05:58:00.467
> 
> 标签：c#, .net, linq

我最近开始使用 LINQ，它令人惊叹。我想知道 LINQ 是否允许我在不使用 foreach 的情况下将函数（任何函数）应用于集合的所有元素。类似于 python lambda 函数的东西。

例如，如果我有一个 int 列表，我可以使用 LINQ 为每个元素添加一个常量吗

如果我有一个数据库表，我可以使用 LINQ 为所有记录设置一个字段吗？

我正在使用 C#

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2009-05-05T06:11:06.550

解决此问题的常用方法是`ForEach`在`IEnumerable<T>`. 这是我们在[MoreLINQ](http://code.google.com/p/morelinq/)中得到的：

```
public static void ForEach<T>(this IEnumerable<T> source, Action<T> action)
{
    source.ThrowIfNull("source");
    action.ThrowIfNull("action");
    foreach (T element in source)
    {
        action(element);
    }
} 
```

（Where`ThrowIfNull`是任何引用类型的扩展方法，这很明显。）

看看这是否是 .NET 4.0 的一部分会很有趣。它与 LINQ 的函数式风格背道而驰，但毫无疑问，很多人觉得它很有用。

一旦你得到了它，你可以写这样的东西：

```
people.Where(person => person.Age < 21)
      .ForEach(person => person.EjectFromBar()); 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2009-05-05T06:03:04.417

使用 LINQ 执行此操作的惯用方法是处理集合并返回以您想要的方式映射的新集合。例如，要为每个元素添加一个常量，您需要类似

```
var newNumbers = oldNumbers.Select(i => i + 8); 
```

以一种功能性的方式执行此操作，而不是经常改变现有集合的状态，可以帮助您以一种更易于阅读且更易于编译器推理的方式分离不同的操作。

如果您确实想要对集合的每个元素应用一个操作（一个具有与集合的实际内容无关的副作用的操作），那么这并不是 LINQ 最适合的，尽管您可以用`Select`（或编写自己的`IEnumerable`扩展方法，就像许多人一样）伪造它。在这种情况下，最好坚持使用`foreach`循环。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-05-30T07:38:52.577

你也可以考虑并行，特别是如果你不关心顺序，更关心为每个项目完成一些事情：

```
SomeIEnumerable<T>.AsParallel().ForAll( Action<T> / Delegate / Lambda ) 
```

例如：

```
var numbers = new[] { 1, 2, 3, 4, 5 };
numbers.AsParallel().ForAll( Console.WriteLine ); 
```

HTH。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2009-05-05T06:04:53.993

哈哈，伙计，我几个小时前才问过这个问题（有点）......试试这个：

例子：

```
someIntList.ForEach(i=>i+5); 
```

`ForEach()`是内置的 .NET 方法之一

这将修改列表，而不是返回一个新列表。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-05-31T04:47:31.590

或者你可以破解它。

```
Items.All(p => { p.IsAwesome = true; return true; }); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-11-13T15:12:16.090

对于不支持的集合，`ForEach`您可以在类中使用静态`ForEach`方法`Parallel`：

```
var options = new ParallelOptions() { MaxDegreeOfParallelism = 1 };
Parallel.ForEach(_your_collection_, options, x => x._Your_Method_()); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-05T06:11:33.320

你可以尝试类似的东西

```
var foo = (from fooItems in context.footable select fooItems.fooID + 1); 
```

返回 id 的 +1 列表，您可以对 select 子句中的任何内容使用函数来执行相同操作。

更新：正如 Jon Skeet 所建议的，这是我刚刚发布的代码片段的更好版本：

```
var foo = context.footable.Select(foo => foo.fooID + 1); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-06-20T08:26:42.420

我找到了一些在字典中执行的方法包含我的自定义类方法

```
foreach (var item in this.Values.Where(p => p.IsActive == false))
            item.Refresh(); 
```

'this' 源自： Dictionary<string, MyCustomClass>

```
class MyCustomClass 
{
   public void Refresh(){}
} 
```

# windows - 在主机文件中指定 IP 与直接使用 IP 之间的区别

> ID：823534
> 
> 赞同：4
> 
> 时间：2009-05-05T05:58:25.723
> 
> 标签：windows, http, iis, networking

在 IE 中访问内网 URL 时，以下有什么区别

在驱动程序/etc/host 文件中添加一个条目以获取名称和 IP 与直接使用 IP

例如，如果我的主机条目为 (XYZ 10.0.10.200)，它可以与以下链接一起使用

[http://XYZ/SiteDirectory/ABC/Default.aspx](http://XYZ/SiteDirectory/ABC/Default.aspx)

但是当我尝试使用 IP 而不是名称时

[http://10.0.10.200/SiteDirectory/ABC/Default.aspx](http://10.0.10.200/SiteDirectory/ABC/Default.aspx)

它给了我 404 not found 错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-05T07:25:20.663

是的，有区别。

Web 服务器使用 HTTP/1.1 和“共享虚拟主机”。当客户端连接时，它会发送一个附加`Host:`标头，其中包含用户提供的 URL 的主机名部分。

Web 服务器查看标头以找出要服务的虚拟主机的数据。

在这种情况下，Web 服务器配置为识别和提供来自“XYZ”域的内容，但不知道任何名为 10.0.10.200 的域

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-05T06:07:29.853

闻起来像网络服务器正在使用虚拟主机，因此如果客户端访问“www.foo.com”或“www.bar.com”，它会提供不同的页面，即使它们具有相同的 IP 地址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-05T06:06:56.530

据我所知，应该没有区别。对于主机名，顺序是 DNS 之前的 hosts 文件，因此应该使用它。

主机文件中是否有另一行具有相同的主机名？

当你做一个tacert时会发生什么？（追踪路线）

# c# - XML 解析器错误：未找到元素

> ID：823542
> 
> 赞同：0
> 
> 时间：2009-05-05T06:04:27.067
> 
> 标签：c#, asp.net, iis

我有一个位于服务器上的 asp.net 应用程序。它正在工作，但后来我添加了一大堆东西，现在我得到了：

XML 解析器错误：未找到元素地址：[http](http://www.dtm.se/payex/Default.aspx) : //www.dtm.se/payex/Default.aspx 第 1 行，第 1 列：

（我已经从瑞典语翻译了这条错误消息，所以它可能不是 100% 准确的）

当我将代码上传到“我的”站点时，Firefox 中会发生错误。在 IE 8 和 Google Chrome 中，我得到空白页。当我在本地编译它时，它运行没有问题。

我已经在我的机器上设置了 IIS (7.0)，它可以在那里工作。

我已经检查了服务器上的文件，以防万一上传有问题，但代码在那里。

我还尝试删除我添加的代码，看看我是否可以让它再次工作。但不是。当然，我不是 100% 确定我已经把一切都恢复到原来的样子。

我尝试加载哪个文件都没有关系，它们都会收到此错误消息。

嗯，当我写这篇文章时，我觉得我在服务器上设置的 asp.net 应用程序的方式可能有问题。但因为它从一开始就有效......

有很多代码，所以我真的不知道要在这里上传什么，但也许有人认出了这个错误消息并知道它是什么，或者可能为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:23:10.687

您的 Default.aspx 页面似乎具有以下输出：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
</head>
<body>
</body>
</html> 
```

Firefox 似乎假定这是一个 XML 文档（没有数据）并在这种情况下抛出错误（可能与 DOCTYPE 有关）。在这种情况下，.NET 也有可能生成“application/xml”的响应类型，尽管我无法确认。IE 7 按预期显示空白页。

您应该研究的是为什么您的页面会给出空白输出。您确定该站点已配置为使用正确版本的 ASP.NET 运行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T18:29:06.810

错误是我使用的是 MySql，当我添加对连接器的引用时，它在 web.config 中添加了一行，但它没有在 bin 文件夹中添加 dll。因此，当服务器尝试通过此错误访问文件时。所以我手动将文件添加到 bin 文件夹中，tada，它开始工作了。

当我选择添加引用时，我模糊地记得 VisualStudio 添加文件。但也许我把它和别的东西混在一起了。

# java - 任何人都可以推荐现成的 ACL Java 库吗？

> ID：823546
> 
> 赞同：3
> 
> 时间：2009-05-05T06:04:59.047
> 
> 标签：java, acl

我没有运气找到一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T07:53:08.867

[如果您不害怕自己做一些事情，那么Apache Ki](http://incubator.apache.org/ki/)（以前称为[JSecurity](http://www.jsecurity.org/)）可能就是您正在寻找的东西。我个人用它创建了一个完全透明的、基于注释的、每页的 Web 应用程序安全模型（依赖于用户角色/权限和组角色），它的功能远不止于此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T06:14:43.360

有[Spring Security](http://www.acegisecurity.org/)（以前称为 Acegi）。

我自己没用过，但听说过它的好东西。显然，与 Spring 的其余部分一起使用时最有效，但我认为您*可以*以一般方式使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T06:15:55.260

Spring Security（以前称为 Acegi）将是大多数人推荐的一种。最后，我发现很难按照我想要的方式进行设置。主要是因为我不想检查用户角色的访问权限。我想要的是属于用户组（即具有角色）的用户，然后这些用户具有“权限”，并且根据“权限”而不是角色（用户组）检查访问权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T01:35:59.150

看看[Apache Shiro](http://shiro.apache.org/)。它旨在处理身份验证、授权、加密和会话管理。它似乎被设计为比 Spring Security 更易于使用。

我一直在研究处理 ACL 的 java 库，这实际上是在孵化器之外（Shiro 现在是 1.2 版），与 Apache Ki 不同。当 Apache 有多个项目覆盖同一个区域时，这很令人困惑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T07:04:41.867

也看看：

*   JRE 附带的[java.security](http://java.sun.com/javase/technologies/security/)
*   [JAAS](http://java.sun.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html)

# c++ - 如何在 Windows 上获取硬件 MAC 地址

> ID：823553
> 
> 赞同：14
> 
> 时间：2009-05-05T06:07:21.787
> 
> 标签：c++, winapi, networking, ndis

我正在尝试从 NIC 中检索 MAC 地址 - 有多种方法可以获取它，本文介绍了最常见的方法：

[http://www.codeguru.com/Cpp/IN/network/networkinformation/article.php/c5451](http://www.codeguru.com/Cpp/I-N/network/networkinformation/article.php/c5451)

我目前正在使用 GetAdaptersInfo 方法，这似乎是最防弹的，但如果 MAC 地址已通过注册表设置：

[http://www.mydigitallife.info/2008/06/30/how-to-change-or-spoof-mac-address-in-windows-xp-vista-server-20032008-mac-os-x-unix-和-linux/](http://www.mydigitallife.info/2008/06/30/how-to-change-or-spoof-mac-address-in-windows-xp-vista-server-20032008-mac-os-x-unix-and-linux/)

然后它报告它已更改为的 MAC 地址。我发现真正获得真正 MAC 的唯一方法是删除注册表项，重新启动 NIC，通过 GetAdaptersInfo 获取 MAC，然后替换注册表项，然后重新启动 NIC。虽然它完成了工作，但对用户来说几乎是透明的。

是否有任何其他人熟悉的方法，无论注册表设置为什么，都将返回硬件 MAC？理想情况下，我想要一个适用于 XP 的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T08:06:34.637

我的猜测是，在链接的 CodeGuru 文章中，Miniport 解决方案可能会克服您描述的问题，尽管实施起来很痛苦。我认为这是因为我过去自己使用过 GetAdaptersInfo 解决方案，并注意到当添加适配器（例如提供 PAN 服务的蓝牙适配器）时，MAC 地址会更改而无需重新启动。

也许您可以尝试停止并重新启动相关的网络服务，而不是在更改注册表设置后重新启动。在寻找编程解决方案之前，您可以轻松地手动检查。

（注意以上都是猜测。如果你尝试它并且它有效，也许为那些试图在未来做同样事情的人添加一个帖子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:52:48.737

解析输出`ipconfig /all`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T05:06:08.540

您可以使用 WMI 枚举[Win32_NetworkAdapter](http://msdn.microsoft.com/en-us/library/aa394216%28v=vs.85%29.aspx)实例并查看 MACAddress 属性。如果您安装了多个有源适配器，例如在也有无线连接的笔记本电脑上，这种技术的主要问题是找到合适的适配器实例。

# iphone - iPhone 应用程序：整体应用程序层次结构和架构

> ID：823556
> 
> 赞同：2
> 
> 时间：2009-05-05T06:09:34.120
> 
> 标签：iphone, uiviewcontroller

我一直在为我的第一个真正的 iPhone 应用程序苦苦挣扎，并想就如何构建它获得一些建议。我正在寻找一些关于创建 UI 组件并将它们链接在一起以创建应用程序流的最佳实践（以编程方式创建视图/控制器与使用 Interface Builder 等...）。

**概述：**
我需要在应用程序启动时显示“登录”视图。
--如果他们单击注册按钮，则显示“注册”视图。

登录后...我有一个 TabBarController 加载 4 个视图。这 4 个视图将必须加载子视图（主详细信息）。

**我的问题是：**
1）将这个导航结构拼凑在一起的最佳方式是什么？将每个视图创建为具有相应 ViewController 的 .xib？这些是怎么粘在一起的？

2）我应该如何处理登录/注册导航，开始时不应该显示TabBar，但在验证用户后需要它。

奖励点）这种东西是否有记录的最佳实践？我一直在编写一些可行的代码，但我迷失了方向，想以正确的方式重新开始。

我知道这可能有点令人困惑，非常感谢所有帮助。

编辑：对于标签栏顶部的登录视图，我使用了这个，非常简单。

```
LoginViewController *loginViewController = [[LoginViewController alloc] init];
[loginViewController initWithNibName:@"Login" bundle:nil];
[self.tabBarController presentModalViewController:loginViewController 动画：YES];
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T09:53:40.590

*1) 将这种导航结构拼凑在一起的最佳方式是什么？将每个视图创建为具有相应 ViewController 的 .xib？这些是怎么粘在一起的？*

根据需要使用`UINavigationController`自定义视图并将其推送到导航堆栈上。*通过 Xcode 的New Project*选项查看示例 Navigation Controller 应用程序，以了解其工作原理。

*2）我应该如何处理登录/注册导航，开始时不应该显示TabBar，但在验证用户后需要它。*

设置登录视图（我会使用一个`UITableView`包含两行用户名和密码的部分，但这是我自己的偏好）。为注册字段设置第二个单独的视图（同样，我会为此使用一个`UITableView`，以保持布局干净和一致）。

也许在成功认证后使用视图动画弹出标签栏。

*奖励点）这种东西是否有记录的最佳实践？我一直在编写一些可行的代码，但我迷失了方向，想以正确的方式重新开始。*

你最终会多次重写你的项目——这是一件好事。请查看 Apple 的示例应用程序（可从 iPhone ADC 站点获得），因为这些应用程序包含使用多个`UIKit`组件的几种“最佳实践”方式。至于组装一个更大的应用程序，请让您的设计尽可能简单，并尽可能多地重用 Apple 的 UI 组件。您以后可以随时自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-06T07:04:57.303

当您在 XCode 中创建一个新的基于选项卡栏的应用程序时，您几乎已经按照您想要的方式进行了设置 - 有一个主 XIB 可以从单独的 XIB 文件中为每个选项卡加载视图。每个选项卡有一个 XIB。请注意，当您更改类型或添加选项卡时，您需要在带有选项卡栏的 XIB 和用于创建视图的 XIB 中指定正确的视图控制器类型！

至于登录视图，一种常见的方法是使用上面的选项卡栏，但在应用程序委托 applicationDidFinishLaunching 方法中呈现一个显示登录屏幕的模式视图控制器。模态控制器隐藏选项卡栏和其他所有内容，直到它们完成，然后可以将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T09:17:04.140

在我看来，只有 Cocoa 编程示例和非常简单的应用程序才适合单个 nib 文件。否则，您应该将界面组件分布在多个 nib 上。这意味着每个 nib 都更小，当加载到内存中时，只会在必要时加载那些组件。这将提高您的应用程序的性能，并有助于在逻辑上组织您的程序并在出现问题时更容易调试。

在我的标签栏应用程序中，我使用 MainWindow.xib 来包含主窗口和标签栏，但由于上述原因，我将每个标签分成一个单独的 nib。

Apple 提供以下指南：

创建 nib 文件时，请记住以下准则：

设计您的 nib 文件时要考虑到延迟加载。计划立即加载仅包含您需要的对象的 nib 文件。

在 Mac OS X 应用程序的主 nib 文件中，请考虑在 nib 文件中仅存储应用程序菜单栏和可选的应用程序委托对象。避免包含在应用程序启动之前不会使用的任何窗口或用户界面元素。相反，将这些资源放在单独的 nib 文件中，并在启动后根据需要加载它们。

将重复的用户界面组件（例如文档窗口）存储在单独的 nib 文件中。

对于仅偶尔使用的窗口或菜单，将其存储在单独的 nib 文件中。通过将其存储在单独的 nib 文件中，只有在实际使用时才将资源加载到内存中。

欲了解更多信息，您可以访问：

[http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4)

# python - += 在 Python 中是什么意思？

> ID：823561
> 
> 赞同：11
> 
> 时间：2009-05-05T06:10:26.257
> 
> 标签：python, syntax

例如，我在 Python 中看到这样的代码：

```
 if cnt > 0 and len(aStr) > 1:
        while cnt > 0:                  
            aStr = aStr[1:]+aStr[0]
            cnt += 1 
```

是什么`+=`意思？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-05-05T08:28:49.933

`a += b`与 基本相同`a = a + b`，除了：

*   `+`总是返回一个新分配的对象，但如果它是可变的（例如or ，但and是不可变的） ，`+=`则应该（但不必）就地修改该对象。`list``dict``int``str`

*   在`a = a + b`中，`a`被评估两次。

*   [Python：简单语句](http://docs.python.org/reference/simple_stmts.html#augmented-assignment-statements)

    *   *一个简单的语句包含在单个逻辑行中。*

* * *

如果这是您第一次遇到`+=`运算符，您可能想知道为什么它可以就地修改对象而不是构建新对象很重要。这是一个例子：

```
# two variables referring to the same list
>>> list1 = []
>>> list2 = list1

# += modifies the object pointed to by list1 and list2
>>> list1 += [0]
>>> list1, list2
([0], [0])

# + creates a new, independent object
>>> list1 = []
>>> list2 = list1
>>> list1 = list1 + [0]
>>> list1, list2
([0], []) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-05-05T06:11:25.287

```
a += b 
```

在*这种情况下*与

```
a = a + b 
```

在这种情况下，cnt += 1 意味着 cnt 增加了 1。

请注意，如果 cnt > 0 且 len(aStr) > 1，您粘贴的代码将无限循环。

**编辑**：引用[Carl Meyer](https://stackoverflow.com/users/3207/carl-meyer)：``[..] 答案在误导性上大多是正确的。+ 和 += 之间存在细微但非常显着的区别，请参阅[Bastien 的回答](https://stackoverflow.com/questions/823561/what-does-mean-in-python/823878#823878)。''。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-05T06:16:56.820

Google 'python += operator' 将您带到[http://docs.python.org/library/operator.html](http://docs.python.org/library/operator.html)

页面加载后搜索 += 以获得更详细的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T06:15:34.403

仅供参考：看起来你的例子中可能有一个无限循环......

```
if cnt > 0 and len(aStr) > 1:
    while cnt > 0:                  
        aStr = aStr[1:]+aStr[0]
        cnt += 1 
```

*   进入循环的条件`cnt`是大于0
*   只要`cnt`大于 0 ，循环就会继续运行
*   循环的每次迭代递增`cnt`1

最终结果是`cnt`总是大于 0 并且循环永远不会退出*。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T15:43:55.567

`+=` is the [in-place addition operator](http://docs.python.org/library/operator.html#operator.iadd).

It's the same as doing `cnt = cnt + 1`. For example:

```
>>> cnt = 0
>>> cnt += 2
>>> print cnt
2
>>> cnt += 42
>>> print cnt
44 
```

The operator is often used in a similar fashion to the `++` operator in C-ish languages, to increment a variable by one in a loop (`i += 1`)

There are similar operator for subtraction/multiplication/division/power and others:

```
i -= 1 # same as i = i - 1
i *= 2 # i = i * 2
i /= 3 # i = i / 3
i **= 4 # i = i ** 4 
```

The `+=` operator also works on strings, for example:

```
>>> s = "Hi"
>>> s += " there"
>>> print s
Hi there 
```

People tend to recommend against doing this for performance reason, but for the most scripts this really isn't an issue. To quote from the ["Sequence Types" docs](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange):

> 6.  If s and t are both strings, some Python implementations such as CPython can usually perform an in-place optimization for assignments of the form s=s+t or s+=t. When applicable, this optimization makes quadratic run-time much less likely. This optimization is both version and implementation dependent. For performance sensitive code, it is preferable to use the str.join() method which assures consistent linear concatenation performance across versions and implementations.

The str.join() method refers to doing the following:

```
mysentence = []
for x in range(100):
    mysentence.append("test")
" ".join(mysentence) 
```

..instead of the more obvious:

```
mysentence = ""
for x in range(100):
    mysentence += " test" 
```

The problem with the later is (aside from the leading-space), depending on the Python implementation, the Python interpreter will have to make a new copy of the string in memory every time you append (because strings are immutable), which will get progressively slower the longer the string to append is.. Whereas appending to a list then joining it together into a string is a consistent speed (regardless of implementation)

If you're doing basic string manipulation, don't worry about it. If you see a loop which is basically just appending to a string, consider constructing an array, then `"".join()`'ing it.

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2009-05-05T06:14:40.770

它的意思是“将“THIS”附加到当前值”

例子：

a = "你好"; 一个+=“世界”；

打印现在将输出：“hello world”

# c++ - 多维向量

> ID：823562
> 
> 赞同：32
> 
> 时间：2009-05-05T06:10:55.273
> 
> 标签：c++, vector

如何创建 2D 矢量？我知道在二维数组中，我可以这样表达：

```
a[0][1]=98;
a[0][2]=95;
a[0][3]=99;
a[0][4]=910;

a[1][0]=98;
a[1][1]=989;
a[1][2]=981;
a[1][3]=987; 
```

如何使用 C++ STL Vector 做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-05T06:12:10.013

`vector<vector<int> > a;`

如果要定义行和列，

`vector<vector<int> > a{{11, 2, 4}, {4, 5, 6}, {10, 8, -12}};`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-05-05T06:27:23.160

```
std::vector< std::vector< int > > a; // as Ari pointed 
```

将其用于增长矩阵可能会变得复杂，因为系统不能保证所有内部向量的大小相同。每当您在第二维上增长时，您都必须显式增长所有向量。

```
// grow twice in the first dimension
a.push_back( vector<int>() );
a.push_back( vector<int>() );

a[0].push_back( 5 ); // a[0].size() == 1, a[1].size()==0 
```

如果这对你来说没问题（它不是真正的矩阵，而是向量的向量），你应该没问题。否则，您将需要格外小心以在所有向量中保持第二维稳定。

如果您计划使用固定大小的矩阵，那么您应该考虑封装在一个类中并覆盖 operator() 而不是提供双数组语法。[在此处](https://isocpp.org/wiki/faq/operator-overloading#matrix-array-of-array)阅读有关此的 C++ 常见问题解答

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-05T06:53:33.330

```
std::vector< std::vector<int> > a;

    //m * n is the size of the matrix

    int m = 2, n = 4;
    //Grow rows by m
    a.resize(m);
    for(int i = 0 ; i < m ; ++i)
    {
        //Grow Columns by n
        a[i].resize(n);
    }
    //Now you have matrix m*n with default values

    //you can use the Matrix, now
    a[1][0]=98;
    a[1][1]=989;
    a[1][2]=981;
    a[1][3]=987;

//OR
for(i = 0 ; i < m ; ++i)
{
    for(int j = 0 ; j < n ; ++j)
    {      //modify matrix
        int x = a[i][j];
    }

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-05T08:39:18.160

如果您不必*使用*向量，您可能想尝试[Boost.Multi_array](http://www.boost.org/doc/libs/1_38_0/libs/multi_array/doc/index.html)。这是一个简短示例的[链接。](http://www.boost.org/doc/libs/1_38_0/libs/multi_array/doc/user.html#sec_example)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-27T14:43:04.893

声明一个矩阵，例如 5 行 3 列：

```
vector<vector<int> > new_matrix(5,vector<int>(3)); 
```

获得与上述相同结果的另一种声明方式：

```
vector<int> Row; 
```

矩阵的一行：

```
vector<Row> My_matrix; 
```

My_matrix 是行向量：

```
My_matrix new_matrix(5,Row(3)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T07:19:48.057

dribeas 的建议确实可行。

只是为了说明您可能想要使用 operator() 路线的原因，请考虑例如，如果您的数据稀疏，您可以以不同的方式布置它以节省内部空间，并且 operator() 隐藏最终用户提供的内部实现问题您可以更好地封装，并允许您稍后在不破坏界面的情况下腾出空间或加快对内部布局的更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T08:47:28.267

正如 Ari 指出的那样，`vector< vector< int>>`这是正确的做法。

除此之外，在这种情况下，我总是考虑将内部向量（实际上，无论它代表什么）包装在一个类中，因为复杂的 STL 结构往往会变得笨拙和混乱。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-06T15:54:21.227

只需使用以下方法来使用二维向量。

> ```
> int rows, columns;        
> 
> // . . .
> 
> vector < vector < int > > Matrix(rows, vector< int >(columns,0));
> 
>                                   Or
> 
> vector < vector < int > > Matrix;
> Matrix.assign(rows, vector < int >(columns, 0));
> 
> // Do your stuff here... 
> ```

这将创建一个大小为 rows * columns 的矩阵并用零初始化它，因为我们在构造函数中传递了一个 zero(0) 作为第二个参数，即 vector < int > (columns, 0)。

# image - 确定两张几乎相同的照片之间的差异

> ID：823564
> 
> 赞同：6
> 
> 时间：2009-05-05T06:11:08.657
> 
> 标签：image, image-processing, comparison, diff

这是一个相当广泛的问题；有哪些工具/库可以拍摄两张不相同但极其相似的照片，并确定它们之间的具体差异？

一个例子是在星期五我的女朋友打扫完之后，在一个长周末与朋友聚会、喝酒和演奏摇滚乐队之前，给我的沙发拍照。两天后，我拍了第二张沙发的照片；照明相同，沙发没有移动一毫米，我在固定位置使用三脚架。

我可以使用哪些工具来生成图像差异或差异的第三张热图图像？.NET 有什么工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T06:16:49.987

这在很大程度上取决于图像格式和压缩。但是，在一天结束时，您可能会获取两个栅格并逐个像素地比较它们。

看看[感知图像差异实用程序](http://pdiff.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T06:37:23.913

查看每一个微小的、通常几乎无法察觉的差异的最明显方法是对像素数据进行异或运算。但是，如果照明略有不同，则可能太多了。差分（减去）像素数据可能更符合您的需求，具体取决于差异的细微程度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T06:42:42.497

一个起点是使用丰富的图像处理库，例如[IM](http://www.tecgraf.puc-rio.br/im/)。[您可以通过IMlab](http://imlab.sourceforge.net/)工具以交互方式涉足其运算符，直接从 C 或 C++ 调用它，或者使用其真正体面的 Lua 绑定从 Lua 驱动它。它支持对位图的各种操作，以及可扩展的文件格式库。

即使您没有刻意移动任何东西，您也可能希望使用诸如[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)之类的算法来获得帧之间良好的亚像素质量对齐。除非您*想*将相机视为固定并检测沙发的运动。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-06T12:21:14.203

我使用我公司制作的工具包 (DotImage) 编写了这个免费的 .NET 应用程序。它有一个非常简单的算法，但如果您想使用它，代码是开源的——如果您不想购买 DotImage 的副本，您可以将该算法改编为 .NET Image 类。

[http://www.atalasoft.com/cs/blogs/31appsin31days/archive/2008/05/13/image-difference-utility.aspx](http://www.atalasoft.com/cs/blogs/31appsin31days/archive/2008/05/13/image-difference-utility.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T06:32:56.267

这是一个有趣的问题。我不能向您推荐任何特定的库，但您询问的过程基本上是运动补偿的最小情况。这就是 MPEG（MP4、DIVX 等）视频能够非常出色地压缩视频的方式；您可能会查看 MPEG 以获取有关这些运动补偿算法实现方式的一些信息。

要记住的另一件事；JPEG压缩是一种基于块的压缩；MPEG 从事物中带来的大部分好处是实际进行块比较。如果您的大部分图像（例如背景）从一张图像到另一张图像都是相同的，则这些块将保持不变。这是一种减少需要比较的数据量的快速方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T03:04:42.153

查看 Andrew Kirillov关于 CodeProject的[文章。](http://www.codeproject.com/KB/audio-video/Motion_Detection.aspx)他使用[AForge.NET](http://code.google.com/p/aforge/)计算机视觉库编写了一个 C# 应用程序来检测运动。在 AForge.NET 网站上，有关于运动检测的两个帧差异的[讨论](http://www.aforgenet.com/framework/features/motion_detection.html#two_frames_difference)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-16T20:23:32.983

只需使用 .net 成像类，创建一个新的 bitmap() x 2 并查看每个像素的 R & G & B 值，如果您想在确定差异时也可以查看 A（Alpha/透明度）值.

还有一点需要注意的是，使用 getPixel(y, x) 方法可能会非常慢，还有另一种方法可以获取整个图像（不太优雅），如果我记得它被称为 getBitmap 或类似的东西，你可以自己通过它，查看成像/位图类并阅读一些教程，它们确实是您所需要的，并且使用起来并不难，除非您必须这样做，否则不要去第三方。

# cocoa - 如何让菜单栏项显示表格中有多少行？

> ID：823570
> 
> 赞同：3
> 
> 时间：2009-05-05T06:12:01.493
> 
> 标签：cocoa, core-data

我有一个核心数据表，并希望菜单栏项显示表中有多少行。我已经使用以下代码创建了菜单栏项：

```
 -(void)applicationDidFinishLaunching:(NSNotification *)aNotification { 
NSStatusItem *statusItem = [[[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength] retain]; //Create new status item instance
[statusItem setHighlightMode:YES]; //This does something, I'm sure of it.
[statusItem setTitle:[NSString stringWithFormat:@"%C",0xff50]]; //This labels it. You can also use setImage instead to use an icon. That current code will result in a item labeled "p"
[statusItem setEnabled:YES]; //Self explanatory
[statusItem setMenu:theMenu];
[statusItem setToolTip:@"TOOLTIP HA AWESOME AMIRITE?"]; //Optional, just for kicks.
} 
```

我需要添加什么才能使菜单栏项显示表格中有多少行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T10:35:53.497

如果您不需要实时更新，您可以尝试这种方法：

1）设置theMenu的委托：

```
[theMenu setDelegate:self]; 
```

2）并实现委托方法：

```
- (void)menuWillOpen:(NSMenu *)menu {
    NSUInteger count = [self.tableView numberOfRows];
    [[menu itemAtIndex:0] setTitle: [NSString stringWithFormat:@"%d rows", count]];
} 
```

每次用户打开菜单时，此代码都会刷新菜单项。如果您想在每次表中的某些内容发生更改时刷新它，您将需要使用 KVO 来观察阵列控制器。如果要在 StatusItem 的标题中显示计数，还需要使用 KVO。

# ruby-on-rails - 如何显示交互式字符限制？

> ID：823575
> 
> 赞同：3
> 
> 时间：2009-05-05T06:13:32.240
> 
> 标签：ruby-on-rails, forms

Stack Overflow 如何显示交互式字符限制？就像在编辑评论时一样，它会显示您还剩下多少个字符，如果太少也会发出警告。

我想要我的 Ruby on Rails 中的确切功能......但不知道该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-05T06:21:19.023

Stackoverflow 使用[jQuery JavaScript 框架](http://jquery.com/)，它有很多现有的脚本和插件来处理这类事情。

一个示例是[此处](http://www.ajaxray.com/Examples/charLimit.html)演示[的 jQuery 中 TextArea 的交互式字符限制](http://www.ajaxray.com/blog/2007/11/09/interactive-character-limit-for-textarea-using-jquery/)。

我敢肯定还有其他人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T15:58:16.773

我使用以下 JavaScript 函数来限制 textareas 中的最大长度

```
function checkLength(edit, maxlen) 
{
if (edit.value.length > maxlen) 
    edit.value = edit.value.substring(0, maxlen);

    document.getElementById('remaining').innerHTML = edit.value.length;
} 
```

将此链接到您的 textarea 的 onKeyDown 和 onKeyUp 属性：

```
onKeyDown = "checkLength(this, 100);" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T15:56:47.150

通过在输入上使用 onkeydown 事件。那里有数百万个例子，坦率地说，如果这不是一个重复的问题，我会感到惊讶。

它是：[如何显示交互式字符限制？](https://stackoverflow.com/questions/823575/how-does-stack-overflow-show-interactive-character-limits)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T06:22:19.550

我认为您正在寻找一些 javascript，基本上您向文本框 onkeypress 事件添加一个处理程序，然后获取当前长度：

```
mytextbox.value.length 
```

为了限制它，您可以执行以下操作：

```
if (mytextbox.value.length > maxlimit) 
mytextbox.value = mytextbox.value.substring(0, maxlimit); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T12:56:30.103

您还可以使用简单的 javascript 事件处理来显示输入元素的字符数。无需服务器端处理。

此 javascript 捕获文本区域“txt”的按键事件并显示跨度“count”中的字符数。

查看它在 [http://aaron.oirt.rutgers.edu/myapp/root/charCount.html运行](http://aaron.oirt.rutgers.edu/myapp/root/charCount.html)[](http://aaron.oirt.rutgers.edu/myapp/root/charCount.html)

```
<html>
<head>

<script>
function go() {
    var txt=document.getElementById("txt");
    txt.onkeydown = countTxt;
}
function countTxt() {
    var txt=document.getElementById("txt");
    var count=document.getElementById("count");
    count.innerHTML = txt.value.length+1; // count the character not shown yet ;)
}
</script>

</head>
<body onload="go()">

<h3>type in the text area and see the count change</h3>

<textarea id="txt" rows="8" cols="30"></textarea>
<br>
count: <span id="count"> 0</span>

</body> 
```

计数可以超出我的 +-1 - 修复（如果你真的想要）留给读者。

# c# - 以编程方式从网页保存 excel 文件

> ID：823578
> 
> 赞同：1
> 
> 时间：2009-05-05T06:14:50.460
> 
> 标签：c#, winforms, excel

我有一个显示一些报告的网页。当我单击 excel 链接时，它会将屏幕上显示的所有数据放入 CSV 文件中，并打开一个文件下载窗口，让我可以打开、保存或取消。

我想以编程方式将此文件下载到指定位置，而用户不会看到“文件下载”窗口。我正在使用 Windows 应用程序。我没有显示此报告的网站的代码，因此没有数据集。此外，我查看了通过在页面上查看源代码生成的 HTML，但我无法真正通过它来获取数据。

因此，我需要知道如何将一个给定网站的 excel 文件下载到我计算机上的某个位置。

提前致谢

丽塔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T06:25:14.020

那么您需要找到适当的链接或发布操作。然后你可以使用类似的东西：

```
string url = "http://whatever/.../foo.xsl";
string target = @"c:/excel documents/foo.xsl";
WebClient client = new WebClient();
client.DownloadFile(url, target); 
```

如果您需要进行身份验证等，它会变得有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:41:21.720

实际上我正在做一个屏幕抓取，所以我没有显示网页。

我所做的是转到屏幕上显示报告的 URL。“Excel”有一个超链接。我从我的程序本身点击了这个超链接。单击此链接后，将打开“文件下载”对话框。

我已经编写了 WebBrowser.Navigating 和 Navigated 事件，但是控件没有出现在这里。有任何想法吗

还有一件事，我正在访问的网站是java网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T06:25:33.147

我假设您在 WebBrowser 控件中显示网页。您可以处理[WebBrowser.Navigating 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)并检查[WebBrowserNavigatingEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowsernavigatingeventargs.aspx) URL 属性的值以查看 string.EndsWith(".csv", CurrentCultureIgnorecase) （或者可能是更具体的测试）。

如果您检测到已单击的链接是您希望下载的文件，那么您可以在 WebBrowserEventArgs 实例上调用 e.Cancel() = True 来阻止浏览器继续其打开“文件下载”对话框的正常行为。然后您可以使用 .NET 的[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)和[HttpWebResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)类手动下载文件。

[这是使用这些类下载的示例](http://www.c-sharpcorner.com/UploadFile/bfarley/simplewebfiledownload11162005015304AM/simplewebfiledownload.aspx)

# asp.net-membership - 在本地计算机中测试 windows 身份验证

> ID：823584
> 
> 赞同：-1
> 
> 时间：2009-05-05T06:19:26.703
> 
> 标签：asp.net-membership

我怎么能在本地机器上测试这个 Windows 身份验证功能，因为我没有 Intranet 和域下的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:37:45.503

在黑暗中尝试一下 我假设您的计算机上运行 IIS，托管一个配置为需要 Windows 身份验证的站点？

我认为最简单的选择是尝试从第二台机器连接到 IIS 机器，看看是否可以使用在服务器上使用的凭据登录。如果您没有第二台机器，那么您可以下载 VMWare Player 和一个 Ubuntu 设备（或获取 Virtual-Box 并构建您喜欢的任何虚拟机）并将其用作您的第二台机器。

# c# - 以编程方式通过电子邮件发送网页。图片 URL 未解析

> ID：823591
> 
> 赞同：1
> 
> 时间：2009-05-05T06:23:03.653
> 
> 标签：c#, asp.net, email

我正在编写一个 SharePoint 计时器作业，它需要提取网页的内容，并将该 HTML 作为电子邮件发送。

我正在使用 HttpWebRequest 和 HttpWebResponse 对象来提取内容。

电子邮件功能工作正常，除了一个问题。

提供我的电子邮件内容的网页包含图像。

当页面的 html 作为邮件发送时，HTML 代码中的图片 URL 都是相对 URL，不会被解析为绝对 URL。

如何将图像 URL 解析为网页内容中的绝对路径？

有没有直接的方法可以做到这一点？我不想在 html 代码上运行正则表达式来用绝对 URL 替换所有相对 URL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T06:30:26.287

尝试将[`base`](http://www.w3.org/TR/REC-html40/struct/links.html#h-12.4)元素添加到您检索的 html 文档的头部。作为`href`属性，您应该使用您正在检索的页面的 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T10:48:10.910

找到了这个很酷的 Codeplex 工具，叫做 HtmlAgilityPack。 [http://www.codeplex.com/htmlagilitypack](http://www.codeplex.com/htmlagilitypack)

使用这个 API，我们可以像解析 XML 文档一样解析 Html。我们还可以使用 XPath 查询和搜索节点。

我使用以下代码片段来修复图像 URL

```
HtmlDocument htmlDoc = new HtmlDocument();
            htmlDoc.LoadHtml(htmlMessage);

//This selects all the Image Nodes
            HtmlNodeCollection hrefNodes = htmlDoc.DocumentNode.SelectNodes("//img");

            foreach (HtmlNode node in hrefNodes)
            {
                string imgUrl = node.Attributes["src"].Value;
                node.Attributes["src"].Value = webAppUrl + imgUrl;
            }

        StringBuilder sb = new StringBuilder();
            StringWriter sw = new StringWriter(sb);

            htmlDoc.OptionOutputAsXml = false;
            htmlDoc.Save(sw);
            htmlMessage = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-24T00:32:16.780

我遇到过几次这个问题，我认为没有任何魔杖方法可以为你完成这一切。HTMLAgilityPack 在聚合您需要的内容方面做得很好，但您必须自己破译它。例如; 获取包含“//img”的 HtmlNodes 列表可以返回以下任何项：

```
<img src="http://www.adg2435.com/pictures/pic.jpg"/> //absolute url
<img src="coolpicture.jpg"/> //relative to the page
<img src="pictures/pic.jpg"/>
<img src="./pictures/pic.jpg"/> 
```

由您决定哪些类型的链接将显示在给定的网页上。您还需要考虑这样的事情：（在扩展名“.jpg”之后截断您的图片网址）

```
<img src="/pictures/pic.jpg?45823593&xyz=95325235r0634945823ot49140200"/> 
```

因此，我发现在任何特定时间保留一些东西很方便：

1.  整个页面的源 URL
2.  给定 url 的域（例如说“给定的 src 是否包含域？”）这是获取源链接​​域的方式：

    Uri domainUri = new Uri(fullUrl); domainUrl = domainUri.GetLeftPart(UriPartial.Authority);

3.  您可能需要子域（即“http://www.mysite.com/pictures/”）

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2009-05-05T06:31:25.270

> 我不想在 html 代码上运行正则表达式来用绝对 URL 替换所有相对 URL。

太糟糕了，因为这是显示图像的唯一方法。您是否愿意下载所有图像并将它们也嵌入到电子邮件中？

# css - 在 CSS 中做等高列时，有没有办法让内部锚链接仍然正常工作？

> ID：823596
> 
> 赞同：3
> 
> 时间：2009-05-05T06:25:19.217
> 
> 标签：css, xhtml

我已将此页面上的最后一个示例用于等高列。

[http://www.ejeliot.com/blog/61](http://www.ejeliot.com/blog/61)

问题是，当您单击内部锚链接时，内容会向上移动，并且溢出会使页面的顶部消失。

例如，单击此链接

[http://www.noosanativeplants.com.au/~new/articles/botany-words/](http://www.noosanativeplants.com.au/~new/articles/botany-words/)

然后单击一个字母以跳转到该部分。你会注意到我所描述的。

有没有办法解决这个问题，或者这是该技术的不足之处？您是否建议我对假等高列使用背景图像技术？我宁愿不使用它，因为一个页面具有不同的背景，并且需要进行一些修改才能为该页面做背景。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T09:33:00.093

我真的建议您使用故障安全仿列方法。如果您不是布局专家（严肃地说，没有冒犯），请远离填充/边距/溢出魔法和一种真正的布局技术。后者很优雅，但如果您要进行繁重的 JS/DOM 操作等等，它可能会导致不必要的副作用（请参阅[问题清单](http://www.positioniseverything.net/articles/onetruelayout/appendix/equalheightproblems)）。

正如[slink 所说](https://stackoverflow.com/questions/823596/when-doing-equal-height-columns-in-css-is-there-a-way-to-get-internal-anchor-lin/823993#823993)，您的 css 中有两个溢出：隐藏规则：

```
#main-container {
  overflow:hidden;
} 
```

和

```
#content {
  overflow:hidden;
} 
```

如果您禁用/删除这些，您将能够再次使用您的滚动条。不幸的是，填充/负边距“hack”将是可见的。我建议您完全删除此解决方案并使用人造列。可以将人造列背景添加到您的#main-content 甚至是#content div（不像[ALA 文章](http://www.alistapart.com/articles/fauxcolumns/)中将背景图像设置为body 标签的示例）。

祝你好运！

**更新：**对不起，让我纠正一下自己：在您的情况下使用人造列最好将当前背景设置为`html`元素并将人造背景设置为`body`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:42:31.867

假设您的等高列是该示例中的左侧菜单和右侧内容，您可以只在右列上使用 margin-left 属性并将容器的背景颜色设置为所需的左列颜色。这将假设您的右侧内容始终具有比左侧更大的高度，但还有其他方法可以解决这个问题。

```
#container {
width: 960px;
background-color: #000;
}
#menu {
float:left;
width: 240px;
}
#content {
float:right:
margin-left: 240px;
background-color: #fff;
}

<div id="container">
    <div id="menu">
        <ul>
            <li><a href="#">Home</a></li>
        </ul>
    </div>
    <div id="content">
        stuff goes here
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T09:06:24.197

该问题是由`overflow: hidden;`在元素上定义的两个规则`#content`和`#main-contaniner`.

# asp.net - 构建 ASP.Net 默认网站错误

> ID：823605
> 
> 赞同：0
> 
> 时间：2009-05-05T06:30:30.640
> 
> 标签：asp.net, visual-studio, msbuild

我正在使用 VSTS 2008，我正在使用创建新的 ASP.Net 网站并使用默认设置/自动生成的文件。

我的问题是，

1.  如何使用命令行脚本 (msbuild) 自动构建 ASP.Net 网站？
2.  我想将网站构建成一个 DLL，以后可以轻松地将其复制到目标 IIS 服务器。

任何示例或快速回答如何在 msbuild 中执行这些任务？

EDIT1：网站文件夹中没有 sln 和 csproj 文件。链接在这里。

[http://tinypic.com/view.php?pic=dra5jp&s=5](http://tinypic.com/view.php?pic=dra5jp&s=5)

这是我在 VSTS 2008 中创建的方法。

[http://i40.tinypic.com/208zfxv.jpg](http://i40.tinypic.com/208zfxv.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T06:41:16.590

我使用 VS.NET 2005 并使用此命令在发布模式下构建我的 asp.net Web 应用程序：

```
cd "C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\"
MSBuild "C:\Projects\MyProject.csproj" /t:Rebuild /p:Configuration=Release /verbosity:quiet /p:WarningLevel=0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T07:25:17.230

“Web 应用程序”有 .csproj 文件，“网站”没有。[http://damieng.com/blog/2008/02/07/web-site-vs-web-application](http://damieng.com/blog/2008/02/07/web-site-vs-web-application)

你想用 bin 目录 C:\windows\framework\version 中的 aspnet_compiler.exe 编译它

[http://msdn.microsoft.com/en-us/library/ms178466.aspx](http://msdn.microsoft.com/en-us/library/ms178466.aspx)

更简单的方法是使用部署项目或 Visual Studio 中的“发布网站”命令。（在网站上点击右键）

[http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)

# linq-to-sql - SqlMetal 生成垃圾关联名称

> ID：823607
> 
> 赞同：2
> 
> 时间：2009-05-05T06:32:16.687
> 
> 标签：linq-to-sql, code-generation, datacontext, sqlmetal

为什么 SqlMetal 弄乱了关联名称。例如，在我的“TextMessage”表中，我有两列引用“ApplicationUser”表。'SenderUserId' 和 'RecipientUserId'

当我运行 SqlMetal 并查看我的“ApplicationUser”类时

对于“RecipientUserId”，它会生成：

```
[Association(Name="FK__TextMessa__Recip__72910220", Storage="_TextMessages", ThisKey="Id", OtherKey="RecipientUserId", DeleteRule="NO ACTION")]
        public EntitySet<TextMessage> TextMessages
        {
            get
            {
                return this._TextMessages;
            }
            set
            {
                this._TextMessages.Assign(value);
            }
        } 
```

对于“SenderUserId”，它会生成这个名为垃圾的属性：

```
[Association(Name="FK__TextMessa__Sende__73852659", Storage="__TextMessa__Sende__73852659s", ThisKey="Id", OtherKey="SenderUserId", DeleteRule="NO ACTION")]
        public EntitySet<TextMessage> _TextMessa__Sende__73852659s
        {
            get
            {
                return this.@__TextMessa__Sende__73852659s;
            }
            set
            {
                this.@__TextMessa__Sende__73852659s.Assign(value);
            }
        } 
```

我该如何补救？这是不可用的。有没有更好的方法来生成 Linq To Sql 代码？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-12-27T07:40:41.437

它根据外键生成名称。将您的外键命名为比自动生成的名称更易读的名称。例如：

约束 RecipientMessages FOREIGN KEY(RecipientUserId) 引用 ApplicationUser(UserId)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T08:56:32.830

您可以指示 SqlMetal 生成 DBML 文件：

```
SqlMetal /server:myserver /database:northwind /dbml:northwind.dbml /namespace:nwind 
```

然后更正 DBML 文件中的关联名称，然后从 DBML 生成：

```
SqlMetal /code:nwind.cs /map:nwind.map northwind.dbml 
```

这样做的唯一问题是，如果您在更新数据库后重新生成 DBML，对 DBML 的任何更改都会被清除。

其他选项：

*   使用 Visual Studio 的设计器（如果您的架构很大，则不是很好）
*   搜索第三方工具生成DataContexts
*   编写自己的工具

还有一点：我很少看到 SqlMetal 发出这么糟糕的关联名称。您的列是如何命名的？与另一个关系名称是否有冲突？

# anti-patterns - 什么是软编码？（反模式）

> ID：823610
> 
> 赞同：16
> 
> 时间：2009-05-05T06:34:47.743
> 
> 标签：anti-patterns

我发现关于软编码反模式的[维基百科条目简洁而令人困惑。](http://en.wikipedia.org/wiki/Softcoding)那么什么是软编码？在什么设置下是不好的做法（反模式）？此外，什么时候可以认为它是有益的，如果是，应该如何实施？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-05T06:38:47.717

简短的回答：为了避免硬编码而走极端，并最终使用一些令人费解的抽象层来维持这比硬编码值从一开始就存在的情况更糟糕。即过度工程。

像：

```
SpecialFileClass file = new SpecialFileClass( 200 ); // hard coded

SpecialFileClass file = new SpecialFileClass( DBConfig.Start().GetConnection().LookupValue("MaxBufferSizeOfSpecialFile").GetValue()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T08:03:06.767

[Daily WTF 关于软编码的文章](http://thedailywtf.com/articles/soft_coding.aspx)的主要观点是，由于过早的优化和恐惧，一个定义非常明确且没有重复知识的系统会被更改并变得更加复杂而无需任何必要。

您应该记住的主要事情是，如果您的更改确实改善了您的系统，并避免轻描淡写地将某些东西标记为反模式并通过各种方式避免它。配置您的系统并避免硬编码是解决系统中重复知识的简单方法（请参阅[The Pragmatic Programmer Quick Reference Guide](http://www.codinghorror.com/blog/files/Pragmatic%20Quick%20Reference.htm)中的第 11 点：“DRY Don't Repeat Yourself” ）这是避免硬编码建议背后的驱动需求。即理想情况下，如果您必须更改诸如错误消息之类的简单内容，则系统中应该只有一个位置（即代码或配置）应该更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T06:40:40.803

Ola，一个很好的例子，一个内置软编码概念的真实项目是[Django](http://www.djangoproject.com/)项目。他们的 settings.py 文件抽象了某些数据设置，以便您可以在那里进行更改，而不是将它们嵌入到您的代码中。如有必要，您还可以向该文件添加值并在必要时使用它们。

[http://docs.djangoproject.com/en/dev/topics/settings/](http://docs.djangoproject.com/en/dev/topics/settings/)

**示例**：

这可能是来自 settings.py 文件的片段：

```
num_rows = 20 
```

然后在您的一个文件中，您可以访问该值：

```
from django.conf import settings
...

for x in xrange(settings.num_rows):
   ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-19T10:38:22.130

软编码：将外部来源的值插入计算机程序的过程。比如通过键盘、命令行界面插入值。软编码被认为是良好的编程实践，因为开发人员可以轻松地修改程序。硬编码。在编写源代码的过程中给程序赋值，并制作程序的可执行文件。现在，改变或修改程序源代码值是非常困难的过程。与区块链技术一样，创世块是无法更改或修改的硬代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-05T09:34:15.720

终极软编码：

```
const float pi = 3.1415; // Don't want to hardcode this everywhere in case we ever need to ship to Indiana. 
```

# oracle - 在 PL/SQL 中的记录字段上使用 %TYPE

> ID：823612
> 
> 赞同：1
> 
> 时间：2009-05-05T06:35:50.890
> 
> 标签：oracle, collections, plsql

这让我发疯了一段时间：

```
DECLARE
    TYPE AttrValueRec IS RECORD (
        attr        VARCHAR2(40),
        val         VARCHAR2(2000),
        inst        NUMBER(4)
    );

    FUNCTION create_attrval(attr   AttrValueRec.attr%TYPE,
                            val    AttrValueRec.val%TYPE,
                            inst   AttrValueRec.inst%TYPE := 1)
    RETURN AttrValueRec IS
        attr_value  AttrValueRec;
    BEGIN
        attr_value.attr := attr;
        attr_value.val := val;
        attr_value.inst := inst;
        RETURN attr_value;
    END;
BEGIN
    NULL;
END; 
```

在记录字段上使用`%TYPE`似乎不起作用。它产生以下错误：

```
ORA-06550: line 8, column 36:
PLS-00206: %TYPE must be applied to a variable, column, field or attribute, not to "ATTRVALUEREC.ATTR"
ORA-06550: line 8, column 5:
PL/SQL: Item ignored 
```

虽然再次显式定义类型有效：

```
DECLARE
    TYPE AttrValueRec IS RECORD (
        attr        VARCHAR2(40),
        val         VARCHAR2(2000),
        inst        NUMBER(4)
    );

    FUNCTION create_attrval(attr   VARCHAR2,
                            val    VARCHAR2,
                            inst   NUMBER := 1)
    RETURN AttrValueRec IS
        attr_value  AttrValueRec;
    BEGIN
        attr_value.attr := attr;
        attr_value.val := val;
        attr_value.inst := inst;
        RETURN attr_value;
    END;
BEGIN
    NULL;
END; 
```

有人可以向我解释为什么它不起作用吗？有没有办法引用记录定义中声明的类型，而不是在函数中再次显式定义它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T12:37:51.473

您需要实际创建一个类型的变量来引用属性。

在类型声明之后和函数之前添加它。

```
 attrib_value  AttribValueRec; 
```

然后在您的函数标题中，您可以像这样引用函数中属性的类型：

```
 attr  attrib_value.attr%TYPE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T09:52:35.770

看[文档](http://download.oracle.com/docs/cd/B10501_01/appdev.920/a96624/01_oview.htm#795)。%TYPE 和 %ROWTYPE - 仅用于引用数据库**列**。但是您尝试将引用指向用户类型。

解决方案是在数据库列上使用 %TYPE-referer 定义您的 pl/sql 类型，然后使用引用同一数据库列的参数创建函数。

**更新**

它不是完整的事实，因为首席评论员发布了有用的想法。摘要 %TYPE 和 %ROWTYPE 不仅可以引用表列。引用变量和游标等“真实”对象也很好。

# asp.net - Asp.net：如何对具有重复项的下拉列表进行排序？

> ID：823613
> 
> 赞同：0
> 
> 时间：2009-05-05T06:36:32.403
> 
> 标签：asp.net, sorting, drop-down-menu

我有一个下拉列表，我们在下拉列表由数据库中的数据绑定后添加某些项目，因此需要对下拉列表进行排序。所以我需要对一个可以有重复的下拉列表进行排序。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T06:58:13.817

我建议不要将项目直接添加到下拉列表中，而是将它们添加到您绑定到的数据结构中。如果此结构中的项目实现`IComparable`，那么您可以定义一个比较方法以在 Dropdown 实际绑定到数据源之前应用排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T06:41:30.300

假设您绑定到一个通用列表，您可以尝试这样的事情：

```
 var ddlFoo = new List<foo>();
    foreach (var lc in myDropDownList.Items)
    {
        ddlFoo.Add((foo)lc);
    }
    myDropDownList.DataSource = ddlFoo.OrderBy(dl => dl.fooID);
    myDropDownList.Databind(); 
```

# linux - 哪个系统可以称为“基于嵌入式 Linux”？

> ID：823628
> 
> 赞同：1
> 
> 时间：2009-05-05T06:41:27.913
> 
> 标签：linux, embedded

我正在使用 Red Hat Linux 开发 SBC（单板计算机）板，该板用于从许多路由器获取信息并处理数据包。这个网关可以称为“基于嵌入式 Linux”的产品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T22:41:24.767

如果它的用途已从通用计算机转移到具有特定任务的设备或设备，我将其称为嵌入式。此外，针对该特定任务的定制可能应该删除/禁用/减轻一些其他通用功能（例如，无头运行，禁用/删除 X 或通用工具/服务，以进一步使设备能够完成其工作。）

基本上看设备并辨别它是否显示为“运行 linux 的计算机”或“使用 linux 完成特定任务的设备”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T06:45:14.300

请参阅此[问题](https://stackoverflow.com/questions/778800/whats-the-best-description-for-embedded-hardware-system)，了解哪些系统可以被描述为嵌入式。在行业术语中，我会说无头 Linux 设备被称为“嵌入式”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T11:46:37.447

我不同意它必须是无头的才能被认为是嵌入式的。例如，移动电话被认为是嵌入式的，但它们具有视频、I/O 和其他功能。就个人而言，我认为嵌入式没有“明确”的界限。但一般来说，当您使用最少的资源（例如最少的 RAM）并执行非常特定的功能（即不是通用目的）时，它会更加嵌入式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T11:40:15.450

简短的回答：是的

来自[维基百科](http://en.wikipedia.org/wiki/Embedded_system "嵌入式系统")：

> 嵌入式系统是一种专用计算机系统，旨在执行一个或几个专用功能，通常具有实时计算约束。它通常作为包括硬件和机械部件在内的完整设备的一部分嵌入。相比之下，通用计算机，例如个人计算机，可以根据编程执行许多不同的任务。嵌入式系统控制着当今使用的许多常见设备。

虽然我认为您的设备没有嵌入到另一台设备上，但我发现它的功能很少，也不是通用计算机。

此外，正如 Shashikiran 所说，SBC 通常被称为嵌入式系统。

几年前，PC-104 把我逼疯了……

# visual-c++ - 全局成员创建

> ID：823630
> 
> 赞同：1
> 
> 时间：2009-05-05T06:41:40.317
> 
> 标签：visual-c++

如何在 vc++ 6.0 mfc 项目中创建全局成员。

如果我在 WizardBar（WizardBar C++ 类）中选择全局选项，然后（WizardBar C++ 成员），它会显示（无成员 - 创建新类...）。

如何为这个全局类创建成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-17T14:54:36.090

如果您的项目中有任何全局函数，它将显示在组合框中。看看只是声明一些像这样的c风格函数

int sum(int a ,int b) { return a+b;}

现在组合框将显示 sum 函数。

当您的项目中没有找到全局函数时，组合框中显示“*没有成员 - 创建新类... ”。*

这里“*创建新类...* ”告诉用户他们可以通过右键单击将新类添加到项目中。

# vb.net - 指定开始菜单快捷方式的顺序

> ID：823633
> 
> 赞同：0
> 
> 时间：2009-05-05T06:42:09.503
> 
> 标签：vb.net, startmenu

我在程序菜单中为我的一些 exe 创建了快捷方式。例如，我可能会为 a.exe、v.exe 和 g.exe 创建快捷方式。默认情况下，它对齐为 a、g、v（按字母顺序）。我想以不同的顺序放置我的快捷方式，例如 (v, a, g)。

简而言之，我希望能够将它创建的快捷方式的顺序更改为字母顺序以外的顺序。

我在 vb 中使用 wshshellobject。我创建了一个dll；通过它我创建了我的快捷方式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-23T20:19:36.077

假设您正在尝试修改“开始”菜单上快捷方式的顺序，我不确定这是否可以通过编程方式完成（这很遗憾 - 我已经通过键入启动了 Vista/7 中许多应用程序的卸载程序他们的名字，不看就打！）。

微软的 Raymond Chen 前段时间在他的博客上发表了这篇文章：

> 经典的开始菜单和 Windows XP 开始菜单的“所有程序”部分允许您自定义出现在那里的快捷方式的顺序。您可以使用拖放来重新排列它们，或强制它们按名称排序。但是为什么这些操作没有编程接口呢？
> 
> 因为力量被用于邪恶的程度远远超过它被用于善良的程度。

更多信息在这里：http: [//blogs.msdn.com/b/oldnewthing/archive/2006/06/19/636823.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2006/06/19/636823.aspx)

# sql-server - SQL Server 查询占用 100% CPU 并运行数小时

> ID：823635
> 
> 赞同：3
> 
> 时间：2009-05-05T06:42:29.363
> 
> 标签：sql-server, performance

我有一个查询每天都在运行 2 年多一点，通常只需不到 30 秒即可完成。突然间，昨天，查询开始需要 3 个多小时才能完成，并且一直使用 100% 的 CPU。

SQL 是：

```
SELECT
  @id, 
  alpha.A, alpha.B, alpha.C, 
  beta.X,  beta.Y,  beta.Z, 
  alpha.P, alpha.Q
FROM 
  [DifferentDatabase].dbo.fnGetStuff(@id) beta 
  INNER JOIN vwSomeData alpha ON beta.id = alpha.id 
```

`alpha.id`是 BIGINT 类型并且`beta.id`是 INT 类型。`dbo.fnGetStuff()`是一个简单的 SELECT 语句，在同一个数据库中的表上有 2 个内部连接，使用`WHERE id = @id`. 该函数返回大约 11000 个结果。

该视图`vwSomeData`是一个简单的 SELECT 语句，其中包含两个 INNER JOIN，它返回大约 590000 个结果。

视图和函数在自行执行时都将在不到 10 秒的时间内完成。首先将函数的结果选择到一个临时表中，然后加入该表使查询在 < 10 秒内完成。

如何解决发生的问题？我在活动管理器中看不到任何锁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T06:52:01.353

查看查询计划。我的猜测是执行计划中有一个表扫描或更多。对于您在结果中获得的少数记录，这将导致大量 I/O。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T06:49:53.777

您可以使用 SQL Server Profiler 工具来监视 SQL Server 上正在运行的查询。它不显示锁，但它还可以例如通过建议索引为您提供有关如何改进查询的提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T21:24:13.143

你需要使用一个函数吗？您能否将整个内容重新写入一个存储过程，在该存储过程中将@ID 作为参数传递。

即使您的表有索引，因为您将 @ID 作为变量传递给 WHERE 子句，这可能会大大增加查询运行的时间。

可能不使用索引的原因是查询分析器在选择访问方法来执行查询时不知道变量的值。因为这是一个批处理文件，所以只对 Transact-SQL 代码进行了一次传递，从而阻止查询优化器知道它需要知道什么才能选择使用索引的访问方法。

如果您无法重新编写 SQL，您可能需要考虑使用 INDEX 查询提示。

也有可能，因为这刚刚开始发生，索引已经变得支离破碎，可能需要重建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T07:03:41.730

如果你有一个相当新的 SQL Server Management Studio 版本，它在工具下还有一个数据库优化顾问。它从 Profiler 中获取跟踪信息，并提出一些有时非常有用的建议。确保没有太多查询 - 构建建议需要很长时间。

我不是这方面的专家，但过去有过一些运气。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T06:46:05.920

我在加入返回大型数据集的函数时遇到了类似的问题。我必须按照你的建议去做。将结果放在临时表中并加入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T13:41:14.347

看看估计的计划，这可能会有所启发。通常，当查询成本变得高出几个数量级时，这是因为在更适合散列连接的地方使用了循环或合并连接。如果您在估计的计划中看到循环或合并连接，请查看它期望处理的行数 - 它是否远小于您知道的实际将要处理的行数？您还可以指定使用哈希联接的提示，看看它是否表现得更好。如果是这样，请尝试更新统计信息，看看它是否会在没有提示的情况下返回哈希连接。

```
SELECT
  @id, 
  alpha.A, alpha.B, alpha.C, 
  beta.X,  beta.Y,  beta.Z, 
  alpha.P, alpha.Q
FROM 
  [DifferentDatabase].dbo.fnGetStuff(@id) beta 
  INNER HASH JOIN vwSomeData alpha ON beta.id = alpha.id 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T13:53:01.527

- 不知道什么类型的模式已经到位，只是试图抛出想法：

就像其他人所说的那样......使用 Profiler 并找到痛苦的根源......但我认为这是另一个数据库上的功能。由于该功能可能是痛苦的根源，您是否考虑过 [DifferentDatabase] 上的一些非规范化或任何东西。我认为你会发现加入一个带有索引的扁平表比加入一个昂贵的函数有更多的可伸缩性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T20:58:20.617

运行此命令：

设置 SHOWPLAN_ALL ON

然后运行您的查询。它将显示执行计划，在索引或表上查找“SCAN”。这很可能是您的查询现在发生的情况。如果是这种情况，请尝试找出它现在不使用索引的原因（刷新统计信息等）

# future-proof - 未来验证您的应用程序有哪些选择？

> ID：823637
> 
> 赞同：4
> 
> 时间：2009-05-05T06:43:15.303
> 
> 标签：future-proof

我正在考虑尽量减少对尚未编写的应用程序的未来影响。我试图避免任何 3rd 方产品，甚至避免特定于操作系统的调用。任何人都可以建议将来验证应用程序的其他方法。这个想法是不必在 10 或 20 年内重写主要部分，并且只需要进行维护（错误修复）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T06:50:04.290

如果您希望您的程序在这种时间段内（在现代操作系统上）继续运行，您可能最终不得不只用纯 ANSI C（或 C++）编写它。多年来，其他任何事情都可能需要进行*某种*调整——没有人真正知道未来 10 到 20 年会发生什么。

也就是说，这里有一些技巧可以最大限度地减少这些问题：

1.  避免奇怪的依赖。如果您要依赖某个库，请确保它*非常*完善（因此可能在这 10 到 20 年中至少存活 5 年），或者至少是开源的，以便您可以在需要时自行分叉是。
2.  避免特定于操作系统的调用。这将是与 1 的平衡行为。 - 您可以使用诸如[boost](http://www.boost.org/)或[Qt](http://www.qtsoftware.com/products/)或[glib](http://library.gnome.org/devel/glib/)或 what-have-you 之类的包装库 - 但这会增加在这方面出现兼容性问题的机会。
3.  记录一切。事实是，无论您多么努力，该程序都需要兼容性修复和错误修复，并且可能还需要添加功能。因此，让 15 年后出现的可怜的维护程序员的生活更轻松。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T07:22:09.173

挖掘一些 10 年和 20 年前仍然在今天的机器上运行的程序，看看它们为什么仍然运行以及为什么它们有价值。我看到一些基于控制台的计算密集型应用程序仍在偶尔使用，主要是用 C 和 FORTRAN 编写的，由其他应用程序调用。如果你的应用程序有很多 GUI，你确定它在几十年后仍然有任何价值吗？也许考虑将用户界面与核心功能分开，这样 UI 可以在未来随着 UI 范式的变化和发展而被替换。如果您以非常模块化的方式编写系统，则可以保留仍然提供价值的模块，而可以替换那些明显过时的模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T07:11:21.010

考虑到 64 位编写。我们现在发现我们的许多第三方依赖项不支持 64 位，因此我们遇到了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T07:33:23.733

构建一个在 10 年内仍可运行且几乎无需维护的应用程序的最佳方法是查看 10 年前构建并仍在运行的系统。

根据我的经验，大多数不需要重大升级的系统都是通过在与 10 年前部署的相同或相似硬件上运行并使用相同的界面来实现的。

由于摩尔定律或可用性改进，维护者选择放弃性能改进，转而支持多年来几乎没有维护。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T07:25:14.580

自动化测试也可以提供帮助。并不是说您的应用程序会被“证明”，但我会知道当事情发生变化时必须修复什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T16:57:15.033

我开发的许多应用程序都按周期运行（例如：每年）。我为确保他们继续工作所做的最重要的事情不是硬编码日期或日期范围。例子：

*   `year(now())`对于这一年
*   `DateSubmitted BETWEEN year(now()) AND DATEADD(year,1,year(now()))`对于一个范围

当然，这些只是例子。

# data-structures - Inode编号的数据结构是什么样的？

> ID：823642
> 
> 赞同：4
> 
> 时间：2009-05-05T06:46:35.950
> 
> 标签：data-structures, filesystems, inode

我对 inode 编号的定义大吃一惊：

> inode 是传统 Unix 样式文件系统（如 UFS 或 ext3）上的数据结构。inode 存储有关常规文件、目录或其他文件系统对象的基本信息。[来源](http://www.cyberciti.biz/faq/unix-linux-remove-strange-names-files/)

所以每个inode编号必须有一个逻辑顺序。你能直接从前面的数字得出什么结论吗？

```
4214970 0 drwx------  102 user  staff   3.4K Feb  2 22:34 new
5728909 0 drwx------    3 user  staff   102B Mar 25 22:11 new_new
5415906 0 drwx------   15 user  staff   510B Mar 19 02:28 stdout_TEST 
```

如果没有，由于数据结构，您可以知道什么样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T06:52:39.883

inode 编号不是 inode。:) 您可以将 inode 编号视为 inode 的主键。

至于如何决定 inode 编号，则取决于文件系统。一些文件系统甚至可能凭空产生 inode 编号（尤其是一些 FUSE 文件系统）。其他时候，它可能会直接映射到磁盘上的位置。不幸的事实是，这是一个有点过时的概念，而且现在许多现代文件系统都难以将其内部位置信息压缩成 32 位数字。

在任何情况下，作为应用程序程序员，应该将 inode 编号视为一个不透明的值，仅适用于相等比较（并且仅当您确定文件没有被删除时，因为 inode 编号可能会被重用......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T06:58:17.797

> 你能直接从前面的数字得出什么结论吗？

不必要。索引节点被回收。

> 如果没有，由于数据结构，您可以知道什么样的事情？

检查包含`struct`适合特定文件系统的定义的头文件（例如`/usr/include/linux/ext2_fs.h`，用于 ext2 和 ext3）。

# ibatis - 巴蒂斯 | 在ibatis中配置xml文件作为数据源

> ID：823646
> 
> 赞同：1
> 
> 时间：2009-05-05T06:49:28.020
> 
> 标签：ibatis

如何在 iBatis 中配置一个 xml 文件作为数据源？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-05-05T20:01:23.103

如果您使用的是 Tomcat，您可以在 config.xml 中配置 DataSource，并在您的 iBatis 配置 xml 中具有以下定义，其中 comp/env/jdbc/db 是您在 Tomcat 中的 jndi 定义。

```
<bean id="JndiDatasource" class="org.springframework.jndi.JndiObjectFactoryBean">
      <property name="jndiName" value="java:comp/env/jdbc/db"/>   
      <property name="resourceRef" value="true" />
</bean> 
```

如果它是一个独立的应用程序：

```
<bean id="jdbc.DataSource"
      class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.OracleDriver"/>
    <property name="initialSize" value="${jdbc.initialSize}"/>
    <property name="maxActive" value="${jdbc.maxActive}"/>
    <property name="minIdle" value="${jdbc.minIdle}"/>
    <property name="password" value="${jdbc.dbpassword}"/>
    <property name="url" value="${jdbc.dburl}"/>
    <property name="username" value="${jdbc.dbuser}"/>
    <property name="accessToUnderlyingConnectionAllowed" value="true"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T07:13:07.790

您可以使用 JndiDataSourceFactory .. 这是我从 IBATIS 文档中得到的：

JndiDataSourceFactory - 此实现将从应用程序容器内的 JNDI 上下文中检索 DataSource 实现。这通常在使用应用程序服务器并提供容器管理的连接池和关联的 DataSource 实现时使用。访问 JDBC DataSource 实现的标准方法是通过 JNDI 上下文。JndiDataSourceFactory 提供了通过 JNDI 访问此类 DataSource 的功能。必须在数据源节中指定的配置参数如下：

我使用 Spring 使用 AppServer 定义的数据源配置 IBATIS，spring 框架与 IBATIS 有很好的集成。看看 org.springframework.orm.ibatis.SqlMapClientFactoryBean 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-06-10T18:47:43.363

如果您正在寻找完整的（工作）示例，那么[http://ganeshtiwaridotcomdotnp.blogspot.com/2011/05/tutorial-on-ibatis-using-eclipse-ibator_31.html](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/05/tutorial-on-ibatis-using-eclipse-ibator_31.html)可能会对您有所帮助。

本文包含了带有 ibator 插件的 ibatis 的所有配置设置以及带有可下载代码的工作示例。

# paypal - 如何修改经常性 PayPal 付款

> ID：823652
> 
> 赞同：0
> 
> 时间：2009-05-05T06:52:31.257
> 
> 标签：paypal, paypal-subscriptions

我正在尝试实现以下场景：

1.  用户批准所选包裹大小的每周定期付款（订阅）
2.  每周用户可以：取消特定的一周交货并避免为这周付款 b. 修改包裹大小，只为这次少付/多付 c. 除了每周套餐外，添加其他项目并收取费用

查看文档，我没有找到允许我根据需要修改订阅的 API。

有人可以指导我找到正确的文档或提供代码片段吗？

谢谢，约西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-22T14:33:52.900

我认为这是不受支持的。对于这些用例，您可能希望查看[Spreedly和 Zuora.com 等订阅管理服务。](http://spreedly.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-13T22:03:58.887

我不相信这是可能的。我正在尝试实现类似的事情。我尝试的是发布带有免费试用期的订阅修改。但似乎在订阅修改时忽略了试用期参数 (a1,t1,p1)。我发现一些（非官方）参考资料表明，免费时段不能插入现有订阅，这正是我们所需要的。

我很沮丧，这不受支持。我想不出一个干净的方法来解决它。

# visual-studio - 如何在 Visual Studio 中打开复制的项目？

> ID：823654
> 
> 赞同：1
> 
> 时间：2009-05-05T06:53:10.180
> 
> 标签：visual-studio

我已将整个项目复制到我的 PC 中，包括 My Documents/Visual Studio 和 inetpub/wwwroot，但是当我尝试在 Visual Studio 中打开项目时，它会尝试仅打开 1 个文件 .vssproj 并给我错误消息，比如：“无法加载项目文件。项目的应用程序......未安装。”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-12T12:42:24.397

如果 VS 2005 尚未升级到 Service Pack 1，则 Web 应用程序项目（而不是网站）将给出此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T07:04:35.440

正如其他人所说，在不知道具体错误的情况下很难提供帮助。但是，sln 和 csproj 文件只是文本文件，您可以随时在记事本中打开它们，然后搜索并替换任何明显的路径问题。它通常比创建一个新项目并添加所有文件/引用更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-12T12:47:09.937

双击文件而不是*转到 VS 并使用其菜单打开它*时，我遇到了同样的错误。文件关联似乎有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T06:58:55.190

如果不告诉您遇到的具体错误很难提供帮助，但我猜项目文件中的文件路径不正确。尝试创建一个新项目并手动添加文件，看看是否会遇到相同的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T06:59:20.010

如果没有特定的错误消息，很难确定，但如果您有来自源计算机的完整解决方案而不仅仅是一个项目，您可能想尝试复制它。

# c# - 在 C# 中显式释放内存

> ID：823661
> 
> 赞同：38
> 
> 时间：2009-05-05T06:56:42.107
> 
> 标签：c#, .net, memory, memory-leaks, profiling

我创建了 ac# 应用程序，它使用了 150mb 的内存（私有字节），主要是由于一个大字典：

```
Dictionary<string, int> Txns = new Dictionary<string, int>(); 
```

我想知道如何释放这个内存。我试过这个：

```
Txns = null;
GC.Collect(); 
```

但这似乎对我的私人字节没有太大影响——它们从 155mb 下降到 145mb。有什么线索吗？

谢谢

-编辑-

好的，我对这段代码有更多的运气（它将私有字节降低到 50mb），但为什么呢？

```
Txns.Clear(); // <- makes all the difference
Txns = null;
GC.Collect(); 
```

-编辑-

好吧，对于每个说“不要使用 GC.collect”的人来说，这很公平（我不打算对此进行辩论，除了说你可以看到我的 C 背景），但它并没有真正回答我的问题：如果我先清除事务列表，为什么垃圾收集器只会释放内存？既然字典已被取消引用，它不应该释放内存吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-05T07:15:16.617

私有字节反映进程的内存使用情况。收集对象时，相关的内存段可能会或可能不会释放给操作系统。CLR 在操作系统级别管理内存，由于分配和释放内存不是免费的，因此没有理由立即释放每块内存，因为应用程序稍后可能会请求更多内存。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-05T07:02:29.987

如果你调用 GC.Collect() 它开始做它的工作，但它立即返回，它不会阻塞，所以你看不到它的影响，如果你只是调用 GC.WaitForPendingFinalizers() 之后它会阻塞你的应用程序直到 GC。 Collect() 完成它的工作

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-05T07:07:04.593

很可能您在其他地方有对字典的隐藏引用。因此字典没有被收集，但如果你收集`Clear()`了，内容就会被收集。

正如其他人已经指出的那样，不建议强制 GC。这可能导致内存被推入不经常收集的更高“代”，从而从长远来看浪费的内存多于获得的内存。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-05T07:01:09.350

从记忆中不确定是否`Dictionary`有一个`Dispose()`，但它一定有一个`Clear()`。在设置对 的任何引用之前调用其中任何一个`null`。

然后，简单地让垃圾收集器完成它的工作。明确地自己调用几乎*从来都不*是一个好主意`GC.Collect()`，它甚至可能不会做你想要/需要/期望的事情，最终会降低你的表现。静态代码分析 (=FxCop) 不会通过[可靠性规则 CA2001](http://msdn.microsoft.com/en-us/library/bb385973.aspx)向您发出警告，您知道吗？除非你真的知道你在做什么，否则不要这样做。即使那样也不要这样做。;-)

你确定字典有那么大吗？不是只有 10 Mb 的内存，其余的则由您的应用程序占用吗？可能对您有所帮助的问题：您是否使用过探查器来查看实际消耗内存的位置...？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T07:12:34.580

编辑：

公平地说，将引用设置为 null 不会释放内存，它会将其容器分配给不同的地址，在本例中为 null。根据[MSDN](http://msdn.microsoft.com/en-us/library/b5txwy7s(VS.85).aspx)，调用`Clear()`是这样做的：“Count 属性设置为 0，并且集合元素对其他对象的引用也被释放。容量保持不变。”

...

你永远不应该调用垃圾收集器。您正在使用没有本机资源的托管对象，请相信垃圾收集器会在您之后进行清理。

除了字典的大小之外，您无需担心内存，内存不是您的问题，而是垃圾收集器的问题。

调用`Clear()`将删除对内部任何包含对象的引用，但容量保持不变。

从技术角度讲，收集内存是昂贵的并且操作相当耗时。原因是，GC 不仅处理堆内存并清理你的堆，它还对堆进行碎片整理。它尝试将内存移动到连续的块中，以在某些代码发出大量请求时加快分配速度。

ps 你的字典有多大，你使用 155MB 内存？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-06T03:38:33.227

你需要恢复记忆吗？内存可用，只是没有被回收。您不应该清除字典，保持对它的[弱引用](http://msdn.microsoft.com/en-us/library/system.weakreference.aspx)并让运行时完成它的工作。

如果您想深入了解正在发生的事情，请查看[.NET Memory Profiler](http://memprofiler.com/)。这将使您能够准确了解对象正在发生的事情，它是哪一代，什么正在使用什么内存，等等。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-20T07:55:38.873

好的，我在这里有一个理论... Dictionary 是 KeyValuePair 的集合，它又是一个引用类型。

您的字典包含这些键值对。当你说：

```
Txns = null 
```

它从这些 KeyValuePair 集合中释放参考“Txns”。但是这些 KeyValuePair 仍然引用了 150 Mb 的实际内存，并且它们在范围内，因此还没有准备好进行垃圾收集。

但是当您使用以下内容时：

```
Txns.Clear();
Txns = null;
GC.Collect(); 
```

在这里，clear 方法还从它们各自的 KeyValuePair 对象引用中释放了 150Mb 的数据。因此，这些对象已准备好进行垃圾收集。

这只是我在这里做的一个疯狂的猜测。欢迎评论：）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T09:25:35.633

Windows 有两个内存可用性事件。我希望 CLR 对此作出回应。如果有足够的可用内存，明智的做法是不要运行垃圾收集器。因此，为确保您确实观察到不良的 CLR 行为，请使用另一个使用大量内存的虚拟应用程序重复此测试。

# c# - C#，实现类似方法的“静态抽象”

> ID：823665
> 
> 赞同：42
> 
> 时间：2009-05-05T06:58:41.227
> 
> 标签：c#, static, abstract

我最近遇到了一个问题，我似乎需要一个“静态抽象”方法。我知道为什么这是不可能的，但我该如何解决这个限制？

例如，我有一个具有描述字符串的抽象类。由于此字符串对于所有实例都是通用的，因此将其标记为静态，但我想要求从此类派生的所有类都提供自己的 Description 属性，因此我将其标记为抽象：

```
abstract class AbstractBase
{
    ...
    public static abstract string Description{get;}
    ...
} 
```

它当然不会编译。我想过使用接口，但接口可能不包含静态方法签名。

我应该让它简单地成为非静态的，并且总是得到一个实例来获取该类的特定信息吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-05T07:02:10.220

你不能。

这样做的地方是属性。

例如

```
[Name("FooClass")]
class Foo
{
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-11T18:20:46.527

如果您不介意推迟实现以明智地实现 Description 属性，您可以简单地执行

```
public abstract string ClassDescription {get; } 
// ClassDescription is more intention-revealing than Description 
```

实现类会做这样的事情：

```
static string classDescription="My Description for this class";
override string  ClassDescription { get { return classDescription; } } 
```

然后，你的班级必须遵守有描述的合同，但你把它留给他们明智地去做。没有办法以面向对象的方式指定实现（除了通过残酷、脆弱的黑客攻击）。

但是，在我看来，这个描述是类元数据，所以我更喜欢使用其他人描述的属性机制。如果您特别担心反射的多种用途，请创建一个反射您关注的属性的对象，并在类型和描述之间存储一个字典。这将最大限度地减少反射（除了运行时类型检查，这并不是那么糟糕）。字典可以存储为通常需要此信息的任何类的成员，或者，如果跨域的客户端需要它，则可以通过单例或上下文对象存储。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-05T07:03:47.830

将静态和抽象结合起来有点毫无意义，是的。静态背后的想法是不需要提供类的实例来使用相关成员；但是对于抽象，人们期望一个实例是提供具体实现的派生类。

我明白你为什么想要这种组合，但事实是唯一的效果是拒绝实现使用“this”或任何非静态成员。也就是说，父类将在派生类的实现中规定一个限制，即使调用抽象或“静态抽象”成员之间没有根本区别（因为两者都需要一个具体实例来确定要使用的实现）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-05T07:16:28.377

如果它是静态的，那么只有一个变量实例，如果我们可以在派生类中使用静态变量完成您想要完成的事情，我看不出继承会有什么意义。就我个人而言，我认为你会尽量避免使用实例变量。

为什么不只是经典的方式？

```
abstract class AbstractBase
{
    protected string _Description = "I am boring abstract default value";
}

class Foo : AbstractBase {

     public Foo() {
       _Description = "I am foo!";
     }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-10T18:22:52.787

一种可能的解决方法是在泛型的帮助下在基类中定义派生类的单例。

```
import System;

public abstract class AbstractBase<T>
    where T : AbstractBase<T>, new()
{
    private static T _instance = new T();

    public abstract string Description { get; }
    public static string GetDescription()
    {
        return _instance.Description;
    }
}

public class DerivedClass : AbstractBase<DerivedClass>
{
    public override string Description => "This is the derived Class";
}

class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(DerivedClass.GetDescription());
        Console.ReadKey();
    }
} 
```

诀窍是告诉您`AbstractBase<T>`有关如何实施的一些细节 `DerivedClass`：

*   它是可更新的，`where T: new()`因此它可以创建一个 Singleton 实例
*   它从自身派生出来，`where T : AbstractBase<T>`所以它知道会有一个实现`Description`

这种方式`_instance`包含`Description`可以在静态 Method 中调用的字段`GetDescription()`。这会迫使您覆盖`Description`您的`DerivedClass`并允许您使用`DerivedClass.GetDescription()`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-05T07:03:00.420

如果必须在实例上调用它，则它不是静态的。

如果您没有在实例上调用它，那么就没有多态性在起作用（即就语言而言，ChildA.Description 与 ChildB.Description 完全无关）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-14T11:47:37.757

你可以...

在抽象类...

```
 protected abstract InWindow WindowInstance { get; set; } 
```

在派生类中...

```
 private static InWindow _instance;

    protected override InWindow WindowInstance
    {
        get => _instance;
        set => _instance = value;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-09T19:32:20.203

您可以使“抽象”基方法抛出一个`Exception`，因此如果开发人员尝试在子类上调用此方法而不覆盖，则会被“警告”。

缺点是可能会扩展类而不使用此方法。然后参考提供的其他答案。

# windows-7 - 新的 Windows 7 系统托盘 - 现在如何向用户显示信息

> ID：823669
> 
> 赞同：3
> 
> 时间：2009-05-05T07:01:13.687
> 
> 标签：windows-7

新的 Windows 7 默认隐藏系统托盘图标。

现在向用户显示信息的推荐方式是什么？

我需要让用户可以看到一个可点击的小图标，以便用户可以随时访问我的“工具”。我应该使用小工具来显示我的 GUI 吗？它可以以某种方式与我的 Delphi 应用程序通信吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T07:07:14.717

没有更多信息，提供建议有点困难。

但是，我会想象一个足够重要的工具，用户会简单地保持最小化。然后，他们可以使用[Jumplists](http://msdn.microsoft.com/en-us/library/dd378460(VS.85).aspx#jump_lists)访问快速功能。

例如，Live Messenger 在 Win7 上使用此设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T07:05:20.430

如果您的用户真的喜欢您的图标/应用程序，他们总是可以选择不隐藏您的应用程序。

唯一的区别是只有用户可以选择显示哪个图标，而不是每个应用程序都声称它是“不动产”。

在我看来，这是一个很好的功能，如果我是你，我不会更改应用程序，只需提供一个首次运行的 GUI，它解释了如何使你的托盘图标在 Windows 7 中可见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T09:20:56.220

进行更改的全部原因是停止像您这样的程序。如果您需要显示信息，请继续这样做。但是通知区域（“系统托盘”）不是快捷方式所在。为此，您拥有开始菜单、桌面和/或快速启动栏（请让用户决定）。

# android - 有没有办法在 android 中创建自定义应答机？

> ID：823670
> 
> 赞同：4
> 
> 时间：2009-05-05T07:01:36.087
> 
> 标签：android

我想创建一个应用程序，允许您通过以下方式过滤各种应答消息的来电：

*   黑名单电话号码的“此号码不可用”
*   给陌生人的正式信息
*   关于您为朋友所做的事情的信息性消息

我不知道您如何自动接听电话，播放录制的消息然后等待应答并录制。或者也许只有一种方法可以与实际的应答系统交互，所以我只需要插件。

任何线索都非常感谢。任何代码片段的人类牺牲:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:00:45.170

未来版本的 Android 无法或计划访问内部电话：

[http://groups.google.com/group/android-developers/browse_thread/thread/e8904c82a2c4a333](http://groups.google.com/group/android-developers/browse_thread/thread/e8904c82a2c4a333)

这将带来安全风险，因为应用程序开发人员可能会拦截和劫持敏感电话（例如电话银行）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T18:44:49.487

目前这在 tmobile G1 上是不可能的。android SDK 应用程序无法访问此硬件/固件组合上的调用输入或输出。

[http://groups.google.com/group/android-developers/browse_thread/thread/d04c307973345fef/a628e578900b3dce?lnk=gst&q=dave+sparks+play+audio#a628e578900b3dce](http://groups.google.com/group/android-developers/browse_thread/thread/d04c307973345fef/a628e578900b3dce?lnk=gst&q=dave+sparks+play+audio#a628e578900b3dce)

和

[http://groups.google.com/group/android-developers/browse_thread/thread/185e33a3f420d1ac/e14e1dc84bb6dd24?lnk=gst&q=play+sound+call#e14e1dc84bb6dd24](http://groups.google.com/group/android-developers/browse_thread/thread/185e33a3f420d1ac/e14e1dc84bb6dd24?lnk=gst&q=play+sound+call#e14e1dc84bb6dd24)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-04T08:31:14.060

我不确定这是否能回答问题，但我认为这有点相关。

您可以安装 Ultimate Voice Recorder，它可以记录您的对话（在呼叫客户“服务”时非常有用）。由于它可以记录它，它必须有某种方式来访问对话。

此外，您必须为应用程序提供的功能非常可怕（翻译自荷兰语：完全互联网访问、拦截拨出电话、更改偏好、直接拨打电话号码、录制音频/拍照、更新联系人、自动启动）。在我看来，那里一定有什么东西可以帮助你？

但是，我认为它不能将音频注入流中。symbian 版本可以选择在对话中插入哔哔声，但我认为 android 版本没有。

[http://www.fingertip-access.com/](http://www.fingertip-access.com/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-12T07:26:40.307

我已经发现 att 用于您的手机 Android 或 ISO，到目前为止，它们比 symbian 落后数十年，可悲的是，如果您不安装自定义内核/越狱，则无法记录来电并对其进行筛选。“终极语音记录让您在扬声器模式下使用手机。”

# objective-c - Objective-C 备忘单

> ID：823672
> 
> 赞同：11
> 
> 时间：2009-05-05T07:01:56.507
> 
> 标签：objective-c

Objective-C 有哪些备忘单？

我已经用谷歌搜索了，但我真的不知道要寻找什么。他们中的大多数人认为我知道 Objective-C 而我不知道。我真的想要一个针对有经验的程序员的指南。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-05T07:04:36.050

Apple 开发者网站有~~[Objective-C 2.0 编程语言简介](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)~~ *（死链接）*

[10 分钟 Objective-C 简介](http://www.geom.uiuc.edu/software/w3kit/overview/objective-c.html)

[终极 iPhone Objective-C 备忘单](http://maniacdev.com/2009/04/the-ultimate-iphone-objective-c-cheat-sheet/)

~~[Objective-C 备忘单](http://www.dzone.com/links/rss/objectivec_cheat_sheet.html)~~ *（死链接）*

~~[Objective-C 备忘单](http://the-lazy-programmer.com/blog/files/Objective-C%20cheat%20sheet.pdf)(pdf)~~ *（死链接）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-03T09:58:21.193

这是另一个比较 C、C++、Objective-C 和 C# 的备忘单。如果您来自其他“类 C”语言之一，则很有用。

[平台语言：C、C++、Objective C、Java、C# 并排参考表](http://hyperpolyglot.org/cpp)

# exception - 不可序列化异常

> ID：823674
> 
> 赞同：1
> 
> 时间：2009-05-05T07:02:22.170
> 
> 标签：exception, jsp, serialization, vector

我正在尝试为一个 uni 项目创建一个模拟购物车。我使用两个 java 类 Item 和 shoppingCart，购物车使用向量来存储 Items，然后将它们写入文件。我正在尝试使用 jsp 页面上的类，但是当我尝试写入文件时，我得到一个 java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException：cart.Item ...有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T07:04:44.270

从 NotSerializableException 上的 javadoc...“当实例需要具有 Serializable 接口时抛出。”

这意味着您正在序列化的类需要实现 Serializable 标记接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:37:25.033

这是给你的一个小例子......

```
import java.io.*;

class player implements Serializable{
    String name;
    double health;
    double positionX;
    double positionY;
    int weapon;     
}

class game{
    public static void main(String[] args) throws Exception{

        player character1 = new player();
        character1.name = "Inukz";
        character1.health = 82.62;
        character1.positionX = 80;
        character1.positionY = 33;
        character1.weapon = 2;

        player character2 = new player();
        character2.name = "Prasad";
        character2.health = 32.62;
        character2.positionX = 40;
        character2.positionY = 63;
        character2.weapon = 3;

        player character3 = new player();
        character3.name = "Thilan";
        character3.health = 12.62;
        character3.positionX = 10;
        character3.positionY = 83;
        character3.weapon = 1;

        FileOutputStream fileStream = new FileOutputStream("myGame.js",true);
        ObjectOutputStream os = new ObjectOutputStream(fileStream);

        os.writeObject(character1);

        os.close();

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T02:58:32.103

为避免 NotSerializableException，请确保：

1.  **你的类**实现了 Serializable
2.  所有非原始**成员**都实现 Serializable （或者是瞬态的）
3.  如果你的类是一个**内部类**，它要么是静态的，要么外部类实现了 Serializable

除此之外，您还需要为每个 Serializable 类定义**serialVersionUID**。检查以上所有 3 种情况加上：

1.  所有可序列化**的超类**
2.  如果您的班级是**匿名班级**，请也在那里定义它

注意：您的代码有时可能会在没有 serialVersionUID 的情况下运行，但[请阅读 Serializable 的 javadoc 中的最后一段](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)以了解为什么它会成为问题，具体取决于环境。

* * *

有一个 VM 选项可以向异常添加详细信息。它显示了无法序列化的根类和嵌套类：

```
-Dsun.io.serialization.extendedDebugInfo=true 
```

# ms-access - Access 中的复杂表单和脚本

> ID：823693
> 
> 赞同：3
> 
> 时间：2009-05-05T07:05:56.687
> 
> 标签：ms-access, combobox

我正在寻找一些关于在 Access 中构建复杂表单的好教程。特别是，如何让一个 ComboBox 填充基于另一个 ComboBox 中的选择的值。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T07:08:35.510

Litwin、Getz 和 Gilbert 的 Access Developers Handbook 非常出色。有几个版本，这里是2000 版本的亚马逊[链接。](http://www.amazon.ca/Access-2000-Developers-Handbook-Set/dp/0782123716)

[Tony Toews 的在线访问页面](http://www.granite.ab.ca/accsmstr.htm)非常好。

As is [The Access Web](http://mvps.org/access/) :[限制组合/列表框的内容](http://mvps.org/access/forms/frm0028.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-06T19:43:30.287

通常，您会在 ComboBox 上进行选择的事件中执行类似的操作 - 可能是 After Update 事件。

然后，您只需更新`RowSource`另一个组合框中的值。根据类型，您可以更新它引用的查询/表、值列表或字段列表。

# internet-explorer - 另一个在 IE 中不起作用的图标

> ID：823702
> 
> 赞同：0
> 
> 时间：2009-05-05T07:09:27.457
> 
> 标签：internet-explorer, favicon

我已经通读并尝试了所有已经发布的网站图标修复。包含：

1.  刷新缓存
2.  使用可在其他网站上使用的其他网站图标
3.  使用网站图标生成网站
4.  使用 Photoshop favicon 插件
5.  使用绝对路径
6.  使用相对路径

它在所有其他浏览器中都能正常工作。我在 Mac 上通过 Parallels 在 Vista 中使用 IE8。

它在 Moodle 网站上，我没有更改网站图标的默认 Moodle 代码：

```
<link rel="shortcut icon" href="<?php echo $CFG->themewww .'/'. current_theme() ?>/favicon.ico" /> 
```

该网站在这里：[http ://www.olvarwood.com.au/olvarwoodonline/](http://www.olvarwood.com.au/olvarwoodonline/)

Favicon 路径在这里：[http ://www.olvarwood.com.au/olvarwoodonline/theme/olvar-wood/favicon.ico](http://www.olvarwood.com.au/olvarwoodonline/theme/olvar-wood/favicon.ico)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-03-26T00:13:23.540

网站图标很有趣。我相信它们的缓存方式可能​​与普通 Web 内容不同。

这可能是因为浏览器（以及其他东西）经常请求`favicon.ico`他们访问的每个站点。

我的网站图标不起作用，然后在几个小时后奇迹般地出现了。

抱歉，如果这没有太大帮助，但请尝试等待 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T07:17:46.813

它适用于我的 IE7。所以它必须特定于IE8。我唯一可以建议测试的是添加：

```
type="image/x-icon" 
```

在您的链接图标元素中。

# macos - 以编程方式获取/设置 Mac OSX 默认系统键盘快捷键

> ID：823705
> 
> 赞同：2
> 
> 时间：2009-05-05T07:10:49.980
> 
> 标签：macos, keyboard, shortcut, hotkeys

我正在尝试找到一种方法来以编程方式获取/设置系统偏好设置中的默认 OSX 系统键盘快捷键（热键）-> 键盘和鼠标-> 键盘快捷键选项卡。我需要能够在后台执行此操作，因此 GUI 脚本不是解决方案。

我找不到可能存储此信息的 plist 或任何内容。我在使用系统偏好设置时尝试使用仪器“文件活动”跟踪，但再次空手而归。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T07:14:17.227

糟糕，我重新运行了 Instruments，但这次一定要关闭系统偏好设置，直到那时快捷方式才被写出来。

原来该文件位于 ~/Library/Preferences/com.apple.symbolichotkeys.plist 但它非常神秘。无论如何，这就是我所追求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-31T12:58:15.893

实际上有一个 Plist，信息存储在`com.apple.symbolichotkeys AppleSymbolicHotKeys`其中是一个复杂的嵌套字典和列表：

```
$ defaults read com.apple.symbolichotkeys AppleSymbolicHotKeys
{
    10 =     {
        enabled = 1;
        value =         {
            parameters =             (
                65535,
                96,
                8650752
            );
            type = standard;
        };
    };
    11 =     {
        enabled = 1;
        value =         {
            parameters =             (
                65535,
                97,
                8650752
            );
            type = standard;
        };
    };
[...]
} 
```

假设您想以编程方式修改“系统偏好设置”->“键盘”->“快捷方式”选项卡->“应用程序快捷方式”->“所有应用程序”中的“显示帮助菜单”快捷方式。要找到正确的条目，打印文本文件中的所有 Plist，修改系统偏好设置中的快捷方式，在第二个文件中再次打印 Plist 并区分它们：

```
$ defaults read com.apple.symbolichotkeys AppleSymbolicHotKeys > 1
$ # modify System Preferences
$ defaults read com.apple.symbolichotkeys AppleSymbolicHotKeys > 2
$ diff -U 5 1 2
--- 1   2019-05-27 23:37:58.000000000 -0300
+++ 2   2019-05-27 23:38:24.000000000 -0300
@@ -5063,13 +5063,13 @@
             };
             98 =             {
                 enabled = 1;
                 value =                 {
                     parameters =                     (
-                        32,
-                        49,
-                        524288
+                        105,
+                        34,
+                        655360
                     );
                     type = standard;
                 };
             };
         }; 
```

所以要修改的条目是`98`，因为它是一个复杂的结构，您必须使用`/usr/libexec/PlistBuddy`它来完成它：

```
# Set "alt + Space" as shortcut for "Help menu"
/usr/libexec/PlistBuddy -c "Delete :AppleSymbolicHotKeys:98:value:parameters" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Add :AppleSymbolicHotKeys:98:value:parameters array" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Add :AppleSymbolicHotKeys:98:value:parameters: integer 32" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Add :AppleSymbolicHotKeys:98:value:parameters: integer 49" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Add :AppleSymbolicHotKeys:98:value:parameters: integer 524288" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Delete :AppleSymbolicHotKeys:98:enabled" ~/Library/Preferences/com.apple.symbolichotkeys.plist
/usr/libexec/PlistBuddy -c "Add :AppleSymbolicHotKeys:98:enabled bool true" ~/Library/Preferences/com.apple.symbolichotkeys.plist 
```

**注意**：

*   我必须删除`bool`参数才能修改它
*   必须重新启动计算机才能应用更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T13:04:06.917

有[一个 API](http://developer.apple.com/documentation/Carbon/Reference/Carbon_Event_Manager_Ref/Reference/reference.html#//apple_ref/c/func/CopySymbolicHotKeys)（获取，而不是设置）。

# iphone - 为 iPhone 应用程序编译自定义 SQLite

> ID：823706
> 
> 赞同：11
> 
> 时间：2009-05-05T07:11:03.053
> 
> 标签：iphone, xcode, sqlite

我正在尝试将[SQLite 合并](http://www.sqlite.org/amalgamation.html)源编译到我的 iPhone 应用程序中（让我可以访问 iPhone 编译版本的二进制文件中不可用的全文搜索功能。

当我将 sqlite3.c 和 sqlite3.h 添加到普通的 Carbon C 应用程序模板时，它编译得很好（带有一个关于未使用变量的警告），但是当我尝试在我的 iPhone 项目中编译它时，我得到了一些相关的错误缺少函数声明。我可以通过显式包含 ctype.h 来解决这些问题，但这有点奇怪。

但是，即使在它构建之后，它也无法链接并出现以下错误：

```
"_sqlite3_version", referenced from:
_sqlite3_version$non_lazy_ptr in sqlite3.0
symbol(s) not found
collect2: ld returned 1 exit status 
```

我认为这是 iPhone 应用程序的构建设置中的内容，但我无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-06T08:36:53.540

尝试以下步骤：

1.  xcode 菜单 -> 项目 -> 新目标 -> 静态库 -> 目标名称：SQLite
2.  将 SQLite 合并源放到项目中，现在可以选择目标，选择 SQLite
3.  xcode menu -> project -> edit active target -> tab General -> Direct Dependencies -> add SQLite
4.  选项卡常规 -> 链接库 -> 添加您的 SQLite

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-08T14:07:50.007

我已经设法使用合并来做到这一点，并将其直接转储到我的项目中，而无需执行 catlan 建议的链接（我并不是说这是一个坏主意，只是可以在主项目中进行）。

我不需要编辑任何东西（除了为文本搜索添加必要的 FTS 定义）并且编译时没有错误。检查您的构建设置并确保“-sqlite3”不在您的其他链接标志中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T10:48:57.930

这种类型的错误通常意味着缺少框架。

1.  右键单击或按住 Control 键单击项目的*Frameworks*文件夹。
2.  选择*添加 > 现有框架...*
3.  转到：*Macintosh HD > Developer > Platforms > iPhoneOS.platform > Developer > SDKs > iPhoneOS2.2sdk > usr > lib*并选择*libsqlite3.dylib*
4.  重建你的项目

我认为这应该照顾它。您可能需要添加一个类似的库才能在 iPhone 模拟器上运行。

# vba - 当工作簿达到 50 个工作表时，复制工作表宏停止执行任何操作

> ID：823717
> 
> 赞同：0
> 
> 时间：2009-05-05T07:15:48.330
> 
> 标签：vba, excel, excel-2003

我有一本工作簿，里面有很多封面，然后是后面的一堆包含一些图表的表格。图形页面是通过一遍又一遍地复制粘贴一张表（“MasterFormat”）创建的，每次都更改一些关键值。

该宏最初用于相当快地出现`Copy Method of Worksheet Class failed`错误。我最终从[http://support.microsoft.com/kb/210684](http://support.microsoft.com/kb/210684)找到了解决方法。

问题是，我的更新版本遇到了无穷无尽的问题。主要是它继续愉快地运行，但一段时间后实际上并没有复制任何东西。之所以高兴的部分原因是更新后的逻辑包含几个`Set x = y, if x is nothing then`s，（据我所知）仅适用于抑制错误，所以这就是我所做的。但另一方面，它在有 50 张纸后停止复制，并且没有给出任何解释（尽管这可能是 的位置错误`on error goto 0`）。

有谁知道我应该修复什么才能让它真正复制所有的工作表，而不仅仅是感到无聊并停下来？

代码如下：

```
Sub GenerateSheets()
    Application.ScreenUpdating = False

    Dim oBook As Workbook

    On Error Resume Next
    Set oBook = Workbooks("SSReport.xls")

    If oBook Is Nothing Then
        Set oBook = Application.Workbooks.Open("SSReport.xls")
    End If
    On Error GoTo 0

    Dim i, j As Integer
    Dim SheetName As String
    Dim ws As Worksheet
    Const PairingCount = 63

    Dim Pairings(1 To PairingCount, 1 To 2) As String
    For i = 1 To PairingCount
        Pairings(i, 1) = oBook.Sheets("SSPairings").Rows(i + 1).Cells(1)
        Pairings(i, 2) = oBook.Sheets("SSPairings").Rows(i + 1).Cells(2)
    Next i

    For i = 1 To PairingCount

         If i Mod 5 = 0 Then
            oBook.Close SaveChanges:=True
            Set oBook = Nothing
            Set oBook = Application.Workbooks.Open("SSReport.xls")
         End If

        Application.ScreenUpdating = False
        j = oBook.Worksheets.Count
        SheetName = "P" & Pairings(i, 1) & Pairings(i, 2)
        On Error Resume Next
        Set ws = oBook.Sheets(SheetName)
        If ws Is Nothing Then
            On Error GoTo 0
            oBook.Sheets("MasterFormat").Copy After:=Sheets(j)
            oBook.Sheets("MasterFormat (2)").Name = SheetName
        End If
        oBook.Sheets(SheetName).Cells(1, 2) = Pairings(i, 1)
        oBook.Sheets(SheetName).Cells(1, 5) = Pairings(i, 2)
        oBook.Sheets(SheetName).Cells(1, 8) = "P"
    Next i

    Application.ScreenUpdating = True
End Sub 
```

它是从元工作簿运行的，这是我上面链接到的知识库文章的建议。有趣的是，尽管`Open workbook`没有打开主工作簿，但它似乎并没有真正起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T09:57:58.317

该错误可能是由这一行引起的：

```
oBook.Sheets("MasterFormat").Copy After:=Sheets(j) 
```

将`Sheets(j)`引用代码模块所在的任何工作簿，这可能不是预期的工作簿。

以下对我有用：

```
Sub GenerateSheets()
Dim oBook As Workbook
Dim i As Long
Dim j As Long
Dim SheetName As String
Dim ws As Worksheet
Const PairingCount = 63
Dim Pairings(1 To PairingCount, 1 To 2) As String

On Error Resume Next
Set oBook = Workbooks("SSReport.xls")
On Error GoTo 0
If oBook Is Nothing Then
    Set oBook = Application.Workbooks.Open("SSReport.xls")
End If

With oBook
    For i = 1 To PairingCount
        Pairings(i, 1) = .Sheets("SSPairings").Rows(i + 1).Cells(1)
        Pairings(i, 2) = .Sheets("SSPairings").Rows(i + 1).Cells(2)
    Next i

    For i = 1 To PairingCount
        If i Mod 5 = 0 Then
            '//Save in case of corruption/error?'
            .Save
        End If

        j = .Worksheets.Count

        SheetName = "P" & Pairings(i, 1) & Pairings(i, 2)

        On Error Resume Next
        Set ws = .Sheets(SheetName)
        On Error GoTo 0
        If ws Is Nothing Then
            .Sheets("MasterFormat").Copy After:=.Sheets(j)
            .Sheets("MasterFormat (2)").Name = SheetName
        End If

        .Sheets(SheetName).Cells(1, 2) = Pairings(i, 1)
        .Sheets(SheetName).Cells(1, 5) = Pairings(i, 2)
        .Sheets(SheetName).Cells(1, 8) = "P"
    Next i
End With
End Sub 
```

我冒昧地将关闭/重新打开替换为简单`Save`的，因为这应该达到相同的结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T15:42:32.963

尝试改变

```
 If ws Is Nothing Then
            On Error GoTo 0
            oBook.Sheets("MasterFormat").Copy After:=Sheets(j)
            oBook.Sheets("MasterFormat (2)").Name = SheetName
        End If
        oBook.Sheets(SheetName).Cells(1, 2) = Pairings(i, 1)
        oBook.Sheets(SheetName).Cells(1, 5) = Pairings(i, 2)
        oBook.Sheets(SheetName).Cells(1, 8) = "P" 
```

进入

```
 If ws Is Nothing Then
        On Error GoTo 0
        oBook.Sheets("MasterFormat").Copy After:=Sheets(j)
        oBook.Sheets("MasterFormat (2)").Name = SheetName
    else
       oBook.Sheets(SheetName).Cells(1, 2) = Pairings(i, 1)
       oBook.Sheets(SheetName).Cells(1, 5) = Pairings(i, 2)
       oBook.Sheets(SheetName).Cells(1, 8) = "P"
    End If 
```

我想如果 ws 什么都不是，那么它会卡在接下来的 3 行中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T03:45:58.493

根据 Lunatik 的回答，我改为`oBook.Sheets("MasterFormat").Copy After:=Sheets(j)`，`oBook.Sheets("MasterFormat").Copy After:=oBook.Sheets(j)`这似乎解决了问题。

# javascript - 哪些是 HTML 和 JavaScript 编程的最佳参考站点

> ID：823718
> 
> 赞同：40
> 
> 时间：2009-05-05T07:16:08.767
> 
> 标签：javascript, html, reference

HTML 和 JavaScript 编程的最佳参考站点：

*   [W3C WebEd Wiki](http://www.w3.org/community/webed/wiki/Main_Page)（此站点有自学课程和参考资料）：[HTML](http://www.w3.org/community/webed/wiki/HTML/Elements) , [CSS](http://www.w3.org/community/webed/wiki/CSS/Properties)
*   W3C 规范：[HTML4](http://www.w3.org/TR/html4/)、[HTML5](http://www.w3.org/TR/html5/)（工作草案）、[CSS 2.1](http://www.w3.org/TR/CSS2/)、[DOM 技术报告：1-3 级](http://www.w3.org/DOM/DOMTR)
*   ECMAScript：[ECMAScript 5.1](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf) (PDF)，[ECMAScript 第 3 版。](http://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf),[带注释的 ES 5.1](http://es5.github.com/) , [HTML ES 3](http://bclary.com/2004/11/07/)
*   SitePoint: [DOM JavaScript](http://reference.sitepoint.com/javascript/domcore) , [HTML](http://reference.sitepoint.com/html) , [CSS](http://reference.sitepoint.com/css) --[搜索](http://tools.sitepoint.com/codeburner/)
*   Mozilla 开发中心：[DOM](https://developer.mozilla.org/En/DOM)、[JavaScript](https://developer.mozilla.org/En/JavaScript)、[JS Lang](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide)、[AJAX](https://developer.mozilla.org/En/AJAX)、[HTML](https://developer.mozilla.org/En/HTML)、[XHTML](https://developer.mozilla.org/en/XHTML)、[SVG](https://developer.mozilla.org/En/SVG)、[标准](https://developer.mozilla.org/en/Web_Standards)
*   MSDN：[HTML 元素](http://msdn.microsoft.com/en-us/library/ms533029.aspx)、[IE HTML 参考](http://msdn.microsoft.com/en-us/library/hh772960.aspx)、[CSS 属性](http://msdn.microsoft.com/en-us/library/ms533029.aspx)、[IE CSS 参考](http://msdn.microsoft.com/en-us/library/ms531209.aspx)、[JavaScript 语言](http://msdn.microsoft.com/en-us/library/d1et7k7c.aspx)、[DOM](http://msdn.microsoft.com/en-us/library/windows/desktop/ms764730.aspx)
*   Quirksmode: [DOM Javascript](http://quirksmode.org/js/contents.html) , [CSS](http://quirksmode.org/css/contents.html) ,[兼容性](http://quirksmode.org/compatibility.html)
*   ZVON：[HTML、XML、CSS](http://www.zvon.org/index.php?nav_id=references&mime=html)
*   DevGuru - [JavaScript](http://devguru.com/technologies/javascript/home.asp)，[HTML](http://devguru.com/technologies/html/home.asp)，[CSS](http://devguru.com/technologies/css2/home.asp)，[XML，服务器端](http://devguru.com/technologies/technologies.asp)
*   Aptana - [DOM0](http://www.aptana.com/reference/html/api/HTMLDOM0.index-frame.html)、[DOM1+2](http://www.aptana.com/reference/html/api/HTMLDOM2.index-frame.html)、[JavaScript 语言](http://www.aptana.com/reference/html/api/JSKeywords.index.html)、[核心](http://www.aptana.com/reference/html/api/JSCore.index-frame.html)、[HTML](http://www.aptana.com/reference/html/api/HTML.index.html)、[CSS](http://www.aptana.com/reference/html/api/CSS.index.html)
*   GotAPI - [DOM JavaScript](http://www.gotapi.com/jsdomw3s)、[HTML](http://www.gotapi.com/html)、[CSS、服务器端、多媒体、XML](http://www.gotapi.com/)
*   SELFHTML 法语：[DOM JavaScript](http://fr.selfhtml.org/javascript/index.htm) , [HTML](http://fr.selfhtml.org/html/index.htm) , [DHTML](http://fr.selfhtml.org/dhtml/index.htm) , [CSS](http://fr.selfhtml.org/css/index.htm) , [XML](http://fr.selfhtml.org/xml/index.htm) ,[服务器端](http://fr.selfhtml.org/)
*   SELFHTML 德语：[DOM JavaScript](http://de.selfhtml.org/javascript/index.htm) , [HTML](http://de.selfhtml.org/html/index.htm) , [DHTML](http://de.selfhtml.org/dhtml/index.htm) , [CSS](http://de.selfhtml.org/css/index.htm) , [XML](http://de.selfhtml.org/xml/index.htm) ,[服务器端](http://de.selfhtml.org/)
*   蓝莓 - [HTML](http://blooberry.com/indexdot/html/index.html) , [CSS](http://blooberry.com/indexdot/css/index.html)
*   HTMLDog - [HTML](http://htmldog.com/reference/htmltags/) , [CSS](http://htmldog.com/reference/cssproperties/)
*   W3schools：[DOM](http://www.w3schools.com/htmldom/dom_reference.asp)、[JavaScript](http://www.w3schools.com/jsref/default.asp)、[HTML、CSS、XML、多媒体、服务器端](http://www.w3schools.com/sitemap/sitemap_references.asp)^*
*   SSTECH - [HTML](http://www.thesstech.com/tutorials/html) , [JavaSCript](http://www.thesstech.com/tutorials/javascript) , [CSS](http://www.thesstech.com/tutorials/css)

^* W3Schools 提供的教程中信息的质量和准确性存在一些争议。然而，没有那么多人对参考部分提出异议。

* * *

相关问题，大多是以上链接的来源：

*   [什么是最好的在线 javascript/css/html/xhtml/dom 参考？](https://stackoverflow.com/questions/63918/what-is-the-best-online-javascript-css-html-xhtml-dom-reference)
*   [学习 JavaScript 的最佳资源](https://stackoverflow.com/questions/11246/best-resources-to-learn-javascript)
*   [好的 javascript 参考](https://stackoverflow.com/questions/458453/good-javascript-reference/458474)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-05T07:30:26.017

我发现[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/Web/Guide)非常有帮助。

史蒂夫

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T08:24:01.537

[MSDN有很多](http://msdn.microsoft.com/library/)[web 开发](http://msdn.microsoft.com/library/aa155073(en-us).aspx)的参考资料。它仅包含特定于 IE 的信息，这些信息可能是优势也可能是劣势，具体取决于您要查找的内容。以下是指向[HTML/CSS](http://msdn.microsoft.com/library/aa155133(en-us).aspx)（包括 DOM）、[JScript](http://msdn.microsoft.com/library/hbxc2t98(en-us,VS.85).aspx)（微软风格的 ECMAScript aka JavaScript）和[VBScript](http://msdn.microsoft.com/library/t0aew7h6(en-us,VS.85).aspx)的直接链接。该文档写得非常好，并且是 DOM/JavaScript 问题答案的重要来源，因为它们在浏览器中往往是相同的。

此外，作为参考，我们不要忘记[HTML](http://www.w3.org/html/)、[CSS](http://www.w3.org/Style/CSS/)和[W3C](http://www.w3.org/)指定的无数其他标准的官方规范。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T08:46:58.940

[Dev Opera](http://dev.opera.com/)是一个很好的资源，尤其是[Web 标准课程](http://dev.opera.com/articles/wsc/)。另一种是[HTML 狗](http://htmldog.com/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-09-18T04:29:23.330

[非官方在线 ECMAScript-262 第 3 版](https://bclary.com/log/2004/11/07/)。[规范](https://bclary.com/log/2004/11/07/)和[带注释的 ECMAScript 5.1](http://es5.github.com/)非常有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T07:18:10.463

我总是查看[www.zvon.org](http://www.zvon.org)，尤其是[参考](http://www.zvon.org/index.php?nav_id=references&mime=html)部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-05T08:32:14.357

[HTML Code Tutorial](http://www.htmlcodetutorial.com/)是一个不错的网站，它的[Quick List](http://www.htmlcodetutorial.com/quicklist.html)页面有时对我有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T09:33:24.350

一个非常有用的 Firefox 工具（安装了 Firebug） [http://tools.sitepoint.com/codeburner/](http://tools.sitepoint.com/codeburner/)

快速找到有关站点参考的文档。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-05T09:46:41.713

> 学习 JavaScript 的最佳资源

我一直在追赶现代 Javascript 技术，并通过运行、阅读和编辑来自 userscripts.org 的 GreaseMonkey 脚本来学习一些方便的技巧。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-05T18:32:42.997

虽然不是直接的参考站点，但 LearningLine 将其中许多站点纳入他们的课程以及[http://caniuse.com/](http://caniuse.com/)之类的站点。

[https://learninglineapp.com/schedule](https://learninglineapp.com/schedule)

以下是一些很好的起点课程：

*   [基本的 jQuery](https://learninglineapp.com/courses/14/client-side-programming-with-knockoutjs)
*   [HMTL5 深入](https://learninglineapp.com/courses/8/hmtl5-in-depth)
*   [JavaScript 入门](https://learninglineapp.com/courses/32/getting-started-with-javascript)
*   [使用 KnockoutJS 进行客户端编程](https://learninglineapp.com/courses/14/client-side-programming-with-knockoutjs)

干杯，迈克尔

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-11T07:19:38.873

我发现[AeroTwist](https://aerotwist.com/blog/%20%22AeroTwist)对于学习渲染性能非常有用。

# symfony1 - 将 Symfony 框架从我的沙盒应用程序中移出

> ID：823722
> 
> 赞同：0
> 
> 时间：2009-05-05T07:17:48.933
> 
> 标签：symfony1

我在开发中使用[Symfony Sandbox 结构](http://www.symfony-project.org/book/1_2/03-Running-Symfony)。现在，考虑到未来的升级，我想将 Symfony 应用程序从我的应用程序中分离出来，并将其放在一个单独的文件夹中。唯一的问题是我的应用程序和 Symfony 似乎无可救药地混在一起了。

任何人都知道如何将 Symfony 引擎从我的沙盒应用程序中分离出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T07:41:47.957

正确[安装](http://www.symfony-project.org/installation/1_2)symfony 后，您只需将路径`config/ProjectConfiguration.class.php`从

`require_once dirname(__FILE__).'/../lib/symfony/autoload/sfCoreAutoload.class.php';`

到你的新 symfony 库目录，像这样：

`require_once '/usr/share/php/symfony/autoload/sfCoreAutoload.class.php';`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-05T16:48:36.363

我解决了这个问题并在[这里](http://itscommonsensestupid.blogspot.com/2009/05/move-symfony-framework-out-of-sandbox.html)写了博客。

# c# - C# 中的堆栈容量

> ID：823724
> 
> 赞同：55
> 
> 时间：2009-05-05T07:18:10.867
> 
> 标签：c#, .net, clr, stack

有人可以告诉我 C# 中的堆栈容量是多少。

我正在尝试使用包含 30,000 个项目的数组来形成一个 3D 网格封闭对象。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2009-05-05T07:21:05.010

.NET 应用程序的默认堆栈大小为 1 MB（32 位 ASP.NET 应用程序的默认堆栈大小为 256 KB，64 位 ASP.NET 应用程序的默认堆栈大小为 512 KB），但您可以更改它。对于应用程序，您可以通过修改可执行文件的 PE 标头来更改默认大小。对于您创建的线程，您可以使用采用堆栈大小的构造函数重载。

但正如 Anton Tyjhyy 在他的回答中指出的那样，数组是引用类型，因此位于堆上（即使数组恰好包含一堆值类型）。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-05-05T07:30:21.337

您的数组将位于堆上，堆栈大小与您的情况无关。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-06T01:49:46.077

如果要检查当前 .NET 程序集的值，则可以使用`ILDASM`Visual Studio 命令提示符附带的命令来完成。启动该工具后，打开程序集，然后转到`View -> Headers`菜单。现在向下滚动到`PE Optional Header (32 bit)`新打开的`Headers`窗口中的部分。您将看到两个字段：

1.  堆栈保留的大小 - 这是不言自明的。这是分配给您的程序/应用程序中创建的任何线程的默认堆栈内存大小。
2.  堆栈提交的大小 - 提交的堆栈空间是 - （从[这里](https://stackoverflow.com/a/28658130/465053)引用 Hans Passant ）

> 所述空间保留在操作系统的页面文件中，因此在需要时可以随时换出堆栈。

[![在此处输入图像描述](https://i.stack.imgur.com/mgUbE.png)](https://i.stack.imgur.com/mgUbE.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-20T20:56:08.957

要使用堆栈来存储数组，您必须使用带有指针和 stackalloc 的不安全代码来在堆栈上分配所需的内存空间。

# php - 如何在 Zend Framework Router Regex 中检测负数

> ID：823727
> 
> 赞同：0
> 
> 时间：2009-05-05T07:18:57.013
> 
> 标签：php, zend-framework

我有以下 .ini 配置适用于正整数，但不适用于负整数。

```
routes.nd.type = "Zend_Controller_Router_Route_Regex"
routes.nd.route = "news/(\d+)/d"
routes.nd.defaults.controller = "news"
routes.nd.defaults.action = "display"
routes.nd.map.id = 1 
```

如何让它检测负整数？显然`\d+`忽略了负数。

在 ZF 文档中找不到这个。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T07:33:13.610

```
Negative values:
"news/(-\d+)/d" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T20:39:05.700

正值或负值：

```
"news/(-?\d+)/d" 
```

# tsql - 如何在 Sybase 中查询服务器选项的值？

> ID：823730
> 
> 赞同：1
> 
> 时间：2009-05-05T07:21:21.093
> 
> 标签：tsql, sybase, option

例如，如果我想知道`quoted_identifier`服务器选项的当前值，有没有可以给我这个信息的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T02:39:08.733

一些会话级选项可通过@@options 变量作为varbinary 提供给您。有关位掩码解释的一些指导由

[http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/41423;pt=42621](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/41423;pt=42621)

和

[http://www.isug.com/Sybase_FAQ/ASE/code/sp_helpoptions.sql](http://www.isug.com/Sybase_FAQ/ASE/code/sp_helpoptions.sql)

对于未记录的会话选项（例如quoted_identifier），您可能不得不求助于实验。我在 Solaris x86 Sybase 15 实例上运行以下命令，发现“右数第三位”发生了变化（从零开始计数）

这是一个有趣的问题，在我担任 Sybase 管理员七年左右的时间里，我从未想到过这个问题。

pjjH

```
262:1> 将quoted_identifier 设置为关闭
262:2> 去
263:1> 选择@@选项
263:2> 去

 --------------------------
 80210000800f0144030010

（受影响的 1 行）
264:1> 将quoted_identifier 设置为
264:2> 去
265:1> 选择@@选项
265:2> 去

 --------------------------
 80210001800f0144030018

（受影响的 1 行）

选择@@options 作为选项进入#foo

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T07:04:08.040

sp_dboption 可以为您提供可设置选项的列表或实际设置选项：-

列出可设置的选项

```
exec sp_dboption 
```

设置一个选项

```
sp_dboption pubs2, "unique auto_identity index", true 
```

如果您只想列出在 db 上设置的选项，可以使用 sp_helpdb

```
sp_helpdb pubs2 
```

这会产生一个多页结果集，但第一组有一个名为“状态”的列，它显示了指定数据库中的所有“真实”选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-31T13:25:59.573

可以查询所选选项上设置的当前值。

它在`sp_helpdb`程序代码中。

您可以检查`sp_helptext` `sp_helpdb`sybsystemprocs 数据库，但它非常复杂。

# windows - autorun.inf：如何获取驱动器号？

> ID：823737
> 
> 赞同：3
> 
> 时间：2009-05-05T07:24:59.340
> 
> 标签：windows, autorun

我已通过以下方式将此条目添加到 USB 记忆棒的上下文菜单中`autorun.inf`：

```
[AutoRun]
shell\pageant=Activate SSH Key
shell\pageant\command=PuTTY\pageant.exe PuTTY\davids.ppk 
```

两者`PuTTY\pageant.exe`和`PuTTY\davids.ppk`都是 U 盘上的文件，应该从那里获取。

当我从棒的根部在外壳中运行它时，它按预期工作。但是从菜单启动它会尝试从中加载密钥`C:\Windows\system32\PuTTY\davids.ppk`（使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)检查）。

尝试使用简单的 cmd 脚本会导致以下输出：

```
    C:\Windows\system32>cd PuTTY
    Das System kann den angegebenen Pfad nicht finden。

    C:\Windows\system32>pageant.exe davids.ppk
    Der Befehl "pageant.exe" ist entweder falsch geschrieben oder
    konnte nicht gefunden werden。

```

有没有办法让它正常工作？我想它应该能够传递驱动器号或让资源管理器使用棒作为工作目录，但我不知道如何。由于我想在旅途中使用棒，我宁愿避免硬编码我的本地驱动器号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T07:56:31.027

我认为最简单的解决方案是创建一个批处理文件来为您执行此操作。像这样命名的东西`activatekey.cmd`：

```
REM switch to the directory containing this script
for %%a in (%0) do cd /D %%~da%%~pa

cd PuTTY
pageant.exe davids.ppk 
```

将文件`activatekey.cmd`放入您的 U 盘中，然后将其更改`autorun.inf`为：

```
[AutoRun]
shell\pageant=Activate SSH Key
shell\pageant\command=activatekey.cmd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T07:32:06.140

它似乎读取“路径”系统变量。:(您可以将驱动器添加到路径但获取驱动器号是问题。:-(

更新 1：您可以使用 VB 脚本获取驱动器号。

更新 2：是的，我认为你可以做到。检查这个[页面](http://www.computing.net/answers/programming/coping-files-from-a-removable-drive/15468.html)。

更新 3：我测试了脚本。它工作得很好。

```
Dim  oDrive
Set oFSO = WScript.CreateObject("Scripting.FileSystemObject")
For Each oDrive In oFSO.Drives
WScript.Echo "Drive Letter" , oDrive.DriveLetter
WScript.Echo "Drive Type" , oDrive.DriveType
Next 
```

使用一些文件存在检查方法来区分多个 USB 驱动器。

# algorithm - 三叉树与哈希表

> ID：823744
> 
> 赞同：14
> 
> 时间：2009-05-05T07:27:04.280
> 
> 标签：algorithm, hashtable, ternary-search-tree

我需要知道[三叉树是否](http://en.wikipedia.org/wiki/Ternary_search_tries)[比哈希表](http://en.wikipedia.org/wiki/Hash_table)更好。

我在回答[另一个问题](https://stackoverflow.com/questions/822752/should-i-learn-haskell-or-f-if-i-already-know-ocaml/)时遇到了这个问题，有人说三叉树通常比哈希表快。我发现这很难相信，所以我决定研究一下。

[普林斯顿的这个网站](http://www.cs.princeton.edu/~rs/strings/)似乎是这种信念的来源。我查看了描述为 O(log n + k) 的算法，其中 n 是存储的单词数，k 是密钥的长度。

在我看来，这可能更快的唯一方法是如果您经常搜索尚未存储的元素。另一件困扰我的事情是，不连续爬取 trie 往往会导致您点击已换出的页面，但这是否是主要影响只能通过基准测试才能看到。

现在我知道它们可能各有利弊，如果是这样，我想知道它们是什么。基准测试也很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T07:53:56.400

以下是我从您提供的普林斯顿链接可访问的[Dobbs 博士文章中收集到的内容：](http://www.ddj.com/windows/184410528?pgno=1)

1.  在某些搜索问题上，三叉搜索树比哈希表快 10%。它们有时速度较慢 - 很大程度上取决于所使用的机器。
2.  TRT 是一种自定义数据结构，由计算机科学界的两位最优秀的头脑 - Jon Bentley 和 Robert Sedgewick 调整，他们都编写了[很好的](http://www.cs.bell-labs.com/cm/cs/pearls/) [教科书](http://www.informit.com/store/product.aspx?isbn=0201361205)，并在实际编程方面做了他们的贡献。哈希表被认为是普通的。
3.  正如 Hao Wooi Lin 所说，所涉及的常数很重要。
4.  总的来说，这取决于您要解决的问题。在许多编程语言中，更快的开发时间和对哈希表的几乎无处不在的支持通常比运行时间提高 10% 更重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-07T03:16:22.553

回答这个问题的唯一方法是凭经验。答案取决于您的实现细节、您执行的搜索类型、您拥有的硬件以及您使用的编译器。您可以从普林斯顿复制 C 代码。如果你想尝试一种函数式语言，标准 ML 有哈希表（查看[SML/NJ](http://www.smlnj.org)），这里有一些用于三元搜索树的 ML：

```
type key = Key.ord_key
type item = Key.ord_key list

datatype set = NODE of { key : key, lt : set, eq : set, gt : set }
             | LEAF

val empty = LEAF

fun member (_, LEAF) = false
  | member (h::t, NODE {key, lt, eq, gt}) =
      (case Key.compare (h, key)
         of EQUAL   => member(t, eq)
          | LESS    => member(h::t, lt)
          | GREATER => member(h::t, gt))
  | member ([], NODE {key, lt, eq, gt}) =
      (case Key.compare (Key.sentinel, key)
         of EQUAL   => true
          | LESS    => member([], lt)
          | GREATER => member([], gt))

exception AlreadyPresent

fun insert(h::t, LEAF) =
      NODE { key = h, eq = insert(t, LEAF), lt = LEAF, gt = LEAF }
  | insert([], LEAF) =
      NODE { key = Key.sentinel, eq = LEAF, lt = LEAF, gt = LEAF }
  | insert(h::t, NODE {key, lt, eq, gt}) =
      (case Key.compare (h, key)
         of EQUAL   => NODE {key = key, lt = lt, gt = gt, eq = insert(t, eq)}
          | LESS    => NODE {key = key, lt = insert(h::t, lt), gt = gt, eq = eq}
          | GREATER => NODE {key = key, lt = lt, gt = insert(h::t, gt), eq = eq})
  | insert([], NODE {key, lt, eq, gt}) =
      (case Key.compare (Key.sentinel, key)
         of EQUAL   => raise AlreadyPresent
          | LESS    => NODE {key = key, lt = insert([], lt), gt = gt, eq = eq}
          | GREATER => NODE {key = key, lt = lt, gt = insert([], gt), eq = eq})

fun add(l, n) = insert(l, n) handle AlreadyPresent => n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T08:02:56.220

log(n) 增长得足够慢，因此在考虑常数因素时，它通常需要大量数据才能比 O(1) 算法慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T07:45:38.057

这对我来说也很有趣。但是从我阅读的 wiki 中，它声称三叉树在大多数搜索问题上都更快。这并不奇怪，因为即使哈希表具有 O(1) 查找，您仍然需要时间进行哈希处理。所以它不是真正的 O(1)，而是更像 O(k)，其中 k 不依赖于 N（数据结构中的项目数）。这可能会给人一种哈希表更快的印象。但是，如果您正在处理大型结构，k 很快就会加起来，并且会出现哈希表的搜索速度变得比三叉树慢的点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-04T06:57:48.167

你可以看看 tstdb：[http ://code.google.com/p/tstdb/](http://code.google.com/p/tstdb/)

这个 kv-store 基于三元搜索树，它与 Memcached 兼容。此外，tstdb 支持前缀搜索和范围查询，这些都是由三元搜索树提供的。

# emacs - 如何让 Emacs 自动缩进我的 C 代码？

> ID：823745
> 
> 赞同：22
> 
> 时间：2009-05-05T07:27:40.050
> 
> 标签：emacs

我刚刚开始对 emacs 有一种感觉，但我对按回车键时不缩进的倾向感到沮丧。我知道如果我按 Cj 它会这样做，但我不能养成那个习惯。我就是不能。我需要按回车键，而且我讨厌每次都重新打标签。

我进入选项，发现 C 模式钩子和 C++ 模式钩子等——他们定义了两个键映射（10 和 13，我记得 0A 和 0D 是 CR/LF，因为我在汇编中经常使用它们）—— - 我想，因为一个说“ `(lambda nil (define-key lisp-mode-map [13] (quote newline-and-indent))`”，另一个相同，但`(quote newline)`相反，我只是把 -and-indent 放在它的末尾并认为它会起作用。

但它没有：我设置并保存它，尝试过，但无济于事。重新启动emacs，仍然没有成功。如何使其缩进我的代码？emacs 需要一个 lisp 学位来配置它以满足您的基本需求，这真是太疯狂了。

另外，作为一个附带问题：如何从*剪贴板复制和粘贴？*杀戮/拉扯很方便，但我讨厌每次我想粘贴到其他地方时都去编辑->复制。

**- 编辑 -**

好的，我将以下几行放入我的 .emacs 中，它起作用了：

```
(add-hook 'c-mode-common-hook (lambda ()
      (local-set-key (kbd "RET") 'newline-and-indent)))
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-06T12:00:43.537

`~/.emacs`我将返回键设置为在我的文件中全局充当换行符和意图：

```
(global-set-key "\C-m" 'newline-and-indent) 
```

为我工作。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-05T08:04:29.103

看看[emacswiki - autoindent](https://www.emacswiki.org/emacs/AutoIndentation)

按照那里的建议，将以下代码放入您的 .emacs

```
(defun set-newline-and-indent ()
  (local-set-key (kbd "RET") 'newline-and-indent))
(add-hook 'c-mode-hook 'set-newline-and-indent) 
```

您可以自定义变量 C Default Styl。在您的 emacs 中，转到 Options->Customize Emacs->Specific Option，然后键入 c-default-style 并设置为您的选择。通过这样做，您无需按 TAB。从行首开始输入，然后点击“;” ，它将自动缩进。

希望这可以帮助

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-07T11:53:43.840

如果要缩进整个 c/c++ 文件，只需执行

1.  标记所有内容：CTRL-x h
2.  按 T​​ab

顺便说一句，这也适用于 xml、python 代码和其他类型。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-05T08:48:26.533

除了其他建议之外，请尝试`C-c C-a`切换自动换行功能，以便您的模式行读取`C/la`. 那么你甚至大部分时间都不需要按 Enter ；相反，当您键入分号或大括号时，会插入换行符并且您的代码会缩进。有时您确实需要按 Enter 键，并且不会自动缩进（除非您`RET`按照另一个答案中的建议重新绑定），但是如果您只是开始输入下一行，您可能会注意到当您输入一些标点符号时它会正确缩进特点。

要开始使用“Lisp 学位”，`C-h i`请在 Info 浏览器中键入并转到“CC Mode”节点（它与 Emacs 的节点分开；键入`d`Directory 并在那里找到 CC Mode）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T07:40:31.517

尝试 [enter]、(kbd "enter") 或 (read-kbd-macro "enter")，它们都做了不同的事情；）

另外，对我来说，复制/粘贴就可以了。您可以尝试运行 emacs -q，看看它是否有效？如果是这样，则可能是您的 .emacs 有问题。

我也有：

```
(when window-system
  ;; use extended compound-text coding for X clipboard
  (set-selection-coding-system 'compound-text-with-extensions)) 
```

但这可能会做其他事情；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T08:08:07.987

复制：移动到开始，CTRL-空格，移动到结束，ALT-W

粘贴：CTRL-y

在 unix 上：鼠标左键复制，鼠标右键粘贴

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-12T13:20:30.980

最简单的方法是使用`electric-indent-mode`. 如果要手动启用它，只需执行

```
M-x electric-indent-mode 
```

为了自动启用它，请在您的`.emacs`:

```
(electric-indent-mode) 
```

这将是 Emacs 24.4 中的默认设置。

# security - 安全性（又名权限）和 Lucene - 如何？应该这样做吗？

> ID：823746
> 
> 赞同：19
> 
> 时间：2009-05-05T07:27:50.080
> 
> 标签：security, lucene

首先是我的问题的一些背景。

*   单个实体可以具有读取权限。
*   如果用户未通过*读取*权限检查，他们将看不到该实例。

该问题涉及引入 Lucene 并执行简单地返回匹配实体实例列表的搜索。然后，我的代码将需要一一过滤实体。这种方法效率极低，因为存在这样的情况，即用户可能只能看到一小部分，并且检查许多以返回少数并不理想。

开发人员将使用什么方法或如何解决这个问题——记住索引和搜索是使用 Lucene 执行的？

**编辑**

**定义**

*   一个用户可能属于许多组。
*   一个角色可能有很多组——这些可以改变。
*   权限具有角色 - （间接）。
*   X 可以有读权限。
*   角色的定义可以随时更改。

**索引**

*   在索引时添加组集（扩展权限）可能会导致当角色的成员组列表更改时定义变得不同步。
*   我希望避免在权限/角色的定义发生更改时重新索引 X。

**安全检查**

*   要通过权限检查，用户必须属于一组组中的组，该组属于给定权限的角色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T07:57:37.327

这取决于与您的上下文相关的不同安全组的数量以及安全性如何应用于您的索引数据。

我们有一个类似的问题，我们通过以下方式解决了这个问题：在索引时，我们将允许的组添加到文档中，在搜索时，我们添加了一个布尔查询，其中包含用户所属的组。这在我们的场景中表现良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T08:06:52.047

这取决于您的安全模型。如果权限很简单 - 假设您有三类文档 - 最好为每个类构建一个单独的 Lucene 索引，并在用户可以看到多个类时合并结果。 [Solr 安全 Wiki](http://wiki.apache.org/solr/SolrSecurity)提出了与 HakonB 的建议类似的建议 - 将用户凭据添加到查询中并由他们进行搜索。另请参阅[Lucene 用户组中的此讨论](http://www.lucidimagination.com/search/document/2c0aaac184910a7d/lucene_security_advice#efd417c4124aa5d1)。另一种策略是用一个单独的安全类包装 Lucene 搜索，该安全类对 Lucene 进行额外的过滤。如果您可以使用数据库获取权限，它可能会更快。

编辑：我看到你有一个相当复杂的权限系统。您的基本设计选择是在 Lucene 内部还是在 Lucene 外部实现它。我的建议是使用 Lucene 作为搜索引擎（它的主要优势）并使用另一个系统/应用程序来确保安全。如果您无论如何选择使用 Lucene 来保证安全性，我建议您好好学习[Lucene 过滤器](http://wiki.apache.org/lucene-java/FilteringOptions)，并使用 bitset 过滤器来过滤查询的结果。它确实存在您列出的必须保持更新权限的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-08T15:50:58.347

我建议有两种文件：

1) Real_documents 的字段名为：“DocumentID”

2) 具有以下字段的安全文档：“Role”“Groups”“Users”“PermisionId”“DocumentsIds”

那么伪代码可能是：

```
 Field[] docIds =searcher.search("Users", "currentUser").getFields("DocumentIds");
   TermsFilter filter = new TermFilter();

   foreach(field:docIDs){
       filter.add(new Term(field.field(),field.text());
   }
   searcher.search(query.getWeight(searcher), filter, numberOfDocuments); 
```

由于 Lucene 的搜索速度非常快，因此进行两次搜索真的很容易。这样，您还可以为每个用户提供更好的 tf-idf。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-11-04T16:05:39.330

正如 Yuval 所提到的，拥有独立于 lucene 索引的权限机制可能是值得的。

一种方法是实现你自己的[`Collector`](http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/Collector.html)，这将过滤掉用户不应该访问的结果。

# java - 如何将数据从 JSF 传递到 Java Applet

> ID：823747
> 
> 赞同：1
> 
> 时间：2009-05-05T07:28:01.157
> 
> 标签：java, jsf, jakarta-ee, applet, icefaces

我正在使用 JSF 和 ICEFaces 构建一个 Web 应用程序。现在，我已将 Java Applet 集成到其中一个 JSF 页面中。

问题是，如何将存储在支持 bean 中的信息传递给小程序？我认为我不需要双向通信。我正在使用 ICEFaces 输入组件收集数据。例如，点击按钮会导致小程序重新加载新收集的数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T07:47:59.643

最后我猜你的小程序应该代表你模型的某种视图。因此，在 MVC 上下文中，您的 JSF 将成为您的视图/控件，并且您将拥有一些后端模型。您的小程序是此模型的另一个视图，因此您应该让您的小程序成为模型上的观察者或侦听器，并且当 JSF 对模型进行更改时，您应该触发一个事件/通知观察者，表示模型已更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-11T11:52:46.117

您的 Applet 标签中有类似以下的内容吗？

```
<param name="welcomeMessage" value="<h:outputText value="#welcomeMessage"/>"> 
```

（请原谅任何 JSF 不准确之处）

然后在小程序中正常使用[getParameter 。](http://java.sun.com/javase/6/docs/api/java/applet/Applet.html#getParameter(java.lang.String))

# vim - 如何在 Vim 中将文本换行到一定长度？

> ID：823754
> 
> 赞同：107
> 
> 时间：2009-05-05T07:30:54.893
> 
> 标签：vim, indentation

先说相对措施。我的 Vim 看起来像：

```
aaaaaaaaaaaaa 
bbbbbbbbbbbbb 
ccccccccccccc 
etc 
```

我希望它更小：

```
aaaaa
aaaaa
bbbbb
bbbbb
ccccc
ccccc
etc 
```

我怎么才能得到它？我怎样才能设置这样一个块的长度？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2009-05-05T12:14:37.113

你实际上可以做两件事：

1.  通过插入换行符，让 vim 格式化（即更改）您的文本以具有更短的行
2.  保持线条不变，但*将*它们包裹起来

你要哪个？

选项 1 将通过设置来实现`textwidth`（例如`:set textwidth=30`（来自 Swaarop 的回答））。然后，您可以通过突出显示文本（在可视模式下）并键入来重新格式化文本`gq`。（`textwidth`可简写为`tw`，因此`:set tw=30`。）

选项 2 可以通过运行`:set wrap`/来切换`:set nowrap`。这将换行对于窗口来说太长的行。

两者都是独立的。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2009-05-05T12:27:03.810

一旦你设置了'textwidth'，你可以选择带有可视模式的文本，然后按 gq 来很好地包装它（你也可以在一些旧的/旧的配置上使用 Q）。

一些有用的提示：

```
gqq (wrap the current line)
gq} (wrap this 'paragraph', i.e. until the next blank line)
:h gq 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-05-05T07:37:37.513

使用 fold(1) 是一种可能性：

```
:%!fold -w5 
```

结果：

```
aaaaa
aaaaa
aaa 
bbbbb
bbbbb
bbb 
ccccc
ccccc
ccc 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-05T11:47:06.040

```
:set textwidth=30 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-16T00:44:43.083

如果您有没有空格的文本要以一定长度断开，则既不需要使用 external`fold`也不需要编写自己的`formatexpr`.

`:%s/\(.\{80\}\)/\1\r/g`

将在 80 个字符处断开所有行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-09T03:03:44.247

首先，将 textwidth 设置为 5

```
:set tw=5 
```

然后，按`gqap`格式化段落

# c# - 从网络浏览器获取 url

> ID：823755
> 
> 赞同：-2
> 
> 时间：2009-05-05T07:31:25.157
> 
> 标签：c#

如何从当前在机器上运行的 Web 浏览器检索列表框的 URL。使用 c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T07:38:59.663

看到这个[问题](https://stackoverflow.com/questions/352236/reading-from-a-text-field-in-another-applications-window/365159)，它适用于 c++，但它可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:53:09.330

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindowEx(IntPtr parentHandle,
    IntPtr childAfter, string className, IntPtr windowTitle);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    public static extern int SendMessage(IntPtr hWnd,
        int msg, int wParam, StringBuilder ClassName);

    private static string GetURL(IntPtr intPtr, string programName, out string url)
    {
        string temp=null;
        if (programName.Equals("chrome"))
        {
            var hAddressBox = FindWindowEx(intPtr, IntPtr.Zero, "Chrome_OmniboxView", IntPtr.Zero);
            var sb = new StringBuilder(256);
            SendMessage(hAddressBox, 0x000D, (IntPtr)256, sb);
            temp = sb.ToString();
        } 
        if (programName.Equals("iexplore"))
        {
            foreach (InternetExplorer ie in new ShellWindows())
            {
                var fileNameWithoutExtension = Path.GetFileNameWithoutExtension(ie.FullName);
                if (fileNameWithoutExtension != null)
                {
                    var filename = fileNameWithoutExtension.ToLower();
                    if (filename.Equals("iexplore"))
                    {
                        temp+=ie.LocationURL + " ";
                    }
                }
            }
        }
        if (programName.Equals("firefox"))
       {
            DdeClient dde = new DdeClient("Firefox", "WWW_GetWindowInfo");
            dde.Connect();
            string url1 = dde.Request("URL", int.MaxValue);
            dde.Disconnect();
            temp = url1.Replace("\"","").Replace("\0","");
        }
        url = temp;
        return temp;
    } 
```

请执行以下操作以在您的项目中从 VS.NET 添加参考 > Com > Microsoft.Internet.Controls 来运行此代码

从[http://ndde.codeplex.com/](http://ndde.codeplex.com/)下载DdeClient 类的 bin 并将其添加到您的项目中

# .net - 在 .NET 3.5 中验证架构时加载 XDocument

> ID：823756
> 
> 赞同：8
> 
> 时间：2009-05-05T07:31:29.743
> 
> 标签：.net

输入是 xml 作为字符串，我有一个 XSD 架构要验证。

我希望在将 xml 加载到 XDocument 时针对 XSD 模式验证 xml（因为我需要在之后使用 Linq 进行解析，所以需要）。

任何人都有一个小的代码片段？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-05T07:40:42.623

加载文档，然后使用[`XDocument.Validate`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.validate.aspx)，传入 an`XmlSchemaSet`来表示您想要验证的模式，并使用 a`ValidationEventHandler`对任何验证问题做出适当的反应。

有一篇带有完整示例和讨论的[MSDN 文章。](http://msdn.microsoft.com/en-us/library/bb387037.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-09-09T15:54:44.003

只是关于上述答案的注释。这是正确的，但可能会令人困惑。XDocument.Validate 是存在于 System.Xml.Schema 命名空间中的扩展方法。如果您不使用此命名空间，则 Validate 方法将不会出现在智能感知中。只是想我会帮助那些像我一样困惑的人。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-27T04:07:15.037

所以代码在这里。

来自 Jon Skeets 的回答和 MSDN [http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.validate.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.validate.aspx)

```
var xsdMarkup =
    @"<xsd:schema xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
<xsd:element name='Root'>
<xsd:complexType>
    <xsd:sequence>
    <xsd:element name='Child1' minOccurs='1' maxOccurs='1'/>
    <xsd:element name='Child2' minOccurs='1' maxOccurs='1'/>
    </xsd:sequence>
</xsd:complexType>
</xsd:element>
</xsd:schema>";
var schemas = new XmlSchemaSet();
schemas.Add("", XmlReader.Create(new StringReader(xsdMarkup)));

var doc1 = new XDocument(
    new XElement("Root",
                    new XElement("Child1", "content1"),
                    new XElement("Child2", "content1")
        )
    );

var doc2 = new XDocument(
    new XElement("Root",
                    new XElement("Child1", "content1"),
                    new XElement("Child3", "content1")
        )
    );

Console.WriteLine("Validating doc1");
var errors = false;
doc1.Validate(schemas, (o, e) =>
                            {
                                Console.WriteLine("{0}", e.Message);
                                errors = true;
                            });
Console.WriteLine("doc1 {0}", errors ? "did not validate" : "validated");

Console.WriteLine();
Console.WriteLine("Validating doc2");
errors = false;
doc2.Validate(schemas, (o, e) =>
                            {
                                Console.WriteLine("{0}", e.Message);
                                errors = true;
                            });
Console.WriteLine("doc2 {0}", errors ? "did not validate" : "validated"); 
```

# persistence - 设计 - 我如何在持久对象更改状态时处理它们的事件？

> ID：823763
> 
> 赞同：0
> 
> 时间：2009-05-05T07:34:54.697
> 
> 标签：persistence

也许这是一个愚蠢的问题，但我是一个新手开发者。

可以说，在一个数据驱动的 CRM 应用程序中，我有一个可以经历多个阶段的客户类型 - 即阶段 1 - 5。

作为客户更改阶段 - 事件应该触发。示例 - 当客户从第 2 阶段进入第 3 阶段时，会发送一封电子邮件，更新一些列表并执行一些计算。

我想象客户更改状态可能是应用程序用户通过某些图形界面手动更新客户的结果。

所以我想知道 - 我是否应该通过断言只有一种方法可以更新客户的阶段状态来处理这个问题，然后确保每当该操作完成时，都会执行一系列操作？

在我的想法（和场景）中，这意味着从关系数据库中检索客户，更新阶段字段，将客户保留下来，然后总是通过触发任何注册为依赖于特定阶段变化的操作来对此操作做出反应. 但是，如果我想对 10.000 个客户进行批量阶段更改，我不确定这是否明智。

对此有什么想法吗？我真的只是在寻找任何类型的输入 - 假设我完全一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T07:57:48.980

在许多情况下，最好在业务逻辑中有一个明确的函数来改变阶段。这应该是改变相位的唯一方法，而且是明确的。就像“ChangeCustomerPhase(Customer customer, Phase newPhase)。如果一切都可以自由更改，这使得处理跟踪更改变得更加简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:33:42.730

我认为拥有单独的功能是可以的，一个用于单个客户相变，另一个用于批量更改。后者将根据需要执行或不执行附加操作。它还可以以更有效的方式进行，甚至将动作或其中的一部分（例如发送电子邮件）排入队列以进行后台处理，如果附加动作很长并且需要及时完成阶段变化方式。

当相变是由于某些可能复杂的条件的出现而不是由于手动相变时，会出现另一个问题。然后你应该在你的业务逻辑的某个地方挂上一个条件检查，低到足以捕获所有影响阶段的更新操作。但正如您所写，情况并非如此，因为在您的情况下，相变是手动发出的。

# excel - Unable to access Excel's Application.ComAddIns property if there are no AddIns installed

> ID：823764
> 
> 赞同：2
> 
> 时间：2009-05-05T07:35:34.163
> 
> 标签：excel, com, vbscript, automation, wsh

This code snipped for the Windows Scripting Host displays the number of COM-AddIns currently installed into Excel.

It works fine except for when there are no COM-AddIns installed. I believe it should output a "0", but instead it raises an exception (code 800A03EC). Does anyone know why?

```
test.vbs

Set objExcel = CreateObject("Excel.Application")
WScript.Echo objExcel.ComAddIns.Count 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T18:08:32.490

Looks like a bug in Excel. You'll probably have to abuse VB's error handling to work around it.

```
On Error Resume Next
WScript.Echo objExcel.ComAddIns.Count
If Err And Err.Number = 1004 Then
    WScript.Echo "No add-ins"
End If
On Error GoTo 0 
```

# html - sIFR 3 - 选择器

> ID：823767
> 
> 赞同：0
> 
> 时间：2009-05-05T07:36:20.653
> 
> 标签：html, css, sifr, selector

我正在使用[sIFR 3](http://wiki.novemberborn.net/sifr3/)（测试版 436）。

我有一个简单的问题，但我无法找出解决方案。我想`<a>`直接通过它的类来选择一个 -tag，而不是像我现在所做的那样通过它的父级来选择：

```
sIFR.replace(din, {
   selector: '.mainmenu'
   ,css: [
     '.sIFR-root { font-size:13px; text-transform:uppercase; cursor:pointer; text-align:center }'
     ,'a { text-decoration: none; color: #FFFFFF; }'
     ,'a:link { color: #FFFFFF; }'
     ,'a:hover { color: #CCCCCC;}'
   ]
   ,transparent: true
  }
); 
```

`".mainmenu"`是`<span>`包含 的类`<a>`。但有时不能使用这种方法，需要`<a>`直接调用-tag。我在网上找到的所有例子似乎都使用了上面的方法。

谁能帮我写我的选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T18:48:30.897

您不能`<a>`直接替换，*必须*替换父元素才能使链接跨浏览器工作。当然，您可以使用不同的 CSS 选择器来获取父元素。

# c# - 自定义 log4net appender 将文本直接输出到 asp.net 控件（自定义控件、标签等）的一个很好的例子？

> ID：823784
> 
> 赞同：0
> 
> 时间：2009-05-05T07:43:05.270
> 
> 标签：c#, asp.net, debugging, log4net

我确实有 db appender 并且知道如何将输出获取到自定义“日志记录”页面......这个想法是有一个快速而肮脏的开关来写入例如 Response 对象......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-07T08:58:15.713

这听起来确实像一个肮脏的黑客，但你可以使用 MemoryAppender 摆脱它。下面是一些关于如何获取日志数据的示例代码：

```
var memoryAppender = (MemoryAppender)LogManager.GetRepository()
    .GetAppenders().Single(x => x.Name == appenderName);

var events = memoryAppender.GetEvents(); 
```

从 appender 中选择最新事件进行渲染后，您可能应该做一个

```
memoryAppender.Clear(); 
```

# sharepoint - 筛选人员选择器

> ID：823785
> 
> 赞同：0
> 
> 时间：2009-05-05T07:43:52.663
> 
> 标签：sharepoint, filter

我有一些客户网站，并且我有一个人员选择器的问题列表。我只想显示有权访问他们自己公司的客户网站的人。我不希望其他客户看到其他公司的客户。

我试过了，但没有任何效果：

```
stsadm -o setproperty –url http://extranet.company.com/sites/project1 –pn peoplepicker-onlysearchwithinsitecollection –pv yes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-02-25T16:11:20.540

不幸的是，[peoplepicker- **searchadcustomfilter**](http://technet.microsoft.com/en-us/library/cc263452.aspx)适用于整个 Web 应用程序，即使我在 URL 参数中指定了网站集。

```
stsadm –o setproperty –propertyname peoplepicker-searchadcustomfilter -propertyvalue "(|(userPrincipalName=*mycompany.com)(memberof=CN=client_users,OU=client_Users,OU=Extranet,DC=client,DC=int))" -url http://myserver/sites/site1 

stsadm -o getproperty -pn peoplepicker-searchadcustomfilter -url http://myserver/sites/site1
stsadm -o getproperty -pn peoplepicker-searchadcustomfilter -url http://myserver/sites/site2 
```

当我运行上述程序时，我希望看到带有自定义 LDAP 查询的 site1 和未应用过滤器的 site2。但相反，我在此 Web 应用程序中的所有网站集上看到了自定义 LDAP 查询。真可惜。

看起来微软需要澄清[文档](http://technet.microsoft.com/en-us/library/cc263452.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-07T10:41:50.283

stsadm 命令 peoplepicker-onlysearchwithinsitecollection 将仅显示属于该网站集成员的人员，限制用户的更好方法是使用 stsadm 命令：

[peoplepicker-searchadcustomfilter](http://technet.microsoft.com/en-us/library/cc263452.aspx)

所以：

stsadm -o setproperty -url [http://contoso](http://contoso) -pn peoplepicker-searchadcustomfilter -pv（LDAP 查询）

这使您可以指定 LDAP 查询，可以根据您希望的任何条件返回任何 AD 用户或组。

# wpf - 隐藏wpf listview的列

> ID：823789
> 
> 赞同：9
> 
> 时间：2009-05-05T07:47:39.173
> 
> 标签：wpf, listview

如何使 wpf listview 的列不可见？（一种方法是将宽度属性设置为最小长度，但这不是正确的解决方案）有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-05T08:37:25.000

[这里](http://i-zaak.eu/Lists/Posts/Post.aspx?ID=5)有一个非常简单的解释方法。

查找并删除您的列：

```
var temp = myGridView.Columns[0];
myGridView.Columns.RemoveAt(0); 
```

在视图中重新插入列：

```
myGridView.Columns.Add(temp );
temp.Width = 0;
temp.Width = Double.NaN; 
```

当您想要隐藏它时将其从列集合中删除，当您想要再次显示它时重新插入该列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-08T11:42:39.587

要隐藏 ListView 的标题，您可以通过在本地覆盖样式来修改 ColumnHeaderContainer 的 Visibility 属性。

```
<ListView>
<ListView.View>
    <GridView>
        <GridView.ColumnHeaderContainerStyle>
           <Style>
               <Setter Property="FrameworkElement.Visibility" Value="Collapsed"/>
           </Style>
        </GridView.ColumnHeaderContainerStyle>
        <GridView.Columns>
            ...
        </GridView.Columns>
    </GridView>
</ListView.View> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T03:28:00.643

我希望这会帮助某人：

我发现最好的方法是做这两件事：
1\. 将列的宽度设置为 0（这也可以在 GridViewColumnHeader 中完成） - 当您想再次显示该列时在代码中更改它。
2\. 将 GridViewColumnHeader 的 Visibility 设置为 Hidden - 如果您想再次显示该列，或者您甚至可以使用绑定，请在代码中设置它。

上面的第二项有助于使用户无法扩展该列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-01T12:14:02.017

要隐藏列，您可以将列宽设置为零，并禁用标题，如下所示：

设置 GridViewColumn Width 并将 GridViewColumnHeader IsEnabled 设置为 False。

例子：

```
<GridViewColumn Width="{Binding ColumnWidth, Mode=OneWay}">
<GridViewColumnHeader Content="Nº Item" IsEnabled="False" /> 
```

# javascript - Javascript 确认弹出窗口是，否按钮而不是确定和取消

> ID：823790
> 
> 赞同：117
> 
> 时间：2009-05-05T07:47:40.923
> 
> 标签：javascript, html, button, popup, confirm

Javascript 确认弹出窗口，我想显示是，否按钮而不是确定和取消。

我使用了这个 vbscript 代码：

```
<script language="javascript">
    function window.confirm(str) {
        execScript('n = msgbox("' + str + '","4132")', "vbscript");
        return (n == 6);
    }
</script> 
```

这仅适用于 IE，在 FF 和 Chrome 中，它不起作用。

是否有任何解决方法可以在 Javascript 中实现这一点？

我还想更改弹出窗口的标题，如 IE 中显示的“Windows Internet Explorer”，我想在这里显示我自己的应用程序名称。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2009-05-05T07:53:40.673

不幸的是，没有跨浏览器支持打开不是默认确定/取消对的确认对话框。您提供的解决方案使用 VBScript，它仅在 IE 中可用。

我建议使用可以构建基于 DOM 的对话框的 Javascript 库。试试 Jquery UI：http: [//jqueryui.com/](http://jqueryui.com/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-05T07:53:48.833

以跨浏览器方式完成此操作的唯一方法是使用 jQuery UI 之类的框架并创建自定义对话框：

**[jQuery 对话框](http://jqueryui.com/demos/dialog/)**

它的工作方式与内置确认弹出窗口的工作方式不同，但您应该能够让它做您想做的事情。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-12-12T08:39:28.630

您还可以使用[http://projectshadowlight.org/jquery-easy-confirm-dialog/](http://projectshadowlight.org/jquery-easy-confirm-dialog/)。它非常简单易用。只包含 jquery 通用库和一个文件：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/blitzer/jquery-ui.css" type="text/css" />
<script src="jquery.easy-confirm-dialog.js"></script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-05T07:53:51.173

您不能使用 confirm() 函数或类似函数执行此跨浏览器。我强烈建议您使用类似[jQuery UI 对话框](http://docs.jquery.com/UI/Dialog)功能的东西来创建 HTML 对话框。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-21T08:40:20.720

看看[http://bootboxjs.com/](http://bootboxjs.com/)

非常容易使用：

```
 bootbox.confirm("Are you sure?", function(result) {
  Example.show("Confirm result: "+result);
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-18T10:07:27.837

您可以使用的特色（但又小又简单）库是 JSDialog：[js.plus/products/jsdialog](http://js.plus/products/jsdialog)

下面是一个使用“是”和“否”按钮创建对话框的示例：

```
JSDialog.showConfirmDialog(
    "Save document before it will be closed?\nIf you press `No` all unsaved changes will be lost.",
    function(result) {
        // check result here
    },
    "warning",
    "yes|no|cancel"
); 
```

[JS 对话框演示截图](http://i.stack.imgur.com/rhc15.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-04T12:19:18.727

你可以使用sweetalert。

导入您的 HTML：

```
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script> 
```

并触发警报：

```
Swal.fire({
  title: 'Do you want to do this?',
  text: "You won't be able to revert this!",
  type: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'Yes, Do this!',
  cancelButtonText: 'No'
}).then((result) => {
  if (result.value) {
    Swal.fire(
      'Done!',
      'This has been done.',
      'success'
    )
  }
}) 
```

欲了解更多数据，请访问[sweetalert alert 网站](https://sweetalert2.github.io/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-09T09:59:11.080

1) 您可以在您的网站上下载和上传以下文件

```
<link href="/Style%20Library/css/smoothness/jquery.alerts.css" type="text/css" rel="stylesheet"/> 
```

2）之后你可以直接使用下面的代码

$.alerts.okButton = "是"; $.alerts.cancelButton = "否";

在 document.ready 函数中。

请尝试它会工作。

谢谢

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-10T10:57:15.390

Sweetalert2 提供不同类型的对话框。你也可以试试这个。 [https://sweetalert2.github.io/](https://sweetalert2.github.io/)

# java - JDialog 让主应用程序失去焦点

> ID：823795
> 
> 赞同：1
> 
> 时间：2009-05-05T07:51:52.893
> 
> 标签：java, swing

我想知道为什么我的 JDialog 将我的主应用程序推到后台。这意味着如果将显示 JDialog 并且用户单击“确定”或“取消”，则主应用程序将失去其焦点并将被推到后台。

经过调查，我发现只有在显示 JDialog 时禁用主框架时才会发生这种行为。

可以使用以下代码重现此行为：

```
 import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class FocusTest {

```
private JFrame frame;

public FocusTest() {
    frame = new JFrame();
    frame.setSize(200,200);
    JButton btn = new JButton("Open Dialog");
    btn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            callDialog(null, "title", "message");
        }
    });
    frame.add(btn);
    frame.setVisible(true);
}

private void callDialog(Component parent, String title, String message) {
    frame.setEnabled(false);
    Thread t1 = new Thread(new Runnable() {
        public void run() {
            JOptionPane optionPane = new JOptionPane("",
                    JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION);
                JDialog dialog = optionPane.createDialog(null, "");
                dialog.setVisible(true);
                frame.setEnabled(true);
        }
    });
    t1.start();
}

public static void main(String[] args) {
    new FocusTest();
} 
```

} 
```

如何避免主应用程序失去焦点？（不启用主框架）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T07:58:59.787

您可以将以下选项设置为 JDialog 类

```
//setUndecorated(true);
setFocusableWindowState(false);
setFocusable(false); 
```

为此，您可以创建自己的 JDialog 类。您只需从 JDialog 扩展并将代码放入 Constructor 调用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T11:11:23.990

看起来您想要一个简单的模型对话框（即弹出一个对话框，在关闭之前不允许用户做任何其他事情）。Java 使这变得非常简单——只需使用 JOptionPane 的静态方法来创建您想要的对话框。

尝试将 callDialog 函数体替换为：

```
int result = JOptionPane.showConfirmDialog(frame, message, title,
               JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE); 
```

您将在框架上出现一个是/否对话框，在用户单击“是”或“否”之前，您无法对框架进行任何操作。

如果这不能满足您的需求，请尝试调用 to `frame.toFront()`，这将使您`JFrame`回到前台。

# xml - 定义 Web API 的技术栈到底是什么？

> ID：823807
> 
> 赞同：0
> 
> 时间：2009-05-05T07:57:08.497
> 
> 标签：xml, soap, oauth, gdata-api, gdata

用于构建 Web API（例如 GData）的技术抽象级别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-10T12:05:55.950

值得一提的是，GDATA 本身主要是 Atom 发布协议 (RFC 5023) + 扩展（规范允许），并具有专有的身份验证方法。

因此，这是对 REST 的抽象，它添加了用于发布和编辑对象集合的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:20:08.083

Web 服务通常使用两种技术之一。

所谓的 REST API 使用 HTTP GET、PUT、DELETE 等来创建 Web 服务。例如，搜索引擎可以提供一个 API，您可以通过从 www.searchengine.apple 执行 HTTP GET 请求来搜索该 API，该请求返回苹果的所有结果。技术构建块是您熟悉的现有基本 Web 协议，HTTP、HTML 和服务器端、PHP、ASP 等。

或者，您可以使用 SOAP 和 WSDL 来定义基于定义的请求的基于 XML 的 API，这些请求可以采用许多参数，这些参数将返回响应。许多语言可以为服务导入 WSDL 文件并提供基于它的功能 API。这使得访问服务非常容易。

有关 WSDL 和 SOAP 的更多信息，我推荐 www.w3cschools.com

这两种方法各有利弊，我将留给您探索。

问候

# recursion - Clearcase 递归标记是否比逐元素标记更有效？

> ID：823810
> 
> 赞同：1
> 
> 时间：2009-05-05T07:58:06.077
> 
> 标签：recursion, label, clearcase

我在一个有大约 3700 个文件的项目上使用 Clearcase。在发布时，有些目录必须递归标记。这里的文件数约为 2400。其他目录中的文件被选择性地标记。我目前使用脚本标记文件以遍历文件列表并逐个标记文件。连接到以太网大约需要 20 分钟。

将标记过程分成两部分，一是递归标记，一是选择性标记，是否有效？递归标记是否快 1x、2x、..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T08:08:42.993

逐个文件的 ClearCase 操作总是……慢！

如果可以的话，您需要递归地应用您的标签（也就是说，如果给定树的所有文件都需要标签）。
还建议在动态视图上执行该操作，以避免与快照视图的更新状态（未更新或更新正在进行）相关的任何副作用

结果会更快（我没有准确的估计，*但至少*2 倍似乎是正确的）。

警告，您从中递归应用标签的目录必须是正确的版本（即[配置规范选择的版本](http://www-01.ibm.com/support/docview.wss?ratlid=cctocbody&rs=984&uid=swg21297834)）。

* * *

不要忘记标记的目的是识别一组*连贯*的文件（即一组不断发展并被标记为全部的文件）。这意味着“ `mklabel -rec`”总是比将标签放在单个文件上更好。
递归标签不会遗漏任何文件，从列表中放置在文件上的标签可能会导致集合不完整（例如，如果要标记的文件列表已过时或不完整）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T11:19:57.100

为什么不使用应用标签工具？无论如何，这就是我们所做的。

# asp.net - 查找/替换单词拼图

> ID：823814
> 
> 赞同：0
> 
> 时间：2009-05-05T07:59:37.307
> 
> 标签：asp.net, vb.net, regex, string

假设我有一个包含 Word 属性和 Sentence 属性的对象。句子必须使用单词，我想用使用公共函数的链接（例如 GetLinkedSentence）替换该句子中的单词。问题可能是句子使用了单词的复数形式，而“单词”本身可能实际上是一个短语，甚至是连字符。这个词也没有长度限制。如何找到并用链接 (www.example.com/?[word]) 替换这个词（在 ASP.NET 中，最好是 VB）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-08T04:22:25.023

查看 System.Text.RegularExpressions 命名空间中的 RegEx.Replace。

例如，替换句子“今天的天气是下雨”中的“天气”一词。通过链接，您可以执行以下操作：

```
RegEx.Replace(sSentence, "(weather('s)?)", "<a href='http://www.weather.com'>$1</a>") 
```

上面的正则表达式也将替换简单的复数词（以 's 结尾）。你可以得到更复杂的“ies”复数表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T20:31:25.610

查看这个正则表达式（在 Expresso 的帮助下，感谢 eidylon！）：

`(?:(?:\b\w+)?{1}(?:{2}|{3})?).+?\b`

在哪里：

{1} = 整个单词减去最后两个字母。例如，如果单词是“happy”，则将 {1} 替换为“hap”

{2} = 单词的倒数第二个字母（如果单词是“happy”，则为“p”）

{3} = 单词的倒数第二个和最后一个字母（本例中为“py”）

这将找到“快乐”“快乐”“不快乐”“不快乐”......不幸的是，对于这个例子，它还会找到“发生”、“不幸”、“正在发生”等词。这对我有用，因为我'我通常会寻找更晦涩的词，其中词根不太常见并且词有点长，例如“exacerbate”，因此它将匹配“exacerba”、“exacerbat”和“exacerbate”，这远不如“hap”“happ”和“happy”常见。同样重要的是要注意它不会找到具有广泛词根变化的词，例如“人”到“人”。

所以虽然这不是一个完美的解决方案，但它对我有用:) 感谢你为我指明了正确的方向，eidylon！现在我对正则表达式有了更好的理解！

# actionscript-3 - 如何遍历 flex tabbar 中的选项卡

> ID：823816
> 
> 赞同：1
> 
> 时间：2009-05-05T08:00:11.907
> 
> 标签：actionscript-3, flex3

我是一个灵活的新手。我需要通过配置禁用指定的弹性标签栏中的一些标签。我在遍历选项卡栏中的选项卡时遇到问题。如果我使用 getChildAt() 命令，它不会禁用选项卡按钮，而是禁用该选项卡按钮的内容，所以它不好。

谢谢和问候，莫希特兰卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T10:15:42.313

当询问代码时，总是发布一个最小的测试用例。 `getChildAt()`会起作用，所以你的代码还有其他事情要做。

```
<mx:Script>
    <![CDATA[
        import mx.events.ItemClickEvent;
        import mx.controls.tabBarClasses.Tab;
        private function clickTab(event:ItemClickEvent):void {
            var target:TabBar = event.currentTarget as TabBar;
            var currTab:Tab;
            var parity:int = event.index & 1;
            /* disable all tabs at indices w/ same parity as clicked tab;
               enable tabs of opposite parity.
             */
            for (var i=0; i<target.numChildren; ++i) {
               currTab = target.getChildAt(i) as Tab;
               currTab.enabled = (i&1)^parity;
            }
        }
    ]]>
</mx:Script>

<mx:TabBar id="someTabs" itemClick="clickTab(event)">
    <mx:dataProvider>
        <mx:String>Foo</mx:String>
        <mx:String>Bar</mx:String>
        <mx:String>Baz</mx:String>
        <mx:String>Bam</mx:String>
    </mx:dataProvider>
</mx:TabBar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:59:23.683

为什么不使用绑定到您的配置？

就像是

```
 enabled="{yourConfiguration.lastResult.enabled}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-09T08:21:03.260

对于那些想要 Flex 4.5（也可能是 Flex 4）的工作答案的人。我终于想出了一个解决办法。这对我来说就像是一种黑客行为，但 Adob​​e 没有接听电话，它对我有用。这是一个简化的例子。

```
<!-- component that has the the TabBar in it... -->

<fx:Script>
    <![CDATA[
//imports here

import mx.core.UIComponent;

//imports

private function setTabEnabled(index:int,enabled:Boolean):void{
    var theTab:UIComponent = theTabBar.dataGroup.getElementAt(index) as UIComponent;
    if(theTab){theTab.enabled = enabled;}
}
]]>
</fx:Script>

<s:TabBar id="theTabBar"
    dataProvider="{viewStack}"/>

<mx:ViewStack id="viewStack">
    <s:NavigatorContent label="0th Tab">
        <!-- ...Content -->
    </s:NavigatorContent>
    <s:NavigatorContent label="1st Tab">
        <!-- ...Content -->
    </s:NavigatorContent>
    <s:NavigatorContent label="2nd Tab">
        <!-- ...Content -->
    </s:NavigatorContent>
</mx:ViewStack>

<!-- rest of the component that has the the TabBar in it... --> 
```

然后，您只需调用`setTabEnabled(theTabIndex,trueFalse)`与决定启用或不启用选项卡的任何原因相关的事件处理程序。

我*应该*扩展 TabBar 以支持这一点，但我已经花了足够的时间试图弄清楚它。

快乐编码 =D

# c# - Sql 注入攻击和亚音速

> ID：823821
> 
> 赞同：2
> 
> 时间：2009-05-05T08:02:40.357
> 
> 标签：c#, subsonic, sql-injection

如果我使用 SubSonic 为我的 Web 项目创建 DAL，我是否需要担心防止 SQL 注入攻击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-05T08:04:06.327

不，SubSonic 使用参数将数据传递到数据库中，它会处理这个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T17:09:17.843

这取决于您如何构建查询。如果您不使用参数，则完全有可能使用亚音速编写不安全的查询。

```
// Bad example:

string sql = "delete from Products where ProductName = " + rawUserInput;
QueryCommand qry = new QueryCommand(sql, Product.Schema.Provider.Name);
DataService.ExecuteQuery(qry);

// Should be:

string sql = "delete from Products where ProductName = @TargetName";
QueryCommand qry = new QueryCommand(sql, Product.Schema.Provider.Name);
qry.AddParamter("@TargetName", rawUserInput, DbType.String);
DataService.ExecuteQuery(qry); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T17:29:34.330

最简洁的答案是不。如果您使用 Subsonic Generated 类或 Subsonic.Select 类来生成查询/更新/插入语句，那么您无需担心 SubSonic 正确使用参数。

然而，Paul 确实指出，如果您不遗余力地编写不安全的 SQL，SubSonic 将允许您这样做。SubSonic 不是您的母亲，它不会阻止您，它更像是您最好的朋友，它会告诉您不要这样做，但如果您决定这样做，那是您的决定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-31T09:26:31.977

只是为了重新提出保罗的例子（如果你是 FK 约束）

```
 string rawUserInput = "Queso Cabrales1";
        #region  BadExample
        //string sql = "delete from Products where ProductName = " + rawUserInput;
        ////QueryCommand objQueryCommand = new QueryCommand(sql, Product.Schema.Provider.Name);
        ////DataService.ExecuteQuery(objQueryCommand);
        #endregion BadExample

        #region BetterExample
        // Should be:

        string sql = "update Products set ProductName =  @ProductName where ProductName='Queso Cabrales'";
        QueryCommand objQueryCommand = new QueryCommand(sql, Northwind.Product.Schema.Provider.Name);
        objQueryCommand.AddParameter("@ProductName" , rawUserInput, DbType.String);
        DataService.ExecuteQuery(objQueryCommand);

        panGvHolder.Controls.Clear();

        Query qry = Northwind.Product.CreateQuery();
        qry.Columns.AddRange(Northwind.Product.Schema.Columns);
        qry.WHERE("UnitPrice > 15").AND("UnitsInStock < 20 ");
        //WHERE("UnitPrice > 15").AND("UnitsInStock < 30 ");
        #endregion BetterExample

        #region PresentResultsReplaceResponseWriteWithConsole.WriteLineForConsoleApp
        using (IDataReader rdr = qry.ExecuteReader())
        {
            Response.Write("<table>");
            while (rdr.Read())
            {
                Response.Write("<tr>");
                for (int i = 0; i < rdr.FieldCount; i++)
                {
                    Response.Write("<td>");
                    Response.Write(rdr[i].ToString() + " ");
                    Response.Write("<td>");
                } //eof for 
                Response.Write("</br>");
                Response.Write("</tr>");
            }
            Response.Write("<table>");
        }
        #endregion PresentResultsReplaceResponseWriteWithConsole.WriteLineForConsoleApp

    } //eof method 
```

# css - 如何使用基于 DIV 的布局显示数据？

> ID：823835
> 
> 赞同：0
> 
> 时间：2009-05-05T08:08:56.347
> 
> 标签：css, xhtml

[![显示数据](https://i.stack.imgur.com/yNsQv.gif)](https://i.stack.imgur.com/yNsQv.gif)

我想使用 Divs 和其他元素（如 ul li p 跨度可能最小的标签）来显示这种类型的数据。

**请注意：**有可重复的块，左内容右对齐，右内容左对齐。

请使用最少的代码为此提供良好的解决方案。

这是我试图用 UL-LI 做的链接

**万智牌**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T08:21:06.443

```
<dl>
<dt>user</dt><dd>3234234234234</dd>
<dt>something</dt><dd>3234234234234</dd>
<dt>wharever</dt><dd>3234234234234</dd>
</dl>

dl { float: left; width: 300px; height: auto; margin-bottom: 5px; }
dt { float: left; width: 100px; height: auto; text-align:right; }
dd { float: right; width: 200px; height: auto; text-align:left; } 
```

当然你之前应该有一个好的“css reset”，因为默认的填充和边距不会影响你的盒子模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:25:10.207

首先，将标签放在 div 或 span 容器中，并将值放在它们自己的容器中。给标签一个类别，例如“标签”。

接下来，在您的 css 中，将标签向左浮动并给它们一个固定的宽度。将标注类的 text-align 属性设置为“right”。

如果您认为值将换行到下一行，也将值容器向左浮动；这将阻止它们包裹到与标签相同的垂直空间中。但是，如果您这样做，请确保每个标签也已应用 clear:left 以便它从自己的行开始。

# mysql - MySQL 从命令行备份和恢复

> ID：823841
> 
> 赞同：6
> 
> 时间：2009-05-05T08:10:21.833
> 
> 标签：mysql, backup, mysqldump, restore

我正在使用命令行来备份和恢复 MYSQL 数据库。让我使用一个包含视图和过程的数据库 Data1。在时`Cmd line`，我使用`mysqldump`ie

```
..>bin> mysqldump -u root -proot Data1 > Datafile.mysql 
```

当我使用上面的 Cmd 时，它会在 Mysql 的 bin 文件夹上创建一个带有`Dtafile.mysql` 名称的备份文件。

但问题是它只创建表的备份，而不是过程。

当我在空白数据库“Data2”中恢复它时

```
..bin> mysql - u root -proot Data2 < Dataafile.mysql 
```

它的作用是，它创建所有表并将视图转换为表，并且没有恢复任何过程。

意味着我无法使用所有表、视图和过程恢复我的完整数据库备份。

你们中的任何人都可以帮忙吗？我会非常感激的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-05T08:27:03.637

包括 mysqldump 的“--routines”参数，它将转储程序。

编辑#1：你的 mysqldump 命令现在应该看起来像，

```
mysqldump -u root -proot --routines Data1 > Datafile.mysql 
```

编辑#2：
如果要保留视图，还需要添加 --add-drop-table 开关。原因是视图分两步创建（首先作为虚拟表，然后作为真实视图）。另请注意，表和视图共享相同的名称空间，因此不要被 mysqlclient 中“显示表”命令给出的输出误导。如果该命令向您显示创建视图查询然后宾果游戏，请使用“显示创建视图 vw_test”，以确保视图已正确恢复，将一些数据插入其他数据库中的相关表，然后在看，如果数据比你撞到靶心，请拍拍自己的背 :) 否则你总是可以回到 Stackoverflow 上这个美妙的社区。

所以（为了维护视图）你的 mysqldump 命令现在应该是这样的

```
mysqldump -u root -proot --routines --add-drop-table Data1 > Datafile.mysql 
```

高温高压

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T08:19:11.783

使用命令行备份数据库的三种最佳方法，phpmyadmin 或 mysql 管理员 mysql 数据库备份和恢复简单的方法，使用 mysql 数据库备份

[mysql管理员](http://gleegrid.com/blog/mysql-database-backup/)

[phpmyadmin](http://gleegrid.com/blog/mysql-database-backup-using-phpmyadmin/)

# deployment - 您使用什么脚本部署复杂的服务器产品？

> ID：823844
> 
> 赞同：0
> 
> 时间：2009-05-05T08:11:10.210
> 
> 标签：deployment, scripting

您使用什么脚本部署复杂的服务器产品？

想象一下，我们有一些漂亮的新代码（或者可能是 42 版的 slick 代码）并且已经发布了。现在，我们当然已经有了基础知识——数据库自己构建和升级。我们有很好的“包”（zip 文件）但是在“闪亮的新服务器”和“好的，现在点击开始按钮”之间有很多东西——从服务帐户到 3rd 方软件，再到字体。

顺便说一句，我们是一家 MS 商店：IIS、ASP.NET、MSSQL。我们主要部署自己的服务器。随着产品变得越来越大并横向扩展，更新大量服务器变得越来越繁重。

通过回答以下任何一个问题，启发我如何轻松、顺利地做到这一点......

*   您最喜欢的服务器部署解决方案是什么？
*   您多久回退一次手动步骤（将此 x 添加到 IIS）？
*   有人真的在 Visual Studio 中使用网站设置项目吗？
*   买实习生比买剧本便宜吗？
*   如果您编写脚本，您使用的是什么 - 您喜欢它吗？（这里有人刚刚用 MSBUILD 制作了一个引人注目的安装程序。在 .NET - 安装之后，它总是在那里。）
*   你学会爱 WMI 了吗？如何？
*   您是否实现了部署超越。只看一眼闪亮的新服务器就部署了代码及其所有依赖项？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-06-13T16:14:34.543

我们使用 NAnt 构建文件来构建和打包（到 zip 中）我们的项目。Powershell 脚本将包部署到目标机器，包括 Web 应用程序和 Windows 服务。RedGate 的[SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/)/ [SQL 数据比较](http://www.red-gate.com/products/sql-development/sql-data-compare/)，使用 PowerShell 编写脚本，用于更新数据库架构和静态数据。全部由 JetBrain 的[TeamCity](http://www.jetbrains.com/teamcity/)持续集成服务器驱动。

相同的脚本用于部署到我们的测试、QA 和生产环境，当然所有内容都保存在源代码控制中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:51:14.827

我们使用 NANT 将新版本上传到生产环境。我们已根据需要对其进行了修改，并且可以正常工作。除了手动更改 web.config 之外，我们几乎不需要手动更改。我们每周上传一个新版本，在某些情况下我们每天上传。我们可以选择回滚到以前的版本，我们可以选择要上传到哪些服务器，我们可以将不同的分支上传到不同的服务器，我们需要做的所有事情都可以在它之上构建。

我建议编写一些上传脚本。这是确保您不会忘记任何事情、可以轻松回滚并确切知道服务器上发生了什么的最佳方式。

# ruby - 日期验证

> ID：823845
> 
> 赞同：1
> 
> 时间：2009-05-05T08:12:12.860
> 
> 标签：ruby

嗨，伙计们，如果日期错误，我在验证日期时遇到问题。例如，如果我在数据库中搜索 2 月 31 日的记录，它只会显示服务器中的错误，并且不显示任何内容..我没有一个线索请帮忙...

我存储哈希日期的代码是 `@start = "#{params[:start][:day]}-#{params[:start][:month]}-#{params[:start][:year]}"` 和传递的代码是`@start_date = Date.parse(@start)

` 并且它在检测到通过的日期错误后立即返回，并且它没有给我验证它的机会。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T08:56:50.430

如果您传递了无效日期（例如 2 月 31 日），则 Date.parse 会引发 ArgumentError。如果您想响应它而不是让它停止执行，则可以挽救该错误。不过，在您首先尝试解析日期之前，最好进行一次完整性检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T18:41:24.440

Rails 中没有很好的日期验证。您可能想尝试 Jonathan Viney 的“validates_date_time”。

在这里找到： [http ://svn.viney.net.nz/things/rails/plugins/validates_date_time/](http://svn.viney.net.nz/things/rails/plugins/validates_date_time/)

# c# - C# 中带附件的 SOAP (SwA)

> ID：823847
> 
> 赞同：7
> 
> 时间：2009-05-05T08:12:35.900
> 
> 标签：c#, soap, mime, attachment

我需要使用 .NET 来使用 JAVA 编写的 SOAP 服务，该服务需要在其某些方法上添加简单的 MIME 附件。

有人知道如何完成吗？我找不到任何有关使用 WCF 甚至 WSE 客户端与此类附件的信息。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T08:27:32.853

[.NET 客户端本身不支持](http://tinyurl.com/c2zskv)此功能。您可以查看[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/145c2e7a-769d-4a40-b620-8cb7a22b8e7d)上的以下讨论。如果您安装[WSE 2.0](http://www.microsoft.com/downloads/details.aspx?familyid=1ba1f631-c3e7-420a-bc1e-ef18bab66122&displaylang=en)，以下位置有一个示例：C:\Program Files\Microsoft WSE\v2.0\Samples\CS\QuickStart\Attachments\AttachmentsClient

# scala - 在 Scala 中漂亮地用单位表示数量

> ID：823848
> 
> 赞同：4
> 
> 时间：2009-05-05T08:14:00.577
> 
> 标签：scala, idioms

我需要支持单位数量。我希望类型系统尽可能地强制执行单元正确性。例如，不可能将克与美元结合起来。我正在走参数化类型的道路，但这段代码似乎比我从其他人那里看到的 Scala 代码重复得多。

```
abstract class UnitOfMeasure

abstract class Range[T] {
  type T <: UnitOfMeasure
}
class Quantity[T <: UnitOfMeasure](value: Double)
class DefiniteRange[T<:UnitOfMeasure](lowerBound: Quantity[T], upperBound: Quantity[T]) extends Range[T]
class Confidence(conf: Double) {
  require(0.0 <= conf && conf <= 1.0)
}
class ConfidenceInterval[T<:UnitOfMeasure](lowerBound: Quantity[T], upperBound: Quantity[T], confidence: Confidence) extends Range[T] {
    def this(lower: Quantity[T], upper: Quantity[T]) = this(lower, upper, new Confidence(.90))
} 
```

有没有更清洁的方法来做到这一点？“T<:UnitOfMeasure”的鼓声是困扰我的主要事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-07T17:51:38.630

我没有这本书，但也许你需要一个[自我类型。](http://www.scala-lang.org/node/124)您可以将您的类包含在另一个类中，并添加要在类范围中使用的类型定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-01T18:50:48.190

来自 mdmcnlly：

> 我记得在《Scala 编程》一书中看到了一个示例，该示例处理了具有兼容食物的基本类型的动物，以及只能吃与其兼容的子类型而不能为其他人提供食物的子类型。我觉得它是相关的，但我不确定。也许手边有这本书的人可以梳理出好的掘金。解决方案的要点是使用基类的类型成员，而不是到处使用这些差异注释。

# sql-server - 实时部署时的 Sql 排序问题

> ID：823849
> 
> 赞同：0
> 
> 时间：2009-05-05T08:15:51.307
> 
> 标签：sql-server, sql-server-2000, collation

历史：前几天晚上我进行了一次部署，其中涉及执行创建存储过程的脚本。但是，在运行脚本时，数据库的整理发生了错误。

问题：在我们朋友 Google 的帮助下，我设法发现我遇到的问题是因为我们的实时环境的数据库有一个排序规则，而临时 DB 的排序规则不同，我在尝试插入时遇到错误到变量表中。

问题：最好的前进方式是什么，或者我的选择是什么？

环境：sql 2000

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-05T08:33:44.633

我们一直在使用与开发和生产数据库相关的用于集成测试的临时数据库遇到这个问题。我们所做的是确保所有数据库使用相同的排序规则。在您的情况下，您应该能够在脚本文件中进行简单的搜索/替换，并将排序规则更改为目标数据库中使用的排序规则。

编辑：改变脚本会让你现在前进；从长远来看，您需要确保在所有相关数据库中使用相同的排序规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:34:12.247

有一些解决方案

*   确保所有排序规则都在同一个数据库中匹配。否则你会受到一些痛苦。
*   如果您的临时表不包含很多数据，正确的做法是使用与目标表相同的排序规则重新创建它们。
*   如果这不是一个选项，请查找字符串类型，并强制您的整理到目标数据库之一

    ```
     INSERT INTO dest_db..DEST_TABLE ( DEST_VARCHAR_COLUMN )
     SELECT TMP_VARCHAR_COLUMN COLLATE <dest_db_collate>
     FROM tmp_db..#TEMP_TABLE 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-05T08:19:47.477

显而易见的解决方案是使用与生产数据库相同的排序规则重新安装您的开发数据库。

如果您不能，例如，如果您有多个具有不同排序规则的生产数据库，您可以确保您的更新整体上要么失败要么成功。围绕所有存储过程更新放置一个事务，并确保使用alter，而不是drop/create。

# visual-studio - 从 Web Developer Edition 升级到 VS 2008 Professional

> ID：823850
> 
> 赞同：1
> 
> 时间：2009-05-05T08:15:52.087
> 
> 标签：visual-studio, visual-studio-2008

我目前在我的机器上安装了 VS 2008 Web Developer SP1，并且我已经购买了专业版。我还安装了 2003 和 2005 Pro。

我应该在安装专业版之前卸载 VS 2008 Web Developer 吗？如果没有，我会有两个版本的 VS 2008 还是专业“升级”Web 开发人员。

请注意我没有购买升级许可证，我有专业的完整许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T08:24:42.207

Web Developer 是 VS2008 的独立产品，安装不应该改变它。

顺便说一句 - 使用 VS2008 中的多目标，您可能想通过卸载 VS2005 来节省一些空间？不过，VS2008 不能以 1.1 为目标（可能通过 MSBEE 除外）——因此，如果您仍然维护 1.1 代码，则可以保留 VS2003。显然，如果您这样做：首先确保 VS2008 支持您需要的任何遗留需求...（即，如果您无法编辑项目，请不要怪我！）

我可能会先卸载 Web Developer，但您可能会发现它对小型测试项目很方便？出于同样的原因，我一直安装 C# Express（我发现它对于小划痕测试更快）。

# html - 当用户键入一些文本时，IE textarea 的宽度会发生变化

> ID：823851
> 
> 赞同：2
> 
> 时间：2009-05-05T08:16:15.923
> 
> 标签：html, internet-explorer, textarea

我有一个页面，其中有一些 textarea 和 <input type="text"> html 控件。这些元素被放置在一个 div 标签中：

[![替代文字](https://i.stack.imgur.com/Pm9Hx.jpg)](https://i.stack.imgur.com/Pm9Hx.jpg)

在 IE 7 中，用户在 textarea 中键入一些文本后，textarea 的宽度会自行改变： [![替代文字](https://i.stack.imgur.com/7GVof.jpg)](https://i.stack.imgur.com/7GVof.jpg)

现在再次，如果用户在文本框中键入一些文本，则 textarea agian 将返回其原始宽度： [![替代文字](https://i.stack.imgur.com/GBfxh.jpg)](https://i.stack.imgur.com/GBfxh.jpg)

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T21:03:04.203

为文本字段设置宽度（以 px 为单位）。应该解决扩展行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T10:04:15.847

我目前在 IE8 和 IE9 上面临同样的问题。就我而言，文本区域在我输入时会扩展到窗口的全宽。当焦点转移到任何其他组件时，它会恢复到原始宽度。经过足够的阅读并尝试了几件事，我的观察是，如果我们用`fieldset`标签包裹文本区域，宽度就会受到控制。但是，目前在尝试它时，宽度似乎达到了适当的宽度，但是随着最初的 DOM 加载，textarea 的宽度似乎减小了，然后它扩展到了适当的宽度。虽然很小，但它仍然是我的应用程序中的一个错误，我无法理解这种行为。任何帮助表示赞赏。

这是目前（部分）对我有用的：

```
<fieldset>

<textarea> </textarea>

</fieldset> 
```

# java - 在java中实现RC5加密

> ID：823853
> 
> 赞同：0
> 
> 时间：2009-05-05T08:18:29.070
> 
> 标签：java, encryption

我目前有一个任务是在我的 java 项目中实现这个 RC5 加密，但我不知道如何实现它。

我试图创建 Cipher 对象，如下所示，它抛出异常：

```
Cipher desCipher = Cipher.getInstance("RC5");
***java.security.NoSuchAlgorithmException: Cannot find any provider supporting RC5*** 
```

但是当我创建 Cipher 对象时，其他提供程序（例如“DES”、“RC2”）工作正常，

我正在使用 jdk6，如果重要的话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T09:24:13.343

[http://bouncycastle.org/](http://bouncycastle.org/)我相信有一个 RC5 实现将它们用作您的提供者，看看是否可行。

# c++ - 如何在 Visual C++ 2008 中显示命令行构建选项？

> ID：823854
> 
> 赞同：7
> 
> 时间：2009-05-05T08:18:41.237
> 
> 标签：c++, visual-studio

在[Visual C++](http://en.wikipedia.org/wiki/Visual_C++#32-bit_versions) 2008 项目中，构建项目将在输出窗口中显示以下信息：

```
1>------ Build started: Project: Project1, Configuration: Debug Win32 ------
1>Compiling...
1>main.cpp
1>test1.cpp
1>test2.cpp
1>Generating Code...
1>Linking...
1>LINK : test.exe not found or not built by the last incremental link; performing full link
1>Project1- 0 error(s), 0 warning(s)
========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ========== 
```

**我怎样才能得到这样的输出：**

```
cl.exe /Od /I "includepath" /D "_UNICODE" /FD /EHsc /RTC1 /MDd /Zc:wchar_t- /Fo"Debug\\" /Fd"Debug\vc90.pdb" /nologo /c /ZI /TP /errorReport:prompt 
```

就像 C# 项目一样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-05T08:32:48.410

这通过项目属性页中“C/C++”选项卡的“常规”子选项卡中的“禁止启动横幅”设置进行控制。如果将其设置为“否”，它将在“输出”窗口中显示编译期间使用的命令行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-05T08:49:39.650

打开构建日志（菜单*工具*→*选项*→*项目和解决方案*→ *VC++ 项目设置*→*构建日志*）。然后，您应该在中间文件目录中获得构建日志 (BuildLog.htm)，其中包含您需要的所有信息，包括错误消息。您还将`Ctrl`在输出窗口中获得一个可单击的链接以显示构建日志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-05T08:26:46.850

您可以查看`cl`通过项目属性 → *C/C++* →*命令行*传递给的选项。

我正在开发 Visual Studio 2005 的德语版本，所以我希望我的翻译能够映射到英语 Visual Studio。

# sql-server - 我可以安装 2008 SQLExpress 和 2005 SQLExpress 吗？

> ID：823858
> 
> 赞同：3
> 
> 时间：2009-05-05T08:20:31.157
> 
> 标签：sql-server, sql-server-express

我可以在我的机器上运行一个 2005 SQLExpress 实例和一个 2008 SQLExpress 服务器吗？

两者都可以使用 2008 管理控制台进行访问。我目前安装了快速工具，但我的办公室最近购买了完整的 2008 许可证。这是否带有改进的控制台？如果是这样，我可以只安装这些工具还是必须先卸载快速控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T08:29:07.093

多么有趣的巧合，我在 30 分钟前就做对了。到目前为止，没有错误。此外，协议和服务彼此共存。您必须为新安装指定一个标识符，该标识符必须与旧 SQLExpress 安装不同。我选择将新实例命名为“SQLExpress2008”，现在它与之前的实例“SQLExpress”一起列出。

一切似乎都很好，尽管我不得不承认我是 Microsoft SQLExpress 的业余爱好者。希望能回答您的问题，如果您有任何具体问题，我可以看看它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T08:43:03.347

您可以让两个实例在同一台服务器上共存。它们将具有不同的实例名称并使用不同的端口（因此，如果您已将防火墙配置为允许访问端口 1433，则需要添加更多 IP），但它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T16:09:57.347

Yeah 2005 and 2008 coexist just fine. just remember to set the ram usage.

also note that visual studios 2005 and 2008 can be on the same machine as well.

you can also open up a 2005 db in 2008 and vice versa (there are some issues, but i don't know what they are)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T08:48:14.677

它应该起作用，至少在理论上是这样。尽管问题出现了——既然 2008 应该能够完成 2005 所做的一切，为什么还要同时安装这两个？

# .net - 列表 .Contains() 很慢？

> ID：823860
> 
> 赞同：98
> 
> 时间：2009-05-05T08:21:24.787
> 
> 标签：.net, arrays, generics, list

谁能解释一下为什么泛型`List.Contains()`函数这么慢？

我有`List<long>`大约一百万个数字，并且代码不断检查这些数字中是否有特定数字。

我尝试使用`Dictionary<long, byte>`and`Dictionary.ContainsKey()`函数做同样的事情，它比使用 List 快 10-20 倍。

当然，我真的不想为此目的使用 Dictionary，因为它不应该以这种方式使用。

所以，这里真正的问题是，是否有任何替代方法`List<T>.Contains()`，但不像`Dictionary<K,V>.ContainsKey()`?

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2009-05-05T08:27:34.850

如果您只是检查是否存在，那么`HashSet<T>`在 .NET 3.5 中是您的最佳选择 - 类似字典的性能，但没有键/值对 - 只有值：

```
 HashSet<int> data = new HashSet<int>();
    for (int i = 0; i < 1000000; i++)
    {
        data.Add(rand.Next(50000000));
    }
    bool contains = data.Contains(1234567); // etc 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-05T08:25:55.527

List.Contains 是一个 O(n) 操作。

Dictionary.ContainsKey 是一个 O(1) 操作，因为它使用对象的哈希码作为键，这使您具有更快的搜索能力。

我认为扫描包含一百万个条目的列表以查找一些条目并不是一个好主意。

例如，是否可以将这些百万实体保存到 RDBMS 中，并对该数据库执行查询？

如果不可能，那么如果您想进行键查找，我无论如何都会使用字典。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-08T16:00:23.790

我想我有答案了！是的，列表（数组）上的 Contains() 确实是 O(n)，但是如果数组很短并且您使用的是值类型，它仍然应该很快。但是使用 CLR Profiler [从 Microsoft 免费下载]，我发现 Contains() 是装箱值以便比较它们，这需要堆分配，这非常昂贵（慢）。[注意：这是.Net 2.0；其他未测试的 .Net 版本。]

这是完整的故事和解决方案。我们有一个名为“VI”的枚举并创建了一个名为“ValueIdList”的类，它是 VI 对象列表（数组）的抽象类型。最初的实现是在古老的 .Net 1.1 时代，它使用封装的 ArrayList。我们最近在[http://blogs.msdn.com/b/joshwil/archive/2004/04/13/112598.aspx](http://blogs.msdn.com/b/joshwil/archive/2004/04/13/112598.aspx)中发现，泛型列表 (List<VI>) 在值类型上的性能比 ArrayList 好得多（例如我们的enum VI) 因为这些值不必被装箱。这是真的，而且它起作用了……几乎。

CLR Profiler 揭示了一个惊喜。这是分配图的一部分：

*   ValueIdList::Contains bool(VI) 5.5MB (34.81%)
*   Generic.List::Contains bool(<UNKNOWN>) 5.5MB (34.81%)
*   Generic.ObjectEqualityComparer<T>::Equals bool (<UNKNOWN> <UNKNOWN>) 5.5MB (34.88%)
*   价值观.VI 7.7MB (49.03%)

如您所见，Contains() 令人惊讶地调用了 Generic.ObjectEqualityComparer.Equals()，这显然需要对 VI 值进行装箱，这需要昂贵的堆分配。奇怪的是，微软会在列表中取消拳击，只是为了像这样的简单操作再次要求它。

我们的解决方案是重写 Contains() 实现，在我们的例子中这很容易做到，因为我们已经封装了通用列表对象 (_items)。这是简单的代码：

```
public bool Contains(VI id) 
{
  return IndexOf(id) >= 0;
}

public int IndexOf(VI id) 
{ 
  int i, count;

  count = _items.Count;
  for (i = 0; i < count; i++)
    if (_items[i] == id)
      return i;
  return -1;
}

public bool Remove(VI id) 
{
  int i;

  i = IndexOf(id);
  if (i < 0)
    return false;
  _items.RemoveAt(i);

  return true;
} 
```

VI 值的比较现在在我们自己的 IndexOf() 版本中完成，不需要装箱，而且速度非常快。在这个简单的重写之后，我们的特定程序加速了 20%。O(n)...没问题！只是避免浪费内存使用！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-05T08:25:09.287

字典并没有那么糟糕，因为字典中的键旨在快速找到。要在列表中查找数字，它需要遍历整个列表。

当然，只有当您的号码是唯一的且未排序时，该词典才有效。

我认为.NET 3.5 中还有一个`HashSet<T>`类，它也只允许唯一元素。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-11T19:52:52.923

这不完全是您问题的答案，但我有一个类可以提高 Contains() 在集合上的性能。我将一个队列子类化并添加了一个将哈希码映射到对象列表的字典。`Dictionary.Contains()`函数是 O(1)，而、`List.Contains()`和`Queue.Contains()`是`Stack.Contains()`O(n)。

字典的值类型是一个包含具有相同哈希码的对象的队列。调用者可以提供一个实现 IEqualityComparer 的自定义类对象。您可以将此模式用于堆栈或列表。代码只需要一些更改。

```
/// <summary>
/// This is a class that mimics a queue, except the Contains() operation is O(1) rather     than O(n) thanks to an internal dictionary.
/// The dictionary remembers the hashcodes of the items that have been enqueued and dequeued.
/// Hashcode collisions are stored in a queue to maintain FIFO order.
/// </summary>
/// <typeparam name="T"></typeparam>
private class HashQueue<T> : Queue<T>
{
    private readonly IEqualityComparer<T> _comp;
    public readonly Dictionary<int, Queue<T>> _hashes; //_hashes.Count doesn't always equal base.Count (due to collisions)

    public HashQueue(IEqualityComparer<T> comp = null) : base()
    {
        this._comp = comp;
        this._hashes = new Dictionary<int, Queue<T>>();
    }

    public HashQueue(int capacity, IEqualityComparer<T> comp = null) : base(capacity)
    {
        this._comp = comp;
        this._hashes = new Dictionary<int, Queue<T>>(capacity);
    }

    public HashQueue(IEnumerable<T> collection, IEqualityComparer<T> comp = null) :     base(collection)
    {
        this._comp = comp;

        this._hashes = new Dictionary<int, Queue<T>>(base.Count);
        foreach (var item in collection)
        {
            this.EnqueueDictionary(item);
        }
    }

    public new void Enqueue(T item)
    {
        base.Enqueue(item); //add to queue
        this.EnqueueDictionary(item);
    }

    private void EnqueueDictionary(T item)
    {
        int hash = this._comp == null ? item.GetHashCode() :     this._comp.GetHashCode(item);
        Queue<T> temp;
        if (!this._hashes.TryGetValue(hash, out temp))
        {
            temp = new Queue<T>();
            this._hashes.Add(hash, temp);
        }
        temp.Enqueue(item);
    }

    public new T Dequeue()
    {
        T result = base.Dequeue(); //remove from queue

        int hash = this._comp == null ? result.GetHashCode() : this._comp.GetHashCode(result);
        Queue<T> temp;
        if (this._hashes.TryGetValue(hash, out temp))
        {
            temp.Dequeue();
            if (temp.Count == 0)
                this._hashes.Remove(hash);
        }

        return result;
    }

    public new bool Contains(T item)
    { //This is O(1), whereas Queue.Contains is (n)
        int hash = this._comp == null ? item.GetHashCode() : this._comp.GetHashCode(item);
        return this._hashes.ContainsKey(hash);
    }

    public new void Clear()
    {
        foreach (var item in this._hashes.Values)
            item.Clear(); //clear collision lists

        this._hashes.Clear(); //clear dictionary

        base.Clear(); //clear queue
    }
} 
```

我的简单测试表明我的`HashQueue.Contains()`运行速度比`Queue.Contains()`. 运行计数设置为 10,000 的测试代码对于 HashQueue 版本需要 0.00045 秒，对于 Queue 版本需要 0.37 秒。计数为 100,000 时，HashQueue 版本需要 0.0031 秒，而 Queue 需要 36.38 秒！

这是我的测试代码：

```
static void Main(string[] args)
{
    int count = 10000;

    { //HashQueue
        var q = new HashQueue<int>(count);

        for (int i = 0; i < count; i++) //load queue (not timed)
            q.Enqueue(i);

        System.Diagnostics.Stopwatch sw = System.Diagnostics.Stopwatch.StartNew();
        for (int i = 0; i < count; i++)
        {
            bool contains = q.Contains(i);
        }
        sw.Stop();
        Console.WriteLine(string.Format("HashQueue, {0}", sw.Elapsed));
    }

    { //Queue
        var q = new Queue<int>(count);

        for (int i = 0; i < count; i++) //load queue (not timed)
            q.Enqueue(i);

        System.Diagnostics.Stopwatch sw = System.Diagnostics.Stopwatch.StartNew();
        for (int i = 0; i < count; i++)
        {
            bool contains = q.Contains(i);
        }
        sw.Stop();
        Console.WriteLine(string.Format("Queue,     {0}", sw.Elapsed));
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-05T08:26:06.040

[SortedList](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)的搜索速度会更快（但插入项目的速度会更慢）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T08:26:34.963

为什么字典不合适？

要查看特定值是否在列表中，您需要遍历整个列表。使用字典（或其他基于散列的容器）可以更快地缩小需要比较的对象数量。密钥（在您的情况下为数字）是散列的，并且为字典提供了要比较的对象的小数子集。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-10-27T15:12:14.500

我在不支持 HashSet 的 Compact Framework 中使用它，我选择了一个字典，其中两个字符串都是我要查找的值。

这意味着我获得了具有字典性能的 list<> 功能。这有点hacky，但它有效。

# jquery - 修复 jQuery 滚动

> ID：823864
> 
> 赞同：2
> 
> 时间：2009-05-05T08:24:02.567
> 
> 标签：jquery, scroll

**单击带有 id 的链接后必须滚动**页面（让它成为#link）。

这是我的代码，它**不起作用**：

```
$(document).ready(function(){
    $("#link").click(function () { 
        $(this).animate({ scrollTop: 2000 }, 'slow'); 
    });
}); 
```

但这**一个有效**，页面加载后它会慢慢滚动到页面底部：

```
$(document).ready(function() {
    $('html, body').animate({ scrollTop: 6000 }, 'slow'); 
}); 
```

身体的高度是6000px。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-05T08:59:29.283

在您的第一个示例中，您正在设置实际链接元素的 scrollTop ，其中没有任何内容可以滚动。（没有溢出）

```
$(document).ready(function(){
    $("#link").click(function () { 
        $("body").animate({ scrollTop: 2000 }, 'slow'); 
    });
}); 
```

[她对https://developer.mozilla.org/En/DOM/Element.scrollTop](https://developer.mozilla.org/En/DOM/Element.scrollTop)的解释很好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T08:37:52.533

看起来您正在尝试为“this”设置动画，这将是链接！

您应该尝试 $(window).animate ！甚至可能是文件，抱歉不确定！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T10:35:46.277

尝试 $('html,body').animate 以支持所有浏览器

# cvs - 有没有办法找到新添加/新添加到 cvs 存储库的文件列表

> ID：823882
> 
> 赞同：0
> 
> 时间：2009-05-05T08:30:59.633
> 
> 标签：cvs

有没有办法找到新添加/新添加到 cvs 存储库的文件列表

仅供参考：由于损坏，CVS 历史命令在我的系统上不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T17:21:47.640

如果您的存储库已损坏而`cvs history`无法正常工作，我怀疑您是否能够找到可靠工作的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:43:26.280

“CVS 历史”命令呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-30T12:05:54.417

您可以设置提交日志...如果您有权访问 $CVSROOT，则可以修改 loginfo 以在发生提交时将其写入文件

$CVSROOT/日志信息：

```
#DEFAULT (echo ""; id; echo %s; date; cat) >> $CVSROOT/CVSROOT/commitlog 
# or 
#DEFAULT (echo ""; id; echo %{sVv}; date; cat) >> $CVSROOT/CVSROOT/commitlog 
```

*这会将存储库中所有*模块的日志消息写入文件“commitlog”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-30T12:45:43.230

您可以设置监视并在存储库中的文件被修改时收到电子邮件...如果您有权访问 $CVSROOT 您可以修改通知以在文件签入时发送电子邮件

$CVSROOT/通知：

```
ALL /bin/mail -s "CVS notification" %s 
```

或者

```
ALL mail %s -s \"CVS notification\" 
```

在结帐每个模块时执行 cvs watch 并执行 cvs watch add -a commit

请务必查看手册[http://developer.apple.com/opensource/cvs/cederquist/cvs_84.html](http://developer.apple.com/opensource/cvs/cederquist/cvs_84.html)

# java - 在 Swing 中为表单输入创建 Java GUI

> ID：823884
> 
> 赞同：3
> 
> 时间：2009-05-05T08:32:11.877
> 
> 标签：java, user-interface, swing

好吧，我已经浏览了整个互联网，只是无法找到这个问题的答案，所以也许有人可以提供一些见解。

我正在开发一个相对简单的 Java 应用程序，它将替换当前用于系统访问请求的 Word 文档。它旨在允许新员工雇用信息的表单输入 - 姓名、所需访问权限等。

所以这是我的问题。尝试使用所有文本字段和所有内容制作 GUI 是非常痛苦的。因为每个小部件都有点不同，所以在填写表单后获取输入似乎需要为每个小部件单独引用，以便我可以单独调用它们。这意味着一个部分的每个面板都有 6-10 个不同的私有字段。（我尝试将所有类似的小部件添加到列表中并循环调用它们，但这似乎不起作用。）

似乎网络表单在某些方面更适合于此，但我没有可用的基础设施来做到这一点。对于类似的事情，有没有人找到比这更好的解决方案？这似乎是一大堆代码。请参阅下面的想法（我放了一些评论而不是实际代码，因为它太长了）。感谢您的关注！

```
 private JComboBox my_dates;
    private JTextField my_date1;
    private JTextField my_date2;
    private JTextField my_request_date;
    private JTextField my_new_legal_name;
    private JTextField my_new_pref_name;
    private JTextField my_new_username;
    private JTextField my_prev_legal_name;
    private JTextField my_prev_pref_name;
    private JTextField my_prev_username;
    private JTextField my_emp_id;
    private JTextField my_manager;
    private JTextField my_auth_requestor;
    private JTextField my_auth_phone;

    public NameChangePanel(FormSection the_section)
    {
        super();
        initialize();
        buildPanel(the_section.getFields());
    }

    private void initialize()
    {
        // Create all the widgets individuall
    }

    private void buildPanel(List the_fields)
    {
        // add a field label
        // add a component
        // repeat for all values
    }

    public List getFormValues()
    {
        // Call all of the private fields individually
        return values;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T08:41:13.040

香草摇摆是冗长的 - 没有争论。基本上，对于这种事情，我最终依赖于一堆本土的 util/factory 方法，比如 createTextBox()，这些方法被参数化以供常用，并将执行 3-8 条必要的语句。

我有时甚至会参数化布局。我倾向于将所有布局简化为 GridBagLayout（其他人做 BorderLayout 等；这只是个人喜好问题），然后创建将控件放置在网格中特定点的方法。

如果您不基于 Web，我会坚持使用 Swing。它可能很冗长，但对于一个简单的形式来说并不是那么困难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T23:39:04.537

叫我疯了，但我不喜欢 gui 建设者。我更喜欢手工编码带来的额外控制。此外，当您自己编写代码时，它使调试变得更加容易。重要的是按逻辑顺序布局代码并使用有条不紊的变量名称。

您提到尝试使用列表。但是，我根本不知道这将如何为您节省很多时间（或者正如我之前暗示的那样，您将在实现上节省多少时间，您将在调试过程中丢失）。我猜当您开始检查 JTextFields 的输入时，头痛就开始了。我建议将 JTextField 子类化为 MoneyTextField、PhoneNumberTextField 等，可用于设置 ActionListener 以阻止人们做愚蠢的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T09:10:55.043

[Netbeans](http://www.netbeans.org/kb/60/java/swing-app-beans-binding-screencast.html)有一个 gui 构建器，大多数帐户都相当不错。此屏幕截图展示了可能对您有帮助的数据绑定功能。

另一种选择可能是推出你自己的演示框架，这取决于你想要它的复杂程度，它并不难，也很有趣。只需使用反射从对象中提取字段并将这些字段转换为小部件并再次返回。确保使用布局管理器为您完成大部分繁重的工作。

是的，总的来说，gui 的东西不是 java 的强项，但你应该会发现它已经足够好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T10:43:41.967

如果你喜欢冒险，你可以尝试在 groovy 中使用 griffon。Griffon 是一个 GUI 构建框架，它通过自动化重复部分使 GUI 构建更容易。有关详细信息，请参阅[http://griffon.codehaus.org/ 。](http://griffon.codehaus.org/)

如果你知道如何使用 grails，griffon 会感觉很相似，因为它是使用相似的概念和隐喻构建的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-31T07:51:29.427

你可以看看我尝试解决这个问题：[http ://code.google.com/p/swing-formbuilder/](http://code.google.com/p/swing-formbuilder/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T10:53:27.903

看看[BetterBeansBinding](http://kenai.com/projects/betterbeansbinding/)。它是一个工具，可以很容易地在对象之间绑定各种 JavaBean 类属性。您将设置一个包含请求的对象，并将该对象的属性绑定到各种 gui 组件。完成后，只需返回绑定对象，它应该填写所有字段。

请注意，我之前实际上并没有使用过它，但我已经看到了这个概念并且在它发布之前做过类似的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T11:04:59.997

我会从一个 XML 文件创建一个这个表单，比如

```
<form name="MyForm" package="com.nowhere.swing">
 <field component="javax.swing.JTextField" label="Enter your Name" pattern="[a-z]+" name="name"/>
 <field component="javax.swing.JTextArea" label="Enter your Comment" pattern="[a-z]+" name="comment"/>
</form> 
```

然后，使用[XSLT](http://www.w3.org/TR/xslt) ，我将使用这个定义为 Pojo 和 Swing 接口生成 java 代码。

```
class MyFormPojo
 {
 private String name;
 private String comment;
 (...)
 } 

class MyFormPane extends JPanel
 {
 JTextField field4name;
  JTextArea field4comment;
 (...)
 MyFormPane()
   {
   (...)
   field4name= new JTextField();
   (.. create labels, etc...)
   }
 } 
```

# assembly - 在 MIPS 的 HI 和 LO 寄存器中存储值

> ID：823896
> 
> 赞同：4
> 
> 时间：2009-05-05T08:37:54.217
> 
> 标签：assembly, mips, cpu-registers, spim

我正在 MIPS 中编写某些代码，我已经到了需要将结果临时存储在特殊寄存器（均为 4 字节宽）`HI`中的地步。`LO`这些说明可供我使用：

```
divu     s,t    lo <-- s div t ; hi <-- s mod t
multu    s,t    hi / lo < -- s * t ; 
```

因此，`divu`将除法的结果`LO`和余数存储在 中`HI`，而`multu`将乘法的结果存储在`LO`（低 4 字节）和`HI`（高 4 字节）中。

稍后，要从寄存器中检索结果，我可以`HI`：`LO`

```
mfhi $v0
mflo $v1 
```

我已经想出了如何将计算结果存储在`LO`：

```
ori     $v0,$0,1            # Store result from $a0 into LO
divu    $a0,$v0 
```

*   将`divu`除法的结果存储在 LO 中，所以我只需将结果除以 1 即可。

但是，存储起来`HI`更复杂。一种方法是强制`multu`指令将值移动 32 位（4 字节）：

```
multu    $a0,0x80000000     # Shift $a0 by 32 bits and store into HI/LO 
```

但是，结果是 in 的值在`HI`它应该在的位置右边 1 位（所以如果我的值是，`0100 1000`那么`HI`将包含`0010 0100`）。

有谁知道如何在`HI`寄存器中存储一些东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-05T11:49:58.517

我想扩展 Nils Pipenbrinck 的答案：

来自面向程序员的 MIPS32 架构

# mthi

格式：MIPS32 (MIPS I)

```
 MTHI rs 
```

目的：将 GPR 复制到专用 HI 寄存器

```
Description: HI ← rs 
```

GPR rs 的内容被加载到特殊寄存器 HI 中。

限制：

由 DIV、DIVU、MULT 或 MULTU 写入 HI/LO 对的计算结果必须由 MFHI 或 MFLO 读取，然后才能将新结果写入 HI 或 LO。如果在这些算术指令之一之后但在 MFLO 或 MFHI 指令之前执行 MTHI 指令，则 LO 的内容是不可预测的。以下示例显示了这种非法情况：

```
 MUL       r2,r4   # start operation that will eventually write to HI,LO
 ...               # code not containing mfhi or mflo
 MTHI      r6
 ...               # code not containing mflo
                   # this mflo would get an UNPREDICTABLE value
 MFLO      r3 
```

历史资料：

在 MIPS I-III 中，如果前面两个指令中的任何一个是 MFHI，则该 MFHI 的结果是不可预测的。HI 或 LO 特殊寄存器的读取必须通过两条或更多条指令与写入它们的任何后续指令分开。在 MIPS IV 及更高版本中，包括 MIPS32 和 MIPS64，此限制不存在。

# mtlo

格式：MIPS32 (MIPS I)

```
 MTLO rs 
```

目的：将 GPR 复制到专用 LO 寄存器 说明：

```
 LO ← rs 
```

GPR rs 的内容被加载到特殊寄存器 LO 中。

限制：由 DIV、DIVU、MULT 或 MULTU 写入 HI/LO 对的计算结果必须由 MFHI 或 MFLO 读取，然后才能将新结果写入 HI 或 LO。

如果在这些算术指令之一之后但在 MFLO 或 MFHI 指令之前执行 MTLO 指令，则 HI 的内容是不可预测的。以下示例显示了这种非法情况：

```
 MUL       r2,r4   # start operation that will eventually write to HI,LO
 ...               # code not containing mfhi or mflo
 MTLO      r6
 ...               # code not containing mfhi
                   # this mfhi would get an UNPREDICTABLE value
 MFHI      r3 
```

历史资料：

在 MIPS I-III 中，如果前面两个指令中的任何一个是 MFHI，则该 MFHI 的结果是不可预测的。HI 或 LO 特殊寄存器的读取必须通过两条或更多条指令与写入它们的任何后续指令分开。在 MIPS IV 及更高版本中，包括 MIPS32 和 MIPS64，此限制不存在。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-05T10:31:22.853

MIPS 指令集对应于 MFLO/MFHI。

它被称为 MTLO/MTHI，完全符合您的要求：

```
 mtlo $v0  # moves the contents of v0 into the lo-register
  mthi $v1  # moves the contents of v1 into the hi-register 
```

这些指令很少见，并且通常不会出现在总结的指令集参考中。

顺便说一句：请务必查看处理器手册，了解与 LO/HI regs 相关的延迟和危险。它们非常特殊，您的代码可能不得不在写入和读取之间等待至少三个周期。不幸的是，这种行为取决于您正在使用的 CPU。

对于有抱负的 MIPS 程序员来说，犯这个错误是一个常见的陷阱 :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T10:30:51.047

想想当用作 multu/divu 的第二个参数时，还有哪些其他极端值可能会产生有趣的结果（我故意含糊其辞，因为这看起来像是一个家庭作业问题）。

# java - 为什么代码执行从不进入catch块（java）？

> ID：823901
> 
> 赞同：1
> 
> 时间：2009-05-05T08:38:43.140
> 
> 标签：java, exception, exception-handling

我正在尝试从 UserHelper 类中的方法 importUsers 中抛出一个（自定义）ImportException。我可以在调试器中看到 throw 子句已执行，但调用 importUsers 方法的方法从不捕获异常。

这是引发异常的方法：

```
public static AccessorValidator importUsers(List<String> data, WebUser actor) throws ImportException {

    //(irrelevant code removed)

    try {
        isSuccess = insertUserData(st, blocks, db, actor);
    } catch (Exception e) {
        throw new ImportException("Could not insert user on line " + rowCounter);
    } 
```

}

在这里，我尝试从 AccessorValidator 类的执行方法中捕获抛出的异常，但未成功：

```
 public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request,
        HttpServletResponse response) throws Exception {
    //(irrelevant code removed)
    try{
        av = UserHelper.importUsers(data, admin);
        System.out.print("test2");
    } catch (ImportException ie) {
        System.out.print("testE");
        returnMessageValue = ie.getMessage();
    } catch (Exception e) {
        System.out.print("testE2");
    } 
```

输出是“test2”，代码执行永远不会到达任何一个 catch 块。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T08:56:23.113

尝试将您的方法更改为

```
try {
    isSuccess = insertUserData(st, blocks, db, actor);
    system.out.print("after insertUserData");
} catch (Exception e) {
    System.out.print("before throwing");
    throw new ImportException("Could not insert user on line " + rowCounter);
} 
```

这样您就可以确保您在调试中看到的是实际执行的内容（通过检查您的控制台），以及 insertUserData 是否实际引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T08:46:44.883

如果打印了“test2”，那么 importUsers() 根本不会抛出异常。

调试器中的行信息可能不准确。尝试在 Exception 的构造函数中放置一个断点，以查看它是否真的被创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-05T08:45:09.147

也许 insertUserData() 不会在您的测试设置中引发任何异常？如果该方法也包含在您的问题中，那将有所帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-05T08:47:03.400

您确定`insertUserData`实际上会引发异常，并且不仅返回真/假布尔值吗？看到调试器步骤到带有“抛出”的行并不意味着抛出了某些东西，因为行信息并不总是完全准确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-05T08:56:30.163

按顺序检查以下内容：

1.  检查您的断点是否与源代码同步
2.  `insertUserData()`根本没有抛出异常，验证它是否应该抛出异常。看起来你在期待一些永远不会到来的东西。
3.  在您引用它的两种情况下检查它`ImportException`确实是同一个对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T08:57:06.123

如果输出是“test2”，那么**肯定**没有抛出异常。

只是猜测...

有时您的 IDE 可能与实际执行的源代码不同步，特别是当您的代码是外部库的一部分时`classpath`... ，代码行可能会发生变化，您可能会看到要抛出的异常，尽管这并没有真正发生。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T09:02:27.217

问题解决了。似乎 importUsers 方法中的 try-catch 块被另一个 try-catch 块包围，该块没有抛出 ImportException。所以第一个 catch 块工作正常，我只是错过了第二个。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-05T09:01:12.680

尝试使用以下方法捕获 Throwable，即异常和错误的根源：

```
try{
        av = UserHelper.importUsers(data, admin);
        System.out.print("test2");
    } catch (ImportException ie) {
        System.out.print("testE");
        returnMessageValue = ie.getMessage();
    } catch (Exception e) {
        System.out.print("testE2");
    } catch (Throwable t) {
        // Here you'll catch *anything* else
        System.out.print("testTE");
    } 
```

# java - 双重调用 Wea kHashMap.put(..) 背后的原因是什么？

> ID：823902
> 
> 赞同：2
> 
> 时间：2009-05-05T08:39:13.310
> 
> 标签：java, multithreading, concurrency, mutex

这篇[博客文章](http://illegalargumentexception.blogspot.com/2008/04/java-synchronizing-on-transient-id.html)演示了一种为每个字符串 id 惯用语实现互斥锁的方法。使用的 String id 用于表示 HttpSession id。

1.  为什么我们需要在 Mutex 实例周围包裹一个 WeakReference ？从 String -> Mutex 创建一个 Map 不是更好吗？
2.  为什么我们需要调用 put 两次？

    ```
    public Mutex getMutex( String id )
    {                                  
        Mutex key = new MutexImpl( id );
        synchronized( mutexMap )
        {
            WeakReference<Mutex> ref = mutexMap.get( key );
            if( ref == null )
            {
                mutexMap.put( key, new WeakReference<Mutex>( key ) );
                return key;
            }
            Mutex mutex = ref.get();
            if( mutex == null )
            {
                mutexMap.put( key, new WeakReference<Mutex>( key ) );
                return key;
            }
            return mutex;
        }
    } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T09:09:18.743

WeakHashMap 中的值对象由普通的强引用保存。因此，应注意确保值对象不会直接或间接地强烈引用它们自己的键，因为这将防止键被丢弃。请注意，值对象可以通过 WeakHashMap 本身间接引用其键；也就是说，一个值对象可以强引用某个其他键对象，其关联的值对象反过来又强引用第一个值对象的键。解决这个问题的一种方法是在插入之前将值本身包装在 WeakReferences 中，如：m.put(key, new WeakReference(value))，然后在每次获取时解包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T09:12:32.263

1 - @Loop 有一个[很好的答案](https://stackoverflow.com/questions/823902/what-is-the-reasoning-behind-the-double-call-to-weakhashmap-put/824002#824002)。

2 - 假设条目用 Wea​​kReferences 包装，第二个`put`是必要的，因为它`WeakReference`可能在执行到达行之前收集：

```
 Mutex mutex = ref.get(); 
```

在这种情况下：

*   该条目可能不存在于`map`
*   如果存在，可以在执行前收集`Mutex mutex = ref.get();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T09:31:39.533

[Loop](https://stackoverflow.com/questions/823902/what-is-the-reasoning-behind-the-double-call-to-weakhashmap-put/824002#824002)和[Bruno Conde](https://stackoverflow.com/questions/823902/what-is-the-reasoning-behind-the-double-call-to-weakhashmap-put/824015#824015)几乎涵盖了它，但自从我编写了那个代码......

设计目标是避免让用户调用释放机制——当用户不再引用互斥体时，它就有资格进行垃圾收集。

> 为什么我们需要在 Mutex 实例周围包裹一个 WeakReference ？

该地图是[WeakHashMap](http://java.sun.com/javase/6/docs/api/java/util/WeakHashMap.html)：

```
private final Map mutexMap = new WeakHashMap(); 
```

此映射用于保持对互斥体的引用，但如果您对键和值使用相同的对象，则该对象不符合垃圾回收条件。Java 文档：

> 实现说明：WeakHashMap 中的值对象由普通的强引用保存。因此，应注意确保值对象不会直接或间接地强烈引用它们自己的键，因为这将防止键被丢弃。请注意，值对象可以通过 WeakHashMap 本身间接引用其键；也就是说，一个值对象可以强引用某个其他键对象，其关联的值对象反过来又强引用第一个值对象的键。解决这个问题的一种方法是在插入之前将值本身包装在 WeakReferences 中，如：m.put(key, new WeakReference(value))，然后在每次获取时解包。

* * *

> 从 String -> Mutex 创建一个 Map 不是更好吗？

该字符串值何时会被垃圾收集？每次都传递相同的引用吗？是否调用了[intern() ？](http://java.sun.com/javase/6/docs/api/java/lang/String.html#intern())如果我打电话给实习生，字符串会存活多久？如果字符串是键，则互斥体可能在不需要保留对它的引用之后很久就没有资格进行垃圾收集。

* * *

> 为什么我们需要调用 put 两次？

有两种情况需要处理，直到该方法可以在映射中获得对互斥体的强引用：

*   [WeakReference](http://java.sun.com/javase/6/docs/api/java/lang/ref/WeakReference.html)已被垃圾收集（或一开始就没有）
*   WeakReference 的内容在获得对它的引用后被垃圾收集

*put*只会被调用一次；该方法立即返回。

（WeakReference 可以在第二个 put 中重用，但我认为这不会是一个显着的改进。）

* * *

当然，如果有人能在代码中找到错误，请告诉我，我会很乐意纠正它。此外，单元测试会尝试检查实现是否泄漏，因此请随意修改代码并查看运行测试时会发生什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T09:10:20.193

我会说使用`WeakReference`'s 只是因为它们需要引用 http 会话 ID。您不能总是 100% 确定您会收到会话结束的通知，这样会导致地图不断增长。

您第一次调用 put 是因为地图不包含您的密钥。第二次是因为地图确实包含密钥但引用不再存在。

# iis-7 - IIS7中网站绑定的IP数

> ID：823904
> 
> 赞同：0
> 
> 时间：2009-05-05T08:40:02.137
> 
> 标签：iis-7, ssl

在 IIS7 中可以绑定到网站的 IP 数量是否有任何建议或限制？我有一个绑定到多个 IP 的网站（每个都有自己的 SSL 证书），似乎它的 SSL 处理变得非常慢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T09:30:54.433

SSL 在握手中有成本，在实际数据加密中也有成本。所以每个新连接都有一个固定的成本分量，然后是一个与发送的数据长度成正比的成本。

您可以设计您的网站以尽量减少需要加密的内容量，例如通过混合不安全的内容（通过非加密链接提供图像）。（有时会在浏览器中生成提示，但用户似乎总是忽略这一点，所有大网站都使用此技巧）。您也可以尝试最大限度地利用保持连接，尽管这是浏览器应该相当自动地处理的事情。

最终，SSL 的计算量比普通网页服务要大得多，这就是为什么会有一个完整的 SSL 加速卡市场！如果您需要大量使用 SSL，请考虑购买加速器。

# ant - Ant 如何从文件中读取一个值到一个属性值中？

> ID：823909
> 
> 赞同：12
> 
> 时间：2009-05-05T08:42:31.460
> 
> 标签：ant, build-process, build, properties

该文件如下所示：

```
a1,b1
a2,b2
... 
```

我知道值“a2”。如何将值“b2”转换为属性值。

我知道如何通过以下方式选择包含“a2”的行：

```
<linecontains>
  <contains value="a2"/>
</linecontains> 
```

但**我不知道**如何将属性值设置为“b2”。我随时为您提供更多其他信息。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-05T11:01:46.447

以下对我有用：

```
<loadfile srcfile="data" property="result">
     <filterchain>
           <linecontains>
                <contains value="a2"/>
           </linecontains>
           <tokenfilter>
                <replacestring from="a2," to=""/>
           </tokenfilter>
    </filterchain>
</loadfile>
<echo message="${result}"/> 
```

正如您所指出的，首先将选择“a2”的行。然后，tokenfilter 将 a2 和冒号替换为空。希望有帮助。

# php - 当前在 PHP 中防止电子邮件注入攻击的最佳实践是什么？

> ID：823914
> 
> 赞同：3
> 
> 时间：2009-05-05T08:43:24.610
> 
> 标签：php, email, code-injection

如今，从 PHP 电子邮件表单中清理数据的最佳实践是什么？

我目前正在使用这样的东西......

```
$msg = $_POST['msg'];
$email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);
$name = $_POST['name'];

$subject = "Message from the MY_WEBSITE website e-mail system";
$message = "From: " . $name . "\n";
$message .= "Email: " . $email . "\n\n";
$message .= $msg;
$headers = "From: " . $email . "\r\n" .
           "Reply-To: " . $email . "\r\n" .
           "X-Mailer: PHP/" . phpversion();

$mailSuccess = mail("me@example.com", $subject, $message, $headers); 
```

以这种方式简单地过滤电子邮件字段是否足够保护？我可以/应该更有效地强化脚本以防止垃圾邮件发送者吗？

提前致谢！

[编辑]澄清，因为到目前为止的答案表明我没有很好地解释自己。

我主要关心的不是垃圾邮件机器人获取这个脚本，而是任何人利用它向任何地址发送非法电子邮件，而不是`me@example.com`. 这可能包括一个机器人，但也可能是一个击败 CAPTCHA 测试的人。

我正在寻找的是 PHP，它将确保 mail() 方法发送的电子邮件不被劫持。这可能是一个简单地去除某些字符的正则表达式或过滤器或类似的。再次感谢。[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-05T08:47:36.427

我会这样做：

*   使用验证码；
*   如果主题或正文包含任何 HTML 标签，则发送失败。注意：我没有说把它们去掉。只是不要发送电子邮件并向用户提供错误消息原因。向自己发送经过过滤的垃圾邮件毫无意义。只是不要发送它；
*   去掉任何高位或低位字符（filter_vars() 可以做到这一点）；
*   将消息限制为 4000 个字符（或您选择的其他适当限制）；
*   如果消息包含任何不指向当前站点的 URL，则失败；
*   可以说使用了[如何阻止脚本编写者每秒数百次抨击您的网站中的一些技术？](https://stackoverflow.com/questions/450835/how-do-you-stop-scripters-from-slamming-your-website-hundreds-of-times-a-second)以确保有人发送消息。

# asp.net - 我可以在 ii7 中为经典 asp 配置 healthMonitoring 吗？

> ID：823921
> 
> 赞同：0
> 
> 时间：2009-05-05T08:45:15.853
> 
> 标签：asp.net, iis-7, asp-classic, health-monitoring

我看到为了在 ii7 中显示经典 asp 的错误，我必须将 web.config 与 asp.net 的配置一起使用，如下所示：

```
<system.webServer>
                <httpErrors errorMode="Detailed" />
                <asp scriptErrorSentToBrowser="true" />
            </system.webServer> 
```

但：

我可以在经典 asp 中使用 healthMonitoring 来获取有关经典 asp 中错误的电子邮件错误吗？

通过无法收到任何电子邮件进行尝试:(只需重定向到主页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-12T14:45:33.593

据我所知，您不能将 ASP.NET 健康监控用于“经典”ASP 站点。

这个页面，MSDN 网站上的[asp Element - IIS 7 Settings Schema](http://msdn.microsoft.com/en-us/library/ms689477.aspx)`<asp>`详细介绍了节点内`<system.webServer>`节点的所有不同属性，不幸的是，似乎没有开启健康监控的机制。

这是有道理的，因为`<system.webServer>`节点由 IIS7 本身而不是 ASP.NET 运行时处理并定义配置，而健康监控功能是 ASP.NET 特定的，它甚至由 .NET 框架的[System.Web中的类实现.管理命名空间](http://msdn.microsoft.com/en-us/library/system.web.management.aspx)。

也就是说，如果您希望在经典 ASP 应用程序中发生错误时通过电子邮件收到警报，您可以通过将节点的`errorsToNTLog`属性设置为：`<asp>``True`

```
<system.webServer>
  <httpErrors errorMode="Detailed" />
  <asp scriptErrorSentToBrowser="true" errorsToNTLog="True" />
</system.webServer> 
```

这将确保您的应用程序中发生的 ASP 错误将被记录到 Windows 事件日志中。然后，您可以使用单独的实用程序监控这些错误，该实用程序会在写入事件日志条目时向您发送电子邮件通知。

有关如何实现这一点的详细说明，以及执行此操作所需的工具（开源、商业甚至自定义 VBScript）的各种选项，可以在此 ServerFault 帖子中找到：

[Windows 事件日志 - 电子邮件通知](https://serverfault.com/questions/47953/windows-event-log-email-notification)

# c# - 我可以在 XAML 中处理抛出的异常吗？

> ID：823929
> 
> 赞同：4
> 
> 时间：2009-05-05T08:47:32.993
> 
> 标签：c#, wpf, exception, xaml

在我的 XAML 中，我通过绑定到 GetAll 属性来获得所有客户：

```
<ListBox ItemsSource="{Binding GetAll}" 
     ItemTemplate="{StaticResource allCustomersDataTemplate}"
     Style="{StaticResource allCustomersListBox}">
</ListBox> 
```

GetAll 属性是我的视图模型中的一个可观察集合，它调用模型来获取所有客户集合：

```
public class CustomersViewModel
{
    public ObservableCollection<Customer> GetAll {
        get
        {
            try
            {
                return Customer.GetAll;
            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
        }
    }
} 
```

如果模型中出现任何问题（格式错误的 XML 文件等），则异常会一直冒泡到 ViewModel 中的 GetAll 属性。

**第一个问题：**令我感到惊讶的是，***XAML 似乎没有对异常做任何事情，***只是继续前进，什么也不显示。这是设计使然吗？这是“脱钩方法”的一部分吗？

**第二个问题：**这使我认为***我可以以某种方式处理 XAML 中的异常***，例如

*伪代码：*

```
<Trigger>
    <Trigger.OnException>
        <TextBox Text="The customer data could not be loaded."/>
    </Trigger.OnException>
</Trigger> 
```

像上面的代码这样的可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T09:01:17.500

首先，我认为不应捕获 XAML 异常。它们更多地是作为一种工具来帮助开发人员了解他们需要如何修复其 XAML 代码，尽管由于 XAML 标记的动态特性，它们当然必须在运行时（初始化）发生

话虽如此，您可以通过将调用包装在类`InitializeComponents`的构造函数中来非常轻松地处理 XAML 异常`Windows`。然后，您可以捕获所有异常`XamlParseException`，也可以特别捕获任何您认为合适的异常。

[此博客文章](http://geekswithblogs.net/lbugnion/archive/2007/03/14/108728.aspx)中的示例：

```
public partial class Window1 : System.Windows.Window 
{
    public Window1()
    {
        try
        {
            InitializeComponent();
        }
        catch (Exception ex)
        {
            // Log error (including InnerExceptions!)
            // Handle exception
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T14:15:01.303

如果发生错误，您可以使用[FallBackValue提供要在绑定中使用的值。](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)除了使用 FallBackValue 之外，您无法处理 xaml 中的异常。

您可能还想查看[TargetNullValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)，它使某个值等于 Null（例如，如果您设置 TargetNullValue=5 并且您的用户输入 5 您的 setter 将获得 Null 并且如果您的 getter 提供 Null 绑定将显示 5）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T09:01:23.320

我的第一个想法是您可以使用 a `ValueConverter`，检查`value==null`然后通过转换器参数设置视图模型的一些任意属性。然后，您可以在 xaml 中使用常规属性触发器来显示错误。

我很确定你也可以使用绑定验证器来做到这一点，所以我先看看那里。

**编辑：是的，看看[http://msdn.microsoft.com/en-us/library/ms753962.aspx](http://msdn.microsoft.com/en-us/library/ms753962.aspx)了解绑定验证规则的介绍，..这会让你走上正确的道路**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-15T14:56:21.890

是的，您可以使用 XAML 处理异常。它存在于未处理的异常中。此链接可能会有所帮助.. [http://www.wpf-tutorial.com/wpf-application/handling-exceptions/](http://www.wpf-tutorial.com/wpf-application/handling-exceptions/)

# c++ - 在 C++11 中默认函数有什么意义？

> ID：823935
> 
> 赞同：20
> 
> 时间：2009-05-05T08:49:08.747
> 
> 标签：c++, c++11, defaulted-functions

C++11 增加了告诉编译器[创建](http://en.wikipedia.org/wiki/C%2B%2B0x#Defaulting.2Fdeleting_of_standard_functions_on_C.2B.2B_objects)任何[特殊成员函数](http://en.wikipedia.org/wiki/Special_member_functions)的默认实现的能力。虽然我可以看到删除函数的价值，但显式默认函数的价值在哪里？只需将其留空，编译器就会这样做。

我能看到的唯一一点是，只有在不存在其他构造函数时才会创建默认构造函数：

```
class eg {
public:
    eg(int i);
    eg() = default; 
}; 
```

但这真的比你现在做的更好吗？

```
class eg {
public:
    eg(int i);
    eg() {}
}; 
```

还是我错过了一个用例？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-05T09:04:01.393

默认构造函数将有一个声明，并且该声明将受制于正常访问规则。例如，您可以保护默认的复制构造函数。如果没有这些新声明，默认生成的成员是公共的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-05T09:34:26.047

[Stroustrup 网站上的](http://www.stroustrup.com/C++11FAQ.html#default)这些示例可能会帮助您理解这一点：

> **默认和删除功能——默认控制**
> 
> “禁止复制”的常用成语现在可以直接表达：
> 
> ```
> class X {
>   // ...
> 
>   X& operator=(const X&) = delete;    // Disallow copying
>   X(const X&) = delete;
> }; 
> ```
> 
> 相反，我们也可以明确地说我们想要默认的复制行为：
> 
> ```
> class Y {
>   // ...
>   Y& operator=(const Y&) = default;   // default copy semantics
>   Y(const Y&) = default;
> 
> }; 
> ```
> 
> 明确默认值显然是多余的，但对此效果的评论和（更糟糕的）用户明确定义旨在提供默认行为的复制操作并不少见。让编译器来实现默认行为更简单，更不容易出错，并且通常会导致更好的目标代码。“默认”机制可用于任何具有默认值的函数。“删除”机制可用于任何功能。例如，我们可以像这样消除不需要的转换：
> 
> ```
> struct Z {
>   // ...
> 
>   Z(long long);     // can initialize with an long long
>   Z(long) = delete; // but not anything less
> }; 
> ```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-05-05T10:04:35.057

除了更改生成函数的可访问性（私有/受保护）之外，您还可以将它们设为虚拟。

```
struct S
{
    virtual ~S();
    virtual S& operator=(const S&);
};

S::~S() = default;
S& S::operator=(const S&) = default; 
```

可以修改默认功能的以下方面：

*   访问（非公开）
*   虚拟的
*   显式（构造函数）
*   异常规范
*   参数的常数

但要这样做，必须在类之外定义函数（[C++0x Final Committee Draft](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3092.pdf)中的 8.4.2/2 ）。

劳伦斯·克劳尔的原始提案的一个版本在[这里](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2346.htm)。

感谢[Roger Pate](https://stackoverflow.com/users/54262/roger-pate)的澄清和引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T10:31:14.757

1) 隐式生成的析构函数当前不是虚拟的。所以你需要定义它们以使它们成为虚拟的，在这种情况下它们效率不高。使用 =default，您将同时拥有虚拟和高效作为隐式生成的析构函数。

2) 与隐式生成的相反，它们将具有访问说明符。

3）如果你内联你的默认构造函数，你的类仍然是微不足道的。

[这是一篇详细说明此新功能的文章。](http://www.devx.com/cplus/10MinuteSolution/38162/0/page/1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T08:55:36.860

我怀疑能够默认生成复制构造函数实际上很有用。我看不到默认生成默认构造函数的用途，因为正如您所说，您输入的实现会更短。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-03T16:35:12.807

请参阅 Scott Meyer 的巨著“ [Effective Modern C++](https://rads.stackoverflow.com/amzn/click/com/1491903996) ”中的第 17 条。它描述了生成（或不生成）默认复制构造函数、复制操作和移动操作的许多条件。

换句话说，编译器可能不会“无论如何都做”。但是如果默认的特殊成员函数有意义，用户可以使用“default”关键字明确告诉编译器生成一个默认函数，否则不会生成。

来自第 17 条末尾要记住的事情：

> *   仅为缺少明确声明的移动操作、复制操作或析构函数的类生成移动操作。
>     
>     
> *   复制构造函数只为缺少显式声明的复制构造函数的类生成，如果声明了移动操作，它会被删除。复制赋值运算符仅针对缺少显式声明的复制赋值运算符的类生成，如果声明了移动操作，则将其删除。不推荐在具有显式声明的析构函数的类中生成复制操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-09-07T01:46:16.213

如果您有一个具有很多属性的类，则默认值对于复制构造函数更有用。例如，如果你有这个类：

```
class MyClass {
private:
   int offset;
   std::string name;
   std::vector<Person*> relatives;
   float weight;
   MyClass* spouse;
   Vehicle* car;
   double houseArea;
   Date birth;
   Person* parents[2];

public:
   /* Default constructor will be defined here */
}; 
```

而不是以这种方式定义复制构造函数：

```
MyClass(const MyClass& that) :
   offset(that.offset),
   name(that.name),
   relatives(that.relatives),
   weight(that.weight),
   spouse(that.spouse),
   car(that.car),
   houseArea(that.houseArea),
   birth(that.birth),
   parents(that.parents)
{} 
```

你会这样定义：

```
MyClass(const MyClass&) = default; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-05T09:01:33.413

对我来说，它的禁用功能很有用，对于我目前创建的大多数类，我禁用复制和赋值 - 拥有编译器可以识别的功能会很好，而不是依赖于链接器错误。

# c# - 如何取消待机和休眠？

> ID：823937
> 
> 赞同：1
> 
> 时间：2009-05-05T08:50:20.710
> 
> 标签：c#, .net

我的应用程序在 C# 中运行，使用第三方框架。它作为许多应用程序的 UI。我的问题是我的应用程序何时运行并且系统不应发生待机/休眠操作系统操作。不知何故，我必须取消操作系统引发的待机/休眠事件。请任何人在这方面帮助我。

谢谢孙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-22T22:20:43.353

这篇[博文描述了如何使用](http://blogs.msdn.com/delay/archive/2009/09/30/give-your-computer-insomnia-free-tool-and-source-code-to-temporarily-prevent-a-machine-from-going-to-sleep.aspx)[SetThreadExecutionState](http://msdn.microsoft.com/en-us/library/aa373208(VS.85).aspx)防止 PC 进入睡眠状态。代码如下所示：

```
public partial class Window1 : Window
{
    private uint m_previousExecutionState;

    public Window1()
    {
        InitializeComponent();

        // Set new state to prevent system sleep (note: still allows screen saver)
        m_previousExecutionState = NativeMethods.SetThreadExecutionState(
            NativeMethods.ES_CONTINUOUS | NativeMethods.ES_SYSTEM_REQUIRED);
        if (0 == m_previousExecutionState)
        {
            MessageBox.Show("Call to SetThreadExecutionState failed unexpectedly.",
                Title, MessageBoxButton.OK, MessageBoxImage.Error);
            // No way to recover; fail gracefully
            Close();
        }
    }

    protected override void OnClosed(System.EventArgs e)
    {
        base.OnClosed(e);

        // Restore previous state
        if (0 == NativeMethods.SetThreadExecutionState(m_previousExecutionState))
        {
            // No way to recover; already exiting
        }
    }
}

internal static class NativeMethods
{
    // Import SetThreadExecutionState Win32 API and necessary flags
    [DllImport("kernel32.dll")]
    public static extern uint SetThreadExecutionState(uint esFlags);
    public const uint ES_CONTINUOUS = 0x80000000;
    public const uint ES_SYSTEM_REQUIRED = 0x00000001;
} 
```

[如果您喜欢帖子中描述的应用程序，这里](http://blogs.msdn.com/delay/archive/2010/02/01/the-customer-is-always-right-updated-free-tool-and-source-code-to-prevent-a-machine-from-going-to-sleep.aspx)有更新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T09:06:45.850

无法从 .NET 中取消该事件。您必须使用 P/Invoke 和 Win32 API 通过处理`WM_POWERBROADCAST`和返回`BROADCAST_QUERY_DENY`. 看看[这个 CodeGuru 页面](http://www.codeguru.com/cpp/w-p/system/messagehandling/article.php/c6907/#more)，了解正确的方向。

[这个页面](http://netcode.ru/dotnet/?lang=&katID=30&skatID=255&artID=6691)也很有趣，它详细介绍了当用户注销或挂起/休眠时在 .NET 中触发的一些事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-22T22:26:08.290

[Powercfg](http://technet.microsoft.com/en-us/library/cc748940%28WS.10%29.aspx) and [shutdown](http://ss64.com/nt/shutdown.html) (especially `shutdown /a` to abort a system shutdown) might prove useful, possibly.

# asp.net - 自动清理 HttpRequestValidationException 上的条目

> ID：823951
> 
> 赞同：3
> 
> 时间：2009-05-05T08:55:22.227
> 
> 标签：asp.net, master-pages, validation

臭名昭著的`A potentially dangerous Request.Form value was detected from the client`问题:)

这是我的用例：我在网页上有一个[FCKEditor](http://www.fckeditor.net/)控件，它允许用户键入 HTML。该精确网页已关闭验证以允许其使用，但我的母版页具有可以在其他页面上引发回发的链接按钮。

我显然不想在我网站的每个页面上不必要地关闭验证，但我希望能够“静默”地清理输入（通过从请求表单中删除错误字段，或通过验证它） .

我看到可以在页面上覆盖 OnInit 或 ProcessRequest，但如果可能的话，我想在母版页上这样做。（我什至不确定我能否从 中恢复`HttpRequestValidationException`）

知道我该怎么做吗？

**编辑**：我一直在玩 Page_Error，它成功地捕获了错误，但是在我检查请求实际上是合法的之后，我找不到如何恢复处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-09-08T09:43:03.913

关闭验证，因为它在流程中的**错误**阶段进行验证。

输入验证本身就有缺陷；您实际上需要**输出**验证。这意味着您可以接收任何数据，但您在打印之前对其进行编码，以用于将显示的相关上下文。因此，对于直接写入 HTML 页面，您可以使用`HttpUtility.HtmlEncode`, 和其他此类编码技术，具体取决于上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-08T12:27:46.003

我认为您应该能够使用[Richard](https://stackoverflow.com/users/43337/richard)提到的全局异常处理，但可能需要添加对[ClearError](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.clearerror.aspx)的调用以摆脱**HttpRequestValidationException**并继续请求。这样的事情可能会奏效：

```
protected void Application_Error(object sender, EventArgs e) {
    Exception ex = Server.GetLastError().GetBaseException();
    if (ex.Message.StartsWith("A potentially dangerous Request.Form value was detected")) {
        Server.ClearError();
    }
} 
```

可能值得检查 Request.Url 和/或 Request.UrlReferer 以确保请求也来自您的 FCKEditor 页面。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-14T11:45:54.513

您的链接按钮需要是按钮（发布）还是可以将它们变成实际的链接（获取）？如果您没有传回任何数据并且您不需要知道单击了哪个按钮，那么我建议您只使用链接。获取请求不会携带页面上的任何表单数据，因此您不会在其他页面上收到错误。如果需要，请在链接上使用 CSS 样式来获得按钮外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-14T15:51:54.790

编辑：我一直在玩 Page_Error，它成功地捕获了错误，但是在我检查请求实际上是合法的之后，我找不到如何恢复处理：

```
 protected void Page_Error(object sender, EventArgs e)
    {
        if (Server.GetLastError() is HttpRequestValidationException)
        {
            Server.ClearError();
            //CreateChildControls();
            base.OnPreInit(e); //yeah, ugly as hell
        }
    } 
```

不工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-08T09:50:02.393

如果您想以特定方式处理异常并在此过程中检查请求，您可能需要考虑全局异常处理。这里有一篇简短的文章：

[http://www.developer.com/net/asp/article.php/961301](http://www.developer.com/net/asp/article.php/961301)

希望这可以帮助。

# jquery - 使用 jquery 淡出内容

> ID：823953
> 
> 赞同：-3
> 
> 时间：2009-05-05T08:55:58.543
> 
> 标签：jquery, jquery-animate, fadeout

我如何使用 jquery 淡出 div

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T09:03:56.310

你意识到 jQuery 有一个带有[文档](http://docs.jquery.com/Main_Page)[的网站](http://jquery.com/)，对吧？

如果您查看该文档，您会发现[答案](http://docs.jquery.com/Effects/fadeOut)。

```
$("#theIDofYourDivTag").fadeOut("slow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T08:59:11.640

```
$('#myDiv').fadeOut("slow"); 
```

# c# - 如何将可选参数放入方法中？

> ID：823967
> 
> 赞同：0
> 
> 时间：2009-05-05T09:00:26.083
> 
> 标签：c#, methods

是否可以在方法中声明可选参数？

例如，在 delphi 中，我可以执行以下操作：

```
procedure Test(p1:integer;p2:integer;p3:integer = 2;p4:integer = 4) 
```

当我调用该函数时，我可以使用四个参数或两个参数调用它：

```
Test(2,3); //p3 = 2,p4 = 4.
Test(2,3,4,5); //p3 = 4,p4 = 5; 
```

这在 C# 中怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T09:02:36.327

恐怕这在 C# 1 到 3 中是不可能的。但是，好消息是因为它是一个非常需要的功能（尽管肯定有些人不愿意看到它），微软最终决定添加它到 C# 4。

C# 4 语法如下：

```
public static void SayHello(string s = "Hello World!")
{
    Console.WriteLine(s);
} 
```

用法：

```
SayHello(); // Prints "Hello World!"
SayHello("Hello."); // Prints "Hello."
SayHello(s: "Hello."); // Prints "Hello." 
```

（最后一个示例使用了命名参数，在这种情况下确实没有必要，但当您有多个可选参数时会有所帮助。）

[您可以在此博客文章](http://bartdesmet.net/blogs/bart/archive/2008/10/31/c-4-0-feature-focus-part-1-optional-parameters.aspx)中阅读有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-05T09:03:33.843

您要么必须等待支持可选参数的[C# 4.0](http://channel9.msdn.com/posts/mike+ormond/C-40-New-Features-Optional-Parameters/)，要么使用标准重载机制：

```
void Test(int p1, int p2, int p3, int p4)
{ }

void Test(int p1, int p2)
{
    Test(p1, p2, 2, 4);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-05T09:04:10.427

这在 C# 4.0 中是可能的，但是在发布之前，您可以通过创建方法的重载版本来解决它：

```
public void MyMethod( int a, int b, int c )
{
    ...
}

public void MyMethod( int a, int b)
{
   MyMethod(a, b, 4);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-05T09:02:22.007

您可以使用可变参数

使用 params 关键字。

```
void paramsExample(params int[] argsRest)
{

 if(argsRest.Length == 2) then...
 else if(argsRest.Length == 4) then...
 else error...

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-05T09:13:49.530

```
using System;
using System.Runtime.InteropServices;

   public static void SayHello([Optional][DefaultParameterValue("Hello Universe!")] string s)
   {
      Console.WriteLine(s);
   } 
```

完毕！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T09:02:30.727

你还不能这样做。我认为这是[C# 4.0 的一个特性](http://codebetter.com/blogs/matthew.podwysocki/archive/2008/10/28/named-and-optional-arguments-in-c-4-0.aspx111)。

您可以使用 params 作为解决方法，但这只能按顺序使用，而不是某些语言处理默认参数的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T09:04:11.050

你使用这样的重载

```
Test(int p1, int p2)
Test(int p1, int p2, int p3) 
```

您可以让他们像这样调用私有方法

```
Test(int[] ps) 
```

然后处理数据。

处理此问题的另一种方法是不使用重载/可选参数，而是根据它们要做什么来命名方法——这似乎是一个糟糕的权衡，但你的代码可能会更容易阅读。

# asp.net - 上传过大文件时显示有意义的错误

> ID：823968
> 
> 赞同：3
> 
> 时间：2009-05-05T09:00:41.450
> 
> 标签：asp.net, file-upload

我们对我们网站上的上传文件大小设置了固定限制 - 低于默认 asp.net 和 iis 设置的大小。

我在 Application_BeginRequest 中有一个简单的捕获设置来捕获这个（它不是 excat，因为它检查 ContentLength 包括所有其他表单数据，但它已经足够好了）。我想恢复处理用户尝试上传到的页面，或者作为后备计划将用户重定向到一个页面，解释文件大小太大（我们已经有一个解释这一点的字幕，但你知道用户 - '他们不需要阅读没有臭味的字幕'）。

所以有什么问题？好吧，似乎我的响应已经发送给用户 - 一个 404 说明找不到该页面。我不想要这种行为，我想刷新这个响应，因为它不是我希望用户看到的——我想展示别的东西——建立我自己的响应、重定向或只是处理他们应该得到的页面无论如何。

我认为问题可能仍然是 IIS 拒绝请求/发布，因为文件比 IIS 想要的要大。我真的很喜欢这个 - 一个试图上传 20meg 图片的疯狂用户不应该被允许对 IIS 进行 DoS 攻击，但这是真的吗？或者我是否有机会拦截对用户的响应 - 而不是增加 IIS 上的最大大小并因此花费带宽来接收此文件，我只想将此帖子标识为“太大”并发送适当的响应回给用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-10T19:48:25.737

很棒的资源！

我使用上面的链接来实现对上传到服务器的文件的捕获，这些文件太大并被重定向到默认错误页面

web.config ->

```
 < customErrors mode="RemoteOnly" defaultRedirect="~/GenericError.htm" /> 
```

MyPage.aspx.cs ->

```
 protected void Page_Error(object sender, EventArgs e)
    {
        if (HttpContext.Current.Error is HttpException)
            if ((HttpContext.Current.Error as HttpException).ErrorCode == -2147467259)
            {
                Server.ClearError();
                Response.Redirect(@"~/FileSizeError.htm", false);
            }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-05T10:37:34.383

我遇到了同样的问题，经过大量搜索似乎没有完美的解决方案。您可以更改最大请求长度以设置 IIS 将在哪个点处理 ASP.Net 错误。您还可以在 global.asax 上捕获此错误并向用户显示更友好的错误页面。

您可以在此处找到有关执行此操作的更多信息[http://www.developer.com/db/article.php/10920_3426051_2](http://www.developer.com/db/article.php/10920_3426051_2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:37:09.587

上面的答案在 IIS 7.5 上对我不起作用。我们最终得出以下结论：

```
void Application_PreSendRequestHeaders(Object sender, EventArgs e)
{
    if (
        Request.Headers["Content-Length"] != null && 
        int.Parse(Request.Headers["Content-Length"]) > 150000000 &&
        Request.RawUrl.EndsWith("/Release/ProjectReleases.aspx?Mode=Create"))
    {
        try
        {
            Response.Redirect("http://anyurl", true);
        }
        catch (HttpException ex)
        {
            if (ex.Message == "Maximum request length exceeded.")
            {
                Server.ClearError();
                Response.ClearHeaders();
                Response.Redirect("http://www.edward-williams.com", true);
            }
        }
    }
} 
```

不必修改最大上传大小。授予最终版本实际上根据 web.config 中的值设置最大上传大小的静态值，并重定向到自定义错误页面与该主页，但你明白了。

# c++ - 是否可以使用 boost.any 作为 std::map 中的键（或类似的东西）？

> ID：823971
> 
> 赞同：2
> 
> 时间：2009-05-05T09:01:20.777
> 
> 标签：c++, boost

`std::map<any, string>`不工作所以我想知道是否有另一种方法来拥有任意键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T09:11:40.563

我认为问题不在于`Boost::Any`，而在于您没有指定自定义比较器这一事实。由于`map`是排序的关联容器，因此您需要有一个比较器。

以下对我有用：根据您的目的定制它：

```
#include <iostream>
#include <map>
#include <boost/any.hpp>

using namespace std;    
struct cmp {
    bool operator()(const boost::any& l, const boost::any& r) {
        try
        {
            int left = boost::any_cast<int>(l);
            int right = boost::any_cast<int>(r);
            return left < right;
        }
        catch(const boost::bad_any_cast &)
        {
            return false;
        }

        return false;
    }
};
int main() {   
    map<boost::any, string, cmp> ma;
     boost::any to_append = 42;
     ma.insert(std::make_pair(to_append, "int"));
    if (ma.find(42) != ma.end()) {
        cout << "hurray!\n";
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T09:43:06.213

您可能想查看`boost::variant`而不是`boost::any`，因此您可以确定您使用的所有类型都是可比较的。

使用访问者将是为 s 提供比较运算符的最佳方式`variant`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-24T18:55:56.870

使用 if(any.type() == other.type())

# vmware - VMware Virtual Infrastructure Remote CLI 在 ESX/i 中查找未使用的机器/磁盘

> ID：823987
> 
> 赞同：1
> 
> 时间：2009-05-05T09:04:55.387
> 
> 标签：vmware, esx, esxi

在 VMware ESX/i 中，如何使用 VMware Virtual Infrastructure Remote CLI 查找未使用的机器/磁盘？我有大量的库存和磁盘上的许多文件，我想找到可以删除的文件。

我想要的是确定是否

*   主机上的任何机器都在使用磁盘，或者`vmdk`是否`vmx`
*   一`vmx`台机器存在于主机的清单中。

肯定有一些聪明的方法可以找到这个吗？如果不是 VIRCLI，那么也许还有别的？或者我需要虚拟中心吗？

**编辑：**这是一个不与任何其他主机共享机器或磁盘的单一主机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-06T01:28:29.420

IC 不知道您是否将这些磁盘共享给*另一个*ESXi 主机使用，后端有一个 SAN 并且多个主机访问同一存储设备是很常见的。在这种情况下，无法知道哪些主机正在访问哪些机器，您所描述的场景只有在您拥有一台主机时才有意义——这对于 VMware 的许多企业客户来说不是典型的场景。

使用 RCLI 或 shell，您可以遍历所有现有机器，然后将其与磁盘上的内容列表进行比较。但是，如果您在主机之间共享磁盘，那么事情会变得更加复杂，您还需要遍历每台机器上的设备。

**更新：**对，现在它更像是一个疯狂的脚本/编程问题；）

从[RCLI 文档](http://www.vmware.com/pdf/vi3_35/esx_3/r35u2/vi3_35_25_u2_rcli.pdf)开始，我可能会做一些事情，比如使用`vmware-cmd -l`列出主机上所有已注册的机器。然后使用`vifs`下载配置文件，`grep`通过那些寻找虚拟磁盘的提及（`.vmdk`）并将所有这些存储在一个文件中。

第二部分，将编写一个脚本来执行递归目录列表，再次使用`vifs`，再次在其上运行`grep`以仅包含`.vmdk`和`.vmx`文件。现在你有两个列表，通过管道传递这些列表，`sort`然后`diff`找出哪些`.vmx`文件没有在机器上注册，哪些`.vmdk`文件没有被任何活动的 VM 使用。然后你有你的候选人删除:)

# iis - IIS 7 的 Clickonce 部署问题

> ID：823989
> 
> 赞同：1
> 
> 时间：2009-05-05T09:06:01.903
> 
> 标签：iis, deployment, iis-7, clickonce

我有一个“ClickOnce”应用程序，从 Win2K3 服务器和 IIS 6 部署时没有任何问题。

但是无法从 Windows Server 2008/IIS7 部署相同的应用程序，在客户端计算机上安装期间，我收到一个 404 文件未找到（在 .config 文件上，而不是在清单文件之一上）。

在 IIS 中，mime 类型 .application、.deploy 和 .manifest 被正确声明，虚拟文件​​夹只有读取和脚本执行权限，它使用经典的 .NET AppPool。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-06T09:43:20.777

经过一番研究，我找到了这篇[文章](http://support.microsoft.com/kb/942045)，发现 .config 文件扩展名没有权限。我按照[文章](http://support.microsoft.com/kb/942045)上的说明进行操作，一切正常。

# asp.net - Web 应用程序必须支持后退按钮吗？

> ID：823990
> 
> 赞同：2
> 
> 时间：2009-05-05T09:06:02.840
> 
> 标签：asp.net, robustness

我对一个新的 ASP.NET 应用程序进行了系统测试。在我的浏览器 (IE 7) 中使用 BACK 按钮时，我遇到了几个异常。

我在评论记录中声明，Web 应用程序必须支持使用 BACK 按钮（或者至少可以优雅地处理它，例如会话超时警告）。团队负责人不同意我的看法，因为他说 web 应用程序不应该**默认**支持使用后退按钮。

你同意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T09:11:43.903

我个人的观点是，任何网站如果不能合理优雅地处理后退按钮，如果不是完全正确的话，都会在可用性方面造成巨大的打击。人们理解后退按钮。此外，他们喜欢它。

页面加载速度可能很慢。我不想每次打开列表中的项目时都必须完全加载页面才能返回该列表。

使用 POST+REDIRECT+GET 和其他习惯用法，您可以通过后退按钮获得良好的行为，这就是您应该努力的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-05T19:13:41.333

我认为所有的网络应用程序都应该支持后退按钮。如果它破坏了您的应用程序并且您无法为其编写代码，那么至少在导航离开事件中添加一些 javascript 以让用户知道不支持后退按钮并且使用它可能会导致工作丢失。

当您单击后退按钮并进入非工作页面并最终丢失您正在处理的内容时，这令人沮丧。

支持它或至少确保用户知道他们不能使用它，并在他们出于习惯点击它时提醒他们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-05T18:58:44.960

您应该绝对支持 Web 应用程序中的后退按钮。用户确实假设支持此功能。

[您可以在此博客文章http://blog.andreloker.de/post/2008/06/Post-Redirect-Get.aspx](http://blog.andreloker.de/post/2008/06/Post-Redirect-Get.aspx)或维基百科[http://en.wikipedia.org/wiki/Post/Redirect/](http://en.wikipedia.org/wiki/Post/Redirect/Get)上阅读有关 PRG 的信息[得到](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-05T09:10:31.817

是的，是的，他们应该这样做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T21:05:29.453

所有应用程序都应支持后退按钮。每个人都使用它，你不能告诉你的用户仅仅为了你的网页改变他们的浏览习惯。是的，这很琐碎，但用户也是如此。以我为例。不开玩笑，我不会使用不支持后退按钮的网页/应用程序。第一次发生时让我感到沮丧，我寻找下一个谷歌结果。

# viewmodel - ViewModel 模式最大的痛点是什么？

> ID：823992
> 
> 赞同：3
> 
> 时间：2009-05-05T09:06:09.097
> 
> 标签：viewmodel, mvvm, presentation-model

Glenn Block 和我一直在研究 ViewModel 模式。我们一直在尝试确定与该模式相关的最大痛点，目标是添加框架支持以减轻痛苦。

今晚，格伦发布了[“查看模型”——这部电影，投出你的一票](http://codebetter.com/blogs/glenn.block/archive/2009/05/04/view-model-the-movie-cast-your-vote.aspx)。我们希望收到你的来信。请在此处发布（并投票）关于实现 ViewModel 模式（也称为 Model-View-ViewModel 或 MVVM）的最大痛点。告诉我们该框架如何让您的生活更轻松！

我们正在研究 WPF 和 Silverlight。

**那么告诉我们，您希望框架做什么来使 ViewModel 更容易？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T16:00:09.037

*   对象爆炸（现在我们有模型和视图模型）。
*   将模型映射到视图模型，反之亦然。

我认为两者都是必要的邪恶，但它们是痛点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-07-02T13:26:28.620

**收藏品。**

我希望我的模型拥有其他模型对象的集合，但将我的 GUI 绑定到 ViewModel 对象的集合。

我可以`ObservableCollection<TViewModel>`在我的 ViewModel 层中创建一个，并为模型级集合中的每个项目手动填充一个 ViewModel。这很好——当程序启动时。但是，当用户单击“添加”按钮时会发生什么？还是删除按钮？还是上移/下移？等等。

是的，我可以编写代码来使 ViewModel 列表与 Model 列表保持同步，但是有很多微妙的边缘情况，并且需要大量工作（和大量测试）才能正确处理所有细节。这是一个常见的场景，应该被纳入框架。（请？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-18T17:37:21.833

INotifyCollectionChanged 支持有关更改范围的通知，但是当您尝试发布范围更新时，所有 WPF 集合控件都会引发范围不受支持的异常。这意味着如果您向容器中添加 10 个项目，则布局会重新评估 10 次，这对于复杂的控件来说非常慢！

解决方案是向 Observable 集合添加 SuspendNotifocations 和 ResumeNotifications 方法，并使所有 WPF 控件都知道范围更新（用例：暂停、添加项目、恢复，一次绘制所有项目）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-13T18:25:20.820

在 ViewModel 类中创建的属性太多。至少我所看到的，对于您想要访问/绑定的 UI 元素的每个属性，您需要在 ViewModel 中创建太多代码来维护的属性。

# asp.net - 如何检查 ASP.NET 角色的权限

> ID：823996
> 
> 赞同：0
> 
> 时间：2009-05-05T09:06:46.567
> 
> 标签：asp.net, security

我如何使用声明性安全性（“[PrincipalPermissionAttribute(SecurityAction.Demand, Role = "")]) 但我不想检查角色我需要检查该角色的权限？因为我有每个角色的角色和权限如何我可以对权限使用声明性安全性吗？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-05T13:13:47.533

如果您想将 Roles 与 Permissions 表联系起来，您可能需要编写自己的类。我还没有阅读这个链接，但看看下面的[演练](http://msdn.microsoft.com/en-us/library/ms172766(VS.80).aspx)是否有帮助......

**编辑：**或者，您可以将 Permissions 值存储在每个用户的[Profile](http://msdn.microsoft.com/en-us/library/2y3fs9xs(VS.80).aspx)中，无论是使用默认提供者[之一还是您自己开发](http://msdn.microsoft.com/en-us/magazine/cc163457.aspx)的提供者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-05T09:10:07.447

角色在 asp.net 中没有权限……它们是权限。

Page.User.IsInRole("FileUploader") Page.User.IsInRole("Administrator")

[http://msdn.microsoft.com/en-us/library/5k850zwb.aspx](http://msdn.microsoft.com/en-us/library/5k850zwb.aspx)

# compact-framework - C# - 阻止代码在设计器中执行

> ID：823998
> 
> 赞同：2
> 
> 时间：2009-05-05T09:07:32.760
> 
> 标签：compact-framework, image-processing, c#-2.0, image-manipulation

我正在执行无法在设计器中执行的代码行，导致我的所有控件的公共属性不再显示在设计器中。因此，我再也看不到在 Visual Studios 设计视图中使用该控件的任何表单。

有问题的代码行调用了一个不安全的代码项目，它做了一些图像处理；评论它使设计视图恢复生机。但是，代码执行得很好，所以我看不出为什么代码在设计器中失败了。这是被调用的代码：

```
 /// <summary>
        /// Performs a color adjustment on the source bitmap. 
        /// </summary>
        /// <param name="source">The bitmap to be processed. This is changed by the
        /// process action.</param>
        /// <param name="redChange">change to the red value. Can be negative.</param>
        /// <param name="greenChange">change to the green value. Can be negative.</param>
        /// <param name="blueChange">change to the blue value. Can be negative.</param>
        /// <returns></returns>
        public static Bitmap ProcessColor(Bitmap source, int redChange, int greenChange, int blueChange)
        {
            sourceBitmap = source;

            // lock the source bitmap
            sourceBitmapData = getBitmapData(sourceBitmap, ref sourceWidth);
            sourcepBase = (Byte*)sourceBitmapData.Scan0.ToPointer();

            PixelData* pPixel;

            for (int y = 0; y < source.Height; y++)
            {
                pPixel = (PixelData*)(sourcepBase + y * sourceWidth);
                for (int x = 0; x < source.Width; x++)
                {
                    int redVal = pPixel->red + redChange;
                    if ( redVal <0 ) redVal = 0;
                    if ( redVal > 255) redVal = 255;
                    pPixel->red = (byte)redVal;

                    int greenVal = pPixel->green + greenChange;
                    if ( greenVal <0 ) greenVal = 0;
                    if ( greenVal > 255) greenVal = 255;
                    pPixel->green = (byte)greenVal;

                    int blueVal = pPixel->blue + blueChange;
                    if (blueVal < 0) blueVal = 0;
                    if (blueVal > 255) blueVal = 255;
                    pPixel->blue = (byte)blueVal;

                    pPixel++;
                }
            }

            sourceBitmap.UnlockBits(sourceBitmapData);
            sourceBitmapData = null;
            sourcepBase = null;

            return source;
        } 
```

（由 OpenNETCF 社区提供）

我的项目没有被标记为不安全，但是上面代码所在的项目被标记为不安全。这两个项目都需要标记为不安全吗？

或者，有没有一种方法可以阻止在设计器中触发该行代码（在设计视图中我实际上不需要此代码的输出，因为它只是从提供的图像生成图像的禁用版本）。

**编辑：阻止代码运行并不能解决问题。只有注释掉线才能使设计视图起作用。将行放入（即使放入 if[false == true] 语句）会导致设计人员显示错误，而不是表单。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-05T09:09:38.930

将部分代码包装在`if`：

```
if(!DesignMode)
{
    // Your "unsafe" code goes here
} 
```

如果您使用的是 Compact Framework，请使用以下命令：

```
if(Site != null && !Site.DesignMode)
{
    // Your "unsafe" code goes here
} 
```

请参阅有关模式信息的[这篇文章](http://decav.com/blogs/andre/archive/2007/04/18/1078.aspx)，了解野兽`DesignMode`实际上是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T04:13:17.043

我没有创建这个，但我想我会添加一个有用的技巧找到[-->here<--](http://www.global-webnet.net/blogengine/post/2009/03/14/Mobile-Compact-Framework-UserControl-DesignMode-null-in-constructor.aspx)。

只需将其添加到您的控件并适当地使用它。

```
public static bool IsDesignMode
{
  get 
  { 
    return AppDomain.CurrentDomain.FriendlyName.Contains("DefaultDomain"); 
  }
} 
```

或者对于我们 VB.NET 的人来说：

```
 Public Shared ReadOnly Property IsDesignMode() As Boolean
    Get
      Return AppDomain.CurrentDomain.FriendlyName.Contains("DefaultDomain")
    End Get
  End Property 
```