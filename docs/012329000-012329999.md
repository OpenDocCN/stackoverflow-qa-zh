# StackOverflow 问答 12329000-12329999

# loops - 两个循环嵌套在 x86 程序集中的另一个循环中

> ID：12329001
> 
> 赞同：3
> 
> 时间：2012-09-08T07:44:20.387
> 
> 标签：loops, assembly, nested-loops, tasm

我在汇编语言中循环出现问题。

当我们想在嵌套循环中使用计数器寄存器进行循环时，我们首先要做的是将计数器寄存器的值移动到外部循环的堆栈中，然后在内循环完成时将其取回，这样我们' re 能够使用一个计数器寄存器循环进入嵌套循环，每个循环具有不同的迭代次数。

但是嵌套循环中的嵌套循环呢？

我想打印一个由字符组成的金字塔`S`。我得到的是，

```
SSSSSSSSSS
SSSSSSSSS
SSSSSSSS
SSSSSSS
SSSSSS
SSSSS
SSSS
SSS
SS
S 
```

我真正想要的是，

```
 SSSSSSSSSS
  SSSSSSSS
   SSSSSS
    SSSS
     SS
     S 
```

这是我的程序代码

```
MOV BX,10           ; HOLD 10 IN BX FOR INNER LOOP
     MOV AX,0           ; START ITERATIONS FROM 0
     MOV CX,10          ; MAX NUMBER OF ITERATIONS

    L2:

        PUSH CX         ;PUSH CX IN A STACK
        MOV CX,BX       ;STORE NEW VALUE IN CX FOR INNER LOOP ITERATION

            L1:

                MOV DX, [SI]               ; MOVE THE STRING INTO DX
                MOV AH,02H                 ; DISPLAY EVERYTHING FROM DX
                INT 21H

            LOOP L1

        MOV DX,0AH     ;PRINT LINE FEED AFTER PRINTING EACH LINE OF ASTERIKS
        MOV AH,02H
        INT 21H

        SUB BX,01     ;DECREASE THE VALUE OF BX BY 1

        POP CX        ;RESTORE ORIGINAL VALUE OF CX FOR OUTER LOOP
        ADD AX,01     ;INCREMENT VALUE OF AX BY 1

    LOOP L2

     MOV AH, 4CH                  ;RETURN CONTROL TO DOS
     INT 21H 
```

为了达到我想要的效果，我需要在嵌套循环中添加另一个循环来打印空格字符（即 020H）。但为此，我需要另一个计数器寄存器，但我做不到。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:07:25.477

您已经在做给定 ASM 中需要做的事情。您可以将 CX 的当前值推送到堆栈（保存）并稍后将其弹出以恢复它。当您需要额外的嵌套时，您需要这样做。

在 JohnB 提供的代码中，他只是简单地添加了一个循环以在打印星号之前打印出空格。不需要额外的嵌套，这意味着它相当简单。

有点像这样：

```
For each line
    Print an incrementing number of spaces
    Print a decrementing number of asterisks
Repeat 
```

这正是 JohnB 向您展示的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T07:56:19.443

差不多这样？

```
L2:

    PUSH CX         ;PUSH CX IN A STACK

    ; insert this
    MOV CX, 10      ; width of your tree = 10
    SUB CX, BX      ; subtract length of "s" string
    SHR CX, 1       ; divide CX by 2 => number of spaces at the beginning
    JCXZ endL3      ; no spaces? don't do anything

       L3:
            MOV DX, 20H ; space character
            MOV AH,02H                 ; print space
            INT 21H

        LOOP L3

    endL3:

    MOV CX,BX       ;STORE NEW VALUE IN CX FOR INNER LOOP ITERATION

        L1:

            MOV DX, [SI]               ; MOVE THE STRING INTO DX
            MOV AH,02H                 ; DISPLAY EVERYTHING FROM DX
            INT 21H

        LOOP L1

    MOV DX,0AH     ;PRINT LINE FEED AFTER PRINTING EACH LINE OF ASTERIKS
    MOV AH,02H
    INT 21H

    SUB BX,01     ;DECREASE THE VALUE OF BX BY 1

    POP CX        ;RESTORE ORIGINAL VALUE OF CX FOR OUTER LOOP
    ADD AX,01     ;INCREMENT VALUE OF AX BY 1

LOOP L2 
```

顺便说一句，您初始化和递增 AX 的目的是什么？将数据移动到 AH/AL 时，无论如何都要覆盖它。

# sql - SQLite - 返回包含所有行的列总数

> ID：12329003
> 
> 赞同：0
> 
> 时间：2012-09-08T07:44:37.150
> 
> 标签：sql, sqlite

我有以下 SQLite 表：

```
transaction_amount     transaction_date
50                     09/06/2012
50                     09/06/2012
75                     09/07/2012 
```

我希望获得列 transaction_amount 的总金额。如果我这样写我的 SQL 查询：

```
SELECT transaction_amount,transaction_date, SUM(transaction_amount) AS 
Total FROM prepaid_tbl WHERE playerID = 17 ORDER BY id DESC 
```

我得到以下结果：

```
 transaction_amount     transaction_date  Total
 75                     09/07/2012        175 
```

我需要与总数一起返回所有三行。所以，如果我这样写 SQL 语句：

```
SELECT transaction_amount,transaction_date,(SELECT SUM(transaction_amount) 
FROM prepaid_tbl WHERE playerID = 17)Total FROM prepaid_tbl WHERE 
playerID = 17 ORDER BY id DESC 
```

我现在得到了我正在寻找的结果：

```
transaction_amount     transaction_date    Total
50                     09/06/2012          175
50                     09/06/2012          175
75                     09/07/2012          175 
```

所以，我的简单问题是这是获得我想要的结果的最佳方法/实践。我无论如何都不是 SQL 专家，所以我仍然不确定为什么第一种方法没有返回我想要的结果。任何见解都值得赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:48:01.903

你可以做`cartesian join`来解决你的问题

```
SELECT  a.transaction_amount,
        a.transaction_date,
        b.Total
FROM prepaid_tbl  a,
        (
            SELECT  SUM(transaction_amount) AS  Total 
            FROM prepaid_tbl 
            WHERE playerID = 17 
        ) b
WHERE a.playerID = 17 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!7/0a3eb/1)

# javascript - 滚动到下一个元素

> ID：12329008
> 
> 赞同：3
> 
> 时间：2012-09-08T07:44:57.337
> 
> 标签：javascript, jquery, class, scroll, scrollto

我正在努力解决 jquery 或 javascript 问题。

它已经很烦人了，这告诉我我可能认为这个太复杂了。

**所以我的标记（简化）看起来像这样：**

```
<div class="container">
    My Content
<a href="#" class="button">scroll down</a>
</div>

<div class="container">
    My Content
<a href="#" class="button">scroll down</a>
</div>

<div class="container">
    My Content
<a href="#" class="button">scroll down</a>
</div>

<div class="container">
    My Content
<a href="#" class="button">scroll down</a>
</div> 
```

基本上只是一些容器。

每个都包含不同的内容和一个按钮。

* * *

**计划：**

1）单击按钮后，窗口应向下滚动到**下一个容器**。

2) 最后一个按钮再次**滚动到第一个**容器。所以我需要一个**循环**。

3) 容器的**数量**可能会因页面而异。

**编辑：** 4）容器可能并不总是彼此直接的兄弟姐妹（见下面的标记）

* * *

**问题：**

我可以通过给每个容器一个唯一的 ID 作为滚动效果的目标来实现这一点。

问题在于它很快就会变得混乱。

我不能以某种方式定位“*类的下一个对象：容器*”，然后滚动到那个吗？

* * *

我不确定 js 或 jquery 是否是正确的方法。我对这两个方面的了解都有些有限。

**我将非常感谢朝着正确的方向前进。**

* * *

**编辑：**容器可能并不总是彼此的直接兄弟姐妹。

```
<div class="row">
        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>

        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>
</div>        

        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>

        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>

<div class="row">
        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>

        <div class="container">
            My Content
        <a href="#" class="button">scroll down</a>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T07:46:24.443

## 简单的解决方案：

要获取下一个容器，请尝试使用[`next()`](http://api.jquery.com/next/).

基本上，`<div>`容器是彼此的兄弟，所以调用`.next()`一个 div 容器会给你下一个。

```
$(".button").on("click", function(e) {
    $(document).scrollTop($(this).parent().next().offset().top);
    // $(this).parent().next() // this is the next div container.
    return false; // prevent anchor
}); 
```

[**http://jsfiddle.net/Pm3cj/1/**](http://jsfiddle.net/Pm3cj/1/)

您只需使用`$(this)`获取链接对象，`.parent()`获取链接的父级，即`<div>`，然后`.next()`获取下一个兄弟（注意它会自动换行，所以最后一个之后的兄弟`<div>`是第**一个** `<div>!),`.offset() `to get its position relative to the page,`.top`得到它相对于顶部边框。

然后，您只需使用`$(document).scrollTop()`滚动到该位置。

* * *

## 对于完全通用的解决方案，请使用：

```
$(".button").on("click", function(e) {
    container = $(this).parent();

    // if I am the last .container in my group...
    while (    document != container[0] // not reached root
            && container.find('~.container, ~:has(.container)').length == 0)
        container = container.parent(); // search siblings of parent instead

    nextdiv = container.nextAll('.container, :has(.container)').first();

    // no next .container found, go back to first container
    if (nextdiv.length==0) nextdiv = $(document).find('.container:first');

    $(document).scrollTop(nextdiv.offset().top);
    // $(this).parent().next() // this is the next div container.
    return false;
}); 
```

该代码基本上用于`container.find('~.container, ~:has(.container)')`查找任何具有或是`.container`. 如果没有，则向上 DOM 树 1 步。

在它找到某个是或具有 的东西后`.container`，它会用 抓住它`nextdiv = container.nextAll('.container, :has(.container)').first();`。

最后，如果没有找到，通过检查`nextdiv.length==0`，只需抓取`.container`整个页面中的第一个。

然后滚动到`.container`抓取的任何内容。

[**http://jsfiddle.net/Pm3cj/3/**](http://jsfiddle.net/Pm3cj/3/)

* * *

要为滚动设置动画，请将`scrollTop`属性放在`animate`函数中：

```
// $(document).scrollTop(nextdiv.offset().top); // snaps to new scroll position
$('body').animate({scrollTop:nextdiv.offset().top},300); // animates scrolling 
```

[**http://jsfiddle.net/Pm3cj/4/**](http://jsfiddle.net/Pm3cj/4/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-08T07:51:54.130

不需要 JavaScript。您可以使用 HTML 锚点。

```
<div class="container" id="first">
    My Content
<a href="#second" class="button">scroll down</a>
</div>

<div class="container" id="second">
    My Content
<a href="#third" class="button">scroll down</a>
</div>

<div class="container" id="third">
    My Content
<a href="#fourth" class="button">scroll down</a>
</div>

<div class="container" id="fourth">
    My Content
<a href="#first" class="button">scroll down</a>
</div> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-08T07:59:22.993

您想要的可以通过`parent()`和轻松实现`child()`。

如果每个页面上的容器数量不同，那么您应该依次开始 ID'ing（不知道这是不是一个术语）容器。就像是，`class="container-1"`

最后一个按钮上的单击事件应该执行以下操作：

```
var num = $('div[class^="container-"]').filter(function() {
    return((" " + this.className + " ").match(/\scontainer-\d+\s/) != null);
});
num++;
var last_container = $(this).parent('.container' + num);
last_container .scrollTo(); 
```

相信您可以弄清楚下一个按钮应该做什么；）

# c# - 网页倒计时和自动提交

> ID：12329013
> 
> 赞同：0
> 
> 时间：2012-09-08T07:46:20.290
> 
> 标签：c#, javascript, asp.net

我正在做一个在线考试项目。我想在 10 分钟后提交一个页面，即使用户没有点击提交按钮。另外，我想显示时间倒计时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T07:47:54.957

这应该相当简单，只需用于`[setInterval][1]`倒计时并提交回发即可。

```
<div id="timer"></div>

<script type='text/javascript'>
    var start = new Date();
    setInterval(function() {
        // check time elapsed given target time of 10 mins from now
        var timeLeft = (600000 - (new Date() - start))/1000;
        // update timer
        document.getElementById('timer').innerHTML = Math.floor(timeLeft/60) + ":" + Math.floor(timeLeft%60);

        // check if timer has elapsed, and submit form
        if (timeLeft > 0) {
            document.forms[0].submit();
        }
    }, 1000);
</script> 
```

**编辑**根据评论，最好检查实际经过的时间，而不是依赖*setInterval*（这并不完全准确）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T07:50:48.123

您可以使用“window.setTimeout”函数来设置提交表单的超时时间。对于倒计时，我建议您使用这样的 jquery 插件：http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

干杯

```
window.setTimeout(
    function ()
    {
        $("form")[0]
        .submit();
    },
    10000
); 
```

# android - 在 Android 应用中添加启动提示的正确方法

> ID：12329018
> 
> 赞同：1
> 
> 时间：2012-09-08T07:47:12.153
> 
> 标签：android

我正在开发一个 Android 应用程序，我想在第一次启动应用程序时为用户展示一些提示（几张幻灯片）。

我可以制作一个活动并在主活动的 OnCreate 方法中启动它，或者制作对话窗口。

我想问：如何以正确的方式制作它？有经验的开发人员可以提供一些建议吗，也许可以举个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:06:38.363

您必须首先确保这些提示仅在首次启动应用程序时启动。我已经通过显示对话框并将值保存到共享首选项（或在 sqlite 中）来完成此操作。在下一次应用程序启动时检查此值，如果已设置，则不会显示对话框。

这似乎是最简单的方法。请注意，当再次卸载并安装应用程序时，将再次显示对话框。

有时我们想让用户再次看到这个对话框。您可以通过在应用程序设置屏幕中设置/重置共享首选项中的值来执行此操作。用户可以在此处更改值并在应用启动时再次查看对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T07:53:42.790

只需制作一个 Dialog Type Activity 并在您的应用程序第一次启动时自动显示它。并在您的菜单中添加帮助，以便用户在需要帮助时可以看到它。

# android - Android - Viewpager 和片段，方法不起作用

> ID：12329037
> 
> 赞同：6
> 
> 时间：2012-09-08T07:51:20.593
> 
> 标签：android, android-fragments, android-viewpager, android-fragmentactivity

我有一个`ViewPager`with two`Fragments`我在`onCreate`我的`FragmentActivity`.

```
private List<Fragment> fragments = new Vector<Fragment>();

fragments.add(Fragment.instantiate(this,Frag_1.class.getName()));
fragments.add(Fragment.instantiate(this,Frag_2.class.getName()));
    this.vPagerAdapter = new Adapt(super.getSupportFragmentManager(),fragments);
    vPager = (ViewPager) super.findViewById(R.id.pager);
    vPager.setAdapter(vPagerAdapter); 
```

我的第二个`Fragment`里面有一个方法，我调用它来更新我的`ListView`- `refreshList()`：

```
public class Frag_2 extends Fragment {

    private ListView list;
    private ArrayList<data> data;
    private boolean firstCreation=true;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setRetainInstance(false);
    }   

    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.layout, container, false);
        list = (ListView) view.findViewById(R.id.lst);
        //this.setRetainInstance(true);
        return view;
    }

    public void refreshList(ArrayList <data> data){
        if(data!=null){
            ArrayAdapter<data> adapter = new Item_data_adapter(getActivity(),data);
            list.setAdapter(adapter);}
    }
} 
```

从我的电话`FragmentActivity`

```
//Something
Frag_2 fr = (Frag_2) vPagerAdapter.getItem(1);
if (fr.getView() != null) {
    fr.refreshList(data);
} 
```

在我更改屏幕方向之前它工作正常。如果我错了，请纠正我，但我搜索了几个小时，但没有找到解决方案或好的解释，`FragmentActivity`它只创建一次并且`Fragments`附加到它，但`Fragments`重新创建配置更改。现在，当方向改变时，我没有得到`View`from`onCreate`所以当我尝试`View`从它获取时`Fragment`它返回 null 并且我的`refreshList()`方法没有被调用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:08:22.453

我这样解决了问题：在 FragmentActivity 的 onCreate

```
if(savedInstanceState!=null){
            frag1 = (frag_1) getSupportFragmentManager().getFragment(savedInstanceState, frag_1.class.getName());
            frag2 = (frag_2) getSupportFragmentManager().getFragment(savedInstanceState, frag_2.class.getName());
        }
        else{
            frag1 = (frag_1) Fragment.instantiate(this,frag_1.class.getName());
            frag2 = (frag_2) Fragment.instantiate(this,frag_2.class.getName());
        }
        fragments.add(frag1);
        fragments.add(frag2);

protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        getSupportFragmentManager().putFragment(outState, frag_1.class.getName(), frag1);
        getSupportFragmentManager().putFragment(outState, frag_2.class.getName(), frag2);
    } 
```

也许这不是宇宙中最好的解决方案，但它看起来很有效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:45:24.283

当您想刷新列表时，请执行以下操作：

```
public void setView() {
    Frag_2 fr = (Frag_2) vPagerAdapter.getItem(1);
    fragmentManager.beginTransaction().detach(fr).commit();
    fragmentManager.beginTransaction().attach(fr).commit();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T01:34:49.563

如果您使用的是动态片段，则需要先进行测试以防止创建片段的第二个实例。

要测试系统是否正在重新创建活动，请检查传递给活动的 Bundle 参数是否 `onCreate()`为`null`.

如果不是`null`，则系统正在重新创建活动。在这种情况下，活动会自动重新实例化现有片段。

如果是，`null`您可以安全地实例化您的动态片段。例如：

```
public void onCreate(Bundle savedInstanceState) {
  // ...
  if (savedInstanceState != null) {
  FragmentManager fragmentManager = getFragmentManager()
  // Or: FragmentManager fragmentManager = getSupportFragmentManager()
  FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
  ExampleFragment fragment = new ExampleFragment();
  fragmentTransaction.add(R.id.fragment_container, fragment);
  fragmentTransaction.commit();
  }
} 
```

该类`Fragment`支持该`onSaveInstanceState(Bundle)`方法（但不支持该`onRestoreInstanceState()`方法），其方式与 Activity 类大致相同。

*   默认实现保存所有具有 ID 的片段视图的状态。
*   您可以覆盖此方法以存储其他片段状态信息。
*   如果系统正在从以前保存的状态重新创建片段，它会向 、 和 方法提供对包含该状态`Bundle`的引用；否则，参数设置为。`onCreate()``onCreateView()``onActivityCreated()``null`

如果您想了解详细信息，[这里](http://marakana.com/s/android_fragments_for_all,1099/index.html)是 Marakana 的 Ken Jones 的精彩演讲

# jquery - 通过 Rails 无法满足 Ember.js 对 JQuery 的依赖

> ID：12329039
> 
> 赞同：2
> 
> 时间：2012-09-08T07:51:41.880
> 
> 标签：jquery, ruby-on-rails, rubygems, ember.js

我正在尝试在我的 Rails 项目中使用 Ember.js。我创建了一个 ToDo 应用程序的脚手架。在顶部附近的我的 Gemfile 中添加了“emberjs-rails”gem。在 JQuery 之后将 ember 添加到我的 application.js 中：

```
 //= require jquery
   //= require jquery_ujs
   //= require ember
   //= require_tree . 
```

然后我将以下代码添加到视图中，希望在访问它时看到文本字段：

```
 <script type="text/x-handlebars">
     {{view Em.TextField id="new-todo" placeholder="the text"}}
    </script> 
```

当我访问此视图时，我在控制台中收到以下错误：

```
 Error: assertion failed: Ember requires jQuery 1.6 or 1.7
   [Break On This Error]    

   if (!test) throw new Error("assertion failed: "+desc); 
```

我首先假设这个错误是因为 rails 在我的应用程序中集成了旧版本的 JQuery。但是当我检查调试器中的脚本部分时，我可以看到 JQuery 1.8 已加载：

```
 jQuery JavaScript Library v1.8.1 
```

查看页面源代码，我可以看到 Ember 和 JQuery 都被添加了。小车把脚本也存在。但是，由于上述错误，它似乎没有得到解释。

我在这里缺少什么，如何确保在我的 rails 应用程序中满足 Ember 对 JQuery 的依赖？

编辑（解决方案）：正如 stef 在下面指出的，我需要退回到 JQuery 1.7 版。当前版本的 ember 不支持 JQuery 1.8。我正在使用`jquery-rails`gem 来管理我的 jquery。我从另一篇 SO 帖子**中了解到**[如何指定](https://stackoverflow.com/questions/8662063/how-can-i-update-to-the-jquery-1-7-using-rails-3)要加载的jquery版本（通过指定`jquery-rails`.下一个主要版本，在这种情况下是 2。`jquery-rails``~>`

 **```
 gem 'jquery-rails', '~>1.0.19' 
```

接下来我`bundle`在应用程序目录下运行以安装所需版本的`jquery-rails`. 你可以做一个`gem list`来验证。重新启动 rails 并刷新浏览器后，我得到了我的文本框，因此现在看来 Ember.js 依赖项已满足。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:27:10.240

确保您使用的是正确版本的 jQuery（根据评论更新）。

Ember 最近停止捆绑其许多依赖项，因此您必须在 ember.js 之前手动包含它们。检查您的应用程序模板并确保 jQuery 包含在 Ember 之前（如果它是单独的文件），并且还包含在您的 application.js 清单文件中。**

# c# - 简单的计算由于某种原因不起作用

> ID：12329042
> 
> 赞同：0
> 
> 时间：2012-09-08T07:52:05.613
> 
> 标签：c#, .net, percentage

好吧，我正在尝试计算两个值的百分比。这应该很简单，但由于某些奇怪的原因它不起作用。我太累/太笨了，无法弄清楚。这是我的代码，它一直返回 0，我在调试时检查了值，FilesCompleted 为 295，TotalFilesCount 为 25002，返回值 var 只是 0，它应该已经是 1。

```
private int CalculatePercentComplete(int FilesCompleted, int TotalFilesCount)
        {
            int returnvalue = (FilesCompleted / TotalFilesCount) * 100;

            if (returnvalue > 100 || returnvalue < 1) return 1;
            else return returnvalue;
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T07:54:10.847

> 我在调试时检查了这些值，FilesCompleted 为 295，TotalFilesCount 为 25002，返回值 var 只是 0，它应该已经是 1。

不，因为所有算术都是用整数完成的。所以首先评估这个表达式：

```
(FilesCompleted / TotalFilesCount) 
```

那是 295 / 25002。*整数*运算的结果是 0……然后当你将它乘以 100 时，你*仍然*得到 0。最简单的解决方法是先进行乘法运算：

```
int returnvalue = (FilesCompleted * 100) / TotalFilesCount; 
```

请注意，如果`FilesCompleted`大于，则会溢出`int.MaxValue / 100`。您可以通过在浮点运算中执行所有操作来解决此问题：

```
int returnvalue = (int)((FilesCompleted * 100.0) / TotalFilesCount); 
```

...或通过使用`long`整数算术：

```
int returnvalue = (int)((FilesCompleted * 100L) / TotalFilesCount); 
```

当然，如果您不希望拥有大量文件，那么这些都不是必需的。（最多可以容纳 4200 万个文件……）

附带说明一下，您的参数名称违反了 .NET 命名约定。它们应该是驼峰式 -`totalFilesCount`和`filesCompleted`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T07:56:09.630

怎么样

```
int returnvalue = (int)(((double)FilesCompleted / TotalFilesCount) * 100); 
```

这是在做什么

1.  将`int`FilesCompleted 转换为`double`. 例如，如果它是 295，那么这会将其转换为 295.0，这样除法就会以双倍进行。

    也无需转换`TotalFilesCount`为 double，因为 double 除以整数（或整数除以 double）返回 double。

2.  所以返回的双精度结果是 0.011799056075513958 乘以 100

3.  所以返回的结果是 1.1799056075513958 最终转换为返回 1 的 int

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T07:55:43.040

事实上，简单的错误，当使用 int 进行转移时，答案将是一个 int。您的答案将介于 0 和 1 之间，因此向下舍入为 0（整数）。

采用：

```
int returnvalue = (int)((FilesCompleted / (double)TotalFilesCount) * 100); 
```

为了使您的计算使用双精度数作为小数，然后将其乘以 100 并将其转换为 int。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T07:57:06.037

返回 0.01 ，`FilesCompleted/TotalFilesCount`int 格式为 0，试试看`FilesCompleted*100/TotalFilesCount`！

# php - onclick 函数中的 If/Else 语句

> ID：12329043
> 
> 赞同：0
> 
> 时间：2012-09-08T07:52:07.407
> 
> 标签：php, javascript

我有这个`onclick`功能，它工作正常：

```
onclick="transferplayer('palyerlistDIVID','<?=$d_player['id']?>',document.getElementById('play perPosition').value,'teamID','plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>');showmyplayer('myplayerlistDIVID',document.getElementById('playperPosition').value,'plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>')" 
```

我需要的是设置点击之间的时间，所以我添加了这个javascript，每次点击之间有5秒：

```
var lastClicked = 0;

function onClickCheck() {
    var timeNow = (new Date()).getTime();
    if (timeNow > (lastClicked + 5000)) {
        // Execute the link action 
    } else {
        alert('Please wait at least 5 seconds between clicks!');
    }
    lastClicked = timeNow;
} 
```

问题是：如何将这段代码与`onclick`函数结合起来？

我试过这个：

```
onclick="onClickCheck();transferplayer('palyerlistDIVID','<?=$d_player['id']?>',document.getElementById('play perPosition').value,'teamID','plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>');showmyplayer('myplayerlistDIVID',document.getElementById('playperPosition').value,'plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>')" 
```

但是在点击它时，它总是取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T07:56:28.250

只需将`transferplayer`调用移动到您的 if 子句中。

```
onclick="onClickCheck()"

function onClickCheck() {
    var timeNow = (new Date()).getTime();
    if (timeNow > (lastClicked + 5000)) {
        transferplayer('palyerlistDIVID','<?=$d_player['id']?>',
                        document.getElementById('playerPosition').value,
                        'teamID',
                        'plus',
                        '<?=$d_player['teamID']?>',
                        '<?=$d_player['price']?>');

         showmyplayer('myplayerlistDIVID',
                      document.getElementById('playperPosition').value, 
                      'plus',
                      '<?=$d_player['teamID']?>',
                      '<?=$d_player['price']?>');
    } else {
        alert('Please wait at least 5 seconds between clicks!');
    }
    lastClicked = timeNow;
} 
```

而且，作为记录，不建议使用 PHP 短标签。有关该主题的讨论，请参阅[PHP echo vs PHP short tags](https://stackoverflow.com/questions/1386620/php-echo-vs-php-short-tags)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T07:56:41.107

不建议使用内联 javascript。您应该尝试绑定对该元素的单击。

但是你的回答：

```
onclick="var lastClicked = 0;if(timeNow>(lastClicked + 5000)){ var timeNow = (new Date()).getTime(); if (timeNow > (lastClicked + 5000)) { transferplayer('palyerlistDIVID','<?=$d_player['id']?>',document.getElementById('play perPosition').value,'teamID','plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>');showmyplayer('myplayerlistDIVID',document.getElementById('playperPosition').value,'plus','<?=$d_player['teamID']?>','<?=$d_player['price']?>'); }else{ alert('Please wait at least 5 seconds between clicks!'); } lastClicked = timeNow;" 
```

# javascript - Highchart js 面积图工具提示错误

> ID：12329044
> 
> 赞同：0
> 
> 时间：2012-09-08T07:52:32.603
> 
> 标签：javascript, highcharts

我一直在尝试清除这个错误，但我仍然不明白它发生的原因。

[在http://jsfiddle.net/3RKL4/](http://jsfiddle.net/3RKL4/)检查代码

工具提示仅适用于第一个和最后一个点。

这是highcharts中的错误还是代码错误？

如果代码是错误的，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:03:52.157

理想情况下，Highchart 要求数据按时间顺序递增。您的数据似乎不满足这一点，它不适用于 3 点事件[http://jsfiddle.net/jugal/3RKL4/5/](http://jsfiddle.net/jugal/3RKL4/5/) 颠倒顺序修复它@ [http://jsfiddle.net/jugal/3RKL4 /6/](http://jsfiddle.net/jugal/3RKL4/6/)

# android - 安卓跟踪视图

> ID：12329047
> 
> 赞同：1
> 
> 时间：2012-09-08T07:53:40.920
> 
> 标签：android, debugging, android-traceview

我做了一个应用程序，我想看看我是否可以通过在某个活动上运行跟踪视图来提高性能 + 它是后台任务。

[此链接指向](http://i45.tinypic.com/11weufl.png)来自 traceview 的图像。如您所见，有 2 种颜色占用了最多时间 + 处理器。

*   蓝色来自`drawBitmap`. （我使用了一个标题标志、一个重复的标题背景和另一个在整个屏幕上重复的背景，所有这些都在**XML 布局**文件中进行了描述）。
*   绿色是一种叫做`dalvik/system/VMDebug.startGC ()V`

我的问题：

1.  我可以做些什么来降低这个 drawBitmap 的成本吗？（但是，我想将所有图像保留在屏幕上）
2.  这是什么 VMDebug 东西？似乎无法通过谷歌找到太多关于它的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:12:17.110

听起来您可能可以优化您的位图绘制，（您提到重复绘制的背景）

VMDebug 是 dalvik 调试监视器，调用 startGC() 函数来启动垃圾收集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T04:33:15.377

1）[试试](https://stackoverflow.com/questions/6856550/android-fastest-way-to-draw-a-bitmap-to-canvas)这个答案让drawBitmap更便宜

2）VM特定的调试功能。尽管这个类和它的许多成员都是公共的，但是这个类是为了以一种更友好的方式被包装起来供应用程序开发人员使用的。在 Android 平台上，访问此功能的推荐方法是通过 android.os.Debug 类。

[更多细节](https://www.cs.cmu.edu/~srini/15-446/android/android-sdk-linux_x86-1.0_r2/docs/reference/dalvik/system/VMDebug.html)

# c++ - 如何在 Boost.Process 0.5 中将程序终止与流结束绑定？

> ID：12329065
> 
> 赞同：11
> 
> 时间：2012-09-08T07:57:58.657
> 
> 标签：c++, boost, process, boost-iostreams

在这个 Boost.Process 0.5 ( [http://www.highscore.de/boost/process0.5/index.html](http://www.highscore.de/boost/process0.5/index.html) ) 的简单示例中，程序 ( ) 的输出`ls`正在提供一个流。流工作正常，但与预期相反，程序完成后流不会变得无效（例如流结束）（类似于以前版本的 Boost.Process，例如[http://www.highscore.de/boost /process/index.html](http://www.highscore.de/boost/process/index.html) )

`is`为了使流（在示例中）在子程序退出后自动失效，我缺少什么？

也许这是我必须在 Boost.Streams`stream`中设置的选项`file_descriptor`？

```
#include <boost/process.hpp> // version 0.5 from http://www.highscore.de/boost/process0.5/process.zip
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/stream.hpp>
#include <string>
using namespace boost::process;
using namespace boost::process::initializers;
using namespace boost::iostreams;
int main(){
    boost::process::pipe p = create_pipe();
    file_descriptor_sink sink(p.sink, close_handle);
    child c = execute(run_exe("/usr/bin/ls"), bind_stdout(sink));
    file_descriptor_source source(p.source,  close_handle);
    stream<file_descriptor_source> is(source);
    std::string s;
    while(std::getline(is, s)){
        std::cout << "read: " << s << std::endl;
    }
    std::clog << "end" << std::endl; // never reach
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T02:11:33.867

* * *

**2020 年更新：** Boost.Process 现在是 Boost [https://www.boost.org/doc/libs/1_74_0/doc/html/process.html](https://www.boost.org/doc/libs/1_74_0/doc/html/process.html)的一部分，这个答案可能已经完全过时了。它仅适用于实验版本“0.5” [http://www.highscore.de/boost/process0.5/index.html](http://www.highscore.de/boost/process0.5/index.html)。

* * *

我与图书馆的作者 Boris Schaeling 进行了私人（实际上是通过 Nabble）交流。在放弃了几种可能性之后，比如 posix/boost.iostreams 中的错误，他给了我对有效代码的轻微修改。基本上，我可以推断出`file_descriptor sink`必须超出范围（已销毁）才能使流返回 EOF。`sink`工作代码只是为（在末尾列出）添加了一个特定的范围。我认为这很容易将所有内容封装在一个`pistream`类中。（我列表中的下一步将是允许输出到进程。）

适用于 Boost 1.48 (Fedora 17)。

```
#include <boost/process.hpp> // version 0.5
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/stream.hpp>
#include <string>

using namespace boost::process;
using namespace boost::process::initializers;
using namespace boost::iostreams;

int main() {
    pipe p = create_pipe();
    {
        // note the scope for sink
        file_descriptor_sink sink(p.sink, close_handle);
        /*  child c = */ // not necessary to hold a child object, it seems.
        execute(run_exe("/usr/bin/ls"), bind_stdout(sink));
    }   // note the scope for sink

    file_descriptor_source source(p.source,  close_handle);
    stream<file_descriptor_source> is(source);
    std::string s;
    while(std::getline(is, s)) {
        std::cout << "read: " << s << std::endl;
    }
    std::clog << "end" << std::endl; // never reach
} 
```

编译`c(lang)++ -lboost_system -lboost_iostreams`

编辑：这似乎也有效，可以避免人为范围，但可能会令人困惑，因为接收器必须是临时的：

```
 ...
    pipe p = create_pipe();
    execute(run_exe("/usr/bin/ls"), bind_stdout(        
        file_descriptor_sink(p.sink, close_handle)
    ));
    file_descriptor_source source(p.source,  close_handle);
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:59:15.977

这适用于类似 POSIX 的系统：

```
#include <boost/process.hpp> // version 0.5 from http://www.highscore.de/boost/process0.5/process.zip
#include <boost/iostreams/device/file_descriptor.hpp>
#include <boost/iostreams/stream.hpp>
#include <boost/asio.hpp>
#include <string>

using namespace boost::process;
using namespace boost::process::initializers;
using namespace boost::iostreams;

int main()
{
    boost::asio::io_service io_service;
    int status = 1;
    boost::asio::signal_set set(io_service, SIGCHLD);
    set.async_wait(
        [&status](const boost::system::error_code&, int) { ::wait(&status); }
    );

    boost::process::pipe p = create_pipe();
    file_descriptor_sink sink(p.sink, close_handle);
    child c = execute(run_exe("/bin/ls"), bind_stdout(sink));
    file_descriptor_source source(p.source,  close_handle);
    stream<file_descriptor_source> is(source);
    std::string s;
    while(status && std::getline(is, s))
    {
        std::cout << "read: " << s << std::endl;
    }
    std::clog << "end" << std::endl; // never reach
} 
```

请注意，它将 SIGCHLD 处理为*异步*设置`status`。它取自[http://www.highscore.de/boost/process0.5/boost_process/tutorial.html#boost_process.tutorial.starting_a_program](http://www.highscore.de/boost/process0.5/boost_process/tutorial.html#boost_process.tutorial.starting_a_program)。此页面还显示了 Windows 的相同做法：

```
#if defined(BOOST_WINDOWS_API)
    DWORD exit_code;
    boost::asio::windows::object_handle handle(io_service, c.process_handle());
    handle.async_wait(
        [&handle, &exit_code](const boost::system::error_code&)
            { ::GetExitCodeProcess(handle.native(), &exit_code); }
    );
#endif

    io_service.run(); 
```

# apache - 网站链接显示 Apache HTTP Server 文档

> ID：12329067
> 
> 赞同：0
> 
> 时间：2012-09-08T07:58:14.713
> 
> 标签：apache, centos

我的网站目录 /manual 显示**Apache HTTP Server 版本 2.2 文档**页面我已经从我的 FTP 中删除了这个目录，但仍然是 oa，得到了这个。

我正在使用 Linux Centos 下面是我的 manual.conf 文件配置

有一个 manual.conf 显示了下面的配置

```
#
# This configuration file allows the manual to be accessed at
# http://localhost/manual/
#
AliasMatch ^/manual(?:/(?:de|en|fr|ja|ko|ru))?(/.*)?$ "/var/www/manual$1"

<Directory "/var/www/manual">
    Options Indexes
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T07:59:28.347

您可能需要从服务器配置中删除该链接。如果你已经这样做了，你还需要重新启动你的 apache 服务器。

要删除文档，请查看您的 apache 配置（在 Debian 上，例如`/etc/apache2/sites-enabled/000-default`），以获取像这里这样的块：

```
Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
   ...
</Directory> 
```

`#`并用out评论它们。不要忘记重新启动 apache 服务器以提交更改。

* * *

更新后，您似乎有两个选择：

1.  删除整个文件。那应该永远删除链接。
2.  通过在所有行的开头添加 a 来注释掉`#`所有行。如果您想在将来恢复手册，这在某些情况下会更好。

并使用以下命令重新启动服务器：

```
service httpd graceful 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-30T19:39:10.080

在软呢帽中

```
dnf remove httpd-manual.noarch
service httpd restart 
```

# algorithm - 查找大小为 n 的数组的所有大小为 L 的连续子数组中的最小值

> ID：12329073
> 
> 赞同：-3
> 
> 时间：2012-09-08T07:59:18.200
> 
> 标签：algorithm

大小为 L 的子数组中的最小数。我必须为数组的所有子数组找到它。除了单独扫描所有子阵列之外，还有其他方法吗？

我想到了一个解决方案：

```
a[n]//the array
minimum[n-l+1]//the array to store the minimum numbers

minpos=position_minimum_in_subarray(a,0,l-1);
minimum[0]=a[minpos];
for(i=1;i<=n-l-1;i++)
{
    if(minpos=i-1)
    {
        minpos=position_minimum_in_subarray(a,i,i+l-1);
    }
    else {
        if(a[minpos]>a[i+l-1]) minpos=i+l-1;
        minimum=a[minpos];
    }
} 
```

还有比这更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:37:58.677

您可以使用双端队列（Q）。找到一种方法，使最小元素始终出现在 Q 的前面，并且 Q 的大小永远不会超过 L。因此，您最多只能在解决方案中插入和删除元素在）。我觉得这足以让你继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:50:29.523

我认为您的解决方案还可以，但要正常工作，它应该类似于：

```
a[n]//the array
minimum[n-l+1]//fixed

minpos=position_minimum_in_subarray(a,0,l-1);
minimum[0]=a[minpos];
for(i=1;i<=n-l-1;i++)
{
    if(minpos=i-1)        
        minpos=position_minimum_in_subarray(a,i,i+l-1);                   
    else if(a[minpos]>a[i+l-1]) //fixed
        minpos=i+l-1; //fixed

    minimum[i] = a[minpos];
}

// Complexity Analysis :

//Time - O(n^2) in worse case(array is sorted) we will run
         "position_minimum_in_subarray" on each iteration

//Space - O(1) - "minimum array" is required for store the result 
```

* * *

如果你想提高你的时间复杂度，你可以用额外的空间来做。例如，您可以将每个子数组存储在一些自平衡 BST（例如红黑树）中，并在每次迭代时获取最小值：

```
for (int i= 0; i<n; i++) {
    bst.add(a[i]);

    if (bst.length == l) {
        minimum[i-l] = bst.min;
        bst.remove(a[i - l]);            
    }
  }

 //It's still not O(n) but close.

 //Complexity Analysis :

 //Time - O(n*log(l)) = O(n*log(n)) - insert/remove in self-balancing tree
                                      is proportional to the height of tree (log)

 //Space - O(l) = O(n) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-13T00:34:54.147

Scala版本答案

```
def movingMin(windowSize: Int, array: Seq[Double]) = { 
    (1 to array.length - (windowSize - 1)).
        map{i => (array.take(i + (windowSize - 1)).takeRight(windowSize)).min}
} 
```

# android - 动画自定义列表视图

> ID：12329078
> 
> 赞同：1
> 
> 时间：2012-09-08T07:59:39.783
> 
> 标签：android, android-animation

我在论坛上搜索过这个，但没有找到类似的问题，好吧，所以我有一个自定义的列表视图，这个列表中的每个条目都是一个文本视图和一个图像。假设用户在某个活动中添加了文本，然后按下了保存按钮。当按下返回按钮返回此列表视图时。刚刚添加的条目应该从右侧滑入。我该怎么做，任何示例都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:05:43.693

这是一个从下到上的工作示例，我想您可以将其转换为从右到左；-)

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        //Do the animation once.    
        if (position > maxposition) {
            AnimationSet set = new AnimationSet(true);

            Animation animation = new AlphaAnimation(0.0f, 1.0f);
            animation.setDuration(400);
            set.addAnimation(animation);

            animation = new TranslateAnimation(Animation.RELATIVE_TO_SELF,
                    0.0f, Animation.RELATIVE_TO_SELF, 0.0f,
                    Animation.RELATIVE_TO_SELF, 1.0f,
                    Animation.RELATIVE_TO_SELF, 0.0f);
            animation.setDuration(500);
            set.addAnimation(animation);

            row.startAnimation(set);
            maxposition = position;
        } 

        return row;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T08:04:47.403

谢谢大家的贡献，我做了更多的挖掘，发现插值器为视图提供动画。参考了一个例子，实现了它并得到了我想要的。

# ios - iOS 用阴影为 UILabel 添加底部边框

> ID：12329079
> 
> 赞同：6
> 
> 时间：2012-09-08T07:59:42.327
> 
> 标签：ios, uilabel, calayer

我可以知道如何`UILable`仅使用阴影添加底部边框吗？没有上、左、右边框。

这是行不通的。这是我尝试过的代码，但它不起作用。

```
CALayer* layer = [titleLabel layer];
layer.frame = CGRectMake(-1, -1, titleLabel.frame.size.width, 1.0f);
layer.borderWidth=1;
[layer setBorderWidth:2.0f];
[layer setBorderColor:[UIColor blackColor].CGColor];
[layer setShadowOffset:CGSizeMake(-3.0, 3.0)];
[layer setShadowRadius:5.0];
[layer setShadowOpacity:5.0]; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-08T08:51:20.010

以这种方式测试：

```
UILabel *lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 50)];

[lbl setText:@"Testo di prova..."];
[lbl setBackgroundColor:[UIColor clearColor]];
[[self view] addSubview:lbl];
[lbl sizeToFit];

CALayer* layer = [lbl layer];

CALayer *bottomBorder = [CALayer layer];
bottomBorder.borderColor = [UIColor darkGrayColor].CGColor;
bottomBorder.borderWidth = 1;
bottomBorder.frame = CGRectMake(-1, layer.frame.size.height-1, layer.frame.size.width, 1);
[bottomBorder setBorderColor:[UIColor blackColor].CGColor];
[layer addSublayer:bottomBorder]; 
```

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-15T10:56:01.840

只是发布这个答案作为参考，因为用户已经得到了答案，在 Swift 中尝试这个代码，让我知道它是怎么回事..

```
func buttomBorder(label: UILabel) -> UILabel {
    // For Buttom Border
    let frame = label.frame
    let bottomLayer = CALayer()
    bottomLayer.frame = CGRect(x: 0, y: frame.height - 1, width: frame.width - 2, height: 1)
    bottomLayer.backgroundColor = UIColor.lightGray.cgColor
    label.layer.addSublayer(bottomLayer)
    //For Shadow
    label.layer.shadowColor = UIColor(red: 0, green: 0, blue: 0, alpha: 0.25).CGColor
    label.layer.shadowOffset = CGSizeMake(0.0, 2.0)
    label.layer.shadowOpacity = 1.0
    label.layer.shadowRadius = 0.0
    label.layer.masksToBounds = false
    label.layer.cornerRadius = 4.0

    return label

} 
```

函数调用：

```
 labelName = buttomBoder(label: labelName) 
```

# c - glCreateShader 崩溃了

> ID：12329082
> 
> 赞同：22
> 
> 时间：2012-09-08T08:00:26.553
> 
> 标签：c, opengl, graphics, glut, glew

我应该有最新版本的 Glew 和 Glut，所以这不应该是问题。一切都应该链接，我正在使用 MS Visual Studio 2010。我的程序编译但是当我到达 glCreateShader(GL_FRAGMENT_SHADER) 时它显示一个错误：“0xC0000005：访问冲突。”

我的程序：

```
#include <GL\glew.h>
#include <GL\glut.h>
#include <stdio.h>
#include <stdlib.h>

GLuint program;

static char* readShaderSource(const char * shaderFile)
{
    FILE* fp = fopen(shaderFile, "r");
    char* buf;
    long size;

    if (fp == NULL) return NULL; 
    fseek(fp, 0L, SEEK_END);//go to end
    size = ftell(fp);       //get size
    fseek(fp, 0L, SEEK_SET);//go to begining

    buf = (char*) malloc((size +1) * sizeof(char));
    fread(buf, 1, size, fp);
    buf[size] = NULL;
    fclose(fp);
    return buf;
}

static void initShader(const GLchar * fsFile)
{
    GLint status;
    GLchar * fSource;
    GLuint fShader;
    GLuint fShader2;

    //read file
    fSource = readShaderSource(fsFile);
    if (fSource == NULL)
    {
        printf("Fail to load file");
        exit(EXIT_FAILURE);
    }

    //Create program and shader object
    fShader2 = glCreateShader(GL_VERTEX_SHADER);
    fShader = glCreateShader(GL_FRAGMENT_SHADER);
    program = glCreateProgram();

    //Attach shaders to program
    glAttachShader(program, fShader);

    //read shaders
    glShaderSource(fShader, 1, (const GLchar**) &fSource, NULL);

    //compile fragment shader
    glCompileShader(fShader);

    //error check
    glGetShaderiv(fShader, GL_COMPILE_STATUS, &status);
    if (status == GL_FALSE)
    {
        printf("Failed to compile the fragment shader.");
        exit(EXIT_FAILURE);
    }

    //link and error check
    glLinkProgram(program);
    glGetProgramiv(program, GL_LINK_STATUS, &status);
    if (status == GL_FALSE)
    {
        printf("program error");
        exit(EXIT_FAILURE);
    }

    //use program object
    glUseProgram(program);

    //set up uniform parameter
    //skipped for now
}

int main(int argc, char ** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(500,500);
    glutCreateWindow("Matrix Fractal");
    glClearColor(1.0, 1.0, 1.0, 1.0);
    gluOrtho2D(0.0,0.0,(GLfloat) 500, (GLfloat) 500);

    glutDisplayFunc(draw);
    glutReshapeFunc(reshape);

    initShader("fsFractal.glsl");

    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-08T08:09:44.203

您必须先初始化 GLEW，然后才能使用它：

`GLenum err = glewInit();`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-08T12:31:04.377

还有另一种情况可能发生这种情况，而且条件远非显而易见。如果你决定在你的应用程序中使用 glfw 和 glew，你也可以在 glCreateShader() ACCESS_VIOLATION 结束，如果你写了：

```
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE); 
```

如果将此行更改为

```
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_COMPAT_PROFILE); 
```

由于 NULL 函数指针 glCreateShader() 导致的 ACCESS_VIOLATION 消失了。

不要问我，这两个库 glew 和 glfw 是如何相互干扰的...... voodoo alert！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-05T20:24:17.203

这是我的变体，是上面@BenRujil 回答的后续。

```
 glewExperimental = GL_TRUE;
    if(glewInit() != GLEW_OK)
        throw std::runtime_error("glewInit failed"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-28T10:28:36.803

如果您使用 GLFW**和**GLEW/GLXW，如果您在使用 GLFW创建有效的 openGL 上下文**之前**尝试初始化 GLEW/GLXW，则可能会发生地址 0 的访问冲突：

```
if (!glfwInit()) {
  std::cerr << "GL initialization failed" << std::endl;
  return 1;
}
// Setup the openGL profile you need - we're going with a 4.3 core profile
glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);
glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);
glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);
// Context creation happens in the line below
GLFWwindow *window = glfwCreateWindow(800, 600, "text", NULL, NULL);
if (!window) {
  std::cerr << "Window or GL initialization failed";
  glfwTerminate();
  return 1;
}
glfwMakeContextCurrent(window);
if (glxwInit()) { // Now it's a good time to initialize Xtension wranglers
  std::cerr << "Failed to initialize GLXW" << std::endl;
  return 1;
} 
```

在上下文创建之前调用`glxwInit()`将获取设置的任何默认上下文并可能触发访问冲突（可能需要在运行时获取）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-25T12:43:02.847

如果 GLFW 有问题，您可以在他们使您的程序崩溃之前向他们询问错误消息。

**窗口示例：**

创建回调函数：

```
#include <windows.h>
void glfw_onError(int error, const char* description)
{
    // print message in Windows popup dialog box
    MessageBox(NULL, description, "GLFW error", MB_OK);
} 
```

并将其设置在代码的最开头。

```
glfwSetErrorCallback(glfw_onError); 
```

我这样做并得到“ `The GLFW library is not initialized.`”结果我的 GLFW 库没有初始化。事实证明[本的回答](https://stackoverflow.com/a/12329129/5090928)是正确的。我刚刚有`glfwInit()`一个这样的断言：`assert(glfwInit());`所以当我为 Release 编译我的程序时它被剥离了。

# javascript - 一个函数中的javascript空验证和十进制验证 - Asp .Net

> ID：12329084
> 
> 赞同：1
> 
> 时间：2012-09-08T08:00:32.700
> 
> 标签：javascript, asp.net, validation

我需要使用 Javascript 验证我的文本框。TextBox 不应为 null 且小数点后仅允许两位数。如果您限制除 .(dot) 和数字之外的任何其他字符会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:19:02.193

请看下面的代码

```
<html>
<head>
<title> Regexpression Tester </title>
<script type="text/javascript">
    function Validate() {       
        var rgexp = new RegExp("^([0-9]*\.?[0-9]{1,2})$");
        var input = document.getElementById("tbNumber").value;

        if (input.match(rgexp))
            alert("Valid");
        else
            alert("Not Valid");
    }
</script>
</head>
<body>
<input type="text" id="tbNumber"/>
<input type="button" onclick="Validate()" value="Validate"/>
</body>
</html> 
```

我想它会满足你的需要。

# javascript - JavaScript 无法在 Chrome 或 Firefox 上运行

> ID：12329088
> 
> 赞同：0
> 
> 时间：2012-09-08T08:02:02.387
> 
> 标签：javascript, html, firefox, google-chrome

嗨~我正在开发我的个人网站。

我想用我下载的 java 脚本实现“图像幻灯片放映”效果。

它适用于 IE，但不适用于 Chrome 或 Firefox。

PS：原始下载的文件在 Chrome 上运行良好，但在我将它放到我的网站后，问题就来了。

这是我的网站： http: [//iphrog.244213.dprktimes.com/](http://iphrog.244213.dprktimes.com/) 这里是 java 脚本示例代码：http: [//iphrog.244213.dprktimes.com/index2.html](http://iphrog.244213.dprktimes.com/index2.html)

他们使用相同的 js 文件，但 js 文件不适用于我网站的 chrome。

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:33:39.457

问题是您`div`的 id`content`为`z-index`-1000。这导致它无法检测到您的元素上的任何点击，因为它“在一切背后”。删除此样式，将其设置为 0 或将其设置为非负数，您的脚本就可以正常工作了。

# python - python - 类属性显然没有继承

> ID：12329095
> 
> 赞同：9
> 
> 时间：2012-09-08T08:03:15.880
> 
> 标签：python, metaclass, class-attributes

在最近的一个项目中，我尝试做这样的事情（更复杂，但结果相同）：

```
class MetaA(type):
    def __new__(cls, name, args, kwargs):
        print kwargs["foo"]
        return type.__new__(cls, name, args, kwargs)

class A(object):
    __metaclass__ = MetaA
    foo = "bar"

class B(A):
    pass 
```

我明白了：

```
bar
Traceback (most recent call last):
  File "C:\Users\Thorstein\Desktop\test.py", line 10, in <module>
    class B(A):
  File "C:\Users\Thorstein\Desktop\test.py", line 3, in __new__
    print kwargs["foo"]
KeyError: 'foo' 
```

类属性不是继承的吗？如果是这样，在与上述类似的框架中是否有任何解决方法？

编辑：使用程序中的实际（简化）示例可能更容易理解我的意思..

```
class GameObjectMeta(type):
    def __new__(cls, name, bases, attrs):
        attrs["dark_color"] = darken(*attrs["color"])
        return type.__new__(cls, name, bases, attrs)

class GameObject(object):
    __metaclass__ = GameObjectMeta
    color = (255,255,255)   # RGB tuple

class Monster(GameObject):
    pass 
```

基本上，想要在基色上运行一个函数以使保存在类中的颜色更深（类的多个实例将需要相同的颜色，但会有更长的类层次结构）。我希望这会更有意义..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:14:52.140

它不应该继承那些。元类接收定义在它实例化的类上的属性，而不是它的基类的属性。元类构造函数的重点是访问类主体中实际给出的内容。

事实上，基类的属性根本不在子类中。当您定义它时，它们并没有被“复制”到子类中，实际上在创建时子类甚至不“知道”它的超类可能具有的属性。相反，当您*访问* `B.foo`时，Python 首先尝试查找 B 上的属性，然后如果找不到，则查找其超类。每次您尝试读取此类属性时，都会动态发生这种情况。元类机制不应该访问超类的属性，因为子类中确实不存在这些属性。

一个可能相关的问题是您的定义`__new__`不正确。元类的参数`__new__`是 cls、name、bases 和 attrs。第三个参数是基类列表，而不是“args”（无论您打算如何）。第四个参数是类主体中定义的属性列表。如果您想访问继承的属性，您可以通过基础获得它们。

无论如何，你想用这个方案来完成什么？可能有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T19:09:04.587

如果您使用`__init__`而不是`__new__`那么您可以继承基类属性：

```
class MetaA(type):
    def __init__(self, name, bases, attr):
        print self.foo  # don't use attr because foo only exists for A not B
        print attr  # here is the proof that class creation does not follow base class attributes
        super(MetaA, self).__init__(name, base, attr)  # this line calls type(), but has no effect

class A(object):
    __metaclass__ = MetaA
    foo = 'bar'

class B(A):
    pass 
```

创建 A 时返回：

```
bar
{'__module__': '__main__', 'foo': 'bar', '__metaclass__': <class '__main__.MetaA'>} 
```

创建 B 时返回：

```
bar
{'__module__': '__main__'} 
```

请注意，这就是@BrenBarn 在他的[回答](https://stackoverflow.com/a/12329167/1020470)中所说的，`foo`不是在`attr`何时`B`创建的。这就是[OP 问题](https://stackoverflow.com/q/12329095/1020470)中的代码引发 KeyError 的原因。但是，如果找不到，则调用`self.foo`会`foo`在其基础 IE 中查找。`B``A`

这两个类的元类可以通过查看其类来确定：

```
>>> print A.__class__
<class '__main__.MetaA'>
>>> print A.__class__
<class '__main__.MetaA'> 
```

在分配和初始化、打印和输入`__init__`时调用元类方法的事实也证明了元类是。`B``self.foo``attr``stdout``B``MetaA`

# linux-kernel - 通过 mmap 提供几个内核缓冲区

> ID：12329096
> 
> 赞同：6
> 
> 时间：2012-09-08T08:03:28.553
> 
> 标签：linux-kernel, linux-device-driver, kernel, mmap

我有一个内核驱动程序，它在内核空间中分配多个缓冲区（物理上连续，与页面边界对齐，并且由整数个页面组成）。接下来，我需要让我的驱动程序能够将其中一些缓冲区映射到用户空间（当然，每个 mmap() 调用一个缓冲区）。驱动程序为此目的注册单个字符设备。用户空间程序必须能够告诉内核它想要映射哪个缓冲区（例如，通过指定其索引或唯一 ID，或先前通过 ioctl() 解析的物理地址）。

我想通过使用 mmap() 的 offset 参数来做到这一点，例如（来自用户空间）：

```
mapped_ptr = mmap(NULL, buf_len, PROT_READ | PROT_WRITE, MAP_SHARED, fd, (MAGIC + buffer_id) * PAGE_SIZE); 
```

其中“MAGIC”是一些幻数，buffer_id 是我想要映射的缓冲区 ID。接下来，在内核部分会有这样的东西：

```
static int my_dev_mmap(struct file *filp, struct vm_area_struct *vma)
{
  int bufferID = vma->vm_pgoff - MAGIC;
  /* 
   * Convert bufferID to PFN by looking through driver's buffer descriptors
   * Check length = vma->vm_end - vma->vm_start
   * Call remap_pfn_range()
   */
} 
```

但我认为这是某种肮脏的方式，因为 mmap() 中的“偏移量”不应该指定索引或标识符，它的作用是提供从 mmap-ed 设备开始跳过的字节（或页面）的数量（或文件）内存（应该是连续的，对吧？）。

但是，我已经在主线中看到了一些使用“偏移”来区分 mmap ed 缓冲区的驱动程序。

有没有其他解决方案？

PS 我需要这一切只是因为我正在处理一些不寻常的 SoC 图形控制器，它只能在物理上连续的、与 8 字节边界内存缓冲区对齐的上运行。所以，我只能在内核空间分配这样的缓冲区，并通过 mmap() 将它们传递给用户空间。

控制器的大部分编程（编写指令批处理并将它们推送到内核驱动程序）是在用户空间中执行的。此外，我不能只分配一大块物理上连续的内存，因为在这种情况下它需要非常大（例如，16+ MiB）并且 alloc_pages_exact() 将失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:12:39.077

我认为使用偏移量将索引从用户空间传递给驱动程序没有任何问题。如果它困扰您，那么只需将您的驱动程序视为从它想要呈现给用户空间的各个页面组装一个大缓冲区，因为它实际上是连续的，因此偏移量实际上是该缓冲区的偏移量。但在我看来，以这种方式做事并没有错。

另一种选择，如果您可以使用内核 3.5 或更高版本，可能是使用“连续内存分配器”（CMA）——查看`<linux/dma-contiguous.h>`并`drivers/base/dma-contiguous.c`了解更多信息。还有[https://lwn.net/Articles/486301/](https://lwn.net/Articles/486301/)作为参考，但我不知道那篇文章和将代码合并到主线之间有多少（如果有的话）变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:50:15.117

最后，我选择为每个打开的设备文件描述符（内核中的结构文件）精确映射一个缓冲区，并通过 ioctl() 实现控制：一个 IOCTL 用于分配新缓冲区，一个用于附加到具有已知 ID 的已分配缓冲区，以及另一个获取有关缓冲区的信息。通常，用户空间会同时 mmap() 大约 10..20 个缓冲区，因此对于这种情况，这是一个不错且干净的解决方案。

# c# - 在 PC 应用程序和 Android 应用程序之间同步

> ID：12329097
> 
> 赞同：0
> 
> 时间：2012-09-08T08:03:44.987
> 
> 标签：c#, java, android, windows

我在试图弄清楚程序的某些方面将如何工作时遇到了困难：（目前没有编写代码，只有概念）。

我有一个想用 C# 构建的 PC 应用程序。此外，我的 java 应用程序很少有 android 设备，这将依赖于 PC 应用程序，但会有自己的功能。

android 应用程序必须从 PC 应用程序读取数据，反之亦然。

起初我想创建一个所有应用程序都将从中读取的服务器。但现在我在想，也许有一种更简单、更简单的方法（因为我不知道如何访问服务器，我必须学习整个事情）——创建网络和共享文件夹——现在 PC 应用程序将保存他在共享文件夹中的数据和 android 应用程序将每隔 5 分钟或类似的时间从共享文件夹中读取数据，或者创建一个侦听器，该侦听器将在 PC 应用程序进行任何更改时更新应用程序。android 应用程序也必须这样做，将他的数据保存在共享文件夹中，并让 PC 从共享文件夹中读取。

基本上，这是我的想法，现在我的问题是：

1.  你如何看待这个想法的实施？

2.  是否可以使用 android 设备访问共享网络文件夹？

3.  是否可以将安卓设备添加到家庭网络？

4.  C# PC应用程序和java的结合可以吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T09:19:26.117

回答您的问题：

1.  这个想法在一定程度上是可以实现的
2.  我不确定，但应该是。
3.  是的，使用 WiFi 连接非常有可能。
4.  这不会有问题，因为您必须使用 Web 服务/套接字编程（我更喜欢套接字），而多平台根本不是问题：）

快乐编码:)

# c# - 哪个命名空间在 C# .Net 中包含 hWnd？

> ID：12329099
> 
> 赞同：4
> 
> 时间：2012-09-08T08:04:03.307
> 
> 标签：c#

我正在做 ac#Project。

我想知道：C# .Net 中哪个命名空间包括 hWnd、tWindowPlacement、TAboutBox？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:19:01.303

我认为您是 .NET 的新手，也许还有 UI 库？在 .NET 中创建 UI 与旧的 Windows C 'Win32' API 不同。

就像 Jon 提到的，.NET 和它的 UI 库不使用这些项目。除了窗口句柄（即 HWND）之外，还有负责用户界面的类，您可以实例化和使用它们。例如，在经典的 .NET 中，窗口大多被 System.Windows.Forms 命名空间中的 UI 元素替换。要显示对话框，您将构建一个表单，并最终在表单上调用 .Show() 来显示它。您的代码最终将包含一个指向 Form 的面向对象实例的变量。没有代码可以为您返回该表单的 HWND。与 Win32 相比，它确实是一种更好的 UI 编码方式。

还有其他库用于显示 .NET 可以访问的 UI，例如我最喜欢的 Windows Presentation Foundation (WPF)。Silverlight 也是，虽然我对 Silverlight 不了解更多。

如果您打算学习一般的.NET，那么我建议您在这里提出很多问题，并获得一些书籍。我可以推荐 Jeffrey Richter 的第一本书，名为“CLR via C#”。当然其他人也可以提出很好的建议，但是那本书是我多年前读的。当然，经常回来这里提问和寻找答案。

祝您在学习 .NET 的道路上好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:16:58.517

为了在 C# 中获取窗口句柄或 hWnd，您只需要返回`MainWindowHandle`a `Process`，如下所示：

```
 public static IntPtr FindWindowByProcessId(int dwProcessId)
    {
        Process proc = Process.GetProcessById(dwProcessId);
        return proc.MainWindowHandle;
    } 
```

您可以`GetWindowPlacement`使用平台调用访问：

`[DllImport("user32.dll", SetLastError = true)] [return: MarshalAs(UnmanagedType.Bool)] internal static extern bool GetWindowPlacement(IntPtr hWnd, out WINDOWPLACEMENT lpwndpl);`

我猜 TAboutBox 就是一个对话框，或者`MessageBox`在 C# 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:19:55.860

对于 hWnd，您可以使用`System.IntPtr`结构 - 其他。TAboutBox 听起来像一个 Delphi 或 C++Builder 类......

# java - 当远程套接字的设备关闭或应用程序强制关闭时如何理解java远程套接字无法访问

> ID：12329101
> 
> 赞同：1
> 
> 时间：2012-09-08T08:04:36.847
> 
> 标签：java, sockets, serversocket

我有一个 as3 serversocket，我们通过 java socket（一个 android 应用程序）连接到这个 serversocket。问题是，当服务器套接字应用程序强制关闭时，我无法找到一种方法来理解远程套接字已关闭或无法访问，除非尝试刷新（）到该套接字的消息会引发损坏的管道错误。我想以另一种方式解决此问题的原因不是让服务器应用程序忙于连接检查消息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:13:14.163

TCP 有 3 种方式可以了解连接已关闭：

1.  一方出错 - 它向另一方发送重置请求以关闭连接
2.  一方实际上想要关闭连接，所以它向另一方发送一条 FIN 消息
3.  尝试将某些内容从一侧传输到另一侧时的超时。这种超时只会在发送 tcp 包时发生。建立连接后，tcp 的包仅在数据传输请求（和连接关闭请求......）时发送。

所以如果一侧突然断线，不是在数据传输过程中，没有办法发现断线，只能偶尔发送一些包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T10:28:52.190

TCP 连接不像河流那样连续流动。它是在离散时间发送的一系列段 - 因此更像是路上的汽车。所以如果道路坏了，没有办法得到通知，直到一辆车试图到达另一端，失败，然后给你回电话。

您应该简单地以合理的时间间隔（30 秒？）发送*汽车*，从而指示您的服务器在收到 NOOP 消息（No Operation 的缩写）时什么都不做。客户端将被编程为在连接空闲时开始发送 NOOP（30 秒内没有发送或接收消息），当*驱动程序*回调他无法到达目的地时，您关闭当前套接字并尝试创建另一个一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T08:10:29.523

你找到了唯一的方法。除了尝试使用它之外，TCP 不提供任何检查连接状态的方法。您可以更智能地使用它，例如您可以向自己发送心跳消息等。但是没有 API 可以告诉你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T09:23:50.420

你可以做的是让服务器每 5/10 分钟广播一次***我还活着的消息:)***

# java - 如何将 Java 中的多个 ACM 图形对象组合成一个对象？

> ID：12329102
> 
> 赞同：0
> 
> 时间：2012-09-08T08:04:48.627
> 
> 标签：java, acm-java-libraries

我已经完成了一个刽子手游戏的编写，但我想在游戏结束后将刽子手移出画布。我用他身体的任何部分创造了那个刽子手。当我移动对象时，它一次只能移动一个对象。我怎样才能将它们捆绑在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:26:34.553

您必须创建 GCompound 类的对象。此类对象允许您创建可以像 GOval 等操作的新对象。在斯坦福的课程中，有一个名为 GFace 的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:08:33.117

也许你可以重构你的代码，使整个刽子手在整个实现中成为一个对象，并在需要时使不同的部分可见。当需要删除他时，只需通过将它们重置为不可见或尝试制作一个新对象来处理整个事情我猜......如果你发布你的实现代码，我可能会给你一些更多帮助...

# windows-7 - 通过脚本更改 Windows (7) 监视器设置的方法

> ID：12329103
> 
> 赞同：9
> 
> 时间：2012-09-08T08:05:04.947
> 
> 标签：windows-7, vbscript, batch-file, multiple-monitors

我买了一台新电视，主要作为我电脑的第二台显示器，我经常需要更改设置（扩展电影显示、游戏重复显示、禁用工作和浏览）。

有没有办法通过一些脚本（最有可能是批处理或 VBS，等等）在这些设置之间切换，所以我不需要一直通过 GUI 爬行？我很懒惰...谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-10T08:05:06.820

首先，不确定您是否知道快捷方式

```
Windows + P 
```

2个按钮看起来很简单！

但是，您可以编写一个批处理文件来运行包含应用程序 displayswitch.exe 的程序。displayswitch 附带 Windows 7，因此您可以拥有一个批处理文件：

```
DisplaySwitch.exe /external
notepad.exe 
```

然后使用此批处理文件打开记事本，它将始终打开并仅切换到外部显示器。

提供以下选项：

```
Extend Display
DisplaySwitch.exe /extend

2nd monitor
DisplaySwitch.exe /external

Computers Monitor
DisplaySwitch.exe /internal

Duplicate Display
DisplaySwitch.exe /clone 
```

马丁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-13T16:16:50.487

你可以像我一样用选择制作一个脚本：

```
@ECHO OFF
CLS
ECHO 1.Monitor 2 i TV Duplicate
ECHO 2.Monitor 2 i Monitor 3 Extended
ECHO 3.Monitor 2 i TV Extended
ECHO.

CHOICE /C 123 /M "Izbor:"

IF ERRORLEVEL 3 GOTO Mon2TvExt
IF ERRORLEVEL 2 GOTO Mon2Mon3Ext
IF ERRORLEVEL 1 GOTO Mon2TvDupl

:Mon2TvDupl
ECHO 1.Monitor 2 i TV Duplicate

Duplicate Display
DisplaySwitch.exe /clone

GOTO End

:Mon2Mon3Ext
ECHO 2.Monitor 2 i Monitor 3 Extended

DisplaySwitch.exe /external

GOTO End

:Mon2TvExt
ECHO 3.Monitor 2 i TV Extended

Extend Display
DisplaySwitch.exe /extend

GOTO End

Pause 
```

电视是 1 号，两个显示器是 2 号和 3 号。

# c# - 如何比较两个无序ListBox之间的项目

> ID：12329105
> 
> 赞同：4
> 
> 时间：2012-09-08T08:05:08.157
> 
> 标签：c#, asp.net

我有 2 个`ListBoxs`有一组项目。每个之间的计数`ListBoxs`可以相同或不同，如果计数相同，我想检查它们之间的项目`ListBoxs`是否相同。项目可以是无序的或有序的，如下图所示：

```
ListBox1 = { "C++", "C#", "Visual Basic" };
ListBox2 = { "C#", "Visual Basic", "C++" }; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T08:19:40.027

你可以使用 Linq 的 All 函数

```
var ListBox1 = new string[] { "C++", "C#", "Visual Basic" };
var ListBox2 = new string[] { "C#", "Visual Basic", "C++" };
bool same = ListBox1.Length == ListBox2.Length 
   && ListBox1.All(s => ListBox2.Contains(s)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T08:38:31.300

您可以简单地使用 HashSet：

```
var hashSet1 = new HashSet<string> { "C++", "C#", "Visual Basic" };
var hashSet2 = new HashSet<string> { "C#", "Visual Basic", "C++" };

var result = hashSet1.SetEquals(hashSet2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T08:27:09.037

我假设这两个是两个列表框控件

```
if (ListBox1.Items.Count == ListBox2.Items.Count)
{
    string[] listbox1arr = ListBox1.Items.OfType<string>().ToArray();
    string[] listbox2arr = ListBox2.Items.OfType<string>().ToArray();

    bool flag = listbox1arr.Intersect(listbox2arr).Count() > 0;

    MessageBox.Show(flag : "Items are not same" : "Items are same");
} 
```

# c# - 不允许新事务，因为会话中还有其他线程正在运行 Linq to Entity Mvc C#

> ID：12329109
> 
> 赞同：0
> 
> 时间：2012-09-08T08:05:47.720
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, linq-to-entities

我正在使用 Linq to Entity MVC，当我尝试从数据库中删除记录时，我得到了这个异常。

**不允许新事务，因为会话中还有其他线程在运行。**

我的代码：

```
if (Request.Form["Enroll"] != null)
{
    string[] selected = Request.Form["Enroll"].Split(',');

    if (selected != null)
    {
        if (selected.Count() != 0)
        {
            int k = 0;
            foreach (var item in selected)
            {
                var TraineeId = Convert.ToInt32(item[k].ToString());
                var sessionid = Convert.ToInt32(Session["user"].ToString());

                var id = db.EnrollTrainee.Where(i => i.TraineeID == TraineeId
                                                && i.TrainerID == sessionid);

                if (id != null)
                {
                    foreach (var a in id)
                    {
                        //db.Database.Connection.Close();
                        EnrollTrainee delete = db.EnrollTrainee.Find(a.id);
                        db.EnrollTrainee.Remove(delete);
                        db.SaveChanges();   //Getting Exception Here                                        
                    }
                }
                k++;
            }
        }
    }
    populatelistbox();
    return View();
} 
```

请帮忙。！！！提前致谢。！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T17:06:53.637

就我而言，在嵌套循环中较少调用 SaveChanges() 可以解决问题：

```
//produces error 
foreach(...) {
    foreach(...) {
       ...
       db.SaveChanges();
    } } 
```

这是我的解决方案

```
//does not produce error
foreach(...) {
    foreach(...) {
       ...
    }
}
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:18:27.063

[在这个不错的博客](http://weblogs.asp.net/jimjackson/archive/2010/07/08/entity-framework-4-and-new-transaction-is-not-allowed-because-there-are-other-threads-running-in-the-session-exception.aspx)中得到了一个很好的解决方案。

我的问题的解决方案：-

```
 if (Request.Form["Enroll"] != null)
                {
                    string[] selected = Request.Form["Enroll"].Split(',');

                    if (selected != null)
                    {
                        if (selected.Count() != 0)
                        {
                            int k = 0;
                            foreach (var item in selected)
                            {
                                var TraineeId = Convert.ToInt32(item[k].ToString());
                                var sessionid = Convert.ToInt32(Session["user"].ToString());

                                var id = db.EnrollTrainee.Where(i => i.TraineeID == TraineeId
                                                                && i.TrainerID == sessionid);
                                var idlist = id.ToArray<EnrollTrainee>();//Added New Line

                                if (idlist != null)
                                {
                                    foreach (var a in idlist)
                                    {
                                        EnrollTrainee delete = db.EnrollTrainee.Find(a.id);
                                        db.EnrollTrainee.Remove(delete);
                                        db.SaveChanges();                                           
                                    }
                                }
                                k++;
                            }
                        }
                    }
                    populatelistbox();
                    return View();
                } 
```

# regex - BASH 中的正则表达式更改不匹配

> ID：12329110
> 
> 赞同：1
> 
> 时间：2012-09-08T08:05:57.383
> 
> 标签：regex, bash, if-statement

我一直在尝试让多个不匹配的更改在 BASH 中工作。

这是我试图不匹配的。如果有两个参数并且一个开关（-a,-b,-c,-d）是第一个参数。

示例：
./scriptname -a 文件名
./scriptname -d 文件名

我希望这个回应成功的是：
./scriptname 文件名 ipaddress。

有效的代码是：

```
if [[ "$#" = "2" && "$1" =~ ([^-a][^-b][^-c]) ]]
    then
        echo "success"
    else
        echo "fail"
  fi 
```

如果我尝试扩展更改，`([^-a][^-b][^-c][^-d])`它将停止工作。我尝试了多种语法变体，但似乎没有任何效果。我还尝试将它们组合在一起，例如：

`if [[ "$#" = "2" && "$1" =~ ([^-a][^-b]) && "$1" =~ ([^-c][^-d]) ]]`这也失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:20:21.573

关于什么：

```
if [[ "$#" = "2" && "$1" =~ -[a-d]$ ]] 
```

# ios - 关于iOS开发过程发送游戏的“.app”文件进行测试

> ID：12329116
> 
> 赞同：-1
> 
> 时间：2012-09-08T08:06:47.473
> 
> 标签：ios, ios-simulator, ios-provisioning

我是正式的 iOS 开发人员。我的设计师住在不同的城市，我想知道：我可以将我们的游戏的“.app”文件发送给他，以通过 iTunes 安装在他的 iPhone 上进行测试吗？他不知道 xCode，只知道设计师程序，而且离我很远。我可以在“Provisioning Portal”的“Devices”中添加他的 iPhone

对不起我的英语不好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:14:12.463

您可以制作一个构建（.ipa）并将其发送给他，以便他安装它并查看应用程序的作用。

另一个（我认为更容易）的选择是使用提供简单测试的网站之一。其中之一是[testflightapp](http://www.testflightapp.com)。在那里注册，向您的设计师发送邀请，然后上传一个构建。然后，您和其他人（如果您添加了他们）都可以使用它。只需打开您将在电子邮件中收到的链接并安装该应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T08:13:31.637

没有亚历山大。您无法发送 .app 文件。确保您使用列出了您的设计师 iOS 设备的临时配置文件为您的应用程序签名。存档您的应用程序 Xcode 菜单/产品/存档（选择 iOS 作为目标时可用）。然后去组织者/档案馆并分发它。XCode 会将其保存为 .ipa 文件。您应该将此文件发送给您的设计师。他/她可以将其放到 iTunes 上并将其同步到设备。

# jquery - 如何在jquery mobile中的同一个div中给出两个图标？

> ID：12329127
> 
> 赞同：1
> 
> 时间：2012-09-08T08:09:29.717
> 
> 标签：jquery, jquery-mobile

我想显示到没有像这样的文本的图标`left arrow and right arrow`

输出如下：

```
<  Saturday Sep 08 2012 > 
```

我试过如下：

```
<div data-role=content data-theme="c" style="text-align:center"  >
        <a href="#" data-role="button" data-icon="arrow-l" data-iconpos="notext"></a> 
        <span><font size="1px" color="blue" >Saturday Sep 08 2012</font></span>
        <a href="#" data-role="button" data-icon="arrow-r" data-iconpos="notext"></a> 
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:12:39.683

你可以使用自己的[Grid系统](http://jquerymobile.com/demos/1.1.1/docs/content/content-grids.html)。

```
<div class="ui-grid-b">
  <div class="ui-block-a">Block A</div>
  <div class="ui-block-b">Block B</div>
  <div class="ui-block-c">Block C</div>
</div> 
```

在你的例子中，你会有这样的事情：

```
<div class="ui-grid-b">
    <div class="ui-block-a"> 
        <a href="#" data-role="button" data-icon="arrow-l" data-iconpos="notext"></a>
    </div>
    <div class="ui-block-b">
        <span><font size="1px" color="blue" >Saturday Sep 08 2012</font></span>
    </div>
    <div class="ui-block-c">
        <a href="#" data-role="button" data-icon="arrow-r" data-iconpos="notext"></a>
    </div>
</div> 
```

* * *

根据您的评论，您需要做的就是使用自己的样式将元素对齐到正确的位置。

看到这个**活的例子**：http: [//jsbin.com/imokaw/1/edit](http://jsbin.com/imokaw/1/edit)

# callback - LuaJIT FFI 回调性能

> ID：12329128
> 
> 赞同：7
> 
> 时间：2012-09-08T08:09:39.763
> 
> 标签：callback, ffi, luajit

LuaJIT [FFI 文档](http://luajit.org/ext_ffi_semantics.html)提到从 C 调用回 Lua 代码相对较慢，建议尽可能避免使用它：

> 不要对性能敏感的工作使用回调：例如考虑一个数值积分例程，它需要一个用户定义的函数来积分。从 C 代码调用用户定义的 Lua 函数数百万次是个坏主意。回调开销对性能绝对有害。
> 
> 对于新设计，请避免使用推送式 API（C 函数为每个结果重复调用回调）。而是使用拉式 API（重复调用 C 函数以获得新结果）。通过 FFI 从 Lua 到 C 的调用比反过来要快得多。大多数设计良好的库已经使用拉式 API（读/写、获取/放置）。

但是，它们并没有说明来自 C 的回调*有多*慢。如果我有一些我想加速使用回调的代码，如果我重写它以使用拉式 API，我大概可以期望多少加速？有没有人有任何基准比较使用每种 API 风格的等效功能的实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T06:59:56.093

在我的计算机上，从 LuaJIT 到 C 的函数调用有 5 个时钟周期的开销（值得注意的是，与通过普通 C 中的函数指针调用函数一样快），而从 C 调用回 Lua 有 135 个周期的开销，**慢 27 倍**。话虽如此，需要从 C 到 Lua 的一百万次调用的程序只会给程序的运行时增加约 100 毫秒的开销；虽然在主要对缓存内数据进行操作的紧密循环中避免 FFI 回调可能是值得的，但如果调用回调的开销，例如，每个 I/O 操作一次，与I/O 本身的开销。

```
$ luajit-2.0.0-beta10 callback-bench.lua   
C into C          3.344 nsec/call
Lua into C        3.345 nsec/call
C into Lua       75.386 nsec/call
Lua into Lua      0.557 nsec/call
C empty loop      0.557 nsec/call
Lua empty loop    0.557 nsec/call

$ sysctl -n machdep.cpu.brand_string         
Intel(R) Core(TM) i5-3427U CPU @ 1.80GHz 
```

基准代码：[https ://gist.github.com/3726661](https://gist.github.com/3726661)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-27T18:08:08.447

两年后，我根据[Miles 的回答](https://stackoverflow.com/a/12435278/786559)重新制定了基准，原因如下：

1.  看看他们是否随着新的进步而有所改进（在 CPU 和 LuaJIT 中）
2.  为带有参数和返回的函数添加测试。[回调文档](http://luajit.org/ext_ffi_semantics.html#callback)提到，除了调用开销之外，参数编组也很重要：

    > [...] C 到 Lua 的转换本身具有不可避免的成本，类似于 lua_call() 或 lua_pcall()。参数和结果编组增加了成本 [...]

3.  检查 PUSH 样式和 PULL 样式之间的区别。

我的结果，在`Intel(R) Core(TM) i7 CPU 920 @ 2.67GHz`：

```
operation                  reps     time(s) nsec/call
C into Lua set_v          10000000  0.498    49.817
C into Lua set_i          10000000  0.662    66.249
C into Lua set_d          10000000  0.681    68.143
C into Lua get_i          10000000  0.633    63.272
C into Lua get_d          10000000  0.650    64.990
Lua into C call(void)    100000000  0.381     3.807
Lua into C call(int)     100000000  0.381     3.815
Lua into C call(double)  100000000  0.415     4.154
Lua into Lua             100000000  0.104     1.039
C empty loop            1000000000  0.695     0.695
Lua empty loop          1000000000  0.693     0.693

PUSH style               1000000    0.158   158.256
PULL style               1000000    0.207   207.297 
```

这个结果的代码在[这里](https://gist.github.com/cipri-tom/e4f28c2785ff0de30b71/3b968d0cf51021d629977115c0d3689ac6a80138)。

**结论**：当与参数一起使用时，Lua 中的 C 回调具有非常大的开销（您几乎总是这样做），因此它们真的不应该在关键点使用。不过，您可以将它们用于 IO 或用户输入。

我有点惊讶 PUSH/PULL 样式之间的差异如此之小，但也许我的实现并不是最好的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-29T19:52:31.927

由于这个问题（以及整个 LJ）对我来说一直是痛苦的根源，所以我想在戒指中添加一些额外的信息，希望它可以帮助将来的人。

### “回调”并不总是很慢

LuaJIT FFI 文档，当它说“回调很慢”时，**非常具体**地指的是由 LuaJIT 创建并通过 FFI 传递给需要函数指针的 C 函数的回调的情况。这与其他回调机制**完全**不同，特别是与调用使用API​​调用回调的标准lua_CFunction相比，它具有完全不同的性能特征。

话虽如此，那么*真正的*问题是：我们什么时候使用 Lua C API 来实现涉及 pcall 等的逻辑，而不是把所有东西都保存在 Lua 中？与性能一样，但*特别是在跟踪 JIT 的情况下*，**必须配置文件**(-jp) 才能知道答案。时期。

我见过看起来相似但又落在性能范围两端的情况；也就是说，我遇到过代码（不是玩具代码，而是在编写高性能游戏引擎的上下文中的生产代码）在仅构建为 Lua 时性能更好，以及代码（*看起来*结构相似）通过调用 lua_CFunction 引入语言边界时性能更好，该 lua_CFunction 使用 luaL_ref 来维护回调和回调参数的句柄。

### 在没有测量的情况下优化 LuaJIT 是一件傻事

即使您是静态语言性能分析方面的专家，跟踪 JIT 已经很难推理。他们把你认为你知道的关于性能的一切都拿走了，然后把它粉碎了。如果编译记录的 IR 而不是编译函数的概念还没有消除一个人推理 LuaJIT 性能的能力，那么通过 FFI 调用 C 的事实在成功 JIT 时或多或少是免费的，但可能是一个命令-解释时比等效的 lua_CFunction 调用更昂贵...嗯，这肯定会将情况推到边缘。

具体来说，你上周编写的一个性能大大优于 C 等效的系统本周可能会失败，因为你在所述系统中引入了一个 NYI，它很可能来自一个看似正交的代码区域，而现在您的系统正在回退并破坏性能。更糟糕的是，也许您很清楚什么是 NYI，什么不是 NYI，但是您在跟踪接近度中添加*了足够的*代码，以至于它超过了 JIT 记录的最大 IR 指令、最大虚拟寄存器、调用深度、展开因子，侧迹限制...等。

*另外，请注意，虽然“空”基准有时可以提供非常笼统的见解，但对于 LJ（出于上述原因），在 context 中*对代码进行分析更为重要。为 LuaJIT 编写具有代表性的性能基准非常非常困难，因为就其性质而言，跟踪是非本地的。在大型应用程序中使用 LJ 时，这些非本地交互会产生巨大的影响。

# TL;博士

这个星球上只有**一个**人真正了解 LuaJIT 的行为。他的名字是迈克·帕尔。

如果您不是 Mike Pall，*请不要*对 LJ 的行为和表现做出任何假设。使用**-jv**（详细；注意 NYI 和后备）、**-jp**（分析器！结合 jit.zone 进行自定义注释；使用 -jp=vf 查看由于后备而在解释器中花费的时间百分比） , 而且，当你*真的*需要知道发生了什么时，**-jdump**（跟踪 IR 和 ASM）。测量，测量，测量。对 LJ 性能特征持保留态度，除非它们来自该人本人，或者您已经在您的特定用例中对其进行了测量（毕竟，在这种情况下，这不是一种概括）。请记住，正确的解决方案可能全在 Lua 中，可能全在 C 中，可能是 Lua -> C 到 FFI，可能是 Lua -> lua_CFunction -> Lua，......你明白了。

来自一个一次又一次被愚弄以为他已经理解 LuaJIT 的人，只是在接下来的一周被证明是错误的，我真诚地希望这些信息可以帮助那里的人:) 就个人而言，我根本不再做'关于 LuaJIT 的有根据的猜测。我的引擎每次运行都会输出 jv 和 jp 日志，它们是我在优化方面的“上帝之言”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-08T11:05:19.373

如以下结果所示，存在显着的性能差异：

```
LuaJIT 2.0.0-beta10 (Windows x64)
JIT: ON CMOV SSE2 SSE3 SSE4.1 fold cse dce fwd dse narrow loop abc sink fuse
n          Push Time        Pull Time        Push Mem         Pull Mem
256        0.000333         0                68               64
4096       0.002999         0.001333         188              124
65536      0.037999         0.017333         2108             1084
1048576    0.588333         0.255            32828            16444
16777216   9.535666         4.282999         524348           262204 
```

可以在[此处](https://gist.github.com/3673493)找到此基准测试的代码。

# php - 使用php从多个mysql表中获取并显示值

> ID：12329130
> 
> 赞同：0
> 
> 时间：2012-09-08T08:10:05.643
> 
> 标签：php, mysql

嗨，我需要通过用户 ID 的单个 mysql 查询来显示多个表中的值。我有 6 桌以下...

**国家**: countryid, 国家

**state** : stateid, statename, countryid

**城市**：cityid，城市，stateid。

**类别**：类别ID，类别名称。

**sub_categories** : sub_category_id, sub_category_name。

**用户**：userid、username、countryid、stateid、city、category_id 和 sub_category_id。

现在我想按用户 ID 显示所有详细信息。我写了查询，之后它只显示国家、州、类别和子类别的 ID，而不显示它们的名称。我正在使用 select 语句以及 join 语句。但没有得到准确的输出。我有加入表查询的基本知识。请给出想法或查询以显示我的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:30:06.360

您可以使用这样的连接：

```
select
    a.username,
    b.country,
    c.statename,
    d.city,
    e.category_name,
    f.sub_category_name
from
    users a
        join country b
            on a.countryid=b.countryid
        join state c
            on a.stateid=c.stateid
            and a.countryid=c.countryid
        join city d
            on a.city=d.cityid
            and a.stateid=d.stateid
        join categories e
            on a.category_id=e.categoryid
        join sub_categories f
            on a.sub_category_id=f.sub_category_id 
```

我在这里使用您问题中的 users.city 列名称，但它真的是 cityid - 这将更符合您的列命名约定的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:39:58.560

数据库结构可以更好，而且，在你的表中总是有统一的命名法，编写查询更容易。

像这样的东西就足够了：

```
SELECT c.country, s.statename, ci.city, ca.category_name, sc.sub_category_name FROM country c, state s, city ci, categories ca, sub_categories sc, users u WHERE u.country.id = c.countryid, u.stateid = s.stateid, u.city = ci.city, u.category_id = ca.categoryid AND u.sub_category_id = sc.sub_category_id ORDER BY u.userid DESC; 
```

# php - Escaping sigle quotes in a mysql query through php

> ID：12329132
> 
> 赞同：0
> 
> 时间：2012-09-08T08:10:20.547
> 
> 标签：php, mysql, quotes, mysql-real-escape-string, addslashes

> **Possible Duplicate:**
> [Mysql Real Escape String PHP Function Adding “\” to My Field Entry](https://stackoverflow.com/questions/2284099/mysql-real-escape-string-php-function-adding-to-my-field-entry)

So here's the deal. I have a local server and a remote server and they both run the same php file which connects to 2 identical mysql databases. On the local server, the command

```
mysql_query("INSERT INTO eventtypes (name) VALUES ('".addslashes($_GET['name'])."')") 
```

works like a charm, and does not insert the slashes into the field, only the raw value of the $_GET['name']. On the remote server however, the slashes are being inserted too. I have tried these:

```
mysql_query("INSERT INTO eventtypes (name) VALUES ('".str_replace("'","''",$_GET['name'])."') 
```

This one returns false, although when I run the exact returned string on the command line of the corresponding database, it properly inserts the right amount of single quotes, which is super-weird.

```
mysql_query("INSERT INTO eventtypes (name) VALUES ('".mysql_real_escape_string($_GET['name'])."')") 
```

mysql_real_escape_string() only added slashes to the single quotes, which were also inserted like with addslashes().

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:13:22.513

It sounds like you have [Magic Quotes](http://php.net/manual/en/security.magicquotes.php) enabled on the remote server. This feature is causing the inconsistency you have discovered. Turn it off.

Once you have fixed that problem, the best approach of the three you are trying is `mysql_real_escape_string`. However, that is a legacy approach and not recommended. Use a modern database library (such as mysqli or PDO) and bound arguments. See also [Best way to prevent SQL Injection in PHP](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:13:13.687

Stop using `mysql_query`.

[Use PDO](http://www.php.net/manual/en/book.pdo.php) and parameterized queries.

```
$pdo = new PDO($dsn, $username, $password);
$statement = $pdo->prepare("INSERT INTO eventtypes (name) VALUES (:eventype)");
$statement->execute(array('eventtype' => $_GET['name'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:12:41.153

You're code is prone to **[SQL Injection](http://bobby-tables.com/)**. The best method is to use **[PDO](http://php.net/manual/en/book.pdo.php)** or **[MYSQLI](http://php.net/manual/en/book.mysqli.php)**

Example of using PDO extension:

```
<?php

    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
    $stmt = $dbh->prepare("INSERT INTO eventtypes (name) VALUES (?)");
    $stmt->bindParam(1, $_GET['name']);
    $stmt->execute();

?> 
```

this will allow you to insert records with single quotes.

# java - Android解析如何从此XML中获取价值

> ID：12329133
> 
> 赞同：-1
> 
> 时间：2012-09-08T08:10:23.477
> 
> 标签：java, android, xml, json

这里只是一个简单的问题。如何获得这种 xml 的返回值

```
 Art C. Cauyao<$@FBID@$>501912568<$@ENDFBID@$>Tessa Rose 
Brainard<$@FBID@$>510831686<$@ENDFBID@$>
Dan Gangan<$@FBID@$>513545777<$@ENDFBID@$>
C Jhec DawAko<$@FBID@$>523059320<$@ENDFBID@$>Jeremy 
```

请查看我正在获取 Facebook 名称和 Facebook ID 有什么办法吗？

**编辑**

我发现它不是一个 xml 而是一个 JSON（对不起）现在我的问题真的是如何合并该返回值？

**编辑第二** 先生这是我在做什么通过这个解析它

```
static final String URL_FBFRIEND ="Some URL"+ "getFBFriends.php"; 
```

现在使用它，我现在可以使用我的输入值解析一些数据。这是代码

```
 XMLparser parser2 = new XMLparser(); 
    parser2.getXmlFromUrl(URL_FBFRIEND); 

      //HTTP POST
      String url_Getmembermob= URL_FBFRIEND ;
      String xml_getMembermob=null;
      try {
      HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost(url_Getmembermob);

      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4); 
      nameValuePairs.add(new BasicNameValuePair("...", "...."));
      nameValuePairs.add(new BasicNameValuePair("fbID", modGen.facebookID ));
      nameValuePairs.add(new BasicNameValuePair("accToken", modGen.tokenID));
      nameValuePairs.add(new BasicNameValuePair("reqType", "0"));

      Log.i("nameValuePairs", "nameValuePairs=" + nameValuePairs);

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpclient.execute(httppost);

        HttpEntity httpEntity = httpResponse.getEntity();

        xml_getMembermob = EntityUtils.toString(httpEntity);

        Log.i("xml-return",""+ xml_getMembermob);

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace(); 
    }catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

看到我正在记录返回的 xml **Log.i("xml-return",""+ xml_getMembermob);** 这就是输出

先生，我改变了你的代码` public static List parseUserList(String userData) { List ret = new ArrayList();

```
 int index = 0;
    while (index < userData.length())
    {
        int startFbTag = userData.indexOf(FB_NAME, index);
        if (index == -1)
        {

            return ret;
        }
        String name = userData.substring(index, startFbTag - index);
        startFbTag += FB_NAME.length(); // Start of the actual data
        int endFbTag = userData.indexOf(FB_ID, startFbTag);
        if (endFbTag == -1)
        {
            throw new IllegalArgumentException("Unterminated start tag");
        }

        fbTagValue = userData.substring(startFbTag, endFbTag - startFbTag);
        Log.i("UserName",fbTagValue);
        //fbId = Long.parseLong(fbTagValue);
        //ret.add(new User(name, fbId));
        index = endFbTag + FB_ID.length();
    }
    return ret;
} 
```

我在这里遇到错误 ** fbTagValue = userData.substring(startFbTag, endFbTag - startFbTag);** 似乎是什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:26:32.193

这是非常可怕的格式。它不是 XML。这不是 JSON。假设您已经有了某种`User`类，并且所有数据都在一个 中`String`，您可以编写如下内容（完全未经测试）：

```
private static final String FB_START = "<$@FBID@$>";
private static final String FB_END = "<$@ENDFBID@$>";

public static List<User> parseUserList(String userData)
{
    List<User> ret = new ArrayList<User>();

    int index = 0;
    while (index < userData.length())
    {
        int startFbTag = userData.indexOf(FB_START, index);
        if (index == -1)
        {
            // No tags left. You should check whether you've actually got
            // some data left, and potentially throw an exception. It's not
            // clear what your data format does here.
            return ret;
        }
        String name = userData.substring(index, startFbTag - index);
        startFbTag += FB_START.length(); // Start of the actual data
        int endFbTag = userData.indexOf(FB_END, startFbTag);
        if (endFbTag == -1)
        {
            throw new IllegalArgumentException("Unterminated start tag");
        }

        String fbTagValue = userData.substring(startFbTag, endFbTag - startFbTag);
        long fbId = Long.parseLong(fbTagValue);
        ret.add(new User(name, fbId));
        index = endFbTag + FB_END.length();
    }
    return ret;
} 
```

# java - Android从服务器下载图像并保存到SD卡而不使用BitmapFactory

> ID：12329136
> 
> 赞同：5
> 
> 时间：2012-09-08T08:10:34.770
> 
> 标签：java, android, multithreading, imagedownload

我正在尝试创建一个用于从服务器下载图像并将其显示到列表视图中的应用程序。我遇到的问题是内存泄漏并使我的应用程序崩溃。我在 Android 博客中搜索，例如这个[链接](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)，它展示了一个好主意，但它仍然不足以用多线程来完成。android的某些设备可以使用它，但某些设备只能在单线程中处理，有时它根本无法工作。

我的应用程序有很多活动，每个活动都有一个 Listview 需要尽快显示图像。通过 Google IO 2012，他们使用缓冲区将原始图像保存到 SD 卡并解决了内存泄漏问题，但由于需要下载的图像太大，加载速度很慢。

我的问题是：**有什么方法可以缩放图像并将图像写入 SD 卡？** 我想出一些可能的解决方案是在输入流对象中使用跳过字节，并且我能够找到我需要下载的图像的每个像素的宽度和高度。

以下代码在 Google IO 2012 中使用，它适用于多线程，在我的情况下，我有 4 个线程在后台运行。

```
private void downloadAndWriteFile(final String url, final File file) throws OutOfMemoryError {
    BufferedOutputStream out = null;

    try {
        HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
        conn.setDoInput(true);
        conn.connect();

        final InputStream in = new BufferedInputStream(conn.getInputStream(), IO_BUFFER_SIZE_BYTES);    // buffer size 1KB
        out = new BufferedOutputStream(new FileOutputStream(file), IO_BUFFER_SIZE_BYTES);

        int b;
        while ((b = in.read()) != -1) {
            out.write(b);
        }
        out.close();
        conn.disconnect();
    }
    catch (Exception e) {
        Log.e(TAG, "!!downloadAndWriteFile " + e.getMessage());
        file.delete();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:13:36.783

1）在设置图像之前使用以下代码释放与此位图关联的本机对象，并清除对像素数据的引用。如果没有其他引用，它只是允许它被垃圾收集。

```
BitmapDrawable drawable = (BitmapDrawable) myImage.getDrawable();
Bitmap bitmap = drawable.getBitmap();
if (bitmap != null)
{
    bitmap.recycle();
} 
```

2）使用这种方法减少内存中位图的大小：

```
/**
 * decodes image and scales it to reduce memory consumption
 * 
 * @param file
 * @param requiredSize
 * @return
 */
public static Bitmap decodeFile(File file, int requiredSize) {
    try {

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(file), null, o);

        // The new size we want to scale to

        // Find the correct scale value. It should be the power of 2.
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < requiredSize
                    || height_tmp / 2 < requiredSize)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;

        Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(file),
                null, o2);

        return bmp;

    } catch (FileNotFoundException e) {
    } finally {
        System.gc();
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T05:30:12.393

此代码在不使用位图工厂的情况下下载图像，它在模拟器中不起作用，使用任何 android 手机

```
package com.example.filedownload;

import org.apache.http.util.ByteArrayBuffer;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.content.*;
import android.app.*;
import android.net.*;
import android.app.DownloadManager.Request;
import android.os.Environment;
public class MainActivity extends Activity {
    public  long reference;
    BroadcastReceiver receiver;
    @Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button button=(Button)findViewById(R.id.button1);
                button.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {

                                String file = "http://tmacfitness.com/wp-content/uploads/2013/04/Beauty-of-nature-random-4884759-1280-800.jpg";
                                String serviceString = Context.DOWNLOAD_SERVICE; 
                                DownloadManager downloadManager;
                                downloadManager = (DownloadManager)getSystemService(serviceString);
                                Uri uri = Uri.parse(file);
                                DownloadManager.Request request ;
                                request =  new Request(uri);
                                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS,  "accel.jpg");   
                                reference = downloadManager.enqueue(request);

                }

        });

        IntentFilter filter = new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE);
        receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
        long ref = intent.getLongExtra(DownloadManager.EXTRA_DOWNLOAD_ID, -1);
        if (reference == ref) {
        setContentView(R.layout.finalscreen);
        unregister();
        }
        }
        };
        registerReceiver(receiver, filter); 
    }
       public void unregister(){
           unregisterReceiver(receiver);

    }
} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <CheckedTextView
                android:id="@+id/checkedTextView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Accel" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

finalscreen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="270dp"
        android:layout_height="wrap_content"
        android:layout_weight="2.12"
        android:text="DOWNLOAD COMPLETED" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T04:48:30.270

你可以使用这个。

```
private void downloadImagesToSdCard(String downloadUrl,String imageName) {
try {
    URL url = new URL(downloadUrl); //you can write here any link

    File myDir =  new File("/sdcard"+"/"+Constants.imageFolder);
    //Something like ("/sdcard/file.mp3")

    if (!myDir.exists()) {
        myDir.mkdir();
        Log.v("", "inside mkdir");

    }

    Random generator = new Random();
    int n = 10000;
    n = generator.nextInt(n);
    String fname = imageName;
    File file = new File (myDir, fname);
    if (file.exists ()) file.delete (); 

         /* Open a connection to that URL. */
        URLConnection ucon = url.openConnection();
        InputStream inputStream = null;
       HttpURLConnection httpConn = (HttpURLConnection)ucon;
      httpConn.setRequestMethod("GET");
      httpConn.connect();

      if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
       inputStream = httpConn.getInputStream();
      }

        /*
         * Define InputStreams to read from the URLConnection.
         */
       // InputStream is = ucon.getInputStream();
        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */

        FileOutputStream fos = new FileOutputStream(file);
        int size = 1024*1024;
        byte[] buf = new byte[size];
        int byteRead;
        while (((byteRead = inputStream.read(buf)) != -1)) {
            fos.write(buf, 0, byteRead);
            bytesDownloaded += byteRead;
        }
        /* Convert the Bytes read to a String. */

        fos.close();

} catch(IOException io) {
    networkException = true;
    continueRestore = false;
} catch(Exception e) {   
    continueRestore = false;
    e.printStackTrace();
} 
```

}

# css - 如何向 Rails 应用程序添加自定义字体？

> ID：12329137
> 
> 赞同：24
> 
> 时间：2012-09-08T08:10:48.483
> 
> 标签：css, ruby-on-rails, fonts

我想在我的 RoR 应用程序中使用几种字体，但它们的格式主要是 .ttf 和 .otf 等。我将如何将这些文件嵌入到我的 Rails 应用程序中？也就是说，一旦我将它们放入我的资产文件夹中，我将它们嵌入到我的 CSS 和/或 LESS 文件中的语法到底是什么？

编辑：这是我现在拥有的代码：

```
@font-face {
    font-family: Vow;
    src: url('/assets/Vow.otf');
}
h1 {
    font-family: Vow;
    text-align: center;
} 
```

它似乎对我不起作用。Rails 控制台中的输出大致如下：

```
ActionController::RoutingError (No route matches [GET] "/assets/Vow.otf") 
```

并用 Firebug 检查页面说：

```
downloadable font: download failed (font-family: "Vow" style:normal weight:normal stretch:normal src index:0): status=2147746065
source: http://localhost:3000/assets/Vow.otf 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-08T08:17:02.790

结帐[http://www.css3.info/preview/web-fonts-with-font-face/](http://www.css3.info/preview/web-fonts-with-font-face/)

更大的例子，假设它们直接在 assets 目录下解析

```
@font-face {
  font-family: 'Nokia Pure Headline';    
  src: url('/assets/nokiapureheadlinerg-webfont.eot');
  src: url('/assets/nokiapureheadlinerg-webfont.eot?iefix') format('eot'),
  url('/assets/nokiapureheadlinerg-webfont.woff') format('woff'),
  url('/assets/nokiapureheadlinerg-webfont.ttf') format('truetype'),
  url('/assets/nokiapureheadlinerg-webfont.svg#webfont3AwWkQXK') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

对不起，我不知道 LESS

同样对于资产管道的配置，我们使用以下可用的资产/字体的内容：

```
# Enable the asset pipeline
config.assets.enabled = true
config.assets.paths << Rails.root.join('/app/assets/fonts') 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-01-29T09:44:10.447

# 向 Rails 应用程序添加自定义字体

1.  选择字体类型并下载
    例如
    去[http://www.dafont.com](http://www.dafont.com)
    选择字体并下载字体

2.  生成字体文件

    转到[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)
    选择 - 网络字体生成器 - 选择字体 u 下载（从[http://www.dafont.com](http://www.dafont.com)下载的解压缩文件）。

3.  检索字体文件
    此站点将生成另一个 zip，其中包含该字体样式所需的所有内容。
    从那个 zip，解压缩并打开 css，将 css 复制到你的 html 或 css 文件中

4.  将字体添加到您的 rails 应用程序

    （[如何向 Rails 应用程序添加自定义字体？](https://stackoverflow.com/questions/12329137/how-to-add-a-custom-font-to-rails-app)）

    配置/应用程序.rb

    ```
     config.assets.enabled = true  
     config.assets.paths << "#{Rails.root}/app/assets/fonts" 
    ```

5.  将其添加到视图中：

    ```
    <html lang="en">  
      <head>  
        <style>  
          @font-face {  
            font-family: 'a_sensible_armadilloregular';  
            src: url('/assets/para/a_sensible_armadillo-webfont.eot');  
            src: url('/assets/para/a_sensible_armadillo-webfont.eot?#iefix') format('embedded-opentype'),  
              url('/assets/para/a_sensible_armadillo-webfont.woff') format('woff'),  
              url('/assets/para/a_sensible_armadillo-webfont.ttf') format('truetype'),  
              url('/assets/para/a_sensible_armadillo-webfont.svg#a_sensible_armadilloregular') format('svg');  
            font-weight: normal;  
            font-style: normal;  
         }  
         .content p {  
            font-family: 'a_sensible_armadilloregular';  
            font-size: 42px;  
         }  
       </style>  
     </head>  
     <body>  
       <div class="content">  
         <p>sample text</p>  
       </div>  
     </body> 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T09:39:34.617

使用 google 字体向 Rails 应用程序添加自定义字体

例如我正在使用雀斑脸
[http://www.google.com/fonts#QuickUsePlace:quickUse/Family](http://www.google.com/fonts#QuickUsePlace:quickUse/Family)：
快速使用：雀斑脸

**1.选择你想要的样式：**
对页面加载时间的影响
提示：使用多种字体样式会降低你的网页速度，所以只选择你网页上实际需要的字体样式。

**2\. 选择您想要的字符集：**
提示：如果您只选择您需要的语言，您将有助于防止网页运行缓慢。
拉丁语 (latin)
拉丁语扩展 (latin-ext)

**3\. 将此代码添加到您的网站：**
说明：要将您的集合嵌入到您的网页中，请将代码复制为 HTML 文档中的第一个元素。

```
<link href='http://fonts.googleapis.com/css?family=Freckle+Face' rel='stylesheet' type='text/css'> 
```

**4\. 将字体集成到您的 CSS 中：**
Google Fonts API 将生成必要的特定于浏览器的 CSS 以使用字体。您需要做的就是将字体名称添加到您的 CSS 样式中。例如：

```
font-family: 'Freckle Face', cursive; 
```

说明：将字体名称添加到您的 CSS 样式中，就像您通常使用任何其他字体一样。

例子：

```
h1 { font-family: ‘Metrophobic’, Arial, serif; font-weight: 400; }  

<head>  
  <meta charset='UTF-8' />  
  <link href='http://fonts.googleapis.com/css?family=Freckle+Face' rel='stylesheet' type='text/css'>  
</head>  
<body>  
 <div id="header">  
  <div id="nav">  
   <a href="#contact">Contact</a> <span style="word-spacing:normal; color:white; font-family: 'Freckle Face', cursive;, arial, serif; font-size:20px;"><--Click a link to see this page in action!</span>  
  </div>  
 </div>  
</body> 
```

# c# - 列出所有系统颜色

> ID：12329138
> 
> 赞同：1
> 
> 时间：2012-09-08T08:10:52.093
> 
> 标签：c#, gdi+, systemcolors

在 Windows.Forms 中，我需要创建一个接受任何颜色的程序并尝试为其找到相应的系统颜色。

我无法弄清楚如何遍历 System.Drawing.SystemColors 类的所有颜色 - 它是一个类，而不是枚举或列表。

我该怎么做（某种反思？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:20:12.443

怎么样

```
public static Dictionary<string,object> GetStaticPropertyBag(Type t)
{
    const BindingFlags flags = BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic;

    var map = new Dictionary<string, object>();
    foreach (var prop in t.GetProperties(flags))
    {
        map[prop.Name] = prop.GetValue(null, null);
    }
    return map;
} 
```

或者

```
foreach (System.Reflection.PropertyInfo prop in typeof(SystemColors).GetProperties())
{
     if (prop.PropertyType.FullName == "System.Drawing.Color")
         ColorComboBox.Items.Add(prop.Name);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:25:12.020

我煮了一些东西。

```
var typeToCheckTo = typeof(System.Drawing.Color);
var type = typeof(System.Drawing.SystemColors);
var fields = type.GetProperties(System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public).Where(p => p.PropertyType.Equals(typeToCheckTo));
foreach (var field in fields)
{
    Console.WriteLine(field.Name + field.GetValue(null, null));
} 
```

# android - 线性水平布局中一组三个图像的权重设置

> ID：12329142
> 
> 赞同：0
> 
> 时间：2012-09-08T08:12:38.593
> 
> 标签：android, android-layout, textview, android-layout-weight

我有一个单一的垂直线性布局，里面有一个滚动视图。

以编程方式，我在里面添加了一些东西

*   一个TextView，没关系：我可以使用它来居中

    ```
    LayoutParams params = new LinearLayout.LayoutParams (
    LayoutParams.FILL_PARENT,
    LayoutParams.WRAP_CONTENT
    );

    ...

    monthNameTextView.setLayoutParams(params);
    monthNameTextView.setGravity(Gravity.CENTER_HORIZONTAL); 
    ```

*   然后我添加一个水平线性布局。没关系

    ```
    gallery = new LinearLayout(this);

    gallery.setOrientation(LinearLayout.HORIZONTAL);
    gallery.setGravity(Gravity.CENTER_HORIZONTAL);
    gallery.setLayoutParams(params); 
    ```

*   然后我添加 3 ImageView 从磁盘加载图像

    ```
    Bitmap myJpg = BitmapFactory.decodeFile(imgFile.getAbsolutePath());  
    ImageView cover = new ImageView(this);
    cover.setImageBitmap(myJpg);
    gallery.addView(cover); 
    ```

图像被加载，是三个，并以线性布局为中心。

**问题**是下一张图像与下一张图像之间没有间距。

我是新手，我正在尝试了解 layout_weight 和 weight 的区别，我在这里问你如何以编程方式设置这些参数，以得到一组简单居中的三个图像，每个图像之间都有“一些”间距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:38:54.070

更改用于将 ImageViews 添加到此的代码：

```
Bitmap myJpg = BitmapFactory.decodeFile(imgFile.getAbsolutePath());  
ImageView cover = new ImageView(this);
cover.setImageBitmap(myJpg);
LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
llp.setMargins(YOUR_DESIRED_SPACE_VALUE, 0, 0, 0); // 4 margin values for Top/Left/Right/Bottom
gallery.addView(cover, llp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:01:23.143

是否需要在您的代码中进行布局？如果要显示的图像数量始终为三个，只需创建一个 XML 布局文件，然后为它们动态设置图像。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" 
        android:layout_margin="5dp"/>

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" 
        android:layout_margin="5dp"/>

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" 
        android:layout_margin="5dp"/>

</LinearLayout> 
```

然后在您的代码中：

```
ImageView iv1 = (ImageView) findViewById(R.id.imageView1);
iv1.setImageBitmap(YOUR_BITMAP);
// ... 
```

# windows - 通过 Windows 命令行进行 Hardsub/转换

> ID：12329146
> 
> 赞同：0
> 
> 时间：2012-09-08T08:12:51.727
> 
> 标签：windows, command-line, ffmpeg, converter, mencoder

很长一段时间以来，我一直在尝试通过 cmd 硬分流视频。我仍然找不到正确的方法。我尝试了 HandbrakeCLI、ffmpeg 和 mencoder，但仍然找不到方法。我非常接近使用 HandbrakeCLI 进行硬子化，但存在一些代码集问题，最终它并不是真正的硬子化。我真的需要找到一种方法来通过 CMD 硬子化 .avi/.mp4 文件。如果您知道任何方法，请帮助我！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:14:03.810

尝试这个：

```
mencoder -sub sub.srt -utf8 -font 'Arial Unicode MS' in.mp4 -o out.mp4 -of lavf -oac copy -fafmttag 0x706D -ovc x264 -x264encopts profile=baseline:bitrate=300k 
```

在此之后，我必须通过 ffmpeg 传递它：

```
ffmpeg -i out.mp4 -acodec copy -vcodec copy final.mp4 
```

由于 mencoder 生成的 mp4 存在一些问题，它无法在某些安卓手机上播放。

# c++ - 错误 C2143：语法错误：在 '<' 之前缺少 ','

> ID：12329148
> 
> 赞同：1
> 
> 时间：2012-09-08T08:12:57.703
> 
> 标签：c++, visual-studio-2012

下面的代码无法在 vs 2012 中编译。在第 4 行中，我收到错误 C2143：语法错误：在 '<' 之前缺少 ','。有人可以帮我解决它。我将不胜感激。

附言。不要专注于不区分大小写，我删除了一些内容以使代码更简单。

```
#include<functional>

template<typename Ty>
struct case_insensitive_less : public binary_function<Ty, Ty, bool>{
    bool operator()(Ty const& left, Ty const& right) const
    {
        return (left < right);
    }
};

int main(){} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T08:16:07.897

您需要`std`命名空间：

```
std::binary_function 
```

请注意[std::binary_function](http://en.cppreference.com/w/cpp/utility/functional/binary_function)在 C++11 中已弃用。如果您有 C++11 支持，请考虑使用[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)和/或[lambdas](http://en.wikipedia.org/wiki/Anonymous_function#C.2B.2B)。

# sql - 使用oracle plsql触发器从生日计算年龄并将年龄插入表中

> ID：12329149
> 
> 赞同：3
> 
> 时间：2012-09-08T08:13:03.833
> 
> 标签：sql, database, oracle, triggers, plsql

我有一张桌子

```
dates
(dob date,
age number(4)
); 
```

我将插入出生日期，触发器将计算年龄并将该年龄插入年龄字段。

```
CREATE OR REPLACE PROCEDURE getage IS 
ndob date;
nage number(10);
BEGIN
select dob into ndob from dates; 
select (sysdate-to_date(ndob))/365 into nage from dual;
update dates set age=nage;
END;
/
SHOW ERRORS; 
```

此过程工作正常，但仅适用于一行，我需要所有行的触发器，但如果我从触发器调用它，则会发生错误。

```
CREATE OR REPLACE TRIGGER agec after INSERT OR UPDATE ON dates
FOR EACH ROW
BEGIN
getage;
END; 
/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T08:38:14.833

> 请帮助...我真的需要这个...

不，你没有。我不确定你会注意；而且你没有理由应该:-)但是：

**不要将年龄存储在数据库中。**你绝对保证偶尔会出错。每个人的年龄每年都在变化，但是，对于某些人来说，它每天都在变化。这反过来意味着您需要每天运行批处理作业并更新年龄。如果这失败了，或者不是*非常严格*并且运行了两次，那么你就有麻烦了。

您应该*始终*在需要时计算年龄。这是一个相当简单的查询，从长远来看可以为您节省很多痛苦。

```
select floor(months_between(sysdate,<dob>)/12) from dual 
```

我设置了一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/3b725/3)来演示

* * *

现在，要真正回答你的问题

> 此过程工作正常，但仅适用于一行，但是对于我需要触发器的所有行，但如果我从触发器中调用它，则会发生错误......

你没有提到错误，请在以后这样做，因为它非常有帮助，但我怀疑你得到了

> ORA-04091: 表 string.string 正在变异，触发器/函数可能看不到它

这是因为您的过程正在查询正在更新的表。Oracle 不允许这样做以维护数据的读取一致性视图。避免这种情况的方法是不查询表，您不需要这样做。将您的过程更改为在给定出生日期的情况下返回正确结果的函数：

```
function get_age (pDOB date) return number is
   /* Return the the number of full years between 
      the date given and sysdate.
      */    
begin    
   return floor(months_between(sysdate,pDOB)/12);    
end; 
```

请再次注意，我正在使用该[`months_between()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions102.htm#SQLRF00669)函数，因为并非所有年份都有 365 天。

然后在您的触发器中将值直接分配给该列。

```
CREATE OR REPLACE TRIGGER agec before INSERT OR UPDATE ON dates
FOR EACH ROW
BEGIN
   :new.age := get_age(:new.dob);
END; 
```

`:new.<column>`语法是对`<column>`正在更新的内容的引用。在这种情况下`:new.age`，是要放入表中的实际值。

这意味着您的表将自动更新，这是[DML 触发器的点](http://docs.oracle.com/cd/E11882_01/server.112/e25789/srvrside.htm#CNCPT118)。

如您所见，该功能根本没有意义。你的触发器可以变成

```
CREATE OR REPLACE TRIGGER agec before INSERT OR UPDATE ON dates
FOR EACH ROW
BEGIN
   :new.age := floor(months_between(sysdate,:new,DOB)/12);
END; 
```

但是，话虽如此，如果您要在数据库的其他地方使用此功能，请将其分开。将在多个地方使用的代码保存在这样的函数中是一种很好的做法，因此它始终以相同的方式使用。它还确保无论何时任何人计算年龄，他们都会正确计算。

顺便说一句，您确定要让人们活到 9,999 岁吗？还是 0.000000000001998 [（证明）](http://www.sqlfiddle.com/#!4/23a04)？[数值精度](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#SQLRF30020)基于*有效*位数；这（根据 Oracle）只是*非零*数字。你很容易被这个抓住。数据库的重点是将可能的输入值限制为仅有效的输入值。我会认真考虑声明您的年龄列，`number(3,0)`以确保仅包含“可能”的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T14:02:41.137

如果您通过触发来执行此操作，则一天后的年龄可能会出错。这就是为什么在数据库表中保存年龄是不好的做法，没有人这样做。你需要的是一个视图。

```
create view person_age as
  select person_id, 
    floor(months_between(trunc(sysdate),birthdate)/12) as age
    from birthdays; 
```

看看[SQL Fiddle](http://sqlfiddle.com/#!4/e8990/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T15:24:17.570

如果您希望 AGE 从数据库中可用，有两种选择：

1.  定义一个包含年龄计算的视图，或者
2.  定义一个执行相同操作的虚拟列

要定义这样的视图：

```
CREATE OR REPLACE VIEW DATES_VIEW
  AS SELECT DOB,
            FLOOR(MONTHS_BETWEEN(SYSDATE, DOB) / 12) AS AGE
        FROM DATES 
```

这样做的问题是你必须记住你是从 DATES_VIEW 中选择的，但需要更新 DATES，这在精神上很混乱。IMO 向表中添加虚拟列更简洁：

```
CREATE TABLE DATES
  (DOB      DATE,
   AGE      GENERATED ALWAYS AS (FLOOR(MONTHS_BETWEEN(SYSDATE, DOB) / 12)) VIRTUAL); 
```

请注意，无法更新虚拟列。

任何一种方法都有助于确保 AGE 始终保持一致。

分享和享受。

# c - c程序将媒体文件从一个位置复制到另一个位置

> ID：12329150
> 
> 赞同：0
> 
> 时间：2012-09-08T08:13:10.270
> 
> 标签：c, file, copy

```
#include<stdio.h>
#include<stat.h>
#include<fcntl.h>
main()
{
int inhandle,outhandle,bytes;
char source[128],target[128],buffer[512];
printf("enter source file name\n");
scanf("%s",source);

inhandle=open(source,O_RDONLY|O_BINARY);
if(inhandle==-1)
{
    printf("cannot open source file\n");
    exit(0);
}
printf("enter target file name\n");
scanf("%s",target);
outhandle=open(target,O_CREAT|O_BINARY,O_WRONLY,S_IWRITE);
if(outhandle==-1)
{

    printf("cannot open target file\n");
    close(outhandle);
    exit(0);
}
while(1)
{
    bytes=read(inhandle,buffer,512);
    if(bytes>0)
    {
        write(outhandle,buffer,bytes);
    }
    else
    break;
}
close(inhandle);
close(outhandle);
} 
```

程序编译时出现 0 个错误，当我在 scanf 中传递参数时，甚至没有与打开文件相关的错误被抛出。我似乎无法使用该程序复制任何媒体文件，如 .avi 格式，该文件确实在其目标位置创建但有 0 个字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:22:31.603

问题出在您的第二个`open(2)`电话中：

```
outhandle=open(target,O_CREAT|O_BINARY,O_WRONLY,S_IWRITE);
                                      ^        ^ 
```

您的意思可能不是第二个逗号，而是一个`|`. 由于逗号`O_WRONLY`将是第三个参数，`mode`并且文件将没有正确的权限。

# iphone - IOS GameCenter沙盒模式？

> ID：12329163
> 
> 赞同：3
> 
> 时间：2012-09-08T08:14:10.657
> 
> 标签：iphone, ios, game-center

我计划在应用商店更新我当前的游戏并在其中集成 GameCenter。我已经完成并在设备上对其进行了测试。现在，每当我登录设备时，它都是沙盒状态。即使我从 GameCenter 登录，仍然会要求我在沙盒状态下登录。如何在非沙盒版本上进行测试。我有点困惑。谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:17:06.700

在获得 Apple 批准和发布之前，您不能使用非沙盒版本。如果它在沙盒模式下工作正常，那么当 Apple 将其切换到非沙盒时它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:21:15.810

沙盒用于测试您的应用程序，因此您不会破坏正常的 GC 服务器。总而言之-您的最终应用程序将在常规 GC 服务器上运行，而测试在沙箱上。苹果规则。

# google-app-engine - 在 App Engine Python (APP.YAML) 中捕获所有脚本在静态文件中不起作用

> ID：12329169
> 
> 赞同：1
> 
> 时间：2012-09-08T08:16:58.637
> 
> 标签：google-app-engine, python-2.7, http-status-code-404, catch-all

我已经尝试了所有方法，但似乎您无法获取所有网址...

```
- url: /.*
  script: not_found.py 
```

...处理基于静态目录路径的 url。例如。我可以输入 www.foobar.com/asdas/asd/asd/asd/ad/sa/das/d 并获得一个不错的自定义 404 页面。但是，如果我更改像 www.foobar.com/mydir/mydir/mypage.html 这样的静态路径 url，我只会得到可怕的通用 404 ....

```
Error: Not Found

The requested URL /mydir/mydir/mypage.html was not found on this server. 
```

...我想更改在目录路径中捕获 url 并写入 404 的任何内容。这似乎是在 GAE Python 中获得一致的自定义 404 页面的唯一方法。

任何人都可以帮忙吗？我从头开始编写我的网站，并且对 Python 的了解非常有限。实现一致的自定义 404 是我似乎无法克服的唯一事情。

编辑/添加：好的，我已经添加了@Lipis 的善意建议，并完成了入门，幸运的是，这让我对课程有了更好的理解（遗憾的是，我还不能投票）。但！我正在使用在网上找到的 .py 脚本，我认为 NotFound 类干扰了提供我的索引页面的类，因为现在我的索引页面是 Jinja 指定的 404 页面！我对 MainHandler 了解很少，所以我现在可能不得不放弃。

```
import os
from google.appengine.ext import webapp
from google.appengine.ext.webapp import util
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp.util import run_wsgi_app

import jinja2

class MainHandler(webapp.RequestHandler):
  def get (self, q):
    if q is None:
      q = 'index.html'

    path = os.path.join (os.path.dirname (__file__), q)
    self.response.headers ['Content-Type'] = 'text/html'
    self.response.out.write (template.render (path, {}))

class NotFound(webapp.RequestHandler):
      def post(self):
         # you need to create the not_found.html file
         # check Using Templates from Getting Started for more

         jinja_environment = jinja2.Environment(
         loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

         template = jinja_environment.get_template('404.html')
         self.response.out.write(template.render(template_values))

def main ():
  application = webapp.WSGIApplication ([('/(.*html)?', MainHandler),('/.*', NotFound)], 
                                      debug=True)

  util.run_wsgi_app (application)

if __name__ == '__main__':
  main () 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T11:26:52.450

为了更好地理解，我将对[Getting Started](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)示例进行一些修改，我假设您已经完成了它并用它做了一些实验。

为所有未找到的页面保留静态文件并不是一个好主意，`app.yaml`因为您很可能希望显示更动态的内容，并且通常`- url: /.*`应该在您的应用程序中处理。

在此[示例](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms)中，我们`RequestHandler`将为所有*未找到*的页面添加一个新页面

```
import jinja2
import os
# more imports

jinja_environment = jinja2.Environment(loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):
         template = jinja_environment.get_template('index.html')
         self.response.out.write(template.render(template_values))

class NotFound(webapp.RequestHandler):
    def get(self):
         # you need to create the not_found.html file
         # check Using Templates from Getting Started for more
         template = jinja_environment.get_template('not_found.html')
         self.response.out.write(template.render(template_values))

application = webapp.WSGIApplication(
                                     [('/', MainPage),
                                      ('/.*', NotFound)], # <-- This line is important
                                      debug=True) 
```

但是为了使 jinja2 模板正常工作，请仔细遵循入门中[使用模板部分中需要进行的修改。](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)

URL 映射中的顺序非常重要，因此这个 catch all 正则表达式 ( `/.*`) 应该始终是最后一个，否则将跳过所有其他规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:33:09.613

如果要捕获所有 URL，则必须通过添加“/.*”来修改文件“not_found.py”中的主请求处理程序。

例如，您可以将文件“not_found.py”设置为：

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class MainHandler(webapp.RequestHandler):
  def get(self):
    self.response.out.write("Hello, MAIN!")

application = webapp.WSGIApplication(
                                 [('/.*', MainHandler)], # <--- Add '/.*' here
                                 debug=True)

def main():
    run_wsgi_app(application) 
```

如果您导航到 www.foobar.com/asd/ad/sa/das/d 或任何其他 URL，您将看到消息“Hello, MAIN!.

希望能帮助到你。需要时提问

# node.js - Node.js 垃圾回收

> ID：12329172
> 
> 赞同：1
> 
> 时间：2012-09-08T08:17:19.013
> 
> 标签：node.js

Node.js 会做自动垃圾回收吗？

```
var objUser         = new Object ();
objUser.userName    = objReq.userName;
userDB.registerUser (objUser , callback) ; 
```

在上面的代码中，我有“objUser”，它将作为参数传递给另一个类，并且在当前类中不再需要它。不过，我应该强制收集它还是会自动收集它。

要手动执行，NULL 会有所帮助还是 Node Framework 提供了任何其他机制？

```
objUser = null; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:52:09.183

Node 会进行垃圾收集，但如果`userDb.registerUser()`保留对它的引用，`objUser`则*不会*被收集。只有当没有对对象的引用时，它才会被收集。您通常不需要通过分配`null`给变量来显式释放本地引用 - 当您的函数返回时，所有本地引用都会自动释放。您只需要担心对您的对象的全局引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T06:37:14.063

关于这个主题也值得注意：根据我的经验，相同类型的对象将重用实例。因此，如果您真的想要一个对象的“new Instance()”，请确保您取消或重置构造函数中的任何属性

# php - 如何在 if 语句之外重用我的变量

> ID：12329175
> 
> 赞同：0
> 
> 时间：2012-09-08T08:17:34.693
> 
> 标签：php, if-statement, scope

我试图弄清楚如何在 if 语句之外重用我的 $php_file 和 doc_file 变量？

这是场景...

通常对于每个文件（.pdf/.doc/whatever）上传到文件路径，还有一个 php 文件也被创建。下面是一个快速细分。

> myuploaded_file.pdf
> 
> myuploaded_file.pdf.php

基本上我试图将这些文件区分为它们自己定义的变量，所以我的最终结果如下......

```
$doc_file=myuploaded_file.pdf

$php_file=myuploaded_file.pdf.php 
```

然后基本上循环运行该目录中所有上传的文件。

我的位置非常接近我需要的位置，即在每个 if 语句中使用时正确定义了变量，但是我看到了如何在 if 语句之外使用这些变量，因为文件是根据文件类型正确定义到自己的变量中。

如果没有遇到“doc_file 或 php_file 变量未定义”，我什至无法在 if 语句之外回显这些变量。我尝试修改设置全局变量、var_dump 等，但我仍然没有运气。有任何想法吗？

更新代码

```
<?php
// Open the folder
$f_path = "files/News/"; 

$dir_handle = @opendir($f_path) or die("Unable to open $f_path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 
    $doc_file="";
    $php_file="";

    // Verify files
    if($file == "." || $file == ".." ) {
        continue;
    }
    // Validate if the file is appended with .php
    if (strpos($file , '.php') !==false) {
        $php_file = $file;
        //echo "PHP: $php_file <br />";
    }
    // Print out the files that don't contain the .php extension
    else {
        $doc_file = $file;          
        //echo "PDF: $doc_file <br />";
    }
echo "PHP: $php_file <br />";
echo "PDF: $doc_file <br />";
}

// Close 
closedir($dir_handle);

?> 
```

循环结果

我正在了解如何避免在结果中返回空白值？

PHP：

PDF：uploaded_file1.pdf

PHP：uploaded_file1.pdf.php

PDF：

PHP：

PDF：uploaded_file1.pdf

PHP：uploaded_file1.pdf.php

PDF：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:22:57.383

```
// Open the folder 
$dir_handle = @opendir($f_path) or die("Unable to open $f_path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 

//variables to be used
$php_file = "";
$doc_file = "";

// Verify files
if($file == "." || $file == ".." ) 
{
    continue;
}
        // Validate if the file is appended with .php
        if (strpos($file , '.php') !==false)
        {
        $php_file = $file;
        echo "PHP: $php_file <br />";
        }
        // Print out the files that don't contain the .php extension
        else
        {
        $doc_file = $file;          
        echo "PDF: $doc_file <br />";
        }

} 
// Close 
closedir($dir_handle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:19:05.660

在您的 if 之外定义它们，它们也将在您的 if 范围之外可用。

```
// Loop through the files 
while ($file = readdir($dir_handle)) { 
    $doc_file="";
    $php_file="";

    // Verify files
    if($file == "." || $file == ".." ) {
        continue;
    }
    // Validate if the file is appended with .php
    if (strpos($file , '.php') !==false) {
        $php_file = $file;
        echo "PHP: $php_file <br />";
    }
    // Print out the files that don't contain the .php extension
    else {
        $doc_file = $file;          
        echo "PDF: $doc_file <br />";
    }
} 
```

如果你在那个while循环之外也需要它们，就把它们放在那个循环之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T08:22:01.223

默认情况下，您可以在`if`,中使用变量`while`，`foreach`但它们在每个循环中都会被重写

```
<?php
// Open the folder
$f_path = "files/News/"; 

$dir_handle = @opendir($f_path) or die("Unable to open $f_path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 
    $doc_file="";
    $php_file="";

    // Verify files
    if($file == "." || $file == ".." ) {
        continue;
    }
    // Validate if the file is appended with .php
    if (strpos($file , '.php') !==false) {
        $php_file = $file;
        if(trim($php_file) != ""){
            echo "PHP: $php_file <br />";
        }
    }
    // Print out the files that don't contain the .php extension
    else {
        $doc_file = $file;
        if(trim($doc_file) != ""){
            echo "DOC: $doc_file <br />";
        }
    }
}

// Close 
closedir($dir_handle);

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T08:22:57.720

```
<?php
if (1==1) {
    $abc=3;
}
echo $abc;
?> 
```

这会打印出“3”，这意味着变量已经在 ifs 之外可用。

# activemq - 如何从 activemq 中删除目标

> ID：12329176
> 
> 赞同：0
> 
> 时间：2012-09-08T08:17:40.680
> 
> 标签：activemq

我如何使用 java 从 activemq 中删除队列。任何人都可以提供有关此的任何示例。我已经 google 了它，但我没有找到正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:22:46.687

这个 SO Thread，特别是 BOdays 的回答： [ActiveMQ delete queue from java](https://stackoverflow.com/questions/12062677/activemq-delete-queue-from-java)

指向同一作者的这篇博文：http: [//www.consulting-notes.com/2010/08/monitoring-and-managing-activemq-with.html](http://www.consulting-notes.com/2010/08/monitoring-and-managing-activemq-with.html)

它展示了如何使用 JMX/Java 来做到这一点。

享受

# java - 构造函数中的参数检查

> ID：12329185
> 
> 赞同：2
> 
> 时间：2012-09-08T08:19:47.117
> 
> 标签：java, constructor, typechecking

假设我有一个对象的构造函数，它接受大约 6 个参数，但其中两个或多个参数是相关的，例如：

```
LoanProduct(CurrencySum maxSum, CurrencySum minSum, Interest interest, etc) 
```

**CurrencySum**是两个对象的包装器：*BigDecimal*和表示货币的*Enum 。*

**Interest**是一个具有两个子类的接口：**FixedInterest**和**VariableInterest**。

**VariableInterest**包装了一个表示固定值的*BigDecimal和一个***VarIndex**对象，该对象是感兴趣的变化位 - VarIndex 基本上是 libor 1m、libor 2m 等（VariableInterest = BigDecimal fixedValue + VarIndex variableValue）

现在，让我烦恼的一点是，当创建**LoanProduct**时，我必须在构造函数中检查*maxSum*和*minSum*是否具有相同的**Currency**，并且如果**VariableInterest**拥有与该**Currency**对应的**VarIndex**，因为 LoanProduct 欧元可以'没有为 libor 设置 VarIndex，它必须是 euribor。

 **有没有一种优雅的方式来构造 LoanProduct 而无需所有这些检查？我正在考虑使用构建器模式并在构建器中进行所有检查，但它看起来仍然很难看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:27:15.497

在我看来，建造者模式。Effective Java 在这方面有一个很好的章节。

或者您可以将其中一些参数封装在它们自己的对象中以减少数量**

# c# - 如何在 asp.net 网页中播放声音？

> ID：12329191
> 
> 赞同：8
> 
> 时间：2012-09-08T08:20:59.337
> 
> 标签：c#, asp.net

单击按钮后，我想在网页中播放一些声音。这是我的代码，但它显示错误。

```
SoundPlayer x = new SoundPlayer();
x.SoundLocation = "WindowsBalloon.wav";
//x.Play();
x.PlaySync(); 
```

错误：

> 请确保指定位置存在声音文件。

但该文件存在于我的项目中，我确信地址是正确的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T08:33:40.767

**[您不能使用System.Media.Soundplayer](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)类在网页上播放文件！！！**

## 原因

它将在服务器端而不是客户端播放声音。

如以下链接所述
- [Web 主机上的 C# System.Media.SoundPlayer 类的问题](http://www.dreamincode.net/forums/topic/27846-problem-with-the-c%23-systemmediasoundplayer-class-on-a-web-host/)
-[自动播放声音的最“兼容”方式是](https://stackoverflow.com/questions/5775832/what-is-the-most-compatible-way-of-autoplaying-sound/5775984#5775984)什么？

## 解决方案

*   其他[SO回答](https://stackoverflow.com/a/5775984/468718)同样的要求。
*   使用任何其他基于 Flash 或 Silverlight 的插件。
*   使用 html 嵌入标签或 html5 音频标签。例子可以在[w3schools上看到](http://www.w3schools.com/html/html_sounds.asp)

## 基于 Html5 的音频解决方案（仅适用于现代浏览器）

*   `<embed>`标记：`<embed>`标记定义外部（非 HTML）内容的容器。（它是一个 HTML5 标记，在 HTML 4 中无效，但适用于所有浏览器）。

```
<embed height="100" width="100" src="horse.mp3" /> 
```

*   `<object>`标签：`<object>`标签还可以为外部（非 HTML）内容定义一个容器。

```
<object height="100" width="100" data="horse.mp3"></object> 
```

*   `<audio>`tag：该`<audio>`元素是 HTML5 元素，在 HTML 4 中无效，但在所有浏览器中都有效。

```
<audio controls="controls" height="100" width="100">
  <source src="horse.mp3" type="audio/mp3" />
  <source src="horse.ogg" type="audio/ogg" />
  <embed height="100" width="100" src="horse.mp3" />
</audio> 
```

请注意基于 html5 的解决方案的问题，您必须将视频转换为不同的格式。
-`<audio>`元素不验证为 HTML 4 和 XHTML。
-`<embed>`元素不验证为 HTML 4 和 XHTML。
-`<embed>`元素不能“回退”以显示错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T08:24:56.623

您需要使用[`<object>`](https://developer.mozilla.org/en-US/docs/HTML/Element/object)或 `<embed>`html 标签。

```
<object data="WindowsBalloon.wav"></object> 
```

或 HTML5标签

```
<audio src="WindowsBalloon.wav">
  <p>Your browser does not support the audio element.</p>
</audio> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T07:52:43.660

这适用于`HTML5`：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Write("<embed height='0' width='0' src='Sound.wav' />");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-06T19:11:37.410

这就是我认为你想要的：

```
Server.MapPath(string path); 
```

返回与 Web 服务器上指定的虚拟路径相对应的物理文件路径。

参数： path：Web 服务器的虚拟路径。
返回： path 对应的物理文件路径。

```
SoundPlayer s = new SoundPlayer();<br>
s.SoundLocation = **Server.MapPath("WindowsBalloon.wav");**<br>
s.PlaySync(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-15T06:28:51.943

给定完整路径，即`c:\wavfiles\WindowsBalloon.wav`

上面的“wavfiles”是用户特权文件夹。

```
use x.PlayLooping() 
```

如果你想连续播放声音文件的功能

当心！

使用一键退出循环，否则声音文件将连续运行。我建议你退出循环： -

**代码**

```
 Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        x.Stop()
    End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-02T10:00:18.547

如果您需要以编程方式播放 ALARM 声音，您可以这样做：

```
<asp:Panel runat="server" ID="panBuzz" style="visibility:hidden">
   <audio runat="server" id="Buzz"  src="http://.....mp3" type="audio/mp3"/>
</asp:Panel> 
```

**背后的代码（视觉基础）：**

```
Dim cBuzz As HtmlControl = DirectCast(panBuzz.FindControl("Buzz"), HtmlControl)
cBuzz.Attributes.Add("autoplay", "autoplay") 
```

**后面的代码（C#）：**

```
HtmlControl cBuzz = (HtmlControl)panBuzz.FindControl("Buzz");
cBuzz.Attributes.Add("autoplay", "autoplay"); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-08T08:24:59.973

尝试将驱动器号添加到路径中，例如“C:/WindowsBalloon.wav”。但这不会在客户端播放。我建议在客户端尝试 HTML5。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2014-06-06T09:31:49.380

SoundPlayer s = 新的 SoundPlayer();
s.SoundLocation = **Server.MapPath("WindowsBalloon.wav");**
s.PlaySync();

# python - 抽取比例样本，无不良抽样

> ID：12329192
> 
> 赞同：0
> 
> 时间：2012-09-08T08:21:05.487
> 
> 标签：python, algorithm

我想从许多收藏中选择 15 张图片。图像数量取决于该集合中图像的比例。

我的代码如下：

```
image_counts = [16, 2, 14]
total_images = 0
for i in image_counts:
    total_images += i
proportions = [1.0 * i / total_images for i in image_counts]
counts = [int( round( 15 * i)) for i in proportions] 
```

但`[8, 1, 7]`由于四舍五入，输出加起来为 16。如何获得一个加起来正好 15 个的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:35:52.200

您的选择之一是：

```
image_counts = [16, 2, 14]
total_images = sum(image_counts)

proportions = [1.0 * i / total_images for i in image_counts]
counts = [int(15 * i) for i in proportions]
if sum(counts) < 15:
    counts[counts.index(min(counts))] += 1 
```

* * *

要完成此答案：

```
counts[counts.index(min(counts))] += 15 - sum(counts[1:]) # from user1654936 
```

并将最终列表截断为 15 个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:37:22.823

在大多数情况下，不可能根据计算的比例准确选择计数。因此，因为无论如何您都必须偏离比例，所以您可以更改例如`counts`列表的第一个数字，以便它加起来等于所需的总数：

```
image_counts = [16, 2, 14]
total_images = sum(image_counts)
proportions = [1.0 * i / total_images for i in image_counts]
counts = [int( round( 15 * i)) for i in proportions]
counts[0] = 15 - sum(counts[1:]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:35:53.230

除非每个集合中的图像数量和您想要的数量满足某些非常具体的条件，否则您通常不能让总数为 15（或任何您想要的）和正确的比例。

所以你需要决定如何调整这些数字以获得接近你想要的东西。您是否希望比例几乎正确（即使现在它也只是“几乎”，因为您已经四舍五入了）？或者您要允许总数不是 15 的数字？

还：

```
total_images = sum(image_counts) 
```

# ios5 - GLKBaseEffect：光+纹理

> ID：12329203
> 
> 赞同：1
> 
> 时间：2012-09-08T08:23:02.290
> 
> 标签：ios5, textures, glkit, light, glkbaseeffect

我正在尝试显示一些带有纹理的简单对象并在我的场景中启用聚光灯。我使用`GLKBaseEffect's`纹理和光线。

当纹理被禁用时 - 我可以看到灯光效果（当我旋转对象时，它部分变暗，正如预期的那样）。但是当我启用纹理（加载它们`GLKTextureInfo`并绑定`-(void)glkView:drawInRect:`）时 - 灯光效果消失了。

我尝试在 Google 中搜索并重新阅读 Apple 的文档，但仍然找不到答案。

*更新：*

这是我用来设置灯光的代码：

```
_effect.lightingType = GLKLightingTypePerPixel;
_effect.lightModelAmbientColor = GLKVector4Make(.3f, .3f, .3f, 1);
_effect.colorMaterialEnabled = GL_TRUE;

_effect.light0.enabled = GL_TRUE;
_effect.light0.spotCutoff = [[PRSettings instance] floatForKey:PRSettingsKeyLightSpotCutoff];
_effect.light0.spotExponent = [[PRSettings instance] floatForKey:PRSettingsKeyLightExponent];
_effect.light0.diffuseColor = _effect.light0.specularColor = GLKVector4Make(1, 1, 1, 1);
_effect.light0.position = GLKVector4Make(0, 0, 0, 1);
[_effect prepareToDraw]; 
```

如果我两次调用此代码 - 灯会以某种方式被禁用。即使没有纹理 - 第二次调用 - 我根本没有光。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T08:42:08.583

简单的答案...应该`_effect.texture2d0.envMode = GLKTextureEnvModeModulate;`用来混合输入颜色（灯光）和纹理。

# url - 仅当 URL 包含特定参数时才显示内容

> ID：12329206
> 
> 赞同：1
> 
> 时间：2012-09-08T08:24:40.880
> 
> 标签：url, parameters

我只想在 url 包含某些参数时显示内容。在判断URL是否存在的情况下，例如参数?offset=10。如果参数存在 (site.com/post-name?offset=10) 则显示内容 X，否则显示内容 Y。

例如：

```
function parameterUrl() {
$str = "?offset=10";
$uri = $_SERVER['REQUEST_URI']; 
if ($uri == "http://site.com/post-name$str") {
echo "Show this";
}
 else {
}
} 
```

但上述功能不起作用。任何人都可以帮忙。欢迎任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:28:41.597

您的参数存储在`$_GET`全局数组中。

你需要：

```
if (isset($_GET['offset']) && $_GET['offset'] == 10)
{
echo "show this";
}
else {
echo "show that";
} 
```

**从评论更新**

如果您要拥有多个数量，那么 switch 语句会更好：

```
if (isset($_GET['offset']))
{
    switch($_GET['offset'])
    {
        case 10:
            echo "show for 10";
        break;

        case 20:
            echo "show for 20";
        break;

        case 30:
            echo "show for 30;
        break;
//and so on
    }
}
else {
echo "show for no offset";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:29:42.157

`$_GET`检查是否设置了关联数组中的适当键。

```
isset($_GET['offset']) 
```

因此，在您的代码中，它将是：

```
<?php 
function parameterUrl() {
  if (isset($_GET['offset'])) {
    echo "Show this";
  }
  else {
  }
} 
?> 
```

（可选）如果它需要等于 10，请使用`(isset($_GET['offset']) && $_GET['offset'] == 10)`.

# c# - WPF DataGrid 未在 PropertyChanged 上更新

> ID：12329208
> 
> 赞同：13
> 
> 时间：2012-09-08T08:24:55.533
> 
> 标签：c#, wpf, data-binding, wpfdatagrid, inotifypropertychanged

使用 NotifyPropertyChanged 单击按钮时，我在更新我的数据网格时遇到问题。如果我在后面的代码中设置 DataGrid.ItemsSource 它可以工作，但如果我在 xaml 中设置它就不行。这是& xaml背后的一些代码代码：

```
namespace MyWpfDataBindingLab
{
public partial class NpcWindow : Window
{
    DataCollection dc = new DataCollection();

    public NpcWindow()
    {
        InitializeComponent();
        //command binding code
        //...
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        //if i set the ItemsSource here, updating of the UI works
        //dataGrid1.ItemsSource = dc;
    }

    private void CmdCollectionChangedExecute(object sender, ExecutedRoutedEventArgs e)
    {
        foreach (SampleClass s in dc)
        {
            s.Property1 = "changed";
            s.Property3 = "changed";
            s.Property3 = "changed";
            break;
        }

        dc.Add(new SampleClass("new sample 1", "new sample 2", "new sample 3"));
    }
}
}

<Window x:Class="WPFDataBinding.NpcWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:npc="clr-namespace:WPFDataBinding.NotifyPropChanged"
    Title="MainWindow" Height="189" Width="459" Loaded="Window_Loaded">
<Window.Resources>
    <npc:DataCollection x:Key="dataCol"/>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
    </Grid.ColumnDefinitions>
    <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="349,110,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    <!-- if i set the ItemsSource here, updating of the UI doesn't work -->
    <DataGrid ItemsSource="{Binding Source={StaticResource dataCol}, Mode=OneWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"
              AutoGenerateColumns="True" Height="103" HorizontalAlignment="Left" Margin="12,12,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="331" />
</Grid> 
```

我的数据和 NotifyPropertyChanged 实现：

```
namespace MyWpfDataBindingLab.NotifyPropChanged
{    
public class SampleClass : NotifyPropertyChanged
{
    private string _field1;
    private string _field2;
    private string _field3;

    public string Property1
    { 
        get { return _field1; } 
        set 
        {
            _field1 = value;
            OnPropertyChanged("Property1");
        }
    }

    public string Property2
    { 
        get { return _field2; } 
        set 
        {
            _field2 = value;
            OnPropertyChanged("Property2");
        }
    }

    public string Property3
    { 
        get { return _field3; } 
        set 
        {
            _field3 = value;
            OnPropertyChanged("Property3");
        }
    }

    public SampleClass()
    {
        _field1 = "value1";
        _field2 = "value2";
        _field3 = "value3";
    }

    public SampleClass(string p1, string p2, string p3)
    {
        _field1 = p1;
        _field2 = p2;
        _field3 = p3;
    }
}
}

namespace MyWpfDataBindingLab.NotifyPropChanged
{
public abstract class NotifyPropertyChanged : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}
}

namespace MyWpfDataBindingLab.NotifyPropChanged
{
public class DataCollection : ObservableCollection<SampleClass> 
{
    public DataCollection()
    {
        this.Add(new SampleClass());
        this.Add(new SampleClass());
        this.Add(new SampleClass());
    }
}
} 
```

我不知道问题是什么。如果有人可以帮助解决我的问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T08:38:50.443

在您的代码隐藏 .xaml.cs 创建属性

```
 public ObservableCollection<SampleClass> MyCollection {get; set;}

   private void Window_Loaded(object sender, RoutedEventArgs e)
   {
    //if i set the ItemsSource here, updating of the UI works
      dataGrid1.ItemsSource = MyCollection;
   } 
```

在 XAML 中：

```
 <DataGrid ItemsSource="{Binding Path=., Mode=OneWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-22T15:09:54.657

我跟进了 syned 的提示。对我来说，我必须将模式设为

```
Mode=TwoWay 
```

这里的关键是

```
UpdateSourceTrigger 
```

财产。

非常感谢...！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-13T19:23:26.643

当你发疯时（像我一样）因为这次它不起作用（虽然它总是起作用！）检查调用的顺序。OnPropertyChanged() 必须在赋值后调用。

```
public string Property1
{ 
    get { return _field1; } 
    set 
    {
        // assign the value first ...
        _field1 = value;

        // ... then call the property changed
        OnPropertyChanged(nameof(Property1));
    }
} 
```

# ios - UISplitViewController - 主视图以纵向模式隐藏时的事件？

> ID：12329212
> 
> 赞同：1
> 
> 时间：2012-09-08T08:25:00.993
> 
> 标签：ios, uisplitviewcontroller

当我的 splitViewController 处于纵向模式时，我希望在我通过触摸详细视图关闭主视图时调用委托方法 willHideViewController。不幸的是，情况似乎并非如此。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T07:54:23.817

`willHideViewController`只会在方向改变时调用。

`UIPopoverController`但是，您可以为负责在纵向模式下显示和隐藏主视图的委托设置一个委托。您可以在此方法中设置委托：`- (void)splitViewController:willHideViewController:withBarButtonItem:forPopoverController:popoverController`.

一旦委托到位，`UIPopoverControllerDelegate`每次用户以纵向模式关闭主视图时，都会调用协议中的方法。

有关委托方法，请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html)。

# php - 自动显示来自 SoundCloud 的多个播放列表

> ID：12329217
> 
> 赞同：0
> 
> 时间：2012-09-08T08:25:40.803
> 
> 标签：php, javascript, soundcloud

我正在为客户创建一个音乐网站，以前我有一个管理音乐部分的后端系统，但是客户希望从声音云中提取所有音乐。目前有 1 张专辑，但计划很快发布第二张专辑。

我的问题是如何让网站通过 php 自动提取单独的专辑（或播放列表）歌曲并在其自己的外壳中显示每张专辑。例如，该网站将为每张专辑提供艺术作品，然后是可播放歌曲的列表。

我查看了文档和谷歌，但似乎没有任何方法可以让网站自动生成每张专辑。有谁知道如何实现这一点（最好通过 php）或知道我在哪里可以找到？

# highcharts - 将标志工具提示移到上方

> ID：12329218
> 
> 赞同：0
> 
> 时间：2012-09-08T08:25:46.040
> 
> 标签：highcharts

我有带标志的 Highstock 图表。一切都很好，但我想更改标志工具提示的位置。（将标志的工具提示移动到标志的上侧）。而且我还想提供标志文本“**测试测试**”的链接，它将在新选项卡中打开。谁能帮我？这是我的完整代码[http://jsfiddle.net/anant_ghate/8byc9/1/](http://jsfiddle.net/anant_ghate/8byc9/1/)

```
// Create the chart
    window.chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container'
        },
        tooltip: {
            positioner: function(boxWidth, boxHeight, point) {
                return {
                    x: point.plotX + 20,
                    y: point.plotY + -20
                };
            },
            shared:true,
            formatter: function(){
                    var p = '';
                    if(this.point) {
                      p += '<span>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.point.x) +'</span><br/>';
                      p += '<b>'+ this.point.title + '</b>' // This will add the text on the flags
                    }
                    else {              
                      p += '<b>'+ Highcharts.dateFormat('%A, %b %e, %Y', this.x) +'</b><br/>';
                      $.each(this.points, function(i, series){
                        p += '<span style="color:' + this.series.color + '">' + this.series.name + '</span>: <b>'+ this.y;
                      });

                    }
                    return p;
            },              
        },
        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'USD to EUR exchange rate'
        },

        yAxis: {
            title: {
                text: 'Exchange rate'
            }
        },

        series: [{
            name: 'USD to EUR',
            data: data,
            id: 'dataseries',
            tooltip: {
                yDecimals: 4
            }
        }, {
            type: 'flags',
            data: [{
                x: Date.UTC(2011, 1, 20),
                title: 'Test test'
            }, {
                x: Date.UTC(2011, 3, 20),
                title: 'Test test'
            }],
            onSeries: 'dataseries',
            allowPointSelect : true,
            shape: 'squarepin',
            y : -40         
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:27:12.190

您可以调整工具提示，如this answer [Highcharts tooltip always on the right side of cursor](https://stackoverflow.com/questions/11966286/highcharts-tooltip-always-on-right-side-of-cursor/11975793#11975793)

并使用类似于this [highcharts clickable labels how to goto anchor的方法使标志可点击](https://stackoverflow.com/questions/12307443/highcharts-clickable-labels-how-to-goto-anchor/12329557#12329557)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:31:59.270

要在单击标志时重定向到 url，您可以在“点击事件”上创建一个函数：http: [//jsfiddle.net/8byc9/5/](http://jsfiddle.net/8byc9/5/) 我认为创建自己的定位器并不容易标志工具提示，但不适用于货币工具提示...

# c# - 将集合添加到 BlockingCollection

> ID：12329224
> 
> 赞同：4
> 
> 时间：2012-09-08T08:26:48.467
> 
> 标签：c#, blockingcollection

BlockingCollection 仅包含添加单个项目的方法。如果我想添加一个集合怎么办？我应该只使用“foreach”循环吗？

为什么 BlockingCollection 不包含添加集合的方法？我认为这种方法非常有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T08:32:32.033

`ICollection``AddRange`接口和许多 BCL 列表类型的类由于某种原因没有方法，这很烦人。

是的，你需要`foreach`覆盖集合，如果你经常使用它，你可以编写自己的扩展方法。

# c++ - 一个简短的 c++ 文件和 makefile：我可以在 shell 中制作，但是在 Eclipse 中构建它时会出现很多错误

> ID：12329226
> 
> 赞同：2
> 
> 时间：2012-09-08T08:26:50.323
> 
> 标签：c++, eclipse, makefile

我正在使用makefile编译一个非常短的c++文件。c++文件使用一个名为ClanLib的外部库，但这不是重点，因为我可以使用“make”命令在shell中编译它，所以c++文件和makefile没关系。

```
#include <ClanLib/core.h>
#include <ClanLib/application.h>

class ConsoleProgram {
public:
    static int main(const std::vector<CL_String> &args);
};
CL_ClanApplication app(&ConsoleProgram::main);
int ConsoleProgram::main(const std::vector<CL_String> &args) {
    CL_SetupCore setup_core;
    CL_ConsoleWindow console_window("Console");
    CL_Console::write_line("Hello World!");
    CL_Console::wait_for_key();
    return 0;
}

BIN     = main
OBJF    = main.o
LIBS    = clanCore  clanDisplay  clanGL  clanGL1  clanApp clanSWRender
VERSION = 2.3

PACKAGES = $(patsubst %, %-$(VERSION), $(LIBS))
INCLUDE += -I/usr/include/ClanLib-2.3/ 
CXXFLAGS += $(INCLUDE) `pkg-config --cflags $(PACKAGES)` -pthread

all: $(BIN)

$(BIN): $(OBJF)
    $(CXX) $(CXXFLAGS) $(OBJF) -o $(BIN) `pkg-config --libs $(PACKAGES)`

clean:
    find . -name '*.o' -type f -print -exec rm -rf {} \;
    rm -f $(BIN)

%.o : %.cpp
    $(CXX) $(CXXFLAGS) -c $< -o $@

%.o : %.hpp
    $(CXX) $(CXXFLAGS) -c $< -o $@ 
```

但是我在eclipse中编译它时遇到了很多错误，我从早上开始就在谷歌上搜索，但没有任何线索。

```
/usr/include/ClanLib-2.3/ClanLib/Core/Crypto/aes128_decrypt.h:116:2: error: ‘shared_ptr’ in namespace ‘std’ does not name a type
In file included from /usr/include/ClanLib-2.3/ClanLib/core.h:217:0,
                 from main.cpp:1:
/usr/include/ClanLib-2.3/ClanLib/Core/Crypto/aes192_encrypt.h:114:2: error: ‘shared_ptr’ in namespace ‘std’ does not name a type
In file included from /usr/include/ClanLib-2.3/ClanLib/core.h:218:0,
                 from main.cpp:1:
/usr/include/ClanLib-2.3/ClanLib/Core/Crypto/aes192_decrypt.h:116:2: error: ‘shared_ptr’ in namespace ‘std’ does not name a type
In file included from /usr/include/ClanLib-2.3/ClanLib/core.h:219:0,
                 from main.cpp:1:
/usr/include/ClanLib-2.3/ClanLib/Core/Crypto/aes256_encrypt.h:114:2: error: ‘shared_ptr’ in namespace ‘std’ does not name a type
In file included from /usr/include/ClanLib-2.3/ClanLib/core.h:220:0,
                 from main.cpp:1:
/usr/include/ClanLib-2.3/ClanLib/Core/Crypto/aes256_decrypt.h:116:2: error: ‘shared_ptr’ in namespace ‘std’ does not name a type
make: *** [main.o] Error 1 
```

任何线索或建议将不胜感激。

我正在使用 Fedora 17 x86_64，日食靛蓝。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:29:04.953

您需要添加`std=c++0x`到 g++ 编译器标志才能获得`std::shared_ptr`.

# facebook - 通过 Facebook 发送按钮计数发送

> ID：12329227
> 
> 赞同：0
> 
> 时间：2012-09-08T08:26:58.747
> 
> 标签：facebook, plugins, send

有什么方法可以知道用户通过网站上 Facebook 的发送按钮发送了多少信息？如果没有，有没有其他方法可以用另一个插件来实现这种事情？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:48:51.463

该[文档](https://developers.facebook.com/docs/reference/plugins/send/)明确提到，如果您在 facebook 洞察力上注册您的域，您将能够收集有关“发送”按钮的分析。

# php - PHP 英语词典

> ID：12329234
> 
> 赞同：0
> 
> 时间：2012-09-08T08:27:40.247
> 
> 标签：php, performance, spell-checking

我正在通过 MySQL WordNet 数据库交叉引用任意文本（20K+）；非常慢。

我使用的虚拟主机支持 Pspell 但不支持 Aspell。他们不会安装新的 DSO，也不允许访问 CLI。

我不能使用网络服务，因为负载太重了。

他们的任何选择也是如此，我是否应该加载一个txt文件并让她撕开哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:40:07.250

英语不仅仅是拼写。当我像尤达那样说话时：“Crazy, is what you are”，那么就没有拼写错误，但也不是皇后区英语。AFAIK 那行不通！

但是，如果您想走这条路，请查看 Lucene。

# sql-server - 如何在 Windows 8 中安装 MS SQL Server 2008 管理工作室？

> ID：12329236
> 
> 赞同：3
> 
> 时间：2012-09-08T08:27:57.183
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-express

我正在使用 64 位 Windows 8 rtm。我在哪里可以获得 Sql server 2008 mgmt。工作室吗？我尝试安装 sql server 2008 express sp1 和 SQL Server 2008 R2 Express SP1，但它不会安装。（参考：http: [//blogs.msdn.com/b/sqlexpress/archive/2012/03/02/ sql-server-express-and-windows-8.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2012/03/02/sql-server-express-and-windows-8.aspx)）您能否提供一个链接，我可以从该链接下载工作设置并提供逐步安装说明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:58:38.963

首先，操作系统需要安装适当版本的 MS SQL。您可能难以仅安装管理工作室，因为 express 主要设计为在独立机器上运行。要打开端口并启用协议，需要进行一些配置工作。我建议您使用工具安装 SQL 2008 R2 express：http: [//www.microsoft.com/en-gb/download/details.aspx?id=26729](http://www.microsoft.com/en-gb/download/details.aspx?id=26729)

您想要*WT*（带有工具版本）

但是您可能需要安装 sql 2012 express，因为这将连接到所有早期版本的 MS SQL

# jquery - jquery滚动到顶部转换为滚动到底部

> ID：12329237
> 
> 赞同：0
> 
> 时间：2012-09-08T08:28:02.093
> 
> 标签：jquery, scroll

我从互联网上复制了这段代码并希望得到相同的结果，但是我希望它向下滚动。我已尽我所能对其进行转换，但我无法使其正常工作，我们将不胜感激。

```
$(document).ready(function(){

    // hide #back-top first
    $("#back-top").hide();

    // fade in #back-top
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('#back-top').fadeIn();
            } else {
                $('#back-top').fadeOut();
            }
        });

        // scroll body to 0px on click
        $('#back-top a').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:36:50.327

```
$('#go-down').click(function () {
   $("html, body").animate({ scrollTop: $(document).height() }, "slow");
        return false;
    });​ 
```

[更新演示](http://jsfiddle.net/wwvxB/2/)

# javascript - 使用 js/jQuery 检查对象（不是元素）是否真的存在

> ID：12329238
> 
> 赞同：1
> 
> 时间：2012-09-08T08:28:12.240
> 
> 标签：javascript, jquery

我得到了这串代码，数据是在 ajax 环境中成功回调中返回的值：

```
$('#cpt_rspp_value').text(data.Payload.Clerks.rspp.full_name)
$('#cpt_ddl_value').text(data.Payload.Clerks.ddl.full_name)
$('#cpt_rls_value').text(data.Payload.Clerks.rls.full_name)
$('#cpt_mc_value').text(data.Payload.Cler.mc.full_name)
$('#cpt_se_value').text(data.Payload.Clerks.se.full_name) 
```

如果`rspp`数据库中确实存在该对象，则该对象`data.Payload.Clerks.rspp.full_name`将存在，因此我可以将其放在正确的位置（即：）`#cpt_rspp_value`。`data.Payload.Clerks.ddl.full_name`但是，唉，如果该对象不存在，js 解释器将停止，因此，即使 next objects`data.Payload.Clerks.rls.full_name`等存在，该行也永远不会被处理。

我应该“如果”任何行，但如何？`if(data.Payload.Clerks.rspp.full_name)`并且`if(data.Payload.Clerks.rspp.full_name != null)`不解决问题。我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T08:29:29.430

您可以使用[**typeof**](http://www.w3resource.com/javascript/operators/typeof.php) javascript 运算符来检查对象是否已定义，

```
if(typeof data.Payload.Clerks.rspp.full_name != 'undefined') 
```

或者

```
if(typeof data.Payload.Clerks.rspp != 'undefined') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T08:33:57.023

用于检查它是否严格`object`

```
if(typeof myobject === 'object') 
```

在你的情况下，检查`string`类型

```
if( typeof data.Payload.Clerks.rspp.full_name === 'string') 
```

个人意见 - 你可以使用`if(rspp.full_name)`，因为它是在更大的计划中的一个微不足道的检查。（从问题中的样子来看）:)

# css - 允许在固定定位元素上溢出

> ID：12329239
> 
> 赞同：0
> 
> 时间：2012-09-08T08:28:19.510
> 
> 标签：css

我在页面底部附近的某处有一个固定定位的元素。由于它的内容比窗口高度本身显示的要多，因此其余部分已被削减。

我尝试添加`overflow:auto`以解决此问题，并且能够滚动固定定位的元素，但没有运气。

我想附近可能有一个 javascript 解决方案，但想知道是否也有一个 css 解决方案。

希望我的问题是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:36:44.490

您必须修复高度/宽度才能获得滚动条，否则`fixed`元素会展开到视野之外。这是一个小演示：[little link](http://jsfiddle.net/glee/mtjYR/)。基本大纲：

HTML：

```
<div class = "fixed">
    Glee is awesome!<br/>
    ...
    Glee is awesome!<br/>
</div> 
```

CSS：

```
html, body {
    height: 100%;
}
.fixed {
    position: fixed;
    left: 0px;
    top: 0px;
    height: 100%;
    width: 100px;
    overflow: auto;
} 
```

# java - 计算 n^n 中的第一个和最后一个 k 位

> ID：12329240
> 
> 赞同：2
> 
> 时间：2012-09-08T08:28:33.443
> 
> 标签：java, c, algorithm, math

我需要打印第一个`k`数字和最后一个`k`数字

* * *

`n^n (n to the power of n, where n is an integer)` 例如 ：

* * *

```
Input       Output

n k         First k digits       Last k digits

4 2    -->  25                   56
9 3    -->  387                  489 
```

* * *

我觉得它需要一些聪明的数学，但是我想不出任何这样的东西。请提出解决问题的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T08:33:16.740

最后k个数字很简单，你只需要计算它`modulo 10^k`。为此，在每次乘法之后，只需应用模数，即。`intermediate_result %= 10^k`.

当然，您将需要`10^k`使用其他方法进行计算，因为`^`这并不意味着在 C 或 Java 中的强大。

要查找前 k 位，请参阅[取幂的前 n 位](https://stackoverflow.com/questions/3873298/first-n-digits-of-an-exponentiation)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:17:32.050

感谢大家的帮助。我的最终代码是

* * *

```
#include <stdio.h>
#include <math.h>

long int lastKdigits(long long n,int k)
{
long long i,res=1,div=pow(10,k);

for(i=1;i<=n;i++)
{
    res=(res*n)%div;
}

return res;
}

long int firstKdigits(long long n,int k)
{
   long double x, y;

   x = n*log10(n);
   y = floor(pow(10,x-floor(x) +k-1));
   return ((int)y);
}

int main()
{

long long n;
int k;

scanf("%lld %d",&n,&k);

printf("%ld\t",firstKdigits(n,k));
printf("%ld\n",lastKdigits(n,k));
}

return 0; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T08:34:24.723

对于最后一位`k`数字，您只需要计算很容易，`n^n (mod 10^k)`但我不知道其他 k 位数的任何解决方案！

# php - PHP 发送带有循环数据的电子邮件

> ID：12329246
> 
> 赞同：1
> 
> 时间：2012-09-08T08:29:29.557
> 
> 标签：php

嗨，我想使用 php 邮件功能发送循环数据，这是我的代码：

```
foreach ($data['query'] as $row){
    echo $row->name;
    echo "<br>";
    echo $row->time;
    echo "<br>";
    echo $row->dosage;
    echo "<br>";
    echo $row->frequency;
    echo "<br>";
    echo $row->quantity;
    echo "<br>";
}

$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com";
mail($to,$subject,$txt,$headers); 
```

谁能告诉我如何将 foreach 循环数据附加到电子邮件正文中，我的意思是我想发送循环数据，而不是在正文中发送此文本（Hello World！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:32:26.250

连接`$txt`：

```
$txt = "";
foreach ($data['query'] as $row){
    $txt .= $row->name;
    $txt .= "<br>";
    $txt .= $row->time;
    $txt .= "<br>";
    $txt .= $row->dosage;
    $txt .= "<br>";
    $txt .= $row->frequency;
    $txt .= "<br>";
    $txt .= $row->quantity;
    $txt .= "<br>";
}

$to = "somebody@example.com";
$subject = "My subject";
$headers = "From: webmaster@example.com";
mail($to,$subject,$txt,$headers); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:32:38.820

纯字符串连接如下：

```
 $str = ''; 
   foreach ($data['query'] as $row){
      $str .= $row->name;
      $str .= "<br>";
      $str .= $row->time;
      $str .= "<br>";
      $str .= $row->dosage;
      $str .= "<br>";
      $str .= $row->frequency;
      $str .= "<br>";
      $str .= $row->quantity;
      $str .= "<br>";
    }

    $to = "somebody@example.com";
    $subject = "My subject";
    $headers = "From: webmaster@example.com";
    mail($to,$subject,$str,$headers);

    $str = ''; // empty the $str again 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:40:50.743

```
<?php
$dataArray  =   array('name','time','dosage','frequency','quantity');
$txt        =   '';
foreach ($data['query'] as $row)
{
    foreach($dataArray as $key=>$data)
    {
       $txt .= ($row->$data.'</br>');
    }
}

$to = "somebody@example.com";
$subject = "My subject";
$txt = "Hello world!";
$headers = "From: webmaster@example.com";
mail($to,$subject,$txt,$headers);

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T08:33:54.263

我认为这就是你所追求的：

```
 $to = "somebody@example.com";
    $subject = "My subject";
    $txt = "Hello world!";
    $headers = "From: webmaster@example.com";

    foreach ( $data['query'] as $row ) {
      $txt = $row->name;
      $txt .= "<br>";
      $txt .= $row->time;
      $txt .= "<br>";
      $txt .= $row->dosage;
      $txt .= "<br>";
      $txt .= $row->frequency;
      $txt .= "<br>";
      $txt .= $row->quantity;
      $txt .= "<br>";

      mail( $to, $subject, $txt, $headers );
    } 
```

这会为每个循环发送一封邮件。如果你想要的话，你的问题还不清楚。您也可以收集所有数据，并将其作为 1 封电子邮件发送：

```
$to = "somebody@example.com";
$subject = "My subject";
$txt = "";
$headers = "From: webmaster@example.com";

foreach ( $data['query'] as $row ) {
  $txt .= $row->name;
  $txt .= "<br>";
  $txt .= $row->time;
  $txt .= "<br>";
  $txt .= $row->dosage;
  $txt .= "<br>";
  $txt .= $row->frequency;
  $txt .= "<br>";
  $txt .= $row->quantity;
  $txt .= "-- end of row<br>";

}

mail( $to, $subject, $txt, $headers ); 
```

# extjs4 - Extjs4 如何在工具提示中使用 XTemplate

> ID：12329250
> 
> 赞同：1
> 
> 时间：2012-09-08T08:29:43.460
> 
> 标签：extjs4

我有一个带有工具提示的图表，我真正想做的是我需要使用 XTemplate 为工具提示设置类似这样的标题：

```
tips = { 
    trackMouse: true,
    width: 120,
    height: 23,
    renderer: function(storeItem, item) {
        var myTemplate = new Ext.XTemplate('<p> {Value} </p>')
        myTemplate.overwrite(this.title, {
            Value : storeItem.get(Field)
        });
    }
} 
```

但它显示错误，如“标记名”为空，谁能给我解决方案。如何获取该提示的 div id 以及如何设置工具提示的标题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T13:36:39.297

试试这个

没有 XTemplate

```
renderer: function(storeItem, item) {
    this.setTitle(Ext.String.format('<p>{0}</p>', storeItem.get(**title field name**));
} 
```

使用 XTemplate

```
renderer: function(storeItem, item) {
    var tpl = Ext.create('Ext.XTemplate', '<p>', '{Value}', '</p>');

    this.setTitle(tpl.apply({
        Value: storeItem.get(**title field name**)
    }));
} 
```

# ios - AVAssetReader 和 AudioFileReadPackets 读取音频的区别

> ID：12329251
> 
> 赞同：1
> 
> 时间：2012-09-08T08:29:52.327
> 
> 标签：ios, audio, streaming

考虑从音频文件读取/写入数据的这两种情况（为了通过网络发送）：

**场景 1：音频文件服务：**
使用[音频文件服务](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html)中的*AudioFileReadPackets*。这会生成您可以轻松通过网络发送的音频数据包。在接收端，您使用 *AudioFileStreamOpen*和*AudioFileStreamParseBytes*来解析数据。

 ***[AudioFileStreamParseBytes](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/doc/uid/TP40006162-CH3-SW4)*然后有两个回调函数： [AudioFileStream_PropertyListenerProc](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/c/tdef/AudioFileStream_PropertyListenerProc)和[AudioFileStream_PacketsProc](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/c/tdef/AudioFileStream_PacketsProc)。当在流中发现新属性和从流中接收到数据包时，分别调用这些家伙。收到数据包后，您可以使用[音频队列服务](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioQueueReference/Reference/reference.html)将其提供给音频队列，该服务可以正常播放文件。

**注意：**此方法不适用于存储在 iPod 库中的音乐文件，这将我们带到了第二种情况：

**场景 2：AVAssetReader：**
使用[*AVAssetReader*](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAssetReader_Class/Reference/Reference.html)，您可以读取 iPod 音乐库并通过网络发送数据包。通常，您会将数据包直接加载到类似于上面的音频队列上。但是，在这种情况下，您将必须创建一个线程以确保在队列已满时阻止接收数据包，并在队列缓冲区可用时取消阻止（参见[此](https://github.com/abbood/audioSamplingToAudioQueue)示例）。

**问题：**
是否可以使用*AVAssetReader*发送数据包，只让*AudioFileStreamParseBytes*读取它？（动机是 AudioFileStreamParseBytes 的回调将处理线程/阻塞业务并为您省去痛苦）。我尝试这样做：
**1.首先使用 AVAssetReader 读取音频文件**

```
//NSURL *assetURL = [NSURL URLWithString:@"ipod-library://item/item.m4a?id=1053020204400037178"]; 
AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:assetURL options:nil];

NSError * error = nil;
AVAssetReader* reader = [[AVAssetReader alloc] initWithAsset:songAsset error:&error];

AVAssetTrack* track = [songAsset.tracks objectAtIndex:0]; 

// Note: I don't supply an audio format description here, rather I pass on nil to keep the original
// file format. In another piece of code (see here: http://stackoverflow.com/questions/12264799/why-is-audio-coming-up-garbled-when-using-avassetreader-with-audio-queue?answertab=active#tab-top) I can extract the audio format from the track, let's say it's an AAC format.
AVAssetReaderTrackOutput* readerOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:track
                                                                                    outputSettings:nil];

[reader addOutput:readerOutput];
[reader startReading]; 
```

**2.设置主播**

```
// notice how i manually add the audio file type (for the file hint parameter) 
// using the info from step one.. If i leave it as 0, this call fails and returns
// the typ? error, which is :The specified file type is not supported.  
streamer->err = AudioFileStreamOpen((__bridge void*)streamer, 
                                     ASPropertyListenerProc, ASPacketsProc, 
                                     kAudioFileAAC_ADTSType, &(streamer->audioFileStream)); 
```

**3\. 收到数据后，我会解析字节：**

```
streamer->err = AudioFileStreamParseBytes(streamer->audioFileStream, inDataByteSize, inData, 0); 
```

**问题：**当我这样做时..我发送字节并且 AudioFileStreamParseBytes 不会*失败*。但是，永远不会调用回调 *AudioFileStream_PropertyListenerProc* 和 *AudioFileStream_PacketsProc*。这让我认为解析器未能解析字节并从中提取任何有用的信息。在[AudioStreamParseBytes](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/doc/uid/TP40006162-CH3-SW4)的文档中它指出：* 您应该提供至少超过一个数据包的音频文件数据，但它最好一次提供几个数据包到几秒钟的数据。*我正在发送超过 900 个字节，这刚好低于 GKSession 的数据[限制](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/GameKitConcepts/GameKitConcepts.html)。我很确定 900 字节就足够了（在场景 1 下测试时，每次总字节数为 417 并且工作正常）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:58:28.807

简短的回答是，让 AudioFileStreamParseBytes 解析音频数据包根本没有意义。在[文档](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioStreamReference/Reference/reference.html#//apple_ref/c/func/AudioFileStreamParseBytes)中AudioFileStreamParseBytes 是一个依赖于音频文件存在的函数（因此参数 inAudioFileStream.. 定义为*您希望向其传递数据的解析器的 ID。解析器 ID 由 AudioFileStreamOpen 函数返回。*）

所以吸取的教训：不要试图将iOS功能归类到适合你的情况..它应该是相反的。

我最终做的是将数据直接提供给音频队列..无需通过所有这些不必要的中间功能..更深入的方式是将数据提供给音频单元..但我的应用程序不需要那个级别控制的**

# rss - 如何更改我的 Wordpress 博客的 RSS 提要地址？

> ID：12329259
> 
> 赞同：1
> 
> 时间：2012-09-08T08:31:51.660
> 
> 标签：rss, wordpress

我已将我的 Wordpress RSS 提要 (domain.com/feed) 重定向到 FeedBurner，并使 FeedBurner 提要成为公开可见的。

尽管如此，Wordpress RSS 提要的 URL 是任何 Wordpress 博客 (.../feed) 的标准，我注意到许多读者手动将他们的 RSS 设置为这个提要，而不是 FeedBurner 的 URL。

如何更改 Wordpress 的提要地​​址，使其对公众私有，但仍可供 FeedBurner 使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:37:09.797

您需要寻找一个名为 Feedsmith 的插件。它完美地做到了这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-26T04:16:51.533

有很多方法可以做到这一点，但是这个插件很容易为你做，只需启用并设置安全令牌：

[https://wordpress.org/plugins/feed-changer/](https://wordpress.org/plugins/feed-changer/)

# geometry - 一组带边距的点的最小跨越线

> ID：12329260
> 
> 赞同：0
> 
> 时间：2012-09-08T08:32:16.017
> 
> 标签：geometry, line

我有一个与几何相关的简单编程问题！我可以用铅笔和纸解决它（在视觉模式下！！），但是我不确定我是否可以编程。我不需要代码本身，而是要实现的伪代码或想法。

有 4 个点在一条线上，给定位置。每个点都需要围绕自己的最小空间，该空间在该点的位置之后给出。我们希望找到能够满足上述所有要求的最小（长度）线段。换句话说，我需要这些点上的最小跨越线，并且要求周围的空间最小。

示例：$p_i$: (x, L)，其中 x 表示位置（实数），L 表示 x 周围的最小空间要求。

p1: (1,1) p2: (2,1) p3: (5,1) p4: (7,2)

图示： ![图形表示](../Images/d8f94754801d5e156c802e97f78bce24.png)

如图所示，结果是从 1 到 7 的线段，长度为 6。

另一个例子： p1: (2,1) p2: (3,2) p3: (4,1.5) p4: (6.5,0.5)

结果（下面的绿线）是从 2 到 6.5 的线段（长度：4.5） ![另一个例子](../Images/800852dc43134e04f0924274c09831a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:27:55.073

最优结果的长度总是大于 max(x_i)-min(x_i) i=1,2,3,4

也很容易总是存在一个最优解，它的一个端点与 x_i 匹配，即您可以滚动生成最优结果以匹配一个点，例如 x_1。

从 $-\infty$ 扫到 $+\infty$。开始 x_1 并将其跨越其右边距。另外开始你可以的所有其他点（即他们的左边距已经开始的点）。换句话说，尽可能晚地开始第一个点，在它之后，尽快开始所有其他点。最后，如果有一个点 x_i，它的左边距在 x_1 之前开始，则将此差异称为 diff_i。将所有 diff_i 添加到所有 x_i 中，并找到结果的最终点之外的所有段（即 if (x_i+diff_i>current_end_position then current_end_position=x_i+diff_i.

感谢您的意见。

# gcc - GCC 全局变量存储

> ID：12329262
> 
> 赞同：0
> 
> 时间：2012-09-08T08:32:17.990
> 
> 标签：gcc, global-variables, linkage

是否可以强制 gcc 将数组存储在特定段中？

我要这个

```
static const Host_Vtable_Entrty Host_vtable[]=
{
{"Window_create",(Function)Window_create}
,{"Window_cropEllipse",(Function)Window_cropEllipse}
,{"Window_cropRect",(Function)Window_cropRect}
,{"Window_cropRectRound",(Function)Window_cropRectRound}
,{"Window_destroy",(Function)Window_destroy}
,{"Window_filenameGet",(Function)Window_filenameGet}
,{"Window_filenameGet",(Function)Window_messageBox}
,{"Window_move",(Function)Window_move}
,{"Window_styleSet",(Function)Window_styleSet}
}; 
```

要存储在只读的地方，但是放在数据段中：

```
 .data
.align 32
_ZL11Host_vtable:
.quad   .LC0
.quad   _Z13Window_createP6WindowP6ObjectPFyS2_PjyyEPFyS2_yPvE
.quad   .LC1
.quad   _Z18Window_cropEllipseP6Windowjdddd
.quad   .LC2
.quad   _Z15Window_cropRectP6Windowjdddd
.quad   .LC3
.quad   _Z20Window_cropRectRoundP6Windowjdddddd
.quad   .LC4
.quad   _Z14Window_destroyP6Window
.quad   .LC5
.quad   _Z18Window_filenameGetPcyPKcS1_j
.quad   .LC5
.quad   _Z17Window_messageBoxP6WindowPKcS2_j
.quad   .LC6
.quad   _Z11Window_moveP6Windowdddd
.quad   .LC7
.quad   _Z15Window_styleSetP6Windowjj 
```

我需要手动编写程序集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:39:38.653

如果您在 GCC 文档中搜索特定于 GCC 的语言扩展，您会偶然发现描述[变量属性](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#Variable-Attributes)的文档。在这里，您将找到一个名为`segment`的属性，其中包含有关如何使用它的示例。

# java - Java：扩展 Observable 的类的接口

> ID：12329267
> 
> 赞同：1
> 
> 时间：2012-09-08T08:33:07.453
> 
> 标签：java, design-patterns, abstract-class, observer-pattern, code-design

我正在制作一个程序，并希望将业务逻辑保留在接口后面（这是一种很好的方式，我理解）。我也希望业务逻辑是 Observable，而 Observable 是一个具体的类。

程序的其他部分需要知道业务逻辑 1) 实现了我自己的接口，2) 扩展了 Observable。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:41:00.837

```
public abstract class MyObservable extends Observable implements MyInterface {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:37:05.593

与其为你的接口使用一个接口，不如使用一个扩展 Observable 的抽象类。

```
public abstract class MyType extends Observable {
    public abstract void doSomething();
    ...
} 
```

# makefile - 如何使 Make *not* print “目标配方失败？

> ID：12329270
> 
> 赞同：3
> 
> 时间：2012-09-08T08:33:25.777
> 
> 标签：makefile, gnu-make

我正在为一系列编译构建一个 Makefile，以显示用于与教程中的示例同步的渐进式输出差异。其中一些运行会生成错误代码，但由于这是“问题”定义的一部分，因此当目标失败时，make 输出的消息（“ *Makefile:15: recipe for target `run3' failed* ”）会进入方式。

我知道忽略错误代码，但是否可以抑制该输出？最好在 Makefile 中。

类似地，是否可以抑制从 Makefile 中进入和离开子目录的消息（相当于“--no-print-directory”）？

而且，是的，我对 GNU Make 的回答很满意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T05:57:21.470

当然，经过一番谷歌搜索后，答案在[GNU Make 手册](http://www.gnu.org/software/make/manual/make.html#Special-Targets%20GNU%20Make%20Manual)中。特殊目标 .SILENT 和 .IGNORE 正是我想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T08:57:22.743

为了实现您想要的，我将使用`--silent --ignore-errors --no-print-directory`GNU`make`开关并重定向`stderr`到makefile 中的`/dev/null`( ) 命令`2>/dev/null`

# java - 当我切换到 GlazedLists 的 EventTableModel 时，为什么我的 JXTable 排序这么慢？

> ID：12329281
> 
> 赞同：3
> 
> 时间：2012-09-08T08:35:25.550
> 
> 标签：java, swing, swingx, glazedlists, jxtable

## 更新

我已经更新了这个问题以更准确地描述我的问题的原因，并包含了一个比我最初使用的更简单的示例。

我在下面包含了一个简单的示例来显示我遇到的性能问题。当我用一个普通的 ArrayList 支持我的 JXTable 时，它​​的性能相当不错。但是，如果我将 ArrayList 切换为 EventList 并使用 EventTableModel 构建表，则排序要慢得多（在这种情况下要慢约 10 倍）。

如果使用 Maven 或 Gradle，这里是我正在使用的工件坐标。

```
apply plugin: 'java'
apply plugin: 'application'
mainClassName = "SortPerfMain"

dependencies {
    compile "net.java.dev.glazedlists:glazedlists_java15:1.8.0"
    compile "org.swinglabs.swingx:swingx-core:1.6.4"
} 
```

这是一个例子。我尝试使用 EventList 的唯一原因是因为我想要一个可以在 TableModel 之外修改并产生必要通知的数据结构。

```
 import ca.odell.glazedlists.BasicEventList;
import ca.odell.glazedlists.EventList;
import ca.odell.glazedlists.gui.TableFormat;
import ca.odell.glazedlists.swing.EventTableModel;
import org.jdesktop.swingx.JXTable;
import org.jdesktop.swingx.renderer.*;
import org.jdesktop.swingx.table.TableColumnExt;

import javax.swing.*;
import javax.swing.table.*;
import java.awt.*;
import java.math.BigDecimal;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.List;

import static javax.swing.WindowConstants.EXIT_ON_CLOSE;

/* This class creates a JFrame with two JXTables displayed side by side.  Both
 * tables have a single column that holds Item objects.  Each Item has one
 * property; amount.  The amount property is a BigDecimal, but the performance
 * disparity is still present when using int instead.
 *
 * The first table is backed by a simple ArrayList.  The second table is backed
 * by an EventList (GlazedLists).
 *
 * When sorting 1,000,000 rows, the first table takes about 1 second and the
 * second table takes about 10 seconds.
 */

public class SortPerfMain {
    @SuppressWarnings("FieldCanBeLocal")
    private final boolean useDebugRenderer = true;

    // The number of items that should be added to the model.
    @SuppressWarnings("FieldCanBeLocal")
    private final int itemCount = 2;

    // The number of visible rows in each table.
    @SuppressWarnings("FieldCanBeLocal")
    private final int visibleRowCount = 2;

    public static void main(String[] args) {
        new SortPerfMain();
    }

    public SortPerfMain() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                List<Item> itemList = createItemList();

                JPanel leftPanel = createTablePanel(
                        createTable(createSimpleModel(itemList)));

                JPanel rightPanel = createTablePanel(
                        createTable(createGlazedModel(itemList)));

                JPanel mainPanel = new JPanel(new GridLayout(1, 2));
                mainPanel.add(leftPanel);
                mainPanel.add(rightPanel);

                JFrame mainFrame = new JFrame("Table Sort Perf");
                mainFrame.setContentPane(mainPanel);
                mainFrame.pack();
                mainFrame.setSize(600, mainFrame.getHeight());
                mainFrame.setLocationRelativeTo(null);
                mainFrame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                mainFrame.setVisible(true);
            }
        });
    }

    private List<Item> createItemList() {
        List<Item> itemList = new ArrayList<>(itemCount);
        for (int i = 0; i < itemCount; i++) {
            itemList.add(new Item(i));
        }
        return itemList;
    }

    private JXTable createTable(TableModel model) {
        JXTable table = new JXTable(model);
        table.setVisibleRowCount(visibleRowCount);
        addRenderer(table);
        return table;
    }

    private void addRenderer(JXTable table) {
        TableColumnExt column = table.getColumnExt(Columns.AMOUNT.ordinal());
        column.setCellRenderer(createCurrencyRenderer());
    }

    private JPanel createTablePanel(JXTable table) {
        JLabel panelLabel = new JLabel(table.getModel().getClass().getName());
        JPanel panel = new JPanel(new BorderLayout());

        panel.add(panelLabel, BorderLayout.NORTH);
        panel.add(new JScrollPane(table), BorderLayout.CENTER);

        return panel;
    }

    private TableModel createSimpleModel(List<Item> items) {
        return new SimpleTableModel(items);
    }

    private TableModel createGlazedModel(List<Item> items) {
        EventList<Item> itemList = new BasicEventList<>();
        itemList.addAll(items);
        return new EventTableModel<>(itemList, new EventTableModelFormat());
    }

    private TableCellRenderer createCurrencyRenderer() {
        //noinspection ConstantConditions
        if (useDebugRenderer) {
            return new DebugRenderer();
        }

        return new DefaultTableRenderer(
                new LabelProvider(new FormatStringValue(
                        NumberFormat.getCurrencyInstance())));
    }

    // Enum for managing table columns
    private static enum Columns {
        AMOUNT("Amount", BigDecimal.class);

        private final String name;
        private final Class type;

        private Columns(String name, Class type) {
            this.name = name;
            this.type = type;
        }
    }

    // Each table holds a list of items.
    private static class Item {
        private final BigDecimal amount;

        private Item(BigDecimal amount) {
            this.amount = amount;
        }

        private Item(int amount) {
            this(new BigDecimal(amount));
        }
    }

    // A simple model that doesn't perform any change notification
    private static class SimpleTableModel extends DefaultTableModel {
        private final List<Item> itemList;

        public SimpleTableModel(List<Item> items) {
            this.itemList = items;
        }

        @Override
        public int getRowCount() {
            if (itemList == null) {
                return 0;
            }

            return itemList.size();
        }

        @Override
        public int getColumnCount() {
            return Columns.values().length;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (Columns.values()[columnIndex]) {
                case AMOUNT:
                    return itemList.get(rowIndex).amount;
            }

            return null;
        }

        @Override
        public String getColumnName(int column) {
            return Columns.values()[column].name;
        }

        @Override
        public Class<?> getColumnClass(int column) {
            return Columns.values()[column].type;
        }
    }

    // Table format for use with the EventTableModel
    private static class EventTableModelFormat implements TableFormat<Item> {
        @Override
        public int getColumnCount() {
            return 1;
        }

        @Override
        public String getColumnName(int i) {
            return Columns.values()[i].name;
        }

        @Override
        public Object getColumnValue(Item item, int i) {
            return item.amount;
        }
    }

    /* The following classes are used to add println statements to the part
     * of the component hierarchy we're interested in for debugging.
     */

    private class DebugRenderer extends DefaultTableRenderer {
        private DebugRenderer() {
            super(new DebugProvider());
        }

        @Override
        public Component getTableCellRendererComponent(
                JTable table,
                Object value,
                boolean isSelected,
                boolean hasFocus,
                int row,
                int column) {
            System.out.println("Renderer requested for " + value.toString());
            return super.getTableCellRendererComponent(
                    table, value, isSelected, hasFocus, row, column);
        }
    }

    private class DebugProvider extends LabelProvider {
        private DebugProvider() {
            super(new DebugFormatter());
        }

        @Override
        public String getString(Object value) {
            System.out.println("Providing string for " + value.toString());
            return super.getString(value);
        }
    }

    private class DebugFormatter extends FormatStringValue {
        private DebugFormatter() {
            super(NumberFormat.getCurrencyInstance());
        }

        @Override
        public String getString(Object value) {
            System.out.println("Formatting object: " + value.toString());
            return super.getString(value);
        }
    }
} 
```

我还注意到 EventTableModel 支持的表是基于字符串值而不是数值排序的，但我不知道为什么。这是来自分析器的几个屏幕截图，其中有一百万行正在排序。

![第一个表](../Images/0bf34ca6ae896bfbdfa1c430a4e97051.png)

![第二张表](../Images/be93d62815d4f7557c8f272e1d3fcc0c.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T23:56:41.230

我遇到的问题是 SwingX`TableRowSorterModelWrapper`与 GlazedLists 的工作方式的结合`TableFormat`。

使用 GlazedLists 时`TableFormat`，不为表列提供类类型。当未提供类类型时，JXTable 最终会根据 a 提供的字符串值对列进行排序`ComponentProvider`。如果`ComponentProvider`使用转换器构造，`FormatStringValue`则列中的每个项目将在用于排序期间的比较之前进行格式化。对 的实际调用`ComponentProvider`发生在`TableRowSorterModelWrapper`.

就我而言，当我添加自定义渲染器时，我将默认值替换`ComponentProvider`为`LabelProvider`使用`FormatStringValue`从`NumberFormat.getCurrencyInstance()`.

使用 my 的表`SimpleTableModel`没有遇到同样的性能问题的原因是它提供了列类类型。由于`BigDecimal`implements `Comparable`，排序操作不需要调用 来`ComponentProvider`获取（可能格式化的）字符串值。

解决方法很简单；使用 GlazedLists'`AdvancedTableFormat`而不是`TableFormat`并为每个表列提供类类型。以下将与我的问题中的示例一起使用。

```
private static class EventTableModelFormat implements AdvancedTableFormat<Item> {
    @Override
    public int getColumnCount() {
        return 1;
    }

    @Override
    public String getColumnName(int i) {
        return Columns.values()[i].name;
    }

    @Override
    public Object getColumnValue(Item item, int i) {
        return item.amount;
    }

    @Override
    public Class getColumnClass(int column) {
        return Columns.values()[column].type;
    }

    @Override
    public Comparator getColumnComparator(int column) {
        return null;
    }
} 
```

# c - C 如何处理本地字符串文字的内存？

> ID：12329290
> 
> 赞同：1
> 
> 时间：2012-09-08T08:37:04.377
> 
> 标签：c, memory-management

考虑这个函数：

```
void useless() {
   char data[] = "aaa";
} 
```

根据我在[这里](https://stackoverflow.com/a/2579961/343721)学到的知识，`"aaa"`字面意思一直持续到程序结束。但是，`data[]`（由文字初始化）是本地的，所以它只存在于函数的末尾。

内存被复制，所以程序需要 4B 用于文字，4B 用于指向`data`和`sizeof(size_t)`字节的指针`data`和`sizeof(size_t)`文字的指针 - 这是真的吗？

如果文字具有静态存储持续时间，则第二次调用不会为本地文字分配新内存 - 这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:47:59.157

```
 char data[] = "aaa"; 
```

这**不是字符串文字**，而只是一个数组。所以那里没有指针，内存只分配给`data`.

> 如果文字具有静态存储持续时间，则第二次调用不会为本地文字分配新内存

这适用于字符串文字，例如：`char *s="aaa";`从标准：

> 2.13\. 字符串文字
> [...]普通字符串文字的类型为“n const char 数组”和静态存储持续时间 (3.7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:43:56.140

这里没有指针变量。只有一个数组，它是 4 个字节。

编译器可能会也可能不会将文字本身存储在内存中；如果是这样，那就是另外 4 个字节。
请注意，除数组本身之外的任何东西占用的任何内存都是依赖于实现的。

我不确定“第二次调用”是什么意思，但一般来说，当你创建一个数组时，它会占用一些大小......所以如果你用相同的文字创建两个数组，编译器会为两个数组（也许——也可能不是——对于文字也是如此）。

# .htaccess - Htaccess 和 cakephp

> ID：12329296
> 
> 赞同：0
> 
> 时间：2012-09-08T08:38:28.170
> 
> 标签：.htaccess, cakephp

我在使用 cakephp 和自定义 htaccess 文件时遇到了一些麻烦。

我有一个内置 cakePHP 的网站。但是，我现在正在尝试完成站点的管理区域，并且所有管理页面都在另一个文件夹中，然后我尝试将 htaccess 文件添加到该文件夹​​中。但是它无法正常工作。我以前在类似的共享服务器上做过一些 htaccess，包括我自己的相同的共享服务器。我已将我正在尝试创建的那个添加到我的个人服务器上并且可以正常工作。

所以我猜 cakePHP 可能会停止/覆盖这个 htaccess 的运行。

有任何想法吗？*****是服务器名称 - 我当然在 htpasswd2 中正确登录/通过

AuthUserFile /home/ ******* /.htpasswds/.htpasswd2 AuthType Basic AuthName "嗯。没有密码你哪儿也去不了！" 需要有效用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:42:05.153

您应该使用[前缀路由](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)。这是蛋糕的方式。

```
Configure::write('Routing.prefixes', array('admin'));
Router::connect('/admin', array('controller' => 'pages', 'action' => 'index', 'admin' => true)); 
```

这可能已经启用，它会导致您创建的管理文件夹出现问题。

使用前缀保持 Cake 约定。但是您将无法使用 htaccess 保护该文件夹，因为它不是真正的文件夹。如果这个管理区域是用来管理一个用 CakePHP 构建的 webapp，我建议你保持 Cake 的方式。

# python - 使用列表预测结果数字

> ID：12329298
> 
> 赞同：-3
> 
> 时间：2012-09-08T08:38:43.113
> 
> 标签：python

我有 3 个包含 3 组整数的列表。我想使用列表或任何其他方式来预测结果数字。

```
List1 = [0 0 2 0 1 2]
List2 = [3 0 1 0 1 0]
List3 = [0 0 2 1 1 1] 
```

我在第一列工作，我正在考虑使用双 if 语句，例如：

```
if 3 is in spot 0 of any list 
and 0 is in spot 0 of any list

print 2 
```

另一件事是我也想对所有其他列执行此操作。

我知道这并不完整，但它在我的脑海中就像这样，我一直

四处寻找，没有找到解决这个问题的方法。

我会非常欢迎对这个问题的任何回应。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-08T08:42:52.537

你不能定义一个用空格分隔的列表；您必须使用逗号',' 代替。

```
l1=[0,0,2,0,1,2]
l2=[3,0,1,0,1,0,]
l3=[0,0,2,1,1,1]

spot0_list = zip(l1,l2,l3)[0]
if 3 in spot0_list and  0  in spot0_list:
    print 2 
```

而且，如果列表太多，您可以使用`set`：

```
spot0_list = set(zip(l1,l2,l3)[0]) 
```

# html - 带有段落的奇怪html错误

> ID：12329312
> 
> 赞同：1
> 
> 时间：2012-09-08T08:40:09.840
> 
> 标签：html

所以我有这个代码：

```
<p id="item_1">
    <div class="background displayInline deleteItemFromCart" title="Delete item"></div>
    some text
</p> 
```

简单吧？现在如果我在`Chrome`开发工具中查看源代码会发生什么：

![在此处输入图像描述](../Images/23364a5ae6a95df1463864ee07f858a7.png)

正如您所看到的，由于某种原因`<p>`不再包含任何内容。

如果我尝试删除 div 文本将`<p>`再次回到标签中，所以我最好的猜测是`<p>`不能包含任何或仅包含 div 元素？

**编辑**好吧，这是一个愚蠢的问题，无论如何，现在我想起来了，如果我要建立一个事物列表，我可以使用它`<ul>`而不是`<p>`...无论如何，谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:42:53.247

这并不奇怪。这只是错误的标记:)

```
<p id="item_1">
    <span style="display:block" class="background displayInline deleteItemFromCart" title="Delete item"></span>
    some text
</p> 
```

但是，虽然内联样式不好，你应该把这样的东西放到你的 master.css 文件中。

```
p span {display:block}
// Or
#item_1 span {display:block} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T08:42:54.147

`p`标签**不能**包含块级元素，包括它自己。来源：[http ://www.w3.org/TR/html401/struct/text.html#h-9.3.1](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T08:43:32.877

你是对的，`<p>`可以只包含内联元素和文本，但是`<div>`是块元素。

内联元素是：`a` `abbr` `acronym` `applet` `b` `basefont` `bdo` `big` `br` `button` `cite` `code` `del` `dfn` `em` `font` `i` `img` `ins` `input` `iframe` `kbd` `label` `map` `object` `q` `samp` `script` `select` `small` `span` `strong` `sub` `sup` `textarea` `tt` `var`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T08:42:44.203

P 只能包含内联元素。

有关内联元素/流内容的快速讨论，请参阅此链接。

[ol/ul 应该在 <p> 内部还是外部？](https://stackoverflow.com/questions/5681481/should-ol-ul-be-inside-p-or-outside)

# svn - SVN repo 比转储文件大得多？

> ID：12329313
> 
> 赞同：4
> 
> 时间：2012-09-08T08:40:21.340
> 
> 标签：svn, repository, size

我负责将我们的 SVN 安装从版本 1.5.6 迁移到 1.7.6。作为其中的一部分，我对我们的两个存储库进行了转储/加载循环，并且碰巧注意到了一些奇怪的事情。

其中一个存储库“转储”到 2GB 文件，但在加载后，它占用了近 23GB 的磁盘空间。这也是 1.5.6 中的一个问题，但我们希望升级可能会对此有所帮助。

有问题的 repo 有点“奇怪”，因为它包含一个包含 7500 个文件（过去最多 12000 个）的文件夹和一个包含另外 500 个左右文件的子文件夹，就是这样。

看起来它可能与这个问题有关： [350GB SVN 存储库为分支/标签等最简单的任务创建了至少 1MB 的修订版](https://stackoverflow.com/questions/3910387/350gb-svn-repo-creates-atleast-1mb-revision-for-even-a-simplest-task-like-branch)

我对我们现在能做些什么感到非常茫然，但是回购目前正在以可笑的速度增长，如果我们不能解决它，我们将需要重新定位它。我希望避免的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:11:42.177

首先，SVN 有两个不同的[存储库后端](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.planning.html#svn.reposadmin.basics.backends.tbl-1)：BDB（Berkley DB）和 FSFS（文件系统）。存储库在磁盘上的存在方式取决于此选择，BDB 通常会更大一些。你用哪个？

如果您使用 FSFS，那么您应该阅读[分片](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.diskspace.fsfspacking)：当您提交更改时，无论多么小，它都会被提交到一个由磁盘设置的最小大小的文件中 - 通常为 2kb -16kb。现在将它乘以提交的文件数，你可以得到非常大的数字。好消息是您可以运行命令将分片压缩为单个文件：

```
svnadmin pack /path/to/repository 
```

这可能会大大提高您的磁盘大小。

或者空间问题可能是您提到的每次提交的大量文件问题。

无论如何，您会问为什么转储文件比存储库*的*大小要小得多。转储文件是单个文件，其格式基本上是对存储库所做的每次提交 - 这是存储库的一种非常简洁的形式（尤其是在使用 --deltas 时）。由于这被放置在单个文件中，因此避免了分片的问题。

我曾经在以前的组织中使用并支持 SVN。最近，我将自己转移到 Mercurial DVCS（也称为 Hg，类似于 Git）。一旦你做出了改变，就很难再想回去了。无论如何，这里是来自[Softpedia](http://news.softpedia.com/news/Git-Gaines-Advantage-Over-Subversion-136737.shtml)关于存储库大小的引用：

> 磁盘空间：当 Mozilla 项目从 SVN 移植到 Mercurial 时（性能非常类似于 Git），磁盘空间使用量从 12GB 下降到 420MB，比原始大小小 30 倍。Git 应该使用相同的存储算法，因此文件大小应该是相同的值。

如果您切换到 Hg 或 Git，您可能想调查一下您的情况会发生什么。如果它与 Softpedia 的示例一样引人注目，您可以向您的管理层推荐 Hg/Git。

# python - Python Traceback 错误：int() 以 10 为底的无效文字

> ID：12329315
> 
> 赞同：0
> 
> 时间：2012-09-08T08:40:40.993
> 
> 标签：python, traceback

我阅读了有关追溯错误的 Python 问题的答案，可惜我不理解所提供的答案。当我运行以下代码时，如果用户不输入任何内容，我会收到回溯错误。我怎样才能避免它？请只给出具体和简短的答案。谢谢！

`Error: Python Traceback Error: Invalid Literal for int() with base 10`

```
def gold_room():
    print "This room is full of gold. How much do you take?"

    next = (raw_input(">>> "))
    how_much = int(next)

    if how_much < 50: 
        print "Nice, you're not greedy, you win!"
        exit(0)

    elif how_much > 50:
        print "You greedy bastard!"
        exit(0)
    else: 
        dead("Man, learn to type!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:43:25.770

你得到的原因是当有人简单地按回车时，程序得到一个空白字符串`''`，然后程序尝试转换`''`为 int。

```
>>> int('')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '' 
```

所以试试这个：

```
try:
   how_much = int(next)
except ValueError:
   dead("Dude, enter a value!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:57:08.107

作为 Burhan Khalid 答案的扩展，如果您想在用户输入有效号码之前提示用户，请执行以下操作：

```
how_much = None
while how_much is None:
    next = (raw_input(">>> "))
    try:
       how_much = int(next)
    except ValueError:
       print "Dude, enter a value!" 
```

# haskell - 我如何在 haskell 中同时利用 State 和 Writer？

> ID：12329320
> 
> 赞同：9
> 
> 时间：2012-09-08T08:41:06.047
> 
> 标签：haskell, monads

当我阅读 LYAH 的最后一章并遇到[ListZipper](http://learnyouahaskell.com/zippers#focusing-on-lists)时，我给自己分配了一个任务，让它成为一个 State monad，以便源代码看起来更清晰：

```
manipList = do
    goForward
    goForward
    goBack 
```

同时，我想利用 Writer monad 为这个过程保留一个日志，但我不知道如何将这两个 Monad 组合在一起。

我的解决方案是在状态内保留一个 [String]，我的源代码是

```
import Control.Monad
import Control.Monad.State

type ListZipper a = ([a], [a])

-- move focus forward, put previous root into breadcrumbs
goForward :: ListZipper a -> ListZipper a
goForward (x:xs, bs) = (xs, x:bs)

-- move focus back, restore previous root from breadcrumbs
goBack :: ListZipper a -> ListZipper a
goBack (xs, b:bs) = (b:xs, bs)

-- wrap goForward so it becomes a State
goForwardM :: State (ListZipper a) [a]
goForwardM = state stateTrans where
    stateTrans z = (fst newZ, newZ) where
        newZ = goForward z

-- wrap goBack so it becomes a State
goBackM :: State (ListZipper a) [a]
goBackM = state stateTrans where
    stateTrans z = (fst newZ, newZ) where
        newZ = goBack z

-- here I have tried to combine State with something like a Writer
-- so that I kept an extra [String] and add logs to it manually

-- nothing but write out current focus
printLog :: Show a => State (ListZipper a, [String]) [a]
printLog = state $ \(z, logs) -> (fst z, (z, ("print current focus: " ++ (show $ fst z)):logs))

-- wrap goForward and record this move
goForwardLog :: Show a => State (ListZipper a, [String]) [a]
goForwardLog = state stateTrans where
    stateTrans (z, logs) = (fst newZ, (newZ, newLog:logs)) where
        newZ = goForward z
        newLog = "go forward, current focus: " ++ (show $ fst newZ)

-- wrap goBack and record this move
goBackLog :: Show a => State (ListZipper a, [String]) [a]
goBackLog = state stateTrans where
    stateTrans (z, logs) = (fst newZ, (newZ, newLog:logs)) where
        newZ = goBack z
        newLog = "go back, current focus: " ++ (show $ fst newZ)

-- return
listZipper :: [a] -> ListZipper a
listZipper xs = (xs, [])

-- return
stateZipper :: [a] -> (ListZipper a, [String])
stateZipper xs = (listZipper xs, [])

_performTestCase1 = do
    goForwardM
    goForwardM
    goBackM

performTestCase1 =
    putStrLn $ show $ runState _performTestCase1 (listZipper [1..4])

_performTestCase2 = do
    printLog
    goForwardLog
    goForwardLog
    goBackLog
    printLog

performTestCase2 = do
    let (result2, (zipper2, log2)) = runState _performTestCase2 $ stateZipper [1..4]
    putStrLn $ "Result: " ++ (show result2)
    putStrLn $ "Zipper: " ++ (show zipper2)
    putStrLn "Logs are: "
    mapM_ putStrLn (reverse log2) 
```

但问题是我认为这不是一个好的解决方案，因为我必须手动维护我的日志。有没有其他方法可以混合 State monad 和 Writer monad 以便它们可以一起工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-08T08:46:46.043

您正在寻找[monad 转换](http://en.wikibooks.org/wiki/Haskell/Monad_transformers)器。基本思想是定义一个 like 类型`WriterT`，它接受另一个 monad 并将其与`Writer`创建新类型 (like `WriterT log (State s)`) 结合起来。

注意：有一个约定，变压器类型以大写字母结尾`T`。所以`Maybe`和`Writer`是普通的单子，`MaybeT`和`WriterT`是它们的变压器等价物。

核心思想非常简单：对于一堆 monad，你可以很容易地想象在 bind 上组合它们的行为。最简单的例子是`Maybe`。回想一下，所做的一切都是在绑定`Maybe`上传播：`Nothing`

```
Nothing >>= f = Nothing
Just x >>= f = f x 
```

所以应该很容易想象用这种行为扩展*任何*monad。我们所做的只是先检查`Nothing`，然后使用旧的 monad 的绑定。该`MaybeT`类型正是这样做的：它包装了一个现有的 monad，并在每个绑定前加上这样的检查。您还必须`return`通过将值包装在 a 中`Just`然后使用内部 monad 来实现`return`。还有更多的管道可以让一切正常工作，但这是重要的想法。

你可以想象一个非常相似的行为`Writer`：首先我们组合任何新的输出，然后我们使用旧的 monad 的绑定。这本质上是 的行为`WriterT`。还有一些其他的细节，但基本的想法是相当简单和有用的。

Monad 转换器是一种非常常见的“组合”你想要的 monad 的方法。最常用的 monad 有多种版本作为转换器，但值得注意的例外是`IO`始终必须位于 monad 堆栈的底部。在您的情况下，两者都`WriterT`存在`StateT`并且可以用于您的程序。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-08T09:29:48.133

Tikhon Jelvis 用 monad 转换器给出了一个很好的答案。但是，也有一个快速的解决方案。

中的[`Control.Monad.RWS`](http://hackage.haskell.org/packages/archive/mtl/2.0.1.0/doc/html/Control-Monad-RWS-Lazy.html)模块`mtl`导出`RWS`monad，它是`Reader`,`Writer`和`State`monad 的组合。

# cocos2d-iphone - 向屏幕添加移动精灵数组时出现问题？

> ID：12329322
> 
> 赞同：0
> 
> 时间：2012-09-08T08:41:38.767
> 
> 标签：cocos2d-iphone, tags, nsmutablearray, sprite, simulator

在我的程序中，我创建了一个 NSMutable 数组，其中包含一系列在屏幕上移动的精灵（向左）

但是，虽然在我的代码中实现，但在测试时它们似乎没有出现在屏幕模拟器上。

有任何想法吗？

```
-(void) addBlocks
{

    NSMutableArray *_blocks; blocktest=[CCSprite spriteWithFile:@"blocksquare.png"];

    blocktest.tag = 1;

    // add the block to the array of blocks
    [_blocks addObject:blocktest];

    blocktest.position=ccp(500,100);
    id repeat2 =[CCRepeatForever actionWithAction:[CCSequence actions:
                                                   [CCMoveTo actionWithDuration:7 position:ccp(-180,100)],nil]];
    [blocktest runAction:repeat2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:25:02.500

那是因为您还没有在场景中添加 blocktest ( [self addChild:blocktest] )。

将其添加到 _blocks，将用作稍后获取您的精灵的参考，但不会将精灵添加到任何图层或场景，因此您不会在任何地方看到它们

# php - .htaccess 在第一个 & 运算符上重写规则中断字符串

> ID：12329323
> 
> 赞同：0
> 
> 时间：2012-09-08T08:41:49.670
> 
> 标签：php, regex, .htaccess, mod-rewrite, url-rewriting

这是我的代码

```
RewriteEngine on
RewriteRule ^public/p-(.*)\&(.*)?$ public/index.php?page=$1.php&$2 [NC,L] 
RewriteRule ^public/p-(.*)$ public/index.php?page=$1.php 
```

这是网址

```
http://localhost/riviera/public/p-job-steps&job_id=7&step=1 
```

输出是

```
Array ( [page] => job-steps [job_id] => 7.php [step] => 1 ) 
```

我只想将“.php”附加到第一个参数

我浪费了 4-5 个小时来实现这个目标，我不想修改我正在构建的应用程序的 url 结构。请帮助某人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:03:28.877

有一个名为[QSA](http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_qsa)的简单标志将为您完成所有工作。

在 htaccess 中写入以下内容：

```
RewriteEngine on
RewriteRule public/p-(.*) public/index.php?page=$1.php [NC,QSA,B] 
```

我测试了它，它给出了：

```
Array
(
    [page] => job-steps.php
    [job_id] => 7
    [step] => 1
) 
```

当网址为：

```
http://localhost/riviera/public/p-job-steps?job_id=7&step=1 
```

出于安全原因，您应该添加[B 。](http://httpd.apache.org/docs/current/en/rewrite/flags.html#flag_b)

# iphone - 使用 registerNib:forCellReuseIdentifier 时，如何初始化 UITableViewCell iVars？

> ID：12329326
> 
> 赞同：4
> 
> 时间：2012-09-08T08:42:35.090
> 
> 标签：iphone, uitableview

我正在`UITableViewCell`从 nib 加载自定义子类。

我的视图控制器`viewDidLoad`方法使用`registerNib:forCellReuseIdentifier`. 我的视图控制器的`cellForRowAtIndexPath`方法用于`dequeueReusableCellWithIdentifier`加载单元格，但我从不分配/初始化单元格。

**视图控制器：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.tV registerNib:[UINib nibWithNibName:@"VersatileIntTFCell" bundle:[NSBundle mainBundle]] forCellReuseIdentifier:kTFInt];
    self.tV.delegate=self;
    self.tV.dataSource=self;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Int TextField";
    VersatileIntTFCell *cell = (VersatileIntTFCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];   
    return cell;

} 
```

表格视图看起来很好，单元格看起来很好。

现在，我开始编写`UITableViewCell`. 我的每个子类都有一些@property iVars（它们不是`IBOutlets`）。我想`init`在子类的方法中初始化这些`UITableViewCell`，但这似乎永远不会被调用。我可以在 viewController 中初始化它们，`cellForRowAtIndexPath`但我想避免这种情况。我想在`UITableViewCell`子类中做到这一点。这可能吗？如果是这样，如何/在哪里/何时？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T21:57:58.803

覆盖该`awakeFromNib`方法并将您的代码放在那里而不是 init 中。

从文档：

> nib 加载基础架构向从 nib 存档重新创建的每个对象发送 awakeFromNib 消息，但前提是存档中的所有对象都已加载和初始化。当一个对象收到一个 awakeFromNib 消息时，它保证已经建立了它的所有出口和动作连接。您必须调用 awakeFromNib 的超级实现，以使父类有机会执行它们需要的任何其他初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:02:48.073

如果要在从 nib 加载任何 UIView 后对其进行初始化，则应覆盖`initWithCoder`. `awakeFromNib`也可能有用。请参阅 UIView 参考中的“覆盖方法”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T01:03:20.563

有一种方法`prepareForReuse`可以使用。

[http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableViewCell/prepareForReuse)

# asp.net - 需要的建议：创建具有数据库连接性的桌面应用程序

> ID：12329331
> 
> 赞同：2
> 
> 时间：2012-09-08T08:43:00.917
> 
> 标签：asp.net, .net, winforms, console-application

我想创建一个桌面应用程序，我通常在基于 Web 的应用程序上工作，所以对使用 .Net 和 Visual Studio 创建控制台应用程序知之甚少。

所以现在在这个应用程序中，我还将使用数据库连接和存储过程（SQL 服务器）。但是我应该如何开始这样做，因为我不想在我的客户端系统上安装 SQL Server。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:32:55.633

我认为这取决于您的应用程序的目标、数据的数量和结构以及环境。最后一点针对客户端系统，如果客户端是企业网络的一部分（例如 Active Directory）或者是家庭中的普通用户。

*   也许您可以使用 xml 或 json 文件来存储数据
*   如果你需要一个数据库，你可以为你的应用程序创建一个安装项目，它会自动安装一个 SQL Server express
*   另一种方式是，如果它适用于您，您的应用程序可以使用提供数据的 Web 服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:15:17.350

您可以使用 SQL Server compact [http://msdn.microsoft.com/en-us/library/cc645984(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/cc645984(v=sql.100).aspx)或 SQL Lite 在您的应用程序中启动您的数据库，而无需外部依赖。

否则，如果不需要离线，您可以使用“云”方式，使用 Web API

# ios - 越狱 iPhone 上的通话录音

> ID：12329332
> 
> 赞同：1
> 
> 时间：2012-09-08T08:43:14.067
> 
> 标签：ios, jailbreak

我想在**越狱的 iPhone**设备上开发通话录音模块。它看起来肯定是可能的，因为 cydia 商店中已经有一些通话录音应用程序。但是无法获得任何适当的信息来继续实施它......如果有人对此有正确的想法，请告诉我......

# jquery - Jquery切换类功能不起作用

> ID：12329334
> 
> 赞同：3
> 
> 时间：2012-09-08T08:43:27.320
> 
> 标签：jquery

大家好，我想在事件处理程序上更改 div 的类，例如鼠标悬停或 click() ..但我面临的问题是它不会改变切换类的效果。这是代码，请帮助我，谢谢。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org        /TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

 <title>Untitled Document</title>

   <style type="text/css">

    .hello{

 background:#60C;

}
      .main{
width:300px;
height:300px;
background:#00F;
border-radius:10px;
}
    </style>
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
     <script type="text/javascript" >

     $(function() {
        $("#event").bind("mouseover mouseleave", highlight);

        $("#event").bind("click", function(evt) {
             $("#event").toggleClass("hello"); 
            $("#event").unbind("mouseover mouseleave", highlight);
            $("#event").html("<p>You shut off the hover effect!</p>");
        });
    });

    function highlight(evt) {
        $("#event").toggleClass("high");        
    }

   </script> 
</head> 
```

```
 <div class="main" id="event">
     This is a div click to highlight
     </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:54:32.090

您的代码适用于悬停状态，但您的 CSS 中没有`high`类。

```
.high {
     property: value
} 
```

对于绑定/取消绑定您可以使用的事件`on`和`off`方法：

```
$(function() {
    $("#event").on("mouseover mouseleave", highlight);

    $("#event").on("click", function(evt) {
        $(this).toggleClass("hello");
        $(this).off("mouseover mouseleave", highlight);
        $(this).html("<p>You shut off the hover effect!</p>");
    });
});

function highlight(evt) {
    $("#event").toggleClass("high");
} 
```

[http://jsfiddle.net/t3B5Z/](http://jsfiddle.net/t3B5Z/)

# c++ - 终止称为抛出异常中止陷阱：6

> ID：12329336
> 
> 赞同：2
> 
> 时间：2012-09-08T08:43:48.233
> 
> 标签：c++

我有以下代码，当我编译并运行时，我收到以下消息

> 终止称为抛出异常中止陷阱：6

我找了这个，但我无法理解这个错误信息。请告诉我，此错误消息的含义以及我如何修复代码。这是代码：

```
#include <iostream>
#include <string>
using namespace std;

int main(){
    int n,r;
    while(cin>>n>>r){
        if(n==0&&r==0)break;
        string s;
        for(int i=0;i<n;i++)
            s[i]='i';

        for(int i=0;i<r;i++){
            int p,c;
            cin>>p>>c;
            string left=s.substr(p-1,p+c-1);
            string right=s.substr(0,p-2)+s.substr(p+c, (int)s.size());
            s=left+right;
        }
        cout << (int)(s[0]-'0')+1 << endl;
    }
        return 0;
} 
```

在 Mac OSX 10.7.4 上使用 g++ 编译

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:48:26.677

不知道异常来自哪里，但这不起作用

```
string s;
for(int i=0;i<n;i++) 
    s[i]='i'; 
```

因为字符串最初是空的，并且都`s[i]`将超出范围。

要在循环中向字符串添加字符，请尝试

```
string s;
for(int i=0;i<n;i++) 
    s.push_back('i'); 
```

如果你只想要一个有很多`'i'`s 的字符串，你可以在构造它时这样做：

```
string s(n, 'i'); 
```

# javascript - 奇怪的 Datepicker 行为，与模糊有关

> ID：12329338
> 
> 赞同：0
> 
> 时间：2012-09-08T08:43:56.630
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我完全坚持使用 Datepicker。如果 Datepicker 处于活动状态，则模糊会隐藏日历，但焦点仍停留在输入中，因此我无法通过再次单击输入来再次触发 datepicker。页面上只有 2 个日期选择器可以正常工作，所有其他的都以这种方式损坏。

这就是我设置日期选择器的方式。第一对工作正常，第二对坏了。

```
dates.intervalDatepickersSet( $( ".head-from, .head-to" ) );
dates.intervalDatepickersSet( $( ".residence-from, .residence-to" ) ); 
```

这是 dates.intervalDatepickersSet：

```
intervalDatepickersSet: function( el ) {
    var interval, i,
    pair = [];

    if ( el.length > 2 ) {
        var elementsContainer = el.toArray();
        for ( i in elementsContainer ) {
            if ( elementsContainer.hasOwnProperty( i ) ) {
                pair[0] = elementsContainer.shift();
                pair[1] = elementsContainer.shift();
                // If we are on the Update order page, we could have few elements with same classes.
                // Set datpickers for each pair of that incoming bundle of   elements.
                dates.intervalDatepickersSet( $( pair ) );
            }
        }
    }

    interval = el.datepicker({
        onSelect: function( selectedDate ) {
            var prefix = dates.prefixFromTo( $( this ) ),
            option = ($(this).hasClass(prefix + '-from')) ? "minDate" : "maxDate",
            instance = $( this ).data( "datepicker" ),
            date = $.datepicker.parseDate(
                instance.settings.dateFormat || $.datepicker._defaults.dateFormat,
                selectedDate, instance.settings);
            interval.not( this ).datepicker( "option", option, date );
            /* calculations code */
    });
} 
```

这有什么问题？

**UPD** 第一个工作元素对：

```
<input id="id03" class="disable text from head-from" default="__.__._____" type="text" name="Order[z_start_date]" id="z_start_date" value="<?php if($this->getAction()->getId()=="create") echo '__.__._____'; else echo Yii::app()->dateFormatter->format('dd.MM.yyyy', $model->z_start_date);?>" />
<input id="id04" class="disable text to head-to" default="__.__._____" type="text" name="Order[z_end_date]" id="z_end_date" value="<?php if($this->getAction()->getId()=="create") echo '__.__._____'; else echo Yii::app()->dateFormatter->format('dd.MM.yyyy', $model->z_end_date);?>" /> 
```

第二个破对：

```
<input class="text dateOfSettlement1 residence-from" type="text" name="<?php echo $model->getAttrName($block, 'in'); ?>" value="Дата начала" default="Дата начала" />
<input class="text dateOfEviction1 residence-to" type="text" name="<?php echo $model->getAttrName($block, 'out'); ?>" value="Окончание" default="Окончание" /> 
```

**UPD2**

只有当我单击另一个输入或拖动某个元素（触发另一个动作）时，我才能再次触发 datepicker。这种行为的原因是什么？

所以我只能在“focusout”事件之后再次触发 datepicker，而不是在“blur”之后。虽然，日历隐藏在模糊中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T16:35:06.767

签出日期选择器`showOn`选项。[文档](http://jqueryui.com/demos/datepicker/#option-showOn)

您可能希望将其设置为“两者”。默认情况下，它设置为“焦点”，如果输入元素仍然具有焦点，则不会再次触发。

# android - 如何确定设备是否正在连接或连接到 Wi-Fi 热点？

> ID：12329340
> 
> 赞同：0
> 
> 时间：2012-09-08T08:44:07.640
> 
> 标签：android, networking, wifi

首先，我使用该方法`WifiManager.getWifiState()`来确定我的设备的 Wi-Fi 是否启用。如果已启用，则`WifiManager.getConnectionInfo()`返回一个`WifiInfo`包含 SSID 和我需要的其他信息的对象。但是我怎么知道设备是否已经连接到具有该 SSID 的热点，或者仍在连接？我必须创建一个`BroadcastReciever`类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:48:26.753

```
 public  boolean IsWiFiConnected(){
    ConnectivityManager manager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = manager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
    return netInfo.isConnectedOrConnecting();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T08:46:32.407

这是给你的代码：

```
public boolean isInternetAvailable() {
    ConnectivityManager cm = (ConnectivityManager) activity.getSystemService(Context.CONNECTIVITY_SERVICE);
    if (cm.getActiveNetworkInfo() != null)
        return (cm.getActiveNetworkInfo().isConnected() && cm.getActiveNetworkInfo().isAvailable());
    else
        return false;
} 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:55:48.073

这可能会帮助你

```
public static boolean isCheckedNetwork() {

        ConnectivityManager connect = (ConnectivityManager) mcontext.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo network = null;
        if (connect != null) {
            network = connect.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        }
        return network == null ? false : network.isConnected();
    } 
```

# svn - 在 Subversion 中，对分支的修订编号感到困惑

> ID：12329344
> 
> 赞同：3
> 
> 时间：2012-09-08T08:44:48.303
> 
> 标签：svn

我一直在使用 Clear Case，并开始使用 Subversion。

现在我很困惑分支的修订号是从 0 开始还是从主干的 HEAD 修订号开始。

还有一个问题，在我提交 Trunk 之后，我很困惑分支的最新版本是否与 Trunk 的 HEAD 版本相同。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:55:52.550

Subversion 存储库中的修订号是全局的，即它们适用于整个存储库，包括`trunk`、`tags`和`branches`。

*“使用 Subversion 进行版本控制”*一书的这一部分可能对您有用：

*   [http://svnbook.red-bean.com/en/1.7/svn.basic.in-action.html#svn.basic.in-action.revs](http://svnbook.red-bean.com/en/1.7/svn.basic.in-action.html#svn.basic.in-action.revs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:55:29.423

在考虑 Subversion 中的版本控制、分支和合并时，您不应该应用任何 ClearCase 经验（除了系统变更管理的概念）。这是完全不同的。

subversion 中的主干和分支是对称的独立文件夹。当一个分支从另一个分支时，它实际上是一个轻量级的写时复制。

修订版是存储库的全局状态，而不是单个元素的状态，这就是为什么您会看到“分支的最新修订版与主干头修订版相同”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T08:55:31.100

在 Subversion 中，每个新存储库在创建时都会从修订版 1 开始。

无论您是提交到主干、分支还是创建标签，所有修订对于每个存储库都是唯一且增量的。

所以你会得到这样的修订号：

```
Commit to Trunk - rev 1
Commit to Trunk - rev 2
Commit to Branch - rev 3
Commit to Trunk - rev 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T08:59:28.273

Subversion 版本号是严格单调的。如果您的提交获得修订号*n*，那么下一次提交将是修订*n* +1，无论在 repo 中的什么位置提交。它甚至可能是同一个 repo 中的不同项目。

# jquery - 使用 jquery 的标签

> ID：12329345
> 
> 赞同：1
> 
> 时间：2012-09-08T08:44:49.247
> 
> 标签：jquery, hashtag

这是我的[JSFiddle](http://jsfiddle.net/sureshmonster/Jqfsn/2/)。我希望 h2 名称作为主题标签，并在单击下一步按钮时更新主题标签。请问有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:54:24.343

[http://jsfiddle.net/GolezTrol/Jqfsn/4/](http://jsfiddle.net/GolezTrol/Jqfsn/4/)

它实际上可以与jsFiddle 一起使用`location.hash`，但不能在 jsFiddle 中使用，可能是因为它使用 IFrame 或其他东西来运行页面。

# postgresql - postgres中如何删除数据库表

> ID：12329346
> 
> 赞同：3
> 
> 时间：2012-09-08T08:44:59.950
> 
> 标签：postgresql

我用 postgres 创建了一些数据库，并在其中放入了一些数据。

问题是当我删除/删除数据库，然后创建新数据库时，新数据库始终包含使用 postgres 创建的第一个数据库中的表和数据。

如何删除数据库，以便在创建新数据库时包含旧数据库中的数据？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T08:51:48.720

听起来您在 template1 数据库中创建了表（或者您在语句中指定了`TEMPLATE xyz`选项）。`CREATE DATABASE`

要删除 template1 数据库中的表，请连接到它并删除那里的所有表。之后，新数据库将不再包含这些表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-23T06:11:17.550

使用 truncate commnad 删除表中的行

```
 truncate <tablename> 
```

然后使用 drop 命令删除数据库

```
drop database <databasename> 
```

# android - android 列表仅从一个 void 刷新，而不是从另一个

> ID：12329351
> 
> 赞同：0
> 
> 时间：2012-09-08T08:46:34.273
> 
> 标签：android, android-listview, android-sqlite

这对我来说很奇怪：在我的项目中（顺便说一下，它是从 Yaxim 派生的，所以它是一个 android 的聊天应用程序），我正在尝试通过 messageeventlistener 实现写入通知。我确实收到了通知事件。为了让它出现在列表视图中（在另一个类中），我在数据库中添加了一行，就好像它是一条消息（只有文本是“...”）。我添加了一个计数器，并且该行已正确插入到数据库中（随后，当实际消息到来时，该行从数据库中删除）。notifychanges 也被正确调用。奇怪的是，尽管如此，该行并没有出现在列表视图中。如果我将程序移到下面几行，在常规消息的数据包侦听器上，它会被插入。但是我不能那样离开它，因为数据包侦听器没有 t 正确接收所有撰写通知，因此它不会一直为此目的工作。此外，当写入通知正确插入数据库时​​，如果我将程序保留在 messageEventNotificationListener() 中，则写入通知消息在实际消息到达时不会被删除（并且 iCount 不断增加）；如果我将程序放入 packetListener 中（因此在消息被推送到数据库后 iCount 等于 0）

这是消息事件监听器：

```
private void messageEventNotificationListener(){
    // Create a MessageEventManager
    if (mMessageEventManager == null)
        mMessageEventManager = new MessageEventManager(mXMPPConnection);
      // Add the listener that will react to the event notifications
    mMessageEventManager.addMessageEventNotificationListener(new MessageEventNotificationListener() {
          public void deliveredNotification(String from, String packetID) {
              Log.d(TAG, "The message has been delivered (" + from + ", " + packetID + ")");
          }

          public void displayedNotification(String from, String packetID) {
              Log.d(TAG, "The message has been displayed (" + from + ", " + packetID + ")");
          }

          public void composingNotification(String from, String packetID) {
              Log.d(TAG, "The message's receiver is composing a reply (" + from + ", " + packetID + ")");
              //controlla se l'utente non sta già scrivendo 
              String selection = ChatConstants.JID + " = '" + from + "' AND " +
                        ChatConstants.DELIVERY_STATUS + " = " + ChatConstants.DS_WRITING;

                Cursor cursor = mContentResolver.query(ChatProvider.CONTENT_URI,
                            new String[] { "count(" + ChatConstants._ID + ")" },
                            selection, null, null);
                cursor.moveToFirst();
                int iCount = cursor.getInt(0);
                //if (iCount == 0)
                //{
                    addChatMessageToDB(ChatConstants.INCOMING, from, "...", ChatConstants.DS_WRITING, System.currentTimeMillis(), packetID);

                //}

          }

          public void offlineNotification(String from, String packetID) {
              Log.d(TAG, "The message's receiver is offline (" + from + ", " + packetID + ")");
          }

          public void cancelledNotification(String from, String packetID) {
              Log.d(TAG, "The message's receiver cancelled composing a reply (" + from + ", " + packetID + ")");

          }
      });   

} 
```

这是数据包侦听器：

```
private void registerMessageListener() {
    // do not register multiple packet listeners
    if (mPacketListener != null)
        mXMPPConnection.removePacketListener(mPacketListener);

    PacketTypeFilter filter = new PacketTypeFilter(Message.class);

    mPacketListener = new PacketListener() {
        public void processPacket(Packet packet) {
            try {
            if (packet instanceof Message) {
                Message msg = (Message) packet;
                String chatMessage = msg.getBody();

                DeliveryReceipt dr = (DeliveryReceipt)msg.getExtension("received", DeliveryReceipt.NAMESPACE);
                if (dr != null) {
                    Log.d(TAG, "got delivery receipt for " + dr.getId());
                    changeMessageDeliveryStatus(dr.getId(), ChatConstants.DS_DELIVERED);
                }

                if (chatMessage == null)
                    return;

                if (msg.getType() == Message.Type.error) {
                    chatMessage = "<Error> " + chatMessage;
                }

                long ts;
                DelayInfo timestamp = (DelayInfo)msg.getExtension("delay", "urn:xmpp:delay");
                if (timestamp == null)
                    timestamp = (DelayInfo)msg.getExtension("x", "jabber:x:delay");
                if (timestamp != null)
                    ts = timestamp.getStamp().getTime();
                else
                    ts = System.currentTimeMillis();

                String fromJID = getJabberID(msg.getFrom());

                //elimina il messaggio "writing" se esiste
                     deleteWritingChatMessageFromDB(fromJID);

                    if (msg.getExtension("request", DeliveryReceipt.NAMESPACE) != null) {
                        // got XEP-0184 request, send receipt
                        sendReceipt(msg.getFrom(), msg.getPacketID());
                    }

                    addChatMessageToDB(ChatConstants.INCOMING, fromJID, chatMessage, ChatConstants.DS_NEW, ts, msg.getPacketID());
                    mServiceCallBack.newMessage(fromJID, chatMessage);
                }
            }
            } catch (Exception e) {
                // SMACK silently discards exceptions dropped from processPacket :(
                Log.e(TAG, "failed to process packet:");
                e.printStackTrace();
            }

    };

    mXMPPConnection.addPacketListener(mPacketListener, filter);
} 
```

最后是插入和删除方法

```
private void addChatMessageToDB(int direction, String JID,
        String message, int delivery_status, long ts, String packetID) {
    ContentValues values = new ContentValues();

    values.put(ChatConstants.DIRECTION, direction);
    values.put(ChatConstants.JID, JID);
    values.put(ChatConstants.MESSAGE, message);
    values.put(ChatConstants.DELIVERY_STATUS, delivery_status);
    values.put(ChatConstants.DATE, ts);
    values.put(ChatConstants.PACKET_ID, packetID);

    Uri noteUri = mContentResolver.insert(ChatProvider.CONTENT_URI, values);
    //mContentResolver.notifyChange(noteUri, null);
}

private void deleteWritingChatMessageFromDB(String JID) {
    int count = mContentResolver.delete(ChatProvider.CONTENT_URI,
            ChatConstants.JID + " = ? AND " + ChatConstants.MESSAGE + " = ? AND " + ChatConstants.DELIVERY_STATUS + " = ?", new String[] { JID, "...", "3" });
    debugLog("deleteWritingChatMessageEntryFromDB: Deleted " + count + " entries");

} 
```

这两个方法都被调用到 ChatProvider 类中并以 getContext().getContentResolver().notifyChange(url, null);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:51:29.117

原来问题是不同的：我发布这个只是为了以防其他人遇到同样的问题。消息实际上已插入到数据库中，但是虽然 packetlistener 仅返回 jid，但 messageeventlistener 也返回带有资源的 jid，在插入之前需要将其删除。完成后，消息出现在列表中。另外：我发布的代码对于处理 messageEvent 并不完全正确。侦听器需要直接从 packetListener 内部调用。

# objective-c - 终止称为抛出异常

> ID：12329352
> 
> 赞同：0
> 
> 时间：2012-09-08T08:46:40.127
> 
> 标签：objective-c, video

我已经制作了一段用于播放视频文件的代码。但是当我构建它时，我得到了以下错误：

> Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: ' -[NSURL initFileURLWithPath:]: nil string parameter' First throw call stack: (0x1ed8022 0x11c0cd6 0x1e80a48 0x1e809b9 0xc6553b 0xc654c5 0x2be8 0x1ed9e99 0x32614e 0x3260e6 0x3ccade 0x3ccfa7 0x3cc266 0x34b3c0 0x34b5e6 0x331dc4 0x325634 0x17baef5 0x1eac195 0x1e10ff2 0x1e0f8da 0x1e0ed84 0x1e0ec9b 0x17b97d8 0x17b988a 0x323626 0x29b2 0x2925) 终止调用抛出异常

我已经尝试了很多来修复它，但没有任何效果！你没有解决办法吗？是的，我已经实现了媒体播放器框架！

我编写了以下代码：

```
-(IBAction)playvideo {

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"film" ofType:@"mp4"]];

    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
                                                     initWithContentURL:url];

    [self presentMoviePlayerViewControllerAnimated:playercontroller];

    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

    [playercontroller.moviePlayer play];

    [playercontroller release];

    playercontroller = nil;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:11:58.853

这一行描述了问题：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSURL initFileURLWithPath:]: nil string parameter”

这告诉您您正在将 a 传递给`nil`一个不允许 a 的参数`nil`。

确保这是问题的步骤：

```
-(IBAction)playvideo {
    NSString *videoPath = [[NSBundle mainBundle] pathForResource:@"film" ofType:@"mp4"]

    if (!videoPath) {
        NSLog(@"Video path is nil. My bundle must be set up incorrectly");
        return; // return early.
    }

    NSURL *url = [NSURL fileURLWithPath:videoPath];

    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc]
                                                     initWithContentURL:url];

    // The rest of your implementation here. 

} 
```

这至少应该可以帮助您定位问题。

顺便说一句 - 您应该使用基于 URL 的方法来获取资源，而不是基于字符串的文件路径。但一次只做一件事。

# .net - 如何从 Visual Studio 2012 检测到的更改列表中排除某些文件夹？

> ID：12329362
> 
> 赞同：10
> 
> 时间：2012-09-08T08:48:37.753
> 
> 标签：.net, visual-studio, visual-studio-2012, team-explorer

在 Visual Studio 2012 / Team Explorer / Pending Changes 中，有一个链接指向在解决方案中检测到更改的文件列表。

如何使 Visual Studio 不检测`_ReSharper.*`和`Packages`文件夹中的挂起更改？

![在此处输入图像描述](../Images/93e43eb58bdfbea1592559728ae74f0d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T13:02:52.207

您可以手动将 .tfignore 文件添加到您的解决方案中以忽略特定文件、扩展名或文件夹。该文件中定义的项目不会被视为更改。如果单击“检测到的更改”，您还可以忽略 Visual Studio 中的项目（通过右键单击所选项目）。

如果是 resharper，您可以选择将缓存文件放在系统临时文件夹中。这样您就不必将它们从源代码管理中排除：

~~[http://www.splatto.net/portfolio/blog/post/2009/06/29/Removing-Resharper-Cache-Directories-in-Project-Solution-Folder.aspx](http://www.splatto.net/portfolio/blog/post/2009/06/29/Removing-Resharper-Cache-Directories-in-Project-Solution-Folder.aspx)~~

更新：上述链接不再解析，但[Resharper 帮助中心提供了有关在 ReSharper 中配置缓存位置的信息](http://www.jetbrains.com/resharper/webhelp/Configuring_Caches_Location.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:59:37.170

我执行以下操作以忽略工作区中的所有“_Resharper.*”和“Packages”文件夹：

1.  选择忽略任何文件夹。这将导致在工作空间的根级别创建 .tfignore 文件（如果它不存在）并出现在“包含的更改”区域中。
2.  双击“包含的更改”中的 .tfignore 文件。这应该打开它进行编辑。
3.  删除您在步骤 1 中添加的任何文件夹，然后在单独的行中添加“_ReSharper.*”和“Packages”。保存文件。

当您重新启动 Visual Studio 时，您现在应该会发现所有 ReSharper 和 Packages 文件夹都被检测到的更改忽略了。

# css - Facebook like code 给出 css/javascript 错误

> ID：12329366
> 
> 赞同：0
> 
> 时间：2012-09-08T08:48:50.420
> 
> 标签：css, facebook, facebook-like

想在我的网站上添加简单的 facebook “like” 模块。我使用从 facebook 开发者网站生成的代码在打开 body 标签后添加了这个：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pl_PL/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

稍后在页面内：

```
<div class="fb-like" data-href="my site url here" data-send="false" data-width="550" data-show-faces="false"></div> 
```

它似乎工作正常，除了这段代码给了我许多我在萤火虫中看到的 css/js 警告，例如：

```
unknown property „-moz-border-radius”, unknown property: "moz-outline-style.3",[],function(a,b,c,d,e,f){(function(){var g={}.toString,h,i,j,k=e.exports={},l... 
```

有很多这样的错误。

你知道如何解决这个问题吗？整个页面似乎工作正常，但我不喜欢在我的页面上出现此类问题。我也在这个页面内使用 jquery，所以也许这会导致一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:52:19.400

您遇到的这些错误是因为有一些 CSS 属性需要以一种以上的形式定义，以便最大限度地与不同浏览器兼容。

这些对标准声明的补充称为**供应商前缀**。有关更多信息，您可能想看看这篇文章：[小链接](http://wiki.csswg.org/spec/vendor-prefixes)。

例如，采用以下 CSS：

```
.roundcorners {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
} 
```

`-moz-border-radius`用于旧版本的 Firefox，新版本支持`border-radius`. `-webkit-border-radius`适用于基于 WebKit 的浏览器（Chrome、Safari）。

换句话说，只要您希望赞按钮在大多数现代浏览器中工作，就无法避免出现这些错误。

**注意：**当浏览器看到未知属性/规则时，它会忽略声明，因此只要您的规则[排序正确](http://emps.l-c-n.com/notebook/css-vendor-prefixes-and-the-cascade)，那么这是无害的。

# django - 在 Python 中限制文件的生命周期

> ID：12329367
> 
> 赞同：4
> 
> 时间：2012-09-08T08:48:55.547
> 
> 标签：django, python-2.7

那里的直升机，

我正在寻找一种方法来限制 Python 中文件的生命周期，即创建一个将在创建后 5 分钟后自动删除的文件。

* * *

问题：

我有一个基于 Django 的网页，该网页具有生成图（从用户提交的输入数据）的服务，这些图在网页上显示为 .png 图像。图像在创建时存储在磁盘上。

图像文件是按会话创建的，并且只能在用户看到它们后的有限时间内可用，并且应该在创建后 5 分钟被删除。

* * *

可能的解决方案：

1.  我查看了 Python 临时文件，但这不是我需要的，因为用户应该能够返回到包含图像的页面，而无需等待它再次生成。换句话说，它不应该在关闭后立即销毁

2.  想到的另一种方法是调用某种外部 bash 脚本，该脚本将删除超过 5 分钟的文件。

有人知道这样做的首选方式吗？

想法还可以包括更改显示/生成图像文件的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:42:20.313

您应该编写一个[Django 自定义管理命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)来删除可以从 cron 调用的旧文件。

如果您不想要超过 5 分钟的文件，那么您当然需要每 5 分钟调用一次。是的，当没有用户时它会不必要地运行，但这不应该让你太担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T11:42:05.590

好吧，我猜这可能是一个好方法......

您可以编写一个脚本来检查您的目录并删除过时的文件，并从未删除的文件中选择最旧的文件。计算自创建该文件以来经过了多少时间，并计算删除该文件的剩余时间。然后`sleep`用剩余时间调用函数。当`sleep`时间结束并开始另一个循环时，将（至少）有一个文件要删除。如果目录中没有文件，请将`sleep`时间设置为 5 分钟。

这样你可以确保每个文件在 5 分钟后被删除，但是当同时创建的文件很多时，睡眠时间会大大减少，你的函数会越来越频繁地检查每个文件。为了避免在开始另一个循环之前为睡眠功能添加适当的延迟，例如，如果最旧的文件有 4 分钟的历史，您可以将睡眠设置为`60+30`秒（添加所有时间计算 30 秒）。

一个例子：

```
from datetime import datetime
import time
import os

def clearDirectory():
    while True:
        _time_list = []
        _now = time.mktime(datetime.now().timetuple())
        for _f in os.listdir('/path/to/your/directory'):
            if os.path.isfile(_f):
                _f_time = os.path.getmtime(_f) #get file creation/modification time
                if _now - _f_time < 300:
                    os.remove(_f) # delete outdated file
                else:
                    _time_list.append(_f_time) # add time info to list
        # after check all files, choose the oldest file creation time from list
        _sleep_time = (_now - min(_time_list)) if _time_list else 300 #if _time_list is empty, set sleep time as 300 seconds, else calculate it based on the oldest file creation time
        time.sleep(_sleep_time) 
```

但正如我所说，如果经常创建文件，最好设置睡眠时间的延迟

```
time.sleep(_sleep_time + 30) # sleep 30 seconds more so some other files might be outdated during that time too... 
```

此外，最好阅读[getmtime](http://docs.python.org/library/os.path.html#os.path.getmtime)函数以获取详细信息。

# c++ - 从 int 转换为 char 以显示 ncurses 键绑定

> ID：12329368
> 
> 赞同：0
> 
> 时间：2012-09-08T08:49:12.243
> 
> 标签：c++, ncurses, stdstring

我正在开发一个带有 ncurses 的小型控制台游戏。在主菜单中，我希望用户能够设置控制键。现在据我了解，在 ncurses 中，您可以通过 char 'a' 的 int 值访问 ea 键。使用带有“a”的关键游戏完美无缺，但是我被菜单卡住了：

对于每个键绑定，我存储了一个默认为 ea 'a' 的 int 值。游戏开始时，我从 int 值中正确读取了“a”绑定，并且可以在游戏中使用它。但是，它不能正确显示。我希望它是这样的：“左：a”。我这样做：

```
std::string key = "Left: " + static_cast<char>(_value); 
```

_value 是我存储并初始化为“a”的 int 值。顺便说一句，我也试过没有演员表。

现在显示的内容很奇怪。它不是“a”，而是“~T^C”。对于字母“s”和“d”，它根本不显示任何内容。“w”变成了一些很奇怪的编码问号。

我想这与 int-values 中字符的编码有关。那么我该怎么做才能让它以正确的方式显示呢？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:56:52.690

您将字符串文字的地址和 ASCII 值加在一起`_value`。`key`然后从该垃圾地址处的任何内容构造字符串。

请记住，字符串字面量是 N 的数组类型，`const char`当传递给函数和运算符等时，数组会衰减为指向其第一个元素的指针，这会产生`const char*`. 用于指针的内置 + 运算符不进行字符串连接。您需要`std::string`从至少一个操作数中构造一个以使重载运算符生效：

```
std::string key = std::string("Left: ") + static_cast<char>(_value); 
```

# php - 查询未插入值

> ID：12329371
> 
> 赞同：0
> 
> 时间：2012-09-08T08:49:52.247
> 
> 标签：php, mysql, phpmyadmin

我正在制作一个脚本，用户可以在其中上传他的宠物的图像。我有这个代码：

```
<?php
    session_start();
    $name = $_SESSION['myusername'];
    $petName = $_POST['picup']; // a pet name picked by a dropdown list

    $con = mysql_connect( "localhost", "lalala", "blabla" );
    mysql_select_db( "lalal_animal", $con );
    if ( @$_POST ['submit'] ) {
      $file = $_FILES ['file'];
      $name1 = $file ['name'];
      $type = $file ['type'];
      $size = $file ['size'];
      $tmppath = $file ['tmp_name'];
      if ( $name1 != "" ) {
        if ( move_uploaded_file( $tmppath, 'upload/' . $name1 ) ) {
          $query = "insert into pics(animalName,username,image) VALUES('$petName','$name','$name1')";
          mysql_query( $query ) or die( 'could not updated:' . mysql_error() );
          echo "Your image upload successfully !!";
        }
      }
    }
    ?>

    <html >
      <head>
        <title>Image Upload</title>
      </head>
      <body>
        <form name="form" action="" method="post" enctype="multipart/form-data">
          Photo <input type="file" name="file" />
          <input type="submit" name="submit" value="submit" /> 
        </form>
      </body>
    </html> 
```

运行此之后，名为：“ **animalName** ”的表列是***空白***的。

当我在 phpmyadmin 中运行这个 SQL 命令时：

```
insert into pics(animalName,username,image) VALUES('Sparky','tester','sparky.jpg') 
```

表格没问题，animalName 列包含正确的值。如果我这样做，则会显示宠物名称：

```
echo $petName; 
```

宠物名称来自另一种形式。用户首先必须选择宠物，然后将他重定向到 uload 表单。 **这是您要求的下拉列表：**

```
<table width="480" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="upload" method="post" action="upload_form.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>Upload image</strong></td>
</tr>
<td>Select a pet</td>
<td>:</td>
<td>

<?php
mysql_connect('localhost', 'blabla', 'lalal');
mysql_select_db('lalala_animal');

$sql = "SELECT name FROM animal where username='$name'";
$result = mysql_query($sql);

echo "<select name='picup'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['name'] . "'>" . $row['name'] . "</option>";
}
echo "</select>";
?>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Upload"></td>
</tr>
</table>
</td>
</form>
</tr>
</table> 
```

我怀疑php代码下面的HTML表单有问题，但我不明白是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:55:41.630

在您的评论中，您提到 $petName 来自表单中的选择。

但是，表单中缺少选择，因此 $petName ($_POST['picup']) 为空。

```
 <html >
      <head>
        <title>Image Upload</title>
      </head>
      <body>
        <select name="picup">
          <option>Sparky</option>
          <option>Lucky</option>
        </select>
        <form name="form" action="" method="post" enctype="multipart/form-data">
          Photo <input type="file" name="file" />
          <input type="submit" name="submit" value="submit" /> 
        </form>
      </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:13:18.417

正如您所说，您`$_POST['picup']`从第一次提交中传递，只需修改您的第二个表单并将`$_POST['picup']`值放在隐藏字段中。像这样修改你的表格..

```
<form name="form" action="" method="post" enctype="multipart/form-data">
      Photo <input type="file" name="file" />
      <input type="hidden" name="picup" value="<?php echo $petName; ?>" /> 
      <input type="submit" name="submit" value="submit" /> 
    </form> 
```

希望这会奏效..

因为当您第二次提交时，您的第一次发布值不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T08:56:27.527

也许您的 animalName 数据类型在 phpmyadmin 中不是 varchar 检查

# .net - Visual Studio 2012 安装程序中的编程语言

> ID：12329372
> 
> 赞同：1
> 
> 时间：2012-09-08T08:50:48.030
> 
> 标签：.net, visual-studio, visual-studio-2012

我在[Visual Studio 博客](http://blogs.msdn.com/b/visualstudio/archive/2012/06/04/setup-improvements-for-visual-studio.aspx?PageIndex=3#comments)中读到，至少在 VS 2012 RC 的设置中，无法选择要安装的编程语言。

我的问题是：VS 2012 安装程序的最终版本是否允许我选择要安装的语言？

我的意思是，如果我不想安装 C++ 或 VB.Net，我可以像在以前的版本中那样做吗？

我只是不想在我不使用的东西上浪费我的 SSD（只有 128 GB）中的空间。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:08:36.337

不，只有选择其他一些功能（Blend、LightSwitch、Silverlight 等）和 VS 界面语言的选项。

微软在这里解释了为什么 [http://blogs.msdn.com/b/visualstudio/archive/2012/06/04/setup-improvements-for-visual-studio.aspx?PageIndex=5#comments](http://blogs.msdn.com/b/visualstudio/archive/2012/06/04/setup-improvements-for-visual-studio.aspx?PageIndex=5#comments)

您可以在此处投票支持将此功能添加到未来版本中 [http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2930718-provide-installation-customization-options-to-excl](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2930718-provide-installation-customization-options-to-excl)

# c# - 当在列表框中选择多个值时获取异常索引超出了 Linq to Entity 中的数组边界

> ID：12329373
> 
> 赞同：0
> 
> 时间：2012-09-08T08:51:03.973
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, linq-to-entities

我在 ListBox 中有多个值。当我选择单个值时，我的代码工作正常。

但是当我选择多个值时，它给了我这个例外：-

**指数数组的边界之外。**

我的代码是：

```
if (submitButton == "Enroll Trainee")
{
    if (Request.Form["NonEnroll"] != null)
    {
        int i = 0;
        string[] selected = Request.Form["NonEnroll"].Split(',');
        if (selected != null)
        {
            if (selected.Count() != 0)
            {
                foreach (var item in selected)
                {
                    enrollDetails.TraineeID = Convert.ToInt32(item[i].ToString());//Getting Exception here
                    enrollDetails.TrainerID = Convert.ToInt32(Session["user"].ToString());
                    enrollDetails.dt = DateTime.Now;
                    db.EnrollTrainee.Add(enrollDetails);
                    db.SaveChanges();
                    i++;
                }

            }
        }
        populatelistbox();
        return View();
    }
} 
```

在第一次迭代期间，它工作正常，并将第一次迭代结果保存在我的数据库中。但是当它开始第二次迭代时，它给了我上述异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:12:47.300

您误用了循环变量，我想您需要：

```
enrollDetails.TraineeID = Convert.ToInt32(item); 
```

让我解释一下为什么您的原始代码`item[i].ToString()`不起作用：

假设您获得了列表`"2,1,3"`，然后使用字符串拆分创建了字符串数组：`new [] { "2", "1", "3" }`

然后在你的循环中

1.  在第一次迭代中

    *   **项目**是`"2"`
    *   **我**是`0`

    所以`item[i]`解决了`"2"[0]`哪个是`"2"`并且它起作用了。

2.  在第二次迭代中

    *   **项目**是`"1"`
    *   **我**是`1`

    并且您的代码解决了`"1"[1]`引发异常的问题，因为`"1"`只有一个字符长，因此索引超出了数组的范围。

# c# - 颜色和字体声明 - stackoverflow 错误

> ID：12329376
> 
> 赞同：0
> 
> 时间：2012-09-08T08:51:20.540
> 
> 标签：c#, winforms, fonts, colors, stack-overflow

我在下面的注释行中得到一个 stackoverflow 异常。

```
namespace Football_Manager_WFA
{    
    public partial class Settings : Form
    {
        Color def_bgdColor = SystemColors.Control;
        Color def_fontColor = Color.Black; // ERROR
        static FontFamily fontFamily = FontFamily.GenericSansSerif;
        Font def_fontType = new Font(fontFamily, 8.0f); // ERROR
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:15:48.117

令人惊讶的是，问题与错误不符。

我在两个地方初始化了设置表单，两次。所以只是删除了其中一个，它现在可以工作了。感谢 Henk 的提示。

# algorithm - 机器学习：监督学习以学习和预测下一个 RSA 代码

> ID：12329383
> 
> 赞同：5
> 
> 时间：2012-09-08T08:52:44.063
> 
> 标签：algorithm, matlab, machine-learning, rsa, octave

我正在学习 Andrew NG 的机器学习课程。我还处于起步阶段。他在课堂上用他的房价预测示例教授监督学习。

在为机器学习程序提供“正确”值的数据集后，是否可以预测接下来将生成的 RSA 令牌？我们可以使用监督学习让程序学习算法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T19:16:02.370

监督学习依赖于利用数据中的规律性。例如，如果根据所需输出绘制数据，则空间中可能存在集群或人口密集的表面。您将在课堂上学习的各种学习算法都是利用一种或另一种结构的方法。如果数据集是随机的并且未连接到所需的输出，则无法进行学习。

RSA 在密码学上非常有用，因为它是一个非随机过程，很难与没有结构的随机过程区分开来。数据中没有明显的规律可利用。

我不愿意阻止你看这个；你永远不知道它会激发什么或你会学到什么。但是在你的位置上，我不希望我成绩的任何部分依赖于成功。我会说，要在任何有意义的意义上取得成功，你几乎必须将学习建立在迄今为止没人想到的特征上。如果您决心尝试这个，我建议您从非常小的素数开始，并且只有当您将任何牵引力毕业到更大的素数时。

可疑的部分原因取决于复杂性论点。如果可以基于合数解决任意 RSA 问题，那么可以在合理的时间内分解该数字，但是认为（但不知道）分解任意合数是 NP 困难的，尽管不是 NP 完全的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T09:19:09.213

它行不通。

RSA 令牌从种子创建一个伪随机数字序列。

理论上，如果你有无限的资源，那么你可以训练一个算法足够长的时间，让它“学习”整个伪随机数序列。然后您可以从一组先前的值中预测序列（甚至可能推断出种子）。

在实践中，这种方法肯定会失败，因为：

*   训练时间太长，无法实现。
*   所需解决方案的大小（例如神经网络中的参数数量）将太大而无法实现。

通过“太大”和“太长”，您应该理解“比宇宙中任何人都能够实现的更长/更大”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T09:04:13.663

使用此方法，您不会获得统计上显着的成功率。令牌内部的数学禁止此类事情。

例如，可以使用[哈希链。](http://en.wikipedia.org/wiki/Hash_chain)

# java - 设置程序中媒体文件位置的路径

> ID：12329384
> 
> 赞同：1
> 
> 时间：2012-09-08T08:52:55.737
> 
> 标签：java, swing, embedded-resource

> **可能重复：**
> [获取应用程序的路径](https://stackoverflow.com/questions/218061/get-the-applications-path)

我在 Netbeans 中制作了一个 Java Swing 桌面应用程序，它可以播放媒体文件我已将视频放在我的工作区资源位置，在我的 java 程序中，我使用如下所示的 URL 调用这些媒体文件：

```
C:/users/Dell/My Documents/NetBeansProjects/Media/src/resources/MediaFiles/ddd.mpg 
```

当我在我的 IDE 中运行时，这很好用，而且我为此制作了 Jar，它在我的计算机上运行良好，但问题是当我将这个 jar 文件复制到我的朋友系统上时，界面即将到来，但是当我单击按钮播放媒体文件它说该文件不存在。

因此，请为我提供如何设置**默认路径**的解决方案，以便当我在其他系统上运行 jar 文件时，它应该像在我的程序中一样播放我传递的媒体文件位置。

如何在程序中设置媒体文件位置的路径？

### 更新

视频在 jar 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:27:54.473

如果视频在 jar 文件中，则它们实际上是[嵌入式资源](/questions/tagged/embedded-resource "显示标记为“嵌入式资源”的问题")

请注意，上述 URL 中的字符串更容易让人联想到`File`实例的路径，而不是基于文件的 URL 或 URI。

查阅[嵌入式资源信息。](https://stackoverflow.com/tags/embedded-resource/info)有关使用`getResource(String)`获取嵌入式资源 URL的详细信息的[页面。](https://stackoverflow.com/tags/embedded-resource/info)

### 用罐子包装视频

最好将视频或声音样本等资源放入单独的 Jar 到类中，因为这样可以更简单地为媒体资源指定“不压缩”。除了使“压缩”资源*大几个字节之外，Zip 样式压缩通常对媒体类型没有任何作用。*

### 从 Jar 中提取资源

如果有任何需要提取资源并将它们放在已知位置（例如使用 播放的视频`Desktop.open(File)`），请参阅[此答案](https://stackoverflow.com/a/5052359/418556)以获取提取它们的策略。“已知位置”是 的子目录`user.home`。

# asp.net - WCF 说它超出了最大查询字符串值，而实际上没有

> ID：12329385
> 
> 赞同：3
> 
> 时间：2012-09-08T08:53:04.503
> 
> 标签：asp.net, wcf, .net-4.0, webhttpbinding, iis-8

我有一个`webHttpBinding`使用 ASP.NET 4/IIS 8的 WCF 服务（通过`GET`. 但是，今天我需要实现一个发送大查询字符串的方法（大约 3000 个字符，没有那么长，但比我一直使用的要长）。我调用了该服务并立即收到 404 错误，甚至没有在我的调试机器上进入我的代码。我首先想到的是最大查询字符串长度限制。我已将此添加到我的 web.config 中：

```
 <system.webServer>
    <directoryBrowse enabled="true" />
    <security>
      <requestFiltering>
        <requestLimits maxQueryString="8000"></requestLimits>
      </requestFiltering>
    </security>
  </system.webServer> 
```

现在，当我调用该服务时，我收到了这个服务器错误：`The length of the query string for this request exceeds the configured maxQueryStringLength value.`很奇怪，我已经尝试了其他值，例如`200000`, 超过我的查询字符串和 URL，大约 3000 个字符。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:46:32.907

也许设置`maxQueryStringLength`在[httpRuntime 元素](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.100).aspx)中。

有两个配置设置有点混乱，但我相信它们可以解释如下：

*   maxQueryStringLength`httpRuntime`属性是 ASP.NET 4 的新属性，用于配置 ASP.NET HTTP 运行时可以处理的最大查询字符串长度。在 ASP.NET 4 之前，这是 2048 的固定值；现在可以增加了。

*   maxQueryStringLength`system.web/security/requestFiltering`属性是 IIS 7 设置，允许管理员限制最大查询字符串长度。此设置并非特定于 ASP.NET。

# c++ - 使用 ASIO 的 ThreadPool - 线程退出，未执行任务

> ID：12329386
> 
> 赞同：4
> 
> 时间：2012-09-08T08:53:50.133
> 
> 标签：c++, multithreading, boost, boost-asio

我正在使用 Boost ASIO 在 C++ 中编写一个 ThreadPool 类。以下是我到目前为止编写的代码：

**线程池类**

```
 using namespace std;
    using namespace boost;

    class ThreadPoolClass {
    private:

        /* The limit to the maximum number of threads to be
         * instantiated within this pool 
         */
        int maxThreads; 
        /* Group of threads in the Pool */
        thread_group threadPool;

        asio::io_service asyncIOService;

        void _Init()
        {
            maxThreads = 0;
        }
    public:
        ThreadPoolClass();
        ThreadPoolClass(int maxNumThreads);
        ThreadPoolClass(const ThreadPoolClass& orig);
        void CreateThreadPool();
        void RunTask(JobClass * aJob);
        virtual ~ThreadPoolClass();

    };
    ThreadPoolClass::ThreadPoolClass() {
    _Init();
    }

ThreadPoolClass::ThreadPoolClass(int maxNumThreads) {
    _Init();
    maxThreads = maxNumThreads;
}

void ThreadPoolClass::CreateThreadPool() {

    asio::io_service::work work(asyncIOService);

    for (int i = 0; i < maxThreads; i++) {
        cout<<"Pushed"<<endl;
        threadPool.create_thread(bind(&asio::io_service::run, &asyncIOService));
    }
}

void ThreadPoolClass::RunTask(JobClass * aJob) {
    cout<<"RunTask"<<endl;
    asyncIOService.post(bind(&JobClass::Run,aJob));
}

ThreadPoolClass::ThreadPoolClass(const ThreadPoolClass& orig) {
}

ThreadPoolClass::~ThreadPoolClass() {
    cout<<"Kill ye all"<<endl;
    asyncIOService.stop();
    threadPool.join_all();
} 
```

**工作类**

```
using namespace std;

class JobClass {
private:
    int a;
    int b;
    int c;

public:

    JobClass() {
        //Empty Constructor
    }

    JobClass(int val) {
        a = val;
        b = val - 1;
        c = val + 1;
    }

    void Run()
    {
        cout<<"a: "<<a<<endl;
        cout<<"b: "<<b<<endl;
        cout<<"c: "<<c<<endl;
    }

}; 
```

**主要的**

```
using namespace std;

int main(int argc, char** argv) {

    ThreadPoolClass ccThrPool(20);
    ccThrPool.CreateThreadPool();
    JobClass ccJob(10);
    cout << "Starting..." << endl;
    while(1)
    {
        ccThrPool.RunTask(&ccJob);
    }
    return 0;
} 
```

所以，基本上我正在创建 20 个线程，但到目前为止，我只发布了一个（相同的）任务来由 ioservice 运行（只是为了在这里保持简单并找到根本原因）。以下是我在 GDB 中运行此程序时的输出：

```
Pushed
[New Thread 0xb7cd2b40 (LWP 15809)]
Pushed
[New Thread 0xb74d1b40 (LWP 15810)]
Pushed
[New Thread 0xb68ffb40 (LWP 15811)]
Pushed
[New Thread 0xb60feb40 (LWP 15812)]
Pushed
[New Thread 0xb56fdb40 (LWP 15813)]
Pushed
[New Thread 0xb4efcb40 (LWP 15814)]
Pushed
[New Thread 0xb44ffb40 (LWP 15815)]
Pushed
[New Thread 0xb3affb40 (LWP 15816)]
Pushed
[New Thread 0xb30ffb40 (LWP 15817)]
Pushed
[New Thread 0xb28feb40 (LWP 15818)]
Pushed
[New Thread 0xb20fdb40 (LWP 15819)]
Pushed
[New Thread 0xb18fcb40 (LWP 15820)]
Pushed
[New Thread 0xb10fbb40 (LWP 15821)]
Pushed
[New Thread 0xb08fab40 (LWP 15822)]
Pushed
[New Thread 0xb00f9b40 (LWP 15823)]
Pushed
[New Thread 0xaf8f8b40 (LWP 15824)]
Pushed
[New Thread 0xaf0f7b40 (LWP 15825)]
Pushed
[New Thread 0xae8f6b40 (LWP 15826)]
Pushed
[New Thread 0xae0f5b40 (LWP 15827)]
Pushed
[New Thread 0xad8f4b40 (LWP 15828)]
Starting...
RunTask
Kill ye all
[Thread 0xb4efcb40 (LWP 15814) exited]
[Thread 0xb30ffb40 (LWP 15817) exited]
[Thread 0xaf8f8b40 (LWP 15824) exited]
[Thread 0xae8f6b40 (LWP 15826) exited]
[Thread 0xae0f5b40 (LWP 15827) exited]
[Thread 0xaf0f7b40 (LWP 15825) exited]
[Thread 0xb56fdb40 (LWP 15813) exited]
[Thread 0xb18fcb40 (LWP 15820) exited]
[Thread 0xb10fbb40 (LWP 15821) exited]
[Thread 0xb20fdb40 (LWP 15819) exited]
[Thread 0xad8f4b40 (LWP 15828) exited]
[Thread 0xb3affb40 (LWP 15816) exited]
[Thread 0xb7cd2b40 (LWP 15809) exited]
[Thread 0xb60feb40 (LWP 15812) exited]
[Thread 0xb08fab40 (LWP 15822) exited]
[Thread 0xb68ffb40 (LWP 15811) exited]
[Thread 0xb74d1b40 (LWP 15810) exited]
[Thread 0xb28feb40 (LWP 15818) exited]
[Thread 0xb00f9b40 (LWP 15823) exited]
[Thread 0xb44ffb40 (LWP 15815) exited]
[Inferior 1 (process 15808) exited normally] 
```

我有两个问题：

1.  为什么我的线程正在退出，即使我在 while 循环中发布任务？
2.  为什么 JobClass 的输出，即变量 a、b 和 c 的值没有被打印出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T11:43:08.857

我认为发生这种情况是因为您在 CreateThreadPool 方法中创建了工作对象，该方法在超出范围时会自动销毁-> 在这种情况下 io_service 没有活动的工作并且不处理您的任务。

尝试使您的 ThreadPool 类的“工作”实例变量，而不是方法中的本地变量。

```
class ThreadPoolClass {
private:

    thread_group threadPool;

    asio::io_service asyncIOService;

    std::auto_ptr<asio::io_service::work> work_;

public:
};

ThreadPoolClass::ThreadPoolClass(int maxNumThreads) {
    _Init();
    maxThreads = maxNumThreads;
}

void ThreadPoolClass::CreateThreadPool() {

    work_.reset(new asio::io_service::work(asyncIOService));

    for (int i = 0; i < maxThreads; i++) {
        cout<<"Pushed"<<endl;
        threadPool.create_thread(bind(&asio::io_service::run, &asyncIOService));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:21:35.367

好的，我将是第一个承认我不知道提升的人，更具体地说，从地面上的一个洞中提升::asio，但我知道很多关于线程池和工作人员的知识。

线程应该休眠，直到收到新工作的通知，但如果它们未配置为这样做，它们可能只会完成其线程 proc 并退出，这是这种情况的一个明显迹象是启动一个池，休眠在发布任何工作之前有一段合理的时间，如果池线程全部终止，则它们没有正确等待。快速阅读 boost docs 得到了[这个](http://www.boost.org/doc/libs/1_46_0/doc/html/boost_asio/reference/io_service.html#boost_asio.reference.io_service.stopping_the_io_service_from_running_out_of_work)结果，它可能与您的问题有关。

关于这一点，是否有可能从 main() 入口点对池的析构函数实际上过早地杀死了您的工作人员？我看到了 join_all，但是那个 stop() 给了我威力。如果它做到了它的名字所暗示的那样，那将解释很多。根据文档中对该 stop() 调用的描述：

> 为了实现关闭，应用程序需要调用 io_service 对象的 stop() 成员函数。这将导致 io_service run() 调用尽快返回，放弃未完成的操作并且不允许调度准备好的处理程序。

立即关闭和放弃提及似乎对您当前的情况非常熟悉。

同样，我不知道来自 Adam 的 boost:asio，但是如果我这样做，我会检查 boost 线程对象的启动配置。他们可能需要配置如何启动、如何等待等。在网络上必须有大量使用 boost:asio 的示例，这些示例涉及配置您在此处描述的内容，即工作组范式。我在 SO 上看到 boost::asio 一个 TON，因此可能还有许多相关或接近相关的问题。

如果它没有任何用处，请随时降级，如果是这种情况，我深表歉意。

# c# - 在 C# 中使用 foreach 获取属性

> ID：12329387
> 
> 赞同：3
> 
> 时间：2012-09-08T08:54:02.037
> 
> 标签：c#

我定义了一个这样的属性：

```
public IMAGE_DOS_HEADER  ImageDosHeader 
        {

            get
            {
                return imageDosHeader; 
            }
        } 
```

其中 IMAGE_DOS_HEADER 是这样的结构

```
public struct IMAGE_DOS_HEADER
        {      // DOS .EXE header
            public UInt16 e_magic;              // Magic number
            public UInt16 e_cblp;               // Bytes on last page of file
            public UInt16 e_cp;                 // Pages in file
            public UInt16 e_crlc;               // Relocations
            public UInt16 e_cparhdr;            // Size of header in paragraphs
            public UInt16 e_minalloc;           // Minimum extra paragraphs needed
         } 
```

最后我想在主程序中使用这个属性，像这样使用 foreach

```
foreach (var DosHeader in reader.ImageDosHeader)
       {
           listView2.Items[i].SubItems.Add(DosHeader.ToString("X"));
           i++;
       } 
```

但发生编译错误：“错误 1 ​​foreach 语句无法对 'PEfileReader.PeHeaderReader.IMAGE_DOS_HEADER' 类型的变量进行操作，因为 'PEfileReader.PeHeaderReader.IMAGE_DOS_HEADER' 不包含 'GetEnumerator' 的公共定义”

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T08:59:56.447

要获取结构的字段，您应该使用反射

```
IMAGE_DOS_HEADER header = new IMAGE_DOS_HEADER() { e_cblp = 1, e_cp = 2, e_cparhdr = 3, e_crlc = 4, e_magic = 5, e_minalloc = 6 };

var fieldsAndValues = 
        typeof(IMAGE_DOS_HEADER)
        .GetFields()
        .Select(f=>new {
            Name= f.Name,  //<== Name of the field
            Value = f.GetValue(header) //<==Value of the field
        })
        .ToList(); 
```

然后您可以将值插入列表视图

```
foreach (var item in fieldsAndValues)
{
    listView2.Items[i].SubItems.Add(item.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T08:56:27.307

尝试`IEnumerable`使用您的 struct IMAGE_DOS_HEADER 实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T09:04:04.787

将您的 IMAGE_DOS_HEADER 结构修改为以下内容：

```
 public struct IMAGE_DOS_HEADER : IEnumerable<UInt16>
    {      // DOS .EXE header
        public UInt16 e_magic;              // Magic number
        public UInt16 e_cblp;               // Bytes on last page of file
        public UInt16 e_cp;                 // Pages in file
        public UInt16 e_crlc;               // Relocations
        public UInt16 e_cparhdr;            // Size of header in paragraphs
        public UInt16 e_minalloc;           // Minimum extra paragraphs needed

        public IEnumerator<UInt16> GetEnumerator()
        {
            return (IEnumerator<UInt16>)(new[] {e_magic, e_cblp, e_cp, e_crlc, e_cparhdr, e_minalloc}.GetEnumerator());
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return new[] { e_magic, e_cblp, e_cp, e_crlc, e_cparhdr, e_minalloc }.GetEnumerator();
        }
    } 
```

# jackson - 将 XSD 转换为 JSON

> ID：12329392
> 
> 赞同：3
> 
> 时间：2012-09-08T08:54:16.157
> 
> 标签：jackson

我有一个要求，比如我有一个 XSD 或 XML 文件，并且我使用 XJC（编译器）从 XSD 或 XML 生成了 POJO。我的 XML 文件有一个数据，例如 Person 是根元素，他有地址列表。因此，当我生成 POJO 时，我可以从该 POJO 中获取列表地址。

现在我的要求是生成 POJO，所以当我调用 getAddresses() 时，我想要一个 JSON 字符串而不是字符串列表。可能吗 ......？？？？？？

我的一位朋友说杰克逊注释是可能的。但是我该如何开始呢..？

如果可能的话，任何人都可以提供一些示例代码片段或指出我正确的方向。

# c# - 收藏已修改；枚举操作可能无法执行。例外

> ID：12329395
> 
> 赞同：1
> 
> 时间：2012-09-08T08:54:33.720
> 
> 标签：c#, entity-framework, exception

这段代码给了我和异常

**收藏已修改；枚举操作可能无法执行**

我使用实体框架来处理数据

```
 foreach (OfflineMessage omc in _offMsgs)
            {

                var OimDB = new OimDBEntities();

                if (omc.MsgTo == e.MessageData.ToHeader.Uri)
                {
                    var offlineMessage = new OfflineMessage
                    {
                        Delivered = false,
                        MsgContent = omc.MsgContent,
                        MsgFrom = omc.MsgFrom,
                        MsgTime = omc.MsgTime,
                        MsgTo = omc.MsgTo,
                        ID = OimDB.OfflineMessages.NextId(f => f.ID)

                    };

                    oimRepository.InsertOIM(offlineMessage);

                    //InsertData(omc.MsgFrom, omc.MsgTo, omc.MsgContent, omc.MsgTime);
                }
            }
            _toHeader = e.MessageData.ToHeader.Uri;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T08:58:50.660

```
foreach (OfflineMessage omc in _offMsgs)
                {
                    if (omc.MsgTo == _toHeader)
                    {
                        _offMsgs.Remove(omc);
                    }
                } 
```

您正在从集合中删除元素，同时对其进行迭代。你不能这样做。与其删除，不如将它们添加到临时列表中，然后在 foreach 循环之后，删除您的项目。

# c# - 逐行读取文本文件以在 XNA 中制作地图

> ID：12329397
> 
> 赞同：0
> 
> 时间：2012-09-08T08:54:51.753
> 
> 标签：c#, xna-4.0

我想读取一个文本文件以构建地图。

例如我有这张地图：

```
0@0000000
0@0000000
0@0000000
000000000
000000000
000000000
000000000 
```

我知道我应该使用这个：

```
StreamReader reader = new StreamReader(Application.StartupPath+@"/TestMap.MMAP");
string line = reader.ReadToEnd();
reader.Close(); 
```

现在，例如，我想读取第 2 行字符“@”。我怎样才能做到这一点？

请帮我。

* * *

**解决了：**

谢谢（@LB AND @user861114），我的问题终于解决了：

```
string[,] item = new string[9, 7];
string[] line = File.ReadAllLines(Application.StartupPath + @"/TestMap.MMAP");
for (int j = 0; j < 7; j++)
{
    for (int i = 0; i < 9; i++)
    {
        item[i, j] = line[j].Substring(i, 1);
        Console.WriteLine(i + " " + j + "=" + item[i, j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:06:13.770

我认为这有点容易：

```
string[] strs = string.split(myString, "\n"); // split to array of string by delimiter     endline
char[] chars = strs[1].ToCharArray(); // you can get second char "@" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:11:24.163

```
string[] lines = File.ReadAllLines(your path); 
```

然后你可以访问

```
char ch = lines[1][1]; //second line's second char 
```

# c++ - 检测 windows jpeg 图标

> ID：12329399
> 
> 赞同：1
> 
> 时间：2012-09-08T08:55:25.030
> 
> 标签：c++, windows, visual-studio, visual-c++

如何根据 Windows 操作系统版本 (XP,,vista,7) 检测 windows 正在使用的 jpeg 图片图标？通过检测我的意思是找到它的位置并能够使用图标文件。c++ 请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T09:01:48.410

我想你会在这里找到解决问题的方法：

[http://www.codeproject.com/Articles/29137/Get-Registered-File-Types-and-Their-Associated-Ico](http://www.codeproject.com/Articles/29137/Get-Registered-File-Types-and-Their-Associated-Ico)

# jquery - 使用不正确的凭据登录时，Jquery Mobile Rails 和设计错误加载页面

> ID：12329406
> 
> 赞同：3
> 
> 时间：2012-09-08T08:55:58.187
> 
> 标签：jquery, ruby-on-rails-3, mobile, devise

我掌握了 Rails 3 的窍门，并制作了几个工作应用程序。我不熟悉在 rails 中使用 javascript 或 jquery。我有一个使用 rails 3.2、devise 和 cancan 的工作应用程序。然后我将其转换为使用 Jquery Mobile。整个应用程序都在使用它，我没有区分桌面和移动。

**问题：**

总的来说，除了一些小事情外，一切都很好。一个是我可以使用正确的凭据成功登录，一旦登录，flash 将显示我已登录。如果我使用不正确的凭据登录，它只会显示一个`Error loading page`（没有像正常说的那样的 flash 消息`Invalid email or password`）。据我所知，所有其他 Flash 消息都正确显示（由 JQM 格式化为黄色）。

**到目前为止我做了什么：**

搜索高低搜索类似的问题，但没有快乐（最相似的是重定向或页面未找到错误）。在 Firebug 中显示`401 Unauthorized - Response - Invalid email or password`.

我已经注释掉了所有 cancan 的东西（它在没有 JQM 的情况下都可以工作） - 这没有区别 - 并不是它正在重定向到没有权限等的其他地方。

我不太熟悉 javascript/ajax 如何改变正常的 rails 行为，但任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T02:18:05.197

# 简答

解决此问题的最快方法是将`rails g devise:views`要设计的视图复制到您的项目中，以便您可以编辑它们。然后，您需要将以下内容添加到会话控制器模板中紧随其后的`form_for`行`:url`中：`new.html`

```
:html => {:data => {:ajax => 'false'}} 
```

这将告诉 jQuery Mobile 这个表单不应该被劫持并被制作成一个 ajax 请求。

# 原因

jQuery Mobile 会劫持所有的表单和链接，将它们转化为 ajax 请求。除非您`respond_to`在控制器中设置块，否则 Rails 仍会渲染您设置的任何模板。这通常不是问题，因为 jQM 只是解析出必要的页面 div。但是，Devise 的控制器*会*根据请求做出不同的响应，并且您会收到 jQM 不知道如何处理的 ajax 响应。这就是为什么上面最简单的解决方案是让 jQM 不将登录表单转换为 ajax 请求。其他潜在的解决方案包括修改会话控制器或添加代码作为默认的 ajax 成功处理程序以检查非状态 200 返回响应并适当地处理它们。

# java - Eclipse 和 Cassandra

> ID：12329411
> 
> 赞同：1
> 
> 时间：2012-09-08T08:56:47.277
> 
> 标签：java, eclipse, cassandra, git-bash

我搜索了各种网站以获取有关如何链接“Cassandra”和“Eclipse”的说明，并按照说明在几个网站中找到了最后一个细节。出于某种原因，在使用 Git Bash 时，我无法通过网络上上述位置的指令完成“ant build”。

在某些地方很容易，只要确保你有；1\. Apache Cassandra 源码 2\. Apache Ant 3\. Git

所以，是的，我已经下载了以上所有内容，尝试了相同的目录，不同的目录等，尽管仍然无法通过“ant build”的中间步骤。

这里有几个网站，我用来为两个实用程序“Eclipse”和“Cassandra”设置 Src 代码。

[http://uisurumadushanka89.blogspot.com/2012/02/apache-cassandra-how-to-setup-source.html](http://uisurumadushanka89.blogspot.com/2012/02/apache-cassandra-how-to-setup-source.html)
和
[http://wiki.apache.org/cassandra/RunningCassandraInEclipse](http://wiki.apache.org/cassandra/RunningCassandraInEclipse)

两者都导致“蚂蚁构建”立即停止。

任何见解都是信息，非常感谢。

谢谢你，瑞恩

![错误截图](../Images/24844a16563aedb5518e02b41f36b305.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:54:29.050

蚂蚁不在你的路上。尝试使用安装位置的绝对路径运行它，例如：

```
cd /C/CassandraSRC/cassandra
/C/install/path/ant build 
```

# c# - 尝试将 VarChar 数据类型转换为数值类型时如何解决我的错误？

> ID：12329417
> 
> 赞同：0
> 
> 时间：2012-09-08T08:57:32.860
> 
> 标签：c#, .net

在这条线上`date=(int) datamanager.ExecuteScalar(CommandType.Text, Query);`，我收到一条错误消息：

> 将数据类型 varchar 转换为数字时出错。

在`GETEDITDATE`查询中，我试图检索类型为 的数据`varchar`。我该如何解决这个问题？

**代码：**

```
public string returneditdate(string receiptid, string ConString) {
    string Query = string.Empty;
    int date = 0;
    string dat = string.Empty;
    DataManager datamanager = null;
    try {
        datamanager = Supporter.GetDataManager();
        datamanager.ConnectionString = ConString;
        datamanager.Open();
        Query = DataSourceSQLConstants.GETEDITDATE.Replace("@fldreceiptid", receiptid.ToString());
        date = (int) datamanager.ExecuteScalar(CommandType.Text, Query);
        dat = date.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:09:43.577

如果它是 varchar 数据类型，则它是文本。您需要使用`int.Parse`方法将其转换为整数。

# c# - 有没有办法检查鼠标何时高于标准窗口控制按钮（关闭、最小化等）？

> ID：12329421
> 
> 赞同：1
> 
> 时间：2012-09-08T08:58:27.853
> 
> 标签：c#, winforms

当鼠标位于标准窗口控件之一（关闭、最小化、最大化）上方时，我想运行一种方法。我怎么做？

![我在说这些](../Images/26726d2f15dd49b0eebb64f66865df49.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T11:44:02.567

你可以使用这个：

```
internal const int WM_NCMOUSEMOVE = 0x00A0;

protected override void WndProc(ref Message m)
{
    if (m.Msg == WM_NCMOUSEMOVE)
    {
        if ((int)m.WParam == 0x8)
            Console.WriteLine("Mouse over on Minimize button");

        if ((int)m.WParam == 0x9)
            Console.WriteLine("Mouse over on Maximize button");

        if ((int)m.WParam == 0x14)
            Console.WriteLine("Mouse over on Close button");
    }

    base.WndProc(ref m);
} 
```

只需将其放入表单的代码中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:04:16.663

是的，当触发 MouseHover 事件时，您可以使用工具提示来控制按钮。

VB代码...

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As
System.EventArgs) Handles Button1.MouseHover
ToolTip1.SetToolTip(Button1, "sometext")
End Sub 
```

这是更多信息。希望能帮助到你。 [http://bytes.com/topic/visual-basic-net/answers/683286-hover-text-command-buttons](http://bytes.com/topic/visual-basic-net/answers/683286-hover-text-command-buttons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T09:16:30.010

您也可以使用此自定义用户控件。检查这是否适合您。 [http://www.codeproject.com/Articles/42223/Easy-Customize-Title-Bar](http://www.codeproject.com/Articles/42223/Easy-Customize-Title-Bar)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-08T09:00:23.873

如果您没有太多控件，请将事件处理程序添加到控件的鼠标悬停事件中。

# html - 使用 CSS 设置的背景颜色不覆盖列表的最后一个元素

> ID：12329422
> 
> 赞同：0
> 
> 时间：2012-09-08T08:58:36.147
> 
> 标签：html, css

我正在设计一个网页，其中有一个导航栏，我将导航元素的背景保持为深蓝色。但是，它一直缺少我的导航列表中的最后一个元素，并且不会使其颜色变为蓝色。

![图像看起来像这样：](../Images/64690639e5af095d95d2d27ce6e01a90.png)

这是html代码：

```
<div id="content_block">
<div id="nav_bar">
<ul style="margin:0px; padding:10px 0px;" >
<li ><a  href="x.html#C1">PATENTS</a></li>
<li ><a  href="x.html#C2"><span style="position:relative;left:9px;">TRADEMARKS</span></a></li>
<li ><a  href="x.html#C3"><span style="position:relative;left:18px;">IP LAW &amp; POLICY </span></a></li>
<li ><a  href="x.html#C4"><span style="position:relative;left:27px;">PRODUCTS &amp; SERVICES</span></a></li>
<li ><a  href="x.html#C5"><span style="position:relative;left:36px;">INVENTORS</span></a></li>
<li ><a  href="x.html#C6"><span style="position:relative;left:45px;">NEWS &amp; NOTICES</span></a></li>
<li ><a  href="x.html#C7"><span style="position:relative;left:54px;">FAQs</span></a></li>
<li></li>
</ul>
</div>
</div> 
```

这是我的 CSS 代码

```
#content_block{
background-color:#FFFFFF;
margin:10px 0px
border:2px;
padding:10px 0px;
height:400px;
width:1024px;
}

#text{
max-height:400px;
max-width:900px;
margin:10px;
padding:5px}

#nav_bar{
margin:0px;
border:0px;
position:relative;
width:1024px;
}

ul
{
list-style-type:none;
margin:0;
padding:0;
padding-top:6px;
padding-bottom:6px;
}

li
{display:inline;
float:left;
background-color:#2E40AC;
color:#BAD2FF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:11:27.977

这是因为您已经为`li`元素设置了背景颜色，但是在元素内部的文本本身`span`是相对定位的，并且被它的`left`属性推到了`li`元素背景颜色范围之外。

而不是玩，`position:relative`你应该使用或属性`left:value`来实现同样的事情。`margin``padding`

删除后，`span`将`padding:0px 10px;`属性添加到`li`元素。

# android - 以编程方式配置小部件面

> ID：12329425
> 
> 赞同：0
> 
> 时间：2012-09-08T08:58:40.847
> 
> 标签：android, configuration, interface, widget

如何以编程方式配置小部件面？我创建了小部件：

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_margin="2dip"
    android:background="@drawable/widget"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="3dip"
        android:layout_marginRight="3dip"
        android:layout_marginTop="3dip"
        tools:ignore="UseCompoundDrawables" >

        <TextView
            android:id="@+id/widget_title"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/app_name"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ImageView
            android:id="@+id/edit_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dip"
            android:contentDescription="@string/edit"
            android:src="@drawable/widget_edit" />
    </LinearLayout>

    <TextView
        android:id="@+id/widget_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="4dip" />

</LinearLayout> 
```

形状（@drawable/widget）：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <stroke
        android:width="1dp"
        android:color="#FFFFFFFF" />

    <solid android:color="#00000000"/>

    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />

</shape> 
```

我需要在配置活动中为 TextViews 设置背景颜色、背景透明度、边框颜色和字体大小/颜色。但是如何获取 TextView 对象以及如何访问形状属性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:35:05.290

与普通活动不同，在小部件中，您不能直接实例化 a `TextView`with `findViewById`。

您将需要实例化一个`RemoteViews`对象，将您的包名称作为参数传递：

```
RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.my_widget); 
```

然后以原来的函数作为参数影响对象的`TextView`使用方法：`setInt``remoteViews``TextView`

```
remoteViews.setInt(R.id.widget_title, "setBackgroundResource", android.R.color.white); 
```

最后，更新 Widget：

```
ComponentName thisWidget = new ComponentName(context, Widget.class);
AppWidgetManager manager = AppWidgetManager.getInstance(context);
manager.updateAppWidget(thisWidget, remoteViews); 
```

您可以使用该方法尝试其他组合 `public void setInt (int viewId, String methodName, int value)`并将原始`methodName`作为参数传递，但由于某种原因，Widget 上下文中并非所有内容都允许。试试看！

# jquery - 无法弄清楚从 Django 模型到 AWS S3 的 Ajax 图像上传

> ID：12329426
> 
> 赞同：1
> 
> 时间：2012-09-08T08:58:42.370
> 
> 标签：jquery, ajax, django, amazon-s3, boto

我正在使用 AWS S3 为我的用户配置文件图像存储图像，并且需要使用 AJAX 在数据库中设置图像 URL。我正确设置了 django-storage / Boto，因此我的媒体 url 是我的 S3 帐户，所以这不是问题。我已经对此进行了测试，并且可以正常工作。

我一直在努力实现这个：[https](https://github.com/sigurdga/django-jquery-file-upload) ://github.com/sigurdga/django-jquery-file-upload虽然我可以让它作为一个独立的应用程序进行测试，但我很难定制它适合我的模型和应用程序视图。

我的问题如下：

1.  是否有一个简单的、精简的 django-jquery-file-upload 版本，它只有功能/非 ui 元素，或者关于如何实现/自定义它的更好的文档？
2.  有没有更好的方法在 Django 中进行简单的 JQuery / Ajax / ImageUpload 调用？我找到了很多教程，但对于我的简单需求来说，它们似乎都过大了。

这是我的 UserProfile 模型的概述：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User) 
    user_image = file = models.FileField(upload_to="/profile_images", default="/assets/img/default-user-image.png", blank=True)

    def __unicode__(self):
        return self.user.username 
```

如果问题太复杂，那么此时即使是对需要完成的工作的概述也将是非常好的。仍然试图围绕这一切。

谢谢你的帮助！

# android - 如何判断两个主题是否相等？

> ID：12329427
> 
> 赞同：3
> 
> 时间：2012-09-08T08:58:43.560
> 
> 标签：android

我想要一些关于我的代码的一部分的逻辑，可以判断我是否正在使用某个主题。我希望能够判断当前主题是否等于带有`parent="Theme.Sherlock.NoActionBar"`.

我想知道最有效的方法是什么，因为我想不出一个简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:11:39.847

您可以使用以下代码获取主题的名称，然后将其与要检查的主题进行比较。

```
public String returnThemeName()
{
    PackageInfo packageInfo;
    try
    {
        packageInfo = getPackageManager().getPackageInfo(getPackageName(), PackageManager.GET_META_DATA);
        int themeResId = packageInfo.applicationInfo.theme;
        return getResources().getResourceEntryName(themeResId);
    }
    catch (NameNotFoundException e)
    {
        return null;
    }
} 
```

# php - php长度或计数字符串

> ID：12329431
> 
> 赞同：0
> 
> 时间：2012-09-08T08:59:33.893
> 
> 标签：php

我正在对一些文本进行排序，我想计算某个单词出现的次数。

文本部分喜欢

> 我不**知道**，你有**想法**，我们会制定一些 **想法**，我不**知道**，你有一些**想法**，我们会制定一些**想法**，我不**知道**，你有**想法**，我们会制定一些**想法**

我如何使用 php 来计算“想法”出现的次数，比如“想法”一词出现**9** 我对计数和长度感到困惑。

有人可以举个例子吗？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:02:31.783

试试下面的脚本。[str_word_count()](http://php.net/manual/en/function.str-word-count.php)将句子拆分为单词数组，[array_count_values()](http://php.net/manual/en/function.array-count-values.php)将分配每个单词出现的次数。

```
$words = str_word_count($text, 1); 
$times = array_count_values($words);
echo $times['idea']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:02:09.883

Substr_count 是你的朋友。[http://php.net/manual/en/function.substr-count.php](http://php.net/manual/en/function.substr-count.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T09:12:00.727

使用类似搜索突出显示方法（修改为按您的方式工作）

```
<?php 
$s = 'idea';
$text = "I have no idea, you got some idea, we will work out some idea, I have no idea, you got some idea, we will work out some idea, I have no idea,you got some idea, we will work out some idea";
$keys = explode(" ",$s);
$count = preg_match_all('/('. implode('|', $keys) .')/iu', $text);
echo $count;
?> 
```

与 substr_count 函数相比，这会将 'ideaidea' 计为两个。

# .net - 使用类型提供程序而不是 t4 有什么好处吗？

> ID：12329433
> 
> 赞同：2
> 
> 时间：2012-09-08T08:59:49.040
> 
> 标签：.net, f#, t4, type-providers

据我所知，这两种工具都用于代码生成。使用 t4 生成的库可以在任何地方使用，而类型提供程序只能用于 F#，那么有什么意义呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T15:46:57.967

T4 是严格的代码生成，而 F# 支持两种代码生成。和[擦除类型](http://msdn.microsoft.com/en-us/library/hh361034.aspx#BK_Erased)，后者是 F# 类型提供程序独有的功能。

此外，根据我的经验，T4 相当笨重。在过去一年左右的时间里，我在 C# 项目中使用了其中的一些，虽然非常有用，但我遇到了很多关于源代码控制和构建集成的问题。老实说，我对 F# 类型提供程序的经验并不多，但据我所见，即使对于代码生成，它也比 T4 更干净。场景（特别是关于构建集成）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T15:22:36.357

正如@pad 所说，*可以*从 C# 使用 F# 类型提供程序（取决于您如何实现类型提供程序）。

IMO，类型提供程序相对于 T4 的主要好处是它们作为 .NET 程序集分发，这使得在多个项目中使用它们变得更加容易/简单。AFAIK，T4 要求您将宏文件复制（或以其他方式包含）到您想要使用它们的每个项目中。（虽然我使用 T4 已经有几年了，所以这可能已经改变了。）

总的来说，我认为 Type Providers 和 T4 之间的功能有很大的重叠；所以是的，如果您愿意，您可以使用 T4 复制大部分类型提供程序功能。然而，你做的函数式编程越多，你就会越多地了解模块化——恰到好处——是使函数式语言比它们的命令式兄弟更有生产力的原因；出于同样的原因，类型提供程序的构造方式以及它们与 F# 编译器的集成方式使它们**在实践中**比 T4 宏更好用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T16:38:13.620

*我在 TypeProviders 方面的经验非常有限，但我已经广泛使用 T4 4 年了*

根据我从 TypeProviders 读到的内容，这些是我坚持使用 T4 的原因：

1.  T4在概念上很简单，即生成代码的PHP/ASP
2.  T4 生成可读代码，这些代码像普通源代码一样编译和调试
3.  如果未来的维护者愿意，他们可以停止使用 T4 并手动维护生成的工件（我当然不建议这样做，但这是可能的）
4.  T4可以生成C#、VB、F#、C++、C、T-SQL、XML等。我主要将它用于 C#，但事实证明生成 C++ 和 T-SQL 可以节省大量时间。
5.  T4 和 partial 配合得很好

T4 中的代码共享是使用 <#@include#> 完成的，该概念适用于 T4。

对我来说，让 T4 伟大的是简单的概念、与 Visual Studio 的出色集成和多功能性（因为它可以生成任何类型的文本）。

在我使用 System.Linq.Expression、System.Reflection.Emit、C++ 部分模板技巧、C++ 预处理器高阶宏和自生成汇编代码为 68000 进行元编程之前。所有这些技术在编写时都很酷，但对于维护者。它们也很难调试并产生糟糕的错误消息。

对我来说，TypeProviders 似乎更难维护，代码也更难调试，但我对 TypeProviders 的了解很少来自阅读一些博客。

当然，这都是我的拙见。

# git - msysgit：git-upload-pack：找不到命令

> ID：12329435
> 
> 赞同：1
> 
> 时间：2012-09-08T09:00:00.847
> 
> 标签：git, clone, msysgit, pull

从托管在 Windows 机器上的 Git 存储库克隆/拉取时，我总是不断收到

```
bash: git-upload-pack: command not found
fatal: The remote end hung up unexpectedly 
```

系统运行 msysgit 1.7.11，通过 SSH 访问。我已经检查了服务器上的 %PATH% ，一切似乎都是正确的。

该怎么办？

# android - 指向 stdio FILE 的指针上的编译器错误

> ID：12329441
> 
> 赞同：0
> 
> 时间：2012-09-08T09:01:33.753
> 
> 标签：android, c, android-ndk

android NDK 抱怨这个：

```
#include <stdio.h>
int fileno (FILE *stream); //line 27 io.h 
```

它说：

```
jni/application/io.h:27:5: error: expected ')' before '*' token
jni/application/io.h:27:5: error: expected ')' before '->' token 
```

我会理解是否`FILE`是某个宏，但不是，它只是来自 stdio 的那个。

如果我拿出`*stream`我得到：

```
int fileno (FILE);
jni/application/io.h:27:5: error: expected ')' before '->' token 
```

我不明白它`->`从哪里获得令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:04:48.527

等等，我看看，`fileno`是宏在`stdio.h`

因此扩展到：

```
int ((FILE* stream)->_file); 
```

# php - jQuery AJAX 没有发送到我的 PHP 程序

> ID：12329446
> 
> 赞同：0
> 
> 时间：2012-09-08T09:02:19.483
> 
> 标签：php, jquery, ajax

我不是 AJAX（或 jQuery）方面的专家，但是当我发送 ajax 请求时，我认为我正在做的事情很简单：

```
$.ajax ( requestObj ); 
```

它没有发送，我希望有人可以提供帮助。为了给出上下文，我将“requestObj”设置如下：

```
 //initialise a request object
    var requestObj = {};
    requestObj.response = 'ajax-response';
    requestObj.type = 'POST';
    requestObj.url =  my_config['ajax-service-list'][service]['url'];
    requestObj.data = $.extend ( requestObj.data , {
                                            action: service,
                                            other: parameters,
                                            _ajax_nonce: my_config['ajax-service-list'][service]['nonce']
    });
    requestObj.global = false;
    requestObj.timeout = 30000;
    requestObj.success = function ( r ) {
        alert ( "Success: " + r );
    }
    requestObj.error = function ( r ) {
        console.log ("FAILURE WITH AJAX Call ( " + JSON.stringify (r) + ")");
    } 
```

有一件事可能需要解释。对“my_config”的两个引用是对我使用 Wordpress 的 wp_localize_script() 函数设置的 Javascript 变量的引用。基本上它只是提供关于在哪里可以找到 URL、要使用的 NONCE 等的上下文。我已经测试过 URL 和 NONCE 信息工作正常，所以这不应该是问题。例如，我在定义两个引用后的浏览器调试器上放了一个断点并得到以下结果： ![requestObj 属性的调试器输出](../Images/ad80222786c000057eeeb4398960c942.png)

当我调用 ajax 函数时，它立即执行成功函数并发送值 0。查看我的 PHP 错误日志，虽然我可以看到请求从未发送过。实际发送请求可能会妨碍 $.ajax(requestOb) 吗？

更新：

感谢 Michael 的明智建议，我意识到我实际上收到了外出的请求，但由于它在本地环境中运行，因此响应速度很快。现在我怀疑这与 Wordpress 配置有关。我已经连接到 wp_ajax_[service_name] 但它立即返回 0。我将在 wordpress 论坛中使用这些新信息重新提出这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T21:28:46.740

您应该使用浏览器检查器来检测是否发出了 ajax 请求。打开任何检查器的网络选项卡，您可以在请求发生时观察它们。$.ajax() 方法是如何被实例化的？您可能对此有疑问，而不是 $.ajax()。

使用检查器后，查看您在标头部分发送的 $_POST 或 $_GET 数据，然后查看响应。HTTP 响应代码是 200 吗？如果它是 500，那么您可能在接收请求的 PHP 控制器中有错误。

如果您有 PHP CLI，请运行此命令以查看是否有语法错误：

```
php -l path/to/php/controller.php 
```

如果您的文件中有非致命错误，您将在请求响应中看到错误输出。

在你的 php 文件顶部尝试 var_dump( $_REQUEST )，以确保文件正在接收数据，并且你可以在浏览器检查器响应中检查它。

如果您的控制器内部的程序有问题......您有一个新问题要发布。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T00:17:22.687

好的，我终于回答了这个该死的问题。啊。非常非常感谢 Mathew，感谢他提供的故障排除技能，我无法做到这一点。无论如何，问题出在 AJAX 请求中，因此 Wordpress Ajax 管理器从不尊重我在 PHP 端放置的“钩子”。

我的 AJAX 请求是如何关闭的？我有一个 POST 请求，但 URL 有 GET 变量挂在它上面。基于 Wordpress 的 Ajax 请求的关键变量是“action”变量。这是 WP 的 ajax 管理器用来区分各种服务的变量，也是您将要连接的名称。

所以最后，我的网址是：

```
 http://mysite.com/wp-admin/admin-ajax.php 
```

我的 POST 变量包括：

```
action: get-action-template 
```

我的 wordpress 钩子是：

```
add_action ( 'wp_ajax_get-action-template' , 'AjaxServiceManager::ajax_handler' ); 
```

我的不眠之夜可能会继续，但它们将不再与这个该死的问题有关。:^)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T09:27:02.067

乍一看，您的 URL 似乎有空格`get_action_template`。这可能是个问题。

此外，通过`dataType`可能会有所帮助。

如果不尝试获取不带任何参数的 JSON 响应并发布输出

# c - Windows 加密 API

> ID：12329450
> 
> 赞同：0
> 
> 时间：2012-09-08T09:02:33.137
> 
> 标签：c, windows, cryptography, sha1

我在创建一些字符串的 sha1 哈希时遇到了问题。该函数为超过 4 个字符的字符串生成一个有效的散列，但对于小于该散列的字符，该散列是错误的。我一直在寻找解决方案，但我看不出有什么问题。

```
int create_hash(char *plaintext, char *digest) {
char digest_buff[3];
DWORD buf_size = SHA1_HASH_LEN;
HCRYPTPROV prov;
HCRYPTHASH hash;
BYTE rgbHash[SHA1_HASH_LEN];
CHAR rgbDigits[] = "0123456789abcdef";
int i;

if(!CryptAcquireContext(&prov, NULL, NULL, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT)) {
    if(DEBUG) {
        printf("CryptAcquireContext failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

if(!CryptCreateHash(prov, CALG_SHA, NULL, NULL, &hash)) {
    if(DEBUG) {
        printf("CryptCreateHash failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

if(!CryptHashData(hash, (BYTE *)plaintext, sizeof(hash), NULL)) {
    if(DEBUG) {
        printf("CryptHashData failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

if(!CryptGetHashParam(hash, HP_HASHVAL, rgbHash, &buf_size, NULL)) {
    if(DEBUG) {
        printf("CryptGetHashParam failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

for(i=0; i < buf_size; i++) {
    sprintf(digest_buff, "%c%c", rgbDigits[rgbHash[i] >> 4], rgbDigits[rgbHash[i] & 0xf]);
    strcat(digest, digest_buff);
}

if(!CryptDestroyHash(hash)) {
    if(DEBUG) {
        printf("CryptDestroyHash failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

if(!CryptReleaseContext(prov, NULL)) {
    if(DEBUG) {
        printf("CryptReleaseContext failed: %d\n", GetLastError());
    }
    return SHA1_FAILED;
}

if(DEBUG) {
    printf("digest: %s\n", digest);
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T09:31:36.730

`CryptHashData`接受***数据***的长度作为第三个参数，并在那里传递哈希缓冲区的大小。你需要在那里传递像 strlen(plaintext) 这样的东西。

# c++ - 函数返回不需要的值

> ID：12329451
> 
> 赞同：3
> 
> 时间：2012-09-08T09:03:00.513
> 
> 标签：c++

这是我第一次在这个网站上发帖，因此我会以建设性的方式感谢所有批评。我正在学习用 C++ 编写面向对象的编程，并决定对 ATM 机器进行简单的模拟，该机器接受用户输入并对其进行处理（即 makeDeposit、checkBalance 等）。

我的问题：BankAccount 方法：makeDeposit 最终将 getBalance() 的输出更改为以零为前缀：例如：makeDeposit(10) 将 getBalance() 从 0 -> 010 更改。

```
`//BankAccout.h
#ifndef BANK_ACCOUNT_H
#define BANK_ACCOUNT_H
#include <string>
class BankAccount {

private:
    float m_accountBalance;
public:
    BankAccount ();
    float getBalance();

    /*Can I pass by value or would reference be necessary?*/
    void makeDeposit(BankAccount&, int);

};

#endif`

   //BankAccout.cpp
#include "BankAccount.h"

#include <iostream> //remove once done
using namespace std; //remove once done

BankAccount::BankAccount () {
    m_accountBalance = 0;
}

float BankAccount::getBalance() {
    return m_accountBalance;
}

//increment the object balance based on ammount
void BankAccount::makeDeposit(BankAccount &bao, int deposit_amount) {
    bao.m_accountBalance += deposit_amount;
}

int main () {
    BankAccount b1;
    cout << b1.getBalance(); //returns 0
    b1.makeDeposit (b1,1); //returns 01
    cout << b1.getBalance();
    //Ex.
    //makeDepost(b2, 10);
    //b2.getBalance(); will retrun 010

    return 0;
} 
```

任何提示也将不胜感激，因为我即将参加最粗略的数据结构课程，但对面向对象编程的经验很少。

另外，有人可以向我解释什么是颠覆以及它是如何使用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T09:09:26.237

您只需将`0`值打印到控制台，然后添加`1`到余额并再次将余额打印到控制台。结果？`01`.

如何避免？添加`<< endl`到每个 cout 的末尾。然后，您将在单独的行中打印每个值。示例：
`cout << b1.getBalance();`更改为`cout << b1.getBalance() << endl;`

您的第二个问题（尽管它与第一个问题无关）：
Subversion（也称为 SVN）是一个软件版本控制系统。您可以经常使用它进行备份，并且 - 在一切之前 - 您可以与您的团队协作处理您的项目。更多信息：[http ://en.wikipedia.org/wiki/Apache_Subversion](http://en.wikipedia.org/wiki/Apache_Subversion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:08:53.903

您没有打印新行，因此它将 0 然后 1 集中在一起`01`。修复它`endl;`后调用`cout << b1.getBalance();`

像这样：

```
int main () {
    BankAccount b1;
    cout << b1.getBalance() << endl; //returns 0
    b1.makeDeposit (b1,1); //returns 01
    cout << b1.getBalance() << endl;
    //Ex.
    //makeDepost(b2, 10);
    //b2.getBalance(); will retrun 010

    return 0;
} 
```

# azure - 自动将 Azure Blob 同步到本地文件系统

> ID：12329452
> 
> 赞同：5
> 
> 时间：2012-09-08T09:03:03.080
> 
> 标签：azure, synchronization, filesystemwatcher, azure-blob-storage

我想知道是否有一种方法可以将 Azure blob 自动同步到本地文件系统，以便每当将 blob 添加到容器中时都会触发一个事件，以便可以将其下载到本地文件夹。

到目前为止，我可以从本地文件系统同步到 Azure Blob，但不能以其他方式同步。

如果我使用轮询，我应该多久进行一次轮询以及它对性能的影响有多大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T15:07:10.970

这是您需要自己管理的事情，因为无法*查看*blob 或容器。也就是说：您可以检查[容器](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.blobcontainerproperties.etag.aspx)（或[blob 的](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.blobproperties.etag.aspx)）eTag 以查看内容是否已更新。

至于轮询：每次执行 GET 时，都会导致交易命中。并不是说它非常昂贵（每 100K 事务半美分）：如果您每秒轮询一次，您每月可能花费 15 美分（每个角色实例进行轮询）。但是：我认为这有点激进，特别是如果您同时发生其他与存储相关的活动（队列轮询等）。

这取决于您认为 blob 内容更新的频率，以及本地缓存需要的最新程度。

您还可以考虑构建一个上传器服务，该服务接收上传的对象，将其存储在 blob 存储中，并通知所有正在运行的实例有更新（包括更新的 blob 的 URL）。也许为此使用服务总线发布/订阅？我不知道您的应用程序的架构以及内容是如何上传的；这可能适合您，也可能不适合您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T16:35:26.253

我有这样做的代码。请参阅[https://github.com/smarx/nodeerole/blob/master/WebRole/Sync/OneWayBlobSync.cs](https://github.com/smarx/noderole/blob/master/WebRole/Sync/OneWayBlobSync.cs)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T01:50:02.383

你看过这个吗？[将文件同步到 Windows Azure 存储](http://code.msdn.microsoft.com/windowsazure/Synchronizing-Files-to-a14ecf57)

它有点过时，但也许是一个很好的起点。

# javascript - 如何在 ajax 获取函数（msg）中附加子项？

> ID：12329456
> 
> 赞同：0
> 
> 时间：2012-09-08T09:04:11.780
> 
> 标签：javascript, jquery, ajax, html

我有这个代码功能，我试图获取一个 html 并在 msg 中收到的 html 中附加一个 li 但不工作

```
function handleFileSelect(evt)
{
    var files = evt.target.files;
    $('#visor_zone').fadeOut(600);
    $('#visor_zone').empty();
    $.ajax(
    {
        url: '/home/visor_publicacion',
    }).done(function(msg)
        {
            var html=msg;
            for (var i = 0, f; f = files[i]; i++)
            {
                if (!f.type.match('image.*')) 
                {
                    continue;
                }
                var reader = new FileReader();
                reader.onload = (function(theFile) {
                    return function(e) {
                        var li = document.createElement('li');
                        li.innerHTML = ['<li><a><img ref="', e.target.result,'" src="', e.target.result,'"/></a><span>esta es la foto agregada</span></li>'].join('');
                        //li.innerHTML = ['Nombre: ', escape(theFile.name), ' || Tamanio: ', escape(theFile.size), ' bytes || type: ', escape(theFile.type), '<br /><img class="thumb" src="', e.target.result,'" title="', escape(theFile.name), '"/><br />'].join('');
                        html.getElementById('pikame').appendChild(li);
                    };
                })(f);
                reader.readAsDataURL(f);
            }
            $('#visor_zone').fadeIn(600,function()
                {
                    $('#visor_zone').html(html);
                    $("#pikame").PikaChoose({autoPlay:false});
                });

        });
}
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

它不起作用，但接下来的工作为什么是那些之间的区别

```
function handleFileSelect(evt)
{
    var files = evt.target.files;
    $('#visor_zone').fadeOut(600);
    $('#visor_zone').empty();
    $.ajax(
    {
        url: '/home/visor_publicacion',
    }).done(function(msg)
        {
            $('#visor_zone').html(msg);
            for (var i = 0, f; f = files[i]; i++)
            {
                if (!f.type.match('image.*')) 
                {
                    continue;
                }
                var reader = new FileReader();
                reader.onload = (function(theFile) {
                    return function(e) {
                        var li = document.createElement('li');
                        li.innerHTML = ['<li><a><img ref="', e.target.result,'" src="', e.target.result,'"/></a><span>esta es la foto agregada</span></li>'].join('');
                        //li.innerHTML = ['Nombre: ', escape(theFile.name), ' || Tamanio: ', escape(theFile.size), ' bytes || type: ', escape(theFile.type), '<br /><img class="thumb" src="', e.target.result,'" title="', escape(theFile.name), '"/><br />'].join('');
                        document.getElementById('pikame').appendChild(li);
                    };
                })(f);
                reader.readAsDataURL(f);
            }
            $('#visor_zone').fadeIn(600,function()
                {
                    $("#pikame").PikaChoose({autoPlay:false});
                });

        });
}
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:10:37.960

`var html=msg;`

一个原因`failure of first`是在需要在 DOM 上执行的字符串上的方法上调用 javascript

`var html=msg;`字符串中有 html 而不是 dom，因此您无法在其上执行适用于 DOM 的 javascript 方法

```
$('#visor_zone').html(msg); 
```

原因`success of second`之一是上面的语句，recevived msg string 作为 visor_zone 元素的 html 分配给 dom，这使得 javascript 方法可以处理接收到的消息 html（成为 DOM 的一部分）

# mysql - 带联接的 DELETE 查询

> ID：12329462
> 
> 赞同：-2
> 
> 时间：2012-09-08T09:04:36.997
> 
> 标签：mysql, sql, join, sql-delete

我正在运行查询以从表中删除。

```
delete from sps
inner join str on str.studentid = sps.studentid 
where str.studentid like '%2012%psy%' 
  and str.semesterid=2 
inner join papers on papers.id = sps.paperid 
where papers.c_id=10 
  and papers.p_semid=2 
```

我不知道为什么它没有显示任何结果并给我一个错误。

错误是：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 2 行的 'inner join str on str.studentid=sps.studentid where str.studentid like '%2012%ps' 附近使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:06:42.613

将两个`WHERE`子句的两个谓词在查询末尾移动到一个`WHERE`子句中，如[Mysql`DELETE`语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)所述。就像是：

```
DELETE s 
FROM sps s
INNER JOIN str ON str.studentid = s.studentid 
INNER JOIN papers ON papers.id = s.paperid 
WHERE str.studentid LIKE '%2012%psy%' 
  AND str.semesterid = 2 
  AND papers.c_id = 10 
  AND papers.p_semid = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:13:13.087

您可以`WHERE`在单个查询中使用一次子句。
试试这个查询

```
DELETE sps FROM sps
INNER JOIN str ON str.studentid=sps.studentid
INNER JOIN papers ON papers.id=sps.paperid 
WHERE papers.c_id=10 AND papers.p_semid=2
AND str.studentid LIKE '%2012%psy%' AND str.semesterid=2 
```

或者

```
DELETE FROM sps, str, papers 
USING sps 
      INNER JOIN str ON str.studentid=sps.studentid
      INNER JOIN papers ON papers.id=sps.paperid 
WHERE   papers.c_id=10 
    AND papers.p_semid=2
    AND str.studentid LIKE '%2012%psy%' 
    AND str.semesterid=2 
```

# c# - 将方法添加到自动生成的类

> ID：12329464
> 
> 赞同：1
> 
> 时间：2012-09-08T09:05:14.143
> 
> 标签：c#, entity-framework, extension-methods, equals, edmx

如何将`bool Equals(object obj)`方法添加到自动创建的类（在我的例子中是 edmx 模型）。

我的意思是一种解决方案是继承这个类并使用这个新类，但我正在寻找不同的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T09:06:27.623

该类是局部类，因此您可以创建一个新的局部类。

```
public partial class MyClass
{
  bool Equals(object obj)
  {
    // code here
  }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-08T09:10:14.960

您可以使用扩展方法

```
public static class ExM
{
    public static bool Equals(this MyClass obj1, MyClass obj2)
    {
        // code here
    }
} 
```

它将`Equals`在 MyClass 对象的 Intellisense 中添加该方法，以便当您这样调用它时

```
bool b = MyClassObject1.Equals(MyClassObject2); 
```

# c# - ASP.Net 网站成员资格和 C# Windows 窗体成员资格

> ID：12329467
> 
> 赞同：0
> 
> 时间：2012-09-08T09:05:52.720
> 
> 标签：c#, asp.net, winforms

*这不是真的，这只是我正在做的一个项目*

我在 C# WindowsForm 中创建了一个酒店管理系统，它允许员工添加/编辑/更新房间、预订和客户等。

除了这个 Windows 窗体，我正在创建一个 ASP.net 网站，客户应该能够在其中在线注册和预订房间。我已经到了需要为此网站创建某种类型的成员资格方法的地步，它应该对应于 Windows 窗体的成员资格。但是我不确定哪种成员资格方法最适合这个，我已经调查了 asp.net 成员资格，这是我想要的，但是它创建了自己的架构，我不知道如何将信息与我的客户表和 c#windows 表格。

无论如何，我理想​​情况下希望它尽可能地类似于现实生活中的情况，我是不是走错了路？就 c# windows-form 而言，企业将使用什么其他技术来管理这样的系统，他们可以在那里添加/编辑/更新系统并拥有一个相关的网站。

我在这里有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:36:00.000

asp.net 会员系统是一个相当不错的系统，当然值得学习。

将 Web 和 WinForms 系统关联起来并不像您想象的那么难 - 您可以将会员用户 guid 映射到单独表中的 windows 窗体用户 ID，或者将外键列添加到链接到用户 ID 的现有会员表.

您可以编写同步密码的脚本（如果 WinForms 用户更改了他们的密码，也更新网络密码）。这一切都是可行的。

很抱歉，如果不了解您的系统，我无法更具体，但我鼓励您继续保持原样并在您的网站中使用 asp.net 会员系统，而不是自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:21:21.530

它值得学习会员系统，它提供了一些开箱即用的重要功能来处理安全问题。

要了解数据库架构，请按照以下步骤操作：
转到：**SystemDrive:\Windows\Microsoft.NET\Framework\YourFrameworkVersion\aspnet_regsql**

现在使用此工具创建数据库。查看字段和关系。它一般会创建 11 个表，但您可能会遍历**Users、Roles、UsersInRoles**表。这些是用于身份验证和授权的表。

如果您想使用自己的数据库并想使用 Membership 系统，那么您可能需要扩展 Membership 类，[本文](http://theintegrity.co.uk/2010/11/asp-net-mvc-2-custom-membership-provider-tutorial-part-1/)将对此有所帮助。

# zend-framework - 从 zend 框架中的数据库值填充表单

> ID：12329479
> 
> 赞同：-3
> 
> 时间：2012-09-08T09:08:03.850
> 
> 标签：zend-framework, populate

我有一个编辑个人资料页面，用户可以在其中更改他的个人资料数据。现在在编辑用户表单中，我想在用户编辑之前使以前的数据库值对用户可见。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T18:02:15.187

```
public function editAction() {
    $id = $this->_request->getParam('id');

    $articleForm = new Form_Article();
    $articleForm->setAction($this->getRequest()->getPathInfo());

    if($this->getRequest()->isPost()) {
        if($articleForm->isValid($_POST)) {

           // edit logic here
        }
    }
    $articleModel = new Model_Article();

    $article = $articleModel->find($id)->current();
    $articleForm->populate($article->toArray());

    $this->view->form = $articleForm;
} 
```

# javascript - 在 jquery 中添加文本框标题

> ID：12329482
> 
> 赞同：0
> 
> 时间：2012-09-08T09:09:16.703
> 
> 标签：javascript, jquery, textbox, title

**如何为 Jquery 中的文本框的“标题”属性赋值？** 我在互联网上搜索过，但没有得到结果。答案将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:13:41.613

[使用此处](http://api.jquery.com/attr/)记录的jQuery`attr()`方法。

```
$('input').attr('title', 'your value'); 
```

[演示](http://jsfiddle.net/bFw2h/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T09:15:11.690

您可以使用`jquery` `.attr()`方法来更改元素的任何属性。 `$('#txtbox').attr('title','My Title');`将分配`title`给您的`textbox`.

**[查看实时样本](http://jsfiddle.net/DJrmX/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-08T09:16:39.013

任何属性都可以设置或添加`jQuery`：

```
$(selector).attr('attribute-name', 'attribute-value') 
```

因此，添加`title`到`textbox`：

```
$('input[type="text"]').attr('title', 'hello'); 
```

# javascript - 为什么 xpath 查询不会在 xhtml 页面上返回结果

> ID：12329485
> 
> 赞同：1
> 
> 时间：2012-09-08T09:09:46.553
> 
> 标签：javascript, xpath, content-type

目前我正在努力进行客户端 xpath 评估。出于开发目的，我添加了：

```
<?php header( 'Content-type: application/xhtml+xml' ); ?> 
```

如果我生成无效的 (x)html，请转到我的页面顶部以获取解析错误。我想使用以下代码进行一些 xpath 查询，例如`//div`, or等​​等：`//div[@class='test']`

```
function xpath( query ){
    var evaluater = new XPathEvaluator();
    var resolver = document.createNSResolver( document.documentElement );
    var iterator = evaluater.evaluate( query, document, resolver, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null );
    var nodes = [];
    var result;
    while( ( result = iterator.iterateNext() ) != null ){
        nodes.push( result );
    }
    return nodes;
}; 
```

我的页面顶部如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns='http://www.w3.org/1999/xhtml'>
    <head>
        <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" /> 
```

`header(...)`如果该方法被注释掉，它工作正常，但如果它被触发，xpath 查询不返回任何结果。

为什么是这样？xpath 评估的标头扮演什么角色？

**编辑：**

如果我从 html 元素中删除 xmlns 并切换`header`- 方法，则会出现：

![没有 xmlns](../Images/ad950611187cdb982a3b1e84e9393ce5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:10:02.060

如果您的 (X)HTML 文档由 XML 解析器解析（并且将内容类型设置为 application/xhtml+xml 要求浏览器或用户代理使用 XML 解析器解析文档），则应用 XML 规则并且 XPath 可在此文档上运行根据 XML 规则。在这种情况下，所有的 XHTML 元素`div`都在 XHTML 命名空间中`http://www.w3.org/1999/xhtml`，对于 XPath 1.0 表达式来选择命名空间中的元素，您需要使用例如`//pf:div`将使用的前缀（例如`pf`）绑定到 XHTML 命名空间的位置`http://www.w3.org/1999/xhtml`。你如何做到这一点取决于你使用的 XPath API，在`evaluate`你需要的方法和 Javascript API 的情况下，例如

```
document.evaluate('//pf:div', document, function(prefix) { if (prefix === 'pf') return 'http://www.w3.org/1999/xhtml'; else return null; }, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null); 
```

以另一种方式解释它，您当前的路径表达式选择**没有名称空间**`//div`中具有本地名称`div`的元素，并且由于 XHTML 文档中的元素位于 XHTML 名称空间中，因此路径不会选择任何元素（只要 XML 解析规则适用）。

 **当然，现在所有浏览器供应商都转向 HTML5 以继续使用`text/html`，而不是切换到基于 XML 的解析，我想知道您为什么要将文档作为 XML 提供。**

# ruby-on-rails - 带乘客的 Apache 不加载 Rails 应用程序

> ID：12329488
> 
> 赞同：3
> 
> 时间：2012-09-08T09:10:18.490
> 
> 标签：ruby-on-rails, ruby, linux, apache, passenger

我正在开发一个 Rails 应用程序并尝试配置它部署的 Web 服务器。我的问题是页面无法加载。

在 Apache`error.log`中**没有错误**，在我的应用程序中`log/production.log`只`Connecting to database specified by database.yml`出现了一行。

我在应用程序的公用文件夹中没有 index.html，并且该应用程序在开发环境中运行良好。

我正在使用带有 Ubuntu 12.04 的 Amazon 实例，并且我已经通过 RVM 安装了 ruby​​。在我的 httpd.conf 我有：

```
LoadModule passenger_module /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /home/ubuntu/.rvm/wrappers/ruby-1.9.3-p194/ruby 
```

Apache 启动时没有错误。

下面是我的`sites-available/default`：

```
# other virtualhosts
#

<VirtualHost *:80>
    ServerName my_app.mydomain.com
    ServerAdmin mail@mail.com

    DocumentRoot /home/ubuntu/public_html/my_app/current/public

    <Directory /home/ubuntu/public_html/my_app/current/public>
        Allow from all
        Options -MultiViews
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
</VirtualHost> 
```

我现在应该怎么做才能让乘客工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:00:15.120

我决定重新安装 Ruby 和所有其他东西并转移到 nginx。 *最后*，现在我已经完成了所有工作（在 ngnix 和 apache 中）。如果有人在乎，这就是我所做的：

## Ruby + Rails

通过 RVM 安装 ruby​​ + rails

```
curl -L https://get.rvm.io | bash -s stable --rails 
```

在所有打开的 shell 中加载 rvm

```
source ~/.rvm/scripts/rvm 
```

安装宝石

```
gem install passenger 
```

## 阿帕奇

安装 apache 和乘客模块

```
rvmsudo passenger-install-apache2-module 
```

将这些行复制到`/etc/apache2/httpd.conf`

```
LoadModule passenger_module /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /home/ubuntu/.rvm/wrappers/ruby-1.9.3-p194/ruby 
```

## nginx

安装nginx和passenger模块

```
rvmsudo passenger-install-nginx-module 
```

将这些行复制到`/opt/nginx/conf/nginx.conf`

```
passenger_root /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17;
passenger_ruby /home/ubuntu/.rvm/wrappers/ruby-1.9.3-p194/ruby; 
```

设置脚本以允许您控制 Nginx

```
wget -O init-deb.sh http://library.linode.com/assets/660-init-deb.sh
sudo mv init-deb.sh /etc/init.d/nginx
sudo chmod +x /etc/init.d/nginx
sudo /usr/sbin/update-rc.d -f nginx defaults 
```

您现在可以使用此脚本控制 Nginx

```
sudo /etc/init.d/nginx stop
sudo /etc/init.d/nginx start 
```

## 使用 nodejs 进行最终设置

您需要的另一件事是 Node.js。这将帮助您在部署中编译资产

```
sudo apt-add-repository ppa:chris-lea/node.js
sudo apt-get -y update
sudo apt-get -y install nodejs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:33:20.523

我遇到了同样的问题，答案在 unicorn.log 文件中。这是控制器中的语法错误。您应该查看乘客日志文件

# pointers - 在 Go 中使用 new vs var

> ID：12329493
> 
> 赞同：12
> 
> 时间：2012-09-08T09:11:09.777
> 
> 标签：pointers, go

你有一个带参数的函数，一个指向类型的指针。

```
type bar struct{...}

func foo(arg *bar) 
```

有什么区别：

```
var b bar
foo(&b) 
```

和

```
b := new(bar)
foo(b) 
```

使用 new 创建分配。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T09:16:08.920

不，没有区别，因为与 C 相反，Go 明确声明您可以提供指向本地创建的变量的指针。

从[文档中](http://golang.org/doc/effective_go.html)：

> 请注意，与 C 不同，返回局部变量的地址是完全可以的；与变量关联的存储在函数返回后仍然存在

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T09:15:39.163

两者都应该表示指向使用相同默认值初始化的相同对象的相同指针。

该[规范](http://golang.org/ref/spec)确实提到：

> 后

```
type T struct { i int; f float64; next *T }
t := new(T) 
```

> 以下成立：

```
t.i == 0
t.f == 0.0
t.next == nil 
```

> 之后也是如此

```
var t T 
```

还：

> 获取复合文字的地址（§[地址运算符](http://golang.org/ref/spec#Address_operators)）会生成一个指向该文字值的唯一实例的指针。

```
var pointer *Point3D = &Point3D{y: 1000} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-08T10:01:20.653

在某些情况下存在差异。`new(T)`，顾名思义，返回一个类型为 T 的新实例，while`var b T`是一个单一实例，一次且永远（错误，实际上直到其生命周期结束 == 超出范围，无法访问......）。

考虑这个循环

```
var b bar
for i := 0; i < 10; i++ {
    foo(&b)
} 
```

对比

```
var b *bar
for i := 0; i < 10; i++ {
    b = new(b)
    foo(b)
} 
```

在后一种情况下，`foo`例如，如果将其存储`arg`在某个容器中，则会导致 10 个`bar`存在实例，而前一种情况只有一个变量`b`。

另一个区别在于性能。该变量`b`将是一个完全静态的全局变量，或者通常位于某些函数/方法调用记录中的静态已知偏移量（通常是堆栈帧的花哨名称）。`new`OTOH，如果没有被编译器优化，是一个内存分配器调用。这样的调用将花费一些非零时间。如果在循环中进行并且实际上没有必要，那么它可能会使某些代码路径明显变慢。

# asp.net-mvc - 在 OpenId Provider 中禁用 AskUser

> ID：12329503
> 
> 赞同：0
> 
> 时间：2012-09-08T09:12:24.797
> 
> 标签：asp.net-mvc, dotnetopenauth, openid-provider

我通过 DotNetOpenAuth 库创建 OpenId 提供程序。

我使用在 DotNetOpenAuth 示例中找到的 OpenIdProviderMvc 项目并对其进行了自定义。

现在我有2个问题：

*   如何删除 AskUser 步骤？
*   回复 RP 后如何在提供商中注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:32:03.903

跳过询问用户步骤就像更改[OpenIdController.ProcessAuthRequest](https://github.com/AArnott/dotnetopenid/blob/master/samples/OpenIdProviderMvc/Controllers/OpenIdController.cs#L60)方法一样简单，这样它就不会重定向到 AskUser 操作，而是始终（有效地）遵循路径，就像`AutoRespondIfPossible`返回 true 一样。

通过在浏览器的相同重定向指令中清除 cookie，您可以有效地将用户“在”响应 RP 后注销。因此，在从该`ProcessAuthRequest`方法返回之前，请尝试：

```
FormsAuthentication.SignOut(); 
```

如果这不起作用，您可能必须按照[此问题](https://stackoverflow.com/questions/412300/formsauthentication-signout-does-not-log-the-user-out)中的描述自己进行 cookie 操作。

# c - 将 char 数组转换为整数

> ID：12329504
> 
> 赞同：12
> 
> 时间：2012-09-08T09:12:35.267
> 
> 标签：c, arrays, pointers, char, int

```
#include <stdio.h>

int main(){
    unsigned char a[4] = {1, 2, 3, 4};
    int b = *(int *)&a[0];

    printf("%d\n", b);
    return 0;
} 
```

我只是不明白为什么`b`is的结果`0x4030201`。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T09:28:23.547

当您告诉编译器创建这样的数组时：

```
unsigned char a[4] = {1, 2, 3, 4}; 
```

这些数字按以下顺序放在内存中的某个位置：

```
MemoryAddress0: 0x01 -> a[0]
MemoryAddress1: 0x02 -> a[1]
MemoryAddress2: 0x03 -> a[2]
MemoryAddress3: 0x04 -> a[3] 
```

`&a[0]`是一个`char`指针，其值为`MemoryAddress0`并指向一个 1 字节的值`0x01`

`(int*)&a[0]``MemoryAddress0`是一个具有相同值但这次具有类型的强制转换指针，`int*`因此它指向四个连续的字节。

我们在日常生活中使用的大多数机器都是*小端序*，这意味着它们将多字节值存储在内存中，从最低有效字节到最高有效字节。

当 an`int*`指向四个字节的内存时，它遇到的第一个字节是最低有效字节，第二个字节是第二个最低有效字节，依此类推。

```
MemoryAddress0: 0x01 -> 2^0 term
MemoryAddress1: 0x02 -> 2^8 term
MemoryAddress2: 0x03 -> 2^16 term
MemoryAddress3: 0x04 -> 2^24 term 
```

因此 4 字节整数值变为`0x01*2^0 + 0x02*2^8 + 0x03*2^16 + 0x04*2^24`等于`0x04030201`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T09:14:29.453

您在一台小端机器上，这意味着大小大于一个字节的整数首先存储最低有效字节。

请注意，由于 x86 的通用性，如今大多数架构都是 little-endian。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T09:14:20.007

因为你的系统是小端的。多字节整数中的第一个字节被解释为小端系统中的最低有效字节。

# php - IOS DES 加密和 PHP 解密不能可靠地工作

> ID：12329508
> 
> 赞同：0
> 
> 时间：2012-09-08T09:12:54.197
> 
> 标签：php, ios, encryption, des

我正在使用下面的方法在 iOS 中加密一个字符串

```
 -(NSString *) encrypt:(NSString *) data 
{

    const void *vplainText;
    size_t plainTextBufferSize = [data length];
    vplainText = (const void *) [data UTF8String];
    CCCryptorStatus ccStatus;
    uint8_t *bufferPtr = NULL;
    size_t bufferPtrSize = 0;
    size_t movedBytes = 0;

    bufferPtrSize = (plainTextBufferSize + kCCBlockSizeDES) & ~(kCCBlockSizeDES - 1);
    bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
    memset((void *)bufferPtr, 0x0, bufferPtrSize);

    Byte iv [] = {0x12, 0x34, 0x56, 0x78, 0x90, 0xab, 0xcd, 0xef};

    NSString *key = @"complexkey";
    const void *vkey = (const void *) [key UTF8String];

    ccStatus = CCCrypt(kCCEncrypt,
                       kCCAlgorithmDES,
                       kCCOptionPKCS7Padding | kCCOptionECBMode,
                       vkey,
                       kCCKeySizeDES,
                       iv,
                       vplainText,
                       plainTextBufferSize,
                       (void *)bufferPtr,
                       bufferPtrSize,
                       &movedBytes);

    NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
    NSString *result = [myData base64Encoding];

    // url encode the result
    return (__bridge NSString *) CFURLCreateStringByAddingPercentEscapes(NULL,
                                        (__bridge CFStringRef) result,
                                        NULL,
                                        (__bridge CFStringRef) @"!*'();:@&=+$,/?%#[]",
                                        kCFStringEncodingUTF8);
} 
```

在 php 上，我将字符串解密如下 -

```
 $decrypted = mcrypt_decrypt(MCRYPT_DES, 'complexkey', base64_decode(urldecode($encrypted)), MCRYPT_MODE_ECB); 
```

这似乎在 75% 的时间里都能正常工作，我不确定为什么它在其他时候会失败。有什么线索吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T12:09:11.933

它可能是填充，它是两种方法之间唯一不同步的东西。不幸的是，您可能必须创建自己的未填充表单 mcrypt，因为该库不执行 PKCS#5 填充（实际上与 PKCS#7 填充相同）。幸运的是，这相当简单：解密，然后使用最后一个字节的值来剥离最后一个字节。

其他安全相关说明：

*   DES 不安全，至少使用 3DES（或正式的 TDEA）；
*   ECB 模式不安全，请使用 CBC（确实使用 IV）；
*   ECB模式不使用IV；
*   对于客户端/服务器身份验证，您需要注意填充 oracle 攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T19:30:01.740

事实证明，我正在做的加密/解密没有任何问题。而是问题在于 PHP 中的 urldecode() 没有将 '%2B' 解码为 '+' （而是解码为 ' '）。我在 PHP 中从 urldecode() 切换到 rawurldecode() ，现在一切正常！

# windows - 使用 glTexImage2D 上传图像数据时失败

> ID：12329509
> 
> 赞同：0
> 
> 时间：2012-09-08T09:12:56.747
> 
> 标签：windows, opengl, segmentation-fault, glfw

我正在开发一个 OpenGL 应用程序，并且在**Linux**（x86_32 和 x86_64）下一切正常，但是我在将应用程序移植到**Windows**时遇到了困难。我的应用程序使用非常基本的**OpenGL 1.0**、出色的**glfw 2.7.6**和**libpng 1.5.7**。在移植整个程序之前，我尝试编写最简单的代码来测试这些库在 Windows 下是否正常工作，并且在我开始使用纹理之前一切似乎都正常工作！

在我的程序中使用纹理`glTexImage2D(..)`会导致访问冲突并出现以下错误：

```
First-chance exception at 0x69E8F858 (atioglxx.dll) in sidescroll.exe: 0xC0000005: Access violation reading location 0x007C1000.
Unhandled exception at 0x69E8F858 (atioglxx.dll) in sidescroll.exe: 0xC0000005: Access violation reading location 0x007C1000. 
```

我做了一些研究，[发现](http://www.opengl.org/discussion_boards/showthread.php/175708-ATi-Accessing-texture-level-below-TEXTURE_BASE)这可能是 GPU 驱动程序错误。可悲的是，我有一台带有*AMD Radeon HD5650的**Toshiba L650-1NU*笔记本电脑，没有提供驱动程序，但供应商分发过时。给定帖子的作者建议使用，但由于我使用**OpenGL 1.0**，因此我无权使用此方法。 *`glBindBuffer`*

 ***您对如何在不使用更新的 OpenGL 的情况下绕过此问题有任何想法吗？不过，如果这是唯一的解决方案，是否可以向我提供有关如何将**OpenGL 2.1**与**glfw**一起使用的教程或代码片段？

这是我的一段代码，它导致了错误：

```
img = img_loadPNG(BACKGROUND);
if (img) {
    printf("%p %d %d %d %d", img->p_ubaData, img->uiWidth, img->uiHeight, img->usiBpp, img->iGlFormat);

    glGenTextures(1, &textures[0]);
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, img->uiWidth, img->uiHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, img->p_ubaData); //SEGFAULT HERE ON WINDOWS!
    //img_free(img); //it may cause errors on windows
} else printf("Error: loading texture '%s' failed!\n", BACKGROUND); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:21:01.327

您遇到的错误是因为您传递给 glTexImage2D 的缓冲区比 glTexImage2D 尝试从参数中推断出的缓冲区短。那是在 Windows 下崩溃而不是在 Linux 下崩溃，因为在 Linux 下内存分配往往比您要求的要大一些，而在 Windows 下您会受到非常严格的限制。

PNG很可能读作RGB。但是，您告诉 glTexImage2D 您通过了 GL_RGBA，这当然会越界访问。

我看到`img`你收到的结构有一个元素`iGlFormat`。我敢打赌，这正是传递给 glTexImage2D 的格式。所以试试这个：

```
glTexImage2D(
    GL_TEXTURE_2D, 0,
    img->iGlFormat, // This is not ideal, OpenGL will chose whatever suits
    img->uiWidth, img->uiHeight, 0,
    img->iGlFormat, GL_UNSIGNED_BYTE,
    img->p_ubaData ) 
```***

# symfony - Doctrine2 - OneToMany/ManyToOne 双向不工作

> ID：12329512
> 
> 赞同：1
> 
> 时间：2012-09-08T09:13:15.360
> 
> 标签：symfony, doctrine-orm, one-to-many, fosuserbundle

大家好，感谢您的帮助，

我目前正在处理一个问题，而我想与 Doctrine2 (& Symfony2) 建立 OneToMany/ManyToOne 双向关系。

这是我的两个类：用户（扩展 FOSUser）和代表视频集合的集合。当然，一个用户可以有多个收藏，但一个收藏只与一个用户相关。

```
/* COLLECTION */
namespace Com\ComBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Com\ComBundle\Entity\Collection
 *
 * @ORM\Table(name="collection")
 * @ORM\HasLifecycleCallbacks
 */
class Collection
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Com\UserBundle\Entity\User", inversedBy="collections")
     * @ORM\JoinColumn(nullable=false)
     */
    private $user;

    /**
     * Set user
     *
     * @param Com\UserBundle\Entity\User $user
     * @return Collection
     */
    public function setUser(\Com\UserBundle\Entity\User $user) {
        $this->user = $user;
        return $this;
    }

    /**
     * Get user
     *
     * @return Com\UserBundle\Entity\User User 
     */
    public function getUser() {
        return $this->user;
    }

} 
```

和用户，

```
 /* USER */    
namespace Com\UserBundle\Entity;

use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /* 
     * @ORM\OneToMany(targetEntity="Com\ComBundle\Entity\Collection", mappedBy="user")
     */
    private $collections;

    public function __construct()
    {
        parent::__construct();
        $this->collections = \Doctrine\Common\Collections\ArrayCollection();
    }       
} 
```

当我使用doctrine:generate:entities 命令时，它不会生成与$collections (get/add/remove) 相关的方法，即使我自己编写，它也不起作用。例如，getCollections() 返回 NULL。

我在这段代码中缺少什么？

# ruby-on-rails - 如何在视图规范中存根当前用户的属性

> ID：12329515
> 
> 赞同：0
> 
> 时间：2012-09-08T09:13:17.767
> 
> 标签：ruby-on-rails, rspec, mocking, stubbing

我有一个视图规范，我正在测试条件输出。如何让规范返回我模拟出来的用户？

**查看文件**：

```
.content
 - if @current_user.is_welcome == true
  Welcome to the site 
```

**查看规格**：

```
before(:each) do 
  @user = mock_model(User)
  @user.stub!(:is_welcome).and_return(true)
  view.stub(:current_user).and_return(@user) 
end

it "show content" do 
  #assign(:current_user, stub_model(User, dismiss_intro: true))
  render
  rendered.should have_content("Welcome to the site")
end 
```

运行规范返回`undefined method is_welcome for nil:NilClass`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:18:16.250

您已经对名为的方法进行了存根`current_user`，而不是实例变量`@current_user`。

```
view.stub(:current_user).and_return(@user) 
```

这意味着，在视图中，您应该使用：

```
.content
 - if current_user.is_welcome == true
  Welcome to the site 
```

请注意，它调用方法`current_user`而不是获取`@current_user`实例变量。

如果您需要实例变量，建议您创建一个方法`current_user`，该方法获取实例变量并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T17:21:51.757

我最终这样做了，这让我将`@current_user`变量保留在我的视图中并通过了规范：

```
before :each do
  @user = stub_model(User, is_welcome: true)
  assign(:current_user, @user)
end 
```

然后为了测试条件，只需在具有不同 before 块的上下文中运行另一个规范：

```
before :each do
  @user = stub_model(User, is_welcome: false)
  assign(:current_user, @user)
end 
```

# php - 代码点火器中不同条件的表单验证

> ID：12329534
> 
> 赞同：0
> 
> 时间：2012-09-08T09:15:44.450
> 
> 标签：php, codeigniter

所以我有一个用于两个功能/条件的表单：保存（添加）和更新现在我为我的输入文本设置了一个规则：`$this->form_validation->set_rules('ID_user', 'User ID', 'required');`

逻辑是这样的：如果用户处于保存状态，那么我的输入文本将被启用，因为他们将 tyoe 他们的 id，但如果用户处于更新状态，那么我的输入文本将被禁用，文本将是当前用户id，因为他们无法更改其用户 ID。

这是我的控制器中的保存（添加）和更新功能：

```
function add(){
    //set common properties 
    $data['title'] = 'Tambah User baru';
    $data['action'] = site_url('user/add');
    $data['link_back'] = anchor('user/index/', 'Back to User list', array('class'=>'back'));

    $this->_set_rules();
    //run validation
    if($this->form_validation->run() == false){
        $data['message'] = '';
        //bedakan add/update
        $data['validate'] = 'add';
        //set common properties 
        $data['title'] = 'Add new User';
        //$data['message'] = '';
        $data['user']['ID_user'] = '';
        $data['user']['pass'] = '';
        $data['user']['nama'] = '';
        $data['user']['email'] = '';
        $data['user']['active'] = '';
        $data['link_back'] = anchor('user/index/', 'Lihat daftar User', array('class'=>'back'));

        $this->load->view('user_form_v', $data);
    }

    else{
        //save data
        $user = array('ID_user'=>$this->input->post('ID_user'),
        'pass'=>sha1($this->input->post('pass')),
        'nama'=>$this->input->post('nama'),
        'email'=>$this->input->post('email'),
        'active'=>$this->input->post('active'),
        'regis_date'=>date('Y-m-d H:i:s'));

        $ID_user = $this->user_m->save($user);

        //set form input nama = "id"
        $this->validation->ID_user = $ID_user;

        redirect('user/index/add_success');
    }
}

function update($ID_user){
    //set common properties
    $data['title'] = 'Update user';
    $this->load->library('form_validation');

    //set validation properties
    $this->_set_rules();
    $data['action'] = ('user/update/'.$ID_user);

    //bedakan add/update
    $data['validate'] = 'update';

    //run validation
    if ($this->form_validation->run() == false){
        $data['message'] = '';

        $data['user'] = $this->user_m->get_by_id($ID_user)->row_array();
        //set common properties
        $data['title'] = 'Update User';
        $data['message'] = '';
    }
    else{
        //save data
        $ID_user = $this->input->post('ID_user');
        $user = array(
        'pass'=>$this->input->post('pass'),
        'nama'=>$this->input->post('nama'),
        'email'=>$this->input->post('email'),
        'active'=>$this->input->post('active'),
        'regis_date'=>date('Y-m-d H:i:s'));

        $this->user_m->update($ID_user, $user);
        $data['user'] = $this->user_m->get_by_id($ID_user)->row_array();

        //set user message
        $data['message'] = 'Update User Success!';
    }

    $data['link_back'] = anchor('user/index/', 'Lihat daftar user', array('class'=>'back'));
    //load view
    $this->load->view('user_form_v', $data);
} 
```

这是视图中的输入类型：

```
<input type="text" name="ID_user" class="text"
                <?php if($validate!='add'){echo "disabled";} ?>
                value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/> 
```

问题是：**当我的用户处于更新条件并且他们想要更新时，会显示错误消息，因为 php 认为用户 ID 为空，事实是用户 ID 已经存在，我所做的只是打印用户 ID我的输入类型并禁用它** 这是错误消息：`The User ID field is required.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:19:34.610

您应该运行两条不同的规则 - 一条用于“保存”，一条用于“更新”。

然后在保存规则中，包含用户 ID 的规则。

在更新规则中，不要包含用户 ID。

将用户 ID 放入表单上的“隐藏”字段不是最佳选择 - 因为有人可以“编辑”页面并将隐藏字段更改为其他内容 - 从而打开您的应用程序以进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:26:53.207

您可以将用户 ID 字段作为隐藏字段包含在更新表单中，以确保它与其他表单字段一起提交。

```
<input type="hidden" name="user[ID_user]" value="<?=$user['ID_user']?>" /> 
```

只需确保以某种方式针对当前登录的用户进行验证，以确保没有人使用它并更改另一个用户的记录。

# c++ - CAA - 如何读取 CATIA PartBody 特征颜色？

> ID：12329538
> 
> 赞同：1
> 
> 时间：2012-09-08T09:16:21.713
> 
> 标签：c++, visual-c++, cad, catia, caa

如何读取 CATPart 内特征的颜色和可见性详细信息。
这些详细信息将保存在哪个容器中？我们必须使用什么功能？

# python - 杀死多线程 SocketServer

> ID：12329541
> 
> 赞同：1
> 
> 时间：2012-09-08T09:16:56.783
> 
> 标签：python, multithreading, python-2.7, kill

我试图弄清楚为什么我不能通过 CRTL-C 杀死我的多线程 SocketServer。

基本上我有：

```
import SocketServer,threading

class TEST(SocketServer.BaseRequestHandler):
    def server_bind(self):
        self.socket.setsockopt(SOL_SOCKET, SO_REUSEADDR,SO_REUSEPORT, 1)
        self.socket.bind(self.server_address)
        self.socket.setblocking(0)

    def handle(self):
        request, socket = self.request
        data = request
        if data[0] == "\x01":
           buff = "blablabla"
           socket.sendto(str(buff), self.client_address)

class TEST1(SocketServer.BaseRequestHandler):
    def server_bind(self):
        self.socket.setsockopt(SOL_SOCKET, SO_REUSEADDR,SO_REUSEPORT, 1)
        self.socket.bind(self.server_address)
        self.socket.setblocking(0)

    def handle(self):
        request, socket = self.request
        data = request
        if data[0] == "\x01":
           buff = "blablabla"
           socket.sendto(str(buff), self.client_address)

class TEST2(SocketServer.BaseRequestHandler):
    def server_bind(self):
        self.socket.setsockopt(SOL_SOCKET, SO_REUSEADDR,SO_REUSEPORT, 1)
        self.socket.bind(self.server_address)
        self.socket.setblocking(0)

    def handle(self):
        request, socket = self.request
        data = request
        if data[0] == "\x01":
           buff = "blablabla"
           socket.sendto(str(buff), self.client_address)

class TEST3(SocketServer.BaseRequestHandler):
    def server_bind(self):
        self.socket.setsockopt(SOL_SOCKET, SO_REUSEADDR,SO_REUSEPORT, 1)
        self.socket.bind(self.server_address)
        self.socket.setblocking(0)

    def handle(self):
        request, socket = self.request
        data = request
        if data[0] == "\x01":
           buff = "blablabla"
           socket.sendto(str(buff), self.client_address)

def serve_thread_udp(host, port, handler):
    server = SocketServer.UDPServer((host, port), handler)
    server.serve_forever()

def serve_thread_tcp(host, port, handler):
    server = SocketServer.TCPServer((host, port), handler)
    server.serve_forever()

def main():
    try:
      threading.Thread(target=serve_thread_tcp,args=('', 4045,TEST)).start()
      threading.Thread(target=serve_thread_tcp,args=('', 239,TEST1)).start()
      threading.Thread(target=serve_thread_udp,args=('', 1246,TEST2)).start()
      threading.Thread(target=serve_thread_tcp,args=('', 12342,TEST3)).start()
    except KeyboardInterrupt:
        os._exit()

if __name__ == '__main__':
    try:
        main()
    except:
        raise 
```

我试图了解我做错了什么以及能够通过 crtl-c 杀死整个脚本的最佳方法是什么。任何帮助将不胜感激 ！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:11:30.347

这是一个解决方案：

```
def main():
    import thread
    try:
      thread.start_new(serve_thread_tcp, ('', 4045,TEST))
      thread.start_new(serve_thread_tcp,('', 239,TEST1))
      thread.start_new(serve_thread_udp,('', 1246,TEST2))
      thread.start_new(serve_thread_tcp,('', 12342,TEST3))
    except KeyboardInterrupt:
        os._exit()

if __name__ == '__main__':
    try:
        main()
    except:
        raise
    raw_input() 
```

要关闭服务器，您可以键入 return 或关闭标准输入。

问题在于`Thread`在所有关闭之前不允许关闭应用程序的类`Threads`。

serve_forever() 将不会结束，直到您在 KeyboardInterrupt 上关闭属于服务器（其他解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:53:47.753

创建线程时，将它们设置为 daemon ：

```
Thread.__init__(self)
self.setDaemon(True) 
```

这样，当您杀死主线程时，所有线程都将终止。

基于[此处](http://docs.python.org/library/threading.html#thread-objects)的python文档：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。初始值继承自创建线程。可以通过 daemon 属性设置标志。

# javascript - 为什么我的 setInterval 停止工作？

> ID：12329545
> 
> 赞同：1
> 
> 时间：2012-09-08T09:17:39.557
> 
> 标签：javascript

为什么当我添加 'for' 时 'setInterval' 停止工作？

```
<script>
    var x=0;
    setInterval(function() {counter()},1);
function counter()
{
     x++;
}
for(var start=0; start <= 100; start++)
    {
        alert("x is "+x+" and start is "+start);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T09:25:54.127

由于Javascript（在这种情况下）不是多线程的，因此您的 setInterval 基本上意味着“下次主线程不做任何事情并且超时已经过去，让它执行我的回调”。

您的 for 循环会阻塞主线程，直到它完成（并且它不会退出，直到它显示 101 个警报，每个警报都在等待用户输入）所以您的回调不会发生，直到 for 循环结束并且主线程可以去回到“什么都不做”。

# c++ - 链接器未构造用户定义的类型

> ID：12329546
> 
> 赞同：0
> 
> 时间：2012-09-08T09:17:57.383
> 
> 标签：c++, eclipse, linker

我有一个长期项目正在进行中，其中涉及构建一个可以产生新颖音乐和声的专家系统。我从 VB.net 开始，到目前为止，我想使用独立于平台的语言，所以我转向 C++ 以促进未来的迁移。本质上，音调是原子，它们在分组为向量时形成和弦进程的一部分，当作为向量分组时形成块等的一部分。所以整个结构对它有一种递归的感觉。尽管以下代码将在 Netbeans 7.2 中编译和链接，但我遇到了难以解决的严重内存问题，所以我现在使用 Eclipse。虽然动态库将在 Eclipse 中编译，但总体上似乎存在链接问题，因此没有创建对象。我已经花了几天时间尝试各种补救措施。我在这里包括顶级主代码和我收到的错误消息的部分列表。任何有关可能发生的事情的指示将不胜感激。期待中的Thx..

```
/* 
 * File:   main.cpp
 * Author: Creative
 *
 * Created on August 6, 2012, 10:49 AM
 */

#include "../tonestatdynlib/name_pitchstructure.h"
#include "../sequencerdynlib/chord.h"
#include "../sequencerdynlib/Move.h"
#include "../sequencerdynlib/block.h"
#include "../sequencerdynlib/prog.h"
#include "../legalitydynlib/testLegal.h"
#include "../dataWriterdynlib/dWriter.h"
#include <iostream>
#include <sqlite3.h>//database facility

int main(int argc, char** argv) {

    int make;
    char start;

    cout << "Do you want to start a new movement? Y/N" << endl;

cin >> start;

    if (start == 'Y') {
        bool end = false;
        Move theMove;
        block theBlock;
        prog theProg;
        int i = 1, mv = 1, bk = 1, pr = 1;

        theMove.items.push_back(theBlock);
        theBlock.items.push_back(theProg);

        do {
            chord nextChord(i);
            nextChord.getPitches();
            theProg.items.push_back(nextChord);
            dWriter dW(nextChord, pr, bk, mv, "SONO");
            cout << "Chord Number " << i << " is completed. Do you want to:" << endl;
            cout << "Enter another chord?:  1" << endl;
            cout << "Start a new progression?: 2" << endl;
            cout << "Start a new block?: 3" << endl;
            cout << "Start a new movement?: 4" << endl;
            cout << "Exit SONO: 5" << endl;
            cin >> make;
            switch (make) {
                case 5: end = true;
                    break;
                case 1: i++;
                    break;
                case 2: i = 1;
                    pr++;
                    break;
                case 3: i = 1;
                    pr = 1;
                    bk++;
                    break;
                case 4: i = 1;
                    pr = 1;
                    bk = 1;
                    mv++;
                    break;
            }
        } while (end == false);
    }
    return 0;
} 
```

错误信息：

```
g++ -L"/Users/Creative/Documents/workspace/tonestatdynlib/Debug" -L"/Users/Creative/Documents/workspace/chordOpsdynlib/Debug" -L"/Users/Creative/Documents/workspace/dataWriterdynlib/Debug" -L"/Users/Creative/Documents/workspace/legalitydynlib/Debug" -L"/Users/Creative/Documents/workspace/sequencerdynlib/Debug" -L"/Users/Creative/Documents/workspace/tonestatdynlib" -L"/Users/Creative/Documents/workspace/sequencerdynlib" -L"/Users/Creative/Documents/workspace/legalitydynlib" -L"/Users/Creative/Documents/workspace/dataWriterdynlib" -L"/Users/Creative/Documents/workspace/chordOpsdynlib" -o "SONO"  ./main.o  

Undefined symbols for architecture x86_64:
  "block::block(block const&)", referenced from:
      __gnu_cxx::new_allocator<block>::construct(block*, block const&)in main.o
      void std::_Construct<block, block>(block*, block const&)in main.o
      std::vector<block, std::allocator<block> >::_M_insert_aux(__gnu_cxx::__normal_iterator<block*, std::vector<block, std::allocator<block> > >, block const&)in main.o
  "prog::prog(prog const&)", referenced from:
      void std::_Construct<prog, prog>(prog*, prog const&)in main.o
      __gnu_cxx::new_allocator<prog>::construct(prog*, prog const&)in main.o
      std::vector<prog, std::allocator<prog> >::_M_insert_aux(__gnu_cxx::__normal_iterator<prog*, std::vector<prog, std::allocator<prog> > >, prog const&)in main.o
  "chord::chord(chord const&)", referenced from:
      void std::_Construct<chord, chord>(chord*, chord const&)in main.o
      __gnu_cxx::new_allocator<chord>::construct(chord*, chord const&)in main.o
      std::vector<chord, std::allocator<chord> >::_M_insert_aux(__gnu_cxx::__normal_iterator<chord*, std::vector<chord, std::allocator<chord> > >, chord const&)in main.o
  "pitchStats::pitchStats(pitchStats const&)", referenced from:
      void std::_Construct<pitchStats, pitchStats>(pitchStats*, pitchStats const&)in main.o
  "block::~block()", referenced from:
      _main in main.o
      std::vector<block, std::allocator<block> >::_M_insert_aux(__gnu_cxx::__normal_iterator<block*, std::vector<block, std::allocator<block> > >, block const&)in main.o
  "prog::~prog()", referenced from:
      _main in main.o
      std::vector<prog, std::allocator<prog> >::_M_insert_aux(__gnu_cxx::__normal_iterator<prog*, std::vector<prog, std::allocator<prog> > >, prog const&)in main.o
  "chord::~chord()", referenced from:
      _main in main.o
      std::vector<chord, std::allocator<chord> >::_M_insert_aux(__gnu_cxx::__normal_iterator<chord*, std::vector<chord, std::allocator<chord> > >, chord const&)in main.o
  "Move::Move()", referenced from:
      _main in main.o
  "block::block()", referenced from:
      _main in main.o
  "prog::prog()", referenced from:
      _main in main.o
  "chord::chord(int)", referenced from:
      _main in main.o
  "chord::getPitches()", referenced from:
      _main in main.o
  "dWriter::dWriter(chord const&, int, int, int, char const*)", referenced from:
      _main in main.o
  "dWriter::~dWriter()", referenced from:
      _main in main.o
  "Move::~Move()", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [SONO] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:20:15.333

您只提供搜索要链接到的库的路径。您还需要提供库，使用`-l`. 例如，对于`libFoo.so`使用`-lFoo`.

# c# - 如何使用任何脚本查找给定的 URL 是否会重定向？

> ID：12329548
> 
> 赞同：0
> 
> 时间：2012-09-08T09:18:34.847
> 
> 标签：c#, php, javascript, html, http

我有一个包含超过 2,50,000 个网站 URL 的文本文档。浏览每个 URL，如果它把我重定向到一个特定的 URL（不同的站点），我想将它保存到另一个文本文件中。

我是 C# 开发人员，我知道如何读取或写入文件和小片段，但正在寻找最好的逻辑或方法来用任何编程语言完成上述任务和脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T09:27:41.753

```
string url = "http://www.google.com";
var req = (HttpWebRequest)HttpWebRequest.Create(url);
req.AllowAutoRedirect = false;

using (var resp = req.GetResponse())
{
    var location = resp.Headers["Location"];
    if (!String.IsNullOrEmpty(location))
    {
        Console.WriteLine("url is redirected to " + location);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:29:46.647

使用 bash 脚本。就像是

```
#!/bin/bash

$SITESFILE=/path/to/your/input/file
$OUTPUTFILE=/path/to/your/output/file
$TARGETURL=http://where.to/redirect

for SITE in `cat $SITESFILE`; do
  REDIRHEADER=`curl -i $SITE | head -n15 | grep -i 'Location: $TARGETURL'`
  test -n "$REDIRHEADER" && echo $SITE >> $OUTPUTFILE
done; 
```

您将需要安装 cURL。

# coffeescript - 更好的 jQuery 参数 CoffeeScript 语法

> ID：12329549
> 
> 赞同：0
> 
> 时间：2012-09-08T09:18:50.727
> 
> 标签：coffeescript

我有此代码用于发出发布请求、发送一些数据并记录返回值

```
$.post '/saveletter', {start: {x: startX, y:startY}, letter: currentLetter, unitVectors: letter.unitVectorsJson(), timeVectors: letter.timeVectorsJson()}, (data) =>
  console.log data 
```

我想将长参数对象分成几行，以获得更好的可读性，但无法弄清楚可以使用的语法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:29:46.037

为了使您的代码更具可读性，您可以使用以下内容（[小提琴](http://jsfiddle.net/f2abB/1/)和[编译结果](http://coffeescript.org/#try%3astartX%20=%20startY%20=%20currentLetter%20=%20%27dummy%27;%0Aletter%20=%20unitVectorsJson%3a%20%28-%3E%29,%20timeVectorsJson%3a%20%28-%3E%29%0A%0A%24.post%20%27/saveletter%27,%0A%C2%A0%20%C2%A0%C2%A0start%3a%C2%A0%C2%A0x%3a%20startX,%20y%3a%20startY%0A%C2%A0%20%C2%A0%C2%A0letter%3a%20currentLetter%0A%C2%A0%20%C2%A0%C2%A0unitVectors%3a%20letter.unitVectorsJson%28%29%0A%C2%A0%20%C2%A0%C2%A0timeVectors%3a%20letter.timeVectorsJson%28%29%0A,%20%28data%29%20=%3E%0A%C2%A0%C2%A0console.log%20data%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B)）：

```
$.post '/saveletter',
    start:
        x: startX
        y: startY
    letter: currentLetter
    unitVectors: letter.unitVectorsJson()
    timeVectors: letter.timeVectorsJson()
, (data) =>
  console.log data​​ 
```

在 Coffeescript 中，`{`并且`}`可以从对象字面量中省略。并且逗号可以交换换行符（在对象文字内，*而不是*在参数之间）。

以下内容也是有效的，但可能不太可读（即乍一看并不明显）：

```
start: x: startX, y: startY 
```

# javascript - 使用javascript停止表单？怎么了？

> ID：12329550
> 
> 赞同：2
> 
> 时间：2012-09-08T09:18:52.163
> 
> 标签：javascript, html, forms, function

```
 <form onsubmit="return false"> 
```

那是有效的。但

```
 <form method="post" action="" onsubmit="off()">
     function off(){return false); 
```

不工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T09:20:26.107

您需要返回值。

```
<form method="post" action="" onsubmit="return off();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:21:19.460

试试这样：

```
<form method="post" onsubmit="return off();" action=""> 
```

# android - 从第二个 Activity android eclipse 启动模拟器

> ID：12329551
> 
> 赞同：-2
> 
> 时间：2012-09-08T09:18:54.220
> 
> 标签：android, android-emulator, android-activity

我有 2 个`Activity`文件。1 个活动用于`Setup`，其他用于 `main`。

在一个`Activity`中，我有一个代码来显示电话号码设备，所以如果用户曾经有过，`setup`他将在第二个活动中转发。我需要从`Setup`活动开始。

你能告诉我，怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:09:37.683

使用设置活动启动您的应用程序。定义[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)以检查用户是否已经输入了电子邮件。如果没有电子邮件，请向用户询问电子邮件并将其存储在 SharedPreferences 中，然后继续下一个活动。

下次启动应用程序时，您将在 SharedPreference 字符串变量中找到电子邮件，因此直接转到下一个活动。

像这样的东西：

```
public void onCreate(){
    String user_email = getSharedPreference("PREFERENCE", MODE_PRIVATE).getString("userEmail",null);
    if (user_email == null){
   [Get the email from the User, something like xyz@example.com and store it in a String userEmail]
   String userEmail = ....//input email from user 
    // Save the state
    getSharedPreference("PREFERENCE", MODE_PRIVATE)
        .edit()
        .putString("userEmail", userEmail)
        .commit();
    }
} 
```

# cordova - 如何更改 PhoneGap 中的应用程序默认图标

> ID：12329554
> 
> 赞同：19
> 
> 时间：2012-09-08T09:19:25.597
> 
> 标签：cordova, cross-platform

我正在使用 phone gap 为多个平台构建应用程序，但我无法更改默认图标，谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-03T19:29:09.837

请注意，至少对于 Android，如果您正在进行**本地构建**，则`config.xml`远程构建中使用的图标将被忽略，并且使用的图标位于`platforms/android/res/drawable`

对于多个平台中的远程构建，您可以获得有关如何在`config.xml`文件中设置图标的信息，例如：

**对于 CLI：** [http ://docs.phonegap.com/en/3.5.0/config_ref_images.md.html](http://docs.phonegap.com/en/3.5.0/config_ref_images.md.html)

**对于 PhoneGap 构建：** [http ://docs.phonegap.com/phonegap-build/configuring/icons-and-splash/#icons](http://docs.phonegap.com/phonegap-build/configuring/icons-and-splash/#icons)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-08T09:55:32.413

进入您的项目文件夹，您应该会看到另一个名为“icon”的文件夹（在 Your_Project_Name/Resources/icon 中，您的文件夹“Your_Project_Name”位于包含文件夹“www”的同一目录中）。

您应该找到 3 个默认图标：

1.  图标-72.png
2.  图标.png
3.  图标@2x.png

在那里添加您的图标并替换默认图标。不要更改文件的名称。

如果要更改启动图像，只需进入文件夹“splash”（Your_Project_Name/Resources/splash）并替换默认图像：

1.  默认.png
2.  默认@2x

# exception - Windows 8 Metro 应用程序中的 FileNotFoundException 异常

> ID：12329570
> 
> 赞同：1
> 
> 时间：2012-09-08T09:22:05.373
> 
> 标签：exception, windows-8, microsoft-metro, windows-runtime, filenotfoundexception

我只想将一些字符串保存到 Metro 应用程序的本地文件夹中，代码如下：

```
public GroupedItemsPage()
        {
            this.InitializeComponent();
            Loaded += OnLoaded;
        }

        async private void OnLoaded(object sender, RoutedEventArgs routedEventArgs)
        {
            var storageFolder = ApplicationData.Current.LocalFolder;
            var file = await storageFolder.CreateFileAsync("news.json", CreationCollisionOption.ReplaceExisting);
            await FileIO.WriteTextAsync(file, "test");
        } 
```

但是总是出现 FileNotFoundException 异常，我是在创建文件而不是获取文件，所以我不知道这段代码片段有什么问题。

谁能告诉我如何解决这个问题？提前谢谢。

# javascript - 如何减少在移动网络应用程序上播放声音的延迟

> ID：12329572
> 
> 赞同：2
> 
> 时间：2012-09-08T09:23:02.307
> 
> 标签：javascript, web-applications, jquery-mobile

我正在尝试创建移动应用程序的网络原型。

我的代码就像

```
var eat = new Audio("snd/home/eating.mp3");
$('#eatBtn').live("click", function(){
    eat.play()
}); 
```

这里的问题是，虽然在 iPhone 的 Safari 上播放音频，但从按下按钮到开始播放音频的时间通常会有很大的延迟。音频文件的大小通常小于 50kb。

有什么方法可以最大限度地减少时间松弛或优化我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T13:07:35.467

I have this same problem in my app, and for what it's worth here is the answer from another SO post:

[Audio delay on HTML5 mobile web app](https://stackoverflow.com/questions/19778277/audio-delay-on-html5-mobile-web-app)

It describes the cause of the problem, but not a solution unfortunately.

# iphone - 在 iPhone 上控制 GPS 采样

> ID：12329574
> 
> 赞同：0
> 
> 时间：2012-09-08T09:23:37.427
> 
> 标签：iphone, gps

关于 iPhone 上的 GPS 采样，我有两个问题：

1.是否可以使用 CLLocationManager（或任何其他方法）仅基于 GPS 进行位置读数，而不会影响 WiFi 或蜂窝网络？

2.给定一个固定设备，是否可以控制采样率？我可以使用 CLLocationManager 以纳秒分辨率从 GPS 获取不间断的位置读数吗？如果不是，我能得到的最佳分辨率是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:57:56.440

关于数字 1，显然，您无法直接控制 gps 数据。话虽如此：如果您的速度 > 0 并且准确度很高，那么您可以推断出您的数据很可能来自 gps 读数。

据我所知，gps 固定不是以纳秒为单位，而是以秒为单位。您所说的分辨率（阅读频率？）到底是什么意思有点不清楚。但是，如果是频率，大多数导航软件（例如谷歌）每秒左右刷新一次位置。

高频位置更新在存储成本（服务器端）、查询时间（服务器端）、电池使用（iphone）和长时间加热手机方面非常昂贵。我会朝相反的方向前进，尤其是对于固定设备（每 5 分钟左右发送一次心跳通常就足够了）。

[CLLocationManager 上的参考](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)

# linux - 如何使用命令指令创建文件？

> ID：12329582
> 
> 赞同：0
> 
> 时间：2012-09-08T09:25:27.547
> 
> 标签：linux, command-line, putty

我有一个`myFirstFile`包含某些命令的文件名。但我无法执行它们。

如果我想将其作为程序执行，应该实现哪些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:30:46.170

如果你想执行你的程序，它应该从以下开始：

```
#!/bin/sh 
```

它是通用脚本文件“头文件”。它表明该脚本是一个 shell 脚本（如果它是你应该拥有的 bash 脚本`#!/bin/bash`，等等）。如果你想执行它，你应该打电话`chmod +x ./myFirstFile`给它作为程序调用它的权限，然后你就可以正常启动你的脚本了：`./myFirstFile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:28:57.980

使此文件可执行* 并为其提供 *.sh 扩展名，例如：“myFirstFile.sh”

比从终端运行它（或 crontab - 它可以在你睡觉时为你做事:)），比如：

```
cd directory/you/have/that/file
sh ./myFirstFile.sh 
```

*我不认为让它可执行是你能做的最安全的事情。我所有的 sh 脚本都是，而且我从未深入研究过这个问题，所以请确保它很酷

还要确保你在第一行有“#!/bin/bash”——有时它会有所帮助（不知道为什么，谷歌它）

编辑：例如，我的启动 Minecraf 服务器的脚本如下所示

启动.sh

```
#!/bin/bash

BINDIR=$(dirname "$(readlink -fn "$0")")
cd "$BINDIR"

while true
do
    java -Xmx3584M -jar craftbukkit.jar

    echo -e 'If you want to completely stop the server process now, press ctrl-$
    echo "Rebooting in:"
    for i in {5..1}
    do
        echo "$i..."
        sleep 1
    done
    echo 'Restarting now!'
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T09:30:58.883

您必须使文件可执行：

```
chmod +x myFirstFile 
```

然后就可以执行里面的命令了：

```
./myFirstFile 
```

# spring - 创建序列 ID 休眠生成器有什么问题？

> ID：12329586
> 
> 赞同：1
> 
> 时间：2012-09-08T09:26:15.620
> 
> 标签：spring, hibernate, jpa, sequence

我想使用序列 id 生成器，它可以在所有数据库中使用。所以我正在寻找答案，发现[博客](http://www.javaplex.com/blog/how-to-achieve-database-auto-id-generation-portability-in-hibernate/comment-page-1/#comment-1592)和根据下一个片段必须工作：

```
@Entity
@Table(name="employees")
public class Employee implements Serializable {
    @Id
    @GeneratedValue(generator="tablegenEmpl")    
    @GenericGenerator(name="tablegenEmpl",strategy="org.hibernate.id.enhanced.SequenceStyleGenerator",
            parameters={
                @Parameter(name="sequence_name",value="ID_SEQ"),
                @Parameter(name="optimizer",    value="hilo"),
                @Parameter(name="initial_value",value="2100"),
                @Parameter(name="increment_size",value="1")
            })
    @Column(name="ID",unique=true,nullable=false)
    private Long id;
.... 
```

还有我的 SQL 脚本：

```
DROP TABLE IF EXISTS `employees`;
CREATE TABLE `employees` (
  `ID` bigint(20) NOT NULL,
  `FIRSTNAME` varchar(255)  DEFAULT NULL,
  `LASTNAME` varchar(255)  DEFAULT NULL,
  `SALARY` double DEFAULT NULL,
  `BIRTHDATE` date DEFAULT NULL,
  `ACTIVE` boolean DEFAULT NULL,
  `DEPARTAMENTID` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`ID`)
); 
```

但我有一个例外。是什么原因造成的？：

```
10:21:00,513 ERROR TableStructure:114 - could not read a hi value
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'employ.id_seq' doesn't exist
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.Util.getInstance(Util.java:384)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2568)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2113)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2275)
    at org.hibernate.id.enhanced.TableStructure.doWorkInCurrentTransaction(TableStructure.java:104)
    at org.hibernate.engine.TransactionHelper$1Work.doWork(TransactionHelper.java:38)
    at org.hibernate.engine.transaction.Isolater$JdbcDelegate.delegateWork(Isolater.java:187)
    at org.hibernate.engine.transaction.Isolater.doIsolatedWork(Isolater.java:43)
    at org.hibernate.engine.TransactionHelper.doWorkInNewTransaction(TransactionHelper.java:51)
    at org.hibernate.id.enhanced.TableStructure$1.getNextValue(TableStructure.java:72)
    at org.hibernate.id.enhanced.OptimizerFactory$HiLoOptimizer.generate(OptimizerFactory.java:125)
    at org.hibernate.id.enhanced.SequenceStyleGenerator.generate(SequenceStyleGenerator.java:157)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:99)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:172)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:94)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
    at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:507)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:499)
    at org.hibernate.engine.CascadingAction$5.cascade(CascadingAction.java:218)
    at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
    at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:296)
    at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:242)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:219)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
    at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
    at org.hibernate.engine.Cascade.cascade(Cascade.java:97)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.cascadeOnUpdate(DefaultSaveOrUpdateEventListener.java:357)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:329)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:223)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:89)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
    at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:507)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:499)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:495)
    at org.springframework.orm.hibernate3.HibernateTemplate$16.doInHibernate(HibernateTemplate.java:740)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.saveOrUpdate(HibernateTemplate.java:737)
    at com.mycompany.employeers.dao.EmployeesDAOImpl.saveDepartament(EmployeesDAOImpl.java:63)
    at com.mycompany.employees.dao.BaseDaoTest.testGetEmployeesFromDepartament(BaseDaoTest.java:173)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:127)
    at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:52)
    at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
enter code here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T11:32:49.537

您需要另一张`id_seq`包含一列的表格`next_val`。理想情况下，您应该在实体名称之后命名 seq 表 - 类似于`employee_sequence`然后在 sequence_name 参数中指定。

# clojure - 迭代和重复应用函数之间的区别

> ID：12329588
> 
> 赞同：9
> 
> 时间：2012-09-08T09:26:45.360
> 
> 标签：clojure

我正在研究 Clojure Koans：

[https://github.com/functional-koans/clojure-koans/blob/master/src/koans/10_lazy_sequences.clj](https://github.com/functional-koans/clojure-koans/blob/master/src/koans/10_lazy_sequences.clj)

我被困在这个：

```
"Iteration can be used for repetition"
  (= (repeat 100 :foo)
     (take 100 (iterate ___ :foo))) 
```

我不知道填充*_*空白的确切内置函数，所以我尝试编写自己的。我把它写成一个单独的函数作为测试。

我打算这样做：如果 x 是一个序列，那么只需重复它的第一个元素。否则，将其设为 seq。

```
(def f (fn [x] (if (seq? x) (cons (first x) x) (cons x '())))) 
```

当我明确运行它时，它看起来很好：

```
user=> (f :abc)
(:abc)
user=> (f (f :abc))
(:abc :abc)
user=> (f (f (f :abc)))
(:abc :abc :abc) 
```

但是 using`iterate`添加了一个额外的括号：

```
user=> (take 1 (iterate f :abc))(:abc)
user=> (take 2 (iterate f :abc))
(:abc (:abc))
user=> (take 3 (iterate f :abc))
(:abc (:abc) (:abc :abc))

What causes this? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-25T12:37:59.867

```
(fn [x] x) 
```

解决了这个特殊的公案

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T09:44:20.050

重新阅读[文档](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/iterate)：`iterate`

> 返回 x、(fx)、(f (fx)) 等的惰性序列。

如果您想要特定迭代的结果，请使用`nth`而不是：`take`

```
用户=> (nth (迭代 f :abc) 0)
:abc
用户=> (nth (迭代 f :abc) 1)
(:abc)
用户=> (nth (迭代 f :abc) 2)
(:abc:abc)
用户=> (nth (迭代 f :abc) 3)
(:abc :abc :abc)

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T19:56:14.593

我已经解决了`#(keyword %)`

我试过了，`#( %)`但它不起作用。有谁知道为什么？

# eclipse - 如何在 Eclipse 中禁用 Scala 断言？

> ID：12329594
> 
> 赞同：2
> 
> 时间：2012-09-08T09:27:01.407
> 
> 标签：eclipse, scala, assert, scala-ide

我想在 Scala 程序中使用断言。对于程序的最终版本，应关闭断言以提高性能。

似乎有两个 Scala 编译器标志启用此功能（第一个需要额外的优先级）：

```
-Xelide-below
-Xdisable-assertions 
```

但是，在 Eclipse 中激活我的 Scala 项目的*Scala 编译器属性*中的那些没有效果：断言仍然被执行。

我用来测试的小程序：

```
object Test {
  def main(args: Array[String]): Unit = {
    assert(false) 
  }
} 
```

我确保重新编译了代码；我为 -Xelide-below 测试了不同的（非常高的）优先级。

我在 Windows 7 机器上使用 Eclipse Juno (4.2.0) 和 Scala Plugi-In 2.1.0.nightly-2_09-201209040315-cc63a95 和 Scala 2.9.1-1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:49:32.780

要禁用断言，您应该使用`Scala Compiler > Advanced > Xdisable-assertions`.

另一种禁用它们的方法是将选项传递`-Xdisable-assertions`给`Scala Compiler > Additional command line parameters`

# java - 如何为安卓媒体播放器使用唤醒锁？

> ID：12329601
> 
> 赞同：5
> 
> 时间：2012-09-08T09:28:05.700
> 
> 标签：java, android, android-mediaplayer, wakelock

我正在尝试使用 android 媒体播放器播放播放列表。当一首曲目结束时；我停止媒体播放器并用新的重新启动它。每次我初始化播放器时，我都会用这条线设置唤醒锁；

```
mMediaPlayer.setWakeMode(getApplicationContext(), PowerManager.PARTIAL_WAKE_LOCK); 
```

用于检测; 我启动播放器并锁定我的手机屏幕。在几首曲目之后；播放器停止并且无法传递到另一条轨道。当这种情况发生时，我再等几分钟。然后当我打开手机屏幕时；播放器立即开始。

媒体播放器是否有可能以某种方式释放唤醒锁？可能会在播放列表中的曲目切换时停止？处理播放列表时，“MediaPlayer.setWakeMode”是否正确？或者我应该直接使用“PowerManager”类吗？

这个问题需要太多时间来测试。提前谢谢。

# android - ViewPager 不会将高度包装到其内容

> ID：12329604
> 
> 赞同：0
> 
> 时间：2012-09-08T09:28:42.450
> 
> 标签：android, android-layout, android-viewpager

ViewPager 不会将其高度包装到其内容中。对于我的布局，我需要动态设置高度，因为它嵌套在其他布局中。因此，我创建了一个 ScrollView 作为 ViewPager 的内容，并在 Fragment 的 onCreate 方法中检查它的高度，但 ScrollView 的大小始终相同。如何包装 ViewPager 的高度以适合其内容？

```
 final ScrollView sv = (ScrollView) v.findViewById(R.id.sv);

        ViewTreeObserver vto = sv.getViewTreeObserver(); 
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() { 
            @Override 
            public void onGlobalLayout() {

                int height = sv.getMeasuredHeight();
                //always same height independent of content height
                //need to resize ViewPager

                ViewGroup.LayoutParams params = (ViewGroup.LayoutParams) mPager.getLayoutParams();
                params.height = height;
                mPager.setLayoutParams(params);
            } 
        }); 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-09T22:40:05.680

试了很多东西，终于搞定了。- 最初将 ViewPager 设置为较大的高度以适应所有可能的内容，而不是降低其高度 - 必须嵌套 2 个 LinearLayout 以获得正确的高度。hth

# jquery - Jquery 模态对话框禁用它自己的控件

> ID：12329609
> 
> 赞同：2
> 
> 时间：2012-09-08T09:29:34.660
> 
> 标签：jquery, modal-dialog

我有一个 DIV 在我的 ASP.Net MVC 项目中显示为模式对话框。这个 DIV 有一个文本框来接受用户输入。但是，当我打开模式选项设置为 true 的对话框时，它会禁用此文本框以及父表单控件！

以模式打开时如何启用对话框上的控件？

```
<div id="assumption-block" class="ic-assumption-block-pos">
    <input type="text" id="maxid" value="text" />
</div> 
```

脚本

```
$('#assumption-block').dialog({modal:true}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T02:18:44.340

我自己也看到了这个问题。如果您遇到与我相同的问题，我相信正确的解决方法是更改​​ z-index，使其`$(".ui-dialog")`具有比`$(".ui-widget-overlay")`css 土地更大的 z-index。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:05:59.050

这不是正确的解决方案，但它可能适用于这个问题，请尝试将第二个代码行添加到您的脚本中。它可能有效，但您的问题似乎很奇怪。

```
$('#assumption-block').dialog({ modal: true });
$('#assumption-block input').removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-17T05:28:37.153

我刚遇到这种情况。这是由于链接到 1.9.2 版本的平滑 css 和 1.11.4 的 jquery ui js 引起的。我相信这与 jquery 在 css 中所做的 z 索引更改有关

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T11:14:52.727

所以你想这样[看这个链接](http://jsfiddle.net/zK4gc/)

您可以设置 open 方法以删除 attr 禁用；

```
$('#assumption-block').dialog({ 
    modal: true,
    open: function(event, ui) { 
        $('#assumption-block input').removeAttr('disabled');  
    }
});​ 
```

# doctrine-orm - Doctrine 2.2.2 带注释的数据库表关系

> ID：12329615
> 
> 赞同：2
> 
> 时间：2012-09-08T09:31:16.863
> 
> 标签：doctrine-orm

我对 Doctrine 2 很陌生，并且在数据库表关系方面不太好。我了解多对一、一对多、一对一和多对多关系的运作方式。我只是对使用教义 CLI 生成数据库表时遇到的这个错误感到困惑。

```
 [Doctrine\ORM\ORMException]
  Column name `id` referenced for relation from Kent\Entity\DoctorSpecialties towards Kent\Entity\Doctors does not exist. 
```

请查看此 github 链接以查看我的实体。(Doctors.php & DoctorSpecialties.php)

[https://github.com/aldee07/Doctor-Finder/tree/development-september/library/Kent/Entity](https://github.com/aldee07/Doctor-Finder/tree/development-september/library/Kent/Entity)

注意：我使用的是 Zend Framework 1.11.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T00:15:34.123

在多对多关系中，您必须提供对第三个外键表的引用

所以改变这个

```
/**
 *
 * @var Doctors
 * @ManyToMany(targetEntity="Doctors", mappedBy="specialties")
 * @JoinTable(name="doctor_specialties")
 */
protected $doctors 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T13:43:14.377

那是您必须在 DoctorSpecialties 类上添加的注释

```
@ManyToOne(targetEntity="Doctors")
@JoinColumn(name="doctor_id", referencedColumnName="doctor_id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T15:13:14.073

我认为你看这里更好： [http ://www.doctrine-project.org/jira/browse/DDC-2646?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel](http://www.doctrine-project.org/jira/browse/DDC-2646?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel)

# python - Python 名称中的内容

> ID：12329618
> 
> 赞同：2
> 
> 时间：2012-09-08T09:31:43.803
> 
> 标签：python

网络中的 python 名称存在很多混淆，并且文档似乎对名称并没有那么清楚。以下是我读到的关于 python 名称的几件事。

1.  名称是对对象的引用（它们在哪里？堆？）并且名称包含的是地址。（如Java）。

2.  python 中的名称就像 C++ 引用 (int& b)，这意味着它是内存位置的另一个别名；即对于`int a`,`a`是一个内存位置。if`int& b = a`表示这`b`是同一内存位置的另一个名称

3.  名称与 C 中自动取消引用的指针变量非常相似。

以上哪些说法是/正确的？

Python 名称中是否包含某种地址，还是只是内存位置的名称（如 C++`&`引用）？

python名称存储在哪里，堆栈还是堆？

`EDIT`：

[从http://etutorials.org/Programming/Python.+Text+processing/Appendix+A.+A+Selective+and+Impressionistic+Short+Review+of+Python/A.2+Namespaces+](http://etutorials.org/Programming/Python.+Text+processing/Appendix+A.+A+Selective+and+Impressionistic+Short+Review+of+Python/A.2+Namespaces+and+Bindings/#)查看以下行[和+绑定/#](http://etutorials.org/Programming/Python.+Text+processing/Appendix+A.+A+Selective+and+Impressionistic+Short+Review+of+Python/A.2+Namespaces+and+Bindings/#)

每当一个（可能是限定的）名称出现在赋值的右侧，或者单独出现在一行上时，该名称就会被取消引用到对象本身。如果名称尚未绑定在某个可访问范围内，则无法取消引用；尝试这样做会引发 NameError 异常。如果名称后跟左括号和右括号（它们之间可能有逗号分隔的表达式），则在取消引用后调用/调用对象。对于 Python 对象，可以控制和覆盖调用时发生的确切情况；但一般来说，调用函数或方法会运行一些代码，调用类会创建一个实例。例如：

> > > pkg.subpkg.func() # 从命名空间调用函数
> > > 
> > > x = y # deref 'y' 并将同一个对象绑定到 'x'

这是有道理的。只是想交叉检查它的真实性。请评论和回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:40:15.583

> 名称是对对象的引用

是的。如果您只想了解 Python 变量的语义，则不必关心对象的位置；它们位于内存中，Python 实现为您管理内存。他们如何做到这一点取决于实现（CPython、Jython、PyPy ...）。

> python 中的名称就像 C++ 引用

不完全是。在 C++ 中重新分配引用实际上会重新分配所引用的内存位置，例如在

```
int i = 0;
int &r = i;
r = 1; 
```

确实如此`i == 1`。除非使用可变容器对象，否则您无法在 Python 中执行此操作。最接近 C++ 参考行为的是

```
i = [0]   # single-element list
r = i     # r is now another reference to the object referenced by i
r[0] = 1  # sets i[0] 
```

> 与 C 中自动取消引用的指针变量非常相似

不，因为在上述方面它们类似于 C++ 引用。

> Python 名称中是否包含某种地址，还是只是内存位置的名称？

前者更接近事实，假设一个简单的实现（同样，PyPy 的做事可能与 CPython 不同）。在任何情况下，Python 变量都不是存储位置，而是可能存在于内存中任何位置的对象的标签/名称。

Python 进程中的每个对象都有一个可以使用该函数获取的*标识*`id`，在 CPython 中该函数返回其内存地址。您可以通过检查两个变量（或更一般的表达式）是否引用同一个对象`id`，或者更直接地使用`is`：

```
>>> i = [1, 2]
>>> j = i       # a new reference
>>> i is j      # same identity?
True
>>> j = [1, 2]  # a new list
>>> i == j      # same value?
True
>>> i is j      # same identity?
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:51:11.467

Python 名称就是名称。你有对象和名字，就是这样。

创建一个对象，比如说在堆的*某个地方*`[3, 4, 5]`创建一个对象。你不需要知道怎么做。现在，您可以通过将名称分配给名称来定位此对象：

 *```
x = [3, 4, 5] 
```

也就是说，赋值运算符分配*名称*而不是值。`x` **不是** `[3, 4, 5]`，不，它只是一个指向`[3, 4, 5]`对象的名称。所以这样做：

```
x = 1 
```

不会更改原始`[3, 4, 5]`对象，而是将对象分配给`1`名称 x。另请注意，大多数表达式都喜欢`[3, 4, 5]`, 但也会`8 + 3`创建临时变量。除非您为该临时文件指定名称，否则它将立即死亡。没有（除了，例如在 CPython 中用于小数字，但除此之外）机制来保持未被引用的对象活动并缓存它们。例如，这会失败：

```
>>> x = [3, 4, 5]
>>> x is [3, 4, 5] # must be some object, right? no!
False 
```

但是，这只是*赋值*（在 Python 中不可重载）。事实上，Python 中的对象和名称表现得非常好，就像自动取消引用指针一样，除了它们会自动进行引用计数，并且在不再引用之后就会消失（至少在 CPython 中）并且它们不会在分配时自动取消引用。

由于这种内存模型，例如重载索引操作的 C++ 方式不起作用。相反，Python 使用`__setitem__`and`__getitem__`因为你不能返回任何“可赋值”的东西。此外，运算符`+=`,`*=`等...通过创建临时变量并将该临时变量分配回名称来工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T09:38:50.563

Python 对象[存储在堆上](http://docs.python.org/c-api/memory.html)，并通过[引用计数](http://docs.python.org/c-api/intro.html#objects-types-and-reference-counts)进行垃圾收集。

变量是对 Java 中对象的引用，因此第 1 点适用。我不熟悉 C++ 或 C 中自动取消引用的指针变量，无法调用它们。

最终，python 解释器负责查找解释器结构中的项目，这些结构通常是 python 列表和字典以及其他此类抽象容器；例如，命名空间使用`dict`（哈希表），其中名称和值是指向其他 python 对象的指针。这些由[映射协议](http://docs.python.org/c-api/mapping.html)明确管理。

对于python程序员来说，这一切都是隐藏的；你不需要知道你的对象在哪里，只要你有引用它们的东西，它们就仍然活着。在 python 中编码时，您会传递这些引用。*

# asp.net-mvc-3 - 无法加载文件或程序集“GMap.NET.Core”或其依赖项之一。试图加载格式不正确的程序。

> ID：12329624
> 
> 赞同：0
> 
> 时间：2012-09-08T09:34:07.603
> 
> 标签：asp.net-mvc-3, wcf, reference, wcf-data-services

我在 VS2010 中有一个 wcf 服务应用程序。我的本地机器是 32 位操作系统，而服务器是 64 位。我的解决方案中有大约 6 项服务。我成功地能够在我的本地机器上的 IIS 上托管应用程序。它工作正常。但是当我尝试在服务器上托管该服务应用程序时，我收到以下错误

**无法加载文件或程序集“GMap.NET.Core”或其依赖项之一。试图加载格式不正确的程序。**
我的**GMap.NET.Core**解决方案中确实添加了参考。

**我试图**将我的解决方案中的属性设置为**Any CPU**。同样在应用程序池中，我将 Enable 32-Bit Application 设置为**True**。在发布之前，我还在我的解决方案中将 Copy Local 设置为**TRUE**。当我通过我的解决方案运行源代码时，我没有收到任何错误，并且解决方案已成功构建。

我还能尝试什么让我的服务成功托管在服务器上并且应该通过我的应用程序访问。 ![由于 GMap.NET.Core 导致的错误](../Images/31d3efe73c9a2aca6b94b9d8093fa9a0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:36:21.983

这是由于 64 位/32 位造成的 99% 的时间。也许您的库只有 32 位，但您的项目正在编译为 64 位？

# linux - 为什么 gcc 会生成冗长的汇编代码？

> ID：12329626
> 
> 赞同：4
> 
> 时间：2012-09-08T09:34:36.557
> 
> 标签：linux, gcc, assembly

我对 GCC 生成的汇编代码有疑问（-S 选项）。因为，我是汇编语言的新手，对它知之甚少，所以这个问题将非常原始。不过，我希望有人会回答：

假设，我有这个 C 代码：

```
main(){

    int x = 15; 

    int y = 6;

    int z = x - y;

    return 0;
} 
```

如果我们查看汇编代码（尤其是对应于 int z = x - y 的部分），我们会看到：

主要的：

```
...
subl    $16, %esp
movl    $15, -4(%ebp)
movl    $6, -8(%ebp)
movl    -8(%ebp), %eax
movl    -4(%ebp), %edx
movl    %edx, %ecx
subl    %eax, %ecx
movl    %ecx, %eax
movl    %eax, -12(%ebp)
... 
```

为什么 GCC 不生成像这样的东西，这样复制的东西就更少了。

主要的：

```
...
movl    $15, -4(%ebp)
movl    $6, -8(%ebp)
movl    -8(%ebp), %edx          
movl    -4(%ebp), %eax          
subl    %edx, %eax              
movl    %eax, -12(%ebp)
... 
```

附言

Linux zion-5 2.6.32-21-generic #32-Ubuntu SMP Fri Apr 16 08:10:02 UTC 2010 i686 GNU/Linux gcc 版本 4.4.3 (Ubuntu 4.4.3-4ubuntu5)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T10:16:35.207

首先，正如 Mysticial 评论的那样，您应该打开一些优化。尝试将`-O2`（或`-O3`，或只是`-O1`）传递给`gcc`. 如果你想了解更多生成的汇编代码，也可以通过`-fverbose-asm`. 如果您想了解生成（或不生成）代码的*原因*`-fdump-tree-all`，请学习 GCC 内部结构（可能也通过并且`-fdump-rtl-all`会产生大量内部转储文件）。

[MELT](http://starynkevitch.net/Basile/gcc-melt)上的一些幻灯片 （MELT 是一种扩展 GCC 的领域特定语言）可能会有所帮助并提供其他参考。

当被要求时，您可能会对 GCC 可以为您提供的优化数量感到惊讶。默认情况下，GCC 不会优化。有一些你应该明确要求的优化（甚至不做`-O3`）。

最新版本的 GCC 可能比旧版本优化得更多。2021 年的当前 GCC 版本是[GCC 11](https://gcc.gnu.org/gcc-11/)。

PS。我不再在 MELT 上工作（2017 年放弃了它）。2021 年，另见[Bismon](https://github.com/bstarynk/bismon/)、[RefPerSys](http://refpersys.org/)、[Frama-C](https://frama-c.com/)。

# ruby - ~> 在 gemspec 依赖项中是什么意思？

> ID：12329628
> 
> 赞同：1
> 
> 时间：2012-09-08T09:35:22.733
> 
> 标签：ruby, gem, bundler

> **可能重复：**
> [版本要求中波浪号大于（~>）的含义？](https://stackoverflow.com/questions/3414337/meaning-of-tilde-greater-than-in-version-requirement)

我在 gemspecs 中经常看到这样的东西：

```
s.add_dependency 'some_gem', '~> 1.5.0' 
```

~> 是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T09:41:46.707

来自[gembundler](http://gembundler.com/gemfile.html)

```
The specifier ~> has a special meaning, best shown by example. 
~> 2.0.3 is identical to >= 2.0.3 and < 2.1\. 
~> 2.1 is identical to >= 2.1 and < 3.0\. 
~> 2.2.beta will match prerelease versions like 2.2.beta.12. 
```

# java - JPanel 没有显示其余的组件

> ID：12329630
> 
> 赞同：1
> 
> 时间：2012-09-08T09:35:32.720
> 
> 标签：java, swing, jpanel, layout-manager, null-layout-manager

我有一个带有按钮的框架和一个`JPanel`我命名为面板的框架，我希望在单击按钮后将一个内部面板添加到我的面板中。但是这可是有问题的！因为在添加第二个面板后它没有添加任何其他面板。

### 代码

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.AbstractButton;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.GridLayout;
import javax.swing.JTextField;

public class DrawImages extends JFrame{

    int i;
    public DrawImages() {
        JButton btnNewButton = new JButton("New button");
        i = 0;
        getContentPane().add(btnNewButton, BorderLayout.SOUTH);
        setMinimumSize(new Dimension(1000,150));
        final JPanel panel = new JPanel();
        panel.setSize(995, 145);
        getContentPane().add(panel, BorderLayout.CENTER);
        panel.setLayout(null);

        final JLabel lblNewLabel = new JLabel("New label");
        lblNewLabel.setBounds(0, 0, 46, 14);
        panel.add(lblNewLabel);

        btnNewButton.addActionListener(new ActionListener() 
            public void actionPerformed(ActionEvent paramActionEvent) {
                JPanel panel_1 = new JPanel();
                //getContentPane().add(panel_1, BorderLayout.NORTH);
                panel_1.setLayout(null);
                JLabel imagelable = new JLabel(new ImageIcon("c:\\good.jpg"));
                imagelable.setBounds(70, 5, 105, 65);
                panel_1.add(imagelable);

                JLabel lblNewLabel_4 = new JLabel("Up Label");
                lblNewLabel_4.setBounds(5, 5, 65, 35);
                panel_1.add(lblNewLabel_4);

                JLabel lblNewLabel_2 = new JLabel("Down Label");
                lblNewLabel_2.setBounds(5, 25, 65, 65);
                panel_1.add(lblNewLabel_2);
                lblNewLabel.setText(""+i);
                panel_1.setBounds(5+170*i, 5, 170+170*i, 70);
                panel.add(panel_1);
                i++;
            }
        });
        panel.setMinimumSize(new Dimension(995,150));
    }

    public static void main(String[]args)
    {
        DrawImages drawImages = new DrawImages();
        drawImages.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:17:23.983

问题在于声明：

```
panel_1.setLayout(null); 
```

`panel_1`没有任何首选尺寸，因此不会出现（或显示为一个小点）。

Swing 旨在使用布局管理器。您可以`GridLayout`在这种特殊情况下使用。

阅读：[不使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:28:14.743

我同意雷默斯的观点。只是为了测试你的代码，我用

> panel_1.setLayout(new FlowLayout());

而且我可以看到面板被添加而无需在父面板上调用 repaint()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:40:21.387

感谢您的回答，但我的问题是我在每个圈子中添加了第三个参数：

```
panel_1.setBounds(5+170*i, 5, 170+170*i, 70); 
```

所以我的面板变得越来越大（事件比我的显示器大）所以正确的是：

```
panel_1.setBounds(5+170*i, 5, 170, 70); 
```

# asp.net - 在我的应用程序中集成 Google Analytics 图表

> ID：12329631
> 
> 赞同：0
> 
> 时间：2012-09-08T09:35:55.510
> 
> 标签：asp.net, charts, google-analytics

如何在我的应用程序中集成显示会话和综合浏览量的 Google Analytics 图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:45:26.167

您可以使用[Google Analytics Reporting API](https://developers.google.com/analytics/devguides/reporting/)从 Analytics 导出数据。然后，您可以使用像[Highcharts](http://www.highcharts.com/)这样的自定义图表库来显示来自这些数据的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T20:48:56.113

我整理了一个 nuget 包，可以让你做到这一点。它使用谷歌图表显示谷歌分析数据 - [https://www.nuget.org/packages/GoogleAnalytics.GoogleCharts.NET/](https://www.nuget.org/packages/GoogleAnalytics.GoogleCharts.NET/)

如果您有任何问题，请随时与我们联系。

# iphone - cocos2d 2.x 场景中的retainCount

> ID：12329634
> 
> 赞同：0
> 
> 时间：2012-09-08T09:36:28.087
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, retaincount

在按下主菜单中的按钮后，我正在将一个场景推送到我正在开发的游戏中。

这个场景是一个游戏场景，它应该有两层广告子层：boardLayer 和 hudLayer。

现在我正在使用 boardLayer 进行测试，我正在使用 block 调用 gamesScene 来关闭自身和 boardLayer，但是当我到达那里时，两层的保留计数都是 3（设置后似乎在增加阻止到 2，我不确定它什么时候会上升到 3)

这是什么原因造成的，应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T17:53:49.607

> 这是什么原因造成的，应该如何处理？

除非您有泄漏，否则导致它的原因无关紧要。然后你使用分配工具和/或构建和分析来追踪和修复内存增加。

`retainCount`没用；不要叫它。 [http://whentouseretaincount.com/](http://whentouseretaincount.com/)

# clojure - 这是一个简单的单子示例吗？

> ID：12329635
> 
> 赞同：1
> 
> 时间：2012-09-08T09:36:50.267
> 
> 标签：clojure, monads

[这是我在看完之后](http://channel9.msdn.com/Shows/Going+Deep/Brian-Beckman-Dont-fear-the-Monads)尝试了解单子函数的尝试。

`h`用于将两个任意函数和`bind`组合在一起。在这种情况下，运营商是什么？`f``g``unit`

```
;; f :: int -> [str]
;; g :: str -> [keyword]
;; bind :: [str] -> (str -> [keyword]) -> [keyword]
;; h :: int -> [keyword]

(defn f [v]
  (map str (range v)))

(defn g [s]
  (map keyword (repeat 4 s)))

(defn bind [l f]
  (flatten
   (map f l)))

(f 8)   ;; :: (0 1 2 3 4 5 6 7)
(g "s") ;; :: (:s :s :s :s)

(defn h [v]
  (bind (f v) g))

(h 9) 
;; :: (:0 :0 :0 :0 :1 :1 :1 :1 :2 :2 :2 :2 :3 :3 :3 :3 :4 :4 :4 :4 :5 :5 :5 :5) 
```

* * *

啊，谢谢你的评论；我知道我在哪里感到困惑。

我熟悉这些函数以及如何使用 bind 组合它们：

```
f0 :: a -> M a
g0 :: a -> M a 
```

但不具备这些功能：

```
f1 :: a -> M b
g1 :: b -> M c 
```

但本质上，`bind`如果相同，则两种情况下的运算符都是`M`相同的。就我而言，`M`是 list monad so`f1`并且`g1`可以像`f0`and一样组合`g0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:27:06.807

这是一个列表单子，所以`unit`运算符是*x* ↦ [ *x* ]，即

```
(defn return [x] [x]) 
```

（`return`在同名和目的的 Haskell 函数之后调用。）

[通过检查它是否满足单子定律](https://en.wikipedia.org/wiki/Monads_in_functional_programming#Axioms)可以看出这是单位运算符：

```
(bind (return a) f) => (bind [a] f) 
      => (flatten (map f [a])) => (flatten [f a]) => f a  ;; f returns a vector 
```

同样对于`(bind x return)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T17:28:40.420

您是否正在尝试实现列表单子？如果是这样，那么它将是：

```
(defn unit [x]
  [x]) 
```

这是基于[Haskell 实现](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Base.html#return)：

```
instance  Monad []  where
    m >>= k             = foldr ((++) . k) [] m
    return x            = [x] 
```

# iphone - 如何在 iPhone 中集成 Webview？

> ID：12329638
> 
> 赞同：2
> 
> 时间：2012-09-08T09:37:31.143
> 
> 标签：iphone, browser, safari, webview

我在 iPhone 应用程序中工作，使用 Webview 在屏幕底部加载 Addvertisement 并且工作正常，我想当用户选择 WebView 时，它会自动转到浏览器并加载到 iPhone 设备中，如何集成？请帮我

提前致谢

我试过这个：

```
- (void)viewDidLoad
{

UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 430, 320, 50)];
[webView setDelegate:self];
NSString *urlAddress = @"http://www.dasfafa./myadds.html";
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj];
[self.view addSubview:webView];
}

-(void)webViewDidStartLoad:(UIWebView *)webView 
{

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
}

-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    NSString *currentURL = self.AddvertiseWebView.request.URL.absoluteString;
    NSLog(@"currentURL:%@",currentURL);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:48:11.993

此处的代码向您展示了在您的 UIWebView 中单击时如何在 Safari 中打开链接。方法 shouldStartLoadWithRequest 是一个委托方法，在单击链接时调用。您可以覆盖该方法并告诉它在 Safari 中打开。

```
- (BOOL)webView:(UIWebView *)webView 
     shouldStartLoadWithRequest:(NSURLRequest *)request
     navigationType:(UIWebViewNavigationType)navigationType; {

    NSURL *requestURL = [ [ request URL ] retain ]; 
    // Check to see what protocol/scheme the requested URL is.
    if ( ( [ [ requestURL scheme ] isEqualToString: @"http" ] 
        || [ [ requestURL scheme ] isEqualToString: @"https" ] ) 
        && ( navigationType == UIWebViewNavigationTypeLinkClicked ) ) {
        return ![ [ UIApplication sharedApplication ] openURL: [ requestURL autorelease ] ]; 
    }
    // Auto release 
    [ requestURL release ];
    // If request url is something other than http or https it will open 
    // in UIWebView. You could also check for the other following 
    // protocols: tel, mailto and sms
    return YES;
} 
```

或试试这个

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES; } 
```

# c# - BasicHttpBinding，来自 WSDL 的 ServiceReference - 性能问题

> ID：12329639
> 
> 赞同：3
> 
> 时间：2012-09-08T09:37:37.287
> 
> 标签：c#, .net, performance, httpwebrequest, basichttpbinding

我目前在诊断一些 BasicHttpBinding/ServiceReference 性能问题时遇到了一些困难。在某些情况下，当使用`Stopwatch`对服务的同步方法调用计时时，它被测量为 2.5 秒。我已经对同一调用进行了 Wireshark (pcap) 和 Fiddler (INET Web 代理) 分析，并获得了 400 毫秒的响应时间，这与最佳情况相距不远。

那么这个 2 秒的差异是从哪里来的呢？

我正在使用以下内容`BasicHttpBinding`：

```
BasicHttpBinding httpBinding = new BasicHttpBinding
    {
        SendTimeout = TimeSpan.FromSeconds(_settings.SendTimeout),
        ReceiveTimeout = TimeSpan.FromSeconds(_settings.SendTimeout),
        MaxReceivedMessageSize = 1024 * 1024 * 100,
        Security =
        {
            Mode = BasicHttpSecurityMode.TransportCredentialOnly,
            Message = { ClientCredentialType = BasicHttpMessageCredentialType.UserName },
            Transport = { ClientCredentialType = HttpClientCredentialType.Basic }
        }
    }; 
```

我们正在使用这些值：

```
ServicePointManager.Expect100Continue = false;
ServicePointManager.DefaultConnectionLimit = 20;
ServicePointManager.MaxServicePointIdleTime = 10000; 
```

以及压缩的 HttpWebRequests：

```
public class CompressibleHttpRequestCreator : IWebRequestCreate
{
    WebRequest IWebRequestCreate.Create(Uri uri)
    {
        HttpWebRequest httpWebRequest = Activator.CreateInstance(typeof(HttpWebRequest),
            BindingFlags.CreateInstance | BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance,
            null,
            new object[] { uri, null },
            null) as HttpWebRequest;

        if (httpWebRequest != null)
        {
            httpWebRequest.AutomaticDecompression = DecompressionMethods.GZip |
                                                    DecompressionMethods.Deflate;
        }

        return httpWebRequest;
    }
} 
```

我不知道这个额外的 2 秒可能会出现在哪里 - 当我建议请求或响应在某个地方排队时会延迟请求但不确定这可能在哪里？

这些请求是 UI/用户驱动的，我们通常只有 1-5 个请求同时进行，所以`ServicePointManager.DefaultConnectionLimit`20 个应该足够了。这在有和没有 Fiddler 的情况下都会发生，所以我已经消除了任何代理重用连接等 - 加上建立新的服务器连接不需要 2 秒，可以吗？

**更新：**

经过更多诊断后，我在输出 ServiceModel 跟踪时间时发现了一些有趣的时序。

![服务模型时间](../Images/2e62cbb8c9bd7faa014fd75d4c5898f4.png)

从顶部突出显示到底部的时间是这些 TraceIdentifiers：

1.  [http://msdn.microsoft.com/en-GB/library/System.ServiceModel.MessageWritten.aspx](http://msdn.microsoft.com/en-GB/library/System.ServiceModel.MessageWritten.aspx)（写了一条消息）
2.  [http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Channels.MessageSent.aspx](http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Channels.MessageSent.aspx)（通过频道发送消息）
3.  [http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Channels.HttpResponseReceived.aspx](http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Channels.HttpResponseReceived.aspx)（收到 HTTP 响应）

我无法解释为什么 1 到 2 之间的持续时间可能需要 2 秒以上。有任何想法吗？线程是否有可能被取消调度或其他什么？

# vb.net - Windows 应用程序中的安全 MS Access 数据库

> ID：12329641
> 
> 赞同：0
> 
> 时间：2012-09-08T09:38:00.390
> 
> 标签：vb.net, security, ms-access

我使用 MS Access 2007 数据库在 Vb.Net 中创建了一个 Windows 应用程序。我希望以这样一种方式保护它，即使用该应用程序的用户不能看到它的内容或访问它。用密码保护文件不是一种安全的方法。

需要帮助来保护 MS Access 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:45:39.553

你说用密码保护文件不是一种安全的方法。为什么？如果这不是您的安全方式，您可以使用某种算法加密所有记录。您还可以将数据库文件隐藏在另一个目录中（*与您的 EXE 文件不在同一位置*）。

# php - 在 Model Zend Db Table 中更改数据库名称

> ID：12329642
> 
> 赞同：3
> 
> 时间：2012-09-08T09:38:08.847
> 
> 标签：php, zend-framework

我是 Zend 框架的新手。我在 application.ini 中声明了数据库名称和用户名/密码，如下所示：

```
resources.db.params.host = "localhost"
resources.db.params.username = "root"
resources.db.params.password = "root"
resources.db.params.dbname = "abc" 
```

现在当我创建一个模型类时，我只需要声明表名

```
protected $_name = "table1" 
```

然后它只是连接到数据库“abc”中的“table1”。现在我想将 dbname 更改为“xyz”并连接到表“table2”。我可以在不更改模型类某处的 application.ini 中的默认数据库的情况下做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:49:46.030

你可以检查这些[~~链接1~~](http://www.amazium.com/blog/using-different-databases-with-zend-framework)，[链接2](http://blog.ericlamb.net/2011/05/connect-to-multiple-databases-with-zend-framework/)

还有[这个SO帖子](https://stackoverflow.com/questions/4630370/php-zend-framework-connecting-to-multiple-databases-one-at-a-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T11:04:25.183

在模型类中使用此代码。

```
public function __construct($config = array()) {
    $config['schema'] = "db_name";
    parent::__construct($config);
} 
```

# javascript - 验证`` 在标签上？

> ID：12329647
> 
> 赞同：0
> 
> 时间：2012-09-08T09:38:50.583
> 
> 标签：javascript, forms, validation

我看过一堆 JavaScript 验证教程，它们在你输入时验证你的输入。

例如：[http ://reactiveraven.github.com/jqBootstrapValidation/](http://reactiveraven.github.com/jqBootstrapValidation/)

然而，它们似乎都在不断地验证，这可能会让最终用户感到恼火。

我可以让它只有在你切换到下一个之后才能验证`<input>`，`<button>`或者`<a>`？

[使用纯 JS，没有 JQuery 或其他库]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T09:40:29.007

当然。您想`onblur`在您的元素上使用该事件。

```
elem.addEventListener('blur', validateInput, false); // validateInput being your validation function 
```

# iphone - iPhone：如何禁用特定应用程序通知声音的振动？

> ID：12329650
> 
> 赞同：1
> 
> 时间：2012-09-08T09:39:56.943
> 
> 标签：iphone, notifications, vibration

我正在尝试构建一个带有一些通知的应用程序。一切都在逻辑上工作：

如果在我的用户设置中振动模式已打开，则手机会为我的应用通知振动 如果在我的用户设置中振动模式已关闭，则手机不会为我的应用通知振动。现在，我正在使用以下代码来播放声音（带有振动）：

```
- (void)playSound:(NSString *)soundName {
CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef  = CFBundleCopyResourceURL (mainBundle,
                                                     (__bridge CFStringRef)[soundName stringByDeletingPathExtension],
                                                     (__bridge CFStringRef)[soundName pathExtension],
                                                     NULL);
if (soundFileURLRef) {
    SystemSoundID soundFileObject;
    AudioServicesCreateSystemSoundID (soundFileURLRef, &soundFileObject);
    AudioServicesPlaySystemSound (soundFileObject);

    [self performSelector:@selector(disposeSound:)
               withObject:[NSNumber numberWithInteger:soundFileObject]
               afterDelay:5];

    CFRelease(soundFileURLRef); 
}}

- (void)disposeSound:(NSNumber *)number {
AudioServicesDisposeSystemSoundID ([number integerValue]);} 
```

但是，我的 iPhone 上还有其他一些应用程序（例如报纸应用程序），即使在我的用户设置中振动模式已打开，当这些应用程序执行通知时，手机也会播放没有振动的声音。我的应用程序如何具有相同的行为？

提前感谢您的回复。

# php - 存储/检索 PGP 私钥和密码的安全方法？

> ID：12329652
> 
> 赞同：13
> 
> 时间：2012-09-08T09:40:05.273
> 
> 标签：php, security, postgresql, pdo, pgp

我有一个需要存储服务器登录信息的 Web 应用程序。我使用 2048 位 PGP 公钥来加密插入的密码（请参阅 参考资料`insertServerDef`）和带有密码短语的私钥来解密密码（请参阅参考资料`getServerDef`）。

据我了解，这条链中最薄弱的环节是私钥和密码的处理。正如您从下面的代码中看到的那样，我只是`file_get_contents`用来从位于当前 Web 目录中的文件中检索密钥和密码——不好。

我的问题是：安全检索用于解密登录信息的私钥和密码的好方法是什么？也许我应该通过经过身份验证的远程文件服务器存储/检索私钥？

我已经搜索了最佳实践，但找不到太多。

```
class DB {

    protected $_config;
    protected $_iUserId;
    protected $_iServerId;
    protected $_dbConn;
    protected $_sPubKey;
    protected $_sPrivKey;

    public function __construct($iUserId, $iServerId) {

        //bring the global config array into local scope
        global $config;
        $this->_config = $config;

        $this->_iUserId = $iUserId;
        $this->_iServerId = $iServerId;

        $this->_sPubKey = file_get_contents("public_key");
        $this->_sPrivKey = file_get_contents("private_key");
        $this->_sPrivKeyPass = trim(file_get_contents("private_key_pass"));

    }

    //connect to the database
    public function connect() {
        try {

            $this->_dbConn = new PDO("pgsql:host=".$this->_config['db_host']." dbname=".$this->_config['db_name'],$this->_config['db_username'],$this->_config['db_password']);

            echo "PDO connection object created";
        } catch(PDOException $e) {

            echo $e->getMessage();

        }

    }

    public function insertServerDef($sHost, $iPort, $sUser, $sPass) {

        //testing
        $iUserId = 1;

        $oStmt = $this->_dbConn->prepare("INSERT INTO upze_server_def (server_id, host_address, ssh_port, username, pass, user_id) VALUES (DEFAULT, :host_address, :ssh_port, :username, pgp_pub_encrypt(:pass,dearmor(:pub_key)), :user_id)");
        $oStmt->bindParam(':host_address',$sHost);
        $oStmt->bindParam(':ssh_port',$iPort);
        $oStmt->bindParam(':username',$sUser);
        $oStmt->bindParam(':pass',$sPass);
        $oStmt->bindParam(':pub_key',$this->_sPubKey);

        $oStmt->bindParam(':user_id',$iUserId);
        $oStmt->execute();

    }

    public function getServerDef($iServerId) {

        $oStmt = $this->_dbConn->prepare("  SELECT server_id, pgp_pub_decrypt(pass,dearmor(:priv_key),:priv_key_pass) As decryptpass 
                                            FROM upze_server_def usd 
                                            WHERE usd.server_id = :server_id
                                        ");

        $oStmt->bindParam(':server_id', $iServerId);
        $oStmt->bindParam(':priv_key', $this->_sPrivKey);
        $oStmt->bindParam(':priv_key_pass', $this->_sPrivKeyPass);
        $oStmt->execute();

        while($row = $oStmt->fetch()) {
            echo "<pre>".print_r($row)."</pre>";
        }

    }

    //close any existing db connection
    public function close() {
        $this->_dbConn = null;
    }

    //close any existing db connections on unload
    public function __destruct() {
        $this->_dbConn = null;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T10:03:29.940

（注意：我不是安全专家。我对该领域感兴趣，但仅此而已。请记住这一点。）

## 如果可能，根本不要存储密码

这在很大程度上取决于您的需求。最好的选择是根本不使用双向加密；如果您只能存储[加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)和[单向哈希](http://en.wikipedia.org/wiki/Cryptographic_hash_function)的密码摘要，那是理想的。您仍然可以测试它们以查看它们是否与用户提供的密码匹配，但您永远不会存储它。

更好的是，如果您的客户端使用一些健全的协议（即：不是通常实现的 HTTP），您可以使用[质询-响应身份验证机制](http://en.wikipedia.org/wiki/Challenge%E2%80%93response_authentication)，这意味着您的应用程序永远*不需要*查看用户的密码，即使在验证他们时也是如此。遗憾的是，这在公共网络上几乎不可能实现，因为它的安全性让 80 年代的程序员感到羞耻。

## 如果您必须存储密码，请将密钥与应用程序隔离

如果您必须能够解密密码，那么理想情况下，您不应该将所有详细信息都放在一个地方，当然也不能放在一个可复制、易于访问的地方。

出于这个原因，我个人不喜欢为此目的使用 PgCrypto（就像你正在做的那样），因为它会迫使你向服务器透露私钥和（如果有的话）密码，它可能会在 PostgreSQL 的日志文件或以其他方式可能被嗅探。我想做我的加密客户端，在那里我可以使用 PKCS#11、密钥代理或其他工具，让我解密数据而无需我的代码能够访问密钥。

安全密钥存储问题是[PKCS#11](http://en.wikipedia.org/wiki/PKCS_%E2%99%AF11)发明的一部分。它为应用程序和加密提供者提供了一个通用接口，可以与任何可以提供某些签名和解密服务*而无需透露其密钥*的事物进行对话。通常但不仅限于使用基于硬件的加密，如智能卡和硬件加密模块。可以告诉这些设备对传递给它们的数据进行签名或解密，并且可以在不泄露密钥的情况下这样做。如果可能，请考虑使用智能卡或 HSM。据我所知，PgCrypto 不能使用 PKCS#11 或其他 HSM/智能卡。

如果您不能这样做，您仍然可以使用密钥管理代理，在服务器启动时手动将密钥加载到密钥管理程序中，并且密钥管理程序提供 PKCS#11（或其他一些）接口用于通过套接字进行签名和解密。这样，您的 Web 应用程序就根本不需要知道密钥。`gpg-agent`可能有资格为此目的。同样，据我所知，PgCrypto 不能使用密钥管理代理，尽管添加它是一个很棒的功能。

即使是很小的改进也会有所帮助。最好不要将密钥的密码存储在磁盘上，因此您可能需要在应用程序启动时输入它，以便可以解密密钥。您仍然将解密的密钥存储在内存中，但解密它的所有详细信息不再在磁盘上并且很容易获得。攻击者从内存中窃取解密的密钥比从磁盘中获取“password.txt”要困难得多。

您选择做什么在很大程度上取决于您的安全需求的详细信息以及您正在使用的数据。在您的位置上，如果可能的话，我只是不存储密码，如果必须，我想使用与 PKCS#11 兼容的硬件设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T22:38:29.600

我可能正在做和你类似的事情。我目前希望保护本地 Web 服务器数据库上的个人信息，因此我使用公钥（存储在 Web 服务器本身上）对其进行加密，并使用存储在 cookie 中的私钥对其进行解密，其生命周期很短（30 分钟）我）。

通过 SSL 连接，这将防止密钥落入坏人之手，并且不会将其存储在服务器上。理想情况下，我应该仔细检查 PHP 是否不会在服务器上缓存 cookie 值，但即使这样做，与简单地窃取明文数据库相比，这个安全层对于攻击者来说仍然是一个更大的障碍。

这对您来说是否是一个好方法取决于您的应用程序是否需要访问服务器凭据，即使用户未通过 Web 登录也是如此。就我而言，仅需要通过网络应用程序进行解密，因此 cookie 就足够了。但是，如果您需要无人值守使用，则需要将私钥存储在服务器上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T21:58:35.130

我相信除非你描述你想要避免的威胁场景，否则没有答案。

让我重新表述一下您的情况：您需要一个纯文本密码才能通过 SSH 访问远程系统。目标是保护此密码，但在需要时提供。

确实没有办法既保护密码又能够以纯文本形式使用。总是有办法解密它，这需要机制和密钥。

您可以尝试对此进行一些迭代，例如再次保护此机密，但最后您需要将最终的纯文本密码存储到变量中并将其传递给身份验证方案。

您想要避免的威胁场景是什么？

*   有人窃取了您的数据库转储，并且不应该知道存储的密码
*   有人闯入您的服务器并使用秘密密码读取数据库和文件
*   有人闯入您的服务器，更改您的脚本并在使用解密的纯文本密码时进行拦截

你看，总有办法造成伤害。如果您不定期检查系统上的不规则活动，则可能造成大多数伤害。就像监视所有日志文件的攻击一样。可能会将日志发送到另一个系统日志服务器，这样如果它们在同一台服务器上，攻击者就无法更改它们。如果您尽一切可能防止攻击者进入您的系统，那么安全存储密码短语的需求就会减少。

将密码短语存储到 RAM 中可能是一个想法，例如存储在 RAM 磁盘或专用内存中。这样，如果服务器被盗，它很可能会断电并忘记密码。但是您必须有办法从远程恢复密码以在重新启动后继续操作。但同样：如果您无法检测到攻击者在您的系统上，那么密码是在 RAM 中还是在磁盘上都没有意义——它可以被读取。

我想知道你为什么首先要处理密码。如果我使用 SSH，我总是尝试使用 SSH 密钥进行加密身份验证。这在目标服务器上更安全，因为一个帐户（如 root）可以拥有多个 SSH 密钥，如果存储在您服务器上的一个被泄露，可以将其删除而不会干扰其他密钥。是的，这些 SSH 密钥也可以使用密码进行保护。

# html - 三星智能电视：img 标签不显示图像，模拟器网络连接？

> ID：12329658
> 
> 赞同：0
> 
> 时间：2012-09-08T09:41:02.907
> 
> 标签：html, samsung-smart-tv

我尝试显示使用 img 标签的图像。当图像在我的应用程序的文件夹中时它可以工作，我的代码是
`<img src="images/picture.jpg" >`，
但是当我的代码是时它什么都不显示`<img src="www.example.com/pic.jpg" >`（我想在我的应用程序中显示来自网站的图像。）
它是关于模拟器中的网络连接？对不起，我的英语不好，

## 谢谢你。

编辑：这是我的浏览器和模拟器截图 [http://upic.me/ts/i/ak/browser.jpg](http://upic.me/ts/i/ak/browser.jpg) , [http://upic.me/ts/i/gm/emulator.jpg](http://upic.me/ts/i/gm/emulator.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T10:43:07.833

尝试从“根”目录插入图像的完整路径，即

```
<img src="./{your_directory_tree_here}/images/picture.jpg" /> 
```

这里的诀窍是在你的路径之前使用“ **./ ”。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:41:47.913

使用图片的完整地址（url），包括 http 部分

喜欢

```
 <img src="http://www.example.com/pic.jpg" > 
```

# linux - 如何告诉 sed“不要删除某些字符”？

> ID：12329660
> 
> 赞同：2
> 
> 时间：2012-09-08T09:42:02.423
> 
> 标签：linux, sed

我有一个包含阿拉伯字符和一些其他字符（标点符号、数字、英文字符，...）的文本文件。我如何告诉 sed 删除文件中的所有字符，阿拉伯语除外？简而言之，我可以说我们通常告诉 sed 删除/替换一些特定字符并打印其他字符，但现在我正在寻找一种方法来告诉 sed 只打印我想要的字符，并删除所有其他字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:59:14.297

使用 GNU sed，您应该能够通过其十六进制代码指定字符。您可以在字符类中使用它们：

```
sed 's/[\x00-\x7F]//g' # hex notation
sed 's/[\o000-\o177]//g' # octal notation 
```

您也应该能够使用以下`tr`命令达到相同的效果：

```
tr -d '[\000-\177]' 
```

这两种方法都假定您的输入文件采用 UTF8 编码。多字节字符设置了最高位，因此您可以简单地去除标准 ASCII（7 位）字符的所有内容。

* * *

要保留除一些明确定义的字符之外的所有内容，请使用否定字符类：

```
sed 's/[^characters you want to keep]//g' 
```

使用类似的模式`[^…]\+`可能会提高正则表达式的性能。

# c - 检查 LAN 是否已插入

> ID：12329661
> 
> 赞同：4
> 
> 时间：2012-09-08T09:42:16.277
> 
> 标签：c, linux

我想检查 LAN 电缆是否插入到 linux 系统上，/sys 或 /proc 中是否有我可以检查的文件（我想在 C 中进行）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T09:51:25.957

要检查是否插入了电缆，您可以查看 /sys/class/net/

例如。对于 eth0 连接：

```
$ grep "" /sys/class/net/eth0/*
/sys/class/net/eth0/carrier:0
/sys/class/net/eth0/operstate:down 
```

如您所见，电缆未插入。如果它被插入，我得到：

```
/sys/class/net/eth0/carrier:1
/sys/class/net/eth0/operstate:up 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:43:50.497

运行`ifconfig`将显示所有连接的接口的命令。

# python - Google App Engine 和服务帐户

> ID：12329662
> 
> 赞同：-2
> 
> 时间：2012-09-08T09:42:50.217
> 
> 标签：python, google-app-engine, oauth-2.0, google-drive-api, google-api-python-client

我通过服务帐户访问了 Google 的 api。

最初，appengine 没有使用服务帐户的选项。不，我发现这个 URL 说我们可以做同样的事情。 [https://developers.google.com/api-client-library/python/platforms/google_app_engine#ServiceAccounts](https://developers.google.com/api-client-library/python/platforms/google_app_engine#ServiceAccounts)

我尝试了该过程无法成功。另一方面，我有两个问题。

1.  这个 api 如何识别我有帐单的 Google 项目帐户。
2.  该过程没有使用我们从 Google 控制台获得的私钥。 ~~当我尝试这就是我所看到的。~~

    ~~Traceback（最近一次调用最后一次）：文件“/base/data/home/apps/tempid/cons-main.361607602228494295/main.py”，第 63 行，在 service = build('drive', 'v2', http= http）文件“/base/data/home/apps/tempid/cons-main.361607602228494295/oauth2client/util.py”，第 120 行，在 positional_wrapper 返回包​​装（*args，**kwargs）文件“/base/data/ home/apps/tempid/cons-main.361607602228494295/apiclient/discovery.py”，第 193 行，在构建中，内容 = http.request(requested_url) 文件“/base/data/home/apps/tempid/cons-main .361607602228494295/oauth2client/util.py”，第 120 行，在 positional_wrapper 中返回包装（*args，**kwargs）文件“/base/data/home/apps/tempid/cons-main.361607602228494295/oauth2client/client.py” ，第 405 行，在 new_request 中。_refresh(request_orig) 文件“/base/data/home/apps/tempid/cons-main.361607602228494295/oauth2client/appengine.py”，第 162 行，在 _refresh raise AccessTokenRefreshError(str(e)) AccessTokenRefreshError~~ .

有什么答案吗？请忽略上面的错误，我已经解决了。错误在于定义范围。

我将我的 appengine 应用程序服务帐户 ID 添加到控制台，添加了帐单并且没有使用任何 API 密钥。

```
 service.files().insert(
        body=body,
        ).execute() 
```

此语句引发异常。

```
An error occured: <HttpError 403 when requesting https://www.googleapis.com/drive/v2/files?alt=json returned "Daily Limit Exceeded. Please sign up"> 
```

我想知道我是否已将我的 appengine 服务帐户添加到 api 控制台的 2-3 个项目中，并且我没有使用任何 api 密钥，该项目的数据将进入何处。——</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:50:28.460

仅某些特定服务支持服务帐户。看来您正在尝试使用 Google Drive SDK，所以我添加了 google-drive-sdk 标签。希望观看该标签的人可以告诉您云端硬盘是否支持服务帐户。

Drive 支持提供的服务帐户 - 请使用您的确切代码更新帖子。实例化对象时是否使用正确的[Google Drive 范围](https://developers.google.com/drive/scopes#google_drive_scopes)`AppAssertionCredentials`？

[您可能希望首先在App Engine shell](https://developers.google.com/appengine/articles/remote_api)中尝试此操作，以便轻松捕获异常并检查异常对象内部的内容。希望您在尝试获取访问令牌时能够找到服务器返回的错误响应。

您可能必须将 App Engine 服务帐户电子邮件地址（从 App Engine 控制台）添加为 API 控制台项目的团队成员。我们必须这样做才能关联 BigQuery 上的计费/数据权限。

您无需使用 API 控制台中的任何私钥——App Engine 会自动处理服务帐户的创建和密钥管理。

# javascript - 如何使用 jQuery 在 json 子数组中添加值？

> ID：12329665
> 
> 赞同：0
> 
> 时间：2012-09-08T09:43:11.513
> 
> 标签：javascript, jquery, arrays, json, foreach

如何使用 jQuery 在 json 子数组中添加值？

我已经构建了这段代码，但它不起作用......开发人员控制台告诉我“无法调用未定义的方法‘push’”

```
function save(){
    var Arguments = [];
    $('.builder-page').each(function(){
        var title = $(this).find('input[name=title]').val();
        Arguments.pages.push({'title':title})
    });
    console.log(Arguments);
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T09:47:27.207

您需要将其声明为具有数组作为其`pages`属性的对象。

```
var Arguments = {pages: []}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T09:47:43.047

`Arguments`你的数组不是`pages`。您的代码中没有任何迹象表明每个页面都已创建...

# objective-c - NSData 空闲内存

> ID：12329666
> 
> 赞同：2
> 
> 时间：2012-09-08T09:43:47.450
> 
> 标签：objective-c, nsdata

我的程序的一部分读取目录，然后计算文件夹中每个文件的哈希值。每个文件都加载到内存中，我不知道如何释放它。我在这里阅读了很多主题，但找不到正确的答案。有人可以帮忙吗？

```
#import "MD5.h"
...

NSFileManager * fileMan = [[NSFileManager alloc] init];
NSArray * files = [fileMan subpathsOfDirectoryAtPath:fullPath error:nil];

if (files) 
{
  for(int index=0;index<files.count;index++) 
  {
    NSString * file = [files objectAtIndex:index];
    NSString * fullFileName = [fullPath stringByAppendingString:file];
    if( [[file pathExtension] compare: @"JPG"] == NSOrderedSame )
    {
      NSData * nsData = [NSData dataWithContentsOfFile:fullFileName];
      if (nsData)
      {
        [names addObject:[NSString stringWithString:[nsData MD5]]];
         NSLog(@"%@", [nsData MD5]);       
      }
    }
  }
} 
```

和MD5.m

```
#import <CommonCrypto/CommonDigest.h>

@implementation NSData(MD5)

- (NSString*)MD5
{
    // Create byte array of unsigned chars
  unsigned char md5Buffer[CC_MD5_DIGEST_LENGTH];

    // Create 16 byte MD5 hash value, store in buffer
    CC_MD5(self.bytes, (uint)self.length, md5Buffer);

    // Convert unsigned char buffer to NSString of hex values
  NSMutableString *output = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];
  for(int i = 0; i < CC_MD5_DIGEST_LENGTH; i++) 
        [output appendFormat:@"%02x",md5Buffer[i]];

  return output;
}

@end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T10:12:44.093

如果您使用的是 ARC，那么数据将在最后一次引用消失后的某个时间点自动释放。在您的情况下，这将是它在 if 语句末尾超出范围时。

简而言之，您拥有的代码是可以的。

有一件事，创建数据对象时使用的一些内存可能保存在自动释放池中。在您回到事件循环之前，它不会消失。如果你将代码包装在一个`@autoreleasepool { ... }`块中，这个问题就会消失。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

# javascript - 未捕获的引用错误：未定义 validateform

> ID：12329668
> 
> 赞同：0
> 
> 时间：2012-09-08T09:44:00.400
> 
> 标签：javascript

代码非常简单。但这是我做的第一件事，我根本不明白我做错了什么。这也是直接来自 OCR 的原始代码。

这是 GCSE 计算课程。我不必修复它，但我不知道在基本代码不工作的情况下我应该如何测试我要添加的东西。

```
<head>
    <title>Exam entry</title>
    <script language="javascript" type="text/javascript">
        function validateForm(document) {
            var result = true;
            var msg = "";
            if (document.ExamEntry.name.value == "") {
                msg += "You must enter your name \n";
                document.ExamEntry.name.focus();
                document.getElementById(‘name’).style.color = "red";
                result = false;
            }
            if (document.ExamEntry.subject.value == "") {
                msg += "You must enter the subject \n";
                document.ExamEntry.subject.focus();
                document.getElementById(‘subject’).style.color = "red";
                result = false;
            }
            if (msg == "") {
                return result;
            } {
                alert(msg)
                return result;
            }
        }
    </script>
</head>
<body>
     <h1>Exam Entry Form</h1>

    <form name="ExamEntry" method="post" action="success.html">
        <table width="50%" border="0">
            <tr>
                <td id="name">Name</td>
                <td>
                    <input type="text" name="name" />
                </td>
            </tr>
            <tr>
                <td id="subject">Subject</td>
                <td>
                    <input type="text" name="subject" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" name="Submit" value="Submit" onclick= return "validateForm()";  />
                </td>
                <td>
                    <input type="reset" name="Reset" value="Reset" />
                </td>
            </tr>
        </table>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:03:05.493

您的代码有几个语法错误。我已经删除了。这是[小提琴](http://jsfiddle.net/syFU9/4/)链接

```
<h1>Exam Entry Form</h1>
    <form name="ExamEntry" method="post" action="success.html">
        <table width="50%" border="0">
            <tr>
                <td id="name">Name</td>
                <td>
                    <input type="text" name="name" />
                </td>
            </tr>
            <tr>
                <td id="subject">Subject</td>
                <td>
                    <input type="text" name="subject" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" name="Submit" value="Submit" onclick= " return validateForm();"  /><!--js function inside quotes-->
                </td>
                <td>
                    <input type="reset" name="Reset" value="Reset" />
                </td>
            </tr>
        </table>
    </form>

<script>
//function had illegal parameter
function validateForm() {
            var result = true;
            var msg = "";
            if (document.ExamEntry.name.value == "") {
                msg += "You must enter your name \n";
                document.ExamEntry.name.focus();
                document.getElementById('name').style.color = "red";
                 // document.getElementById(‘name’).style.color = "red";--->Id should be in quotes
                result = false;
            }
            if (document.ExamEntry.subject.value == "") {
                msg += "You must enter the subject \n";
                document.ExamEntry.subject.focus();
                document.getElementById('subject').style.color = "red";
                // document.getElementById(‘subject’).style.color = "red";--->Id should be in quotes
                result = false;
            }
            if (msg == "") {
                return result;
            } {
                alert(msg);
                return result;
            }
        }
</script> 
```

# ruby - Ruby 变量每个循环替换

> ID：12329669
> 
> 赞同：0
> 
> 时间：2012-09-08T09:44:17.587
> 
> 标签：ruby, variables, substitution

我需要在 2 个地方替换 X_VARIABLE。对于第一个 X_VARIABLE，我想保留文本“删除”对于第二个 X_VARIABLE，我想保留“d_cars_path”

```
<% @cars.each do |x| %>
    <% @a = @b.send(x) %>
    <% if @a == true %>
      <%= button_to "removeX_VARIABLE", X_VARIABLEd_cars_path(:id => @user.id), class: "btn btn-large btn-primary" %>
    <% end %>
<% end %> 
```

我正在寻找有关变量替换语法的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:54:58.980

我会写：

```
<% @cars.each do |x| %>
  <% if @b.send(x) %>
    <%= button_to "remove#{x}", 
          send(:"#{x}d_cars_path", id: @user.id), 
          class: "btn btn-large btn-primary" %>
  <% end %>
<% end %> 
```

# c# - C#中的Printer Spooler，AddPrinterDriverEx函数

> ID：12329670
> 
> 赞同：0
> 
> 时间：2012-09-08T09:44:18.403
> 
> 标签：c#, printing, driver

谷歌了很多，但空手而归..

我想知道是否有人在 c# 中使用 winspool.drv 使用 AddPrinterDriver 或 AddPrinterDriverEx API。

请向我提供初始化和使用此 API 调用的代码。

紧迫的..！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:19:01.907

我一直在研究同样的问题一段时间，并且有一些东西可以开始，尽管我仍然遇到问题。我相信我现在真正的问题是正确创建依赖文件列表。也许你知道如何为我填写这些空白？

谢谢，斯蒂芬

```
 private const uint APD_COPY_NEW_FILES = 0x00000008;
    private const uint APD_COPY_ALL_FILES = 0x00000004;

    [DllImport("winspool.drv", CharSet = CharSet.Unicode, SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool AddPrinterDriverExW([In, Optional, MarshalAs(UnmanagedType.LPWStr)] string pName, uint Level, [In] IntPtr pPrinter, uint Flags);

    public static void InstallPrinterDriver2(string configFile, string dataFile, string[] dependentFiles, string driverPath, string driverName, string helpFile = null,      string monitorName = null, string defaultDataType = "RAW", bool is32Bit = false)
    {
        DRIVER_INFO_3 di3 = new DRIVER_INFO_3();
        di3.cVersion = 0x03;
        di3.pConfigFile = configFile;
        di3.pDataFile = dataFile;
        di3.pDependentFiles = string.Join(",", dependentFiles);
        di3.pDriverPath = driverPath;
        di3.pEnvironment = is32Bit ? @"Windows NT x86" : @"Windows x64";
        di3.pHelpFile = helpFile;
        di3.pMonitorName = monitorName;
        di3.pName = driverName;
        di3.pDefaultDataType = defaultDataType;

        IntPtr intPtr = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(DRIVER_INFO_3)));
        try
        {
            Marshal.StructureToPtr(di3, intPtr, false);
            if (!AddPrinterDriverExW(null, 3, intPtr, APD_COPY_NEW_FILES))
            {
                int w32Error = Marshal.GetLastWin32Error();
                throw new Win32Exception(w32Error);
            }
        }
        finally
        {
            if (IntPtr.Zero != intPtr) Marshal.FreeHGlobal(intPtr);
        }
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct DRIVER_INFO_3
    {
        public uint cVersion;
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pName; // QMS 810
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pEnvironment; // Win32 x86
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pDriverPath; // c:\drivers\pscript.dll
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pDataFile; // c:\drivers\QMS810.PPD
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pConfigFile; // c:\drivers\PSCRPTUI.DLL
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pHelpFile; // c:\drivers\PSCRPTUI.HLP
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pDependentFiles; // PSCRIPT.DLL\0QMS810.PPD\0PSCRIPTUI.DLL\0PSCRIPTUI.HLP\0PSTEST.TXT\0\0
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pMonitorName; // "PJL monitor"
        [MarshalAs(UnmanagedType.LPWStr)]
        public string pDefaultDataType; // "EMF"
    } 
```

# android - 如何从它的孩子旁边的活动中恢复活动

> ID：12329674
> 
> 赞同：0
> 
> 时间：2012-09-08T09:44:59.207
> 
> 标签：android, android-intent, android-activity, android-lifecycle

我想在以下情况下恢复活动，

活动 A 调用活动 B 活动 B 调用活动 C

现在我想去活动 A 但不使用现有实例创建新的。

我已经尝试过，`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`但它只是重新排序，如果我按下回，我就在我不想去的活动 C 上。

T 想在启动 Activity A 的同时清除 Activity B 和 Activity C。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:50:32.230

使用[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)标志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:53:14.847

您可以通过在清单文件中`SingleInstance`声明来创建活动 A `launchMode`，因此每次都不会创建活动。

您在调用活动 B 和 C 时使用 Flag`NO_HISTORY`的意图。所以当你按下后退键时，它们不会在堆栈上。

* * *

阅读意图 - 意图标志 - 来自开发人员文档的清单文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:31:01.837

您需要设置`FLAG_ACTIVITY_CLEAR_TOP`并`FLAG_ACTIVITY_SINGLE_TOP`从堆栈中删除活动 B 和 C，并返回到活动 A 的现有实例。像这样：

```
Intent intent = new Intent(this, ActivityA.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T10:08:51.883

您应该熟悉[Activity 生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html) 以及[Activity 类](http://developer.android.com/reference/android/app/Activity.html) 以及 Bundle 类以及有关该主题的[本地讨论](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)，其中包括示例代码。使用 SingleInstance 会有所帮助，但您可能会面临操作系统在后台杀死您的应用程序的风险。在关闭之前保存数据将允许您通过前进到您的其他活动之一或新的不相关应用程序（例如电话响铃）来重建应用程序在用户将其置于后台时的状态。

# clojure - 如何停止使用 ring.util.serve 启动的环服务器

> ID：12329677
> 
> 赞同：2
> 
> 时间：2012-09-08T09:45:27.990
> 
> 标签：clojure, ring

我正在使用 repl 中启动我的服务器

```
(use 'ring.util.serve)
(serve my-app/handler) 
```

一旦开始使用它，我如何停止服务器。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:21:37.120

`ring.util.serve`还包含`stop-server`哪些可用于停止服务器。所以这应该适合你：

```
(stop-server) 
```

# objective-c - 以编程方式手动链接在 XIB 中声明的 UIButton 和 VIewController 中的属性

> ID：12329681
> 
> 赞同：0
> 
> 时间：2012-09-08T09:46:04.243
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, xib

XCode 要求您声明类似的东西`IBAction`，`IBOutlet`然后您需要使用**MOUSE**来链接参考插座，这是我非常讨厌的事情。

我想以`XIB` 编程方式链接声明的项目，可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T09:59:40.367

可能您也应该尝试以编程方式添加按钮。例子：

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
CGRect myButtonFrame = CGRectMake(70, 200, 180, 60);
[myButton addTarget:self action:@selector(MyButtonAction)forControlEvents:UIControlEventTouchUpInside];
myButton.frame = myButtonFrame;
[self.view addSubview:myButton]; 
```

}

```
-(void)MyButtonAction
{
NSLog(@"ACTION");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:00:06.400

是的，这是可能的。但不推荐。您可以将标签分配给您的控件，然后使用`[self.view viewWithTag:TAG];`消息。`self.view.subviews`或者您可以在数组中查找所需的控件。但无论如何，你最好不要那样做。

# ruby-on-rails - 如何更新模型属性的值

> ID：12329687
> 
> 赞同：7
> 
> 时间：2012-09-08T09:46:49.303
> 
> 标签：ruby-on-rails, database, activerecord

我有一个数据库项目和两个项目。他们有名为“受欢迎程度”的列，我将其设置为 0。

```
class Item < ActiveRecord::Base
  attr_accessible .. :popularity, ..

  before_create :default_values
  def default_values
    if self.popularity.nil? == true || self.popularity.blank? == true || self.popularity.class != Integer
      self.popularity = 0
    end
  end 
```

如何通过 code\console 更改此值并保存？我试过

```
 Item.find(1).popularity = 1
  Item.save 
```

但这并没有挽救我的价值。怎么了？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T09:56:56.397

这是解决方案

```
item = Item.find(1)
item.popularity = 1
item.save 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T09:57:33.153

```
item = Item.first
item.popularity = 1
item.save 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-23T10:39:10.317

```
Item.update(1, popularity: 1) 
```

*   运行验证并保存。

*   如果不存在，则引发未找到的记录。

有关更新属性的更多信息[https://zaiste.net/posts/rails-activerecord-updating-attributes-object-fields/](https://zaiste.net/posts/rails-activerecord-updating-attributes-object-fields/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T13:33:51.907

另一种单行替代方案：

```
Item.first.update({:popularity => "1"}) 
```

# bash - 批量重命名文件 (bash)

> ID：12329688
> 
> 赞同：-1
> 
> 时间：2012-09-08T09:46:59.743
> 
> 标签：bash, rename

我有几个包含照片的文件夹，每个文件夹平均有 15000 张照片，现在我想要一个脚本来重命名文件。可能将文件 obraz2.jpg.1 的名称更改为 obraz2.jpg.1500，现在将每个文件名的 chcaiłbym 更改为创建日期，例如：010912-04-00-34.jpg 文件自 2012 年 9 月 1 日起小时 4 分 0 秒 34，有一个 bash 脚本

```
#!/bin/bash
# Copy jpg files in a directory to a new name based solely on creation date
# FROM: obraz2.jpg.1 > 1500  Created on: 2012-04-18 18:51:44
# TO:    20120418_185144.jpg
for i in *.*
do
#  mod_date=$(stat -c "%y" "$i"|sed 's/\..*$//')
#  mod_date=$(stat -c "%y" "$i"|awk '{print $1"_"$2}'|sed 's/\..*$//')
mod_date=$(stat --format %y "$i"|awk '{print $1"_"$2}'|cut -f1 -d'.'|sed 's/[: -]//g')
 cp "$i" "$mod_date".jpg
done 
```

我只是有一个问题，就是他给 010912-04-00-34.jpg 的名字，这不是一个脚本，20120418_185144.jpg 应该改变什么才能让它像我想要的那样，我会添加脚本，我发现自己没有写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:12:53.417

为了重新格式化您的日期字符串，您可以使用以下`date`程序：

```
for i in *.*; do
     stat_date=$(stat --format %y "$i"|awk '{print $1"_"$2}' | cut -f1 -d'.'|sed 's/_/ /g')
     date_fmt=$(date --date="$stat_date" +"%d%m%y-%H-%M-%S")
     cp $i ${date_fmt}.jpg
done 
```

# php - PHP日历显示几个

> ID：12329699
> 
> 赞同：0
> 
> 时间：2012-09-08T09:48:28.657
> 
> 标签：php, mysql

我正在做一个每周（24 小时日历），这将用于记录已预订的时间和日期。

这就像您预订的带有插槽的时间表。为了确保已预订和未预订的时段不同，我在 PHP 中放入了 if 语句来检查数据库的时间。

问题是；我相信我的 if 语句只适用于一行，而不是适用于多个的 while 语句。- 所以基本上我希望能够每天预订超过一小时 - 并且每天看到超过一小时

（数据库插入不是问题 - 在日历上显示它是）

我不能做一个while语句，因为我不确定如何用一个来构建我的日程安排/日历。

**这是我的问题： http:** [//postimage.org/image/gcb3x3fk3/](http://postimage.org/image/gcb3x3fk3/) （如果我在 9 月 9 日预订 18:00 - 它不会显示）

$globalid 是一个全局变量，不包含在下面的文件/代码中（但包含在内）

**我的代码**

```
<div id="calendar">
<?
if(isset($_POST['add_week'])){
    $week = date('d-m-Y', strtotime($_POST['last_week']));
    $new_week =  strtotime ( '+1 week' , strtotime ( $week ) ) ;
    $new_week = date('d-m-Y', $new_week);

    $week_number = date("W", strtotime( $new_week));
    $year = date("Y", strtotime( $new_week));
}else if(isset($_POST['back_week'])){
    $week = date('d-m-Y', strtotime($_POST['last_week']));
    $new_week =  strtotime ( '-1 week' , strtotime ( $week ) ) ;
    $new_week = date('d-m-Y', $new_week);

    $week_number = date("W", strtotime( $new_week));
    $year = date("Y", strtotime( $new_week));
}else{

$week_number = date("W");
$year = date("Y");
}
/*if($week_number < 10){
   $week_number = "0".$week_number;
}*/
$week_start = date('d-m-Y', strtotime($year."W".$week_number,0));
?>

<table name="week" width="100%" cellspacing="0" cellpadding="0" height="13">
    <tr>
<?
for($day=1; $day<=7; $day++)
{
?>
<tr>
<td class="day">
<?
$daycal = date('d M', strtotime($year."W".$week_number.$day))."";
echo $daycal;
?>
</td>
<td width="3"> </td>
<td>
<!-- Timetable -->
<table width="100%" cellspacing="0" cellpadding="0" height="13">
<tr><td>
<?
// Do not edit Below
$cal = mysql_query("SELECT * FROM `calendar` WHERE `day`='$daycal' && `userid`='$globalid'")or die(mysql_error());
$calendar = mysql_fetch_array($cal);
?>
<div class="hour" name="00:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="00:00"){ 
?>
Booked
<? }else{ ?>
00:00
<? } ?>
</div>
<div class="hour" name="01:00" id="<? echo $daycal; ?>">
<?
if($calendar2['time']=="01:00"){ 
?>
Booked
<? }else{ ?>
01:00
<? } ?>
</div>
<div class="hour" name="02:00" id="<? echo $daycal; ?>">
<?
if($calendar3['time']=="02:00"){ 
?>
Booked
<? }else{ ?>
02:00
<? } ?>
</div>
<div class="hour" name="03:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="03:00"){ 
?>
Booked
<? }else{ ?>
03:00
<? } ?>
</div>
<div class="hour" name="04:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="04:00"){ 
?>
Booked
<? }else{ ?>
04:00
<? } ?>
</div>
<div class="hour" name="05:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="05:00"){ 
?>
Booked
<? }else{ ?>
05:00
<? } ?>
</div>
<div class="hour" name="06:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="06:00"){ 
?>
Booked
<? }else{ ?>
06:00
<? } ?>
</div>
<div class="hour" name="07:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="07:00"){ 
?>
Booked
<? }else{ ?>
07:00
<? } ?>
</div>
<div class="hour" name="08:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="08:00"){ 
?>
Booked
<? }else{ ?>
08:00
<? } ?>
</div>
<div class="hour" name="09:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="09:00"){ 
?>
Booked
<? }else{ ?>
09:00
<? } ?>
</div>
<div class="hour" name="10:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="10:00"){ 
?>
Booked
<? }else{ ?>
10:00
<? } ?>
</div>
<div class="hour" name="11:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="11:00"){ 
?>
Booked
<? }else{ ?>
11:00
<? } ?>
</div>
<div class="hour" name="12:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="12:00"){ 
?>
Booked
<? }else{ ?>
12:00
<? } ?>
</div>
<div class="hour" name="13:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="13:00"){ 
?>
Booked
<? }else{ ?>
13:00
<? } ?>
</div>
<div class="hour" name="14:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="14:00"){ 
?>
Booked
<? }else{ ?>
14:00
<? } ?>
</div>
<div class="hour" name="15:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="15:00"){ 
?>
Booked
<? }else{ ?>
15:00
<? } ?>
</div>
<div class="hour" name="16:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="16:00"){ 
?>
Booked
<? }else{ ?>
16:00
<? } ?>
</div>
<div class="hour" name="17:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="17:00"){ 
?>
Booked
<? }else{ ?>
17:00
<? } ?>
</div>
<div class="hour" name="18:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="18:00"){ 
?>
Booked
<? }else{ ?>
18:00
<? } ?>
</div>
<div class="hour" name="19:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="19:00"){ 
?>
Booked
<? }else{ ?>
19:00
<? } ?>
</div>
<div class="hour" name="20:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="20:00"){ 
?>
Booked
<? }else{ ?>
20:00
<? } ?>
</div>
<div class="hour" name="21:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="21:00"){ 
?>
Booked
<? }else{ ?>
21:00
<? } ?>
</div>
<div class="hour" name="22:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="22:00"){ 
?>
Booked
<? }else{ ?>
22:00
<? } ?>
</div>
<div class="hour" name="23:00" id="<? echo $daycal; ?>">
<?
if($calendar['time']=="23:00"){ 
?>
Booked
<? }else{ ?>
23:00
<? } ?>
</div>
</td></tr>
</table>

<!-- End Timetable -->
</td>
</tr>
<tr height="3"><td> </td></tr>
<?
}
?>
</tr>
<tr>
<form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
<td colspan="7"><input type="submit" name="back_week" value="back_week" /><input type="submit" name="add_week" value="add_week" />
</td>
</form>
</tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:52:28.297

如此庞大而无用的代码.. 为什么不循环遍历 100 行代码只有 10 行？我试图重新组织你的代码。所以最后我有了这个：

```
<div id="calendar">
<?php
    $week = date('d-m-Y', strtotime($_POST['last_week']));

    if(isset($_POST['add_week']))
        $new_week =  strtotime ( '+1 week' , strtotime ( $week ) ) ;
    if(isset($_POST['back_week']))
        $new_week =  strtotime ( '-1 week' , strtotime ( $week ) ) ;

    $new_week = date('d-m-Y', $new_week);

    if(!isset($_POST['add_week']) && !isset($_POST['back_week']))
    {
        $week_number = date("W");
        $year = date("Y");
    }
    else
    {
        $week_number = date("W", strtotime( $new_week));
        $year = date("Y", strtotime( $new_week));
    }

    $week_start = date('d-m-Y', strtotime($year."W".$week_number,0));
?>

<table name="week" width="100%" cellspacing="0" cellpadding="0" height="13">
    <tr>
<?
for($day=1; $day<=7; $day++)
{
?>
<tr>
    <td class="day">
        <?=$daycal = date('d M', strtotime($year."W".$week_number.$day))."";?>
    </td>

    <td width="3"> </td>
    <td>
    <!-- Timetable -->
    <table width="100%" cellspacing="0" cellpadding="0" height="13">
        <tr>
            <td>
            <?
                // Do not edit Below
                $cal = mysql_query("SELECT * FROM `calendar` WHERE `day`='$daycal' && `userid`='$globalid'")or die(mysql_error());
                $calendar = mysql_fetch_array($cal);

                for($cnt=0; $cnt<=24; $cnt++)
                { 
                    $hour = ($cnt<10?'0':'').$cnt.':00';
            ?>
                <div class="hour" name="<?=$hour?>" id="<? echo $daycal; ?>">
                    <?= ($calendar['time']==$hour) ? 'Booked' : $hour;  ?>
                </div>
            <? 
                } 
            ?>
            </td>
        </tr>
    </table>
    <!-- End Timetable -->
    </td>
</tr>
<tr height="3">
    <td> </td>
</tr>
<?
}
?>
</tr>
<tr>
    <form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
        <input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
        <td colspan="7">
            <input type="submit" name="back_week" value="back_week" />
            <input type="submit" name="add_week" value="add_week" />
        </td>
    </form>
</tr>
</table>
</div> 
```

# macos - 在 fileWrapperOfType 中取消阻止用户交互

> ID：12329705
> 
> 赞同：2
> 
> 时间：2012-09-08T09:49:45.167
> 
> 标签：macos, cocoa, osx-lion, nsdocument, nsfilewrapper

我想在我的 NSDocument 中实现异步保存。根据文档，我需要返回 YES ，[`canAsynchronouslyWriteToURL:ofType:forSaveOperation:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/canAsynchronouslyWriteToURL%3aofType%3aforSaveOperation%3a)然后[`unblockUserInteraction`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/unblockUserInteraction)在写作期间调用。

在我的文档中，写入是[`fileWrapperOfType:error:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/fileWrapperOfType%3aerror%3a)通过简单地返回一个 NSFileWrapper 来执行的。

```
- (NSFileWrapper*) fileWrapperOfType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    return self.myMutableFileWrapper;
} 
```

关于这一点，文档说：

> 例如，fileWrapperOfType:error: 的默认实现在创建要返回的 NSFileWrapper 对象时调用 [unblockUserInteraction]。假设 NSFileWrapper 没有被后续的用户操作改变，它实际上是文档内容的“快照”，一旦它被创建，它就可以安全地在主线程上继续处理用户事件，即使其中一些用户事件可能在安全写入 NSFileWrapper 对象之前更改文档的内容。

目前在我的代码`self.myMutableFileWrapper`中可以更改 after `fileWrapperOfType:error`，所以我不能假设它不会像文档所说的那样发生突变。

这是否意味着我应该修改`fileWrapperOfType:error:`以复制我的文件包装器，然后调用`unblockUserInteraction`？像这样的东西：

```
- (NSFileWrapper*) fileWrapperOfType:(NSString *)typeName error:(NSError *__autoreleasing *)outError {
    NSFileWrapper *copyFileWrapper = MakeACopyOf(self.myMutableFileWrapper);
    [self unblockUserInteraction];
    return copyFileWrapper;
} 
```

如果以上是正确的，我如何制作一个 NSFileWrapper 的副本？此外，制作一个可能巨大的 NSFileWrapper 的副本不会否定异步保存的性能优势吗？

# clojure - 启动repl时如何默认加载ns

> ID：12329713
> 
> 赞同：15
> 
> 时间：2012-09-08T09:50:54.350
> 
> 标签：clojure, leiningen

我正在使用 lein2。我想在 repl 启动时默认加载一些 ns 。当为该项目执行 lein2 repl 时，是否可以在 project.clj 中指定应该加载的 ns？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-08T13:23:51.747

[你会在示例项目](https://github.com/technomancy/leiningen/blob/master/sample.project.clj)中找到很多答案

```
;; Options to change the way the REPL behaves
:repl-options {;; Specify the string to print when prompting for input.
               ;; defaults to something like (fn [ns] (str *ns* "=> "))
               :prompt (fn [ns] (str "your command for <" ns ">, master? " ))
               ;; Specify the ns to start the REPL in (overrides :main in
               ;; this case only)
               :init-ns foo.bar
               ;; This expression will run when first opening a REPL, in the
               ;; namespace from :init-ns or :main if specified
               ;; This expression will run when first opening a REPL, in the
               ;; namespace from :init-ns or :main if specified
               :init (println "here we are in" *ns*) 
```

使用`project.clj`我得心应手的：

```
(defproject test "1.0.0"
  :repl-options { :init-ns test.core 
                  :init (do
                          (use 'clojure.set) 
                          (println (union #{1 2 3} #{3 4 5}))
                          (use 'incanter.core)
                          (println (factorial 5))) }
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [incanter/incanter-core "1.3.0-SNAPSHOT"]]) 
```

当我点燃`lein repl`

```
$ lein repl
nREPL server started on port 1121
REPL-y 0.1.0-beta10
Clojure 1.4.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
      (user/clojuredocs name-here)
      (user/clojuredocs "ns-here" "name-here")
#{1 2 3 4 5}
120.0
test.core=> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T13:31:44.553

我有时会使用`:injections`in 选项`project.clj` 来加载命名空间。以下示例将 在执行命令`foo.bar`时加载命名空间：`lein2`

```
(defproject org.example/sample "0.1.0-SNAPSHOT"
  :description "A sample project"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :injections [(use 'foo.bar)]) 
```

# objective-c - 使用界面生成器辞去第一响应者

> ID：12329720
> 
> 赞同：0
> 
> 时间：2012-09-08T09:52:08.617
> 
> 标签：objective-c, uitextfield

我想在用户按下完成后辞去 UITextField 对象的第一响应者。有没有办法单独使用界面构建器来做到这一点？或者我必须使用委托实例方法以编程方式执行此操作：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:25:43.040

它必须以编程方式完成，你会这样做

```
- (IBAction)doneEditing:(id)sender {
    [textView resignFirstResponder];
} 
```

您将 doneEditing 方法分配给您的完成按钮。

# php - PHP exec 返回 ascii 字符

> ID：12329721
> 
> 赞同：2
> 
> 时间：2012-09-08T09:52:10.250
> 
> 标签：php, exec

我想在我的页面上显示 PHP 版本，我的服务器上有两个 PHP 二进制文件。一个用于网站（即用于/public_html/ 中的内容），另一个用于命令行。

两个 PHP 都有不同的版本，所以我想使用 Web 服务器显示 CLI PHP 版本。我有两个二进制文件的路径。

我在用：

```
exec('/usr/bin/php-cli -r "echo phpversion();"', $phpversion, $ret);
echo $phpversion = implode('', $phpversion); 
```

但它给了我一些浏览器无法识别的 ascii 代码。

我得到的输出是`�2�3�34��V.B`

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:05:15.803

我设法解决了这个问题。出现此问题是因为 zlib.output_compression 已打开。我刚刚关闭它，它解决了这个问题。谢谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:44:32.477

它是一个字符集问题。

在将任何输出发送到浏览器之前，请执行以下操作：

```
header('Content-Type: text/html; charset=utf-8'); 
```

如我所见，您的浏览器具有另一个默认值，即 UTF-8。当我运行你的代码时，我得到`"5.4.6-1~dotdeb.0"`

# mysql - mysql 加载数据文件更新

> ID：12329724
> 
> 赞同：4
> 
> 时间：2012-09-08T09:52:50.613
> 
> 标签：mysql

我目前正在使用 mySQL LOAD DATA INFILE 将 csv 文件插入到我的数据库中。每天都会将此 csv 文件下载到服务器，以使产品数据保持最新。

我想知道的是如何使用新的 csv 更新表格并将现有数据保留在不同的地方？

这是我目前的声明：

```
LOAD DATA LOCAL INFILE '$file' REPLACE INTO TABLE products FIELDS TERMINATED BY ',' ENCLOSED BY '\"' ESCAPED BY '\\\' IGNORE 1 LINES (aw_product_id,merchant_id,merchant_image_url,aw_deep_link,description,in_stock,merchant_name,brand_name,display_price,product_name,rrp_price,merchant_category 
```

这工作正常，但它用一个全新的集合替换 ID 列，并将我想忽略的列恢复为默认状态。例如，我有一个名为 'Published' 的列，其值为 0 或 1。如果我使用 REPLACE，它将将该列设置回 0。

如何使用 REPLACE 但忽略某些列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T10:05:12.810

*如何使用 REPLACE 但忽略某些列*的答案？**你不能**：总是`REPLACE`替换一个完整的行，而不是该行的单个字段值。

*我是否仍然可以实现我的目标*的答案是**肯定**的：我的建议是`LOAD DATA LOCAL INFILE`进入另一个表，然后使用存储过程或查询`INSERT`和`UPDATE`（而不是`REPLACE`）你的主表。如果您向我们提供更多信息（表结构，哪一列将加载的数据与现有数据相匹配），我们可能会为您提供进一步的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-09T21:51:52.660

**如果增加/更改表格：**

首先`LOAD DATA`进入一个tmp_table。然后使用它来创建新行或更新现有行：

```
INSERT INTO real_table
    SELECT ... FROM tmp_table
    ON DUPLICATE KEY UPDATE
        a = VALUES(a), ... 
```

如果此表很大，请考虑对这些 IODKU 进行“分块”。有关分块技巧，请参阅[我的博客](http://mysql.rjweb.org/doc.php/deletebig#deleting_in_chunks)。

注意：IODKU 需要一个`UNIQUE`（可能`PRIMARY`）`KEY`来控制哪一行`UPDATE`。

**如果替换*整个*table**，那么这会好得多：

```
CREATE TABLE new LIKE real;
LOAD DATA ... INTO new;
RENAME TABLE real TO old, new TO real; -- atomic and fast (no downtime)
DROP TABLE old; 
```

**代替**

不要使用`REPLACE`；这是一个`DELETE`加号`INSERT`。如果你有`AUTO_INCREMENT`，那么这些 id 将被丢弃（“烧毁”），几个月后你可能会用完 id。

# model-view-controller - 如何用一个视图显示多个模型数据--mvc

> ID：12329725
> 
> 赞同：1
> 
> 时间：2012-09-08T09:53:13.803
> 
> 标签：model-view-controller, view, model

我创建了一个 VectorModel（存储矢量数据，如起点和终点）和 VectorView（显示矢量）类。

我想创建两个圆（c1和c2）并在每个圆和鼠标位置（v1和v2）之间显示一个向量，然后只显示最小的向量。（如果鼠标靠近c1，则只显示v1，如果它靠近c2 , 仅显示 v2)。v1 和 v2 是两个 VectorModel 实例。

我想知道是否可以创建单个 VectorView 实例并每次都传递一个 VectorModel 参数。这就是我尝试这样做的方式：

```
private function enterFrame(e:Event):void
{
    //update v1 and v2
    _v1.update(_c1.x, _c1.y, mouseX, mouseY);
    _v2.update(_c2.x, _c2.y, mouseX, mouseY);

    if (_v1.m < _v2.m)
    {//display v1
          displayVector(_v1);
    }else if(_v1.m > _v2.m)
    {//display v2
         displayVector(_v2);
    }
}

private function displayVector(v:VectorModel):void
{
     var vView:VectorView = new VectorView(v);
     addChild(vView);
} 
```

结果在每个圆圈和鼠标位置之间显示两条线（向量）

我试图通过为每个 VectorModel 创建一个 VectorView 来解决这个问题，尽管出现了以下错误：错误 #1009：无法访问空对象引用的属性或方法。（如何解决这个问题？）

```
private function enterFrame(e:Event):void
{
 //update v1 and v2
    _v1.update(_c1.x, _c1.y, mouseX, mouseY);
    _v2.update(_c2.x, _c2.y, mouseX, mouseY);

    if (_v1.m < _v2.m)
    {//display v1
        displayVector("v1");
    }else if(_v1.m > _v2.m)
    {//display v2
        displayVector("v2");
    }
}

private function displayVector(v:String):void
{
   if (v=="v1")
   {
        addChild(_v1View);
        if (_v2View.parent!=null)
        {
               removeChild(_v2View);
        }

   }else if(v=="v2")
   {
        addChild(_v2View);
        if (_v1View.parent!=null)
        {
             removeChild(_v1View);
        }
   }
} 
```

有更好的方法吗？感谢您的时间和帮助；）

# .net - 如何在 Excel 中以编程方式设置一列以适合最长的文本？

> ID：12329727
> 
> 赞同：3
> 
> 时间：2012-09-08T09:53:17.437
> 
> 标签：.net, excel

在 Excel 中，您可以双击列标题（实际上是 2 个列标题之间的线），左侧的列将扩大宽度以适应最长文本的长度。有没有办法以编程方式做到这一点？我正在使用带有 C# 和 .Net 框架的 Excel 2010。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T12:10:02.507

我相信你可以使用：

```
 Rng.Columns.AutoFit() 
```

# jquery - 元素加载后使用jquery列出所有li

> ID：12329730
> 
> 赞同：0
> 
> 时间：2012-09-08T09:53:50.090
> 
> 标签：jquery, closest

```
<div id="preen_me" class="twitter_list"></div> 
```

我有一个 jquery 插件，它用 twitter 帖子（ul 和 li's）列表填充这个 div。

我想获取列表（按顺序排列内容）。on mouseup（或单击） jquery 似乎没有找到该列表的问题，因为它是在页面加载后加载的（我认为）

我试过

```
$(document).ready(function() {
    $("#preen_me").click(function () {
          alert($(this).find('ul').attr('class'));
          alert($(this).closest('li').attr('class'));
       }); 
}); 
```

但我得到一个未定义的值。（如果您想知道，它们都有类属性）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T09:57:54.277

而是使用实时功能

```
$(document).ready(function() {
    $("#preen_me").live('click', function () {
          alert($(this).find('ul').attr('class'));
          alert($(this).find('li').attr('class'));
       }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T09:58:09.797

也使用`find()`方法`li`.. 方法通过 DOM[`closest()`](http://api.jquery.com/closest/)上升**，**我猜这不是你想要的。

```
alert($(this).find('li').attr('class')); 
```

[演示](http://jsfiddle.net/bvbW7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:16:10.960

尝试

```
$(document).ready(function(){
     $("#preen_me").click(function () {
      alert($(this).find('ul li').attr('class'));          
   }); 
}) 
```

# javascript - 为什么匿名函数本身就是javascript中的语法错误？

> ID：12329731
> 
> 赞同：8
> 
> 时间：2012-09-08T09:53:55.940
> 
> 标签：javascript, parsing, syntax, grammar, anonymous-function

如果我尝试执行其唯一源代码行是对象的脚本：

```
{prop:'value'} 
```

它解析得很好（在 V8 和 UglifyJS 中）。同样，我可以将字符串或数字作为源代码单独放置，并且不会报告语法错误。

然而，V8 和 UglifyJS 都在抱怨这个问题：

```
function(){} 
```

我明白了`Uncaught SyntaxError: Unexpected token (`。

当第一个示例中的对象正常时，为什么会中断？函数不只是javascript中的对象吗？

我意识到声明一个匿名函数而不执行它不会做任何事情；那不是问题。我想知道为什么它会导致解析错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-08T09:56:15.120

来自 ECMAScript 规范，关于表达式语句的第 12.4 节：

> 请注意，*ExpressionStatement*不能以左大括号开头，因为这可能会使它与*Block*模棱两可。此外，ExpressionStatement 不能以`function`关键字开头，因为这可能会使它与*FunctionDeclaration*模棱两可。

尽管函数只是对象，但请记住，您可以自己声明函数，而无需在表达式中真正使用它们的对象。这就是歧义所在。当然，您永远不能单独声明匿名函数（因为无论如何您都无法引用它），但是由于我在规范中找不到任何区分匿名函数和命名函数声明的内容，我怀疑这一点适用于两者。

为了解决歧义，您需要将其括在括号中，因此它将始终被视为表达式：

```
(function(){}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-08T09:56:29.617

`{prop:'value'}`不被解析为对象，只是被解析为一个带有标签的块`prop`。

您需要`()`将其括起来以解析为表达式。

`({prop: 'value'})`将被解析为对象表达式。

`(function(){})`将被解析为函数表达式。

# streaming - 通过 ffserver 将 3gp 媒体内容流式传输到移动设备

> ID：12329732
> 
> 赞同：1
> 
> 时间：2012-09-08T09:54:29.473
> 
> 标签：streaming, 3gp, ffserver

我想使用 FFserver 将我的 3gp 内容流式传输到移动设备。我知道 ffserver 需要`.ffm`格式的输入提要。我不确定这种格式是什么。ffserver 是否支持 3gp 内容的流式传输？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:18:59.113

阅读： http: [//ffmpeg.org/sample.html](http://ffmpeg.org/sample.html)

ffmpeg 和 ffserver 文档可以在以下位置找到：http: [//ffmpeg.org/documentation.html](http://ffmpeg.org/documentation.html)

# php - PHP PDO 选择名称中带有单引号的列

> ID：12329733
> 
> 赞同：2
> 
> 时间：2012-09-08T09:54:37.687
> 
> 标签：php, mysql, sql, pdo

在 phpmyadmin 中，我可以通过 SQL 运行它：

```
SELECT * FROM mytable WHERE `Bob's Stuff` > 1 
```

但是，当我运行完全相同的查询时，一个 php 脚本：

```
$stmt->prepare("SELECT * FROM mytable WHERE `Bob's Stuff` > :int");
$stmt->bindValue(':int', $int);
$stmt->execute(); 
```

我收到此错误：

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`Bob's Stuff`在 script.php:208 的第 10 行的 ':int AND >= '1')' 附近使用正确的语法 堆栈跟踪：#0 script.php(208)： PDOStatement->execute() #1 {main} 在第 208 行的 script.php 中抛出

如果我将查询列更改为任何其他列名，查询工作正常。

是否可以有带撇号的列名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T09:57:22.373

将该列名也作为参数，

```
$tableName = "`Bob\'s Stuff`";
$stmt->prepare("SELECT * FROM mytable WHERE :tableName > :int");
$stmt->bindValue(':tableName', $tableName);
$stmt->bindValue(':int', $int);
$stmt->execute(); 
```

顺便说一句，一个建议是下次不要创建像`Bob's Stuff`. 把它变成这样的一个单词`BobStuff`。

# apache - Mod 重写 URL 并始终重定向到新 url

> ID：12329737
> 
> 赞同：0
> 
> 时间：2012-09-08T09:55:53.287
> 
> 标签：apache, .htaccess, mod-rewrite

apache上的htaccess

我有这个网址：

**mydomain.com/old.html**

我希望它被重写为：

**mydomain.com/new.html**

但我也希望**mydomain.com/old.html**始终重定向到**mydomain.com/new.html**。

我尝试了以下方法：

```
RewriteRule ^/new.html /old.html [R=301,L,PT] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:18:36.673

```
Redirect 301 /old.html http://www.yoursite.com/new.html 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T15:15:22.410

删除前导斜杠（或使其成为可选），因为在 htaccess 文件中应用规则时，它已从 URI 中剥离：

```
RewriteRule ^/?new.html /old.html [R=301,L,PT] 
```

这需要与其他重写规则一起工作，以便所有事情都发生在一个模块中（mod_rewrite），但如果您不需要 mod_rewrite，则可以改用 mod_alias（删除 mod_rewrite 重定向）：

```
Redirect 301 /old.html http://www.yoursite.com/new.html 
```

但这会将以下内容重定向`/old.html/blahblah`到：`http://www.yoursite.com/new.html/blahblah`如果您不希望这样做，请使用：

```
RedirectMatch 301 ^/old.html$ http://www.yoursite.com/new.html 
```

# perl - 字符串比较神秘地失败了

> ID：12329740
> 
> 赞同：1
> 
> 时间：2012-09-08T09:56:24.093
> 
> 标签：perl

> **可能重复：**
> [如何在 Perl 中比较两个字符串？](https://stackoverflow.com/questions/1175390/how-do-i-compare-two-strings-in-perl)

为什么这个脚本总是返回“你赢了”？

```
print "Choose heads or tails :\n";
$answer = <STDIN>;
chomp $answer;

if( $answer == "heads" ) {
    print "You won\n";
}
else {
    print "Moron! You lost.\n"
} 
```

正确的代码应该是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-08T09:58:10.583

Perl 中的字符串比较`eq`使用`==`. 尝试：

```
if ($answer eq "heads") 
```

如果您要比较数字，则使用`==`.

在[perlmonks 的帖子中阅读更多相关信息。](http://www.perlmonks.org/?node_id=276020)

在学习 Perl 时，我建议您使用`use strict;`和开始您的脚本`use warnings;`。这样，您将收到此类操作的警告。它还将帮助您处理拼写错误的变量。

# java - 如何从我使用 ArrayAdapter 的列表视图中删除项目 在列表视图上显示

> ID：12329750
> 
> 赞同：0
> 
> 时间：2012-09-08T09:58:07.277
> 
> 标签：java, android, android-listview

谁能告诉我如何从列表视图中删除项目。我曾经使用数据库来存储在列表视图中显示的内容。要在列表视图上显示，我使用了 ArrayAdapter。现在我想从列表视图中删除项目。实际上它正在删除项目仅在清除数据库并重新启动活动时。请帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:23:17.570

如果要从列表视图中删除任何项目，请**从**您将数据设置到适配器并显示到列表视图中的位置删除**适配器**源。

例如，

我将 设置`ArrayList<String>`为`ArrayAdapter` `adapter` 我正在考虑将数据收集到 arrayList 中。

**现在删除：**

```
arrayList.remove(pass the position here) 
```

接着

```
adapter.notifyDataSetChanged() 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:19:54.960

这有帮助吗？

```
void Reload()
{
    ArrayAdapter adapter= new  ArrayAdapter(context, ...);
    listView.setAdapter(adapter);
} 
```

# java - JSP Servlet：URI 仍然是控制器 servlet

> ID：12329756
> 
> 赞同：0
> 
> 时间：2012-09-08T09:58:41.690
> 
> 标签：java, model-view-controller, jsp, servlets

使用 MVC，当我从控制器 servlet 获得对我的 jsp 页面的响应时，URI 仍然是 servlet 的。我希望显示 JSP 的 URI，它显示从控制器 servlet 发回的结果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:01:51.203

这不太可能。

更容易的是反过来解决它。使 JSP 的 URI 成为控制器之一。首先将 JSP 文件隐藏在文件`/WEB-INF`夹中，这样最终用户永远无法在不调用控制器的情况下直接打开它。然后实现`doGet()`控制器servlet的方法如下：

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.getRequestDispatcher("/WEB-INF/page.jsp").forward(request, response);
} 
```

现在，如果您打开控制器 servlet 的 URI 而不是 JSP 的 URI，那么您将看到 JSP。如果您将 JSP 中的表单提交给控制器 servlet（因此`doPost()`它将被调用，不要忘记将其中的 JSP 路径也更改为 include `/WEB-INF`），那么 URI 基本上保持不变，这就是您最终想要的..

这也是它在现有的基于 Servlet 的 MVC 框架中的一般工作方式。

### 也可以看看

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- Hello World 示例也是如此

# html - 具有 font-weight 属性的 UTF-8 字符

> ID：12329757
> 
> 赞同：1
> 
> 时间：2012-09-08T09:59:01.023
> 
> 标签：html, css, unicode

font-weight 属性不适用于低于 300 的值和 Unicode 字体。

它是 Helvetica，字体粗细：300；Unicode 字符仍然是粗体。我可以用什么？

[![](../Images/f515d754e7678229bfa73916896c5f8d.png)](https://i.stack.imgur.com/5RC7f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T14:33:53.077

要以书本重量（`font-weight: 300`在 CSS 中）显示文本，您需要一种具有该重量的字体，其中包含您需要的所有字符。显然，您的计算机中有 Helvetica 的书本重量（绝大多数用户没有它，或任何 Helvetica），但字符库有限，缺少许多土耳其语中使用的字母。因此，浏览器会从其他一些字体中提取它们，很可能是正常（400）重量。

如果您真的想要书重文本，那么最好的选择是使用可下载字体，也称为网络字体。人们在他们的计算机上拥有的大多数字体都只有正常粗体，或者可能只有正常粗细。查看[Google 网络字体](http://www.google.com/webfonts)和[FontSquirrel @font-face 工具包](http://www.fontsquirrel.com/fontface)，看看它们是否有适合您设计的东西。不幸的是，您可以轻松使用的免费字体通常具有相当有限的字符库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T10:37:10.443

我猜 Helvetica 不支持这些字符，这就是它以 Arial 字体显示的原因。我的建议是更改为开箱即用支持字母表的字体（Arial 支持几乎所有你能想到的语言）。

# c# - RandomNumberGenerator 与 RNGCryptoServiceProvider

> ID：12329760
> 
> 赞同：19
> 
> 时间：2012-09-08T09:59:34.983
> 
> 标签：c#, random, cryptography

根据[RandomNumberGenerator](http://msdn.microsoft.com/en-us/library/system.security.cryptography.randomnumbergenerator%28v=VS.71%29.aspx)的 MSDN 文档：

> 应用程序代码不直接使用此类。这个抽象类作为所有密码随机数生成器的基类提供。
> 
> 对于加密随机数生成器的实现，请使用派生类 RNGCryptoServiceProvider。

但是，我在不同的代码库中看到了以下代码：

```
byte[] bytes = new byte[...];
RandomNumberGenerator rng = RandomNumberGenerator.Create();
rng.GetBytes(bytes); 
```

最值得注意的是[StackExchange](http://code.google.com/p/stackid/source/browse/OpenIdProvider/Current.cs#1135)（我假设它包括 SO）以及[BCrypt.Net](http://bcrypt.codeplex.com/SourceControl/changeset/view/1eef0262901c#BCrypt.Net/BCrypt.cs)。

因此，我有点困惑——`RandomNumberGenerator`上面的代码返回的是什么类型的？*还有一些代码库使用*`RandomNumberGenerator`而不是有点缺陷吗`RNGCryptoServiceProvider`？

我假设`RandomNumberGenerator.Create()`是在幕后做的，我在这里完全错过了，但从技术上讲（因为它是一个抽象类）上面的代码不应该抛出错误吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-08T10:26:01.583

`RandomNumberGenerator.Create()`方法调用，最终将`RandomNumberGenerator.Create("System.Security.Cryptography.RandomNumberGenerator")`创建`RNGCryptoServiceProvider`.

（它会在一对字典中进行一些查找，因此您可能可以通过在某处注册默认随机生成器来更改该调用的行为。）

返回的对象的实际类型在编译时是未知的，只知道它将继承`RandomNumberGenerator`该类，因此您可以为其使用`RandomNumberGenerator`引用变量。

这种根据输入创建不同类型实例的方法在框架中的几个地方使用，例如通过`WebRequest.Create`方法。

* * *

Micrsoft 的某个人已经“修复”了该`Create()`方法的当前文档（框架 4.5）。它现在说：

> “在派生类中重写时，创建可用于生成随机数据的加密随机数生成器的默认实现的实例。”

框架 4.0 的文档说：

> “创建可用于生成随机数据的加密随机数生成器的默认实现的实例。”

这是对该方法作用的正确描述。我将请求将该描述放回较新的文档中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T10:03:27.857

的文档`RandomNumberGenerator`基本上是一团糟。作为另一个例子，有这样的文档：

> 在派生类中重写时，创建加密随机数生成器的指定实现的实例。

...对于静态方法。静态方法*不能*被覆盖。编写文档的人显然没有正确思考。

我怀疑最初的意图是这样的：

> 应用程序代码不直接**实例化**此类。这个抽象类作为所有密码随机数生成器的基类提供。

我认为您发布的代码（使用静态`Create`方法）是完全合理的。它与用于`XmlReader.Create`etc 的模式相同——静态方法选择最合适的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-08T10:03:38.363

`RandomNumberGenerator.Create`是静态工厂方法。它肯定会返回*派生*类的实例。而且那个不是抽象的，所以所有这些都是合法的。

抽象类可以*在*任何地方使用，而不是使用更具体的类。它们旨在成为版本控制友好的界面。

# android - 有对话框时按“返回”停止线程

> ID：12329762
> 
> 赞同：0
> 
> 时间：2012-09-08T09:59:52.277
> 
> 标签：android, dialog

在我的程序中，我同时启动了一个线程和进度对话框。按“返回”后，我想停止线程。但是程序只会停止我的对话框。我尝试了以下代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event.getKeyCode() == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP) {
        if (runner != null)
            stopThread();
        return true;
    }
    return super.dispatchKeyEvent(event);
}

@Override
public void onBackPressed(){
    if (runner != null)
        stopThread();
} 
```

结果是我只能在没有任何对话框仍在工作时停止线程，我如何“选择”后退动作，或者在对话框关闭的同时如何停止线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:13:45.570

用于`setOnCancelListener`对话框，或者如果它是自定义对话框，则覆盖`OnBackPressed`然后停止方法内的线程。

# php - Symfony 2.1 - 获取会话 ID

> ID：12329765
> 
> 赞同：0
> 
> 时间：2012-09-08T10:00:38.053
> 
> 标签：php, symfony, symfony-2.1

在尝试从 Symfony 2.0 迁移到 2.1 时，我发现了一些有趣的问题。

我无法获得本机会话 ID，即使是简单的，刚下载的 Symfony 2.1 副本。

```
/**
 * @Route("/sess")
 */
public function sessionAction()
{
    $session = $this->getRequest()->getSession();
    return new Response($session->getId());
} 
```

那里发生了显着变化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T10:51:11.973

看看[这个文档](https://github.com/symfony/symfony-standard/blob/master/UPGRADE.md)（在**app/config/config.yml**部分下）

在 Symfony 2.1 中，会话总是按需启动。所以我会说你看到的是正常行为。您需要显式启动会话，然后才能获取会话 ID。我还没有检查过，但也许设置第一个变量也会启动会话，这是因为它在您调用 set() 后起作用。

# iphone - uiimageview 上的透明度应该显示图像

> ID：12329766
> 
> 赞同：-1
> 
> 时间：2012-09-08T10:01:00.347
> 
> 标签：iphone, objective-c, uiimageview

> **可能重复：**
> [如何在 iPhone 上绘制透明笔触（或图像的清晰部分）](https://stackoverflow.com/questions/629409/how-to-draw-a-transparent-stroke-or-anyway-clear-part-of-an-image-on-the-iphon)

我有一个 uiimage 视图，如果我们触摸该透明层，则该透明层存在一个透明层，该透明​​层应该被擦除，并且应该显示其背面的图像..我该怎么做....？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:55:04.690

据我了解，您想通过触摸来擦除图像的一部分……对吗？

尝试使用此代码通过触摸移动部分图像进行擦除....

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    lastTouch = [touch locationInView:canvasView];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    currentTouch = [touch locationInView:canvasView];

    CGFloat brushSize = 35;
    CGColorRef strokeColor = [UIColor whiteColor].CGColor;

    UIGraphicsBeginImageContext(scratchView.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [canvasView.image drawInRect:CGRectMake(0, 0, canvasView.frame.size.width, canvasView.frame.size.height)];
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, brushSize);
    CGContextSetStrokeColorWithColor(context, strokeColor);
    CGContextSetBlendMode(context, kCGBlendModeClear);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
    CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
    CGContextStrokePath(context);
    canvasView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastTouch = [touch locationInView:canvasView];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

我希望这能帮到您....

# java - 正则表达式问题冲突

> ID：12329767
> 
> 赞同：-2
> 
> 时间：2012-09-08T10:01:17.007
> 
> 标签：java, regex, regex-greedy

我没有从stackover收到任何答案。我有什么问题吗..？

请任何人帮助我找到下面的正则表达式问题。

如果输入文本以“(ix) (a) This is Sample Sentence”开头。,

它匹配两种正则表达式模式

1.  `^9\.|^\s*[(](ix)[)]`
2.  `^9\.\s*[(]?a[)]?|^\s*[(]\s*(ix)\s*[)]\s*[(]\s*(a)\s*[)]`

因为我的输入句子以 (ix) 和 (ix) (a) 开头。

所以请给我发送应该与输入句子匹配的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:33:16.297

匹配方法检查*整个字符串*是否与正则表达式匹配。

如果您希望正则表达式匹配所有以“(ix) (a)”开头的句子，例如“(ix) (a) This is Sample Sentence”。您可以尝试以下方法：

```
String regex =
        "^" +                // start of new line
        "\\s*" +             // 0 or more spaces
        "\\(ix\\) \\(a\\)" + // "\\(" makes "(" normal character, not start of regex group
        ".*";                // 0 or more other characters (except for new line symbols)

String sentence= "(ix) (a) This is Sample Sentence.";

System.out.println(sentence.matches(regex));// output: true 
```

# objective-c - 支持iOS 4.3，使用“assign”而不是weak，但是Interface Builder使用unsafe_unretained？

> ID：12329773
> 
> 赞同：0
> 
> 时间：2012-09-08T10:02:27.070
> 
> 标签：objective-c, automatic-ref-counting, assign, unsafe-unretained

要使用 ARC 支持 iOS 4.3，我认为正确的方法是使用`assign`：

```
@property (assign, nonatomic) UIView *view;
@property (assign, nonatomic) MYNode *node; 
```

那是对的吗？我还在[Apple 的 Transitioning to ARC 文档中](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)看到以下内容：

> 对于声明的属性，你应该使用assign而不是weak；对于变量，您应该使用 __unsafe_unretained 而不是 __weak。

但是，如果我使用当前的 Xcode (4.4.1)，将 Single View 应用程序目标更改为 4.3，然后按住 Ctrl 键将 UIButton 拖到`.h`文件中以创建插座，则生成的代码为：

```
@property (unsafe_unretained, nonatomic) IBOutlet UIButton *foo; 
```

为什么有区别，应该使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:16:16.527

根据[4.1.1。llvm 文档“assign”和“unsafe_unretained”中的属性声明](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)在属性声明中是等效的：

*   assign 意味着 __unsafe_unretained 所有权。
*   ...
*   unsafe_unretained 意味着 __unsafe_unretained 所有权。

**添加：**在clang源代码[http://clang.llvm.org/doxygen/SemaObjCProperty_8cpp_source.html](http://clang.llvm.org/doxygen/SemaObjCProperty_8cpp_source.html)你发现

```
00523   // 'unsafe_unretained' is alias for 'assign'.
00524   if (Attributes & ObjCDeclSpec::DQ_PR_unsafe_unretained)
00525     PDecl->setPropertyAttributes(ObjCPropertyDecl::OBJC_PR_assign); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:15:35.630

您引用了对“哪些类不支持弱引用？”问题的回答的摘录。- 实际上，我想，摘录仅适用于答案中列出的类。

从我之前学习 ARC 时读到的内容来看，`unsafe_unretained`和之间没有真正的区别`assign`。

# java - 在 glassfish 中运行 tinylog

> ID：12329778
> 
> 赞同：0
> 
> 时间：2012-09-08T10:03:02.390
> 
> 标签：java, logging, glassfish, tinylog

我正在尝试在 glassfish 3.1.2.2 中运行 tinylog。首先，我将 tinylog.jar 复制到`/glassfish3/glassfish/domains/domain1/lib`. 第二个我在`tinylog.properties`里面创建`domain1/config`。`tinylog.properties`是这样的：

```
tinylog.format={date}-[{class}:{method}:{line}]-{level}-{message}
tinylog.writer=rollingfile
tinylog.writer.filename=log.txt
tinylog.writer.backups=5
tinylog.writer.label=count
tinylog.writer.policies=size: 10KB 
```

我的应用程序是一个简单的 Web 服务，如下所示：

```
@WebService
public class Calculator {
    @WebMethod
    public int sum(int a, int b) {
        Logger.info("new request. a = {0}, b = {1}", a, b);
        return a + b;
    }
} 
```

现在，当我运行 Web 服务时，它可以工作并返回结果。但是日志在里面`logs/server.log`是这样的：

```
[#|2012-09-08T14:15:03.801+0430|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=175;_ThreadName=Thread-2;|2012-09-08 14:15:03 [http-thread-pool-8080(1)] com.argengco.tiny.Calculator.sum()
INFO: new request. a = 43, b = 7
|#] 
```

由于 tinylog 默认将日志写入标准输出，而 glassfish 将标准输出重定向到`javax.enterprise.system.std.com.sun.enterprise.server.logging`记录器，因此 tinylog 似乎没有找到`tinylog.properties`. 我没有看到任何权限错误`server.log`告诉它无法打开`tinylog.properties`。谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:12:11.457

如果 /glassfish3/glassfish/domains/domain1 是源构建树的根目录（即它包含 com/blah/blah），那么您需要：

1）将 tinylog.properties 文件放在该目录中

或者

2) 打电话`PropertiesLoader.loadFromFile("config/tinylog.properties");`

在尝试自己找到答案后，我遇到了您的问题。在用一些调试消息重建源代码后（有点讽刺意味！）我想出了答案。

就我而言，我有一个 src/com/blah/blah 目录结构。在这种情况下， tinylog.properties 文件需要放在 src/ 目录中。

# objective-c - 如何实现键值编码验证

> ID：12329783
> 
> 赞同：2
> 
> 时间：2012-09-08T10:03:37.280
> 
> 标签：objective-c, xcode, cocoa-bindings, key-value-coding

我有一个绑定到主/详细 UI 的 ArrayController，它工作得很好。我现在正在尝试在模型级别实现验证。

[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Validation.html#//apple_ref/doc/uid/20002173-CJBDBHCB)表明以下内容应该可以验证单个属性：

```
-(BOOL)validateName:(id *)ioValue error:(NSError * __autoreleasing *)outError 
```

因此，如果我有“ProjectName”的模型属性，则应自动触发以下内容：

```
-(BOOL)validateProjectName:(id *)ioValue error:(NSError * __autoreleasing *)outError 
```

但不幸的是，它只是没有发生:(

然而，有趣的是，如果我使用下面的“catch all”方法，它确实有效：

```
-(BOOL)validateValue:(inout __autoreleasing id *)ioValue forKey:(NSString *)inKey error:(out NSError *__autoreleasing *)outError  { 
```

在该方法中，我当然可以编写代码来确定正在验证哪个属性，但我无法弄清楚为什么它完全忽略了访问器方法？

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T12:51:36.797

验证方法不会自动触发 - 从您的链接文档中：

> 通常，键值编码不会自动执行验证——调用验证方法是您的应用程序的责任。

并且：

> 您可以直接调用验证方法，或者通过调用 validateValue:forKey:error: 并指定密钥。validateValue:forKey:error: 的默认实现在接收者的类中搜索名称与模式 validate:error: 匹配的验证方法。如果找到这样的方法，则调用它并返回结果。如果没有找到这样的方法，则 validateValue:forKey:error: 返回 YES，验证值。

这解释了你的第二种情况。

# ruby-on-rails - 在 mongoid 3+ 中如何使用 has_many_related 关系？

> ID：12329784
> 
> 赞同：1
> 
> 时间：2012-09-08T10:03:43.813
> 
> 标签：ruby-on-rails, mongoid

我目前正在从 mongoid 2.0 迁移到 mongoid 3.0.5。我在对象中的关系之一是`has_many_related`. 如何将其迁移到 mongoid 3.0.5？我无法通过谷歌搜索或在 mongoid.org 和 two.mongoid.org 网站上找到任何文档。有没有我应该找的地方？

这是代码：

```
 has_many_related :food_review do
    def find_or_initialize_by_user_id(user_id)
      criteria.where(:user_id => user_id).first || build(:user_id => user_id)
    end
  end 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T19:51:15.697

只需使用 has_many 而不是 has_many_related。

例如 ：

```
class User
  include Mongoid::Document
  field :name, type: String
  field ...

  has_many :food_reviews

  def find_or_initialize_by_user_id(user_id)
    criteria.where(:user_id => user_id).first || build(:user_id => user_id)
  end
end

class FoodReview
  include Mongoid::Document
  field ...

  belongs_to :user
end 
```

注意复数`has_many :food_reviews`和单数`class FoodReview`。如果您想引用单个评论，只需`use has_one :food_review`（参见[引用 1-1](http://mongoid.org/en/mongoid/docs/relations.html#has_one)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:46:06.483

看mongoid 2.0的代码has_many_related只是has_many的一个别名：

```
➜  mongoid  git grep has_many_related
lib/ mongoid/relations/macros.rb:        alias :has_many_related :has_many 
```

只需将其更改为 :has_many 并保持代码相同。[在此处](http://mongoid.org/en/mongoid/docs/relations.html)的 Mongoid 文档中有一个给 :has_many 的块示例

# php - 获取图像并将其放入新的 url

> ID：12329786
> 
> 赞同：-2
> 
> 时间：2012-09-08T10:03:59.557
> 
> 标签：php, simpledom

假设我使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)获取了一个图像并在特定的 URL 中获取它。假设它在一个变量中获取了一个图像，比如

```
<?php include("simple_html_dom.php");
$webpage ="http://www.example.com";
$html = file_get_html($webpage);
foreach($html->find('img') as $element) {
echo $element->src . '<br>';  }
?> 
```

现在可以在我自己的域路径中获取此图像，例如
$new_img = 'http://mysite.com/some_image_address.JPEG';
我是PHP初学者，所以请描述一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T16:06:00.487

你试过香草 php，你可以试试这个
例子：

```
 <?php
function xsrc($url){
return "http://www.my_site.com/myfolder/" . basename($url);
}
//Two liner
$img = xsrc('http://www.example.com/free_images/treacle1.png');
echo "<img src='$img' />";
//One liner
echo '<img src="' . xsrc('http://www.example.com/free_images/treacle.png') . '" />';
//HEREDOC SYNTAX
echo <<<IMG
<img src="$img" />
IMG;
?>
<!-- HTML WITH INLINE PHP -->
<img src="<?php echo xsrc('http://www.example.com/free_images/treacle.png');?>" />
<img src="<?php echo $img;?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:21:31.507

为什么不右键单击站点上的图像并选择“将图像另存为”？无需为此使用 PHP。

在进入编程行业之前，首先学习浏览的基础知识！

其他网站上的大多数图片都受版权保护，因此在从其他网站抓取图片之前请三思而后行！

**更新：**

你想要做的是被称为 html 爬行。首先google一下，有很多例子。[如何在 PHP 中制作一个简单的爬虫？](https://stackoverflow.com/questions/2313107/how-do-i-make-a-simple-crawler-in-php)

# hash - ServiceStack 实体 ID 字段名称

> ID：12329788
> 
> 赞同：5
> 
> 时间：2012-09-08T10:04:28.200
> 
> 标签：hash, redis, servicestack

我使用 ServiceStack 并希望将对象作为哈希存储在 Redis 中，并通过 id 访问它们的部分（字段）而不序列化整个对象，所以我有一个问题：

1.  有没有办法使用“Id”以外的其他属性来标记 id 字段？我正在使用命名约定，其中 id 字段被命名为“类
    名+Id”。所以在 User 类中会有 UserId id 字段，在
    Itemclass ItemId 中等等。

2.  是否有一种方法可以更新对象中已更改的属性，而无需将整个对象序列化为哈希，也无需使用 Redis 的哈希命令进行低级操作？例如，通过使用某种 lambda。

```
User user=client.GetById(userId);
user.Name="New name";
client.Update<User>(user,u=>u.Name); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T21:20:48.123

[是的，您可以使用ModelConfig](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ModelConfig.cs)覆盖默认值：

```
ModelConfig<User>.Id(x => x.UserId);
ModelConfig<Item>.Id(x => x.ItemId); 
```

这需要在启动时配置一次，然后才能使用 RedisClient。

# c# - 如果我的应用程序的数据层可以与任何数据库一起使用，它应该如何？

> ID：12329793
> 
> 赞同：1
> 
> 时间：2012-09-08T10:05:07.897
> 
> 标签：c#, .net, sql, sql-server, database

我正在编写一个可以连接到任何 SQL Server 数据库的应用程序，因此可以被视为独立的。换句话说，应用程序做的第一件事就是请求一个连接字符串。此应用程序将对数据库执行查询和其他任务，因此需要 SQL 语句。

因此，由于我不打算用预定义的数据库专门为应用程序分配属性，我如何从我的 C# 应用程序执行 SQL 语句？我想存储过程是不可能的，因为应用程序可以连接到任何数据库。

我可以轻松地在应用程序本身中对 SQL 语句进行硬编码，但我想知道在这种情况下最佳实践方法是什么。是否可以在应用程序中嵌入 SQL 语句，从而本质上在同一个应用程序中拥有业务逻辑和数据层？我对此没有逻辑或技术问题，只是想知道这是否是一种有效的方法，或者是否会被经验丰富的开发人员所反对？

我听说过实体框架，但老实说，我不确定它的作用或它是否有效。到目前为止，我所有的数据驱动应用程序都使用了存储过程，这是我第一次编写可以与运行时指定的数据库一起使用的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:38:14.740

是的，将 SQL 查询嵌入到应用程序中是可以接受的。您可以使用资源文件，而不是在代码中硬编码它们。连接字符串提供程序名称应该使您能够为要连接的数据库选择正确的 SQL 方言。

请参阅使用类似方法的[事件存储 SQL 持久性工厂](https://github.com/joliver/EventStore/blob/master/src/proj/EventStore.Persistence.SqlPersistence/SqlPersistenceFactory.cs)ResolveDialect 方法。它也使用它来确定创建和调用存储过程所需的语法，而您的应用程序将（我假设）需要调用返回数据库元数据/结构的 SQL。虽然他们将调用的 SQL 不同，但这种模式应该非常适合您的应用程序，允许您支持许多不同的数据库。

根据您尝试实现的目标，您可能还需要创建一个表示数据库中的表、列等元数据的内部模型。

[编辑]

抱歉刚刚看到关于仅作为 SQL 服务器的评论。因此，客户端可以更多地使用 SQL 方言来确定 SQL 查询的结构（例如 For code complete ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:46:32.193

由于您正在构建查询构建器（没有双关语），因此您需要查询[数据库目录](http://en.wikipedia.org/wiki/Database_catalog)，这*对于*同一种 DBMS 下的所有数据库都是相同的。这将允许您获取任何给定数据库中的[表](https://stackoverflow.com/a/5983147/533120)和其他对象的列表，以便您可以将它们呈现给用户。

您将使用纯 ADO.NET 还是 ORM 是一个正交问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-08T10:11:27.307

如果您在 .Net 中进行开发，则应考虑使用[Microsoft 企业库](http://msdn.microsoft.com/en-us/library/ff648951.aspx)

它提供了有关构建可扩展应用程序的全面详细信息。

编辑：

您必须考虑处理不同的驱动程序来处理不同的数据库引擎。可能无法在所有数据库上运行相同的查询，因为它们通常遵循不同风格的 sql。例如，mssql 使用 TSql，而 Oracle 使用 PL-Sql。

另一种解决方案是遵循 Ansi sql 标准。

# nhibernate - 在 3.0 升级后为 Castle Windsor 配置 NHibernate 3.3.1

> ID：12329798
> 
> 赞同：3
> 
> 时间：2012-09-08T10:05:38.573
> 
> 标签：nhibernate, castle-windsor

在一个现有项目中，我刚刚将 NHibernate 从 3.0 升级到 3.3。升级并不像我想象的那么简单，但是我在 SO 上也发现了以前与 MySQL 连接器不兼容的问题。

问题是我不能再使用`NHibernate.ByteCode.Castle.ProxyFactoryFactory`了，因为它需要 NH 3.0（我有一个`FileLoadException`for `NHibernate, Version=3.0.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4`）。

仔细查看 NH 3.3 zip 内部，我发现没有 BytecodeProvider。在 NH 3.0 中有一个“RequiredForLazyLoading”目录，我在其中获取了我需要的一切。

那么，在 NH 3.3.1 中我应该怎么做才能启用延迟加载呢？我对 Castle 很满意，我刚刚升级到最新版本 3.1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-08T11:35:51.557

不再需要外部字节码提供程序。NHibernate 现在有一个内部的。

只需删除对它的引用。

# azure - 编码作业时 Azure 媒体服务为 .wmv 文件提供 JobState.Error

> ID：12329801
> 
> 赞同：2
> 
> 时间：2012-09-08T10:06:41.397
> 
> 标签：azure, azure-storage, azure-diagnostics

对于 Azure 媒体服务编码任务，状态多次显示正在处理...，然后进入错误状态。没有显示错误消息。我正在关注这个[https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#encode-asset](https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#encode-asset) 输入文件大小小于 4Mb 和 cloudblobclient.ParallelOperationThreadCount = 2

```
 IJob job = _context.Jobs.Create("My encoding job");
                    IMediaProcessor processor = GetMediaProcessor(_context,"Windows Azure Media Encoder");
                    ITask task = job.Tasks.AddNew("My encoding task",processor, "H.264 256k DSL CBR",TaskCreationOptions.ProtectedConfiguration);

                    task.InputMediaAssets.Add(assetToBeProcessed); //where assetToBeProcessed is the IAsset Ref. 
                    task.OutputMediaAssets.AddNew("Outputasset",true, AssetCreationOptions.StorageEncrypted);
                    job.Submit();
                    CheckJobProgress(_context,job.Id); 
```

* * *

```
 private static void CheckJobProgress(CloudMediaContext _context,string jobId)
            {
                bool jobCompleted = false;
                const int JobProgressInterval = 20000;
     while (!jobCompleted)
                {
                    IJob theJob = GetJob(_context,jobId); //brings the desired jobid
     switch (theJob.State)
                    {
                        case JobState.Finished: jobCompleted = true;break;
                        case JobState.Queued:
                        case JobState.Scheduled:
                        case JobState.Processing:
                                          break;
                        case JobState.Error:
                            break;
                        default:
                            break;
                    }
                    Thread.Sleep(JobProgressInterval);
                }

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:38:20.320

您可以使用以下代码获取有关您的作业失败原因的更多信息，您可以在其中按 Id 找到作业，然后打印那里所有任务的信息。

```
var context = CloudMediaContext(acc, key);
var job = context.Jobs.Where(j => j.Id == id).Single();

Console.WriteLine("  Job ID: " + job.Id);
Console.WriteLine("  Name: " + job.Name);
Console.WriteLine("  State: " + job.State);

      foreach (var task in job.Tasks)
      {
             Console.WriteLine("  Task Id: " + task.Id);
             Console.WriteLine("  Name: " + task.Name);
             Console.WriteLine("  Progress: " + task.Progress);
             Console.WriteLine("  Configuration: " + task.Configuration);
             Console.WriteLine("  Running time: " + task.RunningDuration);
        if (task.ErrorDetails != null)
        {
            foreach (var errordetail in task.ErrorDetails)
            {

                Console.WriteLine("  Error Message:" + errordetail.Message);
                Console.WriteLine("  Error Code:" + errordetail.Code);
            }
        }
       } 
```

# objective-c - Objective-C中双打的模

> ID：12329804
> 
> 赞同：0
> 
> 时间：2012-09-08T10:06:59.867
> 
> 标签：objective-c, xcode, double, modulo

> **可能重复：**
> [如何在objective-c / cocoa touch中进行模运算？](https://stackoverflow.com/questions/1271102/how-to-make-a-modulo-operation-in-objective-c-cocoa-touch)

有人可以向我解释为什么这里“myModValue”的值为 1.73472e-18 但当 x 为 0.1 或 0.4 时它正确为 0？有没有更好的方法来获得两个双打的模值？

```
double x = 0.3;
double y = 0.1;
double myModValue = fmod(x, y); 
```

谢谢迈克尔

编辑：尝试了上面的代码硬编码（所以不是我的项目变量的值），结果是 0.1 我不知道为什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:27:36.803

由于舍入误差，浮点数并不精确，值 1.73472e-18 在浮点数中基本上为 0。这就是为什么您不应该将浮点数与 == 进行比较的原因。

另请参阅[此答案](https://stackoverflow.com/questions/1614533/strange-problem-comparing-floats-in-objective-c)。

# ipad - 是否可以在 iOS 5 上安装 MediaWiki

> ID：12329806
> 
> 赞同：1
> 
> 时间：2012-09-08T10:07:08.287
> 
> 标签：ipad, mediawiki

我希望在我的 Mac 上运行 mediawiki。能够与我的 iPad 3 上的安装同步（目前已越狱）会很棒。因此，我需要在我的 iPad 上安装 mediawiki。这可能吗？

如果是这样，怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:29:00.650

一个有趣的问题。您可以在 iPad 上安装 PHP 和 Web 服务器吗？（根据[这篇文章](http://www.ipadforums.net/ipad-hacking/24007-running-php-server-ipad.html)，也许您可​​以。）如果可以，您很可能也可以安装 MediaWiki，因为它只是一个大的 PHP 脚本。通常的[安装说明](http://www.mediawiki.org/wiki/Manual%3aInstallation_guide)应该或多或少地按照给定的方式工作，可能需要进行一些调整以适应您的 Web 服务器的任何怪癖。

哦，是的，您的 iPad 上还需要一个 SQL 数据库。看起来[SQLite](http://www.mediawiki.org/wiki/Manual%3aSQLite)可能会起作用。

如果你确实让它工作，请告诉我们。我不确定 iPad 上的 MediaWiki 有什么用，但知道它是可能的肯定很酷。:)

# python - 在 nGINX 上部署 Django 应用程序

> ID：12329807
> 
> 赞同：6
> 
> 时间：2012-09-08T10:07:20.927
> 
> 标签：python, django, web-services, nginx, uwsgi

我想在 nGINX 服务器上部署 Django 应用程序。我正在使用 uWSGI。我查了很多教程，但没有一个有效。Django 应用程序作为独立应用程序完美运行。在 nGINX 上运行相同的应用程序的最简单方法是什么？

我被困在这里并想要一个解决方案.. :-(

我的 www 文件夹在`/usr/share/nginx/www`

我启用了站点的 n`conf.d`并且全部都在`/etc/nginx/`

我确实安装了 uWSGI，但找不到任何名为 uwsgi 的文件夹，其中包含**应用程序安装的**文件夹/文件

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T06:19:17.933

一旦你创建了一个 dJango 应用程序。只需按照以下步骤操作：

**步骤 1.**在你的 Django 项目目录中创建一个 uwsgi.ini 文件。即除了manage.py

```
[uwsgi]
# set the http port
http = :<port_no>

# change to django project directory
chdir = <project directory>

# add /var/www to the pythonpath, in this way we can use the project.app format
pythonpath = /var/www

# set the project settings name
env = DJANGO_SETTINGS_MODULE=<project_name>.settings

# load django
module = django.core.handlers.wsgi:WSGIHandler() 
```

**STEP 2.**在***/etc/nginx/sites-available***添加 .conf 文件

```
server {
listen 84;
server_name example.com;
access_log /var/log/nginx/sample_project.access.log;
error_log /var/log/nginx/sample_project.error.log;

# https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-production
location /static/ { # STATIC_URL
    alias /home/www/myhostname.com/static/; # STATIC_ROOT
    expires 30d;
                  }

       } 
```

**STEP 3.**在 nginx.conf 中，将请求传递给您的 Django 应用程序

在 server { } 块下，

```
location /yourapp {
           include uwsgi_params;
           uwsgi_pass <your app address, eg.localhost>:<portno>;
                   } 
```

**步骤 4.**运行 uwsgi.ini

```
> uwsgi --ini uwsgi.ini 
```

现在对您的 nGINX 的任何请求都会通过 uwsgi 将请求传递给您的 Django 应用程序。享受 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T10:44:08.697

除非您需要坚持使用 uWSGI，否则[最](http://gunicorn.org/)简单的方法（并且非常有效）是使用Gunicorn。他们有很好的文档，而且部署起来很快而且很容易。

我有几个网站（包括生产），这样的工作：

website_gunicorn.conf.py（放在任何你喜欢的地方）：

```
import multiprocessing
daemon = False
bind = "unix:/tmp/gunicorn.sock"
workers = multiprocessing.cpu_count() * 2 + 1
timeout = 60 
```

对应的 NGINX 配置（部分，包含在主配置中）：

```
upstream gunicorn {
    server unix:/tmp/gunicorn.sock fail_timeout=0;
}

server {
    listen 80;
    server_name example.com;
    access_log /var/log/access.log combined;
    error_log /var/log/error.log error;

    keepalive_timeout 5;

    # path for static files
    root /path/to/your/static/files;

    location @django {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_ignore_client_abort off;
        proxy_buffering off;
        proxy_redirect off;
        proxy_pass   http://gunicorn;
        proxy_read_timeout 60;
    }         

    location / {
        try_files $uri @django;
    }
} 
```

然后你应该可以这样开始（当然是在安装 Gunicorn - 之后`pip install gunicorn`）：

```
gunicorn_django -c /path/to/website_gunicorn.conf.py 
```

NGINX 应该连接到套接字并为网站提供服务（静态文件将由 NGINX 直接提供，从而节省一些内存）。

[有关更多详细信息，请参阅有关部署](http://gunicorn.org/deploy.html)和[配置](http://gunicorn.org/configure.html)的 Gunicorn 文档。请注意，我有`daemon=False`Gunicorn 配置。这是因为我使用[Supervisor](http://supervisord.org/)来控制它。你可能想也可能不想摆脱那条线。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-14T07:45:33.920

**步骤 1.**在您的系统中安装 Nginx。

```
sudo apt-get install nginx 
```

**步骤 2.**在 Django 项目中编辑 setting.py 文件

ALLOWED_HOSTS = []

至

ALLOWED_HOSTS = ['*']

**步骤 3.**安装 gunicorn

pip3 安装 gunicorn

**STEP 4.**创建一个 .service 文件并编写一些自己的配置

```
 sudo vi /etc/systemd/system/gunicorn.service 
```

```
[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=root
Group=www-data
WorkingDirectory=<your project root directory>
ExecStart=<path of your project>/venv/bin/gunicorn --access-logfile - --workers 3 --bind unix:<path of your wsgi file>/restapi.sock rest_Api.wsgi:application
[Install]
WantedBy=multi-user.target
```

**STEP 5.**运行给定的命令

```
 sudo systemctl enable gunicorn

  sudo systemctl start gunicorn 
```

**步骤 6.**在可用站点中创建一个文件

```
 sudo vi /etc/nginx/sites-available/gunicorn 
```

**步骤 7.**在上述文件中写入给定配置，即 gunicorn

```
server {
    listen <port on which you want to configure>;
    server_name <ip address> or <name of the server>;

    location = /favicon.ico { access_log off; log_not_found off; }
    location <path of your static directory> {
        root <path of your root project>;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:<path of your restapi.sock file>/restapi.sock;
    }
}
```

**步骤 8.**现在注释默认文件中的所有行。

```
 sudo vi /etc/nginx/sites-available/default 
```

**STEP 9.**运行这些命令进行测试

```
 sudo ln -s /etc/nginx/sites-available/gunicorn1 /etc/nginx/sites-enabled/

  sudo nginx -t 
```

**STEP 10.**重启 Nginx 服务器

```
 sudo systemctl restart nginx 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-08T11:23:16.983

尽量远离与发行版相关的 howtos，它们很容易将你推向错误的方向。

按照此处的快速入门：

[http://projects.unbit.it/uwsgi/wiki/Quickstart](http://projects.unbit.it/uwsgi/wiki/Quickstart)

（对于跟随，我的意思是“理解”而不是复制和粘贴；）

从一个简单的配置开始，其中 nginx 将所有请求转发到 uWSGI。

提供静态文件是另一回事，它不依赖于应用程序服务器，因此您可以遵循官方 Django 文档。

# heroku - Heroku 上的 Gevent-socketio

> ID：12329808
> 
> 赞同：2
> 
> 时间：2012-09-08T10:07:22.623
> 
> 标签：heroku, socket.io, gevent

我试图在heroku上使用gevent-socketio，我已经构建了应用程序，它可以在本地与gunicorn一起使用。但是一旦我将它推送到heroku，它就会给我服务器内部错误。我用 heroku logs --tail 跟踪了错误，它给了我这个错误。[https://gist.github.com/3673165](https://gist.github.com/3673165)

我做了一些研究，发现对于 sockeio heroku 需要一些额外的[设置。](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku) 如何使用 gevent-socketio 执行此操作？甚至可以设置这个吗？

我读过heroku不支持websockets但支持socketio，所以我想知道是否可能导致gevent-socketio使用gevent-websocket ...还是我错了？

所以请如果有人设法设置这个，请告诉我如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:21:19.323

正如 Nitzan 所指出的，关键是将传输限制为“xhr-polling”，并设置客户端轮询持续时间和超时的时间间隔。如果您使用的是 gunicorn，Nitzan 的说明应该有效。

**您还需要为客户端执行此操作。** 特别是，确保您在服务器端提供的轮询持续时间与客户端的轮询持续时间相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:03:01.080

我不确定为什么会出现内部错误，但至于您的问题是“设置”：这些是您需要传递给 SocketIOServer 实例的 2 个关键字参数。

作为一个快速破解，您可以将 sgunicorn.py 复制到您的项目目录，并对其进行修改以传递所需的值，例如：

```
 server = self.server_class(
        self.socket, application=self.wsgi,
        spawn=pool, handler_class=self.wsgi_handler,
        resource=self.resource, policy_server=self.policy_server,
        ## add your stuff here
        transports=['xhr-polling'], ## heroku will only support xhr-polling transport
        heartbeat_interval=10, ## client will send a heartbeat every 10 seconds
        heartbeat_timeout=15, ## server will expect said heartbeat every 15 seconds (give it time to arrive...)
        close_timeout=60, ## if client did not re-connect in 60 seconds, it will give up
    ) 
```

但是，我很遗憾地说我认为这与您的 sleep(1.0) 退出没有任何关系。

# c# - 配置序列化格式

> ID：12329809
> 
> 赞同：0
> 
> 时间：2012-09-08T10:07:26.950
> 
> 标签：c#, serialization

我要求一些常见的序列化格式来存储特定应用程序的设置。我正在寻找一种易于处理的格式，并且可选地有一个类可以在 .NET [外部或内部（如 XML）] 中处理它。我知道 Ini 格式，但一些 .NET 开发人员推荐使用 XML。所以要求一个相当简单的处理配置存储文件格式。希望，我有道理。

谢谢，WritZ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:10:58.137

XML 很容易被人工读取，并且 .NET 对从 XML 文件读取设置具有很好的内置支持。它甚至抽象了序列化，您只需在程序中读取/写入设置。出于这个原因，我也推荐 XML。*您也可以尝试 JSON 或二进制序列化，但前提是您有一些不*使用 XML的特定原因。

# google-fusion-tables - 在 fusiontables 中取消合并表

> ID：12329810
> 
> 赞同：0
> 
> 时间：2012-09-08T10:07:41.017
> 
> 标签：google-fusion-tables

我在 fusiontables 中有一个合并表，我想取消合并它（即，从中分离一个表）。可能吗？如果是，如何？

我不想一切从头开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:45:51.797

你不能取消合并一个表，但你应该仍然有你合并的原始表，对吧？

# vb.net - 将 vb.net 解决方案移动到另一台机器

> ID：12329812
> 
> 赞同：0
> 
> 时间：2012-09-08T10:08:07.643
> 
> 标签：vb.net, visual-studio-2010

我正在尝试在第二台机器上打开内置于 VB.Net 2010 express 的解决方案。两台机器都运行相同版本的 VB.Net——第一台 Dev 机器运行 vista home premium 和新机器 vista business 都是 32 位的。我认为项目所需的一切都在顶级目录（解决方案）中 - 我通常会定期制作整个解决方案的副本作为安全备份，因为我工作并且它工作正常。但是试图在另一台机器上打开它会引发各种构建错误。

我在清单中修复了一些：requestedExecutionLevel 我设置为 requireAdministrator 并关闭了 OneClick。

现在它抛出一个新的 Buld 错误：Assembly'My Project\app.manifest' has mismatched identity'MyApplication.app，预期文件名：'MyApplication.app.manifest'。

在我开始改变更多东西之前 - 这是正常的还是问题？它是同一个项目，没有文件从一台机器更改为另一台机器，为什么需要在 app.config 和 app.manifest 文件中搞乱？

顺便说一句：项目我的项目属性中的引用选项卡未显示任何引用，仅显示错误：尝试加载此页面时发生错误外部组件已引发异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T19:56:02.197

Instead of solution file can u open the vbproject file? Correct version of framework installed? 32/64 bit processor?

# algorithm - 这个拼字游戏算法中的“锚点”到底是什么？

> ID：12329813
> 
> 赞同：2
> 
> 时间：2012-09-08T10:08:07.663
> 
> 标签：algorithm, wordsearch

我正在尝试实现这个算法：[http](http://www.cs.cmu.edu/afs/cs/academic/class/15451-s06/www/lectures/scrabble.pdf) ://www.cs.cmu.edu/afs/cs/academic/class/15451-s06/www/lectures/scrabble.pdf但我无法弄清楚这些锚到底是什么正方形是（首先在 3.1.2 中提到，然后在 3.3 中提到）。

我知道他们的候选人都是与已经在董事会上的人相邻的空白方格，但不知道我应该选择哪个。

另外，我不知道为什么左侧的所有方块都有微不足道的交叉检查（意味着每个字母都可能放在那里），而锚点总是有非微不足道的交叉检查。这种情况怎么办：

```
_._._._
_._.x.A
_._._._ 
```

_ 是空方格，x 是锚点，A 是板上已经存在的一些字母 - 为什么在这种情况下我需要检查 x 以进行交叉检查，而它显然不需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T11:19:10.337

根据 Scrabble 的规则，你的单词必须连接或*锚定*在板上的现有单词。现在，当我们一次查看一行时，存在三种类型的锚点：

*   同一行中字母左侧的平铺，
*   同一行中字母右侧的瓷砖，
*   和与当前行上方或下方行中的字母相邻的拼贴。

如果我们将一个字母放在与上一行或下一行中的一个字母相邻的锚上，我们也必须用这些字母形成一个有效的单词，从而对该锚所允许的字母施加额外的限制。当使用与当前行中的字母相邻的锚点时（并且*仅限*于那些），我们可以放置在该图块上的字母仅受我们将在当前行中形成的单词的限制，因此除了实际之外没有其他检查需要单词形成算法。

这意味着，在您的示例中，实际上对 tile 上的字母没有额外的限制`x`。只需找到一个从`x`左侧延伸的前缀，与字母组成一个有效的单词（或更长的前缀）`A`。

您可能还想查看 Udacity 课程“[计算机程序设计](http://www.udacity.com/overview/Course/cs212)”，其中他们在第 6 单元中讨论了拼字游戏求解算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T13:04:59.397

我创建了一个基于洪水填充的算法来收集所有与我们刚刚放下的瓷砖相接触的瓷砖，其中一个必须与中心瓷砖相交才能使游戏有效。

该算法从您放下的每个瓷砖开始，然后检查每个周围的方块是否有瓷砖，如果瓷砖存在于特定方向，则将其添加到 Set 并递归地对接触这个新瓷砖的每个瓷砖执行相同的操作，如果没有tile 存在它将退出该功能。当我们播放的字母在各个方向都用完瓷砖时，递归结束。

```
 func getFilledSquare(c: Coordinate) -> Square? {
        return squares
            |> { s in filter(s) { $0.c == c && $0.tile != nil } }
            |> { s in first(s) }
    }

    func getAdjacentFilledSquares(c: Coordinate?, vertically v: Bool, horizontally h: Bool, original: Square, inout output: Set<Square>) {
        // We may hit the original square several times in different directions, so we allow it through multiple times
        if let coord = c, sq = getFilledSquare(coord) where sq == original || !output.contains(sq) {
            output.insert(sq)
            if h {
                getAdjacentFilledSquares(coord.next(.Horizontal, d: 1, b: self), vertically: v, horizontally: h, original: original, output: &output)
                getAdjacentFilledSquares(coord.next(.Horizontal, d: -1, b: self), vertically: v, horizontally: h, original: original, output: &output)
            }
            if v {
                getAdjacentFilledSquares(coord.next(.Vertical, d: 1, b: self), vertically: v, horizontally: h, original: original, output: &output)
                getAdjacentFilledSquares(coord.next(.Vertical, d: -1, b: self), vertically: v, horizontally: h, original: original, output: &output)
            }
        }
    } 
```

它是开源的，该方法称为 getAdjacentFilledSquares（我知道有点冗长）。我的仓库在这里：[https ://github.com/ChrisAU/Locution?files=1](https://github.com/ChrisAU/Locution?files=1)

# node.js - 错误：管道节点输出到“| head”时写入 EPIPE

> ID：12329816
> 
> 赞同：29
> 
> 时间：2012-09-08T10:08:47.373
> 
> 标签：node.js, stdout

我在收到错误时遇到问题：

```
events.js:48
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: write EPIPE
    at errnoException (net.js:670:11)
    at Object.afterWrite [as oncomplete] (net.js:503:19) 
```

当管道输出到头部时。一个简单的尝试案例是：

```
console.log('some string');
... the same for 20 lines 
```

然后`node test.js | head`得到错误，这似乎出现在 Ubuntu 12.04 上运行的大约 70% 中。有什么问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T16:42:26.527

要在关闭管道的情况下更改程序以成功退出，请尝试：

```
process.stdout.on('error', function( err ) {
    if (err.code == "EPIPE") {
        process.exit(0);
    }
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-08T10:21:12.653

该`head`命令仅读取前几行。您的代码希望读取其所有输出，如果无法生成输出，则会触发错误。如果从程序中丢弃输出是合法的，请不要将其视为程序中的致命错误。如果从程序中丢弃输出是不合法的，请不要将其通过管道传输到`head`.

您当前有一个竞争条件。如果`head`在程序完成写入输出之前开始忽略输入，则程序会出现异常。如果程序在`head`开始忽略其输入之前完成了输出写入，那么一切都很好。

作为一个愚蠢的临时修复：`node test.js | tee /dev/null | head`
现在，`tee`将获取所有程序的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T12:37:34.227

它对我有用，我试图将我的代码上传到 aws ec2 但我遇到了这个错误（错误：写 EPIPE）（**npm uninstall phantomjs-prebuilt**）并再次安装（**npm install phantomjs-prebuilt@2.1.13**

# qt - Qt在没有焦点的情况下获得鼠标按下事件

> ID：12329818
> 
> 赞同：0
> 
> 时间：2012-09-08T10:08:55.677
> 
> 标签：qt, background, focus, mouse, symbian

如何从后台运行的应用程序中获取鼠标按下的位置（因此它没有焦点）？我不想从所有其他应用程序中抓取鼠标我只想知道它被按下的位置，因为我希望它对在某个位置按下鼠标做出反应，无论哪个应用程序当前处于活动状态并处于焦点位置？

我尝试过像这样创建一个 QWidget：

```
#ifndef MOUSECLICK_H
#define MOUSECLICK_H

#include "QWidget"
#include <QMouseEvent>
#include <QDebug>

class mouseClick : public QWidget
{
    void mousePressEvent(QMouseEvent* event)
    {
        QPoint position = event->pos();
        qDebug() << position.x();
        printf("%d %d,positon.x,position.y");
    }
};

#endif // MOUSECLICK_H 
```

然后我只是从 main 中使用了它的 show() 函数，但是一旦另一个应用程序变得活跃并成为焦点，它就不会响应。

如果它有所作为，这适用于 Symbian(Belle)。

我认为事件过滤器可能是答案，但我不知道如何配置它以在焦点窗口之前拦截事件，我不知道要在什么对象上安装它？

# sencha-touch-2 - Sencha Touch 2 面板水平滚动使其消失

> ID：12329819
> 
> 赞同：0
> 
> 时间：2012-09-08T10:09:01.430
> 
> 标签：sencha-touch-2, panel, horizontal-scrolling

我正在尝试在面板中显示一些 html（专辑）并希望给它一个水平滚动。但它没有显示。它使我的面板消失。我花了几个小时来修复它。请帮我 。

```
var panel = Ext.create('Ext.Panel', {

        scrollable: {
            direction: 'horizontal',
            directionLock: true
        },
        height:120,
        html: '<h2>Photo Albums</h2><ul><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="Cover Photos"></a><span>Cover Photos</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="holilongnameofholitotesthere"></a><span>sample</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_251.jpg" title="Kerala"></a><span>Kerala</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="Kerala"></a><span>Kerala</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="Kerala"></a><span>444</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="Kerala"></a><span>333</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_40285.jpg" title="Kerala"></a><span>222</span></li><li><a href="#" onclick=""><img src="http://assets.en.oreilly.com/1/eventprovider/1/_@user_102517.jpg" title="Kerala"></a><span>sample</span></li></ul>',
        });
    // add the list as an item to the viewport
    Ext.Viewport.add({
        layout: {
            type: 'vbox',
            pack: 'center'
        },
        items: [panel
        ]
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:27:44.733

实现这一点的最简单方法是使用`Ext.List`带有一些额外 CSS 的组件。

这是 JavaScript（非常简单的数据列表）：

```
Ext.application({
    launch : function () {
        Ext.Viewport.add({
            xtype: 'list',
            data: [
                { name: 'one' },
                { name: 'two' },
                { name: 'three' },
                { name: 'four' },
                { name: 'five' }
            ],
            itemTpl: '{name}'
        });
    }
}); 
```

还有自定义 CSS，它使每个项目内联：

```
.x-list .x-list-inner {
    width: auto;
}
.x-list-container {
    white-space: nowrap;
}
.x-list-item {
    display: inline-block;
    width: 400px;
} 
```

您可以在此处找到有关此的更多信息：[http ://www.sencha.com/forum/showthread.php?181298-Dataview-List-Horizo​​ntal-Scroll-Possible](http://www.sencha.com/forum/showthread.php?181298-Dataview-List-Horizontal-Scroll-Possible)

# android - 如何构建android框架

> ID：12329823
> 
> 赞同：1
> 
> 时间：2012-09-08T10:09:56.597
> 
> 标签：android, frameworks, build

我在`frameworks/base`. 但我从来没有得到我想要的结果。有没有成功搭建过android框架的？我认为它将开辟一条新`framework.jar`的道路

```
/out/debug/target/product/{my-phone}/system/framework 
```

谁能帮我 ？这是一个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:18:08.403

尝试使用 make 而不是 mmm。如果您已经构建了系统映像，则 make 不会花费太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:55:18.690

我通常使用“make -j4”来构建 Android 源代码，framework.jar 将被放入 out/target/product/generic/system/framework。根据我的经验，'mmm' 不能用来构建框架，我只是用它来构建系统应用程序

# php - 带有隐藏类型代码点火器的表单验证错误

> ID：12329827
> 
> 赞同：0
> 
> 时间：2012-09-08T10:10:55.440
> 
> 标签：php, codeigniter, validation

[这是从这里开始](https://stackoverflow.com/questions/12329534/form-validation-for-different-condition-in-code-igniter#comment16549157_12329534)的一个继续问题

情况是：添加隐藏字段后，现在我可以更新但我无法保存，因为每次我尝试保存时，都会出现此错误消息：`The User ID field is required.`

这是控制器，函数 add 用于 Save 和 update 用于 Update ：

```
function add(){
    //set common properties 
    $data['title'] = 'Tambah User baru';
    $data['action'] = site_url('user/add');
    $data['link_back'] = anchor('user/index/', 'Back to User list', array('class'=>'back'));

    //bedakan add/update
    $data['validate'] = 'add';

    $this->_set_rules();
    //run validation
    if($this->form_validation->run() == false){
        $data['message'] = '';

        $data['title'] = 'Add new User';
        //$data['message'] = '';
        $data['user']['ID_user'] = '';
        $data['user']['pass'] = '';
        $data['user']['nama'] = '';
        $data['user']['email'] = '';
        $data['user']['active'] = '';
        $data['link_back'] = anchor('user/index/', 'Lihat daftar User', array('class'=>'back'));

        $this->load->view('user_form_v', $data);
    }

    else{
        //save data
        $user = array('ID_user'=>$this->input->post('ID_user'),
        'pass'=>sha1($this->input->post('pass')),
        'nama'=>$this->input->post('nama'),
        'email'=>$this->input->post('email'),
        'active'=>$this->input->post('active'),
        'regis_date'=>date('Y-m-d H:i:s'));

        $ID_user = $this->user_m->save($user);

        //set form input nama = "id"
        $this->validation->ID_user = $ID_user;

        redirect('user/index/add_success');
    }
}

function update($ID_user){
    //set common properties
    $data['title'] = 'Update user';
    $this->load->library('form_validation');

    //set validation properties
    $this->_set_rules();
    $data['action'] = ('user/update/'.$ID_user);

    //bedakan add/update
    $data['validate'] = 'update';

    //run validation
    if ($this->form_validation->run() == false){
        $data['message'] = '';

        $data['user'] = $this->user_m->get_by_id($ID_user)->row_array();
        //set common properties
        $data['title'] = 'Update User';
        $data['message'] = '';
    }
    else{
        //save data
        $ID_user = $this->input->post('ID_user');
        $user = array(
        'pass'=>$this->input->post('pass'),
        'nama'=>$this->input->post('nama'),
        'email'=>$this->input->post('email'),
        'active'=>$this->input->post('active'),
        'regis_date'=>date('Y-m-d H:i:s'));

        $this->user_m->update($ID_user, $user);
        $data['user'] = $this->user_m->get_by_id($ID_user)->row_array();

        //set user message
        $data['message'] = 'Update User Success!';
    }

    $data['link_back'] = anchor('user/index/', 'Lihat daftar user', array('class'=>'back'));
    //load view
    $this->load->view('user_form_v', $data);
} 
```

这是我的观点：

```
<input type="text" name="ID_user" class="text"
                <?php if($validate!='add'){echo "disabled";} ?>
                value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/>
                <input type="hidden" name="ID_user" value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/> 
```

**注意：如果输入文本和输入隐藏的名称相同，则更新有效但保存无效，但如果名称不同，则更新无效但保存有效@_@**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:17:56.567

只需将隐藏的输入元素放在禁用的元素上方即可。

```
<input type="hidden" name="ID_user" value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/>
<input type="text" name="ID_user" class="text"
                <?php if($validate!='add'){echo "disabled";} ?>
                value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/> 
```

出现问题是因为该值被隐藏的输入元素（在“保存”页面中为空）覆盖。通过将隐藏的页面移动到可能禁用或可能不禁用的页面之前，“保存”和“更新”页面都将正常工作。在更新页面，它会起作用，因为如果输入被禁用，它不会被发送到服务器（即它不会覆盖隐藏的）。

但是，在我看来，使用隐藏输入并不是很安全。用户可以通过使用 Firebug 或 Chrome 开发人员工具等工具编辑 HTML 轻松更改值。您可能希望将会话视为解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:19:04.823

你应该为输入文本提供不同的名称，输入隐藏。你给了两个“ID_user”。试试这样

```
 <input type="text" name="ID_user" class="text"
            <?php if($validate!='add'){echo "disabled";} ?>
            value="<?php echo (isset($user['ID_user']))?$user['ID_user']:""?>"/>
            <input type="hidden" name="ID_user_hidden" value="<?php echo            (isset($user['ID_user']))?$user['ID_user']:""?>"/> 
```

# c++ - 如何在 WM_COMMMAND 中检索鼠标位置

> ID：12329828
> 
> 赞同：0
> 
> 时间：2012-09-08T10:10:56.227
> 
> 标签：c++, winapi

> **可能重复：**
> [获取当前光标位置](https://stackoverflow.com/questions/6423729/get-current-cursor-position)

我创建这样的按钮：

```
button = CreateWindowEx(NULL,_T("Button"),NULL,
            WS_CHILD | WS_VISIBLE | BS_BITMAP | BS_NOTIFY ,
            pos.x, pos.y, BTN_SIZE, BTN_SIZE,
            hWndDlg, (HMENU)id,hIns, NULL); 
```

我想拖动那个按钮，不知道如何让鼠标位置 X，Y 相对于 DialogWindow？感谢您的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:01:32.413

您收到的消息包含一个[`POINT`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162805.aspx)名为 的结构`pt`。至少对于任何源自鼠标的消息，这是消息发出时鼠标的位置。那是在屏幕坐标中，所以你需要使用`ScreenToClient`or （最好）[`MapWindowPoints`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145046.aspx)来获取相对于你的对话框的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:59:33.173

试试这个代码，看看你能不能弄清楚一些事情。

```
#include <windows.h>
#include <stdio.h>

#define IDC_MAIN_BUTTON 101         // Button identifier
#define IDC_MAIN_EDIT   102         // Edit box identifier
HWND hEdit;

LRESULT CALLBACK WinProc(HWND hWnd,UINT message,WPARAM wParam,LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInst,HINSTANCE hPrevInst,LPSTR lpCmdLine,int nShowCmd)
{
    WNDCLASSEX wClass;
    ZeroMemory(&wClass,sizeof(WNDCLASSEX));
    wClass.cbClsExtra=NULL;
    wClass.cbSize=sizeof(WNDCLASSEX);
    wClass.cbWndExtra=NULL;
    wClass.hbrBackground=(HBRUSH)COLOR_WINDOW;
    wClass.hCursor=LoadCursor(NULL,IDC_ARROW);
    wClass.hIcon=NULL;
    wClass.hIconSm=NULL;
    wClass.hInstance=hInst;
    wClass.lpfnWndProc=(WNDPROC)WinProc;
    wClass.lpszClassName="Window Class";
    wClass.lpszMenuName=NULL;
    wClass.style=CS_HREDRAW|CS_VREDRAW;

    if(!RegisterClassEx(&wClass))
    {
        int nResult=GetLastError();
        MessageBox(NULL, "Window class creation failed\r\n", "Window Class Failed", MB_ICONERROR);
    }

    HWND hWnd=CreateWindowEx(NULL,  "Window Class", "Mouse coords", WS_OVERLAPPEDWINDOW, 200, 200,  640, 480, NULL, NULL, hInst, NULL);

    if(!hWnd)
    {
        int nResult=GetLastError();

        MessageBox(NULL,
            "Window creation failed\r\n",
            "Window Creation Failed",
            MB_ICONERROR);
    }

    ShowWindow(hWnd,nShowCmd);

    MSG msg;
    ZeroMemory(&msg,sizeof(MSG));

    while(GetMessage(&msg,NULL,0,0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return 0;
}

LRESULT CALLBACK WinProc(HWND hWnd,UINT msg,WPARAM wParam,LPARAM lParam)
{
    char buffer[32];

    POINT mouse;

    switch(msg)
    {
            case WM_CREATE:
            {
                // Create an edit box
                hEdit=CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT",  "",     WS_CHILD|WS_VISIBLE|    ES_MULTILINE|ES_AUTOVSCROLL|ES_AUTOHSCROLL, 50, 100, 200,   100, hWnd, (HMENU)IDC_MAIN_EDIT, GetModuleHandle(NULL), NULL);
                HGDIOBJ hfDefault=GetStockObject(DEFAULT_GUI_FONT);
                SendMessage(hEdit,  WM_SETFONT, (WPARAM)hfDefault,  MAKELPARAM(FALSE,0));
                SendMessage(hEdit,  WM_SETTEXT, NULL,   (LPARAM)"Insert text here...");

                // Create a push button
                HWND hWndButton=CreateWindowEx(NULL, "BUTTON",  "OK", WS_TABSTOP|WS_VISIBLE| WS_CHILD|BS_DEFPUSHBUTTON, 50, 220,  100, 24,  hWnd, (HMENU)IDC_MAIN_BUTTON, GetModuleHandle(NULL), NULL);
                SendMessage(hWndButton, WM_SETFONT, (WPARAM)hfDefault,  MAKELPARAM(FALSE,0));
            }
            break;

            case WM_LBUTTONDOWN:
            {

                mouse.x = LOWORD(lParam); 
                mouse.y = HIWORD(lParam);     

                ScreenToClient(hWnd, &mouse);

                sprintf(buffer,"Mouse coords:  %dx%d",mouse.x,mouse.y);

                MessageBox(NULL, buffer, "Information", MB_ICONINFORMATION);

            }
            break;

            case WM_COMMAND:

                switch(LOWORD(wParam))
                {

                    case IDC_MAIN_BUTTON:
                    {
                        mouse.x = LOWORD(lParam); 
                        mouse.y = HIWORD(lParam);      

                        ScreenToClient(hWnd, &mouse);

                        SendMessage(hEdit,  WM_GETTEXT, sizeof(buffer)/sizeof(buffer[0]),   reinterpret_cast<LPARAM>(buffer));
                        sprintf(buffer,"Mouse coords:  %dx%d",mouse.x,mouse.y);
                        MessageBox(NULL, buffer, "Mouse coords", MB_ICONINFORMATION);
                    }
                    break;
                }
                break;

            case WM_DESTROY:
            {
                PostQuitMessage(0);
                return 0;
            }
            break;
    }

    return DefWindowProc(hWnd,msg,wParam,lParam);
} 
```

# c# - 保存和恢复滑块状态

> ID：12329830
> 
> 赞同：1
> 
> 时间：2012-09-08T10:10:58.897
> 
> 标签：c#, slider, windows-8, microsoft-metro, state

如何在 C# Metro 风格应用程序中保存和恢复滑块的状态？在 Metro 风格应用程序中，当应用程序进入休眠状态时，滑块需要保存其状态。保存滑块状态的 C# 代码是什么？恢复滑块状态的 C# 代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:06:06.873

您需要处理[Suspending](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.application.suspending.aspx)和[Resuming](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.application.resuming.aspx)事件。当您的应用程序处于挂起状态时保存您的数据，并在触发恢复事件时设置它。

# objective-c - 获取 json 对象，然后分配给合适的视图

> ID：12329831
> 
> 赞同：0
> 
> 时间：2012-09-08T10:11:05.113
> 
> 标签：objective-c, ios, json, uitableview

那么在我的应用程序中，我有一个表格视图。我想要做的是：通过网络获取数据，将它们存储在一个数组中，然后根据每个索引的值对应的行来获取背景。

我的意思是：如果 data[0]=red---> 第 0 行的图像是红色的，否则是绿色的。

我已经设法下载了数据，但问题是首先分配了图像，然后发生了 http 请求。

例如：这是我获取数据并将它们存储到数组的代码：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");
    NSLog(@"Succeeded! Received %d bytes of data",[self.responseData length]);

    // convert to JSON
    NSError *myError = nil;
    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:self.responseData options:NSJSONReadingMutableLeaves error:&myError];

    colours== [NSMutableArray array];

    NSString *parsed_data=[res objectForKey:@"data_1"];
    NSLog(@"getting colour : %@",parsed_data);
    [colours addObject:parsed_data];
    .....
    [self.mapMain reloadData];
} 
```

其中 mapMain 是我的 IBoutlet。并用于设置背景：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier=@"SimpleTableCell";
    //this is the identifier of the custom cell
    SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    NSLog(@"Colour at %d is %@ ",indexPath.row,[colours objectAtIndex:indexPath.row]);

    if ([@"red" isEqualToString:[colours objectAtIndex:indexPath.row]]) {
        cell.mainImage.image = [UIImage imageNamed:[centersimages_red objectAtIndex:indexPath.row]];
    } else{
    cell.mainImage.image = [UIImage imageNamed:[centersimages_green objectAtIndex:indexPath.row]];
    }

    return cell;
} 
```

其中 centerimages 是带有我的 .pngs 名称的表格。

这是我的日志：

```
Colour at 0 is (null) 
Colour at 1 is (null)
....
didReceiveResponse
connectionDidFinishLoading
Succeeded! Received 287 bytes of data
getting colour for data : red 
```

所以它首先将图像分配给单元格，然后执行请求。当然，我总是在 else 子句中看到图像。

我想先获取数据，然后分配图像。怎么做？因为这是我的第一个 ios 应用程序，请完成答案或给我示例代码或提供教程链接。

编辑：好的，我修复了那个拼写错误。现在我在尝试重新加载时收到 EXC_BAD_ACCESS 错误。如果我取消注释重新加载数据，则不会出现此错误。请参阅我编辑的代码。我的表视图已“连接”到 IBOutlet mainMap。

EDIT2：错误出现在这一行：

```
 NSLog(@"Colour at %d is %@ ",indexPath.row,[colour objectAtIndex:indexPath.row]); 
```

第二次（我的意思是当 cellForRowAtIndexPath 因为重新加载数据而被调用时）

错误是：EXC_BAD_ACCESS（代码 1）。也许数组已发布或类似的东西？我应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:33:21.070

做你做的每一件事，但在初始化后隐藏 tableView：

```
tableView.alpha = 0; 
```

然后在`connectionDidFinishLoading:`填充数组后的方法中，首先使用`[tableView reloadData];`（再次调用`cellForRowAtIndexPath`）重新加载 tableView，然后使用`tableView.alpha = 1;`.

您还可以使用动画淡入淡出 tableView，但这是另一个问题。

如果你想知道，如何编写这样一个 JSON-Parsing-tableView-filling App 访问这个链接：http:
[//mobile.tutsplus.com/tutorials/iphone/iphone-json-twitter-api/](http://mobile.tutsplus.com/tutorials/iphone/iphone-json-twitter-api/)

顺便一提：

这是什么：`colours== [NSMutableArray array];`？？？它必须是这样的：

```
colours = [NSMutableArray array];. 
```

注意单**等号**

# migration - OpenLaszlo 数据指针无法正常工作

> ID：12329833
> 
> 赞同：1
> 
> 时间：2012-09-08T10:11:29.097
> 
> 标签：migration, openlaszlo, lzx

我有以下代码片段，它在 OL 3.3 和 OL 4.9 中给出了预期的结果。

当我将代码与我的 OL4.9 应用程序集成时，出于某种原因，我在 Openlaszlo 4.9 中将“部件”设置为空。我无法弄清楚原因。下面的代码是否正确？

OL3.3

```
<canvas>
<attribute name="result" />
<attribute name="dp" value="$once{new LzDatapointer()}" />
<handler name="onresult">
    _populateList();
</handler>
<method name="_populateList">
            var node = LzDataNode.stringToLzData(result);
            Debug.write('_populateList' , node);
            dp.setPointer(node);
            Debug.write('_populateList dp' , dp);
            var parts = dp.xpathQuery('tracker');
            Debug.write("parts::" , parts);
            var partsArray = new Array();
            if ( parts instanceof LzDataNode ) {
                partsArray[0] = parts;
            }
            else if ( parts instanceof Array ) {
                partsArray = parts;
            }           
</method>
<button name="sample">Click Me
<handler name="onclick"><![CDATA[
    canvas.setAttribute('result','<root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root> ');
]]></handler>
</button>       
</canvas> 
```

OL4.9

```
<canvas>
<attribute name="result" />
<attribute name="dp" value="$once{new lz.datapointer()}" />
<handler name="onresult">
    _populateList();
</handler>
<method name="_populateList" >
        var node = lz.DataElement.stringToLzData(result);
            Debug.write('_populateList' , node);
            dp.setPointer(node);
            Debug.write('_populateList dp' , dp);
            var parts = dp.xpathQuery('tracker');
            Debug.write("parts::" , parts);
            var partsArray = new Array();
            if ( parts instanceof lz.DataElement ) {
                partsArray[0] = parts;
            }
            else if ( parts instanceof Array ) {
                partsArray = parts;
            }           
</method>

<button name="sample">Click Me

<handler name="onclick"><![CDATA[
    canvas.setAttribute('result','<root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root> ');
]]></handler>
</button>
</canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:38:07.560

这可能是 4.9 唯一的问题。我使用 flex4.6 分支进行了测试，这是我的输出。

*flex4.6 分支，swf11 运行时：*

```
_populateList «LzDataElement#0| <root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root>» 
_populateList dp «<datapointer>#1| <root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root>» 
parts:: «LzDataElement#2| <tracker sequence_number="1" next="NULL"/>» 
```

*flex4.6 分支，DHTML 运行时*

```
_populateList «LzDataElement#0| <root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root>»
_populateList dp «<datapointer>#1| <root><child1/><child2><sub/><sub/></child2><tracker sequence_number="1" next="NULL"/></root>»
parts:: «LzDataElement#2| <tracker sequence_number="1" next="NULL"/>» 
```

您在 4.9 中看到的输出是什么？我这里没有安装 4.9 进行测试。

# function - MathProg 递归函数

> ID：12329835
> 
> 赞同：1
> 
> 时间：2012-09-08T10:12:16.273
> 
> 标签：function, recursion, graph, traveling-salesman, mathprog

在尝试解决一个相当大的 TSP 问题时，我在计算 Mathprog 中的链接节点时遇到了麻烦：假设我有

```
set C  := 0..645;  #  a set of nodes
set A  := {i in  C, j in  C: i!=j};  # a set of edges 
```

距离函数 d(c1,c2)

```
var a{(i,j) in A}, binary;  # binary variables that mean "go through edge i-j"
minimize walk: sum{(i,j) in A} d[i,j] * a[i,j];  # an objective function 
```

和其他一些条件

```
subject to get_out {i in C}: sum{(i,j) in A} a[i,j] = 1; 
subject to get_in  {j in C}: sum{(i,j) in A} a[i,j] = 1; 
```

进行所有可能的削减以解决电路需要电源组和其他一些东西，但是在 20 多个节点上，问题太贪婪了，我无法找到解决方案。

所以我想我会限制求解器连接所有 a[i,j] 强加

```
 a[i,j], a[j,k], a[k,w], ..., a[z,i] =1 with i!= {j,k,w,...,z} and j!={k,w,...,z} and ... 
```

这与

```
 check(a[i,C]) {
   while C is empty 
     take j: a[i,j]=1;
     check( a[j,{C diff {i}}] ) 
 } 
```

这可能不会导致解决方案，但无法实现如此简单的事情令人非常沮丧......有没有办法在 mathprog (gmpl) 中实现这样的伪代码？

# javascript - Mootools：如何在点击时保持元素突出显示并停止所有事件？

> ID：12329839
> 
> 赞同：0
> 
> 时间：2012-09-08T10:13:03.513
> 
> 标签：javascript, html, map, mootools, highlight

我正在使用 HTML 和 Mootools 构建地图。到目前为止，我已经设法在`mouseenter`/上突出显示每个州（州） `mouseleave`。

这是一个例子：http: [//jsfiddle.net/undisclosedname/CdgJf/43/](http://jsfiddle.net/undisclosedname/CdgJf/43/)

我现在正在尝试添加一个单击事件，该事件将保持单击的州（状态）突出显示并显示一个包含有关所述州（新元素）的信息的小 div，锁定地图的其余部分，直到上述 div 关闭。

基本上，我想停止所有附加到`map#schweiz`and`ul#maplist`及其子元素（`mouseenter`、`mouseleave`和 click ）的事件。

谁能给我一个关于应该如何做的线索？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:52:19.430

我的第一个想法是添加一个覆盖来阻止所有 mouseover/mouseleave 事件。

看看这个：http: [//jsfiddle.net/4WyYS/2/](http://jsfiddle.net/4WyYS/2/)

# c - evp_encrypt 不会在 c 的 for 循环中工作

> ID：12329842
> 
> 赞同：2
> 
> 时间：2012-09-08T10:13:27.880
> 
> 标签：c, encryption, for-loop

我是新来的，所以如果我做错了什么请原谅。

我尝试使用加密字符串创建一个数组，我使用 EVP API 进行加密。这很好用，但是当我尝试在 foo 循环中使用 encrypt 函数时，控制台什么也没给我。

这是我的加密功能：

```
char *encrypt(char *key, char *iv, char * source){

    //char *target;
    int in_len, out_len;
    EVP_CIPHER_CTX ctx;
    in_len=strlen((const char *)source);
    unsigned char *target = (unsigned char *) malloc(in_len);
        //printf("This is the text before ciphering: %s\n",source);
        //printf("The length of the string is: %d\n",in_len);
        //starting the encryption process
        EVP_CIPHER_CTX_init(&ctx);
        EVP_EncryptInit_ex(&ctx,EVP_aes_128_cbc(),NULL,(unsigned char*) key,(unsigned char*)iv);
        EVP_EncryptUpdate(&ctx,target,&out_len,(unsigned char*)source,in_len);
        EVP_EncryptFinal_ex(&ctx,target,&out_len);
        target[out_len] = '\0';

        //EVP_CIPHER_CTX_cleanup(&ctx);

        return ((char *)target);
} 
```

在主循环中：

```
int main(){
    char source[17]="Shahababamamaaaa";
    char key[17]="ahardtobreakkey1";
    char iv[17] = "veryinterestingv";
     int rows = 1280;
     int cols = (3*800)/16;
        char *encrypted=encrypt(key, iv, source);
        printf("encrypted: %s\n", encrypted);
        char *encrypted2;
        encrypted2=encrypt(key, iv, encrypted);
        printf("encrypted2: %s\n", encrypted2);
        char *mx[rows];
        char *in, *temp;
        in = (char *) malloc ( cols * sizeof(char) );
        temp =(char *) malloc ( strlen(encrypted) );
        int i, j;

        for (i=0; i<5; i++){
            strcpy(in,encrypted);
            for(j=0;j<3;j++){
                    printf("in: %s\n", in);
                    strcpy(temp, encrypted2);
                    printf("temp: %s\n", temp);
                    memset(encrypted2,0x00, strlen(encrypted));
                    encrypted2=encrypt(key, iv,temp);
                    printf("encrypted2 nach j=%d : %s\n",j, encrypted2);

                    mx[i]=in;
            }

        }
        printf("Stele 0 Inhalt %s\n",mx[0]);
        printf("Laenge von 1 %d\n", strlen(mx[0]));

        //system ("PAUSE");
        free(in);
        return 0;

     } 
```

我错过了什么？再次使用 encrypt2 是不可能的吗？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:17:48.627

正如您所说，主要问题在于您的 encrypt() 函数，以及您如何调用它。您正在使用 malloc() 在函数内分配内存，并且永远不会释放它，这是内存泄漏（无论如何 malloc 在 c++ 中是禁止的）。您也没有为您的 ctx 运行清理功能。并且您的 encrypt_final 正在覆盖输出缓冲区的第一部分。所以，这里有一个清理过的 encrypt() 和一个匹配的 decrypt()：

```
int encrypt(unsigned char *key, 
        unsigned char *iv, 
        unsigned char * source, 
        unsigned char* target, 
        int in_len) // Need an in length.  Not all input is going to be
                    // zero-terminated, for example if we're reading from a file

{

    int out_len; // Return the output length.  Because it also won't be null
                 // terminated, and may contain null characters inline

    int final_out_len; // So that we don't overwrite out_len with the final call
    EVP_CIPHER_CTX ctx;

    EVP_CIPHER_CTX_init(&ctx);
    EVP_EncryptInit_ex(&ctx,EVP_aes_128_cbc(),NULL,key,iv);
    EVP_EncryptUpdate(&ctx,target,&out_len,source,in_len);
    EVP_EncryptFinal_ex(&ctx,target+out_len,&final_out_len);
    EVP_CIPHER_CTX_cleanup(&ctx);
    return out_len+final_out_len; // need to sum these together, because both
                                  // encrypt calls wrote data
} 
```

并解密：

```
int decrypt(unsigned char *key, 
        unsigned char *iv, 
        unsigned char * source, 
        unsigned char* target, 
        int in_len)
{

    int out_len=0,final_out_len=0;
    EVP_CIPHER_CTX ctx;
    EVP_CIPHER_CTX_init(&ctx);
    EVP_DecryptInit_ex(&ctx,EVP_aes_128_cbc(),NULL,key,iv);
    EVP_DecryptUpdate(&ctx,target,&out_len,source,in_len);
    EVP_DecryptFinal_ex(&ctx,target+out_len,&final_out_len);
    EVP_CIPHER_CTX_cleanup(&ctx);
    //Just to be nice, we'll add a zero at the end of the decrypted string
    target[out_len+final_out_len] = 0;
    return out_len+final_out_len;
} 
```

将它们放在一起（在一个循环中，以证明您的概念）：

```
int _tmain(int argc, _TCHAR* argv[])
{
    unsigned char key[] = {0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};
    unsigned char ivec[] = {1,2,3,4,5,6,7,8};
    char *raw_buffer = "This is a test string";
    int raw_count = strlen(raw_buffer);
    for (int i=0; i<5; i++){
        unsigned char *decrypted_buffer = new unsigned char[raw_count+64];
        unsigned char *encrypted_buffer = new unsigned char[raw_count+64];
        int final_len = encrypt(key,ivec,(unsigned char*)raw_buffer,(unsigned char*)encrypted_buffer,raw_count);
        int dec_len = decrypt(key,ivec,(unsigned char*)encrypted_buffer,(unsigned char*)decrypted_buffer,final_len);
        printf("raw_count: %i\nfinal_len: %i\ndec_len: %i\n",raw_count,final_len,dec_len);
        printf("Original str: \n%s\n",raw_buffer);
        printf("Encrypted: \n%s\n", encrypted_buffer);
        printf("Decrypted:\n%s\n\n\n", decrypted_buffer);
        delete[] decrypted_buffer;
        delete[] encrypted_buffer;
    }
    char c;
    c=getchar();
    return 0;
} 
```

# ruby-on-rails - 在 simple_form_for @form 中验证 f.association

> ID：12329845
> 
> 赞同：0
> 
> 时间：2012-09-08T10:13:57.287
> 
> 标签：ruby-on-rails, validation

我是 Rails 的新手。我有两个模型：Form 和 FormType。一个 form_type 可以有零个或一个表单。一个表单只属于一个 form_type。为此，我创建了如下模型：

```
 class FormType < ActiveRecord::Base

    has_one :form
    attr_accessible :name

 end 

 class Form < ActiveRecord::Base
   belongs_to :form_type

   validates :name, :presence => true
   validates_presence_of :form_type 

   attr_accessible :name, :enabled

 end 
```

我的 _form.html.erb 如下

```
<%= simple_form_for(@form, :html => { :class => 'form-horizontal' },
 :url => @form.new_record?() ? admin_forms_path : admin_form_path,
 :method => @form.new_record?() ? 'post':'put' ) do |f| %>
<div class="form-inputs">
      <%= f.input :name, :required => true, :autofocus => true %>
      <%= f.association :form_type,:required => true, :hint => "select type" %>
  <%= f.input :enabled %>
</div>

<div class="form-actions">
       <%=  f.button :submit, :class => 'btn-primary' %>
       <% if ! @form.new_record?() %>
       <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
           admin_form_path(@form),
          :method => 'delete',
          :confirm => t('.confirm', :default => t("helpers.links.confirm")),
          :class => 'btn btn-danger' %>
       <% end %>
 </div>
 <% end %> 
```

这是我的控制器代码。

```
def create
@form = Form.new
@form.name = params[:form][:name]
@form.enabled = params[:form][:enabled]
@form.form_type_id = params[:form][:form_type_id].to_i
 if @form.save
    redirect_to :action => 'index'
 else
    render action: "new"
 end 
```

结尾

我可以看到为名称字段触发了服务器端验证，但无法验证关联。谁能指出我的错误或一些有用的文章来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:06:10.263

这很可能是因为您在 create 方法中分配属性的方式。你正在做的方式并不是真正的标准。

特别是这一行可能是罪魁祸首，因为如果你不传递一个值，它将是 0，因为你通过调用 .to_i 来转换值。所以无论是什么validated_presence_of :form_type 都变得没用了：

```
@form.form_type_id = params[:form][:form_type_id].to_i 
```

ie/`nil.to_i`等于`0`将通过您的验证

试试这个，而不是你的 create 方法：

```
def create
    @form = Form.new(params[:form]) #mass assignment
    if @form.save
        redirect_to :action => 'index'
    else
        render action: "new"
    end
end 
```

在您的表单模型中，确保您已将您希望允许批量分配的值列入白名单。在这种情况下 -`attr_accessible :name, :enabled, :form_type_id`

同样在您的 html 文件中的 simple_form_for 方法中，取出以下内容，因为您正在复制 rails 的功能 - 它已经知道根据是否`@form`是新记录来更改请求并更正到 post/put 的路由.

```
:url => @form.new_record?() ? admin_forms_path : admin_form_path,
:method => @form.new_record?() ? 'post':'put' 
```

看起来您有一个管理名称空间（在管理文件夹中） - 如果是这种情况，请改用：

```
<%= simple_form_for([:admin, @form]) do |f| %> 
```

另外，我不太了解您的应用程序，但怀疑表单模型上的 has_one :form 应该是 has_many :forms ？

希望有帮助！

# java - LWJGL 鼠标滚轮 getDWheel() 方法

> ID：12329846
> 
> 赞同：1
> 
> 时间：2012-09-08T10:14:22.013
> 
> 标签：java, input, lwjgl, mousewheel

我在我的游戏中使用 getDWheel 方法，如下所示：

```
public void checkMouseWheel() {
if (highLight != null) {
    if (Mouse.getDWheel() < 0) {
        System.out.println("DOWN");
    }
    if (Mouse.getDWheel() > 0){
        System.out.println("UP");
   }
} 
```

每次检查输入时我都会调用此方法。当我使用滚轮时，程序仅在我向上滚动时到达 DOWN 部分，它不会进入 if... 无论我做什么，只有向下滚动有效。

编辑：当我向下滚动游戏时，它会打印“DOWN”，但是当我向上滚动游戏时，什么都不会打印。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T18:07:25.883

根据 javadoc，`Mouse.getDWheel()`“返回自上次调用 getDWheel() 以来车轮的运动”

因此，当您第一次调用它时，信息将被“清除”，因此第二次调用将始终返回 0。试试这个小改动来修复它：

```
public void checkMouseWheel() {
if (highLight != null) {
    int dWheel = Mouse.getDWheel();
    if (dWheel < 0) {
        System.out.println("DOWN");
    } else if (dWheel > 0){
        System.out.println("UP");
   }
} 
```

# jquery - jQuery多个固定粘盒

> ID：12329848
> 
> 赞同：2
> 
> 时间：2012-09-08T10:14:43.450
> 
> 标签：jquery, mootools

我一直在寻找一个 jQuery 插件来在同一页面中添加多个粘性 div 框。

我找到[了这个](http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/comment-page-2)（和其他一些插件，但我不能发布两个以上的链接）

它们都使用绝对位置来使元素具有粘性，并在窗口滚动时对其进行动画处理，并且它们都不能很好地工作（例如，当在页面中切换隐藏元素时）位置只是表现得很有趣。

[我在9gag](http://9gag.com/)上看到了我想要的一个很好的例子，每个帖子旁边的喜欢/不喜欢按钮看起来很好，我认为它是用 mootools 制作的。

你们有没有人在 mootools 或 jQuery 中做过这样的事情，或者知道这样的插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:36:41.263

欢迎来到 SO！

我也在寻找一些 9gag 粘盒，发现了这个：[jQuery Stickem](https://github.com/davist11/jQuery-Stickem)

这里是演示：[jQuery Stickem](http://davist11.github.com/jQuery-Stickem/)
的演示 希望您搜索过类似的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T14:12:42.430

如果您正在使用 Mootools（就像我一样），您可能想尝试我的解决方案[http://jsfiddle.net/nK8LR/6/](http://jsfiddle.net/nK8LR/6/)，它允许您创建任意数量的“贴纸”，并为每个人定义它们应该滚动的范围以及它们被粘贴的方式。

你可以使用它

```
 new Sticker({
    elevator: $('item you want to stick'),
    top: {relativeTo:$('item which marks the top range'),edge:'top',offsetY:5},
    bottom: {relativeTo:$('item which marks the bottom'),edge:'bottom',offsetY:-5},
    windowTrigger:$(document),
    windowScroller:$(document.body),
    stickTo: 'top'
  }); 
```

# linux - 隐藏沙箱文件系统层次结构

> ID：12329850
> 
> 赞同：0
> 
> 时间：2012-09-08T10:15:09.127
> 
> 标签：linux, sandbox

我想向其他访问它的人隐藏沙盒应用程序的文件系统层次结构。

我有 linux 内核 2.6.36。我通过识别资源来沙盒化应用程序，保存在文件夹 [ex /jail/networkdaemon/] 下，通过正常挂载共享必要的目录。调用 chroot 后，沙盒工作正常。现在我可以看到我的沙盒应用程序运行良好。我能够列出和访问沙盒应用程序的文件系统层次结构，如下所示。

/监狱/网络守护进程

```
bin

dev

etc

lib

mnt. 
```

如何隐藏沙盒应用程序的文件系统层次结构以防止其他人访问它。

如果需要提供更多信息，请告知。提前致谢。

问候

埃斯瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:49:23.523

如果您希望没有人（root 除外）可以访问您的 jailroot，您应该（以 root 身份）执行以下操作：

```
chown root:root /jail/networkdaemon/
chmod 700 /jail/networkdaemon/ 
```

# php - 后期静态绑定

> ID：12329852
> 
> 赞同：7
> 
> 时间：2012-09-08T10:16:01.077
> 
> 标签：php, oop, design-patterns

我有一个小问题。这里是：

1.  这是我的单例抽象类：

    ```
    abstract class Singleton {

    protected static $_instance = NULL;

    /**
     * Prevent direct object creation
     */
    final private function  __construct()
    {
        $this->actionBeforeInstantiate();
    }

    /**
     * Prevent object cloning
     */
    final private function  __clone() { }

    /**
     * Returns new or existing Singleton instance
     * @return Singleton
     */
    final public static function getInstance(){

        if(null !== static::$_instance){
            return static::$_instance;
        }
        static::$_instance = new static();
        return static::$_instance;
    }

    abstract protected function  actionBeforeInstantiate();

    } 
    ```

2.  之后，我创建了一个抽象注册表类：

    ```
    abstract class BaseRegistry extends Singleton
    {
        //...
    } 
    ```

3.  现在是会话注册的时候了。

    ```
    class BaseSessionRegistry extends BaseRegistry
    {

    //...

    protected function actionBeforeInstantiate()
    {
        session_start();
    }

    } 
    ```

4.  最后一步：

    ```
    class AppBaseSessionRegistryTwo extends BaseSessionRegistry { //... }

    class AppBaseSessionRegistry extends BaseSessionRegistry { //... } 
    ```

5.  测试

    ```
    $registry = AppBaseSessionRegistry::getInstance();
    $registry2 =AppBaseSessionRegistryTwo::getInstance();

    echo get_class($registry) . '|' . get_class($registry2) . '<br>'; 
    ```

输出：

```
AppBaseSessionRegistry|AppBaseSessionRegistry 
```

我的期望是：

```
AppBaseSessionRegistry|AppBaseSessionRegistryTwo 
```

为什么我会得到这样的结果？我怎样才能重新编写我的代码以获得我期望的结果？

**更新：**我在我的框架中使用它。用户将扩展我的`BaseSessionRegistry`课程并添加他们的东西。我想在我的框架类中解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:27:09.513

你需要这样做：

```
class AppBaseSessionRegistryTwo extends BaseSessionRegistry {
    protected static $_instance = NULL;
    // ...
}

class AppBaseSessionRegistry extends BaseSessionRegistry { 
    protected static $_instance = NULL;
    //... 
} 
```

如果您不单独声明静态属性，它们将共享其父级的相同静态属性。

***更新：*** 如果您不希望孩子声明静态属性，那么您可以将静态属性声明为父数组。

```
abstract class Singleton {

  protected static $_instances = array();

  // ...
  /**
   * Returns new or existing Singleton instance
   * @return Singleton
   */
  final public static function getInstance(){
    $class_name = get_called_class();
    if(isset(self::$_instances[$class_name])){
        return self::$_instances[$class_name];
    }
        return self::$_instances[$class_name] = new static();
    }

   abstract protected function  actionBeforeInstantiate();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:30:08.580

你的第一行：

```
$registry = AppBaseSessionRegistry::getInstance(); 
```

将填充`protected static $_instance`一个`AppBaseSessionRegistry`实例。在您的下一行`$registry2 =AppBaseSessionRegistryTwo::getInstance();`，受保护的静态 $_instance 已经有一个值，并且该实例将被返回。

一般来说，单例和静态是邪恶的。将它们结合在一起是可怕的。从事良好的 OO 编程业务，避免单例和静态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T10:44:16.333

```
 $registry = AppBaseSessionRegistry::getInstance(); 
```

上面的语句将 $_instance 设置为 AppBaseSessionRegistry 类的对象，
因为在 getInstance 方法中，我们正在检查它是否先前已设置，然后返回该值，因此为您的第二条语句

```
$registry2 =AppBaseSessionRegistryTwo::getInstance(); 
```

getInstance 将返回 AppBaseSessionRegistry 类的对象，即 $registry1 和 registry 2 引用同一个对象

# python - 如何重新排列 Pandas 列序列？

> ID：12329853
> 
> 赞同：28
> 
> 时间：2012-09-08T10:16:04.243
> 
> 标签：python, pandas

```
>>> df =DataFrame({'a':[1,2,3,4],'b':[2,4,6,8]})
>>> df['x']=df.a + df.b
>>> df['y']=df.a - df.b
>>> df
   a  b   x  y
0  1  2   3 -1
1  2  4   6 -2
2  3  6   9 -3
3  4  8  12 -4 
```

现在我想重新排列列序列，这使得 'x','y' 列成为第一列和第二列：

```
>>> df = df[['x','y','a','b']]
>>> df
    x  y  a  b
0   3 -1  1  2
1   6 -2  2  4
2   9 -3  3  6
3  12 -4  4  8 
```

但是，如果我有很长的 'a'、'b'、'c'、'd'......，并且我不想明确列出这些列。我怎样才能做到这一点 ？

或者 Pandas 是否提供了`set_column_sequence(dataframe,col_name, seq)`这样的功能，我可以这样做： `set_column_sequence(df,'x',0)`和`set_column_sequence(df,'y',1)`？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-05-19T15:32:06.533

你也可以这样做：

```
df = df[['x', 'y', 'a', 'b']] 
```

您可以通过以下方式获取列列表：

```
cols = list(df.columns.values) 
```

输出将产生如下内容：

```
['a', 'b', 'x', 'y'] 
```

...然后很容易在将其放入第一个函数之前手动重新排列

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-08T10:41:23.073

可能有一个优雅的内置函数（但我还没有找到）。你可以写一个：

```
# reorder columns
def set_column_sequence(dataframe, seq, front=True):
    '''Takes a dataframe and a subsequence of its columns,
       returns dataframe with seq as first columns if "front" is True,
       and seq as last columns if "front" is False.
    '''
    cols = seq[:] # copy so we don't mutate seq
    for x in dataframe.columns:
        if x not in cols:
            if front: #we want "seq" to be in the front
                #so append current column to the end of the list
                cols.append(x)
            else:
                #we want "seq" to be last, so insert this
                #column in the front of the new column list
                #"cols" we are building:
                cols.insert(0, x)
return dataframe[cols] 
```

*对于您的示例：`set_column_sequence(df, ['x','y'])`将返回所需的输出。*

如果您想要在DataFrame*末尾的 seq，只需传入“front=False”即可。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-20T14:53:03.193

您可以执行以下操作：

```
df =DataFrame({'a':[1,2,3,4],'b':[2,4,6,8]})

df['x']=df.a + df.b
df['y']=df.a - df.b 
```

以这种方式创建您想要的任何顺序的列标题：

```
column_titles = ['x','y','a','b']

df.reindex(columns=column_titles) 
```

这将为您提供所需的输出

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T11:49:35.467

```
def _col_seq_set(df, col_list, seq_list):
    ''' set dataframe 'df' col_list's sequence by seq_list '''
    col_not_in_col_list = [x for x in list(df.columns) if x not in col_list]
    for i in range(len(col_list)):
        col_not_in_col_list.insert(seq_list[i], col_list[i])

    return df[col_not_in_col_list]
DataFrame.col_seq_set = _col_seq_set 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T20:41:11.897

I would suggest you just write a function to do what you're saying probably using `drop` (to delete columns) and `insert` to insert columns at a position. There isn't an existing API function to do what you're describing.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-08T23:58:58.870

随意忽略此解决方案，因为从索引中减去列表不会保留原始索引的顺序，如果这很重要的话。

```
In [61]: df.reindex(columns=pd.Index(['x', 'y']).append(df.columns - ['x', 'y']))
Out[61]: 
    x  y  a  b
0   3 -1  1  2
1   6 -2  2  4
2   9 -3  3  6
3  12 -4  4  8 
```

# security - 即使密码错误，Symfony 2 也会保留 _target_path

> ID：12329855
> 
> 赞同：2
> 
> 时间：2012-09-08T10:16:15.833
> 
> 标签：security, symfony

使用 Symfony 2.10 进行身份验证时，如果我按照 sercurity.yml 中的配置发布登录检查请求：

```
form_login:
    login_path: /account/login
    check_path: /account/login_check 
```

_target_path 在表单上正确设置。

但是如果用户现在输入了错误的密码，_target_path 就会丢失，当用户现在输入正确的密码时，它将被重定向到默认位置，在我的例子中是首页。

我希望安全处理程序一直保留 _target_path，即使用户输入了错误的密码。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:22:18.967

我只找到一种方法：为 form_login 创建新的 failure_handler

添加你的security.yml：

```
form_login
    failure_handler: some_failure_handler_id 
```

在该服务中：

```
public function onAuthenticationFailure(Request $request, AuthenticationException $exception)
{
    ...

    $target_path = $request->request->get('_target_path');
    if ($target_path) {
        $request->getSession()->set('_security.login.target_path', $target_path);
    }

    ...
} 
```

在安全控制器中：

```
if ($back_url = $session->get('_security.login.target_path')) {
    $session->remove('_security.login.target_path');
} 
```

并以形式再次设置 target_path：

```
{% if back_url %}                               
    <input type="hidden" name="_target_path" value="{{ back_url }}" />
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T16:04:14.883

为确保您`_target_path`不会被删除 - 您可以在 twig 模板中将其设置为当前 uri：

```
<input type="hidden" value="{{ app.request.uri }}" name="_target_path" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T12:37:17.280

尝试设置`use_referer`为`true`[[见参考](http://symfony.com/doc/2.0/reference/configuration/security.html)]：

```
form_login:
    ...
    use_referer: true 
```

# html - html5视频仍然无法在android中播放

> ID：12329859
> 
> 赞同：0
> 
> 时间：2012-09-08T10:16:38.720
> 
> 标签：html, video

嗨我在这里启动一个网站：http: [//dxc-server.com/drbrownsbeta/](http://dxc-server.com/drbrownsbeta/)

但是视频（.mp4）无法在 Android 中播放。编解码器已经 h.264 mp4 宽度：1056，高度：400 这会成为问题吗？我正在使用 mediaelementjs.com 的播放器

我尝试使用手刹转换器，但也失败了...

该文件可以在这里下载：http://dxc-server.com/drbrownsbeta/images/videos/babybottle.mp4

知道该怎么做..

我试图在我的android中复制几个具有不同手刹配置文件的mp4 ..但没有任何工作

电影分辨率会成为问题吗？

更新：我尝试了videojs的播放器（http://www.dxc-server.com/drbrownsbeta/videojs.html），问题仍然存在，我确定这是视频问题而不是脚本问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T12:54:56.530

您的视频使用[H.264 High Profile](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Profiles)编码。一些最新的 Android 设备支持 High Profile，但如果您希望它在所有 Android 设备上运行，请坚持使用 Baseline Profile（请参阅[Android 核心媒体格式和编解码器支持](http://developer.android.com/guide/appendix/media-formats.html)）。

此外，您的视频`moov`末尾有原子。如果您希望视频在整个下载之前可以播放，您需要将`moov`（元数据）移动到`mdat`（视频数据）之前。您可以使用[`qt-faststart`](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide#OptionalInstallation)随附的程序[`ffmpeg`](https://ffmpeg.org/)、或[此 python 版本、或](https://github.com/danielgtaylor/qtfaststart)[此页面](http://multimedia.cx/eggs/improving-qt-faststart/)上引用的其他程序之一、或[`mp4box`](http://gpac.wp.mines-telecom.fr/mp4box/)或类似程序来执行此操作。

# extjs4 - Extjs4如何使用Ext应用在对象内有对象

> ID：12329863
> 
> 赞同：0
> 
> 时间：2012-09-08T10:17:36.383
> 
> 标签：extjs4

我在 Extjs4 中使用 Ext.apply(obj1,configobject)；让我们考虑这个示例：

```
 var obj1 = {},
   configobject = {
    a: 'value',
    d: 'somevalue',
    c: {
        c1 : 10,
        c2 : 5,
        c3 : 4
    }
};
        Ext.apply(obj1, configobject);
         obj1.c={c2 : 25}
          document.write(obj1.c.c1 + ', ' + obj1.c.c2 + ', ' + obj1.c.c3);
                                    Now the value of obj.c.c1 and obj.c.c3 will show undefined, can anyone tell me the reason 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T13:26:42.743

Ext.apply 应该可以正常工作。这是工作示例[http://jsfiddle.net/mWaZJ/](http://jsfiddle.net/mWaZJ/)

# javascript - Javascript：在另一个变量对象中替换变量值

> ID：12329868
> 
> 赞同：2
> 
> 时间：2012-09-08T10:18:29.000
> 
> 标签：javascript, javascript-events

我有一个滚动插件，它在初始化后将滚动量存储在特定的 ID 中。

我正在使用 jQuery 获取 div 的 id 并将其存储在可变出价中。

```
var bid = $(this).parent().parent().find(".video_s").attr('id'); 
```

在控制台 var bid 返回元素 ID。（这工作正常）

由于滚动量存储在特定于 DOM 元素 ID 的对象中

```
var bpos = bid.scrollData.scrollPosition[0][0]; 
```

**上面的代码不起作用**

变量 bid 包含元素的 id。

如果我输入`elementID.scrollData.scrollPosition[0][0]`控制台，它会完美地返回滚动量。其中 elementID 是水平容器的特定 ID。

请任何人告诉我什么是错的。

**解决方案 1：** `window[bid].scrollData.scrollPosition[0][0]`

**解决方案 2：** `eval(bid).scrollData.scrollPosition[0][0]`

**注意：永远不要使用 eval()。eval() 速度慢且存在安全风险**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:40:49.457

由于`bid`只是包含元素 ID 的字符串，但您需要一个包含实际 dom 元素的 jQuery 对象，因此代码应为：

```
var bpos = $('#'+bid).scrollData.scrollPosition[0][0]; 
```

`$('#'+bid)`根据bid中存储的ID获取元素。

在这个插件的情况下，元素存储在一个全局变量中（顺便说一句。非常糟糕的编程风格），所以你可以使用以下方法来访问它们：

```
window[bid].scrollData.scrollPosition[0][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:41:22.747

我认为你应该存储位置而不是 id

```
var bid = $(this).parent().parent().find(".video_s").attr('id');
var bpos = $('#'+bid).scrollData.scrollPosition[0][0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:41:23.933

做这个：

```
$('#'+bid).scrollData.scrollposition[0][0]; 
```

# java - 安装 Neo4j REST 服务器插件

> ID：12329870
> 
> 赞同：2
> 
> 时间：2012-09-08T10:18:53.153
> 
> 标签：java, rest, plugins, amazon-ec2, neo4j

我正在尝试基于[http://docs.neo4j.org/chunked/snapshot/server-plugins.html为 Neo4j REST 服务器创建示例服务器插件](http://docs.neo4j.org/chunked/snapshot/server-plugins.html)

我安装了 Amazon EC2 实例`Neo4j 1.7.2 CE Ubuntu 12.04 64-bit (ami-f3c8679a)`并且它正在工作 - 在尝试获取`MyEC2DNS:7474/db/data`服务器时我得到了正确的响应。

在日食

*   创建了新的 Java 项目
*   创建`libs`文件夹并从下载的文件中复制所有文件`1.7.2 Neo4j Community Edition`-`neo4j-community-1.7.2/lib`并将它们添加到构建路径
*   `package com.neo4j.server.plugins.example`使用内容创建了示例类

代码（来自[https://github.com/neo4j/community/blob/master/server-examples/src/main/java/org/neo4j/examples/server/plugins/GetAll.java](https://github.com/neo4j/community/blob/master/server-examples/src/main/java/org/neo4j/examples/server/plugins/GetAll.java)）

```
@Description("An extension to the Neo4j Server for getting all nodes or relationships")
public class GetAll extends ServerPlugin {

    @Name("get_all_nodes")
    @Description("Get all nodes from the Neo4j graph database")
    @PluginTarget( GraphDatabaseService.class)
    public Iterable<Node> getAllNodes(@Source GraphDatabaseService graphDb) {
        return GlobalGraphOperations.at(graphDb).getAllNodes();
    }

    @Description("Get all relationships from the Neo4j graph database")
    @PluginTarget(GraphDatabaseService.class)
    public Iterable<Relationship> getAllRelationships(@Source GraphDatabaseService graphDb) {
        return GlobalGraphOperations.at(graphDb).getAllRelationships();
    }
} 
```

*   `org.neo4j.server.plugins.ServerPlugin`在Eclipse`META-INF/services`中用单行创建文件`com.neo4j.server.plugins.example.GetAll`
*   定位在 Java 项目文件夹中并执行`jar -cvf get_all.jar *`- 我得到了 ~13Mb .jar 文件
*   将其复制到我的 Amazon EC2 实例中`/opt/neo4j/neo4j-community-1.7.2/plugins`
*   重新启动 Neo4j 服务器`sudo -u neo4j ./bin/neo4j restart`
*   我得到的是

回复

```
Stopping Neo4j server [1718].... done
./bin/neo4j: line 174: ulimit: open files: cannot modify limit: Operation not permitted
Starting Neo4j Server...WARNING: not chaning user
process [1891]... waiting for server to be ready...... OK 
```

当我 GET 时，扩展名仍然不可见`MyEC2DNS:7474/db/data`。

想法？我的猜测是，也许这个插件太大了（没有必要包含所有这些 .jar，但另一种方法是 - 将它们放在相对路径中，如何？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T16:25:14.653

已解决，所有步骤都与问题中的相同，除了

`positioned in Java project folder and executed jar -cvf get_all.jar * - I got ~13Mb .jar file`

应该是

`- in Eclipse go to File - Export - JAR - export everything except 'lib' folder`

然后它工作得很好，当然插件本身只有~100 kB。

# c# - 哪里最好存储临时反序列化数据？

> ID：12329872
> 
> 赞同：2
> 
> 时间：2012-09-08T10:19:09.457
> 
> 标签：c#, serialization, deserialization, binaryformatter

我可以避免向类添加额外的字段来存储仅用于反序列化/序列化的数据吗？

假设我有一些课程：

```
[Serializable]
class MyClass {
      [NonSerialized]
      NonSerializableDataType myField;

      SomeOtherDataType serializableTemporaryData;

      [OnSerializing]
      OnSerializing (StreamingContext context) {
          // build serializableTemporaryData from myField
      }

      [OnDeserialized]
      void OnDeserialized (StreamingContext context) {
         // build myField from serializableTemporaryData
      }
} 
```

有没有办法避免`serializableTemporaryData`在每个对象中都有字段`MyClass`？例如，我可以将其设为静态（可能通过更改我的 On... 方法）吗？

约束：我无法更改`NonSerializableDataType`.

示例：假设 myField 包含资源句柄。然后，在序列化时，我必须存储一些反序列化后如何获取资源的信息，但我不能存储句柄本身。如果我将句柄包装到另一个类中，那么我只是将问题转移到了包装类——然后我会为包装类提出同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T12:43:17.240

如果你需要控制序列化过程，你应该实现`ISerialization`接口。

```
[Serializable]
public class MyClass: ISerializable
{
    // As you are in control of serialization process now
    // [Serialized] and [NonSerialized] attributes are no longer required
    private NonSerializableDataType myField;

    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        // Create and populate your SomeOtherDataType local variable here, then push it into info variable
        // Or even better, dont create SomeOtherDataType, just put additional serialization data into info variable, for example:
        info.AddValue("URL", "http://this.way.com");
    }

    protected MyClass(SerializationInfo info, StreamingContext context)
    {
        // Dont forget to define constructor for deserialization purpose

        this.myField = new NonSerializableDataType(loadFromURL: (string)info.GetValue("URL", typeof(string)));
    }
} 
```

没有额外的类只用于序列化数据，没有字段污染。唯一的潜在问题是观察从此类派生的任何可序列化数据（`GetObjectData(...)`如果需要，覆盖）。

更多信息：[MSDN ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T13:09:57.117

有一个[序列化代理](http://msdn.microsoft.com/en-us/magazine/cc188950.aspx)的概念可以帮助您克服 . 的困难`SomeNonSerializableType`，因为它正是为此而设计的。但是，这要求您可以在创建格式化程序时配置序列化代理。否则，您将需要通过实现来自定义序列化过程`ISerializable`。

# c# - RequiredFieldsValidator 在数据列表中不起作用

> ID：12329874
> 
> 赞同：1
> 
> 时间：2012-09-08T10:19:51.073
> 
> 标签：c#, asp.net, datalist

在 datalist 中使用必填字段验证器时遇到问题，

我们有 4 个民意调查。在那个用户必须回答两个必需的民意调查。

我已经在我的数据列表中添加了所有四个民意调查，它显示正常，并且在单击提交按钮时，必填字段验证器正在工作并给出错误消息。一旦我们回答了所需的投票并再次单击提交按钮，所有其他不需要的投票将显示为所需的投票。

我的投票答案提交没问题，我想避免显示非必需投票的错误消息。

你能帮我解决这个问题吗

这是我的设计和代码：

 `````
 <div id="pollQuestion_div" Class="read-messages-poll" runat="server" >

       <asp:DataList ID="PollDataList" runat="server" onitemdatabound="PollDataList_ItemDataBound">

              <ItemTemplate>

                 <asp:HiddenField ID="PollIDReqHiddenField" Value='<%# Eval("PollID") %>' runat="server" Visible="false" />

                 <asp:Label ID="lblReqQuestionNumber" runat="server" Text='<%# Eval("No of PollQuestion") %>' Font-Bold="true"></asp:Label><br />
                <asp:Label ID="lblRequiredPollQusetion" runat="server" Text='<%# Eval("PollQuestions") %>' Font-Bold="true"></asp:Label>
                <asp:RequiredFieldValidator ID="RequiredFieldValidatorReqPoll" runat="server" ControlToValidate="rdblstRequiredPollOptions"  Display="Dynamic" ErrorMessage="*" ForeColor="Red" ></asp:RequiredFieldValidator>

                <asp:HiddenField ID="HiddenFieldPollOption" runat="server" Value='<%# Eval("PollOptions") %>' Visible="false" />
                <asp:HiddenField ID="HiddenFieldPollType" runat="server" Value='<%# Eval("PollType") %>' Visible="false"/>

                <asp:RadioButtonList ID="rdblstRequiredPollOptions" runat="server" > </asp:RadioButtonList>
                <asp:RadioButtonList ID="rdblstNonRequiredPollOptions" runat="server" > </asp:RadioButtonList>

                <asp:CheckBoxList ID="CheckBoxListMultiple" runat="server" RepeatDirection="Vertical"></asp:CheckBoxList>                

              </ItemTemplate>

              <FooterTemplate> 
                <asp:Button ID="btnSubmitPoll" runat="server" Text="Submit" CssClass="custom-button" OnClick="btnSubmitPoll_click" />   
              </FooterTemplate>

      </asp:DataList>   
    </div> 
```

**Datalist Item bound Code:**` 

```
 protected void PollDataList_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        //Debugger.Break();
        try
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {
                System.Data.DataRowView drv = (System.Data.DataRowView) e.Item.DataItem);

                string strPollID = drv.Row["PollID"].ToString();
                string pollOptions = drv.Row["PollOptions"].ToString();
                string strPollType = drv.Row["PollType"].ToString();
                string strPollRequiredorNot = drv.Row["RequiredPoll"].ToString();

                if (strPollType == "RadioButtonList")
                {
                    if (strPollRequiredorNot == "Required")
                    {
                        RadioButtonList rbl = (RadioButtonList)e.Item.FindControl("rdblstRequiredPollOptions");

                        foreach (string opt in pollOptions.Split('}'))
                        {
                            rbl.Items.Add(opt.ToString());
                        }
                        //RequiredFieldValidator rfv = new RequiredFieldValidator();
                        //rfv.ID = "reqfield";
                        //rfv.ControlToValidate = rbl.ID;
                        //rfv.ErrorMessage = "*";

                        RequiredFieldValidator rfvRadioButtonList = (RequiredFieldValidator)e.Item.FindControl("RequiredFieldValidatorReqPoll");
                        rfvRadioButtonList.ControlToValidate = rbl.ID;

                    }
                    else
                    {
                        RadioButtonList rbl = (RadioButtonList)e.Item.FindControl("rdblstNonRequiredPollOptions");

                        foreach (string opt in pollOptions.Split('}'))
                        {
                            rbl.Items.Add(opt.ToString());
                        }
                    }

                }

                else if (strPollType == "CheckBoxList")
                {
                    CheckBoxList chkList = (CheckBoxList)e.Item.FindControl("CheckBoxListMultiple");

                    foreach (string opt in pollOptions.Split('}'))
                    {
                        chkList.Items.Add(opt.ToString());
                        chkList.RepeatDirection = RepeatDirection.Vertical;
                    }
                    if (strPollRequiredorNot == "Required")
                    {
                        //CustomValidators.RequiredFieldValidatorForCheckBoxLists rfvCheckBoxList = (CustomValidators.RequiredFieldValidatorForCheckBoxLists)e.Item.FindControl("RequiredFieldValidatorForCheckBoxLists1");
                        //rfvCheckBoxList.ControlToValidate = chkList.ID;

                    }
                }

            }
        }
        catch (Exception ex)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:38:27.167

在您的 PollDataList_ItemDataBound 中，您迭代您的 items ，并使用 condition 设置`Enabled`验证器的属性

//禁用你的验证器

```
var validator = (RequiredFieldValidator )e.Item.FindControl("RequiredFieldValidatorReqPoll");
validator.Enabled=false; 
```

//使能够

```
var validator = (RequiredFieldValidator )e.Item.FindControl("RequiredFieldValidatorReqPoll");
validator.Enabled=true; 
````

# linux - 使用 xdg-open 打开别名是否安全

> ID：12329876
> 
> 赞同：10
> 
> 时间：2012-09-08T10:20:10.923
> 
> 标签：linux, command-line, command-line-interface

我想设置一个别名来`alias open=xdg-open`替换普通的 linux`open`命令，该命令本身就是`openvt`.

我使用 bash shell 运行 debian wheezy 安装。如果我这样做，有人会看到可能出现的问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T13:09:13.613

是的。一旦你给它起别名，它只对你的用户有效。

您还可以在其中添加它`~/.bashrc`，因此它仅适用于您的用户并且仅适用于当前的 shell 会话（每次启动新会话时都会再次为自己设置别名）。

在某些发行版中，`.bashrc`加载`.bash_aliases`为每个会话调用的文件。你也可以在那里添加你的别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T10:35:55.803

`alias`只是原始文本的文本替换（如 C 中的预处理器）。

它仅在创建它的当前 shell 中有效，除非您将其添加到`.rc`file 或`.profile`. 退出后，别名不再存在，因此我不明白为什么它会导致任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-04T07:37:52.123

在某些系统上，`open`命令实际上是指`run-mailcap`命令。默认情况下， running`open`与 running 相同`run-mailcap`。通常，`open`使用 Bash 别名覆盖是安全的，因为这只会影响当前的 shell 会话，而不影响该会话中的 Bash 脚本。把它放在你的`.bashrc`：

```
alias open='xdg-open' 
```

Debian 11 和相关发行版（例如 Ubuntu 21.10 或更高版本）使用`update-alternatives`系统来管理`open`命令。因此，如果您愿意，可以在`open`系统范围内配置命令以引用`xdg-open`，如下所示：

```
sudo update-alternatives --install /usr/bin/open open /usr/bin/xdg-open 50
sudo update-alternatives --config open 
```

# ruby-on-rails - Heroku：“模型名称”不是一个类

> ID：12329877
> 
> 赞同：0
> 
> 时间：2012-09-08T10:20:22.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我开发了一个 Rails 应用程序，现在正在部署到 heroku。在应用程序中，我有一个“查找”模型和关联的控制器。但是，“查找”不是数据库表（它不是架构的一部分。）。我制作了“查找”模型，以便编写类方法等等。我认为这就是我收到此错误的原因：

```
2012-09-08T10:12:09+00:00 app[web.1]: => Booting Thin
2012-09-08T10:12:09+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:5783
2012-09-08T10:12:09+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-08T10:12:09+00:00 app[web.1]: => Call with -d to detach
2012-09-08T10:12:09+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-09-08T10:12:15+00:00 app[web.1]: /app/app/models/find.rb:1:in `<top (required)>': Find is not a class (TypeError)
2012-09-08T10:12:15+00:00 app[web.1]: Exiting 
```

虽然我总是可以将我的“查找”方法移动到查找控制器中，但我宁愿保持原样。有谁知道我该如何解决这个问题？

我的“find.rb”文件：

```
class Find < ActiveRecord::Base

    def self.someMethod()
        ...
    end

    def self.someOtherMethod()
        ...
    end

end 
```

请注意，此设置在本地运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:47:29.847

您可以检查[Active Attr](https://github.com/cgriego/active_attr)是否有效。还有一个railscast在那里：

[http://railscasts.com/episodes/326-activeattr](http://railscasts.com/episodes/326-activeattr)

# java - java:Hibernate 一对多关联

> ID：12329878
> 
> 赞同：1
> 
> 时间：2012-09-08T10:20:43.177
> 
> 标签：java

我遇到了一些休眠框架的问题。

假设我有一个人，一个人有多个地址。下面是我的代码，

```
/* Person entity*/
@Entity
@Table(name="person")
public class Person implements Serializable{

    private static final long serialVersionUID = 7635130386543844954L;

    @Id
    @Column(name="person_id")
    private Integer personId;

    @Column(name="name")
    private String name;

    @Column(name="ic_no")
    private String icNo;

    @OneToMany(fetch=FetchType.EAGER)
    @JoinTable(name="address",
joinColumns{@JoinColumn(name="name")},inverseJoinColumns={@JoinColumn(name="address_id")})
    List<Address> listAddress = new ArrayList<Address>();

    public Integer getPersonId() {
        return personId;
    }

    public void setPersonId(Integer personId) {
        this.personId = personId;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getIcNo() {
        return icNo;
    }

    public void setIcNo(String icNo) {
        this.icNo = icNo;
    }

}

/* Address entity*/
@Entity
@Table(name="address")
public class Address implements Serializable{

    private static final long serialVersionUID = 1371825219482824135L;

    @Id
    @Column(name="address_id")
    private Integer addressId;

    @Column(name="address")
    private String address;

    @Column(name="name")
    private String name;

    public Integer getAddressId() {
        return addressId;
    }

    public void setAddressId(Integer addressId) {
        this.addressId = addressId;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

/* DAO code*/
List<ProductDetails>list = hibernateTemplate.find("from Person where Name=?",new Object[]{name}); 
```

当我尝试执行程序时，我得到如下异常：

```
Exception in thread "main" org.springframework.dao.InvalidDataAccessResourceUsageException: could not initialize a collection: [com.inventory.inventory.vo.Person.listAddress#1]; nested exception is org.hibernate.exception.SQLGrammarException: could not initialize a collection: [com.inventory.inventory.vo.Person.listAddress#1]
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:630)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:921)
    at com.inventory.inventory.dao.impl.ProductsDAOImpl.getProductsByCode(ProductsDAOImpl.java:28)
    at Main.main(Main.java:14)
Caused by: org.hibernate.exception.SQLGrammarException: could not initialize a collection: [com.inventory.inventory.vo.Person.listAddress#1]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2069)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:628)
    at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)
    at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1853)
    at org.hibernate.collection.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:476)
    at org.hibernate.engine.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:899)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:275)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)
    at org.hibernate.loader.Loader.list(Loader.java:2167)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:448)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1258)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:930)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419)
    ... 4 more

<b>Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: character varying = integer</b>

  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.
  Position: 305
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:273)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1849)
    at org.hibernate.loader.Loader.doQuery(Loader.java:718)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2062)
    ... 21 more 
```

唯一不同的是，我使用带有字符数据类型的列“名称”来连接表，而反向连接是使用地址 id，它是整数数据类型。无论如何要用不同的数据类型映射视图对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:26:58.090

试试这个

将 Person 类修改为

```
@OneToMany(cascade=mappedBy = "person", fetch = FetchType.EAGER)
private List<Address> listAddress = new ArrayList<Address>(); 
```

修改地址类为

```
@JoinColumn(name = "person_id", referencedColumnName = "person_id")
@ManyToOne
private Person person; 
```

# java - 如何在每个FFT计算中检索不同的原始频率并且在java中没有任何频率泄漏

> ID：12329880
> 
> 赞同：1
> 
> 时间：2012-09-08T10:21:10.657
> 
> 标签：java, audio, fft, frequency, javasound

我正在为诸如从麦克风记录的音频数据中恢复原始频率之类的问题而战。

对不起我的英语不好...

让我更清楚地解释这个问题。我使用以下代码生成了一些特定的频率：

```
void genTone() {
    numSamples = (int)(0.2 * sampleRate);   //duration * sampleRate;
    sample = new double[numSamples];
    generatedSnd = new byte[2 * numSamples];

    // fill out the array
    for (int i = 0; i < numSamples; ++i) {
        sample[i] = Math.sin(2 * Math.PI * i / (sampleRate/freqOfTone));
    }

    // convert to 16 bit pcm sound array
    // assumes the sample buffer is normalised.
    int idx = 0;
    for (final double dVal : sample) {
        // scale to maximum amplitude
        final short val = (short) ((dVal * 32767));
        // in 16 bit wav PCM, first byte is the low order byte
        generatedSnd[idx++] = (byte) (val & 0x00ff);
        generatedSnd[idx++] = (byte) ((val & 0xff00) >>> 8);
    }
} 
```

我已经使用以下代码 II 录制了声音：

```
private void recordInBackground() {
    int read = 0;
    while (isRecording) {
        short data[] = new short[bufferSize];   // bufferSize = 4096

        read = audioRecorder.read(data, 0, bufferSize);
        if (read != AudioRecord.ERROR_INVALID_OPERATION) {
            try {
                float tempHammingRes[] = null;
                hamming(bufferSize);

                Complex[] complexs = new Complex[bufferSize];
                Complex[] results = new Complex[bufferSize];
                for (int i = 0; i < bufferSize; ++i) {
                    data[i] /= 32767; 
                    tempHammingRes[i] = tempHammingRes[i] * data[i];
                    complexs[i]= new Complex(tempHammingRes[i], 0);
                }

                results = FFT.fft(complexs);

                double highScore = 0.0;
                int freq = 1;

                for (int line = 1; line < bufferSize; ++line) {
                    double magnitude = Math.log(results[line].abs() + 1) / Math.log(10.0)*20.0;
                    if (magnitude > highScore) {
                        highScore = magnitude;
                        freq = line;
                    }
                }

                double currentFrequence = ComputeFrequency(freq, bufferSize);

                Log.d(TAG, "highScore = " + highScore + " freq = " + currentFrequence);

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

} 
```

现在，我有一个问题，在代码块 II 中，在连续 FFT 计算间隔中会获得相同的频率。例如，代码块 II 输出了一些日志：

highScore = 151.77662972416104 freq = 7999.5849609375 // 第一个 8000

highScore = 146.33073029829455 freq = 7999.5849609375 // 秒 8000

highScore = 146.44411729898255 频率 = 9000.87890625

highScore = 144.43481176938155 频率 = 9000.87890625

highScore = 142.78046692784702 频率 = 10002.1728515625

highScore = 141.91874938214298 频率 = 10002.1728515625

highScore = 136.47269911015098 频率 = 11003.466796875

highScore = 136.6873278405228 频率 = 11003.466796875

我只产生了一个 8khz，但我得到了两个声音频率。我还减少了输出音调的持续时间或增加了录音机的输入缓冲区大小。不幸的是，这对我想做的事没有帮助..

有谁知道我是错的还是fft的输出本质上是这样的？

非常感谢您的任何回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:33:24.690

我在这里看到了一些潜在的问题。我可能误读了您的代码，但我会提到这些事情，因为它们看起来像问题：

1.  尽管有窗口化，FFT 总是有“旁瓣”。您选择了可能是理想的汉明窗，但您*可能*会看到旁瓣。你不应该这样，但是如果 genTone 和 recordInBackground 之间发生了某些事情（例如，你正在通过扬声器播放声音并重新录制它），这*可能会*产生足够的噪音和失真，偶尔会使旁瓣数据与主要数据一样突出数据。

2.  看起来您一直在阅读 FFT 结果。只有 FFT 的前半部分会包含相关结果，后半部分是前半部分的镜像。由于轻微的数值错误，您可能会发现后半部分的结果大于前半部分。此问题还表明您可能计算错误的频率。我在这里介绍了这个（还有更多！）：[使用 fft aka pitch 进行频率检测](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)

3.  您对输出的数据进行位反转，但不输入。也许这很好，这取决于您在做什么，但是从这么多的代码来看它是错误的。FFT 可以“看穿”这一点，但您实际上已经产生了**大量**的噪音。

我还注意到您正在尝试计算 FFT 结果绝对值的对数。这只会使您的计算花费更长的时间。出于您的目的，magnitude = results[line].abs() 很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:35:34.687

AudioRecorder 与您的输入信号不同步。因此，您从中获得的数据块很可能会将您的音调分成两部分。这就是为什么您会获得两个具有相同频率的连续日志。

# android - 为什么我的 ListView 没有动画？

> ID：12329884
> 
> 赞同：0
> 
> 时间：2012-09-08T10:21:27.990
> 
> 标签：android, android-animation

伙计们，我制作了一个自定义列表视图，列表视图有三个文本字段。我希望以下事情起作用，当用户从他刚刚填充文本视图的活动中按下后退按钮时，他会返回到包含自定义列表视图的活动。刚刚创建的最近条目已经存在于那里。每次用户进入列表视图活动时，我希望条目从右侧滑入。这是列表视图 xml 的代码：

* * *

```
 <LinearLayout
    android:id="@+id/listHolder"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:background="#ffffff" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>
    </LinearLayout> 
```

这里的列表视图实际上并没有利用完整的空间，因为 100dp 的屏幕尺寸被其他一些小部件占用（但这在这里并不重要）。我正在使用的动画是这样的：

* * *

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <scale
    android:duration="1500"
    android:fillAfter="false"
    android:fromXScale="480dp"
    android:fromYScale="0dp"
    android:interpolator="@android:anim/overshoot_interpolator"
    android:pivotX="60"
    android:pivotY="10"
    android:toXScale="100dp"
    android:toYScale="0dp" />

    </set> 
```

动画 xml 有什么问题？我是否为 x 和 y 值设置了错误的参数？我得到的是列表视图在用户进入该活动一秒钟或更晚之后出现。我的意思是没有从右到左的过渡。知道为什么会这样。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:10:01.397

你甚至还没有将你的动画应用到列表视图，那么你怎么能显示动画！] 你应该`%`输入`pivotY`并`pivotX` 使用这个代码：

将此另存为`layout_controller.xml`文件`anim`夹。

```
<?xml version="1.0" encoding="utf-8"?>
<layoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
 android:animation="@anim/rotation"
 android:animationOrder="normal"
 android:delay="10%" /> 
```

`anim`在文件夹中将其另存为rotation.xml

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:duration="500"
android:fromDegrees="0.0"
android:interpolator="@android:anim/accelerate_interpolator"
android:pivotX="50%"
android:pivotY="50%"
android:toDegrees="360" /> 
```

现在将此代码放入您的 listView 布局文件中：

```
<LinearLayout
android:id="@+id/listHolder"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:background="#ffffff" >

<ListView
    android:id="@+id/mylist"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layoutAnimation="@anim/list_layout_controller" >
</ListView>
</LinearLayout> 
```

我的意思是我已经在你的布局中添加了这一行，现在你可以看到它有效..

```
android:layoutAnimation="@anim/list_layout_controller" 
```

# ruby-on-rails - 使用 auto_capture 的 WePay 延迟付款（WePay 支付网关）

> ID：12329886
> 
> 赞同：1
> 
> 时间：2012-09-08T10:21:31.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, payment-gateway

我正在开发一个将 wepay 的延迟付款功能集成到其中的应用程序。在 stage.wepay.com 上访问 /checkout/create api 调用时，它会进入支付页面，最终响应总是将状态显示为**已授权**。我已将 auto_complete 参数作为 false 传递，并且**保留**了预期的返回状态，但 wepay 始终返回**授权**状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:55:21.557

似乎 wepay 总是以授权状态发送响应。只有当我们提出第二个请求时，它才会作为保留返回。这是我从 wepay 团队得到的回复：

> 工单 #149740：stage.wepay.com 上的延迟付款问题
> 
> 您的请求 (#149740) 已更新。要查看、评论和继续讨论，请点击以下链接：http: [//support.wepay.com/tickets/149740](http://support.wepay.com/tickets/149740)
> 
> Chris Chen，9 月 8 日上午 9:50（太平洋夏令时间）：
> 
> 你好，
> 
> 这实际上就是它应该如何工作的。授权将变为保留。授权后很少会发生故障，除了欺诈之类的事情。这是交易的非常非常小的一部分。
> 
> 我们建议您将授权视为成功。
> 
> 谢谢。
> 
> 克里斯

# javascript - JQuery each：单击后暂停和继续迭代

> ID：12329889
> 
> 赞同：0
> 
> 时间：2012-09-08T10:22:06.430
> 
> 标签：javascript, jquery

```
$.getJSON('http://example.com', function(data) {

  $.each(data.songs, function(index, song) { 

    //Paused & waiting for a click

    $("#next").click(function() {
         alert("Processing the next object...");
    });

 }); 
```

我希望 JQuery 仅在用户单击 #next 元素后分析下一​​个对象。

我不需要“超时”，只需用户操作即可转到下一个对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:28:24.517

可能不是每个循环。您最好让您的点击功能捕获点击并根据您设置的指针处理项目列表中的项目。所以是这样的：

```
var jsonData = "";
var pointer = 0;
$.getJSON('http://example.com', function(data) {
    jsonData = data;
};
$("#next").click(function() {
    //process item described by pointer
    pointer = pointer + 1;
}); 
```

# asp.net - 为什么我使用 c# 在 asp.net 中收到来自 Paypal 的无效响应？

> ID：12329891
> 
> 赞同：0
> 
> 时间：2012-09-08T10:22:24.037
> 
> 标签：asp.net, paypal, paypal-sandbox

我有一个用于试用的贝宝沙箱帐户一个 aspx 页面：sampleprocess.aspx

在 Merchant A/c 中，页面 在付款完成后被重定向到[http://www.Hostsite.com/member/samplepaypal.aspx 。](http://www.Hostsite.com/member/samplepaypal.aspx)

在 samplepaypal.aspx.cs 页面加载：

```
protected void Page_Load(object sender, EventArgs e)
    {
        //string tx = Request.QueryString["tx"];
        //Post back to either sandbox or live
        string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
        string strLive = "https://www.paypal.com/cgi-bin/webscr";
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

        //Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
        string strRequest = Encoding.ASCII.GetString(param);
        strRequest += "&cmd=_notify-validate";

        req.ContentLength = strRequest.Length;

        //for proxy
        //WebProxy proxy = new WebProxy(new Uri("http://url:port#"));
        //req.Proxy = proxy;

        //Send the request to PayPal and get the response
        StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
        streamOut.Write(strRequest);
        streamOut.Close();
        StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
        string strResponse = streamIn.ReadToEnd();
        streamIn.Close();

        if (strResponse == "VERIFIED")
        {
            lblmsg.Text = "Verified";
            //check the payment_status is Completed
            //check that txn_id has not been previously processed
            //check that receiver_email is your Primary PayPal email
            //check that payment_amount/payment_currency are correct
            //process payment
        }
        else if (strResponse == "INVALID")
        {
            lblmsg.Text = "Not Verified";
            //log for manual investigation
        }
        else
        {
            lblmsg.Text = "IPN Logged";
            //log response/ipn data for manual investigation
        }
    } 
```

在这里我得到结果“无效”！有什么问题请纠正错误。从贝宝发回[http://www.Hostsite.com/member/samplepaypal.aspx](http://www.Hostsite.com/member/samplepaypal.aspx)页面后，它显示：

```
http://111.111.111.111/member/samplepaypal.aspx?tx=8L903541KW5338647&st=Pending&amt=100.00&cc=USD&**cm=&item_number=&**sig=QRmNHFf5%2fAH3io9Tn2kj%2fuicu3gpAuMew701OvazfkCdN3jSR5tmFoX3OUPbQlZGoj2PY7vI%2fP1dH84g1CEzSG9NhjnLbjuAFFHyENVsBjKb1dVvK1nZe3FJfElZt11qPfggMOPu8%2bUhDwHekJvNAcXkjLQV01vAjN1y%2fZs1rJw%3d 
```

这些 cm 和 item_number 是什么是空白的！如何获得“有效”响应。

帮助表示赞赏..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:43:00.923

使用回发进行验证：

如果您无法使用共享密钥进行通知验证，则可以改为使用回发到 PayPal。您的回发必须包含与您在通过 PayPal 发布到您的服务器的 IPN 中收到的完全相同的变量和值，并且它们的顺序必须相同。

构建你的回发

使用这些指南来构建您对 PayPal 的回发：。

1.  您的回发必须发送到[https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)。注意：您可以在没有 SSL 的情况下实施 IPN，包括用于验证的回发，但 PayPal 建议不要这样做。

2.  您的回发必须包含值为 _notify-validate 的变量 cmd：cmd=_notify-validate

3.  您的回发必须包含与您在 IPN 中从 PayPal 收到的完全相同的变量和值，并且它们的顺序必须相同。

处理 PayPal 对您的回发的响应 PayPal 在响应正文中使用一个词来响应您的回发：已验证或无效。当您收到 VERIFIED 回发响应时，请对 IPN 中的数据执行以下检查：

1.  检查 payment_status 是否已完成。

2.  如果 payment_status 为 Completed，请对照您处理的上一个 PayPal 交易检查 txn_id，以确保它不是重复的。

3.  检查 receiver_email 是在您的 PayPal 帐户中注册的电子邮件地址。

4.  检查在 mc_gross 中携带的价格和在 mc_currency 中携带的货币对于 item_name 或 item_number 中携带的项目是否正确。完成上述检查后，通知验证完成。您可以使用提供的信息更新您的数据库，并且可以启动其他适当的自动化后端处理。

# java - 当我们执行 javap classname 时，私有方法不存在

> ID：12329892
> 
> 赞同：13
> 
> 时间：2012-09-08T10:22:40.790
> 
> 标签：java, decompiling, javap

`javap classname`为什么在编译该 java 文件后在控制台上使用时没有私有方法？

```
class A
{
    private void one(){}
    public void two(){}
    protected void three(){}
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-08T10:27:48.313

默认不显示私有方法，需要使用：

```
javap -private A 
```

# c# - 从 C# 中的 ResponseUri 中检索 Id

> ID：12329894
> 
> 赞同：4
> 
> 时间：2012-09-08T10:23:07.317
> 
> 标签：c#, httpwebrequest, httpwebresponse

我想从 ResponseUri 中检索 id。

我有以下网址

[http://site5.way2sms.com/Main.action;jsessionid=77C20044847CD2C97BA89217A4D040A8.w803?id=77C20044847CD2C97BA89217A4D040A8.w803](http://site5.way2sms.com/Main.action;jsessionid=77C20044847CD2C97BA89217A4D040A8.w803?id=77C20044847CD2C97BA89217A4D040A8.w803)

我想从上面的字符串中检索 id。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:26:03.290

```
Uri uUri = new Uri("http://site5.way2sms.com/Main.action;jsessionid=77C20044847CD2C97BA89217A4D040A8.w803?id=77C20044847CD2C97BA89217A4D040A8.w803");
string strId = System.Web.HttpUtility.ParseQueryString(uUri.Query).Get("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:54:36.177

```
string iduri = System.Web.HttpUtility.ParseQueryString(res.ResponseUri.Query).Get("id"); 
```

用这个

# ios - 在标签栏控制器内设置导航栏的标题

> ID：12329895
> 
> 赞同：16
> 
> 时间：2012-09-08T10:23:40.670
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, titlebar

那么在我的应用程序中，我有一个带有表格视图的导航控制器，当按下按钮时，一个选项卡控制器会打开。在其第一个选项卡中，我希望设置导航栏的标题。

这是我的故事板的图像，只是为了确保我们彼此不了解。

![在此处输入图像描述](../Images/501b33b7382d12cc73cdab3783ab81df.png)

这是我应该工作的代码。我在尝试打开单个视图而不是选项卡控制器时使用了此代码，并且它工作正常。所以我想我必须改变一些东西。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{       
        SkiCenter *myDetViewCont = [[SkiCenter alloc] initWithNibName:@"SkiCenter" bundle:[NSBundle mainBundle]];
        myDetViewCont.ski_center = [centers objectAtIndex:indexPath.row];
        UIStoryboard * storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        [[self navigationController] pushViewController:[storyBoard instantiateViewControllerWithIdentifier:@"SkiCenterIds"] animated:YES];
        //[self.navigationController pushViewController:myDetViewCont animated:YES]; // "Pushing the controller on the screen"
        [myDetViewCont release]; // releasing controller from the memory
        myDetViewCont = nil;        
    } 
```

`Skicenter`我的第一个选项卡的类名称在哪里，并且`SkiCenterIds`是我的选项卡控制器在情节提要中的标识符。

`Skicenter`.m 中的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.navigationItem.title = ski_center;        
} 
```

但我没有看到任何标题。那么我做错了什么？我也试过这个：

```
[self.navigationController setTitle:@"Live"]; 
```

或者

```
self.title=ski_center; 
```

ski_center 具有价值，因为它在 NSLog 中正常打印出来。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-11-17T10:33:14.097

Simple!

```
[self.tabBarController setTitle:@"Title"]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-02T10:20:47.400

添加到 ghostrider 的解决方案，在 mytabbarcontroller.m self.navigationItem.title 对我不起作用。我有一个 NavigationController，其详细视图是 TabController，这就是我在第一个选项卡实现中所拥有的

```
self.navigationController.visibleViewController.title = ski_center; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-06-25T09:21:19.970

在**Swift 4**及更高版本中

```
self.tabBarController?.title = "Title" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-08T10:42:35.210

好吧，你知道，把 a 放在 a`UITabBarController`里面是非常糟糕的做法`UINavigationController`——Apple 建议你只应该把 a`UINavigationController`放在里面，`UITabBarController`而不是反过来。无论哪种方式，您都应该能够`UITabBarController`像这样更改标题；

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [[self.navigationController.viewControllers objectAtIndex:0] setTitle:ski_center];        
} 
```

那应该行得通。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-12-27T06:32:08.017

在迅速 3

```
self.tabBarController?.navigationItem.title = "Your title goes here" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-07-10T16:41:28.753

我遇到了这个并找到了一个更简单的解决方案。一个新的解决方案是从登陆视图控制器更改导航栏标题，如下所示

```
override func viewDidLoad() {
    super.viewDidLoad()
    navigationController?.navigationBar.topItem?.title = "title";
 } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-12T07:00:10.547

```
 UITabBarController *tabController = (UITabBarController *)self.parentViewController;

 tabController.navigationItem.title = @"ABC"; 
```

这对我有用

来自互联网上的一些研发

***您必须将 navigationItem 向上传递。UINavigationController 显示属于其 topViewController 的导航项，即 UITabBarController。UITabBarController 在其选项卡中显示 navigationItem 标题。所以你需要做的是确保tabBarController的navigationItem是selectedViewController的navigationItem***

回顾一下：

> UINavigationController 标题 = topViewController.navigationItem.title
> 
> UITabBarController tabTitle = selectedViewController.navigationItem.title
> 
> UIViewController 标题 = navigationItem.title

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-09T16:19:14.963

基本上我不知道你是否没有注意到，但我让它像这样工作：

我为标签栏控制器分配了一个新类。

我做了以下事情：

将其添加到**应用程序委托.h**

```
@property (nonatomic,retain) NSString *center; 
```

将其添加到**mainmap.m**

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    delegate.center=[centers objectAtIndex:indexPath.row]; 
```

在**mytabbarcontroller.m中**

```
 AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    ski_center=delegate.center;

    self.navigationItem.title = ski_center; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-08T11:12:03.437

尝试这个：

```
[self.navigationController setTitle:@"Live"]; 
```

# .net - CommandBars.OnUpdate 停止被触发

> ID：12329896
> 
> 赞同：2
> 
> 时间：2012-09-08T10:23:43.213
> 
> 标签：.net, events, vsto, powerpoint

在我的 PowerPoint 2010 Addin 中，我订阅了`CommandBars.OnUpdate`事件以注册形状和类似事件的移动：

```
 ppt = Globals.ThisAddIn.Application;
 ppt.CommandBars.OnUpdate += CommandBars_OnUpdate; 
```

这在一段时间内效果很好。但是，最终该事件停止被触发。好吧，至少注册的事件处理程序没有被调用。我无法弄清楚，是什么导致了这种行为。这似乎有点不确定。不会引发将出现在调试输出中的异常。看来，这会在一段时间后发生，而不是由用户操作引起的。

我认为，这将是由于`CommandBars`对象的变化。所以我添加了一个计时器，用于检查这些更改。但是，与最后一个对象的比较`==`和`.Equals()`比较都会导致每个刻度都发生可识别的变化，这是不太可能的。

我还尝试定期（每 1 分钟）刷新事件处理程序，但这也不起作用：

```
ppt.CommandBars.OnUpdate -= CommandBars_OnUpdate;
ppt.CommandBars.OnUpdate += CommandBars_OnUpdate; 
```

事件真的会在一段时间后停止吗？有没有其他方法来检测对象移动、调整大小、删除等？

* * *

## 更新

与此同时，我重组了插件。我现在能够重现该问题。方法如下：

在插件的功能区中，我有一个按钮，它调用`CreateRightEyeCopy()`ViewModel 上的方法。在这个方法`GetNextPairId()`中，ViewModel 的另一个方法被调用。这个电话似乎有问题。我将其更改`GetNextPairId()`为立即返回 0 以确保方法是问题所在。

这是该`return 0`行中生成的堆栈跟踪：

```
ViewModel.GetNextPairId()
[External Code]
ViewModel.CreateRightEyeCopy()
Button's event handler 
```

我想知道，为什么我的两个函数之间有外部代码。此代码可以导致`OnUpdate`事件停止吗？

如果有人感兴趣，这里是两个函数的代码：

`CreateRightEyeCopy()`：

```
try
{
    var sel = ppt.ActiveWindow.Selection;
    if (sel.Type == PpSelectionType.ppSelectionShapes)
    {
        foreach (Shape s in sel.ShapeRange)
        {
            var pair = FindStereoPair(s);
            //Only add a new pair, if shape is not in a pair already
            if (pair == null)
            {
                // ** return; **
                int id = GetNextPairId(s.Parent);
                return; //for debugging purposes
            }
        }
    }
}
catch (Exception x)
{
    Debug.WriteLine("Exception occured during creation of stereo pair: " + x.Message);
} 
```

`GetNextPairId()`：

```
return 0; 
```

如果我在调用之前插入一个 return 语句`GetNextPairId()`，则`OnUpdate`继续。

我也尝试`CreateRightEyeCopy()`异步调用，但这并没有改变任何东西。

对这个问题有进一步的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:22:53.690

不是一个真正的答案，但[MSDN 说](http://msdn.microsoft.com/en-us/library/office/ff861536.aspx)：“强烈建议将此事件主要用于检查自定义命令栏是否已由 COM 插件添加或删除。”

您可能应该选择不同的方法来跟踪其他事件。

事后诸葛亮，您确定要捕获所有异常（UnhandledException、ThreadException）吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-23T13:44:33.950

我知道这是一个非常古老的问题，但我遇到了类似的问题。在 Outlook 中，我丢失了 CommandBars.OnUpdate 的事件。它永远不会在我第一次打开会议时运行，但总是在我打开约会时运行。总体上非常随机的行为。

该修复程序在以下帖子的片段中进行了描述： [https ://social.msdn.microsoft.com/Forums/en-US/c6472472-2ae4-496a-b553-a931aeb7a8f6/excel-commandbars-onupdate-event-handler-停止响应？forum=vsto](https://social.msdn.microsoft.com/Forums/en-US/c6472472-2ae4-496a-b553-a931aeb7a8f6/excel-commandbars-onupdate-event-handler-stops-responding?forum=vsto)

我改变了两件事：

*   引用不应直接指向 CommandBarsObject，而应存储在局部变量中（我假设引用以某种方式被垃圾收集）
*   实际的事件订阅是明确的`_CommandBarsEvents_OnUpdateEventHandler`（我认为这不是绝对必要的，但现在它可以工作了）

`CommandBars`对对象的全局引用

```
private Microsoft.Office.Core.CommandBars bars = Globals.ThisAddIn.Application.CommandBars 
```

并且在赋值函数中

```
 bars.OnUpdate += new Microsoft.Office.Core._CommandBarsEvents_OnUpdateEventHandler(CommandBars_OnUpdate); 
```

# couchdb - Couch DB 的 C API 和示例文档

> ID：12329899
> 
> 赞同：1
> 
> 时间：2012-09-08T10:24:02.123
> 
> 标签：couchdb

我想知道 Couch DB 是否有一个好的 C API 库，它具有以下方面的良好文档：1\. 查找 2\. 创建索引 3\. 插入 4\. 删除

我使用过 mongoDB，它非常适合，我找到了它的 C API，但后来意识到它不符合我的要求，因为我的数据库将在 32 位服务器中，数据库大小约为 20 GB。

请帮助我指向 C API 链接，以及如何使用该 API 编写代码的文档。试图为 NOSQL 数据库找到好的文档或 API 是一场噩梦，我已经花了几天时间，但无济于事（除了 mongodB）。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T21:03:32.377

有一个基于 curl 和 yajl 的 C API：

[https://github.com/jubos/pillowtalk](https://github.com/jubos/pillowtalk)

这里有例子： [http ://www.sevenforge.com/pillowtalk/](http://www.sevenforge.com/pillowtalk/)

但是，pillowtalk 已经有一段时间没有更新了，看起来它只支持对命名文档的 POST。我一直在寻找诡计绑定，找不到它们，然后寻找 C 绑定。我认为这个库目前也不符合我的要求，但这是一个好的开始。

# crystal-reports - Crystal Report - 从某个详细信息部分开始显示页眉，例如（详细信息 c）

> ID：12329902
> 
> 赞同：1
> 
> 时间：2012-09-08T10:24:24.560
> 
> 标签：crystal-reports

我怎样才能做到这一点？

```
Pageheader 1
Details a <Subreport>
Details b <Subreport>
Details c <Subreport>

Pageheader 2
Details d <Subreport>
Details e <Subreport>
Details f <Subreport> 
```

我不能使用页码来抑制页眉，因为起始页码可能会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:28:49.147

页面标题将*始终*位于每个页面的顶部（一旦呈现报告标题）。

您可能应该使用组标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:05:56.840

如果您正在根据某些条件寻找 PageHeader 的更改，您可以使用两个 Page Headers。然后在满足您的条件时抑制其中之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T07:39:56.267

在主报告页面标题中，您可以使用子报告的数量，但在子报告中，报告标题将像空白页一样采用完整的页面，因此最好将整个数据用于报告标题部分或详细信息部分（仅一个）。

# jquery - jquery检查元素是否有一个父级并且没有另一个

> ID：12329904
> 
> 赞同：0
> 
> 时间：2012-09-08T10:24:55.653
> 
> 标签：jquery, dom, if-statement, parent, closest

如果单击元素的祖先之一具有类“文本框”并且没有一个祖先具有类“mceExternalToolbar”，我需要执行某个操作。如果一个对象有一个父“mceExternalToolbar”，那么它肯定有一个父“文本框”，但反之则不然。

我正在使用这个：

```
$('#content').click(function(e){
var $eparent = $(e.target).closest('.textbox');
var $etoolbar = $(e.target).closest('.mceExternalToolbar');

// what's wrong with this if condition?
if($eparent.length==1 && !$etoolbar.length)
{
   //do something
}
}); 
```

我认为这很简单，但它似乎不起作用。`$etoolbar == NULL`不是有效的jquery，但是当我在条件中使用它时，条件至少第一次运行（虽然在控制台中出现错误）。

我的逻辑或我使用 jQuery 的方式有问题吗？

## 编辑

HTML 代码如下，我将做一个简短的解释。

我有一个内容框，可以在其中动态创建文本框（我为每个文本框使用 tinyMCE 富文本编辑器）。有时文本框会被“激活”（即 tinyMCE 在文本框元素中创建一堆元素，包括一个类为“mceExternalToolbar”的 div。）人们可以点击大内容 div 上的任何位置，但只有当他们点击一个文本框我想做某个动作。此外，只有当他们的点击不在文本框的 mceExternalToolbar 区域时，我才会招待他们的点击。

```
<div id="content" style="top:195px; position:absolute; height:300px; width:600px;border: 1px solid black;">

    <!-- THE BOX BELOW WAS CREATED DYNAMICALLY -->
    <div id="textbox_1" class="textbox" style="top: 101px; left: 112px; cursor: move;" aria-disabled="true">
        <div id="textbox_1_menu" class="menu"> <!-- menu items --> </div>
        <div id="textareacontainer_1" class="textareaedit">
            <textarea id="textarea_1" class="tinymce" style="display: none;" aria-hidden="true">
                <p>Testing this textbox</p>
            </textarea>
            <span id="textarea_1_parent" class="mceEditor defaultSkin" role="application" aria-labelledby="textarea_1_voice"></span>
            <div style="position:relative">
                <!-- THIS HERE IS THAT PARENT WHO, IF ANY OF ITS CHILDREN ARE CLICKED, I WILL NOT ENTERTAIN IT -->
                <div id="textarea_1_external" class="mceExternalToolbar" style="display: block; top: -28px;">
                    <a id="textarea_1_external_close" class="mceExternalClose" href="javascript:;"></a>
                    <table id="textarea_1_tblext" cellspacing="0" cellpadding="0">
                        <tbody>
                            <tr role="presentation">
                                <td class="mceToolbar mceLeft" role="presentation">
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- END CONTENT BOX -->
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:13:09.647

简化你的逻辑，你想要所有`.textbox`不是`.mceExternalToolbar`.

在生成你的 tinyMCE 后试试这个：

```
$('#content .textbox:not(.mceExternalToolbar .textbox)').click(function() {
    //do stuff
});​ 
```

[**小提琴**](http://jsfiddle.net/ult_combo/USqqW/)

或者，如果您需要事件委托，正如您所说的“动态添加”（请注意，大多数插件初始化是同步的）：

```
$('#content').on('click', '.textbox:not(.mceExternalToolbar .textbox)', function() {
    //do stuff
});​ 
```

[**小提琴**](http://jsfiddle.net/ult_combo/USqqW/1/)

当一个元素被点击时，点击事件将冒泡到`.textbox`我附加监听器的元素，其中不包括`.mceExternalToolbar`.

这样，`.textbox`通过直接绑定（第一个代码）或匹配委托事件的选择器（第二个代码）附加了侦听器的任何后代将在单击时触发处理程序，而无需检查`.textbox`祖先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:54:28.470

据我所知，您只需要在用户实际单击文本区域部分时的单击事件`#content`。如果我错了，请纠正我。

```
$('#content').on('click', 'textarea', (function(e)
{
    e.stopPropagation() // Stops click event bubbling up to other elements

    // Execute code, this will only be run if a user
    // Clicks on a 'textarea' element within `#content`
}); 
```

你问你的 if 语句有什么问题。`!$etoolbar.length`对于具有 null 或未定义长度的元素不是一个很好的检查。在要检查变量是否存在的情况下，您可以使用它。

```
if ( typeof $etoolbar !== 'undefined' )
{
    // Do stuff with $etoolbar
} 
```

# javascript - 获取 javascript 和优雅降级的问题 - 图像滚动器

> ID：12329906
> 
> 赞同：3
> 
> 时间：2012-09-08T10:25:08.050
> 
> 标签：javascript, jquery, scroller

我正在尝试按照以下示例创建一个 javscript 滚动条：http: [//www.deadmarshes.com/Blog/jQuery+Slideshow+with+Crossfade.html](http://www.deadmarshes.com/Blog/jQuery+Slideshow+with+Crossfade.html)

不幸的是，当禁用 javascript 时，此版本不显示任何内容，但我希望它至少显示第一个图像和标题，然后不移动。

我拼凑了一个小提琴，虽然在我添加 JS 之前加载了图像，但它目前似乎不起作用。虽然所有代码都在那里，但我有点愚蠢，所以我可能遗漏了一些简单的东西。

[http://jsfiddle.net/Lew7H/2/](http://jsfiddle.net/Lew7H/2/)

有谁知道如何使初始过渡不会发生，而只是在那里有第一个“幻灯片”？

此外，我稍微调整了一下以显示 4 张幻灯片而不是 3 张。我在 JS 中的两个地方（保持计数）将 3 更改为 4，这似乎工作正常，但现在在 FF 中，当您单击一些数字时更换幻灯片几次，然后让它恢复正常运行，用于显示您所在幻灯片的指示器开始出现在所有地方。

我认为这与它在 JS 中的计算方式有关，但老实说，我不知道它在做什么。

任何帮助，将不胜感激。

**编辑：** 只看那里的第二个问题，关于指标在点击其中一些后搞砸了。过渡的时间也很奇怪。这就像点击几次意味着转换和指针会发生几次。IE 有不止一位 JS 移动幻灯片和指针，导致奇怪的定时转换和不止一个指针。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T20:04:03.213

我修复了一些你失去范围的调用部分。阅读[https://stackoverflow.com/a/2335175/297641](https://stackoverflow.com/a/2335175/297641)了解更多信息。

**固定小提琴：http:** [//jsfiddle.net/Lew7H/12/](http://jsfiddle.net/Lew7H/12/)

查看代码，如果缺少某些内容，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:36:03.870

现在工作 看[演示](http://jsfiddle.net/Lew7H/3/)

你忘了选择框架

# c# - 在 C# 中的成员名称中使用尖括号是什么意思？

> ID：12329907
> 
> 赞同：1
> 
> 时间：2012-09-08T10:25:20.360
> 
> 标签：c#, syntax, disassembly, .net, dotpeek

当我发现这个时，我正在使用 DotPeek 浏览 PresentationCore.dll 的源代码：

```
// Type: MS.Internal.TtfDelta.CMAP_HEADER
// Assembly: PresentationCore, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// Assembly location: D:\Windows\Microsoft.NET\assembly\GAC_64\PresentationCore\v4.0_4.0.0.0__31bf3856ad364e35\PresentationCore.dll

using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;

namespace MS.Internal.TtfDelta
{
  [NativeCppClass]
  [StructLayout(LayoutKind.Sequential, Size = 4)]
  internal struct CMAP_HEADER
  {
    private short <alignment member>;
  }
} 
```

**“ `private short <alignment member>`”是什么意思？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:32:45.593

有时反汇编器不知道代码的成员实际上是什么，它会使用“猜测”类型。

反汇编程序为我们提供了伪代码，尽管它在 .NET Framework 上使用 dotPeek 的情况下非常准确，但它仍然不是“真实”代码，例如`base.ctor`以下 HashEntry 类中的调用：

```
private class HashEntry
{
  public string[] names;
  public ulong[] values;

  public HashEntry(string[] names, ulong[] values)
  {
    base.\u002Ector();
    this.names = names;
    this.values = values;
  }
} 
```

我从 mscorlib 中获取的内容完美地证明了这一点。

# delegates - MonoTouch.Dialog 如何从 radiogroup 获取数据

> ID：12329912
> 
> 赞同：1
> 
> 时间：2012-09-08T10:25:57.707
> 
> 标签：delegates, xamarin.ios, monotouch.dialog

我是 monotouch.dialog 的初学者。我正在尝试使用带有标题和值的覆盖radioelement从radiogroup中获取一个值作为经典下拉列表！

但问题是检测事件 OnSelect

多元素代码

```
public class MyRadioElement : RadioElement
  {

    private string Caption{get; set;}
    private int ID{get; set;}

        public MyRadioElement(string caption, int id, NSAction selected): base(caption, id)
        {
            Caption = caption;
            ID = id;

            OnSelected += selected;
        }

    public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        base.Selected (dvc, tableView, path);
        var selected = OnSelected;
        if (selected != null)
            selected ();
    }

    public event NSAction OnSelected;

} 
```

根代码

```
var rootSex = new RootElement ("SEX",
sexUser = new RadioGroup ("", -1)){new Section ("INSERT SEX"){
from n in Def.Get_Sexes()
select (Element) new MyRadioElement (n.Descr, n.ID, ????delegate????? )}
}; 
```

我会使用委托来调用选择事件，但它给了我一个转换错误......

为什么？？？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T15:40:29.407

这个应该工作

```
class MyRadioElement: RadioElement
{
    private Action<MyRadioElement> selected;

    public MyRadioElement(string caption, int id,  Action<MyRadioElement> selected): base(caption, id)
    {
        this.selected = selected;
    }

    public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath path)
    {
        base.Selected (dvc, tableView, path);

        if (this.selected != null)  
                    this.selected(this);

    }
} 
```

然后您将创建元素为

```
new MyRadioElement("Caption", 2, MyMethod) 
```

MyMethod 看起来像

```
private void MyMethod(MyRadioElement e)
{

} 
```

# android - 从 google place api 获取信息以显示在 android 应用程序中

> ID：12329915
> 
> 赞同：1
> 
> 时间：2012-09-08T10:26:04.047
> 
> 标签：android, json, google-api, google-places

我想在 android 中创建一个应用程序，它根据食物、费用、评级等详细信息搜索餐馆......我想我可以使用 Google place API 来做这件事，我已经搜索过它并且已经知道在JSON 接口，我们只能添加参考和传感器作为查询。所以如果有人以前这样做过，请帮帮我。

# mysql - 获取属于指定关键字和类别的项目

> ID：12329918
> 
> 赞同：1
> 
> 时间：2012-09-08T10:26:20.703
> 
> 标签：mysql, sql, many-to-many

我有一个*关键字*和一个带有*ID*和*名称col 的**类别*表（我不能将它们合并到一个表中！）

 **有一个带有 ID、名称、文本的*文章表。*

以及多对多连接表：

*   *ckw*关键字，列：key_id，article_id

*   *ccat*用于类别，列：cat_id、article_id

我可以编写一个查询来获取那些属于关键字 ID 5**和**ID 7 的文章：

```
SELECT articles.name FROM articles
JOIN ckw ON (ckw.article_id = articles.id)
WHERE ckw.key_id IN (5, 7)
GROUP BY ckw.article_id
HAVING COUNT(ckw.key_id) = 2 
```

但是，如果我想获得那些属于关键字 ID 5 **AND** ID 7 并且也属于类别 ID 12 **AND** ID 18 的文章怎么办？我想不出正确的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:42:09.567

```
SELECT articles.name
FROM articles
inner JOIN ckw ON ckw.article_id = articles.id
inner join ccat on ccat.article_id = articles.id
WHERE ckw.key_id IN (5, 7) 
and ccat.category_id in (12,18)
GROUP BY articles.article_id , articles.name 
HAVING COUNT(distinct ckw.key_id) = 2 
and count(distinct ccat.category_id) = 2 
```**

# asp.net-mvc - 使用 RavenDB 数据存储实现 ServiceStack 的身份验证提供程序需要什么？

> ID：12329919
> 
> 赞同：3
> 
> 时间：2012-09-08T10:26:50.063
> 
> 标签：asp.net-mvc, servicestack

我一直在查看 ServiceStack 的 SocialBootstrapAPI 示例应用程序，似乎大部分连接都是在 AppHost 类中完成的。那就是*接线。*

看看这个页面，有一些线索，我可能只是开始编码，但我担心我可能会错过一些要点：[https ://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)

我知道我必须继承`CredentialsAuthProvider`和覆盖`TryAuthenticate`，但我想我还必须实现 IUserAuthRepository 才能使用 RavenDB 数据库。

所以我想出了一门课，有人请告诉我这是否可行（如果有人以前做过）：

```
public sealed class RavenDBAuthProvider : CredentialsAuthProvider, IUserAuthRepository 
```

这足够了吗？还有其他的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T21:17:45.657

您只需要实现`IUserAuthRepository`所有内置 Auth 提供程序用来持久保存 UserAuth 信息的内容。

如果您想更改使用的数据模型，即使用除[UserAuth / UserOAuthProvider POCOs](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/UserAuth.cs)以外的其他东西，那么您也想实现自己的 AuthProviders。CredentialsAuthProvider 只允许标准的用户/密码表单身份验证。

现有的 `IUserAuthRepository`实现应该是如何实现它的一个很好的参考：

*   [MongoDBAuthRepository](https://github.com/ServiceStack/ServiceStack.Contrib/blob/master/src/ServiceStack.Authentication.MongoDB/MongoDBAuthRepository.cs)
*   [NHibernateUserAuthRepository](https://github.com/ServiceStack/ServiceStack.Contrib/blob/master/src/ServiceStack.Authentication.NHibernate/NHibernateUserAuthRepository.cs)
*   [RedisAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/RedisAuthRepository.cs)
*   [InMemoryAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/InMemoryAuthRepository.cs)
*   [OrmLiteAuthRepository](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Auth/OrmLiteAuthRepository.cs)

如果您愿意，我们欢迎添加到[ServiceStack.Contrib](https://github.com/ServiceStack/ServiceStack.Contrib)项目中，我们可以将其包含在 ServiceStack 的 NuGet 包的部署周期中。

# android - 两个图像之间的淡入淡出动画

> ID：12329928
> 
> 赞同：0
> 
> 时间：2012-09-08T10:29:12.357
> 
> 标签：android, android-layout, android-animation

我想用淡入淡出动画切换图像。

我将这段代码用于动画：

```
package android.infra;

import android.graphics.drawable.Drawable;
import android.view.View;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationSet;
import android.view.animation.DecelerateInterpolator;
import android.widget.ImageView;

public class AnimationsHelper {

    public static void switchImageAnimations(final ImageView imageView, final Drawable images[], final int imageIndex, final boolean forever) {

          //imageView <-- The View which displays the images
          //images[] <-- Holds R references to the images to display
          //imageIndex <-- index of the first image to show in images[] 
          //forever <-- If equals true then after the last image it starts all over again with the first image resulting in an infinite loop. You have been warned.

            int fadeInDuration = 500; // Configure time values here
            int timeBetween = 3000;
            int fadeOutDuration = 1000;

            imageView.setVisibility(View.INVISIBLE);    //Visible or invisible by default - this will apply when the animation ends
            imageView.setImageDrawable(images[imageIndex]);

            Animation fadeIn = new AlphaAnimation(0, 1);
            fadeIn.setInterpolator(new DecelerateInterpolator()); // add this
            fadeIn.setDuration(fadeInDuration);

            Animation fadeOut = new AlphaAnimation(1, 0);
            fadeOut.setInterpolator(new AccelerateInterpolator()); // and this
            fadeOut.setStartOffset(fadeInDuration + timeBetween);
            fadeOut.setDuration(fadeOutDuration);

            AnimationSet animation = new AnimationSet(false); // change to false
            animation.addAnimation(fadeIn);
            animation.addAnimation(fadeOut);
            animation.setRepeatCount(1);
            imageView.setAnimation(animation);

            animation.setAnimationListener(new AnimationListener() {
                public void onAnimationEnd(Animation animation) {
                    if (images.length - 1 > imageIndex) {
                        switchImageAnimations(imageView, images, imageIndex + 1,forever); //Calls itself until it gets to the end of the array
                    }
                    else {
                        if (forever == true){
                            switchImageAnimations(imageView, images, 0,forever);  //Calls itself to start the animation all over again in a loop if forever = true
                        }
                    }
                }
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub
                }
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub
                }
            });
        }
} 
```

此代码用于下载图像并显示它们：

```
package android.infra;

import java.util.Map; 
import java.util.HashMap; 
import java.util.LinkedList; 
import java.util.Collections; 
import java.util.WeakHashMap; 
import java.lang.ref.SoftReference; 
import java.util.concurrent.Executors; 
import java.util.concurrent.ExecutorService; 
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.widget.ImageView;
import android.os.Handler;
import android.os.Message;
import java.io.InputStream;
import java.net.MalformedURLException; 
import java.io.IOException; 
import java.net.URL;
import java.net.URLConnection;

public class DrawableBackgroundDownloader {    

private final Map<String, SoftReference<Drawable>> mCache = new HashMap<String, SoftReference<Drawable>>();   
private final LinkedList <Drawable> mChacheController = new LinkedList <Drawable> ();
private ExecutorService mThreadPool;  
private final Map<ImageView, String> mImageViews = Collections.synchronizedMap(new WeakHashMap<ImageView, String>());  

public static int MAX_CACHE_SIZE = 80; 
public int THREAD_POOL_SIZE = 3;

/**
 * Constructor
 */
public DrawableBackgroundDownloader() {  
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);  
}  

/**
 * Clears all instance data and stops running threads
 */
public void Reset() {
    ExecutorService oldThreadPool = mThreadPool;
    mThreadPool = Executors.newFixedThreadPool(THREAD_POOL_SIZE);
    oldThreadPool.shutdownNow();

    mChacheController.clear();
    mCache.clear();
    mImageViews.clear();
}  

public void loadDrawable(final String url, final ImageView imageView,Drawable placeholder) {  
    mImageViews.put(imageView, url);  
    Drawable drawable = getDrawableFromCache(url);  

    // check in UI thread, so no concurrency issues  
    if (drawable != null) {  
        //Log.d(null, "Item loaded from mCache: " + url);  
       // imageView.setImageDrawable(drawable);
        Drawable imagesToShow[] = { drawable };
        android.infra.AnimationsHelper.switchImageAnimations(imageView, imagesToShow, 0, false);
    } else {  
        imageView.setImageDrawable(placeholder);  
        queueJob(url, imageView, placeholder);  
    }  
} 

private Drawable getDrawableFromCache(String url) {  
    if (mCache.containsKey(url)) {  
        return mCache.get(url).get();  
    }  

    return null;  
}

private synchronized void putDrawableInCache(String url,Drawable drawable) {  
    int chacheControllerSize = mChacheController.size();
    if (chacheControllerSize > MAX_CACHE_SIZE) 
        mChacheController.subList(0, MAX_CACHE_SIZE/2).clear();

    mChacheController.addLast(drawable);
    mCache.put(url, new SoftReference<Drawable>(drawable));

}  

private void queueJob(final String url, final ImageView imageView,final Drawable placeholder) {  
    /* Create handler in UI thread. */  
    final Handler handler = new Handler() {  
        @Override  
        public void handleMessage(Message msg) {  
            String tag = mImageViews.get(imageView);  
            if (tag != null && tag.equals(url)) {
                if (imageView.isShown())
                    if (msg.obj != null) {
                    //  imageView.setImageDrawable((Drawable) msg.obj);
                        Drawable imagesToShow[] = { (Drawable) msg.obj };
                        android.infra.AnimationsHelper.switchImageAnimations(imageView, imagesToShow, 0, false);
                    } else {  
                        imageView.setImageDrawable(placeholder); 
                        //Log.d(null, "fail " + url);  
                    } 
            }  
        }  
    };  

    mThreadPool.submit(new Runnable() {  
        @Override  
        public void run() {  
            final Drawable bmp = downloadDrawable(url);
            // if the view is not visible anymore, the image will be ready for next time in cache
            if (imageView.isShown())
            {
                Message message = Message.obtain();  
                message.obj = bmp;
                //Log.d(null, "Item downloaded: " + url);  

                handler.sendMessage(message);
            }
        }  
    });  
}  

private Drawable downloadDrawable(String url) {  
    try {  
        InputStream is = getInputStream(url);        
        Drawable drawable = Drawable.createFromStream(is, url);
        putDrawableInCache(url,drawable);  
        return drawable;  

    } catch (MalformedURLException e) {  
        e.printStackTrace();  
    } catch (IOException e) {  
        e.printStackTrace();  
    }  

    return null;  
}  

private InputStream getInputStream(String urlString) throws MalformedURLException, IOException {
    URL url = new URL(urlString);
    URLConnection connection;
    connection = url.openConnection();
    connection.setUseCaches(true); 
    connection.connect();
    InputStream response = connection.getInputStream();

    return response;
}
} 
```

如您所见，我正在尝试通过以下方式在第二段代码中使用它：

```
 Drawable imagesToShow[] = { (Drawable) msg.obj };
android.infra.AnimationsHelper.switchImageAnimations(imageView, imagesToShow, 0, false); 
```

出于某种原因，我的图像加载（没有任何动画），然后动画执行，我的图像视图由于某种原因变得不可见！

提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-08T10:51:49.563

通过仅使用动画淡入解决它。

# bash - 在 Bash 脚本中过滤 Netcat 结果

> ID：12329929
> 
> 赞同：1
> 
> 时间：2012-09-08T10:29:23.050
> 
> 标签：bash, filter, netcat

我正在尝试编写一个连接到端口 53 上的 IP 列表的脚本 - 我希望结果只返回打开的端口。这是我在下面运行的脚本 - 我尝试了 grepping 和剪切输出，但我不确定我是否正确地执行此操作 - 我似乎也无法将脚本结果通过管道传输到文本文件。

```
#!/bin/bash

for ip in $(seq 200 254); do
    nc -v 192.168.11.$ip 53 &
done 
```

我为它的简单性道歉我是新人 - 如果解决方案在其他地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T11:46:05.247

检查命令的退出代码，如果连接成功，它应该为零。还可以使用*-z*选项在连接建立后断开连接。

```
#!/bin/bash

for ip in $(seq 200 254); do
    nc -z 192.168.11.$ip 53
    if [ $? -eq 0 ]; then
        echo "Hit: 192.168.11.$ip"
    fi
done 
```

如果你使用的是 nmap 而不是 netcat，你可以使用这个：

```
nmap 192.168.11.200-254 -p 53 
```

PS。如果您尝试确定哪些主机运行 DNS 服务器，您应该扫描打开的 53/udp，而不是 53/tcp（netcat 中的选项*-u*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:47:33.007

如果您希望命令的所有输出都转到文件，请使用`&>`. 在您的示例中，您可以使用：

```
#!/bin/bash

for ip in $(seq 200 254); do
    nc -v 192.168.11.$ip 53 &>> myFile
done 
```

然后，您可以随心所欲地操作（grep、sed、awk 等）`myFile`。

# oauth-2.0 - access_token 字符串的长度是多少？

> ID：12329930
> 
> 赞同：1
> 
> 时间：2012-09-08T10:29:25.313
> 
> 标签：oauth-2.0, soundcloud

我将从 Soundcloud 收到的访问令牌存储在数据库中，因此想知道字符串的最大长度是多少。[这里](https://stackoverflow.com/questions/4408945/what-is-the-length-of-the-access-token-in-facebook-oauth2)有一个关于 Facebook的类似问题。相同的 (1) 是否适用于 Soundcloud？

长度是否可以保证在未来保持不变还是会改变？

*(1) 最大长度为 255 个字符*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T23:37:20.023

仅供参考 - OAuth 2.0 规范未定义最大长度。因此，如果 Facebook 最大长度确实适用，那将是巧合，或者因为 Soundcloud 人员引用了 Facebook 实现。因此，您需要 Soundcloud 的回答。

我建议使用更大的可变长度列来存储此信息，以防万一。您的数据库可能会出现一些性能下降，但我怀疑这将是最小的，因为您引用此数据的方式（可能基于索引中的用户 ID）并且因为您可能只会返回一行一次。

# jsf-2 - 从 bean 读取数据到 JSF inputtext

> ID：12329935
> 
> 赞同：0
> 
> 时间：2012-09-08T10:30:46.877
> 
> 标签：jsf-2, primefaces, ejb-3.0, facelets

我有一个选定的 bean，我可以使用 h:outputtext 毫无问题地显示它的字段，但这不能通过使用 h:inputtext 来完成。

这工作正常没问题

```
<h:outputText value="Username :"></h:outputText>
<h:outputText value="#{userController.selectedUser.username}" /> 
```

但这一个根本不起作用！输入文本显示为空白。

```
<h:outputText value="Username :"></h:outputText>
<h:inputText value="#{userController.selectedUser.username}" /> 
```

我在这里想念什么？有没有人遇到过这样的问题？

将不胜感激任何帮助。干杯...

（primefaces 3.5、mojarra 2.1、ejb 3.1、jsf 2.1、netbeans 7.2、glassfish 3.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T11:06:28.210

这是我能想到的。我真的不知道可能是什么原因。如果你使用另一个bean，它会起作用吗？如果您更改标签的位置（可能直接在正文下方），它是否有效？如果没有，如果你剥离其他所有东西，它会起作用吗？

如果某些东西有效，请比较渲染的源。我喜欢为此使用winmerge。祝你好运

# java - Jackson JSON 映射 Facebook 数据

> ID：12329936
> 
> 赞同：0
> 
> 时间：2012-09-08T10:31:38.623
> 
> 标签：java, jackson

来自 Facebook 的 JSON 数据示例

```
{
    "1111111" : {
         "home" : false,
         "activities" : "some value"
    },

    "2222222" : {
         "home" : false,
         "activities" : "some value again"
    }
} 
```

```
public class Profile{
    private boolean home;
    private String activities;

    // generated setter getter

    public static void main(String[] args) throws JsonParseException, JsonMappingException, IOException {
        ObjectMapper mapper = new ObjectMapper();
        Profile mainProfile = mapper.readValue(new File("data.json"), Profile.class);

        System.out.println(mainProfile.getActivities().size());
    }
} 
```

运行上面的文件会产生这个错误。

```
Unrecognized field "1111111" (Class com.analysis.structure.Profile), not marked as ignorable 
```

我面临的问题是如何将“1111111”值映射到类中的变量？如果我使用@JsonIgnoreProperties(ignoreUnknown=true)，它将完全忽略所有 josn 数据，因为第一个数据没有任何要映射的标签。我应该如何使用 Jackson JSON 将这种类型的 json 数据映射到 Java 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:32:14.273

这并不能干净地映射到 POJO，所以也许你应该将它绑定到 a `Map`，其中 key 是 type `String`，并且 value 一些 POJO 类型？

# asp.net-mvc - ServiceStack Funq IoC 替换

> ID：12329940
> 
> 赞同：5
> 
> 时间：2012-09-08T10:32:27.053
> 
> 标签：asp.net-mvc, servicestack

在 AppHost 类中，所有方法覆盖都使用 Funq 容器。我在我的 ASP.NET MVC 应用程序中使用 Autofac（我将 SS 与我的 MVC 应用程序并排运行）。

1.  有没有办法宁愿使用来自 global.asax.cs 的 Autofac 注册，或者这是一个过度的替换？
2.  我在 AppHost 中注释掉了这一行

    //ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));

因为它弄乱了我的 Autofac 驱动的控制器。这足以防止 Autofac 和 Funq 在我的应用程序中出现问题吗？或者 Funq 是否将自己设置为`DependencyResolver`其他任何地方的默认设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-08T16:23:40.507

Func 和 AutoFac 可以一起工作。使用 ServiceStack，您可以指示 func 使用 AutoFac 适配器。这个页面在这里告诉你如何使用不同的 IoC 容器。它甚至提供了**AutofacIocAdapter**类的代码。[https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)

```
public class AutofacIocAdapter : IContainerAdapter
{
    private readonly IContainer _container;

    public AutofacIocAdapter(IContainer container)
    {
        _container = container;
    }

    public T Resolve<T>()
    {
        return _container.Resolve<T>();
    }

    public T TryResolve<T>()
    {
        T result;

        if (_container.TryResolve<T>(out result))
        {
            return result;
        }

        return default(T);
    }
} 
```

然后在 AppHost Configure(Container container) 方法中你需要启用这个适配器：

```
//Create Autofac builder
var builder = new ContainerBuilder();
//Now register all depedencies to your custom IoC container
//...

//Register Autofac IoC container adapter, so ServiceStack can use it
IContainerAdapter adapter = new AutofacIocAdapter(builder.Build())
container.Adapter = adapter; 
```

# url - Facebook 应用页面在应用商店中的支持 url

> ID：12329946
> 
> 赞同：4
> 
> 时间：2012-09-08T10:33:19.683
> 
> 标签：url, app-store

我可以在 AppStore 中使用 Facebook 应用页面作为支持网址吗？

# python - 从网页中提取文本

> ID：12329949
> 
> 赞同：0
> 
> 时间：2012-09-08T10:33:39.720
> 
> 标签：python, html, regex, python-3.x, web-scraping

我正在尝试从此页面开始解析网页中的[文本](http://www.cisco.com/en/US/products/ps6441/products_installation_and_configuration_guides_list.html)。此页面包含指向最终页面的链接（也可以手动将其移入文本文件；以避免额外的编码工作）。在左侧的最后一页有一个页面索引。并且每个页面也有一个页面索引。页面索引位于每页的顶部。从这个项目列表中，我只需要提取以“配置”、“配置示例”或“示例”开头的行。

手动执行此任务似乎很简单，但令人生畏且难以跟踪。如果可以从任何工具中提取此信息，该工具会在发现时以分层顺序对项目进行爬网和记录。可能是一些简单的格式，其中还包括超链接或至少与普通的制表符分隔的文本文件一样。

网页上的信息是公开的，可以下载。如果很难通过网络提取可能是我也可以尝试下载这些并尝试离线。

我尝试对此要求进行研究，并查看 LinksGrabber、WebParser、BeautifulSoup 或使用正则表达式解析文本可以进行调整。但我距离这个想法的实施还有几光年的时间。

这是我正在尝试的是否可以通过 Python 实现，或者在此问题上的现实主义方法是什么。

PS：我知道这是网络抓取，但我只是出于个人教育目的这样做，它不具有商业价值或任何关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:36:47.247

你应该试试[Scrapy](http://scrapy.org/)。在那里您可以设置模型，该模型将包含您想要从页面中获取的数据，例如

```
from scrapy.item import Item, Field

class Torrent(Item):
    url = Field()
    name = Field()
    description = Field()
    size = Field() 
```

你可以编写一个爬取这些数据的蜘蛛。[一目了然](http://doc.scrapy.org/en/0.14/intro/overview.html)

# mongodb - 存储在 mongodb 或 hadoop 中的大量传感器数据

> ID：12329951
> 
> 赞同：-3
> 
> 时间：2012-09-08T10:34:27.987
> 
> 标签：mongodb, hadoop

我的应用程序处理大量实时传感器数据。数据可以用于大数据分析，hadoop当然是最好的选择。但是现在我只是在想是不是应该先把数据放到mongodb中，然后通过mongodb到hadoop的接口来做大数据的事情。是否需要 mongodb，因为它们都可以存储数据和 map reduce（hadoop 更高级）？

谁能帮我分析一下hadoop和mongodb之间的区别？
我应该将它们结合起来，还是只在这个基于传感器的应用程序架构中保留 hadoop？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T14:26:54.337

Hadoop 不是数据库——它是一个数据分析框架。

但它需要从某个地方获取数据。MongoDB 是存储数据以供 Hadoop 分析的一种可能的解决方案。但是，这是一个好还是坏的解决方案取决于您在问题中没有提到的许多因素。主要是您的数据是如何结构化的，以及您是否期望该结构在未来发生变化。

# nexus - 从 Cloudbees 上的 Jenkins 将工件上传到 Nexus

> ID：12329952
> 
> 赞同：2
> 
> 时间：2012-09-08T10:34:38.680
> 
> 标签：nexus, gnupg, cloudbees

我想从在 Cloudbees 上运行的 Jenkins 上传一个工件到 Nexus 中心，因为我的一个是存储在 Maven 中心的 OSS 项目。为此，我需要在本地安装 gpg 密钥。我如何在 Cloudbees 上做到这一点。我已经在本地 Linux 机器上完成了，但我需要访问 Cloudbees 上的某种 Linux 环境。

问候， 马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:29:15.393

您可以将 gpg 密钥上传到 cloudbees forge 上的私有存储库，并将 maven 作业设置为使用 -Dgpg.homedir=/private/

# android - 适用于平板电脑的 Google+ Android 网格小部件教程

> ID：12329953
> 
> 赞同：6
> 
> 时间：2012-09-08T10:34:39.223
> 
> 标签：android, android-layout, gridview, google-plus, pinterest

我想在 Android 中构建一个异构网格小部件，就像用于平板电脑或 Pinterest 的 Google+ 等应用程序一样。我找不到任何教程，而且似乎特别困难。

![在此处输入图像描述](../Images/3b82c476177ea24b5c8c7886512d6b1d.png)

不幸的是`GridView`，我想获得不同大小的单元格时，只能有相同大小的单元格。你能指点我任何好的教程吗？我只知道我必须延长`AbsListView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:24:24.947

根据物品高度的可变性，您有几个选择：

1.  如果您希望`GridView`使用多种高度变化（例如 Pinterest），您应该使用[StaggeredGridView](https://github.com/maurycyw/StaggeredGridView) - 据我所知，它是目前最好的开源解决方案。

2.  在您发布的图像中，看起来好像有具有可变高度子级的父行 - 这是一个更容易解决的问题，可以通过使用常规 ol'`ListView`和`BaseAdapter`. 写出这个代码对于一个 SO 答案来说太复杂了，但我会概述一下我如何实现这种效果。

    *   必须提前确定每行的`BaseAdapter`粗略布局，以便它可以向列表视图报告它需要多少行 - 您需要覆盖`getCount()`。
    *   在`getView()`您的适配器中，您将膨胀单个`LinearLayout`（或者如果它已被回收，则可能使用 convertView ）并添加尽可能多的孩子（再次，更多`LinearLayouts`），因为您需要设备的宽度（您应该在运行时弄清楚这一点，除非您只想创建手机和平板电脑版本）。
    *   添加到该行的每个子`LinearLayout`项都应设置为 weight=1，以便它们伸展到父行的整个宽度。在您发布的屏幕截图中，有 3 列（第三个 id 被截断）。
    *   `LinearLayout`您刚刚添加到行中的每个子项代表一列。您应该将它们的方向设置为垂直，因为它们是列！
    *   在每一列中，如果您要添加一个子项，您将拥有一个网格视图。
    *   如果您希望达到上述效果，您可以在每列中添加更多项目。
    *   例如，第 1 行，第 1 列有一个大的孩子。第 1 行中的第 2 列和第 3 列都有 2 个半高子项。

# asp.net - ActiveX - 自动化服务器无法创建对象（单击按钮）

> ID：12329954
> 
> 赞同：0
> 
> 时间：2012-09-08T10:34:41.880
> 
> 标签：asp.net, internet-explorer, activex, com-interop

```
 function regist() 
         {
            var objBioBSP = new ActiveXObject('BioBSPCOMM.BioBSP');
         }
    <input type="button" onclick="regist()" 
            value="Click here" style="width: 304px"/> 
```

我使用上面的文件在我的 ASP.net 项目中创建 activex 对象。我在点击按钮时调用上面的代码，但是当我使用它时出现错误 ActiveX - 自动化服务器无法创建对象

# ruby-on-rails - 如何禁用 Rails 中生成模型的纯化？

> ID：12329956
> 
> 赞同：3
> 
> 时间：2012-09-08T10:35:18.627
> 
> 标签：ruby-on-rails

有一个配置文件 config/initializers/inflections.rb ，根据这个问题，您可以修改某些项目的纯化： [ruby on rails 复数帮助？](https://stackoverflow.com/questions/1640408/ruby-on-rails-pluralization-help)

不过，我对此不感兴趣。我想关闭生成模型名称的自动修改。

这是一个例子：

```
rails generate scaffold UserData data1:string data2:string 
```

数据更改为“基准”：

```
%] cat app/models/user_datum.rb 
class UserDatum < ActiveRecord::Base
  attr_accessible :data1, :data2
end 
```

这是不受欢迎的行为。

**我该如何关闭它？**

具体来说，如果你可以的话；我看过一些帖子，有人说“你必须为此修改食谱”，但没有实际的指导。

（我很欣赏人们想要开始回答这个问题，'你应该坚持做事的方式，这是有充分理由的，从长远来看它会奏效'；请不要）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T12:10:16.780

首先，`UserDatum` *是*单数。

任何状况之下：

改变你的`config/initializers/inflections.rb`：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.uncountable %w(UserData)
end 
```

（使用您使用的任何命名约定，例如，如果您使用下划线`user_data`，或者同时使用两者。）

如果要删除*所有*复数形式（粗略：这将影响世界上的一切）：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.clear
  inflect.singular(/$/i, '')
end 
```

*如果*您只想控制模型/模型文件命名，请 patch `ModelGenerator`：

```
module Rails
  module Generators
    class ModelGenerator
      def plural_name; singular_name; end
      def plural_file_name; file_name; end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:24:00.557

The best way of doing this is:

```
rails generate scaffold HouseData --force-plural 
```

(it's still an item by item fix, but it doesn't mess around with the pluralization stuff, which is global and affects other parts of the app too)

# ruby-on-rails - 如何动态生成 url（用于生成 xls 报告）？

> ID：12329960
> 
> 赞同：0
> 
> 时间：2012-09-08T10:36:04.233
> 
> 标签：ruby-on-rails, url, url-routing, xls

你好！

我有这个麻烦：我正在按日期搜索报告，并且在 html 视图中一切都很好，但是当我渲染 xls 视图时出现错误，因为它没有收到参数，所以我需要将它们传递给 xls link_to 的 URL发电机。

我的控制器：

```
def show
  @website = Website.find(params[:id])
  if params[:report] && params[:report][:start_date] && params[:report][:end_date]
    #search_by_created_at
    @performance_reports = @website.performance_reports.where("created_at between ? and ?", params[:report][:start_date].to_date, params[:report][:end_date].to_date)
  else
    @performance_reports = @website.performance_reports
  end
  respond_to do |format|
    format.html # index.html.erb
    format.xls
    format.xml  { render :xml => @performance_reports }
  end
end 
```

我生成的网址如下所示：

```
 http://127.0.0.1:3000/websites/25/performance_reports/show?utf8=%E2%9C%93&report[end_date]=07%2F09%2F2012&report[start_date]=04%2F09%2F2012&commit=Run+Report 
```

我的 xls url 是这样生成的：

```
 <%= link_to url_for(:format => 'xls')  do%>
   <%= image_tag("excel.png", :id => "analytics",:size => '21x23')%> <b>Export</b>
 <% end %> 
```

结果：

```
http://127.0.0.1:3000/websites/25/performance_reports/show 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:16:14.013

默认情况下，xls in 不可用。

添加这个：

```
gem "spreadsheet"
gem "to_xls", :git => "https://github.com/dblock/to_xls.git", :branch => "to-xls-on-models" 
```

通过添加以下内容注册 Excel MIME 类型`config/initializers/mime_types.rb`：

```
Mime::Type.register "application/vnd.ms-excel", :xls 
```

将 as_xls 方法添加到要为所需字段导出的模型中。例如，对于`User`您可能拥有的模型：

```
def as_xls(options = {})
  {
      "Id" => id.to_s,
      "Name" => name,
      "E-Mail" => email,
      "Joined" => created_at,
      "Last Signed In" => last_sign_in_at,
      "Sign In Count" => sign_in_count
  }
end 
```

将代码添加到控制器：

```
def index
  @users = User.all
  respond_to do |format|
    format.html
    format.xls { send_data @users.to_xls, content_type: 'application/vnd.ms-excel', filename: 'users.xls' }
  end
end 
```

提供一个链接：

```
= link_to 'Export', users_path(request.parameters.merge({:format => :xls})) 
```

所有代码都应该有一个测试。你可以这样做：

```
describe "GET index.xls" do
  it "creates an Excel spreadsheet with all users" do      
    user = Fabricate :user
    get :index, :format => :xls
    response.headers['Content-Type'].should == "application/vnd.ms-excel"
    s = Spreadsheet.open(StringIO.new(response.body))
    s.worksheets.count.should == 1
    w = s.worksheet(0)
    w.should_not be_nil
    w.row(0)[0].should == "Id"
    w.row(1)[0].should == user.id.to_s
    w.row(0)[1].should == "Name"
    w.row(1)[1].should == user.name
  end
end 
```

# java - 从 html 中提取文本：寻找一个好的类似 sax 的解析器或使用 dom 解析器的建议

> ID：12329962
> 
> 赞同：0
> 
> 时间：2012-09-08T10:37:11.207
> 
> 标签：java, android

我有一个这样格式化的 html 文档：

```
<p>
 some plain text <em>some emphatized text</em>, <strong> some strong text</strong>
</p>
<p>
 just some plain text
</p>
<p>
  <strong>strong text </p> followed by plain, <a>with a link at the end!</a>
</p> 
```

我想提取文本。使用类似解析器的dom，我可以提取每个段落

，但问题在里面：我也必须从内部标签中提取文本，并得到一个具有相同顺序的结果字符串，在上面的示例中，第一段，我想提取：

```
some plain text some emphatized text, some strong text 
```

出于这个目的，我猜像 sax 这样的解析器会比 dom 更好，因为我不知道内部标签编号 o 序列：一个段落可以有零个或多个不同类型的内部标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:40:06.633

您可以使用 dom 解析器，将 p 标签（包括子 html 元素）内的文本放入字符串变量中，并使用其他一些功能从结果字符串中去除所有 html 标签。这应该让您拥有 p 标签之间的所有内容，而没有任何子元素标签。

**例子**

```
<p>
    some plain text <em>some emphatized text</em>, <strong> some strong text</strong>
</p>
<p>
    just some plain text
</p>
<p>
    <strong>strong text </p> followed by plain, <a>with a link at the end!</a>
</p> 
```

使用一些 dom 解析器将 p 标记提取为字符串，然后您将拥有如下字符串：

```
String content = "some plain text <em>some emphatized text</em>, <strong> some strong text</strong>";
content = stripHtmlTags( content );
println( content ); // some plain text some emphatized text, some strong text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:12:31.217

String extractText=Html.fromHtml(Your HTML String).toString()

这给了你提取的文本。希望这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:04:09.067

```
Add code to read CDATA by DOM pase
**childNode.getNodeType() == Node.CDATA_SECTION_NODE**

if Using XMLUtils modify like

public static String getNodeValue(Node node) {
        node.normalize();
        String response = node.getNodeValue();
        if (response != null) {
            return response;
        } else {
            NodeList list = node.getChildNodes();
            int size = list == null ? 0 : list.getLength();
            for (int j = 0; j < size; j++) {
                Node childNode = list.item(j);
                if (childNode.getNodeType() == Node.TEXT_NODE
                        || childNode.getNodeType() == Node.CDATA_SECTION_NODE) {
                    response = childNode.getNodeValue();
                    return response;
                }
            }
        }
        return "";
    } 
```

# clojure - 使用 clojure.algo.monads 编写一个可能是序列的 monad

> ID：12329964
> 
> 赞同：0
> 
> 时间：2012-09-08T10:37:24.030
> 
> 标签：clojure, monads

我需要帮助来编写“sequence-maybe-m”（一个结合了序列单子和可能单子的行为的单子）。

规则应该是：

*   如果任何输入为 nil，则整个表达式失败。
*   否则，像序列单子一样评估身体。

```
    （domonad 序列-maybe-m [a [1 2 3] b [1 2 3]] (+ ab)）
        ;; => (2 3 4 3 4 5 4 5 6)

    （domonad 序列-maybe-m [a [1 2 3] b nil] (+ ab)）
        ;; => 无

    (domonad 序列-maybe-m [a [1 2 3] b (范围 a)] (+ ab))
        ;; => (1 2 3 3 4 5) 与“for”相同

    （domonad 序列-maybe-m [a [1 2 3] b [1 nil 3]] (+ ab)）
        ;; => 无

```

如果它与 clojure.algo.monads 库兼容，那将是一个奖励：

```
(defmonad sequence-maybe-m
     [m-result <...>
      m-bind   <...>
      m-zero   <...>
      m-plus   <...>
      ]) 
```

其中 <...> 是函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T20:37:36.370

```
; helper function for nil-ness
(defn nil-or-has-nil? [xs] (or (nil? xs) (some nil? xs)))

; the actual monad
(defmonad sequence-maybe-m
          [m-result (fn [v] [v]) ; lift any value into a sequence

           m-bind (fn [mv f] ; given a monadic value and a function
                    (if (nil-or-has-nil? mv) ; if any nil,
                      nil ; result in nil
                      (let [result (map f mv)] ; map over valid input seq
                        (if (some nil? result) ; if any nils result
                          nil ; return nil
                          (apply concat result))))) ; else flatten resulting seq

           m-plus (fn [& mvs] ; given a sequence of mvs
                    (if (some nil-or-has-nil? mvs) ; if any nil,
                      nil ; result in nil
                      (apply concat mvs))) ; otherwise, join seqs

           m-zero []]) ; empty seq is identity for concatenation 
```

这里唯一真正值得关注的`nil-or-has-nil?`是`m-bind`. 第一个是预期的 - 传递了一个单子值，`m-bind`必须确定它是否是`nil`-ish 并且应该立即导致`nil`. 第二个检查计算的结果 - 如果它失败（产生任何`nil`），那么整体结果必须是`nil`（相对于，例如，产生的空列表`(apply concat [nil nil ...])`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T21:19:36.247

的输出`domonad`必须是一元值，在这种情况下`sequence-m`意味着它必须是一个序列。要求输出`nil`中断并且您没有单子。

您可能正在寻找的是直接使用单子转换器将“可能”添加到序列单子中，这很容易做到并在此处描述：http: [//clojuredocs.org/clojure_contrib/1.2.0/clojure.contrib.monads/maybe -t](http://clojuredocs.org/clojure_contrib/1.2.0/clojure.contrib.monads/maybe-t)。

你会想写

```
(def sequence-maybe-m (maybe-t sequence-m)) 
```

where`maybe-t`将“可能”添加到序列单子中。使用这将使

```
(domonad sequence-maybe-m [a [1 2 3] b [1 nil 3]] (+ a b)) 
```

屈服

```
(2 nil 4 3 nil 5 4 nil 6) 
```

这是这种类型的单子的有效输出。如果您需要取消其中包含的结果`nil`，只需`some nil?`在 monad 的输出上使用来检查它们。

按照您在示例中的要求绑定`nil`到`b`

```
(domonad sequence-maybe-m [a [1 2 3] b nil] (+ a b)) 
```

也没有意义，因为`nil`它不是一个序列。在转换后的 monad 中，返回值将是空列表`()`。`[nil]`绑定到会更合适`b`，然后你会得到`(nil nil nil)`.

它有助于记住 monad 用于组合具有相同签名的函数，并且它们本身可以是这种组合的一部分，因此它们必须自己产生 monadic 值（在这种情况下为序列），并且在它们的主体中，任何绑定也必须与一元值。

# c# - 如何让我的程序猜测正确的单词？

> ID：12329965
> 
> 赞同：1
> 
> 时间：2012-09-08T10:37:33.407
> 
> 标签：c#, winforms, algorithm, artificial-intelligence, solver

我有兴趣做一些人工智能/算法探索。所以我有这个想法，做一个简单的应用程序，有点像hang man，我分配一个单词并留下一些字母作为线索。但是，我不想让用户猜测这个词，而是让我的应用程序尝试根据我留下的线索来弄清楚它。有谁知道我应该从哪里开始？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:40:54.337

创建所需语言的单词数据库（索引维基百科转储）。
这可能不应该超过 100 万字。

然后你可以简单地查询一个数据库：

例如：fxxulxxs

--> **SELECT * FROM T_Words WHERE word LIKE f__ul__s**

--> 棒极了

如果返回集中的单词超过 1 个，则需要返回统计上最常用的单词。

另一种方法是看一下 nhunspell

如果您想进行更多分析，您需要找到一种统计方法来关联词干、结尾和开头，或者基本上是衡量单词相似度的方法。

语言研究表明，当你只有开头和结尾时，你可以很容易地阅读单词。如果你只有中间，那就很难了。

![在此处输入图像描述](../Images/5b7f6aa09c7f5b8d4310917e8941a479.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T21:59:04.837

您可能想查看某种形式的测量*编辑距离*的算法，例如[Damerau-Levenshtein distance (wikipedia)](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance)。这通常用于在几个单词中找到与其他给定单词最匹配的一个单词。

在处理 DNA 和蛋白质序列时，它经常用于搜索和比较，但在您的情况下也可能有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T10:46:14.793

第一步是构建一个包含所有有效单词的数据结构，并且可以轻松查询该数据结构以检索与当前模式匹配的所有单词。然后使用这个匹配词列表，您可以计算最常见的字母以获得下一个候选词。另一种方法可能是找到将给出最小的下一个匹配词集的字母。

```
next_guess(pattern, played_chars, dictionary)
  // find all the word matching the pattern and not containing letters played
  // not in the pattern
  words_set = find_words_matching(pattern, played_chars, dictionary)

  // build an array containing for each letter the frequency in the words set
  letter_freq = build_frequency_array(words_set)

  // build an array containing the size of the words set if ever the letter appears at least once
  // in the word (I name it its power)
  letter_power = build_power_array(words_set)

  // find the letter minimizing a function (the AI part ?)
  // the function could take last two arrays in account
  // this is the AI part.
  candidate = minimize(weighted_function, letter_freq, letter_power) 
```

# java - 使用 matcher.group(index) 获得意外结果

> ID：12329967
> 
> 赞同：1
> 
> 时间：2012-09-08T10:37:50.583
> 
> 标签：java, regex

我有以下字符串和模式：

```
String  = <html><body><input type="hidden" name="AvailabilityInputScheduleSelectView$market1" value="5~76AB~|VY~8001~"></input></body></html>
Pattern = AvailabilityInputScheduleSelectView$market1" value="(.*)|VY~(.*)~ 
```

我期望：

> m.group(0) = 5~76AB~ (匹配第一个 (.*) 的字符)
> 
> m.group(1) = 8001（匹配第二个 (.*) 的字符）

但我得到：

> m.group(0) = VY~8001~
> 
> m.group(1) = null
> 
> m.group(2) = 8001

如果我只有 2 个模式 (.*)，我怎样才能得到 3 个组 (0,1,2)？

我尝试了很多组合，但我无法获得预期的结果。

我不知道在模式中使用不允许的字符是否有问题。我尝试使用引用方法，但它不起作用。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:41:00.707

`group(0)`总是返回整个匹配的表达式，和`group()`不带参数调用一样。然后
，您的两组将分别分组。 `1``2`

您的一个组的原因`null`是因为`|`，它在正则表达式中具有特殊含义，意思是`or`。由于每次只有一侧`or`会匹配，要么 要么`group(1)`将`group(2)`return `null`，取决于哪一侧不匹配。要获得您期望的结果，请将 , 更改`|`为, 以逐字`\\|`匹配字符。`|`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:58:07.177

在字符串的末尾添加了转义符`$`和并开始。`|`

```
String str = "<html><body><input type=\"hidden\" name=\"AvailabilityInputScheduleSelectView$market1\" value=\"5~76AB~|VY~8001~\"></input></body></html>";
Matcher m = Pattern.compile(".*AvailabilityInputScheduleSelectView\\$market1\" value=\"(.*)\\|VY~(.*)~.*").matcher(str);
if (m.matches()) {
    System.out.println("Everything " + m.group(0));
    System.out.println("1st group: " + m.group(1));
    System.out.println("2nd group: " + m.group(2));
} 
```

输出：

```
Everything <html>..
1st group: 5~76AB~
2nd group: 8001 
```

虽然使用正则表达式解析 HTML 确实是个[坏主意](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

# java - 使用兼容性 API

> ID：12329969
> 
> 赞同：0
> 
> 时间：2012-09-08T10:37:53.250
> 
> 标签：java, android, osx-lion

我正在尝试使用兼容性 API (android.support.v4.app) 我已经下载了它们，现在正尝试在我的项目中使用它们，如下所述：http: [//developer.android.com/tools/extras/support -library.html](http://developer.android.com/tools/extras/support-library.html)，即将库复制到我的项目“libs”文件夹，然后右键单击文件并“添加到构建路径”。但是，eclipse 似乎没有注意到这一点，它无法识别，在我的示例“FragmentActivity”中，它是在我刚刚添加到我的构建路径的 FragmentActivity.jar 中定义的，此外，在语句“import android.support.v4”中。 app.FragmentActivity;', android.support 仍然是红色下划线。我已经尝试清理我的项目，重新启动 eclipse 和我的 mac 多次无济于事。我用的是MAC OSX Lion + indigo+r20 哦！并将库一一添加到我的代码树中既不整洁也不实用，因为它会导致冲突。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:46:00.450

如果您添加了库，那么您只需要确保您正在导入正确的内容。

如果我想使用兼容性库，我会采取以下步骤：

**1.**新建项目

**2.**右键项目>Android工具>添加支持库

**3.**添加这两行代码

`FragmentManager fragmentManager = getFragmentManager(); FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();`

**4.**通过将鼠标悬停在红线上并选择 v4 库来添加正确的导入。

不过，我很确定最新版本的 SDK 和 ADT 按标准添加了支持库，从而减少了第**2**步。

*注意：*您不必右键单击项目 > 属性 > Android > 并添加支持库。这仅适用于其他库，如 ActionBarSherlock 或您找到的任何其他库。

# android - 如何为我的图像视图设置填充？

> ID：12329970
> 
> 赞同：0
> 
> 时间：2012-09-08T10:38:06.930
> 
> 标签：android, imageview, padding

我创建了发光效果 imageview 应用程序。它工作正常，我的问题是发光效果左，右，下，顶部有点隐藏，所以我正在尝试设置填充，但我仍然有同样的问题。如何解决这个问题呢？

代码：

```
ImageView mImageBk = (ImageView)itemTemplate.findViewById(R.id.imgBk);
RelativeLayout.LayoutParams ImgBKLayoutParams = new RelativeLayout.LayoutParams(scrWidth/8 + scrWidth/20, scrWidth/8 + scrWidth/20 );
ImgBKLayoutParams.leftMargin =0;
ImgBKLayoutParams.topMargin = 0;
mImageBk.setLayoutParams(ImgBKLayoutParams);
mImageBk.setImageResource(R.drawable.glow_effect);
mImageBk.setPadding(10, 10, 10, 10);
mImageBk.setVisibility(View.GONE); 
```

完整代码：

```
public class tttAdapter extends BaseAdapter{
    private Context mContext;
    private int scrWidth=0;
    private int scrHeight=0;
    private int scrDpi = 0;
    private boolean setInvisible = false;
    private boolean visibleConf[];
    private boolean selected[];
    private boolean innerListView = false;

    private int[] IMAGE_IDS = {  
            R.drawable.s_record, R.drawable.s_record
    };  
    private String[] title = {
            "Tv", "My Favorites List1"
    };

    private String[] detail = {
            "Tv", "My Favorites List1"  
            };

    public favoritesAdapter(Context context) {
        mContext = context;
        visibleConf = new boolean[IMAGE_IDS.length];
        selected = new boolean[IMAGE_IDS.length];
    }

    public void updateImageSize(int width, int height, int dpi) {
        scrWidth= width;
        scrHeight = height;
        scrDpi = dpi;

    }
    public void setTextVisible(int position){
        if(IMAGE_IDS.length <= position)
            return;

        for(int i=0; i < IMAGE_IDS.length; i++) {
            visibleConf[i] = false;
        }

        visibleConf[position] = true;
    }
    public int getCount() {
        return IMAGE_IDS.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public void setTextInvisible(int position) {
        visibleConf[position] = false;
    }

    public void setInnerViewVisible(boolean enable) {
        innerListView = enable;
    }

    public void unsetSelectedItem(int position) {
        for(int i=0; i < IMAGE_IDS.length; i++) {
            selected[i] = false;
        }
    }

    public void setSelectedItem(int position) {
        for(int i=0; i < IMAGE_IDS.length; i++) {
            selected[i] = false;
        }

        selected[position] = true;
    }

    public View getView(int position, View view, ViewGroup parent) {
        LayoutInflater inflater = LayoutInflater.from(mContext);
        View itemTemplate = inflater.inflate(R.layout.list_item, null);

        ImageView mImageBk = (ImageView)itemTemplate.findViewById(R.id.imgBk);
        RelativeLayout.LayoutParams ImgBKLayoutParams = new RelativeLayout.LayoutParams(scrWidth/8 + scrWidth/20, scrWidth/8 + scrWidth/20 );
        ImgBKLayoutParams.leftMargin =0;
        ImgBKLayoutParams.topMargin = 0;
        mImageBk.setLayoutParams(ImgBKLayoutParams);
        mImageBk.setImageResource(R.drawable.glow_effect);
        mImageBk.setPadding(10, 10, 10, 10);
        mImageBk.setVisibility(View.GONE);

        ImageView mImage = (ImageView)itemTemplate.findViewById(R.id.img);
        RelativeLayout.LayoutParams ImgLayoutParams = new RelativeLayout.LayoutParams(scrWidth/8 , scrWidth/8 );
        ImgLayoutParams.leftMargin = scrWidth/38;
        ImgLayoutParams.topMargin = scrWidth/38;

        mImage.setLayoutParams(ImgLayoutParams);
        mImage.setImageResource(IMAGE_IDS[position]);
        mImage.bringToFront();

        TextView mTextTitle = (TextView)itemTemplate.findViewById(R.id.title);
        mTextTitle.setClickable(false);
        mTextTitle.setEnabled(true);
        mTextTitle.setText(title[position]);

        TextView mTextDetail = (TextView)itemTemplate.findViewById(R.id.detail);
        mTextDetail.setClickable(false);
        mTextDetail.setEnabled(true);
        mTextDetail.setText(detail[position]);      

        if(selected[position] == true) {
            ImageView mArrowImg = (ImageView)itemTemplate.findViewById(R.id.imgArrow);
            //mArrowImg.setLayoutParams(new RelativeLayout.LayoutParams(scrWidth/32, scrHeight/32));
            RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(scrWidth/32, scrHeight/32);
            layoutParams.leftMargin = scrWidth / 8;
            layoutParams.topMargin = scrWidth / 16;
            mArrowImg.setLayoutParams(layoutParams);
            mArrowImg.setImageResource(R.drawable.arrow);           
            mImage.setBackgroundResource(R.drawable.test_glowb);
            mTextTitle.setVisibility(View.GONE);
            mTextDetail.setVisibility(View.GONE);
            mImageBk.setVisibility(View.VISIBLE);
        } else {
            if(innerListView == true) {
                mImage.setVisibility(View.GONE);
            }
        }

        if(visibleConf[position] == true) {
            mTextTitle.setTextSize((scrWidth*160) / (30 * scrDpi));
            mTextDetail.setTextSize((scrWidth*160) / (50 * scrDpi));                        
            mTextTitle.setTypeface(null,Typeface.BOLD);
            mTextDetail.setTypeface(null,Typeface.BOLD);
            mImageBk.setVisibility(View.VISIBLE);

        } else {

            mTextTitle.setTextSize((scrWidth*160) / (40 * scrDpi));
            mTextDetail.setTextSize((scrWidth*160) / (70 * scrDpi));
            //mTextTitle.setVisibility(View.GONE);
            //mTextDetail.setVisibility(View.GONE);         
            mImage.setAlpha(150);
        }

        if(innerListView == true) {
            mTextTitle.setVisibility(View.GONE);
            mTextDetail.setVisibility(View.GONE);
        }
        return itemTemplate;
    }
} 
```

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/thumb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="3dip"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip">

        <ImageView
            android:id="@+id/img"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

         <ImageView
            android:id="@+id/imgBk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

    </RelativeLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14dip"
        android:layout_marginTop="30dp"
        android:layout_centerInParent="true"
        android:layout_toRightOf="@+id/thumb"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/thumb"
            android:layout_toRightOf="@+id/thumb"
            android:layout_centerVertical="true"
            android:textColor="#ffffff" />

        <TextView
            android:id="@+id/detail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/thumb"     
            android:layout_alignParentBottom="true"
            android:textColor="#ffffff" />

        <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/imgArrow"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"/>  
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T11:55:18.400

我认为您想要边距而不是填充（对于 imageView），因为填充会在视图的内容中放置空格，这意味着显示任何内容的空间更少。

边距在视图之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:38:31.193

确保您为 imageview 小部件而不是布局容器设置边距/填充。

# php - CAKEPHP 1.2 复选框

> ID：12329973
> 
> 赞同：0
> 
> 时间：2012-09-08T10:39:13.790
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-2.0, cakephp-1.2

从数据库中的列获取复选框的多个值时遇到问题。

在我的数据库中，我在一列中得到了“9,10”的值

但是，在编辑视图中我只得到了 9，这意味着只有值为 9 的复选框被选中。

我如何确保在编辑视图中选中了值 9 和 10 的复选框

我想我需要爆炸 9,10 的值。但我不知道我该怎么做。

控制器

```
 <?php $categories = $this->Product->Category->find('list',array('conditions' =>    
 array('parent_id !=' => 0),'order' => array('Category.name ASC')));

 $this->set(compact('subcategories')); 
 ?> 
```

查看 (admin_edit)

```
 <?php 
 echo $form->create('Product', array('action' => 
 'edit','class'=>'cmxform','id'=>'form2','type' => 'file'));

 echo $form->input('category_id', array('multiple' => 'checkbox', 'label' => 
 false,'validate'=>'required:true','options'=>$categories)); 

 echo $form->end('Save',array('class' => 'btn')); 
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T11:24:52.843

您可以在模型 afterFind() 回调中分解它：http: [//book.cakephp.org/2.0/en/models/callback-methods.html#afterfind](http://book.cakephp.org/2.0/en/models/callback-methods.html#afterfind)

# javascript - 更改字段值时如何运行函数？

> ID：12329974
> 
> 赞同：0
> 
> 时间：2012-09-08T10:39:34.253
> 
> 标签：javascript, jquery

早上好，正如标题所示，如何在更改字段的值时运行函数（JavaScript）（编译时为空）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:41:10.813

像这样试试

```
$('document').ready(function(){
   $('#select_id').change(function(){
       //Do your code here
  });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-08T10:51:01.350

您还可以添加更好的

```
$('document').ready(function(){
     $('select_id').live('change',function(){
          //Do your code
 });
}) 
```

它会更好，也更值得推荐

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T10:40:43.747

如果你想检查每个按键然后

**使用 javascript**

```
<input type="text" id="textbox" onkeyup="TextBoxChanged()" />

function TextBoxChanged(){
   alert("changed");
} 
```

**用 jquery**

这需要您导入要在网页中导入的[jquery文件。](http://docs.jquery.com/Downloading_jQuery)

**[现场演示](http://jsfiddle.net/rajaadil/9yyPP/)**

```
$(document).ready(function(){
  $('#textbox').keyup(function() {
      alert("changed");
  });​
}); 
```

将更改事件与文本框绑定，这将在文本框失去焦点时引发事件。

```
<input type="text" id="textbox" />
$(document).ready(function(){
   $('#textbox').change(function(){
      alert("changed");
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-08T10:46:12.807

您首先像这样为输入字段定义一个 id 或类

```
<input type="text" id="myId" /> 
```

然后你像这样将一个函数绑定到他的更改事件

```
function myFunction(){
  // Your function here !
}
$('#myId').change(function(){
   // Your function call here
   myFunction();
}); 
```

# unix - Shell 脚本 UNIX 中的 HTML

> ID：12329975
> 
> 赞同：1
> 
> 时间：2012-09-08T10:39:41.327
> 
> 标签：unix

```
val=Mumbai

cat << 'EOF' > pkll1.htm
<html> 
<head>
<title>HTML</title>
</head>
<body>
<h1>$val</h1>
while read line
do
val1=`echo $line`
<p>$val1</p>
done<myfile.dat
</body>
</html>
EOF 
```

上面的代码显示如下输出而不是实际值：

```
$val
while read line do val1=`echo $line` 
$val1

done 
```

如何以正确的方式执行它？请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-08T10:45:07.807

在单独的块中执行此操作，代码在中间。

```
val=Mumbai
file=pkll1.htm

cat <<EOF1 > $file
<html> 
<head>
<title>HTML</title>
</head>
<body>
<h1>$val</h1>
EOF1

while read line; do
  val1=`echo $line`
  echo "<p>$val1</p>" >> $file
done < myfile.dat

cat <<EOF2 >> $file
</body>
</html>
EOF2 
```

# c# - 禁用点击第 3 方应用程序

> ID：12329976
> 
> 赞同：0
> 
> 时间：2012-09-08T10:39:55.680
> 
> 标签：c#, .net, winapi

我正在编写一个应用程序，它需要使用鼠标在另一个窗口的顶部记录屏幕上的点击位置。有没有办法禁用鼠标点击，以免影响被点击的窗口？

例如，我想在浏览器顶部设置一个点，但我不想在设置时单击浏览器中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T11:10:50.200

你有几个选择：

1.  为您正在谈论的浏览器编写插件/扩展。也许浏览器的界面允许你记录这些信息
2.  使用窗户挂钩。使用`SetWindowsHookEx`和`WH_MOUSE_LL`，您可以相当简单地获得计算机上的所有鼠标活动。您只需要检查鼠标活动是否在浏览器中发生，使用[`WindowFromPoint`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633558%28v=vs.85%29.aspx).

# c# - 异常错误对话框

> ID：12329980
> 
> 赞同：1
> 
> 时间：2012-09-08T10:40:19.830
> 
> 标签：c#, .net, windows, vb.net

我想知道为什么在 .NET（C# 或 VB.NET 应用程序）中发生未处理的异常时，为什么在某些计算机上会显示不同的对话框。

例如，在某些计算机上，它显示类似于：

![第一个示例对话框](../Images/d4776520eca397b1d0fce01dd80f1e0a.png)

而在其他人身上，它显示如下：

![第二个示例对话框](../Images/ebcce38a655fc9ce3b3e0834417a1883.png)

我想在将我的应用程序用于某些特定目的的所有系统中的第二个（您的应用程序中发生未处理的异常）中显示它。

请不要建议使用全局异常处理方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T10:50:16.613

好吧，您标记为正确的行为可以通过启用和禁用 JIT（即时调试器）来控制。

也许这可以帮助你，或者只是让你走上正确的轨道：[MSDN: How to: Enable/Disable Just-In-Time Debugging](http://msdn.microsoft.com/en-us/library/k8kf6y2a%28v=vs.80%29.aspx)

我没有任何建议，但实践是最终用户***永远不***应该得到这种异常，尤其是堆栈跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T10:50:22.673

一些应用程序启用了 JIT 调试：

[http://msdn.microsoft.com/en-us/library/5hs4b7a6.aspx](http://msdn.microsoft.com/en-us/library/5hs4b7a6.aspx)

具体来说，在 .NET app.config 中，您可以添加：

```
<configuration>
    <system.windows.forms jitDebugging="true" />
</configuration> 
```

# python - 分配给看起来像元组的东西时创建的变量的生命周期

> ID：12329983
> 
> 赞同：1
> 
> 时间：2012-09-08T10:40:44.183
> 
> 标签：python, variables, tuples

有这个代码：

```
>>> (a, b) = (2, 3)
>>> a
2
>>> b
3 
```

为什么创建元组后变量**a**和**b**仍然存在？我的意思是这里：

```
(a, b) = (2, 3) 
```

创建了一些元组并且该元组未分配给任何变量，因此垃圾收集器应在此行之后立即销毁该元组。

变量**a**和**b**只是这个元组的引用 - 所以如果这个元组**(a, b)**被销毁，那么变量**a**和**b**也应该被销毁。

那么为什么在定义元组之后这些变量仍然存在呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:44:05.880

```
(a, b) = (2, 3) 
```

不创建元组，而是分配两个变量`a`和`b`.

它相当于：

```
a,b = 2,3 
```

并设置`a=2`和`b=3`“同时”。这很有用，例如在切换变量时：

```
a,b = b,a 
```

这将设置`a=3`和`b=2`（如果按顺序完成，则需要一个临时变量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-08T10:43:57.697

解析器不会将`(a, b)`其视为元组，尽管它确实会为您进行元组解包。因此，没有要创建的元组，更不用说销毁了。相反，python 将其视为两个单独的变量`a`和`b`.

如果您要反汇编语句的编译字节码，您可以看到这一点：

```
>>> import dis
>>> def foo():
...     (a, b) = (2, 3)
... 
>>> dis.dis(foo)
  2           0 LOAD_CONST               3 ((2, 3))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               0 (a)
              9 STORE_FAST               1 (b)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE 
```

常量`(2, 3)`被解包，然后存储到局部变量`a`和`b`.

# php - 托管网络应用程序

> ID：12329984
> 
> 赞同：-2
> 
> 时间：2012-09-08T10:40:48.050
> 
> 标签：php

在 php 中仍然是新的，这是我的第二个应用程序，我决定尝试实现它，所以我下载了一个模板并将其链接到同一个文件并尝试托管它，但在线应用程序不会打开，而是下载一个 php 文件。我已经尝试了可以​​通过网络资源获得的所有其他选项，但没有一个对我有用。我正在使用一个免费域，它引用了我的 Dropbox 公共文件中 html 网站的索引文件的链接

该网站是[www.kenyandrive.tk](http://www.kenyandrive.tk)在线测试是链接网络应用程序的地方...使用用户，用户登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:48:59.027

似乎 PHP 解释器配置不正确，或者您的主机没有该选项。尝试联系主机以获取有关其服务的更多信息，以查看他们是否提供您需要的工具。即使它是免费托管，他们通常也提供 PHP 功能，请检查它是否像文件中的 *.php 扩展名这样简单。

# android - Android：创建自定义 3 状态切换按钮的问题

> ID：12329987
> 
> 赞同：3
> 
> 时间：2012-09-08T10:40:57.557
> 
> 标签：android, android-layout, android-custom-view

我正在尝试通过覆盖`Button`类来创建一个 3 状态切换按钮。

虽然代码中没有错误，但 Eclipse 在布局 xml 中显示以下问题。

无法实例化以下类：

```
- com.example.threewaytoggle.TriToggleButton (Open Class, Show Error Log)
See the Error Log (Window > Show View) for more details.
Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

在错误日志中，这是：

```
com.example.threewaytoggle.TriToggleButton failed to instantiate.

java.lang.NullPointerException
at android.view.View.mergeDrawableStates(View.java:7506)
at com.example.threewaytoggle.TriToggleButton.onCreateDrawableState(TriToggleButton.java:42)
at android.view.View.getDrawableState(View.java:7410)
at android.view.View.setBackgroundDrawable(View.java:7583).... 
```

以下是代码： **布局 xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.example.threewaytoggle.TriToggleButton
        android:id="@+id/triToggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TriToggleButton" />
</LinearLayout> 
```

**自定义按钮类：**

```
package com.example.threewaytoggle;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.Button;

public class TriToggleButton extends Button {

    int _state = 0;
    public TriToggleButton(Context context) {
        super(context);
        _state = 0;
        this.setText("1");
    }

    public TriToggleButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        _state = 0;
        this.setText("1");
    }

    public TriToggleButton(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        _state = 0;
        this.setText("1");
    }

    private final int[] STATE_ONE_SET = { R.attr.state_one };
    private final int[] STATE_TWO_SET = { R.attr.state_two };
    private final int[] STATE_THREE_SET = { R.attr.state_three };

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 3);

        if (_state == 0) {
            mergeDrawableStates(drawableState, STATE_ONE_SET);
        } else if (_state == 1) {
            mergeDrawableStates(drawableState, STATE_TWO_SET);
        } else if (_state == 2) {
            mergeDrawableStates(drawableState, STATE_THREE_SET);
        }

        return drawableState;
    }

    @Override
    public boolean performClick() {
        nextState();
        return super.performClick();
    }

    private void nextState() {
        _state++;
        if (_state > 2) {
            _state = 0;
        }
        setButtonText();
    }

    private void setButtonText() {
        //TODO      
    }

    public int getState() {
        return _state;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T13:16:02.390

找到它....只有静态丢失了：

```
private static final int[] STATE_ONE_SET = { R.attr.state_one };
private static final int[] STATE_TWO_SET = { R.attr.state_two };
private static final int[] STATE_THREE_SET = { R.attr.state_three }; 
```

但这怎么会造成问题……？

# nhibernate - NHibernate 查询异常，任何机构帮助我？

> ID：12329997
> 
> 赞同：0
> 
> 时间：2012-09-08T10:42:00.890
> 
> 标签：nhibernate

我遇到了一个问题，代码看起来很简单，但是异常：

```
 DDS.Model.ATest atest = new DDS.Model.ATest();
        atest.AID = Guid.NewGuid();

        ISession session = SessionProvider.GetNewSession();
        using (ITransaction transaction = session.BeginTransaction())
        {
            session.SaveOrUpdate(atest);

            int count = session.CreateQuery("from ATest").List().Count;
            //Above row throw a exception:
            //Batch update returned unexpected row count from update; actual row count: 0; expected: 1

            transaction.Commit();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T10:48:48.430

您正在尝试在保存之前加载项目。先提交事务，然后执行查询。

```
DDS.Model.ATest atest = new DDS.Model.ATest();
//atest.AID = Guid.NewGuid(); // You should not assign IDs by yourself

ISession session = SessionProvider.GetNewSession();
using (ITransaction transaction = session.BeginTransaction())
{
    session.SaveOrUpdate(atest);
    transaction.Commit();
}

int count = session.CreateQuery("from ATest").List().Count; 
```

但这似乎不是你的问题。我相信您已将 ID 映射为 Guid 或 Guid.comb。您不应将该值分配给 ID。NHibernate 会处理这个问题。

当您分配值并调用 session.SaveOrUpdate() 时，它将尝试进行更新，因为 ID 值不是`Guid.Empty`。更新方法将失败，并出现以下异常：*批量更新从更新返回了意外的行数；实际行数：0；预期： 1*，因为`UPDATE ... WHERE AID = <some guid>`将被执行。