# StackOverflow 问答 12116000-12116999

# javascript - Jquery UI Dialog多个对话框创建问题

> ID：12116000
> 
> 赞同：2
> 
> 时间：2012-08-24T20:12:00.947
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我在这里和互联网上搜索了几乎所有东西，但我无法让这段代码工作。当用户单击 php 生成的链接加载另一个页面并且它有一个表单等时，我试图打开对话框。单击某个链接，它将生成一个弹出窗口，将其关闭，然后单击其他一些或相同的链接，它不会打开弹出窗口。

这就是我的 html 的生成方式

```
echo '<div class=product_name><a href="edit_order.php?order_number='.$order_numbers.'&product_id='.$row['id'].'&quantity='.$row['quantity'].'&sale_price='.$row['sale_price'].'&id='.$row['order_product_id'].'" style="text-decoration: none" title="View Details"><h3>'.$row['productname'].'</h3></div>
    <div class=quantity><h3>'.$row['quantity'].'</h3></div>
    <div class=sale_price><h3>'.$row['sale_price'].'</h3></div></a>'; 
```

页面上的 Jquery 代码：

```
<script type="text/javascript" src="jquery/jquery-1.8.0.min.js"></script>

<script src="ui/jquery.ui.core.js"></script>
<script src="ui/jquery.ui.widget.js"></script>
<script src="ui/jquery.ui.mouse.js"></script>
<script src="ui/jquery.ui.draggable.js"></script>
<script src="ui/jquery.ui.position.js"></script>
<script src="ui/jquery.ui.resizable.js"></script>
<script src="ui/jquery.ui.dialog.js"></script>

<script>
$(function() {

    $('.dialog').dialog({
        modal: true,
        height: 200,
        autoOpen: false,
        closeOnEscape: true,
        hide: "slide",
        open: function(event, ui) {
            var url = $('.header a').attr('href');
            alert(url);
            $(".dialog").load(url); //use the previously saved id
        },
        close: function(event, ui) {
            alert("ali");
            $(this).dialog('destroy').remove();
        }
    });

    $('.header a').bind("click", function(event) {
        event.preventDefault();
        $('.dialog').dialog('open');
    });
}); 
</script> 
```

来自 Firefox 的实际 HTML Ctrl + u：

```
<script type="text/javascript" src="jquery/ko.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<script>
//custom binding to initialize a jQuery UI button
ko.bindingHandlers.jqButton = {
    init: function(element, valueAccessor) {
        var options = ko.utils.unwrapObservable(valueAccessor()) || {};

        //handle disposal
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).button("destroy");
        }); 

        $(element).button(options);  
    }    
};

ko.bindingHandlers.showModal = {
    init: function(element, valueAccessor) {
        var value = valueAccessor();
        $(element).dialog({
            close: function() {
                if (ko.isWriteableObservable(value)) {
                   value(null);   
                }
            }
        }); 

        //handle disposal
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).dialog("destroy");
        }); 
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).dialog(value ? "open" : "close");   
    }
};

//wrapper to an observable that requires accept/cancel
ko.protectedObservable = function(initialValue) {
    //private variables
    var _actualValue = ko.observable(initialValue);
    var _tempValue = initialValue;

    //dependentObservable that we will return
    var result = ko.dependentObservable({
        //always return the actual value
        read: function() {
           return _actualValue(); 
        },
        //stored in a temporary spot until commit
        write: function(newValue) {
             _tempValue = newValue; 
        }
    }); 

    //if different, commit temp value
    result.commit = function() {
        if (_tempValue !== _actualValue()) {
             _actualValue(_tempValue); 
        }  
    };

    //force subscribers to take original
    result.reset = function() {
        _actualValue.valueHasMutated();
        _tempValue = _actualValue();   //reset temp value 
    };

    return result;
};

function Item(id, name) {
  this.id = id;
  this.name = ko.protectedObservable(name);  
}

function ViewModel() {
    var self = this;
    self.items = ko.observableArray([
        new Item(1, "one"),
        new Item(2, "two"),
        new Item(3, "three")
    ]);

    self.selectedItem = ko.observable();

    self.accept = function() {
       self.selectedItem().name.commit();
       self.selectedItem(null);
    };

    self.cancel = function() {
       self.selectedItem().name.reset();
       self.selectedItem(null);
    }
};

ko.applyBindings(new ViewModel());

$("#items").delegate(".item", "click", function() {
    var context = ko.contextFor(this);
    context.$root.selectedItem(context.$data);
    return false;
});

$(function() {
    $('.dialog').dialog({
        modal: true,
        height: 200,
        autoOpen: false,
        closeOnEscape: true,
        hide: "slide",
        open: function(event, ui) {
            var url = $('.header a').attr('href');
            alert(url);
            $(".dialog").load(url); //use the previously saved id
        }
    });

    //alert('');
    $('.header a').bind("click", function(event) {
         event.preventDefault();
         $('.dialog').dialog('open');
        //$('#dialog').load(url);
    });
});    
â€‹&lt;/script>
<link href="style/style.css" rel="stylesheet" type="text/css" />
<link href="style/base/jquery.ui.dialog.css" rel="stylesheet" type="text/css" />
<div id="style">
    <div class="dialog"></div>
<div id=header1><div class=header><div class=order_number><h1>Order Number:</h1><h3>1000</h3></div><div class=h2><h2>Products</h2></div><br />
                     <div class=container><div class=product_name><h3>Products</h3></div>
             <div class=quantity><h3>Quantity</h3></div>
             <div class=sale_price><h3>Sale Price</h3></div><div class=product_name><a href="edit_order.php?order_number=1000&product_id=14&quantity=8619&sale_price=98769&id=66" style="text-decoration: none" title="View Details"><h3>Valium Diazepam</h3></a></div>
             <div class=quantity><h3>8619</h3></div>
             <div class=sale_price><h3>98769</h3></div><div class=product_name><a href="edit_order.php?order_number=1000&product_id=41&quantity=1264&sale_price=193248&id=77" style="text-decoration: none" title="View Details"><h3>hhhha</h3></a></div>
             <div class=quantity><h3>1264</h3></div>
             <div class=sale_price><h3>193248</h3></div><div class=product_name><a href="edit_order.php?order_number=1000&product_id=37&quantity=-1435&sale_price=1302&id=78" style="text-decoration: none" title="View Details"><h3>Tamezepaam</h3></a></div>
             <div class=quantity><h3>-1435</h3></div>
             <div class=sale_price><h3>1302</h3></div></div></div><div class=header><div class=order_number><h1>Order Number:</h1><h3>128</h3></div><div class=h2><h2>Products</h2></div><br />
                     <div class=container><div class=product_name><h3>Products</h3></div>
             <div class=quantity><h3>Quantity</h3></div>
             <div class=sale_price><h3>Sale Price</h3></div><div class=product_name><a href="edit_order.php?order_number=128&product_id=37&quantity=-1435&sale_price=1568&id=81" style="text-decoration: none" title="View Details"><h3>Tamezepaam</h3></a></div>
             <div class=quantity><h3>-1435</h3></div>
             <div class=sale_price><h3>1568</h3></div></div></div><div class=header><div class=order_number><h1>Order Number:</h1><h3>200</h3></div><div class=h2><h2>Products</h2></div><br />
                     <div class=container><div class=product_name><h3>Products</h3></div>
             <div class=quantity><h3>Quantity</h3></div>
             <div class=sale_price><h3>Sale Price</h3></div><div class=product_name><a href="edit_order.php?order_number=200&product_id=37&quantity=-1435&sale_price=14400&id=70" style="text-decoration: none" title="View Details"><h3>Tamezepaam</h3></a></div>
             <div class=quantity><h3>-1435</h3></div>
             <div class=sale_price><h3>14400</h3></div></div></div><div class=header><div class=order_number><h1>Order Number:</h1><h3>300</h3></div><div class=h2><h2>Products</h2></div><br />
                     <div class=container><div class=product_name><h3>Products</h3></div>
             <div class=quantity><h3>Quantity</h3></div>
             <div class=sale_price><h3>Sale Price</h3></div><div class=product_name><a href="edit_order.php?order_number=300&product_id=37&quantity=-1435&sale_price=1344&id=73" style="text-decoration: none" title="View Details"><h3>Tamezepaam</h3></a></div>
             <div class=quantity><h3>-1435</h3></div>
             <div class=sale_price><h3>1344</h3></div><div class=product_name><a href="edit_order.php?order_number=300&product_id=14&quantity=8619&sale_price=1344&id=80" style="text-decoration: none" title="View Details"><h3>Valium Diazepam</h3></a></div>
             <div class=quantity><h3>8619</h3></div>
             <div class=sale_price><h3>1344</h3></div></div></div></div> 
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:23:50.637

问题是在带有参数`dialog`的关闭回调中调用方法。`destroy`你有：

```
close: function(event, ui) {
    alert("ali");
    $(this).dialog('destroy');
} 
```

在你内部调用`$(this).dialog('destroy');`这就是为什么它只工作一次。

那是对我有用的代码，尝试用它代替你的代码：

```
<script>
$(function() {
    $('.dialog').dialog({
        modal: true,
        height: 200,
        autoOpen: false,
        closeOnEscape: true,
        hide: "slide",
        open: function(event, ui) {
            var url = $('.header a').attr('href');
            //alert(url);
            $(".dialog").load(url); //use the previously saved id
        }
    });

    $('.header a').bind("click", function(event) {
        event.preventDefault();
        $('.dialog').dialog('open');
        //$('#dialog').load(url);
    });
}); 
</script> 
```

这是一个[小提琴](http://jsfiddle.net/hnm2n/12/)

# php - 为什么这个数据库连接这么慢？

> ID：12116002
> 
> 赞同：0
> 
> 时间：2012-08-24T20:12:05.780
> 
> 标签：php, mysql, database

我的网站有这个关于页面的链接列表，可以点击不同的类。这些链接显然会将您带到不同的子内容。为什么这些链接有不同的类？因为我使用 javascript 和 jquery，从数据库中获取一些内容并将其放入 div 中而无需重新加载...数据库有 3 个字段：id、标题和内容。

javascript 工作正常。它做它应该做的事情。它采用链接的类（这是数据库中的一个 ID）并使用它来获取正确的内容。

基本上：

```
<?php
//take the post'ed variable you've been given.
if(isset($_POST['id']));

//for convenience use this variable insted
$id =  $_POST['id'];

//connect to the database
mysql_connect("localhost","root","") or die('Could not connect: ' . mysql_error());

//select database
mysql_select_db("ropox");
mysql_query("SET NAMES utf8");

//Grab this data    
$query = mysql_query("SELECT * FROM about WHERE id=$id");
while($row = mysql_fetch_array($query))
{

//echo it bask to the original page. This is printed on the original page
echo $row['content'];
}
?> 
```

当您单击链接时，需要 1,03 秒后内容才会出现在页面上。起初它是 2 秒，但我设法减少了它。我所有的其他数据库连接几乎立即发生，它们甚至通过循环回显大量内容。为什么这么慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:20:05.483

将 sql 写入 phpmyadmin：`Explain SELECT * FROM about WHERE id=5`

如果 id 没有被索引，那么你就有问题了，简单:)

如果您在 about 表中有大量字段，最好使用 field1,field2 而不是 *

这就是加快从 sql 中选择的所有操作，其他是设置和硬件，例如 mysql 服务器有 1Mb 空闲空间来运行您的服务器并且需要进行大量交换，或者您的处理器是 Intel Pentium 1 或 2 之类的那...因为您连接到本地主机，而不是远程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:07:45.913

解决 SQL 注入方面的问题：

> 我如何容易受到 SQL 注入的攻击？用户无法输入自定义值。我知道他们可以更改 ID，但那会有什么乐趣呢？然后它什么都不会加载...

你是`$id`直接从帖子中拉出来的。

```
$id =  $_POST['id']; 
```

假设我们有一个聪明的攻击者，操纵帖子的数据并不困难。@DanielA.White 警告您银行的 SQL 注入攻击类型是您不确定的事实`$id`是一个数字。因此，假设我将`id`帖子中的值设置为：

```
'3; DROP TABLE about;' 
```

现在你遇到了麻烦 - 你引用的表已经消失了。有关更多信息，请参阅[http://xkcd.com/327/](http://xkcd.com/327/)。;)

清理您的输入实际上非常简单 - 只需看这里：[使用 PHP 清理用户输入的最佳方法是什么？](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)

# python - python中的多处理以加速功能

> ID：12116004
> 
> 赞同：3
> 
> 时间：2012-08-24T20:12:08.350
> 
> 标签：python, windows, map, multiprocessing

我对 Python 多处理感到困惑。

我正在尝试加速处理来自数据库的字符串的函数，但我一定误解了多处理的工作原理，因为该函数在分配给工作人员池时比“正常处理”需要更长的时间。

这是我想要实现的一个例子。

```
from time import clock, time
from multiprocessing import Pool, freeze_support

from random import choice

def foo(x):
    TupWerteMany = []
    for i in range(0,len(x)):
         TupWerte = []
          s = list(x[i][3])
          NewValue = choice(s)+choice(s)+choice(s)+choice(s)
          TupWerte.append(NewValue)
          TupWerte = tuple(TupWerte)

          TupWerteMany.append(TupWerte)
     return TupWerteMany

 if __name__ == '__main__':
     start_time = time()
     List = [(u'1', u'aa', u'Jacob', u'Emily'),
        (u'2', u'bb', u'Ethan', u'Kayla')]
     List1 = List*1000000

     # METHOD 1 : NORMAL (takes 20 seconds) 
     x2 = foo(List1)
     print x2[1:3]

     # METHOD 2 : APPLY_ASYNC (takes 28 seconds)
     #    pool = Pool(4)
     #    Werte = pool.apply_async(foo, args=(List1,))
     #    x2 = Werte.get()
     #    print '--------'
     #    print x2[1:3]
     #    print '--------'

     # METHOD 3: MAP (!! DOES NOT WORK !!)

     #    pool = Pool(4)
     #    Werte = pool.map(foo, args=(List1,))
     #    x2 = Werte.get()
     #    print '--------'
     #    print x2[1:3]
     #    print '--------'

     print 'Time Elaspse: ', time() - start_time 
```

我的问题：

1.  为什么 apply_async 比“正常方式”花费更长的时间？
2.  我在地图上做错了什么？
3.  通过多处理来加速此类任务是否有意义？
4.  最后：在我读完这里之后，我想知道 python 中的多处理是否可以在 Windows 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:24:24.560

所以你的第一个问题是没有发生实际的并行性`foo(x)`，你将整个列表传递给函数一次。

1) 进程池的想法是让许多进程对某些数据的不同位进行计算。

```
 # METHOD 2 : APPLY_ASYNC
 jobs = 4
 size = len(List1)
 pool = Pool(4)
 results = []
 # split the list into 4 equally sized chunks and submit those to the pool
 heads = range(size/jobs, size, size/jobs) + [size]
 tails = range(0,size,size/jobs)
 for tail,head in zip(tails, heads):
      werte = pool.apply_async(foo, args=(List1[tail:head],))
      results.append(werte)

 pool.close()
 pool.join() # wait for the pool to be done

 for result in results:
      werte = result.get() # get the return value from the sub jobs 
```

如果处理每个块所需的时间大于启动进程所需的时间，这只会给你一个实际的加速，在四个进程和四个作业要完成的情况下，当然，如果你'我们有 4 个流程和 100 个工作要做。请记住，您正在创建一个全新的 python 解释器四次，这不是免费的。

2) map 的问题是它适用于单独进程中的`foo`每个元素，这将需要相当长的时间。`List1`因此，如果您的池中有 4 个进程`map`将弹出列表中的一个项目四次并将其发送到要处理的进程 - 等待进程完成 - 弹出更多列表的内容 - 等待进程完成。仅当处理单个项目需要很长时间时才有意义，例如，如果每个项目都是指向 1 GB 文本文件的文件名。但就目前而言，map 只会获取列表的单个字符串并将其传递到`foo`as`apply_async`获取列表的一部分的地方。试试下面的代码

```
def foo(thing):
    print thing

map(foo, ['a','b','c','d']) 
```

那是内置的 python 映射，将运行单个进程，但多进程版本的想法完全相同。

根据 JFSebastian 的评论添加：但是，您可以使用`chunksize`参数`map`来指定每个块的近似大小。

```
pool.map(foo, List1, chunksize=size/jobs) 
```

我不知道`map`在 Windows 上是否有问题，因为我没有可用于测试的。

3）是的，鉴于您的问题足够大，可以证明分叉出新的 python 解释器是合理的

4）不能给你一个明确的答案，因为它取决于核心/处理器的数量等，但一般来说它在 Windows 上应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:00:21.717

关于问题 (2) 在 Dougal 和 Matti 的指导下，我弄清楚了哪里出了问题。原始的 foo 函数处理列表列表，而 map 需要一个函数来处理单个元素。

新功能应该是

```
def foo2 (x):
    TupWerte = []
    s = list(x[3])
    NewValue = choice(s)+choice(s)+choice(s)+choice(s)
    TupWerte.append(NewValue)
    TupWerte = tuple(TupWerte)
    return TupWerte 
```

# 以及调用它的块：

```
jobs = 4
size = len(List1)
pool = Pool()
#Werte = pool.map(foo2, List1, chunksize=size/jobs)
Werte = pool.map(foo2, List1)
pool.close()
print Werte[1:3] 
```

感谢所有帮助我理解这一点的人。

**所有方法的结果：** 对于 List * 2 Mio 记录：正常 13.3 秒，与异步并行：7.5 秒，与带有 chunksize 的 map 并行：7.3，没有 chunksize 5.2 秒

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-24T20:30:45.103

如果您有兴趣，这是一个通用的多处理模板。

```
import multiprocessing as mp
import time

def worker(x):
    time.sleep(0.2)
    print "x= %s, x squared = %s" % (x, x*x)
    return x*x

def apply_async():
    pool = mp.Pool()
    for i in range(100):
        pool.apply_async(worker, args = (i, ))
    pool.close()
    pool.join()

if __name__ == '__main__':
    apply_async() 
```

输出如下所示：

```
x= 0, x squared = 0
x= 1, x squared = 1
x= 2, x squared = 4
x= 3, x squared = 9
x= 4, x squared = 16
x= 6, x squared = 36
x= 5, x squared = 25
x= 7, x squared = 49
x= 8, x squared = 64
x= 10, x squared = 100
x= 11, x squared = 121
x= 9, x squared = 81
x= 12, x squared = 144 
```

如您所见，这些数字不是按顺序排列的，因为它们是异步执行的。

# c - 生成帕斯卡三角形的最佳方法

> ID：12116005
> 
> 赞同：1
> 
> 时间：2012-08-24T20:12:34.057
> 
> 标签：c, space-complexity, pascals-triangle

我正在使用水平顺序遍历的概念来生成帕斯卡三角形。

这是代码片段：

```
void printPascalTriangle(int n)
{
    int line=1,Q[50]={0},f=-1,r=-1,prev,t;

    Enqueue(Q,&f,&r,1);
    Enqueue(Q,&f,&r,0);

    prev=0;
    while(line!=n)
    {
            t = Dequeue(Q,&f,&r);

            if( !t )
            {
                    line++;
                    prev = 0;
                    Enqueue(Q,&f,&r,1);

                    if(!isEmpty(&r))
                            Enqueue(Q,&f,&r,0);

                    printf("\n");
            }
            else
            {
                    printf("%d ", t);
                    Enqueue(Q,&f,&r,prev+t);
                    prev = t;
            }
    }
} 
```

完整的代码在[这里](http://ideone.com/s5L06)：

这种方法的优点是它的空间复杂度是 O(N)，其中 N 是行数。

有没有更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:27:15.800

由于您唯一关心的是空间复杂度，并且您正在使用`int`（而不是某种可能无限大小的大整数类型），您实际上可以通过使用以下两个事实来实现 O(1) 的空间复杂度：

*   *C* ( *n* , 0) = 1 对于 0 ≤ *n*
*   *C* ( *n* , *k* +1) = *C* ( *n* , *k* ) × ( *n* - *k* ) / ( *k* + 1) 对于 0 ≤ *k* < *n*

这两个事实意味着您可以仅使用同一行的前一个元素来计算每个元素，因此您一次不必保存多个元素。

（通过*C* ( *n* , *k ) 我的意思是第**n*行中的元素，帕斯卡三角形的位置*k*，假设行和位置从 0 开始编号。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-10T00:07:23.100

我认为您想要代码，而不是方程式？这里有两个 JavaScript 实现，一个有阶乘计算，一个没有。我不确定我更喜欢哪一个：

```
//1\. non-factorial option
function GenerateTriangle1(rows) {
    var pascalsTriangle = [];

    for (var r = 0; r < rows; r++) {
        var elements = r + 1;
        var level = [];

        for (var i = 0; i < elements; i++) {
            if (i === 0 || i === elements - 1 || r === 1)
                level[i] = 1;
            else {
                var prevRow = pascalsTriangle[r - 1];
                level[i] = prevRow[i - 1] + prevRow[i];
            }
        }

        pascalsTriangle[r] = level;
    }

    return pascalsTriangle;
}

//2\. Factorial option
function GenerateTriangle2(rows) {
    var pascalsTriangle = [];

    for (var r = 0; r < rows; r++) {
        var elements = r + 1;
        var level = [];

        for (var i = 0; i < elements; i++) {
            level[i] = CalculateTerm(r, i);
        }

        pascalsTriangle[r] = level;
    }

    return pascalsTriangle;
}

function CalculateTerm(row, term) {
    var divisor = Factorial(term) * Factorial(row - term);
    return divisor > 0 ? Factorial(row) / divisor : 1;
}

function Factorial(n) {
    return n > 1 ? n * Factorial(n - 1) : n;
}

console.log(GenerateTriangle1(4))
console.log(GenerateTriangle1(5)) 
```

# php - 插入时mysqli代码中的致命错误

> ID：12116006
> 
> 赞同：1
> 
> 时间：2012-08-24T20:12:34.393
> 
> 标签：php, mysqli

我在下面有一段代码，它使用 mysqli 和 php 将数据插入数据库。问题是我收到一个致命错误，说明：致命错误：无法通过第 116 行的 ... 中的引用传递参数 2

为什么会出现此错误，我该如何解决该错误？

下面是代码：

```
if ($numrows == 0){

   $teacherpassword = md5(md5("j3Jf92".$teacherpassword."D203djS"));  
   $code = md5(rand());

    $insertsql = "
    INSERT INTO Teacher
        (TeacherId, TeacherForename, TeacherSurname, TeacherEmail, TeacherAlias, TeacherUsername, TeacherPassword, Active, Code)
      VALUES
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }                                           

    $insert->bind_param("sssssssss", '', $getfirstname, $getsurname,
                 $getemail, $getid, $getuser,
                 $teacherpassword, '0', $code);

    $insert->execute();

    if ($insert->errno) {
      // Handle query error here
    }

    $insert->close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:15:59.927

`mysqli_stmt::bind_param()`接受一个详细说明以下参数类型的字符串，然后是一组对包含数据的变量的引用。

只有变量可以通过引用传递，因此您不能将字符串 (`''`或`'0'`) 传递给函数。您必须将该字符串放入变量中，然后传递该变量。

如果您将常量值传递给`INSERT`，为什么不将它们设为`DEFAULT`这些字段的值，然后将它们从查询中删除？

# html - 如何在引导程序中构建一个 2 列视图，顶部有大文本区域

> ID：12116007
> 
> 赞同：1
> 
> 时间：2012-08-24T20:12:55.313
> 
> 标签：html, css, twitter-bootstrap

![在此处输入图像描述](../Images/baf5defda822e5993c710392a7fea61e.png)

大家好，我正在尝试构建一个添加图片中的视图。我想构建一个包含 2 列的视图（显示表单），看起来像所附图片。我已经有一个看起来像这样的 2 列输入表单，但我不确定要使用哪些元素来构建视图。我将输入元素用于输入表单。我希望它有这样的布局：

```
 textbox

field1           field2

field3          field4 
```

构建我正在寻找的视图的 HTML 应该是什么样子？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:24:07.663

使用网格尺寸类（`.span1`to `.span12`）：

```
<div class="container">
    <div class="controls">
        <textarea class="span12" type="text"></textarea>
    </div>
    <div class="controls controls-row">
        <input class="span6" type="text"/>
        <input class="span6" type="text"/>
    </div>
    <div class="controls controls-row">
        <input class="span6" type="text"/>
        <input class="span6" type="text"/>
    </div>    
</div> 
```

​<strong>[演示](http://jsfiddle.net/pCffu/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:26:37.790

为什么不将这些字段做成 2 行表？像这样：

```
<textarea rows="2" cols="30">

</textarea>
<table border="none">
<tr>
<td><input type="text" name="field1" /></td>
<td><input type="text" name="field2" /></td>
</tr>
<tr>
<td><input type="text" name="field3" /></td>
<td><input type="text" name="field4" /></td>
</tr>
</table> 
```

# sql-server-2008 - 如何在存储过程中传递对象变量

> ID：12116009
> 
> 赞同：0
> 
> 时间：2012-08-24T20:13:10.813
> 
> 标签：sql-server-2008, stored-procedures, ssis

我将我的表作为执行 sql 任务的结果集存储在一个变量（即@varTableData）中，该变量有 5 列（即来自 select 语句的结果）

现在，我想将这五条记录插入到另一个表中，我想将此变量传递给存储过程，并将所有这些列数据插入到另一个表中。

我怎样才能做到这一点 ？我的意思是，是否有可能在存储过程变量中有一个完整的 vobject，我可以直接插入它。或者可以有更好的方法来实现相同的

# c++ - 我需要对输出进行舍入并显示 xxx.0 以在 C++ 中进行分配

> ID：12116013
> 
> 赞同：0
> 
> 时间：2012-08-24T20:13:32.727
> 
> 标签：c++, cmath, ceil

我可以在作业上获得一些帮助吗？我必须创建一个 BMI 计算器来接收测试用例并生成一个小数点后的 bmi。我的代码通过了大多数情况，但有一种情况，其中英尺 = 4，英寸 = 10，磅 = 1000。预期结果是 209.0，我只能得到 209 输出，我只需要做一个 if 语句并添加“.0”还是有办法对其进行编码？

```
#include <iostream>
#include <iomanip>
#include <cmath>

using namespace std;

int main()
{
    double feet, inches, pounds, bmi;

    cout << "== BMI Calculator ==" << endl;

    cout << "Step 1: Enter height" << endl;
    cout << "Feet:" << endl;
    cin >> feet;
    cout << "Inches:" << endl;
    cin >> inches;
    cout << "Step 2: Enter weight" << endl;
    cout << "Pounds:" << endl;
    cin >> pounds;

    inches = (feet * 12) + inches;
    bmi = ((pounds * 703) / (inches * inches));
    bmi = ceil(bmi * 10) / 10;

    cout << "BMI: " << bmi << endl;

    if (bmi < 18.5)
        cout << "you are underweight." << endl;
    else if (bmi >= 18.5 && bmi < 25)
        cout << "you are normal." << endl;
    else if (bmi >= 25 && bmi <= 29.9)
        cout << "you are overweight." << endl;
    else
        cout << "you are obese." << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:19:04.190

这只是一个格式问题。看这里：

*   [http://arachnoid.com/cpptutor/student3.html](http://arachnoid.com/cpptutor/student3.html)

*   [http://stdcxx.apache.org/doc/stdlibug/28-3.html](http://stdcxx.apache.org/doc/stdlibug/28-3.html)

*   [http://www.cplusplus.com/reference/iostream/ios_base/precision/](http://www.cplusplus.com/reference/iostream/ios_base/precision/)

例子：

```
 double f = 3.14159;
  cout.unsetf(ios::floatfield);            // floatfield not set
  cout.precision(5); 
```

输出：

```
3.1416 
```

# android - Eclipse SDK android：声明的包与预期的包不匹配

> ID：12116016
> 
> 赞同：0
> 
> 时间：2012-08-24T20:14:05.393
> 
> 标签：android, gridview

我已经阅读了类似的错误，但是对于在使用 Eclipse 的 ADT 插件时如何避免此错误感到困惑。

我正在尝试按照本教程了解如何创建图像的网格视图：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

第五步简单地说明打开 Open HelloGridView.java，但我不确定是否应该创建一个新类或活动。

“第五步：创建一个名为 ImageAdapter 的新类，它扩展了 BaseAdapter：

我已经尝试过创建一个新类和创建一个新活动。当我创建一个活动时，我创建了 com.example.HelloGridView 层次结构。但我认为这是不对的，我认为这些不应该是活动。我收到这个错误：

声明的包“”与 HelloGridView.java 和 ImageAdapter.java 中的预期包“com.example.hellogridview”不匹配

我真正想知道的是我应该如何在第四步和第五步中创建一个新类？

（而且我对 android 很陌生，我已经完成了 android 培训“入门”，但仍然觉得有点无能为力，我应该从这里去哪里？）

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T07:09:19.300

Your new class `HelloGridView` need to must be under your application package `com.example.hellogridview`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T00:59:46.700

当我的代码路径与包名称不匹配时，我收到此错误。

例如，如果您的包名称是 com.whatever.myapplication，则该类应位于 /yourworkspacedirectory/com/whatever/myapplication 文件夹下。

# qr-code - 是否有任何 QR 扫描仪无法读取具有次优掩模图案选择的代码？

> ID：12116018
> 
> 赞同：1
> 
> 时间：2012-08-24T20:14:08.430
> 
> 标签：qr-code, barcode-scanner

QR 码规范要求选择最佳掩码以避免难以扫描的图案。如果忽略这个选择的规则，任意选择一个掩码图案，但扫描仪在扫描时没有被图案弄糊涂，会不会有解码问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:04:50.070

是的，有时。由于 ISO/IEC 18004:2000 (8.8)，掩蔽用于：

1.  平衡黑暗和光明模块，
2.  避免位置检测模式。

第一个会影响版本检测，对于小于7的二维码版本暂定。

第二个将影响位置模式检测。

这两个步骤都应该在读取格式信息并在解码时对二维码应用掩码之前完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T03:44:53.470

不会。使用的面罩记录在 QR 码本身中，位于取景器图案周围的区域中。只要正确读取，掩码将在解码之前正确删除。它实际上是否是最佳模式并不重要。理论上可以使用任何掩码。

# java - 并发读取文本文件并将数据放入数组的线程

> ID：12116022
> 
> 赞同：2
> 
> 时间：2012-08-24T20:14:48.367
> 
> 标签：java, arrays, multithreading, file-io, global-variables

这段代码的目标是运行四个线程，这将打开四个文本文件，从中读取单词，然后将它们放入一个字符串数组中，

我知道的主要问题：

1-我没有将并发函数放在 void run 函数中，我希望能够将参数传递给该函数

2-我不确定我是否正在修改全局字符串数组

首先是主要方法：

```
 public static void main(String[] args) throws IOException 
    {
         //declare the threads
         Thread thread1 =  new Thread(ReadFile("list1.txt", Global.array1,"thread1"));
         Thread thread2 =  new Thread(ReadFile("list2.txt", Global.array2,"thread2"));
         Thread thread3 =  new Thread(ReadFile("list3.txt", Global.array3,"thread1"));
         Thread thread4 =  new Thread(ReadFile("list4.txt", Global.array4,"thread2"));

         /*error message from netbeans: cannot find symbol
            symbol:   method ReadFile(java.lang.String,java.lang.String[])

            it says it for every delcaration of the thread*/

         thread1.start();  //putting the threads to work
         thread2.start();
         thread3.start();
         thread4.start();

         thread1.join();   //telling the threads to finish their work
         thread2.join();
         thread3.join();
         thread4.join();

         // merging the arrays into one
         List list = new ArrayList(Arrays.asList(Global.array1));
         list.addAll(Arrays.asList(Global.array2));
         list.addAll(Arrays.asList(Global.array3));
         list.addAll(Arrays.asList(Global.array4));
         Object[] theArray = list.toArray();

           -------------------------etc---------------------------- 
```

如果我的词汇正确，这就是“线程类”

```
public class ReadFile implements Runnable
{
    public void run(){
            //I should get stuff here, that's my problem!!!!
    }

    private String path;
    Thread runner;

    public ReadFile(String filePath, String[] toArray, String threadName) throws IOException
    {
        String path = filePath;
        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr);

        int numOfLines = readLines();  
        toArray = new String[numOfLines];

        int i;
        for (i=0; i<numOfLines; i++)
        {
            toArray[i]= textReader.readLine();    //place next line into string array
        }

        textReader.close();
    }

   int readLines() throws IOException
    {
        FileReader fr = new FileReader(filePath);
        BufferedReader bf = new BufferedReader(fr);

        String aLine;
        int noOfLines = 0;

        while((aLine = bf.readLine()) != null)
        {
            noOfLines++;
        }
        bf.close();
        return noOfLines;
    }

    } 
```

* * *

最后我为全局变量做了一个类，我不知道这是否是个好主意

```
public class Global 
{
    public static String[] array1;
    public static String[] array2;
    public static String[] array3;
    public static String[] array4;
} 
```

请让我知道你们的想法，任何帮助或解释或提示将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T20:44:27.343

如果我们先修复你的文件读取线程，让主要工作发生在`run()`方法中：

```
public class FileReader extends Thread {

  private final File file;
  private String[] lines;

  public FileReader(File file) {
    this.file = file;
  }

  @Override
  public void run() {
    // Read file here (populate `lines`)..
  }

  public String[] getLines() {
    return lines;
  }
} 
```

然后我们可以在方法中使用这个`main`，如下：

```
public static void main(String[] args) throws Exception {
  List<FileReader> threads = new ArrayList<FileReader>();

  threads.add(new FileReader(new File("foo1")));
  threads.add(new FileReader(new File("foo2")));
  threads.add(new FileReader(new File("foo3")));
  threads.add(new FileReader(new File("foo4")));

  for (FileReader t : threads) {
    t.start();
  }

  List<String> allLines = new ArrayList<String>();

  for (FileReader t : threads) {
    t.join();
    allLines.addAll(Arrays.asList(t.getLines()));
  }    

  // File lines now in allLines
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:34:18.003

您的构造函数签名`ReadFile`：

```
public ReadFile(String filePath, String[] toArray, String threadName) 
```

与调用不匹配`main`（您只提供`String`, `String[]`）。我想你的意思是：

```
Thread thread1 =  new Thread(new ReadFile("list1.txt", Global.array1, "thread1"));
Thread thread2 =  new Thread(new ReadFile("list2.txt", Global.array2, "thread2"));
Thread thread3 =  new Thread(new ReadFile("list3.txt", Global.array3, "thread1"));
Thread thread4 =  new Thread(new ReadFile("list4.txt", Global.array4, "thread2")); 
```

`ReadFile`你可能对' 的构造函数将 '`threadName`作为第三个参数这一事实感到困惑，但`Thread`类本身也有一个类似的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:38:36.773

三个错误：

1.  `ReadFile`是一个实现的类`Runnable`，所以你应该将一个实例传递给`Thread`构造函数：

    线程 thread1 = new Thread(new ReadFile("list1.txt", Global.array1),"thread1");

2.  为什么要创建一个`Thread`内部`ReadFile`？删除它，不需要额外的跑步者！

3.  构造函数有一个必须删除的`ReadFile`附加参数。`threadName`

# assembly - 为什么传统的 Aimbots 不是基于数据包的

> ID：12116032
> 
> 赞同：0
> 
> 时间：2012-08-24T20:16:08.760
> 
> 标签：assembly, reverse-engineering, game-engine

我知道大多数瞄准机器人的工作方式是绕过内存中的某些函数，以便访问某些结构、变量，甚至函数本身。但是这样做的问题是有许多作弊检测方法可以扫描内存并找到此类软件。对游戏发送的包含玩家数据的数据包进行逆向工程并在发送之前对其进行修改不是更容易吗？还是更容易逆转作弊检测方法并取消（？）那些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:20:41.130

一个数据包可以做很多事情。你会收到一个数据包，上面写着玩家被爆炸击中。这有可能：

*   改变球员健康
*   改变球员位置
*   改变玩家速度
*   改变玩家方向

一次全部。你可以截取数据包，通过逆向工程每个数据包的作用和它是如何做的，自己更新所有这些，基本上模拟你自己的游戏模型。

或者你可以让游戏为你做这件事，然后读取它生成的值。

# visual-c++ - 枚举 MediaFoundation 接收器

> ID：12116033
> 
> 赞同：3
> 
> 时间：2012-08-24T20:16:14.703
> 
> 标签：visual-c++, ms-media-foundation

我正在尝试在 MediaFoundation 中构建一个完整的拓扑，使用 BlackMagic Decklink 卡作为源和接收器。在 MediaFoundation 中，有一种简单的方法可以枚举来源：

```
hr = MFEnumDeviceSources(pConfig, &ppDevices, &count); 
```

但是对于我的生活，我找不到一种简单的方法来枚举机器上的水槽，而且我从官方文档中得到了空缺。有没有人有这方面的运气？

# mysql - 如何从表中选择除最后 100 条之外的所有记录

> ID：12116036
> 
> 赞同：0
> 
> 时间：2012-08-24T20:16:39.737
> 
> 标签：mysql, phpmyadmin

我有一个存储客户记录的数据库，我想设置一个 cron 作业来定期覆盖这些记录。我想说从 ORDERS 中选择 *，其中 ORDER_ID 不在列表的前 100 位。每行都有自己的 order_id，其中最新的 order_id 是最新的订单。我需要保留最新的 100 个订单 ID，以防出现问题。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:20:09.580

```
select *
from Orders
where OrderID not in (
    select OrderID 
    from Orders 
    order by OrderID desc 
    limit 100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T01:03:12.393

您可以左加入 100 个最后一个 order_id 的行集 - 这将导致除了 100 个最后一个在左加入集中具有 NULL。

```
SELECT o.* from `order-table` o
LEFT JOIN
  ( SELECT order_id FROM `order-table` ORDER BY order_id DESC LIMIT 100 ) o100
ON o.order_id = o100.order_id
WHERE o100.order_id IS NULL 
```

# xml - Maven settings.xml 文件

> ID：12116039
> 
> 赞同：3
> 
> 时间：2012-08-24T20:16:51.213
> 
> 标签：xml, maven, settings

Maven 的 settings.xml 文件中包含哪些元素？有人可以分享一个示例文件吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:18:51.923

[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)是一个很好的起点。所有元素都有一个示例和解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-26T03:25:43.987

> settings.xml 文件中的设置元素包含用于定义以各种方式配置 Maven 执行的值的元素，例如 pom.xml。这些元素包括本地存储库位置、备用远程存储库服务器和身份验证信息等值。

**下面的示例包含所有必需的键及其解释，这可能有助于清楚地理解设置 xml moe**

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<!--
 | This is the configuration file for Maven. It can be specified at two levels:
 |
 |  1\. User Level. This settings.xml file provides configuration for a single
 |                 user, and is normally provided in
 |                 ${user.home}/.m2/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -s /path/to/user/settings.xml
 |
 |  2\. Global Level. This settings.xml file provides configuration for all
 |                 Maven users on a machine (assuming they're all using the
 |                 same Maven installation). It's normally provided in
 |                 ${maven.home}/conf/settings.xml.
 |
 |                 NOTE: This location can be overridden with the CLI option:
 |
 |                 -gs /path/to/global/settings.xml
 |
 | The sections in this sample file are intended to give you a running start
 | at getting the most out of your Maven installation. Where appropriate, the
 | default values (values used when the setting is not specified) are provided.
 |
 |-->
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ~/.m2/repository
  <localRepository>/path/to/local/repo</localRepository>
  -->

  <!-- interactiveMode
   | This will determine whether maven prompts you when it needs input. If set
   | to false, maven will use a sensible default value, perhaps based on some
   | other setting, for the parameter in question.
   |
   | Default: true
  <interactiveMode>true</interactiveMode>
  -->

  <!-- offline
   | Determines whether maven should attempt to connect to the network when
   | executing a build. This will have an effect on artifact downloads,
   | artifact deployment, and others.
   |
   | Default: false
  <offline>false</offline>
  -->

  <!-- pluginGroups
   | This is a list of additional group identifiers that will be searched when
   | resolving plugins by their prefix, i.e. when invoking a command line like
   | "mvn prefix:goal". Maven will automatically add the group identifiers
   | "org.apache.maven.plugins" and "org.codehaus.mojo" if these are not
   | already contained in the list.
   |-->
  <pluginGroups>
    <!-- pluginGroup
     | Specifies a further group identifier to use for plugin lookup.
    <pluginGroup>com.your.plugins</pluginGroup>
    -->
  </pluginGroups>

  <!-- proxies
   | This is a list of proxies which can be used on this machine to connect to
   | the network. Unless otherwise specified (by system property or command-
   | line switch), the first proxy specification in this list marked as active
   | will be used.
   |-->
  <proxies>
    <!-- proxy
     | Specification for one proxy, to be used in connecting to the network.
     |
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>proxyuser</username>
      <password>proxypass</password>
      <host>proxy.host.net</host>
      <port>80</port>
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>
    -->
  </proxies>

  <!-- servers
   | This is a list of authentication profiles, keyed by the server-id used
   | within the system. Authentication profiles can be used whenever maven must
   | make a connection to a remote server.
   |-->
  <servers>
    <!-- server
     | Specifies the authentication information to use when connecting to a
     | particular server, identified by a unique name within the system
     | (referred to by the 'id' attribute below).
     |
     | NOTE: You should either specify username/password OR
     |       privateKey/passphrase, since these pairings are used together.
     |
    <server>
      <id>deploymentRepo</id>
      <username>repouser</username>
      <password>repopwd</password>
    </server>
    -->

    <!-- Another sample, using keys to authenticate.
    <server>
      <id>siteServer</id>
      <privateKey>/path/to/private/key</privateKey>
      <passphrase>optional; leave empty if not used.</passphrase>
    </server>
    -->
  </servers>

  <!-- mirrors
   | This is a list of mirrors to be used in downloading artifacts from remote
   | repositories.
   |
   | It works like this: a POM may declare a repository to use in resolving
   | certain artifacts. However, this repository may have problems with heavy
   | traffic at times, so people have mirrored it to several places.
   |
   | That repository definition will have a unique id, so we can create a
   | mirror reference for that repository, to be used as an alternate download
   | site. The mirror site will be the preferred server for that repository.
   |-->
  <mirrors>
    <!-- mirror
     | Specifies a repository mirror site to use instead of a given repository.
     | The repository that this mirror serves has an ID that matches the
     | mirrorOf element of this mirror. IDs are used for inheritance and direct
     | lookup purposes, and must be unique across the set of mirrors.
     |
    <mirror>
      <id>mirrorId</id>
      <mirrorOf>repositoryId</mirrorOf>
      <name>Human Readable Name for this Mirror.</name>
      <url>http://my.repository.com/repo/path</url>
    </mirror>
     -->
  </mirrors>

  <!-- profiles
   | This is a list of profiles which can be activated in a variety of ways,
   | and which can modify the build process. Profiles provided in the
   | settings.xml are intended to provide local machine-specific paths and
   | repository locations which allow the build to work in the local
   | environment.
   |
   | For example, if you have an integration testing plugin - like cactus -
   | that needs to know where your Tomcat instance is installed, you can
   | provide a variable here such that the variable is dereferenced during the
   | build process to configure the cactus plugin.
   |
   | As noted above, profiles can be activated in a variety of ways. One
   | way - the activeProfiles section of this document (settings.xml) - will be
   | discussed later. Another way essentially relies on the detection of a
   | system property, either matching a particular value for the property, or
   | merely testing its existence. Profiles can also be activated by JDK
   | version prefix, where a value of '1.4' might activate a profile when the
   | build is executed on a JDK version of '1.4.2_07'. Finally, the list of
   | active profiles can be specified directly from the command line.
   |
   | NOTE: For profiles defined in the settings.xml, you are restricted to
   |       specifying only artifact repositories, plugin repositories, and
   |       free-form properties to be used as configuration variables for
   |       plugins in the POM.
   |
   |-->

  <profiles>
    <!-- profile
     | Specifies a set of introductions to the build process, to be activated
     | using one or more of the mechanisms described above. For inheritance
     | purposes, and to activate profiles via <activatedProfiles/> or the
     | command line, profiles have to have an ID that is unique.
     |
     | An encouraged best practice for profile identification is to use a
     | consistent naming convention for profiles, such as 'env-dev',
     | 'env-test', 'env-production', 'user-jdcasey', 'user-brett', etc. This
     | will make it more intuitive to understand what the set of introduced
     | profiles is attempting to accomplish, particularly when you only have a
     | list of profile id's for debug.
     |
     | This profile example uses the JDK version to trigger activation, and
     | provides a JDK-specific repo.
    <profile>
      <id>jdk-1.4</id>

      <activation>
        <jdk>1.4</jdk>
      </activation>

      <repositories>
        <repository>
          <id>jdk14</id>
          <name>Repository for JDK 1.4 builds</name>
          <url>http://www.myhost.com/maven/jdk14</url>
          <layout>default</layout>
          <snapshotPolicy>always</snapshotPolicy>
        </repository>
      </repositories>
    </profile>
    -->

    <!--
     | Here is another profile, activated by the system property 'target-env'
     | with a value of 'dev', which provides a specific path to the Tomcat
     | instance. To use this, your plugin configuration might hypothetically
     | look like:
     |
     | ...
     | <plugin>
     |   <groupId>org.myco.myplugins</groupId>
     |   <artifactId>myplugin</artifactId>
     |
     |   <configuration>
     |     <tomcatLocation>${tomcatPath}</tomcatLocation>
     |   </configuration>
     | </plugin>
     | ...
     |
     | NOTE: If you just wanted to inject this configuration whenever someone
     |       set 'target-env' to anything, you could just leave off the
     |       <value/> inside the activation-property.
     |
    <profile>
      <id>env-dev</id>

      <activation>
        <property>
          <name>target-env</name>
          <value>dev</value>
        </property>
      </activation>

      <properties>
        <tomcatPath>/path/to/tomcat/instance</tomcatPath>
      </properties>
    </profile>
    -->
  </profiles>

  <!-- activeProfiles
   | List of profiles that are active for all builds.
   |
  <activeProfiles>
    <activeProfile>alwaysActiveProfile</activeProfile>
    <activeProfile>anotherAlwaysActiveProfile</activeProfile>
  </activeProfiles>
  -->
</settings> 
```

对于任何其他深度细节：可以通过[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-28T17:01:18.760

作为初学者，我觉得上述答案并不简单，可能会使用户感到困惑。

在我看来，最简单的 maven settings.xml 文件如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                          http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <mirrors>
    <mirror>
        <id>central</id>
        <name>central</name>
        <url>https://repo1.maven.org/maven2/</url>
        <mirrorOf>maven_central</mirrorOf>
    </mirror>
    </mirrors>
</settings> 
```

注意：上面的代码片段是一个工作配置，它将从 maven_central 提取需要的 wateva 插件。

更多信息： [https ://maven.apache.org/guides/mini/guide-mirror-settings.html](https://maven.apache.org/guides/mini/guide-mirror-settings.html)

一个小笑话：）

'for(int i = 0; iAmADumbDude<=infinite.length; i++); { 如果（请用 3 岁的例子让我更聪明）；{ 谢谢 }; 否则 { 呜呜 } }'

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-17T08:15:13.793

内容取决于部署工件所需的配置：

[http://maven.apache.org/settings.html](http://maven.apache.org/settings.html)

但最重要的是使用以下命令检查 Maven 在部署工件期间采用了哪些设置：

```
mvn help:effective-settings 
```

有时可能会发生您正在使用本地设置和全局设置（首先获取 maven 安装提供的，然后是存储库提供的）。使用此命令，您可以验证 maven 在部署期间采用的实际设置。此外，您可以找到 maven 正在使用的实际文件，因此可以根据服务器所需的配置正确修改文件（例如使用 vim）。

请记住，settings.xml 文件可能存在两个位置：

1.  Maven安装目录

    $M2_HOME/conf/settings.xml

2.  用户特定的设置文件

    ~/.m2/settings.xml

> 如果两个文件都存在，它们的内容将被合并，用户特定的 settings.xml 占主导地位。[https://maven.apache.org/settings.html](https://maven.apache.org/settings.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T14:56:01.120

在 Ubuntu Linux 中，您可以在 /etc/maven/settings.xml 中找到带有注释的默认文件

# sql - 从 SQL Server 2000 获取最新的 IDENTITY 条目

> ID：12116043
> 
> 赞同：0
> 
> 时间：2012-08-24T20:17:21.740
> 
> 标签：sql, sql-server, sql-server-2000

是的，我还有一个 SQL Server 2000 机器（我知道，我知道......）。有人可以提醒我从特定表中新插入的记录中检索最新 IDENTITY 条目的最可靠/安全的方法吗？我知道如何在 SQL Server 2008 等中做到这一点，但我不记得它是否与 SQL Server 2000 不同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T21:19:55.263

SCOPE_IDENTITY。[http://msdn.microsoft.com/en-us/library/aa259185(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa259185(v=sql.80).aspx)*永远*不要使用@@IDENTITY。永远不要出于任何原因使用它。使用它会导致你爆发皮疹，你的妻子会和你离婚，以及被取消的 Dr. Who。

见：[http](http://www.sqlfiddle.com/#!3/2e2d3/4) ://www.sqlfiddle.com/#!3/ 2e2d3/4 看黑暗之心！看看@@IDENTITY 的邪恶！使用@@IDENTITY 并失去你自己的！

# javascript - 谷歌地图getZoom

> ID：12116046
> 
> 赞同：1
> 
> 时间：2012-08-24T20:17:41.540
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我有谷歌地图的问题。放置标记时，将 lat、lng 和缩放级别设置为隐藏字段，lat 和 lng 有效，但缩放无效。

我尝试使用marker.map.getZoom()，但仍然没有。

这是我的代码：

```
var map,
    map_container = document.getElementById("map"),
    mapLat = document.getElementById("mapLat"),
    mapLng = document.getElementById("mapLng"),
    markersArray = [],
    adresa;

var marker = {
    init : function() {
        var latlng = new google.maps.LatLng(44, 20);

        var myOptions = {
            zoom: 6,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        map = new google.maps.Map(map_container, myOptions);

        google.maps.event.addListener(map, "click", function(event) {
            marker.placeMarker(event.latLng);
            mapLat.value = event.latLng.lat();
            mapLng.value = event.latLng.lng();
        });

    },

    placeMarker : function(location) {
        marker.deleteMarkers();

        var map_marker = new google.maps.Marker({
            position: location,
            map: map
        });

        markersArray.push(map_marker);

        console.log(map.GetZoom());

        $('#mapZoom').val(map.GetZoom());

    },

    deleteMarkers : function() {
        if (markersArray) {
            for (i in markersArray) {
                markersArray[i].setMap(null);
            }
            markersArray.length = 0;
        }
    }
} 
```

我怎样才能解决这个问题 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T00:26:43.307

GetZoom() 和 getZoom() 是不同的东西（javascript 区分大小写），您发布的代码使用 GetZoom()，它不是 Google Maps API v3 的一部分。

# matplotlib - 如何绘制远程图像（来自 http url）

> ID：12116050
> 
> 赞同：16
> 
> 时间：2012-08-24T20:18:11.640
> 
> 标签：matplotlib

这一定很容易，但是如果不使用 urllib 模块并手动获取远程文件，我现在无法弄清楚

我想用远程图像覆盖图（比如说“http://matplotlib.sourceforge.net/_static/logo2.png”），既`imshow()`不能也`imread()`不能加载图像。

任何想法哪个功能将允许加载远程图像？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T22:49:15.173

这确实很容易：

```
import urllib2
import matplotlib.pyplot as plt

# create a file-like object from the url
f = urllib2.urlopen("http://matplotlib.sourceforge.net/_static/logo2.png")

# read the image file in a numpy array
a = plt.imread(f)
plt.imshow(a)
plt.show() 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-01-13T20:34:09.053

这适用于我在带有 python 3.5 的笔记本中：

```
from skimage import io
import matplotlib.pyplot as plt

image = io.imread(url)
plt.imshow(image)
plt.show() 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-02-19T13:06:27.670

你可以用这段代码来做；

```
from matplotlib import pyplot as plt
a = plt.imread("http://matplotlib.sourceforge.net/_static/logo2.png")
plt.imshow(a)
plt.show() 
```

# .net - 如何在间隔内重新初始化单例对象

> ID：12116051
> 
> 赞同：1
> 
> 时间：2012-08-24T20:18:12.693
> 
> 标签：.net, web-services, asynchronous, singleton, lucene.net

我正在设置一个托管[Lucene.Net](http://incubator.apache.org/lucene.net) / [AzureDirectory](http://code.msdn.microsoft.com/windowsazure/Azure-Library-for-83562538)搜索引擎的 WCF Web 服务。

出于速度目的，推荐的使用方法`AzureDirectory`是拥有一个`IndexSearcher`可供所有服务调用使用的单例实例。这是我必须做的：

```
public class LuceneHelper
{    
    private static IndexSearcher _searcher;
    public static IndexSearcher searcher
    {
        get
        {
            if (_searcher == null)
                initSearcher();
            return _searcher;
        }
    }
    public static void initSearcher()
    {
        _searcher = new IndexSearcher(azureDirectory);
    }
    ...
} 
```

由于该对象缓存了它正在搜索的索引，因此我需要以与任何客户端调用异步的间隔重新初始化该对象......就像每分钟左右一样。因此，我尝试在我的天蓝色实例上的另一个线程中设置一个运行该进程的进程...

```
LuceneHelper.initSearcher();
while (true)
{
    Thread.Sleep(60000);
    LuceneHelper.initSearcher();
} 
```

从我的测试中我可以看出它们都在工作，但彼此独立。所以我猜我的网络服务中有一个 IndexSearcher，我的工作线程中有一个。

**我的问题：**有没有办法在我的 web 服务中异步运行我的无限“while”语句，或者以任何其他方式在没有客户端调用的情况下重新初始化对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:56:35.167

回答您的直接问题，是的，可以在您的 Web 服务的后台运行 while 语句。您所要做的就是创建[`Thread`该类](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)的一个实例并让它运行您的循环并将对它的引用存储在您的应用程序中（您的单例类将是一个好地方）。

也就是说，我不建议这样做，因为您不需要打开/关闭/重新打开[`IndexSearcher`课程](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/search/IndexSearcher.html)。推荐的做法是在您的应用程序的整个生命周期中维护一个共享[`IndexWriter`](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/index/IndexWriter.html)实例，然后调用该[`GetReader`方法](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/index/IndexWriter.html#getReader%28%29)[`IndexReader`](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_3/api/core/org/apache/lucene/index/IndexReader.html)按需获取一个实例（然后您可以从中创建一个`IndexSearcher`. 这通常比重新创建索引更快且更易于维护（而且它也是实时的，因为调用`GetReader`将对索引进行所有更改）。

# c# - 将 StackPanel 的 CodeBehind 实例绑定到 XAML

> ID：12116052
> 
> 赞同：0
> 
> 时间：2012-08-24T20:18:24.480
> 
> 标签：c#, .net, wpf, binding

我有一个奇怪的场景。

我需要在代码隐藏中创建一个 StackPanel。然后我需要将该堆栈面板绑定到 xaml 中的 UI。

通常我会为此使用 ContentControl。但它有焦点问题（它不能从标签顺序中阻止 Focusable="False" 无效）。我也尝试了一个用户控件，但也有同样的问题。

所以我需要使用其他类型的控制。我决定成立一个小组。（StackPanel 看起来和任何面板一样好。）

但是，我似乎无法在 Xaml 中找到绑定到“代码中”堆栈面板的方法？

**有没有办法做到这一点？（不使用内容控件或用户控件）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:33:13.427

> 它不能被标签顺序阻止 Focusable="False" 没有效果

怎么样[`IsTabStop`](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.istabstop.aspx)？

此外，最轻量级的东西[`ContentPresenter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)是我会使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:35:03.323

在 KAXAML 中对此进行了测试，当按下 TAB 时，焦点不会转到 ContentPresenter 或 ContentControl 中定义的任何项目。

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel>
  <TextBox>aaaaa</TextBox>
  <TextBox>bbbbb</TextBox>
    <ContentControl Focusable="False">
    <ContentControl.ContentTemplate>
    <DataTemplate>
    <StackPanel Focusable="False" Background="Red" Width="100" Height="50"></StackPanel>
    </DataTemplate>
    </ContentControl.ContentTemplate>
    </ContentControl>
    <ContentControl Focusable="False">
    <ContentControl.ContentTemplate>
    <DataTemplate>
    <TextBox Focusable="False">hello</TextBox>
    </DataTemplate>
    </ContentControl.ContentTemplate>
    </ContentControl>
    <ContentPresenter Focusable="False">
    <ContentPresenter.Content>
    <TextBox Focusable="False">hello</TextBox>
    </ContentPresenter.Content>
    </ContentPresenter>
  <TextBox>ccccc</TextBox>
  <TextBox>ddddd</TextBox>
  </StackPanel>
</Page> 
```

# json - 如何在 Google 自定义搜索 API 中启用图像搜索

> ID：12116053
> 
> 赞同：0
> 
> 时间：2012-08-24T20:18:27.310
> 
> 标签：json, rest, api, google-api

请帮我处理`GET`请求参数。

问题：如何在 Google Custom Search API 中启用图片搜索？

手册在[这里](https://developers.google.com/custom-search/v1/using_rest)，但它只适用于网络搜索。

例如，使用文本**花**进行网络搜索会返回：

```
{https://www.googleapis.com/customsearch/v1?key={MY-KEY}&cx=013036536707430787589:_pqjad5hr1a&q=flowers&alt=json} 
```

图片搜索应该有额外的参数`searchType=image`

```
{https://www.googleapis.com/customsearch/v1?key={MY-KEY}&cx=013036536707430787589:_pqjad5hr1a&q=flowers&searchType=image&alt=json} 
```

但它返回带有 0 个搜索结果的 JSON。

请告诉我我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:24:20.340

这应该在搜索引擎配置中启用（默认禁用）。我也花了一些时间来解释为什么它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T08:31:31.507

我使用 API Explorer 来模拟搜索并以这种方式获得更正的 URL

```
https://www.googleapis.com/customsearch/v1?q={QUERY}&cx={CX}&{OPTIONS}={VALUES}&key={YOUR_API_KEY}&searchType=image&alt=json 
```

听起来很愚蠢，显然确切的顺序对于它的工作很重要。

# python - 为什么这个嵌套的 for 循环不能在 csv.reader 对象上工作？

> ID：12116058
> 
> 赞同：0
> 
> 时间：2012-08-24T20:18:52.593
> 
> 标签：python, csv

我无法让脚本正常工作，我怀疑我忽略了一些简单的事情。我在下面粘贴了一个简化的脚本，它会为类似的数据集生成相同类型的错误。

下面的脚本旨在获取一个 csv，其中每一行代表给定状态的民意调查数据。使用州列表，我想遍历 csv 数据以查找每个州的最新民意调查并生成一个列表列表，该列表总结了该州的一个属性（本例中民主党候选人的投票百分比）。我需要考虑到 csv 文件中的“行”可能没有任何特定顺序并且某些“状态”可能在 csv 中没有数据的可能性。

此示例脚本为第一个州（“阿拉巴马州”）生成正确的输出，但它无法在州列表中找到任何其他州的数据。为什么？

注 1 - 脚本确实获取 csv 文件 注 2 - 如果我不获取 csv 文件，而是将投票数据作为列表列表提供，则脚本按预期工作

谢谢你的帮助。

```
import csv, httplib2, cStringIO

h = httplib2.Http('.cache')
url = 'http://www.electoral-vote.com/evp2012/Pres/pres_polls.csv'
headers, data = h.request(url)

states = [
            "Alabama", 
            "Alaska", 
            "Arizona", 
            "Arkansas", 
            "California", 
            "Colorado", 
            "Connecticut",
            "Delaware",
            "Florida",
            "Georgia",
            "Hawaii",
            "Idaho",
            "Illinois",
            "Indiana",
            "Iowa",
            "Kansas",
            "Kentucky",
            "Louisiana",
            "Maine",
            "Maryland",
            "Massachusetts",
            "Michigan",
            "Minnesota",
            "Mississippi",
            "Missouri",
            "Montana",
            "Nebraska",
            "Nevada",
            "New Hampshire",
            "New Jersey",
            "New Mexico",
            "New York",
            "North Carolina",
            "North Dakota",
            "Ohio",
            "Oklahoma",
            "Oregon",
            "Pennsylvania",
            "Rhode Island",
            "South Carolina",
            "South Dakota",
            "Tennessee",
            "Texas",
            "Utah",
            "Vermont",
            "Virginia",
            "Washington",
            "West Virginia",
            "Wisconsin",
            "Wyoming"
            ]

csv_input = cStringIO.StringIO(data)
csv_output = csv.reader(csv_input)

# sample row => 
#['Day', 'Len', 'State', 'EV', 'Dem', 'GOP', 'Ind', 'Date', '', '', '', '', '', '', '', 'Pollster']
#['  1.0', '1', 'Wyoming', '3', '33', '65', '', 'Jan 01', '', '', '', '', '', '', '', 'Election 2008-1'] 

percent_dem_by_state = []

for state in states:
    poll_day = 0
    percent_dem_for_this_state = [state, None]
    for row in csv_output:
        if (state == row[2]) and (float(row[0]) > poll_day):
            percent_dem_for_this_state = [state, int(row[4])]
            poll_day = float(row[0])
    percent_dem_by_state.append(percent_dem_for_this_state)

for elem in percent_dem_by_state:
    print elem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:29:09.253

读取 CSV 文件的循环“用完了”。每次通过外循环都不会重置它。

无论如何，更好的策略是通读 CSV 文件一次，然后再执行任何其他操作，将数据加载到内存中并循环处理。您当前的*预期*逻辑是读取每个州的整个 CSV 文件，每次只挑选一个州的数据价值，这将比它必须的要慢得多（大约慢 50 倍）。

至于内存中的数据结构，您已经看到列表的列表是有效的。字典会更好地为您服务，其中键是状态。然后你不必为每个状态循环整个事情。

# knockout.js - KO.utils.arrayPushAll 在选择更改时添加新元素到另一个选定的框和网格

> ID：12116061
> 
> 赞同：0
> 
> 时间：2012-08-24T20:19:01.390
> 
> 标签：knockout.js, ko.observablearray

我正在尝试从使用 knockout.js 库在 MVC4 中编写的 JSON 响应中提取数据。我有这三个区域需要填充，其中第一个是多选框。我查看了在线示例以及参考资料，以及此处链接的提琴手，但无济于事。我遇到问题的领域是使用 arrayOne 列表中选择的每个项目的所有数据填充 arrayTwo 和网格数组。

```
function viewModel() {
    this.arrayOne = ko.observableArray();
    this.chosenarrayOne = ko.observableArray();
    this.arrayTwo = ko.observableArray();
    this.gridArray = ko.observableArray();
    this.chosenarrayTwo = ko.observableArray();
    this.chosenarrayOne.subscribe(function (nIds) {
        mvvm.arrayTwo(undefined);
        mvvm.gridArray(undefined);
        var nDx;
        if (nIds != null) {
            for (nDx = 0; nDx < nIds.length; nDx++) {
                $.ajax({
                    url: '{Working URL Omitted}',
                    data: { nValue: arrayOne[nDx] },
                    type: 'GET',
                    success: function (data) {
                        mvvm.arrayTwo(data);
                    },
                    error: function () {
                        alert('Array Two ajax error');
                    }
                });
                $.ajax({
                    url: '{Working URL Omitted}',
                    type: 'GET',
                    data: { nValue: nIds[nDx] },
                    success: function (data) {
// Example of what I would like to happen, however I get nothing back
                        mvvm.gridArray.arrayPushAll(data);

                        //mvvm.gridArray(data);
                    },
                    error: function () {
                        alert('Grid Array ajax error');
                    }
                });
            }
        }
    }, this);
}
var mvvm = new viewModel();
ko.applyBindings(mvvm);
$.ajax({
    url: '{Working URL Omitted}',
    type: 'GET',
    success: function (data) {
        mvvm.arrayOne(data);
    },
    error: function () {
        alert('Array One ajax call error');
    }
}); 
```

我已经尝试对响应进行 json-ing 以查看返回的内容，并返回数组形式的值。但是，如果 arrayOne var 中有多个元素，则不会返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T00:54:21.650

在您的 ajax 调用中，您发送了错误的数据。如果要获取 observableArray 中的值，则必须这样：

```
arrayOne()[nDx] instead of arrayOne[nDx] 
```

检查这个[例子](http://jsfiddle.net/gurkavcu/qmL3V/)

# java - Rally Rest Api：QueryFilter：按时间戳获取缺陷

> ID：12116069
> 
> 赞同：3
> 
> 时间：2012-08-24T20:19:31.483
> 
> 标签：java, rally

有没有办法使用 QueryFilter 来获取自时间戳以来更新的缺陷？像这样的东西：

```
String timeStamp = "2012-08-24T19:10:09.154Z";
QueryRequest defectRequest = new QueryRequest("defect");
defectRequest.setFetch(new Fetch("LastUpdateDate"));
defectRequest.setQueryFilter(new QueryFilter("LastUpdateDate", ">", timeStamp);
QueryResponse projectDefects = rallyApi.query(defectRequest); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T01:20:15.847

[Rally Web 服务 API](https://rally1.rallydev.com/slm/doc/webservice/)介绍页面有一些关于编写复杂查询的陷阱的解释（查看查询**语法**和**对象集合属性和查询**部分）。Java 版本确实可以轻松处理链式表达式，但有点难以阅读。这是一个查询自 8 月 1 日以来具有高严重性或优先级的未解决缺陷：

```
String timeStamp = "2012-08-01T19:10:09.154Z";

Map<String, QueryFilter> filters = new HashMap<String, QueryFilter>();

filters.put("LastUpdateDate", new QueryFilter("LastUpdateDate", ">", timeStamp));
filters.put("State", new QueryFilter("State", "=", "Open"));
filters.put("Severity", new QueryFilter("Severity", "<=", "Major Problem"));
filters.put("Priority", new QueryFilter("Priority", "<=", "High Attention"));

// Evaluates to ((Severity <= Major Problem) OR (Priority <= High Attention)) AND ((LastUpdateDate > timeStamp) AND (State = Open))
QueryFilter complexFilter = filters.get("Severity").or(filters.get("Priority")).and(filters.get("LastUpdateDate").and(filters.get("State"))); 
```

一个很大的问题是查询集合的属性（如用户故事中的任务）。将查询链接在一起会得到错误的结果。例如，如果您要查找的用户故事的任务既在进行中又被阻止，则查询会将表达式计算为 OR 语句。发生这种情况是因为查询将其转换为“在集合中查找任何具有阻止状态的任务，然后查找任何正在进行的任务”。查询不会缩小第一个表达式之后的列表范围；每个表达式查询集合中的所有任务。

解决此问题的一种方法是执行其中一个查询（假设我们正在处理所有任务）。然后，我们过滤该列表以获取所有被阻止的任务。获得过滤后的列表后，您可以找出每个任务属于哪个用户故事。

参考：

上面链接的 Rally Web 服务 API。

[http://developer.rallydev.com/help/java-toolkit-rally-rest-api](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)（我使用页面末尾的最后一个示例作为创建上述查询过滤器的基础）。

# c# - 从 C# 转换为 VB.NET

> ID：12116072
> 
> 赞同：-2
> 
> 时间：2012-08-24T20:19:45.260
> 
> 标签：c#, vb.net

我在转换这种和平的代码时遇到问题。我尝试使用转换器，但完全没有运气。所有转换器都有这部分的问题“view.Filter = delegate(object item)”提前谢谢。

```
 private void ApplyFilters()
    {
        // Get the view
        ICollectionView view = CollectionViewSource.GetDefaultView(ItemsSource);
        if (view != null)
        {
            // Create a filter
            view.Filter = delegate(object item)
            {
                // Show the current object
                bool show = true;

                // Loop filters
                foreach (KeyValuePair<string, string> filter in columnFilters)
                {
                    object property = GetPropertyValue(item, filter.Key);
                    if (property != null)
                    {
                        // Check if the current column contains a filter
                        bool containsFilter = false;
                        if (IsFilteringCaseSensitive)
                            containsFilter = property.ToString().Contains(filter.Value);
                        else
                            containsFilter = property.ToString().ToLower().Contains(filter.Value.ToLower());

                        // Do the necessary things if the filter is not correct
                        if (!containsFilter)
                        {
                            show = false;
                            break;
                        }
                    }
                }

                // Return if it's visible or not
                return show;
            };
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:24:09.877

您可以使用[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb531253.aspx)来转换[C# 匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx)：

```
view.Filter = Function(item As Object)
        ' Show the current object
        Dim show As Boolean = True

        ' Loop filters
        For Each filter As KeyValuePair(Of String, String) In columnFilters
            Dim prop As Object = GetPropertyValue(item, filter.Key)
            If prop IsNot Nothing Then
                ' Check if the current column contains a filter
                Dim containsFilter As Boolean = False
                If IsFilteringCaseSensitive Then
                    containsFilter = prop.ToString().Contains(filter.Value)
                Else
                    containsFilter = prop.ToString().ToLower().Contains(filter.Value.ToLower())
                End If

                ' Do the necessary things if the filter is not correct
                If Not containsFilter Then
                    show = False
                    Exit For
                End If
            End If
        Next

        ' Return if it's visible or not
        Return show
      End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:26:28.983

这是因为 VB.Net 不支持匿名方法。

您可以尝试将委托代码提取到单独的函数调用中，然后通过转换器运行它。

# python - QMouseEvent，收到意外的类型

> ID：12116073
> 
> 赞同：2
> 
> 时间：2012-08-24T20:19:52.887
> 
> 标签：python, pyqt, qgraphicsscene

我正在尝试将鼠标按下事件链接到单击`QLabel`. 一些问题......当我传递一个 generic`QWidget.mousePressEvent`时，坐标只会显示第一次点击。当我尝试使鼠标事件特定于 a`GraphicsScene(self.p1)`时，出现以下错误：

```
Traceback (most recent call last):
  File "C:\Users\Tory\Desktop\DIDSONGUIDONOTCHANGE.py", line 59, in mousePressEvent
    self.p1.mousePressEvent(event)
TypeError: QGraphicsWidget.mousePressEvent(QGraphicsSceneMouseEvent): argument 1 has unexpected type 'QMouseEvent' 
```

这是我正在使用的代码......我知道它已经关闭，但我对此很陌生，并且有点迷失从哪里开始。

```
def mousePressEvent(self, event):
    self.p1.mousePressEvent(event)
    x=event.x()
    y=event.y()
    if event.button()==Qt.LeftButton:
        self.label.setText("x=%0.01f,y=%0.01f" %(x,y)) 
```

如何让鼠标单击以显示图形场景 self.p1 的坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:21:03.463

看起来[事件过滤器](http://doc-snapshot.qt-project.org/4.8/qobject.html#eventFilter)可以做你想做的事。

这是一个简单的演示：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.scene = QtGui.QGraphicsScene(self)
        self.scene.addPixmap(QtGui.QPixmap('image.jpg'))
        self.scene.installEventFilter(self)
        self.view = QtGui.QGraphicsView(self)
        self.view.setScene(self.scene)
        self.label = QtGui.QLabel(self)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.view)
        layout.addWidget(self.label)

    def eventFilter(self, source, event):
        if (source is self.scene and
            event.type() == QtCore.QEvent.GraphicsSceneMouseRelease and
            event.button() == QtCore.Qt.LeftButton):
            pos = event.scenePos()
            self.label.setText('x=%0.01f,y=%0.01f' % (pos.x(), pos.y()))
        return QtGui.QWidget.eventFilter(self, source, event)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# php - 使用 Flash 上传器时，我是否必须更改任何 php.ini 设置？

> ID：12116083
> 
> 赞同：0
> 
> 时间：2012-08-24T20:20:27.210
> 
> 标签：php, linux

我需要上传最大 200 MB 的文件。有人告诉我，flash uploader 是要走的路，例如 uploadify 或 swfupload。我是否必须更改任何 php.ini 设置才能让上传程序处理 200MB 等大文件？是否可以采取任何预防措施来确保 DDoS 攻击不是我会遇到的，或者确保人们上传的文件最大为 200 MB？使用 Cent OS 6、php 5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:40:49.073

您需要编辑`upload_max_filesize`

```
upload_max_filesize = 200M 
```

这应该确保没有人可以上传超过 200MB 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:52:47.163

我不确定 Flash 上传器是如何工作的，因为我一直试图在我的评论中引入它们：

> 请注意：Flash 现在在移动设备上已被弃用......所以您的上传器将无法在 iphone 上运行，并且上次我检查过 Flash 已从 Android Market 中移除。

与许多其他人一起。

但是它确实通过 PHP 上传到您的服务器。

你只需要像@NickRippe所说的那样设置`upload_max_filesize`，你还需要设置`max_post_size`（尽管我相信如果我能找到链接，我也会读到一些关于它的东西）。

大多数人谈论的其他领域都不需要。当我开始做这件事时，我做了一些真正的挖掘，我从 PHP 邮件列表和错误报告中发现，人们所说的 90% 的东西都是不真实的。

这里有一些人说你应该设置但你并不真的需要：

`max_execution_time`

[https://bugs.php.net/bug.php?id=16880](https://bugs.php.net/bug.php?id=16880)，还有其他类似的社区承认执行直到上传后才生效。

`memory_limit`

[php 的 memory_limit、upload_max_filesize 和 post_max_filesize 之间的关系](https://stackoverflow.com/questions/5106871/relationship-between-phps-memory-limit-upload-max-filesize-and-post-max-filesi)也有关于这方面的错误报告，但现在找不到。

`max_input_time`

[PHP文件上传是否受max_input_time影响？](https://stackoverflow.com/questions/11387113/php-file-upload-affected-or-not-by-max-input-time)

# java - 如何在 JFC 中模拟 JDialog 运动

> ID：12116091
> 
> 赞同：0
> 
> 时间：2012-08-24T20:21:07.227
> 
> 标签：java, swing, animation, jdialog

我有一个`JDialog`显示在屏幕上，我想根据条件模拟它的移动（从一个位置拖动到另一个位置）。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:55:16.663

请参阅下面的这段代码。我刚刚测试过它，它工作正常。这只是一个概念证明。

```
private void startDialog() {
  final JDialog d = new JDialog(this, "Test", true);
  d.getContentPane().add(new JLabel("Something"));
  d.setBounds(100, 100, 400, 300);
  Thread t = new Thread(new Runnable() {
    public void run() {
      for (int i = 0; i < 50; i++) {
        SwingUtilities.invokeLater(new Runnable() {
          public void run() {
            Point p = d.getLocation();
            d.setLocation(p.x + 10, p.y + 10);
          }
        });
        try {
          Thread.sleep(100);
        } catch (InterruptedException e) {
          // ignore
        }
      }
    }
  });
  t.start();
  d.setVisible(true);
} 
```

您可以自己改进代码：

*   使用 a`Timer`而不是常规`Thread`
*   调整睡眠时间和位置跳跃等等

只需从任何 Swing 应用程序调用此方法即可。

# android - Android 随机字符串生成器

> ID：12116092
> 
> 赞同：41
> 
> 时间：2012-08-24T20:21:11.837
> 
> 标签：android

我有个问题。我想绘制一个随机字符串，例如 aXcFg3s2。我在做什么坏事？如何改变我的`random()`

```
private String random;
private String charsEntered;
private EditText et;
private Button ok;
CaptchaInterface.OnCorrectListener mCorrectListener;

public void setOnCorrectListener(CaptchaInterface.OnCorrectListener listener) {
    mCorrectListener = listener;
}

public TextCaptcha(Context context) {
    super(context);
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
}

public static String random() {
    Random generator = new Random();
    String x = (String) (generator.nextInt(96) + 32);
    return x;
}

public void onCreate(Bundle icicle) {
    setContentView(R.layout.main);
    random = random();
    TextView display = (TextView) findViewById(R.id.textView1);
    display.setText("Random Number: " + random); // Show the random number
    et = (EditText) findViewById(R.id.etNumbers);
    ok = (Button) findViewById(R.id.button1);
    ok.setOnClickListener(this);

}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    try {
        charsEntered = et.getText().toString();
    } catch (NumberFormatException nfe) {
        Toast.makeText(et.getContext(), "Bla bla bla",
                Toast.LENGTH_LONG).show();
    }

    if (random == charsEntered) {
        Toast.makeText(et.getContext(), "Good!", Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(et.getContext(), "Bad!", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-24T20:27:58.513

问题是您只处理了一个字符而不是使用循环。

您可以创建一个字符数组，其中包含您希望允许出现在随机字符串中的所有字符，然后在循环中从数组中获取一个随机位置并将其添加到 stringBuilder 中。最后，将 stringBuilder 转换为字符串。

* * *

编辑：这是我建议的简单算法：

```
private static final String ALLOWED_CHARACTERS ="0123456789qwertyuiopasdfghjklzxcvbnm";

private static String getRandomString(final int sizeOfRandomString)
  {
  final Random random=new Random();
  final StringBuilder sb=new StringBuilder(sizeOfRandomString);
  for(int i=0;i<sizeOfRandomString;++i)
    sb.append(ALLOWED_CHARACTERS.charAt(random.nextInt(ALLOWED_CHARACTERS.length())));
  return sb.toString();
  } 
```

在 Kotlin 上：

```
companion object {
    private val ALLOWED_CHARACTERS = "0123456789qwertyuiopasdfghjklzxcvbnm"
}

private fun getRandomString(sizeOfRandomString: Int): String {
    val random = Random()
    val sb = StringBuilder(sizeOfRandomString)
    for (i in 0 until sizeOfRandomString)
        sb.append(ALLOWED_CHARACTERS[random.nextInt(ALLOWED_CHARACTERS.length)])
    return sb.toString()
} 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-08-24T20:39:18.747

您的代码有一些问题。

您不能从 int 转换为字符串。改为将其转换为字符。但是，这只会给您一个字符，因此您可以为字符串的长度生成一个随机数。然后运行 ​​for 循环以生成随机字符。您也可以定义一个 StringBuilder 并将字符添加到其中，然后使用该`toString()`方法获取您的随机字符串

例子：

```
public static String random() {
    Random generator = new Random();
    StringBuilder randomStringBuilder = new StringBuilder();
    int randomLength = generator.nextInt(MAX_LENGTH);
    char tempChar;
    for (int i = 0; i < randomLength; i++){
        tempChar = (char) (generator.nextInt(96) + 32);
        randomStringBuilder.append(tempChar);
    }
    return randomStringBuilder.toString();
} 
```

此外，您应该使用`random.compareTo()`而不是 ==

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2015-11-06T09:52:21.887

您需要导入 UUID。这是代码

```
import java.util.UUID;

id = UUID.randomUUID().toString(); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-09-08T10:29:21.373

这就是我生成具有所需字符和所需长度的随机字符串的方式

```
 char[] chars1 = "ABCDEF012GHIJKL345MNOPQR678STUVWXYZ9".toCharArray();
                                StringBuilder sb1 = new StringBuilder();
                                Random random1 = new Random();
                                for (int i = 0; i < 6; i++)
                                {
                                    char c1 = chars1[random1.nextInt(chars1.length)];
                                    sb1.append(c1);
                                }
                                String random_string = sb1.toString(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-05T13:52:34.497

这个函数在 kotlin 中运行 ->

```
fun randomString(stringLength: Int): String {
    val list = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".toCharArray()
    var randomS = ""
    for (i in 1..stringLength) {
        randomS += list[getRandomNumber(0, list.size - 1)]
    }
    return randomS
}

fun getRandomNumber(min: Int, max: Int): Int {
   return Random().nextInt((max - min) + 1) + min
} 
```

或者你可以使用我的图书馆 [https://github.com/Aryan-mor/Utils-Library](https://github.com/Aryan-mor/Utils-Library)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-25T11:37:45.423

您可以简单地使用以下方法生成 5 个字符的随机字符串，它将返回随机字符串的 arrayList

```
public ArrayList<String> generateRandomString() {

    ArrayList<String> list = new ArrayList<>();
    Random rnd = new Random();
    String str = "";

    String randomLetters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    String randomLetterSmall = "abcdefghijklmnopqrstuvwxyz";

    for (int n = 0; n < 50; n++) {
        str = String.valueOf(randomLetters.charAt(rnd.nextInt(randomLetters.length())));

        str += String.valueOf(randomLetterSmall.charAt(rnd.nextInt(randomLetters.length())));
        str += String.valueOf(randomLetterSmall.charAt(rnd.nextInt(randomLetters.length())));
        str += String.valueOf(randomLetterSmall.charAt(rnd.nextInt(randomLetters.length())));
        str += String.valueOf(randomLetterSmall.charAt(rnd.nextInt(randomLetters.length())));

        //Copy above line to increase character of the String
        list.add(str);
    }
    Collections.sort(list);
    return list;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T20:27:33.227

您不能将 int 强制转换为 String。尝试：

```
 Random generator = new Random();
 String x = String.valueOf (generator.nextInt(96) + 32); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-26T12:59:42.860

```
final  String[] Textlist = { "Text1", "Text2", "Text3"};

TextView yourTextView = (TextView)findViewById(R.id.yourTextView); 
```

`Random random = new Random();`

`String randomText = TextList[random.nextInt(TextList.length)];`

```
yourTextView.setText(randomText); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-06T01:48:42.983

`org.apache.commons.lang3.RandomStringUtils`使用包装快速一个班轮。

```
String randonString = RandomStringUtils.randomAlphanumeric(16); 
```

需要 gradle 构建文件中的库依赖项：

```
implementation 'org.apache.commons:commons-text:1.6' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-22T22:39:21.917

您可以简单地将当前时间（以毫秒为单位）转换为字符串，例如

```
import java.util.Calendar;

String newRandomId = String.valueOf(Calendar.getInstance().getTimeInMillis());

Or

String newRandomId = Calendar.getInstance().getTimeInMillis() + "";

//Eg: output: "1602791949543" 
```

# eclipse - 插件依赖

> ID：12116095
> 
> 赞同：1
> 
> 时间：2012-08-24T20:21:20.970
> 
> 标签：eclipse, eclipse-plugin

考虑以下场景。共有三个插件：pluginA、pluginB 和 pluginC。PluginA 依赖于 pluginB 并重新导出它。PluginC 想要使用 pluginB 并且依赖于 pluginA。既然有依赖pluginC -> pluginA -> pluginB，那么pluginC需要添加pluginB作为它的依赖吗？

我相信它不应该。但是，如果我添加直接依赖 pluginC -> pluginB 一切正常，但如果我删除该依赖并只保留 pluginC -> pluginA，那么我会收到错误消息，指出无法找到来自 pluginB 的类。在什么情况下我会收到这些错误？它是否取决于插件的类型（UI 与非 UI）？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:43:53.387

传递依赖（C 依赖 A 依赖 B）确实有效；我只是测试了一个简单的案例来确定。确保 PluginB 正在导出 PluginC 尝试使用的任何包。如果这不是问题，也许您可​​以使用有关错误的更多详细信息来更新问题。

一般来说，我避免使用重新导出功能，因为它不太明确并且可能引入意外的依赖关系（或者至少是你不知道的依赖关系）。相反，我要么使所有依赖项显式化（PluginC 将直接依赖于 PluginB），要么使用 Imported Packages 代替（它不关心包来自哪个插件，只是它们必须从某个地方可用）；它更灵活。

# android - Android：onResume 是否总是在 onCreate 之后调用？

> ID：12116096
> 
> 赞同：50
> 
> 时间：2012-08-24T20:21:23.627
> 
> 标签：android

我需要知道是否有一个实例会在至少被调用一次`onResume`之前被调用。`onCreate`谢谢。

编辑：从活动生命周期来看，似乎并非如此。但我想仔细检查。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-24T20:24:18.243

`onResume()`永远不会被调用`onCreate()`。

[在活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)中阅读更多信息

![活动生命周期](../Images/5286503898414a9610cfa9cd1070cdae.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-24T20:22:28.653

`onResume()` *当活动进入前台时*将始终调用，但它**永远不会*在之前执行`onCreate()`。*

 ** * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-25T15:58:43.297

![这是基本的活动生命周期，可以帮助您更好地理解](../Images/4b31d3233da469038cc852b98f1f20a2.png)

您可以参考网站了解更多详情
[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-03-27T07:46:51.540

我遇到了一个问题，其中覆盖的 onCreate**没有**被调用。我尝试调试和记录，我发现 oncreate 没有被调用。

原来我覆盖了错误的onCreate

```
@Override
    public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {
        super.onCreate(savedInstanceState, persistentState);
    } 
```

这是正确的。

```
@Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    } 
```

发帖希望能帮到一些可怜的人。:)

所以正确的 onCreate() 总是会在 onResume 之前被调用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-05T06:32:52.513

**注意：此答案仅是**[对已接受答案](https://stackoverflow.com/a/12116144/4758255)的补充。

正如之前的答案所说：

`onResume() will never be called before onCreate().`

[在Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)和[启动 Activity](http://developer.android.com/training/basics/activity-lifecycle/starting.html)中阅读有关它的更多信息。

下面是**Activity 生命周期**的完整图片，包括来自[android-lifecycle 的](https://github.com/xxv/android-lifecycle)**Fragment Lifecycle**：

[![在此处输入图像描述](../Images/865ce714411303e3827cd3abdd3594a9.png)](https://i.stack.imgur.com/HNzS6.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T20:24:12.460

活动有自己的生命周期。只需阅读并查看这里的漂亮图表：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

onResume 不假设在 onCreate 之前运行，因此您假设正确。*

# jquery - 单击功能等价于在 Jquery 中拖动

> ID：12116097
> 
> 赞同：1
> 
> 时间：2012-08-24T20:21:28.447
> 
> 标签：jquery, css

我使用 jQuery UI 设置了拖动。我的问题是当用户开始拖动 div 时，如何向该 div 添加 CSS 类，并在用户完成拖动 div 时将其删除。类似于链接的点击函数事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:24:11.720

查看：http: [//jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

“jQuery UI Draggable 插件使选定的元素可以通过鼠标拖动。可拖动元素获得一个 ui-draggable 类。在拖动过程中，元素也获得一个 ui-draggable-dragging 类”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:24:29.137

```
$( ".selector" ).bind( "dragstart", function(event, ui) {
    $(this).addClass("foo");
});
$( ".selector" ).bind( "dragstop", function(event, ui) {
    $(this).removeClass("foo");
}); 
```

# c# - 使用c#在excel中选择一个工作表

> ID：12116098
> 
> 赞同：11
> 
> 时间：2012-08-24T20:21:46.370
> 
> 标签：c#, .net, excel, excel-2007, office-interop

在 .NET 3.5 中使用 C# 和 Visual Studio 2008，我试图在打开的工作簿中设置焦点（或激活）特定工作表：

以下是一些属性：

```
public Excel.Application xlApp {get;set;}
public Excel.Workbook xlWorkBook { get; set; }
public Excel.Worksheet xlWorkSheet { get; set; }
public Excel.Range range { get; set; } 
```

这是我尝试选择特定工作表的方式：

```
(xlWorkSheet)Application.ActiveWorkbook.Sheets[FormControls.WorksheetFocus]).Select(Type.Missing); 
```

我也尝试过这种方式：

```
((Excel.Worksheet)this.Application.ActiveWorkbook.Sheets[1]).Select(); 
```

我究竟做错了什么？如何使用 C# 在工作簿中选择特定工作表？

* * *

解释定义在哪里：

```
namespace EmailSalesVolumeSolution
{
    class WorkBook
    {
        public string MasterFileName { get; set; }
        public string[] DistinctEmails { get; set; }
        public Excel.Application xlApp {get;set;}
        public Excel.Workbook xlWorkBook { get; set; }
        public Excel.Worksheet xlWorkSheet { get; set; }
        public Excel.Range range { get; set; } 
```

一切都在同一个类和命名空间中

这是它的初始化方式：

```
private void OpenWorkBook()
{
    string str;
    int rCnt = 0;
    int cCnt = 0;

    xlApp = new Excel.ApplicationClass();
    xlWorkBook = xlApp.Workbooks.Open(MasterFileName, 0, true, 5, "", "", true,
        Microsoft.Office.Interop.Excel.XlPlatform.xlWindows,
        "\t", false, false, 0, true, 1, 0);
    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(FormControls.WorksheetEmails); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T06:39:38.123

您可以使用以下代码：

```
Worksheet sheet = (Worksheet)xlApp.Worksheets[1];
sheet.Select(Type.Missing); 
```

或者

```
sheet.Activate(); 
```

我已经使用了这段代码，它对我来说很好。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T20:33:19.943

你的属性初始化了吗？

**如果是**，您可能应该能够通过以下任何一种方式实现您想要实现的目标：

```
xlApp.ActiveWorkbook.Sheets[1].Activate();
xlWorkbook.Sheets[1].Activate();
xlSheet.Activate(); 
```

**如果它们不是**，您应该至少`xlApp`将属性初始化为`Application`您正在使用的对象，然后使用上面的代码。您可以使用下面的代码初始化前两个对象。

```
xlApp = new Microsoft.Office.Interop.Excel.Application();
Workbooks xlWorkbooks = xlApp.Workbooks;
xlWorkbook = xlWorkbooks.Open(@"C:\filename.xlsx"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-24T20:55:19.903

这就是我所做的并且它有效！

```
Excel.Worksheet xlWorkSheetFocus = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(2);
xlWorkSheetFocus.Activate(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-17T13:38:24.663

```
xlWorkSheet = (Worksheet)xlWorkBook.Worksheets.get_Item(2); 
```

或者

```
xlWorkSheet =(Worksheet)xlWorkBook.Sheets["SheetName"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T10:40:00.003

您可以通过以下两种方式进行：

```
Excel.Application xlApp;
Excel.Worksheet xlWorksheet; 
```

1.  `xlWorksheet = xlApp.Worksheets.get_Item(1);`

2.  `xlWorksheet = xlApp.Worksheets[1];`

# mysql - MySQL：Grant Privileges 后跟 Flush Privileges 无效，没有错误（以 root 身份登录）

> ID：12116099
> 
> 赞同：4
> 
> 时间：2012-08-24T20:21:46.307
> 
> 标签：mysql, remote-access, privileges

我和一个团队成员很困惑，因为向远程用户授予权限的命令失败了，但没有错误。新用户已使用 CREATE USER 成功添加到 mysql.user，但 GRANT PRIVILEGES 后跟 FLUSH PRIVILEGES 不会影响授权表。这两个命令都应该说“查询确定”。0 行受影响，'他们这样做。但是 SHOW GRANTS 并没有显示新的权限，我们也不能从指定的远程 ip 使用该用户名登录。谁能解释以下行为？

```
mysql> SELECT CURRENT_USER();     ///I'm definitely in as root user
+----------------+
| CURRENT_USER() |
+----------------+
| root@localhost |
+----------------+
1 row in set (0.00 sec)

mysql> GRANT ALL PRIVILEGES ON *.* TO 'myNewUser'@'remoteIP';  //grant to existing user
Query OK, 0 rows affected (0.00 sec)

mysql> FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)

mysql> SHOW GRANTS;

 | Grants for root@localhost                                                                                                                   

| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY PASSWORD           '*////TakenOut///' WITH GRANT OPTION |
 | GRANT PROXY ON ''@'' TO 'root'@'localhost' WITH GRANT OPTION                                                                              
2 rows in set (0.00 sec) 
```

我希望第三行具有“myNewUser”的权限。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T20:29:32.307

该`SHOW GRANTS`语句显示当前用户的授权。在您的情况下，对于 root@localhost。因此，您不应期望看到第三行具有`myNewUser`.

相反，查询 mysql.user 表...

```
SELECT * FROM mysql.user WHERE User = 'myNewUser' 
```

我会验证密码是否设置为`'myNewUser'@'remoteip'`. （MySQL 通过用户名和主机的组合来识别“用户”。用户`'myNewUser'@'thisip'`是不同于 的用户`'myNewUser'@'thatip'`。）

* * *

此外，我们的 MySQL my.cnf 文件中有此设置：

```
# Disable DNS Lookup (use IP addresses only)
skip-name-resolve 
```

所以我们使用 IP 地址，而不是主机名。（这避免了当 DNS 无法从 IP 地址进行 DNS 反向查找以获取主机名时发生的连接问题。）

[http://dev.mysql.com/doc/refman/5.1/en/host-cache.html](http://dev.mysql.com/doc/refman/5.1/en/host-cache.html)

底线是 MySQL 对 IP 地址进行“反向查找”以获取主机名。如果它无法获取给定 IP 地址的主机名，则来自该 IP 地址的连接将失败。

# jquery - 使用 jquery 或 ajax 显示/隐藏内容

> ID：12116100
> 
> 赞同：0
> 
> 时间：2012-08-24T20:21:58.650
> 
> 标签：jquery, html, css, ajax, dynamic

目前我正在设计一个*我不太了解ajax但愿意/渴望学习*的网页）或者是否最好继续使用标准的jquery显示/隐藏，如果是这样，是什么让一个比另一个更受欢迎？我正在加载的这个内容将是静态内容 btw[链接](http://taylortomasini.me/projects)。在网站的项目选项卡上，我遇到了一个问题，因为我对正确的协议没有经验（对不起）。在侧面菜单上，将有一个选项可以选择要显示的某些内容（CAD、FEA、MATLAB 等），然后选择的内容将显示在网站的主要内容部分。我遇到的问题是，当我使用 javascript/jquery 将所有内容放在 1 页上，然后在用户使用锚点选择时显示/隐藏各个部分时，页面加载速度非常慢，因为内容很多. 我想知道在这种情况下使用 AJAX 是否更好，如果是这样，我将如何在内容部分加载这些新内容（使用 iframe 或创建新页面？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:45:14.297

您可以使用 jQuery [ajax](http://api.jquery.com/category/ajax/)按需加载内容。`load`方法很适合这个。

我认为您对 jQuery 和 ajax 感到困惑。jQuery 是一个让我们的生活更轻松的 javascript 库。如果没有 jQuery，你也可以做 ajax，但正如我所说，它让我们的生活更轻松。所以我们要使用它。

假设您的主页中有这样的标记来显示链接或菜单，另一个 div 来显示链接的内容，并且您在此页面中也包含了 jQuery 库。

```
<div class="divNavigation">
  <a href="about.html" class="ajaxLink" >About</a>
  <a href="about.contact" class="ajaxLink">Contact</a>
  <a href="about.team" class="ajaxLink">Team</a>
</div>
<div id="divContentArea">
</div> 
```

现在让我们监听这些链接的点击事件，然后异步加载链接目标的内容，并将异步调用的结果加载到我们的内容 div。

添加这个 javasctipt

```
<script type="text/javascript">

  $(function(){ 

       $("a.ajaxLink").click(function(e){    // #1
          e.preventDefault();                     // #2
          var linkTargetUrl=$(this).attr("href");   // #3
          $("#divContentArea").load(linkTargetUrl);  // #4

       });    
  });

</script> 
```

## 我们在这里做什么 ？

**#1：**我们正在寻找`click`DOM 中所有带有 css 类名称 ajaxLink 的标签的事件。每当点击事件发生时，内部代码就会执行。

*   如果我们想选择具有类名的元素，我们使用`$(".className")`，其中 className 是元素的 CSS 类名。在我们的示例中，我们告诉 jquery 给我们所有具有该类名称的锚标记。

*   如果我们想选择一个带有 ID 的元素），我们使用`$("#elementID")`，其中 elementID 是元素的 CSS ID。

更多关于 jQuery 选择器[的信息在这里](http://api.jquery.com/category/selectors/)。

**#2：**我们将异步加载内容，而页面实际上并没有导航到目标 url。所以我们需要防止链接点击的默认行为。我们正在使用[preventDefault](http://api.jquery.com/event.preventDefault/)方法（用 jQuery 库编写）来执行此操作。所以页面将保持原样。不重新加载。

**#3：**我们正在读取`href`链接的属性值并将该值设置为局部变量。`$(this)`表示当前激活的项目。因为我们在锚标记的 clink 事件中工作，所以`$(this)`意味着单击的锚元素。

**#4：**我们正在使用[load](http://api.jquery.com/load/)方法（在 jQuery 中）进行 ajax 调用；此方法将加载目标 url 的内容并将其设置为具有 Id 的 div 的内部 html `divContentArea`。

我建议您使用一些示例代码。将 alert/console.debug 放在变量/对象上，看看会有什么价值。这是学习这个的最好方法。祝你好运。

*最后声明（纯属个人）：* ***jQuery 是我最近看到的最好的东西之一。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:52:20.673

尝试使用 Ajax，确保每个包含的内容都可以单独加载，就像使用 iframe 一样。

创建一个内容容器，然后使用 Jquery ajax

```
$.ajax({
  url: 'targethtml.html',
  success: function(data) {
    $('#containerid').html(data);
  }
}); 
```

这就对了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:44:36.263

[这](http://fiddle.jshell.net/C8Xpd/)是使用 jquery 库简单显示和隐藏问题的工作示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:45:43.383

实际上，我认为纯 Ajax 不是这种情况下的最佳解决方案。原因之一是在浏览器中禁用了 javascript 的人将无法浏览您的网站。其次，也许更重要的是，你在搜索引擎上的得分会很差，因为爬虫通常不运行 javascript，因此不会索引你的大部分内容。

我建议您使用一组标准的 html/php 页面。您可以为每个页面上相同的内容创建一个基本页面，例如菜单、页眉、页脚和布局。然后，您可以在此模板中包含每个页面的不同内容，即您现在在内容区域中加载的文本和 html。这可以通过一些服务器端脚本（如 php）轻松完成。这实际上并不难实现，并使您的代码易于维护。拥有实际不同的页面将解决我上面描述的非 js 用户和 SEO 的问题。

设置好这个结构后，你仍然可以按照@Shyju 描述的方式使用ajax，给使用js 的用户带来更好的体验。您必须将菜单中的链接设置为非 js 用户的实际页面，然后您可以按照已经演示的方式用 jQuery 覆盖它们。您所要做的就是让 Ajax 调用获取包含您的页面特定内容的页面。这很容易与您的服务器端脚本用于包含在页面模板中的页面相同*

# ruby-on-rails - 关注和取消关注文章

> ID：12116102
> 
> 赞同：1
> 
> 时间：2012-08-24T20:22:05.687
> 
> 标签：ruby-on-rails, ruby

我正在尝试创建一个用户可以关注或取消关注文章的应用程序。为此，我创建了三个模型`Customer`，`Article`和`Pin`。

这些是关系：

```
Customer
  has_many articles
  has_many pins
Article
  has_many pins
  belongs_to customer
Pins
  belongs_to customer
  belongs_to article 
```

我相信 a`Pin`必须嵌套在 a 中`Article`。我的`route.rb`样子是这样的：

```
resources :articles do
  resources :pins, :only => [:create, :destroy]
  end
end 
```

在`article#index`我有一个创建或破坏关系的表格：

```
# To create
<%= form_for [article, current_customer.pins.new] do |f| %>
  <%= f.submit "Pin" %>
<% end %>
# To destroy which doesn't work because i guess you can't do the form like that
<%= form_for [article, current_customer.pins.destroy] do |f| %>
  <%= f.submit "Pin" %>
<% end %> 
```

以下是相应的控制器操作：

```
def create
  @article = Article.find(params[:article_id])
  @pin = @article.pins.build(params[:pin])
  @pin.customer = current_customer

  respond_to do |format|
    if @pin.save
      format.html { redirect_to @pin, notice: 'Pin created' }
    else
      format.html { redirect_to root_url }
    end
  end
end

def destroy
  @article = Article.find(params[:article_id])
  @pin = @article.pins.find(params[:id])
  @pin.destroy

  respond_to do |format|
    format.html { redirect_to root_url }
  end
end 
```

现在在这里我的两个问题：

*   如何创建可以删除当前关系的表单？
*   在我的表单中，我只想显示其中一个按钮。如何有条件地显示正确的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:05:05.150

您不需要表格来删除关系，链接就可以了。我假设您将在索引视图中遍历您的文章——如果是这样，这样的事情怎么样？

```
<% @articles.each do |article| %>

  ...

  <% if (pin = current_customer.pins.find_by_article(article)) %>
    <%= link_to 'Unfollow', articles_pin_path(article, pin), :confirm => "Are you sure you want to unfollow this article?", :method => :delete %>
  <% else %>
    <%= link_to 'Follow', articles_pins_path(article), :method => :post %>
  <% end %>
<% end %> 
```

关于用于创建/销毁记录的一个警告`link_to`是，如果禁用了 javascript，它们将回退到使用 GET 而不是 POST/DELETE。有关详细信息，请参阅[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)。

# c - 为什么操作系统不（不能）将 C 代码直接翻译成机器语言，而是先将其翻译成汇编语言？

> ID：12116103
> 
> 赞同：2
> 
> 时间：2012-08-24T20:22:06.880
> 
> 标签：c, assembly, compiler-construction

据我了解，当一个程序（例如用 C 编写的）被编译时，它首先被翻译成汇编语言，然后被翻译成机器语言。为什么不能（不是）跳过“汇编语言步骤”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:22:53.753

您的理解是错误的，编译器不一定将 C 代码翻译成汇编程序。它们通常执行多个阶段并具有内部表示，但这不一定类似于人类可读的汇编程序。

在这里，我找到了[LLVM](http://www.aosabook.org/en/llvm.html)的一个很好的介绍。LLVM 是用于 clang 的编译器工具包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T21:44:06.110

对于编译器开发人员来说更容易。

可以编写一个可以读取 C 并编写目标代码的编译器。但是，这需要编译器编写者编写所有对指令进行编码的计算。指令编码在某些机器上很复杂。此外，还有一些需要填写的字段取决于其他交互，例如分支目标的距离，这取决于分支和目标之间的指令。

此外，编写编译器的部分方式是使用诸如“要递增对象 x，请发出递增指令”之类的模式。为了直接编写目标代码，您必须将要写入的所有指令编码到这些模式中。这意味着你的模式必须有某种语言来描述指令。

好吧，我们已经有了一种语言：汇编语言。因此，以“增加对象 x​​，发出”之类的方式编写模式会更容易`inc x`。</p>

现代编译器有很多层。有一个前端可以读取 C 文本（或其他语言）并将其转换为编译器内部的语言。有一个优化器对内部语言（或它的表示）进行操作并尝试改进代码。有一个后端可以将内部语言转换为汇编语言。有一个汇编程序可以将程序集转换为目标代码。还有一个链接器将目标代码链接到可执行文件中。

与许多复杂的任务一样，当复杂的任务被分成很好的部分时，人类的大脑更容易处理它。这减少了错误并缩短了使用软件所需的时间。它还使软件变得灵活，因为我们可以更改前端以支持新的语言（例如，Java 代替 C）或更改后端以支持新的处理器（从 Intel 汇编更改为 PowerPC 汇编）。更改一个优化器可以改进所有编译器，包括 Java 和 C 以及 Intel 和 PowerPC。

我们用来编译的gcc命令实际上只是一个驱动程序，它调用其他执行前端处理、优化、汇编和链接的程序。您也可以单独调用这些阶段中的大多数，或者使用开关告诉 gcc 向您显示它正在使用的命令。

此外，GCC 具有允许开发人员直接插入与 C 代码混合的汇编语言的功能。这迫使 GCC 包含一个汇编程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T20:26:19.793

操作系统不会做这样的事情。这是编译器的工作。事实上，许多*确实*直接发出目标文件——你必须明确要求它们发出汇编代码。其他人选择不这样做，因为发出功能齐全的目标文件需要有关为此存在的各种格式的专业知识。汇编器具有各种方便的功能，使工作更容易，可以（有时？）针对多种目标文件格式而无需更改汇编代码。此外，发出带注释的汇编代码是一个非常有用的功能，因此没有单独的代码生成器仅用于直接目标文件的发出可以在没有任何限制的情况下节省您的时间（除了需要汇编程序），这使得它在您受到限制时成为一个有吸引力的选择资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T20:25:25.973

取决于编译器；实际上不需要汇编代码。

也许您正在谈论的任何编译器（GNU-CC？）的作者认为，如果他们不必自己解决某些问题（例如分支），对他们自己来说会稍微容易一些。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T20:49:18.897

汇编代码纯粹是机器代码**以及**链接器在将不同翻译单元的输出放在一起时所需的符号引用和重定位的一种方便的、有点人类可读的表示。如果没有中间的汇编语言步骤，编译器还将负责以链接器所需的形式生成重定位，这是可行的，但很痛苦。由于已经存在具有这种能力的汇编器来处理手写的汇编代码，因此使用它是有意义的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T21:29:23.103

通常没有汇编阶段。MSVC (cl.exe) 和 GCC 立即生成机器代码 (.obj, .o)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-25T10:10:26.713

交叉编译器可以直接生成机器代码，而无需安装交叉编译器的操作系统的帮助。

例如windows中安装的tornado包可以为vxworks生成机器码。

# visual-studio - Visual Studio 2012 SDK 示例在哪里？

> ID：12116105
> 
> 赞同：12
> 
> 时间：2012-08-24T20:22:15.040
> 
> 标签：visual-studio, sdk, visual-studio-2012

我刚刚安装了 Visual Studio 2012 SDK，但找不到任何文件。

安装程序在磁盘上使用了超过 100 MB - 但文件在哪里？

我搜索了“开始”菜单，只找到了指向 Web 的链接。参考页面说有一些源代码示例，但是这些在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T13:37:03.867

似乎只有[VS 2010 SDK](http://code.msdn.microsoft.com/windowsdesktop/Visual-Studio-2010-SDK-ddfe1372)。

我发现解决方案文件设置为11.0版（即VS 2012）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T15:52:53.240

在这里完整下载 [https://code.msdn.microsoft.com/VIsual-Studio-2013-SDK-728822a7](https://code.msdn.microsoft.com/VIsual-Studio-2013-SDK-728822a7)

此处的单个链接 [http://blogs.msdn.com/b/vsx/archive/2014/05/30/vs-2013-sdk-samples-released.aspx](http://blogs.msdn.com/b/vsx/archive/2014/05/30/vs-2013-sdk-samples-released.aspx)

# php - 调用函数作为参数，这是不好的做法吗？

> ID：12116111
> 
> 赞同：3
> 
> 时间：2012-08-24T20:22:32.077
> 
> 标签：php, function

```
$myVar=myFunction(array_reverse(explode('.', $_SERVER['SERVER_NAME']))); 
```

像这样的嵌套函数有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:34:19.530

只要您可以*保证每个函数总是返回所需的类型，*就可以了。例如，如果一个函数可能返回一个 FALSE 值，它可能会被强制转换为一个意外的值。

提供的示例有效，因为两者`explode`（如调用）并且`array_reverse`都将始终返回一个数组。

一个反例：

```
mysqli_query(mysqli_connect(...), 'INSERT INTO tbl VALUES ....'); 
```

因为`mysqli_connect`可能会返回一个资源，或者`FALSE`它不应该像这样被链接。应始终检查返回值的正确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:27:09.437

这样做是完全有效的，但要保持可读性。如果您嵌套 15 个函数调用或嵌套几个函数调用，每个函数调用具有多个参数，您将获得非常不愉快的调试体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:23:04.383

不，这样做是完全有效的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T20:27:48.257

这可能是一种不好的做法，因为它使代码更难理解，因此也更难维护。
克服此问题的一个好做法是（大量）注释您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T20:30:01.220

人们一直在嵌套这样的函数。函数旨在以这种方式使用。由于函数可以返回一个值，因此将一个变量分配给一个函数，将该函数的值放入 PHP 变量中是有意义的。

感谢上帝返回值的函数，否则，以另一种方式思考它会一团糟......

# apache - 使用 Apache 的 .htaccess 重定向到移动版本并保留 URL 重写规则

> ID：12116113
> 
> 赞同：1
> 
> 时间：2012-08-24T20:22:43.187
> 
> 标签：apache, .htaccess, url-rewriting

我有一本书 PHP 网站，它使用了已经在我的 Apache 服务器上的 .htaccess 文件中定义的 URL 重写规则，因此由于以下规则，我已经有了类似的 URL

[http://www.example.com/livro/name-of-book.html](http://www.example.com/livro/name-of-book.html)

```
RewriteRule ^livro/([^/]+)\.html$ livro.php?livro=$1 [QSA,L] 
```

我想改进我的网站并制作它的移动版本，我想使用诸如

[http://m.example.com/livro/name-of-book.html](http://m.example.com/livro/name-of-book.html)

我应该将哪些规则附加到我的 .htaccess 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:28:41.660

在您拥有的规则之前，添加以下内容：

```
RewriteCond %{HTTP_HOST} !^m.example.com$ [NC]
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
RewriteRule ^(.*)$ http://m.example.com/$1 [L,R=302] 
```

# asp.net - System.Net.Mail - 发送两封电子邮件？

> ID：12116114
> 
> 赞同：0
> 
> 时间：2012-08-24T20:22:47.897
> 
> 标签：asp.net, vb.net, smtp

使用以下功能：

```
Public Sub SendMail(ByVal SendFrom As String, ByVal SendTo As String, ByVal Subject As String, ByVal Body As String)

    Dim client As New SmtpClient
    Dim message As New MailMessage

    message.Body = Body
    message.Subject = Subject
    message.From = New MailAddress(SendFrom)
    message.To.Add(New MailAddress(SendTo))

    client.Port = "25"
    client.Host = "smtp.myserver.com"

    client.Send(message)

End Sub 
```

我称之为

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click

    Dim iandamsb As New StringBuilder

    iandamsb.AppendLine("Please make the following changes:")
    iandamsb.AppendLine("")
    iandamsb.AppendLine("Current name:" & txtCurrentName.Text)
    iandamsb.AppendLine("New name:" & txtNewName.Text)
    iandamsb.AppendLine("New username:" & txtNewUsername.Text)
    iandamsb.AppendLine("Applications:" & txtOtherApplications.Text)

    Dim iandambody As String = iandamsb.ToString

    SendMail(txtRequesterEmail.Text, "ayockel@mydomain.com", "Name Change Request - " & txtCurrentName.Text, iandambody)

End Sub 
```

它工作得很好，但是它发送的是两封电子邮件而不是一封。谁能弄清楚它为什么要发送副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:54:02.913

我冒昧地猜测您将按钮单击事件绑定*了两次*：一次通过`OnClick`标记中的属性：

```
<asp:Button OnClick="btnSubmit_Click" runat="server" ... /> 
```

然后再次通过代码隐藏`Handles`：

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) 
    Handles btnSubmit.Click 
```

如果是这样的话，我会删除其中一个。我会保留后者，以便您知道该`btnSubmit_Click`事件在编译时已正确连接。

[讨论这个问题](http://weblogs.asp.net/nannettethacker/archive/2008/02/19/onclick-and-handles-caution.aspx)。

# f# - F# 类型提供程序与 Lisp 宏

> ID：12116119
> 
> 赞同：15
> 
> 时间：2012-08-24T20:23:07.847
> 
> 标签：f#, macros, lisp, metaprogramming, type-providers

我一直在阅读有关 F# 3.0 类型提供程序（例如[此处](http://msdn.microsoft.com/en-us/library/hh156509.aspx)）的信息，它们似乎基于一种编译时代码生成。在这方面，我想知道它们如何与 Lisp 宏进行比较。似乎 F# 3.0 类型提供程序和 Lisp 宏都允许用户代码在编译时执行并引入编译器可用的新类型。任何人都可以阐明所涉及的问题和细微差别吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T20:55:10.327

F# 类型提供程序和其他语言的元编程技术之间存在一些重叠，但我同意 Daniel 的观点，即它们没有太多共同点。F# 有一些其他元编程技术，例如可能更接近 LISP 宏的引用。

尤其是：

*   LISP 宏通常用于转换表达式（您可以获取 LISP 表达式并解释它或转换它然后执行它）。请注意，转换采用 LISP 表达式作为输入 - 另一方面，类型提供程序只能采用非常有限的参数（字符串、整数）。

*   报价比较相似。它们可用于处理 F# 表达式 - 您可以将一段 F# 代码视为数据并对其进行解释或转换。转换采用 F# 表达式（的子集），但通常不执行它。

*   类型提供程序纯粹用于生成*类型*。由于 LISP 是动态类型的，所以这并不是您在 LISP 中遇到的问题。然而，它是一种代码生成（您当然可以在 LISP 中进行的一种元编程形式）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T00:08:37.720

F# 类型提供程序的一个有趣方面是它们不仅在编译时工作，而且在*设计时工作*，也就是说，以与完整 IDE 工具交互的方式工作。类型提供程序提供来自外部模式化数据源的“类型”，但实现机制还支持许多 IDE 工具，包括 IntelliSense（标识符自动完成）、文档、数据工具提示等。结合交互式 REPL，这提供了简单的探索不熟悉的数据集的方式与任何其他语言的体验都不完全一样。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-24T20:39:37.580

我不熟悉 Lisp 宏，但宏通常用于元编程（以节省输入和向语言添加控制结构）。另一方面，类型提供程序为外部数据源生成强类型 API。

除了它们共同的编译时“扩展”之外，我想不出任何东西。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-26T09:53:18.963

F# 类型提供程序是编译时代码生成的一种非常特殊的情况，即它们旨在通过编译时代码生成来解决特定类型的问题。它们允许您在编译时生成新类型。

LISP 宏是一种更通用的元编程方法，因此可以满足许多用例。宏基本上将输入作为 S-expression （代码或数据）并发出其他 S-expression 。

因此，可以使用宏轻松实现类型提供程序，而使用类型提供程序无法涵盖“宏可以做什么”的全部范围。

# php - php umask(0) 目的是什么

> ID：12116121
> 
> 赞同：63
> 
> 时间：2012-08-24T20:23:10.677
> 
> 标签：php

`umask(0);`在php中使用的目的是什么？

我已经看过几次了，但无法从文档中弄清楚它到底做了什么。

有人可以解释一下，什么时候有用吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-24T20:33:54.313

设置`umask`to `0000`（或只是`0`）意味着新创建的文件或创建的目录将没有最初撤销的权限。换句话说，a`umask`为零将导致所有文件被创建为`0666`或世界可写。`umask`在is时创建的目录`0`将是`0777`.

通常，当您看到`umask(0)`它之后应该直接调用 to`chmod()`以将新创建​​的文件或目录所需的权限显式设置为非全局可写的权限。

**将 umask 设置为零时要小心！** 这可能很危险，并且仅对创建稍后必须由 Web 服务器写入的文件有用，当 Web 服务器作为不同的用户运行时，“真实”用户也需要能够修改创建的文件由网络服务器。否则，系统的默认 umask 可能类似于`0022`，可由文件所有者写入，但不能由其他人写入。在这种情况下，如果您以普通用户帐户登录机器，您将*无法*写入由 PHP 下的 Web 服务器创建的文件。

与其创建全局可写文件，不如更明确地管理 Web 服务器正在写入的目录。如果在目录中创建的文件应该具有某些组权限，则建议在目录上设置 sgid 位，以便其中的新文件继承组所有权。需要访问该文件的用户应该是有权访问该文件的组的成员。这比创建世界可读、可写文件安全得多。

```
php > umask(0);
// Should get created as 666
php > touch('file1.txt');

// "2" perms revoked from group, others, gets created as 644
php > umask(022);
php > touch('file2.txt');

// All revoked (2,4) from group, others, gets created as 600
php > umask(066);
php > touch('file3.txt');

-rw-rw-rw-   1 me  group     0 Aug 24 15:34 file1.txt
-rw-r--r--   1 me  group     0 Aug 24 15:35 file2.txt
-rw-------   1 me  group     0 Aug 24 15:37 file3.txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T20:33:08.747

umask 基本上是创建文件的默认设置。从本质上讲，打开默认 chmod 然后写入文件比先写入然后 chmod 更安全（有人说）。归根结底，完成文件写入和运行 chmod 之间的时间最多只有几毫秒，所以我对此表示怀疑。

```
umask() sets PHP's umask to mask & 0777 and returns the old umask 
```

它基本上将默认写入权限设置为您在 Linux 等操作系统上输入的任何内容，然后返回旧的，以便您可以将其重置。这适用于 PHP 进程本身。

文档页面上的注释：http: [//php.net/manual/en/function.umask.php](http://php.net/manual/en/function.umask.php)将通过示例进行说明。

# java - 通过反射构造枚举的设计模式

> ID：12116123
> 
> 赞同：0
> 
> 时间：2012-08-24T20:23:16.850
> 
> 标签：java, design-patterns, constructor, enums

我面临以下情况：

*   数据库条目被转换为枚举
*   这些条目与枚举常量不同

例如我有一个条目：

*应该映射到枚举的*苹果蛋糕*`APPLE_CAKE`*

 *因此，这涉及到字符替换等，然后我才能调用`valueOf`. 由于我将数据库实体映射到 Java 对象，因此我通过反射来实现。

如果找到枚举字段并读取数据库值，我需要调用适当的构造函数。我目前的解决方案是使用`Entity`我已经**记录的标记接口来实现自定义静态方法** `fromString(String)`。

我不喜欢这个想法的地方是实现者没有被强制实现静态方法。所以我在想，是不是有一个合适的创造模式可以应用在这种情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:40:00.150

为实例创建指定接口的最佳模式是[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

`EntityFactory`制作一个名为或类似的额外接口。`Entity`为每种类型实现一个具体工厂。使用这些工厂实例来创建`Entity`实例。

```
public interface EntityFactory<T extends Entity>
    T create(String str);
} 
```*

# java - 如何在 SWT TreeItem 上设置多个图像？

> ID：12116125
> 
> 赞同：0
> 
> 时间：2012-08-24T20:23:19.267
> 
> 标签：java, swt

我在一个 SWT`Tree`上工作，每个都`TreeItem`需要有多个图像。现在我正在尝试做

```
treeItem.setImage(index, Image) 
```

并尝试`Images`在单个`TreeItem`. 但这似乎不起作用。这个方法是关于什么的？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:37:18.220

我真的没有看到你的问题。以下内容非常适合我：

```
public static void main(String[] args)
{
    Display display = Display.getDefault();
    Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Tree tree = new Tree(shell, SWT.NONE);
    tree.setHeaderVisible(true);        

    TreeColumn column1 = new TreeColumn(tree, SWT.LEFT);
    column1.setText("Column 1");
    column1.setWidth(50);
    TreeColumn column2 = new TreeColumn(tree, SWT.LEFT);
    column2.setText("Column 2");
    column2.setWidth(50);
    TreeColumn column3 = new TreeColumn(tree, SWT.LEFT);
    column3.setText("Column 3");
    column3.setWidth(50);

    Image image = YOUR_IMAGE_HERE;

    TreeItem item = new TreeItem(tree, SWT.NONE);
    item.setImage(0, image);
    item.setImage(1, image);
    item.setImage(2, image);

    shell.pack();
    shell.open();

    while(!shell.isDisposed())
    {
        if(!display.readAndDispatch())
            display.sleep();
    }
} 
```

# python - python产量生成器变量范围

> ID：12116127
> 
> 赞同：4
> 
> 时间：2012-08-24T20:23:34.357
> 
> 标签：python, regex, scope, generator, yield

我正在使用 yield 创建一个生成器，该生成器返回使用正则表达式和 re.sub() 提取的字符串块。虽然我找到了一种可行的方法，但我对为什么它以一种方式而不是另一种方式工作感到有些困惑，如下所示：

这不起作用（processchunk() 没有分配给 splitmsg 中声明的块）：

```
def splitmsg(msg):
    chunk = None
    def processchunk(match):
        chunk = match.group(1)
        return ""
    while True:
        chunk = None
        msg = re.sub(reCHUNK,processchunk,msg,1)
        if chunk:
            yield chunk
        else:
            break 
```

这确实有效（注意唯一的区别是块现在是一个列表块）：

```
def splitmsg(msg):
    chunks = [ None, ]
    def processchunk(match):
        chunks[0] = match.group(1)
        return ""
    while True:
        chunks[0] = None
        msg = re.sub(reCHUNK,processchunk,msg,1)
        if chunks[0]:
            yield chunks[0]
        else:
            break 
```

我的问题基本上是为什么块/块变量的范围似乎取决于它是普通变量还是列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:32:42.567

在 python 中，如果从中读取变量，则可以从周围范围中“拉出”变量。所以以下将起作用：

```
def foo():
    spam = 'eggs'
    def bar():
        print spam
foo() 
```

因为变量 'spam' 在周围的范围内被查找，`foo`函数。

但是，您不能*更改*周围范围的值。您可以更改*全局*变量（如果您`global`在函数中声明它们），但您不能`spam`对上述函数中的变量执行此操作。

（Python 3 改变了这一点，它添加了一个新的关键字`nonlocal`。如果你定义`spam`为`nonlocal`inside，`bar`你可以为该变量分配一个新的值 inside `bar`。）

现在到你的名单。发生的事情是你根本没有改变变量`chunks`。在整个代码中，`chunks`指向一个列表，并且仅指向该列表。就 python 而言，变量在函数`chunks`内没有改变。`processchunk`

*确实*发生的是您更改了列表的*内容*。您可以自由地为 分配一个新值`chunks[0]`，因为那不是变量，它是第一个索引`chunks`引用的列表。`chunks`Python 允许这样做，因为它不是变量赋值，而是列表操作。

因此，您的“解决方法”是正确的，即使有些晦涩难懂。如果你使用 Python 3，你可以声明`chunks`为`nonlocal`inside `processchunk`，然后事情也可以在没有列表的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:34:26.760

在第一种情况下，您正在创建一个名为 的新局部变量`chunk`。如果您在函数内部分配变量，则变量被视为函数的局部变量。在第二种情况下，您正在修改外部变量引用的列表`chunk`。因为您没有分配给这个变量，所以它不会被视为本地变量。例如，参见[这个先前的问题](https://stackoverflow.com/questions/11442477/multiprocessing-variable-being-referenced-before-assignment-in-some-cases-but-n)。

在 Python ( ) 中分配一个裸名`someName = ...`与其他任何东西都不一样；特别是它与项目分配 ( `someName[0] = ...`) 不同。后者在后台调用方法来改变列表。

# php - 如何在uploadify/uploadifive 中使用OnQueueComplete 事件在队列完成时发送电子邮件？

> ID：12116133
> 
> 赞同：0
> 
> 时间：2012-08-24T20:24:03.853
> 
> 标签：php, javascript, email, events, uploadify

我正在使用uploadify/uploadifive 来管理对我网站的上传。每次上传队列完成时，我都想发送一封电子邮件。uploadify 和 uploadifive 都有一个[OnQueueComplete 事件](http://www.uploadify.com/documentation/uploadifive/onqueuecomplete-2/)，可以传递参数，例如“count”返回上传的总数，所以我想我会用它来触发一个发送电子邮件的 PHP 脚本，但我不确定如何做到这一点以及如何将“计数”参数传递给脚本。下面是使用 onQueueComplete 方式的示例：

```
'onQueueComplete' : function(uploads) {
            alert(uploads.successful + ' files were uploaded successfully.');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:38:49.593

您将不得不进行一个 Ajax 调用，该调用将从服务器发送一封电子邮件：

```
var sendEmailOnUploadComplete = function( uploads ) {
    //using jQuery
    $.post( '/sendEmail.php' );
};

 'onQueueComplete' : sendEmailOnUploadComplete 
```

更多关于 jQuery.post 的信息在这里：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# sql-server - 插入时触发

> ID：12116134
> 
> 赞同：0
> 
> 时间：2012-08-24T20:24:05.837
> 
> 标签：sql-server, sql-server-2008, tsql

如何在插入时创建具有可能 ROUND 值的触发器？

此触发器不起作用:(

```
CREATE TRIGGER test
   ON repaymentevents
   AFTER INSERT
AS
BEGIN
    SELECT round(value, 2) FROM Inserted 
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:35:32.120

正如@marc_s 所说，我认为您需要一个`INSTEAD OF`触发器：

```
CREATE TRIGGER test
   ON repaymentevents
   INSTEAD OF INSERT
AS
BEGIN
    INSERT INTO repaymentevents
    SELECT round(SomeValue, 2) FROM Inserted 
END 
```

[这是一个例子。](http://sqlfiddle.com/#!3/0d29d/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:33:57.343

这是你需要的吗？这是空气代码，显然我无法测试，因为我没有你的桌子，但希望你能明白。

```
CREATE TRIGGER test
   ON repaymentevents
   AFTER INSERT
AS
BEGIN
    UPDATE repaymentevents 
     INNER
      JOIN INSERTED I
        ON I.id = repaymentevents.id
       SET value = round(i.value, 2)
END 
```

# django - django - 显示内联表单集中的单个字段

> ID：12116135
> 
> 赞同：0
> 
> 时间：2012-08-24T20:24:06.200
> 
> 标签：django

我试图只显示内联表单集中的单个字段，但该字段不会显示：

在模板中：

```
{{ formset.phone_number }} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:25:30.753

遍历表单集中的表单：

```
{% for form in formset %}
    {{ form.phone_number }}
{% endfor %} 
```

请参阅[有关表单集的文档](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)：

> 表单集使您能够迭代表单集中的表单并像使用常规表单一样显示它们：

```
>>> formset = ArticleFormSet()
>>> for form in formset:
...     print(form.as_table()) 
```

# c++ - OpenCv：第二个 cvPutText 未执行

> ID：12116137
> 
> 赞同：0
> 
> 时间：2012-08-24T20:24:07.623
> 
> 标签：c++, opencv

我`cvPutText`在一个循环中使用它工作正常（打印一些连接到每个轮廓附近不同轮廓的数据）。问题是，当尝试`cvPutText`在循环中或循环之前使用另一个（例如，在图像的左上角打印帧号）时，只有第一个`cvPutText`被执行和打印。第二个被忽略。

代码如下所示：

```
char text[80]; 
```

在每个循环中：

```
char nam[] = "id : ";
char na[] = "  area : ";
char ka[] = "\n cNr : ";
sprintf(text,"%s%d%s%d%s%d", nam, (*obListIter)->id, ka, contNumber, na ,area);
CvFont font;
cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.4, 0.4, 0, 1, 8);
cvPutText(cv_obj_rgb, text, cvPoint(boxPoints[4].x, boxPoints[4].y), &font, cvScalar(255, 255, 255, 0)); 
```

另一个`cvPutText`看起来完全一样，只是字体（font2）、字符和文本不同。

有人可以帮忙吗？因此我已经浪费了几天的时间，我真的需要这个功能来分析我的卡尔曼滤波器的性能并最​​终完成我的学士论文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:26:54.317

你应该只使用`cvInitFont`一次，不要循环重复。

```
CvFont font1;
cvInitFont(&font1, CV_FONT_HERSHEY_SIMPLEX, 0.4, 0.4, 0, 1, 8);
CvFont font2;
cvInitFont(&font2, CV_FONT_HERSHEY_SIMPLEX, 0.4, 0.4, 0, 1, 8); 
```

环形：

```
char nam[] = "id : ";
char na[] = "  area : ";
char ka[] = "\n cNr : ";
sprintf(text,"%s%d%s%d%s%d", nam, (*obListIter)->id, ka, contNumber, na ,area);
cvPutText(cv_obj_rgb, text, cvPoint(boxPoints[4].x, boxPoints[4].y), &font, cvScalar(255, 255, 255, 0)); 
```

# python - 如何将 csv 文件导入 ms sql 数据库？

> ID：12116142
> 
> 赞同：2
> 
> 时间：2012-08-24T20:24:11.657
> 
> 标签：python, sql, sql-server-2008, csv

我在这里真的不合群，但我听说这是可以做到的。

我有一个 PBX 电话服务器，其中包含数千个不同 CSV 文件中的原始电话数据，这些文件每隔一段时间（在 8 分钟到 2 小时之间）被捕获，这些文件存储在过时的文件夹中。

我可以连接到服务器的唯一方法是通过 WinSCP，它只是给了我文件结构（看起来像 Filezilla FTP）。

所以有两件事：

1.  有人会如何将数千个文件导入 SQL Server 数据库 (2008)？
2.  有人会如何设置定时事件以在创建新的 CSV 文件时导入它们？

我只是需要一些方向。我什至不知道从哪里开始。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T07:44:57.067

```
using System;
using System.Data;
using Microsoft.VisualBasic.FileIO;

namespace ReadDataFromCSVFile
  {
    static class Program
      {
        static void Main()
        {
            string csv_file_path=@"C:\Users\Administrator\Desktop\test.csv";
            DataTable csvData = GetDataTabletFromCSVFile(csv_file_path);
            Console.WriteLine("Rows count:" + csvData.Rows.Count);            
            Console.ReadLine();
        }
    private static DataTable GetDataTabletFromCSVFile(string csv_file_path)
        {
            DataTable csvData = new DataTable();
            try
            {
              using(TextFieldParser csvReader = new TextFieldParser(csv_file_path))
                 {
                    csvReader.SetDelimiters(new string[] { "," });
                    csvReader.HasFieldsEnclosedInQuotes = true;
                    string[] colFields = csvReader.ReadFields();
                    foreach (string column in colFields)
                    {
                        DataColumn datecolumn = new DataColumn(column);
                        datecolumn.AllowDBNull = true;
                        csvData.Columns.Add(datecolumn);
                    }
                    while (!csvReader.EndOfData)
                    {
                        string[] fieldData = csvReader.ReadFields();
                        //Making empty value as null
                        for (int i = 0; i < fieldData.Length; i++)
                        {
                            if (fieldData[i] == "")
                            {
                                fieldData[i] = null;
                            }
                        }
                        csvData.Rows.Add(fieldData);
                    }
                }
            }
            catch (Exception ex)
            {
            }
            return csvData;
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:35:34.680

如果您有权限，您可以`BULK INSERT`使用`sqlcmd`批处理文件。此外，您可以创建一个 SSIS 包。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/ms162773.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms188365.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:38:33.957

1- 有很多方法可以将 csv 文件加载到 sql server 中，即 BCP、BulkLoad、OpenRowSet(Bulk provider)、SSIS、您的自定义 .Net 应用程序

最受欢迎的是批量插入。请参阅此博客以获取教程

[http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-服务器/](http://blog.sqlauthority.com/2008/02/06/sql-server-import-csv-file-into-sql-server-using-bulk-insert-load-comma-delimited-file-into-sql-server/)

2-定时事件？再次有很多选项，但最直接 -> 设置 Nighly SQL 作业

# c++ - typedef int var[1]; 是什么意思？做？

> ID：12116143
> 
> 赞同：6
> 
> 时间：2012-08-24T20:24:17.150
> 
> 标签：c++, typedef

我遇到了以下代码：

```
typedef int var[1]; // or var[3] 
```

它实际上是做什么的？我不明白下标添加了什么，因为现在我可以为 int 定义“var”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:59:02.267

`typedef`声明使用与普通变量声明相同的语法。不同之处在于，不是声明“一个名为`x`type的变量”，而是声明“一个名为`y`type`x`的同义词的类型`y`”。语法在其他方面是相同的。

所以，让我们`typedef`从你的例子中删除，看看我们得到了什么：

```
int var[1]; 
```

`var`是一个变量，其类型是`int[1]`，或者是一个 的数组`int`。如果我们添加`typedef`后面：

```
typedef int var[1]; 
```

这使`var`type 成为同义词`int[1]`。

这同样适用于其他类型的丑陋或复杂类型：

```
int (*fp)(int);         // fp is a function pointer variable
typedef int (*fp)(int); // fp is a function pointer type 
```

* * *

`identity`您可以通过使用声明为的模板来避免大部分这种混淆

```
template <typename T> struct identity { typedef T type; }; 
```

使用此模板，复杂类型或变量声明的含义更加清晰。例如，我们可以像这样声明我们的类型：

```
typedef identity<int[1]     >::type var; // array type
typedef identity<int(*)(int)>::type fp;  // function pointer type 
```

并且因为变量声明使用与类型声明相同的语法，我们也可以声明具有复杂 using`identity`的变量：

```
identity<int[1]     >::type var; // array variable
identity<int(*)(int)>::type fp;  // function pointer variable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:26:52.480

`var``int`是大小为 1 的数组的类型定义。

你可以写

```
var x; 
```

并且`x`将是一个类型的变量`int[1]`

# c# - C# 在运行时访问本地化的 XML

> ID：12116149
> 
> 赞同：3
> 
> 时间：2012-08-24T20:24:31.830
> 
> 标签：c#, xml, localization, runtime

我有一个需要本地化的 C# 应用程序。我可以使用[RESX .NET MUI 策略](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp)来做到这一点。现在，我有一个单独的团队在构建/编译后提供额外的本地化资源（XML 文件）。我想利用 .NETs MUI 策略，它提供了一个很好的回退机制，但我似乎无法找到实现这一目标的方法。

注意，我考虑过在我的应用程序的字符串资源文件中添加本地化文件名（我知道）。但是，如果在运行时该文件不存在，那么我会遇到问题（并且无法自动回退）。

那么，有没有办法在这种情况下利用 .NET MUI 策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:15:28.847

选项1：

您可以将 XML 文件存储在资源中，然后获取一个流对象来读取它，它使用与字符串等相同的方法。请参阅[http://msdn.microsoft.com/en-us/library/ zxee5096.aspx](http://msdn.microsoft.com/en-us/library/zxee5096.aspx)为此。

选项 2：

您也可以应用与资源自己使用的基本方法相同的基本方法。我发现 Web 应用程序很方便，这些应用程序通常基于大量文件（.aspx、.html、.css、.js、.png 等）。假设您有一堆目录，例如：

localised/en/SomeFile1.xml（等等....） localised/en-US/SomeFile1.xml（等等....） localised/en-GB/SomeFile.xml localised/fr/SomeFile.xml

我带着我的 en-IE 偏好来了，你不匹配，但你匹配 en 并且这已经足够好了（好吧，理想情况下，你应该选择 en-IE 比 en-US 更接近 en-GB，但是这完全属于奖励信用领域，并且比 .NET 对资源的处理要好得多）。

您的匹配算法应该是：

1.  尝试为所寻找的语言环境找到匹配项，如果找到则返回。
2.  去掉语言环境的结尾，所以 en-GB-OED 变成 en-GB，en-GB 变成 en- 等等。如果这不能删除整个内容，请使用此新语言环境返回第 1 步。
3.  尝试 zxx（`zxx`.NET afaik 不使用它，但它与 BCP 47/RFC 4647 和 ISO 639 一起用于没有语言内容的项目 - 例如，您的护照照片是区域设置 zxx，因为它与约鲁巴语或威尔士语的法语文件）。
4.  尝试您定义的“默认”语言环境（如果您的应用程序承诺匹配良好，则错误）。

到那时，您将比资源文件做得更好。尽管如此，大多数情况下，选项 1 更简单，而且更加独立。

# algorithm - Java - Big-O 表示法（自下而上或自上而下的方法）

> ID：12116150
> 
> 赞同：1
> 
> 时间：2012-08-24T20:24:34.053
> 
> 标签：algorithm, big-o

首先，这是我的 O(n) 代码：

```
import java.util.*;

public class BigO{

  public static void main(String[] args)
  {
    Scanner in = new Scanner(System.in);
    System.out.print("Enter a number: ");
    String userInput = in.nextLine();
    int mNum = Integer.parseInt(userInput);

    int y = new BigO().linear(mNum);
    System.out.println(y);
  }

 //O(n) - Linear
 public int linear(int n) {
  int sum = 0;
  for (int j = 0; j < n; j++) {
   sum++;
   System.out.print(sum + " ");
  }
  return sum;
 } 
```

如果这是一个愚蠢的问题，我深表歉意，因为我已经很长时间没有使用大 O 表示法了，我想确定一下，但是对于我上面的任何内容，它是自下而上还是自上而下的计算？如果两者都不是，我该如何处理其中一个（或两者）？请告诉我。谢谢。

**更新：** 好吧，没关系，我问了我班上的一些朋友以及教授，他错误地写下了我们的问题。他纠正了它，意思是说我们应该对递归斐波那契使用这种类型的 O(n) 时间算法。对不起，哈哈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:32:03.357

大 O 与自上而下/自下而上无关。

*   第一个是指一种表示算法复杂性和运行时间的方法，具体取决于其输入的大小。
*   第二个是指将问题分解为子问题以达到解决方案时所采取的方法。

所有这些都可以通过谷歌搜索访问:)。

# java - 脂肪罐立即关闭

> ID：12116151
> 
> 赞同：0
> 
> 时间：2012-08-24T20:24:42.667
> 
> 标签：java, jar

我使用 JarSplice 创建了一个胖 jar 文件，但是当我启动它时，我得到一个窗口（大小还可以），它在半秒后关闭......

在“添加 jars”部分，我添加了从 Eclipse 导出的 jar 文件，以及我正在使用的所有库 jar。在 natives 部分，我只为 lwjgl 添加 Windows natives。我想我写了正确的主课。

**我究竟做错了什么？我该如何解决这个问题？**

*注意：我使用的是最新版本的 eclipse 和 jdk。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:43:29.113

该文件实际上不再位于“文件系统”上，而是位于 jar 中，因此您需要从 jar 中加载资源。当您从 eclipse 中运行时，它仍然在文件系统上，但是当您创建 jar 时它不在，这就是它在 eclipse 中运行但在打包时不起作用的原因。[这个问题](https://stackoverflow.com/questions/574809/java-load-a-resource-contained-in-a-jar)的答案应该为您在将 jar 中的文件作为资源加载时提供了一个良好的开端。也就是说，我不确定你是否可以做与你的`listFiles`电话类似的事情。

# iphone - iPhone 上的 ASIHTTPRequest 编译错误 - `set`

> ID：12116155
> 
> 赞同：0
> 
> 时间：2012-08-24T20:25:18.007
> 
> 标签：iphone, ios, asihttprequest

我正在一个新的 iPhone 项目中编译 ASIHTTPRequest，并且在编译时遇到了一个重大错误。

错误是：

```
clang: error: no such file or directory: 'set'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed `with exit code 1 
```

分析编译字符串后，只有 1 个地方出现了 'set'，就在这一行：

```
set -fno-objc-arc --serialize-diagnostics 
```

所以也许这失败了？

如果是这样，我该如何取出这条线来构建它？

完整的编译字符串：

```
ProcessPCH /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-    bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/PrecompiledHeaders/ArrestsPlotter-Prefix- asfyhfrzleolpzgggflhpvakdbtg/ArrestsPlotter-Prefix.pch.pth ArrestsPlotter/ArrestsPlotter-Prefix.pch normal  i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/willmoss26/Documents/XCode/ArrestsPlotter
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/ArrestsPlotter-generated-files.hmap -I/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/ArrestsPlotter-own-target-headers.hmap -I/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/ArrestsPlotter-all-target-headers.hmap -iquote /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/ArrestsPlotter-project-headers.hmap -I/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Products/Debug-iphonesimulator/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/DerivedSources/i386 -I/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/ArrestsPlotter.build/Debug-iphonesimulator/ArrestsPlotter.build/DerivedSources -F/Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Products/Debug-iphonesimulator set -fno-objc-arc --serialize-diagnostics /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/PrecompiledHeaders/ArrestsPlotter-Prefix-asfyhfrzleolpzgggflhpvakdbtg/ArrestsPlotter-Prefix.pch.dia -c /Users/willmoss26/Documents/XCode/ArrestsPlotter/ArrestsPlotter/ArrestsPlotter-Prefix.pch -o /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/PrecompiledHeaders/ArrestsPlotter-Prefix-asfyhfrzleolpzgggflhpvakdbtg/ArrestsPlotter-Prefix.pch.pth -MMD -MT dependencies -MF /Users/willmoss26/Library/Developer/Xcode/DerivedData/ArrestsPlotter-bafbkfhslokdxwcjmtzgipqcqgiv/Build/Intermediates/PrecompiledHeaders/ArrestsPlotter-Prefix-asfyhfrzleolpzgggflhpvakdbtg/ArrestsPlotter-Prefix.pch.d 
```

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:51:22.057

您可能想要使用不同的库：`ASIHTTPRequest`它[的创建者不再支持它](http://allseeing-i.com/%5Brequest_release%5D;)。

`NSURLRequest`/`NSURLConnection`在 iOS5 中更容易使用，所以这是一种选择。我最近将一些项目从使用`ASIHTTPRequest`过度转换为使用新`NSURL`东西，并且可以证明那里的改进。

`[AFNetworking](http://engineering.gowalla.com/2011/10/24/afnetworking/)`是一个越来越受欢迎的新框架。我目前正在使用它构建一个项目并且非常喜欢它；它消除了使用 JSON/XML 的所有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:34:56.453

没有理由`set`在那里。人们通常仅`-fno-objc-arc`在逐个文件的基础上进行设置，因此在您进行设置时可能会出现复制和粘贴错误。

选择您正在构建的目标，转到*Build Phases*部分，然后在*Compile Sources*下，编辑要删除的编译器标志`set`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:33:04.967

啊，我自己回答了……没关系！

答案是，我在编译行中添加了“set”以获取全部源代码，而不仅仅是添加适当的标志。所以编译器被问到，'什么是设置'？

斯图乌皮德：p

# python - PyQt 4 - 未定义全局名称“SIGNAL”

> ID：12116157
> 
> 赞同：1
> 
> 时间：2012-08-24T20:25:20.707
> 
> 标签：python, pyqt4

我正在尝试将按钮信号连接到我创建的可调用对象，但由于某种原因，此错误不断弹出。我已经检查以确保 QtCore 已导入......我还缺少什么？

示例代码：

```
from PyQt4 import QtCore
from PyQt4 import QtGui
import sys

class guiFindFiles(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        #Create window
        self.setFixedSize(400,180)
        self.setWindowTitle("Choose the files to use")

        #Create all layouts to be used by window
        self.windowLayout = QtGui.QVBoxLayout()
        self.fileLayout1 = QtGui.QHBoxLayout()
        self.fileLayout2 = QtGui.QHBoxLayout()
        self.fileLayout3 = QtGui.QHBoxLayout()

        #Create the prompt for user to load in the q script to use
        self.qFileTF = QtGui.QLineEdit("Choose the q script file to use")
        self.qFileButton = QtGui.QPushButton("Open")
        self.qFileButton.setFixedSize(100,27)
        self.fileLayout1.addWidget(self.qFileTF)
        self.fileLayout1.addWidget(self.qFileButton)

                    #Connect all the signals and slots
        self.connect(self.qFileButton, SIGNAL("pressed()"), self.loadFile)

        def loadFile():
            fileName = []

            selFile = QtGui.QFileDailog.getOpenFileName(self)
            print selFile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T20:35:30.960

`SIGNAL`在里面`QtCore`，所以该行应该是：

```
self.connect(self.qFileButton, QtCore.SIGNAL("pressed()"), self.loadFile) 
```

但你真的应该使用[新风格的连接](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)：

```
self.qFileButton.pressed.connect(self.loadFile) 
```

而且，除非你打算区分一`click`对`press/release`夫妇，否则你最好使用`clicked`信号：

```
self.qFileButton.clicked.connect(self.loadFile) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:30:39.263

`SIGNAL`是在内部定义的`QtCore`，所以`QtCore`如果你`QtCore`作为一个整体导入，你必须在命名空间中使用它。所以使用：

```
QtCore.SIGNAL(...) 
```

代替：

```
SIGNAL(...) 
```

或者您可以显式导入`SIGNAL`：`QtCore`

```
from PyQt4.QtCore import SIGNAL 
```

# javascript - jQuery 在第二次单击时删除类并在第二次单击时禁用悬停

> ID：12116162
> 
> 赞同：0
> 
> 时间：2012-08-24T20:25:30.093
> 
> 标签：javascript, jquery, css, class, jquery-selectors

当您第二次单击复选框时，我试图删除“活动”类，就像用户添加 pin 时 Pinterest 对 Twitter/Facebook 复选框所做的一样： ![在此处输入图像描述](../Images/ab40be380811e73c411a06063bc443ea.png)

单击时添加“活动”类很容易。但是，我不知道添加后如何将其删除。我试过这个，但没有奏效：

```
$(".add_link_twitter.active").click(function(e) {  
      $(this).removeClass(activePostTwitter); 
    }); 
```

我有两个问题：

1.  如何在第二次单击复选框时删除“活动”css类？
2.  选中 Twitter 复选框时如何禁用“.add_link_twitter:hover”？

提前致谢！

这是jQuery：

```
var postTwitter = ".add_link_twitter"; 
var activePostTwitter = "active"; 
$(postTwitter).click(function(e) {  
  $(this).addClass(activePostTwitter); 
}); 
```

这是html：

```
<label class="add_link_twitter">
<input type="checkbox" name="publish_to_twitter" class="publish_to_twitter"><span>Share on Twitter</span>
</label> 
```

这是CSS：

```
.add_link_twitter{
    position:absolute;
    left:15px;
    bottom:16px;
    color: #a19486;
    border: 2px solid transparent;
    border-color: #F0EDE8;
    border-radius: 4px;
    font-size: 13px;
    font-weight: bold;
    cursor: pointer;
    padding: 7px;
    padding-top: 5px;
    padding-bottom: 5px;
}

.active {
    border-color: #468BD0;
    color: #468BD0;
    background-color: whiteSmoke;
}

.add_link_twitter:hover
{
    color: #A19486;
    border: 2px solid transparent;
    border-color: #C2B1A2;
    border-radius: 4px;
    background-color: white;
    padding: 7px;
    padding-top: 5px;
    padding-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:28:48.077

代替

```
$(postTwitter).click(function(e) {  
  $(this).addClass(activePostTwitter); 
}); 
```

采用

```
$(postTwitter).click(function(e) {  
  $(this).toggleClass(activePostTwitter); 
}); 
```

编辑：

该事件每次点击触发两次，可能是因为事件传播。要解决此问题，请将处理程序分配给`input`并让它更改其父类的类：

```
$(postTwitter + " input").click(function(e) {
    $(this).parent().toggleClass(activePostTwitter);
}); 
```

确认 jsfiddle：http: [//jsfiddle.net/bpfqB/](http://jsfiddle.net/bpfqB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:56:07.103

这应该适用于您的两个问题：

```
$(function() {
    "use strict";
    var $postTwitter = $("label.add_link_twitter");

    $postTwitter.find("input:checkbox").click(function() {
        $(this).parent().toggleClass("active");
        if($("input.publish_to_twitter").is(":checked")) {
            $(this).parent().removeClass("hover");
        }
    });

    $postTwitter.hover(
        function() {
            if($("input.publish_to_twitter").is(":checked")) {
                return;
            }

            $(this).addClass("hover");
        },
        function() {
            $(this).removeClass("hover");
        });
}); 
```

但是，您需要对 CSS 进行一些更改，您必须使用 jQuery 进行悬停（跳过 CSS 悬停）。

### [演示](http://jsfiddle.net/sQVe/s2X3S/1/)

# flash - jsfl flash cs4 fl.trace() 不工作

> ID：12116164
> 
> 赞同：1
> 
> 时间：2012-08-24T20:25:42.510
> 
> 标签：flash, cs4, jsfl

我在打开 jsfl 文件的情况下使用“播放”按钮在 flash cs4 中运行 jsfl 脚本。困扰我的是 fl.trace() 没有在输出窗口中放置任何内容。我试过 fl.outputPanel.trace() 仍然没有！

尝试调试正在发生的事情并想知道是否有人遇到此问题或有解决方案非常麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:34:32.883

确保过滤器级别为详细。此选项位于输出面板菜单上。

# jquery - 使用 .click() 激活leanModal 对话框

> ID：12116165
> 
> 赞同：1
> 
> 时间：2012-08-24T20:25:45.660
> 
> 标签：jquery, modal-dialog

我正在尝试用leanModal 打开一个div，而无需单击超链接。链接：

```
<a id="showform" rel="leanModal" name="signup" href="#trigger_id" style="display:none"></a> 
```

打开链接的调用：

```
<script>
var h = jQuery.noConflict();
h("#showform").click();
</script> 
```

初始化函数：

```
var k = jQuery.noConflict();
k(function() {
    k('a[rel*=leanModal]').leanModal({
        top: 50,
        overlay: 0.5,
        closeButton: ".modal_close"
    });
});​ 
```

如果我使用超链接，它可以工作，但是我希望它自己打开。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T20:33:53.490

像这样试试。似乎您没有`("#showform").click();`内部的 dom 就绪功能.. 它会在您的 leanModal 甚至在您的锚点上初始化之前触发点击，并且可能在您的锚点存在于 dom 之前触发.. 为什么不在初始化后触发

```
var k = jQuery.noConflict();
k(function() {
    k('a[rel*=leanModal]').leanModal({
        top: 50,
        overlay: 0.5,
        closeButton: ".modal_close"
    });
    k("#showform").click();
});​ 
```

并删除其他脚本

# android - Android - 添加 API 类时出现 NoClassDefFoundError

> ID：12116166
> 
> 赞同：0
> 
> 时间：2012-08-24T20:25:49.063
> 
> 标签：android, jar, noclassdeffounderror

我目前正在测试 Android API 及其数据库类。为此，我创建了一个调用这些数据库类（尤其是 SQLiteDatabase）的应用程序和测试。测试和应用程序运行正常，但为了获得覆盖率，我决定`android.database`在 Android API 中的包中添加一个“cov”类，该类将从 android.database 和 android.database.sqlite 的修改版本中收集覆盖率类。我将“android.database.cov”导入我的班级，测试本身运行良好，但是当我开始使用 cov

```
System.out.println(cov.printArray());
cov.reset(); 
```

我在 JUnit 测试中得到以下失败跟踪：

```
java.lang.NoClassDefFoundError: android.database.cov
at com.example.sql2.test.SQLSuiteVer2.testSuite(SQLSuiteVer2.java:91)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:192)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584) 
```

有谁知道这是怎么回事？我假设我们在创建 android.jar 文件或“cov”类的一些初始化时遗漏了一些东西。

谢谢。

# cordova - sencha touch 2 中的视频流

> ID：12116167
> 
> 赞同：0
> 
> 时间：2012-08-24T20:25:54.977
> 
> 标签：cordova, extjs, sencha-touch-2, phonegap-plugins

好的，我只是随机想到了一个用 phonegap 构建的 sencha touch 2 应用程序。我正在考虑将直播视频放入我的 sencha touch 2 应用程序中，只是想知道是否有可能。任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:20:07.133

Your question is a bit vague....by live stream do you mean something like Ustream? Perhaps it's worth checking out their API here: [http://developer.ustream.tv/docs](http://developer.ustream.tv/docs)

I'm sure it would be possible to retrieve JSON back from a request much like it is possible with YouTube and sencha, whereby you could setup models such as user, videoid, thumbnail, etc. Check out the The oreilly sencha demo which calls YouTube to get some inspiration.

What would the purpose of using phonegap be? To package or to access certain native features?

# php - 在 PHP 中分离 XML 属性

> ID：12116178
> 
> 赞同：1
> 
> 时间：2012-08-24T20:26:50.967
> 
> 标签：php, xml, html-table, simplexml

我正在从此 XML 文件中获取 sky_condition 的 XML 属性：

```
<METAR>  
    <sky_condition sky_cover="SCT" cloud_base_ft_agl="1600"/>
    <sky_condition sky_cover="BKN" cloud_base_ft_agl="2200"/>
</METAR> 
```

使用 PHP 代码：

```
$sky  = $xml->data->METAR[0]->sky_condition->attributes(); 
```

（我删除了额外的 XML 代码）

我用它来输出数据：

```
<table border="0">
            <?php foreach ($sky as $sky_cover => $cloud_base_ft_agl){
            echo"<tr>";
            echo"<td><strong>";
            if ($sky_cover == "CAVOK") {echo "Ceiling and Visibility OK";} else {echo $sky_cover;
            }
            echo"</strong></td>";
            echo"<td><strong>";
            if (isset($cloud_base_ft_agl)){echo $cloud_base_ft_agl; }
            echo"</strong></td>";
            echo"</tr>";
        }?>
        </table> 
```

无论如何我可以显示数据，例如：

```
<table>
  <tr>
    <td><strong>SCT</strong></td>
    <td><strong>1600</strong></td>
  </tr>
  <tr>
    <td><strong>BKN</strong></td>
    <td><strong>2200</strong></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:39:20.153

就这样做

```
$xmlString = '<METAR>
   <sky_condition sky_cover="SCT" cloud_base_ft_agl="1600"/>
    <sky_condition sky_cover="BKN" cloud_base_ft_agl="2200"/>
</METAR>
';

$xml = simplexml_load_string($xmlString);
$td = "<tr><td><strong>%s</strong></td><td><strong>%s</strong></td></tr>";
echo '<table>';

foreach ( $xml->sky_condition as $value ) {
    $attribute = $value->attributes();
    printf($td, $attribute['sky_cover'], $attribute['cloud_base_ft_agl']);
}

echo '</table>'; 
```

看演示

[http://codepad.viper-7.com/A9pba4](http://codepad.viper-7.com/A9pba4)

# c++ - 自定义位数组 [] 和赋值运算符

> ID：12116185
> 
> 赞同：2
> 
> 时间：2012-08-24T20:27:31.767
> 
> 标签：c++, data-structures, operator-overloading

我正在为我正在研究的 GA 事物组合一个 bitarray 类。我想知道是否有比我想出的更好的方法来让我的 [] 运算符进行分配。现在，我有非常量版本的运算符按值返回一个秘密的“bitsetter”类，这似乎有点过分了。我当然不能通过引用返回一点，但我想知道是否有更好的（即更简洁、更有效）的方式。提前致谢。原谅我的`throw 0`。完全是一个占位符；）

```
class bitsetter
{
public:
    short ind;
    unsigned char *l;

    bitsetter & operator=(int val)
    {
        int vs = 1<<ind;
        if( val==0 ) {
            vs = ~vs;
            *l = *l & vs;
        }
        else
        {
            *l = *l | vs;
        }
        return *this;
    }

    int value() const
    {
        return ((*l)>>ind)&1;
    }

    friend std::ostream & operator << ( std::ostream & out, bitsetter const & b )
    {
        out << b.value();
        return out;
    }

    operator int () { return value(); }
};

class bitarray
{
public:
    unsigned char *bits;
    int size;

    bitarray(size_t size)
    {
        this->size = size;
        int bsize = (size%8==0)?((size+8)>>3):(size>>3);
        bits = new unsigned char[bsize];
        for(int i=0; i<size>>3; ++i)
            bits[i] = (unsigned char)0;        
    }

    ~bitarray()
    {
        delete [] bits;
    }

    int operator[](int ind) const
    {
        if( ind >= 0 && ind < size )
            return (bits[ind/8] >> (ind%8))&1;
        else
            return 0;
    }

    bitsetter operator[](int ind)
    {
        if( ind >= 0 && ind < size )
        {
            bitsetter b;
            b.l = &bits[ind/8];
            b.ind = ind%8;
            return b;
        }
        else
            throw 0;
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:01:46.417

这是标准方法，称为*代理*。请注意，它通常在类本身中定义：

```
class bitfield
{
public:
    class bit
    { };
}; 
```

此外，它保持更“安全”：

```
class bitfield
{
public:
    class bit
    {
    public:
        // your public stuff
    private:
        bit(short ind, unsigned char* l) :
        ind(ind), l(l)
        {}

        short ind;
        unsigned char* l;

        friend class bitfield;
    };

    bit operator[](int ind)
    {
        if (ind >= 0 && ind < size)
        {
            return bit(&bits[ind/8], ind % 8);
        }
        else
            throw std::out_of_range();
    }
}; 
```

So that people only get to see the public interface of bit, and cannot conjure up their own.

# objective-c - 获取 NSMatrix 中的插座

> ID：12116191
> 
> 赞同：0
> 
> 时间：2012-08-24T20:27:44.897
> 
> 标签：objective-c, cocoa, interface-builder, osx-lion

我有一个包含 5 个单元格的 NSMatrix，每个单元格都包含一个图像。
我想避免很好地绑定每个图像，所以我只有一个 IBOutlet，它是一个 NSMatrix。如何从矩阵中获取每列的内容（应该是 NSImageWell）？
例如我有那个矩阵：

```
@property (weak) IBOutlet NSMatrix *cells; 
```

第 1 列的单元格：

```
NSCell* cell=[ cells cellAtRow: 0 column: 0];
// How do I get the contained NSImageWell? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:52:55.073

你是什​​么意思，每个单元格都包含一个图像？你是如何制作矩阵的？据我所知，您不能将图像很好地放在“单元格”中。如果将图像很好地拖到窗口上，然后将其嵌入矩阵中，则单元格是 NSImageCells，它们不包含在 NSCell 中。因此，这一行将为您提供图像单元格：

```
NSImageCell* cell= [cells cellAtRow: 0 column: 0]; 
```

# r - 关联两个不同尺度的数据集

> ID：12116195
> 
> 赞同：1
> 
> 时间：2012-08-24T20:28:10.053
> 
> 标签：r, curve-fitting

我们如何关联两个具有不同比例的数据集/曲线，即一条曲线的 y 轴范围为 (0,70000)，另一条曲线的 y 轴范围为 (0, 150000)。如果它们的比例相同，则可以使用 cor() 函数。我想检查一条曲线是否依赖于另一条曲线/两条曲线是否相关。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:24:27.443

如果您查看[Pearson 乘积相关矩的定义](https://en.wikipedia.org/wiki/Correlation_and_dependence)（这是`cor`默认计算的），您会发现它是一个线性运算符。也就是说，如果 a 和 b 是常数，则 cor(aX + b, Y) = cor(X, Y)。因此，X 和 Y 之间的范围差异并不重要。请记住，尽管这种相关性仅衡量**线性相关性**：它们可能是“相关的”，但相关性较低。如果关系是非线性的，就会发生这种情况，例如：

```
set.seed(100)
x <- rnorm(100)
y <- x^2
cor(x,y)
# 0.1224623 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:43:42.477

如果您正在寻找两组数据之间的相关性，相关性的大小并不取决于数据集范围的差异。

例如，我们可以创建一组随机`y`值，​​然后按比例放大它们。相关性仍为 1：

```
> y <- rnorm(100)
> y2 <- y*2 + 20
> cor(y, y2)
[1] 1 
```

为了进一步表明相关量与尺度的线性变化无关，请查看不相关数据的情况：

```
> y3 = rnorm(100)
> cor(y, y3)
[1] -0.05293818
> y4 <- y3*2 + 20
> cor(y, y4)
[1] -0.05293818 
```

所以，回答你的问题。我认为该功能`cor`应该仍然适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:44:28.403

我不认为相关性不应该取决于数据的绝对范围。只需将一个数据集乘以一个常数，使其具有与另一个相同的范围？

# c++ - 为 boost mpl 列表中的每种类型继承容器

> ID：12116196
> 
> 赞同：2
> 
> 时间：2012-08-24T20:28:14.513
> 
> 标签：c++, boost

我有一个类，我想从容器中继承 boost::mpl::vector 中每个类的类。换句话说，是这样的：

```
template <typename types_vector>
class A : inherit from std::vector<type> for each type in types_vector {

}; 
```

例如，如果我有这个向量：

```
typedef boost::mpl::vector<bool, int, double> types_vector_; 
```

然后`A<types_vector_>`将扩展为：

```
class A : public std::vector<bool>, public std::vector<int>, public std::vector<double> {

}; 
```

在不使用 C++11 功能的情况下如何做到这一点（其余代码还没有准备好）？我认为使用 boost MPL 是要走的路，尽管如果有 C++11 以外的替代方案，我可以考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T18:09:27.280

我认为这样的事情可以帮助你。

```
#include <boost/mpl/vector.hpp>
#include <boost/mpl/front.hpp>
#include <boost/mpl/pop_front.hpp>
#include <boost/mpl/is_sequence.hpp>
#include <boost/mpl/size.hpp>
#include <boost/utility/enable_if.hpp>
#include <boost/mpl/and.hpp>
#include <boost/mpl/equal_to.hpp>
#include <boost/mpl/greater_equal.hpp>
#include <vector>
#include <iostream>

namespace mpl = boost::mpl;

template<typename T,
typename = void>
struct Some
{
   typedef std::vector<T> type;
};

template<typename T>
struct Some<T, 
typename boost::enable_if_c
   <
    mpl::and_
    <
     mpl::is_sequence<T>,
     mpl::greater_equal
     <
      mpl::size<T>, 
      mpl::int_<2>
     >
    >::type::value
   >::type> :
   public Some<typename mpl::front<T>::type>::type,
   public Some<typename mpl::pop_front<T>::type>
{
};

template<typename T>
struct Some<T,
typename boost::enable_if_c
   <
    mpl::and_
    <
     mpl::is_sequence<T>,
     mpl::equal_to
     <
      mpl::size<T>,
      mpl::int_<1>
     > 
    >::type::value
   >::type> :
public Some<typename mpl::front<T>::type>::type
{
};

template<typename T>
struct Some<T,
typename boost::enable_if_c
   <
    mpl::and_
    <
     mpl::is_sequence<T>,
     mpl::equal_to
     <
      mpl::size<T>,
      mpl::int_<0>
     >
    >::type::value
   >::type>
{
};

int main()
{
   typedef mpl::vector<int, double> vect_t;
   typedef Some<vect_t> vector;
   vector vect;
   vect.std::vector<int>::push_back(1);
   vect.std::vector<double>::push_back(2);
   std::cout << "int: " << vect.std::vector<int>::at(0) << std::endl;
   std::cout << "double: " << vect.std::vector<double>::at(0) << std::endl;
} 
```

[http://liveworkspace.org/code/ec56ebd25b821c9c48a456477f0d42c9](http://liveworkspace.org/code/ec56ebd25b821c9c48a456477f0d42c9)

# deployment - MSBuild 部署到公司网络外的机器

> ID：12116197
> 
> 赞同：0
> 
> 时间：2012-08-24T20:28:31.043
> 
> 标签：deployment, tfs, msbuild, msdeploy, msbuildextensionpack

是否可以使用来自内部网络（公司网络）的 TFS MSBuild 将代码（asp.net mvc 应用程序和 Windows 服务）部署到公共主机（例如 Godaddy 上的 VM）中的机器

我所拥有的只是目标服务器的 IP 地址、用户名和密码。但我不确定 TFS 是否可以在这样的机器上部署代码。当我在本地服务器上执行此操作时，通常我会指定如下路径：\machine-name\c$\deployment-folder\ 但它不适用于远程机器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T02:16:47.640

使用 InstallShield 或 Windows Installer XML 等工具开发 Windows Installer 数据库 (.msi)。使用 TFS Team Build 构建 MSI。然后使用[PsExec](http://ss64.com/nt/psexec.html)将 MSI 复制到远程机器并执行它。

# maven - 为什么我的 WAR 文件没有使用 jboss-maven-plugin 显示在 JBoss 上？

> ID：12116198
> 
> 赞同：1
> 
> 时间：2012-08-24T20:28:30.873
> 
> 标签：maven, jboss, maven-plugin

我正在运行 JBoss 4.2.3.GA 应用服务器（可悲的是无法更改）并使用 Maven 3.0.3 构建 WAR 项目。我正在尝试使用 jboss-maven-plugin 将我的 WAR 文件部署到远程 JBoss 服务器。尽管 Maven 在我执行构建时没有报告任何错误，但 WAR 文件从未出现在我的 $JBOSS_HOME/server/default/deploy 目录中。这是我在 pom.xml 文件中使用的配置……</p>

```
 <!-- Deploy app to remote JBoss instance -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jboss-maven-plugin</artifactId>
            <version>1.5.0</version>
            <configuration>
                <serverId>default</serverId>
                <hostName>localhost</hostName>
                <port>8080</port>
                <fileNames>
                    <fileName>${project.basedir}/target/${project.artifactId}-${project.version}.war</fileName>
                </fileNames>
            </configuration>
            <executions>
                <execution>
                    <phase>install</phase>
                    <goals>
                        <goal>deploy</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

在我的 ~/.m2/settings.xml 文件中，我有

```
<servers>
    <server>
        <id>default</id>
        <username>admin</username>
        <password>admin</password>
    </server>
</servers> 
```

其中用户名和密码是为访问我的 jmx 控制台而定义的 un/pw。下面是 Maven 的输出。注意没有错误报告。我还应该检查什么来弄清楚为什么我的 WAR 没有被部署？

```
[INFO] --- jboss-maven-plugin:1.5.0:deploy (default) @ myclient ---
[DEBUG] org.codehaus.mojo:jboss-maven-plugin:jar:1.5.0:
[DEBUG]    org.apache.maven:maven-plugin-api:jar:2.0.11:compile
[DEBUG]    org.apache.maven:maven-artifact-manager:jar:2.0.11:compile
[DEBUG]       org.apache.maven:maven-repository-metadata:jar:2.0.11:compile
[DEBUG]       org.apache.maven:maven-artifact:jar:2.0.11:compile
[DEBUG]       org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1:compile
[DEBUG]          junit:junit:jar:3.8.2:test (scope managed from compile) (version managed from 3.8.1)
[DEBUG]          classworlds:classworlds:jar:1.1-alpha-2:compile
[DEBUG]    org.apache.maven.wagon:wagon-provider-api:jar:1.0-beta-2:compile
[DEBUG]    commons-codec:commons-codec:jar:1.3:compile
[DEBUG]    jboss:jboss-jmx:jar:4.0.2:compile
[DEBUG]    jboss:jnp-client:jar:4.0.2:compile
[DEBUG]    jboss:jboss-common:jar:4.0.2:compile
[DEBUG]       slide:webdavlib:jar:2.0:compile
[DEBUG]       xerces:xercesImpl:jar:2.6.2:compile
[DEBUG]    jboss:jbosssx-client:jar:3.2.3:compile
[DEBUG]    velocity:velocity:jar:1.4:compile
[DEBUG]       velocity:velocity-dep:jar:1.4:runtime
[DEBUG]    org.codehaus.plexus:plexus-utils:jar:1.5.15:compile
[DEBUG] Created new class realm plugin>org.codehaus.mojo:jboss-maven-plugin:1.5.0
[DEBUG] Importing foreign packages into class realm plugin>org.codehaus.mojo:jboss-maven-plugin:1.5.0
[DEBUG]   Imported:  < maven.api
[DEBUG] Populating class realm plugin>org.codehaus.mojo:jboss-maven-plugin:1.5.0
[DEBUG]   Included: org.codehaus.mojo:jboss-maven-plugin:jar:1.5.0
[DEBUG]   Included: commons-codec:commons-codec:jar:1.3
[DEBUG]   Included: jboss:jboss-jmx:jar:4.0.2
[DEBUG]   Included: jboss:jnp-client:jar:4.0.2
[DEBUG]   Included: jboss:jboss-common:jar:4.0.2
[DEBUG]   Included: slide:webdavlib:jar:2.0
[DEBUG]   Included: xerces:xercesImpl:jar:2.6.2
[DEBUG]   Included: jboss:jbosssx-client:jar:3.2.3
[DEBUG]   Included: velocity:velocity:jar:1.4
[DEBUG]   Included: velocity:velocity-dep:jar:1.4
[DEBUG]   Included: org.codehaus.plexus:plexus-utils:jar:1.5.15
[DEBUG]   Excluded: org.apache.maven:maven-plugin-api:jar:2.0.11
[DEBUG]   Excluded: org.apache.maven:maven-artifact-manager:jar:2.0.11
[DEBUG]   Excluded: org.apache.maven:maven-repository-metadata:jar:2.0.11
[DEBUG]   Excluded: org.apache.maven:maven-artifact:jar:2.0.11
[DEBUG]   Excluded: org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-9-stable-1
[DEBUG]   Excluded: junit:junit:jar:3.8.2
[DEBUG]   Excluded: classworlds:classworlds:jar:1.1-alpha-2
[DEBUG]   Excluded: org.apache.maven.wagon:wagon-provider-api:jar:1.0-beta-2
[DEBUG] Configuring mojo org.codehaus.mojo:jboss-maven-plugin:1.5.0:deploy from plugin realm    ClassRealm[plugin>org.codehaus.mojo:jboss-maven-plugin:1.5.0, parent: sun.misc.Launcher$AppClassLoader@20cf2c80]
[DEBUG] Configuring mojo 'org.codehaus.mojo:jboss-maven-plugin:1.5.0:deploy' with basic configurator -->
[DEBUG]   (f) fileNameEncoding = UTF-8
[DEBUG]   (f) fileNames = [/Users/davea/Dropbox/workspace/myclient/target/myclient-1.0-SNAPSHOT.war]
[DEBUG]   (f) hostName = localhost
[DEBUG]   (f) port = 8080
[DEBUG]   (f) serverId = default
[DEBUG]   (f) skip = false
[DEBUG] -- end configuration --
[INFO] Deploying /Users/davea/Dropbox/workspace/myclient/target/myclient-1.0-SNAPSHOT.war to JBoss.
[DEBUG] url = http://localhost:8080/jmx-console/HtmlAdaptor?action=invokeOpByName&name=jboss.system:service %3DMainDeployer&methodName=deploy&argType=java.net.URL&arg0=%2FUsers%2Fdavea%2FDropbox%2Fworkspace%2Fmyclient%2Ftarget%2Fmyclient-1.0-SNAPSHOT.war
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:48:14.877

这是我的 jboss-maven-plugin 配置。使用此配置，我可以毫无问题地部署我的战争应用程序。看一下文件名路径。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jboss-maven-plugin</artifactId>
    <version>1.5.0</version>
    <!-- JMX credentials defined in ~/.m2/settings.xml -->
    <configuration>
        <hostName>10.0.16.14</hostName> <!-- either an IP address or localhost -->
        <port>8280</port>
        <serverId>jboss-dev</serverId>
        <fileNames>
            <fileName>../server/default/deploy/myApp.war</fileName>
        </fileNames>
    </configuration>
</plugin> 
```

我的 ~/.m2/settings.xml 服务器就像：

```
<servers>
    <server>
        <id>jboss-dev</id>
        <username>admin</username>
        <password>admin</password>
    </server>
</servers> 
```

# php - PHP：如何手动/以编程方式启动 cron 脚本

> ID：12116202
> 
> 赞同：1
> 
> 时间：2012-08-24T20:28:42.133
> 
> 标签：php, cron

嗨，我正在制作一个 cron 状态页面，显示 cron 运行的脚本的所有状态信息。我知道如何构建“显示状态信息”，但我需要以下方面的帮助和建议......

我需要允许查看状态页面的用户有权手动启动 cron 脚本。就像一个按钮，它会调用 cron 来运行一个特定的脚本，比如“现在”。

这是可能的还是有我可以做的解决方法？

请提前帮助和感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:32:43.073

您可以手动执行 cron 脚本：

```
exec("cron script here"); 
```

如果需要，您可以获得可用的 cron 脚本（未经测试）：

```
$crontab = file_get_contents("path/to/cron");
$cron_jobs = array_filter(explode(PHP_EOL, $crontab), function($cron_job) {
    return $cron_job[0] !== "#"; // Remove comments.
});
$cron_jobs = array_map(function($cron_job) {
    $fields = explode(" ", $cron_job);
    $fields = array_splice($fields, 0, 5); // Get rid of timing information.
    return implode(" ", $fields);
}, $cron_jobs);

$cron_script = $_GET["cron_script"];
if ($cron_script < sizeof($cron_jobs)) {
    exec($cron_jobs[$cron_script]);
} 
```

# r - 将 R 中的矩阵展平为四列（索引和上/下三角形）

> ID：12116207
> 
> 赞同：3
> 
> 时间：2012-08-24T20:29:00.240
> 
> 标签：r, matrix

我正在使用在邮件列表中多次发布的 cor.prob() 函数来获取相关矩阵（下对角线）和 p 值（上对角线）：

```
cor.prob <- function (X, dfr = nrow(X) - 2) {
  R <- cor(X)
  above <- row(R) < col(R)
  r2 <- R[above]^2
  Fstat <- r2 * dfr/(1 - r2)
  R[above] <- 1 - pf(Fstat, 1, dfr)
  R[row(R) == col(R)] <- NA
  R
}

d <- data.frame(x=1:5, y=c(10,16,8,60,80), z=c(10,9,12,2,1))

cor.prob(d)

> cor.prob(d)
           x           y           z
x         NA  0.04856042 0.107654038
y  0.8807155          NA 0.003523594
z -0.7953560 -0.97945703          NA 
```

我如何将上述相关矩阵（下半部分的相关性，上半部分的 p 值）折叠成一个四列矩阵：两个索引、相关性和 p 值？例如：

```
i  j   cor    pval
x  y   .88    .048
x  z  -.79    .107
y  z  -.97  0.0035 
```

我已经看到[了这样的上一个问题的答案](https://stackoverflow.com/a/9913601/654296)，但只会给我一个 3 列矩阵，而不是一个四列矩阵，其中 p 值和相关性具有单独的列。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T20:38:36.000

好吧，它不是矩阵，因为您不能混合字符和数字。但：

这是我的第一次尝试（在您的标签交换之前）：

```
m <- cor.prob(d)
ut <- upper.tri(m)
lt <- lower.tri(m)
d <- data.frame(i=rep(row.names(m),ncol(m))[as.vector(ut)],
            j=rep(colnames(m),each=nrow(m))[as.vector(ut)],
            cor=m[ut],
            p=m[lt]) 
```

现在应用我在下面建议的更正，你会得到

```
d <- data.frame(i=rep(row.names(m),ncol(m))[as.vector(ut)],
            j=rep(colnames(m),each=nrow(m))[as.vector(ut)],
            cor=m[ut],
            p=t(m)[ut]) 
```

最后你的标签交换，使用row()/col()，把它写成一个函数：

```
f1 <- function(m) {
  ut <- upper.tri(m)
  data.frame(i = rownames(m)[row(m)[ut]],
            j = rownames(m)[col(m)[ut]],
            cor=t(m)[ut],
            p=tm[ut])
} 
```

然后

```
m<-matrix(1:25,5,dimnames=list(letters[1:5],letters[1:5])
> m
  a  b  c  d  e
a 1  6 11 16 21
b 2  7 12 17 22
c 3  8 13 18 23
d 4  9 14 19 24
e 5 10 15 20 25

> f1(m)
   i j cor  p
1  a b   6  2
2  a c  11  3
3  b c  12  8
4  a d  16  4
5  b d  17  9
6  c d  18 14
7  a e  21  5
8  b e  22 10
9  c e  23 15
10 d e  24 20 
```

如果不是这个，你能解释一下你的预期吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T06:53:36.570

```
 cd <- cor.prob(d)
 dcd <- as.data.frame( which( row(cd) < col(cd), arr.ind=TRUE) )
 dcd$pval <- cd[row(cd) < col(cd)]
 dcd$cor <- cd[row(cd) > col(cd)]
 dcd[[2]] <-dimnames(cd)[[2]][dcd$col]
 dcd[[1]] <-dimnames(cd)[[2]][dcd$row]
 dcd
#--------------------
  row col        pval        cor
1   x   y 0.048560420  0.8807155
2   x   z 0.107654038 -0.7953560
3   y   z 0.003523594 -0.9794570 
```

# c++ - 让 boost python 在 osx 上选择正确的 python 版本

> ID：12116211
> 
> 赞同：0
> 
> 时间：2012-08-24T20:29:13.623
> 
> 标签：c++, python, boost, shared-libraries

我目前正在使用 boost python 构建一个模块，但我无法让它针对正确版本的 python 构建（我需要它针对 2.6 构建）。我尝试的第一件事是将我的 PATH 设置为我想安装的 python 版本，但它构建了一个只能在默认系统版本 2.7 上运行的模块。接下来，我尝试添加`--with-python-version=2.6`作为引导程序的参数，但这也不起作用。

我是 C++ 新手，我正在构建别人的代码，如果有一个明显的答案，我深表歉意

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:15:24.437

我不知道这是否能解决您的问题，但这听起来像是我在构建另一个 boost 项目时处理的问题。无论我做什么，它都会不断地找到错误的 python 安装。也就是说，它总是想要系统 python。我通过告诉它查看另一个 INCLUDE 位置来解决它：

```
cmake -D PYTHON_INCLUDE_DIR=/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Headers 
```

# c# - 使用值创建 Html.DropDownList

> ID：12116212
> 
> 赞同：1
> 
> 时间：2012-08-24T20:29:20.597
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor, linq-to-entities

我正在尝试创建一个下拉列表，其中包含我的数据模型中的值。在我看来，我似乎无法让它发挥作用：

```
@Html.DropDownList("Program Types", 
new SelectList(Model.Select(x => x.ProgramType.ProgramType).Distinct().OrderBy(x => x),
Model.Select(x => x.ProgramType.ProgramTypeId).Distinct().OrderBy(x => x))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:59:07.617

看看这个例子：

[如何编写一个简单的 Html.DropDownListFor()](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor)

没有比这更简单的了，您可以很容易地根据您的情况调整此示例。

希望这对您有帮助并祝您好运！

# javascript - 用户脚本：我丢失了一些 JS？

> ID：12116221
> 
> 赞同：0
> 
> 时间：2012-08-24T20:30:45.410
> 
> 标签：javascript, userscripts

我不明白发生了什么...
我有一个简单的用户脚本，它在我访问的页面中添加了几个 DIV、css 样式和 JS 函数
特别是，我有一个 DIV 可以触发一个带有 onClick 侦听器的 JS 函数 - 这个函数是一个“切换”功能（显示/隐藏另一个 DIV）：

```
function togglegm(etat) {
 if (etat = 'on') {
    document.getElementById('greasemky').style.display = 'block';
    document.getElementById('greasemkytoggle').innerHTML = '<a href="javascript:return(false);" onClick="togglegm(\'off\');"></a>';
 } else if (etat = 'off') {
  document.getElementById('greasemky').style.display = 'none';
  document.getElementById('greasemkytoggle').innerHTML = '<a href="javascript:return(false);" onClick="togglegm(\'on\');"></a>';
 }
}
var script2 = d.createElement('script');
script2.appendChild(d.createTextNode(togglegm));
(d.body || d.head || d.documentElement).appendChild(script2); 
```

DIV“greasemkytoggle”只包含一个带有触发“togglegm（'on'）的onClick的链接，我的目标是当执行togglegm（on）时，这个DIV的innerHTML成为togglegm（off）的触发器。
现在奇怪的部分......当我点击我的 DIVgreasemkytoggle 时，函数 togglegm(on) 被完美执行（显示greasemky），innerHTML 完全改变了“togglegm(off)”的链接，但是如果我点击再一次，然后什么也没有发生。

我查看源代码，发现我的 JS 函数就这样消失了（这就是为什么最后一次点击什么都没有发生的原因）！现在，有一个空函数替换了我的 togglegm()：

```
<script>
scriptHolderArray1
</script> 
```

你理解这种行为吗……？
对于这种情况，我在网上没有找到任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:37:32.193

GreaseMonkey 在一套更加安全良心的规则下运行。

使用正确的 DOM3 (addEventListener) 方法附加事件侦听器。

通过 innerHTML 分配 Javascript绝不是一个好主意（在用户脚本*或一般脚本中）。*

使用“javascript:”伪协议绝不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:42:38.333

问题是`etat = 'on'`和`etat = 'off'`。

如果要设置值，请使用

```
etat = 'on'
etat = 'off' 
```

如果要比较，请使用：

```
etat == 'on'
etat == 'off' 
```

此外，`href="javascript:return(false);"`在 Firefox 上引发错误，因为在函数外有返回（SyntaxError: return not in function）。您应该这样做`href="javascript:void(0);"`，或`return false`在 onclick 事件结束时。

无论如何，我不太明白你在这里做什么：

```
var script2 = d.createElement('script');
script2.appendChild(d.createTextNode(togglegm));
(d.body || d.head || d.documentElement).appendChild(script2); 
```

您有一个由元素`togglegm`加载到浏览器内存的函数。`<script>`

然后，您`<script>`使用该函数创建一个新函数并将其附加到文档中，以便再次将其加载到浏览器的内存中（我猜）。

为什么？

# php - 从 simpleXMLElement 数组中获取特定值

> ID：12116223
> 
> 赞同：0
> 
> 时间：2012-08-24T20:31:21.720
> 
> 标签：php, arrays, simplexml

我见过类似的问题，但没有一个成功回答。我有这个 simpleXMLElement 转数组：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [uri] => https://66.90.34.19:9630/api/users/2/
                    [id] => 2
                    [full_render] => true
                )

            [username] => Admin
            [password] => SimpleXMLElement Object
                (
                )

            [name] => SimpleXMLElement Object
                (
                    [first] => LightSpeed
                    [last] => Administrator
                )

            [email] => SimpleXMLElement Object
                (
                )

            [account_locked] => false
            [privilege_group] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [uri] => https://66.90.34.19:9630/api/privilege_groups/0/
                            [id] => 0
                            [full_render] => false
                        )

                    [name] => Administrator
                    [type] => administrator
                )

            [read_eula] => true
            [hidden] => false
            [enabled] => true
            [phone] => SimpleXMLElement Object
                 (
                 )

            [product] => SimpleXMLElement Object
                (
                )

            [product_code] => SimpleXMLElement Object
                (
                )

            [open_to_pos] => false
            [gsx_tech_id] => SimpleXMLElement Object
                 (
                )

            [can_open_from_otr] => true
            [can_discount] => true
            [internal_user] => false
            [active] => true
            [expired] => false
        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [uri] => https://66.90.34.19:9630/api/users/2/
                    [id] => 2
                    [full_render] => true
                )

            [username] => Admin
            [password] => SimpleXMLElement Object
                (
                )

             [name] => SimpleXMLElement Object
                (
                    [first] => LightSpeed
                    [last] => Administrator
                )

            [email] => SimpleXMLElement Object
                (
                )

            [account_locked] => false
            [privilege_group] => SimpleXMLElement Object
                (
                    [@attributes] => Array
                        (
                            [uri] => https://66.90.34.19:9630/api/privilege_groups/0/
                            [id] => 0
                            [full_render] => false
                        )

                    [name] => Administrator
                    [type] => administrator
                )

            [read_eula] => true
            [hidden] => false
            [enabled] => true
            [phone] => SimpleXMLElement Object
                (
                )

            [product] => SimpleXMLElement Object
                (
                )

            [product_code] => SimpleXMLElement Object
                (
                )

            [open_to_pos] => false
            [gsx_tech_id] => SimpleXMLElement Object
                 (
                 )

            [can_open_from_otr] => true
            [can_discount] => true
            [internal_user] => false
            [active] => true
            [expired] => false
        ) 
```

我想要回显 [name]->[first] 和 [name]->[last]。

我尝试了许多版本的循环来通过键名获取它们。我就是想不通。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:38:39.080

SimpleXML 对象可以被视为数组。只需循环并获取您需要的数据。

您使用`->`而不是访问他们的数据`[]`。

```
foreach($array as $x){
    $name = $x->name;
    echo $name->first . ' ' . $name->last;
} 
```

演示：[http ://codepad.viper-7.com/Ncn3C1](http://codepad.viper-7.com/Ncn3C1)

# android - Android 4.0 中的 ImageView setImage

> ID：12116237
> 
> 赞同：0
> 
> 时间：2012-08-24T20:33:09.947
> 
> 标签：android, android-imageview

在我的应用程序中，我试图将`ImageView`' 的图像设置为刚刚用相机拍摄的图像。我的问题是它适用于我的旧 Droid（Android 2.2），但不适用于我的 Droid Razr（Android 4.0）。我想知道是否有人可以帮助我找出原因。

这是`Intent`单击“拍照”按钮时的相机：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
String imageFileName = System.currentTimeMillis() + ".jpg";

File photo = new File(Environment.getExternalStorageDirectory(),
imageFileName);

imageUri = Uri.fromFile(photo);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

startActivityForResult(cameraIntent, ACTIVITY_CAMERA); 
```

这是`Activity`的结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == ACTIVITY_CAMERA) {
        if(resultCode == Activity.RESULT_OK){

            imageView.setImageUri(imageUri);    
        }
    }  
} 
```

Razr上`ImageView`仍然是空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:09:01.943

奇怪的是如何查看 logcat 是有帮助的。

`ImageView`无论如何，在尝试设置's 图像时，我得到“位图太大” 。甚至在这个问题之前，我[在这里](http://developer.android.com/training/camera/photobasics.html#TaskScalePhoto)尝试了谷歌的解决方案。但是，位图始终为空，我还没有深入研究它以找出原因。

编辑：我得到了谷歌的解决方案。对于该`decodeFile()`方法，我将 my`Uri`作为字符串传递：`imageUri.toString()`。我将其更改为`imageUri.getPath()`，现在可以正常工作了。

# python - 在Sphinx（python）中用空行阻止文本

> ID：12116238
> 
> 赞同：0
> 
> 时间：2012-08-24T20:33:11.883
> 
> 标签：python, python-sphinx

我希望在 Sphinx 文档中包含程序使用情况，但无法将文本包含在块中。

我的文字中有空格。例子：

**正确使用 script.py**

```
 usage: script.py [-h] [-q] [-v] [-D DAYS] [-H HOURS] [-M MINUTES] [-x] -s
                     SERVER -d DATABASE -u USERNAME -p PASSWORD

  Run some funky stuff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:05:29.473

根据您的需要，这里有许多选项：

*   [代码块](http://sphinx-doc.org/markup/code.html#showing-code-examples)
*   [块报价](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#block-quotes)
*   [线路块](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#line-blocks)

# java - 在重绘的 DOM 中查找元素

> ID：12116241
> 
> 赞同：1
> 
> 时间：2012-08-24T20:33:18.687
> 
> 标签：java, eclipse, internet-explorer, selenium

我们有一个网站，其中有一个 wijmo 网格。我正在尝试测试这个网站。在 IE 中绘制了网格，但是当我进入“开发者工具”时，网格实际上并不存在。这使得运行 Selenium 测试变得非常困难，因为 Selenium 也找不到它。

有没有人遇到过这个？如果是这样，我如何成功运行我的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:40:31.897

网格*将*成为 DOM 的一部分，您应该能够使用 Selenium 以正确的路径成功选择它。

我认为是工具具有误导性，并且在 DOM 更改时根本不会更新。

我会尝试检查另一个浏览器，例如 Google Chrome（`F12`在 Windows 中）。以我的经验，IE 开发者工具不如 Chrome 工具强大或功能丰富。当元素被操作时，Chrome 工具*会更新 DOM。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:28:28.193

看起来它现在正在工作。开发人员有一个导致问题的预加载器。一旦被禁用，它现在可以找到元素。

# perl - HTTPS 代理和 LWP::UserAgent

> ID：12116244
> 
> 赞同：6
> 
> 时间：2012-08-24T20:33:28.360
> 
> 标签：perl, https, proxy, lwp, lwp-useragent

我已经阅读了许多网站上的许多主题，但仍然无法完成这项工作。

我有一台运行 perl 5.12.4 的 OpenSSL 0.9.8r 客户端机器（OSX），使用 LWP 6.0.4，更新了 Crypt::SSLeay，Net::SSL 等。我正在尝试连接到 HTTPS 站点（[https:// /github.com](https://github.com)在示例中）通过我在 Windows VM 上运行的 WinGate 代理。请注意，我的实际应用程序附加到我无法控制的 SSL Web 服务。

从 Firefox，指向代理一切都是 copacci。页面加载成功，我在代理软件活动监视器中看到了连接。如果我可以让它在 Perl 中工作，我会被诅咒的。我从这个堆栈溢出问题的代码开始：[如何强制 LWP 使用 Crypt::SSLeay 进行 HTTPS 请求？](https://stackoverflow.com/questions/8026524)并添加了一些调试和附加输出。这是我现在的立场：

```
#!/usr/bin/perl

use strict;
use warnings;
use Net::SSL (); # From Crypt-SSLeay

BEGIN {
  $Net::HTTPS::HTTPS_SSL_SOCKET_CLASS = "Net::SSL"; # Force use of Net::SSL
  $ENV{HTTPS_PROXY} = 'https://192.168.1.11:80';
#  $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
  $ENV{HTTPS_DEBUG} = 1;  #Add debug output
}

use LWP::UserAgent;
my $ua = LWP::UserAgent->new();
my $req = HTTP::Request->new('GET','https://github.com/');
my $response = $ua->request($req);

print "--\n";
print "$_\n" for grep { $_ =~ /SSL/ } keys %INC;
print "--\n";

if ($response->is_success) {
     print $response->decoded_content;  # or whatever
     exit(0);
}
else {
 print "\nFail:\n";
     print $response->status_line ."\n";
     exit(1);
} 
```

这是此代码的输出：

```
--
Crypt/SSLeay.pm
Crypt/SSLeay/X509.pm
Net/SSL.pm
--

Fail:
500 Can't connect to github.com:443 (Crypt-SSLeay can't verify hostnames) 
```

如果我然后取消注释`$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;`，我确实在代理上看到了一个到 github.com:443 的连接，然后什么也没有。*（请注意，它通过代理在 Web 浏览器中运行良好）*。在挂了很多之后，我从脚本中得到以下输出：

```
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A
SSL_connect:before/connect initialization
SSL_connect:SSLv3 write client hello A
SSL_connect:failed in SSLv3 read server hello A
SSL_connect:before/connect initialization
SSL_connect:SSLv2 write client hello A
SSL_connect:failed in SSLv2 read server hello A
--
Crypt/SSLeay.pm
Crypt/SSLeay/X509.pm
Net/SSL.pm
Crypt/SSLeay/CTX.pm
Crypt/SSLeay/MainContext.pm
--

Fail:
500 SSL negotiation failed: 
```

如果有人可以在这里提供一些指导，我将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-22T12:05:00.357

[我刚刚将LWP::Protocol::connect](http://search.cpan.org/~benning/LWP-Protocol-connect-6.00/)模块上传到 CPAN。此模块将缺少的 HTTP/CONNECT 方法支持添加到 LWP。

```
 use LWP::UserAgent;

  $ua = LWP::UserAgent->new(); 
  $ua->proxy('https', 'connect://proxyhost.domain:3128/');

  $ua->get('https://www.somesslsite.com'); 
```

使用此模块，您可以使用常规 IO::Socket::SSL 实现 LWP >=6.00。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T21:16:31.007

为什么要“强制使用 Net::SSL”。尝试

```
#!/usr/bin/perl    
use strict;
use warnings;
use LWP::UserAgent;

BEGIN {
  $ENV{HTTPS_PROXY} = 'https://192.168.1.11:80';
#  $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0;
  $ENV{HTTPS_DEBUG} = 1;  #Add debug output
}

my $ua = LWP::UserAgent->new();
my $req = HTTP::Request->new('GET','https://github.com/');
my $response = $ua->request($req);
print $response->code ."\n"; 
```

输出`200`应该意味着没有错误。

我的以下示例代码完美地工作

```
#!/usr/bin/perl
use warnings;
use LWP::UserAgent;

BEGIN {
  $ENV{HTTPS_PROXY} = 'https://176.9.209.113:8080'; #Valid HTTPS proxy taken from http://hidemyass.com/proxy-list/
  $ENV{HTTPS_DEBUG} = 1;
}

my $ua = new LWP::UserAgent;
my $req = new HTTP::Request('GET', 'https://www.nodeworks.com');
my $res = $ua->request($req);
print $res->code, "\n"; 
```

输出-

```
200
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A
SSL_connect:SSLv3 read server hello A
SSL_connect:SSLv3 read server certificate A
SSL_connect:SSLv3 read server key exchange A
SSL_connect:SSLv3 read server done A
SSL_connect:SSLv3 write client key exchange A
SSL_connect:SSLv3 write change cipher spec A
SSL_connect:SSLv3 write finished A
SSL_connect:SSLv3 flush data
SSL_connect:SSLv3 read finished A
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A
SSL_connect:SSLv3 read server hello A
SSL_connect:SSLv3 read server certificate A
SSL_connect:SSLv3 read server key exchange A
SSL_connect:SSLv3 read server done A
SSL_connect:SSLv3 write client key exchange A
SSL_connect:SSLv3 write change cipher spec A
SSL_connect:SSLv3 write finished A
SSL_connect:SSLv3 flush data
SSL_connect:SSLv3 read finished A

Tool completed successfully 
```

输出`https://github.com/`是-

```
200
SSL_connect:before/connect initialization
SSL_connect:SSLv2/v3 write client hello A
SSL_connect:SSLv3 read server hello A
SSL_connect:SSLv3 read server certificate A
SSL_connect:SSLv3 read server done A
SSL_connect:SSLv3 write client key exchange A
SSL_connect:SSLv3 write change cipher spec A
SSL_connect:SSLv3 write finished A
SSL_connect:SSLv3 flush data
SSL_connect:SSLv3 read finished A

Tool completed successfully 
```

说了这么多。您的代码版本（如下）应该可以正常工作-

```
use warnings;
use LWP::UserAgent;

BEGIN {
  $ENV{HTTPS_PROXY} = 'https://176.9.209.113:8080';
  $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} = 0; #works even with this
  $ENV{HTTPS_DEBUG} = 1;  #Add debug output
}

my $ua = new LWP::UserAgent;
my $req = new HTTP::Request('GET', 'https://github.com/');
my $res = $ua->request($req);
print $res->code, "\n";

if ($res->is_success) {
     print $res->decoded_content;  # or whatever
     exit(0);
}
else {
 print "\nFail:\n";
     print $res->status_line ."\n";
     exit(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T20:21:47.523

您可以使用 Net::SSLGlue::LWP，而不是使用不提供太多主机验证（也没有 SNI）的 Net::SSL。这个猴子补丁 LWP 以便 https_proxy 可以与默认的 SSL 后端 IO::Socket::SSL 一起使用：

```
use Net::SSLGlue::LWP; # do this first
use LWP::Simple;
... continue with normal LWP stuff.. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T15:47:36.853

我几乎遇到了同样的问题。以下是为我解决的问题：

*   确保使用 Crypt::SSLeay 0.58 或更低版本。至少 0.64 对我来说无休止地被阻止（如[http://cpanforum.com/posts/13808](http://cpanforum.com/posts/13808)所述），而 0.57/0.58 有效。
*   确保 Net::HTTP 已更新到至少 6.03（以避免[https://rt.cpan.org/Public/Bug/Display.html?id=72790](https://rt.cpan.org/Public/Bug/Display.html?id=72790)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:17:51.327

我知道这可能是一个死问题，但如果其他人碰到它，我有另一个角度......我不能保证任何答案，但我们在这个领域的 $work 面临一个长期存在的问题，但是Squid 代理，并且可能特定于 X509 客户端证书的使用。

使用 Net::SSL 覆盖是解决方案的一部分，但我担心 WinGate 可能是问题（而不是我可以帮助解决的问题），尽管在我们的例子中我们通过 http 联系代理（不确定 LWP 如何处理使用代理+https）。

作为记录，这是我们使用的代码的精确形式的示例：

```
use Net::SSL;
$ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS}="Net::SSL";
use LWP::UserAgent;
use LWP::Protocol::https;
my $ua = LWP::UserAgent->new;
$ENV{HTTPS_PROXY} = 'http://cache.local.employer.co.uk:80';
$ua->get("https://example.com/"); 
```

这是最近安装了 CPAN 的 Perl 5.8.8（因此分离了 L:P:https），所以我们有一个新的 Net::HTTP。

我要提到 Net::HTTP 的某些版本被破坏了，但我刚刚意识到这是我在 Martin 的回复中的 CPAN 错误 :)

抱歉，如果这没有添加任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-01T18:48:22.703

我已经在 libwww-perl 存储库上发送了一个[拉取请求](https://github.com/libwww-perl/libwww-perl/pull/51)来修复（或者可能是解决方法......）这个问题。

这个 PR 的注释显示了一个简单的程序，它通过代理连接 https 到 github.com。有了这个补丁，你就不需要在你的程序中弄乱 %ENV 了。

另一个优点是您可以重复使用通常的 https_proxy 设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-31T02:46:30.090

在早期 5.8 和其他一些模块中存在错误，其中环境变量 HTTP_PROXY 没有适当地设置代理连接。

您的案例有一个问题，即此处提到的错误报告[https://bugzilla.redhat.com/show_bug.cgi?id=1094440](https://bugzilla.redhat.com/show_bug.cgi?id=1094440)

更好的使用方法是没有环境变量并使用 LWP UserAgent

```
 `use LWP::UserAgent;
  $ua = LWP::UserAgent->new(); 
  $ua->proxy('https', 'connect://proxyhost.domain:3128/');` 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-29T16:21:23.380

```
#!/usr/bin/env perl 
# 
# mimvp.com
# 2017-03-28

use CGI;
use strict;
use LWP::UserAgent;

our %proxy_https = ("https", "connect://173.233.55.118:443");
our $mimvp_url = "https://proxy.mimvp.com/exist.php";

## https
## 1\. download LWP-Protocol-connect (wget http://search.cpan.org/CPAN/authors/id/B/BE/BENNING/LWP-Protocol-connect-6.09.tar.gz)
## 2\. tar zxvf LWP-Protocol-connect-6.09.tar.gz 
##    cd LWP-Protocol-connect-6.09
##    perl Makefile.PL
##    make
##    sudo make install
sub test_connect {
	my ($url, %proxy) = @_;

	print "proxy  : $proxy{'http'}\n";
	print "https  : $proxy{'https'}\n";
	print "socks4 : $proxy{'socks4'}\n";
	print "socks5 : $proxy{'socks5'}\n";
	print "url : $url\n";

	my $browser = LWP::UserAgent->new();
	$browser->env_proxy();

# 	# 设置的代理格式
	$browser->proxy(%proxy);
	$browser->timeout(30);
	$browser->agent('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36');

# 	my $req = new HTTP::Request('GET', $url);
# 	my $response = $browser->request($req);
	my $response = $browser->get($url);  				# 爬取的网址
	my $is_success = $response->is_success();			# 1
	my $content_type = $response->content_type();		# text/html
	my $content = $response->content();					# 网页正文
	my $content_length = length($content);				# 网页正文长度

	print "$is_success\n";
	print "$content_type\n";
	print "$content_length\n";
	print "$content\n";
}

test_connect($mimvp_url, %proxy_https);		# https

## perl mimvp-proxy-perl.pl
```

# java - 如何通过交互从可绘制对象中获取图像到画布上

> ID：12116245
> 
> 赞同：0
> 
> 时间：2012-08-24T20:33:35.243
> 
> 标签：java, android, android-canvas

我在android上创建了一个画布，上面画了一个圆圈和按钮，但是我希望通过某种交互将drawables中的图像放入其中，所以我想使用一个按钮，但我只使用内容创建了这个屏幕java类的视图，因此我不能使用xml，所以你们有什么办法知道我如何在java中点击图像（以编程方式）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:55:02.587

您可以在画布上绘制任何东西，并将事件添加到您设计的自定义类中......

看看 [http://android-er.blogspot.in/2010/05/draw-bitmap-on-view.html](http://android-er.blogspot.in/2010/05/draw-bitmap-on-view.html)

# node.js - 使用 Express 3 重定向所有请求？

> ID：12116247
> 
> 赞同：4
> 
> 时间：2012-08-24T20:33:39.267
> 
> 标签：node.js, express, connect

做这个的最好方式是什么？

我想将所有请求重定向`www.mysite.com`到`mysite.com`

`*.mysite.com`将`mysite.com`是理想的

我会认为某种类型的中间件。我仍然讨厌这个，因为它看起来很不优雅而且有点浪费，但我认为我唯一的选择是在服务器端做这个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T21:08:35.597

由于 Express 3 不使用自己的 HTTP 服务器（而是将您的应用程序传递给`http.createServer`），因此除非您告诉它，否则它不知道它在哪个端口上运行。也就是说，您基本上可以使用以下内容执行您想要执行的操作：

```
app.use(function(request, response, next) {
  var newHost = request.host.replace(/^www\./, '');
  if (request.host != newHost) {
    // 301 is a "Moved Permanently" redirect.
    response.redirect(301, request.protocol + "://" + newHost + request.url);
  } else {
    next();
  }
}); 
```

您可以将其导出到模块中并将其包装在带有端口的生成器中：

```
// no_www.js

module.exports = function(port) {
  app.use(function(request, response, next) {
    var newHost = request.host.replace(/^www\./, '');
    if (request.host != newHost) {
      var portStr = '';
      if (request.protocol == 'http' && port != 80) portStr = ':' + port;
      if (request.protocol == 'https' && port != 443) portSt r= ':' + port;
      // 301 is a "Moved Permanently" redirect.
      response.redirect(301, request.protocol + "://" + newHost + portStr + request.url);
    } else {
      next();
    }
  });
}

// app.js

var noWww = require('./no_www');
var app = express();

app.configure("development", function() {
  app.set("port", 3000);
});

...

app.use(noWww(app.get('port'))); 
```

# java - Java 使用什么在控制台中输出，如何在 ruby 中捕获它？

> ID：12116253
> 
> 赞同：1
> 
> 时间：2012-08-24T20:34:01.020
> 
> 标签：java, ruby-on-rails, ruby

如果我正在运行 IRB 并使用此处提到的方法[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-60)返回 ruby​​ 版本，它工作正常。

```
irb(main):001:0> %x{ruby -v}
=> "ruby 1.9.2p290 (2011-07-09) [i386-mingw32]\n" 
```

但是当我尝试在 IRB 中用 Java 做同样的事情时，我可以看到它打印到屏幕上但它没有返回。

```
irb(main):002:0> %x{java -version}
java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode)
=> "" 
```

Java 使用什么方法输出到控制台，如何捕获它以在 ruby​​/rails 程序中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:40:02.757

Java 使用 STDERR 打印其版本信息。您可以通过将 STDERR 路由到 STDOUT 的流并同时捕获两者来轻松捕获它。

```
asdf = `java -version 2>&1`
puts asdf 
```

将输出：

```
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-10M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode) 
```

在命令行工作时，这是一种非常常见的技术。`man sh`在命令行执行 a ，并`REDIRECTION`使用 " `/REDIRECTION`" 搜索并从那里读取。

# jquery - jQuery .text 给 .appenTo 之后的元素留空

> ID：12116260
> 
> 赞同：1
> 
> 时间：2012-08-24T20:34:31.263
> 
> 标签：jquery

我正在使用[http://www.bulgaria-web-developers.com/projects/javascript/selectbox/](http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)更改选择框。

这是一个例子：http: [//jsfiddle.net/ukkpower/bczrc/1/](http://jsfiddle.net/ukkpower/bczrc/1/)

我有一个按钮，单击时会在其下方的“a”标签内获取文本。我有两种类型的“a”。一个是页面加载代码的一部分，另一个是使用选择框插件动态创建的。

我可以从作为页面一部分的“a”标签中获取文本，但动态标签中我得到的是空字符串。我可以在屏幕上看到文本，并且当我使用 firebug 进行检查时，文本就在那里。

为什么`$(this).next(".menuItem").text()`不能使用动态的？我应该看到：14' - €14.14

```
 //button to get text
<a href="javascript:void(0)" class="addToCart cart"></a>

<div id="sbHolder_51608882" class="sbHolder" tabindex="1">
    <a id="sbToggle_51608882" href="#" class="sbToggle"></a>
    <a id="sbSelector_51608882" href="#" class="sbSelector menuItem">14' - €14.14</a>
         <ul id="sbOptions_51608882" class="sbOptions" style="display: none;">
              <li><a href="#1" rel="1">6' - €6.66</a></li>
              <li><a href="#2" rel="2">12' - €12.12</a></li>
              <li><a href="#3" rel="3" class="sbFocus">14' - €14.14</a></li>
         </ul>
</div> 
```

这工作正常，是加载页面的一部分：

```
<a href="javascript:void(0)" class="addToCart cart"></a>
<span class="price menuItem">12' - €12.99</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:57:17.357

你的期望是不正确的。[**.next()**](http://api.jquery.com/next/)获取紧邻的下一个元素（兄弟）。查看您的 HTML，您会看到以下内容的同级：

```
<a href="javascript:void(0)" class="addToCart cart"></a> 
```

是 ：

```
<div id="sbHolder_51608882" class="sbHolder" tabindex="1"> 
```

如果你想使用在里面的类来访问锚点**，**`.menuItem`你需要进入里面。**`div``div``find`**

 **```
$(this).next("div.sbHolder").find("a.menuItem").text(); 
```

### [演示](http://jsfiddle.net/YNpEe/)- 显示值来自`.menuItem`

**编辑**
要解决您拥有的两种不同场景，您可以应用一些逻辑。如果您总是有一种或另一种情况，则此特定逻辑将起作用。当然，如果您有完全随机的不可预测的场景，这将行不通。

```
$(".addToCart").on("click", function() {
    var $menuItem = $(this).next(".menuItem");

    if($menuItem[0] === undefined){
        $menuItem = $(this).next().find(".menuItem");
    }
    alert($menuItem.text());
});​ 
```

### [DEMO](http://jsfiddle.net/YNpEe/2/) - 立即查找下一个或`.menuItem`子级`.menuItem`**

# tfsbuild - 使用 Visual Studio 2012 在 TFS 2010 中构建 C# 解决方案

> ID：12116262
> 
> 赞同：1
> 
> 时间：2012-08-24T20:34:33.863
> 
> 标签：tfsbuild

我们在 TFS 2010 中有一个团队项目，目前正在使用 VS 2010 构建。我刚刚升级了我的本地副本以在 VS 2012 中成功构建。现在我不确定我需要做什么才能在我们的 TFS 中构建 VS 2012 中的解决方案2010服务器。

显然需要在构建机器上安装 VS 2012。还需要什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:45:54.753

回答你的问题：什么都没有（甚至没有 VS 2012）。您所需要的只是照顾 VS 解决方案本身。

我没有在 tfs 构建代理上更新 VS，直到现在还没有遇到麻烦。打开较旧的 VS 解决方案时，VS2012 向导自动建议将我的解决方案从 VS2010 更新到 VS2012。我遇到的唯一问题与 .csprojs 上的代码 analisys dlls 绝对路径（指向 VS 2010 文件夹）有关。为了解决这个问题，我删除了对 dll 的标注，但保留了代码 analisys。

# php - 奇怪的Mysql ORDER BY

> ID：12116264
> 
> 赞同：2
> 
> 时间：2012-08-24T20:34:51.533
> 
> 标签：php, mysql

我正在尝试执行此查询：

```
 SELECT m.name 
    FROM ".table."modules as m 
    LEFT JOIN ".table."module_page as p 
    ON m.id = p.id
    LEFT JOIN ".table."pages as pa 
    ON p.pages = pa.id
    WHERE p.pages = '1' AND m.section = '2'
    ORDER BY 'm.order' ASC 
```

正如你所看到的，我按升序排序。但我不知道为什么，但它输出它是这样的：

```
 id    section    active    order    name
    9     2          1         1        content_starter
    10    2          1         3        Agenda
    11    2          1         2        Nieuws
    12    2          1         4        Sidebar 
```

它按 id 排序。但为什么？？

提前致谢！

格兹，布拉姆

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:36:06.577

`'m.order'`是一个静态常量，所以这里真的没有顺序。删除列名周围的引号。

# php - Jquery .load & .html 加载器时间问题

> ID：12116269
> 
> 赞同：2
> 
> 时间：2012-08-24T20:35:03.207
> 
> 标签：php, jquery, html, preloader

我似乎遇到的另一个问题是再次使用 Jquery。我基本上是通过使用 .load 函数从外部 php 页面加载内容。这很好用，我唯一的问题是负载只是闪烁进出，所以看起来不太好。

有没有办法让装载机显示更长的时间，或者至少显示最少的时间？

这是我目前拥有的代码：

```
 $('#content').load('contact.php');
        $('#test a').click(function() {
        var page = $(this).attr('href');
        $("#mydiv").html('<div class="bar"><span></span></div>');
        $('#content').load(''+ page +'.php', null, function() {
    $("#mydiv").html('');
   });
    return false;
}); 
```

任何帮助或指导都会很棒:)

以下不起作用：

```
<script type="text/javascript">
    $(document).ready(function() {

    setTimeout(function () { 

    $('#content').load('contact.php');

    $('#test a').click(function() {

    var page = $(this).attr('href');

        $("#mydiv").html('<div class="bar"><span></span></div>');
    $('#content').load(''+ page +'.php', null, function() {
    $("#mydiv").html('');
    });

    return false;

        }); 

    }, 2000);

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:38:08.153

```
<script>
    setTimeout(function () { 
        //Do it here
    }, 2000);
</script> 
```

我不会让用户等待一分钟。将 2000 修改为您想要的任何时间。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:42:31.843

您可以在加载完成后调用 a`setTimeout`来隐藏加载器并显示内容：

```
setTimeout(hideLoaderShowContent, 1000); // 

function hideLoaderShowContent() {
    $("#loader").hide();
    $("#content").show();
} 
```

**编辑：** 这是您所需要的：

```
var $mydiv = $("#mydiv");

$mydiv.html('<div class="bar"><span></span></div>');

$('#content').load(''+ page +'.php', null, function() {
    setTimeout(function() { $mydiv.html(''); }, 1000); // Note the setTimeout here waits 1 second (1000 ms)
}); 
```

# ruby - 如何确定实例是否已被 Ruby 模块扩展？

> ID：12116271
> 
> 赞同：16
> 
> 时间：2012-08-24T20:35:09.590
> 
> 标签：ruby, module, extend

给定一个对象和一个模块，如何检查该对象是否已被模块扩展？

好像没有相应的扩展？方法

```
moirb(main):001:0> module Foobar
irb(main):002:1> end
=> nil
irb(main):003:0> o=Object.new
=> #<Object:0x000001010d1400>
irb(main):004:0> o.class.include? Foobar
=> false
irb(main):005:0> o.extend Foobar
=> #<Object:0x000001010d1400>
irb(main):006:0> o.class.include? Foobar
=> false
irb(main):007:0> o.class.included_modules
=> [PP::ObjectMixin, Kernel]
irb(main):016:0* o.methods.grep /extend/
=> [:extend]
irb(main):019:0> o.class.methods.grep /extend/
=> [:extend] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-25T00:55:52.617

你有什么理由不只是使用`is_a?`：

```
o.is_a? Foobar
# => true 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-24T20:51:23.777

您可以使用

```
o.singleton_class.included_modules 
```

或者，如果您想变得精巧：

```
o.singleton_class < Foobar 
```

一个对象的单例类是其所有单例方法所在的地方——扩展（据我所知）等同于包含到单例类中。这就是为什么

```
class Foo
  extend Bar
end 
```

和

```
class Foo
  class << self
    include Bar
  end
end 
```

两者都将 Bar 中的方法添加为类方法（即单例方法）`Foo`

# javascript - 以锚为中心加载页面 - 文档就绪事件后浏览器滚动到顶部？

> ID：12116278
> 
> 赞同：2
> 
> 时间：2012-08-24T20:35:41.707
> 
> 标签：javascript, jquery, html

当页面在 url 中使用锚点（片段）加载时，我希望它居中而不是滚动的默认行为，因此锚定元素位于屏幕顶部。

以下是我想要的：

```
var $targetDiv = $(window.location.hash);

if ($targetDiv) {
    var $window = $(window);
    $window.scrollTop($targetDiv.offset().top - ($window.height() / 2));
} 
```

但是，当我在 document.ready 上运行此程序时，十分之九的页面加载时元素位于顶部，而不是居中。

[jsFiddle](http://jsfiddle.net/ptnmq/4/)（注意我使用`<div>`的是 id，而不是`<a>`名称，但效果是一样的）

使用#middle 锚点转到页面的[结果。](http://jsfiddle.net/ptnmq/4/show#middle)

如果我不得不猜测，似乎浏览器正在完成它的工作并在 ready 事件触发**后滚动到元素的顶部。**以锚定元素为中心加载页面的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:41:40.303

`!`向我想要居中的锚点的任何链接添加了一个，并更新了我的代码以去除`!`：

```
var $targetDiv = $(window.location.hash.replace(/!/, ''));

if ($targetDiv) {
    var $window = $(window);
    $window.scrollTop($targetDiv.offset().top - ($window.height() / 2));
} 
```

例如，浏览到`someUrl.com/Index#!foo`浏览器会忽略`#!foo`并且页面会滚动，因此`<div id="foo">`居中。

另一个部分解决方案是在窗口加载时运行上述代码，而不是准备好文档。不幸的是，浏览器会滚动两次，一次是 div 显示在顶部，然后再次居中。

# javascript - 在 Firefox 插件中注册控制台服务侦听器

> ID：12116279
> 
> 赞同：0
> 
> 时间：2012-08-24T20:35:45.443
> 
> 标签：javascript, firefox, firefox-addon

我在我的 Firefox 插件中注册 nsIConsoleListener 时遇到了一些问题。这是我的代码：

```
var conSer  = Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService);

var consoleLis = {
    observe:function( aMessage ){

        conSer.unregisterListener(consoleLis); 

        Components.utils.reportError("observed "+aMessage.message);

    },
    QueryInterface: function (iid) {

        if (!iid.equals(Components.interfaces.nsIConsoleListener) && !iid.equals(Components.interfaces.nsISupports)) {

                Components.utils.reportError("NS_ERROR_NO_INTERFACE");

                throw Components.results.NS_ERROR_NO_INTERFACE;

        }

        return this;

    }
};

conSer.registerListener(consoleLis); 

conSer.logStringMessage('this is a test'); 
```

似乎无论我在上面尝试什么代码变体，QueryInterface 似乎总是抛出错误。我通过 bugzilla 查看了 nsIConsoleListener 是否存在任何未解决的错误，但似乎没有，所以我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T01:16:09.490

没关系，我在 Mozilla irc 上的人的帮助下想通了：

```
let Cc = Components.classes;
let Ci = Components.interfaces;
let Cu = Components.utils;

Cu.import("resource://gre/modules/Services.jsm");
Cu.import("resource://gre/modules/XPCOMUtils.jsm");

var consoleLis = {
    observe:function( aMessage ){

        dump("observed "+aMessage.message);

        Services.console.unregisterListener(consoleLis); 

    },
    QueryInterface:XPCOMUtils.generateQI([Ci.nsIConsoleListener])
};

Services.console.registerListener(consoleLis); 

Services.console.logStringMessage('this is a test'); 
```

# javascript - 如何编写持久cookie并填充来自queryString的值

> ID：12116280
> 
> 赞同：0
> 
> 时间：2012-08-24T20:35:45.480
> 
> 标签：javascript, jquery, jquery-plugins, cookies

我对 JQuery 有点生气。

我想将会员系统添加到某个网站。本网站有“朋友推荐红利”计划。

我希望该网站记录我带到该网站的人，并在预订表格的相关字段中添加我的姓名。

这是我的逻辑：

1）我将发布链接，`theWebSite.com\?referral=eladbdv` 然后JS将识别查询字符串“referral”并将值“eladbdv”写入网站上的cookie。

2) 当用户导航到预订页面时，网站将从 cookie 中读取值，并用“eladbdv”填充“howhear”字段。

试图建议这个 JS 代码。我错过了什么吗？有任何生存逻辑错误吗？

[http://jsfiddle.net/Us8vR/](http://jsfiddle.net/Us8vR/)

# iphone - 应用未运行时处理推送通知

> ID：12116282
> 
> 赞同：45
> 
> 时间：2012-08-24T20:35:57.697
> 
> 标签：iphone, push-notification, apple-push-notifications

当我的应用程序***未***运行并收到推送通知时，如果我单击该通知，则会启动应用程序 - 但它不会提示用户使用我设置的警报视图，询问他们是否要查看通知的内容与否。它刚刚启动，并坐在那里。

推送通知在应用程序运行时***可以****完美*运行——无论是作为活动应用程序还是在后台运行——但当应用程序***不***运行时，没有任何东西可以正常工作。

 **我尝试注销`launchOptions`NSDictionary`application: didFinishLaunchingWithOptions:`以查看它带来的负载 - 但它显示为“（null）”。所以它基本上什么都不包含 - 这没有意义，因为它不应该包含通知的负载吗？

任何人都知道如何在应用程序未运行时使推送通知到达时工作？

编辑：这是我`application: didReceiveRemoteNotification`用来查看内容的代码：

```
if (UIApplicationStateBackground) {

    NSLog(@"===========================");
    NSLog(@"App was in BACKGROUND...");
}
else if (UIApplicationStateActive == TRUE) {
    NSLog(@"===========================");
    NSLog(@"App was ACTIVE");
}
else {
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber: 99]; 
    UIAlertView *BOOM = [[UIAlertView alloc] initWithTitle:@"BOOM"
                                                   message:@"app was INACTIVE"
                                                  delegate:self
                                         cancelButtonTitle:@"a-ha!"
                                         otherButtonTitles:nil];
    [BOOM show];
    NSLog(@"App was NOT ACTIVE");
} 
```

所以这应该处理所有应用程序的状态 - 但事实并非如此。推送通知仅在应用程序运行时起作用 - 无论是在后台还是在前台......

=================================================

更新/编辑#2：根据“@dianz”建议（如下），我修改了我的代码`application: didFinishLaunchingWithOptions`以包含以下内容：

```
UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
if (localNotif) {
    NSString *json = [localNotif valueForKey:@"data"]; 

    UIAlertView *bam = [[UIAlertView alloc] initWithTitle:@"appDidFinishWithOptions"
                                                  message:json   
                                                 delegate:self
                                        cancelButtonTitle:@"cool"
                                        otherButtonTitles:nil];
    [bam show];

} 
```

这确实使 AlertView 框出现，但似乎没有有效负载：显示 AlertView 的标题（“appDidFinishWithOptions”），但 json NSString 出现 EMPTY... 将继续调整...

=======================

编辑#3 - 它现在*几乎*100%工作
所以，在`didFinishLaunchingWithOptions`：

```
UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (localNotif) {
        // Grab the pushKey:
        pushKey = [localNotif valueForKey:@"pushKey"];
        // "pushKey" is an NSString declared globally
        // The "pushKey" in the "valueForKey" statement is part of my custom JSON Push Notification pay-load.
        // The value of pushKey will always be a String, which will be the name of the 
        // screen I want the App to navigate to. So when a Notification arrives, I go
        // through an IF statement and say "if pushKey='specials' then push the                                      
        // specialsViewController on, etc.

        // Here, I parse the "alert" portion of my JSON Push-Notification:
        NSDictionary *tempDict = [localNotif valueForKey:@"aps"];
        NSString *pushMessage = [tempDict valueForKey:@"alert"];

        // Finally, ask user if they wanna see the Push Notification or Cancel it:
        UIAlertView *bam = [[UIAlertView alloc] initWithTitle:@"(from appDidFinishWithOptions)"
                                                      message:pushMessage  
                                                     delegate:self
                                            cancelButtonTitle:@"Cancel"
                                            otherButtonTitles:@"View Info", nil];
        [bam show];

    } 
```

接下来我实现该`alertView: clickedButtonAtIndex`方法以查看用户在 AlertView 上选择的内容并相应地继续。

这与`didReceiveRemoteNotification`逻辑一起完美运行。

但是......当应用程序未运行时，我向它发送推送通知，如果我没有在推送通知警报到达时立即单击它，而是等待它淡出（这发生在 3- 4 秒），*然后*我单击应用程序的图标 - 现在它上面的 BADGE 为 1 - 应用程序启动，但在启动时我根本没有收到推送通知警报。它只是坐在那里。

我想我接下来需要弄清楚*这个*排列......

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-25T03:00:02.447

当您的应用程序未运行或被终止并且您点击推送通知时，此功能将触发；

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

所以你应该这样处理它，

```
UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
if (localNotif) {
    NSString *json = [localNotif valueForKey:@"data"];
    // Parse your string to dictionary
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-02T09:37:49.117

最好是如果你覆盖`didReceiveRemoteNotification` 这里你去

```
NSDictionary * pushNotificationPayload = [launchOptions valueForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
if(pushNotificationPayload) {
    [self application:application didReceiveRemoteNotification:pushNotificationPayload];
} 
```

这将再次触发该`didReceiveRemoteNotification`方法，并且您的`push notification`代码将像在应用程序运行时一样执行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-15T07:39:05.103

我尝试了@dianz 的答案，它对我不起作用，但我从答案中得到了帮助。

就我而言；

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

NSDictionary *apnsBody = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
if (apnsBody) {
    // Do your code with apnsBody
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-19T23:51:12.913

尽管已经回答了这个问题，但所提供的答案都没有真正正常工作。这是我能够开始工作的实现。

这段代码进入`application:didFinishLaunchingWithOptions:`

**迅速：**

```
if let options = launchOptions, notification = options[UIApplicationLaunchOptionsRemoteNotificationKey] as? [NSObject : AnyObject] {
    // NOTE: (Kyle Begeman) May 19, 2016 - There is an issue with iOS instantiating the UIWindow object. Making this call without
    // a delay will cause window to be nil, thus preventing us from constructing the application and assigning it to the window.
    Quark.runAfterDelay(seconds: 0.001, after: {
        self.application(application, didReceiveRemoteNotification: notification)
    })
} 
```

**目标-C：**

```
if (launchOptions[UIApplicationLaunchOptionsRemoteNotificationKey]) {
    [self application:application didReceiveRemoteNotification:launchOptions[UIApplicationLaunchOptionsRemoteNotificationKey]];
} 
```

几点注意事项：

*   可能是由于 iOS 对分配进行排队的方式，根`UIApplication.sharedApplication().window`对象在被杀死后启动应用程序时为 nil。添加 1 毫秒延迟修复了此问题。没有在 Objective-C 中测试这个

*   强制转换为 [NSObject: AnyObject] 是为了避免出现类型冲突，但我并没有尝试过这么多；在您自己的项目中实施时请牢记这一点。Objective-C 不需要这个。

*   Quark 只是我在所有项目中使用的一个有趣的小库，其中包含有用且常用的扩展和方法。只需使用适合您的应用程序需求的任何形式的延迟。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-30T22:59:22.883

我遇到了同样的问题，但我终于可以在使用通知服务扩展处于非活动状态（未运行）时处理推送通知。此解决方案由 Apple 团队支持推荐，仅适用于 iOS 10，我实施了它并且效果很好！我留下链接：

[https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ModifyingNotifications.html](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ModifyingNotifications.html)

这是程序：

1.  为您的应用创建一个新的通知服务扩展。打开您的项目并按 File - New - Target 并在 iOS 部分选择“通知服务扩展”选项。输入扩展名和所需的信息。之后，Xcode 会用 Objective C 语言添加两个文件：.h 和 .m 文件。

> 注意：考虑您将使用三个标识符：1）您的应用程序的标识符**（您已经拥有）** 2）您的扩展程序的标识符**（您将创建）** 3）应用程序组的标识符。**（您将创建）**

2.  必须启用**App Groups**才能创建资源，您可以在其中保存和读取您的应用程序和扩展程序的信息。单击“显示项目导航器”。在目标列表中选择您的主项目。然后，单击“功能”并打开名为“应用程序组”的选项。请添加 App Group 的标识符以识别共享资源。您应该为您创建的扩展目标执行相同的步骤（选择扩展目标 - 功能 - 在“应用程序组”处打开 - 为应用程序组添加相同的标识符）

3.  您应该将扩展的标识符添加到 Apple 开发人员站点中以识别通知服务扩展，还应该创建新的临时配置文件（开发、临时和/或生产）并将其与新的临时配置文件相关联。

4.  在两个标识符（应用程序和扩展）上，您应该编辑它们并在它们中启用“应用程序组”服务。您应该将应用程序组的标识符添加到应用程序组服务中。

> 注意：应用程序标识符和扩展程序标识符应该具有相同的应用程序组标识符。

5.  在 Xcode 上下载新的临时配置文件并将它们与您的通知服务扩展相关联。请确保您一切正常。

6.  之后，进入您的应用程序和扩展程序的“功能”，打开“应用程序组”部分并更新它们。这三个步骤 - 1) 将 App Groups 权利添加到您的权利文件，2) 将 App Groups 功能应用到您的 App ID 和 3) 将 App Groups 添加到您的 App ID - 应该被选中。

7.  返回项目导航器并选择您的扩展文件夹。打开 .m 文件。您将看到一个名为 didReceiveNotificationRequest:(UNNotificationRequest *)request 的方法。在此方法中，您将创建一个不同的 NSUserDefaults，其 SuiteName 与应用程序组的标识符完全相同，如下所示：

    > NSUserDefaults *defaultsGroup = [[NSUserDefaults alloc] initWithSuiteName: @"identifier for app group"];

8.  在同样的方法中，获取通知的正文并将其保存到 NSMutableArray 中，然后将其保存在共享资源中。像这样：

> ```
> - (void)didReceiveNotificationRequest:(UNNotificationRequest *)request withContentHandler:(void (^)(UNNotificationContent * _Nonnull))contentHandler{
>     self.contentHandler = contentHandler;
>     self.bestAttemptContent = [request.content mutableCopy];
> 
>     NSMutableArray *notifications = [NSMutableArray new];
>     NSUserDefaults *defaultsGroup = [[NSUserDefaults alloc] initWithSuiteName: @"Identifier for app group"];
>     notifications = [[defaultsGroup objectForKey:@"notifications"] mutableCopy];
>     if (notifications != nil){
>         [notifications addObject:self.bestAttemptContent.userInfo];
>     }else{
>         notifications = [NSMutableArray new];
>         [notifications addObject:self.bestAttemptContent.userInfo];
>     }
>     [defaultsGroup setObject:notifications forKey:@"notifications"];    
> } 
> ```

9.  最后，进入主项目的 App Delegate，在 didFinishLaunchingWithOptions 方法中，使用以下代码将数组恢复到共享资源中：

> ```
> NSUserDefaults *defaultsGroup = [[NSUserDefaults alloc] initWithSuiteName: @"Identifier for app group"];
> NSMutableArray *notifications = [[defaultsGroup objectForKey:@"notifications"] mutableCopy]; 
> ```

10.  好好享受！

我希望每一步都清楚。我要写一篇文章来在我的页面中使用图像来实现这个解决方案。您应该考虑的另一点是它不适用于静默推送通知。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T23:36:44.063

尝试转到该`didReceiveRemoteNotification`方法并在那里处理它。在那里，您可以通过对 执行条件来检查应用程序状态`applicationState`，例如检查它是否是`UIApplicationStateActive`或其他。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-10T02:56:21.943

试试这个

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    //register notifications
    if([application respondsToSelector:@selector(registerUserNotificationSettings:)]) // ios 8
    {
        [application registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeAlert|UIUserNotificationTypeBadge|UIUserNotificationTypeSound categories:nil]];
        [application registerForRemoteNotifications];
    }
    else // ios 7
    {
        [[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge];
    }

    // open app from a notification
    NSDictionary *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];

    if (notification) 
    {
        //your alert should be here
    }

    // Set icon badge number to zero
    application.applicationIconBadgeNumber = 0;

    return YES;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-22T14:51:40.987

**斯威夫特 3**和**xCode 8.3.2**：

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {
    // your code here

    // Check if app was not running in background and user taps on Push Notification
    // This will perform your code in didReceiveRemoteNotification where you should handle different application states
    if let options = launchOptions, let notification = options[UIApplicationLaunchOptionsKey.remoteNotification] as? [NSObject : AnyObject] {
        self.application(application, didReceiveRemoteNotification: notification)
    }

    return true
} 
```**

# php - 我的 php/mysqli 中出现错误和警告

> ID：12116283
> 
> 赞同：0
> 
> 时间：2012-08-24T20:35:57.830
> 
> 标签：php, mysqli

我在下面的代码中收到 2 个错误：

> 警告：mysqli::prepare() [mysqli.prepare]: (21S01/1136): 列数与第 115 行中第 1 行的值计数不匹配

> 致命错误：在第 119 行对 ... 中的非对象调用成员函数 bind_param()

我正在使用 mysqli 和 php 代码。我需要做什么才能修复这些错误？

代码：

```
$insertsql = "
INSERT INTO Teacher
(TeacherForename, TeacherSurname, TeacherEmail, TeacherAlias, TeacherUsername, TeacherPassword, Code)
VALUES
(?, ?, ?, ?, ?, ?, ?, ?)
";
if (!$insert = $mysqli->prepare($insertsql)) {
// Handle errors with prepare operation here
}                                           

$insert->bind_param("sssssss", $getfirstname, $getsurname,
         $getemail, $getid, $getuser,
         $teacherpassword, $code);

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

$insert->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:43:50.620

您的 SQL 中有太多参数：

```
INSERT INTO Teacher 
    (TeacherForename, TeacherSurname, TeacherEmail, TeacherAlias, TeacherUsername,   
    TeacherPassword, Code)
VALUES
    (?, ?, ?, ?, ?, ?, ?, ?) 
```

有 7 列和 8 个参数。

# excel - Excel 挂起...另一个评估树错误？

> ID：12116292
> 
> 赞同：1
> 
> 时间：2012-08-24T20:36:35.390
> 
> 标签：excel, excel-2003

Excel 2003，Windows XP SP3：

我们有许多 Excel 用户使用非常大、复杂的 Excel 工作簿。一个典型的工作簿可能有 60 多个工作表，大小超过 70MB。我们有一个 .xll 插件，我们制作并在这些电子表格中使用。我们的插件具有广泛的调试和日志记录功能。我们一直在生产插件版本并使用它们近 10 年。因此，我们的 Excel 界面的基础架构被证明是可靠且稳定的。

在某些情况下，Excel 在特定的代码段中挂起；也就是说，它挂在 Excel 本身的代码中，并且挂在一段特定的代码上。在这种情况下，它会无休止地执行一个紧密的代码循环（可​​能是 20 条机器指令，没有“调用”）。该代码似乎正在遍历一个循环的链表，通常只有很少的节点，例如只有四个节点。在我看来，它正在走一个与评估树（的某些部分）相对应的链表——不过我完全不确定。

我已经能够通过一个非常简单的插件（3 个返回固定数据的注册函数）和一个非常简单的电子表格（5 个单元格，3 个使用 3 个插件函数的公式）来表现这种行为。只有在完成对工作表中所有单元格的评估并使用结果更新屏幕后，Excel 才会挂起。无论使用哪个 Excel SDK 版本（v5.0、v12.0 和 v14.0 均已测试），它都会挂起。

这是示例代码的链接：[示例 .xls 工作簿和相应的 .xll 插件和插件源](https://docs.google.com/open?id=0B3p8VkghShF5VmJ5X0VORVdBTFk)

插件的来源很简单：

```
#include <windows.h>
#if SDK_VER == 5
#include "xlcall_v5_0.h"
#elif SDK_VER == 12
#include "xlcall_v12_0.h"
#elif SDK_VER == 14
#include "xlcall_v14_0.h"
#endif
extern "C" __declspec(dllexport) int xlAutoOpen(void) {
#define N_FUNCTIONS 3
#define N_FUNCTION_REGISTRATION_PARAMETERS 3
    char* rgFuncs[N_FUNCTIONS][N_FUNCTION_REGISTRATION_PARAMETERS] = {
        {"\013FunctionOne",     "\002RP",   "\013FunctionOne"},
        {"\013FunctionTwo",     "\002RP",   "\013FunctionTwo"},
        {"\014FunctionFour",    "\003RBP",  "\014FunctionFour"} };
    XLOPER xlFuncParams[N_FUNCTION_REGISTRATION_PARAMETERS+1];
    LPXLOPER ppxlFuncParams[N_FUNCTION_REGISTRATION_PARAMETERS+1];
    Excel4(xlGetName, (ppxlFuncParams[0] = &xlFuncParams[0]), 0);
    for(int i = 0; i < N_FUNCTIONS; i++) {
        for (int j = 1; j <= N_FUNCTION_REGISTRATION_PARAMETERS; j++) {
            xlFuncParams[j].xltype = xltypeStr;
            xlFuncParams[j].val.str = rgFuncs[i][j-1];
            ppxlFuncParams[j] = &xlFuncParams[j];
        }
        Excel4v(xlfRegister, 0, N_FUNCTION_REGISTRATION_PARAMETERS+1, ppxlFuncParams);
    }
    Excel4(xlFree, 0, 1, (LPXLOPER)&xlFuncParams[0]);
    return 1;
}
extern "C" __declspec(dllexport) LPXLOPER xlAddInManagerInfo(LPXLOPER xAction) {
    static XLOPER xInfo;
    XLOPER xloCoerceType, xIntAction;
    xloCoerceType.xltype = xltypeInt; xloCoerceType.val.w = xltypeInt;
    Excel4(xlCoerce, &xIntAction, 2, xAction, (LPXLOPER)&xloCoerceType);
    if( xIntAction.xltype == xltypeInt && xIntAction.val.w == 1) {
        xInfo.xltype = xltypeStr;
        xInfo.val.str = "\010ExcelBug";
    } else {
        xInfo.xltype = xltypeErr;
        xInfo.val.err = xlerrValue;
    }
    return (LPXLOPER)&xInfo;
}
LPXLOPER XLReturn(const double* pdData, const int nData, bool bRow=false) {
    static XLOPER xlDLLResult;
    static int nAllocated = 0;
    if( nAllocated==0 ) {
        xlDLLResult.xltype = xltypeMulti;
        nAllocated=max(nData,2);
        xlDLLResult.val.array.lparray = new XLOPER[nAllocated];
    } else if( nAllocated < nData ) {
        delete [] xlDLLResult.val.array.lparray;
        nAllocated = nData;
        xlDLLResult.val.array.lparray = new XLOPER[nAllocated];
    }
    for(int i = 0; i < nData; ++i) {
        xlDLLResult.val.array.lparray[i].xltype = xltypeNum;
        xlDLLResult.val.array.lparray[i].val.num = pdData[i];
    }
    xlDLLResult.val.array.rows    = (WORD)(bRow? 1      : nData );
    xlDLLResult.val.array.columns = (WORD)(bRow? nData  : 1     );
    return (LPXLOPER) &xlDLLResult;
}
extern "C" __declspec(dllexport) LPXLOPER FunctionOne( LPXLOPER ) {
    double dData = 41144.;
    return XLReturn(&dData, 1);
}
extern "C" __declspec(dllexport) LPXLOPER FunctionTwo( LPXLOPER ) {
    const double pdData[2] = {41145., 41176.};
    return XLReturn(pdData, 2);
}
extern "C" __declspec(dllexport) LPXLOPER FunctionFour( double, LPXLOPER ) {
    const double pdData[2] = {41145., -0.01345212};
    return XLReturn(pdData, 2, true);
} 
```

演示问题的电子表格位于上面链接指向的包中。

有没有人见过类似的行为（是的，描述很模糊，所以我意识到很难说......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:12:39.810

这已被 Microsoft 确认为 Excel 2003 中的一个错误。它发生在比我的简单示例更多的情况下。我的简单示例需要卸载和重新加载插件，但我遇到的错误是我只是在进行范围计算的情况。当人们在范围计算之后尝试工作表计算（shift-F9）时，似乎总是会发生这种情况。他们不愿意修复它。我很惊讶我没有看到任何其他关于这个错误的投诉。

# visual-studio-2012 - 在 Visual Studio 2012 中禁用代码分析

> ID：12116299
> 
> 赞同：13
> 
> 时间：2012-08-24T20:37:21.867
> 
> 标签：visual-studio-2012

> **可能重复：**
> [如何防止 Visual Studio 在每次构建后切换到代码分析选项卡？](https://stackoverflow.com/questions/11199625/how-do-you-prevent-visual-studio-from-switching-to-the-code-analysis-tab-after-e)

我现在使用 RTM 版本的 Visual Studio 2012。

每次构建时，我都会打开代码分析选项卡，显示代码提示。它减慢了我的编译时间。

我花了一些时间在谷歌上搜索它，但由于它是 2012 年，网上还没有太多帮助。

有谁知道我该如何禁用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T21:16:33.073

双击解决方案资源管理器中的属性文件夹。应该有一个代码分析选项卡。从那里您可以启用或禁用代码分析。

# installation - 设置/安装项目程序集重定向到相对目录

> ID：12116304
> 
> 赞同：0
> 
> 时间：2012-08-24T20:37:44.860
> 
> 标签：installation, .net-assembly, search-path

我开发了一个小型安装程序（目标：net 3.5 客户端配置文件），我有两个问题。

1.  因为这是使用 .Net 3.5 Framework 完成的，而我的目标系统之一是 XP，所以我必须在运行程序之前检查是否安装了 .Net 3.5 Framework。所以，我使用 Inno-Setup 来检查并安装框架。我不确定这是否是最好的方法。我想知道是否有人会在 Inno-Setup 选择方面给我一些更好的选择。我尝试过 Windows 脚本 (*.vbs)，但在我的一项测试中，在 XP 站上，这个 *.vbs 文件无法运行，因为这种类型的文件与 Wscript.exe 没有关联，所以我放弃了这个选项.
2.  我的项目使用的程序集文件（dll）很少，默认情况下，当我编译项目时，它们被转储到调试/发布文件夹中。但是，我使用了其他一些我动态加载的程序集文件，并通过反射调用方法和属性。我手动硬编码了这些文件相对于我的 exe 文件的位置。因此，如果我的 exe 文件位于 CD (D:) 中，那么我的程序将查找文件夹 D:\Bin。对于 win7，它将查找 D:\Bin\Win7，对于 XP，它将查找 D:\Bin\XP 文件夹等。我的程序使用三个常见的程序集（在开头描述），我之前通过“添加引用”加载了这些程序集编译我的项目，正如我所说，VS 将它们转储到调试/发布文件夹中。我真正需要的是将这些文件放在我的 Bin 文件夹中，这样我的 setup.exe 文件将与 CD 根目录中的 config.ini 文件单独存在；干净整洁。我需要以某种方式告诉 VS 我需要我的程序集位于输出文件夹（调试/发布）内的 Bin 文件夹中。如果这是可能的，那么我可以使用 Bin 文件夹复制我的可执行文件并制作 CD，这是我的最终目标。

关于这两个问题有更好的想法吗？tnx

# java - JSP 中的枚举描述

> ID：12116306
> 
> 赞同：0
> 
> 时间：2012-08-24T20:37:48.043
> 
> 标签：java, jsp, enums

我有一个带有键和描述的枚举，如下所示。在 JSP 中，我将获得值并且我想显示描述。

```
public enum STATUS {
    ACTIVE("A", "Active"),
    INACTIVE("I","Inactive"),
    PENDING("PND","Pending");

private final String value;
    private final String description;

    public String getValue() {
        return value;
    }
    public String getDescription() {
        return description;
    }
    STATUS(String value, String description) {
        this.value=value;
        this.description = description;
    }

    public static STATUS fromValue(String value) {
        if (value != null) {
            for (STATUS status : values()) {
                if (status.value.equals(value)) {
                    return status;
                }
            }
        }
        return getDefault();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:40:50.407

由于您有一个有效的符合 Javabean 的 getter 方法，因此您可以使用通常的 Javabean 方式访问它。

```
${status.description} 
```

或者，如果它被引用为*另一个*javabean 的属性，那么就这样做

```
${order.status.description} 
```

# html - 使用共享主机在 hostgator 上设置 websocket

> ID：12116307
> 
> 赞同：2
> 
> 时间：2012-08-24T20:37:49.470
> 
> 标签：html, websocket

我想尝试使用 HTML5 websockets API 创建视频聊天应用程序。我知道在客户端做什么，但我不知道如何设置服务器端。我目前在 hostgator 上使用共享主机，我想知道是否可以在我的服务器上设置 websocket，而无需升级到 VPS 主机或专用服务器。此外，服务器将运行的进程数限制为 25，这是否意味着如果我设置了 websocket，我最多只能有 25 个用户使用聊天应用程序。如果这是不可能的，那么我想知道任何便宜的替代品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-02T14:10:31.953

从[HostGator 支持门户](http://support.hostgator.com/articles/pre-sales-policies/socket-connections)：

> **插座连接**
> 
> 套接字被定义为网络上运行的两个程序之间双向通信链路的一个端点。套接字绑定到端口号，以便 TCP 层可以识别数据发送到哪个应用程序。
> 
> 您不得使用或创建新的入站套接字连接。
> 
> **PHP 套接字支持？**
> 
> 如果您正在连接，它应该可以工作。我们不允许客户端绑定到本地端口以进行传入。

看来您必须使用专用服务器或 VPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T09:52:17.820

对于 web 套接字，您需要运行一个可以使用 websocket 协议的整个套接字级服务器（如 apache 在端口 80 上运行）。询问hostgator他们是否允许你这样做......

# yahoo-pipes - Yahoo Pipes：使用自定义地址呈现为 rss

> ID：12116314
> 
> 赞同：2
> 
> 时间：2012-08-24T20:38:18.120
> 
> 标签：yahoo-pipes

我有几个雅虎管道，我已经给了自定义地址（pipes.yahoo.com//），我希望能够使用我分配给它的自定义名称将此管道呈现为 rss。

显然这不像pipes.yahoo.com//pipe.run?_name&_render=rss那么简单。

对于那些在那里的人，您是否尝试过这样的事情并让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:51:09.273

一个讨厌的解决方案是使用“XPath fetch page”模块来获取自定义 URL 页面，并从 HTML 中提取以下 XPath：

```
//link[@type="application/rss+xml"] 
```

遗憾的是，即使这样也没有给你一个立即可用的 URL——我需要通过“循环”操作符来提取 item.href 并获取提要。

工作示例： http: [//pipes.yahoo.com/gavin_brock/get_pipe_by_custom_name](http://pipes.yahoo.com/gavin_brock/get_pipe_by_custom_name)

我还尝试了“查找第一个站点提要”模块，它看起来应该在一个中执行此操作，但它不遵循重定向，与“XPath Fetch Page”不同，因此无法正常工作（我认为管道中的一个错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:54:52.500

我最终只是编写了一个 powershell 脚本来在需要时更新提要 webpart。

# c# - 谷歌身份验证 C#

> ID：12116321
> 
> 赞同：3
> 
> 时间：2012-08-24T20:38:36.990
> 
> 标签：c#, .net, console, google-analytics, google-analytics-api

很长一段时间以来，我一直在研究如何让我的 C# 控制台应用程序从 Google Analytics API 中提取数据，但我很困惑。我目前有一个应用程序可以执行此操作，但由于它使用的是 API V2.3（已停止使用），因此它已停止工作。我想重写此应用程序以使用 API V3.0 和 OAuth2.0，但我似乎无法弄清楚如何让身份验证从控制台应用程序正常工作。

所以我的问题是：在我有一个命令行应用程序尝试执行 OAuth2.0 的情况下，我会使用什么“场景”（谷歌在[这里](https://developers.google.com/accounts/docs/OAuth2)有一个列表）。我的猜测是我需要遵循“服务帐户”场景，但我认为这是因为我不相信我可以通过命令行界面完成整个浏览器重定向。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:50:17.477

Google 实际上有一些客户端库可以为您处理这个问题。[.Net](https://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)甚至有一个命令行示例 :)

# javascript - JavaScript：检查变量是否等于两个或多个值的简单方法？

> ID：12116326
> 
> 赞同：55
> 
> 时间：2012-08-24T20:39:04.767
> 
> 标签：javascript, comparison

是否有更简单的方法来确定变量是否等于某个值范围，例如：

```
if x === 5 || 6 
```

而不是像这样钝的东西：

```
if x === 5 || x === 6 
```

?

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-08-24T20:40:58.390

您可以将值存储在数组中，并使用以下命令检查变量是否存在于数组中[`[].indexOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if([5, 6].indexOf(x) > -1) {
  // ...
} 
```

如果`-1`返回则该变量在数组中不存在。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-24T20:46:09.180

取决于你正在执行什么样的测试。如果你有静态字符串，这很容易通过正则表达式检查：

```
if (/^[56ab]$/.test(item)) {
//-or-
if (/^(foo|bar|baz|fizz|buzz)$/.test(item)) {
    doStuff();
} else {
    doOtherStuff();
} 
```

如果您有一小部分值（字符串或数字），则可以使用`switch`：

```
switch (item) {
case 1:
case 2:
case 3:
    doStuff();
    break;
default:
    doOtherStuff();
    break;
} 
```

如果您有很长的值列表，您可能应该使用带有[`~arr.indexOf(item)`](https://stackoverflow.com/a/10584043/497418), 或的数组`arr.contains(item)`：

```
vals = [1,3,18,3902,...];
if (~vals.indexOf(item)) {
    doStuff();
} else {
    doOtherStuff();
} 
```

[不幸`Array.prototype.indexOf`的是，某些浏览器不支持。幸运[的是，有一个 polyfill 可用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)。如果您遇到了 polyfilling 的麻烦`Array.prototype.indexOf`，您不妨添加`Array.prototype.contains`.]

根据您关联数据的方式，您可以将对象内的动态字符串列表存储为与其他相关信息的映射：

```
var map = {
    foo: bar,
    fizz: buzz
}
if (item in map) {
//-or-
if (map.hasOwnProperty(item)) {
    doStuff(map[item]);
} else {
    doOtherStuff();
} 
```

[`in`将检查整个原型链，而`Object.prototype.hasOwnProperty`只会检查对象，因此请注意它们是不同的。]

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-24T20:41:11.573

完全没问题。如果您有更长的值列表，也许您可​​以使用以下内容：

```
if ([5,6,7,8].indexOf(x) > -1) {
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-24T20:41:27.990

是的。您可以使用自己的功能。此示例使用[`.some`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)：

```
var foo = [ 5, 6 ].some(function(val) {
     return val === x;
   });

foo; // true 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T01:18:58.667

这是我决定使用的：

```
Object.prototype.isin = function() {
    for(var i = arguments.length; i--;) {
        var a = arguments[i];
        if(a.constructor === Array) {
            for(var j = a.length; j--;)
                if(a[j] == this) return true;
        }
        else if(a == this) return true;
    }
    return false;
} 
```

你会像这样使用它：

```
var fav   = 'pear',
    fruit = ['apple', 'banana', 'orange', 'pear'],
    plu   = [4152, 4231, 3030, 4409];

if (fav.isin(fruit, plu, 'eggs', 'cheese')) {
    //do something cool
} 
```

优点是：

*   它适用于 IE < 9；
*   它自然地从左到右阅读；
*   您可以为其提供数组或单独的值。

如果您不想允许类型强制（`indexOf`不允许），请将两者更改`==`为`===`. 就目前而言：

```
fav = "4231";
plu.indexOf(fav) //-1
fav.isin(plu)    //true 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-24T21:02:44.937

不，可能有一些特定于案例的技巧，但总的来说我编写这样的代码：

```
if (someVariable === 1 ||
    someVariable === 2 ||
    someVariable === 7 ||
    someVariable === 12 ||
    someVariable === 14 ||
    someVariable === 19) {

    doStuff();
    moreStuff();

} else {
    differentStuff();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T20:43:04.500

简单回答是不。您可以使用 switch 语句，如果您要比较大量字符串值，这将更容易阅读，但将它用于两个值不会看起来更好。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-11-05T13:07:31.917

**[编辑]这似乎有效，但正如丹指出的那样，它实际上是一个误报。不要使用这种方法。我把它留在这里是为了教育目的。**

我知道的最简单的方法：

```
a = [1,2,3,4,5];

if(3 in a) alert("true"); // will alert true 
```

在 Chrome 控制台中测试。不确定它是否适用于其他浏览器。

# asp.net - ASP.net LinkBut tion if then else

> ID：12116330
> 
> 赞同：0
> 
> 时间：2012-08-24T20:39:26.683
> 
> 标签：asp.net, gridview, datagridview, linkbutton, commandargument

嘿，我在这里有这段代码：

```
<asp:TemplateField>
   <ItemTemplate>
       <asp:LinkButton CommandArgument='<%#Eval("id") & "|" & Eval("theName")%>' runat="server" Text='<%#Eval("status")%>' CommandName='<%#Eval("status")%>' ID="statusLink" />
   </ItemTemplate>
</asp:TemplateField> 
```

在它说“状态”的地方，它可能是“拒绝”、“待定”或“批准”。问题是，如果它说**APPROVED**但对于**REJECTED**和**APPROVED**有不同的链接，我怎么能没有链接？

我目前以这种方式检查点击次数：

```
Protected Sub grdView_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles grdView.RowCommand
    Dim command As String = e.CommandName.ToString
    Dim theName() As String = Split(e.CommandArgument.ToString, "|")
    Dim cid As String = theName(0)

    If cid.Length <= 0 Then Exit Sub

    Select Case command
        Case "PENDING"
            Response.Redirect("/account/Req.aspx?ID=" & cid & "&ACCEPT=yes&NAME=" & theName(1))
        Case "REJECTED"
            Response.Redirect("/account/Req.aspx?ID=" & cid & "&ACCEPT=no&NAME=" & theName(1))
    End Select
End Sub 
```

所以如果一个记录是这样的：

```
 Bob | Barker | Bob@priceisright.com | PENDING (Approve | Reject) 
```

然后，用户可以通过按下任一链接来选择批准或拒绝该人。

如果它已经被批准，那么它应该看起来像这样：

```
 Bob | Barker | Bob@priceisright.com | Approve! 
```

...没有与任何东西联系在一起。

任何帮助都会很棒！

**更新**

也许更好的替代方法是动态创建 asp 链接按钮。但是您如何将它们插入页面上的正确位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:16:19.497

快速，非常快速的解决方法 - 但它不会在批准时不将链接显示为简单文本，是这样的：

```
<asp:TemplateField>
   <ItemTemplate>
       <asp:LinkButton 
     OnClientClick='<%#Eval("status")=="Approved"?"javascript:return false;":""%>'
    CommandArgument='<%#Eval("id") & "|" & Eval("theName")%>' runat="server" Text='<%#Eval("status")%>' CommandName='<%#Eval("status")%>' ID="statusLink" />
   </ItemTemplate>
</asp:TemplateField> 
```

这样做是在通过从 Javascript 函数调用返回 false 来批准状态时禁用表单提交。否则，它会回发到服务器。

**更新：**

这是完整的解决方案，使“已批准”链接按钮仅显示文本；不发回或超链接：

```
<asp:TemplateField>
   <ItemTemplate>
       <asp:LinkButton 
     name='<%#Eval("status") %>'
    CommandArgument='<%#Eval("id") & "|" & Eval("theName")%>' runat="server" Text='<%#Eval("status")%>' CommandName='<%#Eval("status")%>' ID="statusLink" />
   </ItemTemplate>
</asp:TemplateField> 
```

现在，您可以简单地调用 Window.load 上的 JS 函数来删除所有`hrefs`具有名称的元素`Approved`

```
<script>
    window.onload = function () {    
        //get elements with name Approved
        var aprovedLinks = document.getElementsByName("Approved");
        for (var i = 0; i < aprovedLinks.length; i++) {
            //remove the hyperlink
            aprovedLinks[i].removeAttribute("href", 0);
        }
    };
</script> 
```

# objective-c - 为什么要终止此代码？

> ID：12116332
> 
> 赞同：0
> 
> 时间：2012-08-24T20:39:42.303
> 
> 标签：objective-c

我已经编写了以下代码然后运行。之后，当我触摸 uibutton 时，该应用程序被终止。

我想知道为什么终止。

我怀疑是否自动释放？

有没有人可以明确解释

为什么 myClass 实例被释放和

myClass 被释放的地方和

myClass 可以使用自动释放的方式？

```
 @interface MyClass : NSObject
    - (void)testMethod;
    @end

    @implementation MyClass{
        NSMutableArray *array;
    }

    - (id)init{
        if ((self = [super init])) {
            array = [[NSMutableArray alloc] initWithCapacity:0];
        }
        return self;
    }

    - (void)dealloc {
        [array release];
        [super dealloc];
    }

    - (void)testMethod {
        NSLog(@"after init : %@", array);
    }

    @end

    @implementation ViewController {
        MyClass *myClass;
    }

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        myClass = [[[MyClass alloc] init] autorelease];  <== cause of ternimate?

        UIButton *aButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        [aButton addTarget:self action:@selector(testArray:) forControlEvents:UIControlEventTouchUpInside];
        aButton.frame=CGRectMake(110.0f, 129.0f, 100.0f, 57.0f);
        [aButton setTitle:@"title" forState:UIControlStateNormal & UIControlStateHighlighted & UIControlStateSelected];
        [self.view addSubview:aButton];

    }

    - (void)testArray:(id)sender {
        [myClass testMethod];
    }
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:43:51.113

```
myClass = [[[MyClass alloc] init] autorelease]; 
```

可能是因为您正在自动发布`myClass`。它是一个实例变量，所以它应该被保留（然后在类的`dealloc`方法中释放）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:44:35.457

似乎是由于

```
myClass = [[[MyClass alloc] init] autorelease]; 
```

当您触摸按钮时，MyClass 的实例已经被释放。不要偷懒——自动释放*不是*终极的“解决我的内存管理问题，让我不必思考”的解决方案——在这里你只需要使用

```
myClass = [[MyClass alloc] init]; 
```

然后在需要时手动释放它 - 可能在您的 ViewController 类的 -dealloc 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:45:16.543

这是导致问题的自动释放。

您应该使 myClass 成为一个属性。

```
@implementation ViewController {

    }
    @property (nonatomic, retain) MyClass *myClass;

    @synthesize myClass
    -(void)dealloc
    {
      [myClass release];
      [super dealloc];
    }
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        self.myClass = [[[MyClass alloc] init] autorelease];

        UIButton *aButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
        [aButton addTarget:self action:@selector(testArray:) forControlEvents:UIControlEventTouchUpInside];
        aButton.frame=CGRectMake(110.0f, 129.0f, 100.0f, 57.0f);
        [aButton setTitle:@"title" forState:UIControlStateNormal & UIControlStateHighlighted & UIControlStateSelected];
        [self.view addSubview:aButton];

    }

    - (void)testArray:(id)sender {
        [myClass testMethod];
    } 
```

# wpf - VisualTreeHelper.GetChildren 未找到 TabItem 的子项

> ID：12116339
> 
> 赞同：6
> 
> 时间：2012-08-24T20:40:46.153
> 
> 标签：wpf, tabcontrol, visualtreehelper

我有以下 C# 代码来查找 DependendencyObject 的子项：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject parent) where T : DependencyObject
    {
        int childrenCount = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < childrenCount; i++)
        {
            var child = VisualTreeHelper.GetChild(parent, i);

            T childType = child as T;
            if (childType == null)
            {
                foreach (var other in FindVisualChildren<T>(child))
                    yield return other;
            }
            else
            {
                yield return (T)child;
            }
        }
    } 
```

当我遍历底部发布的 XAML 中的 TabItems 时，将每个 TabItem 传递给上述方法，要求它查找所有扩展程序，它什么也不返回。此外，我在附加到每个选项卡项的 Loaded 事件的事件处理程序中发出此请求。

```
 <TextBlock Text="Number of Parts" Grid.Column="0"/>                                   
                                <ComboBox Grid.Column="2"                                              
                                          Margin="0,0,0,2"                                                                                                                                        
                                          />                                                              
                            </Grid>
                        </Expander>
                        <Expander Header="Date/Time Format" 
                  Margin="5,0,5,0"
                   Padding="3,3,0,0"
                  IsExpanded="True" >
                            <Grid Margin="20,4,0,4">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="25"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>                                                                  
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Date/Time Format" Grid.Row="0"/>
                                <ComboBox Name="cmbDateTimeFormats"                                             
                                          Grid.Row="0" Grid.Column="2"/>
                            </Grid>
                        </Expander>                           
                    </StackPanel>                       
                </DockPanel>
            </Border>                
        </TabItem>
        <TabItem Header="Profile">
            <Border  >
                <DockPanel LastChildFill="False">
                    <StackPanel DockPanel.Dock="Top">
                        <GroupBox Header="Local" 
                              Margin="5,8" Padding="3,3,0,0"
                              >                                 
                            <Grid Margin="20,4,0,4">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="25"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition  />
                                    <ColumnDefinition  />
                                    <ColumnDefinition  />

                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <Button Content="Location..." Grid.Row="0" Name="btnProfLoc"    />
                                <TextBlock Text="{Binding ProfileLocation}" Grid.Row="0" Grid.Column="2"/>

                                <Button Name="btnSaveProfile" Height="25"
                                        Margin="2,5,0,0" Grid.Row="1"                                           
                                        Padding="2,1" >                                    
                                    <StackPanel Orientation="Horizontal">                                       
                                        <TextBlock Text="Save" Margin="5,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnLoadProfile" Height="25"
                                        Margin="2,5,0,0" Grid.Row="2"                                           
                                        Padding="2,1" >
                                    <StackPanel Orientation="Horizontal">

                                        <TextBlock Text="Load" Margin="5,0"/>
                                    </StackPanel>
                                </Button>

                                <Button Name="btnResetProfile" Height="25"
                                        Margin="2,5,0,0" Grid.Row="3"                                           
                                        Padding="2,1" >
                                    <StackPanel Orientation="Horizontal">                                         
                                        <TextBlock Text="Reset" Margin="5,0"/>
                                    </StackPanel>
                                </Button>                                    
                            </Grid>
                        </GroupBox>                       
                    </StackPanel>
                    <StackPanel 
                    DockPanel.Dock="Bottom" Orientation="Horizontal">

                    </StackPanel>
                </DockPanel>
            </Border>                
        </TabItem>
    </TabControl> 
```

有人猜我的方法有什么问题吗？我没有在这个特定的自定义控件中尝试过，但是这个方法已被用于在另一个自定义控件中查找给定类型的子项。主要区别在于我要查找的项目是 TabItems 的子项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T01:08:23.063

选项卡中的控件似乎不是可视树中 TabItem 的子项。它们是 TabControl 的子级。

如果您将以下代码添加到您的应用程序中，您就会明白我的意思。并在选项卡上包含一个带有单击处理程序的按钮，该处理程序报告按钮的路径。

```
public string Id(object control)
{
    if (control is UIElement)
    {
        string id = ((UIElement)control).GetValue(AutomationProperties.AutomationIdProperty).ToString();
        id += "(" + control.GetType().Name + ")";
        return id;
    }
    return "not a ui element";
}

private static T FindParent<T>(DependencyObject child)
    where T : DependencyObject
{
    if (child == null) return null; 
    var parent = VisualTreeHelper.GetParent(child);
    return parent as T ?? FindParent<T>(parent);
}

public string Path(object control)
{
    if ( control == null ) return "";
    var path = Id(control);
    var parent = FindParent<FrameworkElement>(control as UIElement);
    if (parent != null ) path = Path(parent) +"/"+ path;
    return path;
} 
```

对于我的应用程序，我得到以下信息：“MainForm(MainPage)/(Grid)/(StackPanel)/TabControl(TabControl)/(Grid)/(Grid)/(Border)/(ContentPresenter)/(StackPanel)/Button(Button )"

注意 TabControl，但没有 TabItem。

如果我连接到来自 TabItem 本身的事件，我会得到以下路径：“MainForm(MainPage)/(Grid)/(StackPanel)/TabControl(TabControl)/(Grid)/(Grid)/(TabPanel)/MyTabItem(TabItem )"

这表明项目不存在于可视树中的 TabItem 中，而是作为 TabControl 的子项。（这很糟糕。）注意：它们在您更改选项卡时被虚拟化并实现。

# sql-server - 为每个父项选择前 1 条记录时，子查询太慢

> ID：12116345
> 
> 赞同：2
> 
> 时间：2012-08-24T20:41:07.613
> 
> 标签：sql-server, performance, sql-server-2008-r2, database-performance

我正在尝试使用子查询方法找到所选日期内的最后一条记录。问题是查询太慢了。我想知道是否有人对如何重写此查询以提高性能有任何想法。我的服务器因此而死亡。
为了使测试更容易，我创建了一个表变量来生成用于测试目的的假数据。要测试此脚本，请运行 usp_ExtractData'400000'

我担心的是 ---SECTION B 我的结果是 400000*3 = 1200000 条记录的 18 秒。在真正的数据库上，我会为它编制索引并每晚重新编制索引。

```
--Store proceedure with table variable data

ALTER PROCEDURE [dbo].[usp_ExtractData](
@TotalRecord int--Create random records for each product
)

AS
BEGIN
    --MS SQL 2008
    SET NOCOUNT ON;

    --SECTION 1--Create test data--- GO TO SECTION 2
        --Create Variable table to Products fake data
        DECLARE @Product TABLE
        (
          ProductID int primary  key not null
          ,SKU varchar(100) not null
        )
        --Insert couple records into @Product table
        INSERT INTO @Product(ProductID, SKU) VALUES     (100,'CUP100')
        INSERT INTO @Product(ProductID, SKU) VALUES     (101,'CUP101')
        INSERT INTO @Product(ProductID, SKU) VALUES     (102,'MUG101')

        --Create Variable table to hold Products History data
        DECLARE @History TABLE
        (
           ID int identity not null
          ,ProductID int not null
          ,VisitedDatetime datetime not null
        )

        --Generate random record for testing
        WHILE @TotalRecord>0
            BEGIN
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (100,DATEADD(minute,rand()*100,GETDATE()))
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (101,DATEADD(minute,rand()*100,GETDATE()))
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (102,DATEADD(minute,rand()*100,GETDATE()))
                set @TotalRecord=@TotalRecord-1
            END
    --SECTION 1--Finised creating test data

    ---SECTION B 

      --SELECTION B1- SEE DATA
      SELECT * FROM @History         ORDER BY ProductID, VisitedDatetime DESC
        --Run query to find the last visit per each ProductID

        --THIS IS TOO SLOW
        DECLARE @TestPerformanceDatetime datetime--Test performance
        SET @TestPerformanceDatetime= GETDATE()
        SELECT  *, (select top(1) VisitedDatetime FROM @History as t2 WHERE t2.ProductID=ProductID and VisitedDatetime BETWEEN GETDATE() AND GETDATE()+10 ORDER BY VisitedDatetime DESC) as LastVistiDate
        FROM     @Product

        --Display the performance
        SELECT  DATEDIFF(SECOND, @TestPerformanceDatetime,getdate()) AS TotalSeconds
    ---SECTION B - End
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:10:54.167

使用`cross apply`和`max()`。

```
select *
from @Product p
cross apply (
    select MAX(VisitedDatetime) LastVisitedDatetime
    from @History
    where VisitedDatetime BETWEEN GETDATE() AND GETDATE()+10
        and ProductID = p.ProductID
) h 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:42:29.980

这个查询的原始版本我得到了 0 秒，所以我将随机测试记录的数量从 400,000 增加到 4,000,000。

```
CREATE PROCEDURE [dbo].[usp_ExtractData_test](
@TotalRecord int--Create random records for each product
)

AS
BEGIN
    --MS SQL 2008
    SET NOCOUNT ON;

    --SECTION 1--Create test data--- GO TO SECTION 2
        --Create Variable table to Products fake data
        DECLARE @Product TABLE
        (
          ProductID int primary  key not null
          ,SKU varchar(100) not null
        )
        --Insert couple records into @Product table
        INSERT INTO @Product(ProductID, SKU) VALUES     (100,'CUP100')
        INSERT INTO @Product(ProductID, SKU) VALUES     (101,'CUP101')
        INSERT INTO @Product(ProductID, SKU) VALUES     (102,'MUG101')

        --Create Variable table to hold Products History data
        DECLARE @History TABLE
        (
           ID int identity not null
          ,ProductID int not null
          ,VisitedDatetime datetime not null
        )

        --Generate random record for testing
        WHILE @TotalRecord>0
            BEGIN
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (100,DATEADD(minute,rand()*100,GETDATE()))
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (101,DATEADD(minute,rand()*100,GETDATE()))
                INSERT INTO  @History( ProductID, VisitedDatetime) VALUES (102,DATEADD(minute,rand()*100,GETDATE()))
                set @TotalRecord=@TotalRecord-1
            END
    --SECTION 1--Finised creating test data

    ---SECTION B 
        --Run query to find the last visit per each ProductID
        --THIS IS TOO SLOW
        DECLARE @TestPerformanceDatetime datetime--Test performance
        SET @TestPerformanceDatetime= GETDATE()
        SELECT  P.*, LastVisitDate.VisitedDatetime
        FROM     @Product P
        LEFT
        JOIN  (select top(1) T2.VisitedDatetime FROM @History as t2
               ORDER BY T2.VisitedDatetime DESC) as LastVisitDate
          ON  LastVisitDate.VisitedDatetime BETWEEN GETDATE() AND GETDATE()+10

        --Display the performance
        SELECT  DATEDIFF(SECOND, @TestPerformanceDatetime,getdate()) AS TotalSeconds
    ---SECTION B - End
END 
```

![证明](../Images/3a7374b92a81521881304e78ab151924.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T00:10:44.360

在我的笔记本上，我看到生成历史记录大约需要 102,346 毫秒，第一次搜索需要 5,120 毫秒，第二次搜索需要 643 毫秒。OTOH，它同时是 BOINCing Rosetta@Home。

```
declare @HistoryRecordsPerProduct int = 400000

set nocount on

-- drop table #Product
-- drop table #History

-- Create the test tables.

create table #Product
  ( ProductId Int primary key not null, SKU VarChar(100) not null )

insert into #Product ( ProductId, SKU ) values
  ( 100, 'CUP100' ), ( 101, 'CUP101' ), ( 102, 'MUG102' )

create table #History 
  ( Id Int identity not null, ProductId Int not null, VisitedDatetime DateTime not null )
-- EDIT: Note the following index on both columns. 
create index History_Product_VisitedDateTime on #History ( ProductId, VisitedDateTime desc )

-- Populate the history table.
declare @Start as DateTime = GetDate()

while @HistoryRecordsPerProduct > 0
  begin
  insert into #History ( ProductId, VisitedDatetime ) values ( 100, DateAdd( minute, rand() * 100, GetDate() ) ) 
  insert into #History ( ProductId, VisitedDatetime ) values ( 101, DateAdd( minute, rand() * 100, GetDate() ) ) 
  insert into #History ( ProductId, VisitedDatetime ) values ( 102, DateAdd( minute, rand() * 100, GetDate() ) ) 
  set @HistoryRecordsPerProduct = @HistoryRecordsPerProduct - 1 
  end 

select DateDiff( ms, @Start, GetDate() ) as 'Elapsed History Generation (ms)'

-- Query the data.
set @Start = GetDate()
declare @End as DateTime = @Start + 10 -- Days.

select @Start as [Start], @End as [End]

select ProductId, SKU,
  ( select Max( VisitedDateTime ) from #History where ProductId = #Product.ProductId and
    @Start <= VisitedDatetime and VisitedDatetime <= @End ) as VDT
  from #Product

select DateDiff( ms, @Start, GetDate() ) as 'Elapsed Search (ms)'

-- And again with the data cached.

set @Start = GetDate()
set @End = @Start + 10 -- Days.

select @Start as [Start], @End as [End]

select ProductId, SKU,
  ( select Max( VisitedDateTime ) from #History where ProductId = #Product.ProductId and
    @Start <= VisitedDatetime and VisitedDatetime <= @End ) as VDT
  from #Product

select DateDiff( ms, @Start, GetDate() ) as 'Elapsed Search (ms)' 
```

# multithreading - Haskell中并发的奇怪行为

> ID：12116347
> 
> 赞同：6
> 
> 时间：2012-08-24T20:41:13.573
> 
> 标签：multithreading, sorting, haskell, sleep

我有以下代码：

```
import Control.Concurrent

sleepSort = mapM_ (forkIO . put)
  where put x = threadDelay (x*10000) >> print x 
```

这对一组整数执行睡眠排序，并且工作正常，除了一个警告：

程序按顺序打印出数据集中的每个数字，就像它应该做的那样。但是，在打印完最后一个数字后，它会等待用户输入某个数字，然后回显该数字，然后完成。

我认为我在任何时候都不会要求用户输入，那么为什么会发生这种情况呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T22:35:48.250

发生这种情况是因为您的主线程不等待其他线程完成。您的程序启动了*n 个*线程，但主线程立即退出，并且您返回到解释器提示符。同时其他线程继续产生输出：

```
Prelude Control.Concurrent> sleepSort [1,2,3]
1
Prelude Control.Concurrent> 2
3 
```

您可以通过向主线程添加延迟来解决此问题：

```
Prelude Control.Concurrent> sleepSort [1,2,3] >> threadDelay 10000
1
2
3 
```

如果您正在运行已编译的程序，它会立即退出而不打印任何内容：

```
$ cat Test.hs
import Control.Concurrent

sleepSort = mapM_ (forkIO . put)
  where put x = threadDelay (x*1000) >> print x

main = sleepSort [1,2,3]
$ ghc --make -O2 Test.hs
[1 of 1] Compiling Main             ( Test.hs, Test.o )
Linking Test ...
$ ./Test
$ 
```

**更新：**您可以在函数中使用信号量，而不是添加对`threadDelay`to的调用：`main``sleepSort`

```
import Control.Concurrent
import Control.Concurrent.QSemN

sleepSort l = do
  qsem <- newQSemN 0
  mapM_ (forkIO . put qsem) l
  waitQSemN qsem n
  where
    n = length l
    put qsem x = threadDelay (x*1000) >> print x >> signalQSemN qsem 1

main = sleepSort [1,2,3] 
```

# python - 控制用户输入的 if 语句

> ID：12116348
> 
> 赞同：0
> 
> 时间：2012-08-24T20:41:17.433
> 
> 标签：python

给出的代码可以正常工作，但不能与原始代码一起使用。我希望代码提供 1 到 5 的数字，并且只接受 1 到 5 的数字。在范围内选择的数字仍将返回随机整数。

```
import random

user_input = raw_input("Enter a number between 1 and 5 : ") 
selected_elem = []

while len(selected_elem) < int(user_input):
    if user_input >= int(6):
        print ("That is not an option...")
    random_elem = random.randrange(1, 10, 1)
    if random_elem not in selected_elem:
        selected_elem.append(random_elem)

print ("Here are the numbers... ")+ str(selected_elem) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:49:34.527

这是我尝试根据您有限的详细信息收集答案：

```
num = input('Please enter a number between 1-5')

if num in range(1,6):
    print("That's a valid option. Congratulations!")
else:
    print("That's not an option, fool!") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:54:45.913

**更新现在发布的 OP 代码：**

```
while len(selected_elem) < int(user_input):
    if 1 <= int(user_input) <= 5:
        random_elem = random.randrange(1, 10, 1)
        if random_elem not in selected_elem:
            selected_elem.append(random_elem)
    else:
        print ("That is not an option...") 
```

请注意，如果输入`user_input`的不是数字并且`int()`失败，您的程序将崩溃（抛出异常）。如有必要，您可以移植下面显示的 try/except 代码来处理该问题。

*------ OP发布的没有代码的上一个答案------------*

如果您可以确定输入将始终是一个数字，您可以这样做：

```
while True:
    num = input('Enter number between 1 - 5:')
    if 1 <= num <= 5:
        print 'number is fine' 
        break
    else:
        print 'number out of range' 
```

它将继续循环，直到用户输入指定范围内的数字。

否则，添加的 try/except 代码将捕获非数字输入：

```
while True:
    try:
        num = input('Enter number between 1 - 5:')
        if 1 <= num <= 5:
            print 'number is fine'
            break
        else:
            print 'number out of range'
    except NameError:
        print 'Input was not a digit - please try again.' 
```

如果不希望用户在输入非数字后再次尝试，只需调整消息并`break`在 final 下方添加一条语句`print`即可退出循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T20:56:11.503

见鬼：

```
import re
def ask_digit():
    while True:
        digit = raw_input("Please enter a number between 1 and 5: ")
        if re.match(r"[1-5]$", digit):
            return int(digit) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T20:48:07.563

不是很清楚的描述，但似乎你需要类似的东西：

```
def ask_digit(calls=0):
    if calls > 10:
        print "You are so boring..."
        raise ValueError("Can't get answer from user")

    try:
        num = int(raw_input("Enter number 1-5: "))
    except ValueError:
        print "Not a digit"
        return ask_digit(calls+1)

    if num < 1 or num > 5:
        print "Not valid"
        return ask_digit(calls+1)

    return num

if __name__ == "__main__":
    ask_digit() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T20:53:18.160

这是一个不断提示用户输入数字的答案，直到它最终得到一个有效的数字。

```
n = input('Enter a number in the range 1-5')

while(n < 1 or n > 5):
    print('Incorrect input')
    n = input('Enter a number in the range 1-5') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-04T22:19:37.027

您必须将 int 放入输入中才能使代码正常工作

```
n = int(input('Enter a number in the range 1-5'))
while(n < 1 or n > 5):
    print('Incorrect input')
    n = int(input('Enter a number in the range 1-5')) 
```

# iphone - 无法播放视频

> ID：12116352
> 
> 赞同：0
> 
> 时间：2012-08-24T20:41:28.620
> 
> 标签：iphone, objective-c, ios-simulator

在查看了如何使用 Objective-C 播放电影之后，它似乎非常简单。我正在使用的代码如下：

```
- (void) createMovie {
    NSLog(@"create movie method called");
    NSString *path = [[NSBundle mainBundle] pathForResource:@"walkthrough" ofType:@"mp4"];   

    MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:path]];
    player.view.frame = CGRectMake(184, 200, 400, 300);
    [self.view addSubview:player.view];
    [player play];

} 
```

我已经`#import <MediaPlayer/MediaPlayer.h>`在我的头文件中包含了相应的内容。当视图加载时，我可以看到一个黑框，我认为它是播放器视图的框架，但没有视频。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:53:48.347

尝试离开`MPMoviePlayerController *moviePlayer`你的职能。（如 .h 文件或函数上方）。然后做：

```
player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:path]]; 
```

我认为您一离开该功能就会释放它。

# asp.net - Google Chart 未在 UpdatePanel 的 ScriptManager.RegisterClientScriptBlock 调用上绘制

> ID：12116353
> 
> 赞同：1
> 
> 时间：2012-08-24T20:41:31.023
> 
> 标签：asp.net, updatepanel, registerclientscriptblock

我正在触发基于 ASP.NET UpdatePanel 中的事件的客户端脚本。它在页面实际刷新时起作用，但在由 UpdatePanel 的事件之一触发相同代码时根本不起作用。谷歌图表控件似乎需要window.onload。有什么解决办法吗？

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">    
<ContentTemplate >
    <asp:Timer ID="Timer1" runat="server" Enabled="False" Interval="3000" ontick="Timer1_Tick">
</asp:Timer>
    <asp:Panel ID="Panel1" runat="server" Visible="True">
        <asp:Label ID="QuestionText" runat="server" Text=""></asp:Label>
        <br />
        <asp:RadioButtonList ID="ResponseList" runat="server">
        </asp:RadioButtonList>
        <br />
        <asp:Button ID="SubmitResponse" runat="server" Text="Submit" onclick="SubmitResponse_Click" />
    </asp:Panel>
    <asp:Panel ID="Panel2" runat="server" Visible="False">
        <div>
            Thank you for taking this poll...                
        </div>
    </asp:Panel>
    <asp:Panel ID="Panel3" runat="server" Visible="False">
        <div id="chart_div">
            Google Chart showing Survey Results should appear here.
        </div>
    </asp:Panel>
</ContentTemplate> 
```

```
protected void Page_PreRender(object sender, EventArgs e)
    {
        GetPoll();
        string drawGoogleChartScript = GetDrawGoogleChartsScript();

        if (!UserHasResponded(SPContext.Current.Web.CurrentUser.Name))            
        {               
            QuestionText.Text = Poll.Question;
            ResponseList.DataSource = Poll.PossibleResponses;
            ResponseList.DataBind();
            Panel1.Visible = true;
            HiddenPollId.Value = Poll.PollId;
        }
        else if(_submitButtonClicked && !_thankYouMessageHasBeenDisplayed )
        { 
            //Return and wait for the Timer event to fire
            return;
        }
        else if(!_submitButtonClicked && _thankYouMessageHasBeenDisplayed )
        {
            //The Timer event has fired
            _thankYouMessageHasBeenDisplayed = false;
            ScriptManager.RegisterStartupScript(Page, Page.GetType(), "DrawChart1", GetDrawGoogleChartsScript(), false);
        }
        else
        {
            //The user has already taken the poll - visible on every visit after they take it.
            if (Panel1.Visible == true)
            {
                Panel1.Visible = false;
            }
            if (Panel3.Visible == false)
            {
                Panel3.Visible = true;
            }

            ScriptManager.RegisterStartupScript(Page, this.Page.GetType(), "DrawChart2", GetDrawGoogleChartsScript(), false);                               
        }
    }

protected void SubmitResponse_Click(object sender, EventArgs e)
    {
        _submitButtonClicked = true;
        using(SPSite site = new SPSite(SiteUrl))
        {
            using( SPWeb web = site.RootWeb ) 
            {
                SPList responseList = web.Lists[ResponseListName];                    
                SPListItem item = responseList.AddItem();

                item["Response"] = ResponseList.SelectedItem.Text;
                item["PollId"] = HiddenPollId.Value;
                item["UserId"] = SPContext.Current.Web.CurrentUser.Name;

                item.Update();
            }
        }

        //Hide the Question
        Panel1.Visible = false;

        //Show "Thank you for taking the poll message"
        Panel2.Visible = true;

        //Start the Timer - (countdown to swith over to the results)
        Timer1.Enabled = true;

    }       

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        _submitButtonClicked = false;
        _thankYouMessageHasBeenDisplayed = true;

        //Hide the "Thank you for taking the poll" message
        Panel2.Visible = false;

        //Show panel with the 'char_div' where the chart will be injected
        Panel3.Visible = true;

        //Stop the timer
        Timer1.Enabled = false;

    } 
```

GetDrawGoogleChartsScript() 在字符串中返回以下内容：

```
 <script type='text/javascript'>
       google.load('visualization', '1.0', {'packages':['corechart']});
       google.setOnLoadCallback(drawChart);

       function drawChart(){
         data = new google.visualization.DataTable();
         data.addColumn('string', 'Agreement');
         data.addColumn('number', 'choice');
         data.addRows([['Strongly Disagree', 3],['Disagree', 1],['Neutral', 1],['Agree', 1],['Strongly Agree', 2]])
         var options = { 'title': 'My manager has taken positive steps to increase engagement since the Q12 Survey.', 'width': 400, 'height': 300 };
         var chart = new                  google.visualization.BarChart(document.getElementById('chart_div'));
         chart.draw(data, options);
    }
</script> 
```

我正在使用 ASP.NET UpdatePanel 来呈现调查问题 + 提交按钮，然后是“感谢参与调查”消息，最后在谷歌图表中呈现调查结果。

该图表在页面刷新时有效，但我无法使用异步事件使其工作。

我发布了很多代码，但基本问题是当我们在 Timer_Tick 事件触发后重新输入 Page_PreRender 时，我们执行以下行： ScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), "DrawChart1", GetDrawGoogleChartsScript() ， 错误的）;

（这与我们在完成调查后重新加载页面时执行的代码相同。）但是什么也没有发生！脚本根本没有加载。

条形图的参数实际上是动态计算的，所以我必须使用 ScriptManager.RegisterClientScriptBlock 将其添加到页面中。

在异步事件的情况下，javascript 甚至没有进入页面源，即使我可以看到调用 ScriptManager.RegisterClientScriptBlock 的行被执行。

经过4天的努力，我对此非常“挑战”，因此您可以提供的任何帮助将*不胜*感激。

干杯，

特雷卡罗尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:24:19.273

Google 脚本不依赖于`window.onload`; 我怀疑发生了什么是这样的：

1.  定时器事件触发，脚本块被呈现给客户端
2.  客户端脚本加载 Google 可视化库，触发`drawChart`回调 --> 没有任何反应，因为`Panel3`还不可见
3.  计时器再次触发，现在`Panel3`可见。客户端脚本再次运行，但这次`google.setOnLoadCallback(drawChart)`没有触发回调，因为谷歌脚本已经加载完毕

为了纠正这个问题，我建议做一个简单的测试。检查是否已经加载了 Google API；如果不是，请`drawChart`手动调用该函数：

```
if (typeof google.visualization == 'undefined') {
    google.load('visualization', '1.0', {'packages':['corechart']});
    google.setOnLoadCallback(drawChart);
}
else {
    drawChart();
} 
```

这应该会导致图表正确呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T19:45:35.407

我认为您的问题与您在代码隐藏或客户端设置控制可见性这一事实有关。你不能同时做这两个并且让它正常工作。你知道吗？由于这种限制，我有很多头痛。

# php - 在对象上调用方法

> ID：12116354
> 
> 赞同：1
> 
> 时间：2012-08-24T20:41:32.463
> 
> 标签：php

我正在开发一个涉及制作电子邮件类的 PHP 项目。我有 Java 背景，似乎无法弄清楚在对象上调用方法的语法。

我将代码缩写：

文件 1：

```
class Emails {

protected $to;

public function Emails ($_to) {
 //constructor function. 
  $to = $_to;
}

public function getTo () {
  return $to;
} 
```

文件 2：

```
require("../phpFunctions/EmailClass.php");//include the class file
$email = new Emails("<email here>");
echo $email->getTo();//get email and return it 
```

但是，getTo() 要么什么都不返回，要么，如果我将返回值更改为 $this->$to，我会收到“空字段”错误。

请帮助我了解方法在这种情况下的工作原理（并原谅双关语......）。在 Java 中，您只需调用 email.getTo()...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:42:58.000

```
public function __construct ($_to) {
  $this->to = $_to;
}    
public function getTo () {
  return $this->to;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:45:19.833

为了复制和粘贴：

```
class Emails {

protected $to;

public function __construct($_to) {
 //constructor function. 
  $this->to = $_to;
}

public function getTo () {
  return $this->to;
}

} 
```

使用`$this`范围将获得在类定义中定义的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:45:27.723

在 PHP 中，变量不是实例范围的，除非前缀为`$this`

```
public function getTo () {
  // $to is scoped to the current function
  return $to;
}

public function getTo () {
  // Get $to scoped to the current instance.
  return $this->to;
} 
```

# mysql - mysql查询获取前200个字符

> ID：12116357
> 
> 赞同：1
> 
> 时间：2012-08-24T20:41:58.027
> 
> 标签：mysql, performance

我有一个长文本但是在显示时我只想显示 200 个字符如何仅查询 200 个字符的长文本，该文本保存在 mysql 表中作为数据类型为“TEXT”；还是我需要通过将文本切成 200 个字符并将其保存在另一列中来保存文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:48:13.110

`SELECT LEFT(column,200) FROM table`从数据库中选择结果后，您可以使用或子串化结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:48:16.617

```
SELECT SUBSTRING(colname,1,200) from table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:49:40.080

内置[`SUBSTR`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr)函数将完成此操作：

```
select substr(col, 1, 200) from table_name; 
```

# php - 将标签之间的内容传递到下一页

> ID：12116360
> 
> 赞同：-1
> 
> 时间：2012-08-24T20:42:06.123
> 
> 标签：php, variables, hyperlink

我在标签之间有内容`<a>`，我想在单击它时将其内容传递到下一页上的变量中。

```
<a class="stuff" href="process.php"> Content One </a>
<a class="stuff" href="process.php"> Content Two </a>
<a class="stuff" href="process.php"> Content Three </a> 
```

因此，如果单击中间链接，则传递给 process.php 中变量的值将是内容二。谁能帮我解决这个问题？我对php有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:45:38.880

在脚本名称后面放一个 GET 参数

```
<a class="stuff" href="process.php?content=Content%20Two"> Content Two </a> 
```

在脚本中

```
echo $_GET['content']; 
```

将变量放入脚本的其他方式。否则，您必须围绕它制作一个表格，并使用隐藏字段发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:06:28.090

另一种选择是使用 Jquery。您可以禁用单击链接的默认操作。然后，您可以使用 javascript 重定向到自动添加 GET 变量的页面。

```
$(document).ready(function() {
            $('a').click(function(event){
               event.preventDefault();
               var link = $(this).attr('href');
               var text = $(this).text();
               var url = link + '?string=' + text;
               window.location = url;
            });
         }); 
```

# r - ggplot2 热图布局

> ID：12116361
> 
> 赞同：0
> 
> 时间：2012-08-24T20:42:20.743
> 
> 标签：r, layout, ggplot2, heatmap

考虑以下热图：

```
df <- data.frame(a=rep(letters[1:10],10), b=rep(letters[1:10], each=10), c=sample(2,100, replace=TRUE))
ggplot(df, aes(a, b)) + geom_tile(aes(fill= c)) 
```

从图中可以看出，在 x 轴的段之间，有白色的垂直线将 x 轴的值分开。是否有可能添加这样的白色水平线来分隔 y 轴的段，就像在第二个图中可以看到的那样：

[http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)

此外，是否可以增加灰色背景的边距以使其与上述链接的第二个图中一样大？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:44:48.953

如果您仍在寻找答案：

在上面的评论中，`white`需要用引号引起来。

要增加灰色边框的大小，请使用`expand`inside`scale_x_...()`和`scale_y_...()`函数。“扩展”是一个双元素向量：第一个元素是乘法常数，第二个元素是加法常数。常数确保数据点绘制在离轴一定距离的地方。当两者都设置为 0 时，没有边框。

```
library(ggplot2)
df <- data.frame(a=rep(letters[1:10],10), b=rep(letters[1:10], each=10), c=sample(2,100, replace=TRUE))

ggplot(df, aes(a, b)) + geom_tile(aes(fill = c), colour = "white") +
   scale_x_discrete(expand = c(0, 1)) + scale_y_discrete(expand = c(0, 1)) 
```

![在此处输入图像描述](../Images/cc8468774380ba3667adad3b56cb2ea8.png)

# c - 每个线程每个进程的时间量

> ID：12116363
> 
> 赞同：8
> 
> 时间：2012-08-24T20:42:26.620
> 
> 标签：c, windows, linux, kernel

我有一个关于 Windows 和 linux 中进程和线程的时间量子的问题。

我知道操作系统通常会为每个线程提供固定的时间量。（我知道时间量会根据前台或后台线程而变化。也可能会根据进程的优先级而变化。）

每个进程是否有固定的时间段？例如。如果操作系统为每个进程提供 36 个时间片，并且如果一个进程有 2 个线程，那么每个线程将获得 18 个时间片。如果线程数变为 3，则每个线程将得到 12。

但是，如果每个进程的固定量不存在并且操作系统为每个线程提供固定量（不依赖于父进程。）那么我可以通过产生多个线程来使我的进程更高效。（假设我没有两个我的代码中的互斥锁/信号量。）

我有一个在两个操作系统（Windows 和 linux）上运行的应用程序。所以，我是在一般意义上问它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:54:19.783

在 linux 上，从调度的角度来看，线程和进程是等价的。因此，如果一个进程产生两个线程，每个线程应该得到 36 个量程。虽然我想听听比我可信度更高的人来确认这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:56:33.620

很有趣的问题:)

我并没有确切的细节，但是从下面的链接中你可以看到现代操作系统有一个基于估计的线程调度方法。

[http://technet.microsoft.com/en-us/magazine/2007.02.vistakernel.aspx](http://technet.microsoft.com/en-us/magazine/2007.02.vistakernel.aspx)

# c# - ASP.Net MVC3 数据分页

> ID：12116366
> 
> 赞同：-1
> 
> 时间：2012-08-24T20:42:32.643
> 
> 标签：c#, asp.net-mvc-3

我在 MVC3 控制器操作中有以下 C# 代码。

```
public ActionResult MyDocuments(int Page)
{
    int start = (Page==1?1:(Page-1)*4);
    int end = (Page==1?4:start + 4);
    // start parameter begins at 1
    Archive docs = mps.GetArchive(start, end);
    ViewBag.docs = docs;
    if (docs.Rows.Count() < 4)
    {
        ViewBag.lastPage = 1;
    }
    else
    {
        ViewBag.lastPage = 0;
    }   
    ViewBag.pagenum = Page;
    return View();
} 
```

我遇到的问题是它总是从上一页的最后一个条目开始下一页。

我在这里做错了什么？我不知道我会有多少页，我只需要检查 docs 对象中返回的数字是否小于 4，然后我设置 ViewBag.lastPage 值以禁用我的 View 和 ViewBag 中的下一个 btn .pagenum 将 View 中的 pagenum 值设置为当前页码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:46:59.487

我怀疑您的`mps.GetArchive(start, end)`方法正在返回介于两者之间的所有`start`记录`end`。通常应排除最终值。

如果您无法更改该方法的工作方式，请将其称为`mps.GetArchive(start, end - 1)`.

# database - Oracle Database 11g：oe.orders 表不存在

> ID：12116368
> 
> 赞同：0
> 
> 时间：2012-08-24T20:42:41.353
> 
> 标签：database, oracle

我尝试在 Oracle Database 11g 中创建一个简单的函数，但它给了我以下错误。似乎找不到 oe.orders 表。请你帮忙！

谢谢！

代码：

```
--Create following function as SYS
CREATE OR REPLACE FUNCTION get_bal(acc_no IN NUMBER)
  RETURN NUMBER
  IS acc_bal NUMBER(11,2);
  BEGIN
    SELECT oe.orders.order_total
    INTO acc_bal
    FROM oe.orders
    WHERE oe.orders.customer_id = acc_no;
    RETURN(acc_bal);
  END;
/

SELECT get_bal(170) AS Balance FROM dual; 
```

错误：

```
> ORA-06575: Package or function GET_BAL is in an invalid state
> 06575\. 00000 -  "Package or function %s is in an invalid state"
> *Cause:    A SQL statement references a PL/SQL function that is in an
>            invalid state. Oracle attempted to compile the function, but
>            detected errors.
> *Action:   Check the SQL statement and the PL/SQL function for syntax
>            errors or incorrectly assigned, or missing, privileges for a
>            referenced object. Error at Line: 28 Column: 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:58:43.437

首先，您不应该将任何对象创建为`SYS`. `SYS`是 Oracle 的模式——只有 Oracle 创建的对象应该放在该模式中。尽管这可能不是您的特定问题的原因，`SYS`但是当您是任何普通用户时，各种功能的行为会有所不同——这是避免使用`SYS`模式的另一个原因。

其次，表是否`oe.orders`存在？该`OE`模式是 Oracle 数据库附带的示例模式之一。它可能存在也可能不存在于任何特定数据库中。如果架构不存在，我们可以引导您完成安装。否则，问题可能是权限之一。如果您不确定该表是否存在，这会返回任何行吗？

```
SELECT owner, table_name
  FROM dba_tables
 WHERE owner = 'OE'
   AND table_name = 'ORDERS' 
```

第三，如果您想在用户拥有的过程或函数中查询用户拥有的表`A`（在这种情况下） （无论您决定使用哪个用户而不是），则必须已授予该过程的所有者对该表的访问权限直接不是通过角色。如果表存在，则很可能只能通过角色而不是直接访问来访问表。这可以防止拥有引用该表的函数。要解决此问题，您需要以身份登录并授予对表的访问权限。所以，因为，你需要`OE``B``SYS``SYS``DBA``SYS``A``SELECT``B``OE`

```
GRANT SELECT ON oe.orders TO <<user that will own the function>> 
```

# maven - 当我可以手动下载它时，为什么 Maven 找不到我的 SNAPSHOT 工件？

> ID：12116371
> 
> 赞同：1
> 
> 时间：2012-08-24T20:42:51.187
> 
> 标签：maven, nexus, maven-metadata

我有世界上最简单的 Maven/Jenkins/Nexus 设置。

Maven 每天通过 Jenkins 运行数十次，并将`SNAPSHOT`s 部署到我们的 Nexus 存储库中。

每隔一段时间，似乎没有任何原因，运行另一个需要解析`SNAPSHOT`s 的 Maven 作业都会失败。在这些罕见的情况下它失败了，Maven 告诉我它再也找不到`SNAPSHOT`它在几个小时前上传的许多情况下的 s。

如果我将 Web 浏览器指向 Maven 正在使用的存储库位置，我可以很好地找到它们。

在这些错误之前，我总是看到（就像我在成功案例中所做的那样）一堆`maven-metadata.xml`正在下载的文件。大概这些文件告诉 Maven 一些关于如何获取的信息，例如`1.009-SNAPSHOT`并将其转换为`1.009-somehugetimestamphere`.

（~~我从来没有找到这个文件的任何文档~~，而且它似乎没有将其中包含的任何文件名标记为“最新”或类似的东西。事实上，我根本看不出它有什么用处，但显然它必须是。）

（我还在调试输出中看到了各种引用`resolver-status.properties`，这似乎是另一个写入本地存储库的未记录文件，该文件跟踪与分辨率有关的内容，但我承认我不知道是什么。）

我的广泛问题是：Maven 究竟是如何*下载*、解析和检查`SNAPSHOT`s 的？假设存储库信息是有效的（毕竟，这项工作 90% 的时间都在工作，并且 10% 的时间没有任何更改而失败），Maven 对给定的存储库采取哪些步骤来找到合适的`SNAPSHOT`?

**编辑：**找到*一些*文档：[http](http://maven.apache.org/ref/3.0.4/maven-repository-metadata/repository-metadata.html) ://maven.apache.org/ref/3.0.4/maven-repository-metadata/repository-metadata.html虽然它没有解释为什么`maven-metadata.xml`我在 Nexus 2.0 中找不到任何文件安装中有`<latest/>`元素。它也没有详细说明如何使用这些文件。

我[在用户列表上的帖子得到](http://mail-archives.apache.org/mod_mbox/maven-users/201208.mbox/%3CCAHNdxu%3DnbgAjiw1_wiqdnhdeQw7O8-69ki23pZNJsCcGZTLSvg%40mail.gmail.com%3E)了回应，其中一些可能是 Nexus 问题，因为它可能会或可能不会正确生成这些`maven-metadata.xml`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:18:40.013

前几天我遇到了一个非常类似的问题，Nexus 服务器代理另一个存储库。就我而言，更改 Nexus 中的过期设置解决了这个问题。我将“Artifact Max Age”和“Metadata Max Age”从 1 天减少到 1 分钟。

# c++-amp - 测量 C++ AMP 性能时的奇怪结果

> ID：12116375
> 
> 赞同：1
> 
> 时间：2012-08-24T20:43:21.807
> 
> 标签：c++-amp

我用[这个计时器](http://blogs.msdn.com/b/nativeconcurrency/archive/2011/12/28/high-resolution-timer-for-c.aspx)包装了一个 C++ AMP 调用，代码如下所示。不幸的是，根据计时器，我的 C++ AMP 调用大约需要 2 秒 - 比实际情况要多得多。有人可以帮我找出问题所在吗？

```
double sum = 0.0;
for (int t = 0; t < 20; ++t)
{
  Timer gpuTimer;
  gpuTimer.Start();
  auto gh = gpu_histogram(target, size);
  gpuTimer.Stop();
  sum += gpuTimer.Elapsed();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:07:40.270

事实证明这是一个简单的误解——我假设它`Timer`以秒为单位测量时间，而它实际上使用的是毫秒。:) 数据现在有意义了……C++ AMP 很棒！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:11:48.237

抱歉，您没有共享足够的代码。我不知道 gpu_histogram 做了什么，或者您是否正在使用[测量 C++ AMP 计算性能的](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/07/26/performance-guidance-for-c-amp.aspx)最佳实践，或者您是否正在调整执行计算的 20 次迭代的总和结果等。尝试发布完整的重现预期结果和实际结果 - 顺便说一句，团队在[我们的 msdn 论坛](http://social.msdn.microsoft.com/Forums/en-US/parallelcppnative/threads)中监控问题。

# regex - 是什么导致我的重定向循环？

> ID：12116380
> 
> 赞同：1
> 
> 时间：2012-08-24T20:43:42.257
> 
> 标签：regex, apache, .htaccess

我正在使用 mod_rewrite 为我正在开发的网站创建更漂亮的 URL。但是，我的 css 和 js 文件夹会导致重定向循环。

这是我的 .htaccess 中的内容

```
AddDefaultCharset On
AddDefaultCharset UTF-8
AddCharset UTF-8 .tpl
AddCharset UTF-8 .js
AddCharset UTF-8 .css
AddCharset UTF-8 .php

RewriteEngine On
RewriteBase /guildtree/
RewriteRule ^([a-zA-Z0-9_'-]+)/(.*)$        characters.php?realm=$1&name=$2     [NC] 
```

我的 CSS 被重定向到

```
http://localhost/guildtree/css/error 
```

我的 JS 被重定向到

```
http://localhost/guildtree/js/error 
```

我的图像也都坏了，即使它们的路径是正确的。直接访问图像也会导致重定向循环。

```
http://localhost/guildtree/images/roster/error 
```

是否有任何突出的原因导致此循环？谢谢。

更新：

CSS 和图像的问题已得到解决。JS仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:54:26.503

这不是重定向循环，您的图像可能被 characters.php 路由捕获。在您的规则中添加一些排除项：

```
RewriteBase /guildtree/

RewriteCond %{REQUEST_URI} !\.(css|js|png|jpe?g|gif)$ [NC]
RewriteRule ^([a-zA-Z0-9_'-]+)/(.*)$        characters.php?realm=$1&name=$2     [NC] 
```

此外，您可能有相对/绝对路径问题。如果您的链接是相对的，它们将被新路径更改，您需要添加：

```
<base href="/guildtree/"> 
```

或者所有相对链接的基本路径应该是什么。

# java - 在这种情况下，部分模拟有什么问题？

> ID：12116381
> 
> 赞同：2
> 
> 时间：2012-08-24T20:43:44.120
> 
> 标签：java, unit-testing, mocking, mockito, partial-mocks

假设我有两种方法，其中一种基本上是另一种方法的包装器，只需要一点额外的处理：

```
public class ItemRepositoryImpl implements ItemRepository {

    ...

    @Override
    public void delete(UUID itemID) {

        Item item = findOne(itemID);
        delete(item);
    }

    @Override
    public void delete(Item item) {

        // Do a bunch of stuff that needs a lot of tests run on it, like
        //    deleting from multiple data sources etc
        ...
    }
} 
```

为部分模拟 ItemRepositoryImpl 的 delete(UUID) 方法编写单元测试并检查 delete(UUID) 最终调用 delete(Item) 有什么问题？如果我这样做了，我就不必为每个删除方法编写一堆重复的测试了！

在 Mockito 中，我可以用这样的间谍实现这样的测试：

```
ItemRepository spyRepo = spy(repository);       // Create the spy
when(spyRepo.findOne(itemID)).thenReturn(item); // Stub the findOne method
doNothing().when(spyRepo).delete(item);         // Stub the delete(Item) method
spyRepo.delete(itemID);                         // Call the method under test

// Verify that the delete(Item) method was called
verify(spyRepo).delete(item); 
```

然而，Mockito 文档强烈反对使用这种类型的部分模拟，基本上声明它应该只用于临时遗留代码和第 3 方 API。有什么更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:18:04.910

如果您正在进行纯单元测试并且您的测试单元是一种方法，那么我会说您在这里嘲笑的内容没有任何问题。有些人会争辩说，单元测试应该采用更黑盒的方法，并且通过模拟方法调用，您的测试对被测方法的实现了解太多。

如果您的被测单元是一个类而不是一个方法，那么您可以简单地模拟对其他类的调用。

关于单元测试总是有争论。这是一篇与您的问题非常相关的有趣文章：[http ://martinfowler.com/articles/mocksArentStubs.html](http://martinfowler.com/articles/mocksArentStubs.html)

# php - 匹配mongodb php的元素

> ID：12116385
> 
> 赞同：1
> 
> 时间：2012-08-24T20:43:50.807
> 
> 标签：php, mongodb

我的问题是如何将来自 mongodb 的以下 js 代码转换为 php：

> t.find( { group:3, 'xa':2 }, { 'x.$':1 } ).toArray()[0].x.length, "单个对象匹配（数组长度匹配）" );

您可以在以下位置找到整个 js 代码：

> [https://github.com/mongodb/mongo/blob/83ec59844bdd629b2b32a9791a4e7a0e93516c02/jstests/elemMatchProjection.js](https://github.com/mongodb/mongo/blob/83ec59844bdd629b2b32a9791a4e7a0e93516c02/jstests/elemMatchProjection.js)

基本上我关心的是如何翻译成 php toArray()[0].x.length ？我知道 php 有计数，但我不在乎。我还有其他高级查询，所有这些都归结为这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:10:49.370

的字面翻译`toArray()[0].x.length`是：

```
$cursor = $collection->find(['group' => 3, 'x.a' => 2], ['x.$' => 1]);
$documents = iterator_to_array($cursor, false);
count($documents[0]['x']); 
```

[或者，在上面的示例中使用MongoCollection::findOne()](http://php.net/manual/en/mongocollection.findone.php)会更容易，因为我们只处理第一个结果而忽略任何其他结果。重写：

```
$document = $collection->findOne(['group' => 3, 'x.a' => 2], ['x.$' => 1]);
count($document['x']); 
```

我没有遵循您所说的“我知道 php 有计数但我不在乎”的意思。除非您指的是[MongoCollection::count()](http://php.net/manual/en/mongocollection.count.php)，否则基本[count()](http://php.net/manual/en/function.count.php)是计算返回文档中数组长度所必需的。

# iphone - 如果我想为我的 iOS 应用启用“个人资料”功能，我应该研究什么？

> ID：12116387
> 
> 赞同：0
> 
> 时间：2012-08-24T20:44:06.823
> 
> 标签：iphone, ios, ipad

我刚刚完成了我的 iPhone 编程课程并创建了我的第一个应用程序。我的应用程序有一个功能，可以从麦克风进行多次录音（到文档目录）并显示一个标题（用户也可以输入该标题​​。）

作为我的应用程序的下一步，我希望能够允许用户获取这些保存的录音和标题，并能够与拥有我的应用程序的其他用户共享它们以及导入其他用户的录音。我想在我的应用程序中这样做。

我的问题是，为了做这样的事情，我应该阅读哪些框架或主题？这个想法是让用户可以交易和分享我所说的“个人资料”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:28:41.400

如果您想彼此分享内容，与 Facebook 集成可能是最简单的方法。它提供了一种快速创建用户和选择要将文件发送给的人的方法。Facebook API 允许您提取您的个人资料图片和您的朋友列表，这可以满足您的两种需求。尽管您的这个项目听起来也需要一些后端工作。因为它只是一个小项目，你可能想快速完成它，我强烈推荐 Parse。我们将它们用于我们的创业公司，它们提供的服务非常出色且超级简单。并且它完全免费，直到相当稳定的使用水平。

简而言之，以下是我的建议： 查看 Facebook API 的用户功能（图片、姓名等）。查看 Parse 的后端。并查看用于实现发送的推送通知（不是框架）。您可以让他们在收到推送时查询结果。

# html - 左边的盒子被向下推

> ID：12116388
> 
> 赞同：1
> 
> 时间：2012-08-24T20:44:10.243
> 
> 标签：html, css, positioning

我试图将两个`<div>`s 彼此定位，但似乎当我`<div>`在左侧输入文本时，它被推下。这几乎就像它上面有一个元素，但那里没有对象，而它应该与它内联的对象留在正确的位置。

HTML 代码：

```
<div id="header_div">

 <div id="header_div_left">Home</div>

 <div id="header_div_right"></div>

</div> 
```

CSS 代码：

```
#header_div {
    width: 980px;
    height: 125px;
    padding: 10px;
    border-bottom-left-radius: 20px;
    border-bottom-right-radius: 20px;
    border: 2px solid #A5A5A5;
    background-color: #191919;
    margin-left: auto;
    margin-right: auto;
    border-top: 4px solid #E00000;
}

#header_div_left {
    display: inline-block;
    width: 290px;
    height: 120px;
    margin-right: 5px;
    line-height: 120px;
    text-align: center;
    border: 2px solid #A5A5A5;
    background-color: #191919;
    border-bottom-left-radius: 10px;
}

#header_div_right {
    display: inline-block;
    width: 655px;
    height: 120px;
    margin-left: 5px;
    border: 2px solid #A5A5A5;
    background-color: #191919;
    border-bottom-right-radius: 10px;
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:49:57.670

添加`vertical-align:top`到内部 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/Wmb4G/)**

由于您将内部 div 设置为具有内联块显示，因此您希望将它们对齐到其父 div 的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:47:11.867

添加到每个 div css

```
position:relative;
float:left; 
```

[http://jsfiddle.net/MkEWp/](http://jsfiddle.net/MkEWp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:47:21.393

添加`float:left`到左侧的 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T20:50:57.757

将文本放入它们中（即使它只是 a `&nbsp;`）并将它们设置`line-height`为相同。

[http://jsfiddle.net/9wCnu/1/](http://jsfiddle.net/9wCnu/1/)

# asp.net - UnobtrusiveValidationMode 设置为 WebForms 强制回发？

> ID：12116389
> 
> 赞同：6
> 
> 时间：2012-08-24T20:44:21.540
> 
> 标签：asp.net, .net-4.5, unobtrusive-validation

我正在使用 WebForms Web 应用程序（不是 MVC）。

当我将此 appSetting 设置为“WebForms”时，是否有任何理由强制回发以进行验证，而不是在客户端捕获缺少的必填字段？

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" /> 
```

验证工作正常。Page.IsValid 捕捉到它不是有效的表单提交，并且RequiredFieldValidators 在回发后很好地触发了，但除非我将设置更改为“无”，否则它不会在客户端捕捉到它。

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> 
```

# python - Python 代码调用创建 OS 线程的 C 库，最终调用 Python 回调

> ID：12116390
> 
> 赞同：6
> 
> 时间：2012-08-24T20:44:26.650
> 
> 标签：python, c, callback, pthreads

如果当操作系统调度另一个调用 Python 回调的线程时，唯一的 Python 解释器正在执行字节码 - 会发生什么？我担心这个设计的可靠性是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T00:39:10.267

在一般情况下，C 库需要`PyEval_InitThreads()`在生成任何调用 python 回调的线程之前调用以获得 GIL。并且回调需要被包围`PyGILState_Ensure()`并`PyGILState_Release()`确保安全执行。

但是，如果 C 库在例如 python C 扩展的上下文中运行，那么在一些简单的情况下完全可以安全地省略 GIL 操作。

想想这个调用顺序：1）python 代码调用 C 函数`foo()`，2）`foo()`产生*一个且只有一个*线程运行另一个 C 函数`bar()`，它回调 python 代码，3）总是在返回之前`foo()`加入或取消运行的线程。`bar()`

在这种情况下，省略 GIL 操作是安全的。因为在其生命周期内`foo()` *拥有*GIL（即从调用它的python代码中隐式借用），并且在其生命周期内python回调的执行`foo()`是序列化的（即只有一个回调线程且python代码不合并`threading`）。

# jquery-ui - 如何将 jquery ui-dialog 带出它的父 iframe

> ID：12116396
> 
> 赞同：3
> 
> 时间：2012-08-24T20:44:45.227
> 
> 标签：jquery-ui, jquery-ui-dialog

我在 100px X 100px 大小的 iframe 中有一个 jquery 对话框。该对话框实际上比它的父 iframe 大。我需要将对话框从其父级中取出并将其显示在顶部窗口的中心。

**jQuery版本：**

jquery-1.8.0.min.js, jquery-ui-1.8.23.custom.min.js

我在stackoverflow和其他博客中搜索。我得到的唯一最接近的答案来自以下内容。但这也行不通。

[如何使用 jquery-ui 在另一个框架中弹出对话框](https://stackoverflow.com/questions/5967904/how-to-popup-a-dialog-in-another-frame-using-jquery-ui)

iframe 内容和顶部窗口内容都来自同一个域。但我不想在 iframe 之外添加自定义代码，因为我想将它用作通用组件。

有什么解决办法吗？

# jquery - Jquery Isotope：如何填补空白？

> ID：12116398
> 
> 赞同：11
> 
> 时间：2012-08-24T20:45:07.217
> 
> 标签：jquery, jquery-isotope

我已经尝试了基本上每一个提示/提示/建议来实现这一点，但是，在使用同位素时，我仍然得到了这些空的丑陋空间。

这是一个[演示，显示了](http://jsfiddle.net/adamedoe/NMj9u/)我遇到的问题。

你看到这些空白了吗？是否有任何 jquery 代码可以让底部项目在有任何时候填补这个空白？

如果我们对所有项目使用单一宽度，则根本不会出现问题。当为每个项目使用不同的宽度时，它开始出现。同位素没有足够的智能来寻找空白并在有任何合适尺寸的物品可用时填充它们。

有什么帮助吗？我真的被困住了！

可能有助于解决此问题的补充问题：

有没有强制元素浮动的 jQuery 插件？我相信它可以迫使合适的物品填补空白！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-24T23:00:36.500

根据最新的编辑，现在有一个[用于 isotope 的包装布局模式](https://github.com/metafizzy/isotope-packery)。原始答案和后来的补充仍然在下面。

* * *

其他人也要求此功能：

*   [https://github.com/desandro/masonry/issues/141](https://github.com/desandro/masonry/issues/141)
*   [https://github.com/desandro/isotope/issues/125](https://github.com/desandro/isotope/issues/125)
*   [https://github.com/desandro/isotope/issues/197](https://github.com/desandro/isotope/issues/197)
*   [https://github.com/desandro/isotope/issues/198](https://github.com/desandro/isotope/issues/198)
*   [https://github.com/desandro/isotope/issues/219](https://github.com/desandro/isotope/issues/219)
*   [https://github.com/desandro/vanilla-masonry/issues/6](https://github.com/desandro/vanilla-masonry/issues/6)
*   [如何使用同位素与砌体布局避免间隙](https://stackoverflow.com/questions/10738542/how-to-avoid-gaps-using-isotope-with-masonry-layout)

简而言之，目前的答案似乎是，如果你想完全避免差距，你应该：

1.  选择固定宽度
2.  仔细排列元素的大小，以便在您选择的宽度上没有间隙。

当然，如果您的项目在大小和位置上不是静态的，或者如果您无法设置宽度，我无法想象这样会很好用。

如果手动排列元素以填充固定宽度容器的间隙对您不起作用，我建议在第一个链接上加上 +1。

* * *

E (4.22.2013)：我注意到最近的一些活动，所以快速更新。这都可以在砌体问题 #141 中找到，第一个链接：

[PerfectMasonry](https://github.com/zonear/isotope-perfectmasonry)是 Isotope 的布局扩展。它通过提供“完美砌体”布局模式和提供无间隙布局的选项来填补空白。

[Nested](http://suprb.com/apps/nested/)是用于无间隙布局的替代库。

[Packery](http://packery.metafizzy.co/)是 Isotope 的创建者的一个库，它支持无间隙布局等。

我个人还没有使用过这些（还）。

最后，在[关于 Packery 发布的博客文章中](http://metafizzy.co/blog/packery-released/)，DeSandro 表示“最终，我想将 Packery 中开发的这个和其他解决方案移植到 Masonry 和 Isotope。”

我不会指望这种情况会很快发生。截至本次编辑，Packery 仅发布了 7 天。

E2 (6.13.2014):

DeSandro 发布了[同位素的包装布局模式](https://github.com/metafizzy/isotope-packery)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:41:15.833

我试图解释为什么这是[在这个重复的线程](https://stackoverflow.com/a/12116760/963514)中，其中还包括一个可以玩的小提琴。不一定是固定宽度，如果你有很多像原始演示中的小物品，贴合的可能性很高，但不能保证。您可以使用替代插件，例如 jQuery Tiles 或尝试调整 Wookmarks。

在您的案例中实施并非易事，查看[所涉及的内容](http://en.wikipedia.org/wiki/Bin_packing_problem)并搜索与之相关的一些图像，您将看到所涉及的复杂性。

# nsis - GetDriveType 总是返回 1 nsis

> ID：12116408
> 
> 赞同：0
> 
> 时间：2012-08-24T20:45:42.363
> 
> 标签：nsis

嗨，我正在尝试使用以下脚本在计算机上查找 DVD 驱动器。GetDriveType 总是返回 1，即使我手动传递驱动器号它仍然返回 1，有谁能告诉我为什么会这样，我对 nsis 脚本完全陌生

```
System::Call 'kernel32::GetLogicalDrives()i.r0'
StrCpy $1 $windir 3 ; Fallback if things go wrong
StrCpy $2 0
StrCpy $4 65 ; 'A'
loop:
    IntOp $3 $0 & 1
    ${If} $3 <> 0
        IntFmt $3 "%c:\" $4
        MessageBox MB_OK "Drive : $3"
        System::Call 'kernel32::GetDriveType(t,.r3)i.r5'
        MessageBox MB_OK "Value of 5555555: $5"
        StrCmp $5 5 0 NoDrive
            MessageBox MB_OK "Found drive $3"
            StrCpy $1 $3
        Nodrive:
            ;do nothing
    ${EndIf}
    IntOp $4 $4 + 1
    IntOp $0 $0 >> 1
StrCmp $0 0 "" loop
System::Call 'kernel32::GetDriveType(t,"D:\")i.r5'
StrCmp $5 5 0 NoDr
    MessageBox MB_OK "Found D as $D"
NoDr: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:18:35.653

正确的语法是`System::Call 'kernel32::GetDriveType(tr#)i.r#'`（逗号是参数分隔符，`.`表示没有输入，在这种情况下您有输入）：

```
!include LogicLib.nsh
System::Call 'kernel32::GetLogicalDrives()i.r0'
StrCpy $2 0
StrCpy $4 65 ; 'A'
loop:
    IntOp $3 $0 & 1
    ${If} $3 <> 0
        IntFmt $3 "%c:\" $4
        System::Call 'kernel32::GetDriveType(tr3)i.r5'
        DetailPrint "$3=$5"
    ${EndIf}
    IntOp $4 $4 + 1
    IntOp $0 $0 >> 1
StrCmp $0 0 "" loop 
```

# facebook - 如何向我的 Facebook 测试用户发送示例电子邮件？

> ID：12116412
> 
> 赞同：6
> 
> 时间：2012-08-24T20:46:15.143
> 
> 标签：facebook, facebook-graph-api

Facebook 上的测试用户有一个默认的@tfbnw.net 电子邮件地址作为主要电子邮件地址，此外还有一个路由到他们的 Facebook 消息收件箱的@facebook.com 地址。

我尝试将@facebook.com 地址设置为主要地址，因为我希望快速检查他们 Facebook 消息收件箱中发送的示例电子邮件。但是，我不允许这样做[我想这是有道理的，因为主电子邮件 ID 应该是非 FB 的]。

为每个测试用户创建一个新的电子邮件帐户很累[不能重复使用相同的电子邮件地址，因为 Facebook 抱怨它已经被用于一个帐户]

所以我有两个问题：

1.  在哪里可以访问发送到@tfbnw.net 地址的电子邮件？
2.  我应该如何为我的测试用户设置不同的主电子邮件帐户？[我知道我可以设置不同的 GMail 帐户并将它们转发给我自己的帐户，但这似乎需要做很多工作。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T07:40:25.827

我终于求助于使用 Mailcatcher。这确保了我的应用程序中没有任何特殊逻辑可供测试用户使用，并且允许我立即测试电子邮件在 html/文本格式下的外观。

[http://mailcatcher.me/](http://mailcatcher.me/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:50:19.847

为什么您需要测试用户在 Facebook 方面拥有可访问的电子邮件地址？

如果您想测试电子邮件在发送时的外观，您可以在您控制的域中发送任意电子邮件地址，或者如果您的域支持这样的通配符地址，则将测试用户的电子邮件地址更改为 @yourdomain.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:46:34.813

如果我作为我的一个应用程序的测试用户登录，他们个人资料的“信息”部分显示`100003…2173648@facebook.com`为他们的联系电子邮件 - 所以基本`userid@facebook.com`地址（用户 ID，因为他们没有设置用户名）。

当我向该地址写一封电子邮件时，随即会在我使用此测试帐户“登录”的浏览器窗口中显示一条新消息通知。

# c++ - 如何使用样式表为 Qt Widget 而不是其子级设置样式？

> ID：12116413
> 
> 赞同：13
> 
> 时间：2012-08-24T20:46:15.887
> 
> 标签：c++, qt, widget

我有一个：

```
class Box : public QWidget 
```

它有

```
this->setLayout(new QGridLayout(this)); 
```

我试着做：

```
this->setStyleSheet( "border-radius: 5px; "
                     "border: 1px solid black;"
                     "border: 2px groove gray;"
                     "background-color:blue;");

this->setStyleSheet( "QGridLayout{"
                         "background-color:blue;"
                         "border-radius: 5px; "
                         "border: 1px solid black;"
                         "border: 2px groove gray;"
                     "}"
                   );

this->setObjectName(QString("Box"));
this->setStyleSheet( "QWidget#Box {"
                         "background-color:blue;"
                         "border-radius: 5px; "
                         "border: 1px solid black;"
                         "border: 2px groove gray;"
                     "}"
                   ); 
```

但第一个只影响添加的项目，其他两个什么都不做。我希望盒子本身有圆角和边框（如何在行之间做线条的奖励）。

如何让样式表影响 Box 小部件，而不是其子小部件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T22:33:01.577

更准确地说，我可以使用：

```
QWidget#idName {
    border: 1px solid grey;
} 
```

或者

```
Box {
    border: 1px solid grey;
} 
```

在我看来，后者更容易，因为它不需要使用 id 名称。

为什么这些不起作用的主要问题是因为这被认为是自定义小部件，因此需要自定义绘制事件：

```
 void Box::paintEvent(QPaintEvent *) {
     QStyleOption opt;
     opt.init(this);
     QPainter p(this);
     style()->drawPrimitive(QStyle::PE_Widget, &opt, &p, this);
 } 
```

这取自：[Qt Stylesheet for custom widget](https://stackoverflow.com/questions/7276330/qt-stylesheet-for-custom-widget)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T20:48:33.107

您需要识别对象类和实例，就像在常规 CSS 中一样。

```
QWidget#BoxName
{
    border-radius: 5px;
    border: 1px solid black;
    border: 2px groove gray;
} 
```

这与此处的答案相同：[Get variable name of Qt Widget (for use in Stylesheet)?](https://stackoverflow.com/questions/8983345/get-variable-name-of-qt-widget-for-use-in-stylesheet)

```
box->setStyleSheet(QString::fromUtf8("QWidget#box\n"
"{\n"
"    border-radius: 5px;\n"
"    border: 1px solid black;\n"
"    border: 2px groove gray;\n"
"}\n"
"")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-14T03:23:38.327

您可以编写自定义`setStylesheet`函数，默认将对象地址设为对象名称。例如在 python 中：

```
from PySide2 import QtWidgets

class MyWidget(QtWidgets.QFrame):
    def setStylesheetOnlySelf(self, stylesheet: str) -> None:
        objectName = self.objectName() if self.objectName() != "" else str(id(self))
        self.setObjectName(objectName)
        self.setStyleSheet("#%s {%s}" % (objectName, stylesheet))

app = QtWidgets.QApplication()

widget = MyWidget()
widget.setStylesheetOnlySelf("background: white")
widget.show()
app.exec_() 
```

# c# - 生产者/消费者 - 级联方法？

> ID：12116414
> 
> 赞同：1
> 
> 时间：2012-08-24T20:46:21.953
> 
> 标签：c#, winforms, .net-4.0, task-parallel-library, producer-consumer

我目前正在使用 .net 4.0 和 winforms 构建一个与服务器相关的小型应用程序。我想利用任务并行库的优势，但我对这里的最佳或“正确”实现有点动摇。

目的：

1.  使用正则表达式模式从网络路径使用文件（每 15 分钟使用一次。）
2.  读取文件（csv 样式）
3.  重写文件以跳过某些列
4.  通过批量插入或更新将文件数据传输到 sql server

我正在考虑一种级联方法，如下所示：

ProducerConsumerTask1（从网络路径获取文件/使文件可读取）
ProducerConsumerTask2（从Task1读取文件/从Task1重写文件）
ProducerConsumerTask3（获取重写文件/将文件从Task2传输到DB）

还有一点代码：

```
private static BlockingCollection<ManagedFile> searchQueue = new BlockingCollection<ManagedFile>(limit);
private const int limit = 100;

public void StartFileTask()
{
    Task[] producers = new Task[1];
    producers[0] = Task.Factory.StartNew(() => ProduceFileSearchTask());

    Task.Factory.StartNew(() => ConsumeFileSearchTask());
}

public static void ProduceFileSearchTask()
{
    var pattern = new Regex(Properties.Settings.Default.DefaultRegexPattern);
    string path = Properties.Settings.Default.DefaultImportPath;

    IEnumerable<FileInfo> files = new DirectoryInfo(path)
                                        .EnumerateFiles("*.*", SearchOption.AllDirectories)
                                        .Where(x => pattern.IsMatch(x.Name));

    for (int i = 0; i < files.ToList().Count(); i++)
    {
        ManagedFile _managedFile = new ManagedFile();
        _managedFile.Id = Guid.NewGuid();
        _managedFile.ManagedFileName = files.ElementAt(i).FullName;
        _managedFile.ManagedFileAddedOn = DateTime.Now;

        if (!searchQueue.IsAddingCompleted)
            searchQueue.Add(_managedFile);

        Thread.SpinWait(100000); 
    }           
}

public static void ConsumeFileSearchTask()
{
    foreach (var item in searchQueue.GetConsumingEnumerable())
    {
        // use ProducerTask for Reading the Files here
    }
} 
```

如果有人分享他对这个想法的想法，那就太好了。这是一个很好的处理方式吗？在这种情况下有什么更好的办法？这种情况下的另一个主题：ui自动化/报告/状态更新到ui怎么样？如何才能做到这一点？活动/代表，嗯？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T15:21:07.283

添加我的评论作为答案:)

这看起来像是使用 Tasks.Dataflow 的完美场景。看看这个，它可能对你有很大帮助：[Tasks.DataFlow 白皮书](http://microsoft.com/en-us/download/details.aspx?id=14782)

另一种建议的方法：一个任务读取新文件并将其中一些文件放入 BlockingCollection（又名生产者-消费者）。消费者任务维护并发任务列表并从集合中读取以安排新任务。通过调整消费者任务以及它可以同时跟踪多少个文件，您可以检查您的性能。一旦消费者收到某个任务完成的通知，再次从生产者那里读取并安排另一个任务。它们将独立并行。

另一个要查看的框架是 Reactive Extensions 并将您的源转换为可观察的文件集合并在其中应用节流。

# javascript - 三层嵌套引号的问题

> ID：12116415
> 
> 赞同：0
> 
> 时间：2012-08-24T20:46:22.297
> 
> 标签：javascript, ruby-on-rails, escaping, quotes

这是我的情况。我在页面上有一个带有 javascript 函数的 rails 视图。在该函数内部，我使用了一个 erb 片段，它需要向该函数输出一个字符串。我在 erb 中使用的变量包含一个 html 字符串。该 html 字符串内部包含用于各种元素属性的字符串。最后，由于 css 的原因，元素属性的一些字符串也有字符串。

这就是我的 javascript 函数的样子：

```
tinyMCE.activeEditor.setContent('<%= @template.html_safe %>'); 
```

这是 erb 渲染后的样子：

```
tinyMCE.activeEditor.setContent('<table border="0" class="mceItemTable" width="440" style="height: 309px; "><tbody><tr><td style="text-align: center; background-color: #ff0000;" data-mce-style="text-align: center; background-color: #ff0000;"><span style="font-size: xx-large; font-family: 'arial black', 'avant garde'; color: rgb(255, 255, 0); ">THIS</span></td><td style="background-color: rgb(154, 205, 50); text-align: center; "><span style="font-size: xx-large; font-family: 'arial black', 'avant garde'; color: rgb(30, 144, 255); ">IS</span></td></tr><tr><td style="background-color: rgb(30, 144, 255); text-align: center; "><span style="font-size: xx-large; font-family: 'arial black', 'avant garde'; color: rgb(154, 205, 50); ">A</span></td><td style="background-color: rgb(255, 255, 0); text-align: center; "><span style="font-size: xx-large; font-family: 'arial black', 'avant garde'; color: rgb(255, 0, 0); ">TEST</span></td></tr></tbody></table><p><br data-mce-bogus="1"></p>'); 
```

在出现这样的情况之前，这不会导致任何问题：

```
tinyMCE.activeEditor.setContent('<span style="font-family: 'arial black', 'avant garde'; color: rgb(255, 0, 0); ">TEST</span>'); 
```

我需要转义最内部的引号，这样它们就不会与外部引号冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:58:36.567

有一个帮手：

```
tinyMCE.activeEditor.setContent('<%= escape_javascript @template %>') 
```

它也被别名为`j`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:54:46.387

我只是想到了一个看起来很有效的非常简单的解决方案。我只是将 ' 的出现替换为`&quot;`

```
tinyMCE.activeEditor.setContent('<%= @template.gsub(/'/, "&quot;").html_safe %>'); 
```

# .net - 来自 Jenkins 的独立声纳亚军缺少 mvn.bat 和 pom.xml

> ID：12116419
> 
> 赞同：1
> 
> 时间：2012-08-24T20:46:46.400
> 
> 标签：.net, maven, sonarqube

我已将 Sonar 配置为在我为 C# 项目构建的 Jenkins 结束时运行。日志显示 Sonar 完成了整个分析，但构建在某种清理步骤上失败了。它还在寻找不存在的 pom.xml。知道为什么 mvn.bat 试图在 Sonar 的独立版本中运行以及如何关闭它/让它成功运行吗？非常感谢。

```
16:02:28.256 INFO  .b.p.UpdateStatusJob - ANALYSIS SUCCESSFUL, you can browse http://sonarserver:9000
16:02:28.256 INFO  b.p.PostJobsExecutor - Executing post-job class org.sonar.plugins.core.batch.IndexProjectPostJob
16:02:28.288 INFO  b.p.PostJobsExecutor - Executing post-job class org.sonar.plugins.dbcleaner.ProjectPurgePostJob
16:02:28.303 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per day between 2012-07-27 and 2012-08-23
16:02:28.303 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per week between 2011-08-26 and 2012-07-27
16:02:28.303 INFO  .p.d.p.KeepOneFilter - -> Keep one snapshot per month between 2007-08-31 and 2011-08-26
16:02:28.303 INFO  .d.p.DeleteAllFilter - -> Delete data prior to: 2007-08-31
16:02:28.303 INFO  o.s.c.purge.PurgeDao - -> Clean MyProject:MyProjectDevelopment [id=1]
16:02:28.319 INFO  o.s.c.purge.PurgeDao - <- Clean snapshot 3727
16:02:29.647 INFO  o.s.c.purge.PurgeDao - -> Clean MyProject.Library [id=2]
16:02:29.663 INFO  o.s.c.purge.PurgeDao - -> Clean MyProject.Web [id=3]
16:02:29.663 INFO  o.s.c.purge.PurgeDao - -> Clean MyProjectOmnitureDownloader [id=4]
Total time: 1:04.065s
Final Memory: 4M/26M
[workspace] $ mvn.bat -f "H:\jobs\MyProject\workspace\pom.xml" -e -B sonar:sonar -Dsonar.jdbc.driver=com.mysql.jdbc.Driver "-Dsonar.jdbc.url=jdbc:mysql://sonarserver:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true" ******** ******** -Dsonar.host.url=http://sonarserver:9000 -Dsonar.language=cs
The system cannot find the file specified
FATAL: command execution failed
java.io.IOException: Cannot run program "mvn.bat" (in directory "H:\jobs\MyProject\workspace"): CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:709)
    at hudson.Launcher$ProcStarter.start(Launcher.java:338)
    at hudson.Launcher$ProcStarter.join(Launcher.java:345)
    at hudson.tasks.Maven.perform(Maven.java:263)
    at hudson.plugins.sonar.utils.SonarMaven.executeMaven(SonarMaven.java:138)
    at hudson.plugins.sonar.SonarPublisher.executeSonar(SonarPublisher.java:300)
    at hudson.plugins.sonar.SonarPublisher.perform(SonarPublisher.java:261)
    at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:36)
    at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:710)
    at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:685)
    at hudson.model.Build$RunnerImpl.post2(Build.java:162)
    at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:632)
    at hudson.model.Run.run(Run.java:1463)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:239)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 19 more
Sonar analysis completed: FAILURE
Build step 'Sonar' changed build result to FAILURE
Build step 'Sonar' marked build as failure
Sending e-mails to: me@myproject.com
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:21:31.390

您是否安装了 Sonar Jenkins 插件并[在您的构建中启用它](http://docs.codehaus.org/display/SONAR/Activate+Sonar+on+Jenkins+job)？

Jenkins 插件使用 Maven 启动声纳分析。它在您的工作结束时运行，因此可能看起来像一个清理步骤。

# objective-c - 计算器应用程序 - 奇怪的错误：尝试更新显示时“无法识别的选择器发送到实例”

> ID：12116421
> 
> 赞同：0
> 
> 时间：2012-08-24T20:47:09.273
> 
> 标签：objective-c, xcode

我对 Objective-C 比较陌生，所以我对我正在编码的所有内容都不是 100%。但是，我正在处理发生的错误，并且我遇到了一个运行时错误，我不确定如何修复。该错误声称“未识别的选择器 [已] 发送到实例。”

```
- (IBAction) equalsPressed{
    self.userIsInTheMiddleOfTypingANumber = NO;
    if (self.brain.operationIsPicked) {
       [self.brain pushOperand: [self.display.text doubleValue]]; 
       double result = [self.brain performOperation: self.brain.operation];
       // The line below this 
       self.display.text = [NSString stringWithFormat: @"%g", result];
    }
} 
```

我正在使用斯坦福教授教授的计算器应用程序，他的课程发布在 iTunes U 中。但是，我对其进行了编辑，使其不包含 enterPressed 命令，而是使用了经过更改且对用户更友好的“equalsPressed”。equalsPressed 完成后（意思是当我单击计算器上的等号时），显示错误。可能有人知道是什么导致了这个问题吗？我已经发现其他人的错误与这个非常相似，但发生在稍微不同的地方。以下是可以帮助阐明问题的其他代码片段。

```
#import "CalculatorBrain.h"

@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain

@synthesize operandStack = _operandStack;
@synthesize operandStackIsEmpty = _operandStackIsEmpty;
@synthesize operationIsPicked = _operationIsPicked;
@synthesize operation = _operation;

- (NSMutableArray *) operandStack {
    if (!_operandStack) {
        _operandStack =[[NSMutableArray alloc] init];
        _operandStackIsEmpty = YES;
        _operationIsPicked = NO;
    }
    return _operandStack;
}

- (void) resetStack {
    [self.operandStack removeAllObjects];
    self.operandStackIsEmpty = YES;
    self.operationIsPicked = NO;
}

- (void) pushOperand : (double) operand{
    [self.operandStack addObject: [NSNumber numberWithDouble:operand]];
    self.operandStackIsEmpty = NO;
}

- (double) popOperand {
    NSNumber *num = [self.operandStack lastObject];
    if (num) {[self.operandStack removeLastObject];}
    return [num doubleValue];
}

- (double) performOperation : (NSString *) operation{

    double result = 0;
    double num2 = [self popOperand];
    double num1 = [self popOperand];
    if ([operation isEqualToString:@"+"])
        result = num2 + num1;
    else if ([operation isEqualToString:@"-"])
        result = num2 - num1;
    else if ([operation isEqualToString:@"*"] || [operation isEqualToString:@"x"])
        result = num2 * num1;
    else if ([operation isEqualToString:@"/"]){
        if (num2 == 0)
            [self resetStack];
        else 
            result = num2 / num1;
    }

    [self pushOperand:result];
    self.operationIsPicked = NO;

    return result;

}

@end 
```

此外，我在控制台中打印显示的调试 NSLog 工作正常，但计算器视图中的显示实际上并没有更新（当我使用断点来减慢功能时）。

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()

@property (nonatomic) BOOL userIsInTheMiddleOfTypingANumber;
@property (nonatomic, strong) CalculatorBrain *brain;

@end

@implementation CalculatorViewController

@synthesize userIsInTheMiddleOfTypingANumber = _userIsInTheMiddleOfTypingANumber;
@synthesize brain = _brain;
@synthesize display = _display;

- (CalculatorBrain *) brain {

    if (!_brain) {
        _brain =[[CalculatorBrain alloc] init];
    }
    return _brain;

}

- (IBAction) digitPressed: (UIButton *)sender {

    NSString *digit = [sender currentTitle];
    if (self.userIsInTheMiddleOfTypingANumber)
        self.display.text = [self.display.text stringByAppendingString: digit];
    else {
        self.display.text = digit;
        self.userIsInTheMiddleOfTypingANumber = YES;
    }

}

- (IBAction) clearPressed {
    self.userIsInTheMiddleOfTypingANumber = NO;
    self.display.text = @"0";
    [self.brain resetStack];
}   

- (IBAction) equalsPressed {
    self.userIsInTheMiddleOfTypingANumber = NO;
    if (self.brain.operationIsPicked) {
        [self.brain pushOperand: [self.display.text doubleValue]]; 
        double result = [self.brain performOperation: self.brain.operation];
        self.display.text = [NSString stringWithFormat: @"%g", result];
        NSLog(@"%@",self.display.text);
    }
    NSLog(@"%@",self.display.text);
}

- (IBAction) operationPressed:(UIButton *) sender {

    if (self.userIsInTheMiddleOfTypingANumber) { 
        [self.brain pushOperand: [self.display.text doubleValue]]; 
        self.brain.operation = [sender currentTitle];
        self.brain.operationIsPicked = YES;
        self.userIsInTheMiddleOfTypingANumber = NO;
        NSLog(@"%@", sender.currentTitle);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T14:15:45.857

引用评论中的答案：

“完整的错误说我向“[self.brain equalsPressed:]”发送了一个无效参数。实际上，equalsPressed 没有参数，但是当我将视图中的“=”按钮链接到其各自的方法时，我忘记了表示该函数不带参数。因此，即使我编写的函数没有参数，我也告诉编译器（开始）它应该带一个参数。

# gmail - 用于将 .eml 导入我的 Gmail 收件箱的 Google Apps 脚本

> ID：12116422
> 
> 赞同：2
> 
> 时间：2012-08-24T20:47:10.067
> 
> 标签：gmail, google-apps-script, gmail-imap, eml, gmail-pop

我在 GDrive 中有数百个 .eml 文件，我想将它们作为电子邮件导入到我的 Gmail 中。任何人都可以建议一个可以让我这样做的 Google Apps 脚本吗？我相当精通 Google Apps 脚本，我只需要一些关于如何继续的提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-23T16:23:30.137

我知道这个线程有点老了，但我今天遇到了一种将单个（或多个）eml 文件导入 Gmail 的方法，并认为我会分享。我的用例是我的公司迁移到 Google Apps 并将我的电子邮件导入 gmail 帐户。我以前一直在使用 Pop3 将这些电子邮件拉入另一个 gmail 帐户以使用 gmail 界面。不幸的是，我发送的邮件没有被放回我的公司电子邮件发送文件夹，因此没有被导入新的 gmail 帐户。以下是我将发送的电子邮件发送到新的 Google Apps gmail 帐户的方法。

[从此处](https://code.google.com/p/gmail-backup-com/)下载 Gmail 备份的副本。我用它来备份 gmail 帐户的全部内容。输入您的 gmail 凭据并为其提供一个文件夹以供下载，然后它就可以开始工作了。它将电子邮件分类为单个 eml 文件并使用月份和年份文件夹。文件夹结构是 MyGmailBackup (folder) 2012 10 - October 2012 eml 文件在这里。2012 年 11 月 11 日 eml 文件在这里。12 2013 01 02

它有一个恢复选项，对于导入 Gmail 非常有帮助。使用相同的 Gmail 备份程序，我将凭据更改为我想要恢复电子邮件的 gmail 帐户。如果我想导入所有电子邮件，我可以将文件夹设置为 MyGmailBackup。我只想导入一些电子邮件，所以我创建了一个文件夹来保存我想导入第二个 gmail 帐户的电子邮件。然后我将一个 eml 文件放入该文件夹并点击恢复。在浏览器中刷新我的 gmail 后，我的电子邮件就在那里。它甚至可以正确穿线。然后我选择了多个我想恢复的 eml 文件并再次尝试。它工作得很好。现在我已经在他们的线程中发送了我的电子邮件，并且我又回到了我离开的地方。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T18:24:52.010

在 Thunder Bird 中使用[ImportExportTools](https://addons.mozilla.org/en-US/thunderbird/addon/importexporttools/)插件。通过指向包含 eml 文件的文件夹，您可以在几秒钟内将 eml 文件导入到 Thunderbird。如果您已将 gmail 添加到 Thunderbird，gmail 将立即进行同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:27:39.667

我不确定 .eml 文件的格式，但对于 Lotus Notes，我可以使用[链接到此处](https://sites.google.com/site/notesimporter/)的代码导入导出的“结构化文本文件” 。

StackOverflow 没有很好地导入数百行代码 - 或者我只是做错了......无论哪种方式......希望这会有所帮助。

# ef-code-first - 实体代码优先多对多关系保存

> ID：12116427
> 
> 赞同：0
> 
> 时间：2012-08-24T20:47:23.333
> 
> 标签：ef-code-first, many-to-many, save

我花了一天的时间来解决这个问题。有这些实体：

```
public class UserRole
{
    [Key]
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<Privilege> Privileges { get; set; }
}

public class Privilege
{
    [Key]
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<UserRole> Roles { get; set; }
} 
```

而这个配置在上下文中：

```
modelBuilder.Entity<UserRole>().HasMany<Privilege>(a => a.Privileges).WithMany(a => a.Roles)
.Map(m =>
    {
        m.MapLeftKey("RoleId");
        m.MapRightKey("PrivilegeId");
        m.ToTable("RolesPrivilegesMapping");
    }); 
```

而这个测试代码：

```
UserRole role;
//get role entity from context
//write privileges count
using (VaultContext context = new VaultContext(connectionString))
{
    role = context.UserRoles.Where(a => a.Name == "Users").FirstOrDefault();
    Console.WriteLine(role.Privileges.Count.ToString()); //writes 0
}

//make offline changes
//the privilege already exists in database
role.Privileges.Add(new Privilege() { Id = 1, Name = "Login" });

//save changes to database
using (VaultContext context = new VaultContext(connectionString))
{
    List<Privilege> privileges = new List<Privilege>();
    foreach (Privilege p in role.Privileges)
    { privileges.Add(p); }
    foreach (Privilege p in privileges)
    { context.Privileges.Attach(p); }
    role.Privileges.Clear();
    context.UserRoles.Attach(role);
    context.Entry(role).State = System.Data.EntityState.Modified;
    foreach (Privilege p in privileges)
    { role.Privileges.Add(context.Privileges.Find(p.Id)); }
    context.SaveChanges();
}

//reload the role entity
//write privileges count
using (VaultContext context = new VaultContext(connectionString))
{
    Console.WriteLine(context.UserRoles.Where(a => a.Name == "Users").FirstOrDefault().Privileges.Count.ToString()); //writes 0
} 
```

用户角色和登录权限已在数据库中。所以我尝试将权限登录添加到用户角色。但是关系没有保存在数据库中 - RolesPrivilegesMapping 表不包含 ID 对应于用户角色和登录权限的记录。如果我只是直接添加 - 它可以工作，但它不是我的目标：

```
new UserRole() 
{ 
    Name = "Administrators", 
    Privileges = new List<Privilege>() 
    { 
        new Privilege() { Name = "Login" }
    }
} 
```

如果所有实体都存在于数据库中，谁能建议我如何只添加多对多关系？我正在使用 EF 5.0。我已经用 EF 4.3 进行了尝试，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:40:08.973

如果您只想在数据库中附加现有条目，您能做一些更简单的事情吗？

```
 using( VaultContext context = new VaultContext( ) )
         {
            role = context.UserRoles.FirstOrDefault(a => a.Name == "Users");
            Privilege p = context.Privileges.FirstOrDefault(pr => pr.Name == "Login");
            role.Privileges.Add(p);
            context.SaveChanges();
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:45:02.903

谢谢你。这是我的解决方案：（角色离线更改）

```
UserRole dbRole = context.UserRoles.Find(role.Id);
dbRole.Privileges.Clear();
foreach (Privilege p in role.Privileges)
{
    dbRole.Privileges.Add(context.Privileges.Find(p.Id));
}
context.Entry(dbRole).State = System.Data.EntityState.Modified; 
```

# c# - 有没有办法告诉在c#中调用函数的方法的参数？

> ID：12116429
> 
> 赞同：6
> 
> 时间：2012-08-24T20:47:33.030
> 
> 标签：c#, .net, reflection, stack-trace

我正在为我的 c# 应用程序开发一个不干涉日志机制。

这是我希望它看起来的样子：

function`a(arg1, arg2, arg 3.....)`调用 function `b(arg4,arg5,arg6....)`，后者又调用`log()`which 能够检测堆栈跟踪（这可以通过 来完成`Environment.StackTrace`）以及调用堆栈跟踪中的每个函数（例如`a`和`b`）的值。

我希望它在调试和发布模式下工作（或者，至少在调试模式下）。

这可以在.net中完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T21:04:25.727

可证明不可能：

到`b`调用时，a 使用的堆栈空间`arg1`（IL 堆栈，因此它可能从未放入堆栈，但已在调用中注册）不能保证仍由`arg1`.

通过扩展， if`arg1`是一个引用类型，如果在调用`b`.

**编辑**：

更详细一点，因为您的评论表明您没有理解这一点并且仍然认为它应该是可能的。

抖动使用的调用约定未在任何相关标准的规范中指定，这使实施者可以自由地进行改进。它们确实在 32 位和 64 位版本以及不同的版本之间存在差异。

但是，MS 人员的文章建议使用的约定类似于[__fastcall](http://www.hackcraft.net/cpp/MSCallingConventions/#fastcall)约定。在您对 的调用中`a`，`arg1`将被放入`arg2`运行代码的核心的 ECX 寄存器*和 EDX 寄存器中（我通过假设 32 位 x86 来简化，并且注册了 amd64 甚至更多的参数）。`arg3`将被推入堆栈并且确实存在于内存中。

请注意，在这一点上，并没有存在的内存位置`arg1`，`arg2`它们仅在 CPU 寄存器中。

在执行方法本身的过程中，根据需要使用寄存器和存储器。并且`b`被称为。

现在，如果`a`需要`arg1`，或者`arg2`它必须在它调用之前推送它`b`。但如果它没有，那么它就不会 - 甚至可能会重新排序以减少这种需求。相反，此时这些寄存器可能已经被用于其他用途 - 抖动并不愚蠢，因此如果它需要一个寄存器或堆栈上的一个插槽，并且在方法的其余部分有一个未使用，它会继续重用那个空间。（就此而言，在此之上的级别，C# 编译器将重用 IL 生成的虚拟堆栈中使用的插槽）。

因此，当`b`被调用时，`arg4`将被放入寄存器 ECX 中，`arg5`放入 EDX 并`arg6`压入堆栈。在这一点上，`arg1`不`arg2` 存在，你再也找不到它们是什么，就像你读一本书被回收并变成卫生纸之后一样。

（有趣的是，一个方法在相同位置调用另一个具有相同参数的方法是很常见的，在这种情况下，ECX 和 EDX 可以单独使用）。

然后，`b`根据大小，返回，将其返回值放入 EAX 寄存器或 EDX:EAX 对或 EAX 指向它的内存中，在将其返回值放入该寄存器`a`之前做一些更多的工作，依此类推。

现在，这是假设没有进行任何优化。实际上，可能`b`根本没有调用它，而是它的代码是内联的。在这种情况下，无论值在寄存器中还是在堆栈上 - 在后一种情况下，它们在堆栈上的位置，不再与`b`'s 的签名有关，也与相关值在`a`'s期间的位置有关执行，并且在另一个“调用”到`b`的情况下，甚至在另一个“调用”到`b`from的情况下，它会有所不同，因为包括其调用`a`的整个调用可能已经内联在一种情况下，而不是内联另一个，并且在另一个中以不同的方式内联。例如，如果`a``b``arg4`直接来自另一个调用返回的值，此时它可能在 EAX 寄存器中，而在`arg5`ECX 中，因为它与.`arg1``arg6``a`

另一种可能性是`b`调用是被消除的尾调用：因为调用`b`也将立即返回其返回值`a`（或其他一些可能性），而不是推入堆栈，而是使用正在使用的值by`a`被就地替换，并且返回地址发生了变化，因此 return from`b`跳转回调用的方法`a`，跳过了一些工作（并减少了内存使用，以至于一些会溢出堆栈的函数式方法改为工作并且确实运作良好）。在这种情况下，在调用 的过程中`b`，参数 to`a`很可能完全消失了，即使是那些已经在堆栈上的参数。

最后一种情况是否应该被认为是一种优化，这是非常值得商榷的。有些语言严重依赖于它的完成，因为它们提供了良好的性能，而如果它们甚至可以工作（而不是溢出堆栈），它们的性能却很糟糕。

可以有各种各样的其他优化。**应该**有各种各样的其他优化——如果 .NET 团队或 Mono 团队做了一些事情，使我的代码更快或使用更少的内存，但在其他方面表现相同，而无需我做任何事情，我不会抱怨！

这是假设首先编写 C# 的人从未更改过参数的值，这肯定不会是真的。考虑这段代码：

```
IEnumerable<T> RepeatedlyInvoke(Func<T> factory, int count)
{
  if(count < 0)
    throw new ArgumentOutOfRangeException();
  while(count-- != 0)
    yield return factory();
} 
```

即使 C# 编译器和抖动的设计非常浪费，您可以保证不会以上述方式更改参数，但您怎么能知道`count`在 的调用中已经发生了`factory`什么？即使在第一次调用时它也不同，而且上面的代码也不是奇怪的。

所以，总结一下：

1.  抖动：参数经常被注册。您可以期望 x86 将 2 个指针、引用或整数参数放入寄存器，而 amd64 将 4 个指针、引用或整数参数和 4 个浮点参数放入寄存器。他们没有位置可以读取它们。
2.  抖动：堆栈上的参数经常被覆盖。
3.  Jitter：可能根本没有真正的调用，所以没有地方可以寻找参数，因为它们可能在任何地方。
4.  抖动：“呼叫”可能会重新使用与上一个相同的帧。
5.  编译器：IL 可以为本地人重用插槽。
6.  人：程序员可以改变参数值。

从所有这些来看，到底怎么可能知道是什么`arg1`？

现在，添加垃圾收集的存在。想象一下，如果我们能神奇地知道`arg1`无论如何，尽管如此。如果它是对堆上对象的引用，它可能仍然对我们没有好处，因为如果以上所有都意味着堆栈上没有更多活动引用 - 应该很清楚，这肯定会发生 -并且 GC 启动，然后对象可能已被收集。所以我们能神奇地得到的只是对不再存在的东西的引用——实际上很可能是堆中的一个区域现在被用于其他东西，砰地一声，整个框架的整个类型安全！

它与获得 IL 的反射没有丝毫可比性，因为：

1.  IL 是静态的，而不仅仅是给定时间点的状态。同样，我们可以从图书馆获得我们最喜欢的书籍的副本，这比我们在第一次阅读时获得我们的反应要容易得多。
2.  IL 无论如何都没有反映内联等的影响。如果每次实际使用调用时都内联，然后我们使用反射来获取`MethodBody`该方法的一个，那么它通常内联的事实是无关紧要的。

其他答案中关于分析、AOP 和拦截的建议与您将获得的一样接近。

*实际上，`this`是实例成员的真正第一个参数。让我们假装一切都是静态的，所以我们不必一直指出这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T21:08:41.633

这在.net 中是不可能的。在运行时，JITter 可能决定使用 CPU 寄存器而不是堆栈来存储方法参数，甚至重写堆栈中的初始（传递）值。因此，.net 允许在源代码中的任何位置记录参数将非常耗费性能。

据我所知，您通常可以做到的唯一方法是使用 .net CLR 分析 API。（例如 Typemock 框架能够做这样的事情，它使用 CLR 分析 API）

如果您只需要拦截虚拟函数/属性（包括接口方法/属性）调用，您可以使用任何拦截框架（例如 Unity 或 Castle）。

有一些关于 .net 分析 API 的信息：

[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/cc300553.aspx)

[MSDN 博客](http://blogs.msdn.com/b/davbr/)

[布赖恩·朗的博客](http://www.blong.com/Conferences/DCon2003/Internals/Profiling.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:17:54.997

如果没有类型模拟或一些 ICorDebug 魔法，可能不会发生。甚至[StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)类也只列出了允许您获取有关源信息的成员，而不是参数。

但是，您所追求的功能作为带有方法日志记录的 IntelliTrace 存在。您可以过滤您需要查看的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T21:09:57.437

这在 C# 中是不可能的，您应该使用 AOP 方法并在调用每个方法时执行方法参数记录。通过这种方式，您可以集中您的日志记录代码，使其可重用，然后您只需要标记哪些方法需要参数日志记录。

我相信这可以使用[PostSharp](http://www.sharpcrafters.com/)之类的 AOP 框架轻松实现。

# c++ - 命令行错误 D8036 - 不允许使用多个源文件

> ID：12116430
> 
> 赞同：9
> 
> 时间：2012-08-24T20:47:34.200
> 
> 标签：c++, visual-studio-2010

我在视觉工作室工作，我对我的一个项目进行了一些更改（更改了一些包含目录）。当我稍后尝试构建该项目时，我收到以下错误消息：

```
cl : Command line error D8036: '/Fo.\obj\ms100_r' not allowed with multiple source files 
```

我根本看不出这与我所做的改变有什么关系。我什至将 .vcxproj 文件回滚到以前的版本，但该错误仍然存​​在。我不知道是什么原因造成的。命令行参数不应该由visual studio管理吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-15T03:49:24.073

有同样的问题，并意识到我在末尾删除了斜线：

配置属性->c/c++->输出文件->目标文件名->

一旦我在文件名的末尾添加了斜杠，一切都恢复正常了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T09:40:08.800

/doc 我也有类似的错误。对我来说，解决方案是更改配置属性 / C/C++ / 输出文件 | XML 文档文件名从“$(TargetPath).xml”到空字符串。

# java - 用另一个和所有引用替换 Java 对象实例

> ID：12116431
> 
> 赞同：4
> 
> 时间：2012-08-24T20:47:39.807
> 
> 标签：java, object

有没有办法将java中的一个对象替换为另一个更新对第一个对象的所有引用以指向第二个对象的方法？在 C# 中，这个问题在这里得到了回答：[Replace object instance with another in C#](https://stackoverflow.com/questions/11377329/replace-object-instance-with-another-in-c-sharp)但我想知道我是否可以在 Java 中做到这一点。谢谢！

编辑： 1\. 我想用子类型的对象替换第一个对象。2\. 我无法编辑第一个对象的实现，这就是我用子类型替换它的原因。我可以编辑子类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:09:36.397

即使可以，也不要这样做。相反，使用另一个类来包含或包装您要替换的对象。容器必须通过调用原始方法中的方法来实现原始所需的所有方法，但是您可以随时轻松替换包装的类。包装器、原始类以及您替换它的类都应该实现相同的接口。这个解决方案有点工作，但随着时间的推移它会坚持下去。

我怀疑您真正想要的是一个具有许多可升级组件的类，但这对于初学者来说是可行的，并让您以正确的方式思考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T20:57:14.353

如果您的意图是用子类型替换特定类型的*所有实例，那么您可以考虑使用*[java 代理](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/package-summary.html)。

使用它，您将在类加载期间将基类替换为您的增强类。

# ruby - 扩展 Ruby 续集

> ID：12116432
> 
> 赞同：1
> 
> 时间：2012-08-24T20:47:43.873
> 
> 标签：ruby, sql-server, sequel

我正在尝试通过扩展 Sequel 对象/模块来创建一个处理数据库连接的库。但我无法通过这个：

```
require 'sequel'
class Database 
  include Sequel
  def connect()
    self.ado(:conn_string=>"Server=homeServer;Provider=SQLNCLI10;Database=test;Trusted_Connection=yes;")
  end
end
db = LocalDatabase.new()
db.connect() 
```

我收到以下错误：test.rb:5:in `connect': undefined method`ado' for # (NoMethodError) from test.rb:10:in `'

为什么我看不到ado方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:19:43.823

在 ruby​​ 中，如果您对一个类进行子类化，则可以通过将它们作为子类的单例方法调用来调用超类的单例方法，但这不适用于包含/扩展模块。这是模块在方法查找方面与类不同的一种方式。要了解原因，您需要阅读有关 ruby​​ 的方法查找和对象模型如何工作的详细信息。

要调用 Sequel 模块的单例方法，您需要使用显式接收器调用它们：

```
require 'sequel'
class Database 
  include Sequel
  def connect()
    Sequel.ado(:conn_string=>"Server=homeServer;Provider=SQLNCLI10;Database=test;Trusted_Connection=yes;")
  end
end
db = LocalDatabase.new()
db.connect() 
```

FWIW，除了只读工作负载，我不建议使用 ado 适配器。由于您似乎正在连接到 SQL Server，因此我建议使用 tinytds 适配器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T23:59:15.743

发生的事情是包含续集，因此它的方法可用作实例方法，我认为您想扩展，即

```
require 'sequel'
class Database 
  extend Sequel
  def connect()
    ado(:conn_string=>
    "Server=homeServer;Provider=SQLNCLI10;Database=test;Trusted_Connection=yes;")
  end
end
db = LocalDatabase.new()
db.connect() 
```

# android - 为什么 Eclipse 在进行更改后会运行已安装的应用程序而不是构建新的 apk？

> ID：12116439
> 
> 赞同：1
> 
> 时间：2012-08-24T20:48:30.470
> 
> 标签：android, eclipse, build

我有一个 Android 项目，其中有几个纯 Java 项目作为依赖项。我对其中一个仅限 Java 的项目进行了更改，并已保存。我检查了“自动构建”。

我点击 Run > (Android application target)

Eclipse 中的控制台显示它正在将启动 Intent 发送到我的应用程序，该应用程序在连接的手机上启动。

我希望它知道项目中发生了一些变化，重新构建它和依赖它的所有项目，将生成的 .apk 上传到手机，然后才发送启动 Intent。

有谁知道如何解决这个问题？

# asp.net - asp.net FileUpload.FileName 在不需要时返回 ie 中的完整路径

> ID：12116444
> 
> 赞同：16
> 
> 时间：2012-08-24T20:48:52.717
> 
> 标签：asp.net

根据我对 asp.net FileUpload.FileName 的理解，它返回完整路径，而在 Firefox 中它只返回文件名。我将如何从返回的字符串中删除路径，因为我只需要 html 编码的文件名。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T20:52:37.617

您可以使用[Path](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)静态类来获取文件名。

```
var fileName = Path.GetFileName(somePath); 
```

以及对它进行编码的[HttpUtility](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)静态类。

```
var encoded = HttpUtility.HtmlEncode(fileName); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-15T16:36:04.990

因此，在工具 -> Internet 选项 -> 安全下有一个 IE 设置（不仅在 IE8 中，而且在较新的版本中），允许您在文件上传时包含或排除本地路径。

![IE8本地目录路径设置](../Images/0597df78c3600628e50f7119da2b8251.png)

出于这个原因，如果你不想保留完整的路径信息，如果你想支持 IE（不确定其他浏览器是否有这样的设置），最安全的方法是显式删除路径。

正如 Josh 所提到的， Path.GetFileName(...) 是一个不错的选择。您还可以将 string.Split 与 Linq 结合使用。

```
string fileNameOnly = somePath.Split('\\').Last(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-06T19:43:56.610

```
Path.GetFileName(Request.Files["file"].FileName) 
```

# visual-studio-2010 - 允许关键字替换的代码段设计器 Visual Studio 2010 SQL

> ID：12116447
> 
> 赞同：0
> 
> 时间：2012-08-24T20:49:13.110
> 
> 标签：visual-studio-2010, tsql, code-snippets

我目前正在尝试使用[Snippet Designer](http://snippetdesigner.codeplex.com/)来加快我的开发速度。我要么错过了如何最好地利用它，要么错过了我需要的功能。我正在寻找通过片段完成以下任务的帮助。

我创建了许多遵循某种模式的表格，并希望对其进行某种程度的自动化。

*示例 SP*

```
CREATE TABLE [dbo].[ObjectTable]
(
    ObjectID [int] IDENTITY NOT NULL,
    ObjectName [nvarchar](256) NOT NULL
) 
```

我想做的是`Object`用表的名称替换。

*例子*

![创建表对话框](../Images/f15f0cc9ca51d478455ead769587a2b0.png)

![使用片段](../Images/2c7f72ecaa4fd0073f1b2e2a9b8f9c0f.png)

![片段替换后](../Images/1c73faed916a0f570c63ad18fd2a2752.png)

所以我想提取表格名称，或者即使我可以选择`Person`文本然后插入片段并使用选定的文本。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:37:05.043

我不了解 Snippet Designer，但在 SSMS 2012 片段功能中，您可以在命令文本中重用文字。我不知道如何选择您选择的值，但您可以轻松地在多个位置替换该值。如果您复制 Create Table 片段并像这样修改 Snippet 块：

```
 <Snippet> 
             <Declarations>   
                    <Literal>    
                           <ID>SchemaName</ID>    
                           <ToolTip>Name of the schema</ToolTip>    
                           <Default>dbo</Default>    
                    </Literal>    
                    <Literal>    
                           <ID>Tablename</ID>    
                           <ToolTip>Root Name of Table</ToolTip>    
                           <Default>MyTableNameRoot</Default>    
                    </Literal>    
             </Declarations>    
             <CodeLanguage="SQL">    
                    <![CDATA[CREATE TABLE [$SchemaName$].[$Tablename$Table]    
(    
       $Tablename$ID [int] IDENTITY NOT NULL,    
       $Tablename$Name [nvarchar](256) NOT NULL    
);$end$]]>    
             </Code>    
       </Snippet> 
```

然后您应该能够替换“MyTableNameRoot”一次，并将其替换为两个列名。

# javascript - 如何在 Google Geochart 图表中的工具提示文本中添加新行？

> ID：12116449
> 
> 赞同：1
> 
> 时间：2012-08-24T20:49:19.260
> 
> 标签：javascript, html, google-visualization

我正在使用 Google 的 GeoChart API 生成美国地图。我想基于一个值突出显示状态，然后在将鼠标悬停在状态上时显示的工具提示中显示有关每个状态的一些额外信息。我希望完成的工具提示看起来像这样：

```
Nevada
Relevance: 4 ( the data driving the state highlight )
Data
More Data 
```

地图效果很好，我可以使用该功能将任何我想要的文本添加到工具提示中`PatternFormat()`，但它会删除或忽略我尝试过的所有新行选项：

```
var formatter = new google.visualization.PatternFormat('some data\nmore data');
formatter.format(data, [0], 1); 
```

我已经尝试了所有这些新的线路选项，但它们都不起作用： `<br>`, `<br />`, `&#13;`, `&#10`, `&#x0A`, `&#x0D`, `\u000A`, `\u000D`, `\n`, `\r`, `\r\n`, `%0A`,`%0D`

关于尝试的事情或实际有效的任何建议？这在其他一些谷歌图表中似乎是可能的。

**呈现的 HTML 看起来像这样**

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>

<script type='text/javascript'>

    google.load( 'visualization', '1', { 'packages': ['geochart'] } );
    google.setOnLoadCallback( drawRegionsMap );

    function drawRegionsMap()
    {

        var data = google.visualization.arrayToDataTable([
            [ 'State', 'Relevance' ],
            [ 'Arizona', 2 ],
            [ 'California', 4 ],
            [ 'Colorado', 1 ],
            [ 'Florida', 1 ],
            [ 'Georgia', 1 ],
            [ 'Idaho', 1 ],
            [ 'Illinois', 1 ],
            [ 'Indiana', 1 ],
            [ 'Iowa', 1 ],
            [ 'Kansas', 1 ],
            [ 'Kentucky', 1 ],
            [ 'Louisiana', 1 ],
            [ 'Maryland', 2 ],
            [ 'Montana', 1 ],
            [ 'Nevada', 2 ],
            [ 'New Mexico', 2 ],
            [ 'North Carolina', 1 ],
            [ 'North Dakota', 1 ],
            [ 'Oklahoma', 1 ],
            [ 'Oregon', 1 ],
            [ 'Pennsylvania', 1 ],
            [ 'South Carolina', 1 ],
            [ 'Tennessee', 1 ],
            [ 'Texas', 1 ],
            [ 'Utah', 2 ],
            [ 'Washington', 1 ],
            [ 'Wyoming', 1 ]
        ]);

        data.addRows([
            ['Has Distributor', 1],
            ['Sells Direct', 1]
        ]);

        var formatter = new google.visualization.PatternFormat('data <br> <br /> &#13; &#10 &#x0A &#x0D \u000A \u000D \n \r \r\n %0A %0D more data');
        formatter.format(data, [0], 1);

        var options =
        {
            width:      286,
            region:     'US',
            resolution: 'provinces',
            colorAxis:  { colors: ['#abdfab', '#006600'] },
            legend:     'none'
        };

        var chart = new google.visualization.GeoChart( document.getElementById( 'chart_div' ) );
        chart.draw( data, options );

    };

</script>

<div id="chart_div" style="width: 286px; height: 180px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-18T14:19:19.403

[对于遇到此问题的任何人，您都可以在文档](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content#using-html-tooltips)中的图表选项中进行`tooltip: {isHtml: true}`设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:57:09.487

看看使用[数据表角色](https://developers.google.com/chart/interactive/docs/roles)。简而言之，您添加一个角色为 的新列`tooltip`，然后您可以根据需要自定义显示的内容。

我之前已经成功地将它用于折线图和柱形图，但折线图和柱形图的[图表库](https://developers.google.com/chart/interactive/docs/gallery)页面明确提到它们支持角色，而地理图表页面不支持。这可能并不意味着它们不受支持。它可能只是没有记录的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T21:40:24.233

从我所有的研究和测试来看，我几乎可以肯定，**目前不可能在 GeoChart 内的工具提示文本中添加新行**。请参阅[此问题](https://stackoverflow.com/questions/11752199/can-i-customize-the-tooltip-text-in-a-google-geochart-chart)以了解我最终提出的解决方案。这并没有解决换行问题，而是以适合我的应用程序并可能对其他人有帮助的方式重新格式化了工具提示。

# django - 删除大型 Django 查询集会导致 Apache 内部服务器错误

> ID：12116452
> 
> 赞同：2
> 
> 时间：2012-08-24T20:49:35.840
> 
> 标签：django, django-queryset, bulk

我正在尝试使用以下方法删除大约 200,000 个对象（它们都有多个相关对象，总共大约 2,000,000 个对象）：

```
DataRecord.objects.filter(order=self.order).delete() 
```

但是我收到了内部服务器错误（大约 20 分钟后），并且没有删除任何对象。我将 Apache 超时设置为 3600（1 小时），以便为该操作提供足够的时间。

有没有更有效的方法来批量删除大量对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:14:22.260

似乎最好的解决方案是使用原始查询（请参阅[https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)），但是`pre_delete`，`post_delete`不会触发信号.

随机 ORM 思想：`DataRecord.order`列是否被索引？

编辑：识别列是否容易：查看列是否具有设置`db_index`属性，即：

```
class DataRecord(models.Model):
    order = models.IntegerField(_("order"), **db_index=True**) 
```

索引允许快速查找数据，而无需读取整个表。这就像一本书中的索引——当你想在其中找到某个单词时，索引会帮助你在不阅读整本书的情况下找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:13:25.370

查找将要删除的对象的数量，并在 for 循环中将删除分解为一千左右的倍数。一个简单的例子：

```
q = DataRecord.objects.filter(order=self.order)
cnt = q.count()
bucket = 1000
a, rem = divmod(cnt, bucket) 
i, j, k = 0, bucket, 0
while k<a:
    for obj in q[k*bucket: (k+1)*bucket + (k+1==a and rem)]:
        obj.delete()
    k+=1 
```

# tomcat - Spring Roo“基础”URL

> ID：12116458
> 
> 赞同：1
> 
> 时间：2012-08-24T20:50:02.920
> 
> 标签：tomcat, spring-mvc, spring-roo

我目前正在使用 Spring Roo 构建一个相当简单的 webapp。然而，Spring 应用程序似乎默认部署到“/{app name}”，而不是“/”作为顶级目录。也就是说，控制器由“/{app name}/person”映射，而不仅仅是“/person”。经过相当多的探索之后，我看不出这将在哪里解决。它是某个地方的设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T08:37:26.933

基本路径由应用程序服务器定义，而不是应用程序本身。在 pom.xml 中，覆盖以下插件：

**maven-war-plugin - mvn 包，mvn tomcat:run-war**

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <warName>ROOT</warName>
                <!-- exclude test files from war package -->
                <packagingExcludes>src/test/**</packagingExcludes>
            </configuration>
        </plugin> 
```

**tomcat-maven-plugin - mvn tomcat:run**

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <path>/</path>
            </configuration>
        </plugin> 
```

**org.mortbay.jetty - mvn 码头：运行**

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.0.4.v20111024</version>
            <configuration>
                <webAppConfig>
                    <contextPath>/</contextPath>
                </webAppConfig>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T17:35:58.557

假设您的 Spring Roo 应用程序在 Apache Tomcat 上运行，您可以做的是配置 Tomcat Root 上下文。

您可以通过以下方式执行此操作。

1.  在 conf/Catalina/localhost 中定义一个 ROOT.xml 上下文文件
2.  将您的 webapp WAR 命名为“ROOT.war”或包含文件夹“ROOT”</li>

更多信息可以在以下链接中找到。

[http://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context/](http://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context/)

干杯!

# django - 函数'对象没有属性'create_order'

> ID：12116461
> 
> 赞同：0
> 
> 时间：2012-08-24T20:50:23.857
> 
> 标签：django

我在理解“导入”时遇到了一些麻烦

这段代码可以正常工作。一世

```
from checkout import create_order

# Create your views here.
def checkout(request):
    if request.method == 'POST':

        create_order(request)

        return HttpResponseRedirect('/menu/')

    return render_to_response("payment_form.html",locals(), context_instance=RequestContext(request)) 
```

但由于某种原因，这段代码给了我错误：（函数'对象没有属性'create_order'）

```
import checkout

# Create your views here.
def checkout(request):
    if request.method == 'POST':

        checkout.create_order(request)

        return HttpResponseRedirect('/menu/')

    return render_to_response("payment_form.html",locals(), context_instance=RequestContext(request)) 
```

它不应该一样吗？

这是创建订单功能

```
from cart import cart
from models import Order, OrderItem
from django.core import urlresolvers
import urllib

def create_order(request): 
    order = Order()

    order.user = request.user
    order.status = Order.SUBMITTED

    #have this fix this
    order.time = 7

    order.save()

    # if the order save succeeded 
    if order.pk:
        cart_items = cart.get_cart_items(request) 
        for ci in cart_items:
            # create order item for each cart item 
            oi = OrderItem()
            oi.order = order
            oi.quantity = ci.quantity
            oi.price = ci.price # now using @property oi.product = ci.product
            oi.product = ci.product
            oi.save()

        # all set, empty cart
        cart.empty_cart(request) 

    # return the new order object 
    return order 
```

这是我的文件的 img ![在此处输入图像描述](../Images/a898eb0e611f7d54b221c4c507478737.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:53:08.527

这是你的问题：

```
import checkout

# Create your views here.
def checkout(request): 
```

您的函数与模块具有相同的名称，因此这是尝试在函数上调用函数`checkout`：

```
checkout.create_order(request) 
```

# jquery - 用于电子邮件、电话和号码的 jQuery.validation

> ID：12116464
> 
> 赞同：0
> 
> 时间：2012-08-24T20:50:52.163
> 
> 标签：jquery, html

使用 jQuery.validation 插件可以为仅电话号码、仅邮政编码和仅电子邮件设置字段。那么当按下提交按钮时会在按钮旁边显示错误？

我研究过 HTML5，它有电话、号码和电子邮件的输入类型，但似乎还没有被所有较新的浏览器支持。所以我正在寻找一种简单的方法，而无需重新设计我的 FORM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T20:59:16.823

是的，当然有可能。你看过[演示](http://jquery.bassistance.de/validate/demo/)吗？还是[文档](http://docs.jquery.com/Plugins/Validation)？

如果随附的验证`jquery.validate.js`不够，您可以查看 中的验证`additional-methods.js`，或者如果情况变得更糟，您始终可以使用自定义验证方法扩展验证器。

编辑：

phoneUS、phoneUK、mobileUK、ziprange、email2 是`additional-methods.js`
数字，email 是`jquery.valiadte.js`

# javascript - javascript下载文件并执行提交操作

> ID：12116468
> 
> 赞同：0
> 
> 时间：2012-08-24T20:51:21.257
> 
> 标签：javascript, jquery

Onclick javascript 函数需要执行两个动作。

1.  使用 window.location.href = url 下载文件
2.  `document.getElementById('test').submit();`

我无法同时实现两者。如果添加了提交功能，则无法下载。关于如何实现两者的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:59:39.243

看起来您不能这样做，因为当提交发生时，该页面的先前请求已关闭。人们建议使用 iframe 进行文件下载，但提交会卸载包含 iframe 的旧页面，所以我认为它不会起作用。假设您应该使用`window.open(url)`而不是`window.location.href = url`这样，您将打开全新的窗口，该窗口将下载文件并提交将发生在旧窗口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:54:22.877

```
$(" selector ").click(function() {
    $("body").append(
        $("<iframe></iframe>")
        .attr("display", "none")
        .attr("src", url)
    );
    $("#test").submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:03:23.857

在头

```
<script type="text/javascipt">
function startDownload()
{
var url='http://server/folder/file.ext';  
window.open(url,'Download');
}
</script> 
```

在体内

```
<button type="button" onclick="startDownload()">Download</button> 
```

# php - 从自定义表中检索数据

> ID：12116471
> 
> 赞同：0
> 
> 时间：2012-08-24T20:51:51.717
> 
> 标签：php, wordpress

我正在尝试使用以下代码从 WordPress 中的自定义表中检索数据：

```
$myrows = $wpdb->get_results( "SELECT id, name FROM mytable" ); 
```

结果集为空，即使表中有数据。从数据库中获取 WordPress 内部表的数据没有问题。

例如，以下工作没有问题：

```
$posts = $wpdb->get_results("SELECT ID, post_title FROM $wpdb->posts WHERE post_status = 'publish' AND post_type='post' ORDER BY comment_count DESC LIMIT 0,4"); 
```

关于如何诊断问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:57:47.987

如果这是您的 SQL 语句的问题，则会`echo`输出一个错误——我不知道它在 WordPress 中的位置。

WordPress 确实有一个错误日志小部件，您可以安装它来帮助您调试问题：[http ://wordpress.org/extend/plugins/error-log-monitor/](http://wordpress.org/extend/plugins/error-log-monitor/)

这应该解释如何设置日志记录，以便您可以看到问题出在哪里。

# ruby-on-rails - 资产管道中的 Rails 静态 html 模板文件和开发模式下的缓存

> ID：12116476
> 
> 赞同：9
> 
> 时间：2012-08-24T20:52:12.343
> 
> 标签：ruby-on-rails, asset-pipeline

我正在使用 AngularJS 和 Rails 构建一个网站。我用于模板的 HTML 文件存储在 /app/assets/templates 下，每次更新路由或更改模板内嵌套部分内的某些内容时，我都需要“触摸”中的最高级别文件我正在更改的 html 文件的 /app/assets/templates 目录。

因此，如果我有一个加载部分“_form.html”的页面“edit.html”，那么每当我更新路线或更改 _form.html 中的某些内容时，我都需要确保已触及 edit.html。

这很烦人而且非常挑剔。有什么方法可以通知资产管道/链轮以避免缓存 app/assets/templates 目录？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-29T14:56:32.590

我发现的最佳解决方案是不要将资产管道用于 HTML 模板文件。

而是调用一个控制器`TemplatesController`并只创建一个动作。然后使用以下路由将所有模板 URL 映射到：

```
get /templates/:path.html => 'templates#page', :constraints => { :path => /.+/  } 
```

然后将所有模板文件移动到`app/views/templates`

然后在控制器内部，设置以下内容：

```
caches_page :page

def page
  @path = params[:path]
  render :template => 'templates/' + @path, :layout => nil
end 
```

这样，您的所有模板文件都将从控制器提供，然后将缓存到 public/templates 中。为避免缓存问题，您可以在模板路由中创建时间戳路径，以便您的缓存文件随版本一起交付：

```
get '/templates/:timestamp/:path.html' => 'templates#page', :constraints => { :path => /.+/ } 
```

这样，您每次上传网站时都可以拥有一个新的时间戳，并且您可以将模板文件夹存储在您喜欢的任何位置。您甚至可以将模板文件夹存储在 S3 上，并为此设置一个资产 URL。然后，无论您的模板文件被寻址到哪里，您都可以使用自定义资产方法：

```
templateUrl : <%= custom_asset_template_url('some/file.html') %> 
```

在哪里：

```
def custom_asset_template_url(path)
  "http://custom-asset-server.website.com/templates/#{$some_global_timestamp}/#{path}"
end 
```

然后，如果没有找到它，只需将资产重定向到 Rails 服务器并生成它。或者所有模板文件可以在上传后预先生成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T01:28:39.573

有很多（很多！）更好的方法来处理这个问题。

`<%= path_to_asset("template_name.html") %>`

这将从资产管道返回一个完全工作的文件，该文件可以使用 ERB 等。它没有记录，但它是链轮/资产管道的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-20T16:08:47.157

在我看来，这里需要做几件事：

1.  模板应该是命名空间的，所以人员模板进入 app/views/people/templates 目录
2.  模板是完全静态的，因此不应调用之前的过滤器。
3.  模板应该被缓存，使它们非常快。

这是使用 Rails 问题的可能解决方案：

```
# Allows static content to be served from the templates
# directory of a controller
module HasTemplates

  extend ActiveSupport::Concern

  included do
    # Prepend the filter
    prepend_before_filter :template_filter, only: [:templates]
    # Let's cache the action
    caches_action :templates, :cache_path => Proc.new {|c| c.request.url }
  end

  # required to prevent route from baulking
  def templates;end

  # Catch all template requests and handle before any filters
  def template_filter
    render "/#{params[:controller]}/templates/#{params[:template]}", layout: 'blank'
    rescue ActionView::MissingTemplate
      not_found layout: 'blank'
    false
  end
end 
```

请注意，我们在前置过滤器中返回模板。这允许我们返回静态内容而无需点击任何其他过滤器。

然后，您可以创建一条路线，如下所示：

```
resources :people do
  collection do
    get 'templates/:template' => 'people#templates', as: :templates
  end
end 
```

您的控制器变得简单：

```
class PeopleController < ApplicationController
  include HasTemplates
end 
```

现在，任何放置在 /app/views/people/templates 中的文件都可以通过 url 快速提供。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-17T02:52:30.910

稍微扩展 RandallB 的答案；这在资产管道的文档中明确提到：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

请注意，您必须将扩展名 .erb 附加到您的 .coffee 文件才能进行这项工作。（例如，application.js.coffee.erb）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-26T14:51:46.237

您可以尝试 gem `js_assets`( [https://github.com/kavkaz/js_assets](https://github.com/kavkaz/js_assets) )。

这使您可以`asset_path`在模拟类似链轮方法的 javascript 代码中运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-28T03:53:32.557

最简洁的解决方案是使用 ejs 预编译您的 html 资产并将它们作为其他 javascript 文件提供。

*   没有http查询
*   缩小
*   可以将 js 数据传递给您的模板以使它们动态化（ejs 是下划线模板的一个端口，基本上表现得像 erb for javascript）

它基本上是这样工作的：

```
 #in you gemfile
    gem 'ejs'

    #in app/assets/javascripts/templates/my_template.jst.ejs
    <p>my name is <%= name %> !<p>

    #in your application.coffee
    #= require_tree ./templates

    JST['templates/my_template'](name: 'itkin')
    => '<p>my name is itkin !<p>' 
```

# mysql - 如何在 MYSQL 中将行配对？

> ID：12116480
> 
> 赞同：3
> 
> 时间：2012-08-24T20:52:34.183
> 
> 标签：mysql, sql, concat

我正在开发一个简单的时间跟踪应用程序。

我创建了一个记录员工进出时间的表。

这是我的数据当前外观的示例：

```
E_ID | In_Out |      Date_Time
------------------------------------
  3  |   I    | 2012-08-19 15:41:52
  3  |   O    | 2012-08-19 17:30:22
  1  |   I    | 2012-08-19 18:51:11
  3  |   I    | 2012-08-19 18:55:52
  1  |   O    | 2012-08-19 20:41:52
  3  |   O    | 2012-08-19 21:50:30 
```

我试图创建一个查询，将员工的进出时间配对成一行，如下所示：

```
E_ID |       In_Time       |      Out_Time
------------------------------------------------
  3  | 2012-08-19 15:41:52 | 2012-08-19 17:30:22
  3  | 2012-08-19 18:55:52 | 2012-08-19 21:50:30
  1  | 2012-08-19 18:51:11 | 2012-08-19 20:41:52 
```

我希望我清楚我在这里想要实现的目标。基本上，我想生成一个将进出时间合并到一行的报告。

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:17:30.140

我能想到三种基本方法。

一种方法使用 MySQL 用户变量，一种方法使用 theta JOIN，另一种方法使用 SELECT 列表中的子查询。

**θ-JOIN**

一种方法是使用 theta-JOIN。这种方法是一种通用的 SQL 方法（没有特定于 MySQL 的语法），它可以与多个 RDBMS 一起使用。

注意：对于大量行，这种方法会创建非常大的中间结果集，这可能会导致性能问题。

```
SELECT o.e_id, MAX(i.date_time) AS in_time, o.date_time AS out_time    
  FROM e `o`
  LEFT
  JOIN e `i` ON i.e_id = o.e_id AND i.date_time < o.date_time AND i.in_out = 'I'
 WHERE o.in_out = 'O'
 GROUP BY o.e_id, o.date_time
 ORDER BY o.date_time 
```

这样做是将员工的每个“O”行与之前的每个“I”行进行匹配，然后我们使用 MAX 聚合来挑选具有最接近日期时间的“I”记录。

这适用于完美配对的数据；对于不完美的配对可能会产生奇怪的结果......（没有中间“I”行的两个连续的“O”记录，都将匹配到相同的“I”行，等等）

* * *

**SELECT 列表中的相关子查询**

另一种方法是在 SELECT 列表中使用相关子查询。这可能具有次优性能，但有时是可行的（并且有时是返回指定结果集的最快方法......当我们在外部查询中返回的行数有限时，这种方法效果最好。）

```
 SELECT o.e_id
      , (SELECT MAX(i.date_time)
           FROM e `i`
          WHERE i.in_out = 'I'
            AND i.e_id = o.e_id
            AND i.date_time < o.date_time
        ) AS in_time
      , o.date_time AS out_time
   FROM e `o`
  WHERE o.in_out = 'O'
  ORDER BY o.date_time 
```

* * *

**用户变量**

另一种方法是利用 MySQL 用户变量。（这是一种特定于 MySQL 的方法，是“缺失”分析函数的解决方法。）

该查询的作用是按 e_id 对所有行进行排序，然后按 date_time 排序，这样我们就可以按顺序处理它们。每当我们遇到“O”（out）行时，我们使用前一个“I”行中的 date_time 值作为“in_time”）

注意：MySQL 用户变量的这种使用取决于 MySQL 以特定顺序执行操作，这是一个可预测的计划。使用内联视图（或 MySQL 术语中的“派生表”）为我们提供了可预测的执行计划。但这种行为可能会在 MySQL 的未来版本中发生变化。

```
SELECT c.e_id
     , CAST(c.in_time AS DATETIME) AS in_time
     , c.out_time
  FROM (
         SELECT IF(@prev_e_id = d.e_id,@in_time,@in_time:=NULL) AS reset_in_time
              , @in_time := IF(d.in_out = 'I',d.date_time,@in_time) AS in_time
              , IF(d.in_out = 'O',d.date_time,NULL) AS out_time
              , @prev_e_id := d.e_id  AS e_id
           FROM (
                  SELECT e_id, date_time, in_out 
                    FROM e
                    JOIN (SELECT @prev_e_id := NULL, @in_time := NULL) f
                   ORDER BY e_id, date_time, in_out 
                 ) d
       ) c
 WHERE c.out_time IS NOT NULL
 ORDER BY c.out_time 
```

这适用于您拥有的数据集，它需要更彻底的测试和调整，以确保在行未完美配对时（例如，没有“I”行的两个“O”行在它们之间，一个“I”行，没有后续的“O”行，等等）

[SQL小提琴](http://sqlfiddle.com/#!2/84342/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:52:54.910

不幸的是，MySQL 没有`ROW_NUMBER() OVER(PARTITION BY ORDER BY()`像 SQL Server 这样的功能，否则这将非常容易。

但是，在 MySQL 中有一种方法可以做到这一点：

```
set @num := 0, @in_out := '';

select emp_in.id,
  emp_in.in_time,
  emp_out.out_time
from 
(
  select id, in_out, date_time in_time, 
     @num := if(@in_out = in_out, @num + 1, 1) as row_number,
     @in_out := in_out as dummy
  from mytable
  where in_out = 'I'
  order by date_time, id
) emp_in
join
(
  select id, in_out, date_time out_time,
     @num := if(@in_out = in_out, @num + 1, 1) as row_number,
     @in_out := in_out as dummy
  from mytable
  where in_out = 'O'
  order by date_time, id
) emp_out
  on emp_in.id = emp_out.id
  and emp_in.row_number = emp_out.row_number
order by emp_in.id, emp_in.in_time 
```

基本上，这会创建两个子查询，每个子查询都会为该特定记录生成一个 row_number - 一个子查询用于 in_time，另一个用于 out_time。

然后你`JOIN`把这两个查询放在`emp_id`一起`row_number`

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9853b/51)

# asp.net - asp.net Forms Authentication多人使用相同的用户名登录

> ID：12116481
> 
> 赞同：2
> 
> 时间：2012-08-24T20:52:34.753
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

我有一个使用表单身份验证的 MVC3 网站，我想知道如果多个或更多人使用相同的用户帐户登录，是否会出现任何问题？

我一直在尝试解决我们一直遇到的错误（看起来网站服务器与数据库服务器通信时出现问题），但是我只是想排除由帐户共享引起的问题的可能性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:54:27.600

不，就 ASP.NET 表单身份验证机制而言（我说的是表单身份验证，而不是 ASP.NET 会话，它们是两个完全不同的东西），绝对没有问题。使用 cookie 跟踪用户并且请求是无状态的。数据库也很好地处理并发。

当然，开发人员可以编写在多个用户连接到同一个帐户的情况下根本不起作用的代码，因为他们做错了。例如，开发人员开始使用 ASP.NET 会话来规避 HTTP 协议的无状态特性。这就是问题可能开始出现的地方。例如，由于 ASP.NET 会话不是线程安全的，ASP.NET 会自动序列化对它们的访问，这意味着您不能有来自同一会话的并发请求 => 它们被排队并按顺序执行。

# android - 如何在线程中注册 BroadcastReceiver()

> ID：12116483
> 
> 赞同：1
> 
> 时间：2012-08-24T20:52:38.973
> 
> 标签：android, broadcastreceiver

我有一个录音机 android 线程，我需要知道录音时是否连接了麦克风/耳机，所以我需要在线程内使用 BroadcastReceiver()。我该如何注册？this.registerReceiver() 不起作用，因为它只在活动内部起作用。

如果在线程内使用broadcasereceivers 不是一个好主意，那么解决方案是什么？

这是可以在活动内工作但不能在线程内工作的代码：

```
 headsetReceiver = new BroadcastReceiver() {
        @Override
            public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            Log.i("Broadcast Receiver", action);
            if ((action.compareTo(Intent.ACTION_HEADSET_PLUG)) == 0) // if
                                                                        // the
                                                                        // action
                                                                        // match
                                                                        // a
                                                                        // headset
                                                                        // one
            {
                int headSetState = intent.getIntExtra("state", 0); // get
                                                                    // the
                                                                    // headset
                                                                    // state
                                                                    // property
                int hasMicrophone = intent.getIntExtra("microphone", 0);// get
                                                                        // the
                                                                        // headset
                                                                        // microphone
                                                                        // property
                if ((headSetState == 0) && (hasMicrophone == 0)) // headset
                                                                    // was
                                                                    // unplugged
                                                                    // &
                                                                    // has
                                                                    // no
                                                                    // microphone
                {
                    // do whatever
                }
            }
        }
    };

    this.registerReceiver(headsetReceiver, new IntentFilter(
            Intent.ACTION_HEADSET_PLUG)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:30:31.337

您需要将上下文传递给 Thread 构造函数，然后使用它来注册广播接收器：

```
//this.ctx is passed to the Thread constructor
this.ctx.registerReceiver(headsetReceiver, new IntentFilter(
            Intent.ACTION_HEADSET_PLUG)); 
```

不要忘记在您的线程中的 finally{} 中取消注册您的接收器，否则可能会发生泄漏：

```
finally{
       ctx.unregisterReceiver(headsetReceiver);
} 
```

为了在主线程（例如活动）中更改 UI，您需要设置一个处理程序

# java - Java 类型转换和同时调用方法

> ID：12116489
> 
> 赞同：2
> 
> 时间：2012-08-24T20:52:56.663
> 
> 标签：java

对 Java 非常陌生。

我有一个名为的类`GraphicsObject`和一个`Bug`扩展它的类。

我有一个包含所有 GraphicsObject 的 ArrayList：

```
private ArrayList<GraphicsObject> gc = new ArrayList(); 
```

然后我有一个调用 updateObjects() 的函数。

```
public void updateObjects(){
        for(int i = 0; i < gc.size(); i++){
            if(gc.get(i).toString().equals("Bug") ){
                (Bug)gc.get(i).moveNorth();
            }
        }
    } 
```

类型转换失败并且 moveNorth() 方法永远不会被识别，因为类 GraphicsObject 没有该方法，只有 Bug 有。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:55:18.627

有几种方法可以解决：

在这种情况下最合适的是

```
 for(int i = 0; i < gc.size(); i++){
        if( gc.get(i) instanceof Bug ){
            ((Bug)(gc.get(i)).moveNorth();
        }
    } 
```

或者，您可以添加一个方法`graphicsObject`并让 Bug 覆盖它

```
 abstract public void defaultAction(); 
```

在错误中

```
 @Override
    public void defaultAction() {
        moveNorth();
    } 
```

然后在你的渲染器中：

```
 for(GraphicsObject go : gc){
        go.defaultAction();
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T20:54:45.007

`gc.get(i)`在调用它的方法之前，您必须首先转换实际的返回值。必须将类型转换放在括号中的原因是 java 中的类型转换运算符[的优先级](http://bmanolov.free.fr/javaoperators.php)低于方法调用。

```
((Bug)gc.get(i)).moveNorth(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T20:55:05.977

你可以通过写来做到这一点

```
((Bug)gc.get(i)).moveNorth(); 
```

但是，无论何时执行此`check then cast`模式，您都可能没有正确构建程序。
我建议您改为在您的`GraphicsObject`类中放置一个抽象方法，让我们调用它`move()`并让`Bug`所有其他`GraphicObject`s 覆盖它。然后你可以删除`if`语句，然后写

```
public void updateObjects(){
    for(int i = 0; i < gc.size(); i++){
        gc.get(i).move();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T21:20:06.667

最简单的解决方案是在向北移动之前简单地确保对象被投射到错误中。

((Bug)gc.get(i)).moveNorth();

备查：

我认为java中的操作顺序是

1.  任何包含在 parentesis 中的东西

2.  方法调用

3.  解析对象的类型

4.  后缀（a++ 或 a--）

5.  乘法/除法

6.  加/减

7.  <、> 或其他关系表达式的实例

8.  等于/不等于 (==, !=)

9.  和/或 (&&, ||)

10.  任何赋值（=、+=、-= 等）

# database - Postgresql：将 distinct/group by 与 ORDER BY RANDOM() 组合

> ID：12116490
> 
> 赞同：2
> 
> 时间：2012-08-24T20:53:00.610
> 
> 标签：database, postgresql, random

我有一张如下表

```
id| page |   text
------------------------
1 | page1 | Hello World
2 | page1 | Foo Bar
3 | page2 | Baz Baz
3 | page2 | Some Text
4 | page3 | Some Other Text 
```

我想选择 2 个随机条目 - 但每个页面只允许在结果中出现一次。

我有

```
SELECT * FROM mydata ORDER BY RANDOM(); 限制 2

```

但是我可以将它与`DISTINCT`或分组结合起来吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:04:55.443

就像是：

```
select id, page, text
from (
  select id, page, text,
         row_number() over (partition by page order by random()) as rn
  from mydata
) 
where rn <= 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T02:16:22.810

与欧文的回答相同，只是有点结构化：[http ://www.sqlfiddle.com/#!1/d3e83/6](http://www.sqlfiddle.com/#!1/d3e83/6)

```
with first_random as
(
  select * from tbl order by random() limit 1
)
, second_random as
(
  select * 
  from tbl 
  where page <> (select page from first_random)
  order by random() limit 1
)
select * from first_random
union
select * from second_random; 
```

与 a_horse_with_no_name 的答案相同，但这是正确的：[http ://www.sqlfiddle.com/#!1/d3e83/12](http://www.sqlfiddle.com/#!1/d3e83/12)

```
select id, page, text, rn
from (
  select id, page, text,
         row_number() over (partition by page order by random()) as rn
  from tbl
) x
where rn = 1
order by random() 
limit 2; 
```

选择后者，执行计划更简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T02:03:59.363

如果您想要：
... 来自基表的总共两行
... 并让**每个*页面*都有相同的机会**出现在示例中，无论它在表中有多少条目：

```
SELECT *
FROM  (
    SELECT DISTINCT ON (page) *
    FROM   mydata
    ORDER  BY page, random() -- pick one random entry per page
    ) x
ORDER BY random() -- pick two random pages
LIMIT 2; 
```

或者，使用窗口函数：

```
WITH x AS (
   SELECT *, row_number() OVER (PARTITION BY page ORDER BY random()) AS rn
   FROM   mydata
   )
SELECT id, page, text
FROM   x
WHERE  rn = 1
ORDER  BY random()
LIMIT  2; 
```

您必须测试哪个更快。
如果你正在处理一个大表并且需要快速的性能，你可以做得更好。[这是一种方法。](https://stackoverflow.com/a/8675160/939860)

* * *

另一方面，如果您想要：
... 表中总共有两行`mydata`
... 并给**每个*条目*（几乎）相等的机会**a 出现在样本中，有效地为具有更多条目的页面提供更好的机会在表中。
机会仍然不是真正相等的 - 根据定义，您的限制增加了稀有页面条目的机会。

```
WITH x AS (
   SELECT *
   FROM   mydata
   ORDER  BY random()
   LIMIT 1
   )
SELECT * FROM x
UNION ALL
(
SELECT m.*
FROM mydata m
   , x
WHERE m.page <> x.page -- assuming page IS NOT NULL
ORDER BY random()
LIMIT 1
); 
```

第二个周围的括号`SELECT`是`UNION`允许单独订购的。
使用 PostgreSQL 9.1 测试。窗口函数需要 8.4 或更高版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T09:43:00.950

这可能有效：

```
SELECT * FROM
  (SELECT * FROM mydata GROUP BY page) t
ORDER BY RANDOM() LIMIT 2 
```

# python - 为什么 Python 将 0 转换为 None 对象？

> ID：12116491
> 
> 赞同：1
> 
> 时间：2012-08-24T20:53:01.550
> 
> 标签：python, nonetype

我不太明白为什么 Python 会自动将函数返回给我的任何 0 转换为 None 对象。我已经用几乎所有的通用语言进行了编程，但我以前从未遇到过这种情况。我希望如果我在结果中设置 0，我会从函数中得到 0。

谁能解释一下为什么 Python 会这样做？

编辑：

为了提供更多信息，我们有一个 C++ 类的包装器，返回值类型是一个 void 指针。所以如果它返回一个值为 0 的整数，它会给我一个 None 类型。这对任何人都有意义吗？

我只是 Python 的新手，并试图弄清楚我何时可能期望 None 类型而不是返回值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T20:58:03.180

> 我们有一个 C++ 类的包装器，返回值类型是一个 void 指针。所以如果它返回一个值为 0 的整数，它会给我一个 None 类型

0 是`NULL`C++ 中指针的值（尽管您应该将其称为`NULL`）。

如果你有一个 C++ 函数返回`void*`类型并且你 return `0`，那么你实际上是在返回`NULL`，因此你`None`在 Python 中返回。

您可能对这个问题感兴趣：[C++ 中的指针是否使用 NULL 或 0（零）？](https://stackoverflow.com/q/176989/372643)（参见`nullptr`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T20:56:34.817

只是一个疯狂的猜测，但如果你正在做这样的事情：

```
def gives_none()
    #does stuff
    0 
```

你没有意识到 python 需要一个明确的 return 语句。虽然有些语言会在这里返回零，但这不是 Python 的工作方式。如果没有明确的 return 语句，您的函数将返回`None`。尝试：

```
def works():
    #does stuff
    return 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T20:57:23.207

Python 不像 Java 那样强制执行返回类型，因此实际上“很容易”忘记在函数末尾添加 return 语句。这将导致函数返回 None。

# shopify - Shopify gem：有没有办法检索商店的服务条款？

> ID：12116496
> 
> 赞同：3
> 
> 时间：2012-08-24T20:53:19.933
> 
> 标签：shopify

我查看[了文档页面](http://api.shopify.com/shop.html)，但是当您通过 API 加载商店时，服务条款似乎没有回来。有可能找回这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T00:48:11.887

不幸的是，没有用于此的 API 端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-05T08:17:07.527

现在有一个[策略 API](https://help.shopify.com/api/reference/policy)，您可以使用它来检索商店服务条款和[其他策略。](https://help.shopify.com/manual/sell-online/checkout-settings/refund-privacy-tos)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-24T21:25:41.723

有趣的。由于服务条款基本上是分配给商家商店的文本，您希望它对它们进行 CRUD 吗？

现在 Shopify 为此类事情提供了生成器，因此比以往任何时候都更容易合法化。你也喜欢这个？

# xml - clojure xml 过滤/使用 data.zip 搜索总是返回空

> ID：12116497
> 
> 赞同：1
> 
> 时间：2012-08-24T20:53:23.310
> 
> 标签：xml, clojure

我是 clojure 的新手，需要解析一些 XML。[其他 SO](https://stackoverflow.com/questions/6469971/parsing-xml-in-clojure/6471118) [问题](https://stackoverflow.com/questions/11537923/searching-xml-in-clojure)将我指向[data.zip](https://github.com/clojure/data.zip)（尽管大多数仍然指向旧的 clojure-contrib.zip）。我想做的就是收集一组标签，相当于`//Foo`. 但是，虽然我可以解析 xml，但我的所有匹配项都是空的。

出于想法，我决定将[部分测试代码从 data.zip 复制](https://github.com/clojure/data.zip/blob/master/src/test/clojure/clojure/data/zip/xml_test.clj)到一个独立的 clj 文件中。当然这应该有效：

```
(ns test.xmltest
  (:require [clojure.xml :as xml]
            [clojure.zip :as zip]
            )
  (:use clojure.pprint)
  (:use clojure.data.zip.xml)

)

(defn parse-str [s]
    (zip/xml-zip (xml/parse (new org.xml.sax.InputSource
                            (new java.io.StringReader s)))))

(def atom1 (parse-str "<?xml version='1.0' encoding='UTF-8'?>
                      <feed xmlns='http://www.w3.org/2005/Atom'>
                        <id>tag:blogger.com,1999:blog-28403206</id>
                        <updated>2008-02-14T08:00:58.567-08:00</updated>
                        <title type='text'>n01senet</title>
                        <link rel='alternate' type='text/html' href='http://n01senet.blogspot.com/'/>
                        <entry>
                          <id>1</id>
                          <published>2008-02-13</published>
                          <title type='text'>clojure is the best lisp yet</title>
                          <author><name>Chouser</name></author>
                        </entry>
                        <entry>
                          <id>2</id>
                          <published>2008-02-07</published>
                          <title type='text'>experimenting with vnc</title>
                          <author><name>agriffis</name></author>
                        </entry>
                      </feed>
                      "))

(defn -main []
  (pprint atom1)
  (xml-> atom1 :title :text)
) 
```

`()`然而，虽然漂亮的打印输出看起来不错，但无论我输入什么，实际匹配结果始终是。但是，我看不出这段代码和[测试文件中的代码（第 42 行）](https://github.com/clojure/data.zip/blob/master/src/test/clojure/clojure/data/zip/xml_test.clj)有什么区别。但我一定是错过了什么。

我正在运行 clojure 1.4，leiningen 2，不应该做任何花哨的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:16:29.960

才意识到问题。非常愚蠢的错字，最后一行应该是`text`，不是`:text`。

# php - JQuery Ajax Tagit Array 到 PHP 返回 [object Object]

> ID：12116498
> 
> 赞同：1
> 
> 时间：2012-08-24T20:53:32.267
> 
> 标签：php, javascript, jquery, ajax, arrays

我试图在我的网站上实现 Tagit，但我无法让标签数组以我希望的方式运行...

我用谷歌搜索并尝试了很多不同的东西，但无法让它工作。

这是我的 JavaScript 函数：

```
function saveSkillTags( tags ) {
$.ajax({
  type: "POST",
  dataType: "json",
traditional: true,
  url: "/../includes/ajaxController.php",
  data: {actionCommand : "SAVE_SKILL_TAGS", tags : tags }
}).done(function( res ) {
    console.debug('klar');
});
} 
```

Console.debug 向我展示了“tags”数组如下所示：

```
[Object { label="php",  value="php",  element=[1],  mer...}, Object { label="ajax",  value="ajax",  element=[1],  mer...}, Object { label="javascript",  value="javascript",  element=[1],  mer...}, Object { label="jquery",  value="jquery",  element=[1],  mer...}] 
```

它发布到我的 ajaxController 有这个代码：

```
if( $actionCommand == 'SAVE_SKILL_TAGS' ) {
require_once( dirname( __FILE__ ).'/../classes/stuff.class.php' );
$list = new UserStuff();
$list->saveSkillTags( $utility->getUserId(), $_POST['tags'] );
} 
```

所以，到目前为止一切顺利...

然后在 stuff.class.php 我有函数“saveSkillTags”。这就是问题所在...我尝试对json进行编码和解码，并在没有json的情况下尝试了它，但是我无法正常工作...这是函数：

```
function saveSkillTags( $userId, $tags ) {
    $dbCon = new DBConnection();
    //$tags = json_decode($tags);
    error_log($tags);
    foreach ( $tags as $tag => $value ) {
        $skillTag = $dbCon->escape( $value );
        $query = "INSERT INTO skilltag SET ";
        $query .= "User_fk=".$userId;
        $query .= ", TagName='".$skillTag."'";
        $dbCon->execute( $query );
        error_log($query);
    }

    mysql_close();
    echo 'true';
} 
```

如您所见，我 error_log $tags。

当我运行这个设置时，我得到了两个错误。第一个是 $tags var，第二个是生成的。

```
[24-Aug-2012 22:28:35] [object Object]

[24-Aug-2012 22:28:35] PHP Warning:  Invalid argument supplied for foreach() in C:\Users\...\classes\stuff.class.php on line 103 
```

我现在已经摆弄了几个小时，并开始严重怀疑我的编程技能......

请帮助我回到正轨，即使是提示也将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:51:01.237

您需要做的是将内部数据`tags`作为 JSON 传递 - 目前它正在发布一个对象。为了做到这一点，使用`JSON.stringify()`

```
$.ajax({
  type: "POST",
  dataType: "json",
traditional: true,
  url: "test.php",
  data: {actionCommand : "SAVE_SKILL_TAGS", tags : JSON.stringify(tags) }
}).done(function( res ) {
    alert(res);
});
}); 
```

`JSON.stringify`在大多数现代浏览器中都可用（但在某些较旧的浏览器中可能不可用）。基本上，它需要一个 Javascript 对象并将其转换为 JSON 字符串。请注意，在字符串化时，它可能会转义引号和内容，以确保生成的 JSON 有效。

因此，在 PHP 脚本中，如果您执行 a `print_r($_POST['tags'])`，您应该会看到 JSON 的外观，然后您可以相应地调整您的代码。

**更新**

尝试以下 foreach 循环：

```
foreach ( $tags as $tag => $value ) 
{ 
    $skillTag = $value->value; 
    $query = "INSERT INTO skilltag (User_fk, TagName) values ('".$userId."','".$skillTag."')"; 
    $dbCon->execute( $query ); 
} 
```

# build - 使用 RTC Jazz 构建引擎的组件加载规则时出现“意外行”异常

> ID：12116499
> 
> 赞同：1
> 
> 时间：2012-08-24T20:53:37.070
> 
> 标签：build, rtc, jazz, rational-team-concert, ibm-jazz

我在 RTC 中有一个名为 MyComponent 的组件，其文件夹结构如下：

```
/MyProject
/MyProject/TestFile.txt
/MyProject/Folder1
/MyProject/Folder1/loadrules.txt
/MyProject/Folder1/TestFile2.txt 
```

这就是我`loadrules.txt`文件中的内容::

```
versionableName=/MyProject/TestFile.txt 
```

我已`loadrules.txt`在此组件的构建定义中将该文件指定为组件加载规则，但是当构建运行时，当它尝试获取文件时出现以下异常：

```
com.ibm.team.repository.common.TeamRepositoryException: Unexpected line "versionableName=/MyProject/TestFile.txt" encountered in build load rules for component "MyComponent"
    at com.ibm.team.filesystem.client.internal.load.LoadRule.getRules(LoadRule.java:176)
    at com.ibm.team.filesystem.client.internal.load.LoadRule.addLoadRules(LoadRule.java:101)
    at com.ibm.team.build.internal.scm.ComponentLoadRules.getLoadRules(ComponentLoadRules.java:134)
    at com.ibm.team.build.internal.engine.JazzScmPreBuildParticipant.preBuild(JazzScmPreBuildParticipant.java:235)
    at com.ibm.team.build.internal.engine.BuildLoop.invokePreBuildParticipants(BuildLoop.java:844)
    at com.ibm.team.build.internal.engine.BuildLoop$2.run(BuildLoop.java:650)
    at java.lang.Thread.run(Thread.java:662) 
```

知道我做错了什么吗？我已经尝试按照[此处](http://pic.dhe.ibm.com/infocenter/clmhelp/v3r0/index.jsp?topic=/com.ibm.team.build.doc/topics/r_scm_build_loadrules.html)的示例进行操作，但我不知道为什么它对我不起作用。不管我在`loadrules.txt`文件中放了什么（无/空字符串、随机垃圾文本等），我仍然会在文件的第一行得到这个异常。

这是在 RTC 3.0 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:51:52.563

这种错误很可能是编码问题。

一种测试方法是`loadrules.txt`通过 scm 命令行界面创建，详见“[参考`>`源代码控制命令行参考`>` `scm` `>` `create`](https://jazz.net/help-dev/clm/topic/com.ibm.team.scm.doc/topics/create_loadrules.html?resultof=%22load%20rules%22)”

```
 scm create loadrules [options] 
```

[OP holic87](https://stackoverflow.com/users/318287/holic87)证实：

> 我刚刚使用 Notepad++ 重新创建了文本文件，它现在按预期工作。

# python - 如何在 URL 中有多个获取参数？

> ID：12116504
> 
> 赞同：1
> 
> 时间：2012-08-24T20:54:13.750
> 
> 标签：python, django, url, get, request

我正在使用 Django 创建一个网站，在一部分中，我需要在 url 中有两个获取请求 - 一个称为“搜索”，一个称为“页面”。我试过以下 -

```
return HttpResponseRedirect('/explore/?search=test/?page=1') 
```

但是，'/?page=1' 被包含在搜索中，这把它搞砸了。有什么方法可以将它们保持为两个不同的，还是我必须将它们融合为一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:09:52.240

像这样做：

```
return HttpResponseRedirect('/explore/?search=test&page=1') 
```

并且鉴于您可以将这两个参数获取为：

```
search = request.GET.get('search')
page = request.GET.get('page') 
```

# javascript - 等到一个带有动画的函数完成，直到运行另一个函数

> ID：12116505
> 
> 赞同：70
> 
> 时间：2012-08-24T20:54:16.057
> 
> 标签：javascript, jquery, callback

我遇到了正常（**非 ajax**）函数的问题，每个函数都包含大量**动画**。目前我只是有一个`setTimeout`功能之间，但这并不完美，因为没有浏览器/计算机是相同的。

**附加说明：它们都有单独的动画/等碰撞。**

我不能简单地将一个放在另一个的回调函数中

```
// multiple dom animations / etc
FunctionOne();

// What I -was- doing to wait till running the next function filled
// with animations, etc

setTimeout(function () { 
    FunctionTwo(); // other dom animations (some triggering on previous ones)
}, 1000); 
```

无论如何，在 js/jQuery 中是否有：

```
// Pseudo-code
-do FunctionOne()
-when finished :: run -> FunctionTwo() 
```

我知道`$.when()`& `$.done()`，但那些是用于 AJAX 的......

* * *

*   **我的更新解决方案**

jQuery 有一个公开的变量（由于某种原因没有在 jQuery 文档中的任何地方列出），称为 $.timers，它保存当前正在发生的动画数组。

```
function animationsTest (callback) {
    // Test if ANY/ALL page animations are currently active

    var testAnimationInterval = setInterval(function () {
        if (! $.timers.length) { // any page animations finished
            clearInterval(testAnimationInterval);
            callback();
        }
    }, 25);
}; 
```

基本用法：

```
// run some function with animations etc    
functionWithAnimations();

animationsTest(function () { // <-- this will run once all the above animations are finished

    // your callback (things to do after all animations are done)
    runNextAnimations();

}); 
```

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-27T10:20:46.950

你可以使用 jQuery 的[`$.Deferred`](http://api.jquery.com/category/deferred-object/)

```
var FunctionOne = function () {
  // create a deferred object
  var r = $.Deferred();

  // do whatever you want (e.g. ajax/animations other asyc tasks)

  setTimeout(function () {
    // and call `resolve` on the deferred object, once you're done
    r.resolve();
  }, 2500);

  // return the deferred object
  return r;
};

// define FunctionTwo as needed
var FunctionTwo = function () {
  console.log('FunctionTwo');
};

// call FunctionOne and use the `done` method
// with `FunctionTwo` as it's parameter
FunctionOne().done(FunctionTwo); 
```

您还可以将多个延迟打包在一起：

```
var FunctionOne = function () {
  var
    a = $.Deferred(),
    b = $.Deferred();

  // some fake asyc task
  setTimeout(function () {
    console.log('a done');
    a.resolve();
  }, Math.random() * 4000);

  // some other fake asyc task
  setTimeout(function () {
    console.log('b done');
    b.resolve();
  }, Math.random() * 4000);

  return $.Deferred(function (def) {
    $.when(a, b).done(function () {
      def.resolve();
    });
  });
}; 
```

[http://jsfiddle.net/p22dK/](http://jsfiddle.net/p22dK/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-21T15:29:42.033

在第一个函数的末尾添加以下内容

```
return $.Deferred().resolve(); 
```

像这样调用这两个函数

```
functionOne().done(functionTwo); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T02:47:14.813

随着 Yoshi 的回答，我发现了另一个非常简单（回调类型）的动画解决方案。

**jQuery 有一个名为$.timers**的公开变量（由于某种原因未在 jQuery 文档的任何地方列出），它保存当前正在发生的动画数组。

```
function animationsTest (callback) {
    // Test if ANY/ALL page animations are currently active

    var testAnimationInterval = setInterval(function () {
        if (! $.timers.length) { // any page animations finished
            clearInterval(testAnimationInterval);
            callback();
        }
    }, 25);
}; 
```

**基本用法：**

```
functionOne(); // one with animations

animationsTest(functionTwo); 
```

希望这可以帮助一些人！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-23T06:52:44.963

## 这个答案使用标准[`promises`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise)的 JavaScript 特性`ECMAScript 6`。如果您的目标平台不支持`promises`，请使用 PromiseJs 对其进行[polyfill](https://www.promisejs.org/)。

您可以在动画调用中获取`Deferred`jQuery 为动画创建的对象。`.promise()`将这些封装`Deferreds`到[ES6`Promises`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise)中会产生比使用计时器更简洁的代码。

您也可以`Deferreds`直接使用，但通常不鼓励这样做，因为它们不遵循 Promises/A+ 规范。

生成的代码如下所示：

```
var p1 = Promise.resolve($('#Content').animate({ opacity: 0.5 }, { duration: 500, queue: false }).promise());
var p2 = Promise.resolve($('#Content').animate({ marginLeft: "-100px" }, { duration: 2000, queue: false }).promise());
Promise.all([p1, p2]).then(function () {
    return $('#Content').animate({ width: 0 }, { duration: 500, queue: false }).promise();
}); 
```

请注意，中的函数`Promise.all()`返回承诺。这就是魔法发生的地方。如果在`then`调用中返回了一个 Promise，则下一个`then`调用将等待该 Promise 在执行之前解决。

jQuery 为每个元素使用一个动画队列。所以同一元素上的动画是同步执行的。在这种情况下，您根本不必使用 Promise！

我禁用了 jQuery 动画队列来演示它如何与 Promise 一起工作。

`Promise.all()`接受一组 promise 并创建一个新`Promise`的，在数组中的所有 promise 完成后完成。

`Promise.race()`还接受一系列承诺，但在第一个完成后立即`Promise`完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T20:59:07.223

这就是你的意思吗：http: [//jsfiddle.net/LF75a/](http://jsfiddle.net/LF75a/)

您将让一个函数触发下一个函数，依此类推，即添加另一个函数调用，然后`functionONe`在其底部添加您的函数。

如果我错过了什么，请让我知道，希望它适合原因`:)`

**或者**这个：[在前一个函数完成后调用一个函数](https://stackoverflow.com/questions/5000415/javascript-jquery-call-a-function-after-previous-function-is-complete)

**代码：**

```
function hulk()
{
  // do some stuff...
}
function simpsons()
{
  // do some stuff...
  hulk();
}
function thor()
{
  // do some stuff...
  simpsons();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-30T19:45:54.977

**ECMAScript 6 更新**

这使用了 JavaScript 的一个新特性，称为 Promises

functionOne().then(functionTwo);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-04T06:21:02.257

您可以通过回调函数来完成。

```
$('a.button').click(function(){
    if (condition == 'true'){
        function1(someVariable, function() {
          function2(someOtherVariable);
        });
    }
    else {
        doThis(someVariable);
    }
}); 
```

function function1(param, callback) { ...做一些事情 callback(); }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-18T12:28:14.667

这是 n 调用（递归函数）的解决方案。 [https://jsfiddle.net/mathew11/5f3mu0f4/7/](https://jsfiddle.net/mathew11/5f3mu0f4/7/)

```
function myFunction(array){
var r = $.Deferred();

if(array.length == 0){
    r.resolve();
    return r;
}

var element = array.shift();
// async task 
timer = setTimeout(function(){
    $("a").text($("a").text()+ " " + element);
    var resolving = function(){
        r.resolve();
    }

    myFunction(array).done(resolving);

 }, 500);

return r;
}

//Starting the function
var myArray = ["Hi", "that's", "just", "a", "test"];
var alerting = function (){window.alert("finished!")};
myFunction(myArray).done(alerting); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-19T05:09:14.327

您可以使用 javascript`Promise`并`async/await`实现函数的同步调用。

假设您想以`n`同步方式执行多个存储在数组中的函数，这是我的解决方案。

```
async function executeActionQueue(funArray) {
  var length = funArray.length;
  for(var i = 0; i < length; i++) {
    await executeFun(funArray[i]);
  }
};

function executeFun(fun) {
  return new Promise((resolve, reject) => {

    // Execute required function here

    fun()
      .then((data) => {
        // do required with data 
        resolve(true);
      })
      .catch((error) => {
      // handle error
        resolve(true);
      });
  })
};

executeActionQueue(funArray);
```

# shopify - 使用 Shopify API 获取当前产品 ID 以进行 Javascript API 调用

> ID：12116507
> 
> 赞同：9
> 
> 时间：2012-08-24T20:54:20.780
> 
> 标签：shopify

我正在开发一个 Shopify 应用程序，该应用程序使用适用于 Shopify 的 DaisyAPI 动态图像服务。为了正确调用 Daisy API，我需要知道客户正在查看什么产品。看起来，为了可靠地做到这一点，我需要操纵他们的 product.liquid 主题来插入一个包含产品 ID 的隐藏值，以便 Jquery 可以获取该值并将其插入到 API 调用中。

以 jQuery 可以可靠地找到它的方式确保每个产品页面都包含产品 ID 的最佳方法是什么？我是否忽略了一些明显的东西？

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T21:39:35.883

另一种选择是使用 Ajax API 来请求产品。你知道你在一个产品页面上简单地向相同的 URL 发出请求并附加 .json。然后，您将获得产品的 json 表示形式，您可以随心所欲地做任何事情。

为了让你的js进入主题，你可以使用一个脚本标签，它将js从你的服务器加载到商店。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-24T21:11:10.890

您缺少一个非常明显且很酷的液体过滤器。

在 Liquid 中，将 Object 抽取为 JSON。

```
var p = {{ product | json }}; 
```

然后去城里……没有这个概念，你就不能在客户身上走得太远。获取 JSON 人.. 获取 JSON...

# c# - 如何从.Net中删除cookie

> ID：12116511
> 
> 赞同：38
> 
> 时间：2012-08-24T20:54:30.087
> 
> 标签：c#, .net, cookies

> **可能重复：**
> [单击退出时删除 cookie](https://stackoverflow.com/questions/7079565/delete-cookie-on-clicking-sign-out)

我想在用户注销时删除 cookie。

这是我的代码：

```
 if (HttpContext.Current.Request.Cookies["currentUser"] != null)
 {
     DeleteCookie(HttpContext.Current.Request.Cookies["currentUser"]);
 }

       public void DeleteCookie(HttpCookie httpCookie)
        {
            try
            {
                httpCookie.Value = null;
                httpCookie.Expires = DateTime.Now.AddMinutes(-20);
                HttpContext.Current.Request.Cookies.Add(httpCookie);
            }
            catch (Exception ex)
            {
                throw (ex);
            }
        } 
```

但它不起作用。你有什么建议吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-24T21:19:35.050

```
 HttpCookie currentUserCookie = HttpContext.Current.Request.Cookies["currentUser"];
 HttpContext.Current.Response.Cookies.Remove("currentUser");
 currentUserCookie.Expires = DateTime.Now.AddDays(-10);
 currentUserCookie.Value = null;
 HttpContext.Current.Response.SetCookie(currentUserCookie); 
```

有用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-24T20:56:59.703

您应该将`Response's`cookie更改`Expires`为过去的值，而不是添加 cookie：

```
if (Request.Cookies["currentUser"] != null)
{
    Response.Cookies["currentUser"].Expires = DateTime.Now.AddDays(-1);   
} 
```

旁注：而不是`throw ex`你应该只`throw`保留它的堆栈跟踪。[C#：抛出自定义异常最佳实践](https://stackoverflow.com/questions/4761216/c-throwing-custom-exception-best-practices/4761295#4761295)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T20:56:10.017

将 cookie（过期）添加到 HttpContext.Current.Response.Cookies 集合中。请求用于读取服务器发送的 cookie - 响应用于将 cookie 发送回客户端。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T20:57:54.257

也许您可以使用 Response.Cookies.Clear() 或 Response.Cookies.Remove()。

# trigger.io - 如何在 Trigger.io 的原生标签栏中显示徽章？

> ID：12116512
> 
> 赞同：1
> 
> 时间：2012-08-24T20:54:43.633
> 
> 标签：trigger.io

有没有办法在 Trigger.io 的原生标签栏中创建数字徽章？我希望实现这样的目标：

![](../Images/2a354004431dc71ebed6a4d4e6313b87.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:09:42.507

好主意！不，目前不是——当然，你可以在那里有一堆不同的图标，并在计数发生变化时切换按钮，但这并不理想。

我会将它添加到我们的待办事项中。

# python - 蟒蛇 2.7.3 。. . 写入 .jpg/.png 图像文件？

> ID：12116524
> 
> 赞同：6
> 
> 时间：2012-08-24T20:55:15.257
> 
> 标签：python, image, file, text, fwrite

所以我有一个 .jpg/.png 并在下面提供的文本编辑中打开它：

**无论如何我可以将这些奇异符号保存到 Python 中的字符串中，以便稍后将其写入文件以生成图像？**

我试图导入一个包含 beta 符号的字符串，但我收到了一个发送非 ASCII 的错误，所以我假设同样会发生这种情况。

有没有办法解决这个问题？

谢谢

文本编辑中的 Image.png 部分：

![在此处输入图像描述](../Images/f88cf886fda05fe680d5055b4254e87b.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-24T21:02:38.437

您在文本编辑中看到的是一个二进制文件，试图用人类可读的字符来表示它。

只需在 python 中将文件作为二进制文件打开：

```
with open('picture.png', 'rb') as f:
    data = f.read()

with open('picture_out.png', 'wb') as f:
    f.write(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:02:46.150

`rb`您可以通过提供标志以二进制格式读取文件，`open`然后将文件中的内容保存到文本文件中。我不知道这有什么意义，但你去吧

```
# read in image data
fh = open('test.png','rb')
data = fh.read()
fh.close()

# write gobbledigoock to text file
fh = open('test.txt','w')
fh.write(data)
fh.close
fh.close() 
```

# ruby-on-rails - 搜索不存在的记录时返回 ActiveRecord::RecordNotFound

> ID：12116532
> 
> 赞同：0
> 
> 时间：2012-08-24T20:55:56.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gemset

我正在关注[Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/modeling-users#sec-finding_user_objects)。创建用户后，我用`destroy`方法销毁了它，然后我用`find`它来检查它是否仍然存在，我的控制台返回与教程完全相同，但有一些错误。
这是错误图像： ![在此处输入图像描述](../Images/0a96ad9eaf048ebacb0e65e2c66dce73.png)

在这里，我创建了一个名为“abc”的用户，ID：7，然后我销毁并使用它`User.find(7)`来查找用户。

我用 rvm 安装了 rails 并创建了名为 1.9.3@rails3tutorial2endEd 的 gemset。我搜索了但不知道这是什么问题，有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:14:58.267

这很正常。由于记录不再存在，你会得到`ActiveRecord::RecordNotFound`

如果您想返回`nil`。你可以尝试类似的东西

`User.where(:id => 51).exists?`

这将返回`true`或错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:57:22.627

无法找到已销毁的用户，因为它们不再存在。

# jquery - 子元素满足条件时的jquery选择器

> ID：12116544
> 
> 赞同：1
> 
> 时间：2012-08-24T20:56:52.097
> 
> 标签：jquery

我有以下代码：

```
<a href="#" class="btn">
<i class="icon-thumbs-up"></i>
</a> 
```

我需要为以下内容编写一个 jQuery 选择器：

每当单击其中包含 class='icon-thumbs-up' 标记的锚点时，然后...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:59:12.060

只需使用[.has()](http://api.jquery.com/has/)方法

```
$('a').has('.icon-thumbs-up').click(){ // <-- all anchor that has descendant with class .icon-thumbs-up
     // code here
}); 
```

如果元素被动态更改/添加..您可以使用委托

```
$('body').on('click','a', function(){
     if($(this).has(".icon-thumbs-up")){
         //code here
     }
}); 
```

替换`body`为加载 dom 时可用的最近的父级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T20:59:11.293

编辑：

事实证明，有*一个*选择器[`has()`](http://api.jquery.com/has-selector/)可以帮助您实现目标：

```
$('body').on("click", "a:has(.icon-thumbs-up)", function(){
      // do something
}); 
```

# python - 构建 Web 服务以制作页面截图

> ID：12116546
> 
> 赞同：0
> 
> 时间：2012-08-24T20:57:11.573
> 
> 标签：python, apache, webkit, gtk

我正在构建一个在线服务，可以制作网页截图并将其像图像一样返回给用户。这个怎么运作：

1）我为 X 服务器创建虚拟帧缓冲区 - 进一步不要创建真正的窗口

2）在环境变量中注意要使用什么显示

3）创建子进程（否则前一点不会生效）

4) 在子进程中创建 webkit.WebView()，“显示”窗口并加载网页

5）当我收到有关页面已完全加载的通知时-我制作屏幕截图并将其保存到文件中（仅在项目的这一步中，也-如何将其返回到用户的浏览器？我知道`Content type: image/png`，但更进一步-gtk。 gdk.Pixbuf.save(stdout_file_name)?)

**所以！问题！**如果我从控制台运行它`python parent.cgi`- 一切都很完美，但如果我在 Web 浏览器中打开`parent.cgi`（服务器运行`apache2`） - 然后在*真正的浏览器*页面中尝试无限加载，并且在服务器上的进程中我看到`Xvfb`出现并加上三个（显然是和正确）`python`过程：

```
python return_picture.cgi
python /home/argon/www/wool/cgi-bin/parent.cgi
bash/sh -c python return_picture.cgi 
```

**编码：**

**父.cgi：**

```
#! /usr/bin/env python
# -*- coding: utf-8 -*-

import gtk,webkit,gobject,sys,os,time,subprocess,logging
import cgitb,cgi
import signal
cgitb.enable()

logging.basicConfig(format = u'%(levelname)-8s [%(asctime)s] %(message)s', level = logging.INFO, filename = u'mylog.log')
logging.critical('ONE MORE TIME')
print "Content-Type: text/html;charset=utf-8"
print '' #it is importantly required

class writer(object):
    def write(self, data):
        logging.critical(data)

sys.stdout = writer()
sys.stderr = writer()
class XServer():
    def __init__(self, silence_xvfb=True, display='1', screen='0', xvfb_timeout=3):
        self.pidfile = '/tmp/.X%s-lock' % display
        redirect = '> /dev/null 2>&1'
        redirect = ''
        if not silence_xvfb:
            redirect = ''
        cmd = ' '.join(['Xvfb', ':'+display, '-screen', screen, '1600x1200x24', redirect])
        if(os.path.isfile(self.pidfile)):
            self._kill_xvfb()
        #os.system(cmd+' &')
        subprocess.Popen(cmd+' &', shell=True) #works througth filenodes thats why it is impossible to redirect to log - overriding of file.write() does not make sense
        print 'XVFB STARTED'
        self.xvfb = True
        start = time.time()
        while(True):
            diff = time.time() - start
            if(diff > xvfb_timeout):
                raise SystemError("Timed-Out waiting for Xvfb to start - {0} sec".format(xvfb_timeout))
            if(os.path.isfile(self.pidfile)):
                break
            else:
                time.sleep(0.05)

        os.putenv('DISPLAY', ':%s' % display)

    def _kill_xvfb(self):
        pid = int(open(self.pidfile).read().strip())
        os.kill(pid, signal.SIGINT)
        print 'KILLED'

    def __del__(self):
        # Kill the frame buffer
        if(self.xvfb):
            self._kill_xvfb()

xserver = XServer()

logging.debug('lets create child')
child = subprocess.Popen("python return_picture.cgi",shell=True,stdout=subprocess.PIPE)
s=child.stdout.readline()
print 'there again' 
```

**return_picture.cgi:**

```
#! /usr/bin/env python
# -*- coding: utf-8 -*-

from blessings import Terminal
import gtk,webkit,gobject,sys,os,time,signal,logging
import cgitb,cgi

cgitb.enable()
t = Terminal()
logging.basicConfig(format = u'%(levelname)-8s [%(asctime)s] %(message)s', level = logging.DEBUG, filename = u'mylog.log')

class writer(object):
    def write(self, data):
        logging.critical(data)

sys.stdout = writer()
sys.stderr = writer()
logging.debug('IN CHILD')
#print "Content-Type: image/png"
#print "Content-Type: text/html;charset=utf-8"
#print '' #it is importantly required
#print 'hello'
web=webkit.WebView()
win=gtk.Window()
index = 0
finished = False
def finished_cb(web_view,sig,res):
    global finished
    global index
    index += 1
    #print index,': ',
    status = web_view.get_property("load-status").value_name
    logging.debug(str(index)+': '+status)
    if "FINISH" in status and not finished:
        finished = True
        gobject.timeout_add(500,drawWindow)
        print 'timeout'
        return

sig2= "resource-load-finished"
web.connect(sig2, finished_cb)
url = 'http://google.com/'
web.open(url)

win.add(web)

def drawWindow():
    width, height = win.get_size()
    pixbuf = gtk.gdk.Pixbuf(gtk.gdk.COLORSPACE_RGB, False, 8, width, height)

    screenshot = pixbuf.get_from_drawable(win.window, win.get_colormap(), 
                                          0, 0, 0, 0, width, height)
    ret = screenshot.subpixbuf(0,0,300,20)
    ret = screenshot
    stdot_filename = os.readlink('/proc/self/fd/0') 
    print stdot_filename
    #screenshot.save(stdot_filename, 'png')

    gtk.main_quit()
    screenshot.save('screenshot.png', 'png')
    print 'screenshot saved'
win.show_all()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:24:34.610

您应该将屏幕截图请求与其生成分离。

让网页插入要截取屏幕截图的 URL 到队列中。有一个进程将项目从该队列中拉出并运行屏幕截图生成脚本。

这样，Web 浏览器就不会等待屏幕截图进程运行（无论如何都可能会失败），您可以轻松处理重复请求，并且您不会压倒您的服务器启动更多的 WebKit 实例，而不是同时运行.

这就是我在[http://bookmarkly.com上的做法](http://bookmarkly.com)

# javascript - Firefox 中的 HTML 5 拖放无法按预期工作

> ID：12116548
> 
> 赞同：3
> 
> 时间：2012-08-24T20:57:15.890
> 
> 标签：javascript, html, file, firefox, drag-and-drop

我在 JS 和 HTML 5 中实现了一个文件处理器，它在 Chome 中按预期工作，但在 Firefox 中没有。

这是jsfiddle：http: [//jsfiddle.net/vapocalypse/G9QbX/](http://jsfiddle.net/vapocalypse/G9QbX/)

在 Firefox 中，drop 事件被转发到浏览器，浏览器打开文件，而不是由我的脚本处理。它的行为就好像我在一个空选项卡上放了一些东西。

我究竟做错了什么？我尝试使用 getElementById 将 jQuery 更改为本机 DOM 并覆盖 ondrop 方法，但结果相同......

谢谢，阿波克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T22:08:43.240

据我所知，您的基本问题是您没有取消`dragover`您尝试捕获`drop`事件的元素上的事件。在这种情况下，该`drop`事件被忽略。这是我添加的代码：

```
$('#topDiv').bind("dragenter dragover", function(e) {
    e.preventDefault();
    return false;
}); 
```

我还删除了`$(document).ready`您的代码表单，只是将 jsFiddle 设置为运行所有 JS onDomReady，但我认为这没有太大区别。 [这是示例](http://jsfiddle.net/robertc/G9QbX/76/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T22:02:01.693

好吧，请参阅[http://jsfiddle.net/G9QbX/75/](http://jsfiddle.net/G9QbX/75/)。它基于您的示例。不知道为什么，但是拖动事件不是通过 FF14 中的 $.bind 或 addEventListener 函数来实现的。这个例子很脏，但它有效。如果我找到更好的解决方案，我会写。

# c++ - C++ 中的设置数组

> ID：12116549
> 
> 赞同：9
> 
> 时间：2012-08-24T20:57:16.600
> 
> 标签：c++, arrays, types, settings

我的目标是建立一个数据结构来存储我的应用程序的设置。

在 PHP 中，我只会写...

```
$settings = array(
    "Fullscreen" => true,
    "Width"      => 1680,
    "Height"     => 1050,
    "Title"      => "My Application",
); 
```

现在我尝试在 C++ 中创建一个类似的结构，但它还不能处理不同的数据类型。顺便说一句，如果有更好的方法来存储这些设置数据，请告诉我。

```
struct Setting{ string Key, Value; };

Setting Settings[] = {
    ("Fullscreen", "true"),     // it's acceptable to store the boolean as string
    ("Width", "1680"),          // it's not for integers as I want to use them later
    ("Height", 1050),           // would be nice but of course an error
    ("Title", "My Application") // strings aren't the problem with this implementation
}; 
```

如何为`associative array`with的结构建模`flexible datatypes`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T21:02:28.930

具有不同数据类型的关联数据结构正是`struct`...

```
struct SettingsType
{
    bool Fullscreen;
    int Width;
    int Height;
    std::string Title;
} Settings = { true, 1680, 1050, "My Application" }; 
```

现在，也许您想要某种反射，因为字段名称将出现在配置文件中？就像是：

```
SettingsSerializer x[] = { { "Fullscreen", &SettingsType::Fullscreen },
                           { "Width",      &SettingsType::Width },
                           { "Height",     &SettingsType::Height },
                           { "Title",      &Settings::Title } }; 
```

只要您`SettingsSerializer`根据指向成员的类型提供具有不同行为的重载构造函数，就会到达那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T21:00:38.423

C++ 是一种强类型语言。容器只包含一种类型的对象，因此默认情况下，您尝试做的事情不能仅使用标准 C++ 来完成。

另一方面，您可以使用诸如 boost::variant 或 boost::any 之类的库，它们提供的类型可以容纳多种（或任何）类型中的一种，然后在您的应用程序中使用该类型的容器。

`std::map`您可以使用从设置名称映射到值而不是数组：

```
std::map<std::string, boost::variant<bool,int,std::string> > 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T21:00:41.737

```
#include <map>
#include <string>

std::map<std::string,std::string> settings;

settings.insert("Fullscreen","true");
settings.insert("Width","1680");
settings.insert("Height","1050");
settings.insert("Title","My Application"); 
```

如果您想坚持使用 STL，可能是一种方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T21:03:52.360

一种解决方案可能是定义 ISetting 接口，例如：

```
class ISetting{
public:
  virtual void save( IStream* stream ) = 0;
  virtual ~ISetting(){}
}; 
```

之后，您可以使用地图来存储您的设置：

```
std::map< std::string, ISetting* > settings; 
```

布尔设置的一个示例是：

```
class BooleanSetting : public ISetting{
private:
  bool m_value;
public:
  BooleanSetting(bool value){
    m_value = value
  }

  void save( IStream* stream ) {
    (*stream) << m_value;
  }

  virtual ~BooleanSetting(){}
}; 
```

到底：

```
settings["booleansetting"]=new BooleanSetting(true);
settings["someothersetting"]=new SomeOtherSetting("something"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T21:22:23.547

一种可能的解决方案是创建一个`Settings`看起来像的类

```
class Settings {
    public:
        Settings(std::string filename);

        bool getFullscreen() { return Fullscreen; }
        // ...etc.

    private:
        bool Fullscreen;
        int Width;
        int Height;
        std::string Title;
}; 
```

这假设设置存储在某个文件中。可以实现构造函数以使用您选择的任何格式读取设置。当然，这样做的缺点是您必须修改类以添加任何其他设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T20:58:52.120

要回答您的问题，您可以使用`boost::any`or`boost::variant`来实现您想要的。我认为变体更好地开始。

```
boost::variant<
    std::string,
    int,
    bool
  > SettingVariant;

std::map<std::string, SettingVariant> settings; 
```

为了不回答您的问题，我不建议使用无类型容器。强类型为您提供了一种构建代码的方法，当您做一些细微的错误时，编译器会给您错误。

```
struct ResolutionSettings {
  bool full_screen;
  size_t width;
  size_t height;
  std::string title;
}; 
```

然后只需一个简单的免费功能即可获得默认设置。

```
ResolutionSettings GetDefaultResolutionSettings() {
  ResolutionSettings settings;
  settings.full_screen = true;
  settings.width = 800;
  settings.height = 600;
  settings.title = "My Application';
  return settings;
} 
```

如果您正在从磁盘读取设置，那么这是一个有点不同的问题。我仍然会编写强类型设置结构，并让您的弱类型文件阅读器使用`boost::lexical`强制转换来验证字符串转换是否有效。

```
ResolutionSettings settings;
std::string str = "800";
size_t settings.width = boost::lexical_cast<size_t>(str); 
```

您可以将所有磁盘读取逻辑包装在不与任何其他功能耦合的另一个函数中。

```
ResolutionSettings GetResolutionSettingsFromDisk(); 
```

我认为这是最直接和最容易维护的（特别是如果您对 C++ 不太熟悉）。

# codeigniter - codeigniter：在常量文件中获取 baseurl

> ID：12116553
> 
> 赞同：1
> 
> 时间：2012-08-24T20:57:27.280
> 
> 标签：codeigniter

在我的一个项目中，我想将 HTTP 路径保留在常量文件中，但是当我声明时说 define("STATIC_PATH", base_url().'static/profile_images');

它抛出错误。如何修复它，我知道替代方法，但想将其保存在同一个文件中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:09:12.537

您不能在 PHP 中使用函数声明常量，只允许标量和空值。

标量值是：整数、浮点数、字符串和布尔值。

所以你应该定义你的常量，手动写下 URL。

# codeigniter - 从模型获取数据到控制器

> ID：12116562
> 
> 赞同：0
> 
> 时间：2012-08-24T20:58:06.740
> 
> 标签：codeigniter

我确实有一个问题：我无法将数据从模型传递到控制器你可以看到我的一些代码，请帮助我。这没用！

这是我的模型“mymodel.php”

```
 ....

$query = $this->db->query("SELECT * FROM `rand` WHERE `used` = 0 LIMIT 0, 1");
    if($query){
    foreach ($query->result() as $row);
    }
    $t = "EXAMPLE/{$row->code}";
    function wandad() {
        return $t;
    }
..... 
```

这是我的控制器 mycont.php

```
 ...
 $this->load->model('mymodel');

$data['new'] = $this->Mymodel->wandad();
$this->load->view('myview',$data);
 ... 
```

这是我的观点 myview.php

```
 ....
 echo $new; 
 ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:06:51.807

以下是您的模型中的几个问题

*   你的 Foreach 函数没有做任何事情
*   `$t`与不在同一个**命名空间**中`wandad()`
*   功能 wandad 未定义到您的模型类中

我不确定你想用`wandad()`函数得到什么，但这里有一个模式。

```
function yourFunction()
{
    /* This will return the full query as an array */
    $query = $this->db->query("SELECT * FROM `rand` WHERE `used` = 0 LIMIT 0, 1")->result_array();
    /* Store variable in the same class */
    $this->t = "EXAMPLE/".$query[0]['code'];
/* Close yourFunction() */
}
public function wandad() {
    return $this->t;
} 
```

然后进入你的控制器，改为：

```
$this->load->model('mymodel');
$this->mymodel->yourFunction();
$data['new'] = $this->mymodel->wandad();
$this->load->view('myview',$data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T09:36:42.297

显然你的模型写得不正确，要纠正这个简单的做法

> 1.) 我在 $t 上设置了一个默认值
> 
> 2.）我把查询>>循环放在内部函数上
> 
> 万达

所以一旦从控制器调用它就可以执行

```
function wandad() {
    $query = $this->db->query("SELECT * FROM `rand` WHERE `used` = 0 LIMIT 0, 1");
    $t = "";
    if($query){

       foreach ($query->result() as $row){
          $t = "EXAMPLE/{$row->code}".'<br>';
       }
     }

    return $t;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T06:28:06.030

@Touki 他的 foreach 实际上做了一些事情。它将使用查询返回的最后一行设置变量 $row。不是最好的方法……但这是一种方法。更好的是在查询中使用限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:29:57.330

您的代码@Ernesto.that 中有一个小错误

```
foreach ($query->result() as $row){
      $t. = "EXAMPLE/{$row->code}".'<br>';
   } 
```

但是你的代码很简单

# php - 意外的 preg_replace 结果

> ID：12116571
> 
> 赞同：0
> 
> 时间：2012-08-24T20:59:10.273
> 
> 标签：php, regex, preg-replace

问候，

我目前正在尝试用“”替换一个 html 标记，但我似乎无法让这个表达式工作。

样本数据：

```
 </span><span class="ni2y">209</span>.<span 
```

预期输出：

```
 </span>.<span 
```

预替换：

```
 $pLineTemp = '</span><span class="ni2y">209</span>.<span';
    $pClassName = 'ni2y';
    $pClassReplace = "(.span class.." . $pClassName . "..\\d+..span.)";
    $pLineTemp = preg_replace($pClassReplace, '', $pLineTemp); 
```

关于我做错了什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T15:26:35.540

n/m，问题在于我如何构建结果字符串，我需要将其从循环中取出，谢谢！

# c# - 反序列化 XML 文件

> ID：12116576
> 
> 赞同：2
> 
> 时间：2012-08-24T20:59:27.113
> 
> 标签：c#, xml, serialization, xml-serialization, deserialization

我有一个包含 4 个不同字符串的 XML 文件，但我无法反序列化该文件。有人可以帮我解决这个问题吗？

我在网上寻找答案，但没有一个有效，我不知道该怎么办。

这是我试图反序列化的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<saveData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<strFolder1>1st Location</strFolder1>
<strFolder2>2nd Location</strFolder2>
<strTabName>newTab0</strTabName>
<strTabText>Main</strTabText>
</saveData> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:08:59.747

```
var ser = new XmlSerializer(typeof(saveData));
var obj = (saveData)ser.Deserialize(stream);

public class saveData
{
    public string strFolder1;
    public string strFolder2;
    public string strTabName;
    public string strTabText;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:16:28.343

我建议查看[XmlReader](http://msdn.microsoft.com/en-us/library/b8a5e1s5)。其他一些方法以不同的方式更容易，但是您可以从 XmlReader 构建任何东西。如：

```
while(rdr.Read())
  if(rdr.NodeType == XmlNodeType.Element)
    switch(rdr.LocalName)
    {
      case "strFolder1":
        strFolder1 = rdr.ReadContentAsString();
        break;
      case "strFolder2":
        strFolder2 = rdr.ReadContentAsString();
        break;
      case "strTabName":
        strTabName = rdr.ReadContentAsString();
        break;
      case "strTabText":
        strTabText = rdr.ReadContentAsString();
        break;
    } 
```

（如果保证订购，我们可以采取一些捷径，我以艰难的方式做到了，以表明艰难的方式并不难）。

在很多情况下，使用 XmlDocument、XmlSerializer 和 XDocument 更容易，但我建议先学习这一点，因为它可以处理所有事情，而且效率永远不会降低。如果您首先学习它，那么更糟糕的是，您做了比必要的工作更多的工作，最终得到比严格必要的更有效的东西（由于对更简单方法的无知，您将进行微优化）。如果您先了解其他人，那么更糟糕的是，您做的工作比必要的要多得多，最终得到的效率比所需的要低得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:13:25.040

```
namespace Cars1
{

    public class saveData
    {
        public string strFolder1;

        public string strFolder2;

        public string strTabName;

        public string strTabText;

    }

    [Serializable]
    class Program
    {
        static void Main(string[] args)
        {
            saveData obj = new saveData();

            FileStream fopen = new FileStream("abc.xml", FileMode.Open);
            XmlSerializer x = new XmlSerializer(obj.GetType());
            StreamReader read_from_xml = new StreamReader(fopen);
            obj = (saveData)x.Deserialize(read_from_xml);

            Console.WriteLine(obj.strFolder1 + "=>" + obj.strFolder2 + "=>" + obj.strTabName+"=>"+obj.strTabText);
            Console.ReadKey();

            fopen.Close();

        }
    }
} 
```

# regex - 修复添加两个额外斜杠的 RewriteRule

> ID：12116579
> 
> 赞同：-1
> 
> 时间：2012-08-24T20:59:46.207
> 
> 标签：regex, apache, mod-rewrite

我想将网络请求从 重定向`example.org`到`www.example.org`。我认为我有正确的规则，但它添加了两个额外的正斜杠：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.org [NC]
RewriteRule ^(.*)$ http://www.example.org/$1 [R=permanent,L] 
```

以上将带我`example.org`从`www.example.org//`

有没有办法去掉那些斜杠？我尝试了以下变体，它去除了那些斜线但会导致重定向循环：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^example\.org [NC]
RewriteRule ^(.*)$ http://www.example.org/$1 [R=permanent,L]
RewriteRule ^(.*)/$ /$1 [L,R=301] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:09:59.827

尝试`RewriteBase /`在`RewriteEngine on`.

如果这样做不行，请将您的规则更改为，`RewriteRule ^/(.*)$ http://www.example.org/$1 [R=301,L]`这样您就不会捕获初始的`/`.

# javascript - 如何获取 extjs 组合框的值？

> ID：12116580
> 
> 赞同：10
> 
> 时间：2012-08-24T20:59:46.700
> 
> 标签：javascript, extjs, extjs4

我有一个组合框的以下代码，如何获取在组合框中选择的值并将该值加载到变量中，然后再使用它。

谢谢

```
Ext.define('Column', {
    extend: 'Ext.data.Model',
    fields: ['data1', 'Data2']
});

var store = Ext.create('Ext.data.Store', {
    model: 'Column',
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url: '/data.xml',
        reader: {
            type: 'xml',
            record: 'result'
        }
    }
});

var simpleCombo = Ext.create('Ext.form.field.ComboBox', {
    store: store,
    displayField: 'data1',
    valueField: 'data1',
    width: 250,
    labelWidth: 120,
    fieldLabel: 'select a value',
    renderTo: 'simpleCombo',
    queryMode: 'local',
    typeAhead: true
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T06:59:07.273

只需使用选择事件

```
var simpleCombo = Ext.create('Ext.form.field.ComboBox', {
            store: store,
            displayField: 'data1',
            valueField: 'data1' ,
            width: 250,
            labelWidth: 120,
            fieldLabel: 'select a value',
            renderTo: 'simpleCombo',
            queryMode: 'local',
            typeAhead: true,
            listeners: { 
               select: function(combo, records) {
                   // note that records are a array of records to be prepared for multiselection
                   // therefore use records[0] to access the selected record
               }
        }); 
```

[API 链接](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-event-select)

***评论中的其他内容：***

看一下组合框的[multiSelect](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-event-select)属性。您将获得由定义的分隔符分隔的所有值，并且 select 事件将为您提供一个包含多个记录的记录数组。请注意， getValue() 只为您提供定义的 displayField，它是一个字符串，而不是记录本身。所以使用 iComboValue[0] 会给你第一个字符。应始终使用选定的事件访问选定的记录。但是您可以将它们存储在一个数组中以供以后使用，并用任何新的选择覆盖它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-26T13:09:46.473

您还可以使用：

```
var iComboValue = simpleCombo.getValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T09:04:47.147

也许你应该试试这个

```
 // to get the combobox selected item outside the combo listener
        simpleCombo.on('change', function (combo, record, index) {

            alert(record);  // to get the selected item

            console.log(record);  // to get the selected item

        }); 
```

# gwt - GWTP + MGWT - 'jar:file:mgwt-1.1.1.jar!/com/googlecode/mgwt/ui/client/theme/MGWTThemeBaseThemeStandardImpl.java' 中的错误

> ID：12116583
> 
> 赞同：0
> 
> 时间：2012-08-24T21:00:06.230
> 
> 标签：gwt, gwtp, mgwt

我正在尝试为移动、桌面和平板电脑的 GWTP+MGWT 项目编写 build.xml。

```
 <javac srcdir="${apt_generated}" destdir="${out.classes.folder}" includeantruntime="true" source="1.6" target="1.6" nowarn="false" debug="true" debuglevel="lines,vars,source" >
        <classpath refid="project.class.path" />
         <compilerarg value="-Xlint"/>
    </javac>
    <javac srcdir="${in.src.folder}" fork="true"   memoryinitialsize="512m" memorymaximumsize="1024m"  includes="**" encoding="utf-8" destdir="${out.classes.folder}" source="1.6" target="1.6" nowarn="false" debug="true" debuglevel="lines,vars,source" includeantruntime="true">
        <classpath refid="project.class.path" />
         <compilerarg value="-Xlint"/>
    </javac>    
    <copy todir="${out.classes.folder}">
        <fileset dir="${in.src.folder}" includes="**/*.class" />
    </copy>
    <delete dir="${in.src.folder}" includes="**/*.class" failonerror="false" /> 
```

该应用程序在开发模式下运行良好，但当我执行“ant gwtc”时看到以下错误 -

```
世界贸易中心：
     [java] 编译模块 com.company.proj.fe.TestApp
     [java] 验证新编译的单元
     [java] 在第一次通过时忽略了 1 个带有编译错误的单元。
     [java] 编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。

     [java] [错误] 'jar:file:/workspace/testapp/war/WEB-INF/lib/ 中的错误
mgwt-1.1.1.jar!/com/googlecode/mgwt/ui/client/theme/
MGWTThemeBaseThemeStandardImpl.java'
     [java] [ERROR] 内部编译器错误
     [java] java.lang.OutOfMemoryError: Java 堆空间
     [java] 在 java.lang.String.toCharArray(String.java:2725)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$CompilationUnitAdapter.getContents(AbstractCompiler.java:105)
     [java] 在 org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:9485)
     [java] 在 org.eclipse.jdt.internal.compiler.parser.Parser.parse(Parser.java:9457)
     [java] 在 org.eclipse.jdt.internal.compiler.parser.Parser.dietParse(Parser.java:8102)
     [java] 在 org.eclipse.jdt.internal.compiler.Compiler.accept(Compiler.java:322)
     [java] 在 org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:131)
     [java] 在 org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getType(LookupEnvironment.java:1090)
     [java] 在 com.google.gwt.dev.javac.JdtCompiler.resolveType(JdtCompiler.java:438)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.resolvePossiblyNestedType(AbstractCompiler.java:292)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.access$500(AbstractCompiler.java:139)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler.resolvePossiblyNestedType(AbstractCompiler.java:625)
     [java] 在 com.google.gwt.dev.jdt.WebModeCompilerFrontEnd.checkRebindResultInstantiable(WebModeCompilerFrontEnd.java:130)
     [java] 在 com.google.gwt.dev.jdt.WebModeCompilerFrontEnd.doFindAdditionalTypesUsingRebinds(WebModeCompilerFrontEnd.java:118)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.process(AbstractCompiler.java:254)
     [java] 在 org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:444)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.compile(AbstractCompiler.java:173)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.compile(AbstractCompiler.java:288)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler$Sandbox$CompilerImpl.access$400(AbstractCompiler.java:139)
     [java] 在 com.google.gwt.dev.jdt.AbstractCompiler.compile(AbstractCompiler.java:588)
     [java] 在 com.google.gwt.dev.jdt.BasicWebModeCompiler.getCompilationUnitDeclarations(BasicWebModeCompiler.java:97)
     [java] 在 com.google.gwt.dev.jdt.WebModeCompilerFrontEnd.getCompilationUnitDeclarations(WebModeCompilerFrontEnd.java:52)
     [java] 在 com.google.gwt.dev.jjs.JavaToJavaScriptCompiler.precompile(JavaToJavaScriptCompiler.java:569)
     [java] 在 com.google.gwt.dev.jjs.JavaScriptCompiler.precompile(JavaScriptCompiler.java:33)
     [java] 在 com.google.gwt.dev.Precompile.precompile(Precompile.java:284)
     [java] 在 com.google.gwt.dev.Precompile.precompile(Precompile.java:233)
     [java] 在 com.google.gwt.dev.Precompile.precompile(Precompile.java:145)
     [java] 在 com.google.gwt.dev.Compiler.run(Compiler.java:232)
     [java] 在 com.google.gwt.dev.Compiler.run(Compiler.java:198)
     [java] 在 com.google.gwt.dev.Compiler$1.run(Compiler.java:170)
     [java] 在 com.google.gwt.dev.CompileTaskRunner.doRun(CompileTaskRunner.java:88)
     [java] 在 com.google.gwt.dev.CompileTaskRunner.runWithApppropriateLogger(CompileTaskRunner.java:82)

```

我添加了 fork="true" memoryinitialsize="512m" memorymaximumsize="1024m"。但这些似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:08:36.727

如果 JRE 的内存很少，我在编译 GWT 应用程序时遇到了一些问题。

尝试增加你的蚂蚁进程的内存。

我的一个 GWT 应用程序只能在 64 位 JVM 中编译。

我用 4g RAM 和 64 位 JVM 编译我的应用程序。

# xcode - 将对象添加到 NSArray

> ID：12116584
> 
> 赞同：0
> 
> 时间：2012-08-24T21:00:07.813
> 
> 标签：xcode, nsarray

```
NSString* title = [rescue objectForKey:@"title"];
NSString* name = [rescue objectForKey:@"name"];

NSMutableArray* listBossF = [[NSMutableArray alloc] initWithObjects:@"Hello %@ %@  I've just arrived"[title, name] ,
                                   @"Hello  %@ %@everything is fine",
                                   @"Hello  %@ %@ are there any news back at the office?",
                                   @"Hello ( %@ %@ i arrived at the hotel" ,
                                   @"Hello %@ %@ I've just arrived at the airport", nil]; 
```

你好，我对 xcode 非常陌生，实际上对一般编程来说，我已经尝试了很长一段时间来将对象添加到数组的特定部分（这就是我不能使用 componentsJoinedByString 的原因）但我有很多麻烦这样做，我通常做的方式谁能告诉我我做错了什么？如果我不能将对象添加到数组的特定部分，任何人都可以给我一个我应该尝试的建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:08:19.127

您可以将对象添加到数组的特定部分，如下所示：

```
[array insertObject:@"Hello" atIndex:1]; // After first object in array 
```

# php - PHP gettext 反向翻译

> ID：12116585
> 
> 赞同：2
> 
> 时间：2012-08-24T21:00:12.680
> 
> 标签：php, gettext

我的问题很简单，我使用 gettext 来翻译 URL，因此我只有 url 字符串的翻译版本。

我想知道是否有一种简单的方法可以从翻译的字符串中获取基本字符串？

我的想法是在每次使用我的`_u($string)`函数时自动将翻译后的名称添加到数据库中，并使用基本字符串为其命名。

我目前拥有的：

```
function _u($string)
{
    if (empty($string))
        return '';
    else
        return dgettext('Urls', $string);
} 
```

我在想什么（伪代码）：

```
function _u($string)
{
    if (empty($string))
        return '';

    $translation = dgettext('Urls', $string);

    MySQL REPLACE INTO ... base = $string, translation = $translation; (translation = primary key)

    return $translation;
}

function url_base($translation)
{
    $row = SELECT ... FROM ... translation = $translation;

    return $base;
} 
```

尽管这似乎不是做到这一点的最佳方法，而且如果在生产中我删除了该`REPLACE`部件，那么我可能会忘记生产中的一两个我可能没有去过的链接。

编辑：我主要寻找的是 gettext 的解析部分。我不需要错过任何可能的 URL，因此如果您有其他解决方案，则需要有一个解析器（基于我正在寻找的内容）。

EDIT2：刚刚添加了另一个难度。我们必须在任何翻译中找到 URL 并将其放回“基本”翻译中，以便系统解析基本语言中的 URL。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T22:24:48.303

`msgunfmt`实际上，我能想到的最直接的方法是通过调用实用程序来解码用于翻译的 .mo 文件。

一旦你有了明文数据库，你就可以将它保存在任何其他类型的数据库中，然后就可以进行反向搜索了。

但也许更好的是，您可以创建额外的域（“ReverseUrlsIT”），将翻译后的 URL 存储为键，并将基值存储为值（假设映射是完全双向的，即！）。

此时，您可以使用`dgettext`从已翻译字符串中恢复基本字符串，前提是您知道已翻译字符串的语言。

**更新**

> 这是使用 gettext 的要点，如果我能找到另一个可以提供帮助的解析器/库/工具，我会随时放弃它

毕竟，`gettext`功能家族只不过是一个密钥库数据库系统，它具有（也许）一个比`printf`, 处理复数和形容词/名词反转更强大的解析器（英语中的*violin virtuoso*变成了*virtuoso di意大利语*的小提琴）。

以增加数据库复杂性（和负载）为代价，您可以构建一个密钥库，利用您方便的任何持久层（`gettext`毕竟是基于文件的）：

```
TABLE LanguageDomain
{
    PRIMARY KEY ldId;
    varchar(?)  ldValue;
}
# e.g.
# 39   it_IT
# 44   en_US
# 01   us_US

TABLE Shorthand
{
    PRIMARY KEY shId;
    varchar(?)  shValue;
}

# e.g.
# 1    CAMERA
# 2    BED

TABLE Translation
{
    KEY t_ldId,
        t_shId;
    varchar(?)  t_Value;   // Or one value for singular form, one for plural...
}

# e.g.
# 44    1    Camera
# 39    1    Macchina fotografica
# 01    1    Camera
# 44    1    Bed
# 39    1    Letto
# 01    1    Bed
# 01  137    Behavior
# 44  137    Behaviour     # "American and English have many things in common..."
# 01  979    Cookie
# 44  979    Biscuit       " "...except of course the language" (O. Wilde)

function translate($string, $arguments = array())
{
    GLOBAL $languageDomain;
    // First recover main string
    SELECT t_Value FROM Translation AS t
        LEFT JOIN LanguageDomain AS l ON (t.ldId = l.ldId AND l.ldValue = :LangDom)
        LEFT JOIN Shorthand      AS s ON (t.t_shId = s.shId AND s.shValue=:String);
    // 
    if (empty($arguments))
        return $Result;
    // Now run replacement of arguments - if any
    $replacements = array();
    foreach($arguments as $n => $argument)
        $replacements["\${$n}"] = translate($argument);
    // Now replace '$1' with translation of first argument, etc.
    return str_replace(array_keys($replacements), array_values($replacements), $Result);
} 
```

这将允许您轻松地再添加一个`languageDomain`，甚至可以运行诸如“哪些英语术语尚未翻译成德语？”之类的查询。（即，将具有英语域 Id`LEFT JOIN`的`Translation`表的子集与具有德语域 Id 的子集结合起来时具有 NULL 值）。

该系统可与 POfile 互操作，如果您需要将翻译外包给使用行业标准工具的人，这一点很重要。但是您可以轻松地将查询直接输出为 TMX 格式，从而消除重复（在某些情况下，这可能会真正降低您的翻译成本 - 一些服务对“奇怪”格式（如 Excel）的输入多收费，或者会因“重复数据删除”而多收费或将对每份副本收取费用，就好像它是原件一样）。

```
<?xml version="1.0" ?>
<tmx version="1.4">
        <header
                creationtool="MySQLgetText"
                creationtoolversion="0.1-20120827"
                datatype="PlainText"
                segtype="sentence"
                adminlang="en-us"
                srclang="EN"
                o-tmf="ABCTransMem">
        </header>
        <body>
                <tu tuid="BED" datatype="plaintext">
                        <tuv xml:lang="en">
                                <seg>bed</seg>
                        </tuv>
                        <tuv xml:lang="it">
                                <seg>letto</seg>
                        </tuv>
                </tu>
                <tu tuid="CAMERA" datatype="plaintext">
                        <tuv xml:lang="en">
                                <seg>camera</seg>
                        </tuv>
                        <tuv xml:lang="it">
                                <seg>macchina fotografica</seg>
                        </tuv>
                </tu>
        </body>
</tmx> 
```

# regex - 替换指定字符的最后一个实例以外的所有实例

> ID：12116586
> 
> 赞同：8
> 
> 时间：2012-08-24T21:00:14.110
> 
> 标签：regex, vb.net

如果我有一个字符串

`10,000kg crane,21`,

我应该如何去除所有逗号，但最后一个得到

`10000kg crane,21`?

我认为这是一个正则表达式问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T21:04:02.440

它可以通过使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)用正则表达式来完成。您想替换后面至少有一个逗号的逗号。此前瞻将失败的唯一逗号是最后一个逗号。

试试这个：

```
s = Regex.Replace(s, ",(?=.*?,)", "") 
```

在线查看它：[ideone](http://ideone.com/1zgzz)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T21:14:49.020

另一种方法，它的执行速度可能比 RegEx 解决方案快得多：

```
Dim s As String = "10,000kg crane,21"
Dim result As String = New StringBuilder(s).Replace(",", String.Empty, 0,
    s.LastIndexOf(","c)).ToString() 
```

要点是它将所有出现的“，”替换为第一个字符和最后一个“，”的索引之间的空字符串。

我做了一些基准测试，分别运行了 1,000,000 次和[建议的 RegEx 解决方案；](https://stackoverflow.com/a/12116625/74757)在我的笔记本电脑上，无需编译 RegEx，此解决方案的速度大约快七 (7) 倍。如果你编译 RegEx，它的速度仍然是原来的两倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:10:11.180

无正则表达式方法：

```
Dim text = "10,000kg crane,21"
Dim parts = text.Split(","c).Reverse
Dim result = String.Join("", parts.Skip(1).Reverse) & "," & parts.First 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:33:51.307

一种更丑陋但有效的替代方法：

```
 Dim strResult As String = Replace(Mid(strTarget, 1, strTarget.LastIndexOf(",")), ",", String.Empty) & _
                              Microsoft.VisualBasic.Right(strTarget, Len(strTarget) - strTarget.LastIndexOf(",")) 
```

# android - ViewPagerIndicator 小部件选项卡中的图像而不是标题文本

> ID：12116587
> 
> 赞同：3
> 
> 时间：2012-08-24T21:00:19.600
> 
> 标签：android, android-viewpager, viewpagerindicator

我是 Android 开发的新手。我设法实现了 ViewPagerIndicator，并想知道是否可以使用图像而不是选项卡标题。如果是，我想知道如何。如果没有，我们还有哪些其他选择？提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T21:17:02.360

Android 支持包中没有可用的内置图像指示器。

话虽如此，您可以：

第 1 步：下载[ViewPagerIndicator 库](http://viewpagerindicator.com/)的源代码。

步骤#2：创建您自己的`PagerIndicator`实现，可能基于库的`TabPageIndicator`，使用`ImageView`而不是`TextView`... 可能通过您`PagerAdapter`实现一些其他接口来公开用于给定选项卡的图像。

步骤#3：使用`PagerIndicator`与库相同的方式，表明您可以使用任何内置的。

# jquery - Win8 App中的灵活网格和多列

> ID：12116593
> 
> 赞同：1
> 
> 时间：2012-08-24T21:01:10.013
> 
> 标签：jquery, windows, css, grid, multiple-columns

我一直在为 Windows 8 创建应用程序的团队。我使用 CSS3 网格来布局页面，这非常简单。但是，我们正在使用来自外部来源的数据填充应用程序的某些区域，因此无法控制导入文本的长度。我们的应用程序从左到右滚动，所以我需要正在填充的网格列来自动调整其宽度并将文本排列成列 - 所以使用 CSS 网格和 CSS 列，都设置为“自动”，应该工作得很好，对吧？

好吧，它没有。我尝试了许多不同的 CSS 组合，但我要么需要给我的 div 一个确定的宽度（如果要导入的内容很短，这将不起作用），或者定义文本可以流入的确定的列数（这不适用于非常短或非常长的内容）。我认为这主要是因为我正在尝试横向构建一个灵活的页面，即使是 Win8 应用程序似乎也对此感到困惑。我想我需要为此找到一个 JS/jQuery 解决方法，但我对 JS/jquery 比较陌生，我不确定我到底要写什么。

当然，如果任何其他 Win8 前端开发人员有这方面的经验，您的见解将不胜感激。

我的 .detailSection 位于其他列的中间，因此它绝对必须根据需要扩展和收缩以适应任何可能填充它的内容。

这是我现在的 CSS 片段。当然，如果我能提供任何其他信息，请告诉我。

```
.advisorDetail {
    height: 100%;
    -ms-grid-columns: 120px 560px 80px auto 80px auto auto;
}
.advisorDetail section[role=main].detailSection {
    -ms-grid-column: 4;
    display: -ms-grid;
    -ms-grid-rows: 24px 20px 1fr;
    -ms-grid-columns: auto;
}
    .advisorDetail section[role=main].detailSection .detailFeed {
        -ms-grid-row: 3;
        column-count: 3;
        column-width: 400px;
        column-gap: 40px;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:16:49.037

您的 CSS 片段显示列数正在定义。根据您的描述，您不想在多列元素上指定`column-count`或。`width`我假设您正在询问如何删除`column-count`并仍然获得您想要的视觉效果。那是对的吗？假设它是...

当多列元素试图确定它应该如何调整自身大小时，它的高度尚未定义。结果，它的大小好像没有高度限制，并且您得到一列文本。如果您`height: 100%`在多列元素上指定**并**确保在调整大小时定义其容器的高度，您应该获得您正在寻找的视觉效果。

例如，假设您的 .detailFeed 元素是 -ms-grid-row-span: 3 （跨越所有行）。由于第三行使用的是小数单位，因此 Grid 需要预先定义其高度，以便知道第三行应该有多大。如果您希望 Grid 元素始终为窗口高度的 100%，您通常会指定`height: 100%`并确保 Grid 的百分比值通过确保其具有非自动高度的祖先（例如设置`height: 100%`在所有树上的元素）。另一种选择是使用视口高度单位（即`height: 100vh`）

如果多列元素所在的网格行都是非自动和非分数的，则不需要预先定义网格的高度，因为网格单元格的高度仍然会被定义。

这是一些示例标记，显示了我所描述的内容。您可以在 IE 10 或应用程序中运行它。您会注意到，当您调整窗口大小时，列数也会随之调整。

```
<!doctype html>
<html>
<head>
<style>
html, body, .advisorDetail, section
{
    height: 100%;
}
.advisorDetail section[role=main].detailSection {
    -ms-grid-column: 4;
    display: -ms-grid;
    -ms-grid-rows: 24px 20px 1fr;
    -ms-grid-columns: auto;
    height: 100%;
}
    .advisorDetail section[role=main].detailSection .detailFeed {
        -ms-grid-row-span: 3;
        column-width: 400px;
        column-gap: 40px;
        height: 100%;
    }
</style>
</head>
<body>
<div class="advisorDetail">
  <section role="main" class="detailSection">
    <div class="detailFeed">
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.
Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.
Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.
Aenean nec lorem. In porttitor. Donec laoreet nonummy augue.
Suspendisse dui purus, scelerisque at, vulputate vitae, pretium mattis, nunc. Mauris eget neque at sem venenatis eleifend. Ut nonummy.
Fusce aliquet pede non pede. Suspendisse dapibus lorem pellentesque magna. Integer nulla.
Donec blandit feugiat ligula. Donec hendrerit, felis et imperdiet euismod, purus ipsum pretium metus, in lacinia nulla nisl eget sapien. Donec ut est in lectus consequat consequat.
Etiam eget dui. Aliquam erat volutpat. Sed at lorem in nunc porta tristique.
Proin nec augue. Quisque aliquam tempor magna. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
Nunc ac magna. Maecenas odio dolor, vulputate vel, auctor ac, accumsan id, felis. Pellentesque cursus sagittis felis.
Pellentesque porttitor, velit lacinia egestas auctor, diam eros tempus arcu, nec vulputate augue magna vel risus. Cras non magna vel ante adipiscing rhoncus. Vivamus a mi.
Morbi neque. Aliquam erat volutpat. Integer ultrices lobortis eros.
Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin semper, ante vitae sollicitudin posuere, metus quam iaculis nibh, vitae scelerisque nunc massa eget pede. Sed velit urna, interdum vel, ultricies vel, faucibus at, quam.
Donec elit est, consectetuer eget, consequat quis, tempus quis, wisi. In in nunc. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos.
Donec ullamcorper fringilla eros. Fusce in sapien eu purus dapibus commodo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
Cras faucibus condimentum odio. Sed ac ligula. Aliquam at eros.
Etiam at ligula et tellus ullamcorper ultrices. In fermentum, lorem non cursus porttitor, diam urna accumsan lacus, sed interdum wisi nibh nec nisl. Ut tincidunt volutpat urna.
Mauris eleifend nulla eget mauris. Sed cursus quam id felis. Curabitur posuere quam vel nibh.
Cras dapibus dapibus nisl. Vestibulum quis dolor a felis congue vehicula. Maecenas pede purus, tristique ac, tempus eget, egestas quis, mauris.
Curabitur non eros. Nullam hendrerit bibendum justo. Fusce iaculis, est quis lacinia pretium, pede metus molestie lacus, at gravida wisi ante at libero.
Quisque ornare placerat risus. Ut molestie magna at mi. Integer aliquet mauris et nibh.
Ut mattis ligula posuere velit. Nunc sagittis. Curabitur varius fringilla nisl.
Duis pretium mi euismod erat. Maecenas id augue. Nam vulputate.
Duis a quam non neque lobortis malesuada. Praesent euismod. Donec nulla augue, venenatis scelerisque, dapibus a, consequat at, leo.
Pellentesque libero lectus, tristique ac, consectetuer sit amet, imperdiet ut, justo. Sed aliquam odio vitae tortor. Proin hendrerit tempus arcu.
In hac habitasse platea dictumst. Suspendisse potenti. Vivamus vitae massa adipiscing est lacinia sodales.
Donec metus massa, mollis vel, tempus placerat, vestibulum condimentum, ligula. Nunc lacus metus, posuere eget, lacinia eu, varius quis, libero. Aliquam nonummy adipiscing augue.
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.
Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.
Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.
    </div>
  </div>
</div>
</body>
</html> 
```

披露：我在从事 Microsoft 实施 CSS 网格的团队中。

# android - Android：如何用手指放出屏幕的ImageView？

> ID：12116607
> 
> 赞同：0
> 
> 时间：2012-08-24T21:02:37.843
> 
> 标签：android, eclipse, android-imageview, ontouchlistener

我正在寻找一种用手指（在任何方向）移动 ImageView 的方法，当 ImageView 移出屏幕时，这个会消失，然后一个新的会出现在屏幕中间。

你知道感谢哪个图书馆我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:20:53.193

它必须是 ImageView 吗？

您可以在画布上绘制位图并根据用户触摸的位置更改其坐标，然后只需检查 x < 0 或 x > canvas.getWidth() 或 y < 0 或 y > canvas.getHeight()

这是其他人的示例： [Touch and drag image in android](https://stackoverflow.com/questions/4255859/touch-and-drag-image-in-android)

# matlab - 在 Matlab 中绘制时间

> ID：12116616
> 
> 赞同：0
> 
> 时间：2012-08-24T21:03:20.503
> 
> 标签：matlab

> **可能重复：**
> [Plottig 数据 - 时间绘图](https://stackoverflow.com/questions/12115534/plottig-data-time-plotting)

我在 MATLAB 中绘制时间有问题；

时间格式：HH:MM:SS.FFF，例如 (10:56:43.428)

如何绘制这个？我尝试使用 "datenum(Time, 'HH:MM:SS.FFF'); 和绘图，然后是 datetick；

但这不行，当我缩放图形时，x 轴上没有更多的“时间”。

有没有其他方法可以直接绘制时间，所以我可以使用“缩放”并仍然看到时间 x 轴？

* * *

第二个问题：（我想从0到20分钟开始我的时间，所以我想要我的向量'时间'，先减去所有值，所以我会得到从00:00.FFF到结束时间的时间......如何我可以在 Matlab 中做到这一点吗？

非常感谢您的帮助，我试图在 matlab 帮助中找到帮助，但我没有得到任何有用的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T02:24:06.637

来自关于 datenum 的 Matlab 文档

> 调用 datetick 将指定轴的 TickMode 设置为“手动”。这意味着在缩放、平移或以其他方式更改轴限制后，您应该再次调用 datetick 以更新刻度和标签。

因此，在放大后再次调用 datetick

# javascript - Javascript：使用动态信息更新 src

> ID：12116619
> 
> 赞同：1
> 
> 时间：2012-08-24T21:03:35.163
> 
> 标签：javascript, dynamic, document.write

我正在尝试动态更改标签的 src。它将 src 拉入标签就好了，但它不会在“example.js”中运行 javascript

我的.html

```
<script src='' id="s1"></script>

    <script language="javascript">
         function changeSrc()
         {
         s1.src = "example.js";
         };
         changeSrc();
    </script> 
```

例子.js

```
document.write('<a href="www.mywebsite.com"><img src="somecoolimage.gif" alt="myweb"/></a>'); 
```

Example.js 没有写入上述信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:08:22.943

您不能动态更改块`src`的`script`（在不同的浏览器中不一致），`script`而是添加一个新块：

```
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'example.js';
document.getElementById('some_div_id').appendChild(script); 
```

# javascript - 如果脚本在 firefox 中包含同步 xhr 调用，则脚本执行顺序不正确

> ID：12116624
> 
> 赞同：0
> 
> 时间：2012-08-24T21:03:56.913
> 
> 标签：javascript, firefox, xmlhttprequest, sync

我有 2 个 javascript 文件。让我们称之为 script1.js 和 script2.js。我想确保它们按顺序执行（首先是 script1.js，然后是 script2.js）。所以我将它们的 async 属性都设置为 false 。然而，在特定情况下，这不会发生。如果 script1 包含同步 xhr 调用，则执行顺序颠倒，首先执行 script2，然后执行 script1。我打开了一个针对 firefox 的错误，但他们说 sync xhr 调用再次旋转事件循环，因此即使第一个脚本尚未完成，它仍会开始执行第二个脚本。我无法避免在 javascript 文件中同步 xhr。以前有人遇到过这个问题吗？请让我知道是否有任何替代方法可以执行此操作或确保 javascript 文件执行顺序。

这是可以尝试的示例。

以下是在 oder 中加载 script1 和 script2 的 javascript 方法。

```
function loadJavascript() {
                var script1 = document.createElement("script");
                script1.async=false;
                script1.src = "/html/js/script1.js";
                script1.finished = false;
                script1.onload = script1.onreadystatechange = function() {
                    if ((script1.readyState && script1.readyState != "complete" && script1.readyState != "loaded") || script1.finished) return;
                    script1.onload = script1.onreadystatechange = null;
                    console.log("script1 finished executing");
                    script1.finished =true;
                };

var script2 = document.createElement("script");
            script2.async=false;
            script2.src = "/html/js/script2.js";
                script2.finished = false;
                script2.onload = script2.onreadystatechange = function() {
                    if ((script2.readyState && script2.readyState != "complete" && script2.readyState != "loaded") || script2.finished) return;
                    script2.onload = script2.onreadystatechange = null;
                    console.log("script2 finished executing");
                    script2.finished =true;
                };
                var head = document.head;
            head.appendChild(script1);
            head.appendChild(script2);
    } 
```

script1.js

```
(function(){
    console.log("script1 evaluating");
    var http = new XMLHttpRequest();
    http.open('GET', '/html/js/script3.js', false);
    var data = http.send(null);
    eval(http.responseText); 
})(); 
```

script2.js

```
(function(){
    console.log("script2 evaluating");
})(); 
```

script3.js

```
(function(){
})(); 
```

实际结果：

第一次执行顺序是正确的。我在萤火虫中看到以下内容

```
script1 evaluating

GET http://10.194.176.9/html/js/script3.js

script1 finished executing

script2 evaluating

script2 finished executing 
```

但是第二次以后，一旦所有脚本都被缓存，我总是会看到以下顺序。在这里你会看到 script2 和 script1 的执行顺序是相反的。

```
script1 evaluating

GET http://10.194.176.9/html/js/script3.js

script2 evaluating

script2 finished executing

script1 finished executing 
```

预期成绩：

script1 和 script2 的执行顺序不应该颠倒，因为我使用的是 async=false。

# python - MongoDB 优化 FindAndModify 或 Find + Sort

> ID：12116626
> 
> 赞同：3
> 
> 时间：2012-08-24T21:04:02.743
> 
> 标签：python, mongodb, pymongo, database

运行 MongoDB，我试图将具有优先级 (d) 的三列键查找 (a,b,c) 排队。我有一个类似（pymongo 语法）的查询：

```
collection.find({'a':'foo','b':'bar','c':'baz'}, sort = [('d', -1)] ) 
```

使用复合索引 (a+1,b+1,c+1,d-1) 运行解释显示全表扫描和 BasicCursor。

对于 d 上的单个索引，explain 显示仅使用 d 索引。

对于一个大表，我真正想要的是使用复合索引。我怎样才能使这项工作？

INDEX_INFORMATION: {u' *id* ': {u'key': [(u'_id', 1)], u'v': 1}, u'color_1_level_1_in_progress_1_Ranking_-1': {u'key': [(u' color', 1), (u'level', 1), (u'in_progress', 1), (u'Ranking', -1)], u'v': 1}}

```
EXPLAIN ON A FIND+SORT QUERY
db.coll.find({'level' : {'$in' : [0,1,2]}, 'in_progress' : 0, 'color' : {'$in' : ['Red', 'Blue', 'Green]} },  sort = [('Ranking', -1)] ).explain()

OUTPUT ON EXPLAIN
OperationFailure: database error: too much data for sort() with no index.  add an index or specify a smaller limit

THE QUEUEING QUERY I CARE ABOUT OPTIMIZING
coll.find_and_modify(
  query = {'level' : {'$in' : [0,1,2]}, 'in_progress' : 0, 'color' : {'$in' : ['Red', 'Blue', 'Green']} },
  sort = {'Ranking' : -1},                                                                                                                                                                             
  update = {'$set': {'in_progress': 1}} 
) 
```

请注意，当我在排序字段“排名”上添加索引时，解释返回正在使用排名索引。但是从不使用复合索引，并且在 1.5 MM 文档测试语料库上性能非常慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:13:26.467

有一种方法可以在查询时强制使用特定的索引，称为`hint`.

只需在游标上调用它：

```
cursor = collection.find({query-doc}).hint({index-fields}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:47:54.513

Mongodb索引系统是基于实验的。基本上，查询优化器将使用所有可能的索引运行您的查询并比较每个索引的时间。它将学习为给定类型的查询使用最佳索引。[来自查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer)的文档：

> 在测试新计划时，MongoDB 会并行执行多个查询计划。一旦完成，它就会终止其他执行，并且系统已经知道哪个计划是好的

如果您的集合非常小，则查询优化器选择的索引可能不是您认为最好的。但是，此查询和此集合的速度更快。当您的收藏长大后，也许另一个索引会更合适。

在您的情况下，我认为 mongo 更容易扫描所有文档，然后使用 d 上的索引对它们进行排序，因为您的文档很少。

尝试对具有更多文档（比如说 100 万个）的集合运行相同的查询（多次以提高学习效率），您可能会看到它将使用完整索引。

因此，不需要使用 oe 提示（尽管它不会造成伤害）。我的建议：让 mongo 查询优化器完成它的工作 :-)

# gwt - GWTP - 尝试写入映像包时发生错误

> ID：12116632
> 
> 赞同：4
> 
> 时间：2012-08-24T21:04:43.217
> 
> 标签：gwt, ant, javac, gwt-platform, mgwt

在尝试使用 ant- 构建 gwtp+mgwt 应用程序时，我遇到了很多这些错误

```
准备方法 tabBarMoreImage
     [java] [ERROR] 尝试写入图像包时发生错误。
     [java] javax.imageio.IIOException: 无法创建输出流！
     [java] 在 javax.imageio.ImageIO.write(ImageIO.java:1560)

...
  准备方法 tabBarMostRecentImage
     [java] [ERROR] 尝试写入图像包时发生错误。
     [java] javax.imageio.IIOException: 无法创建输出流！
...
 [java] 原因：javax.imageio.IIOException: 无法创建缓存文件！
     [java] 在 javax.imageio.ImageIO.createImageOutputStream(ImageIO.java:397)
     [java] 在 javax.imageio.ImageIO.write(ImageIO.java:1558)
     [java] ... 33 更多
     [java] 原因：java.io.IOException: Too many open files
     [java] 在 java.io.UnixFileSystem.createFileExclusively（本机方法）
     [java] 在 java.io.File.checkAndCreate(File.java:1704)
     [java] 在 java.io.File.createTempFile(File.java:1792)
     [java] 在 javax.imageio.stream.FileCacheImageOutputStream.(FileCacheImageOutputStream.java:71)
     [java] 在 com.sun.imageio.spi.OutputStreamImageOutputStreamSpi.createOutputStreamInstance(OutputStreamImageOutputStreamSpi.java:50)
     [java] 在 javax.imageio.ImageIO.createImageOutputStream(ImageIO.java:393)
     [java] ... 34 更多
     [java] 准备方法getButtonBarArrowDownImage
     [java] [ERROR] 尝试写入图像包时发生错误。
     [java] javax.imageio.IIOException: 无法创建输出流！
     [java] 在 javax.imageio.ImageIO.write(ImageIO.java:1560)
     [java] 在 com.google.gwt.resources.rg.ImageBundleBuilder.createImageBytes(ImageBundleBuilder.java:558)
     [java] 在 com.google.gwt.resources.rg.ImageBundleBuilder.toPng(ImageBundleBuilder.java:544)
...

```

该应用程序在开发模式下运行良好。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T02:24:27.663

也许 GWT 编译器正在泄漏文件描述符（因此出现“打开的文件过多”异常）。也许您所处的环境限制了每个用户的打开文件数量（这是您自己的机器）？

使用 来检查所有用户限制`ulimit -a`。

您可以尝试使用 增加打开文件的限制`ulimit -Hn <number>`。这至少应该可以帮助您诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:27:08.900

有完全相同的问题（和错误消息）。

[在 google groups (GWT) 上](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/EGiOO0g85rI)的这个线程中找到了解决方案
我正在使用 Linux（我不知道这是不是你的情况）

在 /etc/security/limits.conf 我添加

```
* soft nofile 65535
* hard nofile 65535 
```

要应用新设置，请注销并重新登录。

# assert - Javassist：生成“断言 ”语句

> ID：12116638
> 
> 赞同：0
> 
> 时间：2012-08-24T21:05:03.600
> 
> 标签：assert, javassist

我尝试在方法中添加“断言”语句。

但我得到了这个例外：

引起：编译错误：在 javassist.compiler.TypeChecker.atCallExpr(TypeChecker.java:681) 在 javassist.compiler.TypeChecker.atMethodCallCore(TypeChecker.java:716) 的 mypackage.MyClassThatIsInstrumented 中找不到 assert(boolean) 在 javassist.compiler .JvstTypeChecker.atCallExpr(JvstTypeChecker.java:156) 在 javassist.compiler.ast.CallExpr.accept(CallExpr.java:45) 在 javassist.compiler.CodeGen.doTypeCheck(CodeGen.java:241) 在 javassist.compiler.CodeGen。 atStmnt(CodeGen.java:329) 在 javassist.compiler.ast.Stmnt.accept(Stmnt.java:49) 在 javassist.compiler.CodeGen.atStmnt(CodeGen.java:350) 在 javassist.compiler.ast.Stmnt.accept (Stmnt.java:49) 在 javassist.compiler.CodeGen.atMethodBody(CodeGen.java:291) 在 javassist.compiler.Javac.compileBody(Javac.java:222) 在 javassist.CtBehavior.setBody(CtBehavior.java:360) ... 30 更多

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:34:19.633

一种解决方法是将断言作为条件实现：

```
 if(Foo.class.desiredAssertionStatus() && expr) {
   throw new AssertionError();
 } 
```

这基本上相当于

```
 assert expr; 
```

现在是你想如何注入它的问题。如果需要对方法参数进行断言，可以使用 method.insertBefore(); 如果您要断言结果，则可以使用 method.insertAfter()。

如果需要将语句插入到方法的主体中，在语句之间的某个位置，那么您可以使用[ExprEditor](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/expr/ExprEditor.html)匹配您希望将新语句注入的所需语句

# java - 如何使用 HttpURLConnection 从 ISAPI dll 读取原始 http 响应

> ID：12116640
> 
> 赞同：1
> 
> 时间：2012-08-24T21:05:09.527
> 
> 标签：java, sockets, httpresponse, httpurlconnection, isapi-extension

我的要求是从使用 Java 托管在 IIS 中的 ISAPI dll 发送和接收 HTTP 请求和响应。我们的 ISAPI dll 发送原始 xml 数据作为没有 http 标头的响应，因此当`HTTPURLConnection.getinputstream()`从客户端调用时，我遇到了`UnknownLengthHttpInputStream`异常。我可以`HTTPURLConnection`用来读取没有标头详细信息的 http 响应数据，还是应该使用套接字来读取客户端中的响应？

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:15:48.617

您只需要调用[HttpURLConnection.getInputStream()](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html#getInputStream%28%29)并从那里读取您的 xml 数据。

# ajax - 如何解决 Ajax 请求时 Firebug 的“Aborted”消息？

> ID：12116641
> 
> 赞同：5
> 
> 时间：2012-08-24T21:05:11.807
> 
> 标签：ajax, debugging, firefox, firebug

我将[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29) 1.10.2 与 Firefox 14.0.1 一起使用。显示网页时，Firebug 插件具有以下“行为”：*[Firebug 在 Ajax 请求时的“Aborted”消息](http://blog.haraldkraft.de/2011/12/firebugs-aborted-message-upon-ajax-request/)*。

我应该做什么？由于存在一些错误，或者它是 Firebug 错误或其他原因，我必须改进我的 Web 应用程序是否如此危险？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T05:47:50.527

请在此处查看 XHR open() 的文档： [https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

> 注意：调用这个方法是一个已经激活的请求（已经调用了 open() 或 openRequest() 的请求）相当于调用 abort()。

只需在需要时创建一个新的 XHR 实例。更好的是，使用 jQuery 或其他 JS 库来做 AJAX。它应该可以保护您免受这些错综复杂的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T15:53:41.793

我在尝试使用 HTTPS 加载 JavaScript 文件时看到了这个问题，但我在本地开发环境中使用 HTTP 为该站点提供服务。获取 JavaScript 文件的请求将失败，并在 FireBug 中显示 Aborted 消息。使请求使用相同的协议对我有用。

# c++ - C++中容器的内存分配

> ID：12116643
> 
> 赞同：0
> 
> 时间：2012-08-24T21:05:23.837
> 
> 标签：c++, memory, memory-management

我对 C++ 上容器的内存分配有疑问。

查看多线程应用程序的伪代码（假设它是 c++ 语言）。我在 main 方法中声明了向量对象。然后我运行一个线程并将这个对象传递给线程。该线程在另一个处理器中运行。现在，我在向量中插入 100000 个元素。

```
typedef struct myType
{
    int a;
    int b;
}myType;

ThreadRoutine()
{
    Run Thread in processor P;
    insert 1000000 elements into myTypeObject
}

int main()
{
    std::vector<myType> myTypeObject;
    CALLTHREAD and pass myTypeObject
} 
```

我想知道将为 100000 个元素分配内存的位置：-从主本身-从线程

我问这个的原因是，我想在不同的处理器中运行线程。我的机器是NUMA机器。因此，如果内存是从线程分配的，它将在线程的本地内存库中。但是如果内存是从主线程分配的，它将从主线程的本地内存库中分配。

根据我的直觉，我会说内存仅在线程中分配。请让我知道你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:06:23.777

重新分配将被调用`ThreadRoutine()`——所以，无论哪个线程调用它（在你的例子中是次要的）。

当然，`reserve`如果你想避免在辅助线程上调整大小，你可以在传递它之前先在主线程上。

# dynamics-crm - BizTalk CRM Dynamics 4 到 Dynamics 2011

> ID：12116645
> 
> 赞同：0
> 
> 时间：2012-08-24T21:05:34.930
> 
> 标签：dynamics-crm, dynamics-crm-2011, upgrade, biztalk

我的客户正在从 CRM Dynamics 4 升级到 2011，它使用 BizTalk 2009 作为其 ESB，他们目前正在使用“Microsoft BizTalk Server Adapter for Microsoft Dynamics CRM 4.0”进行集成，我的问题是有人知道哪些重大变化从 BizTalk 的角度来看，升级发生时是否涉及？

我是否正在查看 CRM 11 中的一组全新合同，例如 WCF 意味着代码更改、映射、模式以及从适配器 (4.) 转移到纯 WCF 传输通信？

此时此刻，我正试图衡量一项服务的复杂性和迁移级别......

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T00:45:32.520

我有一些将 BizTalk 与 CRM Online 2011 集成的第一手经验。

主要区别在于从允许编译时类型安全的预定义 CRM 类型到无类型 Wcf 接口的变化。这个问题的几个（丑陋的）解决方案已经在网络上记录下来，但是Richard Seroter 的[这篇博客文章](http://seroter.wordpress.com/2011/02/10/the-good-bad-and-ugly-of-integrating-dynamics-crm-2011-and-biztalk-server-2010/)定义了一个仅限 BizTalk 的解决方案。

我们使用了由德国 Roedl 开发[的第三方提供的适配器。](http://www.roedl.com/services/consulting/integration/biztalk_adapter_for_microsoft_dynamics_crm_2011.html)这使用 Wcf 适配器框架，以与 WCF-SQL 适配器类似的方式，提供一组编译时强类型架构。这使得从 CRM 类型映射到我们的遗留系统数据类型变得简单。

一项免责声明，我们发现性能“足够”，而不是出色。如果您需要来回移动大量数据，请考虑使用定制解决方案，但如果降低开发成本是您的主要动机，则值得考虑**。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:22:17.623

所描述的这个项目的范围将是巨大的，特别是考虑到 BizTalk Server 适配器的限制。他们考虑过使用 Scribe 吗？您可能想使用免费评估版为他们做一个简单的概念验证项目。[抄写员下载](http://scribesoft.com/Downloads)

# c++ - 如何在 SFML 中使用顶点数组？

> ID：12116646
> 
> 赞同：0
> 
> 时间：2012-08-24T21:05:40.717
> 
> 标签：c++, sfml

如果我调用下面的代码（没有纹理），我正在尝试在 a 上绘制纹理`sf::vertexarray` ，我可以显示一个带有红色边框的矩形。当我添加纹理时，我什么也看不到。

我究竟做错了什么？

```
sf::VertexArray v_array;
v_array.append(sf::Vertex(sf::Vector2f(1,1) , sf::Color::Red));
v_array.append(sf::Vertex(sf::Vector2f(60,1) , sf::Color::Red));
v_array.append(sf::Vertex(sf::Vector2f(60,10 ), sf::Color::Red));
v_array.append(sf::Vertex(sf::Vector2f(1,10), sf::Color::Red));
v_array.append(sf::Vertex(sf::Vector2f(1,1), sf::Color::Red ));

v_array.setPrimitiveType(sf::LinesStrip);
sf::Texture text;
text.loadFromFile("../ressources/tileset_base.png");

sf::RenderStates rend(&text);

sf::RenderWindow App(sf::VideoMode(800, 600, 32), "SFML Graphics");

// Start game loop
while (App.isOpen())
{
    // Process events
    sf::Event Event;
    while (App.pollEvent(Event))
    {
        // Close window : exit
        if (Event.type == sf::Event::Closed)
            App.close();
    }
    App.clear();
    App.draw(v_array/*, rend*/);
    App.display();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:08:48.873

您需要为顶点提供一些纹理坐标。您可以使用以下两个构造函数之一：

```
Vertex (const Vector2f &thePosition, const Vector2f &theTexCoords)
Vertex (const Vector2f &thePosition, const Color &theColor, const Vector2f &theTexCoords) 
```

[在此处](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Vertex.php)查看文档

小提示：如果你只使用一种渲染状态（例如只使用纹理），你可以使用这个快捷方式：

```
App.draw(v_array, &text); 
```

# c++ - OpenGL 问题：无法在屏幕上渲染几何图形

> ID：12116647
> 
> 赞同：2
> 
> 时间：2012-08-24T21:05:43.023
> 
> 标签：c++, opengl, glsl, opengl-3

我的程序旨在在屏幕上绘制一个简单的纹理立方体，但是，除了清晰的颜色之外，我无法让它渲染任何东西。这是我的绘图功能：

```
 void testRender() {
    glClearColor(.25f, 0.35f, 0.15f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);
    glUniformMatrix4fv(resources.uniforms.m4ModelViewProjection, 1, GL_FALSE, (const GLfloat*)resources.modelviewProjection.modelViewProjection);
    glEnableVertexAttribArray(resources.attributes.vTexCoord);
    glEnableVertexAttribArray(resources.attributes.vVertex);
    //deal with vTexCoord first
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,resources.hiBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, resources.htcBuffer);
    glVertexAttribPointer(resources.attributes.vTexCoord,2,GL_FLOAT,GL_FALSE,sizeof(GLfloat)*2,(void*)0);
    //now the other one
    glBindBuffer(GL_ARRAY_BUFFER,resources.hvBuffer);
    glVertexAttribPointer(resources.attributes.vVertex,3,GL_FLOAT,GL_FALSE,sizeof(GLfloat)*3,(void*)0);
    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, resources.htextures[0]);
    glUniform1i(resources.uniforms.colorMap, 0);
    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_SHORT, (void*)0);
    //clean up a bit
}; 
```

另外，这里是顶点着色器：

```
#version 330

in vec3 vVertex;
in vec2 vTexCoord;

uniform mat4 m4ModelViewProjection;

smooth out vec2 vVarryingTexCoord;

void main(void) {
    vVarryingTexCoord = vTexCoord;
    gl_Position = m4ModelViewProjection * vec4(vVertex, 1.0);
}; 
```

和片段着色器（我现在已经放弃了纹理）：

```
#version 330

uniform sampler2D colorMap;

in vec2 vVarryingTexCoord;
out vec4 vVaryingFragColor;
void main(void) {
vVaryingFragColor = texture(colorMap, vVarryingTexCoord);
vVaryingFragColor = vec4(1.0,1.0,1.0,1.0);
}; 
```

位置坐标的顶点数组缓冲区构成一个简单的立方体（所有坐标都带有符号 0.25），而模型视图投影只是应用于透视矩阵的逆相机矩阵（向后移动两倍）。然而，即使没有矩阵变换，我也无法在屏幕上看到任何东西。最初，我有两个不同的缓冲区，需要两个不同的元素索引列表，但现在两个缓冲区（包含顶点和纹理坐标数据）的长度和顺序相同。代码本身来源于[Durian Software Tutorial](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-1%3a-The-Graphics-Pipeline.html)和最新的 OpenGL Superbible。其余代码在[这里](http://pastebin.com/m3zLLypU)。

到目前为止，我已经尝试了几乎所有我能想到的东西。这段代码甚至远程关闭吗？如果是这样，为什么我不能在屏幕上渲染任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:13:50.190

到目前为止，你看起来很不错。

我现在唯一看到的是您启用了 DEPTH_TEST，但您没有清除深度缓冲区。即使缓冲区初始化为一个好的值，您也会在第一帧之后的每一帧上绘制空场景，因为深度缓冲区没有被清除。

如果这没有帮助，你能确保你没有`glGetError()`错误吗？您可能必须清理未使用的纹理属性/制服以清除错误，但这将是我的下一步。

# c++ - 使用 CComPtr 保存 xml 标头 (C++)

> ID：12116657
> 
> 赞同：1
> 
> 时间：2012-08-24T21:06:31.087
> 
> 标签：c++, xml, msxml

我使用 atl 和 CComPtr，如下所示：

```
CComPtr<IXMLDOMDocument> xml_doc;
HRESULT hr = xml_doc.CoCreateInstance(__uuidof(DOMDocument))
...
HRESULT hr = xml_doc->createElement(CComBSTR(element_name.c_str()), &element);
...
etc 
```

当我调用 xml_doc->save 时，它​​会保存没有标题的 xml。添加标题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:54:41.580

解决了：

```
HRESULT hr;

CComPtr<IXMLDOMProcessingInstruction> proc_instr;
hr = xml_out->createProcessingInstruction(L"xml", L"version=\"1.0\" encoding=\"UTF-8\"", &proc_instr);
if (FAILED(hr))
    throw std::exception("Failed to create IXMLDOMDocument processing instruction");

CComPtr<IXMLDOMNode> first_child;
hr = xml_out->get_firstChild(&first_child);
if (FAILED(hr))
    throw std::exception("Failed to get first child of IXMLDOMDocument");

hr = xml_out->insertBefore(proc_instr, CComVariant(first_child), NULL);
if (FAILED(hr))
    throw std::exception("Failed to insert IXMLDOMDocument processing instruction");

hr = xml_out->save(CComVariant(header->output_file.c_str()));
if (FAILED(hr))
    throw std::exception("Failed to save response XML to '" + header->output_file + "'"); 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms755439(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms755439(v=vs.85).aspx)

# nginx - Nginx忽略位置指令？

> ID：12116658
> 
> 赞同：4
> 
> 时间：2012-08-24T21:06:44.183
> 
> 标签：nginx

我已经阅读了文档，扫描了示例，但我一生都无法弄清楚为什么这不起作用。我对 nginx 完全陌生，所以如果这是一个愚蠢的简单答案，请放轻松。

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
        worker_connections 768;
        # multi_accept on;
}

http {

        ##
        # Basic Settings
        ##

        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        keepalive_timeout 65;
        types_hash_max_size 2048;
        # server_tokens off;

        # server_names_hash_bucket_size 64;
        # server_name_in_redirect off;

        include /etc/nginx/mime.types;
        default_type application/octet-stream;

        ##
        # Logging Settings
        ##

        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log;

        ##
        # Gzip Settings
        ##

        gzip on;
        gzip_disable "msie6";

        # gzip_vary on;
        # gzip_proxied any;
        # gzip_comp_level 6;
        # gzip_buffers 16 8k;
        # gzip_http_version 1.1;
        # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

        ##
        # Virtual Host Configs
        ##

        #include /etc/nginx/conf.d/*.conf;
        #include /etc/nginx/sites-enabled/*;

    server {
                listen       80;
                server_name  localhost domain.com;

                root /home/TMlabs/server_files;
                index index.html index.htm;

                location = /othersite {
                    root /home/TMlabs/server_files/location2;
                    index index.html index.htm;
                }

                location / {
                    root   /home/TMlabs/server_files/location1;
                    index  index.html index.htm;
                }

        } 
```

如果我需要包含更多内容，请告诉我，我将转储整个 nginx.conf。不过，这很基本。

我想要实现的只是将 domain.com 映射到 location 中指定的根`/`（正在工作）并映射`domain.com/othersite`到该指令中指定的根。出于某种原因，`/home/TMlabs/server_files/location1/index.html`当我导航到`domain.com/othersite`而不是`index.html`文件`/home/TMlabs/server_files/location2`夹中的文件时，它会返回文档。我尝试删除等号并使用可用于匹配的不同运算符，但似乎没有任何效果。这可能是我误解的一些非常基本的东西，对这些东西很陌生。我也很讨厌正则表达式。有人愿意开导吗？

**编辑：**我认为正在发生的事情是它实际上完全忽略了我的指令，只是`/usr/share/nginx/www`用作文档根目录。我在任何地方都看不到这个配置；我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T02:44:29.133

`=`前缀意味着指定的位置应该与请求的 URL 完全匹配。如果您查看错误日志，您会看到 Nginx 尝试提供文件 `[...]/location2/otherside`，而不是`[...]/location2/index.{html,htm}`. （为简单起见，省略了完整路径）

`index`指令是完全匹配位置内的 noop。

要解决此问题，您可以将文件重命名为`otherside`并具有此配置

```
location = /otherside {
    root /home/TMlabs/server_files/location2;
} 
```

或使用`alias`指令

```
location = /otherside {
    alias [...]/location2/index.html;
} 
```

PS：Nginx 会尝试`Content-Type`通过 URL 的扩展来计算响应的值。由于`/otherside`没有扩展，它将使用`application/octet-stream`导致浏览器[尝试下载内容](https://www.rfc-editor.org/rfc/rfc2046#section-4.5.1)。

您可以包含`.html`扩展名，也可以在`default_type`里面使用指令 `location`

```
default_type "text/html"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:37:31.960

以下应该可以解决问题：

```
server {
        listen       80;
        server_name  localhost domain.com;

        root /home/TMlabs/server_files;
        index index.html index.htm;

        location / { try_files location1/$uri location1/$uri/; }
        location /othersite { try_files location2/$uri location2/$uri/; }
} 
```

# linux - 未检测到 OMAP 3 Linux I2C SMBUS 智能电池 (SBS)

> ID：12116660
> 
> 赞同：0
> 
> 时间：2012-08-24T21:06:51.197
> 
> 标签：linux, linux-kernel, embedded-linux, battery, i2c

我正在使用 OMAP 3730 开发嵌入式 Linux 项目。我们使用的是 3.2.23 版内核。I2C 工作正常，我可以在 2 号总线上看到板上的各种传感器。I2C 总线 #3 仅连接了一个智能电池，我可以卸下电源线，电池保持电路板运行。问题是我无法检测或扫描智能电池。我已经尝试了 i2ctools 中的各种程序，但没有成功。我们将电路板连接到示波器，可以看到总线 #3 上的活动。我还启用了内核中设备驱动程序 > I2C 支持下的每个相关选项。

如何在 i2c 总线上查看我的智能电池？我需要在内核中启用其他功能吗？

```
Standard SMBus slave address assignments for SBS devices include:
0x10 -- SMBus System Host
0x12 -- Smart Battery Charger
0x14 -- Smart Battery Selector
0x16 -- Smart Battery

# ls /dev/i2c-?
/dev/i2c-1  /dev/i2c-2  /dev/i2c-3

# i2cget -y 3 0x10 0x00 w p
Error: Read failed
# 
# i2cget -y 3 0x0b 0x00 w p
Error: Read failed

# i2cdetect -r 3
WARNING! This program can confuse your I2C bus, cause data loss and worse!
I will probe file /dev/i2c-3 using read byte commands.
I will probe address range 0x03-0x77.
Continue? [Y/n] y
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- -- 

# i2cdetect -F 3
Functionalities implemented by /dev/i2c-3:
I2C                              yes
SMBus Quick Command              no
SMBus Send Byte                  yes
SMBus Receive Byte               yes
SMBus Write Byte                 yes
SMBus Read Byte                  yes
SMBus Write Word                 yes
SMBus Read Word                  yes
SMBus Process Call               yes
SMBus Block Write                yes
SMBus Block Read                 no
SMBus Block Process Call         no
SMBus PEC                        yes
I2C Block Write                  yes
I2C Block Read                   yes

# i2cdetect -l
i2c-1   i2c         OMAP I2C adapter                    I2C adapter
i2c-2   i2c         OMAP I2C adapter                    I2C adapter
i2c-3   i2c         OMAP I2C adapter                    I2C adapter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:55:44.707

解决方案是将电量计芯片所在的总线的总线速度降低到 100 KHz。之后我得到：

```
# i2cdetect -y -r 3
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- 0b -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- -- 
```

# sql - 避免 select case 和 where 子句中的重复条件

> ID：12116662
> 
> 赞同：0
> 
> 时间：2012-08-24T21:06:58.763
> 
> 标签：sql, select, case, where-clause, repeat

我有一个表说 TAB1 包含以下列 -
**USER_ID NUMBER(5),**
**PHN_NO1 CHAR(20),**
**PHN_NO2 CHAR(20)**

我必须将 TAB1 中的记录提取到另一个表 TAB2 中，以便所有记录都具有两者之一或PHN_NO1 和 PHN_NO2 的长度都是 10 并以 5 开头。
如果在记录中，例如只有 PHN_NO1 满足条件而 PHN_NO2 不满足，则 TAB2.P1 应与 TAB1.PHN_NO1 相同，但 TAB2.P2 应为 NULL。
如果两者都不满足条件，那么记录不应该插入TAB2

TAB2 的结构将是
**USER_ID number(5)** - 保存从 TAB1
**P1 char(10)**中选择的记录的 ROWID - 如果 TAB1.PHN_NO1 的长度为 10 并以 5 开头，则保存 TAB1.PHN_NO1，否则为 NULL
**P2 char(10)** -如果 TAB1.PHN_NO2 的长度为 10 且为 5，则持有 TAB1.PHN_NO2，否则为 NULL

我可以编写以下查询来实现上述目的，但是 CASE 和 WHERE 中的条件是重复的。请提出一种以更好的方式实现上述目标的方法。

* * *

> CREATE TABLE TAB2
> AS
> SELECT
> USER_ID,
> CASE WHEN
> (LENGTH(TRIM(PHN_NO1)) = 10 AND TRIM(PHN_NO1) like '5%')
> THEN
> CAST(TRIM(PHN_NO1) as CHAR(10))
> ELSE
> CAST(NULL as CHAR( 10))
> END AS P1,
> CASE (LENGTH(TRIM(PHN_NO2)) = 10 AND TRIM(PHN_NO2) like '5%')
> THEN
> CAST(TRIM(PHN_NO2) as CHAR(10))
> ELSE
> CAST(NULL as CHAR(10 ) ))
> END AS P2
> WHERE
> (LENGTH(TRIM(PHN_NO1) = 10 AND TRIM(PHN_NO1) like '5%')
> OR
> (LENGTH(TRIM(PHN_NO2) = 10 AND TRIM(PHN_NO2) like '5%')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:02:45.027

你当然可以！但是，您确实必须使用*一些*条件：

```
INSERT INTO New_Phone 
        SELECT user_id, phn_no1, phn_no2
        FROM (SELECT user_id,
              CASE WHEN LENGTH(TRIM(phn_no1)) = 10 AND TRIM(phn_no1) like '5%'
                   THEN SUBSTR(phn_no1, 1, 10) ELSE NULL END phn_no1, 
              CASE WHEN LENGTH(TRIM(phn_no2)) = 10 AND TRIM(phn_no2) like '5%'
                   THEN SUBSTR(phn_no2, 1, 10) ELSE NULL END phn_no2
              FROM Old_Phone) Old
        WHERE phn_no1 IS NOT NULL
        OR phn_no2 IS NOT NULL; 
```

（我有一个有效的 SQL Fiddle[示例](http://www.sqlfiddle.com/#!1/9a7eb/2)。）

这应该适用于任何 RDBMS。请注意，由于您的数据，这可能不会*比*您原来的性能低（考虑到 ，它不会使用索引`TRIM()`）。考虑到大多数主要的 RDBMS 能够重用每行确定性函数的结果，它也不太可能*更好。*

哦，应该注意的是，在国际上，电话号码的长度最多为 15 位（国内最少为 6 位或更少）。也许使用`VARCHAR`（也为自己节省一些`TRIM()`）？And `INTEGER`(or `BIGINT`, maybe `TINYINT`) 更常用于代理 id，`NUMBER`有点奇怪。

# django - django 包含标签

> ID：12116664
> 
> 赞同：9
> 
> 时间：2012-08-24T21:07:21.820
> 
> 标签：django, django-templates

我正在尝试创建包含标签并将其放置在页面上，但它不起作用。

我的意见.py：

```
from django.shortcuts import render_to_response, redirect
from django import template

register = template.Library()

@register.inclusion_tag('weather.html')
def weather():
    return {'city': 'angola'}

def home(request):
    return render_to_response('index.html') 
```

索引.html

```
<title> TITLE </title>

Hi everyone!

{% weather %} 
```

天气.html

```
weather is fine in {{city}} 
```

Django调试页面说“无效的块标签：'天气'”所以我想我把inclusion_tag的声明放在错误的地方？我需要把它放在哪里才能让它工作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T21:35:47.370

模板标签需要放在应用程序`templatetags`目录中的模块中。有关完整详细信息，请参阅自定义[模板标签文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)的代码布局部分。

然后，您必须`load`在模板中使用您的标签库，然后再使用您的标签。

```
{% load my_tags %}
{% weather %} 
```

# html - 快捷方式图标不起作用

> ID：12116670
> 
> 赞同：5
> 
> 时间：2012-08-24T21:07:54.133
> 
> 标签：html, favicon

我正在创建一个 HTML 网页。我还远未完成，因此目前不应过多关注以下问题。但是我对为什么我的快捷方式图标代码不起作用感到困惑。我通过将所有文件放在同一个文件夹中来测试所有内容（离线，没有服务器或类似的东西）

代码是

```
<link rel="SHORTCUT ICON" type="image/x-icon" href="favicon.ico"> 
```

我尝试了不同的 ico 文件，它只适用于上传到网站的 ico。例如，以下代码将起作用。

```
<link rel="SHORTCUT ICON" type="image/x-icon" href="\WEBSITEFOLDER\favicon.ico"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T22:39:44.773

尝试：

```
<link rel="SHORTCUT ICON" type="image/x-icon" href="~/favicon.ico"> 
```

或者：

```
<link rel="Shortcut Icon" type="image/ico" href="favicon.ico"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:00:44.167

我遇到了类似的问题，结果发现实际文件的大小是导致问题的原因。根据消息来源，它必须是 16x16 或 32x32。我会使用一个图标生成器，例如：[x-iconeditor.com](http://xiconeditor.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T02:40:44.673

如果您想要本地文件上的网站图标，则必须使用 Data URI

看到这个答案：[本地（文件：//）网站图标在 Firefox 中工作，而不是在 Chrome 或 Safari 中 - 为什么？](https://stackoverflow.com/questions/11221292/local-file-website-favicon-works-in-firefox-not-in-chrome-or-safari-why)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-18T12:37:56.287

将 favicon 图标大小设置为 16x16 它将在 chrome 中工作...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-24T22:44:58.607

我有同样的问题。我“借用”的网站使用了一个名为“icons”的文件夹作为 .ico 文件的位置，所以我完全遵循了这一点。我女朋友使用的服务是 Web.com。无论出于何种原因，如果 Web.com 的快捷方式图标位于根目录以外的任何位置，它都不会显示在 Internet Explorer 中。我只是将 favicon 文件移动到 index.html 所在的位置，并更改了索引中的那一行代码以反映这一点。

解决了（在我的情况下）！祝你好运！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-11T15:17:46.800

尝试为图像图标添加绝对路径并使用 48x48 px 图像大小。

这对我有用

```
<link rel="shortcut icon" type="image/png" href="http://yoursite.com/Content/Images/favicon.png" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-12T17:02:29.277

```
<link rel="icon" href="relative_PATH/favicon.ico"> 
```

尝试将所有相对路径放入图标文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-05T09:10:36.780

它不起作用，绝对是因为链接目标不正确。如果您将图标放在网页的同一文件夹中，请更正以下链接：

```
<link rel="SHORTCUT ICON" type="image/x-icon" href="./favicon.ico"> 
```

这意味着 favicon.ico 在当前文件夹中。

> 但是，您可以使用调试器，即 chrome 调试器并导航到网页的源代码，即右键单击图标的链接 -> 在新选项卡中打开，看看它是如何工作的

# ruby-on-rails - 执行资产时忽略资产管道中的某些文件：预编译

> ID：12116671
> 
> 赞同：1
> 
> 时间：2012-08-24T21:07:56.267
> 
> 标签：ruby-on-rails, asset-pipeline

我的 Rails 设置的资产文件夹中有一个模板目录，它托管我的模板化 HTML 文件。我已经实现了一个部分系统，只要它附加了一个 .erb 文件，我就可以将文本片段加载到每个模板中。部分以下划线为前缀，因此 /assets/templates/_form.html 是包含在 /assets/templates/edit.html 中的部分。这可行，但是当我运行 assets:precompile 时出现问题。

assets:precompile 命令也将预编译 _form.html 文件（因为它们位于 assets/templates 文件夹内），我不希望这种情况发生，因为它们不能被预编译（因为任何 erb 变量都是失踪等）。

有什么方法可以通知 rake assets:precompile 命令忽略某些文件（在这种情况下，文件前面有下划线）？有人知道该怎么做吗？或者有人可以将我指向具有 rake assets:precompile 命令源的 github 存储库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T05:05:31.423

**[在 Rails 3.2.8 中，您可以在此处](https://github.com/rails/rails/blob/v3.2.8/actionpack/lib/sprockets/assets.rake#L28)**找到 rake 任务定义的源代码。

您的问题已在[Sprockets](https://github.com/sstephenson/sprockets)问题跟踪器中至少提出过一次

*   [https://github.com/sstephenson/sprockets/pull/86](https://github.com/sstephenson/sprockets/pull/86)

joshpeek[在 Sprockets 2.2中添加了一个](https://github.com/sstephenson/sprockets/commit/95ae9b78ec3e20978bfff56c7df8ea53930967f9)[新`stub`](https://github.com/sstephenson/sprockets/commit/95ae9b78ec3e20978bfff56c7df8ea53930967f9)指令，这看起来是一个很有前途的解决方案，可以“忽略”管道中的某些资产。

Rails 3.2 不支持任何接近 2.2 的 Sprockets 版本，而且从我所读到的 Rails 4 之前似乎没有任何打算这样做*（尽管我很想错了）*。这里至少有一个已关闭的问题*（未采取任何措施）*要求升级到 2.2。

*   [https://github.com/rails/rails/pull/5984](https://github.com/rails/rails/pull/5984)

不过，对于*您的*情况，在我看来，您可能使用`app/assets`不正确。我无法提供替代解决方案，因为我对您的设置/使用情况知之甚少，无法明确说明，但正如您所说，带有`.erb`in`app/assets` **的**文件将由 Sprockets 处理。

# javascript - Socket.io 在浏览器导航到新页面之前接收消息

> ID：12116675
> 
> 赞同：4
> 
> 时间：2012-08-24T21:08:17.047
> 
> 标签：javascript, node.js, websocket, socket.io

我遇到了 Socket.io 在页面导航发生之前接收消息的问题 - 通常当消息是导航触发的某些服务器端操作的直接结果时。

我现在看到的是这样的：

1.  Socket.io 连接
2.  用户触发页面导航（提交表单、刷新等）
3.  服务器端逻辑向 socket.io 服务器发送请求，该服务器立即将事件分派给仍然连接的客户端
4.  客户端接收并确认请求（我很确定socket.io内置了一些消息确认，如果我错了，请纠正我），并向用户显示通知，但随后......
5.  socket.io 连接在原始页面上关闭
6.  新页面加载并显示
7.  Socket.io 打开一个新连接，但没有新消息，因为最后一个已收到并确认。

这本身并不是一个真正的错误，因为我认为期望 Socket.io 在导航发生之前关闭连接是不合理的。但是，我不确定处理此问题的最佳方法是什么。目前，我一次为每个客户端打开一个连接，并在新连接时关闭另一个。但是在这种情况下不会发生这种情况，因为第一个在第二个连接之前已经关闭。我也可以保留所有客户端的列表，但这也不能解决这个问题，因为第一个连接仍然会收到消息。

有人可以建议解决此问题的方法，以确保用户始终看到消息通知吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T22:52:21.460

Socket.io 使用自己的会话 ID 跟踪逻辑连接。如果您在客户端连接时查看控制台，您将看到 ID：

```
info  - handshake authorized Q9syoIK47JI7dACYpxiA 
```

重要的是要理解这些 ID 是**按页面的**，并且**与 HTTP 会话完全分开**。Socket.io 客户端库只是将其会话 ID 保存在 JavaScript 变量中。因此，在导航时，ID显然丢失了。

因此，在导航时，会发生这种情况：

1.  用户在连接到 sio session 的页面上`1`。
2.  我们开始导航到新页面。On `window.onbeforeunload`，Socket.io[发起一个同步 XHR 请求](https://github.com/LearnBoost/socket.io-client/blob/0.9.10/dist/socket.io.js#L1842-1865)，告诉服务器它正在断开连接。如果成功，则会话 ( `1`) 立即终止；否则，会话最终将超时。
3.  加载了一个新页面。它将连接到 Socket.io 服务器并被分配一个新的会话 ID `2`，.
4.  由于我们的客户端现在已连接到 session ，因此您发送到 session 的任何内容`1`显然都不会被传递`2`。

使用基本的 Socket.io 功能，无法区分在页面之间导航的用户和新用户。无论哪种情况，用户都将连接到一个新的 Socket.io 会话。

如果不确切知道您的应用程序是如何工作的或您想要完成什么，就很难给出解决问题的明确建议。

最有可能的是，您需要做的是[将 Socket.io 会话与用户的*HTTP 会话*](http://www.danielbaulig.de/socket-ioexpress/)相关联。您可以将通知存储在用户会话中的队列中，并在显示时将其删除。有两种方法可以做到这一点：

*   由于您正在执行整页加载，因此您可以使用页面本身直接向下发送排队通知。成功渲染后删除队列。
*   在新的 Socket.io 连接上，通过套接字发送未读通知。 [提供`.emit`一个回调函数](https://github.com/LearnBoost/socket.io#getting-acknowledgements)——这是 Socket.io 为您提供的交付确认。确认交付后，您可以从用户的 HTTP 会话中删除通知队列。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T22:52:39.003

最简单的解决方案：使用[onbeforeunload](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)事件断开 socket.io。

我使用 HTTP 调试器验证了此事件在浏览器发出请求之前触发（至少在 Chrome 中），因此如果 socket.io 在此处断开连接，它将不会收到任何用于下一页的消息。

```
window.onbeforeunload = function() {
    socket.disconnect();
}; 
```

我没有在多个浏览器中测试过这个，所以它可能不是一个完美的解决方案，但它现在似乎解决了这个问题。

# c# - 以编程方式更改 Crystal Reports aspx 页面中的超链接 url

> ID：12116680
> 
> 赞同：1
> 
> 时间：2012-08-24T21:08:23.683
> 
> 标签：c#, asp.net, crystal-reports

我有一个页面显示我所有的水晶报告，如下所示：

这些报告中有一个（可悲的是，硬编码的）url 公式，指向例如[https://myserver.bla.bla](https://myserver.bla.bla)

我想以某种方式以编程方式查找 url 的实例，并将它们更改为其他内容（有数百个这样的报告，现在没有足够的时间进入并更改所有链接）。

我一直在 FieldObjects 中四处寻找，但似乎无法弄清楚如何更改它们的格式公式。当我查看 reportdocument.fieldformulas 时，不存在 url 格式公式。

公共部分类报告：System.Web.UI.Page {

```
 protected void Page_Load(object sender, EventArgs e)
    {
        iLogger logger = LoggingFactory.CreateLogger();

        ReportDocument rd = new ReportDocument();

        string fileName = Request.QueryString["reportfile"];

        if(!Regex.IsMatch(fileName,@"^[ 0-9a-zA-Z-_\\]+.rpt$"))
        {
            ArgumentException aex = new ArgumentException("Invalid file/path specified.");
            logger.LogError(ActionTypes.Administration, HttpContext.Current.User.Identity.Name,
                            "Passed invalid file path to report viewer: " + fileName, aex);
            throw aex;
        }

        if(Path.IsPathRooted(fileName))
        {
            ArgumentException aex = new ArgumentException("Absolute path passed to report viewer.");
            logger.LogError(ActionTypes.Administration, HttpContext.Current.User.Identity.Name,
                         "Passed invalid file path to report viewer: " + fileName, aex);
            throw aex;
        }

        string rootPath = Server.MapPath("~/Reports/");

        string path = Path.Combine(rootPath, fileName);

        if (File.Exists(path))
        {
            rd.Load(path);
        }

        //get all keys starting with Prompt
        var prompts = Request.QueryString.AllKeys.Where(q => q.StartsWith("Prompt"));

        foreach (string promptKey in prompts)
        {
            //try to convert the rest of the string to an int  
            //yes, this should probably not just be a replace here...
                string withoutPrompt = promptKey.Replace("Prompt", "");

                int promptVal;
                if (int.TryParse(withoutPrompt, out promptVal))
                {
                    rd.SetParameterValue(promptVal, Request.QueryString[promptKey]);
                }
                //rd.SetParameterValue(promptKey, Request.QueryString[promptKey]);

        CrystalReportViewer1.ReportSource = rd;                        
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:24:36.357

好的。我至少找到了如何获取 URL，所以我想我会与大家分享我得到的东西。

```
 CrystalDecisions.ReportAppServer.ClientDoc.ISCDReportClientDocument cDoc = rd.ReportClientDocument;

        ReportObjects reportObjects = rd.ReportDefinition.ReportObjects;

        CrystalDecisions.ReportAppServer.ReportDefModel.ReportObjects objects = 
        cDoc.ReportDefController.ReportObjectController.GetReportObjectsByKind(
            CrystalDecisions.ReportAppServer.ReportDefModel.CrReportObjectKindEnum.crReportObjectKindField);

        foreach(ISCRReportObject obj in objects)

        {
            //CrystalDecisions.ReportAppServer.ReportDefModel.ObjectFormatConditionFormulas formulas =obj.Format.ConditionFormulas[];
            ConditionFormula hyperFormulas = obj.Format.ConditionFormulas[CrObjectFormatConditionFormulaTypeEnum.crObjectFormatConditionFormulaTypeHyperlink];

            if (hyperFormulas != null && hyperFormulas.Text != null)
            {
                hyperFormulas.Text = hyperFormulas.Text.Replace(@"https://my/old/url","https://my/new/url");
            }

        } 
```

我实际上并不认为这是在修改公式:(

可悲的是，我想我在设置值后对其进行了修改。

呜呜。知道了 ：）

我的修改例程如下所示：

```
 foreach(ISCRReportObject obj in objects)

        {
            //CrystalDecisions.ReportAppServer.ReportDefModel.ObjectFormatConditionFormulas formulas =obj.Format.ConditionFormulas[];
            ConditionFormula hyperFormulas = obj.Format.ConditionFormulas[CrObjectFormatConditionFormulaTypeEnum.crObjectFormatConditionFormulaTypeHyperlink];

            if (hyperFormulas != null && hyperFormulas.Text != null)
            {
                hyperFormulas.Text = hyperFormulas.Text.Replace(@"{{old url}}",{{new url}});

                cDoc.ReportDefController.ReportObjectController.Modify(
                    cDoc.ReportDefController.ReportDefinition.FindObjectByName(obj.Name), obj);

            }

        } 
```

效果很好！

# python - 如何使用 argparse 要求我的 python 脚本的参数是 0.0-1.0 之间的浮点数？

> ID：12116685
> 
> 赞同：41
> 
> 时间：2012-08-24T21:08:38.543
> 
> 标签：python, range, command-line-arguments, argparse

我想`argparse`在 Python 2.7 上使用，要求我的脚本参数之一介于 0.0 和 1.0 之间。`argparse.add_argument()`支持这个吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-24T21:43:54.193

`type`参数 to`add_argument`只需要是一个可调用对象，它接受一个字符串并返回一个转换后的值。您可以编写一个包装器`float`来检查其值并在超出范围时引发错误。

```
def restricted_float(x):
    try:
        x = float(x)
    except ValueError:
        raise argparse.ArgumentTypeError("%r not a floating-point literal" % (x,))

    if x < 0.0 or x > 1.0:
        raise argparse.ArgumentTypeError("%r not in range [0.0, 1.0]"%(x,))
    return x

p = argparse.ArgumentParser()
p.add_argument("--arg", type=restricted_float) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-24T21:48:12.723

这是一个使用`choices`参数 to的方法，[`add_argument`](http://docs.python.org/dev/library/argparse.html#argparse.ArgumentParser.add_argument)其自定义类被认为“等于”指定范围内的任何浮点数：

```
import argparse

class Range(object):
    def __init__(self, start, end):
        self.start = start
        self.end = end
    def __eq__(self, other):
        return self.start <= other <= self.end

parser = argparse.ArgumentParser()
parser.add_argument('--foo', type=float, choices=[Range(0.0, 1.0)]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-10T09:20:56.110

添加**str**使边界在帮助中可见。

```
import argparse

class Range(object):
    def __init__(self, start, end):
        self.start = start
        self.end = end

    def __eq__(self, other):
        return self.start <= other <= self.end

    def __contains__(self, item):
        return self.__eq__(item)

    def __iter__(self):
        yield self

    def __str__(self):
        return '[{0},{1}]'.format(self.start, self.end)

parser = argparse.ArgumentParser()
parser.add_argument('--foo', type=float, choices=Range(0.0, 1.0))
parser.add_argument('--bar', type=float, choices=[Range(0.0, 1.0), Range(2.0,3.0)]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-19T06:32:05.050

argparse.add_argument 调用需要一个可迭代的作为“选择”参数。那么如何将可迭代属性添加到上面的 Range 类中。所以这两种情况都可以使用：

```
import argparse

class Range(object):
    def __init__(self, start, end):
        self.start = start
        self.end = end

    def __eq__(self, other):
        return self.start <= other <= self.end

    def __contains__(self, item):
        return self.__eq__(item)

    def __iter__(self):
        yield self

parser = argparse.ArgumentParser()
parser.add_argument('--foo', type=float, choices=Range(0.0, 1.0))
parser.add_argument('--bar', type=float, choices=[Range(0.0, 1.0), Range(2.0,3.0)]) 
```

# python - 删除python中的多余空格

> ID：12116690
> 
> 赞同：0
> 
> 时间：2012-08-24T21:09:07.857
> 
> 标签：python, string

我有一个文件，内容如下：

```
o hi! My name is Saurabh.

o I like python. 
```

我想要类似的东西：

```
o hi! My name is Saurabh.

o I like python. 
```

我试过这条线：

```
removedSpaces=' '.join(lineWithSpaces.split()) 
```

看起来它删除了所有空格

它给了我

```
o hi! My name is Saurabh.o I like python. 
```

这是不正确的。无论如何都可以实现上述输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:12:38.857

```
import re
removedSpaces = re.sub(r'\n{3,}', "\n\n", lineWithSpaces) 
```

这会将三个或更多换行符的所有运行转换为两个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:16:37.797

```
'\n\n'.join(linesWithSpaces.split('\n')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T20:53:47.017

```
while "\n\n" in lineWithSpaces:
    lineWithSpaces = lineWithSpaces.replace("\n\n", "\n") 
```

# ios - iOS XML 解析，在表格视图上显示结果并推送到新的表格视图

> ID：12116693
> 
> 赞同：0
> 
> 时间：2012-08-24T21:09:25.953
> 
> 标签：ios, xcode, xml-parsing, tableview, pushviewcontroller

我的应用程序的目标是解析一些 XML，在表格视图中显示 xml 的一个元素，然后让用户单击单元格，然后它会推送到一个新的表格视图，其中显示该元素的其余数据。第一个只显示列表的表格视图工作正常，但由于某种原因，我无法推送到新的视图控制器工作。下面是我正在使用的代码。第一个视图控制器显示在表格视图中；当前呼叫类型。我希望用户能够单击该表格单元格，然后推送到一个新的表格视图，其中显示单位、车站和位置。任何帮助都是极好的！谢谢。

**第一个表视图的视图控制器：**

```
#import "ThirdViewController.h"
#import "UnitsXMLParser.h"
#import "DetailViewController"

@implementation ThirdViewController
@synthesize unitsTableView;
@synthesize currentCallType, station, location, units;

XMLParser1 *xmlParser;

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Release any cached data, images, etc that aren't in use.
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [[xmlParser units] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath         *)indexPath
{

static NSString *CellIdentifier = @"Cell";

Units *currentCall = [[xmlParser units] objectAtIndex:indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:CellIdentifier];

}

// Set up the cell...
cell.textLabel.text = [currentCall currentCallType];

return cell;

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
return 55;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath {

DetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"detail"];
    [self.navigationController pushViewController:detail animated:YES];

}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];

xmlParser = [[XMLParser1 alloc] loadXMLByURL:@"http://localhost:8888/units.xml"];

} 
```

**XML解析器：**

```
#import <Foundation/Foundation.h>
#import "UnitsXMLParser.h"

@implementation XMLParser1
@synthesize units = _units;

NSMutableString *currentNodeContent;
NSXMLParser     *parser;
Units       *currentCall;
bool            isStatus;

-(id) loadXMLByURL:(NSString *)urlString
{
_units          = [[NSMutableArray alloc] init];
NSURL *url      = [NSURL URLWithString:urlString];
NSData  *data   = [[NSData alloc] initWithContentsOfURL:url];
parser          = [[NSXMLParser alloc] initWithData:data];
parser.delegate = self;
[parser parse];
return self;
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
currentNodeContent = (NSMutableString *) [string     stringByReplacingOccurrencesOfString:@"~" withString:@""];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
if ([elementname isEqualToString:@"station"])
{
    currentCall = [Units alloc];
    isStatus = YES;
}
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName
{
if (isStatus)
{
    if ([elementname isEqualToString:@"units"])
    {
        currentCall.units = currentNodeContent;
    }
    if ([elementname isEqualToString:@"name"])
    {
        currentCall.currentCallType = currentNodeContent;
    }
    if ([elementname isEqualToString:@"stationid"])
    {
        currentCall.station = currentNodeContent;
    }
    if ([elementname isEqualToString:@"address"])
    {
        currentCall.location = currentNodeContent;
    }
}
if ([elementname isEqualToString:@"station"])
{
    [self.units addObject:currentCall];
    currentCall = nil;
    currentNodeContent = nil;
}
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:16:51.677

远射; 但是您是否已将项目配置为使用 `UINavigationController` ? 除非您从正确的项目模板开始或手动添加 `UINavigationController` . 如果包含您发布的代码的视图控制器不受导航控制器的支持， `[self.navigationController pushViewController:detail animated:YES]` 则不会执行任何操作。

此外，请确保您已经连接了您 `UITableViewDelegate` 的除您的之外 `UITableViewDataSource` ，以便您的代码将捕获行选择。

我之所以这么问，是因为您没有明确声明您已将项目设置为使用 a `UINavigationController` 或确认您已在 Interface Builder 中连接了委托和数据源。

# windows-phone-7 - Windows Phone：列表框项目无法适应手机屏幕

> ID：12116694
> 
> 赞同：0
> 
> 时间：2012-08-24T21:09:35.517
> 
> 标签：windows-phone-7, listbox

我有一个显示不同长度字符串的列表框。如果字符串的长度大于屏幕宽度，则其余部分不会显示在屏幕上。如何使用 listbox 使这种字符串适合屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:44:46.240

在 TextBlock 中使用 TextWrapping="Wrap" 使文本在达到控件宽度时换行。

# c# - 比较大文件的内容

> ID：12116699
> 
> 赞同：2
> 
> 时间：2012-08-24T21:09:53.537
> 
> 标签：c#, binary, compare, large-files

我需要比较非常大文件的内容。程序的速度很重要。我需要 100% 匹配。我阅读了很多信息，但没有找到最佳解决方案。我正在考虑两个选择和两个问题。

1.  逐字节比较整个文件 - 对于大文件来说速度不够快。
2.  使用哈希的文件比较 - 不是 100% 匹配具有相同哈希的两个文件。

你有什么建议？也许我可以利用线程？MemoryMappedFile 有帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T21:34:52.860

如果你**真的**需要保证 100% 的文件是 100% 相同的，那么你需要做一个字节到字节的比较。这只是问题的一部分——唯一具有 0% 错误匹配风险的散列方法是恒等函数！

我们剩下的是捷径，可以快速给我们快速的答案，让我们在**某些**时候跳过逐字节的比较。

通常，证明平等的唯一捷径是证明身份。在 OO 代码中，这将显示两个对象，实际上是同一个对象。文件中最接近的情况是绑定或 NTFS 连接是否意味着两个路径指向同一个文件。这种情况很少发生，除非工作的性质使它比正常情况更常见，否则它不会成为检查的净收益。

因此，我们在寻找不匹配方面是走捷径。不会增加我们的通行证，但会使我们的失败更快：

1.  大小不同，不是逐字节相等。简单！
2.  如果您将多次检查同一个文件，则对其进行哈希处理并记录哈希值。不同的哈希，保证不相等。需要一对一比较的文件大大减少。
3.  许多文件格式可能有一些共同点。特别是许多格式的第一个字节往往是“幻数”、标题等。要么跳过它们，要么跳过然后最后检查（如果它们有可能不同但它很低）。

然后是尽可能快地进行实际比较的问题。一次将 4 个八位字节的批次加载到一个整数中并进行整数比较通常比 octet-per-octet 更快。

线程可以提供帮助。一种方法是将文件的实际比较拆分为多个操作，但如果可能的话，通过在不同线程中进行完全不同的比较可以获得更大的收益。我需要更多地了解您正在做什么以提供更多建议，但主要是确保测试的输出是线程安全的。

如果您确实有多个线程检查相同的文件，请让它们彼此远离工作。例如，如果您有四个线程，您可以将文件一分为四，或者您可以让一个占用字节 0、4、8，而另一个占用字节 1、5、9 等（或 4 字节组 0、4、8 ETC）。后者比前者更容易出现[虚假共享](http://en.wikipedia.org/wiki/False_sharing)问题，所以不要这样做。

编辑：

它还取决于您对文件所做的工作。您说您需要 100% 的确定性，所以这一点不适用于您，但是对于更普遍的问题，如果误报的成本是浪费资源、时间或内存而不是实际失败，则值得添加，然后通过模糊的捷径减少它可能是一个净赢，值得分析看看是否是这种情况。

如果您正在使用散列来加快速度（它至少可以更快地找到一些明确的不匹配），那么[Bob Jenkins 的 Spooky Hash](http://burtleburtle.net/bob/hash/spooky.html)是一个不错的选择；它不是加密安全的，但如果这不是你的目的，它会非常快速地创建为 128 位哈希（比加密哈希快得多，甚至比许多`GetHashCode()`实现所采用的方法快得多），非常擅长不发生意外冲突（排序避免加密哈希的故意冲突是另一回事）。我为 .Net 实现了它[并将其放在 nuget 上，](https://www.nuget.org/packages/SpookilySharp/)因为当我发现自己想要使用它时，没有其他人拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T22:06:03.950

## 串行比较

测试文件大小：118 MB
持续时间：**579 ms**
是否相等？真的

```
 static bool Compare(string filePath1, string filePath2)
    {
        using (FileStream file = File.OpenRead(filePath1))
        {
            using (FileStream file2 = File.OpenRead(filePath2))
            {
                if (file.Length != file2.Length)
                {
                    return false;
                }

                int count;
                const int size = 0x1000000;

                var buffer = new byte[size];
                var buffer2 = new byte[size];

                while ((count = file.Read(buffer, 0, buffer.Length)) > 0)
                {
                    file2.Read(buffer2, 0, buffer2.Length);

                    for (int i = 0; i < count; i++)
                    {
                        if (buffer[i] != buffer2[i])
                        {
                            return false;
                        }
                    }
                }
            }
        }

        return true;
    } 
```

## 并行比较

测试文件大小：118 MB
持续时间：**340 毫秒**
是否相等？真的

```
 static bool Compare2(string filePath1, string filePath2)
    {
        bool success = true;

        var info = new FileInfo(filePath1);
        var info2 = new FileInfo(filePath2);

        if (info.Length != info2.Length)
        {
            return false;
        }

        long fileLength = info.Length;
        const int size = 0x1000000;

        Parallel.For(0, fileLength / size, x =>
        {
            var start = (int)x * size;

            if (start >= fileLength)
            {
                return;
            }

            using (FileStream file = File.OpenRead(filePath1))
            {
                using (FileStream file2 = File.OpenRead(filePath2))
                {
                    var buffer = new byte[size];
                    var buffer2 = new byte[size];

                    file.Position = start;
                    file2.Position = start;

                    int count = file.Read(buffer, 0, size);
                    file2.Read(buffer2, 0, size);

                    for (int i = 0; i < count; i++)
                    {
                        if (buffer[i] != buffer2[i])
                        {
                            success = false;
                            return;
                        }
                    }
                }
            }
        });

        return success;
    } 
```

## MD5 比较

测试文件大小：118 MB
持续时间：**702 ms**
是否相等？真的

```
 static bool Compare3(string filePath1, string filePath2)
    {
        byte[] hash1 = GenerateHash(filePath1);
        byte[] hash2 = GenerateHash(filePath2);

        if (hash1.Length != hash2.Length)
        {
            return false;
        }

        for (int i = 0; i < hash1.Length; i++)
        {
            if (hash1[i] != hash2[i])
            {
                return false;
            }
        }

        return true;
    }

    static byte[] GenerateHash(string filePath)
    {
        MD5 crypto = MD5.Create();

        using (FileStream stream = File.OpenRead(filePath))
        {
            return crypto.ComputeHash(stream);
        }
    } 
```

* * *

tl;dr 并行比较字节段以确定两个文件是否相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:20:51.040

最终，哈希无论如何都会逐字节读取文件......因此，如果您正在寻找准确的比较，那么您不妨进行比较。您能否提供更多有关您要完成的工作的背景信息？“大”文件有多大？您需要多久比较一次它们？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T21:15:03.140

如果您想要完美的比较，则无法避免进行逐字节比较（仍然必须逐字节读取文件才能进行任何散列），因此问题在于您如何读取和比较数据。

因此，您需要解决两件事：

*   并发性 - 确保在检查数据的同时读取数据。
*   缓冲区大小 - 一次读取 1 个字节的文件会很慢，请确保将其读取到大小合适的缓冲区中（对于非常大的文件，大约 8MB 应该可以很好地完成）

目的是确保您可以像硬盘读取数据一样快地进行比较，并且您*始终*可以毫无延迟地读取数据。如果您所做的一切都尽可能快地从驱动器中读取数据，那么这就是尽可能快的速度，因为硬盘读取速度成为瓶颈。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T21:31:03.670

如果您有大量文件并且您正在尝试识别重复文件，我会尝试按费用顺序分解工作。我可能会尝试以下方法：

1) 按大小对文件进行分组。不同大小的文件显然不可能完全相同。检索此信息非常便宜。如果每个组仅包含 1 个文件，则您已完成，没有重复，否则继续执行步骤 2。

2) 在每个大小组内生成文件前 n 个字节的哈希值。确定一个可能会发现差异的合理 n。许多文件具有相同的标头，因此您不必确保 n 大于该标头长度。按哈希分组，如果每个组包含 1 个文件，则完成（该组内没有重复），否则继续执行步骤 3。

3）此时您可能需要做更昂贵的工作，例如生成整个文件的哈希值，或者进行逐字节比较。根据文件的数量和文件内容的性质，您可以尝试不同的方法。希望之前的分组将缩小可能的重复项，以便您实际必须完全扫描的文件数量将非常少。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T21:13:25.450

为什么不兼得？

与第一遍的哈希值进行比较，然后返回冲突并执行逐字节比较。这允许在保证 100% 匹配置信度的情况下实现最大速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T21:30:00.123

要计算哈希，需要读取整个文件。

如何同时打开两个文件，然后逐块比较它们？

伪代码：

```
open file A
open file B
while file A has more data
{
    if next chunk of A != next chunk of B return false
}
return true 
```

这样你就不会一起加载太多，如果你之前发现不匹配，也不会读取整个文件。您应该设置一个改变块大小的测试，以确定最佳性能的正确大小。

# crystal-reports - 如何根据详细信息部分中的列值条件隐藏水晶报表中的组标题

> ID：12116705
> 
> 赞同：1
> 
> 时间：2012-08-24T21:10:10.507
> 
> 标签：crystal-reports, reporting

我希望以前一定有人处理过这种情况。

我有一份水晶报告，在该报告上我有不同的部分，包括页眉、细节和页脚。我在详细信息部分显示与零件相关的信息，描述是正在显示的字段之一。

所以现在根据部分的描述（详细部分）我必须在页眉上显示一些文本。所以我必须为每个单独的部分寻找部分的描述，如果即使一个部分在所有部分中都有给定的描述，我必须在报告标题上打印一条消息。

我的假设是在页眉部分使用条件抑制选项，但不确定如何在页眉级别检查详细信息部分的值。

任何帮助将不胜感激。

谢谢 NAF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T22:28:26.983

这是我接近它的方式。

创建一个公式，当满足您的条件时返回 1，否则返回 0。例如：

`if {table.field} like '*acid*' then 1 else 0;`

然后你的条件抑制可以总结你的新公式 - 如果结果为 0，它将隐藏消息。

`sum({formula}) = 0`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-24T22:05:50.560

如果您想在*报告标题*中显示它，那么我将使用**SQL 表达式**有条件地抑制您想要的文本。

SQL 表达式

```
(select count(1) from dbo.TABLE where description = 'my_description') 
```

然后在抑制公式中：

```
{?SQL_EXPRESSSION} = 0 
```

# jquery - 如何使用 jQuery 将同一个处理程序绑定到多个事件

> ID：12116706
> 
> 赞同：2
> 
> 时间：2012-08-24T21:10:30.850
> 
> 标签：jquery

只是想知道是否有办法简化以下脚本...感谢您的帮助。

```
$('#right-arrow').live('click', function(){
        removt();
        callAjaxToCheck();
        show = true;
})

$('#tab').click(function(){
   removeTut();
   callAjaxToCheck();
   show = true;

})

$('left-arrow').live('click', function(){
        removeT();
        callAjaxToCheck();
        show = true;
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:13:19.150

**始终在代码中包含分号。** （你在`})`线条之后错过了它们）。

我认为最干净的方法是创建一个单独的函数：

```
function doStuff() {
    removeTut();
    callAjaxToCheck();
    showTutorial = true;
}

$('#eplanner-view-range-right-arrow').live('click', doStuff);
$('#lesson-search-tab').click(doStuff);
$('#eplanner-view-range-left-arrow').live('click', doStuff); 
```

当然，您应该使用比`doStuff`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:12:22.080

使用[多重选择器](http://api.jquery.com/multiple-selector/)：

```
$('#eplanner-view-range-right-arrow,#lesson-search-tab,#eplanner-view-range-left-arrow').live('click', function(){
   removeTut();
   callAjaxToCheck();
   showTutorial = true;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T21:13:07.050

```
var func = function() {
    "use strict";
    removeTut();
    callAjaxToCheck();
    showTutorial = true;
};

$("#parent").on("click", "#eplanner-view-range-right-arrow, #eplanner-view-range-left-arrow", func);
$("#lesson-search-tab").click(func); 
```

从 jQuery 版本 1.7+ 开始，更改`.live()`为[`.on()`](http://api.jquery.com/on/)as`.live()`已弃用。如果您正在运行旧版本的 jQuery，请不要更改`.live()`.

# javascript - IE9 - Mime 类型不匹配 - 对象不支持属性

> ID：12116707
> 
> 赞同：1
> 
> 时间：2012-08-24T21:10:39.463
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-9

我正在玩一个名为 JRumble 的 JQuery 插件：http: [//jackrugile.com/jrumble/](http://jackrugile.com/jrumble/)

我设置了一个简单的小提琴来测试：http: [//jsfiddle.net/phillipkregg/4LP65/6/](http://jsfiddle.net/phillipkregg/4LP65/6/)

您可以看到该插件在 Chrome 和 Firefox 中运行良好，但在 IE9 上我遇到了一些错误。

截取了 IE Developers 工具的屏幕截图以显示它所指的内容：

![在此处输入图像描述](../Images/a56aac96a9d6870a7e5b6116e0b00271.png)

我复制了控制台中的文本以防该图像难以阅读：

```
HTML1115: X-UA-Compatible META tag ('IE=EmulateIE7') ignored because document mode is already finalized. 
4
HTML1115: X-UA-Compatible META tag ('IE=EmulateIE7') ignored because document mode is already finalized. 
4
HTML1115: X-UA-Compatible META tag ('IE=EmulateIE7') ignored because document mode is already finalized. 
4
SEC7112: Script from https://raw.github.com/jackrugile/jRumble/master/demo/js/jquery.jrumble.1.3.min.js was blocked due to mime type mismatch 
show
SCRIPT438: Object doesn't support property or method 'jrumble' 
show, line 26 character 2 
```

当我查找与 相关的问题时`Object doesn't support property or method 'jrumble'`，一些解决方案表明这可能是由与 JavaScript 变量名相同的 id 或类名引起的。但是，在我的简单示例中没有冲突的名称，它仍然无法在 IE 中工作。

**仅从控制台来看，问题似乎是 mime 类型的不匹配导致 IE 无法看到 JRumble。**

这真的是问题吗？有谁知道如何解决这个问题？

**谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:33:18.533

要进一步解决此问题，请转到网络选项卡，开始捕获，然后重新加载页面。找到脚本并转到其详细视图。检查`content-type`响应头，看看它是什么。

可以通过从您自己的服务器提供具有正确标头的文件来规避此问题。

# java - Spring & Hibernate 配置错误无法从 URL 位置导入 bean 定义

> ID：12116708
> 
> 赞同：1
> 
> 时间：2012-08-24T21:10:42.463
> 
> 标签：java, spring, hibernate, jakarta-ee

我正在尝试使用 NetBeans 开发环境在 Windows 7 x66 上设置新的 Spring/Hibernate/Apache 7/MySQL。

NetBeans 已经预先打包了所有必需的 Spring Framework 和 Hibernate JARS。

我收到以下错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener 

org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:./WEB-INF/hibernate-context.xml]
Offending resource: ServletContext resource [/WEB-INF/applicationContext.xml]; 
```

这表明我的 applicationContext.xml 无法使用以下标签找到我的 hibernate-context.xml ：

**方法一#**

```
<import resource="hibernate-context.xml" /> 
```

**方法#2**

```
<import resource="classpath:./WEB-INF/hibernate-context.xml" /> 
```

我的 hibernate-context.xml 实际上存在于“../WEB-INF/hibernate-context.xml”中</p>

所以这似乎是某种 Spring 类路径问题，我在环境变量中设置了类路径，但仍然出现错误。

请告诉我一个干净的解决方案。

**网页.xml：**

```
<web-app metadata-complete="true" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>cmgr</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>cmgr</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout> 
            30 
        </session-timeout>
    </session-config> 
```

**应用程序上下文.xml：**

```
<beans  xmlns="http://www.springframework.org/schema/beans"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
xmlns:p="http://www.springframework.org/schema/p"  
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:tx="http://www.springframework.org/schema/tx"       
xmlns:context="http://www.springframework.org/schema/context"       
xsi:schemaLocation="    http://www.springframework.org/schema/beans     
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   
http://www.springframework.org/schema/tx     
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd    
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/context    
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Activates various annotations to be detected in bean classes --> 
    <context:annotation-config />
    <!-- Scans the classpath for annotated components that will be auto-registered as Spring beans.   For example @Controller and @Service. Make sure to set the correct base-package--> 
    <context:component-scan base-package="com.cmgr" />    
    <!-- Configures the annotation-driven Spring MVC Controller programming model.  Note that, with Spring 3.0, this tag works in Servlet MVC only!  --> 
    <mvc:annotation-driven/>
    <!-- mapping of static resources-->
    <mvc:resources mapping="/resources/**" location="/resources/" />
    <import resource="classpath:./WEB-INF/hibernate-context.xml" />     
</beans> 
```

**休眠上下文.xml：**

```
<beans  xmlns="http://www.springframework.org/schema/beans"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
xmlns:p="http://www.springframework.org/schema/p"  
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:tx="http://www.springframework.org/schema/tx"       
xmlns:context="http://www.springframework.org/schema/context"       
xsi:schemaLocation="    http://www.springframework.org/schema/beans     
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   
http://www.springframework.org/schema/tx     
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd    
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/context    
http://www.springframework.org/schema/context/spring-context-3.0.xsd">
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!-- Declare a datasource that has pooling capabilities-->  
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"    
destroy-method="close"    p:driverClassName="com.mysql.jdbc.Driver"    
p:url="jdbc:mysql://localhost:3306/cmgr"   
p:username="root"    
p:password="pass"    
p:maxActive="0"    
p:initialSize="50"/>
<!-- Declare the Hibernate SessionFactory for retrieving Hibernate sessions -->   
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">    
<property name="dataSource" ref="dataSource"/>    
<property name="configLocation" value="hibernate.cfg.xml"/>    
<property name="packagesToScan" value="com.cmgr.controller" />
</bean>  <!-- Enable annotation style of managing transactions --> 
<tx:annotation-driven transaction-manager="transactionManager" /> 
<!-- Declare a transaction manager--> 
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" p:sessionFactory-ref="sessionFactory" />
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:06:51.917

您通常有 Web.xml 中提到的 application-context.xml。这是所有 spring 上下文文件的主配置。

application-context.xml 又包含导入的单独的上下文 xml 文件；正如你所做的那样。

这通常是采取的方法。

如果您已经有固定数量的上下文文件并且您没有看到它们发生变化，您可以这样做：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        WEB-INF/applicationContext.xml,
        classpath:hibernate-context.xml
    </param-value>
  </context-param> 
```

只要上下文文件在您的类路径中；您可以只使用“类路径：”它应该可以正常工作。

# c++ - 如何使用mac的默认midi音序器作为midi out？

> ID：12116709
> 
> 赞同：1
> 
> 时间：2012-08-24T21:10:43.307
> 
> 标签：c++, macos, midi

我一直在尝试用 rtmidi 播放 midi 声音。我已经成功地链接它并编译了示例程序。但不幸的是，我看不到我的雪豹自己的 midi 音序器作为输出端口。我还尝试使用 coremidi 库打开一个 midi 输出端口，但没有成功。

如何让 rtmidi 或其他库将其消息直接发送到苹果自己的 midi 音序器？我应该启动一个 MIDI 输出服务器吗？如果是这样，我该怎么做？

任何帮助将不胜感激。

PS：我正在尝试发送这些消息并播放这些声音以将我的电脑键盘变成乐器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:32:14.713

所以您只是对从桌面键盘生成 MIDI 音符并在本地播放它们感兴趣？您不需要处理输出端口、RTMidi 或类似的东西。如果您想将消息事件发送到外部合成器，您只需要这样做。

请参阅此[PlaySoftMidi](http://developer.apple.com/library/mac/#samplecode/PlaySoftMIDI/Listings/main_cpp.html) Apple 示例代码，以通过软合成器生成音符。如果您想加载自己的声音库（声音字体 2 或 DSL），请搜索“AUSampler”和“MusicDeviceMIDIEvent” - 那里有一些教程（[链接](http://quickdekay.net/Software/Tutorials/CoreAudio/)）

# sharepoint - 在另一台 PC 上从 c# 运行 sharepoint powershell？

> ID：12116714
> 
> 赞同：0
> 
> 时间：2012-08-24T21:11:15.470
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

如果 C# 应用程序与 sharepoint 在同一台服务器上，我知道我们可以使用 RunSpace 运行 pwoershell 脚本，但如果 C# 应用程序. 和sharepoint服务器在不同的PC上？

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:28:49.360

是的，它有可能，虽然很乱。在 Powershell 2.0+ 中，有一个称为远程 powershell 的功能，因此您可以通过 c# 代码有效地将 Powershell 命令发送到本地 powershell 实例，并使用它来登录远程实例。

一个稍微不那么疯狂的想法是简单地在远程机器上创建一个 Web 服务，并让它从 Web 服务运行远程 powershell 命令。

更不疯狂的想法是编写一个 Web 服务，并在远程服务器上运行该代码。:)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:22:07.570

如果您是远程机器上的管理员，您可以尝试结合[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)和 PowerShell。

# python - python的re.sub是否将数组作为输入参数？

> ID：12116717
> 
> 赞同：2
> 
> 时间：2012-08-24T21:11:18.323
> 
> 标签：python, regex, arrays, replace, preg-replace-callback

根据[http://www.php2python.com/wiki/function.preg-replace-callback/](http://www.php2python.com/wiki/function.preg-replace-callback/) re.sub 是 PHP 的 preg_replace_callback 的 python 等价物，但是 php 版本需要一个数组来匹配要匹配的字符串，所以你可以传递多个字符串，但 re.sub 似乎只接受一个字符串。

这是对的还是我对python的了解不足？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T01:30:29.593

如果要在数组上执行此操作，可以使用列表推导，例如

```
>>> array_of_strings = ["3a1", "1b2", "1c", "d"]
>>> [re.sub("[a-zA-Z]", "", elem) for elem in array_of_strings]
["31", "12", "1", ""] 
```

虽然如果您使用的是复杂的表达式，您可能应该[`re.compile`](http://docs.python.org/library/re.html#re.compile)先在模式上使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:17:55.770

它只需要一个字符串[http://docs.python.org/library/re.html#re.sub](http://docs.python.org/library/re.html#re.sub)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-17T01:48:52.653

我知道的派对迟到了，但如果这是您想要封装到函数中的多步骤过程的要求，那么您可以通过 numpy vectorize 进行处理：

```
def EliminateAlpha(elem):
    return re.sub("[a-zA-Z]", "", elem)

ElimAlphaArray = np.vectorize(ElimateAlpha)

array_of_strings = ["3a1", "1b2", "1c", "d"]
print(ElimAlphaArray(array_of_strings))

['31' '12' '1' ''] 
```

当然，你可以直接将 re.sub 函数用于向量化：

```
ElimAlphaArr = np.vectorize(re.sub)
print(ElimAlphaArr("[a-zA-Z]", "", array_of_strings))

['31' '12' '1' ''] 
```

# android - Android 操作栏选项卡在一个选项卡中显示多个片段

> ID：12116720
> 
> 赞同：0
> 
> 时间：2012-08-24T21:11:29.247
> 
> 标签：android, tabs, android-actionbar

我正在创建一个选项卡式应用程序，其中一个选项卡的主要活动是部门列表。当您单击一个部门时，它会启动一个列出部门中文档的新活动。

我的问题是当它显示文档列表时，选项卡式视图消失了。而且我想不断地将标签保持在顶部。我试图将 TabActivity 扩展到在选项卡下启动的每个活动，但随后列表视图相互创建。

我还尝试在没有 tablistener 启动活动的情况下创建选项卡，因此我只能在第一次调用选项卡时创建侦听器，但这是不允许的。

任何帮助将不胜感激，也许有一些我完全错过的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:26:41.030

> 而且我想不断地将标签保持在顶部。

然后，当用户点击选项卡时，您不应该开始活动。您的选项卡内容应该是片段或由您的`TabListener`. 活动作为选项卡内容的概念现在已被弃用（恕我直言，一开始是个坏主意）。

> 我试图将 TabActivity 扩展到在选项卡下启动的每个活动，但随后列表视图相互创建。

您会注意到它`TabActivity`已被弃用，特别是对于活动作为选项卡的内容概念。

# javascript - 将修改后的数组作为参数传递给函数

> ID：12116721
> 
> 赞同：2
> 
> 时间：2012-08-24T21:11:30.057
> 
> 标签：javascript, jquery

我一直在为下面的代码苦苦挣扎太久，试图弄清楚如何将每次点击都会修改的数组传递给函数。

问题是，一旦修改了 clickedLinks 数组，它就会影响 shoplist 函数中的passedLinks 数组。

我什至[很好地解释](https://stackoverflow.com/a/12061738/932210)了为什么会发生这种情况，但我无法将其正确应用到我的示例中。我尝试在不同的点清除数组，但没有成功。我开始怀疑我的代码的整个逻辑是否有缺陷。

任何帮助，将不胜感激。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>
      Test 1
    </title>
    <script src="http://code.jquery.com/jquery-latest.js" type=
    "text/javascript">
</script>
  </head>
  <body>
    <div class="items">
      <ul>
        <li>
          <a href="#" id="link1">Link 1</a>
        </li>
        <li>
          <a href="#" id="link2">Link 2</a>
        </li>
        <li>
          <a href="#" id="link3">Link 3</a>
        </li>
        <li>
          <a href="#" id="link4">Link 4</a>
        </li>
      </ul>
    </div>

<script type="text/javascript">
    var clickedLinks = [];
    var passedItems = [];

    // Collect clicked link IDs into an array and pass the array as an argument to shoplist()
    $('.items a').click(function () {

    if (clickedLinks.indexOf(this.id) != -1) {
        var linkIndex = clickedLinks.indexOf(this.id);
        clickedLinks.splice(linkIndex, 1);
    } else {
        clickedLinks.push(this.id);
    }

    shoplist(clickedLinks);

    });

    function shoplist(ids) {
        passedItems.push(ids);
        alert(passedItems);
    }
</script>
</body>
</html> 
```

**脚步：**

1.  点击“链接1”
2.  点击“链接2”

**预期结果：**警报窗口显示“link1、link1、link2”

**实际结果：**警报窗口显示“link1、link2、link1、link2”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:30:10.263

您`ids`按原样推送数组，但稍后会更改。您应该使用`slice`. 就像是：

```
passedItems.push(ids.slice()); 
```

另外，我无法理解该`if`条款的必要性。如果该项目已经存在，请不要添加它；还是我错过了什么？

见[演示](http://jsfiddle.net/mhusaini/zFt7k/1/)。

# linux - 使用 webutil_file_transfer 上传文件后无法运行 UNIX 命令

> ID：12116722
> 
> 赞同：0
> 
> 时间：2012-08-24T21:11:30.783
> 
> 标签：linux, unix, oracleforms, oas

操作系统：UNIX Solaries , Oracle Application Server 10g
我设计了一个 Oracle 表单，包含 2 个按钮
1-**上传**按钮：让用户使用 webutil_file_transfer 函数将 form.fmb 文件上传到应用程序服务器
2-**编译**按钮以在应用程序中编译上传的表单服务器使用以下命令生成 FMX

```
 host('/bin/bash /u01/oracle/runtime/test/frmkfccmp.sh >/u01/oracle/runtime/test/log.log');
```

问题是在将文件上传到服务器后，编译按钮不起作用，尽管如果我关闭表单然后再次打开它并按下编译按钮而不按下**上传**按钮，它会很好地工作

任何帮助表示赞赏

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:16:29.480

我通过为编译创建单独的表单来克服这个问题

# mysql - MySQL 追加不相关的表

> ID：12116723
> 
> 赞同：1
> 
> 时间：2012-08-24T21:11:39.020
> 
> 标签：mysql, join, append

我需要以不重复信息的方式将 Table1 附加到 Table2。

例子：

表格1

```
Name   | Age
-------|-----
Jason  | 30
John   | 40
Joseph | 50
Bob    | 60 
```

表2

```
Type
--------
Dog
Cat
Fish 
```

我需要加入才能制作

```
Name  | Age | Type
------|-----|-------
Jason | 30  | Dog
John  | 40  | Cat
Joseph| 50  | Fish
Bob   | 60  | NULL 
```

所以它只返回四行而不是 12 或更多。没有可以关联这两个表的 ID 或其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:16:46.027

试试这个：

```
SELECT  A.rank, A.NAME, A.AGE, B.TYPE FROM
(select @rownum:=@rownum+1 ‘rank’, T1.NAME, T1.AGE from 
TABLE1 T1, (SELECT @rownum:=0) r) A
LEFT JOIN
(select @rownum:=@rownum+1 ‘rank’, T2.TYPE from 
TABLE2 T2, (SELECT @rownum:=0) r) B
ON A.rank = B.rank 
```

并检查这些：

[MySQL 中的 ROW_NUMBER()](https://stackoverflow.com/questions/1895110/row-number-in-mysql)

[http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/](http://craftycodeblog.com/2010/09/13/rownum-simulation-with-mysql/)

[http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/](http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:15:51.367

如果可能，请尝试更改两个表以添加索引列，然后以这种方式加入索引列

```
ALTER table1 add id INT NOT NULL;

ALTER table2 add id INT NOT NULL;

select table1.Name, table1.Age, table2.Type from table1 inner join table2 on table1.id= table2.id 
```

# javascript - 在显示 Bootstrap 弹出框之前执行功能？

> ID：12116725
> 
> 赞同：3
> 
> 时间：2012-08-24T21:11:49.473
> 
> 标签：javascript, jquery, function, twitter-bootstrap, popover

我最近开始使用 Twitter 的新 Bootstrap 2.0.1 及其 Javascript 弹出框。

我想编写一个脚本，以便一次只能显示一个弹出框。换句话说，无论出于何种原因（例如，客户端单击或将鼠标悬停在带有弹出框的新元素上）生成新的弹出框时，所有先前显示的弹出框都将首先隐藏。

这是最初为我的网页设置所有弹出框的函数：

```
$(function (){
    $("[rel=popover]").popover({placement:'left', trigger:'click', html:true});
}); 
```

我认为，我需要的是编写一个隐藏所有弹出框的函数。我会在显示每个弹出框之前调用该函数，以确保一次只显示一个弹出框。我想这个函数可能看起来像这样：

```
function hidePopovers(){
    $(function (){
        $("[rel=popover]").popover('hide');
    });
} 
```

但我的问题是弄清楚在哪里（或如何）调用这个 hidePopovers 函数。我想在触发弹出框时调用它，但在显示弹出框之前。帮助？

哦，为了消除任何混淆，新的 Bootstrap 现在有一个“点击”触发器，允许您在点击时显示弹出框。[可以在此处找到有关它的更多详细信息](http://twitter.github.com/bootstrap/javascript.html#popovers)。

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T06:28:03.067

考虑到您提出的要解决的问题，我认为简单地存储对上次打开的弹出框的引用会更有效，而不是在`hide()`您可能在页面上选择的每个弹出框元素上执行该方法。据我了解，您首先只希望打开一个弹出框，因此最多只能隐藏一个弹出框。

以下方法可以解决问题：

```
var $visiblePopover;

$('body').on('click', '[rel="popover"]', function() {
  var $this = $(this);

  // check if the one clicked is now shown
  if ($this.data('popover').tip().hasClass('in')) {

    // if another was showing, hide it
    $visiblePopover && $visiblePopover.popover('hide');

    // then store reference to current popover
    $visiblePopover = $this;

  } else { // if it was hidden, then nothing must be showing
    $visiblePopover = '';
  }
});​ 
```

## [JSFiddle](http://jsfiddle.net/mmfansler/ApkeD/)

从技术上讲，您可能会将附加委托处理程序的选择器（在使用示例代码`'body'`中）更改为页面的更具体的元素，从而允许您将一次唯一可见的行为附加到仅页面上弹出框的子集。

例如，如果您有一个特定的表单，其中弹出窗口看起来太靠近，但页面上的其他弹出窗口不会碰撞/重叠，您可以只选择表单（例如，`'#some_form_id'`），并且只有表单中的弹出窗口会有这种行为。

## [JSFiddle](http://jsfiddle.net/mmfansler/3QrWF/)

[**注意**：在后一个示例中，我还通过将存储的引用更改为仅使用实际的 Popover 对象而不是附加到它的 jQuery 化的 DOM 元素，对代码进行了一些优化。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:27:57.770

尚未对此进行测试，但类似这样的方法可能有效：

将触发器设置为手动。监听点击事件并在点击时调用 hidePopovers()，然后显示点击的弹出框。

```
$(function (){
    function hidePopovers(){
        $(function (){
            $("[rel=popover]").popover('hide');
        });
    }
    $("[rel=popover]").popover({placement:'left', trigger:'manual', html:true});
    $("[rel=popover]").click(function() { hidePopovers(); $(this).popover('show');});
}); 
```

# ms-access - 为什么我的 Access 表单在最后一条记录后一直滚动？

> ID：12116730
> 
> 赞同：0
> 
> 时间：2012-08-24T21:12:08.073
> 
> 标签：ms-access, ms-access-2007

我正在开发一个 Access 2007 表单。它的主要目的是在底部显示带有关闭按钮的记录（通常超过 1 页）。一些亮点：

*   它是连续的
*   滚动条已启用。
*   我正在用 41 条记录对此进行测试。大约一页半。

问题是：如果在最后一条记录之后继续滚动，屏幕将返回到中间记录左右。这似乎不是我熟悉的任何标准 GUI 行为。

当最后一条记录位于屏幕顶部时，如何让它停止滚动？

### 编辑

当我发布此内容时，我什至没有考虑它，但我使用 Page Down 和箭头键得到了预期的行为。我似乎只有使用鼠标滚轮才能得到这种行为。

# css - 嵌套的 CSS 溢出-(x) 属性如何交互？

> ID：12116732
> 
> 赞同：1
> 
> 时间：2012-08-24T21:12:27.950
> 
> 标签：css

我认为这足以提出我的问题。

在 ExtJS 4.1.1 面板中观察到以下情况，该面板采用边框布局，带有用于调整包含树形面板的面板大小的滑块。中间的文本显示为省略号截断，树面板显示少量水平滚动条，足以使 ... 出现和消失。这是怎么回事？是“隐藏”触发...？

```
<div style='overflow-x: auto'>
<table>
 <tbody>
   <tr> <!-- no spec , chrome says 'visible'-->
    <td style='overflow-x: hidden'>
     <div style='overflow-x: hidden'>
       <span style='overflow-x: visible">
         This is a fairly long string
       </span>
     </div>
    </td>
   </tr>
  </tbody>
 </table>
 </div> 
```

# sql - 这个sql的Rails活动记录转换

> ID：12116735
> 
> 赞同：3
> 
> 时间：2012-08-24T21:12:40.383
> 
> 标签：sql, ruby-on-rails-3, activerecord

> 选择players.name, batsmen.* FROM batsmen INNER JOIN player ON player.id = batsmen.player_id WHERE League_id = 13

我将如何做到这一点？我正在使用 Rails 框架和 MySQL。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:30:51.823

试试这个：

```
Player.joins(:batsmen).select('players.name, batsmen.*').where('batsmen.league_id = ?', 13) 
```

# asp.net - AspNet 角色提供者开始了，它不应该是

> ID：12116736
> 
> 赞同：2
> 
> 时间：2012-08-24T21:12:53.773
> 
> 标签：asp.net

我收到此错误：

```
Line 246:       <roleManager>
Line 247:           <providers>
Line 248:               <add name="AspNetSqlRoleProvider"     connectionStringName="LocalSqlServer" applicationName="/"  type="System.Web.Security.SqlRoleProvider, System.Web, Version=4.0.0.0, Culture=neutral,     PublicKeyToken=b03f5f7f11d50a3a"/>
Line 249:               <add name="AspNetWindowsTokenRoleProvider" applicationName="/" type="System.Web.Security.WindowsTokenRoleProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
Line 250:           </providers>

Source File: C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config    Line: 248 
```

但是，它不应该是因为我们没有使用 aspnetroleprovider。但它在 machine.config 中。其他网站没有这个问题。是什么让它选择了 aspnetsqlroleprovider？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:28:39.700

**使固定**

将`enableSimpleMembership`价值`false`应用设置添加到您的`web.config`.

**原因**

```
<roleManager enabled="false" /> 
```

将导致`Roles.Enabled`flag 设置为`false`，如预期的那样，

**但是**有“WebMatrix.WebData.WebSecurity”说：

```
internal static void PreAppStartInit()
{
  if (!ConfigUtil.SimpleMembershipEnabled)
    return;
  ...
  Roles.Enabled = true;
  const string BuiltInRolesProviderName = "AspNetSqlRoleProvider";
  var builtInRoles = Roles.Providers[BuiltInRolesProviderName];
  if (builtInRoles != null)
  {
      var simpleRoles = CreateDefaultSimpleRoleProvider(BuiltInRolesProviderName, currentDefault: builtInRoles);
      Roles.Providers.Remove(BuiltInRolesProviderName);
      Roles.Providers.Add(simpleRoles);
  }
  ...
} 
```

这将覆盖 roleManager 设置（此代码在 RoleManager 模块之前执行），包括添加 AspNetSqlRoleProvider

要禁用“SimpleMembership”，您可以`enableSimpleMembership`使用`value="false"`(web.config) 添加应用设置：

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
    <appSettings>
        <add key="enableSimpleMembership" value="false" />
    </appSettings>
</configuration> 
```

这将阻止 webmatrix 重新配置`RoleManager`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:30:12.713

添加`<clear/>`到您的 web.config 的角色提供者部分。这样，如果您不使用继承，就可以避免继承。您还应该为`Membership`和`Profile`提供者部分添加它。

```
<roleManager>
   <providers>
      <clear/>
   </providers>
   .... 
```

编辑：也许你需要明确地删除它：

```
<roleManager>
       <providers>
          <clear/>
          <remove name="AspNetSqlRoleProvider" /> 
```

另一个尝试：

禁用角色提供者：

```
<system.web>
    <roleManager enabled="false" />
</system.web> 
```

[http://msdn.microsoft.com/en-us/library/ms998314.aspx#paght000013_step2](http://msdn.microsoft.com/en-us/library/ms998314.aspx#paght000013_step2)

# jquery - npm install jquery 在 node-gyp 重建时失败

> ID：12116740
> 
> 赞同：5
> 
> 时间：2012-08-24T21:13:24.327
> 
> 标签：jquery, node.js, npm

我似乎无法在最新版本的 npm/node 上安装 jquery。这是堆栈跟踪：

```
npm http GET https://registry.npmjs.org/jquery
npm http 304 https://registry.npmjs.org/jquery
npm http GET https://registry.npmjs.org/jsdom
npm http GET https://registry.npmjs.org/htmlparser/1.7.6
npm http GET https://registry.npmjs.org/xmlhttprequest
npm http GET https://registry.npmjs.org/location/0.0.1
npm http GET https://registry.npmjs.org/navigator
npm http 304 https://registry.npmjs.org/jsdom
npm http 304 https://registry.npmjs.org/xmlhttprequest
npm http 304 https://registry.npmjs.org/location/0.0.1
npm http 304 https://registry.npmjs.org/htmlparser/1.7.6
npm http 304 https://registry.npmjs.org/navigator
npm http GET https://registry.npmjs.org/cssom
npm http GET https://registry.npmjs.org/contextify
npm http GET https://registry.npmjs.org/request
npm http 304 https://registry.npmjs.org/contextify
npm http 304 https://registry.npmjs.org/cssom
npm http 304 https://registry.npmjs.org/request
npm http GET https://registry.npmjs.org/bindings
npm http 304 https://registry.npmjs.org/bindings

> contextify@0.1.3 install /root/node_modules/jquery/node_modules/jsdom/node_modules/contextify
> node-gyp rebuild

gyp ERR! configure error 
gyp ERR! stack Error: "pre" versions of node cannot be installed, use the --nodedir flag instead
gyp ERR! stack     at install (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/install.js:68:16)
gyp ERR! stack     at Object.commands.forEach.self.commands.(anonymous function) [as install] (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/node-gyp.js:56:37)
gyp ERR! stack     at getNodeDir (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:185:20)
gyp ERR! stack     at /usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:105:9
gyp ERR! stack     at ChildProcess.exithandler (child_process.js:534:7)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:91:17)
gyp ERR! stack     at maybeClose (child_process.js:634:16)
gyp ERR! stack     at Socket.ChildProcess.spawn.stdin (child_process.js:806:11)
gyp ERR! stack     at Socket.EventEmitter.emit (events.js:88:17)
gyp ERR! stack     at Socket._destroy.destroyed (net.js:356:10)
gyp ERR! System Linux 2.6.32-24-server
gyp ERR! command "node" "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild"
gyp ERR! cwd /root/node_modules/jquery/node_modules/jsdom/node_modules/contextify
gyp ERR! node -v v0.9.1-pre
gyp ERR! node-gyp -v v0.6.5
gyp ERR! not ok 
npm WARN optional dep failed, continuing contextify@0.1.3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:48:31.987

> 我似乎无法在最新版本的 npm/node 上安装 jquery。

Node.JS 的最新版本是[v0.8.8（稳定）](https://github.com/joyent/node/tree/v0.8.8)（[发行说明](http://blog.nodejs.org/2012/08/22/node-v0-8-8-stable/)，[下载](http://nodejs.org/download/)）和[v0.9.0（不稳定）](https://github.com/joyent/node/tree/v0.9.0)。

您当前正在运行的是`v0.9.1-pre`- 从正在完成的工作到发布的开发构建`v0.9.1`。

而且，这就是问题所在：

> 错误：无法安装节点的“pre”版本

您尝试安装的模块不支持在开发版本上运行。所以，你必须决定一个发布版本来尝试它们。

您可能还想记下 Node.JS 使用的[版本控制方案](https://github.com/joyent/node/wiki/FAQ)。

# php - CakePHP 网站主页的 Time to First Byte 很长

> ID：12116746
> 
> 赞同：2
> 
> 时间：2012-08-24T21:13:48.220
> 
> 标签：php, performance, cakephp, pagespeed, pingdom

我使用 pingdom 检查网站的加载时间。我发现了一些来自其他领域的瓶颈并修复了它们。但最慢的部分仍然存在。
主页几乎在 12 秒内打开！一秒钟来自所有内部和外部的 js、css 和 jpeg 文件。11秒来自主页。pingdom 结果中我的主页的详细信息：

```
DNS 157 ms
Connect 213 ms
Send 0 ms
Wait 10.5 s
Receive 56 ms 
```

我将 tic-toc 放在主页控制器的 beforeFilter 和 afterFilter 中。我在一小时内运行了很多次。结果是主页在 0.15 到 0.35 秒之间加载。

我 ping 我的服务器并得到 70 毫秒的结果。

我还能做些什么来诊断这种延迟？
谢谢

**编辑**：您可以从此[链接查看结果](http://tools.pingdom.com/fpt/#!/mTulwk8Cz/http://twitpalas.com)
**Edit2**：我的应用程序似乎运行了 0.35 秒。（主页甚至没有数据库查询）但我可以在 10-11 秒内在浏览器上看到结果。是因为访客负载吗？此时是否有太多访问者正在使用该网站？
**Edit3**：我仍然遇到这个问题。我发现服务器的**error_log**有太多的记录，如下所示。我希望这会提供一些信息：

```
Line 384: 2012-09-02 17:39:47.505 [INFO] [92.45.160.177:51491-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.230] on request #361, confirmed, 0, associated process: 705101, running: 1, error: Connection reset by peer!
Line 385: 2012-09-02 17:41:16.223 [INFO] [78.162.236.209:28170-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.671] on request #78, confirmed, 0, associated process: 705246, running: 0, error: Connection reset by peer!
Line 387: 2012-09-02 17:57:15.455 [INFO] [109.228.230.250:54280-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.412] on request #92, confirmed, 0, associated process: 709770, running: 0, error: Connection reset by peer!
Line 388: 2012-09-02 17:58:24.008 [INFO] [95.65.209.252:64082-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.858] on request #500, confirmed, 0, associated process: -1, running: 0, error: Connection reset by peer!
Line 395: 2012-09-02 18:14:53.744 [INFO] [85.103.215.78:54135-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.241] on request #460, confirmed, 0, associated process: 714360, running: 0, error: Connection reset by peer!
Line 401: 2012-09-02 18:34:22.476 [INFO] [78.173.185.165:14411-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.728] on request #500, confirmed, 0, associated process: 720637, running: 1, error: Connection reset by peer!
Line 402: 2012-09-02 18:35:07.269 [INFO] [78.174.20.184:53766-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock] on request #26, confirmed, 0, associated process: 720626, running: 0, error: Connection reset by peer!
Line 404: 2012-09-02 18:49:57.659 [INFO] [85.96.10.138:59346-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.728] on request #500, confirmed, 0, associated process: 724847, running: 0, error: Connection reset by peer!
Line 405: 2012-09-02 18:50:44.566 [INFO] [81.6.120.50:39926-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.173] on request #500, confirmed, 0, associated process: 725035, running: 0, error: Connection reset by peer!
Line 413: 2012-09-02 19:15:28.953 [INFO] [78.181.128.53:1344-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.738] on request #500, confirmed, 0, associated process: 731389, running: 1, error: Connection reset by peer!
Line 414: 2012-09-02 19:15:41.572 [INFO] [78.191.100.24:51095-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock] on request #500, confirmed, 0, associated process: 731344, running: 1, error: Connection reset by peer!
Line 417: 2012-09-02 19:33:09.700 [INFO] [78.165.162.13:65231-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.317] on request #58, confirmed, 0, associated process: 736102, running: 0, error: Connection reset by peer!
Line 419: 2012-09-02 19:43:16.749 [INFO] [178.233.166.110:51083-0#APVH_example.com] connection to [/tmp/lshttpd/APVH_example.com_Suphp.sock.895] on request #128, confirmed, 0, associated process: 738842, running: 0, error: Connection reset by peer! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:47:15.163

由于您的服务器上安装了 litespeed，您遇到页面速度慢的问题，您会因为配置错误而超时（响应缓慢）。查看您提供的日志。我没有 litespeed 的经验，但你可以试试看这些。

[http://www.litespeedtech.com/support/forum/showthread.php?t=6125](http://www.litespeedtech.com/support/forum/showthread.php?t=6125)

[http://bobcares.com/blog/?p=114](http://bobcares.com/blog/?p=114)

[CakePHP 和 suphp 套接字，由对等方重置连接](https://stackoverflow.com/questions/12249920/cakephp-and-suphp-socket-connection-reset-by-peer)

我还建议您尝试暂时禁用 litespeed 以确保这是主要原因。

# tsql - SSAS 数据源视图变量

> ID：12116748
> 
> 赞同：1
> 
> 时间：2012-08-24T21:13:58.463
> 
> 标签：tsql, variables, ssas, dataview

我正在尝试使用“新命名查询”在 SSAS 的数据源视图中添加一个表。脚本如下所示：

```
Declare @AvgInvestment float;
SELECT  @AvgInvestment=SUM(Investment)/COUNT(distinct meta_ID)
FROM AAAA

SELECT        Player, Investment, 
              InvestmentRange=
              Case When Investment >=0 AND  Investment <(@AvgInvestment/3)                       THEN 1
                   When Investment >=(@AvgInvestment/3) AND  Investment <(4*@AvgInvestment/3)    THEN 2                           
                   When Investment >=(4*@AvgInvestment/3) AND  Investment <(6*@AvgInvestment/3)  THEN 3                         
                   When Investment >=(2*@AvgInvestment)                                          THEN 4
             END                              
FROM  AAAA 
```

但是，SSAS 不允许在 SQL Query for DVS 中声明变量。是否有任何可能的方法来修改 SQL 语句以使其没有变量？我尝试将 @AvgInvestment 替换为 "SELECT SUM(Investment)/COUNT(distinct meta_ID) FROM AAAA" ，但它不起作用。

感谢您提供任何可能的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:29:23.493

你可以加入你的平均值，而不是使用变量。例如：

```
SELECT Player, Investment, 
       InvestmentRange=
       Case When Investment >=0 AND  Investment <(a.avg/3)              THEN 1
            When Investment >=(a.avg/3) AND  Investment <(4*a.avg/3)    THEN 2
            When Investment >=(4*a.avg/3) AND  Investment <(6*a.avg/3)  THEN 3                         
            When Investment >=(2*a.avg)                                 THEN 4
       END                               
FROM  AAAA cross join 
(select SUM(Investment)/COUNT(distinct meta_ID) as avg from aaaa) a 
```

在数据源视图中完美运行。存储过程在那里不起作用。

# vim - 我该如何粘贴？

> ID：12116751
> 
> 赞同：0
> 
> 时间：2012-08-24T21:14:04.453
> 
> 标签：vim, paste

如何在粘贴模式下粘贴`vim`？这应该不难找到，但在任何教程或 wiki 中都没有解释。我试图在**粘贴模式**下粘贴一段代码，但每次尝试时都会出错。我已经`F10`映射到粘贴切换。

我试过`F10``p`，粘贴未命名的寄存器，但没有奏效。

`F10``a`, 粘贴寄存器 a,

和`F10``CTRL-v`, 粘贴剪贴板，即使这样也没有用。

如何在粘贴模式下粘贴？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:27:22.673

我多次使用之前执行的指令`CTRL-SHIFT-v`将剪贴板中的内容粘贴到`vim`插入模式。`:set paste`

# python - 在python中删除某行文本文件

> ID：12116752
> 
> 赞同：0
> 
> 时间：2012-08-24T21:14:15.677
> 
> 标签：python, text, line

我有以下文本文件：

```
This is my text file
NUM,123
FRUIT
DRINK
FOOD,BACON
CAR
NUM,456
FRUIT
DRINK
FOOD,BURGER
CAR
NUM,789
FRUIT
DRINK
FOOD,SAUSAGE
CAR
NUM,012
FRUIT
DRINK
FOOD,MEATBALL
CAR 
```

我有以下名为“想要”的列表：

```
['123', '789'] 
```

我要做的是，如果 NUM 之后的数字不在名为“想要”的列表中，那么该行及其下方的 4 行将被删除。所以输出文件将如下所示：

```
This is my text file
NUM,123
FRUIT
DRINK
FOOD,BACON
CAR
NUM,789
FRUIT
DRINK
FOOD,SAUSAGE
CAR 
```

到目前为止，我的代码是：

```
infile = open("inputfile.txt",'r')
data = infile.readlines()

for beginning_line, ube_line in enumerate(data):
    UNIT = data[beginning_line].split(',')[1]
    if UNIT not in wanted:
        del data_list[beginning_line:beginning_line+4] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:35:08.593

循环遍历列表时不应修改列表。

您可以尝试的是在需要时仅在文件对象上推进迭代器：

```
wanted = set(['123', '789'])

with open("inputfile.txt",'r') as infile, open("outfile.txt",'w') as outfile: 
    for line in infile:
        if line.startswith('NUM,'):
            UNIT = line.strip().split(',')[1] 
            if UNIT not in wanted:
                for _ in xrange(4):
                    infile.next()
                continue

        outfile.write(line) 
```

并使用一套。不断检查会员资格更快。

这种方法不会让您一次读取整个文件以以列表形式处理它。它逐行进行，从文件中读取，前进，然后写入新文件。如果需要，您可以将 outfile 替换为要附加到的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:31:14.670

编辑：在迭代时删除项目可能不是一个好主意，请参阅：[在迭代时从列表中删除项目](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)

```
infile = open("inputfile.txt",'r')
data = infile.readlines()
SKIP_LINES = 4
skip_until = False

result_data = []
for current_line, line in enumerate(data):
    if skip_until and skip_until < current_line:
        continue

    try:
        _, num = line.split(',')
    except ValueError:
        pass
    else:
       if num not in wanted:
           skip_until = current_line + SKIP_LINES
       else:
           result_data.append(line) 
```

...`result_data`这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:36:00.840

代码有一些问题；例如，`data_list`甚至没有定义。如果它是 a `list`，则不能`del`从中获取元素；你只能`pop`。然后你在 ; 上同时使用`enumerate`和直接索引访问`data`。也不`readlines`需要。

我建议避免将所有行都保存在内存中，这里并不是真的需要。也许尝试使用类似（未经测试）的东西：

```
with open('infile.txt') as fin, open('outfile.txt', 'w') as fout:
   for line in fin:
       if line.startswith('NUM,') and line.split(',')[1] not in wanted:
           for _ in range(4):
               fin.next()
       else:
           fout.write(line) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:36:51.300

```
import re
# find the lines that match NUM,XYZ
nums = re.compile('NUM,(?:' + '|'.join(['456','012']) + ")")
# find the three lines after a nums match
line_matches = breaks = re.compile('.*\n.*\n.*\n')
keeper = ''
for line in nums.finditer(data):
    keeper += breaks.findall( data[line.start():] )[0] 
```

给定字符串的结果是

```
NUM,456
FRUIT
DRINK
FOOD,BURGER

NUM,012
FRUIT
DRINK
FOOD,MEATBALL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T21:59:31.380

如果您不介意建立一个列表，并且如果您的`"NUM"`行每隔 5 行出现一次，您可能想尝试：

```
keep = []
for (i, v) in enumerate(lines[::5]):
    (num, current) = v.split(",")
    if current in wanted:
        keep.extend(lines[i*5:i*5+5]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T00:31:35.833

不要试图从建立一个列表并在循环遍历它时从中删除内容的方面来考虑这一点。那样会导致疯狂。

直接编写输出文件要容易得多。循环输入文件的行，每次决定是否将其写入输出。

此外，为避免并非每一行都有逗号这一事实造成的困难，请尝试仅使用`.partition`而不是拆分行。那将始终返回 3 个项目：当有逗号时，您得到（在第一个逗号之前，逗号，在逗号之后）；否则，你会得到（整个东西，空字符串，空字符串）。所以你可以从那里使用最后一个项目，因为`wanted`无论如何都不会包含空字符串。

```
skip_counter = 0
for line in infile:
    if line.partition(',')[2] not in wanted:
        skip_counter = 5
    if skip_counter:
        skip_counter -= 1
    else:
        outfile.write(line) 
```

# iphone - 带有 RestKit 的 Xcode REST

> ID：12116753
> 
> 赞同：1
> 
> 时间：2012-08-24T21:14:18.270
> 
> 标签：iphone, objective-c, xcode, rest, restkit

我正在尝试使用 RestKit 模拟以下请求：

```
curl -X GET -H "Content-Type: application/json" -H "X-User: here@there.com" -H "X-Password: imapass" -D - -k https://api.application.com/v2/auth 
```

我正在寻找一些指导，因为我是 RestKit 的相对新手，并且这些示例没有帮助。

对于初始化，我有：

```
RKObjectManager *objectManager=[RKObjectManager objectManagerWithBaseURL:@"https://api.application.com/v2"];
[RKObjectManager sharedManager].serializationMIMEType = RKMIMETypeJSON; 
```

但我不认为我想发布一个对象，所以我猜这是错误的开始......

我还尝试了以下方法：RKParams *params = [RKParams params];

```
// Attach the Image from Image View
NSData* user = [@"here@there.com" dataUsingEncoding:NSUTF8StringEncoding];
NSData* pass = [@"imapass"dataUsingEncoding:NSUTF8StringEncoding];

[params setData:user forParam:@"X-User"];
[params setData:pass forParam:@"X-Password"];

// Send it for processing!
NSURL *url = [NSURL URLWithString:@"https://api.application.com/v2"];

RKClient *client = [RKClient clientWithBaseURL:url];
[RKClient setSharedClient:client];

[client post:@"/auth" params:params delegate:self]; 
```

..但我得到404。

我不是在寻找任何人给我答案，但任何指导将不胜感激。

**更新：** 所以我设法通过使用：

NSURL *url = [NSURL URLWithString:@"https://api.application.com/v2"];

```
RKClient *client = [RKClient clientWithBaseURL:url];
[RKClient setSharedClient:client];
[client setValue:@"here@there.com" forHTTPHeaderField:@"X-User"];
[client setValue:@"imapass" forHTTPHeaderField:@"X-Password"];

[client get:@"/auth" delegate:self]; 
```

...现在只需将响应令牌作为 JSON 获取。

婴儿步..

# cxf - 如何从 JAX-RS 将图像作为流返回？

> ID：12116759
> 
> 赞同：12
> 
> 时间：2012-08-24T21:14:59.527
> 
> 标签：cxf, jax-rs, jackson

我正在尝试在 JAX-RS Web 服务中返回图像。通过返回，我能够成功地完成这项工作，`FileInputStream`但我宁愿避免`File`为每个请求创建一个。

我正在使用 Apache CXF 和 Jackson（所有其他资源方法都生成 application/json）。

代码如下所示：

```
@GET
@Produces("image/png")
public Response getQrCode(@QueryParam("qrtext") String qrtext) {

    ByteArrayOutputStream out = QRCode.from(qrtext).to(ImageType.PNG).stream();

    return Response.ok(out).build();
} 
```

不幸的是，这会产生可怕的：

> org.apache.cxf.jaxrs.interceptor.JAXRSOutInterceptor:376 - 没有为响应类 ByteArrayOutputStream 找到消息正文编写器。

[这是](https://stackoverflow.com/questions/5736973/dynamically-create-image-from-jax-rs-servlet)一个类似帖子的链接，但它没有提到我遇到的“没有消息正文作者”问题。

我将不胜感激有关如何处理此问题的任何想法。谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-26T04:21:40.720

只需使用[`StreamingOutput`](https://cxf.apache.org/docs/jax-rs-basics.html#JAX-RSBasics-JAX-RSStreamingOutput)包装器。出于某种原因，它是未知的，但它非常适合提供流输出。:-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T21:23:31.593

我认为您需要在 Response.ok(out) 中提供包含图像的 InputStream，而不是 OutputStream。（您的 JAX-RS 框架将从 InputStream 中读取字节并将它们放入响应中，它通常无法对 OutputStream 执行任何操作）

（我知道您使用的是 CXF，但 Jersey 的文档：http: [//jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e324](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e324)并且根据 JAX-RS 规范，框架必须提供 MessageBodyWriter对于输入流。）

编辑：你显然知道 InputStreams 是必需的，d'oh ...你可以控制 QRCode 类吗？

短期内，您也许可以：

```
return Response.ok(out.toByteArray()).build(); 
```

# javascript - 导航菜单不适合移动浏览器

> ID：12116762
> 
> 赞同：1
> 
> 时间：2012-08-24T21:15:07.807
> 
> 标签：javascript, jquery, html, css, mobile

我在让我的导航菜单适合移动设备 - iphone/ipad 时遇到了一个小问题。[单击此处](http://iamnatesmithen.com/bodyworks/header.php) 我已将我的 css 属性设置为以下内容：

```
 #wrapper{
    max-width: 1600px;
    min-width: 320px;
    width: 100%;
    margin: 0 auto;
    position: relative;
}
#header{
    max-width: 1018px;
    min-width: 320px;
    width: 100%;
    margin: 0 auto;
} 

#social-tabs{
    display: block;
    padding: 4px;
    margin: 5px 0px;
}

#nav-menu{
    margin: 0 auto;
    width: 100%;
    max-width: 1018px;
    min-width: 320px;
} 
```

我还在我的网站上应用了屏幕调整器，但是我仍然没有任何乐趣..

```
 function reSize($target){
 $target.css('width', $(window).width()+'px');
}
$(document).ready(function(){
    $(window).bind('resize', reSize($('#header')));
    $(window).trigger('resize');
}); 
```

有没有人可以知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:19:55.527

当您尝试绑定调整大小处理程序时，您做错了：

```
$(window).bind('resize', resize.bind(window, $('#header'))); 
```

会改善事情。您编写的代码*称为*“调整大小”功能。您需要做的是传递对函数的引用。另一个（也许更简单）等价物是：

```
$(window).bind('resize', function() { resize( $('#header') ); }); 
```

话虽如此，您仍然会遇到问题。在移动设备上处理“调整大小”事件不会对您有所帮助，因为无论如何都不会调整大小。您真正需要做的是调查[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)，并将您的解决方案基于 CSS 而不是 JavaScript。

（同样重要的是要注意，“resize”事件在桌面浏览器上会很快触发，因为浏览器窗口会以交互方式调整大小。显然，将手机或平板电脑侧放应该只触发一个事件，但在台式机/笔记本电脑上，当窗口角小部件被拖动时，浏览器会触发无数“调整大小”事件，因此更新 DOM 的 JavaScript 处理程序往往会严重陷入困境。）

# algorithm - 在任何一方不知道盒子内容的情况下使用密码术进行随机播放

> ID：12116767
> 
> 赞同：3
> 
> 时间：2012-08-24T21:15:32.517
> 
> 标签：algorithm, cryptography, shuffle

我正在寻找一种方法来在两个彼此不信任的客户之间洗牌一系列已知值（如一副纸牌），以一种双方都可以验证的方式，并且不会获得任何优势。

到目前为止，我在想...

```
for each item in array:
  A tells B random number to use (Ra1) <~ prevent B from using pre-calculated password
  B creates secret random number, and shows hash to A <~ can prove this number is used
  B adds his own secret random number (Ra1+Rb1) <~ prevent A from using pre-calculated password
  B encrypts a random array value using the combined password (Ra1+Rb1), removing from the stack
  B gives encrypted value to A
  A re-encrypts the value <~ prevent B from recognizing his package later
  A stores at random index in new array of unknown items

A shows the full array to B <~ B can be confident that the array will not be tampered with
A does not know what is in each package, nor does B
B can now choose a package for himself, and A can then provide the password for that package, allowing B to recognize his package, and know the contents.
A can also choose a package, and request the key to unlock it form B.

After all transactions are agreed, and secrecy is no longer required, all secrets are revealed by both parties, who can both then verify the contents of the boxes 
```

这一切对我来说似乎过于复杂——我无法想象如何让它为 A、B 和 C 工作，这样任何一方都不需要值得信赖或可靠（以后可能不提供密钥——干扰之间的交易）其他方）。

## 概括

理想情况下，我需要一种算法来洗牌，在两个不值得信任的各方之间，以这样的方式洗牌，只要有至少 2 个利益相关方相互提供他们的卡片，所有各方都可以稍后验证这些卡片。最后的秘密。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:38:34.183

这就是著名的[心理扑克问题](http://en.wikipedia.org/wiki/Mental_poker#Shuffling_cards_using_commutative_encryption)。一种解决方案涉及[交换](http://en.wikipedia.org/wiki/Commutative)加密*（即 E [1] (E [2] (M)) == E [2] (E [1] (M)))*。

来自维基文章：

> 1.  爱丽丝和鲍勃就某一“一副”牌达成一致。在实践中，这意味着他们同意一组数字或其他数据，使得该组的每个元素都代表一张卡片。
> 2.  Alice 选择一个加密密钥 A 并使用它来加密一副牌中的每张牌。
> 3.  爱丽丝洗牌。
> 4.  爱丽丝将加密和洗牌的套牌传递给鲍勃。加密到位后，Bob 无法知道哪张卡是哪张卡。
> 5.  Bob 选择一个加密密钥 B 并使用它来加密加密和洗牌后的每张牌。
> 6.  鲍勃洗牌。
> 7.  Bob 将双重加密和洗牌的套牌传回给 Alice。
> 8.  Alice 使用她的密钥 A 解密每张卡。尽管如此，Bob 的加密仍然存在，因此她无法知道哪张卡是哪张卡。
> 9.  Alice 为每张卡（A1、A2 等）选择一个加密密钥并单独加密它们。
> 10.  爱丽丝把牌递给鲍勃。
> 11.  Bob 使用他的密钥 B 对每张卡进行解密。尽管如此，Alice 的个人加密仍然存在，因此他无法知道哪张卡是哪张卡。
> 12.  Bob 为每张卡（B1、B2 等）选择一个加密密钥并单独加密它们。
> 13.  鲍勃把牌递给爱丽丝。
> 14.  爱丽丝为每个玩的人发布了套牌。
>     [...]
>     该算法可以针对任意数量的玩家进行扩展。

这允许洗牌，不允许任何一方作弊，并且任何一方都不知道对方有什么牌*（如果你去掉最后一个要求，只想要公平洗牌，问题就变得容易多了）*。

所使用的加密必须对[已知的明文攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)是安全的。

# eclipse - Git 和 egit 关于文件模式 10064 的冲突，尽管文件模式设置为 false

> ID：12116770
> 
> 赞同：4
> 
> 时间：2012-08-24T21:15:50.507
> 
> 标签：eclipse, git, msysgit, egit

类似于

1.  [如何让 Git 忽略文件模式 (chmod) 更改？](https://stackoverflow.com/questions/1580596/how-do-i-make-git-ignore-mode-changes-chmod?rq=1)
2.  [如何从 Git 中的未暂存更改中删除说“旧模式 100755 新模式 100644”的文件？](https://stackoverflow.com/questions/1257592/removing-files-saying-old-mode-100755-new-mode-100644-from-unstaged-changes-in)

但很可能是一个不同的问题。

系统是win7 x64。

# 问题

尽管 filemode 为 false，但 msysgit 不断看到文件模式设置为 false`deleted file mode 100644`或`new file mode 100644`尽管 filemode 设置为 false 的更改：

```
[core]
    filemode = false 
```

根据egit，没有变化。我可以从 msysgit 提交，但这使 egit 认为有更改，并从 egit 退出提交修改

> “提交更改”遇到了问题。发生内部错误。没有变化。

我不明白这个烂摊子，因为文件模式显然设置为假......

**我不关心文件模式，但想使用 egit 和 msysgit。
我如何摆脱这个陷阱？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T16:50:13.870

不知何故，我能够通过反复修改 git-gui 和 eclipse egit 的提交来摆脱这个问题。在进行此类提交之前，我还暂存了未暂存的文件模式更改。

对不起，我不能让这个答案更令人满意。希望这可以帮助某人。

# facebook - Facebook 身份验证在成功运行一次后返回 invalid_request

> ID：12116774
> 
> 赞同：0
> 
> 时间：2012-08-24T21:16:16.480
> 
> 标签：facebook, oauth, scribe

我们正在使用 scribe 在 Facebook 上进行身份验证。以下代码片段获取我们调用的 url。

```
Token           requestToken = null;

service = new ServiceBuilder().provider(FacebookApi.class).apiKey(appToken)
                .apiSecret(appSecret)
                .scope("email")
                .callback(callBackUrl)
                .build();
  // send in a null request token for facebook
  authUrl = service.getAuthorizationUrl(requestToken); 
```

这将返回此类型的 url： [https ://www.facebook.com/dialog/oauth?client_id=xxx&redirect_uri=yyy&scope=email](https://www.facebook.com/dialog/oauth?client_id=xxx&redirect_uri=yyy&scope=email)

此 url 已成功发布一次，并将控制返回到带有参数的回调 uri：代码。回调 uri 完成了一些工作，并重复了整个过程。但是在第一次运行之后，回调 uri 不再被调用。相反，会显示以下错误：

对不起，我们无法处理你的请求。请再试一次

成功和失败运行之间的请求参数没有变化。唯一的更改是对回调 uri 中运行的代码进行了更改，这在此处应该无关紧要。

是什么让它只工作一次但不能再次工作？有没有办法弄清楚实际问题是什么？尝试查看由 invalid_request.php 打印的响应，但没有看到任何错误消息。是否有关于在一定时间内再次运行身份验证的规则？我没有在文档中看到任何提及此事的内容。

有没有人遇到过这个？我一直在搜索，但没有发现提到这个具体问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:37:44.713

Facebook 似乎对重复请求有一些限制。等待几个小时并关闭并重新打开浏览器后，成功调用了回调。

# graphics - gnuplot中不同文件的数据集的绘图功能

> ID：12116778
> 
> 赞同：0
> 
> 时间：2012-08-24T21:16:29.630
> 
> 标签：graphics, gnuplot

我有几个需要使用 gnuplot 绘制的具有相似数据的文件。

例如，我使用这样的东西来绘制 3 个文件的第 1 列和第 5 列：

```
plot "file1.csv" using 1:5 title 'test 1' with lp, \
     "file2.csv" using 1:5 title 'test 2' with lp, \
     "file3.csv" using 1:5 title 'test 3' with lp 
```

但是，我不知道如何绘制 3 个文件中数据的函数。例如，我想在上图中包含每个点的 3 列的媒体（这将是`f(x1,x2,x3)=(x1(i)+x2(i)+x3(i))/3`第 i 个数据点的函数）。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:36:50.433

这是一个常见的问题，答案是：不直接来自 gnuplot。但是，您可以调用外部工具为您计算。以下是一些其他带有示例的答案（您可以在此站点中搜索“gnuplot 多个文件”以获取更多信息......）：

[示例 1](https://stackoverflow.com/questions/10818012/gnuplot-script-for-average-over-multiple-files)

[示例 2](https://stackoverflow.com/questions/12082670/gnuplot-make-a-histogram-with-data-located-in-multiple-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:27:08.450

另一种可能性是使用 Pyxplot 绘图包[http://pyxplot.org.uk](http://pyxplot.org.uk)，它的语法与 gnuplot 相似，但已清理。Pyxplot 有一个 interpolate 命令（参见[http://pyxplot.org.uk/current/doc/html/ex-interpolation.html](http://pyxplot.org.uk/current/doc/html/ex-interpolation.html)），用于生成从文件中插入数据的函数，例如通过线性插值或样条拟合。

然后你可以这样做，例如：

```
interpolate linear file1() "file1.csv" using 1:5
interpolate linear file2() "file2.csv" using 1:5
interpolate linear file3() "file3.csv" using 1:5
plot file1(x) + file2(x) + file3(x) 
```

我认为这正是您正在寻找的。

# bash - 日期命令可以宏化吗

> ID：12116786
> 
> 赞同：2
> 
> 时间：2012-08-24T21:17:22.737
> 
> 标签：bash, shell, date, macros, expansion

我经常使用文件名制作文件快照。`date +%Y%m%D`.tar.gz 文件名中插入了日期，但有时确实会变得很繁琐。

有没有办法`date +%Y%m%D`在总是展开的宏中设置表达式，这样我就可以使用文件名$DATEMACRO.gz。

可以将类似的东西设置为环境变量等吗？

它会节省很多错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:22:01.830

我能想到的最接近的是shell函数：

```
# With optional support for a date other than today
DATEMACRO () {
    date +%Y%m%d ${1:+--date "$*"}
}
export -f DATEMACRO 
```

为了能够从外壳永久使用这样的宏，必须将它添加到环境中`.bashrc`并导出到环境中，例如。`export -f DATEMACRO`最好直接在函数定义之后（如上面的原始答案中所修改），使下面的命令可以直接从 shell 执行

```
cp foo filename$(DATEMACRO).gz

cp bar filename$(DATEMACRO -3 weeks).gz 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T21:27:40.397

您需要编写一个函数来获取当前日期：

```
#!/bin/bash

DATEMACRO() {
  date +%Y%m%D
}
echo "myfile_$(DATEMACRO)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:27:33.610

您可以执行以下操作：

```
cienas > 23:24 ~ > export D="date +%Y-%m-%d-%H-%M-%S.tar.gz"
cienas > 23:24 ~ > echo `$D`
2012-08-24-23-25-02.tar.gz
cienas > 23:25 ~ > cp .profile `$D` 
```

我添加了时间戳只是为了看看它是否有效。在您的 .basrc 文件中导出 D，然后您可以使用它`$D`来获取当前日期和时间。请注意，$D 周围的这些引号是 tilda 键上的引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T01:15:39.643

bash 无法使用动态变量。但是，bash 借鉴了 ksh 最初引入的一些创新，因此它有朝一日可能会实现ksh93 提供的所谓[规则功能。](http://www2.research.att.com/~gsf/man/man1/ksh.html#Discipline%20Functions)例如：

```
#!/bin/ksh93
function DATEMACRO.get
{
    DATEMACRO=$(date +%Y%m%D)
}

$ echo filename$DATEMACRO.gz
filename20120825.gz 
```

ksh93 缺少 bash 的几个有用的脚本功能，例如浮点运算、FPATH、协同处理，并且还以更合乎逻辑的方式实现管道，因此它可能被视为 bash 的替代品。

# algorithm - 确定数组是否具有 k 多数元素

> ID：12116788
> 
> 赞同：9
> 
> 时间：2012-08-24T21:17:31.293
> 
> 标签：algorithm

假设，给定一个 n 元素多重集 A（未排序），我们需要一个 O(n) 时间算法来确定 A 是否包含多数元素，即在 A 中出现超过 n/2 次的元素。它是使用线性时间选择算法很容易在 O(n) 时间内解决这个问题（否则答案是“没有多数”）。现在考虑这个问题的以下概括：给定 A 和一个整数 k < n，我们想要一个算法来确定 A 是否包含一个在其中出现超过 n/k 次的值（如果存在许多这样的值，那么这就足够了找到其中之一）。为此设计一个算法，并将其复杂性分析为 n 和 k 的函数。你在这个问题上的成绩将取决于你的算法有多快（当然它也必须是正确的）。对于 O(kn) 时间算法，部分计分 10 分，对于 O(n log k) 时间算法，全部计分。

现在我已经为这个问题提出了 2 个解决方案，但都不能完全满足 O(n log k) 的要求。我立即看到我可以使用 O(n log n) 算法对数组进行排序，然后查看是否有任何元素线性重复超过 n/k 次，但这是 O(n log n) 而不是 O(n log k)

我还发现并在一定程度上理解了一种 O(nk) 方法，方法是创建一个与输入具有相同数据类型的数组和一个 k 长的 int。然后将每个元素放入一个空元素中，增加它的计数器，或者如果它匹配其中的一个元素，增加它的计数器，直到我们到达第 k+1 个唯一元素，此时你将所有计数器减 1，直到一个达到 0，此时它是被认为是空的，可以将新元素放入其中。依此类推，直到输入数组的末尾。然后检查我们完成后剩下的所有元素，看看它们是否出现超过 n/k 次。但由于这涉及检查 n 个原始元素与所有 k 个新数组元素，它是 O(nk)。关于如何在 O(n log k) 中解决这个问题的任何提示？我认为 O(nk) 算法符合他希望我们思考的方式，但我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T22:04:05.840

您描述的方法只需要递归使用。

请记住，`select`将小于或等于中位数的元素移动到中位数的左侧。

如果`A`是大小`n`。

求 的中位数`A`。现在找到由中位数划分的两个子多组长度中的每一个的`n/2`中位数。找到由中位数划分的四个子多组长度中的每一个的`n/4`中位数。继续递归直到叶子是 length `n/k`。现在递归树的高度是`O(lgk)`。在递归树的每一层，都有`O(n)`操作。如果存在一个至少重复多次的值，`n/k`那么它将位于其中一个具有子多集`k`长度的值中。`n/k`最后的操作也在`O(n)`. 所以你得到了请求的运行时间`O(nlgk)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:49:57.120

## O(kn) 算法

我想知道 O(kn) 算法是否可能更符合以下原则：

1.  查找 k 个规则间隔的元素（使用与中位数类似的线性选择算法）
2.  计算你为这些中的每一个获得了多少匹配

想法是，如果一个元素出现 n/k 次，它必须是其中之一。

## O(nlogk) 算法

也许您可以将问题中提出的方案与树结构一起使用来保存 k 个元素。那么这将意味着搜索匹配项只会是 log(k) 而不是 k，对于整体 O(nlogk)？

请注意，您应该将树用于第一遍（您正在寻找我们需要考虑的 k 个候选者）和第二遍计算每个元素的确切计数。

另请注意，您可能希望使用惰性评估方案来递减计数器（即标记需要递减的整个子树并仅在下次使用该路径时传播递减量）。

## O(n) 算法

如果您在现实生活中遇到这种情况，我会考虑使用基于哈希的字典来存储直方图，因为这应该会提供一个快速的解决方案。

例如，在 Python 中，您可以在（平均）O(n) 时间内使用

```
from collections import Counter
A=[4,2,7,4,6]
k=3

element,count = Counter(A).most_common()[0]

if count>=len(A)//k:
    print element
else:
    print "there is no majority" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T22:09:44.690

我不知道你是否看过这个，但它可能有助于给你一些想法：

假设您知道数组 L 中有多数元素。

查找元素的一种方法如下：

```
Def FindMajorityElement(L):

    Count = 0

    Foreach X in L

        If Count == 0
            Y = X

        If X == Y
            Count = Count + 1
        Else
            Count = Count - 1

    Return Y 
```

O(n) 时间，O(1) 空间

# ios - iOS Cocos2d CCLabelTTF Set String Ends in Exc Bad Access

> ID：12116792
> 
> 赞同：1
> 
> 时间：2012-08-24T21:17:46.783
> 
> 标签：ios, cocos2d-iphone, nsstring, automatic-ref-counting, exc-bad-access

在 iPhone 游戏的开发过程中，这花费了我很多时间。任何帮助是极大的赞赏！

# 设置

*   弧
*   Cocos2d 2.0

# 问题

*   当我在 CCLabelTTF 上设置字符串时出现 EXC_BAD_ACCESS
*   每 5 次尝试大约发生 1 次

# 代码

以下代码来自 LevelSelectionLayer 类。该类是另一个类的委托，该类处理关卡网格和触摸交互。

### 在 LevelSelectionLayer.h

```
@property (strong) NSArray *difficulties;
@property (strong) CCLabelTTF *difficultyLabel;
@property (strong) SlidingMenuGrid *slidingMenuGrid; 
```

### 在 LevelSelectionLayer.m

```
-(id) init
{
    if (self = [super init]) {
        self.difficulties = [[NSArray alloc] initWithObjects:@"Easy", @"Intermediate", @"Hard", nil];

        [self initDifficultyLabel];
        [self initGrid];
    }
    return self;
}

-(void) initDifficultyLabel
{
    CGSize size = [[CCDirector sharedDirector] winSize];
    self.difficultyLabel = [[CCLabelTTF alloc] initWithString:[self.difficulties objectAtIndex:0] fontName:FONT_BOLD fontSize:18.0f];
    self.difficultyLabel.position = ccp(size.width / 2 + 3, size.height / 2 + 63);
    self.difficultyLabel.color = CCC3_DARK_COLOR;
    [self addChild:self.difficultyLabel z:5];
} 
```

### 在 LevelSelectionLayer.m 中（续）。这是从上述网格类调用的委托方法。

```
-(void) slidingGridDidChangePage
{
    // Get curent page
    int currentPage = self.slidingMenuGrid.iCurrentPage;
    CCLOG(@"currentPage:%d", currentPage); // Always prints correct number

    // Adjust pagination display
    for (int i = 0; i < NUM_PAGES; i++) {
        CCSprite *bub = [self.pageBubbles objectAtIndex:i];
        if (i == currentPage) {
            bub.displayFrame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"pageSelected.png"];
        }
        else {
            bub.displayFrame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"page.png"];            
        }
    }

    // Adjust difficulty labeL
    /******* BREAKS HERE *******/
    self.difficultyLabel.string = (NSString *)[self.difficulties objectAtIndex:currentPage];
    //self.difficultyLabel.string = @"Test"; // Breaks every once in a while as well
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:48:54.483

最有可能的是，难度标签是在应用程序流程中的某个地方发布的。由于您在创建图层后立即将其添加到图层中（在您删除它或释放图层之前，它一直保留在其中），因此您无需分配它，并将其释放到任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:52:20.520

我遇到了我认为是同样的问题。它只发生在设备的发布版本上。当我启用僵尸检测时，我在崩溃时收到警报，正在对已释放对象（我的 CCLabelTTF）调用“setPosition”方法，该方法在我创建标签后的下一行中发生。出于某种原因，ARC 似乎在创建标签之间释放了标签，但在我可以向它发送任何消息之前。其他可能有用的信息：我将标签分配给使用 __unsafe_unretained 指令声明的 ivar，因为我只想维护对标签的“弱”引用，以便以后可以修改它而不必从它的通过标签的父级（标签作为创建它的图层的子级添加，应该保留它）。当我使用临时变量设置标签时，不会发生这种情况。对我来说也很奇怪的是，所有其他 CCNode 子类在分配方面的行为完全相同，但我只遇到 CCLabelTTF 的这个问题。

编辑：还值得一提的是，我正在使用 CCLabelTTF 的一种便捷方法（它返回一个自动释放的对象）来创建标签，所以理论上该对象应该在它创建的函数范围之外持续存在，直到自动释放池被排干。

编辑：我已经解决了我的问题。不确定它是否会帮助 OP，但它是：使用 __weak 而不是 __unsafe_unretained。AFAIK 这仅适用于支持 iOS 5.0+ 的应用程序，但对我来说这很好，我不打算在这一点上支持任何更少的东西。

# java - 将动态 cron 作业添加到 GAE

> ID：12116799
> 
> 赞同：2
> 
> 时间：2012-08-24T21:18:10.177
> 
> 标签：java, google-app-engine, crontab, job-scheduling

在 GAE 中，我们可以通过编辑 cron.xml 文件手动添加 cron 作业

```
<?xml version="1.0" encoding="UTF-8"?>
<cronentries>
  <cron>
    <url>/cron/addCount/1</url>
    <description>Add count + 1 every 1 minutes</description>
    <schedule>every 1 minutes</schedule>
  </cron>
</cronentries> 
```

有什么方法可以让我创建一个用户界面并即时创建/更新/删除尽可能多的 cron 作业。这意味着在我部署到 GAE 之后，我应该能够更新 cron.xml 吗？或者是否有解决办法让我可以即时创建 cron 作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:38:37.343

不，这是不可能的。

您应该将此计划数据保存到数据存储中，然后每分钟运行一次 cron 并检查是否有需要执行的操作。基本上你会做你自己的简单调度程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T22:17:38.353

您可以使用推送队列来创建和运行任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T01:58:29.923

**2019 年更新**

* * *

[Google Cloud Scheduler](https://cloud.google.com/scheduler/)是为此特定目的而创建的。它本质上是在后台运行托管的 cron 作业（包括对失败的作业进行自动重试）。

[云调度程序 REST API](https://cloud.google.com/scheduler/docs/reference/rest/)

[RPC 参考](https://cloud.google.com/scheduler/docs/reference/rpc/google.cloud.scheduler.v1#google.cloud.scheduler.v1.CloudScheduler)

（我还建议考虑 @Peter Knego 的建议，基于 DataStore 条目创建自己的调度程序，因为如果您需要创建大量计划任务或复杂规则，这可能比使用 Google Cloud Scheduler 更灵活且成本更低围绕任务调度）

* * *

另一个可能的选项（取决于您的用例）是[Google Cloud Tasks](https://cloud.google.com/blog/products/application-development/announcing-cloud-tasks-a-task-queue-service-for-app-engine-flex-and-second-generation-runtimes)。这是 Google 最近推出的 Push Queues 的更新替代品，并且有一个用于以编程方式创建新任务的 API。Cloud Tasks 本质上集中了 Google Cloud 中的推送队列管理（尽管您可以继续将推送队列与旧 API 一起用于现有应用程序）。

我通常不建议将其作为实现 OP 建议的动态任务类型的一种方式，因为推送队列实际上是用于消息处理的，尤其是对于大容量消息传递（请参阅我关于“计划任务与推送队列”的注释'）。

如果推送队列适合您的用例，快速入门指南会提供 Google Cloud Tasks API 使用示例*。*Java、Python、C# 和其他语言的示例可在以下链接中找到）：

[https://cloud.google.com/tasks/docs/quickstart-appengine](https://cloud.google.com/tasks/docs/quickstart-appengine)

* * *

**计划任务与推送队列**

*   Google Cloud Scheduler = 计划任务
*   Google Cloud Tasks = 推送队列（消息队列）

您可能会问如何在使用计划任务（例如 Google Cloud Scheduler）和推送队列（例如使用 Google Cloud Tasks）之间做出决定。

*计划任务*通常用于运行时间更长或更密集的处理任务，或者用于预测和控制任务何时运行很重要的任何任务。例如，大型数据集的聚合或处理。或批量处理数据。您可以将[cron 作业](https://cloud.google.com/scheduler/docs/creating)视为计划任务的计划定义/配置。

*推送队列*本质上是一种持久消息队列形式，通常更适合处理大流量的系统，例如繁忙的电子商务网站，其中来自用户的请求或“消息”需要与处理它们的系统分离（例如 Web 后端或数据库服务器）。这种架构用于大容量系统中，对消息进行排队以进行处理，并优先考虑处理请求的可靠性，而不是针对服务后端的即时处理。推送队列与发布/订阅架构和技术更密切相关，例如[Google Cloud Pub/Sub](https://cloud.google.com/pubsub/docs/overview)

# maven-2 - 在 Hudson 2.2.1 上安装 M2 Release Plugin 0.9.1？

> ID：12116800
> 
> 赞同：0
> 
> 时间：2012-08-24T21:18:15.770
> 
> 标签：maven-2, hudson, hudson-plugins

有没有人成功安装了最新的 M2 发布插件（http://wiki.hudson-ci.org/display/HUDSON/M2+Release+Plugin 或[https://wiki.jenkins-ci.org/display/JENKINS/M2+](https://wiki.jenkins-ci.org/display/JENKINS/M2+Release+Plugin)在 Hudson（不是 Jenkins）2.2.1 上[发布+插件）？](https://wiki.jenkins-ci.org/display/JENKINS/M2+Release+Plugin)

我刚刚将 Hudson 从 2.1.2 升级到 2.2.1（部署在 Glassfish 3.1 中），当我尝试从 0.8.1 升级插件时，我收到一个 500 服务器错误，此堆栈跟踪：

```
[#|2012-08-24T15:12:37.250-0600|SEVERE|glassfish3.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=72;_ThreadName=Thread-1;|WebModule[/hudson]Error while serving http://myserver:8080/hudson/pluginManager/install
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
        at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
        at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
        at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:103)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
        at org.kohsuke.stapler.MetaClass$3.doDispatch(MetaClass.java:167)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:489)
        at org.kohsuke.stapler.Stapler.service(Stapler.java:160)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:94)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:180)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:148)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:97)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:180)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:148)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:97)
        at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:86)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
        at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
        at hudson.model.UpdateSite$Plugin.getNeededDependencies(UpdateSite.java:580)
        at hudson.model.UpdateSite$Plugin.deploy(UpdateSite.java:622)
        at hudson.PluginManager.doInstall(PluginManager.java:539)
        ... 81 more
|#]

[#|2012-08-24T15:12:37.252-0600|WARNING|glassfish3.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=72;_ThreadName=Thread-1;|StandardWrapperValve[Stapler]: PWC1406: Servlet.service() for servlet Stapler threw exception
java.lang.NullPointerException
        at hudson.model.UpdateSite$Plugin.getNeededDependencies(UpdateSite.java:580)
        at hudson.model.UpdateSite$Plugin.deploy(UpdateSite.java:622)
        at hudson.PluginManager.doInstall(PluginManager.java:539)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:282)
        at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:149)
        at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:88)
        at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:103)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
        at org.kohsuke.stapler.MetaClass$3.doDispatch(MetaClass.java:167)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:489)
        at org.kohsuke.stapler.Stapler.service(Stapler.java:160)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1534)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:94)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:180)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:148)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:97)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:180)
        at org.hudsonci.servlets.internal.ServletRegistrationFilterAdapter.doFilter(ServletRegistrationFilterAdapter.java:148)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:97)
        at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:86)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
        at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:215)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:662)
|#] 
```

**更新**

我卸载了 0.8.1 版本的插件并安装了 0.9.1 版本和 Jenkins javadoc 1.0 插件，似乎都安装成功（不确定 javadoc 插件是否会引起任何奇怪）。

但是，当我查看作业的配置页面时，它看起来与 M2 Release 插件页面截图非常不同。我不知道 Hudson/Jenkins 的差异或插件问题有多大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:06:09.780

在玩了一些之后，我发现插件页面截图中显示的`Build Environment`部分和`Perform Maven Release`链接在选择时可用`Build a maven2/3 project`。它在自由式作业配置中不可用。

我们安装的 Hudson 有`Hudson :: Maven (legacy) :: Plugin`残疾人，所以这种类型的工作不可用。由于 Maven3 现在与 Hudson 捆绑在一起，因此建议使用自由样式的作业类型进行 Maven 构建。

您不需要插件在 Hudson 中进行 Maven 发布，您可以简单地调用目标`release:prepare`并`release:perform`在`Invoke Maven 3`构建步骤中。您无法自定义版本和 SCM 注释前缀，但它可以工作！

# php - 处理长时间运行的重复 HTTP 请求

> ID：12116801
> 
> 赞同：4
> 
> 时间：2012-08-24T21:18:25.520
> 
> 标签：php, mysql, apache, httpwebrequest

什么是处理在服务器上接收重复 HTTP 请求的好方法？

我有关于 LAMP Web 应用程序的报告，该应用程序需要大约 30 秒才能在服务器上构建并返回到客户端。客户不耐烦并在第一次完成之前再次运行报告。这会使服务器陷入困境。有没有办法处理/防止这个服务器端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:20:33.490

存储作业已经在某处运行的事实。

在生成报告的代码中，检查是否已经在运行。如果是这样，请不要运行另一个。

当报告完成生成或某些超时到期以处理异常情况时，取消存储该事实。

您可以使用数据库、memcached 服务器、redis、文本文件、写入共享内存...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:21:10.927

您可以尝试返回 202 响应，直到您在服务器上构建的任何内容都完成，然后提供它的缓存副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T21:28:11.723

如今，告诉用户正在处理某些事情往往是使用 AJAX 来完成的。

通常，您会将请求发送到您的服务器，然后服务器会返回一个 202 响应和一个地址（可能带有 UUID）供浏览器查找结果（您不一定会直接显示，但会保留在后台）您的脚本：您也可以直接为不支持 JavaScript 的客户端显示此内容）。

然后，您将在后台向该地址发出后续请求，并在它准备好时显示结果。

这种方法不仅具有对用户更友好的优点，而且对断开连接也更加健壮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T21:33:54.027

30 秒对于让用户在当今的 Web 应用程序世界中等待太长了。谷歌用 1/100 的时间搜索整个网络。是什么让您的 Web 应用程序更先进或更消耗数据。如果您的一个实例即使在优化后也无法处理，您最好将其扩展到云（或更多服务器）。如果确实要求很高，请将其划分为可以从多个实例并行运行的子任务。

对于您的直接问题，而不是对您未提出的问题的回答；上面的答案有一些技巧。您可以在频繁请求的查询出现之前生成它们 - 或者您可以只对渲染发出第一个请求并等待该请求完成，然后再发送结果。

# grails - Grails 从数据库加载选择框使其具有多选性

> ID：12116802
> 
> 赞同：0
> 
> 时间：2012-08-24T21:18:35.030
> 
> 标签：grails

我正在尝试制作自定义编辑页面。我获取对象 ID 并创建对象的实例。但是当我尝试为选择框指定一个值时，该框呈现为多选。我需要它默认为基于孩子的选择，但只能是单选。我已经尝试过 multiple="false" 但我的程序只是忽略了它。

我的对象是一个样本，其中包含与每个样本关联的参数（子项）。我有一个算法可以抓取每个参数并构建每个唯一名称、值和信息的列表。有些样本只有带值的参数，没有信息，所以它们进入一个映射，而有值和信息的样本进入另一个映射。

这是算法和我的行动：

```
def updateSample = {

    def sid =   params.sample.id // get the id of the sample object
    def sampleInstance = Sample.get(sid)// creates instance
    def children = sampleInstance?.sampleParameters

    /* ------ gets a list of unique parameter names ------*/
    HashMap<String, ArrayList<SampleParameter>> oldMap = new HashMap<String, ArrayList<SampleParameter>>(); // for single parameter options
    HashMap<String, HashMap<String, ArrayList<SampleParameter>>> map = new HashMap<String, HashMap<String, ArrayList<SampleParameter>>>(); // for multiple parameter options
    for (def result : SampleType.get(sampleInstance.sampleType.id).sampleParameters.sort {it.value}) { // only iterate over assigned sample paramters
        if (result.information != null) { // we are working with 3 parameters 
            if (!map.containsKey(result.name)) { // if map does not already contain the key
                map.put(result.name, new HashMap<String, ArrayList<SampleParameter>>()); //add the name and a map to hold the values from the table's information column
            }
            if (!map.get(result.name).containsKey(result.value)) {
                map.get(result.name).put(result.value, new ArrayList<SampleParameter>());
            }
            map.get(result.name).get(result.value).add(result);
        } else {// otherwise we are only working with two parameters
            if (!oldMap.containsKey(result.name)) { // if the name does not already exist in oldMap, add it
                oldMap.put(result.name, new ArrayList<SampleParameter>()); // holds values
            }
            oldMap.get(result.name).add(result); //adds value to the list
        }
    } 

    /* invokes template and passes a map to be rendered inside of  <div id="parameter"> in sample.gsp */
    render(template:'updatesample' , model:[sid:sid,sampleInstance:sampleInstance,children:children,
            oldMap:oldMap, map:map])

} 
```

如果我不指定值，列表构建得很好。但是当我指定一个值时，正确的值会突出显示，但该框是多选的。

这是我在 gsp 上呈现的模板代码；

```
 <g:each in="${oldMap?.sort()}"> 
    <tr>
      <td align="right" valign="top"><b>${it.getKey()}:</b></td> 
      <td><g:select optionKey="id" optionValue="value" name="sampleParameters" id="parameter" value="${sampleInstance?.sampleParameters}" from='${it.getValue()}' /></td>
    </tr>
  </g:each>
  <g:each var="valueMap" in="${map?.sort()}"> 
    <tr><td align="right" valign="top"><b>${valueMap.getKey()}:</b></td></tr>
      <g:each var="infoMap" in="${valueMap?.getValue()?.sort()}">
        <tr>
          <td align="right" valign="top">${infoMap.getKey()}:</td>
          <td><g:select multiple ="false" noSelection="${['':'Select One...']}"optionKey="id" optionValue="information" name="sampleParameters" id="parameter" value="${sampleInstance?.sampleParameters}" from="${infoMap?.getValue()?.sort(){it.information}}" /></td>
        </tr>
      </g:each>
  </g:each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T03:59:36.800

`sampleInstance?.sampleParameters`返回一个`Collection`对象，因此，如果 Grails`Collection`在`value`属性中检测到 a 并且`multiple`尚未设置该属性，它将`multiple`为您设置该属性。从而将您的选择呈现为多选。

设置`multiple="false"`将无济于事，因为 Grails 只允许属性直接通过，因此您会获得一个`<select multiple="false" ...>`标签，并且该属性的存在可能会导致浏览器将其呈现为多选。

尝试仅将单个实例`sampleParameters`作为`value`属性传递以具有单个选择字段。

# c++ - 优化地形渲染的内存

> ID：12116803
> 
> 赞同：0
> 
> 时间：2012-08-24T21:18:51.470
> 
> 标签：c++, directx, terrain

我想知道（我很确定有）是否有更好的方法来处理填充到我的顶点/索引缓冲区中的数据。目前，我的地形顶点结构如下所示：

```
struct VertexType
    {
        D3DXVECTOR3 position;
        D3DXVECTOR2 texture;
        D3DXVECTOR3 normal;
    }; 
```

每次游戏启动时我都会随机生成地形，并根据这个高度图计算法线和纹理坐标。最后我以这种方式填充顶点数组：

```
// Calculate the number of vertices in the terrain mesh.
m_vertexCount = (m_terrainWidth - 1) * (m_terrainHeight - 1) * 6;

// Create the vertex array.
m_vertices.resize(m_vertexCount);

// Initialize the index to the vertex buffer.
index = 0;

// Load the vertex and index array with the terrain data.
for(j=0; j<(m_terrainHeight-1); j++)
{
    for(i=0; i<(m_terrainWidth-1); i++)
    {
        index1 = (m_terrainHeight * j) + i;          // Bottom left.
        index2 = (m_terrainHeight * j) + (i+1);      // Bottom right.
        index3 = (m_terrainHeight * (j+1)) + i;      // Upper left.
        index4 = (m_terrainHeight * (j+1)) + (i+1);  // Upper right.

        // Upper left.
        tv = m_heightMap[index3].tv;

        // Modify the texture coordinates to cover the top edge.
        if(tv == 1.0f) { tv = 0.0f; }

        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index3].x, m_heightMap[index3].y, m_heightMap[index3].z);
        m_vertices[index].texture = D3DXVECTOR2(m_heightMap[index3].tu, tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index3].nx, m_heightMap[index3].ny, m_heightMap[index3].nz);
        index++;

        // Upper right.
        tu = m_heightMap[index4].tu;
        tv = m_heightMap[index4].tv;

        // Modify the texture coordinates to cover the top and right edge.
        if(tu == 0.0f) { tu = 1.0f; }
        if(tv == 1.0f) { tv = 0.0f; }

        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index4].x, m_heightMap[index4].y, m_heightMap[index4].z);
        m_vertices[index].texture = D3DXVECTOR2(tu, tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index4].nx, m_heightMap[index4].ny, m_heightMap[index4].nz);
        index++;

        // Bottom left.
        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index1].x, m_heightMap[index1].y, m_heightMap[index1].z);
        m_vertices[index].texture = D3DXVECTOR2(m_heightMap[index1].tu, m_heightMap[index1].tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index1].nx, m_heightMap[index1].ny, m_heightMap[index1].nz);
        index++;

        // Bottom left.
        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index1].x, m_heightMap[index1].y, m_heightMap[index1].z);
        m_vertices[index].texture = D3DXVECTOR2(m_heightMap[index1].tu, m_heightMap[index1].tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index1].nx, m_heightMap[index1].ny, m_heightMap[index1].nz);
        index++;

        // Upper right.
        tu = m_heightMap[index4].tu;
        tv = m_heightMap[index4].tv;

        // Modify the texture coordinates to cover the top and right edge.
        if(tu == 0.0f) { tu = 1.0f; }
        if(tv == 1.0f) { tv = 0.0f; }

        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index4].x, m_heightMap[index4].y, m_heightMap[index4].z);
        m_vertices[index].texture = D3DXVECTOR2(tu, tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index4].nx, m_heightMap[index4].ny, m_heightMap[index4].nz);
        index++;

        // Bottom right.
        tu = m_heightMap[index2].tu;

        // Modify the texture coordinates to cover the right edge.
        if(tu == 0.0f) { tu = 1.0f; }

        m_vertices[index].position = D3DXVECTOR3(m_heightMap[index2].x, m_heightMap[index2].y, m_heightMap[index2].z);
        m_vertices[index].texture = D3DXVECTOR2(tu, m_heightMap[index2].tv);
        m_vertices[index].normal = D3DXVECTOR3(m_heightMap[index2].nx, m_heightMap[index2].ny, m_heightMap[index2].nz);
        index++;
    }
}
// shrink heightmap because its no longer in use...
m_heightMap.clear();
m_heightMap.swap(m_heightMap); 
```

部分代码取自 rastertek.com。我想知道这是否没有保存很多冗余数据（每个四边形 6 个顶点）。但问题是，我稍后需要这个结构来为我的四叉树形成缓冲区。这是在每个节点填充缓冲区的代码（每个节点都有自己的缓冲区 - 有没有更好的方法来做到这一点？）：

```
node->triangleCount = numTriangles;

// Calculate the number of vertices.
vertexCount = numTriangles * 3;

// Create the vertex array.
vertices = new VertexType[vertexCount];

// Create the index array.
indices = new unsigned long[vertexCount];

// Create the vertex array.
node->vertexArray = new VectorType[vertexCount];

// Initialize the index for this new vertex and index array.
index = 0;

// Go through all the triangles in the vertex list.
for(i=0; i<m_triangleCount; i++)
{
    // If the triangle is inside this node then add it to the vertex array.
    result = IsTriangleContained(i, positionX, positionZ, width);
    if(result == true)
    {
        // Calculate the index into the terrain vertex list.
        vertexIndex = i * 3;
        // Get the three vertices of this triangle from the vertex list.
        vertices[index].position = (*m_vertexList)[vertexIndex].position;
        vertices[index].texture = (*m_vertexList)[vertexIndex].texture;
        vertices[index].normal = (*m_vertexList)[vertexIndex].normal;
        indices[index] = index;
        // Also store the vertex position information in the node vertex array.
        node->vertexArray[index].x = (*m_vertexList)[vertexIndex].position.x;
        node->vertexArray[index].y = (*m_vertexList)[vertexIndex].position.y;
        node->vertexArray[index].z = (*m_vertexList)[vertexIndex].position.z;
        index++;
        vertexIndex++;

        vertices[index].position = (*m_vertexList)[vertexIndex].position;
        vertices[index].texture = (*m_vertexList)[vertexIndex].texture;
        vertices[index].normal = (*m_vertexList)[vertexIndex].normal;
        indices[index] = index;
        node->vertexArray[index].x = (*m_vertexList)[vertexIndex].position.x;
        node->vertexArray[index].y = (*m_vertexList)[vertexIndex].position.y;
        node->vertexArray[index].z =(*m_vertexList)[vertexIndex].position.z;
        index++;
        vertexIndex++;

        vertices[index].position = (*m_vertexList)[vertexIndex].position;
        vertices[index].texture = (*m_vertexList)[vertexIndex].texture;
        vertices[index].normal = (*m_vertexList)[vertexIndex].normal;
        indices[index] = index;
        node->vertexArray[index].x = (*m_vertexList)[vertexIndex].position.x;
        node->vertexArray[index].y = (*m_vertexList)[vertexIndex].position.y;
        node->vertexArray[index].z = (*m_vertexList)[vertexIndex].position.z;

        index++;
    }
}

// Set up the description of the vertex buffer.
vertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
vertexBufferDesc.ByteWidth = sizeof(VertexType) * vertexCount;
vertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
vertexBufferDesc.CPUAccessFlags = 0;
vertexBufferDesc.MiscFlags = 0;
vertexBufferDesc.StructureByteStride = 0;

// Give the subresource structure a pointer to the vertex data.
vertexData.pSysMem = vertices;
vertexData.SysMemPitch = 0;
vertexData.SysMemSlicePitch = 0;

// Now finally create the vertex buffer.
device->CreateBuffer(&vertexBufferDesc, &vertexData, &node->vertexBuffer);

// Set up the description of the index buffer.
indexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
indexBufferDesc.ByteWidth = sizeof(unsigned long) * vertexCount;
indexBufferDesc.BindFlags = D3D11_BIND_INDEX_BUFFER;
indexBufferDesc.CPUAccessFlags = 0;
indexBufferDesc.MiscFlags = 0;
indexBufferDesc.StructureByteStride = 0;

// Give the subresource structure a pointer to the index data.
indexData.pSysMem = indices;
indexData.SysMemPitch = 0;
indexData.SysMemSlicePitch = 0;

// Create the index buffer.
device->CreateBuffer(&indexBufferDesc, &indexData, &node->indexBuffer);

// Release the vertex and index arrays now that the data is stored in the buffers in the node.
delete [] vertices;
vertices = 0;

delete [] indices;
indices = 0; 
```

isTriangleContained() 方法检查当前三角形是否在当前节点中。如果是，则三角形将保存在数组中，然后填充该节点的缓冲区。如您所见，由于上面提到的结构，这里的顶点选择非常简单。

问题是，例如，如果我尝试生成和渲染大于 2048 的地形，m_vertices 向量会分配大量内存。有没有更好的方法来处理这一切？也许在 GPU 上进行一些计算？

感谢任何愿意提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:19:25.957

地形大小为 2048 时，它将占用 2048（宽度）* 2048（长度）* 8（# floats）* 4（bytes per float），大约为 128 MB。这是一块不错的内存，但本身并非不合理。

我不明白四叉树代码应该做什么。看起来您正在创建另外 2 个几何体副本？为什么要这样做？

# ruby-on-rails - 我的 Rails 路由应该如何与 pushState Ember.js 路由一起使用？

> ID：12116804
> 
> 赞同：10
> 
> 时间：2012-08-24T21:19:15.597
> 
> 标签：ruby-on-rails, ember.js, routes, ember-data

**简而言之...**

在构建 Ember.js 应用程序以持久保存到 Rails 应用程序时，我应该如何处理 Rails 路由/视图？我想我只需要 Rails 来呈现 application.html.erb 布局，以便 Ember.js 应用程序初始化并处理路由/视图/模板。

**细节：**

具体来说，如果我访问***localhost:3000***，在我的 Ember.js 应用程序有机会初始化之前，Rails 会在*项目*控制器上点击“索引”操作。它会抱怨缺少索引模板。我没有 index.html.erb 视图，因为我的 Ember.js 应用程序有一个视图/模板。

我应该为 Rails 应用程序创建空白视图吗？我的 Rails 控制器操作是否应该返回某些内容以阻止它呈现视图？或者我是否希望构建普通的 Rails 视图以与 Ember.js 应用程序视图/模板一起使用？

如果我创建一个空白项目/index.html.erb 并访问***localhost:3000***，Rails 将呈现它，Ember.js 将从那时起初始化并处理路由。但是，如果我直接访问***localhost:3000/projects/new***，Rails 会抱怨项目控制器中没有新的操作。*我在 Rails 端的项目*控制器上没有“新”操作，因为我不需要它。我的 Ember.js 应用程序正在处理该视图/模板。

最终，我只是不确定将 Ember.js 与 Rails 应用程序一起使用的约定是什么。

感谢您的帮助和阅读到目前为止...

**编辑：**

我省略了我尝试使用 Ember.js 路由器使用[pushState](http://docs.emberjs.com/#doc=Ember.HistoryLocation&src=false)历史记录的能力的细节。这会给我留下非散列 URL。这就是为什么我在处理 Rails 竞争路由我的应用程序时遇到问题的原因之一。

**Rails 应用程序布局：**

```
<html> 
<body>   
  <section id="design-archive"></section>
</body>
</html> 
```

**Ember.js 应用程序：**

```
@DA = Em.Application.create
  name: 'Design Archive'
  VERSION: '0.1'
  rootElement: '#design-archive'
  ApplicationController: Em.Controller.extend()
  ApplicationView: Em.View.extend
    templateName: 'application'

DA.initialize(DA.Router) 
```

**铁路路线：**

```
DesignArchive::Application.routes.draw do
  resources :clients, :only => [:new, :create, :index, :show, :destroy]
  resources :projects, :only => [:new, :create, :index, :show, :destroy]

  root :to => 'projects#index'
end 
```

**Ember.js 路由：**

```
DA.Router = Em.Router.create
  location: 'history'

  root: Em.Route.extend
    index: Em.Route.extend
      route: '/'
      redirectsTo: 'projects'

    # Actions
    doProjects: (router) ->
      router.transitionTo('projects')
    doProjectsNew: (router) ->
      router.transitionTo('newProject')

    # Routes
    projects: Em.Route.extend
      route: '/projects'
      index: Em.Route.extend
        router: '/'
      connectOutlets: (router) ->
        router.get('applicationController').connectOutlet('projects', DA.Project.find())
      showProject: Em.Route.transitionTo('project')

    project: Em.Route.extend
      route: '/projects/:project_id'
      connectOutlets: (router, project) ->
        router.get('applicationController').connectOutlet('project', project)
      projectsIndex: Em.Route.transitionTo('projects')

    newProject: Em.Route.extend
      route: '/projects/new'
      connectOutlets: (router) ->
        router.get('applicationController').connectOutlet('projectsNew') 
```

**导轨控制器：**

```
class ProjectsController < ApplicationController
  def index
    @projects = Project.all

    respond_to do |format|
      format.html
      format.json { render json: @projects }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T11:43:26.127

你可以有一个包罗万象的路线来引导你的 Ember 应用程序。

这是我的一个应用程序的简化示例：

```
App::Application.routes.draw do
  match "/login"   => "sessions#new",     :via => :get, :as => :login
  match "/login"   => "sessions#create",  :via => :post
  match "/logout"  => "sessions#destroy", :via => :post, :as  => :logout

  match "/attachments/:id" => "attachments#download"
  match "/avatars/:id"     => "avatars#show"

  root :to => 'pages#bootstrap'

  # anything not matched by the above should be served the bootstrap
  match "/*path" => "pages#bootstrap"
end 
```

这样做的缺点是在转到完全无效的 URL 时返回`200`成功而不是`404`错误，因为 Rails 应用程序不知道 Ember 应用程序的 URL 结构。

如果您想避免这种情况，您可以在路由中复制您的 Ember URL 结构，并将所有有效的内容指向引导路由，而不是使用包罗万象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T13:40:00.800

另一个更新：我已经开始使用[DockYard 的教程方法](http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html)来处理我的 Rails 路由，用于 pushState Ember.js 应用程序。这是一个示例 Rails `routes.rb`：

```
EmberApp::Application.routes.draw do
    class FormatTest
      attr_accessor :mime_type

      def initialize(format)
        @mime_type = Mime::Type.lookup_by_extension(format)
      end

      def matches?(request)
        request.format == mime_type
      end
    end

    get '*foo', :to => 'ember#index', :constraints => FormatTest.new(:html)
    get '/', :to => 'ember#index', :constraints => FormatTest.new(:html)
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T12:27:35.260

我发现[这篇](https://stackoverflow.com/questions/11592804/respond-to-all-html-requests-with-layout)关于使用特定布局响应所有 HTML 请求的帖子。这是我目前正在使用的，并且似乎运行良好。唯一的限制是我不能再拥有任何非 Ember.js 驱动的普通 HTML 视图。例如，我不能在 Ember 之外使用 user_session 登录/注销表单。我想如果我到达那里，我会过那座桥。

我仍然不确定这是否是处理原始问题的最佳方法，但以下是我当前的设置。*home/show.html.erb*是一个空白的 Rails 视图。

**控制器：**

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :render_default_view

  private
    def render_default_view
      return if request.xhr?
      respond_to do |format|
        format.html { render 'home/show' }
      end
    end
end

class HomeController < ApplicationController
  def show
  end
end

class ProjectsController < ApplicationController
  def new
  end

  def index
  end

  def show
  end
end 
```

**路线：**

```
DesignArchive::Application.routes.draw do
  resources :projects, :only => [:new, :index, :show]

  namespace :api do
    resources :projects, :only => [:create, :index, :show, :destroy]
  end

  root :to => 'home#show'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:54:23.713

我建议你只有一个控制器和一个操作来呈现一个空视图，它只是初始化你的 Ember 应用程序（`HomeController`例如）。

然后，这是必须管理路由（所有以 开头的路由`#/`）的 Ember 路由器。

因此，所有其他 Rails 路由只是一个 API（由您的 Ember 应用程序使用），它返回一些 JSON。

# php - CodeIgniter 部署在子域中的 Apache 服务器上 - 重定向循环

> ID：12116806
> 
> 赞同：0
> 
> 时间：2012-08-24T21:19:24.560
> 
> 标签：php, .htaccess, mod-rewrite

我正在将 codeigniter 应用程序部署到由 3rd 方 apache 服务器托管的子域上。访问页面时，它会不断刷新，然后浏览器告诉我发生了重定向循环。我知道这与我使用的 Apache conf 设置和自定义 .htaccess 文件有关，但我不知道如何修复它。

当前的 .htaccess 代码：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:56:55.213

尝试另一个`.htaccess`：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

如果不是 - 尝试将最后一行更改为

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

还要确保您已`$config['index_page']`在 config.php 中设置为`''`

# shell - 将条件子句添加到简单的 ping 脚本

> ID：12116808
> 
> 赞同：0
> 
> 时间：2012-08-24T21:19:43.460
> 
> 标签：shell

我有一个方便的花花公子 shell 脚本，它循环遍历 IP 地址列表并回显数据包丢失的百分比（如下）。

如果百分比不等于 0.0%，我很想编织一个 if/then 语句以仅回显结果。

非常感谢您的建议！

```
#!/bin/bash
HOSTS="192.168.99.24 192.168.99.23"
COUNT=10
SIZE=1400
for myHost in $HOSTS
do

   ping -q -n -s $SIZE -c $COUNT $myHost | awk -v host=$myHost '/packet loss/ {print host, $7}'

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:27:11.037

我假设`$7`是百分比（`$6`对我来说）。只需在`awk`脚本中添加一个额外的条件。

```
awk -v host=$myHost '/packet loss/ && $7!="0%" {print host, $7}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:17:04.450

如果您只想检查每个主机是否还活着的主机列表，那么我建议`ping`为此目的完全放弃使用并使用`fping`，这*比*常规脚本更好`ping`，并在单行中解决了这个问题：

```
$ fping -q -c $COUNT -b $SIZE $HOSTS | grep ': xmt' | grep -v '%loss = .*/0%'
192.168.1.2 : xmt/rcv/%loss = 12/0/100%
192.168.1.3 : xmt/rcv/%loss = 12/0/100%
192.168.1.4 : xmt/rcv/%loss = 12/0/100% 
```

这里的调用`grep`用于 (1) grep 仅用于结果行，(2) 删除 0% 损失的不需要的行，如下所示：

```
192.168.1.1 : xmt/rcv/%loss = 12/12/0%, min/avg/max = 1.08/1.11/1.19 
```

`fping`可以很好地扩展到数百万台主机，并可用于 ping 文件中的主机列表：

```
fping -q -c $COUNT -b $SIZE -f <host-list.txt | grep ': xmt' | grep -v '%loss = .*/0%' 
```

# sql - 删除某个值多次出现的行 SQL

> ID：12116812
> 
> 赞同：0
> 
> 时间：2012-08-24T21:19:56.307
> 
> 标签：sql, oracle

> **可能重复：**
> [从 Oracle 中的表中删除重复行](https://stackoverflow.com/questions/529098/removing-duplicate-rows-from-table-in-oracle)

这是我目前拥有的示例：

```
ID        Name1    Name2
ABC123    Bob      Jones
ABC123    Bob      Smith
ABC123    Bob      Hammond
DEF234    Tim      Whatever 
```

我希望上面的表格看起来像这样：

```
ID        Name1    Name2
ABC123    Bob      Jones
DEF234    Tim      Whatever 
```

我想删除共享 ID 字段的所有行，我不在乎保留或删除哪些行，只是总行数等于唯一 ID 的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:24:44.360

```
DELETE FROM YOURTABLE Y WHERE ROWID > (SELECT min(rowid) FROM YOURTABLE X
WHERE X.ID = Y.ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T07:18:51.980

```
 DELETE FROM your_table
      WHERE ROWID IN (
               SELECT rid
                  FROM (SELECT ROWID rid,
                           ROW_NUMBER () OVER (PARTITION BY ID ORDER BY ROWID) rn
                         FROM your_table)
                WHERE rn <> 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:24:53.177

如果由于某种原因您没有全局唯一 ID，那么这样的事情应该可以工作：

```
DELETE FROM Table WHERE CONCAT(ID,Name1,Name2) NOT IN ( 
       SELECT MIN(CONCAT(ID,Name1,Name2)) FROM Table GROUP BY ID) 
```

# wpf - 依赖于另一个命令的命令

> ID：12116816
> 
> 赞同：0
> 
> 时间：2012-08-24T21:20:24.060
> 
> 标签：wpf, mvvm, dialog, dependency-properties

我今天大部分时间都在试图理解在 WPF/MVVM 中关闭对话框的许多不同方法。大多数答案都集中在简单的对话框上——比如是/否确认对话框。然而，似乎没有人描述一个更复杂的对话案例，它实际上执行一些操作，这些操作必须以事务方式提交：全有或全无。

有一个 OK 按钮，单击它会调用 ViewModel 上的绑定命令。一切皆好。

现在，如果命令成功，我想关闭窗口，但如果命令失败，我不想关闭它。

经过数小时的研究，我得出的结论是，显然世界上没有人遇到过类似的问题需要解决：|

我发明但尚未实施的解决方案如下：

1.  我会有一个`ConditionalCloseWindow`命令，它将窗口作为参数，然后关闭窗口。

2.  该`ConditionalCloseWindow`命令将具有附加属性：

    ```
    公共静态只读 DependencyProperty 条件 =
        DependencyProperty.RegisterAttached("Condition", typeof(ICommand), ... snip

    ```

3.  执行`ConditionalCloseWindow`命令将首先导致命令的执行`Condition`。只有在成功执行`Condition`命令时才会`ConditionalCloseWindow`实际执行`Close()`.

您如何看待这样的解决方案？完全无效吗？或者也许这是一种公认​​的模式，我没有通过我的研究成功地发现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:25:29.003

一种方法是在 ViewModel 中设置 Closing 事件处理程序，例如：

```
<i:Interaction.Triggers>
<i:EventTrigger EventName="Closing">
    <command:EventToCommand Command="{Binding WindowClosing}" />
</i:EventTrigger>
</i:Interaction.Triggers> 
```

在视图模型中：

```
public ICommand WindowClosing
{
    get
    {
        return _windowClosing ?? _windowClosing = new RelayCommand<CancelEventArgs>(
            (args) =>{
                   if(somethingDoesNotMakeSense) 
                       args.Cancel = true;
                });
    }
} 
```

虽然这可能会有点混乱。

另一个我想出来的；

```
 <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click">
                <commandCall Command="ButtonClicked" />
                <commmandCall Command="CloseWindow" Parameter="{Binding VIewModelCanWeClose}" />
            </i:EventTrigger>
        </i:Interaction.Triggers> 
```

CloseWindow 应该是命令，在 Codebehind 中实现，它将进入参数“我们是否应该关闭”并基于它调用 Close()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:36:53.020

有很多方法可以解决您的问题。我的第一个建议是，您的对话框 ViewModel 具有 action 类型的属性。您的对话框将该属性设置为关闭对话框的操作。在您的命令中，您可以调用该操作，您的对话框将关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T23:18:42.917

有各种“表单”控件允许您编排事物，即支持验证、取消/确定逻辑、关闭等。

*   [http://dataform.codeplex.com](http://dataform.codeplex.com)

*   [http://wpfdataform.codeplex.com/](http://wpfdataform.codeplex.com/)（不确定状态，但它正在尝试复制 Silverlight DataForm）。

*   [http://www.silverlightshow.net/items/ModalDialogs-IEditableObject-and-MVVM-in-Silverlight-4.aspx](http://www.silverlightshow.net/items/ModalDialogs-IEditableObject-and-MVVM-in-Silverlight-4.aspx)（向您展示如何构建“模态”对话框的行为......基于 Silverlight 但应该是如果 WPF 不同，则关闭）。

您可以在“模型”上使用 IEditableObject 以事务方式处理更改的提交。

*   [http://www.paulstovell.com/editable-object-adapter](http://www.paulstovell.com/editable-object-adapter)

# javascript - jinja url 命名路由转义大括号文字

> ID：12116819
> 
> 赞同：1
> 
> 时间：2012-08-24T21:20:41.597
> 
> 标签：javascript, python, escaping, braces, jinja2

我将 python 命名路由输出到 Urls JavaScript 对象中，如下所示：

```
var Urls = {
    ajaxCompanyList: "{%url data-company-list %}",
    ajaxCompanyDetail: "{%url data-company-detail '{0:companyId}' %}
    ... 
```

我很难尝试将公司 ID 注入指定的路线以作为

```
/company/{0:companyId}/detail 
```

这样我以后可以使用我的 messageFormatter 函数来替换`{0:companyId}`.

我已经尝试过`{`, `{{`, `{{{`, `\{`，`&#123;`但似乎没有任何效果。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:41:49.737

您可以尝试使用 Javascript 转义序列。

的代码`{`是`\u007b`。

# wpf - 动态展开树视图

> ID：12116824
> 
> 赞同：1
> 
> 时间：2012-08-24T21:21:09.450
> 
> 标签：wpf, vb.net, treeview, expand, treeviewitem

我正在使用一个类如下：

```
Class DirectoryViewItem
    Property Namee As String
    Property Iconn As BitmapImage
    Property Path As String
    Property SubNodes As New List(Of DirectoryViewItem)
End Class 
```

我使用的xaml是：

```
<TreeView Name="DirectoryTreeView"
          TreeViewItem.Expanded="DirectoryTreeView_Expanded"
          Grid.Row="0">
    <TreeView.ItemTemplate >
        <HierarchicalDataTemplate ItemsSource="{Binding SubNodes}">
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding Iconn}"
                       Width="32" Height="32"
                       VerticalAlignment="Center" HorizontalAlignment="Left" />
                <TextBlock Text="{Binding Namee}"
                           VerticalAlignment="Center" HorizontalAlignment="Left" />
            </StackPanel>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

代码工作正常，现在我想通过代码扩展 3 或一些 x 节点，我找到了使用这样的解决方案：

```
CType(DirectoryTreeView.Items(3), TreeViewItem).ExpandSubtree() 
```

我发现`CType`这里不是`TreeViewItem`，但它是我的`DirectoryViewItem`类型，......这怎么能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:24:11.000

1.  使用`TreeView.ItemContainerStyle`绑定`IsExpanded`到项目的属性。
2.  在您的项目上实施`ExpandSubtree`（它需要做的就是将项目上的绑定属性设置为`true`递归）。

# c# - Xml 反序列化 - 数组元素

> ID：12116826
> 
> 赞同：2
> 
> 时间：2012-08-24T21:21:27.430
> 
> 标签：c#, asp.net, xml

查看我的 XML 示例，我该如何反序列化它？但我需要反序列化 Xml Element 数组。我怎么做？

```
<hotels num="1">
<hotel num="1" item="2"></hotel>
<hotel num="2" item="2"></hotel>
<hotel num="3" item="2"></hotel>
<hotel num="4" item="2"></hotel>
<hotel num="5" item="2"></hotel>
</hotels>

[Serializable]
[XmlRoot("hotels")]
public class Hotels
{
[XmlElement("id")]
public string id {  get; set; }
[XmlElement("hotel")]
public Hotel hotel { get; set; }
}

[Serializable]
[XmlRoot("hotel")]
public class Hotel
{
[XmlElement("id")]
public string id {  get; set; }
[XmlElement("item")]
public string item {  get; set; }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:28:54.977

试试这样：

```
[XmlRoot("hotels")]
public class HotelData
{
    [XmlAttribute("num")]
    public string Id { get; set; }

    [XmlElement("hotel")]
    public List<Hotel> Hotels { get; set; }
}

public class Hotel
{
    [XmlAttribute("num")]
    public string Id { get; set; }

    [XmlAttribute("item")]
    public string Item { get; set; }
} 
```

然后反序列化：

```
public class Program
{
    static void Main()
    {
        var serializer = new XmlSerializer(typeof(HotelData));
        using (var reader = XmlReader.Create("test.xml"))
        {
            var data = (HotelData)serializer.Deserialize(reader);
            Console.WriteLine(data.Id);
            foreach (var hotel in data.Hotels)
            {
                Console.WriteLine("num: {0}, item:{1}", hotel.Id, hotel.Item);
            }
        }
    }
} 
```

# css - gwt-tree css 样式

> ID：12116827
> 
> 赞同：0
> 
> 时间：2012-08-24T21:21:28.527
> 
> 标签：css, gwt, styling, gwt-widgets

我在设计 gwt-tree 小部件时遇到了困难。

我用过

```
.gwt-Tree {
    padding-top: 4px;
    padding-left: 0px;
    font-weight: bold;
    color: #0066CC;
    width: 14.5em !important;
}

.gwt-Tree .gwt-TreeItem {
    padding-left: 0px !important;
    margin-left: -1.5px !important;
    } 
```

但我仍然可以看到填充。我还想增加树项 (+) 的大小。任何指针都将是 hwlpful。

谷歌搜索产生了这个不起作用。

```
.gwt-Tree > div:first-child {
  width: 0px !important;
  height: 0px !important;
  margin: 0px !important;
  padding: 0px !important;
}

.gwt-Tree > div {
        padding: 0px 5px !important;
}

.gwt-Tree > div[hidefocus=true] {

        width: 0px !important;
        height: 0px !important;

        margin: 0px !important;
        padding: 0px !important;
} 
```

任何形式的帮助将不胜感激。谢谢！

# c++ - 在 Visual C++ 中使用 MessageBoxW 输出多个相加的字符串

> ID：12116829
> 
> 赞同：0
> 
> 时间：2012-08-24T21:21:41.370
> 
> 标签：c++, string, visual-studio-2008, visual-c++, messagebox

我将如何在 LPCWSTR 中输出不同变量的混合以将其显示在 MessageBoxW 中？我正在使用 Visual C++ 2008 Express，我是一个非常初学者。我的问题是将不同的变量添加到字符串中。它基本上总是说：**不能添加两个指针**。为什么我不能像在所有其他编程语言中一样将两个字符串或一个字符串和一个整数与常规“+”符号一起添加？我使用 Google 并找到了 stringstream，但这对我来说并不奏效，所以请不要再向我推荐它。

我有这三种类型的变量：（是的，我的程序使用 unicode 运行，它必须是这样的！我在标题中定义了 unicode。）

```
wchar_t username[255];
wchar_t windir1[MAX_PATH];
wchar_t computername1[255]; 
```

然后我的 MessageBox 有一个变量：

```
LPCWSTR message1; 
```

我有我的 MessageBox 的代码：

```
MessageBox(NULL, message1, L"Info", MB_OK); 
```

我现在如何将所有三个变量加在一起以输出。我的以下代码不起作用：

```
message1 = "Computername: " + computername1 + "\n" + "Username: " + username1 + "\n" + "Windows Directory: " + windir1; 
```

错误类似于“无法转换...”和“无法添加两个指针...”我已经尝试了所有内容，或者加号（'+'）是非法的。是否有任何文本宏可以轻松地将字符串添加在一起或类似的东西？我的研究没有发现任何令人满意的东西。大多数适用于 Borland 的示例，例如 Visual Studio C++ 不提供的 .c_str()。

只要没有添加任何东西，一个变量就可以用于输出：

```
LPCWSTR message1 = _T(computername1); 
```

但是我怎么说我想用加号运算符和多个字符串加在一起来输出“message1”。

这个结构已经不起作用了，它说：**不能添加两个指针！**

```
LPCWSTR message1 = _T(computername1) + _T("My Test String"); 
```

有什么指点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:25:28.973

添加将不起作用。

您必须分配内存并将字符串复制到其他地方。一个好方法是 wsprintf，或支持加法的 C++ 类 std::wstring。但是，最好避免使用宽字符 (UTF-16) 并使用常规 std::string 进行添加。使用 boost::nowide 将它们传递给 MessageBoxW()。有关详细信息，请参阅 utf8everywhere.org。

# python - 任意尺寸的 Numpy 切片

> ID：12116830
> 
> 赞同：71
> 
> 时间：2012-08-24T21:21:43.367
> 
> 标签：python, numpy

我想切片一个 numpy 数组以获得最后一维中的第 i 个索引。对于 3D 数组，这将是：

```
slice = myarray[:,:,i] 
```

但是我正在编写一个函数，我可以在其中获取任意维度的数组，因此对于 4D 数组，我需要`myarray[:,:,:,i]`，依此类推。有没有一种方法可以为任何数组获取此切片，而无需显式编写数组维度？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-08-24T21:24:33.110

有`...`or `Ellipsis`，它正是这样做的：

```
slice = myarray[..., i] 
```

Ellipsis 是 python 对象，如果您想在方括号表示法之外使用它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-24T21:29:39.780

其实，刚刚找到答案。正如[numpy 的文档](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)中所述，这可以通过 slice 对象来完成。在我的特殊情况下，这样做可以：

```
idx = [slice(None)] * (myarray.ndim - 1) + [i] 
my_slice = myarray[idx] 
```

`slice(None)`相当于选择该索引中的所有元素，最后一个 [i] 为最后一个维度选择特定索引。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-18T22:37:05.400

在切片任意维度方面，之前的优秀答案可以扩展到：

```
indx = [slice(None)]*myarray.ndim
indx[slice_dim] = i
sliced = myarray[indx] 
```

这会从任何维度返回切片`slice_dim`-`slice_dim = -1`重现先前的答案。为了完整起见 - 上述清单的前两行可以浓缩为：

```
indx = [slice(None)]*(slice_dim) + [i] + [slice(None)]*(myarray.ndim-slice_dim-1) 
```

虽然我发现以前的版本更具可读性。

# webdev.webserver - 没有框架的网站

> ID：12116838
> 
> 赞同：1
> 
> 时间：2012-08-24T21:22:43.433
> 
> 标签：webdev.webserver

如何在不使用框架的情况下从头开始创建网站？

我想创建一个与数据库通信并根据用户活动动态显示内容的 Web 服务。

我希望外观是 HTML5/CSS3。

我宁愿通过python与数据库通信，或者go。

数据库是 Cassandra。

我觉得我已经将所有这些努力都放在了尝试具有限制选项和运行 API 的框架上，而我不知道 API 真正在做什么。

我想要一个超级简单的例子，我可以理解双向通信的基础知识。我希望我的 /var/www 看起来像这样：

# ls /var/www

index.html 数据写入和读取.py

一个像 index.html 这样简单的例子：有两个框，一个接收文本并将其提交到数据库，另一个框在第一个框下方列出该数据库的内容。

第二个文件 datawriteandread.py 用于与数据库通信以添加新内容并在 HTML 中显示旧内容。

想要这么简单的东西，我的无知表现在哪里？

将 python 写入 Cassandra 很容易，我迷失的是 HTML 中的通信和显示。我有编程能力，但 webdev 对我来说是全新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:28:14.840

这是配置 Apache2：

[http://narnia.cs.ttu.edu/drupal/node/43](http://narnia.cs.ttu.edu/drupal/node/43) 添加

> ScriptAlias /cgi-bin/ /var/www/cgi-bin/
> 
> ```
> <Directory "/var/www/cgi-bin">
>         AllowOverride None
>         Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
>         Order allow,deny
>         Allow from all
>         AddHandler cgi-script .py                       # tell Apache to handle every file with .py suffix as a cgi program
>         AddHandler default-handler .html .htm  # tell Apache to handle HTML files in regular way
> </Directory> 
> ```

到 /etc/apache2/sites-available/default

这个代码片段：

[http://wiki.python.org/moin/CgiScripts](http://wiki.python.org/moin/CgiScripts) ...（感谢 Mike Christensen 提供此链接）

> ```
>  1 #!C:\Python27\python.exe -u
>    2 #!/usr/bin/env python
>    3 
>    4 import cgi
>    5 import cgitb; cgitb.enable()  # for troubleshooting
>    6 
>    7 print "Content-type: text/html"
>    8 print
>    9 
>   10 print """
>   11 <html>
>   12 
>   13 <head><title>Sample CGI Script</title></head>
>   14 
>   15 <body>
>   16 
>   17   <h3> Sample CGI Script </h3>
>   18 """
>   19 
>   20 form = cgi.FieldStorage()
>   21 message = form.getvalue("message", "(no message)")
>   22 
>   23 print """
>   24 
>   25   <p>Previous message: %s</p>
>   26 
>   27   <p>form
>   28 
>   29   <form method="post" action="index.cgi">
>   30     <p>message: <input type="text" name="message"/></p>
>   31   </form>
>   32 
>   33 </body>
>   34 
>   35 </html>
>   36 """ % cgi.escape(message) 
> ```

结合起来，在没有数据库的情况下准确地给我我想要的东西，但实现是合乎逻辑的。

这是下一步。

[http://www.java2s.com/Tutorial/Python/0440__CGI-Web/Loginform.htm](http://www.java2s.com/Tutorial/Python/0440__CGI-Web/Loginform.htm)

您的 index.htm：

> ```
> <HTML>
> <HEAD><TITLE>Login Page</TITLE></HEAD>
> <BODY>
> <CENTER>
> <FORM method="POST" action="http://yourserver/cgi-bin/login.py">
> <paragraph> Enter your login name: <input type="text" name="login">
> <paragraph> Enter your password: <input type=password name="password">
> <paragraph> <input type="submit" value="Connect">
> </FORM>
> </CENTER>
> <HR>
> 
> </form>
> </BODY>
> </HTML> 
> ```

您的 login.py CGI：

> ```
> #!/usr/local/bin/python
> import cgi
> 
> def header(title):
>     print "Content-type: text/html\n"
>     print "<HTML>\n<HEAD>\n<TITLE>%s</TITLE>\n</HEAD>\n<BODY>\n" % (title)
> 
> def footer():
>     print "</BODY></HTML>"
> 
> form = cgi.FieldStorage()
> password = "python"
> 
> if not form:
>     header("Login Response")
> elif form.has_key("login") and form["login"].value != "" and form.has_key("password") and form["password"].value == password:
>     header("Connected ...")
>     print "<center><hr><H3>Welcome back," , form["login"].value, ".</H3><hr></center>"
>     print r"""<form><input type="hidden" name="session" value="%s"></form>""" % (form["login"].value)
>     print "<H3><a href=browse.html>Click here to start browsing</a></H3>"
> 
> else:
>     header("No success!")
>     print "<H3>Please go back and enter a valid login.</H3>"
> 
> footer() 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:29:10.593

您可以使用 CGI 执行此操作。一个简单的 Python CGI 脚本可能是：

```
print "Content-type: text/html"
print

print "Hello, world!" 
```

设置 Web 服务器以将 Python 程序作为 CGI 脚本运行的详细信息将取决于您选择的 Web 服务器。但是，您可以参考文档中的 CGI 部分。

Python[`cgi`模块](http://docs.python.org/library/cgi.html)具有各种功能，有助于提取浏览器提交的表单数据等操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:30:43.597

我认为使用 Python 最脑残、最简单的方法是作为[CGI 脚本](http://docs.python.org/howto/webservers.html)。您的 Web 服务器将简单地运行您的 Python 脚本并将输出重定向到响应。没有框架，什么都没有。

您可以在 Google 上搜索“ [Python CGI](http://bit.ly/RjwSjA) ”并获得大量示例，例如[这个](http://wiki.python.org/moin/CgiScripts)。从那里，您将能够使用您选择的 Python 数据库驱动程序直接与数据库进行交互。您的 HTML 将直接将`POST`数据发送到您的 Python 脚本。

# javascript - 将jquery函数动态应用于添加的元素

> ID：12116840
> 
> 赞同：0
> 
> 时间：2012-08-24T21:22:47.807
> 
> 标签：javascript, jquery

这是工作流程：

1.  将元素动态添加到 div 容器
2.  注册此元素的点击事件（使用 jquery 自定义函数）
3.  触发元素事件

根据上面的流程，我无法让新元素事件起作用，因为它永远不会被触发。这是我的场景：

[http://jsfiddle.net/9Ru76/1/](http://jsfiddle.net/9Ru76/1/)

这个想法是，当您单击“元素”时，其 ID 属性应打印在 .log div 中

编辑：

我已经测试了所有答案，并且所有答案都可以正常工作:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:31:42.510

You had the `$(".element").showID();` outside the `.create` click handler so there was nothing to select, also you had your code in onLoad when it should be in no-wrap head.

[http://jsfiddle.net/9Ru76/9/](http://jsfiddle.net/9Ru76/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:28:48.753

You can use event delegation

```
$(document).ready(function(){

    $(".create").click(function(){
         $(".container").append('<div id="4" href="#" class="element">element</div>');
    });
});

    $(document).on('click','.element', function(){
        $(".log").html("id: " + $(this).attr("id"));
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:28:29.210

# android - 使用 DialogFragment 时出现 IllegalStateException

> ID：12116842
> 
> 赞同：9
> 
> 时间：2012-08-24T21:22:53.357
> 
> 标签：android, android-dialogfragment

我刚开始使用 android 支持库中的 DialogFragment，到目前为止发现它非常烦人。我有一些自定义 AsyncTasks 从我的应用程序的不同位置调用。有两种情况下我遇到了 DialogFragments 的问题：

1.  调试和屏幕关闭时
2.  当我想从 onActivityResult() 打开一个 FragmentDialog

至少我认为，两者都是相当常见的情况，在这两种情况下，我都得到了

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

这就是我的 AsyncTasks 的结构：

```
private class UploadImageAsyncTask extends AsyncTask<Void, Void, Image> {
    private ProgressDialogFragment dialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        FragmentManager fm = getSupportFragmentManager();
        dialog = new ProgressDialogFragment();
        dialog.show(fm, "ProgressDialogFragment");
    }

    @Override
    protected Image doInBackground(Void... params) {
        ...
    }

    @Override
    protected void onPostExecute(Image result) {
        super.onPostExecute(result);
        dialog.dismiss();

        ...
        }
    }
} 
```

我知道我可以设置一个设置来防止屏幕在调试时进入睡眠状态，我可以在 onActivityResult() 中设置一个标志，然后在 onStart() 中打开对话框，但这并不是我真正想要的。有没有更好的解决方案？？

谢谢西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-04T23:12:44.517

使用`dialog.dismissAllowingStateLoss();`而不是`dialog.dismiss();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:57:10.567

你有一个关于另一个问题的答案：[Show DialogFragment from onActivityResult](https://stackoverflow.com/questions/10114324/show-dialogfragment-from-onactivityresult)

基本上是[兼容性库中的一个错误](http://code.google.com/p/android/issues/detail?id=23761)。

# sql - 在 SQLite 中重写 DISTINCT 查询

> ID：12116844
> 
> 赞同：0
> 
> 时间：2012-08-24T21:23:03.177
> 
> 标签：sql, sqlite

我有一个看起来像这样的查询：

```
SELECT Distinct(ContKey)
FROM Point
WHERE Created > 1245750191000
  AND Created < 1345753791000
  AND ContainerId='abcd' 
```

查询的目的是获取所有不同的 ContKey 值，这些值根据某些条件（包括范围）映射到表“Container”中的字段“Key”。

它运行得很慢。我确信这不是索引问题，因为我们在相关字段和字段组合上有一个索引。在我拥有数百万行的数据库中，此查询需要 300 秒才能返回 69,338 个结果。太慢了！

我正在尝试重新编写查询以消除该`DISTINCT`子句。我想出了这个：

```
SELECT Key
FROM Container t
WHERE t.ContainerId = 'abcd'
  AND EXISTS( SELECT 1
              FROM Point
              WHERE Created > 1245750191000
                AND Created < 1345753791000
                AND ContainerId = t.ContainerId ) 
```

它运行得更快（不到一秒）。但产生更多的结果。确切地说是72,330。这是重写不正确吗？根据我正在尝试做的事情，我希望我可以改进查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:26:44.773

> 我确信这不是索引问题，因为我们在相关字段和字段组合上有一个索引。

所以换句话说，你不确定你需要什么索引，所以你只是在你能想到的所有东西上添加了索引？当您考虑所有各种多列索引和列的排列时，有*很多可能的组合。*在不了解您在做什么的情况下，您很可能没有添加正确的索引。

您应该将最具选择性的列放在索引的首位。在这种情况下，它看起来`ContainerId`可能是最具选择性的。尝试添加这个多列索引：

```
(ContainerId, CreatedId, ContKey) 
```

重复一遍：索引中的列顺序很重要。以不同的顺序创建具有相同列的索引可能会产生不同的性能特征。

# objective-c - 头脑风暴：为什么将内存地址与小整数进行比较

> ID：12116846
> 
> 赞同：0
> 
> 时间：2012-08-24T21:23:22.233
> 
> 标签：objective-c, assembly, x86, reverse-engineering

背景：我正在反转属于某个类的 Obj-C 实例方法。这是类的接口

```
@interface myClass : NSObject
    { 
            // aStructure contains a lot of function pointers

         struct aStructure **_myStruct;     // ivar offset: 0x14  
         int                             _integer;             // ivar offset: 0x20
    }

   - (void)aMethod;

@end 
```

问题：

这是一个`aMethod`反汇编的片段

```
[0x0]      mov   edi,    [ebp+arg_0]     ## put self into edi
[0x2]      mov   edx,   [edi+20h]        ## put  self._integer into edi
[0x3]      cmp   edx,   1
[0x4]      jl       end_of_method       ## if (self._integer < 1) return;
[0x5]      lea     eax,   [edx-0Ch]       ## put &self._myStruct into eax
[0x6]      cmp   eax,   3
[0x7]      ja      end_of_method       ## if (&self._myStruct > 3) return;
// other stuff 
```

第 6 行显示了内存地址 ( `&self._myStruct`) 与`3`.

问题：为什么要将内存地址与 int 进行比较？这对我来说没有多大意义，因为内存地址将始终 > 3，因此在这种情况下该方法将始终退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:32:43.510

`lea eax, [edx-0Ch]`只是意味着`eax = edx - 12`。该指令被称为“加载有效地址”并不意味着它是唯一可以使用的东西 -当该指令是更短/更快的计算方式时，编译器通常会输出`lea`而不是`add`/ `sub`/ 。`mul`

整个片段检查是否`_integer`介于 1 和 15 之间。它存储`_integer - 12`在 中`eax`，大概是因为它将在稍后的方法中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T21:32:33.847

`self._integer`被加载到`edx`第 2 行。它一直存在到第 5 行。

在第 5 行，您分配( ) 和 -0xC`eax`的总和。因此，您最终在第 6 行将 -0xC 与 3 进行比较。在任何地方都没有地址比较，除非呈现的反汇编不完整或不正确。`edx``self._integer``self._integer`

该`lea`指令最初用于地址算术，可用于其他目的，就像我们在这里看到的一样。

# facebook - 使用 Graph API 管理/隐藏 Facebook 评论？

> ID：12116847
> 
> 赞同：2
> 
> 时间：2012-08-24T21:23:27.683
> 
> 标签：facebook, facebook-graph-api, facebook-comments

我们正在使用 Graph API 来读取页面上出现的评论（例如，通过抓取[https://graph.facebook.com/Nike/posts&access_token=my_access_token可以访问](https://graph.facebook.com/Nike/posts&access_token=my_access_token)[http://facebook.com/Nike](http://facebook.com/Nike)上的评论）。

问题：我看到一个`HTTP DELETE`可以用来删除评论的；是否有一个 API 来缓和它（例如将其标记为`is_private`，可逆的东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:43:39.177

不幸的是，目前不可能:( [http://developers.facebook.com/bugs/439078329445665?browse=search_506da06b6babc7479209814](http://developers.facebook.com/bugs/439078329445665?browse=search_506da06b6babc7479209814)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-26T16:45:33.193

现在可以隐藏 facebook 评论。该`can_hide`字段将显示您（例如与给定访问令牌关联的用户/页面）是否被允许隐藏评论。`is_hidden`，好吧，那是不言自明的。

所以首先，使用`GET`请求来查看评论是否已经隐藏，以及是否可以隐藏它：

```
[comment_id]?fields=is_hidden,can_hide 
```

如果允许且有必要，您可以使用`POST`请求`is_hidden=true`来实际隐藏它。

[阅读文档以获取更多信息。](https://developers.facebook.com/docs/graph-api/reference/v2.8/comment)

# ruby-on-rails - 新的 LinkedIn 权限：使用 rails LinkedIn gem 访问过去的职位和教育

> ID：12116853
> 
> 赞同：3
> 
> 时间：2012-08-24T21:24:26.743
> 
> 标签：ruby-on-rails, omniauth, linkedin

Linkedin 最近更新了他们的 API，使其在某些情况下可以访问的内容限制较少，但在访问方式方面通常更加明确。

特别是，您必须在 omniauth 构建器中明确请求您想要的数据：

```
Rails.application.config.middleware.use OmniAuth::Builder do   
   provider :linkedin, "consumer_key", "consumer_secret", 
      :scope => 'r_fullprofile r_emailaddress r_network', 
      :fields => ["id", "email-address", "first-name", "last-name", "headline", 
            "industry", "picture-url", "public-profile-url", "location", "connections"]   
end 
```

见：[https ://github.com/skorks/omniauth-linkedin](https://github.com/skorks/omniauth-linkedin)

与前面引文中的字段不同（所有这些字段都是一般可访问的配置文件信息的一部分），“连接”是必须在此处明确请求的结构化对象（默认情况下可以访问前面的字段）。

我对“职位”和“教育”字段更感兴趣，它们像“连接”一样是结构化对象。例如，职位包含有关每个职位的公司、职位、开始日期、结束日期的数据：

[http://developer.linkedin.com/documents/profile-fields](http://developer.linkedin.com/documents/profile-fields)

我如何在我的omniauth builder中对职位和教育中的字段提出正确的请求？我可以使用旧 API 密钥访问它们，但不能使用新发布的密钥（截至 8 月）。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T01:37:52.987

看起来您正在向您的应用程序授予**r_fullprofile**权限。这才是正确的会员权限。但是，这只会将完整的个人资料字段授予经过身份验证的用户（其中​​包含职位和教育字段）。通过您的第一和第二学位连接，您只能检索基本个人资料字段的字段（作为**r_basicprofile**成员权限的一部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T14:39:14.857

您需要添加教育领域以及范围，以便您的领域将变成类似

```
:fields => ["id", "email-address", "first-name", "last-name", "headline", 
        "industry", "picture-url", "public-profile-url", "location", "connections", "educations"] 
```

有关详细信息，请参阅[https://developer.linkedin.com/documents/profile-fields#educations](https://developer.linkedin.com/documents/profile-fields#educations)

# javascript - Scala Lift如何运行javascript函数并将返回值存储在变量中

> ID：12116858
> 
> 赞同：1
> 
> 时间：2012-08-24T21:24:45.200
> 
> 标签：javascript, scala, lift

现在我有这个代码：

```
JsCmds.JsCrVar(nombreAlumnoActual, JE.Call("retornarNombre")) 
```

`nombreAlumnoActual`是在我的代码片段中定义的字符串 var，`retornarNombre`是我的 javascript 函数的名称，即：

```
<script type="javascript">

            function retornarNombre(){
               return document.getElementById("nombre").value.toString();
              }
 </script> 
```

但是当我调试我的变量`nombreAlumnoActual`是`""`.

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:52:35.227

尝试解决此类问题的第一件事就是进行一些调试。具体来说，在`retornarNombre()`. 如果您使用带有 Firebug 扩展的 Firefox，您可以调用`console.log()`. 或者你可以使用 Javascript 调试。确保正在调用该函数，并且该调用链中的所有内容都按预期工作。

要尝试的另一件事是更改`JE.Call("retornarNombre")`为`JE.JsRaw("retornarNomre()")`. 是的，这几乎是一回事，但你永远不知道。

# apache - 使用 .htaccess 和 symfony 修改 url

> ID：12116862
> 
> 赞同：1
> 
> 时间：2012-08-24T21:25:29.150
> 
> 标签：apache, .htaccess, symfony-1.4

我正在使用 symtfony 1.4，我有一个名为 backend 的模块，它的索引文件是

> www.domain.com/backend.php

但是我希望当我在浏览器上写 www.domain.com/back 时将我重定向到

> www.domain.com/backend.php

我尝试使用此规则

```
RewriteRule ^/back$ www.domain.com/backend.php 
```

但它不起作用。

这是我的 .htaccess

```
Options +FollowSymLinks +ExecCGI

<IfModule mod_rewrite.c>
  RewriteEngine On

  # uncomment the following line, if you are having trouble
  # getting no_script_name to work
  #RewriteBase /

  # we skip all files with .something
  #RewriteCond %{REQUEST_URI} \..+$
  #RewriteCond %{REQUEST_URI} !\.html$
  #RewriteRule .* - [L]

  # we check if the .html version is here (caching)
  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  RewriteRule ^/back$ www.domain.com/backend.php 

  # no, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:35:37.077

尝试改变：

```
 RewriteRule ^/back$ www.domain.com/backend.php 
```

到

```
 RewriteRule ^back$ http://www.domain.com/backend.php [L] 
```

# c - C 编程 - K&R 示例 1.5.2 - 修改后的程序未按预期运行

> ID：12116864
> 
> 赞同：2
> 
> 时间：2012-08-24T21:25:45.380
> 
> 标签：c, increment, getchar, kernighan-and-ritchie

我的问题只是“为什么我在第 10 行和第 11 行的代码不能正常运行？” 我的代码的预期目的是完全按照原始 K&R 代码的意图执行，但不计算 nc 任何时候 (getchar() == '\n') 请您赐教？

稍作修改的 K&R 代码：

```
/** K&R - 1.5.2 Character Counting **/
#include <stdio.h>

/* count characters in input; 1st version */
main(){
  long nc;

  nc = 0;
  while (getchar() != EOF){
    if (getchar() != '\n'){
      ++nc;
    }
  }
  printf("%ld\n", nc);
} 
```

*我使用 64 位 Windows 7、CodeBlocks10.05、GNU GCC 编译器。*

我目前的进展和理解：

在示例运行中，我输入单词`two`并按 Enter，这等于 4 个输入，然后按 ctrl+Z 输入一个`^Z`或 EOF 字符。然后程序打印`1`. 我期待它打印`3`。我想唯一合乎逻辑的解释是它的行为与我的意图完全相反（*它只*计算换行符？）。事实证明，如果我输入单词`two`并按回车键，让我们说 4 次，它会打印`4`. 它似乎在计算`nc`输入的每个换行符，但是如果我单独按 Enter（在这种情况下为 4 次）然后按 EOF，它总是会打印`0`. 经过进一步的实验，在某些人看来，看不见的 4 可能是这个程序的一个神奇数字。如果我启动它并准确地按回车键（一个可被 4 整除的数字）然后 EOF 它会打印`0`. 但是，如果我按其他次数输入，EOF 什么都不做，我必须输入`^Z`两行，一个接一个，才能正确结束 while 循环，然后打印`1`。这让我大吃一惊！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:32:10.530

问题是您需要从`getchar()`- in an `int`- 中保存值，因为每次增加计数时都会读取两个字符。其中之一是在 EOF 测试中；第二个是在换行测试中。

```
int c;

while ((c = getchar()) != EOF)
{
    if (c != '\n')
        ++nc;
} 
```

* * *

您需要将结果存储`getchar()`在 an`int`而不是 a 的`char`原因是它可以返回每个可能的`char`值以及一个不同的值 EOF。如果您不使用`int`（直接存储到 a`char`中），将会发生以下两种情况之一：

1.  如果`char`是有符号类型，则合法字符（通常是 y-元音变音、ÿ、带分音符号的拉丁小写字母 Y、U+00FF — 至少在源自拉丁语 1 或 ISO 8859-1 的代码集中）将被解释为等效于 EOF，并且您的程序将提前终止。
2.  如果`char`是无符号类型，则任何字符都不会等同于 EOF，因此程序永远不会停止循环。

这两种情况都不是可取的。将返回值存储`getchar()`在 an 中`int`可以防止这两个问题；这是“唯一”（或至少是最简单的）正确方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T21:31:36.537

简而言之，您调用`getchar()`了两次，因此每次迭代都会消耗两个字符。

你应该明白调用`getchar()`从输入流中读取一个字符。如果要测试换行符，则应将该字符存储在变量中，然后测试该变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T21:30:56.520

```
int c;

[...]

while ((c = getchar()) != EOF) {
    if (c != '\n') {
      ++nc;
    }
} 
```

每次您调用时，`getchar()`您都在消耗`stdin`.

# android - 使用 ListView 删除 SQLite 行

> ID：12116867
> 
> 赞同：1
> 
> 时间：2012-08-24T21:26:34.713
> 
> 标签：android, android-listview

这是我目前的适配器。

这就是我试图转换日期的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:43:30.623

我开始将您的适配器更改为 CursorAdapter 但老实说它与此 SimpleCursorAdapter 示例相同（我对其进行了更新以尽可能反映您的代码。）：

```
public class Example extends Activity {
    SimpleCursorAdapter adapter;
    Database database;
    ListView listView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        database = new Database(this);
        database.open();

        // See my note below for a detailed explanation of this
        Cursor cursor = database.getAllNames();
        adapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_checked, 
                cursor, 
                new String[] { "name" }, // "name" is the column in your database that I describe below
                new int[] {android.R.id.text1}, 0);

        listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(adapter);
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        Button delete = (Button) findViewById(R.id.delete_button);
        delete.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                long[] checkedIds = listView.getCheckedItemIds();
                for(long id : checkedIds)
                    database.deleteName(id);

                listView.clearChoices();
                adapter.changeCursor(database.getAllNames());
            }
        });
    }

    @Override
    protected void onDestroy() {
        database.close();
        super.onDestroy();
    }
} 
```

好的，完成这项工作所需要的只是一个方法，该方法返回一个带有`getAllNames()`数据库类中所有名称（我称之为它）的 Cursor。现在我假设您的表架构看起来像这样：

```
CREATE TABLE Names (
    _id INTEGER PRIMARY KEY,
    names TEXT); 
```

您可以进行相应的调整。您的`Database.getAllNames()`方法应该使用这样的查询：

```
"SELECT _id, name FROM Names;" 
```

或者，如果您希望按字母顺序排列名称：

```
"SELECT _id, name FROM Names ORDER BY name;" 
```

总之，它看起来像：

```
public Cursor getAllNames() {
    return NameDatabase.rawQuery("SELECT _id, name FROM Names ORDER BY name;", null);
} 
```

我希望能解释一些事情，老实说，这是做你想做的最简单的方法。

* * *

**添加您自己的行（列表项）布局**

添加自己的布局很简单。由于您喜欢 simple_list_item_checked.xml 的外观，让我们复制它的布局并根据您的颜色调整它：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:checkMark="?android:attr/textCheckMark"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

您需要添加的是：

```
 android:background="#ffffffff"
    android:textColor="#ff000000" 
```

（请注意，由于只有一个元素，因此不需要 ViewGroup；没有 LinearLayout，没有 RelativeLayout 等。还有`"@android:id/text1"`我们在 SimpleCursorAdapter `android.R.id.text1' 中引用的 id，当您更改布局时，您需要适当地改变这些。）

**但是**，如果您只想反转颜色，请考虑为整个应用程序使用不同的主题。打开你的清单并添加这个主题：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light" > 
```

默认情况下，Android 使用 Theme.Dark，只需将其更改为 Theme.Light。现在每个项目默认都有白色背景和黑色文本！

**对 getView() 的小幅调整**

为了将来参考，在适配器的 getView() 中，您为每个新行调用 getLayoutInflater()。您只需要在构造函数中获取一次 LayoutInflater 并将其保存在一个变量中，可能`LayoutInflater mLayoutInflater`，然后在 getView() 中使用它`mLayoutInflater.inflate(...)`。

希望有帮助！

# android - 在父 LinearLayout 中更改子 LinearLayout 可见性“onClick”ing TextView

> ID：12116871
> 
> 赞同：1
> 
> 时间：2012-08-24T21:26:42.530
> 
> 标签：android, android-layout

我正在尝试使用 onClickListener 为父 LinearLayout 中存在的 TextView 切换子 LinearLayout 的可见性。有人可以帮我实现这一目标吗？

以下是我的布局文件的一部分：

```
<LinearLayout android:id="@+id/main_space"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_weight="10"
    android:padding="2dp">
    <TextView android:id="@+id/currentUserHeader"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="@dimen/currentuserheader_textsize"
        android:textColor="@color/currentuserheader_textcolor"/>
    <TextView android:id="@+id/currentUserBody"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="@dimen/currentuserbody_textsize"
        android:textColor="@color/currentuserbody_textcolor"
        android:clickable="true"
        android:onClick="toggleUserActionBar"/>
    <LinearLayout android:id="@+id/useractions"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:visibility="gone"
        android:background="@color/useractions_background">
        <TextView android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="Save"
            android:textColor="@color/useractions_label"
            android:textSize="@dimen/useractions_textsize"
            android:layout_weight="1"
            android:gravity="center"/>
        <TextView android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="Delete"
            android:textColor="@color/useractions_label"
            android:textSize="@dimen/useractions_textsize"
            android:layout_weight="1"
            android:gravity="center"/>
        <TextView android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="Forward"
            android:textColor="@color/useractions_label"
            android:textSize="@dimen/useractions_textsize"
            android:layout_weight="1"
            android:gravity="center"/>
    </LinearLayout>
</LinearLayout> 
```

当我单击 TextView“currentUserBody”时，我想切换该文本视图正下方的 LinearLayout“useractions”的可见性。

这个布局实际上是 ListView 中一行的布局。所以我希望这个功能适用于该 ListView 中的每一行。用户可以简单地点击文本，它应该在文本下方打开选项以快速执行这些操作。

你能帮我实现这个吗？

PS：我创建了一个自定义 ArrayAdapter 来填充 ListView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T06:22:21.127

`getView`这是执行您想要的方法的示例：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // do the normal thing you would do, inflate stuff, use the view holder pattern etc 
    // set as the tag for the clickable TextView the current position
    ((TextView) convertView.findViewById(R.id.currentUserBody)).setTag(Integer.valueOf(position));
    // set the listener for the TextView
    ((TextView) convertView.findViewById(R.id.currentUserBody)).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // retrieve the position value
            Integer realPos = (Integer) v.getTag();
            // get the parent and then search for the useractions LinearLayout
            View hiddingLayout = ((LinearLayout) v.getParent()).findViewById(R.id.useractions);
            // modify a status holder with the new value
            status[realPos] = !status[realPos];
            // change the visibility 
            hiddingLayout.setVisibility(status[realPos] ? View.VISIBLE : View.GONE);
        }
    });
    // this is required so we don't mess up the rows with visible/gone layouts 
    convertView.findViewById(R.id.useractions).setVisibility(status[position] ? View.VISIBLE : View.GONE);
    return convertView;
} 
```

该`status`数组是一个`boolean`数组，它将保存每一行的可见性状态（`false`值表示`GONE`，`VISIBLE`否则）。您将根据数据的大小在构造函数中创建此数组。如果您打算调用`notifyDataSetChanged`适配器，则需要重置阵列。

编辑：

另一种选择是将当前布局文件分成两部分并使用`ExpandableListView`隐藏布局是子视图的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T01:50:07.980

一个快速而肮脏的解决方案可能是：

```
public void toggleUserActionBar(View v) {
    View actions = v.getParent().findViewById(R.id.useractions);
    if(actions.getVisibility() == View.VISIBLE) {
         actions.setVisibility(View.GONE);
    } else {
         actions.setVisibility(View.VISIBLE);
    }
} 
```

一个更干净的解决方案是在自定义视图中扩展项目布局，它可以在内部处理所有这些。

# javascript - GWT：可以从外部 JavaScript 而不是 JSNI 调用 Java 方法吗？

> ID：12116873
> 
> 赞同：3
> 
> 时间：2012-08-24T21:26:49.103
> 
> 标签：javascript, gwt, jsni

我正在尝试将我的大部分原生 JavaScript 代码从 JSNI 方法中移到脚本中，并且只是利用原生 JSNI 方法来调用这些外部方法。

现在，我的一个点击处理程序遇到了困难。当用户单击特定元素时，JSNI 方法会执行一些基于 JQuery 的动画，然后在回调中调用 Java 方法。一个简单的例子是这样的：

```
public native void attachClickHandler(SomeCustomPanel customPanel) /*-{
    $wnd.jQuery("#theElement").click(function() {
        // some JQuery animation logic here...
        $wnd.jQuery("#theElement").animate({ top: "500px" }, 500, function() {
            customPanel.@com.something.whatever.client.SomeCustomPanel::doSomething()();
        });
        // some other code here...
    });
}-*/; 
```

此代码有效。它按预期编译和工作。我想把它移到外部 JavaScript 中。我尝试了以下。我把它放在外部 JavaScript 中：

```
function attachClickAction(customPanel) {
    $("#theElement").click(function() {
        // other stuff...
        $("#theElement").animate({ top: "500px" }, 500, function() {
            customPanel.@com.something.whatever.client.SomeCustomPanel::doSomething()();
        });
        // other stuff...
    });
} 
```

并像这样修改了本机函数：

```
public native void attachClickHandler(SomeCustomPanel customPanel) /*-{
    $wnd.attachClickAction(customPanel);
}-*/; 
```

但是是不正确的。JavaScript 文件甚至不会加载，因为这不是正确的 JavaScript。（Chome 的开发工具给了我错误信息“Uncaught SyntaxError: Unexpected identifier”。）

**有没有办法从外部 JavaScript 文件调用 Java 方法，*而不是*从 JSNI 方法？**

如果重要的话，我在 GWT 2.4 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T22:23:21.243

答案是**否定的，您不能从外部 JavaScript 函数显式调用 Java 方法。**

但是，您可以很聪明地利用 JavaScript 允许您将函数本身作为参数传递的事实。

我修改了我的 JavaScript 函数，如下所示：

```
function attachClickAction(callbackFunction) {
    $("#theElement").click(function() {
        // other stuff...
        $("#theElement").animate({ top: "500px" }, 500, callbackFunction);
    // other stuff...
    });
} 
```

在我的 Java 代码中，我明确地将 Java 方法作为回调函数参数传递：

```
public native void attachClickHandler(SomeCustomPanel customPanel) /*-{
    $wnd.attachClickAction(function() {
        customPanel.@com.something.whatever.client.SomeCustomPanel::doSomething()();
    });
}-*/; 
```

这样，当 JSNI 方法编译时，它会正确调用`doSomething()`Java 方法，并且该方法调用会正确地完整地传递给外部 JavaScript 函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T05:50:15.780

尽管您不能使用 vanilla GWT 直接从 JavaScript 调用 Java 类的方法，但 [gwt-exporter](http://code.google.com/p/gwt-exporter/wiki/GettingStarted)完成了从本机 JavaScript 调用“Java”对象的方法所需的大量管道。

您可以执行以下操作：

爪哇：

```
@ExportPackage("")
@Export("MYOBJ");
class MyClass implements Exportable {
   public void doSomething();
} 
```

JavaScript：

```
MYOBJ.doSomething(); 
```

gwt-exporter 适用于 GWT 2.4，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T09:39:38.183

是的，您可以将 Java (GWT) 方法导出为 JavaScript 函数，并且可以将 Java 对象放入 JavaScript 变量中。这是一个简单的例子：

```
@Override
public void onModuleLoad() {
  exportJavaMethodsToJs();

  final SomeCustomPanel firstCustomPanel = new SomeCustomPanel("first");
  exportJavaObjectToJs("firstCustomPanel", firstCustomPanel);

  final SomeCustomPanel anotherCustomPanel = new SomeCustomPanel("another");
  exportJavaObjectToJs("anotherCustomPanel", anotherCustomPanel);
}

native void exportJavaMethodsToJs() /*-{
  $wnd.doSomething = function(panel) {
    panel.@com.something.whatever.client.SomeCustomPanel::doSomething()();
  }
  // Export any methods you need in JavaScript here...
}-*/;

native void exportJavaObjectToJs(final String key, final Object object) /*-{
  $wnd[key] = object;
}-*/; 
```

然后，在 JavaScript 中（在 onModuleLoad() 被调用之后！），您可以像这样轻松地使用它

```
doSomething(firstCustomPanel);
doSomething(anotherCustomPanel); 
```

您的示例现在如下所示：

```
jQuery("#theElement").click(function() {
    // some JQuery animation logic here...
    $wnd.jQuery("#theElement").animate({ top: "500px" }, 500, function() {
        doSomething(firstCustomPanel);
    });
    // some other code here...
}); 
```

# javascript - 列表未显示在我的本地主机上，但显示在 jsfiddle

> ID：12116876
> 
> 赞同：0
> 
> 时间：2012-08-24T21:27:07.570
> 
> 标签：javascript, jquery, html

我试图最终用 jQuery 制作一个滑动表单，但是在测试我的 html 代码时，我注意到 ul 列表没有出现在我的 apache localhost 上。然而它显示在 jsfiddle 上，正如在链接中看到的那样——> [http://jsfiddle.net/713Marketing/Awh3G/86/](http://jsfiddle.net/713Marketing/Awh3G/86/) 为什么会这样？我的 jquery 库已更新，并且`$(document).ready(function() {`在我的代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:33:36.910

代替 jQuery .show()，试试 vanilla javascript。如果不出意外，这可能有助于诊断您的问题：

```
document.getElementById("navigation").setAttribute("style",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T23:53:32.943

尝试这个：

```
 $(function() {
      $("#navigation").show();
 }); 
```

或者

```
function yolo(){
$("#navigation").show();      // make <body onload='yolo()>
} 
```

我不确定为什么您的代码不起作用。

你确定你正确地包含了 jQuery 吗？您在函数末尾添加了右括号和括号？：

```
$(document).ready(function(){

      $("#navigation").show();      //onload

 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T22:01:53.247

您可以尝试使用 console.log 进行调试。我会尝试的第一件事是`console.log($('#navigation'));`检查您的浏览器控制台以查看它是否返回正确的对象，而不是“未定义”。

如果可行，下一步将是检查`#navigation`块的代码，并查看代码运行后应用了哪些样式。也许你`display: none !important;`的样式表中有类似的东西，它不会被内联样式 jQuery 覆盖以显示内容。或者该块可能位于屏幕外的某个位置。

您的代码中的其他地方肯定会出现问题，因为 jQuery 中的 .show() 函数相当基本，从未给我带来任何问题。

如果您找不到问题，请随时发布指向实时页面的链接，以便我们查看并尝试提供帮助。

# binding - 绑定和pmap交互变化？

> ID：12116878
> 
> 赞同：5
> 
> 时间：2012-08-24T21:27:17.007
> 
> 标签：binding, clojure, thread-local, dynamic-variables, pmap

有几篇有些旧的博客文章建议在混合动态变量时要小心`binding`， 和`pmap`，例如[在这里](http://cemerick.com/2009/11/03/be-mindful-of-clojures-binding/)，我们得到以下代码片段：

```
user=> (def *foo* 5)
#'user/*foo*
user=> (defn adder
             [param]
             (+ *foo* param))
#'user/adder
user=> (binding [*foo* 10]
         (doseq [v (pmap adder (repeat 3 5))]
           (println v)))
10
10
10
nil 
```

但这不是我运行该代码时发生的情况（将第一行更改为`(def ^:dynamic *foo* 5)`）。我得到了三个`15`s 作为输出（使用 Clojure 1.4），正如您天真地期望的那样——也就是说，传递给 pmap 的函数看到的绑定形式的变化。线程本地绑定和 pmap 交互的方式是否发生了变化？我在任何地方都找不到这个记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T21:36:59.080

从 1.3 开始，本地绑定集与函数一起发送到 pmap。因此，只要您标记 var ^:dynamic 这不再是问题。此功能称为**Binding Conveyance**，包含在 1.3 变更日志中：

来自：[https ://github.com/clojure/clojure/blob/1.3.x/changes.txt](https://github.com/clojure/clojure/blob/1.3.x/changes.txt)

```
将工作传递给其他线程（例如 send、send-off、pmap、future）的 Clojure API 现在传达调用线程的动态绑定：

  (def ^:dynamic *num* 1)
  (绑定 [*num* 2] (future (println *num*)))
  ;; 打印“2”，而不是“1”

```

# java - 从 jar 文件中的文件夹加载所有文件

> ID：12116881
> 
> 赞同：0
> 
> 时间：2012-08-24T21:27:27.537
> 
> 标签：java, jar

**如何从 jar 文件中的文件夹中加载所有文件？**

直到现在我从这样的文件夹中加载文件，`File[] files = new File("res/Models/" + dir).listFiles();`但它不在一个胖 jar 文件中（我得到一个`NullPointerException`）。

*注意：应该加载文件的类和我要加载的文件在同一个jar文件中。当我在 Eclipse 中运行我的程序时，我在那里写的那行有效，但是当我导出一个 jar 文件时，我得到该行的 NullPointerException*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:33:14.913

jar 文件是一个 zip 文件，因此您可以使用 ZipInputStream 读取其内容，如下所示：

```
 ZipFile zipFile = new ZipFile(file);
  ZipInputStream stream = new ZipInputStream(new BufferedInputStream(new FileInputStream(file)));
  ZipEntry entry = null;
  List<String> filePaths = new ArrayList<String>();
  while ((entry = stream.getNextEntry()) != null) {
    // this will get you the contents of the file
    InputStream inputStream = zipFile.getInputStream(entry);
    // this add the file path to the list
    filePaths.add(entry.getName());
  } 
```

你也可以这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T23:02:55.480

让我们看看`File`对象是如何工作的。

首先，假设我们在名为 FileTest.java 的文件中有以下代码：

```
public class FileTest {
    public static void main() {
        File[] files = new File("temp").listFiles();

        for (File f : files) System.out.println(f.getName());
    }
} 
```

当我们编译它时，javac 会创建一个名为 FileTest.class 的文件。（即使 Eclipse 也会这样做；它只是将 .class 文件与 .java 文件放在一个单独的文件夹中。）现在，当我们运行这个程序时，它会查找与 FileTest 位于同一文件夹中的名为“temp”的文件夹.class 文件。

现在假设我们创建了一个名为 filetest.jar 的 JAR 文件并将 FileTest.class 添加到其中。现在，如果我们从 JAR 文件中运行程序，它将查找与**filetest.jar**文件位于同一文件夹中的名为“temp”的文件夹。换句话说，`File` **仅**在硬盘驱动器上的文件系统中查找文件和文件夹。它对任何文件的内容**一无所知，****包括 filetest.jar**。

为了读取 JAR 文件的内容，您**必须**找到不同的解决方案。首先，您需要了解在 JAR 文件中没有“文件”和“文件夹”之类的东西。JAR 文件只是一个带有一些额外功能的 ZIP 文件。到目前为止，根据您在此处提供的信息，我相信要解决您的问题，您将需要使用[java.util.zip.ZipFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipFile.html)。我建议您首先在谷歌上搜索教程或浏览我在此处链接的 API 文档。

# jquery - ajax 调用后视图中未评估 Sinatra 实例变量

> ID：12116891
> 
> 赞同：0
> 
> 时间：2012-08-24T21:28:23.293
> 
> 标签：jquery, ajax, sinatra

我的想法已经用完了，并且在没有任何解决方案的情况下浏览了网络，所以我希望有人能让我摆脱这个烂摊子，因为我真的，真的被卡住了。

我的一条路线通过一组实例变量（@campagnes 和@missions）查询数据库并通过 erb 呈现数据。不用担心，一切正常。

我设置了一个 jQuery 函数，它可以帮助我根据下拉选择器过滤表中的数据。因此，如果用户更改下拉列表中的选定值，jQuery $.ajax 方法会重新加载页面，将选定值传递给“get”路由。

这是我不明白的。调用有效，成功，参数被传递给路由，它们用于从数据库中读取，但所有具有新数据集的实例变量都拒绝在视图中进行评估。相反，仍然使用旧的（在 Ajax 调用之前使用初始 GET 评估的那些），因此该表仍然是旧表。

我需要在我的 Ajax 调用中传递什么才能在视图中再次评估实例变量？

这是我的路线：

```
get '/admin/mission' do
# load the appropriate js file in template
@js = "mission.js"

# retrieve list of all campagnes, latest on top
@campagnes = Campagne.all :order=>:id.desc

if !params[:campagne]
#puts "camp id retrieved from normal GET"
camp_id = @campagnes[0].id # first campagne in collection is latest
else
#puts "camp id retrieved from ajax call"
camp_id = params[:campagne] # if submitted via Ajax
end

# retrieve list of missions for selected campaign
@missions = Mission.all :campagne_id => camp_id, :order=> :numero.asc

erb :admin_mission , :layout => !request.xhr?

end 
```

我的观点（编辑到重要的东西）

```
<div id="mission_form">
<form class="cmxform" name="mission" action="/admin/mission" method="post">
<ol>
<li>
  <label for="campagne" id="campagne_label" >Choisir une Campagne</label>
  <select id="campagne" name="campagne">
    <% @campagnes.each do |c| %>
      <option value="<%= c.id %>"> <%=h c.nom %> </option>
    <% end %>
  </select>
</li>
<li>
  <label for="numero" id="numero_label" >Num&eacute;ro</label>
  <input type="text" name="numero" id="numero" placeholder="" size="5"/>
  <label class="error" for="numero" id="numero_error">Champ obligatoire.</label>
</li>
<li>
  <label for="nom" id="nom_label" >Nom de la mission</label>
  <input type="text" name="nom" id="nom" placeholder="" size="50"/>
  <label class="error" for="nom" id="nom_error">Champ obligatoire.</label>      
</li>
<li>
  <input type="submit" name="submit" id="submit_btn" class="button" value="Ajouter" />
</li>
</ol>  
</fieldset>
</form>
</div>

<table div="table_mission" id="hor-minimalist-a" summary="Main Table">
  <!-- Table header -->
  <thead>
  <tr>
  <th scope-"col">Campagne</th>
  <th scope="col">Mission</th>
  <th scope="col">Briefing</th>
  <th scope="col">De-Briefing</th>

 </tr>
</thead>

<!-- Table body -->
<tbody>
<% @missions.each do |m| %>
<tr>
  <td>
    <%=h m.campagne.nom %>
  </td>
  <td>
    #<%=h m.numero %>: <%=h m.nom %>
  </td>
  <td>
    <%=h m.briefing %>
  </td>
  <td>
    <%=h m.debriefing %>
  </td>
  <td>
    <span><a href="/<%= m.id %>">[edit]</a></span>  
  </td>
  <td>
    <class="meta"><%= m.created_at.strftime("Created: %m/%d/%Y") %>
  </td>  
</tr>
<% end %>
</tbody>  
</table> 
```

还有我的脚本文件（也进行了编辑以保留重要部分）：

```
$(document).ready (function() {
// hide all error and confirm labels
// refresh  mission table if change campagne dropdown
$('#campagne').change(function() {
  var inputs = [];
  $(':input').each(function () {
        inputs.push(this.name + '=' + escape(this.value));
      });

  $.ajax({
    data: inputs.join('&'),
    url: '/admin/mission', // couldhave used: this.action if it was a submit...
    timeout: 2000,
    error: function() {
      console.log("Failed to submit"); // remove when going live
    },
    success: function() { // 

      $('label#campagne_confirm').show(function() {
            console.log("Sucess!");

          });
       }
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:22:34.067

实例变量仅用于从您的 ERB 模板创建 HTML / JavaScript 视图，因此，在不重新加载页面的情况下，更改这些变量的值不会影响已经呈现为视图的内容。

您的 Ajax 调用应该以 JavaScript 可以用来操作页面 DOM 的形式返回页面所需的任何新数据。例如，返回一个漂亮的 json 构建的服务器端块。

此外，您可能还想查看[DataTables](http://datatables.net/)，这是一个很好的 jQuery 插件，可以帮助操作表数据。它有一些不错的 Ajax 处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T20:35:14.493

好吧，在拉了很多头发之后，我找到了一种解决方案（我不太喜欢）和对这种行为的解释（尽管我不是 100% 确定）。

关于行为，我的 Ajax 调用不会刷新页面（这毕竟是 Ajax 的预期行为），这解释了为什么我看不到新值。

我试图通过从我的帖子路由重定向的 Ajax 帖子找到解决方案，但显然 ajax 帖子取消了帖子路由中的重定向（我不知道为什么）。

所以最后我只是采用了一种（丑陋的）仅 ajax 方法，如下所示：

```
// refresh  mission table if change campagne dropdown
$('select#campagne').change(function() { 
//retrieve value from select tag
var camp_id = $('select#campagne').val();
// pass the parameter in the resource
var uri = "/admin/mission?campagne=" + camp_id;
// GET resource with parameter
// and pass the data returned (the page itself) inside an element
// with some filtering to only get the table from the page
$.get(uri, function(data) {
    console.log("get succesful");
    var $table = $(data).find('tbody');
    console.log($table);
    $('tbody').replaceWith($table);
    });

}); 
```

我确信有更好的方法可以做到这一点，我只是不知道它是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:49:05.770

我的建议是为campagne（campaign？）列表设置一条完全独立的路线，例如

```
def get_campagne_id
  @campagnes = Campagne.all :order=>:id.desc # you might want to cache this
  camp_id = if !params[:campagne] # personally I'd pass the params as arguments, but this will do...
    #puts "camp id retrieved from normal GET"
    @campagnes[0].id # first campagne in collection is latest
  else
    #puts "camp id retrieved from ajax call"
    params[:campagne] # if submitted via Ajax
  end 
end

def mission_by_campaign( camp_id )
  # retrieve list of missions for selected campaign
  Mission.all :campagne_id => camp_id, :order=> :numero.asc
end 
```

现在变成：

```
get "/missions_by_campaign", :provides => :json do
  content_type :json
  missions = mission_by_campaign( params["camp_id"] )
  missions.to_json
end

get '/admin/mission' do
  # load the appropriate js file in template
  @js = "mission.js"

  camp_id = get_campagne_id

  # retrieve list of missions for selected campaign
  @missions = mission_by_campaign( camp_id )

  erb :admin_mission
end 
```

然后，您将 ajax 调用发送到 /missions_by_campaign 并使用它来更新页面。您需要编写更多代码，但它可以让您了解我在说什么。

# c++ - c++ 在 Windows 上设置监视器超时

> ID：12116893
> 
> 赞同：1
> 
> 时间：2012-08-24T21:28:34.453
> 
> 标签：c++, winapi, screen, power-management

我想知道是否有办法在全球范围内从 C++ 程序启用或禁用监视器/屏幕超时？（不过我有一个问题，它必须向后兼容 Windows XP SP3。）

我说的是这个全局设置：

![Windows 8 屏幕截图](../Images/a55db1d7eec984458b391894b6cad089.png)

XP的这个：

![XP截图](../Images/e3e7c7f6ade633b460f9d8376dfb6d2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:06:28.577

对于那些感兴趣的人，这是解决此问题的方法：

调用 CallNtPowerInformation(SystemPowerPolicyAc) API 获取或设置显示超时值，并使用 SYSTEM_POWER_POLICY::VideoTimeout 成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T14:47:51.010

一个完整的样本：

```
bool applyVideoTimeout(DWORD newtimeOut)
{
    SYSTEM_POWER_POLICY powerPolicy;
    DWORD ret;
    DWORD size = sizeof(SYSTEM_POWER_POLICY);

    ret = CallNtPowerInformation(SystemPowerPolicyAc, nullptr, 0, &powerPolicy, size);

    if ((ret != ERROR_SUCCESS) || (size != sizeof(SYSTEM_POWER_POLICY)))
    {
        return false;
    }

    powerPolicy.VideoTimeout = newtimeOut
    ret = CallNtPowerInformation(SystemPowerPolicyAc, &powerPolicy, size, nullptr, 0);

    if ((ret != ERROR_SUCCESS))
    {
        return false;
    }

    return true;
} 
```

# html - 有没有办法在不调整浏览器窗口大小的情况下触发 CSS max-width @media 查询？

> ID：12116894
> 
> 赞同：2
> 
> 时间：2012-08-24T21:28:40.553
> 
> 标签：html, css, mobile, viewport

我的网站将`<body>`容器`max-width`设置为 1000 像素和`width`100%，这使得它在从 100 像素到 4000 像素（以及更多）的所有分辨率下都能正常显示 - 它具有响应性。

我使用`@media`查询来告诉该网站上的元素（例如列）在下方变为 100% 宽`max-width: 800px`（对于手机也是如此）。例子：

```
.column { width: 50%; float: left; }
@media (max-width: 800px){
.column { width: 100%; }
} 
```

**我想要的是在 1920px 显示器上看到手机版网站。有没有办法在不将浏览器窗口大小调整为 <800px 的情况下实现这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:37:01.773

试试这个方便的工具。它允许您以几种不同的宽度查看网站。[http://responsive.victorcoulon.fr/](http://responsive.victorcoulon.fr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:30:24.477

不，没有。您需要将浏览器窗口的大小调整为您想要的大小以模拟较小的屏幕。

# jquery - 如何获取锚标记的查询字符串

> ID：12116901
> 
> 赞同：3
> 
> 时间：2012-08-24T21:29:11.247
> 
> 标签：jquery

我执行以下操作来获取锚标记的参数，但可能有更好的方法来做到这一点：

```
$('a').has('.icon-thumbs-up').click(function(e) {
    var local = {};
    e.preventDefault();
    local.href = $(this).attr('href');
    local.X = local.href.indexOf('GuessID=',0) + 8;
    local.Y = local.href.indexOf('&',local.X);
    local.GuessID = local.href.substr(local.X,local.Y-local.X); 
```

问：有没有一些性感的 jQuery 方法可以从 href="page.htm?GuessID=123" 获取 123？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:48:59.747

当使用 javascript 很容易自然地做到这一点时，为什么还要使用 jquery 的开销？当然这会起作用，并且它假设`<a>`有一个查询字符串。

```
$('a').has('.icon-thumbs-up').click(function(e) {

     var querystring = $(this).prop('href').split("?")[1]; //GuessID=123&someother=123
     var values = querystring.split("&"); 
     var first =  values[0];  // GuessID=123
     var second = values[1];  // someother=123
}); 
```

# mysql - 从行中获取最高值 - MySQL

> ID：12116903
> 
> 赞同：0
> 
> 时间：2012-08-24T21:29:25.053
> 
> 标签：mysql, sql, count, max

我有这个查询：

```
SELECT tag, filename, timecode, COUNT(tag) AS total 
FROM dados 
WHERE dados.tag = 'movie' 
AND dados.filename = 'movie2.mp4' 
GROUP BY timecode 
```

这是结果：

![](../Images/756d07e512d5c724d35468dcc86fa9df.png)

但我只想要第 3 行，更准确地说是 timecode=2，因为它是具有较高值的​​最组成的标签。我怎样才能从这些行中获取时间码的最高值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:30:48.730

[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)与_[`LIMIT`](http://www.mysqlperformanceblog.com/2006/09/01/order-by-limit-performance-optimization/)

```
SELECT tag, filename, timecode, COUNT(tag) AS total 
FROM dados 
WHERE dados.tag = 'movie' 
AND dados.filename = 'movie2.mp4' 
GROUP BY timecode
ORDER BY COUNT(tag) DESC
LIMIT 1 
```

# video - 如何将视频作为同一位置流式传输给所有观众？

> ID：12116908
> 
> 赞同：0
> 
> 时间：2012-08-24T21:29:44.273
> 
> 标签：video, stream, live-streaming

我想在我的网站上流式传输视频，这样所有访问他网站的人都将开始在视频中的同一位置观看（就好像它是一个实时提要，尽管它只是一个静态 avi）。是否有可能做到这一点？我找到了可以正常流式传输视频的东西，但不确定如何确保每个人都会同时观看视频中的相同位置。

一些额外的细节：我想要这样做的理由是通过将单个视频流式传输给任何观看的人来节省带宽，而不是每个观众从一开始就开始一个单独的流。这有意义还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:43:16.000

您想要[IP 多播](https://en.wikipedia.org/wiki/IP_multicast)，但它的部署存在问题，并且您的用户的 ISP 必须支持它。

实际上，您应该使用[CDN](https://en.wikipedia.org/wiki/Content_delivery_network)。

# java - SWT 表格和表格查看器

> ID：12116914
> 
> 赞同：0
> 
> 时间：2012-08-24T21:30:13.480
> 
> 标签：java, swt, jface

首先让我说，我非常感谢大家的建议和意见。这是我必须学习这些新东西的唯一来源。

我最近才学习java和swing。我当前的项目在 Eclipse 中，我必须在 SWT 中完成。正如你们中的一些人可能已经从我的许多其他帖子中注意到的那样，我是一个非常新的 SWT，本周才开始使用它。我在理解新布局时遇到问题。您是否在对话框类中扩展了对话框类型（TitleAreaDialog、TrayDialog）？复合材料，当您创建父复合材料时，如何将子复合材料添加到父复合材料。将它们添加到父级后，您如何设置它们的位置，而不是一个在另一个之上。

但根据我目前对该项目的日程安排，现在最重要的是获取用户数据并填充表格，然后在单独的对话框类中显示表格。
稍后我可以弄清楚如何添加自定义按钮，例如“删除行”、“删除所有行”。

创建表：

我有一个单例类，它收集用户数据并将其放在 ArrayList 中。我需要能够从数组列表中的数据创建一个表。如果您可以为我指出一些有关如何从数组列表创建表或伪代码的示例代码，那就太好了！

创建一个表查看器：

我必须能够在单独的对话框类中显示/编辑表格。
我想我必须使用 tableviewer 来实现这一点。有人请给我编写一个简单的对话框类并告诉我如何设置表格查看器。只是一个显示表格的对话框

感谢你给与我的帮助

好的 - 我已经阅读了[http://www.vogella.com/articles/EclipseJFaceTable/article.html](http://www.vogella.com/articles/EclipseJFaceTable/article.html)。我创建了代码以完全匹配他的示例，但符合我的规范。

如果 TableViewer 类 (View.java) 扩展 ViewPart，您是否将视图类添加到对话框类？还是 View.java 成为对话框类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:36:46.727

你的问题确实在改进，但在你提出新问题之前，你应该多搜索一下。我已经在你的另一个问题中链接了许多 SWT 资源，你真的应该阅读它们:)

这是[Vogella](http://www.vogella.com/articles/EclipseJFaceTable/article.html)的一个非常好的教程，解释了如何`Table`结合使用`TableViewer`.

基本上，TableViewer 负责通过`ContentProvider`s 显示您的数据。由于您有一个 ArrayList，您可能想尝试[`ArrayContentProvider`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FArrayContentProvider.html).

# matlab - 将 FORTRAN 代码转换为 MATLAB - 参考资料

> ID：12116916
> 
> 赞同：1
> 
> 时间：2012-08-24T21:30:28.113
> 
> 标签：matlab, fortran

我目前正在为我的金融学教授做一个研究项目，我应该通过在 MATLAB 中编写代码来复制以前论文的结果。然而，我遇到了问题，我要求上一篇论文的作者将源代码发给我。然而，他们使用的代码是 Fortran，我想知道是否可以将代码从 Fortran 转换为 MATLAB，以及我应该使用哪些参考。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:59:13.887

[从这里](http://engineering.dartmouth.edu/~d30574x/consulting/consultingIndex.html)开始的一个地方是 f2matlab 。按照 README 文件开始。f2matlab 通常会为您提供 95% 的工作 m 文件，因此您必须在转换后调试 m 文件。

您的代码首先需要采用 fortran90 格式，您可以使用 Alan Miller 或 Metcalf 的转换器来帮助解决这个问题。

最后，最困难的事情之一是在尝试 f2matlab 之前从 fortran 代码中删除 goto。您可以在[此处](http://engineering.dartmouth.edu/~d30574x/consulting/consulting_gotorefactor.html)查看我的页面，讨论使用 remgoto 进行 goto 删除/重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:37:12.837

最好的参考资料可能是关于 Fortran 和 MATLAB 的书籍（比如说，对于从两者开始的人来说，Chapman 的书籍 - 他写了一本关于 Fortran 和 MATLAB 的介绍性书籍）。我不熟悉任何专门处理从一个重写到另一个的问题的作品，尽管从 Fortran 重写到 MATLAB 肯定比反过来更容易。

它也随着原始代码中使用的 Fortran 版本的变化而显着变化 - 使用 Fortran90 和更新的版本，就简短性和表现力而言，代码几乎可以像 MATLAB 一样。如果您对此处[的语法有疑问，请参阅](http://www.clear.rice.edu/mech517/F90_docs/tables.pdf)一份对其进行比较的文档，因此将其作为参考也不错。

但是为什么不尝试将原始代码编译（或稍作改动，然后编译）为 .dll 并尝试将其与 MATLAB 连接。这样，您肯定会在速度方面损失更少，并且可能会避免一整章的数值不稳定和测试问题。

# sql-server-ce - SQL Server CE GROUP BY 异常

> ID：12116918
> 
> 赞同：1
> 
> 时间：2012-08-24T21:30:31.950
> 
> 标签：sql-server-ce

我有以下代码来查询我的数据库

```
SELECT U.Name, U.Date, Max(I.Amount) 
  FROM Users AS U,Installments AS I 
  GROUP BY I.ID 
  HAVING (Max(I.Sr) = 40 AND U.ID = I.ID) 
```

它产生异常说

> *在聚合和分组表达式中，SELECT 子句只能包含聚合和分组表达式 [SELECT 子句 =U.Name]*

我也试过`GROUP BY U.ID, I.ID`但同样的问题存在

请告诉我我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T06:57:18.293

试试这个查询：

```
 SELECT 
      U.Name, U.Date, Max(I.Amount) 
  FROM 
      Users AS U
  INNER JOIN 
      Installments AS I ON U.ID = I.ID
  GROUP BY 
      U.Name, U.Date
  HAVING 
      MAX(I.Sr) = 40 
```

我做了什么？

*   使用正确的 ANSI`INNER JOIN`语法并在那里指定它所属的 JOIN 条件
*   `GROUP BY`必须应用于`SELECT`未聚合的列列表中的所有列
*   `HAVING`应该只有一个简单的条件——不要在这里定义`JOIN`条件或任何东西！

根据[GROUP BY for SQL Server CE 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms173245%28v=sql.100%29)，只有类型的列`ntext`并且在表达式`image`中不受支持-应该不是问题`GROUP BY``nchar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:34:39.823

我相信您需要按 U.Name 和 U.Date 进行分组才能使聚合正常工作。

# cocos2d-iphone - 如何破坏焊接接头

> ID：12116926
> 
> 赞同：2
> 
> 时间：2012-08-24T21:31:06.333
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我进行了广泛的搜索，但找不到任何关于破坏焊接接头的指南或帖子。如何破坏 bodyA 和 bodyB 之间的焊缝？我通过以下方式创建了我的weldJoint。

```
 weldJointDef.Initialize(bodyA, bodyB, bodyA->GetWorldCenter());
    weldJointDef.collideConnected = false;
    weldJoint = (b2WeldJoint*) world->CreateJoint(&weldJointDef); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T07:23:56.543

```
world->DestroyJoint( weldJoint ); 
```

# android - ActionBarSherlock API？

> ID：12116929
> 
> 赞同：0
> 
> 时间：2012-08-24T21:31:22.393
> 
> 标签：android, actionbarsherlock

嗨，我想弄清楚如何将我的 UI 转换为 ActionBarSherlock，但我找不到任何类型的公共 API ......有吗？

我对提供对片段和操作栏的访问以与旧版本 Android（3.0 之前）兼容的方法特别感兴趣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:35:03.617

ActionBarSherlock的[使用文档](http://actionbarsherlock.com/usage.html)可在线获取。它有一个“Action Bar API”部分，其中包含如下语句：

> ActionBar 实例公开的 API 与本机方法公开的 API 完全相同。请参阅其文档以及“相关链接”部分中有关如何利用其功能的文章。

> 我对提供对片段的访问的方法特别感兴趣

ActionBarSherlock 不“提供对片段的访问”。它使用 Android Support 包作为 Fragment 的 backport。

# fiddler - 撕下后如何将提琴手作曲家窗口放回去？

> ID：12116933
> 
> 赞同：20
> 
> 时间：2012-08-24T21:31:47.813
> 
> 标签：fiddler

fiddler“Composer”选项卡的“options”子选项卡让您可以将 Composer 撕成一个浮动窗口。问题是怎么放回去？我失去了浮动窗口，现在提琴手的作曲家不见了。我没有在菜单中找到任何可以将提琴手或其 GUI 恢复为出厂默认设置的内容。我尝试卸载并重新安装提琴手，不行；然后卸载，grepping注册表并吹走与提琴手有关的所有密钥并重新安装 - 不行。唯一有效的是铺机器——（无论如何我都必须这样做——我这样做并不是为了解决这个提琴手问题！）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-31T22:55:33.477

浮动的详细信息视图可以通过关闭它返回到停靠状态。

在你的情况下，听起来视图可能已经离开屏幕了。在带有 Fiddler 2.4.1.1 的 Windows 7 上，浮动的详细信息视图在任务栏中显示为不同的 Fiddler 窗口。将鼠标悬停在任务栏上的 Fiddler 图标上，将光标移动到详细信息视图预览上，右键单击详细信息视图预览，选择最大化，然后按 Alt-F4 将视图返回到其停靠状态。

显然，将你的盒子展平并重新安装 Fiddler 也是一种解决方案。;)

# extjs - 您可以在 extJs 模型中定义与 HashMap 的 hasMany 关系吗？

> ID：12116934
> 
> 赞同：1
> 
> 时间：2012-08-24T21:31:49.417
> 
> 标签：extjs, model, hashmap

我有一些格式如下的 json 数据：

```
{
    "id":1,
    "personMap":{
        "president":{"firstname":"Sookie","lastname":"Stackhouse"},
        "vicepresident":{"firstname":"Eric","lastname":"Northman"},
        "treasurer":{"firstname":"Alcide","lastname":"Herveaux"}
    }
} 
```

如何定义我的模型，以便地图中的值加载正确的对象类型？那可能吗？

以下将加载数据，但值未键入为“Person”对象：

```
Ext.define('Committee', {
    extend: 'Ext.data.Model',
    fields: [ 'id', 'personMap' ]
}); 
```

下面将期望 personMap 是一个数组而不是一个地图：

```
Ext.define('Committee', {
    extend: 'Ext.data.Model',
    fields: [ 'id' ],
    hasMany: [{
        model: 'Person',
        name: 'personMap'
    }]
});

Ext.define('Person', {
    extend: 'Ext.data.Model',
    fields: [ 'firstname', 'lastname' ]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T00:02:16.533

hasMany 配置仅适用于数组。将数据结构更改为，

```
{
  "id": 1,
  "personMap": [
    {
      "firstname": "Sookie",
      "lastname": "Stackhouse",
      "title": "president"
    },
    {
      "firstname": "Eric",
      "lastname": "Northman",
      "title": "vicepresident"
    },
    {
      "firstname": "Alcide",
      "lastname": "Herveaux",
      "title": "treasurer"
    }
  ]
} 
```

可以解决问题，但如果这不是一个选项，则不能使用 hasMany 配置。

# mysql - MySQL 查询 - 这有什么问题吗？

> ID：12116942
> 
> 赞同：1
> 
> 时间：2012-08-24T21:32:31.010
> 
> 标签：mysql, sql, pdo, exists

你看到这个 MySQL 查询有什么问题吗？它不执行。还有其他更好的想法吗？

```
INSERT INTO registration 
   ( m_ID,  e_ID,   STATUS) 
SELECT 
   :m_ID, :e_ID, 1
WHERE 
    EXISTS ( SELECT 1 FROM tableb WHERE ID = :e_ID)
AND EXISTS ( SELECT 1 FROM tablec WHERE m_ID = :m_ID) 
```

`e_id`传递带有和`m_ID`（PDO）值的数组

基本上，目标是在插入另一个表之前检查两个 ID 是否存在于不同的表中。

**错误：**

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL    
syntax; check the manual that corresponds to your MySQL server version for the right  
syntax to use near 'WHERE EXISTS ( SELECT 1 FROM tableb WHERE ID = '276') AND EX' at 
line 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:41:01.447

> 如果两个 ID 都存在于不同的表中

然而，您的查询搜索`tableb`了两次。除非你真的是指“在一个不同的表中”（我不这么认为，你会使用一个 single `EXISTS`），那么这可能是你想要的错误。

此外，PDO 应该有某种错误日志记录。查询可能不会执行，但原因应该出现 - 或者应该可以让它出现 -*某处*。

**更新**

恐怕我错了，语法*不*正确。`SELECT ... WHERE`除非指定表，否则MySQL 不允许。

尝试改变

```
SELECT 
   :m_ID, :e_ID, 1
WHERE EXISTS 
```

在

```
SELECT * FROM
   ( SELECT :m_ID, :e_ID, 1 ) AS dummy
WHERE EXISTS 
```

*测试*：

```
mysql> SELECT 42;
+----+
| 42 |
+----+
| 42 |
+----+
1 row in set (0.00 sec)

mysql> SELECT 42 WHERE true;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE true' at line 1

mysql> SELECT * FROM ( SELECT 42 ) AS answer WHERE true;
+----+
| 42 |
+----+
| 42 |
+----+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:39:20.643

您说您“正在查看来自不同表的 ID”，

目前您正在检查相同的表格两次：

```
EXISTS ( SELECT 1 FROM tableb WHERE ID = :e_ID)
AND EXISTS ( SELECT 1 FROM tableb WHERE m_ID = :m_ID) 
```

也许您应该将对 tableb 的第二个引用更改为 tablec，如下所示：

```
EXISTS ( SELECT 1 FROM tableb WHERE ID = :e_ID)
AND EXISTS ( SELECT 1 FROM tablec WHERE m_ID = :m_ID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:50:21.910

也许您将列名与数组名混淆了？可以将其更改为此代码吗？

（注意 m_ID 现在只是 ID）

```
EXISTS ( SELECT 1 FROM tableb WHERE ID = :e_ID)
AND EXISTS ( SELECT 1 FROM tablec WHERE ID = :m_ID) 
```

**根据您的新错误编辑，这可能更有可能** 或（ID 现在是 e_ID）

```
EXISTS ( SELECT 1 FROM tableb WHERE e_ID = :e_ID)
AND EXISTS ( SELECT 1 FROM tablec WHERE m_ID = :m_ID) 
```

# javascript - Javascript将变量添加到代码中

> ID：12116946
> 
> 赞同：1
> 
> 时间：2012-08-24T21:33:06.067
> 
> 标签：javascript

这可能是一个非常简单的问题，但我无法发现问题。

我有这个代码：

```
output += '<li><a href="#"><img src="'+value.thumbnail_url+'" /><h3>'+value.title+'</h3>'+value.body+'</a></li>'; 
```

我需要在 href="#" 之后添加此代码

并将 url 字符串替换为： value.media_url

我想出了：

```
output += '<li><a href="#" onclick="window.plugins.childBrowser.showWebPage('+value.media_url+');"><img src="'+value.thumbnail_url+'" /><h3>'+value.title+'</h3>'+value.body+'</a></li>'; 
```

但由于链接不起作用，上述内容似乎存在语法问题。

损坏的代码在这里的某个地方：`onclick="window.plugins.childBrowser.showWebPage('+value.media_url+');"`因为其余的工作正常。

我可以走得更远......在这里：

```
('+value.media_url+') 
```

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T21:36:05.550

结果字符串是：

```
window.plugins.childBrowser.showWebPage(my/url/to/file.png) 
```

如您所见，字符串周围缺少引号。由于它在一个属性中，你需要这个：

```
... onclick="window.plu.....WebPage(&quot;'+value.media_url+'&quot;)" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:43:45.350

替换`onclick="window.plugins.childBrowser.showWebPage('+value.media_url+');"` 为`onclick="window.plugins.childBrowser.showWebPage('"+value.media_url+"');"`将修复它

# c# - 在 XNA 4 中创建新的游戏对象（创建新实例）

> ID：12116951
> 
> 赞同：0
> 
> 时间：2012-08-24T21:33:43.340
> 
> 标签：c#, xna, xna-4.0

我有一个用于创建 GameObjects 的类，它得到了精灵和....来制作游戏对象。我画我的纹理是这样的：

```
spriteBatch.Begin();
    foreach (GameObject gameObject in Game.gameObjects)
    {
        if (gameObject.visible)
        {
            spriteBatch.Draw(gameObject.sprite.texture, gameObject.rect, gameObject.sprite.sourceRect, gameObject.color, MathHelper.ToRadians(gameObject.rotation), gameObject.sprite.origin, gameObject.spriteEffect, gameObject.layer);
        }
    }
    foreach (Text text in Game.texts)
    {
        spriteBatch.DrawString(text.font, text.text, text.position, text.color, MathHelper.ToRadians(text.rotation), text.origin, text.scale, text.spriteEffects, text.layer);
    }
    spriteBatch.End(); 
```

我尝试了一些方法来做到这一点，并在游戏之间创建新的对象。例如，当我按下空格时，我想创建新的子弹。但我不能在游戏之间制作新的游戏对象；请帮我。

## 谢谢。

更新：我试图在游戏运行时添加另一个游戏对象；Game.gameObjects 是 Game1 中的静态列表（我将 Game1 名称更改为 Game），它位于 GameObject 类中：

```
public GameObject(Sprite sprite)
        {
            this.sprite = sprite;
            rectWidth = (int)sprite.texture.Width;
            rectHeight = (int)sprite.texture.Height;
            rect = new Rectangle((int)position.X, (int)position.Y, rectWidth, rectHeight);
            Game.gameObjects.Add(this);
        } 
```

所以我可以让我的游戏对象在游戏中渲染或管理它们；然后我有 gameObjects 是一个列表，它在游戏中有 All gameObjects

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:14:39.697

您试图在游戏运行时添加另一个游戏对象？抱歉，您的问题不清楚。

我不知道您的 Game.gameObjects 是数组还是列表（您可以发布课程，以及在哪里初始化它吗？）

`Game.gameObjects.Add(new GameObject(Sprite, position, whatever));`

那可能吗？

# perl - 如何将 __LINE__ 中的行号插入 Perl 中的测试名称？

> ID：12116954
> 
> 赞同：2
> 
> 时间：2012-08-24T21:34:06.617
> 
> 标签：perl, testing, interpolation, literals

当我尝试这个测试用例时：

```
$sel->is_text_present_ok("foo", ("$testname: line ", __LINE__)); 
```

我想在日志中得到这个：

```
ok 1 - is_text_present, "foo", Testcase-881: line 54 
```

但我在命令行上受到指责：

> 您将测试命名为“54”。你不应该使用数字作为你的测试名称。很混乱。

我想我应该以某种方式将该文字插入到字符串中，但我无法深入了解它。我用逗号和引号尝试了各种配置。

有什么办法可以得到我想要的结果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T21:40:56.897

只需使用连接[运算符](http://perldoc.perl.org/perlop.html#Additive-Operators) `.`：

`$sel->is_text_present_ok("foo", "$testname: line " . __LINE__);`

仅供参考，您可以像这样插入它：`"$testname: line ${\(__LINE__)}"`

# c# - “属性‘connectionStringName’缺失或为空。” 在 Web.config 中

> ID：12116955
> 
> 赞同：1
> 
> 时间：2012-08-24T21:34:11.857
> 
> 标签：c#, asp.net, asp.net-membership, parse-error

我的`Web.config`文件突然出现以下错误，我不明白这意味着什么：

> 解析器错误消息：属性“connectionStringName”缺失或为空。

```
Line 24:       <providers>
Line 25:         <clear />
Line 26:        <add name="SMDPortalMembershipProvider" type="SMDPortalMembershipProvider" />
Line 27:       </providers>
Line 28:     </membership> 
```

> 源文件：c:\inetpub\wwwroot\web.config 行：26
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

**这是我的配置文件：**

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <connectionStrings>
    <add name="ApplicationServices"
      connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
      providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="UODOTNET, Version=2.2.5.7444,
          Culture=neutral, PublicKeyToken=335F3FBD4BE82339"/>
        <add assembly="System.Core, Version=4.0.0.0,
          Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="Default.aspx" timeout="2880" />
    </authentication>
    <authorization>
      <deny users="?" />
    </authorization>
    <membership defaultProvider="SMDPortalMembershipProvider">
      <providers>
        <clear />
        <add name="SMDPortalMembershipProvider" type="SMDPortalMembershipProvider" />
      </providers>
    </membership>
    <customErrors mode="Off"/>
    <sessionState cookieName="smd_portal_session" timeout="100"/>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

加载 Default.aspx 页面时没有错误，但只要我的代码调用`Membership`该类，我就会收到错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:38:41.267

您的会员提供者的配置部分需要一个`connectionStringName`属性。没有它`connectionStringName`，它不知道在哪个数据库中查找会员信息。

您需要将该部分中的一个连接字符串的名称添加到`connectionStrings`第 26 行的`add`标记中。

为了使您的 Web.Config 有效，该`connectionStringName`属性是**必需的。**没有它你就不能使用这个`Membership`类。

# jquery - jQuery 计算订单小计。我的结果为我的所有行提供了相同的小计

> ID：12116964
> 
> 赞同：0
> 
> 时间：2012-08-24T21:34:53.227
> 
> 标签：jquery, html

我在使用 jquery 函数时遇到了一点问题。我正在尝试计算给定价格的小计，同时输入数量。

这是我的html片段：

```
<!-- Price -->
<td width="10%"><div class="price" value="0"></div></td>

<!-- Quantity -->
<td width="9%"><input class="quantity" type="text" value="0" size="1" onchange="updateTotal(this)"/></td>

<!-- Subtotal -->
<td width="5%"><div class="subtotal" value="0"></div></td> 
```

还有我的 jQuery 函数：

```
function updateTotal(qty){

//Calculate Subtotal for each item
var quantity = $(qty).val();
var price = $('.price').html();
var subtotal = parseFloat(price) * parseInt(quantity);
$('.subtotal').text(subtotal);

//Calculate Grand Total
var sum = 0;
$('.subtotal').each(function(){
    sum += parseFloat($(this).text());
});
$('#grandTotal').html(sum); 
```

}

我的结果：

```
!(http://i45.tinypic.com/16a7exy.png)
!(http://i48.tinypic.com/5vu9uf.png) 
```

我不太确定发生了什么，我试图得到我正在使用的行，但我失败了。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:41:25.750

$('.subtotal').text(subtotal); 有一个隐含的 .each 。这会导致您覆盖每个 .subtotal 行。通过将该行替换为：

```
$('.subtotal').each(function(){
this.text(subtotal);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:42:19.437

使用这样的东西

```
$("#textbox").focusout(function () {
    updateTotal(value);

}); 
```

使用 Jquery 并从文本字段中获取值，当焦点不在时，只调用一次函数。Onchange 导致了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:43:27.140

如果您正在解决两件事，`.html`请参见此处：http: [//jsfiddle.net/UpGWP/](http://jsfiddle.net/UpGWP/)

其他明智的使用`.prop`api 或`.attr`api 获取 value 属性：http: [//jsfiddle.net/764J8/](http://jsfiddle.net/764J8/)

希望对需要有帮助！

我也`href`从 div中删除了`:)`

**代码**

```
function updateTotal(qty) {

    //Calculate Subtotal for each item
    var quantity = $(qty).val();
    var price = $('.price').attr('value');
    alert(price);
    var subtotal = parseFloat(price) * parseInt(quantity);
    $('.subtotal').text(subtotal);

    //Calculate Grand Total
    var sum = 0;
    $('.subtotal').each(function() {
        sum += parseFloat($(this).text());
    });
    $('#grandTotal').html(sum);
}​ 
```

# ruby - Ruby中消失的变量

> ID：12116967
> 
> 赞同：0
> 
> 时间：2012-08-24T21:35:27.627
> 
> 标签：ruby, ruby-on-rails-3

我对 FastImage gem 有一个奇怪的问题。当我尝试直接访问变量或调用它的方法时，我得到一个 nil 错误。Rails 说该变量不存在，所以像 FastImage.size(url)[0] 这样的东西不起作用。但是，如果我使用“puts”，即 puts FastImage.size(url)，则可以访问该变量。

在控制台中，一切正常。有任何想法吗？

```
 images.each do |d|
     puts FastImage.size(d["src"])[0] + FastImage.size(d["src"])[1] 
     results << d["src"]            
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:06:18.860

弄清楚了！如果 url 错误，FastImage 会抛出错误，因此需要检查 url 是否有效。发生的事情是其中一个 url 无效，因此它会在迭代中途抛出异常。

# php - 如何检查字符串是否可以安全地转换为另一个字符集而不会丢失？

> ID：12116968
> 
> 赞同：4
> 
> 时间：2012-08-24T21:35:31.810
> 
> 标签：php, character-encoding, iconv, mbstring

在将字符串从字符集转换为另一个字符集之前，是否有可能知道这种转换是否无损？

例如，如果我尝试将 UTF-8 字符串转换为 latin1，则无法转换的字符将替换为`?`. 检查`?`结果字符串以确定转换是否无损显然不是一种选择。

我现在能看到的唯一解决方案是转换回原始字符集，并与原始字符串进行比较：

```
function canBeSafelyConverted($string, $fromEncoding, $toEncoding)
{
    $encoded = mb_convert_encoding($string, $toEncoding, $fromEncoding);
    $decoded = mb_convert_encoding($encoded, $fromEncoding, $toEncoding);

    return $decoded == $string;
} 
```

不过，这只是一个快速而肮脏的方法，有时可能会出现意外行为，我想可能有一种更简洁的方法可以使用[mbstring](http://php.net/manual/en/book.mbstring.php)、[iconv](http://php.net/manual/en/book.iconv.php)或任何其他库来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:02:52.053

另一种方法是使用 set_error_handler() 设置您自己的错误处理程序。如果你在字符串上使用 iconv() ，如果它不能完全转换，它会抛出一个通知，你可以在那里捕获并在你的代码中做出反应。

或者您可以只计算编码前后的问号数量。或者使用 //IGNORE 调用 iconv() 并计算字符数。

没有一个建议比你的更优雅，但摆脱了双重处理。

# c# - 将列表<>、对象和原语的组合传递给 ASP MVC 控制器操作的方法

> ID：12116972
> 
> 赞同：3
> 
> 时间：2012-08-24T21:35:53.087
> 
> 标签：c#, asp.net, asp.net-mvc

我对 C# 相当陌生，并且正在创建我的第一个 MVC 项目，并且很难弄清楚将 3 个不同类型的参数传递给控制器​​操作的方法。这是我的控制器方法：

```
public ActionResult Create(Notification notification, string hash, list<int> users){
    //code inside method irrelevant...
} 
```

和我的通知模型：

```
public class Notification
{
    public int ID { get; set; }
    public string ApplicationID { get; set; }
    public string Description { get; set; }
    public System.DateTime DateStamp { get; set; }
} 
```

在我添加 List<> 参数之前，它通过像这样发布数据（或查询字符串）来正常工作：

```
ApplicationID=1&Description=yo&hash=abcdefg 
```

它神奇地知道这两个参数（“ApplicationID”和“Description”）属于通知对象。但现在我想添加一个整数列表<>。

这是可以完成的事情吗？您将如何格式化传递的数据/查询字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:40:09.403

> 这是可以做的吗

是的。

> 以及如何格式化传递的数据/查询字符串？

像这样：

```
ApplicationID=1&Description=yo&hash=abcdefg&users=1&users=2&users=3 
```

或者如果你喜欢这样：

```
ApplicationID=1&Description=yo&hash=abcdefg&users[0]=1&users[1]=2&users[2]=3 
```

此外，您可能会发现[以下博客文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)很有用。

但是在将你的控制器动作签名转换成一些意大利面条式的代码之前，你的代码的读者必须水平循环几个屏幕才能看到这个动作需要的数百万个参数，停止疯狂并引入一个视图模型：

```
public class CreateViewModel
{
    public Notification Notification { get; set; }
    public string Hash { get; set; }
    public List<int> Users { get; set; }
} 
```

进而：

```
public ActionResult Create(CreateViewModel model)
{
    //code inside method irrelevant...
} 
```

进而：

```
notification.applicationID=1&notification.description=yo&hash=abcdefg&users[0]=1&users[1]=2&users[2]=3 
```

# c# - SQL Server 2008 与 C# 的连接

> ID：12116977
> 
> 赞同：1
> 
> 时间：2012-08-24T21:36:06.840
> 
> 标签：c#, sql-server, sql-server-2008

无论我尝试什么，当我尝试对我创建的数据库运行一个简单的选择查询时，我都会收到以下错误（我已经在 Management Studio 中运行了确切的查询，它工作正常，并且使用的登录名在 sysadmin 组中):

> {“无法打开登录请求的数据库“Test”。登录失败。\r\n用户“JackLarson”登录失败。”} System.SystemException {System.Data.SqlClient.SqlException}

我的连接字符串是：

> 数据源=.\MPIT_TEST；初始目录=测试；集成安全=真；连接超时=30；用户实例=真

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T22:15:21.637

如果您的服务器名称是 SERVERSQLCOMPUTER，您必须在连接字符串中设置您的服务器名称，您的连接字符串将是：

```
Data Source=SERVERSQLCOMPUTER \MPIT_TEST;Initial Catalog=[Test_MPITRACKER];Integrated Security=True;Connect Timeout=30;User Instance=True 
```

此外，始终指定服务器名称以便能够在网络企业中的每台计算机上使用您的应用程序（servername\serverinstance 是绝对路径）。\serverinstance 表示您的应用程序与 Sql 服务器在同一台计算机上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:46:30.987

查看错误消息。它说它找不到名为*Test*的数据库，尽管您在连接字符串中指定了*Test_MPITRACKER 。*`_`当您的数据库名称中包含 undescore 字符时，似乎存在问题。

最简单的方法是从数据库名称中删除取消标记。

如果要使用带下划线字符的数据库名称，请尝试用方括号括起来，如下所示：

```
Data Source=.\MPIT_TEST;Initial Catalog=[Test_MPITRACKER];Integrated Security=True;Connect Timeout=30;User Instance=True 
```

但是，我尚未测试此解决方案，它基于此处找到的信息：[Database created in SQL Server Management Studios cannot be found by Visual Studio 2010](https://stackoverflow.com/questions/9677217/database-created-in-sql-management-studios-cannot-be-found-by-visual-studio-2010)。

**编辑**

根据评论中的对话，这不是本案问题的原因。

# asp.net-mvc - 通过示例学习 ASP MVC。奖励：在微软的 MVC 框架中使用 MVVM 的示例

> ID：12116979
> 
> 赞同：0
> 
> 时间：2012-08-24T21:36:14.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvvm

我觉得是时候从 webforms 毕业到 mvc 了。我一直在编写 webforms 和 jquery 很长一段时间。

你们都可以推荐你最喜欢的资源来学习这项技术吗？

奖励：我对使用 ViewModel（不一定是 MVVM 框架）来传递我的信息特别感兴趣。那里有什么好的资源吗？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:45:44.870

网络上有无数优秀的 ASP.NET MVC 教程。最好的起点是 Microsoft 在 MVC 站点上提供的示例：[http ://www.asp.net/mvc/samples](http://www.asp.net/mvc/samples)

对于 MVVM，您可以查看一个名为[Knockout.js](http://knockoutjs.com/)的 JavaScript 库，它处理客户端的视图模型。

随着您的进步，您可以开始使用 MVC 探索单页应用程序 (SPA)，它将 ASP.NET MVC 的一些更高级的功能与 Knockout 等框架相结合，从而在一个页面上生成一个功能齐全的应用程序。[Microsoft 的 BigShelf Sample SPA](http://www.asp.net/single-page-application/spa-samples/sample-bigshelf-application)就是一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T21:57:00.267

没有比微软的这个例子更清楚了：

*   [从 ASP.NET MVC 开始介绍 ASP.NET MVC 3 (C#)](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)和

*   [视图和](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)视图模型从视图模型开始

出于同样的原因，网络上有许多示例、示例和教程，但我提到的一个是你的下一步，它让你了解这个 ASP.NET MVC 的本质是什么......

希望这对您有所帮助并祝您使用 ASP MVC 好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T01:27:12.470

如果您不介意书籍，我推荐 Steven Sanderson 的 MVC 书籍，最新的是“Pro ASP.NET MVC 3 Framework”。它包含一个非常冗长的介绍和许多很好的技巧。在介绍之后，它继续非常彻底和完整地介绍 MVC 的特性和扩展点。

[http://www.apress.com/9781430234043](http://www.apress.com/9781430234043)

不过，您可能想要等待 MVC 4 版本（到目前为止，每个 MVC 版本都有一本书）。

小心使用 ViewModel。在 MVVM 上下文中，它是具有“控制器”方法的模型。你会做这个客户端。

MVC 上下文中的 ViewModel 也可以是为视图量身定制的域模型投影。与其将完整的域模型对象传递给视图，不如将其映射一个子集，或者将其详细数据的一些位扩展为与视图将呈现的内容完全匹配的 ViewModel。类似地，您可以拥有一个包含附加数据的 EditModel，例如为视图提供可选/可能值的列表。

# html - 没有包装的 100% 宽度页脚

> ID：12116983
> 
> 赞同：0
> 
> 时间：2012-08-24T21:36:42.113
> 
> 标签：html, css

我想知道是否有可能在代码中没有任何#wrappers 或 Divs 的 980px 内容有 100% 宽度的页脚？我是[Camendesign](http://camendesign.com/code/developpeurs_sans_frontieres)精神的粉丝，但由于将主体作为包装器的方法 - 页脚也保持包装。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:32:10.750

您只需要使页脚绝对位置宽度为 100%

见：http: [//jsfiddle.net/ExY78/1/](http://jsfiddle.net/ExY78/1/)

# php - 如何将类型传递给 PHP 中的函数

> ID：12116994
> 
> 赞同：2
> 
> 时间：2012-08-24T21:37:15.597
> 
> 标签：php, casting, type-conversion

我有以下功能可以安全地获取 cookie：

```
public static function get_cookie($parameter, $default)
{
    return isset($_COOKIE[$parameter]) ? $_COOKIE[$parameter] : $default;
} 
```

当我尝试读取`false`然后在三元运算符中使用它时，我看到该值被视为字符串（它被转换为`true`）。

我想将一个类型传递给这个函数并转换值，但不知道如何。

**更新**

正如 Niko 指出的那样，将“假”转换为布尔值不起作用：[http ://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)

我想，我必须始终将字符串存储在 cookie 中。（例如，对于我的情况，“是”和“否”而不是“假”和“真”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:48:56.860

绝对不需要在函数内部进行强制转换（特别是因为 PHP 是松散类型的）。

考虑以下用例：

```
$booleanValue = ClassName::get_cookie('foo', true, 'bool'); 
```

当您在外部进行转换时，您最终会得到相同数量的代码（但更具可读性！）`get_cookie()`：

```
$booleanValue = (bool) ClassName::get_cookie('foo', true); 
```

* * *

但是，您仍然可以分别为“false”和“true”字符串实现一个简单的开关：

```
public static function get_cookie($parameter, $default, $isPseudoBool = false) {
    $value = isset($_COOKIE[$parameter]) ? $_COOKIE[$parameter] : $default;

    if ($isPseudoBool) {
        $value = ($value === true || strcasecmp($value, 'true') === 0);
    }

    return $value;
} 
```

* * *

如果您仍然喜欢将类型转换移动到函数中，`settype()`那么您需要这样做：

```
public static function get_cookie($parameter, $default, $type) {
    $value = isset($_COOKIE[$parameter]) ? $_COOKIE[$parameter] : $default;
    settype($value, $type);
    return $value;
} 
```

`false`但请注意，如果您指定，这不会将字符串“false”转换为布尔值`$type = 'bool'`- 转换规则与解释器进行隐式转换时相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:43:51.173

试试这个

```
public static function get_cookie($parameter, $default)
{

    if( empty($parameter) ) return $default;       

    return isset($_COOKIE[$parameter]) ? $_COOKIE[$parameter] : $default;
} 
```

# c++ - 一旦程序完成并在 1 次击键后关闭，是否有办法让控制台窗口保持打开状态？

> ID：12116995
> 
> 赞同：6
> 
> 时间：2012-08-24T21:37:29.497
> 
> 标签：c++, command-line

命令行程序总是在执行完毕后关闭窗口。我知道您可以使用`cin.get();`等待用户输入输入。有没有一种方法可以让用户按任意键（而不是输入内容然后按 Enter）来关闭程序？我不想使用`system("PAUSE")`它，因为它是 Windows 特定的且速度慢。

我希望它暂停，以便用户可以看到它成功完成和其他详细信息。它可能不会从已经打开的命令行运行，并且可执行文件将被双击运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:40:43.043

是的。"system("PAUSE") 是一种方式。一个简单的 "getchar()" 或 "cin" 应该是绝对等价的 :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T22:50:00.360

这是操作系统的一个选项，而不是 C/C++ 中的选项。它需要控制终端如何打开和关闭。就像您调用批处理或命令行应用程序一样。

在此处发布代码或配置过于依赖平台（基本上是在我们的 IDE 中带有 onClose 语句的控制台 GUI 应用程序）

# ruby - 从孩子调用父母的方法

> ID：12116997
> 
> 赞同：0
> 
> 时间：2012-08-24T21:37:40.937
> 
> 标签：ruby

一些代码

```
class Parent

  def print
    p "Hi I'm the parent"
  end
end

class Child < Parent

  def initialize(num)
    @num = num
  end

  def print
    child_print
  end

  def child_print
    if @num == 1 
      #call parent.print 
    else
      p "I'm the child"
    end 
  end
end

c1 = Child.new(1)
c2 = Child.new(2)
c1.print
c2.print 
```

`Child`是 的一个实例`Parent`。`Print`是接口中暴露的方法，两个类都定义了它们。`Child`决定在（可能非常复杂）方法中做其他事情，但会在某些条件下调用其父方法。

我可以写

```
 def print
    if @num == 1 
      super
    else
      p "I'm the child"
    end 
  end 
```

这行得通，但如果它不仅仅是一个简单的单行比较，而是做很多复杂的事情，应该被分成另一种方法呢？在决定调用父类的方法之前，它可能需要进行一些计算。

或者也许有一种不同的、更好的设计方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:23:56.230

```
Parent.instance_method(:print).bind(self).call 
```

这已经很容易阅读了，但这里有一个解释。

1.  获取类的`#print`方法`Parent`
2.  将其绑定到您当前的对象
3.  称它为

PS：你甚至可以给参数`#call`，它们将被传递给被调用的方法。

PPS：也就是说，这样的代码几乎总是暗示你的类设计中存在问题。你应该尽可能地避免它。